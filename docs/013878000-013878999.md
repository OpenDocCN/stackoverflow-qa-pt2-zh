# StackOverflow 问答 13878000-13878999

# javascript - 如何从共享点列表中检索 json 对象

> ID：13878001
> 
> 赞同：1
> 
> 时间：2012-12-14T11:40:24.153
> 
> 标签：javascript, xml, json, sharepoint, sharepoint-2010

我用sharepoint 2007为自己创建了一个自定义列表，它与任何有效的excel电子表格完全相同。

有人告诉我，我可以将所有信息作为 json 或 XML 对象获取。我无权访问文件系统，只能访问 sharepoint Web 界面。

我可以只使用一个网址并做我的正常工作`getJson`吗？

```
 $.getJSON("http://somesharepointurl.asp?get=json",function(results){
        console.info(results);
        $.each(results, function(){

        });
    }); 
```

或者如果不编写一些后端服务就没有办法做到这一点？

**编辑**

```
https://someserver/sites/DisasterRecovery/eventmgmt/DRR/_vti_bin/owssvr.dll?Cmd=Display&List={B0ACA997-8A41-498B-97FE-B276D48F64D7}&XMLDATA=TRUE 
```

我试过这个......它给了我这个：

```
HTTP/1.1 200 OK
Server: Microsoft-IIS/7.5
Date: Fri, 14 Dec 2012 11:41:55 GMT
Connection: close 
```

不知道要找什么我害怕:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:51:14.943

1.  SharePoint 2007 不为您提供 JSON 格式的结果，仅提供 SOAP/XML Web 服务和您在更新中引用的 URL 协议
2.  确保将 /_vti_bin 部分附加到正确子站点的地址，而不是库（尽管如果你犯了这个错误，你会得到 404）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T13:42:52.670

找到了简单的答案：

[jquery.SPServices](http://spservices.codeplex.com/releases/view/81401)

您将需要 jQuery 1.4.2+ 来运行它，但它太棒了:) 它有更多的方法，而不仅仅是返回 XML 或 json。

```
 var query = "<Query><OrderBy><FieldRef Name='Created' Ascending='False' /></OrderBy</Query>";
 $().SPServices({
     operation:"GetListItems",
     async:false,
     listName:"Home Page Carousel",
     CAMLViewFields:"<ViewFields><FieldRef Name='userName'/><FieldRef Name='userDepartment'/><FieldRef Name='message'/></ViewFields>",
     CAMLQuery:query,
     CAMLRowLimit:10,
     completefunc:function (xData, Status) {
     console.info(xData);
     console.info(Status);
         $(xData.responseXML).SPFilterNode("z:row").each(function () {
             var $this = $(this);
             $this.attr("ows_message")//retrieve list data here and do stuff here
         });
     }
 }); 
```

这将返回一个可爱的 XML 块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T01:33:49.190

另一种选择，在 sharepoint 2010 中尝试使用像这样的 OData : `http://webname/_vti_bin/ListData.svc/listname`，过滤和排序的功能与标准 OData 相同，可以在这里找到参考：[http ://www.odata.org/documentation](http://www.odata.org/documentation)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T12:47:28.360

尝试将 &Query=* 添加到 URL 查询字符串

# javascript - 暂停服务器端执行并根据用户输入继续

> ID：13878002
> 
> 赞同：0
> 
> 时间：2012-12-14T11:40:25.363
> 
> 标签：javascript, asp.net, dialog, request, pausing-execution

我有一个要求，我在 Web 应用程序的服务器上处理一些 XML
假设**在 asp.net 页面上有一个按钮**。当用户单击按钮时，我调用一个函数说**button_click() -> 它又调用一些服务方法来处理 XML。**

问题场景::
现在假设我正在处理 XML，我完成了 50% 的处理。我注意到**我必须得到用户的确认，**因为 XML 中的某些值是无效的。此时我想向用户显示一个提示说是或否（可能是 javascript 提示），然后：
1.**如果用户单击 OK** -> 我想继续处理剩余 50% 的 XML
2.**如果用户单击 NO** -> 我想停止处理并显示错误消息。

经过大量的试验和错误以及我开发 Web 应用程序的知识后，我觉得没有办法做到这一点，除非我在用户单击 OK 时使用一些标志再次开始执行我的服务。但我的同事们并不相信，他们说一定有办法做到这一点，而我缺乏这方面的知识。 **它安静是一个有趣的问题**。

**注意：我们实际上是将现有的桌面应用程序移植到网络中，因此会出现对话框问题！

我请求你帮我解决这个问题！另外我想知道有没有其他方法可以处理这种情况？

编辑：添加更多信息。
实际上，我在这里所说的 XML 处理的意思是每个用户都有一些由服务器使用 WINDOWS 服务创建的 XML。当用户单击某个按钮时，我们必须处理该 XML，如果一切正确，我们必须调用第三方服务并获取结果并更新数据库。
有时发生的情况是，创建 XML 的 WINDOWS 服务放置了一些无效值（我们无法更正它们，因为它不受我们的控制）。因此，我们需要向用户确认某些值无效以及他是否要继续。通过这种方式，我们希望双重确保我们在用户同意的情况下发送无效值。问题是我们有时会在 XML 文件的末尾识别出无效的值（我们无法更改），所以我们不想再次处理 XMl！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:01:46.557

您应该设置一个进程，让前端（jquery/JavaScript）不断地从长时间运行的进程中轮询状态更新。一个典型的使用是你想更新一个完成百分比表，这样用户就可以看到正在取得的进展，除了在这种情况下，你不是检索 %done 值，而是检索一个状态代码和/或消息。如果有消息，将其显示给用户并更新回服务器；一旦状态码被发送到前端，支持的进程将进入等待状态，并且还需要轮询标志（例如可以像 db 表中的值一样简单）以获取用户响应。

以下是 %done 类型轮询过程的示例：

[http://sudhirmurthy.blogspot.com/2011/12/update-on-long-running-server-tasks.html](http://sudhirmurthy.blogspot.com/2011/12/update-on-long-running-server-tasks.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:06:45.587

由于您没有详细说明您的“ *XML 处理*”的实际细节，我将假设它正在上传/解析 XML 文档（可能是某种导入）。

第一步是让您的服务器能够在特定状态下*暂停XML 的执行（或处理）。*您能够做到这一点的唯一方法是存储处理的当前状态，例如行号、已处理的段等。然后需要将该状态存储在允许服务器从中断处继续的地方即服务器上的临时文件、内存缓存、后端数据库——由您来选择最适合您的应用程序的存储。

下一步是在处理暂停时通知客户端。由于这应该是一个原子操作，您可以使用一种称为[长轮询](http://en.wikipedia.org/wiki/Push_technology#Long_polling)的技术来保持与服务器的连接更长时间（更少轮询），并使通知感觉更加即时。或者，您可以使用定期轮询并定期查询状态 - 无论哪种方式，服务器的特定响应都会触发客户端抛出对话框。

最后，您想告诉服务器如何继续 - 这可以通过简单的 API 调用来完成，因为服务器拥有继续处理所需的所有信息。

一个例子，这个 API 可能看起来像：

```
public void ConfirmProcessing(Guid processingInstanceId, bool cancel)
{
     var processingState = GetProcessingStateFromStorage(processingInstanceId);
     if (!cancel)
     {
         // resume processing
     }
     else
     {
         // discard processing
     }
} 
```

当您收到来自服务器的确认通知时，它可以发送一个唯一的 id（即`processingInstanceId`），然后您通过 API 将其发送回来，并带有一个标志，指示您希望如何继续，例如继续/取消。

# compiler-errors - 带有 C++/CLI 的 VS2012 中的错误错误 C2039

> ID：13878003
> 
> 赞同：0
> 
> 时间：2012-12-14T11:40:47.207
> 
> 标签：compiler-errors, visual-studio-2012, c++-cli

我有一个使用 C++/CLI 的项目。然后我有一个像这样的事件处理程序：

```
void NotificationSystemEventHandler::NotificationServiceDetailViewRequested(System::Object^ sender, Notifications::NotificationViewer::DetailViewOpenRequestedEventArgs^ e)
{
    try
    {
        switch (e->Type->ID)
        {
            (...) 
```

该类`DetailViewOpenRequestedEventArgs`有一个称为`Type`类型的属性`DomainModel::CMN::NotificationType^`

然后`NotificationType`该类有一个名为 ID 的 int 类型的属性。当我访问该属性时，我得到一个 C2039 说 ID 不是它的成员，`NotificationType`因为我可以在对象浏览器上看到该属性。

唯一奇怪的是，Intellisense 在尝试查找类型时出错，并说该类型没有成员，但似乎编译器仍然可以正确解析类型，但不能正确解析其成员。

我正在其他几个地方使用该课程。如果需要帮助澄清事情，我可以提供更多信息/图像。

这些是问题的图像：

错误信息： ![错误信息](../Images/e2de51bd59b753c3cda5062333cd5c0a.png)

对象浏览器： ![对象浏览器](../Images/fac2b7532708ee6f9e568dcf55291746.png)

错误的弹窗： ![在此处输入图像描述](../Images/e08ed4cb5f0b288c138d94b5b352d71c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:50:29.210

删除所有引用并将它们再次添加到项目中解决了这个问题....

# c# - 使用内部节点解析 xml

> ID：13878004
> 
> 赞同：2
> 
> 时间：2012-12-14T11:40:48.627
> 
> 标签：c#, xml, linq, linq-to-xml

我正在尝试解析下面给出的 xml：

```
<Item status="SUCCESS" message="">
   <ItemDate>12/21/2012
      <ItemType>MyType1
         <ItemUrl title="ItemTitle">http://www.itemurl1.com</ItemUrl>
      </ItemType>
   </ItemDate>
   <ItemDate>12/22/2012
      <ItemType>MyType2
         <ItemUrl title="Item2Title">http://www.itemurl2.com</ItemUrl>
      </ItemType>
   </ItemDate>
</Item> 
```

正如你所看到的，我不确定我们是否可以调用这个 xml，但这就是我从遗留服务中得到的。我所追求的是解析它并将其加载到对象图中。我的对象模型如下：

```
 public class Item
    {
        public string Date { get; set; }
        public string Type { get; set; }
        public string Url { get; set; }
        public string Title { get; set; }
    } 
```

所以，基本上当我完成上述 xml/string 的解析后，我得到了一个 Item 对象的集合。你能建议我如何用一些代码片段来实现这一点吗？

我尝试使用 XDocument，但鉴于 xml 的特殊结构，我无法做到这一点。

谢谢，-迈克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:54:05.383

```
XDocument xdoc = XDocument.Load(path_to_xml);
var query = from date in xdoc.Descendants("ItemDate")
            let type = date.Element("ItemType")
            let url = type.Element("ItemUrl")
            select new Item()
            {
                ItemDate = ((XText)date.FirstNode).Value,
                ItemType = ((XText)type.FirstNode).Value,
                ItemUrl = (string)url,
                ItemTitle = (string)url.Attribute("title"),
            }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T12:12:53.723

作为`lazyberezovsky's` `Linq2Xml`投影的替代方法，您还可以考虑在加载 Xml 之前使用[Xml 转换进行展平。](https://stackoverflow.com/questions/34093/how-to-apply-an-xslt-stylesheet-in-c-sharp)

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                version="1.0"
                >
    <xsl:output omit-xml-declaration="yes" method="xml" version="1.0" indent="yes" />

    <xsl:template match="/">
        <Items>
            <xsl:apply-templates select="Item/ItemDate" />
        </Items>
    </xsl:template>

    <xsl:template match="ItemDate">
        <Item>
            <xsl:attribute name="ItemDate">
                <xsl:value-of select="normalize-space(./text()[1])" />
            </xsl:attribute>
            <xsl:attribute name="ItemType">
                <xsl:value-of select="normalize-space(ItemType/text()[1])" />
            </xsl:attribute>
            <xsl:attribute name="ItemUrl">
                <xsl:value-of select="normalize-space(ItemType/ItemUrl/text()[1])" />
            </xsl:attribute>
            <xsl:attribute name="ItemTitle">
                <xsl:value-of select="normalize-space(ItemType/ItemUrl/@title)" />
            </xsl:attribute>
        </Item>
    </xsl:template>
</xsl:stylesheet> 
```

This produces the following Xml, which is straightforward to deserialize, e.g. using the `[XmlAttribute]` [attribute](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributeattribute.aspx) with XmlDocument.

```
<Items>
  <Item ItemDate="12/21/2012" ItemType="MyType1" ItemUrl="http://www.itemurl1.com" ItemTitle="ItemTitle" />
  <Item ItemDate="12/22/2012" ItemType="MyType2" ItemUrl="http://www.itemurl2.com" ItemTitle="Item2Title" />
</Items> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T12:47:27.103

Because you have the node Item only once in the sent xml you get only one Item from lazyberezovsky's code. And that is correct. I suppose you want to get items but load them by ItemDate nodes. To do so use the following modified code:

```
XDocument xdoc = XDocument.Load(new StringReader(xml));
var query = from i in xdoc.Descendants( "ItemDate" )
                    let date = i
                    let type = date.Element("ItemType")
                    let url = type.Element("ItemUrl")
                    select new Item()
                            {
                                Date = ((XText) date.FirstNode).Value,
                                Type = ((XText) type.FirstNode).Value,
                                Url = (string) url,
                                Title = (string) url.Attribute("title"),
                            };
        var items = query.ToList(); 
```

# c# - WPF DataGrid - 遍历行并访问模板列中的控件

> ID：13878008
> 
> 赞同：1
> 
> 时间：2012-12-14T11:40:57.830
> 
> 标签：c#, wpf, xaml, datagrid

我来自 ASP.NET 背景，我的任务是维护一个 WPF 项目，所以这是一个学习曲线。

我有一个带有以下 XAML 的 DataGrid

```
<DataGrid Name="StockGV" AutoGenerateColumns="False" IsReadOnly="True">
        <DataGrid.Columns>
            <DataGridTemplateColumn Header="Scanned" IsReadOnly="true">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Image Name="StatusImage" Source="tick.png"></Image>
                        <DataTemplate.Triggers>
                            <DataTrigger Binding="{Binding PalletScanned}" Value="False">
                                <Setter TargetName="StatusImage" Property="Source" Value="cross.png"/>
                            </DataTrigger>
                        </DataTemplate.Triggers>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
            <DataGridTextColumn Header="Pallet Number" IsReadOnly="True" Binding="{Binding PalletNumber}">
            </DataGridTextColumn>
            <DataGridTextColumn Header="Quantity" IsReadOnly="True" Binding="{Binding Quantity}">
            </DataGridTextColumn>
            <DataGridTemplateColumn IsReadOnly="true">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <xctk:IntegerUpDown HorizontalAlignment="Left" Name="integerUpDown1" Maximum="{Binding Quantity}" Minimum="0" VerticalAlignment="Top" Value="{Binding Quantity, Mode=OneWay}" />
                        <DataTemplate.Triggers>
                            <DataTrigger Binding="{Binding PalletScanned}" Value="False">
                                <Setter TargetName="integerUpDown1" Property="IsEnabled" Value="False"/>
                            </DataTrigger>
                        </DataTemplate.Triggers>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

用户更新最后一个字段（IntegerUpDown 控件），然后单击网格下方的“保存”按钮。我需要它来遍历每一行，获取 IntegerUpDown 控件的值并将其保存到数据库中。如果这是 ASP.NET，我会这样做：

```
foreach (GridViewRow row in gv.Rows)
{
     long pk = (long)gv.DataKeys[row.RowIndex].Value;
     int value = (int)((IntegerUpDown)row.FindControl("integerUpDown1")).Value;
     //Save to DB
} 
```

我将如何在 WPF 中执行此操作？请注意，如果有帮助，DataGrid 将绑定到匿名类型

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T11:49:28.750

哇，这不是它的本意:)

您通常应该将 绑定`DataGrid`到`ItemsSource`T 类型的。在 Columns 中，您应该绑定到 T 类型的属性。

IntegerUpDown 上的每个更改都会`Control`在基础集合中表示。

要稍后访问此值，您`ViewModel`只需`Collection`使用 Linq 查询即可获取值。

您已经在控件中获得了此代码：

```
Value="{Binding Quantity, Mode=OneWay}" 
```

因此，您可以访问 Quantity 属性以获取所需的值。

请记住：如果用户应该能够更改 Quantity `Property`，则`Binding`必须是`Mode=TwoWay`并且还需要为此属性提供公共设置器。

# c++ - IDE 和库和 Makefile

> ID：13878009
> 
> 赞同：1
> 
> 时间：2012-12-14T11:41:05.537
> 
> 标签：c++, ide, makefile

如果我写了一些名为 file1.cpp file2.cpp file3.cpp 等等的文件。并且 file1.cpp 需要库 l1，file2.cpp 需要 l2，file3.cpp 需要 l3。我们应该逐行编写makefile吗？并且似乎 IDE 仍然无法检测到我们的程序使用哪个库。那么如何让 IDE/{any thing} 自动检测库？

感谢您的申请！

# php - MySQL - 通过一组数字的所有组合查找具有逗号分隔值的字段

> ID：13878011
> 
> 赞同：2
> 
> 时间：2012-12-14T11:41:11.050
> 
> 标签：php, mysql, combinations, subset, powerset

我们在 MySQL 中有一个产品表，其中每一行都有一个以逗号分隔的选项值的字段，这些选项组合成这个产品。在下面的方案中，您可以看到两个表。逗号分隔值的字段是 option_ids，例如，这可能看起来像 2、5、6、23 或 4、2、76。这些数字是选项表中存在的选项。

产品：
`|product_id|name|description|option_ids|price|`

选项：
`|option_id|type_id|label|group|pos|count|price|`

我们得到的输入是一组独特的选项。我们想在 option_ids 中找到具有这组选项或其子集的每个产品。

我们现在这样做的方法是生成选项数组的幂集，以便我们拥有选项数组的所有可能组合。然后我们生成一个 mysql 查询，用于查询“OR WHERE”语句中的所有这些组合。

这里的问题是幂集呈指数增长，所以当我们有一个包含 16 个唯一选项的数组时，幂集给出了一个包含 65536 种可能性的数组。我们必须增加 php 的内存使用量才能正常工作，但现在我们遇到了 MySQL 问题，因为查询变得如此庞大。

有没有另一种方法来解决这个问题？

我希望我已经提供了足够的信息，如果没有，请询​​问！

编辑：第三张表会给我们带来同样的问题，因为我们需要找到子集......这并不是说一系列选项是一个产品，它可以是一个产品，但也可以是 2 或 3 个产品。例如：选项 1,2 制作产品 A，选项 2,3 制作产品 B，选项 4,5,6 制作产品 C。如果我们有选项数组 [1,2,4,5,6]，我们希望找到产品 A 和 C。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T11:45:27.713

使用第三个表：

> Product_Option_Assoc (product_id, option_id)

对于产品应具有的每个选项，在该表中插入一行。这为您提供了产品和选项之间真正[的一对多](http://en.wikipedia.org/wiki/Cardinality_%28data_modeling%29)关系。选项的数量很容易变化，并且很容易查询拉取数据和更新（不需要逗号解析）。

**示例查询：**获取具有相关选项的产品：

```
$options = array(1, 55, 23); // hard coded but could come from a form (remember to validate/cast as ints)
$optionCommaList = implode(',', $options);

SELECT
    p.name
FROM
    Product_Option_Assoc a
LEFT JOIN
    Products p ON p.product_id = a.product_id
WHERE
    a.option_id IN ($optionCommaList); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:46:58.617

使用[FIND_IN_SET(str,strlist)](https://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)可以解决问题吗？

我不确定它的效率，但会给您一种简单的方法来搜索具有特定选项的产品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T13:17:39.443

通过将选项列表转换为单个字符串，您将失去数据库的所有功能并强迫自己使用字符串匹配和其他组合。使用链接表。这是正确的方式。然后弄清楚如何为它编写查询。

```
Product_option ( product_id, option_id ) 
```

这就是你说你想要的：

> 示例：选项 1,2 制作产品 A，选项 2,3 制作产品 B，选项 4,5,6 制作产品 C。如果我们有选项数组 [1,2,4,5,6]，我们希望找到产品 A 和 C。

换句话说，您想要检索没有不在查询数组中的选项的所有*产品*。这是如何做到的：

```
SELECT * from Product WHERE NOT EXISTS (
    SELECT product_id id, option_id opt from Product_option 
        WHERE id = Product.product_id AND opt NOT IN (1, 2, 4, 5, 6)
    ) 
```

您可以通过连接显式执行此操作，但`EXISTS`在我看来，查询更清楚地传达了这个想法。

# amazon-s3 - S3：获取特定“目录”级别的所有文件

> ID：13878014
> 
> 赞同：2
> 
> 时间：2012-12-14T11:41:19.643
> 
> 标签：amazon-s3

有没有办法在 S3 上查询特定“目录”级别的所有文件（是的，我知道这不是一个真正的目录）。我需要以下所有文件：

```
/dir1/dir2/some_file 
```

问题是 dir2 还包含更多我不想要文件的子目录，例如：

```
/dir1/dir2/dir3/some_file 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:51:07.113

在您的请求中设置`delimiter`参数。`/`请参阅[GET Bucket（列出对象）](http://docs.amazonwebservices.com/AmazonS3/latest/API/RESTBucketGET.html "Amazon Simple Storage Service API 参考")文档。

# c# - 如何在 C# 中制作文件下载器？

> ID：13878016
> 
> 赞同：0
> 
> 时间：2012-12-14T11:41:34.540
> 
> 标签：c#, download, download-manager

我想用 C# 编写一个简单的文件下载器。我想知道它是如何工作的？例如。如果我给它一个 URL，它会做什么？我对此有一个非常粗略的想法。

1.  它将发送一个 HTTP 请求。
2.  服务器将回复并发送文件。
3.  下载器将获取文件并将其存储在硬盘中。

这是我第一次编写 Web 技术。所以我几乎没有任何想法。
有人可以解释一下步骤吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:54:23.113

一个片段让你开始：

```
using(var wc=new WebClient())
{
    wc.DownloadFile("http://some/internet/resource",@"c:\some\local\filename");
} 
```

# spring - Spring MVC 中的 Maven 2 和主题

> ID：13878018
> 
> 赞同：2
> 
> 时间：2012-12-14T11:41:36.400
> 
> 标签：spring, model-view-controller, maven

我对 Maven 和主题有疑问。我正在从本教程中制作示例：http: [//viralpatel.net/blogs/spring-3-mvc-themes-tutorial-example/](http://viralpatel.net/blogs/spring-3-mvc-themes-tutorial-example/) 在主题教程中我有一个问题。在此示例中，作者在 Eclipse 中使用“动态 Web 项目”。我使用的是 maven 2，我的文件夹结构不同。而且我不知道我应该在哪里制作“主题”目录。我试图在“main/resources”、“webapp/resources/themes”、“webapp/themes”中制作它，但它不起作用。当然`<resources mapping="/resources/**" location="/resources/" />`，我的 servlet-config 文件中有。而且我还添加`<link rel="stylesheet" href="" type="text/css"/>`了我的 JSP 文件，就像人们在本教程下的评论中所说的那样。但风格仍然没有改变。那么，有谁知道我应该怎么做才能在 Maven 中正确配置主题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:57:21.623

教程中的`WebContent`文件夹将`src\main\webapp`在 Maven 中。

所以例如 `WebContent\index.jsp`将映射到`src\main\webapp\index.jsp`

然后您不需要修改任何路径或资源映射，因为生成的战争文件（带有`WebContent`文件夹的 Eclipse 动态 Web 项目和带有 的 maven 项目`src\main\webapp`）将是相等的。

# excel - Excel Marcro - 根据行号删除一行

> ID：13878022
> 
> 赞同：2
> 
> 时间：2012-12-14T11:41:42.980
> 
> 标签：excel, vba

请帮助..我需要一个宏来根据行号（行号）删除特定行，例如，如果我想删除第 2、9、20、150 行，如何在宏中完成，请提供宏，我可以在其中复制和粘贴代码中的行号并从模块运行。我在 sheet2 A 列中有行号，它们是要从 sheet1 中删除的行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:52:40.450

一行：

```
Rows(4).Delete Shift:=xlUp 
```

对于多行：

```
Union(Rows(4), Rows(7)).Delete Shift:=xlUp 
```

对于您的特定情况，允许根据源工作表中的行号列表动态删除行。将 SourceWks 更改为存储数字的工作表，并将 deletedWks 更改为将要删除行的工作表。

```
Dim deleteRows As Range
Dim data() As Variant
Dim i As Double

Dim SourceWks As Worksheet, deleteWks As Worksheet

Set SourceWks = Sheet2
Set deleteWks = Sheet1

    With SourceWks
        data = .Range(.Cells(1, 1), .Cells(1, 1).End(xlDown))
    End With

    Set deleteRows = deleteWks.Rows(data(1, 1))

    For i = 2 To UBound(data, 1)

        Set deleteRows = Union(deleteRows, deleteWks.Rows(data(i, 1)))

    Next i

    deleteRows.Delete Shift:=xlUp 
```

# python - Python - Tkinter 预选按钮

> ID：13878023
> 
> 赞同：1
> 
> 时间：2012-12-14T11:41:46.207
> 
> 标签：python, macos, tkinter

我在 python 中有一个小脚本，它正在使用 tkinter 创建一个窗口弹出窗口。一些要填充的文本，然后是两个按钮：关闭/确定。

我想允许用户按“Enter”，然后按下 OK 按钮。我的意思是我希望预先选择（突出显示）OK 按钮，这样您就可以使用 enter 而无需单击它。

我希望我足够清楚。谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:35:12.173

用于`button.focus()`“预选”按钮：

```
import Tkinter as tk

class App(object):
    def __init__(self, master):
        dismiss = tk.Button(master, text = 'dismiss', command = self.on_dismiss)
        ok = tk.Button(master, text = 'ok', command = self.on_ok)
        ok.bind('<Return>', self.on_ok)
        dismiss.bind('<Escape>', self.on_dismiss) 
        ok.focus()
        dismiss.pack(fill = tk.BOTH)
        ok.pack(fill = tk.BOTH)
    def on_ok(self, event = None):
        print("Aww, it's okay!")
    def on_dismiss(self, event = None):
        print("Dismissed!")
root = tk.Tk()
app = App(root)
root.mainloop() 
```

或者，如果您希望密钥全局`Enter`调用，请更改为.`self.on_ok``ok.bind``master.bind`

# java - java 我可以在一行中创建一个定义为null的字符串吗？

> ID：13878028
> 
> 赞同：5
> 
> 时间：2012-12-14T11:42:09.877
> 
> 标签：java, string, constructor, super

我想将字符串参数作为“null”传递

但是，这是针对构造函数中的超级方法的-所以我不能这样做

```
String s = null;
super(s); 
```

我不能只是做

```
super(null) 
```

因为这将导致模棱两可的方法调用。我也不希望有一个为此为空的实例变量，这似乎不优雅。

有没有办法创建一个空字符串？

注意

```
 new String(null) //does not compile 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T11:46:26.700

就这样做

```
super((String)null); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T11:50:38.203

CodeMan 贴出正确答案，另一种解决方案，远离 null，并考虑使用 Empty 字符串进行初始化

```
super(""); 
```

这将避免以后进行空检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T12:04:08.617

您遇到的问题是编译器不知道应该使用哪个构造函数。

String 有各种单参数构造函数。

```
 String(String)
 String(char value[])
 String(StringBuffer)
 String(StringReader) 
```

使用`String(null)`时，不知道应该使用哪个。

请记住，当您使用`null`as 参数（在方法或构造函数中）时，您应该**始终**将其转换为所需的类型。

`new String((String) null);`

# symfony - Symfony2 类用户界面不存在

> ID：13878029
> 
> 赞同：3
> 
> 时间：2012-12-14T11:42:16.237
> 
> 标签：symfony, user-interface

我正在使用 Symfony 2.1 制作客户案例管理系统，我偶然发现了这个我无法解决的奇怪问题。出于某种原因，当我使用 执行 showAction 时`CustomerCaseController`，出现以下错误：

> “类 HSW\AshaBundle\Entity\UserInterface 不存在”
> 500 内部服务器错误

我不知道应用程序的哪个部分需要该接口。**如果我创建一个空`UserInterface.php`类，问题就会消失**，一切正常。为什么`showAction`需要`UserInterface`？

我已将问题范围缩小到与 showController 中的这段代码有关：

```
$customercase = $this->getDoctrine() ->getRepository('HSWAshaBundle:CustomerCase') ->find($id); 
```

我有以下实体：

*   `User`（用于登录和提交案例）
*   `Customer`（对于客户）
*   `CustomerCase`（案例）。

与和实体`CustomerCase`具有多对一关系，方式如下：`Customer``User`

**// src/HSW/AshaBundle/Entity/CustomerCase.php** 命名空间 HSW\AshaBundle\Entity;

```
use Doctrine\ORM\Mapping as ORM;
use Gedmo\Mapping\Annotation as Gedmo;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * CustomerCase
 *
 * @ORM\Table(name="hsw_customerCase")
 * @ORM\Entity
 * @Gedmo\Loggable
 * @Gedmo\SoftDeleteable(fieldName="deletedAt")
 */
class CustomerCase
{

/** 
 * @ORM\ManyToOne(targetEntity="Customer", inversedBy="customerCases") 
 * @ORM\JoinColumn(name="customer_id", referencedColumnName="id", nullable=false) 
 */
protected $customer;

/** 
 * @ORM\ManyToOne(targetEntity="User", inversedBy="createdCustomerCases") 
 * @ORM\JoinColumn(name="creator_id", referencedColumnName="id", nullable=false) 
 */
protected $creator;

/** 
 * @ORM\ManyToOne(targetEntity="User", inversedBy="holdingCustomerCases") 
 * @ORM\JoinColumn(name="holder_id", referencedColumnName="id", nullable=false) 
 */
protected $holder;
.....etc.... 
```

**// src/HSW/AshaBundle/Entity/CustomerCase.php** 命名空间 HSW\AshaBundle\Entity;

```
use Symfony\Component\Security\Core\User\EquatableInterface;
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Security\Core\User\AdvancedUserInterface;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * HSW\AshaBundle\Entity\User
 *
 * @ORM\Table(name="hsw_users")
 * @ORM\Entity(repositoryClass="HSW\AshaBundle\Entity\UserRepository")
 */

class User implements AdvancedUserInterface
{
.....etc.... 
```

**与用户实体的关系会以某种方式影响这一点吗？**`CustomerCase.php`这是我在and之间看到的唯一可见的区别`Customer.php`（`showAction`没有 的情况下有效`UserInterface`）。

有人可以帮我调试这种行为吗？`UserInterface`仅仅因为 Symfony 需要 is（出于未知原因），所以拥有一个空类似乎真的没用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:07:29.583

我猜你没有将[UserInterface](http://api.symfony.com/2.1/Symfony/Component/Security/Core/User/UserInterface.html)的命名空间导入你的用户类（我猜它是一个 User 类，因为你没有提到它）：

```
use Symfony\Component\Security\Core\User\UserInterface;

class User implements UserInterface
{
} 
```

阅读[官方文档中的 PHP 命名空间](http://php.net/manual/en/language.namespaces.php)。

# c# - 为什么 PrinterSettings.Duplex 不报告打印首选项中的设置？

> ID：13878032
> 
> 赞同：0
> 
> 时间：2012-12-14T11:42:25.853
> 
> 标签：c#, .net, printing

在我的应用程序中，我们根据所选打印机是否设置为双面打印或单面打印来确定是否在文档的某些部分之间插入分页符。

标准的 .net [PrinterSettings 类](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printersettings.duplex%28v=vs.71%29.aspx)具有 Duplex 属性。当我们在代码中检查它时，即使在打印首选项中选择了双面打印（双面打印），它也设置为单面打印。

此检查正确地报告了我们测试过的所有其他打印机的双面设置，但对于一个人来说却失败了。

不确定是否重要，但打印机是夏普品牌的网络打印机。

基本上，我想知道是否有任何其他方法可以检查双工设置，或者关于如何隔离问题的任何好主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:30:04.857

这是打印机驱动程序的常见问题，无论设置如何，它们都会报告单工。不太清楚他们为什么这样做，我猜这与打印机本身通过操作面板更改的设置有关。因此他们无法可靠地报告真实设置，因为在他们报告值后它可能很容易改变。

您对此无能为力，只需确保在打印之前选择所需的设置即可。换句话说，不要把它留在打印机上，让选择在你的 UI 中可用。

# .htaccess - .htaccess 文件重定向与变量不匹配

> ID：13878039
> 
> 赞同：0
> 
> 时间：2012-12-14T11:42:50.270
> 
> 标签：.htaccess, mod-rewrite

这是代码：

```
 Options +FollowSymLinks
    RewriteEngine on
    ReWriteBase /

    RewriteCond %{REQUEST_FILENAME}             !^index\.php
    RewriteRule ^(.*)$                       index.php?url=$1 [L] 
```

当我打开站点并查看 index.php 文件时，GET 变量“url”显示“index.php”。我需要它来显示我试图访问的 URL。

前任：

> [http://www.yoursite.com/fake/path/to/page](http://www.yoursite.com/fake/path/to/page)

应该成为

> [http://www.yoursite.com/index.php?url=fake/path/to/page](http://www.yoursite.com/index.php?url=fake/path/to/page)

这样 index.php 可以显示 GET 变量

```
$_GET['url'] = fake/path/to/page 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:06:23.447

你的情况：

```
RewriteCond %{REQUEST_FILENAME}             !^index\.php 
```

将永远是真的，因为`%{REQUEST_FILENAME}`永远不会开始`index.php`（它前面会有一条路径）。试试这个：

```
RewriteCond %{REQUEST_URI} !^/index.php 
```

# amazon-web-services - 如何找到 AWS CloudFormation 堆栈创建失败的根本原因？

> ID：13878043
> 
> 赞同：6
> 
> 时间：2012-12-14T11:43:01.533
> 
> 标签：amazon-web-services, amazon-cloudformation

我正在尝试使用 AWS CloudFormation 安装一个简单的堆栈。我创建了一个 IAM 用户并传入一些脚本来安装 puppet 和 git thru userdata，以便它可以由 cloudinit 执行。

问题是由于某种原因模板在中途失败并且堆栈创建被回滚。我正在通过管理 gui 执行此操作。但它并没有告诉我为什么它失败了。我可以看到一些资源被创建，然后它失败了。有没有办法查看详细的日志以查看到底是什么失败了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T14:09:09.610

[AWS CloudFormation](http://aws.amazon.com/cloudformation/)的[AWS 管理控制台](http://aws.amazon.com/console/)在堆栈详细信息面板中提供了一个*事件*选项卡，该选项卡列出了堆栈生命周期事件，并依次提供了一个*原因*列，其中包含错误的更多详细信息，以防万一。

 **此列公开通过[DescribeStackEvents](http://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_DescribeStackEvents.html)操作检索的[StackEvent](http://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_StackEvent.html)数据类型的`ResourceStatusReason`字段：

> **ResourceStatusReason** - 与资源关联的成功/失败消息**

# javascript - Dijit 复选框树事件委托

> ID：13878044
> 
> 赞同：3
> 
> 时间：2012-12-14T11:43:14.037
> 
> 标签：javascript, dojo, dijit.tree

我正在尝试实现类似于[http://thejekels.com/dojo/cbtree_AMD.html的 dijit 复选框树](http://thejekels.com/dojo/cbtree_AMD.html)

并覆盖这样的方法：

```
 connect.connect( tree, "_onExpandoClick", model, this,function(/*data.item*/ item) {
       console.log("My onExpandoClick");
 }); 
```

Dijit Tree javascript 文件已包含此事件的处理程序方法。我的问题是

> 我希望在执行树 js 方法处理程序之后调用上述覆盖的方法。按照现在，它总是首先调用。任何想法。（dijit 1.7）

在我的设置中，以下代码不起作用：

```
 require(["dijit/TitlePane"]);

    require([
        "dojo/_base/lang",
        "dojo/dom",
        "dojo/aspect",
        "dijit/CheckboxTree", 
        "dojox/data/JsonRestStore",
        "my_ext/CheckboxForestStoreModel", 
        "dojo/domReady!"
        ], function(dom, Tree, JsonRestStore, CheckboxForestStoreModel) {
            var treeStore = new JsonRestStore({ target: "ObjectTreeServlet/",labelAttribute:"name",allowNoTrailingSlash:true});
            var treeModel = new CheckboxForestStoreModel({
                    store: treeStore,
                    deferItemLoadingUntilExpand: true,
                    rootId: "ROOT",
                    rootLabel: "NETWORK",
                    childrenAttrs: ["children"],
                    query:"?id=0"         

                });

            var treeStateSession= '<%=session.getAttribute("treeState")%>';
            //alert(treeStateSession);
            var tree = new Tree({
                    id : "tree",
                    model : treeModel,
                    showRoot : false,
                    persist: true,
                    setCheckboxOnClick : false,

                    _sessionVal:treeStateSession
                    },
                'treeDiv');

            function getParameterByName(url,name) {
                var match = RegExp('[?&]' + name + '=([^&]*)')
                                .exec(url);
                return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
            }
            dojo.require("dojo.aspect");
            /*
            aspect.after(tree, "_onExpandoClick",  function(item) {
                console.log(tree.getSessionValue());
                document.getElementById("treeState").value=tree.getSessionValue();
                console.log(document.getElementById("treeState").value.length);

            }); */
aspect.after(tree, "_onExpandoClick", function() {
console.log("My onExpandoClick"); 
```

});

*CheckBoxTree.js 内的代码：*

```
_state: function(node, expanded){
        // summary:
        //      Query or set expanded state for an node
        if(!this.persist){
            return false;
        }
        var path = array.map(node.getTreePath(), function(item){
                return this.model.getIdentity(item);
            }, this).join("/");
        if(arguments.length === 1){
            return this._openedNodes[path];
        }else{
            if(expanded){
                this._openedNodes[path] = true;
            }else{
                delete this._openedNodes[path];
            }
            var ary = [];
            for(var id in this._openedNodes){
                ary.push(id);
            }
            //console.log(ary.length);
            //cookie(this.cookieName, ary.join(","), {expires:365});
            var sessionVal=ary.join(",");
            console.log("TreeSTATE CheckBOX");

     **//FROM HERE SEND sessionVal TO MAIN HTML PAGE WHERE TREE IS CREATED?**

            //this.getSessionValue(ary.join(","));
        }
    }, 
```

*我尝试了什么，但没有给出预期的结果。：*

```
aspect.after(tree, "_state", function() {
                    console.log("TreeSTATE  "  + tree.getSessionValue());
                    document.getElementById("treeState").value=tree.getSessionValue();

                    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T11:57:11.473

改用[`dojo/aspect`](http://livedocs.dojotoolkit.org/dojo/aspect)：

```
// var aspect = require("dojo/aspect");
// var lang   = require("dojo/_base/lang");

aspect.after(tree, "_onExpandoClick", lang.hitch(this, function(item) {
    console.log("My onExpandoClick");
})) 
```

**编辑：**还请注意，`dijit/Tree`以及`cbtree/Tree`发出`onOpen`和`onClose`事件，因此您可以注册事件侦听器以展开和折叠节点操作：

```
tree.on("open", function(item, node) {
    console.log("onOpen:", item, node);        
});

tree.on("close", function(item, node) {
    console.log("onClose:", item, node);        
}); 
```

**编辑#2**：根据下面的讨论，我将我的方法从使用更改`dojo/aspect`为子类`Tree`化（因为那里有一些古怪的异步时髦）。所以第一个子类`Tree`：

```
// var declare  = require("dojo/_base/declare"); 
// var lang     = require("dojo/_base/lang");
// var Deferred = require("dojo/_base/Deferred");

var MyTree = declare([Tree], {

    persist: true,

    _expandNode: function(node, recursive) {
        var dfd = this.inherited(arguments);
        Deferred.when(dfd, lang.hitch(this, function() {
            if (recursive === undefined) {
                this.set("state", this._objectToArray(this._openedNodes));
            }
        }));
        return dfd;
    },

    _collapseNode: function(node) {
        this.inherited(arguments);
        this.set("state", this._objectToArray(this._openedNodes));
    },

    _objectToArray: function(object) {
        var arr = [];
        for (var each in object) {
            if (object.hasOwnProperty(each)) {    
                arr.push(each);
            }
        }
        return arr;
    }
}); 
```

然后你可以观察`MyTree`实例的展开/折叠状态变化：

```
tree.watch("state", function(/*String*/key, /*Array*/oldValue, /*Array*/newValue) {
    console.log(newValue);        
}); 
```

在行动中看到它：http: [//jsfiddle.net/phusick/LcPzv/](http://jsfiddle.net/phusick/LcPzv/)

# ruby - 没有 dotall /s 标志的 ruby regex dotall

> ID：13878045
> 
> 赞同：0
> 
> 时间：2012-12-14T11:43:18.157
> 
> 标签：ruby, regex

每个人。

我想我在 ruby​​ 正则表达式中遗漏了一些东西。

似乎我不能使用`%r/match code/s`，因为 Ruby 只有`/m`, 不允许我搜索匹配行而忽略新行符号。

我现在需要的：

```
line 1 : a b c
line 2 : a b
line 3 : c
line 4 : a
line 5 : b c 
```

我需要在这里找到三场比赛

```
1\. a b c
2\. a b (new line) c
3\. a ( new line ) b c 
```

这可以通过使用 /s 标志来完成，但是 /s 标志用于在 Ruby 中进行编码，而 /m 标志只是给我这个与所有文本的匹配

```
a b c 
a b ( new line ) c
a ( new line ) b c 
```

当我像这样搜索表达式时`%r/a.*c/m`

我将不胜感激任何信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T11:50:36.520

Ruby`m`用于启用 dotall 模式，请参阅[regular-expressions.info](http://www.regular-expressions.info/ruby.html)。所以你的表达正是你想要的`s`修饰符。

你的问题是另一个问题，你的正则表达式匹配太贪心了。所以你应该把它改成

```
%r/a.*?c/m 
```

所以`.*?`只会匹配**下一个**“c”而不是最后一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T11:50:34.523

您需要关闭星星的贪婪，以便它会在第一个“c”处停止

```
/(a.*?c)/m 
```

在此处查看演示：[http ://rubular.com/r/D8RptUOsjR](http://rubular.com/r/D8RptUOsjR)

# c# - 使用c#获取数据库中的所有表名

> ID：13878046
> 
> 赞同：2
> 
> 时间：2012-12-14T11:43:18.193
> 
> 标签：c#, sqlconnection, getschematable

我正在使用**VS2010、.Net 4.0、MS SQL SERVER 2008**。

我以为我知道如何从数据库中获取所有表名。但是我错了。有了表名，我也得到了视图名。但是当我为视图做这件事时，我只得到视图。我不知道为什么会这样。

这是我的代码，我尝试过的：

```
 public DataTable getAllTables(string serverName, string dbName, string authenticationType, string Login, string pass)
    {
        using (SqlConnection sqlConn = Return_Conn(serverName, dbName, authenticationType, Login, pass))
        {
            sqlConn.Open();
            DataTable dt = sqlConn.GetSchema("Tables");
            DataTable dt1 = new DataTable();

            string[] column = { "TABLE_NAME" };
            dt1 = dt.DefaultView.ToTable("dd", false, column);

            sqlConn.Close();
            return dt1;
        }
    }

    public DataTable getAllViews(string serverName, string dbName, string authenticationType, string Login, string pass)
    {
        using (SqlConnection sqlConn = Return_Conn(serverName, dbName, authenticationType, Login, pass))
        {
            sqlConn.Open();
            DataTable dt = sqlConn.GetSchema("Views");
            DataTable dt1 = new DataTable();

            string[] column = { "TABLE_NAME" };
            dt1 = dt.DefaultView.ToTable("dd", false, column);

            sqlConn.Close();
            return dt1;
        }
    } 
```

在**`DataTable dt = sqlConn.GetSchema("Tables");`**这一行中，**dt**包含所有表和视图。在 dt 中，Views**的****table_type**显示**“View** ”，**table**显示**“Base Table”**。

 ******但在**`DataTable dt = sqlConn.GetSchema("Views");`**这一行中，**dt**仅包含视图。

这里有什么问题？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:46:26.670

我会运行这样的查询而不是 GetSchema：

```
SELECT * FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_TYPE='BASE TABLE' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-04T05:20:23.687

如果您只想获取表格，那么您将需要限制模式。因为`Table`支持四个限制：(1) **Catalog**、(2) **Owner**、(3) **Table**和 (4) **TableType**。

```
GetSchema (string collectionName, string[] restrictionValues); 
```

所以你可以写成：

```
var tables = sqlConn.GetSchema("Tables", new string[] { null, null, null, "BASE TABLE" }); 
```******

# google-plus - 从 Google+ 的 URL 获取活动 ID？

> ID：13878052
> 
> 赞同：6
> 
> 时间：2012-12-14T11:43:43.517
> 
> 标签：google-plus

假设我有一个活动的 URL (https://plus.google.com/u/0/113050383214450284645/posts/D6wBp4445Lb)。我想获取活动 ID，以便可以使用 API 资源管理器测试 Google+ API。最快的方法是什么，最好不用编写任何代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T18:21:28.480

最简单的方法是只使用 API 资源管理器来获取帖子 ID。

从 url (113050383214450284645) 中获取用户 ID，然后对其或 activity.list 执行搜索。

您的 URL 的示例查询：

*   [使用搜索 API](https://developers.google.com/apis-explorer/#p/plus/v1/plus.activities.search?query=113050383214450284645&_h=6&)
*   [使用活动列表 API](https://developers.google.com/apis-explorer/#p/plus/v1/plus.activities.list?userId=113050383214450284645&collection=public&_h=9&)

活动提要中的所有项目都将具有您需要的 ID。

```
 "items": [
  {
   "kind": "plus#activity",
   "etag": "\"vOizmBw459qRNcWY-IdfxxuCIbk/9EWWtEdBWwclTPqfqnRuN6-34Rg\"",
   "title": "Have you visited the World of Coke yet?  What was your favorite part?",
   "published": "2012-11-05T14:54:01.010Z",
   "updated": "2012-11-05T14:54:01.010Z",
   "id": "z134ctopapf0vlfec23ahjiykpj2zf0ay04",
   "url": "https://plus.google.com/113050383214450284645/posts/D6wBp4445Lb",
   "actor": {
    "id": "113050383214450284645",
    "displayName": "Coca-Cola",
    "url": "https://plus.google.com/113050383214450284645",
    "image": {
     "url":         "https://lh3.googleusercontent.com/-3o0qMaMvuwc/AAAAAAAAAAI/AAAAAAAAAng/X3xmoXJpksI/photo.jp    g?sz=50"
    }
   }, 
```

在此示例中，帖子 ID 为 z134ctopapf0vlfec23ahjiykpj2zf0ay04。

如果您想更准确，可以通过搜索特定匹配的 url 来确保检索到正确的帖子。以下代码应该让您大致了解如何在 JavaScript 中完成此操作：

```
for (var activity in activities){
  activity = activities[activity];
  if (activity['url'] == postUrl){
    targetActivity = activity;
    document.getElementById('result').value= 'ID is:\n' + activity.id;
    isFound = true;
  }
} 
```

我创建了一个小演示，展示了这是如何在这里完成的： [Demo: URL to ID](http://wheresgus.com/URLtoID)

# android - Android xml vs java 布局性能

> ID：13878053
> 
> 赞同：25
> 
> 时间：2012-12-14T11:43:49.257
> 
> 标签：android, performance

Android SDK 为开发人员提供了在 xml 文件中或直接在 java 代码中编写布局。我读过它，每个人都说 xml 更易于维护和编写更简单，但它们是静态的。否则java布局是动态的，但没有人评论性能问题。我发现关于性能的唯一一件事是嵌套布局对性能有负面影响。与其编写嵌套布局，不如制作自定义布局。到现在为止还挺好 ;）。

布局设计呢？xml还是java代码？xml 文件如何在运行时或编译时解析我的 android？即使它们在编译时被解析，它们也应该在运行时使用。那么在 xml 中声明 RelativeLayout 或者在 onCreate 方法中声明哪个会更快呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-14T11:50:47.900

布局定义用户界面的视觉结构，例如活动或应用程序小部件的 UI。您可以通过两种方式声明布局：

*   **在 XML 中声明 UI 元素**。Android 提供了一个简单的 XML 词汇表，对应于 View 类和子类，例如用于小部件和布局的那些。

*   **在运行时实例化布局元素。**您的应用程序可以通过编程方式创建 View 和 ViewGroup 对象（并操作它们的属性）。

Android 框架使您可以灵活地使用这些方法中的一种或两种来声明和管理应用程序的 UI。例如，您可以在 XML 中声明应用程序的默认布局，包括将出现在其中的屏幕元素及其属性。然后，您可以在应用程序中添加代码，这些代码将在运行时修改屏幕对象的状态，包括那些在 XML 中声明的对象。

ADT Plugin for Eclipse 提供 XML 的布局预览 — 打开 XML 文件后，选择 Layout 选项卡。

您还应该尝试使用 Hierarchy Viewer 工具来调试布局——它显示布局属性值、绘制带有填充/边距指示器的线框，以及在模拟器或设备上调试时完整呈现的视图。

layoutopt 工具可让您快速分析布局和层次结构是否存在效率低下或其他问题。

> 用 XML 声明 UI 的优势在于，它使您能够更好地将应用程序的表示与控制其行为的代码分开。您的 UI 描述在您的应用程序代码之外，这意味着您可以修改或调整它，而无需修改源代码并重新编译。例如，您可以为不同的屏幕方向、不同的设备屏幕尺寸和不同的语言创建 XML 布局。此外，在 XML 中声明布局可以更轻松地可视化 UI 的结构，从而更容易调试问题。

当你编译你的应用程序时，每个 XML 布局文件都被编译成一个 View 资源。您应该在`Activity.onCreate()`回调实现中从应用程序代码加载布局资源。通过调用来做到`setContentView()`这一点，并以以下形式将对您的布局资源的引用传递给它：

我认为它太多了，只需访问此链接[http://developer.android.com/guide/topics/ui/declaring-layout.html](http://developer.android.com/guide/topics/ui/declaring-layout.html)并获取更多信息..

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-16T07:33:11.863

决定在何处声明 UI 组件的一个主要因素是它在应用程序生命周期中的行为。如果它是静态的，我会声明 XML 中需要的所有属性，如果它根据用户交互而改变，我必须在活动中实现它。

我会尽可能多地使用 XML，以获得上述好处，例如连贯性、更好地管理各种屏幕尺寸、本地化、资源管理等，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-19T13:46:41.170

这在性能方面并没有太大区别，因为您的资源 xml 文件也将使用 aapt 工具进行预编译。因此 XML 转换将发生在源资源文件中，并且与 java 源文件一起，它们将被编译为 Java 类文件。因此，性能应该大致相同也是合乎逻辑的，因为最终两者都将被编译并且两者的内存都将在运行时分配。我还检查了我的示例应用程序，通过 XML 和 Java 创建了类似的视图，并且在分析它们时我发现视图的呈现大约需要相同的时间。:-)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2022-02-20T19:10:27.310

```
`Button b1;`
`b1 = new Button(this);`
`FrameLayout fl =  new FrameLayout(this);`
`fl.addView(b1);` 
```

开发时间比 xml 少，而且加载和卸载时间只有在你实际操作时才能证明。:)

# grails - Grails 命令对象默认值

> ID：13878055
> 
> 赞同：3
> 
> 时间：2012-12-14T11:44:03.450
> 
> 标签：grails

我正在尝试使用 Grails 命令对象来过滤操作参数。但是如果 URL 中不存在参数，我想设置一个默认值。

```
class ListCommand {

    String order = 'desc'
    String sort = 'startDate'

}

def list(ListCommand cmd) {
    println cmd.order
} 
```

我认为该行为与创建域对象一样。我不想处理动作中的每个参数，例如：

```
cmd.order = params.order ?: 'desc' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T19:50:01.140

如果你总是使用这样的动作声明：

```
def list(ListCommand cmd) { ... } 
```

或者

```
def list = {ListCommand cmd -> ...} 
```

你可以试试这个：

```
class ListCommand {
    String order
    String sort

    def beforeValidate() {
        order = order ?: 'desc'
        sort = sort ?: 'startDate'
    }
} 
```

因为在那些动作定义中 validate() 方法总是调用命令对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:03:23.530

我认为您不能为命令对象字段设置默认值。

我建议您在绑定参数之前创建一个服务来使用默认值初始化您的命令对象：

```
def service

def action = {
    def listCommand = service.createListCommand() 
    bindData(listCommand, params)
}

class Service {
   def createListCommand() {
       def listCommand  = new ListCommand()
       initDefaultValues(listCommand)
       return listCommand
   }

def initDefaultValues(def listCommand){
        listCommand.order = 'desc'
        listCommand.sort = 'startDate'
    }
} 
```

# php - 确认密码字段

> ID：13878057
> 
> 赞同：0
> 
> 时间：2012-12-14T11:44:11.347
> 
> 标签：php, jquery, mysql, forms

我正在尝试在将用户详细信息发送到服务器之前确认我的密码字段。我曾尝试使用 jquery 和 php 来实现这一点，但我无法让它工作。我知道这应该相当简单，但它在不确认密码的情况下发送详细信息。

我的代码如下（为了清楚起见，我删除了一些 div）

```
 <form onSubmit="return validate()" id="register" method="post" action="../script/sendUserDetails.php">
    <p style=" font-size:1.8em; color:black;">Ready</p>
    <p style=" font-size:1.4em; color:black;">Enter your details</p>

        <label for="fname">First Name:&nbsp;</label><br/>
        <input autofocus name="fname" type="text" id="fname" 
         class="textEntry" required placeholder="First Name"/><br />
        <label for="lname">Last Name:&nbsp;</label><br/>
        <input name="lname" type="text" id="lname" class="textEntry" required placeholder="Last Name"/><br />
           <label for="email">Email:&nbsp;</label><br/>
        <input name="email" type="email" id="emailR" class="textEntry" required placeholder="Email"/><br />

   <p style="font-size:1.8em; color:black;">Steady</p>
    <p style="font-size:1.4em; color:black;">And your address</p>
        <label for="address1">Address1:&nbsp;</label><br/>
        <input name="address1" type="text" id="address1" class="textEntry" required placeholder="Address"/><br />
        <label for="address2">Address2:&nbsp;</label><br/>
        <input name="address2" type="text" id="address2" class="textEntry" placeholder="Address" /><br />
        <label for="town">Town:&nbsp;</label><br/>
        <input name="town" type="text" id="town" class="textEntry" required placeholder="Town"/><br />
        <label for="postcode">Post Code:&nbsp;</label><br/>
        <input name="postcode" type="text" id="postcode" class="textEntry" required placeholder="Post Code"/>
        <br />
    <label for="phone">Phone:&nbsp;</label><br/>
        <input name="phone" placeholder="Phone" type="text" id="phone" class="textEntry" required/><br />

<p style="font-size:1.8em; color:black;">Go</p>
    <p style="font-size:1.4em; color:black; ">Now a password</p>

         <label for="password">Password:&nbsp;</label><br/>
        <input name="password" placeholder="Password" type="password" id="passwordR" class="passwordEntry" 
          required/><br />
         <label for="confirm_password">Confirm Password:&nbsp;</label><br/>
        <input name="confirm_password" placeholder="Password" type="password" id="confirm_password" class="passwordEntry" 
          required/><br />

        <p ><input class="button-link" type="submit" id="cu" value="Create Account"/></p>
       </form> 
```

我的php代码是；

```
<?php
 include("dbconnect.php");
 $fname=$_POST['fname'];
 $lname=$_POST['lname'];
 $address1=$_POST['address1'];
 $address2=$_POST['address2'];
 $town=$_POST['town'];
 $postcode=$_POST['postcode'];
 $phone=$_POST['phone'];
 $email=$_POST['email'];
 $password=$_POST['password'];
 $query = "select email from members where email='$email'";
 $link = mysql_query($query);
 if (!$link) {
  die('query error');
 }
 $num=mysql_num_rows($link);
 if ($num>0){
  die('email already exists'); //email already taken
 }
 $query = "insert into members (fname, lname, address1, address2, town, postcode, phone, email,  
   password) values('$fname','$lname','$address1','$address2','$town','$postcode','$phone',
   '$email','$password')";
 $link = @ mysql_query($query);
 if (!$link) {
  die('table write error');
 }
 header("location:../members/members.master.php?page=regconfirm.php");
?> 
```

以及我尝试使用的 jquery 代码（来自此站点）；

```
function validate(){

    if(!document.getElementById("Password").value==document.getElementById("confirm_password").value)alert("Passwords do no match");
    return document.getElementById("Password").value==document.getElementById("confirm_password").value;
   return false;
    } 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T11:47:43.787

你的密码ID拼错了...

这里

```
id="passwordR" 
```

应该

```
<input name="password" placeholder="Password" type="password" id="password" class="passwordEntry" required/> 
```

所以你的条件在这里总是错误的，因为它无法获得密码的值

```
if(!document.getElementById("Password").value==document.getElementById("confirm_password").value)alert("Passwords do no match"); 
```

这应该是

```
 if(!document.getElementById("password").value==document.getElementById("confirm_password").value)alert("Passwords do no match"); 
```

**注意：** 如果您通过 id 获取元素...两者的 id 应该完全相同..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:51:43.977

试试这个`passwordR`

```
 function validate(){
 var password = document.getElementById("PasswordR") ;
 var confpassword = document.getElementById("confirm_password") ;
  if(password.value != confpassword.value) {
 alert("Passwords do no match");

 return false;
 }
 return true;
  } 
```

# c# - 使用 c# 在静默模式下安装 MS Outlook 2010

> ID：13878058
> 
> 赞同：2
> 
> 时间：2012-12-14T11:44:10.817
> 
> 标签：c#

我正在创建一个 Windows 应用程序，我想使用`C#`代码以静默模式安装 Outlook 2010。以及我们需要传递给它的参数是什么以及如何传递 KEY 以进行激活。

所有这些都必须在`C#`（类似于下面的代码）中完成

```
 Process process = new Process();   
     process.StartInfo.FileName = "msiexec.exe";   
     process.StartInfo.Arguments = "";   
     process.Start();   
     process.WaitForExit(); 
```

请让我知道你的建议。

谢谢，

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:51:13.447

只需使用参数“/？”运行 Outlook 安装 或“/帮助”。它将显示所有可用的安装命令行参数。静音模式在列表中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:29:44.080

我已经为 Outlook 安装创建了一个配置文件，如下面的链接中所述，

[http://technet.microsoft.com/library/e16af71c-fed4-40da-a886-95e596c3999e(Office.14).aspx#ElementPIDKey](http://technet.microsoft.com/library/e16af71c-fed4-40da-a886-95e596c3999e(Office.14).aspx#ElementPIDKey)

我已将配置文件传递给参数，

```
 Process process = new Process();
     process.StartInfo.FileName = @"C:\temp\Setup.exe";
     process.StartInfo.Arguments = @"/config \\C:\temp\config.xml";
     process.Start();
     process.WaitForExit(); 
```

# java - 如何将 Dojo Data 网格单元格值重定向到另一个页面？

> ID：13878060
> 
> 赞同：2
> 
> 时间：2012-12-14T11:44:13.513
> 
> 标签：java, html, dojo

我有一个dojo数据网格..它有10行（单元格）的值..点击第一行时，它应该与第一行值一起重定向到另一个页面（html页面）。请帮助我实现这一目标...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T07:34:48.353

您不能像那样简单地在两个 html 页面之间共享数据。但是您有一些选项，例如使用 cookie 或使用 php get arguments ( `http://www.url.net?arg1=tada`) 或诸如此类。本地数据库（例如 SQLite）也可以提供帮助。

还是访问单元格值的问题？

# google-visualization - 更改静态谷歌图表 [条形图] 背景颜色

> ID：13878061
> 
> 赞同：1
> 
> 时间：2012-12-14T11:44:17.023
> 
> 标签：google-visualization

我需要更改条形图的谷歌静态图表的背景颜色。任何人有任何解决方案？现在颜色是白色[#ffffff]

[https://chart.googleapis.com/chart?cht=bhs&chd=t:60,40&chs=250x100&chl=Hello|World](https://chart.googleapis.com/chart?cht=bhs&chd=t:60,40&chs=250x100&chl=Hello|World)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:00:01.167

您正在寻找类似的参数

```
chf=bg,s,ff0000 
```

![在此处输入图像描述](../Images/ab07c6ce9f6cbba1bf41b0bb4ad0ba69.png)

```
https://chart.googleapis.com/chart?cht=bhs&chd=t:60,40&chs=250x100&chl=Hello|World&bg=FF0000&chf=bg,s,ff0000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:54:24.617

尽管您已将此标记为 CSS/HTML 问题，但在阅读了 Google 上的文档后，javascript 可能会更好地实现这一点。在您的 javascript 代码中，包括以下内容：

```
 var options = {

      //The background color for the main area of the chart. Can be either a simple HTML color string, for example: 'red' or '#00cc00', or an object with the following properties.
      backgroundColor: 'black',

      //The color of the chart border, as an HTML color string
      backgroundColor.stroke: 'blue'

     //The chart fill color, as an HTML color string
      backgroundColor.fill: 'yellow'
    }; 
```

删除不需要的东西。我包括了一些额外的自定义选项。

来源：[谷歌图表工具文档](https://developers.google.com/chart/interactive/docs/gallery/linechart#Configuration_Options)。那里有更多自定义选项可用。

# rest - PHP未在xampp中加载oauth模块并在Windows 32位系统中加载wamp

> ID：13878064
> 
> 赞同：1
> 
> 时间：2012-12-14T11:44:29.460
> 
> 标签：rest, oauth

```
http://stackoverflow.com/questions/6803265/how-to-install-php-extension-locally-on-wamp 
```

我点击此链接并下载了链接中可用的两个 oauth 文件

编辑扩展文件夹中的 dll 并编辑 php.ini 文件

但是扩展没有加载。

我正在使用 magento，所以我需要启用 oauth 模块才能让我的休息 api 正常工作

有人解决了这个问题吗？

# queue - 架构问题：ActiveMQ 和长队列

> ID：13878069
> 
> 赞同：1
> 
> 时间：2012-12-14T11:45:17.980
> 
> 标签：queue, jms, activemq

我们使用 AMQ 将数千条消息从 app1 发送到 app2。App2 通过 http 连接将所有这些消息发送给客户端但是现在我们遇到了一个问题，如果一些客户端缓慢地消费他们的消息，所有其他客户端都等待，因为 AMQ 会一一发送消息，因此慢速客户端的消息会在很长一段时间内阻塞其他客户端。

非常感谢如何解决此类问题的任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:48:51.530

您需要详细说明 App2 如何通过 HTTP 发送消息。从本质上讲，您需要设计独立于客户端的部分，以便一旦您向至少一个客户端发送消息，您就需要准备好下一条消息。

也许APP2中的一些内部队列数据结构可以将每条消息放入每个客户端的唯一队列中。然后每个客户端可以以自己的速度吃掉每个队列。

根据您的要求和客户端总数，您甚至可能希望在 ActiveMQ 服务器上为每个客户端放置一个队列，并使用 Pub/Sub[模式](http://activemq.apache.org/enterprise-integration-patterns.html)将消息放入每个客户端队列。如果客户端数量有限，这可能可以实现。

# objective-c - 嵌入的 youtube 不以横向模式播放 (iOS6)

> ID：13878071
> 
> 赞同：1
> 
> 时间：2012-12-14T11:45:21.867
> 
> 标签：objective-c, xcode, uiwebview, ios6

我有一个 UIViewcontroller 推送第二个 UIViewcontroller。第二个 UIViewcontroller 有一个 UIWebview：一些文本和一些来自 youtube url（嵌入）的视频。当我点击播放器正在打开的视频时，屏幕仍处于纵向模式，而不是旋转到横向。

视频在 ios5 上使用以下功能正常工作：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(movieIsPlaying:) name:@"UIMoviePlayerControllerDidEnterFullscreenNotification" object:nil];

- (void)movieIsPlaying:(NSNotification *)notification
{

[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeRight | UIInterfaceOrientationLandscapeLeft animated:NO];
} 
```

该问题仅发生在 ios6 上。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:19:17.643

这是来自 Apple 的 iOS SDK XCode4.5+ 的引用（请参阅`UIViewController`类参考，处理视图旋转）：

> 在 iOS 6 中，您的应用支持在应用的 Info.plist 文件中定义的界面方向。视图控制器可以覆盖supportedInterfaceOrientations 方法来限制支持的方向列表。一般情况下，系统只会在窗口的根视图控制器或呈现为填满整个屏幕的视图控制器上调用该方法；子视图控制器使用其父视图控制器为它们提供的窗口部分，并且不再直接参与有关支持哪些旋转的决策。

同样在 iOS6 中，类`shouldAutorotateToInterfaceOrientation:`方法`UIViewController`已被弃用。

因此，在您的根视图控制器中，您执行 ff：

```
- (BOOL)shouldAutorotate {
  return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
  return UIInterfaceOrientationMaskPortrait;
} 
```

顺便说一句，“根视图控制器”是`UIViewController`您设置为 appDelegate 窗口对象的 rootViewController 的任何子类。您通常在 appDelegate 的`application:didFinishLaunchingWithOptions:`方法中执行此操作。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
  self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
  // Override point for customization after application launch.
  self.window.rootViewController = [FFDashboardController create];
  [self.window makeKeyAndVisible];
  return YES;
} 
```

还要检查这个[答案](https://stackoverflow.com/questions/12260261/shouldautorotatetointerfaceorientation-not-being-called-in-ios-6/13137994#13137994)

# java-me - GSM 数据包嗅探器（用于诺基亚 s40 系列）提取电话信息

> ID：13878074
> 
> 赞同：0
> 
> 时间：2012-12-14T11:45:33.907
> 
> 标签：java-me, gsm, telephony, nokia-s40

我需要通过 J2ME midlet 提取诺基亚 s40 系列的电话信息：

a) IMEI b) IMSI c) 内存信息（空闲和总计） d) 电池状态 e) 运营商名称 f) 漫游状态 g) 国家代码 h) 区号 i) 信号强度

但不幸的是，那里没有可用的 API。我试图搜索它，但到处都说没有可用的 API 像[这里](http://www.developer.nokia.com/Community/Discussion/showthread.php?220434-Telephony-information-S40)

所以，我认为数据包嗅探器可以帮助我分析数据包并检查它以获取所需的信息。也欢迎其他解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:39:07.200

尽管您所追求的信息并未作为 40 系列上的 API 公开，但其中大部分是通过[诺基亚特定的系统属性公开的。](http://www.developer.nokia.com/Resources/Library/Java/#!developers-guides/application-framework/system-properties/nokia-specific-system-properties.html)您可以使用它们构建自己的 API。

# django - selenium 不允许修改 httpheaders 以在基于 ajax 的 django 表单中添加诸如 csrf 令牌之类的东西

> ID：13878075
> 
> 赞同：1
> 
> 时间：2012-12-14T11:45:46.737
> 
> 标签：django, testing, selenium

我正在使用 selenium 进行自动浏览器测试，但在测试登录过程时它失败了。原因是我在 requestHeader 中发送我的 csrf 令牌的方式，而不是与我发现处理基于 ajax 表单的标准方式的表单一起发送。[这里](http://brack3t.com/ajax-and-django-views.html)

我找到了解决此问题的一种方法，即使用代理向浏览器生成的请求注入额外的标头。但如果可以的话，我正在寻找更好的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:02:53.617

我假设您使用的是 Selenium WebDriver 而不是旧的 Senelnium RC。

Selenium WebDriver 只是使用浏览器的自动化用户。

你应该不需要任何定制来让它工作。只需确保 jQuery 完成所有设置，并且浏览器应该将自定义标头与请求一起发送。

# php - 在 PHP 中将负毫秒转换为人类可读的格式

> ID：13878083
> 
> 赞同：1
> 
> 时间：2012-12-14T11:46:29.760
> 
> 标签：php, time, converter, notation, negative-number

好的，所以我有这个功能：

```
function convertTime($ms){

    $sec = floor($ms/1000);
    $ms = $ms % 1000;

    $min = floor($sec/60);
    $sec = $sec % 60;
    $t = $sec;

    $hr = floor($min/60);
    $min = $min % 60;
    $t = $min;

    $day = floor($hr/60);
    $hr = $hr % 60;
    $t = $hr . " h " . $t . " m";

    return $t;
} 
```

它将毫秒转换为 h:m，它适用于正数。例子：

```
echo convertTime(60000);       // outputs: 0 h 1 m
echo convertTime(60000*70);    // outputs: 1 h 10 m
echo convertTime(60000*60*48); // outputs: 48 h 0 m 
```

（我不希望它转换为天，所以它显示实际小时数很好）不幸的是，它不能很好地处理负数......

```
echo convertTime(-60000);    //outputs: -1 h -1 m (should be 0 h -1 m) 
```

关于如何弥补这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:08:17.753

这是您的原始函数，已格式化，删除了不必要的行并添加了三行：

```
function convertTime($ms)
{
    $sign = $ms < 0 ? "-" : "";
    $ms = abs($ms);
    $sec = floor($ms / 1000);
    $ms = $ms % 1000;
    $min = floor($sec / 60);
    $sec = $sec % 60;
    $hr = floor($min / 60);
    $min = $min % 60;
    $day = floor($hr / 60);
    $hr = $hr % 60;
    return "$sign$hr h $min m";
}
echo convertTime(+60000);      //  0 h 1 m
echo convertTime(-60000);      // -0 h 1 m
echo convertTime(-60000 * 60); // -1 h 0 m 
```

这是我的相同功能的版本：

```
function convertTime($ms)
{
    $xx = $ms < 0 ? "-" : "+";
    $ms = abs($ms);
    $ss = floor($ms / 1000);
    $ms = $ms % 1000;
    $mm = floor($ss / 60);
    $ss = $ss % 60;
    $hh = floor($mm / 60);
    $mm = $mm % 60;
    $dd = floor($hh / 24);
    $hh = $hh % 24;
    return sprintf("%s%dd %02dh %02dm %02d.%04ds", $xx, $dd, $hh, $mm, $ss, $ms);
} 
```

# javascript - 如何解析和返回谷歌方向服务响应？

> ID：13878085
> 
> 赞同：-1
> 
> 时间：2012-12-14T11:46:40.013
> 
> 标签：javascript, ios, google-maps-api-3, asynccallback

我如何解析来自谷歌方向服务的响应？我从我的 iOS WebView 调用 javascript 代码，我想从 java 脚本返回一些值到 iOS。当我使用警报功能显示时，我可以看到响应，但它没有返回值。我认为这可能是函数是回调函数。所以我该怎么做 ？请告诉我解决方案

这是我的代码：

```
 var value = function() {

var directionsService = new google.maps.DirectionsService();
var directionsDisplay = new google.maps.DirectionsRenderer();
   // var response=new google.maps.DirectionsResult;

var map = new google.maps.Map(document.getElementById('map'), {
                              zoom:7,
                              mapTypeId: google.maps.MapTypeId.ROADMAP
                              });

directionsDisplay.setMap(map);
directionsDisplay.setPanel(document.getElementById('panel'));

var request = {
    origin: 'Chicago',
    destination: 'New York',
    travelMode: google.maps.TravelMode.TRANSIT
};
var temp;
directionsService.route(request,
                        function(response, status)
                        {
                           if (status == google.maps.DirectionsStatus.OK)
                            {
                           t=response.routes[0].copyrights;
                           temp=t;
                           alert(t);
                            directionsDisplay.setDirections(response);
                                  return t;

                            }
                        } );

     return temp;

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:12:11.953

而不是在另一个函数中使用 returnValue`value()`作为变量，您必须在回调中调用另一个函数`directionsService.route()`并将`t`其作为参数传递给另一个函数。

`value()`请求方向服务是一个异步过程，返回时它还没有完成`temp`，这就是为什么`temp`仍然会是`undefined`。

# regex - 为什么这个 mod_rewrite 301 重定向不起作用？

> ID：13878090
> 
> 赞同：0
> 
> 时间：2012-12-14T11:47:06.827
> 
> 标签：regex, apache, mod-rewrite

其他 RewriteRules 工作，所以我已经替换了这些，并将这个放在第一位。故意修改它会返回 500 错误，所以我确信我的语法是错误的，而不是我的配置。

我重新设计了一个曾经有如下 URL 的网站：

```
/product_view.asp?product_id=123&images_id=456 
```

我的新网站的网址如下：

```
/shop/product/123 
```

（这两个`123`s 与我保持相同的数据库相同）

我的重写规则是：

```
RewriteRule ^product_view.asp\?product_id=([0-9]+).*$ /shop/product/$1 [R=301,L] 
```

但什么也没有发生——没有错误，没有 500 秒，什么也没有。

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:41:13.827

`RewriteRule`仅指路径，不包括`QUERY_STRING`. `product_id`从查找。`QUERY_STRING`_`RewriteCond`

```
RewriteCond %{QUERY_STRING} (?:^|&)product_id=([0-9]+)
RewriteRule ^product_view\.asp$ /shop/product/%1? [R=301,L] 
```

分组的部分`RewriteCond`可以称为`%1`。它可以用于`RewriteRule`.

如果放在*替换*部分`?`的末尾，将被丢弃。（如果您的 Apache 版本是 2.4 或更高版本，您可以使用flag 来代替。）它并不总是需要，但也许您不喜欢像.*`RewriteRule``QUERY_STRING``QSD``/shop/product/123?product_id=123&images_id=456`*

 *查看[mod_rewrite 文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)了解详细信息。*

# java - 使用 Spring Security 记录请求

> ID：13878091
> 
> 赞同：0
> 
> 时间：2012-12-14T11:47:16.093
> 
> 标签：java, spring, spring-security

如何通过 Spring Security 记录对 Spring REST 服务的请求？（指出一些例子）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:02:53.513

一旦 Spring Security 正确设置并工作，您可以通过获取 SecurityContext 并从那里获取 UserDetails 来访问当前登录用户的凭据（或至少是用户名）：

```
final Object principal = SecurityContextHolder.getContext().getAuthentication().getPrincipal();

String username = null;

if (principal instanceof UserDetails) {
    username = ((UserDetails) principal).getUsername();
} else {
    username = principal.toString();
}

log.debug("User: " + username + " has accessed the service"); 
```

我们在其中一个应用程序中做到了这一点。这是一个 Spring MVC 程序，但这并不重要。

但是，我不会真正将用户名记录到某个文件中。您可以尝试设置某种协议数据库，并记录更多信息（“X 在 YY 时间访问 MYSERVICE 做 Z”或其他内容）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:05:19.823

web.xml

```
<filter>
    <filter-name>securityFilter</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    <init-param>
        <param-name>targetFilterLifecycle</param-name>
        <param-value>true</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>securityFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <url-pattern>//</url-pattern>
</filter-mapping> 
```

弹簧配置.xml

```
...

<bean class="com.examlple.MyLogFilter" id="logFilter"/>

...

<bean class="org.springframework.security.web.FilterChainProxy" id="securityFilter">
    <sec:filter-chain-map path-type="ant">
          <sec:filter-chain filters="logFilter,otherfilter1,otherfilter2" pattern="/myRESTservicePath/**"/>

.... 
```

`MyLogFilter`是一个简单的 servlet Filter 实现

# objective-c - 了解（id）发件人

> ID：13878094
> 
> 赞同：0
> 
> 时间：2012-12-14T11:47:26.103
> 
> 标签：objective-c, ios, xcode

> **可能重复：**
> [目标 C：什么是“（id）发件人”？](https://stackoverflow.com/questions/5578139/objective-c-what-is-a-id-sender)

我对以下问题有一些疑问：

```
- (IBAction)leftButtonPressed:(id)sender 
{
     UIButton *button = (UIButton*)sender;
     _label.text = button.titleLabel.text;
} 
```

具体是`(UIButton)*sender`做什么的？我的意思是特别是带有 *. 是不是类似的东西`UIButton *myButton`？

据我了解，它是某种指向被按下按钮的指针，但这是为什么呢？为什么我不能写

```
_label.text = sender.titleLabel.text; 
```

因为它“是”按钮？我怎么知道可以发送什么？我的意思是我可以写这样的东西：

```
-(void)leftButtonPressed:(color)sender {...} 
```

为了传递按钮的颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:52:09.717

`(UIButton *)sender`这是将您的类型转换`id sender`为 UIButton。

是的，你可以写`-(void)leftButtonPressed:(color)sender {...}`但是颜色应该是一个有效的类类型，它应该是指针`-(void)leftButtonPressed:(NSColor *)sender {...}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T12:00:03.133

有时你会收到类似“ `incompatible pointer type ....`”或“ `incompatible conversion..`”等警告......这些是由于类型转换中的错误而发生的......`(id)`这种类型的施法者可以处理类型转换（这里是按钮操作）......我希望你明白我的意思.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T12:09:23.177

你不能写

```
_label.text = sender.titleLabel.text; 
```

因为 sender 是 id 类型，并且 id 对象没有任何作为 titleLabel 的属性，所以您必须首先键入 cast sender，以便编译器知道这是一个 UIButton 类型的对象，它具有名为 titleLabel 的属性。

现在，如果您想直接使用 sender 那么您必须确保该方法仅在按钮单击事件时触发，然后按如下方式更改您的方法

```
- (IBAction)leftButtonPressed:(UIButton *)sender 
```

那么你可以直接使用

```
 _label.text = sender.titleLabel.text; 
```

# java - Java - 需要有关 JSON 数组/对象和验证的帮助

> ID：13878099
> 
> 赞同：1
> 
> 时间：2012-12-14T11:47:44.240
> 
> 标签：java, arrays, json, validation

我有一个学校任务，我必须对服务器进行身份验证。一旦通过身份验证，我就可以收集（不确定是否是正确的词）一些 JSON 数据，使用：

```
List <NameValuePair> nvp = new ArrayList <NameValuePair>();

nvp.add(new BasicNameValuePair("username", "test")); //used to log in to the site
nvp.add(new BasicNameValuePair("password", "test")); 
nvp.add(new BasicNameValuePair("request", "login"));
nvp.add(new BasicNameValuePair("request", "mctrainer"));
post.setEntity(new UrlEncodedFormEntity(nvp)); 
```

我使用该代码收集的数据是：

`[{"correctanswerPK":"155","challenge":"Hva er Areal","answer":"En klasse","choices":["Heltallstype","En klasse","Konstruktør"]},{"correctanswerPK":"149","challenge":"Hva brukes ordet private til","answer":"Innkapsling","choices":["Innkapsling","En klasse","Heltallstype"]},{"correctanswerPK":"161","challenge":"Hva er double","answer":"Flyttallstype","choices":["Exception","Flyttallstype","En metode"]}]`

这是挪威数据，但它仍然是 JSON。

我目前正在通过运行 a 来“显示”这些数据`System.out.println()`，这意味着它出现在控制台中。但是，任务是让它出现在 JFrame 中。我的理解是我需要使用 JSONArray 和 JSONObject 才能做到这一点，再加上 JSONvalidator 或类似的东西。

问题是我不知道该怎么做。有人可以帮助我吗？

我的老师告诉我们[jtwitter.jar v2.6.9](http://www.winterwell.com/software/jtwitter.php)是一个很好的库，但我不知道如何使用它。还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:24:51.463

我假设您想将 JSON 文本拆分为单独的对象以显示在您的 UI 中（因为您***可以***只显示文本，但我想这不是您分配的重点？）。

我不建议使用不是根据您需要的中心目标构建的库。不要怀疑您的教授，但他向您推荐的库旨在检索 Twitter 数据，而不是解析 JSON（这可能是其主要目标的副作用，但这仍然不是其主要关注点）。我会推荐任何其他优秀的 JSON 库，它们都能够进行 JSON 验证和转换为 POJO（普通的旧 Java 对象）。这是一个不错的清单，可以帮助您入门

*   [杰克逊](http://wiki.fasterxml.com/JacksonHome)
*   [格森](http://code.google.com/p/google-gson/)
*   [Java JSON](http://www.json.org/java/)

[Java JSON](http://www.json.org/java/)非常容易集成到您的项目中并使用 - 它实际上是您下载并直接包含在代码中的不到 10 个类。Gson 可能是第二个最容易使用的，其次是杰克逊，它是三者中的重量级人物，但也是最强大的。下面我展示了一个使用列表中最简单的库的示例处理。它采用 JSON 格式：

```
[
    {"firstName" : "Bob", "lastName" : "Jones"},
    {"firstName" : "Susan", "lastName" : "Smith"},
    {"firstName" : "Melody", "lastName" : "Dumond"}
] 
```

这是一个类似于您的数据的 JSON 数组。

```
final JSONArray jsonArr = new JSONArray(json);
final int numObjs = jsonArr.length();
for(int i = 0 ; i < numObjs; i++) {
    final JSONObject jsonObj = jsonArr.getJSONObject(i);
    System.out.printf("Person's name is %s, %s\n", jsonObj.get("lastName"),
        jsonObj.get("firstName");
} 
```

您可以为自己的项目扩展此示例，或者研究并合并其他有用的库之一。

# jquery - 在 div 悬停在谷歌地图中显示标记信息窗口

> ID：13878103
> 
> 赞同：0
> 
> 时间：2012-12-14T11:47:54.713
> 
> 标签：jquery, google-maps, google-maps-api-3, joomla2.5

我有一个页面，它根据搜索结果加载带有标记的谷歌地图。搜索结果是串联的一些 div。当有人将鼠标悬停在 div 上时，我希望谷歌地图上的相应标记显示其信息窗口。这有可能吗？

我在下面提供了 jquery 代码。如果需要其他页面的任何代码，请告知

```
if (typeof SPGeoMapsModReg == 'undefined') {
    var SPGeoMapsModReg = {}
}
function SPGeoMapModInit(a, b) {
    jQuery(document).ready(function() {
        SPGeoMapsModReg[a] = new SPGeoMapMod(a).init(b)
    })
}
function SPGeoMapMod(h) {
    this.Options;
    this.Map;
    this.Position;
    this.Markers = [];
    this.cid = h + 'Inner';
    this.Container = jQuery('#' + h);
    this.Canvas = jQuery('#' + this.cid);
    this.InfoWindow;
    this.init = function(a) {
        this.Options = a;
        this.Container.css('width', a.mapWidth).css('height', a.mapHeight).css('background-color', 'black').css('background', 'url(media/sobipro/progress/ajax-loader.gif) center center no-repeat').fadeTo('slow', 0.2);
        this.getEntries();
        return this
    };
    this.getEntries = function() {
        var b = this;
        jQuery.ajax({
            url: 'index.php',
            type: 'POST',
            dataType: 'json',
            data: {
                'option': 'com_sobipro',
                'task': 'geomod.load',
                'sid': this.Options.sid,
                'format': 'raw',
                'section': this.Options.pid,
                'ctask': this.Options.task
            },
            success: function(a) {
                b.InitMap(a)
            }
        })
    };
    this.InitMap = function(a) {
        this.Position = new google.maps.LatLng(parseFloat(this.Options.startLatitude), parseFloat(this.Options.startLongitude));
        var b = [];
        for (i = 0; i < this.Options.availableViews.length; i++) {
            b[i] = google.maps.MapTypeId[String(this.Options.availableViews[i]).toUpperCase()]
        }
        var c = {
            zoom: parseFloat(this.Options.zoomLevel),
            mapTypeId: google.maps.MapTypeId[String(this.Options.defaultView).toLocaleUpperCase()]
        };
        for (var i in this.Options.mapOptions) {
            c[i] = this.Options.mapOptions[i]
        }
        if (b.length > 0) {
            c['mapTypeControlOptions'] = {
                mapTypeIds: b
            }
        }
        this.Canvas.css('width', this.Options.mapWidth).css('height', this.Options.mapHeight);
        this.Map = new google.maps.Map(document.getElementById(this.cid), c);
        this.Map.setCenter(this.Position);
        var d = this;
        for (var i = 0; i < a.entries.length; i++) {
            var e = new google.maps.LatLng(parseFloat(a.entries[i].latitude), parseFloat(a.entries[i].longitude));
            var f = new google.maps.Marker({
                'position': e
            });
            f.sid = a.entries[i].sid;
            google.maps.event.addListener(f, 'mouseover', function() {
                d.OpenInfo(this)
            });
            this.Markers.push(f)
        }

        var g = new MarkerClusterer(this.Map, this.Markers);
        this.Container.fadeTo('slow', 1).css('background', 'none');
        if (a.msg.length) {
            alert(a.msg)
        }
    };
    this.OpenInfo = function(b) {
        var c = this;
        try {
            this.InfoWindow.close()
        } catch (e) {}
        this.InfoWindow = new google.maps.InfoWindow();
        this.InfoWindow.setContent('<img src="media/sobipro/progress/ajax-loader.gif"/>');
        this.InfoWindow.open(this.Map, b);
        jQuery.ajax({
            url: 'index.php',
            type: 'POST',
            dataType: 'json',
            data: {
                'option': 'com_sobipro',
                'task': 'geomod.info',
                'sid': b.sid,
                'format': 'raw',
                'iid': c.Options.iid
            },
            success: function(a) {
                c.InfoWindow.setContent(a.html)
            }
        })
    }
} 
```

# list - 查找集合中最常见/最常见的元素？

> ID：13878104
> 
> 赞同：17
> 
> 时间：2012-12-14T11:47:57.983
> 
> 标签：list, scala

在集合中找到最常见/最常见元素的最佳方法是什么？例如：

```
list = List(1, 3, 4, 4, 2)
list.mostCommon   // => 4        !! This is what I want !! 
```

嗯..一个人可以做的是先做一个`groupBy`，然后再做`map`一个`length`，然后选择最大的一个。那么你会得到：

```
Map(1 -> List(1), 4 -> List(4, 4), 3 -> List(3), 2 -> List(2))
(...)
Map(1 -> 1, 4 -> 2, 3 -> 1, 2 -> 1)  // mapped by length. 4 -> 2  since there's two 4s 
```

最后，选择`4`映射到最高数字 ( ) 的键 ( `2`)。（*嵌套问题：*最好的方法是什么？）。但是对于这样一个简单的操作来说，这似乎需要做很多工作..？

有没有更好/更惯用的方法来做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-14T12:07:54.980

我不得不说：

```
list.groupBy(identity).mapValues(_.size).maxBy(_._2)._1 
```

要不就：

```
list.groupBy(identity).maxBy(_._2.size)._1 
```

对我来说，这似乎并没有那么多工作。

如果您担心只需要计数时为每个值构建列表的开销，您可以执行以下操作：

```
list.foldLeft(Map.empty[Int, Int].withDefaultValue(0)) {
  case (m, v) => m.updated(v, m(v) + 1)
}.maxBy(_._2)._1 
```

甚至可以随时跟踪最大值，以避免最后的额外遍历：

```
list.foldLeft(
  Map.empty[Int, Int].withDefaultValue(0), -1 -> Double.NegativeInfinity
) {
  case ((m, (maxV, maxCount)), v) =>
    val count = m(v) + 1
    if (count > maxCount) (m.updated(v, count), v -> count)
    else (m.updated(v, count), maxV -> maxCount)
}._2._1 
```

不过，这显然比上面的单行代码可读性要差得多，所以我建议坚持使用它们，除非您可以证明（即，通过基准测试，而不是推测）它们是您应用程序的瓶颈。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-20T20:16:39.817

从 开始`Scala 2.13`，我们可以使用：

*   [`List::groupMapReduce`](https://www.scala-lang.org/api/2.13.x/scala/collection/immutable/List.html#groupMapReduce%5BK,B%5D(key:A=%3EK)(f:A=%3EB)(reduce:(B,B)=%3EB):scala.collection.immutable.Map%5BK,B%5D)这（正如它的名字所暗示的）相当于 a和 reduce 步骤`groupBy`。`mapValues`
*   [`Map::maxByOption`](https://www.scala-lang.org/api/2.13.x/scala/collection/immutable/Map.html#maxByOption%5BB%5D(f:A=%3EB)(implicitcmp:scala.math.Ordering%5BB%5D):Option%5BA%5D)而不是一个简单`maxBy`的也处理空列表：

```
List(1, 3, 4, 4, 2, 3)
  .groupMapReduce(identity)(_ => 1)(_+_).maxByOption(_._2).map(_._1)
// Option[Int] = Some(4) 
```

这：

*   `group`s 项（**组**MapReduce 的组部分）

*   `map`s 每个分组值出现为 1（映射组**Map** Reduce 的一部分）

*   `reduce`s 值在一组值 ( `_ + _`) 中，通过对它们求和（减少 groupMap **Reduce**的一部分）。

*   最后通过 nbr 的出现次数获得可选的最大值并将其映射以获取相应的项目。

* * *

如果您知道您的列表不为空，那么简单的`maxBy`也可以：

```
List(1, 3, 4, 4, 2, 3).groupMapReduce(identity)(_ => 1)(_+_).maxBy(_._2)._1
// 4 
```

* * *

该部分是通过以下顺序[一次执行](https://github.com/scala/scala/blob/v2.13.0-M5/src/library/scala/collection/Iterable.scala#L604)`groupMapReduce`的等效版本：

```
List(1, 3, 4, 4, 2, 3).groupBy(identity).mapValues(_.map(_ => 1).reduce(_+_)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T12:11:51.773

我不认为这真的更好，但你可以这样做：

```
List(1, 3, 4, 4, 2).groupBy(identity).maxBy(_._2.size)._1 
```

不是最好的解决方案。您想要的是在列表上使用 maxBy 的某种方式，然后像这样引用列表：

```
val someList = List(1, 3, 4, 4, 2)
someList.maxBy(x => list.count(_ == x)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T12:07:53.573

不，我认为这是最好的方法。但这不是很多工作......

```
list.groupBy(identity).mapValues(_.size) 
```

给你

```
Map(2 -> 1, 4 -> 2, 1 -> 2, 3 -> 1) 
```

然后，例如，您可以获取它`.maxBy(_._2)`（已编辑：感谢@Travis Brown！）并获取一个元组`(4,2)`（出现次数最多的数字以及出现次数）

如果你是单线的粉丝：

```
scala> List(1, 3, 4, 1, 4, 2).groupBy(identity).mapValues(_.size).maxBy(_._2)
res0: (Int, Int) = (4,2) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T12:15:20.217

另一种变体：

```
val x = List(1, 3, 4, 1, 4, 2, 5, 5, 5)
 x.distinct.foldLeft((0,0))((a, b) => {
     val cnt = x.count(_ == b);
   if (cnt > a._1) (cnt, b) else a
 })._2 
```

# objective-c - 如何打开文档目录中的 Html 页面？

> ID：13878106
> 
> 赞同：0
> 
> 时间：2012-12-14T11:47:58.390
> 
> 标签：objective-c, ios, xcode

我在该文件夹中的文档目录中有一个文件夹我有 main.html 页面我想在 webview 中打开该 html 页面有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:53:43.307

尝试这个。

```
 //First get the path of the documents directory
     NSString *documentsDirectoryPath = [[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"] stringByAppendingPathComponent:@"main.html"];

     //Load webview 
     NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@", documentsDirectoryPath];
     NSURLRequest *request = [NSURLRequest requestWithURL:url];
     [webviewForHelp loadRequest:request]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:56:09.663

获取您的`DocumentDirectory`路径并将您的附加`main.html`到该路径。

```
NSString *documentPath = [[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"] stringByAppendingPathComponent:@"main.html"]; 
```

然后使用加载它

```
NSURL* address = [NSURL fileURLWithPath:documentPath];
NSURLRequest* request = [NSURLRequest requestWithURL:address] ; 
[webView loadRequest:request]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T12:03:32.890

```
 NSString *htmlFilePath = [[NSBundle mainBundle]pathForResource:@"main" ofType:@"html"];

 NSString* htmlString = [NSString stringWithContentsOfFile:htmlFilePath encoding:NSUTF8StringEncoding error:nil];
    [webView loadHTMLString:htmlString baseURL:nil]; 
```

# c - 通过标准输入读取二进制数据的问题

> ID：13878109
> 
> 赞同：0
> 
> 时间：2012-12-14T11:48:02.257
> 
> 标签：c, linux

我在从标准输入读取二进制数据时遇到问题。

当我输入两个新行时，我的应用程序将分隔符作为“2”的双换行符，它将停止通过标准输入读取并将内容保存到字符缓冲区中。在按两个输入之前，我能够读取总字节数而不会丢失，但是我们遇到\n\r CR+LF 的数据被修改为\n。

我正在阅读基于 Windows 的文件 teraterm，而我的硬件是 Linux，所以我遇到了这个问题，在我尝试过的代码级别

```
fgetc(stdin), getc(stdin)
freopen(stdin,"rb",1); 
```

和

```
fread(buff,1,bufsize,stdin) 
```

但并非所有功能都在读取和修改回车。所以请任何人帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:52:52.777

听起来您正在从管道中读取二进制数据。我建议您改用系统调用，从文件描述符[`read`](http://linux.die.net/man/2/read)中读取。`STDIN_FILENO`

# c++ - 固定容量自定义 STL 容器的 max_size() 的正确值是多少？

> ID：13878113
> 
> 赞同：2
> 
> 时间：2012-12-14T11:48:08.950
> 
> 标签：c++, stl

我正在编写一个具有固定容量的自定义循环缓冲区实现（在运行时通过调用构造函数来修复，没有调整大小的方法）并希望它与 STL 兼容。我的目标是使其成为[Random Access Container](http://www.sgi.com/tech/stl/RandomAccessContainer.html)。此外，我希望它具有[Back Insertion Sequence](http://www.sgi.com/tech/stl/BackInsertionSequence.html)的特定接口，但不是序列（没有在任意位置调整大小和插入/擦除，...）。所以它只是一个扩展的随机访问容器。在阅读了一些关于**max_size()**和**size()**的问题后，我仍然有点困惑。

我目前的想法： **size()**：缓冲区中包含的元素数
**max_size()**：缓冲区的容量（它可以容纳的最大元素数）

这是正确的（符合标准/ STL）？还是我必须像 (std::)array 和 size() == max_size() 一样处理它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T12:00:02.357

`max_size()`该标准对C++11 表 96 中的含义非常清楚：

> `distance(begin(), end())`对于尽可能大的容器

如果像 一样`std::array`，大小是容器类型的属性（例如，由模板参数指定），那么它应该与 相同`size()`。如果您可以实例化具有不同大小的相同类型，那么它应该是允许的最大大小。

我将遵循标准容器的示例，并具有`capacity()`告诉您容量的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T11:58:53.450

`max_size`与容器类型的特定实例无关。`size_type`它是类型可以处理的最大大小，根据任何实现细节限制它（如果没有其他的最大值）。

`vector`可以保留当前未使用的空间，因此它具有`capacity()`功能。不过，这不是任何容器概念的一部分，因为其他容器 ( `deque`, `list`) 不保留空间。

# jquery - $(document).ready 和 $(document).on('pageinit') 之间的区别

> ID：13878117
> 
> 赞同：13
> 
> 时间：2012-12-14T11:48:37.760
> 
> 标签：jquery, jquery-mobile, document-ready

我正在使用 jquery mobile，我想重现此代码：

```
$(document).ready(function () {
    $.mobile.loading('show');
}); 
```

它会显示微调器，直到我决定在其他功能中使用它来隐藏它

```
$.mobile.loading( 'hide' ); 
```

现在我看到在 jquery mobile 1.2 中已弃用 document.ready()，因此他们建议将其替换为`$(document).on('pageinit')`

但是如果我用建议的代码替换我的代码，微调器自动隐藏......为什么？这是新代码：

```
 $(document).on('pageinit',function(){
     $.mobile.loading( 'show' );
 }); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-14T16:20:58.890

# 有关的：

这篇文章也可以作为我博客的一部分在**[这里](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**找到。

## 解决方案

首先，您需要了解 jQM 页面事件及其流程。

```
$(document).on('pageinit',function(){
    $.mobile.loading( 'show' );
}); 
```

确实可以替代：

```
$(document).ready(function () {
    $.mobile.loading('show');
}); 
```

但是 jQM 页面由几个阶段组成。在您的情况下，为了能够显示微调器，您需要使用 pageshow 事件。必须显示页面才能显示微调器。我为您创建了一个示例：http: [//jsfiddle.net/Gajotres/Nncem/](http://jsfiddle.net/Gajotres/Nncem/)。在其中转到下一页以查看微调器。您还可以将 pageshow 替换为 pageinit 以查看差异。

您应该使用以下代码：

```
$(document).live('pageshow', function (e, data) {
    $.mobile.loading('show');
}); 
```

但即使这不是正确的方法，最好的 jQM 方法是使用以下语法：

```
$('div[data-role="page"]').live('pageshow', function (e, data) {
    $.mobile.loading('show');
}); 
```

或者，如果您想将其绑定到单个页面，请使用：

```
$('#pageID').live('pageshow', function (e, data) {
    $.mobile.loading('show');
}); 
```

其中 pageID 是您的页面的 ID。

# $(document).on('pageinit') 与 $(document).ready()

**在jQuery**中学习的第一件事是调用**$(document).ready()**函数中的代码，以便在加载 DOM 后立即执行所有内容。但是，在**jQuery Mobile**中，Ajax 用于在您导航时将每个页面的内容加载到 DOM 中。因为这个**$(document).ready()**将在您的第一页加载之前触发，并且用于页面操作的每个代码都将在页面刷新后执行。这可能是一个非常微妙的错误。在某些系统上，它可能看起来工作正常，但在其他系统上，它可能会导致出现不稳定、难以重复的怪异现象。

经典的 jQuery 语法：

```
$(document).ready() { 

}); 
```

为了解决这个问题（相信我，这是个问题）**jQuery Mobile**开发人员创建了页面事件。简而言之，页面事件是在页面执行的特定点触发的事件。其中一个页面事件是**pageinit**事件，我们可以这样使用它：

```
$(document).on('pageinit', function(){

}); 
```

我们可以更进一步，使用页面 id 代替文档选择器。假设我们有一个带有 id **index**的 jQuery Mobile 页面：

```
<div data-role="page" id="index">
    <div data-theme="a" data-role="header">
        <h3>
            First Page
        </h3>
        <a href="#second" class="ui-btn-right">Next</a>
    </div>

    <div data-role="content">
        <a href="#" data-role="button" id="test-button">Test button</a>
    </div>

    <div data-theme="a" data-role="footer" data-position="fixed">

    </div>
</div> 
```

要执行仅可用于索引页面的代码，我们可以使用以下语法：

```
$('#index').on('pageinit', function(){

}); 
```

**每次页面即将被加载并首次显示时，都会执行**Pageinit事件。**除非手动刷新页面或关闭 ajax 页面加载，否则不会再次触发。如果您希望每次访问页面时都执行代码，最好使用**pagebeforeshow**事件。**

 **这是一个工作示例：http: [//jsfiddle.net/Gajotres/Q3Usv/](http://jsfiddle.net/Gajotres/Q3Usv/)来演示这个问题。

关于这个问题的更多说明。无论您是使用 1 个 html 多页面还是多个 html 文件范例，都建议您将所有自定义 javascript 页面处理分离到一个单独的 js 文件中。这将使您的代码变得更好，但您将拥有更好的代码概览，尤其是在创建**jQuery Mobile**应用程序时。

还有另一个特殊的**jQuery Mobile**事件，它被称为**mobileinit**。当**jQuery Mobile**启动时，它会在文档对象上触发一个**mobileinit**事件。要覆盖默认设置，请将它们绑定到**mobileinit**。**使用mobileinit**的一个很好的例子是关闭 ajax 页面加载，或更改默认的 ajax 加载器行为。

```
$(document).on("mobileinit", function(){
  //apply overrides here
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T12:12:32.770

这

```
$(document).on('pageinit') 
```

方法是让 jquery mobile 在发生动态页面加载后触发。

```
$(document).ready() 
```

不会表现得像

```
$(document).on('pageinit') 
```

因为它只在页面加载时触发一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T15:35:55.097

发生动态页面加载时不使用 pageinit。事实并非如此。原因是因为 document.ready() 只会被调用一次。这意味着，如果您有多个页面想要在它准备好时执行某项操作，则您无法执行此操作。

因此，document.ready() 只会工作一次，但 pageinit 将在任何时候初始化页面时工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T11:53:16.147

尝试

作秀

```
$.mobile.showPageLoadingMsg(); 
```

隐藏

```
$.mobile.hidePageLoadingMsg(); 
```

如果您动态附加内容，则必须隐藏微调器

[检查这个](http://jquerymobile.com/demos/1.2.0-alpha.1/docs/api/events.html)**

# powershell - 如何使用流式阅读器取回 X 行

> ID：13878121
> 
> 赞同：0
> 
> 时间：2012-12-14T11:49:12.303
> 
> 标签：powershell, implementation, streamreader, tail

尝试实现一个自定义的类似尾巴的功能，在检查了几个示例之后，我来到了下面的代码，它工作得很好（不加载整个文件来读取 X 结束行，适用于网络路径......）

我遇到的问题是我不如何将流指针移动到其当前位置之前的 10 行？

作为一种解决方法，我将指针移动到当前位置之前 1024 个字节，但我不知道这真正涉及到多少行。

```
$sr=New-Object System.IO.StreamReader($fs)
$lastPosition=$sr.BaseStream.Length # final position of the file
$currentPosition=$lastPosition - 1024 
```

谁能指出我正确的方向吗？

这是完整的代码：

```
function tail{
    [cmdletBinding()]
    Param(
        [Parameter(Position=0, Mandatory=$true)]
        [ValidateNotNullOrEmpty()]
        [System.String]
        $filename, # path
        [int]$n=10, # number of lines to output
        [switch]$continous, # continue to monitor for changes ?
        [switch]$hilight  # hilight lines containing keywords ?
    )

    # Initialising stuff
    $hilightError=@("erreur","error","fatal","critic")
    $hilightWarning=@("attention","warning","notice")
    $errorColor="red"
    $warningColor="darkyellow"

    if ( (test-Path $filename) -eq $false){
        write-Error "Cant read this file !"
        exit
    }

    function tailFile($ptr){
        # return each line from the pointer position to the end of file
        $sr.BaseStream.Seek($ptr,"Begin")
        $line = $sr.ReadLine() 
        while ( $line -ne $null){
            $e=$w=$false

            if( $hilight){
                $hilightError | %{ $e = $e -or ($line -match $_) } # find error keywords ?
                if( $e) {wh $line -ForegroundColor $errorColor }
                else{ 
                    $hilightWarning | %{ $w = $w -or ($line -match $_ ) } # find warning keywords ?
                    if($w){ wh $line -ForegroundColor $warningColor }
                    else{ wh $line}
                }
            }
            else{ #no hilight
                wh $line
            }
            $line = $sr.ReadLine() 
        }
    }

    # Main 
    $fs=New-Object System.IO.FileStream ($filename,"OpenOrCreate", "Read", "ReadWrite",8,"None") # use ReadWrite sharing permission to not lock the file
    $sr=New-Object System.IO.StreamReader($fs)

    $lastPosition=$sr.BaseStream.Length # final position of the file
    $currentPosition=$lastPosition - 1024 # take some more bytes  (to get the last lines)

    tailfile $currentPosition

    if($continous){
        while(1){
            start-Sleep -s 1
            # have the file changed ?
            if ($sr.BaseStream.Length -eq $lastPosition){
                write-verbose "no change..."
                continue
            }
            else {
                tailfile $lastPosition
                $lastPosition = $sr.BaseStream.Position
            write-Verbose "new position $lastPosition"
            }
        }
    }
    $sr.close()
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:18:15.043

[您可以在此处](http://pscx.codeplex.com/SourceControl/changeset/view/100582#1358075)查看 PSCX`Get-FileTail`实现，但它根本不处理 Unicode。而且我确信还有其他可以改进的方法。:-) 欢迎提出建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T20:49:55.643

感谢 Christian 和 Keith 的提示。最后，我决定在流式阅读器中向后退，直到它返回足够的 readline()。我让指定代码页的可能性，并且似乎可以使用 unicode。如果有人感兴趣，这是代码

```
function tail{
    [cmdletBinding()]
    Param(
        [Parameter(Position=0, Mandatory=$true)]
        [ValidateNotNullOrEmpty()]
        [System.String]
        $filename, # path
        [int]$n=10, # number of lines to output,
        [Alias("cp")]
        $codepage=65001,#utf8
        [Alias("f")]
        [switch]$continous, # continue to monitor for changes ?
        [switch]$hilight  # hilight lines containing keywords ?
    )
   # Initialising stuff
    $hilightError=@("erreur","error","fatal","critic")
    $hilightWarning=@("attention","warning","notice")
    $errorColor="red"
    $warningColor="yellow"
    [System.Text.Encoding]$enc = [System.Text.Encoding]::GetEncoding($codepage)

    function render($render){
        $e=$w=$false
        if( $hilight){
            foreach ($line in $render){
                $hilightError | %{ $e = $e -or ($line -match $_) } # find error keywords ?
                if( $e) {wh $line -ForegroundColor $errorColor }
                else{ 
                    $hilightWarning | %{ $w = $w -or ($line -match $_ ) } # find warning keywords ?
                    if($w){ wh $line -ForegroundColor $warningColor }
                    else{ wh $line}
                }
                $e=$w=$false
            }
        }
        else{ #no hilight
            wh $render
        }
    }

    function TailFileBeforeEnd{
    #try to find $n lines before eof

        $buffer=1024
        $ptr=$lastPosition #start at the end of the file  
        $found=0

        while($ptr -gt 0 -and $found -lt $n){
            $ptr-=$buffer 
            if ($ptr -le 0){$ptr=0}
            $sr.BaseStream.Seek($ptr,"Begin")|out-null #step backward
            $line = $sr.ReadLine()
            $found=0
            $output=@()
            $render=@()

            while ( $line -ne $null){ #read to the end
                $output+=$line
                $found++
                $line=$sr.ReadLine() 
            }
            if($found -ge $n){ #found enough lines
                Write-Verbose "OK found $found / $n"
                foreach($i in ($output.length - $n)..($output.length)){ #take only lines needed
                    $render+=$output[$i]
                }
                continue

            }
            else{ #move backward and retry to find lines
                Write-Verbose "not enough line ($found displayed)"
                $ptr-=$buffer
                if ($ptr -le 0) { #eof without finding suffisant lines
                    $ptr=0
                    Write-host "not enough line ($found displayed)"
                    $render=$output
                }
            }
         }
    render $render
    }

    function tailFile($ptr){
        # return each line from the pointer position to the end of file
        $render=@()
        $sr.BaseStream.Seek($ptr,"Begin")|out-null
        $line = $sr.ReadLine() 
        while ( $line -ne $null){
           $render+=$line
           $line = $sr.ReadLine() 
        }
        render $render
    }

    # Main loop

    # use ReadWrite sharing permission to not lock the file
    $fs=New-Object System.IO.FileStream ($filename,"OpenOrCreate", "Read", "ReadWrite",8,"None") 
    $sr=New-Object System.IO.StreamReader($fs, $enc)
    $lastPosition=$sr.BaseStream.Length 

    tailFileBeforeEnd 

    if($continous){
        while(1){
            start-Sleep -s 2
            # has the file changed ?
            if ($sr.BaseStream.Length -eq $lastPosition){
                write-verbose "no change..."
                continue
            }
            else {
                tailfile $lastPosition
                $lastPosition = $sr.BaseStream.Position
                write-Verbose "new position $lastPosition"
            }
        }
    }
    $sr.close()
} 
```

# java - 重绘包含 GlsurfaceView 的框架

> ID：13878125
> 
> 赞同：0
> 
> 时间：2012-12-14T11:49:28.800
> 
> 标签：java, android, multithreading, opengl-es, sdk

我有一个 GLSurfaceView，当用户点击一个按钮时，它会用默认颜色绘制一些三角形。然后，当用户从我的充气菜单中选择一种颜色时，它将重新绘制具有该特定颜色的三角形。它以一种奇怪的方式工作，起初它确实绘制了三角形，当我选择不同的颜色时，它不会用不同的颜色重新绘制。但是，当我关闭手机并重新打开时，颜色发生了变化。

这是我的代码：

```
//------------------------------------------------------------------------------------------------  
    public boolean onCreateOptionsMenu(Menu menu)
    {
        MenuInflater menuInflater = getMenuInflater();
        menuInflater.inflate(R.menu.issm_menu,menu);

        return true;
    }
//------------------------------------------------------------------------------------------------
   public boolean onOptionsItemSelected(MenuItem item)
    {
        switch (item.getItemId())
        {
            case R.id.menu_about:          
                Toast.makeText(ISSM.this, "ISSM Application", Toast.LENGTH_SHORT).show();
                return true;

            case R.id.cl_autumn:
                colorMap.setAutumn();
                drawFigure();
                return true;

            case R.id.cl_bone:
                colorMap.setBone();
                drawFigure();
                return true;

                default:
                       return true;
     }

    public void onClick(View view) 
    {
        this.fillBuffer();
        drawFigure();
    }
//---------------------------------------------------------------------------------- 
    public void drawFigure()
    {
        mGLView = new MyGLSurfaceView(this, buff, size, colorMap);;
        frame.addView(mGLView);
    } 
```

我希望一旦我点击菜单中的颜色，颜色就会改变，我不想关闭和打开（顺便说一下，不是完全关闭电源，就像睡眠和唤醒一样）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:56:16.457

解决了，我需要先调用 frame.removeView() 然后添加另一个视图。

# file - 对文件、文件编码、文件格式有清晰的认识

> ID：13878133
> 
> 赞同：13
> 
> 时间：2012-12-14T11:50:05.287
> 
> 标签：file, encoding, format

我对文件、文件编码和文件格式的概念缺乏清晰的理解。谷歌在一定程度上提供了帮助。 [据](http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/BitOp/asciiBin.html)我目前了解，所有文件都是二进制文件，即这样一个文件中的每个字节都可以包含 256 个可能的位字符串中的任何一个。ASCII 文件（这是我们进入编码部分的地方）是二进制文件的子集，其中每个字节仅使用 7 位。

这就是事情变得混乱的地方。文件[格式](http://en.wikipedia.org/wiki/File_format)似乎是一种解释文件中字节的方法，而文件扩展名似乎是识别文件格式的最常用方法之一。

这是否意味着有为二进制文件定义的格式和为 ASCII 文件定义的格式？xml、pdf、doc、rtf、html、xls、sql、tex、java、cs 等格式是否“引用”ASCII 文件？而像 jpg、mp3、avi、eps、obj、out、dll 这样的格式是我们在谈论二进制文件的线索？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-14T11:51:29.903

我认为您不能谈论**ASCII**和**BINARY**文件，而是**TEXT**和**BINARY**文件。

从这个意义上说，这些是文本文件：XML、HTML、RTF、SQL、TEXT、JAVA、CSS、EPS。

这些是二进制文件：PDF、DOC、XLS、JPG、MP3、AVI、OBJ、DLL。

ASCII 只是在计算开始时用来表示文本的字符表，但现在它有点不受欢迎，因为它不能用中文、阿拉伯语、西班牙语（带有ñ、Ñ、波浪线的单词）、法语等语言表示文本和别的。现在鼓励使用其他字符表示而不是 ASCII。最著名的可能是**UTF-8**。但是还有其他的，例如**ISO-8859-1**、**ISO-8859-3**等。看看Joel Spolsky 的这篇关于 UNICODE 的文章[。](http://www.joelonsoftware.com/articles/Unicode.html)这很有启发性。

文件格式只是另一个非常不同的问题。文件格式是程序同意的协议，用于表示信息。从这个意义上说，**JPG**文件是具有某种（众所周知的）内部格式的图像，允许程序（浏览器、电子表格、文字处理器）将它们用作图像。

文本文件也有格式（IE，有 XML 和 HTML 等文本文件的规范）。它的格式，如**JPG**和其他二进制文件，允许应用程序以连贯且特定的方式使用它们来实现某些目标：IE，呈现 WEB PAGE（HTML 和 XHTML 文件格式）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T11:57:12.223

文件在硬盘驱动器上的实际存储方式由操作系统定义。文件的实际内容可以描述为字节数组——每个字节都有一个字节大小的可能值。

文本文件 - 将使用 256 字符 (ASCII) 集 - 然后您可以轻松读取它们或更广泛的字符集 - 在这种情况下 - 只有合适的应用程序才能读取它。

其余的 - 您可能称之为二进制（以及“文本”查看器“无法读取”的任何其他格式） - 是旨在由某些其他应用程序或操作系统读取的格式。如果它是可执行的 - 操作系统可以读取并执行它们，其他的 - 比如 jpg - 旨在被照片查看者等“理解”......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-03T18:31:02.663

这是一个老问题，但仍然非常相关。我也对此感到困惑，并要求澄清。这是摘要（希望对某人有所帮助）：

**格式**：文件/记录格式是**数据的表示**方式。您可以使用 CSV、TSV、JSON、Apache Log 格式、Thrift 格式、Protobuf 格式等来表示您的数据。格式负责确保数据结构正确且正确表示。例如：当你读取一个 json 文件时，你应该有嵌套的键值对；这是始终存在的保证。

```
{
    "story": {
        "title": "beauty and the beast"
    }
} 
```

**编码**：编码基本上**将您的数据（以任何格式或纯文本）转换为特定的方案**。现在，这个方案是什么？方案特定于编码的目的。例如，通过有线（互联网）传输数据时，我们希望确保上述示例 json 正确到达另一端，不应该被破坏。为了确保这一点，我们将添加一些元信息，如校验和，可用于验证数据的正确性。编码的其他用途包括缩短数据、交换秘密等。

```
Base64 encoding of above JSON example:

ew0KICAgICAgICAic3RvcnkiOiB7DQogICAgICAgICAgICAidGl0bGUiOiAiYmVhdXR5IGFuZCB0aGUgYmVhc3QiDQogICAgICAgIH0NCn0= 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-15T10:50:52.220

我认为值得注意的是，对于媒体文件，mpeg 等是媒体编解码器的一种形式。他们解释了数字数据如何表达视觉和听觉。它们通常位于媒体文件容器中，例如 avi 文件，它实际上是一种用于媒体的 riff 文件类型。

# pyqt4 - 添加 QIcon 时的奇怪行为

> ID：13878134
> 
> 赞同：0
> 
> 时间：2012-12-14T11:50:08.720
> 
> 标签：pyqt4, qpixmap, qicon

我正在向 listwidget 添加一个项目，但奇怪的是 if 的第一个块添加了图标，而第二个没有我还检查了该图标是否在指定位置

```
def addToRenderQueue(self):
    ext=os.path.splitext(str(self.scnFilePath.text()))[-1]
    if self.mayachkBox.isChecked() and (ext=='.ma'):
       img_mIcon=QtGui.QPixmap("images\icon_maya-small.png")
       ntask=self.makeBatTask()
       self.itemTask=QtGui.QListWidgetItem(ntask)
       self.itemTask.setIcon(QtGui.QIcon(img_mIcon))
       self.listWidget.insertItem(0,self.itemTask)
    elif self.nukechkBox.isChecked() and (ext=='.nk'):
         img_nIcon=QtGui.QPixmap("images\nuke.png")
         ntask=self.makeBatTask()
         self.itemTask=QtGui.QListWidgetItem(ntask)
         self.itemTask.setIcon(QtGui.QIcon(img_nIcon))
         self.listWidget.insertItem(0,self.itemTask) 
```

对于 elif 块 ntask 包含这种字符串： Nuke6.1.exe -t E:\Dropbox\Research_Study\myprojects\Batch\nukeRender.py Write2 E:/Dropbox/Research_Study/myprojects/Batch/test_project_nuke/sign_board.nk 1 16 1 次测试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:02:07.877

在 Python 字符串中，`\`是用于特殊字符（如换行符（`\n`）、制表符（`\t`）等）的转义字符。在您的第二个路径中`"images\nuke.png"`，您有`\n`，因此它被解析为`"images<new-line>uke.png"`并且 PyQt 找不到该文件。

你有几个选择：

*   你可以逃避它`\`本身：`"images\\nuke.png"`
*   您可以使用禁用转义的原始字符串：`r"images\nuke.png"`
*   您可以使用`/`文件夹分隔符：`"images/nuke.png"`

我更喜欢第三种选择。Windows 同时接受`\`和`/`作为文件夹分隔符。除了在 Qt 中， using`/`是首选方式，因为它会[自动转换](http://doc.qt.digia.com/qt/qdir.html#details)为适当的系统分隔符：

> Qt 使用“/”作为通用目录分隔符，就像在 URL 中使用“/”作为路径分隔符一样。如果您总是使用“/”作为目录分隔符，Qt 将转换您的路径以符合底层操作系统。

# video - AVFoundation 视频文件支持

> ID：13878135
> 
> 赞同：0
> 
> 时间：2012-12-14T11:50:09.533
> 
> 标签：video, avfoundation, compatibility

AVFoundation 是否支持视频文件？

如果文件在 QuickTime 中打开，是否足够？在我的第一个 AVFoundation 测试中，似乎某些文件永远不会用 AVFoundation 打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T17:33:04.070

我最终决定使用来自[http://videolan.org的](http://videolan.org)*libvlc* ，它支持比*AVFoundation/QuickTime*视频引擎更多的文件。

# objective-c - IOS XMLToObjectParser 与数组和属性

> ID：13878148
> 
> 赞同：0
> 
> 时间：2012-12-14T11:51:00.027
> 
> 标签：objective-c, ios, xml, parsing, object

我正在为 IOS 5+ 开发带有 xCode 4.5 的 iPhone 应用程序，我正在使用 ARC 和 Storyboard

我目前正在将一个 XML 项目列表绑定到一个`NSObject`.

目前，我可以成功提取每个节点的内容，但我需要读取一个节点的属性，并将多个同名节点存储在一个数组中。

我想从这样的 XML 中提取所有信息（值 1、2、3，分别绑定到属性`p1`、、、`p2`）`p3`：

```
<Contact>
    <nom>Amanda</nom>
    <prenom>Pattison</prenom>
    <tel>3211234567</tel>
    <email>joe@smith.com</email>
    <array>
        <property name="p1" value="1"/>
        <property name="p2" value="2"/>
        <property name="p3" value="3"/>
    </array>
</Contact> 
```

我目前正在使用这个 XML（本地托管）：

```
<?xml version="1.0" encoding="UTF-8"?>
<contacts>
<Contact>
    <nom>Amanda</nom>
    <prenom>Pattison</prenom>
    <tel>3211234567</tel>
    <email>joe@smith.com</email>
</Contact>
<Contact>
    <nom>Kraft</nom>
    <prenom>Philippe</prenom>
    <tel>0728812121</tel> 
    <email/>
</Contact>
<Contact>
    <nom>Kent</nom>
    <prenom>Jerome</prenom>
    <tel>087832832</tel>
    <email>contact@jkraft.fr</email>
</Contact>
<Contact>
    <nom>Melbourne</nom>
    <prenom>Yannis</prenom>
    <tel>321-123-4567</tel>
    <email>joe@smith.com</email>
</Contact>
<Contact>
    <nom>Canberra</nom>
    <prenom>Amstrong</prenom>
    <tel>0728812121</tel>
    <email/>
</Contact>
<Contact>
    <nom>Namali</nom>
    <prenom>Pat</prenom>
    <tel>087832832</tel>
    <email>contact@jkraft.fr</email>
</Contact>
<Contact>
    <nom>Malani</nom>
    <prenom>John</prenom>
    <tel>321-123-4567</tel>
    <email>joe@smith.com</email>
</Contact>
<Contact>
    <nom>Pompidou</nom>
    <prenom>Juan</prenom>
    <tel>0728812121</tel>
    <email/>
</Contact>
<Contact>
    <nom>Cauht</nom>
    <prenom>Frederic</prenom>
    <tel>087832832</tel>
    <email>contact@jkraft.fr</email>
</Contact>
<Contact>
    <nom>Neil</nom>
    <prenom>Joe</prenom>
    <tel>321-123-4567</tel>
    <email>joe@smith.com</email>
</Contact>
<Contact>
    <nom>Youn</nom>
    <prenom>Eric</prenom>
    <tel>0728812121</tel>
    <email/>
</Contact>
<Contact>
    <nom>Lee</nom>
    <prenom>Pascal</prenom>
    <tel>087832832</tel>
    <email>contact@jkraft.fr</email>
</Contact>
</contacts> 
```

我正在使用这个解析器：

-#XMLToObjectParser.h

```
#import <Foundation/Foundation.h>

@interface XMLToObjectParser : NSObject <NSXMLParserDelegate> {
    NSString *className;  
    NSMutableArray *items;  
    NSObject *item;  
    NSString *currentNodeName;
    NSMutableString *currentNodeContent;
}
- (NSArray *)items;
- (id)parseXMLAtURL:(NSURL *)url
       toObject:(NSString *)aClassName
     parseError:(NSError **)error;
@end 
```

-#XMLToObjectParser.m

```
#import "XMLToObjectParser.h"

@implementation XMLToObjectParser

- (NSArray *)items
{
return items;
}

- (id)parseXMLAtURL:(NSURL *)url
       toObject:(NSString *)aClassName
     parseError:(NSError **)error
{

    items = [[NSMutableArray alloc] init];
    className = aClassName;
    NSXMLParser *parser = [[NSXMLParser alloc] initWithContentsOfURL:url];
    [parser setDelegate:self];
    [parser parse];

    if([parser parserError] && error) {
        *error = [parser parserError];
    }

    return self;
}

- (void)parser:(NSXMLParser *)parser
didStartElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI
 qualifiedName:(NSString *)qName
    attributes:(NSDictionary *)attributeDict
{

    NSLog(@"Open tag: %@", elementName);
    if([elementName isEqualToString:className]) {
    // create an instance of a class on run-time
        item = [[NSClassFromString(className) alloc] init];
    }
    else {
        currentNodeName = [elementName copy];
        currentNodeContent = [[NSMutableString alloc] init];
    }
}

- (void)parser:(NSXMLParser *)parser
 didEndElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI
 qualifiedName:(NSString *)qName
{
    NSLog(@"Close tag: %@", elementName);
    if([elementName isEqualToString:className]) {
        [items addObject:item];

        item = nil;
    }
    else if([elementName isEqualToString:currentNodeName]) {
    // use key-value coding
        [item setValue:currentNodeContent forKey:elementName];
        currentNodeContent = nil;
        currentNodeName = nil;
    }
}

- (void)parser:(NSXMLParser *)parser
foundCharacters:(NSString *)string
{
        NSLog(@"Found tag: %@", string);

[currentNodeContent appendString:string];
}

@end 
```

来电：

```
tableau = [[NSMutableArray alloc] init];
NSURL *url = [NSURL URLWithString: @"http://10.20.100.12:8888/contacts.xml"];
XMLToObjectParser *myParser = [[XMLToObjectParser alloc] parseXMLAtURL:url toObject:@"Contact" parseError:nil];

 for(int i = 0; i < [[myParser items] count]; i++) {
        Contact *new = [[Contact alloc] init];
        new = (Contact *)[[myParser items] objectAtIndex:i];
        [tableau addObject:new];
        //[new release];
    } 
```

# c++ - 如何将函数传输到匿名管道 WinAPI？

> ID：13878152
> 
> 赞同：2
> 
> 时间：2012-12-14T11:51:21.043
> 
> 标签：c++, winapi, pipe

我需要向匿名管道写入类似的东西`double (*fun)(double)`，但以下`WriteFile(pipe, fun, 4, written_bytes, 0)`导致管道接收器出现错误 while `ReadFile(read_pipe, fun, 4, written_bytes, 0)`。有什么方法可以做到这一点吗？

我有个主意。我可以创建一个具有相同类型字段的结构：

```
struct Foo
{
    double (*f)(double);
}; 
```

然后我写它`WriteFile(hWritePipe_StdIN, &to_process, sizeof(Foo), &bytes, 0);` 但我有问题，管道接收器永远不会结束读取数据： `ReadFile(hReadPipe, &to_process, sizeof(Foo), &bytes, 0);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:20:05.083

它存在一些问题：

首先，你应该知道函数的大小。如果你这样做，你只需打电话`WriteFile(pipe, funcPtr, funcSize, ...)`转移它。

其次，该函数应该只包含与[位置无关的代码](http://en.wikipedia.org/wiki/Position-independent_code)，并且不处理任何数据。例如，这样的功能将不起作用：

```
double fun(double x)
{
    int arr[10000]; // implicit function call (alloca or something like this)
    printf("some");
    static int some = 1;
    return globalVal + (++some);
} 
```

因为函数`printf`将具有不同的地址，并且在另一个进程中不会有静态变量和字符串。
（好吧，也许您也可以传输数据，但您无法生成 PI 代码。）

因此，有了所有这些限制，您可以发送一个函数：

```
__declspec(naked) double fun(double x) { __asm ret }

const auto funcSize = 1;
WriteFile(pipe, &fun, funcSize, ...); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T12:35:56.353

在本机代码中，您不能将函数（代码）本身发送到相同的进程或不同的进程。（您可以尝试像@Abyx 建议的那样进行低级黑客攻击，但它严重限制了代码可以执行的功能，并且可能会让您不得不在汇编程序中手动编写所有代码。）

您也不能将函数的地址发送给另一个进程，因为每个进程都有自己独立的地址空间；在另一个进程中，该地址将包含不同的数据。

解决方案是创建一个共享库（最好是动态的），其中包含所有可能以这种方式发送的函数。为每个函数分配一些标记（例如编号或名称），让 DLL 维护标记和地址之间的映射。然后改为发送标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T11:56:59.750

你在这里想要达到什么目的？您真的要编写*函数*本身吗？为什么？这不是您在 C++ 中可以轻松完成的事情，例如，因为函数的大小没有明确定义。

您可能应该编写*data*，即返回的数字`fun()`：

```
const double value = fun(input);
DWORD numberOfBytesWritten;
WriteFile(pipe, &value, sizeof value, &numberOfBytesWritten, NULL); 
```

您当然应该添加代码来检查输出。请注意，像这样编写二进制数据可能很脆弱。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T12:35:36.720

由于您使用的是 WinAPI，因此发送函数的本机方式是通过 COM。特别是，将函数公开为 COM 对象上的方法，获取 COM 名字对象，然后发送该名字对象。名字对象可以被序列化并通过管道发送。另一方可以反​​序列化名字对象并访问您的对象。

*在水下，这通过在 COM运行对象表*中查找对象来工作

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T12:30:49.477

看到这在 C++ 中是多么复杂且容易出错（并且只适用于非常有限的一组函数），我建议您为此使用脚本语言。除了已经提到的之外，指令缓存和 DEP 是您必须考虑的另外两件事。

真的。将函数作为脚本传输，然后在另一端运行。拯救自己的痛苦。

Angelscript 的外观和感觉几乎与 C++ 相似，因此它可能是一个可能的候选者。

现在，如果你反对这一点，因为你需要一些脚本无法做到的事情，请知道：在这种情况下，C++ 也无法做到。

除了上面提到的 PIC 代码问题 (@Abyx) 以及您无法安全或可移植地知道函数大小的事实之外，您可以想象通过管道发送并以有意义的方式执行的唯一 C++ 函数是严格的 const 函数。在这里， const 是 GCC 的意思`__attribute__((const))`，而不是 C++`const`关键字。

也就是说，任何这样的函数*都不能检查除了它的参数之外的任何值，并且除了返回值之外没有任何影响*。原因很明显：不同的进程存在于不同的地址空间中，因此您引用的任何内容都是没有意义的。你改变的任何东西都是没有意义的。
现在，这正是脚本可以以安全、直接且可靠的方式执行的操作。考虑到您已经通过管道发送代码，开销可以忽略不计。*

# java - 如何设置Web服务客户端的请求时间（java）

> ID：13878154
> 
> 赞同：3
> 
> 时间：2012-12-14T11:51:33.410
> 
> 标签：java, web-services, soap, netbeans, timeout

我正在开发一个类似于 drop box 的基于桌面的应用程序，我有一个`downloadFile(long fileId)`从 web 为我下载文件的功能，应用程序的桌面端是在 java 中，其中 web 服务是用 .Net 编写的

**我已经使用 netbeans 生成了 WS 客户端**

**问题是：** 有时`downloadFile(long fileId)`功能会卡住，

不管它背后的原因是什么，我想如果 Web 服务函数在给定时间之前没有给出任何响应，我从该函数中夺回控制权并在一段时间后生成一个新调用。可以使用java吗？

**编辑**我认为如果可以在 Web 服务之外设置请求时间，则可以完成，但我不知道如何在 netbeans 生成的客户端中设置超时

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T16:11:19.123

在作为`FileUpload`Web 服务根类（由 netBeans 生成）的类中，有一些超类的类和函数的构造函数，其中一个是我用来创建`SOAP` 对象的。那看起来像

```
@WebEndpoint(name = "FileUploadSoap")
public FileUploadSoap getFileUploadSoap() {
   return super.getPort(new QName("http://svc.qleapahead.com/", 
    "FileUploadSoap"), FileUploadSoap.class);
    } 
```

在这个函数中，我做了一些修改以设置超时参数，这变得像

```
@WebEndpoint(name = "FileUploadSoap")
public FileUploadSoap getFileUploadSoap() {
    FileUploadSoap fileUploadSoap = super.getPort(new QName(
            "http://svc.qleapahead.com/", "FileUploadSoap"),
            FileUploadSoap.class);
    ((BindingProvider) fileUploadSoap).getRequestContext().put(
            "com.sun.xml.internal.ws.request.timeout", 1000 * 2 * 60);
    return fileUploadSoap;
} 
```

问题解决了……

简而言之，这句话对我帮助很大

```
((BindingProvider) fileUploadSoap).getRequestContext().put(
                "com.sun.xml.internal.ws.request.timeout", 1000 * 2 * 60); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T13:07:43.340

根据您用于调用 web 服务的框架，将有一些方法设置 a`readTimeout`导致调用失败并出现某种异常。

干杯，

# c++ - MFC如何隐藏对话框？

> ID：13878155
> 
> 赞同：0
> 
> 时间：2012-12-14T11:51:38.603
> 
> 标签：c++, mfc, dialog, hide

我需要创建对话框和按钮。当我单击带有箭头对话框隐藏的按钮时，它应该看起来像对话框移动到顶部并且在其他情况下为用户显示。显示窗口（SW_HIDE）。我知道。我想从窗口中获取 CRect，对其进行更改，然后将其设置为 ScreeToClient()。可能有人知道一些例子或其他方式？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T18:34:50.173

通常，如果您需要显示一个包含设置的对话框（类似于 Visual Studio“选项”对话框），那么您通常会这样做：

*   项目清单。
*   创建一个 CDialog 派生类。
*   创建该类的实例。
*   在该对象上调用 DoModal。这显示了对话框。
*   什么都不做。一旦 DoModal 返回，对话框就关闭了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:57:25.710

要隐藏或显示窗口，请按照您的指示使用 ShowWindow()。不需要矩形。

否则，请重新解释您的问题，我无法回答。

# c# - 提高 linq 查询的性能

> ID：13878161
> 
> 赞同：2
> 
> 时间：2012-12-14T11:52:03.973
> 
> 标签：c#, performance, linq

我正在使用许多 Linq 查询优化方法。到目前为止，执行时间约为 3 秒，我正在尝试减少它。该方法中发生了很多操作和计算，但没有太复杂。

我将不胜感激如何提高性能和优化代码的任何建议和想法。

* * *

该方法的整个代码（下面我将指出我有最大延迟的地方）：

```
public ActionResult DataRead([DataSourceRequest] DataSourceRequest request)
{
    CTX.Configuration.AutoDetectChangesEnabled = false;

    var repoKomfortaktion = new KomfortaktionRepository();
    var komfortaktionen = CTX.Komfortaktionen.ToList();

    var result = new List<AqGeplantViewModel>();

    var gruppen = new HashSet<Guid?>(komfortaktionen.Select(c => c.KomfortaktionsGruppeId).ToList());

    var hochgeladeneKomplettabzuege = CTX.Komplettabzug.Where(c => gruppen.Contains(c.KomfortaktionsGruppeId)).GroupBy(c => new { c.BetriebId, c.KomfortaktionsGruppeId }).Select(x => new { data = x.Key }).ToList();
    var teilnehmendeBetriebe = repoKomfortaktion.GetTeilnehmendeBetriebe(CTX, gruppen);
    var hochgeladeneSperrlistenPlz = CTX.SperrlistePlz.Where(c => gruppen.Contains(c.KomfortaktionsGruppeId) && c.AktionsKuerzel != null)
                                                                        .GroupBy(c => new { c.AktionsKuerzel, c.BetriebId, c.KomfortaktionsGruppeId }).Select(x => new { data = x.Key }).ToList();

    var hochgeladeneSperrlistenKdnr = CTX.SperrlisteKdnr.Where(c => gruppen.Contains(c.KomfortaktionsGruppeId) && c.AktionsKuerzel != null)
                                                                        .GroupBy(c => new { c.AktionsKuerzel, c.BetriebId, c.KomfortaktionsGruppeId }).Select(x => new { data = x.Key }).ToList();

    var konfigsProAktion = CTX.Order.GroupBy(c => new { c.Vfnr, c.AktionsId }).Select(c => new { count = c.Count(), c.Key.AktionsId, data = c.Key }).ToList();
    foreach (var komfortaktion in komfortaktionen)
    {
        var item = new AqGeplantViewModel();

        var zentraleTeilnehmer = teilnehmendeBetriebe.Where(c => c.TeilnahmeStatus.Any(x => x.KomfortaktionId == komfortaktion.Id && x.AktionsTypeId == 1)).ToList();
        var lokaleTeilnehmer = teilnehmendeBetriebe.Where(c => c.TeilnahmeStatus.Any(x => x.KomfortaktionId == komfortaktion.Id && x.AktionsTypeId == 2)).ToList();

        var hochgeladeneSperrlistenGesamt =
                hochgeladeneSperrlistenPlz.Count(c => c.data.AktionsKuerzel == komfortaktion.Kuerzel && c.data.KomfortaktionsGruppeId == komfortaktion.KomfortaktionsGruppeId) +
                hochgeladeneSperrlistenKdnr.Count(c => c.data.AktionsKuerzel == komfortaktion.Kuerzel && c.data.KomfortaktionsGruppeId == komfortaktion.KomfortaktionsGruppeId);

        item.KomfortaktionId = komfortaktion.KomfortaktionId;
        item.KomfortaktionName = komfortaktion.Aktionsname;
        item.Start = komfortaktion.KomfortaktionsGruppe.StartAdressQualifizierung.HasValue ? komfortaktion.KomfortaktionsGruppe.StartAdressQualifizierung.Value.ToString("dd.MM.yyyy") : string.Empty;
        item.LokalAngemeldet = lokaleTeilnehmer.Count();
        item.ZentralAngemeldet = zentraleTeilnehmer.Count();

        var anzHochgelandenerKomplettabzuege = hochgeladeneKomplettabzuege.Count(c => zentraleTeilnehmer.Count(x => x.BetriebId == c.data.BetriebId) == 1) +
                                               hochgeladeneKomplettabzuege.Count(c => lokaleTeilnehmer.Count(x => x.BetriebId == c.data.BetriebId) == 1);

        item.KomplettabzugOffen = (zentraleTeilnehmer.Count() + lokaleTeilnehmer.Count()) - anzHochgelandenerKomplettabzuege;

        item.SperrlisteOffen = (zentraleTeilnehmer.Count() + lokaleTeilnehmer.Count()) - hochgeladeneSperrlistenGesamt;

        item.KonfigurationOffen = zentraleTeilnehmer.Count() - konfigsProAktion.Count(c => c.AktionsId == komfortaktion.KomfortaktionId && zentraleTeilnehmer.Any(x => x.Betrieb.Vfnr == c.data.Vfnr));

        item.KomfortaktionsGruppeId = komfortaktion.KomfortaktionsGruppeId;
        result.Add(item);
    }

    return Json(result.ToDataSourceResult(request));
} 
```

前半部分（在 foreach 之前）需要半秒，这没关系。最大的延迟是在*第一次*迭代中的 foreach 语句内部，特别是在这些行中，zentraleTeilnehmer 的执行第一次需要 1.5 秒。

```
var zentraleTeilnehmer = teilnehmendeBetriebe.Where(c => c.TeilnahmeStatus.Any(x => x.KomfortaktionId == komfortaktion.Id && x.AktionsTypeId == 1)).ToList();
var lokaleTeilnehmer = teilnehmendeBetriebe.Where(c => c.TeilnahmeStatus.Any(x => x.KomfortaktionId == komfortaktion.Id && x.AktionsTypeId == 2)).ToList(); 
```

TeilnehmendeBetriebe 有 800 多行，其中 TeilnahmeStatus 属性通常有大约 4 个项目。所以，最多 800*4 次迭代，毕竟这不是一个巨大的数字......

因此，我最感兴趣的是优化这些行，希望将执行时间减少到半秒左右。

我尝试了什么：

1.  将 Linq 重写为 foreach：没有帮助，同时...可能并不奇怪，但值得一试。

    ```
    foreach (var tb in teilnehmendeBetriebe) //836 items
    {
        foreach (var ts in tb.TeilnahmeStatus) //3377 items
        {
            if (ts.KomfortaktionId == komfortaktion.Id && ts.AktionsTypeId == 1)
            {
                testResult.Add(tb);
                break;
            }
        }
    } 
    ```

2.  使用 .Select() 为 teilnehmendeBetriebe 选择特定列。也没有帮助。

两者都没有帮助我尝试过的其他小操作。

有趣的是 - 虽然 foreach 的第一次迭代最多需要 2 秒，第二次甚至更远只需要毫秒，因此 .net 能够优化或重用计算数据。

非常欢迎任何有关可以更改以提高性能的建议！

编辑：
`TeilnahmeBetriebKomfortaktion.TeilnahmeStatus`在方法中急切地加载`GetTeilnehmendeBetriebe`：

```
 public List<TeilnahmeBetriebKomfortaktion> GetTeilnehmendeBetriebe(Connection ctx, HashSet<Guid?> gruppen)
    {
        return ctx.TeilnahmeBetriebKomfortaktion.Include(
                                        c => c.TeilnahmeStatus).ToList();
    } 
```

Edit2：执行 GetTeilnehmendeBetriebe 时发送的查询：

```
 SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[BetriebId] AS [BetriebId], 
    [Extent1].[MandantenId] AS [MandantenId], 
    [Extent1].[CreatedUser] AS [CreatedUser], 
    [Extent1].[UpdatedUser] AS [UpdatedUser], 
    [Extent1].[CreatedDate] AS [CreatedDate], 
    [Extent1].[UpdatedDate] AS [UpdatedDate], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [Semas].[TeilnahmeBetriebKomfortaktion] AS [Extent1]
    WHERE [Extent1].[IsDeleted] <> cast(1 as bit) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:09:22.433

我的假设是这`TeilnahmeBetriebKomfortaktion.TeilnahmeStatus`是一个延迟加载的集合，导致[N + 1 问题](http://www.codeproject.com/Articles/102647/Select-N-1-Problem-How-to-Decrease-Your-ORM-Perfor)。您应该急切地获取该集合以提高您的性能。

foreach 循环的以下迭代很快，因为在第一次迭代之后，这些对象不再从数据库服务器请求，而是从内存服务器。

# javascript - 如何选择“:even”父母？

> ID：13878165
> 
> 赞同：3
> 
> 时间：2012-12-14T11:52:18.517
> 
> 标签：javascript, jquery, jquery-selectors

我正在尝试制作一个 if 语句，如果按钮的父级是其父级的偶数子级，则 do `alert("it works");`， else do `alert("nope");`，这可能很容易，我对此很陌生！:) 这是我当前的代码：

HTML：

```
<div>
    <div>
        <button>#0</button>
    </div>
    <div>
        <button>#1</button>
    </div>
    <div>
        <button>#2</button>
    </div>
    <div>
        <button>#3</button>
    </div>
</div>​ 
```

JS：

```
$(function () {
        $("button").click(function () {
            var $parent = $(this).parent();
            if ($parent.is(":even")) {
                alert("it works");
            } else {
                alert("nope");
            }
        });
});​ 
```

jsFiddle：http: [//jsfiddle.net/goldson/Rn6gz/1/](http://jsfiddle.net/goldson/Rn6gz/1/)

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T11:54:36.107

您可以使用[**index()**](http://api.jquery.com/index/)来获取索引并使用模运算符`%`来知道它是`event`还是`odd`。

**[现场演示](http://jsfiddle.net/Rn6gz/3/)**

```
$(function () {
    $("button").click(function () {
        var $parent = $(this).parent();
        if ($parent.index() % 2 == 0) {
            alert("it works");
        } else {
            alert("nope");
        }
    });
});​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T11:57:56.987

一种解决方法是将类添加到您的偶数 div 元素：

**[演示](http://jsbin.com/ujivem/1/)**

```
<div id="parentDiv">
    <div>
        <button>#0</button>
    </div>
    <div>
        <button>#1</button>
    </div>
    <div>
        <button>#2</button>
    </div>
    <div>
        <button>#3</button>
    </div>
</div>

$(function () {

    var arr = $('#parentDiv div');
    arr.filter(":even").addClass("even");

    $("button").click(function () {
        var $parent = $(this).parent();
        if ($parent.is(".even")) {
            alert("it works");
        } else {
            alert("nope");
        }
    }); 
```

});

# java - 我可以修改 Izpack Uninstaller 以删除安装期间未创建的其他文件吗

> ID：13878172
> 
> 赞同：0
> 
> 时间：2012-12-14T11:52:49.230
> 
> 标签：java, izpack, uninstallation

Izpack 卸载程序会删除安装，但不会删除我在应用程序首次运行时创建的用户文件夹（和数据）。

有没有办法修改安装程序来做到这一点？我是否应该这样做，即如果他们卸载应用程序是因为他们不再想使用它，我应该这样做，但如果他们只是卸载应用程序是因为他们想安装最新版本并且他们喜欢先卸载旧版本这样做我不应该删除他们的用户数据。

**编辑** 应该说我使用的是 Izpack 5beta 11 而不是 Izpack 4.3.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:27:58.357

我会为卸载阶段创建自定义操作：[https://izpack.atlassian.net/wiki/spaces/IZPACK/pages/491535/Custom+Actions#id-(CustomActions)-CustomActionsatUninstallationTime(UninstallerListener)](https://izpack.atlassian.net/wiki/spaces/IZPACK/pages/491535/Custom+Actions#id-(CustomActions)-CustomActionsatUninstallationTime(UninstallerListener))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:45:10.100

可以在安装和卸载时间上定义自定义操作。

此操作也可以使用 Ant 任务定义，请参阅[http://izpack.org/documentation/custom-actions.html#ant-actions-installerlistener-and-uninstallerlistener](http://izpack.org/documentation/custom-actions.html#ant-actions-installerlistener-and-uninstallerlistener)

你可能会发现这个特别有用：

**<uninstall_target>：调用卸载的**
*目标 目标在卸载时使用此 antcall 执行。目标应在给定的构建文件中定义，否则将引发 ant 异常。有了这个目标，就可以撤消在安装时所做的事情。*
*姓名：必填。卸载目标的名称。*

# php - 如何在 php 5.1.6 的 insert 语句中使用 where 子句

> ID：13878176
> 
> 赞同：-1
> 
> 时间：2012-12-14T11:53:02.833
> 
> 标签：php, html, mysql

如何在 php 5.1.6 的 insert 语句中使用 where 子句？

我有一个全局变量`$module`，我想使用`where`子句来区分我的搜索结果。`where module= $module`

我不断收到错误说未定义的变量`$module`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:56:08.617

~~在不了解您的代码的情况下，我猜您的问题是您没有转义 $module 变量。尝试用 {} 包围它。~~

例子：

~~$query = "SELECT * FROM FOOBAR WHERE id = {$module}";~~

编辑：

OP 在评论上发布了代码。

{} 仅在您在变量周围使用引号时才有效。

将您的代码更改为：

```
$sql = "SELECT id, AssignmentName, file, deadline,name,module FROM Assignment_scripts where module={$module}"; 
```

编辑2：

您实际上是在某处定义 $module 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T12:42:57.430

PHP 不会在单引号内进行变量替换 - 您应该将单引号更改为双引号，它会起作用。

换句话说，如果 $x = 5，'$x' 是 $x 而 "$x" 是 5。

# c - 用整数理解 printf()

> ID：13878189
> 
> 赞同：0
> 
> 时间：2012-12-14T11:54:04.533
> 
> 标签：c, integer, printf, integer-arithmetic

我有一个关于该`printf()`方法如何打印有符号或无符号整数的问题。有一天，我发现自己在想，鉴于计算机没有十进制的概念，将二进制序列转换为人类可以理解的十进制数字序列是多么困难。

下面，我有一个`printf()`方法（从[这里](http://www.menie.org/georges/embedded/printf-stdarg.html)）及其相关方法。正如您在评论中看到的那样，我试图尽可能多地了解其`printi()`工作原理：

```
#define PAD_RIGHT 1
#define PAD_ZERO 2

#include <stdarg.h>

static void printchar(char **str, int c)
{
    extern int putchar(int c);

    if (str) {
        **str = c;
        ++(*str);
    }
    else (void)putchar(c);
}

static int prints(char **out, const char *string, int width, int pad)
{
    register int pc = 0, padchar = ' ';

    if (width > 0) {
        register int len = 0;
        register const char *ptr;
        for (ptr = string; *ptr; ++ptr) ++len;
        if (len >= width) width = 0;
        else width -= len;
        if (pad & PAD_ZERO) padchar = '0';
    }
    if (!(pad & PAD_RIGHT)) {
        for ( ; width > 0; --width) {
            printchar (out, padchar);
            ++pc;
        }
    }
    for ( ; *string ; ++string) {
        printchar (out, *string);
        ++pc;
    }
    for ( ; width > 0; --width) {
        printchar (out, padchar);
        ++pc;
    }

    return pc;
}

/* the following should be enough for 32 bit int */
#define PRINT_BUF_LEN 12

static int printi(char **out, int i, int b, int sg, int width, int pad, int letbase)
{
    /*
        i is the number we are turning into a string
        b is the base, i.e. base 10 for decimal
        sg is if the number is signed, i.e. 1 for signed (%d), 0 for unsigned (%u)

        By default, width and pad are 0, letbase is 97
    */

    char print_buf[PRINT_BUF_LEN];
    register char *s;
    register int t, neg = 0, pc = 0;
    register unsigned int u = i;

    if (i == 0)
    {
        print_buf[0] = '0';
        print_buf[1] = '\0';
        return prints(out, print_buf, width, pad);
    }

    if (sg && b == 10 && i < 0)
    {
        neg = 1;
        u = -i;
    }

    s = print_buf + PRINT_BUF_LEN - 1;
    *s = '\0';

    while (u)
    {
        t = u % b;

        if (t >= 10)
            t += letbase - '0' - 10;

        *--s = t + '0';
        u /= b;
    }

    if (neg)
    {
        if (width && (pad & PAD_ZERO))
        {
            printchar(out, '-');
            ++pc;
            --width;
        }
        else
            *--s = '-';
    }

    return pc + prints(out, s, width, pad);
}

static int print(char** out, const char* format, va_list args)
{
    register int width, pad;
    register int pc = 0;
    char scr[2];

    for (; *format != 0; ++format)
    {
        if (*format == '%')
        {
            ++format;
            width = pad = 0;

            if (*format == '\0')
                break;

            if (*format == '%')
                goto out;

            if (*format == '-')
            {
                ++format;
                pad = PAD_RIGHT;
            }

            while (*format == '0')
            {
                ++format;
                pad |= PAD_ZERO;
            }

            for (; *format >= '0' && *format <= '9'; ++format)
            {
                width *= 10;
                width += *format - '0';
            }

            if (*format == 's')
            {
                register char* s = (char*) va_arg(args, int);
                pc += prints(out, s ? s : "(null)", width, pad);
                continue;
            }

            if (*format == 'd')
            {
                pc += printi(out, va_arg(args, int), 10, 1, width, pad, 'a');
                continue;
            }

            if (*format == 'x')
            {
                pc += printi(out, va_arg(args, int), 16, 0, width, pad, 'a');
                continue;
            }

            if (*format == 'X')
            {
                pc += printi(out, va_arg(args, int), 16, 0, width, pad, 'A');
                continue;
            }

            if (*format == 'u')
            {
                pc += printi(out, va_arg(args, int), 10, 0, width, pad, 'a');
                continue;
            }

            if (*format == 'c')
            {
                /* char are converted to int then pushed on the stack */
                scr[0] = (char) va_arg(args, int);
                scr[1] = '\0';
                pc += prints(out, scr, width, pad);
                continue;
            }
        }
        else
        {
            out:
            printchar (out, *format);
            ++pc;
        }
    }

    if (out)
        **out = '\0';

    va_end(args);

    return pc;
}

int printf(const char *format, ...)
{
        va_list args;

        va_start( args, format );
        return print( 0, format, args );
} 
```

如果我讨厌阅读库源代码的一件事，那就是它几乎不可读。具有一个字符且没有注释来解释它们的变量名称是一种痛苦。

您能否以简单的方式解释将整数转换为十进制数字字符串的方法到底是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:07:02.093

您粘贴的代码不难阅读。我怀疑你可能早就放弃了。

暂时忽略负数的可能性，这个`printi()`例程：

*   创建一个缓冲区以将数字打印到 12 个字符宽
*   设置一个字符指针`s`指向该缓冲区的*末尾*** NULL-终止它，然后将指针移动一个字符到“左”

然后例程进入一个循环，只要数字保持 > 0

*   MOD除以10（即除以10取余数）
*   *   这成为`s`指向的数字，因此将 ASCII 表示放在那里
*   *   `s`再次向左移动
*   将数字设置为自身 / 10；这将删除刚刚打印的数字
*   只要有更多数字要打印，就重复循环

这里唯一棘手的是处理负数，但是如果您了解负数是如何存储的，那一点也不棘手。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T12:05:45.340

也许我一直盯着模板库标题太久了，但是那个库代码对我来说看起来很可读！

我将解释主循环，因为其余的（杂耍标志等）应该很容易弄清楚。

```
while (u)
{
    t = u % b;

    if (t >= 10)
        t += letbase - '0' - 10;

    *--s = t + '0';
    u /= b;
} 
```

基本上我们正在做的是一次提取一个数字，*从右到左*。假设`b == 10`（即`%d`or的通常情况`%u`）。该`%`运算符称为模运算符，用于计算整数除法后的余数。该行第一次`t = u % b;`运行时，它计算输出字符串的最右边的数字——将数字`u`除以 10 后的余数。（假设数字`u`是 493：除以 10 后的余数是 3，即最右边的数字。）

在将这个最右边的数字提取到中后，如果它是 10 或更大`t`，`if`语句决定如何“调用”这个数字。这个修正相当于进行了调整`t`，以便在下一行添加“0”（数字“0”的[ASCII 值](http://www.asciitable.com/)，即 48）时，结果将是一个以“a”或“A”开头的字母（到为大于 10 的基数生成十六进制数字和其他数字）。

之后的行将数字写入缓冲区。它进入缓冲区的*最右边的字符*`print_buf`（注意`s`早期如何初始化指向该缓冲区的*末尾*，而不是通常情况下的开始）。随后将指针`s`向左移动一个字符以准备下一个字符。

下一行 ,`u /= b`简单地除以`u`10，有效地丢弃了最右边的数字。（这是有效的，因为整数除法永远不会产生分数，并且总是向下舍入。）然后这会为下一个循环迭代打开第二个最右边的数字以进行处理。冲洗，重复。当没有任何东西时，循环最终停止（条件`while (u)`等同于条件`while (u != 0)`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T12:04:28.697

*将*正整数 I 转换为以 10 为底的方法基本上是：

```
if (i == 0)
    printf("0");
else while (i != 0) {
    unsigned int j = i / 10;
    unsigned int digit = i - 10 * j;
    printf("%c", digit + '0');
    i = j;
} 
```

除了这会向后打印出数字。

# android - 结果不正确：格式化 ISO-8601 时间并提取 12 小时时间

> ID：13878195
> 
> 赞同：1
> 
> 时间：2012-12-14T11:54:33.020
> 
> 标签：android, facebook, datetime, facebook-fql, iso8601

我正在使用 FQL 从 Facebook API 获取新闻源，该 FQL 将“created_time”字段作为 UNIX 时间戳返回。我正在使用这段代码将其转换为我认为的 ISO-8601 时间戳：

```
String getInitialCreatedTime = JOFeeds.getString("created_time");
long finalTimeStamp = Long.valueOf(getInitialCreatedTime);
SimpleDateFormat dateFormatter = new SimpleDateFormat("yyyy-MM-dd'T'hh:mm:ssZ");
String finalCreatedTime = dateFormatter.format(new Date(finalTimeStamp * 1000L)); 
```

现在，`finalCreatedTime`我想从字符串中提取 12 小时 (AM/PM) 格式的时间。

为此，我正在使用以下代码：

```
final String old_format = "yyyy-MM-dd'T'HH:mm:ssZ";
final String new_format = "EEE MMM d hh:mm aa yyyy";

String oldDateSring = finalCreatedTime;

SimpleDateFormat sdf = new SimpleDateFormat(old_format);
Date d = sdf.parse(oldDateSring);
sdf.applyPattern(new_format);

Calendar cal = Calendar.getInstance();
cal.setTime(d); 
```

和：

```
// GET THE TIME
SimpleDateFormat sdfTimeFormatter = new SimpleDateFormat("hh:mm aa");
String getTime = sdfTimeFormatter.format(cal.getTime());
feeds.setTime(getTime);
Log.e("TIME", getTime); 
```

第一个代码块的结果是：`2012-12-14T04:30:03+0530`

`// GET THE TIME`块的结果是`04:30AM`它应该是什么时候`04:30PM`。

我将不胜感激有关此的任何指示。也许，我实施错了？

编辑：我可能会补充一点，介于 12.00 PM 和 1.00 PM 之间的时间戳会得到正确处理，并按应有的方式显示 PM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:03:04.643

你有 ：

```
String getInitialCreatedTime = JOFeeds.getString("created_time");
long finalTimeStamp = Long.valueOf(getInitialCreatedTime);
// Note 8601 is written with 'HH'
SimpleDateFormat dateFormatter = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ"); 
```

到现在为止还挺好。但是你需要从中创建一个日期。

```
Date date = new Date(finalTimeStamp * 1000L) 
```

然后，您需要格式化您需要的内容（永远不要解析您刚刚格式化的日期。这根本没有意义）。

```
String finalCreatedTime = dateFormatter.format(date); // Not sure if you need this one 
```

和

```
SimpleDateFormat sdfTimeFormatter = new SimpleDateFormat("hh:mm aa");
String getTime = sdfTimeFormatter.format(date);
feeds.setTime(getTime); 
```

# java - 使用javascript动态添加重复（唯一ID）表单Div元素

> ID：13878197
> 
> 赞同：2
> 
> 时间：2012-12-14T11:54:57.047
> 
> 标签：java, javascript, spring, jsp, dojo

我有一个包含以下字段的表单：

```
<div class="row">
   <div class="field">
      <input class="" type="text" name="college" id="college"/>
   </div>

   <div class="field">
      <input class="" type="text" name="city" id="city"/>
   </div>

   <div class="field">
      <input class="" type="text" name="zip" id="zip"/>
   </div>
</div>
<input type="button" class="buttonWidth" id="btnAddressAdd" value="Add Worksite Addressess"/> 
```

我有一个添加额外地址按钮，可将另一个 div“行”副本添加到页面。我需要将页面中的所有数据作为请求发送到控制器。如何编写一个脚本，在单击按钮时添加额外的 div 副本，并将唯一的 id 附加到每个新字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:20:13.777

**请参阅Dojo**中的工作示例：http : [//jsfiddle.net/phusick/PeQCN/](http://jsfiddle.net/phusick/PeQCN/)

**以及普通 JavaScript**中的相同代码：http : [//jsfiddle.net/phusick/Rceua/](http://jsfiddle.net/phusick/Rceua/)

Dojo 版本使用`dojo/_base/lang::clone`@Peter Rader 提到的：

```
// var lang    = require("dojo/_base/lang");
// var array   = require("dojo/_base/array");
// var query   = require("dojo/query");
// var domAttr = require("dojo/dom-attr");

var counter = 0;

function duplicate(/*Node*/sourceNode, /*Array*/attributesToBump) {
    counter++;
    var out = lang.clone(sourceNode);
    if (domAttr.has(out, "id")) { out.id = bump(out.id); }

    query("*", out).forEach(function(node) {
        array.forEach(attributesToBump, function(attribute) {
            if (domAttr.has(node, attribute)) {
                domAttr.set(node, attribute, bump(domAttr.get(node, attribute)));
            }        
        })
    });

    function bump(/*String*/str) {
        return str + "_" + counter;
    }

    return out;
} 
```

如何使用上述`duplicate`功能：

```
// var dom          = require("dojo/dom");
// var domConstruct = require("dojo/dom-construct");

var sourceNode = dom.byId("fieldset");
var node = duplicate(sourceNode, ["id", "name", "placeholder"]);  
domConstruct.place(node, sourceNode, "after"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:38:40.547

我已经编写了代码来实现这一点。

逻辑：
1）获取所需父级的innerHTML
2）替换文本中的id
3）插入新的html

查看[工作代码](http://jsbin.com/ulipeg/5/watch)

请原谅我在 JS 部分的编码风格不好。我不习惯直接在 DOM 上编码。我更喜欢 JQuery。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T13:17:44.957

尝试

使用这个snipplet（见用法） [http://dojotoolkit.org/reference-guide/1.8/dojo/_base/lang.html#dojo-base-lang-clone](http://dojotoolkit.org/reference-guide/1.8/dojo/_base/lang.html#dojo-base-lang-clone)

# android - 检查状态其他应用程序android

> ID：13878199
> 
> 赞同：0
> 
> 时间：2012-12-14T11:54:58.987
> 
> 标签：android

我正在使用此代码从另一个应用程序打开一个应用程序：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    PackageManager pm = getPackageManager();
    Intent intent = pm.getLaunchIntentForPackage("com.example.p2a");
    intent.putExtra("application_id", 2);
    getApplicationContext().startActivity(intent);
    finish();
} 
```

我如何检查另一个应用程序是否正在运行？我想如果正在运行-杀死并重新启动，如果没有启动应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:58:31.443

可以通过这个查看应用的运行状态

```
ActivityManager aManager = (ActivityManager) this.getSystemService( ACTIVITY_SERVICE );
    List<RunningAppProcessInfo> processInfo = aManager.getRunningAppProcesses();
    for(int i = 0; i < processInfo.size(); i++){
        if(processInfo.get(i).processName.equals("myPackage.myAppName")) {
            //Kill app
        }
    }
     //Start app 
```

# asp.net - Web服务是否暴露给任何人？

> ID：13878200
> 
> 赞同：1
> 
> 时间：2012-12-14T11:55:01.843
> 
> 标签：asp.net, web-services, security

我对 Web 服务非常陌生（请注意，不是 WCF，而是老式的 .asmx 文件）。

现在我可能太喜欢端口了，但是如果我在面向 Web 的服务器上公开一个端口，那么它就会受到攻击以及我自己的使用；有一些工具可以扫描以查看打开的端口。

Web 服务是这样吗？现在，不要误会我的意思，我知道每个服务都应该编码得足够好，不会发生任何恶意行为，或者调用类不知道实现它们的“合同”，但这不是问题（我猜是端口洪水仍然可能发生？）；如果我在服务器上设置了一些 Web 服务，是否有可以检测它们的工具/程序（按名称）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:02:40.330

是的，Web 服务基本上是一个网页，它接受参数和响应，并带有可以更容易被程序读取的格式化结果（从技术上讲，两者都是 http 请求和响应的结果 - 还有其他机制，但是典型的是通过 http 协议）。

如果您在浏览器中键入指向您的 Web 服务的链接，您将看到一个界面，允许您“执行”其服务。

因此，您需要与网页相同的安全性，这意味着登录或检查凭据、令牌、签名、加密等（最好在 ssl 连接上）。

# android - Android上的部分选中复选框？

> ID：13878208
> 
> 赞同：16
> 
> 时间：2012-12-14T11:55:33.890
> 
> 标签：android, checkbox, selection

在 Android 上，我需要一个复选框（或类似复选框的组件），它可以表示/控制多个选定项目的标志。我需要代表 3 种可能性：

1.  为所有项目设置标志。
2.  没有为任何项目设置标志。
3.  为某些项目设置了标志。

我在想象这样的事情：

![在此处输入图像描述](../Images/9b6c05d5775ec920a18bd32c4093b171.png)

如果用户在状态 3 中选中复选框，它将切换到状态 1。此后，它只会在状态 1 和 2 之间切换。

如果您熟悉 Windows 中文件属性对话框的属性部分中的复选框，那就是我所追求的。

**是否有可以做到这一点的原生 Android UI 小部件或现有的开源小部件？**

我相当有信心我可以自己实现，但我宁愿不重新发明轮子！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T14:58:05.030

我认为您最好使用自己的实现。这将是一个相当简单的，只需使用：setOnCheckedChangeListener，这是一个简单的教程，它只是展示了这个监听器的使用，你将只实现更改你的标志，并在正确的状态下设置一些复选框为可检查状态。

[http://developer.android.com/guide/topics/ui/controls/checkbox.html](http://developer.android.com/guide/topics/ui/controls/checkbox.html)

希望能帮助到你！

# visual-studio - CMake 并在 Visual Studio 中的文件级运行 PC-Lint

> ID：13878209
> 
> 赞同：1
> 
> 时间：2012-12-14T11:55:34.113
> 
> 标签：visual-studio, cmake, pc-lint

有没有办法为 CMake 生成的 Visual Studio 项目中的特定文件或整个项目运行 PC-Lint？

目前，我可以通过使用[Kitware 的脚本](http://www.cmake.org/Wiki/PC-Lint)创建自定义目标来为每个项目运行 PC-Lint ，但在我的环境中，整个项目的 linting 可能需要长达 10 分钟。因此，我还希望能够仅对特定的源文件进行 lint（并从 Visual Studio 中选择该文件）。

我在想，如果 PC lint 可以用作自定义“编译器”并为我的目标创建另一个使用 lint“编译器”的 project_LINT 目标。然后我也许可以选择要“编译”的单个文件。还是这个想法注定要失败？:)

# java - 如何使用 jdb 调试 JUnit 测试用例？

> ID：13878210
> 
> 赞同：0
> 
> 时间：2012-12-14T11:55:35.933
> 
> 标签：java, unit-testing, debugging, junit, jdb

我在调试 JUnit 测试用例时遇到问题。我正在使用 Java v6 和 JUnit Framework v3.8.2。

我像这样调用jdb：

```
jdb junit.textui.TestRunner MyTest 
```

问题是我不知道 TestRunner 从我的 TestCase 类创建的对象的名称。例如，我想打印一个方法的返回值，但是当我不知道对象的名称时，如何调用该方法？

编辑：异常发生在第 45 行，这是我在 jdb 中执行“where”时得到的调用堆栈：

```
[1] MyTest.test1 (MyTest.java:44)
[2] sun.reflect.NativeMethodAccessorImpl.invoke0 (native method)
[3] sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:57)
[4] sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)
[5] java.lang.reflect.Method.invoke (Method.java:616)
[6] junit.framework.TestCase.runTest (TestCase.java:164)
[7] junit.framework.TestCase.runBare (TestCase.java:130)
[8] junit.framework.TestResult$1.protect (TestResult.java:106)
[9] junit.framework.TestResult.runProtected (TestResult.java:124)
[10] junit.framework.TestResult.run (TestResult.java:109)
[11] junit.framework.TestCase.run (TestCase.java:120)
[12] junit.framework.TestSuite.runTest (TestSuite.java:230)
[13] junit.framework.TestSuite.run (TestSuite.java:225)
[14] junit.textui.TestRunner.doRun (TestRunner.java:121)
[15] junit.textui.TestRunner.start (TestRunner.java:185)
[16] junit.textui.TestRunner.main (TestRunner.java:143) 
```

Edit2：我把事情搞混了，我知道我想打印一个方法的对象的名称，但它仍然不起作用。我写了一个小测试用例和类来解释确切的问题。

这是测试用例：

```
import junit.framework.TestCase;

public class TestJUnit extends TestCase {

    public void test1() {
        try {
            JUnitTestClass mtc = new JUnitTestClass();
            assertTrue(mtc.method1() == 1);
            assertTrue(mtc.method1() == 2);
        } catch (Exception exc) {
            fail(exc.getMessage());
        }
    }
} 
```

这是被测试的类：

```
public class JUnitTestClass {

    private int att1 = 0;

    public int method1() {
        this.att1 += 1;
        return this.att1;
    }
} 
```

然后我像这样运行调试器：

```
bash-4.2$ jdb -classpath $CLASSPATH junit.textui.TestRunner TestJUnit
Initializing jdb ...
> stop at TestJUnit:8
Deferring breakpoint TestJUnit:8.
It will be set after the class is loaded.
> run
run junit.textui.TestRunner TestJUnit
Set uncaught java.lang.Throwable
Set deferred uncaught java.lang.Throwable
> 
VM Started: Set deferred breakpoint TestJUnit:8
.
Breakpoint hit: "thread=main", TestJUnit.test1(), line=8 bci=8
8                assertTrue(mtc.method1() == 1);

main[1] print mtc.method1()
com.sun.tools.example.debug.expr.ParseException: Name unknown: mtc.method1
mtc.method1() = null
main[1] dump mtc
com.sun.tools.example.debug.expr.ParseException: Name unknown: mtc
mtc = null 
```

当我尝试打印方法或转储对象时，我得到“名称未知”。

Edit3：我只是忘记在使用 javac 时使用 -g，抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:38:18.413

对不起，伙计们，我对这一切都很陌生，我犯了一个愚蠢的错误。我在调用 javac 生成测试用例类文件时忘记使用 -g 命令。现在可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:06:46.010

你能在你的实际测试方法之一中设置一个断点，然后在它中断时查看调用堆栈，然后进入实际的 JUnit 代码吗？

使用可视化调试器这可能是最简单的。它还假定您正在运行的 JUnit 实例是使用调试支持构建的。否则，您将不会获得任何符号信息。

# vb.net - 从 VB 中的 SharePoint 客户端对象模型获取用户名？

> ID：13878213
> 
> 赞同：0
> 
> 时间：2012-12-14T11:55:48.253
> 
> 标签：vb.net, sharepoint-2010

我正在努力弄清楚如何使用客户端对象模型和 VB.Net 获取 SharePoint 2010 用户的用户名。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:13:54.080

Microsoft.sharepoint.dll 首先参考你的项目，你必须添加。添加您以引用使用以下代码登录的用户后，此时可用。

```
string loginUserName = SPContext.Current.Web.CurrentUser.LoginName 
```

如果您有用户名，并且从那里，如果您只想访问用户数据，请使用以下代码

```
SPUser anyUser = SPContext.Current.Web.EnsureUser("DOMAIN\\UserName"); 
```

注意：Microsoft.sharepoint.dll 什么 Sharepoint 安装在服务器上的 dll C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\ISAPI 可以找到。

# c - 分配之间的差异

> ID：13878215
> 
> 赞同：4
> 
> 时间：2012-12-14T11:55:52.127
> 
> 标签：c, arrays, pointers, malloc

> **可能重复：**
> [声明和 malloc 之间的区别](https://stackoverflow.com/questions/10575544/difference-between-declaration-and-malloc)

这两个程序有区别吗？

```
int main(void) {
    char str[80];
} 
```

和

```
int main(void) {
    char * str = (char*) malloc( sizeof(char) * 80 );
} 
```

`malloc`那么 using和类似数组的语法有区别吗？因此，如果我需要 80 个字符的内存，我应该使用`malloc`而不是其他可能性，对吗？

我会尝试回答我自己的问题！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T11:58:59.793

```
char str[80]; 
```

在堆栈上分配 80 个字节。这将在`str`超出范围时自动回收。

```
char * str = (char*) malloc( sizeof(char) * 80 ); 
```

在堆上分配 80 个字节。在您调用之前，此内存可用`free`。

请注意，第二种情况可以简化为

```
char * str = malloc(80); 
```

`malloc`即你不应该从C中转换 return并且`sizeof(char)`保证为 1

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T11:58:06.203

第一个分配在堆栈上，当变量超出范围时将被释放。堆上的第二个，必须明确地 free()'d。

两者都可以作为指针传递。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T11:58:45.197

在第一种情况下，您在堆栈上分配 80 个字符，在第二种情况下，您在堆上分配内存。

两者都可以用作指针，并传递给函数，并且都可以与数组索引语法一起使用。

# ios - tcp 连接中的扭曲缓冲区已满

> ID：13878216
> 
> 赞同：3
> 
> 时间：2012-12-14T11:55:56.107
> 
> 标签：ios, twisted

我在一个简单的扭曲服务器实现中接收长数据（> 1024 字节）时遇到问题。从一开始，我正在开发一个必须与扭曲服务器同步的 ios 应用程序。我准备要以 JSON 格式发送的信息。然后我开始以块的形式发送该数据（现在以块的形式发送`256bytes + 4 bytes`命令 - 是的，我正在实现自己的协议）。连接正常，我在我的服务器中收到了这些数据包（在`dataReceived`我自己的协议子类的函数中）。ios 方法：`NSInteger writtenBytes =[self.outputStream write:[data bytes] maxLength:[data length]]`将写入的字节返回到流中。对于前 4 个数据包，返回的值是预期的（260 字节）。如果我有更多可用字节要发送，下次我调用该方法时它会返回 0（苹果文档说：）`"If the receiver is a fixed-length stream and has reached its capacity, 0 is returned."`。

所以我推断输入缓冲区已满。我不知道如何释放该缓冲区（我不知道如何到达该缓冲区）。我不知道那个缓冲区的极限在哪里（在我看来这几乎是荒谬的）。

这是服务器的基本测试（只是这个问题的重要内容，基于字符串协议的基本）

```
from twisted.internet.protocol import Protocol, Factory
from twisted.internet import reactor
class IphoneSync(Protocol):
    def  __init__(self):
        self.__buffer = ""

    def connectionMade(self):
        self.transport.write("0:")
        self.factory.clients.append(self)
        print "clients are ", self.factory.clients

    def connectionLost(self, reason):
        self.factory.clients.remove(self)

    def dataReceived(self, data):

        #print "data is ", data

        a = data.split(':')
        if len(a) > 1:
            command = a[0]
            content = a[1]

            msg = ""
            if command == "iam":
                #user&Pass checking
                msg = "1"

            elif command == "msg":
                self.__buffer += data

                msg = "1: continue"

            elif command == "fin":
                #procesaremos todo
                #Convertir datos en json
                #insertar/actualizar data en sqlite
                #devolver respuesta
                print "buffer is", self.__buffer
                msg = "2: procesing"

            print msg
            self.transport.write(msg)       
            #for c in self.factory.clients:
                #c.message(msg)

    def message(self, message):
        self.transport.write(message)
        #self.transport.write(message + '\n')

factory = Factory()
factory.protocol = IphoneSync
factory.clients = []
dir(factory)

reactor.listenTCP(8000, factory)
print "Iphone Chat server started"
reactor.run() 
```

我看到了`LineReceiver`课程，但我没有发送线路。传输的数据可能非常大（10Mb-50Mb）。我正在考虑消费者/生产者模型，或像（AMP 或 PB）这样的 RPC 协议作为解决方案，但我想使用我自己的协议。如果有人知道如何帮助我，我将不胜感激。不管怎么说，还是要谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:03:18.463

> 连接正常，我在我的服务器中接收到这些数据包（在我自己的协议子类的 dataReceived 函数中）。

可能不是。TCP 是一种“面向流”的协议。您的应用程序对它的使用不是以数据包的形式，而是以字节序列的形式。无法保证`dataReceived`将使用您传递给的相同字符串调用任何内容`outputStream write`。如果你写“hello, world”，`dataReceived`可能会被称为“hello, world” - 或者可能会被调用两次，首先是“hello”，然后是“world”。或者它可能被调用 12 次：首先是“h”，然后是“e”，然后是“l”，等等。

如果你调用`outputStream write`两次，一次用“hello”，一次用“world”，那么完全有可能`dataReceived`只用“hello, world”调用一次。或者也许两次，但是用“h”然后是“hello, world”。

所以你正在发明这个全新的协议（我看到你提到你承认你在做，但你没有解释为什么这是一个好主意或你的应用程序的重要部分，而不仅仅是潜在错误的大量来源并且时间利用不当:)必须做一些称为“框架”的事情，以便让您真正解释正在传递的字节序列。这就是为什么会有像 AMP 这样的协议。

要真正回答您的问题，请`outputStream write`返回它实际能够缓冲发送的字节数。您必须始终检查它的返回值并重新尝试写入它**无法**发送的任何字节，最好是在等待有更多缓冲区空间的通知之后。在使用该空间的字节通过网络发送并由接收器确认后，缓冲区空间变得可用。这需要时间，因为网络不是即时的。关于可用缓冲区空间的通知有多种形式，其中最古老和最广泛的（但不一定是您的环境中最好的）`select(2)`系统调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T02:15:00.740

除了 Jean-Paul Calderone 的回答（确保通过使用 select 或 thread 完全从 obj-c 端发送数据）之外，对于协议部分，我建议在简单的用例中使用长度前缀字符串（AKA Netstring）。

这是一个[实现](http://pastebin.com/PiZasD7R)。每当收到某些内容时，您都需要调用`NSBuffer.write`then`NSBuffer.extract`以获取可用的字符串。

# actionscript-3 - Flash 超链接 - 在 url 中更改 var 名称

> ID：13878221
> 
> 赞同：1
> 
> 时间：2012-12-14T11:56:13.900
> 
> 标签：actionscript-3, flash, hyperlink

我在现场 Flash 中的超链接有问题。由于网站在 CMS 中，审批的不同阶段我不知道确切的网址，所以

```
function piClick(e:MouseEvent):void
{
  var url:String = "/cms__Main?name=Target_name";
  var request:URLRequest = new URLRequest(url);
  try {
    navigateToURL(request, '_self');
  } catch (e:Error) {
    trace("Error occurred!");
  }
} 
```

不起作用，因为 cms_Main 会根据站点的阶段而变化。我可能需要做的是：

*   抓取网址（或最后一个“/”之后的部分，如果可能的话）
*   更改字符串中的“名称”变量

铁

```
https://domain_name/.../status?name=Name_I_need_to_swap&sname=Country_name&.. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:19:38.907

你可以得到网址`this.loaderInfo.url`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T18:10:14.560

`stage.loaderInfo.url`将为您提供 swf 本身的地址，因此不会为您提供完整地址、查询或哈希标记。但是，您可以使用 Javascript 获取所有这些信息。

```
import flash.external.ExternalInterface;

function getFullAddress():String {
    if (ExternalInterface.available) {
        var href:String = ExternalInterface.call('function(){return window.location.href}');
        if (href) return href.toString();
    }
    throw new Error('Make sure JS is enabled.');
}
var fullAddr:String = getFullAddress(); 
```

**编辑：**这是获取和修改您所要求的所有内容的方法。

```
import flash.external.ExternalInterface;
import flash.net.URLVariables;
import flash.net.URLRequest;
import flash.net.URLRequestMethod;
import flash.net.navigateToURL;

function getFullAddress():String {
    if (ExternalInterface.available) {
        var href:String = ExternalInterface.call('function(){return window.location.href}');
        if (href) return href.toString();
    }
    throw new Error('Make sure JS is enabled.');
}
function getQuery(fullAddr:String):URLVariables {
    if (!fullAddr.match(/\?[^#]/)) return new URLVariables();
    var q:String = fullAddr.replace(/^.*?\?([^#]+)(#.*)?$/,'$1');
    return new URLVariables(q);
}
function getAddress(fullAddr:String):String {
    return fullAddr.replace(/\?.*/,'').replace(/#.*/,'');
}
function getRequest(url:String,query:URLVariables=null,method:String='GET'):URLRequest {
    method = URLRequestMethod[method] || 'GET';
    var req:URLRequest = new URLRequest(url);
    req.method = method;
    if (method == 'GET' && query != null) {
        req.url += '?' + query.toString().replace(/%5f/gi,'_').replace(/%2d/gi,'-');
        // this is because dash and underscore chars are also
        // encoded by URLVariables. we want to omit this.
        return req;
    }
    req.data = query;
    return req;
}

var fullAddr:String = getFullAddress();
var addr:String = getAddress(fullAddr);

var query:URLVariables = getQuery(fullAddr);
query.name = 'Name_I_need_to_swap';
query.sname = 'Country_name';
// add as many variable-value pairs as you like
// and don't worry, they will be automatically
// encoded by the function called below

var req:URLRequest = getRequest(addr,query);
//navigateToURL(req);

// check the console to see the changed address
ExternalInterface.call('console.log',req); 
```

# c# - 特殊字符从 MS-Word 或 Open Office 书写器到记事本的转换

> ID：13878224
> 
> 赞同：1
> 
> 时间：2012-12-14T11:56:29.663
> 
> 标签：c#, gembox-spreadsheet

我有一个字符串，我正在使用 GEMBOX SPREADSHEET

```
string sr = “Save as type”; 
```

在这 -- 另存为类型 -- 是普通字符串，但是当我使用 GEMBOX 加载文本文件时

这个符号

```
“Save as type” 
```

被转换为

```
�Save as type� 
```

如何解决这个问题？这是我尝试实施时出现的代码

```
65533 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T13:09:59.543

解析工作表中的数据时，可以使用以下函数替换特殊的 Word/Excel 字符：

```
public static string ReplaceWordChars(this string text)
{
    var s = text;

    s = Regex.Replace(s, "[\u2018|\u2019|\u201A]", "'"); // smart single quotes and apostrophe
    s = Regex.Replace(s, "[\u201C|\u201D|\u201E]", "\""); // smart double quotes
    s = Regex.Replace(s, "\u2026", "..."); // ellipsis
    s = Regex.Replace(s, "[\u2013|\u2014]", "-"); // dashes
    s = Regex.Replace(s, "\u02C6", "^"); // circumflex
    s = Regex.Replace(s, "\u2039", "<"); // open angle bracket
    s = Regex.Replace(s, "\u203A", ">"); // close angle bracket
    s = Regex.Replace(s, "[\u02DC|\u00A0]", " "); // spaces

    return s;
} 
```

此功能不会替换所有特殊字符，而只会替换 Word/Excel 最常用的字符。

我最近在做一个 web 服务项目时遇到了同样的问题，并且在谷歌搜索期间遇到了这个功能。这是我找到代码的原始文章：[http ://www.andornot.com/blog/post/Replace-MS-Word-special-characters-in-javascript-and-C.aspx](http://www.andornot.com/blog/post/Replace-MS-Word-special-characters-in-javascript-and-C.aspx)

# php - 无法在 WSO2 ESB 上部署 WSF/PHP WebService

> ID：13878235
> 
> 赞同：1
> 
> 时间：2012-12-14T11:57:34.103
> 
> 标签：php, soapui, esb, wso2esb, wsh

几天前，我开始研究自己的 WebServices。我决定使用 WSO2 WSF/PHP 框架，并根据[http://wso2.org/project/wsf/php/2.0.0/docs/manual.html](http://wso2.org/project/wsf/php/2.0.0/docs/manual.html)创建了我的第一个 helloService。这是代码：

```
function greet($message) {
    $responsePayloadString = <<<XML
        <greetResponse>Hello Client!</greetResponse>
    XML;

    $returnMessage = new WSMessage($responsePayloadString);
    return $returnMessage;
}
$service = new WSService(array("operations" => array("greet")));
$service->reply(); 
```

我已经将它部署在我的服务器上，并尝试使用简单的 helloClient（在 wso2 wsf/php 手册中描述）和 SoapUI 来调用它——一切正常。现在我会尝试在我的 WSO2 ESB 上部署它，所以我定义了这样的新代理服务：

```
<proxy name="helloService" transports="https http" startOnLoad="true" trace="disable">
    <target endpoint="helloService">
        <inSequence>
            <log level="full"/>
        </inSequence>
        <outSequence>
            <filter xpath="get-property('FAULT')">
                <then>
                    <log level="full" category="WARN" separator=",">
                        <property name="message" value="SOAP Fault detected"/>
                    </log>
                </then>
                <else/>
            </filter>
            <send/>
        </outSequence>
        <faultSequence>
            <log level="full">
                <property name="MESSAGE" value="Executing default 'fault' sequence"/>
                <property name="ERROR_CODE" expression="get-property('ERROR_CODE')"/>
                <property name="ERROR_MESSAGE" expression="get-property('ERROR_MESSAGE')"/>
            </log>
            <drop/>
        </faultSequence>
    </target>
    <publishWSDL uri="http://myAPIAddress/helloService.php?wsdl"/>
</proxy>
<endpoint name="helloService">
    <address uri="http://myAPIAddress/helloService.php" format="soap11"/>
</endpoint> 
```

新服务在 ESB 管理控制台的“已部署服务”列表中可见，我可以从 myESBaddress:8280/services/helloService?wsdl 获取 WSDL，并且在 myESBaddress:8280/services 列表中一切正常。但是，当我想使用“试用此服务”选项时，会出现超时错误。我尝试使用 SoapUI 调用我的 WS - 对端点 myESBaddress:8280/services/helloService 的请求看起来像（当我将它发送到 myAPIAddress/helloService.php 时，相同的请求工作正常）

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.wso2.org/php/xsd">
   <soapenv:Header/>
   <soapenv:Body>
      <greet>asdfasdfas</greet>
   </soapenv:Body>
</soapenv:Envelope> 
```

不幸的是，作为回应，我有一个错误：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
    <soapenv:Body>
        <soapenv:Fault>
            <faultcode>411</faultcode>
            <faultstring>Unexpected response received. HTTP response code : 411 HTTP status : Length Required exception : First Element must contain the local name, Envelope , but found html</faultstring>
            <detail>Unexpected response received. HTTP response code : 411 HTTP status : Length Required exception : First Element must contain the local name, Envelope , but found html</detail>
        </soapenv:Fault>
    </soapenv:Body>
</soapenv:Envelope> 
```

我做错了什么？我有感觉，这是完全愚蠢和明显的事情，所以如果这是新手问题，请原谅我，但经过几天的挖掘解决方案后，我真的很绝望。

PS。对不起我的英语，这不是我的母语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:02:54.277

最后，我让它工作了！该问题是由 HTTP 版本引起的。这是解决方案：

```
...
<inSequence>
    <log level="full"/>
    <property name="FORCE_HTTP_1.0" value="true" scope="axis2" type="BOOLEAN"/>
</inSequence>
... 
```

希望，有一天它会对某人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-01T15:35:04.643

你的 php 服务是什么类型的？

[如何使用 WSO2 ESB 调用外部 PHP Web 服务](https://stackoverflow.com/questions/21956235/how-to-invoke-external-php-web-services-with-wso2-esb)

我和你有同样的问题，但我已经将我的服务器更改为 Apache，问题就解决了。

# iphone - xcode 4,5中的黑屏更改视图

> ID：13878238
> 
> 赞同：0
> 
> 时间：2012-12-14T11:57:41.147
> 
> 标签：iphone, ios, views, xcode4.5

我有以下代码：

**MapViewController.h**

```
#import <UIKit/UIKit.h>
#import "PlaceViewController.h"

@interface MapViewController : UIViewController <MKMapViewDelegate> {
    IBOutlet PlaceViewController *placeview;
}

- (IBAction)passPlace:(id)sender; 
```

**MapViewController.m**

```
@synthesize placeview;

- (IBAction)passPlace:(id)sender{
    self.placeview = [[[PlaceViewController alloc] initWithNibName:nil bundle:nil] autorelease];
    [self presentViewController:placeview animated:YES completion:nil];
} 
```

**PlaceViewController.h**

```
@interface PlaceViewController : UIViewController{

}

- (IBAction)back:(id)sender;

@end 
```

**PlaceViewController.m**

```
@implementation PlaceViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    NSLog(@"Change!!!!!");
    [super viewDidLoad];
    // Do any additional setup after loading the view.
} 
```

还有故事板：

[http://img685.imageshack.us/img685/1233/screengy.png](http://img685.imageshack.us/img685/1233/screengy.png)

我不知道我做错了什么，因为当我更改视图时， PlaceViewController 是一个带有蓝色状态栏的黑屏。

任何人都可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T02:42:46.003

如果您正在使用情节提要...进入情节提要编辑器并在属性检查器中，设置一个标识符，让我们说“PlaceMap”（在图片“AddPlayer”中）

![在此处输入图像描述](../Images/529cbe6943e5ecf26179458915993ac9.png)

更改您的代码：

```
- (IBAction)passPlace:(id)sender{
    self.placeview = [[[PlaceViewController alloc] initWithNibName:nil bundle:nil] autorelease];
    [self presentViewController:placeview animated:YES completion:nil];
} 
```

和

```
- (IBAction)passPlace:(id)sender{
PlaceViewController *newView = [self.storyboard instantiateViewControllerWithIdentifier:@"PlaceMap"];
[self.navigationController pushViewController:newView animated:YES];
} 
```

您可以查看 alos，一个非常好的教程：[http ://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)

**UPD**

那是导航控制器

> [自我presentViewController：placeview动画：是完成：无]；

如果你想要模态......你可以使用：

```
newView.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
//deprecated 6.0
//   [self presentModalViewController:newView animated:YES];
//from 5.0
[self presentViewController:newView animated:YES completion:NULL]; 
```

# stringtemplate - 将模板的动态列表应用于参数

> ID：13878239
> 
> 赞同：2
> 
> 时间：2012-12-14T11:57:41.783
> 
> 标签：stringtemplate, stringtemplate-4

我需要将可变的模板序列应用于参数。模板安全性在控制器层的运行时确定，这些模板仅应用于一个参数，例如：

```
arg:tpl1():tpl2():...:tplN() 
```

在简历中，我需要将一系列模板应用于参数，但这个序列是在运行时和控制器层中计算的。

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T23:01:03.850

您需要同时迭代模板名称和参数列表。从文档[http://www.antlr.org/wiki/display/ST4/Templates](http://www.antlr.org/wiki/display/ST4/Templates)中，您将找到以下示例：

```
<names,phones:{ n,p | <n>: <p>}> 
```

在您的情况下，您需要类似的东西

```
<names,values:{ n,v | <(n)(v)>}> 
```

哦，根据您的评论，我认为要将模板列表应用于另一个列表需要嵌套映射应用。

```
<values:{v | <names:{n | <(n)(v)>}}> 
```

这会将名称中命名的每个模板应用于值中的每个值。

# c# - 在 ASP.NET MVC 4 的 ASPX 视图中使用用户控件

> ID：13878240
> 
> 赞同：0
> 
> 时间：2012-12-14T11:57:42.133
> 
> 标签：c#, user-controls, asp.net-mvc-4

我正在将传统的 ASP.NET Web 窗体应用程序迁移到 ASP.NET MVC 4。我一直在通过向我的使用 ASPX 视图引擎的 ASP.NET MVC 4 项目中添加新视图来迁移这个项目。然后，我将代码隐藏内容放入`<script language="CS" runat="server">`视图文件中。

我的 Web 窗体项目将 UserControls 用于可重用组件。不幸的是，我不知道如何将这些带到我的新 MVC 4 项目中。

有人可以告诉我或告诉我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:33:40.163

您是否尝试将“继承 System.Web.UI.Page”更改为“继承 System.Web.Mvc.ViewPage”以使其成为视图！

# javascript - 动态更改 div 及其所有内容的大小？

> ID：13878241
> 
> 赞同：1
> 
> 时间：2012-12-14T11:57:46.023
> 
> 标签：javascript, jquery

请注意，这与“更改 div 大小以适应内容”不同。我拥有的是一个相对定位的 div，里面有几个绝对定位的图像：

```
<div id="nj_size_holder">
    <img id="nj_credit_card" src="credit_card.png" width="340"/>
    <img id="nj_ruler" src="ruler.jpg" />
    <img id="nj_item_image" src="{$base_dir_ssl}img/p/{$imgurl}" height='{$imgheight}'/>
</div> 
```

我还有一个 Javascript/jQuery 函数。这个功能是我的问题所在。我需要它做的是 - 给定某个参数（以百分比表示），它应该按该百分比动态调整 div 和其中的图像的大小。

```
function resizeAll(perc){
    //resize everything here
} 
```

因此，如果 div 高度最初为 600px，而“nj_ruler”图像高度为 400，则调用 resizeAll(25) 应将 div 的高度增加到 750px，将图像的高度增加到 500px（增加 25%）。

有没有办法在不单独增加每个高度的情况下做到这一点？稍后 div 中会有更多元素，如果可能的话，我希望有一个函数可以调整所有内容的大小，而无需单独引用 div 中的每个元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:12:09.933

```
var increaseby=25; //in percent
$("#nj_size_holder, #nj_size_holder > img").each(function() {
      $(this).css("height",$(this).css("height")*((increaseby+100)/100));
}); 
```

# r - R中地理参考变量的累积和

> ID：13878242
> 
> 赞同：2
> 
> 时间：2012-12-14T11:57:46.250
> 
> 标签：r, datagrid, sum, geospatial, latitude-longitude

我有许多渔船轨道，我正在尝试使用 R 来检测它们的运动中的某种模式。在这样做时，我已经达到了一个点，即我已经丢弃了轨道上没有出现所需模式的所有点给定的时间窗口，剩下的地理参考点。这些点有一个相关的分数值，它测量所需图案的“强度”。

轨道_1 [1:10，]：

```
 LAT       LON  SCORE
1  32.34855 -35.49264  80.67
2  31.54764 -35.58691  18.14
3  31.38293 -35.25243  46.70
4  31.21447 -35.25830  22.65
5  30.76365 -35.38881  11.93
6  30.75872 -35.54733  22.97
7  30.60261 -35.95472  35.98
8  30.62818 -36.27024  31.09
9  31.35912 -35.73573  14.97
10 31.15218 -36.38027  37.60 
```

下面的代码提供了相同的数据

```
data.frame(cbind(
    LAT=c(32.34855,31.54764,31.38293,31.21447,30.76365,30.75872,30.60261,30.62818,31.35912,31.15218),
    LON=c(-35.49264,-35.58691,-35.25243,-35.25830,-35.38881,-35.54733,-35.95472,-36.27024,-35.73573,-36.38027),
    SCORE=c(80.67,18.14,46.70,22.65,11.93,22.97,35.98,31.09,14.97,37.60))) 
```

因为其中一些点在地理上彼此接近，所以我需要将他们的分数“汇集”在一起。因此，我现在需要一种方法将这些数据放入某种空间网格中，并对落在网格同一单元格中的所有点的分数进行累积求和。这将使我能够找到给定的渔船在哪些区域展示了我最喜欢的模式（这不仅仅是在一个地方度过的时间）。最终，首选输出将包含每个网格单元（中心）的 lat 和 lon，以及每个单元上所有分数的总和。此外，我还希望能够调整网格单元的大小。

我环顾四周，发现要么不保留地理参考信息，要么效率非常低，要么执行数据分箱。可能已经有一些答案，但可能是我无法识别它们，因为我在这些东西上有点不合群。有人可以指点我一些方向（包，功能等）吗？任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:48:50.617

取你的纬度/经度坐标，并将它们乘以你想要的网格单元边缘长度的倒数，以度为单位。结果将是一对浮点数，其整数部分标识所讨论的网格单元。取其中`floor`的一个，你有两个描述单元格的数字，你可以`paste`形成一个字符串。您可以将其添加为数据框的新因子列。然后您可以根据该因素执行操作，例如汇总值。

例子：

```
latScale <- 2 # one cell for every 0.5 degrees
lonScale <- 2 # likewise
track_1$cell <- factor(with(track_1,
    paste(floor(LAT*latScale), floor(LON*lonScale), sep='.')))
library(plyr)
ddply(track_1, .(cell), summarize,
      LAT=mean(LAT), LON=mean(LON), SCORE=sum(SCORE)) 
```

如果你愿意，你可以使用`weighted.mean`而不是平均值。如果您不喜欢这些因素，您可以付出更多努力使它们变得更好（例如，通过使用指南针方向而不是符号），或者完全放弃它们并使用一对整数列来代替。

# php - Zend Server 社区版 .htaccess 问题

> ID：13878243
> 
> 赞同：1
> 
> 时间：2012-12-14T11:57:56.173
> 
> 标签：php, apache, zend-server, zend-server-ce

我是 Zend Server 的新用户。由于某种原因，Apache 没有在项目文件夹中读取我的 htaccess 文件。请检查我的设置：

文档根目录：C:\Program Files\Zend\Apache2\htdocs\

项目文件夹：C:\Program Files\Zend\Apache2\htdocs\project1\website\

htaccess 路径：C:\Program Files\Zend\Apache2\htdocs\project1\website.htaccess

htaccess 中的重写规则示例：

```
RewriteRule ^([a-zA-Z0-9\-]*)-([0-9]*)-([0-9]*)\.php$  /project1/website/index.php?cat=$2&page=$3 [L] 
```

httpd.conf 文件中的更改：

LoadModule rewrite_module modules/mod_rewrite.so

```
<Directory "C:\Program Files\Zend\Apache2/htdocs">
    Options Indexes FollowSymLinks
    AllowOverride ALL
    Order allow,deny
    Allow from all
</Directory> 
```

索引页面工作正常 http://localhost/project1/website/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-03T06:39:04.300

您应该转到 apchachi 文件夹/conf 中的 httpd.conf 文件，并在重新启动 apachi 服务器后将 AllowOverride none 更改为 AllowOverride ALL。希望它能正常工作。

# c++ - stlport.5.2.dll和Visual C++有什么关系？？我需要 stlport 才能运行我的程序吗？

> ID：13878246
> 
> 赞同：0
> 
> 时间：2012-12-14T11:58:04.377
> 
> 标签：c++, visual-studio-2010, visual-c++, stlport

我正在尝试使用 Visual Studio 2010 教授在 Visual C++ 中编写一个简单的 hello world 程序。成功构建后出现以下错误。

```
System Error:
Application couldn't start because stlport.5.2.dll is missing 
```

当我搜索它时，它是一个开源项目。那么这两者之间有什么联系呢？我从默认的 VS 安装中唯一改变的是从其他机器导入设置，这是我们公司的主要构建机器。

这是我所做的： 1\. 创建一个空项目。2\. 添加了带有hello world 行的源文件Main.cpp。3\. F7 4\. Ctrl+F5

现在我正在克服错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:03:45.073

尝试运行 devend.exe /ResetAddin

应该没有问题。

确保创建一个简单的空项目，而不是默认加载其他组件的某种预定义项目。（win32 控制台应用程序）

另外-搜索您项目的外部依赖项..删除那里的任何 h 文件...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T12:03:43.873

我们的组织使用 STLPort 作为标准 C++ 库。STLPort 是 C++ 标准库的开源实现。所以我的 Visual Studio 设置被修改，任何项目都使用 stlport 作为标准库，并且它是动态链接的。

所以我们可以：

1.  将 StlPort.XXdll 放在可执行文件所在的目录中。或者
2.  仔细删除设置，使您的项目使用 Microsoft SDK 提供的默认标准库。

# android - 如何配置 android map sdk v2 使用不同的密钥进行生产和开发？

> ID：13878249
> 
> 赞同：15
> 
> 时间：2012-12-14T11:58:14.670
> 
> 标签：android, google-maps, ant, android-mapview, google-maps-android-api-2

我想为开发和生产自动设置不同的android map api V2键。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-14T15:30:16.950

登录到 Google API 控制台在“简单 API 访问”下单击右侧的“编辑允许的 Android 应用程序...”每行输入一个 SHA-1 指纹，如说明所示：

“每行一个 SHA1 证书指纹和包名称（用分号分隔）。示例：45:B5:E4:6F:36:AD:0A:98:94:B4:02:66:2B:12:17:F2 :56:26:A0:E0;com.example 45:B6:E4:6F:36:AD:1A:98:94:B4:02:66:2B:12:17:F1:56:26:A0: E0;com.example"

现在，只需使用相同的“简单 API 密钥”，它将适用于您的调试和发布证书，而无需更改任何内容。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-14T18:13:18.087

我可能错了，但我认为您可以将相同的 V2 API 密钥用于开发和生产构建。在您的 Google API 控制台中，生成简单的 Android 密钥后，您只需输入生产签名密钥的 SHA-1 指纹，以及您可能拥有的所有开发 Android 调试签名密钥。然后在您的清单中，只需使用那个简单的 Android 密钥，该应用程序就应该适用于调试和生产构建。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-08T10:17:38.097

最简单的解决方案之一。您可以通过两个简单的步骤来实现它。

将自定义值添加到 manifestplaceholders`build.gradle`文件。见下文

```
buildTypes {
    debug {
        manifestPlaceholders = [ mapApiKeyValue:"GHjaSyAjlyp3O831lgaonHMXsd-_DpQ3002x3S4"]
    }

    release {
        manifestPlaceholders = [ mapApiKeyValue:"AIzaSyAuMGDLr2HeuRed4JA0CrdYYdZRjeC3EA"]
    }
} 
```

编辑清单文件，如下所示。我的清单文件的一部分

```
 <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="${mapApiKeyValue}" /> 
```

此解决方案适用于最新的 Android 5.0 和 Android 6.0（API 20、21、22、23）

# mysql - Wordpress - 如何获得观看次数最多的帖子？

> ID：13878251
> 
> 赞同：0
> 
> 时间：2012-12-14T11:58:23.663
> 
> 标签：mysql, wordpress, templates

如何在单个页面上显示我浏览次数最多的帖子？

此刻，我创建了一个由 get_template_part() 调用的新模板页面 (content-most-viewed.php)；

在互联网上，我读到 query_posts 可以解决我的问题，但似乎失败了。

这是我的模板：

```
<?php query_posts('meta_key=post_views_count&orderby=meta_value_num&order=DESC');
//query_posts('post_type=post&posts_per_page=10&orderby=comment_count&order=DESC');?>
<div class="post">
    <?php if (have_posts()) : ?>
        <?php while (have_posts()) : the_post(); ?>
            <div class="heading">
                <h2><a href="<?php the_permalink(); ?>"><?php the_title();?></a></h2>
            </div>
            <?php the_content();?>
            <div class="link-holder"><a href="/index.php">Retour</a></div>
        <?php endwhile; ?>
    <?php else : ?>
        <div class="heading">
            <h2>Not Found</h2>
        </div>
        <p>Sorry, but you are looking for something that isn't here.</p>
    <?php endif; ?>
</div> 
```

但是，我只能获取最近的帖子，或者“未找到”（任何结果）

提前，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:22:25.570

WordPress 本身不会跟踪查看帖子的数量，有插件可以执行此操作：[WPP](http://wordpress.org/extend/plugins/wordpress-popular-posts/)，[插件库](http://wordpress.org/extend/plugins/search.php?q=popular&sort=)
这些插件将具有内置功能来执行此操作。

**旁注**
不要使用`query_posts`它对性能不好。代替使用[`WP_query`](http://codex.wordpress.org/Class_Reference/WP_Query)。不好的原因：[https](https://wordpress.stackexchange.com/a/50762/10911) ://wordpress.stackexchange.com/a/50762/10911，https : [//wordpress.stackexchange.com/a/50762/10911](https://wordpress.stackexchange.com/a/50762/10911)

# wordpress - 我的自定义 Wordpress RSS 在 http://feedvalidator.org/ 上返回错误 404

> ID：13878252
> 
> 赞同：1
> 
> 时间：2012-12-14T11:58:25.393
> 
> 标签：wordpress, validation, rss, http-status-code-404, custom-post-type

我写在这里是因为我为我的 wordpress 创建的自定义提要有问题。

发生的事情是它似乎无效，我从[http://feedvalidator.org/](http://feedvalidator.org/)
的回答是服务器返回 HTTP 错误 404：未找到

以下是我如何称呼我的自定义 RSS 提要：

```
remove_all_actions( 'do_feed_rdf', 'do_feed_rdf', 10, 1 );
remove_all_actions( 'do_feed_rss', 'do_feed_rss', 10, 1 );
remove_all_actions( 'do_feed_rss2', 'do_feed_rss2', 10, 1 );
remove_all_actions( 'do_feed_atom', 'do_feed_atom', 10, 1 );

add_action( 'do_feed_rss2', 'rss2', 10, 1 );
function rss2( $for_comments ) {
    load_template( TEMPLATEPATH . '/feeds/feed.php' );
}

global $allfeeds;
$allfeeds = array(
      "news",
      "tour-dates",
      "bands",
      "videos",
      "tracks",
      "pictures",
      "festivals"
);

foreach ($allfeeds as $f){
    $f2 = preg_replace("/-/", "_", $f);
    eval("
                            function create_".$f2."_feed () {
                                load_template( TEMPLATEPATH . '/feeds/feed-".$f.".php');
                            }
                    ");
}

// Replace default feed rewrite rules
function customise_feed_rules($rules) {
    global $allfeeds;
    foreach ($allfeeds as $f){
        $new_rules["feed\/".$f] = "index.php?feed=".$f."_feed";
    }
    return $new_rules + $rules;
}

// Add the custom feed and update rewrite rules
function add_custom_feed() {
        global $allfeeds;

        foreach ($allfeeds as $f){
            $f = preg_replace("/-/", "_", $f);
      add_action("do_feed_".$f."_feed", "create_".$f."_feed", 10, 1);
  }

  add_filter('rewrite_rules_array','customise_feed_rules');
}

add_action('init', 'add_custom_feed'); 
```

这是一个 RSS 文件的示例：

```
<?php header("Content-Type: application/xml; charset=UTF-8"); echo '<?xml version="1.0" encoding="UTF-8"?>'; ?> 

<rss version="2.0"
    xmlns:content="http://purl.org/rss/1.0/modules/content/"
    xmlns:wfw="http://wellformedweb.org/CommentAPI/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:atom="http://www.w3.org/2005/Atom"
    xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
    xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
>

<channel>
    <title>TITLE</title>

    <atom:link href="<?php self_link(); ?>" rel="self" type="application/rss+xml" />
    <link><?php self_link(); ?></link>
    <description>WORDPRESS_DESCRIPTION</description>
    <language><?php bloginfo_rss( 'language' ); ?></language>

    <pubDate><?php echo mysql2date('D, d M Y H:i:s +0000', current_time('mysql', 1), false); ?></pubDate>
        <lastBuildDate><?php echo mysql2date('D, d M Y H:i:s +0000', get_lastpostmodified('gmt'), false); ?></lastBuildDate>
        <sy:updatePeriod><?php echo apply_filters( 'rss_update_period', 'hourly' ); ?></sy:updatePeriod>
        <sy:updateFrequency><?php echo apply_filters( 'rss_update_frequency', '1' ); ?></sy:updateFrequency>

    <copyright>Copyright <?php echo mysql2date('Y', current_time('mysql', 1), false); ?>, Match&Fuse</copyright>
    <docs>http://blogs.law.harvard.edu/tech/rss</docs>

        <?php $articles = get_the_posts_list( array(
                "postype"    =>    'band',
                "limit"        =>    20,
                "sortby"    =>    'post_date_gmt'
            ));
            http://www.matchandfuse.co.uk/feed/bands
        ?>

    <?php foreach ($articles as $a): ?>
    <item>
            <title><?php echo htmlspecialchars($a["title"]) ?></title>
            <link><?php echo $a["permalink"] ?></link>
            <pubDate><?php echo date('D, d M Y H:i:s +0000', $a["post_date"]); ?></pubDate>
            <?php if (strlen($a["excerpt"]) >=5 ): ?>
                <description><![CDATA[<?php echo htmlspecialchars($a["excerpt"]) ?>]]></description>
            <?php else: ?>
                <description><![CDATA[<?php echo htmlspecialchars(my_excerpt($a["content"], 100 , "words", true  )) ?>]]></description>
            <?php endif; ?>
            <content:encoded><![CDATA[<?php echo htmlspecialchars(apply_filters( 'the_content', $a["content"] )) ?>]]></content:encoded>
        </item>

        <?php endforeach; ?>

    </channel>
</rss> 
```

PS：我使用的是除了wordpress之外的自制查询系统，但它不应该对这个东西有任何影响！

我认为问题与我称呼他们的方式有关……</p>

rss php文件在那里： http:
[//www.matchandfuse.co.uk/wp/wp-content/themes/matchfuse-v1.2/feeds](http://www.matchandfuse.co.uk/wp/wp-content/themes/matchfuse-v1.2/feeds)

非常感谢，
凯瑟琳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:34:29.263

找到答案？我也遇到了自定义 rss 创建者脚本的问题，因为我使用了 *require('./wp-blog-header.php');* 使用从 wordpress 实现的数据库连接。不知何故，它干扰了 WP Super Cache 插件。所以我跳过了*wp-blog-header.php*并以普通的 php 方式建立与数据库的连接。工作！验证时不再出现 404 错误。

# javascript - 如何使用javascript禁用框架

> ID：13878258
> 
> 赞同：0
> 
> 时间：2012-12-14T11:58:35.180
> 
> 标签：javascript, html, jsp

我有下面的jsps。在这里，当我单击按钮（块）时，它应该禁用左框架。在这里，当我尝试这样做时，我可以将框架变灰，但链接仍然有效，我希望完全禁用该框架。

左.html

```
 <!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body><form name="hi" id="hi"><table>
            <tr><td colspan="3">
            <a href="View_Queries.jsp" target="tgt">Queries</a><br/></td></tr>
            <tr><td colspan="3"><a href="Welcome.jsp" target="tgt" name="home" id="home">home</a></td>
            <tr><td colspan="3"><a href="WL_Verif.jsp" target="tgt">MyAlloc</a></td></tr><br/>
            <tr><td colspan="3"><a href="On_Hold.jsp" target="tgt">On Hold</a></td></tr>
            <tr><td colspan="3"><a href="logout.jsp" target="_parent">logout</a></td></tr>
            </tr></table></form>
    </body>
</html> 
```

欢迎.jsp

```
 <%-- 
    Document   : Welcome
    Created on : Dec 13, 2012, 2:12:27 PM
    Author     : u0138039
--%>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
        <script type="text/javascript">
            function disabledFrame()
            {
               parent.Left.document.hi.disabled=true;
            }
        </script>
    </head>
    <body>
        <h1>Hello World!</h1>
        <input type="button" value="block" onclick="disabledFrame()">
    </body>
</html> 
```

索引.jsp

```
 <HTML>

<FRAMESET rows="10%, *"> 
    Welcome
 <FRAME src="time.jsp" marginheight="25%" marginwidth="75%"> 
<FRAMESET cols="15%,*">
<FRAME src="Left.html" id="Left" name="Left"> 

<FRAME src="right.html" name="tgt" > </frameset>
<NOFRAMES> 
This displays if frames are not supported. 
</NOFRAMES> 
</FRAMESET> 
 </style>
</HTML> 
```

谢谢

# php - 在 PHP exec 中使用变量

> ID：13878259
> 
> 赞同：1
> 
> 时间：2012-12-14T11:58:38.483
> 
> 标签：php, exec

我想在我的 PHP exec 函数中使用我的变量：

```
exec('ffmpeg -i $audio_input $audio_output'); 
```

这样做的正确方法是什么？我不想更改 ffmpeg 脚本。是否可以？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-14T11:59:54.397

使用双引号而不是单引号：

```
exec("ffmpeg -i $audio_input $audio_output"); 
```

但是，*请*阅读此页面： http: [//php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T12:00:00.157

### 替换为双引号：

```
exec("ffmpeg -i $audio_input $audio_output"); 
```

在此处查看[字符串](http://php.net/manual/en/language.types.string.php)的手册。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T12:05:00.287

使用前面提到的双引号或

```
exec('ffmpeg -i '.$audio_input.' '.$audio_output); 
```

# java - 是否可以在 java 中的一种方法中返回两个 ArrayList 值？

> ID：13878263
> 
> 赞同：4
> 
> 时间：2012-12-14T11:58:49.080
> 
> 标签：java, collections, return

有没有办法从一种方法返回两个值....

例子：

```
public Class Sample
{
  public List<Date> returnTwoArrayList()
   {
      List<Date> startDate=new ArrayList<Date>();

      List<Date> endDate=new ArrayList<Date>();

     //So I want to Return Two values startDate and endDate ...It is Possible????
   }
} 
```

我将此方法调用到我的服务类中，并且在该存储`StartDate`和`endDate`数据库中，这是两个不同的列

```
**StartDate      endDate**
2012-12-01     2012-12-05
2012-12-01     2012-12-15
2012-12-02     2012-12-10
2012-12-20     2012-12-25
2012-12-25     2012-12-31 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-14T12:02:59.600

您**不能通过**一个方法调用返回单独的结构，但可以返回它们的**组合**。例如，返回列表列表将是一个可能的解决方案：

```
 public List<List<Date>> returnTwoArrayList()
   {
      List<Date> startDates = new ArrayList<Date>();
      List<Date> endDates = new ArrayList<Date>();

      List<List<Date>> result = new ArrayList<List<Date>>();
      result.add(startDates);
      result.add(endDates);

      return result;
   } 
```

您可以`get()`稍后使用方法检索这些列表。假设你打了一个电话，`List<List<Date>> twoLists = returnTwoArrayList();`那么你可以`startDate`通过调用来获得`twoLists.get(0)` ，类似`endDate`地`twoLists.get(1)`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-14T11:59:22.580

不，您不能从方法中返回两个值。

最好的方法是创建一个包含两个字段的自定义类并返回该对象。

```
class ObjectHolder{
    private List<Date> startDate=new ArrayList<Date>();
    private List<Date> endDate=new ArrayList<Date>();

    <getter & setter method>
} 
```

和 -

```
public ObjectHolder returnTwoArrayList(){
    ObjectHolder oh = new ObjectHolder();
    List<Date> startDate=new ArrayList<Date>();
    oh.setStartDate(startDate);
    List<Date> endDate=new ArrayList<Date>();
    oh.setEndDate(endDate);
    return oh;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T12:09:54.003

你可以

*   提供一个或两个列表作为要填充的参数。
*   有两个列表，它们是方法实例的字段，并通过 getter 访问它们。
*   返回两个列表的数组或列表的列表。
*   返回一个包含两个列表的自定义类型。我不会使用吸气剂，只是将字段公开。
*   有一个间隔列表

我相信最后一个是最好的解决方案。

```
public class Sample {
  public List<Interval> returnListOfStartToEndDates() {
      List<Interval> intervals=new ArrayList<>();

      return intervals;
   }
} 
```

Joda-time 有一个[Interval](http://joda-time.sourceforge.net/apidocs/org/joda/time/Interval.html)类，它比创建两个 Date 对象更有效，但您也可以创建自己的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T12:01:53.727

你可以像这样创建一个自定义类

```
TimeSpan(ArrayList<Date> startDate, ArrayList<Date> endDate) 
```

并返回该对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-14T12:02:24.570

`List`直接，不，除非您计算返回一个由两个s 或一个s组成的数组，`List`并且`List`向调用者明确表示它将包含两个条目以及每个条目将代表什么值。

除此之外，你总是可以编写一个`Pair`类并使用它，这会更好，因为它消除了对关于返回值维度的假设的依赖，你会发现一个`Pair`类型在很多很多情况下都很方便。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-30T11:42:29.007

相反，您可以使用 Map 如下，

```
public Map<String, List<Date>> getBothDates() {
  List<Date> startDate = new ArrayList<Date>();
  List<Date> endDate = new ArrayList<Date>();
  Map<String, List<Date>> bothDates = new HashMap<String, List<Date>>();
  bothDates.put("startDate", startDate);
  bothDates.put("endDate", endDate);    
  return bothDates;
} 
```

要获取两个日期，只需迭代地图，

```
public void printBothDates() {
   Map<String, List<Date>> bothDates = getBothDates();
   for(Entry<String, List<Date>> entry : bothDates.entrySet()) {
     if(StringUtils.equalsIgnoreCase("startDate", entry.getKey())) {
       for(Date d : entry.getValue()) {
          System.out.println("startDate---"+d);
       }
     } else if(StringUtils.equalsIgnoreCase("endDate", entry.getKey())) {
       for(Date d : entry.getValue()) {
          System.out.println("endDate---"+d);
       }
     }
   }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-13T02:23:20.123

```
import java.util.ArrayList;

public class MyClass {
    public ArrayList<ArrayList> TwoArrayList() {

        ArrayList cars = new ArrayList();
        cars.add("Volvo");
        cars.add("BMW");
        cars.add("Ford");
        cars.add("Mazda");

        ArrayList fruits = new ArrayList();
        fruits.add("Apple");
        fruits.add("Mango");
        fruits.add("Banana");
        fruits.add("Orange");

        ArrayList <ArrayList> twoArrayList = new ArrayList <ArrayList>();
        twoArrayList.add(cars);
        twoArrayList.add(fruits);

        return twoArrayList;

    }

    public static void main(String[] args) {
       MyClass obj = new MyClass();

        ArrayList <ArrayList> Arlist= obj.TwoArrayList();

        System.out.println(Arlist.get(0));/**FIRST ARRAY LIST*/

        System.out.println(Arlist.get(0).get(0));/**FIRST ARRAY LIST FIRST Element*/

        System.out.println(Arlist.get(1));/**SECOND ARRAY LIST*/

        System.out.println(Arlist.get(1).get(0));/**SECOND ARRAY LIST FIRST Element*/
    }  
} 
```

***输出在这里***

[在此处输入图像描述](https://i.stack.imgur.com/wilWy.png)

# google-maps - 在 gwt 应用程序中实现“获取路线”

> ID：13878267
> 
> 赞同：0
> 
> 时间：2012-12-14T11:58:55.550
> 
> 标签：google-maps, gwt, directions

我需要在我的 GWT Web 应用程序中使用 Google 地图来实现方向。目前我正在使用地图 API v2 库。

我有几个问题我还没有解决：

1.  包括获取路线面板（类似于谷歌地图）
2.  从请求中获取街道名称列表。

PS如何实现鼠标滚轮缩放控制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:04:33.363

这是您的鼠标滚轮缩放问题的答案

实现[HasMouleWheelHandlers](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/event/dom/client/HasMouseWheelHandlers.html)及其[API](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/event/dom/client/MouseEvent.html)，如 getX()、getY()、getScreenX()、getScreenY() 并执行缩放操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T09:01:00.170

我发现了如何轻松实现缩放功能：

```
final MapWidget map = new MapWidget(startLatLng, 12);
map.setSize("100%", "100%");

MapUIOptions options = map.getDefaultUI();
options.setScrollwheel(true);
map.setUI(options); 
```

有关更多信息，请查看[地图演示](http://gwt.googleusercontent.com/samples/HelloMaps-1.0.4/HelloMaps.html)。您可以签出项目代码并在 Eclipse 中进行测试！

我仍在寻找其他问题的解决方案。

# java - java对象到日期或日期时间的转换

> ID：13878268
> 
> 赞同：7
> 
> 时间：2012-12-14T11:58:59.183
> 
> 标签：java, date, datetime, inner-join, nativequery

我有一个内部连接表的查询：

`List<Object[]> resultList = entityManager.createNativeQuery(SOME QUERY).getResultList();`

当我尝试访问`Object[]`其中一个元素时，`Date`我尝试这样做：

```
for(Object[] obj : resultList) {
    Date createdDate = obj[7] !=null ? new Date(Long.valueOf(obj[7] + "")) : null;
} 
```

这给出了明显的例外：

> `nested exception is java.lang.NumberFormatException: For input string: "2012-11-20"`

我改变`Date`了`DateTime`得到`TO_CHAR(createdDate,'DD.MM.YYYY:HH24:MI:SS')`

并尝试了以下代码：

```
DateFormat df = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSZ");
Date createdDate = null;
try {
    createdDate = df.parse(obj[7] + "");
} catch (ParseException e) {
    e.printStackTrace();
} 
```

这种方法的结果：`createdDate = null`

有什么建议么 ？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-14T12:09:18.957

您不必解析来自 SQL 查询的日期。它们应该作为 Date 或 Timestamp 实例返回。向我们展示您的查询。

您可能`java.sql.Date`会返回实例，但是您通过将它们与空字符串连接来将它们转换为字符串：

```
obj[7] + "" 
```

做就是了

```
Date createdDate = (Date) obj[7]; 
```

# python - 在使用装饰器执行之前在python中腌制对象

> ID：13878270
> 
> 赞同：1
> 
> 时间：2012-12-14T11:58:59.653
> 
> 标签：python, pickle

我正在尝试构建一个装饰器，以后可以在执行之前使用它来腌制任何函数，但出现以下错误

```
PicklingError at /

Can't pickle <function wow at 0x105ff9488>: it's not the same object as apps.sandbox_app.tasks.wow 
```

这是我的装饰师

```
# -*- coding: utf-8 -*-
import base64
import pickle
from models import Task
from functools import wraps

def register(func):
    """ Decorate a function to print its arguments.
    """
    @wraps(func)
    def executable(*args, **kwargs):
        return store_task_to_model(func)

    def store_task_to_model(x):
        Task.objects.create(
            task = base64.b64encode(pickle.dumps(x)),
            status = 'P'
        ).save()

    return executable 
```

这是装饰师注册

```
from dj_cron.task import register

@register
def wow():
    x = 2 * 3
    return x 
```

和函数的实际调用哇如下

调用.py

```
wow() 
```

任何想法我该如何解决这个问题？

# sql - 优化 ruby on rails SQL 查询

> ID：13878271
> 
> 赞同：2
> 
> 时间：2012-12-14T11:59:02.363
> 
> 标签：sql, ruby-on-rails, postgresql

**更新开始**

这个问题是为每个项目呈现一个表单，而不是 SQl 查询。为了优化，我将根据需要使用 javascript 添加表单。

好像我没有正确阅读 miniprofiler 日志。我很抱歉，但将问题留给可能有类似问题的其他人。

**更新结束**

我正在使用 miniprofiler 来查找我的应用程序中的瓶颈。我找到了一个！

```
SELECT "projects".* FROM "projects" INNER JOIN "memberships" ON 
"projects"."id" = "memberships"."project_id" WHERE 
"memberships"."user_id" = 1 AND (active = 't')   
1059.50 ms  
Rendering: projects/_index — 1023.18 ms 
```

它在 1 秒内找到 185 个项目。

**如何进行更有效的查询？**

我的 projects_controller 索引中有这个

```
@projects = current_user.projects.is_active 
```

项目模型中的 is_active 范围

```
scope :is_active, where(["active = ?", true]) 
```

项目和用户具有多对多关系，具有成员连接表

会员模式

```
class Membership < ActiveRecord::Base
  attr_accessible :project_id,:user_id,:created_at,:updated_at
  belongs_to :user
  belongs_to :project
end 
```

会员表

```
def self.up
    create_table :memberships do |t|
      t.integer :project_id
      t.integer :user_id

      t.timestamps
    end
    add_index :memberships, [:project_id, :user_id], :unique => true
end 
```

我正在使用 postgreSQL 作为数据库的本地计算机上的生产环境中运行它

由 Jiří Pospíšil 请求添加解释。在控制台中，它似乎一点也不慢。这个解释是在开发中完成的。那里有同样的问题

```
User.first.projects.is_active.explain
  User Load (0.3ms)  SELECT "users".* FROM "users" LIMIT 1
  Project Load (2.3ms)  SELECT "projects".* FROM "projects" INNER JOIN "memberships" ON "projects"."id" = "memberships"."project_id" WHERE "memberships"."user_id" = 1 AND (active = 't')
  EXPLAIN (0.2ms)  EXPLAIN QUERY PLAN SELECT "projects".* FROM "projects" INNER JOIN "memberships" ON "projects"."id" = "memberships"."project_id" WHERE "memberships"."user_id" = 1 AND (active = 't')
 => "EXPLAIN for: SELECT \"projects\".* FROM \"projects\" INNER JOIN \"memberships\" ON \"projects\".\"id\" = \"memberships\".\"project_id\" WHERE \"memberships\".\"user_id\" = 1 AND (active = 't')\n0|0|1|SEARCH TABLE memberships USING INDEX index_memberships_on_user_id (user_id=?) (~10 rows)\n0|1|0|SEARCH TABLE projects USING INTEGER PRIMARY KEY (rowid=?) (~1 rows)\n" 
```

风景

```
<% @projects.each do |project| %>
<li class="tab_list" id="project_<%= project.id.to_s %>"> 
  <div class="tab_list_text"><%= link_to project.name, project_path(project) %></div>
  <span class='open_project_update button edit' id="project_update" data-id="<%= project.id %>" data-object="project" title="Edit project">Edit</span> 
  <div class="dialog_form" id="project_update_<%= project.id %>_form" title="Update project" style="display:none;">
      <%= form_for(project) do |f| %>
      <ul>
      <li><%= f.label :name %><%= f.text_field :name %></li>
      <li><%= f.label :description %><%= f.text_field :description %></li>
      <li><%= f.label :due %><%= f.text_field :due, :value => project.due.strftime("%Y-%m-%d"), :id => "date_project_#{project.id}"  %></li>
      <li><%= f.label :customer_id %><%= f.select(:customer_id, @customers.map {|customer| [customer.name, customer.id]}, {:include_blank => 'None'})%></li>
      <li><%= f.submit 'Save', :class => 'submit' %></li></ul>
      <% end %>
  </div>
  <a class="activate_project button" data-object="project" data-id="<%= project.id.to_s %>">Archive</a>
</li>
<% end %> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T13:24:23.833

项目加载仅需 2.3 毫秒。渲染项目/_index 的时间是 1 秒。查询不是您的瓶颈。

根据您的评论，您说您懒惰地加载关系。确保您使用`includes`.

例如：

```
@user.projects.is_active.includes(:some_association).includes(:another_association) 
```

`includes`将导致关系被急切加载。

如果您要遍历用户列表，以获取活动项目，您需要执行以下操作：

```
User.includes(:projects)
     .merge(Project.is_active)
     .includes(projects: :some_other_association) 
```

最好不要将数据库查询放在您的视图中。尝试通过控制器执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-21T08:07:19.203

您现在可以使用新发布[的 gem 'query_optimizer'](https://rubygems.org/gems/query_optimizer) 。query_optimizer 是在 rails 中优化 has_many 和 belongs_to 关系两个表的查询的最佳 gem

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-08T22:01:16.740

由于还没有人提到它，**[子弹 gem](https://github.com/flyerhzm/bullet)**非常适合识别应用程序中的页面，在这些页面中您无意中创建了 N+1 个查询（您的特定情况），这些查询可能受益于**急切加载**（使用`includes`已接受的答案中概述的内容）和**反缓存**。

这篇很棒[的帖子](http://www.sitepoint.com/silver-bullet-n1-problem/)以简单、清晰的语言概述了问题和解决方案，并介绍了如何使用子弹宝石。还有一个关于实现**子弹的**[RailsCast](http://railscasts.com/episodes/372-bullet) ，虽然我没有经历过。

# php - jQuery 插件在我的 php 页面中不起作用，在 html 中它工作正常

> ID：13878272
> 
> 赞同：1
> 
> 时间：2012-12-14T11:59:03.557
> 
> 标签：php, jquery

我在一个 PHP 编码的站点工作。在这里我想添加 jQuery 插件 Barousel。我在我的网站外的 HTML 页面中进行了测试，它工作正常。但是当我在它必须工作的页面中添加代码（PHP）时，它不起作用。

在 chrome 中，我收到了下一条消息；

```
Uncaught Type Error: object#<object> has no method 'barousel' 
```

[这](http://wrkspc.nl/devroedevrouw.nl/home)是页面。

图片必须是带有文字的旋转木马。

请任何人都可以帮助我；我真的不知道该怎么办。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:00:21.810

您的页眉已加载`jquery.js`两次。

第二次加载将覆盖第一次，并且`$.fn.barousel`不再定义。

```
<script type="text/javascript" src="jquery.js"></script>
<script src="barousel/js/jquery.barousel.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        //BAROUSEL - ITEM NAVIGATION
        jQuery('#barousel_itemnav').barousel({
            manualCarousel: 0,
            slideDuration: 3000
        });
    });
</script>
<!-- remove this -->
<script type="text/javascript" src="jquery.js"></script>
<!-- remove this --> 
```

# java - 运行忽略 @Before/@After 的 Junit @Test

> ID：13878273
> 
> 赞同：15
> 
> 时间：2012-12-14T11:59:07.427
> 
> 标签：java, unit-testing, junit

`@Test`是否可以在具有注释的方法的类中运行 JUnit方法，但仅在此测试`@Before`中忽略该方法？`@Before`

编辑：如果 JUnit 支持此功能而不是解决方法，**我很感兴趣。**我知道一些解决方法，例如在另一个类中移动测试或删除注释并手动调用`setUp()`每个测试方法。

假设一个类中有 30 个测试，其中 29 个`@Before`确实简化了测试初始化​​，但其中一个（或多个）是无用的/它使事情复杂化。

```
public class MyTestClass {

    @Before
    public void setUp() {
        //setup logic
    }

    @Test
    public void test1() {
        //[...]
    }

    @Test
    public void test2() {
        //[...]
    }

    //more tests here

    @Test(ignoreBefore = true, ignoreAfter = true //false by default)
    //something equivalent to this
    public void test20() {
        //[...]
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T13:41:18.910

您可以使用 TestRule 执行此操作。[请参阅我对Exclude individual test from 'before' method in JUnit 的](https://stackoverflow.com/a/13017452/1836)回答。基本上，实现[ExternalResource](https://junit.org/junit4/javadoc/4.12/org/junit/rules/ExternalResource.html)，在 apply 方法中，检查方法上是否有特定的注解，如果有，不要运行 before/after 方法。不过，您必须从您的规则中专门调用之前/之后。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T12:13:49.593

如果它没用，那应该不是问题 - 再次运行设置是否有害？

但是，我认为这是不可能的，并且将我视为残废功能。

另一种方法 - 将该测试移至单独的测试类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-15T16:02:15.137

使用 JUnit 5，您可以使用 @Nested 注释进行嵌套测试：

```
public class MainClass {
 @Nested
  class InnerClass1 {

  @BeforeEach 
  void setup(){}

  @Test 
  void test1(){}
 }

 @Nested
  class InnerClass2 {
  // No setup

  @Test 
  void test2(){}
 }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-12T07:35:06.150

除此之外，我在最近访问该地区时发现了一些东西。

Junit/Mockito 似乎优先考虑在测试中定义的模拟行为，而不是 @Before 注释方法。

# ruby-on-rails - 设计：客户端验证 gem 工作，但没有出现文本

> ID：13878275
> 
> 赞同：0
> 
> 时间：2012-12-14T11:59:19.547
> 
> 标签：ruby-on-rails, devise

我有一个使用 Devise 和 ClientSideValidations gems 的应用程序。

在下面的表格中，我已经使用设计进行了客户端验证。我认为它正在工作，因为现在无法实际提交表单。我的问题是文本字段标签旁边不会出现任何文本，例如“不能为空白”。知道我做错了什么吗？

```
%h3 Sign up
%br
= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :validate => true) do |f|
  %h4
    = devise_error_messages!
  %div
    = f.label :name
    = f.text_field :name, :validate => true
  %div
    = f.label :email
    = f.email_field :email, :validate => { :presence => :true }

  %div
    = f.label :password
    = f.password_field :password, :validate => { :presence => :true, :length => true }
  %div
    = f.label :password_confirmation
    = f.password_field :password_confirmation,  :validate => { :presence => true }
  %div
    = f.submit "Sign up", id: 'button'
= render "devise/shared/links" 
```

当我查看源代码时，会出现 js。

```
<script>//<![CDATA[
if(window.ClientSideValidations==undefined)window.ClientSideValidations={};if(window.ClientSideValidations.forms==undefined)window.ClientSideValidations.forms={};window.ClientSideValidations.forms['new_user'] = {"type":"ActionView::Helpers::FormBuilder","input_tag":"<div class=\"field_with_errors\"><span id=\"input_tag\" /></div>","label_tag":"<div class=\"field_with_errors\"><label id=\"label_tag\" /></div>","validators":{"user[name]":{"presence":[{"message":"can't be blank"}]},"user[email]":{"presence":[{"message":"can't be blank"}]},"user[password]":{"presence":[{"message":"can't be blank"}],"length":[{"messages":{"minimum":"is too short (minimum is 6 characters)","maximum":"is too long (maximum is 128 characters)"},"allow_blank":true,"minimum":6,"maximum":128}]}}};
//]]></script> 
```

所以我知道它在那里，我相信它正在做它的工作，但由于某种原因，当我将一个字段留空时，我只是没有看到我期望的错误消息。

# java - 如何将此 .txt 文件写入 2D int 数组而不收到 NumberFormatException？

> ID：13878280
> 
> 赞同：2
> 
> 时间：2012-12-14T11:59:42.027
> 
> 标签：java, arrays, io, sudoku, numberformatexception

我一直在尝试从 .txt 文件中保存一个 9x9 2D 整数数组。我已经在这个网站上待了很长时间，试图让它工作，经过大量的调整，我非常接近它。唯一的问题是没有任何东西保存到数组中！

这是我的代码：

```
import javax.swing.*;
import java.util.*;
import java.io.*;
import java.awt.*;

public class test {

public static void main(String[] args) throws IOException {

    int[][] thing = new int[9][9];
    int row = 0;
    int rows = 9;
    int columns = 9;

    File fin = new File("C:\\Users\\David\\workspace\\tester\\initial.txt");

    BufferedReader reader = null;

    try {
        reader = new BufferedReader(new FileReader(fin));
        String line = reader.readLine();
        int lineNum = 0;

        while (line != null) {
            lineNum++;
            System.out.println("line " + lineNum + " = " + line);
            line = reader.readLine();

            String [] tokens = line.split(",");
            for (int j=0; j<tokens.length; j++) {
                System.out.println("I am filling the row: " + row);
                thing[row][j] = Integer.parseInt(tokens[j]);
            }
            row++;
        }

        System.out.println("I am printing the array for testing purposes: ");
        for (int i=0; i < rows; i++) {
            for (int j = 0; j < columns; j++)
                System.out.print(thing[i][j]);
            System.out.println("");
        }
    } catch (IOException error) {

    } finally {
        if (reader != null) reader.close();
    }

} 
```

}

我应该说我这样做是为了测试我正在尝试创建的数独游戏作为一个纯粹的副项目，我只是非常沮丧。

这也是我在这个网站上的第一篇文章，所以请放心格式化。谢谢大家！

编辑：我也做了 codaddict 告诉我的改变，现在我得到了输出：

```
line 1 = 5 3 0 0 7 0 0 0 0
I am filling the row: 0
Exception in thread "main" java.lang.NumberFormatException: For input string: "6 0 0 1 9 5 0 0 0"
at java.lang.NumberFormatException.forInputString(Unknown Source)
at java.lang.Integer.parseInt(Unknown Source)
at java.lang.Integer.parseInt(Unknown Source)
at test.main(test.java:36) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:05:11.193

你正在做：

```
 while (line != null) {
        lineNum++;
        System.out.println("line " + lineNum + " = " + line);
        line = reader.readLine();
    }

    // At this point you've already reached the end of the file
    // and line is null, so you never go inside the next while.

    while (line != null) {
        // you need to split on space not comma
        String [] tokens = line.split(" ");
        for (int j=0; j<tokens.length; j++) {
            System.out.println("I am filling the row: " + row);
            thing[row][j] = Integer.parseInt(tokens[j]);
        }
        row++;
    } 
```

要解决此问题，您需要处理外部 while 循环中的每一行：

```
 while (line != null) {
        lineNum++;
        System.out.println("line " + lineNum + " = " + line);
        line = reader.readLine();

        String [] tokens = line.split(",");
        for (int j=0; j<tokens.length; j++) {
            System.out.println("I am filling the row: " + row);
            thing[row][j] = Integer.parseInt(tokens[j]);
        }
        row++;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T12:04:59.023

退出第一个 while 循环后，该字符串`line`已经为空，因此第二个 while 循环永远不会执行，因此不会为数组单元分配任何值，int 数组单元的默认值为零，它会被打印出来。在第一个循环中插入分配部分以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T12:06:13.283

您已经在第一个 while 循环中读取了整个文件。

因此，您无法打印第二个循环中的值。

确保将文本文件中的值存储在第一个 while 循环中。

```
while (line != null) {
    lineNum++;
    System.out.println("line " + lineNum + " = " + line);
    line = reader.readLine();

    String [] tokens = line.split(",");
    for (int j=0; j<tokens.length; j++) {
        System.out.println("I am filling the row: " + row);
        thing[row][j] = Integer.parseInt(tokens[j]);
    }
    row++;
} 
```

# javascript - 使用 Jquery 在对象数组中查找值

> ID：13878281
> 
> 赞同：0
> 
> 时间：2012-12-14T11:59:48.457
> 
> 标签：javascript, jquery

我有一组对象说`items`。我想找到具有`name`xyz 的项目。

目前，我写了一个 for 循环

```
for(var i = 0; i < items.length; i++)
{
    if( items[i].name == "xyz" ) 
    {
        found = true;
        break;
    }
} 
```

是否可以使用 jquery 将此循环缩短为一行语句？像这样的东西：

```
$.find(items, "name", "xyz"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:03:05.063

你可能会使用

```
var matchingItems = items.filter(function(v){return v.name=="xyz"}); 
```

或使用 jQuery（为了更好的兼容性，就像许多 Array 函数、[过滤器](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)或[某些](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/some)在 IE8 上不可用）：

```
var matchingItems = $.grep(items, function(v){return v.name=="xyz"}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T12:05:45.400

就像是：

```
$.grep(yourArray, function(n) { 
    return n.name == "xyz"; 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T12:03:40.863

使用本[机`some`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/some)：

```
items.some(function(el) { return el.name == "xyz"; }) 
```

使用 jQuery，您需要执行类似的操作[`$.grep`](http://api.jquery.com/jQuery.grep/)，然后检查长度 ( `$.grep(items, function(el){ return el.name=="xyz"; }).length > 1`) - 这不是最佳解决方案。如果您想为那些不支持`some`（并且不想使用[polyfill](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/some#Compatibility)）的浏览器使用库解决方案，请使用[Underscore](http://underscorejs.org/)的`any`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T12:04:04.417

```
(function( $ ) {
    $.find = function( array, property, key ) {
        var found = false;
        for(var i = 0; i < array.length; i++)
        {
            if( array[i][property] == key ) 
            {
                found = true;
                break;
            }
        }
        return found ? i : -1;
    };
})( jQuery ); 
```

用法：`$.find(items, "name", "xyz");`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T12:05:40.727

使用 jQuerys inArray 示例

[http://api.jquery.com/jQuery.inArray/](http://api.jquery.com/jQuery.inArray/)

可能会帮助你

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-14T12:16:52.213

```
 var arr = ["abc", "xyz" ];
        if($.inArray("abc",arr) > 0){
          return true;
        }
else 
return false 
```

​</p>

这将返回“搜索字符串”的索引

如果没有找到，它将返回-1。

# iphone - Cocos2D-X 游戏中的 Chartboost

> ID：13878285
> 
> 赞同：3
> 
> 时间：2012-12-14T11:59:55.817
> 
> 标签：iphone, ios, objective-c, cocos2d-x, chartboost

我在 cocos2d-x 游戏中使用[了 chartboost](https://chartboost.com/) sdk，我可以在 appDelegate.m 中使用下面的代码并且效果很好......但是没有 c++ 调用图表提升。如何从 c++ 文件调用 showInterstitial API？

```
#define CHARTBOOST_APP_ID =@"Here added valid app id from chart boost account"
#define CHARTBOOST_APP_SIGNATURE @"Here added valid signature from chart boost"

Chartboost *cb = [Chartboost sharedChartboost];
cb.appId = CHARTBOOST_APP_ID;
cb.appSignature = CHARTBOOST_APP_SIGNATURE;

[cb startSession];

[cb showInterstitial]; 
```

Chartboost SDK 有 c++ 版本吗？

**更新：** 简单的解决方案是使用 Obj.C 版本的 Chartboost SDK，然后在 .mm 文件中使用 C++ 桥接类并从其他 .cpp 文件访问它。它的简单和最好的方式。

这是文件：[下载](https://app.box.com/s/t7rhjdvsgqjb5cz4x7az)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T01:16:57.803

Chartboost SDK 没有 C++ 版本，但是许多开发人员已经成功地将 SDK 集成到 Cocos2d 游戏中。

他们经常编写自己的包装器，但是这个开发人员已经开源了他的：http: [//www.cocos2d-x.org/projects/cocos2d-x/assets/11](http://www.cocos2d-x.org/projects/cocos2d-x/assets/11) https://github.com/wenbin1989/Charboost-x

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T12:01:41.323

Chartboost 为 iOS 开发和 Android 开发提供 SDK。

所以答案是否定的。目前还没有适用于 C++ 的 SDK。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-20T16:16:31.287

你可以做这样的事情......

将此添加到您的 AppDelegate.h：

```
void InitChartBoost();
void ShowInterstitial(); 
```

然后创建一个文件 AppDelegate.mm 并添加以下方法：

```
void AppDelegate::InitChartBoost()
{
    id appDelegate = [[UIApplication sharedApplication] delegate];

    // Initialize the Chartboost library
    [Chartboost startWithAppId:@"your app id"
                  appSignature:@"your app signature"
                      delegate:appDelegate];
}

void AppDelegate::ShowInsterstitial()
{
    [Chartboost showInterstitial:CBLocationHomeScreen];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-11T18:55:31.247

最好和安全的方法是编写自己的 Obj.C 和 C++ 桥接类。

[这是文件](https://app.box.com/s/t7rhjdvsgqjb5cz4x7az)并在Cocos2dx游戏中添加ObjectiveC版本的Chartboost sdk

# arrays - Powershell检查输入是否为整数且> 0

> ID：13878292
> 
> 赞同：0
> 
> 时间：2012-12-14T12:00:09.110
> 
> 标签：arrays, loops, powershell, integer

如何检查用户输入是否为整数且大于零且最大为 10？

我需要制作一个脚本，要求输入从 0 到 10 的数字。这将是用户可以输入数字的次数。

所以如果他输入 3，他必须被问 3 次他想输入哪个数字。当他输入最后一个数字时，必须显示给定数字的平均值，然后脚本结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:07:04.560

像这样？

```
while ( (1..10) -notcontains $g)
{
    $g = read-host "How many numbers do you want to put in? (value from 1 to 10) " 
}    
$ar=@()
for ($i=0; $i -lt $g; $i++)
{
   $ar += read-host "Enter value $($i+1)"
}    
$averageArray = ($ar | Measure-Object -Average).average    
write-host "Average is : $averageArray" 
```

# c - 致命：未找到模块融合

> ID：13878293
> 
> 赞同：1
> 
> 时间：2012-12-14T12:00:10.147
> 
> 标签：c, linux, linux-kernel, directfb

我正在尝试为 DirectFB 构建 Linux Fusion。我从[directfb.org](http://www.directfb.org)下载了它。

自述文件中描述了这些步骤。他们要求在 make 和 make install 之后进行 modprobe 融合。

当我运行此命令时，我收到错误：

```
Module Fusion not found. 
```

有哪些可能的问题，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:25:03.457

我认为您已遵循所有步骤

[http://www.directfb.org/downloads/Core/linux-fusion/README](http://www.directfb.org/downloads/Core/linux-fusion/README)

现在你仍然收到那个错误，这意味着

你`make`并`make install`没有成功。运行 make 或 make install 后，您是否在终端上看到任何错误消息？

如果 make 和 make install 成功，那么`modeprobe fusion`应该可以

**从聊天讨论中编辑**

使用

```
modprobe fusion 
```

将尝试在 /lib/modules/$(uname -r) 中找到 fusion.ko，但是在 make install 之后 .ko 不存在或无法正常工作

试过

```
cd go_in_fusion_directory
insmod fusion.ko 
```

工作得很好……！！

# c# - 发送 excelsheet 作为响应

> ID：13878294
> 
> 赞同：0
> 
> 时间：2012-12-14T12:00:26.370
> 
> 标签：c#, .net, excel, excel-2007

我创建了 excel 表并使用保存

```
xlWorkBook.SaveCopyAs("abc.xls"); 
```

然后我正在使用

```
 byte[] byteArray = File.ReadAllBytes("abc.xls");
 File.Delete("abc.xls");
 Response.ContentType = "application/vnd.ms-excel";
 Response.AppendHeader("Content-Disposition", "attachment; filename=abc.xls");
 Response.BinaryWrite(byteArray);
 Response.End(); 
```

发送 Excel 工作表作为响应。

但问题出在客户端，它首先提示保存 Excel 工作簿“Book1”，然后提示保存“abc.xls”。如何防止这种情况？

早些时候我正在使用

```
xlWorkBook.SaveAs("abc.xls", Excel.XlFileFormat.xlWorkbookNormal, misValue, misValue, misValue, misValue, Excel.XlSaveAsAccessMode.xlExclusive, misValue, misValue, misValue, misValue, misValue); 
```

它工作正常（直接提示保存“abc.xls”）。但我改为 `xlWorkBook.SaveCopyAs()`因为`xlWorkBook.SaveAs()`在 IIS 中部署时抛出异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:20:40.183

我有我的代码

```
 string fileName = "xyz.xls";

    HttpContext.Current.Response.Clear();
    HttpContext.Current.Response.ClearHeaders();
    HttpContext.Current.Response.ClearContent();
    HttpContext.Current.Response.AddHeader("content-disposition", string.Format("attachment; filename={0}", fileName));
    HttpContext.Current.Response.ContentType = "application/vnd.xls";           

    /*      
    using (StringWriter sw = new StringWriter())
    {
        using (HtmlTextWriter htw = new HtmlTextWriter(sw))
        {
            //extract
        }
    }
    */

    HttpContext.Current.Response.Write(sw.ToString());
    HttpContext.Current.Response.Flush();
    HttpContext.Current.Response.End(); 
```

# java - 带有gridlayout的jpanel内有太多空白空间

> ID：13878295
> 
> 赞同：2
> 
> 时间：2012-12-14T12:00:29.033
> 
> 标签：java, swing, jpanel

我有一个 JPanel，在里面我使用这样的 GridLayout：

```
 JPanel panel = new JPanel(new GridLayout(0, 1, 0, 0));

    JPanel p1 = new JPanel(new FlowLayout());
    JLabel label = new JLabel("SOMETHING");
    JTextField tf = new JTextField(30);

    JPanel p2 = new JPanel();

    JTextArea txt = new JTextArea(6, 30);
    JScrollPane sp = new JScrollPane(txt);

    p1.add(label);
    p1.add(tf);

    p2.add(sp);

    panel.add(p1);
    panel.add(p2); 
```

不幸的是，JTextArea 和上面的元素之间的空间非常大。我能做些什么来启动 JTextArea？

[http://img20.imageshack.us/img20/1086/screenshot1412201213550.png](http://img20.imageshack.us/img20/1086/screenshot1412201213550.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T12:06:36.940

使用[`BorderLayout`](http://docs.oracle.com/javase/6/docs/api/java/awt/BorderLayout.html)顶部面板`NORTH`并将滚动窗格添加到`CENTER`.

以下代码截图：

![截屏](../Images/30a3144a04e24a945c2922af0dafc1e0.png)

```
public static void main(String[] args) {

    JFrame frame = new JFrame("Test");

    frame.add(new JPanel(new FlowLayout()) {{
        add(new JLabel("something"));
        add(new JTextField(30));
    }}, BorderLayout.NORTH);

    frame.add(new JScrollPane(new JTextArea(6, 30)), BorderLayout.CENTER);

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.pack();
    frame.setVisible(true);
} 
```

# php - 如何处理返回的 PDF 文件以便能够在浏览器中显示

> ID：13878296
> 
> 赞同：1
> 
> 时间：2012-12-14T12:00:30.127
> 
> 标签：php, extjs, tcpdf

我有 ExtJS 应用程序，它正在查询数据库并在网格中显示结果，它工作正常。

用户可以通过复选框从网格中选择任何记录，然后发送到服务器打印出来。服务器端代码生成PDF文件（通过TCPDF）并返回结果浏览器，它也可以正常工作。

我的问题是，客户端不在浏览器窗口中显示 PDF 文件，而不是只显示 PDF 页面的二进制形式。

那么，您能帮我吗，我该如何处理返回的 PDF 文件以显示客户端屏幕？

**客户端**

```
{
xtype: 'button',
width: 90,
text: 'GÖNDER',
cls: 'x-btn-gonder',
handler: function(){
    var ppt     = Ext.getCmp('labelType').getValue();
    var sb      = Ext.getCmp('basic-statusbar');
    var count   = Ext.getCmp('labelGrids').getSelectionModel().getCount();
    var rows    = Ext.getCmp('labelGrids').getSelectionModel().getSelection();

    if(ppt == null) {
        dialog.show();
    } else {
    if(count > 0) {
        var paper = {};
        paper.PAPER = ppt;

        var prints = new Array();
        for (var i = 0; i < count; i++)
        {
            prints[i] = {'LABEL_ID': rows[i].data.LABEL_ID, 'LABEL_TYPE':rows[i].data.LABEL_TYPE}
        }
        paper.LABELS = prints;

        Ext.Ajax.request({
            url: 'lib/labels/print_label.php',
            timeout: 60000,

            success: function() 
            { 
                Ext.Msg.alert('İşlem Başarılı', 'Etiketler yazıcıya gönderildi.');

                // set statusbar text after print
                sb.setStatus({
                    text: 'Etiketler yazıcıya gönderildi..!',
                    iconCls: 'x-status-saved',
                    clear: true
                });

                // remove checked items
                Ext.select('.x-grid-row-selected').each(function (element) {
                    Ext.getCmp('labelGrids').getSelectionModel().deselectAll();
                });
            },
            failure: function() { Ext.Msg.alert('Yazdırma Hatası', 'Etiketler yazdırılamadı..!')},
            jsonData: Ext.JSON.encode(paper)
        });

        // clear combobox selected value after send to printer
        Ext.getCmp('labelType').reset();

        // console.log(Ext.JSON.encode(prints));
    } else if(count == 0) {
        sb.setStatus({
            iconCls: 'x-status-error',
            text: 'Lütfen yazdırmak istediğiniz etiketleri seçiniz!'
        });
    }                           
    winPaper.hide();
    }
} 
```

}

**服务器端**

```
<?php
require_once('../tcpdf/config/lang/eng.php');
require_once('../tcpdf/tcpdf.php');

$db = new mysqli("10.10.10.10","blabla","blablabla","label");
$db->query("SET NAMES UTF8");
$db->query("SET SQL_MODE='NO_AUTO_VALUE_ON_ZERO'");
$db->query("SET lc_time_names = 'tr_TR'");

$datas = json_decode(file_get_contents("php://input"));

// get paper type from json array
$paper  = $datas->PAPER;

foreach($datas->LABELS as $data)
{
    $lblids[] = $data->LABEL_ID;
}

$ids = implode(",", $lblids);

// get labels from db
$sql = "SELECT LABEL_ID, SUBSYS_ART_NO, ARTICLE_DESC, END_DATE, PRODUCT_PRICE, SHELF_PRICE, LABEL_TEXT, LABEL_TYPE, LABEL_SIGN, PROMO FROM labels WHERE LABEL_ID IN (".$ids.")";
$result = $db->query($sql);

while($row = $result->fetch_assoc())
{
    $labels[] = $row;
}

switch($paper)
{
    case "SF":
        print_shelf($labels);
    break;
}

function print_shelf($labels)
{
    # defining PDF variables
    $width      = 100;
    $height     = 55;
    $pageSize   = array($width, $height);

    # create new BMPL PDF price label
    $pdf = new TCPDF('L', PDF_UNIT, $pageSize, true, 'UTF-8', false);

    # set PDF document information
    $pdf->SetCreator(PDF_CREATOR);
    $pdf->SetAuthor('Oğuz Çelikdemir, Metro Systems Turkey');
    $pdf->SetTitle('BMPL Price Label');

    # disable pdf document header and footer
    $pdf->setPrintHeader(false);
    $pdf->setPrintFooter(false);

    # set PDF default font
    $pdf->setDefaultMonospacedFont('PDF_FONT_MONOSPACED');

    # set auto page breaks
    $pdf->SetAutoPageBreak(true, 2);

    $crs   = array('width' => 0.5);
    $style = array('width' => 0.25, 'cap' => 'butt', 'join' => 'miter', 'dash' => 0, 'color' => array(0, 0, 0));

    for($i = 0; $i < count($labels); $i++)
    {
        # add PDF page
        $pdf->addPage();

        # split the price values
        $prdPrice = explode(".", $labels[$i]['PRODUCT_PRICE']);
        $shfPrice = explode(".", $labels[$i]['SHELF_PRICE']);

        $prcLeft  = $prdPrice[0];
        $prcRight = $prdPrice[1];
        $shfLeft  = $shfPrice[0];
        $shfRight = $shfPrice[1];

        # Label variables
        $priceLeft      = '<span style="color:#b4b4b4;">'.$prcLeft.'</span>';
        $priceLeftCent  = '<span style="color:#b4b4b4;">'.$prcRight.'</span';
        $priceRight     = '<span style="color:#b4b4b4;">'.$shfLeft.'</span>';
        $priceRightCent = '<span style="color:#000;">'.$shfRight.'</span>';
        $taxLabelLeft   = '<span style="color:#b4b4b4;">KDV\'Lİ</span>';
        $taxLabelRight  = 'KDV\'Lİ';
        $articleDesc    = '\''.$labels[$i]['ARTICLE_DESC'].'\'';
        $articleNumber  = $labels[$i]['SUBSYS_ART_NO'];
        $labelText      = '\''.$labels[$i]['LABEL_TEXT'].'\'';
        $promoDate      = $labels[$i]['END_DATE'];
        $promoLabel     = $labels[$i]['PROMO'];

        ////////////// PREPARE THE LABELS \\\\\\\\\\\\\\

        # LABEL BOTTOM
        $pdf->SetFont('dinpro', '', 6);
        $pdf->writeHTMLCell(20, 0,  5, 50, $articleNumber, '', 1, 0, true, 'L');
        $pdf->writeHTMLCell(20, 0, 28, 50, $promoDate, '', 1, 0, true, 'L');

        if(is_null($promoLabel)) {
            $pdf->writeHTMLCell(20, 0, 42, 50, '', '', 1, 0, true, 'R');
        } else {
            $pdf->writeHTMLCell(20, 0, 42, 50, 'FIRSAT', '', 1, 0, true, 'R');
        }

        # LABEL LEFT
        $pdf->SetFont('dinprob', 'B', 10);
        $pdf->MultiCell(90, 20, $articleDesc, 0, 'L', false, 1, 5, 5.50);
        $pdf->SetFont('dinprob', '', 8);
        $pdf->writeHTMLCell(45, 10, 5, 17, 'SATIŞ FİYATI', '', 1, 0, true, 'F');
        $pdf->SetFont('dinprob', 'B', 44);
        $pdf->writeHTMLCell(30, 27, 5, 24, $priceLeft, '', 1, 0, true, 'R', true);
        $pdf->SetFont('dinprob', 'B', 20);
        $pdf->writeHTMLCell(15, 10, 26.5, 28.5, $priceLeftCent, '', 1, 0, true, 'R', true);
        $pdf->SetFont('dinpro', '', 6);
        $pdf->writeHTMLCell(15, 10, 29.2, 37.3, $taxLabelLeft, '', 1, 0, 'L', true);

        if(!is_null($labels[$i]['LABEL_SIGN']))
        {
            $pdf->Line(7, 41, 38, 22, $crs);
        }

        # LABEL RIGHT
        $pdf->SetFont('dinprob','',8);
        $pdf->writeHTMLCell(45, 10, 50, 17, $labelText, '', 1, 0, true, 'C');
        $pdf->SetFont('dinprob', 'B', 58);
        $pdf->writeHTMLCell(45, 30, 42, 21, $priceRight, '', 1, 0, true, 'R', true);
        $pdf->SetFont('dinprob', 'B', 24);
        $pdf->writeHTMLCell(15, 10, 79.5, 28, $priceRightCent, '', 1, 0, true, 'R', true);
        $pdf->SetFont('dinpro', '', 6);
        $pdf->writeHTMLCell(15, 10, 81, 38.5, $taxLabelRight, '', 1, 0, 'L', true);

        $js .= 'print(true);';
        $pdf->IncludeJS($js);

        ob_end_clean();
        return $pdf->Output('bpml_label.pdf', 'I');
    }
}        
?> 
```

![控制台输出](../Images/aeb0aa65557e2a9d5d78a210e3522f40.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:27:59.987

当您将 PDF 返回给客户时，请使用正确的内容类型发送它。在发回响应之前添加此标头

```
header('Content-Type: application/pdf'); 
```

然后客户端可以正确地决定如何处理文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T04:12:28.987

我尝试了上述建议但没有成功，所以我做了如下替代方式：

首先，一些浏览器不支持像 PDF 这样的响应对象，因此，我回发到 PDF 文件 url，然后使用 Ext 窗口对象内的 iframe 进行处理。

```
success: function(response)
{
   var _url = response.responseText;

   new Ext.Window({
      title: 'Labels',
      id: 'pdfWindow',
      layout: 'fit',
      width: 600,
      height: 500,
      closeAction: 'destroy', // take notice that 'hide' action doesn't work
      items: [{
         xtype: 'component',
         autoEl: {
            tag: 'iframe', // we need iframes 'src' parameter to handle PDF
            style: 'height:100%; width:100%; border:none',
            // here we used special style to get rid of iframe title
            src: _url
         }
      }]
   }).show();
}, 
```

**服务器端**

```
// we need an unique ID to be able set unique file name
$uniqeid = uniqid(); # if you want add true parameter to extend sensibility
$filename = '/var/www/label/print/'.$uniqeid.'.pdf';
# F parameter creating the file in specified directory, don't forget to set security 777 for folder ortherwise you might take an error
$pdf->Output($filename, 'F');
echo('/print/'.$uniqeid.'.pdf'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T21:19:45.247

将目标添加`_blank`到打印按钮。您的浏览器将在新窗口中打开它，其中包含服务器生成的 PDF 内容。

按照其他人的建议添加内容标题：

```
header('Content-Type: application/pdf'); 
```

# c# - Windows RT 上的通知

> ID：13878298
> 
> 赞同：0
> 
> 时间：2012-12-14T12:00:32.930
> 
> 标签：c#, microsoft-metro, windows-runtime

我找不到这个信息，当我们的应用程序在后台运行时我们会收到通知回调吗？我知道瓷砖会更新，但如果我们能实时获得回调，我们就可以完成我们的工作。

我确定这在 wp7 中是不可能的，RT Metro 应用程序中有没有办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:05:06.183

答案是肯定的——请参阅MSDN 上的[原始通知示例](http://code.msdn.microsoft.com/windowsapps/Raw-notifications-sample-3bc28c5d)。

此外，请查看MSDN 上的[快速入门：创建和注册原始通知后台任务（使用 C#/VB/C++ 和 XAML 的 Windows 应用商店应用程序）(Windows)](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj709906.aspx#register_your_background_task_in_your_app)文章。

**更新：**对于服务器端实现信息，您可以尝试[另一个很棒的快速入门](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh868252.aspx)。

# objective-c - 自我保留和自我释放对象的策略

> ID：13878303
> 
> 赞同：0
> 
> 时间：2012-12-14T12:00:58.100
> 
> 标签：objective-c, design-patterns, memory-management

我需要实现一些可以在应用程序的几个不同位置使用的功能。它基本上是通过网络发送一些东西，但我不需要将它附加到任何特定的视图 - 我可以通过 UIAlertViews 将所有内容传达给用户。

我想做的是将功能封装在一个对象（？）中，该对象可以保持自己的状态一段时间，然后自行消失。我读过几个类似的主题，通常不建议拥有一个保留然后释放自身的对象，但另一方面，你有单例，除了它们永远不会被释放的事实之外，它们在本质上非常相似。您无需保留对它们的引用即可正确使用它们。然而，在我的情况下，我觉得创建一个单例然后让它保持活动状态需要几秒钟才能执行的事情有点浪费。

我想出的是一个类本地的静态字典，它保留对类实例的唯一引用，然后，当一个实例完成其任务时，它会在延迟后执行选择器“removeObjectForKey”，从而删除唯一存在的引用并有效地杀死对象。这样，我只在内存中保留一本字典，无论如何它大部分时间都是空的。

问题是：这种解决方案是否有任何我应该注意的意外副作用，并且对于所描述的情况还有其他好的模式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:11:48.873

所以基本上不是你自己的类的持久对象，你有一个类型的持久对象`NSDictionary`？这有什么帮助？你的物体是否异常大？如果你为了几个字节而让你的代码库变得更复杂，那不是一个好的权衡。

尤其是现在ARC已经司空见惯，这种诡计通常不是一个好主意。您是否测量过单例方法占用了多少内存并发现这是一个问题？除非你已经这样做了，否则请使用单例。这是更简单的代码，在所有其他条件相同的情况下，更简单的代码要好得多。

# c - 在客户端 C 中复用标准输入和套接字

> ID：13878306
> 
> 赞同：1
> 
> 时间：2012-12-14T12:01:25.303
> 
> 标签：c, sockets, unix, client-server, multiplexing

我编写了一个简单的 TCP 服务器来为许多客户提供服务（它与 telnet 配合得很好）。但是，我还想编写自己的简单 TCP 客户端，带有多路复用套接字和标准输入。与我照常写的服务器连接，连接代码没问题。

我对多路复用套接字和标准输入有问题。我的代码是最大的问题：

```
 void multiplexClient(FILE *fp, int sockfd, char inbuffer[], char outbuffer[])
    {
        int maxfd;
        fd_set rset;

        FD_ZERO(&rset);
        for(;;)
        {
            FD_SET(fileno(fp), &rset);
            FD_SET(sockfd, &rset);
            maxfd = std::max(fileno(fp), sockfd) + 1;

            int res = select(maxfd, &rset, NULL, NULL, NULL);

            if(res < 0)
            {
                printf("'select error\n");
            }

            if(FD_ISSET(sockfd, &rset))
            {
                if(read(sockfd, inbuffer, sizeof(inbuffer)) == 0)
                   printf("read error\n");
                printf("Received: %s\n", inbuffer);
                fflush(stdout);
                 memset(inbuffer, 0, sizeof(inbuffer));
            }

            else if(FD_ISSET(fileno(fp), &rset))
            {
                fprintf(stdout, "\n> ");
                if(fgets(outbuffer, sizeof(outbuffer), fp) == NULL)
                    return;
                write(sockfd, outbuffer, strlen(outbuffer));
                printf("Send: %s\n", outbuffer);
                fflush(stdout);
                 memset(outbuffer, 0, sizeof(outbuffer));
            }
        }
    }

// int main
// sockfd = socket...
// connect

while(1)
{
 multiplexClient(stdin, socket_fd, inbuffer, outbuffer);
}

// ...
    return 0;
} 
```

我的第一个客户：

```
$ ./client localhost 9034
hello, other client!

> Send: hel
Received: hel
Received: lo! ��~�~���~�
Received: :)

Received: wha 
```

我的第二个客户：

```
$ ./client localhost 9034
hello! :)

> Send: hel
whats is wrong with this chat?!

> Send: lo!

> Send:  :)

> Send: 

> Send: wha 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:13:07.253

您的问题出在此处（稍作解释）：

```
read(sockfd, inbuffer, sizeof(inbuffer));
printf("Received: %s\n", inbuffer); 
```

该`read`调用返回写入的字节数（您忽略）并且缓冲区*不是*C 字符串（即，它不是以空值结尾的）。

您*应该*拥有以下内容：

```
quant = read (sockfd, inbuffer, sizeof(inbuffer));
printf ("Received: %*.*s\n", quant, quant, inbuffer); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T12:09:23.177

`FD_ZERO()`在将文件选择器重新添加到集合之前，您缺少一个。

此外，这是 C++，因为它使用`std::max()`.

# android - 创建底部栏菜单

> ID：13878307
> 
> 赞同：1
> 
> 时间：2012-12-14T12:01:30.683
> 
> 标签：android, menu, android-actionbar

我正在研究在 android 中构建底部菜单栏的方法。我最初计划使用 uiOptions:splitWhenNarrow 拆分操作栏，但不幸的是，这只适用于手机屏幕。

我的目标是为nexus 7设计，所以屏幕稍微大一点！

我遇到了一个我在下面链接的教程。这似乎正是我正在寻找的东西，但在我深入编码之前，我只想检查它是否是做这种事情的好方法？

也许有人可以提出替代方案？我对 android 比较陌生，所以这对我来说是一个巨大的学习曲线，我正在尝试根据最佳实践进行开发。

非常感谢。

[http://www.paxmodept.com/telesto/blogitem.htm?id=810](http://www.paxmodept.com/telesto/blogitem.htm?id=810)

*教程中的菜单栏几乎就是我想要实现的。

# java - 私人包裹的处理方式是什么？

> ID：13878308
> 
> 赞同：28
> 
> 时间：2012-12-14T12:01:31.020
> 
> 标签：java, module, osgi

我已经使用 OSGi 有一段时间了，但我仍然不了解私有包。

*   导出的包是对其他捆绑包可见的包
*   导入的包是由导出包的捆绑包导入的包。
*   私有包是对其他捆绑包不可见的包（我不明白）

不是所有未导出的捆绑包对所有其他包都不可见吗？如果是这样，私有包和不导出的包有什么区别？

我已经阅读了 OSGi in Action 和“OSGi and Apache Felix 3.0 - Beginners Guide”，但我找不到区别。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-14T14:20:14.747

**没有区别。**

任何未列出的包`Export-Package`都是私有的......这就是它的全部内容。

您*可能*已经看到另一个名为`Private-Package`. 这不是 OSGi 标头，它被 OSGi 框架完全忽略。如果您看到此信息，则表明已使用[bnd](https://github.com/bndtools/bnd)或[Maven Bundle Plugin](http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html)构建了一个包，它使用此标头具有构建时指令。因此，它仅在构建时相关，在运行时没有任何影响。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-12-14T13:16:06.783

是的，manifest.mf 条目中未定义的所有包`Export-Package`都是私有包。您不需要单独指定它们，它只是便于沟通的另一个术语。

如果你有你的清单，例如由 maven-bundle-plugin 生成，这个术语 get 更相关一些，因为 maven bundle 插件将默认导出所有包，除了一个名为的包`internal`（或它的子包）。这在某种程度上是相反的方法，因为您指定了私有包并计算了导出的包。有关详细信息，请参阅[Maven 捆绑插件](http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html)。

# git - Chef：如何将通过仪表板所做的更改添加到 Git？

> ID：13878311
> 
> 赞同：4
> 
> 时间：2012-12-14T12:01:47.733
> 
> 标签：git, chef-infra

我们目前正在设置 opscode chef，我们希望通过 Git 管理所有食谱、环境等。是否有最佳实践/自动化来确保通过仪表板进行的所有更改（例如新环境）都自动添加到版本控制中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:29:36.390

这个确切的问题是我很少使用 Web 客户端的原因。相反，我有一个 git 存储库，我将我的 JSON 配置保存在存储库中，然后使用`knife`它的`from file`功能来更新节点、角色、环境和说明书。它让我更容易确保 git 和 chef 是最新的。

如果您必须使用 Web 界面，您可以设置一个 cron 作业以定期通过 Chef REST API 提取数据，然后将任何更改提交到您的 git 存储库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T21:00:10.440

我们设计的解决方案（但为了充分披露并没有超出 POC 的范围）是观察 couchdb 的变化（http://guide.couchdb.org/draft/notifications.html）以及每当文档发生变化时我们从 couchdb 中提取它并检查到 git 中。

您可以通过持续监听更改来完成此操作，也可以编写脚本并保留您更新的最后一条记录的指针。这意味着该解决方案对于更新 couchdb 中的文档的客户端是完全不可知的（即，knife/webui/recipes/命令行脚本都最终通过 api 注册它们的更改并进入 couchdb）

希望对你有用

# iphone - 在 twitter api 中获取是否受保护

> ID：13878314
> 
> 赞同：0
> 
> 时间：2012-12-14T12:02:09.520
> 
> 标签：iphone, objective-c, ios, twitter

我正在开发一个 Twitter API。我需要做的是检查用户是否在默认情况下受到保护 tweeter Account `"protected":false`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:10:41.917

为`request`其他在`user's` `timeline`. `twitter API`其他用户`timeline`只有在`visible`他们是`not` `protected`，或者`authenticating`用户的关注请求是`accepted`由`protected`用户提出时才会是。

有关详细信息，请参阅[此](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)链接。

# java - 在一行中加入两行（在 Java 中）

> ID：13878319
> 
> 赞同：1
> 
> 时间：2012-12-14T12:02:49.787
> 
> 标签：java, algorithm

我有一个 Lines 数组，我用它在我的地图中绘制矢量。

我想用一条线替换两条重叠的线（或它们之间的距离很短）。你能给出一个算法来做到这一点吗？

这是一张可以帮助您理解此问题的图片：

输入线：

![输入线](../Images/7a6c9e553e11a6b954650e99a6966341.png)

执行算法后，我想得到下图所示的输出：

![输出](../Images/6113fd15d6e992e5251007a4c9e3dfaf.png)

PS：Line 是点的 ArrayList。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:13:42.913

1.  合并任意一对在彼此固定距离内的顶点（将它们的位置设置为相等）。

2.  在每条线上找到离每个顶点最近的点。如果它足够接近，则在该点上分割线，然后合并这些点。

3.  删除具有完全相同起点和终点的重复行。

![图表](../Images/5dad103b8af8eca3b3575859dabb4749.png)

例如，如果您有一条由点 A 和 B 定义的线，以及另一条由点 C 定义的线（左上图）。可以使用点到线的最短距离函数找到点 D。如果 D 离 C 太远则忽略它，否则将 AB 线分成两条线 AD 和 DB，并将 C 位置的所有点移动到 D 位置，得到右图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:15:43.703

这个问题类似于问题“两个范围是否相交，如果不是，那么它们之间的距离是多少？” 答案稍微取决于您是否已经知道哪个范围最小，以及范围中的点是否正确排序（即线是否具有相同的方向）。

所以初步的算法方法是这样的：

```
if (a.start < b.start) {
  first = a;
  second = b;
} else {
  first = b;
  second = a;
} 
```

现在让我们找到距离：

```
distance = max(0, second.start - first.end); 
```

现在你必须有一个最短距离的值范围，这取决于你要将线条超级强加到 1 中。假设您将它们保存在一个名为的数组中：

```
 arrayRange[]; 
```

现在如果，

```
for(int 1=0;i<arrayRange.length;i++)
{
if(distance is one of the elements of the arrayRange)
then,
callFunctionSuperImposeLines(distance,a,intersectionPoint,a.end,b,b.end);
} 
```

# vim - 在发送给潜在客户之前，使用 Vim 每隔三行代码就乱码？

> ID：13878336
> 
> 赞同：2
> 
> 时间：2012-12-14T12:04:03.563
> 
> 标签：vim, obfuscation

我有一个具体的问题。我想出售我用 R 编程语言编写的模型之一。我想向潜在客户展示代码中有很多高级工作，而且数量很多，代表了大约 700 小时的研发（大约 2000 行 R 代码）。所以，我想把代码发给他。给他留下深刻印象。

但是我显然不想透露代码的全部工作原理，所以我想每隔三四行就乱码，这样就不能简单地进行 OCR 和复制。我不想走 NDA 路线，客户也不擅长编程（自己无法复制它——尽管我猜可以聘请程序员）。我也可能会完全混淆一两个关键功能。

我将如何在 Vi / Vim 中执行此操作？

有没有其他人可以建议的方法来解决我的问题？

是的，我知道我可以向他展示程序的输出作为推销，我已经这样做了，但是我们正在讨价还价，所以通过代码清单有点“对科学视而不见”，看看有多少工作是参与，不会伤害。根据我的经验，许多非程序员不知道一个软件可以投入多少工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T12:25:47.797

您应该将您的问题移动/重新发布到programmers.stackexchange.com，这似乎更合适。

但是，我认为如果您试图向非技术人员出售某些东西，那么显示代码将不起作用。键入 2000 行代码并没有那么长。他/她将无法通过阅读一些难以理解的符号来衡量价值。

相反，您应该展示您的代码对他/她的业务的附加价值。因此，获取一组数据（可能来自您的客户），并从该组中提取/显示相关信息应该更令人印象深刻。我应该补充一点，您的模型的价格不仅取决于所涉及的工作，还取决于您的客户的潜在利益。

一段代码只是解决一个问题，根据解决的问题，你可能可以卖到 10 美元到 1 亿美元。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T13:18:38.537

我完全支持 Xavier T. 提出的观点，但如果你仍然认为你需要展示整个代码的一些表示来对你的工作量产生印象，我会：

*   使用非常小的字体创建一个打印输出，以使结构完整（例如`:set printfont=Courier_h4`）；显然，这仅适用于纸质副本，而不适用于 PDF。
*   Obfuscate by replacing all alphabetic letters with `x`, as in `:%substitute/\a/x/g`

# javascript - 无法理解如何使用 javascript 和 jquery 代码来做到这一点

> ID：13878339
> 
> 赞同：2
> 
> 时间：2012-12-14T12:04:18.677
> 
> 标签：javascript, jquery

抱歉，伙计们问了那个愚蠢的问题，但我对那件事有疑问。有这样的脚本，它应该返回真或假，但在绘制该 html 弹出窗口并从该方法获得响应之后。

```
 $("#pageInfo a.btnDel").click(function () {

                    $("#cmsSmallPopUpWindowMessage").html("<h2>Do you really want to delete this page?</h2><center><div style='width:130px'><ul class='bactions'><li><a id='cmsSmallPopUpWindowBYes' href='javascript:void(0)'><span><span>Yes</span></span></a></li><li><a id='cmsSmallPopUpWindowBNo' href='javascript:void(0)'><span><span>No</span></span></a></li></ul><div class='archor'></div></div></center>");
                    $.blockUI({ message: $("#cmsSmallPopUpWindow"), css: { width: "530px", border: "0px", backgroundColor: "transparent"} });
                    setTimeout(function () {
                        $.unblockUI();
                    }, 6000);

                    $("#cmsSmallPopUpWindowBNo").click(function () {
                        $.unblockUI();
                        return false;
                    });

                    $("#cmsSmallPopUpWindowBYes").click(function () {
                        $.unblockUI();
                        location.reload();
                        return onDelete($(this).attr('href'));
                    });
                    return true; // this should change for "false" or "true" but after click on "yes" or "no" 

                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:41:52.763

我建议使用[jQueryUI modal-confirmtion dialog](http://jqueryui.com/dialog/#modal-confirmation)。它恰好满足您的需求，阻止 UI（模态），具有良好的布局并且异步工作（不冻结脚本）。

# emacs - 是否可以在 Emacs 中为每个模式/缓冲区和每个字符集设置字体？

> ID：13878341
> 
> 赞同：3
> 
> 时间：2012-12-14T12:04:24.563
> 
> 标签：emacs, elisp, org-mode

我想根据emacs中的major mode和charset来设置字体，例如，当我打开一个org文件时，我希望看到ASCII字符以“Consolas”字体显示，中文或日文字符以“字体”显示微软雅黑”。

目前我使用一种称为次要模式的方法`buffer-face-mode`，可以使字体更改与主要模式相对应：

```
(add-hook 'org-mode-hook (lambda ()
                           (setq buffer-face-mode-face '(:font "Consolas-10.5"))
                           (buffer-face-mode))) 
```

我查看[了此页面](http://www.gnu.org/software/emacs/manual/html_node/elisp/Face-Attributes.html)，但似乎没有任何可以设置或更改的面部字符集属性，因此我无法继续根据不同的字符集设置字体。

而且我知道还有另一个函数`set-fontset-font`可以根据字符集设置字体，但它只能应用于帧，不能应用于缓冲区或模式。

那么，有没有办法将不同的字体设置为不同的字符集`buffer-face-mode`，或者有一种解决方法来实现我的原始请求？

提前致谢，

开尔文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:52:02.617

以下是一些搜索线索：在 Emacs22 之前我曾经定义一些个人字体集，我不确定这仍然是一种有效的方法。

*   创建一个新的字体集，描述编码列表和字体之间的映射以呈现它们中的每一个
*   将该字体/字体集与 一起使用`default-frame-alist`，我不知道如何仅将其关联到特定模式

```
(create-fontset-from-fontset-spec
    "-*-consolas-*-*-*-*-12-*-*-*-*-*-fontset-consolas,
    ascii:-*-consolas-*-*-*-*-12-*-*-*-*-*-iso8859-1,
    latin-iso8859-1:-*-consolas-*-*-*-*-12-*-*-*-*-*-iso8859-1,
    latin-iso8859-15:-*-consolas-*-*-*-*-12-*-*-*-*-*-iso8859-15")

(setq default-frame-alist '((width . 100) 
   (height . 44) 
   (top . 50) ;pixels
   (left . 50) ;pixels
   (font . "fontset-consolas")
   )) 
```

在这里，我总是为几种编码关联相同的字体，但您可以使用不同的字体。

# css - MVC 验证错误的红色颜色消失了。他们穿着黑色

> ID：13878345
> 
> 赞同：0
> 
> 时间：2012-12-14T12:04:43.847
> 
> 标签：css, asp.net-mvc-4

我的 MVC 项目中的验证错误显示为黑色，而不是默认的红色。其他一切正常。

就像这个家伙报告的那样，但还没有找到解决方案：

[asp.net MVC3 验证默认颜色显示为黑色而不是红色](https://stackoverflow.com/questions/12258602/asp-net-mvc3-validation-default-color-is-showing-as-black-instead-of-red)

CSS 文件的颜色为红色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:32:25.560

从评论开始，看起来该类未应用于元素，或者您的 css 未正确加载。

你能独立验证每一个吗？查看源代码并检查您的捆绑参考，它实际上包含您需要的样式表。

# c# - 在c#中显示带有换行符的标签文本

> ID：13878347
> 
> 赞同：42
> 
> 时间：2012-12-14T12:04:52.720
> 
> 标签：c#, asp.net

是否可以完全按照图像显示带有换行符的标签文本

![在此处输入图像描述](../Images/9ab4517507c2cf2d54043b5cfc8de9fd.png)

我需要准确打印标签上的文本，有人可以帮我吗，我想要的必须显示在标签上的文本将存储在字符串生成器中

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-12-14T12:11:17.767

您可以在两行之间附加 HTML `<br />`。就像是：

```
MyLabel.Text = "SomeText asdfa asd fas df asdf" + "<br />" + "Some more text"; 
```

使用**StringBuilder**您可以尝试：

```
StringBuilder sb = new StringBuilder();
sb.AppendLine("Some text with line one");
sb.AppendLine("Some mpre text with line two");
MyLabel.Text = sb.ToString().Replace(Environment.NewLine, "<br />"); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-07-18T14:47:38.563

我知道这个线程很旧，但是......

如果您使用的是 html 编码（如[AntiXSS](https://msdn.microsoft.com/en-us/library/system.web.security.antixss(v=vs.110).aspx)），则之前的答案将不起作用。中断标记将呈现为文本，而不是应用回车符。您可以将您的 asp 标签包装在 pre 标记中，它将显示从后面的代码中设置的任何换行符。

**例子：**

```
<pre style="width:600px;white-space:pre-wrap;"><asp:Label ID="lblMessage" Runat="server" visible ="true"/></pre> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-14T12:09:35.477

您还可以`<br/>`在要中断文本的位置使用。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-12-14T12:09:48.207

您可以使用`<br />`换行符和`&nbsp;`空格。

```
string s = "First line <br /> Second line"; 
```

输出：

```
First line
Second line 
```

有关更多信息，请参阅：[标签中的换行符](https://stackoverflow.com/questions/2915983/line-break-in-label)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-25T11:44:30.683

您也可以使用以下内容

```
@"Italian naval...<br><br>"+ 
```

上面的代码可以实现双倍空格。如果你想要一个意味着你只需使用
.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-01T15:35:37.673

我不得不用 br 替换新行

```
string newString = oldString.Replace("\n", "<br />"); 
```

或者如果你使用 xml

```
<asp:Label ID="Label1" runat="server" Text='<%# ShowLineBreaks(Eval("Comments")) %>'></asp:Label> 
```

然后在后面的代码中

```
public string ShowLineBreaks(object text)
{
    return (text.ToString().Replace("\n", "<br/>"));
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-09-30T15:30:14.680

或者简单地添加一行：

```
Text='<%# Eval("Comments").ToString().Replace("\n","<br />") %>' 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-30T08:58:40.397

以下行对我有用：

```
lbTabRes.Text += num + " x " + i + " = " + (num * i).ToString() + "<br/> \n"; 
```

# c# - 数据库保存数据的相对路径问题

> ID：13878350
> 
> 赞同：2
> 
> 时间：2012-12-14T12:04:59.333
> 
> 标签：c#, database, ado.net, relative-path, saving-data

我正在创建一个预订系统，但是当我从特定路径更改为数据源的相对路径时，我遇到了数据库连接问题，当我有一个特定的数据源时，它可以更新数据库并添加新项目。但是当我更改为相对路径时，在运行时一切正常，但当我关闭程序时，我更改或添加的所有内容都已被处理，当我再次打开它时，没有任何内容被保存。这就是相对路径的样子

```
SqlConnection SQLCN = new SqlConnection
(@"Data Source=.\SQLEXPRESS;
AttachDbFilename=|DataDirectory|\Databas\TestDatabase.mdf;
Integrated Security=True;User Instance=True"); 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:07:15.780

那是因为您在每次构建时都覆盖了数据库。

可能你有`Build Action`set to`Content`和`Copy to Output Directory`set to `Copy If Newer`。

来自@steve 的[链接](http://msdn.microsoft.com/en-us/library/ms246989.aspx)，关于`Copy if newer`值：

*我们不建议对 .mdb 或 .mdf 文件使用此选项。即使未对数据进行任何更改，数据库文件也可能更改。只需打开数据文件上的连接（例如，通过在服务器资源管理器中展开表节点）即可将其标记为较新。*

# shopify - Shopify 配送应用 API

> ID：13878351
> 
> 赞同：1
> 
> 时间：2012-12-14T12:05:03.830
> 
> 标签：shopify

我是一名开发人员，目前正在开发自己的 Shopify 应用程序。我想问是否有能力使用 API 获取产品下载 URL，或者可能以某种方式访问​​ Shopify Delivery 应用程序 API？我试过了，但似乎我无法使用 API 获得有关可下载产品的任何信息，只有通常的数据集，就像任何其他产品一样。真的是这样吗，没有办法使用API​​（产品API或者可能是订单API）获取产品下载链接。

# excel - 如何使用vbscript将一行空和非空数据中的所有非空数据打包到一个数组中

> ID：13878356
> 
> 赞同：1
> 
> 时间：2012-12-14T12:05:16.700
> 
> 标签：excel, vbscript, vba

我有一个 excel 表，它有 144 列（4 列包含一组）。即我有 36 组。现在我怎样才能只从 2000X350 Excel 表格矩阵数据中取出非空数据，使用 VBScript 到二维数组中？

这是一个示例表：

```
 PID  T1 T1SD T1CD T1ST T2 T2SD T2CD T2ST T3 T3SD T3CD T3ST T4 T4SD T4CD T4ST ........
    10  a   b          b   t             r                     t   k   l     o
    11                     p   p    m    d   n   n    n    b
    .
    . 
```

列号 11 上的 PID always.Evey 集合由 (TN,TNSD,TNCD,TNST) 组成，其中 N=1 到 36。只有当一个集合完整包含 NUll 数据时，阵列才会将数据拾取到其中。一旦完成所有数据提取，它应该将数据释放到每一行。但是应该记住的是，如果二维数组应该将数据分配给从中提取数据的行。

Data(1,1)=(a,b,,b,t,,,r,t,k,l,o) 拾取时 Cell(2,12)=(a,b,,b,t,, ,r,t,k,l,o) 释放数据时。

这意味着数据应该需要映射到正确的行（setwise）

如果您有任何困惑，请告诉我。

***编辑：*** ***输出表***

```
 PID  T1 T1SD T1CD T1ST T2 T2SD T2CD T2ST  T3 T3SD T3CD T3ST T4 T4SD T4CD T4ST
    10  a   b          b   t              r    t   k   l     o
    11  p   p    m     d   n   n    n    b 
```

谢谢，奥雅纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:47:38.470

这是一个部分答案，应该可以帮助您朝着正确的方向前进。

```
Sub Macro1()

Dim whichT As Integer
Dim whichC As Integer
Dim allNull As Boolean
Dim contents As String

For whichT = 0 to 8 ' this is which T set
  allNull = True
  for whichC = 1 to 4 ' this is which of the 4 elements
    contents = Cells(2, whichT * 4 + whichC + 1)
    Debug.Print "Contents of col ", whichT * 4 + whichC + 1, "are", contents
    If Len(contents) > 0 then allNull = False  ' any one of the non-blank elements sets to False
  Next whichC
  If allNull Then ... ' do some processing to move over the next 4.
Next whichT
End Sub 
```

# jquery - 使用 PHP、AJAX、JQUERY 和 JSON 的动态记分板

> ID：13878359
> 
> 赞同：3
> 
> 时间：2012-12-14T12:05:26.557
> 
> 标签：jquery, ajax, json

基本上我在[这里](http://test.bmx-tube.com/scores.php)创建了一个在线排行榜，返回前 100 名用户得分

如果用户点击刷新并且排名发生了变化，它将显示新的位置。我想做的是使用 AJAX、jQuery 和 JSON 在不刷新页面的情况下更新排名。

排行榜是通过关联 sql 查询填充并存储在 sql 变量中，我已经设法使用[这里看到的 JSON 格式的输出](http://test.bmx-tube.com/ajax.php)

```
 //Shows user details and the current top 100 ranks
while ($row = mysql_fetch_assoc($result)) {

    print json_encode ($row);
  } 
```

到目前为止一切顺利，使用 [Tinysort][3] 中的这个动画排序示例

```
function sort() {
    var $Ul = $('ul#leaderboard');
    $Ul.css({position:'relative',height:$Ul.height(),display:'block'});
    var iLnH;
    var $Li = $('ul#leaderboard>li');
    $Li.each(function(i,el){
        var iY = $(el).position().top;
        $.data(el,'h',iY);
        if (i===1) iLnH = iY;
    });
    $Li.tsort('h1:eq(0)',{order:'desc'}).each(function(i,el){
        var $El = $(el);
        var iFr = $.data(el,'h');
        var iTo = i*iLnH;
        $El.css({position:'absolute',top:iFr}).animate({top:iTo},500);
    });
} 
```

我相信我大部分时间都在那里，但我被困在下面的 poll() 函数上

```
poll();

function poll() {

    $.ajax({
        url: 'http://test.bmx-tube.com/ajax.php', // needs to return a JSON array of items having the following properties: id, score, facebook_id, username
        dataType: 'json',
        success: function(o) {
            for(i=0;i<o.length;i++) {
                if ($('#row-'+o[i].player_id).length == 0) {
                    // this id doesn't exist, so add it to our list.
                    $("#leaderboard").append('<li><h1 style="display:inline" player_id="row-' + o[i].player_id + '">' + o[i].score + '</h1> <img style="height:50px" src="http://graph.facebook.com/' + o[i].facebook_id + '/picture"/> ' + o[i].name + '</li>');
                } else {
                    // this id does exist, so update 'score' count in the h1 tag in the list item.
                    $('#row-'+o[i].player_id).html(o[i].score);
                }
            }
            sort();
        },
    }); 

    // play it again, sam
    var t = setTimeout(poll,3000);
} 
```

我试过改变所有的变量，但到目前为止还没有运气。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:54:38.350

那么首先你的 JSON 字符串是无效的。您的服务器实际上并没有返回对象数组。

你是`echo json_encode($yourArray);`用来创建 JSON 服务器端的吗？

以下是作为 JSON 字符串的正确对象数组的示例：

> ```
> {"array":[
>      {"object":"1","description":"this is an object"},
>      {"object":"2","description":"this is an object"},
>      {"object":"3","description":"this is an object"}
> ]} 
> ```

**注意：**您可以使用 JSONLint 验证 JSON 字符串：http: [//jsonlint.com/](http://jsonlint.com/)

您还可以使用 firebug 或 chrome 的检查器工具来查看对象是否有效，并以更直观的方式查看服务器返回的 JSON 字符串。

至于在拥有有效对象后访问对象，您可以使用 jQuery`.each()`轻松优雅地完成此操作。

例如：

```
$.ajax({
        url: 'http://test.bmx-tube.com/ajax.php',
        type: "get", cache:false,
        dataType: 'json',
        success: function(ranks) 
        {
            $(ranks).each(function(index, rank)
            {
                if($('#row-'+rank.player_id).length == 0) 
                {
                    // this id doesn't exist, so add it to our list.
                    $("#leaderboard").append('<li><h1 style="display:inline" id="row-' + rank.player_id + '">'+rank.score+'</h1> <img style="height:50px" src="http://graph.facebook.com/'+rank.facebook_id + '/picture"/> ' + rank.name + '</li>');
                } 
                else 
                {
                    // this id does exist, so update 'score' count in the h1 tag in the list item.
                    $('#row-'+rank.player_id).html(rank.score);
                }
            });
            //now sort
            sort();
        },
        error: function()
        {
            alert("Ajax error: could not access URL");
        }
    }); 
```

# 其他一些需要注意的事项

在将 GET 与 AJAX 一起使用时，禁用对定期更改的数据的缓存是一个好主意。这就是`type: "get", cache:false,`上面正在做的事情。

* * *

如果您需要任何进一步的帮助，请告诉我……不过，这应该为您指明正确的方向。

干杯，奥辛

# --- 编辑 1 ---

我现在意识到你打算用`player_id="row-'+rank.player_id+'"`. 这实际上应该是`id="row-'+rank.player_id+'"`

我已经修改了上面的代码以反映这一点。

# jsFiddle

这是一个 JSFiddle，展示了您将如何处理您正在尝试做的事情。我现在通过删除你的排序功能来简化事情，而只是使用了一个非常简单的排序。我还将生成的 HTML 分解为多个部分，以便您可以单独设置它们的样式并以更结构化的方式修改数据。 [http://jsfiddle.net/DigitalBiscuits/fKcKF/6/](http://jsfiddle.net/DigitalBiscuits/fKcKF/6/)

**注意：**由于 jsFiddle 的工作方式，我不得不生成一个模拟数据集并修改 AJAX 函数来加载它。在您的网站上，您当然会从您自己的服务器加载 JSON。

* * *

如果这对您有帮助，请**投票**。如果它解决了您的问题，请将此答案标记为**正确**。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:39:21.573

谢谢回复。我已经重新格式化了我的 JSON 输出并使用 JSONLint 进行验证，如果您单击上面的链接，您可以看到现在格式化的 JSON。如果其他人正在寻找类似的东西，我会这样做：

```
// Perform Query
$result = mysql_query($sql);

$json = array();

while($row = mysql_fetch_assoc($result)) {
    $json['rank'] = ($row['rank_number']);
    $json['player id'] = ($row['player_id']);
    $json['facebook id'] = ($row['facebook_id']);
    $json['name'] = ($row['name']);
    $json['score'] = ($row['score']);
    $data[] = $json;
}

echo json_encode($data); 
```

我回家后会尝试下一步。不过，有一件事仍然让我感到困惑——你提到我应该使用“data-player_id 而不是 player_id”，你的意思是在 Ajax 脚本中吗？

再次感谢 Oisin 的帮助，非常感谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T19:13:55.410

我已经尝试使用您的建议，并进行了一些修改，现在它似乎使用下面的代码完成了我想要的 98%：

```
<body>

<h1>This is just to test if it is connecting!</h1>
<ul id="leaderboard"></ul>

<script type="text/javascript">
jQuery(document).ready(function($) {

poll();

function poll() {

    $.ajax({
    url: 'ajax.php',
    type: "get", cache:false,
    dataType: 'json',
    success: function(ranks) 
    {
        $(ranks).each(function(index, rank)
        {
            if($('#row-'+rank.player_id).length == 0) 
            {
                // this id doesn't exist, so add it to our list.
                $("#leaderboard").append('<li><h1 style="display:inline"    data-player_id="row-' + rank.player_id + '">' + rank.rank +''+ rank.score +'</h1> <img  class="image" src="https://graph.facebook.com/' + rank.name + '/picture"/> ' + rank.name + '</li>');
            } 
            else 
            {
                // this id does exist, so update 'score' count in the h1 tag in the  list item.
                $('#row-'+rank.player_id).html(rank.score);
            }
        });
        //now sort
        sort();
    },
    error: function()
    {
        alert("Ajax error: could not access URL");
    }
}); 

    // play it again, sam
    var t = setTimeout(poll,3000);
}

function sort() {
    var $Ul = $('ul#leaderboard');
    $Ul.css({position:'relative',height:$Ul.height(),display:'block'});
    var iLnH;
    var $Li = $('ul#leaderboard>li');
    $Li.each(function(i,el){
        var iY = $(el).position().top;
        $.data(el,'h',iY);
        if (i===1) iLnH = iY;
    });
    $Li.tsort('h1:eq(0)',{order:'desc'}).each(function(i,el){
        var $El = $(el);
        var iFr = $.data(el,'h');
        var iTo = i*iLnH;
        $El.css({position:'absolute',top:iFr}).animate({top:iTo},500);
    });
}
});
</script>
</body> 
```

这只是一个使用 html 文件的测试调用，您可以在[此处](http://test.bmx-tube.com/leaderboard.html)查看输出。现在唯一的问题是（除了丑陋之外）不是轮询和重新安排（如有必要）用户的排名，它只是像这样添加到输出中

```
1
2
3
4
1
2
3
4 
```

等等。有任何想法吗？

再次感谢

# wcf - WCF Mutual SSL Security 什么时候使用什么证书？

> ID：13878362
> 
> 赞同：2
> 
> 时间：2012-12-14T12:05:41.753
> 
> 标签：wcf, wcf-security, x509certificate, ssl

我正在使用具有相互 SSL 安全性的 WCF 服务，我想检查我对何时使用什么证书的理解。

这个对吗？

1.  客户端将客户端公共证书交给服务器

2.  服务器将服务器公共证书交给客户端

3.  客户端发送使用服务器公共证书加密的请求

4.  服务器使用服务器私有证书解密请求

5.  服务器发送使用客户端公共证书加密的响应

6.  客户端使用客户端私有证书解密响应

或者它是否以其他方式工作？

![WCF 相互 SSL 证书](../Images/fa2d7f019b48c9b632ea1064b3337ee2.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T12:42:52.377

RFC 2246，第 7.4 节详细介绍了握手。就您的问题而言，其他版本的 SSL/TLS 的工作方式非常相似。

SSL/TLS 涉及两种类型的加密。非对称密钥加密和对称密钥加密。证书用于非对称密钥加密，仅在握手过程中使用。

证书使用的加密时间很短，在握手中使用。服务器公钥/私钥对（非对称密钥）用于保护会话密钥（对称密钥）。客户端公钥/私钥对用于向服务器证明客户端就是它所说的那个人。它知道这一点，因为客户端能够使用客户端私钥（只有它知道）加密数据（双方都知道的数据），并且服务器可以使用客户端公钥对其进行解密。

对于排序，我在下面的摘要列表中将您问题的部分加粗。[这是来自MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380513%28v=vs.85%29.aspx "MSDN TLS 握手总结")的一个很好的总结：

TLS 握手协议涉及以下步骤：

1.  客户端向服务器发送“Client hello”消息，以及客户端的随机值和支持的密码套件。
2.  服务器通过向客户端发送“Server hello”消息以及服务器的随机值来响应。
3.  **服务器将其证书发送**给客户端进行身份验证，并可能向客户端请求证书。服务器发送“Server hello done”消息。
4.  如果服务器已向客户端请求证书，则客户**端发送它**。
5.  客户端创建一个随机的 Pre-Master Secret 并使用服务器证书中的**公钥对其**进行加密，将加密的 Pre-Master Secret 发送到服务器。
6.  服务器接收到 Pre-Master Secret。服务器和客户端分别根据 Pre-Master Secret 生成 Master Secret 和会话密钥。
7.  客户端向服务器发送“更改密码规范”通知，以指示**客户端将开始使用新的会话密钥对消息进行散列和加密**。客户端还发送“客户端完成”消息。
8.  服务器收到“更改密码规范”并**使用会话密钥将其记录层安全状态切换为对称加密**。服务器向客户端发送“服务器完成”消息。
9.  客户端和服务器现在可以通过他们建立的安全通道交换应用程序数据。从客户端发送到服务器以及从服务器发送到客户端的所有消息都**使用会话密钥进行加密。**

WCF 请求/响应都将在客户端/服务器切换到使用会话密钥（对称密钥）进行加密之后。此时它不会使用证书私钥/公钥。

# android - NSString stringByAddingPercentEscapesUsingEncoding:?的Android（java）等效项

> ID：13878365
> 
> 赞同：2
> 
> 时间：2012-12-14T12:05:54.107
> 
> 标签：android, url, encoding, urlencode

我正在寻找与`stringByAddingPercentEscapesUsingEncoding`Java 中的方法等效的方法（适用于 Android）。

我试过`URLEncoder.encode()`了，但它没有做同样的事情。

我不希望“/”或“：”被“百分比转义”，但“–”（例如）应该是。

有任何想法吗？

编辑：

我只是不希望 http:// 变成 http%3a%2f%2f

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:20:15.113

好吧，如果您想离开`:`并且`/`不受影响，我认为您需要自己做，因为那不是有效的百分比编码，因此Java中已经存在解决方案的机会很小。我还检查了文档`stringByAddingPercentEscapesUsingEncoding`，它的行为也不像那样。

比较文档，`URLEncoder.encode(string, encoding)`和NS方法一模一样，所以你的要求确实很奇怪。无论如何，这是自定义代码：

```
public static String stringByAddingPercentEscapesUsingEncoding( String input, String charset ) throws UnsupportedEncodingException {
    byte[] bytes = input.getBytes(charset);
    StringBuilder sb = new StringBuilder(bytes.length);
    for( int i = 0; i < bytes.length; ++i ) {
        int cp = bytes[i] < 0 ? bytes[i] + 256 : bytes[i];
        if( cp <= 0x20 || cp >= 0x7F || (
            cp == 0x22 || cp == 0x25 || cp == 0x3C ||
            cp == 0x3E || cp == 0x20 || cp == 0x5B ||
            cp == 0x5C || cp == 0x5D || cp == 0x5E ||
            cp == 0x60 || cp == 0x7b || cp == 0x7c ||
            cp == 0x7d
            )) {
            sb.append( String.format( "%%%02X", cp ) );
        }
        else {
            sb.append( (char)cp );
        }
    }
    return sb.toString();
}

public static String stringByAddingPercentEscapesUsingEncoding( String input ) {
    try {
        return stringByAddingPercentEscapesUsingEncoding(input, "UTF-8");
    } catch (UnsupportedEncodingException e) {
        throw new RuntimeException("Java platforms are required to support UTF-8");
        // will never happen
    }
}

public static void main(String[] args) {
    System.out.println(
        stringByAddingPercentEscapesUsingEncoding("http://en.wikipedia.org/wiki/œäsd")
    );
    //http://en.wikipedia.org/wiki/%C5%93%C3%A4sd

} 
```

# vb.net - 函数返回字符串或布尔值

> ID：13878367
> 
> 赞同：3
> 
> 时间：2012-12-14T12:06:07.937
> 
> 标签：vb.net, string, winforms, function, boolean

我想要一个函数返回一个字符串或布尔值。像这样的东西：

```
Public Function GetString(Byval What As String) 'As... someting?
    If (What = "A") Then
        Return "String to return"
    Else if (What = "B") Then
        Return True
    End If

    Return False 'Nothing to return
End Function 
```

我现在该怎么做？如果我问喜欢

```
If GetString("A") Then
    MsgBox(GetString())
End IF 
```

...它返回一个字符串，当然它在将字符串转换为布尔值时会出错。我总是可以返回字符串并检查它的长度，但感觉很糟糕。或者我只是太喜欢 PHP 了？

但是有没有办法让它更像这样？如果我要求“B”，我知道它会返回一个布尔值，如果我要求“A”，我想提醒字符串是否存在等等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T12:09:53.730

> 我现在该怎么做？

你不能。

一个函数只能返回一种类型，不能返回多种。

您可以返回包含字符串和布尔值的自定义类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T16:22:57.617

我会使用一个数组列表。您可以在列表中存储您需要的任何类型，然后在返回时对其进行解析。如上所述，这确实不是最佳实践，但是当您必须完成工作时……最终证明了手段是正确的。不建议。

```
Public Function GetString(Byval What As String) As ArrayList
Dim b as boolean = True 
dim myArrayList as Arraylist = New ArrayList

    If (What = "A") Then
        ArrayList.Add("String to return")
    Else if (What = "B") Then
        ArrayList.Add(b)
    End If

    Return False 'Nothing to return
End Function 
```

**下面的概念证明：**

```
 Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim a As Boolean = True
        Dim myarraylist As ArrayList = New ArrayList

        myarraylist.Add(a)
        myarraylist.Add("g")

        Debug.WriteLine(myarraylist.GetType.ToString)
        Debug.WriteLine(myarraylist(0).GetType.ToString)
        Debug.WriteLine(myarraylist(1).GetType.ToString)

        If myarraylist(0).GetType.ToString = "System.string" Then
            Debug.WriteLine("Function returned a String")
        ElseIf myarraylist(0).GetType.ToString = "System.boolean" Then
            Debug.WriteLine("Function returned a Boolean")
        End If

    End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T12:12:41.010

您可以 return `Object`，但函数返回 2 种数据类型被认为是非常糟糕的形式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T20:02:32.570

正如[Oded](https://stackoverflow.com/a/13878425/467172)所说，你不能从一个函数返回多个参数。

从代码示例中不太清楚您在做什么，但您可以查看[通过引用传递参数](https://stackoverflow.com/a/1107133/467172)。正如那里的答案所指出的，通过引用传递参数对于：

> 当您想要返回操作的状态或状态以及操作的结果时。

这就是[`int.TryParse`](http://msdn.microsoft.com/en-us/library/f02979c7.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)类似方法的工作方式。

# c++ - %g 精度问题

> ID：13878369
> 
> 赞同：6
> 
> 时间：2012-12-14T12:06:19.613
> 
> 标签：c++, c

当我使用时`printf("%.6g\n",36.666666662);`，我期望输出`36.666667`。但实际输出是`36.6667`

我给出的格式有什么问题？我的目标是有 6 位小数

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-14T12:09:29.860

这是正确的行为。根据[cplusplus.com](http://www.cplusplus.com/reference/cstdio/printf/)：

> 对于 a、A、e、E、f 和 F 说明符：这是要在小数点**后打印的位数。**
> 
> 对于 g 和 G 说明符：这是要打印的最大有效位数。

如果您使用`f`而不是`g`then 它将按您的预期工作。

* * *

**示例代码**

```
#include <stdio.h>

int main(void) {
    printf("%.6g\n", 36.666666662);
    printf("%.6f\n", 36.666666662);
    return 0;
} 
```

**结果**

```
36.6667
36.666667 
```

在线查看它：[ideone](http://ideone.com/4ULNFl)。

# c++ - 我应该在哪里重新实现 QApplication::notify 函数？

> ID：13878373
> 
> 赞同：9
> 
> 时间：2012-12-14T12:06:34.560
> 
> 标签：c++, qt

我应该在哪里重新实现 QApplication::notify 函数？我的意思是，哪个班？我自己的类之一或 Qt 的一些类的子类并在那里做？我需要这个，因为从服务器下载文件时出现以下错误（小文件下载正常，但大文件会导致此消息）：

> Qt 已捕获从事件处理程序抛出的异常。Qt 不支持从事件处理程序中抛出异常。您必须重新实现 QApplication::notify() 并在那里捕获所有异常。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-14T12:26:32.423

只需子类化`QApplication`并在您的`notify(..)`方法中执行以下操作：

```
try {
    return QApplication::notify( receiver, event );
} catch ( std::exception& e ) {
    showAngryDialog( e );
    return false;
} 
```

然后在你的 main 函数中使用它而不是`QApplication`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-09T14:16:43.217

如前所述，创建您自己的应用程序对象，该对象继承自 QtApplication 并重新定义“通知”。这是要走的路。但是请务必使用此构造函数：

```
MyApplication::MyApplication(int &argc, char *argv[]); 
```

使用 '&' 将 argc 设置为引用很重要，因为它可以避免在某些平台上崩溃。

此处描述了完整的过程：http: [//qt-project.org/forums/viewthread/17731](http://qt-project.org/forums/viewthread/17731)

我自己的实现：

```
class MyApplication : public QApplication
{
public:
    MyApplication(int &argc, char ** argv);
    // ~MyApplication();
private:
    bool notify(QObject *receiver_, QEvent *event_);
}; 
```

（上述崩溃发生在 Ubuntu 13.10 64 位上，但在 12.04 64 位版本上不存在。）

# php - php 5.4.9 在 centos 上的 System_Daemon 和 pcntl

> ID：13878377
> 
> 赞同：1
> 
> 时间：2012-12-14T12:06:37.033
> 
> 标签：php, fork, daemon, pcntl

我一直在使用 System_Daemon 类来创建一个发送短信的守护进程。

该脚本与 php 5.3.8 完美配合，但现在，使用 php 5.4.9 它会崩溃，但不会创建错误或通知消息。

在 System_Daemon 类的函数 _fork 中，总是返回一个告诉它是父级的值

```
static protected function _fork()
{
    self::debug('forking {appName} daemon');
    $pid = pcntl_fork();

    if ($pid === -1) {
        // Error
        return self::warning('Process could not be forked');
    } else if ($pid) {
        // Parent
        self::debug('Ending {appName} parent process');
        // Die without attracting attention
        exit();
    } else {
        // Child
        self::$_processIsChild = true;
        self::$_isDying        = false;
        self::$_processId      = posix_getpid();
        return true;
    }
} 
```

所以，在 _summon() 函数中，它询问 _fork() 返回值的地方，总是等于 false。

我把这篇文章加红了，来自另一个有类似问题的成员： [PHP Pear system_daemon doesn't fork](https://stackoverflow.com/questions/11871500/php-pear-system-daemon-doesnt-fork)

我提出了他的建议，但没有成功。

有人可以帮我解决这个问题吗？

我对我的英语感到很抱歉，我努力解释自己。

# php - 考试形式问题

> ID：13878381
> 
> 赞同：-1
> 
> 时间：2012-12-14T12:06:52.640
> 
> 标签：php, forms

我真的是 php 新手。我尝试用 php 制作和检查项目，但我有一些问题。我有考试表格，这个表格有不同类型的输入。例如有些问题有组合框，有些问题有文本区域。我写了我的表单代码，我想了解如何将所有值从表单获取到数据库。

我的代码：

```
$question_id = $question_list['question_id'];
$answer_query = mysql_query("SELECT * FROM answers where question_id = $question_id ORDER BY answer_id ASC");
$total_answers = mysql_num_rows($answer_query);
if ($total_answers > 1)
{
<select name="answers[]" id="answers">                                          <option value="x">please select one</option>
while ($answer_list = mysql_fetch_array($answer_query)) {
<option value="<?PHP echo $answer_list['answer_id']; ?>"><?PHP echo $answer_list_list['answer_value']; ?></option>

else
{
while ($answer_list = mysql_fetch_array($answer_query)) {
<textarea name="answers[]" id="answers" rows="5" cols="100"></textarea> 
```

所以这是我的答案列出了我的考试表格的一部分。因此，当您看到组合框值从数据库中获取时，文本区域值将由用户填充。那么如何获取所有值（组合框中的数据库中的答案（选定值）和将由用户填充的文本区域值）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:18:21.250

将表单值获取到数据库：

HTML 表单必须类似于：

```
<form action="insert_into_db.php" method="POST">
    <input type="text" id="answer1" name="answer1"/>
    <textarea id="answer2" name="answer2"></textarea>
    <input type="submit" value="POST ANSWERS" />
</form> 
```

然后在 insert_into_db.php 中：

```
$answer1=$_POST['answer1'];
$answer2=$_POST['answer2']; 
```

# oracle - Oracle 10g 中如何重命名表列

> ID：13878383
> 
> 赞同：80
> 
> 时间：2012-12-14T12:07:02.250
> 
> 标签：oracle, oracle10g

我想知道：如何在Oracle 10g 中重命名表列？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-12-14T12:09:12.263

```
SQL> create table a(id number);

Table created.

SQL> alter table a rename column id to new_id;

Table altered.

SQL> desc a
 Name                                      Null?    Type
 ----------------------------------------- -------- -----------
 NEW_ID                                             NUMBER 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-08-29T08:06:51.333

查询的语法如下：

```
Alter table <table name> rename column <column name> to <new column name>; 
```

例子：

```
Alter table employee rename column eName to empName; 
```

要将不带空格的列名重命名为带空格的列名：

```
Alter table employee rename column empName to "Emp Name"; 
```

要将带空格的列重命名为不带空格的列名：

```
Alter table employee rename column "emp name" to empName; 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-12-14T12:10:44.143

```
alter table table_name rename column oldColumn to newColumn; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-29T07:43:16.097

假设 supply_master 是一个表，并且

```
SQL>desc supply_master;

SQL>Name
 SUPPLIER_NO    
 SUPPLIER_NAME
 ADDRESS1       
 ADDRESS2       
 CITY           
 STATE          
 PINCODE  

SQL>alter table Supply_master rename column ADDRESS1 TO ADDR;
Table altered

SQL> desc Supply_master;
 Name                   
 -----------------------
 SUPPLIER_NO            
 SUPPLIER_NAME          
 ADDR   ///////////this has been renamed........//////////////                
 ADDRESS2               
 CITY                   
 STATE                  
 PINCODE 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-30T12:35:03.177

```
alter table table_name 
rename column old_column_name/field_name to new_column_name/field_name; 
```

例子：`alter table student rename column name to username;`

# javascript - Javascript 全局变量数组

> ID：13878386
> 
> 赞同：1
> 
> 时间：2012-12-14T12:07:26.743
> 
> 标签：javascript, global-variables

我有一个 src js 文件，其中有这段代码。我需要在脚本中管理 est_bandwidth 数组，但即使我确定创建正确，我也无法在全局范围内看到。为什么？我怎样才能在函数之外看到数组？

```
var maxBandwidth = 8 * 1024 * 1024;        // 8 Mbps
var est_bandwidth = new Array();
function bandwidth(initial_bps, weight_f, weight_s){

this.bps = initial_bps;
this.weight_f = weight_f;
this.weight_s = weight_s;

}

bandwidth.prototype.calcWeightedBandwidth = function(_bps) {

this.bps = parseInt(((this.weight_f*this.bps) + (this.weight_s * _bps))/2)*0.9;  
    if( this.bps > maxBandwidth && maxBandwidth > 0) this.bps = maxBandwidth;
    est_bandwidth.push(this.bps/1024);
    return this.bps;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:24:42.463

在函数外部声明`est_bandwidth`变量以使其全局可用。利用`var est_bandwidth;`

# asp.net - 如何动态创建数据库表并插入查询选择的数据

> ID：13878387
> 
> 赞同：1
> 
> 时间：2012-12-14T12:07:35.530
> 
> 标签：asp.net, sql, database

我正在网站上工作，我需要根据分数查找用户排名。之前我通过 sql query 计算用户的分数和排名。

```
select * from (
    select
        usrid,
        ROW_NUMBER()
        OVER(ORDER BY (count(*)+sum(sup)+sum(opp)+sum(visited)*0.3) DESC) AS rank,
        (count(*)+sum(sup)+sum(opp)+sum(visited)*0.3 ) As score
    from [DB_].[dbo].[dsas]
    group by usrid) as cash
where usrid=@userid 
```

请不要更专注于查询，因为这只是为了解释我如何选择数据。

问题：现在我不能使用上面的查询，因为每次我使用排名时，它都需要从`dsas`表中选择排名，并且表的数据`dsas`每天都在增加，从而降低了我的网站速度。

我需要的是通过上述查询选择数据并插入另一个名为 score 的表中。我们可以做这样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:21:23.170

更好的解决方案是`score`在用户表中包含一个字段，或者有一个单独的分数表。每当您为用户添加新`sup`的`opp`、、或`visited`数据时，也会重新计算他​​们当时的分数。

然后要获得排名最高的用户，您将能够执行一个非常简单的`select`语句，按分数降序排序，并且只获取您想要的行数。它会非常快。

# android - Android Restlet 安全连接

> ID：13878388
> 
> 赞同：0
> 
> 时间：2012-12-14T12:07:39.753
> 
> 标签：android, security, connection, restlet

有没有人知道如何在 Android 应用程序中使用与 Restlet 库的安全连接？这甚至在 Restlet 中实现了吗？还有一些有用的链接将不胜感激:)

# mysql - MySQL 2 列索引

> ID：13878392
> 
> 赞同：0
> 
> 时间：2012-12-14T12:07:59.867
> 
> 标签：mysql, indexing

我在 2 列上有**唯一**索引：`name`（varchar）和`add_date`（日期）。
如果我在其上添加**非唯一**索引`name`并`add_date`增加选择速度？
`name`并且`add_date`分开可能不是唯一的。
**UPD**
MySQL 控制台`show columns`说：
`| Field | Type | Null | Key | Default | Extra |
| name | varchar(10) | NO | MUL | NULL | |
| time | date | NO | MUL | NULL | |`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:10:04.353

如果您分别选择每一个，它会加快速度。

但请确保您需要它。

# jquery - 使用 jquery 将相同的样式应用于外部标签

> ID：13878393
> 
> 赞同：0
> 
> 时间：2012-12-14T12:07:59.867
> 
> 标签：jquery, css

我和我有一张桌子：

```
<table> 
   <tbody>
     <tr>
         <td>
              <span style="background-color:red;color:white">One</span>
         </td>
         <td>
              <span style="background-color:green;font-size:10px">One</span>             
         </td>
         <td>
              <span style="background-color:blue">One</span>             
         </td>
    </tr>
  </tbody>
</table> 
```

我想将相同的样式应用`<span>`到外部`<td>`。我是 jquery 的新手。如何使用 jquery 实现这一点？
这样决赛桌就变成了：

```
<td style="background-color:red;color:white">
      <span style="background-color:red;color:white">One</span>
</td>
<td style="background-color:green;font-size:10px">
       <span style="background-color:green;font-size:10px">One</span>             
</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:12:02.180

```
 $("span").each(function(){
         $(this).parent().attr("style", $(this).attr("style"));
    }); 
```

[演示](http://jsfiddle.net/QaxKS/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T12:12:33.570

您可以使用`attr`方法：

```
$('td').attr('style', function(){
   return $('span', this).attr('style')
}) 
```

[http://jsfiddle.net/V5FuF/](http://jsfiddle.net/V5FuF/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T12:13:01.890

```
$("span").each( function() {
var color = $(this).attr("style");
$(this).parent("td").attr("style", function() {
return color;
}
}); 
```

[http://jsfiddle.net/ns9rh/](http://jsfiddle.net/ns9rh/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T12:18:53.400

```
$("span").each(function(){
         $(this).parent().attr("style", 
         $(this).attr("style"));
    }); 
```

# asp.net - 如何在页面加载事件下检查aspx页面的html表单是否已填充

> ID：13878399
> 
> 赞同：0
> 
> 时间：2012-12-14T12:08:42.713
> 
> 标签：asp.net, forms

我有一个 aspx 页面，其中我有 html 表单，其中包含两种输入类型的文本（文本框）和一种输入类型的提交（按钮）。在此页面的 Page_load() 方法下的代码隐藏中，我想检查是否提交了表单？我怎样才能做到这一点 ？或者我如何检查文本框是否已填充？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:22:29.793

页面已加载，因此无需签入。您的`Page_load`所有控件都是 HTML 而不是 asp 控件，因此您可以使用客户端脚本验证您的文本框。例如`jquery`；`javascript`.Validation 已完成，您必须通过您的表单提交表单，您必须使用 mediater like `webservice`或`webmethod`将 html 页面连接到数据库。

# kml - 如何制作png图像谷歌地球 合规？

> ID：13878402
> 
> 赞同：0
> 
> 时间：2012-12-14T12:08:56.153
> 
> 标签：kml, google-earth

当我使用标准的 Google Earth 地标图标时，我可以设置 ARGB 颜色。但是，当我使用自己的 png 图片时，`<color></color>`标签没有影响，颜色保持不变。

我需要对我的图片应用什么才能使其符合`color`标签？我曾尝试使用 SVG，但这根本没有显示。

```
<IconStyle>
  <scale>0.75</scale>
  <color>ffffffff</color>  <= works with the GM icons, but not with mine
  <Icon>
    <href>http://...myimage.png</href>
  </Icon>
</IconStyle> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:46:33.013

白色`ffffffff`是默认颜色 - 意味着没有颜色混合。[颜色标签](https://developers.google.com/kml/documentation/kmlreference#color)的格式为*aabbggrr*而不是 ARGB。指定非白色以与图像的 RGB 颜色值混合（或混合）。

除非您还想混合背景颜色，否则在图标具有透明背景的情况下效果最佳。一些技巧包括使用 3 色图标：0=透明背景、1=黑色轮廓和 2=纯白色填充颜色。这很好地融入了 Google 地球。例如，看看 Google 地球[http://maps.google.com/mapfiles/kml/shapes/arrow.png](http://maps.google.com/mapfiles/kml/shapes/arrow.png)中的箭头图标。

这是一个示例，橙色 RSS 提要图标上的白色与绿色混合，显示图标混合为绿色。

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
    <Placemark>
        <name>Placemark</name>
        <description><![CDATA[icon: <br/>
         <img src="http://www.feedicons.com/images/feed-icon-28x28.png">]]>
        </description>
        <Style>     
            <IconStyle>
                <color>ff00ff00</color>
                <Icon>
                    <href>http://www.feedicons.com/images/feed-icon-28x28.png</href>
                </Icon>                    
            </IconStyle>
        </Style>
        <Point>
            <coordinates>48.11427038011192,29.00801197928001</coordinates>
        </Point>
    </Placemark>
</kml> 
```

# android - 如何在android中启用不同的语言输入

> ID：13878404
> 
> 赞同：1
> 
> 时间：2012-12-14T12:09:06.687
> 
> 标签：android

在 DDMS 中运行我的应用程序时，我无法在 AutoCompleteTextView 中输入俄语符号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:11:20.920

不确定您的要求是什么，但如果您想支持多种语言，您可以针对您计划定位的不同语言环境使用替代资源。

看：

[http://developer.android.com/guide/topics/resources/localization.html](http://developer.android.com/guide/topics/resources/localization.html)

如果要更改模拟器中的语言，请执行以下操作：

打开菜单=>设置=>语言和键盘=>选择语言环境=>从此设置任何语言环境

# .net - 导入 IronPython 的嵌入式库

> ID：13878408
> 
> 赞同：3
> 
> 时间：2012-12-14T12:09:13.720
> 
> 标签：.net, ironpython

我通过 NuGet 将 IronPython 标准库添加到我的 c#.net4 项目中，后来得到了一些参考（IronPython、IronPython.Modules、IronPython.SQLite、IronPython.Wpf、Microsoft.Dynamic、Microsoft.Scripting 等）和“Lib”文件夹包含python模块。现在我正在尝试在我的 file.py 中导入“urllib”模块，但收到 ImportException（没有名为 urllib 的模块）。如何使用 urllib？我应该将 Lib 文件夹复制到项目输出目录还是做其他事情？

**UPD**：如果我将所需的模块复制到项目输出目录，那么程序可以在没有设置路径的情况下正常工作。我可以使用“urllib”作为嵌入式资源还是在运行时导入它？

谢谢！

资料来源：

```
public static void Main(string[] args)
{
    var url = new Uri("www.microsoft.com");
    var r = PythonHelper.Get(url);
}

public static class PythonHelper
{
    public static string Get(Uri url)
    {
        var programPath = @"PySources\GetPage.py";
        var py = new Py(programPath);
        py.Scope.SetVariable("url", url.ToString());
        py.Source.Execute();
        var result = py.Scope.GetVariable<string>("result");
        return result;
    }

    private class Py
    {
        public ScriptScope Scope { get; private set; }
        public ScriptSource Source { get; private set; }

        public Py(string pyPath)
        {
            var pyEngine = Python.CreateEngine();
            Scope = pyEngine.CreateScope();
            Source = pyEngine.CreateScriptSourceFromFile(pyPath);
        }

        public void Execute()
        {
            Source.Execute(Scope);
        }
    }
}

GetPage.py:
#!/usr/bin/env python
# -*- coding: windows-1251 -*-
#coding=windows-1251
#encoding=windows-1251

import clr
clr.AddReference("IronPython")
clr.AddReference('IronPython.Modules')

import urllib

user_agent = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like     Gecko) Chrome/23.0.1271.95 Safari/537.11"
headers = { 'User-Agent' : user_agent }
result = urllib.urlopen(url, '' ,headers).read().decode('utf-8') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T17:06:36.607

您可以将 Lib 文件夹复制到输出目录。如果您希望它在不同的目录中，您可以使用它`ScriptEngine.SetSearchPaths()`来完全控制库路径。

另一种选择是将标准库放在一个 .zip 文件中并使用 添加`ScriptEngine.SetSearchPaths()`，这至少减少了要发送的文件数量。

# javascript - 如何从MVC中的Javascript代码将值传递给控制器

> ID：13878418
> 
> 赞同：2
> 
> 时间：2012-12-14T12:09:36.623
> 
> 标签：javascript, asp.net-mvc, devexpress

其实我有这样的场景：

我通过 Javascript 获取 GridView 中检查记录的值。现在我需要将这些值发送到控制器以删除这些记录。

```
<script type="text/javascript">
    $(function OnDelete() {
        $('#btn_Delete').click(function ()
        {
            gvPaging.PerformCallback();
        });
    });

    function OnBeginCallback(s, e) {
        var selectedValues = s.GetSelectedKeysOnPage();
        e.customArgs["ID"] = "";
        for (var i = 0; i < selectedValues.length; i++) {
            e.customArgs["ID"] += selectedValues[i] + ',';
        }
    }
</script> 
```

我的 GridView 是这样的：

```
<% 
Html.DevExpress().GridView(
    settings =>
    {
        settings.Name = "gvPaging";
        settings.CallbackRouteValues = new { Controller = "GridView", Action = "PagingPartial" };
        settings.Width = Unit.Percentage(100);
        settings.KeyFieldName = "ID";

        settings.CommandColumn.ShowSelectCheckbox = true;
        settings.CommandColumn.SetHeaderTemplateContent(c =>
        {
            Html.DevExpress().CheckBox(settingsCheckBox =>
            {
                settingsCheckBox.Name = "cbSelectAll";
                settingsCheckBox.Name = "Select All";
                settingsCheckBox.Properties.ValueType = typeof(bool);

                settingsCheckBox.Properties.ClientSideEvents.CheckedChanged = string.Format("function(s, e) {{ if(s.GetChecked()) {0}.SelectRows(); else {0}.UnselectRows(); }}", settings.Name);
                settingsCheckBox.Checked = c.Grid.VisibleRowCount == c.Grid.Selection.Count;
            }).Render();
        });
        settings.SettingsBehavior.AllowSelectByRowClick = true;
        //settings.Columns.Add("ID");
        settings.Columns.Add("Name");
        settings.Columns.Add("EmailID");
        settings.Columns.Add("MobileNumber");
        settings.Columns.Add("Address");
        settings.SettingsPager.Position = PagerPosition.Bottom;
        settings.SettingsPager.FirstPageButton.Visible = true;
        settings.SettingsPager.LastPageButton.Visible = true;
        settings.SettingsPager.PageSizeItemSettings.Visible = true;
        settings.SettingsPager.PageSizeItemSettings.Items = new string[] { "10", "20", "50" };

        settings.SettingsEditing.AddNewRowRouteValues = new { Controller = "GridView", Action = "InlineEditingAddNewPartial" };
        settings.SettingsEditing.UpdateRowRouteValues = new { Controller = "GridView", Action = "InlineEditingUpdatePartial" };
        //settings.SettingsEditing.DeleteRowRouteValues = new { Controller = "GridView", Action = "InlineEditingDeletePartial" };
        settings.SettingsEditing.Mode = GridViewEditingMode.EditFormAndDisplayRow;
        //settings.SettingsBehavior.ConfirmDelete = true;

        settings.Settings.ShowFilterRow = true;
        settings.Settings.ShowFilterRowMenu = true;
        settings.CommandColumn.Visible = true;
        settings.CommandColumn.ClearFilterButton.Visible = true;
        settings.CommandColumn.NewButton.Visible = true;
        //settings.CommandColumn.DeleteButton.Visible = true;
        settings.CommandColumn.EditButton.Visible = true;
        settings.Settings.VerticalScrollBarMode = ScrollBarMode.Visible;
        //settings.ClientSideEvents.SelectionChanged = "SelectionChanged";
        settings.ClientSideEvents.BeginCallback = "OnBeginCallback";

    })
    .Bind(Model)
    .Render(); 
```

%>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:54:38.713

您可以在脚本中使用 AJAX。

像这样的东西

```
$.ajax({
         url: 'Your method in controller which will delete the records',
         type: 'POST',
         data: ' data which you want to send to controler ',
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:06:08.727

在您的控制器中使用此语句来检索值：`Request.Params["ID"]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-20T12:50:27.450

考虑以下示例，我正在使用 for 循环表数据触发带有列表值的脚本。

```
<a href='#' class="gridEdit"  onclick="javascript:return DeleteServiceOut('@Model.EmployeeInformationList[i].GEmployeeGenInfoID.ToString()');"></a> 
```

从 MVC 中的 Javascript 代码向控制器传递值的函数

```
<script>
 function DeleteServiceOut(GEmployeeId) {

        window.location = "/PMS/Payroll/ServiceOutAdd/ServiceOutDelete/" + GEmployeeId;
        return false;
    }

</script> 
```

进入控制器

```
 public ActionResult ServiceOutDelete(string id, ServiceOutModels model)
        {
           // id will contailn the value of parameter
           // AS you want
            return View("ServiceOutViewDetails", model);
        } 
```

# facebook - Facebook 网站 URL 和墙分享

> ID：13878428
> 
> 赞同：0
> 
> 时间：2012-12-14T12:10:11.530
> 
> 标签：facebook, settings, share

是否以与给定应用程序的站点 URL 设置相关的任何形式共享墙（通过 FB JS API 执行）？用户实际上并没有使用该工具登录我们的网站——他们只是通过我们设置的应用程序在他们的墙上分享 URL。

我们正在寻找有关该主题的专家确认，因为我们希望更改站点 URL 以支持新的登录提供程序包装器 (Janrain)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:48:17.290

不，即使未提供站点 URL，您也可以共享 URL。但该域应列在“应用程序域”框中。这应该不是问题，因为它支持多个域。一个例子是 myapps.mydomain.com 和 myapps.myotherdomain.com 都列在那里。我认为这在你的情况下是可以的。

# gruntjs - 如何加载两个具有相同名称的 grunt 任务？

> ID：13878429
> 
> 赞同：17
> 
> 时间：2012-12-14T12:10:13.073
> 
> 标签：gruntjs, yeoman

我在一个项目中使用 yeoman。

基本上它工作正常，但在构建过程中我想将我的图像文件夹移动到其他地方。

所以我加载了`grunt-contrib-copy`让我这样做的任务。但不幸的是，这与 yeoman 内置的复制任务相冲突。

有没有办法`grunt-contrib-copy`在我的别名中`Gruntfile.js`使用它们，以便我可以同时使用它们？

```
grunt.loadNpmTasks('grunt-contrib-copy');

//Here I need to use "copy" again but not referencing the yeoman task but the grunt-contrib-copy task.
grunt.registerTask('build','intro clean coffee compass mkdirs concat css min replace copy time'); 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-14T14:31:29.217

[grunt.renameTask()](http://gruntjs.com/api/grunt.task#grunt.task.renametask)可能会在这里帮助你。试试这个：

```
// temporarily rename yeoman's copy task
grunt.renameTask('copy', 'yeomanCopy');
// load 'copy' from grunt-contrib-copy
grunt.loadNpmTasks('grunt-contrib-copy');
// rename it to something other than 'copy'
grunt.renameTask('copy', 'myCopy');
// rename yeoman's task back to its original name so nothing breaks
grunt.renameTask('yeomanCopy', 'copy');

// now use 'myCopy' for your purposes
// ... 
```

# javascript - JavaScript 静态继承

> ID：13878432
> 
> 赞同：0
> 
> 时间：2012-12-14T12:10:20.517
> 
> 标签：javascript

在这个[JSBin](http://jsbin.com/odirab/6/edit)的代码中，我如何让 MultiPage 继承 Tool 的静态成员，以便我们可以编写 MultiPage.Nullo 或 MultiPage.datacontext？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:34:06.550

> 如何让 MultiPage 继承 Tool 的静态成员

这是不可能的。一个函数[只能继承自`Function.prototype`](https://stackoverflow.com/a/11003365/1048572)，而两者之间不能继承。

但是，没有必要这样做。[JavaScript 不是基于类的语言](https://stackoverflow.com/a/13418980/1048572)，对于您的实际问题有更好的解决方案。您还没有告诉我们您的用例，但标准解决方案是将属性放在`prototype`对象上，或者只是`Tool.datacontext`从`Multipage`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:42:46.713

如果你想继承静态成员，除了将 Tool 的属性复制到 MultiPage 上之外别无他法。使用 jQuery 或 Underscore 很容易：

```
$.extend(MultiPage, Tool);
_.extend(MultiPage, Tool); 
```

`extend`如果您不想添加任何实用程序库，您可以轻松地制作自己的：

```
function extend(target, source) {
    for(var key in source) {
        if (source.hasOwnProperty(key) && key !== 'prototype') {
            target[key] = source[key];
        }
    }
} 
```

您不能简单地继承静态属性的原因是构造函数本身不能具有除`Function`. 因此，构造函数`prototype`（不是它自己的`prototype`属性，而是`Function.prototype`直接扩展构造函数对象的）始终`Function.prototype`在同一全局范围内的每个函数之间共享。

### 更新

截至 2016 年，主流浏览器都支持[Object.setPrototypeOf](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf)。但是，正如您在链接文档中看到的那样，此功能破坏了各种引擎优化。我不推荐使用这个，因为你通常可以构建你的程序来避免它的缺点。

# java - 迭代（可变）文件系统的子树

> ID：13878435
> 
> 赞同：0
> 
> 时间：2012-12-14T12:10:25.897
> 
> 标签：java

**介绍**

我需要在文件系统子树上创建一个迭代器（例如，一个迭代器，给定一个文件夹，以深度优先搜索的顺序返回其中包含的所有文件，每个`next`方法调用一个）。

子树的内容可能会随着时间而改变，例如，有可能（并且很可能）在迭代仍在进行时，将创建新的子文件夹和文件，而删除一些现有的子文件夹和文件。

幸运的是，以下条件是可以接受的：

*   实现可以（但如果不这样做会更好）跳过新创建的文件（例如，在迭代开始后产生的文件）和文件夹（以及这些文件夹中的文件），甚至只是其中的一些，

*   实现可以（但如果不这样做会更好）列出已删除的文件（例如，不再存在但在迭代开始时存在的文件），甚至只是其中的一些。

* * *

**动机**

为了让您更好地了解这些决策背后的原因，我想简要介绍一下整个应用程序。

它是一个类似于生产者/消费者的应用程序。Web 服务（生产者）将接受文件并将它们存储在本地文件系统中，位于子树层次结构中的某个位置。

另一个应用程序（消费者）将处理这些文件。每隔几分钟就会通过 CRON 定期调用它。启动时，它将爬取子树，查找所有文档，并将它们交给处理（如果相关，则交给另一个应用程序）。处理完文档后，它会从本地文件系统中删除。

问题是生产者和消费者将同时运行。此外，消费者应用程序的多个实例也可能同时运行。例如，当消费者爬取子树时，可能会创建新文档而删除现有文档。甚至子目录的结构也可能会被修改。

因为爬虫每隔几分钟就会定期启动，所以它是否消耗了当时所有可用的文档（尤其是那些在消费者运行时产生的文档）并不重要。唯一重要的是生成的文档最终被消费（具有相当小的延迟）。这就是上面列出的放松条件的来源。

* * *

**可能的解决方案**

我首先想到我会在启动时将子树的快照创建到内存中（例如要处理的文档列表），然后遍历它们。见[我的另一篇文章](https://stackoverflow.com/questions/13877288/iterator-over-a-snapshot-of-a-filesystem-subtree/13877974#13877974)。但是层次结构可能非常大（甚至每几个小时处理数万个文档），我认为这种方法可能具有不可接受的性能要求（内存和速度）。

* * *

**你将如何实现这样的迭代器？**

* * *

非常感谢您的帮助，并为这篇文章的篇幅过长感到抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:24:34.330

由于您不能直接使用 JDK 7，您仍然可以看看他们是如何做到的：[FileTreeWalker](http://j7a.ru/_file_tree_walker_8java_source.html)

# java - 如何从用户输入中填充字符数组？

> ID：13878437
> 
> 赞同：-1
> 
> 时间：2012-12-14T12:10:37.693
> 
> 标签：java, arrays, char

我用谷歌搜索了很多，什么也没找到！有人可以帮我从用户输入中填充一系列字符吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T12:21:26.167

> 我用谷歌搜索了很多，什么也没找到！有人可以帮我从用户输入中填充一系列字符吗？

我的谷歌说，试试这个..

**选项1 ：**

```
 import java.io.*;
   class array {

    public static void main(String args[]) throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        String tmp = br.readLine();
        int length = tmp.length();
        char c[] = new char[length];
        tmp.getChars(0, length, c, 0);
        CharArrayReader input1 = new CharArrayReader(c);
        int i;
        System.out.print("input1 is:");
        while ((i = input1.read()) != -1) {
            System.out.print((char) i);
        }

    }
} 
```

**选项 2：**

```
class array
{
    public static void main(String args[])
    {
        Scanner sc=new Scanner(System.in);
        System.out.println("Please enter elements...");
        char[] a=sc.next().toCharArray();
        System.out.println("Array elements are : ");
        for (int i=0;i<a.length;i++)
            System.out.println(a[i]);
    }
} 
```

*但是，在这种情况下，它不会接受空格字符之后。*

**在开始使用 Java 编码之前，您必须了解以下术语：**

[缓冲阅读器](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedReader.html)

[异常处理](http://en.wikipedia.org/wiki/Exception_handling)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-19T10:11:07.033

//更多乐趣 ...............

```
public class test3 {

    public static void main(String args[])
    {
        char crr[]=new char[100];
        Scanner inputs=new Scanner(System.in);
        System.out.println("enter the string");
        for(int i=0;i<10;i++)
        {
            char c=inputs.next().charAt(0);
            crr[i]= c;
        }
        for(int i=0;i<10;i++)
        {
            System.out.println(" " +crr[i]);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T12:50:35.997

如果您希望能够阅读一个单词并将其拆分为可以使用的字符数组。

```
char[] chars = scanner.next().toCharArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-29T05:47:43.633

```
 /* program below takes an string from user, splits into character and display as array of characters. */  

     package com.demo.mum;

        import java.io.BufferedReader;
        import java.io.IOException;
        import java.io.InputStreamReader;

        /**
         * @author cyruses
         * 
         */

        public class CharacterArray {

            public static void main(String args[]) throws IOException {
                BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
                System.out.println("Enter the string:");
                String tmp = br.readLine();
                int strLen = tmp.length();
                char c[] = new char[strLen];
                for (int i = 0; i < c.length; i++) {
                    c[i] = tmp.charAt(i);
                }
                System.out.println("Displaying character Array");
                for (int i = 0; i < c.length; i++) {
                    System.out.println(c[i]);
                }
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-26T11:07:33.443

这段代码是我的线性搜索程序的一部分，我解决了我面临的问题。但我想解释为什么我在 charAt(x) 上而不是在 charAt(0) 上出现异常。

```
 System.out.println("Enter Your Data in character");
        for(x=0;x<char_array.length;x++)
        {
        Scanner input_list_char = new Scanner(System.in);
        char_array[x]=input_list_char.next().charAt(0); //it works
        char_array[x]=input_list_char.next().charAt(x); // give me exception 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-26T21:05:13.597

从用户输入字符数组

```
import java.io.*;
class CharArrayInput {

public static void main(String args[]) throws IOException {

    /*using InputReader and BufferedReader class 
      to fill array of characters from user input.
    */
    InputStreamReader ir = new InputStreamReader(System.in);
    BufferedReader br = new BufferedReader(ir);
    //Take size of array from user.
    System.out.println("Please enter size of array")
    int n = Integer.parseInt(br.readLine());
    //Declare a character array
    char arr[] = new char[n];
    //loop to take input of array elements
    for(int i=0; i < n; i++){
    arr[i] = (char)br.read();
    }   

   }
  } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-22T16:37:04.893

您不能使用 nextChar() 直接在 charArray 中输入，因为 Java 中没有 nextChar()。您首先必须在 String 中输入，然后一个一个地获取字符。

```
import java.util.*;
class CharArray{
    public static void main(String[] args)
    { 
    Scanner scan=new Scanner(System.in); 

    char ch[]=new char[11];

    String s = scan.nextLine();

    for(int i=0;i<=10;i++)  
    ch[i]=s.charAt(i);  //Input in CharArray

    System.out.println("Output of CharArray: ");
        for(int i=0;i<=10;i++) 
        System.out.print(ch[i]); //Output of CharArray
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-02T12:34:38.540

如果用户以字符串的形式打印输入，这将不起作用，例如...

```
5 8
########
#..#...#
####.#.#
#..#...#
######## 
```

**在这种情况下，如果我们使用`char c=inputs.next().charAt(0);`它只会占用每个字符串的第一个，**

使用会更好

```
 *Scanner s = new Scanner(System.in);
    int n = s.nextInt();
    int m = s.nextInt();
    char[][] in = new char[m+1][n+1];
    for(int i = 0;i<n;i++) {
        String st = s.next();
        for(int j = 0;j<m;j++) {
            in[i][j] = st.charAt(j);
        }
    }* 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-05T06:09:29.373

```
 class charinarray
    {
    public static void main(String args[])
    {
    Scanner input=new Scanner(System.in);
    System.out.println("Please enter char elements...");
    char[] a=input.next().toCharArray();
    System.out.println("Array char elements are : ");
    for (int i=0;i<a.length;i++)
    {
        System.out.println(a[i]);
    }
    }
    } 
```

# angularjs - Angular.js - 元素的搜索范围

> ID：13878438
> 
> 赞同：0
> 
> 时间：2012-12-14T12:10:39.683
> 
> 标签：angularjs

我有一个包含元素名称的输入字符串（我的意思是“名称”属性）。如何在 $scope 中搜索具有给定名称的元素？

我想做的是制定一个参数化指令

```
<select bindslave="shipping_state" name="billing_state" ng-model="order.billing_state" ng-options="i.name for i in billingRegions" value="{{ order.billing_state.id }}"></select>
<select name="shipping_state" ng-model="order.shipping_state" ng-options="i.name for i in shippingRegions" value="{{ order.shipping_state.id }}"></select> 
```

目前，CoffeeScript 中的代码如下所示：

```
app_directives.directive "bindslave", ->
  require: "ngModel"
  link: (scope, element, attrs, ctrl) ->
    ctrl.$parsers.unshift (viewValue) ->
      if scope.sameAsBilling
        switch attrs['bindslave']
          when "shipping_state"
            scope.order.shipping_state = viewValue
          when "shipping_country"
            scope.order.shipping_country = viewValue
      viewValue 
```

我想摆脱 switch 语句并搜索具有 name==attrs['bindslave'] 的元素

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T04:23:15.453

> 如何在 $scope 中搜索具有给定名称的元素？

给你的表单一个名字，然后 Angular 会以给定的名字将 FormController 发布到当前范围。如果您的表单元素有名称，它们也可用：

```
<form name="myForm" novalidate>
<select bindslave="shipping_state" name="billing_state" ...>
<select name="shipping_state" ...> 
```

然后您可以访问有关表单元素的信息：

```
console.log($scope.myForm.billing_state, $scope.myForm.shipping_state); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:28:32.463

我仍然不确定您要完成什么，但是您为什么不将开关替换为以下内容：

```
scope[attrs.bindslave] = viewValue 
```

然后在 HTML 上使用正确的引用：

```
<select bindslave="order.shipping_state" ... ></select> 
```

# windows-phone-7 - 是否可以在 Windows 7 上的 VS11 中为 Windows Phone 7.5 开发？

> ID：13878441
> 
> 赞同：3
> 
> 时间：2012-12-14T12:10:48.777
> 
> 标签：windows-phone-7, visual-studio-2012

我即将开始开发一个针对 Windows Phone 7.5 的 Windows Phone 项目。

对于其他项目，我使用 Visual Studio 11，但是当我尝试加载 WP 7 项目时，它们显示为不可用。显然，它们是“ *...与当前版本的 Visual Studio 不兼容*”（我在解决方案资源管理器中将鼠标悬停在项目节点上时收到的消息）。

我能够在 Visual Studio 2010 Express for Windows Phone 中打开项目（可[从本页面](https://dev.windowsphone.com/en-us/downloadsdk)以及 7.1 SDK 包获得），但我更喜欢在 VS11 中工作。我很难相信没有办法做到这一点，但我一直无法找到任何明确的答案；

任何有关如何使 VS11 在 Windows 7 中支持 WP 7 项目的指示或想法（如果可能的话）将不胜感激。

**更新：**我忘了提及一个关键细节：我使用的是 Windows 7，它禁止我使用 Windows 8 SDK（需要 Windows 8）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T12:14:05.420

是的，您可以在同一个 IDE（Visual Studio 2012）中开发 Windows Phone 7.5 和 8 应用程序。只需[下载](https://dev.windowsphone.com/en-us/downloadsdk)并安装**SDK 8.0**即可。

**更新：**在 Windows 7 上，请尝试以下解决方案：

1.  在 git-hub 上下载[该文件夹](https://github.com/Xlab/wp8sdk-installer/tree/master/bin)的所有文件
2.  拖放`WPexpress_full.exe`它`wp8sdk_installer.exe` ![在此处输入图像描述](../Images/bee37903f8bfb29a91c1efec2fd73e38.png)
3.  跟着白兔子

但要为一些坏消息做好准备：

*   Windows Phone 8 模拟器不起作用
*   适用于 Windows Phone 8 的 Blend 不起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:45:36.043

显然这[似乎是不可能的](http://msdn.microsoft.com/en-us/library/vstudio/hh266747%28v=vs.110%29.aspx)。

引用链接页面：

```
Windows Phone: You can’t open this project in Visual Studio 2012 
               because it doesn't support the project type. 
```

我假设一旦我们切换到 Windows 8，这将会改变，并且能够使用 Windows 8 SDK，正如 andrewpey 所提到的。

# c++ - 覆盖纯虚拟运算符

> ID：13878448
> 
> 赞同：5
> 
> 时间：2012-12-14T12:11:24.473
> 
> 标签：c++, operators, overwrite, pure-virtual

我正在尝试创建一个计数器接口，强制所有派生类实现此接口：

```
class CounterInterface 
{ 
public:
  virtual CounterInterface& operator ++ () = 0;
  virtual CounterInterface  operator ++ (int) = 0;
  virtual CounterInterface& operator -- () = 0;
  virtual CounterInterface  operator -- (int) = 0;
  virtual bool operator == ( const CounterInterface o ) const   = 0;
  virtual operator uint32_t () const = 0;
  virtual void reset() = 0;
}; 
```

但是，仅包含此类定义会导致以下错误。

不幸的是 post inc 不能被定义为参考。

任何想法如何解决这个鸡/蛋问题？

```
CounterInterface.h:25:29: error: invalid abstract return type for member function ‘virtual libceis::CounterInterface libceis::CounterInterface::operator++()’
CounterInterface.h:22:8: note:   because the following virtual functions are pure within ‘libceis::CounterInterface’:
CounterInterface.h:25:29: note:   virtual libceis::CounterInterface libceis::CounterInterface::operator++()
CounterInterface.h:26:29: note:   virtual libceis::CounterInterface libceis::CounterInterface::operator++(int)
CounterInterface.h:27:29: note:   virtual libceis::CounterInterface libceis::CounterInterface::operator--()
CounterInterface.h:28:29: note:   virtual libceis::CounterInterface libceis::CounterInterface::operator--(int)
CounterInterface.h:29:17: note:   virtual bool libceis::CounterInterface::operator==(libceis::CounterInterface) const
CounterInterface.h:30:12: note:   virtual libceis::CounterInterface::operator uint32_t() const
CounterInterface.h:31:17: note:   virtual void libceis::CounterInterface::reset()
CounterInterface.h:26:29: error: invalid abstract return type for member function ‘virtual libceis::CounterInterface libceis::CounterInterface::operator++(int)’ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T12:17:20.510

你运气不好。您希望返回一个具有调用函数的对象的*动态类型的值。*您不能：C++ 中的（非指针）值不能是协变返回类型，因为 C++ 中的按值返回不能具有与其静态类型不同的动态类型。

这与实现 virtual 的问题基本相同`clone()`。它不能按值返回。即使`CounterInterface`不是抽象类，您也会遇到麻烦，但是当代码无法编译时，您不会注意到它，而是在返回的对象被切片时注意到它。

您可以做的是扩展设计。编写一个类，该类包含一个（智能）指向`CounterInterface`. 这种类型可以按值返回，因此可以实现你想要的接口。它可以通过调用一个纯虚函数`CounterInterface *clone()`（或`unique_ptr<CounterInterface> clone()`）来实现这一点，该函数分配并返回一个实现接口的具体类的新实例。对于作为虚拟函数工作的运算符，您可以将它们保持打开状态`CounterInterface`，并且您的包装类可以调用，或者您可以在虚拟接口中重命名它们：

```
class Counter {
    unique_ptr<CounterInterface> ctr;
  public:
    Counter(unique_ptr<CounterInterface> c) : ctr(std::move(c)) {}
    Counter(CounterInterface *c) : ctr(c) {}
    Counter &operator++() { 
        ctr->increment(); // or ++(*ctr)
        return *this; 
    }
    Counter operator++(int) {
        Counter ret(ctr->clone());
        ctr->increment();
        return ret;
    }
    operator uint32_t() const {
        return *ctr;
    }
    void reset() {
       return ctr->reset();
    }
}; 
```

虚拟`operator==`是一个完全独立的问题，我将留给网站上的其他问题。

顺便说一句，`CounterInterface`需要一个虚拟析构函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T12:16:17.913

你不能用纯虚成员函数来实例化一个类。由于您无法创建它们，因此您也无法按值返回它们，就像您在

```
virtual CounterInterface  operator ++ (int) = 0;
virtual CounterInterface  operator -- (int) = 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T12:17:07.377

首先你要更换

```
virtual bool operator == ( const CounterInterface o ) const   = 0; 
```

经过

```
virtual bool operator == ( const CounterInterface &o ) const   = 0; 
```

其次，和“Olaf Dietsche”一样，它比我快 :-)

# android - 创建时间标尺块，如 google io 2012

> ID：13878450
> 
> 赞同：-1
> 
> 时间：2012-12-14T12:11:26.483
> 
> 标签：android

我想创建像 Google io 2012 这样的时间标尺块。我知道它是开源库，我可以使用它，但我必须以非常简单的方式创建它。所以请建议我并提供一些示例。我是 Android 编程的新手。任何帮助都会更加明显。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:24:52.473

仅供参考，Google I/O 应用程序可供下载，您可以下载：[iosched - 适用于 Android 的 Google I/O 应用程序](http://code.google.com/p/iosched/)

# android - 如何连续从下到上移动图像？

> ID：13878451
> 
> 赞同：5
> 
> 时间：2012-12-14T12:11:26.093
> 
> 标签：android

我一直在研究来自[http://obviam.net/index.php/a-very-basic-the-game-loop-for-android/](http://obviam.net/index.php/a-very-basic-the-game-loop-for-android/)的示例在此我想做一些更改。

**速度.java**

```
public class Speed {

    public static final int DIRECTION_RIGHT = 1;
    public static final int DIRECTION_LEFT  = -1;
    public static final int DIRECTION_UP    = -1;
    public static final int DIRECTION_DOWN  = 1;

    private float xv = 1;   // velocity value on the X axis
    private float yv = 1;   // velocity value on the Y axis

    private int xDirection = DIRECTION_RIGHT;
    private int yDirection = DIRECTION_DOWN;

    public Speed() {
        this.xv = 1;
        this.yv = 1;
    }

    public Speed(float xv, float yv) {
        this.xv = xv;
        this.yv = yv;
    }

    public float getXv() {
        return xv;
    }
    public void setXv(float xv) {
        this.xv = xv;
    }
    public float getYv() {
        return yv;
    }
    public void setYv(float yv) {
        this.yv = yv;
    }

    public int getxDirection() {
        return xDirection;
    }
    public void setxDirection(int xDirection) {
        this.xDirection = xDirection;
    }
    public int getyDirection() {
        return yDirection;
    }
    public void setyDirection(int yDirection) {
        this.yDirection = yDirection;
    }

    // changes the direction on the X axis
    public void toggleXDirection() {
        xDirection = xDirection * -1;
    }

    // changes the direction on the Y axis
    public void toggleYDirection() {
        yDirection = yDirection * -1;
    }

} 
```

使用它，图像可以向各个方向移动。现在我只想从下到上限制这种运动。onclick 的功能是，我们可以单击并拖动图像到所需的位置。我想用让图像消失或转到另一个活动来替换它。请帮助我更改此代码。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T06:37:50.730

如果您使用过 SurfaceView，那么在`onDraw(Canvas canvas)`方法中，用于从下到上移动图像的代码是这样的。

```
canvas.drawBitmap(bitmap,xPoint,yPoint,paint); 
```

其中位图是一个图像（您要移动的位图），xPoint 是 x 坐标，yPoint 是 y 坐标，paint 是一个 Paint，它也可以为空。

对于自下而上的移动，只需更新

```
yPoint = yPoint - 1; 
```

在`onDraw()`调用之前的任何线程中。

愿这对你有所帮助。

# javascript - 蒙面盒子仍然调用函数

> ID：13878455
> 
> 赞同：0
> 
> 时间：2012-12-14T12:11:49.777
> 
> 标签：javascript, svg, bonsaijs

有一种方法可以将鼠标悬停之类的事件附加到掩码中吗？这个例子显示了我的问题：http: [//goo.gl/DRhsH](http://goo.gl/DRhsH)

当您将鼠标 NEXT 传递给蓝色框时，它会更改遮罩的颜色，我想做的只是在鼠标经过蓝色框时调用该事件（不靠近 - 这是因为蓝色和红色框被另一个矩形遮住，当你将鼠标靠近它们时），因为我只需要使用显示的图像，并且绑定这样的事件应该可以解决我的问题。

我试图将单击/鼠标悬停绑定到一个组中，但它保持相同的结果，整个图像是可访问的，而不仅仅是查看的部分。我也尝试剪辑它，但它一直跟踪剪辑的内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:54:31.800

**编辑**：替换了以前的答案，因为事情不正确，盆景显然不允许剪裁。

我建议也使用遮罩路径作为剪辑路径，但 bonsiajs 似乎不支持这一点。无论如何，这是一个 SVG 结构，可以按您的意图触发事件。如果这不能使用盆景生成，也许你可以用另一种方式来做。

```
<svg width="596" height="596" viewBox="-0.5 -0.5 596 596" 
    xmlns="http://www.w3.org/2000/svg" 
    xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs>
    <mask id="mask">
      <path d="M 0 0 l 50 0 l 0 150 l -50 0 Z" fill="rgba(255,255,0,1)"
        transform="matrix(1,0,0,1,80,0)" id="maskPath"/>
    </mask>
    <clipPath id="clipPath">
      <use xlink:href="#maskPath"/>
    </clipPath>
  </defs>
  <g>
    <g mask="url(#mask)" clip-path="url(#clipPath)" onmouseover="alert('in')">
      <path d="M 0 0 l 100 0 l 0 100 l -100 0 Z" fill="rgba(255,0,0,1)"/>
      <path d="M 0 0 l 100 0 l 0 100 l -100 0 Z" fill="rgba(0,0,255,1)"
        transform="matrix(1,0,0,1,50,50)"/>
    </g>
  </g>
</svg> 
```

# java - 在 Java 中使用 commons.logging 记录异常？

> ID：13878456
> 
> 赞同：5
> 
> 时间：2012-12-14T12:11:50.080
> 
> 标签：java, logging, apache-commons-logging

我在 Java 应用程序中使用公共日志，我想从堆栈跟踪中记录异常。

```
 catch( IOException exception ) {
    logger.error( "IOException Occured :", exception.fillInStackTrace() ); 

       //Print the entire stack trace to log file.
      throw new AsExceptionUtl( APPMessageHelper.getMessage( APPMessageConstants.ERROR_FailedLoadFile, documentPath ) );
   } 
```

这是正确的方法吗？它会在日志中打印堆栈跟踪吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T12:19:04.443

如果要记录异常，则只需使用

```
logger.error("IOException Occured :", exception); 
```

是否显示堆栈跟踪取决于底层的日志记录实现是什么，以及它是如何配置的。AFAIK，大多数或所有实现默认显示异常的堆栈跟踪。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T12:28:52.247

**Apache 公共日志记录解释：**互联网上没有太多关于此的文档。这是一篇有益于您的小文章：

为了在您的 java 代码中记录消息，您需要将两个类导入到您的源代码中。

```
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory; 
```

现在，要创建您的日志，请通过以下两种方式之一在您的类中创建一个属性：

```
 private Log m_log = LogFactory.getLog(MyClass.class); 
```

或者

```
 private Log m_log = LogFactory.getLog("MyClassLogger"); 
```

第一个选项只是为您的类创建一个通用记录器，它将由默认记录选项控制。第二个选项是创建一个您命名为“MyClassLogger”的特定记录器，它可以单独控制为默认值。如果您使用使用日志记录的其他第三方源代码，但您不希望从该源代码中查看调试或其他信息，您可能想要执行此操作。使用记录器非常简单。您可以通过调用与优先级对应的方法来发送日志消息：

```
m_log.fatal(Object message);
m_log.fatal(Object message, Throwable t);
m_log.error(Object message);
m_log.error(Object message, Throwable t);
m_log.warn(Object message);
m_log.warn(Object message, Throwable t);
m_log.info(Object message);
m_log.info(Object message, Throwable t);
m_log.debug(Object message);
m_log.debug(Object message, Throwable t);
m_log.trace(Object message);
m_log.trace(Object message, Throwable t); 
```

这些方法按优先级从高到低的顺序列出。默认情况下，Commons 日志记录设置为显示来自 INFO 及更高版本的所有消息。如您所见，每个方法都重载了一个方法，您可以在其中发送 Throwable 类型，例如 Exception - 非常方便！这就是记录消息所需要做的一切。

在您的情况下，您只需要使用：

```
 logger.error("IOException Occured :", exception); 
```

无需调用 stackTrace，因为此处的异常对象将与抛出的异常一起记录。

# mongodb - 如何进行有效的查询以替换 MongoDB 中的 $exists

> ID：13878458
> 
> 赞同：1
> 
> 时间：2012-12-14T12:11:57.733
> 
> 标签：mongodb

我有一个 MongoDB 集合，其中包含各种数据。（约百万）

这些数据有一个类似的数据结构`{k: {a:1,b:2,c:{},...}}`，我不知道它到底是什么。

现在我想对这个集合进行计数，`k`通过使用返回集合中不为空的总元素，`{k:{$exists:true}}`但结果非常慢......

然后我添加一个索引`k`并尝试通过 : 进行查询，`{k:{$gt:{}}`但这并没有返回正确的结果。

那么，现在如何依靠收藏来做到这一点呢？

请注意，我不知道`k`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:45:55.303

如果您使用的是版本 2 之前的版本，`$exists`则无法使用索引。看到这个答案：[https ://stackoverflow.com/a/7503114/131809](https://stackoverflow.com/a/7503114/131809)

因此，请尝试升级您的 MongoDB 版本

从[文档](http://api.mongodb.org/wiki/current/Advanced%20Queries.html#AdvancedQueries-$exists)：

> 在 v2.0 之前，$exists 不能使用索引。其他字段的索引仍在使用。
> $exists 即使使用索引也不是很有效，尤其是。使用 {$exists:true} 因为它必须有效地扫描所有索引值。

第二部分也许是重要的一点。

听起来`sparse`索引可能是这里的关键......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:18:23.833

尝试使用`$ne : null`

因此，根据您的代码示例：

```
{k:{$ne : null}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T12:42:02.650

```
db.collection.count({k:{$ne:null}}) 
```

顺便说一下在 k 上使用稀疏索引。

```
db.collection.ensureIndex({k:1}, {sparse: true}); 
```

# php - Symfony2 Gedmo 树，带有可翻译的侦听器

> ID：13878459
> 
> 赞同：1
> 
> 时间：2012-12-14T12:12:00.883
> 
> 标签：php, symfony, tree, translation

我在 Symfony2 项目中使用 Gedmo 树。

```
$em = $this->getDoctrine()->getEntityManager();

$options = array(
    'decorate' => true,
    'rootOpen' => '<ul>',
    'rootClose' => '</ul>',
    'childOpen' => '<li>',
    'childClose' => '</li>',
    'nodeDecorator' => function($node) {
        return '<a class="menu" href="#">'.$node['name'].'</a>';
    }
);

$category = $em->getRepository('MyMainBundle:Category')->childrenHierarchy(
    null, /* starting from root nodes */
    false, /* load all children, not only direct */
    $options
);

print_R($category); 
```

它有效，但问题是字段名称是可翻译的。在类别表中它是 NULL 并且值保存在 category_translations 表中，但我的代码仅返回类别表中的字段。

尝试添加侦听器：

```
$evm = new \Doctrine\Common\EventManager();

$translatableListener = new \Gedmo\Translatable\TranslatableListener();
$translatableListener->setTranslatableLocale('en');
$evm->addEventSubscriber($translatableListener); 
```

并改变：

```
$em = $this->getDoctrine()->getEntityManager(); 
```

和：

```
$em = $this->getDoctrine()->getEntityManager(null,null,$evm); 
```

但没有帮助。

阅读[查询提示](https://gist.github.com/1086164)，但没有使用它的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:29:17.323

这应该可行： 创建一个**自定义 NestedTreeRepository**并覆盖**getNodesHierarchyQuery**方法以在返回的**查询**上调用**setHint**。

 **```
namespace My\Bundle\Entity;

use Doctrine\ORM\EntityRepository;
use Gedmo\Tree\Entity\Repository\NestedTreeRepository;

/**
 * CategoryRepository
 */
class CategoryRepository extends NestedTreeRepository
{
    /**
     * {@inheritDoc}
     */
    public function getNodesHierarchyQuery($node = null, $direct = false, array $options = array(), $includeNode = false)
    {
        $query = $this->getNodesHierarchyQueryBuilder($node, $direct, $options, $includeNode)->getQuery();
        $query->setHint(
            \Doctrine\ORM\Query::HINT_CUSTOM_OUTPUT_WALKER,
            'Gedmo\\Translatable\\Query\\TreeWalker\\TranslationWalker'
        );
        return $query;
    }
} 
```

不要忘记将您的存储库分配给您的实体：

```
namespace My\Bundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Gedmo\Mapping\Annotation as Gedmo;

/**
 * Category
 *
 * @Gedmo\Tree(type="nested")
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="CategoryRepository")
 */
class Category
{
} 
```**

# c - C: if 语句中的函数

> ID：13878460
> 
> 赞同：-1
> 
> 时间：2012-12-14T12:12:01.680
> 
> 标签：c, if-statement

我想做这样的事情：

```
 if([FUNCTION] > 3){
         //do stuff
 } 
```

where`FUNCTION`是一个执行某些操作并以 int 形式返回结果的函数。例如，函数可以定义为：

```
 a + 1;
 return a; 
```

where`a`是先前定义的变量。有没有办法在C中做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:14:21.653

首先

```
a + 1; 
```

是一个没有效果的声明，所以我假设你的意思是`a = a + 1`. 那么是的，您当然可以从 if 语句中调用函数。

```
int foo(int* a) {
  *a = *a + 1;
  return *a;
}

// later ...

int a = 7;
if (foo(&a) > 3) {
  // do stuff
} 
```

如果`a`在 if 语句的范围内不知道，您的意思可能是这样的：

```
int a = 7;

int foo() {
  a = a + 1;
  return a;
}

// later ...

if (foo() > 3) {
  // do stuff
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T12:16:53.307

由于从语法上讲，C 允许*关系表达式*`if ( expression )`左侧的函数调用with也是一个表达式，答案是肯定的，您可以直接执行此操作，*`>`*

 *```
if (some_function() > 3) {
    /* Do stuff. */
} 
```

什么样的C书没有说明这一点？我强烈推荐 Kernighan，Ritchie，*The C Programming Language*，第 2 版（ANSI/ISO C89 更新）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T12:16:02.070

```
#include<stdio.h>
int a=5;
int foo(int a)
{
    a++;
    return a;
}

int main()
{

    if(foo(a) > 3) {
       printf("%d\n",a);
       // Do stuff
    }
    return 0;
} 
```

这很简单。

编辑：这只是显示`if`条件返回的演示源代码`true`。*

# c# - 如何使用货币符号将字符串解析为十进制？

> ID：13878464
> 
> 赞同：18
> 
> 时间：2012-12-14T12:12:13.900
> 
> 标签：c#, .net, string, type-conversion, globalization

我不知道为什么这不起作用：

```
string s = "12,00 €";
var germanCulture = CultureInfo.CreateSpecificCulture("de-DE");
decimal d;
if (decimal.TryParse(s, NumberStyles.AllowCurrencySymbol, germanCulture, out d))
{
    // i want to get to this point
    Console.WriteLine("Decimal value: {0}", d);
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-14T12:16:43.590

使用`NumberStyles.Currency`代替`NumberStyles.AllowCurrencySymbol`

```
if (decimal.TryParse(s, NumberStyles.Currency, germanCulture, out d)) 
```

并且您的代码的输出将是：

```
Decimal value: 12.00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T10:11:17.730

试试这个;

```
 string.Format(new CultureInfo("en-SG", false), "{0:c0}", 123423.083234); 
```

它将 123423.083234 转换为 $1,23,423 格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-01T14:32:39.153

请注意，不幸的是，这不适用于比特币符号和其他加密货币符号。我尝试了两种方式。

Sharplab 证明：[链接](https://sharplab.io/#v2:C4LgTgrgdgNAJiA1AHwAICYCMBYAUKgBgAJVMA6AcQBsB7AIwEMqBLALweGZqgG488MAZiIBvPEQkl06UZLlFx8iQDcGYIgGciAXiIAiALSB+OEGYAHGUEBWPX1xKJipXACmAY2YBbJmQAKajRcACg0YIgA5CE86FzAAZWAATyoXDTIAYQgwMBcoN0SwzKpgLJcASSgAMxoyCtUwZgYoYCKSnIBKOwciVw9vKj8A4NCIqJj4pJS0gEEqWgB3TOzc/LjE6JoqQohi0orq2qh6xubW0s6nIgBfPCugA===)

在我的情况下（我有一个减号，后跟比特币 ฿ 符号）的一种解决方法是对字符串执行 .Where() 忽略除数字和减号以外的所有内容......但如果你想要一般验证......那么你必须在某处硬编码这些比特币等符号

# java - 在接口中使用 getter/setter 方法

> ID：13878465
> 
> 赞同：10
> 
> 时间：2012-12-14T12:12:14.410
> 
> 标签：java, interface

我的问题是如何在接口中编写 setter/getter 方法和静态字段并在另一个类中实现它。

一个例子：

```
public interface MyInterface {
int number = 0;

public int setNumber(int num);{

 }
}

// Use it

public MyClass implements MyInterface{

 ...

public int setNumber(int num) {
   number = num;   // Error, Why?
 }
} 
```

我收到错误，`number = num`但`setName(...)`方法没有错误！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-14T12:13:47.383

您不能在接口中定义*实例字段*（除非它们是常量 -`static final`值，感谢[Jon](https://stackoverflow.com/a/13878520/17713)），因为它们只是*实现*的一部分。因此，只有*getter 和 setter*在接口中，而字段在实现中出现。

并且`setNumber`应该返回 a`void`而不是`int`. 为了得到我建议你添加`int getNumber()`.

```
public interface MyInterface {
  void setNumber(int num); // public is implicit in interfaces
  int getNumber();         // obviously
}

public class MyClass implements MyInterface {
  private int number = 0;

  public void setNumber(int num) { this.number = num; }
  public int getNumber() { return this.number; }
} 
```

如您所见， only`setNumber`是 的一部分`MyInterface`。消费者不需要知道数字是如何存储的，因此它是一个实现细节。

此外，在 Java 中，您将类和接口命名为`PascalCase`而不是`camelCase`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-14T12:15:35.537

当您在接口中定义一个值时，它是隐式`public static final` 的，即它是不可变的，而不是实例字段。

接口用于定义契约，而不是行为，因此坚持所有实现都具有此字段是没有意义的。

顺便说一句，如果你有一个`abstract class`as well as 或 instead of an`interface`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-14T12:15:31.290

您无法更改接口中声明的字段，因为它们是由 deafulat 声明的`public static final`。

您会看到`final`，一旦初始化，它们就无法更改。

而且在接口中，您不能像在代码中那样实现方法。

只是放在`;`方法签名之后而不是`{}`（甚至不是空的`{}`）：

```
public int setNumber(int num); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-14T12:14:15.863

接口不能包含方法体定义和字段 are ，`public`默认情况下通常用于常量声明。它将在您要实现此接口的位置进行定义。`final``static`

> 在 Java 编程语言中，接口是一种引用类型，类似于类，只能包含常量、方法签名和嵌套类型。没有方法体。接口不能被实例化——它们只能由类实现或由其他接口扩展。
> 
> [参考](http://docs.oracle.com/javase/tutorial/java/IandI/createinterface.html)

但`abstract class`可以包含具体方法以及抽象方法。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-14T12:16:23.420

`interface`默认情况下，其中的字段是**public static final**即常量。请记住，您已经在您的实现类中进行了初始化`number`，`interface`并试图在您的实现类中更改其值，这违反了最终变量的法则。

来自[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.4)：

> 变量可以声明为final。最终变量只能分配一次。声明一个变量 final 可以作为有用的文档，说明它的值不会改变，并且可以帮助避免编程错误。
> 
> 如果最终变量被分配给它是一个编译时错误，除非它在分配之前立即被明确地未分配（第 16 节）。

默认情况下，接口中的方法也是公共抽象的。我不明白您界面中的方法签名。它应该如下所示。

```
public void method(); 
```

# mercurial - 提交窗口中神秘的细垂直红线的含义

> ID：13878470
> 
> 赞同：9
> 
> 时间：2012-12-14T12:12:35.833
> 
> 标签：mercurial, tortoisehg

TortoiseHg 提交窗口的文本区域中有一条细的垂直红线，您可以在其中编写提交消息：

![TortoiseHg 提交窗口示例](../Images/8d68024fc05c7ac289112f9414222461.png)

**这条线的目的和/或意义是什么？**相关的[TortoiseHg 文档](http://tortoisehg.bitbucket.io/manual/1.1/quick.html#commit)是空的。搜索[Google](https://www.google.nl/search?q=TortoiseHg%20commit%20window:%20what%20does%20the%20thin%20red%20line%20mean?%20-movie)和[Stack Overflow](https://stackoverflow.com/search?q=tortoisehg%20commit%20red%20line&submit=search)目前的结果为零。

在提交消息中放置硬换行符是建议（？）还是推荐（？）的地方？如果是这样：为什么有这样的建议，为什么在那个特定的位置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T13:52:01.890

好的，兄弟，这是*你的个人手工*设置（默认值- `unspecified`）！！！

乌龟HG - `Settings`-`Commit`

![SLL部分](../Images/cdddebc5f90897760870b67dd072cf5a.png)

在底部，当此列表框处于活动状态时，您可以阅读此参数的说明和用途

![SLL 描述](../Images/d0a0360f661deaa71403ed386fbb3ce1.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T12:17:03.427

在不知道这个平台的情况下，我会说它是一个文本换行标记 - 将文本作为纯文本打印到打印机时会换行。对于基于 ASCII 的文档，旧的“标准”宽度为 80 个字符（在某些平台上为 72 个）。

宽度也与通常以 72 或 80 个字符包装文本的纯文本文档查看器相关。在BBS'es成为常态（互联网流行之前）时，它也用于终端。

我怀疑原因是为可能希望在纯文本阅读器中阅读并打印的更老派开发人员提供向后兼容性（打印纯文本比打印为图形的格式化文本快很多倍，因此打印文档等时方便）。但这只是我的猜测。

# jquery - jQuery验证不适用于手风琴

> ID：13878476
> 
> 赞同：0
> 
> 时间：2012-12-14T12:13:07.950
> 
> 标签：jquery, jquery-validate, jquery-ui-accordion

抱歉这里有点笼统的问题，但是有什么理由为什么 jquery validate 插件会停止处理跨手风琴拆分的表单？

只是为了解释一下，很抱歉我不能给出一个例子的 URL。我有一个 asp.net 表单，它被拆分成一个手风琴。必填字段仅在第一个手风琴面板上。当此面板打开时，验证工作。如果任何其他面板打开，它将无法验证。

由于各种奇怪的原因，我以一种奇怪的方式调用验证。例如：

```
$('#submitBtn').click(function(){
   $('#form1').valid(); 
   if($('#form1').valid()){
      alert('valid');
   } else {
      alert('invalid');
      return false;
   }
}); 
```

我错过了一些明显的东西吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:18:22.683

默认情况下，验证插件会忽略隐藏的输入。在初始化你的 jquery 插件时试试这个，它可能适用于不可见的输入：

```
$("#form1").validate({
    ignore: "",
    ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-26T22:38:02.683

上面的答案对我不起作用。以下做了：

`$.validator.setDefaults({ ignore: [] });`

[确保在加载文档之前运行它。](https://stackoverflow.com/a/10063394/3068233)

# java - 如何用 Hamcrest 断言一个通用的整数列表？

> ID：13878477
> 
> 赞同：3
> 
> 时间：2012-12-14T12:13:09.390
> 
> 标签：java, testing, junit, matching, hamcrest

我正在尝试将整数列表与 Hamcrest 匹配，在线查看了一些示例，但是我遇到了运行时异常。

有人可以让我知道什么是正确的语法吗？

```
List<Integer> numbers = Arrays.asList( 1, 2, 3, 4, 5 );
assertThat((List<Object>) numbers, hasItem(hasProperty("value", is(1))));
assertThat((List<Object>) numbers, hasItem(hasProperty("value", is(2))));
assertThat((List<Object>) numbers, hasItem(hasProperty("value", is(3))));
assertThat((List<Object>) numbers, hasItem(hasProperty("value", is(4))));
assertThat((List<Object>) numbers, hasItem(hasProperty("value", is(5)))); 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T12:20:36.037

如果列表项的顺序无关紧要：

```
assertThat(numbers, hasItems(1, 2, 3, 4, 5)); 
```

如果是这样：

```
assertThat(numbers, is(equalTo(Arrays.asList(1, 2, 3, 4, 5)))); 
```

如果集合不应该包含其他元素，那么还要检查大小：

```
assertThat(numbers, hasSize(5)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T07:58:54.680

要验证集合是否包含特定项目：

```
assertThat(numbers, hasItem(3)); 
```

要验证集合是否包含多个项目：

```
assertThat(numbers, hasItems(3, 4)); 
```

要验证集合是否包含完全特定的项目：

```
assertThat(numbers, contains(1, 2, 3, 4, 5)) 
```

要验证集合是否包含特定项目，而不用担心顺序：

```
assertThat(numbers, containsInAnyOrder(5, 4, 3, 1, 2)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T12:20:45.033

只需使用

```
assertThat(numbers, hasItem(1));
... 
```

或者

```
assertThat(numbers, hasItems(1, 2, 3, 4, 5)); 
```

顺序在这里并不重要。

# c# - 打印网页未显示一些图像和一些背景颜色即时网页

> ID：13878479
> 
> 赞同：1
> 
> 时间：2012-12-14T12:13:11.590
> 
> 标签：c#, javascript, printing

我为打印网页编写代码。我正在使用 javascript 打印网页，代码就像

```
function print()
{
      window.print();
} 
```

我在 Button 的 onclientclick 中调用此函数。但是当我看到打印时，它没有显示一些图像和背景颜色。它不会发生在所有情况下。它显示一些图像和一些图像丢失。与背景颜色相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:28:25.617

这可能是 Internet Explorer 自己的设置。

在 IE8 及更早版本中，在工具.Internet 选项、高级选项卡、打印部分下有一个设置，用于控制是否打印背景图像和颜色。

在 IE9 中，它现在是 File.Page Setup... 对话框选项中的一个设置。

# c - 将多个整数打印为一个任意长度的十进制字符串

> ID：13878485
> 
> 赞同：0
> 
> 时间：2012-12-14T12:13:38.323
> 
> 标签：c, integer, integer-arithmetic

假设我有 16 个 64 位无符号整数。在执行操作时，我一直小心翼翼地在他们之间适当地喂进进位。我可以将它们输入一种方法，将它们全部转换为一个十进制数字字符串，就好像它是一个 1024 位二进制数一样？换句话说，是否有可能制作一种适用于表示一个更大整数的任意数量整数的方法？

我想有符号整数会更困难，因为要处理最重要的位。我想最重要的整数将是有符号整数，其余的将是无符号的，以表示数字的剩余“部分”。

[（这与另一个问题](https://stackoverflow.com/questions/13878189/understanding-printf-with-integers/13878342)半相关。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T12:25:39.573

您可以使用[双重涉猎算法](http://en.wikipedia.org/wiki/Double_dabble)，它规避了对多精度乘法和除法的需求。事实上，维基百科页面包含该算法的 C 实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T12:18:03.740

这有点不清楚。

当然，这样的功能

```
void print_1024bit(uint64_t digits[]); 
```

可以写来做到这一点。但是，如果您的意思是任何标准库的`printf()`-family 函数都可以做到这一点，那么我认为答案是否定的。

正如您可能在另一个问题中看到的那样，将二进制数转换为不同的基数*b*的核心由两个操作组成：

*   模*b*，找出当前的最低有效位
*   除以*b*，在生成后删除该数字

当应用到数字为 0 时，这会以相反的顺序生成所有数字。

因此，您需要为您的 1024 位数实现“模 10”和“除以 10”。

例如，考虑十进制数 4711，我们想将其转换为八进制，仅用于此示例：

1.  4711 % 8 是 7，所以最右边的数字是**7**
2.  4711 / 8 是 588
3.  588 % 8 是 4，下一位是**4**
4.  588 / 8 是 73
5.  73 % 8 是**1**
6.  73 / 8 是 9
7.  9 % 8 是**1**
8.  8 / 8 是 1
9.  1 % 8 是**1**
10.  1 / 8 为 0，我们完成了。

因此，从底部向上到最右边的数字读取**粗体**数字，我们得出结论 4711 [10] = 11147 [8]。您可以使用计算器来验证这一点，或者相信我。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T12:19:01.430

当然，这是可能的，但不是非常直接。

与其重新发明轮子，不如重用一个库？

GNU多[精度算术库](http://en.wikipedia.org/wiki/GNU_Multiple_Precision_Arithmetic_Library)就是这样一种可能性。我自己不需要这些东西，但它似乎符合你的要求。

# asp.net - 从动作中在 MVC 中执行 FormsAuthentication.SignOut() 的最佳方法是什么

> ID：13878494
> 
> 赞同：1
> 
> 时间：2012-12-14T12:14:11.817
> 
> 标签：asp.net, asp.net-mvc-4, forms-authentication

我在 LoginController 中有一个 SignOut 操作，如下所示：

```
[Authorize]
        public ActionResult SignOut()
        {
            var membershipProvider = new MembershipProviderFactory().Create();
            membershipProvider.SignOut();

            FormsAuthentication.SignOut();

            return RedirectToAction("Index");
        } 
```

一切正常，但我担心这种方法会导致客户端和服务器之间的两次往返。

**第一次往返：**`FormsAuthentication.SignOut()`调用`GetDefaultLoginPage()`（在 web.config 文件的身份验证元素中声明并对其执行 response.redirect 的`<forms>`调用。这已经是一次 301/302 往返。

**第二次往返：** 返回`RedirectToAction("Index")`导致另一个。

理想情况下，`RedirectToAction("Index")`调用必须是多余的，因为它还将用户重定向到控制器`HttpGet`上的默认操作，该操作`Login`将调用默认登录屏幕视图，这与默认登录页面相同。

但是，如果我从操作中排除该`RedirectToAction`调用`SignOut`，我必须返回某种`ActionResult`类型。我应该返回什么？

# search - 如何迭代拥有超过 1 亿个文档的 SOLR 分片？

> ID：13878498
> 
> 赞同：1
> 
> 时间：2012-12-14T12:14:22.097
> 
> 标签：search, solr, lucene

我想遍历所有这些文档，而不必将整个结果加载到内存中，这显然是这种情况 - QueryResponse.getResults() 返回 SolrDocumentList，它是一个 ArrayList。

在文档中找不到任何内容。我正在使用 SOLR 4。

注意问题的背景：我需要在将新的 SOLR 分片添加到现有分片集群时执行此操作。在这种情况下，我想基于一致哈希将一些文档从现有分片移动到新添加的分片。我们的数据不断增长，我们需要不断引入新的分片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:53:21.507

您可以设置“行”和“开始”查询参数来对结果集进行分页。首先使用 start = 0 进行查询，然后使用 start = rows、start = 2*rows 等，直到到达完整结果集的末尾。

[http://wiki.apache.org/solr/CommonQueryParameters#start](http://wiki.apache.org/solr/CommonQueryParameters#start)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-23T15:53:23.830

我有一个正在测试的可能解决方案： [Solr paging 100 Million Document result set](https://stackoverflow.com/questions/27623664/solr-paging-100-million-document-result-set)

粘贴：我正在尝试使用一个单独的索引字段（整数）对非常大的结果集（例如，超过 1 亿个文档）进行深度分页，我在其中插入一个随机变量（介于 0 和一些已知的 MAXINT 之间）。查询大型结果集时，我执行初始字段查询，不返回任何行，然后根据计数，我将范围划分为 0 到 MAXINT，以便通过在子范围内再次执行查询来获得平均 PAGE_COUNT 结果随机变量并抓取该范围内的所有行。显然，实际的行数会有所不同，但它应该遵循可预测的分布。

# nosql - Cassandra/Hector，我如何以及如何设置 thriftconverter 的构建路径

> ID：13878501
> 
> 赞同：0
> 
> 时间：2012-12-14T12:15:06.280
> 
> 标签：nosql, cassandra, hector

我正在尝试开始使用 Cassandra 和 Hector，但我似乎遇到了一些麻烦，我已经下载并提取了 Cassandra 和 Hector，并将它们链接到一个 Eclipse 项目，我已经设法解决了大部分问题但是那里是我无法摆脱的两个。

该项目未构建，因为其构建路径不完整。找不到 org.apache.thrift.TException 的类文件。修复构建路径，然后尝试构建这个项目 hector Unknown Java Problem

和

org.apache.thrift.TException 类型无法解析。它是从所需的 .class 文件 ThriftSuperCfTemplate.java /hector/core/src/main/java/me/prettyprint/cassandra/service/template 第 1 行 Java 问题中间接引用的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:25:01.390

您应该使用 Maven 或 Ivy 来拉入您的依赖项，然后您只需要在 pom.xml/ivy.xml 中引用 Hector，它就会拉下所有必需的依赖项。手动执行此操作将是一个很大的痛苦。

# vba - 在 Excel 2003 VBA 中更改 DataSeries 的颜色

> ID：13878507
> 
> 赞同：2
> 
> 时间：2012-12-14T12:15:31.853
> 
> 标签：vba, linechart, excel-2003

我在使用 VBA 更改 Excel 2003 中数据系列的颜色时遇到了特别麻烦。

我设法改变了线条的颜色，但颜色不正确。我很困惑，我希望有人能阐明我做错了什么！

```
Dim strFundCode As String
strFundCode = Std_FleetUtils.GetVariableValueByName(avVariables, strVARIABLE_NAME_FUND)

Dim oChart As Chart
Set oChart = ActiveChart

Dim oSeries As Series
Set oSeries = oChart.SeriesCollection(1)

Select Case strFundCode

    Case strFUND_CODE_CAUTIOUS ' MPS Cautious

        oSeries.Border.Color = RGB(12, 86, 166)

    Case strFUND_CODE_BALANCED ' MPS Balanced

        oSeries.Border.Color = RGB(93, 19, 110)

    Case strFUND_CODE_BALANCED_INCOME ' MPS Balanced Income

        oSeries.Border.Color = RGB(70, 137, 176)

    Case strFUND_CODE_GROWTH ' MPS Growth

        oSeries.Border.Color = RGB(200, 139, 78)

    Case Else
        Err.Raise lGENERIC_ERROR, Description:="The fund code '" & strFundCode & "' is not recognized."

End Select 
```

我已经尝试了很多东西（Interior.Color - 抛出了一个错误）。

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:52:42.773

您可以使用：

```
oSeries.Format.Fill.BackColor = RGB(x,x,x) 
```

# android - 登录 facebook 一个按钮来打开一个新的活动

> ID：13878510
> 
> 赞同：5
> 
> 时间：2012-12-14T12:15:45.070
> 
> 标签：android, facebook-graph-api, android-activity, facebook-android-sdk, facebook-java-api

一旦用户单击按钮，然后成功登录，我就会尝试登录 facebook，然后创建新活动。

这是到目前为止主要活动的代码！

```
import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.Toast;

import com.facebook.LoggingBehavior;
import com.facebook.Session;
import com.facebook.SessionState;
import com.facebook.Settings;

public class MainActivity extends Activity {

    @SuppressWarnings("unused")
    private static final String URL_PREFIX_FRIENDS = "https://graph.facebook.com/me/friends?access_token=";
    private Session.StatusCallback statusCallback = new SessionStatusCallback();
    private ImageButton fbImgButton;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        fbImgButton = (ImageButton)findViewById(R.id.imageView2);

        Settings.addLoggingBehavior(LoggingBehavior.INCLUDE_ACCESS_TOKENS);

        Session session = Session.getActiveSession();
        if(session == null) {
            if(savedInstanceState != null) {
                session = Session.restoreSession(this, null, statusCallback, savedInstanceState);
            }
            if(session== null) {
                session = new Session(this);
            }
            Session.setActiveSession(session);
            if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
                session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
            }
        }
        updateView();

    }

    @Override
    public void onStart() {
        super.onStart();
        Session.getActiveSession().addCallback(statusCallback);
    }

    @Override
    public void onStop() {
        super.onStop();
        Session.getActiveSession().removeCallback(statusCallback);
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        Session session = Session.getActiveSession();
        Session.saveSession(session, outState);
    }

    private void updateView() {
        Session session = Session.getActiveSession();
        if(session.isOpened()) {
            Toast.makeText(getApplicationContext(), "Logged in....", Toast.LENGTH_LONG).show();
            fbImgButton.setOnClickListener(new OnClickListener() {
                public void onClick(View view) { loginfb(); }
            });
        } else {
            fbImgButton.setOnClickListener(new OnClickListener() {
                public void onClick(View view) { onClickLogin(); }
            });
        }
    }

    public void loginfb() {
        //start the new activity here
        //Toast.makeText(getApplicationContext(), "Works first", Toast.LENGTH_LONG).show();
        Intent intent = new Intent(MainActivity.this, SelectionFragment.class);
        MainActivity.this.startActivity(intent);

    }

    private void onClickLogin() {
        Session session = Session.getActiveSession();
        if (!session.isOpened() && !session.isClosed()) {
            session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
        } else {
            Session.openActiveSession(this, true, statusCallback);
        }
        Intent intent = new Intent(MainActivity.this, SelectionFragment.class);
        MainActivity.this.startActivity(intent);
    }

    public void shareOnTwitter(View v) {
        EditText widget40 = (EditText)findViewById(R.id.widget40);
        Uri uri = Uri.parse("https://twitter.com/intent/tweet?text=" + " @coolfacts_fb " + widget40.getText());
        Intent intent = new Intent(Intent.ACTION_VIEW, uri);
        startActivity(intent);
    }

    public void nofb(View v) {
        Intent intent = new Intent(v.getContext(), shareTw.class);
        startActivityForResult(intent, 0);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;

    }

    private class SessionStatusCallback implements Session.StatusCallback {
        @Override
        public void call(Session session, SessionState state, Exception exception) {
            updateView();
        }
    }
} 
```

问题是，无论用户的当前状态是什么，如果我一点击 Facebook 登录按钮就进入新活动！

有人能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T05:14:33.723

试试这个：

```
public class MainActivity extends Activity {

    @SuppressWarnings("unused")
    private static final String URL_PREFIX_FRIENDS = "https://graph.facebook.com/me/friends?access_token=";
    private Session.StatusCallback statusCallback = new SessionStatusCallback();
    private ImageButton fbImgButton;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        fbImgButton = (ImageButton)findViewById(R.id.imageView2);

        Settings.addLoggingBehavior(LoggingBehavior.INCLUDE_ACCESS_TOKENS);

        // Add Session Callback Here
        Session.getActiveSession().addCallback(statusCallback);

        Session session = Session.getActiveSession();
        if(session == null) {
            if(savedInstanceState != null) {
                session = Session.restoreSession(this, null, statusCallback, savedInstanceState);
            }
            if(session== null) {
                session = new Session(this);
            }
            Session.setActiveSession(session);
            if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
                session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
            }

            // Get Avtive Session again in case of session is null  
            Session session = Session.getActiveSession();
        }

    // Dont call updateView() here as we have called this from session callback already.
    // updateView();

    }

    @Override
    public void onStart() {
        super.onStart();
        Session.getActiveSession().addCallback(statusCallback);
    }

    @Override
    public void onStop() {
        super.onStop();
        Session.getActiveSession().removeCallback(statusCallback);
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        Session session = Session.getActiveSession();
        Session.saveSession(session, outState);
    }

    // Minor changes made with updateView() Method flow
    private void updateView() {
        Session session = Session.getActiveSession();    
        fbImgButton.setOnClickListener(new OnClickListener() {
          public void onClick(View view) {      
           if(session.isOpened()){
              Toast.makeText(getApplicationContext(), "loginfb...", Toast.LENGTH_LONG).show();   
              loginfb(); 
           }
           else{
              Toast.makeText(getApplicationContext(), "onClickLogin...", Toast.LENGTH_LONG).show();
              onClickLogin();
           }
          }
       });
    }

    public void loginfb() {
        //start the new activity here
        //Toast.makeText(getApplicationContext(), "Works first", Toast.LENGTH_LONG).show();
        Intent intent = new Intent(MainActivity.this, SelectionFragment.class);
        MainActivity.this.startActivity(intent);

    }

    private void onClickLogin() {
        Session session = Session.getActiveSession();
        if (!session.isOpened() && !session.isClosed()) {
            session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
        } else {
            Session.openActiveSession(this, true, statusCallback);
        }
        Intent intent = new Intent(MainActivity.this, SelectionFragment.class);
        MainActivity.this.startActivity(intent);
    }

    public void shareOnTwitter(View v) {
        EditText widget40 = (EditText)findViewById(R.id.widget40);
        Uri uri = Uri.parse("https://twitter.com/intent/tweet?text=" + " @coolfacts_fb " + widget40.getText());
        Intent intent = new Intent(Intent.ACTION_VIEW, uri);
        startActivity(intent);
    }

    public void nofb(View v) {
        Intent intent = new Intent(v.getContext(), shareTw.class);
        startActivityForResult(intent, 0);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;

    }

    private class SessionStatusCallback implements Session.StatusCallback {
        @Override
        public void call(Session session, SessionState state, Exception exception) {
            updateView();
        }
    }
} 
```

检查 onCreate() 和 onStart() 的区别。它清楚地显示了 onCreate() 在 onStart() 之前首先调用，因此我们还需要从 onCreate() 方法添加会话回调。

[onCreate() 和 onStart() 的区别](https://stackoverflow.com/a/6812066/556975)

注意：您也可以保持 updateView() 方法不变，逻辑上没有错。

希望这对您有所帮助。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T23:53:00.377

在“onClickLogin()”方法结束时，在 Session 有机会打开之前调用 startActivity()。Session 开始在后台打开，但新的 Activity 将在其顶部弹出。

在您的代码中，您的 updateView() 方法似乎是对已打开的 Session 做出反应的正确位置。如果会话状态为 OPENED，请考虑在此处调用 startActivity()。

# javascript - Javascript 有效日期检查在 IE8（和 Firefox）中不起作用

> ID：13878515
> 
> 赞同：4
> 
> 时间：2012-12-14T12:16:02.113
> 
> 标签：javascript, jquery

我已经尝试了两个流行的答案，来自[Detecting an "invalid date" Date instance in JavaScript](https://stackoverflow.com/questions/1353684/detecting-an-invalid-date-date-instance-in-javascript) for checks valid dates。我在 IE8 中测试了它们——不幸的是，它们都令人失望。在这里查看[http://jsfiddle.net/Lijo/uzSU6/2/](http://jsfiddle.net/Lijo/uzSU6/2/)

是否有更好的 JavaScript 代码可以在 IE8 + Chrome + Firefox 中运行？

注意：令我惊讶的是，它在 Firefox 中也不能很好地工作......

**健康）状况**

日期格式应为带有斜杠 (/) 的美国日期格式

![在此处输入图像描述](../Images/7480206ea7c841b87262910be7f3d2c7.png)

**代码**

```
isValidDateCheck2('12/33/2012') ;
isValidDateCheck1('12/12/2012') ;

function isValidDateCheck1(d) 
{
  alert(Object.prototype.toString.call(d));
  if ( Object.prototype.toString.call(d) !== "[object Date]" )
  {
    alert('Not Valid');
  }
  if(!isNaN(d.getTime()))
  {
  alert(d.getTime());
  }
  }

  function  isValidDateCheck2(d)
  {    
    var timestamp=Date.parse(d);
    alert(timestamp);

    if (isNaN(timestamp)==false)
    {
        var date=new Date(timestamp);
        alert(date);                    
    }
   } 
```

**编辑**

@mplungjan 方法（第一个建议）列在[http://jsfiddle.net/Lijo/uzSU6/7/](http://jsfiddle.net/Lijo/uzSU6/7/)中。对于一种情况，这在 IE8 中失败了 - [http://jsfiddle.net/Lijo/uzSU6/12/](http://jsfiddle.net/Lijo/uzSU6/12/)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T23:56:59.827

您似乎在这里混淆了两件事。有效日期对象和有效日期。这些不是同一个问题。

[您链接](https://stackoverflow.com/questions/1353684/detecting-an-invalid-date-date-instance-in-javascript)到的问题回答了如何测试日期对象的有效性（日期**对象**是否是“无效日期”实例）。构造时使用无效参数会生成无效的日期对象：`new Date('?')`

您想要测试日期字符串是否符合预定义的日期格式。这是一个完全不同的问题，*不应仅使用日期对象来解决。*

一般来说，这有几个原因；首先是浏览器将有助于计算溢出月/天/时间到正确的日期：`new Date(2012,0,290)`=== Oct 06 2012。

其次，因为解析器可能依赖于语言环境（mm/dd 与 dd/mm？）。当浏览器解析日期时，我的语言环境可能会导致它滚动到我的时区/夏令时，从而扭曲它并弄乱检测（`.getDate`现在可能会在第二天返回）。更糟糕的是，这可能只发生在一年中某些时候的某些时区。

**我强烈建议使用**[date.js 之](http://www.datejs.com/)类的库来处理这些东西，因为[日期比你想象的要难得多](http://infiniteundo.com/post/25326999628/falsehoods-programmers-believe-about-time)！如果您绝对必须手动验证，那么我建议您像这样详细地进行验证：

```
function isValidDate (str) {
  // parse to numbers
  const rm = str.split('/');
  const m = 1 * rm[0];
  const d = 1 * rm[1];
  const y = 1 * rm[2];
  if (isNaN(m * d * y)) {
    return false;
  }
  // day can't be 0
  if (d < 1) {
    return false;
  }
  // month must be 1-12
  if (m < 1 || m > 12) {
    return false;
  }
  // february
  if (m === 2) {
    const isLeapYear = ((y % 4 === 0) && (y % 100 !== 0)) || (y % 400 === 0);
    // leap year
    if (isLeapYear && d > 29) {
      return false;
    }
    // non-leap year
    if (!isLeapYear && d > 28) {
      return false;
    }
  }
  // test any other month
  else if (
    ((m === 4 || m === 6 || m === 9 || m === 11) && d > 30) ||
    ((m === 1 || m === 3 || m === 5 || m === 7 || m === 8 || m === 10 || m === 12) && d > 31)) {
    return false;
  }
  return true;
} 
```

作为 jsFiddle：http: [//jsfiddle.net/3pMPp/1/](http://jsfiddle.net/3pMPp/1/)
作为 jsPerf：[http ://jsperf.com/silly-date-valiation](http://jsperf.com/silly-date-valiation)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T12:35:25.507

这将处理实际日期，并让您有机会找到日期的哪一部分无效 - 使用[DATE OBJECT](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

**注意**：一些浏览器会很乐意解析似乎无效的日期并从中生成一个日期对象。例如，2013 年 2 月 29 日将解析为 2013 年 3 月 1 日，因此我测试了输入的部分在实际日期中使用时是否有意义。

[演示](http://jsfiddle.net/mplungjan/4AKrB/)

经测试

> 赢7：
> 
> *   Chrome 23（只有一个在第一次约会时给出 isNaN）
> *   即 9
> 
> 赢经验：
> 
> *   外汇 17
> *   即 8
> *   野生动物园 5
> *   歌剧 11 和 12

```
function isValidDateCheck(dString) {

    // test it is nn/nn/nnnn or nn/nn/nn
    var dRe = /^(\d{1,2})([\-\/])(\d{1,2})\2(\d{4}|\d{2})$/

    if (!dRe.exec(dString)) {
      return false; 
    }   

    // make sure it parses as date 
    // replace this part if you do not allow dashes        
    dString.replace(/-/g,"/"); 

    var date = new Date(dString); // create a date object
    if (!isNaN(date)) { // it may give NaN - if not test the parts
        var parts = dString.split("/"); // split on slash
        var dd = parseInt(parts[1],10); // day number
        var mm = parseInt(parts[0],10)-1; // month - JS months start at 0
        var yyyy = parseInt(parts[2],10); // year
        // return true if all parts match
        return dd===date.getDate() && mm === date.getMonth() && yyyy===date.getFullYear();
    }
    // here the date was not parsed as a date
    return false;
}

window.onload=function() {
  document.getElementById("output").innerHTML+="<br/>12/33/2012: "+isValidDateCheck('12/33/2012');
  document.getElementById("output").innerHTML+="<br/>12/12/2012: "+isValidDateCheck('12/12/2012') ;
  document.getElementById("output").innerHTML+="<br/>02/29/2012: "+isValidDateCheck('02/29/2012') ;
  document.getElementById("output").innerHTML+="<br/>02/29/2013: "+isValidDateCheck('02/29/2013') ;
  document.getElementById("output").innerHTML+="<br/>01/01/2013A: "+isValidDateCheck('01/01/2013A') ;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T14:35:43.743

感谢@mplungjan。我赞成这个答案。

@mplungjan 方法（第一个建议）列在[http://jsfiddle.net/Lijo/uzSU6/7/](http://jsfiddle.net/Lijo/uzSU6/7/)中。对于一种情况，这在 IE8 中失败了 - [http://jsfiddle.net/Lijo/uzSU6/12/](http://jsfiddle.net/Lijo/uzSU6/12/)。

[因此，在参考了如何验证日期](https://stackoverflow.com/questions/5812220/test-if-date-is-valid)之后，我使用了稍微不同的方法？. 在这里看到它[http://jsfiddle.net/Lijo/uzSU6/20/](http://jsfiddle.net/Lijo/uzSU6/20/)

**编辑**

处理空格的场景请参考[http://jsfiddle.net/uzSU6/37/](http://jsfiddle.net/uzSU6/37/)

随意用这种方法提出您的建议/挑战。

**参考**

1.  [不使用修剪检查是否存在空格](https://stackoverflow.com/questions/13911311/check-whether-white-spaces-exist-without-using-trim)
2.  [在 JavaScript 比较中应该使用哪个等号运算符（== vs ===）？](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use/)
3.  [如何验证日期？](https://stackoverflow.com/questions/5812220/test-if-date-is-valid)

**代码**

```
function isValidDate(s) 
{
var bits = s.split('/');

if(s.indexOf(' ') != -1)
{
    //White space exists in the original date string
    return false;
}

//Javascript month starts at zero
var d = new Date(bits[2], bits[0] - 1, bits[1]);

if ( isNaN( Number(bits[2]) ) ) 
{
    //Year is not valid number
    return false;
}

if ( Number(bits[2]) < 1 ) 
{
    //Year should be greater than zero
    return false;
}

//1\. Check whether the year is a Number
//2\. Check whether the date parts are eqaul to original date components
//3\. Check whether d is valid

return d && ( (d.getMonth() + 1) == bits[0]) && (d.getDate() == Number(bits[1]) );

} 
```

​</p>

# web-services - RESTful 枚举。字符串还是 ID？

> ID：13878523
> 
> 赞同：4
> 
> 时间：2012-12-14T12:16:30.337
> 
> 标签：web-services, rest, enums, localization

我有一个公开枚举的 RESTful 服务。

我应该将它们公开为本地化字符串还是纯整数？

我倾向于整数以便在服务端轻松转换，但在这种情况下，客户端需要从某个地方获取本地化字符串列表才能知道枚举的含义。我只是白白地创造了额外的步骤吗？

似乎很少有关于 RESTful API 中常用的信息。

编辑：

好的。假设我正在编写一个存储有关人们宠物的信息的网站。我可以有一个 AnimalType 枚举

```
0 Dog
1 Cat
2 Rabbit 
etc. 
```

例如，当人们获取特定的宠物资源时，我可以为动物类型提供一个有意义的本地化字符串，或者只提供 ID 并强制他们通过资源`/pets/1`进行另一次查找。`/pets/types`

或者我应该两者都提供？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T14:51:26.197

我想您应该考虑要向客户公开的一致的 RESTful API。

您自己是否在代码中使用枚举是一个实现细节。您的客户是否会在他的实现中使用枚举，您既不知道也不应该打扰您，因为这只是不同的抽象级别。

首先是 API 设计，然后是实现。

如果您更深入地了解您希望使用这些枚举返回给您的客户的信息类型，我可以给出更直接的答案。

现在我猜如果整数 id 和字符串描述与描述信息或您想要在调用 RESTful 资源时返回的状态相关，那么您应该将它们都包装在 json 或 xml 文档中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T05:02:09.373

如果目的是让 API 使用者以编程方式使用这些值（即根据它们做出决定），我会使用未本地化的字符串（并确保它们有据可查且稳定）。枚举值未在本地开发框架中本地化，开发人员习惯于处理此问题，不确定为什么 Web API 会有所不同。

如果目的是让 API 使用者向用户显示这些值，我会使用本地化字符串。

如果打算同时做到这两点，我会使用未本地化的字符串 (ID)，但考虑提供单独的 API 端点/资源（甚至是离线文档）来将这些 ID 映射到本地化字符串。

如果出于某种原因您真的关心消息大小（例如，您在一条消息中有数千个这样的东西，而且这是一个移动场景），那么我才会*考虑*使用数字 ID。

# c# - 如何在不同的上下文中加载/修改/保存实体对象？

> ID：13878525
> 
> 赞同：2
> 
> 时间：2012-12-14T12:16:33.040
> 
> 标签：c#, entity-framework

使用实体框架 (EF)，我想从我的数据库中加载一个对象，对其进行修改并将其保存回来。但是，加载和保存发生在不同的上下文中，我通过将另一个对象添加到对象的集合属性来修改它。

考虑以下基于MSDN中[著名的博客/帖子示例的代码：](http://msdn.microsoft.com/de-de/data/jj193542 "可选标题")

```
Blog blog;

using (BloggingContext db = new BloggingContext())
{
    blog = db.Blogs.Include("Posts").Single();
}

// No one else knows the `post` object directly.
{
    Post post = new Post {Blog = blog, Title = "Title", Content = "Content"};
    blog.Posts.Add(post);
}

using (BloggingContext db = new BloggingContext())
{
    // No idea what I have to do before saving...
    // Can't do anything with `post` here, since this part will not know this 
    // object directly.

    //db.Blogs.Attach(blog); // throws an InvalidOperationException
    db.SaveChanges();
} 
```

在我的数据库中，我有 1`Blog`个 100`Post`秒的对象。如您所见，我想为此添加一个新`Post`的`Blog`. 不幸的是，`db.Blogs.Attach(blog);`在保存之前做，会抛出一个`InvalidOperationException`说法：*“发生了引用完整性约束违规：定义引用约束的属性值在关系中的主体和依赖对象之间不一致。”*

我该怎么做才能让 EF 更新这个博客？

* * *

**更新：**

我认为我试图实现的（将实体的数据库更新与修改及其相关子实体分离）是不可能的。相反，我认为现在相反的方向更可行：将子实体的更新/创建与其父实体分离。这可以通过以下方式完成：

```
Blog blog;

using (BloggingContext db = new BloggingContext())
{
    blog = db.Blogs.Single();
}

Post post = new Post {BlogId = blog.BlogId, Title = "Title", Content = "..."};

using (BloggingContext db = new BloggingContext())
{
    db.Posts.Add(post);
    db.SaveChanges();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:31:48.213

您必须将实体附加到上下文，然后更改跟踪应该启动并保存更改将完成剩下的工作。

供参考：[MSDN 将实体附加到上下文](http://msdn.microsoft.com/en-us/library/gg695783.aspx)

* * *

或者尝试显式添加它并直接设置关系所需的信息，而不是像这样通过导航属性：

```
Blog blog;

using (BloggingContext db = new BloggingContext())
{
    blog = db.Blogs.Include("Posts").Single();

    Post post = new Post {Blog = blog, Title = "Title", Content = "Content"};
    post.blogId = blog.Id;    

    db.Posts.Add(post);
    db.SaveChanges();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T12:33:12.740

编辑 3：

**模型：**

![在此处输入图像描述](../Images/b1fb462813f067d8f0acedef2418d3db.png)

我现在明白了这个问题，我想。如何将实体附加到数据库上下文并正确设置它们的状态。

您的问题是，在附加博客实例时，它包含新帖子和现有帖子的集合。解决方案是首先附加博客实例的浅表副本（没有填充的帖子集合），然后添加新帖子。您也可以只将现有实例加载到 changetracker 中，但这会导致到数据库的往返，并且会吸引一些 SO 批评者参加聚会。

顺便说一句，我首先使用了正确版本的 EF，然后在添加更正代码之前重现了您的问题。

```
 public partial class Form1 : Form {
            public Form1() {
                InitializeComponent();
            }

            Blog blog;

            private void fetchBlogData_Click(object sender, EventArgs e) {
                using (var db = new StackOverflowEntities()) {

                    blog = db.Set<Blog>().Include("Posts")
                        .FirstOrDefault();

                }
            }

            private void commitAllPosts_Click(object sender, EventArgs e) {

                using (var db = new StackOverflowEntities()) {

                    // load existing blog into ChangeTracker (but not efficient)
                    // var existingBlog = db.Set<Blog>().First(b => b.BlogId == blog.BlogId);

                    // make shallow copy of existing blog and attach it
                    Blog existingBlog = new Blog {
                        BlogId = blog.BlogId,
                         Name = blog.Name
                    };

                    db.Set<Blog>().Attach(existingBlog);

                    // if the root blog record must be updated
                    //db.Entry(existingBlog).State == EntityState.Modified;

                    // add new posts to tracked Blog entity
                    foreach (var post in blog.Posts) {
                        if (post.PostId == 0) {
                            existingBlog.Posts.Add(post);
                        }
                    }                    

                    db.SaveChanges();
                }

            }

            private void createArbPosts_Click(object sender, EventArgs e) {
                var post = new Post {

                    Text = "Today I read but never understood a StackOverflow question.... again."
                };

                blog.Posts.Add(post);

                var postPS = new Post {

                    Text = "Actually, i'm not sure i understand it yet."
                };

                blog.Posts.Add(postPS);
            }

        } 
```

# iphone - FTP 压缩脚本 - STUCK

> ID：13878526
> 
> 赞同：0
> 
> 时间：2012-12-14T12:16:33.897
> 
> 标签：iphone, bash, unix, terminal

我有一个 bash 代码来备份我的 iOS 文件并将它们发送到我的网站 FTP 目录中：(http://mywebsite.com/sms) 但是当我运行此代码时，它不是 .zip'ing 文件和将文件“zippyy.db”留在我网站的根目录中，而不是 /sms 文件夹中。

我将从几个设备上运行这个脚本，所以当我执行代码时，如果 FTP 中已经有一个名为 zippyy.zip 的文件，它会将其更改为 zippyy1.zip、zippyy2.zip 等。

如果有人为我重新编写脚本，我将非常感激。先感谢您！这是我的代码：

```
 #!/bin/bash

 ROOTFOLDER="/var/root"
 ZIPNAME="zipfolder"
 ZIPFOLDER=$ROOTFOLDER/$ZIPNAME
 LIBFOLDER="/var/mobile/Library"
 ZIPFILE="zippyy.zip"

 mkdir -p $ZIPFOLDER
 cp $LIBFOLDER/SMS/sms.db $ZIPFOLDER/
 cp $LIBFOLDER/Notes/notes.sqlite $ZIPFOLDER/
 cp $LIBFOLDER/Safari/Bookmarks.db $ZIPFOLDER/
 cp $LIBFOLDER/Safari/History.plist $ZIPFOLDER/
 cd $ROOTFOLDER
 zip -r $ZIPFILE $ZIPNAME

 HOST=HOSTNAME
 USER=USERNAME
 PASS=PASSWORD

 ftp -inv $HOST << EOF
 user $USER $PASS
 cd sms
 dir . remote_dir.txt
 bye
 EOF

 FILECOUNT=$(grep zippyy remote_dir.txt | wc -l)
 NEXTDB="zippyy${FILECOUNT}.db"
 mv $ZIPFILE $NEXTDB

 ftp -inv $HOST << EOF
 user $USER $PASS
 put $NEXTDB
 bye
 EOF 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T19:14:52.583

你的意思是你的存档一旦被ftp'd就损坏了？

您很可能在您的机器上以默认模式发送文件，该模式必须是 ASCII 模式。

但首先，在您的 zip 文件的本地副本上，发出测试选项

```
zip -t $ZIPFILE 
```

如果成功，则将您的 ftp here-doc 更改为

```
ftp -inv $HOST << EOF
 user $USER $PASS
 binary
 put $NEXTDB
 bye
EOF 
```

请注意添加了 ftp 命令`binary`，这意味着发送不带 ASCII 转换的文件。

* * *

强烈建议发出以下命令

```
 man ftp 
```

并至少通读一遍。当然，即使是一个很好的 ftp 手册页，我也没有找到有用的部分！;-) 。另请注意，有许多 ftp 客户端，只是表面上遵循一组通用的选项、参数和子命令。不要以为一旦你让它在家工作，它就会在办公室或你朋友的地方工作！

IHTH

# matlab - matlab convhulln问题

> ID：13878528
> 
> 赞同：0
> 
> 时间：2012-12-14T12:16:40.500
> 
> 标签：matlab, convex-hull

使用 matlab 的“convhulln”（3D），我的代码有时会崩溃，抱怨“初始面 1 与内部共面”。当我目视检查物体的形状时，这是正确的。但是我可以在对象上使用 convhulln 之前以某种方式检查这一点，这样我就可以避免崩溃？并找出共面性所在的方向，这样我就可以以正确的方式使用 convhulln 了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:44:14.427

如果您唯一关心的不是使代码崩溃，则可以使用以下结构：

```
try
   % Do your calculations
catch
   %This is evaluated if something went wrong
end 
```

# regex - preg_match 管道符号

> ID：13878530
> 
> 赞同：1
> 
> 时间：2012-12-14T12:16:49.033
> 
> 标签：regex, preg-match

我有一个正则表达式

```
|^(/[a-z]{2})?/?(php)/([-a-z0-9]+)/?/?$| 
```

哪个匹配`/php/anything`。

现在我想要一个匹配两者的正则表达式

```
/php/anything
/java/anything 
```

我累了`|^(/[a-z]{2})?/?(php|java)/([-a-z0-9]+)/?/?$|`，但它不工作。

有人可以帮我解决吗？我想保留所有其他部分，但只更改`(php)`部分。

这是代码

```
preg_match("|^(/[a-z]{2})?/?(php|java)/([-a-z0-9]+)/?/?$|", 'php/anything') 
```

但是我收到此警告并且匹配不起作用

```
Warning: preg_match(): Unknown modifier 'j' 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:25:43.303

问题只是您使用管道符号作为分隔模式的字符。因此，您需要在模式本身中转义管道符号，或者只需将分隔符更改为您不会在模式中使用的其他内容：

```
#^(/[a-z]{2})?/?(php|java)/([-a-z0-9]+)/?/?$#
{^(/[a-z]{2})?/?(php|java)/([-a-z0-9]+)/?/?$} 
```

等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T12:26:19.863

您正在`|`用作正则表达式分隔符，但您`|`在正则表达式内部有一个作为更改，您需要转义。如果你不这样做，第二个`|`被视为正则表达式的结尾，它后面的字母`j`被视为正则表达式修饰符。由于`j`不是有效的修饰符，因此您会收到错误消息。

你逃脱了`|`：

```
preg_match("|^(/[a-z]{2})?/?(php\|java)/([-a-z0-9]+)/?/?$|", 'php/anything')
                                ^ 
```

或者您可以使用不同的分隔符对：

```
preg_match("~^(/[a-z]{2})?/?(php|java)/([-a-z0-9]+)/?/?$~", 'php/anything')
            ^                                           ^ 
```

# haskell - 错误和失败有什么区别？

> ID：13878533
> 
> 赞同：6
> 
> 时间：2012-12-14T12:16:53.263
> 
> 标签：haskell, error-handling

我一直在寻找这个问题的答案并找到[了这篇博文](http://www.randomhacks.net/articles/2007/03/10/haskell-8-ways-to-report-errors)。它说它`fail`有优势，`error`因为它不受`IO`单子的限制。

我应该使用`fail`而不是`error`全部使用我的代码吗？是否会`fail`引发`Control.Exception.catch`异常`IO`？

**编辑：**我找到[了上面链接的更新](http://blog.ezyang.com/2011/08/8-ways-to-report-errors-in-haskell-revisited/)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T12:31:42.737

这是我的建议：

*   如果您已经在代码中，请通过from`IO`使用适当的异常。`throwIO``Control.Exception`

*   如果您的代码已经使用了 monad 堆栈，如果它不支持它，则将错误添加到您的 monad 堆栈，然后使用它们。

*   如果您使用的是非单子代码，请编写总函数。即，`error`如果可以的话，避免和不完整的模式。在这里使用`fail`只会迫使您的代码不必要地单调。如果您需要异常结果，请使用适当的数据类型（例如`Maybe`or`Either`或自定义数据类型）。

# vba - VBA xlCount 函数

> ID：13878535
> 
> 赞同：2
> 
> 时间：2012-12-14T12:16:59.863
> 
> 标签：vba, excel

嘿，我正在学习 Excel 的 VBA 编程，我正在查看其他人的代码，了解每个函数的作用，然后对其进行修改并查看输出（我发现这是学习新主题的最简单方法）。

我遇到了一个功能

```
Function:=xlCount 
```

但是当我用谷歌搜索时，我似乎找不到任何关于它的信息，我可能在错误的地方寻找。有人可以解释 xlCount 正在做什么，或者指向一个列出我可以从中学习的 VBA 函数的站点的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:37:18.257

*xlCount*不是函数。

这只是用于控制数据透视表生成的**XlConsolidationFunction 枚举的成员。**

# iphone - [NSDictionary valueForKey:] 内无法识别的选择器崩溃

> ID：13878538
> 
> 赞同：1
> 
> 时间：2012-12-14T12:17:12.973
> 
> 标签：iphone, objective-c, ios

我偶尔会遇到这种崩溃，这很难重现：

```
0   CoreFoundation                  0x39ff73e2 __exceptionPreprocess + 158
1   libobjc.A.dylib                 0x3905095e objc_exception_throw + 26
2   CoreFoundation                  0x39ffaf2c -[NSObject(NSObject) doesNotRecognizeSelector:] + 180
3   CoreFoundation                  0x39ff9648 ___forwarding___ + 388
4   CoreFoundation                  0x39f51204 _CF_forwarding_prep_0 + 20
5   Foundation                      0x32914bec -[NSDictionary(NSKeyValueCoding) valueForKey:] + 28
6   MyAppName                       0x00032112 -[myViewController stopPlayersWithVolume:] (myViewController.m:151) 
```

从这段代码：

```
- (void)stopPlayersWithVolume:(double)volume
{
    for (NSString *file in players)
    {
        AVAudioPlayer *player = [players valueForKey:file];
        if (player.volume == volume || volume == 0)
            [player stop];
    }
} 
```

`players`是一个`NSMutableDictionary`属性，无需访问，`self.`因为我认为 ARC 不需要它。键是文件名（例如“mysound.mp3”），值是`AVAudioPlayer`对象。

堆栈跟踪是否说`file`我传递给的参数`[NSMutableDictionary valueForKey]`实际上不是一个`NSString`，因此是无法识别的选择器？它总是`NSString`在调试器中，正如您所期望的那样，它来自通过字典的快速枚举，但在调试器中永远不会发生崩溃。

我唯一的想法是存在损坏字典的线程问题。上面的代码是由 NSTimer 触发的，但这只是通过运行循环发出的消息，而不是单独的线程，所以我相信不必担心跨线程访问？

任何建议表示赞赏。很抱歉把它扔掉，但我被困住了。

**编辑：**

播放器字典是`viewDidLoad`这样分配的：

```
players = [[NSMutableDictionary alloc] init]; 
```

并声明如下：

```
@property (retain, nonatomic) NSMutableDictionary *players; 
```

并合成如下：

```
@synthesize players; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:36:36.197

`players`当您遍历它们时，您的字典或其内容可能正在被释放。你能打开[NSZombies](https://stackoverflow.com/questions/5386160/how-to-enable-nszombie-in-xcode)并尝试在调试器中重现崩溃吗？它将为您提供有关正在释放的对象的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:49:34.613

分配字典（并设置音频内容）的代码如下所示：

```
NSError *error = [[NSError alloc] init];
NSArray *names = [fm contentsOfDirectoryAtPath:resourcePath error:&error];
players = [[NSMutableDictionary alloc] init];
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryAmbient error:&error];
[[AVAudioSession sharedInstance] setActive:YES error:&error]; 
```

我一定是从某个地方复制并粘贴了它，因为`NSError`据我所知，使用 of 是错误的，尽管几乎不可能引起问题。我将代码更改为：

```
NSArray *names = [fm contentsOfDirectoryAtPath:resourcePath error:nil];
players = [[NSMutableDictionary alloc] init];
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryAmbient error:nil];
[[AVAudioSession sharedInstance] setActive:YES error:nil]; 
```

问题消失了，它出现了。不能 100% 确定，但我可以在 10 次尝试中使用前一个代码重现崩溃，而永远不会使用后者。不知道为什么。

# jquery - 如何在 jQuery 中用不同的类名包装多个 div 块？

> ID：13878539
> 
> 赞同：0
> 
> 时间：2012-12-14T12:17:14.963
> 
> 标签：jquery, dom, jquery-selectors, word-wrap, jquery-traversing

> **可能重复：**
> [如何在 jQuery 中用不同的类名包装 DIV 标签？](https://stackoverflow.com/questions/13877743/how-to-wrap-div-tags-with-different-class-names-in-jquery)

我在文档中重复了以下 HTML 块

```
<!-- first block -->
<div class="first">
   My first div
</div>
<div class="second">
   My second div
</div>

<!-- second block -->
<div class="first">
   My first div
</div>
<div class="second">
   My second div
</div>

... 
```

如何使用 jQuery 包装 Div 块以获得以下结果...

```
<!-- first block -->
<div class="container">
   <div class="first">
      My first div
   </div>    
   <div class="second">
      My second div
   </div>
</div>

<!-- second block -->
<div class="container">
   <div class="first">
      My first div
   </div>    
   <div class="second">
      My second div
   </div>
</div>

... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:27:07.280

You can do something like this :

```
$('#btnTest').on('click', function() {
    $("body").append('<div class="container"></div>');
    $("body").append('<div class="container"></div>');

    $(".first").eq(0)
        .clone()
            .appendTo($(".container").eq(0))
            .end()
        .remove();

    $(".second").eq(0)
        .clone()
            .appendTo($(".container").eq(0))
            .end()
        .remove();

    $(".first").eq(0)
        .clone()
            .appendTo($(".container").eq(1))
            .end()
        .remove();

    $(".second").eq(0)
        .clone()
            .appendTo($(".container").eq(1))
            .end()
        .remove();
}); 
```

First you add to the DOM the number of div you want with class container. Then for each div .first and .second you have to take the first in the dom `$(".first").eq(0)` clone it, then append it to the first ".container". You have to use `.end()` before remove to make sure to remove the original div and not the cloned one.

You do this for each div and you change the ".container" by changing the number in `$(".container").eq(0)`.

This code works fine for your example, but if you have more ".container" you should make a loop of it.

# c# - C# 报表服务中的两个标头

> ID：13878541
> 
> 赞同：-2
> 
> 时间：2012-12-14T12:17:25.220
> 
> 标签：c#, visual-studio-2010, reporting-services, header, rdlc

我正在尝试使用特定模板为我的项目创建报告。有三个组，我们称之为公寓、建筑和居民。

我们有6栋楼。每栋建筑包含 20 套公寓，每套公寓包含 N 个居民。

我正在尝试创建的报告遵循此模板：

# A楼

## 居民 | 公寓

   居民A | 公寓 1
   居民 B | 公寓 1
   居民 C | 公寓 2
   居民 D | 3号公寓

# B楼

## 居民 | 公寓

   居民E | 公寓 1
   居民 F | 公寓 2
   居民 G | 公寓 2
   居民 H | 3号公寓

是否可以使用 Visual Studio 2010 中的 Report Service 执行此类操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:23:24.143

如果您希望在网格（tablix？）中使用它，您可以创建相应的分组。另一种解决方案是使用 a`List`并通过构建对其进行分组。然后，`List`您可以在其中自由地使用其他控件进行布局。

# objective-c - 动态移动 UIButton

> ID：13878542
> 
> 赞同：2
> 
> 时间：2012-12-14T12:17:31.920
> 
> 标签：objective-c, ios, dynamic, uibutton, position

我一直在互联网上寻找答案，但似乎我没有任何答案。好吧，我一直在尝试做的是根据文本字段的高度动态移动 UIButton。

例如，我有这样的：“Lorem Ipsum 只是印刷和排版行业的虚拟文本。自 1500 年代以来，Lorem Ipsum 一直是行业的标准虚拟文本，当时一位不知名的印刷商采用了一种类型的厨房并将其打乱以制作一个打字标本簿。”

当然，文本字段会根据我找到的这段代码增加它的高度。

```
CGRect frame = txtCardOffer.frame;
frame.size.height = txtCardOffer.contentSize.height;
txtCardOffer.frame = frame; 
```

并增加 UiScrollView 高度，

```
CGFloat scrollViewHeight = 0.0f;
container.showsHorizontalScrollIndicator = NO;
container.showsVerticalScrollIndicator = NO;
for (UIView* view in container.subviews)
{
    if (!view.hidden)
    {
        CGFloat y = view.frame.origin.y;
        CGFloat h = view.frame.size.height;
        if (y + h > scrollViewHeight)
        {
            scrollViewHeight = h + y;
        }
    }
}
container.showsHorizontalScrollIndicator = YES;
container.showsVerticalScrollIndicator = YES;

[container setContentSize:(CGSizeMake(container.frame.size.width, scrollViewHeight))]; 
```

现在一切都设置好了，除了提交按钮。我不知道如何使该按钮根据文本字段的高度更改其垂直位置。它就在中间。好像它在 CSS 上使用 position:absolute 一样。

你们能帮帮我吗？在 Google 上搜索的关键字已经用完了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:23:45.893

尝试将按钮的框架设置为

```
[btn setFrame : CGRectMake(x, txtCardOffer.frame.origin.y+txtCardOffer.frame.size.height, 30,60)]; 
```

# jquery - 无法使用本地数据和 tokenLimit 在 tokenInput Jquery 插件的搜索文本框中输入

> ID：13878543
> 
> 赞同：1
> 
> 时间：2012-12-14T12:17:40.133
> 
> 标签：jquery, plugins, types, input, token

我在我的应用程序中使用 tokeninput 插件，其中数据是从 JSP servlet 获取并在 UI 上呈现的。此方案涉及获取如下服务区域列表：

```
[{"id":1,"name":"Service Area1"},{"id":2,"name":"Service Area2"},{"id":3,"name":"Service Area3"},{"id":4,"name":"Service Area4"},{"id":5,"name":"Service Area5"},{"id":6,"name":"Service Area6"}] 
```

这个 JSON 对象是在 JSP 中使用输入隐藏标签提供的

```
<input type="hidden" value="<c:out value="${serviceAreaList}"></c:out>" id = "serviceAreaList" /> 
```

其中 serviceAreaList 是从 java 服务器端代码返回的对象。

现在我有一个表单的输入文本框

```
<input type="text" name="serviceArea" class="input-field142" maxlength="15" id="choose_lis3" name="serviceArea"/> 
```

令牌输入应用为：

```
var serviceAreaList = $("#serviceAreaList").val();
$( 'input[id=choose_lis3]' ).tokenInput(serviceAreaList, {tokenLimit: 3}); 
```

但现在在 UI 中我无法在搜索文本框字段中输入。难道我做错了什么？我调试了令牌输入代码，查询字符串为空“”因为我无法在文本中输入任何内容。

# javascript - 如何检测浏览器高度，减去一定数量的像素，然后输出该数字？

> ID：13878553
> 
> 赞同：1
> 
> 时间：2012-12-14T12:18:21.867
> 
> 标签：javascript, jquery

这可能吗？也可以使用 jQuery。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:28:14.127

您在问题中以及在被要求澄清时在问题的评论中都提到了“浏览器高度”。

答案是：**不**，不可能找出**浏览器**窗口的高度。但是，99.99999% 的时间，你不在乎。

您可以了解：

*   页面显示区域（视口）的高度，通过`$(window).height()`; [更多的](http://api.jquery.com/height)

*   整个文档的高度（可以比视口短或高）通过`$(document).height()`（相同链接）

*   通常甚至是用户屏幕的高度（通过[`window.screen.height`](https://developer.mozilla.org/en-US/docs/DOM/window.screen)）

*但是，这些都没有给你浏览器窗口*的高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T12:21:08.473

您要么需要：

```
$(window).height();//viewport 
```

或者

```
$(document).height();//complete document 
```

或者

```
window.screen.height;//screen resolution height 
```

它返回一个**整**数值，因此您可以对其进行计算

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T12:22:40.833

以下代码将变量 winW 和 winH 设置为浏览器窗口的内部宽度和高度，并输出宽度和高度值。如果用户的浏览器非常旧，则 winW 和 winH 分别设置为 630 和 460。

```
var winW = 630, winH = 460;
if (document.body && document.body.offsetWidth) {
 winW = document.body.offsetWidth;
 winH = document.body.offsetHeight;
}
if (document.compatMode=='CSS1Compat' &&
    document.documentElement &&
    document.documentElement.offsetWidth ) {
 winW = document.documentElement.offsetWidth;
 winH = document.documentElement.offsetHeight;
}
if (window.innerWidth && window.innerHeight) {
 winW = window.innerWidth;
 winH = window.innerHeight;
}

document.writeln('Window width = '+winW);
document.writeln('Window height = '+winH); 
```

[取自这里](http://www.javascripter.net/faq/browserw.htm)
您当然可以在打印值之前进行减法/加法/乘法/任何您想要的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T12:19:31.383

```
alert( $(window).height() - 100 ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T12:20:04.550

`height()`是你要找的..

[http://api.jquery.com/height/](http://api.jquery.com/height/)

```
var heght= $(window).height(); //this gives you the height of the window
alert(heght - 50); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-14T12:20:06.843

```
function getDocHeight() {
var D = document;
return Math.max(
    Math.max(D.body.scrollHeight, D.documentElement.scrollHeight),
    Math.max(D.body.offsetHeight, D.documentElement.offsetHeight),
    Math.max(D.body.clientHeight, D.documentElement.clientHeight)
) - mynumber ;
} 
```

如果实际文档的正文高度小于视口高度，则它将返回视口高度。

和 jQuery 方法：

```
$.getDocHeight = function(){
 var D = document;
 return Math.max(Math.max(D.body.scrollHeight,    D.documentElement.scrollHeight), Math.max(D.body.offsetHeight, D.documentElement.offsetHeight), Math.max(D.body.clientHeight, D.documentElement.clientHeight));
};

alert( $.getDocHeight() - mynumber); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-14T12:23:11.363

 `````
$(window).height();   // returns height of browser viewport
$(document).height(); // returns height of HTML document

$(window).width();   // returns width of browser viewport
$(document).width(); // returns width of HTML document 
````  `* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-14T12:23:12.783

您还可以使用：

```
 document.body.clientHeight 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-14T12:24:17.560

你应该像这样寻找Jquery的高度函数 `$(window).height() or $(document).height()`

对于减去像素，只需使用 `$(window).height()-5```

# sql - 使用sql server参数化输入？

> ID：13878557
> 
> 赞同：3
> 
> 时间：2012-12-14T12:18:43.307
> 
> 标签：sql, sql-server, parameters, sql-injection

我想参数化我的存储过程的输入以防止 sql 注入。问题是我的数据库没有应用程序（它只是用于学校）并且由于没有像 C# 等这样的客户端语言，我必须用 sql 本身来做。我做了这个

```
ALTER procedure [dbo].[drop_tt]
@ss varchar(40)
as
EXEC sp_executesql N'SELECT *
FROM    tt
whERE   ss = @Ss', N'@ss varchar(40)', @ss 
```

但是当我执行这个语句时，tt表被删除了:( exec drop_tt 'www';drop table tt--'

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:35:53.933

**简而言之：**你为什么要改变 sp？您只需要创建一个参数化的存储过程，例如：

```
CREATE PROCEDURE uspGetAddress @City nvarchar(30)
AS
SELECT * 
FROM AdventureWorks.Person.Address
WHERE City = @City
GO 
```

看看这个非常[简单的教程](http://www.mssqltips.com/sqlservertutorial/162/how-to-create-a-sql-server-stored-procedure-with-parameters/)，你不需要改变你的程序。

**编辑：**我的方法是去掉以 .`EXEC sp_executesql`开头的语句和命名`drop`。只需尝试在正文中简化您的存储过程执行语句。

# c# - 将 DataColumn 添加到 DataTable 时，对象引用未设置为对象的实例

> ID：13878558
> 
> 赞同：4
> 
> 时间：2012-12-14T12:18:44.633
> 
> 标签：c#, datatable

当我尝试将新列添加到数据表中时，我得到的对象引用未设置为对象的实例。这是我的代码：

```
DataColumn clUniqueID = new DataColumn();

clUniqueID.Caption = "UniqueID";
clUniqueID.ColumnName = "UniqueID";
clUniqueID.DataType = typeof(int);
dtMain.Columns.Add(clUniqueID); 
```

`dtMain`是一个公共数据表。我将此代码放在我的 Win 应用程序中的表单加载中，当我尝试加载我的表单时，它会抛出错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T12:23:52.150

您应该确保实际初始化了 dtMain：

```
DataTable dtMain; //datatable not initialized, it will be null

DataTable dtMain = new DataTable(); //initialized datatable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-19T16:51:31.990

在合并期间可以获得空引用的另一种情况是列名不同，即使按大小写

> 当两个表的主键仅在大小写不同时，您可能会遇到空引用异常。[来源](https://social.msdn.microsoft.com/Forums/en-US/5169d9c8-631a-4483-b04f-ec539bcb7ca9/datatablemerge-throws-nullreferenceexception?forum=adodotnetdataset)

这正是我的问题。**两个数据表中主键的列名必须相同！**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T12:23:34.607

您需要像这样初始化 DataTable：-

```
DataTable dtMain = new DataTable(); 
```

如果您像这样创建它：-

```
DataTable dtMain; 
```

然后是它的空对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-30T07:33:30.447

我有一个相当不同的问题，其中价值项目不可用

考虑以下：

```
DataTable dtStatusDetails = new DataTable();
    dtStatusDetails.Columns.Add("D1", typeof(string));
    dtStatusDetails.Columns.Add("D2", typeof(string));
dtStatusDetails.Rows.Add(
    data1.Value.ToString(),
    data2.Value.ToString(),
); 
```

这`data1`是`null`有价值的，异常是在添加行之前在第 3 行（在这种情况下）行显示相同的错误。放置一个 null('?') 检查对我有帮助。

如果有人忘记了空检查，这应该会有所帮助

# android - Android 应用内计费版本 2 订阅静态响应不起作用

> ID：13878559
> 
> 赞同：0
> 
> 时间：2012-12-14T12:18:45.227
> 
> 标签：android, subscription, billing, in-app

在 Android In-app billing version 2 订阅静态响应不起作用，像 android.test.purchased 这样的静态响应适用于应用内产品，但同样不适用于订阅

1）还有其他测试吗（我们想做一个静态响应测试来节省我们的时间

2）任何人都可以分享应用内计费订阅的工作代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T19:52:19.113

测试应用内订阅计费是可怕的。您可以在您的 SDK 中测试 adroid.test.purchased 以确保您正确解析响应。要测试订阅，请在开发者控制台上将测试产品添加到订阅产品并发布产品。您必须发布产品才能使其正常工作。建立 google 组并将测试电子邮件帐户添加到组。邀请测试人员。然后将您的 .apk 上传到 ALPHA 并发布。您必须将其发布为测试电话的 Alpha 版并登录才能找到它。

转到 ALPHA 选项卡下提供的链接以设置测试人员并使用其中一封测试电子邮件从手机登录。购买 inapp 产品以确保您的所有代码都能正常工作。您可以取消在 Google 电子钱包中购买的测试产品并重新使用产品，直到代码正确为止。然后设置一个测试订阅产品。每封测试电子邮件您只能测试一次订阅。无法删除测试订阅。请务必在上传之前更改您的 apk 中的产品名称。另外，更改 AndroidManifest 中的版本代码，并关闭调试。

如果您尝试在设备上安装应用两次，您可能需要在手机中的设置下清除这些应用中的数据：chrome、play store、play services，否则它会继续认为您已安装并不会下载它。您必须从浏览器访问测试 .apk，而不是通过 Play 商店。

这是我经历过的最繁重的测试。此外，请注意来自 Google IABilling 响应的错误，因为产品的“已拥有”响应与订阅不同。我仍在试图弄清楚已经拥有的订阅的响应是什么。如果我发现会更新。这个解释是我在任何地方找到的唯一可用信息，这是经过数周的反复试验。如果你有更多这方面的数据，请分享！！！

# postgresql - 索引两个“时间戳”列的最佳方法

> ID：13878562
> 
> 赞同：2
> 
> 时间：2012-12-14T12:18:54.337
> 
> 标签：postgresql, indexing

我应该如何索引两`timestamp`列（即`starts_at`和`ends_at`），它们几乎总是在查询中一起使用（如`starts_at >= ? AND ends_at <= ?`）？为两列创建复合索引或分别索引每一列？

顺便说一句，如果重要的话，我正在使用 Postgres :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-12-02T19:09:19.173

这是为了后代的缘故，因为我看到它很久以前就得到了回答。这假设 Postgres 9.2+。如果您有一系列日期，则应将`tsrange`其用作数据类型：

```
create table events(
  id serial primary key,
  name text not null unique,
  duration tsrange not null
); 
```

范围的好处是你可以用它们做一些惊人的查询，根据你的需要，这是最好的部分：

```
create index idx_event_duration on events
using GIST(duration); 
```

现在您可以使用各种特殊运算符进行查询：

```
select * from events where
duration @> (now() - interval '2 weeks'); 
```

[你可以在这里阅读更多关于它们的信息](https://www.postgresql.org/docs/10/static/rangetypes.html)。这几乎没有触及他们可以做的事情的表面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T12:27:27.573

如果这两列是真正的时间戳，其中包含**完全相同**的时间戳的行数很少，那么复合键确实没有用，因为范围扫描无法为第一个选择单个值。如果字段是日期，这可能会有所不同，因为日期通常可以匹配时间戳不匹配的地方。它有一点好处，但我的经验是它不是很大。

如果您使用的是足够大且密集的数据集（如果单个索引扫描需要扫描大部分索引），则查询计划器可以使用多个索引，将它们与位图结合起来。

[http://www.postgresql.org/docs/current/static/indexes-bitmap-scans.html](http://www.postgresql.org/docs/current/static/indexes-bitmap-scans.html)

与此类问题一样，值得在您的数据集上运行测试。

# c# - 如何使用代理检测我的客户？

> ID：13878565
> 
> 赞同：0
> 
> 时间：2012-12-14T12:19:09.950
> 
> 标签：c#, winforms, proxy, client

我正在开发一个 Windows 应用程序。它调用一个网络服务。但是我的一些客户使用代理。对于使用代理的客户端，我想显示一个消息框并重定向到代理凭据信息的应用程序设置 WinForm。

那么如何检测客户端正在使用代理呢？（我正在使用 C#）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:25:53.540

只需通过[WebRequest.DefaultWebProxy检查](http://msdn.microsoft.com/en-us/library/system.net.webrequest.defaultwebproxy.aspx)

```
string sampleURL = "http://proxy.example.com";
bool useProxy = !string.Equals(System.Net.WebRequest.DefaultWebProxy.GetProxy(new Uri(sampleURL)), sampleURL);    
Console.WriteLine( useProxy ? "Yes" : "No"); 
```

或者通过简单的演员检查：

```
if (System.Net.WebRequest.DefaultWebProxy as System.Net.WebProxy != null) {} 
```

# java - 在 jsf 2 应用程序中为页面添加书签

> ID：13878568
> 
> 赞同：0
> 
> 时间：2012-12-14T12:19:19.340
> 
> 标签：java, jsf, rest, get, bookmarks

我有这个 JSF 2 Web 应用程序，它从数据库中检索推文列表并将它们显示为带有 Primefaces 的数据列表

（最好是试试看我的意思。去[www.tweetreference.org](http://www.tweetreference.org)，点击“read a tweet reference”，然后输入“@seinecle”）

如何使此列表可收藏，以便可以直接返回该页面？甚至可能吗？[我已经阅读了 JSF2 中的 GET 请求和 url 书签，但没有成功...]

页面源代码：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>TweetReference</title>
        <h:outputStylesheet library="css" name="index.css" />
    </h:head>
    <h:body>    

        <h:link value="back to the home page" outcome="index.xhtml" />

        <div id="box">
            <div id="text">
                <div id="title">Tweet references for #{controllerBean.searchTerm}:</div>
                <div class="datalist-noborder">
                    <p:dataList value="#{searchResultsBean.references}" var="ref" itemType="none">  
                        <br></br>
                        <br></br>
                        <br></br>
                        <span style="float: left;"><img src="#{ref.author.pic_url}" width="85"></img></span>
                        <span style="font-size: 12px;padding-left: 10px;">
                            <b>#{ref.author.realName} (@#{ref.author.screenName})</b></span>
                        <br></br>
                        <span style="font-size: 12px;padding-left: 10px;">#{ref.author.description}</span>
                        <br></br>
                        <span style="font-size: 12px;padding-left: 10px;"><b>#{ref.author.location}</b></span>
                        <br></br>
                        <span style="font-size: 12px;padding-left: 10px;">[#{ref.author.followersCount} followers on Twitter].</span>
                        <br></br>
                        <br></br>
                        said in #{ref.monthYear}:
                        <span style="font-size: 40px;">&ldquo;</span>#{ref.text}<span style="font-size: 40px;">&rdquo;</span>  
                    </p:dataList>  
                </div>
            </div>
        </div>

    </h:body>
</html> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:29:51.590

您将字段发送为`POST`，要成为书签，您需要发送为`GET`。但是我从[这个答案](https://stackoverflow.com/a/4823289/804976)中读到你可以重定向`POST`到`GET`包括视图参数，所以这可能是一个解决方案：

```
<h:commandButton value="Submit" action="form?faces-redirect=true&amp;includeViewParams=true"/> 
```

# php - 使用codeigniter，ajax如何从数组中获取下一条记录

> ID：13878576
> 
> 赞同：1
> 
> 时间：2012-12-14T12:19:44.337
> 
> 标签：php, codeigniter, jquery

我有一个数组

```
http://www.postano.com/api/posts.php?ak=XXXX&ts=XXXXX&sig=XXXXX&postano=12345&start=0&count=20 
```

我最初将获取前 20 条记录。这是课程

```
class social extends CI_Controller{
function data()
{
$start = $k;

$resultjson = $this->curl->simple_get("http://www.postano.com/api/posts.php?ak=XXXXX&ts=XXXXX&sig=XXXXX&postano=12345&start=$k&count=20");
$resultant_data = json_decode($resultjson,true);
foreach ($resultant_data as $key => $value)
     {
     //print_r($value);
     $this->load->view('feeds',$value);
     }
 }

} 
```

这里提要是我的**看法**。

我怎样才能获取接下来的 20 条记录说`start or $k = 2`0 以便我可以显示结果`0-20 then 21-40 and so on...`

我正在尝试实现**自动加载**或**加载更多**功能。 **我没有使用模型（数据库）唯一的来源是 json 响应**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:48:03.263

由于您在聊天中提到要使用 AJAX，因此在页面加载时会出现您想要的第一个请求。加载您的 20 个结果。

当您想要更多结果时，发送一个 AJAX 请求，并从请求 curl 的脚本请求更多产品，从指定的起点和限制（如 Havelock 提到的），类似于

```
http://www.postano.com/api/posts.php?ak=XXXX&ts=XXXXX&sig=XXXXX&postano=12345&s‌​tart=21&count=20 
```

然后返回您从 ajax 请求中获得的结果，如果您想保留从页面加载获得的前 20 个结果，则将其附加到页面，否则替换它。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T20:14:09.017

我建议您将变量**$page**作为参数传递给**data() 函数**，这将用作分页。

在你的 data() 函数中，设置

```
$start = $page*$count+1; 
```

像

在第一页或第一组记录中，即从 1 到 20，$page 将为 1。

如果要求下一个记录列表，请将其设置为 2。

# c# - htmlElement 的设置属性不起作用

> ID：13878578
> 
> 赞同：1
> 
> 时间：2012-12-14T12:19:55.080
> 
> 标签：c#, winforms, webbrowser-control, setattribute

我遇到了一个奇怪的问题。我正在尝试通过设置两个输入的值属性并调用单击提交输入来使用网络**浏览器登录网站，一个输入用于用户名，另一个用于密码。**

```
 HtmlElement tempElement;

         // typing email of the user to the email textbox.
        tempElement = browser.Document.GetElementById("txtUserName");
        tempElement.SetAttribute("value", userName);

        // typing password of the user to the password textbox.
        tempElement = browser.Document.GetElementById("txtPassoword");
        tempElement.SetAttribute("value", "123456"); 
```

现在根据需要设置用户名输入的值，但设置密码输入的值不起作用。我试图只更改密码输入的**OuterHtml**但它仍然没有改变，似乎尝试更改密码输入的每件事都不起作用。

有人知道为什么设置密码输入的 value 属性不起作用吗？

# git - 从裸回购中提取的接收后挂钩

> ID：13878583
> 
> 赞同：1
> 
> 时间：2012-12-14T12:20:11.773
> 
> 标签：git

在我们的服务器上，每个项目都有 2 个文件夹：/repository 和 /htdocs。Htdocs 是存储库的克隆，它是裸存储库。每个开发人员都有自己的存储库克隆可供使用。htdocs 可用于向项目经理预览项目。

我想设置一个 post-receive 挂钩，当开发人员推送更新时自动更新 htdocs。

我在接收后挂钩中有以下内容：

```
#!/bin/sh
GIT_WORK_TREE=../htdocs git pull origin master 
```

但是，当我推送时，我看到以下错误：![git错误](../Images/e4da4e7c63b46de1701d0bcd61ecbe4f.png)

谁能告诉我出了什么问题？

注意

```
#!/bin/sh
GIT_WORK_TREE=../htdocs git checkout -f 
```

有效，但这有点慢（因为项目很大）。也有可能有人在 htdocs 中做了一些错误修复，`checkout -f`如果他们没有提交，这些错误修复会丢失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T00:53:15.373

这应该有效：

```
 GIT_WORK_TREE=../htdocs GIT_DIR=../htdocs/.git git pull origin master 
```

如果您不指定 GIT_DIR，git 认为 repo 仍然是“ `repository`”（裸 repo），它可能没有名为“ `origin`”的远程（因此出现错误消息）。

# java - 并发混合队列和监听器

> ID：13878585
> 
> 赞同：2
> 
> 时间：2012-12-14T12:20:28.997
> 
> 标签：java, multithreading, queue

我有一个`EventsManager`从外部源接收事件。一个`Event`有一个`type`和一个`value`。

侦听器可以注册到`EventsManager`以被告知某种类型事件的连续值。

对于`EventsManager`给定类型的事件，承诺两件事：

*   相同的值不会连续发送两次（当侦听器收到通知时，他们保证收到的值与上一次通知的值不同）。
*   对于给定类型的事件，必须保留从外部源接收值的顺序。

我有一个工作`synchronized`版本，但我想提高吞吐量。

典型用途：< 1k 侦听器，< 10k 事件类型，< 1M 每秒接收的事件（但大多数被丢弃，因为没有为该类型事件注册的侦听器或值未更改）。

*   实现该行为的最有效策略是什么（例如，我可以为每种事件类型使用一个队列/锁并将它们保存在 ConcurrentMap 中，但拥有 10k 个队列听起来不是一个好主意）？
*   是否有任何现有的库可以使用可扩展的并发结构做类似的事情？

示例：Listener`lst1`想要监听`type1`
EventManager 接收到的事件类型：

```
event: type2, value: 2
event: type1, value: 1
event: type1, value: 1 //no change => discard
event: type3, value: 4
event: type1, value: 7 
```

`lst1`应该按以下顺序接收：（`1`仅一次） then `7`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:28:43.440

这个答案会随着评论的添加而改变。

**如果**您可以控制外部源，最快的改进是防止该源发送保证被丢弃/忽略的消息。例如，外部源可以保留一个`Map`或一些其他允许快速查找 + 更新的数据结构。外部来源将能够确定需要将哪些信息发送给您的`EventQueue`

**如果**您**不**控制外部来源，则队列应该有可能`Event`像您在原始帖子中所说的那样保持通用。我建议添加一个`Radix Tree`从您的`Queue`. 我的意思是将队列生成的值存储在[radix tree](http://en.wikipedia.org/wiki/Radix_tree#Lookup)中。这允许以下操作：

> 与平衡树不同，基数树允许在 O(k) 时间内而不是 O(log n) 时间内进行查找、插入和删除。这似乎不是一个优势，因为通常 k ≥ log n，但在平衡树中，每个比较都是字符串比较，需要 O(k) 最坏情况时间，其中许多在实践中很慢，因为公共前缀较长 (在比较从字符串开头开始的情况下）。在一个 trie 中，所有的比较都需要固定的时间，但是查找一个长度为 m 的字符串需要 m 次比较。基数树可以用更少的比较来执行这些操作，并且需要更少的节点。

**更新**

**问题：**

> 你知道基数树的线程安全实现吗？

[并发树](http://code.google.com/p/concurrent-trees/) 没有测试过这些！

[API：并发基数树](http://concurrent-trees.googlecode.com/svn/concurrent-trees/javadoc/apidocs/com/googlecode/concurrenttrees/radix/ConcurrentRadixTree.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T12:54:31.323

我会尝试实现这个事件流

1.  所有传入的事件都被放入一个初始的**EventQueue**
2.  **EventDispatcherThread**读取 EventQueue，并将事件**过滤并路由**到每种类型的适当**EventQueue**（队列的简单映射）
3.  **EventListernerThread**的多个实例正在读取其类型的相应 EventQueue...

不需要锁/同步

# tcp - Erlang中socket的“packet”选项怎么能如此加速tcp传输呢？

> ID：13878587
> 
> 赞同：6
> 
> 时间：2012-12-14T12:20:35.860
> 
> 标签：tcp, erlang, ip, packet, transmission

使用 {packet,4} 通过 localhost 的两个不同端口传输 1G 数据仅需 8 秒，而使用 {packet,raw} 无法在 30 秒内完成相同的任务。我知道如果使用后一种方法，数据将以数万小块的形式到达（在archlinux上大小为1460字节）。我已经了解了 TCP/IP 协议的某些方面，并且几天来一直在思考这个问题，但仍然无法弄清楚确切的区别是什么。真诚期待一些**自下而上的**解释。

```
-module(test).

-export([main/1]).

-define(SOCKOPT, [binary,{active,true},{packet,4}]).

main(_) ->
    {ok, LSock} = gen_tcp:listen(6677, ?SOCKOPT),
    spawn(fun() -> send() end),
    recv(LSock).

recv(LSock) ->
    {ok, Sock} = gen_tcp:accept(LSock),
    inet:setopts(Sock, ?SOCKOPT),
    loop(Sock).

loop(Sock) ->
    receive
        {tcp, Sock, Data} ->
            io:fwrite("~p~n",[bit_size(Data)]),
            loop(Sock);
        {tcp_closed, Sock} -> ok
    end.

send() ->
    timer:sleep(500),
    {ok, Sock}=gen_tcp:connect("localhost", 6677, ?SOCKOPT),
    gen_tcp:send(Sock, binary:copy(<<"1">>, 1073741824)),
    gen_tcp:close(Sock). 
```

```
$ time escript test.erl
8589934592

real    0m8.919s
user    0m6.643s
sys     0m2.257s 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-25T10:55:39.490

当数据被小块接收时，接收端的内核缓冲区会很快填满。它将减少发送方的拥塞窗口大小，迫使发送方以较低的速率推送数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T18:04:58.990

当您使用 {packet,4} 时，erlang 首先读取 4 个字节以获取数据长度，分配一个缓冲区来保存它，并在获取每个 tcp 数据包后将数据读入缓冲区。然后它将缓冲区作为一个数据包发送到您的进程。这一切都发生在内置的读取代码中，这相当快。

当您使用 {packet,raw} 时，erlang 在接收到每个 tcp 数据包后会向您的进程发送一条消息，因此对于每个 tcp 数据包它会做更多的事情。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-11-07T09:31:33.923

尝试

```
-define(SOCKOPT, [binary,{active,true},{recbuf, 16#FFFFFF}, {sndbuf, 16#1FFFFFF}]) 
```

# c# - 使用 Linq 从 xml 解析内部节点

> ID：13878590
> 
> 赞同：0
> 
> 时间：2012-12-14T12:20:43.903
> 
> 标签：c#

[这个问题是对此](https://stackoverflow.com/questions/13878004/parsing-xml-with-inner-nodes?rq=1)的跟进。

当我尝试使用 linq 读取内部节点时，它不会按预期将集合返回给我，而是只给我一个项目。请看测试。

```
 [Test]
        public void Should_get_all_items()
        {
            var item = "<Item status=\"SUCCESS\""+
            " message=\"\">" +
            "<ItemDate>12/21/2012" +
            "<ItemType>MyType1" +
            "<ItemUrl title=\"ItemTitle\">http://www.itemurl1.com</ItemUrl>" +
            "</ItemType>" +
            "</ItemDate>" +
            "<ItemDate>12/22/2012" +
            "<ItemType>MyType2" +
            "<ItemUrl title=\"Item2Title\">http://www.itemurl2.com</ItemUrl>" +
            "</ItemType>" +
            "</ItemDate>" +
            "</Item>";

            XDocument xdoc = XDocument.Parse(item);
            var query = from i in xdoc.Descendants("Item")
                        let date = i.Element("ItemDate")
                        let type = date.Element("ItemType")
                        let url = type.Element("ItemUrl")
                        select new ItemDate()
                        {
                            Date = ((XText)date.FirstNode).Value,
                            Type = ((XText)type.FirstNode).Value,
                            Url = (string)url,
                            Title = (string)url.Attribute("title"),
                        };

            var qItems = query.ToList();
            Assert.That(qItems.Count, Is.EqualTo(2));
        }

 public class ItemDate
    {
        public string Date { get; set; }
        public string Type { get; set; }
        public string Url { get; set; }
        public string Title { get; set; }
    } 
```

上面的测试失败了。知道这里出了什么问题吗？我认为 Item 的名称在这里有点误导，因为我在收集 ItemDates

谢谢，-迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:30:11.607

```
var items = xdoc.Descendants("ItemDate")
    .Select(e => new ItemDate
    {
        Date = e.FirstNode.ToString(),
        Type = e.Element("ItemType").FirstNode.ToString(),
        Url = e.Element("ItemType").Element("ItemUrl").Value,
        Title = e.Element("ItemType").Element("ItemUrl").Attribute("title").Value
    })
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:24:25.047

测试失败，因为您的 XML 只有一个`Item`节点，因此您只有一个结果。

# javascript - 如何在 Javascript 中捕获有关文本选择更改的 iOS Safari 事件？

> ID：13878593
> 
> 赞同：10
> 
> 时间：2012-12-14T12:20:47.287
> 
> 标签：javascript, ios, events, safari, selection

以下场景：在 iOS Safari 上选择文本时（假设“正常”html 页面）出现蓝色覆盖，表示您选择了特定段落。此外，您可以更改该选择，以更正您的初始选择区域。我有兴趣确切地捕获该事件，完成选择区域时。是否有可能（如果是，如何？）在 Javascript 中捕获这样的事件？提前谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-14T15:11:31.867

Mobile Safari 支持在节点`selectionchange`上触发的事件：`Document`

```
document.addEventListener("selectionchange", function() {
    alert("Selection changed!");
}, false); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-02T05:52:17.053

我发现即使在单个单词选择时（通过点击），此事件也会多次触发，当然，当您拖动选择句柄时它会触发......

我创建了一个小解决方法来仅获取文本选择结束事件。

你可以**在这里**看到：[文本选择事件结束？](https://stackoverflow.com/questions/15076173/end-of-text-selection-event)

或在**我博客**上的一篇小文章中： [http ://www.dimshik.com/end-of-text-selection-event-on-ios-workaround/](http://www.dimshik.com/end-of-text-selection-event-on-ios-workaround/)

# python - 事务性小任务中的非事务性操作

> ID：13878594
> 
> 赞同：1
> 
> 时间：2012-12-14T12:21:02.420
> 
> 标签：python, google-app-engine, app-engine-ndb

我正在使用 Google App Engine SDK 1.7.3 和 NDB 来访问数据存储区。

我应该如何从事务性小任务中运行非事务性小任务？

以下是首先想到的：

```
@ndb.tasklet
@ndb.non_transactional
def non_txn_method():
    ''' Run some code that does not require a transaction '''
    result = calculate_result()
    raise ndb.Return(result)

@ndb.tasklet
@ndb.transactional
def txn_method():
    ''' Run some code that requires a transaction '''
    non_txn_result = yield non_txn_method() 
```

然而，NDB 的创建者[建议](https://groups.google.com/d/msg/appengine-ndb-discuss/XBMMmA661a8/JbTDJk2_y4IJ)不要将装饰器（例如 is done 与`@ndb.tasklet`and ）`@ndb.transactional`结合使用，而是使用该`ndb.transaction_async(callback, **ctx_options)`函数。有关执行此操作的问题，请参见[此处](http://code.google.com/p/appengine-ndb-experiment/issues/detail?id=195&colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary%20Stars)。因此，我担心将`@ndb.tasklet`和`@ndb.non_transactional`装饰器结合起来也可能很脆弱并且容易出现意外行为。

请注意，`ndb.transaction_async(callback, **ctx_options)`在[NDB API](https://developers.google.com/appengine/docs/python/ndb/functions)中提供但不是`ndb.non_transaction_async(callback, **ctx_options)`.

我想知道是否`ndb.non_transaction_async(callback, **ctx_options)`需要在 NDB API 中公开一个函数来帮助我稳健地完成我想做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T01:03:36.303

请注意，以下装饰器顺序按预期工作（至少从 1.7.3 开始）：

```
@ndb.non_transactional
@ndb.tasklet
def non_txn_method():
  # If calling old db, need this too:
  datastore._SetConnection(None)
  # ... 
```

由于这个[错误](http://code.google.com/p/appengine-ndb-experiment/issues/detail?id=232)，需要旧的数据库解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T22:45:25.237

我建议您在 NDB 错误跟踪器中为提议的新功能提交错误： [http ://code.google.com/p/appengine-ndb-experiment/issues/list](http://code.google.com/p/appengine-ndb-experiment/issues/list)

# sql - 内部联接 SQL 数据透视表

> ID：13878595
> 
> 赞同：2
> 
> 时间：2012-12-14T12:21:04.870
> 
> 标签：sql, sql-server, tsql, pivot

我似乎无法内部加入教师表以获得名字和姓氏。

```
select * 
from BookingDays bd
inner join Teachers t 
  on t.ID = bd.TeacherID
pivot 
(
  max (bd.BookingDuration) 
  for bd.DayText in ([MONDAY], [TUESDAY], [WEDNESDAY], [THURSDAY], [FRIDAY])
) as MaxBookingDays
where bd.BookingDate >= (SELECT DATEADD(ww, DATEDIFF(ww,0,GETDATE()), 0)) and   
   bd.BookingDate <= (SELECT DATEADD(ww, DATEDIFF(ww,0,GETDATE()), 6)) ' 
```

我得到的错误信息是 -

```
Msg 8156, Level 16, State 1, Line 3
The column 'ID' was specified multiple times for 'MaxBookingDays'.
Msg 4104, Level 16, State 1, Line 4
The multi-part identifier "bd.BookingDate" could not be bound.
Msg 4104, Level 16, State 1, Line 4
The multi-part identifier "bd.BookingDate" could not be bound. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T12:29:17.740

下面的错误是因为您没有指定列：

> *消息 8156，第 16 层，状态 1，第 3 行*
> 
> *为“MaxBookingDays”多次指定了“ID”列。*

因此，我会将您的查询稍微更改为以下内容：

```
select *
from
(
  -- don't use select *, call out your fields
  -- and use a sub-query with your WHERE inside the subquery
  select bd.BookingDuration, bd.Otherfields, t.Fields
  from BookingDays bd
  inner join Teachers t 
    on t.ID = bd.TeacherID
  where bd.BookingDate >= (SELECT DATEADD(ww, DATEDIFF(ww,0,GETDATE()), 0)) and   
    bd.BookingDate <= (SELECT DATEADD(ww, DATEDIFF(ww,0,GETDATE()), 6))
) src
pivot 
(
  max (BookingDuration) 
  for DayText in ([MONDAY], [TUESDAY], [WEDNESDAY],[THURSDAY], [FRIDAY])
) as MaxBookingDays 
```

# c# - 如何在 asp.net 中获取 Web 应用程序数据库状态？

> ID：13878602
> 
> 赞同：0
> 
> 时间：2012-12-14T12:21:30.917
> 
> 标签：c#, asp.net, asp.net-mvc

我想显示`detail_report`托管在服务器上的 Web 应用程序的一页。

我们使用 asp.net 来创建该应用程序。

我有以下列表要显示`detail_page`

`Host Name` `Host Date/Time`

`Database Status`

`Build Version` `Build Timestamp`

我真的很想`Database Status`使用`Ping`但无法做到这一点。

任何人都可以帮助我我需要使用`asp.net + C#`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:26:47.440

为什么需要 ping 数据库才能获得数据库的状态？

只需在应用程序中**处理 sql 连接异常**就足以显示有关服务器状态的相关信息。除了异常处理之外，当您的数据库关闭时，您还可以使用连接字符串信息来显示数据库名称，以及来自资源文件（如 web.config）的其他信息。

但是，我希望您没有计划向您的用户显示连接字符串的用户名和密码 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T12:59:38.930

你可以尝试做这样的事情。希望这可以帮助。

```
public void displayDBDetails()
{
    SqlConnection sqlConn = new SqlConnection(string yourConnectionString);
    sqlConn.Open();

    string dbName = sqlConn.Database.ToString();
    string dbStatus = sqlConn.State.ToString();
    string dbServerVersion = sqlConn.ServerVersion.ToString();
    etc.....
} 
```

# objective-c - xcode 如何打开 iOS 6 地图？

> ID：13878604
> 
> 赞同：-3
> 
> 时间：2012-12-14T12:21:34.170
> 
> 标签：objective-c, xcode4.5

xcode 如何打开 iOS 6 地图？我怎样才能做到这一点？

谢谢回复![在此处输入图像描述](../Images/60604c3bfdbb269c6238014072986230.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T12:24:46.873

要打开带有路线的地图，您可以使用以下命令：

```
NSString *destinationAddress = @"Amsterdam";

Class itemClass = [MKMapItem class];
if (itemClass && [itemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)]) {

    CLGeocoder *geocoder = [[CLGeocoder alloc] init];
    [geocoder geocodeAddressString:destinationAddress completionHandler:^(NSArray *placemarks, NSError *error) {
        if([placemarks count] > 0) {

            MKPlacemark *placeMark = [[MKPlacemark alloc] initWithPlacemark:[placemarks objectAtIndex:0]];

            MKMapItem *mapItem = [[MKMapItem alloc]initWithPlacemark:placeMark];

            MKMapItem *mapItem2 = [MKMapItem mapItemForCurrentLocation];

            NSArray *mapItems = @[mapItem, mapItem2];

            NSDictionary *options = @{
        MKLaunchOptionsDirectionsModeKey:MKLaunchOptionsDirectionsModeDriving,
        MKLaunchOptionsMapTypeKey:
            [NSNumber numberWithInteger:MKMapTypeStandard],
        MKLaunchOptionsShowsTrafficKey:@YES
            };

            [MKMapItem openMapsWithItems:mapItems launchOptions:options];

        } else {
            //error nothing found
        }
    }];
    return;
} else {

    NSString *sourceAddress = [LocalizedCurrentLocation currentLocationStringForCurrentLanguage];

    NSString *urlToOpen = [NSString stringWithFormat:@"http://maps.google.com/maps?saddr=%@&daddr=%@",
                 [sourceAddress stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding],
                 [destinationAddress stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:urlToOpen]];
} 
```

这将打开地图应用程序并检查它是 ios5 还是 ios6。

对于 ios5，我使用这篇文章[http://www.martip.net/blog/localized-current-location-string-for-iphone-apps中的 LocalizedCurrentLocation](http://www.martip.net/blog/localized-current-location-string-for-iphone-apps)

对于 ios6，我使用 CLGeocoder 获取地标，然后用它和当前位置打开地图。

记得添加 CoreLocation.framework 和 MapKit.framework

# java - 授权 google calendar api 适用于个人帐户，但不适用于 google 域帐户

> ID：13878605
> 
> 赞同：2
> 
> 时间：2012-12-14T12:21:38.503
> 
> 标签：java, google-api, google-calendar-api, google-apps, google-api-java-client

我需要制作一个 Java 应用程序，将日历事件存储在 Google 域内的员工中。我根据在[http://code.google.com/p/google-api-java-client/wiki/APIs#Calendar_API上找到的示例创建了应用程序](http://code.google.com/p/google-api-java-client/wiki/APIs#Calendar_API)

现在我想让它在谷歌域的一个帐户上工作，突然我被卡住了。我用一个新文件更改了 client_secrets.json 文件。在 code.google.com/apis/console 上为已安装的应用程序生成，现在我收到无效的客户端错误：

ex = (com.google.api.client.auth.oauth2.TokenResponseException) com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request { "error" : "unauthorized_client" }

我需要为此执行其他步骤吗？此外，默认情况下，它需要在域内的所有帐户上工作，而不是单个帐户。也许其他控制台？我希望不是其他图书馆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:54:47.643

要访问域中的所有帐户，您需要使用服务帐户：

[https://developers.google.com/accounts/docs/OAuth2ServiceAccount](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)

虽然此链接特定于 Drive API，但它应该为您提供一些易于适应 Calendar API v3 的代码示例：

[https://developers.google.com/drive/delegation](https://developers.google.com/drive/delegation)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T14:30:27.643

为了将来参考，我使用以下代码授权 Google 日历

```
 java.io.File licenseFile = new java.io.File("39790cb51b361f51cab6940d165c6cda4dc60177-privatekey.p12");

   GoogleCredential credential = new GoogleCredential.Builder()

  .setTransport(HTTP_TRANSPORT)
  .setJsonFactory(JSON_FACTORY)
  .setServiceAccountId("xxxxx@developer.gserviceaccount.com")   

  .setServiceAccountUser("USER_EMAIL_ADRESS")
  .setServiceAccountScopes(CalendarScopes.CALENDAR)
  .setServiceAccountPrivateKeyFromP12File(licenseFile)
  .build();

  client = new com.google.api.services.calendar.Calendar.Builder(
                        HTTP_TRANSPORT, JSON_FACTORY, credential)
                        .setApplicationName( "Google Calendar Sync").build(); 
```

这些链接也对设置服务帐户有很大帮助：

[OAuth Google API for Java 无法模拟用户](https://stackoverflow.com/questions/11660666/oauth-google-api-for-java-unable-to-impersonate-user)

[Google Apps 管理员可以使用 Drive SDK 管理用户文件吗？](https://stackoverflow.com/questions/11638186/can-a-google-apps-admin-manage-users-files-with-drive-sdk)

# .net - MongoDb 内嵌文档属性集合的光标样式检索

> ID：13878606
> 
> 赞同：0
> 
> 时间：2012-12-14T12:21:39.153
> 
> 标签：.net, mongodb, nosql

给定以下课程：

```
public class MyClass
{
    public string Id{get;set;}

    public List<MyOtherClass>{get;set;}
} 
```

是否可以`List<MyOtherClass>`使用光标检索和迭代，这样我就不必一次加载整个文档？同样，我是否可以以`List<MyOtherClass>`相同的方式坚持，即创建 MyClass 文档，然后将新文档循环坚持到列表中？

也许我在想这个错误的方式，也许我需要一个不同的文档/集合“模式”？如果我在 Sql 中执行此操作，我将有两个表，我将在事务中创建父级和所有子级。我想要实现的是相同的净效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:43:54.593

您只能返回文档的子集，而不能返回文档子集的游标。即数组。关于查询的更多信息可以在这里找到：http: [//docs.mongodb.org/manual/core/read-operations/](http://docs.mongodb.org/manual/core/read-operations/)

# jquery-mobile - iScrollview - JQuery 移动问题

> ID：13878612
> 
> 赞同：1
> 
> 时间：2012-12-14T12:22:12.983
> 
> 标签：jquery-mobile, iscroll

我目前正在尝试使用 jQuery mobile 构建一个 Facebook 风格的 Web 应用程序。我的主要问题是用户无法同时滚动导航栏和内容。我尝试了许多基于 css 的解决方案，但是虽然我的普通浏览器显示一切正确，但我的所有移动设备都拒绝同时显示两个滚动条。

所以我尝试`iScroll`用`iScrollview`. 它适用于所有内容，但适用于我的可滑动菜单栏。我不知道问题可能出在哪里。一旦添加页面`iScrollview`似乎就会忽略该`data-iscroll`属性。

```
<body class="ui-mobile-viewport">
<div id="menu" data-role="content" data-iscroll> <!--Menu-->
  <div id="memberDetails">
    <h3>Username</h3>
  </div>
  <ul>
    <li class="menuDivider" >MENUDIVIDER</li>
    <li class="active"><a href="#home" class="contentLink" data-transition="none"><span class="icon" id="home"></span><span class="text">Home</span></a></li>
    <li><a href="#page1" class="contentLink" data-transition="none" data-prefetch><span class="icon" id="page1"></span><span class="text">Page One</span></a></li>
    <li><a href="#page2" class="contentLink" data-transition="none" data-prefetch><span class="icon" id="page2"></span><span class="text">Page Two</span></a></li>
    <li><a href="#page3" class="contentLink" data-transition="none" data-prefetch><span class="icon" id="page3"></span><span class="text">Page Three</span></a></li>
    <li><a href="#page8" class="contentLink" data-transition="none" data-prefetch><span class="icon" id="page8"></span><span class="text">Page Eight</span></a></li>
    <li class="menuDivider" >MENUDIVIDER</li>
  </ul>
</div>

<!--/Menu--> 

<!--page Home-->

<div data-role="page" class="pages ui-page ui-body-c ui-page-active" id="home" data-url="home" tabindex="0" style="margin-left: 0px; min-height: 882px; ">
  <div data-role="header" class="ui-header ui-bar-a" role="banner"> <a href="#" class="showMenu menuBtn" data-theme="a"><span class="ui-btn-inner ui-btn-corner-all" aria-hidden="true"><span class="ui-btn-text">Menu</span></span></a>
    <h1 class="ui-title" tabindex="0" role="heading" aria-level="1">Home</h1>
  </div>
  <!-- /header -->
  <div id="logo"><img src="files/images/wig_logo.png" alt="wig-logo" width="54" height="25"></div>
  <!-- /logo -->
  <div data-role="content" class="ui-content" role="main">
    <p>Text</p>
  </div>
  <!-- /content --> 
</div>
<!-- /page Home-->
</body> 
```

我正在使用 jQuery 1.8.2、JQM 1.2.0。这`slideeffect`是通过基本上将内容的边距设置为菜单的宽度来完成的。如果您需要任何进一步的信息，请告诉我。

# c++ - 几何中值/交汇点 2D 实现

> ID：13878613
> 
> 赞同：5
> 
> 时间：2012-12-14T12:22:15.510
> 
> 标签：c++, algorithm

我的程序有一些问题，它目前在寻找会面点时给出了错误的结果。我选择使用[`geometric median`](http://en.wikipedia.org/wiki/Geometric_median)算法来搜索会面点，如此处[所述](https://stackoverflow.com/questions/12934213/how-to-find-out-geometric-median)。

我还实现了一个蛮力算法，只是为了比较结果。

**源代码被编辑为可能的解决方案，纠正我，它有时不适用于> 100000点：**

```
 #include <vector>
#include <random>
#include <cstdlib>
#include <algorithm>
#include <iostream>
#include <cmath>
using namespace std;
long double ComputeMean(vector<long long> InputData) {
    long double rtn = 0;
    for (unsigned int i = 0; i < InputData.size(); i++) {
            rtn += InputData[i];
    }
    if(rtn == 0) return rtn;
    return rtn/InputData.size();
}
long double CallRecursiveAverage(long double m0, vector<long long> X)  {
    long double m1 =0 ;
    long double numerator = 0, denominator = 0;
    for (unsigned int i = 0; i < X.size(); i++)  {
        long double temp =abs((X[i] - m0));
        if(X[i]!=0 && temp!=0) {
                numerator += X[i] / temp;
        }
        if(temp!=0) {
            denominator += 1 / temp;
        }
    }
    if( denominator != 0 ) {
        m1 = numerator / denominator;
    }
    return m1;
}
long double ComputeReWeightedAverage(vector<long long> InputVector)  {
    long double m0 = ComputeMean(InputVector);
    long double m1 = CallRecursiveAverage(m0, InputVector);
    while (abs(m1 - m0) > 1e-6) {
        m0 = m1;
        m1 = CallRecursiveAverage(m0, InputVector);
    }
    return m1;
}
int randomizer(){
    int n =(rand() % 1000000 + 1)*(-1 + ((rand() & 1) << 1));
    return(n);
}

struct points
{
    long double ch;
    long long remp;
    bool operator<(const points& a) const
    {
                 return ch < a.ch;
    }
};
int main () {
    long double houses=10;
//    rand() % 100 + 1;
//    cin >> houses;
    vector <long long> x;
    vector <long long> y;
    vector <long long> xr;
    vector <long long> yr;
    vector <long long> sums;
    vector <long long> remp;
    long long x0, y0;
    long double path = 1e9;
    long double sumy = 0;
    long double sumx = 0;
    long double avgx = 1;
    long double avgy = 1;
     srand((unsigned)time(NULL));
    int rnd;
    for(int i = 0; i < houses; i++) {
//        cin>>x0>>y0;
        x0 =  randomizer();
            x.push_back(x0);
            sumx += x0;
         y0  =  randomizer();
            y.push_back(y0);
            sumy += y0;
            }

if(sumx!=0)     {
    avgx=ComputeReWeightedAverage(x);
    } else {
    avgx=0;
    }
if(sumy!=0)     {
    avgy=ComputeReWeightedAverage(y);
        } else {
    avgy=0;
    }
    long double  check=1e9;
    long double  pathr=0;
    int rx, ry;
    long double  wpath=1e9;
    ///brute force////
    for(int j = 0; j < houses; j++) {
        pathr = 0;
        for(int i = 0; i < houses; i++) {
            pathr += max(abs(x[i] - x[j]), abs(y[i] - y[j]));
            }
            if(pathr<wpath)
            {
                wpath = pathr;
                ry=j;
            }
        }
    cout << "\nx ="<<x[ry]<<"\n";
    cout << "y ="<<y[ry]<<"\n";
    cout << "bruteForce path ="<<wpath<<"\n\n";
    ////end brute force///
    cout << "avgx ="<<avgx<<"\n";
    cout << "avgy ="<<avgy<<"\n";
    vector<points> ch;
    for(int j = 0; j < houses; j++) {
            remp.push_back(j);
            points tb;
            tb.ch=max(abs(x[j] - (avgx)), abs(y[j] - (avgy)));
            tb.remp=j;
            ch.push_back(tb) ;
        }
            sort(ch.begin(),ch.end());
    path =1e9;
    for(unsigned int z = 0; z < 10; z++) {
    pathr = 0;

    for(int i = 0; i < houses; i++) {
            pathr += max(abs(x[i] - x[ch[z].remp]), abs(y[i] - y[ch[z].remp]));
            }
            if(pathr<path)
            {
                path = pathr;
            }
    }
    cout << "x ="<<x[remp[0]]<<"\n";
    cout << "y ="<<y[remp[0]]<<"\n";
    cout << "Weizsfield path ="<<path<<"\n\n";
    if (wpath!=path){ cout <<"ERRROR"<<"\n";
    cout << "dots\n";
    for(int i = 0; i < houses; i++) {
        cout << x[i]<<"  "<<y[i]<<"\n";
    }
        cout << "dots\n\n";
    }
    return 0;
} 
```

我的程序哪里出错了？任何帮助将不胜感激。

**编辑**
将最近点的搜索半径更改为几何中位数并检查所有这些点的路径是最佳方法吗？如果答案是肯定的，我如何找到最佳起始半径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T10:44:13.750

Weiszfeld 算法是一种*近似*几何中值的算法，因此经常会偏离通过蛮力计算的真实值。

增加搜索半径可能会有所帮助。

# java - 将双精度转换为字符串并删除欧元符号货币

> ID：13878614
> 
> 赞同：0
> 
> 时间：2012-12-14T12:22:20.630
> 
> 标签：java

我正在尝试将双值格式化为货币，然后删除欧元符号，但我的应用程序崩溃了。有人可以告诉我哪里错了吗？

```
public class Formatting {

    public static String replaceString(String text){

        NumberFormat formatter = NumberFormat.getCurrencyInstance();
        String moneyString = formatter.format(text);
        System.out.println("epargne: "+moneyString);

        return text.replaceAll("£", "");

    }

    public static String convert(double x){
        return replaceString(Double.toString(x));

    }

} 
```

我在 y 类中这样称呼它

双 x = a + b + c;

System.out.println(Formatting.convert(x));

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T12:37:27.097

`format`接受双精度，无需将该值转换为字符串。`replaceAll`需要一个正则*表达式*，你可以简单地使用`replace`它需要一个字符。

```
public static String replaceString(double value){
    NumberFormat formatter = NumberFormat.getCurrencyInstance();
    String currencySymbol = formatter.getCurrency().getSymbol();
    String moneyString = formatter.format(value);
    return moneyString.replace(currencySymbol, "");
}

public static String convert(double x){
    return replaceString(x);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T12:34:16.213

由于您不想退回货币，您可以简单地使用`DecimalFormat`which 也会将您四舍五入到小数点后 2 位（来自您的[评论](https://stackoverflow.com/questions/13878614/convert-double-to-string-and-remove-euro-sign-currency#comment19115418_13878614)）：

```
public static String replaceString(double number) {    
   NumberFormat formatter = new DecimalFormat("0.00");
   return formatter.format(number);
} 
```

# c++ - STL unordered_map 的序列化

> ID：13878618
> 
> 赞同：4
> 
> 时间：2012-12-14T12:22:33.520
> 
> 标签：c++, serialization, boost, unordered-map

我有一个程序使用具有此定义的无序映射：

```
unordered_map<const char*, vector<pair<int, int> >, function<unsigned int (const char *str)> > myMap(30000, hashing); 
```

其中散列是用于散列键的函数。我的问题是 -> 如何序列化这种结构并在之后反序列化它？我真的需要这样，并且尽可能快速高效。我一直在阅读有关 boost 库的信息，但我不太了解如何将它们与这类东西一起使用。我知道有一些用于无序映射的 boost 库，但是，显然我做错了，编译器会抛出很多错误。有人可以给我一个关于如何序列化它的示例代码吗？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T12:38:03.917

**TL;DR**您不能序列化`std::function`，而是使用常规谓词类。

* * *

序列化地图（无论何种类型）很容易。本质上是：

```
typedef std::map<std::string, std::string> Map;

void serialize(Serializer& out, Map const& map) {
    out << map.size();
    for (auto const& p: map) { out << p.first << p.second; }
}

Map deserialize(Deserializer& in) {
    Map map;

    size_t size = 0;
    in >> size;

    for (size_t i = 0; i != size; ++i) {
        Map::key_type key;
        Map::mapped_type value;
        in >> key >> value;
        map[key] = value;
    }

    return map;
} 
```

除了在一般情况下比较器和分配器都可以是有状态的，对吗？

```
void serialize(Serializer& out, Map const& map) {
+   out << map.value_compare() << map.get_allocator();

    out << map.size();
    for (auto const& p: map) { out << p.first << p.second; }
}

Map deserialize(Deserializer& in) {
+   Map::key_compare comparator;
+   Map::allocator_type allocator;
+
+   in >> comparator >> allocator;
+
+   Map map(comparator, allocator)

    size_t size = 0;
    in >> size;
    for (size_t i = 0; i != size; ++i) {
        Map::key_type key;
        Map::mapped_type value;
        in >> key >> value;
        map[key] = value;
    }

    return map;
} 
```

所以，在你的情况下，假设 Boost.Serialization 知道如何处理`std::allocator`（它是无状态的），它应该如何序列化`std::function<unsigned int(char const*)>`？

答：这是不可能的，因为`std::function`执行**类型擦除**，这与 C++ 静态类型的性质（以及它缺乏自省）相冲突。一旦一个类型被删除，通常就不可能恢复它。

您需要比较器的类型在 OR 的类型中是*明确*`map`的，以便有外部手段来查找它。在任何情况下，可能很难将其放入 Boost.Serialization（无上下文）中。使用常规谓词类可能会更好。

# php - TideSDK 中的 php.ini 和 php 扩展

> ID：13878619
> 
> 赞同：3
> 
> 时间：2012-12-14T12:22:33.630
> 
> 标签：php, php-extension, tidesdk

我已经安装了tideSDK 1.3 beta 和 TideSDK developer。我在 TideSDK module/win32/php/ext 文件夹中查看，有一个 php_gd2.dll 文件。我想添加另一个扩展，例如 php_mbstring，但是 TideSDK 中的 php.ini、php_mbstring 在哪里？现在没有 php.ini 它是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:40:37.363

在我的 Mac 上，我的 TideSDK 的 php.ini 文件位于 /opt/php/lib

通过这样做，我能够为我的设置获取所有 phpinfo：

```
<script type="text/php">
  function pinfo(){
    global $Ti;

    $fn = $Ti->Filesystem->getFile($Ti->Filesystem->getDesktopDirectory(), "phpinfo.txt");

    ob_start();
    phpinfo();
    $i = ob_get_clean();
    file_put_contents($fn, $i);

    return $i;
  }
</script>

<script type="text/javascript">
  var i = pinfo();
  document.write("<pre>" + i + "</pre>");
</script> 
```

这会将一些信息输出到您的应用程序窗口，但您可以通过打开放置在桌面上的“phpinfo.txt”文件来查看所有信息。

从这些信息中，您应该能够找到有关 TideSDK 使用的 php 安装的任何信息。

# jsf - p:commandButton 与 p:fileDownload 并且没有 ajax 仅在第二次单击时有效

> ID：13878620
> 
> 赞同：4
> 
> 时间：2012-12-14T12:22:34.530
> 
> 标签：jsf, jsf-2, primefaces, download, datamodel

我正在使用 JSF 2.0、Primefaces 3.4.2、Spring 3.1.2。

我面临这个链接的人的类似问题：[h:commandButton 从第二次单击开始工作](https://stackoverflow.com/questions/11618450/hcommandbutton-works-from-the-second-click)。

像他一样，我没有在中使用 ajax，`<p:commandButton>`但我`<p:fileDownload />`在按钮标签内使用。

我有两个视图：“list.xhtml”和“downloadView.xhtml”。在`myBean.java`我从视图“list.xhtml”发送一个 DataModel 以查看“downloadView.xhtml”作为请求属性，如下面的代码所示：

```
FacesUtil.getServletContext().setAttribute("myDataModelFromRequest", this.myDataModel); 
```

豆子是用`@Scope("view")`

在视图“downloadView.xhtml”中，我成功填充了一个数据表，其中包含从请求发送的 DataModel。但是当我单击按钮下载文件时，就会出现问题。它仅在第二次尝试时有效。我已经尝试将我的方法的返回从 null 更改为“downloadView”，但问题没有解决。

在调试模式下，我注意到仅在第二次单击时输入“downloadMethod()”。

任何人都有解决它的想法？

* * *

myBean.java

```
public String viewListMethod() {
    //some work here...

    FacesUtil.getServletContext().setAttribute("myDataModelFromRequest", this.myDataModel);

    return "downloadView";
} 
```

* * *

下载View.xhtml

```
<h:form id="formId" prependId="false">
    <p:dataTable
        id="dataTableId" var="myVar" value="#{myDataModelFromRequest}"                  
        selection="#{cargaProcessoControlador.myArray}" 
        paginator="true" rows="10" paginatorPosition="bottom" paginatorAlwaysVisible="false">
            <f:facet name="header">  
                    bla bla bla
            </f:facet>

            <p:column selectionMode="multiple" style="width:18px" />

            //collumns here...                      
    </p:dataTable>

    <p:commandButton id="btDownload" ajax="false" value="Download" icon="ui-icon-document" >
        <p:fileDownload value="#{myBean.downloadMethod()}" />
    </p:commandButton>
</h:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:13:39.127

spring 的范围“视图”不存在......所以你创建了自己的，对吧？只是为了检查...我曾经遇到过这种问题，我认为这与验证有关... immediate=true 属性解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T07:04:32.013

这与页面的范围有关。您的问题是由于页面的部分呈现。最初，当您加载页面时，它并没有完全加载，因此当您第一次尝试单击该按钮时，该按钮不是该特定视图的一部分。尝试让您在显示页面之前查看正确或显式地从支持 bean 呈现页面

# linux-kernel - 在linux-3.6.6上修改Read_write.c文件后如何重新编译内核

> ID：13878623
> 
> 赞同：1
> 
> 时间：2012-12-14T12:22:39.270
> 
> 标签：linux-kernel, kernel, debian

我已经在 debian linux 版本（12.04）中成功编译了我的内核（linux-3.6.6）。（LinuxPraxis -> 是我的新版本的名称）然后我对 Read_write.c 文件进行了一些修改（“***我介意我当命名管道正在写入和读取***“）时，在那里写一些 printk 以获取消息。

现在我听说我需要**重新编译**我的新版本。请帮助我理解它。

我需要完全重新编译我的内核还是用另一种方式重新编译内核？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:01:16.917

如果您已经编译，Makefile 只负责重新编译依赖于已更改文件的部分。仍然可能有多个文件依赖于它，但工作量应该比初始编译要小得多。您不必做任何不同的事情，编译工作相同；磁盘上已经存在的不依赖于更改文件的文件将不会被重新编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T06:40:37.800

使用“make -j5”为具有 4 个内核的主机系统重建内核映像文件。

然后运行“make install -j5”安装内核镜像文件。

“make install”将压缩你的内核镜像文件，将内核镜像复制到/boot并运行grub-update来更新grub配置文件。

# android - 在 Android 中访问 Web 服务中的类构建

> ID：13878628
> 
> 赞同：0
> 
> 时间：2012-12-14T12:23:05.457
> 
> 标签：android, web-services, ksoap2, android-4.2-jelly-bean

我知道如何在 Android 中调用网络服务。我只是想知道我是否可以访问构建在 Web 服务中的类？

例如，我有一个名为 XyzService 的 Web 服务，在该 Web 服务中我有一个名为 Content 的类。我想访问该类以在 android 应用程序中创建它的对象。

就像在 Visual Studio 中一样，我们添加服务引用并自动连接到 Web 服务。通过在 .net 中使用以下代码，我们可以访问内容类。

```
 using webservice.xyzServiceReference; 
```

在 Visual Studio 中，我可以访问该 Web 服务中的任何类

```
Content c = new Content(); 
```

我的问题是我可以像在 Visual Studio 中那样访问 android 中的类吗

我正在使用安卓 4.2 API 17

提前致谢

# postgresql - Oracle 查询未在 PostgreSQL 中执行

> ID：13878631
> 
> 赞同：2
> 
> 时间：2012-12-14T12:23:13.240
> 
> 标签：postgresql

我有一个查询：

```
update (select tmp."table1" as tmpid, 
               del."table1" as  delid 
          from "table1_TMP" tmp ,
               "table1_DEL" del 
         where del."table2" = tmp."table2" and 
               del."REFSEQNO" = tmp."REFSEQNO")
   set tmpid = delid; 
```

此查询在 oracle 中运行没有任何问题。

如何修改此查询以在 Postgresql 上运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:53:58.187

我认为这会做到这一点。

```
update "table1_TMP" tmp
set "table1" = del."table1"
from "table1_DEL" del
where del."table2" = tmp."table2" and
      del."REFSEQNO" = tmp."REFSEQNO" 
```

# iphone - 静态库的后台模式

> ID：13878636
> 
> 赞同：0
> 
> 时间：2012-12-14T12:23:29.480
> 
> 标签：iphone

我正在开发一个应用程序。因为我正在使用我自己的静态库和位置服务。所以我需要在后台连续运行应用程序。为此我必须在 plist 文件中提到 UIBackgroundMode。我怀疑的是所有位置服务代码在库中，并且该库没有 plist 文件。如果我在我的应用 plist 文件中提到 UIBackGroundMode，则应用是否在后台运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:34:47.450

如果您将应用设置为获取位置更新，则您正在使用的 CLLocationManager 将在应用处于后台时接收更新。

# jsf - inputtext 仅在按下回车后设置值

> ID：13878645
> 
> 赞同：0
> 
> 时间：2012-12-14T12:24:07.077
> 
> 标签：jsf, richfaces

也许这是一个微不足道的问题，但我需要在这里有所了解。

我有一个`<h:inputText value="#{bean.name}"/>`标签和一个在数据库中插入值的“创建”按钮。如果我只是键入值并点击“创建”，则会引发 ConstraintViolationException，因为该`#{bean.name}`值为 null。我刚刚发现，如果我在键入值后按 Enter 键，则绑定属性中设置的字符串和 bean 成功持久化。

所以，问题是：我必须在 inputText 周围包含哪些richfaces 或 a4j 标签，以便组件自动设置 de bean 的值？代码非常简单：

```
<h:form>
    <h:inputText id="name" value="#{bean.name}">
    <h:commandButton value="Create" actionListener="#{bean.create}"/>
</h:form> 
```

**更新：**

我设法通过以下方式达到所需的行为：

```
<h:inputText id="name" value="#{bean.name}">
    <a4j:ajax event="keydown" execute="@form"/>
</h:inputText> 
```

是否有一个标签可以将所有页面输入组件包装在其中并删除该`<a4j:ajax>`标签？

# java - 如何实现自动完成

> ID：13878652
> 
> 赞同：2
> 
> 时间：2012-12-14T12:24:33.967
> 
> 标签：java, user-interface, autocomplete

我正计划根据输入的数据库中包含的密钥（有点像谷歌）开发一个具有自动完成功能的小型搜索引擎。是否有推荐的方法来执行自动完成。我正在用java做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:25:53.063

我不清楚这个应用程序是如何部署的，等等，我已经（正确或错误地）阅读它作为类似 bash 的自动完成功能的要求。

[JLine](http://jline.sourceforge.net/)是 Java 的命令行库。它提供光标键导航、历史记录和完成。不幸的是，文档不是很好，但从[Completor](http://jline.sourceforge.net/apidocs/index.html)界面开始。

如果您正在使用 Web 界面，我会看看[DWR](http://directwebremoting.org/dwr/index.html)（它将 Java 对象公开为 Javascript 对象）并按照[这篇文章](https://stackoverflow.com/questions/1519165/jquery-autocomplete-with-dwr)实现自动完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T12:29:51.217

您应该订阅各种事件（根据需要），类似于`TextChanged`

请参阅以下问题：

[Java 等价于 C# TextBox TextChanged 事件](https://stackoverflow.com/questions/8721197/java-equivalent-to-c-sharp-textbox-textchanged-event)

[Java Swing中的自动完成文本框](https://stackoverflow.com/questions/1861921/auto-complete-textbox-in-java-swing)

[摆动自动完成文本字段/下拉](https://stackoverflow.com/questions/3268091/swing-autocomplete-text-field-drop-down)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T12:35:17.573

它不是那么困难。您可以将 java 与[jquery 自动完成插件](http://jqueryui.com/autocomplete/)一起使用。

在这里，您只需要拨打以下电话：

```
 $("#id").autocomplete("MyJSP.jsp"); 
```

因此，您的后台处理由您的 java 完成，这将使用自动完成插件加载功能。很容易！你可以看看这个[链接](http://viralpatel.net/blogs/tutorial-create-autocomplete-feature-with-java-jsp-jquery/)。

他们也有很好的 Spring 做事方式。

# c++ - 在 fstream 上使用 << 编写

> ID：13878659
> 
> 赞同：2
> 
> 时间：2012-12-14T12:25:09.900
> 
> 标签：c++, file, fstream

我正在尝试`long`使用 c++ fstream 类将 a 写入文本文件。该文件在执行之前已经在磁盘上创建。我运行以下代码，可以读取初始值但无法保存新值，覆盖。我究竟做错了什么？

```
#include <stdio.h>
#include <stdlib.h>
#include <iostream>
#include <fstream>

using namespace std;

int main(int argc, char* argv[]) {

    long f;

    fstream myFile("data.txt", fstream::in|fstream::out);
    cout << "f before: " << f << endl;
    myFile >> f;
    cout << "f after: " << f << endl;
    f++;
    cout << "f after increment: " << f << endl;

    myFile << f;
    myFile.close();

    return 0;
} 
```

之后，我读取了文件中的值并且它没有改变。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:30:15.250

在写入之前，您需要倒退到文件的开头。否则第二个值写*在*第一个值之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T12:32:58.060

您需要在`myFile.seekp(ios::beg);`之前添加`myFile << f;`才能正确更新计数。

如果要继续追加到末尾，请添加`myFile.clear();`before `myFile << f;`。这将导致内容变为 : `1`-> `12`-> `1213`-> `12131214`-> `1213121412131215`。这是必需的，因为在读取输入时会达到 eof。请注意，get 和 put 指针是[相同](https://stackoverflow.com/questions/8049403/operations-on-file-get-and-put-pointer)的。

正如您正确指出的那样，这是必需的，因为文件**只有**数字，甚至没有换行符。因此，读取操作直接命中 EOF 并导致问题。为了*解决*这个问题，我们清除 eof 状态并继续。

如您所建议的，在末尾添加换行符是一种解决方案。在这种情况下

```
myFile.seekp(ios::beg);
myFile << f<<"\n"; 
```

将是完整的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T16:23:44.117

我想我在这里做错了什么：

我的文件只包含我以后想读和写的长度。当我阅读文件时，我到达了 EOF，然后无法倒带或最后写任何东西。

也就是说，我的解决方案是在文件末尾包含一个空格或 \n。

有谁知道为什么 API 会这样工作？对我来说似乎不是很有用......

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-14T12:50:09.367

它与这一行有关：

我的文件 >> f;

删除它，一切正常。我对 fstream 不熟悉，但在我看来，这段代码会试图强制一个长字符串。我也不允许将其投射到很长，这让我认为这永远不会像这样执行。我建议您阅读如何从文件中检索长类型的值，然后再试一次。

编辑：
读了一点[这个](http://en.allexperts.com/q/C-1040/write-read-file-cpp.htm)网站建议你必须在读写之间关闭并重新打开文件，我很惊讶它实际上修复了它。我不禁想知道为什么，我认为 fstream 是为了阅读或写作或两者兼而有之......无论如何，这是你的工作代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <iostream>
#include <fstream>

using namespace std;

int main(int argc, char* argv[]) {

    long f;

    fstream myFile("data.txt", fstream::in|fstream::out);
    cout << "f before: " << f << endl;
    myFile >> f;
    cout << "f after: " << f << endl;
    f++;
    cout << "f after increment: " << f << endl;
    myFile.close();
    myFile.open("data.txt", fstream::in|fstream::out);

    myFile << f;
    myFile.close();

    return 0;
} 
```

# javascript - 使用 WebAudioApi 在 Javascript 中对音频 PCM 数据进行上采样

> ID：13878661
> 
> 赞同：2
> 
> 时间：2012-12-14T12:25:11.300
> 
> 标签：javascript, pcm, web-audio-api, resampling

对于一个项目，我正在通过 WebSockets 从 Java 服务器检索实时音频流。在服务器上，我以 8 位有符号字节值的形式处理 16Bit/8000hz/mono 的样本（两个字节组成一个样本）。但是，在浏览器上，支持的最低采样率为 22050 Hz。所以我的想法是“简单地”对现有的 8000 到 32000 赫兹进行上采样，这是受支持的，在我看来是一个简单的计算。

到目前为止，我已经尝试过[线性上采样](https://stackoverflow.com/questions/5407452/pcm-algorithm-for-upsampling)和[余弦插值](http://paulbourke.net/miscellaneous/interpolation/)，但都没有奏效。除了听起来确实失真之外，第一个还添加了一些咔哒声。Chrome 中的 WebAudioAPI 可能也有问题，但至少声音正在播放并且几乎无法识别它应该是什么。所以我猜没有编解码器或字节序问题。

这是接收到带有声音数据的二进制数据包时执行的完整代码。为了简单起见，我一直在创建新的缓冲区和缓冲区源（是的，对性能没有好处）。`data`是一个数组缓冲区。首先，我将样本转换为[Float](https://stackoverflow.com/questions/6010708/html5-web-audio-api-porting-from-javax-sound-and-getting-distortion)，然后进行上采样。

```
//endianess-aware buffer view
var bufferView=new DataView(data),
//the audio buffer to set for output
buffer=_audioContext.createBuffer(1,640,32000),
//reference to underlying buffer array
buf=buffer.getChannelData(0),
floatBuffer8000=new Float32Array(160);

//16Bit => Float
for(var i=0,j=null;i<160;i++){
    j=bufferView.getInt16(i*2,false);
    floatBuffer8000[i]=(j>0)?j/32767:j/-32767;
}   

//convert 8000 => 32000
var point1,point2,point3,point4,mu=0.2,mu2=(1-Math.cos(mu*Math.PI))/2;
for(var i=0,j=0;i<160;i++){
    //index for dst buffer
    j=i*4;

    //the points to interpolate between
    point1=floatBuffer8000[i];
    point2=(i<159)?floatBuffer8000[i+1]:point1;
    point3=(i<158)?floatBuffer8000[i+2]:point1;
    point4=(i<157)?floatBuffer8000[i+3]:point1;

    //interpolate
    point2=(point1*(1-mu2)+point2*mu2);
    point3=(point2*(1-mu2)+point3*mu2);
    point4=(point3*(1-mu2)+point4*mu2);

    //put data into buffer
    buf[j]=point1;
    buf[j+1]=point2;
    buf[j+2]=point3;
    buf[j+3]=point4;
}

//playback
var node=_audioContext.createBufferSource(0);
node.buffer=buffer;
node.connect(_audioContext.destination);
node.noteOn(_audioContext.currentTime); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:21:35.207

终于找到了解决这个问题的方法。从 16Bit 到 Float 的转换是错误的，它只需要是

```
floatBuffer8000[i]=j/32767.0; 
```

此外，向 API 提供大量小样本效果不佳，因此您需要缓冲一些样本并将它们一起播放。

# ruby - 使用 ruby 从 pdf 文件中保存所需的 pdf 页面

> ID：13878664
> 
> 赞同：2
> 
> 时间：2012-12-14T12:25:21.817
> 
> 标签：ruby, pdf-generation

我有一个pdf文件。我想将给定的页面（第 5 页，用于实例）保存为其他 pdf 文件。我该如何做到这一点？

到目前为止，我已经使用`pdf-reader`gem - 但它适合阅读 pdf（虽然我可以访问我想要的页面），并且我 gem `prawn`- 这个仅用于编写 pdf（我只能创建空的 pdf 文件）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:42:59.457

就在这里：[为 Heroku 静态编译 pdftk。需要将 PDF 拆分为单页文件](https://stackoverflow.com/questions/7128855/statically-compile-pdftk-for-heroku-need-to-split-pdf-into-single-page-files)

尝试类似：

```
require 'prawn'

Prawn::Document.generate('new.pdf') do |pdf|
  pdf.start_new_page(:template => "input.pdf", :template_page => 5)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:05:38.500

不知道你在什么系统上，但在我的 ubuntu12.04 机器上，pdftk 程序工作：

```
pdftk A=your_beautiful.pdf cat A3 output page3.pdf 
```

所以你可以为此使用反引号，并阅读[http://www.linuxjournal.com/content/tech-tip-extract-pages-pdf](http://www.linuxjournal.com/content/tech-tip-extract-pages-pdf)

# php - 在 Windows 控制台中运行时出现 PHP 脚本错误，在浏览器或 Linux 控制台中没有错误

> ID：13878671
> 
> 赞同：1
> 
> 时间：2012-12-14T12:25:50.520
> 
> 标签：php, unicode, windows-console

`error_reporting(E_ALL);`
`ini_set('display_errors', true);`
`ini_set('log_errors', true);`

当我从浏览器运行脚本时，一切都按预期进行，没有错误。从 Linux 控制台运行它时也是如此。但是，当我从 Windows 命令提示符运行完全相同的脚本时，尝试将一些记录插入数据库时​​出现错误。显然，这些错误与 Unicode 字符有关：

`Incorrect string value: \'\\xC5 ANA\' for column \'name\' at row 1`
Windows 控制台输出这个：`IZP─ĆRDO┼ ANA`
但实际文本是：`IZPĀRDOŠANA`。

什么可能导致这种情况以及如何解决？Windows 命令提示符如何影响正在处理的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:00:28.527

似乎您的 Windows 控制台未设置为正确的代码页..

如果你这样做：

```
chcp 
```

你有看到

```
Active code page: 775 
```

?

无论如何，您可以使用以下方法将代码页设置为 UTF-8：

```
chcp 65001 
```

# php - MYSQL错误结果输出

> ID：13878674
> 
> 赞同：12
> 
> 时间：2012-12-14T12:25:54.040
> 
> 标签：php, mysql, sql, database

我有 3 个包含以下数据的表：

第一个表称为连接，其中`connections.username1`一个`connections.username2`是跟随者，也是被跟随者。

它有以下几行：

```
connections.username1 | connections.username2
      mikha           |          guy
      guy             |          maricela
      maricela        |          guy 
```

第二个表称为问题。它有一列用于提问者`questions.asker_username`，另一列用于接收问题的人`questions.target_username`。当提问者被称为“sys.tem”而目标被称为“every.one”时，它被认为是一个全球性的问题，所有成员都可以回答。

匿名用户可以询问，他们的 ip 被记录为`asker_username`.

它有以下几行：

```
questions.id | questions.asker_username | questions.target_username | questions.question
  1          |      mikha               |       guy                 | what's your name?                             
  2          |      mikha               |       maricela            | What's your age?
  3          |      guy                 |       mikha               | what's your name?
  4          |      maricela            |       guy                 | favorite food?
  5          |      xx.xx.xxx.xx        |       mikha               | favorite pet?
  6          |      xx.xx.xxx.xx        |       guy                 | first name?
  7          |      xx.xx.xxx.xx        |       maricela            | first name?   
  8          |      sys.tem             |       every.one           | what's ur name?
  9          |      sys.tem             |       every.one           | favorite movie?  
 10          |      sys.tem             |       every.one           | favorite game? 
```

第三张表称为答案。答案表中的 id 与问题 id 相同。此表有一列用于 id 和 username 和 answer。

```
answers.id  |  answers.username | answers.answer
   1        |       guy         | my name is guy
   2        |     maricela      | my name is maricela
   3        |       mikha       | my name is mikha
   4        |       guy         | pizza        
   8        |       guy         | guy is my name
   8        |       maricela    | maricela is my name   
   9        |       maricela    | avatar 
```

我想要一个结合以下与“mikha”相关的条件和他关注的人的查询：

1）`questions.asker_username`不是“米哈”

2) `questions.target_username`要么是“mikha”，要么是他关注的任何用户。

3）如果`questions.target_username`等于“every.one”并由“mikha”回答，则显示问题。

4) 如果`questions.target_username`等于“every.one”并且由“mikha”关注的任何人回答，则显示问题及其答案。如果“mikha”关注的用户没有回答，请不要显示问题。

5) 如果`questions.target_username`等于“every.one”并且根本没有被任何人回答，则显示问题一次。

6) 如果`questions.target_username`等于“every.one”并且没有被“mikha”回答并且没有被他关注的任何人回答，则只显示一次问题。

我使用以下查询：

```
SELECT questions.id,answers.id,questions.asker_username,questions.target_username,
    answers.username,questions.question,answers.answer 
FROM questions 
    LEFT JOIN answers ON (questions.id = answers.id) 
    LEFT JOIN connections ON connections.username1 = 'mikha' 
        AND (questions.target_username = connections.username2 
            OR questions.asker_username = connections.username2 
            OR connections.username2 = answers.username) 
WHERE questions.asker_username <> 'mikha' 
    AND (questions.target_username = 'mikha' 
        OR questions.target_username = connections.username2 
        OR (questions.target_username = 'every.one' 
            AND (answers.username = 'mikha' 
                OR answers.username = connections.username2
                OR answers.username IS NULL)
            )
        ) 
GROUP BY questions.id,answers.username 
```

我期望的结果：

```
questions.id | answers.id | questions.asker_username | questions.target_username | answers.username | questions.question | answers.answer
    3        |      3     |        guy               |          mikha            |    mikha         | what's your name?  | my name is mikha
    4        |      4     |        maricela          |          guy              |    guy           | favorite food?     | pizza
    5        |      5     |        xx.xx.xxx.xx      |          mikha            |    NULL          | favorite pet?      | NULL
    6        |      6     |        xx.xx.xxx.xx      |          guy              |    NULL          | first name?        | NULL        
    8        |      8     |        sys.tem           |         every.one         |    NULL          | what's ur name?    | NULL 
    8        |      8     |        sys.tem           |         every.one         |    guy           | what's ur name?    | guy is my name
    9        |      9     |        sys.tem           |         every.one         |    NULL          | favorite movie?    | NULL       
    10       |      10    |        sys.tem           |         every.one         |    NULL          | favorite game?     | NULL 
```

我实际得到的结果：

```
 questions.id | answers.id | questions.asker_username | questions.target_username | answers.username | questions.question | answers.answer
    3        |      3     |        guy               |          mikha            |    mikha         | what's your name?  | my name is mikha
    4        |      4     |        maricela          |          guy              |    guy           | favorite food?     | pizza
    5        |      5     |        xx.xx.xxx.xx      |          mikha            |    NULL          | favorite pet?      | NULL
    6        |      6     |        xx.xx.xxx.xx      |          guy              |    NULL          | first name?        | NULL        
    8        |      8     |        sys.tem           |         every.one         |    guy           | what's ur name?    | guy is my name           
    10       |      10    |        sys.tem           |         every.one         |    NULL          | favorite game?     | NULL 
```

[我在http://sqlfiddle.com/#!2/29929e/1](http://sqlfiddle.com/#!2/29929e/1)上构建了一个方案，向您展示我实际得到的结果

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T13:08:31.987

好的，让我们从最简单的开始（你的第一条规则）：

```
SELECT q.id, a.id, q.asker_username, q.target_username, a.username, q.question, a.answer 
FROM questions q 
    LEFT JOIN answers a ON q.id = a.id  
WHERE q.asker_username <> 'mikha' 
GROUP BY q.id,a.username 
```

现在让我们添加您的第二条规则 - 现在添加了更多复杂性......

```
SELECT q.id, a.id, q.asker_username, q.target_username, a.username, q.question, a.answer 
FROM questions q 
    LEFT JOIN answers a ON q.id = a.id 
WHERE q.asker_username <> 'mikha' 
    AND q.target_username = 'mikha' 
        OR q.target_username IN (
            SELECT username2 
            FROM connections 
            WHERE username1 = 'mikha'
        )
GROUP BY q.id,a.username 
```

现在是第三条规则（对于 mikha 回答的每个人）：

```
SELECT q.id, a.id, q.asker_username, q.target_username, a.username, q.question, a.answer 
FROM questions q 
    LEFT JOIN answers a ON q.id = a.id 
WHERE q.asker_username <> 'mikha' 
    AND q.target_username = 'mikha' 
        OR q.target_username IN (
            SELECT username2 
            FROM connections 
            WHERE username1 = 'mikha'
        )
        OR (q.target_username = 'every.one' AND a.username = 'mikha')
GROUP BY q.id,a.username 
```

现在来看第四条规则：

```
SELECT q.id, a.id, q.asker_username, q.target_username, a.username, q.question, a.answer 
FROM questions q 
    LEFT JOIN answers a ON q.id = a.id 
WHERE q.asker_username <> 'mikha' 
    AND q.target_username = 'mikha' 
        OR q.target_username IN (
            SELECT username2 
            FROM connections 
            WHERE username1 = 'mikha'
        )
        OR (q.target_username = 'every.one' AND a.username = 'mikha')
        OR (q.target_username = 'every.one' AND a.username IN (
            SELECT username2 
            FROM connections 
                INNER JOIN answers ON answers.username = connections.username2
                    AND answers.answers IS NOT NULL
            WHERE username1 = 'mikha'
        ))
GROUP BY q.id,a.username 
```

第五条规则（耶稣！）：

```
SELECT q.id, a.id, q.asker_username, q.target_username, a.username, q.question, a.answer 
FROM questions q 
    LEFT JOIN answers a ON q.id = a.id 
WHERE q.asker_username <> 'mikha' 
    AND q.target_username = 'mikha' 
        OR q.target_username IN (
            SELECT username2 
            FROM connections 
            WHERE username1 = 'mikha'
        )
        OR (q.target_username = 'every.one' AND a.username = 'mikha')
        OR (q.target_username = 'every.one' AND a.username IN (
            SELECT username2 
            FROM connections 
                INNER JOIN answers ON answers.username = connections.username2
                    AND answers.answers IS NOT NULL
            WHERE username1 = 'mikha'
        ))
        OR (q.target_username = 'every.one' AND a.answer IS NULL)
GROUP BY q.id,a.username 
```

最后一个：

```
SELECT q.id, a.id, q.asker_username, q.target_username, a.username, q.question, a.answer 
FROM questions q 
    LEFT JOIN answers a ON q.id = a.id 
WHERE q.asker_username <> 'mikha' 
    AND q.target_username = 'mikha' 
        OR q.target_username IN (
            SELECT username2 
            FROM connections 
            WHERE username1 = 'mikha'
        )
        OR (q.target_username = 'every.one' AND a.username = 'mikha')
        OR (q.target_username = 'every.one' AND a.username IN (
            SELECT username2 
            FROM connections 
                INNER JOIN answers ON answers.username = connections.username2
                    AND answers.answers IS NOT NULL
            WHERE username1 = 'mikha'
        ))
        OR (q.target_username = 'every.one' AND a.answer IS NULL)
        OR (q.target_username = 'every.one' AND a.username NOT IN (
            SELECT username2 
            FROM connections 
                INNER JOIN answers ON answers.username = connections.username2
                    AND answers.answers IS NOT NULL
            WHERE username1 = 'mikha'
        ))
GROUP BY q.id,a.username 
```

我认为规则 4 和规则 6 有点相互矛盾（可以说是矛盾的），当在一个查询中使用时，它会产生与省略相同的效果......

我没有测试任何查询，但我相信它们有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T14:08:31.083

问题是——在某些情况下——当只有一个匹配的答案存在时，你想显示一个问题两次。我引用：

> 所以，我只想为“mikha”显示一次，无论它是否被回答，并且每次被任何“mikha”跟随的人回答时再次显示它

这种重复使事情变得非常困难。

我试图用 a 解决这个问题，`UNION`它似乎有效。但是，我还没有完全理解你的要求......

无论如何，我们开始：

```
select * from
(
  select
    q.id as q_id, a.id as a_id, q.asker_username,
    q.target_username, a.username, q.question, a.answer
  from
    questions q
    left outer join answers a on q.id = a.id
  where
    q.asker_username <> 'mikha' 
    and
    (
      q.target_username = 'mikha'
      or q.target_username in
         (select username2 from connections where username1 = 'mikha')
      or
      (
        q.target_username = 'every.one'
        and
        (
          a.username = 'mikha'
          or a.username in
             (select username2 from connections where username1 = 'mikha')
          or a.id is null
        )
      )
    )
  union
  select
    q.id as q_id, NULL as a_id, q.asker_username,
    q.target_username, NULL, q.question, NULL
  from
    questions q
  where
    q.asker_username <> 'mikha' 
    and q.target_username = 'every.one'
    and not exists (select id
                    from answers
                    where
                      id = q.id
                      and username = 'mikha'
                    )
) r
order by q_id; 
```

现场测试：
[mikha 对问题 8 的](http://sqlfiddle.com/#!2/e2b8d/9)
[回答 没有 mikha 对问题 8 的回答](http://sqlfiddle.com/#!2/29929e/125)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T13:46:23.183

我建议您的起点的主要问题之一是您需要加入您的连接表两次 - 一次用于答案，一次用于问题。

下面的代码给出了关于它正在做什么的内联注释。我也同意其他答案，建议数字 id 字段更适合比较 - 我还建议在答案表上放置一个唯一的 rowid 字段（更好的是，更改`id`为`question_id`然后制作`id`唯一字​​段。

```
SELECT DISTINCT q.id,a.id,q.asker_username,q.target_username,a.username,q.question,a.answer
FROM questions q
  /* Answers */
  LEFT JOIN answers a ON (q.id=a.id)
  /* connection entries where the person being followed is the target */
  LEFT JOIN (SELECT username2 FROM connections WHERE username1='mikha') c_q
    ON c_q.username2=q.target_username
  /* connection entries where the person being followed answered the question */
  LEFT JOIN (SELECT username2 FROM connections WHERE username1='mikha') c_a
    ON c_a.username2=a.username 
  /* Own answers */
  LEFT JOIN (SELECT id FROM answers WHERE username='mikha') a_own 
    ON (q.id=a_own.id) 
  WHERE 
  /* Asker not mikha, target is mikha or followed user - rules 1,2 */
  (q.asker_username <> 'mikha'
  AND (q.target_username='mikha' OR c_q.username2 IS NOT NULL))
  OR
  /* sys.tem/every.one, answered by mikha - rule 3 */
  (q.target_username='every.one' AND a.username='mikha')
  OR
  /* Rules 4, 5 & 6 combine to give "show the answer at least once, and once for every followed user who answered" - here we select any every.one messages where mikha didn't answer and nor did the people he follows */
  (q.target_username='every.one' AND a_own.id IS NULL AND c_a.username2 IS NULL); 
```

对于问题 8，它没有给你两行，但我真的不知道你为什么想要那个。那里的问题是尚不清楚您的哪些规则是附加的，哪些是组合的。如果您可以解释哪些规则应该“添加”一行，而不是仅仅提供另一个显示一行的理由，也许我们也可以为您提供问题 8 的额外行。

# c# - 实体框架迁移到远程机器

> ID：13878682
> 
> 赞同：0
> 
> 时间：2012-12-14T12:26:37.883
> 
> 标签：c#, entity-framework, entity-framework-5

我目前在一个站点上使用 EF，并且当我的模型在我的本地计算机上更改时使用迁移，该计算机正在更新本地 SQL express 数据库，网络 SQL 数据库也可以正常工作，我在另一个项目中已经完成了。

但是，现在我已将解决方案移至我们的开发服务器并通过我们的服务器处理解决方案文件，一切正常。但现在由于某种原因我不能使用迁移。我检查了路径，似乎找不到任何错误的路径。我总是得到错误：

```
Exception calling "LoadFrom" with "1" argument(s): "Could not load file or assembly 'file:///X:\path\to\site\packages\EntityFramework.5.0.0\tools\EntityFramework.PowerShell.Utility.dll' or one of its dependencies. Operation is not supported. 
```

是否需要设置某种配置以允许从本地 VS Pro（2010）迁移到生产服务器（在我们的网络上）？
我尝试将 init 策略更改为`MigrateDatabaseToLatestVersion`并创建了一个迁移类型`DbMigrationsConfiguration`，设置`AutomaticMigrationsEnabled`为 true，但它似乎没有更新数据库：/

就像我说的，我可以从本地解决方案在开发服务器上的 SQL Server 数据库上进行迁移，但当解决方案在开发服务器上时则不能。

我是在尝试做一些不可能的事情，还是只是做错了？在想它可能是像实体框架这样的东西可能没有安装在服务器上，但不太确定或者如何真正检查。

有任何想法吗？

谢谢。担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:44:14.120

“您已将解决方案移至开发服务器”是什么意思？通常，您编译代码并将编译后的程序集和内容发布到开发服务器，并且该代码在 IIS 下运行。如果您在开发 SQL Server 上还有一个需要更新的开发数据库，​​则需要从您的开发工作站运行 update-database 命令，并将您的解决方案指向开发 SQL Server。

您可以通过编辑启动项目的配置文件并将连接字符串或默认连接工厂设置设置为指向您的开发 SQL Server 来将您的解决方案指向开发服务器。

# api - 如何使用 BOX API 自动登录？

> ID：13878683
> 
> 赞同：2
> 
> 时间：2012-12-14T12:26:38.050
> 
> 标签：api, box-api

嗨 StackOverflow 社区！

我在 BOX API 工作。一切都很好，但我想更改身份验证行为。

身份验证过程首先去​​盒子网站进行帐户持有人身份验证。是否可以使用用户名/密码进行自动身份验证，并且用户可以直接查看 ACCOUNT HOLDER 文件？

我期待着。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:05:58.130

看起来这是不可能的。Box API 使用 OAuth 2.0 身份验证，它明确要求您将用户重定向到 Box 网站，以便他们可以“允许”访问他们的帐户。请参阅[http://developers.box.com/oauth/](http://developers.box.com/oauth/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-08T12:29:27.860

类似的问题[在这里](https://stackoverflow.com/questions/14640928/get-non-expiring-access-token-from-box-or-get-access-token-from-box-by-passing-u)提出了一个涉及更新承载和访问令牌的解决方案。唯一的限制是需要至少每 14 天更新一次。我希望这对您来说是一个可行的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-07T18:48:34.640

您使用的是 iOS、Windows、Ruby 还是其他 SDK？基本上可以自动登录，这将涉及让用户在某处配置他们的用户名和密码。然后，如果您获取这些存储的值并使用 javascript 调用，您可以将用户名和密码输入到相应的字段中，然后提交表单。根据 api，您将看到不同的登录屏幕。

Disclaimer Box 经常更改他们的登录屏幕，看起来确实有问题，所以我不推荐这条路线，但如果你想以任何方式这样做，javascript 看起来像：

```
var username = "user1";
var password = "superSecretPassword";

document.getElementById('login').value = 'username';
document.getElementById('password').value = 'password';
document.forms[0].submit(); 
```

# active-directory - 为 Active Directory 部署转换 MSI 文件

> ID：13878684
> 
> 赞同：0
> 
> 时间：2012-12-14T12:26:39.633
> 
> 标签：active-directory, windows-installer, windev

我目前正在将我们所有的设置文件（以前是 .exe 文件）重新构建到 MSI 安装程序中，以便我可以通过 Active Directory 部署它们。

基本上，我们有一个生成 MSI 文件的工具（知道它的人是 Windev），但由于我们的工具有限，我生成 .mst 文件（使用 Orca）来微调设置，并合并源安装程序和转换与 msitran.exe。当我使用 /qb 或 /qn 手动安装转换后的安装文件时，安装工作正常。

但是当我尝试在 AD 中添加设置文件时，我收到一条错误消息：“无法提取部署信息”。

我在网上找到了多种解决方案，但没有一个适合我的问题（即我拥有所有管理员权限，我的最终 MSI 在 Orca 中验证（有几个警告，但没有错误）。我的原始 MSI 遇到了与我们的问题相同的问题工具生成（但它不会在 ORCA 中验证，因此需要进行转换以修复该问题）。

是否需要设置任何属性才能将我的 MSI 成功部署到 AD？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:53:47.563

没关系，[解决方案很愚蠢](http://www.pcreview.co.uk/forums/fixed-unable-extract-deployment-information-package-t1533263.html)，但 MS 在任何地方都没有提到这一点。

基本上，这是 UNC 路径的问题。我的 MSI 位于包含空格的路径中，而 Windows Server 2003 显然不喜欢这样（在打开的对话框中将路径括在引号中不会改变任何内容）。将文件移动到没有空格的路径修复它。

祝大家好日子

# php - php mysql 在十个表+不同列上构建搜索查询

> ID：13878691
> 
> 赞同：1
> 
> 时间：2012-12-14T12:27:02.913
> 
> 标签：php, mysql

我正在尝试为网站开发搜索页面，但无法提出单个查询。

这是这十个表及其字段的列表

1.  **tmp_auction_auto**

    id 订单 类别 制造商 型号 价格 price_type 位置 年份 run_type 门 安全气囊 齿轮发动机 马力气缸 驱动类型 燃油颜色 abs 电子窗口 climatcontrol 磁盘 舱口板 电脑警报 右转向 turbo parkcontrol 调节器 皮革沙龙 导航 中控锁 椅子暖水力学 无价格 租金交换 海关 清关状态 其他联系方式

2.  **tmp_auction_estate** id 订单类型 交易价格 price_type price_sqm noprice 城市地址 面积 高度 维修条件 项目目的地 土地 阳台 mansard 会议楼梯_总楼梯 房间 卧室 阳台 sanitary_arr 凉廊 壁炉 空调 车库 停车场 土地_目的地建筑物 distance_central_street distance_tbilisi 储藏室 按摩浴缸 浴室 淋浴 桑拿 家具 技术 电话 互联网 发电机 游泳池 商务中心 吃 网络库存 衣柜 电梯 燃气 热水 加热 对讲 有线电视 报警器 系统入口 安全窗口 警卫 安全 双工 三重 卫星厨房 陈列柜 土地_铁路土地_电力土地_燃气土地_水土地_排水状况 其他联系方式

3.  **tmp_auction_other** id 订单标题 price price_type noprice info 联系方式

4.  **tmp_branch** id lang 标题内容 xy
5.  **tmp_comments** id reply_id 路径 用户名 电子邮件标题 内容 喜欢 不喜欢 时间 管理员
6.  **tmp_news** id lang 标题 内容 日期

7.  **tmp_pages** id lang 标题 内容日期

8.  **tmp_polls** id 名称 问题 答案 ip

9.  **tmp_presentation** id lang 标题顺序

10.  **tmp_sitemap** id 父语言标题链接顺序

我知道我可以以任何顺序为每个表编写多个查询（不好的做法），然后将其组合到 PHP 数组中进行输出，但我更需要一种专业的方法来处理这个主题。

PS 我不想使用 memcache、solr、sphinxs 和这样的库（服务器不支持这些）

*   我还将感谢其他搜索建议，例如内容搜索等（网站是用 php 以 mvc 模式编写的，带有 url 重写并依赖于 mysql 数据库）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:45:39.133

```
I guess you can join these tables and create a view into which the data obtained fom the joined tables can be saved. Now the search must be conducted on this view which will speed up the search.
For eg.
mysql> SELECT CONCAT(UPPER(supplier_name), ' ', supplier_address) FROM suppliers;
+-----------------------------------------------------+
| CONCAT(UPPER(supplier_name), ' ', supplier_address) |
+-----------------------------------------------------+
| MICROSOFT 1 Microsoft Way                           |
| APPLE, INC. 1 Infinate Loop                         |
| EASYTECH 100 Beltway Drive                          |
| WILDTECH 100 Hard Drive                             |
| HEWLETT PACKARD 100 Printer Expressway              |
+-----------------------------------------------------+
CREATE VIEW suppformat AS 
SELECT CONCAT(UPPER(supplier_name), ' ', supplier_address) FROM suppliers;

mysql> SELECT * FROM suppformat;
+-----------------------------------------------------+
| CONCAT(UPPER(supplier_name), ' ', supplier_address) |
+-----------------------------------------------------+
| MICROSOFT 1 Microsoft Way                           |
| APPLE, INC. 1 Infinate Loop                         |
| EASYTECH 100 Beltway Drive                          |
| WILDTECH 100 Hard Drive                             |
| HEWLETT PACKARD 100 Printer Expressway              |
+-----------------------------------------------------+

Please check this link which will give you some idea of views
[http://www.techotopia.com/index.php/An_Introduction_to_MySQL_Views][1]

  [1]: http://www.techotopia.com/index.php/An_Introduction_to_MySQL_Views 
```

# entity-framework - 未定义 FK 属性时无法删除子项

> ID：13878693
> 
> 赞同：1
> 
> 时间：2012-12-14T12:27:04.477
> 
> 标签：entity-framework, entity-framework-5, delete-file

我有以下 SQL 表（为简单起见，删除了列）：

```
create table dbo.Packs 
(
  Id int identity not null
    constraint Packs_Id_PK primary key clustered (Id)
);
create table dbo.Files
(
  Id int identity not null
    constraint Files_Id_PK primary key clustered (Id),
  PackId int not null
);
alter table dbo.Files
add constraint Files_PackId_FK foreign key (PackId) references dbo.Packs(Id) on delete cascade on update cascade; 
```

然后我按如下方式创建了 Pocos：

```
public class Pack {
  public Int32 Id { get; set; }
  public virtual ICollection<File> Files { get; set; }
} // Pack
public class File {
  public Int32 Id { get; set; }
  public int PackId { get; set; } 
  public virtual Pack Pack { get; set; }
} // File 
```

配置是：

```
internal class PackMapper : EntityTypeConfiguration<Pack> {
  internal PackMapper()
    : base() {

    ToTable("Packs");
    HasKey(x => x.Id);

    Property(x => x.Id).IsRequired().HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
  }
} // PackMapper

internal class FileMapper : EntityTypeConfiguration<File> {
  internal FileMapper()
    : base() {

    ToTable("Files");
    HasKey(x => x.Id);

    Property(x => x.Id).IsRequired().HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);

    // 1 > CONFIGURATION WITH FK IN ENTITY   
    Property(x => x.PackId).HasColumnName("PackId").IsRequired();
    HasRequired(x => x.Pack).WithMany(x => x.Files).HasForeignKey(x => x.PackId);

    // 2 > CONFIGURATION WITHOUT FK IN ENTITY
    // HasRequired<Pack>(x => x.Pack).WithMany(y => y.Files).Map(z => { z.MapKey("PackId"); });
   }
 } // FileMapper 
```

然后我尝试删除一个文件：

```
Pack pack = context.Packs.First(x => x.Id == 31);
 IList<Int32> ids = context.Entry<Pack>(pack).Collection(x => x.Files).Query().Select(x => x.Id).ToList();
foreach (int id in ids) {
  File file = new File() { Id = id };
  context.Files.Attach(file);
  context.Files.Remove(file);
}
context.SaveChanges(); 
```

如果我使用配置 1，文件将被删除。

如果我使用配置 2（不需要 FK 属性），则会收到错误消息：

> “Context.Files”中的实体参与“File_Pack”关系。找到 0 个相关的“File_Pack_Target”。1 'File_Pack_Target' 是预期的。

这是为什么？不定义 FK 属性时是否需要指定其他内容？

注意：我使用的是 EF 5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T18:59:13.197

您定义相同关系的两种方法 - 一次使用外键属性，`HasForeignKey`一次没有这样的属性- 更改[*外键关联和独立关联*](http://www.ladislavmrnka.com/2011/05/foreign-key-vs-independent-associations-in-ef-4/)`MapKey`之间的关系类型。[](http://www.ladislavmrnka.com/2011/05/foreign-key-vs-independent-associations-in-ef-4/)

 **使用外键关联，您可以通过设置标量属性*（即外键属性）来指定关系`File.PackId`。这个（不可为空的）属性总是有一个值，无论你是否明确设置它。至少它有一个默认值`0`。使用外键关联，您无需设置导航属性`File.Pack`即可告诉 EF `Pack`a`File`指的是哪个。FK 属性值就足够了。

另一方面，当使用独立关联时，您的模型没有外键属性，告诉 EF`Pack`与特定关联的唯一方法`File`是设置导航属性`File.Pack`。

您的关系是根据*需要*指定的，这也意味着 EF 希望将导航属性设置为实体并抱怨一个`null`值。这就是异常的意思。

*（当你删除*父实体时，不要问我为什么它想要一个相关实体。我不知道。当只需`DELETE`要向数据库发出父级的 SQL 语句时，这实际上并不重要。但是或许还有更深层次的原因。）

因此，为了使您的代码与独立关联一起工作并摆脱异常，您需要设置导航属性`File.Pack`：

```
Pack pack = context.Packs.First(x => x.Id == 31);
IList<Int32> ids = context.Entry<Pack>(pack).Collection(x => x.Files).Query()
    .Select(x => x.Id).ToList();
foreach (int id in ids) {
    File file = new File() { Id = id, Pack = pack };
    context.Files.Attach(file);
    context.Files.Remove(file);
}
context.SaveChanges(); 
```

**编辑**

顺便说一句：您应该能够使用单个数据库查询而不是两个查询：

```
IList<Int32> ids = context.Files.Where(f => f.Pack.Id == 31)
    .Select(f => f.Id).ToList();
Pack pack = new Pack { Id = 31 };
foreach (int id in ids) {
    File file = new File { Id = id, Pack = pack };
    context.Files.Attach(file);
    context.Files.Remove(file);
}
context.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:31:15.623

您的约束中有一个删除级联，这就是它删除两个实体的原因：

```
add constraint Files_PackId_FK foreign key (PackId) references dbo.Packs(Id) on delete cascade on update cascade; 
```*

# objective-c - UITableViewCell 中的 UILabel 在 Interface Builder 中移动时剪辑内容

> ID：13878696
> 
> 赞同：3
> 
> 时间：2012-12-14T12:27:17.387
> 
> 标签：objective-c, ios, uitableview, interface-builder

我在最新版本的 Xcode 中的 UITableViewCell 中有一个 UILabel。我用一些换行符动态地向它添加文本，它会自动调整，从而调整我的表格单元格高度。只要我将 UILabel 单独留在界面生成器中，一切正常。如果我尝试将其仅向左或向右移动 1 个像素，则内容将被剪裁为单行文本，并且该行中的所有其他行均不可见。这实际上很荒谬。我已经尝试了标签的所有设置，但如果我移动它，它会剪切除第一行之外的所有内容。有没有人有任何其他尝试的想法？我知道这听起来很荒谬。

```
- (CGFloat)heightForRowInInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation     {
    CGFloat width = (interfaceOrientation == UIInterfaceOrientationPortrait ||         interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown) ?    kDescriptionLabelWidthPortrait : kDescriptionLabelWidthLandscape;
    CGFloat height = [[self descriptionString] sizeWithFont:_descriptionLabelFont constrainedToSize:CGSizeMake(width, MAXFLOAT)].height + kDescriptionLabelPadding;
 return MIN(MAX(height, kMinCellHeight), kMaxCellHeight); 
```

}

```
#define kDescriptionLabelWidthPortrait 429.0f
#define kDescriptionLabelWidthLandscape 685.0f
#define kDescriptionLabelPadding 50.0f
#define kDescriptionLabelFontName @"Helvetica"
#define kDescriptionLabelFontSize 14.0f
#define kMinCellHeight 44.0f
#define kMaxCellHeight 2009.0f 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T04:26:54.533

这将对您有所帮助，这是来自`CustomCell.m`

```
- (void) updateWithComment:(Comment *) comment
{
    self.aComment = comment;

    [self.userBtn setTitle:[NSString stringWithFormat:@"%@ %@",comment.user.firstName,comment.user.lastName] forState:UIControlStateNormal];

    CGSize size =  [aComment.text sizeWithFont:[UIFont fontWithName:@"Helvetica" size:14.0] constrainedToSize:CGSizeMake(210, 999)];

    [self.textLbl setFrame:CGRectMake(textLbl.frame.origin.x, textLbl.frame.origin.y, 225, size.height)];

    [self.textLbl setText:aComment.text];
} 
```

![在此处输入图像描述](../Images/4a6b1258d8593309cf0529f181aa3c44.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:19:36.350

尝试将标签的行数设置为 0。0 允许标签所需的行数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T13:29:51.420

我不确定，但请尝试在身份和类型部分取消选中为您的 xib 文件使用 autoLayout。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T03:18:25.740

尝试重新启动 XCode 和 Mac，创建另一个 UILabel，并更改其框架。

# android - Android 中 libGoogleAnalyticsV2.jar 的 Maven 依赖项

> ID：13878697
> 
> 赞同：4
> 
> 时间：2012-12-14T12:27:17.087
> 
> 标签：android, maven, google-analytics

Google Analytics lib 1.3 的 mavens pom.xml 中的依赖项配置如下所示：

```
 <dependency>
          <groupId>com.google.android.analytics</groupId>
          <artifactId>analytics-v2</artifactId>
          <version>r2</version>
  </dependency> 
```

现在我已经升级到 Google Analytics lib V2 (libGoogleAnalyticsV2.jar) 但我找不到任何依赖配置示例...

我不认为我是唯一一个尝试在 android 中使用新分析库的人......那么，有没有人知道解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T22:17:07.443

Use [https://github.com/mosabua/maven-android-sdk-deployer](https://github.com/mosabua/maven-android-sdk-deployer) to create local artifacts based on the SDK. This should also create the appropriate dependency POMs for you.

# mfc - CListCtrl 强制 LVN_ITEMCHANGED 通知单击同一项目

> ID：13878703
> 
> 赞同：0
> 
> 时间：2012-12-14T12:28:08.127
> 
> 标签：mfc, click, clistctrl

我有一个 CListCtrl ，它的父处理项目的变化

ON_NOTIFY(LVN_ITEMCHANGED, IDC_LIST_CTRL, OnItemchangedListCtrl)

一切都很好，除非我单击同一个已选择的项目。我知道选择没有改变，但我想强制这个例程处理的行为。

我已经尝试过处理这个，就像那样

ON_NOTIFY(LVN_ITEMCHANGING, IDC_LIST_CTRL, OnItemchangingListCtrl)

```
void CMyWindow::OnItemchangingListCtrl(NMHDR* pNMHDR, LRESULT* pResult)
{
    *pResult=0;
} 
```

正如我在某处读到的，如果我将 * pRresult 设置为 0，它将强制进行 ITEMCHANGED 处理。不错的尝试，但失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:54:40.217

你为什么不直接从 OnItemChangedListCtrl() 中调用 OnItemChangedListCtrl() 呢？

# php - 如何在 PHP 中从数据库中检索多行

> ID：13878705
> 
> 赞同：-1
> 
> 时间：2012-12-14T12:28:12.830
> 
> 标签：php, mysql

我正在尝试从数据库中检索多行并将其处理为使用 php 代码作为服务的响应，但我不会检索所有值，只显示表中的第一行，我怎样才能使 dis 工作？

这是我的代码：

```
$servername="localhost";
$username="root";
$conn=  mysql_connect($servername,$username)or die(mysql_error());
mysql_select_db("testing",$conn);
$sql="insert into login (src,dest)values('$from','$tona')";
$result=mysql_query($sql,$conn) or die(mysql_error());
$res = mysql_query("SELECT * FROM login");
$numrows = mysql_num_rows($res);
setcookie('a',$numrows); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:30:47.813

这样做

```
<?php
$servername="localhost";
$username="root";
$conn=  mysql_connect($servername,$username)or die(mysql_error());
mysql_select_db("testing",$conn);
$sql="insert into login (src,dest)values('$from','$tona')";
$result=mysql_query($sql,$conn) or die(mysql_error());
$res = mysql_query("SELECT * FROM login");
$numrows = mysql_num_rows($res);
while ($result=mysql_fetch_array($res)){

    echo $result['src']."<br/>";

}
setcookie('a',$numrows); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T12:31:12.837

**请注意**，`_mysql`不鼓励在新开发中使用 ...[请在选择新 API 时阅读此内容](http://php.net/manual/en/mysqlinfo.api.choosing.php)

这是非常基本的，但您需要像这样循环返回的结果：

```
$res = mysql_query("SELECT * FROM login");

while ($row = mysql_fetch_array($res, MYSQL_BOTH)) {
    // your columns are accessible using
    $row['columnname'];
    // or 
    $row[columnnumber];
} 
```

[文档`mysql_fetch_array`在这里](http://php.net/manual/en/function.mysql-fetch-array.php)

[`mysql_query`](http://php.net/manual/en/function.mysql-query.php)成功时返回资源，失败时返回 false

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T12:32:18.327

mysql_* 已弃用

```
$res = mysql_query("SELECT * FROM login");
$numrows = mysql_num_rows($res);
while($row = mysql_fetch_assoc($res))
{
print_r($row);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T12:39:10.827

我看到你使用 mysql 而不是 mysqli。尝试改为 mysqli，因为这将成为新标准。自 PHP 5.5.0 版本起，mysql 将被弃用。

# linux - 如何在不运行 dhcpd 的情况下检查 dhcpd.conf 的语法错误？

> ID：13878706
> 
> 赞同：23
> 
> 时间：2012-12-14T12:28:14.547
> 
> 标签：linux, bash, dhcp

我需要确保 dhcpd.conf 上没有语法错误。如果有错误，我想知道它们是什么。

我可以使用以下命令检查语法错误：

```
dhcpd -cf /path/to/dhcpd.conf 
```

但是除了我得到的错误之外，它还打印了很多信息。另一件事是我不想运行 dhcpd，即使没有语法错误。我只想检查语法错误并查看它们是什么。

* * *

不幸的是，跑步`dhcpd -tf /path/to/dhcpd.conf`也没有解决我的问题。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-04T16:00:38.217

您正在寻找的语法是

```
dhcpd -t -cf /path/to/dhcpd.conf 
```

该`-t`选项将进行配置检查：

> 如果指定了 -t 标志，服务器将简单地测试配置文件的语法是否正确，但不会尝试执行任何网络操作。这可用于在安装之前自动测试新的配置文件。

`-cf`如果您使用的是默认配置文件路径，则不需要使用。

```
/usr/sbin/dhcpd -t 
```

您尝试使用的那个`-tf /path/to/...`完全不同，并且与跟踪有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-05T13:37:05.190

手册页上没有，也没有在这里介绍的一件事是，'/usr/sbin/dhcpd -t' 命令使用返回值来指示配置是否正确。

如果没有错误，它将返回零。如果存在语法错误，它将返回非零（我所做的测试为 1）

所以你可以使用类似的东西：

```
/usr/sbin/dhcpd -t
if [ $? -ne 0 ]; then
  echo "Configuration has errors, aborting"
fi
/bin/systemctl restart isc-dhcp-server 
```

在尝试使用新版本重新启动服务器之前检查对配置所做的更改是否有效。

不幸的是，我认为没有任何选项可以只显示错误。可以使用文本解析工具（awk、python 等）删除标题行（对于我拥有的版本，所有内容都以“For info”开头的行）和尾行（对于我拥有的版本） ，在“遇到配置文件错误 - 退出”一行之后的所有内容）只会留下语法错误和位置

# ios - 核心数据对多关系

> ID：13878712
> 
> 赞同：1
> 
> 时间：2012-12-14T12:28:47.100
> 
> 标签：ios, core-data, entity-relationship

我正在尝试为以下场景准备最佳设计。

分类 -> 产品列表 -> 产品详情

因此，在产品详细信息屏幕中，用户可以选择将产品添加到他的购物车中。因此，每当用户打开他的购物车时，他就可以在购物车控制器下看到他的所有产品。用户可以再次从购物车中查看产品详细信息屏幕。

我的问题是如何最好地准备购物车数据库？维护单独的购物车实体是最好的解决方案？或者我可以在产品实体本身中有一个布尔值。但我认为保持 BOOL 并不是最好的解决方案。例如，如果我有 10,000 个产品，那么仅获取购物车项目我必须遍历完整的产品。

我认为最好的方法是维护单独的 Cart 实体并将 product_id 保存在其中。那么，您能告诉我它应该与 Cart & Product 建立什么样的关系吗？因为我猜购物车不能独立？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:52:30.683

您可能想要从购物车到产品的多对多关系；也许称为“内容”或其他什么？

如果用户一次只有一个购物车，您也可以在 Product 中使用布尔值；如果您将该布尔值标记为“已编入索引”，则获取所有设置为“是”的产品并不是很昂贵。（如果您使用的是 SQLite 后端。）

# css - 无法让 CSS 过渡与下拉菜单一起使用

> ID：13878714
> 
> 赞同：1
> 
> 时间：2012-12-14T12:28:48.783
> 
> 标签：css, css-transitions

为了更好地了解我的情况，请前往[这个小提琴](http://jsfiddle.net/its_me/7VuGY/)并看看。小提琴的预览窗格显示了我正在构建的菜单的预览。

![菜单预览窗格](../Images/ab4e6cf8c840d546d3a62a0e3528d856.png)

当您单击菜单“频道”时，菜单只会显示而没有任何过渡效果。我不知道为什么。

这是相关代码：

```
.dropdown-menu {
    position: absolute;
    top: 36px;
    left: 0px;
    z-index: 1000;
    display: none;
    width: 550px;
    padding: 0;
    margin: 0;
    list-style: none;
    background-color: #ffffff;
    -webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2), 0 5px 10px rgba(0, 0, 0, 0.12);
    -moz-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2), 0 5px 10px rgba(0, 0, 0, 0.12);
    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2), 0 5px 10px rgba(0, 0, 0, 0.12);
    color: #222;

    /* See? */
    -webkit-transition: height 0.35s ease;
    -moz-transition: height 0.35s ease;
    -o-transition: height 0.35s ease;
    transition: height 0.35s ease;
} 
```

关于我在那里做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:44:28.120

那是因为 javascript 没有改变元素的高度（点击后出现的元素）。您的 css 仅将过渡动画应用于高度变化。

您的元素的 javascript 更改`display:none;`为`display:block;`这就是为什么您看不到 css 的任何过渡效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:00:30.020

如果不是很明显，我使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/)作为下拉菜单。我试图实现的过渡效果来自[Collapse 插件](http://twitter.github.com/bootstrap/javascript.html#collapse)，而不是[Dropdowns](http://twitter.github.com/bootstrap/javascript.html#dropdowns)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T05:44:33.550

检查此链接[http://jsfiddle.net/rakesh_vadnal/7VuGY/1/](http://jsfiddle.net/rakesh_vadnal/7VuGY/1/)

旧的 CSS：

```
.dropdown-menu {
position: absolute;
top: 36px;
left: 0px;
z-index: 1000;
display: none;
width: 550px;
padding: 0;
margin: 0;
list-style: none;
background-color: #ffffff;
-webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2), 0 5px 10px rgba(0, 0, 0, 0.12);
-moz-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2), 0 5px 10px rgba(0, 0, 0, 0.12);
box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2), 0 5px 10px rgba(0, 0, 0, 0.12);
color: #222;
-webkit-transition: height 0.35s ease;
-moz-transition: height 0.35s ease;
-o-transition: height 0.35s ease;
transition: height 0.35s ease;
height: 0;
}
.open  > .dropdown-menu {
display: block;
height: auto;
} 
```

更新的 CSS：

```
.dropdown-menu {
position: absolute;
top: 36px;
left: 0px;
z-index: 1000;

width: 550px;
padding: 0;
margin: 0;
list-style: none;
overflow:hidden;
background-color: #ffffff;
-webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2), 0 5px 10px rgba(0, 0, 0, 0.12);
-moz-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2), 0 5px 10px rgba(0, 0, 0, 0.12);
box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2), 0 5px 10px rgba(0, 0, 0, 0.12);
color: #222;
-webkit-transition: all .3s ease;
-moz-transition: all .3s ease;
-ms-transition: all .3s ease;
-o-transition: all .3s ease;
transition: all .3s ease;
height: 0;
}
.open  > .dropdown-menu {
display: block;
height:145px;
} 
```

# java - Android -定时器概念

> ID：13878717
> 
> 赞同：1
> 
> 时间：2012-12-14T12:29:10.180
> 
> 标签：java, android, timer

很抱歉提出这样一个基本问题，实际上我需要在特定时间间隔后调用一个方法，该方法实际上是在 android 中为 textView 分配一个文本，这应该会改变。所以请建议我最好的方法来做到这一点。感谢你在期待。

```
{
         int splashTime=3000;
         int waited = 0;
         while(waited < splashTime)
         {
             try {
                  ds.open();
                  String quotes=ds.getRandomQuote();
                  textView.setText(quotes);
                  ds.close();

              }
              catch(Exception e)
              {
                  e.printStackTrace();
              }
         }
         waited+=100;
     } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T12:34:41.163

你考虑过`CountDownTimer`吗？例如这样的：

```
 /**
     * Anonymous inner class for CountdownTimer
     */
    new CountDownTimer(3000, 1000) { // Convenient timing object that can do certain actions on each tick

        /**
         * Handler of each tick.
         * @param millisUntilFinished - millisecs until the end
         */
        @Override
        public void onTick(long millisUntilFinished) {
            // Currently not needed
        }

        /**
         * Listener for CountDownTimer when done.
         */
        @Override
        public void onFinish() {
             ds.open();
              String quotes=ds.getRandomQuote();
              textView.setText(quotes);
              ds.close(); 
        }
    }.start(); 
```

当然，你可以把它放在一个循环中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T12:36:44.200

您可以使用 Timer 延迟更新您的 UI，如下所示：

```
 long delayInMillis = 3000; // 3s
    Timer timer = new Timer();
    timer.schedule(new TimerTask() {
        @Override
        public void run() {
            // you need to update UI on UIThread
            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    ds.open();
                    String quotes=ds.getRandomQuote();
                    textView.setText(quotes);
                    ds.close();
                }
            });
        }
    }, delayInMillis); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T12:38:51.857

使用处理程序并将其放入 Runnable：

```
int splashTime = 3000;
Handler handler = new Handler(activity.getMainLooper());
handler.postDelayed(new Runnable() {
    @Override
    public void run() {
        try {
            ds.open();
            String quotes=ds.getRandomQuote();
            textView.setText(quotes);
            ds.close();
        } catch(Exception e) {
            e.printStackTrace();
        }
    }
}, splashTime); 
```

# asp.net - .NET 3.5 - Stackframe 的 getmethod 返回一个带有未知字符的属性名称

> ID：13878718
> 
> 赞同：2
> 
> 时间：2012-12-14T12:29:15.810
> 
> 标签：asp.net, .net-3.5, stack-trace, jit

ISSUE：`StackFrame.GetMethod()`返回带有未知字符的属性名称（**myProperty 返回为 __XY_myProperty**）。

最近我们向现有类添加了一个属性。此类用于 ASP.NET。此类中的每个属性都调用一个自定义安全检查函数，该函数使用堆栈跟踪来获取被调用者的方法名称，以根据该名称执行操作。

问题是，在运行时`StackFrame`返回这个新添加的属性名称（**myProperty**），前面带有未知字符（**__XY_myProperty**）。这只发生在生产机器上。我们无法在具有类似设置的任何其他机器上重现。

这是一个代码示例：

```
 // comments
    public returntype myProperty
    {
        get
        {
            security.checkSecurity();
            return returntype();
        }
        set
        {
            security.checkSecurity();
            if (value == null)
            {
                Row["abc"] = anothervale;
                                }
            else
            {
                Row["xyz"] = value;
            }
        }
    }
    // comment 
```

`StackFrame.GetMethod()`调用`security.checkSecurity()`返回 myProperty 方法名称为：__XY_myProperty

（`StackFrame.GetMethod()`上述示例中未显示调用。）

我们尝试的是：

1.  清除 ASP.NET 缓存
2.  比较 .NET 补丁
3.  重新启动了服务器

这些都没有解决问题。

服务器信息：

*   视窗 2003
*   在 VMWare 上运行（JIT 在 VMWare 上的优化是否不同？）
*   IIS 6
*   净 3.5
*   发布模式下构建的 ASP.NET 项目
*   在调试模式下编译的 DLL 以使堆栈跟踪正常运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:39:26.960

答案是：

安装在机器上的分析器正在更改 MSIL 代码以进行代码检测。

代码检测是能够在将代码提供给 .NET 运行时执行时对其进行修改的过程。当 CLR 加载一个类并执行其方法时，该方法的 IL 代码在即时 (JIT) 编译过程中被编译为本机指令。作为 CLR 的一部分提供的 Profiling API 允许您拦截此过程。在一个方法被 JIT 编译之前，你可以修改它的 IL 代码。

解决方案：卸载分析器，一切正常。它证明了 StackTrace 是不可靠的。

# javascript - 寻找设计模式以从单个 JSON 响应中创建多个模型/集合

> ID：13878721
> 
> 赞同：1
> 
> 时间：2012-12-14T12:29:29.750
> 
> 标签：javascript, design-patterns, backbone.js, model

我有一个 Backbone 应用程序，我从服务器获得的 JSON 与我希望模型的外观不完全是一对一的。我为我的模型使用自定义解析函数，例如：

```
parse: function(response) {
   var content = {};
   content.id = response.mediaId;
   content.image = response.image.url;
   return content;
} 
```

这行得通。但是，在某些情况下，我有一个 API 调用，我可以在其中一次获取大量信息，例如，有关带有`user`and的图像的信息`comments`：

```
{
    "mediaId": "1",
    "image": {
        "title": "myImage",
        "url": "http://image.com/234.jpg"
    },
    "user": {
        "username": "John"
    },
    "comments": [
        {
            "title": "Nice pic!"
        },
        {
            "title": "Great stuff."
        }
    ]
} 
```

我将如何从这里创建一个新的用户模型和一个评论集合？这是一个选项：

```
parse: function(response) {
   var content = {};
   content.id = response.mediaId;
   content.image = response.image.url;
   content.user = new User(response.user);
   content.comments = new Comments(response.comments);
   return content;
} 
```

这里的问题是，通过创建一个`new User`或`new Comments`使用原始 JSON 作为输入，Backbone 只会将 JSON 属性添加为属性。相反，我希望有一个类似中间`parse`的方法来控制对象的结构。以下是一个选项：

```
parse: function(response) {
    // ...
    content.user = new User({
        username: response.user.username
    });
    // ...
} 
```

...但这不是很防干。

所以，我的问题是：用 1 个 JSON 响应创建多个模型/集合并控制模型/集合属性的好模式是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:51:01.830

这可能不是最好的方法，但这就是我的做法：

```
content.user = new User(User.prototype.parse(response.user)); 
```

唯一的问题是`this`上下文`User.parse`是错误的。如果您在构造函数中没有任何特定代码`User`，您也可以这样做：

```
content.user = new User();
content.user.set(user.parse(response.user)); 
```

我还注意到 Backbone 版本 0.9.9 更改日志中的一个有趣的注释：

> parse 函数现在总是在定义后运行，对于集合和模型——不仅仅是在 Ajax 调用之后。

并查看`Model`和`Collection`构造函数的源代码，他们这样做：

```
if (options && options.parse) attrs = this.parse(attrs); 
```

也许升级到 0.9.9 会给你你需要的东西？如果升级不是一个选项，您当然可以在自己的构造函数中实现相同的功能。

# java - 从 Json 转换为 groovy CODE？

> ID：13878724
> 
> 赞同：2
> 
> 时间：2012-12-14T12:29:39.953
> 
> 标签：java, json, groovy, converter

对于奇怪的情况，这是一种奇怪的问题。我有一个大型 JSON 结构，我想在运行 groovy 代码中表示它。我需要与 JSON 对象具有相同结构的 groovy 对象。

正如所料，网络搜索主要返回带有 groovy/json 运行时转换内容的结果，但没有关于输出 groovy 代码的内容。

您可能会认为这很懒，但实际上它是一个庞大的 JSON 结构！转换器将节省几天！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T14:31:46.133

您可以使用 Groovy 自己的`JsonSlurper`来解析 JSON 对象：

```
import groovy.json.*

def json = '{"name":"john", "surname":"doe", "languages": ["groovy", "python"]}'

def obj = new JsonSlurper().parseText(json)

assert obj.name == "john"
assert obj.surname == "doe"

assert obj.languages.containsAll("python", "groovy") 
```

当然这个类是无类型的：它只在运行时知道。如果您希望它被键入，您可以编写一个基于示例编写代码*的代码（因为*[json 模式](http://json-schema.org/)可能很少见）。

**编辑**：如果您想生成模型类代码，您可以尝试[JSONGen](http://jsongen.byingtondesign.com/)，它“解析 JSON 以创建客户端源文件以对 JSON 数据结构进行建模”。我不知道 Groovy 的解决方案，但由于 java-groovy 集成是无缝的，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:34:28.420

如果您想要 JSON 的 Groovy 表示，您可以通过内置的[JsonSlurper 获得](https://docs.groovy-lang.org/latest/html/gapi/groovy/json/JsonSlurper.html)。这将为您提供可以使用的 Java 地图和数据列表。

[您可以使用（第 3 方）Jackson 的数据绑定功能](https://github.com/FasterXML/jackson-databind)填充您编写的更具体的自定义对象以表示您的 JSON 实体（也请参阅[此问题](https://stackoverflow.com/questions/1884979/json-to-groovy-parser)）。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-14T12:59:44.880

尝试使用像[这样](http://flori.github.com/json/)的 JSON 解析器。根据它的文档，你只需要做

```
JSON.parse 
```

反序列化数据

# jboss5.x - 在 JBoss-5.1.0 中部署 OFBiz-11.04

> ID：13878727
> 
> 赞同：1
> 
> 时间：2012-12-14T12:29:50.810
> 
> 标签：jboss5.x, ofbiz

为了获得负载平衡和集群的灵活性，我想按照文档（https://cwiki.apache.org/OFBTECH/deploying-ofbiz-904-on-jboss-）在 JBoss-5.1.0 中部署我的 OFBiz 应用程序510.html）。

构建成功，我可以看到 server/default/deploy/OFBiz.ear 中的所有 WAR 文件和 lib 文件夹中的其他 JAR 文件。但是我在启动 JBoss 服务器时遇到了一些问题。如果您有任何线索，请看一下并帮助我。

## 问题：

1.  找不到实体名称 EntityKeyStore 的定义 .... 找不到实体名称 JobSandbox 的定义 .... …………

    EntityKeyStore 的实体定义位于 framework/entity/entitydef 文件夹的 entitymodel.xml 中。我在 OFBiz.ear 中的任何地方都找不到这个 xml。（不仅是这个 XML，在 ear 中找不到 entitymodel.xml 。但其他实体没有问题。我不知道为什么会这样）。我检查了我的数据库（server/default/data/derby）并在那里找到了 ENTITY_KEY_STORE。

JobSandBox 也是如此。

1.  在此异常之后，服务器似乎继续为每个组件创建调度程序，并从记帐开始。我在这里遇到另一个问题。

无法获取名称为 [common] 的组件的根位置，错误为：org.ofbiz.base.component.ComponentException：未找到名为的组件：common ..... .... .... ---- 异常报告 - - - - - - - - - - - - - - - - - - - - - - - - - --------- 错误处理包括 [component://common/webcommon/WEB-INF/common-controller.xml]:java.net.MalformedURLException: 无法获取名称为 [common] 的组件的根位置]，错误是：org.ofbiz.base.component.ComponentException：找不到名为的组件：常见异常：java.net.MalformedURLException

此异常在日志文件中重复打印。最终，commonext、会计和电子商务等其他组件也会引发相同类型的异常。

在这些异常之后，还会抛出“找不到实体名称租户的定义”。

我的 OFBiz 应用程序使用多租户环境。任何帮助是极大的赞赏。

# ruby - 获取字符串中两个给定符号之间的文本

> ID：13878728
> 
> 赞同：1
> 
> 时间：2012-12-14T12:29:57.397
> 
> 标签：ruby

考虑下面的字符串

`str = "hellow >world<"`

我是否可以删除出现在任何内置函数之间`>`和`<` 使用任何内置函数的文本？还是我必须编写自定义函数来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T12:34:16.813

给定您非常基本的示例，以下将返回`"world"`

```
str.match(/>(.+)</)[1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T12:33:33.457

您可以使用匹配方法和正则表达式，例如

```
str.match(/\>(\w+)\</)[1] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T12:39:34.773

你可以用拆分来做到这一点：

```
str.split(/[<>]/)[1] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T13:10:38.450

如果您只想*保留*符号之间的单词：

```
str.scan(/>(.*?)</).flatten 
```

与此处的其他解决方案不同，这可以处理您想要提取多个单词的情况。

如果要*删除*单词并保留其余部分：

```
str.gsub(/>.*?</,"") 
```

# php - 使用 AJAX 加载 Javascript

> ID：13878729
> 
> 赞同：0
> 
> 时间：2012-12-14T12:30:01.090
> 
> 标签：php, javascript, html

我有这个整洁的小代码：

```
<script type="text/javascript" language="javascript">
$(function(){
 $(window).hashchange( function(){
   window.scrollTo(0,0);
   var hash = location.hash;
   if (hash == "") {
   hash="#main";
   }
     var newhash = !/\.php$/i.test(hash)? hash+".html": hash;
     ajax_loadContent('m',newhash.slice(1,newhash.length));
  $('.menu li a').each(function(){
     var that = $(this);
     that[ that.attr( 'href' ) === hash ? 'addClass' : 'removeClass' ]( 'current' );
  });
 })
 $(window).hashchange();
});

</script> 
```

唯一的问题是，如果我导航到包含 Javascript 的页面，则不会执行该代码。如何让它像浏览器正常加载页面一样运行 Javascript 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:39:33.763

它不会以文本形式执行。`"eval"`您必须在响应文本上使用函数

# mongodb - MongoDB单向复制

> ID：13878731
> 
> 赞同：8
> 
> 时间：2012-12-14T12:30:04.860
> 
> 标签：mongodb

需要一些方法将数据从客户端数据库推送到中央数据库。基本上，有几个 MongoDB 实例在远程机器 [客户端] 上运行，并且需要一些方法来定期更新中央 mongo 数据库与客户端中新添加和修改的文档。它必须将其记录复制到单个中央服务器

例如：

如果我在 3 台机器上运行 3 个 mongo 实例，每台机器都有 10GB 的数据，那么在数据迁移之后，第 4 台机器的 mongoDB 必须有 30GB 的数据。并且中央 mongoDB 机器必须定期更新所有这 3 台机器的数据。但是这 3 台机器不仅会获取新文档，而且其中的现有文档可能会更新。我希望中央 mongoDB 机器也能获得这些更新。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T07:16:44.860

MongoDB 不正式支持您所需的复制策略。

[MongoDB 副本集](http://docs.mongodb.org/manual/replication/)由一个主服务器组成，该主服务器异步复制到同一副本集中的一个或多个辅助服务器。您不能配置具有多个主副本的副本集或复制到不同的副本集。

但是，根据您希望使中央服务器保持最新状态的积极程度以及您需要管理的数据/更新量，您的用例有几种可能的方法。

### 一些一般性警告：

*   合并来自多个独立服务器的数据可能会产生意想不到的冲突。例如，唯一索引不会知道在其他服务器上创建的文档。

*   理想情况下，您正在合并的数据仍将由每个源服务器的唯一数据库名称分隔，因此您不会在碰巧具有相同名称空间`_id`并由不同源服务器共享的不同文档之间发生奇怪的串扰。

## 方法#1：使用`mongodump`和`mongorestore`

如果您只需要定期将内容同步到中央服务器，一种方法是使用[`mongodump`and`mongorestore`](http://docs.mongodb.org/manual/administration/backups/#using-binary-database-dumps-for-backups)。`mongodump`您可以从每个独立实例中安排一个周期，并用于`mongorestore`将它们导入中央服务器。

### 注意事项：

*   有一个[`--db`参数](http://docs.mongodb.org/manual/reference/mongorestore/#cmdoption-mongorestore--db)允许`mongorestore`您从原始名称恢复到不同的数据库（如果需要）

*   `mongorestore`仅对现有数据库执行插入操作（即不**执行**更新或 upserts）。如果`_id`目标数据库上已经存在相同的现有数据，则 mongorestore 不会替换它。

*   您可以使用`mongodump`诸如[`--query`](http://docs.mongodb.org/manual/reference/mongodump/#cmdoption-mongodump--query)对要导出的数据更具选择性的选项（例如，仅选择最近的数据而不是全部）

*   如果您想限制每次运行时转储和恢复的数据量（例如，仅导出“更改的”数据），您将需要弄清楚如何在中央服务器上处理更新和删除。

鉴于警告，这种方法最简单的用法是进行完全转储和恢复（即使用[`mongorestore --drop`](http://docs.mongodb.org/manual/reference/mongorestore/#cmdoption-mongorestore--drop)）以确保复制所有更改。

## 方法 #2：在 MongoDB 中使用可尾游标`oplog`。

如果您需要更多实时或增量复制，一种可能的方法是在 MongoDB 复制上[创建可尾游标](http://docs.mongodb.org/manual/tutorial/create-tailable-cursor/)[`oplog`](http://docs.mongodb.org/manual/core/replication/#replica-set-oplog-sizing)。

这种方法基本上是“滚动你自己的复制”。您必须编写一个应用程序来跟踪每个 MongoDB 实例上的 oplog，并查找感兴趣的更改以保存到您的中央服务器。例如，您可能只想复制选择性命名空间（数据库或集合）的更改。

一个可能感兴趣的相关工具是来自 10gen 实验室的实验性[Mongo 连接器。](http://blog.mongodb.org/post/29127828146/introducing-mongo-connector)这是一个 Python 模块，它提供了一个跟踪复制的接口`oplog`。

### 注意事项：

*   您必须为此实现自己的代码，并学习/理解如何使用`oplog`文档

*   可能有一种替代产品可以更好地支持您所需的“开箱即用”复制模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:46:47.940

您应该知道，只有副本集用于进行复制，副本集总是意味着：一个主，多个辅助。写入*总是*转到主服务器。显然您想要 MongoDB 不支持的多主复制。所以你想研究一种不同的技术，比如 CouchDB 或 CouchBase。MongoDB在这里是爆桶。

# javascript - 仅在启用 adblock 时如何在广告后面显示背景？

> ID：13878734
> 
> 赞同：0
> 
> 时间：2012-12-14T12:30:12.733
> 
> 标签：javascript, css, adblock

我试图在通常是 300x250 广告的地方显示背景图片，但前提是 adblock 阻止了广告。任何人都知道如何做到这一点？使用 div 会导致背景在我不想要的广告加载之前显示。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:59:11.257

由于访问者的计算机上安装了 adblock 软件，因此无法知道广告是否被阻止（我能想到的）。但是，由于广告是使用 JavaScript 显示的——它是 adblock 软件专门针对和阻止的——你可以编写一些 JavaScript 来检查广告是否在页面末尾加载，如果没有，添加一个 CSS 类显示您`div`想要的背景图像。伪代码：

```
<style type="text/css">
     .adblocked { background: url("img/no-ad.jpg") left top no-repeat; }
</style>

<div id="ad"></div>

<script src="ads.js"></script>
<script>
    if (typeof adLibraryName === "undefined") {
        // ad stuff was not loaded
        document.getElementById("ad").className += " adblocked";
    }
</script> 
```

正如 MAXIM 所说，这与 PHP 无关，您无法让它与 PHP 一起使用，因为 PHP 在服务器上运行并且不知道是否安装了广告拦截。简而言之，所有这些都是客户端问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T07:52:39.553

检查 Adsense 是否被阻止，从而将替代内容加载到广告容器中。

if (typeof(window.google_jobrunner) == 'undefined') {

// Adsense 被阻止，将其他内容加载到容器中

}

如果这样做，最好使用 CSS 设置容器的高度。

您可以通过选择“打开可阻止的项目”来检查 Adblock Plus 在 Firefox 中阻止的内容。

Adblock Plus 还会阻止文件名中具有常见广告尺寸的图像，例如“whatever_468x60.png”可能会被阻止。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T12:43:44.557

既然您用 PHP 标记了您的问题，我将戴上 php 眼镜回答：问题是广告拦截是客户端的，通过 php 添加 div 是服务器端。因此，您首先必须知道客户端会发生什么，然后编写您的代码 - 但这不起作用。您可能仍然可以通过 AJAX 请求执行此操作——但这​​意味着您将首先发送页面而不知道是否激活了 adblock……</p>

干杯，±...</p>

# flyway - 使用 Flyway 自动迁移不同架构版本的数据库

> ID：13878735
> 
> 赞同：2
> 
> 时间：2012-12-14T12:30:13.027
> 
> 标签：flyway

我认为文档（http://flywaydb.org/getstarted/existingDatabaseSetup.html）不够清楚，希望用一个例子来说明描述。我有一个给你：

假设我们有两个不同版本（1 和 2）的生产数据库，其模式版本是隐式的，但通过查询现有表来确定。那么我们将如何实现文档中描述的内容？

在我的示例中，两个版本都附有脚本： 版本 1：创建表 A 版本 2：创建表 B

我创建了与版本 1 和 2 的脚本匹配的 java 迁移文件，但由于缺少 flyway 元数据，我需要查询数据库是否已运行脚本并在这种情况下跳过它们。问题是应用程序崩溃，因为 Flyway 尚未初始化。

我不想从命令行初始化 Flyway，因为我希望在部署时自动完成（嵌入式模式下的 Flyway）。据我所知，这只适用于空数据库。这个问题有简单的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:37:21.623

对于单个 PROD 数据库，您可以使用 flyway.initOnMigrate

在您的情况下，您必须通过检查表并使用 flyway.initialVersion=1 或使用 flyway.initialVersion=2 调用 init，然后调用 migrate 来包装 Flyway 并手动重新创建它。

# php - Magento 未定义常量

> ID：13878743
> 
> 赞同：0
> 
> 时间：2012-12-14T12:30:51.623
> 
> 标签：php, zend-framework, magento-1.4

嗨，magento 有问题，因为当我单击太阳镜菜单时，它会显示此错误：

```
Notice: Use of undefined constant id - assumed 'id'  in /var/www/app/design/frontend/glassesonline/default/template/mana/filters/items/list.phtml on line 159 
```

这是第 159 行的代码

```
<input id="category" type="hidden"  value="<?php $arr = $this->getRequest()->getParams(id,false); echo $arr['id']; ?>"> 
```

这让我发疯，请让我知道我哪里错了，如果需要我会提供更多信息。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:37:11.640

它应该是：

```
<input id="category" type="hidden"  value="<?php $arr = $this->getRequest()->getParams('id',false); echo $arr['id']; ?>">
                                                                                        ^^^ 
```

您在这里缺少引号，PHP 认为您正在尝试使用您没有的已定义变量。始终为字符串使用引号。

# asp.net - 谷歌结账订阅解决方案

> ID：13878744
> 
> 赞同：3
> 
> 时间：2012-12-14T12:30:53.737
> 
> 标签：asp.net, google-checkout

我为我的 asp.net 网站配置了 Google 结帐订阅。
但我有一些问题。

1.  如何取消订阅付款？
2.  如何使用沙盒环境测试订阅支付？

*（我的意思是如果我设置每周订阅是否会在沙盒环境中发送付款通知）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:43:41.130

我找到了解决方案，这将对某人有所帮助

```
CancelItemsRequest cma = new CancelItemsRequest(System.Web.Configuration.WebConfigurationManager.AppSettings["GoogleMerchantID"].ToString(), System.Web.Configuration.WebConfigurationManager.AppSettings["GoogleMerchantKey"].ToString(), EnvironmentType.Sandbox.ToString(), ["merchant_invoice_id"], "Message", "");
                cma.AddMerchantItemId("2"); // item id to cancel
                cma.MerchantID = System.Web.Configuration.WebConfigurationManager.AppSettings["GoogleMerchantID"].ToString();
                cma.MerchantKey = System.Web.Configuration.WebConfigurationManager.AppSettings["GoogleMerchantKey"].ToString();
                cma.Environment = EnvironmentType.Sandbox;
                cma.SendEmail = false;
                GCheckoutResponse Respa = cma.Send(); 
```

# c++ - Qt中正确的线程方式

> ID：13878745
> 
> 赞同：6
> 
> 时间：2012-12-14T12:31:01.327
> 
> 标签：c++, multithreading, qt, qthread

我有耗时的图像加载（图像很大），加载时也完成了一些操作。我不想阻止应用程序 GUI。

我的想法是在另一个线程中加载图像，发出图像已加载的信号，然后用该图像重绘视图。

我的做法：

```
void Window::loadImage()
{ 
    ImageLoader* loaderThread = new ImageLoader();
    connect(loaderThread,SIGNAL(imageLoaded()),this,SLOT(imageLoadingFinished());
    loaderThread->loadImage(m_image, m_imagesContainer, m_path);
}
void Window::imageLoadingFinished()
{
    m_imagesContainer->addImage(m_image);
    redrawView();
}

class ImageLoader : public QThread
{
    Q_OBJECT
    public:
       ImageLoader(QObject *parent = 0) : m_image(NULL), m_container(NULL)

       void loadImage(Image* img, Container* cont, std::string path)
       {
            m_image = img;
            m_container = cont;
            ...
            start();
       }
    signals:
       void imageLoaded();
    protected:
       void run()
       {
           //loading image and operations on it
           emit imageLoaded();
       }
    protected:
       Image* m_image;
       Container* m_container;
} 
```

我基于`quedcustomtype`Qt 编写此代码的示例。在 stackoverflow 中搜索和搜索时，我还发现子类化`QThread`不是一个好主意。

**所以问题是正确的方法是什么？正如我所说，我希望在另一个线程中完成非阻塞 GUI、加载和操作，并发出表示加载完成的信号。发出信号后，应重新绘制视图。** 我对多线程知之甚少，但想理解或有足够的知识来理解基本思想。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T12:43:02.300

使用[`QtConcurent`](http://doc.qt.digia.com/qt/qtconcurrent.html)框架。

```
#include <QtConcurentRun>
#include <QFutureWatcher>

//....
class Window: public QWidget /*or something*/
{
//....
private:
    QFutureWatcher<QImage> _wacther; //this object will signal when loading finished
};

//...

void Window::loadImage()
{
   connect(&_watcher, SIGNAL(finished(), SLOT(finishLoading());
    _wacther.setFuture(QtConcurent::run<QImage>(this, &Window::doLoadImage));
}

QImage Window::doLoadImage() //this function will be executed in the new thread. SHOULD BE Thread Safe
{
   return someImage;
}

void window::finishLoading()
{
    QImage result = _watcher.result();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T14:24:46.477

我想这是最好的方法：

```
#include <QApplication>
#include <QLabel>
#include <QThread>

class ImageLoader : public QObject
{
   Q_OBJECT
public:
   ImageLoader() : QObject() {
      moveToThread(&t);
      t.start();
   }
   ~ImageLoader() {
      qDebug("Bye bye!");
      t.quit();
      t.wait();
   }

   void requestImage(QString absPath) {
      QMetaObject::invokeMethod(this, "loadImage", Q_ARG(QString, absPath));
   }

public slots:
   void loadImage(QString absPath) {
      // Simulate large image.
      QImage image(absPath);
      sleep(10);
      qDebug("Image loaded!");
      emit imageReady(image);
   }

signals:
   void imageReady(QImage image);

private:
   QThread t;
};

class MyLabel : public QLabel
{
   Q_OBJECT
public:
   MyLabel() : QLabel() {}

   void mousePressEvent(QMouseEvent* ev) {
      Q_UNUSED(ev);
      qDebug("I got the event!");
   }

public slots:
   void setImage(QImage image) {
      setPixmap(QPixmap::fromImage(image));
      resize(image.width(), image.height());
      qDebug("Image shown!");
   }
};

int main(int argc, char *argv[])
{
   QApplication a(argc, argv);

   MyLabel label;
   label.show();

   ImageLoader imageLoader;
   QObject::connect(&imageLoader, SIGNAL(imageReady(QImage)), &label, SLOT(setImage(QImage)));
   imageLoader.requestImage(some_abs_path);

   return a.exec();
}

#include "main.moc" 
```

我也喜欢 QtConcurrent，但考虑到不鼓励使用它：http: [//www.mail-archive.com/development@qt-project.org/msg07794.html](http://www.mail-archive.com/development@qt-project.org/msg07794.html)。

# xml - 检查 XML 文件的指定规则

> ID：13878746
> 
> 赞同：1
> 
> 时间：2012-12-14T12:31:03.573
> 
> 标签：xml, xml-parsing, xml-validation

假设我有以下 xml 文件：

```
<report>
  <income>
    <amount type="type1">50</amount>
    <amount type="type2">100</amount>
  </income>
  <outcome>
    <amount type="type1">75</amount>
    <amount type="type2">10</amount>
  </outcome>
</report> 
```

我想确保 xml 文件只包含上面的标签，类型属性只有 type1 或 type2，并且数量只是整数。我应该使用什么来根据指定的规则验证 xml 文件？我必须手动执行（解析 xml 文件并检查每个标签的规则）还是有任何方法，如预定义模板或其他任何方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:32:55.563

听起来你需要一个[XML Schema](http://en.wikipedia.org/wiki/XML_schema)

> XML 模式是对一种 XML 文档类型的描述，通常用对该类型文档的结构和内容的约束来表示，超出 XML 本身施加的基本句法约束。这些约束通常使用管理元素顺序的语法规则、内容必须满足的布尔谓词、管理元素和属性内容的数据类型以及更专业的规则（例如唯一性和参照完整性约束）的某种组合来表示。

[这里](http://www.w3schools.com/schema/default.asp)有一个教程可以帮助您入门。

# iphone - 字符串中相同的单词

> ID：13878751
> 
> 赞同：-1
> 
> 时间：2012-12-14T12:31:18.020
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我是 xcode 的新手，也许这个问题很愚蠢，但我的家庭作业落后了。
在一个文件中，我想在字符串之后读取一个特定的字符。

例子：

```
asasasasasas
wewewewewewe
xyz_ 22 aaaaaaaaaaa bbbbbbbbbbb ccccccccccccccc ddddddddddddd
fgfgfgfgfgfgfg
ererererererer

abc_ 12 bbbbbbbbbb dddddddd
jkjkjkjkjkjkjk
lalallalalalal 
```

我的代码：

```
NSString *contentFile = [[NSString alloc] initWithContentsOfFile:pathFile    encoding:NSUTF8StringEncoding error:nil];
NSArray *lineFile = [contentFile componentsSeparatedByString:@"\n"];
NSMutableString *xmlFile = [[NSMutableString alloc] init];
for(int i = 2; i < lineFile.count; i++)//i = 2 for don't take the 2 first line
{
    if ([((NSString *)[lineFile objectAtIndex:i]) rangedOfString:@"test"].location !=  NSNotFound){
        xmlFile = [NSString stringWithFormat:@"%@<nameTag>%@</nameTag>", xmlFile, (NSString *)[lineFile objectAtIndex:i]];
    }
    else if ...
} 
```

一切正常..
但我想在 xyz_ 之后打印...比如：

```
aaaaaaaaaaa 
bbbbbbbbbbb 
ccccccccccccccc 
ddddddddddddd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:13:06.383

你也可以试试这个：（建议在单独的测试应用程序中尝试）

我假设你的目标线：

```
xyz_ 22 aaaaaaaaaaa bbbbbbbbbbb ccccccccccccccc ddddddddddddd 
```

总是以“xyz_ 22”开头。在这里查看：（另请参阅评论）

```
 // prepared a string similar to what you already have
    NSMutableString *xmlfile = [[NSMutableString alloc] initWithFormat:@"%@\n%@\n%@\n%@\n%@\n%@\n%@\n%@\n%@",
    @"asasasasasas",
    @"wewewewewewe",
    @"xyz_ 22 aaaaaaaaaaa bbbbbbbbbbb ccccccccccccccc ddddddddddddd",
    @"fgfgfgfgfgfgfg",
    @"ererererererer",
    @"",
    @"abc_ 12 bbbbbbbbbb dddddddd",
    @"jkjkjkjkjkjkjk",
    @"lalallalalalal"];

    NSLog(@"%@", xmlfile);    // check out by printing (optional)

    NSArray *arr = [xmlfile componentsSeparatedByString:@"\n"];  // first break with NEWLINE character
    NSLog(@"%@",arr);         // check out by printing (optional)

 for (NSString *str in arr)    // traverse all lines
{
    if([str hasPrefix:@"xyz_ 22"])  // if it starts with "xyz_ 22"
    {

        NSMutableArray *mArr = [[NSMutableArray alloc] initWithArray:[[str stringByReplacingOccurrencesOfString:@"xyz_ 22 " withString:@""] componentsSeparatedByString:@" "]];

         for(int i=0; i< [mArr count];i++ )
         {
            NSString *tag;

            if([[mArr objectAtIndex:i] length] > 3)
            {
                // If more than three i.e., aaaaa then write <aaa>aaaaaaa<aaa>
                tag = [[mArr objectAtIndex:i] substringWithRange:NSMakeRange(0, 3)];
            }
            else
            {
                // If less than three i.e., aa then pick <aa>aa<aa> or 
                                            a  then pick <a>a<a>
                tag = [mArr objectAtIndex:i];
            }

            NSString *s= [[NSString alloc] initWithFormat:@"<%@>%@<%@>", tag, [mArr objectAtIndex:i], tag];
            [mArr removeObjectAtIndex:i];
            [mArr insertObject:s atIndex:i];

        }

        NSLog(@"%@", mArr);   // prints output
    }
} 
```

如果行首不固定为“xyz_ 22”，则需要查看[NSRegularExpression](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)类并使用它而不是使用`hasPrefix`.

此示例模式可以帮助您：

```
@"^(.{3}\_\s*\d{2}\s*)" 
```

此模式匹配包含三个字符后跟下划线和空格后跟两位数字后跟空格的任何行。

您可以根据需要使用这些功能中的任何一个：

[firstMatchInString：选项：范围：](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html#//apple_ref/occ/instm/NSRegularExpression/matchesInString%3aoptions%3arange%3a)

[匹配字符串：选项：范围：](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html#//apple_ref/occ/instm/NSRegularExpression/firstMatchInString%3aoptions%3arange%3a)

[numberOfMatchesInString：选项：范围：](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html#//apple_ref/occ/instm/NSRegularExpression/firstMatchInString%3aoptions%3arange%3a)

希望能帮助到你。

快乐的编码和阅读！！！

**编辑：**

我已经更新了代码，但我怀疑没有。您在评论中指定的标签中的字符数。好吧，这将使您了解如何解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T13:05:04.480

> 一切正常..但我想在 xyz_ 之后打印...比如：
> 
> aaaaaaaaaa
> bbbbbbbbbbb
> ccccccccccccccc
> dddddddddddddd

我希望能正确理解你想要做什么：

```
if ([([lineFile objectAtIndex:i]) rangedOfString:@"test"].location !=  NSNotFound)
{
    xmlFile = [NSString stringWithFormat:@"%@<nameTag>%@</nameTag>", xmlFile, (NSString *)[lineFile objectAtIndex:i]];
    NSString* str= [[lineFile objectAtIndex: i]stringByReplacingOccurrencesOfString: @"xyz_ " withString: @""];
    NSLog(@"%@",[str stringByReplacingOccurrencesOfString: @" " withString: @"\n"]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T13:24:39.307

If you want to break the string by new line, try this one :

```
NSArray *lineFile=[contentFile componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]]; 
```

instead of

```
NSArray *lineFile = [contentFile componentsSeparatedByString:@"\n"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T13:05:52.827

要格式化的字符串中不存在字符串“test”。尝试将其删除，然后尝试使用 [contentFile componentsSeparatedByString@" "]

# view - 防止 chaplin.js 中的视图被重新渲染

> ID：13878752
> 
> 赞同：0
> 
> 时间：2012-12-14T12:31:21.520
> 
> 标签：view, backbone.js, navigation, coffeescript, chaplinjs

我正在玩一些[卓别林](http://chaplinjs.org)应用程序，并尝试根据路由的 URL 在导航中的链接中添加一个类。

```
# navigation_view.coffee

initialize: ->
  super
  @subscribeEvent '!router:changeURL', @setActiveNavigation

setActiveNavigation: (path) ->
  $('nav a[href="/' + path + '"]').addClass "active" 
```

在重新渲染整个 navigationView 之前，这在几分之一秒内效果很好。`autoRender`设置为`false`。有谁知道如何防止视图被重新渲染？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:38:02.690

没关系，我忘记了`@subscribeEvent 'startupController', @render`，现在没有它可以正常工作。

# .htaccess - 如何将一个域的所有请求重写到子文件夹（htaccess）？现有代码不能正常工作

> ID：13878753
> 
> 赞同：0
> 
> 时间：2012-12-14T12:31:22.903
> 
> 标签：.htaccess, mod-rewrite

我在 .htaccess 文件中有以下重写规则。这个想法是对 www.site.com 的任何请求都应该路由到“文件夹”子文件夹，但任何其他域都应该不受影响。

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^www\.site\.com$
RewriteCond %{REQUEST_URI} !^/folder/
RewriteRule ^(.*)$ /folder/$1 [L] 
```

这适用于 /folder/ 中的索引文件，但我在 /folder/assets/ 中有图像和 css 并且这些没有加载。

知道如何将重写传递给 /folder/ 的全部内容，包括 /folder/assets/ 中的文件吗？

# javascript - jQuery将类的一部分与hasClass匹配

> ID：13878759
> 
> 赞同：36
> 
> 时间：2012-12-14T12:31:43.390
> 
> 标签：javascript, jquery, class

我有几个带有“project [0-9]”类的div：

```
<div class="project1"></div>
<div class="project2"></div>
<div class="project3"></div>
<div class="project4"></div> 
```

我想检查元素是否有“project [0-9]”类。我有`.hasClass("project")`，但我坚持使用匹配的数字。

任何的想法？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-12-14T12:33:12.950

您可以使用[startswith CSS3 选择器](http://api.jquery.com/attribute-starts-with-selector/)来获取这些 div：

```
$('div[class^="project"]') 
```

要检查一个特定元素，您可以使用[`.is()`](http://api.jquery.com/is/)，而不是`hasClass`：

```
$el.is('[class^="project"]') 
```

要使用确切的`/project\d/`正则表达式，您可以查看[jQuery 选择器正则表达式](https://stackoverflow.com/q/190253/1048572)或使用

```
/(^|\s)project\d(\s|$)/.test($el.attr("class")) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-14T12:39:07.503

对您的 html 更好的方法是：我相信这些 div 具有一些共同的属性。

```
<div class="project type1"></div>
<div class="project type2"></div>
<div class="project type3"></div>
<div class="project type4"></div> 
```

然后您可以使用以下方法找到它们：

```
$('.project') 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-09-11T06:21:37.340

```
$('div[class*="project"]') 
```

不会因为这样的事情而失败：

```
<div class="some-other-class project1"></div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-15T03:49:48.277

```
$('div[class^="project"]') 
```

将失败，如下所示：

```
<div class="some-other-class project1"></div> 
```

这是扩展 jQuery 的替代方法：

```
// Select elements by testing each value of each element's attribute `attr` for `pattern`.

  jQuery.fn.hasAttrLike = function(attr, pattern) {

    pattern = new RegExp(pattern)
    return this.filter(function(idx) {
      var elAttr = $(this).attr(attr);
      if(!elAttr) return false;
      var values = elAttr.split(/\s/);
      var hasAttrLike = false;
      $.each(values, function(idx, value) {
        if(pattern.test(value)) {
          hasAttrLike = true;
          return false;
        }
        return true;
      });
      return hasAttrLike;
    });
  };

jQuery('div').hasAttrLike('class', 'project[0-9]') 
```

来自 sandinmyjoints：[https](https://github.com/sandinmyjoints/jquery-has-attr-like/blob/master/jquery.hasAttrLike.js) ://github.com/sandinmyjoints/jquery-has-attr-like/blob/master/jquery.hasAttrLike.js （但它有错误，所以我修复了它）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-18T15:28:18.897

您可以改进现有`hasClass`方法：

```
// This is all that you need:
(orig => { 
  jQuery.fn.hasClass = function(className) {
    return className instanceof RegExp
      ? this.attr('class') && this.attr('class')
        .split(/\s+/)
        .findIndex(name => className.test(name)) >= 0
      : orig.call(this, className); 
  }
})(jQuery.fn.hasClass);

// Test the new method:
Boolean.prototype.toString = function(){ this === true ? 'true' : 'false' };
const el = $('#test');
el.append("hasClass('some-name-27822'): " + el.hasClass('some-name-27822'));
el.append("\nhasClass(/some-name-\d+/): " + el.hasClass(/some-name-\d+/));
el.append("\nhasClass('anothercoolclass'): " + el.hasClass('anothercoolclass'));
el.append("\nhasClass(/anothercoolclass/i): " + el.hasClass(/anothercoolclass/i));
el.append("\nhasClass(/^-name-/): " + el.hasClass(/^-name-/));
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<pre id="test" class="some-name-0 some-name-27822 another-some-name-111 AnotherCoolClass"></pre>
```

* * *

## 回答 #6

> 赞同：-7
> 
> 时间：2012-12-14T12:37:38.157

为什么不使用 for 来检查数字

```
for (var i = 0; i < 10; i++) {
                if(....hasClass("project"+i))
                {
            //do what you need
                }
            } 
```

# c++ - 从外壳扩展插入项目到桌面右键菜单

> ID：13878761
> 
> 赞同：1
> 
> 时间：2012-12-14T12:31:51.680
> 
> 标签：c++, winapi, shell, atl, explorer

我使用 VS2010 和 ATL 编写了一个 Windows Explorer shell 扩展，在 HKLM\Directory\Background\shellex\ContextMenuHandlers 下注册，以便在上下文菜单下添加我的命令。

一切都按预期工作，但我想添加一个上下文菜单条目，当且仅当用户右键单击桌面时才会显示该条目，例如 Windows 7 默认设置为“小工具、个性化等”。

我试过这个，但不起作用（不匹配）：

```
if (GetForegroundWindow () == GetDesktopWindow ()) {
   // code here
} 
```

关于如何做到这一点的任何问题？

我也尝试过将 SHGetFolderPath() 与 CSIDL_DESKTOPDIRECTORY 一起使用并执行 _tcsicmp()，这可行，但即使在我不想要的普通 Windows 资源管理器窗口中打开桌面目录也会显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:52:06.297

在下面注册`HKCR\DesktopBackground\shellex\ContextMenuHandlers`

# java - 查找列表中的值

> ID：13878764
> 
> 赞同：-4
> 
> 时间：2012-12-14T12:32:09.590
> 
> 标签：java, collections, return, return-value

如何在列表中查找特定值。例如：这是在 Demo1 类方法中

```
 /*some code*/ ---------
    ---------//Generating List<Date> d1 and d2 hear  
    public List<Date> returnList(List<Date> d1,List<Date> d2)
    {
          List<Date> startDate=new ArrayList<Date>();

          startDate.add(d1);
          startDate.add(d2);
         return startDate;
    } 
```

并且 Demo2 类我在服务类中使用此方法，该方法我想要相同的 `d1,d2`列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:45:08.243

我不喜欢它，但要编译它，你需要类似的东西

```
 public List<List<Date>> returnList(List<Date> d1,List<Date> d2)
{
      List<List<Date>> startDate=new ArrayList<List<Date>>();

      startDate.add(d1);
      startDate.add(d2);
     return startDate;
} 
```

您的返回类型应该是 List of List

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:35:29.073

我想你想要[List#indexOf](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#indexOf%28java.lang.Object%29)：

```
int x = listOfDates.indexOf(theDate); 
```

返回元素的（第一个）索引，如果不在列表中，则返回 -1。

取决于`equals()`能否正常工作，这对日期可能会或可能不会很棘手（您必须设置完全相同的时间）。

# java - 重新分配输入/输出流？

> ID：13878768
> 
> 赞同：1
> 
> 时间：2012-12-14T12:32:18.553
> 
> 标签：java, android, stream, inputstream, outputstream

我正在尝试使用 android 中的库连接到终端仿真器，这将连接到串行设备并应该向我显示发送/接收的数据。要附加到终端会话，我需要提供`inputstream`to`setTermIn(InputStream)`和`outputstream`to `setTermOut(OutputStream)`。

我像这样初始化并附加了一些流`onCreate()`，这些只是初始流，并没有附加到我想要发送/接收的数据上。

```
private OutputStream bos;
private InputStream bis;

...

byte[] a = new byte[4096];
bis = new ByteArrayInputStream(a);
bos = new ByteArrayOutputStream();
session.setTermIn(bis);
session.setTermOut(bos);
/* Attach the TermSession to the EmulatorView. */
mEmulatorView.attachSession(session); 
```

我现在想在发送和接收数据时将流分配给数据，但我认为我做错了。在`sendData()`每次按 Enter 时调用的方法中，我有：

```
public void sendData(byte[] data)
{
        bos = new ByteArrayOutputStream(data.length);         
} 
```

在该`onReceiveData()`方法中，每次通过串行接收数据时调用：

```
public void onDataReceived(int id, byte[] data)
{
        bis = new ByteArrayInputStream(data);           
} 
```

我在终端屏幕上看不到任何数据，但我通过串行成功发送和接收它。所以我的问题是，我应该在每次发送和接收数据时设置流还是只设置一次。我还需要在`mEmulatorView.attachSession(session)`某个地方再次将它们附加到终端会话，还是应该将新流自动发送到屏幕？

我的理论是我的终端连接到旧流，这就是为什么我无法在终端屏幕上看到数据。这是正确的吗？

我尝试使用布尔值和 if 语句在每个方法中设置新的输入/输出流一次，但随后我在 logcat 中收到警告消息

`RuntimeException 'sending message to a Handler on a dead thread'`

我已经根据已回答将其编辑为 write 和 rad，但我注意到该库有自己的 write 方法可以将数据提供给终端，所以如果是这种情况，我什至不知道流的用途，并且我需要这个写来写到模拟器吗？

```
public void write(byte[] data,
              int offset,
              int count)
Write data to the terminal output. The written data will be consumed by the emulation     client as input.
write itself runs on the main thread. The default implementation writes the data into a     circular buffer and signals the writer thread to copy it from there to the OutputStream.

Subclasses may override this method to modify the output before writing it to the  stream, but implementations in derived classes should call through to this method to do the  actual writing.

Parameters:
data - An array of bytes to write to the terminal.
offset - The offset into the array at which the data starts.
count - The number of bytes to be written. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:45:59.663

java中的对象是通过引用传递的，因此如果你这样做

```
bos = new ByteArrayOutputStream(data.length) 
```

您实际上是在丢弃以前的输出流并创建一个新的输出流。

尝试保持对输入和输出流的引用并将数据写入其中，例如：

```
bos.write(data); 
```

# r - 为什么 R 2.14.1 在 xls 中错误地输出某些特殊字符？

> ID：13878770
> 
> 赞同：0
> 
> 时间：2012-12-14T12:32:31.003
> 
> 标签：r, xls

使用 R 2.14.1，我有时会输出 xls 文件。但是，最近，我注意到`-`在要输出的数据对象中被转换成一些类似于`+AC0`实际 xls 文件中的代码。这在读回 R 时仍然存在。类似地，下划线被转换为`.A+.`或类似的东西。

示例代码： `write.table(obj1, file="ex1.xls", sep="\t", row.names=F, na="")`

我不记得在以前的 R 版本中发生过这种情况。

关于解决方案的任何想法？

# javascript - 如何在 CSS / JavaScript 中用水平线显示“经典”组合分数？

> ID：13878772
> 
> 赞同：24
> 
> 时间：2012-12-14T12:32:38.330
> 
> 标签：javascript, html, css, fractions

我有一小部分，我想整齐漂亮地展示它。

例如

```
4/5 
```

将会

```
 4
 —
 5 
```

我已经看过[这个](http://www.personal.psu.edu/ejp10/blogs/tlt/2007/08/fractions_in_css.html)，虽然这个解决方案不错，但问题在于让 4 和 5 在同一条线上，用一条**直线**将它们分开，就像在传统分数中一样。

任何黑客或解决方案都是可以接受的。不一定可以接受 CSS、Javascript 或任何其他语言。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-14T12:35:24.890

用这个

```
<sup>6</sup>/<sub>7</sub>​ 
```

**[演示](http://jsfiddle.net/KVDS5/)**

* * *

对于直线

HTML

```
<div class="top">2</div><div class="bottom">6</div>​ 
```

CSS

```
.top{border-bottom:solid black 1px; display:inline-block; float:left}
.bottom{ display:inline-block; clear:left; float:left} 
```

**[​演示2](http://jsfiddle.net/KVDS5/2/)**

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-14T12:40:09.983

```
.fraction {
  display: inline-block;
  position: relative;
  vertical-align: middle; 
  letter-spacing: 0.001em;
  text-align: center;
  font-size: 12px;
  }
.fraction > span { 
  display: block; 
  padding: 0.1em; 
  }
.fraction span.fdn {border-top: thin solid black;}
.fraction span.bar {display: none;}
```

```
Foobar
  <div class="fraction">
    <span class="fup">4</span>
    <span class="bar">/</span>
    <span class="fdn">5</span>
  </div>
Foobar
```

更改 .fraction 字体大小以将其设置为您想要的大小

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-12-14T12:58:35.970

如果您乐于使用 JQuery 并希望最小化您需要添加的标记，那么您可以使用以下内容：

**CSS**

```
.fraction, .top, .bottom {
    padding: 0 5px;    
}

.fraction {
    display: inline-block;
    text-align: center;    
}

.bottom{
    border-top: 1px solid #000;
    display: block;
} 
```

**HTML**

```
<div class="fraction">1/2</div>
<div class="fraction">3/4</div>
<div class="fraction">1/32</div>
<div class="fraction">77/102</div> 
```

**jQuery**

```
$('.fraction').each(function(key, value) {
    $this = $(this)
    var split = $this.html().split("/")
    if( split.length == 2 ){
        $this.html('
            <span class="top">'+split[0]+'</span>
            <span class="bottom">'+split[1]+'</span>
        ')
    }    
}); 
```

**工作示例：http: [//jsfiddle.net/xW7d8/](http://jsfiddle.net/xW7d8/)**

# 没有 JQuery

要在不使用 JQuery 的情况下实现这一点，您可以使用以下 HTML 和与上面相同的 CSS：

```
<div class="fraction">
    <span class="top">1</span>
    <span class="bottom">100</span>
</div> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-14T12:40:30.003

您需要使用字体中可用的上下文替代方案。目前对此的支持不是很好，但它迟早会出现在任何地方。

如果您`fractions`在号码上有课程，您将使用：

```
.fractions { 
    -moz-font-feature-settings: "frac=1";
    -ms-font-feature-settings: "frac" 1;
} 
```

恼人的 Gecko 使用将传递给字体的原始信息，但 ms 版本应该成为标准。

这是一个演示。[http://ie.microsoft.com/testdrive/Graphics/opentype/opentype-fontbureau/index.html#fractions](http://ie.microsoft.com/testdrive/Graphics/opentype/opentype-fontbureau/index.html#fractions)

现在它只在 Gecko 和 Trident 中，但 Webkit 肯定会赶上。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-14T12:44:06.953

您可能想查看使用 Javascript的[MathJax 之类的东西。](http://www.mathjax.org/)

如果您只使用基本分数，则可以使用 Unicode 字符（或等效的 HTML 实体）：
¼ ½ ¾ ⅓ ⅔ ⅛ ⅜ ⅝ ⅞</p>

对于纯 CSS，使用水平条可能是“传统的”，但现在大多数人使用对角斜线，即使在纸上写分数时也是如此。这是我使用的：

```
.fraction > sup,
.fraction > sub {
  font-size: .66em;
}
.fraction > sup {
  vertical-align: .4em;
}
.fraction > sub {
  vertical-align: -.2em;
} 
```

使用此 HTML：

```
<span class="fraction">
  <sup>1</sup>⁄&lt;sub>8</sub>
</span> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-07-18T14:40:58.320

Flexbox 现在允许一些额外的选项

```
.fraction {
  display: inline-flex;
  flex-direction: column;
  padding: 1em;
  align-items: center;
}
.numerator {
  border-bottom: 2px solid grey;
}
```

```
<span class="fraction">
  <span class="numerator">3</span>
  <span class="denominator">4</span>
</span>

<span class="fraction">
  <span class="numerator">12</span>
  <span class="denominator">7</span>
</span>
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-01-16T15:58:39.530

我个人认为在这种情况下不需要 JavaScript。

查看以下内容：

```
span.frac {
  display: inline-block;
  text-align: center;
  vertical-align: middle;
}
span.frac > sup, span.frac > sub {
  display: block;
  font: inherit;
  padding: 0 0.3em;
}
span.frac > sup {border-bottom: 0.08em solid;}
span.frac > span {display: none;}
```

```
<p>7&nbsp;<span class="frac"><sup>42</sup><span>&frasl;</span><sub>73</sub></span>.</p>
```

**[代码笔](https://codepen.io/giogziro95/pen/oBzQEd)**

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-08-05T18:03:45.760

我发现最好的组合是使用 0.5em 大小和 unicode 小数斜线（`&#x2044;`“ ⁄ ”）。分子应该是`vertical-align:super`。如果您愿意放弃对 IE7 及以下版本的支持，您可以使用`:before`psuedo-class 使标记更简单。

```
.num {
    font-size: 0.5em;
    vertical-align: super;
}
.den {
    font-size: 0.5em;
}
.den:before {
    content: '\2044';
    font-size: 2em;
} 
```

和

```
<span class="num">19</span><span class="den">45</span> 
```

（[演示](http://jsfiddle.net/tywev/)）

* * *

你也可以使用直接的 unicode 方法来渲染 ¹⁹⁄₄₅：

```
&#x00B9;&#x2079;&#x2044;&#x2084;&#x2085; 
```

（参见[维基百科文章](https://en.wikipedia.org/wiki/Unicode_subscripts_and_superscripts)。）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-10-16T03:22:56.257

这不会自动将“1/2”转换为分数形式。但是，如果您对模板有更多控制权，则可以执行以下操作。由于还没有人建议使用表格，所以这里是：

HTML：

```
<table class="fraction">
  <tr>
    <td class="top">Top of Fraction</td>
  </tr>
  <tr>
    <td class="bottom">Bottom of Fraction</td>
  </tr>
</table> 
```

CSS：

```
table.fraction {
  display: inline-block;
  text-align: center;
  margin-left: 1em;
}

table.fraction td {
  line-height: 2em;
}

table.fraction td.top {
  border-bottom: 1px solid darkgray;
} 
```

结果：

![使用表格的分数](../Images/7ad943774a7ca33a435bbe60c4fa0688.png)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-03-29T05:55:13.727

我们想要一个垂直书写的分数，它正确对齐，容纳混合数字，并且可以使用 HTML 简洁地写入。这可以简单地使用 HTML 属性或标签以及一些 CSS 来完成。不涉及 Javascript。此方法也适用于对齐混合分数以确保分数垂直居中，但不适合多层复杂分数。

# 使用标签名称的想法

让`fraction`, `numerator`,`denominator`成为通过内联块、相对位置、垂直对齐和边框在纯 HTML 和 CSS 中呈现分数所需的*自定义标签名称。*有时需要一个小的左侧填充以避免冲突。CSS 样式将是：

```
fraction, numerator, denominator {
    display: inline-block;
    vertical-align: middle;
    padding-left: 2px   
}

fraction {
    display: inline-block;
    text-align: center;    
}

numerator {
    border-top: 1px solid;
    display: block;
} 
```

那么，输入分数的用法依次涉及这三个标签：

```
<fraction>
    <numerator>A</numerator>
    <denominator>B</denominator>
</fraction>. 
```

# 例子

我缩短了标签名称并添加了填充以解决冲突。我还尝试实现一个小部分 html。

```
frac, numer, denom, fracsmall {
    display: inline-block;
    vertical-align: middle;
    margin-left: 2px; margin-right: 2px; 
}

frac, fracsmall {
    display: inline-block;
    text-align: center;    
}

denom {
    border-top: 1px solid;
    display: block; /* Creates new line */
}

fracsmall > numer {
    font-size: 75%;
}

fracsmall > denom {
    font-size: 75%;
}
```

```
The value of 9<frac><numer>3</numer><denom>4</denom></frac> is also written 
<frac><numer>39</numer><denom>4</denom></frac>.

Also, <fracsmall><numer>1</numer><denom>1</denom></fracsmall>
+ <fracsmall><numer>1</numer><denom>2</denom></fracsmall>
+ <fracsmall><numer>1</numer><denom>3</denom></fracsmall> + ... is divergent.
<br />

Here is a more complex fraction
<frac>
<numer>
    1 + 
    <frac><numer>1</numer><denom>x</denom></frac> + 
    <frac><numer>1</numer><denom>x<sup>2</sup></denom></frac>
</numer>
<denom>
    x+<frac><numer>1</numer><denom>y</denom></frac>+z
</denom>
</frac>
<br />

Let's try with a continued fraction. π = 
<frac>
<numer>4</numer>
<denom> 1 +
<frac>
<numer>1<sup>2</sup></numer>
<denom> 3 +
    <frac>
    <numer>2<sup>2</sup></numer>
    <denom> 5 +
        <frac>
        <numer>3<sup>2</sup></numer>
        <denom> 7 + ...
        </denom>
        </frac>
    </denom>
    </frac>
</denom>
</frac>
</denom>
</frac>. Looks kinda awkward without bracketing...
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-09T16:45:49.420

## 我发现这对我有用

因为当分母较长时我需要排队，当分子较长时我需要排队，我像这样更改了上面的一些代码（johnatan lin）。当分子较长时，分子使用类分子，分母较长时不使用类，分子不要使用类，分母使用类分母。

### CSS 样式

```
.fraction {
  display: inline-flex;
  flex-direction: column;
  padding: 1em;
  align-items: center;
}
.numerator {
  border-bottom: 2px solid grey;
}
.denominator {
  border-top: 2px solid grey;
} 
```

### html代码示例

Ricavi Numero di coperti

```
.fraction {
  display: inline-flex;
  flex-direction: column;
  padding: 1em;
  align-items: center;
}
.numerator {
  border-bottom: 2px solid grey;
}
.denominator {
  border-top: 2px solid grey;
}
```

```
<h1>A way to show fractions (not only numers)</h1>
This is what I did after different solutions found on stackoverflow.

<h2>This is with longer numerator</h2>
<div class="fraction">
  <div class='numerator'>Longer than the other one</div>
  <div>Numero di coperti</div>
</div>

<h2>This is longer denominator</h2>
<div class="fraction">
  <div>Ricavi</div>
  <div class="denominator">Numero di coperti</div>
</div>
<p>Hello from Giovanni</p>
```

## 一种缩短这些东西的方法

为了让事情进展得更快，我把这个 javascript 放在了标签之间或另一个 js 文件中。

```
function numeratore(num, den){
    document.write("<div class='fraction'><div class='numerator'>" + num + "</div><div>" + den + "</div></div><div id='div1'></div>")
}

function denominatore(num, den){
    document.write("<div class='fraction'><div>" + num + "</div><div class=\"denominator\">" + den + "</div></div><div id='div1'></div>")
} 
```

## 并将其放入 html 正文

```
<script>
denominatore("Ricavi", "numeri di coperti")
numeratore("Costi di produzione", "Numero menu serviti")
</script> 
```

denominatore：当分母较长时 numeratore：当分子较长时

## 和css，就像以前一样

这进入标签或进入

```
.fraction {
  display: inline-flex;
  flex-direction: column;
  padding: 1em;
  align-items: center;
}
.numerator {
  border-bottom: 2px solid grey;
}
.denominator {
  border-top: 2px solid grey;
} 
```

# css - CSS类继承

> ID：13878773
> 
> 赞同：1
> 
> 时间：2012-12-14T12:32:40.087
> 
> 标签：css

我有这样的 CSS 规则：

```
.c1 .c2 .c3 {
   //some css rules
} 
```

我可以一步应用这些规则吗：

```
<div class="c1 c2 c3">
   //some web content
</div> 
```

或者我必须制作如下结构：

```
<div class="c1">
  <div class="c2">
    <div class="c3">
      //some web content
    </div>
  </div>
</div> 
```

或者也许有更简单的方法来做到这一点？我想将此规则应用于单个 div，并且不允许更改 css 定义文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T12:35:13.153

`.c1 .c2 .c3`火柴

```
<div class="c1">
  <div class="c2">
    <div class="c3">
      //some web content
    </div>
  </div>
</div> 
```

虽然`.c1.c2.c3`（注意空间差异）匹配

```
<div class="c1 c2 c3">
   //some web content
</div> 
```

`.c1 .c2`（*带*空格）是后代选择器：[http ://www.w3.org/TR/CSS2/selector.html#descendant-selectors](http://www.w3.org/TR/CSS2/selector.html#descendant-selectors)

而，`.c1.c2`（*不带*空格）将通过链接两个类选择器来匹配同时包含`c1`和类的元素。`c2`

您可能还想看看这个：[http](http://css-tricks.com/multiple-class-id-selectors/) ://css-tricks.com/multiple-class-id-selectors/ 和这个 SO 问题：[Select element based on multiple classes](https://stackoverflow.com/questions/2554839/select-css-based-on-multiple-classes)

因此，在您的情况下，您可能需要制作嵌套结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T12:41:55.840

如果要将相同的 css 应用于 3 个类，则必须在选择器之间使用逗号，如下所示：

```
.c1, .c2, .c3 {

} 
```

.c1 .c2 .c3 表示父子关系。

这是完全有效的：

```
<div class="c1 c2 c3">
   //some web content
</div> 
```

结果是，来自 c1 和 c2 和 c3 的所有 css 都将应用于 div。

取决于你想做什么。如果您只是想将 3 个类的 css 分配给 1 个元素，请使用上述方法。避免仅仅为了造型而制作无用的包装器。

# visual-studio-2012 - Visual Studio 2012 远程调试：对内存位置的无效访问

> ID：13878778
> 
> 赞同：32
> 
> 时间：2012-12-14T12:33:02.227
> 
> 标签：visual-studio-2012, remote-debugging, attach-to-process

我按照此链接中的说明操作：http: [//msdn.microsoft.com/en-us/library/bt727f1t.aspx](http://msdn.microsoft.com/en-us/library/bt727f1t.aspx)在我的应用程序运行的服务器上安装远程调试器（2012），希望从远程调试它我的开发机器运行 Visual Studio 2012。

我什至无法查看要附加到远程计算机上的进程列表。我不断收到“无法连接到名为 [name] 的 Microsoft Visual Studio 远程调试监视器。对内存位置的访问无效”。

我已经成功连接了几次，但是连接立即失败，然后我无法再次连接。

这给我带来了巨大的问题，因为我无法远程调试任何东西。我一定错过了一些明显的东西。请有人给我一个解决方案。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-01-31T07:42:58.033

> 我发现解决此问题的唯一方法是重新启动 Visual Studio。

为我工作。我在[这篇关于无效访问和远程调试的博客文章](http://blog.mediawhole.com/2011/03/vs-remote-debugger-invalid-access-to.html)中找到了它。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-07-12T09:00:08.293

事实证明，我错过的一件事是告诉 Visual Studio 在哪里可以找到与远程进程相关的 .pdb 符号。为此，请转到工具 -> 选项 -> 调试，然后在符号 (.pdb) 位置中将远程位置添加到 pdb 文件中。

为了澄清，我很好地附上了，但无法破解代码。现在我能。请注意，在您进入我成功附加到流程但无法捕获断点的阶段之前，还有其他障碍。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-04-19T15:41:59.703

我最近让其他人报告了这个问题并在他们的机器上调试了这个问题。“无效访问内存位置”错误是由 Windows 中的问题引起的，可以使用[此修补程序](http://support.microsoft.com/kb/2588507)解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-24T15:55:08.403

我在 VS 2012、2013、2015 和 2017 中遇到过这个问题。根据其他答案，问题可能与在 64 位 PC 上运行 32 位版本的 Visual Studio 有关。有时，正如其他人所建议的那样，重新启动 Visual Studio 可以解决问题，但到目前为止我发现的最佳解决方案是在没有解决方案的情况下启动 Visual Studio，打开 Debug -> Attach to Process，将连接目标更改为删除服务器并等待用于加载进程列表。然后取消，不要附加。加载所需的解决方案，然后返回附加到进程，远程进程列表仍将被加载。连接到您想要的过程，从那时起一切都应该正常工作。

# f# - 如何有效地进行模式匹配？

> ID：13878782
> 
> 赞同：4
> 
> 时间：2012-12-14T12:33:14.997
> 
> 标签：f#, pattern-matching

我想将整数数组与以下伪模式匹配：其中`a`意味着这些数字等于或 0（即假设任何数字“等于”0）

```
[| a; a; a; a; a; |]          // matches [| 1; 1; 0; 0; 1 |]
[| a; a; a; not a; a; |]      // matches [| 3; 3; 0; 2; 3 |]
[| a; a; not a; a; a; |]      // matches [| 4; 4; 2; 0; 4 |]
[| a; not a; a; a; not a; |]  // matches [| 1; 2; 0; 0; 3 |]
[| a; a; a; not a; a; |]      // matches [| 1; 1; 0; 4; 1 |]
[| not a; a; a; a; a; |]      // matches [| 5; 1; 0; 1; 1 |] 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T12:49:49.030

在您的示例中，数组的第一个元素始终`a`可以在布尔数组上匹配：

```
match Array.map (fun x -> x = Array.get arr 0 || x = 0) arr with
| [| true; true; true; true; true; |] -> ... // matches [| 1; 1; 0; 0; 1 |]
| [| true; true; true; false; true; |] -> ... // matches [| 3; 3; 0; 2; 3 |]
| [| true; true; false; true; true; |] -> ... // matches [| 4; 4; 2; 0; 4 |]
| [| true; false; true; true; false; |] -> ... // matches [| 1; 2; 0; 0; 3 |]
| [| true; true; true; false; true; |] -> ... // matches [| 1; 1; 0; 4; 1 |]
| _ -> ... 
```

这将创建一个临时数组，但对于小尺寸的数组来说并不是什么大问题。

**更新：**

如果第一个`a`在另一列中，您只需在该列上投影并进行另一次模式匹配（5 列最多有 5 个匹配项）。

```
match Array.map (fun x -> x = Array.get arr 1 || x = 0) arr with
| [| false; true; true; true; true; |] -> ... // matches [| 5; 1; 0; 1; 1 |]
| ... 
```

也就是说，当伪模式的数量和复杂性增加时，最好使用函数而不是模式匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T22:13:26.537

您可以定义由要检测的*模式参数化的活动模式。*在您的示例中，您使用包含or的数组的伪语法编写这些*模式*，但是当您希望在输入中具有匹配值时，您可以很容易地将它们编写为包含相同值的实际数组。例如，类似：`a``not a`

```
[| 'a'; 'a'; 'b'; 'a'; 'a'; |] 
```

它甚至可以是@bytebuster 解决方案中的字符串（您可以转换`string`为`char[]`使用该`ToCharArray`方法）。然后你可以定义活动模式：

```
let inline (|ArrayPattern|_|) pattern input =
  let matches =
    Array.zip pattern input
    |> Seq.groupBy fst 
    |> Seq.forall (fun (_, values) -> 
        let cases = values |> Seq.map snd |> set
        Set.count (cases - Set.singleton 0) <= 1)
  if matches then Some() else None 
```

我想这与@bytebuster 实现的基本相同。在这里，我将输入数组的元素按它们在模式中的对应键分组，然后使用集合操作检查每个组最多有一个非零值。

要使用它，您现在可以匹配`int[]`数组`ArrayPattern [| ... |]`参数指定您要查找的特定模式的位置：

```
match [| 1; 1; 2; 0; 1 |] with 
| ArrayPattern [| 'a'; 'a'; 'b'; 'a'; 'a'; |] -> printfn "match"
| _ -> printfn "not" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T16:55:08.393

我想，这只是一个计算任务，所以看起来不会*很*漂亮。不过，这是我的尝试。请注意，为了更好的可读性，我将 a`string`用于“a”而不是“not a”。

```
// Define possible return values
type TriState<'T> = | Yes of 'T | No of 'T | Unknown with 
    override this.ToString() =
        match this with
        | Unknown   -> "Unknown"
        | Yes value -> sprintf "Array matches, common value %A" value
        | No value  -> sprintf "Array mismatches, common value %A" value

// a boilerplate function
let matchA (pat: string) xs =
    let mustBeA, mustNotBeA =
        List.zip
            (xs |> Array.toList)
            (pat.ToCharArray() |> Array.toList)
        |> List.partition (snd >> ( (=) 'A'))
    // these values must be all equal
    let mustBeA' =
        mustBeA |> List.map fst |> List.filter ( (<>) 0)
    // these values must NOT be equal to the value taken from above
    let mustNotBeA' =
        mustNotBeA |> List.map fst
    match mustBeA' with
    | []            -> Unknown   // can't find the "must" value
                                 // due all "must" values are zero
    | mustValue::_  ->           // we have bootstrap value to compare against
        if (List.forall ( (=) mustValue) mustBeA')
            && (List.forall ( (<>) mustValue) mustNotBeA')
        then Yes mustValue
        else No mustValue 
```

现在，测试：

```
[| 1; 2; 0; 0; 3 |] |> matchA "ABAAB" |> printf "%A\n" // Yes 1
[| 4; 4; 2; 0; 4 |] |> matchA "AABAA" |> printf "%A\n" // Yes 4
[| 5; 1; 0; 1; 1 |] |> matchA "BAAAA" |> printf "%A\n" // Yes 1 
```

当然，您可以将其包装成参数化的活动模式：

```
let (|MatchesA|_|) pattern arr =
    matchA pattern arr |> function | Yes x -> Some x | _ -> None

match [| 1; 2; 0; 0; 3 |] with
| MatchesA ("AAAAB") x -> sprintf "Pattern1 %d" x
| MatchesA ("ABAAB") x -> sprintf "Pattern2 %d" x
| _                    -> "Unknown"
|> printf "%A\n" 
```

# c++ - Operator() 作为 Matrix 类的下标

> ID：13878785
> 
> 赞同：2
> 
> 时间：2012-12-14T12:33:32.637
> 
> 标签：c++, matrix, operator-overloading

通过关注此站点[C++ FAQ](http://www.parashift.com/c++-faq-lite/matrix-subscript-op.html)，我为我的 Matrix 类重载了一个 operator()。这是我的课：

```
class Matrix
{
    public:
    inline float& operator() (unsigned row, unsigned col)
    {
        return m[row][col];
    }

    private:
    float m[4][4];
}; 
```

现在我可以像这样在 main 函数中使用它：

```
int main()
{
    Matrix matrix;
    std::cout << matrix(2,2);
} 
```

但现在我想将它与这样的指针一起使用：

```
int main()
{
    Matrix matrix;
    Matrix* pointer = &matrix;
    std::cout << pointer(2,2);
} 
```

编译器告诉指针不能用作函数。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T12:36:06.370

您要么需要取消引用它：

```
(*pointer)(2,2) 
```

或者您需要通过其全名调用操作员：

```
pointer->operator()(2,2) 
```

# entity-framework - SQL CE 4 错误：ntext 和 image 数据类型不能在 WHERE、HAVING、GROUP BY、ON 或 IN 子句中使用

> ID：13878788
> 
> 赞同：1
> 
> 时间：2012-12-14T12:33:38.273
> 
> 标签：entity-framework, sql-server-ce, sql-server-ce-4

我正在尝试将旧的 SQL Server 数据库（在 Entity Framework 4 中创建）迁移到 SQL CE 4。我已经移动了所有内容，重新创建了架构并将数据插入到`SDF`文件中，但是现在当我尝试启动我的网站时，我收到此错误：

`The ntext and image data types cannot be used in WHERE, HAVING, GROUP BY, ON, or IN clauses, except when these data types are used with the LIKE or IS NULL predicates.`

我访问了几个链接，它们都链接到 Microsoft 修补程序，该修补程序适用于 SQL CE 3.5。我正在运行 SQL CE 4，但找不到任何相关内容。

**更新：**我为代码优先方法找到了一些可能的解决方案，但我的数据库是模型优先的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T08:53:58.833

我刚刚遇到了 Entity Framework 和 SQL CE 的这个问题。它无法生成按图像列过滤结果的动态 SQL 语句。

对我来说，这段代码失败了（令牌类型为 byte[]）：

```
var dataStore = new DataStore();
var document = dataStore.Documents.SingleOrDefault(d => d.Token == token); 
```

我让它工作的简单方法是首先将文档加载到内存中的列表中，然后再过滤它。这对我来说很好，因为列表永远不会很大。

```
var dataStore = new DataStore();
var documents = dataStore.Documents.ToList();
var document = documents.SingleOrDefault(d => d.Token.SequenceEqual(token)); 
```

# html - Box2dWeb 缺少 ApplyLinearImpuse() 和 ApplyAngularImpulse() 方法？

> ID：13878789
> 
> 赞同：2
> 
> 时间：2012-12-14T12:33:39.070
> 
> 标签：html, canvas, box2d, box2dweb

我一直在努力掌握来自 XNA / Farseer 背景的 HTML5 游戏写作。

似乎 box2dweb 缺少 ApplyLinearImpuse() 和 ApplyAngularImpulse() 方法。

我什至在[这里](http://code.google.com/p/box2dweb/source/browse/trunk/Box2D.js)查看了源代码，似乎是这样。

有谁知道为什么不提供这些方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-03T01:37:48.103

刚才我需要同样的东西。好在实现还是`ApplyAngularImpulse`很简单的。您可以将以下内容添加到您的代码中以将其修补到 box2d：

**Box2Dweb**

```
b2Body.prototype.ApplyAngularImpulse = function(impulse) {
    if (this.IsAwake() == false) {
        this.SetAwake(true);
    }
    this.m_angularVelocity += this.m_invI * impulse;
}; 
```

**Box2Djs**

```
b2Body.prototype.ApplyAngularImpulse = function(impulse) {
    if (this.IsSleeping() == false)
    {
        this.m_angularVelocity += this.m_invI * impulse;
    }
}; 
```

一般来说，要了解 C++ 版本中尚未移植到 Flash 或 JavaScript 版本的功能，您可以查看[原始源代码](https://code.google.com/p/box2d/source/)，然后如上所述自行移植它们。即使您不熟悉 C++，代码也相当容易上手。

# java - Jasper 报告的自定义类

> ID：13878792
> 
> 赞同：3
> 
> 时间：2012-12-14T12:33:46.637
> 
> 标签：java, jasper-reports

我想在 Jasper 报告中使用 2 个自定义类。我遵循了这个建议：[JasperReports 字段的自定义类](https://stackoverflow.com/questions/8900793/custom-class-for-jasperreports-field) 我怎么无法让 IReport 编译报告。

编译结果：

```
net.sf.jasperreports.engine.design.JRValidationException: Report design not valid :
1. java.lang.ClassNotFoundException: Will not load classes from default package (Client)      
2. java.lang.ClassNotFoundException: Will not load classes from default package (User)     
at net.sf.jasperreports.engine.design.JRAbstractCompiler.verifyDesign(JRAbstractCompiler.java:271) 
at net.sf.jasperreports.engine.design.JRAbstractCompiler.compileReport(JRAbstractCompiler.java:153)     
at com.jaspersoft.ireport.designer.compiler.IReportCompiler.run(IReportCompiler.java:512)     
at org.openide.util.RequestProcessor$Task.run(RequestProcessor.java:572)     
at org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:997) 
```

jrxml 文件： [https ://gist.github.com/4285142](https://gist.github.com/4285142)

我正在解析另一个类，它包含两个类的对象：

用户等级：

```
public class User
{
    int _userId;
    UserPermission _userPermission;
    String _firstName;
    String _lastName;
    String _userName;
    String _userPassword;
    String _saltValue;
    Date _creationDate;
    Date _editedDate;

    //get&setters
} 
```

客户端类：

```
public class Client 
{
     int _clientId;
     String _name;
     String _address;
     City _city;
     long _phoneNo;
     String _eMail;
     Date _creationDate;
     Date _editedDate;

     //get&setters
} 
```

# asp.net - 从自定义控件中的 ScriptResourceMapping 定义中获取 ScriptReference

> ID：13878793
> 
> 赞同：1
> 
> 时间：2012-12-14T12:33:54.190
> 
> 标签：asp.net, .net, vb.net, custom-controls

我正在使用我想引用的客户端脚本构建一个自定义控件`ScriptManager.ScriptResourceMapping`（以使用`Path`and`DebugPath`属性）。

我希望自定义控件能够轻松移植到其他项目——即我想拖放代码隐藏文件（并最终使控件成为单独的 DLL，但现在拖放就足够了）。因此，我想避免（1）将客户端脚本作为嵌入式资源，（2）在 中引用为 a `WebResource`，`AssemblyInfo`或（3）`ScriptManager.ScriptResourceMapping.AddDefinition`在`global.asax`.

简单来说，我可以让脚本管理代码只在自定义控件的代码中吗？

目前我收到一条错误消息，指出在程序集中找不到脚本引用，我想我设置了错误的程序集。

我的自定义控件代码如下：

```
Public Class MyControl
    Inherits System.Web.UI.LiteralControl 
    Implements ISectionControl, IScriptControl

    Private _scriptReference As ScriptReference

    Public Sub New()

        ' Add the resource mapping
        ScriptManager.ScriptResourceMapping.AddDefinition("MyControlScript", New ScriptResourceDefinition With {
            .ResourceAssembly = System.Reflection.Assembly.GetExecutingAssembly,
            .ResourceName = "MyControlScript.js",
            .Path = "Path.To.MyControlScript.minimised.js",
            .DebugPath = "Path.To.MyControlScript.original.js"
        })

        ' Set the script reference
        _scriptReference = New ScriptReference("MyControlScript.js", Assembly.GetExecutingAssembly.FullName)

    End Sub

    Protected Overrides Sub OnPreRender(e As System.EventArgs)
        MyBase.OnPreRender(e)

        ' Register the script
        ScriptManager.GetCurrent(Page).RegisterScriptControl(Of MyControl)(Me)

        ' Some code to set the Text of the literal control
        ' ...
    End Sub

    Public Function GetScriptDescriptors() As System.Collections.Generic.IEnumerable(Of System.Web.UI.ScriptDescriptor) Implements System.Web.UI.IScriptControl.GetScriptDescriptors
        Return New ScriptDescriptor() {}
    End Function

    Public Function GetScriptReferences() As System.Collections.Generic.IEnumerable(Of System.Web.UI.ScriptReference) Implements System.Web.UI.IScriptControl.GetScriptReferences
        Return New ScriptReference() {_scriptReference}
    End Function
End Class 
```

我希望这个问题是有道理的。感谢您花时间阅读。

阿里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:32:43.270

我自己回答了这个问题，我对`ScriptReference`. 我只想要一个`ScriptReference`带有（映射）名称的，所以我使用了空白构造函数，然后设置了`Name`. 然后我可以删除程序集信息。

调整以下解决了问题：

```
Public Sub New()

    ' Add the resource mapping
    ScriptManager.ScriptResourceMapping.AddDefinition("MyControlScript", New ScriptResourceDefinition With {
        .Path = "Path.To.MyControlScript.minimised.js",
        .DebugPath = "Path.To.MyControlScript.original.js"
    })

    ' Set the script reference
    _scriptReference = New ScriptReference() With {.Name="MyControlScript"}

End Sub 
```

# php - 使用 CakePHP 在 URL 中传递动态值

> ID：13878796
> 
> 赞同：2
> 
> 时间：2012-12-14T12:34:20.550
> 
> 标签：php, ajax, cakephp

我有以下方法执行 Ajax 请求，传递从选择输入获得的一些动态值。

它工作正常，但动态值作为 URL 中的参数传递，例如*`states/listCities/?big_string_of_serialized_parameter`*.

```
$this->Js->event(
    'change', 
    $this->Js->request(
        array( #url
            'controller' => 'states', 
            'action' => 'listCities'),
        array( # ajax options that generates the serialized parameter
           'update' => '#DealerCityId', 
           'data' => '$("#DealerStateId").serialize()',
           'dataExpression' => true
        )
    )
); 
```

我正在尝试以更友好的 URL 方式执行此操作，例如*`states/listCities/2`*.

在 CakePHP 中可以使用来自输入的动态值生成像这样的友好 URL，还是只能将动态值作为参数传递？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:01:19.750

据我了解这是不可能的。您可以将 ID 作为 URL 数组中的第三个参数传递，但由于 ID 在模板生成时未知，因此不适用于这种情况。如果您想使用`JsHelper`，则必须坚持使用它提供的 JavaScript 代码生成。

作为替代方案，您可以编写自己的 Helper：派生它`JsHelper`并覆盖该`request()`方法以满足您的需要。您可能可以先获取原始源代码的源代码，然后只修改`data`参数在代码生成中的使用方式。

# asp.net-mvc - asp .net中div中动态数据的分页

> ID：13878797
> 
> 赞同：3
> 
> 时间：2012-12-14T12:34:23.190
> 
> 标签：asp.net-mvc, jquery, pagination

如何使用 ajax 或 jquery 使用分页在 asp .net 中的 div 中动态显示数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:54:14.503

老实说，这很难帮助你 - 你应该更具体，但也许你正在寻找这样的东西： [jQuery pagination plugin](http://archive.plugins.jquery.com/project/pagination) and [demo here](http://d-scribe.de/webtools/jquery-pagination/demo/demo_options.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:44:50.507

您还没有真正提出真正的问题，但也许这会有所帮助：[https ://github.com/TroyGoode/PagedList](https://github.com/TroyGoode/PagedList)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-25T14:10:11.220

您可以使用 bootstrap 和 jquery 在您的 div 上创建分页。

控制器

```
 public ActionResult Index() 
        { 
            // Tab Data 
            ThumbnailViewModel model = new ThumbnailViewModel(); 
            model.ThumbnailModelList = new List<ThumbnailModel>(); 

            // Test Details Data  
            List<ThumbnailDetails> _detaisllist = new List<ThumbnailDetails>(); 
            int count = 10; 
            for (int i = 1; i <= count; i++) 
            { 
                ThumbnailDetails obj = new ThumbnailDetails(); 
                obj.Details1 = "Details- Main" + i; 
                obj.Details2 = "Details- Main-Sub" + i; 
                _detaisllist.Add(obj); 
            } 

            // batch your List data for tab view i want batch by 2 you can set your value 

            var listOfBatches = _detaisllist.Batch(2); 

            int tabNo = 1; 

            foreach (var batchItem in listOfBatches) 
            { 
                // Generating tab 
                ThumbnailModel obj = new ThumbnailModel(); 
                obj.ThumbnailLabel = "Lebel" + tabNo; 
                obj.ThumbnailTabId = "tab" + tabNo; 
                obj.ThumbnailTabNo = tabNo; 
                obj.Thumbnail_Aria_Controls = "tab" + tabNo; 
                obj.Thumbnail_Href = "#tab" + tabNo; 

                // batch details 

                obj.ThumbnailDetailsList = new List<ThumbnailDetails>(); 

                foreach (var item in batchItem) 
                { 
                    ThumbnailDetails detailsObj = new ThumbnailDetails(); 
                    detailsObj = item; 
                    obj.ThumbnailDetailsList.Add(detailsObj); 
                } 

                model.ThumbnailModelList.Add(obj); 

                tabNo++; 
            } 

            // Getting first tab data 
            var first = model.ThumbnailModelList.FirstOrDefault(); 

            // Getting first tab data 
            var last = model.ThumbnailModelList.LastOrDefault(); 

            foreach (var item in model.ThumbnailModelList) 
            { 
                if (item.ThumbnailTabNo == first.ThumbnailTabNo) 
                { 
                    item.Thumbnail_ItemPosition = "first"; 
                } 

                if (item.ThumbnailTabNo == last.ThumbnailTabNo) 
                { 
                    item.Thumbnail_ItemPosition = "last"; 
                } 

            } 

            return View(model); 
        } 
```

## 看法：

```
@model ThumbnailPagination.Models.ThumbnailViewModel 
@{ 
    ViewBag.Title = "Home Page"; 
} 

<div class="container"> 
    <div class="col-xs-10 col-md-6 col-xs-offset-1 col-md-offset-3"> 

        <div class="row"> 
            <nav aria-label="..."> 
                <ul class="pager" role="tablist"> 
                    <li class="previous" onclick="goTo(1);"><a href="#"><span aria-hidden="true">←&lt;/span> Previous</a></li> 
                    @{ 
                        foreach (var item in Model.ThumbnailModelList) 
                        { 
                            if (item.Thumbnail_ItemPosition == "first") 
                            { 
                                <li class="active" id="@item.Thumbnail_ItemPosition"> 
                                    <a aria-controls="@item.Thumbnail_Aria_Controls" data-toggle="tab" href="@item.Thumbnail_Href" role="tab">@item.ThumbnailTabNo</a> 
                                </li> 
                            } 

                            else if (item.Thumbnail_ItemPosition == "last") 
                            { 
                                <li id="@item.Thumbnail_ItemPosition"> 
                                    <a aria-controls="@item.Thumbnail_Aria_Controls" data-toggle="tab" href="@item.Thumbnail_Href" role="tab">@item.ThumbnailTabNo</a> 
                                </li> 
                            } 
                            else 
                            { 
                                <li> 
                                    <a aria-controls="@item.Thumbnail_Aria_Controls" data-toggle="tab" href="@item.Thumbnail_Href" role="tab">@item.ThumbnailTabNo</a> 
                                </li> 
                            } 

                        } 
                    } 
                    <li class="next" onclick="goTo(2);"><a href="#">Next <span aria-hidden="true">→&lt;/span></a></li> 
                </ul> 
            </nav> 
        </div> 

        <!-- Tab panes --> 
        <div class="tab-content"> 

            @{ 
                foreach (var item in Model.ThumbnailModelList) 
                { 
                    if (item.Thumbnail_ItemPosition == "first") 
                    { 

                        <div class="tab-pane active" id="@item.ThumbnailTabId" role="tabpanel"> 

                            @{ 

                                foreach (var detailsitem in item.ThumbnailDetailsList) 
                                { 
                                    <div class="col-sm-6"> 
                                        <div class="thumbnail"> 
                                            <img alt="..." src="http://placehold.it/240x150"> 
                                            <div class="caption"> 
                                                <h3>@detailsitem.Details1</h3> 
                                                <p> 
                                                    @detailsitem.Details2 
                                                </p> 
                                                <p> 
                                                    <a class="btn btn-primary" href="#" role="button"> 
                                                        Read more 
                                                        ... 
                                                    </a> 
                                                </p> 
                                            </div> 
                                        </div> 
                                    </div> 
                                } 
                            } 

                        </div> 
                                } 
                                else 
                                { 
                                    <div class="tab-pane" id="@item.ThumbnailTabId" role="tabpanel"> 

                                        @{ 

                                            foreach (var detailsitem in item.ThumbnailDetailsList) 
                                            { 
                                                <div class="col-sm-6"> 
                                                    <div class="thumbnail"> 
                                                        <img alt="..." src="http://placehold.it/240x150"> 
                                                        <div class="caption"> 
                                                            <h3>@detailsitem.Details1</h3> 
                                                            <p> 
                                                                @detailsitem.Details2 
                                                            </p> 
                                                            <p> 
                                                                <a class="btn btn-primary" href="#" role="button"> 
                                                                    Read more 
                                                                    ... 
                                                                </a> 
                                                            </p> 
                                                        </div> 
                                                    </div> 
                                                </div> 
                                            } 
                                        } 

                                    </div> 
                                                } 

                                            } 
            } 

        </div> 

    </div> 
</div> 

<style> 
    .pager .active a { 
        background-color: #337AB7; 
        color: #FFF; 
        border: 0px; 
    } 
</style> 

<script> 

    function goTo(number) { 
        $('ul.pager li:eq(' + number + ') a').tab('show'); 
        upgradePreNext(number); 
    } 
    function upgradePreNext(number) { 
        if (number > 1) { 
            $('ul.pager li:eq(0)').attr("onclick", "goTo(" + (number - 1) + ")"); 
            $('ul.pager li:eq(0)').attr("class", "previous"); 
        } else { 
            $('ul.pager li:eq(0)').attr("class", "disabled"); 
        } 
        if (number < 5) { 
            $('ul.pager li:eq(6)').attr("onclick", "goTo(" + (number + 1) + ")"); 
            $('ul.pager li:eq(6)').attr("class", "next"); 
        } else { 
            $('ul.pager li:eq(6)').attr("class", "disabled"); 
        } 
    } 
    $(document).ready(function () { 
        $('li a').on('click', function (e) { 
            goTo((e.target.innerHTML) - 0); 
        }); 
    }); 

</script> 
```

输出将是：

[![在此处输入图像描述](../Images/3e111cd7ad52c5bd089cc307f60ce28c.png)](https://i.stack.imgur.com/w5s4l.png)

您也可以下载[示例代码](https://code.msdn.microsoft.com/ASPNET-MVC-Thumbnail-e9cf1a65#content)。

# android - Android + Sqlite：建表sql没有效果

> ID：13878798
> 
> 赞同：-1
> 
> 时间：2012-12-14T12:34:30.233
> 
> 标签：android, database, sqlite

我正在尝试创建一个简单的 android 应用程序，该应用程序使用 SQLiteDatabase（不使用 SQLiteOpenHelper）创建数据库。因此，数据库创建和表创建 sql 成功执行，没有任何问题/异常。

现在的问题是当我重新打开同一个数据库时，之前创建的表不存在！！

我正在使用以下代码检查表的存在：

```
 Cursor cursor = db.rawQuery("select DISTINCT tbl_name from sqlite_master where tbl_name = '"+ sqlQueryString +"'", null);
                if(cursor!=null) {
                    if(cursor.getCount() == 0) {
                        //error handling code here
                    }
                    cursor.close();
                } 
```

显然我以这种`if(cursor.getCount() == 0)`情况结束。

我提取了 db 文件并在 pc 上使用[sqlite 查看器](https://sites.google.com/site/sqlitetool/)进行了检查，之前创建的表根本不存在。

所以我的问题是如何验证我的创建表查询是否已正确创建表？

* * *

添加请求的信息：

```
Create table ExampleTable ( ROWID integer primary key autoincrement , FIRSTNAME text    , LASTNAME text    ) ; 
```

* * *

添加android代码执行上面的查询：

```
 db.beginTransaction();
            db.execSQL(sqlQueryString);
            db.endTransaction(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:13:50.503

您需要`db.setTransactionSuccessful()`在结束事务之前调用，否则将假定操作失败并回滚事务。

典型的事务用法是：

```
db.beginTransaction();
try {
    // execute DB queries here
    db.setTransactionSuccessful();
} finally {
    db.endTransaction();
} 
```

* * *

^(感谢 njzk2 在评论中首次提到解决方案。)

# performance - 避免在 R 中对 data.frame 进行逐行处理

> ID：13878803
> 
> 赞同：4
> 
> 时间：2012-12-14T12:34:50.880
> 
> 标签：performance, r, dataframe

我想知道在 R 中避免逐行处理的最佳方法是什么，大多数逐行处理都是在内部 C 例程中完成的。例如：我有一个数据框`a`：

```
 chromosome_name start_position end_position strand
1              15       35574797     35575181      1
2              15       35590448     35591641     -1
3              15       35688422     35688645      1
4              13       75402690     75404217      1
5              15       35692892     35693969      1 
```

我想要的是：基于 strand 是正还是负，`startOFgene`as`start_position`或`end_position`. 避免`for`循环的一种方法是将 data.frame 与 +1 链和 -1 链分开并执行选择。还有什么其他方法可以加快速度？如果每行具有某些其他复杂处理，则该方法不会按比例放大。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T12:46:38.243

也许这已经足够快了......

```
transform(a, startOFgene = ifelse(strand == 1, start_position, end_position))

  chromosome_name start_position end_position strand startOFgene
1              15       35574797     35575181      1    35574797
2              15       35590448     35591641     -1    35591641
3              15       35688422     35688645      1    35688422
4              13       75402690     75404217      1    75402690
5              15       35692892     35693969      1    35692892 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T13:52:39.660

首先，由于您的所有列都是整数/数字，您可以使用矩阵而不是 data.frame。矩阵上的许多操作比 data.frame 上的相同操作快得多，即使在这种情况下它们并没有太大不同。然后您可以使用逻辑子集来创建`startOFgene`列。

```
# Create some large-ish data
M <- do.call(rbind,replicate(1e3,as.matrix(a),simplify=FALSE))
M <- do.call(rbind,replicate(1e3,M,simplify=FALSE))
A <- as.data.frame(M)
# Create startOFgene column in a matrix
m <- function() {
  M <- cbind(M, startOFgene=M[,"start_position"])
  negStrand <- sign(M[,"strand"]) < 0
  M[negStrand,"startOFgene"] <- M[negStrand,"end_position"]
}
# Create startOFgene column in a data.frame
d <- function() {
  A$startOFgene <- A$start_position
  negStrand <- sign(A$strand) < 0
  A$startOFgene[negStrand] <- A$end_position[negStrand]
}
library(rbenchmark)
benchmark(m(), d(), replications=10)[,1:6]
#   test replications elapsed relative user.self sys.self
# 2  d()           10  18.804    1.000    16.501    2.224
# 1  m()           10  19.713    1.048    16.457    3.152 
```

# android - 以编程方式绘制形状，仅圆角部分

> ID：13878804
> 
> 赞同：3
> 
> 时间：2012-12-14T12:34:51.707
> 
> 标签：android, android-layout, shape

这里的问题是在 onDraw 方法中绘制这种形状。

我试过使用`Path`，`CornerPathEffect`但底角需要锋利，所以它不是有效的解决方案。

![在此处输入图像描述](../Images/1dfb4f57d44be07e111ecfb2fa165616.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T19:13:54.813

> 这里的问题是在 onDraw 方法中绘制这种形状。

修改您的案例的值：

```
Path p = new Path();
Paint paintN = new Paint();
paintN.setAntiAlias(true);
paintN.setStyle(Style.FILL_AND_STROKE);
paintN.setColor(Color.YELLOW);  
p.moveTo(40, 60);
p.quadTo(40, 40, 60, 40);   
p.lineTo(180, 40);
p.quadTo(200, 40, 200, 60);
p.lineTo(200, 90);
p.lineTo(40, 200);
p.close();
canvas.drawPath(p, paintN); 
```

# java - log4j 属性文件选择

> ID：13878805
> 
> 赞同：0
> 
> 时间：2012-12-14T12:34:52.157
> 
> 标签：java, log4j

从 apache log4j 观察到一个相当奇怪的行为，并通过思想分享来获得你的想法。

我有一个使用脚本运行的应用程序。到目前为止，没有什么特别的。但是我使用该脚本设置的 CLASSPATH，比如目录*/home/myName/*，有两个不同的 log4j 属性文件。一个是简单的*log4j.properties*，另一个是*log4jXYZ.prperties*。

奇怪的是，当我从不同的目录运行这个脚本时，一个或另一个 log4j 属性文件正在被拾取。我的理解是它应该选择 log4j.properties，显然无论我从哪里运行脚本。

你有没有看到一些可以理解它的逻辑。目前我很茫然。

我可以预测的是 log4j 正在尝试任何匹配 lo4j*.properties 表达式的文件。我必须承认我没有阅读所有帮助 log4j 的手册。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:50:16.437

添加 log4j.debug 属性，当您运行应用程序（`-Dlog4j.debug=`对于 java 命令）时，它应该向您显示加载配置文件的路径。

我怀疑它可能会从另一个目录加载同名的文件，而不是你想象的。

# version-control - 如何管理在不同客户系统上运行的源代码？

> ID：13878806
> 
> 赞同：1
> 
> 时间：2012-12-14T12:35:04.127
> 
> 标签：version-control, tfs, architecture, branch

我们有一个为我们自己的公司实施的应用程序。随着时间的推移，该应用程序已被多家公司购买。

对于每家公司，我们在源代码控制中创建了一个新的 TFS 分支。并且每一项都针对特定的客户要求进行了更改。

这就是为什么源代码现在有很多版本的原因。进行更改变得如此困难，因为如果更改来自通用结构，则需要为每个分支单独实施和测试。

管理源代码的最佳和常规方法是什么？

是否建议有一个可以在每个客户的系统上运行的单一解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:41:53.857

有几种方法可以处理客户特定的定制，其中包括：

*   为每个客户保留一个完全独立的分支，并最终在分支之间合并代码。这是您现在部署的解决方案。
*   以您拥有独立于客户的“内核”的方式构建应用程序，该“内核”具有可插入的自定义挂钩。只有定制将保存在单独的独立存储库中。
*   将自定义项放入通用应用程序并使其可配置（“开/关”）。

采取哪条路线取决于应用程序的性质和每个客户的定制量。如果上下文允许，由于手动合并、错误修复和测试开销，单独的分支是最不利的。

在特定行业（电信计费系统）中，我见过所有这三个：使用专用代码分支的供应商，其他具有可插拔定制和可配置现成产品的供应商。当然，每个供应商都有不同程度的定制灵活性、产品化程度和集成方法。

作为软件供应商，最大的权衡是在定制灵活性水平与产品化水平之间取得平衡。

# r - 如果函数或？: R 中的运算符

> ID：13878807
> 
> 赞同：0
> 
> 时间：2012-12-14T12:35:08.293
> 
> 标签：r, if-statement, operators

我正在寻找类似`cond ? a : b`或`if(cond, a, b)`R 中的东西（条件是某种条件，返回 TRUE/FALSE 的向量）。我知道在很多情况下，我可以在作业中使用技巧：

```
tmp[cond] <- a 
```

但这对我不利，因为我不想改变任何东西——我只需要在表达式中立即获得 R 值。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T12:37:32.743

```
ifelse(cond, a, b) 
```

如果`a`和`b`是单个值或两者具有相同的长度，则可以解决问题`cond`。否则，你有

```
if (cond) a else b 
```

where`cond`必须有长度 1 并且`a`并且`b`可以有任何长度。

# c++ - 无缺陷存档库：“不支持存档类型”

> ID：13878811
> 
> 赞同：2
> 
> 时间：2012-12-14T12:35:13.390
> 
> 标签：c++, qt, zip

有没有人有一些[无错误的](http://www.bugless.co.uk/products/archive/archive.html)图书馆经验？我从他们的网站下载了存档库，并构建了一个与我的项目链接的静态库。我在带有 Visual Studio 2008 和 Qt4 的 windows7 上使用它。

但无论我尝试从他们的网站编译哪个示例代码，我都会收到消息“不支持存档类型：0”。

谁能告诉这里的问题是什么？

PS，当我构建库时，我收到一个警告，指出未找到 common.pri，我不知道在哪里可以设置我应该设置的环境变量“ARCHIVEHOME”。

我很高兴有任何帮助！

# c# - C# SOAP 客户端无法反序列化响应（“XML 文档中存在错误”）

> ID：13878812
> 
> 赞同：0
> 
> 时间：2012-12-14T12:35:13.870
> 
> 标签：c#, xml, web-services, serialization, soap

我在我的项目中添加了对 Web 服务的引用。我正在使用生成的代码来调用 Web 服务的方法。其中一种方法返回以下结构：

```
 <SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:typens="urn:AllegroWebApi" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
       <SOAP-ENV:Body SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
          <typens:doGetCatsDataResponse>
             <cats-list xsi:type="SOAP-ENC:Array" SOAP-ENC:arrayType="typens:CatInfoType[24051]">
                <item xsi:type="typens:CatInfoType">
                   <cat-id xsi:type="xsd:int">26013</cat-id>
                   <cat-name xsi:type="xsd:string">Antyki i Sztuka</cat-name>
                   <cat-parent xsi:type="xsd:int">0</cat-parent>
                   <cat-position xsi:type="xsd:int">0</cat-position>
                   <cat-is-product-catalogue-enabled xsi:type="xsd:int">0</cat-is-product-catalogue-enabled>
                </item>
            ....

            </item>
            <item xsi:type="typens:CatInfoType">
               <cat-id xsi:type="xsd:int">124895</cat-id>
               <cat-name xsi:type="xsd:string">Pozostałe</cat-name>
               <cat-parent xsi:type="xsd:int">124883</cat-parent>
               <cat-position xsi:type="xsd:int">5</cat-position>
               <cat-is-product-catalogue-enabled xsi:type="xsd:int">0</cat-is-product-catalogue-enabled>
            </item>
            <item xsi:type="typens:CatInfoType">
               <cat-id xsi:type="xsd:int">124894</cat-id>
               <cat-name xsi:type="xsd:string">Teleskopy</cat-name>
               <cat-parent xsi:type="xsd:int">124883</cat-parent>
               <cat-position xsi:type="xsd:int">6</cat-position>
               <cat-is-product-catalogue-enabled xsi:type="xsd:int">0</cat-is-product-catalogue-enabled>
            </item>     // Line 168361   <--------------- HERE
         </cats-list>
         <ver-key xsi:type="xsd:long">91632766</ver-key>
         <ver-str xsi:type="xsd:string">1.1.47</ver-str>
      </typens:doGetCatsDataResponse>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

负责反序列化的生成代码会引发以下异常：

> System.Xml.dll 中出现“System.InvalidOperationException”类型的未处理异常附加信息：XML 文档中存在错误 (168361, 13)。

我标记了代码示例中异常中提到的行。我想这与它是最后一个`item`对象的结束标签有关。我不知道为什么它失败了。XML 格式正确，似乎不包含任何不受支持的字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:38:26.847

只是一个猜测，但请检查您的数据，可能是其中一个字段具有“<”或“>”，从而影响了 xml 文档的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:00:21.303

我看到您连续有两个结束项目标签。当然，您可能会排除某些 XML 文件。尽管如此，连续两个结束标签肯定会导致该错误。

# c# - C# Access 数据库查询

> ID：13878813
> 
> 赞同：0
> 
> 时间：2012-12-14T12:35:14.827
> 
> 标签：c#

我在 ms 访问中创建了数据库，它有 GPA 列。在 listbox2 中，我需要列出 GPA 大于 2 的学生。我该怎么做？

```
command.CommandText = "SELECT * FROM Student WHERE GPA > 2";
while (reader.Read())
{
  listBox2.Items.Add............?
} 
```

如果可以，请提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:43:57.250

我不知道这是否只是您发布的伪代码。但如果不是，您正在阅读的`DataReader`不是初始化，就是没有使用正确的`Command`-sql，因为您`CommandText`之前设置了一行。

```
command.CommandText = "SELECT * FROM Student WHERE GPA > 2";
using(var reader = command.ExecuteReader())
{
    while (reader.Read())
    {
        // assuming that there's a column with name: StudentName
        listBox2.Items.Add(reader.GetString(reader.GetOrdinal("StudentName")));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:46:46.123

```
string ConnectionString = "PUT YOU CONNECTION STRING HERE";

con = new SqlConnection(ConnectionString);
con.Open();
string CommandText = "SELECT * FROM Student WHERE GPA > 2";
cmd = new SqlCommand(CommandText);
cmd.Connection = con;
rdr = cmd.ExecuteReader();
lbx.Items.Clear();
while (rdr.Read())
{    
     lbx.Items.Add......
} 
```

# c++ - 使用向量在初始化器列表中移动构造函数

> ID：13878818
> 
> 赞同：0
> 
> 时间：2012-12-14T12:35:27.343
> 
> 标签：c++, c++11, copy, move, initializer-list

使用此示例：

```
// test.cpp

#include <iostream>
#include <vector>
#include <utility>

using namespace std;

class mystring : public string { public:
    mystring() = default;

    mystring(const char* c) : string(c) {}

    mystring(mystring& m) : string(m) { cout << "Reference" << endl; }
    mystring(mystring const & m) : string(m) { cout << "Const reference" << endl; }
    mystring(mystring&& m) : string(move(m)) { cout << "Move" << endl; }
};

int main() {
    mystring a;

    vector<mystring> v{ a };
} 
```

输出是：

```
$ g++ --version | grep "g++"
g++ (Ubuntu/Linaro 4.7.2-2ubuntu1) 4.7.2
$ g++ -std=c++11 -fno-elide-constructors test.cpp
$ ./a.out
Reference
Move
Const reference 
```

但是，如果我用 r 值初始化 v：

```
vector<mystring> v{"hello"}; 
```

输出是：

```
$ g++ -std=c++11 -fno-elide-constructors test.cpp
$ ./a.out
Const reference 
```

这意味着，没有副本。使用 r 值：

```
vector <mystring> v{mystring()}; 
```

输出：

```
$ g++ -std=c++11 -fno-elide-constructors test.cpp
$ ./a.out
Move
Move
Const reference 
```

我不明白两件事：

*   为什么使用非原始字符串执行第二次移动（在第一次复制/移动之前）？
*   为什么使用原始字符串，不执行“mystring”的副本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:32:57.403

NB原始字符串在C ++ 11中意味着不同的东西，如果你在谈论，我认为你的意思是字符串文字`"hello"`

> *   为什么使用原始字符串，不执行“mystring”的副本？

诶？有一个副本，这就是它打印的原因`Const Reference`。

```
vector<mystring> v{"hello"}; 
```

大括号初始化列表`std::initializer_list<mystring>`使用单个元素初始化构造函数参数，该元素使用`mystring(const char* c)`构造函数构造，然后使用构造函数将该元素复制到向量中`mystring(const mystring&)`，打印`Const Reference`. 很简单。

> *   为什么使用非原始字符串执行第二次移动（在第一次复制/移动之前）？

第二招怎么可能在第一招之前？！:)

这是一个如何`initializer_list`构造的实现细节，这通常无关紧要，因为额外的动作会被省略。

```
vector <mystring> v{mystring()}; 
```

`mystring`这将使用默认构造函数创建一个临时对象，然后`std::initializer_list<mystring>`使用单个元素创建一个元素，该元素是使用`mystring(mystring&&)`构造函数以临时对象作为其参数来构造的。那招施工印`Move`。内部还有另一个动作，再次打印`Move`。然后`initializer_list`像以前一样将元素复制到向量中，打印`Const Reference`。

要回答您的评论：

您看到的额外移动也发生在第一种情况下，但在这种情况下，被移动的类型`const char*`不会打印`Move`，即该语句`std::vector<mystring>{ expr };`可以被认为是：

```
auto tmp = expr;
mystring tmparray[] = { std::move(tmp) };
std::initializer_list<mystring> init_list( tmparray, 1 };
std::vector<mystring> v(init_list); 
```

何时`expr`是`a`（这是一个非常量左值）创建`tmp`prints`Reference`然后创建`tmparray`prints`Move`然后复制`tmparray[0]`到向量 prints`Const Reference`中。

何时创建不打印任何`expr`内容`"hello"`的元素`tmp`，并创建不打印任何内容的`tmparray`调用`mystring(const char*)`，然后复制`tmparray[0]`到向量 prints`Const Reference`中。

何时`expr`创建打印然后创建`mystring()`打印然后复制到矢量打印`tmp``Move``tmparray``Move``tmparray[0]``Const Reference`

使用像这样的两个元素支撑初始化列表，`{ expr1, expr2 }`它可以是：

```
auto tmp1 = expr1;
auto tmp2 = expr2;
mystring tmparray[] = { std::move(tmp1), std::move(tmp2) };
std::initializer_list<mystring> init_list( tmparray, 2 };
std::vector<mystring> v(init_list); 
```

因此，如果您使用，`{ "hello", mystring() }`您将`Move`被.`tmp2``Move``tmparray``Const Reference``v`

当然，通常所有这些都会被忽略掉，因此没有不必要的复制或移动。 `-fno-elide-constructors`除了找出会发生什么之外并没有真正有用，但实际上并没有发生！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:23:53.363

您没有正确地将移动构造函数标记为`noexcept`.

# jquery - 在实际读取之前触发 jQuery 文档就绪

> ID：13878822
> 
> 赞同：0
> 
> 时间：2012-12-14T12:35:36.337
> 
> 标签：jquery

我把我的 `$(document).ready()`代码放在文档的 HEAD 中，在里面我有`alert($("#some-textbox").val())`，但是当页面加载时这会产生“未定义”。但是，如果我将此代码移动到页面的页脚，它就可以工作。

代码：

```
<head>
...
<script type="text/javascript">
  var searchForm = $("#search-form");
  var searchBar = $("#search-bar");
  var INITIAL_TEXT = "Start typing to find friends or colleagues...";
  $(document).ready(function() {

      alert(searchBar.val()); // For testing purpose only; outputs undefined

      searchForm.submit(function(e) {
            if(searchBar.val() == INITIAL_TEXT) {
                searchBar.val("");
            }
      });
      searchBar.focus(function() {
            if(searchBar.val() == INITIAL_TEXT) {
                searchBar.val("");
            }
      });
      searchBar.blur(function() {
            if(searchBar.val() == "") {
                searchBar.val(INITIAL_TEXT);
            }
      });
  });
  </script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T12:37:12.230

您的选择器`$("some-textbox").val()`无效。

你的意思是

```
$(".some-textbox").val() 
```

或者

```
$("#some-textbox").val() 
```

也许？

**更新（问题已更改）**

您应该在 document.ready 中移动变量定义

```
$(document).ready(function() {
    var searchForm = $("#search-form");
    var searchBar = $("#search-bar");
    //....
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T12:46:11.200

`doucment.ready`当 DOM 尚未加载时，您正在获取对象之外的对象。

将整个代码移动到函数中。

# sql-server - SQL Server Spatial：获取多个点的长度

> ID：13878824
> 
> 赞同：2
> 
> 时间：2012-12-14T12:35:50.823
> 
> 标签：sql-server, sql-server-2008, gis, sql-server-2012

我有一个包含许多 SQL Server 地理坐标（地理数据类型）的表。这些点在表中正确排序。我想将这些点组合成一条线并计算折线的总长度。

我的想法如下：

1.  联合地理坐标。（*这会创建一个多点。*）
2.  将 转换`MULTI POINT`为`LINE STRING`.
3.  用于`.STLength()`获取长度

有没有一种有效的方法可以在不从字符串构造**LINESTRING的情况下合并现有点？**

我正在使用 SQL Server 2012。

# json - 在 Mule 3.2 Flow 中解析 JSON

> ID：13878830
> 
> 赞同：1
> 
> 时间：2012-12-14T12:36:04.357
> 
> 标签：json, expression, esb, mule, jsonpath

如果我有以下 JSON

```
[ 
  { "category": "reference",
    "author": "Nigel Rees",
    "title": "Sayings of the Century",
    "price": 8.95
  },
  { "category": "fiction",
    "author": "Evelyn Waugh",
    "title": "Sword of Honour",
    "price": 12.99
  },
  { "category": "fiction",
    "author": "Herman Melville",
    "title": "Moby Dick",
    "isbn": "0-553-21311-3",
    "price": 8.99
  },
  { "category": "fiction",
    "author": "J. R. R. Tolkien",
    "title": "The Lord of the Rings",
    "isbn": "0-395-19395-8",
    "price": 22.99
  }
] 
```

我可以使用以下 JSONPath 获得“Moby Dick”的价格：

```
$..[?(@.title=='Moby Dick')].price 
```

结果：

```
'0' => "8.99" 
```

但是我如何在 Mule 中做到这一点..... json 表达式在 mule 3.2 流程中获得相同结果会是什么样子？

我不介意您的答案是否显示了如何以另一种方式进行操作，只要我在 mule 中得到相同的结果。

谁能帮我解决这个问题？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T17:39:58.600

使用 MEL 的方法是反序列化 JSON 有效负载并使用[MVEL 过滤投影](http://mvel.codehaus.org/MVEL+2.0+Projections+and+Folds)：

```
<json:json-to-object-transformer returnClass="java.util.List" />
<expression-transformer 
    expression="#[($.price in message.payload if $.title == 'Moby Dick')[0]]" /> 
```

此表达式不考虑`Moby Dick`不存在的情况。您没有提到在这种情况下要做什么：如果您在找不到该书时指定所需的行为，我可以加强表达。

# c++ - 将参数从 C++ 中的 DLL 传递给函数

> ID：13878833
> 
> 赞同：2
> 
> 时间：2012-12-14T12:36:11.713
> 
> 标签：c++, opengl, dll, sdl

我已经设法从 C++ 中的 DLL 调用一个函数，但我想向它传递一个参数。

我目前正在使用 SDL，我想将 SDL 事件“事件”传递给源代码中的函数。下面的例子：

```
// DLL
typedef void (*Events)(SDL_Event *event);
static __declspec(dllexport) void HandleEvents(Events events)
{
    events(&d2Main::event);
}

// Application
int main()
{
    d2Main::HandleEvents(&HandleEvents);
}

void HandleEvents(SDL_Event *events)
{
     if(events.type == SDL_QUIT)
          // Do stuff
} 
```

d2Main 是一个类。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:35:34.427

我想 d2Main::event 是静态 SDL_Event 对象。对的，这是可能的。只要应用程序和 DLL 看到的结构 SDL_Event 的定义相同（包括结构内部元素之间的填充和打包 - 出于成员对齐的原因）。

跨模块边界工作时要记住的一些事情是，

1.  确保使用相同的定义编译结构
2.  最好使用相同编译器的相同版本。因为例如 VS 8 和 VS 9 带有它们自己的 C/C++ 运行时，并且使用它们自己的单独堆。因此，无法从使用 VS 9 编译的模块中删除使用 VS 8 从一个模块分配的内存。通常，此问题表现为“当我将内存分配给作为我的 dll 导出引用传入的 std::string 时，我的 dll 崩溃”功能”
3.  确保不要混合为发布和调试配置构建的模块（同样的原因 - 发布和调试 CRT 中的堆不同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:20:04.043

使用 nm 实用程序（GNU 二进制实用程序）查看 dll 文件中的符号表，然后通过使用 extern "C" { your function} 声明包装要调用的函数，以与调用常规函数相同的方式调用它。您的函数应该由链接器链接，因此您还应该添加 -L ./ -ldllfile 作为到 g++ 或 gcc 的开关。

# c - 递归扫描文件夹树 C

> ID：13878834
> 
> 赞同：-2
> 
> 时间：2012-12-14T12:36:20.297
> 
> 标签：c

我需要创建一个在 linux 上运行的 C 程序，它递归地扫描文件夹搜索文件。这可能吗？我是 C 的初学者，到目前为止我找不到任何东西。谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:43:54.270

你可以看看 Glib，这里有一些[文件实用程序](http://developer.gnome.org/glib/stable/glib-File-Utilities.html)可以提供帮助。

更具体地说，您可以对目录中的每个文件使用[g_dir_open](http://developer.gnome.org/glib/stable/glib-File-Utilities.html#g-dir-open)函数。如果这个函数将`GError**error`指针设置为非空，那么你已经尝试打开一个文件，否则你只是解析到一个子目录......

您的代码应如下所示：

```
void parse(const gchar *path)
{
  GError *error;
  GDir *dir = g_dir_open(path, 0, error);
  if(error) 
  {
    // this is a file, not a dir, or a dir which could not be opened...
    // you can put all the processing for your file here.
  }
  else
  {
    gchar *elem;
    while(( elem=g_dir_read_name(dir) ))
    {
      parse(elem);
      free(elem);
    }
    g_dir_close(dir);
  }
} 
```

假设您有一个包含 10 个文件的文件夹，那么 parse 函数将调用自身 10 次，每个文件调用一次。（只需在调试器中尝试！）
**第 0 次解析调用：**打开目录，然后到达 while 循环并调用第 1 次解析第一个文件
**第 1 次解析调用：**无法将文件作为目录打开，因此函数以第一个结束if 块的一部分。
**回到第 0 次 parse 调用：**迭代 while 循环，为下一个文件调用第 2
**次 parse 第 2 次 parse 调用：**无法将文件作为目录打开，因此函数在 if 块的第一部分结束。
**返回第 0 次解析调用：**迭代 while 循环，调用第 3 次解析下一个文件
……
**返回第 0 次解析调用：**目录中没有更多文件，循环结束。

这称为递归。

# jquery - jQuery动画没有在slideDown的同时运行

> ID：13878836
> 
> 赞同：0
> 
> 时间：2012-12-14T12:36:36.303
> 
> 标签：jquery, jquery-animate

我有以下代码可以正常工作，但是我希望动画在“.main_nav”向下滑动的同时发生。目前'.slides_down'先滑动，然后'.multicolor'动画。我需要它们同时发生。

```
 function slideDown_Menu(){
                $('.top-nav').slideUp(300,function(){
                    $('.main_nav').slideDown('slow', function(){
                        $('.multicolor').animate({top: '203px'});
                        // $('.tab_wrapper').animate({ marginTop: '63px' }, 500, 'linear');
                    });
                });
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:39:24.680

所以不要使用slideDown的回调函数：

```
function slideDown_Menu(){
                $('.top-nav').slideUp(300,function(){
                    $('.main_nav').slideDown('slow');
                     $('.multicolor').animate({top: '203px'});
                });
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:42:44.093

请参考[http://api.jquery.com/slideDown/](http://api.jquery.com/slideDown/)

将函数作为第二个参数

```
$('.main_nav').slideDown('slow', function(){ ... }); 
```

表示要在 slideDown**完成时执行它**

# ios - 通用 iOS 应用程序

> ID：13878837
> 
> 赞同：1
> 
> 时间：2012-12-14T12:36:36.990
> 
> 标签：ios

我们有一个 iPhone 应用程序并希望它也支持 iPad。

但据我所知，如果您向 Apple 提交应用并表明它是通用的，而实际上并非如此（例如，在提交时不支持 iPad，这是受其政策限制的）。

那么，我们同时允许进一步开发我们的应用程序以支持 iPad 的最佳方式是什么？

**ps：**我们不想为 iPad 和 iPhone 创建单独的项目，因为它们共享大量代码，但正如我提到的，我们遇到了以下障碍。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:46:55.357

将您的应用程序作为 iPhone 应用程序提交。如果您支持 iPad，请在提交更新时将其更改为通用应用程序。

# file - 新文件中每个文件的第一行

> ID：13878839
> 
> 赞同：1
> 
> 时间：2012-12-14T12:36:37.977
> 
> 标签：file, bash, shell, scripting, line

如何获取目录中每个文件的第一行并将它们全部保存在新文件中？

```
#!/bin/bash

rm FIRSTLINE
for file in "$(find $1 -type f)";
do
head -1 $file >> FIRSTLINE
done
cat FIRSTLINE 
```

这是我的 bash 脚本，但是当我这样做并打开文件 FIRSTLINE 时，我会看到：

```
==> 'path of the file' <==
'first line' of the file 
```

这适用于我的论点中的所有文件。

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T12:39:09.173

```
find . -type f -exec head -1 \{\} \; > YOURFILE 
```

可能对你有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T12:53:04.177

问题是您引用了 的输出，`find`因此它被视为单个字符串，因此`for`循环仅运行一次，单个参数包含所有文件。这意味着您运行`head -1 file1 file2 file3 file4 ...`等，并且当给定多个文件时`head`打印`==> file1 <==`标题。

`find`因此，要修复它，请删除外壳周围的双引号，以确保您`for`按预期为每个文件运行一次循环。此外，脱壳后的分号是不必要的。

```
#!/bin/bash

rm FIRSTLINE
for file in $(find $1 -type f)
do
    head -1 $file >> FIRSTLINE
done
cat FIRSTLINE 
```

不过，这有一些样式问题，您真的需要先写入文件然后再将`cat`文件写入标准输出吗？您可以将输出打印到标准输出：

```
#!/bin/bash

for file in $(find $1 -type f)
do
    head -1 $file
done 
```

我个人会这样写：

```
find $1 -type f | xargs -L1 head -1 
```

或者如果您需要文件中的输出并打印到标准输出：

```
find $1 -type f | xargs -L1 head -1 | tee FIRSTLINE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-07T14:33:05.133

对于 gzip 文件实例：

```
for file in `ls *.gz`; do gzcat $file | head -n 1; done > toto.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-19T19:20:36.360

```
$ for file in $(find $1 -type f); do echo ''; 
    echo $file; 
    head -n 4 $file; 
  done 
```

# php - 排序数组，其中数组值与另一个数组的键匹配

> ID：13878840
> 
> 赞同：0
> 
> 时间：2012-12-14T12:36:40.503
> 
> 标签：php, arrays, multidimensional-array

我有 2 个数组，1 个保存要显示的数据，另一个保存订单。

以下数组将在 foreach 循环中使用以显示：

```
array(
   [Posts] =>
            [0] =>
                 id => 7
                 content => 'some content'
            [1] =>
                 id => 3,
                 content => 'some other content'
            [2] =>
                 id => 4,
                 content => 'some more content'
            [3] =>
                 id => 2,
                 content => 'some irrelevant content'
) 
```

此数组包含排序位置：

```
array(
   2, 4, 7, 3
) 
```

我想根据关联数组中的值对第一个数组进行排序，其中键是与第二个数组匹配的 id。

预期输出：

```
array(
   [Posts] =>
            [0] =>
                 id => 2,
                 content => 'some irrelevant content'
            [1] =>
                 id => 4,
                 content => 'some more content'
            [2] =>
                 id => 7
                 content => 'some content'
            [3] =>
                 id => 3,
                 content => 'some other content'
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T12:41:10.830

如果源数组键等于 Ids，你会大大帮助自己。那会加快速度。但是现在这将使您的源数据根据您的排序数组值排序）：

```
$res = array();
foreach( $sortArray as $sortId ) {
   foreach( $srcArray as $item ) {
      if( $item['id'] == $sortId ) {
         $res = $item;
         break;
      }
   }
} 
```

**编辑**

如果您将 Id 用作键，那么 second`foreach()`将没有用：

```
$res = array();
foreach( $sortArray as $sortId ) {
   $res[] = $srcArray[ $sortId ];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T12:45:40.147

该解决方案使用[`usort`](http://php.net/manual/en/function.usort.php)：

```
$sarray = array(2, 4, 7, 3);
$sarray = array_flip($sarray);

usort($posts, function($a, $b) use($sarray) {
    // TODO: check if the array-index exists ;)
    $index_a = $sarray[$a['id']];
    $index_b = $sarray[$b['id']];

    return $index_a - $index_b;
});

var_dump($posts); 
```

由于我使用的是闭包，因此您需要 PHP 5.3 才能像这样使用它。如果您需要 5.2 兼容性，您可能必须使用`create_function`.

# svn - 将项目的多个版本添加到 SVN 并标记它们

> ID：13878841
> 
> 赞同：1
> 
> 时间：2012-12-14T12:36:40.580
> 
> 标签：svn, tags, repository, trunk

我对 SVN 的东西还很陌生，但我正在掌握它。基本上我已经在 Eclipse 中创建了一个项目，我们在计算机上本地保存了项目的 2.1、2.2 和 2.3 版本。我已经为第一个（2.1）设置了我的服务器存储库，所以它位于主干文件夹中，并且有一个标记版本（标记 2.1），但是我怎样才能添加 2.2 和 2.3，所以他们；可以添加到tag文件夹中，然后我们就可以使用2.3作为主干版本了：

我们的存储库结构看起来像这样只是为了给你们一个视觉，因为我的解释不是最清楚的：

```
RepositoryLocation/

CoreFiles/
trunk
tags

CoreWeb/
trunk
tags

etcFolders/
trunk
tags 
```

（每个项目中大约有 9 个不同的文件夹）

我们很确定我们希望项目中的每个文件夹都有一个主干/标签，在做了一些研究之后，我们认为这将使将来更改某些区域更容易。但是我们不确定现在如何将 2.2、2.3 项目和所有相关文件夹添加到标签中，项目中的文件夹结构完全相同，因此无法想象如果掌握正确的知识会太困难。欢迎任何评论，如果在描述时这不是最清楚的，我们深表歉意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:47:17.097

如果项目从一开始就在 SVN 中，您将拥有以下内容：

```
trunk ------------------------------------------------------------------->
         \_ v2.1 tag             \_v2.2 tag          \_v2.3 tag 
```

其中每个`-`代表主干中的一个新提交。

如果您想重新创建此历史记录，请从您拥有的主干开始，其中包含 v2.1 中的代码。然后，在您的工作副本中，将所有文件替换为 2.2 版中的文件，提交，然后标记。然后用 2.3 版中的文件替换所有文件，提交，然后标记。

假设您使用的是最新版本的 SVN，它的根目录下只有一个 .svn 文件夹。用新文件替换旧文件时不要删除此文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T13:34:16.620

@JB 的后续行动：

如果*仅* `CoreFiles + CoreWeb + etcFolders`形成项目，您最好在 repo 的根目录中拥有单个主干/分支/标签树（因此 - 复制整个项目）

如果 CoreFiles**和**CoreWeb**和**etcFolders 是独立项目，但它们作为*子项目*的组合产生*superproject*，您可以拥有当前树（但您在每个基础项目中都忘记`/branches`了），但也可以使用外部创建“组合超级项目”（在这个 repo 的根目录中）或 /better/ 在新的单独存储库中）

# ios - 触摸 UITableView 单元格时更改 UITextView

> ID：13878844
> 
> 赞同：1
> 
> 时间：2012-12-14T12:36:47.273
> 
> 标签：ios, xcode, uitableview, uitextview

这似乎是一个简单的问题，但我找不到答案。

我只想在用户触摸 uitableview 中的单元格时更改 uitextview 中的文本。

uitextview 将更改为什么取决于他们在表格中单击的单元格。

这就是我正在尝试的：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath;
{
    myTextView.text = [myData2 objectAtIndex:indexPath.row];
} 
```

我已经通过在 ViewDidLoad 中初始化它来确保 myTextView 工作正常并且文本正常。

同样作为背景故事...有一个表格，其中包含来自名为 myArray 的数组的数据...当您触摸其中一个单元格时，它会进入另一个屏幕，其中几乎只有一个 UITextView，然后将从另一个数组 myArray2 中读取从您单击的行号到数组中的相应行。

当我做所有这些时，文本不会改变。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:37:12.260

根据您在问题中所写的内容，我认为您的 textview 在另一个控制器中，所以首先，您不能直接从另一个控制器更新某些控制器的 UI。您必须在包含 textview 的视图控制器中创建一个 int 类型属性，将该 int 设置为 indexPath.row。并将该 int 用作 myData2 数组的 objectAtIndex。如果你的 textView 真的在另一个视图控制器中，你必须做一些工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:45:41.740

myTextView 是 (IBOutlet) 属性吗？如果是这样，它实际上是否链接到 Inerface Builder 中的实际 IB 对象作为出口？听起来好像有问题，因为如果您输入一个简单的行来更改代码，它也不会改变（如评论中所示）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T12:46:40.157

我的猜测是您已正确连接您的代表。如果您尚未连接您的委托，则`didSelectRowAtIndexPath`不会调用该方法。

# windows-phone-7 - wp7：如何检查条件进度条是否可见？

> ID：13878847
> 
> 赞同：0
> 
> 时间：2012-12-14T12:36:59.483
> 
> 标签：windows-phone-7, if-statement, progress-bar

我有一个进度条，我想检查 contion 是这样的

```
if( StkProgressbar.Visibility = Visibility.Visible)
{
    //coding
}
else
{

} 
```

但是如果条件给出错误不能隐式地将类型'System.Windows.Visibility'转换为'bool'

我怎么解决这个问题？帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:42:36.277

```
if( StkProgressbar.Visibility == Visibility.Visible)
{
  //U used '=' instead of '==' :)
} 
```

# syntax - 想写一个IF条件语句

> ID：13878848
> 
> 赞同：-3
> 
> 时间：2012-12-14T12:37:00.300
> 
> 标签：syntax, if-statement, esoteric-languages, dog

如何用[DOG](http://esolangs.org/wiki/DOG)语言编写`IF`条件语法。我不知道如何编写条件语法。有任何想法吗。`IF`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T12:51:17.807

从您的维基百科链接：

> 任何命令前面都可以有一个数字或变量（dishx、platex 或 floor）...但是如果一个 plate 变量在一个命令之前，则该命令仅在板块上的 cookie 数量不为 0 的情况下执行一次。

因此，命令前面的板变量充当 if 语句。这相当于用“真正的”编程语言编写这样的东西：

```
if (plate > 0) { do this command } 
```

如果您希望许多命令以您的`if`语句为条件，那么您必须将它与`jump`命令结合起来。

# sql-server - 设置报告日期参数

> ID：13878851
> 
> 赞同：1
> 
> 时间：2012-12-14T12:37:14.277
> 
> 标签：sql-server, visual-studio, reporting-services

我有一个在 SQL Server 2005 DB 上运行的 Visual Studio 编写的报告。我希望它自动应用前一天的日期 - 从 00:00:00 开始，到 23:59:59 结束

从我的图片中，我使用的代码是 =DateAdd(Dateinterval.day, -1, Now()) 作为开始日期

对于结束日期，我使用 =Now()

这些值让我获得了过去 24 小时的报告，但我想让报告仅在前一天的 24 小时内运行。我该怎么做？

![报告参数日期](../Images/d07031cf777d57e2b5e2c7fefb2761c4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:21:25.260

我认为你应该使用`Today()`而不是`Now()`.

两者都会给出今天的日期，但`Today()`不包括任何时间部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T00:54:14.763

您应该只使用一个日期参数是昨天`=DateAdd(DateInterval.Day, -1, Today())`。

然后要使用它，您的数据应仅截断为日期并过滤为等于此参数，仅获取昨天而不考虑时间。

# c# - 以用户方式检查来自 xml 的授权

> ID：13878861
> 
> 赞同：0
> 
> 时间：2012-12-14T12:37:39.127
> 
> 标签：c#, asp.net, xml, xmldocument

我有如下的xml：

```
<?xml version="1.0" encoding="utf-8" ?>
<menus>
  <menu name="WeightManagement">
    <user name="eu01\bsoni"></user>
    <user name="eu01\bve"></user>
  </menu>
  <menu name="CategoryManagement">
    <user name="eu01\bsoni"></user>
  </menu>
</menus> 
```

我有 Windows 身份验证并想检查用户“eu01\bve”是否有权访问体重管理或类别管理菜单。

如何从 xml 中随机检查菜单和用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:43:46.157

要获取用户可以访问的菜单：

```
var xDoc = XDocument.Load(xmlfile);

var menus = xDoc.XPathSelectElements(@"//user[@name='eu01\bve']")
                .Select(e => e.Parent.Attribute("name").Value)
                .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:49:09.170

你也可以做

```
var doc=XDocument.Load(yourXmlFile);
string access=doc.Descendants().Elements("user")
                 .Where(x=>x.Attribute("name").Value=="eu01\bve")
                                                       ---------
                 .First().Parent.Attribute("name").Value; 
```

# visual-studio - 在 Visual Studio 中按 F5 打开选定的文件

> ID：13878862
> 
> 赞同：0
> 
> 时间：2012-12-14T12:37:44.840
> 
> 标签：visual-studio

我有点犹豫是否将其作为一个问题发布，因为我确定我错过了一些明显的东西......

当我在 Visual Studio 2012 中按 F5 时，它会构建我的 Web 应用程序并在 IE 中使用解决方案资源管理器中当前选择的任何文件启动。因此，如果我选择了一个 html 文件，我将显示该 html 页面，或者如果我选择了一个 aspx 文件，那么它将尝试打开该特定页面。

当我按下 F5 时，我的预期行为是它将*运行应用程序*，而不是我可能正在处理的单个文件。因此，当我按 F5 时，我希望它构建并启动我的 Web 应用程序，该应用程序*设置*为启动项目 BTW。

所以要么我需要调整我的期望，要么我太厚了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:54:49.743

我不是很肯定我理解 - 您是否期望 Visual Studio 运行某种索引/登录/等。页面而不是您当前正在查看的内容？

如果是这样：

1.  右键单击项目
2.  选择属性
3.  选择网站
4.  设置具体页面

# javascript - 画布脚本不输出任何东西

> ID：13878863
> 
> 赞同：0
> 
> 时间：2012-12-14T12:37:46.317
> 
> 标签：javascript, canvas

从我的角度来看，我正在以正确的方式做任何事情。当页面加载时我开始我的脚本，我的语法没问题。我想的问题是init函数没有加载，有人能指出我在哪里犯了错误吗？

```
var canvas;
    var ctx;
    var x = 75;
    var y = 50;
    var r = 100;
    var width = 400;
    var height = 300;
    var drag = false;

    addEventListener("load",windowLoaded,false);

    function windowLoaded(){
        init();
        console.log("beertje");
    }

    function init() {
     canvas = document.getElementById("canvas");
     ctx = canvas.getContext("2d");
     return setInterval(Circle, 10);
     canvas.onmousedown = myDown;
     canvas.onmouseup = myUp;
     console.log("beertje");

    }

    function Circle(x,y,r) {
     ctx.beginPath();
     ctx.arc(x,y,r,0,Math.PI,true);
     ctx.closePath();
     ctx.fill();
     }

     function draw() {
     clear();
     arc(x,y,r,0,Math.PI,true);
     ctx.fillStyle = "#444444";
     arc(x - 15, y - 15, r, 0, Math.PI, true);
    }

    function myMove(e){
     if (drag){
      x = e.pageX - canvas.offsetLeft;
      y = e.pageY - canvas.offsetTop;
     }
    }

    function myDown(e){
     if (e.pageX < x + 15 + canvas.offsetLeft && e.pageX > x - 15 +
     canvas.offsetLeft && e.pageY < y + 15 + canvas.offsetTop &&
     e.pageY > y -15 + canvas.offsetTop){
      x = e.pageX - canvas.offsetLeft;
      y = e.pageY - canvas.offsetTop;
      drag = true;
      canvas.onmousemove = myMove;
     }
    }

    function myUp(){
     drag = false;
     canvas.onmousemove = null;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:12:30.027

代码中的第一个问题是不带参数的`setInterval()`调用。`Circle()`尽管如此，还是有 global和`x`，它们并没有在里面定义，因为它的同名参数会影响全局变量。（[功能范围](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Functions#Function_scope)）`y``r``Circle()`

但是，您可以将这些全局值传递给`Circle()`这样的：

```
 return setInterval(function () {
            Circle(x, y, r);
        }, 10); 
```

但这是非常消耗内存的代码，因为每秒绘制同一个圆圈 100 次，所以几分钟后屏幕上就会出现大量圆圈......我建议你只在事件处理程序中绘制圆圈，没有任何计时器。

也不需要将此间隔返回到任何地方（除非这只是您的代码的一部分，并且在 中有一个接收器`windowLoaded()`）。

由于“额外” `return`，事件处理程序分配`init()`是无用的，因为`return`上面会将执行移回`windowLoaded()`. 因此，函数的其余部分将永远不会被执行。我建议您将`return`（目前无用）或整行移动到函数的末尾。

# xaml - 如何在 XAML、Windows 8 的魅力栏中设置设置属性？

> ID：13878864
> 
> 赞同：3
> 
> 时间：2012-12-14T12:37:56.097
> 
> 标签：xaml, windows-8, settings, charms-bar

我试图让魅力栏在 Windows 8 中工作，但我无法使用谷歌找到任何东西。

我想要的是让用户通过魅力栏访问设置和隐私政策。

我都准备好了：

```
 public MainPage()
    {
        this.InitializeComponent();
        SettingsPane.GetForCurrentView().CommandsRequested += MainPage_CommandsRequested;
    }

    void MainPage_CommandsRequested(SettingsPane sender, SettingsPaneCommandsRequestedEventArgs args)
    {
        args.Request.ApplicationCommands.Add(new SettingsCommand("commandid", "Settings", DoOperation));
    }

    private async void DoOperation(IUICommand command)
    {
        //Show the Settings or Privacy Policy HERE!
    } 
```

我不知道如何让我的设置代替：//在此处显示设置或隐私政策！

任何帮助或更确切地说是代码示例都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T13:40:54.883

最好将代码放在 App.xaml.cs 中，这是一个工作示例：

```
protected async override void OnLaunched(LaunchActivatedEventArgs args)
{ /....
   SettingsPane.GetForCurrentView().CommandsRequested += OnCommandsRequested;
   //before if (!rootFrame.Navigate(typeof...
}
void OnCommandsRequested(SettingsPane sender, SettingsPaneCommandsRequestedEventArgs args)
    {
          var privacy =  new SettingsCommand("privacyPref", "Privacy Plicy",
            (uiCommand) => { Windows.System.Launcher.LaunchUriAsync(new Uri("http://YOURURL.COM")); });
        args.Request.ApplicationCommands.Add(privacy);
        var preferences = new SettingsCommand("preferences", "Preferences", (handler) =>
        {
            var settings = new SettingsFlyout(); //Callisto extension
            settings.Content = new PreferencesUserControl(); //Add New Element->User Control
            settings.HeaderBrush = new SolidColorBrush(_background);
            settings.Background = new SolidColorBrush(_background);
            settings.HeaderText = "Preferences";
            settings.IsOpen = true;
        });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:24:44.197

这是[App Setting](http://code.msdn.microsoft.com/windowsapps/app-settings-sample-1f762f49)的示例。

当您完全理解这一点后，您可以尝试理解[此示例](http://code.msdn.microsoft.com/windowsapps/CharmFlyout-A-Metro-Flyout-25fe53b6)

这比上面的样本要好。与此示例相比，以上示例易于理解

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-29T00:05:13.953

关于设置/关于实现有很多问题。这是我发现的最简单的 [http://blog.jerrynixon.com/2012/08/how-to-create-windows-8-settings-pane.html](http://blog.jerrynixon.com/2012/08/how-to-create-windows-8-settings-pane.html)

# caching - Ehcache 和 Apache JCS - 这是如何工作的？

> ID：13878866
> 
> 赞同：0
> 
> 时间：2012-12-14T12:38:03.917
> 
> 标签：caching, ehcache, lru, jcs

我需要 Lru 缓存来存储几个（~100）大对象（例如~10MB）。我阅读了 Ehcache 和 JSC 并有一个问题。我有一个案例：我在 ehcache 中存储了 10 个对象。然后我从他们那里得到一个并分配给参考。我的引用对象和缓存中的数据是否重复或指向 JVM 内存中的同一对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T21:21:19.113

如果您只创建一个指向您的大对象的新引用，则不会创建新对象。

您可以通过在所有对象构造函数中放置一个日志记录语句来轻松证明这一点。

# mysql - 使用 Codeigniter 活动记录重写 MySQL 查询

> ID：13878868
> 
> 赞同：0
> 
> 时间：2012-12-14T12:38:08.537
> 
> 标签：mysql, codeigniter, activerecord, codeigniter-2

我不久前开始使用 CodeIgniter。有人能告诉我如何重写这个查询吗

```
SELECT question.timestamp AS question_time, reply.timestamp AS reply_time, 
(SELECT DATEDIFF(reply_time, question_time)) AS time_used_to_reply 
FROM question JOIN reply ON question.id = reply.question_id WHERE question.company_id=someid 
```

使用活动记录

此外，任何快速理解 activerecord 的教程都将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:13:10.227

经过多次研究，我最终编写了自己的活动记录脚本。

```
$this->db->select(array('DATEDIFF(reply.timestamp, question.timestamp)'))
    ->from('question')
    ->join('reply', 'question.id = reply.question_id')
    ->where('question.company_id', $company_id); 
```

谢谢

# javascript - jqGrid：使用单元格编辑编辑多个单元格

> ID：13878872
> 
> 赞同：0
> 
> 时间：2012-12-14T12:38:32.670
> 
> 标签：javascript, jquery, jqgrid

我有个问题。我正在为 jqGrid 使用单元格编辑。我不希望将其更改为内联编辑，因为我需要保持这种状态，一次只允许编辑一个单元格。

问题是我有一个字段，在被编辑后，需要强制编辑其他单元格。因此，如果用户将第一个单元格更改为某个值，我需要打开这些单元格进行编辑。

有没有办法做到这一点？我尝试过使用 .jqGrid('editCell',...)，但这样我一次只能使用一个单元格。而且我不能要求必须编辑下一个单元格以强制编辑第三个和最后一个单元格，因为可能会发生用户想要单独编辑第二个单元格，这应该会导致这种行为。

有什么办法可以做到这一点？

谢谢

**更新**：

为了更清楚地说明这一点，我将举一个例子。假设您有一张表格，列出了您附近的人拥有的汽车。它有 4 个单元格：

ID - CarCompany - 型号 - 年份

其中 ID 是一些标识字段，CarCompany 是制造汽车的公司的名称，Model 是型号的名称，Year 是年份的型号。

因此，例如，您有以下记录：

0 - 福特 - 福克斯 - 2010

1 - 凯迪拉克 - 凯雷德 - 2004

2 - 兰博基尼 - 暗黑破坏神 - 2012

车主可以换车。他们可以更改年份，这不应更改任何其他单元格（因为他们将汽车更改为当前汽车的较新版本），并且他们可以将模型更改为同一年份的另一辆。但是，如果他们从另一家公司换车，您必须更新型号和年份（假设您必须更改年份）。所以：

*   如果您更改年份，那是您必须更改的唯一单元格
*   如果您更改模型，那是您必须更改的唯一单元格
*   但是，如果您更改 CarCompany，则必须编辑 Model 和 Year。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:09:24.003

如果我理解纠正您的问题，您可以使用`afterSaveCell`回调或其他更符合您要求的方法（请参阅[此处](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acell_editing#event_calling_stack)）。您可以测试修改了哪一列并`editCell`显式调用以建议编辑依赖的单元格。可能您可以使用额外的自定义验证规则（参见[此处](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acommon_rules#custom_checking_example)）来确保用户确实将依赖单元格修改为正确的值。

**更新**：[演示](http://www.ok-soft-gmbh.com/jqGrid/DependentCellEditng.htm)展示了如何在回调`editCell`内部`afterSaveCell`调用以实现所需的行为。您将在下面找到演示代码中最重要的部分：

```
var carCompanyEditingMode = false;

$("#list").jqGrid({
    ...
    afterSaveCell: function (rowid, cellname, value, iRow, iCol) {
        var $this = $(this), editedColName = this.p.colModel[iCol].name;
        if (editedColName === "carCompany") {
            setTimeout(function () {
                $this.jqGrid("editCell", iRow, iCol + 1, true);
            }, 50);
            carCompanyEditingMode = true;
            return;
        }
        if (carCompanyEditingMode && editedColName === "model") {
            setTimeout(function () {
                $this.jqGrid("editCell", iRow, iCol + 1, true);
            }, 50);
            return;
        }
        if (carCompanyEditingMode && editedColName === "year") {
            carCompanyEditingMode = false;
        }
    },
    beforeSelectRow: function () {
        // don't allow editing of another row if 
        // the carCompanyEditingMode is true
        return !carCompanyEditingMode;
    },
    afterRestoreCell: function (rowid, value, iRow, iCol) {
        var $this = $(this);
        if (carCompanyEditingMode) {
            // continue editing of the same cell
            setTimeout(function () {
                $this.jqGrid("editCell", iRow, iCol, true);
            }, 50);
        }
    }

}); 
```

# android - 消息处理程序创建的 SimpleCursorAdapter ListView

> ID：13878880
> 
> 赞同：0
> 
> 时间：2012-12-14T12:38:55.103
> 
> 标签：android, listview, simplecursoradapter

我已经阅读了所有我能找到的关于 simplecursoradapter 和 listview 的帖子，但我似乎仍然找不到我的问题的答案。我有一个包含许多单选按钮、一个按钮和一个列表视图的活动。Activity 首先向 Web 服务器发出 http 请求以检索一些数据。来自服务器的数据被写入设备上的 sqlite db。将数据写入数据库后，Activity 重新获得控制权并从数据库创建一个 Cursor、一个 SimpleCursorAdapter 并将适配器设置为列表视图适配器。所有数据都已正确写入数据库，我已经遍历了游标中的元素，它包含所有预期的元素，但我的列表视图中仍然没有显示任何元素。

活动.java：

```
public class MyActivity extends Activity {
private RadioButton rb1, rb2;
private Button addBut;
private ListView lv;
private LinearLayout statusLayout;
private ScrollView scroll;
private String username;
private DBHelper db;
private Cursor cursor;
private static final String userfk = "1";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mylayout);

    rb1 = (RadioButton)findViewById(R.id.rb1);
    rb1.setChecked(true);
    rb2 = (RadioButton)findViewById(R.id.rb2);
    addBut = (Button)findViewById(R.id.addButton);
    statusLayout = (LinearLayout)findViewById(R.id.statusLayout);
    scroll = (ScrollView)findViewById(R.id.configscroll);
    lv = (ListView)findViewById(R.id.profilesll);
    //get data from server, made in asynchtask   
    getData();
} 
```

从 AsynchTask 代码调用的 MessageHandler：

```
private class MyHandler extends Handler {
public MyHandler() {
}
public void handleMessage(Message msg) {
        final Bundle b = msg.getData();
        if (b.getString("result").equalsIgnoreCase(MyResult.ERROR) || b.getString("result").equalsIgnoreCase(MyResult.FAIL)) {
                 //Handle error
        } else {
            handleList();
            statusLayout.setVisibility(View.GONE);
            scroll.setVisibility(View.VISIBLE);
        }
    }
}

private void handleList() {
    if (db == null) {
        db = new DBHelper(this);
    }
    if (cursor == null) {
        try {
            cursor = db.getListCursor(userfk);
        } catch (Exception e) {
            err = e.getMessage();
        }
        if (cursor == null) {
       Toast.makeText(MyActivity.this, err != null ? err : getResources().getString(R.string.myerror), Toast.LENGTH_LONG).show();
        } else {
            try {
                SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, cursor, new String[] {DBHelper.COLUMN_ID}, new int[] {android.R.id.text1});
                lv.setAdapter(adapter);
            } catch (RuntimeException e) {
                Log.e("test", e.getMessage());
            } catch (Exception e) {
                Log.e("test", e.getMessage());
            }
        }
    }
} 
```

DBHelper 类

```
public Cursor getListCursor(String userfk) throws Exception {
    StringBuilder builder = new StringBuilder("select name as _id from mytable where  userfk=?");
    List<String> values = new ArrayList<String>();
    values.add(userfk);
    try {
        return this.getReadableDatabase().rawQuery(builder.toString(), values.toArray(new String[values.size()]));
    } catch (Exception e) {
        Log.d("test", e.getMessage());
        throw e;
    }
} 
```

我希望有人能给我提示我做错了什么！谢谢你的帮助！

# asp.net - 在运行时自动格式化 gridview(Asp.net)

> ID：13878881
> 
> 赞同：-3
> 
> 时间：2012-12-14T12:38:55.677
> 
> 标签：asp.net, gridview, drop-down-menu

如何在运行时**格式化in asp.net。****`gridview`**使用`autoformat template`?

例如，下拉列表中有一个`gridview control`和 ，是`dropdown list`自动格式化模板。

我需要`gridview`通过从下拉列表中选择来更改设计，或者甚至有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:51:47.353

首先，仔细阅读[`GridView Examples for ASP.NET 2.0: Formatting the GridView`](http://msdn.microsoft.com/en-us/library/aa479342.aspx)。然后，在您的下拉列表`OnSelectedIndexChanged`事件中，您可以格式化您想要的单元格或列。

```
<asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True"
 OnSelectedIndexChanged="DropDownList1_OnSelectedIndexChanged"> 
```

[`Accessing a DropDownList inside a GridView`](http://www.codeproject.com/Articles/53559/Accessing-a-DropDownList-inside-a-GridView)

# c - 不使用除法运算符将数字除以 5

> ID：13878883
> 
> 赞同：0
> 
> 时间：2012-12-14T12:39:07.680
> 
> 标签：c, algorithm, math

> **可能重复：**
> [使用按位运算符实现](https://stackoverflow.com/questions/5284898/implement-division-with-bit-wise-operator)
> [除法将一个数字除以 3，而不使用 *、/、+、-、% 运算符](https://stackoverflow.com/questions/11694546/divide-a-number-by-3-without-using-operators)

我在一次采访中遇到了这个问题。我想知道是否有任何方法可以在不使用除法运算符的情况下将数字除以 5，以及是否存在仅使用按位运算符的任何可能的解决方案。我想出了一个使用重复减法直到零方法的方法。号码可以有符号和无符号。请提出任何不使用 +、-、/、* 和 % 的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:52:32.357

我似乎已经从这个链接中找到了一条出路，这似乎为我的问题提供了答案。 [http://codegambler.wordpress.com/2009/08/11/division-operation-without-using-division-operator/](http://codegambler.wordpress.com/2009/08/11/division-operation-without-using-division-operator/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:42:56.820

我的第一个想法是乘以 0.2（但我不知道如何使用我脑海中的按位运算符来实现它的解决方案）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T12:43:57.680

只需将除法减少为从另一个数字中减去一个数字，直到达到零：D

```
int number = 25;
int divisor = 5;
int result = 0;
while((number-divisor)>=0){
  result++;
  number = number - divisor;
} 
```

# css - 如何在 Go、Google App Engine 中使用外部 CSS 和（静态）图像

> ID：13878887
> 
> 赞同：2
> 
> 时间：2012-12-14T12:39:10.563
> 
> 标签：css, image, google-app-engine, go

我正在使用 Go 制作网页。Go 代码使用“html/template”来解析 HTML。我想在项目中使用 CSS。当我使用内部 CSS 代码时，一切都运行良好，但当我想更改为外部 CSS 代码时，它就不起作用了。看起来它无法访问 .css 文件。

这是我的 app.yaml 配置：

```
application: makerboardstest
version: 1
runtime: go
api_version: go1

handlers:
- url: /.*
  script: _go_app

- url: /stylesheets
  static_dir: stylesheets

- url: /images
  static_dir: images 
```

这是我想从 html 访问 .css 的方式：

```
<head>
<link href="/stylesheets/main.css" media="screen" rel="Stylesheet" type="text/css" />
</head> 
```

我也有（静态）图像的问题。我想用这个 html 代码访问图像：

```
<img src="/images/img1.jpg" /> 
```

可能是什么问题？

（我在我的电脑上测试它，Win 7）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T12:46:05.093

处理程序按顺序检查，您的第一个处理程序匹配所有内容；将您的静态处理程序向上移动。换句话说，当您的浏览器发出对 的请求时`/stylesheets/main.css`，它会匹配`/.*`您的第一个处理程序的模式并要求 go 为它提供服务，而不是尝试静态目录。如果您翻转处理程序的顺序，它将`/stylesheets`首先匹配并从静态目录提供它。

IE：

```
handlers:
- url: /stylesheets
  static_dir: stylesheets

- url: /images
  static_dir: images 

- url: /.*
  script: _go_app 
```

# zend-framework - Zend_Soap_Server 过程 'sendsth' 不存在

> ID：13878888
> 
> 赞同：1
> 
> 时间：2012-12-14T12:39:12.980
> 
> 标签：zend-framework, wsdl, soaplite

我们有一个 Zend_Soap_Server 和一个相应的客户端，它们基于相同的 WSDL，如果从 PHP 客户端调用方法“sendsth”，则可以正确处理。

现在我需要从 perl 中调用它，因此我使用 SOAP::Lite 创建了一个客户端，再次使用相同的 WSDL。当我从客户端调用该方法时，我在服务器中收到错误：

PHP 致命错误：/usr/local/zend/share/ZendFramework/library/Zend/Soap/Server.php 中不存在过程“sendsth”

您知道可能出了什么问题或如何调试吗？

有趣的方面：​​即使我将对 $server->handle() 的调用包装在 try/catch 块中，程序也会在那里崩溃

# java - Solr 4.0 和 ResourceLoader：getLines 未定义

> ID：13878890
> 
> 赞同：1
> 
> 时间：2012-12-14T12:39:22.500
> 
> 标签：java, solr, lucene, solrj, solr4

我正在将一个在 Lucene 3.6 上开发的插件翻译成 Lucene 4.0，但我在使用 ResourceLoader 时遇到了很多麻烦。

我已将与 ResourceLoader 相关的导入更改为：

```
 import org.apache.solr.common.ResourceLoader;
   import org.apache.solr.util.plugin.ResourceLoaderAware; 
```

到：

```
 import org.apache.lucene.analysis.util.ResourceLoader;
   import org.apache.lucene.analysis.util.ResourceLoaderAware; 
```

但是在通知方法中：

```
public void inform(ResourceLoader loader) { 
```

当我尝试使用 getLines 函数时：

```
List list = loader.getLines("file"); 
```

我收到以下错误：

> 类型 ResourceLoader 的方法 getLines(String) 未定义

我究竟做错了什么？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:07:43.717

在 Lucene 4.0 中，getLines 不必作为 ResourceLoader 的方法调用。

在这里你可以看到一个[例子](http://svn.apache.org/repos/asf/lucene/dev/branches/branch_4x/lucene/analysis/common/src/java/org/apache/lucene/analysis/miscellaneous/StemmerOverrideFilterFactory.java)。

# php - 如何在此代码中添加分页

> ID：13878891
> 
> 赞同：-4
> 
> 时间：2012-12-14T12:39:23.073
> 
> 标签：php, mysql, pagination

如何在此代码中添加分页？

我想在一页中限制数据，我想在底部：

```
1 2 3 4 5 6 8 9 10 
```

如果我点击，`page 2`那么我的更多结果会显示在该页面上。

我怎么能那样做？

```
<?php

 //connect to database

     mysql_connect('localhost','root','pasword');
     mysql_select_db('root');

/* Get the letter user clicked on and assign it a variable called $sort */
$sort = $_REQUEST['letter'];

/* Let's check if variable $sort is empty. If it is we will create a query to display all customers alphabetically ordered by last name. */
if($sort == ""){

$qry= "SELECT * FROM tree ORDER BY keywords ASC " ;
}else{
/* if varible $sort is not empty we will create a query that sorts out the customers by their last name, and order the selected records ascendingly. */
$qry = "SELECT * FROM tree WHERE keywords LIKE '$sort%' ORDER BY keywords ASC" ;
}
/* Notice the use of '%' wilde card in the above query  "LIKE '$sort%'". */

//next step is to execute the query.
$execute = mysql_query($qry) or die(mysql_error());

/* Before we display results let's create our alphabetical navigation. The easiest way to create the navigation is to use character codes and run them through the "for" loop. */
echo "<p>" ;
for ($i = 65; $i < 91; $i++) {
    printf('<a href="%s?letter=%s">%s</a> | ',
    $PHP_SELF, chr($i), chr($i));
}
echo "</p>" ;

/* now we are ready to display the results. Since out tbl_customers table has only three fileds we will display the results in a paragraphs. In the real world you may need to display the results in a table.
To display the results we will use "do while" loop to fetch the results. If no customers are found we will display an error message. */
if(mysql_num_rows($execute)>0){
do{
echo "<p>" .$result['id']. " " .$result['keywords']. " " .$result['meaning']. "</p>" ;
}while($result = mysql_fetch_assoc($execute));
}else{
echo "<p>No customer found.</p>" ;
} 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:05:48.520

首先选择no of datas to generate page numbers by total_number of rows by no of pages per page

```
mysql_num_rows($execute); 
```

使用limit命令来限制这样的数据

```
$qry= "SELECT * FROM tree ORDER BY keywords ASC limit 0,10 " ; 
```

然后对于每个页码增加限制索引

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:39:25.480

您可以使用以下代码

```
$page = $_GET['page'];

if ($page < 1)  
{       
   $page = 1;
}

$conc=mysql_connect('localhost','root','');
mysql_select_db('employer',$conc);

$resultsPerPage = 5; 

$startResults = ($page - 1) * $resultsPerPage;

$query = mysql_query('SELECT * FROM employee ') or die(mysql_error());

$numberOfRows=mysql_num_rows($query);

$totalPages = ceil($numberOfRows / $resultsPerPage);

$query = mysql_query("SELECT * FROM employee LIMIT $startResults,$resultsPerPage");

while ($output = mysql_fetch_assoc($query))
{
$result[]=$output;
}

for($i = 1; $i <= $totalPages; $i++)
{

    if($i == $page)
    echo '<strong>'.$i.'</strong>&nbsp';
else
    echo '<a href="?page='.$i.'">'.$i.'</a>&nbsp';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-02T02:48:11.807

```
$page = intval(abs($_GET['page'])); // get security ONE

if(mysql_num_rows($sql)) // get page number to empty location index.php
{
    header('Location: index.php');
} 
```

# django - Django Admin：使用类进行批量管理操作

> ID：13878894
> 
> 赞同：0
> 
> 时间：2012-12-14T12:39:33.217
> 
> 标签：django, django-admin

我一直在尝试在 Django 中自动创建一系列管理操作。

基本上我想创建批量更改项目对象上的状态字段的可能性。状态字段是一个外键字段。

我认为制作这样的课程会起作用：

```
class StatusAction(object):

    def __init__(self,status):
         self.status = status

    def make_action(self, modeladmin, request, queryset):
        self.queryset = queryset.update(status=self.status)

    make_action.short_description = "Change status to '%s' for selected projects" % status 
```

然后声明如下操作：

```
actions = [StatusAction(s.id).make_action for s in Status.objects.all()] 
```

我遇到两个问题：

*   Admin 界面中只有一个动作结束（最后一个被取消）。
*   make_action.short_description 属性具有类范围，因此我无法针对每个实例进行具体说明。将 self.make_action.short_description 放入 make_action 也不起作用。

我还尝试使用闭包（函数中的函数）来执行此操作。它解决了功能问题的属性，但仍然只有一个操作最终在管理员中结束。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T15:05:32.450

据我了解，动作函数应该有不同的名称：

```
def create_action(status):
    def action_func(modeladmin, request, queryset):
        print status
    action_func.__name__ = 'make_action_%d' % status.id
    action_func.short_description = "Change status to '%s' for selected projects" % status
    return action_func

actions = []
for s in Status.objects.all():
    actions.append(create_action(s)) 
```

# android - 使用 UV 纹理解析 .obj 文件

> ID：13878899
> 
> 赞同：0
> 
> 时间：2012-12-14T12:39:55.757
> 
> 标签：android, opengl-es, textures

## 底线在前面

在立方体的每一侧使用我的 3D 对象（例如立方体）1 三角形正在正确渲染，而另一侧则没有。

## 概述

我正在尝试将在 Blender 中创建的 3D 对象导入我的 Android OpenGL 世界。

我编写了自己的自定义解析器来读取顶点、索引以及现在的纹理坐标。我可以很好地读取所有数据，并且没有纹理，形状很完美。问题是当我尝试读取纹理坐标时，在每个面上，一个三角形都非常糟糕，而其中一个三角形被正确渲染。

我相信这与在搅拌机中如何生成纹理坐标有关。我注意到在`f 1/1 2/2 3/3 4/4`列出“纹理索引”的文件部分中，它们没有按照纹理列出的顺序排列。这可能是问题吗？如果我按照列出纹理索引的顺序构建纹理缓冲区会有帮助吗？

## 我的 .obj 文件

```
# Blender v2.63 (sub 0) OBJ File: ''
# www.blender.org
mtllib untitled.mtl
o Cube
v 1.000000 -1.000000 -1.000000
v 1.000000 -1.000000 1.000000
v -1.000000 -1.000000 1.000000
v -1.000000 -1.000000 -1.000000
v 1.000000 1.000000 -0.999999
v 0.999999 1.000000 1.000001
v -1.000000 1.000000 1.000000
v -1.000000 1.000000 -1.000000
vt 0.000000 0.334353
vt 0.332314 0.333333
vt 0.333333 0.665647
vt 0.001020 0.666667
vt 1.000000 0.001019
vt 0.998981 0.333333
vt 0.666667 0.332314
vt 0.667686 0.000000
vt 1.000000 0.665647
vt 0.667686 0.666667
vt 0.666667 0.334353
vt 0.334353 0.666667
vt 0.333333 0.334353
vt 0.665647 0.333333
vt 0.666667 0.665647
vt 0.333333 0.332314
vt 0.001020 0.333333
vt 0.000000 0.001020
vt 0.332314 0.000000
vt 0.333333 0.001019
vt 0.665647 0.000000
vt 0.334353 0.333333
usemtl Material_golden_fur_by_Dwaoviel.jpg
s off
f 1/1 2/2 3/3 4/4
f 5/5 8/6 7/7 6/8
f 1/6 5/9 6/10 2/11
f 2/12 6/13 7/14 3/15
f 3/16 7/17 8/18 4/19
f 5/20 1/21 4/7 8/22 
```

## 我的解析器方法

```
public static Mesh createMesh(int resourceID)
{
    Mesh m = new Mesh();
    Scanner s;
    BufferedReader inputStream = null;

    ArrayList<Float> floats = new ArrayList<Float>();
    ArrayList<Short> indicies = new ArrayList<Short>();
    ArrayList<Float> textures = new ArrayList<Float>();
    ArrayList<Short> texturesindex = new ArrayList<Short>();
    try
    {
        inputStream = new BufferedReader(new InputStreamReader(context.getResources().openRawResource(resourceID)));
        s = new Scanner(inputStream);
        String line = inputStream.readLine();
        line = inputStream.readLine();
        line = inputStream.readLine();
        line = inputStream.readLine();
        line = inputStream.readLine();
        while(line.charAt(0) == 'v'&&line.charAt(1)!='t')
        {
            s = new Scanner(line);
            s.next();
            floats.add(s.nextFloat());
            floats.add(s.nextFloat());
            floats.add(s.nextFloat());
            line = inputStream.readLine();
        }
        while(line.charAt(0)=='v' && line.charAt(1)=='t')
        {
            s = new Scanner(line);
            s.next(); //read in "vt"
            textures.add(s.nextFloat());
            textures.add(s.nextFloat());
            line = inputStream.readLine();
        }
        line = inputStream.readLine();
        line = inputStream.readLine();
        while(line != null && line.charAt(0) == 'f')
        {
            s = new Scanner(line);
            s.useDelimiter("[ /\n]");
            String xx = s.next();
            int a,b,c,d;
            int e,f,g,h;

            a = s.nextShort();

            e = s.nextShort();

            b = s.nextShort();

            f = s.nextShort();

            c = s.nextShort();

            g = s.nextShort();

            d = s.nextShort();

            h = s.nextShort();

            indicies.add((short)a);
            indicies.add((short)b);
            indicies.add((short)c);
            indicies.add((short)a);
            indicies.add((short)c);
            indicies.add((short)d);
            line = inputStream.readLine();
        }       
        float[] vertex = new float[floats.size()];
        for(int i=0;i<vertex.length;i++)
        {
            vertex[i] = floats.get(i).floatValue();
        }
        short[] ind = new short[indicies.size()];
        for(int i=0;i<ind.length;i++)
        {
            ind[i] = (short) (indicies.get(i).shortValue()-1); //minus one because its 1 based in that program
        }
        float[] texture = new float[floats.size()];
        for(int i=0;i<texture.length;i++)
        {
            texture[i] = textures.get(i).floatValue();
        }
        m.constructVertexBuffer(vertex);
        m.constructIndexBuffer(ind);
        m.constructTextureBuffer(texture);

    } 
    catch (FileNotFoundException e)
    {
        e.printStackTrace();
    } 
    catch (IOException e)
    {
        e.printStackTrace();
    }

    return m;
} 
```

请注意，此方法基本上将尽可能多的纹理 uv 坐标读入数组列表，然后填充浮点数组，然后调用构造纹理缓冲区方法，该方法执行 OpenGL 所需的所有 ByteBuffer/FloatBuffer 内容。

## 我的构造方法

```
public void constructTextureBuffer(float[] texture)
{
    ByteBuffer vbb = ByteBuffer.allocateDirect(texture.length*4);
    vbb.order(ByteOrder.nativeOrder());
    textureBuffer = vbb.asFloatBuffer();
    textureBuffer.put(texture);
    textureBuffer.position(0);
} 
```

有人对我可以尝试解决的问题有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:08:59.080

我不确定我是否正确阅读了您的代码，但我认为问题在于解析面部命令（`'f'`字符）。如果您查看[OBJ 规范或](http://www.martinreddy.net/gfx/3d/OBJ.spec)[wiki](http://en.wikipedia.org/wiki/Wavefront_.obj_file)上关于 obj 格式的文章，则 face 命令是格式（在您的情况下）`f v1/vt1 v2/vt2 v3/vt3 ...`，这意味着首先是顶点坐标索引（进入您先前加载的顶点坐标列表），`'/'`然后是纹理坐标索引（到您之前加载的纹理坐标列表中）。`'f'`命令创建一个面（三角形、四边形等） 后，一行上的所有这些顶点。

纹理数组（列表）的索引是否与之前声明的顺序相同也没关系，它只是索引（0 <= 索引 < 列表大小）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:49:13.793

有一些很好的适用于 Android 的 FOSS OpenGL 引擎。虽然我不能给你一个你的代码没有运行的确切原因，但我知道 Rajawali 的 OBJ 解析器做得很好，尤其是从 Blender 导出的模型。也许你可以在他们的代码中找到一些线索：

[https://github.com/MasDennis/Rajawali/blob/master/src/rajawali/parser/ObjParser.java](https://github.com/MasDennis/Rajawali/blob/master/src/rajawali/parser/ObjParser.java)

编辑：我还应该补充一点，即使在拉贾瓦里，我通常也必须从我的 OBJ 中删除两行，如下所示： `usemtl Material_golden_fur_by_Dwaoviel.jpg`和 `s off`

也许您的解析器也不能很好地处理这些？

# git - git cherry-pick 到另一个分支

> ID：13878904
> 
> 赞同：29
> 
> 时间：2012-12-14T12:40:10.487
> 
> 标签：git, branch, cherry-pick

我想知道是否有办法在不签出该分支的情况下将一个提交复制到另一个分支。

例如，我有两个分支：`master`和`parallel_version`.

我在`parallel_version`分支上，我在这些分支的通用文件中发现了一个错误。

我已经修复并承诺了。假设我使用的是 git-svn，如何将此提交复制到另一个分支？

通常我会这样做：

```
$ git checkout master
$ git cherry-pick parallel_version
$ git checkout parallel_version 
```

有更好的方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T12:43:26.897

这是不可能的——想象一下如果发生无法自动解决的冲突会发生什么。出于同样的原因，您也不能更新当前未签出的分支（即使可以进行快进）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-16T04:33:25.983

[https://github.com/lennartcl/gitl](https://github.com/lennartcl/gitl)提供了“git cherry-copy”和“git cherry-move”脚本来执行此操作并处理大多数极端情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-07T13:47:38.067

疯狂的想法（基于*mnaoumov*的评论）如果你真的想避免接触签出的文件（说你不想打扰你的构建系统）......这就是我想要的。

1.  将整个 git repo 克隆到一个临时目录。
2.  在克隆中完成工作。
3.  将克隆添加为远程。
4.  `git fetch clone && git branch mybranch clone/mybranch -f`
5.  清理。

这将是一件自动化的事情。如果你有文件系统快照，那么克隆整个 repo 很便宜——毕竟也许没那么疯狂……</p>

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-16T09:36:37.547

[根据 user2394284](https://stackoverflow.com/a/49153481/745903)的建议，这是一个创建存储库临时克隆的小脚本：

[`/usr/bin/git-tmp-clone`或者`~/bin/git-tmp-clone`]

```
#!/bin/bash

gitTopLevel=$(git rev-parse --show-toplevel)

# Unique name for the temporary clone.
totalhash=$(tar -c "$gitTopLevel/.git" 2> /dev/null | sha256sum | head -c8)

tmprepo="/tmp/$(basename $(pwd))_${totalhash}"

git clone "$gitTopLevel" ${tmprepo}

# Start an interactive shell in the clone. Pass any
# arguments as initial commands to be executed.
/bin/bash --init-file <(echo "cd ${tmprepo}; $@")

# Clean up the clone.
rm -rf ${tmprepo} && echo "Deleted ${tmprepo}" 
```

（这个脚本不太健壮，但它似乎在 Ubuntu 上对我有用。）

您可以使用它来挑选例如当前分支上的最后一次提交到另一个分支，通过运行

```
git-tmp-clone "git checkout TARGET_BRANCH
            && git cherry-pick $(git rev-parse --short @)
            && git push origin HEAD" 
```

（请注意，在此示例中，在创建克隆之前在*原始*`rev-parse`存储库中评估！这就是它指向最近提交的原因。根据需要进行调整。）

# ios - 在我的 iOS 应用中实施新的 Google Maps SDK

> ID：13878905
> 
> 赞同：7
> 
> 时间：2012-12-14T12:40:16.180
> 
> 标签：ios, google-maps, google-maps-sdk-ios

更新：我刚刚收到来自 Google 的关于新的 Google Maps iOS SDK 的电子邮件。似乎一切都已经解决了。我已成功为我的应用创建新的 API 密钥！还没有测试它，但似乎是正确的。他们给我发了[这个](https://developers.google.com/maps/documentation/ios/start#the_google_maps_api_key)URL 页面。

## 祝你好运！

* * *

我从昨天开始尝试更改我的代码，以便能够使用 2 天前发布的新 Google Maps SDK。我已按照所有说明进行操作，但直到现在还没有实现显示它们。我已经请求了一个 API 密钥，但直到现在还没有任何回复。此外，我正在尝试从[Google API 控制台](https://code.google.com/apis/console "谷歌 APIS")获取 API 密钥，但在服务列表中我找不到*"Google Maps SDK for iOS"*。

其次，当我尝试运行我的应用程序（在模拟器上）时，屏幕是黑色的，我只能在左侧看到 Google 徽标（并按下它）。我在日志屏幕上收到这些消息：

```
2012-12-14 12:20:57.132 CoL[515:7a03] Google Maps SDK for iOS version: 1.0.1.1154
2012-12-14 12:20:57.132 CoL[515:7a03] New version of Google Maps SDK for iOS available: 1.0.1.1154
2012-12-14 12:20:57.192 CoL[515:c07] ClientParametersRequest failed, 3 attempts remaining. Error Domain=DASHConnectionError Code=100 "The operation couldn’t be completed. (DASHConnectionError error 100.)"
2012-12-14 12:20:57.242 CoL[515:c07] ClientParametersRequest failed, 2 attempts remaining. Error Domain=DASHConnectionError Code=100 "The operation couldn’t be completed. (DASHConnectionError error 100.)"
2012-12-14 12:21:01.291 CoL[515:c07] ClientParametersRequest failed, 1 attempts remaining. Error Domain=DASHConnectionError Code=100 "The operation couldn’t be completed. (DASHConnectionError error 100.)"
2012-12-14 12:21:09.314 CoL[515:c07] ClientParametersRequest failed, 0 attempts remaining. Error Domain=DASHConnectionError Code=100 "The operation couldn’t be completed. (DASHConnectionError error 100.)"
2012-12-14 12:21:13.339 CoL[515:c07] ClientParametersRequest failed, 3 attempts remaining. Error Domain=DASHConnectionError Code=100 "The operation couldn’t be completed. (DASHConnectionError error 100.)"
2012-12-14 12:21:13.363 CoL[515:c07] ClientParametersRequest failed, 2 attempts remaining. Error Domain=DASHConnectionError Code=100 "The operation couldn’t be completed. (DASHConnectionError error 100.)"
2012-12-14 12:21:17.386 CoL[515:c07] ClientParametersRequest failed, 1 attempts remaining. Error Domain=DASHConnectionError Code=100 "The operation couldn’t be completed. (DASHConnectionError error 100.)" 
```

**更新：**刚刚注意到项目无法在设备（iPhone 4S、iOS 6）上成功构建。我不知道这是否与我上面的问题有关，但这是错误：

```
ld: file is universal (2 slices) but does not contain a(n) armv7s slice: /Users/.../GoogleMaps.framework/GoogleMaps for architecture armv7s
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

以及我的架构部分的样子 ![在此处输入图像描述](../Images/bb7740066d38693c598f8f4ffbe23ecd.png)

有谁实现了它的工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T20:59:00.797

我有真正的答案。所以我也获得了对 SDK 的访问权限，但它仍然不适合我。它显示为一个灰色的地图，上面有一个别针。

修复步骤：

清理您的 Xcode 项目。重置 iOS 模拟器。关闭 Xcode 和模拟器。启动并运行。

显然要确保你的 api 在那里，否则它根本不起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T05:43:51.567

您需要一个 API 密钥才能使用新的谷歌地图 SDK。这是[他们页面](https://developers.google.com/maps/ios-access)中提到的。

> 感谢您对 iOS 版 Google Maps SDK 的关注。目前，我们正在申请访问 API 密钥。请在下面提供有关您的应用的详细信息。**当密钥可用时，我们将邮寄成功的申请者。**

所以你必须等到钥匙可用。

检查[这个谷歌地图起始页](https://developers.google.com/maps/documentation/ios/start)。您可以在那里注册您的项目，它将可用。

对于第二个问题，检查这个[文件是通用的（三个切片），但它不包含 iOS 上静态库的 (n) ARMv7-s 切片错误，无论如何要绕过？](https://stackoverflow.com/questions/12402092/file-is-universal-3-slices-but-does-not-contain-an-armv7s-slice-error-for-st). 您可能必须从项目中删除对 armv7s 的支持。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T05:54:29.063

就我而言，我花了四天时间才收到我的 iOS API 密钥的激活。

收到 Google 的邮件后，再次访问 API Services 页面，此时您应该可以在 API Services 列表中看到**Google Maps SDK for iOS**，然后您现在可以在您的项目中使用您给定的 iOS API 密钥.

将此代码添加到项目中`AppDelegate`的方法`application:didFinishLaunchingWithOptions:`中：

```
[GMSServices provideAPIKey:@"YOUR_API_KEY"]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T09:44:45.017

检查您的`API Key`是否有效。您创建的捆绑包标识符`API Key`应该是正确的。放入`API Key`_

```
[GMSServices provideAPIKey:@"YOUR_API_KEY"]; 
```

这会有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-30T06:37:28.260

我遇到了类似的问题，我的问题是我用来在 Google 中生成密钥的包标识符与我在 Xcode 中使用的不同。在更正标识符时，我解决了问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-08T10:56:14.653

此失败是由于 API 密钥失败而发生的。您必须首先使用您的项目名称和包标识符从[这里](https://developers.google.com/maps/documentation/ios-sdk/start)创建一个项目。然后根据需要启用 Google Maps Directions API 、 Google Maps SDK for iOS 和其他。 [![截屏](../Images/fbcab0cdd0412f11e8e9f77fec221f27.png)](https://i.stack.imgur.com/67Dyf.png) 然后复制 api 密钥并用作：[没有 CocoaPods 的 GoogleMaps](https://stackoverflow.com/questions/31782277/googlemaps-without-cocoapods/37672868#37672868)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-12T16:15:36.310

检查步骤——

1.  提供 API 密钥，如果您没有 API 密钥，请从 Google API 控制台日志中选择您的项目生成一个。

2.  检查所需的框架 -

    ```
    -CoreBluetooth.framework
    -OpenGLES.framework
    -ImageIO.framework
    -CoreData.framework
    -CoreText.framework
    -QuartzCore.framework
    -SystemConfiguration.framework
    -GLKit.framework
    -CoreLocation.framework
    -Security.framework
    -Accelerate.framework
    -libc++abi.tbd
    -libc++.1.tbd
    -libc.tbd
    -libicucore.tbd 
    ```

3.检查链接器标志 - 如果尚未添加，请添加“-ObjC”和“$（继承）”

4.检查架构 - 添加“$(ARCHS_STANDARD)” 例如(arm7, arm64) 如果尚未添加

5.检查复制捆绑资源上是否存在捆绑。

如果可以成功运行，请提供您的反馈。我想了解 iPhone 4s 的地图性能，因为 iPhone 4s 的 OpenGL 版本较旧，因此帧速率可能会变低，有时会导致地图冻结。

希望这会有所帮助，谢谢............ :)

# java - SQLiteDatabase '不实现接口'

> ID：13878908
> 
> 赞同：7
> 
> 时间：2012-12-14T12:40:35.993
> 
> 标签：java, android, android-sqlite, implements

当我将[SQLiteDatabase](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)用作[Closeable时出现此错误](http://developer.android.com/reference/java/io/Closeable.html)

我有一个示例项目来重新创建它：

[https://github.com/blundell/SQLDatabaseError](https://github.com/blundell/SQLDatabaseError)

使用扩展[SQLiteOpenHelper](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)的类：

```
public class DatabaseHelper extends SQLiteOpenHelper {

....

public void openAndCloseDatabase() {
    SQLiteDatabase database = getWritableDatabase();

    close(database);
}

private void close(Closeable database) {
    try {
        if (database != null) {
            database.close();
        }
    } catch (Exception e) {
        Log.e("Error", "Oh no!", e);
    }
}

} 
```

堆栈跟踪：

```
12-14 12:23:43.719: E/AndroidRuntime(5179): FATAL EXCEPTION: main
12-14 12:23:43.719: E/AndroidRuntime(5179): java.lang.IncompatibleClassChangeError: interface not implemented
12-14 12:23:43.719: E/AndroidRuntime(5179):   at com.blundell.sqldatabasecursorerror.DatabaseHelper.close(DatabaseHelper.java:35)
12-14 12:23:43.719: E/AndroidRuntime(5179):     at com.blundell.sqldatabasecursorerror.DatabaseHelper.openAndCloseDatabase(DatabaseHelper.java:29)
12-14 12:23:43.719: E/AndroidRuntime(5179):     at com.blundell.sqldatabasecursorerror.MainActivity.onCreate(MainActivity.java:13)
12-14 12:23:43.719: E/AndroidRuntime(5179):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-14 12:23:43.719: E/AndroidRuntime(5179):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)
12-14 12:23:43.719: E/AndroidRuntime(5179):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
12-14 12:23:43.719: E/AndroidRuntime(5179):     at android.app.ActivityThread.access$1500(ActivityThread.java:121)
12-14 12:23:43.719: E/AndroidRuntime(5179):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
12-14 12:23:43.719: E/AndroidRuntime(5179):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-14 12:23:43.719: E/AndroidRuntime(5179):     at android.os.Looper.loop(Looper.java:130)
12-14 12:23:43.719: E/AndroidRuntime(5179):     at android.app.ActivityThread.main(ActivityThread.java:3701)
12-14 12:23:43.719: E/AndroidRuntime(5179):     at java.lang.reflect.Method.invokeNative(Native Method)
12-14 12:23:43.719: E/AndroidRuntime(5179):     at java.lang.reflect.Method.invoke(Method.java:507)
12-14 12:23:43.719: E/AndroidRuntime(5179):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
12-14 12:23:43.719: E/AndroidRuntime(5179):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
12-14 12:23:43.719: E/AndroidRuntime(5179):     at dalvik.system.NativeStart.main(Native Method) 
```

接口：

[http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)

[http://developer.android.com/reference/android/database/sqlite/SQLiteClosable.html](http://developer.android.com/reference/android/database/sqlite/SQLiteClosable.html)

[http://developer.android.com/reference/java/io/Closeable.html](http://developer.android.com/reference/java/io/Closeable.html)

这应该工作不应该吗？

```
 public final class SQLiteDatabase extends SQLiteClosable
 >>
 public abstract class SQLiteClosable extends Object implements Closeable
 >>
 public interface Closeable 
```

**不起作用：**

*   Xperia Play 安卓 2.3.4
*   摩托罗拉 Xoom Android 4.0.4

**是否有效：**

*   三星 Galaxy Nexus 安卓 4.2

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T13:08:28.973

好的，[在 Change Notes for 4.1 (API Level 16) 中](http://developer.android.com/sdk/api_diff/16/changes/android.database.sqlite.SQLiteClosable.html)发现了问题：

`android.database.sqlite.SQLiteClosable`仅从 API 级别 16 开始实现`java.io.Closeable`。在此之前，它们是不相关的（即使两个接口从一开始就存在）。

因此，如果您希望代码向后兼容，则应直接使用 SQLiteClosable。

也可能值得为您想要支持的最低版本安装 SDK 并尝试使用它进行构建，然后编译器会检测到这一点。

# objective-c - 如何在钛应用加速器中覆盖 tableview 行 rightImage？

> ID：13878909
> 
> 赞同：0
> 
> 时间：2012-12-14T12:40:42.780
> 
> 标签：objective-c, ios, uitableview, appcelerator-mobile

我想在 tableview 行的右侧添加一个按钮，我在 UI.TableViewRow 中看到了 rightImage 属性。是否可以覆盖图像视图或者我们可以在 rightImage 下添加按钮

rowObject.rightImage.add(mybutton);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T00:11:42.143

在您的 TableViewRow 中，创建一个具有水平布局的 globalView

```
var globalView = Ti.UI.createView({
   width: "100%",
   layout: "horizontal",
   ...
}); 
```

然后创建 2 个其他视图，leftView（例如宽度等于 80%）和包含按钮的 rightView（将宽度设置为 20%），然后将 leftView 和 rightView 添加到您的 globalView。

```
globalView .add(leftView);
globalView.add(rightView); 
```

确保正确设置组件的高度。

# android - android onclick被错误的类抓住

> ID：13878915
> 
> 赞同：2
> 
> 时间：2012-12-14T12:41:44.583
> 
> 标签：android, onclicklistener

我很难弄清楚为什么我的 onClick 会陷入错误的班级。

我有`ListView`一个自定义适配器并为自定义行充气。

在我的 row.xml 中，我将 onRowClick 放在了 onClick 方法中，并且在我后面的代码中：

```
public void onRowClick(View v)
{ 

     //do something;

} 
```

app的流程是：Login => Show ListView

如果成功，我会调用`finish()`Login，然后调用 Intent 以使用 ListView 打开类。

我的问题是 onClick 在 Login 类中而不是在 ListView 类中。

代码：

```
public class TabComeLeave extends Activity 
{
    private ProgressDialog m_ProgressDialog = null; 
    private ArrayList<Item> m_items = null;
    private ItemAdapter m_adapter;
    private Runnable viewItem;

    private ListView listViewItem;

    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tab_come_leave); 

        listViewItems = (ListView)findViewById(R.id.listViewItems);
        listViewItems .setClickable(true);

        fillItemList();              
    }

    public void fillItemList()
    {  

        m_adapter = new ItemAdapter(SystemUtil.getInstance(), R.layout.list_row_come_leave, m_Items);               
        listViewItems.setAdapter(m_adapter);                      
    } 
```

项目适配器.java：

```
public class ItemAdapter extends ArrayAdapter<Item> 
{
    private ArrayList<Item> items;

    public ItemAdapter(Context context, int textViewResourceId, ArrayList<Item> items) 
    {
            super(context, textViewResourceId, items);
            this.items = items;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) 
    {
            View v = convertView;
            if (v == null) 
            {
                LayoutInflater vi = (LayoutInflater)SystemUtil.getInstance().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.list_row_come_leave, null);               
            }
            Item item = items.get(position);
            if (item!= null) 
            {
                    TextView itemName = (TextView)v.findViewById(R.id.textViewItemName);

                    if (itemName != null) 
                    {
                        itemName .setText(item.getitemFirstName());                            
                    }                    
            }           

            return v;
    }    
} 
```

有人可以指出我正确的方向吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:45:16.503

你为什么不使用`onItemClickListener`而不是`onRowClick`使用ListView时，这个问题将没有机会发生。

```
getListView().setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
            //do something
        }
    }); 
```

# c - 为什么 zlib deflate() 挂起？

> ID：13878917
> 
> 赞同：1
> 
> 时间：2012-12-14T12:41:48.820
> 
> 标签：c, stream, gdb, zlib, deflate

我的问题是我的程序挂起使用 zlib 的`deflate()`功能。

我首先初始化 my `z_stream`，如下：

```
int setupGzipOutputStream(z_stream zStream) {
    int zError;
    zStream.zalloc = Z_NULL;
    zStream.zfree = Z_NULL;
    zStream.opaque = Z_NULL;

    zError = deflateInit(&zStream, Z_COMPRESSION_LEVEL);

    /* error handling code to test if zError != Z_OK... */
    return EXIT_SUCCESS;
} 
```

我尝试使用以下函数将数据写入我的 z 流：

```
int compressDataToGzipOutputStream(unsigned char *myData, z_stream zStream, Boolean flushZStreamFlag) {
    int zError;
    int zOutHave;
    FILE *outFp = stdout;
    unsigned char zBuffer[Z_BUFFER_MAX_LENGTH] = {0};

    zStream.next_in = myData;
    zStream.avail_in = strlen(myData); /* myData is a null-terminated string */
    do {
        zStream.avail_out = Z_BUFFER_MAX_LENGTH;
        zStream.next_out = zBuffer;

        zError = deflate(&zStream, (flushZStreamFlag == kFalse) ? Z_NO_FLUSH : Z_FINISH);

        /* error handling code to test if zError != Z_OK... */
        zOutHave = Z_BUFFER_MAX_LENGTH - zStream.avail_out;
        fwrite(zBuffer, sizeof(unsigned char), zOutHave, outFp);
        fflush(outFp);
    } while (zStream.avail_out == 0);

    return EXIT_SUCCESS;
} 
```

我将这两个函数（为了提出这个问题而进行了简化）如下：

```
z_stream zOutStream;

setupGzipOutputStream(zOutStream);

compressDataToGzipOutputStream(data, zOutStream, kFalse); 
compressDataToGzipOutputStream(data, zOutStream, kFalse);
...
compressDataToGzipOutputStream(data, zOutStream, kTrue); 
```

然后我`zOutStream`用`deflateEnd()`.

`kTrue`最后一个压缩步骤的值将`Z_FINISH`标志发送到`deflate()`，而不是`Z_NO_FLUSH`。

它挂在以下行：

```
zError = deflate(&zStream, (flushZStreamFlag == kFalse) ? Z_NO_FLUSH : Z_FINISH); 
```

然后我尝试使用`gdb`. 我`break`在这一行设置了一个，程序挂起的那一行。

在这个断点处，我可以看到变量的值`zStream`和`flushZStreamFlag`其他值。`zStream`变量不是`NULL`，我可以用 、 等验证它，`print zStream`这些变量`print zStream.next_in`填充了我感兴趣的数据。

如果我输入`next`，`gdb`那么这行代码被处理并且整个过程挂起，我在这行代码之前和之后使用日志语句来验证。“之前”日志语句显示，但“之后”语句不显示。

我的问题是：为什么`deflate()`挂在这里？我没有正确初始化输出流吗？没有`deflate()`正确使用？我一直在努力解决这个问题，但没有运气。感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T13:44:08.047

您的函数应该采用指向 z_stream 的指针，而不是传入结构。您的 init 函数正在初始化有效的本地副本，该副本将被丢弃。然后你的压缩函数将有一个垃圾 z_stream 传递给它。

例如：

```
int setupGzipOutputStream(z_stream *zStream) {
    int zError;
    zStream->zalloc = Z_NULL;
    ...
}

... etc. 
```

看起来您的压缩功能也没有考虑到字符串末尾的空值，因此当您尝试重新膨胀数据时可能会导致问题。

```
zStream.avail_in = strlen(myData); 
```

可能想成为：

```
zStream.avail_in = strlen(myData) + 1; 
```

# android - 带后缀的Ellipsized TextView

> ID：13878918
> 
> 赞同：2
> 
> 时间：2012-12-14T12:41:49.490
> 
> 标签：android, textview

我有两行可能被省略的文本。但无论需要多少行，我都需要一些额外的（短但长度可能会有所不同）文本在前一个文本的末尾始终完全可见。

以下是代表我的问题的三个案例：

![案例](../Images/8b8a7a995e46945fc2eab501cf07772c.png)

我怎样才能做到这一点？我尝试测量文本长度并将其拆分为两个 TextView，但它不够准确，而且性能也很差。

# command-line - 如何获取以常用词开头的所有 Windows 服务名称？

> ID：13878921
> 
> 赞同：66
> 
> 时间：2012-12-14T12:41:55.387
> 
> 标签：command-line, windows-services, command, command-prompt

托管的一些 Windows 服务的显示名称以通用名称（此处为 NATION）开头。例如：

*   国家城市
*   民族国家
*   国家村

是否有一些命令可以获取所有服务，例如“NATION-”。最后，我需要使用命令 promt 停止、启动和重新启动此类服务。

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-12-28T07:28:08.553

```
sc queryex type= service state= all | find /i "NATION" 
```

*   用于`/i`不区分大小写的搜索
*   后面的空白`type=`是故意和必需的

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-12-14T16:27:41.400

使用[PowerShell](http://en.wikipedia.org/wiki/Windows_PowerShell)，您可以使用以下

```
Get-Service | Where-Object {$_.displayName.StartsWith("NATION-")} | Select name 
```

这将显示显示名称以“NATION-”开头的所有服务的列表。

您也可以直接停止或启动服务；

```
Get-Service | Where-Object {$_.displayName.StartsWith("NATION-")} | Stop-Service
Get-Service | Where-Object {$_.displayName.StartsWith("NATION-")} | Start-Service 
```

或者干脆

```
Get-Service | Where-Object {$_.displayName.StartsWith("NATION-")} | Restart-Service 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2016-05-10T22:42:57.153

将其保存为 .ps1 文件，然后执行

`powershell -file "path\to your\start stop nation service command file.ps1"`

# android - 邀请朋友到 Facebook 应用程序 - android，未发送邀请

> ID：13878925
> 
> 赞同：2
> 
> 时间：2012-12-14T12:42:10.023
> 
> 标签：android, facebook

我用我的 android 编码创建了一个 facebook 活动，现在我想邀请朋友参加。下面是我邀请朋友的代码：

```
 private void inviteFriends()
    {
        try
        {   
            Bundle params = new Bundle();
            params.putString("title", "invite friends");
            params.putString("message", "come join us!");
            facebook.dialog(this, "apprequests", params, new DialogListener() {
                @Override
                public void onComplete(Bundle values) {}

                @Override
                public void onFacebookError(FacebookError error) {}

                @Override
                public void onError(DialogError e) {}

                @Override
                public void onCancel() {}

                public void onComplete(String response, Object state)
                {
                    try
                    {
                        JSONObject eventResponse = new JSONObject(response);
                        //event_id = event.getString("id");
                        Log.i(TAG, "Event Response => "+eventResponse);
                        Log.w("myapp", friends);

                       //Toast.makeText(getApplicationContext(), "New Event Created!!", Toast.LENGTH_LONG).show();
                    }
                    catch (Exception e)
                    {

                    }
                }
            });
        }
        catch (Exception e)
        {

        }
    } 
```

该代码可用于选择朋友，标题和消息随朋友列表一起提供。我可以发送邀请，但不会向选定的人发送通知。

请告诉我需要做什么。先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-13T09:27:12.257

![看](../Images/8612e3de4befd9f0f51d7597f0db3e42.png)这个图片。

你有没有像这样在你的应用开发者设置中打开 App omn Facebbok 标签。如果不这样做，它将不会向您的朋友发送通知。

# python - 类型对象“x”没有属性过滤器

> ID：13878926
> 
> 赞同：3
> 
> 时间：2012-12-14T12:42:10.503
> 
> 标签：python, sql, django

我正在使用 python 从使用 filter 的表之一中获取值。

```
queryset1 = model_user_profile.UserProfile.filter(user = uid).values('time_zone') 
```

其中 model_user_table 具有以下列：

```
---------------+--------------+------+-----+---------+----------------+
| Field         | Type         | Null | Key | Default | Extra          |
+---------------+--------------+------+-----+---------+----------------+
| id            | int(11)      | NO   | PRI | NULL    | auto_increment |
| user_id       | int(11)      | NO   | UNI | NULL    |                |
| time_zone     | varchar(128) | YES  |     | NULL    |                |
+---------------+--------------+------+-----+---------+----------------+ 
```

上面查询和表中 uid 和 user_id 的值分别为 1 和 1 ，但仍然查询失败并`error: AttributeError: type object 'UserProfile' has no attribute 'filter'`显示。

我过去使用过类似的查询，但从未收到此类错误，可能是什么问题？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:19:29.847

用这个：

过滤器就像 sql 中的 where 子句

```
obj = your_model.objects.filter( user = uid) 
```

有关更多信息，请参阅此[文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/)

# windows - 是否有用于显示 WS 私有字节的命令行实用程序？

> ID：13878927
> 
> 赞同：2
> 
> 时间：2012-12-14T12:42:28.417
> 
> 标签：windows, memory

在 Process Explorer 术语中，它是**WS Private Bytes**，而在任务管理器术语中，它是**Private Working Set**。

我想要一个命令行实用程序来显示给定进程名称的此信息。

**编辑**

一个 powershell 脚本也可以。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T12:58:37.760

在`PowerShell`您可以使用：

**[编辑]**

```
function ProcessInfo
{
    param
    ([String]$processName)

    $workingSet = get-counter -counter "\Process($processName)\Working Set - Private" | select -expandproperty countersamples | select cookedvalue
    $privateBytes = get-counter -counter "\Process($processName)\Private Bytes" | select -expandproperty countersamples | select cookedvalue

    get-process $processName | select `
        name, `
        @{Name="Private Working Set"; Expression = {$workingSet.CookedValue}},`
        @{Name="WS Private Bytes"; Expression = {$privateBytes.CookedValue}}
}

ProcessInfo("winrar") 
```

**[编辑2]**

这是一个改进版本，它以进程 ID 作为参数。

```
function GetProcessInfoById
{
    param
    ([int]$processId)

    Get-WmiObject -class Win32_PerfFormattedData_PerfProc_Process | where{$_.idprocess -eq $processId} | select `
    @{Name="Process Id"; Expression = {$_.idprocess}},`
    @{Name="Counter Name"; Expression = {$_.name}},`
    @{Name="Private Working Set"; Expression = {$_.workingSetPrivate / 1kb}}        
}

GetProcessInfoById 380 
```

这是一个将进程名称作为参数的版本。这可能会返回多个值（每个流程实例一个），您可以通过`Process Id`.

```
function GetProcessInfoByName
{
    param
    ([string]$processName)

    Get-WmiObject -class Win32_PerfFormattedData_PerfProc_Process | where{$_.name -like $processName+"*"} | select `
    @{Name="Process Id"; Expression = {$_.idprocess}},`
    @{Name="Counter Name"; Expression = {$_.name}},`
    @{Name="Private Working Set"; Expression = {$_.workingSetPrivate / 1kb}}
}

GetProcessInfoByName svchost 
```

# java - 使用 ContentValues 将多条记录插入 Sqlite 数据库中的两列

> ID：13878934
> 
> 赞同：1
> 
> 时间：2012-12-14T12:42:47.167
> 
> 标签：java, android, sqlite, sqliteopenhelper

每当我使用以下代码将多条记录插入表时，它只会插入最后一个初始化值。

下面是向表中插入数据的方法：

```
public long insertQuote() {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_PHID, 100);
        initialValues.put(KEY_LAT, 28.5700);
        initialValues.put(KEY_LAT, 28.4700);
        initialValues.put(KEY_LAT, 27.1833);
        initialValues.put(KEY_LAT, 26.4583);

        initialValues.put(KEY_LON, 77.3200);
        initialValues.put(KEY_LON, 77.0300);
        initialValues.put(KEY_LON, 78.0167);
        initialValues.put(KEY_LON, 80.3173);

        return db.insert(DATABASE_TABLE, null, initialValues);
    } 
```

在这种情况下，对于列键“KEY_LAT”，我只能在 logcat 的 SOP（Sys.out.println）输出上看到最后一个初始化值“26.4583”。

其他列键“KEY_LON”也是如此。我只能看到这两个记录。

我想它们没有被插入到表中，因为`put()`Method 跳过了以前的`"to-be-inserted"`值并接受了特定列的最后一个值。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T12:45:08.330

发生这种情况是因为您对所有人使用相同的密钥 LAT 和 LON。那正在被覆盖。

您应该使用不同的键，例如

```
public long insertQuote() {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_PHID, 100);
        initialValues.put(KEY_LAT1, 28.5700);
        initialValues.put(KEY_LAT2, 28.4700);
        initialValues.put(KEY_LAT3, 27.1833);
        initialValues.put(KEY_LAT4, 26.4583);

        initialValues.put(KEY_LON1, 77.3200);
        initialValues.put(KEY_LON2, 77.0300);
        initialValues.put(KEY_LON3, 78.0167);
        initialValues.put(KEY_LON4, 80.3173);

        return db.insert(DATABASE_TABLE, null, initialValues);
    } 
```

编辑：

所以你应该使用这种方法。

```
public long insertQuote() {
            ContentValues initialValues = new ContentValues();
            initialValues.put(KEY_PHID, 100);
            initialValues.put(KEY_LAT, 28.5700);
            initialValues.put(KEY_LON, 77.3200);
            db.insert(DATABASE_TABLE, null, initialValues);
            initialValues.put(KEY_LAT, 28.4700);
            initialValues.put(KEY_LON, 77.0300);
            db.insert(DATABASE_TABLE, null, initialValues);
            initialValues.put(KEY_LAT, 27.1833);
            initialValues.put(KEY_LON, 78.0167);
            db.insert(DATABASE_TABLE, null, initialValues);
            initialValues.put(KEY_LAT, 26.4583);
            initialValues.put(KEY_LON, 80.3173);
            return db.insert(DATABASE_TABLE, null, initialValues);  
        } 
```

# java - 为已发布的工件生成 Maven 站点

> ID：13878940
> 
> 赞同：2
> 
> 时间：2012-12-14T12:43:03.313
> 
> 标签：java, maven, maven-site-plugin

我有一个作为 Maven 工件发布的 Java 库，使用`maven-release-plugin`. 我希望有一个单独的 Maven 项目负责为该库生成站点，这样我就可以更改站点的内容（例如常见问题解答、教程等），而无需重新发布该库。

我希望从库本身合并的唯一数据是：

*   Javadocs
*   任何基于源的报告（例如覆盖率或 FindBugs 报告）
*   版本号（在站点项目中手动更新就可以了）

在构建和发布库项目时，需要将这些项目生成为报告。我需要以某种方式将这些提供给站点项目，以便它可以将数据合并到它生成的站点中。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:49:10.313

您可以考虑通过链接到外部 URL 来[配置站点描述符](http://maven.apache.org/plugins/maven-site-plugin/examples/sitedescriptor.html)，以支持您更改某些站点内容的要求。例如

```
<project>
  ...
  <body>
    ...
    <links>
        <item name="FAQs" href="http://.../faq.html"/>
        <item name="Tutorials" href="http://.../tutorial.html"/>
    </links>
    ...
  </body>
  ...
</project> 
```

即使这种变通方法可以帮助您更改内容，我也想鼓励您保留所有内容并将它们与相同的版本一起发布。

我希望这可能会有所帮助。

# plugins - ImageJ 插件开发和 NetBeans IDE

> ID：13878941
> 
> 赞同：1
> 
> 时间：2012-12-14T12:43:14.970
> 
> 标签：plugins, netbeans, imagej

你能帮我用 NetBeans IDE 设置 ImageJ 插件开发吗？我尝试使用现有项目，但有两个问题： - Java 自由格式项目：我无法在该项目中附加 onvif.xsd。- 我正在尝试本教程：[教程](http://rsb.info.nih.gov/ij/developer/NBTutorial.html)但在 netbeans 7.2.1 中我不能这样做：“转到构建>编译“（您的插件的名称）”“

请给我建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:05:01.670

我正在使用 Maven 在 NetBeans 中开发 ImageJ 插件。我将展示如何创建和调试一个简单的插件。

您可以从创建一个新的 Maven 项目`File->New Project->Maven->Java Application`并创建一个简单的 PlugIn 类开始：

```
package cz.cuni.lf1.imagejstubproject;
import ij.IJ;
import ij.plugin.PlugIn;
public class Hello implements PlugIn {
  public void run(String arg) {
    IJ.showMessage("My_Plugin", "Hello world!");
  }
} 
```

现在在文件夹 src/main/resources 中创建一个 plugins.config 文件，其内容为：

```
Plugins, "Hello World!", cz.cuni.lf1.imagejstubproject.Hello 
```

第一个字符串是您的插件将出现的菜单文件夹，第二个是菜单标签，第三个是单击菜单项时要运行的类的完整类名。

下一步是向包含 ImageJ 类的 ij.jar 添加依赖项。这可以通过编辑 pom.xml 文件并添加：

```
<project>
  ...
  <build>
   ...
  </build>
  <dependencies>
    <dependency>
      <groupId>gov.nih.imagej</groupId>
      <artifactId>imagej</artifactId>
      <version>1.45</version>
      <scope>provided</scope>
    </dependency>
  </dependencies>
</project> 
```

在构建过程中，Maven 会自动从 Internet 下载所需的库。它还可以下载源代码和JavaDoc。

ImageJ 要求最终 jar 的名称包含下划线，因此我们相应地设置文件名。更改 pom.xml 以包含如下内容：

```
<project>
...
  <build>
    <finalName>${project.artifactId}_${project.version}</finalName>
    ...
  </build>
  ...
</project> 
```

这就是构建 ImageJ 插件所需的全部内容。如果你编译它并将 jar 复制到 ImageJ 插件目录，你应该在 ImageJ 插件菜单中看到你的插件。如果您不想在 Netbeans 中调试您的插件，您可以在此处停止。

当我在 Netbeans 中编译它时，我喜欢将新 jar 复制到 ImageJ 插件文件夹中，这样我就可以快速尝试一下。您甚至不必重新启动 ImageJ 即可运行您的新插件。只需单击 ImageJ 中的 Help->Refresh Menus 即可重新加载插件。要将插件复制到 comile 上的 ImageJ 文件夹，请编辑 pom.xml 以包含：

```
<project>
  ...
  <properties>
   <imagej.path>c:\Program Files (x86)\ImageJ</imagej.path>
  </properties>
  <build>
    <finalName>${project.artifactId}_${project.version}</finalName>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-antrun-plugin</artifactId>
        <executions>
          <execution>
            <id>copytoplugins</id>
            <phase>install</phase>
            <goals>
              <goal>run</goal>
            </goals>
            <configuration>
              <tasks>
                <copy todir="${imagej.path}/plugins/" file="target/${project.build.finalName}.jar"/>
              </tasks>
            </configuration>
          </execution>
        </executions>
      </plugin>
      ...
    </plugins>
  </build>
  ...
</project> 
```

并编辑`imagej.path`属性以指向您的 ImageJ 安装文件夹（而不是插件文件夹）。现在你的插件应该被复制到每个构建的插件文件夹中。

为了能够从 Netbeans 调试您的插件，请将其添加到您的 pom.xml：

```
<project> 
  ...   
  <build>
    <finalName>${project.artifactId}_${project.version}</finalName>
    <plugins>
      ...
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>exec-maven-plugin</artifactId>
        <version>1.2</version>
        <executions>
          <execution>
            <goals>
              <goal>exec</goal>
            </goals>
          </execution>
        </executions>
        <configuration>
          <executable>java</executable>
          <commandlineArgs>-jar     -agentlib:jdwp=transport=dt_socket,server=n,address=${jpda.address} "${imagej.path}/ij.jar"    </commandlineArgs>
          <workingDirectory>${imagej.path}</workingDirectory>
        </configuration>
      </plugin>
    </plugins>
  </build>
  ...
</project> 
```

然后右键单击您的项目并选择属性。在 Actions 选项卡中，将 Debug Project 操作编辑为：

*   执行目标：`process-classes org.codehaus.mojo:exec-maven-plugin:1.2:exec`
*   激活配置文件：
*   设置属性：`jpda.listen=true`

现在，当您单击 NetBeans ImageJ 中的调试项目时，您应该能够调试您的插件。

[您可以在此处](https://dl.dropbox.com/u/48682611/ImageJStubProject.zip)下载此示例插件。

# c# - 如何处理 Foo 的集合 , 每个项目的 T 可以不同？

> ID：13878944
> 
> 赞同：1
> 
> 时间：2012-12-14T12:43:26.390
> 
> 标签：c#, generics, collections, type-systems

## 问题描述

我正在尝试存储通用`Foo<T>`元素的集合，`T`每个项目的位置可能不同。我也有类似`DoSomething<T>(Foo<T>)`的功能可以接受`Foo<T>`任何`T`. 似乎我应该能够在上述列表的每个元素上调用这个函数，因为它们都是函数的有效参数，但我似乎无法向 C# 编译器表达这个想法。

据我所知，问题在于我不能真正表达这样的列表，因为 C# 不允许我在`Foo<T>`没有绑定的情况下编写`T`。我想要的是类似于 Java 的通配符机制 ( `Foo<?>`)。以下是它在 Pseudo-C# 中的外观，其中存在此​​通配符类型：

```
class Foo<T> {
    // ...
}

static class Functions {
    public static void DoSomething<T>(Foo<T> foo) {
        // ...
    }

    public static void DoSomething(List<Foo<?>> list) {
        foreach(Foo<?> item in list)
            DoSomething(item);
    }
} 
```

这种模式在 Java 中是有效的，但我如何在 C# 中做同样的事情？我已经尝试了一些解决方案，我将在下面的答案中发布，但我觉得应该有更好的方法。

注意：我已经“足够好”地解决了这个问题以满足我的实际需求，并且我知道解决它的方法（例如使用`dynamic`类型），但我真的很想看看是否有一个更简单的解决方案不会放弃静态类型安全。

正如下面所建议的，仅使用`object`or 非泛型超类型不允许我调用需要`Foo<T>`. 但是，即使我对`T`. 例如，我可以使用来从某处`Foo<T>`检索 a ，从其他地方检索 a ，然后调用，编译器将知道所有类型都正确。`List<T> list``T value``list.Add(value)`

## 动机

有人问我为什么我需要这样的东西，所以我正在编一个更接近大多数开发人员日常经验的例子。想象一下，您正在编写一堆 UI 组件，这些组件允许用户操作某种类型的值：

```
public interface IUiComponent<T> {
    T Value { get; set; }
}

public class TextBox : IUiComponent<string> {
    public string Value { get; set; }
}

public class DatePicker : IUiComponent<DateTime> {
    public DateTime Value { get; set; }
} 
```

除了 Value 属性，组件当然还有许多其他成员（例如`OnChange`事件）。

现在让我们添加一个撤消系统。我们不应该为此修改 UI 元素本身，因为我们已经可以访问所有相关数据——只需连接`OnChange`事件，并且每当用户更改 UI 组件时，我们都会存储每个的值`IUiComponent<T>`（有点浪费，但让我们保持简单）。为了存储值，我们将在表单中使用`Stack<T>`for each `IUiComponent<T>`。使用`IUiComponent<T>`as 键可以访问这些列表。我将省略列表存储方式的详细信息（如果您认为这很重要，我将提供一个实现）。

```
public class UndoEnabledForm {
    public Stack<T> GetUndoStack<T>(IUiComponent<T> component) {
        // Implementation left as an exercise to the reader :P
    }

    // Undo for ONE element. Note that this works and is typesafe,
    // even though we don't know anything about T...
    private void Undo<T>(IUiComponent<T> component) {
        component.Value = GetHistory(component).Pop();
    }

    // ...but how do we implement undoing ALL components?
    // Using Pseudo-C# once more:
    public void Undo(List<IUiComponent<?>> components) {
        foreach(IUiComponent<?> component in components)
            Undo(component);
    }
} 
```

我们可以通过直接调用`Undo<T>()`所有`IUiComponent`s（按名称）来撤消所有操作：

```
public void Undo(List<IUiComponent<?>> components) {
    Undo(m_TextBox);
    Undo(m_DatePicker);
    // ...
} 
```

但是，我想避免这种情况，因为这意味着如果您添加/删除一个组件，您将不得不在代码中多接触一个地方。如果您想要对所有组件执行数十个字段和更多功能（例如，将它们的所有值写入数据库并再次检索它们），这可能会产生大量重复。

## 示例代码

这是一小段代码，可用于开发/检查解决方案。任务是将多个`Pair<T>`- 对象放入某种集合对象中，然后调用一个函数，该函数接受该集合对象并交换每个对象的`First`and`Second`字段`Pair<T>`（使用`Application.Swap()`）。理想情况下，您不应使用任何强制转换或反射。如果您可以在不以任何方式修改 -class 的情况下设法做到这一点，则可以加分`Pair<T>`:)

```
class Pair<T> {
    public T First, Second;

    public override string ToString() {
        return String.Format("({0},{1})", First, Second);
    }    
}

static class Application {
    static void Swap<T>(Pair<T> pair) {
        T temp = pair.First;
        pair.First = pair.Second;
        pair.Second = temp;
    }

    static void Main() {
        Pair<int> pair1 = new Pair<int> { First = 1, Second = 2 };
        Pair<string> pair2 = new Pair<string> { First = "first", Second = "second" };
        // imagine more pairs here

        // Silly solution
        Swap(pair1);
        Swap(pair2);

        // Check result
        Console.WriteLine(pair1);
        Console.WriteLine(pair2);
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:00:48.260

**编辑2**：就您的大修问题而言，该方法与我之前向您提出的方法基本相同。在这里，我正在根据您的场景对其进行调整，并更好地评论是什么使它起作用（加上一个不幸的“陷阱”与值类型......）

```
// note how IPair<T> is covariant with T (the "out" keyword)
public interface IPair<out T> {
     T First {get;}
     T Second {get;}
}

// I get no bonus points... I've had to touch Pair to add the interface
// note that you can't make classes covariant or contravariant, so I 
// could not just declare Pair<out T> but had to do it through the interface
public class Pair<T> : IPair<T> {
    public T First {get; set;}
    public T Second {get; set;}

    // overriding ToString is not strictly needed... 
    // it's just to "prettify" the output of Console.WriteLine
    public override string ToString() {
        return String.Format("({0},{1})", First, Second); 
    }    
}

public static class Application {
    // Swap now works with IPairs, but is fully generic, type safe
    // and contains no casts      
    public static IPair<T> Swap<T>(IPair<T> pair) {
        return new Pair<T>{First=pair.Second, Second=pair.First};       
    }

    // as IPair is immutable, it can only swapped in place by 
    // creating a new one and assigning it to a ref
    public static void SwapInPlace<T>(ref IPair<T> pair) {
        pair = new Pair<T>{First=pair.Second, Second=pair.First};
    }

    // now SwapAll works, but only with Array, not with List 
    // (my understanding is that while the Array's indexer returns
    // a reference to the actual element, List's indexer only returns
    // a copy of its value, so it can't be switched in place
    public static void SwapAll(IPair<object>[] pairs) {
        for(int i=0; i < pairs.Length; i++) {
           SwapInPlace(ref pairs[i]);
        }
    }
} 
```

这或多或少是......现在`main`你可以这样做：

```
var pairs = new IPair<object>[] {
    new Pair<string>{First="a", Second="b"},
    new Pair<Uri> {
               First=new Uri("http://www.site1.com"), 
               Second=new Uri("http://www.site2.com")},     
    new Pair<object>{First=1, Second=2}     
};

Application.SwapAll(pairs);
foreach(var p in pairs) Console.WriteLine(p.ToString()); 
```

**输出**：

```
(b,a)
(http://www.site2.com/,http://www.site1.com/)
(2,1) 
```

因此，您的 Array 是类型安全的，因为它只能包含`Pair`s（嗯，`IPair`s）。唯一的问题是值类型。如您所见，我必须将数组的最后一个元素声明为 a`Pair<object>`而不是`Pair<int>`我希望的那样。这是因为[协变/逆变不适用于值类型](https://stackoverflow.com/questions/2727242/question-about-c-sharp-4-0s-generics-covariance)，所以我必须`int`将`object`.

=========

**编辑1（旧的，只是留下作为参考以理解下面的评论）**：当您需要对容器采取行动时，您可以同时拥有一个非通用标记界面（但不关心“包装”类型) 和一个协变通用的，用于当您需要类型信息时。

就像是：

```
interface IFoo {}
interface IFoo<out T> : IFoo {
    T Value {get;}
}

class Foo<T> : IFoo<T> {
    readonly T _value;
    public Foo(T value) {this._value=value;}
    public T Value {get {return _value;}}
} 
```

假设你有这个简单的类层次结构：

```
public class Person 
{
    public virtual string Name {get {return "anonymous";}}
}

public class Paolo : Person 
{
    public override string Name {get {return "Paolo";}}
} 
```

您可以拥有可以在任何`IFoo`（当您不在乎是否`Foo`包装 a时`Person`）或专门在`IFoo<Person>`（当您在乎时）起作用的功能：例如

```
static class Functions 
{
    // this is where you would do DoSomethingWithContainer(IFoo<?> foo)
    // with hypothetical java-like wildcards 
    public static void DoSomethingWithContainer(IFoo foo) 
    {
        Console.WriteLine(foo.GetType().ToString());
    }

    public static void DoSomethingWithGenericContainer<T>(IFoo<T> el) 
    {
        Console.WriteLine(el.Value.GetType().ToString());
    }

    public static void DoSomethingWithContent(IFoo<Person> el) 
    {
        Console.WriteLine(el.Value.Name);
    }

} 
```

你可以这样使用：

```
// note that IFoo can be covariant, but Foo can't,
    // so we need a List<IFoo  
    var lst = new List<IFoo<Person>>
    {   
        new Foo<Person>(new Person()),
        new Foo<Paolo>(new Paolo())
    };

    foreach(var p in lst) Functions.DoSomethingWithContainer(p);    
    foreach(var p in lst) Functions.DoSomethingWithGenericContainer<Person>(p);
    foreach(var p in lst) Functions.DoSomethingWithContent(p);
// OUTPUT (LinqPad)
// UserQuery+Foo`1[UserQuery+Person]
// UserQuery+Foo`1[UserQuery+Paolo]
// UserQuery+Person
// UserQuery+Paolo
// anonymous
// Paolo 
```

输出中值得注意的一件事是，即使只接收 IFoo 的函数仍然具有并打印了在 java 中会因类型擦除而丢失的完整类型信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T23:03:10.943

我建议你定义一个接口来调用你想要调用的函数`DoSomething<T>(T param)`。最简单的形式：

```
public interface IDoSomething
  { void DoSomething<T>(T param); } 
```

接下来定义一个基本类型`ElementThatCanDoSomething`：

```
abstract public class ElementThatCanDoSomething
  { abstract public void DoIt(IDoSomething action); } 
```

和一个通用的具体类型：

```
public class ElementThatCanDoSomething><T>
{
  T data;
  ElementThatCanDoSomething(T dat) { data = dat; }

  override public void DoIt(IDoSomething action)
    { action.DoIt<T>(data); }
} 
```

现在可以为任何类型的编译时 T 构造一个元素，并将该元素传递给一个泛型方法，保持类型`T`（即使该元素为 null，或者该元素是 的派生元素`T`）。上面的具体实现并不是非常有用，但它可以很容易地以许多有用的方式进行扩展。例如，如果类型`T`在接口和具体类型中具有通用约束，则可以将元素传递给对其参数类型具有这些约束的方法（否则这非常困难，即使使用反射也是如此）。添加可以接受传递参数的接口和调用程序方法的版本也可能很有用：

```
public interface IDoSomething<TX1>
{ void DoSomething<T>(T param, ref TX1 xparam1); }

... and within the ElementThatCanToSomething

  abstract public void DoIt<TX1>(IDoSomething<TX1> action, ref TX1 xparam1);

... and within the ElementThatCanToSomething<T>

  override public void DoIt<TX1>(IDoSomething<TX1> action, ref TX1 xparam1)
    { action.DoIt<T>(data, ref xparam1); } 
```

该模式可以很容易地扩展到任意数量的传递参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T12:43:56.030

似乎在 C# 中，您必须创建一个 的列表`Foo`，将其用作`Foo<T>`. 但是，您不能轻易地`Foo<T>`从那里返回。

`Foo`我发现的一个解决方案是为每个函数添加一个抽象方法，并通过调用`SomeFn<T>(Foo<T>)`来实现它们。但是，这意味着每次您想在 上定义一个新的（外部）函数时，您都必须向 中添加一个转发函数，即使它确实不必*知道*该函数：`Foo<T>``SomeFn(this)``Foo<T>``Foo`

 *```
abstract class Foo {
    public abstract void DoSomething();
}

class Foo<T> : Foo {
    public override void DoSomething() {
        Functions.DoSomething(this);
    }
    // ...
}

static class Functions {
    public static void DoSomething<T>(Foo<T> foo) {
        // ...
    }

    public static void DoSomething(List<Foo> list) {
        foreach(Foo item in list)
            item.DoSomething();
    }
} 
```

从设计的角度来看，一个稍微干净的解决方案似乎是访问者模式，它在一定程度上概括了上述方法，并切断了`Foo`与特定泛型函数之间的耦合，但这使得整个事情变得更加冗长和复杂。

```
interface IFooVisitor {
    void Visit<T>(Foo<T> foo);
}

class DoSomethingFooVisitor : IFooVisitor {
    public void Visit<T>(Foo<T> foo) {
        // ...
    }
}

abstract class Foo {
    public abstract void Accept(IFooVisitor foo);
}

class Foo<T> : Foo {
    public override void Accept(IFooVisitor foo) {
        foo.Visit(this);
    }
    // ...
}

static class Functions {
    public static void DoSomething(List<Foo> list) {
        IFooVisitor visitor = new DoSomethingFooVisitor();
        foreach (Foo item in list)
            item.Accept(visitor);
    }
} 
```

如果创建访问者更容易，这几乎是一个很好的解决方案 IMO。由于 C# 显然不允许泛型委托/lambda，因此您不能指定访问者内联并利用闭包 - 据我所知，每个访问者都需要是一个新的明确定义的类，并可能有额外的参数作为字段。该`Foo`类型还必须通过实现访问者模式来明确支持此方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T17:32:07.527

对于那些可能仍然觉得这很有趣的人，这是我能想出的最好的解决方案，它也满足不以任何方式接触原始类型的“奖励要求”。它基本上是一个访问者模式，我们不`Foo<T>`直接将 存储在我们的容器中，而是存储一个`IFooVisitor`在我们的`Foo<T>`. 注意我们是如何轻松列出这些的，因为`T`它实际上并不是代表类型的一部分。

```
// The original type, unmodified
class Pair<T> {
    public T First, Second;
}

// Interface for any Action on a Pair<T>
interface IPairVisitor {
    void Visit<T>(Pair<T> pair);
}

class PairSwapVisitor : IPairVisitor {
    public void Visit<T>(Pair<T> pair) {
        Application.Swap(pair);
    }
}

class PairPrintVisitor : IPairVisitor {
    public void Visit<T>(Pair<T> pair) {
        Console.WriteLine("Pair<{0}>: ({1},{2})", typeof(T), pair.First, pair.Second);
    }
}

// General interface for a container that follows the Visitor pattern
interface IVisitableContainer<T> {
    void Accept(T visitor);
}

// The implementation of our Pair-Container
class VisitablePairList : IVisitableContainer<IPairVisitor> {
    private List<Action<IPairVisitor>> m_visitables = new List<Action<IPairVisitor>>();

    public void Add<T>(Pair<T> pair) {
        m_visitables.Add(visitor => visitor.Visit(pair));
    }

    public void Accept(IPairVisitor visitor) {
        foreach (Action<IPairVisitor> visitable in m_visitables)
            visitable(visitor);
    }
}

static class Application {
    public static void Swap<T>(Pair<T> pair) {
        T temp = pair.First;
        pair.First = pair.Second;
        pair.Second = temp;
    }

    static void Main() {
        VisitablePairList list = new VisitablePairList();
        list.Add(new Pair<int> { First = 1, Second = 2 });
        list.Add(new Pair<string> { First = "first", Second = "second" });

        list.Accept(new PairSwapVisitor());
        list.Accept(new PairPrintVisitor());
        Console.ReadLine();
    }
} 
```

输出：

```
Pair<System.Int32>: (2,1)
Pair<System.String>: (second,first) 
```*

# ruby - 如何通过匹配 Capybara 中元素的确切文本来查找元素

> ID：13878946
> 
> 赞同：114
> 
> 时间：2012-12-14T12:43:31.373
> 
> 标签：ruby, regex, capybara

我在 HTML 中有以下两个元素

```
<a href="/berlin" >Berlin</a>
<a href="/berlin" >Berlin Germany </a> 
```

我正在尝试使用以下 Capybara 方法查找元素

```
find("a", :text => "berlin") 
```

上面将返回两个元素，因为它们都包含文本柏林。

有没有办法匹配 Capybara 中的确切文本？

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-12-14T19:01:09.530

使用正则表达式而不是字符串作为`:text`键的值：

```
find("a", :text => /\ABerlin\z/) 
```

查看`Method: Capybara::Node::Finders#all` [文档](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Finders%3aall)的“选项哈希”部分。

PS：文本匹配区分大小写。您的示例代码实际上引发了一个错误：

```
find("a", :text => "berlin")
# => Capybara::ElementNotFound:
#    Unable to find css "a" with text "berlin" 
```

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2015-04-23T19:06:13.463

取决于您使用的 gem 版本

```
find('a', text: 'Berlin', exact: true) 
```

可能会被弃用。在这种情况下，您将不得不使用

```
find('a', text: 'Berlin', match: :prefer_exact) 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2020-03-02T15:43:58.320

你也可以这样做：

```
find('a', text: 'Berlin', exact_text: true) 
```

这将找到 CSS。

并且使用 only`exact: true`而不是`exact_text`会向您显示一个消息，该`exact`选项仅对 XPATH 有效。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-01-31T18:03:39.693

只需使用[Capybara 的确切选项](http://rubydoc.info/github/jnicklas/capybara/#Exactness)：

```
Capybara.exact = true 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-06-13T15:31:54.477

我的偏好是使用`have_selector`with`text`和`exact_text: true`：

```
expect(body).to have_selector 'a', text: 'Berlin', exact_text: true 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-13T05:48:42.040

要在 capybara 中使用 click_link，您需要在使用它的方法中再添加一个属性。

```
click_link(link_name, :text => link_name) 
```

这里的**link_name**是链接的文本值。使用**:text**关键字，我们指定我们要单击具有与我们的要求完全匹配的文本值的链接。

# python - Python 获取数据包数据 TCP

> ID：13878947
> 
> 赞同：0
> 
> 时间：2012-12-14T12:43:35.327
> 
> 标签：python, windows, tcp, packet

你好，我有 python 嗅探器

```
def receiveData(s):
    data = ''
    try:
        data = s.recvfrom(65565)
        #k = data.rstrip()
    except timeout:
        data = ''
    except:
        print "An Error Occurred."
        sys.exc_info()
    return data[0]

 data = receiveData(s) 
```

s 是套接字。我正在获取数据，但它包含符号请帮助我如何将其转换为纯文本

我是 Python 的新手，如果这是一个非常愚蠢的问题，抱歉:)

这是数据示例`E\x00\x00)\x1a*@\x00\x80\x06L\xfd\xc0\xa8\x01\x84\xad\xc2#\xb9M\xb8\x00P\xed\xb3\x19\xd9\xedY\xc1\xfbP\x10\x01\x04\x16=\x00\x00\x00'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:45:24.757

您不能真正将其转换为“纯文本”。NUL（ASCII 0，显示为`\x00`）等字符无法显示，因此 python 以十六进制表示形式显示它们。

大多数嗅探/十六进制转储工具所做的是将不可打印的字符替换为例如点。你可以这样做：

```
import string
printable = set(string.printable)
print ''.join(x if x in printable else '.' for x in data) 
```

例子：

```
>>> data = 'E\x00\x00)\x1a*@\x00\x80\x06L\xfd\xc0\xa8\x01\x84\xad\xc2#\xb9M\xb8\x00P\xed\xb3\x19\xd9\xedY\xc1\xfbP\x10\x01\x04\x16=\x00\x00\x00'
>>> print ''.join(x if x in printable else '.' for x in data)
E..).*@...L.......#.M..P.....Y..P....=... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:00:31.413

转换为“纯文本”取决于您的数据的含义。

*   你有压缩文本吗？然后解压它。

*   你有编码数字吗？然后对其进行解码并显示数字。

在不知道数据语义的情况下，没有人可以告诉你。

当然，您可以只显示原始数据`print data.encode("hex")`，但我不确定这是否是您想要的。

# objective-c - Xcode 4.5 在创建新类时不会在 viewController.m 中创建一些方法

> ID：13878956
> 
> 赞同：0
> 
> 时间：2012-12-14T12:44:11.223
> 
> 标签：objective-c, ios, xcode

我是编程新手，我研究了一点 Xcode（4.2 版）。在那里，例如，如果您选择一个新的单视图应用程序，它将创建相应的 viewController.m 文件，其中包含以下方法：

```
-(void)viewDidUnload
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

等等。但是现在我已经下载了 Xcode 4.5，新建了一个新的单视图应用程序，在对应的 viewController.m 文件中只有 3 个方法：

```
-(void)viewDidLoad
-(void)didReceiveMemoryWarning
-(void)dealloc 
```

就这样。创建新的 viewController.m 文件时，如何自动添加所有这些方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:49:15.513

未添加这些方法是因为它们在 iOS6 中已被弃用。而不是使用`- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation`你应该覆盖这些：

`- (NSUInteger)supportedInterfaceOrientations`和`-(UIInterfaceOrientation)preferredInterfaceOrientationForPresentation`

关于 viewDidLoad - 在内存不足的情况下不再清除视图，因此永远不会调用此方法

# cordova - 使用集成的 youtube api 创建 phonegap 应用程序

> ID：13878958
> 
> 赞同：-1
> 
> 时间：2012-12-14T12:44:14.763
> 
> 标签：cordova, youtube-api

我正在尝试找到一个很好的指南，我可以在其中做这样的事情：

[http://yougapi.com/products/mobile/youtube_mobile/](http://yougapi.com/products/mobile/youtube_mobile/)

我正在使用 HTML、CSS 和 Javascript。

我认为 Youtube 是一个非常有趣的网站，我非常想通过 Phonegap 创建某种 APP，它可以做一些上面显示的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:51:09.690

[https://developers.google.com/youtube/](https://developers.google.com/youtube/)

在这里，您可以在 Google 的官方文档中找到一些不错的“入门教程”。
还有一些特别适用于 JS 的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:29:59.233

您已经尝试检查页面背后的代码并检查[js 文件](http://yougapi.com/products/mobile/youtube_mobile/include/js/script.js)？

我认为您使用 js 文件之类的东西解决了您的问题。

# python - 在熊猫中运行总和（无循环）

> ID：13878959
> 
> 赞同：17
> 
> 时间：2012-12-14T12:44:18.683
> 
> 标签：python, pandas

我想在熊猫数据框上建立一个运行总和。我有类似的东西：

```
10/10/2012:  50,  0
10/11/2012: -10, 90
10/12/2012: 100, -5 
```

我想得到：

```
10/10/2012:  50,  0
10/11/2012:  40, 90
10/12/2012: 140, 85 
```

因此，每个单元格都应该是其自身和所有先前单元格的总和，我应该如何在不使用循环的情况下做到这一点。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-14T13:25:21.820

As @JonClements mentions, you can do this using the [`cumsum`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.cumsum.html) DataFrame method:

```
from pandas import DataFrame
df = DataFrame({0: {'10/10/2012': 50, '10/11/2012': -10, '10/12/2012': 100}, 1: {'10/10/2012': 0, '10/11/2012': 90, '10/12/2012': -5}})

In [3]: df
Out[3]: 
              0   1
10/10/2012   50   0
10/11/2012  -10  90
10/12/2012  100  -5

In [4]: df.cumsum()
Out[4]: 
              0   1
10/10/2012   50   0
10/11/2012   40  90
10/12/2012  140  85 
```

# java - Java轴Web服务-返回对象列表使字段为空

> ID：13878962
> 
> 赞同：1
> 
> 时间：2012-12-14T12:44:31.800
> 
> 标签：java, object, service, web, axis

我创建了一个 Web 服务，其中包含一个返回对象数组的方法。对象很简单，只有两个字段：String value 和 Integer value。

当我在 tomcat 上运行服务并使用 Eclipse“启动 Web 服务资源管理器”功能并输入 wsdl 的 url 并调用返回这些对象数组的函数时，一切正常，我得到了预期的值（用于测试目的它是两个对象的列表。我得到的两个对象都包含正确的值）。

现在，当我使用 wsimport 创建存根类，然后创建一个调用该函数的测试客户端时，我确实得到了一个包含 2 个项目的列表，正如预期的那样。但是，当我想打印出对象字段的值时，它们为空，即整数值为 0，字符串值为空。

关于问题可能是什么的任何建议？我会假设当我使用 wsimport 创建类时会发生某种错误。

# c++ - 在opencv上跟踪多个对象

> ID：13878965
> 
> 赞同：0
> 
> 时间：2012-12-14T12:44:35.173
> 
> 标签：c++, opencv, cvblobslib

我想在 Visual Studio 2010 上使用 opencv 跟踪多个对象，所以我需要库 cvblobslib，我的问题是当我尝试构建提供的 VS 项目时出现错误。谁能告诉我我应该如何以正确的方式做到这一点

提前致谢

# c# - 如何检查自定义模型绑定器中的属性属性

> ID：13878967
> 
> 赞同：7
> 
> 时间：2012-12-14T12:44:42.847
> 
> 标签：c#, asp.net-mvc, model-binding

我想强制我系统中的所有日期都是有效的，而不是将来，所以我在自定义模型绑定器中强制它们：

```
class DateTimeModelBinder : IModelBinder {
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext) {
        var value = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);
        try {
            var date = value.ConvertTo(typeof(DateTime), CultureInfo.CurrentCulture);

            // Here I want to ask first if the property has the FutureDateAttribute
            if ((DateTime)date > DateTime.Today) {
                bindingContext.ModelState.AddModelError(bindingContext.ModelName, "No se puede indicar una fecha mayor a hoy");
            }

            return date;
        }
        catch (Exception) {
            bindingContext.ModelState.AddModelError(bindingContext.ModelName, "La fecha no es correcta");
            return value.AttemptedValue;
        }
    }

} 
```

现在，对于一些例外情况，我想允许一些日期在未来

```
 [Required]
    [Display(Name = "Future Date")]
    [DataType(DataType.DateTime)]
    [FutureDateTime] <-- this attribute should allow the exception
    public DateTime FutureFecha { get; set; } 
```

这是属性

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = false, Inherited = false)]
public class FutureDateTimeAttribute : Attribute {

} 
```

现在，问题是：**如何检查该属性是否存在于`BindModel`方法中？**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-14T13:21:17.283

在绑定*模型*属性期间，我们可以通过以下方式访问属性所有者：

> `bindingContext.ModelMetadata.ContainerType`.

因此，下面的代码片段应该为您将*FutureFecha*属性的变量`hasAttribute`设置为 true

 *```
var holderType = bindingContext.ModelMetadata.ContainerType;
if (holderType != null)
{
  var propertyType = holderType.GetProperty(bindingContext.ModelMetadata.PropertyName);
  var attributes = propertyType.GetCustomAttributes(true);
  var hasAttribute = attributes
    .Cast<Attribute>()
    .Any(a => a.GetType().IsEquivalentTo(typeof (FutureDateTime)));
  if(hasAttribute) ...
} 
```*

# oracle - Oracle 商业智能 (OBIEE) 中的多页分析

> ID：13878969
> 
> 赞同：0
> 
> 时间：2012-12-14T12:44:47.747
> 
> 标签：oracle, business-intelligence, obiee

是否可以在 Oracle 商业智能 (OBIEE) 中创建多页分析？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:18:49.837

这取决于您实际上要做什么，但是...

您可以使用数据透视表，并通过在“页面”区域中放置一列，您将在该列上获得一个下拉列表，其中每个值都有不同的页面。

拥有不同分析页面的真正方法是使用具有不同页面的仪表板（可以选择使用“编辑仪表板”屏幕顶部的图标添加页面），可能使用钻取/交互功能在之间移动他们。

BI Publisher 当然是另一种选择。

# networking - 在主监听循环之外处理网络协议步骤

> ID：13878973
> 
> 赞同：0
> 
> 时间：2012-12-14T12:45:08.430
> 
> 标签：networking, udp

我最近正在处理网络编程（尤其是 P2P 系统）。我处理的常用程序在某个地方有这样的东西（在它自己的线程中运行）：

```
while True:
    handle(receive()) 
```

如何处理一系列相关的发送/接收操作。例如，当我想要类似的东西时：

```
def inviteNode(receiver):
    send(receiver, INVITE)

    if receive() == OK:
        send(receiver, SOME_INFORMATION)
        ... 
```

我的意思是几个相互依赖并具有一定顺序的发送/接收操作。有类似上面的东西会很好`inviteNode()`（因为协议的所有步骤都在代码中的同一位置，你可以通过查看代码来追溯顺序），但是`receive()`在我的监听循环之外调用只是赢了t 这样做，因为应该如何决定哪个`receive()`可以接收数据。

拥有全局状态是解决此问题的唯一方法吗？在做完第一个之后`send(receiver, INVITE)`，我是否必须记住某个地方，我希望`OK`从那个特定的节点接收到一个，我刚刚发送`INVITE`到？当我有几个不同的这些相关的发送/接收操作时，这不是很复杂吗？

PS：只是为了确保：这是关于 UDP 连接的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:00:49.810

似乎您需要使用套接字轮询。您可以使用 select() 系统调用（跨平台解决方案，但它不如使用特殊的系统相关 API 那样快），或者如果您的目标是 linux，您可以尝试使用 epoll API。

主要思想是：你有一些网络套接字，它们可以处于不同的状态（例如，可以接收数据）。

您可以查询此套接字集以获取某些事件（读取、写入、异常）并根据您的需要执行所需的操作。

例如，Nginx http 服务器就使用了这种架构。

此外，您还需要保存上下文，例如应该通知和检查哪些套接字，已经接收或发送了哪些数据，以及您可能需要的其他信息。

这有点复杂，但可以完成这项工作：[有限状态机](http://en.wikipedia.org/wiki/Finite-state_machine)。

*   [http://linux.die.net/man/2/select](http://linux.die.net/man/2/select)
*   [http://msdn.microsoft.com/en-us/library/windows/desktop/ms740141%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740141%28v=vs.85%29.aspx)

# javascript - 如何为 angularjs 编写一个指令来替换 dom 元素但保持绑定

> ID：13878974
> 
> 赞同：6
> 
> 时间：2012-12-14T12:45:11.113
> 
> 标签：javascript, angularjs

从这个问题开始： [如何为 angularjs 编写一个指令，在不使用 ng-transclude 的情况下替换 dom 元素？](https://stackoverflow.com/questions/13872402/how-to-write-a-directive-for-angularjs-that-replaces-dom-elements-without-using/13873284#13873284)

我希望编写一个指令来更改 dom 元素，然后保留所有属性和绑定。

```
<g:text x={{myX}} y={{myY}} font-size=10>Hello There</g:text> 
```

到

```
<text x={{myX}} y={{myY}} font-size=10>Hello There</text> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-01T15:59:11.340

据我所知，Angular 会自动将属性移植到新元素。无需自己遍历它们。

在您的情况下，如果您想保留内容，您还需要嵌入内容。

```
app.directive('myText', function() {
    return {
        replace: true,
        template: '<text ng-transclude></text>'
    }
}); 
```

这是我记忆中最深刻的，但我相信类似的事情会奏效。原元素的每一个属性都会被移植到新元素中，元素的内容也会被嵌入。绑定保存和所有。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-14T14:06:17.790

在编译期间使用相同的逻辑并复制属性：

```
 app.directive('gText', function() {
    return {
        restrict: 'E',
        compile: function(tElement, tAttrs) {
            var attrs = tElement[0].attributes;
            tElement.replaceWith('<text>' + tElement.text() + '</text>');            
            for (var i=0; i < attrs.length; i++) {
                tElement.attr(attrs.item(i).nodeName, attrs.item(i).nodeValue);               
            }
        }
    }
}); 
```

小提琴：http: [//jsfiddle.net/YWfSF/](http://jsfiddle.net/YWfSF/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-05T16:11:43.037

（响应 Jason Swett 的更新请求）

这适用于 Angular 1.4.9（以及更早的概率）

```
return {
      restrict: 'E', // optional
      replace: true, // optional
      template: '<span data-ng-transclude></span>',
      transclude: true,
      link: function (scope, el, attrs) .........
} 
```

关于这方面的一篇很棒的文章在...

[https://www.accelebrate.com/blog/angularjs-transclusion-part-1/](https://www.accelebrate.com/blog/angularjs-transclusion-part-1/)

# iphone - 如何将 UIButton 添加到 UIButton

> ID：13878980
> 
> 赞同：0
> 
> 时间：2012-12-14T12:45:20.230
> 
> 标签：iphone, objective-c, ios, ipad, uibutton

如何在 UIButton 上添加 UIButton？

这样，如果我移动父 UIButton 顶部的 UIButton 也会移动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:50:30.147

```
UIButton *testButton = [UIButton buttonWithType:UIButtonTypeCustom];
testButton.backgroundColor = [UIColor redColor];

UIButton *smallerButton = [UIButton buttonWithType:UIButtonTypeCustom];
smallerButton.backgroundColor = [UIColor greenColor];
[testButton addSubview:smallerButton];

[self.view addSubview:testButton]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:48:31.877

```
[oneButton addSubview:otherButton]; 
```

请记住，这`UIButton`是`UIView`...的子类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T12:49:08.827

```
UIButton *parentBtn;
UIButton *childBtn;

parentBtn = [UIButton buttonWithType: // init the button];
childBtn = //same for child btn

[self.view addSubview:parentBtn]; //add the parent button to the view
[parentBtn addSubview:childBtn]; //add the child button on top of the parent button 
```

# c# - 从计划代理保存图像时出现 System.UnauthorizedAccessException

> ID：13878986
> 
> 赞同：4
> 
> 时间：2012-12-14T12:45:53.377
> 
> 标签：c#, windows-phone-8, bitmapimage, lockscreen, unauthorizedaccessexcepti

我正在构建一个 WP8 应用程序，它使用来自 Internet 的图像更改锁屏的背景。我按照计划代理和锁屏上的教程进行操作，但我遇到了问题。

当我尝试从 Scheduled Agent 下载新的背景图像时，我得到了这个：

```
+       $exception  {System.UnauthorizedAccessException: Invalid cross-thread access.
   at MS.Internal.XcpImports.CheckThread()
   at System.Windows.DependencyObject..ctor(UInt32 nativeTypeIndex, IntPtr constructDO)
   at System.Windows.Media.Imaging.BitmapImage..ctor()
   at TileLockAgent.ScheduledAgent.lockScreenClient_OpenReadCompleted(Object sender, OpenReadCompletedEventArgs e)
   at System.Net.WebClient.OnOpenReadCompleted(OpenReadCompletedEventArgs e)
   at System.Net.WebClient.OpenReadOperationCompleted(Object arg)
   at System.Threading.WaitCallback.Invoke(Object state)
   at System.Threading.QueueUserWorkItemCallback.WaitCallback_Context(Object state)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()
   at System.Threading.ThreadPoolWorkQueue.Dispatch()
   at System.Threading._ThreadPoolWaitCallback.PerformWaitCallback()}   System.Exception {System.UnauthorizedAccessException} 
```

代码是：

```
string fileName;

try
{
    var currentImage = LockScreen.GetImageUri();

    if (currentImage.ToString().EndsWith("_1.jpg"))
    {
        fileName = "LockBackground_2.jpg";
    }
    else
    {
        fileName = "LockBackground_1.jpg";
    }
}
catch
{
    // lockscreen not set or prev owned by other app          
    fileName = "LiveLockBackground_1.jpg";
}

using (var isoStore = IsolatedStorageFile.GetUserStoreForApplication())
{
    var bi = new BitmapImage();
    bi.SetSource(e.Result);
    var wb = new WriteableBitmap(bi);
    using (var isoFileStream = isoStore.CreateFile(fileName))
    {
        var width = wb.PixelWidth;
        var height = wb.PixelHeight;
        Extensions.SaveJpeg(wb, isoFileStream, width, height, 0, 100);
    }
} 
```

我真的不知道如何解决这个问题。如果 BitmapImage 不起作用，如何将图像保存在计划代理中？我正在做“跨线程访问”是什么意思？图像仅由预定代理创建和使用，因此任何人都不应访问它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T13:22:40.597

问题源于 BitmapImage 无法在 UI 线程之外实例化。您可以通过将调用包装在 Dispatcher Invoke 调用中来解决此问题。

但是，您需要确保正确调用 NotifyComplete。因此，您可能需要将 NotifyComplete 放入 Dispatcher 调用中。

```
 Deployment.Current.Dispatcher.BeginInvoke(() =>
    {
        UpdateSyncPictureName(...);
        NotifyComplete();
    }); 
```

来源：[在隔离存储上工作时调度代理上的无效交叉异常](https://stackoverflow.com/questions/12898018/invalid-cross-exception-on-schedule-agent-when-working-on-isolated-storage)

# android - 如何访问和引用全局类中的变量和函数

> ID：13878992
> 
> 赞同：1
> 
> 时间：2012-12-14T12:46:33.557
> 
> 标签：android, class, android-activity

我正在创建一个有五个活动的应用程序。我有一个类，其中包含用于所有五项活动的函数和变量。我在每个活动中创建了一个局部变量，像这样初始化类；

```
localclass = new globalclass(getResouces()); 
```

我是 android/java 开发的新手，当我尝试某些东西时，我想知道 memoryfootprints 之类的。在开始的第一个活动中，如前所述设置 localclass。然后我尝试从其他活动中访问这个变量，并在活动第二、第三等中成功地做到了这一点；

```
localclass = com.firstactivity.localclass; 
```

我使用的变量之一是对应用程序资源的引用。从第二个开始，我就没有这样的资源了；

```
res = getResources(); 
```

但是像这样；

```
res = com.firstactivity.localclass.res; 
```

只要变量是静态的，这就会起作用。我也以同样的方式访问 globalclass 中的函数。

这是不好的做法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T12:51:36.357

通常使用静态类作为变量持有者确实不是一个好习惯。尝试通过意图传递您在其他活动中需要的变量。请参阅[this](https://stackoverflow.com/questions/7026507/why-are-static-variables-considered-evil)，因为它更多地解释了为什么这不是一个好方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T12:52:34.160

看看[Application 类](http://developer.android.com/reference/android/app/Application.html)。您创建一个扩展应用程序的类：

```
public class YourApplication extends Application {
    // functions, variables, whatever it is you need across your whole program
} 
```

您可以通过在您的活动/服务中调用它来获得对您的应用程序的引用：

```
YourApplication app = (YourApplication)getApplication(); 
```

另外，请记住在清单文件中声明应用程序。

```
<application android:name="the.package.name.YourApplication" /> 
```

# java - SAXParser 和 XMLReader 之间的区别

> ID：13878998
> 
> 赞同：7
> 
> 时间：2012-12-14T12:46:40.780
> 
> 标签：java, xml-parsing, saxparser

如果我只需要解析 XML，下面两个片段有什么区别？

1.通过使用 SAXParser`parse`方法：

```
SAXParserFactory sfactory = SAXParserFactory.newInstance();
SAXParser parser = sfactory.newSAXParser();
parser.parse(new File(filename), new DocHandler()); 
```

`parse`现在使用从 SAXParser 获取的XMLReader方法

```
SAXParserFactory sfactory = SAXParserFactory.newInstance();
SAXParser parser = sfactory.newSAXParser();
XMLReader xmlparser = parser.getXMLReader();
xmlparser.setContentHandler(new DocHandler());
xmlparser.parse(new InputSource("test1.xml")); 
```

尽管获得了更大的灵活性，但还有其他区别吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T13:46:20.520

仅委托给内部 instanceof的`parse`方法通常更方便。对于一些更高级的用例，您必须使用. 一些例子是`SAXParser``XMLReader``XMLReader`

*   设置实现的非标准特性
*   将不同的类设置为`ContentHandler`,`EntityResolver`或`ErrorHandler`
*   解析时切换处理程序

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T13:36:50.693

正如您所注意到的，XMLReader 属于 org.xml.sax（来自[http://www.saxproject.org/](http://www.saxproject.org/)），而 SAXParser 属于 javax.xml.parsers。SAXParser 在内部使用 XMLReader。您可以直接使用 XMLReader

```
XMLReader xr = XMLReaderFactory.createXMLReader();
xr.setContentHandler(handler);
xr.setDTDHandler(handler);
... 
```

但是您会注意到 SAXParser 使用起来更方便。也就是说，为方便起见，添加了 SAXParser。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T12:51:46.550

[http://docs.oracle.com/javase/1.5.0/docs/api/org/xml/sax/XMLReader.html](http://docs.oracle.com/javase/1.5.0/docs/api/org/xml/sax/XMLReader.html)。查看 XML 阅读器的链接并查看 sax 解析器的以下链接。[http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/parsers/SAXParser.html](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/parsers/SAXParser.html)。

使用不同的解析器取决于您希望解析器做什么。如果您修改、删除 xml 中的内容，您可以使用 W3C Dom 解析器。如果您只想解析和获取元素，您可以使用 SAX 解析器。那里有几个。所以这真的取决于你想要什么。