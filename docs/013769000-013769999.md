# StackOverflow 问答 13769000-13769999

# html - 左右浮动表格有问题

> ID：13769000
> 
> 赞同：1
> 
> 时间：2012-12-07T18:36:03.797
> 
> 标签：html, css

我在下面有一个jsfiddle：

[http://jsfiddle.net/C95uc/3/](http://jsfiddle.net/C95uc/3/)

我的 css 有问题。我想在左侧显示两个下拉菜单，我想在右侧显示文本输入，但我该怎么做呢？

下面是html代码：

```
<div class='lt-container'>
<form id='moduleForm'>
<select name="module" id="modulesDrop">
<option value="">Please Select Module</option>
    </select>
    </form>
</div>

<div  class='lt-container' >
<form id='moduleExistForm'>
 <select name="module" id="modulesDrop">
<option value="">Please Select Course</option>
    </select> </form> 
</div>

<div  id='rt-container' >
<form id='detailsForm'>

    <table>
    <tr>
    <th></th>
    <td><input type='hidden' id='idmodule' name='moduleid' value='' /> </td>
    </tr>
    <tr>
    <th>Module ID:</th>
    <td><input type='text' id='nomodule' name='moduleno' readonly='readonly' value='' /> </td>
    </tr>
    <tr>
    <th>Module Name:</th>
    <td><input type='text' id='namemodule' name='modulename' readonly='readonly' value='' /> </td>
    </tr>
    <tr>
    <th>Credits:</th>
    <td><input type='text' id='credits' name='creditsname' readonly='readonly' value=''/> </td>
    </tr>
    </table>
    <div id='moduleAlert'></div>

    </form>

    </div> 
```

CSS：

```
.lt-container, #rt-container {
 float: left;   
 }

#rt-container {
 clear: right;
 margin-left: 5%;    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:40:40.433

[http://jsfiddle.net/C95uc/4/](http://jsfiddle.net/C95uc/4/)

```
<div class='lt-container'>
<form id='moduleForm'>
<select name="module" id="modulesDrop">
<option value="">Please Select Module</option>
    </select>
    </form>

<form id='moduleExistForm'>
 <select name="module" id="modulesDrop">
<option value="">Please Select Course</option>
    </select> </form> 
</div> 
```

两者`<select>`都在同一个`<div class='lt-container'>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:42:13.870

这两个下拉列表不会堆叠在一起，因为您已经为它们分配了一个“float:left”属性，这使得它们并排排列。相反，将它们包装在一个 div 中并使该 div 向左浮动。

```
<div class="lfloat">
  <!-- Both Dropdowns -->
</div> 
```

CSS：

```
.lfloat {
 float:left;
} 
```

请务必在表单中添加“float:right”属性，使其不会出现在两个下拉列表下方。

示例：http: [//jsfiddle.net/C95uc/5/](http://jsfiddle.net/C95uc/5/)

# javascript - JQuery Cycle，停在最后一张幻灯片

> ID：13769004
> 
> 赞同：0
> 
> 时间：2012-12-07T18:36:27.053
> 
> 标签：javascript, jquery, jquery-cycle

我正在使用 JQuery 幻灯片在我的网站上显示一些 div。

用户有一个上一个和下一个按钮来导航。

假设我在幻灯片中有 4 张幻灯片。

默认情况下，当我在第一张幻灯片时点击上一张将带我到幻灯片 4，在幻灯片 4 上点击下一张将带我到幻灯片 1。

如何停止这种行为并在幻灯片的每一端放置一个停止点？

插件文档在[这里](http://jquery.malsup.com/cycle/options.html)，遗憾的是我的技能在这一点上并没有让我做太多事情。

# android - 文档和图像文件未在 android 中打开

> ID：13769006
> 
> 赞同：0
> 
> 时间：2012-12-07T18:36:37.153
> 
> 标签：android, image, android-intent, doc

我正在尝试使用意图操作打开文件，但无法打开 pdf 和图像文件

**对于图像**，所有应用程序都会崩溃（包括图库应用程序）

**对于 doc/docx**，我使用的是办公套件，但会从包 (java.lang.RuntimeException) 中给出运行时异常。请看下面的代码：

```
Intent intent = new Intent();
            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            intent.setAction(Intent.ACTION_VIEW);

if (extension.equalsIgnoreCase("jpg")
                    | extension.equalsIgnoreCase("jpeg")
                    | extension.equalsIgnoreCase("png")
                    | extension.equalsIgnoreCase("bitmap")) {
                intent.setDataAndType(Uri.parse(fileName), "image/*");
            } else if (extension.equalsIgnoreCase("xml")
                    | extension.equalsIgnoreCase("txt")
                    | extension.equalsIgnoreCase("csv")) {
                intent.setDataAndType(Uri.parse(fileName), "text/*");
            } else if (extension.equalsIgnoreCase("mp4")
                    | extension.equalsIgnoreCase("3gp")) {
                intent.setDataAndType(Uri.parse(fileName), "video/*");
            } else if (extension.equalsIgnoreCase("pdf")) {
                intent.setDataAndType(Uri.parse(fileName), "application/pdf");

                System.out.println("Pdf file to open "+fileName);

            } else if (extension.equalsIgnoreCase("doc")
                    | extension.equalsIgnoreCase("docx")) {

                intent.setDataAndType(Uri.parse(fileName), "application/word");

            }

            context.startActivity(intent); 
```

但是，如果我尝试通过文件资源管理器打开这些文件，则两个文件都正确打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:26:57.190

尝试这个：

```
Intent intent = new Intent(Intent.ACTION_VIEW);

        //intent.setAction(Intent.ACTION_VIEW);

        if (extension.equalsIgnoreCase("jpg")
                | extension.equalsIgnoreCase("jpeg")
                | extension.equalsIgnoreCase("png")
                | extension.equalsIgnoreCase("bitmap")) {
            intent.setDataAndType(Uri.parse("file://"+fileName), "image/*");
        } else if (extension.equalsIgnoreCase("xml")
                | extension.equalsIgnoreCase("txt")
                | extension.equalsIgnoreCase("csv")) {
            intent.setDataAndType(Uri.parse("file://"+fileName), "text/*");
        } else if (extension.equalsIgnoreCase("mp4")
                | extension.equalsIgnoreCase("3gp")) {
            intent.setDataAndType(Uri.parse("file://"+fileName), "video/*");
        }else if(extension.equalsIgnoreCase("pdf")){
            intent.setDataAndType(Uri.parse("file://"+fileName), "application/pdf");
        }else if( extension.equalsIgnoreCase("doc")
                | extension.equalsIgnoreCase("docx")){
            intent.setDataAndType(Uri.parse("file://"+fileName), "text/*");
        }
        // else
        // if(extension.equalsIgnoreCase("mp3")|extension.equalsIgnoreCase("amr")|extension.equalsIgnoreCase("wav")){
        // intent.setDataAndType(Uri.parse(fileName), "audio/mp3");
        // }
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        context.startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:10:04.767

我认为它的文件 uri 类没有返回文件的问题我发现了错误

这是 Uri.parse(fileName)

我现在使用**Uri.fromFile(fileName)**它现在可以工作了。

# java - Jetty 服务器在停止后留下线程

> ID：13769007
> 
> 赞同：1
> 
> 时间：2012-12-07T18:36:39.037
> 
> 标签：java, jetty, embedded-jetty

我在一个 Scala 项目中工作，该项目使用 Jetty 来提供由 Scalatra servlet 生成的网页。

我在停止服务器时遇到了麻烦。它关闭了，但它留下了一些阻止我的应用程序关闭的线程。

这就是我实例化服务器的方式：

```
val server = new Server(8080)
val context = new WebAppContext()
context.setResourceBase("visualization")
context.addServlet(new ServletHolder(new CallTreeServlet(data)), "/callTree/*");
context.addServlet(new ServletHolder(new DataLoadingServlet(data)), "/data/*");
server.setHandler(context)
server 
```

`sbt`我使用控制台中的相应方法启动和停止它。当我停止服务器时，它不再正确地提供页面，但由于某些线程仍在运行，我的应用程序仍在运行。

有没有办法强制码头及其所有线程停止？

您可以在[此处找到我在关闭操作后收到的错误的完整日志](http://pastebin.com/8brvkcDR)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T23:10:32.103

您是否有线程转储来说明哪些线程仍在运行？

请注意，这种事情在 bugzilla 报告中可能比在 stackoverflow 中更好地报告。

# python - 获取所有超过 x 天的文件夹（os.walk），删除

> ID：13769008
> 
> 赞同：2
> 
> 时间：2012-12-07T18:36:38.963
> 
> 标签：python

如何简洁地表达“获取所有超过 x 天的文件夹”

我有一个方法getOldDirs（dirPath，olderThanDays），它必须遍历给定的根文件夹并返回一个早于7天的文件夹列表。

我从另一个函数 cleanOldFolders() 调用上述函数。cleanOldFolders() 将删除那些类似于“rm -Rf

我拥有的代码，如何简洁地修改循环：

```
"""
Clean oldFolders
"""
def cleanOldFolders(self):
    pathString = self.folderRoot + '/' + self.configMode + '/' + self.appId
    oldDirList = self.getOldDirs(pathString, 7);
    # Notify user that the following folders are deleted

    # remove all old dirs perhaps using shutil.removetree for each folder oldDirList, rm -Rf

    return 
```

获取旧目录：

```
"""
get all subfolders under dirPath older than olderThanDays
"""
def getOldDirs(self,dirPath, olderThanDays):
    # What is the concise way of expressing Get me list of all dir/subdirs from "dirPath" that are older than "olderThanDays"
    # I know I have to use os.walk,
    # I want a concise loop like this - but should recurse using os.walk
    a = [os.path.join(dirPath, myfile) for myfile in os.listdir(dirPath)
            if (os.path.isdir(os.path.join(dirPath, myfile)) and
                (self.isOlder(os.path.join(dirPath, myfile), olderThanDays))
        )]

#  for root, dirs, files in os.walk(dirPath):
#      for name in dirs:
#          print os.path.join(root, name)

    return a 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T20:22:50.443

关于`os.walk()`它的好处之一是它为您执行递归。对于它在您的应用程序中的使用，指定可选的关键字参数***topdown***很重要，因为`False`它的默认值是`True`并且`os.rmdir()`不会删除非空目录。

这意味着您的代码需要在删除子目录本身*之前*删除它遇到的每个子目录中的所有文件和子目录。为了便于执行此操作，返回的目录列表`getOldDirs()`应按照需要删除子目录的顺序排列。

还需要注意的是，在下文中，目录的年龄是用小数天数计算的，而不是整数天，这意味着秒数，并且仅说 6 天 23 小时 59 秒的那个不会被放入在要删除的列表上，即使它距离足够大只有两秒钟的时间。

```
import os
import time

def getOldDirs(self, dirPath, olderThanDays):
    """
    return a list of all subfolders under dirPath older than olderThanDays
    """
    olderThanDays *= 86400 # convert days to seconds
    present = time.time()
    for root, dirs, files in os.walk(dirPath, topdown=False):
        for name in dirs:
            subDirPath = os.path.join(root, name)
            if (present - os.path.getmtime(subDirPath)) > olderThanDays:
                yield subDirPath 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T19:19:28.570

这应该是一个起点。

```
import os
from time import time as _time

SEVEN_DAYS = 60*60*24*7

def get_old_dirs(dir_path, older_than=SEVEN_DAYS):
    time_now = _time()
    for path, folders, files in os.walk(dir_path):
        for folder in folders:
            folder_path = os.path.join(path, folder)
            if (time_now - os.path.getmtime(folder_path)) > older_than:
                yield folder_path

list_of_folders = list(get_old_dirs("/some/path")) 
```

此外，如果您不想进入`older_than`几天前的文件夹（因为您要删除它们），您可以修剪搜索树，从`folders`列表中删除文件夹名称

```
def get_old_dirs(dir_path, older_than=SEVEN_DAYS):
    time_now = _time()
    for path, folders, files in os.walk(dir_path):
        for folder in folders[:]:
            folder_path = os.path.join(path, folder)
            if (time_now - os.path.getmtime(folder_path)) > older_than:
                yield folder_path
                folders.remove(folder) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T19:30:02.930

这使用 os.walk 并为您获取超过 7 天的文件列表

```
import os
from datetime import date

old_dirs = []
today = date.today()

for root, dirs, files in os.walk(start_path):
    for name in dirs:
        filedate = date.fromtimestamp(os.path.getmtime(os.path.join(root, name)))
        if (today - filedate).days > 7:                                            
            old_dirs.append(name) 
```

# colors - 如何在 SSRS 的双轴图中获得颜色匹配？

> ID：13769009
> 
> 赞同：1
> 
> 时间：2012-12-07T18:36:52.453
> 
> 标签：colors, charts, ssrs-2008, reporting-services

我有一个双轴图表，其中显示了条形图和折线图，以获取有关某些动物的信息。我想让“Cats %”（条形图）和“Cats”（线形）的颜色相同。我还没有找到任何方法来匹配颜色？有任何想法吗？

下面的例子： ![图表示例](../Images/1c1d3223d53a385f92566adeaccd0faf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T20:45:25.283

我建议创建一个自定义调色板[http://technet.microsoft.com/en-us/library/dd239355.aspx](http://technet.microsoft.com/en-us/library/dd239355.aspx)

“如果您使用的是自定义调色板，您可以更改颜色的顺序以更改图表中不同系列的颜色。”

# android - Android ant 和 bash 脚本

> ID：13769010
> 
> 赞同：0
> 
> 时间：2012-12-07T18:36:55.167
> 
> 标签：android, bash, shell, ant

我对 BASH 脚本的接触为 0，这是我很想学习的东西。我不知道如何根据`ant debug`Android 构建的输出运行条件语句。

我想说的是

```
if(`ant debug` == SUCCESS) {
  // EXECUTE THESE COMMANDS
} else {
  // EXECUTE THESE COMMANDS
} 
```

如何确定`ant debug`shell 脚本中是否已通过或失败？

**解决方案**

好的，这就是我所拥有的：

```
ant clean

if ant debug; then
    echo "success"
else
    echo "failure"
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:46:48.040

我会给你一个快速的总结。

在 Bash 中，条件基于程序的退出代码。的退出代码`0`被接受为真，而其他一切都被接受为假。

例如，`true`程序总是以退出代码 退出`0`，这意味着可能出现这样的情况：

```
if true;
  echo "It is true"
fi 
```

大多数命令都尊重这个系统，但不是每个程序都这样做。首先要检查的是 ant 在成功和失败时返回的退出代码。您可以使用 . 检查上一个命令的退出代码`$?`。

这是一个例子：

```
$ true
$ echo $?
0
$ false
$ echo $?
1 
```

如果 ant 确实正确地遵守了退出代码系统，那么应该可以执行以下操作：

```
if ant debug; then
  echo success
else
  echo failure
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:07:22.447

*使用调试任务*调用 Ant的快速`man ant`演示。Ant 的任务有点像用户定义的*XML 脚本*，默认情况下，Ant在当前目录中搜索文件。您可以使用 android 工具生成文件，但是会保留一个模板，您可以[在线查看它](http://pastebin.com/q9dWbtWt)（第 1005 行定义了目标）。`ant debug`**`build.xml``android-sdk/tools/ant``debug`**

 **所以`ant debug`不是真正的命令，也不应该放在脚本工具链中。但是，如果您发现自己的输出稳定并感到勇敢，则始终可以比较字符串。这是[权威指南](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_07_01.html)。

```
if [ `ant debug` = $SOMETHING ]; then
  echo Success
else
  echo Failure
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T18:52:17.123

我对 Ant 调试一无所知，但是有两种方法可以在 Bash 中做你想做的事情。第一个是像你展示的那样测试输出：

```
if test $(ant debug) == 'SUCCESS'; then
    # do stuff
else
    # do other stuff
fi 
```

`$(.....)`您可以通过使用反引号而不是像您在问题中写的那样使您的 shell 脚本可移植到 Bourne shell 上的其他变体，但是如果您的命令稍后涉及嵌套引号，这就会变得很麻烦。

第二种方法更健壮一点，是测试命令的*退出值*而不是它们的输出。这取决于 Ant（或其他）具有已记录且稳定的退出代码，但这意味着如果命令的输出发生更改，您的脚本将继续工作。例如，POSIX 标准规定，如果一个程序成功地完成了它应该做的任何事情，它应该以零值 exit()：

```
ant debug > /dev/null
ant_exit_code=$?
# other commands can safely go here now that $? is captured

if test $ant_exit_code -eq 0; then
    # do stuff
else
    # do other stuff
fi 
```

是的，Bourne shell 确实以“fi”结束了 if 块。:-)**

# html - MVC4 忽略片段/锚点

> ID：13769012
> 
> 赞同：0
> 
> 时间：2012-12-07T18:37:05.350
> 
> 标签：html, asp.net-mvc-4

我在 MVC4 中遇到锚标签问题。我有一个简单的页面，其中包含锚点标签，用于锚定页面下方的`<a href="#lower">`名称。`<a name="lower">`

*但是，我认为*MVC4 路由会产生干扰并导致锚刷新页面并奇怪地在该锚处开始 html。（*奇怪？*）

无论如何，我的搜索没有任何结果，我只需要它忽略它并执行普通 html 页面会执行的操作并向下滚动到锚名称。

有谁知道发生了什么？

# mongodb - 破解 ObjectId 以指示对象类型

> ID：13769013
> 
> 赞同：3
> 
> 时间：2012-12-07T18:37:12.373
> 
> 标签：mongodb, bson, objectid

我想通过像这样操作 machineId 来破解 ObjectId：

```
 <timestamp> <machineId> <processId> <inc>
UserId   XXXXXXXX    XXXX01      XXXX        XXXXXX
OrderId  XXXXXXXX    XXXX02      XXXX        XXXXXX
CardId   XXXXXXXX    XXXX03      XXXX        XXXXXX
... 
```

基本思路是用 1 字节的 machineId 来区分对象类型，我的问题是：**这样做有没有问题（考虑唯一性和分片）？**

*--- 12 月 9 日更新 ---*

由于规范和实现之间的差异[为什么 bson java 实现使用 4 字节 inc 字段？](https://stackoverflow.com/questions/13778071/why-the-bson-java-implementation-uses-4-bytes-inc-field)，我将把我的解决方案更改为以下样式：

```
 <timestamp> <machineId> <processId> <inc>
UserId   XXXXXXXX    XXXX        XXXX        01XXXXXX
OrderId  XXXXXXXX    XXXX        XXXX        02XXXXXX
CardId   XXXXXXXX    XXXX        XXXX        03XXXXXX
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:29:30.560

假设两个字节的机器 ID 对于您的部署来说是足够独特的，那应该没问题。好主意！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T19:32:15.387

只要你不违反规范，并且 ObjectID 仍然是正确的形式，你没有理由不能这样做，它当然会为你节省一些空间。

不过有几点注意事项：

首先，如果您打算通过重载驱动程序中的代码并更改 ObjectID 的生成方式来执行此操作，那么您将按原样插入修改后的 ObjectID，而永远不会插入旧的“正常”对象 ID（大多数驱动程序是实际生成 ObjectID 的驱动程序，而不是服务器，尽管它也可以是服务器）。

这种情况下，它被插入已经改变，将是首选。原因？

如果您改为更新和更改生成的 ObjectID，或者如果您稍后更改类型并且必须更改 ObjectID，如果您尝试将该字段用作进一步的分片键（或其一部分），则可能会遇到问题（ shard key 是不可变的）。当您必须更新分片键时，在分片环境中解决此问题的方法是删除有问题的文档并重新添加它而不是更新。

此外，更新方法是您可以避免的不必要操作（您可能担心也可能不担心）。

最后，有唯一性 - 因为机器 ID 无论如何都不会改变很多，我认为你不会在这里遇到任何问题， inc 字段应该在一秒钟内处理碰撞，但要小心以防您用于更改 ObjectID 的方法导致发生奇怪的事情。

# c++ - 使用 RtAudio 进行音频平移

> ID：13769014
> 
> 赞同：1
> 
> 时间：2012-11-07T14:36:21.960
> 
> 标签：c++, open-source

我使用 RtAudio 库。

我想实现一个可以控制平移的音频程序（例如，将声音从左声道转移到右声道）。

在我的具体情况下，我在双工模式下使用 RtAudio（您可以在此处找到示例：[双工模式](http://www.music.mcgill.ca/~gary/rtaudio/duplex.html)）。这意味着我将麦克风输入连接到扬声器输出。

我在网上搜索过，但没有找到任何有用的东西。我应该在输出缓冲区上应用过滤器吗？什么样的过滤器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:57:25.537

要平移声音，您只需降低一个通道的音量，同时增加另一个通道的音量。但是你必须以这样一种方式来做到这一点，即整体音量不会改变，因为中央声相将有两个产生声音的通道而不是一个（全左或全右声相）。

更多信息在这里： http: [//logicquicktips.blogspot.com/2006/10/laws-of-pan.html](http://logicquicktips.blogspot.com/2006/10/laws-of-pan.html)

# regex - 在一个句子中匹配括号内的单词的正则表达式

> ID：13769022
> 
> 赞同：2
> 
> 时间：2012-12-07T18:38:27.877
> 
> 标签：regex

我需要一个正则表达式来匹配一个句子中括号内的单词。例如：

```
"this is [stack]overflow. I [[love]this[website]]." 
```

我想从上面的句子中匹配的是单词 stack、love 和 website。

我已经尝试了以下正则表达式`\[(.*[^\]\[])\]`，但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T18:40:39.963

以下应该有效：

```
\[([^\[\]]*)\] 
```

示例：[http ://www.rubular.com/r/uJ0sOtdcgF](http://www.rubular.com/r/uJ0sOtdcgF)

解释：

```
\[           # match a literal '['
(            # start a capturing group
  [^\[\]]*     # match any number of characters that are not '[' or ']'
)            # end of capturing group
\]           # match a literal ']' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:41:27.460

Try doing this in a [shell](/questions/tagged/shell "show questions tagged 'shell'") :

```
$ echo 'this is [stack]overflow. I [[love]this[website]]' |
    grep -oP '\[+\K[^\]]+'
stack
love
website 
```

This works with PCRE & perl engines.

**EXPLANATIONS**

```
\[           # match a literal '['
+            # one (preceding character) or more
\K           # "reset" the regex to null
[^]          # excluding class, here a literal \]
\]           # match a literal ']' 
```

[explanations about `\K` trick](https://stackoverflow.com/questions/13542950/support-of-k-in-regex/13543042#13543042)

# asp.net - 子文件夹中的 _viewStart 文件在 ASP.NET MVC 4 中是添加的还是分开的？

> ID：13769026
> 
> 赞同：3
> 
> 时间：2012-12-07T18:38:56.610
> 
> 标签：asp.net, asp.net-mvc, razor, asp.net-mvc-4

当嵌套文件夹中有多个 _viewStart.cshtml 文件时，它们是相加的还是最后一个文件夹中的 _viewStart 文件具有先见之明？

例如：具有以下文件夹结构

```
/Views
_viewStart.cshtml

/Views/Module1
_viewStart.cshtml

/View/Module1/Partial
_viewStart.cshtml 
```

/View/Module1/Partial 中的 _viewStart 文件中的逻辑是唯一使用的逻辑，还是使用了两个父文件夹（/View/Module1 和 /View）中的逻辑？如果 /Views 中有 Layout="..." 是否会应用于 /View/Module1 或 /View/Module1/Partial 中的任何文件？

从我的测试来看，_viewStart 文件似乎是从它们的父 _viewStart 文件“继承”的，除非像“Layout”这样的值被专门覆盖。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T18:40:59.523

它们都按文件夹层次结构顺序执行。因此，在您展示的示例中，所有三个都将按照您列出的顺序执行。

`/Views/_viewstart.cshtml`然后`/Views/Module1/_viewstart.cshtml`然后`/Views/Module1/Partial/_viewstart.cshtml`

# c# - WebRequest 无法正确下载大文件 (~ 1 GB)

> ID：13769027
> 
> 赞同：16
> 
> 时间：2012-12-07T18:39:00.307
> 
> 标签：c#, file, web, download, webrequest

我正在尝试从公共 URL 下载一个大文件。起初它似乎工作正常，但 1 / 10 计算机似乎超时。我最初的尝试是使用`WebClient.DownloadFileAsync`，但因为它永远不会完成，我退回到`WebRequest.Create`直接使用和读取响应流。

我的第一个版本使用`WebRequest.Create`发现与`WebClient.DownloadFileAsync`. 操作超时，文件未完成。

如果下载超时，我的下一个版本添加了重试。这是它变得奇怪的地方。下载最终会以 1 次重试完成最后 7092 个字节。因此，文件以完全相同的大小下载，但文件已损坏并且与源文件不同。现在我希望损坏出现在最后 7092 个字节中，但事实并非如此。

使用 BeyondCompare 我发现损坏的文件中丢失了 2 个字节块，总共丢失了 7092 个字节！在下载超时并重新启动之前，此丢失的字节位于`1CA49FF0`and 。`1E31F380`

这里可能发生了什么？有关如何进一步追踪此问题的任何提示？

这是有问题的代码。

```
public void DownloadFile(string sourceUri, string destinationPath)
{
    //roughly based on: http://stackoverflow.com/questions/2269607/how-to-programmatically-download-a-large-file-in-c-sharp
    //not using WebClient.DownloadFileAsync as it seems to stall out on large files rarely for unknown reasons.

    using (var fileStream = File.Open(destinationPath, FileMode.Create, FileAccess.Write, FileShare.Read))
    {
        long totalBytesToReceive = 0;
        long totalBytesReceived = 0;
        int attemptCount = 0;
        bool isFinished = false;

        while (!isFinished)
        {
            attemptCount += 1;

            if (attemptCount > 10)
            {
                throw new InvalidOperationException("Too many attempts to download. Aborting.");
            }

            try
            {
                var request = (HttpWebRequest)WebRequest.Create(sourceUri);

                request.Proxy = null;//http://stackoverflow.com/questions/754333/why-is-this-webrequest-code-slow/935728#935728
                _log.AddInformation("Request #{0}.", attemptCount);

                //continue downloading from last attempt.
                if (totalBytesReceived != 0)
                {
                    _log.AddInformation("Request resuming with range: {0} , {1}", totalBytesReceived, totalBytesToReceive);
                    request.AddRange(totalBytesReceived, totalBytesToReceive);
                }

                using (var response = request.GetResponse())
                {
                    _log.AddInformation("Received response. ContentLength={0} , ContentType={1}", response.ContentLength, response.ContentType);

                    if (totalBytesToReceive == 0)
                    {
                        totalBytesToReceive = response.ContentLength;
                    }

                    using (var responseStream = response.GetResponseStream())
                    {
                        _log.AddInformation("Beginning read of response stream.");
                        var buffer = new byte[4096];
                        int bytesRead = responseStream.Read(buffer, 0, buffer.Length);
                        while (bytesRead > 0)
                        {
                            fileStream.Write(buffer, 0, bytesRead);
                            totalBytesReceived += bytesRead;
                            bytesRead = responseStream.Read(buffer, 0, buffer.Length);
                        }

                        _log.AddInformation("Finished read of response stream.");
                    }
                }

                _log.AddInformation("Finished downloading file.");
                isFinished = true;
            }
            catch (Exception ex)
            {
                _log.AddInformation("Response raised exception ({0}). {1}", ex.GetType(), ex.Message);
            }
        }
    }
} 
```

这是损坏下载的日志输出：

```
Request #1.
Received response. ContentLength=939302925 , ContentType=application/zip
Beginning read of response stream.
Response raised exception (System.Net.WebException). The operation has timed out.
Request #2.
Request resuming with range: 939295833 , 939302925
Received response. ContentLength=7092 , ContentType=application/zip
Beginning read of response stream.
Finished read of response stream.
Finished downloading file. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-24T12:00:31.030

这是我通常使用的方法，到目前为止，对于您需要的相同类型的加载，它还没有让我失望。尝试使用我的代码对您的代码进行一些更改，看看是否有帮助。

```
if (!Directory.Exists(localFolder))
{
    Directory.CreateDirectory(localFolder);   
}

try
{
    HttpWebRequest httpRequest = (HttpWebRequest)WebRequest.Create(Path.Combine(uri, filename));
    httpRequest.Method = "GET";

    // if the URI doesn't exist, exception gets thrown here...
    using (HttpWebResponse httpResponse = (HttpWebResponse)httpRequest.GetResponse())
    {
        using (Stream responseStream = httpResponse.GetResponseStream())
        {
            using (FileStream localFileStream = 
                new FileStream(Path.Combine(localFolder, filename), FileMode.Create))
            {
                var buffer = new byte[4096];
                long totalBytesRead = 0;
                int bytesRead;

                while ((bytesRead = responseStream.Read(buffer, 0, buffer.Length)) > 0)
                {
                    totalBytesRead += bytesRead;
                    localFileStream.Write(buffer, 0, bytesRead);
                }
            }
        }
    }
}
catch (Exception ex)
{        
    throw;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-13T09:38:05.223

分配大于预期文件大小的缓冲区大小。

字节[] byteBuffer = 新字节[65536];

因此，如果文件大小为 1GiB，则分配 1 GiB 缓冲区，然后尝试一次调用填充整个缓冲区。这种填充可能会返回更少的字节，但您仍然分配了整个缓冲区。请注意，.NET 中单个数组的最大长度是 32 位数字，这意味着即使您将程序重新编译为 64 位并且实际上有足够的可用内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-02T09:36:21.590

对我来说，您关于如何通过缓冲读取文件的方法看起来很奇怪。也许问题是，你这样做

```
while(bytesRead > 0) 
```

如果由于某种原因，流在某个时刻没有返回任何字节但仍未完成下载，那么它将退出循环并且永远不会回来。您应该获得 Content-Length，并通过 bytesRead 增加变量 totalBytesReceived。最后，您将循环更改为

```
while(totalBytesReceived < ContentLength) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-01T08:45:32.323

您应该更改超时设置。似乎有两个可能的超时问题：

*   客户端超时 - 尝试更改 WebClient 中的超时。我发现有时我需要下载大文件。
*   服务器端超时 - 尝试更改服务器上的超时。您可以使用另一个客户端（例如 PostMan）验证这是问题所在

# inno-setup - 运行批处理文件或 explorer.exe 没有完整的功能/权限

> ID：13769029
> 
> 赞同：1
> 
> 时间：2012-12-07T18:39:00.477
> 
> 标签：inno-setup

我已经构建了一个 Inno Setup 安装程序，但我的最后一步遇到了一些问题。

最初我想在完成后运行一个批处理文件（来自该`[Run]`部分）。此批处理文件启动`yajsw`服务，并使用`java.exe`.

我遇到了批处理文件无法识别的问题`java.exe`，即使我将它添加到本地路径或直接在`system32`. 我认为这可能与 Java 不在`sysWOW64`64 位机器上有关。

无论如何，一些要求发生了变化，我最终只是`explorer.exe`在适当的文件夹（有几个批处理文件）中打开了一个实例，并给出了使用哪一个的说明。我在`CurStepChanged()`when `curStep`is`ssDone`中使用`Exec()`（或`ShellExec`）来执行此操作。似乎即使在此资源管理器窗口中双击这些批处理文件也存在无法识别的相同问题`java.exe`，但如果我手动打开资源管理器窗口，它就可以正常工作。

我不确定这是否重要，但我正在使用它的测试机器正在运行 Windows Server 2008。我尝试过使用`PrivilegesRequired=admin`，我尝试过调用`ShellExec()`以及`Exec()`我尝试过`EnableFsRedirection(False)`。

任何想法都会有所帮助，谢谢！

编辑：由于我不再直接调用批处理文件，而只是尝试打开包含文件夹：

```
[Setup]  
AppId={{264F5847-C34C-4DB1-9EBF-F4D730D7E846}  
AppName={#MyAppName}  
AppVersion={#MyAppVersion}  
AppPublisher={#MyAppPublisher}  
AppPublisherURL={#MyAppURL}  
AppSupportURL={#MyAppURL}  
AppUpdatesURL={#MyAppURL}  
DefaultDirName=C:\TestInstall  
DisableDirPage=yes  
DefaultGroupName=foo  
DisableProgramGroupPage=yes  
OutputDir=C:\Project\installer  
OutputBaseFilename=setup  
Compression=lzma  
SolidCompression=yes  
UninstallFilesDir={code:InstallPath}  
SetupIconFile=foo.ico  
UninstallIconFile=foo.ico  
SetupLogging=yes  

...snip...  
[Code]  
...snip...  
procedure CurStepChanged(CurStep: TSetupStep);  
var  
  ResultCode: Integer;  
  cmd : String;  
begin  
  if CurStep = ssDone then  
  begin  
    cmd := 'explorer.exe';  
    ShellExec('', cmd, InstallPath('') + '\server', '', SW_SHOW, ewNoWait, ResultCode);  
  end;  
end; 
```

并且`Installpath\server\`目录中的批处理文件只是（基本上......有几个批处理文件都使用java）：

```
java.exe {various params} 
```

基本上，即使我只有`java.exe`，无论是完全路径还是在本地添加路径，它在 Inno 触发的资源管理器窗口中都不起作用，但如果您手动打开另一个窗口，它确实有效。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T08:38:51.263

您正在使用错误的权限运行资源管理器。改为使用`ShellExecAsOriginalUser`，或（更好）使用带有和合适的`[Run]`条目。`Flags: postinstall shellexec``Description`

（另外，如果您想尝试返回运行 java，那么您可以尝试使用`useapppaths`标志，或查询注册表以找到 Java 的正确路径。）

# android - 无法创建 Nexus 7 AVD

> ID：13769033
> 
> 赞同：0
> 
> 时间：2012-12-07T18:39:22.063
> 
> 标签：android, avd

我正在尝试创建 Nexus 7 AVD。无论我做出何种选择，我似乎都无法真正创建它，因为“确定”按钮是灰色的。

我做出的选择：

```
AVD Name: Nexus7AVD
Device: Nexus 7
Target: Android 4.2 - API Level 17
Keyboard: Not present
Skin: Display
Front Camera: Emulated
Memory: RAM 1024, VM Heap: 32
Internal Storage: 200 MiB
SD Card: No selection
Emulation Options: Use Host GPU 
```

我所做的选择有什么问题？

谢谢埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:00:35.130

看看我的照片，这对我有用。

![在此处输入图像描述](../Images/f7b84c5b65361458429fbb4ad1371f76.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T05:00:56.977

我认为您的 IDE 中没有安装系统映像。通过选择 Android SDK 管理器选项安装系统映像并检查您想要的目标设备的系统映像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-10T21:59:39.890

您需要以下内容：

AVD 名称 - 必须存在并且不能有任何空格（这是愚蠢的，因为你不能拥有 'Nexus 7'）

设备

Target - API 级别，您必须已通过 Android SDK Manager 安装

CPU/ABI - 再次需要通过 SDK 管理器安装（在您选择的 API 级别下，您将拥有各种系统映像，例如 ARM EABI v7a 系统映像 - 这些与 CPU 类型有关。您需要安装在下拉列表中选择的一个，尽管我认为如果它没有安装你没有得到选项）

皮肤 - 需要（我认为选择 WSVGA 作为最简单的 - 但还没有尝试过）

其余的我认为是可选的。听说过 SD 卡应该是“二进制倍数”的建议 - 例如 256、1024 等，但尚未验证（只是补充说，仅供参考 - 不需要让 OK 按钮可见）。

有了这一切，确定按钮应该是可点击的。

# java - ExtJs：收集持续响应

> ID：13769034
> 
> 赞同：0
> 
> 时间：2012-12-07T18:39:32.557
> 
> 标签：java, spring-mvc, extjs4

我有一个数学问题和几个解决它的算法。当算法解决问题时，会形成一个代表绘图点的 json。我需要在一张图片上显示所有情节。算法是按顺序处理的，所以我需要在算法完成处理后立即向图片添加一个新图。我已经阅读了 extjs 中的线图，但我无法想象如何按顺序发送数据（绘图）。

我的环境是：客户端：extjs；服务器端：java、spring、tiles

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:36:04.963

对于那些对此主题感兴趣的人，有一些有用的链接：

1.  [IBM 的评论文章](https://www.ibm.com/developerworks/web/library/wa-reverseajax1/)
2.  [春源博客](http://blog.springsource.org/2012/05/10/spring-mvc-3-2-preview-making-a-controller-method-asynchronous/)
3.  [ExtJs：长轮询图表](http://www.sencha.com/forum/showthread.php?66788-3.0-rc1-Chart-with-Long-Polling)

希望，这对某人有帮助=)

# grails - 以 GSP 形式捕获手写签名

> ID：13769040
> 
> 赞同：-4
> 
> 时间：2012-12-07T18:39:44.507
> 
> 标签：grails

有谁知道如何将手写签名（从平板电脑）捕获到 Grails 表单中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:47:08.303

这不是一个真正的 Grails 特定问题，但请查看[jQuery Signature Pad插件的](http://thomasjbradley.ca/lab/signature-pad/)[jQuery UI Signature](http://keith-wood.name/signature.html)插件。

# postgresql - Postgres“找不到命令”

> ID：13769046
> 
> 赞同：0
> 
> 时间：2012-12-07T18:40:09.387
> 
> 标签：postgresql, shell, unix, redhat

我已经查看了 Postgres 的大多数“找不到命令”错误，但没有一个与我遇到的类似。在我的服务器上，Postgres 正在有效地运行，因为我可以毫无问题地登录到单个数据库；但是，当以用户 postgres 登录服务器以运行 \list 等命令或创建新数据库时，出现以下错误：

```
-bash-4.1$ \list
-bash: list: command not found 
```

关于为什么会发生这种情况的任何想法。当我试图解决这个问题时，我认为我可能在错误的目录中，所以我跑了`pwd`，这就是我得到的：

```
-bash-4.1$ pwd
/var/lib/pgsql 
```

任何帮助是极大的赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:58:29.317

`\list`不是 bash 命令，但从您发布的命令/输出看来，您正在尝试直接从 bash 中调用它。

首先运行该`psql`命令，当你拥有它时，你应该有一个交互式会话。在那里你应该能够使用该`\list`命令。[您可以在此处](http://www.postgresql.org/docs/8.3/static/app-psql.html)阅读有关此内容的更多信息。

# azure - Azure SDK 1.8 云驱动

> ID：13769047
> 
> 赞同：5
> 
> 时间：2012-12-07T18:40:10.957
> 
> 标签：azure, azure-storage, azure-clouddrive

**Azure SDK 1.8**（2012 年 10 月）`CloudDrive`在哪里？

 **在**Azure SDK 1.8**中，`StorageClient`命名空间不再存在。这是包含`CloudDrive`.

我知道`StorageClient`命名空间已重命名为`Storage`Azure **SDK 1.8**，但我在此命名空间中找不到`CloudDrive`该类。

它去哪儿了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T18:44:03.220

Cloud Drive 访问在 1.8 SDK 中未更新。请参阅此处的讨论：http: [//blogs.msdn.com/b/windowsazurestorage/archive/2012/11/01/known-issues-for-windows-azure-storage-client-library-2-0-for-net -and-windows-runtime.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/11/01/known-issues-for-windows-azure-storage-client-library-2-0-for-net-and-windows-runtime.aspx)

该链接的引用：

> clouddrive 尚未更新为使用最新版本，因此它不支持 2.0 客户端库（使用 2012-02-12 REST 版本）。但是，您可以同时使用这两个库并继续使用较旧的客户端库与 clouddrive（和诊断）一起使用，但将较新的 2.0 库用于应用程序中的所有其他内容。

从个人经验来看，如果您确实在同一个项目中并排使用来自不同 SDK 的 Azure 库，请注意版本冲突，尤其是`Microsoft.WindowsAzure.Configuration`dll - 并注意 NuGet 有助于升级您的包，无论您是否愿意。**

# c# - 如何从 C# 在 XML 中生成 "

> ID：13769049
> 
> 赞同：2
> 
> 时间：2012-12-07T18:40:13.000
> 
> 标签：c#, xml, xmltextwriter

我正在使用 XmlTextWriter 从 C# 应用程序生成 XML。初始输入将采用这种格式， 1" ，但我可以用任何东西替换它。我需要结束`1&quot;`但我不断得到`1&amp;quot;`

C＃

```
 xml.WriteStartElement("data");
    xml.WriteAttributeString("type", "wstring");
    xml.WriteString("1&quot;");
    xml.WriteEndElement(); 
```

哈！当我通过这里需要的 XML 时，它会将其转换为 1"。但我真正需要展示的是`1&quot;`代码第 3 行中的实际值。

我还需要使用 / 和 Ø。我该怎么做，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T18:42:46.450

> I need to end up with 1" but I keep getting 1&quot;

That's because you're trying to do the XML API's job for it.

Your job is to provide just text - its job is to handle escaping and anything else XML needs to do.

So you should just use

```
xml.WriteString("1\""); 
```

... where the backslash is just for the sake of C#'s string literal handling, and has nothing to do with XML. The logical value you're trying to write out is a 1 followed by a double-quote. Whether it's escaped as `&quot;` or not should be irrelevant to anything processing it. If you've got something which is over-sensitive, you should fix *that*.

If you *desperately* need this (and I would again strongly urge you not to), try:

```
xml.WriteString("1");
xml.WriteEntityRef("quot"); 
```

(I'd also urge you to use LINQ to XML unless you're in a situation where you *really* need to use `XmlWriter`. It'll make your life significantly simpler.)

# javascript - 如何在元素中的每个空格周围添加 HTML 标记？

> ID：13769055
> 
> 赞同：-3
> 
> 时间：2012-12-07T18:40:47.140
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [如何替换字符串中不在 html 标记中的所有句点？](https://stackoverflow.com/questions/13736515/how-to-replace-all-periods-in-a-string-that-arent-in-an-html-tag)

我有一个带有 contentEditable div 和提交按钮的网页。当用户单击提交按钮时，我想将 contentEditable div 中的所有空格替换为：

```
<span class="large"> </span> 
```

我遇到的问题是我不希望预先存在的 HTML 标记中的任何空格被编辑，我也不想丢失它们。

以下是示例页面的结构：

```
<div id="content" contenteditable="true">
     <p class="MsoNormal" style="text-indend:.5in">
          Example Text Here
     </p>
</div> 
```

当用户单击提交按钮时，我只想替换“此处的示例文本”中的空格。内容 div 中可能有多个段落元素，也可能没有，这取决于用户如何将文本输入到元素中。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-07T18:59:30.463

将忽略标志设置为 false。
一个接一个地遍历字符串。
...如果遇到 <
......将忽略标志设置为 true。
...如果遇到 >
......将忽略标志设置为 false。
...如果您遇到空格并且忽略标志为假
......请附加您的替换。
...否则将字符按原样附加到您的输出字符串中。

这不漂亮 - 可能可以用一个正则表达式来完成，但我是一个人:)

# vb.net - XmlSerializer 在我的 Windows 8 应用商店应用程序中不返回任何内容

> ID：13769056
> 
> 赞同：0
> 
> 时间：2012-12-07T18:40:49.787
> 
> 标签：vb.net, windows-8, xml-serialization

我已经在 .Net 中使用 XmlSerializer 成功反序列化了我的 xml 文件，但是尝试将该数据序列化回 xml 文件变得令人沮丧。当我尝试序列化我的类时，我只得到没有子元素的 xml 的根标记。如何序列化所有对象以获取正确的 xml 数据？我在某处看到有人建议在集合中添加要序列化的类，然后序列化该集合，但我无法解决这个问题，或者有更简单的方法吗？任何帮助表示赞赏！这是我的代码：

```
 Public Shared Function SerializeXml() As Byte()

    Dim serializer As New XmlSerializer(GetType(Data))
    Dim nameSpaces As XmlSerializerNamespaces = New XmlSerializerNamespaces()
    Dim mStream As New MemoryStream()
    Dim result As Byte()
    Dim target As New Data()

    nameSpaces.Add(String.Empty, String.Empty)

    serializer.Serialize(mStream, target, nameSpaces)

    result = mStream.ToArray()

    Return result 
```

这是带有属性的 xml 的通用示例：

```
<?xml version"1.0">
<RootTag>
  <ChildTag Label="Label1" Value="Value1"/>
  <ChildTag Label="Label2" Value="Value2"/>
</RootTag> 
```

编辑：这是我的数据类：

```
Imports System.Xml.Serialization

<XmlRoot("DATA", [Namespace]:="", IsNullable:=False)>
Public Class Data
    Inherits Model

<XmlElement("CONFIGURATION")>
Public Property Configuration() As DataConfiguration
    Get
        Return Me._Configuration
    End Get
    Set(value As DataConfiguration)
        Me._Configuration = value
    End Set
End Property
Private _Configuration As DataConfiguration

<XmlElement("FIELD")>
Public Property Field() As Field
    Get
        Return Me._Field
    End Get
    Set(value As Field)
        Me._Field = value
    End Set
End Property
Private _Field As Field

<XmlElement("LIST")>
Public Property ListRoot() As List(Of ListRoot)
    Get
        Return Me._ListRoot
    End Get
    Set(value As List(Of ListRoot))
        Me._ListRoot = value
    End Set
End Property
Private _ListRoot As List(Of ListRoot)

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T20:21:59.363

这是你的问题，`<XmlRoot("DATA", [Namespace]:="", IsNullable:=False)>`. [IsNullable](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlelementattribute.isnullable.aspx)属性设置为 false 时，如果项目等于空，则将省略项目的 XML。如果您将 设置`IsNullable`为 True，那么它将发出这样的标签`<ListRoot xsi:nil = "true" />`。在您的代码示例中，由于您刚刚创建了一个这样的新`Data`类，因此默认情况下`Dim target As New Data()`所有成员都是如此`Nothing`。由于您设置了`IsNullable = False`，您应该只看到该根标记，这将是数据的有效序列化。

# php - 使用数据库填充页面

> ID：13769064
> 
> 赞同：0
> 
> 时间：2012-12-07T18:41:22.403
> 
> 标签：php, codeigniter

我开始学习如何使用 CodeIgniter，我想使用数据库创建静态页面。

我的观点：

```
<html>
    <head>
        <title>{blog_title}</title>
    </head>
    <body>
        <h1>{page_title}</h1>
        <p>{page_content}</p>
    </body>
</html> 
```

我的控制器：

```
<?php

class Pages extends CI_Controller {

    public function view($page = 'contact') {

        $this->load->model('Model_Pages');
        $data['data'] = $this->Model_Pages->get_data_page($page);
        $this->load->view('template/header');
        $this->load->view('pages/' . $page, $data);
        $this->load->view('template/footer');
    }

} 
```

我的模型：

```
<?php

class Model_Pages extends CI_Model {

    public function get_data_page($slug) {
        $this->db->select('blog_title', 'page_title', 'page_content');
        $this->db->from('pages');
        $this->db->where('slug', $slug);
        $q = $this->db->get();
        return $q->result();
    }

} 
```

为什么不显示数据库数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:45:56.267

而不是`result()`使用，`row()`因为您只期望/想要一行：

```
return $q->row(); 
```

`result()`返回一个结果数组，即使只有一个。验证您是否也获得了结果将是一个好主意。

接下来，而不是`$data['data']`，只需使用`$data`

```
$data = $this->Model_Pages->get_data_page($slug); 
```

事实上，`row_array()`如果 CI 的（非常有限的）模板解析器不适用于对象数据类型，您可能需要：

```
return $q->row_array(); 
```

这应该创建一个 CI 解析器可以使用的键/值数组结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:47:09.643

缺少 $slug？

```
$data['data'] = $this->Model_Pages->get_data_page();
public function get_data_page($slug) 
```

# visual-studio - Unable to get jasmine-jquery fixtures to load in Visual Studio with Chutzpah, or even in browser

> ID：13769066
> 
> 赞同：4
> 
> 时间：2012-12-07T18:41:29.990
> 
> 标签：visual-studio, jasmine, jasmine-jquery, chutzpah

I'm prototyping a MVC.NET 4.0 application and am defining our Javascript test configuration. I managed to get Jasmine working in VS2012 with the Chutzpah extensions, and I am able to run pure Javascript tests successfully.

However, I am unable to load test fixture (DOM) code and access it from my tests.

Here is the code I'm attempting to run:

## test.js

```
/// various reference paths...

jasmine.getFixtures().fixturesPath = "./";

describe("jasmine tests:", function () {
    it("Copies data correctly", function () {
        loadFixtures('testfixture.html');
        //setFixtures('<div id="wrapper"><div></div></div>');
        var widget = $("#wrapper");
        expect(widget).toExist();
    });
}); 
```

The fixture is in the same folder as the test file. The `setFixtures` operation works, but when I attempt to load the HTML from a file, it doesn't. Initially, I tried to use the most recent version of jasmine-jquery from the repository, but then fell back to the over 1 year old download version 1.3.1 because it looked like there was a bug in the newer one. Here is the message I get with 1.3.1:

> Test 'jasmine tests::Copies data correctly' failed Error: Fixture could not be loaded: ./testfixture.html (status: error, message: undefined) in file:///C:/Users/db66162/SvnProjects/MvcPrototype/MvcPrototype.Tests/Scripts/jasmine/jasmine-jquery-1.3.1.js (line 103)

When I examine the source, it is doing an AJAX call, yet I'm not running in a browser. Instead, I'm using Chutzpah, which runs a headless browser (PhantomJS). When I run this in the browser with a test harness, it does work.

Is there someone out there who has a solution to this problem? I need to be able to run these tests automatically both in Visual Studio and TeamCity (which is why I am using Chutzpah). I am open to solutions that include using another test runner in place of Chutzpah. I am also going to evaluate the qUnit testing framework in this effort, so if you know that qUnit doesn't have this problem in my configuration, I will find that useful.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-14T07:24:17.030

我通过将以下设置添加到 chutzpah.json 来解决此问题：

```
"TestHarnessLocationMode": "SettingsFileAdjacent", 
```

chutzpah.json 在我的测试应用程序根目录中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:55:42.047

我有完全相同的问题。AFAIK 这与 jasmine-jquery 在通过 file:// URI 方案运行测试时尝试通过 Ajax 加载固定装置有关。

显然 Chrome 不允许这样做（请参阅[https://stackoverflow.com/a/5469527/1904](https://stackoverflow.com/a/5469527/1904)和[http://code.google.com/p/chromium/issues/detail?id=40787](http://code.google.com/p/chromium/issues/detail?id=40787)）并支持其他浏览器可能会有所不同。

### 编辑

*尝试*设置一些 PhantomJS 命令行选项，例如`--web-security=false`. 虽然YMMV：我自己还没有尝试过，但我想我会提到它以防它有帮助（或者如果其他人知道更多关于这个选项以及它是否会有帮助）。

### 更新

通过*添加*一个`/// <reference path="relative/path/to/fixtures" />`通过在我的 Jasmine 规范顶部添加注释，但我仍然无法加载 JSON 固定装置。

### 进一步更新

通过添加`/// <reference path="relative/path/to/fixtures" />`注释来加载 HTML 固定装置只是将您的 HTML 固定装置加载到 Jasmine 测试运行器，这可能适合您的需求，也可能不适合您的需求。它*不会*将固定装置加载到`jasmine-fixtures`元素中，因此您的固定装置不会在每次测试后得到清理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T22:46:27.893

我最终解决了我的问题。谢谢伊恩的回复。我可以在 TeamCity 中使用 PhantomJS 通过测试运行器运行测试。我联系了 Chutzpah 的作者，他为他的产品部署了一个更新，解决了我在 Visual Studio 中的问题。我现在可以使用 Chutzpah 约定运行 Jasmine 测试以在 VS 中引用库并包含固定装置，并使用 TeamCity 中的 PhantomJS 运行程序来使用测试运行程序 (html)。

我在 TeamCity 上的解决方案是运行一个启动测试的批处理文件。所以，批次：

```
@echo off
REM -- Uses the PhantomJS headless browser packaged with Chutzpah to run 
REM -- Jasmine tests.  Does not use Chutzpah.
setlocal
set path=..\packages\Chutzpah.2.2.1\tools;%path%;
echo ##teamcity[message text='Starting Jasmine Tests']
phantomjs.exe phantom.run.js %1
echo ##teamcity[message text='Finished Jasmine Tests'] 
```

和 Javascript (phantom.run.js)：

```
// This code lifted from https://gist.github.com/3497509.
// It takes the test harness HTML file URL as the parameter.  It launches PhantomJS,
// and waits a specific amount of time before exit.  Tests must complete before that 
// timer ends.  
(function () {
    "use strict";
    var system = require("system");
    var url = system.args[1];

    phantom.viewportSize = {width: 800, height: 600};

    console.log("Opening " + url);

    var page = new WebPage();

    // This is required because PhantomJS sandboxes the website and it does not
    // show up the console messages form that page by default
    page.onConsoleMessage = function (msg) {
        console.log(msg);

        // Exit as soon as the last test finishes.
        if (msg && msg.indexOf("Dixi.") !== -1) {
            phantom.exit();
        }
    };

    page.open(url, function (status) {
        if (status !== 'success') {
            console.log('Unable to load the address!');
            phantom.exit(-1);
        } else {
            // Timeout - kill PhantomJS if still not done after 2 minutes.
            window.setTimeout(function () {
                phantom.exit();
            }, 10 * 1000); // NB: use accurately, tune up referring to your needs
        }
    });
}()); 
```

# java - How to get objects' index in a Java List

> ID：13769070
> 
> 赞同：2
> 
> 时间：2012-12-07T18:42:05.937
> 
> 标签：java, arraylist, json

I'm trying to add data into array list. in this result

```
[{Store={id_store=2, namestore=Kupat Tahu Singaparna , product=[{id_product=1, price=100000, quantity=1}]}}] 
```

you could use this code:

```
static ArrayList Storecart = new ArrayList(); 
LinkedHashMap store = new LinkedHashMap();
LinkedHashMap storeitem = new LinkedHashMap();
LinkedHashMap listproduct = new LinkedHashMap();
ArrayList prdct = new ArrayList(); 

storeitem.put("id_store",id_store);
storeitem.put("namestore",namestr ); 
listproduct.put("id_product", id_prodt);
listproduct.put("price",priced); 
listproduct.put("quantity", quantity); 

prdct.add(listproduct); 
storeitem.put("product", prdct);
store.put("Store", storeitem);
Storecart.add(store); 
```

I need to get the index of an object in the array list. The problem is, I can't looping array list for "get object Store, and object product" and find every index.. what will be the best & efficient solution ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:07:24.480

好吧，您可以使用 List.indexOf()，正如其他人所建议的那样：

[Java 列表 API：indexOf()](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#indexOf%28java.lang.Object%29)

如果您打算经常这样做，那么大概您已经掌握了对象引用。所以，你可以扩展/包装你想要索引的对象来跟踪它自己的索引。具体来说，您可以根据您第一次遇到它的顺序或其他东西为对象分配其索引。集合中对象的顺序将无关紧要。

我想您也可以使用地图作为另一种可能性。然后只使用 Map 而不是 ArrayList。

底线：如果您正在执行大量“indexOf()”请求，那么 ArrayList 可能不是您数据的最佳容器。

# java - Differences between components and lightweight/heavyweight

> ID：13769072
> 
> 赞同：10
> 
> 时间：2012-12-07T18:42:08.993
> 
> 标签：java, swing, awt

What is the difference between JPanel and JFrame and relationship to lightweight, heavyweight?

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-07T18:54:46.973

JPanel 是允许将多个 UI 组件放在一起的容器。JFrame 是使用 Swing 编写的窗口。

所有 Swing 组件都是所谓的“轻量级”组件，因为它们是用 java 编写的。例如，如果您运行 Swing 应用程序并尝试使用 UI 分析工具（例如 windows 中的 WinSpy）对其进行分析，您只会看到一个元素：窗口 (JFrame) 本身。所有其他组件都是从操作系统的角度绘制的。

重量级 API - AWT 使用 OS 提供的可移植元素。由于 java 必须在各种操作系统之间移植，所以 AWT 非常有限。它仅实现所有平台支持的屏幕元素的最小子集。然而，AWT 元素直接映射到适当的平台元素，因此 UI 发现工具会看到它们。这些元素被称为“重量级”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-30T07:31:25.220

像“AWT”组件这样的重量级组件必须在特定平台上使用本机 GUI 进行绘制。

像“Swing”组件这样的轻量级组件是由 java 绘制的，不依赖于原生 GUI。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-08T03:19:40.957

Swing 和 AWT 之间的基本区别在于 Swing API 是纯 Java 库，即它们根本不依赖本地库来绘制图形组件。由于此功能，它们在所有平台上提供一致的外观和感觉。AWT 库需要原生图形库的支持，并且它们的一些 GUI 组件在不同平台上看起来不同。此外，Swing 组件本质上不是线程安全的，您必须明确地编写同步代码来操作或重绘它们，而 AWT 组件在多线程环境中是可以信任的。AWT 组件被称为重量级组件，因为它们依赖于本地库。Swing 组件因其独立于本机库而被称为轻量级组件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T18:56:19.740

JFrame 是一个带有接口框的 Swing 容器，可以是一个独立的应用程序（它具有最小化、最大化和退出功能的顶部框），而 JPanel 是 JFrame 的一切（一个 Swing 容器）减去成为一个独立的人。要使 JPanel 工作，它必须位于框架之类的内部，例如 JFrame。

另一个答案对轻量级和重量级组件有很好的定义。

使用：我在 JFrames 中使用 JPanel 来轻松运行集成在一起的多线程程序（我的类中有一个 JPanel 可运行类，它扩展了 JFrame，我将其作为自己的线程运行，并且 JPanel 类可以更改 JFrame 类中变量的值）。我用它来轻松地让不同的线程相互交互。**您可以在一个 JFrame 中拥有多个 JPanel。

# r - Upgrading to R 2.15.2 can't load stats package

> ID：13769075
> 
> 赞同：8
> 
> 时间：2012-12-07T18:42:18.227
> 
> 标签：r, ubuntu-12.04

Running Ubuntu 12.04\. finally upgraded from 2.12 to 2.15.2 today and when I start R I get this error.

```
Error in dyn.load(file, DLLpath = DLLpath, ...) : 
  unable to load shared object '/usr/lib/R/library/stats/libs/stats.so':
  /usr/lib/liblapack.so.3gf: undefined symbol: ATL_chemv
During startup - Warning message:
package ‘stats’ in options("defaultPackages") was not found 
```

edit:

```
$ dpkg -l | grep "blas\|atlas"
ii  libatlas3gf-base                               3.8.4-3build1                                 Automatically Tuned Linear Algebra Software, generic shared
ii  libblas-dev                                    1.2.20110419-2ubuntu1                         Basic Linear Algebra Subroutines 3, static library
ii  libblas3gf                                     1.2.20110419-2ubuntu1                         Basic Linear Algebra Reference implementations, shared library
ii  libopenblas-base                               0.1alpha2.2-3                                 Optimized BLAS (linear algebra) library based on GotoBLAS2
ii  libopenblas-dev                                0.1alpha2.2-3                                 Optimized BLAS (linear algebra) library based on GotoBLAS2 
```

Anyone else have this problem or know how to fix?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T19:07:32.550

你应该卸载`libopenblas-base`

更多信息请参见：[http ://bugs.debian.org/cgi-bin/bugreport.cgi?bug=638236](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=638236)

* * *

在我的盒子上：

```
$ dpkg -l | grep "blas\|atlas"
ii  libatlas-dev                                   3.8.4-3build1                           Automatically Tuned Linear Algebra Software, C header files
ii  libatlas3gf-base                               3.8.4-3build1                           Automatically Tuned Linear Algebra Software, generic shared
ii  libblas-dev                                    1.2.20110419-2ubuntu1                   Basic Linear Algebra Subroutines 3, static library
ii  libblas3gf                                     1.2.20110419-2ubuntu1                   Basic Linear Algebra Reference implementations, shared library
ii  liblastfm0                                     0.4.0~really0.3.3-0ubuntu1              The Last.fm web services library 
```

# localization - zf2 matching language in url route

> ID：13769079
> 
> 赞同：1
> 
> 时间：2012-12-07T18:42:33.550
> 
> 标签：localization, internationalization, url-routing, zend-framework2

how is it possible to match url like **www.mydomain.com/en/aboutus** to

```
controller -> index
action -> aboutus
lang -> en 
```

in zf2 module routing config ?

in zf1 we fix that by something like this

```
$route = new Zend_Controller_Router_Route(
    '/contact/:lang',
    array(
        'module' => 'default',
        'controller' => 'contact',
        'action' => 'index'
    )
); 
```

but the aproeach is something else we want first determine what the language is in url then look into what controller or action user is requesting

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T18:42:33.550

zf2 has hirachy support in routers so you can build your routes like a tree

for your situation you have to create a parent route that match lang in url for example

`www.mydomain.com/en` or `www.mydomain.com/fa` or `www.mydomain.com/de` or ....

then in it children write route for others

for code example :

```
'langroute' => array(
                'type' => 'Segment',
                'options' => array(
                    'route' => '/[:lang]',
                    'defaults' => array(
                        'lang' => 'en',
                    ),
                    'constraints' => array(
                        'lang' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    ),
                ),
                'may_terminate' => true,
                'child_routes' => array(
                    'home' => array(
                        'type' => 'Zend\Mvc\Router\Http\Literal',
                        'options' => array(
                            'route' => '/',
                            'defaults' => array(
                                'controller' => 'Application\Controller\Index',
                                'action' => 'index',
                            ),
                        ),
                    ),
                    // The following is a route to simplify getting started creating
                    // new controllers and actions without needing to create a new
                    // module. Simply drop new controllers in, and you can access them
                    // using the path /application/:controller/:action
                    'aboutus' => array(
                        'type' => 'Zend\Mvc\Router\Http\Literal',
                        'options' => array(
                            'route' => '/aboutus',
                            'defaults' => array(
                                'controller' => 'Application\Controller\Index',
                                'action' => 'aboutus',
                            ),
                        ),
                    ),
), 
```

as you can see the langrout match the en de fa or ... lang text then the childern route check for inner page in this example the url www.mydomain.com/en/ match the lang **en** and the route **home**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-11T07:50:10.970

请将此代码添加到您的模块**module.config.php**

```
 return array(
    'router' => array(
        'routes' => array(
               // The following is a route to simplify getting started creating
                // new controllers and actions without needing to create a new
                // module. Simply drop new controllers in, and you can access them
                // using the path /Module_Name/:controller/:lang/:action
                'your_route_name_here' => array(
                    'type'    => 'Literal', 
                    'options' => array(
                        'route'    => '/',
                        'defaults' => array(
                            '__NAMESPACE__' => 'Module_Name\Controller',
                            'controller'    => 'Index',
                            'action'        => 'index',

                        ),
                    ),
                    'may_terminate' => true,
                    'child_routes' => array(
                        'default' => array(
                            'type'    => 'Segment',
                            'options' => array(
                                'route'    => '/[:controller][/:lang][/:action]',
                                'constraints' => array(
                                    'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                                    'lang'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                       'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                                ),
                                'defaults' => array(
                                   'controller'    => 'Index',
                                   'lang'        => 'en',
                                   'action'        => 'index',
                                ),
                            ),
                        ),
                    ),
                ),

             ),
         ),
     ); 
```

# c# - Azure 表中的异步插入

> ID：13769081
> 
> 赞同：4
> 
> 时间：2012-12-07T18:42:36.810
> 
> 标签：c#, asynchronous, azure, azure-table-storage

如何将实体异步保存到 Windows Azure 表服务？

下面的代码同步工作，但在尝试异步保存时引发异常。

这个说法：

```
context.BeginSaveChangesWithRetries(SaveChangesOptions.Batch,
    (asyncResult => context.EndSaveChanges(asyncResult)), null); 
```

结果 System.ArgumentException：“当前对象并非源自异步结果。参数名称：asyncResult”。

此外，异步保存时创建服务上下文的正确模式是什么？我应该为每个写操作创建一个单独的上下文吗？是否太贵（例如需要通过网络拨打电话）？

**TableStorageWriter.cs**：

```
using System;
using System.Data.Services.Client;
using System.Diagnostics;
using Microsoft.WindowsAzure;
using Microsoft.WindowsAzure.StorageClient;

namespace WorkerRole1
{
    public class TableStorageWriter
    {
        private const string _tableName = "StorageTest";
        private readonly CloudStorageAccount _storageAccount;
        private CloudTableClient _tableClient;

        public TableStorageWriter()
        {
            _storageAccount = CloudStorageAccount.Parse(CloudConfigurationManager.GetSetting("StorageConnectionString"));
            _tableClient = _storageAccount.CreateCloudTableClient();
            _tableClient.CreateTableIfNotExist(_tableName);
        }

        public void Write(string message)
        {
            try
            {
                DateTime now = DateTime.UtcNow;
                var entity = new StorageTestEntity
                    {
                        Message = message,
                        PartitionKey = string.Format("{0:yyyy-MM-dd}", now),
                        RowKey = string.Format("{0:HH:mm:ss.fff}-{1}", now, Guid.NewGuid())
                    };

                // Should I get this context before each write? It is efficient?
                TableServiceContext context = _tableClient.GetDataServiceContext();

                context.AddObject(_tableName, entity);

                // This statement works but it's synchronous
                context.SaveChangesWithRetries();

                // This attempt at saving asynchronously results in System.ArgumentException:
                // The current object did not originate the async result. Parameter name: asyncResult
                // context.BeginSaveChangesWithRetries(SaveChangesOptions.Batch,
                //                                  (asyncResult => context.EndSaveChanges(asyncResult)), null);
            }
            catch (StorageClientException e)
            {
                Debug.WriteLine("Error: {0}", e.Message);
                Debug.WriteLine("Extended error info: {0} : {1}",
                                e.ExtendedErrorInformation.ErrorCode,
                                e.ExtendedErrorInformation.ErrorMessage);
            }
        }
    }

    internal class StorageTestEntity : TableServiceEntity
    {
        public string Message { get; set; }
    }
} 
```

从**WorkerRole.cs**调用：

```
using System.Net;
using System.Threading;
using Microsoft.WindowsAzure.ServiceRuntime;
using log4net;

namespace WorkerRole1
{
    public class WorkerRole : RoleEntryPoint
    {
        public override void Run()
        {
            var storageWriter = new TableStorageWriter();
            while (true)
            {
                Thread.Sleep(10000);
                storageWriter.Write("Working...");
            }
        }

        public override bool OnStart()
        {
            ServicePointManager.DefaultConnectionLimit = 12;
            return base.OnStart();
        }
    }
} 
```

*使用适用于 .NET 1.8 的 Windows Azure SDK 的示例。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T21:33:21.377

You should call EndSaveChangesWithRetries instead of EndSaveChanges, as otherwise the IAsyncResult object returned by BeginSaveChangesWithRetries cannot be used by EndSaveChanges. So, could you please try changing your End method call as below?

```
context.BeginSaveChangesWithRetries(SaveChangesOptions.Batch,
    (asyncResult => context.EndSaveChangesWithRetries(asyncResult)),
    null); 
```

And for your other question, I would recommend creating a new TableServiceContext for each call, as DataServiceContext is not stateless ([MSDN](http://msdn.microsoft.com/en-us/library/cc679618.aspx)) and the way you implemented TableStorageWriter.Write with the asynchronous call might allow concurrent operations. Actually, in Storage Client Library 2.0, we explicitly prevented concurrent operations that uses a single TableServiceContext object. Moreover, creating a TableServiceContext does not result in a request to Azure Storage.

# iphone - For iOS, which is easier and faster to implement: Urban Airship or Parse for push notifications?

> ID：13769082
> 
> 赞同：2
> 
> 时间：2012-12-07T18:42:38.070
> 
> 标签：iphone, ios, urbanairship.com, parse-platform

Looking to know which is easier and faster to implement in order to send out push notifications. This is going from start(account creating) to finish(releasing to app store). Anyone had any experience with both or one?

thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:59:07.317

我是 Parse 的 Matt。Push 可以说是添加到 iOS 应用程序中最复杂的功能之一，我们花费了大量时间使这个过程对您来说尽可能简单。我们有一个关于正确设置证书的[很棒的教程和一个深入的](https://parse.com/tutorials/ios-push-notifications)[推送指南](https://parse.com/docs/push_guide#top/iOS)来帮助您开始使用我们的 API。

我们的定价模式是直截了当的（您为发送的推送次数付费，每月前一百万免费），并且我们有一些非常酷的功能。您可以使用“渠道”将推送发送到您的用户的预定义细分或利用我们的数据存储功能推送到您的用户的真正有针对性和动态的细分。使用第二个选项，您基本上可以保存您想要的任何数据（用户的位置、年龄、兴趣等），并编写查询以准确定位您想要到达的细分市场。

结合我们新的推送控制台，您以后无需任何技术技能即可发送这些通知。

我知道我在 Parse 工作后可能会有偏见，但作为一名 iOS 开发人员，我认为您会对我们超级易用的 API 感到高兴。我们花费了无数时间来制作一个易于使用且 iOS 开发人员熟悉的 API。

如果您有任何问题，请通过 feedback@parse.com 向我们发送任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:45:23.537

每项服务都有其优点和缺点。阅读两者的文档并做出自己的决定将符合您的最大利益。

# liferay - Need to change web.server.host property during runtime

> ID：13769085
> 
> 赞同：0
> 
> 时间：2012-12-07T18:42:51.897
> 
> 标签：liferay, liferay-6

Please help me in below problem

I have single liferay instance and it has single site on it. This single site is serving multiple clients and they access the site using their dedicated domain name

xxx.mysite.com -> domain name for the client xxx yyy.mysite.com -> domain name for the client yyy

These domain names are configured in apache web server which is sitting infront of liferay instance. I used property in portal-ext.properties web.server.host to configure the webserver information in liferay. Liferay uses this property to generate all the links on the page(if this property is not mentioned it uses the servername to generate the urls). But using this I can only define one site at a time. I can not achieve above functionality. I went to the liferay code and in PortalImpl.java it has following code

```
public String getPortalURL(
    String serverName, int serverPort, boolean secure) {

    StringBundler sb = new StringBundler();

    if (secure || Http.HTTPS.equals(PropsValues.WEB_SERVER_PROTOCOL)) {
        sb.append(Http.HTTPS_WITH_SLASH);
    }
    else {
        sb.append(Http.HTTP_WITH_SLASH);
    }

    if (Validator.isNull(PropsValues.WEB_SERVER_HOST)) {
        sb.append(serverName);
    }
    else {
        sb.append(PropsValues.WEB_SERVER_HOST);
    }

    if (!secure) {
        if (PropsValues.WEB_SERVER_HTTP_PORT == -1) {
            if ((serverPort != Http.HTTP_PORT) &&
                (serverPort != Http.HTTPS_PORT)) {

                sb.append(StringPool.COLON);
                sb.append(serverPort);
            }
        }
        else {
            if (PropsValues.WEB_SERVER_HTTP_PORT != Http.HTTP_PORT) {
                sb.append(StringPool.COLON);
                sb.append(PropsValues.WEB_SERVER_HTTP_PORT);
            }
        }
    }

    if (secure) {
        if (PropsValues.WEB_SERVER_HTTPS_PORT == -1) {
            if ((serverPort != Http.HTTP_PORT) &&
                (serverPort != Http.HTTPS_PORT)) {

                sb.append(StringPool.COLON);
                sb.append(serverPort);
            }
        }
        else {
            if (PropsValues.WEB_SERVER_HTTPS_PORT != Http.HTTPS_PORT) {
                sb.append(StringPool.COLON);
                sb.append(PropsValues.WEB_SERVER_HTTPS_PORT);
            }
        }
    }

    return sb.toString();
} 
```

In above method it uses the web.server.host property defined in poratal-ext.properties and constructs the URLs. Now I need to overwrite this method to determine the web server host during runtime.

my question are. How to overwrite this function in PoralImpl.java? Do I need use extension to achieve this? Is anyother way(betterway) to achieve this functionality.

I am using liferay 6.1.0 GA-1/tomcat bundle

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T18:35:27.820

是的，覆盖 Liferay 核心功能（=“portal-impl.jar”中存在的代码）的唯一方法是使用 ext 插件，[http://www.liferay.com/community/wiki/-/wiki/Main/分机+插件](http://www.liferay.com/community/wiki/-/wiki/Main/Ext+Plugin)

# javascript - 什么时候真正需要基于文件名的浏览器缓存清除？

> ID：13769088
> 
> 赞同：3
> 
> 时间：2012-12-07T18:43:03.500
> 
> 标签：javascript, css, caching, header

目前，我们正在使用一种类似于 SE 的方式来破坏浏览器缓存资源（如 css 和 js）：[https ://meta.stackexchange.com/questions/112182/how-does-se-determine-the-css-和-js-版本-参数](https://meta.stackexchange.com/questions/112182/how-does-se-determine-the-css-and-js-version-parameter)

无论如何，在对 HTTP 标头进行了一些测试之后，我想知道这实际上何时是必要的。这只是 90 年代遗留下来的遗物，还是现代浏览器无法读取 Last-Modified 或 ETags HTTP 标头？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T18:49:15.493

**缓存问题**

当您尝试为易变的 JS 或 CSS 提供服务器并且您不想/不能（例如使用 CDN）时，请依靠 HTTP 缓存指令标头来使浏览器请求新文件。一些较旧的浏览器不响应 HTTP 缓存指令；因此，如果您以他们为目标，则选择有限。在旧浏览器中，一些代理服务器会剥离、无效或忽略代理信息，因为它们有缺陷或充当激进的缓存。因此，使用 HTTP 缓存控制标头将不起作用。在这种情况下，您只是确保您的最终用户在按下 F5 之前不会获得奇怪的功能。

可变 JS/CSS 资源可以来自可通过管理/配置面板编辑的文件/资源​​。造成这种情况的一些原因是主题化、布局编辑或国际化的语言定义文件。

**HTTP 1.0**

有一些遗留系统使用它。考虑到 Oracle 在其 RDBMS 解决方案中的内置 HTTP 服务器（EGP 网关）仍在使用它。一些代理将 1.1 请求转换为 1.0。古老的浏览器仍然只支持 1.0，但现在这应该是一个相对没有问题的问题。

无论如何，与 HTTP 1.1 的产品相比，HTTP 1.0 使用了一组不同的“原始”控制机制。它们包括了许多 RFC 中未指定的启发式测试，以使缓存工作得相当好。在这两种情况下，缓存通常会导致奇怪的行为，因为交付的内容过时或相同的内容是没有更改的请求。

*关于 pragma:no-cache 的说明*

仅适用于请求而不是响应；人们不知道的常见事情。它旨在防止中间系统缓存敏感信息。它在 HTTP 1.1 中仍然具有向后支持，但不应使用，因为它已被弃用。

...除非微软说 IE 不这样做：http: [//support.microsoft.com/kb/234067](http://support.microsoft.com/kb/234067)

**生成内容的输入**

另一个原因是基于输入参数生成的 JS 或 CSS。仅仅因为 URL 包含`somefile.js`并不意味着它必须是文件系统上的真实文件。它可能只是从进程输出的 JS。如果该过程需要根据参数输出不同的内容，GET 参数是实现这一目标的好方法。

考虑页面版本控制。在可能为历史或业务需求保留页面的大型应用程序中，它允许存在相同的命名资源，但如果需要特定版本，则可以根据需要提供服务。您可以将每个版本保存在不同的文件中，或者您可以创建一个流程来输出具有正确版本更改的正确内容。

**旧浏览器问题**

在 IE6 中，AJAX 请求会受到浏览器缓存的影响。如果您使用未更改的 URL 请求您无法控制的服务，则向 URL 添加一个简单的随机字符串可以规避该问题。

**浏览器缓存选项**

如果我们考虑有关[用户代理缓存设置](https://www.rfc-editor.org/rfc/rfc2616#section-13.1.4)的 HTTP 1.1 上的 RFC，我们还会看到：

> 许多用户代理使用户可以覆盖基本的缓存机制。例如，用户代理可能允许用户指定从不验证缓存的实体（甚至是显式陈旧的实体）。或者用户代理可能习惯性地在每个请求中添加“Cache-Control: max-stale=3600”。用户代理不应默认为非透明行为或导致异常无效缓存的行为，但可以通过用户的显式操作显式配置为这样做。

更改用于资源版本控制的 URL 可被视为此类问题的对策。您是否认为值得我将留给读者。

**结论**

There are reasons to add GET parameters to a file request, but realistically the only reason to do that now (writing as of 2012) is to supply input parameters for dynamically generated scripts and overcoming issues where you can't control the cache headers.

Personally I only use for providing input parameters to scripts that dynamically output initialization scripts, but like everything in development there is always some edge case that adds reason.

# python - "." and "+" not working properly

> ID：13769096
> 
> 赞同：0
> 
> 时间：2012-12-07T18:44:25.837
> 
> 标签：python, regex

I have a string, where

```
text='<tr align="right"><td>12</td><td>John</td> 
```

and I would like to extract the tuple ('12', 'John'). It is working fine when I am using

```
m=re.findall(r'align.{13}(\d+).*([A-Z]\w+).*([A-Z]\w+)', text) 
```

print m

but I am getting ('2', 'John'), when I am using

```
m=re.findall(r'align.+(\d+).*([A-Z]\w+).*([A-Z]\w+)', text)
print m 
```

Why is it going wrong? I mean why .{13} works fine, but .+ fails to work in my re? Thank you!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T18:50:49.577

您真的应该为此使用适当的 HTML 解析器库，即：

```
>>> a = '<tr align="right"><td>12</td><td>John</td>'
>>> p = lxml.html.fromstring(a)
>>> p.text_content()
'12John'
>>> p.xpath('//td/text()')
['12', 'John'] 
```

显然，您需要在多次出现时更好地工作......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T18:50:53.020

我实际上无法使用您提供的示例文本和正则表达式对此进行测试，因为正如所写的那样，它们显然应该找不到匹配项，实际上在 2.7 和 3.3 中都找不到匹配项。

但我猜你想要一个非贪婪的匹配，改变`.+`为`.+?`将解决你的问题。

正如乔恩克莱门茨在他的回答中指出的那样，你真的不应该在这里使用正则表达式。正则表达式实际上无法解析 XML 等非常规语言。当然，不管纯粹主义者怎么说，正则表达式仍然可以在快速和肮脏的情况下对非常规语言有用。但是一旦你遇到一些不工作的东西，你应该首先考虑的是这可能不是那些快速和肮脏的情况之一，你应该寻找一个真正的解析器。即使您以前从未使用过`ElementTree`API 或 XPath，它们也很容易学习，而且学习所花费的时间绝对不会浪费，因为它将来会派上用场很多次。

但无论如何......让我们将您的样本减少到您描述的东西，看看它有什么作用：

```
>>> text='<tr align="right"><td>12</td><td>John</td> 
SyntaxError: EOL while scanning string literal
>>> text='<tr align="right"><td>12</td><td>John</td>'
>>> re.findall(r'align.{13}(\d+).*([A-Z]\w+).*([A-Z]\w+)', text)
[]
>>> re.findall(r'align.{13}(\d+).*([A-Z]\w+)', text)
[('12', 'John')]
>>> re.findall(r'align.+(\d+).*([A-Z]\w+).*([A-Z]\w+)', text)
[]
>>> re.findall(r'align.+(\d+).*([A-Z]\w+)', text)
[('2', 'John')] 
```

我想这就是你所抱怨的。好吧，`.+`不是“无法正常工作”；它正在按照您的要求进行操作：匹配至少一个字符，并且尽可能多地匹配，直到表达式的其余部分仍然可以匹配。其中包括匹配`1`, 因为表达式的其余部分仍然匹配。

如果您希望它在表达式的其余部分可以接管时立即停止匹配，那是非贪婪匹配，而不是贪婪匹配，所以您想要`+?`而不是`+`. 让我们尝试一下：

```
>>> re.findall(r'align.+?(\d+).*([A-Z]\w+)', text)
[('12', 'John')] 
```

多田。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T18:50:19.313

当您使用`.+`时，它将匹配尽可能多的字符。由于`\d+`only 需要匹配至少一位数字，因此`.+`将匹配`"="right"><td>1"`并只留下 "2" 与`\d+`.

您的原始示例适用于您的示例数据。如果您需要编写适用于其他数据的正则表达式，您需要解释该数据的格式是什么以及您希望如何决定提取哪些部分。

此外，鉴于您似乎正在解析 HTML，您最好使用 BeautifulSoup 之类的东西而不是正则表达式。

# xml - Linking xml documents

> ID：13769097
> 
> 赞同：1
> 
> 时间：2012-12-07T18:44:30.400
> 
> 标签：xml

I am a beginner in xml, xquery and xpath. Is it possible to link two separate xml documents together based on a defined relationship between them? for example if I have an xml document containing all the customers of an online retail system like so (shortened example):

```
<customers>
<customer loyaltyPoints = "20" sex = "male">
    <customerID>1092</customerID>
    <first_name>James</first_name>
    <second_name>Roland</second_name>
    <email_address>jroland@eircom.net</email_address>
    <DOB>
        <day>07</day>
        <month>05</month>
        <year>1970</year>    
    </DOB>
    <orderlist>
        <order>[LINK TO ORDER FROM ORDERS.XML]</order>
    </orderlist>
</customer> 
```

and a second xml file containing a series of orders like so:

```
<orders>
<order numberOfItems = "2">
    <orderID>384523</orderID>
    <items>
        <item>[LINK TO PRODUCT X IN PRODUCTS.XML]</item>
        <item>[LINK TO PRODUCT Y IN PRODUCTS.XML]</item>
    </items>
</order>
</orders> 
```

Can I link the customer to the order in the other document and vice versa? Many Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:14:31.800

如果您使用您拥有的 ID 作为链接密钥，您可以执行以下操作：

```
XmlDocument customerDoc = new XmlDocument();
customerDoc.LoadXml("<customers>
                         <customer loyaltyPoints = \"20\" sex = \"male\">
                         <customerID>1092</customerID>
                         <first_name>James</first_name>
                         <second_name>Roland</second_name>
                         <email_address>jroland@eircom.net</email_address>
                         <DOB>
                             <day>07</day>
                             <month>05</month>
                             <year>1970</year>
                         </DOB>
                         <orderlist>
                             <order>384523</order>
                         </orderlist>
                       </customer>
                    </customers>");

XmlDocument ordersDoc = new XmlDocument();
ordersDoc.LoadXml("<orders>
                       <order numberOfItems = \"2\">
                           <orderID>384523</orderID>
                           <items>
                               <item>[LINK TO PRODUCT X IN PRODUCTS.XML]</item>
                               <item>[LINK TO PRODUCT Y IN PRODUCTS.XML]</item>
                           </items>
                        </order>
                   </orders>");

// Select all "customer" nodes
XmlNodeList nodes = customerDoc.SelectNodes("customers/customer");

foreach (XmlNode node in nodes)
{
     XmlNodeList orderList = node.SelectNodes("orderlist");
     foreach (XmlNode orderNode in orderList)
     {
           string orderId = orderNode.InnerText;
           XmlNode orderInOrderDocNode = ordersDoc.SelectSingleNode("orders/order[orderID='" + orderId + "']");
           Console.WriteLine(orderInOrderDocNode.InnerText);
            }
        } 
```

给定客户文档中的 orderId，这将打印出在 orders.xml 文档中找到的订单节点。

希望这就是你要找的。

# c# - padding margin an inline Flowdocument

> ID：13769100
> 
> 赞同：0
> 
> 时间：2012-12-07T18:44:35.997
> 
> 标签：c#, flowdocument

I'm searching for an option to apply a margin or/and padding to an inline element as Span in Flowdocument. Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:10:17.067

您可以在以下链接中找到一个很好的概述如何处理 FlowDocument 中的文本。 [http://msdn.microsoft.com/en-us/library/aa970786.aspx](http://msdn.microsoft.com/en-us/library/aa970786.aspx)

我使用了文本块。看来 TextBlock 无法留有余量。所以一定要改用填充。

# c++ - 如何在 Arduino 上为 SD 卡创建动态文件名

> ID：13769101
> 
> 赞同：1
> 
> 时间：2012-12-07T18:44:35.983
> 
> 标签：c++, arduino

我想一次将我的数据记录在我的 Arduino 上一个文件。我希望文件名是经过的毫秒数 + 一些 ID 的组合。例如，GPS 数据将是 millis()+"GPS"。

我尝试了以下代码，但它不喜欢我使用`String`. 我可以使用 char 数组，但长度总是动态的。有没有办法以某种方式用 at string 做到这一点？

```
static void writeToSD()
{
    String logEntry = " GPS: ";
    logEntry += GPSString;
    String filename = String(millis());
    filename += "GPS";
    Serial.println(logEntry);
    Serial.println(filename);

    File dataFile = SD.open(filename, FILE_WRITE);

    // If the file is available, write to it:
    if (dataFile) {
        dataFile.println(logEntry);
        dataFile.close();
        Serial.println("Closed");
    }
    // If the file isn't open, pop up an error:
    else {
        Serial.println("error opening file");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:56:45.820

你可以试试以下

```
char fileNameCharArray[filename.length()];
filename.toCharArray(fileNameCharArray, filename.length())
File dataFile = SD.open(fileNameCharArray, FILE_WRITE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:07:31.917

```
sprintf (filename, "%ld-GPS", millis()); 
```

请注意，[由于有据可查的内存泄漏/碎片问题，](http://arduino.cc/forum/index.php?action=printpage;topic=114420.0)不鼓励在 Arduino 上使用 String 。

# c# - 绑定到包含 MVVM 中的集合的模型

> ID：13769105
> 
> 赞同：0
> 
> 时间：2012-12-07T18:44:47.420
> 
> 标签：c#, mvvm, collections, caliburn.micro

我开始使用 MVVM（使用 Caliburn.Micro）并且遇到了一个我不确定我是否正确执行此操作的问题。我有一个模型`MediaCacherConfig`，它代表一个以 json 格式存储数据的文本文件。该模型包含 2 个字符串列表和一个单独的字符串。

我正在努力解决的是如何正确设置视图模型，尤其是`AddNewFolder()`方法。我不确定我是否提出了正确的事件以及视图模型的表示是否正确。我可以看到如何绑定到一个简单的属性，但是绑定到一个集合似乎更令人头疼，因为每次添加项目（字符串）时我都会创建一个全新的集合。

此外，当我加载一个全新的模型时，我必须对所有对我没有意义的属性运行 NotifyPropertyChanged() 方法。

非常感谢任何指导。

```
public class MediaCacherConfig : IConfig
{

    public string DatabaseFileName { get; set; }

    public ICollection<string> FoldersToScan { get; set; }

    public ICollection<string> ExtensionsToIgnore { get; set; }

} 
```

我有一个视图模型`MediaCacherConfigViewModel`：

```
 public class MediaCacherConfigViewModel : PropertyChangedBase
{

    private MediaCacherConfig Model { get; set; }

    public string DatabaseFileName
    {
        get { return Model.DatabaseFileName; }
        set
        {
            Model.DatabaseFileName = value;
            NotifyOfPropertyChange(() => DatabaseFileName);
        }
    }

    public BindableCollection<string> FoldersToScan
    {
        get
        {
            return new BindableCollection<string>(Model.FoldersToScan);
        }
        set
        {
            Model.FoldersToScan = value;
            NotifyOfPropertyChange(() => FoldersToScan);
        }
    }

    public BindableCollection<string> ExtensionsToIgnore
    {
        get
        {
            return new BindableCollection<string>(Model.ExtensionsToIgnore);
        }
        set
        {
            Model.ExtensionsToIgnore = value;
            NotifyOfPropertyChange(() => ExtensionsToIgnore);
        }
    }

    /* Constructor */
    public MediaCacherConfigViewModel()
    {
        LoadSampleConfig();
    }

    /* Methods */
    public void LoadSampleConfig()
    {

        MediaCacherConfig c = new MediaCacherConfig();

        string sampleDatabaseFileName = "testing.config";

        List<string> sampleFoldersToScan = new List<string>();
        sampleFoldersToScan.Add("A");
        sampleFoldersToScan.Add("B");
        sampleFoldersToScan.Add("C");

        List<string> sampleExtensionsToIgnore = new List<string>();
        sampleExtensionsToIgnore.Add("txt");
        sampleExtensionsToIgnore.Add("mov");
        sampleExtensionsToIgnore.Add("db");
        sampleExtensionsToIgnore.Add("dat");

        c.DatabaseFileName = sampleDatabaseFileName;
        c.FoldersToScan = sampleFoldersToScan;
        c.ExtensionsToIgnore = sampleExtensionsToIgnore;

        Model = c;

        NotifyOfPropertyChange(() => DatabaseFileName);
        NotifyOfPropertyChange(() => FoldersToScan);
        NotifyOfPropertyChange(() => ExtensionsToIgnore);

    }

    public void AddNewFolder()
    {
        Model.FoldersToScan.Add("new one added");
        NotifyOfPropertyChange(() => FoldersToScan);

    }

    public void SaveConfig()
    {
        ConfigTools.Configure(Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData), "Cacher", "Config"));

        ConfigTools.SaveConfig(Model,"sampleconfig.txt");              
    }

    public void LoadConfig()
    {
        ConfigTools.Configure(Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData), "Cacher", "Config"));

        MediaCacherConfig m = ConfigTools.LoadConfig<MediaCacherConfig>("sampleconfig.txt") as MediaCacherConfig;
        Model = m;

        NotifyOfPropertyChange(() => DatabaseFileName);
        NotifyOfPropertyChange(() => FoldersToScan);
        NotifyOfPropertyChange(() => ExtensionsToIgnore);

    }
} 
```

这是我的观点：

```
<UserControl x:Class="MediaCacher.Views.MediaCacherConfigView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="413" Width="300">
<Grid MinWidth="300" MinHeight="300" Background="LightBlue" Margin="0,0,0,0">
    <Grid.RowDefinitions>
        <RowDefinition Height="409*"/>
        <RowDefinition Height="4*"/>
    </Grid.RowDefinitions>
    <TextBox x:Name="DatabaseFileName" TextWrapping="Wrap" Margin="10,64,10,0" HorizontalAlignment="Center" Width="280" Height="42" VerticalAlignment="Top"/>
    <ListBox x:Name="FoldersToScan" HorizontalAlignment="Left" Height="145" Margin="10,111,0,0" VerticalAlignment="Top" Width="280"/>
    <ListBox x:Name="ExtensionsToIgnore" HorizontalAlignment="Left" Height="145" Margin="10,261,0,0" VerticalAlignment="Top" Width="280"/>
    <Button x:Name="AddNewFolder" Content="Add" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top" Width="87" Height="49"/>
    <Button x:Name="LoadConfig" Content="Load" HorizontalAlignment="Left" Margin="102,10,0,0" VerticalAlignment="Top" Width="96" Height="49"/>
    <Button x:Name="SaveConfig" Content="Save" HorizontalAlignment="Left" Margin="203,10,0,0" VerticalAlignment="Top" Width="87" Height="49"/>
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T18:51:38.000

首先，在这里你每次都返回一个全新的集合，所以显然没有任何东西被持久化。

```
 public BindableCollection<string> FoldersToScan
    {
        get
        {
            return new BindableCollection<string>(Model.FoldersToScan);
        }
        set
        {
            Model.FoldersToScan = value;
            NotifyOfPropertyChange(() => FoldersToScan);
        }
    } 
```

其次，您的 AddFolder 方法应该属于您的 ViewModel。当您将字符串添加到现有集合时，它是 BindingCollection 的事实应该会自动向您的视图触发一个事件，即添加了一个新项目。

* * *

我就是这样做的。这显然是用于演示目的的示例，请添加您需要的所有其他内容。Youd ideall 希望通过`EventArgs`并注意我没有实施`INotifyPorpertyChanged`，因为我没有时间把它全部写出来。我也在使用`ObservableCollection`，但你可以使用你的`BindableCollection`.

这个例子的重点是向您展示如何管理您的 ViewModel -> Model 通信。从技术上讲，您的 View -> ViewModel 应该通过 CommandPattern 进行对话。

```
public class YourViewModel
    {
        private readonly YourModel model;
        private ObservableCollection<string> foldersToScan = new ObservableCollection<string>();
        public ObservableCollection<string> FoldersToScan
        {
            get { return this.foldersToScan; }
        }

        public YourViewModel(YourModel model)
        {
            this.model = model;
            this.model.OnItemAdded += item => this.foldersToScan.Add(item);
        }

        public void AddFolder(string addFolder) //gets called from view
        {
            this.model.AddFolder(addFolder); //could be ICommand using Command Pattern
        }
    }

    public class YourModel
    {
        private readonly List<string> foldersToScan;
        public IEnumerable<string>  FoldersToScan
        {
            get { return this.foldersToScan; }
        }

        public event Action<string> OnItemAdded; 

        public YourModel()
        {
            this.foldersToScan = new List<string>();
        }

        public void AddFolder(string folder)
        {
            this.foldersToScan.Add(folder);
            this.RaiseItemAdded(folder);
        }

        void RaiseItemAdded(string folder)
        {
            Action<string> handler = OnItemAdded;
            if (handler != null) handler(folder);
        }
    } 
```

# javascript - 以正确的执行顺序从 getJSON 获取值

> ID：13769106
> 
> 赞同：1
> 
> 时间：2012-12-07T18:44:50.657
> 
> 标签：javascript, jquery

我从 db 获取这个数据字典：

```
{"first":{"Head1":"6643Z","Head2":"1245Z"},"second":{"Head1":"1109E","Head2":"1231A"}} 
```

我只需要获取“Head1”记录的第一个值，为此我添加了一个全局变量以便从 getJSON 方法中获取值，但首先运行带有未定义值的第二个警报，然后运行第一个警报具有正确的价值...

```
 var message;
 jQuery.getJSON("get_data.json", function(msg){
    jQuery.each(msg,function (key,val){
        message=val['string_data'];
        return false;//trying to break
     });
    alert("first"+message); 
  });

alert("second"+message); 
```

为此，我如何强制在第二次警报中具有正确的值，换句话说，如何强制以正确的顺序运行代码......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T18:49:36.630

第二个警报显示的原因`undefined`是，当该代码运行时，请求尚未完成。

您*可以*设置`getJSON` *同步*，这样警报在请求完成之前不会运行，但这会导致用户体验不佳（锁定浏览器），并且 jQuery 将在即将发布的版本中放弃对它的支持。如果您查看[`getJSON`](http://api.jquery.com/jQuery.getJSON)文档，您会发现它只是一个调用 的包装器，[`ajax`](http://api.jquery.com/jQuery.ajax)如果您使用`ajax`，您可以指定一个`async: false`选项。（请注意，这是真的，因为您将 ajax 与 JSON 一起使用；如果它是*JSON-P*，则您将没有同步选项，因为 JSON-P 是一种异步协议。）

你更好的选择是接受网络通信的异步特性，无论你有什么需要使用这些数据，让它提供一个回调：

```
function getTheData(callback) {
    jQuery.getJSON("get_data.json", function(msg){
        var message, key;

        for (key in msg) {
            message = msg[key];
            break; // <== SEE BELOW
        }
        callback(message);
    });
}

getTheData(function(message) {
    alert("second"+message);
}); 
```

另请注意，您返回的对象**没有 order**，因此您的代码从中获取“第一个”值将是不可靠的。您需要知道要查找的属性键才能可靠地获取该属性的值。它们在 JSON 文本中出现的顺序对结果对象中属性的顺序**没有影响**。（当然，数组会有所不同。）

例如，如果你总是想要 的值`first`，那么：

```
function getTheData(callback) {
    jQuery.getJSON("get_data.json", function(msg){
        callback(msg.first);
    });
} 
```

# mysql - 从多个表加入未在 MySQL 中返回所需数据

> ID：13769107
> 
> 赞同：0
> 
> 时间：2012-12-07T18:44:51.513
> 
> 标签：mysql, jointable

我的数据库中有三个表（和） `contracts`，客户和合作伙伴都可以使用合同。`partners``customers`

我只将合同数据保存在`contracts`表和`customers`表中，`partners`表中包含一个名为的字段，它是id 字段`contract_id`的外键。`contracts`

不，我想选择合同并将它们显示在列表中，但如果合同同时用于客户和合作伙伴，我希望我的列表同时显示它们，但我无法使其工作。

我的查询是：

```
SELECT c.*, p.id AS partner_id, p.name AS partner_name, 
       cu.id AS customer_id, cu.name AS customer_name
FROM contracts AS c 
LEFT JOIN partners AS p ON c.id = p.contract_id
LEFT JOIN customers AS cu ON c.id = cu.contract_id 
```

**SAMPLES：**表的 记录`contract`如下：

```
 id  |   title   |   contract_start  |   contract_end
-------------------------------------------------------------
    1   |   Test    |   2012-10-02      |   2013-10-02
    2   |   Test2   |   2012-09-27      |   2013-09-27 
```

表的记录`customers`如下：

```
 id  |   code    |   name                |   contract_id
-------------------------------------------------------------
    1   |   123456  |   Customer1           |   1
    2   |   654321  |   Dummy Co. LTD.      |   2 
```

表的记录`partners`如下：

```
 id  |   code    |   name                |   contract_id
-------------------------------------------------------------
    1   |   789456  |   Partner1            |   1 
```

不，我想要一个包含 3 条记录的列表，每条记录显示一份合同（考虑到其中一个重复），每条记录显示合作伙伴或客户名称和 ID。如果合同涉及客户，则合作伙伴字段应该是`null`，反之亦然。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T19:19:44.783

你说：

> 不，我想选择合同并将它们显示在列表中，但如果合同同时用于客户和合作伙伴，我希望我的列表**同时显示它们**

您可能需要分别连接这两个表并使用`UNION`：

```
SELECT c.*, 
       p.id AS partner_id, p.name AS partner_name, 
       NULL AS customer_id, NULL AS customer_name
FROM contracts AS c 
INNER JOIN partners AS p ON c.id = p.contract_id

UNION ALL

SELECT c.*, 
       NULL AS partner_id, NULL AS partner_name, 
       cu.id AS customer_id, cu.name AS customer_name
FROM contracts AS c 
INNER JOIN customers AS cu ON c.id = cu.contract_id

UNION ALL

SELECT c.*, 
       NULL, NULL,
       NULL, NULL 
FROM contracts AS c 
WHERE NOT EXISTS ( SELECT *  
                   FROM partners AS p
                   WHERE c.id = p.contract_id
                 )
  AND NOT EXISTS ( SELECT *
                   FROM customers AS cu 
                   WHERE c.id = cu.contract_id 
                 ) ; 
```

* * *

（另一种输出设置不同的方式）
如果您愿意，可以将最后四列合并为两列，添加一列以区分合作伙伴和客户：

```
SELECT c.*, 
       p.id AS partner_customer_id, p.name AS partner_customer_name, 'P' AS type 
FROM contracts AS c 
INNER JOIN partners AS p ON c.id = p.contract_id

UNION ALL

SELECT c.*, 
       cu.id , cu.name, 'C'
FROM contracts AS c 
INNER JOIN customers AS cu ON c.id = cu.contract_id ; 
```

# html - div 框的奇怪高度

> ID：13769108
> 
> 赞同：2
> 
> 时间：2012-12-07T18:44:55.743
> 
> 标签：html, css

当我在 IE 中测试它时，我的一个 div 表现得很奇怪。

这是它的图片：

[图片 http://img10.imageshack.us/img10/1395/mmmbme.png](http://img10.imageshack.us/img10/1395/mmmbme.png)

奇怪的是我有`height: 1px;`。我不知道如何解决这个问题，我已经为这个问题环顾了很长时间。

这是我的CSS：

```
body{
    background-image: url(images/bakgrund.png);
    background-position: center;
    background-repeat: no-repeat;
}

#main{
    margin: 0px auto;
    width: 1870px;
}

#fb{
   position: absolute;
   height: 69px;
   width: 70px;
    margin-top: 505px;
    margin-left: 790px;
}

#nyheter{
    position: absolute;
    width: 460px;
    height: 210px;
    margin-top: 30px;
    margin-left: 500px;
}

#nyheter a{
    color: white;        
}

#nyheter a:hover{
    color: #c4c4c4;
}

h4{
    font-size: 20px;
    color: white;           
}

#nyheter p{
    margin-top: -25px;
}

h3{
    font-weight: 800;
    font-size: 20px;
}

#nyheter a:hover{
}

h2{
    color: white;
    font-family: "Bebas Neue";
    font-weight: 400;
    font-size: 50px;
    position: absolute;
}

#fb:hover
{

}

#twitter a{

}

#twitter{
   position: absolute;
   height: 69px;
   width: 70px;
   margin-top: 505;
   margin-left: 880px;
}

#banner {
    height: 200px;
    width: 1000px;
    margin-top: -10px;
    border: 1px solid transparent;
    background-image: url(banner.png);
    background-repeat: no-repeat;
    background-position: center;
    border: thin ridge #3a3a3a;
    margin: 0px auto;
    margin-left: 450px;
}

/*
#element1{
    position: relative;
    width: 1000px;
    height: 710px;
    margin: auto;
    background-color: black;
    filter:alpha(opacity=85);
    -moz-opacity:.85;
    opacity:.85;
    z-index: 1;
} */

#content1{
    width: 1000px;
    height: 610px;
    color: white;
    text-align: left;
    font-family: Makisupa;
    z-index: 1;
    border: thin ridge #3a3a3a;
    background-color: black;
    float: left;
    margin-top: -2px;
    margin-left: 450px;
}

#content2{
    width: 1000px;
    height: 100px;
    margin-left: 450px;
    position: relative;
    color: #a8a8a8;
    z-index: 2;
    font-family: Arial, Helvetica, sans-serif;
    font-size: small;
    margin-top: 0.4px;
    border: thin ridge #3a3a3a;
    background-color: black;
}

#textcontent{
    margin-left: 10px;
    margin-top: 10px;
    position: absolute;
}

#test:hover{
}

#test{

}

#copy{
    margin-left: 855px;
    margin-top: 60px;
    position: absolute;
}

#kodad{
    margin-left: 320px;
    position: absolute;
    margin-top: 70px;
    font-size: x-small;
}

a{
    text-decoration: none;
    color: #a8a8a8;
}

a:hover{
    color: white;
}

#textoperation{
    margin-top: 15px;
    margin-left: 20px;
}

#nyhet{
    position: absolute;
    font-family: Arial, Helvetica, sans-serif;
    color: #bfbfbf;
    font-size: 14px;
    margin-left: 10px;
    margin-top: 50px; 
}

#huvudtext{
    margin-top: -10px;
}

#rubrik h3{
    font-size: 15px;
    font-weight: 400;
}

#textinled{
    position: absolute;
    font-family: Arial, Helvetica, sans-serif;
    color: #bfbfbf;
    font-size: 15px;
    margin-left: 20px;
    margin-top: 130px;
}

#video{
    position: absolute;
    margin-left: 20px;
    margin-top: 295px;
}

h2{
    color: white;
    font-family: "Bebas Neue";
    font-weight: 400;
    font-size: 40px;
    position: absolute;
}

#nyhettext{
    position: absolute;
    margin-top: -23px;
    margin-left: 10px;
}

#huvudtext{

}

#underline{
    background-color: #3a3a3a;
    position: absolute;
    margin-top: 20px;
    margin-left: 10px;
    position: absolute;
    width: 220px;
    height: 3px;
}

#mitten{
    position: absolute;
    height: 570px;
    width: 3;
    background-color: #3a3a3a;
    margin-top: 10px;
    margin-left: 470px; 
}

/*
#element2{
    width: 1000px;
    height: 50px;
    margin: auto;
    margin-top: -671px;
    background-color: black;
    filter:alpha(opacity=85);
    -moz-opacity:.85;
    opacity:.85;
    z-index: 1;
}
*/
h1{
    color: white;
    font-family: "Bebas Neue";
    font-weight: 400;
    font-size: 50px;
    position: absolute;
}

#cssmenu{
    margin-top: 170px;
}

#cssmenu ul
{
    margin: 0;
    padding:0;
    list-style-type:none;
    width:auto;
    position:relative;
    display:block;
    height:30px;
    font-size:12px;
    font-weight:bold;
    background:transparent url(images/nav_bg.png) repeat-x top left;
    font-family:Arial, Helvetica, sans-serif;
    border-bottom:1px solid #000000;
    border-top:1px solid #000000;
}

#cssmenu li
{
    display:block;
    float:left;
    margin:0;
    padding:0;
}

#cssmenu li a
{
    display:block;
    float:left;
    color: white;
    text-decoration:none;
    font-weight:bold;
    padding:8px 20px 0 20px;
}

#cssmenu li a:hover
{   
    color: #c4c4c4;
    height:22px;
    background:transparent url(images/nav_bg.png) 0px -30px no-repeat;      
}

#cssmenu li.active a
{
    display:inline;
    height:22px;
    background:transparent url(images/nav_bg.png) 0px -30px no-repeat;  
    float:left;
    margin:0;
} 
```

这是我的 HTML 代码：

```
<?xml version="1.0"?>
<! DOCTYPE html PUPLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml/DTD/xhtml1/-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title> Start </title>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <!--[if gte IE 6]>
    <link rel="stylesheet" type="text/css" href="nycss.css" />
    <![endif]-->

    <![if !IE]>
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <![endif]>
</head>
<body>

<div id="main">
    <div id="banner">
    <div id='cssmenu'>
    <ul>
    <li class='active '><a href='#'><span>Hem</span></a></li>
       <li><a href='#'><span>Information</span></a></li>
       <li><a href='#'><span>Om oss</span></a></li>
       <li><a href='#'><span>Anmäla</span></a></li>
       <li><a href='#'><span>Partners</span></a></li>
    </ul>
    </div>
    </div>

    <!--<div id="element1"></div> -->
    <div id="content1">
        <div id="background">
        </div>
        <div id="textoperation"><h1> Operation Pixel 19/02-13 </br>Folkets Hus i Karlshamn </h1></div>
        <div id="textinled">
            <p> Operation Pixel drivs av fem elever från JB Gymnasiet </br> i Karlshamn som ett projekt arbete. Vi som står för lanet </br> är Adam Erlandsson, Isak Risberg Jönsson, Jonatan Tjärnberg, </br>Victor Johansson och Lucas Mattsson.</p>
            <p> Lanet kostar 200 kr och vara mellan 2013.02.19-2013-02.21\. </br> Du kan även förhandsboka och betala 150 kr istället.</br> Klicka på <a href="#"> Anmäla </a> för att boka din plats. </p>
        </div>
        <div id="video">
            <iframe width="410" height="280" src="http://www.youtube.com/embed/qP40Liau6z4" frameborder="0" allowfullscreen></iframe>
        </div>
        <div id="mitten"></div>
        <div id="nyheter">
            <div id="nyhettext"><h2> Nyheter </h2></div>
            <div id="underline"></div>
            <div id="nyhet">
            <h4>Hemsidan är på gång nu</h4><p>Adam Erlandsson håller just nu på att utveckla Operation Pixelshemsida. Hemsidan kommer vara klart inom 1-2 veckor.</br> Mer information kommer inom kort.</p> 
            <h4> Datum och lokal är bestämd </h4><p> Vi har nu hittat en lokal (folkets hus) och datumet är </br> satt mellan  19/02-13 21/02-13\. Lorem ipsum dolor sit amet, consectetur </br>adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. </br></br>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate. </p>
            <h4> Projekt arbete </h4> <p>ed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem ap
            eriam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. </br></br> Nemo enim ipsam voluptatem quia volup
            tas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt.
            </br></br><h3><a href="#" id="nyhetlänk"> Läs alla nyheter </a></h3>
        </div>
        </div>
        <div id="fb">
            <a href="#"> <img src="images/fb.png"> </a>
        </div>
        <div id="twitter">
            <a href="#"> <img src="images/twitter.png"> </a>
        </div>
    </div>
    <div id="content2">
    <div id="textcontent">
        <div id="test"><a href="#"> Hem </a> </br></div>
        <div id="test"><a href="#"> Information </a> </br></div>
        <div id="test"><a href="#"> Om Oss </a> </br></div>
        <div id="test"><a href="#"> Anmäla </a> </br></div>
        <div id="test"><a href="#"> Partners </a></div>
    </div>
    <div id="kodad">
        <p> Code by Adam Erlandsson. Design by Adam Erlandsson & Victor Johansson </p>
    </div>
    <div id="copy">
        <p> © 2012 Operation Pixel </p>
    </div>

</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:50:21.920

为了安全起见，在 中写入注释`div`并设置其字体大小和行高。一般来说，所有的视觉风格都应该用样式表来表达，而不是用 HTML 标签。也许你最好添加一个 CSS 边框。

```
#nyhettext h2 {
    border-bottom: 3px solid #3a3a3a;
} 
```

无论如何，以下内容应该适用于您当前的方法。

## HTML

```
<div id="underline"><!-- --></div> 
```

## CSS

```
#underline{
    background-color: #3a3a3a;
    position: absolute;
    margin-top: 20px;
    margin-left: 10px;
    /* position: absolute; */
    width: 220px;
    height: 3px;
    font-size: 1px;
    line-height: 1px;
} 
```

还有一件事：所有这些元素都需要有一个`id`吗？不应有多个具有相同 id 的元素（请参阅 参考资料`<div id="test">`）。考虑`class`改用。

# c# - 可以将 ASP.NET 2.0 WebApp 配置为 IIS7 中 MVC3 网站下的子应用程序吗？

> ID：13769109
> 
> 赞同：1
> 
> 时间：2012-12-07T18:44:56.807
> 
> 标签：c#, asp.net-mvc, iis-7, webforms

我在 IIS7 中有一个 MVC3 网站设置，假设 URL 是[http://devtest.com](http://devtest.com)，我想将 ASP.NET 2.0 webapp 设置为子应用程序。我的目标是访问像[http://devtest.com/childapp](http://devtest.com/childapp)这样的 URL 。

虽然 MVC 应用程序工作正常，但在尝试导航到子应用程序时，出现错误： *“无法加载文件或程序集 'System.Web.Mvc, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'或其依赖项之一。系统找不到指定的文件。*

这种类型的配置是否可能，如果没有，任何人都可以建议替代设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:58:32.003

子应用程序将从父应用程序继承 web.config 文件设置，您必须根据您在父 web.config 文件中的需要指定 inheritInChildApplications="false"。

链接：
1\. [IIS 中的嵌套 ASP.NET“应用程序”继承父配置值？](https://stackoverflow.com/questions/4144117/nested-asp-net-application-within-iis-inheriting-parent-config-values)
2.[在 IIS7.5 网站中托管多个 ASP.Net MVC3 应用程序的问题](https://stackoverflow.com/questions/10521059/problems-hosting-multiple-asp-net-mvc3-applications-in-an-iis7-5-website)

# c# - LINQ 分组和 SUM

> ID：13769119
> 
> 赞同：0
> 
> 时间：2012-12-07T18:45:34.283
> 
> 标签：c#, .net, sql, linq, entity-framework

> **可能重复：**
> [在一个 LINQ 查询中获取两列的总和](https://stackoverflow.com/questions/2432281/get-sum-of-two-columns-in-one-linq-query)

我需要知道如何编写一个 LINQ 查询，它会给我与这个 SQL 查询相同的结果：

```
select sum(col1) as [col1] , sum(col2) as [col2] , sum(col1)/sum(col2) as [col3], col4 as [col4] 
from some_table 
group by col4 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T19:02:26.493

或者使用 Lambda，我假设`some_table`是实体或存储库 .. 等。

```
some_table.GroupBy( row => row.col4).Select( row => new
{
    col1 = row.Sum(x => x.col1), 
    col2 = row.Sum(x => x.col2),
    col3 = row.Sum(x => x.col1) / row.Sum(x => x.col2),
    col4 = row.Key
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T18:58:52.557

完整的道具去[史蒂文](https://stackoverflow.com/users/264697/steven)这个答案：[https ://stackoverflow.com/a/2432348/211627](https://stackoverflow.com/a/2432348/211627)

```
from row in some_table
group row by row.col4 into g
select new
{
    col1 = g.Sum(x => x.col1), 
    col2 = g.Sum(x => x.col2),
    col3 = g.Sum(x => x.col1) / g.Sum(x => x.col2),
    col4 = g.Key
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T19:02:57.983

这是假设您的表是某种实体。这会将其放入`Anonymous Type`, 但也可用于创建您自己类型的对象。

```
myInitialCollection.GroupBy(x => x.Col4).Select(x => 
    new { 
            col1 = x.Sum(y => y.Col1), 
            col2 = x.Sum(y => y.Col2), 
            col3 = (x.Sum(y => y.col1) / x.Sum(y => y.col2)), 
            col4 = x.Key
    }); 
```

# android - 从Android中的网页读取数据

> ID：13769121
> 
> 赞同：1
> 
> 时间：2012-12-07T18:45:40.433
> 
> 标签：android, httpclient

我使用此代码从 html 页面读取数据并放入 webview

```
public class MainActivity extends Activity {
public WebView objwebview ;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    objwebview = (WebView)findViewById(R.id.webView1);
          HttpClient client = new DefaultHttpClient();
          HttpGet request = new HttpGet("http://www.google.com");
          try
          {
              HttpResponse response = client.execute(request);
              BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
              String line;
              StringBuilder str = new StringBuilder();
              while((line = reader.readLine()) != null) {
                  str.append(line);
          }
              objwebview.loadData(str.toString(), "text/html", "UTF-8");
      }
      catch(Exception e)
      {
          e.printStackTrace();
          objwebview.loadData(e.toString(), "text/html", "UTF-8");
      } 
```

但是当我运行它时，我给出了这个错误（“android.os.networkonmainthreadexception”）我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T18:51:12.980

您正在Android的*主线程上运行网络代码。*阅读[本文](http://android-developers.blogspot.com/2009/05/painless-threading.html)以找到您问题的部分答案。

基本思想是，如果您执行不立即返回的同步读取（即需要很长时间的事情，例如网络操作），您需要在另一个线程上执行此操作，然后将结果传达回 GUI。

您有几个选项可以做到这一点：您可以使用`AsyncTask`，它允许您轻松地将更新发布到 UI，或者您可以使用背景`Service`以及相关的通信（通过 AIDL 或更简单的消息和处理程序）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-03T13:33:09.260

您正在主线程中访问网络连接。将以下行粘贴到 setContentView(your_layout);

```
// Allow network access in the main thread
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

# mysql - SQL 在其他字段数据中查找并更新另一个字段

> ID：13769123
> 
> 赞同：0
> 
> 时间：2012-12-07T18:45:48.660
> 
> 标签：mysql, sql

我在为 mysql db 执行这样的 sql 查询时遇到了麻烦：我需要更新我的数据库中的字段 A，但我也有 B 字段，其中包含很多数据，例如：

```
ASIAN HORSE 70з рус 600A (261x175x220) 
```

或者

```
Бэрен polar 55/59з (555112) 480A (242x175x190) 
```

我必须获取 70з 并将其设置在字段 A 中，并且 55/59з 相同（但用于另一条记录）。

但是我如何在 B 字段中搜索以结尾`з`但为单词的内容（并非所有数据都为 % 之前`з`）

我知道，这听起来像是家庭作业……但我真的不知道如何只选择带有某个结尾的单词……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T20:55:59.700

MySQL 函数[`substring_index`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_substring-index)可用于选择由某物分隔的字符串片段。例如，这会从 MyColumn 中挑选出第三个“单词”：

```
select substring_index(substring_index(MyColumn, ' ', 3), ' ', -1) from MyTable 
```

（`70з`是 中的第三个“词” `ASIAN HORSE 70з рус 600A (261x175x220)`。）

**更新**如果您正在寻找以“з”结尾的“单词”而不是第三个单词，则可以使用：

```
select substring_index(substring_index(MyColumn, 'з', 1), ' ', -1) from MyTable 
```

这会将“з”视为分隔符，并将其从结果中删除。您可以使用 concat 将其添加回来：

```
select concat(substring_index(substring_index(MyColumn, 'з', 1), ' ', -1), 'з') from MyTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:22:50.473

如果您尝试解析该字段以使第三个值始终进入特定字段，那么您遇到了一个难题并且可能想要创建一个用户定义的函数。

但是，如果您只想查看 70з 是否存在并设置另一个字段，那么这应该可以：

```
update t
    set B = '70з'
    where A like '% 70з' or A like '% 70з %' or A like '70з %' or A = '70з' 
```

这使用空格来定义单词边界，并考虑字符串是在开头、中间、结尾还是 A 中的整个值。

# sharepoint-2010 - 应用特定标记样式时向 SP21010 富文本编辑器添加动态文本

> ID：13769125
> 
> 赞同：2
> 
> 时间：2012-12-07T18:45:52.140
> 
> 标签：sharepoint-2010, rte, page-layout

在 Sharepoint 2010 中，我构建了自定义页面布局并应用了自定义样式。页面布局由单个富文本编辑器 HTML 字段组成。现在，当应用特定标记样式时，我需要在所选文本旁边添加一些自定义文本。

保存页面后，我可以使用 jQuery 来做到这一点，但那是在用户完成编辑之后。

要求是让他们在仍处于编辑模式时查看文本，以便获得真正的所见即所得体验。下面是我用来在页面保存后显示文本的 jQuery 代码：

```
<script type="text/javascript">
    $(document).ready(function () {

        $('.topicpagelayout2-styleElement-H3').wrap('<div class="hd leftcontent" />');
        $('.topicpagelayout2-styleElement-H3').append('<span class="top"><a href="#top">Top</a></span>');
        $('.topicpagelayout2-styleElement-H3').addClass('header2');

        var count=0;

        $('.leftcontent').each(function(index) {
            count++;
            $(this).attr('id','div_'+count);
        });

        //$("span.ms-formfieldlabel").css("display", "none");

        setLeftContent();
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:43:40.917

您可以为此使用使用 css 内容。看看这个，如果它可以给你一些想法

> [http://www.quirksmode.org/css/content.html](http://www.quirksmode.org/css/content.html)

# java - ANTLR 无法匹配以下备选方案

> ID：13769131
> 
> 赞同：0
> 
> 时间：2012-12-07T18:46:30.440
> 
> 标签：java, compiler-construction, antlr, antlr3

我一直在研究关于这个问题的已经存在的问题，但似乎仍然无法理解它。我有一部分语法

```
/* Variable Declaration */
var_decl_list     : var_decl (var_decl_tail) ;    
var_decl          : var_type id_list ';' | empty ; //error on this line    
var_type          : FLOAT | INT;    
any_type          : var_type | VOID ;     
id_list           : id id_tail ;    
id_tail           : ',' id id_tail | empty ;    
var_decl_tail     : var_decl var_decl_tail | var_decl_tail ; 
```

它告诉我“（201）：永远无法匹配以下替代方案：2”，我搞砸了事情已经让它说出了关于 FLOAT 和 INT 的具体内容。antlr railraoad 视图没有多大帮助。完整的语法是

```
empty             : ;

/* Program */    
program           : PROGRAM id BEGIN pgm_body END ;    
id                :  IDENTIFIER ;    
pgm_body          : decl func_declarations ;    
decl              : string_decl_list (decl) | var_decl_list (decl) | empty ;    

/* Global String Declaration */    
string_decl       : STRING id ':=' str ';' | empty ;    
string_decl_list  :  string_decl (string_decl_tail) ;    

str               : STRINGLITERAL ;    
string_decl_tail  : string_decl string_decl_tail | string_decl ;    

/* Variable Declaration */    
var_decl_list     : var_decl (var_decl_tail) ;    
var_decl          : var_type id_list ';' | empty ;    
var_type          : FLOAT | INT;    
any_type          : var_type | VOID ;     
id_list           : id id_tail ;    
id_tail           : ',' id id_tail | empty ;    
var_decl_tail     : var_decl var_decl_tail | var_decl_tail ;    

/* Function Paramater List */    
param_decl_list   : param_decl param_decl_tail ;    
param_decl        :var_type id ;    
param_decl_tail   : ',' param_decl param_decl_tail | empty ;    

/* Function Declarations */    
func_declarations : func_decl (func_decl_tail)  ;    
func_decl         : FUNCTION any_type id '('(param_decl_list)')' BEGIN func_body END | empty ;    
func_decl_tail    : func_decl func_decl_tail | func_decl ;    
func_body         : decl stmt_list ;    

/* Statement List */    
stmt_list         : stmt stmt_tail | empty ;    
stmt_tail         : stmt stmt_tail | empty ;    
stmt              : base_stmt | if_stmt | repeat_stmt ;    
base_stmt         : assign_stmt | read_stmt | write_stmt | return_stmt ;    

/* Basic Statements */    
assign_stmt       : assign_expr ';' ;    
assign_expr       : id ':=' expr ;    
read_stmt         : READ '(' id_list ')'';' ;    
write_stmt        : WRITE '(' id_list ')'';' ;    
return_stmt       : RETURN expr ';' ;    

/* Expressions */
expr              : factor expr_tail ;    
expr_tail         : addop factor expr_tail | empty ;    
factor            : postfix_expr factor_tail ;    
factor_tail       : mulop postfix_expr factor_tail | empty ;    
postfix_expr      : primary | call_expr ;    
call_expr         : id '(' expr_list ')' | id '(' ')' ;    
expr_list         : expr expr_list_tail ;    
expr_list_tail    : ',' expr expr_list_tail | empty ;    
primary           : '('expr')' | id | INTLITERAL | FLOATLITERAL ;    
addop             : '+' | '-' ;    
mulop             : '*' | '/' ;    

/* Complex Statements and Condition */     
if_stmt           : IF '(' cond ')' THEN (decl) stmt_list else_part ENDIF ;    
else_part         : 'ELSE' (decl) stmt_list | empty ;    
cond              : expr compop expr ;    
compop            : '<' | '>' | '=' | '!=' ;    
repeat_stmt       : REPEAT (decl) stmt_list UNTIL '(' cond ')'';' ; 
```

# eclipse - Eclipse给出JNI共享库的错误

> ID：13769132
> 
> 赞同：2
> 
> 时间：2012-12-07T18:46:31.267
> 
> 标签：eclipse

Eclipse 无法打开，我安装了 jre7 和 eclipse 的新副本，但它不起作用。首先它给出了错误消息“找不到虚拟机”，所以我在 eclipse.ini 文件中写入了 bin 的路径。但现在它给出了错误消息“无法加载 jni 共享库 C:\Program Files (x86)\Java\jre7\bin\client\jvm.dll”。

我该如何解决这个问题？我有一个 64 位操作系统。jre 和 eclipse 也是 64 位的。那么问题是什么？

# python - Python pexpect sendline 内容被缓冲？

> ID：13769134
> 
> 赞同：0
> 
> 时间：2012-12-07T18:46:33.907
> 
> 标签：python, buffering, pexpect

我在 Python 中有以下代码，使用 pexpect 模块来运行 perl 脚本，该脚本会询问一系列问题。我已经使用了很长一段时间，并且直到现在都运行良好。

## 期待蟒蛇

```
index = child.expect(['Question 1:'])
os.system('sleep 2')
print 'Question 1:' + 'answer1'
child.sendline('answer1')

index = child.expect(['Question 2:'])
os.system('sleep 2')
print 'Question 1:' + 'answer2'
child.sendline('answer2')

index = child.expect(['Question 3:'])
os.system('sleep 2')
print 'Question 1:' + 'answer2'
child.sendline('answer2') 
```

此时，我有一些代码可以检查问题 2 和问题 3 不匹配时是否会输出错误。我检查了 pexpect 日志，发送的语句正是我想要的（字节数和字符串数）。

但是，当我检查 perl 代码接受的内容时，它会得到以下信息：

问题 1：“答案 1”<-- 正确

问题 2：“答案 1”<-- 不正确

问题 3：'answer 2answer 2' <-- 由于某种原因它被合并为一个

有什么想法吗？生成我的 pexpect 对象时，我没有使用任何特殊的东西：`child=pexpect.spawn(cmd,timeout=140)`

编辑：添加了询问问题 2 和 3 的 perl 代码功能

## **子getpw**

```
 sub getpw
{   my ($name, $var, $encoding) = @_;
    my $pw = $$var;

    PWD: while(1) {
        system("/bin/stty -echo");
        getvar($name, \$pw, 1);
        print "\n";
        system("/bin/stty echo");
        return if $pw eq $$var && length($pw) == 80;
        if (length($pw) > 32) {
            print STDERR "ERROR: Password cannot exceed 32 characters, please reenter.\n";
            next PWD;
        }

        return if $pw eq $$var;

        my $pw2;
        system("/bin/stty -echo");
        getvar("Repeat password", \$pw2, 1);
        print "\n";
        system("/bin/stty echo");
        print "#1: ";
        print $pw;
        print "\n";
        print "#2: ";
        print $pw2;
        if ($pw2 ne $pw) {
            print STDERR "ERROR: Passwords do not match, please reenter.\n";
            next PWD;
        }
        last;
    }

    # Escape dangerous shell characters
    $pw =~ s/([ ;\*\|`&\$!#\(\)\[\]\{\}:'"])/\\$1/g;

    my $correctlength=80;
    my $encoded=`$AVTAR --quiet --encodepass=$pw`;

    chomp($encoded);
    if($? == 0 && length($encoded) == $correctlength) {
        $$var = $encoded;
    } else {
        print "Warning: Password could not be encoded.\n";
        $$var = $pw;
    }
} 
```

## 子getvar

```
sub getvar
{   my ($name, $var, $hide) = @_;
    my $default = $$var;
    while(1) {
        if($default) {
            $default = "*****" if $hide;
            print "$name [$default]: ";
        } else {
            print "$name: ";
        }
        my $val = <STDIN>;
        chomp $val;
        ### $val =~ s/ //g;  # do not mess with the password
        $$var = $val if $val;
        last if $$var;
        print "ERROR: You must enter a value\n";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T20:12:26.240

您的代码在 python 端没有任何问题。检查代码的 perl 端。为了演示我在下面创建了一个相互调用的 python 问题和答案脚本。当您执行`answers.py`时，它将产生如下预期的输出。此外，您不需要执行 sleep 语句 child.expect 将阻塞，直到收到预期的输出。

**问题.py**

```
answers = {}
for i in range(1, 4):
    answers[i] = raw_input('Question %s:' % i)
print 'resuls:'
print answers 
```

**答案.py**

```
import pexpect
child=pexpect.spawn('./questions.py', timeout=140)
for i in range(1, 4):
    index = child.expect('Question %s:' % i)
    child.sendline('answer%s' % i)

child.expect('resuls:')
print child.read() 
```

**输出**

```
{1: 'answer1', 2: 'answer2', 3: 'answer3'} 
```

# objective-c - Objective-c 发布数据和图像

> ID：13769140
> 
> 赞同：0
> 
> 时间：2012-12-07T18:46:54.590
> 
> 标签：objective-c, post, asihttprequest, afnetworking

我是objective-c的新手，我一直在寻找一种向我的服务器发送发布请求的方法（基于Rest URL），但也包含一张图片......我找到了很多发布数据的方法......以及仅发布图像的方法，但没有将两者结合在一起的方法...

我正在寻找一个包装器、类或库，因为从头开始编写所有这些似乎是一项乏味的任务。我找到了“ASIHTTPRequest”，但这不再受支持，虽然 Ic 关闭了 ARC，但我更愿意找到仍然支持的东西......

我还发现了 AFNetworking，它似乎仍然受支持，但我可能错了，我只是找不到将非常简单的数据和个人资料图像结合起来的解决方案......

任何帮助表示赞赏？

我应该只使用 ASIHTTPRequest 库吗...？？或者有人有任何 AFNetworking 库的示例代码吗？

这是我用于 AFnetworking 库的代码...

```
NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                        _emailAddressField.text, @"email",
                        _usernameField.text, @"username",
                        _passwordField.text, @"password",
                        nil];

AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:%"http://url.com/api/whatever/"];

[client postPath:@"/" parameters:params success:^(AFHTTPRequestOperation *operation, id responseObject)
{

    NSString *text = [[NSString alloc] initWithData:responseObject encoding:NSUTF8StringEncoding];
    NSLog(@"Response: %@", text);

} failure:^(AFHTTPRequestOperation *operation, NSError *error)
{

    NSLog(@"%@", [error localizedDescription]);

}]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:14:02.053

如果你使用 AFNetworking，你可以使用`multipartFormRequestWithMethod`上传图片：

```
// Create the http client
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseUrl:url];
// Set parameters
NSDictionary *parameters = [NSDictionary dictionaryWithObjectsAndKeys: @"param1", @"key1", nil];
// Create the request with the image data and file name, mime type, etc.
NSMutableURLRequest *request = [httpClient multipartFormRequestWithMethod:method path:@"url/to/" parameters:parameters constructingBodyWithBlock:^(id<AFMultipartFormData> formData) {
    [formData appendPartWithFileData:data name:nameData fileName:fileName mimeType:mimeType];
}]; 
```

然后您可以添加上传进度块以获取上传过程的反馈：

```
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
[operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
    //Manage upload percentage
}]; 
```

此外，您可以添加`setCompletionBlockWithSuccess`以捕获操作中的成功和失败。更多信息可以在[这里](http://afnetworking.github.com/AFNetworking/)找到。最后但同样重要的是，将请求添加到操作队列：

```
[httpClient enqueueHTTPRequestOperation:operation]; 
```

# linux - 我可以在已编译的二进制文件中更改“rpath”吗？

> ID：13769141
> 
> 赞同：116
> 
> 时间：2012-12-07T18:46:56.907
> 
> 标签：linux, linker, elf

我有一个为废料堆安排的旧可执行文件，但它还没有。它依赖于一些已从我的环境中删除的库，但我有一些存根库可以正常工作。我想将此可执行文件指向这些存根库。是的，我可以设置 LD_LIBRARY_PATH，但是这个可执行文件是从许多脚本和许多用户中调用的，我很想在一个地方修复它。

我没有这方面的来源，而且很难得到它。我在想 - 我可以编辑这个文件，使用一个 ELF 感知编辑器，并添加一个简单的 PATH 到 rpath 让它命中新的库吗？这是可能的吗，或者一旦你创建了一个 ELF 二进制文件，你将东西固定到位置并且它们不能移动？

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2013-12-02T16:52:38.563

有一个比`chrpath`所谓的更通用的工具[`patchelf`](http://nixos.org/patchelf.html)。它最初是为为 Nix 和 NixOS（打包系统和 GNU/Linux 发行版）制作包而创建的。

如果二进制文件（这里称为 rdsamp）中没有 rpath，则`chrpath`失败：

```
chrpath -r '$ORIGIN/../lib64' rdsamp 
rdsamp: no rpath or runpath tag found. 
```

另一方面，

```
patchelf --set-rpath '$ORIGIN/../lib64' rdsamp 
```

成功就好了。

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2012-12-07T19:05:03.430

有一个名为的工具`chrpath`可以做到这一点 - 它可能在您的发行版的软件包中可用。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2019-02-16T13:18:13.707

就像@user7610 所说，正确的方法是[`patchelf`](http://nixos.org/patchelf.html)工具。

但是，我觉得我可以给出一个更全面的答案，涵盖所有需要执行此操作的命令。

**有关该主题的综合文章，请单击[此处](https://trugman-internals.com/elf-loaders-libraries-executables/)**

首先，很多开发者都在谈论`RPATH`，但实际上他们的意思是`RUNPATH`。这是两个不同的可选动态部分，加载器处理它们的方式非常不同。您可以在我之前提到的链接中阅读有关它们之间区别的更多信息。

现在，请记住：

*   如果`RUNPATH`已设置，`RPATH`则忽略
*   `RPATH`已弃用，应避免使用
*   `RUNPATH`是首选，因为它可以被覆盖`LD_LIBRARY_PATH`

**查看当前的 R[UN]PATH**

```
readelf -d <path-to-elf> | egrep "RPATH|RUNPATH" 
```

**清除 R[UN]PATH**

```
patchelf --remove-rpath <path-to-elf> 
```

笔记：

*   删除两者`RPATH`和`RUNPATH`

**将值添加到 R[UN]PATH**

```
patchelf [--force-rpath] --set-rpath "<desired-rpath>" <path-to-elf> 
```

笔记：

*   `<desired-path>`是一个冒号分隔的目录列表，例如：`/my/libs:/my/other/libs`
*   如果指定`--force-rpath`，则设置`RPATH`，否则设置`RUNPATH`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-28T10:49:22.763

这对我有用，用 $ORIGIN 替换 XORIGIN。

`chrpath -r '\$\ORIGIN/../lib64' httpd`

# vim - 在 vimscript 中标记特定的缓冲区行

> ID：13769142
> 
> 赞同：0
> 
> 时间：2012-12-07T18:46:58.530
> 
> 标签：vim

我需要我的插件在活动缓冲区中直观地标记某些行（标记行的标准在这里无关紧要）。

有没有办法在 vimscript 中做到这一点？

“视觉标记”是指更改背景颜色，或者为标记和未标记的线条设置不同颜色的边距。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:27:09.500

使用标志。有关详细信息，请参阅`:h signs`，或以此类插件为例：

[https://github.com/airblade/vim-gitgutter](https://github.com/airblade/vim-gitgutter)

# multithreading - 如何让多线程使用 100% CPU，比如 4 个线程杀死 4 个核心到 100%

> ID：13769143
> 
> 赞同：1
> 
> 时间：2012-12-07T18:46:59.543
> 
> 标签：multithreading, unix, posix, scheduling

我的问题：如何让多线程使用 100% CPU（至少 80%），比如说让 4 个线程使用 4 个核心到 100%？

整个故事：我写了一些 posix 多线程代码。当在多核（最多 16 个）集群服务器上运行它时，虽然使用更多内核会减少挂墙时间，但总计算时间（代码部分花费的时间总和 ~ 没有 ~ 任何同步）。我想这是因为某些内核没有专门用于运行我的线程。在我的笔记本电脑上运行代码时，我的猜测得到了证实。

我尝试使用 pthread_setaffinity_np 分配亲和力并设置优先级 pthread_attr_setschedpolicy(&attributes_, SCHED_FIFO); pthread_attr_setschedparam(&attributes_, &p);

这没有帮助。

# c - MinGW Compiler 进程返回进程返回 0xC00000fd

> ID：13769146
> 
> 赞同：0
> 
> 时间：2012-12-07T18:47:06.350
> 
> 标签：c, mingw

我正在尝试在 C 中实现二叉搜索树。我正在使用带有 MinGW 编译器的代码块 ide

当我尝试运行以下代码时，此运行时错误 *进程返回进程返回 0xC00000fd*

[但是当我在http://ideone.com/](http://ideone.com/)编译时， 它工作正常，没有任何错误

已解决：感谢@user1161318

```
#include <stdio.h>
#include <stdlib.h>

struct node
{
    struct node *left;
    struct node *right;
    struct node *parent;
    int value;
}*r;

void inorder(struct node *root)
{
    int sam;
    if(root)
    {
        inorder(root->left);
        sam = root->value;
        printf(" %d ->",sam);
        inorder(root->right);
    }
}

void insert(struct node *root,int x)
{
    struct node *temp = (struct node*)malloc(sizeof(struct node));
    temp->value = x;
    struct node *y=root;
    while(root)
    {
        y = root;
        if(root->value > x)
        {
            root = root->left;
        }
        else
        {
            root = root->right;
        }
    }
    temp->parent = y;
    if(!y)
    {
        r=temp;
    }
    else if(x > y->value)
    {
        y->right = temp;
    }
    else
    {
        y->left = temp;
    }

}

int main()
{
    int i;
    for(i=0; i<10; i++)
    {
        insert(r,i);
    }
    inorder(r);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:02:34.660

全局变量`struct node *r`未在 中初始化`main()`。

# java - 如何在多个方法之间共享一个变量？

> ID：13769155
> 
> 赞同：1
> 
> 时间：2012-12-07T18:48:01.670
> 
> 标签：java, android

保存实例后，我需要共享“int audio”到 check() 方法来执行几个操作。我有一个“信息”选项：当我点击我看到信息对话框并且我想听音频（当我点击“取消”时停止它）。但是当我旋转模拟器时，我有另一个音频明星。

```
int audio;
static int Info;

@Override
public void onCreate(Bundle savedInstanceState){ 
super.onCreate(savedInstanceState);
if (savedInstanceState != null) {
int Info = savedInstanceState.getInt("dialoginfo");
int audio = savedInstanceState.getInt("audio");
}

if(Info != 0)
  {
      Info();
}

private void Info(){
    Info = 1;
    sobCheck();
    LayoutInflater li = LayoutInflater.from(this);
    View view = li.inflate(R.layout.info, null);
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setView(view).create();
    TextView text=(TextView) findViewById(R.id.infoView1);
    builder.setCancelable(false); 
    builder.setPositiveButton("Chiudi", new DialogInterface.OnClickListener() {  
           public void onClick(DialogInterface dialog, int id) {  
               Info = 0;
               mp.stop();
               mp.reset();
               mp.release();
                mp = null;
                audio = 0;                  
               dialog.cancel();
        }  
        });  
    builder.show();
        }

private void sobCheck(){
if (audio == 0){
mp = MediaPlayer.create(this, R.raw.sob);
mp.start();
audio = 1;
}

protected void onSaveInstanceState(Bundle outState) {
super.onSaveInstanceState(outState);
outState.putInt("audio", a); 
```

旋转屏幕后，“音频”始终为“0”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T21:54:08.190

问题是您已经创建了本地范围的变量，这些变量在此处隐藏了您的应用程序级变量：

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (savedInstanceState != null) {
        int Info = savedInstanceState.getInt("dialoginfo");
        int audio = savedInstanceState.getInt("audio");
    }

    if (Info != 0) {
        Info();
    }
} 
```

这声明并初始化了两个**新**变量*Info*和*audio*，它们的范围为您的 if 检查并在之后立即丢弃。它们实际上不会更改您在 onCreate 方法之外声明的应用程序级变量。尝试将其更改为：

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (savedInstanceState != null) {
        Info = savedInstanceState.getInt("dialoginfo");
        audio = savedInstanceState.getInt("audio");
    }

    if (Info != 0) {
        Info();
    }
} 
```

这可以防止*Info*和*audio*在您的本地范围内重新声明，而是应该导致您已经声明的变量被初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:49:22.107

您必须在 onCreate() 范围之外声明它：

```
int audio;

@Override
public void onCreate(Bundle savedInstanceState){ 
    super.onCreate(savedInstanceState);
    if (savedInstanceState != null) {
        audio = savedInstanceState.getInt("audio");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T19:10:28.243

您在方法中重新初始化“音频”。只需在分配音频值之前取出“int”。

# java - 如何在 Java 中通过 HTTPS 发布 xml？

> ID：13769159
> 
> 赞同：0
> 
> 时间：2012-12-07T18:48:11.623
> 
> 标签：java, xml, web-services

```
<env:Envelope  xmlns:env="http://schemas.xmlsoap.org/soap/envelope/"^M
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"^M
  xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/"^M
  xmlns:xsd="http://www.w3.org/2001/XMLSchema"^M
  xmlns:wsse="http://schemas.xmlsoap.org/ws/2002/07/secext">^M
 <env:Header>^M
         <wsse:Security>^M
                 <wsse:UsernameToken>^M
                         <wsse:Username>user</wsse:Username>^M
                         <wsse:Password>pass</wsse:Password>^M
                 </wsse:UsernameToken>^M
         </wsse:Security> ^M
 </env:Header> 
```

我被告知将此 xml 发布到：[https](https://www.abc.com) ://www.abc.com 我还得到了以下方法：

```
public int sendPostRequest(String url, String content, String contentType)
            throws Exception {
        PostMethod post = new PostMethod(url);
        post.setRequestEntity(new StringRequestEntity(content, contentType,
                null));
        boolean success = false;
        String responseBody = null;
        int statusCode;

        try {
            getHttpClient().executeMethod(post);
            success = true;
            statusCode = post.getStatusCode();
            responseBody = post.getResponseBodyAsString();
        } catch (Exception ex) {
            log.error("Marhsalling exception : " + ex.getMessage());
            throw new InvalidRequestException("Marhsalling exception :"
                    + ex.getMessage());
        } finally {
            post.releaseConnection();
        }   

        if ((statusCode != HttpStatus.SC_OK) &&
                (statusCode != HttpStatus.SC_NO_CONTENT)) {
            String error = "Got Bad Http Status - <" + statusCode
                    + "> Info : " + responseBody;
            log.error(error);
            throw new InvalidRequestException(error);
        } else {
            log.debug("Success - " + responseBody);
        }
        return statusCode;
    }

private String footer = "</env:Envelope>";
    private String message = "<InstallService><NewAccount></NewAccount></InstallService>";
    private String payload = header + message + footer; 
```

我被告知的标题是我发布的 XML。我不确定内容类型，有人建议它可能是 XML。项目类型应该是使用 Tomcat 服务器的动态 Web 项目。我还被告知要获取 org.apache.commons.httpclient 库。

我一直试图把这些碎片拼凑起来，但我失败了。我收到错误：getHttpClient()，说该方法无法解析。日志相同，无法解决 InvalidRequestException。看来我必须将我的类扩展到另一个包含这三种方法的类。可能是哪个班？我可能会丢失哪些罐子？调用上述方法并传递所需参数的简单 main 方法会起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:17:12.250

```
/*
     * soapXMLtoEndpoint sends the soapXMLFileLocation to the endpointURL
     */
    public void soapXMLtoEndpoint(String endpointURL, String soapXMLFileLocation) throws SOAPException {
        SOAPConnection connection = SOAPConnectionFactory.newInstance().createConnection();
        SOAPMessage response = connection.call(xmlStringToSOAPMessage(soapXMLFileLocation), endpointURL);
        connection.close();
        SOAPBody responseBody = response.getSOAPBody();
        SOAPBodyElement responseElement = (SOAPBodyElement) responseBody.getChildElements().next();
        SOAPElement returnElement = (SOAPElement) responseElement.getChildElements().next();
        if (responseBody.getFault() != null) {
            System.out.println("fault != null");
            System.out.println(returnElement.getValue() + " " + responseBody.getFault().getFaultString());
        } else {
            serverResponse = returnElement.getValue();
            System.out.println(serverResponse);
            System.out.println("\nfault == null, got the response properly.\n");
        }
    } 
```

在这种情况下使用文件，但它可以是一个简单的字符串。您必须从该字符串中创建一个肥皂消息。

# php - 从 MySQL 数据库转储到 JSON 文件的好处？

> ID：13769162
> 
> 赞同：2
> 
> 时间：2012-12-07T18:48:21.233
> 
> 标签：php, mysql, json, dump

我只想问直接从 MYSQL 数据库或从 MYSQL 数据库转储 JSON 获取报告是否会有所不同。

我是 JSON 新手，到处寻找教程和示例，因此非常感谢您的建议。

我的场景是从 MYSQL 数据库获取数据，然后将此信息转储到外部 JSON 文件，然后使用 PHP 处理它。

问题是

1.  根据用户请求将数据转储到我的 JSON 文件时，我是否需要应用过滤器？如果是这样，如果他们使用不同的过滤器，我将如何为多个用户执行此操作？

2.  将整个数据库从后端转储到 JSON 是否可取？如果是这种情况，如果我有一个 100MB 的 JSON 文件怎么办。（我已经从一个为期 3 天的数据库中获得了 35MB 的数据，我需要至少处理一整个月）。

3.  如果从 JSON 文件转储到数组中，如何在不遍历整个数组的情况下对其应用过滤器，然后使用 IF STATEMENT 检查值？

我总是可以直接使用 PHP 从 MYSQL 数据库中获取数据。但就像我说的那样，如果这可以用 JSON 来完成，并且会产生一个性能更好的网站，我宁愿去做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T18:52:43.610

请不要这样做。

没有理由对每个请求都这样做。这将导致更差的性能。

PHP 以标准语言提供所有工具以安全地与 MySQL 数据库[交互。](http://php.net/manual/en/ref.pdo-mysql.php)

> 根据用户请求将数据转储到我的 JSON 文件时，我是否需要应用过滤器？如果是这样，如果他们使用不同的过滤器，我将如何为多个用户执行此操作？

如果您出于某种原因需要这样做（不要这样做），那么是的也可以最小化您从 mysql 获得的数据并且必须写入操作系统

> 将整个数据库从后端转储到 JSON 是否可取？如果是这种情况，如果我有一个 100MB 的 JSON 文件怎么办。（我已经从一个为期 3 天的数据库中获得了 35MB 的数据，我需要至少处理一整个月）。

不，不建议将任何数据转储到 JSON 文件以进行实时请求。对于 MYSQL 备份，最好将 mysql 数据备份到文件中，通常是 .sql 文件

> 如果从 JSON 文件转储到数组中，如何在不遍历整个数组的情况下对其应用过滤器，然后使用 IF STATEMENT 检查值？

这说明了对 mysql 教程的需求。Mysql 将数据存储在您的文件系统上。这是一个高度优化的、经过实战考验的系统，用于过滤结果。除非您有充分的理由不这样做，否则在 mysql 中进行所有过滤

# c# - 如何使用 PrincipalSearcher 查找未设置属性的 UserPrincipal？

> ID：13769168
> 
> 赞同：10
> 
> 时间：2012-12-07T18:48:39.003
> 
> 标签：c#, .net, active-directory, adam, account-management

我正在尝试在未设置属性的 AD LDS (ADAM) 实例中搜索用户，例如未将“公司”属性设置为 ADAM 存储（或 AD）中的值的位置。

当我将 a`PrincipalSearcher`和 custom`UserPrincipal`与自定义`AdvancedSearchFilters`对象一起使用时，出现错误：

> ```
> An unhandled exception of type 'System.ArgumentException' occurred in System.DirectoryServices.dll
> 
> Additional information: The (&(objectClass=user)(!(company=))) search filter is invalid. 
> ```

这是我的示例代码：

```
using System;
using System.DirectoryServices.AccountManagement;
using System.Security.Permissions;
using System.Linq;

namespace AdamDump
{
    class Program
    {
        static void Main(string[] args)
        {
            PrincipalContext context = new PrincipalContext(ContextType.ApplicationDirectory, "MyAdamInstance:50000", "OU=Adam Users,dc=apps01,dc=mydomain", "queryaccount", "password");        

            // initialize a Query By Example
            using (MyUserPrincipal myUserPrincipal = new MyUserPrincipal(context))
            {
                myUserPrincipal.MyAdvancedFilters.WhereCompanyNotSet();

                PrincipalSearchResult<Principal> principals = null;

                // do the search...
                using (PrincipalSearcher principalSearcher = new PrincipalSearcher(myUserPrincipal))
                {
                    principals = principalSearcher.FindAll();
                }

                var myUsers = principals.Select(principal => principal as MyUserPrincipal).ToList();

                foreach (var user in myUsers)
                    Console.WriteLine("Name: {0}, Account{1}", user.DisplayName, user.SamAccountName);

                Console.WriteLine("Total found: {0}", myUsers.Count);
            }                 
        }
    }

    [DirectoryObjectClass("user")]
    [DirectoryRdnPrefix("CN")]
    [EnvironmentPermissionAttribute(SecurityAction.LinkDemand, Unrestricted = true)]
    public class MyUserPrincipal : UserPrincipal
    {
        private MyAdvancedFilters _myAdvancedFilters;

        /// <summary>
        /// Initializes a new instance of the <see cref="MyUserPrincipal"/> class.
        /// </summary>
        /// <param name="context">A <see cref="PrincipalContext"/> to associate this instance with.</param>
        [EnvironmentPermissionAttribute(SecurityAction.LinkDemand, Unrestricted=true)]
        public MyUserPrincipal(PrincipalContext context)
            : base(context) { }

        public MyAdvancedFilters MyAdvancedFilters
        {
            get
            {
                return this.AdvancedSearchFilter as MyAdvancedFilters;
            }
        }

        public override AdvancedFilters AdvancedSearchFilter
        {
            get
            {
                if (_myAdvancedFilters == null)
                {
                    _myAdvancedFilters = new MyAdvancedFilters(this);                    
                }

                return _myAdvancedFilters;
            }
        }
    }

    public class MyAdvancedFilters : AdvancedFilters
    {
        /// <summary>
        /// Initializes a new instance of the <see cref="MyAdvancedFilters"/> class.
        /// </summary>
        /// <param name="principal">The source <see cref="Principal"/></param>
        public MyAdvancedFilters(Principal principal) : base(principal) { }

        public void WhereCompanyNotSet()
        {
            this.AdvancedFilterSet("company", "", typeof(string), MatchType.NotEquals);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T14:42:16.880

将我的 AdvanceFilters 类修改为以下内容可以获得我需要的结果。

```
public class MyAdvancedFilters : AdvancedFilters
{
    /// <summary>
    /// Initializes a new instance of the <see cref="MyAdvancedFilters"/> class.
    /// </summary>
    /// <param name="principal">The source <see cref="Principal"/></param>
    public MyAdvancedFilters(Principal principal) : base(principal) { }

    public void WhereCompanyNotSet()
    {
        this.AdvancedFilterSet("company", "*", typeof(string), MatchType.NotEquals);
    }
} 
```

它是 AdvancedFilterSet 中值部分的**“*”**。

感谢 Sean 引导正确的路径以提出适合 AccountManagement 对象的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T18:53:37.033

尝试使用它作为您的查询：

```
(&(objectClass=user)(!(company=*))) 
```

文档： http: [//msdn.microsoft.com/en-gb/library/windows/desktop/aa746475](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa746475(v=vs.85).aspx) (v=vs.85).aspx大约在页面的一半处显示“获取所有没有电子邮件属性的条目：”

# c - 检查我的记忆中的特定字符 - 做不到

> ID：13769171
> 
> 赞同：0
> 
> 时间：2012-12-07T18:49:04.293
> 
> 标签：c, file-io

我为文件分配了内存，以便能够从输入文件中读取。

```
((mem = (unsigned char *) malloc (filesize)) == NULL) 
```

我从内存中读取它（技术上的文件）。此循环将读取内存内容并将每个字符写入另一个输出文件，直到达到预设限制，然后它将继续写入下一行（每行默认 40 个）。我让它正确读写，以及每行换行 40 行但是，输入文件有多个不同长度的行，并且写入新文件包括“\n”（新行），因此产生多个行长度但不超过 40。我需要检查何时有“\n”并跳过它。

这是我的问题，我不确定如何检查我是否点击了“\n”。

这是我悲伤的尝试（循环的一部分）：

```
fread(mem, 1,filesize, inf);
for(i=0; i < filesize; i++)
{
*temp = mem[i];
    if (!strcmp(temp,"\n"));
        {
            i++;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:15:17.010

`mem`是一个动态的字符数组，所以只需检查有问题的字符：

```
for(i=0; i < filesize; i++)
{
    if (mem[i] != '\n')
    {
         //   do stuff
    }
    //else it's a newline, don't do anything and we'll skip it when i increments next
} 
```

你有没有注意到你有一个`;`after 你的`if`声明？

# icons - 如何在 Photoshop 上制作这些横幅图标？

> ID：13769177
> 
> 赞同：1
> 
> 时间：2012-12-07T18:49:25.010
> 
> 标签：icons, photoshop, banner

![在此处输入图像描述](../Images/08c33d8e007bbecfb6c1ed64449b11b1.png)

我需要如何制作这些横幅？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:33:37.033

虽然您可以在 Photoshop 中制作这些横幅，但它们似乎是矢量图像。adobe Illustrator 可能是您正在寻找的程序。当您创建矢量图像时，它可以随时调整大小而不会损坏像素，因为它是矢量。如果你愿意，我很乐意制作一个关于如何在 adobe illustrator 中制作类似横幅的简短教程，并将它们上传到我的个人 YouTube 频道。现在包含类似教程的有用景点是[http://vector.tutsplus.com/](http://vector.tutsplus.com/) -Jacob

# ruby-on-rails - 无法在 Fedora16 中 gem 安装 nokogiri

> ID：13769183
> 
> 赞同：1
> 
> 时间：2012-12-07T18:49:56.257
> 
> 标签：ruby-on-rails, ruby, nokogiri, fedora

我在 Fedora 16 中运行 Ruby 1.9.3p194 和 Rails 3.2.9。当 I 时`gem install nokogiri`，它失败并显示错误消息：

```
 ERROR:  Error installing nokogiri:
    ERROR: Failed to build gem native extension.

        /home/chelseaw/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
checking for libxml/parser.h... yes
checking for libxslt/xslt.h... yes
checking for libexslt/exslt.h... yes
checking for iconv_open() in iconv.h... no
checking for iconv_open() in -liconv... no
checking for iconv_open() in -liconv... no
checking for libiconv_open() in iconv.h... no
checking for libiconv_open() in -liconv... no
checking for libiconv_open() in -liconv... no
-----
libiconv is missing.  please visit http://nokogiri.org/tutorials/installing_nokogiri.html for help with installing dependencies.
-----
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options. 
```

我已经用谷歌搜索了很长一段时间，但只找到了一些适用于 MacOS 的解决方案。我不知道该怎么办，请帮忙。

**编辑 1** 结果`yum search iconv`：

```
mingw32-iconv-debuginfo.noarch : Debug information for package mingw32-iconv
mingw32-iconv-static.noarch : Static version of the MinGW Windows Iconv library
mingw32-win-iconv.noarch : MinGW Windows Iconv library
mingw32-win-iconv-debuginfo.noarch : Debug information for package
                                   : mingw-win-iconv
mingw32-win-iconv-static.noarch : Static version of the MinGW Windows Iconv
                                : library
perl-Text-Iconv.i686 : Perl interface to iconv() codeset conversion function
perl-Text-Iconv-debuginfo.i686 : Debug information for package perl-Text-Iconv
psiconv-debuginfo.i686 : Debug information for package psiconv
psiconv-devel.i686 : Development files for psiconv
uniconvertor-debuginfo.i686 : Debug information for package uniconvertor
mingw32-iconv.noarch : GNU libraries and utilities for character set conversion
perl-HTML-WikiConverter.noarch : Perl module to convert HTML to wiki markup
perl-HTML-WikiConverter-Markdown.noarch : Convert HTML to Markdown markup
psiconv.i686 : A conversion utility for Psion files
uniconvertor.i686 : Universal vector graphics translator 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T22:17:22.033

终于搞定了，步骤如下：

*   下载 libiconv

    `wget http://ftp.gnu.org/pub/gnu/libiconv/libiconv-1.11.tar.gz`

*   提取文件`tar -xvzf libiconv-1.11.tar.gz`

*   进入目录`cd libiconv-1.11`

*   配置 libiconv 库`./configure --prefix=/usr/local/libiconv`

*   编译 libiconv `make CFLAGS="-O2 -fno-tree-dce -fno-optimize-sibling-calls"`（我必须添加 CFLAGS 才能使编译工作。）

*   安装 libiconv`sudo make install`

*   安装 nokogiri `CFLAGS="-O2 -fno-tree-dce -fno-optimize-sibling-calls" gem install nokogiri -- --with-iconv-dir=/usr/local/libiconv --with-iconv-lib=/usr/local/libiconv/lib --with-iconv-include=/usr/local/libiconv/include`

瞧，它显示了成功消息！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T18:58:54.727

不需要自己编译，试试运行这个命令：

`sudo yum install -y gcc ruby-devel libxml2 libxml2-devel libxslt libxslt-devel`

或者：

`rvm get head && rvm requirements run force`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T19:10:09.023

尝试：

```
yum install -y iconv-devel 
```

进而：

```
gem install nokogiri 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-07T19:02:45.277

错误信息指示`libiconv is missing`。你安装了吗？您可能需要安装`libiconv`和`libiconv-devel`打包。

# haskell - JSON 编码包含 MVar 的记录

> ID：13769192
> 
> 赞同：0
> 
> 时间：2012-12-07T18:50:41.280
> 
> 标签：haskell

假设我有一个记录，其中一个值为 MVar：

```
data SomeRecord = SomeRecord { frobs :: MVar Integer } 
```

我希望能够使用 Aeson 从 JSON 编码/解码它。编码时，MVar 将被解包并编码原始值，而解码时会发生相反的情况。

能够编写一个返回 an`IO (Maybe SomeRecord)`的 FromJSON 实例和一个返回 an 的 ToJSON 实例会很好`IO ByteString`，但是由于 Parser monad 不是 MonadIO 的实例，我认为这是不可能的。

到目前为止，我已经求助于编写函数来在 MVar-encumbered 记录和几乎相同的没有 MVar 类型的记录之间进行转换，然后对其进行编码/解码。

首先，我试图找到某种方法将 MVar 排除在我的记录之外。这似乎是理想的。但是假设由于某种原因我不能这样做，是否有更简单的方法来处理 JSON 编码/解码？

**编辑：**

我想知道我是否问错了问题。也许我的整个方法是不正确的。我要做的是允许一堆连接的客户端（每个客户端在不同的线程上）添加/编辑/删除对象列表。以下是这些类型的样子：

```
-- the data type for each "room"
data Instance = Instance 
    { iName    :: T.Text
    , iObjects :: M.HashMap T.Text (MVar Store)
    ...
    }

-- the data type for a particular object in the room that can be changed
data Store = Store
    { sObject :: A.Value
    ...
    } 
```

每个“房间”都有一个`Instance`保存房间对象的对象。Instance 本身在一个 MVar 中以同步`iObjects`hashmap 的添加/删除，并且每个单独的存储都在一个 MVar 中，以便在更新单个对象时整个数据结构不必阻塞。

因此更新操作如下进行：

*   实例上的 readMVar 以获取 iObjects 哈希
*   M.查找特定商店
*   在 store 上 modifyMVar 进行更新

有没有比使用这样的嵌套 MVar 更惯用的 Haskell 方法？理想情况下，某种使 MVar 远离数据的方法，因此持久化整个结构会很简单。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T19:08:23.570

不，您有一个隐藏在纯数据结构中的并发原语。处理起来总是有点尴尬。您正在将副作用走私到任何试图触及您的 MVar 的东西中。

尝试通过 Integer 的容器参数化数据类型。例如

```
data T a = T { frobs :: c Integer } 
```

然后你可以对它进行实例化`T MVar`，对于流式传输，解包，然后将其作为`T One`, where进行操作`data One a = One a`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:06:45.503

FromJSON 和 ToJSON 类型类实际上只是为了在编写解析/打印代码时提供便利。如果我们没有它们，我们仍然可以编写解析器和打印机，它们只是需要更多样板。正如您所发现的，这些类型类的制定方式并不适用于不纯的值。所以基本上，你被另一种方法和随之而来的额外样板所困。

有几个选项可以让它变得更好。您可以复制 FromJSON 和 ToJSON 并修改它们以支持使用 monadic IO 的解析器和打印机。如果你经常使用这种模式，那可能是值得的。或者，您可以使用 unsafePerformIO，尽管这似乎是一个*非常*糟糕的主意……甚至可能不值得一提，因为如果您不确切知道自己在做什么，它很容易导致大问题。

当然，就像您提到的那样，您可以尝试使您的结构纯净。这对我来说似乎是最好的方法。您可以拥有另一个具有 MVar 的结构，然后是一个从不纯结构填充纯结构的函数。以这种方式，纯结构充当更容易 JSON 解析/打印可变结构的路径。

# java - JRadio 按钮选择问题

> ID：13769193
> 
> 赞同：1
> 
> 时间：2012-12-07T18:50:44.603
> 
> 标签：java, swing, jradiobutton, buttongroup

我不知道这是我遇到的愚蠢问题还是什么，但对于我的生活，我无法找出解决方案。我正在编写一个包含 20 个问题的测验程序。该程序询问每个问题，用户有 5 个选项，即 5 个 JRadio 按钮，一旦用户选择一个答案，他可以点击下一个以转到下一个问题或上一个以查看问题。我遇到的问题是，一旦用户回答问题并点击下一个选择的上一个单选按钮保持选中状态，我的意思是如果问题 1 的答案 A 和点击下一个选项 A 将被选择用于问题 2 等等。5个单选按钮在一个按钮组中，我使用清除选择方法清除选择它工作正常，除非用户点击上一个按钮来查看问题，一旦他点击下一个按钮继续所有选择变得清晰，

我将在下面添加下一个和以前的实现。任何想法将不胜感激。

// 实现下一个按钮

```
 nextBT.setPreferredSize(new Dimension(70, 30));
    nextBT.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent evt) {

            int nextQuestion = -1;
            boolean answer = getAnswer(currentQuestion, selectedButton()).equals(getCorrectAnswer(currentQuestion));
            questionHistory[currentHistoryIndex][0] = currentQuestion;
            questionHistory[currentHistoryIndex][1] = selectedButton();

            if (currentHistoryIndex == maxHistoryIndex) {

                //generate next question number to use
                int currentLevel = currentQuestion / 25;
                int nextLevel = currentLevel;
                if (answer) {
                    if (currentLevel < 3) {
                        nextLevel++;
                    }
                } else {
                    if (currentLevel > 0) {
                        nextLevel--;
                    }
                }
                while (true) {
                    int k = 0;
                    Random randomNum = new Random();
                    nextQuestion = nextLevel * 25 + (int) (randomNum.nextInt(25));
                    for (k = 0; k < maxHistoryIndex; k++) {
                        if (questionHistory[k][0] == nextQuestion) {
                            break;
                        }
                    }
                    if (k == maxHistoryIndex) {
                        break;
                    }
                }
                currentHistoryIndex++;
                maxHistoryIndex++;
                if (maxHistoryIndex == 19) {
                    nextBT.setEnabled(false);

                } else {
                    nextBT.setEnabled(true);
                }

            } else {
                // returning to question already on list  
                currentHistoryIndex++;

                nextQuestion = questionHistory[currentHistoryIndex][0];
                int nextAnswer = questionHistory[currentHistoryIndex][1];
                setSelectedButton(nextAnswer);
            }

            if (currentHistoryIndex == 19) {
                nextBT.setEnabled(false);
            }

            currentQuestion = nextQuestion;
            questionHistory[currentHistoryIndex][0] = currentQuestion;
            questionHistory[currentHistoryIndex][1] = selectedButton();

            question.setText(questions[currentQuestion * 7]);
            rb1.setText(questions[(currentQuestion * 7) + 1]);
            rb2.setText(questions[(currentQuestion * 7) + 2]);
            rb3.setText(questions[(currentQuestion * 7) + 3]);
            rb4.setText(questions[(currentQuestion * 7) + 4]);
            rb5.setText(questions[(currentQuestion * 7) + 5]);

            previousBT.setEnabled(true);

            //setSelectedButton(questionHistory[currentHistoryIndex][1]);
            questionCountLB.setText("Question " + (currentHistoryIndex + 1) + " of 20");

            //if(bg.isSelected()){

            bg.clearSelection();
        }

    }); 
```

// 实现上一个按钮

```
 previousBT.setPreferredSize(new Dimension(120, 30));
    previousBT.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent evt) {

            nextBT.setEnabled(true);
            questionHistory[currentHistoryIndex][1] = selectedButton();

            currentHistoryIndex--;
            if (currentHistoryIndex == 0) {
                previousBT.setEnabled(false);
            }
            if (currentHistoryIndex > 0) {
                previousBT.setEnabled(true);
            }
            int nextQuestion = questionHistory[currentHistoryIndex][0];
            currentQuestion = nextQuestion;
            question.setText(questions[currentQuestion * 7]);
            rb1.setText(questions[(currentQuestion * 7) + 1]);
            rb2.setText(questions[(currentQuestion * 7) + 2]);
            rb3.setText(questions[(currentQuestion * 7) + 3]);
            rb4.setText(questions[(currentQuestion * 7) + 4]);
            rb5.setText(questions[(currentQuestion * 7) + 5]);

            setSelectedButton(questionHistory[currentHistoryIndex][1]);
            questionCountLB.setText("Question " + (currentHistoryIndex + 1) + " of 20");
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:03:37.410

如您所述，当用户点击下一步按钮时，单选按钮被清除，如果您不保存用户的选择，用户当然无法检查他以前的答案。

所以我认为你需要创建一个`HashMap`，它使用`questionIndex`作为键和`answer`值来存储用户的选择。每次用户点击下一个按钮时，只需将用户的选择放入带有问题 ID 的 hashmap 中。当用户点击上一个按钮时，只需获取上一个问题的索引并从哈希图中获取答案，并选择相应的单选按钮。

# java - 为什么我不能在eclipse的一些Java源文件（插件jar的只读源）中设置断点？

> ID：13769195
> 
> 赞同：5
> 
> 时间：2012-12-07T18:50:46.210
> 
> 标签：java, eclipse, debugging, breakpoints

我正在追踪 eclipse LTK 插件。我可以在 LTK 的一些只读 Java 源代码中设置断点。（例如 ProcessorBasedRefactoring.java）

![在此处输入图像描述](../Images/746aa3c4a1788e6e0ab89c29193abe36.png)

但是，我无法在某些源文件中设置断点。（例如 JavaRenameProcessor）。

![在此处输入图像描述](../Images/ff5ea5d541920ee0b512f05c842d6074.png)

当我尝试设置方法断点时，我得到“无法创建方法断点，方法签名不可用”。错误信息。

可能有什么问题？为什么我不能在某些（二进制）Java 源文件中设置断点？ ![在此处输入图像描述](../Images/84af449a3625cd4027e5d49c0d9224f9.png)

## 添加：

对于此问题的简单解决方法，我只是尽可能设置断点，然后打开 java 源单击一行。然后，我可以使用 command-R 以便 eclipse 执行到我指向的行。

## 添加2：

断点在那里，但eclipse没有显示它。

![在此处输入图像描述](../Images/abb600d5b9cae9eae68c27b883edfa03.png)

我注意到的另一件事是，当我重新启动调试器时，java 文件就从 IDE 中消失了。即使我在 Eclipse 中重新打开它。 ![在此处输入图像描述](../Images/178374b1d5dd3537b5b28368e9a5a2e2.png)

我收到此错误消息 - “zip 文件已关闭”。 ![在此处输入图像描述](../Images/01c58846004ad1796469cb3d2e4304e9.png)

然后只有当我追溯java源包含的方法时才能看到源代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T18:56:44.463

我相信这个类是在没有调试信息的情况下编译的和/或字节码被混淆了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-04T02:45:55.600

1.  从开源网站下载java源代码，文件格式是`XXX.zip`，不是`XXX.jar`。
2.  构建路径-->c配置构建路径，进入页面，选择库，打开一个jar文件，找到“Source attachment”，选择它，可以在右侧找到一个名为“Edit”的按钮，点击它，并在其中输入`xxx.zip`您下载的路径。
3.  回到你的调试页面，继续你的工作

祝你好运！希望我的回答能帮到你。

# c# - 删除/替换国际字符

> ID：13769202
> 
> 赞同：6
> 
> 时间：2012-12-07T18:50:56.933
> 
> 标签：c#, sql, character-encoding

我正在 C# 中创建一个小应用程序，以根据从 SQL 查询传递的信息搜索文件名。在从 SQL 查询传递的数据中，有时（由于我公司的国际访问者可能有多个实例）名称中包含国际字符。我们拥有的文件名是英文字母，没有特殊字符。

我正在尝试找到一种将国际字符转换为纯英文字母字符的方法，以便我可以完成此搜索？这可以通过数据库查询完成还是必须通过应用程序代码完成？

例如：

Hervé 需要转换为 Herve

或者

Mañana 需要转换为 Manana

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-07T19:22:51.460

```
var s1 = ToASCII("Hervé");
var s2 = ToASCII("Mañana"); 

string ToASCII(string s)
{
    return String.Join("",
         s.Normalize(NormalizationForm.FormD)
        .Where(c => char.GetUnicodeCategory(c) != UnicodeCategory.NonSpacingMark));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:57:50.560

如果您针对 MS-SQL 服务器运行，请参阅联机帮助中的 COLLATE。您可以在功能上动态更改编码。

# android - 调用函数压缩与 NDK (Android)

> ID：13769207
> 
> 赞同：1
> 
> 时间：2012-12-07T18:51:17.607
> 
> 标签：android, android-ndk, java-native-interface

我想在 NDK 部分中使用以下代码。

```
OutputStream fOut = new FileOutputStream(file);
bitmap.compress(Bitmap.CompressFormat.JPEG, 100, fOut);
fOut.flush();
fOut.close(); 
```

我开始像这样编写 NDK 函数：

```
void compress(JNIEnv* env, jobject fOut){

  jclass bitmapCompressFormat = (*env)->FindClass(env,"android/graphics/Bitmap$CompressFormat");
  jfieldID CFFieldID = (*env)->GetStaticFieldID(env,bitmapCompressFormat, "JPEG","Landroid/graphics/Bitmap$CompressFormat;");
  jobject CFObj = (*env)->GetStaticObjectField(env,bitmapCompressFormat, CFFieldID);

} 
```

但是我被卡住了，我应该使用 CallObjectMethod 吗？

PS：位图是NDK代码中的全局变量。

非常感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:39:34.860

这是最后更新的版本：

```
jobject bitmap_array[10];

void compress(JNIEnv* env, jobject *fOut){

jclass bitmapCompressFormat = (*env)->FindClass(env,"android/graphics/Bitmap$CompressFormat");
jfieldID CFFieldID = (*env)->GetStaticFieldID(env,bitmapCompressFormat, "JPEG","Landroid/graphics/Bitmap$CompressFormat;");
jobject CFObj = (*env)->GetStaticObjectField(env,bitmapCompressFormat, CFFieldID);

jmethodID compressBitmapMethodID = (*env)->GetMethodID(env,bitmap_array[0],"compress","(Landroid/graphics/Bitmap$CompressFormat;ILjava/io/OutputStream;)Z");

(*env)->CallBooleanMethod(env,bitmap_array[0], compressBitmapMethodID, CFObj, (jint)100, *fOut);

}

--------------------- SDK --------------------------
public native void compress(OutputStream fOut);
...
OutputStream fOut = new FileOutputStream(file);
compress(fOut); 
```

我在 logcat 中没有错误消息，当我调用方法“compress”时活动关闭。

感谢您的帮助。

# c# - 带有 C# 代码的 WPF，可生成导出到 Excel 并包含图像的 HTML

> ID：13769208
> 
> 赞同：0
> 
> 时间：2012-12-07T18:51:23.570
> 
> 标签：c#, html, wpf, excel

你好，这是我的问题。我目前有一个具有 Web 浏览器控件的独立 WPF 应用程序。我有一些 C# 代码，它生成一个 HTML 页面，我将其用作 Web 浏览器的内容。我的问题是我正在尝试将此 HTML 页面导出到 excel 并包含其中的图像。这就是我目前将 HTML 导出到 EXCEL 文件的方式：

```
 string filePath = System.IO.Path.GetTempPath() + Guid.NewGuid().ToString() + ".html";

  //Creates an HTML file from the web browser and save it to a temp location
  File.WriteAllText(filePath, GenerateHtml());

  //Creates a new instance of Microsoft office interop for using MS Excel
  Microsoft.Office.Interop.Excel.Application excelApp = new Microsoft.Office.Interop.Excel.Application();
  //Create a new instance of a workbook
  Microsoft.Office.Interop.Excel.Workbook excelWorkBook = excelApp.Workbooks.Add();
  //Don't Show MS Excel
  excelApp.Visible = false;
  //Open a file at location
  Microsoft.Office.Interop.Excel.Workbook excelWorkBook2 = excelApp.Workbooks.Open(filePath);
  //Convert that file to an XLSX document

  SaveFileDialog newSFD = new SaveFileDialog();
  newSFD.FileName = "Report in Excel Format";
  newSFD.DefaultExt = ".xls";
  newSFD.Filter = "XLS Documents (.xls)|*.xls";
  Nullable<bool> result = newSFD.ShowDialog();

  if (result == true)
  {
    string fileName = newSFD.FileName;
    excelWorkBook2.SaveAs(fileName, Microsoft.Office.Interop.Excel.XlFileFormat.xlXMLSpreadsheet, Missing.Value, Missing.Value, false, false, Microsoft.Office.Interop.Excel.XlSaveAsAccessMode.xlNoChange, Microsoft.Office.Interop.Excel.XlSaveConflictResolution.xlUserResolution, true, Missing.Value, Missing.Value, Missing.Value);
    //Close excel
    excelApp.Quit();
  } 
```

一切都可以导出，所有信息都在那里，但由于某种原因没有图像。图像应该在那里的桌子在那里，它有图像应该去的地方占位符，这就是为什么我很困惑。如果需要更多解释，请告诉我，我会提供，否则感谢您对此问题的帮助/关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:24:10.880

因此，经过大量挖掘/反复试验和研究，我找到了我的解决方案，并且一如既往地摆在你面前。问题只是当我将 XML 文档保存为 excel 文件时，如我以这种方式处理它的问题所示：

```
excelWorkBook2.SaveAs(fileName, Microsoft.Office.Interop.Excel.XlFileFormat.xlXMLSpreadsheet, Missing.Value, Missing.Value, false, false, Microsoft.Office.Interop.Excel.XlSaveAsAccessMode.xlNoChange, Microsoft.Office.Interop.Excel.XlSaveConflictResolution.xlUserResolution, true, Missing.Value, Missing.Value, Missing.Value); 
```

实际上，我应该像这样保存它：

```
excelWorkBook2.SaveAs(fileName, Microsoft.Office.Interop.Excel.XlFileFormat.xlWorkbookNormal, Missing.Value, Missing.Value, false, false, Microsoft.Office.Interop.Excel.XlSaveAsAccessMode.xlNoChange, Microsoft.Office.Interop.Excel.XlSaveConflictResolution.xlUserResolution, true, Missing.Value, Missing.Value, Missing.Value); 
```

两者之间的区别在于，我不需要将 XML 文档保存为 xlXMLSpreadsheet，而是需要将文件保存为 xlWorkBookNormal。进行此更改后，我可以将文件另存为 Excel 文档，并将图像连同它一起包含在内。我认为更有趣的问题的简单解决方案。

# python - numpy.equal 嵌套列表

> ID：13769211
> 
> 赞同：1
> 
> 时间：2012-12-07T18:51:35.973
> 
> 标签：python, numpy, python-imaging-library

我想在图片中搜索一个矩形。图片来自 PIL。这意味着我将得到一个二维数组，其中每个项目都是一个包含三个颜色条目的列表。

为了得到我正在使用的搜索颜色的矩形在哪里`np.equal`。这是一个缩小的例子：

```
>>> l = np.array([[1,1], [2,1], [2,2], [1,0]])
>>> np.equal(l, [2,1])  # where [2,1] is the searched color
array([[False,  True],
   [ True,  True],
   [ True, False],
   [False, False]], dtype=bool) 
```

但我已经预料到：

```
array([False, True, False, False], dtype=bool) 
```

或者

```
array([[False,  False],
   [ True,  True],
   [ False, False],
   [False, False]], dtype=bool) 
```

**如何实现嵌套列表比较`numpy`？**

注意：然后我想用`np.where`矩形的索引从`np.equal`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T18:55:15.297

您可以`all`沿第二个轴使用该方法：

```
>>> result = numpy.array([[1, 1], [2, 1], [2, 2], [1, 0]]) == [2, 1]
>>> result.all(axis=1)
array([False,  True, False, False], dtype=bool) 
```

并获得指数：

```
>>> result.all(axis=1).nonzero()
(array([1]),) 
```

我更喜欢`nonzero`这样`where`做，因为根据传递给它的参数数量，`where`会做[两件非常不同的事情。](http://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html)`where`当我需要它独特的功能时，我会使用它；当我需要 的行为时`nonzero`，我会`nonzero`明确使用。

# javascript - 如何扩展 jQuery 手风琴插件

> ID：13769215
> 
> 赞同：10
> 
> 时间：2012-12-07T18:51:42.427
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, jquery-ui-accordion

如何扩展一个 jQuery 插件？

目前我正在使用[multiopen 手风琴](http://anasnakawa.wordpress.com/2011/01/25/jquery-ui-multi-open-accordion/)插件。

我需要添加新功能，例如展开/折叠完成后，我需要回调一个函数，例如 jquery ui 手风琴插件中的更改事件。

如何在此插件中添加此功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T21:43:02.070

你不需要手风琴小部件。你可以用几行 jQuery 来做到这一点。

html:

```
<h3 class="header"> Title 1 </h3>
<div class="content"> Content 1 </div>
<h3 class="header"> Title 2 </h3>
<div class="content"> Content 2 </div> 
```

javascrpt/jQuery:

```
( function( $ ){ // closure to make sure jQuery = $
  $( function(){ // on document load
    $( ".header" ).click( function( e ){ // select headers and set onClick event handler
      // here you can maybe add a class to an opened header like this
      $( this ).toggleClass( "open" );
      $( this ).next().toggle( "slow", function(){ // toggle visibility
        // what you write here will be executed after the animation
        // "this" will refer to the hidden/revealed div element
        // if you want to call a function depending on if the 
        // panel was opened or closed try this
        if ( $( this ).is( ":visible" ) ) {
          tabOpened( e, this );
        } else {
          tabClosed( e, this );
        }
      }) 
    }).next().hide()
  })
})(jQuery) 
```

整个事情都在 jsfiddle [http://jsfiddle.net/qpqL9/](http://jsfiddle.net/qpqL9/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T14:55:56.210

您可以在选项卡上完成的动画的回调函数中轻松调用您的函数。jquery.multi-accordion-1.5.3.js 的细微变化

```
$div.slideDown('fast', function(){
    $div.addClass(options._classes.divActive);
    //function to be called after expanding the tabs. 
});

$div.slideUp('fast', function(){
    $div.removeClass(options._classes.divActive);
    //function to be called after collapsing the tabs
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T18:59:44.413

您是否尝试过 tabHidden 和 tabShown 方法？

```
 // when tab is shown, ui here hold the same as in click event above
  tabShown: function(event, ui) {}

  // when tab is hidden, ui here hold the same as in click event above
  tabHidden: function(event, ui) {} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-20T03:39:13.947

```
$.extend($.ui.multiAccordion, {    
    // private helper method that used to show tabs
    _showTab: function($this) {
        var $span = $this.children('span.ui-icon');
        var $div = $this.next();
        var options = this.options;
        $this.removeClass('ui-state-default ui-corner-all').addClass('ui-state-active ui-corner-top');
        $span.removeClass('ui-icon-triangle-1-e').addClass('ui-icon-triangle-1-s');
        // MODIIFICATION
        bindThis = this;
        var ui = {
            tab: $this,
            content: $this.next('div')
        }
        $div.slideDown('fast', function(){
            $div.addClass(options._classes.divActive);
            // MODIFICATION
            bindThis._trigger('tabShownComplete');
        });
        this._trigger('tabShown', null, ui);
    },

    // private helper method that used to show tabs 
    _hideTab: function($this) {
        var $span = $this.children('span.ui-icon');
        var $div = $this.next();
        var options = this.options;
        $this.removeClass('ui-state-active ui-corner-top').addClass('ui-state-default ui-corner-all');
        $span.removeClass('ui-icon-triangle-1-s').addClass('ui-icon-triangle-1-e');
        // MODIIFICATION
        bindThis = this;
        var ui = {
            tab: $this,
            content: $this.next('div')
        }
        $div.slideUp('fast', function(){
            $div.removeClass(options._classes.divActive);
            // MODIFICATION
            bindThis._trigger('tabHiddenComplete', null, ui);
        });
        this._trigger('tabHidden', null, ui);
    }
}); 
```

*   [https://gist.github.com/4342758](https://gist.github.com/4342758)

# matlab - 以非破坏性方式更改矩阵中的值

> ID：13769220
> 
> 赞同：2
> 
> 时间：2012-12-07T18:51:52.620
> 
> 标签：matlab, matrix

假设这`B`是一个带有整数的大矩阵，包括零和非零。我想以`my_function`B 作为参数调用该函数，但将零值设置为 1。有没有办法在不创建临时变量的情况下做到这一点，就像`A`在这种情况下一样？

```
A = B;
A(A==0) = 1;
my_function( A ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T20:34:08.870

实际上，在这种特定情况下，表达式*是*`B + ~B`可能的。

### 例子

```
>> B = fix(5 * rand(5))

B =
  4  0  3  2  3
  0  3  3  0  2
  1  4  0  0  2
  1  4  3  4  3
  3  1  1  1  1

>> B + ~B

ans =
  4  1  3  2  3
  1  3  3  1  2
  1  4  1  1  2
  1  4  3  4  3
  3  1  1  1  1 
```

你去吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T19:21:09.710

Matlab 并没有真正允许这样做。

但是您可以使用以下简单技巧：

```
idx=find(B==0);
B(idx) = 1;
my_function(B); 
B(idx) = 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T19:37:18.547

由于您似乎担心内存消耗，因此简短的回答是 - 不。Matlab 对所有内容都使用显式索引变量。其他人之前的建议：

```
idx = find(B==0) 
```

默默地为表达式分配一个`size(B)`逻辑值矩阵`B==0`。根据 matlab 版本，`logical`类型可能是 4 个字节或 1 个字节，与创建 B 的副本相比，这可以节省一些内存：

```
A = B; 
```

但是，`find`再次返回一个数组`doubles`。因此，根据实际有多少非零条目`B`，您最终可能会使用大量 RAM：您需要内存来存储`B==0`，**并且**`find` **同时**需要内存来存储 的结果。

因此，根据您的问题，仅复制变量的内存实际上可能更便宜。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T19:17:58.973

不，如果您想保留原始 B 的副本，则必须创建第二个变量。要么像你一样复制它，要么在将这些元素的索引存储在第二个变量中之后用 1 替换 0，即

```
idx    = find(B==0);
B(idx) = 1; 
```

如果`numel(idx)`比 小得多`numel(B)`，那么如果这是您所关心的，那么这将为您节省一些内存开销。

# objective-c - 带有部分的基于视图的 NSTableView

> ID：13769225
> 
> 赞同：16
> 
> 时间：2012-12-07T18:52:29.127
> 
> 标签：objective-c, macos, cocoa, interface-builder

我正在寻找一种方法来在 NSTableView 中创建类似 iOS 的部分（如在 iTunes 11 - 附加中）。

正如您在屏幕截图中看到的那样，“专辑”是一个部分，“歌曲”是第二个部分。任何帮助，将不胜感激。

谢谢！

![在此处输入图像描述](../Images/bcf6b1a0fc29c3b32e7b5a85e557b6e0.png)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-10-09T02:28:57.803

我看到这是一个老问题，但答案是使用基于视图的 NSTableView 然后实现 tableView:viewForTableColumn:row:。

这是基于我如何做的代码。它尚未在 Xcode 中编译。

```
-(NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {
    NSTableCellView *cell = nil;
        // get your row from your array of objects.
        // determine if it's a section heading or not.

    SomeClass *someObject = [self.myObjects objectAtIndex:row];

    if (someObject.isSectionHeading) {
        cell = [tableView makeViewWithIdentifier:@"HeaderCell" owner:self];
        cell.textField.objectValue = someObject.headingName;
    } else {
        cell = [tableView makeViewWithIdentifier:@"DataCell" owner:self];
        cell.textField.objectValue = someObject.rowValue;
    }

    return cell;

} 
```

而且 tableView:isGroupRow 会在你的部分标题上放置一个灰色背景

```
-(BOOL)tableView:(NSTableView *)tableView isGroupRow:(NSInteger)row {
    BOOL isGroup = NO;
    // Choose some way to set isGroup to YES or NO depending on your records.
    return isGroup;
} 
```

确保在 Interface Builder 中您已将 NSTableCellViews 的标识符设置为“HeaderCell”和“DataCell”。或者使用任何你想要的名字。只要它与您的代码匹配。您可以拥有任意数量的这些单元格。

如果您创建 NSTableCellView 的子类，那么您可以轻松地将自己的文本字段、复选框、图像等添加到视图并相应地设置它们的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T18:55:18.157

如果你想要部分，你基本上必须自己滚动（认识到行 x 应该是一个部分单元格并提供一个部分视图[。TwUI](https://github.com/github/twui)有 TUITableView 可以实现这一点（根据我的经验，并*大大*提高了滚动性能）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-07T19:58:16.297

有一个非常好的和简单的教程展示了如何`NSTableView`在 github 上使用示例代码来实现 with 部分。只需在[此处](https://www.youtube.com/watch?v=mjTwLa9mZEo)观看，在视频说明中就有下载代码的链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-20T08:44:14.903

我相信这些天来处理这个问题的正确方法是实现表视图委托方法`tableView(rowViewForRow:)`。如果您检测到指定的行不是标题，则只需返回 nil。否则，该过程类似于为特定表的行和列创建视图。例如，如果您将所有行数据存储在`Any`调用的单个数组中`tableRows`，并通过使用该数组中的不同类来确定标题和普通行之间的区别，它可能看起来像这样：

```
override func viewDidLoad() {
    super.viewDidLoad()
    let headerNib = NSNib(nibNamed: "HeaderRow", bundle: nil)
    tableView.register(headerNib, forIdentifier: NSUserInterfaceItemIdentifier(rawValue: "SectionHeader"))
}

func tableView(_ tableView: NSTableView, rowViewForRow row: Int) -> NSTableRowView? {
    guard let headerData = tableRows[row] as? SectionHeader else { return nil }
    let header = tableView.makeView(withIdentifier: NSUserInterfaceItemIdentifier(rawValue: "SectionHeader"), owner: nil) as? HeaderRow
    header?.titleLabel.stringValue = headerData.title
    return header
} 
```

*请注意，这只适用于您的表是基于视图的！*

# spring-mvc - OSGI - 无法访问服务包中加载的应用程序资源

> ID：13769228
> 
> 赞同：2
> 
> 时间：2012-12-07T18:52:51.590
> 
> 标签：spring-mvc, osgi, spring-dm

我正在使用带有 Spring MVC 的 OSGI，详细信息如下

Bundle b1-将消息源声明为 bean。消息资源在 bundleb1 中的服务中完全自动装配成功。xml 中消息源的条目是

```
<bean id="messageSource" class="org.synyx.messagesource.InitializableMessageSource">
<property name="basename" value="ApplicationResources"/>
<property name="messageProvider">
    <bean class="org.synyx.messagesource.jdbc.JdbcMessageProvider">
        <property name="dataSource" ref="dataSource"/>            
    </bean>
</property>
</bean> 
```

消息源在 bundle b1 的 osgi-context.xml 中作为服务公开，如下所示

```
 <osgi:service interface="org.springframework.context.MessageSource" ref="messageSource"/> 
```

要导入 WAB 包中的消息资源，请在 WAB 的 osgi-context.xml 中创建以下条目 已创建以下条目以导入 bundle b1 公开的 messageSource 服务。

注意 - 我没有在 WAB 中创建 messageSource bean（未在 *-servlet.xml 中定义 messageSource），因为我希望从 Bundle B1 导入 messageSource 并由 spring 用于语言解析。

问题是 - 当我点击放置在 WAB 中的示例 Jsp 时，我收到错误

```
javax.servlet.ServletException: javax.servlet.jsp.JspTagException: No message found under code 'user.nametext' for locale 'en_US'. 
```

分析-进一步调试spring代码我发现webapplication上下文中使用的messagesource是DelegatingMessageSource类型。但是从 bundle b1 导入的 messageSource 暴露了 InitializableMessageSource 类型的对象。这意味着 webapplication 上下文没有使用通过 WAB 的 osgi-context.xml 导入的 messageSource 初始化。

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:04:19.067

在您的消费者捆绑包中，将以下内容添加到您的 sping 配置中：

```
<osgi:reference id="messageSource" interface="org.springframework.context.MessageSource" /> 
```

然后，您可以像使用本地 bean 一样注入 messageSource-bean。

# jquery - jQuery - 保留原始 html 内容并检索它，即使被覆盖

> ID：13769229
> 
> 赞同：0
> 
> 时间：2012-12-07T18:52:52.397
> 
> 标签：jquery, html, overwrite

我在`numbers`div 中有一些内容。当我点击`numbers-clicker`时，numbers 的内容`123456789`被保存到 oldNumbers 变量中，内容变为`987654321`，并且类在div`opened`上切换。`numbers`当我再次单击`numbers-clicker`时，我正在尝试恢复原始的 oldNumbers，因此`123456789`到`numbers`div，相反，oldNumbers 被覆盖`987654321`。我们如何确保 oldNumbers 保持作为`numbers`div 的开始内容，`123456789`？

```
<div id="numbers-clicker">Clicker</div>
<div id="numbers">123456789</div>

$('#numbers-clicker').off('click').on('click',function(){
    $this = $(this);
    var oldNumbers = $('#numbers').html();

    if(!$this.is('.opened')){ 
        $('#numbers').html('987654321'); 
    } else { 
        $('#numbers').html(oldNumbers); 
    }
    $this.toggleClass('opened')
}); 
```

[这是一个小提琴](http://jsfiddle.net/5tnuj/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T18:55:24.980

您需要`oldNumbers`在回调之外声明：

```
var oldNumbers = $('#numbers').html();
$('#numbers-clicker').off(...); 
```

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:58:25.650

您可以将旧值存储为标签的属性

```
 $('#numbers').attr('data-old-numbers', oldNumbers ) 
```

并用

```
 $('#numbers').attr('data-old-numbers') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T19:03:25.947

```
$('#numbers-clicker').data('txt', $('#numbers').text()).on('click', function() {
    $('#numbers').html($(this).is('.opened') ? '987654321' : $(this).data('txt'));
    $(this).toggleClass('opened')
});
​ 
```

[**小提琴**](http://jsfiddle.net/5tnuj/1/)

# vb.net - 连接变量

> ID：13769230
> 
> 赞同：1
> 
> 时间：2012-12-07T18:52:52.513
> 
> 标签：vb.net

我正在尝试使用从 Web 表单上的下拉列表中选择的值创建到期日期，但是我无法连接 Month 变量值和 Year 变量值。我收到错误消息：没有为“String”和 System.Web.UI.WebControls.ListItem 类型定义错误运算符“&”。我也尝试使用“+”但得到同样的错误。

这是我的代码：

```
Dim Month = monthDropDownList.SelectedValue
Dim Year = yearDropDownList.SelectedItem
Dim MonthYear = Month & Year
Dim ExpirationDate As Date = MonthYear 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T18:57:30.500

你不想`SelectedItem`。你想要`SelectedValue`。您还应该明确声明您的变量。您也不能以这种方式创建日期。您需要使用整数。

```
Dim Month As Integer= Convert.ToInt32(monthDropDownList.SelectedValue)
Dim Year as Integer = Convert.ToInt32(yearDropDownList.SelectedValue)
Dim ExpirationDate As Date = New Date(Year, Month, 1) 
```

作为一种稍微“更清洁”的方式，我会使用：

```
Dim Month as Integer
Dim Year As Integer
Dim ExpirationDate As Date

Integer.TryParse(monthDropDownList.SelectedValue, Month)
Integer.TryParse(yearDropDownList.SelectedValue, Year)
If (Month > 0 AndAlso Year > 0) Then
    ExpirationDate = New Date(Year, Month, 1)
End If 
```

# c++ - 从 C++ 中传递给函数的指针向量访问矩阵

> ID：13769231
> 
> 赞同：1
> 
> 时间：2012-12-07T18:52:54.797
> 
> 标签：c++, pointers, matrix

几个月前我开始用 C++ 编写代码，但在使用指针时遇到了一些麻烦。在我为工作而编写的代码中，我使用我编写的 matrix_t 类定义了几个矩阵。我创建了一个包含指向这些矩阵的指针的向量。我将向量传递给访问矩阵的函数。这是我正在尝试做的一个简单示例：

```
#include <iostream>

#include "matrix_t.h"

using namespace std;

int mat_access (vector <matrix_t<int>*> &pmatrices)
{
    matrix_t<int> mat = *pmatrices[0];
    return mat.get_cell(0, 0);
    /*get_cell(r, c) returns the value at row r, column c*/
}

int main()
{
    vector <matrix_t<int>*> pmatrices(1);

    matrix_t <int> mat (1, 1, 1);
    /*mat_1(v, r, c) has r rows, c columns, and is filled with the value v*/
    pmatrices[0] = &mat;

    for (size_t i = 0; i < 5; i ++)
    {
        int k = mat_access(pmatrices);
        cout << k;
    }
} 
```

如果我在调试时单步执行该函数，它会在第一次调用函数 mat_access 时工作。但是，第二次调用 get_cell（即使它针对同一矩阵的同一行和同一列）触发了断点，并且我在输出中收到一条错误消息，指出正在访问无效地址。我正在使用 App Verifier，它返回的调用堆栈位置没有源代码。如果我不将指针向量传递给函数，而是直接在 main 方法中访问它，它就可以正常工作。此外，如果我使用向量而不是矩阵运行相同的代码，它工作正常。我不认为 get_cell 有问题，因为我已经在代码中的其他几个地方使用过它，而且我确信索引是正确的。这是 matrix_t 类中的样子：

```
T get_cell (size_t row, size_t col) const
{   try
    {   
        if (row >= n_rows || col >= n_cols)
            throw myerror("Index out of bounds");
    }
    catch (exception &e)
    {
        cout << "Exception: " << e.what() << '\n';
    }
    return t_array [col * n_rows + row];
} 
```

t_array 包含矩阵元素，n_rows 是矩阵的行数。如果一切都失败了，我只会将我的矩阵组合成一个矩阵并将其传递给函数，但我想了解为什么这不起作用。任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:48:31.233

从语法上讲，我没有看到您的代码有任何问题。尝试运行此代码段（相当于您上面的代码），看看您是否遇到相同的错误。如果不是，很可能问题出在您的矩阵代码中。

```
int foo(vector<int*> &v) {
    int x = *v[0];
    return x;
}

int main() {
    vector<int*> v(1);
    int x = 9;
    v[0] = &x;
    for(int i = 0; i < 5; ++i) {
        int y = foo(v);
        cout << y << endl;
    }

    return 0;
} 
```

# java - 带有 cat 命令的 android getRuntime().exec()

> ID：13769234
> 
> 赞同：1
> 
> 时间：2012-12-07T18:53:10.530
> 
> 标签：java, android, exec, io-redirection, cat

我正在使用进程类来运行这个命令

```
/sdcard/file1.mpg /sdcar/file2.mpg > /sdcard/out.mpg 
```

这是我尝试的方法：

```
Process processx = Runtime.getRuntime().exec(new String[] {"cat","/sdcard/file1.mpg /sdcard/file2.mpg > /sdcard/out.mpg" });

BufferedReader in = new BufferedReader(new InputStreamReader(processx.getInputStream()));

String line = null;
while ((line = in.readLine()) != null) {
      System.out.println(line);
}

// Waits for the command to finish.
processx.waitFor(); 
```

该命令在终端上有效，但在我尝试上述操作时无效，任何人都可以看到原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T19:02:30.070

重定向 ( `>`) 不是操作系统功能。这是shell的一个特性。要使其在 java 中工作，您必须运行以下内容：

`/bin/sh yourcommand > yourfile`

即在你的情况下：

`/bin/sh cat /sdcard/file1.mpg /sdcard/file2.mpg > /sdcard/out.mpg`

但是你能解释一下你为什么这样做吗？您是否了解此命令与`cp /sdcard/file1.mpg /sdcard/file2.mpg /sdcard/out.mpg`无需运行任何命令行即可在纯 java 中编码的完全等效？除非你有特殊的原因去吧！尽可能编写纯 Java 代码。它更易于调试、支持和维护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T19:03:14.667

绝对没有理由使用“猫”来做到这一点。它不是 Android 上支持或鼓励的机制，并且没有理由启动一个新的可执行文件来执行您可以在 java 代码中轻松执行的操作，方法是读取一个文件并将其写入另一个文件。

作为记录，您正在尝试进行 shell 重定向，这将不起作用，因为您没有执行 shell。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-25T13:29:18.297

我使用这个小代码来执行“cat”命令和大多数 shell 命令：

```
String[] cmdline = { "sh", "-c", "cat /sdcard/file1 >> /sdcard/file2" }; 
try {
Runtime.getRuntime().exec(cmdline);
} catch (Exception s) {
finishAffinity();
} 
```

# assembly - 在旧式汇编器上使用 ARM NEON 指令

> ID：13769236
> 
> 赞同：0
> 
> 时间：2012-12-07T18:53:29.613
> 
> 标签：assembly, arm, neon

我有一个适用于 Windows Mobile 6 的 Visual Studio 2008 C++03 项目，我想在其中实现一个 ARM-NEON 版本的 memcpy。

[ARM 信息中心](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka13544.html)提供了一个实现：

```
; NEON memory copy with preload
NEONCopyPLD
      PLD [r1, #0xC0]
      VLDM r1!,{d0-d7}
      VSTM r0!,{d0-d7}
      SUBS r2,r2,#0x40
      BGE NEONCopyPLD 
```

不幸的是，VS2008 ARM 汇编器不支持 NEON 指令集（尽管我的处理器是基于 ARM Cortex-A8 的）。

有什么方法可以为这些指令提供字节码，以便 ARM 汇编程序接受它？我可以在 DCB 或 DCD 中输入正确的值吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:09:29.027

您可以将 DCI 指令用于“十六进制指令”：

[http://msdn.microsoft.com/en-us/library/ms863606.aspx](http://msdn.microsoft.com/en-us/library/ms863606.aspx)

# php - 使用 php PharData 提取具有空目录的 tar 存档

> ID：13769237
> 
> 赞同：4
> 
> 时间：2012-12-07T18:53:30.620
> 
> 标签：php, phar, archive-tar

我正在尝试通过 PHP 提取 .tar 存档。我正在使用这样的代码：

```
$phar = new PharData('test.tar');
$phar->extractTo('/home/user/newtest'); 
```

它工作正常，但**如果我的存档包含一个空目录**，则上述代码不会提取它。因此，如果我的 .tar 文件具有以下结构：

```
user@computer:~/test$ tar -tvf test.tar
drwxrwxr-x user/user         0 2012-12-07 22:35 dir1/
-rw-rw-r-- user/user       798 2012-10-28 23:41 dir1/articles.txt
drwxrwxr-x user/user         0 2012-12-07 22:35 emptyDir/
-rw-rw-r-- user/user       834 2012-09-15 22:47 main.html 
```

打开包装后我得到：

```
user@computer:~/newtest$ ls -l
drwxrwxr-x 2 user user 4096 Dec.   7 22:35 dir1
-rw-rw-r-- 1 user user  834 Sep.  15 22:47 main.html 
```

**因此，未提取**空的“emptyDir” 。

有谁知道如何修理它？

提前感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:43:36.897

它看起来像是在命令行上`test.tar`创建的。`tar -cf test.tar ...`PHP 的`Phar`库旨在读取`phar`档案，*而不是* `tar`档案。

[PHP 手册](http://php.net/manual/en/phar.fileformat.comparison.php)显示了 phar、tar 和 zip 之间的区别。当然，PharData*应该*适用于 tar 存档，因此您可能希望[将此作为错误报告](https://bugs.php.net/report.php)给 PHP 开发人员。

目前，如果您想`tar`在 PHP 中提取档案，您有三个选择：

1.  使用 PHP 中的库创建存档`Phar`，然后在 PHP 中提取
2.  使用[Pear 的 Archive_Tar](http://pear.php.net/manual/en/package.filesystem.archive-tar.extract.php)（适用于`tar`和`tar.gz`文件）。
3.  打电话`exec("tar -xf test.tar -C /home/user/newtest");`（**不**推荐，但可以）

# c# - 使用类支持漫游设置是优雅的还是 Rube Goldbergesque 的？

> ID：13769240
> 
> 赞同：1
> 
> 时间：2012-12-07T18:53:40.760
> 
> 标签：c#, windows-8, windows-store-apps, appsettings, roaming

我正在使用漫游设置来尽快存储状态并将其恢复为 JIT 或 ALAP（L = Late）。

对于以这种方式访问​​/更改的属性使用数据绑定的可能优势，我正在考虑创建一个镜像漫游设置的类，在应用程序的 OnLaunched 和 OnResuming 事件期间使用漫游设置膨胀该类。

通过这样做，我可以将属性绑定到类成员，而不是拥有无数行代码，例如：

```
 textBlockPlatypus1.Text = App.roamingSettings.Values["Platypus1"].ToString(); 
```

这是我的天才之举——嗯，一个好主意——还是我只是通过将这个额外的层添加到非常简单的东西上来使事情变得过于复杂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:03:05.867

似乎是一种合理的方法。我可能建议只序列化/反序列化您最终使用的任何类，并将其写入[RoamingFolder](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.roamingfolder.aspx)而不是[RoamingSettings](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.roamingsettings.aspx)中的文件。它应该很容易在或多或少的一行代码中存储和检索（相对于通过 RoamingSettings 的单个名称/值对）。这本质上是 SuspensionManager 在某些 C#/XAML 模板中所做的。

请注意或您节省了多少，但有限制 - 您的目标是能够恢复*用户感知*的应用程序状态，不一定保存所有内容，特别是如果它可以在“幕后”重建时应用程序被重新激活。

# cluster-analysis - 将单词聚类成组

> ID：13769242
> 
> 赞同：9
> 
> 时间：2012-12-07T18:53:53.320
> 
> 标签：cluster-analysis, k-means, text-analysis

这是一个家庭作业问题。我有一个巨大的文件，里面全是文字。我的挑战是将这些词分类为充分代表这些词的不同组/集群。我处理它的策略是使用 K-Means 算法，如您所知，它采用以下步骤。

1.  为整个组生成 k 个随机均值
2.  通过将每个单词与最接近的平均值相关联来创建 K 个集群
3.  计算每个集群的质心，成为新的均值
4.  重复步骤 2 和步骤 3，直到达到某个基准/收敛。

理论上，我有点明白，但不完全明白。我认为在每一步，我都有与之相对应的问题，这些是：

1.  我如何决定 k 随机均值，从技术上讲，我可以说 5，但这不一定是一个好的随机数。那么这个 k 纯粹是一个随机数还是它实际上是由启发式驱动的，例如数据集的大小、所涉及的单词数等

2.  你如何将每个单词与最接近的意思联系起来？从理论上讲，我可以得出结论，每个单词都通过其与最近均值的距离相关联，因此如果有 3 个均值，则属于特定聚类的任何单词都取决于它与哪个均值的距离最短。但是，这实际上是如何计算的？在两个单词“group”、“textword”之间并假设一个平均单词“pencil”，我如何创建一个相似度矩阵。

3.  你如何计算质心？

4.  当您重复第 2 步和第 3 步时，您是否假设每个先前的集群都是一个新的数据集？

很多问题，我显然不清楚。如果有任何我可以阅读的资源，那就太好了。维基百科还不够:(

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-08T12:06:28.493

由于您不知道确切的集群数量 - 我建议您使用一种**层次聚类**：

1.  想象一下，你所有的词都只是非欧几里得空间中的一个点。使用**[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)**来计算单词之间的距离（如果您想**检测词典上相似的单词集群，**它的效果很好）

2.  构建包含所有单词的**[最小生成树](http://en.wikipedia.org/wiki/Minimum_spanning_tree)**

3.  **删除**长度大于某个**阈值的链接**

4.  **链接**的词组是相似词的集群

这是一个小插图：

![在此处输入图像描述](../Images/e2dbc738552093c2efbe9d1a9c555609.png)

**PS**你可以在网上找到很多论文，其中描述了基于构建最小生成树的聚类

**PPS**如果要检测**语义相似**词的聚类，则需要一些**自动词库构建的算法**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-01T19:32:59.380

关于距离：其实Levenshtein（或编辑）距离满足三角不等式。它还满足成为度量的其余必要属性（并非所有距离函数都是度量函数）。因此，您可以使用此度量函数实现聚类算法，这是您可以用来计算相似度矩阵 S 的函数：

-> S_{i,j} = d(x_i, x_j) = S_{j,i} = d(x_j, x_i)

值得一提的是，Damerau-Levenshtein 距离不满足三角不等式，所以要小心。

关于 k-means 算法：是的，在基本版本中，您必须手动定义 K 参数。对于给定的度量，算法的其余部分是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T09:32:44.937

您必须为 k-means 选择“k”是 k-means 的最大缺点之一。但是，如果您使用此处的搜索功能，您会发现许多问题涉及选择 k 的已知启发式方法。主要是通过比较多次运行算法的结果。

至于“最近”。K-means 实际上不使用*距离*。有些人认为它使用欧几里得，其他人说它是平方欧几里得。从技术上讲，k-means 感兴趣的是*方差*。它通过将每个对象分配给集群以使方差最小化，从而最小化整体方差。巧合的是，平方偏差的总和 - 一个对象对总方差的贡献 - 在所有维度上正是平方欧几里德距离的定义。由于平方根是单调的，你也可以使用欧几里得距离。

无论如何，如果您想对单词使用 k-means，您首先需要将单词表示为平方欧几里得距离有意义的向量。我认为这并不容易，甚至不可能。

# python - 自动填充 Django ModelForms

> ID：13769243
> 
> 赞同：2
> 
> 时间：2012-12-07T18:53:57.717
> 
> 标签：python, django, django-models, django-forms, django-views

我想知道如何以这张图片[http://prntscr.com/lkn7x](http://prntscr.com/lkn7x)中的形式自动填充字段。这是我到目前为止的表格。

```
class PIREPForm(ModelForm):
    class Meta:
        model = PIREP 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T19:10:21.420

在模型表单中，您可以传递将映射到表单字段的实例

```
form = TestForm(instance = test_instance) 
```

否则，如果你想填充一些字段，你可以传递初始参数

```
form = TestForm(initial = {'field_name':field_value,...}) 
```

# sql - 从加入中选择“没有这样的列”

> ID：13769245
> 
> 赞同：0
> 
> 时间：2012-12-07T18:53:59.077
> 
> 标签：sql

我有两张桌子，有`firstname`,`lastname`和`amount`。

我可以做一个左连接：

```
select * from spi left join dp 
on spi.amount = dp.amount
and lower(spi.firstname) = lower(dp.firstname)
and lower(spi.lastname) = lower(dp.lastname); 
```

这给出了很好的结果：

```
|#   |firstname     |lastname    |amount|dp.firstname |dp.lastname  |dp.amount
|----+--------------+------------+------+-------------+-------------+---------
|1   |saumeh synah  |s*****      |50.0  |             |             |
|2   |Neda          |M*****      |1000.0|             |             |
|3   |Mansoor       |B********** |100.0 |             |             |
|4   |Hanna         |W****       |50.0  |Hanna        |W****        |50.0
|5   |Kristen       |A****       |40.0  |Kristen      |A****        |40.0
|6   |David         |B******     |10.0  |David        |B******      |10.0 
```

现在我想只选择`dp`.

所以我写：

```
select * from ( 
select * from spi left join dp 
on spi.amount = dp.amount
and lower(spi.firstname) = lower(dp.firstname)
and lower(spi.lastname) = lower(dp.lastname) )
where dp.amount = null; 
```

但我得到了错误

```
no such column: dp.amount 
```

为什么不？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T18:56:59.740

错误是由于派生表造成的。只需尝试一个简单的查询：

```
select spi.* 
from spi left join dp 
on spi.amount = dp.amount
and lower(spi.firstname) = lower(dp.firstname)
and lower(spi.lastname) = lower(dp.lastname) 
where dp.amount IS null ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T18:57:34.617

dp.amount 不存在，因为您在您的`select * from (select * from...)`

那组括号内的括号创建了一个派生表，因此您对 dp 的引用不存在于这些括号之外。把你`where dp.amount = null`的最后一个括号放在里面，把你的分号推到外面。

```
select * from ( 
select * from spi left join dp 
on spi.amount = dp.amount
and lower(spi.firstname) = lower(dp.firstname)
and lower(spi.lastname) = lower(dp.lastname) 
-- this will never find results as NULL will never equal anything
-- where dp.amount = null
where dp.amount IS NULL) AS D; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T18:58:17.310

实际上你不需要使用`sub query`where dp 不存在。

```
select * from spi left join dp 
on spi.amount = dp.amount
and lower(spi.firstname) = lower(dp.firstname)
and lower(spi.lastname) = lower(dp.lastname)
WHERE dp.amount IS NULL 
```

**编辑：**这里有一些[关于 JOIN 的好例子](http://blog.sqlauthority.com/2009/04/13/sql-server-introduction-to-joins-basic-of-joins/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T19:02:27.187

```
select * from (
   select * from ....
   where dp.amount is null;
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T18:59:53.597

不确定我是否 100% 理解，但这行得通吗？

```
select dp.firstname,dp.lastname,dp.amount
from dp,spi
where dp.firstname=spi.firstname
and dp.lastname=spi.lastname
and dp.amount is null; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-07T19:05:18.467

可能是更好的名称嵌套选择：

```
select * from ( 
select spi.firstname, spi.lastname, spi.amount, dp.firstname f, dp.lastname l, dp.amount a from spi left join dp 
on spi.amount = dp.amount
and lower(spi.firstname) = lower(dp.firstname)
and lower(spi.lastname) = lower(dp.lastname) ) as x
where x.a = null; 
```

# c - 为什么我会收到此错误（指针错误）

> ID：13769246
> 
> 赞同：1
> 
> 时间：2012-12-07T18:53:59.343
> 
> 标签：c, pointers, function-pointers, getopt

我是 StackOverflow 的新手，我只是想知道为什么我的 C 代码会给我这个错误。我真的希望这个问题得到解决，如果有人能解释为什么会发生这种情况，而不是给我答案，那将不胜感激。

```
void scanningForWS(int argc, char **argv)
{

int number = 0;
int sflag = 0;
int opt = 0;
int *s = 0;
char *getopt = 0;
char *optarg = 0;

while ((opt = *getopt(argc, argv, "w:s")) != -1) //the *getopt gives me this error
//Error: Expression much have a pointer-to function

{
switch (opt)
{
case 's':
    sflag = 1;
    break;
case 'w':
    number = atoi(optarg);
    break;
default:
    break;
}
}

} 
```

这是 while 语句，我在需要的地方进行了评论。

***问题找到了，但还没有解决。我发现我没有 unistd.h 并且我无法得到它。有谁知道我在哪里可以得到它？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:04:02.433

Remove`char *getopt;` `getopt`是一个函数`unistd.h`，通过声明该 char 指针，您正在做一些非常奇怪的事情:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:59:50.227

您正在声明一个与函数同名的变量，我不能说您是否包含了正确的标题。

这不是函数声明仅供参考，该行声明了一个指向 char 的指针并用 value 初始化它`0`。当前代码有意义的唯一方法是 if`getopt`是一个函数指针，它不是。

您的代码应该是：

```
#include <unistd.h>

void scanningForWS(int argc, char **argv)
{
    int number = 0;
    int sflag = 0;
    int opt = 0;
    int *s = 0;    
    /* char *getopt = 0; do not declare getopt as a variable, 
                         just include the header uninstd.h and use it */

    while ((opt = getopt(argc, argv, "w:s")) != -1)
        /* ... */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T18:56:36.910

getopt 返回一个`int`，而不是`int *`。

`*`从 while 循环中的使用中删除：

```
while ((opt = getopt(argc, argv, "w:s")) != -1) //the *getopt gives me this error 
```

至：

```
while ((opt = getopt(argc, argv, "w:s")) != -1) //the *getopt gives me this error 
```

# qt - 如何本地化从 QPrintDialog 调用的 QFileDialog？

> ID：13769247
> 
> 赞同：2
> 
> 时间：2012-12-07T18:54:04.303
> 
> 标签：qt, localization, qt4, qfiledialog

以下方法适用于本地化 QPrintDialog：

```
#include <QtGui/QApplication>
#include <QTranslator>
#include <QPrintDialog>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    QTranslator translator;
    if (translator.load("./translations/qt_de.qm")) {
       a.installTranslator(&translator);
    }

    QPrintDialog printdialog;
    printdialog.exec();
} 
```

但是当我单击 QPrintDialog 中的“选择文件”按钮（带有三个点）时，会出现文件对话框的英文版本，而不是我想要的德文版本。

此外，控制台上还有一个警告：

> KGlobal::locale::Warning 您的全局 KLocale 正在使用有效的主组件而不是假组件重新创建，这通常意味着您在创建主组件之前尝试调用 i18n 相关函数。你不应该这样做，因为它很可能不起作用

我应该去哪里看？

至于[这里](https://stackoverflow.com/a/13110254/1219282)提到的解决方法：一些 QDialogs 支持 ::DontUseNativeDialog 标志，但 QPrintDialog 不支持。

（在linux上测试过，不知道在其他平台上结果如何）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:18:22.127

尝试在translator.load之后添加这一行：

a::installTranslator(&translator);//或类似的东西(*)

并阅读有关 QApplication::installTranslator 方法的文档...

(*) 抱歉，我检查了一下，这是 QCoreApplication 的方法。我通过 qApp 宏将它用于 QMainWindow 子类，我不知道如何从 main.cpp 调用它。请做一些测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-17T10:33:58.063

我发现自己遇到了同样的问题，我通过添加到我的主窗口来解决它： `QApplication::setAttribute(Qt::AA_DontUseNativeDialogs);`

[您可以在此处](https://doc.qt.io/qt-5/qt.html#ApplicationAttribute-enum)找到带有属性的枚举。

# in-app-purchase - 谷歌钱包应用内付款：未捕获的 ReferenceError：未定义 goog。google.payments 与 goog.payments

> ID：13769248
> 
> 赞同：0
> 
> 时间：2012-12-07T18:54:12.597
> 
> 标签：in-app-purchase, android-pay

自 2012 年 google io 以来，我们一直在使用 google wallet inapp-payments。

最近我们看到这个错误：

未捕获的 ReferenceError：未定义 goog

代码非常简单：

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
  google.load('payments', '1.0', {

    'packages': ['production_config']

  }) 
```

然后我们使用jquery document.ready 回调调用goog.payments.inapp.buy，但是那个时候好像goog 对象没有创建。这似乎是一种竞争条件。购买功能只需调用 goog.payments.inapp.buy

```
 $(document).ready(function() {
      purchase('Item1'); //function to call goog.payments.inapp.buy
       }); 
```

这也令人困惑，因为此页面[https://sandbox.google.com/checkout/customer/gadget/inapp/demo.html](https://sandbox.google.com/checkout/customer/gadget/inapp/demo.html)显示购买电话是：

```
google.payments.inapp.buy 
```

虽然此页面[https://developers.google.com/in-app-payments/docs/tutorial#3](https://developers.google.com/in-app-payments/docs/tutorial#3)显示购买电话是：

```
goog.payments.inapp.buy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:03:53.680

经过一些额外的搜索（也是因为编写问题的过程），找到了一个解决方案：

请参阅[https://developers.google.com/in-app-payments/docs/tutorial#3](https://developers.google.com/in-app-payments/docs/tutorial#3)

> 重要提示：如果 API 库尚未加载，对 buy() 的调用将失败。您可以通过在步骤 3 中使用 Google Loader 回调选项指定按钮 onClick 处理程序来避免此问题。有关使用 google.load() 的可选设置的详细信息，请参阅 Google Loader 开发人员指南。

为了避免竞争条件，使用 google.load 调用的回调很重要。

```
google.load('payments', '1.0', {
  'packages': ['production_config']

  ,"callback": function() {
          // wait for goog object to exist before using it.
          //goog.payments.inapp.buy(...);
   }
  } 
```

# c++ - C++ 函数类型？

> ID：13769249
> 
> 赞同：11
> 
> 时间：2012-12-07T18:54:13.663
> 
> 标签：c++, function

我是新手，正在学习 C++（了解很多 Java），下面的代码让我感到困惑......

![在此处输入图像描述](../Images/5daa40510f1af5ca38fa0326e2a3d4ca.png)

我知道这个代码片段正在处理一个指向函数的指针（这是一个回调，这是有道理的），但让我失望的是返回类型和函数名之间的参数。那是什么鬼东西？

它看起来像是一种函数，但我从未听说过，即使在搜索和阅读了指向函数的指针之后，我也找不到任何提到函数可以具有类型的内容。

如果这是真的，如何定义一种函数类型？

谢谢，-科迪

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T19:00:20.563

`GLFWCALL`不是类型，它是扩展为特定于平台的调用约定的宏，或空字符串。这是 glfw.h 的修剪片段：

```
#if defined(_WIN32) && defined(GLFW_BUILD_DLL)
 #define GLFWCALL     __stdcall
#elif defined(_WIN32) && defined(GLFW_DLL)
 #define GLFWCALL     __stdcall
#else
 /* We are either building/calling a static lib or we are non-win32 */
 #define GLFWCALL
#endif 
```

在 x86/win32 上使用正确的调用约定很重要，因为其中一些期望堆栈由被调用者清理，而另一些则由调用者清理。传递参数的顺序也可能有所不同。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-07T18:59:14.933

在 Windows 上，`GLFWCALL`它是一个宏`__stdcall`，而在其他平台上，它是一个无用的宏。

[`__stdcall`](http://msdn.microsoft.com/en-us/library/zxk0tw93(v=vs.80).aspx)实现了特定的调用约定，并且是普通 C 或 C++ 之上的编译器扩展。

宏是在编译器的词法分析器和解析器与它们交互之前对代码进行替换的代码片段。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-07T18:59:25.907

如果需要，它`GLFWCALL`是一个可以扩展为[调用约定](http://en.wikipedia.org/wiki/X86_calling_conventions)的宏。因为这个函数会被外部代码调用，所以它必须使用外部代码所期望的调用约定。例如，如果函数将其返回值放在堆栈中，而外部代码期望它在寄存器中，则繁荣。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T19:10:03.283

函数签名的问题标记部分是一个预处理器宏，它在标题的其他地方定义。某些平台上的某些功能有额外的要求。

例如，Windows 平台上的 DLL 文件中的函数通常使用 __declspec(dllexport) 修饰符，但是当用户项目中包含相同的头文件时，他们需要使用 __declspec(dllimport)。为此目的使用预处理器宏意味着他们可以只在所有相关函数上使用该宏，并在编译自己的 DLL 或用户的 DLL 时以及在 __declspec 不相关的平台上以不同方式定义宏，可以将其定义为空。像这样的宏还有许多其他原因。

在这种特殊情况下，您可以有效地假装宏为空白并完全忽略它。

# django - 在 Django 中优化数据库查询

> ID：13769256
> 
> 赞同：1
> 
> 时间：2012-12-07T18:54:47.123
> 
> 标签：django

我有一些代码导致我的页面加载速度很慢（128 毫秒内有 49 个查询）。这是我网站的登陆页面——所以它需要快速加载。

以下是我的views.py，它在站点上创建了最新更新的提要，并导致我在调试工具栏中看到的加载时间最慢：

```
def product_feed(request):
    """ Return all site activity from friends, etc. """
    latestparts = Part.objects.all().prefetch_related('uniparts').order_by('-added')
    latestdesigns = Design.objects.all().order_by('-added')
    latest = list(latestparts) + list(latestdesigns)
    latestupdates = sorted (latest, key = lambda x: x.added, reverse = True)
    latestupdates = latestupdates [0:8]
    # only get the unique avatars that we need to put on the page so we're not pinging for images for each update
    uniqueusers = User.objects.filter(id__in = Part.objects.values_list('adder', flat=True))
    return render_to_response("homepage.html", {
    "uniqueusers": uniqueusers,
    "latestupdates": latestupdates
    }, context_instance=RequestContext(request)) 
```

导致最多时间的查询似乎是：

```
 latest = list(latestparts) + list(latestdesigns) (25ms) 
```

还有一个我也在调查的分别是 17 毫秒（站点范围的公告）和 25 毫秒（在每个产品提要项上添加标记项）。

有没有人看到我可以优化我的活动提要加载的任何方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:59:53.563

您永远不需要超过 8 个项目，因此请限制您的查询。并且不要忘记确保`added`在两个模型中都[被索引](https://docs.djangoproject.com/en/dev/ref/models/fields/#db-index)。

```
latestparts = Part.objects.all().prefetch_related('uniparts').order_by('-added')[:8]
latestdesigns = Design.objects.all().order_by('-added')[:8] 
```

对于加分，消除幻数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:08:34.630

在使这些查询更快一点之后，您可能需要查看[memcache](https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs)以存储最常见的查询结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T21:57:39.000

而且，我相信`adder`是`ForeignKey`为了`User`模型。

```
Part.objects.distinct().values_list('adder', flat=True) 
```

上面的行`QuerySet`具有唯一`addre`值。我相信你确实是这样说的。

它可以节省您执行 subuery。

# azure - 如何回滚 Windows Azure 云服务部署

> ID：13769265
> 
> 赞同：2
> 
> 时间：2012-12-07T18:55:15.600
> 
> 标签：azure, cloud, rollback

正如标题一样，我看不出您如何回滚对 Windows Azure 服务/站点的更新？每个“更新”都有一个标题，所以我以为您可以看到这些更新的列表，但我只是在任何地方都看不到它？

我使用[https://manage.windowsazure.com](https://manage.windowsazure.com)，这些是云服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:00:35.457

可以在此处找到有关回滚的详细信息：http: [//msdn.microsoft.com/en-gb/library/windowsazure/hh472157.aspx#RollbackofanUpdate](http://msdn.microsoft.com/en-gb/library/windowsazure/hh472157.aspx#RollbackofanUpdate)

去引用：

> 在 Windows Azure Fabric Controller 接受初始更新请求后，Windows Azure 允许您在服务上启动其他操作，从而在更新期间提供管理服务的灵活性。仅当部署的更新（配置更改）或升级处于进行中状态时，才能执行回滚。只要至少有一个服务实例尚未更新到新版本，则认为更新或升级正在进行中。要测试是否允许回滚，请检查和s 操作`RollbackAllowed`返回的标志值是否设置为 true。`Get Deployment``Get Hosted Service Propertie`
> 
> 注意 仅在就地更新或升级时调用 Rollback 才有意义，因为 VIP 交换升级涉及用另一个替换整个正在运行的服务实例。有关交换 VIP 的详细信息，请参阅如何通过在 Windows Azure 中交换 VIP 将服务升级部署到生产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T16:14:34.817

没有维护您以前的部署的堆栈，但是如果您当前的部署以某种方式失败，那么结构可能会使用您以前的部署（它会尝试初始化以前的状态）。您的角色只是具有操作系统副本的 VHD（虚拟硬盘），并且您的安装文件以虚拟方式运行，每当您更新时，都会分配一个新的 VHD 并销毁以前的 VHD（如果更新成功）。因此没有办法获得以前的部署（它被破坏了）。您应该将以前的构建存储在本地或基础服务器上，以防您现在需要它。

# php - PHP正则表达式只允许两个字符

> ID：13769268
> 
> 赞同：1
> 
> 时间：2012-12-07T18:55:18.070
> 
> 标签：php, regex, preg-replace

我需要一个正则表达式来识别只有两个选项，它们是“F”和“M”字符。我在尝试：

```
preg_replace('/([^FM]){1}/', '', $_GET['option']) 
```

但是如果我输入'MF'，它会返回'MF'，但我期待'M'。

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:01:10.150

```
$output = preg_replace('/^[^FM]*([FM])?.*/s', '$1', $_GET['option']); 
```

从字符串的开头开始。消耗所有非`FM`字符。然后匹配一个`F`或`M`字符（如果有的话）。匹配输入的其余部分。替换为匹配的字符。`M`请注意，如果没有或根本没有，您最终会得到一个空字符串`F`。

但是，您可能应该重新考虑如何获取该数据，因为它似乎是一个布尔值（但您需要处理可能包含所需字符的任意字符串）。

如果您自己（从其他网站）生成值，您应该能够知道未被篡改的值是`"M"`或`"F"`。那么为什么不直接使用：

```
if ($_GET['option'] == "M")
    // male...
elseif ($_GET['option'] == "F")
    // female...
else
    // someone tried to mess with you ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:31:48.353

总是可以试试这个。这是一个单行，将抓住字符串的第一个字符。如果是“m”或“M”，它将返回“M”。女性也是如此。如果没有匹配，那么它将返回 ''。

`$gender = strtolower(substr($_GET['option'], 0, 1)) == 'f' ? 'F' : (strtolower(substr($_GET['option'], 0, 1)) == 'm' ? 'M' : '');`

# json - 解析 JSON 字符串

> ID：13769269
> 
> 赞同：0
> 
> 时间：2012-12-07T18:55:22.130
> 
> 标签：json, parsing

```
{
    "jsonStringData": " ["Coil",{"CHARGE_ID":"T862270","PROD_ID":"S878412","COMBINE_SPLIT_IND":"S",
    "WEIGHT":"234244","FEET":"3535","ORDER_NUMBER":"LI91004","OIL_DRY_IND":"D",
    "NEXT_FACILITY":"WHSE",      "DEFECT_CODE":"","TEST_CUT_IND":"","NSTD_FAC_REASON_CODE":"",
    "COMMENTS":"","SCRAP_FEET":""}]"
} 
```

当我使用“http://jsonlint.com/”解析上面的 JSONString 时，它给了我下面的错误消息。我不确定那个错误是什么意思。

请帮助我获得正确的 JSONString。

***错误 ：***

```
Parse error on line 2:
...sonStringData": " ["Coil",{"CHARGE_ID":"
-----------------------^
Expecting '}', ':', ',', ']' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T18:57:53.913

删除`"`after the`:`和最后的关闭一个。

```
{
    "jsonStringData": [
        "Coil",
        {
            "CHARGE_ID": "T862270",
            "PROD_ID": "S878412",
            "COMBINE_SPLIT_IND": "S",
            "WEIGHT": "234244",
            "FEET": "3535",
            "ORDER_NUMBER": "LI91004",
            "OIL_DRY_IND": "D",
            "NEXT_FACILITY": "WHSE",
            "DEFECT_CODE": "",
            "TEST_CUT_IND": "",
            "NSTD_FAC_REASON_CODE": "",
            "COMMENTS": "",
            "SCRAP_FEET": ""
        }
    ]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:57:55.433

前面的引号`Coil`结束了作为值的字符串。就在这个字符串之后，你应该有`}`or `,`：

![在此处输入图像描述](../Images/ee4edc6dd3fdfc51b5ae12da8e289a63.png)

（来自[json.org](http://json.org/)）

但看起来错误是在构建完整对象时将 json 编码数组放入引号中。

你应该有

```
"jsonStringData": ["C... 
```

代替

```
"jsonStringData": " ["C... 
```

# visual-studio - Visual Studio 项目：缺少 Properties/Settings.settings

> ID：13769273
> 
> 赞同：3
> 
> 时间：2012-12-07T18:55:38.620
> 
> 标签：visual-studio, dataset, connection-string, settings.settings, properties.settings

我从源代码管理中检查了一个解决方案并在 Visual Studio 中打开它。我的假设是这个解决方案是一次（两年前）编译并部署的。

有一个包含数据集的项目，我将其称为“数据集项目”。数据集具有在寻找 Properties 命名空间的 Designer.cs 文件中的 InitConnection() 方法中定义的连接字符串。

```
[global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
    private void InitConnection() {
        this._connection = new global::System.Data.SqlClient.SqlConnection();
        this._connection.ConnectionString = global::<some namespace>.Properties.Settings.Default.<some connectionStringName>;
    } 
```

在解决方案资源管理器中，我看到一个似乎“丢失”的 Settings.settings 文件。事实上，当我检查它的内容时，Properties 文件夹是空的。缺少的设置是每个数据集中的编译错误。

我尝试将数据集的连接字符串设置为无，但它尝试将新值保存到 .settings 文件中，该文件失败并显示“警告 22 自定义工具 'SettingsSingleFileGenerator' 在处理文件 'Properties\ Settings.settings'.
" 消息——表面上是因为缺少 .settings 文件。

多一点挖掘揭示了在另一个引用数据集项目的项目中找到的完整的连接字符串。但是数据集项目没有（循环地）引用这个其他项目，并且无法使用我知道的它的连接字符串。

可以为数据集项目重新生成 .settings 文件吗？为什么有人会首先删除 .settings ？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T18:09:18.217

弄清楚了。

我使用 Visual Studio 删除了 Properties 文件夹下的幻像 Settings.settings 文件（项目认为应该存在的“幻像”文件图标，因为它列在 .csproj 文件中）。然后我打开项目属性并转到设置选项卡。Visual Studio 提示我创建一个新的设置文件。我很高兴地答应了，VS 自动从 app.config 导入了设置。

所以似乎有一种方法可以重新生成 Settings.settings。

# windows-phone-7 - 如何在调用 Close 方法后重用 BackgroundAudioPlayer

> ID：13769275
> 
> 赞同：1
> 
> 时间：2012-12-07T18:55:45.413
> 
> 标签：windows-phone-7, mediaelement, background-audio

我使用 MediaElement 播放视频和 BackgroundAudioPlayer 播放音频。

这是一个案例。

我正在通过 BackgroundAudioPlayer 播放远程音频。然后我想播放视频，在 MediaElement 开始播放视频之前，我按照 BackgroundAudioPlayer 最佳实践中的建议调用 BackgroundAudioPlayer.Close。

```
MediaElement and the BackgroundAudioPlayer

Care must be taken when mixing BackgroundAudioPlayer and MediaElement for audio playback.

1\. Close() must be called before switching to MediaElement playback.

2\. There is only one media queue. Your application cannot pause background audio, play something with MediaElement then resume the background audio stream. 
```

但是在播放视频后，我想再次播放音频。

```
// Play audio result
BackgroundAudioPlayer.Instance.Track = new AudioTrack(new Uri(audioSearchResult.Url, UriKind.Absolute), audioSearchResult.Title, null, null, null, 
                AudioPlayer.TrackStateBuffering, EnabledPlayerControls.All);
BackgroundAudioPlayer.Instance.Play(); 
```

我`InvalidOperationException`在第一行代码上说“背景音频资源不再可用”。那么在使用 MediaElement 之后如何在我的应用程序中重用 BackgroundAudioPlayer？

编辑：

如果使用 MediaPlayerLauncher 而不是 MediaElement，它会在第二次播放音频时起作用，因为在 MediaPlayerLauncher 启动时应用程序正在被墓碑化。但是是否可以在一个应用程序中混合 MediaElement 和 BackgroundAudioPlayer ！？！？！似乎是 MS 的另一个噩梦:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-06T20:37:14.667

在使用 MediaElement 播放视频后，您似乎能够继续使用背景音频播放器，您需要在视频结束后和使用任何其他 BackgroundAudioPlayer 方法之前再次调用 BackgroundAudioPlayer.Instance.Close()。

您的示例应如下所示：

```
// Play audio result
BackgroundAudioPlayer.Instance.Close();
BackgroundAudioPlayer.Instance.Track = new AudioTrack(new Uri(audioSearchResult.Url, UriKind.Absolute), audioSearchResult.Title, null, null, null, AudioPlayer.TrackStateBuffering, EnabledPlayerControls.All);
BackgroundAudioPlayer.Instance.Play(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:16:43.223

您必须`BackgroundAudioPlayer.Instance.Close()`在开始播放媒体元素之前调用。我已经在 WP7.1 和 WP8 模拟器中使用简单的后台音频代理（不是流式传输）进行了尝试。没有这个电话，我一直看到`InvalidOperationException`s。有了它，事情表现得更好。

例如：

```
 private void ButtonPlayMediaElement(object sender, RoutedEventArgs e)
    {
        BackgroundAudioPlayer.Instance.Close();
        mediaElement.Source = new Uri("http://wpdevpodcast.episodes.s3.amazonaws.com/Episode_093_Were_All_Stickmen.mp3", UriKind.Absolute);
        mediaElement.Play();
    } 
```

另外：您正在从 UI 添加曲目，您应该`GetNextTrack`在后台音频代理中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T15:34:06.303

如果您想在应用程序中同时使用音频和视频媒体内容，请不要`MediaElement`与`BackgroundAudioPlayer`! 使用`MediaLauncher`with `BackgroundAudioPlayer`，当然不要忘记调用`BackgroundAudioPlayer.Instance.Close()`before`MediaLauncher.Show()`

# web-services - 是否有任何免费的 API 可用于检索 S&P 500 的成分符号？

> ID：13769278
> 
> 赞同：6
> 
> 时间：2012-12-07T18:56:10.870
> 
> 标签：web-services, api, rest, finance

某种免费的 REST API 是理想的，但一般来说，是否有任何免费的 API 或 Web 服务或 CSV 文件（不在密码提示后面）或任何可以查询以获取当前标准普尔 500 指数列表的东西成分？

我通过 Yahoo Finance 的 API 和 Markit on demand ( [http://dev.markitondemand.com/ ) 查看了 S&P 的网站本身 (](http://dev.markitondemand.com/) [http://www.standardandpoors.com](http://www.standardandpoors.com) ) ，但没有找到任何东西然而。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-08T18:52:11.460

也有类似的需求。您可以使用 Wikipedia API 或解析 html 来获取标准普尔 500 指数中的符号列表 [http://en.wikipedia.org/wiki/List_of_S%26P_500_companies](http://en.wikipedia.org/wiki/List_of_S%26P_500_companies)

您现在可以通过以下方式安装和使用模块

```
pip install finsymbols 
```

我目前通过维基百科获得符号列表。它不是休息，但可以很容易地做成一个休息 API。它是用python编写的

```
>>import sys
>>sys.path.append('/home/skillachie/Desktop/')
>>import finsymbols

sp500 = finsymbols.get_sp500_symbols()

pprint.pprint(sp500)

{'company': u'Xcel Energy Inc',
  'headquaters': u'Minneapolis, Minnesota',
  'industry': u'Multi-Utilities & Unregulated Power',
  'sector': u'Utilities',
  'symbol': u'XEL'},
 {'company': u'Xerox Corp.',
  'headquaters': u'Norwalk, Connecticut',
  'industry': u'IT Consulting & Services',
  'sector': u'Information Technology',
  'symbol': u'XRX'},
 {'company': u'Xilinx Inc',
  'headquaters': u'San Jose, California',
  'industry': u'Semiconductors',
  'sector': u'Information Technology',
  'symbol': u'XLNX'},
 {'company': u'XL Capital',
  'headquaters': u'Hamilton, Bermuda',
  'industry': u'Property & Casualty Insurance',
  'sector': u'Financials',
  'symbol': u'XL'}, 
```

如果有兴趣，您可以在此处获取更多信息[http://skillachie.github.io/finsymbols/](http://skillachie.github.io/finsymbols/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-25T22:35:14.720

使用 python，你可以试试我刚刚写的这个代码片段（有点难看，但可以）。（它实际上返回 502 个代码。这是正确的）

```
 from urllib import request
    from bs4 import BeautifulSoup
    import datetime
    import dateutil.relativedelta as dr
    import pandas as pd

    def get_constituents():
        # URL request, URL opener, read content
        req = request.Request('http://en.wikipedia.org/wiki/List_of_S%26P_500_companies')
        opener = request.urlopen(req)
        content = opener.read().decode() # Convert bytes to UTF-8

        soup = BeautifulSoup(content)
        tables = soup.find_all('table') # HTML table we actually need is tables[0] 

        external_class = tables[0].findAll('a', {'class':'external text'})

        tickers = []

        for ext in external_class:
            if not 'reports' in ext:
                tickers.append(ext.string)

        return tickers 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T19:10:07.747

我发现[http://finviz.com/export.ashx?v=152&f=idx_sp500&ft=1&ta=1&p=d&r=1&c=1](http://finviz.com/export.ashx?v=152&f=idx_sp500&ft=1&ta=1&p=d&r=1&c=1)

:-)

但我还没有找到 Finviz API 文档。

:-(

Bloomberg 似乎有一个[开放的 api](http://www.openbloomberg.com/open-api/)。如果您四处挖掘，可能会找到您需要的数据。

# c++ - 将现有的 Netbeans C++ 项目更改为 Qt Application

> ID：13769282
> 
> 赞同：0
> 
> 时间：2012-12-07T18:56:35.170
> 
> 标签：c++, qt, netbeans

我有一个现有的 Netbeans C++ 项目，我想更改为 Netbeans Qt-Application。有没有一种简单的方法可以做到这一点，还是我必须重新导入我的所有课程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T20:00:44.007

我不知道有什么方法可以在创建 netbeans 项目后对其进行更改。我只想制作一个新的 Qt 应用程序项目。然后您可以右键单击项目名称并选择“从文件夹中添加现有项目...”。这将允许您一次导入整个文件夹的代码文件。在添加之前，我会将所有代码从旧项目文件夹复制到新项目文件夹中，因此项目代码都在同一个地方。希望这可以帮助。

# php - preg_match 获取包含 123- 和 .txt 之间任何字符的文件？

> ID：13769287
> 
> 赞同：3
> 
> 时间：2012-12-07T18:56:51.270
> 
> 标签：php, regex, preg-match

我需要使用 preg_match 来获取匹配某个条件的文件。例如，我想查找一个名为“123-stack-overflow.txt”的文件。在 123- 之后和 .txt 之前可以有任何字符。

如何修改它以使其正常工作？

```
preg_match("/^$ID-(.+).txt/" , $name, $file); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:00:31.843

正则表达式`^123-.+\.txt$`

```
^       # Match start of string
123-    # Match the literal string 123-
(.+)    # Match anything after (captured)
\.txt   # Match the literal string .txt 
$       # Match end of string 
```

php:

```
$str="123-stack-overflow.txt";

preg_match('/^123-(.+)\.txt$/',$str,$match);
echo $match[0];
echo $match[1];

>>> 123-stack-overflow.txt
>>> stack-overflow 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T19:09:22.303

```
//^ beginning of line<br/>
//preg_quote($ID, '/') Properly escaped id, in case it has control characters <br/>
//\\- escaped dash<br/>
//(.+) captured file name w/out extension <br/>
//\.txt extension<br/>
//$ end of line

    preg_match("/^".preg_quote($ID, '/')."\\-(.+)\\.txt$/" , $name, $file); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T19:03:10.447

你必须逃跑。宪章

```
preg_match("/^$ID-(.+).txt/" , $name, $file); 
```

应该

```
preg_match("/^$ID-(.+)\.txt^/U" , $name, $file); 
```

如果你想匹配每个数字而不是 $ID 你可以使用

```
preg_match("/^[0-9]+-(.+)\.txt^/U" , $name, $file); 
```

# python - 如何使用 Python/Django 添加新的对象属性

> ID：13769290
> 
> 赞同：4
> 
> 时间：2012-12-07T18:57:02.383
> 
> 标签：python, django

**全面披露：**我只是在学习 Django

我们网站的主页显示最近的博客文章。其中`views.py`有一个类定义了可以调用的属性，`post.get_attribute`用于调用主页上的最近帖子。我正在尝试在模型中添加一个新属性，`featured_image`但无法让它在主页上呈现。

```
# From models.py
featured_image = models.ImageField(_('featured image'), 
                                    upload_to='images/posts', 
                                    blank=True, null=True)

# Added featured_image to class in views.py
def get_posts(request, post_type):
    if post_type == 'personal':
        posts = list(Post.personal_objects.all().values('title', 'slug',
                                                       'author__username',
                                                       'views', 
                                                       'featured_image'))[:8]
    elif post_type == 'business':
        posts = list(Post.business_objects.all().values('title', 'slug', 
                                                        'author__username',  
                                                        'views', 
                                                        'featured_image'))[:8]
    else:
        raise Http404
    return HttpResponse(json.dumps(posts), mimetype='application/json') 
```

我如何尝试在以下位置调用特色图片`home.html`：

```
<a href="{{ post.get_absolute_url }}">
    <img src="{{ post.get_featured_image_url }}" />
</a> 
```

我缺少什么来获取这些图像？真的很感激任何见解。有关更广泛的上下文，请访问[此链接。](http://dev.knowyourbank.com?python4life)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:05:29.167

通过调用模型字段获取模板中的图像

```
{{ post.featured_image }} 
```

# java - JVM如何读取系统属性？

> ID：13769298
> 
> 赞同：3
> 
> 时间：2012-12-07T18:57:29.683
> 
> 标签：java, properties, operating-system, jvm, native

我在`System`课堂上发现了这个，但我想知道这是如何实现的。

```
 /**
     * System properties. The following properties are guaranteed to be defined:
     * <dl>
     * <dt>java.version         <dd>Java version number
     * <dt>java.vendor          <dd>Java vendor specific string
     * <dt>java.vendor.url      <dd>Java vendor URL
     * <dt>java.home            <dd>Java installation directory
     * <dt>java.class.version   <dd>Java class version number
     * <dt>java.class.path      <dd>Java classpath
     * <dt>os.name              <dd>Operating System Name
     * <dt>os.arch              <dd>Operating System Architecture
     * <dt>os.version           <dd>Operating System Version
     * <dt>file.separator       <dd>File separator ("/" on Unix)
     * <dt>path.separator       <dd>Path separator (":" on Unix)
     * <dt>line.separator       <dd>Line separator ("\n" on Unix)
     * <dt>user.name            <dd>User account name
     * <dt>user.home            <dd>User home directory
     * <dt>user.dir             <dd>User's current working directory
     * </dl>
     */

    private static Properties props;
    private static native Properties initProperties(Properties props); 
```

由于它是本机方法，我假设有一个 C 文件，它可以发挥所有作用。是否有一个特定于操作系统的文件通过 C 中的 getenv() 加载变量，或者是否以某种方式为特定平台硬编码（不管 os.name、os.version 等必须是动态的）？

*如果操作系统是经过修改的 Linux 内核，带有`a`行分隔符或`<foo>`路径分隔符怎么办？`..<foo>..<foo>native<foo>amd_xyz`如果它们甚至在知道路径分隔符之前就存储在下面，JVM 怎么可能知道在哪里搜索这些本地文件？*

有没有办法调查实施？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T19:00:39.863

您可以查看 OpenJDK 中的所有源代码。您的 IDE 可以从 JDK 获得大部分源代码。

我想你是假设有比现在更多的魔法。对于 UNIX 版本，file.separator 很可能按照文档中的建议进行硬编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T19:19:10.877

查看 OpenJDK 源代码。例如，Linux 的文件分隔符定义[如下](http://hg.openjdk.java.net/jdk7/jdk7/hotspot/file/03e1b9fce89d/src/os/linux/vm/os_linux.inline.hpp)：

```
inline const char* os::file_separator() {
  return "/"; 
} 
```

# java - 如何从 PBE 密钥生成器中获取哈希值

> ID：13769301
> 
> 赞同：0
> 
> 时间：2012-12-07T18:57:37.343
> 
> 标签：java, encryption, secret-key

我想使用 PBE 生成其他加密密钥。

```
public SecretKey generateKey(String Ags) throws Exception {
    // make password
    PBEKeySpec keySpec = new PBEKeySpec(this.password.toCharArray(),this.salt,20,56);

    SecretKeyFactory keyFactory = SecretKeyFactory
            .getInstance("PBE");
    SecretKey key = keyFactory.generateSecret(keySpec);
    System.out.println();

    /*
    KeyGenerator kg = KeyGenerator.getInstance("AES");
    kg.init(k);
    //
    SecretKey FINAL_key = new SecretKeySpec(key.getEncoded(), "AES");
    */
    return null;
} 
```

我的基本想法是先使用`PBEKeySpec`and`SecretKeyFactory`生成 PBE 密钥，然后获取前几个字节，比如说 10 个字节，来生成 AES 密钥。但是，在网上搜索后，我仍然不知道如何获得最终的密钥作为`byte[]`. `key.getEncoded()`只会给我输入密码。我如何获得最终的密钥`byte[]`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T20:48:45.143

据我通过阅读[文档](http://massapi.com/class/pb/PBEParameterSpec.html)了解，我了解如果要创建 AES 密钥，则需要为算法提供至少 128 位的密钥。

```
SecretKeySpec secretKeySpec = new SecretKeySpec(key, "AES"); 
```

所以要生成密钥为什么你坚持从 PBE 密钥中获取 128 位，而不是你可以使用

```
byte[] key = (Password+Username).getBytes("UTF-8"); // depends on your implementation
MessageDigest sha = MessageDigest.getInstance("SHA-1");
key = sha.digest(key);
key = Arrays.copyOf(key, 16); // AES uses 16 byte of key as a parameter (?) 
```

您还可以使用 PBE 密钥来提供 SHA 并以这种方式获取字节。好的，让我们转向您的问题，这是我的安全文件夹中的完整工作代码，我记得这对我有用，请随时提出任何问题。在下面的代码中，如果您检查，您会看到密钥是使用**pbeKeySpec**生成的， 但是当我查看代码时，我看不出您的错误是什么。

```
public void testPBEWithSHA1AndAES() throws Exception {
        String password = "test";
        String message = "Hello World!";

        byte[] salt = { (byte) 0xc7, (byte) 0x73, (byte) 0x21, (byte) 0x8c,
                (byte) 0x7e, (byte) 0xc8, (byte) 0xee, (byte) 0x99 };
        byte[] iv = { (byte) 0xc7, (byte) 0x73, (byte) 0x21, (byte) 0x8c,
                (byte) 0x7e, (byte) 0xc8, (byte) 0xee, (byte) 0x99,
                (byte) 0xc7, (byte) 0x73, (byte) 0x21, (byte) 0x8c,
                (byte) 0x7e, (byte) 0xc8, (byte) 0xee, (byte) 0x99 };

        int count = 1024;
        // int keyLength = 256;
        int keyLength = 128;

        String cipherAlgorithm = "AES/CBC/PKCS5Padding";
        String secretKeyAlgorithm = "PBKDF2WithHmacSHA1";
        SecretKeyFactory keyFac = SecretKeyFactory
                .getInstance(secretKeyAlgorithm);
        PBEKeySpec pbeKeySpec = new PBEKeySpec(password.toCharArray(), salt,
                count, keyLength);
        SecretKey tmp = keyFac.generateSecret(pbeKeySpec);
        SecretKey secret = new SecretKeySpec(tmp.getEncoded(), "AES");
        Cipher ecipher = Cipher.getInstance(cipherAlgorithm);
        ecipher.init(Cipher.ENCRYPT_MODE, secret, new IvParameterSpec(iv));

        // decrypt
        keyFac = SecretKeyFactory.getInstance(secretKeyAlgorithm);
        pbeKeySpec = new PBEKeySpec(password.toCharArray(), salt, count,
                keyLength);
        tmp = keyFac.generateSecret(pbeKeySpec);
        secret = new SecretKeySpec(tmp.getEncoded(), "AES");
        // AlgorithmParameters params = ecipher.getParameters();
        // byte[] iv = params.getParameterSpec(IvParameterSpec.class).getIV();
        Cipher dcipher = Cipher.getInstance(cipherAlgorithm);
        dcipher.init(Cipher.DECRYPT_MODE, secret, new IvParameterSpec(iv));

        byte[] encrypted = ecipher.doFinal(message.getBytes());
        byte[] decrypted = dcipher.doFinal(encrypted);
        assertEquals(message, new String(decrypted));

        ByteArrayOutputStream out = new ByteArrayOutputStream();
        CipherOutputStream cipherOut = new CipherOutputStream(out, ecipher);
        cipherOut.write(message.getBytes());
        StreamUtils.closeQuietly(cipherOut);
        byte[] enc = out.toByteArray();

        ByteArrayInputStream in = new ByteArrayInputStream(enc);
        CipherInputStream cipherIn = new CipherInputStream(in, dcipher);
        ByteArrayOutputStream dec = new ByteArrayOutputStream();
        StreamUtils.copy(cipherIn, dec);
        assertEquals(message, new String(dec.toByteArray()));
    } 
```

# javascript - 英雄轮播问题

> ID：13769302
> 
> 赞同：-1
> 
> 时间：2012-12-07T18:57:45.550
> 
> 标签：javascript, html, css, slider, carousel

我试图实现的滑块/轮播是这样的：http: [//www.paulwelsh.info/jquery-plugins/hero-carousel/](http://www.paulwelsh.info/jquery-plugins/hero-carousel/)

我知道我必须为它添加 HTML 代码，由于缺乏设计网站的经验（大约一个月前开始我的课程），我无法做到这一点。你能帮我解决我应该添加的 HTML 代码吗？这是我的 HTML、CSS 和 Javascript。HTML 是我认为它应该看起来的样子，这显然是错误的。

**HTML**

```
<div class="hero">
<div class="hero-carousel">

<article>
  <img src="images/deadmau5/slide1.jpg" />

</article>

<article>
  <img src="images/deadmau5/slide2.jpg" />

</article>

<article>
  <img src="images/deadmau5/slide3.jpg" />

</article>
<article>

  <img src="images/deadmau5/slide4.jpg" />

</article>

</div>
</div>
<script>
    $(document).ready(function(){
        $('.hero-carousel').heroCarousel({
            easing: 'easeOutExpo',
            css3pieFix: true
        });
    });
</script> 
```

**CSS**

```
.hero {
width: 100%;
position: relative;
overflow: hidden;
margin-bottom: 48px;
}

.hero-carousel article {
    width: 980px;
    margin: 0 auto;
    height: 480px;
    display: block;
    float: left;
    position: relative;
    }

.hero-carousel-container article {
    float: left;
    }

    .hero-carousel article img{
        position: absolute;
        top: 0;
        left: 0;
        z-index: 1;
        }

    .hero-carousel article .contents {
        position: relative;
        z-index: 2;
        top: 72px;
        left: 48px;
        list-style: none;
        color: #000;
        width: 556px;
        padding: 20px;

        background: rgba(255,255,255,0.8);
        -pie-background: rgba(255,255,255,0.8);

        -moz-border-radius: 20px;
        -webkit-border-radius: 20px;
        border-radius: 20px;

        behavior: url(/assets/PIE.htc);
        }

    .hero-carousel-nav {
        width: 980px;
        position: absolute;
        bottom: 0;
        left: 50%;
        margin-left: -490px;
        z-index: 2;
        }

        .hero-carousel-nav li {
            position: absolute;
            bottom: 48px;
            right: 48px;
            list-style: none;
            }

        .hero-carousel-nav li.prev {
            left: 48px;
            right: auto;
            }

        .hero-carousel-nav li a {
            background: #D21034;
            color: #fff;
            border: none;
            outline: none;
            display: block;
            float: left;
            padding: 5px 20px;

            -moz-border-radius: 20px;
            -webkit-border-radius: 20px;
            border-radius: 20px;
            behavior: url(/assets/PIE.htc);
            }

        .hero-carousel-nav li a:hover { 
            background: #89051C;
            }

        .hero-carousel-nav li a:active,
        .hero-carousel-nav li a:focus { 
            border: none;
            outline: none;
            } 
```

**Javascript**

```
jQuery.fn.heroCarousel=function(a){a=jQuery.extend({animationSpeed:1000,navigation:true,easing:"",timeout:5000,pause:true,pauseOnNavHover:true,prevText:"Previous",nextText:"Next",css3pieFix:false,currentClass:"current",onLoad:function(){},onStart:function(){},onComplete:function(){}},a);if(jQuery.browser.msie&&parseFloat(jQuery.browser.version)<7){a.animationSpeed=0}return this.each(function(){var k=jQuery(this),b=k.children();currentItem=1;childWidth=b.width();childHeight=b.height();if(b.length>2){b.each(function(m){if(a.itemClass){jQuery(this).addClass(a.itemClass)}});b.filter(":first").addClass(a.currentClass).before(b.filter(":last"));var d=Math.round(childWidth*k.children().length),l="-"+Math.round(childWidth+Math.round(childWidth/2))+"px";k.addClass("hero-carousel-container").css({position:"relative",overflow:"hidden",left:"50%",top:0,"margin-left":l,height:childHeight,width:d});k.before('<ul class="hero-carousel-nav"><li class="prev"><a href="#">'+a.prevText+'</a></li><li class="next"><a href="#">'+a.nextText+"</a></li></ul>");var e=k.prev(".hero-carousel-nav"),h;if(a.timeout>0){var j=false;if(a.pause){k.hover(function(){j=true},function(){j=false})}if(a.pauseOnNavHover){e.hover(function(){j=true},function(){j=false})}function c(){if(!j){e.find(".next a").trigger("click")}}h=window.setInterval(c,a.timeout)}e.find("a").data("disabled",false).click(function(p){p.preventDefault();var m=jQuery(this),n=m.parent().hasClass("prev"),o=k.children();if(m.data("disabled")===false){a.onStart(k,e,o.eq(currentItem),a);if(n){f(o.filter(":last"),"previous")}else{f(o.filter(":first"),"next")}m.data("disabled",true);setTimeout(function(){m.data("disabled",false)},a.animationSpeed+200);if(a.timeout>0){window.clearInterval(h);h=window.setInterval(c,a.timeout)}}});function f(m,q){var o=parseFloat(k.position().left),n=parseFloat(k.css("margin-left"));if(q==="previous"){m.before(m.clone().addClass("carousel-clone"));k.prepend(m);var p=Math.round(n-childWidth);var r="+="}else{m.after(m.clone().addClass("carousel-clone"));k.append(m);var p=l;var r="-="}if(a.css3pieFix){g(jQuery(".carousel-clone"))}k.css({left:o,width:Math.round(d+childWidth),"margin-left":p}).animate({left:r+childWidth},a.animationSpeed,a.easing,function(){k.css({left:"50%",width:d,"margin-left":n});jQuery(".carousel-clone").remove();i()})}function g(n){var m=n.attr("_pieId");if(m){n.attr("_pieId",m+"_cloned")}n.find("*[_pieId]").each(function(o,p){var q=$(p).attr("_pieId");$(p).attr("_pieId",q+"_cloned")})}function i(){var m=k.children();m.removeClass(a.currentClass).eq(currentItem).addClass(a.currentClass);a.onComplete(k,k.prev(".hero-carousel-nav"),m.eq(currentItem),a)}if(jQuery.browser.msie){e.find("a").attr("hideFocus","true")}a.onLoad(k,e,k.children().eq(currentItem),a)}})}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:50:50.167

您必须将标记更改为：

```
<div class="hero">
  <div class="hero-carousel">
    <article>
      <img src="slide-1.jpg" />
      <div class="contents">text goes here</div>
    </article>
    <article>
      <img src="slide-1.jpg" />
      <div class="contents">text goes here</div>
    </article>
  </div>
</div> 
```

不要忘记添加`jQuery`标记，例如：

```
<script>
        $(document).ready(function(){
            $('.hero-carousel').heroCarousel({
                easing: 'easeOutExpo',
                css3pieFix: true
            });
        });
    </script> 
```

这应该适合你。

**编辑**- 尝试使用`inspect element`或`view source`帮助您解决类似问题。

# c++ - 带顶点着色器的定点算法

> ID：13769303
> 
> 赞同：4
> 
> 时间：2012-12-07T18:57:48.320
> 
> 标签：c++, algorithm, opengl, game-engine

如果我使用定点（或 1 描述最小游戏单位的整数）来描述我的顶点向量，我该如何设置 OpenGL/特征变换来使用它？如果我在我的顶点着色器中这样做：

```
gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(in_Position, 1.0) 
```

如果我将 in_Position 作为 GL_INT 的 vec3 传入，而我将矩阵作为 GL_FLOAT mat4 传入，是否会进行正确的转换？有性能成本吗？

是否可以将我的转换矩阵也准备为定点？

这是通过 2D 游戏完成的，我认为这比 3D 更可行。我真的更喜欢准确性，因为当事物远离原点时，大型地图上的位置似乎会下降。我意识到我可能只将对象位置设为整数而顶点仍被描述为浮点数。但是，我认为我的碰撞方案更适用于定点顶点。性能差异一般是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T09:03:26.500

这将意味着一个 int 到 float 的转换，这将惩罚你的表现。您应该在 CPU 到 GPU 复制时将 in_Position 转换为 vec3。如果您使用 Matrix 对象将它们存储在 CPU 上，则可以使用以下命令进行转换：

```
MatrixXf data_as_float = data_as_int.cast<float>(); 
```

然后用 data_as_float 调用 glBufferData。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T14:48:11.107

好的，经过一些实验，我已经确定了一个解决方案。

```
gl_Position = projviewMatrix * vec4(ivec3(in_Position - camera), 1.0); 
```

`camera`是`uniform uvec3`,`in_Position`是`uvec3`位置输入。平移是作为单独的操作执行的，而视图缩放、旋转和投影则像往常一样使用`mat4`浮点数 ( ) 完成。`projviewMatrix`

必须注意确保使用正确的类型和输入命令 ( `glVertexAttribIPointer`)。OpenGL 似乎*非常*渴望将数据转换为浮点数，但将数据保留为整数类型，因此任何小错误都会导致输入错误。

`projviewMatrix`在定点中执行乘法是不可行的，因为您无法访问用于乘法的中间 64 位存储。只有当使用的位`in_Position`和`projviewMatrix`总和为 32 时，它才会接近可用性，但考虑到渲染的坐标将非常接近原点并且没有获得额外的操作（乘法后仍需要移位，GPU 将花费与浮点数一样长的时间） ints)，没有理由在位置被相机居中后执行定点运算。

当然，这忽略了实际操作整数位置数据的痛苦。我真的不推荐它。

# spring-mvc - 没有重定向的 Spring Web 应用程序

> ID：13769309
> 
> 赞同：0
> 
> 时间：2012-12-07T18:57:58.640
> 
> 标签：spring-mvc, jdeveloper

我正在尝试创建一个 Spring Web 应用程序。应用程序应该直接转到控制器，并且不应该有任何欢迎文件。我正在尝试的是

在这个控制器的顶部，我有注释

```
@RequestMapping(value = "/", method = RequestMethod.GET) 
```

我的欢迎文件列表有根上下文

```
<welcome-file-list>  
        <welcome-file>/</welcome-file>
    </welcome-file-list> 
```

所以我的应用程序应该运行为：localhost:7101/samplespring/

但是，问题是当我尝试在 jdeveloper 中运行应用程序时，我需要设置一个默认目标，我显然不能在这里。

如何进行。

谢谢 n 问候， 拉希特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T21:22:16.843

我会删除该`<welcome-file-list>`条目并确保您`servlet-mapping`在 web.xml 中看起来像（注`<url-pattern>`）：

```
<servlet>
    <servlet-name>mainDispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>mainDispatcher</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

# google-maps - 使用 Markermanager 正确渲染标记颜色和文本

> ID：13769310
> 
> 赞同：2
> 
> 时间：2012-12-07T18:58:00.803
> 
> 标签：google-maps, google-maps-api-3, markermanager

我正在尝试使用 MarkerManager 显示地图标记列表。我传入了一个 StyledMarkers 数组，其中包含文本的升序数字和各种颜色。当标记显示时，它们都显示相同的数字和颜色。它始终是添加到列表中的最后一项的颜色和编号。

注意：此代码位于几年前构建的网页上，当时运行良好。是否对 Google Maps API 进行了更改，导致我正在运行的 MarkerManager 版本过时。我做了一个谷歌搜索，并没有出现任何类似的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T20:51:17.710

v3.10 中的更改破坏了 MarkerManager 和 StyledMarker。我相信这两个实用程序库的固定版本都已发布。

浏览[问题列表](http://code.google.com/p/gmaps-api-issues/issues)星标任何适用于您的问题；一些已在实用程序库的更新中得到解决。如果有任何不存在的问题，请创建一个。

这需要在 v3.9 退役之前修复。

# c# - 是否有任何事件不会被取消注册的条件？

> ID：13769316
> 
> 赞同：0
> 
> 时间：2012-12-07T18:58:24.400
> 
> 标签：c#, events

我正在构造函数中注册一个事件......

_data.WeldDataEvent += WeldDataEvent；

并在 Page Unloaded 事件调用的 Cleanup() 方法中取消注册...

_data.WeldDataEvent -= 焊接数据事件；

我在每个位置都设置了一个断点，当我启动视图时，它只注册一次。并在关闭时被取消注册。

但是，在第二次开始之后，我现在触发了 2 个事件。在第 3 次开始后，我现在触发了 3 个事件。

是否有任何事件不会被取消注册的条件？有没有办法验证事件是否未注册？

**后续** 使用 ANTS 内存分析器，没有对我的 ViewModel 或 View 的保留引用......所以我知道它们正在被垃圾收集......即......没有事件被取消注册......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:48:01.523

通过一个模拟类，我每次关闭并重新启动它时都会创建一个新的模拟器。这些事件是真实的。

# algorithm - 算法：矩阵遍历变体

> ID：13769318
> 
> 赞同：3
> 
> 时间：2012-12-07T18:58:27.003
> 
> 标签：algorithm, data-structures

有一个 N × N 的方形网状网格线，如下图所示。网格的节点位于点 (X, Y)，其中 X 和 Y 是从 0 到 N-1 的整数。电流流过电网，在 (0, 0) 和 (N-1, N-1) 的节点之间。 ![在此处输入图像描述](../Images/9972bb51b78c4f0a6ff924ae11c6f3f2.png)

最初，所有电线都传导电流，但电线以每秒一根的速度烧毁。烧坏由三个零索引的整数数组 A、B 和 C 来描述，每个数组的大小为 M。对于每个时刻 T (0 ≤ T < M)，在第 T 秒内，节点之间的连线 (A[T ]、B[T]) 和：

```
 (A[T], B[T] + 1), if C[T] = 0 or
    (A[T] + 1, B[T]), if C[T] = 1 
```

烧坏了。您可以假设这些数组描述了现有的电线，并且没有电线烧毁超过一次。你的任务是确定电流何时停止在 (0,0) 和 (N-1,N-1) 的节点之间流动。

写一个函数：

```
int wire_burnouts(int N, int A[], int M, int B[], int M2, int C[], int M3); 
```

即，给定整数 N 和数组 A、B 和 C，返回电流在 (0, 0) 和 (N-1, N-1) 的节点之间停止流动的秒数。如果即使在所有 M 根电线烧坏后电流仍继续流动，则该函数应返回 -1。

例如，给定 N = 4、M = 9 和以下数组：

A[0] = 0 B [0] = 0 C[0] = 0
A [1](https://i.stack.imgur.com/o6Rxp.png) = 1 B [1](https://i.stack.imgur.com/o6Rxp.png) = 1 C [1](https://i.stack.imgur.com/o6Rxp.png) = 1
A [2](https://i.stack.imgur.com/9N5b8.png) = 1 B [2](https://i.stack.imgur.com/9N5b8.png) = 1 C [2](https://i.stack.imgur.com/9N5b8.png) = 0
A[3] = 2 B [ 3] = 1 C[3] = 0
A[4] = 3 B [4] = 2 C[4] = 0
A[5] = 2 B [5] = 2 C[5] = 1
A[6] = 1 B [6] = 3 C[6] = 1
A[7] = 0 B [7] = 1 C[7] = 0
A[8] = 0 B [8] = 0 C[8] = 1

您的函数应该返回 8，因为就在第八根线烧断之后，(0, 0) 和 (N-1, N-1) 处的节点之间没有连接。这种情况如下图所示：

![在此处输入图像描述](../Images/619a2795bb715186be05da397b6cb777.png)

给定 N = 4、M = 1 和以下数组：

A[0] = 0 B [0] = 0 C[0] = 0

您的函数应该返回 -1，因为烧断单根线不会破坏 (0, 0) 和 (N-1, N-1) 处的节点之间的连接。

假使，假设：

```
 N is an integer within the range [1..400];
    M is an integer within the range [0..2*N*(N−1)];
    each element of array A is an integer within the range [0..N−1];
    each element of array B is an integer within the range [0..N−1];
    each element of array C is an integer within the range [0..1]. 
```

复杂：

```
 expected worst-case time complexity is O(N2*log(N));
    expected worst-case space complexity is O(N2), beyond input storage (not counting the storage required for input arguments). 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T19:27:50.453

构建完整的电线网格。然后销毁第一条 M/2 线。使用深度优先搜索检查连通性。如果仍然连接，则再销毁 M/4 根电线。如果没有，请恢复 M/4 最近损坏的电线。继续这个二分搜索，直到找到合适的 T。

时间复杂度取决于深度优先搜索的次数：O(log M) <= O(log N) 和每个深度优先搜索的复杂度：O(N ² )。

* * *

[使用不相交集数据结构](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)可以改善以前的结果。

构建完整的电线网格。然后按照数组 A、B 和 C 的指示销毁 M 条线。将网格的剩余连接组件添加到不相交集数据结构中。

然后依次恢复连线，从这些数组的最后一个元素开始，一直到它们的第一个元素。这样做时，找到剩余在不相交集结构中的集合的并集。当包含节点 (0, 0) 和 (N-1, N-1) 的集合连接在一起时停止。

如果不相交集数据结构使用*秩并集*和*路径压缩*方法，则整个算法的时间复杂度为 O(N ² α(N))，其中 α 是反阿克曼函数。这实际上与 O(N ² ) 一样好。

* * *

如果我们使用与原始网格线对偶的图，则可能会改善先前的结果：对偶图的节点对应于原始图的面，对偶图的每条边与原始图的对应边相交。将需要两个额外的节点：节点 L 连接到对偶图的每个顶部和左侧节点，节点 R 连接到每个底部和右侧节点。

                                                    ![对偶图](../Images/f261c5feeec0b480b7a7ef05ffab5c4c.png)

如果此对偶图包含从 L 到 R 的路径，则节点 (0, 0) 和 (N-1, N-1) 无法相互连接。如果没有从 L 到 R 的路径，则节点 (0, 0) 和 (N-1, N-1) 是连接的。

最初对偶图是完全断开的。在从原始图中删除边的同时，我们将相应的边添加到对偶图中。同时我们更新了不相交集数据结构。一旦包含节点 L 和 R 的集合连接在一起，就停止。

该算法只需要访问其输入数组 A、B 和 C 的元素一次，这使其成为[在线算法](http://en.wikipedia.org/wiki/Online_algorithm)。

时间复杂度的最大限制因素现在是对偶图节点数组的初始化时间：O(N ² )。如果有办法避免这种初始化，我们会得到渐近更有效的 O(M α(M)) 算法。初始化问题有几种方法：

*   使用[这个技巧](http://eli.thegreenplace.net/2008/08/23/initializing-an-array-in-constant-time/)在 O(1) 时间内初始化数组。这给出了 O(M α(M)) 最坏情况时间算法。但在实践中，几乎不可能在不初始化内存的情况下分配内存（出于安全原因）。
*   初始化数组一次，然后多次使用该算法。这给出了 O(M α(M)) 摊销时间算法。
*   使用哈希表存储对偶图的节点。这给出了 O(M α(M)) 的预期时间算法。这也将空间复杂度提高到 O(M)。

# php - 从数据库加载 xml 以用于多个功能

> ID：13769322
> 
> 赞同：0
> 
> 时间：2012-12-07T18:58:32.420
> 
> 标签：php, xml, javascript

我有一个数据库，我在其中使用 php 按 ID 随机化信息并通过 xml 发送出去。我的问题是我只想获取 xml 一次并将其存储以用于至少 2 个函数...一个运行 onload 的函数以获取 xml 的第一行，另一个将在每次按下按钮时运行以访问下一行 xml 直到结束。我的 2 个函数是 loadfirst() 和 loadnext()。loadfirst() 完美运行，但我不确定如何将 xml 数据传递给 loadnext()。现在我只是在页面加载上使用 loadfirst() 并在按钮按下时使用 loadfirst()，但我最终每次都从数据库中创建新的 xml，这会导致随机化问题并且效率极低。任何帮助，将不胜感激。

```
var places;
var i = 0;

function loadXML(){

downloadUrl("places.php", function(data){
    places = data.responseXML;
        getFeatured(i);
});

}

function getFeatured(index){
   var id = places[index].getAttribute("id");
    var name = places[index].getAttribute("name");
    var location = places[index].getAttribute("location");
    var imgpath = places[index].getAttribute("imgpath");
    var tags = places[index].getAttribute("tags");

}

    function getPrev() {
    i--;
    getFeatured(i);
}

 function getNext() {
    i++;
         getFeatured(i);
    }

function downloadUrl(url, callback) {
     var request = window.ActiveXObject ?
        new ActiveXObject('Microsoft.XMLHTTP') :
        new XMLHttpRequest;
  request.onreadystatechange = function() {
        if (request.readyState == 4) {
            request.onreadystatechange = doNothing;
            callback(request, request.status);
        }
     };
     request.open('GET', url, true);
     request.send(null);
   }

    function doNothing() {} 
```

loadnext() 将与 loadfirst() 非常相似，我只是遇到了传递 xml 数据的问题，这样我就可以使用它而无需再次访问数据库。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:15:22.377

将您的`xml` 和设置`i`在公共范围内。然后你所要做的就是增加/减少 i 并从 XML 中重新读取数据。像这样的东西：

```
var xml;
var xml_idx = 0; // replaces your i counter

function loadXML() {
    downloadUrl ("places.php", function(data) {
        xml = data.responseXML;
    )};
}

function loadItem(index) {
    var id = xml[index].getAttribute("id");
    var name = xml[index].getAttribute("name");
    var location = xml[index].getAttribute("location");
    var imgpath = xml[index].getAttribute("imgpath");
    var tags = xml[index].getAttribute("tags");
    // do something with this data
}

function loadCurrentItem() {
    loadItem(xml_idx);
}

function loadNextItem() {
    xml_idx++;
    loadItem(xml_idx);
}

function loadPreviousItem() {
    xml_idx--;
    loadItem(xml_idx);
}

// usage
loadXML();  // do this first to populate xml variable
loadItem(xml_idx); // loads first item (i=0)
loadCurrentItem(); // loads i=0
loadNextItem(); // loads i=1
loadNextItem(); // loads i=2
loadPreviousItem(); // loads i=1 
```

如果你真的想变得花哨（并保持全局命名空间更干净），你可以很容易地将它变成一个类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:12:04.083

使用全局变量（项目 - 项目数组，迭代器 - 计数器）来存储所有函数可用的数据。
尝试这样的事情：

```
items = false;
iterator = 0;

function loadfirst(){

downloadUrl ("places.php", function(data) {
    var i = 0;
    var xml = data.responseXML;
    var places = xml.documentElement.getElementsByTagName("place");
    var id = places[i].getAttribute("id");
    var name = places[i].getAttribute("name");
    var location = places[i].getAttribute("location");
    var imgpath = places[i].getAttribute("imgpath");
    var tags = places[i].getAttribute("tags");

    items = places;
    iterator++;
)};
}

function loadnext(){

    var i = iterator;
    var id = items[i].getAttribute("id");
    var name = items[i].getAttribute("name");
    var location = items[i].getAttribute("location");
    var imgpath = items[i].getAttribute("imgpath");
    var tags = items[i].getAttribute("tags");

    iterator++;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T21:05:16.333

您应该将所有这些包装到一个对象中以控制范围和数据状态。（下面未经测试的代码，它应该只是说明一个可能的模式和使用的接口。）

```
function PlacesScroller(url, callback) {
    this.url = url;
    this.data = null;
    this._index = null;
    this.length = 0;
    var self = this;
    downloadURL(this.url, function(result, status) {
        if (Math.floor(status/100)===2) {
            self.setData(result);
        }
        if (callback) {
            callback(self, result);
        }
    });
}
PlacesScroller.prototype.setData(xmldom) {
    this._index = 0;
    // this may require changing; it depends on your xml structure
    this.data = [];
    var places = xmldom.getElementsByTagName('place');
    for (var i=0; i<places.length; i++) {
        this.data.push({
            id : places[i].getAttribute('id'),
            name : places[i].getAttribute('name')
            // etc
        });
    }
}
PlacesScroller.prototype.getPlaceByIndex = function(index) {
    if (this.data) {
        return this.data[index];
    } else {
        return null;
    }
}
PlacesScroller.prototype.getCurrentFeature = function() {
    return this.getPlaceByIndex(this._index);
}
PlacesScroller.prototype.addToIndex(i) {
   // This sets the index forward or back
   // being careful not to fall off the end of the data
   // You can change this to (e.g.) cycle instead
   if (this.data===null) {
        return null;
   }
   var newi = i+this._index;
   newi = Math.min(newi, this.data.length);
   newi = Math.max(0, newi);
   this._index = newi;
   return this._index;
}
PlacesScroller.prototype.getNextFeature = function() {
    this.addToIndex(1);
    return this.getCurrentFeature();
}
PlacesScroller.prototype.getPreviousFeature = function() {
    this.addToIndex(-1);
    return this.getCurrentFeature();
} 
```

然后初始化它并像这样使用它：

```
var scroller = new PlacesScroller('places.php', function(scrollerobject, xmlresult){
   // put any initialization code for your HTML here, so it can build after
   // the scrollerobject gets its data.
   // You can also register event handlers here

   myNextButton.onclick = function(e){
        var placedata = scrollerobject.getNextFeature();
        myPictureDisplayingThing.update(placedata);
   }
   // etc
}); 
```

# java - 不确定通过 URLConnection 与多线程请求同步什么

> ID：13769328
> 
> 赞同：0
> 
> 时间：2012-12-07T18:58:54.393
> 
> 标签：java, multithreading, outputstream, urlconnection

我的问题是，因为我正在创建多个线程来向同一个 OutputStream 发送唯一请求，所以我只需要创建 1 个引用（或同步）的变量。我的教授没有介绍 URLConnections。

当我只运行 1 个线程时，它工作正常，但多个线程只为第一个产生输出。

非常感谢您的帮助。

==================================================== ========================

在 URLTest 的构造函数内部：

```
/*URL*/ link = new URL("url removed");
/*URLConnection*/ connect = link.openConnection();
connect.setDoOutput(true); 
```

我在 URLTest 中执行这段代码：

```
for (int i = 0; i < 2; i++) {
    Thread t = new Thread(new ThreadTest());
    /*ArrayList<Thread>*/ a.add(t);
    t.start();
} 
```

ThreadTest 中的 run() 实现 Runnable：

```
PrintWriter osw = new PrintWriter(connect.getOutputStream());
osw.write("query removed");
osw.close();
BufferedReader in = new BufferedReader(new InputStreamReader(
        connect.getInputStream()));

String s;
while ((s = in.readLine()) != null)
    System.out.println(s); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T18:31:37.283

问题是每次创建新线程时都必须实例化 URLConnection。

# ios - iOS核心数据“加入”两个“表”

> ID：13769333
> 
> 赞同：2
> 
> 时间：2012-12-07T18:59:04.073
> 
> 标签：ios, core-data

我必须在核心数据中设置实体：

游戏和玩家

游戏 - 看起来像这样（简化）：board userid

PLAYERS 用户名

PLAYERS 是独一无二的

我需要选择 GAMES 并将 PLAYERS.name 列添加到此结果中。

我已经设置了所有核心数据和关系，并且可以从“表”中进行选择并将其放入数组和 Tableview 中。

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"GAMES" inManagedObjectContext:context];
[fetchRequest setEntity:entity];
GamesARRAY =[context executeFetchRequest:fetchRequest error:&error]; 
```

等等....

但是我如何选择或访问玩家表中的数据？我知道所有的基础知识和理论，但我真的需要代码示例。不仅仅是答案：使用 NSSet 或类似的..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T19:08:32.023

CoreData 不是数据库。

让我再重复一遍。

## CoreData 不是数据库。

不要把它想成一个。

CoreData 是一个对象关系图管理和持久化框架。

如果您想访问给定游戏中的玩家，为什么要使用`userid`在两个实体中使用一个字段？您应该只使用 CoreData 关系。这样，您甚至不必考虑它，您只需访问游戏中的关系属性，就可以取回您的玩家，反之亦然。

您还应该重命名您的实体。GAMES 和 PLAYERS 作为表名可能有意义，但您不希望`GAMES*`在代码中放置一个代表一个游戏的对象。为什么不直接命名它们`Game`和`Player`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:20:43.467

```
[[game valueForKey:@"player"] valueForKey:@"name"] 
```

或者，如果你已经设置了相关的类，

```
game.player.name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T19:10:22.457

你真的有一个`GAMES`知道一个`PLAYERS`实体的关系吗？如果是这样，对于任何`GAMES`对象，您都可以遍历该关系 ( `game.player`) 以获取游戏玩家对象的属性。我们在 Core Data 中不做这样的 JOIN；Core Data 使用关系来抽象出诸如外键和 JOIN 之类的东西（即使这些是在 SQLite 后端的幕后完成的，例如）。

此外，正如 Kevin 所指出的，`GAMES`并`PLAYERS`打破了 Core Data 实体的合理命名约定。`Game`并且`Player`好多了。

# tree - 如何找到用于构建决策树的连续值范围

> ID：13769338
> 
> 赞同：0
> 
> 时间：2012-12-07T18:59:27.597
> 
> 标签：tree, classification, decision-tree, continuous, mining

我正在构建一个使用具有连续值（双精度值）的字段的决策树。我应该如何创建范围节点来构建树（找到最佳范围值）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:21:11.687

The standard way in growing a decision tree is to find the threshold that minimizes the (weighted) sum of either the entropies or the Gini impurities of the child nodes.

ALGLIB is a good open-source implementation to study when one wants to implement this oneself:

[http://www.alglib.net/dataanalysis/decisionforest.php](http://www.alglib.net/dataanalysis/decisionforest.php)

# ios - UIScrollView 在设备之间更改位置

> ID：13769339
> 
> 赞同：0
> 
> 时间：2012-12-07T18:59:28.243
> 
> 标签：ios, iphone, xcode, ios6

我有一个 UIScrollView，里面有许多 UILabel 和 UITextViews。当我在模拟器中的设备之间切换时，所有周围的元素都保持在正确的位置，但 UIScrollView 会向下移动屏幕并移出位置。

在 3.5 和 4 英寸设备之间切换时会发生这种情况。好主意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:03:53.350

在 Interface Builder 的 Size Inspector 选项卡中检查其自动调整大小设置。

# sql - SQL - 列表中的值，但不在表中

> ID：13769343
> 
> 赞同：-1
> 
> 时间：2012-12-07T18:59:34.670
> 
> 标签：sql, sql-server-2005

如果您有一个名称列表，例如 Ian、Stephen 和一个数据库表，如下所示：

```
Names (table name)
Ian
Stephen
Maria 
```

您可以通过以下查询在列表中找到出现在表中的名称：select * from names where names not in ('Ian','Stephen')。这将返回“玛丽亚”。

如何找到列表中存在但数据库中不存在的值？例如，如果我有一个列表：Ian,Maria,Kevin 和一个表：

```
Names (table name)
Ian
Maria 
```

我如何编写查询以返回 Kevin？我知道我可以将列表加载到一个单独的表中并 LEFT JOIN 它们，但如果有更简单的方法，我会徘徊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:08:31.883

SQL 中没有更简单的方法。做`LEFT JOIN`or`NOT IN`是执行此操作的 SQL 方式，但您需要一个表。现在，您不必创建实际的表。你可以有类似的东西：

```
with names as (
     select 'Ian' as name union all
     select 'Maria' as name union all
     select 'Kevin' as name
)
select *
from names n
where n.name not in (select name from t) 
```

您也可以在 Excel 中执行此操作：

1.  将值放在列中
2.  创建一个`in`列表并运行查询
3.  将结果放在列中
4.  使用`vlookup`或`match`查找差异

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:07:17.790

```
select a.name from
(select "Ian" name from dual
 union
 select "Maria" from dual
 union
 select "Stephen" from dual) a
left outer join Names n using (name)
where n.name is null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T19:07:56.800

```
select * from mytable 
where names in ('kevin', 'maria', 'ian') 
```

## 更新了正确的输入

我想从头开始：$

请看以下内容。但这**不是**最好的查询。但无论如何我都想尝试一下。

参考 * [SQLFIDDLE](http://sqlfiddle.com/#!2/eb1a5/1)

桌子：

```
NAME
john
ian
robin
maria
fen 
```

询问：

```
select x.* from (
select * from names
union all
select 'kevin'
union all 
select 'ian'
union all
select 'maria') as x
where x.name not in 
(select * from names)
; 
```

结果：

```
NAME
kevin 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T19:08:24.553

在 TSQL 中，我会将名称列表加载到表变量中，并将其连接到您的 Names 表中以进行任一版本的搜索。由于变量表驻留在内存中，这避免了创建普通表或临时表并将值写入磁盘以进行一次性操作的开销。

```
Declare @Temp table
(
    Name varchar(32)
)

Insert Into @Temp
Select 'Ian'
Union
Select'Stephen'
Union 
Select'Kevin'

Select
    T.Name
From @Temp as T
    left join Names as N
        on T.Name = N.Name
Where N.Name IS NULL 
```

以我的经验，这种连接结构比“NOT IN”方法更有效。

编辑：更新了数据库版本的代码块

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T14:46:27.360

对 OP 没用，但如果您在 SQL Server 2008 或更高版本的环境中，此语法也应该可以工作。

```
SELECT
    List.NAME
FROM ( VALUES
        ('Ian')
        ,('Maria')
        ,('Kevin')
    ) AS List(NAME)
    LEFT JOIN NAMES AS N
        ON List.NAME = N.NAME
WHERE N.NAME IS NULL 
```

# ios - UIButtonBackground 图像小于按钮框架。我如何使平等？

> ID：13769345
> 
> 赞同：0
> 
> 时间：2012-12-07T18:59:36.930
> 
> 标签：ios, image, uibutton, uikit

我正在剥皮`UIButtons`，我发现我的按钮宽度比图像显示的宽度要宽得多。

我用指定的框架和大小调用下面的按钮方法：

`CGSize buttonSize = CGSizeMake(240, 64);`

```
+ (UIButton *)buttonWithThemeAndFrame:(CGRect )frame title:(NSString *)title target:(id)target selector:(SEL)selector {

    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button setFrame:frame];
    button.backgroundColor = [UIColor yellowColor];
    NSString *defaultName = @"button_main_up";
    NSString *highlighted = @"button_main_down";
    [button setBackgroundImage:[[UIImage imageNamed:defaultName] stretchableImageWithLeftCapWidth:12 topCapHeight:12.0] forState:UIControlStateNormal];
    [button setBackgroundImage:[[UIImage imageNamed:highlighted] stretchableImageWithLeftCapWidth:12 topCapHeight:12.0] forState:UIControlStateHighlighted];

    [button.titleLabel setFont:[UIFont boldSystemFontOfSize:12.0]];
    [button setTitle:title forState:UIControlStateNormal];
    [button setTitleColor:[UIColor colorWithWhite:1.0 alpha:0.5] forState:UIControlStateDisabled];
    button.titleLabel.shadowOffset = CGSizeMake(0.0, -1.0);
    button.titleLabel.shadowColor = [UIColor colorWithWhite:0.0 alpha:0.5];
    [button addTarget:target action:selector forControlEvents:UIControlEventTouchUpInside];
    button.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleTopMargin;

    return button;
} 
```

请注意，添加黄色背景是为了说明按钮框架的实际大小。为什么我的图像也不是那么大？ ![在此处输入图像描述](../Images/325e7e25474bad55b06448806cd57bef.png)

这是我的按钮图像：![在此处输入图像描述](../Images/f7f21c7ae8d57685aa00b4c115bb0613.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:25:08.700

我在 Photoshop 中查看了您的按钮图像，看起来图像周围有透明度，并且图像的大小小于画布。图像只有 43x44 像素，周围有透明区域。

我已经剪掉了透明区域。试试这张图片。

![在此处输入图像描述](../Images/35eac52fe946ee24b8c35de03885d637.png)

# python - 与沙盒 PyPy 解释器交互 - 辅助 .communicate() 返回空元组

> ID：13769346
> 
> 赞同：2
> 
> 时间：2012-12-07T18:59:39.897
> 
> 标签：python, sandbox, pypy

我正在尝试创建一种从普通（非沙盒）cPython 或 PyPy 脚本中与沙盒 PyPy 解释器交互的方法。

我已经能够按照这些说明[http://doc.pypy.org/en/latest/sandbox.html](http://doc.pypy.org/en/latest/sandbox.html)编译沙盒化 PyPy 解释器，并且我有一个 pypy-c-sandbox 文件，它与 pypy_interact.py 一起创建一个交互式沙盒解释器。

现在我想做一个非常相似的事情，但是我不想使用 stdin/stdout 作为我的 io，而是想使用 python 脚本与 pypy-sandbox 进程进行交互。我已经得到了这个工作的大部分。我可以使用带有 cStringIO 对象的 .communicate() 函数作为输入、输出和错误，并从普通 python 访问这些数据。

但是，**这是我的问题**，当我在同一个实例化的 PyPy 沙箱对象上第二次调用 .communicate() 时，我什么也得不到。它只是第一个 .communicate 作品。我很困惑为什么会出现这种情况以及如何解决它。

我拼凑了一个丑陋的黑客来证明我的问题：

```
import sys, os
import autopath
from pypy.translator.sandbox.sandlib import SimpleIOSandboxedProc
from pypy.translator.sandbox.sandlib import VirtualizedSandboxedProc
from pypy.translator.sandbox.vfs import Dir, RealDir, RealFile
import pypy

LIB_ROOT = os.path.dirname(os.path.dirname(pypy.__file__))

class PyPySandboxedProc(VirtualizedSandboxedProc, SimpleIOSandboxedProc):
    argv0 = '/bin/pypy-c'
    virtual_cwd = '/tmp'
    virtual_env = {}
    virtual_console_isatty = True
    arguments = ['../goal/pypy-c', '-u']

    def __init__(self, executable, arguments, tmpdir=None, debug=True):
        self.executable = executable = os.path.abspath(executable)
        self.tmpdir = tmpdir
        self.debug = debug
        super(PyPySandboxedProc, self).__init__([self.argv0] + arguments,
                                                executable=executable)

    def build_virtual_root(self):
        # build a virtual file system:
        # * can access its own executable
        # * can access the pure Python libraries
        # * can access the temporary usession directory as /tmp
        exclude = ['.pyc', '.pyo']
        if self.tmpdir is None:
            tmpdirnode = Dir({})
        else:
            tmpdirnode = RealDir(self.tmpdir, exclude=exclude)
        libroot = str(LIB_ROOT)

        return Dir({
            'bin': Dir({
                'pypy-c': RealFile(self.executable),
                'lib-python': RealDir(os.path.join(libroot, 'lib-python'),
                                      exclude=exclude),
                'lib_pypy': RealDir(os.path.join(libroot, 'lib_pypy'),
                                      exclude=exclude),
                }),
             'tmp': tmpdirnode,
             })

# run test
arguments = ['../goal/pypy-c', '-u']

sandproc = PyPySandboxedProc(arguments[0], arguments[1:],
                             tmpdir=None, debug=True)

#start the proc
code1 = "print 'started'\na = 5\nprint a"
code2 = "b = a\nprint b\nprint 'code 2 was run'"

output, error = sandproc.communicate(code1)
print "output: %s\n error: %s\n" % (output, error)

output, error = sandproc.communicate(code2)
print "output: %s\n error: %s\n" % (output, error) 
```

我真的很想以某种方式让我可以`code2`由同一个 sandproc 实例运行，但让它的输入/输出单独返回。如果我将所有代码连接在一起并立即运行它，它可以工作，但是解析给定输入的输出会有点痛苦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T06:50:51.600

```
from rpython.translator.sandbox.sandlib import SimpleIOSandboxedProc 
```

您正在 PyPySandboxedProc 中导入和扩展 SimpleIOSandboxedProc。在源代码（[sandlib.py source](https://bitbucket.org/pypy/pypy/src/default/rpython/translator/sandbox/sandlib.py)）中，您会看到 sandproc.communicate() 在子进程终止后发送数据并返回。

```
def communicate(self, input=None):
    """Send data to stdin. Read data from stdout and stderr,
    until end-of-file is reached. Wait for process to terminate.
    """
    import cStringIO
    if input:
        if isinstance(input, str):
            input = cStringIO.StringIO(input)
        self._input = input
    self._output = cStringIO.StringIO()
    self._error = cStringIO.StringIO()
    self.handle_forever()
    output = self._output.getvalue()
    self._output = None
    error = self._error.getvalue()
    self._error = None
    return (output, error) 
```

在上面的代码中，self.handle_forever() 被调用：

```
def handle_until_return(self):
    child_stdin  = self.popen.stdin
    child_stdout = self.popen.stdout
    if self.os_level_sandboxing and sys.platform.startswith('linux'):
        # rationale: we wait until the child process started completely,
        # letting the C library do any system calls it wants for
        # initialization.  When the RPython code starts up, it quickly
        # does its first system call.  At this point we turn seccomp on.
        import select
        select.select([child_stdout], [], [])
        f = open('/proc/%d/seccomp' % self.popen.pid, 'w')
        print >> f, 1
        f.close()
    while True:
        try:
            fnname = read_message(child_stdout)
            args   = read_message(child_stdout)
        except EOFError, e:
            break
        if self.log and not self.is_spam(fnname, *args):
            self.log.call('%s(%s)' % (fnname,
                                 ', '.join([shortrepr(x) for x in args])))
        try:
            answer, resulttype = self.handle_message(fnname, *args)
        except Exception, e:
            tb = sys.exc_info()[2]
            write_exception(child_stdin, e, tb)
            if self.log:
                if str(e):
                    self.log.exception('%s: %s' % (e.__class__.__name__, e))
                else:
                    self.log.exception('%s' % (e.__class__.__name__,))
        else:
            if self.log and not self.is_spam(fnname, *args):
                self.log.result(shortrepr(answer))
            try:
                write_message(child_stdin, 0)  # error code - 0 for ok
                write_message(child_stdin, answer, resulttype)
                child_stdin.flush()
            except (IOError, OSError):
                # likely cause: subprocess is dead, child_stdin closed
                if self.poll() is not None:
                    break
                else:
                    raise
    returncode = self.wait()
    return returncode 
```

可以看出，这是一个'while True:'，这意味着这个函数在我们得到一个异常抛出之前不会返回。**因此，sandproc.communicate() 无法实现您希望它实现的目标**。

你有两个选择。

**困难**的选择是分叉你的主进程。使用一个进程运行 sandproc.interact() 并传入一些 os.pipes。并使用另一个进程读取和写入所述管道。这是低效的，因为它需要 3 个进程（一个用于沙盒应用程序，一个用于主进程，一个用于分叉进程）。

简单的**选项**是覆盖 SimpleIOSandboxedProc 类中的一些函数。您所要做的就是在 PyPySandboxedProc 中重新实现这些函数。

```
def do_ll_os__ll_os_read(self, fd, size):
    if fd == 0:
        if self._input is None:
            return ""
        elif (getattr(self, 'virtual_console_isatty', False) or
              self._input.isatty()):
            # don't wait for all 'size' chars if reading from a tty,
            # to avoid blocking.  Instead, stop after reading a line.

            # For now, waiting at the interactive console is the
            # only time that counts as idle.
            self.enter_idle()
            try:
                inputdata = self._input.readline(size) #TODO: THIS IS WHERE YOU HANDLE READING FROM THE SANDBOXED PROCESS
            finally:
                self.leave_idle()
        else:
            inputdata = self._input.read(size)
        if self.inputlogfile is not None:
            self.inputlogfile.write(inputdata)
        return inputdata
    raise OSError("trying to read from fd %d" % (fd,))

def do_ll_os__ll_os_write(self, fd, data):
    if fd == 1:
        self._output.write(data) #TODO: THIS IS WHERE YOU WRITE TO THE SANDBOXED PROCESS
        return len(data)
    if fd == 2:
        self._error.write(data)
        return len(data)
    raise OSError("trying to write to fd %d" % (fd,)) 
```

**用#TODO:**标签注释的行是从沙盒进程中注入和读取数据的地方。

您需要做的是实现逻辑，在其中写入一些数据（当沙盒进程读取时），等待响应（直到进程写入），写入更多数据，然后再次读取响应（当进程第二次写入时） .

# windows-phone - 定时器触发->音频文件播放不干净

> ID：13769354
> 
> 赞同：2
> 
> 时间：2012-12-07T19:00:00.923
> 
> 标签：windows-phone, windows-phone-8

我正在编写一个 Windows Phone 8 应用程序并尝试在计时器触发时播放音频文件（在本例中为 Metronome920.wav，一个 0.07 秒、6kb 的文件）。该文件在计时器触发时播放，但可能有 40-50% 的时间，当它播放时，它会发出噼啪声/爆裂声并且播放不干净。该应用程序非常简单，仅包含计时器/音频播放。我没有更改在 Visual Studio 中启动新项目时创建的默认 GUI 的 GUI。

这让我相信这可能是一个线程问题。有任何想法吗？

```
namespace AudioTest1
{
    class MyTimer
    {
        private Timer t; //Windows.Threading.Timer

        public MyTimer()
        {
            t = new Timer(new TimerCallback(timer_Tick), null, 0, 500);
        }

        private void PlaySound()
        {
            using (var stream = TitleContainer.OpenStream("Sounds\\Metronome920.wav"))
            {
                var effect = SoundEffect.FromStream(stream);
                FrameworkDispatcher.Update();
                effect.Play();
            }
        }
        private void timer_Tick(object sender)
        {
                PlaySound();
        }

    }
} 
```

我正在从 MainPage.xaml.cs 中的以下代码创建一个 MyTimer 对象：

```
 public MainPage()
    {
        InitializeComponent();
        MyTimer m = new MyTimer();
    } 
```

编辑：在设备上运行时发生的事情的音频文件位于以下位置：[此处](http://dl.dropbox.com/u/19973192/winphone8sound.mp3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:16:12.443

您可能想尝试硬关机/重启您的手机设备。我的结果与您的相似，然后一旦我对设备进行了硬重置，口吃的声音就停止了。我用一个普通的定时器、一个 DispatcherTimer 和一个 MediaElement 而不是一个 SoundEffect 来尝试这个。您可以在此处获取我的示例解决方案：http: [//sdrv.ms/Rfb7UM](http://sdrv.ms/Rfb7UM)

# javascript - 一个 JSP 页面中的多个表单

> ID：13769361
> 
> 赞同：-8
> 
> 时间：2012-12-07T19:00:20.960
> 
> 标签：javascript, jquery, jsp, servlets

JSP 页面中有两个按钮。其中一个将显示学生登记表，另一个将显示教师登记表。但是在那个特定的 JSP 页面中。即我实际上想在单个 JSP 页面中使用两种形式。在页面加载时，它们都将被隐藏。通过单击这两个按钮，将显示相应的表格。

这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:01:59.443

你需要把表格放在里面`<div>`，如果那个人点击这里或那里你使用jquery或javascript来做：div样式块或隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:47:15.800

您需要将 jquery 和 css 结合到 jsp 中，只需在 jsp 的标题部分包含 jquery 和 css。下面的链接对您有用。 [点击这里](http://api.jquery.com/show/)

# c++ - 检查字符串字符和长度

> ID：13769367
> 
> 赞同：0
> 
> 时间：2012-12-07T19:00:36.730
> 
> 标签：c++, std, eof

此代码假设只接受数字，并且数字必须正好是 12 个数字。第一个有效，但后者无效。用户输入 13 个数字，但没有显示错误。

```
 std::string line;
    double d;
    while (std::getline(std::cin, line))
    {
        std::stringstream ss(line);
        if (ss >> d || line.size() == 12)
        {
            if (ss.eof())
            {   // Success
                break;
            }
        }

        std::cout << "Error!" << std::endl;
    } 
```

请问有人可以帮我解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T19:02:54.410

试试**and**而不是**or**：

```
if (ss >> d && line.size() == 12) 
```

# javascript - Mongo 中的 Meteor 数据在哪里？

> ID：13769369
> 
> 赞同：5
> 
> 时间：2012-12-07T19:00:42.913
> 
> 标签：javascript, node.js, meteor

我正在与 Meteor 简单颜色[示例截屏视频](http://meteor.com/screencast)一起编码。通过 Chrome JS 控制台将一些颜色插入数据库后（视频中的 1:08）：

```
Colors.insert({name: "red"});
Colors.insert({name: "green"}); 
```

我想看看是否可以在 mongo 控制台中找到相同的数据：

```
$ meteor mongo
MongoDB shell version: 2.2.1
connecting to: 127.0.0.1:3002/meteor
> show dbs
local   (empty)
meteor  0.0625GB
> use meteor
switched to db meteor
> show collections
colors)
system.indexes
> db.colors.find()
> 
```

没有。

为什么里面没有数据？

另外为什么“颜色”集合名称后面有一个“）”，这有关系吗？

这是我的 .js 文件：

```
Colors = new Meteor.Collection("colors)");

if (Meteor.isClient) {
  Template.colour_list.colors = function()
  {
    return Colors.find({}, {sort : {likes: -1, name: 1}});
  };
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T21:15:54.747

是的，删除您的 ) 并重试...

```
Colors = new Meteor.Collection("colors"); 
```

# excel - Excel VBA：返回列中第一次出现的单词？最后？

> ID：13769375
> 
> 赞同：4
> 
> 时间：2012-12-07T19:01:04.090
> 
> 标签：excel, vba

假设我在任意列中有第 1 行以下的这些值：

```
1 A
2 A
3 A
4 A
5 B
6 B
7 B
8 A
9 A
10 A 
```

我希望能够说 start=5 是第一个 B，last=7 是最后一个 B。如果第一个和最后一个都没有 B，则返回 0。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-10-01T08:24:56.407

不要忘记在 VBA 中您仍然可以访问大量的内置 Excel 函数。示例（假设您的数据在第 1 列中）：

找到第一个 B...
`Columns(1).Find(What:="B", LookAt:=xlWhole, MatchCase:=False).Row 'Returns 5`

找到最后一个 B...
`Columns(1).Find(What:="B", LookAt:=xlWhole, SearchDirection:=xlPrevious, MatchCase:=False).Row 'Returns 7`

如果未找到 B，则返回错误。如果没有找到 B，我们可以通过使用错误处理返回 0 来利用这一点。把它们放在一起...

```
Sub DoTest()
  Dim RowFirst As Integer, _
      RowLast As Integer
  On Error GoTo ErrorHandler
  RowFirst = Columns(1).Find(What:="B", LookAt:=xlWhole, SearchDirection:=xlNext, MatchCase:=False).Row
  RowLast = Columns(1).Find(What:="B", LookAt:=xlWhole, SearchDirection:=xlPrevious, MatchCase:=False).Row
  Exit Sub
ErrorHandler:
  RowFirst = 0
  RowLast = 0
End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T19:25:34.900

像这样的东西对你有用还是你需要两个独立的功能？

```
Function findValues(place As String, val As String, rng As Range) As Integer
    Dim r As Range
    findValues = 0
    For Each r In rng
        If InStr(r.Value2, val) > 0 Then
            findValues = r.Row
            If LCase(place) = "first" Then
                Exit For
            End If
        End If
    Next
End Function 
```

像这样使用：

```
Dim rng As Range
Set rng = Range("B1:B10")
Dim i As Integer
i = findValues("first", "B", rng)
i = findValues("last", "B", rng) 
```

根据您需要检查的范围有多大，这可能需要一段时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T21:44:32.667

这是另一种方式。

```
Sub FindFirstLast()

    Dim vaValues As Variant
    Dim vaFilter As Variant
    Dim lFirst As Long
    Dim lLast As Long

    Const sFIND As String = "B"

    With Application.WorksheetFunction
        'Get a 1-d array from a column
        vaValues = .Transpose(Sheet1.Range("A1:A10").Value)

        'Use match to get the first instance
        lFirst = .Match(sFIND, vaValues, False)

        'Filter on the values
        vaFilter = Filter(vaValues, sFIND)

        'Assumes they're all together
        lLast = lFirst + UBound(vaFilter)
    End With

    Debug.Print lFirst, lLast

End Sub 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-06T17:16:48.177

我一直在一些应用程序中使用 Kevin Pope 的方法，但发现它有时会包含我不想要的东西。以为我会分享我的经验和解决方案。

最近我意识到，如果我有这样的事情：

```
Mouser  EPM1270GT144I5
Mouser  EPM1270GT144I5
Mouser  GRM32DR71E106K
Mouser  GRM32DR71E106K
TTI     GRM32DR71E106KA12L
Avnet   GS816273CC-250I
Avnet   GS816273CC-250I 
```

并且正在寻找这个：GRM32DR71E106K

它将返回我正在搜索的两个和以相同字符串开头的第三个。

我需要适应搜索精确匹配项。修复非常简单：

```
 Public Function findValues(Val As String, Rng As Range, Optional place As Integer) As Integer
        Dim R As Range
        findValues = 0
        For Each R In Rng
            If StrComp(R.Value2, Val) = 0 Then
    '        If InStr(R.Value2, Val) > 0 Then
                findValues = R.Row
                If place = 1 Then
                    Exit For
                End If
            End If
        Next
    End Function 
```

我希望有人觉得这很有用。

# ruby - 将方法存储在 lambda 中并发送到对象

> ID：13769378
> 
> 赞同：4
> 
> 时间：2012-12-07T19:01:26.707
> 
> 标签：ruby, jruby, ruby-1.9

如果函数作为 lambda 存储在变量中，是否可以在对象上调用函数（向其发送消息）？

说我有一个像`%w(a b c)`

然后我可以链接方法，例如：

```
%w(a b c).reverse.map(&:upcase) # => ["C", "B", "A"] 
```

是否可以将链接的方法调用提取到变量并将它们应用于其他数组对象？

```
transform = -> { reverse.map(&:upcase) } 
```

我尝试了以下但没有任何运气：

**使用 JRuby 1.7.1**

```
%w(a b c).send(transform)
TypeError: #<Proc:0x19a639d8@(irb):12 (lambda)> is not a string 
```

和

```
%w(a b c).send(&transform)
ArgumentError: wrong number of arguments (0 for 1) 
```

**使用 Ruby 1.9.3**

```
%w(a b c).send(transform)
TypeError: #<Proc:0x007fa0721f0dc8@(irb):1 (lambda)> is not a symbol 
```

和

```
%w(a b c).send(&transform)
ArgumentError: no method name given 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T19:24:34.207

我看到至少两种方法：

1）您似乎喜欢使用隐式接收器编写 lambda（我不推荐它，`self`显然会更改），您有[instance_exec](http://www.ruby-doc.org/core-1.9.3/BasicObject.html#method-i-instance_exec)：

```
transform = -> { reverse.map(&:upcase) }
["a", "b", "c"].instance_exec(&transform)
#=> ["C", "B", "A"] 
```

2）编写自定义扩展，例如`Object#apply`：

```
class Object
  def apply(block, *args)
    block.call(self, *args)
  end
end

transform = -> strings { strings.reverse.map(&:upcase) }
["a", "b", "c"].apply(transform)
#=> ["C", "B", "A"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:19:05.847

```
class Array
  def transform; reverse.map(&:upcase) end
end

%w(a b c).send(:transform) 
```

# python - 如何覆盖默认的管理静态文件？

> ID：13769381
> 
> 赞同：0
> 
> 时间：2012-12-07T19:01:28.297
> 
> 标签：python, django, django-admin

如何覆盖默认管理静态文件 - 例如 icon_error.png、icon_success.png ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:18:21.373

我会说这取决于你想覆盖多少。

如果您在静态目录下创建管理目录，这些文件将在实际管理文件之前被读取。

如果这是您的结构：

```
root
  appname
    static
      css
      js 
```

你应该像这样创建它：

```
root
  appname
    static
      admin
        img
          icon_success.gif
      css
      js 
```

名称必须准确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:49:58.007

django 包托管在您的服务器上。您是否考虑过更改 and 的图像`icon_error.png`，`icon_success.png`然后在文件系统上以相同的名称重新保存它们？

您可以在 django 包中找到静态图像文件的位置是：

`/ django / django / contrib / admin / static / admin / img /`

# javascript - 使 Javascript 函数与 Ajax 一起工作

> ID：13769383
> 
> 赞同：1
> 
> 时间：2012-12-07T19:01:53.857
> 
> 标签：javascript, ruby-on-rails, ruby, ajax, dom-events

我一直试图找出一些东西，但不确定解决当前问题的最佳方法。首先，我会让你知道我想要做什么。用户在文本框中输入文本，然后被带到下一页，他们的输入被分成单词，每个单词都变成一个链接（链接将是一个搜索，但目前这无关紧要）。问题是我希望它可以与 ajax 一起使用。现在我有了带有文本框的页面，成功使用 ajax 转到“显示”页面，但是我无法在线找到最佳实践来获取我的 Javascript，该 Javascript 将单词与“显示”的 ajax 渲染调用一起执行。这是我当前的代码。

创建表格：

```
<%= form_for @icelandic_reader, :remote => true, :html => { :class => 'form-     horizontal' } do |f| %>
   <div class="control-group">
     <div class="controls">
       <%= f.text_area :text, :class => 'text_area' %>
     </div>
   </div>

   <div class="form-actions">
     <%= button_to 'Submit', icelandic_readers_path(@icelandic_reader.id), :class => 'btn btn-primary' %>
     <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
            icelandic_readers_path, :class => 'btn' %>
   </div>
<% end %> 
```

在控制器中创建：

```
def create
  @icelandic_reader = IcelandicReader.new(params[:icelandic_reader])

  respond_to do |format|
    if @icelandic_reader.save
      format.html { redirect_to @icelandic_reader, notice: 'Icelandic reader was successfully created.' }
      format.js
      format.json { render json: @icelandic_reader, status: :created, location: @icelandic_reader }
  else
    format.html { render action: "new" }
    format.json { render json: @icelandic_reader.errors, status: :unprocessable_entity }
  end
 end
end 
```

创建.js.erb：

```
 $('.icelandic_reader').html ("<%=j render :partial => 'show' %>"); 
```

在显示部分：

```
<div id="icelandic_reader_text">

</div> 
```

在控制器中显示：

```
def show
  @icelandic_reader = IcelandicReader.find(params[:id])
  gon.icelandicText = @icelandic_reader.text

  respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @icelandic_reader }
  end
end 
```

最后是我要填写“icelandic_reader_text” div 的 Javascript 函数，我目前在 icelandic_readers.js.erb 中拥有该 div：

```
window.onload = pageChecker;
function pageChecker() {
    var testElement = document.getElementById('icelandic_reader_text');

    if ( !testElement ){
        setTimeout(pageChecker, 50);
    }
    else {
        var myText = gon.icelandicText;
        console.log("test1");
        var words = myText.split(/[\s]+/);
        console.log("test2");
        var numWords = words.length;
        var textToInsert;

        for (var i = 0; i < numWords; i++) {
            console.log("inside for loop");
            textToInsert += "<a href=#>" + words[i] + "</a>" + " ";
        }

    document.getElementById('icelandic_reader_text').innerHTML = textToInsert;
    }

} 
```

函数的第一部分之前我从堆栈溢出中的一个答案中得到了关于如何让 ajax 使用它的答案，但它没有用。我开始认为我必须以不同于使用`window.onload`. 我对 Ruby 有点陌生，所以我想知道是否有不同的思维方式应该用于解决这个问题。我也在使用rails 3.2.6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:37:36.850

您可以像这样将事件侦听器附加到表单（使用 jQuery）：

```
$(document).ready(function() {
  $("#icelandic_reader_form").bind('ajax:success', function(data, status, xhr) {
      // code to execute after form successfully submitted
  });
} 
```

我认为我的示例中的表单 id 是错误的，请使用 rails 给出的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T07:14:16.373

它可能`window.onload`根本没有触发，或者它在`show`渲染之前触发，因此找不到元素`#icelandic_reader_text`

1.  如果可以，`pageChecker()`请在您在布局中加载的某个文件中进行定义，以便可以触发。
2.  **在create.js.erb**中试试这个：

    ```
    $('.icelandic_reader').html("<%=j render :partial => 'show' %>").each(pageChecker);
    //By chaining the actions with jquery, things should happen in the correct order. 
    ```

您也可以重写`pageChecker()`，其中**`$(this)`**引用**`$('.icelandic_reader')`**

```
 function pageChecker() {

        var myText = gon.icelandicText;
        console.log("test1");
        var words = myText.split(/[\s]+/);
        console.log("test2");
        var numWords = words.length;
        var textToInsert;

        for (var i = 0; i < numWords; i++) {
            console.log("inside for loop");
            textToInsert += "<a href=#>" + words[i] + "</a>" + " ";
        }

        $(this).find('#icelandic_reader_text').append(textToInsert)
    } 
```

# c# - 对于具有命名空间的 XML，XMLNodeList 始终为空

> ID：13769389
> 
> 赞同：1
> 
> 时间：2012-12-07T19:02:25.413
> 
> 标签：c#, xml, c#-4.0, xml-parsing

我有以下 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
    <kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom">
    <Document>
        <name>STO.kmz</name>
        <open>1</open>
        <StyleMap id="msn_A26">
            <Pair>
                <key>normal</key>
                <styleUrl>#sn_A100</styleUrl>
            </Pair>
            <Pair>
                <key>highlight</key>
                <styleUrl>#sh_A00</styleUrl>
            </Pair>
        </StyleMap>
        <Style id="sn_square18">
            <IconStyle>
                <scale>1.2</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/shapes/square.png</href>
                </Icon>
            </IconStyle>
        </Style>
        <Style id="sn_ylw-diamond1">
            <IconStyle>
                <scale>1.1</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/ylw-diamond.png</href>
                </Icon>
                <hotSpot x="32" y="1" xunits="pixels" yunits="pixels"/>
            </IconStyle>
            <ListStyle>
                <ItemIcon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/ylw-diamond-lv.png</href>
                </ItemIcon>
            </ListStyle>
        </Style>
        <Style id="sh_A">
            <IconStyle>
                <scale>1.3</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/A.png</href>
                </Icon>
                <hotSpot x="32" y="1" xunits="pixels" yunits="pixels"/>
            </IconStyle>
            <ListStyle>
                <ItemIcon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/A-lv.png</href>
                </ItemIcon>
            </ListStyle>
        </Style>
        <StyleMap id="msn_blu-diamond8">
            <Pair>
                <key>normal</key>
                <styleUrl>#sn_blu-diamond00</styleUrl>
            </Pair>
            <Pair>
                <key>highlight</key>
                <styleUrl>#sh_blu-diamond8</styleUrl>
            </Pair>
        </StyleMap>
        <Style id="sh_square10">
            <IconStyle>
                <scale>1.4</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/shapes/square.png</href>
                </Icon>
            </IconStyle>
        </Style>
        <StyleMap id="msn_ylw-diamond5">
            <Pair>
                <key>normal</key>
                <styleUrl>#sn_ylw-diamond0</styleUrl>
            </Pair>
            <Pair>
                <key>highlight</key>
                <styleUrl>#sh_ylw-diamond5</styleUrl>
            </Pair>
        </StyleMap>
        <Style id="sh_blu-diamond13">
            <IconStyle>
                <scale>1.3</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/blu-diamond.png</href>
                </Icon>
                <hotSpot x="32" y="1" xunits="pixels" yunits="pixels"/>
            </IconStyle>
            <ListStyle>
                <ItemIcon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/blu-diamond-lv.png</href>
                </ItemIcon>
            </ListStyle>
        </Style>
        <Style id="sn_blu-diamond31">
            <IconStyle>
                <scale>1.1</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/blu-diamond.png</href>
                </Icon>
                <hotSpot x="32" y="1" xunits="pixels" yunits="pixels"/>
            </IconStyle>
            <ListStyle>
                <ItemIcon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/blu-diamond-lv.png</href>
                </ItemIcon>
            </ListStyle>
        </Style>
        <Style id="sh_square7">
            <IconStyle>
                <scale>1.4</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/shapes/square.png</href>
                </Icon>
            </IconStyle>
        </Style>
        <Style id="sh_square19">
            <IconStyle>
                <scale>1.4</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/shapes/square.png</href>
                </Icon>
            </IconStyle>
        </Style>
        <Style id="sn_blu-diamond8">
            <IconStyle>
                <scale>1.1</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/blu-diamond.png</href>
                </Icon>
                <hotSpot x="32" y="1" xunits="pixels" yunits="pixels"/>
            </IconStyle>
            <ListStyle>
                <ItemIcon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/blu-diamond-lv.png</href>
                </ItemIcon>
            </ListStyle>
        </Style>
        <Style id="sn_square16">
            <IconStyle>
                <scale>1.2</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/shapes/square.png</href>
                </Icon>
            </IconStyle>
        </Style>
        <Style id="sn_blu-diamond1">
            <IconStyle>
                <scale>1.1</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/blu-diamond.png</href>
                </Icon>
                <hotSpot x="32" y="1" xunits="pixels" yunits="pixels"/>
            </IconStyle>
            <ListStyle>
                <ItemIcon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/blu-diamond-lv.png</href>
                </ItemIcon>
            </ListStyle>
        </Style>
        <Style id="sh_square8">
            <IconStyle>
                <scale>1.4</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/shapes/square.png</href>
                </Icon>
            </IconStyle>
        </Style>
        <Style id="s_ylw-pushpin_hl00">
            <IconStyle>
                <scale>1.3</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png</href>
                </Icon>
                <hotSpot x="20" y="2" xunits="pixels" yunits="pixels"/>
            </IconStyle>
            <LineStyle>
                <color>ff7f55aa</color>
                <width>2.9</width>
            </LineStyle>
        </Style>
        <Style id="sn_blu-diamond01">
            <IconStyle>
                <scale>1.1</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/blu-diamond.png</href>
                </Icon>
                <hotSpot x="32" y="1" xunits="pixels" yunits="pixels"/>
            </IconStyle>
            <ListStyle>
                <ItemIcon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/blu-diamond-lv.png</href>
                </ItemIcon>
            </ListStyle>
        </Style>
        <Style id="sn_blu-diamond60">
            <IconStyle>
                <scale>1.1</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/blu-diamond.png</href>
                </Icon>
                <hotSpot x="32" y="1" xunits="pixels" yunits="pixels"/>
            </IconStyle>
            <ListStyle>
                <ItemIcon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/blu-diamond-lv.png</href>
                </ItemIcon>
            </ListStyle>
        </Style>
        <StyleMap id="msn_blu-diamond3">
            <Pair>
                <key>normal</key>
                <styleUrl>#sn_blu-diamond</styleUrl>
            </Pair>
            <Pair>
                <key>highlight</key>
                <styleUrl>#sh_blu-diamond7</styleUrl>
            </Pair>
        </StyleMap>
        <StyleMap id="msn_square31">
            <Pair>
                <key>normal</key>
                <styleUrl>#sn_square47</styleUrl>
            </Pair>
            <Pair>
                <key>highlight</key>
                <styleUrl>#sh_square28</styleUrl>
            </Pair>
        </StyleMap>
        <Style id="sh_blu-diamond9">
            <IconStyle>
                <scale>1.3</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/blu-diamond.png</href>
                </Icon>
                <hotSpot x="32" y="1" xunits="pixels" yunits="pixels"/>
            </IconStyle>
            <ListStyle>
                <ItemIcon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/blu-diamond-lv.png</href>
                </ItemIcon>
            </ListStyle>
        </Style>
        <Style id="sn_square100">
            <IconStyle>
                <scale>1.2</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/shapes/square.png</href>
                </Icon>
            </IconStyle>
        </Style>
        <StyleMap id="msn_A28">
            <Pair>
                <key>normal</key>
                <styleUrl>#sn_A33</styleUrl>
            </Pair>
            <Pair>
                <key>highlight</key>
                <styleUrl>#sh_A150</styleUrl>
            </Pair>
        </StyleMap>
        <Style id="sh_A8">
            <IconStyle>
                <scale>1.3</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/A.png</href>
                </Icon>
                <hotSpot x="32" y="1" xunits="pixels" yunits="pixels"/>
            </IconStyle>
            <ListStyle>
                <ItemIcon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/A-lv.png</href>
                </ItemIcon>
            </ListStyle>
        </Style>
        <StyleMap id="msn_square27">
            <Pair>
                <key>normal</key>
                <styleUrl>#sn_square35</styleUrl>
            </Pair>
            <Pair>
                <key>highlight</key>
                <styleUrl>#sh_square11</styleUrl>
            </Pair>
        </StyleMap>
        <Style id="sh_square20">
            <IconStyle>
                <scale>1.4</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/shapes/square.png</href>
                </Icon>
            </IconStyle>
        </Style>
        <Style id="sh_ylw-diamond">
            <IconStyle>
                <scale>1.3</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/ylw-diamond.png</href>
                </Icon>
                <hotSpot x="32" y="1" xunits="pixels" yunits="pixels"/>
            </IconStyle>
            <ListStyle>
                <ItemIcon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/ylw-diamond-lv.png</href>
                </ItemIcon>
            </ListStyle>
        </Style>
        <StyleMap id="msn_square25">
            <Pair>
                <key>normal</key>
                <styleUrl>#sn_square240</styleUrl>
            </Pair>
            <Pair>
                <key>highlight</key>
                <styleUrl>#sh_square13</styleUrl>
            </Pair>
        </StyleMap>
        <Style id="sh_ylw-diamond5">
            <IconStyle>
                <scale>1.3</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/ylw-diamond.png</href>
                </Icon>
                <hotSpot x="32" y="1" xunits="pixels" yunits="pixels"/>
            </IconStyle>
            <ListStyle>
                <ItemIcon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/ylw-diamond-lv.png</href>
                </ItemIcon>
            </ListStyle>
        </Style>
        <Style id="sh_blu-diamond">
            <IconStyle>
                <scale>1.3</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/blu-diamond.png</href>
                </Icon>
                <hotSpot x="32" y="1" xunits="pixels" yunits="pixels"/>
            </IconStyle>
            <ListStyle>
                <ItemIcon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/blu-diamond-lv.png</href>
                </ItemIcon>
            </ListStyle>
        </Style>
        <Style id="sn_square37">
            <IconStyle>
                <scale>1.2</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/shapes/square.png</href>
                </Icon>
            </IconStyle>
        </Style>
        <Style id="sn_A18">
            <IconStyle>
                <scale>1.1</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/A.png</href>
                </Icon>
                <hotSpot x="32" y="1" xunits="pixels" yunits="pixels"/>
            </IconStyle>
            <ListStyle>
                <ItemIcon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/A-lv.png</href>
                </ItemIcon>
            </ListStyle>
        </Style>
        <Style id="sn_square130">
            <IconStyle>
                <scale>1.2</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/shapes/square.png</href>
                </Icon>
            </IconStyle>
        </Style>
        <Style id="sn_square90">
            <IconStyle>
                <scale>1.2</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/shapes/square.png</href>
                </Icon>
            </IconStyle>
        </Style>
        <Style id="sn_blu-diamond0">
            <IconStyle>
                <scale>1.1</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/blu-diamond.png</href>
                </Icon>
                <hotSpot x="32" y="1" xunits="pixels" yunits="pixels"/>
            </IconStyle>
            <ListStyle>
                <ItemIcon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/blu-diamond-lv.png</href>
                </ItemIcon>
            </ListStyle>
        </Style>
        <StyleMap id="msn_red-diamond">
            <Pair>
                <key>normal</key>
                <styleUrl>#sn_red-diamond</styleUrl>
            </Pair>
            <Pair>
                <key>highlight</key>
                <styleUrl>#sh_red-diamond</styleUrl>
            </Pair>
        </StyleMap>
        <Style id="sn_blu-diamond7">
            <IconStyle>
                <scale>1.1</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/blu-diamond.png</href>
                </Icon>
                <hotSpot x="32" y="1" xunits="pixels" yunits="pixels"/>
            </IconStyle>
            <ListStyle>
                <ItemIcon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/blu-diamond-lv.png</href>
                </ItemIcon>
            </ListStyle>
        </Style>
        <Style id="sn_blu-diamond13">
            <IconStyle>
                <scale>1.1</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/blu-diamond.png</href>
                </Icon>
                <hotSpot x="32" y="1" xunits="pixels" yunits="pixels"/>
            </IconStyle>
            <ListStyle>
                <ItemIcon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/blu-diamond-lv.png</href>
                </ItemIcon>
            </ListStyle>
        </Style>
        <Style id="sn_A19">
            <IconStyle>
                <scale>1.1</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/A.png</href>
                </Icon>
                <hotSpot x="32" y="1" xunits="pixels" yunits="pixels"/>
            </IconStyle>
            <ListStyle>
                <ItemIcon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/A-lv.png</href>
                </ItemIcon>
            </ListStyle>
        </Style>
        <Style id="sh_blu-diamond31">
            <IconStyle>
                <scale>1.3</scale>
                <Icon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/blu-diamond.png</href>
                </Icon>
                <hotSpot x="32" y="1" xunits="pixels" yunits="pixels"/>
            </IconStyle>
            <ListStyle>
                <ItemIcon>
                    <href>http://maps.google.com/mapfiles/kml/paddle/blu-diamond-lv.png</href>
                </ItemIcon>
            </ListStyle>
        </Style>
        <StyleMap id="msn_blu-diamond">
            <Pair>
                <key>normal</key>
                <styleUrl>#sn_blu-diamond0</styleUrl>
            </Pair>
            <Pair>
                <key>highlight</key>
                <styleUrl>#sh_blu-diamond</styleUrl>
            </Pair>
        </StyleMap>
        <StyleMap id="msn_blu-diamond11">
            <Pair>
                <key>normal</key>
                <styleUrl>#sn_blu-diamond3</styleUrl>
            </Pair>
            <Pair>
                <key>highlight</key>
                <styleUrl>#sh_blu-diamond50</styleUrl>
            </Pair>
        </StyleMap>
        <StyleMap id="msn_ylw-diamond2">
            <Pair>
                <key>normal</key>
                <styleUrl>#sn_ylw-diamond4</styleUrl>
            </Pair>
            <Pair>
                <key>highlight</key>
                <styleUrl>#sh_ylw-diamond10</styleUrl>
            </Pair>
        </StyleMap>
        <Folder>
            <name>STO</name>
            <open>1</open>
            <Placemark>
                <name>2255</name>
                <LookAt>
                    <longitude>-75.79382956897737</longitude>
                    <latitude>45.43539940356241</latitude>
                    <altitude>0</altitude>
                    <heading>-3.906129488807351</heading>
                    <tilt>13.06994671404837</tilt>
                    <range>227.4175908854991</range>
                    <gx:altitudeMode>relativeToSeaFloor</gx:altitudeMode>
                </LookAt>
                <styleUrl>#msn_ylw-diamond</styleUrl>
                <Point>
                    <coordinates>-75.79406138001882,45.43526902479236,0</coordinates>
                </Point>
            </Placemark>
            <Placemark>
                <name>2253</name>
                <LookAt>
                    <longitude>-75.79051291553527</longitude>
                    <latitude>45.43588490633884</latitude>
                    <altitude>0</altitude>
                    <heading>-3.880874298803265</heading>
                    <tilt>18.63262195622465</tilt>
                    <range>167.8701172310251</range>
                    <gx:altitudeMode>relativeToSeaFloor</gx:altitudeMode>
                </LookAt>
                <styleUrl>#msn_ylw-diamond</styleUrl>
                <Point>
                    <coordinates>-75.7906693408864,45.43559495897022,0</coordinates>
                </Point>
            </Placemark>

    </Document>
    </kml> 
```

我正在尝试`Placemark`使用我编写的以下代码访问标签中的所有节点：-

```
 XmlDocument xmlDoc = new XmlDocument();
        xmlDoc.Load(fileName);

        XmlNamespaceManager manager = new XmlNamespaceManager(xmlDoc.NameTable);
        manager.AddNamespace("kml", "http://www.opengis.net/kml/2.2");
        manager.AddNamespace("gx", "http://www.google.com/kml/ext/2.2");
        manager.AddNamespace("atom", "http://www.w3.org/2005/Atom");

        XmlElement root = xmlDoc.DocumentElement;

        XmlNodeList dataNodes = xmlDoc.SelectNodes("Placemark");
        foreach (XmlNode node in dataNodes)
        {
            foreach (XmlNode childNode in node.ChildNodes)
            {
                 // My operations here    
            }
        } 
```

现在的问题是 XMLNodeList 总是空的。我认为问题与 XML 命名空间有关。一点帮助指出我正确的方向会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:06:08.593

使用`XPATH`前缀 kml 来标识命名空间管理器中的 kml 命名空间

```
root.SelectNodes("//kml:Placemark",manager);
                  ----- 
```

**或者**

采用`LINQ2xml`

```
XElement doc=XElement.Load(yourXML);

XNamespace ns="http://www.opengis.net/kml/2.2";

foreach(XElement elm in doc.Descendants().Elements(ns+"Placemark"))
{
    elm.Element(ns+"name").Value;//your Placemark's name element value
    //remember to use ns foreach element and attributes
} 
```

# mathematical-optimization - 从项目集合中进行选择以满足特定的特征目标优化

> ID：13769394
> 
> 赞同：1
> 
> 时间：2012-12-07T19:02:31.510
> 
> 标签：mathematical-optimization, linear-programming, nonlinear-optimization

我无法解决包括从集合中选择项目的问题。

我有一个项目集合，每个项目都有三个特征，比如 X、Y 和 Z，它们有一个 double 值

我有几个目标：

1) 达到所选项目的所有 X 值之和的特定下限。

2) 达到所选项目的所有 Y 值之和的特定下限。

3) 达到所选项目的所有 Z 值的平均值的特定下限。

4）尽量减少仍满足上述要求的项目的选择。

我不确定要尝试哪种类型的优化算法，任何正确方向的指针都将不胜感激。如果可能的话，我想以某种方式优先考虑我的目标并使我的界限像“软”一样，即使它们不能同时满足，仍然会返回一个“接近”的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:47:28.267

您的问题可以用混合整数问题建模。如果你的集合不是太大（比如几百个值），我会使用这个模型，因为在标准 lp 文件中编写它比对启发式编程和参数化更容易。

您可以将此问题交给混合整数问题求解器：

*   硬币或（免费），
*   Cplex（商业和广阔，除非你是学者），
*   古罗比（商业），
*   GLPK（免费，但速度慢）...

我在下面用伪数学语言写了两个模型（注意这不是 LP 格式）。

## 硬边界

让 N 是您的对象的集合，X_min 和 Y_min 是您需要达到的下限，ZZ 是 Z 值的平均下限。我使用一个二进制变量 s_i，如果对象 i 被选中，它的值为 1，否则为 0。确切的问题可以写成：

```
Minimize sum_{i in N} s_i
Subject to:
      sum_{i in N} X_i s_i >= X_min
      sum_{i in N} Y_i s_i >= Y_min
      sum_{i in N} (Z_i - ZZ) s_i >= 0
      foreach i in N, s_i in {0, 1} 
```

## 多目标

请注意，正如 Andreas 的回答所述，还有其他方法可以做到这一点。这是一种更容易（在我看来）确定目标优先级和“放松”问题的方法，您可以使用上面的线性求解器。

您添加三个松弛变量 dX、dY、dZ 和三个（正）权重系数 wX、wY、wZ。变量 dX、dY 和 dZ 将代表违反约束，而“权重”代表您对违反约束的重视程度。

然后你可以把问题写成：

```
Minimize sum_{i in N} s_i + wX dX + wY dY + wZ dZ
Subject to:
      dX >= sum_{i in N} X_i s_i - X_min
      dY >= sum_{i in N} Y_i s_i - Y_min
      dZ >= sum_{i in N} (Z_i - ZZ) s_i
      foreach i in N, s_i in {0, 1}
      dX, dY, dZ >= 0 
```

然后，您可以对 wX、wY 和 wZ 进行参数化，以便确定目标的优先级：例如，对于较大的权重值，模型将返回“硬绑定”解决方案（如果存在）；那么，与另一个相比，具有较高权重的约束“不太可能”被违反（当然，它并不完全那么简单，只是给出一个想法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T19:27:51.857

这听起来像，例如，模拟退火

[http://en.wikipedia.org/wiki/Simulated_annealing](http://en.wikipedia.org/wiki/Simulated_annealing)

可以很好地解决这个问题。

只需使用合适的软化目标函数（即，对您拥有的 4 个目标中的每一个进行惩罚），然后开始退火。

一些术语：这绝对不是线性编程，因为您的变量是二进制变量（即，是否包含此项）。

如果您的目标函数足够好，您可以使用贪心算法来真正快速地获得合理的结果

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T08:44:25.683

您描述的问题类似于背包问题。在背包问题中，您有一定尺寸的特定袋子和特定尺寸且具有特定价值的物品。然后，您希望在不超过大小的情况下最大化该值。

但是，您的问题有点不同。我会将其表述为最小化 X、Y 和 Z 值的总和以及最小化项目的数量，并对代表下限的 X、Y 和 Z 施加约束。通过这个定义，您可以看到您的问题实际上是多目标的（我假设其中一些目标是相互冲突的，例如最小化具有可行空间的项目）。您必须编写的函数称为适应度函数，用于计算某个选择的质量。要处理约束，您可以使用作为适应度返回的惩罚，或者如果您可以在算法中处理约束，请指定约束违反的程度。

我会使用启发式方法来解决这个问题。为此，我们需要选择问题解决方案的表示（数据结构）。

就像在背包中一样，您可以选择二进制表示。这意味着对于每个项目，您的二进制向量中都有一个维度，如果包含则为 1，如果不包含则为 0。向量的长度等于项目的数量。

至于求解器，存在许多用于这种表示的元启发式算法。但最接近的选择可能是在考虑二进制编码的情况下开发的遗传算法。如果您想以多目标方式解决问题，我会选择 NSGA-II 或 SPEA2 作为算法。如果您以加权和方法或通过其他方式将您的目标组合成单个值，那么 John Holland 定义的标准遗传算法就足够了。多目标算法的优势在于它们探索所有非支配解决方案的帕累托前沿，例如导致 X 较大但 Y 和 Z 不及其他解决方案（例如 X、Y 和 Z 最小）的解决方案，但项目的数量更高。

已经提到的模拟退火算法是解决此类问题的另一种元启发式算法。但是，目前尚无法判断哪个会更好。然而，当您事先不知道适应值的范围时，模拟退火有点难以配置，因为您需要一个初始温度和适合该范围的冷却计划。

您还可以采用更简单的构造启发式方法，例如以贪婪的方式工作（例如，始终采用 X、Y 和 Z 最大的项目，该项目要么刚好低于或达到边界。但我认为元启发式会找到更好的解决方案。

# amazon-s3 - 如何限制 AWS 资源消耗？

> ID：13769400
> 
> 赞同：2
> 
> 时间：2012-12-07T19:02:46.503
> 
> 标签：amazon-s3, amazon-web-services, amazon

s3 中的任何公共文件是否是某人钱包的开放保险库？

我已经看到了一些脚本和外部工具来监控和做出反应，我想知道目前是否有更好的方法来限制 AWS 资源消耗。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T10:48:58.497

如果达到某个限制，您可以使用 CloudWatch（AWS 内部监控工具）设置[通知。](http://docs.amazonwebservices.com/AmazonCloudWatch/latest/DeveloperGuide/monitor_estimated_charges_with_cloudwatch.html)收到此类通知后，您可以限制对该存储桶/文件的访问。

您可以轻松设置服务器访问日志（查看[文档](http://docs.amazonwebservices.com/AmazonS3/latest/dev/ServerLogs.html)），这将允许您检查您是否受到攻击，以及被谁攻击。例如：

```
$ ./s3curl.pl --id YOUR_AWS_ACCESS_KEY_ID --key YOUR_AWS_SECRET_ACCESS_KEY -- -s -v 'https://s3.amazonaws.com/mybucket?logging' > mybucket.logging 
```

您有一组可以定义的[限制。](http://docs.amazonwebservices.com/AmazonS3/latest/dev/AccessPolicyLanguage_ElementDescriptions.html#Condition)您可以根据 IP 范围甚至通过引用进行限制（仅当引用的站点是您的站点时才允许下载图像）。例如：

```
{
  "Version":"2008-10-17",
  "Id":"http referrer policy example",
  "Statement":[
    {
      "Sid":"Allow get requests referred by www.mysite.com and mysite.com",
      "Effect":"Allow",
      "Principal":"*",
      "Action":"s3:GetObject",
      "Resource":"arn:aws:s3:::example-bucket/*",
      "Condition":{
        "StringLike":{
          "aws:Referer":[
            " http://www.mysite.com/*",
            " http://mysite.com/*"
          ]
        }
      }
    }
  ]
} 
```

无论如何，一次黑客攻击的代价是相当低的。S3 定价为每 GB 0.12 美元，每 10,000 个 GET 请求 0.01 美元。您需要付出巨大的努力和数百万的请求才能获得一笔巨额账单。

我建议您在努力保护它之前设置上面的通知并跟踪对您的存储桶的访问。

发现问题后，您可以使用上述选项来保护它，以及设置[VPC](http://aws.amazon.com/vpc/)（无需额外费用）并使用您最喜欢的安全软件进一步控制您的内容。

通常的问题是让人们查看您的内容，而 S3 可以轻松地以相当低的成本和工作量发布您想要的尽可能多的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T19:56:45.827

AWS 确实有一些内置限制（例如，大约 20 个并发实例，除非您填写[此表格](http://aws.amazon.com/contact-us/ec2-request/)）

不过，最好的选择是设置一些警报并使用[newvem等工具进行整合](http://www.newvem.com/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-01-10T13:37:22.510

Newvem 不可用，因为它现在已被 Datapipe 收购。

[https://techcrunch.com/2013/09/10/datapipe-acquires-newvem-an-analytics-service-for-monitoring-aws/](https://techcrunch.com/2013/09/10/datapipe-acquires-newvem-an-analytics-service-for-monitoring-aws/)

# php - str_replace() 适用于 WampServer 但不适用于实时服务器？

> ID：13769401
> 
> 赞同：1
> 
> 时间：2012-12-07T19:02:49.793
> 
> 标签：php, javascript

我有一个构建多行字符串的函数，该字符串需要作为 JavaScript 变量回显，因此在构建字符串之后，我运行它，`str_replace()`然后像这样返回它：

```
return str_replace("\r\n", "\\\r\n", $output); 
```

这是奇怪的事情：这在我运行 WampServer 的开发机器上运行良好，但它不会在我的实时服务器（运行 Apache 的 VPS 和最新版本的 PHP）上的行尾添加斜杠。

例子：

```
return (str_replace("\r\n", "\\\r\n",
        'this
        is
        a
        test')); 
```

开发。机器：

```
this\ is\ a\ test 
```

直播服务器：

```
this is a test 
```

我一直在查看文档，但不知道为什么会这样。有任何想法吗？

**解决方案：**

```
return (str_replace(PHP_EOL, '\\' . PHP_EOL,
        'this
        is
        a
        test')); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T19:06:46.753

在windows你有\r\n，但在linux你只有\n，所以这个函数不匹配任何\r\n

你应该`PHP_EOL`改用

# c# - 实体模型 - 我应该使用 context.Project.Create() 还是使用 new 关键字创建实例

> ID：13769407
> 
> 赞同：0
> 
> 时间：2012-12-07T19:03:02.053
> 
> 标签：c#, entity-framework

您好，感谢您花时间回答我的问题。

我想使用实体框架定义和创建一个实体（名为项目）的实例。我是否使用`context.Projects.Create()`或`Project p = new Project():`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:11:57.410

我总是使用 new 创建它，然后稍后将其添加到上下文中（可能通过存储库或服务层）

通过上下文创建它会创建对上下文的要求，并且看起来不太好。

# ios - 从站点获取 XML 文件到电话

> ID：13769413
> 
> 赞同：3
> 
> 时间：2012-12-07T19:03:27.813
> 
> 标签：ios, xcode, ios6

行。所以我有我的第一个 iPhone 应用程序原型，它将解析给定的 XML 文件。该文件与构成应用程序的所有其他文件一起用于测试目的，但最终我希望应用程序从 Web 服务中提取 XML 数据。

所以我编写了一个 PHP 脚本来读取数据并为我创建一个 XML 文件。但是我该如何将 XML 文件从 Web 服务器获取到手机呢？

这就是我所拥有的：

1.  可通过 URL 访问的 XML 文件 - 即 //localhost/v/p.xml
2.  一个 iOS 6 应用程序，可以解析当前加载在应用程序中的 XML 文件（放在我的 XCode 项目中的 Supporting Files 文件夹下）。

那么将 XML 文件传送到手机的最佳方式是什么？LazyTableImages 是我应该看的东西吗？

我应该这样做：

```
NSURL *url = [[NSURL alloc] initFileURLWithPath:@"http://localhost/v/p.xml"];
NSData *xmlData = [[NSData alloc] initWithContentsOfURL:url];

//NSString *path = [[NSBundle mainBundle] pathForResource:@"profileXML" ofType:@"xml"];
//NSData *xmlData = [[NSData alloc] initWithContentsOfFile:path]; 
```

前 2 行在哪里替换注释掉的行？就这么简单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:11:40.757

您可以使用`stringWithContentsOfURL:encoding:error:`, 记录在这里：

[http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)

例如：

```
[NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://localhost/v/p.xml"] encoding:NSUTF8StringEncoding error:nil]; 
```

**更新：**

正如 Jim 所说，`NSURLConnection`它是非阻塞的，如果您想保护您的文件不被公众访问，它允许您提交凭证。如果你想使用它，它看起来像这样：

```
NSString *authenticationURL = @"http://foo.bar";
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:authenticationURL]];
NSString *escUsername = [username stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSString *escPassword = [password stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

[request setHTTPMethod: @"POST"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"content-type"];
[request setHTTPBody:[[NSString stringWithFormat:@"username=%@&password=%@", escUsername, escPassword] dataUsingEncoding:NSUTF8StringEncoding]];

NSURLConnection *urlConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

#pragma mark Url connection delegate methods

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    NSString *responseText = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    NSLog(@"%@", responseText);  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T21:01:44.033

您的示例应该按预期工作*(1)*，但会导致应用程序在第二行冻结一段时间。*该方法同步*下载文件，这通常是不需要的（除非您在后台队列上运行它）。

我会用`+[NSURLConnection sendAsynchronousRequest:queue:completionHandler:]`. 这是下载内容的最简单的*异步*方式。

例子：

```
NSURL *url = [NSURL URLWithString:@"http://localhost/v/p.xml"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[NSURLConnection sendAsynchronousRequest:request
                                   queue:[NSOperationQueue mainQueue]
                       completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
                                              // Do something with the `data` unless you have `error`.
                                          }]; 
```

* * *

*(1)*我只是不确定你的构造方式`NSURL`。它说`initFileURLWith`**`Path`**，但你绝对没有通过那里的路径。

# r - 翻转中的散点图字符串

> ID：13769417
> 
> 赞同：4
> 
> 时间：2012-12-07T19:03:45.113
> 
> 标签：r, googlevis

我有一个使用 googleVis 的散点图，我想定义当我将鼠标悬停在数据点上时显示的文本。当我尝试使用非数字数据时，我收到一条错误消息。这是代码：

```
library(googlVis)
df1 <- data.frame(id = seq(1,10,1), var1 = runif(10), var2 = runif(10))
df1$names <- c("jim","nancy","suzy","mark","alex","jen","luz","jeff","paula","amir")
head(df1)
df1Plot <- gvisScatterChart(df1[,2:4])
plot(df1Plot) 
```

当我将鼠标悬停在情节上的点上时，我希望显示此人的姓名。

有什么建议么？

# android - Eclipse 设备未显示在设备选择器中

> ID：13769420
> 
> 赞同：3
> 
> 时间：2012-12-07T19:03:56.257
> 
> 标签：android, ddms

我正在尝试按照此处指定的方式运行 hello world 程序 -

[创建一个安卓项目](http://developer.android.com/training/basics/firstapp/creating-project.html)

但是我的索尼爱立信 xperia 没有出现在运行配置或 android 设备选择器上

它出现在 DDMS 中，所以我不知道为什么它不起作用

当我在命令提示符下键入 adb devices 时，我的手机也会出现

我已经下载了索尼电脑伴侣并在我的手机上设置了 USB 调试

然而它仍然没有出现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:37:54.690

对于codeMagic - 是的，我拔下电缆并将其放回原处后，它就做到了！

# javascript - 添加 JQTouch 加载图像 onClick

> ID：13769421
> 
> 赞同：0
> 
> 时间：2012-12-07T19:04:00.227
> 
> 标签：javascript, jquery, ajax, jqtouch

我想知道是否有办法将 loading.gif 图像添加到通过链接链接的所有页面。. 我已经在 StackOverFlow 上阅读了几个小时，但没有发现任何有用的东西。我想用它来显示加载图像并禁用按钮，直到页面加载完毕，然后显示页面。

因此，在文档打开时显示加载图像，然后在文档加载后删除加载图像。

我会粘贴一些代码，但我尝试过的所有代码都不起作用。有人可以引导我朝着正确的方向前进，或者如果有一个简单的代码片段，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:48:59.840

这适用于使用 Zepto 的 jQTouch（尚未使用 jQuery 测试）。

HTML：

```
<div id="jqt">
    ...
    <div id="loading"></div>
</div> 
```

CSS：

```
div#jqt #loading {
  background: rgba(0,0,0,0.5) url('../images/scanner/loading.gif') 50% 50% no-repeat;
  z-index: 999;
  position: fixed;
} 
```

JS：

```
$(document).on('ajaxStart', function(){
    $('#loading').addClass('current');
});

$(document).on('ajaxStop', function(){
    $('#loading').removeClass('current');
}); 
```

# c# - 功能的默认访问级别

> ID：13769427
> 
> 赞同：-1
> 
> 时间：2012-12-07T19:04:25.490
> 
> 标签：c#, .net, vb.net, access-modifiers

> **可能重复：**
> [如果您不使用访问标识符，调用的方法是什么？](https://stackoverflow.com/questions/13768326/what-is-a-method-called-if-you-do-not-use-an-access-identifier)

VB.NET 或 C# 中函数的默认访问级别是什么？

例子：

VB.NET

```
Function GetFoo() as Foo
    Return New Foo()
End Function 
```

C＃

```
foo GetFoo()
{
    return new Foo();
} 
```

我知道默认情况下，类是私有的。如果未指定任何内容，成员是否只是继承其父级的访问级别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T19:11:00.587

对于 C#，方法和字段默认是私有的。

对于 VB，方法默认是公共的。

字段在 VB 中更复杂——在结构中，默认访问是公共的，但对于类，默认访问是私有的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T19:07:13.023

根据C# 的[http://msdn.microsoft.com/en-us/library/ms173121.aspx](http://msdn.microsoft.com/en-us/library/ms173121.aspx)，它是私有的。

它位于类和结构可访问性部分而不是类和结构成员可访问性部分下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T19:06:28.453

成员默认是私有的，包括其他类型、属性、事件、方法、构造函数和变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T19:07:00.317

[http://msdn.microsoft.com/en-us/library/ba0a1yw2(v=VS.71).aspx](http://msdn.microsoft.com/en-us/library/ba0a1yw2(v=VS.71).aspx)

默认情况下，类（函数）的成员设置为私有。

# java - 启动 tomcat 加载 servlet 时出现 java.lang.ClassCastException

> ID：13769429
> 
> 赞同：0
> 
> 时间：2012-12-07T19:04:27.527
> 
> 标签：java, spring, tomcat, servlets, struts

当尝试从 SWT 应用程序中启动嵌入式 tomcat Web 应用程序时，我收到错误（下面的堆栈跟踪）：

**java.lang.ClassCastException：org.apache.struts.action.ActionServlet** 和**java.lang.ClassCastException：org.apache.jasper.servlet.JspServlet**

我已经搜索了**/lib/**目录和**/WEB-INF/lib**目录中的所有 jar，并且没有找到对任何 Servlet 类的任何重复引用。

该应用程序使用的是 Tomcat 6.0.36 和 Struts 1.3.10

应用程序源代码构建和编译成功，没有错误。

**<项目>\lib 中的 Jar 文件**

```
lib\annotations-api.jar
lib\axis\axis-ant.jar
lib\axis\axis.jar
lib\axis\commons-discovery-0.2.jar
lib\axis\jaxrpc.jar
lib\axis\junit.jar
lib\axis\saaj.jar
lib\axis\wsdl4j-1.5.1.jar
lib\catalina.jar
lib\com.dom.jsso.common-server.jar
lib\commons-dbcp-1.2.1.jar
lib\commons-logging-1.1.jar
lib\commons-pool.jar
lib\derby.jar
lib\derbytools.jar
lib\dom4j.jar
lib\ehcache-1.1.jar
lib\el-api.jar
lib\hibernate3.jar
lib\jasper.jar
lib\jsp-api.jar
lib\jta.jar
lib\odmg.jar
lib\org.springframework.asm-3.1.3.RELEASE.jar
lib\org.springframework.beans-3.1.3.RELEASE.jar
lib\org.springframework.context-3.1.3.RELEASE.jar
lib\org.springframework.core-3.1.3.RELEASE.jar
lib\org.springframework.web-3.1.3.RELEASE.jar
lib\org.springframework.web.struts-3.1.3.RELEASE.jar
lib\servlet-api.jar
lib\tomcat-coyote.jar
lib\tomcat-dbcp.jar
lib\tomcat-juli.jar
lib\tools\ojdbc14.jar 
```

**项目中使用的其他 jars（用于 JFace 和 SWT）**

```
eclipse\plugins\org.eclipse.jface_3.7.0.v20110928-1505.jar
eclipse\plugins\org.eclipse.jface.text_3.7.2.v20111213-1208.jar
eclipse\plugins\org.eclipse.swt_3.7.2.v3740f.jar
eclipse\plugins\org.eclipse.swt.win32.win32.x86_3.7.2.v3740f.jar 
```

**tomcat\webapps\<project>\WEB-INF\lib 中的 Jar 文件**

```
WEB-INF\lib\antlr-2.7.2.jar
WEB-INF\lib\commons-beanutils-1.8.0.jar
WEB-INF\lib\commons-digester-1.8.jar
WEB-INF\lib\commons-fileupload-1.1.1.jar
WEB-INF\lib\commons-validator-1.3.1.jar
WEB-INF\lib\oro-2.0.8.jar
WEB-INF\lib\struts-core-1.3.10.jar
WEB-INF\lib\struts-taglib-1.3.10.jar 
```

**tomcat/conf/web.xml 的 servlet 部分**

```
<servlet>
    <servlet-name>jsp</servlet-name>
    <servlet-class>org.apache.jasper.servlet.JspServlet</servlet-class>
    <init-param>
        <param-name>fork</param-name>
        <param-value>false</param-value>
    </init-param>
    <init-param>
        <param-name>xpoweredBy</param-name>
        <param-value>false</param-value>
    </init-param>
    <load-on-startup>3</load-on-startup>
</servlet> 
```

**web.xml 的 servlet 部分**

```
<servlet>
        <servlet-name>action</servlet-name>
        <servlet-class>org.apache.struts.action.ActionServlet</servlet-class>
        <init-param>
            <param-name>config</param-name>
            <param-value>/WEB-INF/struts-config.xml,/WEB-INF/struts-config-adm.xml,/WEB-INF/struts-config-ajax.xml</param-value>
        </init-param>
        <init-param>
            <param-name>debug</param-name>
            <param-value>2</param-value>
        </init-param>
        <init-param>
            <param-name>detail</param-name>
            <param-value>2</param-value>
        </init-param>
        <load-on-startup>2</load-on-startup>
    </servlet> 
```

**错误堆栈跟踪：**

```
Dec 7, 2012 1:46:08 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from file [C:\projects\JSSO\com\example\conf\config.xml]
Dec 7, 2012 1:46:08 PM com.example.tomcat.embeddedTomcat init
INFO: Starting the tomcat bean
Dec 7, 2012 1:46:09 PM org.apache.catalina.startup.Embedded start
INFO: Starting tomcat server
Dec 7, 2012 1:46:09 PM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.36
Dec 7, 2012 1:46:10 PM org.apache.catalina.core.ApplicationContext log
INFO: Marking servlet action as unavailable
Dec 7, 2012 1:46:10 PM org.apache.catalina.core.StandardContext loadOnStartup
SEVERE: Servlet / threw load() exception
java.lang.ClassCastException: org.apache.struts.action.ActionServlet
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1149)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.startup.Embedded.start(Embedded.java:825)
    at com.example.tomcat.embeddedTomcat.init(embeddedTomcat.java:111)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1581)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1522)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:284)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at com.example.util.ServiceLocator.getModuleManager(ServiceLocator.java:26)
    at com.example.SWTMain$2.run(SWTMain.java:136)
    at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
    at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
    at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4140)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3757)
    at com.example.SWTMain.waitUntilExit(SWTMain.java:283)
    at com.example.SWTMain.main(SWTMain.java:176)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at com.example.Main.invokeLoader(Main.java:138)
    at com.example.Main.main(Main.java:123)
Dec 7, 2012 1:46:10 PM org.apache.catalina.core.ApplicationContext log
INFO: Marking servlet jsp as unavailable
Dec 7, 2012 1:46:10 PM org.apache.catalina.core.StandardContext loadOnStartup
SEVERE: Servlet / threw load() exception
java.lang.ClassCastException: org.apache.jasper.servlet.JspServlet
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1149)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.startup.Embedded.start(Embedded.java:825)
    at com.example.tomcat.embeddedTomcat.init(embeddedTomcat.java:111)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1581)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1522)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:284)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at com.example.util.ServiceLocator.getModuleManager(ServiceLocator.java:26)
    at com.example.SWTMain$2.run(SWTMain.java:136)
    at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
    at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
    at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4140)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3757)
    at com.example.SWTMain.waitUntilExit(SWTMain.java:283)
    at com.example.SWTMain.main(SWTMain.java:176)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at com.example.Main.invokeLoader(Main.java:138)
    at com.example.Main.main(Main.java:123)
Dec 7, 2012 1:46:10 PM org.apache.tomcat.util.modeler.Registry registerComponent
SEVERE: Null component null:type=JspMonitor,name=jsp,WebModule=//localhost/,J2EEApplication=none,J2EEServer=none
Dec 7, 2012 1:46:10 PM org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-8043
Dec 7, 2012 1:46:10 PM org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-8043
Dec 7, 2012 1:46:10 PM com.example.tomcat.embeddedTomcat init
INFO: Tomcat Started
Dec 7, 2012 1:46:11 PM org.apache.catalina.core.ApplicationDispatcher invoke
WARNING: Servlet jsp is currently unavailable
Dec 7, 2012 1:46:12 PM com.example.SWTMain$1 shellClosed
INFO: Closing the application
Dec 7, 2012 1:46:12 PM com.example.tomcat.embeddedTomcat shutdown
INFO: Shutting down tomcat
Dec 7, 2012 1:46:12 PM org.apache.coyote.http11.Http11Protocol destroy
INFO: Stopping Coyote HTTP/1.1 on http-8043 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:39:19.167

经过一些研究，您的类路径中有多个 struts 副本或版本，删除它们并只保留一个。虽然你说你检查过，但我找到的所有答案都指向这一点，所以你可能有但没有找到。

另外，尝试从 war 文件中删除 jar，因为它已经包含在内。

参考：

> struts.jar 文件不应保存在诸如 WAS/lib 之类的公共区域中。它应该包含在每个 struts 应用程序的 WEB-INF/lib 文件夹中。

[http://www.coderanch.com/t/46849/Struts/Failed-load-servlet-Struts](http://www.coderanch.com/t/46849/Struts/Failed-load-servlet-Struts)

> 从您的 war lib 文件夹或全局公共 lib 目录中删除 Struts 核心 API jar。在两个地方有两个相同的罐子，它们由不同的类加载器加载，因此强制转换失败。

[http://www.liferay.com/community/forums/-/message_boards/message/6813153](http://www.liferay.com/community/forums/-/message_boards/message/6813153)

搜索包含类 org.apache.struts.action.ActionServlet 的确切 jar

> Struts 不支持到同一个动作 servlet 实例的多个 servlet 映射。

[http://grokbase.com/t/struts/user/02bqqdrxjt/struts-1-1b2-and-sybase-easerver-4-1-0-jaguar](http://grokbase.com/t/struts/user/02bqqdrxjt/struts-1-1b2-and-sybase-easerver-4-1-0-jaguar)

# php - 表中最后编辑的行？

> ID：13769431
> 
> 赞同：-3
> 
> 时间：2012-12-07T19:04:33.797
> 
> 标签：php, mysql, select

> **可能重复：**
> [如何获取 MySQL 中最后更新行的 ID？](https://stackoverflow.com/questions/1388025/how-to-get-id-of-the-last-updated-row-in-mysql)

我有我称之为 VAUCER 的表，里面有行 ID、BROJ、TEKST、DATUM、VREME

ID 是主索引 AI，BROJ 是一些数字，TEKST 是 TXT，DATUM 是 DATE，VREME 是一些数字，我把它设为 time()；

我想只显示一个最后编辑的记录，而不是所有记录，如何 mysql 查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:07:02.617

假设 DATE 类型的 DATUM 具有上次编辑时间的日期，那么您可以执行以下操作：

```
select * from VAUCER order by DATUM desc LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:08:17.470

> 每次更新行时是否更新 DATE 或 VREME 值？

尝试这个：`SELECT * FROM VAUCER ORDER BY DATUM DESC LIMIT 1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T19:08:20.917

假设 DATUM 在每次更改时都会更新

```
SELECT * FROM `VAUCER` ORDER BY `DATUM` DESC LIMIT 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T20:25:54.903

使用表中的 TIMESTAMP 列很容易。添加定义为 ON UPDATE CURRENT_TIMESTAMP 的新 TIMESTAMP 列：

```
ALTER TABLE VAUCER
  ADD COLUMN time_stamp_field TIMESTAMP DEFAULT CURRENT_TIMESTAMP
  ON UPDATE CURRENT_TIMESTAMP 
```

MySQL 将在任何更新时将当前日期时间写入单元格，然后您可以轻松找到上次编辑的记录：

```
select * from VAUCER order by time_stamp_field desc limit 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T20:42:24.003

这是显示表中最后编辑的 id 的 anwser 现在添加新行并使其成为日期时间 当插入表时

```
 $now=date("Y-m-d H:i:s"); 
```

并在 NOW 行中插入 $now

当 mysql 查询执行此操作时

```
SELECT * FROM SOMETABLE ORDER BY NOW DESC LIMIT 1; 
```

# python - 如何在 PyPy 上使用 Biopython？

> ID：13769433
> 
> 赞同：2
> 
> 时间：2012-12-07T19:04:42.080
> 
> 标签：python, bioinformatics, pypy, biopython

我知道 PyPy 在 Numpy 和 Biopython 中的其他东西方面存在问题，但并非所有 BioPython 模块都使用这些东西......有人知道**如何将模块 Bio 导入和使用到 PyPy 中吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T01:42:19.810

您应该能够像在常规 Python 版本中一样安装它。PyPy 已经包含在 Biopython 的集成测试中。

[使用virtualenvwrapper](http://www.doughellmann.com/articles/pythonmagazine/completely-different/2008-05-virtualenvwrapper/index.html)的示例：

```
$ mkvirtualenv -p /usr/bin/pypy biopy
$ workon biopy
$ cd biopython  # or wherever your biopython directory is
$ python setup.py install
$ python -c 'import Bio' 
```

如果您没有从上面的命令中看到任何错误消息，那么它应该可以工作。

# permissions - Virtualenv hook.log

> ID：13769436
> 
> 赞同：3
> 
> 时间：2012-12-07T19:04:58.043
> 
> 标签：permissions, virtualenv, virtualenvwrapper

我的团队使用 virtualenvwrapper 来管理我们项目的 virtualenvs。但是，似乎我们的 hook.log 组权限不断更改为单个用户，而不是保留所有用户拥有的共享组（在我们的例子中，www-data）。有人有这方面的经验吗？

这是我尝试获取 virtualenvwrapper.sh 时遇到的错误：

```
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/virtualenvwrapper/hook_loader.py", line 83, in main
    backupCount=1,
  File "/usr/lib/python2.7/logging/handlers.py", line 118, in __init__
    BaseRotatingHandler.__init__(self, filename, mode, encoding, delay)
  File "/usr/lib/python2.7/logging/handlers.py", line 65, in __init__
    logging.FileHandler.__init__(self, filename, mode, encoding, delay)
  File "/usr/lib/python2.7/logging/__init__.py", line 897, in __init__
    StreamHandler.__init__(self, self._open())
  File "/usr/local/lib/python2.7/dist-packages/virtualenvwrapper/hook_loader.py", line 24, in _open
    rtv = logging.handlers.RotatingFileHandler._open(self)
  File "/usr/lib/python2.7/logging/__init__.py", line 916, in _open
    stream = open(self.baseFilename, self.mode)
IOError: [Errno 13] Permission denied: '/var/env/hook.log'
virtualenvwrapper.sh: There was a problem running the initialization hooks. 
```

# css - 我的“斑马条纹”表不打印条纹

> ID：13769437
> 
> 赞同：3
> 
> 时间：2012-12-07T19:05:02.083
> 
> 标签：css, printing, zebra-striping

我有一个不是“打印机友好”的页面，所以我的用户要求选择打印出一个显示搜索结果的表格。我创建了一个打印机友好页面，该页面通过一个按钮打开并从原始表格中填充。新页面根据需要显示原始表格中的“斑马条纹”。但是当我拉起打印预览（浏览器菜单>文件>打印预览）时，条纹消失了。显示字体更改。所有其他样式更改都会显示出来。但是影响条纹的 TR 阴影不会转换。

这是我的代码：

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="ISO-8859-1">
    <meta http-equiv="expires" value="Thu, 16 Mar 2000 11:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <script type="text/javascript" src="/pkc/jscripts/jquery_current.js"></script>
    <title>Product Knowledge Center - Results</title>
    <style>
      body{
        font-family: arial;
      }
      div{
        font-size: 12pt;
      }
      .odd{ background: #DDDDDD; }
      .even{ background: #FFFFFF; }
      .hdrSpan{ 
        width: 200px;
        display: inline; 
        float: left;
      }
    </style>
  </head>
  <body>
    <div id="divHeader">
      <span class="hdrSpan">Line</span>
      <span id="spnLine"></span><br />
      <span class="hdrSpan">Company</span>
      <span id="spnCompany"></span><br />
      <span class="hdrSpan">State</span>
      <span id="spnState"></span><br />
      <span class="hdrSpan">Eff. Date</span>
      <span id="spnEffDt"></span>
    </div>
    <br />
    <hr />
    <div id="divResults">
    </div>
    <script type="text/javascript">
      $(document).ready(function(){
        $("#spnLine").text(window.opener.$('[name="Line"] option:selected').text());
        $("#spnCompany").text(window.opener.$('[name="Company"] option:selected').text());
        $("#spnState").text(window.opener.$('[name="State"] option:selected').text());
        $("#spnEffDt").text(window.opener.$('[name="effectiveDate"]').val());
        $("#divResults").html(window.opener.$("#idResults").html());
        $("#resultsTbl tr").removeAttr("onclick");
      });
    </script>
  </body>
</html> 
```

正如我希望的那样，代码非常简单明了。我只是不明白为什么印刷版上没有出现条纹。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T13:14:21.117

您无能为力，因为此选项取决于用户在打印网页时直接配置它。理想情况下，用户应该决定是否要在打印时使用更多或更少的墨水。

Webkit 浏览器有一个解决方法：您可以通过将以下代码添加到您的 CSS 来强制背景颜色打印：

```
-webkit-print-color-adjust: exact; 
```

在 Firefox 和 IE 上，您可以通过检查页面配置对话框中的选项来设置它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T19:23:38.917

打印机设置通常包括打印背景颜色/图像的选项。

这是最好的答案 - 到目前为止（15 分钟？）。我将把它标记为我使用的那个。我在页面加载时添加了一个警报，告诉用户如何在他们的打印输出上获得条纹，现在我要开始下一个问题了......

# jquery - 此 html 的 Css 选择器和 Jquery

> ID：13769440
> 
> 赞同：0
> 
> 时间：2012-12-07T19:05:16.500
> 
> 标签：jquery, html, jquery-selectors

我有下一个 HTML：

```
 <div class="grid_4 col" id="countries">
            <div class="header">COUNTRIES</div>
            <div class="scroll-area">
                <ul id="countrySelector">

                <li><input type="checkbox" value="3" name="0" id="p0"> Algeria</li>
                <li><input type="checkbox" value="3" name="0" checked="true" id="p1"> Angola</li>
                <li><input type="checkbox" value="3" name="0" checked="true" id="p2"> Benin</li>
                <li><input type="checkbox" value="3" name="0" checked="true" id="p3"> Botswana</li>
                <li><input type="checkbox" value="3" name="0" checked="true" id="p4"> Burkina Faso</li>
                <li><input type="checkbox" value="3" name="0" id="p5"> Burundi</li>
                <li><input type="checkbox" value="3" name="0" id="p6"> Cameroon</li>
                <li><input type="checkbox" value="3" name="0" id="p7"> Cape Verde</li>
                <li><input type="checkbox" value="3" name="0" id="p8"> Central African Republic</li>
                <input type="checkbox" value="2" name="3" id="p142"> Tuvalu</li>
                <li><input type="checkbox" value="2" name="3" id="p143"> Vanuatu</li>
                <li><input type="checkbox" value="2" name="3" id="p144"> Wallis and Futuna</li>
            </div>                
        </div> 
```

我想： - 我希望使用 name 属性（在本例中为 3）将所有输入 id（p143，p144）放入一个数组中。

*   然后我想删除包含该输入的 LI 元素。我知道如果我通过 CSS 选择器获取输入元素，我会使用 $"CSSSELECTOR".parent().remove();

在最后阶段，如何对该 CSS 选择器进行更改以再次使用该名称获取 Checked=True （我再次想要 ID）。

对于第二个我正在尝试类似的东西：

```
jQuery("ul#countrySelector > li > checkbox[name=\"" + index + "\"]").parent("li").remove(); 
```

在这种情况下，index 是 0 或 3，但它不起作用。

我不需要完整的解决方案，最好开始考虑 css 选择器。

谢谢。

解决了。

HTML 不正确，因为我复制它不好，它是由其他事件生成的。

我只将第一个答案（Wirey）标记为正确，因为其他人使用 EACH 方法，我认为 Wiry 解决方案的性能是最好的，而这个 HTML 只是几个级别中所有生成代码的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:44:05.460

`<li>`一旦你用缺失和`</ul>`.. 修复你的标记

第一个问题是你的选择器

```
jQuery("ul#countrySelector > li > checkbox[name=\"" + index + "\"]")
// it says starting from ul with id=countrySelector > find children element li > find children element checkbox 
```

它不是复选框元素，而是复选框类型的输入元素，所以您需要的是

```
jQuery("ul#countrySelector > li > input[type=checkbox][name=\"" + index + "\"]")
// or just jQuery("ul#countrySelector > li > input[name=\"" + index + "\"]") if these are the only elements with that name 
```

您声明您想要一个具有这些元素 id 的数组。因此，您可以使用 jQuery 的[.map() 函数](http://api.jquery.com/jQuery.map/)将其返回到集合中，然后使用[.get()](http://api.jquery.com/get/)来获取数组

```
var ids = jQuery("ul#countrySelector > li > input[type=checkbox][name=\"" + index + "\"]").map(function(){
    return this.id;
}).get(); // <-- use get() to get id's back as an array - now ids contains all the id's in an array 
```

如果您只想获取选中的项目，可以使用[:checked 选择器](http://api.jquery.com/checked-selector/)仅获取选中的输入

```
jQuery("ul#countrySelector > li > input[type=checkbox][name=\"" + index + "\"]:checked") 
```

一旦你得到你的选择器，你就可以`li`在你的例子中找到你的喜欢并删除

```
$(yourselector).parent('li').remove();
// or if it's nested deeper $(yourselector).closest('li').remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:43:02.797

真的很难理解你想要做什么，但这里有一个删除`LI`. 首先，您的**HTML**不正确，此处已修复：

```
<div class="grid_4 col" id="countries">
    <div class="header">COUNTRIES</div>
    <div class="scroll-area">
        <ul id="countrySelector">
            <li><input type="checkbox" value="3" name="0" id="p0"> Algeria</li>
            <li><input type="checkbox" value="3" name="0" checked="true" id="p1"> Angola</li>
            <li><input type="checkbox" value="3" name="0" checked="true" id="p2"> Benin</li>
            <li><input type="checkbox" value="3" name="0" checked="true" id="p3"> Botswana</li>
<li><input type="checkbox" value="3" name="0" checked="true" id="p4"> Burkina Faso</li>
            <li><input type="checkbox" value="3" name="0" id="p5"> Burundi</li>
            <li><input type="checkbox" value="3" name="0" id="p6"> Cameroon</li>
            <li><input type="checkbox" value="3" name="0" id="p7"> Cape Verde</li>
            <li><input type="checkbox" value="3" name="0" id="p8"> Central African Republic</li>
        <li><input type="checkbox" value="2" name="3" id="p142"> Tuvalu</li>
            <li><input type="checkbox" value="2" name="3" id="p143"> Vanuatu</li>
            <li><input type="checkbox" value="2" name="3" id="p144"> Wallis and Futuna</li>
        </ul>
    </div>                
</div> 
```

将使用 JQuery 示例进行编辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T19:44:49.427

如果他们的属性是'0'：

```
var countryArray = new Array();
$('#countries input[type=checkbox]').each(function(){
    if ($(this).attr('name') == '0') {
        countryArray.push($(this).attr('id'));
        $(this).parent('li').remove();
    }
})
console.log(countryArray) 
```

如果他们的属性是'0'并且他们被检查：

```
var countryArray = new Array();
$('#countries input[type=checkbox]:checked').each(function(){
    if ($(this).attr('name') == '0') {
        countryArray.push($(this).attr('id'));
        $(this).parent('li').remove();
    }
})
console.log(countryArray) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T19:58:17.087

这是你想要的？这将遍历所有复选框并将详细信息存储在数组中。

示例 JSFiddle：http: [//jsfiddle.net/Y84vr/32/](http://jsfiddle.net/Y84vr/32/)

```
$(document).ready(function(){
    var myArray = createArray(20,3);
    var i=0;
    $('input[type="checkbox"]').each(function(){
        var isChecked = false;
        if ($(this).is('[checked]')) {
            isChecked = true;
        }    
        myArray[i][0] = $(this).attr('id');
        myArray[i][1] = $(this).attr('name');
        myArray[i][2] = isChecked;
        i++;
    });
    for(var c=0;c<15;c++){
       $('#output').append(myArray[c][0] + "  -  " + myArray[c][1] + "  -  " + myArray[c][2] + "<br/>");
    }
});

function createArray(dimX,dimY){
    var arr = [];
    for(var x = 0; x < dimX; x++){
       arr[x] = [];    
       for(var y = 0; y < dimY; y++){
          arr[x][y] = '';    
       }    
    }  
    return arr;
} 
```

# php - PHP 安装浏览器

> ID：13769442
> 
> 赞同：0
> 
> 时间：2012-12-07T19:05:21.343
> 
> 标签：php, windows, browser, ini, browscap

我不能`get_browser()`去上班。

我按照本教程安装browscap：[http](http://code18.blogspot.fr/2009/07/installer-browscapini-pour-php.html) ://code18.blogspot.fr/2009/07/installer-browscapini-pour-php.html 但它对我不起作用。当我在核心部分显示 PHP 信息时，browscap 具有“没有价值”。

我在 php.ini 中添加了这个：

```
[browscap]
browscap = C:\Windows\System32\inetsrv\php_browscap.ini 
```

就在之前 ：

```
[Date]
; Defines the default timezone used by the date functions
; http://php.net/date.timezone
date.timezone = UTC 
```

我在 Windows 7 x64 上运行 WAMP 服务器。

任何人都可以帮忙吗？提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:31:36.763

从官方[浏览器功能项目下载](http://tempdownloads.browserscap.com/)

更改 php.ini

```
[browscap]
browscap = C:\..\php_browscap.ini 
```

之后，重新启动 Apache

# coldfusion - 冷熔和超过时间限制

> ID：13769445
> 
> 赞同：1
> 
> 时间：2012-12-07T19:05:37.497
> 
> 标签：coldfusion

我有一些冗长而复杂的代码，需要进行一些解析，并且需要一段时间才能完成，在这种情况下优化代码没有多大意义。

处理长执行时间并让用户知道何时完成的策略是什么？

* * *

解释为什么优化没有多大意义

该应用程序具有面向最终用户的页面和非面向最终用户的页面。在非用户区域，我正在解析几个 excel 电子表格。加载和循环这些需要很长时间。我优化了代码以在我的超时限制内运行，它今天可能工作，但一个月后我可能会导入一个 4 倍长的文件，它不会再次工作。我要解决的问题是绕过我知道需要很长时间的特定操作的 cf 超时。

我尝试过使用线程，但由于某种原因在 CF9 上工作但在 CF8 上没有工作（尽管它们受支持）

我也刚刚发现`cfsetting requestTimeOut`哪些可以做我需要做的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T14:58:40.907

几年前我有一个遗留系统也有类似的问题。

在表单发布时，我做了两件事：

1.  我开始`CFTHREAD`处理处理。

2.  我更新了一个数据库字段，让应用程序知道该作业正在处理中。

这样，无论何时查看页面，并且该数据库字段（或应用程序变量，无论您喜欢它）都设置为`true`我知道会显示一条消息，例如“请稍后再回来查看，您的请求正在处理中。”

完成`CFTHREAD`后，我会将 DB 字段更新为`false`，然后页面将恢复正常状态。回想起来，应用程序变量会是一个更好的解决方案。如果 CF 崩溃或重新启动，您的数据库不会错误地报告正在运行的进程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T19:22:30.867

您可能已经对其进行了研究，但请查看是否可以缓存任何内容，以减少等待的时间。

至于将其传达给用户，首先要确保用户知道事情何时发生。程序可以做的最糟糕的事情之一就是接收输入而不做出反应。确保用户在发生某些事情时很清楚。显示加载的方式取决于您。如果加载时间低于大约十秒左右，则可能会有沙漏，但如果等待时间较长，您可能需要进度条或类似的东西。

如果有任何方法可以允许其中一些在后台或其他进程中发生，这可能有助于减轻负载。否则，弹出一个建议，告诉他们去喝咖啡。:)

这只是一个只有一点信息的下意识的回应，但如果你能对你正在寻找的东西和粗略的加载时间估计提供更多的想法，我可能会得到更具体的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T20:10:47.000

## 方法一

我在 II6 和 CF 7 上有一个站点。我添加了这个通过 Javascript 操作的条形图。然后，我将通过 Javascript 后跟`<cfflush>`.

在站点升级到 II7.5 和 CF 9 之前它运行良好。由于某种原因`<cfflush>`不起作用，Javascript 仍然可以设置标准并取得有意义的进展。

## 方法二

这需要两个 iframe。

*   一个 iframe 运行长时间运行的进程，并且从用户视图中隐藏。

*   另一个 iframe 运行一个页面，该页面每 10 秒左右刷新一次。此页面查询慢速进程的后端日志记录。可能会晚 10 秒，但最终用户甚至可能会注意到

## 方法 3

与方法 2 相同，但使用 AJAX

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T17:15:56.033

另一种方法是使用以下内容开始您的页面：

```
<div id="displayarea">
display something here
</div>
<cfflush> 
```

然后做你需要做的任何处理。完成后，做这样的事情。

```
<cfsavecontent variable = "newdisplay_cf>
generate html here
</cfsavecontent>

<script>
<cfoutput>
var #toScript(newdisplay_cf, "newdisplay_js")#
</cfoutput>
document.getElementById("displayarea").value = newdisplay_js;
</script> 
```

这里可能有一些语法错误。我只是将代码输入到 textarea 中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-13T17:25:53.807

对于其他希望延长超时时间的人，Ben Nadel 有一篇关于“cfsetting requestTimeOut”的好帖子

[http://www.bennadel.com/blog/626-CFSetting-RequestTimeout-Updates-Timeouts-It-Does-Not-Set-Them.htm](http://www.bennadel.com/blog/626-CFSetting-RequestTimeout-Updates-Timeouts-It-Does-Not-Set-Them.htm)

这并不能解决通知的问题，但是一旦完成就会呈现页面，所以它解决了我的问题

设置多个超时级别的示例代码

```
<!--- Set the current time out to be 3 seconds. --->
<cfsetting requesttimeout="3" />

<!---
    Get the millisecond start time for page processing
    (so that later on, we can check to see how long
    the page ran overall).
--->
<cfset intStart = GetTickCount() />

<!--- Try to kill some time. --->
<cftry>

    <!---
        Here, we are killing time - 4 seconds to be
        approximate. This will exceed the request time
        out set above (3 seconds) and will throw an error.
    --->
    <cfset KillTime( 4000 ) />

    <!--- The KillTime() method call has timed out. --->
    <cfcatch>

        First Timeout!<br />

        <!---
            In an attempt to "recover" from this time out,
            update the request time out to be six seconds.
        --->
        <cfsetting requesttimeout="6" />

        <!--- Try to kill some more time. --->
        <cftry>

            <!---
                We are going to try and kill about four
                seconds. If this is in terms of the six-second
                timeout set above, this should NOT timeout.
                However, if this is in the context of the
                overall page time (including previous kill time
                calls), then this will timeout.
            --->
            <cfset KillTime( 4000 ) />

            <!--- The KillTime() method has timed out. --->
            <cfcatch>

                Second Timeout!<br />

            </cfcatch>
        </cftry>

    </cfcatch>

</cftry> 
```

# user-interface - 在采购订单输入中使用 SuiteScript 修改 Netsuite UI

> ID：13769446
> 
> 赞同：1
> 
> 时间：2012-12-07T19:05:38.383
> 
> 标签：user-interface, netsuite

**NetSuite**目前能够在采购订单的行项目输入期间“复制上一个”，但是在更改项目编号时，系统将使用项目主表中的默认值覆盖描述和单价。有人可以帮助我解决 SuiteScript 中的一个挑战，我需要解决可滚动表中的先前记录吗？即数据输入期间采购订单的第 2 行。如何引用 SuiteScript 中的上一行？在用户选择不同的项目编号后，我需要执行此代码。

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T04:02:13.187

您可以使用客户端脚本，特别是在字段更改功能中。

此代码并不完美，但应该可以帮助您入门，请确保您在采购订单交易中部署了它：

```
function fieldChanged(type, name, linenum){
    if(type == 'item' && name == 'item')
    {
        {
            var currIndex = nlapiGetCurrentLineItemIndex('item');  //Get the current index, this is the total count of line items in the transaction
            if(currIndex > 1) //You have to have at least two line items to be able to refer to the previous line item
            {
                var prev = currIndex - 1;
                var itemNo  = nlapiGetLineItemValue('item', 'item', prev); //This it the item number from the previous line item..Do whatever you want from here....
            }
        }
    }

} 
```

# c# - 通过for循环在c#中打印二维数组

> ID：13769448
> 
> 赞同：-1
> 
> 时间：2012-12-07T19:05:53.660
> 
> 标签：c#, visual-studio-2010, multidimensional-array

这是我的归档函数，它从文件中获取数据并将其放入数组中：

```
public void populate_grid_by_file()
    {
        String store_data_from_file = string.Empty;
        try
        {
            using (StreamReader reader = new StreamReader("data.txt"))
            {
                store_data_from_file = reader.ReadToEnd().ToString();
            }
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
        }
        string[] line = store_data_from_file.Split(new char[] { '\n' }, StringSplitOptions.RemoveEmptyEntries);
        for (int i = 0; i < line.Length; i++)
        {
            string[] alphabet = store_data_from_file.Split(new char[] {' '}, StringSplitOptions.RemoveEmptyEntries);
            for (int j = 0; j < alphabet.Length; j++)
            {
                Sodoku_Gri[i, j] = alphabet[j];
            }
        }            
    } 
```

这是文件中写的内容：

```
1--2--3--

3-4-4-5--

-7-3-4---

7--5--3-6

--7---4--

3-2--4-5-

------3--

2-6---7---

4---4---3-
```

这就是我希望它打印的内容：

```
1 - - 2 - - 3 - -
3 - 4 - 4 - 5 - -
- 7 - 3 - 4 - - -
7 - - 5 - - 3 - 6
- - 7 - - - 4 - -
3 - 2 - - 4 - 5 -
- - - - - - 3 - -
2 - 6 - - 7 - - -
4 - - - 4 - - 3 -
```

我想过这样做：

```
public void display_grid()
    {
        for (int row = 0; row < Sodoku_Gri.GetLength(0); row++)
        {
            for (int col = 0; col < Sodoku_Gri.GetLength(1); col++)
            {

                Console.Write(Sodoku_Gri[row, col]);
                Console.Write("  ");
            }
            Console.WriteLine();
        }
    } 
```

我只是不明白为什么二维数组在最后一行打印了 9 次 ------------ ！

它应该是一个二维数组，每个元素之间都有间距，就像我在文件中显示的数据一样，但没有间距。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:14:10.597

您正在将数据分成几行，看起来您在内部循环中的意图是处理当前行中的字符。但是，您实际上是在为每一行迭代处理整个文件，这就是为什么您的输出包含文件的所有字符 * 行数。试试这个调整：

```
 public void populate_grid_by_file()
        {
            String store_data_from_file = string.Empty;
            try
            {
                using (StreamReader reader = new StreamReader("data.txt"))
                {
                    store_data_from_file = reader.ReadToEnd().ToString();
                }
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
            }
            string[] line = store_data_from_file.Split(new char[] { '\n' }, StringSplitOptions.RemoveEmptyEntries);
            for (int i = 0; i < line.Length; i++)
            {
                //string[] alphabet = store_data_from_file.Split(new char[] {' '}, StringSplitOptions.RemoveEmptyEntries);
                string[] alphabet = line[i].Split(new char[] {' '}, StringSplitOptions.RemoveEmptyEntries)
                for (int j = 0; j < alphabet.Length; j++)
                {
                    Sodoku_Gri[i, j] = alphabet[j];
                }
            }            
        } 
```

# jquery - 什么是 jQuery18007779947370290756

> ID：13769463
> 
> 赞同：10
> 
> 时间：2012-12-07T19:07:12.990
> 
> 标签：jquery

我在我的页面中使用 jQuery，当我使用 Chrome 开发工具时，我在控制台中找到了 jQuery18007779947370290756 和 jQuery 对象。jQuery18007779947370290756 只包含几个方法。jQuery 包含更多的方法。那么 jQuery18007779947370290756 是什么？我没有页面的网址，因为它是内部页面。我包含的库只是 jquery-1.8.0.min.js 和 jquery-ui-1.8.23 并且没有 JSONP 调用。

看起来如果我`'beforeunload'`向窗口对象添加了一个全局事件。它存储在 window[expando] 中。但是，如果我将一些事件添加到其他 DOM 对象，例如`button`，并且它们存储在 jQuery.cache 中。这是 jQuery.cache 和 window[jQuery1800xxxxxxxxxxxxxxxx] 的屏幕截图我不确定为什么 2 个单击事件的 guid 都是 8。这 2 个单击事件绑定到 2 个按钮。和单击事件处理程序是相同的功能。

![在此处输入图像描述](../Images/8e8a6264a98e6eff9f520f4217d8899c.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T20:17:47.253

查看[http://code.jquery.com/jquery-latest.js](http://code.jquery.com/jquery-latest.js)我发现有一个地方正在创建类似于我们所看到的东西。

第 1522 行附近：

```
// Unique for each copy of jQuery on the page
// Non-digits removed to match rinlinejQuery
expando: "jQuery" + ( jQuery.fn.jquery + Math.random() ).replace( /\D/g, "" ), 
```

也许这是以一种导致对象出现的方式使用的。

在研究了一些之后，我更加确信这就是答案。

看看[http://jsfiddle.net/USAcv/](http://jsfiddle.net/USAcv/)

此外，对于不同版本的 jQuery，它看起来有点不同：

```
jQuery16406568800362638323  v1.6.4
jQuery18007779947370290756  v1.8.0
jQuery1820604904827339435   v1.8.2 
```

您可以看到版本位于数字的第一部分。

我还发现有些地方`elem[ expando ]`是创建的。如果`elem`是`window`那么就是这样。

例如，在 jquery-latest.js 的第 4770 行，它具有

```
if ( (cache = elem[ expando ]) === cachedkey ) { 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-07T20:21:26.417

当您在元素上存储数据时，jQuery 会将此属性添加到元素中。由于此属性位于`window`元素上，因此在您的代码中某处您正在执行的操作相当于：

```
$(window).data('something', 1); 
```

请注意，jQuery 事件也在`data`幕后使用模块，因此这也可能是因为您正在向`window`对象添加事件。

对于普通节点（即具有`nodeType`属性的元素），此值[设置为 GUID](https://github.com/jquery/jquery/blob/ab409d14bc6db42b4af3ba753be1b55fe8f897d8/src/data.js#L61) (data.js#61)，并且您要存储在该对象上的数据存储在全局 jQuery 缓存中。

但是该`window`元素没有`nodeType`属性，所以它沿着*I'm a plain JS object*的路线走；这导致数据直接存储在对象本身上（在 的情况下`window`，这*可能*是 jQuery 的错误）。

缓存位置（全局或对象上）的选择在[data.js 的 L39-45 中进行](https://github.com/jquery/jquery/blob/ab409d14bc6db42b4af3ba753be1b55fe8f897d8/src/data.js#L39-45)：

```
// We have to handle DOM nodes and JS objects differently because IE6-7
// can't GC object references properly across the DOM-JS boundary
isNode = elem.nodeType,

// Only DOM nodes need the global jQuery cache; JS object data is
// attached directly to the object so GC can occur automatically
cache = isNode ? jQuery.cache : elem, 
```

在普通 DOM 元素的情况下，该值在[data.js#61](https://github.com/jquery/jquery/blob/ab409d14bc6db42b4af3ba753be1b55fe8f897d8/src/data.js#L61)中分配了一个 GUID ：

```
elem[ internalKey ] = id = jQuery.deletedIds.pop() || jQuery.guid++; 
```

但是对于普通的 JS 对象（`window`在这种情况下），该对象是在[68 - 74](https://github.com/jquery/jquery/blob/ab409d14bc6db42b4af3ba753be1b55fe8f897d8/src/data.js#L68-74)中构建的：

```
cache[id] = {};

// Avoids exposing jQuery metadata on plain JS objects when the object
// is serialized using JSON.stringify
if (!isNode) {
    cache[id].toJSON = jQuery.noop;
}​ 
```

奇怪的值是`jQuery.expando`，它在[data.js#14](https://github.com/jquery/jquery/blob/ab409d14bc6db42b4af3ba753be1b55fe8f897d8/src/data.js#L14)中定义，并初始化为：

```
"jQuery" + ( jQuery.fn.jquery + Math.random() ).replace( /\D/g, "" ) 
```

（基本上是“jQuery”，然后是删除了“.”的 jQuery 版本（在您的情况下为 1800），然后是一个随机数）。

# html - 将 HTML 文件的结构打包在单个存档中（相当于 JAR）

> ID：13769466
> 
> 赞同：0
> 
> 时间：2012-12-07T19:07:22.400
> 
> 标签：html

是否有可能或者是否有一种工具可以将结构或 HTML 文件（例如 javadoc）捆绑在单个 arhive（如 zip 或 jar）中，然后像文件一样在本地浏览它们，而不需要 HTTP？我想使用这样的解决方案将漂亮的文档与格式放在一起，就像通常在 MS Word 中完成的一样，但不想使用 Word 并且想要自动读取单个文件，即不必提取一个带有文件结构的 zip。

# javascript - 如何将使用普通 JS 对 DOM 所做的更改传播到其 Angular JS 绑定？

> ID：13769468
> 
> 赞同：0
> 
> 时间：2012-12-07T19:07:24.690
> 
> 标签：javascript, jquery, angularjs, jquery-ui-sortable

当对使用纯 JavaScript 表示的 DOM 元素进行更改时，我一直在尝试让 Angular JS 更新其模型。我不确定我是否只是没有正确编写我的 Angular JS 代码，或者我是否没有正确解决问题。

我有一个带有输入框的可排序列表，其中包含每个项目的排序值。您可以手动放置排序顺序，这将重新排序列表或拖放项目（使用 JQuery 可排序）。当您通过拖放对项目进行排序时，我会在 sortable 的更新回调函数中更新输入值，但这似乎并没有更新绑定到该输入的 Angular JS 对象。

我尝试包装我的 JS，它在 $scope.$apply 中操纵输入值，但它没有帮助。

这是一个小提琴：http: [//jsfiddle.net/smelly_fish/d9kt9/1/](http://jsfiddle.net/smelly_fish/d9kt9/1/)

这是我的 JS：

```
var sortedShippingMethods = [{
    "id": "UPS 2nd Day Air A.M. &reg;",
    "name": "UPS 2nd Day Air A.M. ",
    "sort": "0"},
{
    "id": "UPS 3 Day Select &reg;",
    "name": "UPS 3 Day Select ",
    "sort": "0"},
{
    "id": "UPS Ground",
    "name": "UPS Ground",
    "sort": "2"}];

jQuery(document).ready(function(){

    // Sortable list
    $('#shipping-sort-list').sortable({
        items: 'li',
        axis: 'y',
        containment: 'parent',
        cursor: 'move',
        update: function(event, ui) {
            $scope = angular.element($('#shipping-sort-list')[0]).scope(); 
            $scope.$apply(function(){
                $('#shipping-sort-list input').each(function(i){
                    $(this).attr('value', i+1);
                });
            });
        }
    });
});

function AdminShippingSettingsCtrl($scope) {
    $scope.sortedShippingMethods = sortedShippingMethods;

    $scope.getSortValue = function(sortedShippingMethod) {
        //have to typecast to an int or 3 will show up higher than 23 (string sort ftl)
        var sort = parseInt(sortedShippingMethod.sort, 10);
        return sort;
    }
}​ 
```

这是我的标记：

```
<div id="shipping-sort-list" data-ng-app data-ng-controller="AdminShippingSettingsCtrl">
    <ul>
        <li data-ng-repeat="sortedShippingMethod in sortedShippingMethods | orderBy:[getSortValue, 'name']"><input data-ng-model="sortedShippingMethod.sort" type="text" name="sortOrder[{{sortedShippingMethod.id}}]" value="{{sortedShippingMethod.sort}}" /> {{sortedShippingMethod.name}}</li>
</ul>

<p data-ng-repeat="sortedShippingMethod in sortedShippingMethods">Name: {{sortedShippingMethod.name}} Sort Value: {{sortedShippingMethod.sort}}</p>
</div>
​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:31:51.210

如果你只是想要答案，你可以去：http: [//jsfiddle.net/d9kt9/4/](http://jsfiddle.net/d9kt9/4/)

有关解释，请继续阅读。当前迭代的问题是您正在更新元素的值，但实际上您需要更新每个 shippingMethod 的对象范围。该值只是一个来回传递的值（我知道很奇怪），但是如果您更新一个对象（就像我所做的那样），那么它是通过引用传递的，这允许您影响主要的 sortedShippingMethods。因此，虽然循环遍历它们是正确的做法，但您可以看到我是如何获得每个范围的：

```
$('#shipping-sort-list input').each(function(i){
    var inputScope = angular.element(this).scope();
    inputScope.sortedShippingMethod.sort = i+1;
}); 
```

然后在第二个列表的 data-ng-repeat 中，我添加了与第一个列表相同的 orderBy：

```
<p data-ng-repeat="sortedShippingMethod in sortedShippingMethods | orderBy:[getSortValue, 'name']"> 
```

# java - Java/Android中的字符串自然排序

> ID：13769469
> 
> 赞同：1
> 
> 时间：2012-12-07T19:07:25.927
> 
> 标签：java, android, sorting, natural-sort

我正在做升序字符串排序。目前，“Route101”将排在“Route11”之前，因为 10 在 11 之前。但是，由于 11 小于 101，我希望“Route11”在“Route101”之前。

我知道在 iPhone 中，它有类似的东西，基本上是自然排序：

```
NSSortDescriptor *cityCodeDescriptor = [[NSSortDescriptor alloc] initWithKey:@"name"
ascending:YES selector:@selector(localizedStandardCompare:)]; 
```

Android或Java中有类似的东西。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:13:36.747

这就是你想要的：

[http://www.java2s.com/Code/Java/Collections-Data-Structure/NaturalOrderComparator.htm](http://www.java2s.com/Code/Java/Collections-Data-Structure/NaturalOrderComparator.htm)

如果您打算使用它，请阅读许可证，或编写您自己的许可证。

# google-app-engine - 如何使用 App Engine 管理控制台创建新的 Apps 帐户？

> ID：13769477
> 
> 赞同：0
> 
> 时间：2012-12-07T19:07:47.767
> 
> 标签：google-app-engine, email

我已经寻找链接/页面来创建一个帐户，但我看不到任何相关内容。这里说您可以创建一个帐户[https://groups.google.com/forum/#!msg/google-appengine/pVZfdeky-ow/TO1SmipM2Y0J](https://groups.google.com/forum/#!msg/google-appengine/pVZfdeky-ow/TO1SmipM2Y0J)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T02:24:40.537

进入仪表板，然后从左侧菜单中选择“应用程序设置”，向下滚动到“域设置”部分并单击“添加域...”。您将在右侧看到注册链接。

# javascript - 通过本机方法操作 dom

> ID：13769479
> 
> 赞同：1
> 
> 时间：2012-12-07T19:07:52.520
> 
> 标签：javascript, dom

我想在不使用任何库 jquery 或 zepto 的情况下做某事，我已经习惯了它们，所以现在我很难实现我的目标我有这个：

```
<div id="container">
    <div>blablabla....</div>
    <div>blablabla....</div>                     
</div> 
```

我想删除第一个孩子，我尝试了很多东西，经过一番搜索，我知道解决方案可能如下所示：

```
document.getElementById("container").removeFirstChild() 
```

或者

```
.removeChild(document.getElementById("container").firstChild) 
```

但我无法得到正确的解决方案，我总是得到错误异常或不希望的结果。所以提前感谢您的帮助，顺便说一下，这是我第一次参与这个论坛，可能不是最后一次:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T19:11:54.243

您可以执行以下操作：

```
document.getElementById("container").removeChild( 
   document.getElementById("container").firstChild 
); 
```

**更新：**
正如胡安门德斯指出的那样，您可以`getElementByID()`通过保存一个变量来保存一个调用，如下所示：

```
container = document.getElementById("container");
container.removeChild( container.firstChild ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T19:28:49.677

```
var elm=document.getElementById('container');
var chl=elm.firstChild;
while(chl)
{
    if(chl.nodeType==1)
    {
        elm.removeChild(chl);
        break;
    }
    chl=chl.nextSibling;
} 
```

[演示](http://jsfiddle.net/DrJYM/)

# knockout.js - 强制计算属性函数运行

> ID：13769481
> 
> 赞同：81
> 
> 时间：2012-12-07T19:08:06.083
> 
> 标签：knockout.js, computed-observable

给定一个计算属性

```
vm.checkedValueCount = ko.computed(function(){
  var observables = getCurrentValues();  //an array of ko.observable[]
  return _.filter(observables, function(v) { return v() }).length;
}); 
```

假设 getCurrentValues() 可以返回不同的 observable 集合，这些集合在代码的其他地方被修改（并且来自比 observableArray 更复杂的结构）。

我需要`checkedValueCount`随时更新

*   它的依赖项之一发生了变化
*   getCurrentValues() 返回一组不同的 observables。

问题是它`ko.computed`似乎记住了最后一个返回的值，并且仅在依赖项更新时才更新。这处理第一种情况，但不处理后一种情况。

我正在寻找的是一种强制 checkValueCount 重新运行的方法。我可以使用的东西像：

```
changeCurrentValues();
vm.checkeValueCount.recalculate(); 
```

最简单地说，鉴于我有

```
a = ko.computed(function() { return Math.random() }) 
```

如何强制调用`a()`两次以返回不同的值。

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-12-07T19:41:25.900

我意识到我的第一个答案错过了您的观点，并且不会解决您的问题。

问题是，如果有一些可观察的迫使它重新评估，那么计算只会重新评估。没有本地方法可以强制计算重新评估。

但是，您可以通过创建一个虚拟的可观察值然后告诉它的订阅者它已经改变来解决这个问题。

```
(function() {

    var vm = function() {
        var $this = this;

        $this.dummy = ko.observable();

        $this.curDate = ko.computed(function() {
            $this.dummy();
            return new Date();
        });

        $this.recalcCurDate = function() {
            $this.dummy.notifySubscribers();
        };        
    };

    ko.applyBindings(new vm());

}());​ 
```

这是一个展示这种方法[的小提琴](http://jsfiddle.net/jwcarroll/pAZ3K/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-11-10T18:42:26.243

有[一种方法](https://stackoverflow.com/a/8537771/1500805)可以根据您的情况强制重新计算所有可观察量：

```
getCurrentValues.valueHasMutated() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-30T05:57:43.390

这个答案在概念上与@josh 给出的答案相同，但呈现为更通用的包装器。注意：此版本适用于“可写”计算。

我正在使用 Typescript，所以我首先包含了 ts.d 定义。因此，如果与您无关，请忽略第一部分。

```
interface KnockoutStatic
{
    notifyingWritableComputed<T>(options: KnockoutComputedDefine<T>, context ?: any): KnockoutComputed<T>;
} 
```

## 通知可写计算

### 一个可写的包装器，`observable`它*总是*会通知订阅者——即使`write`调用后没有更新任何可观察的对象

如果您不使用 Typescript ，只需替换`function<T> (options: KnockoutComputedDefine<T>, context)`为。`function(options, context)`

```
ko.notifyingWritableComputed = function<T> (options: KnockoutComputedDefine<T>, context)
{
    var _notifyTrigger = ko.observable(0);
    var originalRead = options.read;
    var originalWrite = options.write;

    // intercept 'read' function provided in options
    options.read = () =>
    {
        // read the dummy observable, which if updated will 
        // force subscribers to receive the new value
        _notifyTrigger();   
        return originalRead();
    };

    // intercept 'write' function
    options.write = (v) =>
    {
        // run logic provided by user
        originalWrite(v);

        // force reevaluation of the notifyingWritableComputed
        // after we have called the original write logic
        _notifyTrigger(_notifyTrigger() + 1);
    };

    // just create computed as normal with all the standard parameters
    return ko.computed(options, context);
} 
```

主要用例是当您更新不会触发`read`函数“访问”的可观察对象的更改时。

例如，我正在使用 LocalStorage 设置一些值，但没有任何可观察到的变化来触发重新评估。

```
hasUserClickedFooButton = ko.notifyingWritableComputed(
{
    read: () => 
    {
        return LocalStorageHelper.getBoolValue('hasUserClickedFooButton');
    },
    write: (v) => 
    {
        LocalStorageHelper.setBoolValue('hasUserClickedFooButton', v);        
    }
}); 
```

请注意，我只需要更改`ko.computed`，`ko.notifyingWritableComputed`然后一切都会自行处理。

当我调用时`hasUserClickedFooButton(true)`，'dummy' observable 会增加，强制任何订阅者（及其订阅者）在 LocalStorage 中的值更新时获取新值。

（注意：您可能认为`notify: 'always'`扩展器是这里的一个选项 - 但这是不同的）。

* * *

对于只可读的计算 observable 有一个额外的解决方案：

```
ko.forcibleComputed = function(readFunc, context, options) {
    var trigger = ko.observable().extend({notify:'always'}),
        target = ko.computed(function() {
            trigger();
            return readFunc.call(context);
        }, null, options);
    target.evaluateImmediate = function() {
        trigger.valueHasMutated();
    };
    return target;
};

myValue.evaluateImmediate(); 
```

来自@mbest 评论[https://github.com/knockout/knockout/issues/1019](https://github.com/knockout/knockout/issues/1019)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T19:26:52.027

> 假设 getCurrentValues() 可以返回不同的可观察对象集，这些可观察对象集在代码的其他地方被修改

我假设 getCurrentValues() 是一个函数。如果您可以将其设为计算值，那么您的 checkedValueCount 就会神奇地开始工作。

你能让 getCurrentValues 成为一个计算值而不是一个函数吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-21T22:40:41.110

因为没有直接的方法来强制更新一个计算，我创建了一个名为 toForceComputedUpdate 的 observable，我在计算函数中调用它，所以计算将监听它的更新，然后强制更新我这样调用它 toForceComputedUpdate(Math 。随机的）

# android - android片段之间的通信

> ID：13769486
> 
> 赞同：1
> 
> 时间：2012-12-07T19:08:25.753
> 
> 标签：android, fragment

我有两个片段。我正在使用接口将一个片段与另一个片段进行通信：

```
public class FragmentLanguages extends ListFragment {
LanguageArrayAdapter adapter;
OnLanguageChangedListener mCallback;

public interface OnLanguageChangedListener {
    public void onLanguageSelected(int position);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View view = inflater.inflate(R.layout.languages, null);

    return view;
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    Language languages[] = new Language[] {
            new Language(R.drawable.ic_flag_german, "German"),
            new Language(R.drawable.ic_flag_spanish, "Spanish"),
            new Language(R.drawable.ic_flag_russian, "Russian"),
            new Language(R.drawable.ic_flag_ukrainian, "Ukrainian") };

    adapter = new LanguageArrayAdapter(getActivity(), R.layout.list_row,
            languages);
    getListView().setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            adapter.setSelectedItem(position);
            mCallback.onLanguageSelected(position + 1);
        }
    });
    setListAdapter(adapter);
}

public static class Language {
    public int image;
    public String text;

    public Language() {
        super();
    }

    public Language(int image, String text) {
        super();
        this.image = image;
        this.text = text;
    }
}

public void setOnLanguageChangedListener(OnLanguageChangedListener mCallback) {
    this.mCallback = mCallback;
} 
```

}

和另一个

```
public class FragmentCircles extends Fragment implements OnClickListener,
    OnLanguageChangedListener { ...
.....
    @Override
public void onLanguageSelected(int position) {
    currentLang = position;
    translationCircle.removeAllViews();
    String strSelect = "SELECT Translation FROM Translation WHERE Lang_Id="
            + currentLang + " ORDER BY Word_Id ASC";
    translationList = DataBaseHelper.getInstance(getActivity())
            .SelectTranslationList(strSelect);
    Log.i("Lang ", "changed " + currentLang);

    calculateCentreTranslation(lLabelRadius, width, height);
} 
```

但是在屏幕旋转后，当我在 ListFragment 中选择某些项目时，它给了我一个错误

```
12-07 19:06:15.163: E/AndroidRuntime(436): java.lang.NullPointerException 
```

在线

```
 mCallback.onLanguageSelected(position + 1); 
```

似乎 mCallback 为空。但是我该如何解决呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:35:52.450

你`FragmentLanguages`必须通知你的`FragmentActivity`，然后通知其他片段。这确保没有片段链接在一起，`NullPointerExceptions`如果另一个片段通知它时没有实例化，则可能触发。

所以你的界面`OnLanguageChangedListener`留在你的`LanguagesFragment`

您`FragmentActivity` **必须**实施`setOnLanguageChangedListener`

在`FragmentLanguages`：

```
@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    onLanguageChangedListener = (onLanguageChangedListener) activity;
} 
```

`onAttach()`甚至在`onCreate()`您可以随时在片段中使用之前就调用了因为：

```
onLanguageChangedListener.onLanguageChanged(...); 
```

在您的`FragmentActivity`which 实现`OnLanguageChangedListener`中，您需要覆盖它：

```
@Override
public void onLanguageChanged(...) {
    // here you implement the logic to notify other fragments
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:27:10.217

在 android 中，当您从纵向切换到横向或反之时，将重新创建活动，因此如果您想保留一些数据，您必须使用 Bundle saveInstanceState 来管理这些活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T22:16:40.757

mCallBack 侦听器仅被声明但从未实例化。您应该使用 onAttach() 方法中的容器活动来实例化 mCallBack 侦听器。在此处查看如何操作。 [http://developer.android.com/training/basics/fragments/communicating.html#DefineInterface](http://developer.android.com/training/basics/fragments/communicating.html#DefineInterface)

# ruby-on-rails - Rails 这个变量是什么（一个对象、一个哈希、一个数组等），我如何访问它？

> ID：13769487
> 
> 赞同：0
> 
> 时间：2012-12-07T19:08:26.923
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在开发一个 Rails 应用程序，我正在尝试访问这个变量，但我不断收到未定义的方法错误等。

在我的控制器中，我正在做：

```
@application = Application.find(params[:id])
@curr_app_id = @application.application_field.last(1)
puts @curr_app_id 
```

它打印出来

```
#<ApplicationField:0x56678b8> 
```

这是什么类型的变量，我如何访问它的 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:21:41.283

我在我的 IRB 控制台中做了一些调查......

```
1.9.3p0 :018 > puts User.last(1).class # => Array
1.9.3p0 :019 > puts User.last.class    # => User
1.9.3p0 :018 > puts User.last(1) # => #<User:0x00000006f36280>
1.9.3p0 :019 > puts User.last    # => #<User:0x00000006f36280> 
```

**相同的输出，不同的类**！

给`last`方法一个整数（即使你给 1）会产生一个 Array: [Class Array (Ruby 1.9.3) here](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-last)。

```
1.9.3p0 :028 > puts User.last(1).id
# => NoMethodError: undefined method `id' for #<Array:0x00000006f2d8d8> 
```

您应该使用不带参数的 last ：

```
@application = Application.find(params[:id])
@curr_app_id = @application.application_field.last
# then you should be able to use the object's methods:
puts @curr_app_id.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T19:19:16.423

`@application.application_field.last`正在返回一个`ApplicationField`对象。将整数传递给`#last`将返回数组中的对象数。

因此，将返回与数组`@application.application_field.last(2)`关联的最后两个 application_field 对象。`@application`

`@application.application_field.last`应该给你`ApplicationField`对象。调用`#id`它，`@application.application_field.last.id`应该返回 id，假设它是一个 ActiveRecord 模型（或`respond_to?(:id)`其他方式）。

# powershell - Powershell - 搜索 Exchange 邮箱和电子邮件

> ID：13769492
> 
> 赞同：3
> 
> 时间：2012-12-07T19:08:46.123
> 
> 标签：powershell, exchange-server

我不确定Powershell是否可以做到这一点，所以我想我会先在这里要求快速集思广益！本质上，我需要在给定的 Exchange 中搜索所有邮箱以查找特定字符串 - 这些字符串的多种形式 - 让我们说在这种情况下 - 任何包含以下任何格式的一组 6 个数字的电子邮件：

```
`xx-xx-xx
 xxxxxx
 xxx-xxx` 
```

在这种情况下，x 是一个数字。因此，如果在邮件中找到这些字符串中的任何一个，它将记录到包含邮箱和电子邮件/主题的文本文件中。

我的逻辑如下：

```
Search Exchange and loop for every mailbox
Recurse in every mailbox looking for matches for the above criteria
If it finds something - get info about that mail, write to text file
Continue loop 
```

有任何想法吗！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T19:54:33.850

这是来自 Exchange 命令行管理程序的 Exchange 2010：

```
#Assign the role to the required user account
New-ManagementRoleAssignment -Role “Mailbox Import Export” -User administrator
#Restart the shell

#This would search every mailbox for messages containing the word xx-xx-xx in the message body,
#and export them to the administrator mailbox in a subfolder called Export
Get-Mailbox -ResultSize Unlimited | Search-Mailbox -SearchQuery “Body:’*xx-xx-xx*’” -TargetMailbox administrator -TargetFolder Export 
```

您需要为`[string]`您正在搜索的任何内容执行此操作。我认为还有 cmdlet 也可以作为交换 2007 做同样的事情，但我可以发誓。

# c# - Reflection.Emit 访问动态构造类的基类中的字段

> ID：13769493
> 
> 赞同：1
> 
> 时间：2012-12-07T19:09:00.887
> 
> 标签：c#, .net, reflection, reflection.emit

我正在使用 Reflection.Emit 来定义动态类型。该类继承自通用基类。在 C# 中，这一切看起来像这样：

```
public abstract class DataReaderMapper<T>
{
  protected readonly IDataReader reader_;

  protected DataReaderMapper(IDataReader reader) {
    reader_ = reader;
  }
}

public class SomeDataReaderMapper: DataReaderMapper<ISomeInterface> {
  public string SomeProperty {
    get { return reader_.GetString(0); }
  }
} 
```

Reflection.Emit 部分：

```
Type MakeDynamicType() {
    TypeBuilder builder = module_.DefineType(
      GetDynamicTypeName(),
      TypeAttributes.Public |
        TypeAttributes.Class |
        TypeAttributes.AutoClass |
        TypeAttributes.AutoLayout,
      typeof (DataReaderMapper<T>),
      new Type[] {type_t_});

    ConstructorBuilder constructor =
      type.DefineConstructor(MethodAttributes.Public |
         MethodAttributes.HideBySig |
         MethodAttributes.SpecialName |
         MethodAttributes.RTSpecialName,
        CallingConventions.Standard, new Type[] {typeof (IDataReader)});

     ConstructorInfo data_reader_mapper_ctor = typeof (DataReaderMapper<T>)
       .GetConstructor(new Type[] {typeof (IDataReader)});
     ILGenerator il = constructor.GetILGenerator();
     il.Emit(OpCodes.Ldarg_0);
     il.Emit(OpCodes.Ldarg_1);
     il.Emit(OpCodes.Call, data_reader_mapper_ctor);

     il.Emit(OpCodes.Ret);

     PropertyBuilder property_builder = builder
       .DefineProperty(property.Name, PropertyAttributes.HasDefault,
         property.PropertyType, null);

     MethodBuilder get_method = builder.DefineMethod("get_" + property.Name,
       MethodAttributes.Public |
         MethodAttributes.SpecialName |
         MethodAttributes.HideBySig);

     ILGenerator il = get_method.GetILGenerator();
     il.Emit(OpCodes.Ldarg_0);

     // *********************
     //  How can I access the reader_ field of the base class.
     // *********************

     property_builder.SetGetMethod(get_method);
} 
```

问题是我正在尝试使用 Reflection.Emit 动态生成 SomeDerivedDataMapper，但我不知道如何访问基类的受保护字段。显然可以生成代码来执行此操作，因为 C# 代码工作得很好。我想编译器可能会做一些实际上不受 Reflection.Emit 支持的事情，但我希望这不是其中一种情况。

在这种情况下，有人知道如何访问基类中的字段吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T20:56:05.697

您的代码也有很多其他问题，但是标识符是如何`T`绑定在您的`MakeDynamicType`方法中的？也就是说，我希望您根据您的 C# 示例使用`typeof(DataReaderMapper<ISomeInterface>)`，而不是。`typeof(DataReaderMapper<T>)`

无论如何，您应该能够执行以下操作：

```
var fld = typeof(DataReaderMapper<ISomeInterface>)
    .GetField("reader_", BindingFlags.NonPublic | BindingFlags.Instance); 
```

获取字段，然后用于`il.Emit(OpCodes.Ldfld, fld)`从实例中获取字段。

# matlab - 并行 for 循环可以写入公共矩阵吗？

> ID：13769499
> 
> 赞同：6
> 
> 时间：2012-12-07T19:09:27.123
> 
> 标签：matlab, parallel-processing

我不确定并行 for 循环的迭代独立意味着什么。以下是两个有效的并行 for 循环的示例吗？它们写入和读取相同的矩阵，但矩阵索引对于每次迭代都是唯一的。

```
X = zeros(64);
parfor i = 1:64^2
    X(i) = i;
end
parfor i = 1:64
    X(i,:) = X(i,:) .* randn(1,64);
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T01:31:28.507

就`parfor`目前而言，以下三种说法可以认为是等价的：

1）循环的迭代`parfor`必须是独立的。

2）循环的任何迭代都`parfor`可能取决于任何其他迭代的结果。

3）循环的迭代`parfor`必须能够以任何顺序执行（来自@Oli）

这些语句与常规循环相比如何？例如，在从 1 到 8 的典型循环中，第 4 次迭代可能取决于迭代 1、2 和 3，因为软件可以确定这些迭代在我们到达第 4 次迭代时已经发生。它不能取决于迭代 5、6、7 和 8，因为软件可以确定这些迭代不会发生。

正如@Oli 所说，在`parfor`循环中，循环可能以任何顺序发生。它们可能按以下顺序出现，例如，7 3 4 1 2 5 8 6。或者这 8 个数字的任何排列。这意味着一些非常重要的事情：**没有办法知道哪个迭代将首先发生。**要看到这一点，只需`fprintf('Up to iteration %d of %d\n', t, T)`在循环中插入一个，循环下标`parfor`在哪里，循环上限在哪里。`t``T`

上面的陈述立即暗示了以下结论：**由于任何迭代都可能首先发生，因此没有迭代取决于任何其他迭代的结果是至关重要的**。我将用一些例子来结束答案：

```
X = ones(8, 8)
parfor n = 1:8
    X(:,n) = X(:,n) .* (3 * ones(8,1));
end 
```

在这个例子中，`(3 * ones(8,1))`显然不依赖于任何其他迭代——相对于循环计数器是恒定的。同样`X(:, n)`不依赖于第 n 次以外的任何迭代。**编辑：**我之前`randn`在上面的示例中使用过 - 请参阅@AndrewJanke 提供的评论中的讨论，了解为什么这是一个坏主意。这种情况怎么办：

```
X = ones(8, 8);
parfor n = 1:8
    X(:,n) = X(:,n) + (n + 1);
end 
```

这也是完全有效的。尽管`n + 1`表达式中有一个，但这与取决于迭代次数不同`n + 1`。相反，它只是将当前迭代次数的整数值加上 1 分配给`X`。

最后，考虑：

```
X = ones(8, 1);
parfor n = 2:8
    X(n, 1) = X(n-1, 1) + 1;
end 
```

这在常规循环中是完全有效的，因为迭代次数`n-1`总是在迭代之前出现`n`（假设我们正在向前循环）。但在`parfor`循环中，这将导致错误，因为迭代次数`n`可能发生在迭代次数之前`n-1`。Matlab 用来描述这里问题的术语称为“切片”。想象一下`X`被循环迭代分割。然后在第 n 次迭代中，您可能只会引用`X`.

最后一点，如果我对`parfor`循环有疑问，我阅读了文档中题为“Matlab 中的并行 for 循环 - 概述”的部分（抱歉，找不到相应的网页 - 对于 Matlab 文档来说不常见）它描述了所有循环内可能的变量分类，以及`parfor`循环对每个分类的限制。我在这个答案中讨论的实际上只是冰山一角。例如，诸如语句在循环`n = n + 1`中也是无效的`parfor`，因为`n`是循环变量，并且不允许对循环变量进行赋值。

# php - mysqli::mysqli(): (HY000/2002): 无法通过套接字 'MySQL' 连接到本地 MySQL 服务器 (2)

> ID：13769504
> 
> 赞同：34
> 
> 时间：2012-12-07T19:09:35.347
> 
> 标签：php, mysql, mysqli

当我尝试使用 php mysqli 类连接到 mysql 数据库时出现此错误。使用以下代码：

```
$db = new MySQLi("localhost","kamil","*****");
if (mysqli_connect_errno())
{
    echo "An error occured. Please try again later.";
    exit();
} 
```

密码为 * 以确保安全。

我已经创建`kamil`了对外部 IP 地址和 localhost 具有所有权限的用户。当我运行时：`select user,host from mysql.user`它正确显示这两个用户。

我做了一些研究并使用了这个基准：[https](https://stackoverflow.com/a/2183134/1839439) ://stackoverflow.com/a/2183134/1839439来查看它连接到什么。事实证明，它只能连接到`127.0.0.1`本地`127.0.0.1:3306`主机，但是当我提供`localhost`它时，它会抛出这个错误。

我的问题是为什么它只允许我使用 localhost ip 地址而不是名称或外部 ip 连接到数据库。如果我想在网站上使用 mysql 或者如果我可以使用，我需要不同的主机`127.0.0.1`吗？

**编辑：**
`hosts`文件

```
127.0.0.1       localhost
::1             localhost ip6-localhost ip6-loopback
fe00::0         ip6-localnet
ff00::0         ip6-mcastprefix
ff02::1         ip6-allnodes
ff02::2         ip6-allrouters

127.0.1.1       raspberrypi 
```

* * *

该用户的Mysql用户表结果：

```
| kamil            | 109.255.177.28 |
| kamil            | localhost      | 
```

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-12-07T21:24:13.287

当您只使用“localhost”时，MySQL 客户端库会尝试使用 Unix 域套接字进行连接，而不是 TCP/IP 连接。该错误告诉您，名为 的套接字`MySQL`不能用于建立连接，可能是因为它不存在（错误号 2）。

来自[MySQL 文档](https://dev.mysql.com/doc/refman/5.5/en/connecting.html#id471316)：

> 在 Unix 上，MySQL 程序对主机名 localhost 进行了特殊处理，与其他基于网络的程序相比，这种方式可能与您所期望的不同。对于到 localhost 的连接，MySQL 程序尝试使用 Unix 套接字文件连接到本地服务器。即使给出 --port 或 -P 选项来指定端口号，也会发生这种情况。要确保客户端与本地服务器建立 TCP/IP 连接，请使用 --host 或 -h 指定主机名值 127.0.0.1，或本地服务器的 IP 地址或名称。您还可以使用 --protocol=TCP 选项显式指定连接协议，即使对于 localhost 也是如此。

有几种方法可以解决这个问题。

1.  您可以只使用 TCP/IP 而不是 Unix 套接字。您可以通过使用`127.0.0.1`而不是`localhost`在连接时执行此操作。不过，Unix 套接字可能使用起来更快、更安全。
2.  您可以在以下位置更改套接字[`php.ini`](http://es1.php.net/manual/en/mysqli.configuration.php#ini.mysqli.default-socket)：打开 MySQL 配置文件`my.cnf`以查找 MySQL 创建套接字的位置，并将 PHP 设置`mysqli.default_socket`为该路径。在我的系统上是`/var/run/mysqld/mysqld.sock`.
3.  打开连接时直接在PHP脚本中配置socket。例如：

    ```
    $db = new MySQLi('localhost', 'kamil', '***', '', 0, 
                                  '/var/run/mysqld/mysqld.sock') 
    ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-04-26T07:47:04.410

如果是 PHP 问题，您可以简单地更改配置文件*php.ini*的位置，并更新 PORT/SOCKET-PATH 等的设置以使其连接到服务器。

就我而言，我打开了文件 php.ini 并做了

```
mysql.default_socket = /var/run/mysqld/mysqld.sock
mysqli.default_socket = /var/run/mysqld/mysqld.sock 
```

它立即起作用。我不得不承认，我从@Joni 接受的答案中得到了暗示

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T19:12:50.990

如果 'localhost' 不起作用，但 127.0.0.1 起作用。确保您的本地主机文件指向正确的位置。（/etc/hosts 用于 linux/mac，C:\Windows\System32\drivers\etc\hosts 用于 Windows）。

此外，请确保您的用户被允许连接到您尝试选择的任何数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T19:20:31.953

请检查以下文件

```
%SystemRoot%\system32\drivers\etc\host 
```

将主机名与 ip 绑定的行可能缺少将它们绑定在一起的行

```
127.0.0.1  localhost 
```

如果缺少给定的行。在文件中添加行

* * *

您是否还可以检查您的 MySQL 数据库的用户表并告诉我们您正在使用的用户的主机列值。您应该拥有主机“127.0.0.1”和“localhost”的用户权限，并使用 % 因为它是通用主机名的通配符。

# string - 将二维字符串数组的索引显示为它们的值。例如。arr[2][1] = "21" 和 arr[3][1] = "31" 等等

> ID：13769505
> 
> 赞同：2
> 
> 时间：2012-12-07T19:09:53.853
> 
> 标签：string, multidimensional-array

基本上我想创建一个二维字符串数组 char* grid[4][4]，并希望将它们的索引显示为它们的值。例如 grid[2][1] 将字符串“21”作为其值。但是他们是这段代码中的一些错误，在运行时它给了我分段错误错误。请帮帮我。

`char* grid[DIMENSION][DIMENSION];`

```
for (int i = 0; i < DIMENSION; i++)
{
    for (int j = 0; j < DIMENSION; j++)
    {   
        char* c = malloc(3 * sizeof(char));
        c = "00\0";            
        c[0] = c[0] + i;
        c[1] = c[1] + j;
        grid[i][j] = c;

    }
}        

for (int i = 0; i < DIMENSION; i++)
{ 
    for (int j = 0; j < DIMENSION; j++)
    {
        printf("%s\t", grid[i][j]);         
    }

    printf("\n"); 
```

}

```
return 0; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:13:46.573

代替：

```
 char* c = "00";
 c[0] = c[0] + i; 
```

和

```
char c[] = "00";
c[0] = c[0] + i; 
```

通常不可能更改字符串文字的值。使用`gcc`，您可以通过指定 来更改此行为`-fwritable-strings`。许多编译器会将字符串文字放入不可写的段中，但通过将其声明`c`为字符数组，可以保证它是可写的。（虽然，现在您对 的分配有问题`grid`，所以您可能想使用`malloc`。）

```
char *c = xmalloc(3);  /* xmalloc wraps malloc with error checking */
c[0] = '0' + i;
c[1] = '0' + j;
c[2] = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T19:16:18.743

`char * c``for(int j...`存在于循环范围之内，而不是它之外！

```
char * c = malloc(3);
strcpy(c,'00') 
```

# sql - Oracle SQL，是否可以仅获取以 4 个数字结尾的 varchar 值？

> ID：13769513
> 
> 赞同：1
> 
> 时间：2012-12-07T19:10:10.490
> 
> 标签：sql, oracle

我只需要从 varchar 字段中提取以 4 个数字结尾的值。例如，我需要 SMITH0821，但不需要 SMITH1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T19:14:58.443

您可以使用 REGEXP_LIKE，如下所示：

```
select * 
from YourTable t 
where REGEXP_LIKE(t.YourField, '.*[^:digit:][:digit:]{4}', 'n'); 
```

我不完全确定正则表达式语法，但您应该能够使用[REGEXP_LIKE 上](http://docs.oracle.com/cd/B12037_01/server.101/b10759/conditions018.htm#SQLRF00501)的文档和[正则表达式的附录](http://docs.oracle.com/cd/B12037_01/server.101/b10759/ap_posix001.htm#i690819)来调整它以适应您的需要。

@Andrew Logvinov 有一个关于匹配太多数字的有效观点。我认为可以通过检查*不是*数字的字符类来否定这一点。这会将正则表达式更改为：

```
REGEXP_LIKE(t.YourField, '.*[^:digit:][:digit:]{4}', 'n'); 
```

另外，我不确定您是否需要在数字前面添加一个字符，或者只有 4 位数字的 varchars 也应该匹配。以下正则表达式包括字符串锚点的 start ( `^`) 和 end ( `$`) （在上面的表达式中也可能需要）。表达式的其余部分首先包含一个可选组，该组可以由任何字符序列组成，只要它以数字以外的其他内容结尾。在该可选组之后，值结束前需要 4 位数字。

```
REGEXP_LIKE(t.YourField, '^(.*[^:digit:])?[:digit:]{4}$', 'n'); 
```

不幸的是，我目前无法测试它们，而且我不经常在 Oracle 中使用正则表达式，所以我希望它们能正常工作，否则你可以使用我提供的链接对它们进行微调。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T19:24:52.123

使用 regexp_like：

```
select * from tablename t
where regexp_like(t.columname, '[:alpha:][:digit:]{4}$') 
```

这将确保您的用户名末尾有一个字母字符，后跟 4 位数字。

这是一个体面的文档的链接：http: [//psoug.org/reference/regexp.html](http://psoug.org/reference/regexp.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T19:15:24.343

您可以使用 4 个下划线`_` 来匹配 Smith 之后的 4 个字符，如下所示：

```
 SELECT * from PERSON
   WHERE NAME LIKE 'SMITH____' 
```

或使用`REGEXP_LIKE`（[此处](http://docs.oracle.com/cd/B19306_01/server.102/b14200/conditions007.htm)的文档）仅匹配 4 位数字：

```
 SELECT * from PERSON
  WHERE REGEXP_LIKE (NAME , '^SMITH[0-9]{4}$', 'i'); 
```

`'i'`用于不区分大小写的匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T19:34:36.470

这将起作用：

```
select field2 from T1
where SUBSTR(field2, -4, 1) IN ('0', '1', '2', '3', '4', '5', '6', '7', '8', '9') AND
      SUBSTR(field2, -3, 1) IN ('0', '1', '2', '3', '4', '5', '6', '7', '8', '9') AND
      SUBSTR(field2, -2, 1) IN ('0', '1', '2', '3', '4', '5', '6', '7', '8', '9') AND
      SUBSTR(field2, -1, 1) IN ('0', '1', '2', '3', '4', '5', '6', '7', '8', '9'); 
```

# python - 使用 python 3.3 的请求

> ID：13769514
> 
> 赞同：6
> 
> 时间：2012-12-07T19:10:13.697
> 
> 标签：python, pip, python-requests

如何安装[请求](http://docs.python-requests.org/en/latest/user/install/#install) 以与 python 3.3 一起使用。

我使用 mac，并安装了 python 3.3 和 2.7.1。路径。

```
2.7.1 : 

which python
/usr/bin/python

3.3:
/Library/Frameworks/Python.framework/Versions/3.3/bin 
```

我试过这些来安装

```
curl -O http://python-distribute.org/distribute_setup.py
sudo /Library/Frameworks/Python.framework/Versions/3.3/bin/python3 distribute_setup.py
sudo /Library/Frameworks/Python.framework/Versions/3.3/bin/python3 -m easy_install pip
sudo /Library/Frameworks/Python.framework/Versions/3.3/bin/pip install requests 
```

最后一步给出错误：

```
 File "./requests/utils.py", line 22, in <module>

    from .compat import parse_http_list as _parse_list_header

  File "./requests/compat.py", line 112, in <module>

    from .packages import chardet2 as chardet

ImportError: cannot import name chardet2 
```

我尝试将 PYTHONPATH 设置为：

```
echo $PYTHONPATH
/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages
[~/tmp] $ 
```

仍然是同样的错误。

安装chardet2后我也试过了；但

```
 $ python3.3
Python 3.3.0 (v3.3.0:bd8afb90ebf2, Sep 29 2012, 01:25:11) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import chardet2
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named 'chardet2'
>>> 
```

## 编辑：详细的 pip.log

```
 Skipping link http://octodex.github.com/ (from https://github.com/kennethreitz/requests); not a file
    Skipping link https://github.com/site/terms (from https://github.com/kennethreitz/requests); not a file
    Skipping link https://github.com/site/privacy (from https://github.com/kennethreitz/requests); not a file
    Skipping link https://github.com/security (from https://github.com/kennethreitz/requests); not a file
  Using version 0.14.2 (newest of versions: 0.14.2, 0.14.1, 0.14.0, 0.13.9, 0.13.8, 0.13.7, 0.13.6, 0.13.5, 0.13.4, 0.13.3, 0.13.2, 0.13.1, 0.13.0, 0.12.1, 0.12.0, 0.11.2, 0.11.1, 0.10.8, 0.10.7, 0.10.6, 0.10.4, 0.10.3, 0.10.2, 0.10.1, 0.10.0, 0.9.3, 0.9.2, 0.9.1, 0.9.0, 0.8.9, 0.8.8, 0.8.7, 0.8.6, 0.8.5, 0.8.4, 0.8.3, 0.8.2, 0.8.1, 0.8.0, 0.7.6, 0.7.5, 0.7.4, 0.7.3, 0.7.2, 0.7.1, 0.7.0, 0.6.6, 0.6.5, 0.6.4, 0.6.3, 0.6.2, 0.6.1, 0.6.0, 0.5.1, 0.5.0, 0.4.1, 0.4.0, 0.3.4, 0.3.3, 0.3.2, 0.3.1, 0.3.0, 0.2.4, 0.2.3, 0.2.2, 0.2.1, 0.2.0)
  Downloading from URL http://pypi.python.org/packages/source/r/requests/requests-0.14.2.tar.gz#md5=488508ba3e8270992ad5b3fb54d364ca (from http://pypi.python.org/simple/requests/)
  Running setup.py egg_info for package requests

    Traceback (most recent call last):

      File "<string>", line 16, in <module>

      File "/private/var/folders/fc/k8b9ds214nv4lqv2x4395khc0000gn/T/pycharm-packaging377147531338803949.tmp/requests/setup.py", line 6, in <module>

        import requests

      File "./requests/__init__.py", line 52, in <module>

        from . import utils

      File "./requests/utils.py", line 22, in <module>

        from .compat import parse_http_list as _parse_list_header

      File "./requests/compat.py", line 112, in <module>

        from .packages import chardet2 as chardet

    ImportError: cannot import name chardet2

    Complete output from command python setup.py egg_info:

    Traceback (most recent call last):

  File "<string>", line 16, in <module>

  File "/private/var/folders/fc/k8b9ds214nv4lqv2x4395khc0000gn/T/pycharm-packaging377147531338803949.tmp/requests/setup.py", line 6, in <module>

    import requests

  File "./requests/__init__.py", line 52, in <module>

    from . import utils

  File "./requests/utils.py", line 22, in <module>

    from .compat import parse_http_list as _parse_list_header

  File "./requests/compat.py", line 112, in <module>

    from .packages import chardet2 as chardet

ImportError: cannot import name chardet2

----------------------------------------

Command python setup.py egg_info failed with error code 1 in /private/var/folders/fc/k8b9ds214nv4lqv2x4395khc0000gn/T/pycharm-packaging377147531338803949.tmp/requests

Exception information:
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/pip-1.2.1-py3.3.egg/pip/basecommand.py", line 107, in main
    status = self.run(options, args)
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/pip-1.2.1-py3.3.egg/pip/commands/install.py", line 256, in run
    requirement_set.prepare_files(finder, force_root_egg_info=self.bundle, bundle=self.bundle)
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/pip-1.2.1-py3.3.egg/pip/req.py", line 1042, in prepare_files
    req_to_install.run_egg_info()
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/pip-1.2.1-py3.3.egg/pip/req.py", line 236, in run_egg_info
    command_desc='python setup.py egg_info')
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/pip-1.2.1-py3.3.egg/pip/util.py", line 612, in call_subprocess
    % (command_desc, proc.returncode, cwd))
pip.exceptions.InstallationError: Command python setup.py egg_info failed with error code 1 in /private/var/folders/fc/k8b9ds214nv4lqv2x4395khc0000gn/T/pycharm-packaging377147531338803949.tmp/requests 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-07T19:39:00.377

[Cheese Shop 页面](http://pypi.python.org/pypi/requests)当前显示版本 0.14.2的“构建状态失败”。看起来像下载这个 tarball 并尝试构建/测试/安装它实际上在 3.3 中失败了。这并不奇怪，因为*0.14.1*是第一个使用 3.3 的版本，可能还没有多少人使用 3.3...</p>

那么，您能做些什么（除了以适当的方式报告错误）？两种选择：

*   获取 0.14.1 tarball 并安装它。
*   获取最新的源并安装它。

第二个实际上更容易，并且可能更好（当它工作时），它实际上是在Requests[的文档中建议的。](http://docs.python-requests.org/en/latest/user/install/)

但是，文档没有告诉您的是，您可以`pip`在仍然使用最新源的同时获得好处和简单性：

```
pip-3.3 install git+https://github.com/kennethreitz/requests 
```

我刚刚对此进行了测试，它运行良好，并且（如预期的那样）给了我与请求文档中的说明完全相同的结果。

# c# - 在 DatagridView 中的复选框中转换 int 列

> ID：13769520
> 
> 赞同：0
> 
> 时间：2012-12-07T19:10:28.013
> 
> 标签：c#, entity-framework, datagridview

我将 DatagridView 与实体框架一起使用，并且我想将我的数据库导入 DatagridView。

代码：

```
gv.DataSource = myContext.myTable.ToList<myTable>(); 
```

我的一个字段是一个 int，但我想让它成为一个打开/关闭按钮（红色圆圈/绿色圆圈），或者简化一个复选框。

如何将已导入（通过 EF）的 int 列转换为复选框列？

PS：我有 Devcomponent 组件，但我不需要使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T20:16:39.160

如果您将列类型更改为 BIT 就可以了。

# google-apps-script - 通过 Google Apps 脚本以编程方式将 Adsense 广告添加到 Google 站点

> ID：13769523
> 
> 赞同：0
> 
> 时间：2012-12-07T19:10:45.437
> 
> 标签：google-apps-script, google-apps, adsense, google-sites

是否有任何解决方法可以以编程方式将 AdSense 广告添加到 Google 协作平台中的页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T18:42:32.400

不幸的是，谷歌已经关闭了谷歌站点中 Adsense 的 API 服务：

[https://support.google.com/sites/answer/3156640?hl=en&ref_topic=1046094](https://support.google.com/sites/answer/3156640?hl=en&ref_topic=1046094)

这是 Google 的 Adsenese 应用脚本 API 参考：

[https://developers.google.com/apps-script/service_adsense](https://developers.google.com/apps-script/service_adsense)

您似乎无法以编程方式添加 Adsense 广告。它看起来像一个用于报告等的信息收集工具。

也许他们将来会改变功能。

也许有预先填充广告的页面模板？

祝你好运。

# scala - 模式匹配scala中的常量表达式？

> ID：13769531
> 
> 赞同：2
> 
> 时间：2012-12-07T19:11:47.590
> 
> 标签：scala, pattern-matching

是否可以重写以下代码

```
for (i <- x) {
  if (i==x.first) {
    // do sth
  } else if (i==x.last) {
    // do sth
  } else {
    // do sth
  }
} 
```

使用模式匹配

```
for (i <- x) i match { 
  case `x.first` => // do sth
  case `x.last` => // do sth
  case _ => // do sth
} 
```

我知道我们可以使用guard，或者提前评估`x.first`和`x.last`存储它们在 other `val`s 中引用，但这很丑陋。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T19:26:46.020

一种干净的方法是为自己定义提取`+:`器`:+`：

```
object +: {
  def unapply[CC, A, That](seq: CC)(implicit asSeq: CC => Seq[A], cbf: CanBuildFrom[CC, A, That]): Option[(A, That)] = {
    if (seq.nonEmpty)
      Some(seq.head, cbf(seq) ++= seq.tail result)
    else
      None
  }
}

object :+ {
  def unapply[CC, A, That](seq: CC)(implicit asSeq: CC => Seq[A], cbf: CanBuildFrom[CC, A, That]): Option[(That, A)] = {
    if (seq.nonEmpty)
      Some(cbf(seq) ++= seq.dropRight(1) result, seq.last)
    else
      None
  }
} 
```

然后你可以简单地做：

```
val x = Seq(1, 2, 3, 4)
val first +: middle :+ last = x

println("first is %s".format(first))
for (y <- middle)
  println("middle contains %s".format(y))
println("last is %s".format(last)) 
```

哪个打印：

```
first is 1
middle contains 2
middle contains 3
last is 4 
```

# ruby - 是否可以在对虾文档中呈现 blob 图像？

> ID：13769539
> 
> 赞同：7
> 
> 时间：2012-12-07T19:12:26.107
> 
> 标签：ruby, prawn

我愿意使用[Gruff](https://github.com/topfunky/gruff)在对虾文档中渲染一些图形。

我想避免将图像写入磁盘的延迟，只是为了让 Prawn 读取它们。

Gruff 提供了[to_blob 方法](http://www.rubydoc.info/github/topfunky/gruff/Gruff/Base#to_blob-instance_method)，将图形图像渲染为内存中的 blob，但是查看[大虾手册](http://prawn.majesticseacreature.com/manual.pdf)图像部分，它只为我们提供了一种直接从文件中渲染图像的方法。

我错过了什么吗？有没有办法从内存中渲染它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-07T22:38:33.453

您应该能够将图像数据作为 StringIO 传递

```
require 'stringio'
require 'pdf'

Prawn::Example.generate("foo.pdf") do |pdf|
  data = StringIO.new(render_my_image_to_a_string)
  pdf.image(data)
end 
```

# cakephp-2.1 - cakephp 2.0 上传到我的服务器后无法正常工作

> ID：13769544
> 
> 赞同：-2
> 
> 时间：2012-12-07T19:13:00.107
> 
> 标签：cakephp-2.1

**在我的本地主机中，cakephp 工作正常，就像我使用 filezilla 上传的 joomla 一样，但它不起作用，谁能告诉我如何在服务器上安装它。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T03:52:27.787

很难确定到底出了什么问题，因为您没有提供太多信息！

所以我认为您在本地主机上开发了您的应用程序，然后使用 FileZilla 将文件上传到您的 Web 服务器。

您需要检查的一些事项：

1）您是否更新了 app/Config/core.php 文件以适应您的新数据库？

2) 您是否在您的网络服务器上创建了一个新数据库，其字段/和/或数据与您在本地主机服务器上的相同？

3) 这是给定的，但是您的 Web 服务器的数据库设置是否正确？用户是否有权访问数据库？

希望这可以帮助，

亚当。

# python - np.fromfile 文件大小的最大限制？

> ID：13769545
> 
> 赞同：3
> 
> 时间：2012-12-07T19:13:04.313
> 
> 标签：python, numpy, scipy

np.fromfile() 是否有最大文件大小？我正在尝试读取一个 48GB 的​​文件，其中包含大约 2.1e9 条记录（每条记录有 5 个值）。

当我将计数限制为 8e7 时它起作用：

```
fromfile(filename, dtp, int(8e7))
Out[69]: 
array([(1, 244025.0, 1.1666666269302368, 360.1666564941406, 50.0),
       (2, 244025.0, 1.1666666269302368, 360.5, 50.0),
       (3, 244025.0, 1.1666666269302368, 360.8333435058594, 50.0), ...,
       (255138, 244131.0, 1128.9346923828125, 461.38494873046875, 49.5),
       (255139, 244131.0, 1143.77783203125, 473.2532958984375, 49.5),
       (255140, 244131.0, 1150.4803466796875, 464.6799011230469, 49.5)], 
      dtype=[('ntrac', '<i4'), ('ints', '<f8'), ('x', '<f4'), ('y', '<f4'), ('z', '<f4')]) 
```

但是当计数设置为 9e7 时，所有值都被读取为零：

```
In [70]: fromfile(filename, dtp, int(9e7))
Out[70]: 
array([(0, 0.0, 0.0, 0.0, 0.0), (0, 0.0, 0.0, 0.0, 0.0),
       (0, 0.0, 0.0, 0.0, 0.0), ..., (0, 0.0, 0.0, 0.0, 0.0),
       (0, 0.0, 0.0, 0.0, 0.0), (0, 0.0, 0.0, 0.0, 0.0)], 
      dtype=[('ntrac', '<i4'), ('ints', '<f8'), ('x', '<f4'), ('y', '<f4'), ('z', '<f4')]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:19:41.550

这可能是 Mac OSX 的 fread() 例程中的错误。fwrite() 例程确实有类似的错误：[https ://github.com/numpy/numpy/issues/574](https://github.com/numpy/numpy/issues/574)

您可以通过编写一个简单的 C 测试程序（例如附在票上的那个）来检查这一点，然后向 Apple 投诉...

解决方法是以足够小的块读取文件。

**编辑：**阅读错误报告太快 --- fwrite() 错误并不完全相同，但我认为不能排除操作系统错误......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T15:54:17.503

看起来这确实是 Mac OS X 的一个错误。

请参阅 numpy 中的以下错误：[https ://github.com/numpy/numpy/issues/2806](https://github.com/numpy/numpy/issues/2806)

我在分支的分支中有一个建议的修复程序，可以帮助某人验证它，请参阅： [https ://github.com/sauliusl/numpy/tree/bug_large_save](https://github.com/sauliusl/numpy/tree/bug_large_save)

# android - android NDK：连接时gdb崩溃

> ID：13769546
> 
> 赞同：3
> 
> 时间：2012-12-07T19:13:07.870
> 
> 标签：android, android-ndk, gdb, armv7, eabi

作为对此的跟进（我让 gdbserver 正常启动）：[Android NDK 调试：armeabi-v7a not working](https://stackoverflow.com/questions/13591076/android-ndk-debugging-armeabi-v7a-not-working)

NDK 8c、Eclipse 和 Cygwin、NativeActivity。

我在这里的while循环中设置了一个断点：

```
void android_main( android_app* state )
{
    int stop = 0;
    int x = 5;
    while( stop == 0 )
    {
        x++;
    } 
```

...但是连接时gdb崩溃了！它会“填充”大约 10 秒钟，然后崩溃。有一些输出。

这是 gdbserver 的输出：

```
Android NDK installation path: /cygdrive/e/uppercut/sdks/android-ndk
Using default adb command: /cygdrive/e/uppercut/sdks/android-sdk/platform-tools/adb
ADB version found: Android Debug Bridge version 1.0.31
Using ADB flags:
Using auto-detected project path: .
Found package name: com.example.radgame
ABIs targetted by application: armeabi-v7a
Device API Level: 15
Device CPU ABIs: armeabi-v7a armeabi
Compatible device ABI: armeabi-v7a
Using gdb setup init: ./libs/armeabi-v7a/gdb.setup
Using toolchain prefix: /cygdrive/e/uppercut/sdks/android-ndk/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/arm-linux-androideabi-
Using app out directory: ./obj/local/armeabi-v7a
Found debuggable flag: true
Found device gdbserver: /data/data/com.example.radgame/lib/gdbserver
Found data directory: '/data/data/com.example.radgame'
Found running PID: 3218
Launched gdbserver succesfully.
Setup network redirection
## COMMAND: adb_cmd shell run-as com.example.radgame lib/gdbserver +debug-socket --attach 3218
## COMMAND: adb_cmd forward tcp:5039 localfilesystem:/data/data/com.example.radgame/debug-socket
Attached; pid = 3218
Listening on Unix socket debug-socket
## COMMAND: adb_cmd pull /system/bin/app_process obj/local/armeabi-v7a/app_process
3204 KB/s (9848 bytes in 0.003s)
Pulled app_process from device/emulator.
## COMMAND: adb_cmd pull /system/bin/linker obj/local/armeabi-v7a/linker
7732 KB/s (39592 bytes in 0.005s)
Pulled linker from device/emulator.
## COMMAND: adb_cmd pull /system/lib/libc.so obj/local/armeabi-v7a/libc.so
6994 KB/s (286536 bytes in 0.040s)
Pulled libc.so from device/emulator.
<waits while gdb connects...>
Remote debugging from host 0.0.0.0
libthread_db:td_ta_new: Probing system for platform bug.
<lots of repetitive lines...>
libthread_db:td_ta_new: Victory: We can debug theads!
readchar: Got EOF
Remote side has terminated connection.  GDBserver will reopen the connection.
Listening on Unix socket debug-socket 
```

最后几行是它对 gdb 连接和崩溃的响应。

这是 gdb 输出：

```
Reading symbols from E:\uppercut\prototype\build\code\androidp4\radgame\obj\local\armeabi-v7a\app_process...done.

WARNING: no debugging symbols found in E:\uppercut\prototype\build\code\androidp4\radgame\obj\local\armeabi-v7a\app_process.
Either the binary was compiled without debugging information
or the debugging information was removed (e.g., with strip or strip -g).
Debugger capabilities will be very limited.
For further information: http://wiki/Main/GdbFaq#No_debugging_symbols_found

89-gdb-set confirm off
(gdb)
89^done
(gdb)
90-gdb-set width 0
90^done
(gdb)
91-gdb-set height 0
91^done
(gdb)
92-interpreter-exec console echo
92^done
(gdb)
93-gdb-show prompt
93^done,value="(gdb) "
(gdb)
94-gdb-set target-async 0
94^done
(gdb)
95-gdb-set auto-solib-add on
95^done
(gdb)
96-gdb-set stop-on-solib-events 0
96^done
(gdb)
97-gdb-set stop-on-solib-events 1
97^done
(gdb)
98-target-select remote localhost:5039
=thread-group-started,id="i1",pid="42000"
=thread-created,id="1",group-id="i1"
&"warning: while parsing target library list (at line 2): No segment defined for com.example.radgame\n"
warning: while parsing target library list (at line 2): No segment defined for com.example.radgame
=library-loaded,id="/system/bin/linker",target-name="/system/bin/linker",host-name="E:\\uppercut\\prototype\\build\\code\\androidp4\\radgame/./obj/local/armeabi-v7a/linker",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libc.so",target-name="libc.so",host-name="E:\\uppercut\\prototype\\build\\code\\androidp4\\radgame/./obj/local/armeabi-v7a/libc.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libstdc++.so",target-name="libstdc++.so",host-name="libstdc++.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libm.so",target-name="libm.so",host-name="libm.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="liblog.so",target-name="liblog.so",host-name="liblog.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libcutils.so",target-name="libcutils.so",host-name="libcutils.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libz.so",target-name="libz.so",host-name="libz.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libtime_genoff.so",target-name="libtime_genoff.so",host-name="libtime_genoff.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libutils.so",target-name="libutils.so",host-name="libutils.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libbinder.so",target-name="libbinder.so",host-name="libbinder.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libexpat.so",target-name="libexpat.so",host-name="libexpat.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libcrypto.so",target-name="libcrypto.so",host-name="libcrypto.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libgabi++.so",target-name="libgabi++.so",host-name="libgabi++.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libicuuc.so",target-name="libicuuc.so",host-name="libicuuc.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libicui18n.so",target-name="libicui18n.so",host-name="libicui18n.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libssl.so",target-name="libssl.so",host-name="libssl.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libstlport.so",target-name="libstlport.so",host-name="libstlport.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libnativehelper.so",target-name="libnativehelper.so",host-name="libnativehelper.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libnetutils.so",target-name="libnetutils.so",host-name="libnetutils.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libGLESv2_dbg.so",target-name="libGLESv2_dbg.so",host-name="libGLESv2_dbg.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libEGL.so",target-name="libEGL.so",host-name="libEGL.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libwpa_client.so",target-name="libwpa_client.so",host-name="libwpa_client.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libhardware_legacy.so",target-name="libhardware_legacy.so",host-name="libhardware_legacy.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libpixelflinger.so",target-name="libpixelflinger.so",host-name="libpixelflinger.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libhardware.so",target-name="libhardware.so",host-name="libhardware.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libemoji.so",target-name="libemoji.so",host-name="libemoji.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libjpeg.so",target-name="libjpeg.so",host-name="libjpeg.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libsecnativefeature.so",target-name="libsecnativefeature.so",host-name="libsecnativefeature.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libharfbuzz.so",target-name="libharfbuzz.so",host-name="libharfbuzz.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libquramimagecodec.so",target-name="libquramimagecodec.so",host-name="libquramimagecodec.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libskia.so",target-name="libskia.so",host-name="libskia.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libui.so",target-name="libui.so",host-name="libui.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libGLESv2.so",target-name="libGLESv2.so",host-name="libGLESv2.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libmemalloc.so",target-name="libmemalloc.so",host-name="libmemalloc.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libQcomUI.so",target-name="libQcomUI.so",host-name="libQcomUI.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libremotedesktop_client.so",target-name="libremotedesktop_client.so",host-name="libremotedesktop_client.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libgui.so",target-name="libgui.so",host-name="libgui.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libcamera_client.so",target-name="libcamera_client.so",host-name="libcamera_client.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libsqlite.so",target-name="libsqlite.so",host-name="libsqlite.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libqc-opt.so",target-name="libqc-opt.so",host-name="libqc-opt.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libdvm.so",target-name="libdvm.so",host-name="libdvm.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libGLESv1_CM.so",target-name="libGLESv1_CM.so",host-name="libGLESv1_CM.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libETC1.so",target-name="libETC1.so",host-name="libETC1.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libsisodrm.so",target-name="libsisodrm.so",host-name="libsisodrm.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libsonivox.so",target-name="libsonivox.so",host-name="libsonivox.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libstagefright_foundation.so",target-name="libstagefright_foundation.so",host-name="libstagefright_foundation.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libmedia.so",target-name="libmedia.so",host-name="libmedia.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libQmageDecoder.so",target-name="libQmageDecoder.so",host-name="libQmageDecoder.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libnfc_ndef.so",target-name="libnfc_ndef.so",host-name="libnfc_ndef.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libusbhost.so",target-name="libusbhost.so",host-name="libusbhost.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libhwui.so",target-name="libhwui.so",host-name="libhwui.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libtilerenderer.so",target-name="libtilerenderer.so",host-name="libtilerenderer.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libbluedroid.so",target-name="libbluedroid.so",host-name="libbluedroid.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libdbus.so",target-name="libdbus.so",host-name="libdbus.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libandroid_runtime.so",target-name="libandroid_runtime.so",host-name="libandroid_runtime.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libvorbisidec.so",target-name="libvorbisidec.so",host-name="libvorbisidec.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libstagefright_yuv.so",target-name="libstagefright_yuv.so",host-name="libstagefright_yuv.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libdrmframework.so",target-name="libdrmframework.so",host-name="libdrmframework.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libpowermanager.so",target-name="libpowermanager.so",host-name="libpowermanager.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libdiag.so",target-name="libdiag.so",host-name="libdiag.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libaudcal.so",target-name="libaudcal.so",host-name="libaudcal.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libacdbloader.so",target-name="libacdbloader.so",host-name="libacdbloader.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libalsa-intf.so",target-name="libalsa-intf.so",host-name="libalsa-intf.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libchromium_net.so",target-name="libchromium_net.so",host-name="libchromium_net.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libstagefright_amrnb_common.so",target-name="libstagefright_amrnb_common.so",host-name="libstagefright_amrnb_common.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libstagefright_enc_common.so",target-name="libstagefright_enc_common.so",host-name="libstagefright_enc_common.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libstagefright_avc_common.so",target-name="libstagefright_avc_common.so",host-name="libstagefright_avc_common.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libsavscmn.so",target-name="libsavscmn.so",host-name="libsavscmn.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libsavsff.so",target-name="libsavsff.so",host-name="libsavsff.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libsurfaceflinger_client.so",target-name="libsurfaceflinger_client.so",host-name="libsurfaceflinger_client.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libtvoutinterface.so",target-name="libtvoutinterface.so",host-name="libtvoutinterface.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libtvoutservice.so",target-name="libtvoutservice.so",host-name="libtvoutservice.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libmm-abl-oem.so",target-name="libmm-abl-oem.so",host-name="libmm-abl-oem.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libmm-abl.so",target-name="libmm-abl.so",host-name="libmm-abl.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libstagefright.so",target-name="libstagefright.so",host-name="libstagefright.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libmtp.so",target-name="libmtp.so",host-name="libmtp.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libexif.so",target-name="libexif.so",host-name="libexif.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libmedia_jni.so",target-name="libmedia_jni.so",host-name="libmedia_jni.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libbcc.so",target-name="libbcc.so",host-name="libbcc.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libbcinfo.so",target-name="libbcinfo.so",host-name="libbcinfo.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libRS.so",target-name="libRS.so",host-name="libRS.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="librs_jni.so",target-name="librs_jni.so",host-name="librs_jni.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libandroid.so",target-name="libandroid.so",host-name="libandroid.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libv8.so",target-name="libv8.so",host-name="libv8.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libwebcore.so",target-name="libwebcore.so",host-name="libwebcore.so",symbols-loaded="0",thread-group="i1"
=library-loaded,id="libradgame.so",target-name="libradgame.so",host-name="E:\\uppercut\\prototype\\build\\code\\androidp4\\radgame/./obj/local/armeabi-v7a/libradgame.so",symbols-loaded="0",thread-group="i1"
&"warning: Could not load shared library symbols for 83 libraries, e.g. libstdc++.so.\nUse the \"info sharedlibrary\" command to see the complete listing.\nDo you need \"set solib-search-path\" or \"set sysroot\"?"
&"\n"
warning: Could not load shared library symbols for 83 libraries, e.g. libstdc++.so.
Use the "info sharedlibrary" command to see the complete listing.
Do you need "set solib-search-path" or "set sysroot"?
&"warning: Breakpoint address adjusted from 0xb00056f5 to 0xb00056f4.\n"
warning: Breakpoint address adjusted from 0xb00056f5 to 0xb00056f4.
*stopped,frame={addr="0x4004d738",func="__futex_syscall3",args=[],from="E:\\uppercut\\prototype\\build\\code\\androidp4\\radgame/./obj/local/armeabi-v7a/libc.so"},thread-id="1",stopped-threads="all",core="0"
98^connected
(gdb)
99 info proc
&"info proc\n"
&"Undefined info command: \"proc\".  Try \"help info\".\n"
99^error,msg="Undefined info command: \"proc\".  Try \"help info\"."
(gdb)
100-environment-cd E:\\uppercut\\prototype\\build\\code\\androidp4\\radgame
100^done
(gdb)
101 info program
&"info program\n"
~"Debugging a target over a serial line.\n"
~"Program stopped at 0x4004d738.\n"
~"It stopped with signal SIGTRAP, Trace/breakpoint trap.\n"
~"Type \"info stack\" or \"info registers\" for more information.\n"
101^done
(gdb)
102 info threads
&"info threads\n"
=thread-created,id="2",group-id="i1"
~"[New Thread 3219]\n"
=thread-created,id="3",group-id="i1"
~"[New Thread 3223]\n"
=thread-created,id="4",group-id="i1"
~"[New Thread 3224]\n"
=thread-created,id="5",group-id="i1"
~"[New Thread 3225]\n"
=thread-created,id="6",group-id="i1"
~"[New Thread 3226]\n"
=thread-created,id="7",group-id="i1"
~"[New Thread 3229]\n"
=thread-created,id="8",group-id="i1"
~"[New Thread 3230]\n"
=thread-created,id="9",group-id="i1"
~"[New Thread 3231]\n"
=thread-created,id="10",group-id="i1"
~"[New Thread 3233]\n"
=thread-created,id="11",group-id="i1"
~"[New Thread 3317]\n"
=thread-created,id="12",group-id="i1"
~"[New Thread 3320]\n"
~"  Id   Target Id         Frame \n"
~"  12   Thread 3320       0x4004c7fc in __ioctl () from E:\\uppercut\\prototype\\build\\code\\androidp4\\radgame/./obj/local/armeabi-v7a/libc.so\n" 
```

我以前使用 gdb 进行过调试，带有 Java 入口点和“armeabi”。切换到 C++ 入口点 (android_main) 和“armeabi-v7a”后，gdb 崩溃。不知道有没有关系...

对于它的价值，gdb 在我连接的任何其他时间也会崩溃（我在启动时删除了无限的 while 循环）。例如，我遇到了线程问题，所以我的应用程序无缘无故挂起。如果我在挂起时连接，那么 gdb 会以同样的方式崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T02:38:04.957

这是由于这些 GCC 编译器标志中的一个或两个，我在切换到 armeabi-v7a 时添加的，然后忘记了。

> -gstabs+ -g

NDK 自带的 gdb 版本不能像那些标志。

# java - Selenium WebDriver Java - org.openqa.selenium.UnhandledAlertException：IE 中基本身份验证窗口的模态对话框

> ID：13769547
> 
> 赞同：1
> 
> 时间：2012-12-07T19:13:31.113
> 
> 标签：java, internet-explorer, basic-authentication, selenium-webdriver, autoit

我正在使用 Java、Selenium-WebDriver (2.25)、Maven、JUnit 为其中一个网站开发测试。

测试在 [Firefox 和 Chrome] 上运行良好。相同的测试不适用于 IE。

场景：用户注册到一个页面，从域 A 重定向到域 B。域 B 是基本认证的。我正在使用 autoIT 处理它[因为我必须在 windows env 中运行它们。只要]。

流程：注册点击即提交表单，它将转到下一页。将询问用户名和密码。在 autoit 可以工作之前，它会给出未处理警报的异常。

我希望有一个人可以帮助我。

它给了我例外，即“org.openqa.selenium.UnhandledAlertException：模态对话框存在”

我认为的问题是我没有处理警报，但为什么只在 IE 中它被识别为页面的一部分，而不是在 FF 和 Chrome [因为他们的 autoIT 解决方案运行良好]。

# javascript - 在 html5 画布上渲染需要花费太多时间，缓冲几乎没有帮助

> ID：13769552
> 
> 赞同：1
> 
> 时间：2012-12-07T19:13:49.757
> 
> 标签：javascript, html5-canvas

对于游戏，我正在尝试计算光影。为此，我将我的画布分解为正方形区域，并计算在从玩家到每个正方形位置的途中是否会阻挡光线。我现在已经设法为这些计算达到了相当好的性能。

然后通过用黑色方块 ( `Canvas.fillRect(...)`) 覆盖不可见区域来可视化结果，但是当想要一个好的分辨率时，这个步骤变得过于昂贵，即大约 10'000 个方块用于计算。我尝试先将它们渲染到屏幕外画布（=缓冲区）中，然后在可见画布上绘制缓冲区，但我无法体验到任何显着的性能改进。

是我遗漏了什么，还是有其他方法可以加快绘图速度？

**更新：**

受影响的代码可以在这里找到：[https](https://github.com/otruffer/Ape_On_Tape/blob/master/src/client/js/visibility.js) ://github.com/otruffer/Ape_On_Tape/blob/master/src/client/js/visibility.js （代码有点太大，不能在这里发布）

实际绘图发生在该文件`drawCloudAt(...)`的`flushBuffer()`下部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:25:07.147

在软件中进行实时光计算始终是性能杀手。您是否考虑过使用真正的 3d 引擎来代替视频卡上的光计算？是的，Javascript 现在可以做到这一点——这个新功能称为 WebGL。

当您只需要一种更快的方法来应用光照贴图时，您可以直接操作画布的 RGB 值，而不是使用 fillRect。您可以使用 getImageData 获取画布的原始 8 位 RGBA 值数组。然后，您可以操作此数组并使用 putImageData 将其放回原处。

# web-applications - 如何检查网页是否已加载（没有 JS）？

> ID：13769554
> 
> 赞同：0
> 
> 时间：2012-12-07T19:13:53.653
> 
> 标签：web-applications, web, pageload

如果 JavaScript 被禁用，我如何检查用户是否已加载网页（否则我可以在页面就绪时发送请求）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:18:38.460

您可以在将发出请求的页脚中放置一个代码，例如：

```
<img src="http://<example.url>/?user_ip=<?php echo $_SERVER['REMOTE_ADDR']&<any other data needed>" style="display:none" /> 
```

当用户加载页面时，他将 ping example.url，您可以存储和进一步处理此请求。

# c++ - 使用 XCode 调试器跟踪递归函数

> ID：13769558
> 
> 赞同：0
> 
> 时间：2012-12-07T19:14:08.863
> 
> 标签：c++, xcode, debugging, recursion

如何跟踪像这样递归调用自身两次的递归函数？我想创建一个调用树。当我偶然发现这一点时，我怎么知道当前正在执行哪些方法？`CountWays(numStairs-1)`或者`CountWays(numStairs-2)`

![在此处输入图像描述](../Images/eb431ffc79bade75f9f504083df2cf38.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T23:36:19.497

**GDB回答？**
如果您在屏幕截图的右下角附近看到一组按钮，其中最左侧的按钮已被选中。按中间或最右边的按钮打开调试控制台。在那里你可以输入'bt'，它会打印你的回溯。

**图形用户界面回答？** 您需要在断点（或异常断点）上触发回溯，可在此处找到相关说明： [http ://www.oramined.com/index.php/articles/182-ios-5-xcode-backtrace](http://www.oramind.com/index.php/articles/182-ios-5-xcode-backtrace)

# php - 如何从 xml 节点动态创建 php 页面，然后将索引页面链接到它们

> ID：13769560
> 
> 赞同：0
> 
> 时间：2012-12-07T19:14:23.690
> 
> 标签：php, xml, dynamic

我正在寻找一种方法来动态创建与 PHP 的 XML 提要相对应的详细信息页面。

例如，假设这是我的 xml 提要：

```
<root>
   <person>
      <name>Jim</name>
      <desc>A hard working guy.</desc>
    </person>
    <person>
      <name>Tom</name>
      <desc>As lazy as an obese house cat.</desc>
    </person>
</root> 
```

并说这是我的 php/html：

```
<?php
$dom = simplexml_load_file('people.xml');
?>

<ul>
<?php
for ($i = 0; $i < 10; $i++) {
   $name = $dom->person[$i]->name;
   $desc = $dom->person[$i]->desc;
$post = 
   '
    <li>
        <a href="details.php">'.$name.'</a>
        <p>'.$desc.'</p>
    </li>
    ';

 echo $post;
}
?>
</ul> 
```

我想让`<a>`正在创建的标签链接到一个页面，该页面包含 XML 中相应人员的内容。

所以我想我的两个问题是，如何动态创建一个带有 xml 数据的页面，以及如何在 php 中设置上面代码中的 href 属性以链接到它？

感谢您的见解和回答！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:35:51.010

尝试在构建函数 file_put_content(filename, content) 中使用 create using php

```
<?php
for ($i = 0; $i < 10; $i++) {
   $name = $dom->person[$i]->name;
   $desc = $dom->person[$i]->desc;
   $file_name = 'usercontent'.$i.'.php';
   $post = 
   '
    <li>
        <a href=$file_name>'.$name.'</a>
        <p>'.$desc.'</p>
    </li>
    ';
     file_put_contents($file_name, $post);      
 echo $post;
} 
```

在这里，我创建了一个包含 usercontent0.php、usercontent1.php 等的文件，您还可以指定一些其他随机文件名，并且您想要添加到页面的任何内容都将添加到 $post 值

# c# - 将数据添加到已存在组合框列的 dataGridView 行

> ID：13769562
> 
> 赞同：1
> 
> 时间：2012-12-07T19:14:46.150
> 
> 标签：c#, datagridview, datagridcomboboxcolumn

我有一个`DataGridView`在运行时填充了几`ComboBoxColumn`列。例如，

```
var newCountryColumn = new DataGridViewComboBoxColumn();
newCountryColumn.HeaderText = "Country";
newCountryColumn.DataSource = CountryListArray.ToArray();
newCountryColumn.DisplayMember = "Name";
newCountryColumn.ValueMember = "Code"; 
```

等等。现在，在运行时，用户选择一个要打开的文件，它被逐行解析成一个数组。

```
var lines = File.ReadAllLines(path + "\\" + choosenFile);
foreach (string line in lines) {
    numOfRecords++;
    errorCounter = 0;
    string[] items = line.Split('\t').ToArray();

    int billState = headerIndex[0] - 1;
    int billCountry = headerIndex[1] - 1;
    int shipState = headerIndex[2] - 1;
    int shipCountry = headerIndex[3] - 1;

    for (int i = 0; i < headerIndex.Count; i++) {
        int index = headerIndex[i];
        /*Get the state and country codes from the files using the correct indices*/
        Globals.Code = items[index - 1].ToUpper();
        //If the code can't be found in either list
        if (!CountryList.ContainsKey(Globals.Code) && !StateList.ContainsKey(Globals.Code)) {
            errorCounter++;
            if (errorCounter == 1){
                dataGridView1.Rows.Add(items);
            }
        }
    }
} 
```

现在，这很好用，除非我在 , 中滚动`DataGridView`到组合框所在的位置。显然，代码不喜欢将 items 数组中的值添加到预先存在的组合框列中。我得到一个错误对话框：

> DataGridView 发生以下异常： System.ArguementException: DataGridViewComboBoxCell 值无效。

项目数组中的项目可以显示在组合框列中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:12:30.603

```
newCountryColumn.DisplayMember = "Name";
newCountryColumn.ValueMember = "Code"; 
```

告诉`newCountryColumn.DataSource`期待一个具有名为`Name`and的属性的集合`Code`。但是你把它传递给`string[]`. 那是错误的，这就是错误消息告诉您的内容。

有几种方法可以做到这一点，最直接的方法是使用属性`Name`和声明您自己的类`Code`：

```
class CountryTuple
{
    public string Code { get; private set; }
    public string Name { get; private set; }

    public CountryTuple(string code, string name)
    {
        this.Code = code;
        this.Name = name;
    }
} 
```

现在您可以实例化您的集合：

```
var cts = new List<CountryTuple>(); 
```

将实例添加到您的集合::

```
cts.Add(new CountryTuple(items[index - 1].ToUpper(), whatever)); 
```

并将其分配给您的`DataSource`：

```
newCountryColumn.DataSource = cts; 
```

# c - 为什么这个数组的第一个成员被 MPI_Recv 覆盖？

> ID：13769564
> 
> 赞同：0
> 
> 时间：2012-12-07T19:14:49.257
> 
> 标签：c, algorithm, mpi

我正在尝试实现一个 MPI 程序，以迭代地将数组中的每个元素设置为自身及其邻居的平均值（在前一个时间步），同时保持第一个和最后一个元素为常数。对于一个过程，这很好用；但是，对于多个进程，我没有得到正确的答案，特别是第一个数组元素总是被覆盖。

我的初始化步骤似乎工作正常，至少就“计算前”输出而言，无论使用的进程数是 1 还是更多，它都会打印相同的向量。

我不完全确定的一件事是我是否正确使用了 MPI_Request 和 MPI_Status；要注意的变量是`sendL`、`sendR`和`status`。

我试图只包含代码的相关部分；“...” 标记缺少的地方。其中一些省略号带有注释以解释删除的内容。给出了并行和单进程实现以供比较。

```
...
#include "mpi.h"

... //definition of f() for initialization

int main(int argc, char **argv) {
  int         id, p, i, j, k, n, t, m, v, vp,
              lbound, ubound, block_size, offset;
  double      startwtime, endwtime;
  float       time;
  MPI_Request *sendL, *sendR;
  MPI_Status  *status;  /* return status for receive */
  double      *prev, *cur, *temp;

  ... // initialize MPI; get PE rank and size

  .... // set the following:
       // n = vector length, m = num iterations, k = buffer size
       // v = verbose (true/false)

  // Memory allocation for output from MPI functions
  // Note that I never actually initialized these. Is this a problem?
  sendL = (MPI_Request *) malloc(sizeof(MPI_Request));
  sendR = (MPI_Request *) malloc(sizeof(MPI_Request));
  status = (MPI_Status *) malloc(sizeof(MPI_Status));
  // Memory allocation for data array.
  block_size = (n/p+2*k);
  prev  = (double *) malloc( sizeof(double) * block_size);
  cur   = (double *) malloc( sizeof(double) * block_size);

  ... //malloc error handling

  t = 0;
  /* The following block is for a single process. It works correctly. */
  if(p==1){
     // Initialization
     startwtime = MPI_Wtime();
     for(i=0;i<n;i++)  prev[i] = f(i,n);
     cur[0] = f(0,n); cur[n-1] = f(n-1,n);
     if(v){
       printf("Before calculation\n");
       for(i=0;i<n;i++) printf("%f ",prev[i]);
       printf("\n");
     }
     while (t < m) {
      for ( i=1 ; i < n-1 ; i++ ) {
            cur[i] = (prev[i-1]+prev[i]+prev[i+1])/3;
       }
      temp = prev; prev = cur;  cur  = temp; t++;
      }
     if(v){
       printf("After calculation:\n");
       for(i=0;i<n;i++) printf("%f ",prev[i]);
       printf("\n");
     }
     endwtime = MPI_Wtime();
     time = endwtime-startwtime;
     printf("Sequential process complete, time: %f\n", time);
     return MPI_Finalize();     
  }
  /* Here is my parallel implementation. It has problems. */
  else{
     if (id == 0){
         startwtime = MPI_Wtime();
     }
     // Initialization
     offset = id*(n/p)-k;
     for(i=0;i<block_size;i++)  prev[i] = f(i+offset,n);
     cur[0] = f(0,n); cur[block_size-1] = prev[block_size-1];
     if (id == 0){
         for (i=0;i<k;i++){
            prev[i] = f(0,n);
            cur[i] = prev[i];
         }
     }
     if (id == p-1){
         for (i=block_size-k;i<block_size;i++){
             prev[i] = f(n-1,n);
             cur[i] = prev[i];
         }
     }
     if(v && id == 0){
       printf("Before calculation:\n");
       for(j=k;j<(n/p)+k;j++) printf("%f ",prev[j]);
       for(i=1;i<p;i++){
         MPI_Recv(prev+k,(n/p),MPI_DOUBLE_PRECISION,i,2,MPI_COMM_WORLD,status);
         for(j=k;j<(n/p)+k;j++) printf("%f ",prev[j]);
       }
       printf("\n");
     }
     else if (v){
       MPI_Isend(prev+k,(n/p),MPI_DOUBLE_PRECISION,0,2,MPI_COMM_WORLD,sendL);
     }
     lbound = (id == 0) ? (k+1) : (1);
     ubound = (id == p-1) ? (block_size-k-2) : (block_size-2);
     while (t < m) {
        for ( i=lbound ; i < ubound ; i++ ) {
              cur[i] = (prev[i-1]+prev[i]+prev[i+1])/3;
         }
        temp = prev; prev = cur;  cur  = temp; t++;
        if (t%k == 0){
          if (id > 0){
           // send to left
           MPI_Isend(prev+k,k,MPI_DOUBLE_PRECISION,id-1,0,MPI_COMM_WORLD,sendL);
          }
          if (id < p-1) {
           // send to right
           MPI_Isend(prev+block_size-2*k,k,
                   MPI_DOUBLE_PRECISION,id+1,1,MPI_COMM_WORLD,sendR);
          }
          if (id < p-1){
           // receive from right
           MPI_Recv(prev+block_size-k,k,
                   MPI_DOUBLE_PRECISION,id+1,0,MPI_COMM_WORLD,status);
          }
          if (id > 0) {
           // receive from left
           MPI_Recv(prev,k,MPI_DOUBLE_PRECISION,id-1,1,MPI_COMM_WORLD,status);
          }
        }
      }
     if(v && id == 0){
       printf("After calculation\n");
       for(j=k;j<(n/p)+k;j++) printf("%f ",prev[j]);
       for(i=1;i<p;i++){
         MPI_Recv(prev+k,(n/p),MPI_DOUBLE_PRECISION,i,2,MPI_COMM_WORLD,status);
         for(j=k;j<(n/p)+k;j++) printf("%f ",prev[j]);
       }
       printf("\n");
     }
     else if (v){
       MPI_Isend(prev+k,(n/p),MPI_DOUBLE_PRECISION,0,2,MPI_COMM_WORLD,sendL);
     }
     if (id == 0){
        endwtime = MPI_Wtime();
        time = endwtime-startwtime;
        printf("Process 0 complete, time: %f\n", time);
     }
     return MPI_Finalize();     
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T20:47:14.147

第一件事。这部分代码过于复杂：

```
MPI_Request *sendL, *sendR;
MPI_Status  *status;  /* return status for receive */

sendL = (MPI_Request *) malloc(sizeof(MPI_Request));
sendR = (MPI_Request *) malloc(sizeof(MPI_Request));
status = (MPI_Status *) malloc(sizeof(MPI_Status)); 
```

MPI 中的句柄是简单的类型，如整数或指针。在这种情况下，动态分配毫无意义。Status 也是一个具有 3-4 个字段的简单结构，在堆上分配它是没有意义的。改用堆栈变量：

```
MPI_Request sendL, sendR;
MPI_Status status; 
```

还有另一个问题：您发起非阻塞发送但从不保证它们的完成，即您从不调用`MPI_Wait`或`MPI_Test`在请求句柄上。它们可能永远不会真正完成，这可能导致接收代码中的死锁。实际上，您根本不需要这些非阻塞调用，而是使用`MPI_Sendrecv`专门为您使用`MPI_Isend`/组合的目的而设计的`MPI_Recv`。以下代码：

```
if (id > 0){
   // send to left
   MPI_Isend(prev+k,k,MPI_DOUBLE_PRECISION,id-1,0,MPI_COMM_WORLD,sendL);
}
if (id < p-1) {
   // send to right
   MPI_Isend(prev+block_size-2*k,k,
             MPI_DOUBLE_PRECISION,id+1,1,MPI_COMM_WORLD,sendR);
}
if (id < p-1){
   // receive from right
   MPI_Recv(prev+block_size-k,k,
            MPI_DOUBLE_PRECISION,id+1,0,MPI_COMM_WORLD,status);
}
if (id > 0) {
   // receive from left
   MPI_Recv(prev,k,MPI_DOUBLE_PRECISION,id-1,1,MPI_COMM_WORLD,status);
} 
```

可以替换为：

```
int prev_rank, next_rank;

prev_rank = (id > 0) ? id-1 : MPI_PROC_NULL;
next_rank = (id < p-1) ? id+1 : MPI_PROC_NULL;

...

MPI_Sendrecv(prev+k, k, MPI_DOUBLE, prev_rank, 0,
             prev+block_size-k, k, MPI_DOUBLE, next_rank, 0, MPI_COMM_WORLD, &status);
MPI_Sendrecv(prev+block_size-2*k, k, MPI_DOUBLE, next_rank, 1,
             prev, k, MPI_DOUBLE, prev_rank, 1, MPI_COMM_WORLD, &status); 
```

使用空进程的概念删除排名检查，即具有 rank 的进程`MPI_PROC_NULL`。它在 MPI 中是一个非常特殊的级别 - 您始终可以从它发送和接收消息，并且这些操作只是无操作。请注意，正确的 MPI 数据类型是`MPI_DOUBLE`. `MPI_DOUBLE_PRECISION`用于 Fortran 数据类型`DOUBLE PRECISION`。因为`MPI_Sendrecv`是阻塞调用，所以每次调用都被写入以便将数据发送到下一个进程，同时从前一个进程接收数据，以防止死锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T20:05:20.887

“计算前”输出会覆盖`prev`指针。哎呀。

# php - PHP替换html文件中的“可编辑”区域

> ID：13769565
> 
> 赞同：0
> 
> 时间：2012-12-07T19:14:50.453
> 
> 标签：php, arrays, forms, template-engine

我正在开发一种工具来替换 html 文档中的标记区域。我看过一些 php 模板系统，但它们并不是我真正想要的，所以这就是我作为系统的“引擎”所追求的。模板本身没有 php，我正在文件中搜索关键字“可编辑”以设置可更新的区域。我不想使用数据库来存储任何东西，而是从 html 文件本身读取所有内容。

它还有一些地方需要修复，但最重要的是，我需要它迭代“可编辑”区域数组并更新模板文件的部分。

这是 test.html（用于测试目的的模板文件）：

```
<html>

<font class="editable">
This is editable section 1
</font>
<br><br><hr><br>
<font class="editable">
This is editable section 2
</font>

</html> 
```

我希望能够通过一组表单文本区域更新“可编辑”部分。这仍然需要一些工作，但据我所知：

```
<?php

function g($string,$start,$end){ 
     preg_match_all('/' . preg_quote($start, '/') . '(.*?)'. preg_quote($end, '/').'/i', $string, $m); 
     $out = array(); 

     foreach($m[1] as $key => $value){ 
       $type = explode('::',$value); 
       if(sizeof($type)>1){ 
          if(!is_array($out[$type[0]])) 
             $out[$type[0]] = array(); 
          $out[$type[0]][] = $type[1]; 
       } else { 
          $out[] = $value; 
       } 
     } 
  return $out; 
}; 

// GET FILES IN DIR
   $directory="Templates/";
   // create a handler to the directory
    $dirhandler = opendir($directory);
    // read all the files from directory
    $i=0;
    while ($file = readdir($dirhandler)) {
        // if $file isn't this directory or its parent 
        //add to the $files array
        if ($file != '.' && $file != '..')
        {
                $files[$i]=$file; 
          //echo $files[$i]."<br>";
          $i++;                
        }   
    };
//echo $files[0];

?>

<div style="float:left; width:300px; height:100%; background-color:#252525; color:#cccccc;">
<form method="post" id="Form">
Choose a template:
<select>
<?php
// Dropdown of files in directory
foreach ($files as $file) {
  echo "<option>".$file."</option>"; // do somemething to make this $file on selection. Refresh page and populate fields below with the editable areas of the $file html
};
?>
</select>
<br> 
<hr>
Update these editable areas:<br>

<?php

$file = 'test.html';  // make this fed from form dropdown (list of files in $folder directory)
$html = file_get_contents($file);

$start = 'class="editable">';
$end = '<';

$oldText = g($html,$start,$end);

$i = 0;
foreach($oldText as $value){
  echo '<textarea value="" style="width: 60px; height:20px;">'.$oldText[$i].'</textarea>';  // create a <textarea> that will update the editable area with changes
  // something here
  $i++;
};

// On submit, update all $oldText values in test.html with new values.
?>
<br><hr>
&nbsp;<input type="submit" name="save" value="Save"/>  
</div>
<div style="float:left; width:300px;">
<?php include $file; // preview the file from dropdown. The editable areas should update when <textareas> are updated ?>
</div>
<div style="clear:both;"></div> 
```

我知道这个答案涉及更多，但我非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:32:36.267

不确定我是否正确理解您想要实现的目标。但似乎我会在 jquery 中这样做。

您可以获得所有具有“可编辑”类的 html 元素，如下所示：

```
$(".editable") 
```

您可以使用以下方法对它们进行迭代：

```
$(".editable").each(function(index){
    alert($(this).text()); // or .html()
    // etc... do your stuff
}); 
```

如果您将所有数据都保存在 php 数组中。您只需使用 json 将其传递给客户端。在 javascript 标签内使用 php print。

```
<?php

print "var phparray = " . json_encode($myphparray);

?> 
```

我认为将工作放在客户端（javascript）会更好。它将降低服务器工作负载 (PHP)。

但正如我所说，我不认为我已经掌握了你想要达到的一切。

# jquery - Chrome 和 Safari 之间的 jQuery 渲染异常

> ID：13769569
> 
> 赞同：1
> 
> 时间：2012-12-07T19:15:01.173
> 
> 标签：jquery, google-chrome, safari, webkit, rendering

本站[开发](http://www.star-telegram.com/dfwvarsity/)于2010年初（基于开发者使用的jQuery 1.4.1版本）。大约两个月前，用户注意到在使用 Chrome 时顶部导航和搜索菜单经常出现中断。它在 Safari 和 Firefox 中有效（并且仍然有效）。

除了 IE 错误修复之外，似乎没有任何特定于浏览器的代码。由于 Chrome 和 Safari 都是基于 Webkit 构建的，我会假设它们会显示相同的内容。那么，不推荐使用的元素，特定于 Webkit 的代码，也许它甚至与 jQuery 无关？可能是鬼？我难住了。

我正在使用 Chrome 版本 23.0.1271.95 - 我确信最初注意到它的人使用的是旧版本。

# ms-access - 女士访问选择数据大于日期时间范围

> ID：13769571
> 
> 赞同：10
> 
> 时间：2012-12-07T19:15:10.517
> 
> 标签：ms-access, datetime, ms-access-2007

如何在此日期时间范围之上选择 ms 访问中的数据

比如 select * from logevents where logTime>='12/6/2012 3:54:15 PM'

logTime 是日期时间字段

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-07T19:26:53.290

在日期的每一端添加 # 符号可让 Access 知道这是一个日期类型。

```
select * from logevents where logTime>=#12/6/2012 3:54:15 PM# 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-23T12:40:24.693

这取决于您的 Access 数据库是否在 ANSI 92 模式下创建/打开：
非 ANSI 92：Access 使用 # ... # 围绕日期并使用 *（多个字符）和 ? （一个字符）用于使用 LIKE 时的通配符。例如：

> SELECT * FROM logevents WHERE logTime>=#12/6/2012# AND description like ' *error* '

ANSI 92：Access 在日期前后使用“...”并使用 % 和 ? 使用 LIKE 时用于通配符。这种模式看起来更像 MySQL、Oracle 和 MSSQL 如何处理日期和通配符。例如：

> SELECT * FROM logevents WHERE logTime>='12/6/2012' AND description like '%error%'

请务必检查日期格式设置。它可以 dd/mm/yyyy 或 dd-mm-yyyy 或其他，这取决于您的区域设置。只需检查您的表格中的日期列以获取示例数据。

要在 Access 2007 中切换到 ANSI-92，但这应该不难应用于不同的版本： -打开 MS Access -单击左上角的 Office 按钮 -单击“访问选项”按钮 -从左侧选择“对象设计器”窗格-查找“查询设计”部分，有一个选项“SQL Server Compatible Syntac (ANSI 92)。-如果您有一个打开的数据库，您可以检查“此数据库”或检查“新数据库的默认值”所有新数据库的默认设置 - 单击“确定”按钮接受更改

# objective-c - 对话框中的枚举

> ID：13769576
> 
> 赞同：0
> 
> 时间：2012-12-07T19:15:36.137
> 
> 标签：objective-c, ios, cocoa-touch

我的带有各种类型项目列表的 tableViewController 将提供一个按钮来显示模式对话框。此对话框（类似于警报视图）将为用户提供从 6 个选项列表中的唯一选择。根据用户选择和确认的内容，主 tableview 控制器屏幕中的列表将被过滤以仅显示与所选类型匹配的项目。目前，我在 typedefed 枚举中列出了这六种类型。到现在为止还挺好。但是，我还需要能够使用六个 nsstring 填充我的自定义对话框，这些 nsstring 的名称将与枚举中使用的类型匹配。如何使这个枚举与我对这些字符串的来源的要求相协调，但要确保两者之间的某种程度的一致性？我不想硬编码任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:47:36.073

您需要一个帮助方法，它为每个枚举值返回一个字符串。这应该被写来处理可能的本地化。您的所有数据和事件处理都应基于枚举值。该字符串应用于显示。

辅助方法应采用枚举值并使用 switch 语句返回正确的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T19:47:15.247

我能想到几个：

*   将枚举更改为一堆字符串。如果它们也需要是整数，这会使事情变得有点乏味（`-[NSArray indexOfObject:]`）。
*   制作一个 C 字符串数组。这让您可以使用 C99 的便捷语法：

    ```
    NSString * const names[] = {
      [Foo] = @"Foo",
      [Bar] = @"Bar",
    }; 
    ```

*   自动生成的代码来执行上述操作。

注意事项：

*   这两者都会让 i18n 相当痛苦。如果合同工作只需要使用一种语言，这可能不相关，但这是不好的做法。
*   使用按钮索引作为键一直有效，直到您决定需要删除中间的按钮。字符串键在一般情况下工作得更好（我编写了一个 UIAlertView/UIActionSheet 包装器，它接受 (key,title) 对并返回键而不是按钮索引）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T20:57:50.193

我认为您“不想对任何东西进行硬编码”表示您不希望代码中有任何字符串常量。所以：

您可以简单地将字符串分配给工作表的 UI 元素（例如，可能是复选框），并为这些 UI 元素提供与您的枚举匹配的标记值（您可以在工作表关闭时查询）。这具有额外的好处，您可以轻松地本地化工作表。

或者：

如果您想将字符串与工作表分开，您可以创建一个 .strings 文件（也许您可以将其称为 Enumeration.strings 或类似名称），其格式如下：

```
"001" = "string one";
"002" = "string two";
.
.
"010" = "string ten"; 
```

然后您可以使用您的枚举值检索字符串，如下所示：

```
NSString *myString = NSLocalizedStringFromTable([NSString stringWithFormat:@"%03d", myEnumerationValue], @"Enumeration", @""); 
```

但是你必须有一种将字符串插入 UI 的方法，通过`IBOutlet`s 跟踪 UI 元素。请注意，我在这里使用了三位小数；也许你可以得到两个，甚至一个。最后，您可以像第一个建议一样进行本地化。

# .net - .NET 可以自动支持父文化的本地化吗？

> ID：13769584
> 
> 赞同：0
> 
> 时间：2012-12-07T19:16:11.663
> 
> 标签：.net, localization, satellite-assembly

我有一个已为**pt-BR**语言环境翻译的 .NET 应用程序，生成了一个附属程序集：

```
pt-BR/MyApp.resources.dll 
```

我*没有***pt-PT**语言环境的翻译。我希望在 pt-PT 文化由于共享父文化而处于活动状态时使用 pt-BR 程序集，但事实并非如此。

.NET 能否以某种方式自动使用 pt-PT 文化下的 pt-BR 程序集，还是我需要明确地将我的 pt-BR 翻译放在**pt**程序集中，直到获得更多 pt 翻译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:26:28.030

是的 .NET 支持资源的自动回退：http: [//en.csharp-online.net/Localization_Like_the_Pros%E2%80%94Automatic_Fallback_for_Resources](http://en.csharp-online.net/Localization_Like_the_Pros%E2%80%94Automatic_Fallback_for_Resources)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:27:15.113

通常，特定本地化的路径是 AppBase/pt-Br/xx.dll，但如果找不到特定的文件，您也可以将文件放在它看起来的 nutral 文化中。在这种情况下 appBase/pt/xxx.dll

# java - Embedded Jetty - 以编程方式添加基于表单的身份验证

> ID：13769589
> 
> 赞同：6
> 
> 时间：2012-12-07T19:16:21.390
> 
> 标签：java, ldap, jetty, forms-authentication

有没有办法按照下面的方式以编程方式添加基于表单的身份验证？我正在使用我自己的`LdapLoginModule`. 最初我使用基本身份验证，它工作正常，但现在我想要在登录页面上进行更多控制（如显示徽标等）

有没有好的样品？

我正在使用嵌入式码头 v8.1.7 。我不为嵌入式码头使用任何 web.xml。码头服务器以编程方式启动。

```
<login-config>
    <auth-method>FORM</auth-method>
    <realm-name>Test JAAS Realm</realm-name>
    <form-login-config>
        <form-login-page>/login.html</form-login-page>
        <form-error-page>/error.jsp</form-error-page>
    </form-login-config>
</login-config> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T07:27:38.563

创建一个`FormAuthenticator`并将其设置在您`SecurityHandler`的`ServletContextHandler`. 这段代码创建了一个带有 2 个 servlet 的普通服务器。第一个 servlet 以 hello 消息响应已验证的用户名。第二个 servlet 实现了一个简单的登录表单。

您应该能够将代码粘贴到 a 中`main[]`并运行（您的类路径中需要以下 jars;`jetty-server`和`jetty-servlet`）`jetty-security`。要进行测试，请将浏览器指向`http://localhost:8080`，在看到 的响应之前，应提示您输入凭据（用户名/密码）`hello username`。

```
Server server = new Server(8080);
ServletContextHandler context = new ServletContextHandler(server, "/", ServletContextHandler.SESSIONS | ServletContextHandler.SECURITY);

context.addServlet(new ServletHolder(new DefaultServlet() {
  @Override
  protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    response.getWriter().append("hello " + request.getUserPrincipal().getName());
  }
}), "/*");

context.addServlet(new ServletHolder(new DefaultServlet() {
  @Override
  protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    response.getWriter().append("<html><form method='POST' action='/j_security_check'>"
      + "<input type='text' name='j_username'/>"
      + "<input type='password' name='j_password'/>"
      + "<input type='submit' value='Login'/></form></html>");
    }
}), "/login");

Constraint constraint = new Constraint();
constraint.setName(Constraint.__FORM_AUTH);
constraint.setRoles(new String[]{"user","admin","moderator"});
constraint.setAuthenticate(true);

ConstraintMapping constraintMapping = new ConstraintMapping();
constraintMapping.setConstraint(constraint);
constraintMapping.setPathSpec("/*");

ConstraintSecurityHandler securityHandler = new ConstraintSecurityHandler();
securityHandler.addConstraintMapping(constraintMapping);
HashLoginService loginService = new HashLoginService();
loginService.putUser("username", new Password("password"), new String[] {"user"});
securityHandler.setLoginService(loginService);

FormAuthenticator authenticator = new FormAuthenticator("/login", "/login", false);
securityHandler.setAuthenticator(authenticator);

context.setSecurityHandler(securityHandler);

server.start();
server.join(); 
```

# java - 倒数或倒数，哪个更快？

> ID：13769594
> 
> 赞同：-4
> 
> 时间：2012-12-07T19:16:45.340
> 
> 标签：java, performance, loops

> **可能重复：**
> [这些代码中哪一段在 Java 中更快？](https://stackoverflow.com/questions/1656506/which-of-these-pieces-of-code-is-faster-in-java)

如果我写一个循环为

```
for (int i=n; i>=0; i--) 
```

而另一个作为

```
for (int i=0; i<=n; i++) 
```

在java中哪个会更快，为什么？..说**n = 10000**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T19:32:57.953

永远不要怀疑；用谷歌卡尺找出来。由于围绕零与上限以及递增与递减测试的相对权重进行了相当多的讨论，以下是所有这些情况的笛卡尔积：

```
import java.util.Random;

import com.google.caliper.Runner;
import com.google.caliper.SimpleBenchmark;

public class Performance extends SimpleBenchmark {
  static final Random rnd = new Random();

  public int timeDecrementToZero(int reps) {
    int sum = rnd.nextInt();
    for (int i = 0; i < reps; i++) {
      for (int j = Integer.MAX_VALUE; j >= 0; j--) sum += j;
    }
    return sum;
  }
  public int timeDecrementFromZero(int reps) {
    int sum = rnd.nextInt();
    for (int i = 0; i < reps; i++) {
      for (int j = 0; j > Integer.MIN_VALUE; j--) sum += j;
    }
    return sum;
  }
  public int timeIncrementFromZero(int reps) {
    int sum = rnd.nextInt();
    for (int i = 0; i < reps; i++) {
      for (int j = 0; j < Integer.MAX_VALUE; j++) sum += j;
    }
    return sum;
  }
  public int timeIncrementToZero(int reps) {
    int sum = rnd.nextInt();
    for (int i = 0; i < reps; i++) {
      for (int j = Integer.MIN_VALUE; j < 0; j++) sum += j;
    }
    return sum;
  }

  public static void main(String... args) {
    Runner.main(Performance.class, args);
  }
} 
```

结果：

```
 0% Scenario{vm=java, trial=0, benchmark=DecrementToZero} 984060500.00 ns; σ=30872487.22 ns @ 10 trials
25% Scenario{vm=java, trial=0, benchmark=DecrementFromZero} 982646000.00 ns; σ=35524893.00 ns @ 10 trials
50% Scenario{vm=java, trial=0, benchmark=IncrementFromZero} 1023745500.00 ns; σ=24828496.82 ns @ 10 trials
75% Scenario{vm=java, trial=0, benchmark=IncrementToZero} 1081112500.00 ns; σ=20160821.13 ns @ 10 trials

        benchmark   ms linear runtime
  DecrementToZero  984 ===========================
DecrementFromZero  983 ===========================
IncrementFromZero 1024 ============================
  IncrementToZero 1081 ============================== 
```

显然，限制是否为零比使用 inc 与 dec 的影响要小。

## 让我们稍微改变一下...

为了指出这些差异有多么微妙，这里几乎是相同的代码，但现在它使用`long`s （我包括第一个示例中的一个方法，以保持规模）：

```
 public int timeDecrementFromZeroInt(int reps) {
    int sum = rnd.nextInt();
    for (int i = 0; i < reps; i++) {
      for (int j = 0; j > Integer.MIN_VALUE; j--) sum += j;
    }
    return sum;
  }
  public long timeDecrementFromZero(int reps) {
    long sum = rnd.nextLong();
    for (long i = 0; i < reps; i++) {
      for (long j = 0; j > Integer.MIN_VALUE; j--) sum += j;
    }
    return sum;
  }
  public long timeIncrementFromZero(int reps) {
    long sum = rnd.nextLong();
    for (long i = 0; i < reps; i++) {
      for (long j = 0; j < Integer.MAX_VALUE; j++) sum += j;
    }
    return sum;
  }
  public long timeDecrementToZero(int reps) {
    long sum = rnd.nextLong();
    for (long i = 0; i < reps; i++) {
      for (long j = Integer.MAX_VALUE; j >= 0; j--) sum += j;
    }
    return sum;
  }
  public long timeIncrementToZero(int reps) {
    long sum = rnd.nextLong();
    for (long i = 0; i < reps; i++) {
      for (long j = Integer.MIN_VALUE; j < 0; j++) sum += j;
    }
    return sum;
  } 
```

结果：

```
 0% Scenario{vm=java, trial=0, benchmark=DecrementFromZeroInt} 978513000.00 ns; σ=14861284.82 ns @ 10 trials
20% Scenario{vm=java, trial=0, benchmark=DecrementFromZero} 2160652000.00 ns; σ=13825686.87 ns @ 3 trials
40% Scenario{vm=java, trial=0, benchmark=IncrementFromZero} 2153370000.00 ns; σ=6318160.49 ns @ 3 trials
60% Scenario{vm=java, trial=0, benchmark=DecrementToZero} 4379893000.00 ns; σ=8739917.79 ns @ 3 trials
80% Scenario{vm=java, trial=0, benchmark=IncrementToZero} 4383569000.00 ns; σ=5798095.89 ns @ 3 trials

           benchmark   ms linear runtime
DecrementFromZeroInt  979 ======
   DecrementFromZero 2161 ==============
   IncrementFromZero 2153 ==============
     DecrementToZero 4380 =============================
     IncrementToZero 4384 ============================== 
```

主要结论：永远不要在如此低的水平上对性能做出任何假设。编写完整的代码并对其进行整体测试，因为总会有一些你没有考虑到的东西，这完全扭转了局面。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T19:29:23.880

CPU 可能有一种更快的方法来比较一个数字 (i) 和 0，而不是比较另一个任意数字 (n)。从理论上讲，这将使递减版本更快。

恕我直言，这纯粹是学术性的。它们基本上都是“相同的”，所以你应该实现一个对你之后维护你的代码的人来说更合乎逻辑和更容易理解的那个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T19:28:34.397

只需按照最有意义的方式编写循环即可。您不太可能 (a) 做任何对时间至关重要的事情，以至于在整个程序持续时间内多花几纳秒就会产生影响，并且 (b) 您的代码经过优化*，*瓶颈是一个中的增量或减量操作环形。

如果在您测试之后，分析显示特定循环是一个问题，那么请担心优化该循环，关注循环体而不是诸如增量和减量之类的事情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-07T19:56:51.410

答案是这取决于是什么`n`。倒计时时，代码只需访问`n`一次。数数时，这可能不是真的。因此，例如，如果`n`是一个`volatile`字段，或者如果循环体中的某些内容可能会改变 的值`n`，则每次循环时都需要查找该值。这将显着减慢循环速度。

使用此代码，向上计数比向下计数慢数百倍：

```
public class Counts {
    private static final int ITERS = 100000;
    volatile int n = 1000;

    public long countUp() {
        long start = System.nanoTime();
        for (int iter = 0; iter < ITERS; ++iter) {
            for (int i = 0; i < n; ++i) {
                // do nothing
            }
        }
        return System.nanoTime() - start;
    }

    public long countDown() {
        long start = System.nanoTime();
        for (int iter = 0; iter < ITERS; ++iter) {
            for (int i = n - 1; i >= 0; --i) {
                // do nothing
            }
        }
        return System.nanoTime() - start;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T19:38:36.233

如果有任何可测量的差异，则与 0 比较的 Variant 更快，因为在 CPU 级别上，与 0 的比较更快。但是在大多数情况下，您最好使用可读性好的代码

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-07T19:40:34.733

在大多数情况下，与其他人了解正在发生的事情所需的时间相比，时间上的差异是微不足道的。只需使用最容易遵循的方法。如果你想测试它，你可以运行这样的东西：

```
long startTime = System.nanoTime();  
long duration, endTime;  

for (int i=0;i<1000 ;i++ ) {  
        //function
   }  

endTime = System.nanoTime();  
duration = endTime - startTime;  

System.out.printf("The duration was %d.%03d microseconds%n", duration / 1000, duration % 1000); 
```

对于增量和减量。

更大的问题是前后递增/递减。从第 2 页底部开始有一个很好的解释：[http ://www.iar.com/Global/Resources/Developers_Toolbox/C_Cplusplus_Programming/Writing%20optimizer-friendly%20code.pdf](http://www.iar.com/Global/Resources/Developers_Toolbox/C_Cplusplus_Programming/Writing%20optimizer-friendly%20code.pdf)

# php - NetBeans (for PHP) 7.x 中是否有任何方法可以在远程服务器上工作而无需下载文件？

> ID：13769595
> 
> 赞同：0
> 
> 时间：2012-12-07T19:16:47.520
> 
> 标签：php, netbeans, remote-access

在使用 NetBeans 之前，我使用过 AptanaStudio，它正在从服务器“读取”文件，并且没有下载所有文件以便能够显示文件夹/文件结构。然后只有在打开时，才会下载文件并在保存时更新到服务器。

NetBeans，据我所见，必须在本地加载所有文件，然后再进行 sincronize/更新服务器。

如果我安装一个框架（例如电子商务），我必须下载数千个文件。

请告诉我如何避免（如果可能）这个阶段（全部下载）并使用“Aptana Style”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T00:05:48.990

您可以使用 ctrl + u 将文件上传到服务器（如果我的记忆好的话）。所以链接 ctlr + s 和 ctrl + u 会用更多的按钮做同样的事情。

而且我认为您甚至可以在一个键绑定中绑定这两个操作，但不确定。

# mongodb - 如果 mongodb 集合没有值，则附加键值？

> ID：13769596
> 
> 赞同：0
> 
> 时间：2012-12-07T19:16:59.030
> 
> 标签：mongodb, python-2.7, pymongo

我有一个带有一堆集合的数据库。

其中一些具有“状态”，而另一些则没有。

如何将 'status':'pending' 插入缺少 'status' 的集合中 - 但不覆盖已经具有状态的集合？

使用 pymongo/flask/python 2.7

我试过这个：

```
orders = monDB.find('order')

for order in orders:
    if not order['status']:
        monDB.update('order', {'status':'pending'})
        print 'success' 
```

但什么也没有发生。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:26:27.280

使用 $exists 检查字段是否存在，如果不存在则使用 $set 创建它。假设 monDB 是您的集合：

```
monDB.update({'status': {'$exists' : False}}, {'$set' : {'status': 'pending'}}, multi=True) 
```

在 mongo 外壳中：

```
> db.myQueue.update({status: {$exists: false}}, {$set : {status: 'pending'}}, false, true) 
```

请参阅[http://docs.mongodb.org/manual/reference/operators/](http://docs.mongodb.org/manual/reference/operators/)和[http://docs.mongodb.org/manual/applications/update/#crud-update-update](http://docs.mongodb.org/manual/applications/update/#crud-update-update)。

# mysql - 除了 my.cnf，还有什么地方可以访问变量 innodb_buffer_pool_size？

> ID：13769598
> 
> 赞同：15
> 
> 时间：2012-12-07T19:17:04.663
> 
> 标签：mysql, innodb

我已经安装了 MAMP 并在我的 Mac 上安装了最新的 phpMyAdmin。我没有也`my.cnf`没有`my.ini`文件。是的，我已启用所有不可见文件。

我听说 MAMP 的免费版本不允许您使用，但这似乎不对。我知道 MAMPPro 有一个下拉菜单，但我不买那个。

文件还能叫什么？

编辑：我使用 grep 在整个 MAMP 文件夹中搜索 innodb_buffer_pool_size ，并且唯一包含该变量的文件为其分配了一个数组，而不仅仅是一个简单的大小。只是为了在这个问题上更完整。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-07T22:47:04.773

您可以执行以下操作：

MySQL 5.0+

```
SHOW VARIABLES LIKE 'innodb_buffer_pool_size'; 
```

MySQL 5.1+

```
SELECT variable_value FROM information_schema.global_variables
WHERE variable_name = 'innodb_buffer_pool_size'; 
```

为了为 MySQL 设置它，您必须有一个物理清单`my.cnf`或`my.ini`

将此添加到配置文件中

```
[mysqld]
innodb_buffer_pool_size = 1G 
```

并重新启动mysql

您可以尝试放置`my.cnf`并`/etc`重新启动mysql

请记住，[**128M 是 MySQL 5.5 中 innodb_buffer_pool_size 的默认值**](http://dev.mysql.com/doc/refman/5.5/en/innodb-parameters.html#sysvar_innodb_buffer_pool_size)。一旦你将 my.cnf 放在 DB Server 的正确位置并重新启动 mysql，情况就会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:57:23.607

如果您有来自 MAMP 的 MySQL 配置文件，那么它将位于 /Applications/MAMP/db/mysql/my.cnf 中。

如果没有配置文件则默认值为8MB。

# pandas - rolling_mean 的行为

> ID：13769600
> 
> 赞同：1
> 
> 时间：2012-12-07T19:17:18.293
> 
> 标签：pandas

当使用 pandas[`stats.moments.rolling_mean(array,window)`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.stats.moments.rolling_mean.html)函数时，我注意到添加一个额外的参数会改变输出，并且只`nans`在开头而不是结尾填充。

```
In[1]: import pandas as pd

In[2]: pd.stats.moments.rolling_mean(np.arange(12),6)
Out[2]: 
array([ nan,  nan,  nan,  nan,  nan,  2.5,  3.5,  4.5,  5.5,  6.5,  7.5,
        8.5]) 
```

我预计会有 6`nan`秒：开头 3 秒，结尾 3 秒。
我在这里想念什么？

/米

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T21:06:42.593

pandas 实现使用前*n 个*值的滚动窗口，这在金融领域通常是这样做的（请参阅此[Wikipedia 条目以获得简单的移动平均](http://en.wikipedia.org/wiki/Moving_average#simple_moving_average)线）。

我想如果可以选择指定值是应该从任一侧获取还是只使用以前的值会很好 - 你可以在[GitHub 上](https://github.com/pydata/pandas)提出问题。

`len(np.arange(12))`和`len(pd.stats.moments.rolling_mean(np.arange(12),6))`我预期的一样，两者都等于 12 - 你期待什么结果？

# mongodb - 我可以修改 MongoDB 中的现有索引而不删除它吗？

> ID：13769603
> 
> 赞同：14
> 
> 时间：2012-12-07T19:17:33.383
> 
> 标签：mongodb, indexing, mongodb-indexes

我可以修改 MongoDB 中的现有索引而不删除它吗？我在文档中没有看到任何关于它的内容。

我在 String 字段上有一个非唯一索引。集合是 ~6M 文件。是副本集。

我知道我可以删除索引并添加新索引。但由于两个原因，它是有问题的：

1）有时，当索引不存在时，一些查询会非常非常慢。2）添加新索引（在我的项目中）会在数据库上产生非常高的负载，这明显减慢了我的网站。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-07T19:38:48.863

没有办法像您描述的那样更改索引，如果有的话，我认为在性能方面的结果会是相似的 - 例如，在此操作进行时，数据库将如何使用一半创建/更改的索引？

相反，我建议使用[后台选项](http://docs.mongodb.org/manual/core/indexes/#background-construction)在单个节点上构建索引，如果这是您的配置 - 这将花费更长的时间，但不会过多地干扰您的正常操作。完成后，您可以在闲暇时删除旧索引。

*但是*，如果您有副本集（推荐），您应该知道索引创建始终（当前）在辅助节点的前台完成。如果您想避免对辅助节点造成负载，则应按照此处概述的步骤一次取出一个成员并在重新加入集合之前构建所需的索引：

[http://docs.mongodb.org/manual/administration/indexes/#index-building-replica-sets](http://docs.mongodb.org/manual/administration/indexes/#index-building-replica-sets)

***更新***

从 2.6 版本开始，可以在辅助节点上构建后台索引（有关详细信息，请参阅[发行说明](http://docs.mongodb.org/master/release-notes/2.6/#background-index-builds-replicate-to-secondaries)）。这不会被向后移植到以前的版本，因此上述说明对于 2.6 之前的版本是正确的。

最后，作为一般说明，在后台构建的索引通常比在前台构建的索引更大且效率更低，因此上述方法仍然有其用途。

# shell - 在 RCS 中添加注释

> ID：13769605
> 
> 赞同：0
> 
> 时间：2012-12-07T19:17:39.940
> 
> 标签：shell, rcs

有没有办法在 RCS 中更新文件时自动添加评论？例如，我正在编写一个脚本，其中一个函数将 co -la 文件，进行更改，然后 ci -u。现在，RCS 等待输入评论。我希望自动添加评论，这样脚本就不会停止。这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:23:28.943

接受消息字符串的`-m`选项。`ci`后面不允许有空格`-m`：

```
ci -u -m'This is a message' file 
```

# php - 使用 preg_match 在目录中查找文件？

> ID：13769606
> 
> 赞同：0
> 
> 时间：2012-12-07T19:17:42.383
> 
> 标签：php, directory, while-loop, preg-match, opendir

我需要在符合特定条件的目录中找到一个文件。例如，我知道文件名以“123-”开头，以 .txt 结尾，但我不知道两者之间是什么。

我已经开始编写代码来获取目录和 preg_match 中的文件，但被卡住了。如何更新以找到我需要的文件？

```
$id = 123;

// create a handler for the directory
$handler = opendir(DOCUMENTS_DIRECTORY);

// open directory and walk through the filenames
while ($file = readdir($handler)) {

  // if file isn't this directory or its parent, add it to the results
  if ($file !== "." && $file !== "..") {
    preg_match("/^".preg_quote($id, '/')."\\-(.+)\\.txt$/" , $file, $name);

    // $name = the file I want
  }

}

// tidy up: close the handler
closedir($handler); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T19:43:36.543

我在这里为你写了一个小脚本，科菲。试试这个尺寸。

我为自己的测试更改了目录，因此请务必将其设置回您的常量。

**目录内容：**

*   123-香蕉.txt
*   123-额外的香蕉.tpl.php
*   123-wow_this_is_cool.txt
*   无香蕉.yml

**代码：**

```
<pre>
<?php
$id = 123;
$handler = opendir(__DIR__ . '\test');
while ($file = readdir($handler))
{
    if ($file !== "." && $file !== "..")
    {
      preg_match("/^({$id}-.*.txt)/i" , $file, $name);
      echo isset($name[0]) ? $name[0] . "\n\n" : '';
    }
}
closedir($handler);
?>
</pre> 
```

**结果：**

```
123-banana.txt

123-wow_this_is_cool.txt 
```

`preg_match`将其结果保存`$name`为数组，因此我们需要通过它的键 0 进行访问。我在第一次检查以确保我们与`isset()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T19:26:37.720

您必须测试匹配是否成功。

您在循环中的代码应该是这样的：

```
if ($file !== "." && $file !== "..") {
    if (preg_match("/^".preg_quote($id, '/')."\\-(.+)\\.txt$/" , $file, $name)) {
        // $name[0] is the file name you want.
        echo $name[0];
    }
} 
```

# c# - WPF 使用 MVVM 禁用列表框项目

> ID：13769607
> 
> 赞同：6
> 
> 时间：2012-12-07T19:17:51.710
> 
> 标签：c#, wpf, mvvm, listbox, datatrigger

我尝试搜索了很多线程，我发现有几个非常接近但不完全是我想要的。经过一天的搜索，我决定问一下。抱歉，如果我错过了什么，我觉得这很常见，但我似乎不太明白。

我有一个绑定到 ViewModel 的 UserControl，它有一个 Listbox，其中 ItemsSource=ObservableCollection 是 ViewModel 的一个属性，如下所示：

每当我选择一个项目时，我都会根据某些条件在其他几个项目上调用 SomeObject.IsEnabled = false 。我想将列表框项绑定到该 IsEnabled 属性，这样每当我进行选择时，我就可以将任何项目变灰。

视图模型：

```
Class ViewModel : PropertyNotificationObject
{
    private ObservableCollection<SomeObject> m_list;
    public ObservableCollection<SomeObject> List {get; set;} //notifying properly

    private void selectedItem()
    {
        //several in SomeObjects in List sets IsEnabled = false
    }
} 
```

对象类

```
class SomeObject : PropertyNotificationObject
{
   private bool m_isEnabled;
   public IsEnabled { get; set; } //notifying properly
} 
```

XAML

```
 <DataTemplate x:Key="ListTemplate">
    <Grid>
       <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*"/>
       </Grid.ColumnDefinitions>
       <TextBlock Text="{Binding ., Converter={someConverterObjectToString}}"/>
    </Grid>
 </DataTemplate>
 <ListBox ItemsSource="{Binding List}" ItemTemplate="{StaticResource ListTemplate}"/> 
```

我尝试在 ListBox.ItemContainerStyle 和 DataTemplate 中使用 StyleTriggers，如下所示，但我不知道如何访问 SomeOject.IsEnabled 属性。

```
<ListBox.ItemContainerStyle>
    <Style TargetType="{x:Type ListBoxItem}">
        <Style.Triggers>
            <DataTrigger Binding={???????? I can't get to my SomeObject properties.}
        </Style.Triggers>
    </Style>
</ListBox.ItemContainerStyle> 
```

抱歉，缺少颜色，我是新来的，不太了解如何很好地使用编辑器。

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-07T19:21:55.557

`{Binding IsEnabled}`在你`ItemContainerStyle`应该做的工作。查看 VS 调试窗口中的绑定错误

**编辑**或直接绑定 ListBoxItem 的 IsEnabled 属性：

```
<Style TargetType="{x:Type ListBoxItem}">
    <Setter Property="IsEnabled" Value="{Binding IsEnabled}"/>
</Style> 
```

# git - 使用错误的推送 URL 错误地将一个仓库推送到另一个仓库；如何在不合并的情况下删除推送的分支/回购？

> ID：13769608
> 
> 赞同：-1
> 
> 时间：2012-12-07T19:17:54.113
> 
> 标签：git, github, git-bash, git-remote

问题：有没有办法删除远程分支而不合并它们？

背景：我们让第三方为我们做一些工作，他们使用 GitHub，我们也这样做

所以我从那里拉出回购并推到我们的。不幸的是，我推错了仓库。所以现在我们有一个项目，其中包含另一个项目。

我们真的不想合并所有更改并删除它们并保留历史记录。我只想删除这个分支（推）。

我已经尝试过 -git push origin --delete branchName （当然，这只有在合并时才有效。）

看起来删除非合并分支的唯一方法是使用 -D -git branch -D branchname （但这仅适用于本地仓库）

有没有办法删除分支而不将它们合并到远程存储库或任何其他方式来清理这个混乱？（一个回购推送到另一个没有合并）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:19:33.717

```
git push origin :branchName 
```

总是为我工作。

# xml - 编辑和保存 XML

> ID：13769612
> 
> 赞同：1
> 
> 时间：2012-12-07T19:18:09.933
> 
> 标签：xml, cocoa

抱歉这个基本问题 - 我需要一些帮助。我能够获取 XML 文档并保存它。无法让编辑工作。我想使用 textField 的内容更新“主题”标签，并在保存之前设置一个操作。我的编辑代码显然不起作用。

谢谢您的帮助。

-保罗。

```
 <temp>
<theme>note</theme>
 </temp>

 ///////

 NSMutableArray* temps = [[NSMutableArray alloc] initWithCapacity:10];
 NSXMLDocument *xmlDoc;
 NSError *err=nil;

 NSString *file = [input1 stringValue];

 NSURL *furl = [NSURL fileURLWithPath:file];
if (!furl) {
   NSLog(@"Unable to create URL %@.", file);
   return;
}
xmlDoc = [[NSXMLDocument alloc] initWithContentsOfURL:furl options:     (NSXMLNodePreserveWhitespace|NSXMLNodePreserveCDATA) error:&err];
 if (xmlDoc == nil) {
  xmlDoc = [[NSXMLDocument alloc] initWithContentsOfURL:furl options:NSXMLDocumentTidyXML  error:&err];
}

 NSXMLElement* root  = [xmlDoc rootElement];
 NSArray* objectElements = [root nodesForXPath:@"//temp" error:nil];
for(NSXMLElement* xmlElement in objectElements)
[temps addObject:[xmlElement stringValue]];

 NSXMLElement *themeElement = [NSXMLNode elementWithName:@"theme"];
[root addChild:themeElement];
 NSString * theTheme = [textField stringValue];
[themeElement setStringValue:theTheme]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T00:45:07.213

下面介绍如何更改文件中的主题元素。基本上，当您在元素上设置字符串值时，根元素会使用新值更新，因此 xmlDoc 也会更新，因为它链接到根元素。因此，您可以将其写入文件。例如，这是我开始使用的 xml 文档...

```
<root>
    <temp>
        <theme>first theme</theme>
        <title>first title</title>
    </temp>
    <temp>
        <theme>second theme</theme>
        <title>second title</title>
    </temp>
</root> 
```

在这段代码中，我将“第一个主题”值更改为“更改主题”。另请注意，我的“nodesForXPath”代码直接获取主题元素。

```
// the xml file
NSString* file = [NSHomeDirectory() stringByAppendingPathComponent:@"Desktop/a.xml"];
NSURL *furl = [NSURL fileURLWithPath:file];

// get the xml document
NSError* err = nil;
NSXMLDocument* xmlDoc = [[NSXMLDocument alloc] initWithContentsOfURL:furl options:(NSXMLNodePreserveWhitespace | NSXMLNodePreserveCDATA) error:&err];
if (err) {
    NSLog(@"There was an error reading the xml document.");
    return 0;
}
NSXMLElement* root  = [xmlDoc rootElement];

// look for the <theme> tags
NSArray* themeElements = [root nodesForXPath:@"//theme" error:nil];

// change a specific theme tag value
for(NSXMLElement* themeElement in themeElements) {
    if ([[themeElement stringValue] isEqualToString:@"first theme"]) {
        [themeElement setStringValue:@"changed theme"];
    }
}

// write xmlDoc to file
NSData* xmlData = [xmlDoc XMLDataWithOptions:NSXMLNodePrettyPrint];
if (![xmlData writeToURL:furl atomically:YES]) {
    NSLog(@"Could not write document out...");
}

[xmlDoc release]; 
```

# asp.net - 为什么我在调试我的 Web 应用程序时收到“服务器提交了违反协议的 Section-ResponseStatusLine”？

> ID：13769613
> 
> 赞同：15
> 
> 时间：2012-12-07T19:18:14.233
> 
> 标签：asp.net, iis-7, .net-4.0

我有一个 .NET 1.1 解决方案，其中所有项目都已升级到 .NET 4.0（VS2010，Windows 7）。为了解决“无法在 Web 服务器上开始调试”的问题，我将 Web 应用程序属性切换为使用 VS Development Server 而不是 IIS。

调试 Web 应用程序时，它启动正常。但是，当我在我的机器上调用本地 Web 服务时遇到上述错误。我已经看到有关添加 useUnsafeHeaderParsing=false 的内容，但我的 web.config 没有 sytem.net 部分。

它不能在应用程序开发服务器上同时提供 Web 服务和 Web 应用程序吗？我是否需要正确配置它才能使用 IIS7？作为一个长期使用 IIS6 的用户，光是看着它就让我头晕目眩……不过，我确实在其中设置了站点和 Web 服务，而且我相当肯定它一次可以工作。一定会喜欢的。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-06-19T13:37:47.727

这对我有用：下面的文字来自[这个 CodePlex 帖子](http://www.codeproject.com/Questions/549157/unableplustoplusstartplusdebuggingplusonplustheplu)

> 当您将 Visual Studio 设置为调试在 IIS 中运行的现有 Web 应用程序而不是内置的 ASP.NET 调试 Web 服务器时，通常会发生此错误。默认情况下，IIS 侦听端口 80 上的 Web 请求。在这种情况下，另一个应用程序已经在侦听端口 80 上的请求。通常，有问题的应用程序是 Skype，它在安装时默认接管端口 80 和 443 上的侦听。Skype 已经占用了 80 端口，所以 IIS 无法启动。
> 
> 要解决此问题，请执行以下步骤：
> - Skype -> 工具 -> 选项 -> 高级 -> 连接：
> - 取消选中*“使用端口 80 和 443 作为传入连接的替代选项”*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-16T06:54:51.447

由于 Skype 已采取默认设置`Port 80 or 443`，默认网站已停止。要解决此问题，`[Start]`请从 IIS 关闭 Skype、默认网站（如果需要，请重新启动 Skype。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-19T06:15:08.543

您也可以尝试重置 IIS

# jquery - rails 通过 url 选择当前菜单标题

> ID：13769615
> 
> 赞同：1
> 
> 时间：2012-12-07T19:18:21.413
> 
> 标签：jquery, ruby-on-rails-3

我想通过当前 url 突出显示相关的菜单项。

这是html

```
 <ul class="nav">
          <li>
            <a href="/ratings">Rate</a>
          </li>
          <li class="">
            <a href="/ratings/list">All Pics</a>
          </li>
          <li>
            <a href="/ratings/new">Upload Your Own</a>
          </li>
        </ul> 
```

和简单的jQuery：

```
$(function () {
    var active = 'active',
        $lastMatch,
        s = window.location.pathname;

    $('.nav a').each(function (index, item) {
        if (s.indexOf($(this).attr("href")) !== -1) {
            $lastMatch = $(this).closest('li');
        }
    });

    if ($lastMatch.length){
        $lastMatch.addClass(active);
    }
}); 
```

作品。 **但是**，如果我导航到不同的 url `0.0.0.0:3000/ratings/list/1`，则会``0.0.0.0:3000/ratings/list`发生一个奇怪的错误并且它确实保持“活动”。

我尝试使用 fire bug 进行调试，我看到 li 获得了`active`课程，但它被其他东西取消了，我不知道它是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:21:51.447

尝试更改以下行：

```
if (s.indexOf($(this).attr("href")) !== -1) { 
```

对于这个：

```
if (s.indexOf($(this).attr("href"), s.length - $(this).attr("href").length) !== -1) { 
```

因此，要比较两个字符串是否在字符串**末尾**匹配，而不是像您所做的那样在任何部分匹配。这样你就可以避免你遇到的角落案例。

# ios - 移动 Safari 中的 mp4 无法播放，但 UIWebView 中加载的同一网页可以播放

> ID：13769619
> 
> 赞同：1
> 
> 时间：2012-12-07T19:18:49.507
> 
> 标签：ios, html5-video

我正在使用`video`标签：

```
<video width="300" height="168" poster="poster.jpg" webkit-playsinline="true">
    <source src="http://mydomain/ad.mp4" type="video/mp4">
</video> 
```

我会尝试在移动版 Safari 中加载页面，但播放按钮被划掉了（用一条线穿过它的圆圈：http: [//i.imgur.com/FGf5D.png](http://i.imgur.com/FGf5D.png)）。当我在 UIWebView 中加载页面时，播放按钮被启用，我可以播放视频——没问题。

有谁知道可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:50:25.243

并非所有音频/视频编解码器或比特率都受支持，具体取决于您的设备。测试给定文件是否与设备兼容的最简单方法是将文件直接放在 Web 服务器上，然后直接从移动 Safari 访问它，无需 html。一旦您直接导航到媒体，它应该会自动播放。

# ruby - Ruby 中的猴子修补和重载方法

> ID：13769620
> 
> 赞同：2
> 
> 时间：2012-12-07T19:19:01.443
> 
> 标签：ruby, metaprogramming, overloading

我想扩展 Proc 类，以便它的构造函数也可以采用参数散列，并将其转换为具有某些元编程构造的方法。大意是：

```
p = Proc.new(this: 100, that: 200, yes: 1, no: 2) { |arg| arg.even? }
p.call(1) # => false
p.this # => 100
p.yes # => 1 
```

我想知道做这样的事情的红宝石方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T19:26:48.203

```
class Proc
  def initialize h; @h = h end
  def method_missing k; @h[k] end
  def respond_to_missing?; true end
end

p = Proc.new(this: 100, that: 200, yes: 1, no: 2) { |arg| arg.even? }
p.call(1) # => false
p.this # => 100
p.yes # => 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T20:26:20.990

您可以（并且在这种情况下可能应该）通过实现和来让您自己的类*表现*得像 Proc 来完全避免猴子修补。例如，您可以从：`to_proc``call``OpenStruct`

```
require 'ostruct'
class MyFunkyClass < OpenStruct
  def initialize(h, &block)
    @block = block
    super
  end

  def to_proc
    @block
  end

  def call(*args)
    @block.call(*args)
  end
end

f = MyFunkyClass.new(this: 100, that: 200, yes: 1, no: 2) { |arg| arg.even? }
f.that # => 200
f.call(42) # => true
[1,2,3,4].select(&f) # => [2, 4] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T19:35:08.377

没有元编程：

```
require 'ostruct'

r = OpenStruct.new(this: 100, that: 200, yes: 1, no: 2)
def r.call(n)
  n.even?
end

p r.this # 100
p r.call(1) # false 
```

编辑：@Marc-André Lafortune 对 Openstruct 有同样的想法；他的实现要好得多。

# python - Perl 到 Python：散列到嵌套字典和 cx_Oracle

> ID：13769622
> 
> 赞同：0
> 
> 时间：2012-12-07T19:19:08.787
> 
> 标签：python, perl, dictionary, cx-oracle

在将数据从 Oracle 数据库读取到数组后，我需要将 perl 哈希转换为嵌套的键控 Python 字典。最有效的方法是什么？现有的 Perl 代码（我根本不懂 Perl）看起来像这样：

```
# read the data and place into a species hash (sphash) and a data hash (tmphash)
my (@lnarr, %sphash, %tmphash, $tmpln, $tmpsel, $x, $datetime) ;
while (@lnarr = $csr->fetchrow_array) {
  $datetime = $lnarr[4].'-'.$lnarr[5] ;
  $tmpln = join '_', $lnarr[8], $lnarr[9] ;
  $sphash{$lnarr[7]} = 'x';
  $tmphash{$lnarr[0].'_'.$lnarr[1].'_'.$lnarr[2].'_'.$lnarr[3].'_'.$datetime.'_'.$lnarr[6]}{$lnarr[7]} .= $tmpln ;
} #while line 
```

我不确定创建嵌套字典的最有效途径是什么......任何指导都会很棒。

我的初始代码看起来像这样，但我知道它可能是非常错误的（我也只是在学习 python）：前几行是根据这篇文章将 Oracle 输出中的元组读取到字典中：[here](https://stackoverflow.com/questions/4468071/how-can-i-make-cx-oracle-bind-the-results-of-a-query-to-a-dictionary-rather-than "这个帖子")

```
#this is creating the dictionary from the data
cursor.execute(query, cruise6_input=cruise6_input)
desc=[d[0] for d in cursor.description]   
result=[dict(zip(desc,line)) for line in cursor]

station=[r['STATION'] for r in result]
time=[r['GMT_TIME']for r in result]
svspp=[r['SVSPP'] for r in result]
expcatchwt=[r['EXPCATCHWT'] for r in result]
beglat=[r['BEGLAT'] for r in result]
expcatchnum=[r['EXPCATCHNUM'] for r in result]
cruise=[r['CRUISE'] for r in result]
towdate=[r['BEGIN_GMT_TOWDATE'] for r in result]
stratum=[r['STRATUM'] for r in result]
beglon=[r['BEGLON'] for r in result]

tmpln=zip(expcatchwt,expcatchnum)
tmphash=zip(station,time,beglat,cruise,towdate,stratum,beglon)
keys=zip(tmphash,svspp) 
```

如何获得 tmphash[svspp]=tmpln 的输出？如果我打印 tmphash[svspp] 结果只是 {}....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:51:02.727

在 python 字典项访问中使用`dictionary[key]`; 所以你需要更正你的行`sphash`和`tmphash`：

```
sphash[result[7]] = 'x'
tmphash[result[0] + '_' + result[1] + '_' + result[2] + '_' + result[3] + '_' + datetime + '_' +
        result[6]][result[7]] = tmpln 
```

这假设它`tmphash[somekey]`本身已经是一本字典。您可以将其定义为`defaultdict`：

```
from collections import defaultdict

tmphash = defaultdict(dict) 
```

现在每个键在访问时`tmphash`自动成为另一个键。`dict`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:59:55.453

尽我所能纠正你的python代码：

```
# I have no idear what this is suppose to do
# i guess you are trying to mimic the array assignment in
# the while loop...but I think you are doing it wrong, please update your
# poste so we can make sense of it
desc=[d[0] for d in cursor.description]
# makes a list of dicts with the entire desc array as key and one line as value?!?!
result=[dict(zip(desc,line)) for line in cursor]

tmphash = {}
spset=set() # if you want an spset instead of hash
while (True): # this should probably be a for loop with your array
    datetime="%s-%s" % results[4:6]
    tmpln='_'.join(result[8:10])
    # here you probberbly want to add to a set instead of making a hash mapping to something useless
    sphash[result[7]]='x'
    # or
    spset.add(result[7])
    # .= is a string concatination operator in perl
    # += can also concatinate strings in python
    tmphash['_'.join(result[0:4]+[datetime]+result[6:8]] += tmpln 
```

# php - 如何在 Zend Framework 2 中配置依赖注入？

> ID：13769625
> 
> 赞同：2
> 
> 时间：2012-12-07T19:19:17.180
> 
> 标签：php, dependency-injection, twig, zend-framework2

免责声明：我完全是 Zend 的菜鸟。

我正在评估**Zend Framework 2**，并尝试将其配置为与**ZfTwig**一起使用以进行模板化。（见这里：[https](https://github.com/mtymek/ZfTwig) ://github.com/mtymek/ZfTwig ）

我通过`Step 3`配置确定，但我无法弄清楚`Step 4`。

我尝试将以下内容放入`application.config`，但没有好处。

我应该把这个放在哪里？

```
return array(
    'di' => array(
        'instance' => array(
            // setup other stuff...
            // ...

            // setup view script resolvers - very similar to configuration
            // from ZendSkeletonApplication
            'Zend\View\Resolver\AggregateResolver' => array(
                'injections' => array(
                    'Zend\View\Resolver\TemplateMapResolver',
                    'ZfTwig\TemplatePathStack',
                ),
            ),
            'Zend\View\Resolver\TemplateMapResolver' => array(
                'parameters' => array(
                    'map'  => array(
                        'layout/layout' => __DIR__ . '/../view/layout/layout.twig',
                    ),
                ),
            ),
            'ZfTwig\TemplatePathStack' => array(
                'parameters' => array(
                    'paths'  => array(
                        'application' => __DIR__ . '/../view',
                    ),
                ),
            ),
            // Tell TwigRenderer how it should locate .twig files
            'ZfTwig\TwigRenderer' => array(
                'parameters' => array(
                    'resolver' => 'Zend\View\Resolver\AggregateResolver',
                ),
            ),
        ),
    ); 
```

谷歌没有帮助......我在 Zend 的网站或任何地方都找不到任何文档告诉我应该去哪里。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T22:18:10.833

该`di`配置来自 Zend Framework 2 的第一个 beta版本。`Zend\Di`组件仍然可用，但在内部（与许多其他模块一样）由`Zend\ServiceManager`.

基本上，两者都能够提供依赖注入。只有`Zend\Di`它可以自动执行这种操作，并且`Zend\ServiceManager`还有其他选项可以使依赖注入更加明确。

To give an answer to your question: ZfcTwig is now part of ZF-Commons and [https://github.com/ZF-Commons/ZfcTwig](https://github.com/ZF-Commons/ZfcTwig) is the location you have to search for now. Just for your insights, [this file](https://github.com/ZF-Commons/ZfcTwig/blob/master/src/ZfcTwig/Service/ViewTwigRendererFactory.php) is an example of a factory used by the service manager. For more background of service managers in Zend Framework 2, [I have written a blog post](http://juriansluiman.nl/en/article/120/using-zend-framework-service-managers-in-your-application) two months ago which might be interesting.

# c# - C# 将字符串显示到表格中

> ID：13769631
> 
> 赞同：-2
> 
> 时间：2012-12-07T19:19:41.430
> 
> 标签：c#, string

我正在学习 C# 编程，想知道是否可以将 12 个字母长的字符串的值输出到一个有 12 列的表中，每列将有一个标签，将显示字符串的一个字母在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:25:12.043

当然。只需迭代角色并做任何你想做的事情。它会像这样：

```
 // create an instance of your table, whatever it may be.
        // create an instance of a row
        // add row to your table
        var line = "hello world";
        foreach (var letter in line)
        {
            // create an instance of a column
            // add column to your row
            // add label to your column
            // set text property of lable = letter
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:22:53.417

看看 String.Format 方法：http: [//msdn.microsoft.com/en-us/library/system.string.format.aspx](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)

# sql - 在sql中插入带条件的函数

> ID：13769633
> 
> 赞同：-2
> 
> 时间：2012-12-07T19:19:46.120
> 
> 标签：sql, sql-server, tsql

我想将值插入到满足某些条件的地方`table_A`。`table_B`这是我想做但不起作用的事情：

```
insert into table_A(ID, value1, value2)
select ID, value1, value2
from table_B
where table_B.ID <> table_A.ID 
```

我收到此错误：

> *无法绑定多部分标识符“table_A.ID”*

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T19:23:09.980

它不是那样工作的。您没有在插入语句中加入表。采用

```
insert into table_A(ID, value1, value2)
select ID, value1, value2
from table_B
where ID not in (select ID from table_A) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T19:33:09.123

通常，右连接更快

```
insert into table_A (ID, value1, value2)
select b.* 
  from table_b b
       right join table_a a
         on  a.ID = b.ID
 where a.ID is null 
```

由于这是一个常见问题，在 SQL2003 标准中引入了 MERGE 语句。您可以根据特定条件更新现有行、插入新行和删除其他行。

```
merge into table_a a 
  using table_B b 
    on (a.ID=b.ID)
when not matched then
  insert (ID, value1, value2) 
  values (b.ID, b.value1, b.value2) 
```

（未经测试）

# windows - IO 完成后的 Windows 线程切换延迟 - 微秒或毫秒

> ID：13769638
> 
> 赞同：1
> 
> 时间：2012-12-07T19:20:13.233
> 
> 标签：windows, data-processing, thread-state

我正在尝试确定在 IO 操作完成时切换线程的大致时间延迟（Win 7、Vista、XP）。

我（想我）知道的是：

a) 线程上下文切换本身的计算速度非常快。*（通过非常快，我的*意思是通常在 1 毫秒以下，甚至可能在 1 微秒以下？ - 假设一台相对较快的空载机器等）

b) 循环时间片量子约为 10-15ms。

我似乎无法找到有关（高优先级）线程变为活动/发出信号的典型延迟时间的信息 - 例如，通过同步磁盘写入完成 - 并且该线程实际上再次运行。

例如，我至少在一个地方读到，所有非活动线程都保持休眠状态，直到大约 10 毫秒的系统时间片到期，然后（假设它们准备就绪），它们几乎同时被重新激活。但是在另一个地方，我读到线程完成 I/O 操作与它变为活动/发出信号并再次运行之间的延迟以微秒为单位，而不是毫秒。

我的询问上下文与从高速摄像机捕获和连续流式写入 SSD 的 RAID 阵列有关，除非我可以在先前的写入在 1 毫秒内完成后开始新的写入（最好在平均为 1/10 毫秒），这将是有问题的。

任何有关此问题的信息将不胜感激。

谢谢，大卫

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T19:51:11.780

线程上下文切换需要 2,000 到 10,000 个 cpu 周期，因此只需几微秒。

当线程阻塞在信号完成的同步句柄上时，I/O 完成速度很快。这使得 Windows 线程调度程序暂时提高线程优先级。这反过来使得它*有可能*（但不能保证）被选为获得处理器喜爱的线程。所以这通常是微秒，而不是毫秒。

请注意，磁盘写入通常会通过文件系统缓存。这使得 WriteFile() 调用一个简单的内存到内存复制，不会阻塞线程。它以每秒 5 GB 以上的内存总线速度运行。然后数据以懒惰的方式写入磁盘，线程不参与或延迟。只有当文件系统缓存被填满并且您不使用重叠 I/O 时，您才会得到缓慢的写入。如果您编写视频流，这当然是一种可能性。RAM的数量有很大的不同。和 SSD 控制器不一样。没有什么你可以提前推理的，你必须测试。

# c# - FAXCOMEX LIb 的 C# 实现中的 System.Runtime.InteropServices.COMException 错误

> ID：13769651
> 
> 赞同：1
> 
> 时间：2012-12-07T19:21:30.523
> 
> 标签：c#, .net, windows, fax

这就是问题所在。

我用 C# (Visual Studio 2012) 编写了一个 Windows 服务，它查询 MS SQL 数据库，然后使用 FAXCOMEXLIB 发送传真。

我可以参考 FAXCOMEXLIB 并使用服务器类和传真文档类。创建并发送传真。

但是，当我尝试使用 FAXCOMEXLIB 库中的任何其他类时，我在运行服务时收到以下错误（它编译时没有任何错误）：

```
System.Runtime.InteropServices.COMException (0x80040111): Retrieving the COM class 
factory for component with CLSID {43C28403-E04F-474D-990C-B94669148F59} failed due to 
the following error: 80040111 ClassFactory cannot supply requested class (Exception from HRESULT: 0x80040111 (CLASS_E_CLASSNOTAVAILABLE)).
at System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) 
```

这是由

```
FAXCOMEXLib.FaxOutgoingArchive faxOutgoing = new FAXCOMEXLib.FaxOutgoingArchive(); 
```

我试着跑

```
 regsvr32.exe fxscomex.dll 
```

它没有帮助。

我还尝试手动创建和导入以下注册表项。

```
[HKEY_CLASSES_ROOT\Wow6432Node\CLSID\{43C28403-E04F-474D-990C-B94669148F59}]
@="FaxOutgoingArchive Class"

[HKEY_CLASSES_ROOT\Wow6432Node\CLSID\{43C28403-E04F-474D-990C-B94669148F59}\InprocServer32]
@=hex(2):25,00,73,00,79,00,73,00,74,00,65,00,6d,00,72,00,6f,00,6f,00,74,00,25,\
00,5c,00,73,00,79,00,73,00,74,00,65,00,6d,00,33,00,32,00,5c,00,66,00,78,00,\
73,00,63,00,6f,00,6d,00,65,00,78,00,2e,00,64,00,6c,00,6c,00,00,00
"ThreadingModel"="Apartment"

[HKEY_CLASSES_ROOT\Wow6432Node\CLSID\{43C28403-E04F-474D-990C-B94669148F59}\ProgID]
@="FaxComEx.FaxOutgoingArchive.1"

[HKEY_CLASSES_ROOT\Wow6432Node\CLSID\{43C28403-E04F-474D-990CB94669148F59}\Programmable]

[HKEY_CLASSES_ROOT\Wow6432Node\CLSID\{43C28403-E04F-474D-990C-B94669148F59}\TypeLib]
@="{2BF34C1A-8CAC-419F-8547-32FDF6505DB8}"

[HKEY_CLASSES_ROOT\Wow6432Node\CLSID\{43C28403-E04F-474D-990C-B94669148F59}\Version]
@="1.0"

[HKEY_CLASSES_ROOT\Wow6432Node\CLSID\{43C28403-E04F-474D-990C-B94669148F59}\VersionIndependentProgID]
@="FaxComEx.FaxOutgoingArchive" 
```

注册表项没有帮助。我尝试在 Windows 7 64 位、Windows Server 2012 64 位和 Windows Server 2008 32 位上运行该服务，结果完全相同。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:39:03.270

这是您的代码中的错误，您不应该自己创建 FaxOutgoingArchive 的实例。它在[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms688634%28v=vs.85%29.aspx)中是明确的：

> 若要在 Microsoft Visual Basic 中创建 FaxOutgoingArchive 对象，请检索 FaxFolders 对象的 OutgoingArchive 属性。

万一这令人困惑，同样的规则也适用于 C#

# javascript - 使用 Jquery 进行动态图像叠加

> ID：13769655
> 
> 赞同：2
> 
> 时间：2012-12-07T19:21:42.140
> 
> 标签：javascript, jquery, html, css, dynamic

我有一个带有叠加 DIV 的图像，当我将鼠标悬停在图像上时，它会显示 2 个图像，这很好用，但我希望它是动态的并且适用于页面上的无数图像，目前它仅适用于第一张图片，我我对 javascript 和 jquery 不太好，希望您能在这方面提供帮助。

**jQuery代码：**

```
$("#imageOverlay").hover(
    function() {
        $(this).children("img").fadeTo(200, 0.7).end().children("#hover").show();
    },
    function() {
        $(this).children("img").fadeTo(200, 1).end().children("#hover").hide();
}); 
```

**HTML 代码：**

```
<div id="imageOverlay">
  <div id="hover">
    <a href="#"><img src="http://placehold.it/100x30&text=Full View" /></a>
    <a href="#1"><img src="http://placehold.it/100x30&text=Similar" /></a>
  </div>
  <img src="http://placehold.it/1000x1000&text=Thumbnail">
</div> 
```

**CSS 代码：**

```
#imageOverlay {
    display: inline;
    position: relative;
}
#imageOverlay #hover {
    display: none;
    position: absolute;
    margin-top: 10px;
    margin-right: 10px;
    z-index: 2;
}
#imageOverlay #hover a {
    width: 100px;
    height: 30px;
    display: block;
    margin-bottom: 5px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T19:44:43.017

`#imageOverlay`为and使用一个类`#hover`，你只能有一个 ID 的实例，所以当你有多个这些 ID 时，函数只会找到第一个。此外，只是淡化容器框，而不是每个单独的图像。此外，`stop()`在动画之前使用，以确保当人们在您的元素上下移动鼠标时不会出现奇怪的行为。然后，将主图像放在首位确保悬停的图像“在顶部”，而不必担心`z-index`.

**HTML**

```
<div class="imageOverlay">
  <img src="http://placehold.it/1000x1000&text=Thumbnail">
  <div class="hover">
    <a href="#"><img src="http://placehold.it/100x30&text=Full View" /></a>
    <a href="#1"><img src="http://placehold.it/100x30&text=Similar" /></a>
  </div>
</div> 
```

**JS**

```
//fade out the images initially
$(".imageOverlay .hover").fadeTo(0, 0)
$(".imageOverlay").hover(
    function() {
        $(this).find(".hover").stop().fadeTo(200, 1);
    },
    function() {
        $(this).find(".hover").stop().fadeTo(200, 0);
    } //when writing clean code, be sure your closer ends at the same indent as your opener
); 
```

**CSS**

```
.imageOverlay {
    display: inline-block;
    position: relative;
}
.imageOverlay .hover {
    position: absolute;
    top: 10px;
    right: 10px;
}
.imageOverlay .hover a {
    width: 100px;
    height: 30px;
    display: block;
    margin-bottom: 5px;
} 
```

当您悬停时，您的图像应该显示在顶部！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T19:39:06.500

创建`#imageOverlay`一个类并将其应用于 html 中的多个属性。

CSS：

```
.imageOverlay
    //css rules 
```

jQuery：

```
$(".imageOverlay").hover(
  function() {
      $(this).children("img").fadeTo(200, 0.7).end().children("#hover").show();
  },
  function() {
      $(this).children("img").fadeTo(200, 1).end().children("#hover").hide();
}); 
```

html:

```
<div class="imageOverlay">
   // do stuff
</div>
<div class="imageOverlay">
   // do stuff
</div> 
```

# java - Java - 如何使用窗口构建器在 JTextField 中添加时钟？

> ID：13769656
> 
> 赞同：0
> 
> 时间：2012-12-07T19:21:45.213
> 
> 标签：java, swing, jtextfield, clock, windowbuilder

> **可能重复：**
> [约束用户在 JTextField 中输入时间的最佳方式](https://stackoverflow.com/questions/11881301/best-way-to-constrain-user-to-enter-a-time-in-a-jtextfield)

我在 Eclipse 中使用窗口构建器，我有一个 JTextField，我想将小时设置为文本 (hh:mm:ss)。我有一些麻烦；有人可以帮助我吗？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:32:39.403

使用 java 日期和时间。例子：

```
import java.util.*;
...
  // Create a Gregorian calendar initialized
  // with the current date and time in the
  // default locale and timezone.
  GregorianCalendar gcalendar = new GregorianCalendar();

  String hr = ("" + gcalendar.get(Calendar.HOUR) + ":");
  String min = ("" + gcalendar.get(Calendar.MINUTE) + ":");
  String sec = ("" + gcalendar.get(Calendar.SECOND)); 
```

然后做：

```
<textFieldName>.setText(hr + min + sec); 
```

这会将文本字段中的文本更改为“HH：MM：SS”

# javascript - 在 TypeScript 中引用推断类型

> ID：13769659
> 
> 赞同：6
> 
> 时间：2012-12-07T19:22:00.180
> 
> 标签：javascript, dependency-injection, closures, typescript, inferred-type

有没有办法在 TypeScript 中引用推断类型？

在下面的示例中，我们得到了很好的推断类型。

```
function Test() {
    return {hello:"world"}
}

var test = Test()
test.hello // works
test.bob   // 'bob' doesn't exist on inferred type 
```

但是，如果我想定义一个接受类型参数的函数：“无论`Test`返回什么”，而不显式定义接口，该怎么办？

```
function Thing(test:???) {
  test.hello // works
  test.bob   // I want this to fail
} 
```

这是一种解决方法，但如果 Test 有自己的参数，它会变得很麻烦。

```
function Thing(test = Test()) {} // thanks default parameter! 
```

有什么方法可以引用任何 Test 返回的推断类型？所以我可以在不创建界面的情况下输入“Whatever Test returns”之类的内容？

我关心的原因是因为我通常使用闭包/模块模式而不是类。Typescript 已经允许您将某些内容作为类输入，即使您可以创建一个描述该类的接口。我想输入函数返回的东西而不是类。有关原因的更多信息，请参阅[Typescript 中的闭包（依赖注入）](https://stackoverflow.com/questions/13314241/closures-in-typescript-dependency-injection)。

解决这个问题的最佳方法是，如果 TypeScript 添加了定义将其依赖项作为参数的模块的能力，或者在闭包内定义模块。然后我可以使用漂亮的`export`语法。有谁知道有没有这方面的计划？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-12-21T20:43:34.133

现在可以：

```
function Test() {
    return { hello: "world" }
}

function Thing(test: ReturnType<typeof Test>) {
  test.hello // works
  test.bob   // fails
} 
```

[https://www.typescriptlang.org/docs/handbook/advanced-types.html#type-in​​ference-in-conditional-types](https://www.typescriptlang.org/docs/handbook/advanced-types.html#type-inference-in-conditional-types)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:31:21.103

您可以将接口的主体用作类型文字：

```
function Thing(test: { hello: string; }) {
    test.hello // works
    test.bob   // I want this to fail
} 
```

相当于

```
interface ITest {
    hello: string;
}

function Thing(test: ITest) {
    test.hello // works
    test.bob   // I want this to fail
} 
```

只是不要忘记`;`每个成员的末尾。

* * *

没有用于命名或引用推断类型的语法。您可以获得的最接近的方法是为您要使用的成员使用接口或类型文字。接口和类型文字将匹配至少具有已定义成员的任何类型。“鸭子打字”

# jquery - jquery自动完成插件在母版页中不起作用

> ID：13769660
> 
> 赞同：1
> 
> 时间：2012-12-07T19:22:04.187
> 
> 标签：jquery, asp.net, autocomplete, master-pages

我一直在一个汽车零部件网站上工作，我需要在搜索框中提供自动完成功能。

我已经尝试过的事情：

i)[我尝试过使用服务使用 ajax 扩展器，但运气不佳] ii)[我也尝试过 jquery ui 内置自动完成插件，但运气不佳]

但是经过一天的全力奋斗，我终于让它在简单的 aspx 页面上工作，但是当我将此代码用于母版页时，它就不起作用了。

在这部分我需要你们:)

```
//code inside the masterpage head
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js" type="text/javascript"></script>
<script src="scripts/jquery.autocomplete.min.js" type="text/javascript"></script>
<link href="css/jquery.autocomplete.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
    $(document).ready(function() {
    $("#ctl00_myTextBox").autocomplete('select.ashx');
    });
 </script> 
```

//注意：此文本框也在母版页中，而不是在任何内容页中

```
<asp:TextBox ID="myTextBox" runat="server" Width="250" ></asp:TextBox> 
```

//这是 httphandler 的代码 ... //注意：我正在使用 LuceneIndexes 检索数据

公共类选择：IHttpHandler {

```
 public void ProcessRequest(HttpContext context)
    {
        context.Response.ContentType = "application/javascript";
        if (!String.IsNullOrEmpty(context.Request.QueryString["q"]))
       {
           foreach (string s in GetAutoCompleteValues(context.Request.QueryString["q"]))
           {
               context.Response.Write(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(s)+Environment.NewLine);
           }
       }

    }
    public static string[] GetAutoCompleteValues(string prefixText)
    {
           DataTable dt = GetSearchList.GetResult(prefixText);
           List<string> RowNames = new List<string>();
           foreach (DataRow drow in dt.Rows)
           {
               RowNames.Add(drow[1].ToString() + " " + drow[2].ToString() + " " + drow[3].ToString() + " " + drow[4].ToString() + " " + drow[5].ToString() + " " + drow[6]);
           }
           return RowNames.ToArray();
    }
    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

请帮我解决任何建议都会有所帮助thanx提前...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T06:02:14.780

这个问题是因为您没有使用动态呈现的控件 id，并且从您将其放置在母版页上的那一刻起，该 id 就发生了变化。

在您的 javascript 的这一行中，使用`myTextBox.ClientID`as：

```
$("#<%=myTextBox.ClientID%>").autocomplete('select.ashx'); 
```

动态渲染控件ID，并让jQuery找到它。

# multithreading - 跨不同处理器调度单个线程 - 需要清除缓存？

> ID：13769662
> 
> 赞同：1
> 
> 时间：2012-12-07T19:22:07.983
> 
> 标签：multithreading, caching, scheduling, processor

当您跨不同处理器调度单个线程时，是否每次都必须清除缓存？如果不清除缓存，则不会发生以下情况：

假设您有以下（伪）代码由 2 个处理器 P1 和 P2 执行。

```
 1\. foo() {
     2\. int x=5;
     3\. x=10;
     4\. print x;
     5\. } 
```

最初，线程被调度在 P1 上，它执行第 1 行和第 2 行，并将 5 存储在其缓存中以用于 x 的内存位置（在堆栈上）。

然后线程被调度到执行第 3 行的 P2 上，并将 10 存储在*其*缓存中以用于 x 的内存位置。

最后，线程再次被调度在 P1 上，并执行第 4 行，打印 5（x 在 P1 的缓存中的值）。

然而，我们显然希望打印 10 个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:25:27.497

是的，处理器缓存/寄存器需要更新，或者至少刷新到主内存，因此如果线程迁移到另一个内核/处理器，它可以获取其最近的内存。

幸运的是，我们通常为其编写代码的常见服务器/桌面平台是[缓存一致](http://en.wikipedia.org/wiki/Cache_coherence)的，因此硬件负责所有使这项工作正常工作的魔法，并且操作系统无论如何都需要确保为线程/进程提供适当的内存在操作系统决定运行该线程的任何地方都可用。这不是应用程序代码需要担心的任务。

如果您使用的平台不是缓存一致的，您可能会知道 - 如果操作系统决定将线程迁移到，您使用的操作系统/线程库很可能会确保正确更新缓存另一个处理器。

# vb.net - .NET Crystal Reports 导出为带有分页符/标题的文本

> ID：13769671
> 
> 赞同：0
> 
> 时间：2012-12-07T19:22:52.717
> 
> 标签：vb.net, crystal-reports

我有许多水晶报表，我要在 vb.net 中导出为文本。它导出得很好，但都作为一页 - 没有分页符或页面标题。我可以通过将位更改为其他内容来更改这`FormatOptions.LinesPerPage = 0`一点，但是导出的报告都是不同的。对一个人有用的东西不一定对另一个人有用。我宁愿不必为每个报告单独编写代码。

有没有办法将 Crystal Reports 分页符传递给导出文本？或另一种格式（例如，.pdf？）

```
Dim crReportDocument As New ReportDocument
Dim ExportOpts As New ExportOptions
Dim DestinationOptions As New DiskFileDestinationOptions()
Dim FormatOptions As New TextFormatOptions

crReportDocument.Load(strFileName)
ExportOpts = crReportDocument.ExportOptions

DestinationOptions.DiskFileName = strNewFileName
FormatOptions.CharactersPerInch = 16
FormatOptions.LinesPerPage = 0
With ExportOpts
    .ExportDestinationType = ExportDestinationType.DiskFile
    .ExportFormatType = ExportFormatType.Text
    .DestinationOptions = DestinationOptions
    .ExportFormatOptions = FormatOptions
End With

crReportDocument.Export(ExportOpts)
crReportDocument.Close()
crReportDocument.Dispose() 
```

# sql - SQL 左与右外连接。返回所有值

> ID：13769672
> 
> 赞同：1
> 
> 时间：2012-12-07T19:23:05.643
> 
> 标签：sql, inner-join, outer-join

问题：需要查询以返回每年的 MONTH 和 YIELD。出于某种原因，如果在 a.Month 月份未找到数据，则查询将不会返回 b.Month 的产量。我需要查询返回所有月度数据，无论 a.Month 是否包含与“b”相同月份的数据。

以下结果：应该为“MONTH 1 YIELD_1”返回一个值。但它没有......因为“MONTH 1 YIELD_0”不包含第 1 个月的值。

```
**DATA RESULTS WITH: LEFT OUTER JOIN:**
Month   Yield_1    Yield_0
2        11.44      14
3         NULL     3.21
4         NULL     14.24
7         NULL     10.36
8         NULL       0
9         NULL     -9.6
10        NULL     10.35
11        NULL      1.4
12        11.44    -1.18

**DATA RESULTS WITH RIGHT OUTER JOIN:**
Month   Yield_1    Yield_0
NULL     11.44      NULL
2        11.44       14
12       11.44     -1.18 
```

**询问：**

```
SET @ID_CARTERA = 8;

select     
        a.Month Month,
        b.Monthly_Yield Yield_Year_1,
        a.Monthly_Yield Yield_Year_0

from
    ( select  
          LEFT(A.F_ANOMES, 4) Year,
          RIGHT(A.F_ANOMES, 2) Month,
          ROUND(A.POR_RENTABILIDAD, 2) Monthly_Yield

from      dr_rent_carteras_meses A
where     A.ID_CARTERA = @ID_CARTERA
And       A.IND_RENTABILIDAD = 1

And       LEFT(A.F_ANOMES, 4) = ( select MAX(left(F_ANOMES, 4 ) ) - 0 from dr_rent_carteras_meses where ID_CARTERA = @ID_CARTERA ) ) a

LEFT outer join 
        ( select  
          LEFT(A.F_ANOMES, 4) Year,
          RIGHT(A.F_ANOMES, 2) Month,
          ROUND(A.POR_RENTABILIDAD, 2) Monthly_Yield

from      dr_rent_carteras_meses A
where     A.ID_CARTERA = @ID_CARTERA
And       A.IND_RENTABILIDAD = 1
And       LEFT(A.F_ANOMES, 4) = ( select MAX(left(F_ANOMES, 4 ) ) - 1 from dr_rent_carteras_meses where ID_CARTERA = @ID_CARTERA ) ) b on ( a.Month = b.Month )

order by  month asc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:12:24.690

尝试完全外连接。看这里：

[http://en.wikipedia.org/wiki/Join_%28SQL%29#Full_outer_join](http://en.wikipedia.org/wiki/Join_%28SQL%29#Full_outer_join)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T23:12:46.687

### 概括

我认为对于这个特定的查询，您不需要左连接、右连接或完全连接，因为基于`GROUP BY`/`CASE`的解决方案应该可以正常工作，并且速度至少要快两倍。

### 问题定义

我发现这个问题很有趣，因为它似乎来自现实生活中的情况，我相信在现实生活`FULL JOIN`中很少有必要。所以对我来说，真正的问题不是如何组合左右连接的数据，而是**为什么首先需要完全连接？**

此外，简单的替换`LEFT`为`FULL`是不够的，因为这会导致

1.  相同月份的重复行；
2.  `NULL`当月份在最近一年中不可用时，月份。

所以我决定继续破译查询。

### 表和数据设置

不幸的是，@smileyseven 没有提供表定义或插入语句，所以我必须从查询和示例数据中解决它们。根据查询语法，我假设使用了 SQL Server，所以这也是我使用的。

这是我对表格外观的猜测：

```
CREATE TABLE dr_rent_carteras_meses 
(
    F_ANOMES varchar(6) NOT NULL PRIMARY KEY,
    POR_RENTABILIDAD float NOT NULL,
    -- These columns are  irrelevant 
    ID_CARTERA INT NOT NULL DEFAULT(8),
    IND_RENTABILIDAD INT DEFAULT(1) NOT NULL
) 
```

重要的一点`F_ANOMES`可能是关键列，否则我们将不得不期望查询输出中每个月都有多行，这似乎不太可能。

以下插入语句应生成示例数据：

```
INSERT dr_rent_carteras_meses (F_ANOMES, POR_RENTABILIDAD) VALUES 
('201202', 14),
('201203', 3.21),
('201204', 14.24),
('201207', 10.36),
('201208', 0),
('201209', -9.6),
('201210', 10.35),
('201211', 1.4),
('201212', -1.18),
('201101', 11.44),
('201102', 11.44),
('201112', 11.44) 
```

### 解决方案

首先要注意的是，我们真的不需要计算最大年份两次，所以我们从这个开始：

```
declare @Max_Year int
select 
    @Max_Year = MAX(left(F_ANOMES, 4))
from dr_rent_carteras_meses 
where ID_CARTERA = @ID_CARTERA 
```

`a`和表实际上是相同的`b`，所以我们可以重用它们：

```
;with 
Monthly_Yield_CTE as
( 
    select  
        LEFT(F_ANOMES, 4) Year,
        RIGHT(F_ANOMES, 2) Month,
        ROUND(POR_RENTABILIDAD, 2) Monthly_Yield
    from      dr_rent_carteras_meses
    where     ID_CARTERA = @ID_CARTERA
    and       IND_RENTABILIDAD = 1
    and       LEFT(F_ANOMES, 4) in (@Max_Year, @Max_Year - 1)
) 
```

并使用，`FULL JOIN`但我认为更好的选择是简单地按月分组：

```
select
    [Month],
    SUM(CASE WHEN [Year] = @Max_Year - 1 THEN Monthly_Yield ELSE 0 END) Yield_Year_1,
    SUM(CASE WHEN [Year] = @Max_Year THEN Monthly_Yield ELSE 0 END) Yield_Year_0
from Monthly_Yield_CTE
group by [Month]
order by [Month] 
```

可以使用 CTE 版本，也可以在不使用 CTE 的情况下重写它，因为查询很简单：

```
SET @ID_CARTERA = 8

declare @Max_Year int
select 
    @Max_Year = MAX(left(F_ANOMES, 4))
from dr_rent_carteras_meses 
where ID_CARTERA = @ID_CARTERA

select  
    RIGHT(F_ANOMES, 2) Month,
    SUM(CASE 
            WHEN LEFT(F_ANOMES, 4) = @Max_Year - 1 
            THEN ROUND(POR_RENTABILIDAD, 2) 
            ELSE 0 
        END) Yield_Year_1,
    SUM(CASE 
            WHEN LEFT(F_ANOMES, 4) = @Max_Year 
            THEN ROUND(POR_RENTABILIDAD, 2) 
            ELSE 0 
        END) Yield_Year_0
from      dr_rent_carteras_meses
where     ID_CARTERA = @ID_CARTERA
and       IND_RENTABILIDAD = 1
and       LEFT(F_ANOMES, 4) in (@Max_Year, @Max_Year - 1)
group by RIGHT(F_ANOMES, 2)
order by 1 
```

我知道的唯一缺点是我们得到`0`的不是`NULL`数据丢失的月份，我不确定这是否重要。

**表现**

这个查询的性能似乎要好一些；`GROUP BY`在我的设置中， /查询的相对组合成本`CASE`与单独`MAX`的解决方案相比约为 30% 和 70% `FULL JOIN`。

# javascript - D3 不返回 JSON 对象

> ID：13769676
> 
> 赞同：0
> 
> 时间：2012-12-07T19:23:18.443
> 
> 标签：javascript, websocket, d3.js, data-visualization

我正在尝试通过 websocket 读取 JSON 对象，以便通过 D3 库进行可视化。我只是在检查浏览器是否正确接收 JSON。这是代码：

```
 ws = new WebSocket("ws://localhost:8888/dh");

      ws.onmessage = function(evt)
      {
        d3.json(
        JSON.parse(evt.data),
        function (jsondata) {

        console.log(jsondata);

        var data = jsondata.map(function(d) { return d.Value; });
        console.log(data);

            });   
      } 
```

但是当我检查控制台日志时，它给了我这些错误：

```
[19:15:36.434] TypeError: jsondata is null @ http://localhost:8888/static/anEx.js:21 
```

并且 console.log(data) 为空。

这里有什么不正确的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:30:40.193

[`d3.json`](https://github.com/mbostock/d3/wiki/Requests#wiki-d3_json)用于发出返回 JSON 响应的 HTTP 请求。

您已经在 WS 消息处理程序中拥有数据，无需再发出请求。做就是了：

```
ws.onmessage = function(evt) {
    var jsondata = JSON.parse(evt.data);
    console.log(jsondata);
    // handle data ...
} 
```

# twitter-bootstrap - 引导按钮加载状态 - Safari

> ID：13769677
> 
> 赞同：2
> 
> 时间：2012-12-07T19:23:26.420
> 
> 标签：twitter-bootstrap

下面的代码在 Chrome、Firefox 和 IE 中产生了所需的结果，但在 Safari 中却没有。我已经搜索并找到了许多解决方案 - 包括在这里 - 但我无法让它工作并且已经复制并粘贴了代码 - 有什么想法吗？我正在使用最新的 jQuery & Bootstrap 2.2.1 - 因此我不必加载 bootstrap-button.js，因为它集成在 Bootstrap 2.2.1 中。

谢谢，

```
<script type="text/javascript" src="js/jquery.js"></script> 
<script type="text/javascript" src="js/bootstrap.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('#buttonLoad').button();

    $('#buttonLoad').on('click', function () {
        $(this).button('loading')
     }) 
});
</script>

<button style="margin-left:20px; margin-top:5px; float:left" id="buttonLoad" type="submit" class="btn btn-success"  data-loading-text="Loading...">Login<i style="margin-left:6px" class=" icon-share-alt"></i></button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T16:58:18.267

![在此处输入图像描述](../Images/98b39cde91a9b77fccfefc4a21b5e58e.png)目前无法在 Safari 中进行测试，但我已经使用了它，它在 Safari 中运行良好。尝试使用类而不是 ID 来选择元素，看看是否可以修复它。

- 附加图片显示了 Safari 中的工作示例。

```
<button type="submit" role="button" runat="server" id="SignUpBtn" name="SignUpBtn" onclick="ValidateSignUpForm(); return false;" class="btn btn-primary" validationgroup="EmailBlast" data-loading-text="Saving..." causesvalidation="true"><i class="fa fa-pencil"></i> Subscribe</button>

 <script>
    function ValidateSignUpForm() {
        //if (typeof (Page_ClientValidate('EmailBlast'))) {
        //    Page_ClientValidate();
        //}
        Page_ClientValidate('EmailBlast');
        if (Page_IsValid) {
            $('#SignUpBtn').button('loading');
            EmailSignUpCallback.PerformCallback();
            SignUpLoadingPanel.Show();
        }
    }
</script> 
```

# google-app-engine - App Engine 不缓存静态 CSS 文件

> ID：13769681
> 
> 赞同：1
> 
> 时间：2012-12-07T19:23:33.297
> 
> 标签：google-app-engine

我刚刚开始使用我的第一个应用程序引擎网站。我按照 hello world 示例来启动并运行我的主页。我添加了一个 css 文件并在我的`app.yaml`. 以下是完整内容：

```
application: myapp
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /css/.*/(.*)
  mime_type: text/css
  static_files: css/\1
  upload: css/(.*)
  expiration: "30d"

- url: /.*
  script: myapp.app 
```

当我使用 Chrome 开发者工具的审核功能时，它会警告我的 CSS 文件是明确不可缓存的。我尝试增加过期时间，但这并没有帮助。

我还需要做些什么来启用静态文件的缓存吗？我没有弄乱站点仪表板中的任何设置，因此它应该使用默认设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T20:55:49.793

当我在 SDK 上针对 localhost 运行相同的测试时，我收到相同的警告，即我的 CSS 都没有被缓存，并且它被设置为显式不可缓存。

当我部署应用程序并从 .appspot.com 运行测试时，我只收到 jquery CDN 链接的警告，并且我的所有 CSS 文件都被缓存。

希望这可以帮助。

编辑：看起来文件被标记为代理缓存，但我仍然认为它们是不可浏览器缓存的。

# mod-rewrite - 一种 RewriteRule 两种情况

> ID：13769682
> 
> 赞同：2
> 
> 时间：2012-12-07T19:23:33.173
> 
> 标签：mod-rewrite

我需要一个重写规则来加载一个有时需要一个和一些两个变量的站点。

我需要通过以下方式访问我的网站：

```
blubb.com/user123
blubb.com/user123/ 
```

应该改写为`/profile.php?username=user123`

和

```
blubb.com/user123/photos
blubb.com/user123/photos/ 
```

应该改写为`/profile.php?username=user123&site=photos`

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]*)/([^/]*)$ /profile.php?username=$1&site=$2 [NC] 
```

有了上面的规则，我就可以打电话了`blubb.com/user123/`，`blubb.com/user123/photos`但不能打电话给其他两个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:33:25.367

Tou 真的应该 301 将带有斜杠的 URL 重定向到没有斜杠的相同 URL（在单独的重写中）。如果两者都提供相同的内容，Google 会将其视为内容稀释并因此对您进行处罚。

这应该这样做：

```
# Redirect trailing slash to no trailing slash for Google:
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/$ /$1 [L,QSA,R=301]

# Route appropriately
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/?(.*)$ /profile.php?username=$1&site=$2 [NC,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:34:45.710

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([0-9A-Za-z]+)(/([0-9A-Za-z]*)/?$ /profile.php?username=$1&site=$3 [NC] 
```

# php - 正则表达式将 PHP 变量转换为 HTML 回显片段

> ID：13769687
> 
> 赞同：1
> 
> 时间：2012-12-07T19:23:59.830
> 
> 标签：php, regex

PHP vars 可以是以下格式，并且可以包含字母数字和下划线：

```
$var_1
$var_1[key_1]
$var_1['key_1']
$var_1["key_1"]
$var_1[key_1][key_2]
$var_1['key_1']['key_2']
$var_1["key_1"]["key_2"]
$var_1->property_1
$var_1->property_1->property_2 
```

数组和对象永远不会有超过 2 个嵌套元素。对象没有方法（即`$var_1->method_1()`不需要）。

我需要一个匹配它们的**正**则表达式，或者最少数量的几个正则表达式，它将它们转换为以下格式的 HTML 回显片段：

```
<?=$1?> 
```

`$1`整个匹配的字符串在哪里。如果可以将常量添加到同一个 RegEx 中，那将是完美的：

```
CONST_1 into <?=CONST_1?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:28:29.427

对于给定的示例，这应该这样做：

```
\$\w+(?:\[(["']|)\w+\1\]|->\w+){0,2} 
```

将其替换为`<?=$0?>`（确保使用`0`，因为`1`是第一次捕获而不是整个匹配）。我没有包括常量，因为我认为这相当棘手（你怎么知道它是常量而不是保留关键字 - 包括所有关键字？）。

正则表达式的解释：

```
\$         # literal $
\w+        # letters, digits, underscores
(?:        # subpattern to match indexing or a member
   \[      # literal [
   (["']|) # a ', a " or nothing (capture it in group 1)
   \w+     # letters, digits, underscores
   \1      # the correct matching closing delimiter
   \]      # literal ]
|          # or
   ->      # literal ->
   \w+     # letters, digits, underscores
){0,2}     # end of subpattern, repeat 0 to 2 times 
```

请注意，如果您在 PHP 中使用此模式，您可能必须转义`'`.

# java - 用哨兵填充字符串数组

> ID：13769688
> 
> 赞同：1
> 
> 时间：2012-12-07T19:24:01.030
> 
> 标签：java, file-io, while-loop, java.util.scanner

所以我想要做的是使用`Scanner = new Scanner(new File("list.txt"))`. 它需要使用标记`"DONE"`来结束文件底部的循环。

我该怎么做？`array[arraySize] = value();`给我一个类型不匹配

```
public class List
{
  public static void main(String[] args) throws FileNotFoundException
  {
    double array[] = new double[100];
    int arraySize = 0;
    String value;
    String sentinel = "DONE";

    Scanner inFile = new Scanner(new File("list.txt"));
    value = inFile.next();
    while (value != sentinel) 
    {
      array[arraySize] = value();
      arraySize++;
      value = inFile.next();
    }
  }
} 
```

D'oh....那些错误是可耻的，哈哈。谢谢大家让它工作=]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:26:35.723

一些问题，您需要将这些行从：

```
double array[] = new double[100]; // can't assign string to double
                                  // (since you said "30 names", I assume
                                  //  you aren't trying to get numbers from
                                  //  the file)
...
while (value != sentinel) // this performs pointer comparison, whereas you want
                          // string comparison
...
    array[arraySize] = value(); // value is a variable, not a function 
```

到：

```
String array[] = new String[100];
...
while (!value.equals(sentinel))
...
    array[arraySize] = value; 
```

**注意：**此外，作为一种好的做法，您可能希望添加一些防御性编程检查以增强`while`循环终止条件。（考虑当输入文件不包含哨兵时会发生什么）

# ruby-on-rails-3 - 存根关联

> ID：13769689
> 
> 赞同：0
> 
> 时间：2012-12-07T19:24:02.847
> 
> 标签：ruby-on-rails-3, rspec, stub

我有方法和规格。

```
class Event
  def self.renew_subscription(user)
    subscription = user.subscription

    result = subscription.renew

    user.pay(subscription.plan.price_in_cents) if result

    result
  end
end

let!(:user) { create :user }

describe ".renew_subscription" do
  before do
    user.subscription.stub!(:renew).and_return(true)
    user.subscription.stub!(:plan).
      and_return(Struct.new("SP", :price_in_cents).new(699))
  end

  context "when have to pay" do
    it "pays" do
      user.should_receive(:pay)
      Event.renew_subscription user
    end
  end
end 
```

有用户`belongs_to :subscription`和订阅`belongs_to :plan`

有没有办法存根`subscription.renew`和`subscription.plan`（或`subscription.plan.price_in_cents`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:53:27.060

我认为你这样做可能是安全的：

```
Subscription.any_instance.stub(:renew).and_return(true)
plan = mock_model(Plan)
Subscription.any_instance.stub(:plan).and_return(plan)
plan.stub(:price_in_cents).and_return(699) 
```

可能还有其他方法可以做到这一点，但我希望这会有所帮助。

# c# - 增加文本框中的 int 值

> ID：13769691
> 
> 赞同：2
> 
> 时间：2012-12-07T19:24:18.723
> 
> 标签：c#, asp.net, increment

我有一个禁用的文本框，一旦单击按钮，其值只会增加一，问题是它从 1 变为 2，仅此而已。我希望每次按下按钮时它都会增加。

```
namespace StudentSurveySystem
{
    public partial class AddQuestions : System.Web.UI.Page
    {
        int num = 1;

        protected void Page_Load(object sender, EventArgs e)
        {

            QnoTextBox.Text = num.ToString();

        }

        protected void ASPxButton1_Click(object sender, EventArgs e)
        {
            num += 1;
            QnoTextBox.Text = num.ToString();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T19:26:41.040

`Postback intializes the variable num to 1 again`并且您没有得到预期的增量结果，您最好使用文本框值并将值存储在[`ViewState`](http://msdn.microsoft.com/en-us/library/ms972976.aspx).

```
protected void ASPxButton1_Click(object sender, EventArgs e)
{
    num = int.Parse(QnoTextBox.Text);
    num++;
    QnoTextBox.Text = num.ToString();
} 
```

*使用 ViewState*

```
public partial class AddQuestions : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

        if(!Page.IsPostBack)
            ViewState["Num"] = "1";

    }

    protected void ASPxButton1_Click(object sender, EventArgs e)
    {           
        QnoTextBox.Text = ViewState["Num"].ToString();
        int num = int.Parse(ViewState["Num"].ToString());
        ViewState["Num"] = num++;
    }
} 
```

# pdf - Adobe API 将 Office 文档转换为 PDF

> ID：13769697
> 
> 赞同：2
> 
> 时间：2012-12-07T19:24:53.933
> 
> 标签：pdf

**Adobe 是否有任何 API 可以让我将 Office 文档（docx、xlsx、pptx 等）文件转换为 PDF 文件格式？**

我更喜欢使用 .NET 来执行此操作，但如果必须，我可以求助于 C/C++。

我已经尝试过使用 Adob​​e SDK，但在我看来，它可以使 Acrobat 应用程序自动化，而不是让我访问底层功能。如果有可能并且有人愿意给我举个例子，我将非常感激 - 经过数小时的谷歌搜索后，我无法找到一个好的答案（虽然很多示例相反 - 从 PDF 转换为 Word） .

最后一件事，我需要它成为 Adob​​e 的库。因此，不幸的是，PDFCreator、BCL EasyPDF、Aspose.Words/Cells/Slides 等对我没有帮助。

**更新 1：**

我决定在论坛上问这个问题，因为首先，我不敢相信 Adob​​e 没有库来做这件事。当然，也可能是这样，但这很奇怪。

**更新 2：**

我也已经查看了`AdobePDFMakerX.Word`界面。我尝试调用`CreatePDF(string in, string out)`接口，但无济于事。它总是返回`false`，并且没有我可以使用的错误描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T10:18:11.300

你确定 Aspose.Words 不适合你吗？我测试了下面的代码示例并且工作正常。

```
string filePdf  = @"D:\\Projects\\original.pdf";
string fileDocX = @"D:\\Projects\\New.docx";

Aspose.Words.Document doc = new Aspose.Words.Document(fileDocX);
doc.Save(filePdf, Aspose.Words.SaveFormat.Pdf); 
```

# pdf - Solr：使用 tika / 提取请求处理程序从提取的 pdf 存储文本布局

> ID：13769704
> 
> 赞同：1
> 
> 时间：2012-12-07T19:25:13.153
> 
> 标签：pdf, layout, solr, apache-tika, requesthandler

我正在使用 solr 4 和提取请求处理程序来索引 pdf 文件，效果很好。pdf 中的文本存储在索引中，以便显示/提供带有突出显示的文本。

问题是，存储文本的布局在 solrs 存储的字段中丢失了。例如，如果 pdf 内容是：

```
 left text                       right text
 2nd. line leftr text            text at the right side 
```

....存储字段的内容如下所示：

```
 left text right text
 2nd. line leftr text text at the right side 
```

另一方面：如果我将 pdf 提取为文本（使用 linux 工具 pdftotext），然后使用提取请求 hendler 索引文本文件（而不是 pdf）-> 存储的字段包含/包含布局。所以被剪断的文本（以及 solr 中存储字段的内容）看起来像这样：

```
 left text                       right text
 2nd. line leftr text            text at the right side 
```

我的问题：有没有办法在索引 pdf 时也保持布局，而不仅仅是文本文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T13:02:06.113

Apache Tika 将从 pdf 中提取所有文本并将内容索引为文本文件。
但是，您可以始终将 pdf 转换为文本并获取它的索引，而不是使用带有 Tika 的 ExtractHandler，这样您就可以拥有带有布局的文本并在其上启用搜索。
您还可以检查是否可以使用 PDFBox 更改 Apache Tika 的默认处理以使用其他保存文本布局的转换器。

# php - 带有 BEF MAX_JOIN_SIZE 错误的 Drupal 7 视图

> ID：13769706
> 
> 赞同：1
> 
> 时间：2012-12-07T19:25:14.957
> 
> 标签：php, drupal-7, drupal-views

我正在使用带有 Views 和 Better Exposed Filters 的 Drupal 7，因此我可以使用带有复选框的分类术语搜索内容节点。我只有大约 25 条内容和 10 个分类术语复选框。当我选中所有框时，我收到了这个错误（我只能在视图预览中看到）：

SQLSTATE[42000]：语法错误或访问冲突：1104 SELECT 将检查超过 MAX_JOIN_SIZE 行；检查您的 WHERE 并使用 SET SQL_BIG_SELECTS=1 或 SET MAX_JOIN_SIZE=# 如果 SELECT 没问题

我发现了一些建议，建议使用以下代码来解决这个问题：

```
mysql_query("set sql_big_selects=1"); 
```

1.  如果这是正确的方法，那么应该在哪里使用此代码？
2.  这种方法是否解决了写得不好的查询，如果是，有解决方案吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:11:05.243

[这个问题](http://drupal.org/node/361967)出现在 Drupal.org 上。要点是`sql_big_selects`在您的主机上设置`0`为是有原因的，因此您应该联系您的管理员/支持人员以更改此设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:21:53.493

我想出了一个解决方案；我很好奇这是否是正确的长期。

我用 grep-ed 我的整个站点来查找配置文件。我找到了sites/default/settings.php。它相当擅长描述如何使用它。此文件存在安全问题，因此它的默认权限设置为完全排除写入权限。我使用 chmod 466 将其设置为编辑，然后使用 chmod 444 将其设置回来。不要忘记这样做。

我找到了未注释的代码并添加了将 SQL_BIG_SELECTS 设置为 1 的最后一个数组元素。仍然想知道 Better Exposed Filters 生成的 SQL 代码是否不好。无论如何，这暂时修复了错误。

```
 $databases = array (
  'default' => 
  array (
    'default' => 
    array (
      'database' => 'name_one',
      'username' => 'name_two',
      'password' => 'not_telling_you',
      'host' => 'localhost',
      'port' => '',
      'driver' => 'mysql',
      'prefix' => '',
      'init_commands' => array(
        'big_selects' => 'SET SQL_BIG_SELECTS=1',
      ),
    ),
  ),
); 
```

# asp.net-mvc - 如何填充 mvc razor 局部视图

> ID：13769707
> 
> 赞同：28
> 
> 时间：2012-12-07T19:25:20.140
> 
> 标签：asp.net-mvc, razor

我需要创建一个显示订单标题信息的视图，并且我需要添加一个显示行项目网格的局部视图。部分视图将从视图模型中强类型化。我知道我应该使用 html 帮助程序 @Html.Partial("Path/view")。到目前为止，我只使用控制器来打开视图，在将视图模型发送到视图之前填充视图模型。由于部分视图是从 html 助手调用的，我想知道用模型数据填充部分视图的最佳方法是什么。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-12-07T19:52:27.997

**选项 1：从父页面继承**

默认情况下，任何通过调用渲染的局部视图`@Html.Partial("PartialViewName")`都会将视图模型传递给父视图。

因此，如果您有：

*查看模型*

```
namespace MyNamesapce
{
    public OrderInfoViewModel
    {
        public string OrderTitle { get; set; }
        public IEnumerable<OrderItem> OrderItems { get; set; }
    }
} 
```

*订单信息.cshtml*

```
@model MyNamespace.OrderInfoViewModel

<h1>@Model.OrderTitle</h1>

@Html.Partial("OrderLineItems") 
```

OrderLineItems 页面应该被`MyNamespace.OrderViewModel`传递给它......所以你的局部视图应该如下所示：

*OrderLineItems.cshtml*

```
@model MyNamespace.OrderInfoViewModel

foreach (var orderItem in Model.OrderItems)
{
    //Do stuff
} 
```

**选项 2：指定型号**

您可以使用第二个参数来指定要传递的视图模型。IE

*订单信息.cshtml*

```
@model MyNamespace.OrderInfoViewModel

<h1>@Model.OrderTitle</h1>

@Html.Partial("OrderLineItems", Model.OrderItems) 
```

*OrderLineItems.cshtml*

```
@model IEnumerable<OrderItem>

foreach (var orderItem in Model)
{
    //Do stuff
} 
```

**选项 3：使用部分操作**

如果您需要在多个页面上重用局部视图，最好使用局部视图来避免仅仅因为页面将使用相同的局部视图而使用相同的信息填充不同的视图模型。

例如

*查看模型*

```
namespace MyNamesapce
{
    public OrderInfoViewModel
    {
        public string OrderTitle { get; set; }
    }
} 
```

*控制器*

```
public class OrderController : Controller
{
    public ActionResult OrderInfo(int orderId)
    {
        OrderInfoViewModel viewModel = GetViewModel(orderId);
        return View(viewModel);
    }

    public PartialViewResult OrderLineItems(int orderId)
    {
        IEnumerable<OrderItem> orderItems = GetOrderItems(orderId);
        return Partial(orderItems);
    }
} 
```

*订单信息.cshtml*

```
@model MyNamespace.OrderInfoViewModel

<h1>@Model.OrderTitle</h1>

@Html.Action("OrderLineItems") 
```

*OrderLineItems.cshtml*

```
@model IEnumerable<OrderItem>

foreach (var orderItem in Model.OrderItems)
{
    //Do stuff
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-07T19:28:40.917

使用局部视图，您只需像使用普通视图一样发送模型。例如，如果您的模型具有名为“LineItems”的 LineItem 对象的属性，您只需执行以下操作：

```
@Html.Partial("_PartialName", Model.LineItems) 
```

现在，如果您的模型没有该属性，您可以添加它，或者以其他方式传递它，例如 ViewBag（我更喜欢强类型方法，但这是我的选择：

```
@Html.Partial("_PartialName", (List<LineItem>)ViewBag.LineItems) 
```

这些不是唯一的方法，但它们是我的首选方法。

# c# - 使用动态临时表

> ID：13769708
> 
> 赞同：1
> 
> 时间：2012-12-07T19:25:23.497
> 
> 标签：c#, linq-to-sql, temp-tables

我有以下情况：我需要创建一些临时表来优化最近发生的负载问题。LINQ to SQL 似乎不适用于临时表，除非它们映射到 DBML。老实说，我仍然不明白范围如何在 LINQ to SQL 上工作。考虑到这一点，我去定义 DBML 上的每个临时表。

但是，和往常一样，事情不可能那么容易。我无法在编译时间（这是 linq 需要的）定义我的临时表将具有什么名称，因为它将在用户登录系统时定义。添加更多：我将有几个这样的动态临时表，所以我无法将它们全部映射到 DBML。

当我尝试通过创建临时表时`executeCommand`，选择其结果并将其转换为强类型（`TempTableDefinition`）。但是，当我尝试在这个新创建的临时表上插入值时，我得到一个 SQLException 说“无效的对象名称 #NewTempTable”（这是我用来创建表的同名）。

看来我将不得不使用纯旧的普通 ADO.NET 来创建每个临时表并将其属性映射到强类型对象（我更喜欢这种方法）。我真的不想将 ADO.NET 与 LINQ 混合使用，因为我刚刚读到这是一个坏主意。另外，与 ADO.NET 方式相比，我更喜欢强类型对象的 linq 方法。

**简历：** 那么，您知道或者甚至可以创建 linq to sql 可以使用的动态临时表吗？我无法在编译时定义它的名称，只能在执行时定义。任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:36:15.183

问题似乎是 L2S 默认打开和关闭每个逻辑请求的连接。这会杀死你的临时表。

要么手动打开连接（当然要关闭它），要么将所有内容包装在`TransactionScope`与 L2S 集成并保持连接打开的 a 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:34:57.530

> 优化负载问题

Linq-2-sql 和 batch/bulk 无论如何都不能一起工作。每个插入/更新/删除都会产生一个语句（好的，一个事务，但仍然）。对于核心性能，请避免使用 Linq-2-sql，一旦您输入了数据，请使用具有强类型等所有优势的 Linq。

# ruby-on-rails - 在 ubuntu 上安装 pg gem

> ID：13769715
> 
> 赞同：1
> 
> 时间：2012-12-07T19:26:01.920
> 
> 标签：ruby-on-rails, heroku, gem, bundle

我正在使用 sqlite3 开发一个 Rails 应用程序。我想把它推到 Heroku。在 Heroku 教程中，它说我必须首先更改：

```
gem 'sqlite3' 
```

到

```
gem 'pg' 
```

并运行

```
bundle install 
```

我收到了这个错误：

```
 Installing pg (0.14.1) with native extensions 
 Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
 ...
 Can't find the PostgreSQL client library (libpq)
 *** extconf.rb failed ***
 Could not create Makefile due to some reason, probably lack of
 necessary libraries and/or headers.  Check the mkmf.log file for more
 details.  You may need configuration options.
 ... 
```

接下来我尝试了[这里](https://stackoverflow.com/questions/9668753/rails-3-cant-install-pg-gem)提出的解决方案：

```
 running gem install pg -- --with-pg-config= /usr/bin/pg_config 
```

我也尝试过运行：

```
 sudo apt-get install postgresql
 sudo apt-get install libpq-dev 
```

和

```
 gem install pg 
```

工作正常..

但

```
 bundle install 
```

仍然给我同样的错误

注意：我使用的是 rvm

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T20:07:40.357

你试过了吗

```
group :development, :test do
  gem 'sqlite3'
end

group :production do
  gem 'pg'
end 
```

在你的gemfile中，这样你就可以在开发中使用sqlite，当你推送到heroku作为生产时，它将是pg。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T20:12:38.597

将您的 gemfile 更改为以下内容：

```
gem 'sqlite3', :group => :development
gem 'pg', :group => :production 
```

这样，您将在开发中本地使用 SQL。Heroku 将忽略 sqlite gem，而使用 Postgres。

# sql - SQLPlus 列宽

> ID：13769717
> 
> 赞同：-1
> 
> 时间：2012-12-07T19:26:07.957
> 
> 标签：sql, oracle, sqlplus

`COLUMN Column_name FORMAT a15`适用于具有字符串值的列。当我尝试将它用于整数列时，它只给出###########。如何用整数值更改列的宽度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T19:34:23.380

格式化数字列以显示 15 位数字

```
COLUMN number_column FORMAT 999999999999999 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T02:14:35.203

贾斯汀回答的后续行动（文档参考）：

> 要更改 NUMBER 列的宽度，请使用 FORMAT 后跟表 12-1“数字格式”中指定的元素。

[表 12-1 数字格式](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12013.htm#BABBDHHE)

# php - PHP 如何调整可用性时区

> ID：13769718
> 
> 赞同：0
> 
> 时间：2012-12-07T19:26:09.760
> 
> 标签：php, timezone

当用户注册我的网站时，他们以这种格式输入他们的每周可用性：

周一 1300 至 1400 周一 2100 至 2200

周二 1200 至 1300 周二 1400 至 1500

等等。

他们还根据选择菜单（例如 America/Los_Angeles）指示他们的时区。

我想要发生的是根据访问设置了不同时区的个人资料的用户的时区来调整这些时间。什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:28:25.223

将他们的可用性存储为 EPOCH 的秒数，然后根据用户的时区将其转换为适当的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:35:44.633

将 UTC 和所选时区之间的差异存储在字段值中

```
<option value="3">UTC+3 timezone</option>
<option value="-5">UTC-5 timezone</option> 
```

然后将其添加或减少到小时的输出。如果这种差异提供负面结果或超过 24 小时 - 设置一周的下一天或前一天。

我认为你真的不需要 unixtime 这样的时间间隔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T23:11:42.607

我实际上最终这样做了：

```
<?php while ($ava = mysql_fetch_array($avail_action)) { 
    date_default_timezone_set($profile_owners_timezone);
    $timestamp_from = strtotime($ava['time_from']);
    $timestamp_to = strtotime($ava['time_to']);

            date_default_timezone_set($_SESSION['timezone']);
    $time_from = date("g:i A", $timestamp_from);
    $time_to = date("g:i A", $timestamp_to); ?> 
```

基本上我得到了他/她输入的配置文件“所有者”时区，将时区设置为该时区，然后将时区设置为“查看者”时区并将变量设置为该时区。

感谢大家的帮助！

# symfony - 使用 FOSRestBundle 和 Symfony2 在路由中覆盖默认的“.{_format}”

> ID：13769719
> 
> 赞同：2
> 
> 时间：2012-12-07T19:26:10.977
> 
> 标签：symfony, symfony-2.1, fosrestbundle

我想知道是否可以在 FOSRestBundle 方法中定义路由，这些方法指定格式，而不是前面的“点”。

例如，假设我希望以下工作：

```
 http://somesite.com/api/user/20        (renders in the default/fallback format)
 http://somesite.com/api/user/20/json   (renders in JSON)
 http://somesite.com/api/user/20/xml    (renders in XML) 
```

如果我尝试定义如下路线：

```
/**
 * @Get("/user/{id}/{_format}
 */
public function getUserAction($id)
{
  // do stuff
} 
```

我明白了：

`Route pattern "/api/users/{maximum}/{_format}.{_format}" cannot reference variable name "_format" more than once.`

这让我意识到它——而且，我假设我们默认谈论的是 FOSRestBundle 而不是 Symfony2——它会自动将“.{_format}”添加到我定义的任何路由的末尾。我很惊讶！

所以现在，在我之前的例子中，它的工作原理如下：

```
 http://somesite.com/api/user/20        (renders in the default/fallback format)
 http://somesite.com/api/user/20.json   (renders in JSON)
 http://somesite.com/api/user/20.xml    (renders in XML) 
```

可以肯定的是，有一点不同，但是，我正在尝试移植使用此语法的旧版应用程序。我正在尝试做的事情可能吗？如果是这样，我怎样才能禁用自动添加“。{_format}”到每条路线？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-15T23:50:17.293

一年多过去了，FOSRestBundle 现在支持我在上面寻找的功能。

您可以通过以下配置控制此行为：

```
fos_rest:
    routing_loader:
        default_format:       ~
        include_format:       true 
```

设置为`include_format`从`false`路由中删除格式。

[您可以在此处](http://symfony.com/doc/master/bundles/FOSRestBundle/configuration-reference.html)查看 FOSRestBundle 的扩展配置选项。

# jquery - 使用jquery在表中获取具有相同ID的文本框的值？

> ID：13769720
> 
> 赞同：1
> 
> 时间：2012-12-07T19:26:11.030
> 
> 标签：jquery, html

```
<table class="csstable">
    <tr>
       <td>
       <textarea id="txtOption" rows="2" cols="30">hi this is me!!!</textarea>
       </td>
    </tr>
    <tr>
       <td>
       <textarea id="txtOption" rows="2" cols="30">hi this is you!!!</textarea>
       </td>
    </tr> 
```

我做了什么：

```
 $(".csstable").each(function(){
       alert($("#txtOption").val());
      }); 
```

我在这两个时间都得到了文本区域的第一个值，即。**嗨，这是我！！！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:27:18.610

一个页面上不能有两个具有相同值的 id，这是无效的。

ID 必须是唯一的。

尝试使用一个类（或其他东西）来选择

```
<textarea class="txtoption1" rows="2" cols="30">option1</textarea>

<textarea class="txtoption2" rows="2" cols="30">option2</textarea> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T19:29:35.753

当您有多个具有相同 id 的元素时，您将只匹配第一个元素。

因此，请改用`class`标签名称或使用唯一 ID 获取它。

然后您可以通过以下方式获得它的价值。

```
$(".csstable .myTextareaClass").each(function(){
    alert($(this).val());
}); 
```

或者

```
$(".csstable textarea").each(function(){
    alert($(this).val());
}); 
```

或者

```
alert($('#textareaId').val()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T19:27:54.660

每个 id 必须是**唯一**的，因为它被调用`id`是有原因的。

相反，您应该使用`class`属性

```
<textarea class="txtOption" rows="2" cols="30">hi this is you!!!</textarea> 
```

**[你可以在这里](http://www.w3schools.com/css/css_id_class.asp)**阅读更多关于它的信息

# c# - Metro 应用，在 Windows 应用商店中查询当前应用

> ID：13769726
> 
> 赞同：3
> 
> 时间：2012-12-07T19:26:40.467
> 
> 标签：c#, xaml, windows-8, microsoft-metro

如何在另一个 App 中从 Windows Store 中查询 App Icons、Reviews、Stars、Price 等数据？例如，将一个名为“最佳绘图工具”的应用与 5 个流行的绘图工具应用进行比较，然后链接到 Window Store（或者甚至更好的直接安装链接）。

应用程序“Great Windows Apps”（http://www.greatwindowsapps.com）的前提似乎是我试图模仿的基本功能。

我还发现 MetroStore Scanner [http://metrostore.preweb.sk](http://metrostore.preweb.sk)似乎可以从网络查询 Windows 商店，但我希望从另一个应用程序查询。

我已经研究了一段时间，似乎找不到一个好的起点或资源。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T08:34:02.687

这是站点地图的链接：http: [//apps.microsoft.com/windows/sitemap/sitemap_1.xml](http://apps.microsoft.com/windows/sitemap/sitemap_1.xml)

巨大的文件:) 还有更多，只需将 1 更改为 2、3...

# angularjs - Angular js 从默认值初始化 ng-model

> ID：13769732
> 
> 赞同：126
> 
> 时间：2012-12-07T19:27:00.250
> 
> 标签：angularjs

假设您有一个从数据库加载值的表单。你如何初始化 ng-model？

例子：

```
<input name="card[description]" ng-model="card.description" value="Visa-4242"> 
```

在我的控制器中， $scope.card 最初是未定义的。除了做这样的事情，还有什么办法吗？

```
$scope.card = {
  description: $('myinput').val()
} 
```

* * *

## 回答 #1

> 赞同：237
> 
> 时间：2012-12-08T06:31:47.137

如果您无法按照@blesh 的建议重新设计您的应用程序（使用 $http 或 $resource 下拉 JSON 数据并填充 $scope），您可以改用[ng-init](http://docs.angularjs.org/api/ng.directive:ngInit)：

```
<input name="card[description]" ng-model="card.description" ng-init="card.description='Visa-4242'"> 
```

另请参阅[AngularJS - 使用 ng-model 时忽略输入文本框上的值属性？](https://stackoverflow.com/questions/10610282/angularjs-value-attribute-on-an-input-text-box-is-ignored-when-there-is-a-ng-m)

* * *

## 回答 #2

> 赞同：136
> 
> 时间：2012-12-07T21:24:44.350

这是新 Angular 应用程序中的常见错误。如果可以避免的话，您不想将值写入服务器上的 HTML。事实上，如果您可以避免让服务器完全呈现 HTML，那就更好了。

理想情况下，您希望发送您的 Angular HTML 模板，然后通过 JSON 中的 $http 提取您的值并将它们放入您的范围。

因此，如果可能，请执行以下操作：

```
app.controller('MyController', function($scope, $http) {
    $http.get('/getCardInfo.php', function(data) {
       $scope.card = data;
    });
});

<input type="text" ng-model="card.description" /> 
```

如果您绝对必须将您的值从您的服务器呈现到您的 HTML 中，您可以将它们放在一个全局变量中并使用 $window 访问它们：

在页面的标题中，您会写出：

```
<head>
   <script>
       window.card = { description: 'foo' };
   </script>
</head> 
```

然后在你的控制器中你会得到它：

```
app.controller('MyController', function($scope, $window) {
   $scope.card = $window.card;
}); 
```

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2013-07-24T01:12:13.033

这是 AngularJS 的一个明显缺乏但很容易添加的修复。只需编写一个快速指令即可从输入字段设置模型值。

```
<input name="card[description]" value="Visa-4242" ng-model="card.description" ng-initial> 
```

这是我的版本：

```
var app = angular.module('forms', []);

app.directive('ngInitial', function() {
  return {
    restrict: 'A',
    controller: [
      '$scope', '$element', '$attrs', '$parse', function($scope, $element, $attrs, $parse) {
        var getter, setter, val;
        val = $attrs.ngInitial || $attrs.value;
        getter = $parse($attrs.ngModel);
        setter = getter.assign;
        setter($scope, val);
      }
    ]
  };
}); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-02-13T14:22:20.987

恕我直言，最好的解决方案是@Kevin Stone 指令，但我必须升级它才能在各种条件下工作（fe select、textarea），而这个肯定可以工作：

```
 angular.module('app').directive('ngInitial', function($parse) {
        return {
            restrict: "A",
            compile: function($element, $attrs) {
                var initialValue = $attrs.value || $element.val();
                return {
                    pre: function($scope, $element, $attrs) {
                        $parse($attrs.ngModel).assign($scope, initialValue);
                    }
                }
            }
        }
    }); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-10-20T20:09:30.943

您可以使用自定义指令（支持 textarea、select、radio 和 checkbox），查看这篇博文[https://glaucocustodio.github.io/2014/10/20/init-ng-model-from-form-字段属性/](https://glaucocustodio.github.io/2014/10/20/init-ng-model-from-form-fields-attributes/)。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-10-16T04:30:25.390

您还可以在 HTML 代码中使用： `ng-init="card.description = 12345"`

Angular 不建议这样做，如上所述，您应该专门使用您的控制器。

但它有效:)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-01-18T01:39:09.377

我有一个简单的方法，因为我的表单中有一些繁重的验证和掩码。因此，我使用 jquery 再次获取我的值并将事件“更改”触发到验证：

```
$('#myidelement').val('123');
$('#myidelement').trigger( "change"); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-03-13T12:54:31.640

正如其他人指出的那样，在视图上初始化数据并不是一个好习惯。但是，建议在 Controller 上初始化数据。（见[http://docs.angularjs.org/guide/controller](http://docs.angularjs.org/guide/controller)）

所以你可以写

```
<input name="card[description]" ng-model="card.description"> 
```

和

```
$scope.card = { description: 'Visa-4242' };

$http.get('/getCardInfo.php', function(data) {
   $scope.card = data;
}); 
```

这样视图不包含数据，并且控制器在加载实际值时初始化值。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-03-21T19:07:39.943

如果您喜欢 Kevin Stone 在[https://stackoverflow.com/a/17823590/584761](https://stackoverflow.com/a/17823590/584761)上的方法，请 考虑通过为特定标签（例如“输入”）编写指令来更简单的方法。

```
app.directive('input', function ($parse) {
    return {
        restrict: 'E',
        require: '?ngModel',
        link: function (scope, element, attrs) {
            if (attrs.ngModel) {
                val = attrs.value || element.text();
                $parse(attrs.ngModel).assign(scope, val);
            }
        }
    }; }); 
```

如果你走这条路，你就不必担心将 ng-initial 添加到每个标签。它自动将模型的值设置为标签的 value 属性。如果您不设置 value 属性，它将默认为空字符串。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-09-04T01:33:51.683

这是一种以服务器为中心的方法：

```
<html ng-app="project">
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"></script>
    <script>
        // Create your module
        var dependencies = [];
        var app = angular.module('project', dependencies);

        // Create a 'defaults' service
        app.value("defaults", /* your server-side JSON here */);

        // Create a controller that uses the service
        app.controller('PageController', function(defaults, $scope) {
            // Populate your model with the service
            $scope.card = defaults;
        });
    </script>

    <body>
        <div ng-controller="PageController">
            <!-- Bind with the standard ng-model approach -->
            <input type="text" ng-model="card.description">
        </div>
    </body>
</html> 
```

[除了$provide.value](https://docs.angularjs.org/api/auto/service/$provide#value)注册了一个包含您的默认值的服务之外，这与此问题上更流行的答案的基本思想相同。

所以，在服务器上，你可以有类似的东西：

```
{
    description: "Visa-4242"
} 
```

并通过您选择的服务器端技术将其放入您的页面。这是一个要点：[https ://gist.github.com/exclsr/c8c391d16319b2d31a43](https://gist.github.com/exclsr/c8c391d16319b2d31a43)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-01-17T22:12:19.780

这个是上面提到的想法的一个更通用的版本......它只是检查模型中是否有任何值，如果没有，它将值设置给模型。

JS：

```
function defaultValueDirective() {
    return {
        restrict: 'A',
        controller: [
            '$scope', '$attrs', '$parse',
            function ($scope, $attrs, $parse) {
                var getter = $parse($attrs.ngModel);
                var setter = getter.assign;
                var value = getter();
                if (value === undefined || value === null) {
                    var defaultValueGetter = $parse($attrs.defaultValue);
                    setter($scope, defaultValueGetter());
                }
            }
        ]
    }
} 
```

HTML（使用示例）：

```
<select class="form-control"
        ng-options="v for (i, v) in compressionMethods"
        ng-model="action.parameters.Method"
        default-value="'LZMA2'"></select> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-02-20T03:32:49.947

我尝试了@Mark Rajcok 的建议。它适用于字符串值（Visa-4242）。请参考这个[小提琴](http://jsfiddle.net/n3ngV/)。

从小提琴：

在小提琴中完成的同样的事情可以使用 来完成`ng-repeat`，每个人都可以推荐。但是在阅读了@Mark Rajcok 给出的答案之后，我只是想尝试对具有配置文件数组的表单进行相同的操作。在我拥有 $scope.profiles = [{},{}]; 之前一切正常 控制器中的代码。如果我删除此代码，我会收到错误消息。但在正常情况下`$scope.profiles = [{},{}];` ，当我从服务器打印或回显 html 时，我无法打印。是否有可能以与@Mark Rajcok 对字符串值类似的方式执行上述操作`<input name="card[description]" ng-model="card.description" ng-init="card.description='Visa-4242'">`，而不必从服务器回显 JavaScript 部分。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-02-01T10:45:12.877

刚刚向 Ryan Montgomery “修复”添加了对选择元素的支持

```
<select class="input-control" ng-model="regCompModel.numberOfEmployeeId" ng-initial>
    <option value="1af38656-a752-4a98-a827-004a0767a52d"> More than 500</option>
    <option value="233a2783-db42-4fdb-b191-0f97d2d9fd43"> Between 250 and 500</option>
    <option value="2bab0669-550c-4555-ae9f-1fdafdb872e5"> Between 100 and 250</option>
    <option value="d471e43b-196c-46e0-9b32-21e24e5469b4"> Between 50 and 100</option>
    <option value="ccdad63f-69be-449f-8b2c-25f844dd19c1"> Between 20 and 50</option>
    <option value="e00637a2-e3e8-4883-9e11-94e58af6e4b7" selected> Less then 20</option>
</select>

app.directive('ngInitial', function () {
return {
    restrict: 'A',
    controller: ['$scope', '$element', '$attrs', '$parse', function ($scope, $element, $attrs, $parse) {
        val = $attrs.sbInitial || $attrs.value || $element.val() || $element.text()
        getter = $parse($attrs.ngModel)
        setter = getter.assign
        setter($scope, val)
    }]
} 
```

});

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-07-31T05:49:40.810

如果您在 URL 中有 init 值`mypage/id`，那么在 Angular JS 的控制器中，您可以使用`location.pathname`它来查找 id 并将其分配给您想要的模型。

# c - 从Linux C程序中的资源文件附加到现有文件

> ID：13769733
> 
> 赞同：0
> 
> 时间：2012-12-07T19:27:06.600
> 
> 标签：c, linux, append, mode

我正在尝试使用 Linux 中的 C 编程从资源文件中追加到现有文件。但是，我的代码对此不起作用，any1 可以告诉我代码有什么问题以及 O_APPEND 是如何工作的吗？谢谢 ：）

```
char ifile[150];
char tfile[150];
char cc;

system("clear");
printf("Please enter your resource file name : ");
gets(ifile);
printf("Please enter your destination file name : ");
gets(tfile);

int in, out;

in = open(ifile, O_RDONLY);
int size = lseek(in,0L,SEEK_END);
out = open(tfile, O_WRONLY |O_APPEND);
char block[size];
int pdf;
while(read(in,&block,size) == size)
    pdf = write(out,&block,size);
close(in);close(out);
if(pdf != -1)
    printf("Successfully copy!");
else
    perror("Failed to append! Error : ");
printf("Press enter to exit...");
do
{
    cc = getchar();
} while(cc != '\n'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T20:09:30.730

这里的问题是您将读取光标移到文件末尾以了解其大小，但您不会倒退到文件的开头以便能够读取。所以`read()`读取`EOF`，然后返回`0`。

```
int size = lseek(in, 0L, SEEK_END);
out = open(tfile, O_WRONLY | O_APPEND); 
```

应该

```
int size = lseek(in, 0L, SEEK_END);
lseek(in, 0L, SEEK_SET);
out = open(tfile, O_WRONLY | O_APPEND); 
```

另外，在读写时，应该使用`block`and not `&block`，因为`block`已经是指针（或地址）。

哦，还有...当您打开文件`out`进行写入时...如果文件不存在，它将失败。

这里如何使用权限设置为 644 创建它：

```
out = open(tfile, O_WRONLY | O_APPEND | O_CREAT, S_IRUSR | S_IWUSR | S_IRGRP | S_IROTH); 
```

（如果文件已经存在，这不会有任何影响）

# video - 当前的视频聊天技术

> ID：13769735
> 
> 赞同：0
> 
> 时间：2012-12-07T19:27:11.793
> 
> 标签：video, web

作为一种爱好，我想建立一个允许人们进行视频对话的网站。问题是有哪些技术可以实现它？例如，[chatroulette.com](http://chatroulette.com/)使用 Flash。还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:32:14.853

截至 2012 年底，Flash 确实是最适合在网络中实现视频聊天的方法。HTML5 中的最新技术仍然没有提供用于在客户端捕获网络摄像头视频的有效 API。*[WebRTC](http://en.wikipedia.org/wiki/WebRTC)*`getUserMedia`有望将此类 API 引入 HTML，但需要一段时间才能最终确定并得到完全支持，尽管最新的浏览器已经支持您需要的核心功能（即API 调用）。

您可以查看[这篇](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)关于临时支持的 API 的文章。或者只使用 Flash。

# c++ - 在 C++ 中使用 QProcess 重定向来自 gnome-terminal 的输出

> ID：13769741
> 
> 赞同：4
> 
> 时间：2012-12-07T19:27:46.237
> 
> 标签：c++, linux, qt, qprocess, gnome-terminal

我正在尝试为将产生终端的 gui 生成一个子进程。我希望此终端（stdout 和 stderr）生成的数据显示在出现的窗口以及设置的日志文件中。当我将命令直接输入到 shell 时，它按预期工作，但是当作为启动命令提供给 QProcess 时，它实际上并没有向文件写入任何内容。

例如：如果用户没有安装二进制文件，它应该向 bin.log 写入找不到命令。我已将生成的 QProcess 的环境设置为与正在运行的父进程相同（以便它可以找到 bash 和其他任何内容），并在调用 QProcess.start() 方法之前设置了工作目录。我写了一个测试用例，如下：

```
gnome-terminal --title 'Sub-Terminal' -e 'bash -c "foo [args to foo] |& tee foo.log"' 
```

在 Qt 中，我执行以下操作：

```
QProcess *child = new QProcess(this);
QString   cmd   = "gnome-terminal --title 'Sub-Terminal' -e 'bash -c \"foo [args to foo] |& tee foo.log\"'";
child->setProcessEnvironment(<process environment I have created before>);
child->setWorkingDirectory(<current working dir>);
child->start(cmd);
... 
```

它生成终端但不向 foo.log 写入任何数据。我还尝试了以下方法：

```
QProcess *child = new QProcess(this);
QString   prog  = "gnome-terminal"
QStringList args;
args << "-x" << "bash" << "foo" << "[foo's arguments]" << "|&" << "tee" << "foo.log";
// set the process env and working dir
child->start(prog, args); 
```

有人对如何解决这个问题有任何建议吗？我尝试使用 QProcess.setStandardErrorFile(foo.log) 和 QProcess.setStandardOutputFile(foo.log) 重定向 stdout 和 stderr，但似乎这会从 gnome 终端本身重定向标准输出（这不是什么）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:57:49.817

您必须提供要在终端中执行的整个命令作为`QProcess`after的单个参数`"-e"`，以及要在 bash 中执行的命令作为 bash 的单个参数：

```
args << "-e" << "bash -c 'foo [args to foo] |& tee foo.log'"; 
```

这基本上执行

```
bash -c 'foo [args to foo] |& tee foo.log' 
```

在终端中，它自己执行

```
foo [args to foo] |& tee foo.log 
```

在 bash 中。

您的猜测是正确的，即从`gnome-terminal`流程中读取输出不起作用。

# android - 如何在android中获取广播接收器的ID

> ID：13769744
> 
> 赞同：4
> 
> 时间：2012-12-07T19:27:51.750
> 
> 标签：android, broadcastreceiver, alarmmanager, android-pendingintent

我想获得**`broadcastriver`**.

有什么办法可以找到`id`吗**`broadcastreciver`**？？我正在制作一个**警报应用程序**，并在保存警报时，我发送了一个`broadcast`using `pending intent`. 现在，如果用户编辑警报，我想中止该`broadcast`指定并发送新`broadcast`的新时间？

我怎样才能做到这一点？？？？

我正在使用此代码进行广播

```
Intent intent = new Intent(this, StartProfileBroadcastReceiver.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(
                this.getApplicationContext(), 234324243, intent, 0);

        AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
        alarmManager.set(AlarmManager.RTC_WAKEUP, StartTimemill, pendingIntent); 
```

在清单中，我使用此代码注册了我的 Broadcastreciver

```
 <receiver android:name="StartProfileBroadcastReceiver" >
 </receiver> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T21:19:20.770

你可以通过这个项目在我的[github](https://github.com/talhakosen/AlarmMenager)上找到这个项目，你可以设置很多警报，并且可以捕获已取消的警报。

需要保持警报类才能获取特定数据

**报警器.java**

```
public class Alarm {
    public int getState() {
        return state;
    }

    public void setState(int state) {
        this.state = state;
    }

    public int getUniqueID() {
        return uniqueID;
    }

    public void setUniqueID(int uniqueID) {
        this.uniqueID = uniqueID;
    }

    private int state;
    private int uniqueID;

} 
```

AlarmHolder 是单例的，并将警报保存在数组列表中

**AlarmHolder.java**

```
import java.util.ArrayList;

public class AlarmHolder{
      private static AlarmHolder uniqueAlarmHolder;   
      private ArrayList<Alarm> lAlarms;

      private AlarmHolder() {         
          lAlarms = new ArrayList<Alarm>();
      }

      public  synchronized static AlarmHolder getInstance()     
      {
          if (uniqueAlarmHolder == null) {
              uniqueAlarmHolder = new AlarmHolder();
            }
            return uniqueAlarmHolder;
      }   

      public void registerAlarm(int id) {
          Alarm a = new Alarm();
          a.setState(1);
          a.setUniqueID(id);

          lAlarms.add(a);
        }

      public void removeAlarm(int id,Alarm a) {
          Alarm newAlarm = new Alarm();
          a.setState(0);
          a.setUniqueID(id);

          lAlarms.remove(id);
          lAlarms.add(newAlarm);          
        }

      public void replaceList(ArrayList<Alarm> newList) {
          lAlarms.clear();
           lAlarms.addAll(newList);       
        }

      public ArrayList<Alarm> getAlarms() {
            return lAlarms;
        }

      public Alarm lastAlarmId() {
            return lAlarms.get(lAlarms.size()-1);
        }
  } 
```

**MyBroadcastReceiver.java**

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Vibrator;
import android.util.Log;
import android.widget.Toast;

public class MyBroadcastReceiver extends BroadcastReceiver {
    AlarmHolder objAlarmHolder = AlarmHolder.getInstance();

    @Override
    public void onReceive(Context context, Intent intent) {

            // with this key we can catch the alarm which we want
        int key = intent.getIntExtra("key",0);

        for (Alarm alarm : objAlarmHolder.getAlarms()) {
            // if alarmstate is 1 and the key belogs that alarm device will vibrate
            if (alarm.getState() == 1 & alarm.getUniqueID() == key ) {
                Log.v("alarm", String.valueOf(String.valueOf(alarm.getUniqueID())));
                Toast.makeText(context, "your alarm id : " + String.valueOf(alarm.getUniqueID()),Toast.LENGTH_LONG).show();
                Vibrator vibrator = (Vibrator) context.getSystemService(Context.VIBRATOR_SERVICE);
                vibrator.vibrate(2000);
            } else {
                Log.v("alarm", "canceled alarm number : " + String.valueOf(alarm.getUniqueID()));
            }

        }

    }

} 
```

**MainActivity.java**

```
import java.util.ArrayList;
import android.app.Activity;
import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class MainActivity extends Activity {
    EditText text;
    int uniqueInteger = 1;
    AlarmHolder objAlarmHolder = AlarmHolder.getInstance();
    ArrayList<Alarm> tempAlarmHolder = new ArrayList<Alarm>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        text = (EditText) findViewById(R.id.editText1);

        Button btn = (Button) findViewById(R.id.button1);

        btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                            // we should pass unique integer to method 
                startAlert(uniqueInteger);
                uniqueInteger++;
            }
        });
    }

    public void startAlert(int rnd) {
        int i = Integer.parseInt(text.getText().toString());
        Bundle bundle = new Bundle();
        bundle.putInt("key", uniqueInteger);

        objAlarmHolder.registerAlarm(uniqueInteger);

        int alarmCount = 0;
        tempAlarmHolder.clear();

            // in this loop, all old alarms' state will set as 0
        for (Alarm alarm : objAlarmHolder.getAlarms()) {

            if(alarmCount < objAlarmHolder.getAlarms().size()-1)
            {
                Alarm objAlarm = new Alarm();
                objAlarm.setState(0);
                objAlarm.setUniqueID(alarmCount);               
                tempAlarmHolder.add(objAlarm);              
            }
            else
            {
                tempAlarmHolder.add(alarm);             
            }           
            alarmCount++;
        }

        objAlarmHolder.replaceList(tempAlarmHolder);

        AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
        alarmManager.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()
                + (i * 1000), getPendingIntent(bundle, uniqueInteger));
        Toast.makeText(this, "Alarm set in " + i + " seconds",
                Toast.LENGTH_LONG).show();
    }

    private PendingIntent getPendingIntent(Bundle bundle, int rc) {
        Intent intent = new Intent(MainActivity.this, MyBroadcastReceiver.class);

            // send alarm id to broatcast
        intent.putExtras(bundle);
        return PendingIntent.getBroadcast(this, rc, intent,
                PendingIntent.FLAG_UPDATE_CURRENT);
    }
} 
```

**清单.xml**

```
 <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
   <uses-permission android:name="android.permission.VIBRATE" ></uses-permission>
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver android:name="MyBroadcastReceiver" >
        </receiver>
    </application> 
```

**activity_main.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="65dp"
        android:ems="10" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/editText1"
        android:layout_centerHorizontal="true"
        android:text="Button" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T20:16:23.043

您可以：

1.  保留对您在 中注册的`PendingIntent`对象的引用，并在您注册新警报时`AlarmManager`调用以取消它。`PendingIntent.cancel`
2.  `FLAG_CANCEL_CURRENT`创建`PendingIntent`. _

使用这两种方法，创建新警报时将删除旧警报。

# jsf-2 - JSF 2：防止会话用户登录之间共享托管 bean

> ID：13769753
> 
> 赞同：0
> 
> 时间：2012-12-07T19:28:39.127
> 
> 标签：jsf-2

我在使用托管 bean JSF 2.0 中的属性时遇到了麻烦。

1.  显示.xhtml

    ```
    <p:commandButton value="Show" actionListener="#{ABean.ajaxShow}" update="info" />
    <p:commandButton value="Hide" actionListener="#{ABean.ajaxHide}" update="info" />
       <p:outputPanel id="info">
        <p:fieldset rendered="#{ABean.show}">
           Info
        </p:fieldset>
    </p:outputPanel> 
    ```

2.  ABean.java

    @Named("ABean")

    公共类 ABean { 私有布尔显示；

    ```
    public void ajaxShow() {
        show = true;
    }

    public void ajaxHide() {
        show = false;
    }

    //getter setter 
    ```

    }

这个项目是设置spring security 3.1.2和管理用户系统。

当有 2 个用户登录并打开此页面时，用户 1 单击“显示”按钮，然后显示“信息”。因此，当用户 2 转到此页面时，他会看到显示的信息。如果用户 2 单击隐藏按钮，则信息被隐藏。刷新用户 1 访问的此页面，信息被隐藏。

那很奇怪。我需要用户 1 访问的页面仅在用户 1 单击按钮时更改信息状态（显示/隐藏），而不是由用户 2 在用户 2 的页面上引起的。

我认为这是因为 2 个用户的 2 个会话仅使用 1 个托管 bean 实例。我该怎么办？请帮我解决，谢谢！

PS：我尝试为 ABean 添加@SessionScoped、@ViewScoped、@RequestScoped，但没有任何改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T07:41:26.513

I found solution for this problem. But I don't understand why can't use BalusC 's solution (I think it 's right, but...)
I use

```
import org.springframework.context.annotation.Scope;  
@Named
@Scope("request") // or use session,.. 
```

So, everything work successfully. If you know, please let me know why it works when I use Scope from springframework.context.annotation package. Thank you!

# c# - 如何使用只替换第一次出现的 www

> ID：13769759
> 
> 赞同：2
> 
> 时间：2012-12-07T19:29:03.163
> 
> 标签：c#, .net, regex, replace, substring

在 C# 后面的代码中，我有以下代码。如何更改替换，以便只替换第一次出现的 www？例如，如果用户输入 www.testwww.com，那么我应该将其保存为 testwww.com。目前按照下面的代码，它保存为 www.com（猜测是由于 substr 代码）。请帮忙。提前致谢。

```
private string FilterUrl(string url)
    {
        string lowerCaseUrl = url.ToLower();
        lowerCaseUrl = lowerCaseUrl.Replace("http://", string.Empty).Replace("https://", string.Empty).Replace("ftp://", string.Empty);
        lowerCaseUrl = lowerCaseUrl.Replace("www.", string.Empty);

        string lCaseUrl = url.Substring(url.Length - lowerCaseUrl.Length, lowerCaseUrl.Length);
        return lCaseUrl; 
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T19:41:33.533

正如艾莉建议的那样。你最好使用`System.Uri`. 这也可以根据需要替换领先的 www。

```
private string FilterUrl(string url)
{
    Uri uri = new UriBuilder(url).Uri; // defaults to http:// if missing
    return Regex.Replace(uri.Host, "^www.", "") + uri.PathAndQuery;
} 
```

编辑：尾部斜杠是因为 PathAndQuery 属性。如果没有路径，则只剩下斜杠。只需添加另一个正则表达式替换或字符串替换。这是正则表达式的方式。

```
return Regex.Replace(uri.Host, "^www.", "") + Regex.Replace(uri.PathAndQuery, "/$", ""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:34:58.583

该`Replace`方法将更改字符串的所有内容。您必须使用方法找到要删除的部分`IndexOf`，并使用`Remove`字符串的方法删除。尝试这样的事情：

```
//include the namespace
using System.Globalization;

private string FilterUrl(string url)
{
    // ccreate a Comparer object.
    CompareInfo myCompare = CultureInfo.InvariantCulture.CompareInfo;

    // find the 'www.' on the url parameter ignoring the case.
    int position = myCompare.IndexOf(url, "www.", CompareOptions.IgnoreCase);

    // check if exists 'www.'  on the string.
    if (position > -1)
    {
      if (position > 0)
         url = url.Remove(position - 1, 5);
      else
         url = url.Remove(position, 5);
    }

    //if you want to remove http://, https://, ftp://.. keep this line
    url = url.Replace("http://", string.Empty).Replace("https://", string.Empty).Replace("ftp://", string.Empty);

    return url;
} 
```

## 编辑

您的代码中有一部分正在删除一段字符串。如果您只想删除“www.” 和'http://'、'https://'、'ftp://'，看看这段代码。

此代码在比较 url 参数和您所找到的内容时也会忽略大小写，例如“www.”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T19:35:37.410

我建议使用 indexOf(string) 来查找第一个匹配项。

编辑：好吧，有人打败了我；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T19:39:20.657

您可以像 Felipe 建议的那样使用 IndexOf 或以低技术的方式进行操作。

```
 lowerCaseUrl = lowerCaseUrl.Replace("http://", string.Empty).Replace("https://", string.Empty).Replace("ftp://", string.Empty).Replace("http://www.", string.Empty).Replace("https://www.", string.Empty) 
```

有兴趣知道您要达到的目标。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T19:45:28.850

想出了一个很酷的静态方法，也适用于替换前 x 次出现：

```
public static string ReplaceOnce(this string s, string replace, string with)
{
    return s.ReplaceCount(replace, with);
}

public static string ReplaceCount(this string s, string replace, string with, int howManytimes = 1)
{
    if (howManytimes < 0) throw InvalidOperationException("can not replace a string less than zero times");
    int count = 0;
    while (s.Contains(replace) && count < howManytimes)
    {
        int position = s.IndexOf(replace);
        s = s.Remove(position, replace.Length);
        s = s.Insert(position, with);
        count++;
    }
    return s;
} 
```

ReplaceOnce**不是**必需的，只是一个简化器。像这样称呼它：

```
string url = "http://www.stackoverflow.com/questions/www/www";

var urlR1 - url.ReplaceOnce("www", "xxx");
// urlR1 = "http://xxx.stackoverflow.com/questions/www/www";

var urlR2 - url.ReplaceCount("www", "xxx", 2);
// urlR2 = "http://xxx.stackoverflow.com/questions/xxx/www"; 
```

注意：这是区分大小写的，因为它是写的

# android - 不选择任何内容进入多选模式

> ID：13769762
> 
> 赞同：3
> 
> 时间：2012-12-07T19:29:12.413
> 
> 标签：android, android-listview

我们的 UX 要求一个按钮来启动多选模式。这将与长按一个项目做同样的事情，但最初不会选择任何内容。

我在代码中看到的是，除非我选择了某些东西，否则我无法进入多选模式模式，如果我取消选择该项目，多选模式就会退出（上下文操作栏关闭）。

我也在其他应用程序（gmail）中尝试过这个，它的工作方式相同。

有没有办法在多选模式下不选择任何项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-09T16:44:29.450

这很 hacky，但我通过选择一个项目来做到这一点，但通过使背景暂时透明，使它看起来没有被选中。当用户随后选择项目时，取消选择秘密选择的项目并且背景恢复正常。或者，如果它是被秘密选择的项目（因此取消选择它），我重新选择它，然后设置一个布尔值以阻止它再次发生。

我还必须在 onItemCheckedStateChanged 中使用计数器，因为我正在从该回调中更改秘密项目的检查状态，从而导致循环。

可能不是所有情况下的理想解决方案，但我认为目前没有其他方法可以做到这一点，因为[AbsListView 不容易扩展。](https://stackoverflow.com/questions/9637759/is-it-possible-to-extend-abslistview-to-make-new-listview-implementations)

编辑：如果屏幕方向发生变化，而选中项的选中状态是隐藏的，它会突然显示为选中，所以你必须确保保存它应该隐藏的事实，并在列表视图被恢复后恢复它重新创建。我必须使用 View post() 方法来确保在配置更改后列表视图完成重绘其所有子项之后进行恢复。

编辑：另一个潜在的问题是，如果用户在没有选择任何项目的情况下尝试执行操作。就应用程序所知，*选择*了一个项目，因此它将对该项目执行操作，除非您确保它没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-17T23:50:50.343

只需致电：

```
mListView.setItemChecked(-1, true); 
```

ListView 的 actionMode 将在不选择任何列表元素的情况下启动。

确保在调用之前正确设置了 ListView：

```
mListView.setMultiChoiceModeListener( ...  )
mListView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
or
mListView.setChoiceMode(ListView.CHOICE_MODE_SINGLE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T19:33:28.000

你只需要使用：

```
listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T19:36:34.723

如果您想更改操作栏，请从您的活动中调用它：

> startActionMode（新的 ActionMode.Callback {
> 
> ```
>  @Override
>     public boolean onCreateActionMode(ActionMode mode, Menu menu) {
>         return false;
>     }
> 
>     @Override
>     public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
>         return false;
>     }
> 
>     @Override
>     public void onDestroyActionMode(ActionMode mode) {
> 
>     }
> 
>   @Override
>     public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
>         return false;
>     }
> }); 
> ```

# jquery-ui - jQuery-UI 日期和时间范围选择器

> ID：13769764
> 
> 赞同：4
> 
> 时间：2012-12-07T19:29:15.847
> 
> 标签：jquery-ui, range, datetimepicker

我正在创建一个页面来管理我们在办公室的时间（例如，当我们在家办公时）。这需要选择日期和时间范围。

我知道 jQuery-UI 中的 Date-Picker，而且时间选择似乎也很有趣。但由于我需要一个开始和结束时间，选择日期和时间范围的 UI 将是完美的。有什么可以推荐的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T19:39:33.553

访问[jQuery UI 日期选择器范围示例](http://jqueryui.com/datepicker/#date-range)并单击“查看源代码”。

结合[此处找到](http://trentrichardson.com/examples/timepicker/)的 jquery timepicking 解决方案。

这应该有希望让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-27T16:23:57.937

另一个有趣的选项是使用单独的 UI 组件处理日期选择器中的日期和时间范围（在这种特定情况下，**开始**时间和**结束**时间在同一天）。

您可以查看这些时间范围滑块：

```
$("#slider-range").slider(options_object); 
```

[http://jsfiddle.net/jrweinb/MQ6VT/](http://jsfiddle.net/jrweinb/MQ6VT/)

[http://marcneuwirth.com/blog/2010/02/21/using-a-jquery-ui-slider-to-select-a-time-range/](http://marcneuwirth.com/blog/2010/02/21/using-a-jquery-ui-slider-to-select-a-time-range/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-08T08:06:24.303

```
$(document).ready(function(){
  $(".datetimepicker").datetimepicker({
      timepicker: true,
      allowTimes: [
          '12:00', '12:30', '13:00','13:30','14:00',
'14:30', '15:00', '15:30', '16:00',   ]
  });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.16/jquery.datetimepicker.full.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.16/jquery.datetimepicker.css">
<input type="text" class="datetimepicker" />
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-16T12:11:30.670

**您可以使用此滑块选择时间。**

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
.slidecontainer {
    width: 100%;
}

.slider {
    -webkit-appearance: none;
    width: 100%;
    height: 10px;
    border-radius: 5px;
    background: #d3d3d3;
    outline: none;
    opacity: 0.7;
    -webkit-transition: .2s;
    transition: opacity .2s;
}

.slider:hover {
    opacity: 1;
}

.slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 23px;
    height: 24px;
    border: 0;
    background: url('https://www.w3schools.com/howto/contrasticon.png');
    cursor: pointer;
}

.slider::-moz-range-thumb {
    width: 23px;
    height: 24px;
    border: 0;
    background: url('https://www.w3schools.com/howto/contrasticon.png');
    cursor: pointer;
}
</style>
</head>
<body>

<div class="slidecontainer">
  <input type="range" min="10" max="22" maxvalue="10" class="slider" id="myRange">
  <p>Value: <span id="demo">4PM</span></p>
</div>

<script>
var slider = document.getElementById("myRange");
var output = document.getElementById("demo");
slider.oninput = function() {
    var time=slider.value;
    if(time<12){
    time=time+'AM';
    }
    else if(time>12){
    time=time-12+'PM';
    }
    else if(time=12){
    time=12+'PM';
    }
    //alert(time);
  output.innerHTML = time;
}
</script>

</body>
</html>
```

# excel - 在外部文件夹中查找

> ID：13769767
> 
> 赞同：0
> 
> 时间：2012-12-07T19:29:21.277
> 
> 标签：excel, vlookup

我有一个带有一些产品 ID 代码的 Excel 表

100-10R 23P901 ......

我有一个存储产品图像的文件夹。图片开头有产品代码，但结尾可能不同。

有谁知道是否可以根据产品代码在外部文件夹中 Vloopup 一张图片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T23:31:35.853

您需要查看 FileSystemObject，因为这可以让您查看与 FileSystem 相关的内容。

我做了一个简单的例子，虽然它可能不会像你试图做的那样做，因为我不完全确定。我希望它很容易理解。

如果将以下代码放在模块中，您将可以访问工作表中的“checkList”函数。

checkList 函数将遍历指定文件夹中的缓存文件名列表，检查参数“Name”是否与列表中存储的任何项目匹配。

缓存的文件列表（FileList 集合）被填充一次，第一次 checkList 由 loadList 子调用。

loadList 子读取您指定的文件夹并将所有文件名添加到集合中。

```
' Global Variable, used to cache the filenames
Public FileList As Collection

' this function returns "" if no match was found, and returns the file name if found.
Public Function checkList(ByVal Name As String) As String
Dim Result As String
Dim Item As Variant

    Result = ""

    If FileList Is Nothing Then
        loadList
    End If

    For Each Item In FileList
        ' Performs a simple match on the filename, probably needs to be adjusted!
        If Item Like Name & "*" Then
            Result = Item
        End If
    Next Item

    checkList = Result

End Function
' populates the FileList collection
Public Sub loadList()
Dim FSO As Object
Dim Folder As Object
Dim File As Object

If FileList Is Nothing Then
    ' First Run, needs to be created
    Set FileList = New Collection
Else
    ' Should not happen unless you call it manually.
    Set FileList = Nothing ' Clear up the old list
    Set FileList = New Collection ' Create a new empty one
End If

Set FSO = CreateObject("Scripting.FileSystemObject")
' Change "C:\" to the location of the folder you want to search
Set Folder = FSO.GetFolder("C:\")

For Each File In Folder.Files
    ' Add the name to the FileList
    FileList.Add File.Name
Next

End Sub 
```

# vb.net - 在 VB.NET 表单中按日期搜索条件从 Access 数据库中选择行

> ID：13769768
> 
> 赞同：1
> 
> 时间：2012-12-07T19:29:20.747
> 
> 标签：vb.net, date, datepicker, ms-access-2007

我有一个非常简单的问题。我的 VB.NET 表单上有几个日期选择器控件，用户选择“startDate”和“endDate”，并显示相关表中的所有行，这些行在`orderDate`用户选择的开始日期和结束日期之间。

以下是相关代码：

```
Private Sub generate_report_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles generate_report.Click
    Try
        Dim con As New OleDb.OleDbConnection
        con.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\KHMSDB.accdb"
        con.Open()
        Dim sql As String
        Dim selected As String = ""
        Dim ds As DataSet = New DataSet

        Dim adapter As New OleDb.OleDbDataAdapter
        sql = "SELECT OrderDate AS `Order Date and Time`, Items AS `Ordered Items` FROM Orders WHERE Format(Orders.OrderDate,'mm/dd/yyyy') >= #" + startDate.Value.Date + "# AND Format(Orders.OrderDate,'mm/dd/yyyy') <= #" + endDate.Value.Date + "#"
        adapter.SelectCommand = New OleDb.OleDbCommand(sql, con)
        adapter.Fill(ds)
        gridReport.DataSource = ds.Tables(0)

    Catch ex As Exception

        MsgBox("Operation failed. " + ex.ToString)

    End Try 
```

如果我在今天的日期下在数据库中保存一个新行，并将“开始”和“结束”日期都保​​留为默认日期（即今天的日期），它不会显示我刚刚保存的新行。只有当我将“开始日期”移至 11 月 30 日时，今天输入的新行才会显示。然后我添加一个日期为 12 月 12 日的新行。同样，当我选择结束日期为 >= 12 月 12 日时它不会显示，它只会在我将开始日期移至 12 月 1 日时显示。我决定输入日期为 11 月 21 日的行，并在 11 月 21 日运行开始日期和结束日期的查询会显示该行。然后我在 1 月 8 日输入了一个新行。现在向上移动 startDate 和/或向下移动 endDate 的任何组合都不会显示一月份的订单。这是怎么回事？？我'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:45:40.027

这可能是字符串格式的问题。我不确定 Access 是否会将字符串转换为日期然后进行比较或将日期转换为字符串然后进行比较。你可以试试这个：

`Format(Orders.OrderDate,'mm/dd/yyyy') >= Format(#" + startDate.Value.Date + "#,'mm/dd/yyyy')`

或者你可以直接使用日期，

`OrderDate >= #" + startDate.Value.Date + "#"`

**编辑**：，做我的尽职调查，你真的应该做这样的查询

```
OrderDate >= @StartDate 
```

然后添加此代码

```
adapter.Parameters.Add("@StartDate", startDate.Value.Date); 
```

使用参数对于健壮的代码和避免可怕的 SQL 注入攻击很重要。

# c# - 获取缓存以每小时每半小时更新一次变量

> ID：13769771
> 
> 赞同：0
> 
> 时间：2012-12-07T19:29:29.537
> 
> 标签：c#, .net, caching

我缓存了一个 .net 应用程序变量。我想要做的是让缓存在每小时、1、1.30、2、2.30 等每半小时回收一次变量。我设置了 onRemoveCallback 函数并且一切正常，我真正的问题是生成的最佳方法是什么正确的 absoluteExpiration 值？

```
DateTime time_to_expire = DateTime.Now;
            if (time_to_expire.Minute < 29)
            {
                time_to_expire = new DateTime(DateTime.Now.Year, DateTime.Now.Month, DateTime.Now.Day, DateTime.Now.Hour, 30, 0);
            }
            else
            {
                time_to_expire = new DateTime(DateTime.Now.Year, DateTime.Now.Month, DateTime.Now.Day, DateTime.Now.Hour + 1, 0, 0);
            } 
```

我将 time_to_expire 值测试为 29 的原因是我担心边界情况，我不希望变量在半小时内“变为空白”！关于如何更好地做到这一点的想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:57:32.597

不知道它是否“更好”，但我倾向于做这样的事情：

```
 DateTime time_to_expire = DateTime.Now.AddMinutes(30);
        time_to_expire = new DateTime(time_to_expire.Year, time_to_expire.Month, time_to_expire.Day, time_to_expire.Hour, time_to_expire.Minute >= 30 ? 30 : 0, 0); 
```

# php - 调用后获取请求在php中消失

> ID：13769773
> 
> 赞同：0
> 
> 时间：2012-12-07T19:29:34.440
> 
> 标签：php, javascript, post, get

我已经被这个错误困扰了很长时间，我只需要很少的 php 知识就可以解决它。所以我祈祷你的帮助。

我的问题是，在我向我的网站发出帖子（或 ajax）请求后，GET 请求消失了，从而给我留下了一个 NULL 对象（因为我从那个 id 创建了我的对象）。

我做了一些测试，问题在于我从 POST 得到的响应中的 GET 为 NULL。如果我忘记了 get 并且只是将 id 作为随机数启动，这不会发生。

以下是我认为问题所在的代码的某些部分：

首先是我的 GET 的 php：

```
require 'php/functions.php';

    if (isset($_GET['id'])) {

    $id = $_GET['id'];  

    // $id = 5;

    try {
    $bar = getBarById($id);
    } catch (exception $e) {
        exit;
    } 
```

在此之后，我从对象中输出了一些日期，并且一切正常，这里正在启动 GET。

现在。当我发出我的 ajax（我也尝试过常规 POST）请求时，来自 POST 的状态响应是好的，但之后什么都没有发生，并且 det 响应说我的 GET 请求为 NULL。

JS：

```
<script language="javascript" type="text/javascript">
function save(value) {
$.ajax({
type: "POST",
url: "barpage.php",
data: { save_sum: value }
}).done(function(msg) {
    msg.preventDefault();
 alert( msg );
});
} 
```

只是为了记录。来自 ajax 的“msg”响应告诉我没有任何反应。并且“$id”为NULL。

我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:33:47.367

这是交易：

您的 AJAX 请求正在执行 POST 请求，因此未填充 GET 数组，因为您正在执行 POST 请求而不是 GET 请求。一个快速的解决方法是将 Id 作为 ajax 请求的一部分发送到您的 php 文件中，像这样请求它：

```
$id = isset($_GET['id']) ? $_GET['id'] : null;
if($id == null) { 
   $id = isset($_POST['id']) ? $_POST['id'] : null;
} 
```

**替代解决方案**

```
$id = null;
if($_SERVER['REQUEST_METHOD'] == "GET") {
   $id = isset($_GET['id']) ? $_GET['id'] : null;
}
if($_SERVER['REQUEST_METHOD'] == "POST") {
   $id = isset($_POST['id']) ? $_POST['id'] : null;
} 
```

**一个更好的解决方案**（来自下面的评论）

```
$id = isset($_REQUEST['id']) ? $_REQUEST['id'] : null; 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:33:31.797

您正在`POST`将数据发送到您的 PHP 页面，而不是发送`GET`请求。

```
function save(value) {
$.ajax({
type: "GET",
url: "barpage.php",
data: { save_sum: value }
}).done(function(msg) {
    msg.preventDefault();
    alert( msg );
});
} 
```

或者你可以做一个`POST`但把`GET`变量放在你的`url`对象中：

```
function save(value) {
$.ajax({
type: "POST",
url: "barpage.php?id=5",
data: { save_sum: value }
}).done(function(msg) {
    msg.preventDefault();
    alert( msg );
});
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T19:35:44.707

你做错了几件事：

*   发出 POST ajax 请求但同时搜索 GET 参数
*   发布数据`save_sum`但寻找`id`

无论如何，这里有可能的解决方案，但我们无法猜测你到底做了什么：

尝试这个：

```
$.ajax({
    type: "POST",
    url: "barpage.php?id=<?php echo $_GET['id']; ?>",
    data: { save_sum: value }
    }).done(function(msg) {
        msg.preventDefault();
     alert( msg );
    });
  } 
```

或将类型更改为“GET”：

```
$.ajax({
    type: "GET",
    url: "barpage.php?",
    data: { save_sum: value, id: <?php echo $_GET['id']; ?> }
    }).done(function(msg) {
        msg.preventDefault();
     alert( msg );
  });
} 
```

# php - 从 db 查询 blob 时，如何在查询中将 blob 转换为文本？

> ID：13769774
> 
> 赞同：2
> 
> 时间：2012-12-07T19:29:33.250
> 
> 标签：php, mysql, search, blob

我正在尝试为客户创建一个搜索功能，他们在现有表中有一个字段，他们将其设置为 blob。当我在下面的搜索脚本中查询表时，我从三个字段中得到以下结果：

领域：

```
1-item_num
2-info (blob)
3-name 
```

询问：

```
$raw_results = mysql_query("SELECT * FROM store_products
    WHERE (`item_num` LIKE '%".$query."%') OR (`info` LIKE '%".$query."%') OR (`name` LIKE '%".$query."%')") or die(mysql_error()); 
```

（结果）

```
22 (name)
penlite (item_num)
PHA+MiBBQSBBbm9kaXplZCBBbHVtaW51bSBwZW5saXRlIDwvcD4= (info) 
```

如何将 blob 转换为搜索结果页面上的可读文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T20:28:25.433

您可以使用此查询

```
$raw_results = mysql_query("SELECT * FROM store_products
    WHERE (`item_num` LIKE '%".$query."%') OR (CONVERT(`info` USING utf8) LIKE '%".$query."%') OR (`name` LIKE '%".$query."%')") or die(mysql_error()); 
```

# java - 缓存数据库查询结果集需要良好的设计模式

> ID：13769779
> 
> 赞同：5
> 
> 时间：2012-12-07T19:30:03.867
> 
> 标签：java, sql, jakarta-ee

我是一个构建 Java Web 应用程序的团队的一员，其中用户将在关系数据库中搜索结果，然后在浏览器中以表格方式查看它们。然后，用户还可以选择随后在单独的浏览器窗口中查看相同的结果集（或这些结果的子集），例如使用图表工具。换句话说，我们需要让用户能够在以后（最多 24 小时）可视化相同的结果集记录。

由于系统上的搜索会占用大量资源并且只是出于良好的常识，因此我们希望有一种干净的方式来缓存每个结果集，以便以后可以从内存（RAM 或磁盘）中提取它。 **我们正在寻找一种做这种缓存的好方法**，我们相信其他人之前已经这样做过，我们更喜欢使用最佳实践或框架，而不是从头开始构建这样的东西。服务器将有大量 RAM，但由于可能有数百人使用该系统，我们可能需要一种方法，先存储到 RAM，然后如果 RAM 已满，也可以缓存到硬盘。

我相信坚持作为 Java 对象是最有意义的，但我愿意接受更好的建议。我们想要一种供应商中立的方法，这样如果数据库团队选择稍后更换供应商，我们就不会被专有解决方案所束缚。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T19:37:00.060

我认为您可能正在寻找的是 Terracotta Ehcache。这可以完成您提到的所有事情以及更多。它是一个免费产品，可用于在内存中缓存内容、溢出到磁盘、通过 MB 或项目数指定最大缓存大小，以及根据上次访问时间或进入时间过期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T19:34:43.387

我已经看到[http://www.jboss.org/infinispan/](http://www.jboss.org/infinispan/)曾经这样做过。它可以缓存到内存、磁盘和/或数据库。我不会说我喜欢它（配置不是超级简单，文档也有些缺乏），但它肯定可以工作并且得到积极维护。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T19:35:39.610

保持供应商中立就是编写一个应用程序原生的抽象层，然后在该层后面插入您想使用的缓存服务，同时保持将这些操作暴露给主代码的层相同。

有很多方法可以缓存。研究使用各种 NoSql 解决方案。

*   [雷迪斯](http://en.wikipedia.org/wiki/Redis)
*   [内存缓存](http://en.wikipedia.org/wiki/Memcached)

大多数时候，您将序列化您的对象并将其持久化到您的缓存层。

# c# - 如何通过表达式赋值？

> ID：13769780
> 
> 赞同：11
> 
> 时间：2012-12-07T19:30:08.890
> 
> 标签：c#, expression-trees

如果我能够通过 Lambda 表达式（如下）进行分配，这将非常简单

```
//An expression tree cannot contain an assignment operator
Expression<Func<ComplexObj, object>> expression = obj => obj.Contacts[0].FirstName = "Tim"; 
```

由于赋值运算符，上面的代码无效。我需要传递一个 lambda 表达式来识别复杂对象中需要设置的属性。在某些情况下，复杂对象具有 List 并且因此重复的对象类型和名称，这就是为什么我需要 lambda 显式引用要更新的对象中的字段。

我可以使用以下方法检索值，没问题。但我不确定如何使用相同的逻辑来设置值，我遇到了 Expression.Assign 并相信这可能是解决方案。

```
Expression<Func<ComplexObj, object>> expression = obj => obj.Contacts[0].FirstName;
var result = FindByProperty(expression);

public static string FindByProperty(Expression<Func<Contract, object>> propertyRefExpr)
{
    ComplexObj obj = new ComplexObj();
    Contact myContact = new Contact();
    myContact.FirstName = "Allen";
    obj.Contacts = new List<Contact>{myContact};
    return propertyRefExpr.Compile().Invoke(obj);
} 
```

**更新：**

“将属性赋值作为表达式树传递给方法......”

将 SetValue 方法与 ParentTypeA 一起使用，Value 将不起作用。（下面的代码）

```
Expression<Func<ComplexObj, object>> expression = obj => obj.Contacts[0].FirstName;
obj.AssignNewValue(expression, firstName);

public static void AssignNewValue(this ComplexObj obj, Expression<Func<ComplexObj, object>> expression, object value)
{
    var propertyInfo = (PropertyInfo)((MemberExpression)expression.Body).Member;
    propertyInfo.SetValue(obj, value, null);
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-08T02:35:26.623

我最终使用了以下解决方案。干杯

```
ComplexObj obj = new ComplexObj();
Expression<Func<ComplexObj, object>> expression = obj => obj.Contacts[index].FirstName;
obj.AssignNewValue(expression, firstName);

public static void AssignNewValue(this ComplexObj obj, Expression<Func<ComplexObj, object>> expression, object value)
{
    ParameterExpression valueParameterExpression = Expression.Parameter(typeof(object));
    Expression targetExpression = expression.Body is UnaryExpression ? ((UnaryExpression)expression.Body).Operand : expression.Body;

    var newValue = Expression.Parameter(expression.Body.Type);
    var assign = Expression.Lambda<Action<ComplexObj, object>>
                (
                    Expression.Assign(targetExpression, Expression.Convert(valueParameterExpression, targetExpression.Type)),
                    expression.Parameters.Single(),
                    valueParameterExpression
                );

    assign.Compile().Invoke(obj, value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:17:44.490

链接到的问题可能是“正确”的答案，但为了完整起见，您*可以*做更多这样的事情......它确实更好地遵循“告诉，不要问”的方法，虽然我不能说我*喜欢*这个实施......

```
void Main()
{
    Expression<Func<ComplexObj, object>> expression = 
      obj => obj.Contacts[0].SetFirstName("Tim");       
}

public class ComplexObj
{
    public ComplexObj() { Contacts = new List<SimpleObj>(); }
    public List<SimpleObj> Contacts {get; private set;}
}
public class SimpleObj
{
    public string FirstName {get; private set;}
    public SimpleObj SetFirstName(string name) { this.FirstName = name; return this; }
} 
```

# delphi - 如何在 RadStudio XE3 选项中关联 .dpr 扩展名？

> ID：13769781
> 
> 赞同：2
> 
> 时间：2012-12-07T19:30:17.987
> 
> 标签：delphi, delphi-xe3

我的 Rad Studio 无法打开默认扩展名（如`dpr`、`dproj`、`pas`）。我如何在`RAD Studio XE3`选项中关联这些扩展？我搜索`Tools->Options`但我没有找到这样做的路径。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:33:37.013

将其合并到您的注册表中：

```
Windows 注册表编辑器版本 5.00

[HKEY_CLASSES_ROOT\.DPR]
@="BDS.DprFile"

[HKEY_CLASSES_ROOT\BDS.DprFile]
@="德尔福项目文件"
"FriendlyTypeName"=hex(2):40,00,25,00,43,00,6f,00,6d,00,6d,00,6f,00,6e,00,50,\
  00,72,00,6f,00,67,00,72,00,61,00,6d,00,46,00,69,00,6c,00,65,00,73,00,25,00, \
  5c,00,45,00,6d,00,62,00,61,00,72,00,63,00,61,00,64,00,65,00,72,00,6f,00,5c, \
  00,53,00,68,00,65,00,6c,00,6c,00,5c,00,42,00,44,00,53,00,53,00,52,00,2e,00, \
  64,00,6c,00,6c,00,2c,00,2d,00,31,00,37,00,30,00,39,00,00,00

[HKEY_CLASSES_ROOT\BDS.DprFile\DefaultIcon]
@="\"C:\\Program Files (x86)\\Embarcadero\\RAD Studio\\10.0\\Bin\\delphicoreide170.bpl\",3"

[HKEY_CLASSES_ROOT\BDS.DprFile\Shell]

[HKEY_CLASSES_ROOT\BDS.DprFile\Shell\Open]

[HKEY_CLASSES_ROOT\BDS.DprFile\Shell\Open\Command]
@="\"C:\\Program Files (x86)\\Embarcadero\\RAD Studio\\10.0\\Bin\\bdsLauncher.exe\" \"C:\\Program Files (x86)\\Embarcadero\\ RAD Studio\\10.0\\Bin\\bds.exe\" /np"

[HKEY_CLASSES_ROOT\BDS.DprFile\Shell\Open\ddeexec]
@="[打开(\"%1\")]"

[HKEY_CLASSES_ROOT\BDS.DprFile\Shell\Open\ddeexec\application]
@="bdslauncher"

[HKEY_CLASSES_ROOT\BDS.DprFile\Shell\Open\ddeexec\topic]
@="系统"

```

显然，这是假设您的 XE3 与我的居住在同一个地方。如果它在您机器上的其他地方，则相应地更新路径。

这可能比批发重新安装更容易。

# javascript - 谷歌通讯录 API 浏览器？

> ID：13769782
> 
> 赞同：3
> 
> 时间：2012-12-07T19:30:29.400
> 
> 标签：javascript, google-data-api, google-shared-contacts

我一直在为我们的网站实现一个谷歌联系人导入器，并正在寻找一种方法来测试 API 调用，以便我可以看到流程以及它们返回的内容。有一个 google api explorer 但那里似乎没有 Google 通讯录？

我知道谷歌联系人仍然是谷歌数据 API 的一部分，但该 API 集是否有特定的资源管理器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T17:07:16.960

API Explorer 特定于较新的 API，但您可以使用[Oauth Playground](https://developers.google.com/oauthplayground/)来试用 Google 的任何 API。授权后，您可以单击“列出可能的操作”以获取类似于资源管理器提供的 API 调用列表。主要区别在于没有设置参数的表单，您必须阅读文档并手动编写请求正文。

# javascript - 有没有一种使用 Javascript 或 jQuery 的方法可以隐藏列表中与元素和相邻列的高度相关的元素？

> ID：13769785
> 
> 赞同：1
> 
> 时间：2012-12-07T19:31:00.007
> 
> 标签：javascript, jquery, wordpress

我有一个带有自定义侧边栏的 wordpress 网站，以便我们在其中投放促销广告。相同的布局在 10 个不同的页面上执行。侧边栏的左侧是“主要内容”区域。

侧边栏区域从一个单独的 sidebar.php 文件中提取，该文件具有一个无序列表的元素（apx. 25），每个元素都由图像和文本组成。Onload 运行 shuffle.js 函数，以便每次显示不同的促销。

这是我目前拥有的脚本。

```
<script type='text/javascript'>//<![CDATA[ 
$(function(){
var li = $('ul li');
var len =li.length;
while($('#shuffleunorderedlist li:visible').length > 28) {
li.eq(parseInt(len * Math.random(), 10)).hide();
}
);//]]>  
</script>

<!--JS shuffle scripts I added at launch-->
<script language="javascript" type="text/javascript"       src="http://orlandovisitornetwork.com/wp-content/themes/Paradise/js/jquery.shuffle.js">       </script>
<script type="text/javascript">jQuery(function($){window.onload = function(){
$('#shufflemultidivcontainer, #shuffleunorderedlist, #shufflemultidivcontainerhotels').shuffle();
};
});
</script>
<!--END shuffle JS Scripts-->​ 
```

问题是客户希望每个页面列是均匀的，从同一个促销池中提取并随机显示它们。不幸的是，所有 li 的高度都不同。

目前，当我添加或删除促销并隐藏会导致“主要内容”和“侧边栏”高度不均匀的 li 时，我必须进入每个页面的代码。当然，这不会让他们变得更平，但非常接近它。

为了自动化这一点，我试图找出一种方法来随机播放促销列表，查看“主要内容”的高度并显示尽可能多的随机播放促销，以便“侧边栏”等于或略小于'主要内容'。我有一个想法，但主要内容并不总是相同的高度，而且 li 的高度不同让我失望。

我在 jQuery 中寻找 WP 插件和一些可能对我有帮助但没有找到的东西。

我希望我说清楚了。感谢任何建议和答案。谢谢

你可以在这里看到我到目前为止所拥有的 jsfiddle.... [http://jsfiddle.net/2cPMm/](http://jsfiddle.net/2cPMm/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:33:37.470

嗯，我想您可以遍历 li 元素并查看它们的位置是否低于感兴趣的 div 的位置。如果是这样，请将它们隐藏起来。

```
foreach(li in whateverElement)    
    if(li.pos.y > div.pos.y)
        li.hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:58:49.997

这是实际上为我工作的代码。（当然，我是在堆栈上的每个人的帮助下来到这里的。

```
jQuery(function($)
{
    // Shuffle 
$('ul').shuffle();

// Watch Columns 
var mainHeight = $('#main').outerHeight();
var sidebarHeight = $('#sidebar').outerHeight();

// Compare and hide li 
if (mainHeight < sidebarHeight) { // You are hiding things from the sidebar correct?      Strictly speaking, this check isn't necessary, but it prevents us from looping when we don't   need to. 
 $('div#sidebar li').each(function() {  // I removed reverse as it gave me a reference  error. If it is defined for you, feel free to use it. 
    if (sidebarHeight > mainHeight) {  
        $(this).hide();  // hide only the current element
        sidebarHeight = $("#sidebar").outerHeight(); // update sidebarHeight 
    }
});
}
  }); 
```

# html - 添加图像作为画布上矩形的工具提示

> ID：13769787
> 
> 赞同：0
> 
> 时间：2012-12-07T19:31:18.027
> 
> 标签：html, kineticjs

我有一个网格，我希望基本上为网格中的每个矩形添加一个工具提示图像。基本上，首先我需要能够在矩形鼠标悬停事件上向画布添加图像。最终每个矩形都会有它自己的图像，所以我需要跟踪矩形......我是否将它们添加到数组中？

这是我到目前为止所拥有的小提琴：http: [//jsfiddle.net/marseilles84/7ZzTh/1/](http://jsfiddle.net/marseilles84/7ZzTh/1/)

这是一个使用的示例图像源：'http://www.html5canvastutorials.com/demos/assets/yoda.jpg'；

```
<div id="container"></div>​

var stage = new Kinetic.Stage({
  container: 'container',
  width: 1000,
  height: 500
});

var layer = new Kinetic.Layer();

for  (var i=0; i<7; i++)
{
    for(c=0; c<18; c++)
    {
              var colorPentagon = new Kinetic.Rect({
              x: (45*c),
              y: 45*i,
              width:40,
              height:40,
              fill: 'red',
              stroke: 'black',
              strokeWidth: 4,
              draggable: true
            });

            colorPentagon.on('mouseover touchstart', function() {
                      //code here
                    });

            layer.add(colorPentagon);    
    }
}

stage.add(layer); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:38:02.210

[http://jsfiddle.net/7ZzTh/2/](http://jsfiddle.net/7ZzTh/2/)

这可能是您正在寻找的更多内容。

```
 colorPentagon.on('mouseover touchstart', function() {
                 var userPos = stage.getUserPosition();
                 yoda.setPosition(userPos.x,userPos.y);
                 layer.add(yoda);
                  layer.draw();
         });

        colorPentagon.on('mouseout touchstart', function() {
                   yoda.remove();
                   layer.draw();
         }); 
```

一开始你想要：

```
 var imageObj = new Image();
   var yoda = new Kinetic.Image({
       x: 0,
       y: 0,
       image: imageObj,
       width: 106,
       height: 118
   });
   imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/yoda.jpg'; 
```

# c++ - 我有 n 个空格，在每个空格中，我可以放置一个数字 0 到 m。编写一个程序来输出所有可能的结果。需要帮忙 ：）

> ID：13769788
> 
> 赞同：1
> 
> 时间：2012-12-07T19:31:18.707
> 
> 标签：c++, permutation

这个想法是，给定 n 个空格、空字段或你有什么，我可以放置一个从 0 到 m 的数字。因此，如果我有两个空格并且只有 01 ，则结果将是： (0 1) (1 0) (0 0) (1 1)

如果我有两个空格和三个数字（0 1 2），结果将是

(0 1) (1 1) (0 2) (2 0) (2 2) (2 1)

依此类推，直到我得到所有 9 (3^2) 个可能的结果。

因此，我正在尝试编写一个程序，如果我有 n 个空格并且可以在其中任何一个空格中放置从 0 到 m 的任意数字，它将给我所有可能的结果。

最初我想使用 for 循环，但是当我意识到我必须为 n 之前的每个数字制作一个时，这很快就被击落了，而且它不适用于 n 更大的情况。

我的想法是使用随机数生成器并生成一个从 0 到 m 的数字，但这并不能保证我实际上会得到所有可能的结果。

我被卡住了:(

想法？

任何帮助深表感谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T19:36:23.983

每当一项任务需要找到“全部”某物时，您应该首先尝试按以下三个步骤完成：我可以将它们按某种顺序排列吗？我可以找到下一个给定的吗？我能找到第一个吗？

所以如果我让你给我从 1 到 10 的所有数字，你会怎么做？嗯，这很容易，因为：您知道一种简单的方法来整理它们。你可以给我下一个给他们任何一个。你知道哪个是第一个。所以你从第一个开始，然后继续下一个，直到你完成。

同样的方法也适用于这个问题。你需要三种算法：

1.  一种对输出进行排序的算法，使得每个输出都大于或小于其他所有可能的输出。（您无需编写代码，只需了解即可。）

2.  一种将任何输出转换为下一个输出的算法，如果给出最后一个输出则失败。（您确实需要对此进行编码。）

3.  一种生成第一个输出的算法，比其他所有可能的输出少一个（根据第一个算法）。（您确实需要对此进行编码。）

然后很简单：

1.  生成第一个输出（使用算法 3）。输出它。

2.  使用增量算法（算法 2）生成下一个输出。如果没有下一个输出，则停止。否则，输出它。

3.  重复步骤 2。

**更新**：以下是一些可能的算法：

算法1：

1.  比较两个输出的第一个数字。如果一个大于另一个，则该输出更大。如果相等，继续

2.  重复移动到连续数字的步骤，直到我们发现不匹配。

算法2：

1.  从最右边的数字开始。

2.  如果这个数字不是它可以达到的最大值，增加它并停止。

3.  我们在最左边的数字吗？如果是这样，请停止错误。

4.  将数字指针左移一位。

算法3：

1.  将所有数字设置为零。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T19:50:14.647

基本上，您需要的是起点、终点以及从每个状态转换到下一个状态的方法。例如，递归函数能够将一个数字添加到您需要的最小步速值，当它大于最大值时，增加下一个更大的数字并将当前的数字设置回零。

以此为例：

```
#include <iostream>
#include <vector>

using namespace std;

// This is just a function to print out a vector.
template<typename T>
inline ostream &operator<< (ostream &os, const vector<T> &v) {
    bool first = true;
    os << "(";
    for (int i = 0; i < v.size (); i++) {
        if (first) first = false;
        else os << " ";
        os << v[i];
    }
    return os << ")";
}

bool addOne (vector<int> &nums, int pos, int maxNum) {
    // If our position has moved off of bounds, so we're done
    if (pos < 0)
        return false;

    // If we have reached the maximum number in one column, we will
    // set it back to the base number and increment the next smallest number.
    if (nums[pos] == maxNum) {
        nums[pos] = 0;
        return addOne (nums, pos-1, maxNum);
    }

    // Otherwise we simply increment this numbers.
    else {
        nums[pos]++;
        return true;
    }
}

int main () {
    vector<int> nums;
    int spaces = 3;
    int numbers = 3;

    // populate all spaces with 0
    nums.resize (spaces, 0);

    // Continue looping until the recursive addOne() function returns false (which means we
    // have reached the end up all of the numbers)
    do {
        cout << nums << endl;    
    } while (addOne (nums, nums.size()-1, numbers));

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T19:58:25.650

> “我正在尝试编写一个程序，如果我有 n 个空格并且可以在其中任何一个空格中放置从 0 到 m 的任意数字，它将给出所有可能的结果。”

假设包含“to”，令 R = m + 1。

那么这与输出基本 R 数字系统中呈现的0 到 R ^n -1范围内的每个数字是同构的。

这意味着要计算一个外部循环（为此，您可以使用 C++`++`增量运算符），以及一个用于提取和显示数字的内部循环。对于内部循环，您可以使用 C++ 的`/`除法运算符，并且根据您发现最清楚的内容，还可以使用`%`余数运算符。除非您将自己限制为 C++ 标准库直接支持的三种 R 选择，在这种情况下使用标准格式化程序。

请注意，R ^n可以快速变大。

所以不要将输出重定向到您的打印机，并准备等待一段时间让程序完成。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T19:36:34.763

我认为您需要查找递归。[http://www.danzig.us/cpp/recursion.html](http://www.danzig.us/cpp/recursion.html)

基本上它是一个调用自身的函数。这允许您执行 N 次嵌套的 for 循环。

# r - 如何在函数中获取传递给 ... 的参数名称？

> ID：13769798
> 
> 赞同：3
> 
> 时间：2012-12-07T19:32:12.540
> 
> 标签：r

> **可能重复：**
> [使用替换来获取参数名称](https://stackoverflow.com/questions/5754367/using-substitute-to-get-argument-name-with)

`list(...)`请注意，这与使用向量本身或其他形式获取向量不同。`...`在完成任何解析之前，我希望能够做的只是“回显”传入的所有参数。

例如：我想要一个功能可能就像：

```
f(apple, banana, car)
## --> returns c("apple", "banana", "car"), 
## ie, skips looking for the objects apple, banana, car 
```

我得到的最接近的是

```
f <- function(...) {
  return( deparse( substitute( ... ) ) )
} 
```

但这仅返回第一个参数“捕获”的`...`. 想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T19:37:04.043

```
f <- 
  function(...){
     match.call(expand.dots = FALSE)$`...`  
  } 
```

来自 ?match.call 的一些解释：

```
 1\. match.call returns a call in which all of the specified arguments are specified by their full names .
 2\. Here it is used to pass most of the call to another function, often model.frame. 
    Here the common idiom is that expand.dots = FALSE 
```

这里有一些测试：

```
f(2)        # call of a static argument  
[[1]]
[1] 2

> f(x=2)  # call of setted argument
$x
[1] 2

> f(x=y)  # call of symbolic argument
$x
y 
```

# javascript - 如何在保留其他值的同时设置单个变换值？

> ID：13769800
> 
> 赞同：17
> 
> 时间：2012-12-07T19:32:20.840
> 
> 标签：javascript, css

如果您有一个元素具有许多用于转换的值，您如何只更改其中一个值而不更改其他值？

您可以每次都重写它们，但在某些情况下，这意味着您必须将 css 解析为不同的部分。例如：

```
-webkit-transform:rotateY(45deg) rotate(45deg); 
```

您必须获取rotate 和rotateY 的属性和值。有没有办法在不改变rotateY值的情况下获取和设置只是旋转？

问题[在这里](http://jsfiddle.net/mkTKH/8/)得到说明。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T19:55:52.830

无法直接修改转换的单个组件。可悲的是，各种可能的转换都是作为`transform`属性值实现的，而不是属性本身。CSS 属性值没有对象模型 - 就 JavaScript 而言，属性值始终只是一个字符串。如果将`transform`其视为诸如 、 等的简写属性，`transform-rotate-y`那就`transform-*`太好了，就像`background`所有属性的简写属性一样`background-*`。这将允许我们通过 JavaScript 直接访问这些值，但它不是以这种方式实现的，所以我们不走运。

**编辑：** 完成此任务的最简单方法（无需研究规范并进行大量数学运算）是[嵌套您的元素，对每个](http://www.w3.org/TR/css3-transforms/#transform-function-lists). 如果您应用了几个不会改变的转换，请继续将它们组合到一个元素上。您确实想要更改的任何转换，请使用单独的元素：

在这里工作：[jsfiddle.net/mkTKH/15](http://jsfiddle.net/mkTKH/15/)

* * *

**编辑：**我下面的原始解决方案不起作用。在测试它时，我发现`getComputedStyle()`将转换转换为`matrix()`. 该规范的[早期草案](http://www.w3.org/TR/2009/WD-css3-2d-transforms-20090320/#csstransformvalue-interface)说：

> [`transform`](http://www.w3.org/TR/2009/WD-css3-2d-transforms-20090320/#effects)由返回的样式对象的属性`getComputedStyle`包含一个 CSS_MATRIX 类型的 CSSTransformValue。6 个参数表示 3x2 矩阵，它是应用属性中列出的各个函数的结果[`transform`](http://www.w3.org/TR/2009/WD-css3-2d-transforms-20090320/#effects)。

* * *

 ~~所以，你必须解析它。如果您只想更改属性值的一部分，可以使用正则表达式来解析该值：

```
var rotateY = "rotateY(" + deg + "deg)";
var transform = el.style.webkitTransform.replace(/\brotateY([^)]+)\b/, rotateY);
el.style.webkitTransform = transform; 
```

我会创建一个可重用的函数：

```
function setTransformValue(el, name, value) {
    var currentValue = new RegExp(name + "([^)]+)");
    var style = window.getComputedStyle ? getComputedStyle(el) : el.currentStyle;
    var currentTransform = style.transform ||
                           style.webkitTransform ||
                           style.MozTransform ||
                           style.msTransform ||
                           style.OTransform;
    var transform;
    if (currentValue.test(currentTransform )) {
        transform = currentTransform.replace(currentValue, name + "(" + value + ")");
    }
    else {
        transform = currentTransform + " " + name + "(" + value + ")";
    }
    el.style.transform = transform;
} 
```

未经测试。

 ~~* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T21:02:33.000

所以@gilly3 是对的，你不能真正做到这一点，但这是你可以伪造它的方法。

1.  记住对象中的当前值
2.  修改该对象中的一部分值。
3.  有一个将对象转换为字符串的函数。
4.  应用字符串。

代码示例

```
var el = document.getElementById('blablabla');
var transform = {
     rotate: 45,
     rotateY: 45
}

function getTransform() {
    var str = '':
    for (var key in transform) {
        str += key + '(' + transform[key] + 'deg)'
    }
    return str;
}

function applyTransform() {
    var transform = getTransform();
    el.style.webkitTransform = el.style.mozTransform = el.style.transform = transform;
}

function rotateABit() {
    transform.rotate += 20;
    applyTransform();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-13T15:20:03.317

这就是我所做的，而且它很有效，而且非常简单：

**1\. 将对象的转换属性转换为字符串**

```
var currentTransformation = String(myobject.style.transform); 
```

**2.替换你想要转换的值**

```
var finalTransformation = currentTransformation.replace("translateZ(100px)", "translateZ(YOURVALUEpx)"); 
```

**3.分配新的转换**

```
myobject.style.transform = finalTransformation; 
```

完毕！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-10T08:13:12.833

[我对这个 jQuery插件](https://github.com/zachstronaut/jquery-animate-css-rotate-scale/)有最好的体验。

[这](https://www.zachstronaut.com/posts/2009/02/22/jquery-patch-css-transform.html)是一个例子。

甚至[这里](https://www.zachstronaut.com/posts/2009/08/07/jquery-animate-css-rotate-scale.html)是一个在 jQuery 动画函数中使用的例子。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-07T22:20:31.857

[小提琴](http://jsfiddle.net/8nmJB/)

```
var spinner = (function transform() {
    var rotateX = 0;
    var rotateY = 0;
    var rotateZ = 0;

    var translateX = 0;
    var translateY = 0;
    var translateZ = 0;

    var scaleX = 1;
    var scaleY = 1;
    var scaleZ = 1;

    function transform(props) {
        rotateX = props.rotateX ? props.rotateX : rotateX;
        rotateY = props.rotateY ? props.rotateY : rotateY;
        rotateZ = props.rotateZ ? props.rotateZ : rotateZ;

        translateX = props.translateX ? props.translateX : translateX;
        translateY = props.translateY ? props.translateY : translateY;
        translateZ = props.translateZ ? props.translateZ : translateZ;

        scaleX = props.scaleX ? props.scaleX : scaleX;
        scaleY = props.scaleY ? props.scaleY : scaleY;
        scaleZ = props.scaleZ ? props.scaleZ : scaleZ;

        var css = "";
        css += "rotateX(" + rotateX + "deg) ";
        css += "rotateY(" + rotateY + "deg) ";
        css += "rotateZ(" + rotateZ + "deg) ";
        css += "translateX(" + translateX + "px) ";
        css += "translateY(" + translateY + "px) ";
        css += "translateZ(" + translateZ + "px) ";
        css += "scaleX(" + scaleX + ") ";
        css += "scaleY(" + scaleY + ") ";
        css += "scaleZ(" + scaleZ + ") ";

        spinner.Spinner.css("-webkit-transform", css);
    }
    return {
        Spinner: $("#spinner"),
        Transform: transform
    }
})(); 
```~~~~

# javascript - Raphael.js 中带有 transform() 方法的可拖动路径

> ID：13769802
> 
> 赞同：0
> 
> 时间：2012-12-07T19:32:28.373
> 
> 标签：javascript, path, drag-and-drop, raphael

我正在尝试使用 non-deprecated method 使路径可拖动`Element.transform()`。这是使用不推荐使用的方法制作它的答案`Element.translate()`：

[在 Raphael js 中使路径和图像可拖动](https://stackoverflow.com/questions/4224359/making-paths-and-images-dragable-in-raphael-js)

当我简单地替换为时`translate()`，`transform()`我的路径很快就会回到初始位置：

```
drag(function (dx, dy) {
       var trans_x = dx - this.ox;
       var trans_y = dy - this.oy;

       this.transform("t" + trans_x + "," + trans_y);
       this.ox = dx;
       this.oy = dy;
     }, 
     function () {
       this.ox = 0;
       this.oy = 0;
     },
     function() {
     }
); 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T11:22:58.530

我找到了解决方案！

只需使用 transform() 的附加语法，即 .transform("...t" + .. + ...)

所以这是我的最终结果：

```
drag(function (dx, dy) {
       var trans_x = dx - this.ox;
       var trans_y = dy - this.oy;

       this.transform("...t" + trans_x + "," + trans_y); //Just change this line
       this.ox = dx;
       this.oy = dy;
     }, 
     function () {
       this.ox = 0;
       this.oy = 0;
     },
     function() {
     }
); 
```

它工作得很好。

# variables - Opencart：将数量变量传递给success.php

> ID：13769807
> 
> 赞同：0
> 
> 时间：2012-12-07T19:32:41.917
> 
> 标签：variables, opencart

我在 Opencart 论坛上问过这个问题，但还没有收到任何回复，所以我想我可以在这里问专家@stackoverflow :)

我试图确切地了解如何将订购的项目的“数量”传递给success.php页面，这样我就可以将其传递给另一个php脚本，该脚本将根据数量生成一个数组。

这是我的目标：

*   客户购买 5 件商品
*   客户通过 Paypal Pro 结账并处理 CC
*   Paypay 返回一个成功的交易
*   现在我希望 success.php 页面将变量（$quantity）传递给 myNewScript.php 页面
*   myNewScript.php 页面将生成一些随机字符串，然后我想将这些随机字符串附加到 opencart 生成并发送给客户的确认电子邮件中。

我应该从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:40:03.157

您需要在结帐/成功控制器中执行此操作。获取 $quantity 并使用重定向功能重定向到您的自定义页面：

```
$this->redirect($this->url->link('checkout/myNewScript','quantity='.$quantity)); 
```

# virtualization - 如何删除处于 GURU_MEDITATION 错误状态的 virtualbox 机器？

> ID：13769808
> 
> 赞同：71
> 
> 时间：2012-12-07T19:32:41.987
> 
> 标签：virtualization, virtualbox, vagrant

如何删除处于 GURU_MEDITATION 错误状态的 VirtualBox 机器？仅在 VirtualBox 未运行时删除目录就足够了吗？

编辑：发布后，我删除了“在文件管理器中显示”导航到的整个目录。

看起来像：

![Virtualbox Guru Meditation 截图](../Images/323b02d35e77ca84a4482b58e2087419.png)

注意没有断电，连remove都是灰色的。我相信这与删除目录之前的外观完全相同。

编辑2：我在删除文件后尝试了命令行关机。它挂起：

> vboxmanage controlvm wmf-vagrant_1354733432 poweroff 0%...10%...20%...

编辑 3：它也无法从命令行注销它：

> VBoxManage unregistervm wmf-vagrant_1354733432 --delete VBoxManage：错误：无法注销机器'wmf-vagrant_1354733432'，而它被锁定VBoxManage：错误：详细信息：代码VBOX_E_INVALID_OBJECT_STATE（0x80bb0007），组件机器，接口IMachine，被调用者nsISupports上下文：“取消注册（ fDelete ? (CleanupMode_T)CleanupMode_DetachAllReturnHardDisksOnly : (CleanupMode_T)CleanupMode_DetachAllReturnNone, ComSafeArrayAsOutParam(aMedia))" 在文件 VBoxManageMisc.cpp 的第 160 行

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2013-03-02T14:36:56.957

杀死 VBoxHeadless 进程并运行“ [vagrant destroy](http://docs.vagrantup.com/v2/cli/destroy.html) ”

使用“killall”命令销毁 vagrant 并发送 kill 信号如下所示：

`killall -9 VBoxHeadless && vagrant destroy`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-03-17T15:24:41.740

如果您无法从 VirtualBox GUI 关闭机器，请尝试从命令行使用`vboxmanage`命令（`VBoxManage`在 OS X 上），例如：

```
vboxmanage controlvm NAMEOFVM poweroff 
```

[`NAMEOFVM`使用命令中的名称进行更改`vboxmanage list vms`。]

然后注销并删除虚拟机：

```
vboxmanage unregistervm NAMEOFVM --delete 
```

或者手动删除：

```
rm -fr ~/"VirtualBox VMs/NAMEOFVM" 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-09-26T00:48:39.160

我遇到了这个问题。我阅读的所有内容都建议您始终通过 Virtual Box 管理这些盒子，而不是直接访问文件。但是当我有一个无效的盒子时， unregistervm 命令拒绝删除它并且 vagrant destroy 不起作用。最后，以下过程奏效了。

1.  杀死所有正在运行的 VBox* 进程
2.  从文件夹“VirtualBox VMs”中删除文件夹“boxname”
3.  编辑文件“VirtualBox.xml”，去掉无效框对应的标签。

然后我运行这个命令来验证盒子已经消失了。

```
VBoxManage list vms 
```

之后，我能够创建一个具有相同名称的新虚拟机。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-03-16T16:38:30.280

我有一个处于类似状态的虚拟机

```
$ vagrant up

Bringing machine 'tempu' up with 'virtualbox' provider...
==> mms: Checking if box 'hashicorp/precise64' is up to date...
==> mms: Resuming suspended VM...
==> mms: Booting VM...
There was an error while executing `VBoxManage`, a CLI used by Vagrant
for controlling VirtualBox. The command and stderr is shown below.

Command: ["startvm", "9fcf2203-d4b3-47a1-a307-61bfa580bd28", "--type", "headless"]

Stderr: VBoxManage: error: The machine 'temp-ubuntu' is already locked by a session (or being locked or unlocked)
VBoxManage: error: Details: code VBOX_E_INVALID_OBJECT_STATE (0x80bb0007), component Machine, interface IMachine, callee nsISupports
VBoxManage: error: Context: "LaunchVMProcess(a->session, sessionType.raw(), env.raw(), progress.asOutParam())" at line 592 of file VBoxManageMisc.cpp 
```

我寻找了一个名为 的进程`VBoxHeadless`，但它没有运行。

然后我运行`ps`并发现这个进程具有相同的 vm id：

```
$ ps aux | grep -i virtualbox
user      63466   0.0  0.1  2523608   8396   ??  S     9:36am   0:02.67 /Applications/VirtualBox.app/Contents/MacOS/VBoxManage showvminfo 9fcf2203-d4b3-47a1-a307-61bfa580bd28 --machinereadable 
```

杀死该进程解决了问题，并且VM在运行后正确启动`vagrant up`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-11-01T08:38:02.053

这是我绝望时使用的脚本。它会尽可能多地从机器上擦除任何 VM 的痕迹：

```
VBoxManage list runningvms | awk '{print $2}'  | xargs --no-run-if-empty -t -n1 -IXXX VBoxManage controlvm XXX poweroff                                                           
VBoxManage list vms | awk '{print $2}'  | xargs --no-run-if-empty -t -n1 VBoxManage unregistervm                                                                                  
killall -9 VBoxHeadless                                                                                                                                                           
rm -rf ~/Virtualbox\ VMs/* 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-08T23:04:54.480

我在 64 位多处理器主机上使用 Debian Wheezy。我最终能够通过**删除所有 VirtualBox 数据**来解决它（尽管您不需要删除 Vagrant 基础框）：

1.  如果正在运行，请关闭 Virtualbox
2.  sudo apt-get remove --purge virtualbox
3.  移动或删除 ~/.VirtualBox 和 ~/VirtualBox\ VMs/。如果您不确定，**请将它们备份**到安全的地方。
4.  重新开始。
5.  重新安装虚拟机。
6.  像往常一样使用 virtualbox/vagrant。

可能有一种破坏性较小的方式（例如，仅删除这些目录的一部分）。就我而言，幸运的是当时我只使用了一个虚拟机。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-10-23T11:52:32.197

就我而言，我想通过命令行删除我系统上当前拥有的所有 Vagrant 框，我这样做了：

```
$ vagrant box list | cut -f 1 -d ' ' | xargs -L 1 vagrant box remove -f --all 
```

当然，在确保不再附加进一步的过程之后：

```
killall -9 VBoxHeadless && vagrant destroy
No matching processes belonging to you were found 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-13T09:34:47.690

我一直在努力解决之前使用 Vagrant 创建的冻结 Virtual Box 实例。[幸运的是找到了类似票证](https://stackoverflow.com/questions/21606567/virtualbox-is-locked-when-i-try-to-destroy-a-kitchen-instance)中提到的解决方案

因此，回顾一下，如果您收到超时错误或 Vagrant 抱怨它无法提供或任何其他与 Virtual Box 相关的问题，请尝试：

1.  首先列出虚拟盒子实例：`VmboxManage list vms`
2.  使用前一个命令的 id|names 停止虚拟盒实例：`VBoxManage startvm VMNAME/id --type emergencystop`
3.  列出 vagrant 框`vagrant box list`
4.  删除一个或多个导致问题的 vagrant 框：`vagrant remove box ${box-name}`
5.  之后，再试`vagrant up`一次，希望你能恢复正常。

祝你好运！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-16T23:45:52.357

在 Windows 10 上，我解决了设置默认防火墙配置的问题。

希望能帮助到你...

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-22T13:02:42.303

打开任务管理器或系统监视器并将鼠标悬停在 VBoxHeadless 上以查看 VM 的名称并终止进程。现在您可以使用 VirtualBox Manager GUI 删除 VM。

[![在此处输入图像描述](../Images/b3bc15d01b2f0686029973b5a9f5957a.png)](https://i.stack.imgur.com/5XwW9.png)

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-01-20T18:33:45.547

您可以使用以下命令从虚拟框中删除 VM-

```
vagrant destroy 
```

并使用以下命令创建虚拟机并重新启动 -

```
vagrant up 
```

# c# - 如何更新 Windows 服务（不是自动更新）

> ID：13769809
> 
> 赞同：0
> 
> 时间：2012-12-07T19:32:44.497
> 
> 标签：c#, windows-services

我继承了几个 c# windows 服务项目。我已经修复了代码中的一些错误，现在我需要部署新的可执行文件。更新/更换 Windows 服务的正常流程是什么？我对正在安装它的服务器具有远程桌面访问权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:34:53.520

只需**停止**服务并替换可执行文件并可能会更新您更新的其他依赖项。当然，为了安全起见，备份正在运行的服务可能会有所帮助:) 如果您需要确切知道服务在哪里运行，请打开服务控制管理器，选择您的服务，然后查看属性/常规：您将找到可执行路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:38:36.093

替换exe和dll就足够了。显然你必须先停止服务。如果 dll 在 GAC 中注册，它们可能会被该机器上的其他软件使用，在这种情况下，在编译和部署之前更改它们的版本。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-07T19:40:29.000

对于 .Net Windows 服务，您需要使用 InstallUtil 命令行工具卸载旧服务，然后使用它安装新服务。

看...

[http://msdn.microsoft.com/en-us/library/50614e95(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/50614e95(v=vs.80).aspx)

# javascript - OnSubmit 不接受 IE7 中的函数返回

> ID：13769815
> 
> 赞同：-1
> 
> 时间：2012-12-07T19:33:19.130
> 
> 标签：javascript, internet-explorer, jquery, internet-explorer-7

我正在尝试通过 ajax 提交表单，无论我提交什么都会按照正常的发布功能在 IE7 中触发页面重新加载。

我试过的

```
 // Example function / attempt 0
<script>
    function FunctionName() {
        $.ajax({
           type: "POST",
           blah: "blah"
        });
        return false;
    }
</script>

// attempt 1
<form onsubmit="return FunctionName()">
// attempt 2
<form onsubmit="FunctionName(); return false;">
// attempt 3
$("#form id").submit(FunctionName); 
```

我最终得到的是通过 ajax 输入的乱码和每次刷新页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T20:21:28.637

您的代码有太多问题。这是应该工作的代码：

```
<script>
function Name() {

    $.ajax({
       type: "POST",
       url: "/echo/html/"
    });
    return true;
}
</script>

<form onsubmit="return Name()">
    <input type="submit" />
</form> 
```

为了您的方便，这里也：http: [//jsfiddle.net/jasdeepkhalsa/YQN6K/5/](http://jsfiddle.net/jasdeepkhalsa/YQN6K/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:55:54.050

[http://jsfiddle.net/a6WR5/](http://jsfiddle.net/a6WR5/)

我认为你只需要在`return FunctionName()`内部包含一个函数。看小提琴。

此外，您不需要文档就绪调用。

# c# - 获取 CRM 实体名称的简单快捷方式

> ID：13769816
> 
> 赞同：2
> 
> 时间：2012-12-07T19:33:20.917
> 
> 标签：c#, sdk, dynamics-crm-2011

在检索包括所有属性的 CRM 实体时，在某些情况下，某些具有该类型的属性`EntityReference`没有名称。在这种情况下，`ID`设置了引用的 ，但它的`Name`属性是`null`。

我必须使用该名称进行一些评估。因此，我试图查询该引用实体以获取其名称。问题是，包含实体名称的属性对于不同的实体类型是不同的。

（例如，对于 Account，它是“name”，对于 Incident，它是“title”，对于其他类型，它是“somePrefix_name_or_so”）

是否有使用 CRM-SDK 和查询获取实体名称（实体引用的名称属性）的简单方法？

其他详细信息：代码位于 CRM 插件中。那里的前/后图像通常包含所有属性，但在某些情况下，在更新期间，（几乎）所有实体引用都会丢失它们的名称。字典中的属性仍然存在，包括 EntityReference 对象。只有 EntityReference 实例的 Name 属性为空。

到目前为止我的方法：

*   在插件中检索实体
*   获取特定属性（类型：EntityReference）
*   获取该 EntityReference 的名称
    *   如果该名称是`null`，请执行查询以获取该名称（帮助！如何？）
*   在某些逻辑中使用该名称

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T19:40:23.280

为此，您需要拥有拥有 EntityReference 的实体的 EntityMetadata。然后您可以获取 EntityMetadata.PrimaryNameAttribute 属性，它包含主名称的属性名称。给定该属性名称，您可以获得所需的内容。在此处查看有关此属性的更多信息：http: [//msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.metadata.entitymetadata.primarynameattribute.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.metadata.entitymetadata.primarynameattribute.aspx)

# regex - 仅显示使用正则表达式找到的结果类型的一个实例

> ID：13769818
> 
> 赞同：1
> 
> 时间：2012-12-07T19:33:26.127
> 
> 标签：regex, sorting, cygwin

我什至不知道如何问这个问题，所以请耐心等待。我有一个（主要是）字母数字列表，它们在一个巨大的 XML 中绘制数字，我正在为其调整架构。关于它们的创建方式似乎没有标准，所以我正在尝试创建一个 XSD 正则表达式模式供他们验证。通常情况下，我只是磨碎它们，但在这种情况下，它们有数百个。我想要做的是将它们隔离为每种**类型**的图纸编号的单个实例，然后我可以在 XSD 中创建一个带有适当 OR 语句的正则表达式。

我的环境是 Win7，但我有一个 Ubuntu VM 和 Cygwin（我目前正在做这一切）。我不知道是否有可以做到这一点的 Linux 实用程序，或者我的 grep/sed-fu 是否很弱。我不知道如何减少这个问题，除非通过蛮力（我已经为这个拼图的其他部分做了没有这个大的部分）。

我使用这个命令行语句来获取绘图“数字”。它查找图纸编号，对它们进行排序，只给我唯一的，然后去掉封闭的标签：

```
grep "DrawingNumber" uber.xml | sort | uniq | sed -e :a -e 's/<[^>]*>//g;/</N;//ba' 
```

这是一些实际绘图“数字”的示例（还有数百个）：

```
10023C/10024C *<= this is how it's represented in the XML & I can't (easily) change it.
10023C
10043E
10051B
10051D
10058B
10059C
10447B 10447B *<= this is how it's represented in the XML & I can't (easily) change it.
10064A
10079B
10079D
10082B
10095A
10098B
10100B
10102
10109B
10109C
10115
101178
10118F 
```

我想要的是一个列表，它将图纸编号列表减少为每种类型的单个实例。例如，这组绘图“数字”：

```
10023C
10043E
10051B
10051D
10058B
10059C 
```

将减少为：

```
nnnnnx 
```

表示所有 5 位数字后跟一个字母的实例，我可以为其创建如下模式：

```
[0-9]{5}[a-z A-Z]{1} 
```

相似地，

```
10102
10115 
```

将减少为：

```
nnnnn 
```

这将代表 5 位数字的所有实例，后面没有任何内容，并通过以下方式捕获：

```
[0-9]{5} 
```

等等。我希望这些信息足以以可行的形式呈现问题。就像我说的那样，我什至不知道如何提出问题，而且当我经常在 SO 中写一个问题时，我意识到了一个解决方案，甚至不提交它，但是这个让我很难过。

**更新：** 使用@nullrevolution 的答案，这就是我想出的（这澄清了我下面的评论，这在很大程度上是不可读的）。

我最终使用的命令行是：

```
grep "DrawingNumber" uber.xml | sort -d | uniq | sed -e :a -e 's/<[^>]*>//g;/</N;//ba' | sed 's/[A-Za-z]/x/g;s/[0-9]/n/g' | sort -u 
```

在看起来像这样的数据上：

```
<DrawingNumber>10430A</DrawingNumber>
<DrawingNumber>10431</DrawingNumber>
<DrawingNumber>10433</DrawingNumber>
<DrawingNumber>10434</DrawingNumber>
<DrawingNumber>10443A</DrawingNumber>
<DrawingNumber>10444</DrawingNumber>
<DrawingNumber>10446</DrawingNumber>
<DrawingNumber>10446A</DrawingNumber>
<DrawingNumber>10447</DrawingNumber>
<DrawingNumber>10447B 10447B</DrawingNumber>
<DrawingNumber>10447B</DrawingNumber>
<DrawingNumber>10454A</DrawingNumber>
<DrawingNumber>10454B</DrawingNumber>
<DrawingNumber>10455</DrawingNumber>
<DrawingNumber>10457</DrawingNumber> 
```

这给了我一个通用的输出（对于我的所有数据，而不是上面的片段）：

```
nnnnn
nnnnnn
nnnnnx
nnnnnx nnnnnx
nnnnnx/nnnnnx
nnxxx 
```

这正是我所需要的。事实证明，接下来我需要弄清楚的两个实例将从这种新方法中受益，所以谁知道这节省了我多少小时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T20:01:50.943

尝试先剥离封闭标签，然后：

```
sed 's/[A-Za-z]/x/g;s/[0-9]/n/g' file | sort -u 
```

它将用“n”替换所有字母，用“x”替换所有数字，然后删除所有重复项。

针对您的示例输入文件运行，输出为：

```
nnnnnx 
```

如果这不可行，那么您能否以原始形式共享输入文件的一部分？

# jquery - 如何仅附加此数据一次

> ID：13769825
> 
> 赞同：0
> 
> 时间：2012-12-07T19:33:37.237
> 
> 标签：jquery, ajax

我有一些返回的 xml 正在被解析并在提交表单时显示：

```
$("#Button").live('click',function(){
$("#Form").validate({
    submitHandler: function(form) {
        $('#prcs3').show();
        var dataString = $(form).serialize();
        $.ajax({
            type: $(form).attr('method'),
            url: form.action,
            data: dataString,
            clearForm: true,
            success: function(data) {
                var answer = $(data).find("td:eq(3)").text();
                var message = $(data).find("td:eq(5)").html();
                var $xml = $( message );
                if (answer==="True") {
                    $('#prcs3').hide();
                    $xml.find('license').each(function(){
                        var XXXCustomerID = $(this).find('FXCMCustomerID').text();
                        var XXLicense  = $(this).find('NTLicense').text();
                        var Log  = $(this).find('Log').text();
                        var ExpirationDate  = $(this).find('ExpirationDate').text();
                        $("#resultGenerate").show().append($('<li><span class="ID">' + XXXCustomerID + '</span><span class="XXL">' + XXLicense + '</span><span class="Log">' + Log + '</span><span class="Exp">' + ExpirationDate + '</span></li>'));

                    });
                } else {
                    $('#prcs3').hide();
                    $('input[type="text"], input[type="password"]').val("");
                }
            }
        });
        return false;
    }
});
}); 
```

我需要想办法让它只追加一次，或者如果单击两次，则隐藏 div 并再次填充它。我不希望用户能够多次单击按钮并不断添加相同的记录。我试图通过检查它是否有长度来连接它，并在 if/else 语句中执行或可能使用 .one 函数，但无济于事。我无法弄清楚如何将正确的部分包装在 if/else 中，或者如何让 .one 函数同时获取“查找”和“每个”属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:40:43.170

里卡多斯的替代答案：

```
$("#Button").live('click',function(){
$("#Form").validate({
submitHandler: function(form) {
    $('#prcs3').show();
    var dataString = $(form).serialize();
    $.ajax({
        type: $(form).attr('method'),
        url: form.action,
        data: dataString,
        clearForm: true,
        success: function(data) {
            var answer = $(data).find("td:eq(3)").text();
            var message = $(data).find("td:eq(5)").html();
            var $xml = $( message );
            if (answer==="True") {
                $('#prcs3').hide();
                $xml.find('license').each(function(){
                    var XXXCustomerID = $(this).find('FXCMCustomerID').text();
                    var XXLicense  = $(this).find('NTLicense').text();
                    var Log  = $(this).find('Log').text();
                    var ExpirationDate  = $(this).find('ExpirationDate').text();
                    $("#resultGenerate").empty();    //Empty the content before placing new stuff in                    
                    $("#resultGenerate").show().append($('<li><span class="ID">' + XXXCustomerID + '</span><span class="XXL">' + XXLicense + '</span><span class="Log">' + Log + '</span><span class="Exp">' + ExpirationDate + '</span></li>'));

                });
            } else {
                $('#prcs3').hide();
                $('input[type="text"], input[type="password"]').val("");
            }
        }
    });
    return false;
}
});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T19:37:43.527

改为使用`html`。

```
$("#resultGenerate").show().html('...'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T20:11:05.303

您应该`.remove()`在成功处理程序的开头使用相同的数据（使用任何合适的选择器），以防止它被显示两次。

# wpf - 来自 ViewModel 的 Rogue PropertyChanged 通知

> ID：13769834
> 
> 赞同：2
> 
> 时间：2012-12-07T19:34:03.370
> 
> 标签：wpf, data-binding, mvvm, inotifypropertychanged

> **可能重复：**
> [为什么绑定更新而不实现 INotifyPropertyChanged？](https://stackoverflow.com/questions/7767218/why-does-the-binding-update-without-implementing-inotifypropertychanged)

下面的简单程序让我对数据绑定感到头疼。我是新手，这就是为什么我怀疑它有一个简单的答案。基本上，我有两个文本框绑定到同一个属性 myString。我还没有设置 ViewModel（只是一个具有一个属性 myString 的类）来向 View 提供任何通知以了解何时更改 myString，因此即使两个文本框都操作双向绑定，文本框也不应该更改 myString 时更新，对吗？

除了...

在大多数情况下，这是真的 - 我使用窗口底部的“更改值”按钮将 myString 的值更改为用户在相邻文本框中键入的任何内容，以及顶部的两个文本框，即使它们绑定到 myString，不要更改。美好的。但是，如果我在 TextBox1 中编辑文本，从而更改 myString 的值（尽管仅当文本框由于默认的 UpdateSourceTrigger 属性而失去焦点时，请参阅参考资料），TextBox2 不应更新，因为它不应接收 myString 的任何更新已经改变。但是，一旦 TextBox1 失去焦点（比如在 TextBox2 内单击），TextBox2 就会使用 myString 的新值进行更新。

到目前为止，我最好的猜测是，因为 TextBoxes 绑定到同一个属性，所以与 TextBox1 更新 myString 相关的事情会给 TextBox2 一个通知它已更改。非常令人困惑，因为我没有使用 INotifyPropertyChanged 或类似的东西。

为了澄清，我不是在问如何解决这个问题。我知道我可以将绑定模式更改为单向选项。我想知道是否有人可以对这种奇怪的行为做出解释？

视图模型：

```
 namespace WpfApplication1
    {
        class ViewModel
        {
            public ViewModel()
            {
                _myString = "initial message";
            }

            private string _myString;

            public string myString
            {
                get
                {
                    return _myString;
                }
                set
                {
                    if (_myString != value)
                    {
                        _myString = value;

                    }
                }
            }
        }
    } 
```

看法：

```
 <Window x:Class="WpfApplication1.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:local="clr-namespace:WpfApplication1"
            Title="MainWindow" Height="350" Width="525">
        <Window.DataContext>
            <local:ViewModel />
        </Window.DataContext>
        <Grid>
            <!-- The culprit text boxes -->
            <TextBox Height="23" HorizontalAlignment="Left" Margin="166,70,0,0" Name="textBox1" VerticalAlignment="Top" Width="120" Text="{Binding Path=myString, Mode=TwoWay}" />
            <TextBox Height="23" HorizontalAlignment="Left" Margin="166,120,0,0" Name="textBox2" VerticalAlignment="Top" Width="120" Text="{Binding Path=myString, Mode=TwoWay}"/>

            <!--The buttons allowing manual change of myString-->
            <Button Name="changevaluebutton" Content="change value" Click="ButtonUpdateArtist_Click" Margin="12,245,416,43" Width="75" />
            <Button Content="Show value" Height="23" HorizontalAlignment="Left" Margin="12,216,0,0" Name="showvaluebutton" VerticalAlignment="Top" Width="75" Click="showvaluebutton_Click" />
            <Label Content="" Height="23" HorizontalAlignment="Left" Margin="116,216,0,0" Name="showvaluebox" VerticalAlignment="Top" Width="128" />
            <TextBox Height="23" HorizontalAlignment="Left" Margin="116,245,0,0" Name="changevaluebox" VerticalAlignment="Top" Width="128" />

            <!--simply some text-->
            <Label Content="TexBox1" Height="23" HorizontalAlignment="Left" Margin="99,70,0,0" Name="label1" VerticalAlignment="Top" Width="61" />
            <Label Content="TexBox2" Height="23" HorizontalAlignment="Left" Margin="99,118,0,0" Name="label2" VerticalAlignment="Top" Width="61" />
        </Grid>
    </Window> 
```

后面的代码供查看：

```
 namespace WpfApplication1
    {
        /// <summary>
        /// Interaction logic for MainWindow.xaml
        /// </summary>
        public partial class MainWindow : Window
        {
            ViewModel viewModel;

            public MainWindow()
            {
                InitializeComponent();
                viewModel = (ViewModel)this.DataContext;
            }

            private void showvaluebutton_Click(object sender, RoutedEventArgs e)
            {
                showvaluebox.Content = viewModel.myString;
            }

            private void ButtonUpdateArtist_Click(object sender, RoutedEventArgs e)
            {
                viewModel.myString = changevaluebox.Text;
            }
        }
    } 
```

# ruby-on-rails - 轨道回调不起作用

> ID：13769835
> 
> 赞同：1
> 
> 时间：2012-12-07T19:34:04.917
> 
> 标签：ruby-on-rails, callback

我正在尝试执行 after_save 条件回调

```
after_save :change_rel_status, :if => :relation_type_id == 1

def change_rel_status
  self.status = "Confirmed"
  self.save
end 
```

但我收到错误消息`undefined method after_save for false:FalseClass`

```
{"utf8"=>"✓",
"_method"=>"put",
"authenticity_token"=>"f4IN...=",
"relationship"=>{"relation_type_id"=>"1",
"category_ids"=>[""]},
"commit"=>"Update Relationship",
"id"=>"19"} 
```

我不确定是不是因为表单还有其他模型的其他属性没有更新？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T20:00:38.010

我可以建议一些更简单的东西：

```
before_save :change_rel_status

def change_rel_status
  if params[:relationship][:relation_type_id] == 1
    self.status = "Confirmed"
  end
end 
```

# qt - 有没有办法在 QSlider 值增加时生成信号

> ID：13769836
> 
> 赞同：2
> 
> 时间：2012-12-07T19:34:13.183
> 
> 标签：qt, slider, signals-slots

我试图触发来自 QSlider 的不同信号，以了解它何时增加或减少。不幸的是，由于我在我的控制之外创建的程序的限制，我无法跟踪滑块的值而只是进行比较。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T19:49:05.207

如果我对您的理解正确，则您无法`valueChanged(int)`确定该值是增加还是减少，因为您无法跟踪该值。但是，您需要这样做，因为 QSlider 没有用于增加/减少值的不同信号。

使用此帮助程序类来跟踪当前值。它将提供的目标对象的信号重新映射`valueChanged(int)`到新信号`valueIncreased(int)`并`valueDecreased(int)`告诉（绝对）差异。

```
class ValueChangeTracker : public QObject
{
    Q_OBJECT
    int v;
public:
    ValueChangeTracker(QObject *target) :
        QObject(target)
    {
        connect(target, SIGNAL(valueChanged(int)), SLOT(changed(int)));
        v = target->property("value"); // or ->value() if you specifically use QSlider* instead of QObject* as the target type
    }
signals:
    void valueIncreased(int);
    void valueDecreased(int);
private slots:
    void changed(int newValue) {
        int diff = newValue - v;
        v = newValue;
        if(diff > 0) emit valueIncreased(diff);
        if(diff < 0) emit valueDecreased(-diff);
    }
}; 
```

要使用它，只需创建这个类的一个新实例并连接到它的信号。在 QObject 树中，它成为目标对象的子对象，因此您不必保留指向实例的指针。

```
QSlider *mySlider = ...
ValueChangeTracker *tracker = new ValueChangeTracker(mySlider);
connect(tracker, SIGNAL(valueIncreased(int)), ...);
connect(tracker, SIGNAL(valueDecreased(int)), ...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:39:09.893

`QSlider`发出信号`valueChanged`，只需将其连接到插槽：

```
mySlider.valueChanged.connect(self.on_mySlider_valueChanged) 
```

如果您愿意，可以在那里进行测试并发出自定义信号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T19:40:02.113

我不完全理解这个问题，也许举个例子会有所帮助。但是，如果您查看[QSlider](http://doc.qt.digia.com/qt/qslider.html#details)`valueChanged(int)`的文档，它会在滑块的值更改时发出信号。

# nagios - Icinga - 如何为每个主机的服务设置自定义联系人

> ID：13769837
> 
> 赞同：0
> 
> 时间：2012-12-07T19:34:19.173
> 
> 标签：nagios

我想根据调用服务的主机为同一服务设置不同的联系人。

我尝试使用宏，但只有在调用命令时才会翻译它。然后我尝试编辑命令本身，但我认为变量 CONTACTEMAIL 是由 icinga 在内部管理的。我对只将纯电子邮件添加到 HOST 中定义的一些自定义宏感到不舒服。

```
define command{
    command_name    notify-service-by-email
    command_line    /usr/bin/printf "%b" "***** Icinga *****\n\nNotification Type: $NOTIFICATIONTYPE$\n\nService: $SERVICEDESC$\nHost: $HOSTALIAS$\nAddress: $HOSTADDRESS$\nState: $SERVICESTATE$\n\nDate/Time: $LONGDATETIME$\n\nAdditional Info:\n\n$SERVICEOUTPUT$\n" | /bin/mail -s "** $NOTIFICATIONTYPE$ Service Alert: $HOSTALIAS$/$SERVICEDESC$ is $SERVICESTATE$ **" $CONTACTEMAIL$
    } 
```

有没有人尝试/解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T14:39:41.633

$CONTACTEMAIL$ 是联系人对象的宏，引用属性“email”。您的命令“notify-service-by-mail”将分配给诸如“service_notification_command”之类的联系人，然后（或通过联系人组）将该联系人分配给服务。因此，一旦发生通知，所有必需的信息都可用，核心将宏 $CONTACTEMAIL$ 转换为实际值，然后将转换后的字符串传递给 shell 以执行。

我会选择 2 个选项

*   使用隐含继承（[http://docs.icinga.org/latest/en/objectinheritance.html](http://docs.icinga.org/latest/en/objectinheritance.html)），并且只定义主机的联系人，而不是下面的服务。配置解析器将识别应该继承联系人，然后您的服务将仅获取相关主机分配的联系人。但是，如果不想将主机警报通知给与服务本身相同的联系人，这可能会变得很难看。

*   使这更加动态，即根据他们的主机名设置服务联系人，我建议使用配置（生成）工具，允许您例如操作服务-> 主机与定义的联系人的关系。虽然，那里似乎没有真正的通用解决方案......我会尝试使用 ldap 树本身，但不确定这是否会在这里工作，而不是编写自定义脚本或使用一些木偶魔法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:27:18.307

您可以在主机上定义您的联系人并将其从服务中删除。这样，该主机中的每个服务都将继承其联系人，如果您在服务中再次定义联系人，它将忽略前一个联系人。

如果联系人依赖于每个服务而不是主机，则您必须为每个主机/联系人定义相同的服务。

# sql - 如何从数百个单独的脚本重建数据库模式？

> ID：13769841
> 
> 赞同：1
> 
> 时间：2012-12-07T19:34:26.470
> 
> 标签：sql, sql-server-2008

我要求客户向我发送他们当前的 MS SQL 数据库的副本。我没有获得数据库备份或可用于重新创建数据库的一小组脚本，而是为我提供了数百个单独的 SQL 脚本，并且没有关于它们需要运行的顺序的说明。

这些脚本不能简单地在一个批处理操作中执行，因为表之间存在外键依赖关系。似乎他们将这些脚本限制为为每个脚本创建一个表或存储过程。

通常，我只是要求客户以更有用的格式提供信息，但他们不知道及时回复我们，而且由于他们的延迟，我们的项目时间表已经处于危险之中。

有没有什么工具可以用来从这组庞大的脚本中重新创建数据库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T19:39:04.893

这可能听起来有点神秘，但您可以迭代地执行以下操作：

1.  将所有脚本放入“要运行的脚本”列表中
2.  运行“待运行”脚本中的所有脚本
3.  删除成功的运行
4.  重复 2-3 直到没有脚本

没有依赖关系的脚本将在第一轮完成。在下一轮中依赖它们的那些，然后以此类推。

我建议您从一个元脚本操作所有这些，它使用数据库表来存储可用脚本的名称。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T01:42:43.877

如果您在 Red Gate SQL Compare 中将您的脚本文件夹设置为数据源，并指定一个空白数据库作为目标，它应该允许您比较并部署到目标数据库。这是因为该工具能够从您指定的文件夹中递归地读取所有 SQL 创建脚本。这是一个功能齐全的 14 天试用版，因此您可以轻松地在您的场景中对其进行测试。

[http://www.red-gate.com/products/sql-development/sql-compare/](http://www.red-gate.com/products/sql-development/sql-compare/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T19:43:31.407

以戈登为基础。
将它们分成一张桌子。
计算 FK 的数量并从最少的第一个开始排序。
然后删除按照 Gordon 建议运行的脚本。
另一个潜在的问题是创建表并在 FK 上失败并离开表。
您稍后再回来创建镜头，并且桌子已经在那里，所以它失败了。

如果您使用表 FK 解析它们 从
列表中没有 FK 的表开始
然后循环通过带有 FK 的表
仅当所有 FK 都已在列表中时才添加到列表中。

如果您了解 .NET，那么一个具有字符串属性表、字符串属性脚本和 FK 属性名称的属性列表字符串的类。
他们应该解析出非常干净的正则表达式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T19:44:57.277

（也许）最快（也是迄今为止最肮脏）的方法是将所有脚本连接在一起，确保在每个脚本之间都有一个 GO 语句。确保您的脚本中没有 DROP 语句，否则此技术将不起作用。

重复运行连接脚本......我不知道，大约 10 次迭代。您可能会在测试系统中正确地重新创建他们的数据库。

如果您感觉更严格，请遵循 Gordon 的建议。我真的不知道有什么工具能够重建依赖关系，但你可能想看看 Red-Gate 的 SQL 比较，你可以免费获得一个演示，并且可以做一些非常神奇的事情.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T19:45:06.793

您可以删除所有外键约束。然后，组织脚本，使其首先创建所有表，然后添加回所有外键。最后创建索引。

# google-bigquery - Bigquery 与 where 一起使用

> ID：13769843
> 
> 赞同：0
> 
> 时间：2012-12-07T19:34:34.977
> 
> 标签：google-bigquery

bigquery 中以下查询的正确语法是什么？SELECT COUNT(children.names) WITHIN AS numberOfChildren FROM [dataset.tableId] where numberOfChildren > 10;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T20:02:31.787

尝试添加一个子选择并将过滤器应用于外部选择：

```
SELECT numberOfChildren FROM (
   SELECT COUNT(children.names) WITHIN RECORD AS numberOfChildren 
   FROM [dataset.tableId]
) 
WHERE numberOfChildren > 10; 
```

# php - php大整数

> ID：13769848
> 
> 赞同：-4
> 
> 时间：2012-12-07T19:34:45.273
> 
> 标签：php

> **可能重复：**
> [如何在 PHP 中处理大数字？](https://stackoverflow.com/questions/2490888/how-to-work-with-big-numbers-in-php)

我正在开发一个关于 RSA 算法的网络应用程序。为了使 RSA 更安全，你必须使用大数字，所以就这样吧....所以首先我将字母表（所有 A 到 Z）转换为它们的 ASCII 代码，我使用 ord()。

但问题是`ciphertext=m(pow)e*[mod n]` 如果 a 的 ascii 是 97 ，现在要计算 m （消息是一个数字）的幂 e 的函数，假设 e=57 那么 97 的幂 57 将是巨大的......我有一台 32 位的笔记本电脑。

所以请告诉我应该使用的正确数据类型，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T23:57:04.127

不要滚动自己的加密。

如果您没有安装 OpenSSL 扩展程序或二进制[文件](http://phpseclib.sourceforge.net/)，请查看[OpenSSL 扩展程序](http://php.net/book.openssl)、[二进制文件](https://stackoverflow.com/a/9337644/168868)或[phpseclib 。`openssl`](https://stackoverflow.com/a/9337644/168868)

# cocoa - 从缩放视图拖动时 NSView 图像损坏

> ID：13769849
> 
> 赞同：2
> 
> 时间：2012-12-07T19:34:46.563
> 
> 标签：cocoa, drag-and-drop, nsview

我有一个 NSView 的自定义子类，它实现拖放以将视图中的图像复制到另一个应用程序。我的类中的相关代码如下所示：

```
#pragma mark -
#pragma mark Dragging Support
- (NSImage *)imageWithSubviews
{
    NSSize imgSize = self.bounds.size;
    NSBitmapImageRep *bir = [[NSBitmapImageRep alloc] initWithFocusedViewRect:[self frame]];
    [self cacheDisplayInRect:[self frame] toBitmapImageRep:bir];

    NSImage* image = [[NSImage alloc]initWithSize:imgSize];
    [image addRepresentation:bir];

    return image;
}

- (void)mouseDown:(NSEvent *)theEvent
{
    NSSize dragOffset = NSMakeSize(0.0, 0.0); // not used in the method below, but required.
    NSPasteboard *pboard;
    NSImage *image = [self imageWithSubviews];
    pboard = [NSPasteboard pasteboardWithName:NSDragPboard];
    [pboard declareTypes:[NSArray arrayWithObject:NSTIFFPboardType]
                   owner:self];

    [pboard setData:[image TIFFRepresentation]
            forType:NSTIFFPboardType];

    [self dragImage:image
                 at:self.bounds.origin
             offset:dragOffset
              event:theEvent
         pasteboard:pboard
             source:self
          slideBack:YES];

    return;
}

#pragma mark -
#pragma mark NSDraggingSource Protocol

- (NSDragOperation)draggingSession:(NSDraggingSession *)session sourceOperationMaskForDraggingContext:(NSDraggingContext)context
{
    return NSDragOperationCopy;
}

- (BOOL)ignoreModifierKeysForDraggingSession:(NSDraggingSession *)session
{
    return YES;
} 
```

在我调整主窗口大小之前，这将按预期工作。主窗口仅以相同的增量增加大小/宽度，以在此视图中保持适当的比例。调整窗口大小时，视图会在屏幕上正确显示其内容。

当我将窗口大小调整超过大约 + 25% 时，问题就出现了。虽然它仍按预期显示，但被拖出的图像（例如，进入 Pages）已损坏。它似乎在其自身顶部重复了该图像的一部分。

这是它通常的样子：

![正常外观](../Images/29aa6addb5e08fa5a9fe3beeaf50708a.png)

这是在调整主窗口大小以使其变大后拖动到 Pages 时的样子（缩小到此处显示 - 想象它是第一张图像大小的 2-3 倍）： ![腐败的外表](../Images/01435039a4a2689cf9b2a1696a483fc7.png)

请注意，我用虚线矩形突出显示了损坏区域。

还有一些注意事项：我设置了边界，`NSMakeRect(-200,-200,400,400)`因为它使对称绘图更容易一些。当窗口调整大小时，我重新计算边界以将 0,0 保持在 NSView 的中心。NSView 总是方形的。

最后，Apple 文档为should中的`bitmapImageRep`参数声明了以下内容`cacheDisplayInRect:toBitmapImageRep:`

> 一个 NSBitmapImageRep 对象。为了像素格式的兼容性，应该从 bitmapImageRepForCachingDisplayInRect: 中获得 bitmapImageRep。

我试过使用`bitmapImageRepForCachingDisplayInRect:`，但我看到的只是图像右上象限中金字塔的左下象限。这让我觉得我需要为捕获添加偏移量`bitmapImageRep`，但我一直无法确定如何做到这一点。

这是`imageWithSubviews`我尝试时的代码：

```
- (NSImage *)imageWithSubviews
{
    NSSize imgSize = self.bounds.size;
    NSBitmapImageRep *bir = [self bitmapImageRepForCachingDisplayInRect:[self bounds]];
    [self cacheDisplayInRect:[self bounds] toBitmapImageRep:bir];

    NSImage* image = [[NSImage alloc]initWithSize:imgSize];
    [image addRepresentation:bir];

    return image;
} 
```

这就是结果图像的显示方式：

![只有左下象限显示在右上角](../Images/345b6b356950f5c24f0d683d9f619a65.png)

这是在右上角绘制的左下象限的视图。

放大窗口后从 NSView 拖动时导致损坏的原因是什么？如何解决这个问题和/或更改我上面列出的方法的实现以避免问题？

* * *

更多信息：

当我将`imageWithSubviews`方法更改为：

```
- (NSImage *)imageWithSubviews
{

    NSSize imgSize = self.bounds.size;
    NSBitmapImageRep *bir = [[NSBitmapImageRep alloc] initWithFocusedViewRect:[self frame]];
    [self cacheDisplayInRect:[self bounds] toBitmapImageRep:bir];

    NSImage* image = [[NSImage alloc]initWithSize:imgSize];
    [image addRepresentation:bir];

    return image;
} 
```

我得到一个没有缩放的损坏图像，其中图像的左下象限再次绘制在右上象限的顶部，如下所示：

![象限被覆盖](../Images/c7efc8c9c61ea56e2738252e470dade7.png)

我到底做错了什么？

* * *

**解决方案：**

虽然它没有解决使用 绘图的核心问题`NSBitmapImageRep`，但以下内容`-imageWithSubviews`可以防止损坏并输出正确的图像：

```
- (NSImage *)imageWithSubviews
{
    NSData *pdfData = [self dataWithPDFInsideRect:[self bounds]];
    NSImage* image = [[NSImage alloc] initWithData:pdfData];

    return image;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:27:19.240

根据上面的一些调试，我们确定问题出在`-imageWithSubviews`.

与其使用 为视图生成图像数据`-cacheDisplayInRect:toBitmapImageRep:`，不如将其更改为`-dataWithPDFInRect:`解决问题。

# python - Django-CMS 和多个菜单

> ID：13769858
> 
> 赞同：2
> 
> 时间：2012-12-07T19:35:11.540
> 
> 标签：python, django, django-cms, django-mptt

我有许多顶级页面需要分成两个不同的菜单。使用 Django 和 Django-CMS 最好的方法是什么？

我一直在阅读许多 Google 主题，最常见的建议是将页面嵌套在具有自定义 ID 的子标题下。然后可以使用函数**show_menu_below_id**提取菜单。虽然此方法有效，但 URL 已更改以匹配页面层次结构，我想避免这种情况。我知道有一些方法可以解决此问题，但它们有自己的问题，例如 FLAT_URLS（更改所有 url 并且正在停用）和overwrite-url - 但这是手动的，不需要。

感谢您的任何帮助或建议..

**菜单1**

```
HOME
B
C 
```

**菜单2**

```
D
E
F 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T20:37:39.223

我会结合覆盖网址使用 show_menu_below_id 方式。不好，但非常边缘的情况。

# javascript - 如何从 WDCalendar 调用 JSF 操作

> ID：13769860
> 
> 赞同：0
> 
> 时间：2012-12-07T19:35:33.857
> 
> 标签：javascript, jquery, jsf, richfaces

如何在 WDcalender 中调用 JSF 动作，我在 JSF RichFaces 中使用 WDCALENDAR，要加载编辑页面需要调用动作，下面是我的代码。

我需要用 JSF 操作替换 Edit.jsp。

```
 function Edit(data) {//Edit Link 
                var eurl = 'Edit.jsp?id={0}&amp;start={2}&amp;end={3}&amp;isallday={4}&amp;title={1}';
                if (data) {
                    var url = StrFormat(eurl, data);
                    OpenModelWindow(url, { width: 735, height: 500, caption: "Manage  The Calendar", onclose: function() {
                        $("#gridcontainer").reload();
                    }
                    });
                }
            } 
```

在上面的代码中，Edit.jsp 的内容将显示在一个弹出窗口中......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:31:55.887

`managed-bean`您可以使用`<a4j:jsFunction>`组件 调用方法。
**Javascript：**

```
function Edit(data) {
   callBeanMethod();
   ............
} 
```

**XHTML：**

```
<h:form id="test">
    <a4j:jsFunction name="callBeanMethod" action="#{myBean.myAction()}">
</h:form> 
```

# javascript - 创建键匹配的数组

> ID：13769865
> 
> 赞同：3
> 
> 时间：2012-12-07T19:35:41.653
> 
> 标签：javascript, jquery, arrays, object

我有两个对象数组：

```
var arOne = [
    {key: 'alpha', value: 5},  
    {key: 'beta', value: 11},  
    {key: 'gamma', value: 15},  
    {key: 'delta', value: 12},  
    {key: 'epsilon', value: 55}  
    {key: 'pony', value: 101}
]

var arTwo = [
    {key: 'alpha', value: 5.5},  
    {key: 'beta', value: 11.5},  
    {key: 'gamma', value: 15.5},  
    {key: 'psi', value: 12.5},  
    {key: 'omega', value: 55.5}  
] 
```

我需要将值合并到一个数组中。

键匹配的情况：使用键创建一个数组并将值附加`arTwo`到`arOne`。

键不匹配的情况：如果键存在于 中`arOne`，我将值 from`arOne`和 0包括在内`arTwo`。如果密钥存在于 中`arTwo`，我将包含一个 0`arOne`和来自 的值`arTwo`。

请注意`arOne`和`arTwo`可能有不同的大小（请参阅 中的`pony`键`arOne`）。

结果应该是这样的：

```
var result = [
    ['alpha', 5, 5.5],  
    ['beta', 11, 11.5],  
    ['gamma', 15, 15.5],  
    ['delta', 12, 0],  
    ['epsilon', 55, 0],  
    ['pony', 101, 0],
    ['psi', 0, 12.5],  
    ['omega', 0, 55.5],  
] 
```

我一整天都在盯着这个，并抓了我所有的尝试。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:59:36.647

```
function combine(obj1, obj2){
    var arr = [], k, i;
    for (k = 0; k < obj1.length; ++k){
        arr.push([obj1[k].key, obj1[k].value]);
    }
    for (k = 0; k < obj2.length; ++k){
        var exists = false;
        for (i = 0; i < arr.length; ++i){
            if(arr[i][0] === obj2[k].key){
               arr[i].push(obj2[k].value);
               var exists = true; 
               break;
            }
        }
        if (!exists){
            arr.push([obj2[k].key, 0, obj2[k].value]);
        }
    }
    for (i = 0; i < arr.length; ++i){
        if (arr[i].length === 2){
            arr[i].push(0);
        }
    }

    return arr;
} 
```

像这样调用：

```
var myNewArray = combine(arOne, arTwo); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T20:01:26.450

这里简单介绍一下。您遍历第一个数组并将数据推送到结果数组中。当你循环第二个时有点棘手。您获取每个键值对并检查该键是否已存在于结果数组中。如果是，则添加它，如果不是（ found = false ）将其添加到结果数组中：

```
var result = [];
var i;

for ( i = 0; i < arOne.length; i++ ) {
    result.push( [ arOne[ i ].key, arOne[ i ].value ] );
}

for ( i = 0; i < arTwo.length; i++ ) {
    var key = arTwo[ i ].key;
    var value = arTwo[ i ].value;
    var found = false;

    for ( var k = 0; k < result.length; k++ ) {
        if ( result[ k ][ 0 ] === key ) {
            result[ k ].push( value );
            found = true;
        }
    }

    if ( ! found ) {
        result.push( [ key, value ] );
    }

} 
```

结果是您想要的数组。可能不是最有效的方法。但它可以完成工作。

另外，在一个小笔记上。您可能需要考虑使用 and object 而不是嵌套数组。所以你的结果看起来像这样：

```
var result = {
    alpha: [5, 5.5],  
    beta: [11, 11.5],  
    gamma: [15, 15.5],  
    delta: [12, 0],  
    epsilon: [55, 0],  
    pony: [101, 0],
    psi: [0, 12.5],  
    omega: [0, 55.5], 
} 
```

这可能更容易在代码中稍后处理您的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T20:27:56.410

好的..我做到了

```
var tmp_result = {}; // we need this object to make things easy
var result = [];

// add all elements in first array to result, im using this as an object so that I can easily find the keys later
$.each(arOne, function (index, element) {
    tmp_result[element.key] = [element.key, element.value];
});

// loop through second array    
$.each(arTwo, function (index, element) {
    // check if this was key already added
    if (tmp_result[element.key] != undefined) {
        // if it was added earlier then add the new key
        tmp_result[element.key].push(element.value);
    } else {
        // create a new key, add 0 in between since its not there in first array
        tmp_result[element.key] = [element.key, 0, element.value];
    }
});

// now we are left with all those elements which are in first array but not in second
$.each(tmp_result, function (key, element) {
    // check if the array has 3 elements, if not then add 0 in the end since its not there in second one
    if (element.length < 3) element.push(0);
    // pass the flattened out data to result array
    result.push(element);
});

console.log(result); 
```

小提琴 - [http://jsfiddle.net/atif089/McfUk/](http://jsfiddle.net/atif089/McfUk/)

我的输出是

```
[
    ["alpha", 5, 5.5], 
    ["beta", 11, 11.5], 
    ["gamma", 15, 15.5], 
    ["delta", 12, 0], 
    ["epsilon", 55, 0], 
    ["pony", 101, 0], 
    ["psi", 0, 12.5], 
    ["omega", 0, 55.5]
] 
```

# vba - 控制数据透视表过滤器的多个复选框

> ID：13769872
> 
> 赞同：0
> 
> 时间：2012-12-07T19:35:55.237
> 
> 标签：vba, excel

我正在尝试创建一个用户友好的数据透视表控件。我设置了多个宏来控制数据透视表，如下所示：

```
Sub FilterA()
ActiveSheet.PivotTables("PivotTable2").PivotFields("A").CurrentPage = "TRUE"
ActiveSheet.PivotTables("PivotTable2").PivotFields("B").CurrentPage = "(All)"
ActiveSheet.PivotTables("PivotTable2").PivotFields("C").CurrentPage = "(All)"
ActiveSheet.PivotTables("PivotTable2").PivotFields("D").CurrentPage = "(All)"
ActiveSheet.PivotTables("PivotTable2").PivotFields("E").CurrentPage = "(All)"
ActiveSheet.PivotTables("PivotTable2").PivotFields("F").CurrentPage = "(All)"
End Sub

Sub FilterB()
ActiveSheet.PivotTables("PivotTable2").PivotFields("A").CurrentPage = "(All)"
ActiveSheet.PivotTables("PivotTable2").PivotFields("B").CurrentPage = "TRUE"
ActiveSheet.PivotTables("PivotTable2").PivotFields("C").CurrentPage = "(All)"
ActiveSheet.PivotTables("PivotTable2").PivotFields("D").CurrentPage = "(All)"
ActiveSheet.PivotTables("PivotTable2").PivotFields("E").CurrentPage = "(All)"
ActiveSheet.PivotTables("PivotTable2").PivotFields("F").CurrentPage = "(All)"
End Sub 
```

等等...

我想要做的是能够将这些附加到复选框，但能够为多个过滤器勾选多个框。（例如 A 和 C）我意识到我不能使用上面的方法做到这一点。我有什么办法吗？我觉得我错过了什么。请记住，我对vba不是很精通。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T20:00:53.100

你的基本语法是这样的：

```
Option Explicit

Sub UseCheckBox()

Dim cb as Checkbox

Set cb = Sheets(1).Controls("myCheckbox")

If cb.Value = True

      ActiveSheet.PivotTables("PivotTable2").PivotFields("A").CurrentPage = "TRUE"

End If

End Sub 
```

您可以扩展它以添加任意数量的复选框，循环它们，更改条件等。

# javascript - 在 HTML 中调用 JavaScript 函数

> ID：13769873
> 
> 赞同：0
> 
> 时间：2012-12-07T19:35:55.800
> 
> 标签：javascript, html, google-earth-plugin

我有以下功能，它是 Google Earth API 的一部分。它会在地图上生成图像叠加层，并且必须多次调用。我如何调用这个函数并给每个调用一个唯一的 id？我想过这样的事情：

```
function createScreenOverlay(location, x , y) {
            var screenOverlay = ge.createScreenOverlay('');
            screenOverlay.setIcon(ge.createIcon(''));
            screenOverlay.getIcon().setHref(location); 

            screenOverlay.getOverlayXY().setXUnits(ge.UNITS_FRACTION);
            screenOverlay.getOverlayXY().setYUnits(ge.UNITS_FRACTION);
            screenOverlay.getOverlayXY().setX(.5);
            screenOverlay.getOverlayXY().setY(.5);

              // Set screen position in fractions.
            screenOverlay.getScreenXY().setXUnits(ge.UNITS_PIXELS);
            screenOverlay.getScreenXY().setYUnits(ge.UNITS_PIXELS);
            screenOverlay.getScreenXY().setX(x);  // Random x.
            screenOverlay.getScreenXY().setY(y);  // Random y.

              // Rotate around object's center point.
            screenOverlay.getRotationXY().setXUnits(ge.UNITS_FRACTION);
            screenOverlay.getRotationXY().setYUnits(ge.UNITS_FRACTION);
            screenOverlay.getRotationXY().setX(0.9);
            screenOverlay.getRotationXY().setY(0.5);

              // Rotate by a random number of degrees.
            ge.getFeatures().appendChild(screenOverlay);
        }; 
```

在 HTML 中有这个： `<p id="campusbutton"><p>`

然后在 JavaScript 部分再次调用它： `document.getElementById("campusbutton").innerHTML=createScreenOverlay(LOCATION, X, Y);`

这确实有效，但是它写了“未定义”`<p>`假设在哪里......显然`<p>`是段落标签，这就是打印“未定义”的原因，但是我可以使用任何其他标签吗？`<div>`由于某种原因不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:15:15.873

我不确定你想要实现什么，如果你想`campusbutton`加载你的覆盖，那么你应该使用一个事件`onclick`来调用函数并根据需要传递参数。

```
<p id="campusbutton" onclick="createScreenOverlay(LOCATION, X, Y)"><p> 
```

因为您正在将`campusbutton`元素的 innerHTML 设置为 function 的结果`createScreenOverlay`，但该函数不返回任何内容，所以这不起作用。

即使函数确实返回了一些东西，`KmlScreenOverlay`例如

```
function createScreenOverlay(location, x , y) {
            var screenOverlay = ge.createScreenOverlay('');
            // rest of your code
            ge.getFeatures().appendChild(screenOverlay);    
            // return the type
            return screenOverlay;
        }; 
```

你的 innerHTML`campusbutton`仍然只是这个调用的结果。这将是`Object`。

如果您希望innerHTML 是`campusbutton`覆盖层的实际Kml，则修改函数以返回`KmlScreenOverlay`上述内容，然后更改调用以将innerHTML 设置为对象的kml 表示。

```
document.getElementById("campusbutton").innerHTML=createScreenOverlay(LOCATION, X, Y).getKml(); 
```

# xml - 如何使用 XSLT 检索最接近但不在某个日期之后的元素？

> ID：13769874
> 
> 赞同：4
> 
> 时间：2012-12-07T19:36:00.733
> 
> 标签：xml, xslt, xpath

例如，给定具有日期属性的元素列表，

```
<foo>
 <bar date="2001-04-15"/>
 <bar date="2002-01-01"/>
 <bar date="2005-07-04"/>
 <bar date="2010-11-10"/>
</foo> 
```

我想使用 XSLT 检索最接近但不在给定日期之后的元素。

使用参数“2008-01-01”调用此函数应打印`<bar date="2005-07-04">`. 假设上下文节点已经是`<foo>`.

我不确定什么会更容易，但我也可以设置三个属性：日、月、年，而不是只有一个日期属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T21:27:42.773

对于 XSLT 1.0，这很棘手，因为它不支持将日期作为第一类值，也不支持字符串的字典比较。而且它（根据规范）不支持在临时变量中构造节点集，然后从该集中提取单个节点。尽管如此，通过一些技巧可以实现您想要的。

您将日期设置为 YYYY-MM-DD 的事实意味着，如果您去掉连字符并将生成的字符串视为数字，则按数字顺序对这些数字进行排序与​​按时间顺序对原始日期进行排序的结果相同。尽管 XSLT 没有可更新的变量，但是您可以通过使用一个模板来获得类似的效果，该模板递归地将自身应用于兄弟节点，并在模板参数中向下传递状态。

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:param name="targetDate" select="20080101" />

<xsl:template match="foo">
  <!-- find the first "candidate" bar whose date is before the target date -->
  <xsl:apply-templates select="(bar[translate(@date, '-', '') &lt; $targetDate])[1]" />
</xsl:template>

<xsl:template match="bar">
  <xsl:param name="closest" select="." />
  <!-- find the next candidate bar whose date is before the target date -->
  <xsl:variable name="nextCandidate"
    select="(following-sibling::bar[translate(@date, '-', '') &lt; $targetDate])[1]" />
  <xsl:choose>
    <xsl:when test="$nextCandidate">
      <xsl:choose>
        <xsl:when test="translate($nextCandidate/@date, '-', '') &gt; translate($closest/@date, '-', '')">
          <!-- $nextCandidate is closer to the target than the current $closest -->
          <xsl:apply-templates select="$nextCandidate">
            <xsl:with-param name="closest" select="$nextCandidate" />
          </xsl:apply-templates>
        </xsl:when>
        <xsl:otherwise>
          <!-- current $closest is still the closest -->
          <xsl:apply-templates select="$nextCandidate">
            <xsl:with-param name="closest" select="$closest" />
          </xsl:apply-templates>
        </xsl:otherwise>
      </xsl:choose>
    </xsl:when>
    <xsl:otherwise>
      <!-- no more candidates, so $closest is the node we require -->
      <xsl:copy-of select="$closest" />
    </xsl:otherwise>
  </xsl:choose>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T20:25:50.740

这是一个 XSLT 2.0 选项...

**XML 输入**

```
<foo>
    <bar date="2001-04-15"/>
    <bar date="2005-07-04"/>
    <bar date="2002-01-01"/>
    <bar date="2010-11-10"/>
</foo> 
```

**XSLT 2.0**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:param name="threshold" select="xs:date('2008-01-01')"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="foo">
        <xsl:variable name="closestDate" as="node()*">
            <xsl:apply-templates select="bar[$threshold >= xs:date(@date)]">
                <xsl:sort select="@date" data-type="text"/>
            </xsl:apply-templates>                  
        </xsl:variable>
        <xsl:copy-of select="$closestDate[last()]"/>
    </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**

```
<bar date="2005-07-04"/> 
```

* * *

**“foo”模板的解释...**

```
<xsl:template match="foo">
    <!--First a variable named 'closestDate' is created by doing an 
        'xsl:apply-templates' to all 'bar' elements that have a '@date' 
        attribute that is less than or equal to the 'threshold' parameter 
        (which is '2008-01-01' in the example). Notice that both '@date' 
        and '$threshold' are cast as 'xs:date' so that the date comparison 
        will work correctly. Also, we use the 'as="node()*"' attribute to 
        cast the variable as zero or more nodes() so that each individual 
        'bar' can be accessed individually.-->
    <xsl:variable name="closestDate" as="node()*">
        <xsl:apply-templates select="bar[$threshold >= xs:date(@date)]">
            <!--This 'xsl:sort' is used to put all the 'bar' elements in order 
                based on the '@date' attribute.-->
            <xsl:sort select="@date" data-type="text"/>
        </xsl:apply-templates>
    </xsl:variable>
    <!--What we end up with for the 'closestDate' variable is this:
            <bar date="2001-04-15"/>
            <bar date="2002-01-01"/>
            <bar date="2005-07-04"/>
        In the following 'xsl:copy-of', we choose the last node 
        in 'closestDate'.-->
    <xsl:copy-of select="$closestDate[last()]"/>
</xsl:template> 
```

# php - 去年作为时间戳？

> ID：13769886
> 
> 赞同：2
> 
> 时间：2012-12-07T19:37:37.577
> 
> 标签：php, timestamp

我在网上找到了这个片段，它应该给我当前年份（2012 年）作为时间戳。

`$current_year = mktime(0, 0, 0, 1, 1, date('Y'));`

我怎样才能得到`$last_year`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T19:38:16.390

使用此代码。

```
$last_year = mktime(0, 0, 0, 1, 1, date('Y') - 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-29T21:35:55.633

就速度而言，这可能是最快的答案：

`$last_year = time() - 31536000; // 31,536,000 seconds in a year`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T19:39:39.863

从年份值中减去一个：

```
$last_year = mktime(0, 0, 0, 1, 1, (date('Y') - 1)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T19:41:30.320

你可以试试：

```
$startTime = mktime(0, 0, 0, 1, 1, date('Y')-1);     
$endTime = mktime(23, 59, 59, 12, 31, date('Y')-1); 
```

# android - 更改列表视图中文本视图的可见性

> ID：13769890
> 
> 赞同：2
> 
> 时间：2012-12-07T19:38:08.967
> 
> 标签：android, listview, onclick, visibility

我有一个列表视图，它由来自单独布局文件的两个文本视图组成。我使用 a`BaseAdapter`从 JSON 文件构建列表。

我希望第一个文本视图（标题）是可点击的，如果单击它会显示第二个文本视图（文本），如果再次单击它会隐藏它。

当我使用`onClick`( `android:onClick="ClText"`) 时，我得到一个错误。我想我应该使用一些东西`onClickListener`，但由于我是 Android 新手，我不太确定如何使用它。

有人可以帮我写代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:59:02.767

您只需为扩展 BaseAdapter 的适配器类的 getView 方法中的第一项设置 onClickListener。这是一个示例来说明您要执行的操作。

```
public class CustomAdapter extends BaseAdapter{
    private ArrayList<Thing> mThingArray;

    public CustomAdapter(ArrayList<Thing> thingArray) {
        mThingArray = thingArray;
    }

    // Get the data item associated with the specified position in the data set.
    @Override
    public Object getItem(int position) {
        return thingArray.get(position);
    }

    // Get a View that displays the data at the specified position in the data set.
    // You can either create a View manually or inflate it from an XML layout file.
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        if(convertView == null){
            // LayoutInflater class is used to instantiate layout XML file into its corresponding View objects.
            LayoutInflater layoutInflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
            convertView = layoutInflater.inflate(R.layout.one_of_list, null);
        }

        TextView captionTextView = (TextView) convertView.findViewById(R.id.caption);
        TextView txt2 = (TextView)findViewById(R.id.text);

        captionTextView.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
           if(txt2.getVisibility() == View.INVISIBLE){
           txt2.setVisibility(View.VISIBLE);
        } else {
           txt2.setVisibility(View.INVISIBLE);
        }
       }
    });

        return convertView;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:50:00.967

这是一个关于如何在 java 中使用单击侦听器的示例：

```
TextView txt = (TextView )findViewById(R.id.TextView1);
TextView txt2 = (TextView )findViewById(R.id.TextView2);
txt.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        txt.setVisibility(View.GONE);
        txt2.setVisibility(View.VISIBLE);
    }
}); 
```

老实说，与其改变不同 textView 的可见性，不如直接改变 TextView 文本？它会简单得多，并且不需要多个 TextView。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T19:56:01.087

如果您只想在两个 textview 之间切换，您可以简单地使用 ViewSwitcher。它允许您在其中的视图之间切换。你只需要调用 nextView() 方法，这个方法是循环的，所以你可以无休止地调用 nextView()

您将能够更改显示的视图。

然后，您可以将相同的 onClickListener 添加到这些文本视图中，编写如下内容：

```
TextView txt = (TextView )findViewById(R.id.TextView1);

txt.setOnClickListener(new View.OnClickListener() {
@Override
public void onClick(View v) {
      viewSwitcher.nextView();
}
}); 
```

# javascript - javascript library for comparing objects

> ID：13769896
> 
> 赞同：3
> 
> 时间：2012-12-07T19:38:36.000
> 
> 标签：javascript, equals

> **Possible Duplicate:**
> [How do you determine equality for two JavaScript objects?](https://stackoverflow.com/questions/201183/how-do-you-determine-equality-for-two-javascript-objects)
> [Object comparison in JavaScript](https://stackoverflow.com/questions/1068834/object-comparison-in-javascript)

Are there any javascript libraries that can help with comparing two objects for equivalence? So if I have something like

```
var obj1 = {"name":"Jeff", "gender":"M", "arrayprop":[1,2,3] };
var obj2 = {"name":"Jeff", "gender":"M", "arrayprop":[1,2,3] }; 
```

And I would like obj1 and obj2 to return "equal" since they have the same properties/values.

Obviously `obj1 === obj2` returns `false`, but I didn't know if there was a function already available I could use that would return true.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T19:41:06.443

There is Underscore.js with the function `isEqual()` : [http://underscorejs.org/#isEqual](http://underscorejs.org/#isEqual)

# bash - awk 跳过字段分隔以提高速度

> ID：13769897
> 
> 赞同：1
> 
> 时间：2012-12-07T19:38:37.247
> 
> 标签：bash, awk

我有一个相当大的数据集（10K 文件，每个文件有 20K 行）。我需要交换文件和行，（给自己 20K 个文件，每个文件有 10K 行）。

我有一个解决方案，将它们全部组合到一个大表中，然后使用 cut.. 提取列。但是 cut 花费的时间太长（扫描 4GB 文件 10K 次并不是很快，即使文件位于缓存中）。

所以我在 awk 中写了一个（令人惊讶的简单）一次性：

```
awk '{ print >> "times/"FNR".txt" }' posns/* 
```

这可以完成工作，但也相当慢（每个输入文件大约 10 秒）。我的猜测是它正在进行字段分离，尽管我根本不需要它。有没有办法禁用该功能以加快速度，还是我必须用另一种语言编写解决方案？

如果有帮助，虽然我更喜欢通用解决方案，但每个文件中的每一行都是格式`%d %lf %lf`，因此在这种情况下，行最多为 21 个字节（浮点数均小于 100，整数为 0 或 1 ）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:59:02.997

你可以尝试不同的awk。我听说 mawk 比其他 awk 快，并且 GNU awk 有一些性能改进，这意味着它可能比您使用的任何东西运行得更快。如果您将字段分隔符设置为记录分隔符，那么每行将只有一个字段，因此如果您对字段拆分是正确的问题，那么也许这会加快速度。此外，您使用了错误的重定向运算符 - 您应该使用“>”而不是“>>”并且字符串连接很慢，所以我建议只打印到编号文件，然后再重命名它们。

像这样的东西：

```
cd times
awk -F'\n' '{ print > FNR }' ../posns/*
for f in *
do
    mv -- "$f" "${f}.txt"
done
cd .. 
```

您可能想先在一个虚拟目录上对其进行测试。

在这个线程中的其他评论可能会同时打开这么多文件，这就是问题所在，您可以根据文件名中的某些模式对子组执行此操作吗？例如，如果您的 posns 文件都以数字开头：

```
cd times
rm -f *
for ((i=0; i<=9; i++))
do
   awk -F'\n' '{ print >> FNR }' ../posns/"$i"*
   for f in *
   do
      mv -- "$f" "${f}.txt"
   done
done
cd .. 
```

请注意，在这种情况下，您需要先对输出文件进行 zap。我确信有比这更好的文件分组方式，但您需要告诉我们是否有命名约定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T21:15:31.660

我不知道这是否比 awk 快，但这是一个可以完成任务的 perl 脚本：

```
#!/usr/bin/perl

use strict;
use warnings;

my $line=0;

foreach(@ARGV){

 open (MYINFILE, $_);
 $line=0;

 while(<MYINFILE>){
  $line++;
  open (MYOUTFILE,">>times/$line.txt");
  print MYOUTFILE $_;
  close (MYOUTFILE);
 }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T19:53:22.400

[这听起来像是拆分](http://unixhelp.ed.ac.uk/CGI/man-cgi?split)的完美工作；）

```
find posns -type f -exec split -l 10000 {} \; 
```

您可以使用`-a`和`-d`选项来自定义结果文件后缀。

**解释：**

*   `find posns -type f`：查找目录中的所有文件（递归）`posns`
*   `-exec ... \;`：对于找到的每个结果，执行以下命令`...`
*   `split -l 10000 {}`:`{}`当与`-exec`. `split -l 10000`将输入文件分成最多 10k 行的块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T20:56:53.830

最终我放弃了漂亮的 shell 方法，并用 C 编写了另一个版本。很遗憾，它并不漂亮，但它的速度提高了三个数量级以上（总运行时间为 43 秒，而估计为 28 小时awk 方法，给定预缓存的数据）。它需要更改 ulimit 以允许打开足够多的文件，如果您的行长于 LINE_LENGTH，它将无法正常工作。

尽管如此，它的运行速度还是比下一个最佳解决方案快 2300 倍。

如果有人偶然发现这个想要做这个任务，这个会做的。请小心并检查它是否确实有效。

```
 #include <stdio.h>
    #include <stdlib.h>

    #define LINE_LENGTH 1024

    int main(int argc, char* argv[]) {
            int fn;
            int ln;
            char read[LINE_LENGTH];

            int fmax=10;
            int ftot=0;
            FILE** files=malloc(fmax*sizeof(FILE*));
            char fname[255];
            printf("%d arguments\n", argc);

            printf("opening %s\n",argv[1]);
            FILE* open = fopen(argv[1],"r");

            for(ln=0;fgets(read,LINE_LENGTH,open); ln++) {
                    if(ln==fmax) {
                            printf("%d has reached %d; reallocing\n",ln,fmax);
                            fmax*=2;
                            files=realloc(files,fmax*sizeof(FILE*));
                    }
                    sprintf(fname, "times/%09d.txt",ln);
                    files[ln]=fopen(fname,"w");
                    if(files[ln]==0) {
                            fprintf(stderr,"Failed at opening file number %d\n",ln);
                            return 1;
                    }
                    fprintf(files[ln],"%s",read);
            }
            ftot=ln;
            fclose(open);

            for(fn=2;fn<argc;fn++) {
                    printf("working on file %d\n",fn);
                    open=fopen(argv[fn],"r");
                    for(ln=0;fgets(read,LINE_LENGTH,open); ln++) {
                            fprintf(files[ln],"%s",read);
                    }
                    fclose(open);
            }
            for(ln=0;ln<ftot;ln++) {
                    fclose(files[ln]);
            }
            return 0;
    } 
```

# ios - iOS 移除转义字符的设计模式

> ID：13769903
> 
> 赞同：0
> 
> 时间：2012-12-07T19:39:01.890
> 
> 标签：ios, json, design-patterns, escaping

从网站获取 json 并使用转义字符返回一些 json 结果。

删除我们不喜欢的字符的最佳设计模式是什么？

以下是我们不喜欢的[一些](https://stackoverflow.com/questions/983451/where-can-i-find-a-list-of-escape-characters-required-for-my-json-ajax-return-ty)：

*   \b 退格（ascii 代码 08）
*   \f 换页（ascii 代码 0C）
*   \n 换行
*   \r 回车
*   \t 制表符
*   \v 垂直制表符
*   \' 撇号或单引号
*   \" 双引号
*   \ 反斜杠字符

但我的问题是，一般来说，你应该这样做

1.  在你保存它之前？
2.  保存后立即转换？
3.  还是应该在显示/使用它之前对其进行转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:45:25.007

下载后立即删除。这有点昂贵（特别是如果您使用正则表达式），所以它会完成一次，并且不再需要。

# jquery - jquery colorbox不会在iOS中关闭

> ID：13769912
> 
> 赞同：1
> 
> 时间：2012-12-07T19:39:29.480
> 
> 标签：jquery, colorbox

我在 iOS Safari 的 Web 应用程序上使用 colorbox，但遇到了问题。当 colorbox 显示时，如果你上下拖动站点几次（以启动 iOS 橡皮筋效果），colorbox 实例会跳跃一点，然后不再关闭。

我已经搞砸了太久，仍然没有想出一个令人满意的解决方案。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:59:36.743

您可以检查您是否使用更新的 jQuery 版本（> 1.8.3）。

我遇到了同样的问题，并在 jquery.com 上找到了一个错误报告。在 iPad 等 iOS 设备上缩放或移动打开的颜色框似乎会影响 javascript 事件，因此也使用 JS 关闭：

> 特别是，有一个清除丢失的 fxNow 变量的事件。由于事件处理程序永远不会运行，因此 fxNow 变量永远不会被清除，因此它永远保持相同的值，因此 jQuery 动画认为时间已经停止。结果是 jQuery 在一个繁忙的循环中旋转，并且每次它检查时钟时它都计算出时间没有改变，所以动画不应该前进。

( [http://bugs.jquery.com/ticket/12837](http://bugs.jquery.com/ticket/12837) )

# spring - Spring App的自定义tomcat context.xml

> ID：13769921
> 
> 赞同：0
> 
> 时间：2012-12-07T19:40:24.657
> 
> 标签：spring, tomcat

我有一个 Spring App，我想更改会话 cookie 路径。我知道这可以在服务器的 context.xml 文件中完成，但我没有权限在我的服务器上编辑该文件。还有另一种方法可以做到这一点，也许是通过在某处添加另一个 context.xml 文件？

顺便说一句，我在项目的 META-INF 文件夹中添加了一个 context.xml 文件，但它没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:50:20.990

`context.xml`将您与您的战争文件捆绑在一起。

# d3.js - parseDate = d3.time.format("%Y") 不工作

> ID：13769923
> 
> 赞同：3
> 
> 时间：2012-12-07T19:40:29.383
> 
> 标签：d3.js

我的图表完全按预期工作，除了我的 parseDate 函数不想在 x 轴上给我正确的日期。我敢肯定这很简单。

目前我正在添加 d3.v2.min.js，没有任何额外的帮助库 - 我需要其他东西来让 d3.time.format() 工作吗？

**在不解析日期的情况下，我的数据返回 x 轴：**

```
.960   .965   .970   .975 
```

而不是

```
1960   1965   1970   1975 
```

**JSON 的结构如下：**

```
[{"year":1959,"average":315.97},
{"year":1960,"average":316.91},
{"year":1961,"average":317.64},
...etc
{"year":2011,"average":391.57}] 
```

**带有 // 注释部分的代码是问题所在：**

```
<script>
var margin = {top: 20, right: 20, bottom: 30, left: 50},
    width = 920 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom; 
```

**//**下面的 parseDate 不起作用

```
var parseDate = d3.time.format("%Y").parse;

var x = d3.time.scale()
    .range([0, width]);

var y = d3.scale.linear()
    .range([height, 0]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left");

// data taking format  
d3.json("{{ asset('js/data_co2.json') }}", function(data) { 
```

**//** parseDate() 在下面不起作用

给出错误：未捕获的类型错误：对象 1959 没有方法“子字符串”

```
 data.forEach(function(d) {
    d.year = parseDate(d.year);
    d.average = +d.average;
  });

  x.domain(d3.extent(data, function(d) { return d.year; }));
  y.domain([260, 420]);

var area = d3.svg.area()
    .x(function(d) { return x(d.year); })
    .y0(height)
    .y1(function(d) { return y(d.average); });

var svg = d3.select("#co2").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

svg.append("path")
  .datum(data)
    .attr("class", "area")
    .attr("d", area);

svg.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + height + ")")
  .call(xAxis);

svg.append("g")
    .attr("class", "y axis")
  .call(yAxis)
    .append("text")
    .attr("transform", "rotate(-90)")
    .attr("y", 6)
    .attr("dy", ".71em")
  .style("text-anchor", "end")
  .text("CO2 Levels (ppm)");

});

</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T20:45:08.907

`parseDate`，由d3“准备”的函数，期望传递一个字符串进行解析。您的年份是（适当的）数字，因此您需要将它们转换为字符串：

`parseDate(String(d.year));`

或者

`parseDate(d.year.toString());`

但是，请记住，同样的结果 - Date 对象 - 可以在本地实现，如下所示：

`var date = new Date(d.year, 0);// The required 0, is for January`

# css - 底部右侧绝对定位问题

> ID：13769924
> 
> 赞同：0
> 
> 时间：2012-12-07T19:40:29.680
> 
> 标签：css, positioning, css-position

我试图在 div 容器的右下角放置一个复选框。容器在悬停时会增加高度，我希望复选框具有粘性，以便在 div 增长时保持在右下角。

我在使复选框位于右下角时遇到了一些真正的麻烦。

这是我的代码和一个[**Fiddle**](http://jsfiddle.net/JonMoore/KvgUw/)。

```
<div class="objectWrap">
    <div class="calendarObject">
        <label class="objectTitle" for="chkOb2">Tasks</span>
        <input type="checkbox" id="chkOb2" />
    </div>
</div> 
```

* * *

```
.objectWrap {
    position:relative;
    float:left;
    height:75px;
    margin-bottom:15px;
}
    .objectWrap:not(:last-child) {
        margin-right:15px;
    }
    .objectWrap:hover {
        cursor:pointer;
    }

.calendarObject {
    position:relative;
    width:72px;
    height:75%;
    background-color:#f5f5f5;
    border-radius:5px;

    transition: height 400ms;
    -webkit-transition: height 400ms;
}
    .calendarObject label.objectTitle {
        position:absolute;
        top:3px;
        left:3px;

        font-size:13px;
        color: #8998a4;
    }
    .calendarObject input[type="checkbox"] {
        position:absolute;
        bottom:0px;
        right:0px;
    }
    .calendarObject:hover {
        height:100%;
        transition: height 400ms;
        -webkit-transition: height 400ms;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T19:43:26.560

您的代码中有错误。`</span>`应该是`</label>`。

**更正的 HTML：**

```
<div class="objectWrap">
    <div class="calendarObject">
        <label class="objectTitle" for="chkOb2">Tasks</label>
        <input type="checkbox" id="chkOb2" />
    </div>
</div>​ 
```

[更正了 JS 小提琴](http://jsfiddle.net/KvgUw/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T19:43:34.997

您的标记未正确嵌套..您的标签标签需要一个结束标签标签..而不是一个结束跨度标签。

# razor - 检索从 Razor 模板中的宏传递的字段值

> ID：13769926
> 
> 赞同：0
> 
> 时间：2012-12-07T19:40:31.067
> 
> 标签：razor, umbraco

我正在尝试将宏中的值传递到剃刀模板中。但它似乎没有任何建议？

这是宏代码：

```
 <umbraco:Macro Alias="VideoInline" videoUrl ="[#videoUrl]" videoPosterImage="     <umbraco:Item field=' runat='server' Xslt='umbraco.library:GetMedia({0},false())/umbracoFile'></umbraco:Item>"
runat="server"></umbraco:Macro> 
```

这是剃须刀模板：

```
 @using System
 @using umbraco.MacroEngines

<video id="my_video_1" class="video-js vjs-default-skin" controls 
 preload="auto" poster="@Model.getProperty(Parameter.videoPosterImage).Value" 
data-setup="{}">
 <source src="@Model.getProperty(Parameter.videoUrl).Value" type='video/mp4'>

 </video> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T11:44:22.290

将参数传递给宏时，您只需要使用`@Parameter`. 所以在这种情况下它会是`@Parameter.videoUrl`。

另外，不要忘记您需要在*开发人员 > 宏*部分中将参数添加到 Umbraco 本身的宏定义中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-21T13:51:49.613

在 Umbraco 7 中，您必须使用此代码在宏中获取参数：

```
@inherits Umbraco.Web.Macros.PartialViewMacroPage
@Html.Raw(Model.MacroParameters["vidurl"]) 
```

参数类已删除

# cuda - GPU KDF 哈希（而不是饼干）

> ID：13769929
> 
> 赞同：2
> 
> 时间：2012-12-07T19:40:40.850
> 
> 标签：cuda, gpu, cracking, pbkdf2

所以我一直在关注 GPU 破解者，它们令人印象深刻。我看过一些文章说有人每秒获得多达 3840 亿个密码。我们一直在使用带有随机盐的 PBKDF2，而不是只使用一次哈希，但它肯定会占用你的 CPU。我想知道是否可以使用 NVIDIA Cuda 之类的东西以更快、更分散的方式运行 PBKDF2 或类似的东西，而不是破解者？有没有人尝试过这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T20:38:46.137

我对该领域不熟悉，但 Google 搜索显示 PBKDF2 已在 GPU 上成功实现：

[http://daimi.au.dk/~jot2re/cuda/index.html](http://daimi.au.dk/~jot2re/cuda/index.html)

请注意，如果 SHA-256 散列性能与 PBKDF2 有任何对应关系，则对于此用例，AMD GPU 可能比 Nvidia 更好：

[https://devtalk.nvidia.com/default/topic/496471/cuda-programming-and-performance/amd-radeon-3x-faster-on-bitcoin-mining-sha-256-hashing-performance/1](https://devtalk.nvidia.com/default/topic/496471/cuda-programming-and-performance/amd-radeon-3x-faster-on-bitcoin-mining-sha-256-hashing-performance/1)

# java - 数据迁移 - JUNIT 测试时比较 SELECT COUNT 语句的正确方法是什么

> ID：13769931
> 
> 赞同：0
> 
> 时间：2012-12-07T19:40:44.173
> 
> 标签：java, data-migration

当我将此 QUERY 发送到数据库时，我不断收到断言错误，即使当我手动将查询输入到两个数据库中时，它也会返回正确的数据。你能告诉我我应该如何比较这两个计数吗？

唯一的区别是列标题，如下图所示（左边是MYSQL，右边是MSSQL）

这是查询和结果

```
select count(userfieldid) from tr_userfield where calcexpression like '%@004%' and usefor like '%B%'

_____________________________________________
count(*)     |     (No Column Name)
_____________________________________________
43           |           43
             | 
```

这是我的 JAVA 代码

```
package a7.unittests.dao;

import static org.junit.Assert.*;
import java.sql.Connection;
import java.sql.ResultSet;
import org.junit.Test;
import java.sql.PreparedStatement;
import artemispm.autocalc.TRBaseScoreCalculator;

public class UnitTestTRBaseScoreCalculator_Select {
@Test
public void testQUERY_ISTHISCHARACINUSE() throws Exception{

    char WILDCARD = '%';

    UnitTestHelper helper = new UnitTestHelper();
    Connection con = helper.getConnection(helper.sourceDBUrl);
    Connection conTarget = helper.getConnection(helper.targetDBUrl);

    PreparedStatement stmt = con.prepareStatement(String.format(TRBaseScoreCalculator.QUERY_ISTHISCHARINUSE_1, WILDCARD, "@004", WILDCARD, WILDCARD, "B", WILDCARD));
    ResultSet sourceVal = stmt.executeQuery();
    stmt = conTarget.prepareStatement(String.format(TRBaseScoreCalculator.QUERY_ISTHISCHARINUSE_1, WILDCARD, "@004", WILDCARD, WILDCARD, "B", WILDCARD));
    ResultSet targetVal = stmt.executeQuery();
    assertTrue(helper.resultSetsEqual2(sourceVal,targetVal));   }

}

package a7.unittests.dao;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.SQLException;

public class UnitTestHelper {

public Connection getConnection(String url)throws Exception{
    return DriverManager.getConnection(url);
}

/*
 * Use for Insert and Update and Delete Statements
 */

public boolean resultSetsEqual4 (int source, int target){

    System.out.println("The source is: "+source+" The target is: "+target);
    if(((source>0)&&(target>0)&&(target==source)))
    {

        return true;
    }
    else
    {
        return false;
    }
}

/*
 * Used to test SELECT statements passing in objects
 */

public boolean resultSetsEqual2 (ResultSet source, ResultSet target) throws SQLException{
    System.out.println("The source is: "+source+" The target is: "+target);
    while(source.next())
    {
        target.next();
        ResultSetMetaData metadata = source.getMetaData();
        int count = metadata.getColumnCount();
        for (int i =1; i<=count; i++)
        {
            if(!source.getObject(i).equals(target.getObject(i)))
            {return false;}
        }
    }
    return true;
}

public boolean resultSetsEqual (ResultSet source, ResultSet target) throws SQLException{

System.out.println("The source is: "+source+" The target is: "+target);
while(source.next())
{
    target.next();
    ResultSetMetaData metadata = source.getMetaData();
    int count = metadata.getColumnCount();
    for (int i =1; i<=count; i++)
    {
        if(source.getObject(i) != target.getObject(i))
        {return false;}
    }
}
return true;
}
public boolean resultSetsEqual3 (ResultSet rs1, ResultSet rs2) throws SQLException {
int col = 1;
//ResultSetMetaData metadata = rs1.getMetaData();
//int count = metadata.getColumnCount();
while (rs1.next() && rs2.next()) {
    final Object res1 = rs1.getObject(col);
    final Object res2 = rs2.getObject(col);
    // Check values
    if (!res1.equals(res2)) {
        throw new RuntimeException(String.format("%s and %s aren't equal at common position %d",
            res1, res2, col));
    }
    // rs1 and rs2 must reach last row in the same iteration
    if ((rs1.isLast() != rs2.isLast())) {
        throw new RuntimeException("The two ResultSets contains different number of columns!");
    }  
}
return true;
}
} 
```

# python - 为 pip 提供 NumPy site.cfg 参数

> ID：13769936
> 
> 赞同：32
> 
> 时间：2012-12-07T19:41:04.820
> 
> 标签：python, numpy, pip, intel-mkl

我正在使用针对英特尔的数学内核库构建的 NumPy。我使用 virtualenv，通常使用 pip 来安装软件包。

但是，为了让 NumPy 找到 MKL 库，有必要在编译之前在 NumPy 源目录中创建一个 site.cfg 文件，然后手动构建和安装。我可以编写整个过程的脚本，但我希望有一个更简单的解决方案。

我有一个标准的 site.cfg 文件，可以在版本控制下用于此目的。是否有任何 pip 命令行选项会告诉它在构建包之前将特定文件复制到源目录？

或者，是否可以设置任何环境变量而不是在 site.cfg 文件中提供库路径？这是我使用的 site.cfg 文件。它几乎一字不差地取自[英特尔的网站](http://software.intel.com/en-us/articles/numpyscipy-with-intel-mkl)。

```
[mkl]
library_dirs = /opt/intel/composer_xe_2013.1.117/mkl/lib/intel64
include_dirs = /opt/intel/composer_xe_2013.1.117/mkl/include
mkl_libs = mkl_rt
lapack_libs = 
```

作为参考，我正在运行 Ubuntu、Python 2.7 和 NumPy 1.6。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-10T07:41:10.977

从源代码（[https://github.com/numpy/numpy/blob/master/site.cfg.example](https://github.com/numpy/numpy/blob/master/site.cfg.example)）：

> 为了帮助像 easy_install 这样的自动安装，还将检查用户的主目录中的文件 ~/.numpy-site.cfg 。

这是一个可行的解决方案吗？您仍然需要使用全局 .numpy-site.cfg 预加载主目录，但之后您不必为构建或安装而烦恼。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-12T04:15:54.670

我最终整理了一个脚本来自动执行此操作。在这里，以防它可以帮助其他人。我已经在 Python 2.7 中对其进行了测试，但它应该可以在其他地方工作而无需进行重大修改。

```
from __future__ import unicode_literals

import io
import os.path
import re
import subprocess
import urllib2

# This downloads, builds, and installs NumPy against the MKL in the
# currently active virtualenv

file_name = 'numpy-1.6.2.tar.gz'
url = ('http://sourceforge.net/projects/numpy/files/NumPy/1.6.2/'
       'numpy-1.6.2.tar.gz/download')

def main():

    # download NumPy and unpack it
    file_data = urllib2.urlopen(url).read()
    with io.open(file_name, 'wb') as fobj:
        fobj.write(file_data)
    subprocess.check_call('tar -xvf {0}'.format(file_name), shell=True)
    base_name = re.search(r'(.*)\.tar\.gz$', file_name).group(1)
    os.chdir(base_name)

    # write out a site.cfg file in the build directory
    site_cfg = (
        '[mkl]\n'
        'library_dirs = /opt/intel/composer_xe_2013.1.117/mkl/lib/intel64\n'
        'include_dirs = /opt/intel/composer_xe_2013.1.117/mkl/include\n'
        'mkl_libs = mkl_rt\n'
        'lapack_libs =\n')
    with io.open('site.cfg', 'wt', encoding='UTF-8') as fobj:
        fobj.write(site_cfg)

    # build and install NumPy
    subprocess.check_call('python setup.py build', shell=True)
    subprocess.check_call('python setup.py install', shell=True)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-12-06T07:01:58.380

您安装 NumPy 以使用英特尔的数学内核库的目标现在*变得*更加容易，因为[英特尔创建了 pips](https://software.intel.com/en-us/articles/installing-the-intel-distribution-for-python-and-intel-performance-libraries-with-pip-and)来安装 MKL + NumPy：

```
pip uninstall numpy -y  # if the standard numpy is present
pip install intel-numpy 
```

以及`intel-scipy`, `intel-scikit-learn`, `pydaal`, `tbb4py`, `mkl_fft`,`mkl_random`和更低级别的包（如果您只需要它们）。同样，如果标准包已经安装在您的 virtualenv 中，您必须先卸载它们。

**笔记：**

> 如果已安装标准 NumPy、SciPy 和 Scikit-Learn 软件包，则必须在安装这些软件包的英特尔® 变体（intel-numpy 等）之前卸载这些软件包以避免任何冲突。如前所述，pydaal 使用 intel-numpy，因此首先删除标准 Numpy 库（如果已安装）然后安装 pydaal 很重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-06T07:08:52.860

> 或者，是否可以设置任何环境变量而不是在 site.cfg 文件中提供库路径？

[NumPy 1.21](https://numpy.org/doc/stable/user/building.html?highlight=npy_blas_order#accelerated-blas-lapack-libraries)为此引入了环境变量。

例如

```
NPY_BLAS_ORDER=MKL NPY_LAPACK_ORDER=MKL pip install numpy --no-binary numpy 
```

从源代码安装 NumPy 时自动检测 MKL 库。如果需要，您可以设置环境变量`NPY_BLAS_LIBS`、`NPY_CBLAS_LIBS`和`NPY_LAPACK_LIBS`链接器 CLI 选项，将您选择的库放在链接器路径上。

这对脚本来说比创建`~/.numpy-site.cfg`文件更容易，

```
[openblas]
libraries = openblas
library_dirs = /usr/local/opt/openblas/lib
include_dirs = /usr/local/opt/openblas/include
runtime_library_dirs = /usr/local/opt/openblas/lib 
```

然后运行

```
pip install numpy --no-binary numpy 
```

`~/.numpy-site.cfg`顺便说一句，从源代码安装 scipy 时，该文件也适用：

```
pip install scipy --no-binary scipy 
```

**注意：**如果您仍在使用 Python 2.7，请先安装 numpy，然后再安装 scipy。[尝试](https://github.com/scipy/scipy/issues/10749)将它们安装在一起将：

*   调用请求 NumPy 的 SciPy easy_install 安装程序，
*   加载最新的 NumPy 安装程序（即使您特别要求 pip 到`install numpy==1.14.6 scipy==1.0.1 --no-binary numpy,scipy`），然后
*   失败是`RuntimeError: Python version >= 3.5 required`因为最新的 NumPy 不支持 Python 2.7。

# c# - 十进制数据类型在需要显示时去除尾随零

> ID：13769938
> 
> 赞同：11
> 
> 时间：2012-12-07T19:41:14.557
> 
> 标签：c#, string, types, decimal

我正在开发的一个网络应用程序（另一个开发人员写了它）有一个十进制变量，它在小数点后去掉两个零。如果它们包含一个大于 0 的数字或其组合，它不会丢弃尾随的 2 位数字。该值来自文本文件。

示例文本值为：`261.00`

示例十进制变量 (TotalDue) 是：`261`

在调试期间，当我将鼠标悬停在“TotalDue”（在下面的示例代码中）上时，该值显示为 261，当我展开调试器时，它显示为“261M”：

```
decimal TotalDue = Convert.ToDecimal(InputRow.Substring(260, 12)); 
```

我尝试将它作为字符串引入（但最初它仍然读作“261”而不是 261.00），然后以如下各种方式转换它。没有任何工作！

```
string TotalDue = InputRow.Substring(260, 12);

strTotalDue = String.Format("{0:F2}", TotalDue);

strTotalDue = String.Format("{0:N2}", TotalDue);

strTotalDue = String.Format(TotalDue, "0.00");

strTotalDue = TotalDue.ToString("G29");  

strTotalDue = String.Format("{0:0.00}", TotalDue);

strTotalDue = TotalDue.ToString("N2");//used this one with decimal data type 
```

我错过了什么？文本文件数据的来源是否重要？它在 Access 数据库中启动。

**更新：**今天（2015 年 12 月 1 日）我意识到我从未标记答案，因为我最终废弃了原始代码并在 C#.net 中重写了它。我会标记 Cole Campbell 的答案是正确的，因为他的评论*（“以一种能够为它提供有关输入精度的足够数据的方式构建小数。”）*是促使我想出我所做的解决方案的原因，即操纵传入的数据。我是用一种方法这样做的——只显示下面重要的部分（AmtDue）。提醒传入数据的格式为“261.00”（例如 AmtDue = 261.00）：

```
string AmtDue = Convert.ToString(AmountDue).Replace(".", "");           
string finalstring =  ("0000000000" + AmtDue).Substring(AmtDue.Length); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-07T19:45:41.783

如果你想要两位小数，你可以使用正确的[`ToString`](http://msdn.microsoft.com/en-us/library/3ebe5aks.aspx)：

```
string formatted = TotalDue.ToString("0.00"); 
```

[**> 演示 <**](http://ideone.com/zckykf)

[**标准数字格式字符串**](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

（顺便说一句，`ToString("D2")`不起作用）

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-07T20:01:10.630

您的第一个示例删除零的原因可能与您创建`Decimal`实例的方式有关。 `Decimal`包含一个影响`ToString()`工作方式的比例因子，并且该比例因子的设置根据其`Decimal`构造方式不同。

这段代码：

```
var d1 = Decimal.Parse("261.00");
var d2 = new Decimal(261.00);
var d3 = 261.00m;
Console.WriteLine(d1);
Console.WriteLine(d2);
Console.WriteLine(d3); 
```

产生这些结果：

```
261.00
261
261.00 
```

如果要保留尾随零，请`Decimal`以一种为它提供有关输入精度的足够数据的方式构造。

请记住，正如其他答案所指出的，调试器提供的字符串不一定与`ToString()`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-07T19:46:43.397

您在调试器中看到的数字与它的实际显示方式无关。 `261M`是正确的 - 它是“261”的值，以十进制（“M”=“Money”=十进制）格式存储。

[在此处](http://msdn.microsoft.com/en-US/library/dwhawy9k%28v=vs.80%29.aspx)尝试数字格式代码。“F2”就是你想要的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-07T19:46:14.047

我相信你可以用谷歌搜索，并且可能已经看到了这个链接，但这里仅供参考：

[字符串格式双打](http://www.csharp-examples.net/string-format-double/)

看来您已经尝试过了`strTotalDue = String.Format("{0:0.00}", TotalDue);`，所以我不确定还有什么问题。

但是，如果没有更多上下文，我们将不知道如何解决此问题。

# cakephp - Cakephp 2.2.3 habtm 保存到中间表

> ID：13769941
> 
> 赞同：1
> 
> 时间：2012-12-07T19:41:29.130
> 
> 标签：cakephp, has-and-belongs-to-many, save

好的，所以对于我在 Cakephp 2.2.3 中的项目，我设置了我的数据库和控制器并烘焙了所有内容。我仔细检查了所有内容，并且一切正常（添加、编辑、删除）。我无法工作的一件事是保存到`users`表和表之间的中间`websites`表。中间表是`user_websites`。该`user_websites`表只有 3 个字段：`id`、`user_id`和`website_id`。

当我以注册用户身份登录并进入网站添加页面时，我可以毫无问题地添加网站，但它只保存到`websites`表格中，表格中没有任何内容`user_websites`。摆弄 add 函数中的`WebsitesController`我可以让它保存`website_id`在`user_websites`表中，但同样，对于`user_id`. 显然，我需要发生的是，当添加一个新网站时，它应该将该记录保存到`websites`表中，并`user_websites`使用当前登录用户的 ID 和`website_id`刚刚保存的 ID 将记录添加到表中。任何帮助，将不胜感激。谢谢！

这是我的代码：

### 用户模型

```
public $hasMany = array(
    'UserWebsite' => array(
    'className' => 'UserWebsite',
    'foreignKey' => 'user_id',
    'dependent' => false,
    'conditions' => '',
    'fields' => '',
    'order' => '',
    'limit' => '',
    'offset' => '',
    'exclusive' => '',
    'finderQuery' => '',
    'counterQuery' => ''
    )
); 
```

### 网站模型

```
public $hasMany = array(
    'UserWebsite' => array(
        'className' => 'UserWebsite',
        'foreignKey' => 'user_id',
        'dependent' => false,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'exclusive' => '',
        'finderQuery' => '',
        'counterQuery' => ''
    )
);

public $hasAndBelongsToMany = array(
    'User' => array(
        'className' => 'User',
        'joinTable' => 'users_websites',
        'foreignKey' => 'website_id',
        'associationForeignKey' => 'user_id',
        'unique' => 'keepExisting',
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'finderQuery' => '',
        'deleteQuery' => '',
        'insertQuery' => ''
    )
); 
```

### 用户网站模型

```
public $belongsTo = array(
    'User' => array(
        'className' => 'User',
        'foreignKey' => 'user_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    ),
    'Website' => array(
        'className' => 'Website',
        'foreignKey' => 'website_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )
); 
```

### 网站控制器

```
public function add() {
    if ($this->request->is('post')) {

        $this->Website->create();
        if ($this->Website->UserWebsite->saveAll($this->request->data, array('deep' => true))) { 
    $log = $this->Website->getDataSource()->getLog(false, false);
    debug($log);
            $this->Session->setFlash(__('The website has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The website could not be saved. Please, try again.'));
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T04:14:14.133

当然，在寻求帮助后不久，我在朋友的帮助下解决了问题。对于其他可能需要答案或可能有更好解决方案的人，我补充说：

我只是将数据的 user_id 设置为在我的 AppController 的 beforeFilter 中设置的当前登录用户的 id。

### 网站控制器

```
public function add() {
    if ($this->request->is('post')) {
        $this->Website->create();

        // This is the line I added
        $this->request->data['user_id'] = $this->Auth->user('id');

        if ($this->Website->UserWebsite->saveAll($this->request->data, array('deep' => true))) { 
            $this->Session->setFlash(__('The website has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The website could not be saved. Please, try again.'));
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T13:03:09.403

但是，您仍然没有以正确的 CakePHP 方式进行操作。

它目前仅在工作，因为您定义了一个 hasMany，在这种情况下，它不是正确的关系，因为您在这里只需要 HABTM。

将您的表重命名为：

```
users_websites 
```

这是正确的 CakePHP，正如您所看到的，您实际上也在您的 HABTM 中以这种方式定义了它。

现在您可以删除 hasMany，Cake 应该通过 HABTM 自动保存，而不是像您现在所做的那样通过 hasMany。

你仍然需要像你一样做，因为 user_id 不是通过你的表单/请求定义的，你总是需要像你一样定义它。

# java - 堆栈溢出错误/无休止的递归

> ID：13769947
> 
> 赞同：0
> 
> 时间：2012-12-07T19:42:01.927
> 
> 标签：java, recursion, stack-overflow

我正在编写一个霍夫曼编码树，我收到了这个错误。

```
5:1
5:4
5:2
5:1
5:4
5:2
5:1
5:4
5:2
5:1
Exception in thread "main" java.lang.StackOverflowError
at sun.nio.cs.SingleByteEncoder.encodeLoop(SingleByteEncoder.java:130)
at java.nio.charset.CharsetEncoder.encode(CharsetEncoder.java:544)
at sun.nio.cs.StreamEncoder.implWrite(StreamEncoder.java:252)
at sun.nio.cs.StreamEncoder.write(StreamEncoder.java:106)
at java.io.OutputStreamWriter.write(OutputStreamWriter.java:190)
at java.io.BufferedWriter.flushBuffer(BufferedWriter.java:111)
at java.io.PrintStream.write(PrintStream.java:476)
at java.io.PrintStream.print(PrintStream.java:619)
at java.io.PrintStream.println(PrintStream.java:756)
at HuffmanNode.buildTree(hw4.java:65)
at HuffmanNode.buildTree(hw4.java:66)
at HuffmanNode.buildTree(hw4.java:66)
at HuffmanNode.buildTree(hw4.java:66)
at HuffmanNode.buildTree(hw4.java:66) 
```

显然我在 buildTree() 有一个无限递归方法，但是我不明白它在做什么。

```
public void buildTree(HuffmanNode node) {
    if (node.compareTo(this) <= 0 && left != null) {
        System.out.println(node.getCount() + ":" + this.count);
        left.buildTree(node);
    }
    else if (node.compareTo(this) <= 0 && left == null) {
        this.left = node;
        node.parent = this;
    }
    else if (node.compareTo(this) > 0 && right != null) {
        System.out.println(node.getCount() + ":" + this.count);
        right.buildTree(node);
    }
    else if (node.compareTo(this) > 0 && right == null) {
        this.right = node;
        node.parent = this;
    }
} 
```

我的完整代码和输入文件可以在[这里](http://pastebin.com/vpDcf99Q)看到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T20:23:54.127

第一步后，您的树如下所示：

```
root
/  \
    -
   / \
  M   Z 
```

当您执行第二步时，您将新`result`节点附加到 Z，这是错误的。在第二步之后，你的树被破坏了，第三步进入无限递归。

编辑：好的，我只是再次阅读算法，我认为您需要做的就是创建结果节点。只需删除这些行：

```
 if (root == null) {
            root = result;
        } else {
            root.buildTree(result);
        } 
```

然后，当您的循环完成时，您将只有一个节点`huffmanList`，即`root`：

```
 while (huffmanList.size() > 1) {
        HuffmanNode x = huffmanList.poll();
        HuffmanNode y = huffmanList.poll();
        HuffmanNode result = new HuffmanNode("-", x.getCount() + y.getCount(), null, x, y);
        huffmanList.add(result);
    }
    huffmanList.poll().genCode(" "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T20:07:31.790

在 setParent(HuffmanNode right) 你做 this.left=left 什么都不做。这一定是你的错误

# java - Android 内存泄漏堆 gc_concurrent

> ID：13769948
> 
> 赞同：1
> 
> 时间：2012-12-07T19:42:19.957
> 
> 标签：java, android, performance, memory, memory-leaks

有人能告诉我为什么会有这些内存泄漏吗？当启动画面需要完成自身（基本上称为新活动）时会发生这种情况，当我在菜单中单击按钮打开新页面（新活动）时会再次发生这种情况。

记录猫内存泄漏：

闪屏到主菜单：

```
12-07 19:35:58.037: D/dalvikvm(2167): GC_CONCURRENT freed 499K, 21% free 4138K/5228K, paused 8ms+8ms, total 397ms
12-07 19:35:58.045: D/dalvikvm(2167): WAIT_FOR_CONCURRENT_GC blocked 170ms
12-07 19:35:58.116: I/dalvikvm-heap(2167): Grow heap (frag case) to 5.208MB for 1106044-byte allocation
12-07 19:35:58.365: D/dalvikvm(2167): GC_CONCURRENT freed 3K, 18% free 5215K/6312K, paused 8ms+33ms, total 246ms 
```

主菜单到新页面：

```
12-07 19:38:30.974: D/dalvikvm(2167): GC_FOR_ALLOC freed 512K, 17% free 5272K/6304K, paused 119ms, total 151ms
12-07 19:38:31.034: I/dalvikvm-heap(2167): Grow heap (frag case) to 6.316MB for 1106044-byte allocation
12-07 19:38:31.376: D/dalvikvm(2167): GC_CONCURRENT freed 1129K, 30% free 5224K/7388K, paused 89ms+5ms, total 332ms 
```

这是我的主要内容：

```
package com.example.prva;

import android.media.MediaPlayer;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.MotionEvent;

public class MainActivity extends Activity {

    MediaPlayer MPlayer; //da MPlayer mozemo koristiti bilo gdje
    protected boolean splashactive = true;
    protected int splashtime = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);        

        MPlayer = MediaPlayer.create(this, R.raw.splash); //dodavanje zvuka MPlayeru
        MPlayer.start();        //play

        Thread tajmer = new Thread(){
            public void run(){
                try{        
                    while(splashactive && splashtime<3000)
                        {
                            sleep(50);
                            splashtime=splashtime+50;
                        }
                    }
                 catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }               
                finally{
                    finish();                   
                    MPlayer.release();
                    startActivity(new Intent(MainActivity.this, Meni_Splash.class));                
                }       
            }           
        };
        tajmer.start(); 
    }       

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            splashactive = false;           

        }       
        return true;
    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        MPlayer.release();
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        MPlayer.pause();
    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        MPlayer.start();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

Meni_Splash：

```
package com.example.prva;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class Meni_Splash extends Activity{  

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);     

        Button btnv = (Button) findViewById(R.id.buttonv);
        btnv.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent(Meni_Splash.this, button.class));              
            }
        });         
    }
} 
```

我无法弄清楚问题出在哪里？请不要告诉我增加堆大小。谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T20:42:41.100

除非您在其他地方持有对其中一项活动的引用，否则我在这里看不到任何泄漏。例如`MPlayer`，它不是私有的或受保护的，因此如果您在另一个实例中持有对它的引用，您可能会发生泄漏。

涉及到垃圾收集是正常的`MediaPlayer`。可能会占用大量内存

`MainActivity`即使开始了新的活动，您也会留在记忆中。如果你不想要那个电话`finish();`之后`startActivity();`

# jetty - 根路径的默认页面

> ID：13769950
> 
> 赞同：4
> 
> 时间：2012-12-07T19:42:35.153
> 
> 标签：jetty

我有以下网站结构：

mysite.com

*   /app1/
*   /app2/

现在，当我导航到 mysite.com 时，我的配置似乎显示了服务器上的应用程序列表。

当我浏览 mysite.com 时，如何让它显示 app1/index.html？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T20:05:42.647

好的...不知道为什么我花了这么长时间才找到答案但是...根据我现在忘记的在线页面...

将 app1 文件夹重命名为“root”。您的 jettyweb 配置 xml 中定义的默认处理程序随后会将这个应用程序映射到 /

您还可以放入 WEB-INF 文件夹和 web.xml 来定义默认欢迎页面等内容，因此您不必键入 mysite.com/index.html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:10:23.360

这是正确的。您可以通过为它定义一个上下文来配置您的一个 webapp 以映射到“/”。

这是文档：

*   jetty9 - [http://www.eclipse.org/jetty/documentation/current/setting-context-path-to-root.html](http://www.eclipse.org/jetty/documentation/current/setting-context-path-to-root.html)
*   jetty7/8 - [http://wiki.eclipse.org/Jetty/Howto/SetContextPathto_/](http://wiki.eclipse.org/Jetty/Howto/SetContextPathto_/)

如果您只是想禁用根上下文“/”上的 webapps 映射列表，请查看 jetty_home/etc/webdefault.xml 和文档中的相应部分。

希望有帮助。

# matlab - 测量 [xy] 点的 3d 块的高度

> ID：13769952
> 
> 赞同：3
> 
> 时间：2012-12-07T19:42:49.317
> 
> 标签：matlab

我有以下数据：

```
kx = 20;
ky = 20;
k  = [kx ky];

PointsL = [
    [ 32   0   0] % P1
    [387   0   0]
    [475   0   0]
    [475  30   0]
    [602  30   0] % P5
    [602 220   0] 
    [475 220   0]
    [475 737   0]
    [387 737   0]
    [ 32 737   0] % P10
    [ 32 555   0]
    [  0 555   0]
    [  0 277   0]
    [ 27 277   0]
    [ 27 250   0] % P15
    [  0 250   0]
    [  0  57   0] 
    [ 32  57   0] % P18
];
PointsH = [
    [ 32   0 270] % P1
    [387   0 270]
    [475   0 183]
    [475  30 183]
    [602  30 183] % P5
    [602 220 183] 
    [475 220 183]
    [475 737 183]
    [387 737 270]
    [ 32 737 270] % P10
    [ 32 555 270]
    [  0 555 270]
    [  0 277 270]
    [ 27 277 270]
    [ 27 250 270] % P15
    [  0 250 270]
    [  0  57 270] 
    [ 32  57 270] % P18
]; 
```

`PointsL`是下表面的点 - 都带有`z=0`。

`PointsH`是较高表面的点 - 在 z 轴上可更改。

它们都代表房间的点数。

以下代码绘制 3d 模型：

```
plength = size(PointsL,1);
for i=1:plength
    if i == 1
        pl1 = PointsL(plength,:);
        ph1 = PointsH(plength,:);
    else
        pl1 = PointsL(i-1,:);
        ph1 = PointsH(i-1,:);
    end
    pl2 = PointsL(i,:);
    ph2 = PointsH(i,:);

    line([pl1(1) pl2(1)], [pl1(2) pl2(2)], [pl1(3) pl2(3)]);
    line([ph1(1) ph2(1)], [ph1(2) ph2(2)], [ph1(3) ph2(3)]);
    line([pl1(1) ph1(1)], [pl1(2) ph1(2)], [pl1(3) ph1(3)]);
end

p1 = PointsH(2,:);
p2 = PointsH(9,:);
line([p1(1) p2(1)], [p1(2) p2(2)], [p1(3) p2(3)]);

p1 = PointsH(4,:);
p2 = PointsH(7,:);
line([p1(1) p2(1)], [p1(2) p2(2)], [p1(3) p2(3)]); 
```

![3d模型](../Images/6a149ecd216ee1082594f20eb692675d.png)

是否可以获得`z`给定`x,y`值的高度（值）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T22:09:23.677

好的，我想说这可以很容易地使用`TriScatteredInterp()`on完成`PointsH`。我意识到让它产生我想要的东西并不是那么简单。我求助于添加额外的点并移动它们以创建正确的插值三角形。

我终于得到了可以产生与点（a，b）对应的z值的东西。

这就是我最终做的......

```
epsilon = 1e-8;

PointsL_diff = epsilon*[
    [ -1   0   0] % P1
    [  0  -1   0]
    [  0  -1   0]
    [  1   0   0]
    [  0  -1   0] % added
    [  1  -1   0]
    [  1   0   0] % P5
    [  0  -1   0]
    [  1   1   0] 
    [  1   1   0]
    [  0   1   0]
    [  1   0   0] % added
    [  0   1   0]
    [ -1   0   0] % P10
    [  0   1   0] % added
    [ -1   1   0]
    [ -1   1   0]
    [ -1   0   0]
    [  0  -1   0] % added
    [ -1  -1   0]
    [ -1   1   0] % P15
    [ -1   0   0]
    [  0   1   0] % added
    [ -1  -1   0] 
    [ -1  -1   0] % P18
];

PointsL = [
    [ 32   0   0] % P1
    [ 32   0   0] % added
    [387   0   0]
    [475   0   0]
    [475   0   0] % added
    [475  30   0]
    [602  30   0] % P5
    [602  30   0] % added
    [602 220   0] 
    [475 220   0]
    [475 737   0]
    [475 737   0] % added
    [387 737   0]
    [ 32 737   0] % P10
    [ 32 737   0] % added
    [ 32 555   0]
    [  0 555   0]
    [  0 277   0]
    [  0 277   0] % added
    [ 27 277   0]
    [ 27 250   0] % P15
    [  0 250   0]
    [  0 250   0] % added
    [  0  57   0] 
    [ 32  57   0] % P18
];

PointsH = [
    [ 32   0 270] % P1
    [387   0 270]
    [475   0 183]
    [475  30 183]
    [602  30 183] % P5
    [602 220 183] 
    [475 220 183]
    [475+epsilon 220 183] % added
    [475 220+epsilon 183] % added
    [475 737 183]
    [387 737 270]
    [387 220 270] % added
    [ 32 737 270] % P10
    [ 32 555 270]
    [  0 555 270]
    [  0 277 270]
    [ 27 277 270]
    [ 27 250 270] % P15
    [  0 250 270]
    [  0  57 270] 
    [ 32  57 270] % P18
];

% plot bounds
x_min = -200;
x_max = 800;
y_min = -200;
y_max = 800;

newPointsL = PointsL + PointsL_diff;

x = [PointsH(:,1); newPointsL(:,1); x_min; x_max; x_min; x_max];
y = [PointsH(:,2); newPointsL(:,2); y_min; y_min; y_max; y_max];
z = [PointsH(:,3); newPointsL(:,3);     0;     0;     0;     0];

F = TriScatteredInterp(x,y,z); % default is linear interpolation

% find z-value for point (a,b)
a = 100;
b = 200;
z_value = F(a,b)

% generate mesh and plot surface
ti_x = x_min:10:x_max;
ti_y = y_min:10:y_max;
[qx,qy] = meshgrid(ti_x,ti_y);
qz = F(qx,qy);
mesh(qx,qy,qz);
hold on;
plot3(x,y,z,'o'); 
```

...这是代码产生的数字：

![简单建筑的网格。](../Images/4f205e083fcd1e3065efcca1bc7e1440.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T20:11:55.273

快速通用方式：

尝试`Data Cursor`图形窗口工具栏中的选项。

而且，如果您想以编程方式执行此操作，请点击此[链接](http://undocumentedmatlab.com/blog/controlling-plot-data-tips/)。

# internet-explorer - IE 的 URL 重写问题 - 导致它附加

> ID：13769954
> 
> 赞同：3
> 
> 时间：2012-12-07T19:43:00.880
> 
> 标签：internet-explorer, url, rewrite

我有以下 URL 重写类似于

```
RewriteRule   ^event/([0-9]+)/$   page1.php?title=$1   [NC,L]

RewriteRule   ^view/([0-9]+)/$    page2.php?id=$1      [NC,L] 
```

当我去`domain.com/app/event/3/`- 它去正确的 URL。

在此页面中，我有一个 JavaScript，它具有以下`onclick`事件

```
location.href = "view/5/"; 
```

在所有浏览器中，这翻译为`domain.com/app/view/5/`. 但在 IE（8 和 9）中，它最终成为`domain.com/app/event/3/view/5/`

它似乎只是附加到上一个 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T02:47:55.927

IE 的行为似乎符合预期。您的相对路径`href`应该被解释为相对于当前路径，因为标记不知道服务器端的事物是如何构造的，除非您当然告诉它。

您在 Chrome 中遇到的*问题也发生在我身上，这是应该的。*如果您希望基于基本路径解析相对 url，您需要`href`从一开始就提供它，或者通过以下`<base>`标签提供它`<head>`：

```
<!DOCTYPE html>
<html>
  <head>
    <base href="/app/" />
  </head>
  <body>
    <?php var_dump($_GET); ?>
    <ul>
      <li><a href="event/7">Foo</a></li>
      <li><a href="event/6">Bar</a></li>
    </ul>
  </body>
</html> 
```

以上将按预期工作，因为我们已指示浏览器根据该部分`href`中的`<base>`元素解析任何相对路径`<head>`。如果你不这样做，浏览器应该解析`href`任何`<a>`相对于当前路径的相对。

请特别注意规范中有关相对 URL 的[这一部分：](http://www.w3.org/TR/html401/struct/links.html#h-12.4.1)

> 用户代理必须根据以下优先级（从最高优先级到最低优先级）计算基本 URI：
> 
> 1.  基本 URI 由 BASE 元素设置。
> 2.  基本 URI 由在协议交互期间发现的元数据给出，例如 HTTP 标头（参见 [RFC2616]）。
> 3.  **默认情况下，基本 URI 是当前文档的 URI**。并非所有的 HTML 文档都有一个基本的 URI（例如，一个有效的 HTML 文档可能出现在电子邮件中，并且可能不是由 URI 指定的）。如果此类 HTML 文档包含相对 URI 并依赖于默认的基本 URI，则认为它们是错误的。（重点补充）

同样，如果您希望看到相对`href`值解析为您的基本 url，您需要在链接本身或通过`<base>`元素提供该基础，如我在上面的示例中所做的那样。

## 需要考虑的其他事项：

我想回到这个问题并记录一些其他可能相关的事情。`href`访问锚属性的各种方法会返回不同的结果。

考虑以下：

```
var anchor = document.createElement("a");
    anchor.setAttribute("href", "foo.php?fizz=buzz");

console.log( "href:         " + anchor.href );
console.log( "getAttribute: " + anchor.getAttribute("href") ); 
```

以下是我们看到的各种 Internet Explorer 版本的输出：

**互联网浏览器 6 - 7**：

```
href:         foo.php?fizz=buzz
getAttribute: foo.php?fizz=buzz 
```

**互联网浏览器 8 - 10**：

```
href:         http://fiddle.jshell.net/_display/foo.php?fizz=buzz
getAttribute: foo.php?fizz=buzz 
```

从 Internet Explorer 8 开始，该`.href`属性会根据当前文档位置自动解析完整的 URI，并将锚点的`href`值附加到末尾。这与我们在其他现代浏览器中看到的行为相同。

因此，如果您*只*需要获取`href`值，明智的做法是使用`.getAttribute("href")`而不是访问`.href`属性。

# jquery - 语言或国家/地区的 Jquery Mobile 选择菜单

> ID：13769956
> 
> 赞同：0
> 
> 时间：2012-12-07T19:43:06.323
> 
> 标签：jquery, cordova, jquery-mobile, select

任何人都可以根据经验告诉我什么是创建大列表选择项目的最佳方法，这样性能就不会受到伤害。

我想做一个设置页面，用户可以在其中选择他的国家或语言。两个选择菜单都将超过 20-30 项。我想用一个单选按钮列表制作一个覆盖层，并让用户控制滚动和选择他的项目。

这是性能吗？还有其他很酷的解决方案吗？

我想为Phonegap使用这个布局，这意味着有没有办法使用一些本机功能来创建这个菜单，使用它们会更好，而不是JQM功能。

你是什​​么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:22:07.340

你必须明白没有很酷的魔法方法可以做到这一点。jQM 依赖于尽可能快的 jquery。

20-30个项目还不错。您应该担心 50 多个项目，100 个项目选择框需要大约 2 秒才能呈现。

主要的性能问题是 listview("refresh") 方法。只有一种方法可以通过使用常见的 js DOM 方法来更快地做到这一点。不幸的是，您将花费大量时间正确复制它。

我会建议您在一些较旧的移动设备上进行性能测试。如果 jQM 渲染列表视图超过 500 毫秒，则使用一些自定义 ajax 加载器来显示应用程序正在运行。你无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:53:50.163

我不知道这是否是一个*很酷*`navigator.appVersion`的解决方案，但您可以使用自动确定语言而不是使用列表进行选择，请参阅以下 JavaScript 片段：

```
<script>
  alert(navigator.appVersion);
</script> 
```

以及在具有 Android 2.2 的 Android 设备上的相应结果：
![在此处输入图像描述](../Images/d632a141a4e46ea3313685c731c506bf.png)
您只需解析语言，在示例中为**de-de**。

# android - 来自自定义视图的大小属性

> ID：13769957
> 
> 赞同：0
> 
> 时间：2012-12-07T19:43:11.520
> 
> 标签：android, android-gridview

我编写了自己的 GridView，并将其与 XML 设置 layout_width 一起使用为 match_parent。我的问题是如何从 attrs 获取像素宽度。我知道如何获取我的 cyston attrs 但不知道如何在绘制视图之前读取宽度值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:45:49.510

在 android 中，您无法在绘图之前访问 size 属性，因为尺寸是在绘图过程开始时确定的。xml 描述的所有视图都是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T20:40:20.233

我发现这个链接试图找到一种方法来获取高度，这样你就可以使用它来找到屏幕的宽度（如果你的网格填充了屏幕的大小）：[Android - 获取父布局的高度](https://stackoverflow.com/questions/3656139/android-get-height-of-the-parent-layouut)

他们给出：getApplicationContext().getResources().getDisplayMetrics().heightPixels

希望它有帮助

如果您觉得它有用，请查看已解决

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T09:28:00.323

我解决这个问题。只需在调用 onMeasure 方法后获取 getMeasuredDimensions 即可。

# asp.net-mvc-3 - 视图中的多个 ViewModel

> ID：13769958
> 
> 赞同：2
> 
> 时间：2012-12-07T19:43:16.667
> 
> 标签：asp.net-mvc-3, grid, viewmodel, kendo-ui

我希望在一个视图中显示两个具有不同信息（模型）的 Telerik Kendo 网格，但我不知道该怎么做。

模型：

```
using System.Collections.Generic;

namespace KendoUIMvcApplication1.Models
{
    public class Car
    {
        public int Id { get; set; }
        public string Name { get; set; }
    }

    public class Truck
    {
        public int Id { get; set; }
         public string Name { get; set; }
    }

    public class Vehicles
    {
        public IEnumerable<Car> CarCol { get; set; }
        public IEnumerable<Truck> TruckCol { get; set; }
    }
} 
```

控制器（创建一些测试对象）：

```
using System.Collections.Generic;
using System.Web.Mvc;
using KendoUIMvcApplication1.Models;

namespace KendoUIMvcApplication1.Controllers
{
    public class HomeController : Controller
    {
        public ActionResult Index()
        {
            var carList = new List<Car>();
            var truckList = new List<Truck>();
            var vehCol = new Vehicles();

            var car1 = new Car
            {
                Id = 1, 
                Name = "Passat"
            };
            var car2 = new Car
            {
                Id = 2,
                Name = "Passat"
            };
            carList.Add(car1);
            carList.Add(car2);

            var truck1 = new Truck
            {
                Id = 1,
                Name = "S10"
            };
            var truck2 = new Truck
            {
                Id = 1,
                Name = "Blazer"
            };
            truckList.Add(truck1);
            truckList.Add(truck2);

            vehCol.CarCol = carList;
            vehCol.TruckCol = truckList;

            return View(vehCol);
        }
    }
} 
```

查看（这里我试图显示两个网格。第一个用于汽车，第二个用于卡车）：

```
@using KendoUIMvcApplication1.Models

@model IEnumerable<Vehicles>

@*// Car Grid*@
@(Html.Kendo().Grid(Model)
    .Name("Grid")
    .Columns(columns => {
        columns.Bound(c => c.Id);
        columns.Bound(c => c.Name);
    })
)

<div></div>

@*// Truck Grid*@
@(Html.Kendo().Grid(Model))
    .Name("Grid")
    .Columns(columns => {
        columns.Bound(t => t.Id);
        columns.Bound(t => t.Name);
    })
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:49:30.800

您的模型应该是类型`Vehicles`：

```
@model Vehicles 
```

然后您可以访问这两个集合：

```
@Html.Kendo().Grid(Model.CarCol)
... 
```

和

```
@Html.Kendo().Grid(Model.TruckCol)
... 
```

# ios - iOS 6 - 即使 UIView 仍然是第一响应者，键盘也不显示

> ID：13769959
> 
> 赞同：0
> 
> 时间：2012-12-07T19:43:19.147
> 
> 标签：ios, ios6

我有一个`UIView`像 textEditor 这样的工作，可以成为显示键盘的第一响应者。当我`UIView`的键盘显示时，我按主页按钮将应用程序置于后台并打开其他应用程序，打开一个文件到我的应用程序。问题是关闭模式后键盘不会自动显示`viewController`。

我检查了一下：`isFirstResponder`我`UIView`的是YES。但是键盘仍然不可用。当时我的应用程序有 2 个窗口，但第二个窗口像往常一样不包含键盘。

有点奇怪。有人跟我一样有这个问题吗？

请注意，此问题仅在 iOS 6.0 上。

# django - 在 Django 模板中有条件地加载开发或生产静态文件

> ID：13769972
> 
> 赞同：3
> 
> 时间：2012-12-07T19:43:59.507
> 
> 标签：django, build-automation, development-environment

我正在使用 Yeoman (http://yeoman.io/) 作为前端构建过程，它连接/缩小 css 和 javascript。

在开发环境中，我希望加载单独的、未缩小的源代码以便于调试，而无需设置 Chrome Source Maps (http://code.google.com/p/closure-compiler/wiki/SourceMaps)。在生产中，为了性能，会加载连接的、缩小的源。

我最初的方法是在我的模板中使用条件，如下所示：

```
 {% if DEVELOPEMENT %}
        <!-- library -->
        <script src="{{ STATIC_URL }}lib/jquery.js"></script>
        <script src="{{ STATIC_URL }}lib/some_library.js"></script>

        <!-- app -->
        <script src="{{ STATIC_URL }}scripts/main.js"></script>
        <script src="{{ STATIC_URL }}scripts/app_model.js"></script>
        <script src="{{ STATIC_URL }}scripts/app_view.js"></script>

    {% else %}
        <script src="{{ STATIC_URL }}min/lib.min.js"></script>
        <script src="{{ STATIC_URL }}min/app.min.js"></script>
    {% endif %} 
```

DEVELOPMENT 使用上下文处理器暴露给模板上下文：

```
from django.conf import settings # import the settings file

def development(context):
    return {'DEVELOPEMENT': settings.DEVELOPEMENT} 
```

这种方法有什么缺点吗？在 Django 中是否有更简洁的方法来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T20:06:46.063

我会使用您`DEBUG`已经包含在`django.core.context_processors.debug`.

```
{% if debug %}
    <!-- scripts -->
{% else %}
    <!-- other scripts -->
{% endif %} 
```

# ios - RestKit 安装到 XCode 会出现多个错误

> ID：13769974
> 
> 赞同：0
> 
> 时间：2012-12-07T19:44:05.437
> 
> 标签：ios, restkit

我正在使用一个没有 ARC 的项目。我正在尝试将 RestKit 安装到项目中。我尝试了以下链接中给出的说明： [https://github.com/RestKit/RestKit/blob/master/README.md](https://github.com/RestKit/RestKit/blob/master/README.md) [http://www.raywenderlich.com/13097/intro-to-restkit-tutorial](http://www.raywenderlich.com/13097/intro-to-restkit-tutorial)

但我收到以下错误 ![遵循说明后发现的错误](../Images/f4ec990dbf13653d7c2baf1479bff4dc.png)

错误发生在以下几行：1.程序中的意外@：

```
 NSArray *attributeNames = [userInfoValue isKindOfClass:[NSArray class]] ? userInfoValue : @[ userInfoValue ]; 
```

首先，这是一个有效的 Obj C 语法吗？

2.  数组下标不是整数

NSAttributeDescription *attribute = [entity attributesByName][attributeName];

attributeName 是一个 CFStringRef

有没有人遇到过这些问题。请通知我修复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:50:37.267

这是为了使用Objective-C 文字下标访问属性属性。

您构建的 Xcode 版本是什么以及使用什么基础 SDK？在具有 6.0 基本 SDK 的 Xcode 4.5.2 下，它可以毫无问题地编译。

# r - 基因型数据 - 如何使用 R 导入

> ID：13769975
> 
> 赞同：0
> 
> 时间：2012-12-07T19:44:08.163
> 
> 标签：r, file, import

我是 stackoverflow 的新成员，我开始在 R 中工作，所以我需要一些帮助！

我有一个包含 740 行和 500 000 列的文件，由制表符分隔，格式为 .txt 。文件大小约为 1.2GB。该文件包含有关牛基因型的信息。我需要将此文件读入 R 程序以使用表型数据执行关联研究分析。我无法在 R 中导入这个大文件。有人知道执行此操作的命令吗？只是一个用于导入此文件并在 R 中读取它的命令？

我的系统：i5 和 6Gb RAM 内存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T20:24:10.053

read.table() 是你需要的。你的文件有标题吗？

在 Linux 上（文件中没有标题）： `mydata = read.table("/home/username/genotype.txt", header=FALSE)`

在 Linux 上（文件中包含标头）： `mydata = read.table("/home/username/genotype.txt", header=TRUE)`

在 Windows 上（文件中没有标题）： `mydata = read.table("c:\\mydata\\genotype.txt", header=FALSE)`

在 Windows 上（文件中有标题）： `mydata = read.table("c:\\mydata\\genotype.txt", header=TRUE)`

`read.table()`默认情况下使用制表符作为分隔符，但您可以指定参数 sep=","（或 sep="|" 等）来指定不同的分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T20:04:41.680

在 R 中，您可以键入`?read.csv`，`?read.table`这将为您提供这些功能的帮助文件。

然后，您可以将此函数的输出分配给一个变量，该变量将是您的数据框。

例如：

```
 myDataFrame <- read.csv("path/to/file.txt", sep="\t") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T21:12:07.343

其他答案解决了将数据读入 R 的一般问题，但您的数据属于特定类型；[CRAN](http://cran.r-project.org)和[Bioconductor](http://bioconductor.org)以及[野外](http://www.bios.unc.edu/research/genomic_software/Matrix_eQTL/)都有一些出色的“特定领域”软件包。这些包将有自己的输入这些数据的方式，可能是从您当前的表示形式转换而来的，但可能会在有效处理和执行常见操作方面具有显着优势。更好地追求这些，同时学习如何使用 R 的一般特性。

# design-patterns - 设计模式 - 服务层

> ID：13769976
> 
> 赞同：3
> 
> 时间：2012-12-07T19:44:11.797
> 
> 标签：design-patterns, service-layer

我目前正在阅读很多有关设计模式的内容，并且一直在观看他们图书馆中的各种**Pluralsight**视频。现在到目前为止，我已经学到了以下内容：

1.  存储库模式
2.  工作单元模式
3.  抽象工厂模式
4.  阅读很棒的“.NET 中的 DI”一书

现在我阅读了很多关于**服务**和**服务层**的内容，并且想要一些关于阅读和了解这些的最佳位置的建议。我认为这适合**领域驱动设计**，我应该从那里开始吗？“服务”一词似乎在 IT 中被广泛使用，它可能会混淆确切的含义。

所以我的问题是：

1.  什么是**服务层**
2.  了解它们的最佳地点在哪里

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T19:53:20.580

服务层是位于表示层和数据访问层之间的层。

表示处理 HTTP 请求和响应（在 Web 应用程序中）和一般表示逻辑（页面之间的工作流等），并委托给服务层用于应用程序使用的业务、事务逻辑。

然后服务层委托数据访问层访问数据库。

# javascript - 当我将 SVG 内容绘制到画布上时，SVG 被裁剪

> ID：13769981
> 
> 赞同：3
> 
> 时间：2012-12-07T19:44:47.400
> 
> 标签：javascript, html, canvas, svg, drawing

我有一堆 SVG 文本需要绘制到画布上。我正在将我的 SVG 对象转换为 SVG 数据 URI，将其应用于图像的源，然后将该图像绘制到画布上，但由于某种原因，它会在一定宽度和高度后剪切文本。

我知道问题不在于画布大小，因为我还首先将其他图像绘制到画布上（这比文本更宽更高），没有任何问题。另一个奇怪的事情是，如果我把图像附加到身体上，它就会完美地呈现出来。

```
var imageText = new Image();
imageText.src = "data:image/svg+xml;base64," + btoa($("#text_container").html());
imageText.onload = function() { context.drawImage(imageText, 0, 0); }; 
```

#text_container 是我的 DIV，它包含所有 SVG 代码。

编辑：为了提供更多细节，这是我在下面写的评论：我正在构建一个 JS 应用程序，让用户创建自定义足球。您可以更改球和文本的不同颜色和特征，因此可以归结为带有一些 SVG 文本的多个 DIV（因为文本沿着弧形路径移动）。我可以获取 DIV 的背景图像并将其绘制到画布上，以创建足球。当我尝试将文本绘制到画布上时遇到问题，因为它正在被裁剪。然后我将把那个画布元素转换成 PNG 供用户保存。

我将文本向上和向左移动更多，以便您可以更好地看到裁剪。如您所见，球抽得很好。 [http://i.imgur.com/Sngu4.png](http://i.imgur.com/Sngu4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T03:53:03.273

假设这`context`是您的画布的 RenderingContext（“2D”），您应该在[context.drawImage()](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-drawimage)函数中包含“destiny width”和“destiny height”参数：

```
context.drawImage(image, dx, dy, dw, dh) 
```

如果 myCanvas 是您的画布对象的 id（而 $ 是 jQuery 的函数），您可以调用：

```
var dw = $('myCanvas').width();
var dh = $('myCanvas').height();
context.drawImage(image, 0, 0, dw, dh); 
```

这将缩放图像以适合整个画布。我的建议是首先“查看”svg 图像是什么（即，将其添加到正文并测量文本的坐标：sx、sy、sw 和 sh，在上面的链接中），因为您可能必须裁剪它“故意”以便将其放置在您想要的位置：

```
context.drawImage(image, sx, sy, sw, sh, dx, dy, dw, dh) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:51:00.253

在黑暗中拍摄....`drawImage()`有一些可以设置的尺寸参数吗？也许它有一个默认值，它正在绘制大小，然后剪裁其余部分。只是一个想法...

也可能是因为您的图像是动态创建的，因此缺少某种图像大小参数，这些参数通常包含在`drawImage()`函数可能正在寻找的 .jpg 文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-29T23:46:48.180

我遇到了*同样的*问题，但我想我刚刚找到了解决方案。

仅在 SVG 元素上设置 a`width`和 a 是不够的。`height`显然，您还需要设置`viewBox`：

```
<svg width="720" height="400" viewBox="0 0 720 400"></svg> 
```

这应该在画布上正确渲染图像。:)

# sql - 更新 2 个表中的 2 列并连接多个表

> ID：13769986
> 
> 赞同：1
> 
> 时间：2012-12-07T19:45:04.513
> 
> 标签：sql, oracle10g

我在更新多个表中的多行和连接多个列时遇到问题，我必须更新名为 policy 的表中的到期日期，并且还为当前拥有强制执行策略的所有员工在名为 rating_record 的表中提供 10% 的折扣。我可以提供满足所有条件的 10% 折扣，但不知道如何更新到期日期 - 请帮助！

我到目前为止的代码是我必须使用第二次更新功能使所有员工的到期日期为 1 月 31 日。这需要在 Oracle 10g 中使用 SQL 开发人员完成

```
 update rating_record
     set rate=(rate-(100/10)) where exists
    (select rating_record.rate from
    rating_record, coverage, policy, insured_by, client, person, staff
    where
   staff.pid = person.pid and
    client.pid = person.pid and
     client.cid = insured_by.cid and
    policy.pno = insured_by.pno and
     policy.pno = coverage.pno and 
    coverage.coid = rating_record.coid and
     policy.status = 'E'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T01:04:42.023

您只能在 UPDATE 语句中更新一个基表中的值。相反，您应该创建一个过程，并在事务中包装两个更新语句（每个要更新的表一个）。

# facebook - Facebook OAuthException：此授权码已被使用

> ID：13769989
> 
> 赞同：2
> 
> 时间：2012-12-07T19:45:14.953
> 
> 标签：facebook, omniauth, koala

这个问题与已经提出的这个[问题有关。](https://stackoverflow.com/questions/13752959/oauthexception-this-authorization-code-has-been-used-facebook)

Facebook 的这种变化是否意味着我们必须存储第一次返回的用户令牌并将其重用于所有后续的 Facebook 请求？如果我们不存储这个用户令牌会发生什么 - 我们可以再次请求它吗？如果是，我们该怎么做？

另外，用户令牌什么时候过期，如果它过期了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:56:01.600

本[文档](https://developers.facebook.com/docs/howtos/login/debugging-access-tokens/)展示了如何获取有关 access_token 的数据。您致电：

> [https://graph.facebook.com/debug_token?input_token=INPUT_TOKEN&access_token=ACCESS_TOKEN](https://graph.facebook.com/debug_token?input_token=INPUT_TOKEN&access_token=ACCESS_TOKEN)

最佳实践是存储访问令牌及其到期时间。本[文档](https://developers.facebook.com/docs/howtos/login/extending-tokens/)展示了如何扩展会话。

请注意在第二个链接中找到的此报价：

> 当用户完成客户端身份验证流程并且您检索他们的用户访问令牌时，默认情况下，您将收到一个仅在 1-2 小时内有效的短期令牌。没有 Javascript SDK 功能可以帮助扩展此功能，但是，您可以将此令牌换成寿命更长的令牌（有效期为 60 天）

# java - 位置更新时回调活动的java类

> ID：13769992
> 
> 赞同：0
> 
> 时间：2012-12-07T19:45:26.650
> 
> 标签：java, android, location

我发现我想用这个类来获取位置更新，但我试图找出如何在位置更新时实现对活动的回调。我是否使用一些回调或其他类型的方法来实现这一点？

请注意，我从 [http://www.androidhive.info/2012/07/android-gps-location-manager-tutorial/获得了代码](http://www.androidhive.info/2012/07/android-gps-location-manager-tutorial/)

```
GPSTracker.java
package com.example.gpstracking;

import android.app.AlertDialog;
import android.app.Service;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.IBinder;
import android.provider.Settings;
import android.util.Log;

public class GPSTracker extends Service implements LocationListener {

    private final Context mContext;

    // flag for GPS status
    boolean isGPSEnabled = false;

    // flag for network status
    boolean isNetworkEnabled = false;

    // flag for GPS status
    boolean canGetLocation = false;

    Location location; // location
    double latitude; // latitude
    double longitude; // longitude

    // The minimum distance to change Updates in meters
    private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 10; // 10 meters

    // The minimum time between updates in milliseconds
    private static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 1; // 1 minute

    // Declaring a Location Manager
    protected LocationManager locationManager;

    public GPSTracker(Context context) {
        this.mContext = context;
        getLocation();
    }

    public Location getLocation() {
        try {
            locationManager = (LocationManager) mContext
                    .getSystemService(LOCATION_SERVICE);

            // getting GPS status
            isGPSEnabled = locationManager
                    .isProviderEnabled(LocationManager.GPS_PROVIDER);

            // getting network status
            isNetworkEnabled = locationManager
                    .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

            if (!isGPSEnabled && !isNetworkEnabled) {
                // no network provider is enabled
            } else {
                this.canGetLocation = true;
                // First get location from Network Provider
                if (isNetworkEnabled) {
                    locationManager.requestLocationUpdates(
                            LocationManager.NETWORK_PROVIDER,
                            MIN_TIME_BW_UPDATES,
                            MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.d("Network", "Network");
                    if (locationManager != null) {
                        location = locationManager
                                .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                    }
                }
                // if GPS Enabled get lat/long using GPS Services
                if (isGPSEnabled) {
                    if (location == null) {
                        locationManager.requestLocationUpdates(
                                LocationManager.GPS_PROVIDER,
                                MIN_TIME_BW_UPDATES,
                                MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                        Log.d("GPS Enabled", "GPS Enabled");
                        if (locationManager != null) {
                            location = locationManager
                                    .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                            if (location != null) {
                                latitude = location.getLatitude();
                                longitude = location.getLongitude();
                            }
                        }
                    }
                }
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

        return location;
    }

    /**
     * Stop using GPS listener
     * Calling this function will stop using GPS in your app
     * */
    public void stopUsingGPS(){
        if(locationManager != null){
            locationManager.removeUpdates(GPSTracker.this);
        }
    }

    /**
     * Function to get latitude
     * */
    public double getLatitude(){
        if(location != null){
            latitude = location.getLatitude();
        }

        // return latitude
        return latitude;
    }

    /**
     * Function to get longitude
     * */
    public double getLongitude(){
        if(location != null){
            longitude = location.getLongitude();
        }

        // return longitude
        return longitude;
    }

    /**
     * Function to check GPS/wifi enabled
     * @return boolean
     * */
    public boolean canGetLocation() {
        return this.canGetLocation;
    }

    /**
     * Function to show settings alert dialog
     * On pressing Settings button will lauch Settings Options
     * */
    public void showSettingsAlert(){
        AlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);

        // Setting Dialog Title
        alertDialog.setTitle("GPS is settings");

        // Setting Dialog Message
        alertDialog.setMessage("GPS is not enabled. Do you want to go to settings menu?");

        // On pressing Settings button
        alertDialog.setPositiveButton("Settings", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int which) {
                Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                mContext.startActivity(intent);
            }
        });

        // on pressing cancel button
        alertDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
            dialog.cancel();
            }
        });

        // Showing Alert Message
        alertDialog.show();
    }

    @Override
    public void onLocationChanged(Location location) {
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T20:08:36.053

一些注意事项：

*   默认情况下，服务在 UI 线程上运行。如果从特定来源获取位置需要很长时间，则此类可能会阻止您的 UI。您需要多久更新一次？您可以运行一个计时器来向 IntentService 发送请求以获取 GPS 信息。
*   如果您确实需要 GPS“跟踪”，那么您做对了，但请记住 GPS 会很快耗尽电池电量。
*   从一个 Android 组件到另一个组件的最佳通信方式是使用 BroadcastReceiver。这提供了一个清晰、直接的回调，可以处理来自不同组件的多个“消息”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T20:17:01.797

此代码可用于使用 GPSTracker 类获取位置，将代码粘贴到活动 onCreate 方法中以进行测试。是的，它现在会阻止您的 UI 线程，但您将获得该位置。之后，您可以阅读有关在 Android 中使用[Service](http://www.vogella.com/articles/AndroidServices/article.html)以获得更好的想法。

```
 LocationResult locationResult = new LocationResult() {
                @Override
                public void gotLocation(Location location) {
                    Log.d("Activity","In gotLocation Listener");
                    boolean hasAddedQr = false;
                    if(hasAddedQr){
                        return;
                    }
                    hasAddedQr = true;
                    if (location != null) {
                        Log.d("Activity","Got the location");

                        // Got the location!
                        try {

                            double lati = location.getLatitude();
                            double longi = location.getLongitude();

                            text.setText("Got Location: La="+lati+", Lo="+longi);
                        } catch (Exception e) {
                            // TODO: handle exception
                        }
                    } else {
                        GetLocation.this.runOnUiThread(new Runnable() {

                            @Override
                            public void run() {
                                // TODO Auto-generated method stub
                                text.setText("Location was returned null");

                            }
                        });
                    }
                }
            };
            GPSTracker myLocation = new GPSTracker();
            boolean isEnabled = myLocation.getLocation(GetLocation.this, locationResult);
            if(!isEnabled){
                Log.d("Activity", "LOCATION SERVICES WERE NOT ENABLED");
                text.setText("Location service not available");
                getLocationBtn.setEnabled(true);

            }
            else{
                Log.d("Activity", "LOCATION SERVICES ENABLED");

            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T20:17:23.367

是的，你应该添加一个这样的回调方法：

```
public GPSTracker(Context context, Activity calleractivity) {
    this.mContext = context;
    getLocation();

  this.calleractivity=calleractivity
} 
```

您的更新方法将类似于

```
 public void update(){
       calleractivity.getback();
    } 
```

在您的活动中：

```
gps = new GPSTracker(Context context, this); 
```

我希望它有帮助

# java - Java - 在不知道构造函数参数的情况下使用反射创建新实例

> ID：13769994
> 
> 赞同：6
> 
> 时间：2012-12-07T19:45:32.090
> 
> 标签：java, reflection

我需要创建许多类的新实例。我正在使用反射，但是当我创建 c.newInstance() 时，没有“空参数构造函数”的类会抛出 java.lang.InstantiationException。

现在，我该如何创建每个类的实例？

我知道我可以使用 c.getConstructor(Class).newinstance(params) 创建没有“空参数构造函数”的类的实例，但我不知道每个类的参数。

还有一件事，所有这些类都从另一个名为 ParentClass 的类扩展，所以我可以使用的一种解决方法是在 ParentClass 中包含一些代码，强制子类实现“空参数构造函数”，但不知道如何做这个。

提前致谢 ！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T19:49:06.517

您可以调用[Class.getConstructors()](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getConstructors%28%29)来获取给定类的所有构造函数。

在每个[Constructor](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Constructor.html)上，您可以调用[Constructor.getGenericParameterTypes()](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Constructor.html#getGenericParameterTypes%28%29)来了解它需要哪些参数。

*   [类的 JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html)
*   [构造函数的 JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Constructor.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T19:49:19.820

你不能。没有办法“要求”无参数构造函数并由编译器强制执行，并且根据定义，要创建类的实例，您必须为其提供必要的参数，否则您将得到一个违反类合同（因为它没有正确初始化）。

在代码级别强制执行此操作的正确方法是使用对象工厂和接口。我假设您必须使用反射，因为您在编译时不知道类型；在这种情况下，还应该有一个“工厂”，它知道如何生成每种类型的实例。该工厂应该使用相关类型构建/编译，以便它知道并可以调用正确的构造函数。然后，工厂实现您的代码知道的接口，例如“ObjectFactory”，它允许您委托给工厂以实例化对象。然后，您将拥有一些方法，对象工厂可以使用该方法注册为负责它可以实例化的任何类型。

在您尝试创建的类附带的代码中：

```
static {
    FactoryRegistry.register(TypeA.class, new TypeAFactory());
} 
```

在您的代码中：

```
Class<?> unknownClass = ...;
Object obj = FactoryRegistry.getFactory(unknownClass).newInstance(); 
```

（您有一个实现并指定方法的`Factory`接口）`TypeAFactory``newInstance`

您不知道`unknownClass`它是什么或如何实例化它，但如果该类附带的代码注册了一个工厂，您可以查询该工厂并​​要求它为您创建对象。如果`unknownClass`是真的`TypeA.class`，那么注册表将返回`TypeAFactory`已注册的创建对象。

* * *

或者，您可以只要求您的框架动态加载的任何代码的作者都包含一个无参数的构造函数。它不是严格执行的，但作者可以更容易地实施。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T19:54:30.730

创建类实例有**两种反射方法**：`java.lang.reflect.Constructor.newInstance()`和`Class.newInstance()`

**Class.newInstance() 只能调用零参数构造函数**，而

**Constructor.newInstance() 可以调用任何构造函数，而不管参数的数量**。

# oracle10g - Oracle - 我可以使用命名约束声明外键吗？

> ID：13769999
> 
> 赞同：0
> 
> 时间：2012-12-07T19:45:52.890
> 
> 标签：oracle10g, foreign-keys, constraints, ddl

我正在使用 Oracle Express 版 10g。

下面的 DDL 在“REFERENCES TABLE_A_PK”行中引发 DB 错误

“SQL 错误：ORA-00942：表或视图不存在”

```
CREATE TABLE TABLE_A (
    COLUMN_A    NUMBER,
    COLUMN_B    NUMBER,
    COLUMN_C    NUMBER,
    COLUMN_D    NUMBER,
    CONSTRAINT TABLE_A_PK 
        PRIMARY KEY (COLUMN_A, COLUMN_B)
)

CREATE TABLE TABLE_B (
    COLUMN_A    NUMBER,
    COLUMN_B    NUMBER,
    COLUMN_Y    NUMBER,
    COLUMN_Z    NUMBER,

    CONSTRAINT TABLE_A_FK 
        FOREIGN KEY (COLUMN_A, COLUMN_B)
        REFERENCES TABLE_A_PK
) 
```

我可以使用命名约束作为外键引用吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:48:35.577

您没有指定要引用的键的名称，而是指定了列，因此，不，您不能引用约束的名称。你需要指定类似的东西

```
CREATE TABLE TABLE_B (
    COLUMN_A    NUMBER,
    COLUMN_B    NUMBER,
    COLUMN_Y    NUMBER,
    COLUMN_Z    NUMBER,

    CONSTRAINT TABLE_A_FK 
        FOREIGN KEY (COLUMN_A, COLUMN_B)
        REFERENCES TABLE_A( COLUMN_A, COLUMN_B )
) 
```