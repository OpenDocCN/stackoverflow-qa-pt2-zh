# StackOverflow 问答 15832000-15832999

# xslt - 元素的总和

> ID：15832000
> 
> 赞同：0
> 
> 时间：2013-04-05T10:50:55.200
> 
> 标签：xslt

我需要添加多个值​​，具体取决于每个项目的内容。例如。

```
<links>
<test element="32"/>
<test element="17"/>
<test element="13"/>
<test element="11"/>
<test element="9"/>
<test element="8"/>
<test element="7"/>
<test element="7"/>
</links> 
```

元素总数：**8**，每个元素的值之和：**104**，a显示的值为this(104)。

```
 <xsl:template match="//x:span[@class='ws-filter-count']">
    <xsl:variable name="countProduct" select="normalize-space(translate(text(), '()', ''))" />
    <xsl:variable name="sum" select="number(0)"/>
    <test element="{$countProduct}" />
  </xsl:template> 
```

这个总和：

这只能通过调用模板来完成吗？，递归的，对吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:30:27.217

如果我正确理解了您想要实现的目标：

### 样式表

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text" version="1.0"/>

  <xsl:template match="links">
    <xsl:value-of select="sum(test/@element)"/>
  </xsl:template>
</xsl:stylesheet> 
```

### 输入

```
<links>
  <test element="32"/>
  <test element="17"/>
  <test element="13"/>
  <test element="11"/>
  <test element="9"/>
  <test element="8"/>
  <test element="7"/>
  <test element="7"/>
</links> 
```

### 输出

```
104 
```

# servicebus - 从我的本地应用程序调用在云上运行的服务总线

> ID：15832001
> 
> 赞同：0
> 
> 时间：2013-04-05T10:50:59.210
> 
> 标签：servicebus

如何从我的本地应用程序调用在云上运行的服务总线。如果有一些演示，请分享链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T23:43:55.293

转至[Windows Azure](http://www.windowsazure.com/en-us/downloads/)站点以下载适用于您所使用语言的 SDK。然后前往服务总线[示例站点](http://servicebus.codeplex.com/)了解一些演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:00:53.197

实际上，所有 azure 服务总线示例代码都是在本地机器上开发和测试的。除非您的组织有一些特殊的防火墙设置，否则它应该可以正常工作。让我们知道你得到了什么。

# selenium-webdriver - 在 IE 中单击带有 selenium 的浏览按钮时出现问题

> ID：15832007
> 
> 赞同：0
> 
> 时间：2013-04-05T10:51:30.300
> 
> 标签：selenium-webdriver

我通过读取浏览文本的坐标，在上传文件实用程序中使用 Selenium Webdriver 代码单击 IE 中的浏览按钮。虽然代码在 IE 和 firefox 中的某些机器上运行良好，但在另一台机器上，相同的代码适用于 firefox，但浏览按钮在 IE 中变得无法点击。我们检查了互联网选项中的设置，两台机器上的一切看起来都一样。请让我们知道是否有人遇到任何此类问题以及可行的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:57:11.760

如果有任何其他方式通过避免“浏览器”按钮方法在您的应用程序中上传文件，那么这始终是首选。有些人会使用[Apache HTTPComponents](http://hc.apache.org/)将 POST 上传到“浏览”按钮所指的 servlet。这是迄今为止首选的方法，而不是使用 WebDriver。浏览按钮的问题在于它会打开本机操作系统控件（在某些情况下），而您可以控制这些控件的唯一方法是使用[Sikuli API](http://search.maven.org/#artifactdetails%7Corg.sikuli%7Csikuli-api%7C1.0.2%7Cjar)根据找到匹配的屏幕截图来单击元素。此外，如果您使用 Sikuli，则不能在同一台机器上运行多个浏览器测试，因为每个测试都会阻止另一个测试的屏幕比较，这将排除您使用 RemoteWebDriver。

# javascript - 如何提示 iPhone/iPad 访问者安装原生应用？

> ID：15832014
> 
> 赞同：8
> 
> 时间：2013-04-05T10:51:48.430
> 
> 标签：javascript, iphone, ios, ipad, mobile-application

我在我的 iPhone/iPad 上访问了一些网站，这些网站在我第一次访问该网站时提示我安装本机应用程序。是否有人们为此使用的标准脚本，或者我应该创建自己的脚本？这之前一定有数千次，但尽管无休止的谷歌搜索，我还是找不到我可以使用的“库存”脚本。理想情况下，它应该使用 cookie，这样用户每月收到的提示不会超过一次。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-22T08:56:08.590

苹果实际上有一个相对不显眼的内置方法，如果尚未安装应用程序，它会在浏览器顶部添加一个“智能应用程序横幅”：

[![智能应用横幅](https://i.stack.imgur.com/jmIG6.png)](https://i.stack.imgur.com/jmIG6.png)

要将智能应用横幅添加到您的网站，请在您希望横幅出现的每个页面的头部添加以下元标记：

`<meta name="apple-itunes-app" content="app-id=myAppStoreID">`

有关更多选项，请参阅 Apple 网站上的完整文档：

[http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html)

这会在页面顶部添加一个漂亮的横幅，可以通过单击关闭按钮将其关闭。与弹出窗口（警告框）不同，它不会过多地遮盖页面或阻止页面加载，并在单击时直接转到应用程序的应用商店页面。我认为这可能是大多数情况下的最佳解决方案。

由于它只涉及添加一个元标记，因此它也比任何其他基于 JavaScript 的解决方案更容易实现，并且没有出现在非 iOS 设备上的风险。

**警告：**仅适用于 Safari。不是铬等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:55:04.843

我假设他们正在通过`HTTP_USER_AGENT`

```
<?php

$iPod   = stripos($_SERVER['HTTP_USER_AGENT'],"iPod");
$iPhone = stripos($_SERVER['HTTP_USER_AGENT'],"iPhone");
$iPad   = stripos($_SERVER['HTTP_USER_AGENT'],"iPad");
$droid  = stripos($_SERVER['HTTP_USER_AGENT'],"Android");

if ($iPod || $iPhone || $iPad){
    // Display Prompt for iOS
} else if($droid){
    // Display Prompt for Android
} 
```

# linux - 如何在 perl 脚本中的 telnet 命令提示符下运行命令

> ID：15832015
> 
> 赞同：1
> 
> 时间：2013-04-05T10:51:51.500
> 
> 标签：linux, perl, tcl, telnet, perl-module

我在 perl 脚本中执行 telnet 命令，如下所示。

```
$telnetOutput = `telnet localhost 4505`;
print "\n telnet command output: $telnetOutput \n";

$clients = `clients`;
print"\n $clients\n";

$clientNumber_or_anyOtherKey = `1`;
print "\n $clientNumber_or_anyOtherKey \n";

$pollers = `pollers`;
print "\n $pollers\n";` 
```

但是在运行 $telnetOutput = ``telnet localhost 4505``; 命令，正如我们所知，它将打开 telnet 命令提示符，但所有其他命令仍在同一旧命令 prmopt 中执行，因此它表示 `clients`或`1`不`pollers`被识别为内部或外部命令。

任何 1 可以帮助我吗？预先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:04:52.797

与 telnet 等外部进程通信比您想象的要复杂得多，因为您必须正确处理缓冲、等待输入等。

如果您确实需要完全交互，则解决此问题的规范方法是使用 Expect ( [https://metacpan.org/module/RGIERSIG/Expect-1.21/Expect.pod )。](https://metacpan.org/module/RGIERSIG/Expect-1.21/Expect.pod)

如果您实际上不需要交互，那么像`ssh`or `rsh`（您当然可以从 perl 调用）之类的远程命令运行程序就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:08:26.310

这是 telnet 连接到 d-link des-1228 路由器并执行 2 个命令的工作示例。如果你想改变它：

```
#!/usr/bin/perl

use strict;
use warnings;
use Net::Telnet;

my $params;
$params{'login'}='root';
$params{'password'}='hardpass';
$params{'default_prompt'}='/DES-[^:]+:.#/'; #change it to regexp matching your prompt
my $host = '192.168.1.20';

my $t=new Net::Telnet(Timeout=>5, Prompt=>$params{'default_prompt'}, Errmode=>sub{next;});
$t->open(Host=>$host, Timeout=>2);
my $res=$t->login($params{'login'}, $params{'password'});
return if $res!=1;
$t->cmd('disable clipaging');
my @lines=$t->cmd('show fdb'); #output here
$t->close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T10:49:32.293

在系统中安装`TCL`（ActiveTcl8.5.13.0.296436-win32-ix86-threaded.exe for windows）。`Expect`然后从命令安装包作为`teacup install Expect`

修改需求后在脚本下面运行

```
#!/usr/bin/expect -f
#!usr/bin/expect
package require Expect
# Test expect script to telnet.

spawn telnet localhost portnumber
expect "TradeAggregator>"
send "3\r"
expect "Client:"
send "1\r"
expect "1-Client>"
send "2\r"
expect "Client Pollers"
send "2\r"
expect "1-NYMEX UTBAPI"
send "1\r"
expect "2-NYMEX UTBAPI"
send "Test_123\r"
expect "Are"
send "n\r"
send "exit\r"
send "exit\r"
send "exit\r"
# end of expect script. 
```

# html - Apple Safari 按钮 onclick 需要很长时间

> ID：15832018
> 
> 赞同：0
> 
> 时间：2013-04-05T10:52:01.133
> 
> 标签：html, mobile, safari

我有一个简单的系统来注册参加聚会的人。我创建了一个带有按钮的简单数字小键盘，并且有效。但是当我在 Safari（或任何其他移动浏览器）中尝试它时，我需要大约一秒钟才能按下下一个按钮。它必须很快，所以这太长了。

有什么方法可以缩短按钮按下之间的“等待”时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:07:26.930

`click`由于浏览器必须确保用户没有双击或按住元素，因此移动浏览器中的事件会延迟。

我编写了一个 jQuery 插件，它可以方便地处理触摸和鼠标事件，并允许您绑定一个事件以无延迟地触发（`tap`）。你可以在这里查看：

[https://github.com/benmajor/jQuery-Mobile-Events](https://github.com/benmajor/jQuery-Mobile-Events)

# ruby-on-rails - 如何将 id 映射到活动管理索引中的名称？

> ID：15832022
> 
> 赞同：1
> 
> 时间：2013-04-05T10:52:15.483
> 
> 标签：ruby-on-rails, activeadmin

我正在使用活动管理员。我有项目和用户模型，它们之间存在多对多关系。在我的用户模型中，我有一个 project_leader 布尔列。在我的项目模型中，我将 project_leader 作为整数列。我可以为每个项目选择 1 名项目负责人。然后将作为项目负责人的用户的 id 存储在 Project project_leader 列中。如何从活动管理索引中将用户的 id 映射到其名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:51:54.883

解决了：

在我的项目模型中，我定义了一个方法如下。

```
def get_associated_user  
  p = self.project_leader  
  user = User.find(p).full_name  
end 
```

从 active_admin 索引中，我刚刚调用了 object.get_associated_user 方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T12:39:25.107

你也可以这样做

```
 column "Project Leader" do |p|
   user = User.find(p.project_leader).full_name
 end 
```

# c# - 使用身份验证窗口更改用户

> ID：15832024
> 
> 赞同：1
> 
> 时间：2013-04-05T10:52:25.807
> 
> 标签：c#, jquery, asp.net-mvc-3

在 web.config 中，我正在使用：

```
<authentication mode="Windows"/> 
```

连接我的用户。身份验证是自动的。但有时，我需要更改用户帐户。

如何通过单击按钮打开 Web 浏览器的身份验证窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:57:06.713

另一个 SO 主题表明您必须使用表单身份验证才能注销......

查看[主题](https://stackoverflow.com/questions/1067263/asp-net-windows-authentication-logout)

# mysql - 使用更大的数据库优化 MySQL 查询

> ID：15832034
> 
> 赞同：1
> 
> 时间：2013-04-05T10:52:48.070
> 
> 标签：mysql, select, optimization, bulkinsert

如何有效地编写以下查询

```
SELECT DISTINCT a.id 
FROM table1 a where a.id NOT IN (SELECT DISTINCT b.id 
                                 FROM table2 b) 
```

发布此查询，结果将通过插入查询插入到 table2 中。

问题是 table1 有大约 ~75300 条记录，而 table2 有 ~74000 条记录。

此查询每 10 分钟执行一次，执行时间约为 1.5 分钟。

这个查询有没有可能更快？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T10:57:21.863

尝试使用`Join`

```
SELECT DISTINCT a.id from table1 a
LEFT JOIN table2 b
on a.id = b.id
Where b.id is null 
```

该`Left Join`子句将从中选择所有行，`a`无论`b`. 然后，您可以`where`在末尾使用该子句来确保从返回的`a`行在`b`

# c - 函数原型过滤器

> ID：15832035
> 
> 赞同：2
> 
> 时间：2013-04-05T10:52:55.330
> 
> 标签：c, function

有没有一种工具只显示给定源文件的函数原型？我知道 Doxygen 正在做这样的事情，但我发现的是一个简单的 Linux 命令，例如

```
$ filter-function-prototypes main.c
1: print_hello()
2: main() 
```

其中 main.c 给出为

```
#include <stdio.h>
void print_hello() {
    printf("hello, world\n");
}

int main()
{
    print_hello();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T11:11:31.207

显然`ctags`可以做到这一点！

```
ctags -x --c-kinds=f main.c 
```

输出中有一些额外的东西，但可以用`sed`or处理`awk`。或者`cut`

```
ctags -x --c-kinds=f cards.c | cut -c 51- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:01:53.917

许多 C 文件的格式与您的一样，顶级定义从第 1 列开始，并且在函数声明行上至少有一个左括号。

所以你可以使用这个：

```
egrep -i '^[a-z].*\(' main.c 
```

作为您的过滤器。

# business-process-management - oramds unknown protocol error

> ID：15832038
> 
> 赞同：2
> 
> 时间：2013-04-05T10:53:15.633
> 
> 标签：business-process-management

i have below given code to get data from bpm engine but came across an error as mentioned below. Can someone tell me some working code or help me to resolve the issue

```
Exception in thread "main" java.lang.ExceptionInInitializerError
    at oracle.integration.platform.blocks.FabricConfigManager.getMetadataManager(FabricConfigManager.java:205)
    at oracle.integration.platform.blocks.FabricConfigManager.loadConfigObject(FabricConfigManager.java:620)
    at oracle.tip.pc.services.identity.config.ISConfiguration.init(ISConfiguration.java:170)
    at oracle.tip.pc.services.identity.config.ISConfiguration.<clinit>(ISConfiguration.java:130)
    at bpm.BpmTester.main(BpmTester.java:52)
Caused by: oracle.fabric.common.FabricException: oracle.fabric.common.FabricException: java.net.MalformedURLException: unknown protocol: oramds: unknown protocol: oramds: java.net.MalformedURLException: unknown protocol: oramds: unknown protocol: oramds
    at oracle.fabric.common.FabricMetadataManagerFactory.createMetadataManager(FabricMetadataManagerFactory.java:217)
    at oracle.integration.platform.blocks.FabricConfigManager$MDMHolder.<clinit>(FabricConfigManager.java:200)
    ... 5 more
Caused by: oracle.fabric.common.FabricException: java.net.MalformedURLException: unknown protocol: oramds: unknown protocol: oramds
    at oracle.integration.platform.common.MDSMetadataManagerImpl.<init>(MDSMetadataManagerImpl.java:171)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at java.lang.Class.newInstance0(Class.java:355)
    at java.lang.Class.newInstance(Class.java:308)
    at oracle.fabric.common.FabricMetadataManagerFactory.createMetadataManager(FabricMetadataManagerFactory.java:213)
    ... 6 more
Caused by: java.net.MalformedURLException: unknown protocol: oramds
    at java.net.URL.<init>(URL.java:574)
    at java.net.URL.<init>(URL.java:464)
    at java.net.URL.<init>(URL.java:413)
    at oracle.integration.platform.common.MDSMetadataManagerImpl.<init>(MDSMetadataManagerImpl.java:138)
    ... 13 more 
```

JavaCode::

```
IWorkflowServiceClient wfSvcClient;
            try{

             Map properties = new HashMap<IWorkflowServiceClientConstants.CONNECTION_PROPERTY, String>();
             properties.put(IWorkflowServiceClientConstants.CONNECTION_PROPERTY.SOAP_END_POINT_ROOT, "http://hostname:port");
             properties.put(IWorkflowServiceClientConstants.CONNECTION_PROPERTY.SECURITY_POLICY_URI, "oracle/wss10_saml_token_client_policy"); 
             properties.put(IWorkflowServiceClientConstants.CONNECTION_PROPERTY.MANAGEMENT_POLICY_URI, "oracle/log_policy");

        wfSvcClient=WorkflowServiceClientFactory.getWorkflowServiceClient(WorkflowServiceClientFactory.SOAP_CLIENT,properties,null);

        IWorkflowContext wfCtx=wfSvcClient.getTaskQueryService().authenticate(userId, password.toCharArray(),oracle.tip.pc.services.identity.config.ISConfiguration.getDefaultRealmName() 
            );
            IWorkflowContext adminCtx = wfSvcClient.getTaskQueryService().authenticate(adminUserId, pwd, 
                                            oracle.tip.pc.services.identity.config.ISConfiguration.getDefaultRealmName(),
                                             userId);
            ITaskQueryService querySvc=wfSvcClient.getTaskQueryService();
            Predicate.enableXMLSerialization(true);
            // Build the predicate
               Predicate statePredicate = new Predicate(TableConstants.WFTASK_STATE_COLUMN,
                                            Predicate.OP_NEQ,
                                            IWorkflowConstants.TASK_STATE_ASSIGNED);
                    statePredicate.addClause(Predicate.AND,
                                     TableConstants.WFTASK_NUMBERATTRIBUTE1_COLUMN,
                                     Predicate.OP_IS_NULL,
                                     nullParam);
               Predicate datePredicate = new Predicate(TableConstants.WFTASK_ENDDATE_COLUMN,
                                            Predicate.OP_ON,
                                            new Date());
               Predicate predicate = new Predicate(statePredicate, Predicate.AND, datePredicate);

               // Create the ordering
               Ordering ordering = new Ordering(TableConstants.WFTASK_TITLE_COLUMN, true, true);        
                 ordering.addClause(TableConstants.WFTASK_PRIORITY_COLUMN, true, true);

               // List of display columns
               // For those columns that are not specified here, the queried Task object will not hold any value.
               // For example: If TITLE is not specified, task.getTitle() will return null
               // For the list of most comonly used columns, check the table below
               // Note: TASKID is fetched by default. So there is no need to explicitly specity it.
               List queryColumns = new ArrayList();
                 queryColumns.add("TASKNUMBER");     
                 queryColumns.add("TITLE");
                 queryColumns.add("PRIORITY");
                 queryColumns.add("STATE");
                 queryColumns.add("ENDDATE");
                 queryColumns.add("NUMBERATTRIBUTE1");
                 queryColumns.add("TEXTATTRIBUTE1");

               // List of optional info
               // Any optionalInfo specified can be fetched from the Task object
               // For example: if you have specified "CustomActions", you can retrieve
               // it using task.getSystemAttributes().getCustomActions();
               // "Actions" (All Actions) - task.getSystemAttributes().getSystemActions()
               // "GroupActions" (Only group Actions: Actions that can be permoded by the user as a member of a group)
               //                - task.getSystemAttributes().getSystemActions()
               // "ShortHistory" - task`enter code here`.getSystemAttributes().getShortHistory()
               List optionalInfo = new ArrayList();
                 optionalInfo.add("Actions");
                 //optionalInfo.add("GroupActions");
                 //optionalInfo.add("CustomActions");
                 //optionalInfo.add("ShortHistory");
                 // The following is reserved for future use. 
                 // If you need them, please use getTaskDetailsById (or) getTaskDetailsByNumber,
                 // which will fetch all information related to a task, which includes these
                    //optionalInfo.add("Attachments");
                    //optionalInfo.add("Comments");
                    //optionalInfo.add("Payload");

               List tasksList = querySvc.queryTasks(wfCtx,
                                           queryColumns,
                                           optionalInfo,
                                           ITaskQueryService.ASSIGNMENT_FILTER_MY_AND_GROUP,
                                           keyword,
                                           predicate, 
                                           ordering, 
                                           0,0); // No Paging

               // How to use paging:
               // 1\. If you need to dynamically calculate paging size (or) to display/find 
               //    out the number of pages, the user has to scroll (Like page X of Y)
               //      Call queryTasks to find out the number of tasks it returns. Using this 
               //      calculate your paging size (The number of taks you want in a page)
               //      Call queryTasks successively varing the startRow and endRow params.  
               //      For example: If the total number of tasks is 30 and your want a paging size
               //      of 10, you can call with (startRow, endRow): (1, 10) (11, 20) (21, 30) 
               // 2\. If you have fixed paging size, just keep calling queryTasks successively with 
               //      the paging size (If your paging size is 10, you can call with (startRow, endRow): 
               //      (1, 10) (11, 20) (21, 30) (31, 40).....  until the number of tasks returned is 
               //      less than your paging size (or) there are no more tasks returned     

               if (tasksList != null) { // There are tasks 
                 System.out.println("Total number of tasks: " + tasksList.size()); 
                 System.out.println("Tasks List: ");
                 Task task = null; 
                 for (int i = 0; i < tasksList.size(); i++) { 
                   task = (Task) tasksList.get(i);          
                   System.out.println("Task Number: " + task.getSystemAttributes().getTaskNumber());
                   System.out.println("Task Id: " + task.getSystemAttributes().getTaskId());
                   System.out.println("Title: " + task.getTitle());
                   System.out.println("Priority: " + task.getPriority());
                   System.out.println("State: " + task.getSystemAttributes().getState());
                   System.out.println();
                   // Retrive any Optional Info specified
                   // Use task service, to perform operations on the task
                 }
               }
        }
        catch(WorkflowException e){
            e.printStackTrace();
        }

        catch(BPMConfigException e){
            System.out.print("hello");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T15:46:36.067

oramds 是特定于 oracle soa 的东西，您是否正在开发在 soa 套件之外运行的客户端？然后你必须获取引用的 wsdl/xsd 并确保它们在 eclipse 或 soapui 等其他工具中看起来不错

# android - Jobb crash FAT Full

> ID：15832039
> 
> 赞同：5
> 
> 时间：2013-04-05T10:53:17.220
> 
> 标签：android, crash

I tried to compile videos with jobb library the problem is jobb crash with videos larger in size than 500 MB, below is some information about this issue:

```
java.io.IOException: FAT Full (459872, 459873)
    at de.waldheinz.fs.fat.Fat.allocNew(Fat.java:298)
    at de.waldheinz.fs.fat.Fat.allocAppend(Fat.java:376)
    at de.waldheinz.fs.fat.ClusterChain.setChainLength(ClusterChain.java:175)
    at de.waldheinz.fs.fat.ClusterChain.setSize(ClusterChain.java:132)
    at de.waldheinz.fs.fat.FatFile.setLength(FatFile.java:91)
    at de.waldheinz.fs.fat.FatFile.write(FatFile.java:154)
    at com.android.jobb.Main$1.processFile(Main.java:495)
    at com.android.jobb.Main.processAllFiles(Main.java:604)
    at com.android.jobb.Main.processAllFiles(Main.java:600)
    at com.android.jobb.Main.main(Main.java:417)
Exception in thread "main" java.lang.RuntimeException: Error getting/writing file with name: videos.zip
    at com.android.jobb.Main$1.processFile(Main.java:501)
    at com.android.jobb.Main.processAllFiles(Main.java:604)
    at com.android.jobb.Main.processAllFiles(Main.java:600)
    at com.android.jobb.Main.main(Main.java:417) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:18:17.853

`file with name: videos.zip`- 首先，您不必使用 zip。您可以使用 zip 存档作为扩展文件本身，而无需将其打包在 .obb 文件中。但是使用 zip 文件可能会降低您的应用程序的速度。

或者你可以把你的文件放在某个目录中（例如，“tmp”），然后调用类似的东西：`jobb -d D:\tmp -o D:\main.com.example.1.obb -pn com.example -pv 1`. 如果您的每个文件都小于 500 MB，那么一切都应该没问题。但如果不是 - 我想，您将不得不考虑另一种解决方案：也许，压缩大视频文件以使其大小小于 500 MB。

PS 为了处理 .obb 文件，我创建了[这个](https://github.com/uncleLem/AndroidUtils/blob/master/src/ua/a5/androidutils/utils/ObbExpansionsManager.java)帮助程序，您可能会发现它很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-21T08:06:17.263

由于 OBB 文件是在 FAT16 文件系统上构建的，因此最大总大小为 2 GB。这可以由单个文件使用，也可以由数百个文件组成。请注意，FAT16 仅允许在根目录中最多包含 512 个文件，因此如果您的文件多于该文件，则需要将它们放在 OBB 文件内的单独文件夹中。

Lem 叔叔是对的，使用 ZIP 存档实际上可能会使您访问文件的速度变慢。除非您绝对需要压缩（ZIP 压缩是否非常好？），否则我建议不要将文件放入 ZIP 存档中。jobb 工具旨在从目录的内容（包括子目录，保留目录结构）中创建有效的 OBB 文件。

您的错误的原因是 jobb 工具源和它使用的 FAT 库中的问题。[我在这里](https://stackoverflow.com/a/18930268/1136311)写了更详细的细节，但基本上是该工具认为 FAT16 最多只允许 512 MB，而实际上它最多允许 2 GB。修复该工具后，您将能够使用它来创建更大的 OBB 文件。同时，可以创建一个自定义构建来修复它。我稍后打算发布我个人构建的工具。

[SuperFloppyFormatter 为超过 512 MB 的任何内容返回 FAT32？](https://stackoverflow.com/questions/18924872/superfloppyformatter-returning-fat32-for-anything-over-512-mb)

[https://code.google.com/p/android/issues/detail?id=60294](https://code.google.com/p/android/issues/detail?id=60294)

# android - How to capture a video in android?

> ID：15832042
> 
> 赞同：0
> 
> 时间：2013-04-05T10:53:34.747
> 
> 标签：android, android-mediaplayer, video-capture

I am trying to capture a video in android, but I am unable to capture it. Though my code is creating the 3gp file but I am not able to play it back. Do I have some issues with the encoding?

```
MediaRecorder videoRecorder;
sFilePath = sSDPath + "/" + System.currentTimeMillis() + ".3gp";
String sSDPath = Environment.getExternalStorageDirectory().getPath();
String sFilePath="";

if (videoRecorder == null) {
   videoRecorder = new MediaRecorder();
}

videoRecorder.setVideoSource(
MediaRecorder.VideoSource.CAMERA);
videoRecorder.setOutputFormat(
MediaRecorder.OutputFormat.THREE_GPP);
videoRecorder.setVideoSize(640, 480);
videoRecorder.setVideoFrameRate(30);
videoRecorder.setVideoEncoder(
MediaRecorder.VideoEncoder.H264);
videoRecorder.setOutputFile(sFilePath);
try {
 videoRecorder.prepare();
} catch (IllegalStateException e) {
  e.printStackTrace();
} catch (IOException e) {
   e.printStackTrace();
}
videoRecorder.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:01:32.553

您可以找到名为 SpyDroid 的开源项目，或查看[sipdroid](https://code.google.com/p/sipdroid/source/browse/trunk/src/org/sipdroid/sipua/ui/VideoCamera.java)。它的好例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:02:34.647

你使用自定义录音机..？如果没有，那么写在下面两行以捕获视频..

```
Intent record_videoIntent=new Intent(android.provider.MediaStore.ACTION_VIDEO_CAPTURE);
    startActivityForResult(record_videoIntent, 1); 
```

然后在您的活动中覆盖 onActivityResult 并获得类似...的结果

Uri videoUri=data.getData();

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-05T11:05:58.540

创建**RecorderPreview**类，它扩展了*SurfaceView*并**实现**了*SurfaceHolder.Callback*接口。

```
class RecorderPreview extends SurfaceView implements SurfaceHolder.Callback
{
  //Create objects for MediaRecorder and SurfaceHolder.
  MediaRecorder recorder;
  SurfaceHolder holder;

  //Create constructor of Preview Class. In this, get an object of
  //surfaceHolder class by calling getHolder() method. After that add
  //callback to the surfaceHolder. The callback will inform when surface is
  //created/changed/destroyed. Also set surface not to have its own buffers.

  public Preview(Contect context,MediaRecorder temprecorder) {
 super(context);
      recorder=temprecorder;
 holder=getHolder();
 holder.addCallback(this);
 holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
   }

  // Implement the methods of SurfaceHolder.Callback interface

  // SurfaceCreated : This method gets called when surface is created.
  // In this, initialize all parameters of MediaRecorder object as explained
  // above.

  public void surfaceCreated(SurfaceHolder holder){
  try{
        recorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);
    recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
    recorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
        recorder.setOutputFile("/sdcard/recordvideooutput.3gpp");
        recorder.setPreviewDisplay(mHolder.getSurface());
    recorder.prepare();
    } catch (Exception e) {
        String message = e.getMessage()
  }
  } 
```

要允许录制视频，请在应用程序的清单文件中添加权限。

```
 <uses-permission android:name="android.permission.RECORD_VIDEO"/>

public void surfaceDestroyed(SurfaceHolder holder)
{
if(recorder!=null)
{
recorder.release();
recorder = null;
}
}

//surfaceChanged : This method is called after the surface is created.
    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h)
    {
}
} 
```

实现视频录制应用的onCreate方法。

```
//Create objects of MediaRecorder and Preview class
private MediaRecorder recorder;
private Preview preview;
    // In this method, create an object of MediaRecorder class. Create an object of
    // RecorderPreview class(Customized View). Add RecorderPreview class object
    // as content of UI.

public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    recorder = new MediaRecorder();
    preview = new RecorderPreview(this,recorder);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    setContentView(preview);
}

//Create option menu which can be used for starting and stopping video recording.
// Also implement the onOptionsItemSelected to handle the events for option menu.

public boolean onCreateOptionsMenu(Menu menu)
{
    menu.add(0, 0, 0, "StartRecording");
    menu.add(0, 1, 0, "StopRecording");
    return super.onCreateOptionsMenu(menu);
}

public boolean onOptionsItemSelected(MenuItem item)
{
    switch (item.getItemId())
    {
        case 0:
            recorder.start();
            break;
        case 1:
       recorder.stop();
       break;
    }
    return super.onOptionsItemSelected(item);
} 
```

你可以在这里找到原始代码：

[http://www.codeproject.com/Articles/107270/Recording-and-Playing-Video-on-Android](http://www.codeproject.com/Articles/107270/Recording-and-Playing-Video-on-Android)

# java - jdbc中的未知数据库

> ID：15832044
> 
> 赞同：14
> 
> 时间：2013-04-05T10:53:38.300
> 
> 标签：java, mysql, sql, eclipse, jdbc

我正在使用 JDBC 并且是新手。但我不断收到此运行时异常：

```
 connecting to psysical database...
   com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown database 'kholofelodb'
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.Util.getInstance(Util.java:386)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1052)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3609)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3541)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:943)
at com.mysql.jdbc.MysqlIO.secureAuth411(MysqlIO.java:4113)
at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1308)
at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2336)
at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2369)
at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2153)
at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:792)
at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:381)
at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:305)
at java.sql.DriverManager.getConnection(DriverManager.java:579)
at java.sql.DriverManager.getConnection(DriverManager.java:221)
at com.psybergate.database.SimbleCode.main(SimbleCode.java:22) 
```

***这是给定的代码***

```
try {
            String connectionURL =      "jdbc:mysql://localhost:3306/kholofelodb";
            Class.forName("com.mysql.jdbc.Driver");

            System.out.println("connecting to psysical database...");
            Connection conn = DriverManager.getConnection(connectionURL, USER,
                    PASS);

            Statement statement = conn.createStatement();
            System.out.println("Connection has been made");

            Scanner keyBoardScanner = new Scanner(System.in);
            System.out.println("Enter table name:");
            String tableName = keyBoardScanner.nextLine();

            System.out.println("Creating table...");
            statement.executeQuery("create table " + tableName
                    + " (name , age ,salary)");
            System.out.println("Table successfully created");
            System.out.println("Inserting data into the table ...");
            statement.executeUpdate("insert into " + tableName
                    + "values (kholofelo , 21 , 9969696)");
        } 
```

我如何让这段代码工作？我只是 JDBC 的初学者....

对于上述代码；PASS = "密码", USER = "root"

我的端口有问题，已通过此站点修复

多谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-06-10T06:25:41.443

登录mysql服务器，

```
$ mysql -u <username> -p<password> 
```

列出所有数据库，

```
mysql> show databases; 
```

检查您的数据库名称是否存在，

```
+--------------------+
| Database           |
+--------------------+
| information_schema |
| kholofelodb        |
| mysql              |
| phpmyadmin         |
+--------------------+ 
```

**请注意：数据库名称区分大小写。**

希望这可以帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-05T10:57:59.363

请在 mysql 数据库中检查数据库名称“ **kholofedb** ”是否存在

我想你还没有创造

如果没有创建它及其相关表，请检查一次

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-21T13:08:42.790

我有同样的问题，发现它的原因是： **这里的数据库名称是区分大小写的！** 所以，我试图使用像“test2”这样的数据库名称进行连接，但数据库名称实际上是“Test2”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-26T17:34:22.303

当服务器无法找到数据库时会发生此错误。这可能是由于数据库 URL 中给出的端口错误，例如

```
String DB_URL = "jdbc:mysql://localhost:3307/database_name" 
```

所以检查这个端口号（在上面的例子中是 3307）和 Xampp 控制器中提到的端口（去 Xampp 控制器然后配置 MySql）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T10:57:41.450

似乎问题在于您的数据库名称。MySQL 是数据库引擎，但在 MySQL 中，您可以拥有许多具有自己表的数据库。一旦您获得正确的数据库名称，您可能会发现问题将得到解决。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-05T01:50:37.510

问题仅在于您的数据库名称。首先在 mysql* 中创建数据库创建数据库连接。集中在以下方面：数据库名称：URL：正确提及数据库名称，数据库名称应反映 mysql* 中的数据库

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-14T11:02:10.597

是的，这个案例也到了我这里，实际上我的数据库名称是正确的，但问题出在我的端口号上应用程序那么首先建议检查它的端口值............

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-07T21:47:44.257

我遇到了同样的问题，实际上是因为他们告诉你使用 SQLWorkbench ....这是一个很好的设置，但是当你做这样的开发时，有时你在那个 GUI 上的工作实际上不会保存到 mySQL，我不不知道为什么会这样。工作台是一个很好的东西。我正在通过这个网站一步一步地做这件事： [https](https://dev.mysql.com/doc/mysql-getting-started/en/) ://dev.mysql.com/doc/mysql-getting-started/en/ ...它的老派...但是它的工作原理，我只是扔掉了我的工作台 LOL-

也许我设置工作台的方式有误？我不知道，但我想我会坚持旧学校的设置-

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-20T18:33:44.857

您可能尚未创建数据库，或者它的名称不是“kholofelodb”。如果你还没有创建一个，那就去做吧。如果你有但你不确定它的名字，在命令提示符下输入 C:\ *MariaDB location* > cd bin，然后*mysql -u root -p*并输入你的密码。然后输入*显示数据库；*. 您的数据库将显示它的名称。例如，我的称为“sys” [![在此处输入图像描述](https://i.stack.imgur.com/XHwu7.png)](https://i.stack.imgur.com/XHwu7.png)

# asp.net - ASP.net 日期格式

> ID：15832046
> 
> 赞同：2
> 
> 时间：2013-04-05T10:53:46.300
> 
> 标签：asp.net, date, formatting

我已将日期字段（日期时间类型列值）绑定到我的网格。在网格中，列定义是这样的 我的代码是：

```
<asp:Label id="lblFromTimeForTeacher" runat="server" Text='<%# Eval("FromTime", "{0:hh/mm}")%>' Visible="false" Width="99%" /> 
```

现在，标签文本是 **08-45**。有人可以告诉我如何将标签文本设为**08:45**吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:01:04.007

自定义日期时间格式[在这里](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)。在您的情况下，只需更改为`Convert.ToDateTime(Eval("FromTime")).ToString("hh:mm")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:57:30.337

尝试以下

```
<asp:Label ID="lblFromTimeForTeacher" runat="server" Text='<%# Eval("FromTime", "{0:hh:mm}")%>' Visible="false" Width="99%" /> 
```

如果您想要“4:05 PM”格式，请尝试以下操作

```
<asp:Label ID="lblFromTimeForTeacher" runat="server" Text='<%# Eval("FromTime", "{0:t}")%>' Visible="false" Width="99%" /> 
```

有关更多信息，您可以查看[此链接](http://www.csharp-examples.net/string-format-datetime/)希望这对您有所帮助。

# c# - 尝试使用 WCF 服务使用 LINQ to SQL 更新 SQL 数据库中的单行

> ID：15832049
> 
> 赞同：0
> 
> 时间：2013-04-05T10:53:47.130
> 
> 标签：c#, linq-to-sql, wcf-data-services

我想要做的是创建一个使用 WCF 服务的方法来通过一个数据库（事务）从具有今天日期的表中获取所有内容，然后将它们添加到我的每日销售表中，每个日期将有一行显示利润、日常收入、费用等。

我试过这样做

```
 public void CalculateProfit(string Date)
        {

            decimal takings = 0;// not needed
            decimal Expenses = 0;// not needed
            using (transactionClassDataContext cont = new transactionClassDataContext())
            { 
                int counter = 0;
                DailySale d = new DailySale();
                var query = (from q in cont.DailySales where q.Date.Equals(Date) select q);
                var query2 = (from r in cont.Transactions where r.Date.Equals(Date) select r);
                foreach (var z in query)
                {
                    counter++;

                }
                if (counter>0)
                {

                        foreach (var y in query2)
                        {

                            takings = takings + y.Price;
                            Expenses = Expenses + 0;

                            d.Expenses += 0;
                            d.Takings += y.Price;
                            d.Profit = d.Takings - d.Expenses;
                            d.Date = Date;

                            cont.DailySales.InsertOnSubmit(d);// update the value
                            cont.SubmitChanges();

                        }              
                }
                else
                {

                    d.Date = Date;
                    cont.DailySales.InsertOnSubmit(d);// if there isnt an entry for todays date, add one
                    cont.SubmitChanges();
                }

            }

        }

    }
} 
```

但它所做的只是抛出这个错误“无法添加已经存在的实体”。

大多数类似的问题都说我需要在 foreach 中创建一个新的 d 实例，但似乎所做的只是将大量记录添加到 m 每日销售额中，而我想要的只是一行更新总数。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:08:20.503

您应该将其移动`DailySale d = new DailySale();`到使用它的范围内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:53:00.320

您正在为 foreach 语句中的每个回合添加相同的对象。

1）您可以将此行移到 foreach 之外：

```
 cont.DailySales.InsertOnSubmit(d);// update the value
                    cont.SubmitChanges(); 
```

2) 在第一圈插入物体。在接下来的轮次中更新相同的对象。

```
 cont.UpdateObject(d);
                    cont.SaveChanges(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T08:19:45.893

你应该只插入一次

```
 using (transactionClassDataContext cont = new transactionClassDataContext())
            { 
                int counter = 0;
                DailySale d = new DailySale();
                cont.DailySales.InsertOnSubmit(d);// **INSERT** the value 
```

并更新其余时间

```
 var query = (from q in cont.DailySales where q.Date.Equals(Date) select q);
            var query2 = (from r in cont.Transactions where r.Date.Equals(Date) select r);
            foreach (var z in query)
            {
                counter++;

            }
            if (counter>0)
            {

                    foreach (var y in query2)
                    {

                        takings = takings + y.Price;
                        Expenses = Expenses + 0;

                        d.Expenses += 0;
                        d.Takings += y.Price;
                        d.Profit = d.Takings - d.Expenses;
                        d.Date = Date;

                        cont.SubmitChanges(); // ***  left it here but better move it outside the foreach, 

                    } 
```

`cont.SubmitChanges(); 甚至可以完全移动到最后，因此您只有一笔交易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T13:00:48.763

事实证明我正在更改 d （每日销售表）而不是更改“ var r”

```
 DailySale d = new DailySale();
            var query = (from q in cont.DailySales where q.Date.Equals(Date) select q);

            foreach (var z in query)
            {
                counter++;
            }

            if (counter>0)
            {
                foreach (var r in query)
                {

                    r.Takings = r.Takings + (decimal)price; //  here i was using d instead of r
                    r.Profit = r.Takings - r.Expenses;
                }
                cont.SubmitChanges(); 
```

谢谢您的帮助 。

# dynamic - Facebook Opengraph og的动态图像：图像元标记

> ID：15832055
> 
> 赞同：5
> 
> 时间：2013-04-05T10:54:04.997
> 
> 标签：dynamic, facebook-opengraph

我正在尝试在 facebook 上分享我网站上的图像。图像可以是动态的，但其他元数据将保持不变。

有没有办法可以在 OG:IMAGE 标签中获取动态数据，或者我必须使用 FB Post API 的其他选项。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T13:15:24.977

是和不是。Facebook 会抓取您的网站一次，并缓存它找到的元数据，除非您专门去[这里](https://developers.facebook.com/tools/debug)并强制抓取工具再次抓取您的网站。缓存通常会过期（可能在 1-2 天后？），因此当在此缓存期之外再次请求时，Facebook 将再次抓取该网站。

您可以拥有一个动态生成的`og:image`元标记，但它只会被读取**一次**（每个缓存周期），并且只会保存该图像实例。

例如，如果用户 A 共享您的页面，并且您的页面`imageA.png`在`og:image`标签中返回，那么这就是将与您的页面元数据相关联的图像。

如果用户 B在*相同的缓存期内共享**相同的页面*，Facebook 将放弃元数据抓取并假设这仍然是有效的。*`imageA.png``og:image`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-03T15:28:30.283

看看[这个要点](https://gist.github.com/sonpython/7327decca53f2b94d5bda14a31bb3492)。

每次更新 og:image 标签时，您都应该 ping facebook 以重新抓取您的页面。

```
def share_facebook_fanpage(link,msg,PAGE_ID,OAUTH_ACCESS_TOKEN,apiversion='v2.8'):
    BASE_URL = "https://graph.facebook.com/%s" % apiversion
    POST_URL = "%s/%s/feed" % (BASE_URL, PAGE_ID)

    # force facebook scape the link first to avoid not showing thumb
    f = requests.post(BASE_URL, data={
        'id': link,
        'scrape': True,
        'access_token': OAUTH_ACCESS_TOKEN
    })

    # share the link
    r = requests.post(POST_URL, data={'access_token': OAUTH_ACCESS_TOKEN, 'link': link, 'message':msg}) 
```*

# javascript - 需要解析复杂的 JSON

> ID：15832059
> 
> 赞同：1
> 
> 时间：2013-04-05T10:54:16.293
> 
> 标签：javascript, json

我想解析一个复杂的 JSON 结构，但因为它不是一个直接的 JSON 结构而苦苦挣扎。这是示例：

```
[
   {
      "target":"collectd.matrix.oracle.avg_resp_time",
      "datapoints":[
         [8.0, 1365158480],
         [null, 1365158490],
         [null, 1365158500],
         [null, 1365158510],
         [null, 1365158520],
         [null, 1365158530],
         [8.0, 1365158540],
         [null, 1365158550],
         [null, 1365158560],
         [null, 1365158570],
         [null, 1365158580],
         [null, 1365158590],
         [8.0, 1365158600],
         [null, 1365158610],
         [null, 1365158620],
         [null, 1365158630],
         [null, 1365158640],
         [null, 1365158650],
         [8.0, 1365158660],
         [null, 1365158670],
         [null, 1365158680],
         [null, 1365158690],
         [null, 1365158700],
         [null, 1365158710],
         [null, 1365158720],
         [null, 1365158730],
         [null, 1365158740],
         [null, 1365158750],
         [null, 1365158760],
         [null, 1365158770]
      ]
   }
] 
```

我想捕获每个字段的值，`eg:X=8.0,Y=1365158540`并且需要一些帮助或逻辑来解析它。

谢谢，索汉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:01:26.193

本机`JSON.parse()`应该工作得很好。使用[json2.js](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)在旧浏览器中向后兼容。这是一个例子：

```
var data = JSON.parse(yourJsonGoesHere),
    datapoints = data[0].datapoints,
    i;

for (i = 0; i < datapoints.length; ++i) {
    console.log('x:' + datapoints[i][0] + ', y:' + datapoints[i][1]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T11:04:06.137

```
var jsonData = JSON.parse(data) 
```

在哪里

```
data = '[{"target": "collectd.matrix.oracle.avg_resp_time", "datapoints": [[8.0, 1365158480], [null, 1365158490], [null, 1365158500], [null, 1365158510], [null, 1365158520], [null, 1365158530], [8.0, 1365158540], [null, 1365158550], [null, 1365158560], [null, 1365158570], [null, 1365158580], [null, 1365158590], [8.0, 1365158600], [null, 1365158610], [null, 1365158620], [null, 1365158630], [null, 1365158640], [null, 1365158650], [8.0, 1365158660], [null, 1365158670], [null, 1365158680], [null, 1365158690], [null, 1365158700], [null, 1365158710], [null, 1365158720], [null, 1365158730], [null, 1365158740], [null, 1365158750], [null, 1365158760], [null, 1365158770]]}]'; 
```

`jsonData[0]['datapoints']`是所有数据点的数组

[JSON.parse 的参考](http://msdn.microsoft.com/en-us/library/ie/cc836466%28v=vs.94%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T11:02:05.713

`datatype:json`如果您通过 ajax 获得响应，您可以添加您的 ajax 调用

或者

你可以使用[http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

```
var obj = jQuery.parseJSON(jsonString) 
```

# asp.net-mvc-3 - How to create default custom value of dropdownlist

> ID：15832066
> 
> 赞同：0
> 
> 时间：2013-04-05T10:55:03.643
> 
> 标签：asp.net-mvc-3, razor, html-helper

I want to customize the default value of my dropdownlist, Like having a value of **"Select an item"** instead of the value exist from the Database.

**View**

```
 @Html.EditorFor(m => m.Vendor) 
```

**Model**

```
 [UIHint("SellerDropDown")]
    public MDL.Vendor Vendor{ get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:58:53.390

尝试这样的事情：

```
@Html.DropDownListFor(m => m.Vendor, mySelectList, "Select an item"); 
```

# eclipse - 为什么我的 Derby 数据库 ping 失败并出现 ClassNotFoundException？

> ID：15832073
> 
> 赞同：1
> 
> 时间：2013-04-05T10:55:12.640
> 
> 标签：eclipse, glassfish-3, classnotfoundexception

我已经使用 成功启动了我的 Derby 数据库服务器`./asadmin start-database`，但是当我单击要连接的数据库时，它无法连接。当我ping它时，它失败了。

以前有没有人遇到过这个错误，他们是如何解决的？

异常日志：

```
java.lang.ClassNotFoundException: org.apache.derby.jdbc.ClientDriver
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at java.net.FactoryURLClassLoader.loadClass(URLClassLoader.java:627)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at org.eclipse.datatools.connectivity.drivers.jdbc.JDBCConnection.createConnection(JDBCConnection.java:213)
    at org.eclipse.datatools.connectivity.apache.internal.derby.connection.DerbyEmbeddedJDBCConnection.createConnection(DerbyEmbeddedJDBCConnection.java:137)
    at org.eclipse.datatools.connectivity.DriverConnectionBase.internalCreateConnection(DriverConnectionBase.java:105)
    at org.eclipse.datatools.connectivity.DriverConnectionBase.open(DriverConnectionBase.java:54)
    at org.eclipse.datatools.connectivity.drivers.jdbc.JDBCConnection.open(JDBCConnection.java:73)
    at org.eclipse.datatools.connectivity.apache.internal.derby.connection.DerbyJDBCConnectionFactory.createConnection(DerbyJDBCConnectionFactory.java:32)
    at org.eclipse.datatools.connectivity.internal.ConnectionFactoryProvider.createConnection(ConnectionFactoryProvider.java:83)
    at org.eclipse.datatools.connectivity.internal.ConnectionProfile.createConnection(ConnectionProfile.java:359)
    at org.eclipse.datatools.connectivity.ui.PingJob.createTestConnection(PingJob.java:76)
    at org.eclipse.datatools.connectivity.ui.PingJob.run(PingJob.java:59)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T15:01:08.583

我在连接到 MS SQL 服务器时遇到了同样的问题。我在另一个网站上发现了一些东西，它为我指明了正确的方向。转到数据库连接，然后编辑驱动程序详细信息。然后转到“属性”选项卡。在这里确保它具有正确的服务器名称、数据库名称以及用户登录名和密码。这是我找到这个的网站-> [http://www.eclipse.org/forums/index.php/m/39959/](http://www.eclipse.org/forums/index.php/m/39959/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-28T23:58:25.710

我有同样的问题......我通过接下来的步骤让它工作......它可能会有所帮助......

1.  从连接配置文件“GlassFishSampleDB”中选择
2.  我点击了“编辑驱动器定义”（图标看起来像三角形）
3.  在此页面上，我在“提供驱动器详细信息”下看到一条消息，显示文件的路径并说找不到。
4.  从选项卡中，我选择了 JAR 列表并点击“编辑 JAR/ZIP”按钮
5.  然后我转到路径位置并选择“.....\..\glassfish4\javadb\lib\derbyclient.jar”

# asp.net - asp.net send auto mails not workign on shared hosting server

> ID：15832077
> 
> 赞同：0
> 
> 时间：2013-04-05T10:55:23.197
> 
> 标签：asp.net

I want to send automatic email on certain condition from my application.And my application hosting account type is shared hosting.

I am using ASP.NET MVC2.0.

I have worked according to below article to send auto mails :

[http://www.codeproject.com/Articles/12117/Simulate-a-Windows-Service-using-ASP-NET-to-run-sc](http://www.codeproject.com/Articles/12117/Simulate-a-Windows-Service-using-ASP-NET-to-run-sc)

its working on my local system but not my production server(shared hosted account).

Can any one suggest me the way to do it?

# c# - 计算对象的变更集

> ID：15832079
> 
> 赞同：2
> 
> 时间：2013-04-05T10:55:27.490
> 
> 标签：c#, generics, windows-store-apps, generic-list, generic-programming

我正在编写一个 Windows 商店应用程序，它从服务器接收对象（我创建的自定义类型），让用户编辑对象，然后将“变更集”提交回服务器。这个变更集只是一个与接收到的对象类型相同的对象，除了用户编辑的字段之外，每个字段都设置为 null。然后这些字段包含用户的编辑，如下所示：

```
原案：
    描述：“排气管破裂”
    状态：“开放”
    顾客： ””
    里程：10000

编辑案例：
    描述： ””
    状态“开放”
    客户：“示例公司”
    里程：10000

案例变更集：
    描述： ””
    状态：空
    客户：“示例公司”
    里程：无

```

当应用程序第一次从服务器下载对象时，我会复制它以供以后比较。然后用户对其中一个对象进行更改，当用户提交他的更改时，使用通用方法计算这两个对象的变更集`CalculateChangeSet`。它遍历两个对象的每个属性并比较它们是否相等：

```
public static T CalculateChangeSet<T>(T oldObject, T newObject) where T : new()
{
    T changeSet = (T)Activator.CreateInstance(oldObject.GetType());

    foreach (PropertyInfo property in oldObject.GetType().GetRuntimeProperties())
    {
        var oldValue = property.GetValue(oldObject);
        var newValue = newObject.GetType().GetRuntimeProperty(property.Name).GetValue(newObject);
        if (oldValue != null && newValue != null)
        {
            if (oldValue is IList)
            {
                Type listType = oldValue.GetType().GetRuntimeProperty("Item").PropertyType;

                IList<listType> oldList = (IList<listType>)oldValue; //Visual studio complains about
                IList<listType> newList = (IList<listType>)newValue; //listType not being found

                if (!oldList.SequenceEqual(newList))
                {
                    changeSet.GetType().GetRuntimeProperty(property.Name).SetValue(changeSet, newValue, null);
                }
            }
            else
            {
                if (!oldValue.Equals(newValue))
                {
                    changeSet.GetType().GetRuntimeProperty(property.Name).SetValue(changeSet, CalculateChangeSet(oldValue, newValue));
                }
            }
        }
        else
        {
            changeSet.GetType().GetRuntimeProperty(property.Name).SetValue(changeSet, newValue);
        }
    }

    return changeSet;
} 
```

该方法适用于我遇到的每个属性，除了 Lists，所以我创建了 if 子句来处理列表。由于`list1.Equals(list2)`不比较列表中的项目，我们需要强制转换`oldValue`和`newValue`to`List<T>`才能使用`list.SequenceEqual()`.

为什么我`The type or namespace name 'listType' could not be found (are you missing a using directive or an assembly reference?)`在尝试使用它来创建新列表时收到错误消息？如果有更好的方法来解决这个问题，我愿意接受建议..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:16:01.170

试试这个：

```
IList oldList = (IList)oldValue; //Visual studio complains about
IList newList = (IList)newValue; //listType not being found

if (!NonGenericSequenceEqual(oldList, newList))
{
    changeSet.GetType().GetRuntimeProperty(property.Name).SetValue(changeSet, newValue, null);
}

public static bool NonGenericSequenceEqual(IList a, IList b)
{
    if (ReferenceEquals(a, b))
    {
        return true;
    }
    else if (a == null || b == null)
    {
        return false;
    }
    else
    {
        int count = a.Count;

        if (count != b.Count)
        {
            return false;
        }
        else
        {
            for (int i = 0; i < count; i++)
            {
                if (!Object.Equals(a[i], b[i]))
                {
                    return false;
                }
            }

            return true;
        }
    }
} 
```

弱代码是 'Object.Equals(a[i], b[i])'

通过反射的另一种变体：

```
if (!(bool)typeof(System.Linq.Enumerable).GetMethod("SequenceEqual").MakeGenericMethod(oldValue.GetType().GetRuntimeProperty("Item").PropertyType).Invoke(null, new object[] { oldObject, newObject }))
{
    changeSet.GetType().GetRuntimeProperty(property.Name).SetValue(changeSet, newValue, null);
} 
```

# c# - C#比较两个列表并更新它的列值

> ID：15832090
> 
> 赞同：0
> 
> 时间：2013-04-05T10:55:56.313
> 
> 标签：c#, list, compare

我有两个 C# 列表（List listA 和 List listB）我如何比较这两个，如果发现重复（特定列，例如 ID_num 和 ID_cust），则更新列“ID_duplicate”，这是 listB 的列 ID 的值。

```
DataSet ds =  subMain;

List<string> listA = (from r in ds.Tables[0].AsEnumerable()
                      Select r.Field<string>("ID_num") + 
                       r.Field<string>("ID_cust")).ToList();

DataSet dsMain = Mains;

List<string> listB = (from r in dsMain.Tables[0].AsEnumerable()
                      select r.Field<string>("ID_num") + 
                      r.Field<string>("ID_cust")).ToList(); 
```

我希望`listA`它将包含新列`ID_duplicate`，其值`ID_num`来自`listB`.

这样重复项将以某种方式与 this 联系起来`ID_num`。

然后我会将其更新`ID_duplicate`到数据库。

编辑：在下面的评论中添加了更多解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:50:40.750

如果我理解是加入：

```
var listA = new List<Row> { 
    new Row { ID= 1, IdNum = 1, IdCust = 1 }, 
    new Row { ID= 2, IdNum = 1, IdCust = 2 }, 
    new Row { ID= 3, IdNum = 2, IdCust = 1 }, 
    new Row { ID= 4, IdNum = 1, IdCust = 3 }, 
    new Row { ID= 5, IdNum = 3, IdCust = 1 }, 
    new Row { ID= 6, IdNum = 4, IdCust = 1 } 
};

var listB = new List<Row> { 
    new Row { ID= 1, IdNum = 5, IdCust = 1 }, 
    new Row { ID= 5, IdNum = 6, IdCust = 2 }, 
    new Row { ID= 7, IdNum = 2, IdCust = 1 }, 
    new Row { ID= 9, IdNum = 1, IdCust = 3 }, 
    new Row { ID= 11, IdNum = 7, IdCust = 2 }
};

    var t = (from a in listA
             join b in listB on a.IdCust.ToString() + a.IdNum.ToString() 
             equals 
             b.IdCust.ToString() + b.IdNum.ToString()
             select new
             {
                ID = a.ID,
                IdUpdate = b.ID
             }).ToArray();

foreach (var item in t)
{
    Console.WriteLine("ID {0} IdUpdate {1}", item.ID, item.IdUpdate);
} 
```

这里是 Row 类

```
class Row
{
    public int ID { get; set; }

    public int IdNum { get; set; }

    public int IdCust { get; set; }
} 
```

显然，您可以像这样在 Row 类上创建一个计算列

```
public string ValueToCompare
{
   get
   {
      return this.IdNum.ToString() + this.IdCust.ToString();
   }
} 
```

并在加入时使用它进行比较

最大限度

# c# - c# wpf caliburn.micro如何更新datagrid列表

> ID：15832091
> 
> 赞同：0
> 
> 时间：2013-04-05T10:55:57.380
> 
> 标签：c#, wpf, list, datagrid, caliburn.micro

在这堂课中：

```
 [Export(typeof(IScreen))]
    public class BolleViewModel : Screen
    {
              ....
    } 
```

我有这个清单：

```
public List<Article> List { get; private set; } 
```

此列表是 Datagrid 到 List 的绑定：

```
<DataGrid HorizontalAlignment="Stretch" SelectedItem="{Binding SelectedArticle}"
            Margin="14,41,12,61" VerticalAlignment="Stretch" AutoGenerateColumns="False" x:Name="List"> 
```

我希望当我调用 UPDATE 方法时，更新 List 和 Datagrid 的值。这是我的更新方法：

```
 public void Update(List<Article> list)
    {
        List = list;
        NotifyOfPropertyChange("List");
    } 
```

我错了什么？?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:06:38.677

Caliburn.Micro 不支持`DataGrid`开箱即用的基于约定的绑定，您可以通过检查`ConventionManager` [静态构造函数](https://caliburnmicro.codeplex.com/SourceControl/changeset/view/ae616b84192450d079cf8b6fb91f0d8b8cda4e6a#src/Caliburn.Micro.Silverlight/ConventionManager.cs)来查看这一点。

您可以使用 编写自己的约定`ConventionManager`，也可以`ItemsSource`在视图中设置属性绑定。

例如

```
<DataGrid ItemsSource="{Binding Articles}" SelectedItem="{Binding SelectedArticle}"
        Margin="14,41,12,61" AutoGenerateColumns="False"
        HorizontalAlignment="Stretch" VerticalAlignment="Stretch"> ... 
```

其他要点：

1.  `List`对于您的文章列表来说，这不是一个很好的属性名称
2.  Caliburn.Micro 提供了一个基于 lambda 的覆盖`NotifyOfPropertyChange`，您应该使用它来捕获重构
3.  `PropertyChanged`实现 INPC 属性的更好模式如下（这是因为更改属性以调用事件不再是消费者的责任）

**采用：**

```
private List<Article> articles;

public List<Article> Articles 
{ 
   get 
   {
       return this.articles;
   }

   private set
   {
       if (this.articles == value)
       {
           return;
       } 

       this.articles = value;
       this.NotifyOfPropertyChange(() => this.Articles);
   }
} 
```

由于这是一个集合类型，您还应该确保始终返回一个集合而不是 null。这可以防止消费者需要检查以避免空引用异常。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-05T15:27:20.037

这是 Datagrid 视图的 viewModel：

```
 [Export(typeof(IScreen))]
    public class BViewModel : Screen
    {
            private List<Article> articles;
            public List<Article> Articles
            {
                get
                {
                    return this.articles;
                }

                private set
                {
                    if (this.articles == value)
                    {
                        return;
                    }

                    this.articles = value;
                    this.NotifyOfPropertyChange(() => this.Articles);
                }
            }

       public BolleViewModel()
       {
         Articles = recoverArticles(); //returns a list of articles
       }

       public void Update(List<Article> list)
       {
               Articles = list;
       }

        //is associated with a button
        public void Detail()
        {
            if(SelectedArticle!=null)
                WindowManager.ShowWindow(new DetailArticleViewModel(SelectedArticle, Articles), null, null);
            else
            {
                MessageBox.Show("Select an article","Error!",MessageBoxButton.OK,MessageBoxImage.Error);
            }
        }

   } 
```

DetailArticleViewModel 改变Articles 列表中的一项并调用BViewModel 的Update 方法。

```
[Export(typeof(IScreen))]
    public class DetailArticleViewModel : Screen
    {
      public List<Article > GeneralList;
      public Article ArticleSelected;
      public BViewModel bw;

      public DetailArticleViewModel(Article art,List<Article> arts,BViewModel viewmodel)
      {
          ArticleSelected = art;
          GeneralList = arts;
          bw = viewmodel;
      }

      // is associated with a button
      public void Save()
      {
          var index = GeneralList.FindIndex(item => item.Code.CompareTo(ArticleSelected.Code)==0);
          GeneralList[index].Price = 900;
          bw.Update(List);

      }

    } 
```

但是精选文章的价格不是900！为什么 ？

# post - HTTP Request POST.Upload JRXML file via JaspeReports Server

> ID：15832107
> 
> 赞同：2
> 
> 时间：2013-04-05T10:57:03.037
> 
> 标签：post, jasperserver

I want upload/update report template JRXML file on JasperReports Server.

The official documentation doesn't contain a minimal example for updating report template What is raw request which uploads/updates report template xml via JasperReports Server REST API?

I tried to run JasperServer java tests(using maven): [http://code.jaspersoft.com/svn/repos/jasperserver/](http://code.jaspersoft.com/svn/repos/jasperserver/) But I couldn't. There were many errors.

Then I found this sample test for updating image in Jasper Server resources: [http://community.jaspersoft.com/wiki/getting-started-rest-web-service-api](http://community.jaspersoft.com/wiki/getting-started-rest-web-service-api) It works!

I wrote my request for update JRXML file

here is my raw request [https://gist.github.com/anonymous/b2dd458868243b37c795](https://gist.github.com/anonymous/b2dd458868243b37c795)

here is response [https://gist.github.com/anonymous/916f09199103665b97c0](https://gist.github.com/anonymous/916f09199103665b97c0)

What am I doing wrong in my request?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:22:37.933

我找到了解决办法。request中的资源描述符必须是reportunit，而不是jrxml文件的资源描述符！！！

# ruby-on-rails - ActiveRecord 范围不起作用

> ID：15832108
> 
> 赞同：1
> 
> 时间：2013-04-05T10:57:03.487
> 
> 标签：ruby-on-rails, ruby, activerecord

我有以下关系：

```
class User < ActiveRecord::Base
  has_many :incoming_delegations,
    :class_name => "Delegation", :foreign_key => :to_user_id,
    :conditions => { :active => true }
  #...
end 
```

和

```
class Delegation < ActiveRecord::Base
  belongs_to :from_user, :class_name => "User"
  belongs_to :to_user,   :class_name => "User"

  scope :from, lambda { |user| where(:from_user_id => user.id) }
  scope :to, lambda { |user| where(:to_user_id => user.id) }
  #...
end 
```

现在当我做

```
Delegation.from(User.find(43)) # I get list of delegations from user
User.last.incoming_delegations # I get list of incoming delegations 
```

但是当我尝试时：

```
User.last.incoming_delegations.from(User.find(43)) 
```

然后我收到以下错误消息：

```
TypeError: Cannot visit User
        from /home/jiri/.rvm/gems/ruby-1.9.3-p194@OM/gems/arel-3.0.2/lib/arel/visitors/visitor.rb:25:in `rescue in visit'
        from /home/jiri/.rvm/gems/ruby-1.9.3-p194@OM/gems/arel-3.0.2/lib/arel/visitors/visitor.rb:19:in `visit'
        from /home/jiri/.rvm/gems/ruby-1.9.3-p194@OM/gems/arel-3.0.2/lib/arel/visitors/to_sql.rb:281:in `visit_Arel_Nodes_JoinSource'
        from /home/jiri/.rvm/gems/ruby-1.9.3-p194@OM/gems/arel-3.0.2/lib/arel/visitors/visitor.rb:19:in `visit'
        from /home/jiri/.rvm/gems/ruby-1.9.3-p194@OM/gems/arel-3.0.2/lib/arel/visitors/to_sql.rb:135:in `visit_Arel_Nodes_SelectCore'
        from /home/jiri/.rvm/gems/ruby-1.9.3-p194@OM/gems/arel-3.0.2/lib/arel/visitors/mysql.rb:41:in `visit_Arel_Nodes_SelectCore'
        from /home/jiri/.rvm/gems/ruby-1.9.3-p194@OM/gems/arel-3.0.2/lib/arel/visitors/to_sql.rb:121:in `block in visit_Arel_Nodes_SelectStatement'
        from /home/jiri/.rvm/gems/ruby-1.9.3-p194@OM/gems/arel-3.0.2/lib/arel/visitors/to_sql.rb:121:in `map'
        from /home/jiri/.rvm/gems/ruby-1.9.3-p194@OM/gems/arel-3.0.2/lib/arel/visitors/to_sql.rb:121:in `visit_Arel_Nodes_SelectStatement'
        from /home/jiri/.rvm/gems/ruby-1.9.3-p194@OM/gems/arel-3.0.2/lib/arel/visitors/mysql.rb:36:in `visit_Arel_Nodes_SelectStatement'
        from /home/jiri/.rvm/gems/ruby-1.9.3-p194@OM/gems/arel-3.0.2/lib/arel/visitors/visitor.rb:19:in `visit'
        from /home/jiri/.rvm/gems/ruby-1.9.3-p194@OM/gems/arel-3.0.2/lib/arel/visitors/visitor.rb:5:in `accept'
        from /home/jiri/.rvm/gems/ruby-1.9.3-p194@OM/gems/arel-3.0.2/lib/arel/visitors/to_sql.rb:19:in `accept'
        from /home/jiri/.rvm/gems/ruby-1.9.3-p194@OM/gems/arel-3.0.2/lib/arel/visitors/bind_visitor.rb:11:in `accept'
        from /home/jiri/.rvm/gems/ruby-1.9.3-p194@OM/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/database_statements.rb:7:in
        from /home/jiri/.rvm/gems/ruby-1.9.3-p194@OM/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/database_statements.rb:18:i
... 1 levels... 
```

知道是什么导致了这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T11:23:11.100

```
scope :from, lambda { |user| where(:from_user_id => user.id) } 
```

`from`对范围来说是个坏名字；**把它命名为别的**。

**[`from`](https://github.com/rails/arel/blob/master/lib/arel/nodes/select_core.rb#L20)**当您尝试`:from`在类中调用范围**[时，将使用 ARel 中的此](https://github.com/rails/arel/blob/master/lib/arel/nodes/select_core.rb#L20)****[方法](https://github.com/rails/arel/blob/master/lib/arel/nodes/select_core.rb#L20)**`Delegation`。

# php - PHP - 空字段错误处理

> ID：15832113
> 
> 赞同：0
> 
> 时间：2013-04-05T10:57:18.377
> 
> 标签：php, forms

我有一个创建帐户的表单，它重定向到我的 php 页面以检查表单中的空字段并插入数据。

我`empty();`用来检查字段是否为空，作为错误处理我只是使用回显，现在我的问题是我是否可以以更好的方式做到这一点，因为我的 php 表单检查页面没有应用任何设计，所以错误处理只是在空白页上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:07:38.243

假设表单中的所有字段都是输入文本字段（将类“requiredField”）添加到这些字段中。使您在加载空表单时禁用提交按钮。

jQuery：

```
$(document).ready(function() {
$("input.requiredField:text").bind("keyup change", function() {

        updateSaveButton();
    });

});

function updateSaveButton() {
if ( $(".requiredField:text").filter(function() {return $(this).val().match(/^\s*$/);}).length) {
$("#submit").button({
            disabled : true
        });
} else {
 $("#submit").button({                                                                                                                                                                                      
                 disabled : false                                                                                                                                                                                  
                    });
}

} 
```

Submit 是提交按钮的 id，按钮是 jQuery UI 的一部分。但是，如果您不使用 jQuery UI，您可以简单地添加 disabled 属性。例如：

```
$("#submit").attr("disabled","disabled"); {to add disabled attribute}
$("#submit").removeAttr("disabled"); {to remove disabled attribute} 
```

由于您的提交按钮将保持禁用状态，因此用户将无法提交任何表单。当用户仅输入空格作为任何文本字段的值时，提交按钮也将保持禁用状态

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:08:17.423

在我看来，empty() 通常是检查输入的最佳方式

```
 if( empty( $_POST[ 'username' ] ) ) {

      $error = 'Please enter a user name';
 } 
```

在最好的情况下，你这样做

```
 $username = !empty( $_POST[ 'username' ] ) ? trim( $_POST[ 'username' ] ) : '';

 if( empty( $username ) ) $error = 'Please insert a user name';
 if( strlen( $username ) < 3 ) $error = 'Username needs 3 characters';
 //etc... 
```

这将确保用户不只是提供空格来提供您请求的输入

有几种方法可以处理输入。

1）将您的表单重定向到同一页面并处理输出上方的输入

```
 $error = '';
 if( strtolower( $_SERVER[ 'REQUEST_METHOD' ] ) === 'post' ) {

      //handle user input and fill $error if needed

      if( empty( $error ) ) {
          //success
      }

 }

 ?>
 <form action="thissite.php">
      <?php if( !empty( $error ) ) :?><span class="error"><?=$error?></span><?php endif; ?>
      <...rest of the form...>
 </form> 
```

2）你可以用AJAX处理它

通过 AJAX 提交您的表单（请参阅 jQuery 的[$.ajax](http://api.jquery.com/jQuery.ajax/)和[$.serialize](http://api.jquery.com/serialize/)，这对您有很大帮助），接收包含成功状态或错误的 JSON 字符串。解析它并相应地在表单中插入错误元素

3）（最糟糕的方式imo）转到新页面，显示错误并在出现错误时再次重定向到表单

将表单提交到一个新页面，该页面处理输入、输出样式的错误消息并放置一个链接，该链接可以继续（成功）或带您返回表单（错误）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T11:24:27.730

您可以做的最好的事情是在例外情况下进行（如果您使用类来处理注册。

例如，你会有这样的课

```
class Account {
   public function register($username, $password, $mail) {
      if(empty($username)) throw new RegistrationException("Username is empty.");
      // and so on
  }
} 
```

然后在注册的地方，你会做类似的事情

```
try {
    $account = new Account();
} catch(RegistrationException $e) {
    // print the message out
    // $e->getMessage() will return the parameter of new RegistrationException(...)
} 
```

然后，只需创建一个扩展异常的异常类

```
class RegistrationException extends Exception {} 
```

如果您将进行客户端验证 (javascript/jQuery)，请不要忘记在服务器端 (php) 上进行验证。如果您没有，用户将删除身份验证规则并闯入（没有用户名，使用无效字符，...）

# ocaml - __ 在从 Coq 中提取的 Ocaml 中

> ID：15832117
> 
> 赞同：6
> 
> 时间：2013-04-05T10:57:24.107
> 
> 标签：ocaml, coq

从 Coq 中提取的 Ocaml 代码包括（在某些情况下）一个类型`__`和一个函数`__`，定义如下：

```
type __ = Obj.t
let __ = let rec f _ = Obj.repr f in Obj.repr f 
```

文档说，在过去，这种类型被定义为`unit`（因此`__`可以被视为`()`），但存在（罕见）将 type`__`的值应用于 type 的值的情况`__`。

`__`使用来自 OCaml 的模块的未记录函数`Obj`，但似乎定义的本质上是一个完全多态的函数，它吃掉它的所有参数（无论它们的数量是多少）。

是否有一些关于`__`无法消除的情况以及这种类型的值应用于相同类型的值的文档，无论是从理论（构造 Coq 术语，其中不可能消除）和实际情况（显示发生这种情况的实际情况） 观点看法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T21:13:58.817

[自述](https://github.com/coq/coq/blob/7d220f8b61649646692983872626d6a8042446a9/plugins/extraction/README)文件中引用的参考资料很好地概述了擦除问题。具体而言，[本](http://www.pps.jussieu.fr/~letouzey/download/rapport_dea.ps.gz)报告和[本文](http://www.pps.jussieu.fr/~letouzey/download/extraction2002.ps.gz)都详细解释了 CIC 术语的类型方案和逻辑部分是如何被删除的，以及为什么必须有`__ x = __`. 问题不完全是`__`可能适用于它自己，而是它可能适用于*任何事物*。

不幸的是，在任何非病理情况下，这种行为是否重要还不清楚。给出的动机是能够提取*任何*Coq 术语，并且文档没有提到从实际角度来看真正有趣的任何案例。[3](http://www.pps.jussieu.fr/~letouzey/download/extraction2002.ps.gz)上给出的例子是这个：

```
Definition foo (X : Type) (f : nat -> X) (g : X -> nat) := g (f 0).
Definition bar := foo True (fun _ => I). 
```

执行`Recursive Extraction bar.`给出以下结果：

```
type __ = Obj.t
let __ = let rec f _ = Obj.repr f in Obj.repr f

type nat =
| O
| S of nat

(** val foo : (nat -> 'a1) -> ('a1 -> nat) -> nat **)

let foo f g =
  g (f O)

(** val bar : (__ -> nat) -> nat **)

let bar =
  foo (Obj.magic __) 
```

由于`foo`在 上是多态的`Type`，因此无法在其主体上简化`f O`应用程序，因为它可能具有计算内容。但是，因为`Prop`是 的子类型`Type`，`foo`也可以应用于`True`，这就是 中发生的情况`bar`。因此，当我们尝试减少`bar`时，我们将`__`被应用于`O`。

这种特殊情况不是很有趣，因为可以完全内联`foo`：

```
let bar g =
  g __ 
```

由于`True`不能应用于任何东西，如果`g`对应于任何合法的 Coq 术语，它的`__`论点也不会应用于任何东西，因此它是安全的`__ = ()`（我相信）。但是，有时无法预先知道是否可以进一步应用已删除的术语，这使得一般定义是`__`必要的。例如，在文件末尾附近查看`Fun`示例[here 。](https://github.com/coq/coq/blob/7d220f8b61649646692983872626d6a8042446a9/test-suite/success/extraction.v)

# javascript - 如何在 javascript 或 jquery 中获取周围的单词？

> ID：15832124
> 
> 赞同：0
> 
> 时间：2013-04-05T10:57:42.467
> 
> 标签：javascript, android, jquery, html

我正在使用 webview 并在 webview 中加载 html 页面，所以在这里我卡在某个地方，我想使用 javascript.here。我在下面解释我到底需要什么：我有这样的 html 数据-

“我选择了“widget”这个词。但我想知道***选择是在***“red”还是“blue”之后。这可能吗？我一直在网上搜索一些建议，但我遇到了麻烦寻找答案”

因此，假设从上面的文本中我选择了文本“**选择在之后**”（显示为粗体），我只需要该词之前的前一个词和该行中该词之后的词。假设我在第 2 行中选择，所以我需要该行中该单词之前的所有前一个单词以及该行中所选单词之后的所有单词，如果所选单词位于行首，则将前一个单词返回为 null 和剩余单词在所选单词之后直到行尾，最后一个单词类似，反之亦然

请告诉我们如何使用 JavaScript 来实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:30:47.170

`match`使用正则表达式怎么样：

```
var pattern = /^(.+)(selection is after)(.+)$/;
match = "hello selection is after goodbye".match(pattern)

match[1] // hello
match[2] // selection is after
match[3] // goodbye 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:43:46.527

我在一个 JSFiddle 中创建了一个解决方案，在[Selecting text before and after word](http://jsfiddle.net/2Cmf2/1/)

首先，我创建了一个段落来保存要选择的文本

```
<p id="yourTextContainer">Lorem ipsum data sid amet</p> 
```

然后，在 JavaScript 中，我将段落拆分为 span，将每个单词的索引放在 name 属性中。然后，当单击一个单词时，它使用索引返回之前的所有单词和之后的所有单词。

```
 var textindex;
var textbefore;
var textafter;

$(document).ready(function(){
var words=$("#yourTextContainer").text().split(' ');
$("#yourTextContainer").html("");

$.each(words, function(i,val){
//wrap each word in a span tag 
$('<span name="'+ i+'"+ />').text(val +" ").appendTo("#yourTextContainer");

});

$("#yourTextContainer span").live("click",function(event){event.stopPropagation();
                                                          $("#yourTextContainer span").css("background-color","white");
$(this).css("background-color","blue");

//gets the text of clicked span tag
var textselected = $(this).text();
textindex = $(this).attr("name");                                                          
    alert("You just selected "+textselected+" index " + textindex);
textbefore= "";
textafter = "";                                                          
     $("span").each(function (index) { 
         // alert("LOOPING INDEX " + index);
         if (index<(textindex))
             textbefore = textbefore + $(this).text() + " ";
         if (index>(textindex))
             textafter = textafter + $(this).text() + " ";
         });
     alert("Text before is "+textbefore );
     alert("Text after is "+textafter );                                                     
});
}); 
```

例如，如果你点击“ipsum”，JS会提醒，“Lorem”作为前面的文本，“data sid amet”作为“ipsum”后面的文本。

希望这可以帮助！您也可以运行小提琴来了解我的意思。

# javascript - 如何在 h:inputText 中的按键事件期间限制字符

> ID：15832128
> 
> 赞同：1
> 
> 时间：2013-04-05T10:57:54.977
> 
> 标签：javascript, jsf

我需要一个输入组件来只接受数字，如`[0-9]`. 我通过服务器端转换/验证实现了这一点：

```
<h:inputText ... converter="javax.faces.Integer" /> 
```

但是，它仍然允许在 UI 中输入其他字符。在活动期间如何防止这种情况`keypress`发生？

```
<h:inputText ... converter="javax.faces.Integer" onkeypress="...help?" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:01:29.007

尝试这个

```
<h:inputText id="presentReading" styleClass="labelfont" label="Present Reading"    converter="javax.faces.Integer"value="#{FuelFilling1.presentReading}" maxlength="10">
   <f:validateLongRange minimum="1" maximum="10"/>
</h:inputText> 
```

或者，您可以使用 JQuery 或 Javascript 在客户端的按键上进行验证。你可以使用 Jquery 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:08:05.733

我建议坚持使用 jsf 验证。

```
<f:convertNumber integerOnly="true" type="number" /> 
```

如果您不想将表单提交给获取响应，则可以使用 ajax 进行实时验证。可以使用 javascript/jQuery 进行按键验证，但除非您有充分的理由这样做，否则会很痛苦。

# django - 为什么 django 不提供我的媒体文件？

> ID：15832131
> 
> 赞同：1
> 
> 时间：2013-04-05T10:58:09.180
> 
> 标签：django, django-templates, django-media

在我的`settings.py`,

```
ROOT_PATH = os.path.dirname(__file__)
#STATICFILES_DIRS =
STATIC_ROOT = os.path.join(ROOT_PATH, 'static')
MEDIA_ROOT = os.path.join(ROOT_PATH, 'media')
STATIC_URL = '/static/'
MEDIA_URL = '/media/ 
```

在我的模板中，

```
 <div class=" event_image">
      <img src="{{ MEDIA_URL }}{{ restaurant.logo }}" /> 
     </div> 
```

这在开发中不起作用，它返回 404`"GET /media/restaurant_detail/restaurant_detail/information_about_object.jpg HTTP/1.1" 404 178672`

我做错了什么，正确的方法是什么，所以它在开发和生产中都有效。我看了这里（[Django 1.4 在开发服务器上提供 MEDIA_URL 和 STATIC_URL 文件](https://stackoverflow.com/questions/13897982/django-1-4-serving-media-url-and-static-url-files-on-development-server)）但都是徒劳的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T11:57:21.323

原来我必须包括网址，我的网址

```
urlpatterns += patterns('',
    url(r'^static/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.STATIC_ROOT}),
    url(r'^media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.MEDIA_ROOT}),

) 
```

以上工作..

```
my project structure
-myproject
-- media
-- static
-- templates
-- settings.py
-- manage.py
-- app 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-16T20:37:47.017

Suziemac，它也对我有用。这是原始文档的链接：[https](https://docs.djangoproject.com/en/1.10/ref/views/) ://docs.djangoproject.com/en/1.10/ref/views/ 。当我开发一个我使用过的应用程序`+ static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT),`时，但是当我部署一个应用程序时这不起作用。

# c++ - C++ 的 Visual Studio 设置：.NET Framework 警告

> ID：15832135
> 
> 赞同：4
> 
> 时间：2013-04-05T10:58:24.907
> 
> 标签：c++, visual-studio-2010, setup-project

我有一个在 Visual Studio 2010 中开发的本机 C++ 应用程序。还有一个安装项目作为解决方案的一部分。在构建设置时，会弹出警告：

> 警告：项目中 .NET Framework 的目标版本与 .NET Framework 启动条件版本“.NET Framework 4 Client Profile”不匹配。在高级编译选项对话框 (VB) 或应用程序页面（C#、F#）中更新 .NET Framework 启动条件的版本以匹配 .NET Framework 的目标版本。

在 (c++ app) 属性中，Common Properties 中有一个字段表示：

> 目标框架：.NETFramework，版本=v4.0

无法编辑。

现在的问题是：为什么我需要 .NETFramework for C++ 应用程序？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T03:17:52.970

您可以将（使用文本编辑器）添加`<TargetFrameworkVersion>v2.0</TargetFrameworkVersion>`到`<PropertyGroup Label="Globals">`解决方案的所有 .vcxproj 文件中的部分，然后重新加载修改后的项目。此更改导致 VS 停止添加虚假启动条件。

# asp.net - 使用 JQuery 调用 Web 服务时可能存在哪些威胁以及如何避免它们？

> ID：15832136
> 
> 赞同：10
> 
> 时间：2013-04-05T10:58:29.533
> 
> 标签：asp.net, web-services, jquery, updatepanel, security

我知道这个问题可能过于笼统，但为了缩小问题范围，这里有一个简短的描述：

我打算忘记`ASP.net UpdatePanel`并通过 JQuery 使用 ajax。我担心由于 JavaScript（以及因此的 JQuery 代码）的简单客户端性质，任何查看我网页源代码的人都可以意识到我正在调用的 Web 服务的 URL 是什么以及正在传递什么到那些网络服务。

当`UpdatePanel`用于这些类型的操作时，我确信调用 Web 服务是在服务器端完成的，并且我不担心有关调用敏感 Web 服务的信息被公开暴露的问题，但现在我计划通过 Ajax 使用JQuery，它让我很担心。

我的担忧是否合理，如果属实，避免暴露 web-service-calling-info 威胁的最佳解决方案是什么？

**澄清：**当说 UpdatePanel 时，我的意思是利用一系列技术，包括 ASP.net AJAX、代码隐藏和依赖服务器端 Dll 来执行异步服务器端操作，而不是需要 Web 服务来吸引服务器的 jquery Ajax。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T12:39:06.730

互联网上无法通过隐藏 URL 来始终保护您的 Web 服务。我不确定当您说您的更新面板从服务器调用 Web 服务时，您并没有获得 AJAX 的真正威力。

保护 Web 服务的一种方法是在 Web 服务端使用身份验证。例如，您每次访问源时都需要发送一些身份验证密钥，这很常见，您有很多公共 Web 服务使用身份验证密钥（如 OpenId 实现）自我保护。如果您不想更改 Web 服务逻辑，我认为 AJAX 的 jquery 方式不是一个安全的选择。

这是一个想法，您可以拥有两个级别的 Web 服务，一个将为您可以在 jquery 中使用的所有内容打开。从当前的 Web 服务，从服务器端调用另一个安全的 Web 服务。即使是现在，您也可以为某些特定机器 IP 配置传入请求。

在这种情况下，除了您自己的服务器之外，其他任何人都无法访问安全地保存在防火墙后面的 Web 服务。这与我们从应用程序服务器连接到数据库服务器时所做的类似。

让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T22:41:52.347

我将说明我的答案希望解决的问题：

1.  假设您将服务托管在 Web 服务器以外的机器上*，*问题是您向潜在的攻击者提供了这些机器的名称/地址。

2.  攻击者可以编写脚本/机器人来抓取您的数据。

3.  攻击者可以专注于您的网络服务并尝试破解它们/获得对您网络的访问权限。

4.  攻击者可以尝试在您的 Web 服务上执行 DoS/DDoS。

我过去使用的解决方案是在 Web 服务器上创建一个轻量级代理，以便所有 AJAX 调用都简单地指向当前域。然后，当有来电时，它会被简单地路由到适当的 Web 服务，该服务托管在网络内部的某个地方。

它在网络上创建了一个额外的跃点，但它也有以下好处：

1.  它隐藏了托管服务的机器的实际 IP。
2.  您可以轻松锁定一台 Web 服务器并监控异常活动。如果您看到活动激增，您可能会关闭 Web 服务。（如果你使用不同的机器，你必须监控两个盒子。不是一个大问题，但只监控一个更容易。）
3.  您可以轻松地在代理中放置一个分布式缓存层。这可以保护您免受负载/拒绝服务 (DoS) 攻击，并且显然支持正常的 Web 服务流量。
4.  您可以在代理级别隐藏身份验证。公开电话不会背叛您的身份验证方案。否则，攻击者可以看到您使用的令牌、密钥或秘密或任何东西。在 Web 服务器上创建代理会隐藏该信息。数据仍会流过，但您可以再次对其进行监控。

在我看来，真正的好处是它减少了应用程序的表面积，从而缩小了攻击者可以做的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T09:37:34.260

由于您参考了 ASP.Net，因此知道它的视图状态很容易被解密。没有万无一失的方法可以保护您的代码（更不用说调用的 url）。如果您使用一些可能允许不受限制和危险操作的参数调用 Web 服务，那么您最好开始使用一些用户/角色/权限管理。

如果您担心“中间人”攻击，最好的选择是使用 https。

# asp.net-mvc - 如何告诉默认模型绑定器在回发时忽略属性

> ID：15832142
> 
> 赞同：0
> 
> 时间：2013-04-05T10:58:42.587
> 
> 标签：asp.net-mvc, abstract-class, defaultmodelbinder

所以我的模型中有这个费用抽象类（由 EF 生成，并考虑到数据库优先）

```
public abstract partial class Fee
{    
    public int FeeId { get; set; }
    public int ProductId { get; set; }
    public string Name { get; set; }
    public decimal StandardPrice { get; set; }   
} 
```

它被许多其他类继承以模拟不同类型的费用，例如 QuarterlyFee 之类的东西。我在模型中还有一个 Customer 类，客户可以有自定义费率，由 CustomerRate 类建模。

现在在客户详细信息页面上，我正在尝试显示客户的所有可能费用，以便用户可以选择哪些费率是自定义的，哪些是标准的，没有投标交易我只是创建一个 ViewModel 类 PossibleFee 来建模：

```
public class PossibleFee
{
    public int CustomerId { get; set; }
    public int FeeId { get; set; }
    public Boolean CustomRate { get; set; }
    public decimal CustomerPrice { get; set; }

    public virtual Customer Customer { get; set; }
    public virtual Fee Fee { get; set; }
} 
```

我在 Customer 类中添加了一个属性来保存可能的费用（ICollection PossibleFees），我在 Controller 方法中填充该属性（public ActionResult Details(int id = 0)），稍后是一个 EditorTemplate，然后我有一个列表客户可能需要支付的所有费用，具体取决于用户可以编辑的产品。

但是现在在回发时，当我点击保存按钮时，默认模型绑定器会完成它的工作并尝试填充可能费用的 ICollection，并为每个可能费用尝试创建一个费用对象来填充同名的属性。

当然它不起作用，因为 Fee 是抽象的，问题很简单：我如何告诉 DefaultModelBinder 在回发时忽略该属性，因为我在回发时不需要它？

我知道我可以简单地在可能费的 EditorTenplate 类的可能费中重新复制我需要的字段，甚至可以从费中删除摘要。但我想知道是否可以在不接触模型的情况下根据需要调整 DefaultModelBinder。

编辑 2：在我看来，Yarx 提供了一个更清洁的解决方案，请参阅下面的 2 个帖子

编辑：好吧，Carlos Corral Carvajal 几乎做对了，在 ModelBinder 尝试创建对象后调用 SetProperty 方法，所以我不得不改写 BindProperty

```
public class CustomModelBinder : DefaultModelBinder
{
    protected override void BindProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, PropertyDescriptor propertyDescriptor)
    {            
        if (propertyDescriptor.Attributes.Contains(new ModelBinderIgnoreOnPostback()))
        {
            return;
        }

        base.BindProperty(controllerContext, bindingContext,propertyDescriptor);
    }
}

[AttributeUsage(AttributeTargets.Property, AllowMultiple=false, Inherited=false)]
public class ModelBinderIgnoreOnPostback : Attribute {} 
```

添加了自定义属性以防有人需要它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:21:19.170

我的建议是将您的 ViewModel 分开，以便每个操作都有一个单独的 ViewModel。拥有一个仅用于显示信息的 ViewModel 和一个用于接受来自 Post Back 的信息的 ViewModel。因为在这种情况下，在用于显示数据的 ViewModel 中也需要在 PostBack 上绑定的大部分字段，最简单的做法是继承您的 ViewModel。例如，请参见下文。

```
public class PossibleFeeInputModel 
{
    public int CustomerId { get; set; }
    public int FeeId { get; set; }
    public Boolean CustomRate { get; set; }
    public decimal CustomerPrice { get; set; }

    public virtual Customer Customer { get; set; }
} 
```

.

```
public class PossibleFeeViewModel : PossibleFeeInputModel
{
    public virtual Fee Fee { get; set; }
} 
```

这样，您可以使用 PossibleFeeViewModel 来显示您的视图，但在您接受 PostBack 时使用 PossibleFeeInputModel 进行绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:15:16.397

您可以创建一个从默认模型绑定器继承的自定义模型绑定器，并捕获 Fee 类并对其执行特定操作：

```
public class CustomModelBinder : DefaultModelBinder
{

    protected override void SetProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, System.ComponentModel.PropertyDescriptor propertyDescriptor, object value)
    {
        if (propertyDescriptor.PropertyType == typeof(Fee))
        {
            //Take desicions
        }

        base.SetProperty(controllerContext, bindingContext,
                            propertyDescriptor, value);
    }
} 
```

在 global.asax 中：

```
ModelBinders.Binders.DefaultBinder = new CustomModelBinder(); 
```

希望能帮助到你

# tomcat - 聊天服务器负载均衡

> ID：15832147
> 
> 赞同：4
> 
> 时间：2013-04-05T10:58:51.423
> 
> 标签：tomcat, load-balancing, throttling

我已经阅读[了 Apache for Tomcat Servers 关于集群和负载平衡的文档](http://tomcat.apache.org/tomcat-6.0-doc/cluster-howto.html)，但我对它如何用于通信感到困惑。

假设我正在创建一个允许用户通过服务器相互交谈的聊天应用程序。如果两个用户在同一台​​服务器上，那很好，但如果一个用户在一台服务器上，另一个在另一台服务器上怎么办？服务器将如何通信？

我想我的意思是我将使用多个服务器来减少负载，但是如果用户通过服务器进行通信并且每个用户都在单独的服务器上，那么我的两台服务器将成为彼此的客户端并且负载不会减少。

我的观点是进出每台服务器的数据量相同，那么当有 100 万用户时，它是如何工作的呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-03T02:13:58.437

你真的在看两个不同的要求：

1.  负载平衡：为多个 Web（或其他协议）服务器公开单个网络地址。
2.  在多个服务器之间通信状态（消息）。

第一个要求很简单：使用硬件或软件负载平衡器，或者在多个 Java 服务器前使用单个 Apache Web 服务器。

第二个要求是问题。

让我们考虑单个系统上的假设聊天服务器。收到消息后，会解析请求，并将新消息放入内存中供收件人使用。需要处理常见情况：例如，用户在会话中间注销。您还需要弄清楚如何将收到的消息传递回用户的浏览器。浏览器可以轮询（“在#N 之后为用户 X 向我发送所有消息”），或者服务器可以使用多种技术之一推送接收到的消息。如果您有一个运行在 Web 服务器之上的聊天服务器，那么这一切都应该是熟悉的。

棘手的部分是：你如何在多台机器上做到这一点？在我的脑海中，我可以想到几种可以扩展的方法：

*   跟踪收件人所在的服务器。使用另一种传输机制将消息发送到该服务器，以便可以将其推送到内存中，就好像发送者是本地的一样。请参阅“消息队列”或“企业服务总线”。
*   将消息处理与通信分离：为活动对话指定一台或多台服务器。让接收服务器向这些服务器发送消息；使用通知机制（好）或轮询（不太好）来提醒收件人服务器有一条聊天消息等待发送。特殊功能：使用分布式哈希表将邮件邮箱分发到服务器池；如果一台或多台服务器出现故障，DHT 可以自动调整。
*   使用广播：如果接收者不是本地服务器，则每个服务器都向所有其他服务器广播。每个服务器都会收到通知；只有与接收者在一起的人才能对它做任何事情。

这里的关键是你不能再在多台机器之间使用共享内存。您必须使用几种可能的机制之一在服务器之间移动消息。您不太可能为此使用通用的、开销相对较高的协议（如 HTTP）；有许多更高效的好工具，您可以在多个抽象级别上实现这一点，从使用像 Terracotta 这样的共享缓存工具、像 JXTA 这样的对等网络协议、像 ActiveMQ 这样的企业服务总线等. 根据你想在用户浏览器上放多少，你甚至可以直接在客户端系统上运行一些消息队列软件——有新消息的通知可以直接发送给用户，而不是发送到中间邮箱。

明确的优化是支持一种机制，将具有活动对话的用户移动到同一台服务器，但这不适用于大多数负载平衡机制。应该有某种方法可以强制用户在特定服务器之间建立关联，但我想不出一个简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T09:28:06.963

您可以使用负载均衡器来实现您所需要的。

基本上，服务器负载均衡器可以是：

*   传输级负载平衡器 - 基于 DNS 的方法或 TCP/IP 级负载平衡
*   应用程序级负载均衡器 - 使用应用程序负载来做出负载均衡决策。

基本的服务器负载均衡器如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/YzwHi.jpg)

基本上，每台服务器都会通知负载均衡器其当前连接数。负载平衡器使用此信息来决定将新客户端发送到哪个服务器。

> 我的观点是进出每台服务器的数据量相同，那么当有 100 万用户时，它是如何工作的呢？

实际上，如果您认为不需要将所有信息广播给每个客户端，那么它的数据量并不相同，您可以动态优化它并显着降低负载。

有关 Tomcat 实现的更多详细信息，请参阅以下链接：

*   [通过 Tomcat 集群实现负载平衡和可扩展性](http://hosteddocs.ittoolbox.com/AP121907.pdf)
*   [Apache 2.x + Tomcat 4.x + 负载平衡](http://raibledesigns.com/tomcat/)

# facebook - 带有消息的 Facebook 喜欢按钮

> ID：15832153
> 
> 赞同：0
> 
> 时间：2013-04-05T10:59:09.780
> 
> 标签：facebook, facebook-graph-api

谁能告诉如何创建一个带有添加消息选项的 facebook like 按钮？可以在此处找到示例[http://www.familycircle.com/style/beauty/hair/summer-hairstyles/](http://www.familycircle.com/style/beauty/hair/summer-hairstyles/)
如果用户没有写任何内容作为消息，则按钮的行为与普通按钮一样。如果用户写了一条消息，它将出现在他/她的墙上。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:03:31.283

正如 Facebook 所说：

> 用户何时可以选择添加评论？

如果您使用 XFBML 版本的 Like 按钮，用户将始终可以选择添加评论。如果您使用的是 iframe 版本的按钮，如果您使用的是标准布局，用户将可以选择评论。如果用户确实添加了评论，则发布回 Facebook 的故事会更加突出。

[喜欢按钮](https://developers.facebook.com/docs/reference/plugins/like/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:04:07.110

这是facebook的like按钮的正常行为。您可以选择使用 HTML5 撰写评论或消息，这就是我的做法

把它放在body标签之后

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=YOURAPPID";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

把它放在你想看到按钮的地方

```
 <div class="fb-like" data-href="http://someurl.com" data-send="true" data-width="450" data-show-faces="true"></div> 
```

或者[在这里创建你的](https://developers.facebook.com/docs/reference/plugins/like/)

# javascript - 数字的正则表达式验证

> ID：15832155
> 
> 赞同：0
> 
> 时间：2013-04-05T10:59:18.063
> 
> 标签：javascript, regex

我已经验证了以下情况的这个正则表达式：

正确输入：

1.  12345678,12345678,12345678
2.  *空格*12345678、12345678、12345678、12345678
3.  12345678,12345678,*空格*
4.  12345678
5.  *空格*12345678,
6.  12345678,

结果：返回 true（正则表达式在上述情况下正常工作。）

输入错误：

1.  1234567812345678

结果：返回真（应该是假）

对于错误的输入，它应该返回 false ，但它返回 true。我应该怎么做才能验证错误的输入？

```
 var validate_commas = /^(\s*\d{8}\s*[,]?\s*)*$/; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:02:11.287

请参阅**描述中的歧义，以**获取有关您的问题为何模棱两可以及这如何影响您获得的答案的更多详细信息。

我假设任意允许使用空格（ASCII 32）：

*   在字符串的开头
*   在字符串的末尾
*   逗号前后。

我假设您要**禁止**水平制表符、换行符、回车符和[其他与 匹配的*空白*`\s`](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)字符，并且只允许自由指定空格（ASCII 32）。

具有上述假设的 BNF 文法为：

```
<DIGIT>  ::= "0" | "1" | "2" | "3" | "4" | "5" | "6" | "7" | "8" | "9"
<NUMBER> ::= <DIGIT> {8}
<SPACE>  ::= " "
<TOKEN>  ::= <SPACE>* <NUMBER> <SPACE>*
<LIST>   ::= <TOKEN> ( "," <TOKEN> )* [ "," <SPACE>* ] 
```

有了上面的语法，就很容易写出正则解法：

```
var regex = /^ *\d{8} *(?:, *\d{8} *)*(?:, *)?$/; 
```

### 描述不明确

如建议的那样，您应该为输入指定语法，而不是显示要匹配的字符串的示例。示例可能无法涵盖所有​​情况，回答者通常会假设“不关心”或对示例中未说明的情况做出一些假设。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:03:37.500

删除可选逗号有帮助吗？

```
var validate_commas = /^(\s*\d{8}\s*)(,\s*\d{8}\s*)*,?$/; 
```

如果没有更清晰的信息，这是不做更多假设就可以做到的最好的方法……例如，是否永远只有一个数字而没有逗号？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T11:57:12.370

这应该工作

```
var validate_commas = /^(\s*\d{8}\s*(?:$|,\s*))*$/; 
```

它将采用一个或多个 8 个数字字符的实例，后跟字符串结尾或另一个逗号。

或者，如果您不希望表达式匹配空行，请将最后一个量词更改为一个或多个字符：+

```
var validate_commas = /^(\s*\d{8}\s*(?:$|,\s*))+$/; 
```

将在以下输入上返回**true ：**

```
12345678,12345678,12345678
*space*12345678 , 12345678 , 12345678 , 12345678
12345678,12345678,*space*
12345678
*space*12345678,
12345678, 
```

将在以下输入上返回**false ：**

```
1234567812345678
sdsdsfsd
12345678, 12345678 12345678 
```

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T12:09:29.083

你可以尝试这样的事情：

```
var validate_commas = /^\s*\d{8}(\s*,\s*(?:\d{8})?)*$/; 
```

就像其他建议一样，除了它使附加数字可选，因此允许`12345678,`等。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-05T11:01:57.360

你的意思是逗号在数字之间不是可选的？

试试这个：

```
var validate_commas = /^(\s*\d{8}\s*)(,\s*\d{8}\s*)*$/; 
```

顺便说一句，这不接受您的示例所做的空字符串。不确定你是否真的想要那个。

# php - 如何用 php 显示 sphinx 搜索结果？

> ID：15832157
> 
> 赞同：0
> 
> 时间：2013-04-05T10:59:19.327
> 
> 标签：php, mysql, search, sphinx

我在 localhost (wamp) 上安装了 sphinx search。例如，我想在一个简单的 html 表格中显示结果。我试图用 php 连接到 sphinx 搜索，我认为它做到了，但是当我打印结果时它是 0.... 但这不是真的。我不太明白在查询部分我需要输入我想要搜索的词吗？我尝试在命令窗口中搜索，效果很好，只是我不知道如何在网页上显示它。我想使用mysql。所以我的PHP看起来像这样：

```
require ( "sphinx/api/sphinxapi.php" );
$s = new SphinxClient;
$s->setServer("localhost", 9306);
$s->setMatchMode(SPH_MATCH_ANY);
$s->setMaxQueryTime(3);

$result = $s->query("test");

var_dump($result); 
```

这是我的迷你 conf 文件：

```
source src1
{
    type            = mysql

    sql_host        = localhost
    sql_user        = root
    sql_pass        =
    sql_db          = test
    sql_port        = 3306  # optional, default is 3306

    sql_query       = \
        SELECT id, group_id, UNIX_TIMESTAMP(date_added) AS date_added, title, content \
        FROM documents

    sql_attr_uint       = group_id
    sql_attr_timestamp  = date_added

    sql_query_info      = SELECT * FROM documents WHERE id=$id
}

index test1
{
    source          = src1
    path            = C:/wamp/www/sphinx/data/test1
    docinfo         = extern
    charset_type        = sbcs
}

indexer
{
    mem_limit       = 32M
}

searchd
{
    listen          = 9312
    listen          = 9306:mysql41
    log         = C:/wamp/www/sphinx/log/searchd.log
    query_log       = C:/wamp/www/sphinx/log/query.log
    read_timeout        = 5
    max_children        = 30
    pid_file        = C:/wamp/www/sphinx/log/searchd.pid
    max_matches     = 1000
    seamless_rotate     = 1
    preopen_indexes     = 1
    unlink_old      = 1
    workers         = threads # for RT to work
    binlog_path     = C:/wamp/www/sphinx/data
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:07:28.947

您的连接和查询可能如下所示：

```
$link = mysql_connect ( '127.0.0.1:9306', '', '' );
$db_selected = mysql_select_db ( 'main', $link ); 
```

然后通常是mysql查询（就像你通常做的那样）

```
$sql = "select * from main WHERE MATCH('$queryterm') order by date desc LIMIT 0,50";
$result = mysql_query ( $sql ); 
```

或者您可以根据需要检索一些元信息（有关元数据，请参阅 Sphinx 文档）

```
$metainfo = mysql_query('SHOW META');
while ( $meta = mysql_fetch_array ( $metainfo ) ) {
        $srchmeta[]=$meta;
//or whatever you want here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:02:40.653

> $s->setServer("localhost", 9306);

那是 mysql 协议端口 - sphinxQL。

在您的配置文件中，您可以使用 sphinxAPI 协议在 9312 上侦听 sphinx。因此，将您的 setServer 行更改为使用 9312

# android - 我如何使用 Android EffectFactory 类？

> ID：15832169
> 
> 赞同：10
> 
> 时间：2013-04-05T10:59:51.060
> 
> 标签：android, image-processing

我厌倦了开发一个带有图像处理的示例应用程序，在我的应用程序中我需要`color effects (Grayscale, sepia)`在我的位图上添加一些我参考了开发人员文档[Doc 1](http://developer.android.com/reference/android/media/effect/package-summary.html)和[Doc 2](http://developer.android.com/reference/android/media/effect/EffectFactory.html#EFFECT_VIGNETTE)，在本文档中没有实际示例，所以需要知道我们是否可以添加使用此类的 Vintage，Sepia 颜色效果，请任何人指导我，在此先感谢。

更新：

我试过这样

```
private EffectContext mEffectContext;

Bitmap b1 = BitmapFactory.decodeResource(getResources(),
                        R.drawable.sample);
EffectFactory effectFactory = mEffectContext.getFactory();
                Effect mEffect = effectFactory
                        .createEffect(EffectFactory.EFFECT_SEPIA); 
```

现在如何将 mEffect 设置为我的位图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-16T07:56:32.847

尝试：

```
Effect mEffect= effectFactory.createEffect(EffectFactory.EFFECT_SEPIA); 
```

然后使用 GLSurfaceView 来显示渲染效果，[这里](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.1_r1/com/example/android/mediafx/HelloEffects.java)有一个你需要的例子

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-07T12:32:55.870

`HelloEffects`您可以在中找到官方示例项目`android-sdk-windows\samples\android-17`

# java - GCM 规范 ID

> ID：15832171
> 
> 赞同：15
> 
> 时间：2013-04-05T10:59:52.547
> 
> 标签：java, android, push-notification, google-cloud-messaging

当 1 个设备 GCM 具有多个 regid 时，会返回规范 id 错误：

```
{"multicast_id":xxxx,"success":2,"failure":0,"canonical_ids":1,"results":[{"message_id":"xxxxx"},{"registration_id":"newest reg ID here","message_id":"xxxxxx"}]} 
```

所以它显示了 GCM 应该使用的最新 regid，但为什么不显示你应该删除的 regid（旧的）？我怎么知道旧的 regid 是什么以及我应该从数据库中删除哪个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T13:25:43.310

Eran 的回答是正确的，尽管我发现它对我来说仍然有点模糊。但是，多亏了他，我找到了解决方案。

说这是你的回应：

```
{
   "multicast_id":xxxxx,
   "success":7,
   "failure":0,
   "canonical_ids":2,
   "results":[
      {
         "message_id":"0:xxx%xxxxx"
      },
      {
         "message_id":"0:xxx%xxxxx"
      },
      {
         "registration_id":"MY_REG_ID_1",
         "message_id":"0:xxx%xxxxx"
      },
      {
         "message_id":"0:xxx%xxxxx"
      },
      {
         "message_id":"0:xxx%xxxxx"
      },
      {
         "registration_id":"MY_REG_ID_2",
         "message_id":"0:xxx%xxxxx"
      },
      {
         "message_id":"0:xxx%xxxxx"
      }
   ]
} 
```

如您所见，7 条消息中有 2 条是重复的。

这是我向服务器发送消息的方式：

```
$tokenResult = mysql_query("SELECT reg_ids FROM table_with_regids"); //
$i = 0;
while($row = mysql_fetch_array($tokenResult)) {

     $registrationIDs[$i] = $row['reg_ids'];
     $i++;
} 
```

**来自 Eran 的回答：**

> 由于您发送的每个请求都会收到来自 Google 的响应，因此您应该知道在触发此响应的请求中向 Google 发送了哪些注册 ID。您必须删除的旧注册 ID 是该请求中的第二个注册 ID。

这意味着数组**$registrationIDs[]的索引****2**和**5**应替换为**MY_REG_ID_1**和**MY_REG_ID_2**。

 ******最后检查双重值并删除确切的重复项。结果应该是一个包含 5 个 regid 的数组（或直接从数组中删除该索引，而不是替换为 MY_REG_ID_#）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T12:18:05.507

您包含的 GCM 响应表明您向两个注册 ID 发送了消息。在 GCM 服务中成功接收到两条消息。仅对于第二条消息，您才获得了规范的注册 ID。

由于您发送的每个请求都会收到来自 Google 的响应，因此您应该知道在触发此响应的请求中向 Google 发送了哪些注册 ID。您必须删除的旧注册 ID 是该请求中的第二个注册 ID。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-23T08:52:52.680

```
<?php

//ASSUME gcm_registration_table field
// id || registration_id || user_id || created_at || updated_at

// FIND CANONICAL IDS POSITION
function CanonicalIdPosition($gcm_response)
{
    $c_ids = array();
    foreach ($gcm_response['results'] as $k => $val) {
        if (isset($val['registration_id'])) {
            $c_ids[] = $k;
        }
    }
    if ($c_ids) {
        return $c_ids;
    } else {
        return false;
    }
}

// Find Duplicate registration Ids from Server Matchind to index position
function DuplicateRegIdFromRegistrationTable($canonical_ids)
{

    DB::query("SELECT registration_id FROM gcm_registration_table");
    $results = DB::fetch_assoc_all();
    $duplicate_reg_val = array();

// Match Position and Find Value
    foreach ($results as $key => $val) {
        if (in_array($key, $canonical_ids)) {
            $duplicate_reg_val[] = $val['registration_id'];
        }
    }

    return $duplicate_reg_val;
}

// update existing Duplicate registration id with New Canonical registration ids
function UpdateDuplicateRegIds($duplicateVal)
{

    foreach ($duplicateVal as $val) {
        $sql = "UPDATE gcm_registration_table SET registration_id = {$val} WHERE registration_id ={$val}";
// Some Yours Code...
    }
}

// Method to send Notification to GCM Server
function SendGcmNotification($registatoin_ids_from_table, $message, $gcm_api_key, $dry_run = false)
{

// Set POST variables
    $url = 'https://android.googleapis.com/gcm/send';

    $fields = array(
        'registration_ids' => $registatoin_ids,
        'data' => $message,
        'dry_run' => $dry_run
    );

    $headers = array(
        'Authorization: key=' . $gcm_api_key,
        'Content-Type: application/json'
    );

//print_r($headers);
// Open connection
    if (!class_exists('curl_init')) {
        $ch = curl_init();
    } else {
        echo "Class Doesnot Exist";
        exit();
    }

// Set the url, number of POST vars, POST data
    curl_setopt($ch, CURLOPT_URL, $url);

    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

// Disabling SSL Certificate support temporarly
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($fields));

// Execute post
    $result = curl_exec($ch);

    if ($result === FALSE) {

        die('Curl failed: ' . curl_error($ch));
        return false;
    } else {
        return json_decode($result, true);
    }

// Close connection
    curl_close($ch);
}

//This Wont Send Notification to Device but gives you response to remove canonical ids
$gcm_response = SendGcmNotification($registatoin_ids_from_table, $message, $gcm_api_key, $dry_run = true);

$canonical_ids = CanonicalIdPosition($gcm_response);

if ($canonical_ids) {
    $duplicate_ids = DuplicateRegIdFromRegistrationTable($canonical_ids);
    UpdateDuplicateRegIds($duplicate_ids);
}

// Finally Get updated Registration Ids from table and send to GCM Server with
$gcm_response = SendGcmNotification($registatoin_ids_from_table, $message, $gcm_api_key, $dry_run = false); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-20T13:51:28.913

```
<?php

// API access key from Google API's Console

define( 'API_ACCESS_KEY', 'AIzaSyCa1vcyOF6UhM6cgvnwARBafmdl8haQo1Y' );
$con=mysqli_connect("localhost","root","","bloodbank_master");
$response = array();

$q="SELECT `regester_id` FROM  `gcm`";
$result1 = $con->query($q) ;
if ($result1->num_rows > 0) {

$response["users"] = array();

while ($row = $result1->fetch_array(MYSQLI_BOTH)) {
    $user = array();
    $registrationIds = array($row[0]);

    $msg = array
    (
    'message'   => 'hieee',
    'title'     => 'Blood Bank',
    'subtitle'  => 'This is a subtitle. subtitle',
    'tickerText'    => 'Ticker text here...Ticker text here...Ticker text here',
    'vibrate'   => 1,
    'sound'     => 1,
    'largeIcon' => 'large_icon',
    'smallIcon' => 'small_icon'
    );

    $fields = array
    (
    'registration_ids'  => $registrationIds,
    'data'          => $msg
    );

    $headers = array
    (
    'Authorization: key=' . API_ACCESS_KEY,
    'Content-Type: application/json'
    );

    $ch = curl_init();
    curl_setopt( $ch,CURLOPT_URL, 'https://android.googleapis.com/gcm/send' );
    curl_setopt( $ch,CURLOPT_POST, true );
    curl_setopt( $ch,CURLOPT_HTTPHEADER, $headers );
    curl_setopt( $ch,CURLOPT_RETURNTRANSFER, true );
    curl_setopt( $ch,CURLOPT_SSL_VERIFYPEER, false );
    curl_setopt( $ch,CURLOPT_POSTFIELDS, json_encode( $fields ) );
    $result = curl_exec($ch );
    curl_close( $ch );

    echo $result;
    }
} 
else {
    $response["success"] = 0;
    $response["message"] = "No users found";
}
?> 
```******

# c# - SqlCommand 读取一个值

> ID：15832173
> 
> 赞同：2
> 
> 时间：2013-04-05T11:00:09.347
> 
> 标签：c#, sql, sql-server, sqlcommand

我对从返回的值有疑问`SqlCommand`，我有以下代码：

```
string sqlSelect = "Select TOP 1 Quotation.SentToSupp as SentToSupp FROM Quotation JOIN Notifications ON Quotation.QuotationId = QuotationID ";

SqlCommand Comm = new SqlCommand(sqlSelect, this.Connection); 
```

`sqlSelect`查询选择第一个`DateTime`值。当我打电话给我时，`SqlCommand`我想得到这个值（只有一个值）。我添加了查询并且我的连接很好。

但我不知道如何获得我的`DateTime`价值......必须使用类似的东西`ExecuteReader`？

先感谢您！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T11:05:07.850

`ExecuteReader`工作，但需要更多的对象和更多的代码 - （一个`SqlDataReader`，调用读取和提取值）。相反，您可以简单地使用对象的[`ExecuteScalar`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)方法`SqlCommand`（它只返回结果集第一行的第一列）

```
string sqlSelect = "Select TOP 1 Quotation.SentToSupp as SentToSupp FROM ....";
SqlCommand Comm = new SqlCommand(sqlSelect, this.Connection);
object result = Comm.ExecuteScalar();
if(result != null)
   DateTime dtResult = Convert.ToDateTime(result); 
```

请注意，如果由于某种原因，返回的结果中没有记录，则`ExecuteScalar`可能会返回一个值`null`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T11:01:50.027

使用 SqlCommand.ExecuteScalar 方法 -*执行查询，并返回查询返回的结果集中第一行的第一列。其他列或行将被忽略。*

# arm - ARM NEON 计数比较结果

> ID：15832177
> 
> 赞同：0
> 
> 时间：2013-04-05T11:00:13.003
> 
> 标签：arm, simd, neon

我需要在`uint16x8_t`向量下进行一些并行比较，并根据它增加一些局部变量（计数器），例如 +8 增量，如果向量的所有元素比较为真。我实现了这个算法：

```
...
register int objects = 0;
uint16x8_t vcmp0,vobj;
uint32x2_t dobj;
register uint32_t temp0;
...
vobj = vreinterpretq_u16_u8(vcntq_u8(vreinterpretq_u8_u16(vcmp0))); 
vobj = vpaddlq_u8(vreinterpretq_u8_u16(vobj)); 
vobj = vreinterpretq_u16_u32(vpaddlq_u16(vobj)); 
vobj = vreinterpretq_u16_u64(vpaddlq_u32(vreinterpretq_u32_u16(vobj))); 
dobj = vmovn_u64(vreinterpretq_u64_u16(vobj));
dobj = vreinterpret_u32_u64(vpaddl_u32(dobj));
    __asm__ __volatile__
            (
             "vmov.u32  %[temp0] , %[dobj][0]               \n\t"
             "add  %[objects] ,%[objects], %[temp0], asr #4               \n\t"
             : [dobj]"+w"(dobj), [temp0]"=r"(temp0), [objects]"+r"(objects)
             :
             : "memory"
            );

... 
```

向量`vcmp0`包含比较的结果`vobj`，`dobj`用于计算，`objects`是计数器。我正在使用设置位计数和成对相加进行计算。有没有更快的方法来完成这项工作？

# qt - 我在哪里可以找到 QtMobility 包进行下载？

> ID：15832178
> 
> 赞同：2
> 
> 时间：2013-04-05T11:00:18.617
> 
> 标签：qt, qt-mobility

我找不到 QtMobilty 的包，我在互联网上找到的所有链接都无效。能否请你帮忙？我需要在 Windows 下安装它（我需要 QtConnectivity 库）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:02:54.560

你试过[QtMobility@gitorious](http://qt.gitorious.org/qt-mobility)吗？

虽然你不能真正“安装”它——你必须构建它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T11:09:43.360

[http://qt.digia.com/Product/Qt-Add-Ons/Mobility/](http://qt.digia.com/Product/Qt-Add-Ons/Mobility/)

> Qt Mobility 作为诺基亚设备的 Qt SDK 的一部分提供。[在这里](http://www.developer.nokia.com/Develop/Qt/Getting_started/)得到它。

# ruby - Ruby 字符串操作，删除前 3 个字符并将它们添加到字符串的末尾

> ID：15832179
> 
> 赞同：3
> 
> 时间：2013-04-05T11:00:26.100
> 
> 标签：ruby

```
mystring = "svn-myapplication" or mystring = "git-myapplication" 
```

我想要的输出：

```
mystring = "myapplications(svn)"
mystring = "myapplication(git)" 
```

**问题：**字符串的前 3 个字符应移至最后一个带括号的字符，并且应删除“-”。

我试图做这样的事情：

`mystring.gsub('svn-','')+"(svn)"`但 svn 可能是 git，所以我想使用前三个字符移动到以“-”结尾并用括号括起来

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T11:09:36.750

带有组的正则表达式会很好用：

`mystring.gsub(/^([a-z]+)-(\w+)/, '\2(\1)')`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T11:09:04.903

您可以使用 e 正则表达式，但最简单的解决方案如下

```
mystring = "svn-myapplication" 
puts "#{mystring[4..-1]}(#{mystring[0..2]})" 
```

给

```
myapplication(svn) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-05T11:13:35.967

让摇滚吧:)

```
mystring = "svn-myapplication"
mystring.split('-').rotate.join('(') + ')' 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-05T11:05:02.797

您可以为此使用[`[]`Ruby 的 String 类的方法](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-5B-5D)：

```
mystring = "svn-myapplication"
mystring = "#{mystring[4..-1]}(#{mystring[0,3]})" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-05T11:05:45.447

你可以在 irb 中尝试这样的事情

```
1.9.3-p362 :001 > mystring = "svn-myapplication"

1.9.3-p362 :002 > mystring.gsub(mystring[0,3]+'-','')+(mystring[0,3]) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-05T11:17:43.723

我打算提交这个，但至少我可以看到如何做得更好！

```
def test(s = '')
  match = /\w+-/.match(s).to_s
  match = match[0..-2]
  s.gsub!(/\w+-/, '')
  s << "(#{match})"
end # of test 
```

# php - php 脚本在 Internet Explorer 和 Firefox 中不起作用

> ID：15832180
> 
> 赞同：1
> 
> 时间：2013-04-05T11:00:33.480
> 
> 标签：php, html, mysql

我在网页上有一个按钮，允许用户将该页面上的视频添加到他们的收藏夹列表中。这个按钮后面是一个表单和一些 php.ini 文件。PHP 代码使用会话变量来检索用户名。此信息用于从数据库中获取相关的用户 ID 并将其值存储在变量中。使用表单中的输入值，可以从视频数据库表中检索与相关视频相关的元组，并将视频标题和 URL 属性的值存储在变量中。然后代码检查用户是否已经将视频添加为“收藏夹”。检查收藏夹数据库实体中是否包含用户 ID 和视频 ID 的元组。如果两者都包含在数据库表的单行中，则用户已经添加了视频并收到了通知。否则，用户 id，视频 ID、视频标题和 URL 被插入到收藏夹数据库实体中，并通知用户该视频已添加，这一切在 chrome 或 safari 中都可以正常工作，但在 ie 或 firefox 中没有任何作用。数据库已更新，消息仅在 Chrome 和 safari 中显示。我已附上代码，请注意会话已在网页上的早期代码中启动。任何帮助将不胜感激。

```
 <div id="addfav">
    <form action="python.php" method="post">
        <input name="add" src="images/add.png" type="image"
        value="3">
    </form>
    <?php 
        $user=$_SESSION['user'];

        if ( isset( $_POST['add'] ) )
        {
            $vid = $_POST["add"];
            $sql = "SELECT * FROM `users` WHERE username = '$user'";
            $result = mysql_query($sql) or die(mysql_error());
            $row = mysql_fetch_array($result);
            $uid= $row['user_id'];

            $sql = "SELECT * FROM `Video` WHERE Video_id = '$vid'";
            $result = mysql_query($sql) or die(mysql_error());
            $row = mysql_fetch_array($result);
            $url=$row['URL'];
            $title=$row['Title'];

            $check = mysql_query("SELECT * FROM `favourites` WHERE Uid = '$uid' AND vid_id = '$vid'") or die (mysql_error());
            $r = mysql_num_rows($check);

            if ($r>=1)
            {
                echo "already added to favourites";

                echo '<script type="text/javascript">window.alert("Already added to favourites")</script>';
                //'<span style="color: red;" />Already added to favourites </span>' ;   
            }

            else 
            {  
                mysql_query("INSERT INTO `favourites` (`Uid`,
                `vid_id`,`url`,`title`) VALUES ('$uid',
                '$vid','$url','$title')")or die(mysql_error());
                echo "Added to favourites"; 
            }
        }
    ?>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T11:04:08.900

（只是一个调试想法）尝试将您的输入图像更改为这样的隐藏元素：

```
<form action="python.php" method="post">
     <!-- I don't remove this, to keep the image shown-->
     <input name="addimg" src="images/add.png" type="image"  value="3">

     <input type='hidden' name='add' value='3' />
 </form> 
```

它现在有效吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:07:50.670

PHP 在服务器端运行。这意味着无论您使用什么浏览器，它都能按预期工作。如果 IE 和 Firefox 可以毫无问题地连接到您的网站，那么问题肯定来自您编写的 HTML 代码。我认为问题出在您的`form`标签内，因为我认为这不是标准的，您可以使用`GET`通知您的表单已提交的方法，或使用`hidden`指示它的输入。

PS我认为您的代码存在安全问题。（SQL 注入）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T11:08:24.393

当用户点击`<input type="image" />`浏览器时，将传递点击的坐标。Chrome 将发送三个值：

```
add.x = x_coord
add.y = y_coord
add = input_value (3 in your case) 
```

请注意，在 php 中，您可以使用 / 访问/`add.x`值`add.y`（请参阅用下划线替换的点）`$_POST["add_x"]``$_POST["add_y"]`

同时，IE 不会传递第三个值。这就是为什么你`if ( isset( $_POST['add'] ) )`永远不会返回真实的原因。选项是将视频 id 值放入某个隐藏字段并在其中使用其名称。您可以通过`var_dump($_POST);`在 php中轻松检查该行为

PS：

如果没有在 sql 查询中对它们进行清理，则永远不应使用在请求中收到的值。现在下面的代码对 sql 注入开放：

```
$sql = "SELECT * FROM `Video` WHERE Video_id = '$vid'"; 
```

[`mysql_real_escape_string`](http://www.php.net/manual/en/function.mysql-real-escape-string.php)在将值插入查询之前，您至少应该使用用户函数：

```
$sql = "SELECT * FROM `Video` WHERE Video_id = '".mysql_real_escape_string($vid)."'"; 
```

并查看上面链接的 php 手册页顶部的警告消息：不推荐使用 mysql_* 函数，您最好使用 PDO 或 mysqli 扩展。

# database - Postgres：可以在表连接期间过滤的查询

> ID：15832181
> 
> 赞同：1
> 
> 时间：2013-04-05T11:00:35.523
> 
> 标签：database, postgresql

我有一个 postgres 数据库，其中一张表上有重复的条目。我想显示 created_by 列

表格1

```
id | number
1  | 123
2  | 124
3  | 125
4  | 126 
```

表2

```
id | number | created_on
1  | 123    | 3/29
2  | 123    | 4/3
3  | 124    | 3/31
4  | 124    | 4/1 
```

表 2 上的数字是重复的。我想形成一个查询来列出以下内容：

```
id | number  | created_on
1  | 123     | 4/3
2  | 124     | 4/1 
```

对于重复条目，仅包含最新条目。我怎样才能形成那个 SQL 查询？

```
SELECT DISTINCT ON (Table1.number) Table1.id, Table2.number, Table2.create_on FROM Table1
  JOIN Table2 ON Table1.number=Table2.number
ORDER BY Table2.create_on; 
```

实际上，我尝试将 'DISTINCT ON' 和 'ORDER BY' 放在一个查询中（使用 JOIN）它给了我以下错误：

```
SELECT DISTINCT ON expressions must match initial ORDER BY expressions 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:12:26.890

正如您在评论中所说：`created_on=date_trunc('day', now())`，所以该字段的数据类型`created_on`是`timestamp`。这是您可以执行的操作：

```
SELECT table_1.id, table_1.number, max(created_on) as created_on
  FROM table_1
  inner join table_2 using(number)
  group by table_1.id, table_1.number 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:18:12.290

中的列`DISTINCT ON()`必须是`ORDER BY`查询中的第一个列，如果您想要最新的 created_on 日期，您应该订购`created_on DESC`

```
SELECT DISTINCT ON (Table1.number) Table1.id, Table2.number, Table2.created_on 
FROM Table1
JOIN Table2 
  ON Table1.number=Table2.number
ORDER BY Table1.number,Table2.created_on DESC; 
```

[http://sqlfiddle.com/#!12/5538a/2](http://sqlfiddle.com/#!12/5538a/2)

# message-queue - Beanstalkd 到 ZeroMQ：是否可以以相同的方式分配工作？

> ID：15832188
> 
> 赞同：1
> 
> 时间：2013-04-05T11:01:00.510
> 
> 标签：message-queue, distributed-computing, zeromq, beanstalkd

一个常见的 beanstalkd 工作流程是让许多工作人员在队列/管道上侦听作业，在处理该作业时**锁定**该作业，然后**删除**该作业，以便其他工作人员无法重新处理它。如果作业失败（例如，资源无法完成处理），该作业可以滑回队列中，让另一个工人接手该作业。

ZeroMQ 可以使用这种方法吗？例如，使用 pub/sub 模型可以多个订阅者接收同一个作业并同时处理它吗？push/pull 或 req/rep 会提供类似的设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T08:34:07.733

我确信 ZeroMQ 可以为你提供这个。但是请记住，ZeroMQ 并不是真正的队列。这是一个高级网络库。自然，使用提供的原语，您可以按照您的描述进行操作。

如果您不介意多次完成相同的工作，您的具体案例似乎可以实现为发布/订阅系统。我推荐阅读[ZeroMQ 指南](http://zguide.zeromq.org/page%3aall)，尤其是第 5 章。

尽管我确信您可以使用 ZeroMQ 执行您所描述的操作，但我会首先搜索一个已经执行此操作的队列。

# javascript - 如何使用jquery访问一行的数据

> ID：15832198
> 
> 赞同：-1
> 
> 时间：2013-04-05T11:01:34.647
> 
> 标签：javascript, jquery, row

我有下表构成页面的标题：

```
<table class="wpHeaderTable">
    <tr>
        <td style="width:10%;"></td>
        <td style="width:10%;"></td>
        <td style="width:10%;text-align:center;color:#FFFFFF;">data1</td>
        <td style="width:auto;text-align:center;color:#FFFFFF;">
            <a href="<s:url action=" ViewAppeals "/>" onclick="check" style="color:#FFFFF;text-decoration:none;">View Appeals</a>
        </td>
        <td style="width:10%;text-align:center;color:#FFFFFF;">data3</td>
        <td style="width:10%;text-align:center;color:#FFFFFF;">data4</td>
        <td style="width:10%;text-align:center;color:#FFFFFF;">data5</td>
        <td style="width:10%;text-align:center;color:#FFFFFF;">data6</td>
        <td style="width:10%;text-align:center;color:#FFFFFF;">data7</td>
        <td style="width:10%;"></td>
    </tr>
</table> 
```

加载该页面时，`ViewAppeals`该表的数据应具有黄色背景色，其他数据应具有蓝色背景色。

`ViewAppeals`数据是一个链接，单击该链接将重定向到另一个页面。

我怎样才能做到这一点？

到目前为止，我已经尝试过这个脚本：

```
$(document).ready(function(){
    $('tr').click(function(){
        $('tr td').css({ 'color' : 'none'});
        $('td', this).css({ 'color' : '#CCC' });
      }); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:38:31.690

首先，将`id`属性分配给`<tr>`

```
<tr id="someid">

</div> 
```

然后选择孩子`<td>`

```
$(document).ready(function(){
    $('tr#someid').click(function(){
        $("tr td").css({ 'color' : 'none'});
        $(this + " > td").css({ 'color' : '#CCC' });
      }); 
}); 
```

您可以使用`>`选择器选择被点击元素的子元素（在本例中为`<tr>`）

# sql - 使用表别名删除 SQLite

> ID：15832199
> 
> 赞同：2
> 
> 时间：2013-04-05T11:01:36.263
> 
> 标签：sql, sqlite, relational-database

我正在尝试为 SQLite 中的表命名，例如通过以下命令：（它来自我正在阅读的书“Ramakrishnan 的数据库管理系统”）

```
DELETE FROM Students S WHERE S.sid=12546 
```

此代码给出了语法错误。如果没有别名，以下代码可以工作：

```
DELETE FROM Students WHERE sid=12546 
```

但是，如果我想给表起别名，我该怎么办？任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:07:52.753

该`DELETE`语句对单个表进行操作，并且不使用表别名。所以你将不得不使用你的查询：

```
DELETE FROM Students WHERE sid=12546 
```

**更新：** SQLite 显然不支持使用 delete 语句连接，正如您在[Syntax diagrams](http://www.sqlite.org/syntaxdiagrams.html#delete-stmt)中看到的那样。简而言之，在 SQLite 中，一个`DELETE`命令只从一张表中删除。所以混叠是没有用的

# c# - 从另一个 .asmx Web 服务调用 .asmx Web 服务

> ID：15832201
> 
> 赞同：0
> 
> 时间：2013-04-05T11:01:41.663
> 
> 标签：c#, web-services

我们可以从另一个 Web 服务调用一个 Web 服务吗？

我尝试添加网络参考并得到以下错误

```
System.Configuration.ConfigurationErrorsException was caught
  Message=The current configuration system does not support user-scoped settings.
  Source=System
  BareMessage=The current configuration system does not support user-scoped settings.
  Line=0
  StackTrace:
       at System.Configuration.LocalFileSettingsProvider.GetPropertyValues(SettingsContext context, SettingsPropertyCollection properties)
       at System.Configuration.SettingsBase.GetPropertiesFromProvider(SettingsProvider provider)
       at System.Configuration.SettingsBase.GetPropertyValueByName(String propertyName)
       at System.Configuration.SettingsBase.get_Item(String propertyName)
       at System.Configuration.ApplicationSettingsBase.GetPropertyValue(String propertyName)
       at System.Configuration.ApplicationSettingsBase.get_Item(String propertyName) 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:08:40.077

提取方法以分离类。并从该类访问那些常用方法。因此这两个服务都可以共享您想要的方法。

# java - java中arraylist的for循环中的“if”或“where”？

> ID：15832202
> 
> 赞同：2
> 
> 时间：2013-04-05T11:01:46.150
> 
> 标签：java, for-loop, arraylist, conditional-statements

如果问题有点含糊，我很抱歉，所以我会尝试解释一下。

我得到了这个代码：

```
 public String toString()
{
    String s = "text.\n";

    for (Klus k : alleKlussen)
    {
        s += k.toString() + ".\n";
    }
    return s;
} 
```

但我想为不同的条件制作不同的循环。例如，“Klus”有几个变量，例如：状态、日期等。

我对java还不是很有经验，但是有没有可能做这样的事情：

```
for (Klus k : alleKlussen; status = "completed")
{..} 
```

我知道这是错误的，但我希望它显示状态为“已完成”的所有“Klus”对象以及状态为“未完成”的所有“Klus”对象。

谢谢，如果有什么不清楚的地方或者我用了错误的词，请告诉我。

编辑：

它应该是这样的：

```
if (k.getStatus().equals("completed"){
  String s = "completed ones \n"
  s += k.toString() + ".\n"; //get all completed ones
}
if (k.getStatus().equals("uncompleted"){
      String s = "uncompleted ones \n"
      s += k.toString() + ".\n"; //get all uncompleted ones
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T11:03:52.473

只需在`for()`循环内添加条件：

```
for (Klus k : alleKlussen) {
    if (k.getStatus().equals("completed")) {
        s += k.toString() + ".\n";
    }
} 
```

* * *

从问题中的附加信息来看，似乎是以下内容：

```
String completed = "completed ones \n";
String uncompleted = "uncompleted ones \n";

for (Klus k : alleKlussen) {

    if (k.getStatus().equals("completed")) {
      completed += k.toString() + ".\n"; //get all completed ones
    }
    else if (k.getStatus().equals("uncompleted")) {
       uncompleted += k.toString() + ".\n"; //get all uncompleted ones
    }
} 
```

您还应该考虑使用[StringBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)来创建结果字符串，从而减少内存开销。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T11:08:17.367

条件多的可以用switch，方便阅读

对于（Klus k : alleKlussen）{

```
switch(k.getStatus()){
       case "completed": ....
                          break;

       case "uncompleted": ....
                            break;

        default: ...
} 
```

}

请注意，仅在 Java 7 中支持使用字符串文字进行[切换。](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T11:04:28.423

为什么不只做标准的 if 条件，例如：

```
if ("".equals(k.getStatus())) {

} else if ("completed".equals(k.getStatus())) {

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T11:05:07.767

```
 Use this - this toString will print only Klus are completed.
 public String toString()
    {
        String s = "text.\n";

        for (Klus k : alleKlussen)
        {
            if("completed".equals(k.getStatus ()))
            s += k.toString() + ".\n";
        }
        return s;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T11:22:38.743

要在完成的后面追加未完成的，试试这个（我建议使用枚举，但欢迎您坚持使用字符串。但这仅适用于 Java SE 7！）：

状态.java：

```
// Makes switches easy to use and String typos are impossible
public enum State { COMPLETE, INCOMPLETE }; 
```

用枚举替换您当前的字符串“状态”，如下所示：

Klus:java

```
public class Klus {
   private State state;
   ...
   public State getState() { return this.state; }
   ...
} 
```

现在在 for 循环中的 switch 中使用它。使用两个字符串，一个代表完整，一个代表不完整。最后附加它们。（注意使用**StringBuilder**而不是**str +=...**）

包含您的 toString() 的类：

```
public String toString() {
    StringBuilder complete = new StringBuilder("completed ones \n"), 
                  uncompleted = new StringBuilder("uncompleted ones \n");
    for(Klus k : alleKlussen) {
       switch(k.getStatus())
       case COMPLETE:
          complete.append(k.toString()).append(".\n"); break;
       case INCOMPLETE:
          uncompleted.append(k.toString()).append(".\n"); break;
       default:
       }
    }

    complete.append(uncompleted.toString();

    return complete.toString();
} 
```

# c - 使用 openssl 从 tls 证书中有效获取公用名

> ID：15832204
> 
> 赞同：3
> 
> 时间：2013-04-05T11:01:48.703
> 
> 标签：c, ssl, openssl

我有一个指向 TLS 证书的指针，我需要获取 commonName 属性；

我首先使用函数 d2i_X509 创建 X509 对象，例如；

```
x = d2i_X509(NULL, &p, certificate_lenght);
if (x == NULL)
    return https_failure; 
```

比我调用函数 X509_NAME_get_text_by_NID 来获取 commonName

```
X509_NAME_get_text_by_NID(X509_get_subject_name(x),NID_commonName, hc->https_domain_name, 256); 
```

它对我有用，但我担心性能。我认为，当我只需要 commonName 时，所有证书对象都会被解析。有没有更好的方法可以更高效地获取 commonName 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T12:15:42.720

使用 OpenSSL 高级 API 没有更有效的方法。如果您真的对尽可能获得最佳性能感兴趣，则需要使用低级 ASN.1 解析 API。但请记住，如果不完全解析证书，就无法完全验证证书，因此我会担心仅提取 CN 的安全隐患。

# android-ndk - 应用程序在 avformat_find_stream_info 崩溃

> ID：15832208
> 
> 赞同：0
> 
> 时间：2013-04-05T11:02:05.390
> 
> 标签：android-ndk, ffmpeg

我编写了一个本机方法来简单地获取视频的编解码器 ID，但我的应用程序从未通过此行 'avformat_find_stream_info(pFormatCtx, NULL)' 这是我的本机方法：

```
int get_video_info(JNIEnv *env, jobject thiz, jstring strInFile){
AVFormatContext *pFmtCtx;
AVCodecContext *pCCtx;
AVCodec *pCd;
AVFrame *picture;
int i, videoStream = -1, error = 0;

const char *in_file_name = (*env)->GetStringUTFChars(env, strInFile, NULL);

av_register_all();

LOGI(1, "HERE 0 %s", in_file_name); // app passed here

/*Open video file*/
pFmtCtx = avformat_alloc_context();
if((error=avformat_open_input(&pFmtCtx, in_file_name, NULL, NULL)) < 0){
    LOGE(1, "Couldn't open file, error-code: %d with file url: %s", error, in_file_name);
    return -1;
}

LOGI(1, "HERE 1 Duration: %d", pFmtCtx->duration); //app passed here

/*Retrieve the stream information, APP CRASH RIGHT HERE*/
if(avformat_find_stream_info(pFormatCtx, NULL)<0){
    LOGE(1, "Couldn't retrieve stream information");
    avformat_free_context(pFmtCtx);
    return -1; // Couldn’t find stream information
}

LOGI(1, "HERE 2");

//Find the first video stream
videoStream=-1;
for(i=0; i<pFormatCtx->nb_streams; i++) {
    if(pFormatCtx->streams[i]->codec->codec_type==AVMEDIA_TYPE_VIDEO){
        videoStream=i;
        break;
    }
}

if(videoStream==-1){
    avformat_free_context(pFmtCtx);
    LOGE(1, "Didn't find a video stream");
    return -1; // Didn’t find a video stream
}

// Get a pointer to the codec context for the video stream
pCCtx=pFormatCtx->streams[videoStream]->codec;

avformat_free_context(pFmtCtx);
(*env)->ReleaseStringUTFChars(env, strInFile, in_file_name);
return pCCtx->codec_id;
} 
```

问题：为什么我总是找不到这样的流信息？请帮我修复它。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:27:50.117

您在代码中的多个位置使用 pFormatCtx （未初始化）而不是 pFmtCtx ！

您可以`pFormatCtx = pFmtCtx`在 avformat_alloc_context() 之后设置：

# c# - 中继器标题模板中的下拉列表不起作用

> ID：15832213
> 
> 赞同：0
> 
> 时间：2013-04-05T11:02:26.463
> 
> 标签：c#, repeater, code-behind, html-select

我已经设置了我认为正确的标记和代码，以便在转发器的标题模板中放置一个下拉列表，但由于某种原因，它无法正常工作。最初我看到下拉列表，但是当我在列表中进行选择时，OnSelectedIndexChanged 事件似乎没有触发使用添加的方法来处理它，我无法弄清楚我错过了什么，因为我认为这个这是一件简单的事情。

以下是标记的要点：

```
<asp:Repeater ID="repNewsItems" runat="server">
<HeaderTemplate>
        <asp:DropDownList ID="ddDateSortCategories" runat="server" Width="200" AutoPostBack="true" OnSelectedIndexChanged="ddDateSortCategories_SelectedIndexChanged1" CssClass="mergersDropDown">
            <asp:ListItem Selected="True" Text="Most Recent" Value="newest"></asp:ListItem>
            <asp:ListItem Text="Oldest" Value="oldest"></asp:ListItem>
        </asp:DropDownList>
</HeaderTemplate>

<ItemTemplate>
    // other stuff 
```

以下是背后代码的核心内容：

```
 [MacroParameter(MacroParameterType.Number)]
    public int PageId { get; set; }

    public string _category = "";

    protected void Page_Load(object sender, EventArgs e)
    {
        if (repNewsItems == null) return;

        _category = Request.QueryString["category"];

        repNewsItems.ItemDataBound += new RepeaterItemEventHandler(repNewsItems_ItemDataBound);

        repNewsItems.DataSource = (string.IsNullOrEmpty(NewsNodeIds))
                                        ? GetNewsItemsForYear(NewsYearToDisplay, _category)
                                        : DaNews;
        repNewsItems.DataBind();
    }

    protected void ddDateSortCategories_SelectedIndexChanged1(object sender, EventArgs e)
    {
        DropDownList ddl = (DropDownList)(sender);
        Response.Redirect(umbraco.library.NiceUrl(PageId) + "?category=" + Server.UrlEncode(ddl.SelectedValue.ToString()));
    }

    void repNewsItems_ItemDataBound(object sender, RepeaterItemEventArgs e)
    { 
        if (e.Item.ItemType == ListItemType.Header)
        {
            DropDownList ddl = (DropDownList)e.Item.FindControl("ddDateSortCategories");
            if (!IsPostBack)
            {
                if (ddl != null)
                {
                    ddl.DataSource = GetNewsItemsForYear(DocumentTypes.NewsItem.GetMostRecentYear(NewsCategoryToDisplay).ToString(), _category);
                    ddl.DataBind();
                }
            }
            if (!String.IsNullOrEmpty((Request.QueryString["category"]))) ddl.Text = Request.QueryString["category"];
        }
        // other stuff
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:54:05.847

我发现上面的代码有两个问题。首先，我错误地将我的列表项绑定到我的下拉列表，我的意思是拥有不会更改的硬编码列表项。不过，这并没有解决我的主要问题。做的是我忘记包装这些：

```
repNewsItems.ItemDataBound += new RepeaterItemEventHandler(repNewsItems_ItemDataBound);
repNewsItems.DataSource = (string.IsNullOrEmpty(NewsNodeIds))
                                    ? GetNewsItemsForYear(NewsYearToDisplay, _category)
                                    : DaNews;
repNewsItems.DataBind(); 
```

在一个

```
if (!IsPostBack) {} 
```

条件语句。这意味着每次回发事件触发时，它都会进入 Page_Load 方法，将整个转发器重新绑定到其初始状态，并且永远不会让它传递给我的 SelectedIndexChanged 事件处理程序 ddDateSortCategories_SelectedIndexChanged1。

# dart - 如何在捕获模式下监听 keyUp 事件？

> ID：15832219
> 
> 赞同：2
> 
> 时间：2013-04-05T11:02:40.223
> 
> 标签：dart, dart-html

我正在查看 Dart API 以找到一种使用捕获模式收听 KeyUp 事件的方法。但是有了这个新的流系统，就没有参数来指定捕获了：

```
document.body.onKeyUp.listen(callback); // where's the old "useCapture" parameter? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T11:10:22.853

要使用 Streams 实现相同的目标，这里有一个示例：

```
Element.keyUpEvent.forTarget(document.body, useCapture: true).listen((e) {
  // Do your stuff.
  print('Here we go');
}); 
```

我们上面使用的方法，使用捕获模式为您创建一个流。Stream 接口（`listen()`方法）非常通用，因此无法拥有您正在寻找的特定功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-08T07:35:39.030

替代方法：

```
GlobalEventHandlers.clickEvent.forTarget(dom.document, useCapture: true).listen((e) {
  // Do your stuff.
}); 
```

# javascript - HTML 表单的自动完成

> ID：15832222
> 
> 赞同：6
> 
> 时间：2013-04-05T11:02:44.433
> 
> 标签：javascript, jquery, html, autofill

我正在寻找有关表单字段自动完成的答案。

如何自动填写常见输入，如名字、姓氏、地址..？

在 Chrome 中，如果用户有 Google 个人资料，则可以自动填充字段。

看来 IE 提供了类似的功能：

（来自 MS 网站）“您可以使用 AutoComplete 存储您在 Web 表单字段中键入的密码和其他信息。当您打开 AutoComplete 时，Internet Explorer 将自动填写您在 Web 表单中经常键入的字段，例如您的姓名和地址。”

有什么方法可以确保自动填充发生，跨浏览器，使用 HTML/JS？

![在此处输入图像描述](https://i.stack.imgur.com/0J0ip.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2017-01-31T18:50:42.887

这个问题已经很老了，但我有**2017 年的更新答案**！

**现在有一个关于如何命名标签以触发自动完成*的*跨浏览器标准。`<input>`**

[这是官方***当前 WHATWG HTML 标准***的链接，用于启用自动完成功能。](https://html.spec.whatwg.org/multipage/forms.html#attr-fe-autocomplete)

Google为开发对移动设备友好的 Web 应用程序编写了一个[非常好的指南。](https://developers.google.com/web/fundamentals/design-and-ui/input/forms/#recommended_input_name_and_autocomplete_attribute_values)他们有一节介绍如何命名表单上的输入以轻松使用自动填充。尽管它是为移动设备编写的，但这适用于桌面和移动设备！

# 如何在 HTML 表单上启用自动完成

以下是有关如何启用自动完成功能的一些要点：

*   **将 a`<label>`用于所有`<input>`字段**
*   **`autocomplete`**为您的标签**添加一个****属性**`<input>`并使用本[指南](https://developers.google.com/web/fundamentals/design-and-ui/input/forms/#recommended_input_name_and_autocomplete_attribute_values)进行填写。
*   **为所有标签正确命名您的`name`和`autocomplete`属性`<input>`**
*   ***示例***：

    ```
    <label for="frmNameA">Name</label>
    <input type="text" name="name" id="frmNameA"
    placeholder="Full name" required autocomplete="name">

    <label for="frmEmailA">Email</label>
    <input type="email" name="email" id="frmEmailA"
    placeholder="name@example.com" required autocomplete="email">

    <!-- note that "emailC" will not be autocompleted -->
    <label for="frmEmailC">Confirm Email</label>
    <input type="email" name="emailC" id="frmEmailC"
    placeholder="name@example.com" required autocomplete="email">

    <label for="frmPhoneNumA">Phone</label>
    <input type="tel" name="phone" id="frmPhoneNumA"
    placeholder="+1-555-555-1212" required autocomplete="tel"> 
    ```

# 如何命名您的`<input>`标签

为了触发自动完成，请确保正确命名标签中的`name`和`autocomplete`属性。`<input>`这将自动允许在表单上自动完成。确保也有一个`<label>`！也可以在[此处](https://developers.google.com/web/fundamentals/design-and-ui/input/forms/#recommended_input_name_and_autocomplete_attribute_values)找到此信息。

以下是如何命名您的输入：

*   *姓名*
    *   将这些中的任何一个用于**`name`**：`name fname mname lname`
    *   将这些中的任何一个用于**`autocomplete`**：
        *   `name`（全名）
        *   `given-name`（对于名字）
        *   `additional-name`（中间名）
        *   `family-name`（对于姓氏）
    *   例子：`<input type="text" name="fname" autocomplete="given-name">`
*   *电子邮件*
    *   将这些中的任何一个用于**`name`**：`email`
    *   将这些中的任何一个用于**`autocomplete`**：`email`
    *   例子：`<input type="text" name="email" autocomplete="email">`
*   *地址*
    *   将这些中的任何一个用于**`name`**：`address city region province state zip zip2 postal country`
    *   将这些中的任何一个用于**`autocomplete`**：
        *   对于一个地址输入：
            *   `street-address`
        *   对于两个地址输入：
            *   `address-line1`
            *   `address-line2`
        *   `address-level1`（州或省）
        *   `address-level2`（城市）
        *   `postal-code`（邮政编码）
        *   `country`
*   *电话*
    *   将这些中的任何一个用于**`name`**：`phone mobile country-code area-code exchange suffix ext`
    *   将这些中的任何一个用于**`autocomplete`**：`tel`
*   *信用卡*
    *   将这些中的任何一个用于**`name`**：`ccname cardnumber cvc ccmonth ccyear exp-date card-type`
    *   将这些中的任何一个用于**`autocomplete`**：
        *   `cc-name`
        *   `cc-number`
        *   `cc-csc`
        *   `cc-exp-month`
        *   `cc-exp-year`
        *   `cc-exp`
        *   `cc-type`
*   *用户名*
    *   将这些中的任何一个用于**`name`**：`username`
    *   将这些中的任何一个用于**`autocomplete`**：`username`
*   *密码*
    *   将这些中的任何一个用于**`name`**：`password`
    *   将这些中的任何一个用于**`autocomplete`**：
        *   `current-password`（用于登录表格）
        *   `new-password`（用于注册和密码更改表格）

# 资源

*   [当前用于自动完成的 WHATWG HTML 标准。](https://html.spec.whatwg.org/multipage/forms.html#attr-fe-autocomplete)
*   [来自 Google 的“创建惊人的表单”](https://developers.google.com/web/fundamentals/design-and-ui/input/forms/#recommended_input_name_and_autocomplete_attribute_values)。好像几乎天天更新。优秀的阅读。
*   2015 年[来自 Google 的“使用自动填充功能帮助用户更快结帐” 。](https://developers.google.com/web/updates/2015/06/checkout-faster-with-autofill)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T11:11:28.483

没有跨浏览器的方法可以做到这一点，浏览器要么支持 HTML5 和自动填充，要么不支持。

要使其正常工作，您所要做的就是使用正确的输入名称，其余的由浏览器处理，您无法访问浏览器存储的任何数据。

```
<input type="text" name="fname" /> //first name
<input type="text" name="lname" /> //last name
<input type="text" name="email" /> //email
//etc... 
```

[**小提琴**](http://jsfiddle.net/rttKS/)

根据[this answer](https://stackoverflow.com/questions/7223168/how-to-trigger-autofill-in-google-chrome)，Chrome使用的正则表达式如下：

*   **名字：** “first.*name|首字母|fname|first$”
*   **电子邮件：** “e.?mail”
*   **地址（第 1 行）：** “地址。*line|address1|addr1|street”
*   **邮编：** “邮编|邮政|邮政。*code|pcode|^1z$”

只要您的姓名可以与这些正则表达式匹配，自动填充功能就可以在大多数浏览器中使用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-11T05:51:52.477

您可以为表单或每个表单字段添加自动完成功能。试试这个

```
<form autocomplete="on">
<input type="text" name="foo" />
....

</form> 
```

# azure - 无法创建 Azure 移动服务：错误 500

> ID：15832223
> 
> 赞同：7
> 
> 时间：2013-04-05T11:02:46.077
> 
> 标签：azure, azure-mobile-services

我无法在 Azure 中创建移动服务：我收到调用移动服务位置信息时出错：错误 500：

Fehler beim Abrufen der Standortinformationen für mobile Services: Fehler 500\. Wiederholen Sie den Vorgang。Sollte das Problem weiterhin bestehen, wenden Sie sich an den 支持。

[请注意，它不是类似问题Unable to create Azure Mobile Service](https://stackoverflow.com/questions/12835597/unable-to-create-azure-mobile-service)中的错误 400 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-03T04:56:36.690

也许我可以提供更多信息：

我也收到了此错误消息，以及上面提到的“错误 500”：

```
{"message":"Please try again. If the problem persists, contact support.","ErrorMessage":"Please try again. If the problem persists, contact support.","httpStatusCode":"InternalServerError","operationTrackingId":"","stackTrace":null,"Padding":null} 
```

为此，唯一对我有用的是在新服务器上创建一个 20MB 的全新 SQL 数据库，并使用我在创建该服务器时选择的用户名和密码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-01T19:11:37.340

我必须进入我现有的 azure sql 数据库服务器并在配置选项卡下选择“是”以允许 azure 服务访问服务器。

注意：这是服务器而不是数据库的配置。

完成此操作后，我再次尝试创建我的移动服务，并且成功了。

# python - 如何在pylab中使用不同的线型进行绘图

> ID：15832224
> 
> 赞同：0
> 
> 时间：2013-04-05T11:02:46.350
> 
> 标签：python, matplotlib

我有这两个`numpy`数组

```
 import numpy as np
  a=np.array([1,2,3,4,5,6,7,8,9])
  b=np.array([-1,-2,-3,-4,-5,1,2,-3,-4]) 
```

我可以像这样轻松地绘制它们

```
 from pylab import *
  plot(a,b,'b-',lw=2) 
```

我想`b`用不同的线条样式显示带有负数的点，例如虚线。

我可以这样做

```
 plot(a[(b<0)],b[(b<0)],'b--',lw=2) 
```

但这将所有点连接在一条线上。例如，我不希望 a=5 和 b=-4 的点与 a=8 和 b=-3 的点连接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:48:33.143

您可以使用掩码数组：

```
import numpy as np
a=np.array([1,2,3,4,5,6,7,8,9])
b=np.array([-1,-2,-3,-4,-5,1,2,-3,-4])

plot(a, b)
m = b > 0
plot(np.ma.array(a, mask=m), np.ma.array(b, mask=m), 'r--', lw=2) 
```

![在此处输入图像描述](https://i.stack.imgur.com/6d3oW.png)

但是，我认为这可能不是您想要的。这是一种可以将线条分成两部分的快速方法：

```
import numpy as np
a=np.array([1,2,3,4,5,6,7,8,9])
b=np.array([-1,-2,-3,-4,-5,1,2,-3,-4])

x = np.linspace(a.min(), a.max(), 1000)
y = np.interp(x, a, b)

m = y <= 0
plot(np.ma.array(x, mask=m), np.ma.array(y, mask=m), 'b-', lw=2)
m = y > 0
plot(np.ma.array(x, mask=m), np.ma.array(y, mask=m), 'r--', lw=2) 
```

![在此处输入图像描述](https://i.stack.imgur.com/p4ftX.png)

`np.interp()`将为大型数据集使用很多内存，这是另一种找到所有零点的方法。输出与上面相同。

```
idx1 = np.where(b[1:] * b[:-1] < 0)[0]
idx2 = idx1 + 1

x0 = a[idx1] + np.abs(b[idx1] / (b[idx2] - b[idx1])) * (a[idx2] - a[idx1]) 

a2 = np.insert(a, idx2, x0)
b2 = np.insert(b, idx2, 0)

m = b2 < 0
plot(np.ma.array(a2, mask=m), np.ma.array(b2, mask=m), 'b-', lw=2)
m = b2 > 0
plot(np.ma.array(a2, mask=m), np.ma.array(b2, mask=m), 'r--', lw=2) 
```

# objective-c - UIImageView UIViewContentModeScaleToFill - 使用这个时的图像拉伸

> ID：15832226
> 
> 赞同：0
> 
> 时间：2013-04-05T11:02:51.343
> 
> 标签：objective-c, uiimageview

我`UIViewContentModeScaleToFill`用来填写`image`我的`imageview`. 但`image`看起来`streched`。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:33:41.837

您不能在填充图像视图的同时让它保持纵横比。如果您希望图像不被拉伸，请使用：

```
UIViewContentModeScaleAspectFit 
```

[在此处](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html)查找更多详细信息

# c# - 如何在mvc中映射多个路由

> ID：15832232
> 
> 赞同：2
> 
> 时间：2013-04-05T11:03:19.967
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我有 Home 控制器，默认操作为登陆。

但是对于 ErrorController 默认操作应该是 index

在 Global.cs 的 RegisterRoutes 方法中，我是这样写的：-

```
 routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Landing", id = UrlParameter.Optional } 
```

但是当我试图从 Application_Error 事件重定向到错误时： -

```
Exception error = Server.GetLastError();                    
string redirectUrl = "~/Error/id=" + errorId;
HttpContext.Current.Server.ClearError();
HttpContext.Current.Response.Redirect(redirectUrl); 
```

它抛出错误 - 找不到动作着陆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:06:47.173

对于更具体的错误情况，只需在当前路线上方添加另一条路线：

```
routes.MapRoute(
            "Error", // Route name
            "Error/{action}/{id}", // URL with parameters
            new { action = "Index", id = UrlParameter.Optional } 
```

另外，这看起来有点奇怪：

```
string redirectUrl = "~/Error/id=" + errorId; 
```

似乎它会更多这样：

```
string redirectUrl = "~/Error?id=" + errorId; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:09:21.600

把它放在你的路由映射方法中，放在另一个*之前*，它会给错误控制器一个不同的默认操作。顺序在这里很重要，路线以先到先得的方式匹配。

```
routes.MapRoute(
        "Error", // Route name
        "Error/{action}/{id}", // URL with parameters
        new { controller = "Error", action = "index", id = UrlParameter.Optional } 
```

# php - php if 语句忽略条件

> ID：15832233
> 
> 赞同：1
> 
> 时间：2013-04-05T11:03:22.617
> 
> 标签：php

我正在尝试检查用户是否来自某些国家而不是来自 ip 地址，而不是输入 if 以下语句检查`$COUNTRY`但忽略 ip 检查条件

```
if($COUNTRY == "USA" || $COUNTRY == "CAN" && $ipc != "1x.1x.1x.1x" && $ipc != "2x.2x.2x.2x"){ 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-05T11:04:55.510

你知道[优先级](http://www.php.net/manual/en/language.operators.precedence.php)吗？

```
if(($COUNTRY == "USA" || $COUNTRY == "CAN") && $ipc != "1x.1x.1x.1x" && $ipc != "2x.2x.2x.2x"){ 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-05T11:04:44.707

`if(($COUNTRY == "USA" || $COUNTRY == "CAN") && $ipc != "1x.1x.1x.1x" && $ipc != "2x.2x.2x.2x")`

您想`( )`在条件周围使用，`||`以便 PHP 正确评估它

这就像在数学中一样，使用运算顺序。

# c# - 在 PropertyGrid 中选择多个对象时不更新列表

> ID：15832234
> 
> 赞同：1
> 
> 时间：2013-04-05T11:03:23.537
> 
> 标签：c#, user-interface, propertygrid

我正在尝试解决在属性网格中选择多个具有相同类型的对象的问题。所有这些对象都提供了一个字符串数组。在调查期间，我发现用户无法编辑数组，因此我切换到列表并使用自定义编辑器来编辑这些字符串。这似乎工作正常，但目前我在思考的是该属性在两个选定的对象中都没有更新。

让我们用一个简单而简短的例子来详细说明。假设你有这个类：

```
public class MyProperties
{
    private List<string> _channels;

    public MyProperties()
    {
        _channels = new List<string>();
    }

    [Editor(@"System.Windows.Forms.Design.StringCollectionEditor," +
    "System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a",
   typeof(System.Drawing.Design.UITypeEditor))]
    public List<string> Channels
    {
        get
        {
            return _channels;
        }
    }
} 
```

我正在为我的属性网格选择三个这种类型的对象：

```
public partial class Form1 : Form
{
    private MyProperties[] _properties;
    public Form1()
    {
        InitializeComponent();

        _properties = new MyProperties[3];
        for (int i = 0; i < _properties.Length; ++i)
            _properties[i] = new MyProperties();

        propertyGrid1.SelectedObjects = _properties;
    }
} 
```

现在，当我开始示例时，我可以打开正确的字符串列表编辑器来编辑我的频道列表。单击 时，所有 MyProperties 对象都不包含配置的字符串列表。

当只选择一个 MyProperties 实例时，上面的示例没有问题：

```
propertyGrid1.SelectedObject = _properties[0]; 
```

是我做错了什么还是需要更多的东西才能让它工作？预先感谢您的努力！

# debugging - 在 Haskell 中调试无限总和

> ID：15832238
> 
> 赞同：6
> 
> 时间：2013-04-05T11:03:34.750
> 
> 标签：debugging, testing, haskell, monoids, applicative

假设我有一个函数（它没有任何实际应用，只是一种学术兴趣，因此用幺半群、应用函子和定点组合器编写它的方式很奇怪）

```
f :: Num a => a -> Sum a
f = fix ((<>) <$> Sum <*>) 
```

它会进行类型检查，但在我测试它之前，我不能确定它是否能达到预期的效果。

如何进行测试和/或调试呢？我的意思是在几次迭代后看到结果，就像使用`take 10 [1..]`.

`ghci`我对like`:break`和的简单调试工具了解一些`:step`，但它会进入非终止计算，所以我无法检查任何东西（它甚至是有问题的`^C`）。而且我也不知道如何在这个函数中使用`trace`from模块。`Debug`

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T12:52:42.383

`ChasingBottoms`带有它的包[`approxShow`](http://hackage.haskell.org/packages/archive/ChasingBottoms/1.3.0.5/doc/html/Test-ChasingBottoms-ApproxShow.html)可以帮助您探索部分评估的值：

```
$ cabal install ChasingBottoms
$ ghci
> import Test.ChasingBottoms.ApproxShow
> import Data.Function
> approxShow 10 (fix (1:))
"[1, 1, 1, 1, 1, 1, 1, 1, 1, _" 
```

但是，这里我们不能直接使用它：对`Integer`s 求和是*严格*的，不像`(:)`用于构建列表。因此应使用另一种类型。

首先，一些导入（我们还需要能够派生`Data`，以便`approxShow`可以用来显示我们的自定义类型）：

```
{-# LANGUAGE DeriveDataTypeable #-}

import Data.Data
import Data.Monoid
import Data.Function
import Control.Applicative
import Test.ChasingBottoms.ApproxShow 
```

类型本身（非常基本）及其`Num`实例：

```
data S = N Integer | S :+ S
  deriving (Typeable, Data)

instance Num S where
  (+) = (:+)
  fromInteger = N
  --other operations do not need to be implemented 
```

最后，函数：

```
f :: S -> Sum S
f = fix ((<>) <$> Sum <*>) 
```

下面是我们如何看到`f`一个常见的数字（例如 1）在做什么：

```
*Main> approxShow 5 (getSum (f 1))
"(N 1) :+ ((N 1) :+ ((N 1) :+ ((N _) :+ (_ :+ _))))" 
```

当然，观察演变可能会更有趣：

```
*Main> Control.Monad.forM_ [0..7] $ \i -> putStrLn $ approxShow i (getSum (f 1))
_
_ :+ _
(N _) :+ (_ :+ _)
(N 1) :+ ((N _) :+ (_ :+ _))
(N 1) :+ ((N 1) :+ ((N _) :+ (_ :+ _)))
(N 1) :+ ((N 1) :+ ((N 1) :+ ((N _) :+ (_ :+ _))))
(N 1) :+ ((N 1) :+ ((N 1) :+ ((N 1) :+ ((N _) :+ (_ :+ _)))))
(N 1) :+ ((N 1) :+ ((N 1) :+ ((N 1) :+ ((N 1) :+ ((N _) :+ (_ :+ _)))))) 
```

# java - 通过在 XML 中生成的索引从服务器动态获取值并由 div java 放置

> ID：15832240
> 
> 赞同：0
> 
> 时间：2013-04-05T11:03:38.303
> 
> 标签：java, xml, cgi

我有设备，需要从服务器获取值并通过 DIV 放置在正确的位置。

有数字、模拟和整数三组值。此值由 xml.cgi 生成：

```
 getParams(xml.cgi?D|1|3|I|1|3|A|1|3); 
```

并生成这个 xml：

```
 <PCOWEB><PCO>
<DIGITAL>
<VARIABLE>
<INDEX>1</INDEX>
<VALUE>0</VALUE>
</VARIABLE>
<VARIABLE>
<INDEX>2</INDEX>
<VALUE>0</VALUE>
</VARIABLE><VARIABLE>
<INDEX>3</INDEX>
<VALUE>0</VALUE>
</VARIABLE>
</DIGITAL>
<INTEGER>
<VARIABLE>
<INDEX>1</INDEX>
<VALUE>0</VALUE>
</VARIABLE>
<VARIABLE>
<INDEX>2</INDEX>
<VALUE>0</VALUE>
</VARIABLE>
<VARIABLE>
<INDEX>3</INDEX>
<VALUE>0</VALUE>
</VARIABLE>
</INTEGER>
<ANALOG>
<VARIABLE>
<INDEX>1</INDEX>
<VALUE>5.0</VALUE>
</VARIABLE>
<VARIABLE>
<INDEX>2</INDEX>
<VALUE>5.9</VALUE>
</VARIABLE>
<VARIABLE>
<INDEX>3</INDEX>
<VALUE>0.0</VALUE>
</VARIABLE>
</ANALOG>
</PCO></PCOWEB> 
```

如何使用 Java 动态获取此值并放置在 html 上并通过 DIV 放置到正确的位置。

# java - Java：如何在 for 循环中终止条件检查

> ID：15832244
> 
> 赞同：0
> 
> 时间：2013-04-05T11:04:02.783
> 
> 标签：java

我有一个数组列表，如图所示。

我的要求是，如果列表中包含值**“M”**，我想终止 for 循环中的条件检查（等于所示的检查），但想继续该 for 循环中的进一步操作

这是我的程序

```
package com;

import java.util.ArrayList;
import java.util.List;

public class Jai {
    public static void main(String args[]) {
        String flag = null;
        ArrayList<String> list = new ArrayList<String>();

        list.add("M");
        list.add("M");
        list.add("M");
        list.add("F");
        list.add("M");
        list.add("M");
        list.add("M");
        list.add("F");

        for (int i = 0; i < list.size(); i++) {
            if (list.get(i).equals("M")) {
                flag = "M";
            } else {
                flag = "F";
            }
            // this is to indicate that i need to continue further operations
            // inside for loop
            System.out.println("Hi");

        }

        if (flag.equals("M"))
            System.out.println("This is M List");
        else
            System.out.println("This is F List");

    }
} 
```

该列表由其中的值 M 组成，因此我想将其视为 M 列表。

上面的程序是为了简单，实际上列表中会包含员工对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:07:11.293

如果我理解正确，您想测试列表是否包含“M”。做到这一点的干净方法不是使用 for 循环，而是简单地调用

```
if (list.contains("M")) 
```

不过，要回答您的问题，您可以使用

```
if (list.get(i).equals("M")) {
    flag = "M";
    break;
} 
```

如果您实际上只想在元素不是 M 时才在循环中执行某些操作，则执行

```
for (int i = 0; i < list.size(); i++) {
    if (list.get(i).equals("M")) {
        flag = "M";
    } 
    else {
        flag = "F";
        doSomethingOnlyForNonMElements();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T11:08:37.620

我想，这就是你要找的

```
 boolean hasSeenM = false;

    for (int i = 0; i < list.size(); i++) {
        if ( !hasSeenM && list.get(i).equals("M")) {
            hasSeenM = true;
        }
        // this is to indicate that i need to continue further operations
        // inside for loop
        System.out.println("Hi");

    }

    if (hasSeenM)
        System.out.println("This is M List");
    else
        System.out.println("This is F List"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T11:19:47.197

我建议按照以下方式进行

```
// Indicates whether the list has M or not
boolean hasM = false;

// Go over the entire list
for (int i = 0; i < list.size(); i++) {
    // Check if we found M within the list, if not, proceed
    // to checking if the current item has M in it.
    if (!hasM && list.get(i).equals("M")) {
        // The current item is M, set hasM to true
        hasM = true;
    }

    // this is to indicate that i need to continue further operations
    // inside for loop
    System.out.println("Hi");
} 
```

检查布尔值比比较字符串更便宜。An`if`必须是该循环的一部分，除非您愿意打破它并继续另一个循环来排除该检查，如下所示

```
// Indicates whether the list has M or not
boolean hasM = false;

// Remember the position of iteration
int i;

// Go over the list, until we find M
for (i = 0; i < list.size() && !hasM; i++) {
    // Since this loop will only iterate until M is found,
    // we can remove the check for whether M was found or not
    if (list.get(i).equals("M")) {
        // The current item is M, set hasM to true
        hasM = true;
    }

    // this is to indicate that i need to continue further operations
    // inside for loop
    System.out.println("Hi");
}

// Continue in a different loop. If this loop iterates, it
// will be after M was found.
for (; i < list.size(); i++) {
    // Do stuff after M was found
} 
```

如 JB Nizet 回答中所述，您可以`list.contains("M")`在迭代之前测试列表是否有 M，但是除非迭代本身需要这样做，否则它将不必要地将您的方法复杂度增加到 O(2n) 而不是 O(n)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T11:06:10.050

加入`continue;`If条件

```
if (list.get(i).equals("M")) {
                flag = "M";
                continue;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T11:08:16.917

改变

```
for (int i = 0; i < list.size(); i++) { 
```

到

```
for (int i = 0; i < list.size() && !"M".equals(flag); i++) { 
```

注意使用，`"M".equals(flag)`所以我们不会抛出`NPE`when `flag`is `null`。

# python - 调用 set_trace() 时加载 Pdb 和 Python 的核心模块：可能吗？

> ID：15832251
> 
> 赞同：2
> 
> 时间：2013-04-05T11:04:18.207
> 
> 标签：python, pdb

最近我发现自己使用`PDB`的比平时多得多。我有我*漂亮*的快捷方式，可以快速`import pdb; pdb.set_trace()`在我的代码中添加我需要的地方。现在，每次我在 pdb 中时，我都希望在[Python 的代码模块](http://docs.python.org/2/library/code.html)中找到模拟的交互式控制台，以避免在调试时只使用单行。

这需要`!import code; code.interact(local=vars())`每次都输入，这非常烦人，因为我必须准备好复制粘贴或手动输入。

有没有办法在每次`set_trace()`调用时都加载它？谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:54:45.827

为什么不只是`import code; code.interact(local=vars())`代替`import pdb; pdb.set_trace()`？

# php - 获取 php-nuke 提要

> ID：15832252
> 
> 赞同：-7
> 
> 时间：2013-04-05T11:04:18.573
> 
> 标签：php, rss

我需要使用**PHP-Nuke**从网站获取 RSS 提要吗？

但是这个网站不是我的，所以我不能添加任何插件或插件

[http://www.phpnuke.org/](http://www.phpnuke.org/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:08:00.013

尝试[http://feed43.com/](http://feed43.com/)或[http://page2rss.com/](http://page2rss.com/)或任何其他接受任何 Web url 并输出 RSS 提要的服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:57:48.190

如果提要不存在，您将不得不[抓取](https://www.google.com/?q=php+web+scraping)它 - 但是，网站内的任何*实际*RSS 提要通常在源代码*^((HTML))*中突出显示，以供搜索引擎获取。`<links/>`沿着`<head/>`标记之间的以下示例查找：

```
<link rel="alternate" type="application/rss+xml" href="[URL]"/> 
```

例如，在 PHP-Nuke* 站点中，默认/未修改安装具有，因为早期版本在根目录中包含一个名为`/backend.php`输出 RSS 的文件。这可能包含您在相关网站上查找的信息。

* * *

****脚注：*** *我不敢相信人们还在使用 PHP-Nuke？！它诞生于十多年前，当时互联网精英仍在告诉我们基于表格的布局是自切片面包以来最伟大的事情！*

# jquery - jQuery 用选择器链接 this

> ID：15832255
> 
> 赞同：0
> 
> 时间：2013-04-05T11:04:25.427
> 
> 标签：jquery, this, chaining, chain

是否可以将“this”与其他选择器链接起来

IE

```
var testvar =jQuery(this.label.text()).val(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:32:20.963

jQuery 选择器接受一个字符串参数，并基于它返回一个 jQuery 对象或带有 jQ​​uery 对象的数组。

假设您正在尝试查找元素并且元素选择器匹配存储到另一个元素，那么您可以执行以下操作

```
$("a.button").click(function(){
    var element = $($(this).data("elementID"));
}); 
```

锚看起来像这样的地方：

```
<a href="#" data-elementID="#firstElement">Find</a> 
```

目标元素是：

```
<div id="firstElement"></div> 
```

在这种情况下，您可以轻松地从另一个元素引用另一个元素。

# javascript - 用 D3 绘制饼图，使用 JSon

> ID：15832257
> 
> 赞同：1
> 
> 时间：2013-04-05T11:04:31.503
> 
> 标签：javascript, json, d3.js

我正在用 D3 绘制饼图。从数据库中获取数据。下面给出了示例 JSON。我的图表应该有 SLA 合规性作为图例，饼图应该使用 SLA 合规性的值（这里是 100）绘制，每个月。传奇即将到来。在这里，“SLA 合规性”是一个标签，当单击其他单选按钮/下拉菜单时，该标签会随着不同的图表而变化。在控制台中打印值时，我发现调用 Var pie 时，其中的值是未定义的。图表未显示。有人可以帮我吗。

示例 JSON：

```
[
 {month:"Nov-11", 'SLA Compliance':100},{month:"Dec-11", 'SLA Compliance':100}, 
 {month:"Jan-12", 'SLA Compliance':100}, {month:"Feb-12", 'SLA Compliance':100}, 
 {month:"Mar-12", 'SLA Compliance':100}, {month:"Apr-12", 'SLA Compliance':100
] 
```

代码：

```
function drawPieChart3(xData,data,svg,index,selectedIndex){
    var width = 400, 
        height = 100,
        radius = Math.min(width, height) / 2;

    var color = d3.scale.category20();

    var arc = d3.svg.arc()
        .outerRadius(radius - 10)
        .innerRadius(0);

    var pie=d3.layout.pie()
        .sort(null)
        .value(function(d) { return d.value; });

    var temp= d3.keys(data[0]).filter(function(key) { return key !== "month"; })
    color.domain(d3.keys(data[0]).filter(function(key) { return key !== "month"; })); 

    data.forEach(function(d) {
        d.month=d.month
        d.pieValue = temp.map(function(name) {  
            return {name: name, value: +d[name]}; });

    var g=svg.selectAll(".arc")
        .data(pie(data))
        .enter().append("g")
        .attr("class", "arc");

        g.append("path")
        .attr("d", arc)
        .style("fill", function(d) {return color(d.data.month); 

        g.append("text")
        .attr("transform", function(d) { return "translate(" + arc.centroid(d) + ")"; })
        .attr("dy", ".35em")
        .style("text-anchor", "middle")
        .text(function(d) {
        return d.data.month; });

    //legend portion 
    alert("11\. in legend portion")
    var mylegend = svg.selectAll(".mylegend")
        .data(temp)
        .enter().append("g")
        .attr("class", "legend")
        .attr("transform", function(d, i) { return "translate(0," + (legentCount+i+1) * 20 + ")"; });

   mylegend.append("rect")
        .attr("x", width+40)
        .attr("width", 18)
        .attr("height", 18)
        .style("fill", color);

   mylegend.append("text")
        .attr("x", width+60)
        .attr("y", 9)
        .attr("dy", ".35em")
        .style("text-anchor", "start")
        .text(function(d) { return d; });

  } 
```

# c - 使用 'typedef' 确保逻辑类型安全

> ID：15832259
> 
> 赞同：9
> 
> 时间：2013-04-05T11:04:52.327
> 
> 标签：c, c99, avr-gcc

```
typedef int A;
typedef int B;

void foo(A arg){}

void main(void){
    B wrongvar = 7;
    foo(wrongvar);
} 
```

根据标准，这种结构是否应该返回警告/错误？最流行的编译器呢？

例子：我们有变量，代表公斤和米，都是'int'类型。我们有一个功能，处理米。我们希望编译器能够捕获错误，这些错误与将公斤表示的变量变量传递给该函数有关。

我相信*艾达*处理得很好。现代C呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-28T16:17:53.460

不，您正在处理的是一个类型学科问题，称为结构等效与名称等效。正如 Dog 所说，您可以做的最接近您想要的事情是使用结构，但是如果编译器选择添加填充（在这种情况下不太可能），这可能会浪费内存。C 对别名使用结构等价（意味着两种类型是相同的），但不同声明的结构的名称等价（具有相同布局的两个结构类型不被视为等价）。

使用结构来执行此操作的示例：

```
typedef struct {
    double value;
} meters;

typedef struct {
    double value;
} kilograms;

int main(){
    meters m;
    kilograms k = {2}; // initialized
    m.value = 1;
    k = m; // error, can't assign meters to kilos
    return 0;
} 
```

您可能希望阅读这篇文章：[http](http://www.joelonsoftware.com/articles/Wrong.html) ://www.joelonsoftware.com/articles/Wrong.html描述如何帮助避免这些命名约定问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T12:03:59.780

您可以使用带有一个字段的结构来完全按照您的意愿进行操作。唯一的“缺点”是如果优化器不优化它们，你可能会浪费 1/2/4/8 字节......

# java - 在java中移动文件

> ID：15832269
> 
> 赞同：0
> 
> 时间：2013-04-05T11:05:06.820
> 
> 标签：java, swing, file, joptionpane, jfilechooser

到目前为止，这是我的代码，我想将选定的文件移动到我稍后将在代码中定义的路径我如何从选定的文件中获取路径

```
import java.awt.Component;
import javax.swing.JFileChooser;

public class CopyFileExample 
{
    public static void main(String[] args)
    {   

        final JFileChooser fc = new JFileChooser();
        Component aComponent = null;
        int returnVal = fc.showOpenDialog(aComponent);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:07:15.883

您可以通过以下方式获取所选文件：

```
if (returnVal == JFileChooser.APPROVE_OPTION) {
  File file = fc.getSelectedFile();
  ...
} else {
  // this means that the user closed the dialog or pressed Cancel
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:09:22.353

大多数swing组件在官方网站上都有非常好的教程。教程`JFileChooser`在[这里](http://java.sun.com/docs/books/tutorial/uiswing/components/filechooser.html)。

它基本上归结为；

```
if (returnVal == JFileChooser.APPROVE_OPTION) {
  File file = fc.getSelectedFile().getPath();
  .....
} 
```

# php - CodeIgniter 的 ajaxfileupload 问题

> ID：15832270
> 
> 赞同：0
> 
> 时间：2013-04-05T11:05:07.703
> 
> 标签：php, codeigniter

我正在异步上传图像，为此我得到了[这个很好的教程](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-upload-files-with-codeigniter-and-ajax/)。我阅读了所有内容并尝试删除我不需要的模型并根据我的需要制作它，但是当我运行它时我没有收到错误并且文件也没有上传。

我在控制器上传功能中放了一个回声，但我也没有得到回声字符串，即使我将完整路径放在 ajaxfileupload [URL](http://en.wikipedia.org/wiki/Uniform_resource_locator)中。

这是我的看法：

```
<!doctype html>
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
        <script src="<?php echo site_url()?>public/assets/js/ajaxfileupload.js"></script>
        <script>
            $(function() {
                $('#upload_file').submit(function(e) {
                    e.preventDefault();
                    $.ajaxFileUpload({
                        url          : 'upload2/upload_file',
                        secureuri    :  false,
                        fileElementId: 'userfile',
                        dataType     : 'json',
                        data         : {
                                           'title': $('#title').val()
                                       },
                        success : function (data, status)
                        {
                            if(data.status != 'error')
                            {
                                $('#files').html('<p>Reloading files...</p>');
                                refresh_files();
                                $('#title').val('');
                            }
                            alert(data.msg);
                        }
                    });
                    return false;
                });
            });
        </script>
    </head>
    <body>
          <h1>Upload File</h1>
          <form method="post" action="" id="upload_file">
          <label for="title">Title</label>
          <input type="text" name="title" id="title" value="" />

          <label for="userfile">File</label>
          <input type="file" name="userfile" id="userfile" size="20" />

          <input type="submit" name="submit" id="submit" />
          </form>
          <h2>Files</h2>
          <div id="files"></div>
    </body>
</html> 
```

我的控制器是这样的：

```
<?php
    class Upload2 extends CI_Controller
    {
        public function __construct()
        {
            parent::__construct();

            $this->load->helper('url');
        }

        public function index()
        {
            $this->load->view('upload');
        }
        public function upload_file()
        {
            /* It's not even showing me this echo and the path is
               OK too, and even I put the whole path but no result. */

            echo "in upload_file";
            $status = "";
            $msg = "";
            $file_element_name = 'userfile';

            if (empty($_POST['title']))
            {
                $status = "error";
                $msg = "Please enter a title";
            }

            if ($status != "error")
            {
                $config['upload_path'] = './uploads/';
                $config['allowed_types'] = 'gif|jpg|png|doc|txt';
                $config['max_size']  = 1024 * 8;
                $config['encrypt_name'] = TRUE;

                $this->load->library('upload', $config);

                if (!$this->upload->do_upload($file_element_name))
                {
                    $status = 'error';
                    $msg = $this->upload->display_errors('', '');
                }
                else
                {
                    $data = $this->upload->data();
                    $file_id = $this->files_model->insert_file($data['file_name'], $_POST['title']);
                    if($file_id)
                    {
                        $status = "success";
                        $msg = "File successfully uploaded";
                    }
                    else
                    {
                        unlink($data['full_path']);
                        $status = "error";
                        $msg = "Something went wrong when saving the file, please try again.";
                    }
                }
                @unlink($_FILES[$file_element_name]);
            }
            echo json_encode(array('status' => $status, 'msg' => $msg));
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:20:47.840

将此属性添加到您的表单`enctype="multipart/form-data"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:29:50.327

这在没有任何插件或外部脚本的情况下是可行的。您需要文件上传元素、将数据返回到的 iFrame 和简单的 Ajax 脚本。

文件上传元素：

```
echo '<input type="file" name="prodImageUpload"
id="prodImageUpload" onchange="return ajaxFileUpload(this);"/>' 
```

框架：

```
<iframe name="upload_iframe" id="upload_iframe" style="display:block;width:720px;"></iframe> 
```

JavaScript 脚本：

```
function ajaxFileUpload(upload_field)
{
    var re_text = /\.jpg|\.gif|\.jpeg|\.png/i;
    var filename = upload_field.value;
    var imagename = filename.replace("C:\\fakepath\\","");
    if (filename.search(re_text) == -1)
    {
        alert("File must be an image");
        upload_field.form.reset();
        return false;
    }
    upload_field.form.action = "addProductImage";
    upload_field.form.target = "upload_iframe";
    upload_field.form.submit();
    upload_field.form.action = "";
    upload_field.form.target = "";
    return true;
} 
```

在我的控制器中，我有一个自定义上传，但这无关紧要。您需要做的就是通过上传控件名称和最终路径。如果有任何错误，我会回显错误，或者如果可以打印到 iFrame，则返回文件名和大小。它非常简单并且工作正常。

# python - Python：将utf8字符串转换为�的最简单方法是什么

> ID：15832276
> 
> 赞同：3
> 
> 时间：2013-04-05T11:05:39.533
> 
> 标签：python, html, utf-8, string-conversion

我有一个带有非 ASCII 字符的 utf8 字符串。我需要将它以＆符号哈希数字分号形式放入 html 文件中。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:10:40.067

使用作为参数传递的`.encode`方法：`'xmlcharrefreplace'``errors`

```
In [1]: help(unicode.encode)
Help on method_descriptor:

encode(...)
    S.encode([encoding[,errors]]) -> string or unicode

    Encodes S using the codec registered for encoding. encoding defaults
    to the default encoding. errors may be given to set a different error
    handling scheme. Default is 'strict' meaning that encoding errors raise
    a UnicodeEncodeError. Other possible values are 'ignore', 'replace' and
    'xmlcharrefreplace' as well as any other name registered with
    codecs.register_error that can handle UnicodeEncodeErrors. 
```

* * *

```
In [2]: ustr = u'\xa9 \u20ac'

In [3]: print ustr
© €

In [4]: print ustr.encode('ascii', 'xmlcharrefreplace')
&#169; &#8364; 
```

# data-modeling - 主题地图数据导出工具链

> ID：15832281
> 
> 赞同：2
> 
> 时间：2013-04-05T11:05:46.150
> 
> 标签：data-modeling, tex, topic-maps

我打算排版存储在主题图中的数据。主题图可以多种 xml 和 json 主题图格式导出。我想使用 ConTeXt 进行排版。显然可以使用 XSLT 来获得可打印的数据版本，但也许已经有更好的解决方案了。例如，您能推荐任何 TMQL 工具吗？或者也许是一种完全不同的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-30T16:52:33.523

将近三年过去了，由于我刚刚成功完成了一个引发这个问题的大项目，我想我可以分享一些我的经验。

主题图是在 Topincs 程序中创建的，我的第一个想法是以一种常见格式导出主题图，对其进行转换并排版转换的输出。最后，我使用原生 Topincs API 为 ConTeXt 生成源文本。这非常简单，因为 Topincs 为每种主题类型生成一组函数，可用于 Web 服务的定义。当然，也可以定义所需的任意数量的 Web 服务。我只选择了一个导出完整文本的工具，其中包含准备排版的 ConTeXt 命令。

对于另一个项目，我设置了一个工具链，其中数据由 Topincs 服务作为 yaml 文件输出，并由中间人程序直接使用，该程序从 Topincs 中创建的主题图生成网站。

# javascript - 如何使用 javascript 或 jQuery 处理多个 HTML 中的通用代码

> ID：15832282
> 
> 赞同：14
> 
> 时间：2013-04-05T11:05:49.760
> 
> 标签：javascript, jquery, html

我有一个包含近 30 个 html 的应用程序，它们共享一些通用代码，如果我对这些代码进行了任何更改，我需要在每个页面上更改它。下面是我在所有页面上使用的一段代码。

```
<div>
  <ul>
    <li class="current"><a href=".html" ></a></li>
    <li><a href=".html"></a></li>
    <li><a href=".html"></a></li>
    <li><a href=".html"></a></li>
  </ul>
 </div> 
```

有什么解决方案可以让我将它保存在一个文件中并在我想要的任何地方重复使用它吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-05T11:43:40.517

有几种方法可以实现这种包含，以使您的代码更易于维护。

## PHP

* * *

当然首先想到的是如果你想使用 PHP，它的用法[`include()`](http://www.php.net/manual/en/function.include.php)包括并评估外部文件或脚本中的代码。

您可以这样使用它：

```
<?php include('path/to/file.html'); ?> 
```

**笔记！**请注意：您的容器文件必须是一个`.php`文件，才能从服务器评估此指令。您无需执行任何操作，只需更改文件扩展名即可。当然，还要确保您的服务器可以解析 PHP。

另外，请注意与 的区别[`include_once()`](http://php.net/manual/en/function.include-once.php)，在这种情况下我不建议这样做。

## SSI（服务器端包括）

* * *

如果您不想使用 PHP，您可以使用[**服务器端包含**](http://httpd.apache.org/docs/1.3/howto/ssi.html)^([ [Wikipedia](http://en.wikipedia.org/wiki/Server_Side_Includes) ])来非常简单和干净地做到这一点。SSI 看起来像 HTML 注释：

```
<!--#include virtual="your.html" --> 
```

**笔记！**您必须确保已[`mod_include`](http://httpd.apache.org/docs/1.3/mod/mod_include.html)在您的 Apache 服务器中安装并启用，并在您的`httpd.conf`or`.htaccess`文件中添加以下指令：

```
Options +Includes 
```

阅读上面的文档链接以获取更多信息。

## 客户端包括

* * *

您的问题实际上指定在 JS 或 jQuery 中执行此操作。不确定是不是因为您不了解服务器端选项，或者您是否真的想要客户端选项。无论如何，也有一些客户端解决方案。

鉴于这种可能性，**我会推荐服务器端**解决方案来解决您的问题。

### IFrame 元素

* * *

该[`<iframe>`](https://developer.mozilla.org/en-US/docs/HTML/Element/iframe)元素包含来自页面中单独区域中的外部文件的内容。你可以像这样使用它：

```
<iframe src="your.html" width="x" height="y"><p>Fallback text</p></iframe> 
```

### 对象元素

* * *

该[`<object>`](https://developer.mozilla.org/en-US/docs/HTML/Element/object)元素的作用与 类似`<iframe>`，但后者的设计更多是作为*沙箱*应用程序的一种手段，而前者感觉更集成在您的页面中。用法如下：

```
<object type="text/html" data="your.html"></object> 
```

### Javascript 插入

* * *

将代码转换为 Javascript 文件并指示文件将内容插入 DOM。这是一个例子

**外部.js**

```
var element = '<div>
                   <ul>
                     <li class="current"><a href=".html" ></a></li>
                     <li><a href=".html"></a></li>
                     <li><a href=".html"></a></li>
                     <li><a href=".html"></a></li>
                   </ul>
               </div>'; 
```

**容器.html**

```
<script type="text/javascript" src="external.js"></script>
<script>
     document.getElementById('#containing-element').innerHTML(element);
</script> 
```

### AJAX

* * *

jQuery 可以帮助您轻松处理一些 AJAX 调用。您可以使用[`jQuery.get()`](http://api.jquery.com/jQuery.get/)或[`jQuery.load()`](http://api.jquery.com/load/)。我建议您使用后者，因为`load()`将加载的元素直接注入到 DOM 中，并且您可以准确指定要加载的部分，这非常棒，特别是如果您想将所有包含存储在一个外部 HTML 文件中。

```
jQuery(document).ready(function ($){
    $('#containing-element').load('your.html');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-08T08:24:10.463

旧线程，但我自己遇到了这个要求。我的要求是在客户端使用纯 JavaScript 来完成。一种情况，即只有一个 html (appHeader.html) 作为通用代码。

在每个必需的页面中，定义了一个包含 id="head-container" 的 div 并在 body/window onload 事件中，包括

```
 await fetch("./appHeader.html")
    .then(response => response.text())
    .then((html) => {
        document.getElementById("head-container").insertAdjacentHTML("afterbegin", html);
    }); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-05T11:08:02.103

如果您使用 php，则可以将该代码放在一个文件中并使用`include 'filename.php';`

[http://php.net/manual/en/function.include.php](http://php.net/manual/en/function.include.php)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-05T11:11:14.337

你已经得到了答案`PHP`，但如果你不想或不能使用它，你可以将它保存在 JS 文件中： `test.js`

```
document.write('<div>\n\
  <ul>\n\
    <li class="current"><a href=".html" ></a></li>\n\
    <li><a href=".html"></a></li>\n\
    <li><a href=".html"></a></li>\n\
    <li><a href=".html"></a></li>\n\
  </ul>\n\
 </div>'); 
```

并包括它：

```
<script type="text/javascript" src="test.js"></script> 
```

但当然更好`PHP`。

# javascript - 如何检测已达到 IndexedDB 的存储限制？

> ID：15832284
> 
> 赞同：2
> 
> 时间：2013-04-05T11:05:52.033
> 
> 标签：javascript, html, indexeddb

如何通过 JavaScript IndexedDB API 检测到存储限制已达到？我设想当尝试将数据写入数据库时​​，可以通知一个没有更多空间的人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T01:30:19.227

`event.target.error.name`Chrome 将在错误回调中放入“QuotaExceededError” 。不过，我不确定这是否是由其他浏览器完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:36:47.807

存储限制

单个数据库项目的大小没有任何限制。但是，每个 IndexedDB 数据库的大小可能存在限制。此限制（以及用户界面声明它的方式）可能因浏览器而异：

```
Firefox: no limit on the IndexedDB database's size. The user interface will just ask permission for storing blobs bigger than 50 MB. This size quota can be customized through the dom.indexedDB.warningQuota preference (which is defined in http://mxr.mozilla.org/mozilla-central/source/modules/libpref/src/init/all.js).
Google Chrome: see https://developers.google.com/chrome...rage#temporary 
```

# c# - 序列化运行时创建的类型

> ID：15832285
> 
> 赞同：0
> 
> 时间：2013-04-05T11:05:55.667
> 
> 标签：c#, .net, serialization, reflection.emit

我使用`System.Reflection.Emit`以下[MSDN 文档创建了一个类型](http://msdn.microsoft.com/en-us/library/system.reflection.emit.typebuilder.aspx)

我使用以下代码创建我的类型和实例：

```
//following the tutorial I created a method which returns a dynamic type
Type myDynamicType = CreateNewObject("MyDynamicType", fields);
var instance = Activator.CreateInstance(myDynamicType); 
```

现在我想用序列化我的对象`XmlSerializer`

试过这个：

```
FileStream fs = new FileStream(@"C:\Test\SerializedDynamic.XML", FileMode.Create);            
XmlSerializer xs = new XmlSerializer(typeof(object));
xs.Serialize(fs, instance); 
```

但它抛出一个异常：

```
"The type MyDynamicType was not expected. Use the XmlInclude or SoapInclude attribute to specify types that are not known statically." 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:37:08.563

扩展评论：

我认为问题在于您正在创建`XmlSerializer`with `typeof(object)`。

如果您使用以下任何一种，它应该可以工作：

```
XmlSerializer xs = new XmlSerializer(myDynamicType);
XmlSerializer xs = new XmlSerializer(instance.GetType()); 
```

# yii - 有没有办法使用 YII 本机关系检查 MyIsam 表的引用完整性？

> ID：15832286
> 
> 赞同：1
> 
> 时间：2013-04-05T11:05:56.417
> 
> 标签：yii, myisam, referential-integrity

当我使用 InnoDB 表时，我从 InnoDB 引擎捕获了 FK 约束异常。

我知道Yii可以根据relationship()获取相关表。此外，我需要在其他 CRUD 操作（例如插入、更新和删除）期间检查引用完整性。

是否有一些 Yii 本机机制来执行此操作？或者我应该为此检查编写额外的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:44:43.993

为了避免来自数据库的错误，您需要编写额外的代码来处理这个问题。我使用模型的 beforeDelete() 方法来管理它。编写一个 if 条件来检查使用模型关系的参照完整性违规。然后，您可以删除违规记录或通过不返回“parent::beforeDelete()”来中止删除。

在这个来自用户模型的多对多示例中，我们可以将“return parent::beforeDelete()”调用包装在 if 中，以通过以下方式检查模型的关系（）：

```
 protected function beforeDelete() {
            if (empty($this->tasks))
            return parent::beforeDelete();
        } 
```

如果发现用户有任何分配的任务，删除将中止。

作为参考，模型中的关系看起来像这样，需要第三个表：

```
'tasks' => array(self::MANY_MANY, 'Task', 'task_assignment(user_id,task_id)'), 
```

这个例子是非常基础的，显然你可能想要实现一种更复杂的方式来处理这些场景，其中可能包括删除相关记录，甚至更新它们以删除它们的外键引用。你必须决定什么对你的每个模型及其关系最有效和有意义。

# c++ - Win7上C驱动开发中的字符串函数

> ID：15832288
> 
> 赞同：0
> 
> 时间：2013-04-05T11:06:04.940
> 
> 标签：c++, string, kernel, wdk

我来自用户级开发，我对内核级别的 C/C++ 完全陌生。我必须实现的是一个字符串解析器，它基于 string.h 中已知的 strtok 等拆分函数。据我发现还不能使用 string.h 或 cstring.h 了。然后我发现了 WDF 和它的 wdfstring.h，但里面只有一些“构造函数”，其余的在哪里？

所以我的主要问题是：有哪些字符串操作函数可用，我必须创建什么？我不想重新发明轮子，你知道的。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:39:06.253

“[运行时库”](http://msdn.microsoft.com/en-us/library/windows/hardware/ff563638%28v=vs.85%29.aspx)有一些处理字符串的有用例程，但我认为它们没有类似于 strtok 的东西。如前所述，手动编写替换函数应该相对容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:29:12.633

也许您想看看[“内核安全字符串函数”](http://msdn.microsoft.com/en-gb/library/windows/hardware/ff565779%28v=vs.85%29.aspx)。

有许多函数，它们被编写为“安全”的，而标准库的函数不是（通常）。

# iphone - 如何为 iPhone 编译 Linphone？找不到 libmediastreamer_base.a libmediastreamer_voip.a

> ID：15832290
> 
> 赞同：1
> 
> 时间：2013-04-05T11:06:10.000
> 
> 标签：iphone, ios, objective-c, sip, voip

我正在尝试编译 linphone 源代码。我已经从[这里下载了代码。](https://www.linphone.org/eng/download/git.html) 当我启动 xcode 时，所有库都丢失了。我已经安装了**README中指定的所有端口**文件中指定的所有端口。

我做了谷歌并得到了库，但我仍然找不到**libmediastreamer_base.a**和**libmediastreamer_voip.a**文件。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-11T07:25:20.083

你建立图书馆了吗？转到 linphone 源文件夹并输入命令：

```
$ cd submodules/build
$ make all 
```

或者如果您不想让您的项目符合 GPL，请输入以下命令：

```
$ cd submodules/build
$ make all enable_gpl_third_parties=no 
```

这些都写在 README 文件中。我还下载了相同链接的 linphone 源代码，我只是按照 README 文件进行操作。这一切都奏效了。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-15T12:39:23.710

我认为您没有下载整个项目。因此，它显示丢失的文件。请使用命令终端从以下链接下载完整的应用程序。

[https://www.linphone.org/technical-corner/linphone/downloads](https://www.linphone.org/technical-corner/linphone/downloads)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-10T05:49:59.407

1.  似乎没有包括 sdk 折叠。

    linphone-sdk/apple-darwin/lib/libmediastreamer_voip.a（和其他）

    您应该将此路径添加到您的 xcode“构建设置”->“标题搜索路径”中

2.  如果文件夹中不存在这两个文件，则表示 mediastreamer 未编译。

# java - 想以编程方式删除 weblogic 上的临时文件

> ID：15832291
> 
> 赞同：1
> 
> 时间：2013-04-05T11:06:11.963
> 
> 标签：java

您好，在使用 weblogic 服务器上传文件时。要上传的文件的临时文件正在文件夹中创建`E:\WL\user_projects\domains\AMS_domain\servers\AdminServer\tmp\_WL_user\GenesisDenmark\3m840e\public`。

如果我上传 test.zip，那么它将被复制到上面的位置，名称为 test.tmp。我想以编程方式删除它。我正在使用struts 1.1。

如果有人做过类似的事情。请帮忙。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:37:58.107

可能是因为其他一些原因。你真的想以编程方式删除吗？我可能错了（如果是，请告诉我），但您可以使用正则表达式来匹配所有临时文件。但更好的方法是，如果每次上传任何文件时都使用文件名，搜索具有相同名称和 .tmp 扩展名的文件。用 File 对象表示该文件，如果该特定文件存在，请尝试以编程方式删除该文件。（在 struts 中，您应该在 Action 类中执行此操作，或者如果您将 spring/EJB 与 struts 一起使用，则应该在您的业务逻辑中执行此操作.) 我认为您需要执行以下步骤

```
 1\. Fetch the uploaded file name(As I think it will be with extension)
 2\. get a substring of this file name upto the last location of . (to
    get the file name without extension)
 3\. append .tmp in that file name
 4\. check the condition if that file exists in your uploading directory
 5\. if so, delete the file 
```

一些示例代码，希望对您有所帮助：

```
 //Get the servers upload directory real path name
          filepath = getServletContext().getRealPath("/")+"xml_upload";
          System.out.println("The file path is "+filepath);
          //create the upload folder if not exists
           File folder = new File(filepath);
           if(!folder.exists())
           {
            folder.mkdir();
           }

     MultipartRequest m=new MultipartRequest(req,filepath);
     ff=m.getFile("f");
     System.out.println("Full Path with file name:"+ff);
     //get file name...
     filename=ff.getName();
     System.out.println("file name is:"+filename);

      //now here you have to get the file name without extension and then append the extension .tmp
 // now let the file is represented by a File object say ff .....

   if(ff.exists())
          {
           System.out.println("File exist and it is going to delete.");
           ff.delete() ;
           } 
```

对于我使用的一个 XML 上传应用程序，我使用了相同的方法，因为 xml 数据将更新并显示新值，如果用户想在单击丢弃按钮时丢弃 xml 文件所做的更新，它将恢复更改并删除上传的 xml文件。

# jquery - caroufredsel 图像轮播上的响应高度问题

> ID：15832293
> 
> 赞同：1
> 
> 时间：2013-04-05T11:06:14.613
> 
> 标签：jquery, responsive-design, carousel, caroufredsel

我正在使用带有响应图像的 caroufredsel 插件，但是滑块正在获取图像的全部高度（在调整大小之前）并在底部留下很大的间隙。

该函数在 window.resize 函数中被调用，因为我需要不断检查窗口的宽度。我需要这样做，因为显示的项目数量必须有所不同，如果窗口低于某个宽度，我必须销毁轮播并只显示所有项目。

这是我的代码：

```
$(document).ready(function(){
$(window).resize(function(){
var numItems;
var width = $(window).width();
if(width >=769) {
    numItems = 5;
} else {
    numItems = 3;
}
var carousel = $("#carousel");
$("#carousel").carouFredSel({       
    responsive  : true,
    scroll      : 1,
    items       : {
        visible     : numItems,
        width       : 200
    },
    onCreate : function () {
        carousel.parent().add(carousel).css('height', carousel.children().first().height() + 'px');
    }
});
if (width <=480){
    $("#carousel").trigger("destroy");
}
}).resize();//trigger the resize event on page load.
}); 
```

这个问题的解决方案：[carouFredSel responsive height](https://stackoverflow.com/questions/13180445/caroufredsel-responsive-height)解决了高度问题，但我似乎无法将它与检查项目数量并根据窗口宽度销毁/创建轮播相结合。

任何帮助将不胜感激 - 我在这里扯头发。谢谢。

* * *

*编辑* 我有一个不错的解决方案。我确实稍微改变了我的要求，但我认为即使我没有这样做也会奏效。

较小的要求更改是，我没有使用我的变量“numItems”，而是使用了插件的内置最小和最大项目。实际上，这意味着随着浏览器窗口变小，项目数变为 5 > 4 > 3，这实际上比从 5 跳到 3 更好。

然后我结合了以下两个问题的答案：

[carouFredSel 响应高度](https://stackoverflow.com/questions/13180445/caroufredsel-responsive-height)

[响应式站点需要条件 jquery](https://stackoverflow.com/questions/11139112/need-conditional-jquery-for-responsive-site)

这设法让它工作。这是我最终得到的代码：

```
$(document).ready(function(){

 function imageCarousel() {

var carousel =  $('#carousel');

var width = $(window).width();
if(width <=480) {
     carousel.trigger('destroy');
}

else {

carousel.carouFredSel({
auto: true,
responsive: true,
height : 'auto',
scroll: {
    items : 1
},
 swipe: {
    onTouch: true,
    items: 3
},
items : {
        visible     : {
            min    : 3,
            max    : 5
        },
        width       : 200
    },
    onCreate : function () {
        carousel.parent().add(carousel).css('height', carousel.children().first().height() + 30 + 'px');
    }

});

}

 $("#prev").on("click", function(){
    $("#carousel").trigger("prev");
});
$("#next").on("click", function(){
    $("#carousel").trigger("next");
});

};

var resizeTimer;

$(window).resize(function() {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(imageCarousel, 0);
}).resize();

}); 
```

希望这对某人有用。

# coldfusion - 隐藏字段的 Coldfusion cfform 验证

> ID：15832296
> 
> 赞同：2
> 
> 时间：2013-04-05T11:06:22.033
> 
> 标签：coldfusion, cfform

我有一个带有一些选项的选择框的表单。如果用户选择其他选项，它将显示隐藏的文本字段，用户必须在其中输入他的选择。两个表单字段都是必填字段。但是当我选择“其他”以外的任何其他选项时，验证失败。有人能帮我吗？

代码如下：

```
<script >
 function opnSelect() {
      var opval = document.test_form.opns.value;
      if (opval == "Other") {

         // document.getElementById('td_options').style.display='none';
          document.getElementById('td_opns1').style.display="";
      }
      else if(opval!="Other"){

        document.getElementById('td_opns1').style.display='none';
      }

 }
</script>
<cfform name="test_form">
<table>
 <tr>
  <td width="120" align="right"><font color="#FF0000"><b>Please select from options</b></font></td>

    <td align="left" id="td_options">
        <cfselect size="1"  style="width:150px" name="opns" id="opns" required="true"   message="Please select any value" onchange="javascript:opnSelect();">
            <option value="" ></option>
            <option value="value1">value1</option>
            <option value="value2">value2</option>
            <option value="value3">value3</option>
            <option value="Other">Other</option>
         </cfselect>
    </td>

</tr>
 <tr id="td_opns1" style="display:none;"  >
   <td align="right"><b><font color="#FF0000"> your choice</font></b></td>
   <td align="left" >
    <cfinput type="text" name="opns1" id="opns1"  required="true"  message="Please enter your choice" >
 </td>
 </tr>
 </table>
<cfinput type="submit" value="submit" name="submit1"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:27:37.457

我认为最简单的解决方案可能是为 opns1 添加一个默认值，以满足选择“其他”以外的其他内容时所需的条件。

```
<cfinput type="text" name="opns1" id="opns1" value="other"  required="true"  message="Please enter your choice" > 
```

在您的 JS`if (opval == "Other")`条件中添加

```
document.getElementById('opns1').value=""; // to clear "other" from the input. 
```

在您的表单处理程序中，检查以确保 opns1 neq "other"

```
<cfif form.opns1 neq "other">
  do something with the new value
</cfif> 
```

# c# - Nhibernate Found：整数，预期 INT

> ID：15832298
> 
> 赞同：0
> 
> 时间：2013-04-05T11:06:27.310
> 
> 标签：c#, nhibernate, orm, mapping

我得到一个例外：

```
NHibernate.HibernateException: Wrong column type in main_Command for column Id.
Found: integer, Expected INT 
```

映射是：

```
<id name="Id" type="int">
  <generator class="identity" />
</id> 
```

并且类属性是：

```
public virtual int Id { get; set; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:40:27.883

检查[SQLite 方言](https://github.com/nhibernate/nhibernate-core/blob/master/src/NHibernate/Dialect/SQLiteDialect.cs)的 NHibernate 源并找到[类似](https://stackoverflow.com/questions/8761193/nhibernate-wrong-column-type-found-float-expected-double-precision)问题的答案。看起来所有有符号整数类型都没有按照[SQLite Auto Increment](http://www.sqlite.org/autoinc.html)列`INTEGER`的要求映射。

```
RegisterColumnType(DbType.Int16, "SMALLINT");
RegisterColumnType(DbType.Int32, "INT");
RegisterColumnType(DbType.Int64, "BIGINT"); 
```

但好消息是无符号整数确实映射到`INTEGER`.

```
RegisterColumnType(DbType.UInt16, "INTEGER");
RegisterColumnType(DbType.UInt32, "INTEGER");
RegisterColumnType(DbType.UInt64, "INTEGER"); 
```

因此，请尝试以下映射：

```
<id name="Id" type="UInt32">
  <generator class="identity" />
</id> 
```

对您的课程进行相应的更改：

```
public virtual UInt32 Id { get; set; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:28:58.277

我认为你的类型是错误的（但我可能是错的），根据[这篇](http://dotnet.dzone.com/articles/understanding-nhibernate-type)文章取自 Manning Publications 的 NHibernate in Action。

**.NET 原始映射类型**

```
Mapping Type  .NET Type      System.Data.DbType 
   Int16     System.Int16    DbType.Int16
   Int32     System.Int32    DbType.Int32
   Int64     System.Int64    DbType.Int64 
```

尝试`type='Int32'`完全使用或删除它

# c - 理解 Linux 内核中的 container_of 宏

> ID：15832301
> 
> 赞同：95
> 
> 时间：2013-04-05T11:06:33.630
> 
> 标签：c, linux-kernel, c-preprocessor

当我浏览Linux内核时，我发现一个`container_of`宏定义如下：

```
#define container_of(ptr, type, member) ({                      \
        const typeof( ((type *)0)->member ) *__mptr = (ptr);    \
        (type *)( (char *)__mptr - offsetof(type,member) );}) 
```

明白container_of是做什么的，但不明白的是最后一句话，就是

```
(type *)( (char *)__mptr - offsetof(type,member) );}) 
```

如果我们使用宏如下：

```
container_of(dev, struct wifi_device, dev); 
```

最后一句的对应部分是：

```
(struct wifi_device *)( (char *)__mptr - offset(struct wifi_device, dev); 
```

看起来什么都不做。有人可以在这里填补空白吗？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-04-05T11:21:15.560

您的使用示例`container_of(dev, struct wifi_device, dev);`可能有点误导，因为您在那里混合了两个命名空间。

虽然`dev`您的示例中的第一个是指指针的名称，但第二个`dev`是指结构成员的名称。

很可能这种混淆引起了所有人的头痛。实际上`member`，您引用中的参数是指在容器结构中赋予该成员的名称。

以这个容器为例：

```
struct container {
  int some_other_data;
  int this_data;
} 
```

以及指向您将使用宏获取指针`int *my_ptr`的成员的指针：`this_data``struct container *my_container`

```
struct container *my_container;
my_container = container_of(my_ptr, struct container, this_data); 
```

考虑到结构开头的偏移量`this_data`对于获得正确的指针位置至关重要。

实际上，您只需`this_data`从指针中减去成员的偏移量`my_ptr`即可获得正确的位置。

这正是宏的最后一行所做的。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-04-05T11:18:50.633

最后一句投了：

```
(type *)(...) 
```

指向给定的`type`. 指针计算为从给定指针的偏移量`dev`：

```
( (char *)__mptr - offsetof(type,member) ) 
```

使用`cointainer_of`宏时，您希望检索包含给定字段指针的结构。例如：

```
struct numbers {
    int one;
    int two;
    int three;
} n;

int *ptr = &n.two;
struct numbers *n_ptr;
n_ptr = container_of(ptr, struct numbers, two); 
```

您有一个指向结构中间的指针（并且您知道这是指向字段`two`[*结构中的字段名称*] 的指针），但您想检索整个结构 ( `numbers`)。因此，您计算结构中字段的偏移量`two`：

```
offsetof(type,member) 
```

并从给定的指针中减去这个偏移量。结果是指向结构开头的指针。最后，将此指针转换为结构类型以获得有效变量。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2019-01-21T11:06:22.743

Linux 内核中的 container_of() 宏 -

在代码中管理多个数据结构时，您几乎总是需要将一个结构嵌入到另一个结构中并随时检索它们，而不会被问到有关内存偏移或边界的问题。假设您有一个结构人员，定义如下：

```
 struct person { 
     int age; 
     int salary;
     char *name; 
 } p; 
```

通过仅具有年龄或薪水的指针，您可以检索包装（包含）该指针的整个结构。顾名思义，container_of 宏用于查找结构的给定字段的容器。该宏在 include/linux/kernel.h 中定义，如下所示：

```
#define container_of(ptr, type, member) ({               \ 
   const typeof(((type *)0)->member) * __mptr = (ptr);   \ 
   (type *)((char *)__mptr - offsetof(type, member)); }) 
```

不要害怕指针；只需如下所示：

```
container_of(pointer, container_type, container_field); 
```

以下是前面代码片段的元素：

*   指针：这是指向结构中字段的指针
*   container_type：这是包装（包含）指针的结构类型
*   container_field：这是结构内部指针指向的字段的名称

让我们考虑以下容器：

```
struct person { 
    int age; 
    int salary; 
    char *name; 
}; 
```

现在，让我们考虑它的一个实例，以及指向年龄成员的指针：

```
struct person somebody; 
[...] 
int *age_ptr = &somebody.age; 
```

除了指向名称成员 (age_ptr) 的指针外，您还可以使用 container_of 宏来获取指向包装此成员的整个结构 (容器) 的指针，方法是使用以下内容：

```
struct person *the_person; 
the_person = container_of(age_ptr, struct person, age); 
```

container_of 考虑了结构开头的年龄偏移量，以获得正确的指针位置。如果从指针age_ptr 中减去字段age 的偏移量，就会得到正确的位置。这是宏的最后一行的作用：

```
(type *)( (char *)__mptr - offsetof(type,member) ); 
```

将此应用于一个真实的例子，给出以下内容：

```
struct family { 
    struct person *father; 
    struct person *mother; 
    int number_of_sons; 
    int family_id; 
} f; 

/*   
 * Fill and initialise f somewhere   */      [...]

 /* 
  * pointer to a field of the structure 
  * (could be any (non-pointer) member in the structure) 
  */ 
   int *fam_id_ptr = &f.family_id; 
   struct family *fam_ptr; 

   /* now let us retrieve back its family */ 
   fam_ptr = container_of(fam_id_ptr, struct family, family_id); 
```

container_of 宏主要用于内核中的通用容器。

这就是内核中的 container_of 宏。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-04-05T11:31:08.967

它是对 gcc 扩展的利用，即[statements 表达式](http://gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html)。如果您将宏视为返回值的东西，那么最后一行将是：

```
return (struct wifi_device *)( (char *)__mptr - offset(struct wifi_device, dev); 
```

有关复合语句的解释，请参见链接页面。这是一个例子：

```
int main(int argc, char**argv)
{
    int b;
    b = 5;
    b = ({int a; 
            a = b*b; 
            a;});
    printf("b %d\n", b); 
} 
```

输出是

> b 25

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-08-28T16:32:40.417

一点真实的上下文说得更清楚，下面**以红黑树为例**，这是我理解的方式`container_of`。

如前所述`Documentation/rbtree.txt`，在 linux 内核代码中，它不是 rb_node 包含数据条目，而是

> rbtree 树中的数据节点是包含 struct rb_node 成员的结构。

`struct vm_area_struct`（在文件中`include/linux/mm_types.h:284`）就是这样一个结构，

在同一个文件中，有一个宏`rb_entry`定义为

```
#define rb_entry(ptr, type, member) container_of(ptr, type, member) 
```

**显然，`rb_entry`与 相同`container_of`。**

在`mm/mmap.c:299`内部函数定义`browse_rb`中，有一个用法`rb_entry`：

```
static int browse_rb(struct mm_struct *mm)
{
    /* two line code not matter */
    struct rb_node *nd, *pn = NULL; /*nd, first arg, i.e. ptr. */
    unsigned long prev = 0, pend = 0;

    for (nd = rb_first(root); nd; nd = rb_next(nd)) {
        struct vm_area_struct *vma;
        vma = rb_entry(nd, struct vm_area_struct, vm_rb);   
        /* -- usage of rb_entry (equivalent to container_of) */
        /* more code not matter here */ 
```

现在很清楚，在`container_of(ptr, type, member)`,

*   `type`是容器结构，这里`struct vm_area_struct`
*   `member`是`type`实例成员的名称，此处`vm_rb`为 ，类型为`rb_node`，
*   `ptr``member`是一个指向`type`实例的指针，这里`rb_node *nd`.

做`container_of`什么是，就像在这个例子中一样，

*   **给定`obj.member`（此处`obj.vm_rb`）的地址，返回 的地址`obj`。**
*   由于结构是一块连续的内存，**减号 的****地址将是容器的地址。`obj.vm_rb``offset between the struct and member`**

`include/linux/kernel.h:858` -- 定义`container_of`

`include/linux/rbtree.h:51` -- 定义`rb_entry`

`mm/mmap.c:299` -- 用法`rb_entry`

`include/linux/mm_types.h:284` --`struct vm_area_struct`

`Documentation/rbtree.txt:` -- 红黑树的文档

`include/linux/rbtree.h:36` -- 定义`struct rb_node`

**附言**

以上文件为当前开发版本，即`4.13.0-rc7`.

`file:k`表示 中的第 k 行`file`。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-05-14T13:18:00.367

对于理解 linux 内核中的 container_of 宏非常有用的链接。 [https://linux-concepts.blogspot.com/2018/01/understanding-containerof-macro-in.html](https://linux-concepts.blogspot.com/2018/01/understanding-containerof-macro-in.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-30T02:29:46.360

Container _of 宏的最简单实现如下，它减少了所有复杂的类型检查和工作

```
#define offsetof(TYPE, MEMBER) ((size_t) &((TYPE *)0)->MEMBER)
#define container_of(ptr, type, member) ((type *)((char *)(ptr) - offsetof(type, member))) 
```

ptr 将给出成员的地址并减去偏移差，您将获得起始地址。

示例用法

```
struct sample {
    int mem1;
    char mem2;
    int mem3;
};
int main(void)
{

struct sample sample1;

printf("Address of Structure sample1 (Normal Method) = %p\n", &sample1);
printf("Address of Structure sample1 (container_of Method) = %p\n", 
                        container_of(&sample1.mem3, struct sample, mem3));

return 0;
} 
```

# mysql - 从 2 个表中选择简单的 MYSQL

> ID：15832306
> 
> 赞同：0
> 
> 时间：2013-04-05T11:06:44.237
> 
> 标签：mysql

我有 2 个 mysql 表，一个当前表和一个存档表。存档表是当前表的精确副本，包含旧记录。

两个表都包含一个 advert_id 列。

我想在两个表中搜索 advert_id 等于某个值的记录。

如果第一个不存在，则搜索第二个。

我可以让它工作的唯一方法是执行两个选择语句，一个用于第一个表，然后如果找不到记录，则从第二个表中选择。我如何同时搜索两者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:10:28.187

只是在这里拍摄，但这应该可以。

```
SELECT * FROM `current` WHERE id = :id
UNION
SELECT * FROM `archived` LEFT JOIN `current` ON archived.id = current.ID
WHERE current.ID IS NULL AND archived.id = :id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:25:38.200

下面试试。

```
select * from Current where advert_id = 222
Union
select * from Archived where advert_id = 333 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T11:54:35.357

试试这个

```
Select * from Current a , Archive b where a.advert_id = 222 or b.advert_id = 222 
```

这将搜索两个表

# android - Google Play 许可证 - 什么是错误 6？

> ID：15832310
> 
> 赞同：4
> 
> 时间：2013-04-05T11:06:56.437
> 
> 标签：android, android-lvl

我正在使用 Google Play License API 测试我的应用程序。该应用程序成功绑定到许可服务，但回调给出错误 6。我检查了 LicenseValidator 中的错误代码，这不是那里列出的错误代码之一。

有谁知道错误6是什么意思？

```
public class MyActivity extends FragmentActivity
{

    private static final String BASE64_PUBLIC_KEY = "ZZZZ";

    private static final byte[] SALT = new byte[] {
        XXXX
    };

    private LicenseCheckerCallback mLicenseCheckerCallback;
    private LicenseChecker mChecker;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
    super.onCreate(savedInstanceState);

        String deviceId = Secure.getString(getContentResolver(), Secure.ANDROID_ID);

        // Library calls this when it's done.
        mLicenseCheckerCallback = new YAHLicenseCheckerCallback();

        // Construct the LicenseChecker with a policy, obfuscator and public key
        mChecker = new LicenseChecker(this, 
                new ServerManagedPolicy(this,
                new AESObfuscator(SALT, getPackageName(), deviceId)),
                BASE64_PUBLIC_KEY);
        mChecker.checkAccess(mLicenseCheckerCallback);
    }

    private class YAHLicenseCheckerCallback implements LicenseCheckerCallback {
        public void allow(int policyReason) {
            Log.d(tag,"License - allowed");

            if (isFinishing()) {
                // Don't do anything if Activity is finishing.
                return;
            }
            // Should allow user access.

        }

        public void dontAllow(int policyReason) {
            Log.d(tag,"License - not allowed");

            if (isFinishing()) {
                // Don't do anything UI if Activity is finishing.
                return;
            }

            // Should not allow access. In most cases, the app should assume
            // the user has access unless it encounters this. If it does,
            // the app should inform the user of their unlicensed ways
            // and then either shut down the app or limit the user to a
            // restricted set of features.

        }

        public void applicationError(int errorCode) {

            Log.d(tag,"License - application error code "+errorCode);

            if (isFinishing()) {
                // Don't update UI if Activity is finishing.
                return;
            }
            // This is a polite way of saying the developer made a mistake
            // while setting up or calling the license checker library.
            // Please examine the error code and fix the error.

        }
    }

    @Override
    protected void onDestroy()
    {
    mChecker.onDestroy();
    super.onDestroy();
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T13:39:36.897

好的，我已经解决了。错误 6 不是来自 LicenceValidator，而是来自 LicenseChecker，表示缺少权限。我没有给应用程序 com.android.vending.CHECK_LICENSE 权限。当我这样做时，它开始工作。

感谢您的关注，我希望这可以帮助任何犯同样错误的人。

# javascript - 通过与javascript中的今天日期进行比较来允许今天的日期和未来的日期

> ID：15832322
> 
> 赞同：-1
> 
> 时间：2013-04-05T11:07:23.297
> 
> 标签：javascript, jquery, datetime, validation

我有一个输入表格，我可以在其中允许今天的日期和未来的日期，但不能允许昨天和前几天。我需要在客户端使用 java-script 进行此验证。

```
var futuredate = new Date($("#Deadline").val());
var today = new Date(); 
```

这给了我与时间的约会。`Mon Nov 04 2013 00:00:00 GMT+0530 (India Standard Time)` 我只想比较日期，因为用户输入今天的日期输入的日期是：`Fri Apr 05 2013 00:00:00 GMT+0530 (India Standard Time)` 来自新日期（）的当前日期：`Fri Apr 05 2013 16:53:00 GMT+0530 (India Standard Time)`

我尝试使用`sethours()`它在当月工作得很好，但是当它以数字形式转换日期时，当输入的日期是上个月或之前的任何月份时，它会产生问题。例如：输入的日期 date is`23/3/2013`和 today is`5/4/2013`它认为输入的日期是有效的。

```
var futuredate = new Date($("#Deadline").val()).setHours(0, 0, 0, 0);
var today = new Date().setHours(0, 0, 0, 0);
if (futuredate >= today) {
   alert("Valid");
}
else if (futuredate < today) {
   alert("InValid");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:15:54.450

尝试以下操作，它使用一个小函数将您的日期字符串解析为日期对象，然后再使用`setHours()`. 如果您的字符串格式为 dd/mm/yyyy 或 dd-mm-yyyy，这将起作用。

```
var futuredate = parseDate(input).setHours(0, 0, 0, 0);
var today = new Date().setHours(0, 0, 0, 0);
if (futuredate >= today) {
   alert("Valid");
}
else if (futuredate < today) {
   alert("InValid");
}

//function to return a date object from the date string passed to it
function parseDate(input) {
    var parts = input.match(/(\d+)/g);
    return new Date(parts[2], (parts[1]-1), parts[0]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:27:45.620

只需拆分日期并设置日期功能概念。使用这种方式我们可以轻松比较日期

```
 var a =futuredate.split('/');
 var b =today.split('/');
 var date1 = new Date(a[2],a[1],a[0]);
 var date2 = new Date(b[2],b[1],b[0]);

if (date1 >= date2) {
   alert("Valid");
}
else if (date1 < date2) {
   alert("InValid");
} 
```

# java - 并行点击一个 url n 次

> ID：15832323
> 
> 赞同：1
> 
> 时间：2013-04-05T11:07:23.513
> 
> 标签：java, multithreading

我想同时点击一个 url n 次。我用谷歌搜索并找到[了这个](http://www.javapractices.com/topic/TopicAction.do?Id=247)网址。我尝试根据我的要求进行更改（点击一个 url n 次并查看每个 URL 的响应），但没有成功。我在上面的链接中添加了以下代码来执行请求并在 Task 类构造函数中获取响应，但是这个只能认真工作。

```
DefaultHttpClient client = new DefaultHttpClient();
  HttpPost method = new HttpPost(aURL);
  try {
      HttpResponse httpResponse=client.execute(method);
      StringBuffer buffer = new StringBuffer();
      BufferedReader reader = new BufferedReader(new InputStreamReader(httpResponse.getEntity().getContent()));
      String dataLine = null;
      while((dataLine = reader.readLine()) != null){
            buffer.append(dataLine);
      }
      String responseMsg =    buffer.toString();
      System.out.println(responseMsg); 
```

任何帮助都会得到帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:47:41.853

您可以使用线程数等于您要发送的并行请求数的线程池。将您的逻辑（创建和发送请求）包装到可运行的任务中，并使用循环创建和提交任务的实例。

```
int numOfThreads = ... <num of parallel requests to generate>
ExecutorService es = Executors.newFixedThreadPool(numOfThreads);
for (int i = 0; i < numOfThreads; i++) {
    es.submit(new Task());
} 
```

你的任务可能是这样的。你可以在 run() 实现中做任何你必须做的事情。此外，您可以即兴使用同步器立即设置线程。

```
class Task implements Runnable{
    @Override
    public void run() {
        DefaultHttpClient client = new DefaultHttpClient();
        HttpPost method = new HttpPost(aURL);
        try {
            HttpResponse httpResponse=client.execute(method);
            StringBuffer buffer = new StringBuffer();
            BufferedReader reader = new BufferedReader(new InputStreamReader(httpResponse.getEntity().getContent()));
            String dataLine = null;
            while((dataLine = reader.readLine()) != null){
                buffer.append(dataLine);
            }
            String responseMsg =    buffer.toString();
            System.out.println(responseMsg);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:16:29.113

一种方法是，在线程中创建所有此类请求，创建 n 个线程，然后`start()`依次创建它们。虽然`start()`是串行的，但作为网络操作将并行执行（在某种程度上）。虽然这种方式不可能完全平行。

另一种方法是创建这些 n 请求任务并将其安排到特定时间，但是`timer-task`（为此，获取当前时间，并给出一些偏移量以便能够实例化 n 线程，并在最初获取的时间安排所有这些）

**像这样的代码：**

```
 public void createNparralelRequest(int n){
        long time = new Date().gettime();
        for(i=0;i<n;i++){
            Timer timer = new Timer();
            TimerTask task = new TimerTask(){
                public void run(){
                    //call to web request method
                }
            timer.schedule(task, time);
        }
    }
} 
```

# php - TCP_NODELAY 与持久套接字？

> ID：15832330
> 
> 赞同：4
> 
> 时间：2013-04-05T11:07:42.290
> 
> 标签：php, sockets, tcp, persistent-connection, nagle

似乎我可以使用 pfsockopen() 获得持久的套接字连接，或者使用 socket_connect() 获得正常的套接字连接，然后使用 socket_set_option() 设置 TCP_NODELAY。但是没有办法通过 TCP_NODELAY 获得持久的套接字连接。

有没有办法在 php 中获得与 TCP_NODELAY 的持久套接字连接？

# java - 是否可以获得手机当前选择的配置文件？

> ID：15832332
> 
> 赞同：8
> 
> 时间：2013-04-05T11:07:44.447
> 
> 标签：java, android, cyanogenmod

库存的 Cyanogenmod ROM 支持内置配置文件，虽然我不确定这是否是默认 Android 功能的一部分，但我想知道是否可以获得当前选择的配置文件的名称。

我还没有找到任何关于此的开发人员文档。

（假设 Android SDK 不支持这个，超级用户应用可以实现这个功能吗？）

谢谢

* * *

通过一些 CM 源，我找到了[ProfileManager](https://github.com/CyanogenMod/android_frameworks_base/blob/cm-10.1/core/java/android/app/ProfileManager.java)的源代码。这些方法是公开的，所以我想我不需要深入 Java 反射的兔子洞……但为了使用这些类，我需要一些 Cyanogenmod JAR 来构建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:32:55.857

知道了。有点丑陋的反射和瞧。这些类是[ProfileManager](https://github.com/CyanogenMod/android_frameworks_base/blob/cm-10.1/core/java/android/app/ProfileManager.java)和[Profile](https://github.com/CyanogenMod/android_frameworks_base/blob/cm-10.1/core/java/android/app/Profile.java)

```
 Object o = getSystemService("profile");
    try {

        Class<?> ProfileManager = Class.forName("android.app.ProfileManager");
        Class<?> Profile = Class.forName("android.app.Profile");
        try {

            Method getActiveProfile = ProfileManager.getDeclaredMethod("getActiveProfile", null);
            Method getName = Profile.getDeclaredMethod("getName", null);

            try {

                String strProfile = (String) getName.invoke(getActiveProfile.invoke(o));
                System.out.println("Current profile is: " + strProfile);

            } catch (IllegalAccessException e) {
                e.printStackTrace();
            } catch (InvocationTargetException e) {
                e.printStackTrace();
            }

        } catch (NoSuchMethodException e) {
            e.printStackTrace();
        }           

    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    } 
```

# java - ListView的Android自定义行项

> ID：15832335
> 
> 赞同：75
> 
> 时间：2013-04-05T11:07:50.720
> 
> 标签：java, android, android-layout, android-listview, android-arrayadapter

我有一个 ListView，它的行中应该有以下布局：

```
HEADER
Text 
```

`HEADER`应该是静态的，但`Text`每隔几秒就会改变一次。

我通过填充 a 来实现它`String[] array`，将其传递给 an`ArrayAdapter`并在每次数据更改时设置它：

```
data_array = populateString();
adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1,  data_array);
listView.setAdapter(adapter); 
```

我的问题是我不知道如何以上述格式显示数据。

提前致谢。

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2013-04-05T11:18:58.880

### 将此 row.xml 添加到您的布局文件夹

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<TextView android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Header"/>

<TextView 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/text"/>

</LinearLayout> 
```

### 使您的主要 xml 布局像这样

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <ListView
        android:id="@+id/listview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </ListView>

</LinearLayout> 
```

这是你的适配器

```
class yourAdapter extends BaseAdapter {

    Context context;
    String[] data;
    private static LayoutInflater inflater = null;

    public yourAdapter(Context context, String[] data) {
        // TODO Auto-generated constructor stub
        this.context = context;
        this.data = data;
        inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return data.length;
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return data[position];
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        View vi = convertView;
        if (vi == null)
            vi = inflater.inflate(R.layout.row, null);
        TextView text = (TextView) vi.findViewById(R.id.text);
        text.setText(data[position]);
        return vi;
    }
} 
```

### 你的 java 活动

```
public class StackActivity extends Activity {

    ListView listview;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        listview = (ListView) findViewById(R.id.listview);
        listview.setAdapter(new yourAdapter(this, new String[] { "data1",
                "data2" }));
    }
} 
```

### 结果

![在此处输入图像描述](https://i.stack.imgur.com/IzoOH.jpg)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-05T11:25:08.617

使用自定义列表视图。

您还可以通过自定义背景来自定义行的外观。activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical" 
 android:background="#0095FF"> //background color

<ListView android:id="@+id/list"
 android:layout_width="fill_parent"
 android:layout_height="0dip"
 android:focusableInTouchMode="false"
 android:listSelector="@android:color/transparent"
 android:layout_weight="2"
 android:headerDividersEnabled="false"
 android:footerDividersEnabled="false"
 android:dividerHeight="8dp" 
 android:divider="#000000" 
 android:cacheColorHint="#000000"
android:drawSelectorOnTop="false">
</ListView> 
```

主要活动

在 MainActivity 中定义 populateString()

```
 public class MainActivity extends Activity {

   String data_array[];
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
            data_array = populateString(); 
    ListView ll = (ListView) findViewById(R.id.list);
    CustomAdapter cus = new CustomAdapter();
    ll.setAdapter(cus);
}

class CustomAdapter extends BaseAdapter
{
    LayoutInflater mInflater;

    public CustomAdapter()
    {
        mInflater = (LayoutInflater) MainActivity.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }
    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return data_array.length;//listview item count. 
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position; 
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        final ViewHolder vh;
        vh= new ViewHolder();

        if(convertView==null )
         {
            convertView=mInflater.inflate(R.layout.row, parent,false);
                    //inflate custom layour
            vh.tv2= (TextView)convertView.findViewById(R.id.textView2);

         }
        else
        {
         convertView.setTag(vh);
        }
               //vh.tv2.setText("Position = "+position);
            vh.tv2.setText(data_array[position]);   
                           //set text of second textview based on position

        return convertView;
    }

 class ViewHolder
 {
    TextView tv1,tv2;
 }

   }  
} 
```

行.xml。每行的自定义布局。

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:orientation="vertical" >

 <TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="Header" />

 <TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="TextView" />

 </LinearLayout> 
```

为自定义布局充气。使用**视图支架来实现平滑滚动**和性能。

[http://developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)

[http://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)。演讲是关于 android 开发人员的 listview 性能。

![在此处输入图像描述](https://i.stack.imgur.com/2YMIO.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-05T11:21:45.373

创建资源布局文件 list_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:layout_width="match_parent"
          android:layout_height="wrap_content">
<TextView
        android:id="@+id/header_text"
        android:layout_height="0dp"
        android:layout_width="fill_parent"
        android:layout_weight="1"
        android:text="Header"
        />
<TextView
        android:id="@+id/item_text"
        android:layout_height="0dp"
        android:layout_width="fill_parent"
        android:layout_weight="1"
        android:text="dynamic text"
        />
</LinearLayout> 
```

并像这样初始化适配器

```
adapter = new ArrayAdapter<String>(this, R.layout.list_item,R.id.item_text,data_array); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-18T11:01:00.913

**步骤 1：创建 XML 文件**

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical">

        <ListView
            android:id="@+id/lvItems"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            />
    </LinearLayout> 
```

**第二步：Studnet.java**

```
package com.scancode.acutesoft.telephonymanagerapp;

public class Student
{
    String email,phone,address;

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getPhone() {
        return phone;
    }

    public void setPhone(String phone) {
        this.phone = phone;
    }

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }
} 
```

**第三步：MainActivity.java**

```
 package com.scancode.acutesoft.telephonymanagerapp;

    import android.app.Activity;
    import android.os.Bundle;
    import android.widget.ListView;

    import java.util.ArrayList;

    public class MainActivity extends Activity  {

        ListView lvItems;
        ArrayList<Student> studentArrayList ;
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            lvItems = (ListView) findViewById(R.id.lvItems);
            studentArrayList = new ArrayList<Student>();
            dataSaving();
            CustomAdapter adapter = new CustomAdapter(MainActivity.this,studentArrayList);
            lvItems.setAdapter(adapter);
        }

        private void dataSaving() {

            Student student = new Student();
            student.setEmail("abc@gmail.com");
            student.setPhone("1234567890");
            student.setAddress("Hyderabad");
            studentArrayList.add(student);

            student = new Student();
            student.setEmail("xyz@gmail.com");
            student.setPhone("1234567890");
            student.setAddress("Banglore");
            studentArrayList.add(student);

            student = new Student();
            student.setEmail("xyz@gmail.com");
            student.setPhone("1234567890");
            student.setAddress("Banglore");
            studentArrayList.add(student);

            student = new Student();
            student.setEmail("xyz@gmail.com");
            student.setPhone("1234567890");
            student.setAddress("Banglore");
            studentArrayList.add(student);
        }

    } 
```

**第四步：CustomAdapter.java**

```
 package com.scancode.acutesoft.telephonymanagerapp;

    import android.content.Context;
    import android.view.LayoutInflater;
    import android.view.View;
    import android.view.ViewGroup;
    import android.widget.BaseAdapter;
    import android.widget.TextView;

    import java.util.ArrayList;

    public class CustomAdapter extends BaseAdapter
    {
        ArrayList<Student> studentList;
        Context mContext;

        public CustomAdapter(Context context, ArrayList<Student> studentArrayList) {
            this.mContext = context;
            this.studentList = studentArrayList;

        }

        @Override
        public int getCount() {
            return studentList.size();
        }
        @Override
        public Object getItem(int position) {
            return position;
        }

        @Override
        public long getItemId(int position) {
            return position;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            Student student = studentList.get(position);
            convertView = LayoutInflater.from(mContext).inflate(R.layout.student_row,null);

            TextView tvStudEmail = (TextView) convertView.findViewById(R.id.tvStudEmail);
            TextView tvStudPhone = (TextView) convertView.findViewById(R.id.tvStudPhone);
            TextView tvStudAddress = (TextView) convertView.findViewById(R.id.tvStudAddress);

            tvStudEmail.setText(student.getEmail());
            tvStudPhone.setText(student.getPhone());
            tvStudAddress.setText(student.getAddress());

            return convertView;
        }
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T11:15:20.007

您可以关注`BaseAdapter`并创建您的客户`Xml`文件并将其与您绑定并使用[see here](http://theopentutorials.com/tutorials/android/listview/android-custom-listview-with-image-and-text-using-baseadapter/) need to change file as Require`BaseAdpter`填充它。`Listview` `xml`

# c# - 在asp.net中将gridview数据导出到excel

> ID：15832339
> 
> 赞同：9
> 
> 时间：2013-04-05T11:07:57.203
> 
> 标签：c#, asp.net, excel

我试图将网格视图数据传输到 excel .... 但输出是一个空白的 excel 表。如何解决这个问题？是否有任何代码可以将网格视图值传输到带有数据库的 excel 表？

```
protected void btnexcel_Click1(object sender, EventArgs e)
{
    Response.Clear();
    Response.Buffer = true;
    Response.AddHeader("content-disposition", "attachment;filename=GridViewExport.xls");
    Response.Charset = "";
    Response.ContentType = "application/vnd.ms-excel";

    StringWriter sw = new StringWriter();
    HtmlTextWriter hw = new HtmlTextWriter(sw);

    gvdetails.AllowPaging = false;
    gvdetails.DataBind(); 
    gvdetails.HeaderRow.Style.Add("background-color", "#FFFFFF");
    gvdetails.HeaderRow.Cells[0].Style.Add("background-color", "green");
    gvdetails.HeaderRow.Cells[1].Style.Add("background-color", "green");
    gvdetails.HeaderRow.Cells[2].Style.Add("background-color", "green");
    for (int i = 0; i < gvdetails.Rows.Count;i++ )
    {
        GridViewRow row = gvdetails.Rows[i];
        row.BackColor = System.Drawing.Color.White;
        row.Attributes.Add("class", "textmode");
        if (i % 2 != 0)
        {
            row.Cells[0].Style.Add("background-color", "#C2D69B");
            row.Cells[1].Style.Add("background-color", "#C2D69B");
            row.Cells[2].Style.Add("background-color", "#C2D69B");
        }
    }

    string style = @"<style> .textmode { mso-number-format:\@; } </style>"; 
    Response.Write(style); 

    Response.Output.Write(sw.ToString());
    Response.End();
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-05T11:28:41.660

您的工作表是空白的，因为您的字符串编写器为空。这可能会有所帮助

```
System.Web.UI.HtmlTextWriter htmlWrite =
    new HtmlTextWriter(stringWrite);

    GridView1.RenderControl(htmlWrite); 
```

这是完整的代码

```
protected void Button1_Click(object sender, EventArgs e)
{
    Response.Clear();

    Response.AddHeader("content-disposition", "attachment;
    filename=FileName.xls");

    Response.ContentType = "application/vnd.xls";

    System.IO.StringWriter stringWrite = new System.IO.StringWriter();

    System.Web.UI.HtmlTextWriter htmlWrite =
    new HtmlTextWriter(stringWrite);

    GridView1.RenderControl(htmlWrite);

    Response.Write(stringWrite.ToString());

    Response.End();

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T13:13:33.237

可能是导出 excel 中数据绑定的问题。检查数据是否正确放入gridview。

使用此代码在 excel 表中导出网格视图，并注意您必须在项目中添加 iTextSharp dll。

```
protected void btnExportExcel_Click(object sender, EventArgs e)
    {
        Response.Clear();
        Response.Buffer = true;
        Response.AddHeader("content-disposition", "attachment;filename=GridViewExport.xls");
        Response.Charset = "";
        Response.ContentType = "application/vnd.ms-excel";

        StringWriter sw = new StringWriter();
        HtmlTextWriter hw = new HtmlTextWriter(sw);
        GridView1.AllowPaging = false;

        // Re-Bind data to GridView 

        using (CompMSEntities1 CompObj = new CompMSEntities1())
        {
            Start = Convert.ToDateTime(txtStart.Text);
            End = Convert.ToDateTime(txtEnd.Text);

            GridViewSummaryReportCategory.DataSource = CompObj.SP_Category_Summary(Start, End);
            SP_Category_Summary_Result obj1 = new SP_Category_Summary_Result();
            GridView1.DataBind();
           GridView1.Visible = true;
            ExportTable.Visible = true;
        }

        //Change the Header Row back to white color

        GridView1.HeaderRow.Style.Add("background-color", "#FFFFFF");

       GridView1.Style.Add(" font-size", "10px");

        //Apply style to Individual Cells

        GridView1.HeaderRow.Cells[0].Style.Add("background-color", "green");
        GGridView1.HeaderRow.Cells[1].Style.Add("background-color", "green");
        GridView1.HeaderRow.Cells[2].Style.Add("background-color", "green");
        GridView1.HeaderRow.Cells[3].Style.Add("background-color", "green");
        GridView1.HeaderRow.Cells[4].Style.Add("background-color", "green");

        for (int i = 1; i < GridView1.Rows.Count; i++)
        {
            GridViewRow row = GridView1.Rows[i];

            //Change Color back to white

            row.BackColor = System.Drawing.Color.White;

            //Apply text style to each Row

        //    row.Attributes.Add("class", "textmode");

            //Apply style to Individual Cells of Alternating Row

            if (i % 2 != 0)
            {
                row.Cells[0].Style.Add("background-color", "#C2D69B");
                row.Cells[1].Style.Add("background-color", "#C2D69B");
                row.Cells[2].Style.Add("background-color", "#C2D69B");
                row.Cells[3].Style.Add("background-color", "#C2D69B");
                row.Cells[4].Style.Add("background-color", "#C2D69B");
            }
        }
        GridView1.RenderControl(hw);

        //style to format numbers to string

        string style = @"<style> .textmode { mso-number-format:\@; } </style>";

        Response.Write(style);
        Response.Output.Write(sw.ToString());
        Response.Flush();
        Response.End();
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-18T10:30:18.303

我想它会帮助你

```
string filename = String.Format("Results_{0}_{1}.xls", DateTime.Today.Month.ToString(), DateTime.Today.Year.ToString());
        if (!string.IsNullOrEmpty(GRIDVIEWNAME.Page.Title))
            filename = GRIDVIEWNAME.Page.Title + ".xls";

        HttpContext.Current.Response.Clear();

        HttpContext.Current.Response.AddHeader("Content-Disposition", "attachment;filename=" + filename);

        HttpContext.Current.Response.ContentType = "application/vnd.ms-excel";
        HttpContext.Current.Response.Charset = "";

        System.IO.StringWriter stringWriter = new System.IO.StringWriter();
        System.Web.UI.HtmlTextWriter htmlWriter = new HtmlTextWriter(stringWriter);

        System.Web.UI.HtmlControls.HtmlForm form = new System.Web.UI.HtmlControls.HtmlForm();
        GRIDVIEWNAME.Parent.Controls.Add(form);
        form.Controls.Add(GRIDVIEWNAME);
        form.RenderControl(htmlWriter);

        HttpContext.Current.Response.Write("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" />");
        HttpContext.Current.Response.Write(stringWriter.ToString());
        HttpContext.Current.Response.End(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T11:31:25.560

而不是做所有这些......你不能使用更简单的方法，如下所示。

```
Response.ClearContent();
            Response.AddHeader("content-disposition", "attachment; filename=" + strFileName);
            Response.ContentType = "application/excel";
            System.IO.StringWriter sw = new System.IO.StringWriter();
            HtmlTextWriter htw = new HtmlTextWriter(sw);
            gv.RenderControl(htw);
            Response.Write(sw.ToString());
            Response.End(); 
```

[你可以在这里](http://www.dotnetpools.com/Article/ArticleDetiail/?articleId=22)得到整个演练

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T12:21:47.807

其他要检查的是确保视图状态处于打开状态（我昨天刚刚解决了这个问题）。如果您没有打开视图状态，则网格视图将是空白的，直到您再次加载它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-27T20:09:58.237

最好的方法是使用 closedxml。以下是链接供参考

[https://closedxml.codeplex.com/wikipage?title=Adding%20DataTable%20as%20Worksheet&referringTitle=Documentation](https://closedxml.codeplex.com/wikipage?title=Adding%20DataTable%20as%20Worksheet&referringTitle=Documentation)

你可以简单地使用

```
 var wb = new ClosedXML.Excel.XLWorkbook();
DataTable dt = GeDataTable();//refer documentaion

wb.Worksheets.Add(dt);

Response.Clear();
Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
Response.AddHeader("content-disposition", "attachment;filename=\"FileName.xlsx\"");

using (var ms = new System.IO.MemoryStream()) {
    wb.SaveAs(ms);
    ms.WriteTo(Response.OutputStream);
    ms.Close();
}

Response.End(); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-05T11:19:22.897

尽管您 的代码中有任何内容`DataSource`，但我没有`gridview`
`DataBind`

```
gvdetails.DataBind(); 
```

# mysql - 调整 MySQL 缓冲区大小 - Mac Mini 2012 with 16GB

> ID：15832340
> 
> 赞同：0
> 
> 时间：2013-04-05T11:07:58.917
> 
> 标签：mysql, buffer, osx-mountain-lion, my.cnf

我正在配置 mySQL 缓冲区大小。我发现它真的很慢。我在具有 16GBRAM OS X Mountain Lion 的 i5 mac mini 上运行 mySQL。我的数据库大小约为 10GB。这是 my.cnf 文件的副本，我希望有人可以提供一些关于获得更好性能的建议。

```
[client]
socket = /var/mysql/mysql.sock

[mysqld]
socket = /var/mysql/mysql.sock

key_buffer_size = 2536M
read_buffer_size = 16M 
performance_schema = ON
query_cache_size = 128M
query_cache_type=1
query_cache_limit=16M
bulk_insert_buffer_size = 1000M 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:07:28.497

您正在调整的变量主要与 MyISAM 相关。对于 InnoDB，请查看：[what-to-tune-in-mysql-server-after-installation](http://www.mysqlperformanceblog.com/2006/09/29/what-to-tune-in-mysql-server-after-installation/)、[innodb-performance-optimization-basics](http://www.mysqlperformanceblog.com/2007/11/01/innodb-performance-optimization-basics/)和[selection-innodb_buffer_pool_size](http://www.mysqlperformanceblog.com/2007/11/03/choosing-innodb_buffer_pool_size/)

# asp.net - 使用自引用时无法确定有效的排序错误

> ID：15832346
> 
> 赞同：1
> 
> 时间：2013-04-05T11:08:15.393
> 
> 标签：asp.net, asp.net-mvc-4

我有这个架构：

![在此处输入图像描述](https://i.stack.imgur.com/O6m1r.png)

`Category`实体通过`ParentCategoryId`字段引用自身。`ParentCategoryId`字段可以为空。我首先使用数据库。这是为此生成的代码`entity`：

```
public partial class Category
{
    public Category()
    {
        this.Category1 = new HashSet<Category>();
        this.News = new HashSet<News>();
    }

    public int CategoryId { get; set; }
    public string Name { get; set; }
    public Nullable<int> ParentCategoryId { get; set; }

    public virtual ICollection<Category> Category1 { get; set; }
    public virtual Category Category2 { get; set; }
    public virtual ICollection<News> News { get; set; }
} 
```

当我插入一个其`ParentCategoryId`字段可以为空的类别时，一切都很好，但是当我为我选择一个值时，`ParentCategoryId`我得到了这个异常：

```
Unable to determine a valid ordering for dependent operations. Dependencies may exist due to foreign key constraints, model requirements, or store-generated values 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:03:34.120

我有一个 pk=0 的类别，当我选择它作为父级时，我提到了错误。删除此类别后，问题得到解决。

# c# - 如何从客户端读取 StreamReader 响应？

> ID：15832351
> 
> 赞同：1
> 
> 时间：2013-04-05T11:08:18.347
> 
> 标签：c#, xml, wcf, rest, generics

我是 REST 网络服务的新手。我需要在 C# 控制台应用程序中使用现有的 REST 服务。我在下一行得到 XML 响应。

```
readStream.ReadLine(); 
```

我们如何在客户端使用 REST 响应？

**效用**

```
 public void SearchContactDetailsAsync(Models.AddressBookRequest addressBookDataRequest)
    {
        UriBuilder builder = new UriBuilder(url);
        restClient.DoPost(builder.Uri, Serializer.SerializeXml(addressBookDataRequest.contactsSearchCriteria), SearchContactSuccess, SearchContactFailed, addressBookDataRequest.HeaderParams);
    }

    private void SearchContactSuccess(HttpWebResponse response)
    {
        //Call base service method - to inspect the response and publish an event
        HandleServiceSearchSuccess<ContactDetailsPreview[]>(SearchContactDetailsCompleted, "contactDetailsPreviews", response);
        Stream receiveStream = response.GetResponseStream();
        Encoding encode = System.Text.Encoding.UTF8;

        StreamReader readStream = new StreamReader(receiveStream, encode);
        readStream.ReadLine();

    } 
```

**控制台应用**

```
 public void MyMethod()
    {
        autoRestEvent = new AutoResetEvent(false);
        services = new communicationSvcs();
        services.SearchContactDetailsCompleted += new EventHandler<RestClientUtility.EventArg.ServiceResponseEventArgs<RestClientUtility.Models.ContactDetailsPreview[]>>(services_SearchContactDetailsCompleted);

        //Call the operation
        AddressBookRequest req = new AddressBookRequest
        {
            contactsSearchCriteria = new ContactsSearchCriteria
            {
                searchUserID = "ss23ed"

            },
            HeaderParams = new RestClientUtility.Requests.HttpHeaderParms
            {
                UserId = "ss23ed",
                UserPrincipalName = " ss23ed@hotmail.com",
                ContentType = "application/xml"
            }
        };
        services.SearchContactDetailsAsync(req);
        autoRestEvent.WaitOne();

    } 
```

**参考**

1.  [XML反序列化泛型方法](https://stackoverflow.com/questions/14562415/xml-deserialization-generic-method)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:14:43.027

.NET 的[XmlDocument 类](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)有一个接受流的 Load() 方法

如我所见，您只需要向它提供流

```
 XmlDocument doc = XmlDocument.Load( readStream ); 
```

我真的看不出它是否是静态方法，并且我没有在这里测试它的环境，但也许您需要先创建 XmlDocument 的实例，然后从中运行 Load() 方法（如果它不是静态的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:24:22.453

从流创建一个`XmlDocument`： -

```
XmlDocument document = new XmlDocument();
using(StreamReader readStream = new StreamReader(receiveStream, encode)) 
{        
    document.Load(readStream);
} 
```

重写`MyMethod`以获取`XmlDocument`：

```
public void MyMethod(XmlDocument xDoc) 
```

并在方法内部传递它`SearchContactSuccess`，假设您有一个类的实例和对控制台应用程序/实用程序所在位置的引用等：

```
MyMethod(document); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-26T11:40:00.150

以下是从 REST 服务读取响应的伪代码。这有一个通用的反序列化方法

注意：ContactDetailsPreview 是响应对象类型

//通用反序列化

```
 public static T DeserializeXml<T>(Stream stream, XmlRootAttribute root)
  {
            XmlSerializer deserializer = new XmlSerializer(typeof(T), root);
            return (T)deserializer.Deserialize(stream);
  } 
```

// 代码段 1

```
restClient.DoPost(builder.Uri, Serializer.SerializeXml(addressBookDataRequest.contactsSearchCriteria), SearchContactSuccess, SearchContactFailed, addressBookDataRequest.HeaderParams); 
```

//代码段2

```
public event EventHandler<ServiceResponseEventArgs<ContactDetailsPreview[]>> SearchContactDetailsCompleted; 
```

//代码段3

```
private void SearchContactSuccess(HttpWebResponse response)
    {

        //Call base service method - to inspect the response and publish an event
        HandleServiceSearchSuccess<ContactDetailsPreview[]>(SearchContactDetailsCompleted, "contactDetailsPreviews", response);
        Stream receiveStream = response.GetResponseStream();
        Encoding encode = System.Text.Encoding.UTF8;
        StreamReader readStream = new StreamReader(receiveStream, encode);
        readStream.ReadLine();
    } 
```

//搜索成功响应的通用处理程序

```
public void HandleServiceSearchSuccess<T>(EventHandler<ServiceResponseEventArgs<T>> eventHandler, String rootElementName, HttpWebResponse response)
{
EventHandler<ServiceResponseEventArgs<T>> theGivenEventHandler = eventHandler;
obj = Serializer.DeserializeXml<T>(response.GetResponseStream(), new XmlRootAttribute() { ElementName = rootElementName });
    theGivenEventHandler(this, new ServiceResponseEventArgs<T>(obj));

} 
```

# java - 构建一个 trie JAVA

> ID：15832354
> 
> 赞同：-3
> 
> 时间：2013-04-05T11:08:22.017
> 
> 标签：java, string, file, add

如何在 java 中构建 Trie？任何有用的链接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:14:33.897

看起来您正在尝试构建[Trie](http://en.wikipedia.org/wiki/Trie)。我在谷歌搜索时得到了[这个](http://www.cs.duke.edu/~ola/courses/cps108/fall96/joggle/trie/Trie.java)例子。

# javascript - .off('click') - 但我想再次'click'

> ID：15832357
> 
> 赞同：1
> 
> 时间：2013-04-05T11:08:26.367
> 
> 标签：javascript, jquery, html

我正在尝试这样做。这是在jsfiddle：http: [//jsfiddle.net/QGGhW/2/](http://jsfiddle.net/QGGhW/2/)

但是在我点击之后`not now`，下一个文本输入就不再可点击了。

我怎样才能做到这一点？是否有类似的东西`.on('click');`再次追加点击事件？

感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:10:52.290

> 是否有类似的东西`.on('click');`再次追加点击事件？

是的。它是`.on('click', eventHandler)`。

请参阅 jQuery 文档以获取[`on()`](http://api.jquery.com/on/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:12:23.933

要删除已注册的处理程序，您还需要将已注册的事件处理程序实例传递给[.off](http://api.jquery.com/off/)方法。

```
$(document).ready(function(){
    function fn(){
        $(this).html('<textarea> </textarea><button class="test">save</button><button class="dont">not now</button>').off('click', fn);
    };
    $('#write_comment').on('click', fn);

    $('#write_comment').on('click','.test', function(){
        alert('testme');
    });
    $('#write_comment').on('click','.dont', function(){
        console.log('d')
        $('#write_comment').text('click me').on('click', fn);
    });
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/uxfz8/1/)

# c++ - OpenGL ES 2D 场景，不同元素的多个场景图树

> ID：15832369
> 
> 赞同：0
> 
> 时间：2013-04-05T11:09:02.283
> 
> 标签：c++, ios, opengl-es, 2d, game-engine

在我的 OpenGL ES 项目中，我正在讨论是否为我的 GUI 创建一个场景图并为我的演员创建​​一个单独的场景图。这将允许我控制 GUI 系统并在不影响场景的情况下对其进行转换，反之亦然。

但是，我想知道这是否会对速度产生影响，或者这通常不是一个好主意。

在这个阶段我应该考虑任何方法或设计理念吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:32:30.433

为什么你的 GUI 和演员不能成为同一个场景图中的兄弟节点？

只要它们具有单独的变换，您就可以彼此独立地控制它们。

# javascript - 不同浏览器中的微小 mce 高度不同

> ID：15832370
> 
> 赞同：1
> 
> 时间：2013-04-05T11:09:02.207
> 
> 标签：javascript, jquery, html, css, tinymce

我的 JS 中有这段代码：

```
tinyMCE.init({
        width: "100%",
        height: "550",
}); 
```

然而，在不同的浏览器中，tinymce 的高度会有所不同。知道我们如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:11:42.373

这取决于差异有多大。但可能是因为每个浏览器在渲染文本区域、按钮等方面存在差异。

# c# - 如何使用 C# 在 MonoMac 中将窗口作为模式对话框打开？

> ID：15832376
> 
> 赞同：3
> 
> 时间：2013-04-05T11:09:13.390
> 
> 标签：c#, macos, monomac

我正在使用 MonoMac (C#) 开发一个 Cocoa 应用程序。

我有一个`MyWindowController`继承的类`MonoMac.AppKit.NSWindowController`，并像这样打开这个窗口的一个新实例：

```
MyWindowController mwc = new MyWindowController();
mwc.Window.MakeKeyAndOrderFront(this); 
```

但是如何将它作为模态对话框打开？当对话框打开时，我的应用程序中的任何其他内容都必须执行，因此我不能使用窗口工作表（它只会阻止当前窗口）。而且我找不到任何其他似乎可以在我的控制器上做我想做的事情。在 Windows 上，我只需调用以下命令即可完成此操作：

```
mwc.ShowDialog(); 
```

所以我想要的是 MonoMac 的等价物`ShowDialog()`，我相信。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T11:31:52.550

在发布问题之前，我花了将近三个小时试图弄清楚这一点，但当然我在询问后立即找到了解决方案。

看起来我需要使用 NSApplication 对象：

```
NSApplication.SharedApplication.RunModalForWindow(ewc.Window); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-07T00:52:27.873

我在上面的答案中取得了成功，但是在按下“关闭”按钮的情况下无法解除模式。解决方案是添加代码

```
[Export ("windowWillClose:")]
    public void WindowWillClose(NSNotification notification)
    {
        Console.WriteLine("windowWillClose:");
        NSApplication.SharedApplication.StopModal ();
    } 
```

到窗口控制器，然后将窗口控制器设置为窗口的委托，在 Interface Builder 中，右键单击窗口并将一行从“委托”拖到“文件所有者”块。

# r - 如何在没有原始降价输出的情况下使用 knitr 块将元素添加到绘图中？

> ID：15832384
> 
> 赞同：8
> 
> 时间：2013-04-05T11:09:41.743
> 
> 标签：r, plot, markdown, knitr

出于记录目的，我想要一些代码用于 html 输出中的绘图，而不是绘图。后来，我不得不调用绘图代码，并在绘图中添加一些东西，但只能看到附加代码。我试过这个：

```
```{r non.finished.plotting, eval=FALSE}
    plot(1,type="n")
```
Some explanatory text here in the output:
"This produces an empty plot, and we could now add some points to it manually."

```{r add.layer, fig.width=5, fig.height=5}
<<non.finished.plotting, echo=FALSE>>
points(x=rnorm(100,1,0.1), y=rnorm(100,0.8,0.1) )

``` 
```

我在[Yihui's](http://yihui.name/knitr/demo/reference/)找到了 echo-notation ，但是当我编织这个时，我在输出中收到一条错误消息。

```
## Error: plot.new has not been called yet 
```

我也尝试摆弄[块选项](http://yihui.name/knitr/options#chunk_options)，但我找不到可以满足我需求的组合。（*对不起，这是非常基本的，但我没有找到和这个例子很相似的东西。*）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-05T19:01:27.540

块引用`<<>>`不尊重块选项，因此`<<non.finished.plotting, echo=FALSE>>`不起作用。您可以做的是将块选项`echo`移回主块，如下所示：

```
```{r add.layer, fig.width=5, fig.height=5, echo=-1}
<<non.finished.plotting>>
points(x=rnorm(100,1,0.1), y=rnorm(100,0.8,0.1) )
``` 
```

`echo=-1`表示不回显第一个表达式（如[文档](http://yihui.name/knitr/options)所述）。这可能是你想要的：

![knitr 输出的屏幕截图](https://i.stack.imgur.com/XlRre.png)

# c++ - 创建一个固定大小的 std::vector 并写入元素

> ID：15832387
> 
> 赞同：13
> 
> 时间：2013-04-05T11:09:46.783
> 
> 标签：c++, arrays, constants, stdvector, dynamic-arrays

在 C++ 中，我希望分配一个固定大小（但大小在运行时确定）std::vector 然后写入该向量中的元素。这是我正在使用的代码：

```
int b = 30;
const std::vector<int> test(b);
int &a = test[3]; 
```

但是，这给了我一个编译器（MSVC 2010 Pro）错误：

> 错误 C2440：“正在初始化”：无法从“const int”转换为“int &”。转换失去限定符。

我对 const 的理解是它使类的所有成员变量都成为常量。例如，以下工作正常：

```
class myvec
{
public:
    myvec(int num) : ptr_m(new int[num]) {};
    ~myvec() { delete ptr_m; }
    void resize(int num) { delete ptr_m; ptr_m = new int[num]; }
    int & operator[] (int i) const { return ptr_m[i]; }
    int *ptr_m;
};

const myvec test(30);
int &a = test[3]; // This is fine, as desired
test.resize(10); // Error here, as expected 
```

因此似乎 std::vector 将容器的 const-ness 传播到向量的元素，这似乎很奇怪，因为如果我希望元素是 const 我会使用`std::vector<const int>`. 因此，我觉得这是 std::vector 的一个缺点。

无论如何，如何创建一个 std::vector 在构造后无法更改其大小，但可以写入其元素？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-05T11:12:05.377

如果不编写自己的包装类，这是不可能的。如果你想使用一个 plain `std::vector`，你必须依靠自律，不使用成员函数`insert()`, `push_back()`or `emplace_back()`，直接或间接（例如通过 a `back_inserter`）。

请注意，目前有一个针对新 C++14 标准的[动态数组的提议：](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2013/n3532.html)

> [...] 我们建议为数组定义一个新的设施，其中元素的数量在构造时是绑定的。我们称这些动态数组为 dynarray。

该提案实际上附带了一个参考实现，您可以在自己的代码中使用它（请确保`namespace std`暂时更改为其他内容）。

```
namespace std {
template< class T >
struct dynarray
{
    // types:
    typedef       T                               value_type;
    typedef       T&                              reference;
    typedef const T&                              const_reference;
    typedef       T*                              iterator;
    typedef const T*                              const_iterator;
    typedef std::reverse_iterator<iterator>       reverse_iterator;
    typedef std::reverse_iterator<const_iterator> const_reverse_iterator;
    typedef size_t                                size_type;
    typedef ptrdiff_t                             difference_type;

    // fields:
private:
    T*        store;
    size_type count;

    // helper functions:
    void check(size_type n)
        { if ( n >= count ) throw out_of_range("dynarray"); }
    T* alloc(size_type n)
        { if ( n > std::numeric_limits<size_type>::max()/sizeof(T) )
              throw std::bad_array_length();
          return reinterpret_cast<T*>( new char[ n*sizeof(T) ] ); }

public:
    // construct and destruct:
    dynarray() = delete;
    const dynarray operator=(const dynarray&) = delete;

    explicit dynarray(size_type c)
        : store( alloc( c ) ), count( c )
        { size_type i;
          try {
              for ( size_type i = 0; i < count; ++i )
                  new (store+i) T;
          } catch ( ... ) {
              for ( ; i > 0; --i )
                 (store+(i-1))->~T();
              throw;
          } }

    dynarray(const dynarray& d)
        : store( alloc( d.count ) ), count( d.count )
        { try { uninitialized_copy( d.begin(), d.end(), begin() ); }
          catch ( ... ) { delete store; throw; } }

    ~dynarray()
        { for ( size_type i = 0; i < count; ++i )
              (store+i)->~T();
          delete[] store; }

    // iterators:
    iterator       begin()        { return store; }
    const_iterator begin()  const { return store; }
    const_iterator cbegin() const { return store; }
    iterator       end()          { return store + count; }
    const_iterator end()    const { return store + count; }
    const_iterator cend()   const { return store + count; }

    reverse_iterator       rbegin()       
        { return reverse_iterator(end()); }
    const_reverse_iterator rbegin()  const
        { return reverse_iterator(end()); }
    reverse_iterator       rend()         
        { return reverse_iterator(begin()); }
    const_reverse_iterator rend()    const
        { return reverse_iterator(begin()); }

    // capacity:
    size_type size()     const { return count; }
    size_type max_size() const { return count; }
    bool      empty()    const { return count == 0; }

    // element access:
    reference       operator[](size_type n)       { return store[n]; }
    const_reference operator[](size_type n) const { return store[n]; }

    reference       front()       { return store[0]; }
    const_reference front() const { return store[0]; }
    reference       back()        { return store[count-1]; }
    const_reference back()  const { return store[count-1]; }

    const_reference at(size_type n) const { check(n); return store[n]; }
    reference       at(size_type n)       { check(n); return store[n]; }

    // data access:
    T*       data()       { return store; }
    const T* data() const { return store; }
};

} // namespace std 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T11:13:49.807

实际错误是因为您将向量声明为*constant*，这意味着您永远无法更改内容。

然后，当您尝试获取对向量中条目的非常量引用时，编译器会告诉您不能这样做，因为您可以更改存储在向量中的常量值。

* * *

至于创建一个大小可以在运行时固定，但在创建向量后不能更改大小的向量，那么您必须创建一个容器适配器。基本上你必须在另一个容器周围创建一个包装器，就像 eg`std::stack`一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T11:24:27.987

直接的答案是你不能这样做：你不能将向量定义为 const 然后向它​​添加成员。

正如其他人指出的那样，新标准提供了数组类，它可能更适合您正在做的事情。

如果您对固定长度感兴趣，您可能感兴趣的向量中最相关的方法是`reserve()`，它会将 设置为`vector<>`给定参数的大小，从而不需要向量扩展。

如果您不能使用 Std C++11，那么您需要创建一个不允许您修改向量的包装类。例如：

```
#include <vector>
#include <iostream>
#include <exception>
#include <stdexcept>
using namespace std;

template <typename T>
class FinalVector {
public:
    FinalVector(unsigned int size)
        { v.reserve( size ); }
    const T &at(unsigned int i) const
        { return v.at( i ); }
    T &at(unsigned int i)
        { return v.at( i ); }
    T &operator[](unsigned int i)
        { return at( i ); }
    const T &operator[](unsigned int i) const
        { return at( i ); }
    void push_back(const T &x);
    size_t size() const
        { return v.size(); }
    size_t capacity() const
        { return v.size(); }
private:
    std::vector<T> v;
};

template<typename T>
void FinalVector<T>::push_back(const T &x)
{
    if ( v.size() < v.capacity() ) {
        v.push_back( x );
    } else {
        throw runtime_error( "vector size exceeded" );
    }
}

int main()
{
    FinalVector<int> v( 3 );

    v.push_back( 1 );
    v.push_back( 2 );
    v.push_back( 3 );

    for(size_t i = 0; i < v.size(); ++i) {
        cout << v[ i ] << endl;
    }
} 
```

希望这可以帮助。

# r - 在R中执行直到循环

> ID：15832389
> 
> 赞同：4
> 
> 时间：2013-04-05T11:09:48.487
> 
> 标签：r

在我的智慧尽头，很抱歉这是错误的地方，或者做错了。第一次在这里问。我是 R 新手，几乎没有编程经验（大学里的帕斯卡课程，并且很擅长宏媒体术语 - 所以，不那么害怕代码）。

为了让事情简短明了，我认为最好只是向您展示我拥有的东西，以及我想要的东西。我花了几个小时寻找和尝试解决方案。

我所拥有的一个示例（它是一个名为“信号”的 xts 对象，并按天索引（此处省略以使示例简单）：

```
open  close position
0     0     0
1     0     0
0     0     0
0     0     0
0     1     0
0     0     0 
```

以及我想要发生的事情：

```
open  close position
0     0     0
1     0     1
0     0     1
0     0     1
0     1     1
0     0     0 
```

基本上，当“open”为真时，在“position”重复1s，直到“close”为真。我认为非常简单，但不知何故我无法让它工作。这里有一个我认为可能很接近的例子，但它陷入了无限循环：

```
for (i in 1:nrow(signals)) {
  if (signals[i,"open"]==1) next
  while (signals[i,"close"] == 0) {
    signals[i,"position"] <- 1 }
} 
```

谢谢你！

编辑 - 我遗漏了一个重要的限定词。有时，“close”中的第一个真实陈述会出现在“open”中的第一个真实陈述之前。但是，既然我在这里写了这个，我想以某种方式“清理”关闭列会更容易，所以在打开列中的第一个 1 点之前没有 1。

但是，如果有人知道如何做这一切，请随时添加其他信息。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T11:16:30.013

您不必为此使用循环：

```
open <- c(0,1,0,0,0,0)
close <- c(0,0,0,0,1,0)
position <- cumsum(open-close)
position
[1] 0 1 1 1 0 0 
```

请注意，这会立即关闭，如果您想在收到关闭信号后上线，请使用：

```
cumsum(open-c(0,close[-length(close)]))
[1] 0 1 1 1 1 0 
```

您的陈述永远不会结束的原因`while`是您无法修改正在测试的内容，即`i`不会增加。

# c# - 无法从数据库中打开文档

> ID：15832390
> 
> 赞同：0
> 
> 时间：2013-04-05T11:09:52.523
> 
> 标签：c#

我正在保存一个文件名中有空格的文档，所以数据库中的 url 是：

```
http://wingtipserver/Lists/Knowit.Cv-EmployeeDocumentsListInstance/attachments/2/My Example Pdf File.pdf 
```

但是当我想在图像按钮中打开它时，使用`ImageButton.PostBackUrl`它不会打开，因为文件路径是：

```
http://wingtipserver/Lists/Knowit.Cv-EmployeeDocumentsListInstance/attachments/2/My%20Example%20Pdf%20File.pdf 
```

如何删除空格？或者我应该对文件上传进行验证，这样我就不能上传带有空格的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:11:55.823

如果直接查看文件系统，则编码的空格直接等同于空格。

是的，你应该规范你的文件名，在我看来，不要有空格，而是用连字符或其他一些“规范”字符替换是有意义的。但是，除此之外，当您点击 URL 时会发生什么？404？500？如果您告诉我们您遇到的情况，那么我们可能会假设一个适当的解决方案，但就目前而言，您认为的问题实际上不应该是问题。

* * *

在这里纠正一下自己，在数据库中查找文件时，字符串自然不会匹配。为了克服这个问题，您应该在查找之前解码 URL 中的路径，使用`Server.UrlDecode(urlPart);`

# javascript - 程序谷歌地图撤消按钮行为

> ID：15832396
> 
> 赞同：0
> 
> 时间：2013-04-05T11:10:19.540
> 
> 标签：javascript, google-maps-api-3

我的程序是在折线的所有点上放置标记。

当用户将这些点移动到新位置时，我正在使用 insert_at 和 set_at 侦听器来更新我的标记。

Google maps API v3 在绘制折线时提供了一个撤消按钮。

它适用于 set_at （将我的标记重新定位到它的原始位置）；但是它不适用于 insert_at。

![在此处输入图像描述](https://i.stack.imgur.com/AED3Q.png) ![在此处输入图像描述](https://i.stack.imgur.com/UAYQN.png) ![在此处输入图像描述](https://i.stack.imgur.com/jJaLB.png)

**有没有办法对撤消按钮的行为进行编程，以便在使用撤消按钮时删除标记？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:09:21.023

观察`remove_at`-event，当使用 undo-button 删除路径的一个点时它会触发

# javascript - jquery选择器获取唯一ID

> ID：15832401
> 
> 赞同：0
> 
> 时间：2013-04-05T11:10:33.043
> 
> 标签：javascript, jquery, css-selectors

我试图通过选择具有唯一 id 的 tr 元素来获取行内容。

这是我到目前为止所拥有的，我对此很陌生，并且真的不确定为什么这不起作用。

```
var value = $('tr#'+idd).find('input[type=text]').map(function() { return $(this).attr("value"); }).get(); 
```

我已经尝试更改 id，因此它不是唯一的并且它确实接收数据。所以只是混淆了为什么这个声明没有。

任何帮助表示赞赏

```
while ($record = mysql_fetch_array($entrys))
{
    echo "<tr id='" . $record['id'] . "'>";
    echo "<td>" . "<input type='text' id='id' name='id' value=" . $record['id'] . " ></td>";
    echo "<td>" . "<input type='text' id='make' name='make' value=" . $record['make'] . " ></td>";
    echo "<td>" . "<input type='text' id='fuel' name='fuel' value=" . $record['fuel'] . " ></td>";
    echo "<td>" . "<input type='text' id='transmission' name='transmission' value=" . $record['transmission'] . " ></td>";
    echo "<td>" . "<input type='text' id='size' name='size' value=" . $record['size'] . " ></td>";
    echo "<td>" . "<input type='text' id='doors' name='doors' value=" . $record['doors'] . " ></td>";
    echo "<td>" . "<input type='hidden' id='hidden' name='hidden' value=" . $record['id'] . " ></td>";
    echo "<td>" . "<button name='update' onclick=edit('".$record['id']."') >Edit</button>";
    echo "<td>" . "<button id='delete' name='delete' onclick=del('".$record[id]."') value=" . $row . " >Delete</button>  </td>";
    echo "</tr>";

}
echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:13:19.167

尝试这个：

```
return $(this).val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:25:54.720

你的最后一行：

```
echo "<td>" . "<button id='delete' name='delete' onclick=del('".$record[id]."') value=" . $row . " >Delete</button>  </td>"; 
```

`.$record[id]."`- 应该`.$record['id']."`和其他人一样。

# java - 没有滚动条的可滚动区域

> ID：15832404
> 
> 赞同：1
> 
> 时间：2013-04-05T11:10:41.753
> 
> 标签：java, swing, jscrollpane, jscrollbar

我需要创建一个通常会应用滚动条的区域，它必须水平滚动（内容只是一个更大逻辑区域的视图），但我必须使用一些特殊的控件放置在控件的左右两侧命令滚动。

我有关于使用绝对值的想法（根据逻辑视图并减去偏移量。因此，偏移量右侧的控件将被放置为负 x 值并因此被丢弃。x 值高于宽度的控件也将被丢弃。

这是一种有效的方法吗？

最好的问候索伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:39:14.787

您可以在 a 上创建一个`JScrollPane`（`Component`更大的逻辑区域）并删除滚动条。

然后，您可以添加按钮来左右滚动。单击这些按钮时，应移动滚动窗格的视图。这是通过设置视图的绝对位置来完成的。您可以通过首先获取视图的绝对位置然后增加/减少它并再次设置它来使其相对。

这是一个显示较大图像的可滚动窗口的类。

```
public class ViewScroller {

  public ViewScroller() {
    JFrame frame = new JFrame("ViewScroller");
    final ImageIcon image = new ImageIcon("path\\to\\my\\image");
    JLabel label = new JLabel(image);
    final JScrollPane scrollPane = new JScrollPane(label);
    scrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
    scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_NEVER);

    JButton left = new JButton("<");
    left.addActionListener(new ActionListener() {
      @Override
      public void actionPerformed(ActionEvent e) {
        Point p = scrollPane.getViewport().getViewPosition();
        p.x = p.x < 10 ? 0 : p.x - 10;
        scrollPane.getViewport().setViewPosition(p);
      }
    });

    JButton right = new JButton(">");
    right.addActionListener(new ActionListener() {
      @Override
      public void actionPerformed(ActionEvent e) {
        Point p = scrollPane.getViewport().getViewPosition();
        int offset = p.x + scrollPane.getViewport().getWidth();
        p.x = offset + 10 > image.getIconWidth() ? p.x : p.x + 10;
        scrollPane.getViewport().setViewPosition(p);
      }
    });

    frame.add(right, BorderLayout.EAST);
    frame.add(left, BorderLayout.WEST);
    frame.add(scrollPane, BorderLayout.CENTER);

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(400, 400);
    frame.setVisible(true);
  }
} 
```

# perl - 多路复用回调

> ID：15832405
> 
> 赞同：10
> 
> 时间：2013-04-05T11:10:42.090
> 
> 标签：perl, asynchronous

假设我在一个应用程序中有许多任务可以按任何顺序完成。当所有任务完成后，我需要运行一些代码。如果这很重要，应用程序在 AnyEvent 下运行，但没有 Coro。

在某种程度上，[AnyEvent](http://search.cpan.org/perldoc?AnyEvent)`$cv->begin/$cv->end`允许我想要的。但是，我希望有更细粒度的控制。例如，我希望不能两次“完成”一项任务。从所有任务中收集数据的能力也很好。

当然，这是可以做到的。设置许多共享哈希的回调；每当任务完成时从该哈希中删除键；当 hash 为空时调用 megacallback。我想知道是否有更文明的方法，也许是一些 CPAN 模块？

例如，这是一个可以满足我需要的虚构 API。

```
#!/usr/bin/perl -w 
use strict;

use Some::Module;

# Set goals
my $cb = Some::Module->new( sub { say 'BOOM!' } );
$cb->begin( qw(foo bar) );

# Much later, as tasks start getting done
$cb->end( foo => 42 );       # "return" value from task 'foo'
$cb->begin( 'baz' );         # can add more tasks, why not
$cb->end( 'bar' );           # just finish task 'bar'
# still waiting for 'baz' to finish at this point

# Finally, last hanging task is done
$cb->end( baz => 137 );      # BOOM!
# at this point, sub {}->( { foo=>42, bar=>undef, baz=>137 } ) 
#     has been called 
```

另请参阅我的[perlmonks 问题](http://perlmonks.org/?node_id=1027002)。

它有这样的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T22:55:59.180

您可能需要考虑[Future](http://metacpan.org/module/Future)。

具体来说，为了等待许多事情完成，您可以使用`Future->needs_all`或类似：

```
my @things = ... # generate Futures to represent each thing

Future->needs_all( @things )
  ->on_done( sub {
     # some code here when all the things are done 
  }); 
```

或者，您也可以尝试[Async::MergePoint](http://metacpan.org/module/Async%3a%3aMergePoint)，它使 API 更接近您的想法：

```
my $mp = Async::MergePoint->new( needs => [qw( foo bar )] );
$mp->close( on_done => sub {
   # some code here when all the things are done
});

$mp->done( foo => $value );
$mp->done( bar => ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T23:06:26.787

我当然不是异步方面的专家，但我认为[Mojo::IOLoop::Delay](http://mojolicio.us/perldoc/Mojo/IOLoop/Delay)（[Mojolicious](http://mojolicio.us)套件的一部分）具有类似的界面。请注意，Mojo::IOLoop 可以与[EV 一起使用，因此](http://mojolicio.us/perldoc/Mojolicious/Guides/Cookbook#Event_loops)可以与 AnyEvent 一起使用。

这是[食谱](http://mojolicio.us/perldoc/Mojolicious/Guides/Cookbook#Parallel_blocking_requests)中的一个示例：

```
use Mojo::UserAgent;
use Mojo::IOLoop;

# Synchronize non-blocking requests portably
my $ua    = Mojo::UserAgent->new;
my $delay = Mojo::IOLoop->delay(sub {
  my ($delay, $tx, $tx2) = @_;
  ...
});
$ua->get('http://mojolicio.us'         => $delay->begin);
$ua->get('http://mojolicio.us/perldoc' => $delay->begin);
$delay->wait unless Mojo::IOLoop->is_running; 
```

另外，请注意，`$delay->begin`返回本质上是`end`方法的回调。

::Delay 文档中显示了其他示例，例如很酷的“步骤”概念。

**编辑**

这是一个简单的例子。请注意，延迟类中刚刚发生了一个小的语法更改，因此这只适用于 Mojolicious 3.93+，并不是说这在以前是不可能的，但语法略有不同。

```
#!/usr/bin/env perl

use strict;
use warnings;
use v5.10;

use Mojo::IOLoop;

my $delay = Mojo::IOLoop->delay(sub{shift; say for @_});

my $end_foo = $delay->begin(0);
Mojo::IOLoop->timer( 0 => sub { $end_foo->('hi') } );

my $end_bar = $delay->begin(0);
Mojo::IOLoop->timer( 0 => sub { $end_bar->('bye') } );

$delay->wait unless $delay->ioloop->is_running; #start loop if necessary 
```

这里我们创建延迟对象，参数是一个`finish`事件回调。对于我调用的每个异步操作`begin`，它都会返回一个`end`回调。默认情况下，这些回调会删除它们的第一个参数以删除多余的调用者（参见上面的示例），但我们没有这些，所以我们通过`0`表示不这样做。对于每个动作，我只是用一个零等待计时器来推迟。然后，结束回调的参数按顺序排队等待结束事件。多田！

# c++ - 移动 std::set 后指针的有效性

> ID：15832409
> 
> 赞同：3
> 
> 时间：2013-04-05T11:11:07.733
> 
> 标签：c++, c++11, std

我有一个结构，它在概念上具有以下内容

```
class C {/* expensive class */};
struct mapping {
    std::map<std::pair<C,C>, C> the_map;
}; 
```

这不太理想，因为最终会存储大量 C 副本。我目前的解决方案是创建一组 C，然后在映射中存储指针（或迭代器）。

```
struct mapping {
    std::set<C> all_Cs;
    std::map<std::pair<C*, C*>, C*> the_map;
}; 
```

这应该是安全的，因为 the_map 总是在 all_Cs 之前被破坏，因此所有指针都是有效的。

复制构造可以通过复制集合和重建地图来完成，但是是否可以有效地实现移动构造？

据我了解，移动具有相同分配器的集合需要是一个常量操作，这（我假设）强制实现保持指向集合中对象的指针的有效性，但我在标准中找不到任何支持这一点. 使用它，我应该能够通过简单地移动集合和地图来实现移动构造函数，并且所有指针都将正确地归新对象所有。

这是正确的推理吗？我可以以可移植的方式依赖这种行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:20:43.157

表 99（可识别分配器的容器要求）保证移动构造保留容器中的对象。除了恒定的复杂性要求（排除重新分配元素）之外，`X u(rv)`状态的后置条件：

> `u``rv`应具有与此构造之前相同的元素；

移动分配不提供相同的保证。如果分配器的特征告诉它不要传播分配器，它将分配新元素，并且没有明确声明它不会否则。

# jquery - Jquery 打开/关闭表格行

> ID：15832412
> 
> 赞同：0
> 
> 时间：2013-04-05T11:11:13.710
> 
> 标签：jquery, css

我有一个表，其中每隔一个表行都有一个类名“hideme”。在我制作的css文件中

```
.hideme { display:none} 
```

隐藏行包含一个密码字段和一个按钮。在任何给定时间只能显示一个隐藏行。因为现在是使切换功能运行良好的 jquery 代码。但是，它不会让我在隐藏行内单击，而不关闭它，从而无法在文本字段中键入任何内容。

我应该如何更改我的 jquery 代码以允许在隐藏行内单击而不会发生任何事情？

我的jquery代码如下：

```
$(document).ready(function() {
    $('#eventtable tr').on('click', function() {
        if ($(this).next().css('display') == 'none') {
            $('#eventtable .hideme').hide();
            $(this).next().toggle();
        }
        else {
            $('#eventtable .hideme').hide();
        }
    });
}); 
```

您可以在这里看到代码当前如何工作的小提琴：http: [//jsfiddle.net/aTN6v/](http://jsfiddle.net/aTN6v/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:13:30.350

试试这个：

```
$('#eventtable tr:not(.hideme)').on('click', function() {
...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:25:07.287

将您的函数包装在 if 块中以检查该行是否为 .hideme

```
$(document).ready(function() {
    $('#eventtable tr').on('click', function() {

    if(!$(this).hasClass('.hideme')) {

        if ($(this).next().css('display') == 'none') {
            $('#eventtable .hideme').hide();
            $(this).next().toggle();
        }
        else {
            $('#eventtable .hideme').hide();
        }

    }
    });
}); 
```

# java - 不同方法中的多个查询 Twitter4j 处理

> ID：15832416
> 
> 赞同：0
> 
> 时间：2013-04-05T11:11:29.010
> 
> 标签：java, twitter, processing, twitter4j

我正在尝试以不同的方法执行单独的查询，下面的代码不是我的实际代码，而只是错误的一个示例，我有

`Twitter twitter = new TwitterFactory(cb.build()).getInstance();`

两种方法都调用了，但是我得到了错误

> IllegalStateException: 不能再使用这个构建器，build() 已经被调用

如果我把它设为全局，那么我会得到同样的错误，这可能只是我很愚蠢，但我无法解决，我现在盯着它太久了。

这是我的代码：

```
ConfigurationBuilder cb = new ConfigurationBuilder();

  double lat = 51.5171;
  double lon = 0.1062;
  double res = 37;
  String resUnit = "mi";

public void setup(){

cb.setOAuthConsumerKey("XXXXXXXXXXXXXXXXXXXXXx");
cb.setOAuthConsumerSecret("XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX");
cb.setOAuthAccessToken("XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX");
cb.setOAuthAccessTokenSecret("XXXXXXXXXXXXXXXXXXXXXXXXXXXX");

  queryLon();
  queryBir();
}

void queryLon(){
try {
Twitter twitter = new TwitterFactory(cb.build()).getInstance();

  for (int j = 0; j < 5; j++) {

  Query query = new Query();
  query.setRpp(100);

  QueryResult result = twitter.search(new Query().geoCode(new GeoLocation(lat,lon), res, resUnit));
  ArrayList tweets = (ArrayList) result.getTweets();

  for (int i = 0; i < tweets.size(); i++) {

  Tweet t = (Tweet) tweets.get(i);
//User u= twitter.showUser("twitter");

String location = t.getLocation();
println("Location: " + location);

  }
}
}

catch (TwitterException te) {
println("Couldn't connect: " + te);
};

}

void queryBir(){
try {

Twitter twitter = new TwitterFactory(cb.build()).getInstance();

  for (int j = 0; j < 5; j++) {

  Query query = new Query();
  query.setRpp(100);

  QueryResult result = twitter.search(new Query().geoCode(new GeoLocation(lat,lon), res, resUnit));
  ArrayList tweets = (ArrayList) result.getTweets();

  for (int i = 0; i < tweets.size(); i++) {

  Tweet t = (Tweet) tweets.get(i);

String location = t.getLocation();
println("Location: " + location);

  }
}
}

catch (TwitterException te) {
println("Couldn't connect: " + te);
};

} 
```

任何帮助将不胜感激，干杯。

忘了提到我使用 Twitter4j 和处理

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:39:56.483

看起来很清楚：错误告诉我们`build()`只能调用一次，而您显然是在尝试多次调用它。所以，简单的解决方案：当你想创建一个新的 TwitterFactory 时，要么`cb.build()`在你第一次调用它时捕获一个变量的结果，然后重用它，要么创建一个新实例`ConfigurationBuilder`并在你创建时调用它的 build()一个新的`TwitterFactory`，虽然这看起来很浪费。尝试捕捉你的`cb.build()`第一个。

# python - 有没有更 Pythonic 的方式来使用列表理解循环多个相似的索引？

> ID：15832421
> 
> 赞同：3
> 
> 时间：2013-04-05T11:11:38.647
> 
> 标签：python, list, list-comprehension

我有以下代码

```
A = [(X(x), Y(y), Z(z)) for x in range(N) for y in range(N) for z in range(N)] 
```

它做了我想要的——根据我的函数 X、Y 和 Z 生成一个表示笛卡尔坐标的元组列表——但它不是很漂亮。我试过

```
A = [(X(x), Y(y), Z(z)) for x, y, z in range(N)] 
```

但这没有用。有没有更优雅和 Pythonic 的方式来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T11:13:01.730

```
from itertools import product
A = [(X(x), Y(y), Z(z)) for x, y, z in product(range(N), repeat=3)] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-05T12:08:46.007

你可以这样做：

```
import itertools

res = [X(each[0]), Y(each[1]), Z(each[2]) for each in itertools.combinations(N, 3)] 
```

这将为您提供所有独特的组合。[你可以在这里](http://docs.python.org/2/library/itertools.html#itertools.combinations)找到更多关于它的信息。

继续编码:)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-05T11:27:38.920

由于 x,y 和 z 具有相同的值，您可以这样做：

```
A = [(X(x), Y(x), Z(x)) for x, in range(N)] 
```

您还可以使用地图功能：

```
f = lambda x : (X(x), Y(x), Z(x))
map(f, range(N)) 
```

祝你好运

# android - MediaPlayer 错误 (1,-2147483648) 和 VideoView 错误 1,-2147483648

> ID：15832425
> 
> 赞同：2
> 
> 时间：2013-04-05T11:11:45.297
> 
> 标签：android, video

我正在尝试在模拟器上播放视频。我上传了多个视频。但是其中一个在玩，其他的没有。事实上，我上传的方式是一样的。我收到错误“无法播放此视频”。我怎样才能解决这个问题？

```
 Uri video1 = Uri.parse("android.resource://" + "com.jsupport.listviewimages" +       "/"+ R.raw.den);
        Uri video2 = Uri.parse("android.resource://" + "com.jsupport.listviewimages" + "/"+ R.raw.de1);
        Uri video3 = Uri.parse("android.resource://" + "com.jsupport.listviewimages" + "/"+ R.raw.de2);
       Uri video4 = Uri.parse("android.resource://" + "com.jsupport.listviewimages" + "/"+ R.raw.de3); 
```

视频列表

```
 private Uri[] viduri = {
        video1,
        video2,
        video3,
        video4,
        }; 
```

我在哪里创建视频视图

```
 exerciseVideo = (VideoView) findViewById(R.id.video);
    exerciseVideo.setVideoURI(viduri[imagenum-1]); 
```

# mysql - 如何使用组运算符在 mongodb 中获取投影

> ID：15832426
> 
> 赞同：0
> 
> 时间：2013-04-05T11:11:50.510
> 
> 标签：mysql, sql, mongodb

我有一个包含列 Column1 和 Column2 的表，看起来像这样

```
 Colum1 Column2 
     A       1
     A       2
     A       3
     B       2
     B       4
     B       6 
```

如果我在 MYSQL 中执行以下 SQL

```
 SELECT Column1, Column2, count(*) from Table group by Column1; 
```

结果是

```
 Column1 Column2 Count(*)
   A         1         3
   B         2         3 
```

我想在 MONGODB 上执行类似的查询

我试过了

```
 QUERY1: db.table.aggregate({$group: {_id:"$Column1", count:{$sum:1}} })
 QUERY2: db.table.aggregate({$project: {column1:1, column2:1}}, {$group: {_id:"$Column1", count:{$sum:1}} }) 
```

但是 Query2 的结果与 Query1 相同，似乎您无法填充 $group 列中未提及的字段。

**有没有办法与 $group 运算符一起填充 mongodb 中的其他字段？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:12:29.440

我不确定我是否正确阅读了 mysql 查询，我不明白为什么这特别有用，但`$first`似乎完成了同样的事情。

但是，如[`$first`文档](http://docs.mongodb.org/manual/reference/aggregation/first/#grp._S_first)中所述，结果取决于排序，因此您应该包含排序标准。

数据（为简洁起见缩短列名）

```
> db.foo.insert({"C1" : "A", "C2" : 1});
> db.foo.insert({"C1" : "A", "C2" : 2});
> db.foo.insert({"C1" : "A", "C2" : 3});
> db.foo.insert({"C1" : "B", "C2" : 2});
> db.foo.insert({"C1" : "B", "C2" : 4});
> db.foo.insert({"C1" : "B", "C2" : 6}); 
```

聚合查询

```
> db.foo.aggregate({$group: {_id:"$C1", C2: { $first: "$C2" }, count:{$sum:1}} }) 
```

结果

```
{
        "result" : [
                {
                        "_id" : "B",
                        "C2" : 2,
                        "count" : 3
                },
                {
                        "_id" : "A",
                        "C2" : 1,
                        "count" : 3
                }
        ],
        "ok" : 1
} 
```

# c# - 有关系时如何从数据集中删除表？

> ID：15832427
> 
> 赞同：5
> 
> 时间：2013-04-05T11:11:50.740
> 
> 标签：c#, datatable, dataset, constraints, foreign-key-relationship

我有一个数据集并且有'n'个表。如果表具有父子关系，我如何从数据集中删除表。

**代码**：

```
 if (m_dsSet.Tables[TableName] != null)
            {
                for (int iCount = m_dsSet.Tables[TableName].ChildRelations.Count - 1; iCount >= 0; iCount--)
                {
                    m_dsSet.Tables[TableName].ChildRelations[iCount].ChildTable.Constraints.Remove(m_dsSet.Tables[TableName].ChildRelations[iCount].RelationName);
                    m_dsSet.Tables[m_sLevelName].ChildRelations.RemoveAt(iCount);
                }
                m_dsSet.Tables[TableName].ChildRelations.Clear();
                m_dsSet.Tables[TableName].ParentRelations.Clear();
                m_dsSet.Tables[TableName].Constraints.Clear();
            } 
```

我只能删除行..但是表仍然留在数据集中..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-24T18:58:28.737

您需要调用 TableCollection.Remove

```
 m_dsSet.Tables.Remove(TableName); 
```

# wordpress - wp-paginate 插件中的页面范围字段被忽略

> ID：15832429
> 
> 赞同：0
> 
> 时间：2013-04-05T11:12:02.077
> 
> 标签：wordpress

我使用[http://wordpress.org/extend/plugins/wp-paginate/](http://wordpress.org/extend/plugins/wp-paginate/)插件对帖子进行分页。

它忽略“页面范围：”字段并显示所有页面。

# sql - sum 函数无法正常工作

> ID：15832430
> 
> 赞同：0
> 
> 时间：2013-04-05T11:12:04.217
> 
> 标签：sql, database, sql-server-2005, join

我在 SQL Server 2005 中的数据库：

![在此处输入图像描述](https://i.stack.imgur.com/OG017.jpg)

我的查询是：

```
SELECT * 
FROM TRADEFILE
WHERE CONVERT(DATETIME,SAUDA_DATE) LIKE 'MAR  1 2013%' 
  AND SCRIP_CODE='DLF' AND INST_TYPE LIKE 'FUT%' 
```

这给了我结果：

![在此处输入图像描述](https://i.stack.imgur.com/VIDY8.jpg)

在此买入=1，卖出=2。

如果我们计算购买数量的总和，即 buy_sell=1 那么它是 3000

当我们为卖出交易数量计算总和时，即 buy_sell=2 那么它是 3000

但是，当我触发此查询以获得相同的结果时，如下所示：

```
select 
   CONVERT(VARCHAR(11),sauda_date) AS sauda_date,
   SUM(CASE 
        WHEN Buy_sell = 1 and scrip_code='DLF' 
            and Sauda_Date between convert(datetime,'01/03/2013') 
            and convert(datetime,'06/04/2013') 
        THEN Trade_Qty ELSE 0 END) AS BuyQty,
    SUM(CASE 
        WHEN Buy_sell = 2 and scrip_code='DLF' 
            and Sauda_Date between convert(datetime,'01/03/2013') 
            and convert(datetime,'06/04/2013') 
        THEN Trade_Qty ELSE 0 END) AS SellQty ,     
    SUM(CASE 
        WHEN Buy_sell = 1 and scrip_code='DLF' 
        THEN Trade_Qty ELSE 0 END) 
      -SUM(CASE 
           WHEN Buy_sell = 2 and scrip_code='DLF' 
           THEN Trade_Qty ELSE 0 END) AS CarryForword 
from tradefile 
where scrip_code='DLF' 
group by CONVERT(VARCHAR(11),sauda_date) 
```

它给了我结果：

![在此处输入图像描述](https://i.stack.imgur.com/PEzde.jpg)

即 BuyQty=5000，sellQty 为 4000，而我们分别计算为 3000 和 3000。

怎么可能不同？我的 sum() 函数工作错了吗？

我的查询是错误的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:16:20.437

条件完全不同，因此结果也是合理的。

例子：

1.  在您的第一个查询中，您有一个`PARTY_CODE`. 这在第二个查询中完全缺失。
2.  这同样适用于`INST_TYPE`
3.  的条件`SAUDA_DATE`非常不同。第一个查询仅查询 3 月 1 日，而第二个查询查询 3 月 1 日和 4 月 6 日之间的所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:22:21.330

我知道你给出的第一个查询，buyin_qty 和 sell_qty 有 3000 个。

在具有 CASE 语句的第二个查询中，错过了第一个查询中的一些 where 条件

```
 AND PARTY_CODE='0L036'
 AND INST_TYPE LIKE 'FUT%' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T03:39:13.537

这应该有效：

```
select 
   CONVERT(VARCHAR(11),sauda_date) AS sauda_date,
   SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty ELSE 0 END) AS BuyQty,
   SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty ELSE 0 END) AS SellQty ,     
   SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty ELSE 0 END) 
   -SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty ELSE 0 END) AS CarryForword 
from tradefile 
where scrip_code='DLF' 
group by CONVERT(VARCHAR(11),sauda_date) 
```

# r - ggplot2 - 因子颜色和图例调整

> ID：15832435
> 
> 赞同：0
> 
> 时间：2013-04-05T11:12:25.690
> 
> 标签：r, ggplot2

我编写了一个简短的脚本来绘制在 2 个单独的测量设备上测量的放射性活动的趋势。脚本如下所示

```
pkgLoad <- function(x)
  {
    if (!require(x,character.only = TRUE))
    {
      install.packages(x,dep=TRUE, repos='http://star-www.st-andrews.ac.uk/cran/')
      if(!require(x,character.only = TRUE)) stop("Package not found")
    }

  }

pkgLoad("ggplot2")
pkgLoad("XLConnect")
pkgLoad("reshape2")

#Load the workbook
wb<-loadWorkbook("CapintecQC.xlsx")

df_blue <-readWorksheet(wb, sheet = "Blue", startCol=1, endCol=6)
#sort date format
df_blue$Date <- as.Date(df_blue$Date , "%d/%m/%y")
df_blue[order(df_blue$Date ),]

df_gold <-readWorksheet(wb, sheet = "Gold", startCol=1, endCol=6)
df_gold$Date <- as.Date(df_gold$Date , "%d/%m/%y")
df_gold[order(df_gold$Date ),]

#Reference Cs-137 details
ref_activity <- 9.3
half_life <- 30.23
ref_date <- as.Date('06/01/08',format='%d/%m/%y')

blue_melt <- melt(df_blue[,c(1,2:6)], id="Date", value.name="Activity", variable.name="Isotope")

#Add new column to data frame with expected activity
df_gold["Exp_Act"] <- round(ref_activity*exp((-0.693/half_life)*as.numeric(difftime(df_gold$Date,ref_date))/365.25),3)
df_gold["Exp_Act_0.95"] <- 0.95 * df_gold$Exp_Act
df_gold["Exp_Act_1.05"] <- 1.05 * df_gold$Exp_Act 

gold_melt <- melt(df_gold[,c(1,2:6)], id="Date", value.name="Activity", variable.name="Isotope")

p <- ggplot( NULL )+geom_point(data = gold_melt, aes(x=Date,y=Activity, col=Isotope)) + geom_ribbon(data = df_gold, aes(x = Date, ymin = Exp_Act_0.95, ymax = Exp_Act_1.05), fill='blue', alpha=0.2) + geom_point(data = blue_melt, aes(x=Date,y=Activity, col=Isotope), shape=2) + theme_bw()
print(p) 
```

![在此处输入图像描述](https://i.stack.imgur.com/CdK9p.png)

我对 R/ggplot2 不太胜任。我希望最后的图显示每个放射性核素的测量活动对于两个设备都是相同的颜色（即红色的 Cs-137，蓝色的 99mTc）。当我的图表绘制不同的颜色时，我该如何做到这一点。

传说也是不讨喜的。(i) 从 excel 标题中提取的每个核素的格式从 Cs-137 更改为 Cs.137。如何将 Cs-137、Tc-99m 等作为标头？(ii) 每个放射性核素在图例中重复 - 每个设备一个。是否可以只显示第一个数据框 (df_gold) 的图例，或者更好地在图例中显示文本，文本颜色与图中的标记颜色匹配？）

df_gold 结构

```
structure(list(Date = structure(c(15708, 15709, 15712, 15713, 
15714, 15715, 15716, 15719, 15720, 15721, 15722, 15723, 15726, 
15727, 15729, 15730, 15733, 15734, 15735, 15736, 15740, 15741, 
15743, 15747, 15748, 15749, 15750, 15751, 15754, 15755, 15756, 
15757, 15758, 15761, 15762, 15764, 15765, 15768, 15769, 15770, 
15771, 15772, 15775, 15776, 15777, 15779, 15782, 15783, 15784, 
15785, 15786, 15789, 15790, 15791, 15792, 15797, 15798, 15799, 
15800), class = "Date"), Cs..137 = c(8.2, 8.1, 8.1, 8.1, 8.1, 
8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 
8.1, 8.1, 8.1, 8.2, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8, 8.2, 
8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 
8.1, 8.1, 8.1, 8, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 
8.1, 8.1), In..111 = c(6.49, 6.47, 6.48, 6.43, 6.49, 6.51, 6.5, 
6.47, 6.48, 6.4, 6.48, 6.48, 6.48, 6.49, 6.49, 6.47, 6.48, 6.48, 
6.5, 6.47, 6.49, 6.55, 6.46, 6.49, 6.48, 6.48, 6.46, 6.48, 6.49, 
6.44, 6.49, 6.46, 6.45, 6.46, 6.46, 6.43, 6.49, 6.47, 6.45, 6.43, 
6.44, 6.44, 6.44, 6.46, 6.45, 6.47, 6.45, 6.43, 6.44, 6.47, 6.45, 
6.46, 6.45, 6.46, 6.39, 6.46, 6.44, 6.42, 6.41), I..123 = c(6.97, 
6.94, 6.96, 6.91, 6.92, 6.95, 6.93, 6.92, 6.93, 7, 6.97, 6.96, 
6.96, 6.94, 6.98, 6.97, 6.95, 6.95, 6.94, 6.96, 6.97, 7.01, 6.92, 
7, 6.98, 6.97, 6.91, 6.99, 6.95, 6.88, 6.96, 6.91, 6.91, 6.93, 
6.94, 6.94, 6.97, 6.93, 6.93, 6.93, 6.96, 6.94, 6.94, 6.92, 6.93, 
6.91, 6.93, 6.92, 6.92, 6.91, 6.91, 6.89, 6.92, 6.9, 6.9, 6.91, 
6.91, 6.9, 6.9), I..131 = c(10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 
10.5, 10.5, 10.5, 10.8, 10.5, 10.6, 10.5, 10.5, 10.5, 10.5, 10.5, 
10.5, 10.5, 10.5, 10.5, 10.6, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 
10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.4, 
10.5, 10.4, 10.5, 10.5, 10.5, 10.4, 10.5, 10.4, 10.4, 10.5, 10.4, 
10.4, 10.4, 10.4, 10.4, 10.3, 10.5, 10.5, 10.5, 10.6), Tc..99m = c(15, 
15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15.1, 15, 15, 15.1, 15, 
15, 15, 15, 15.1, 15, 15.1, 15, 15, 15, 15, 15, 15, 15, 15, 15, 
15, 15, 15, 15, 14.9, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 
14.9, 14.8, 14.9, 14.9, 14.9, 14.9, 15, 15, 14.8, 15, 15, 15, 
15), Exp_Act = c(8.294, 8.293, 8.292, 8.291, 8.291, 8.29, 8.29, 
8.288, 8.288, 8.287, 8.287, 8.286, 8.285, 8.284, 8.283, 8.283, 
8.281, 8.28, 8.28, 8.279, 8.277, 8.277, 8.276, 8.274, 8.273, 
8.273, 8.272, 8.272, 8.27, 8.27, 8.269, 8.269, 8.268, 8.266, 
8.266, 8.265, 8.264, 8.263, 8.262, 8.262, 8.261, 8.261, 8.259, 
8.259, 8.258, 8.257, 8.256, 8.255, 8.255, 8.254, 8.254, 8.252, 
8.251, 8.251, 8.25, 8.248, 8.247, 8.247, 8.246), Exp_Act_0.95 = c(7.8793, 
7.87835, 7.8774, 7.87645, 7.87645, 7.8755, 7.8755, 7.8736, 7.8736, 
7.87265, 7.87265, 7.8717, 7.87075, 7.8698, 7.86885, 7.86885, 
7.86695, 7.866, 7.866, 7.86505, 7.86315, 7.86315, 7.8622, 7.8603, 
7.85935, 7.85935, 7.8584, 7.8584, 7.8565, 7.8565, 7.85555, 7.85555, 
7.8546, 7.8527, 7.8527, 7.85175, 7.8508, 7.84985, 7.8489, 7.8489, 
7.84795, 7.84795, 7.84605, 7.84605, 7.8451, 7.84415, 7.8432, 
7.84225, 7.84225, 7.8413, 7.8413, 7.8394, 7.83845, 7.83845, 7.8375, 
7.8356, 7.83465, 7.83465, 7.8337), Exp_Act_1.05 = c(8.7087, 8.70765, 
8.7066, 8.70555, 8.70555, 8.7045, 8.7045, 8.7024, 8.7024, 8.70135, 
8.70135, 8.7003, 8.69925, 8.6982, 8.69715, 8.69715, 8.69505, 
8.694, 8.694, 8.69295, 8.69085, 8.69085, 8.6898, 8.6877, 8.68665, 
8.68665, 8.6856, 8.6856, 8.6835, 8.6835, 8.68245, 8.68245, 8.6814, 
8.6793, 8.6793, 8.67825, 8.6772, 8.67615, 8.6751, 8.6751, 8.67405, 
8.67405, 8.67195, 8.67195, 8.6709, 8.66985, 8.6688, 8.66775, 
8.66775, 8.6667, 8.6667, 8.6646, 8.66355, 8.66355, 8.6625, 8.6604, 
8.65935, 8.65935, 8.6583)), row.names = c(NA, -59L), .Names = c("Date", 
"Cs..137", "In..111", "I..123", "I..131", "Tc..99m", "Exp_Act", 
"Exp_Act_0.95", "Exp_Act_1.05"), class = "data.frame") 
```

df_blue 结构

```
structure(list(Date = structure(c(15790, 15791, 15792, 15797, 
15798, 15799, 15800), class = "Date"), Cs.137 = c(8.1, 8.2, 8.2, 
8.2, 8.2, 8.2, 8.2), I.123 = c(6.82, 6.85, 6.91, 6.84, 6.82, 
6.82, 6.83), I.131 = c(10.5, 10.6, 10.6, 10.5, 10.6, 10.6, 10.6
), In.111 = c(6.35, 6.45, 6.43, 6.37, 6.38, 6.4, 6.37), X99m.Tc = c(15, 
15, 15.1, 15.1, 15.1, 15.1, 15.1)), .Names = c("Date", "Cs.137", 
"I.123", "I.131", "In.111", "X99m.Tc"), row.names = c(NA, -7L
), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:46:29.417

我的方法是将两个数据框绑定在一起，然后添加包含设备名称（金色或蓝色）的新列。

```
df<-rbind(gold_melt,blue_melt)
df$device<-rep(c("gold","blue"),c(nrow(gold_melt),nrow(blue_melt))) 
```

使用`recode()`库中的函数`car`更改`Isotope`应有的名称。

```
df$Isotope<-recode(df$Isotope,"c('Cs..137','Cs.137')='Cs-137';
       c('I..123','I.123')='I-123';
       c('I..131','I.131')='I-131';
       c('In..111','In.111')='In-111'
       ;c('Tc..99m','X99m.Tc')='Tc-99m'") 
```

现在您只需调用一次即可`geom_point()`使用新数据框。我还添加`shape=device`了为每个设备获取不同的形状。

```
ggplot(NULL) + 
  geom_point(data=df,aes(x=Date,y=Activity, col=Isotope,shape=device))+
  geom_ribbon(data = df_gold, aes(x = Date, ymin = Exp_Act_0.95, ymax = Exp_Act_1.05), fill='blue', alpha=0.2) 
```

![在此处输入图像描述](https://i.stack.imgur.com/O2wsw.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:29:33.783

以防万一您想将传奇“融合”在一起，然后建立在 Didzis 的答案上：

```
df <- transform(df, device = factor(device, levels=unique(device)), 
                          grp = paste(Isotope, device, sep="_"))

require(RColorBrewer)
ggplot() + geom_point(data = df, aes(x = Date, y = Activity, 
                       colour=grp, shape = grp, fill=grp)) + 
geom_ribbon(data = df_gold, aes(x = Date, ymin = Exp_Act_0.95, 
                    ymax = Exp_Act_1.05), fill='blue', alpha=0.2) + 
scale_shape_manual("", values=rep(c(21,24), 5)) + 
scale_fill_manual("", values=rep(brewer.pal(5, "Set1"), each=2)) + 
scale_colour_manual("", values=rep(brewer.pal(5, "Set1"), each=2)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/F12eJ.png)

# silverlight - 从 Silverlight 中的浏览器内应用程序调用浏览器应用程序

> ID：15832437
> 
> 赞同：0
> 
> 时间：2013-04-05T11:12:26.247
> 
> 标签：silverlight, silverlight-5.0

我们需要有用户从 silverlight 应用程序运行 excel 报告的功能。该应用程序将显示来自服务器的数据，单击按钮后，用户应该会看到来自其客户端计算机中数据的 Excel 报告。我们无法使用浏览器制作原始应用程序，因此我正在寻找选项。

我正在考虑创建一个可以在客户端机器中调用 excel 的浏览器应用程序。我们的原始应用程序只需下载并安装具有用户权限的浏览器应用程序。此外，我需要将 Excel 报告的数据从浏览器内应用程序传递到 OOB 应用程序。

是否可以？如果是，是否有任何帮助如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:46:43.690

唯一想到的是从您的浏览器内 Silverlight 应用程序中弹出另一个浏览器窗口，然后向客户端提供 excel 文件下载。默认情况下，此对话框也提供打开选项，这可以解决您的问题。这就是我在 Silverlight 应用程序中解决从 SSRS 下载 excel 报告的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T20:24:59.510

可以让用户从浏览器[下载数据为 CSV 文件](https://stackoverflow.com/questions/1382604/what-to-set-as-mimetype-for-csv-files-to-open-in-spreadsheet-applications)，大多数用户都可以在 Excel 中打开。

您还可以使用[Clipboard.SetText将](http://msdn.microsoft.com/en-us/library/ms597043(v=vs.95).aspx)[分隔文本](http://office.microsoft.com/en-gb/excel-help/import-or-export-text-txt-or-csv-files-HP010099725.aspx)复制到用户的剪贴板，然后用户可以将其粘贴到正在运行的 Excel 实例中。

另一种选择是使用服务器端服务来[生成 Excel 文档](https://stackoverflow.com/questions/151005/create-excel-xls-and-xlsx-file-from-c-sharp)并让 Silverlight 应用程序显示指向该文档的超链接。

# java - 在 Spring 中使用集合

> ID：15832438
> 
> 赞同：3
> 
> 时间：2013-04-05T11:12:26.660
> 
> 标签：java, spring

可以使用构造函数从另一个集合对象创建集合对象。

```
 List<Student> list = new ArrayList<Student>(someStudentList); 
```

这可以在春天完成。

```
 <bean id="stdArrayList" class="java.util.ArrayList">
        <constructor-arg >
            <list>
                <ref bean="student1" />
                <ref bean="student2" />
                <ref bean="student3" />
            </list>
        </constructor-arg>
    </bean>
    <bean id="student1"  class="mawia.test.Student"
     .... 
```

我怎样才能在Spring中添加项目？

```
 Set<Student> set= new TreeSet<Student>();
        set.add(new Student(5, "Mawia"));
        ... 
```

这样我就可以使用接受比较器对象的构造函数。

```
 Set<Student> set= new TreeSet<Student>(new MyComparator());
        set.add(new Student(5, "Mawia"));
        ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T11:27:26.373

我怀疑最简单的方法是创建一个`TreeSet`提供两个参数的构造函数的简单子类：

```
public class MyTreeSet<T> extends TreeSet<T> {
  public MyTreeSet(Comparator<? super T> cmp, Collection<? extends T> coll) {
    super(cmp);
    addAll(coll);
  }
} 
```

并将其用作 bean 的类型，将比较器和初始值都作为`<constructor-arg>`值传递。

```
<bean id="studentSet" class="com.example.MyTreeSet">
  <constructor-arg index="0">
    <bean class="com.example.MyComparator" />
  </constructor-arg>
  <constructor-arg index="1">
    <list>
      <ref bean="student1" />
      <ref bean="student2" />
      <ref bean="student3" />
    </list>
  </constructor-arg>
</bean> 
```

或者，`TreeSet`您可以编写自己的`FactoryBean`.

要在不编写任何额外代码的情况下做到这一点，您可以使用第二个 bean 定义来添加

```
<bean id="studentSet" class="java.util.TreeSet">
  <constructor-arg>
    <bean class="com.example.MyComparator" />
  </constructor-arg>
</bean>

<bean id="studentSetFiller" factory-bean="studentSet" factory-method="addAll">
  <constructor-arg>
    <list>
      <ref bean="student1" />
      <ref bean="student2" />
      <ref bean="student3" />
    </list>
  </constructor-arg>
</bean> 
```

但是随后您注入的任何其他 bean 都`studentSet`需要额外`depends-on="studentSetFiller"`的，以确保在目标 bean 尝试使用它之前填充该集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:22:09.867

您可能可以使用这样的`util`模式来做到这一点；

```
<util:set id="emails" set-class="java.util.TreeSet">
    <value>pechorin@hero.org</value>
    <value>raskolnikov@slums.org</value>
    <value>stavrogin@gov.org</value>
    <value>porfiry@gov.org</value>
</util:set> 
```

（取自[http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/xsd-config.html#xsd-config-body-schemas-util-set](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/xsd-config.html#xsd-config-body-schemas-util-set)）

我将测试是否可以添加构造函数参数并确认。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T11:24:11.667

TreeSet 不提供组合构造函数来传递 Comparator 以及数据。所以我想你只能通过构造函数注入来做一个。

其他部分如果暴露，您应该尝试通过属性注入。

# python - 似乎无法在 Windows 上为 python 2.7 安装 pandas

> ID：15832445
> 
> 赞同：4
> 
> 时间：2013-04-05T11:12:43.013
> 
> 标签：python, windows, installation, pandas

抱歉，如果这已经在某个地方得到了回答，我找不到答案。

我已将 python 2.7.3 安装到 Windows 7 计算机上。然后我下载了 pandas-0.10.1.win-amd64-py2.7.exe 并尝试安装它。我已经通过了第一个窗口，但随后它指出“需要 Python 2.7，但在注册表中找不到”。

然后我可以选择将路径放入查找 python，但我无法让它工作。

我将如何解决这个问题？对不起这个愚蠢的问题。

谢谢。~库图托

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-08T18:46:16.740

我遇到了同样的问题。这是有效的

*   更改为 PATH 以包含 C:\Python27;C:\Python27\Lib\site-packages\;C:\Python27\Scripts\;
*   卸载 64 位 numpy 和 pandas
*   安装 32win 2.7 numpy 和 pandas
*   我还必须安装 dateutil 和 pytz
*   pandas 和 numpy 工作导入工作正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T04:40:18.373

安装 python 后，通过在命令行中键入以下内容来检查是否设置了适当的路径变量：

`echo %PATH%`

如果你没有看到类似的东西：

`C:\Python27;C:\Python27\Scripts`

在输出上（可能有很多其他路径）然后输入：

`set PATH=%PATH%;C:\\Python27\\;C:\\Python27\Scripts`

然后尝试安装 32 位 pandas 可执行文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T06:54:59.770

您应该尝试使用适用于 Windows 的 anaconda 发行版。是免费的，随附您需要的所有软件包，并且可以一键安装。

[http://continuum.io/downloads.html](http://continuum.io/downloads.html)

# javascript - 从 AJAX 调用填充数组并将其返回给调用函数

> ID：15832446
> 
> 赞同：1
> 
> 时间：2013-04-05T11:12:46.807
> 
> 标签：javascript, jquery, html, google-maps, google-maps-api-3

我正在使用and的`gmap3`扩展名。`Google Maps API``jQuery`

我有一个`.gpx`文件，我通过 AJAX 读取并获取每个坐标并将其添加到数组中。然后我返回这个数组以在我的地图中填充我的折线。

在函数测试中，我会在返回之前对点进行计数，并且计数为 0。

这是我处理 .gpx 文件以返回坐标的函数：

```
function Test() {

     var points = [];

     $.ajax({
          type: "GET",
          url: "gpx/12345.gpx",
          dataType: "xml",
          success: function (xml) {
               $(xml).find("trkpt").each(function () {
                    var lat = $(this).attr("lat");
                    var lon = $(this).attr("lon");
                    var p = new google.maps.LatLng(lat, lon);
                    points.push(p);
               });
          }
     });

     return points;
}

$(document).ready(function () {
     var points = Test();
     var route1Latlng = new google.maps.LatLng(-33.7610590, 18.9616790);
     $('#map_canvas').gmap3({
          map: {
               options: {
                    center: route1Latlng,
                    zoom: 11
               }
          },
          polyline: {
               options: {
                    path: points,
                    strokeColor: '#FF00AA',
                    strokeOpacity: .7,
                    strokeWeight: 4
               }
          }
     });
}); 
```

在 IE9 中不绘制折线，但在 FireFox 中它可以正确绘制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:17:26.563

发生的事情是你调用 test 来返回点，因为它是一个异步请求，它不会拖拽程序的执行并且会返回空的点数组。您正在使用空数组进行绘图，因此您的行没有显示。它只会在 ajax 请求完成后显示。所以我们将标记的绘图包装到另一个函数中，并在 ajax 调用完成时调用它。

尝试像这样在ajax的成功事件中调用一个函数

```
function Test() {

 var points = [];

 $.ajax({
      type: "GET",
      url: "gpx/12345.gpx",
      dataType: "xml",
      success: function (xml) {
           $(xml).find("trkpt").each(function () {
                var lat = $(this).attr("lat");
                var lon = $(this).attr("lon");
                var p = new google.maps.LatLng(lat, lon);
                points.push(p);
           });
           drawPolyline(points); //when all the points have been loaded then we call this method
      }
 });
}

function drawPolyline(pointsTobeDrawn){ // this method gets the points and plots it
var route1Latlng = new google.maps.LatLng(-33.7610590, 18.9616790);
     $('#map_canvas').gmap3({
          map: {
               options: {
                    center: route1Latlng,
                    zoom: 11
               }
          },
          polyline: {
               options: {
                    path: pointsTobeDrawn,
                    strokeColor: '#FF00AA',
                    strokeOpacity: .7,
                    strokeWeight: 4
               }
          }
     });
}

$(document).ready(function () {
     Test();  // we need only this method as it will plot the markers on success event of it   
}); 
```

使用 ajax false as

```
$.ajax({
      async: false, //dont use quotes here like "false".
      type: "GET",
      url: "gpx/12345.gpx",
      dataType: "xml",
      success: function (xml) {
           $(xml).find("trkpt").each(function () {
                var lat = $(this).attr("lat");
                var lon = $(this).attr("lon");
                var p = new google.maps.LatLng(lat, lon);
                points.push(p);
           });
           drawPolyline(points);
      }
 }); 
```

如果我们将 async 设置为 false，那么我们的程序将等待 ajax req 完成其进程。

阅读有关 ajax 调用的工作原理和线程的更多说明

# python - 是否有 Python MySQL API 返回准备好的语句以供重用？

> ID：15832451
> 
> 赞同：4
> 
> 时间：2013-04-05T11:12:58.817
> 
> 标签：python, mysql, postgresql, prepared-statement

MySQLdb和[oursql](http://mysql-python.sourceforge.net/MySQLdb.html)[都](http://pythonhosted.org/oursql/)不允许返回的[准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)由连续执行的参数填充。还有其他人吗？

至少对于我们来说，我们的sql似乎比 MySQLdb 更熟练，`.executemany()` *因为**SQL*语句只为所有提交的值准备一次。

（Python 是否支持在 PostgreSQL 中准备和重用准备好的语句？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T01:39:35.180

对于您的 PostgreSQL 问题，答案是至少截至去年 10 月没有特定于 Python 的方法来处理准备好的语句（我不是 Python 程序员，但这在各种语言中相当普遍）。然而，PostgreSQL 提供了一种 SQL 语言的方式来执行此操作，因此如果可以执行 SQL 查询，任何语言都可以使用准备好的语句。有关如何在 Python 中执行此操作的代码示例，请参阅[http://initd.org/psycopg/articles/2012/10/01/prepared-statements-psycopg/](http://initd.org/psycopg/articles/2012/10/01/prepared-statements-psycopg/)

不过，有几个主要的警告。其中之一是在第一次运行时计划好准备好的语句，并重复使用该计划。这对于统一需要相同计划（例如，简单插入）的查询非常有用，但它会导致参数可能发生足够变化以致可能需要新计划的问题。因此，在大多数情况下，以下情况可能没问题（仍然需要注意令人讨厌的极端情况）：

1.  `INSERT INTO foo (bar) values ($1)`
2.  `SELECT * FROM foo WHERE bar= $1;`假设 bar 是主键

以下内容可能不安全：

1.  `SELECT * FROM foo WHERE bar < $1`
2.  `SELECT * FROM foo WHERE baz = $1`其中 baz 可能有很大一部分行具有相同的值。

# android - 带有输入值的Android Jsoup解析器

> ID：15832455
> 
> 赞同：0
> 
> 时间：2013-04-05T11:13:12.047
> 
> 标签：android, jsoup

我需要从此代码中获取 url 作为字符串。只有我需要（[http://ww3.mp3juices.com/download/5487/8789094/123735064/1d8bb8aa0352/(osthi)---kalasala-kalasala](http://ww3.mp3juices.com/download/5487/8789094/123735064/1d8bb8aa0352/(osthi)---kalasala-kalasala)）

```
<td style="width:240px;min-width:240px" class="controls">
    <a class="action_buttons cs download" href="http://yournewncsoft.info/v356?product_name=%28Osthi%29+-+Kalasala+Kalasala&product_title=MP3Juices+Download+Manager&installer_file_name=%28Osthi%29+-+Kalasala+Kalasala+-+%5BMP3Juices.com%5D&product_file_name=%28Osthi%29+-+Kalasala+Kalasala+-+%5BMP3Juices.com%5D.mp3&product_download_url=http%3A%2F%2Fww3.mp3juices.com%2Fdownload%2F5487%2F8789094%2F123735064%2F1d8bb8aa0352%2F%28osthi%29---kalasala-kalasala" name="dl2" onclick="javascript:_gaq.push(['_trackPageview','/download/manager']);">ev
    <input type="hidden" name="files[1][adrl]" value="http://yournewncsoft.info/v356?product_name=%28Osthi%29+-+Kalasala+Kalasala&product_title=MP3Juices+Download+Manager&installer_file_name=%28Osthi%29+-+Kalasala+Kalasala+-+%5BMP3Juices.com%5D&product_file_name=%28Osthi%29+-+Kalasala+Kalasala+-+%5BMP3Juices.com%5D.mp3&product_download_url=http%3A%2F%2Fww3.mp3juices.com%2Fdownload%2F5487%2F8789094%2F123735064%2F1d8bb8aa0352%2F%28osthi%29---kalasala-kalasala"/>
    <input type="hidden" name="files[1][url]" value="http://ww3.mp3juices.com/download/5487/8789094/123735064/1d8bb8aa0352/(osthi)---kalasala-kalasala"/>
    <input type="hidden" name="files[1][len]" value="252"/>
    <input type="hidden" name="files[1][song_id]" value="2"/>
    <input type="hidden" name="files[1][hash]" value="41e78609200a6de8d86d25bae2b2a922"/>
    <input type="hidden" name="files[1][filesize]" value="480.99999999999994"/>
    <input type="hidden" name="files[1][bitrate]" value="160"/>
    <a class="action_buttons cs listen" href="javascript:;" name="dll2">ev
</td> 
```

我的 Jsoup 代码是

```
for (Element divAudio : divs){
    count_songs++;
    String songTitle = divAudio.select(".song_title").text();
    //String songURL = divAudio.select(".url").attr("href");
    Element link = divAudio.select("input[name=files[1][url]]").first();
    String songURL= link.attr("value");
    String songDuration = divAudio.select(".size").text();
    String songSize = divAudio.select(".bit").text();
    result_list.add(new song_details(songTitle, songURL, songDuration, songSize));
} 
```

编辑：答案是：

```
Element link = divAudio.select("input[name*=url").first();
            String songURL= link.attr("value"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:18:19.233

```
Element link = divAudio.select("input[name*=url").first();
        String songURL= link.attr("value"); 
```

此代码工作正常

# php - 图像上的 HTML 未以 pdf 格式打印

> ID：15832456
> 
> 赞同：1
> 
> 时间：2013-04-05T11:13:15.093
> 
> 标签：php, html, mpdf

这是我的代码

```
<?php
class Diagram
{
function outLet()
{
    $boothsizer = 3;

    if($boothsizer ==  3){
        $cellWidth = '112px';
        $cellHeight = '52px';
        $innerDivElectricTop = '41px'; 
        $innerDivElectricLeft = '110px';    
        $backgroundImage = 'url(booth_top_images/5X20TOP.jpg)';
        $width = '900px';
        $height = '225px';
        $sidewalls = 2;
        $backwalls = 6; 
    }
    else
    if($boothsizer ==  19)
    {
        $cellWidth = '144px';
        $cellHeight = '145px';
        $innerDivElectricTop = '105px'; 
        $innerDivElectricLeft =  '73px';    
        $backgroundImage = 'url(booth_top_images/10X10TOP.jpg)';
        $width = '599px';
        $height = '605px';
        $sidewalls = 3;
        $backwalls = 3;
    }

    $innerDivElectricWidth = $backwalls * $cellWidth;
    $innerDivElectricHeight = $sidewalls * $cellHeight;

    $output = '<div style="width:'.$width.'; height:'.$height.'; background-image:'.$backgroundImage.'">';

    $output .= '<div id="inner_div_electric" style="position: relative; top: '.$innerDivElectricTop.'; left: '.$innerDivElectricLeft.';width:'.$innerDivElectricWidth.';height:'.$innerDivElectricHeight.'">';

    for($i=1; $i<=$sidewalls; $i++)
    {
            for($j=1; $j<=$backwalls; $j++)
            {
                $output .= '<span class="droppable_class" style="width:'.($cellWidth-2).'; height:'.($cellHeight-2).'; border:1px solid red; float:left;display:inline-block;margin:0px;padding:0px;"></span>';

            }
    }

    $output .= '</div></div>';

    echo $output;

    include("test/mpdf/mpdf.php");
    $mpdf=new mPDF();   
    $mpdf->ignore_invalid_utf8 = true;
    $stylesheet = file_get_contents('appstyle_pdf.css');
    $mpdf->WriteHTML($stylesheet,1);
    $mpdf->WriteHTML($output);

    $comname = "vam";

    $name = "test/generated_pdfs/".str_replace(" ","-",$comname).".pdf";      
    $mpdf->Output($name,"F");   

}
}

$diag = new Diagram;
print $diag->outLet();
?> 
```

在我的代码中，我试图在图像上生成一些正方形并尝试生成 pdf，当我回显 $output 时，我可以在图像上看到正方形，但是在我生成的 pdf 中只有图像正在打印，正方形不是？

有人有什么想法吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:42:43.463

`<span>`将标签更改为`<div>`标签，它应该可以工作。

不幸的是，我目前对解决方案没有任何解释。根据 mpdf 脚本`<span>`标签是`enabledtags`集合的一部分 - mpdf.php 第 23249 行。所以我不完全确定为什么`<div>`有效而`<span>`无效。

# python - 如何在 unittest Python 中创建继承类的实例，以便我可以在 simpleXMLRPCServer 中注册该类的实例

> ID：15832464
> 
> 赞同：2
> 
> 时间：2013-04-05T11:13:30.063
> 
> 标签：python, unit-testing, inheritance, xml-rpc

```
from __future__ import with_statement
from sikuli.Sikuli import *

import os
import unittest
import this
import xmlrpclib
import SimpleXMLRPCServer, SocketServer, threading

class SimpleThreadedXMLRPCServer(SocketServer.ThreadingMixIn, SimpleXMLRPCServer.SimpleXMLRPCServer):
    pass

class ABC(object):
    def A(self):
      ...........
    def B(self):
      ...........
    def C(self):
      ...........     

class XYZ(unittest.TestCase,ABC):
    def setUp(self):
         print "Inside setup"
         pass      
    def tearDown(self):
         print "Inside tearDown" 
         pass
    def test_1(self):
        self.A()
        self.B()
        self.C()

    def D(self):    
        print "Inside D"
        return True    

suite = unittest.TestLoader().loadTestsFromTestCase(XYZ)

class ServerThread(threading.Thread):
    def __init__(self):
        threading.Thread.__init__(self)
        self.server = SimpleThreadedXMLRPCServer(("x.x.x.1", 8000))
        #self.server.register_instance() #How to Register an instance of XYZ here.
    def run(self):
        self.server.serve_forever()

server = ServerThread()
server.start() 
```

所以我的问题是如何在`XYZ`这里注册一个实例。在上面的注释行中，以便可以从 XMLRPC 客户端调用它，例如：

```
client = xmlrpclib.ServerProxy("http://x.x.x.2:8000")
handraise = client.D() #Or any other possible way 
```

我知道它可以使用，`register_function(D)`但我希望整个班级`XYZ`都可以使用`register_instance()`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:22:47.730

理论上这应该有效：

```
self.server.register_instance(XYZ())    # but it throwed some runTest Error for me 
```

无论如何，在 register_instance 内的类名中显式地将方法名称作为 arg 传递，例如：

```
self.server.register_instance(XYZ("D")) 
```

对我来说按预期工作。
从 xmlrpc 客户端，调用 D() 如下：

```
handraise = client.D() 
```

# backbone.js - 骨干.js - 未定义不是一个函数

> ID：15832469
> 
> 赞同：1
> 
> 时间：2013-04-05T11:13:40.180
> 
> 标签：backbone.js

我已经开始学习 Backbone.js 并尝试使用 Collections 编写我的第一个应用程序。这是代码：

```
console.clear();
(function($){

   window.App = {

      Models : {},
      Collections : {},
      Views : {}

   };

   //a single estimate
   App.Models.Estimate = Backbone.Model.extend({});

   // multiple esitmates
   App.Collections.Estimates  = Backbone.Collection.extend({

      model : App.Collections.Estimate

   });

   App.Views.Estimates = Backbone.View.extend({
      tagName: 'ul',

      render : function(){

      this.collection.each(this.addTo,this);

   },
      addTo:function(estimate){

         var dir = App.Views.Estimate({model:estimate}).render();
         this.$el.append(dir.el);

      }

   });

   App.Views.Estimate  = Backbone.View.extend({
      tagName: 'li',

      render :function(){

         this.$el.html(this.model.get('title'));
         return this;
      }

   });

   var jSon = [{title:'Abhiram', estimate:8}];
   var estimates = new App.Collections.Estimates(jSon);
    console.log(estimates);

   var tasksView = new App.Views.Estimates({collection:estimates});
  // var a = tasksView.render().el;
   //console.log(a);

})($j||jQuery); 
```

我已经包括了所有三个：

首先是 jQuery，其次是下划线，然后是 Backbone。我不断收到“未定义不是函数”。如果我做错了什么，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:17:50.343

您确定要将集合`App.Collections.Estimate`作为模型分配给它自己吗？

```
// multiple esitmates
App.Collections.Estimates  = Backbone.Collection.extend({
    model : App.Collections.Estimate
}); 
```

# c# - 检查用户名是否存在

> ID：15832472
> 
> 赞同：-2
> 
> 时间：2013-04-05T11:12:34.723
> 
> 标签：c#, asp.net

我有一个注册页面，当用户输入他的电子邮件 ID 时，它正在“验证他是否已经是注册用户”。

我尝试在文本框的 textchange 事件中编写代码，但它不起作用。在运行时它不会调用文本框的 textchange 事件。

```
 obj.LocalConnection_Class(con);
    cmd = new SqlCommand();
    cmd.Connection = con;
    cmd.CommandText = "select COUNT(*) from SUBSCRIBER_MASTER where emailId ='" + txtEmail.Text + "'";
    dr = cmd.ExecuteReader();
    dr.Read(); 
```

谁能告诉我如何使它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:02:43.003

您需要将 TextBox AutoPostBack 属性设置为 true

```
<asp:TextBox ID="txtcheck" runat="server" AutoPostBack="true"  Ontextchanged="txtcheck_TextChanged"></asp:TextBox> 
```

希望对你有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:33:44.413

要调用文本框更改事件，您应该将此“ `AutoPostBack`”属性添加到文本框标签并将其设置为`True`

所以你的文本框标签看起来像

```
<asp:TextBox ID="TextBox1" runat="server" AutoPostBack="true" Ontextchanged="TextBox1_TextChanged"></asp:TextBox> 
```

# c++ - 如何创建可获取的模板类型数据sa类字段？

> ID：15832473
> 
> 赞同：0
> 
> 时间：2013-04-05T11:13:48.693
> 
> 标签：c++, visual-studio-2010, c++03

我有一个：

```
template<class T, class E>
class Bla {
} 
```

我想让其他类可以访问 T ，例如：

```
Bla::TypeOfE 
```

在 C++03 中这样的事情是可能的吗？怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:15:36.303

在`public`部分添加

```
typedef T TypeOfT; 
```

像这样使用它

```
Bla<int, double>::TypeOfT value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:17:31.463

是的：

```
template<class T, class E>
class Bla {
 public:
     typedef E TypeOfE;
} 
```

# d3.js - d3.js：带正投影的地图 - 如何选择合适的 clipAngle()

> ID：15832475
> 
> 赞同：1
> 
> 时间：2013-04-05T11:13:50.170
> 
> 标签：d3.js, data-visualization, map-projections

我正在创建一个包含三个地图的可视化，并且正在努力寻找正确的值以放入 clipAngle()。根据我的阅读，90 应该很好，它适用于地图 0 和 1，但不适用于地图 2（然后它返回一个实心圆圈 - 当我尝试旋转地图时有时也会发生这种情况）。

这是工作代码（这是正在进行的大量工作）：http: [//vibekehauge.com/jordoverflatenspuslespill.html](http://vibekehauge.com/jordoverflatenspuslespill.html)

对此问题的任何帮助将不胜感激。

# ruby-on-rails - 仅在服务器启动时运行的功能

> ID：15832476
> 
> 赞同：3
> 
> 时间：2013-04-05T11:13:53.957
> 
> 标签：ruby-on-rails

我正在开发一个 Rails 应用程序。我只想在服务器启动期间执行一段代码。我在哪里添加此代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T11:15:36.163

在`config/initializers`. 该目录中的所有`.rb`文件只会在服务器启动时运行。

# sed - sed 或 awk，复制到一边以创建锚文本

> ID：15832480
> 
> 赞同：0
> 
> 时间：2013-04-05T11:14:07.863
> 
> 标签：sed, awk, anchor

怎么可能改变这个：

```
"dir1/dir2/../file1.ext"><
"dir1/dir2/../file2.ext">< 
```

进入这个：

```
"dir1/dir2/../file.ext">file1.ext<
"dir1/dir2/../file.ext">file2.ext< 
```

与`sed`或`awk`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:27:34.897

像这样的东西应该工作：

```
sed 's_/\([^/>]\+\)"><_/\1">\1<_g' file 
```

# c# - 在 c# windows 中设置 datetimepicker

> ID：15832483
> 
> 赞同：0
> 
> 时间：2013-04-05T11:14:31.270
> 
> 标签：c#, .net

如何设置日期和时间`DateTimePicker`存储在`database`哪个“ `2013-04-04 04:27:16.000`”格式

数据库中的列是 ' `datetime`' 格式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T11:26:01.480

如果您有日期时间字符串：

```
var converter = TypeDescriptor.GetConverter(typeof(DateTime));
var result = converter.ConvertFrom(dateTimeString);
DateTime value = (DateTime)result;
DateTimePicker.Value = value; 
```

或使用 DateTime.Parse 或 TryParse

或者您可以从数据库中获取它作为 DateTime

```
DateTime? dt =row.Field<DateTime?>(columnName);
if(dt.HasValue) DateTimePicker.Value = dt.GetValueOrDefault(); 
```

其中*row*是您从数据库中获得的 DataRow

# r - 使用 ddply 而不是 for

> ID：15832489
> 
> 赞同：0
> 
> 时间：2013-04-05T11:14:59.803
> 
> 标签：r, for-loop, plyr

我对 plyr 包（以及一般的 R）很陌生，我有以下代码

```
# I have some dataframe df 
# columns: 
#     -somefactor: factor
#     -value:      numeric

f<-levels(df$somefactor)
k<-length(f)
m<-mat.or.vec(k,k)
for(i in 1:k) {
  for (j in 1:k)
    m[i,j]=cor(df[somefactor==f[i],]$value,df[somefactor==f[j],]$value)
} 
```

我怎样才能使用 ddply 函数（或类似的东西，只是为了去除那些丑陋的循环

非常感谢！

菲达

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:24:38.213

你可以尝试这样的事情：

```
cor(as.data.frame(split(df$value, df$somefactor))) 
```

# c++ - 使用 PInvoke 时，为什么要使用 __stdcall？

> ID：15832491
> 
> 赞同：4
> 
> 时间：2013-04-05T11:15:07.193
> 
> 标签：c++, pinvoke, calling-convention, function-declaration, stdcall

我一直在使用 PInvoke 让我的 C# 应用程序调用我编写的 C++ 函数。

现在，我不断听到我需要用`__stdcall`约定定义那些外部可访问的函数。我的问题是：为什么？

到目前为止，我不小心忽略了这个建议，一切都像一个魅力。当我添加`__stdcall`到我的函数中时，一切都以相同的方式工作（或者至少看起来如此）。

[本文](http://msdn.microsoft.com/en-us/library/zxk0tw93%28v=vs.80%29.aspx)说它`__stdcall`用于 Win32 位功能，但我正在针对 x64 平台进行编译。这是否意味着我`__stdcall`毕竟不应该使用，还是意味着我错过了其他东西？

请在回复时使用简单的英语。;-) 像这样的行（引用自我链接的文章）：

> 被调用者清理堆栈，因此编译器生成可变参数函数 __cdecl。

让我的大脑感觉好像有风滚草吹过它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T11:20:04.217

x64 上只有一种调用约定，因此您指定哪种调用约定并不重要。它在 x64 上总是被忽略。

在 x86 上，确保接口两侧的调用约定匹配很重要。因此，如果您期望在 x86 上运行您的代码，那么现在就获得它是明智的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T11:24:08.390

调用约定是 32 位代码中的历史事故。64 位代码中只有一种约定，因此无论您声明什么都无关紧要。

如果您编写的非托管 32 位 DLL 可能被非 C 或 C++ 编写的代码使用，那么使用 __stdcall 声明导出的函数有助于减少事故。大多数语言运行时都支持互操作以允许操作系统调用，因此它们将 __stdcall 设为默认值。

[您将在此答案](https://stackoverflow.com/a/15664100/17034)中找到有关调用约定和名称装饰的更多详细信息

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T11:20:42.003

您错过了 x64 和 Win32 完全不同的事实。Win32 是一个与 Windows 交互的 C API，它的[*调用约定*](http://en.wikipedia.org/wiki/Calling_convention)是`__stdcall`，而 x64 或 x86-64 是你的 CPU 寄存器的大小。（即 64 位宽）。

在 x86-64 调用约定下的 Wikipedia 文章中：

> 在 Windows 上下文中为 x64 架构编译时（无论是使用 Microsoft 还是非 Microsoft 工具），只有一种调用约定 — 此处描述的一种，因此 stdcall、thiscall、cdecl、fastcall 等现在都是一个和相同的。

显然 x64 (AMD) 并不关心调用约定，但希望以上内容能消除一些混乱。

# google-calendar-api - Google Calendar API 返回“无效凭据”(401)

> ID：15832502
> 
> 赞同：1
> 
> 时间：2013-04-05T11:15:41.743
> 
> 标签：google-calendar-api, google-api-java-client, google-oauth

我在使用 Java 客户端库（google-api-client 版本 1.13.2-beta、google-api-services-calendar 版本 v3-rev26-1.13.2-beta）对 Google Calendar API v3 进行身份验证时遇到问题。

我们有一个市场应用程序，安装该应用程序应为其提供读取（和写入）Google 日历事件所需的凭据。

我们使用带有 Hmac 的 2-legged OAuth 1.0，这意味着不需要令牌。这正是我想要做的，但使用日历而不是任务： [https ://developers.google.com/google-apps/help/articles/2lo-in-tasks-for-marketplace](https://developers.google.com/google-apps/help/articles/2lo-in-tasks-for-marketplace)

这是我从谷歌得到的错误：

```
com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
{
  "code" : 401,
  "errors" : [ {
    "domain" : "global",
    "location" : "Authorization",
    "locationType" : "header",
    "message" : "Invalid Credentials",
    "reason" : "authError"
  } ],
  "message" : "Invalid Credentials"
} 
```

我们也有客户不使用 Marketplace 应用程序，但手动为我们的域授予了适当的权限，并且一切对他们来说都很好。只有使用 Marketplace 应用程序的客户存在此问题（使用不同的 consumerKey 和 consumerSecret），这让我相信代码没有任何问题，但我们忽略了 Google 设置中的某个地方。

Marketplace 应用程序的权限看起来不错。

我遵循了我能找到的所有指南，适合我们的设置（虽然没有很多），而且据我所知，我正在做正确的事情。

API 密钥似乎已正确设置（已授予对日历 API 的访问权限）。正如我所提到的，这适用于我们的客户不是来自 Marketplace 应用程序，并且他们使用相同的 API 密钥。

无论如何，这是一个失败的 JUnit 测试来重现错误：

```
import java.io.IOException;
import java.util.List;

import org.junit.Test;

import com.google.api.client.auth.oauth.OAuthHmacSigner;
import com.google.api.client.auth.oauth.OAuthParameters;
import com.google.api.client.http.javanet.NetHttpTransport;
import com.google.api.client.json.jackson.JacksonFactory;
import com.google.api.services.calendar.Calendar;
import com.google.api.services.calendar.CalendarRequest;
import com.google.api.services.calendar.CalendarRequestInitializer;
import com.google.api.services.calendar.model.CalendarListEntry;

import junit.framework.Assert;

public class GoogleOAuthTest {

    @Test
    public void test() {
        final String API_KEY = "...";
        final String CONSUMER_KEY = "...";
        final String CONSUMER_KEY_SECRET = "...";
        final String GOOGLE_USER = "me@mydomain.com";

        // The 2-LO authorization section
        OAuthHmacSigner signer = new OAuthHmacSigner();
        signer.clientSharedSecret = CONSUMER_KEY_SECRET;

        final OAuthParameters oauthParameters = new OAuthParameters();
        oauthParameters.version = "1";
        oauthParameters.consumerKey = CONSUMER_KEY;
        oauthParameters.signer = signer;

        Calendar service = new Calendar.Builder(new NetHttpTransport(), new JacksonFactory(), oauthParameters)
                .setApplicationName("myapp")
                .setCalendarRequestInitializer(new CalendarRequestInitializer() {
                    @Override
                    protected void initializeCalendarRequest(CalendarRequest<?> request) throws IOException {
                        request.setKey(API_KEY);
                    }
                }).build();

        try {
            com.google.api.services.calendar.Calendar.CalendarList.List list = service.calendarList().list();
            list.getUnknownKeys().put("xoauth_requestor_id", GOOGLE_USER);
            // This is where I get the exception!
            List<CalendarListEntry> calendarList = list.execute().getItems();
        } catch (IOException e) {
            Assert.fail("Test failed: " + e.getMessage());
        }
    }
} 
```

我可能做错了什么？我的代码是否有明显问题，或者我们在 Google 设置中可能遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:26:47.843

不确定 API 密钥是什么，但除了请求初始化程序之外，我有非常相似的代码：

```
CalendarRequestInitializer initializer = new CalendarRequestInitializer() {

    @Override
    protected void initializeCalendarRequest(CalendarRequest<?> calendarRequest) throws IOException {
        ArrayMap<String, Object> customKeys = new ArrayMap<String, Object>();
        customKeys.add("xoauth_requestor_id", EMAIL_OF_THE_USER);
        calendarRequest.setUnknownKeys(customKeys);
    }
}; 
```

这对我有用......希望它有帮助；

**更新**使用您在 Marketplace -> My Vendor Profile -> My App 中单击“注册其他 API”链接时获得的 API 密钥。

# android - Phonegap FileTransfer 似乎在 android 中什么也不做

> ID：15832503
> 
> 赞同：0
> 
> 时间：2013-04-05T11:15:44.290
> 
> 标签：android, cordova, file-transfer

我在使用 Phonegap FileTransfer API 时遇到问题。目前我正在尝试运行下面的示例代码：

```
 saveFile: function (filepath,location, filetype) {
            console.log("FUNCTION BEING CALLED");
            var self = this;
            //filepath is path to the internets file
            //location is where on the device the file will be stored
            var fileTransfer = new FileTransfer();
            fileTransfer.download(filepath,self.rootPath + location + '.' + filetype,
                function (entry) {
                    console.log('############# DOWNLOAD WORKS ##############');
                    console.log("download complete: " + entry.fullPath);
                },
                function (error) {
                    console.log('############# DOWNLOAD FAILS ##############');
                    console.log("download error source " + error.source);
                    console.log("download error target " + error.target);
                    console.log("upload error code" + error.code);
                }
            )
        } 
```

目前，似乎什么都没有发生。没有错误被标记，并且回调似乎没有被触发。我得到的只是“被调用的函数”的初始 console.log。

我已经仔细检查过，可以确认我包含了 cordova js 文件 ( `cordova-2.4.0.js`)。

如果重要的话，我已经在 Android 模拟器、HTC One X 和三星 Galaxy S3 上进行了尝试，结果都一样。

有谁知道这可能是什么原因造成的？

编辑：我也觉得我应该提到它也都在 Angular JS 应用程序中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:23:17.117

这就是我在项目中的做法

```
 document.addEventListener("deviceready", onDeviceReady, false);

 function onDeviceReady() {
     window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
  }
 function gotFS(fileSystem) {
    window.fileSystem = fileSystem;
    //create directory test_app
    fileSystem.root.getDirectory("test_app", {
        create : true,
        exclusive : false
    }, dirWallpaper, fail);

 function fail(evt) {

 }

function dirWallpaper(entry) {
    //save the directory path
    window.testDir = entry;
}
//now download file to that location
saveFile: function (filepath,location, filetype) {
        console.log("FUNCTION BEING CALLED");
        var self = this;
        //filepath is path to the internets file
        //location is where on the device the file will be stored
        var fileTransfer = new FileTransfer();
        var path = window.testDir.fullPath + "/test_pdf."+ filetype;
        fileTransfer.download(filepath,path,
            function (entry) {
                console.log('############# DOWNLOAD WORKS ##############');
                console.log("download complete: " + entry.fullPath);
            },
            function (error) {
                console.log('############# DOWNLOAD FAILS ##############');
                console.log("download error source " + error.source);
                console.log("download error target " + error.target);
                console.log("upload error code" + error.code);
            }
        )
    } 
```

试试这样，让我知道。

# java - 排队请求只有一个用户“工作”

> ID：15832504
> 
> 赞同：0
> 
> 时间：2013-04-05T11:15:45.540
> 
> 标签：java, web-applications, concurrency, queue, jms

基本上，我正在尝试构建一个与 Arduino 接口的 Java WebApp。由于这种“物理”限制，我当时只有一个用户使用微控制器。

我想创建一个包含所有请求的队列并设置一个限制（即 20 秒），然后与下一个用户一起使用。将来可能会有让两个用户相互连接以“交互”的选项。

我怎样才能实现这个基础设施？JMS? 其他方法？

我已经将其他 mqs 用作 Kestrel，但只是使用“字符串”，而且我不知道如何在我的情况下使用它。：/

（如果这相关或有帮助，我可能会使用 JBoss）

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:18:40.143

Arduno 附带了一个 RXTX Java 库，我建议将它用于 Arduno 接口。

# kendo-ui - 日期时间选择器的重置验证消息不起作用

> ID：15832507
> 
> 赞同：1
> 
> 时间：2013-04-05T11:15:49.217
> 
> 标签：kendo-ui

我有带验证的剑道日期时间选择器。我想在单击重置按钮时重置验证消息。当我们单击重置按钮时，重置验证消息。我试过了，但它不起作用。这是我的重置代码

```
 $("#clear").click(function(){
       $("#datetimepicker").find("span.k-tooltip-validation").hide();
        $("#datetimepicker1").find("span.k-tooltip-validation").hide();

         }); 
```

我的垃圾箱是[http://jsbin.com/ufimom/159/edit](http://jsbin.com/ufimom/159/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:21:36.587

你可以试试这个：

```
$("#datetimepicker span.k-tooltip-validation").hide();
$("#datetimepicker1 span.k-tooltip-validation").hide(); 
```

问候，

# javascript - 为 YouTube 弹出播放器的弹出窗口应用样式

> ID：15832513
> 
> 赞同：0
> 
> 时间：2013-04-05T11:16:08.993
> 
> 标签：javascript, jquery, css, youtube

我在我的网络应用程序中使用了 Youtube 弹出播放器作为视频播放器，我正在尝试更改弹出窗口的样式..但我无法做到这一点..我找到`cssClass property`了应用样式..这是 youtube 弹出播放器的链接。 . [http://lab.abhinayrathore.com/jquery_youtube/](http://lab.abhinayrathore.com/jquery_youtube/)

我该如何解决它..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:13:40.437

如果要更改插件的默认值，可以按照 Arunkumar 的回答，这样您就不必在每次要初始化插件时都设置选项。

或者，您可以使用分配的插件为每个元素设置特定属性，如下所示：

```
$(function () {
    var options = {
        fullscreen         : 0,
        color              : 'red',
        width              : 500,
        height             : 300,
        overlayOpacity     : 0.9
    };
    $("a.youtube").YouTubePopup(options);
}); 
```

[**演示**](http://jsfiddle.net/LCbGp/)

或者，您可以执行以下操作，而不是创建变量选项：

```
$(function () {
    $("a.youtube").YouTubePopup({
        fullscreen         : 0,
        color              : 'red',
        width              : 500,
        height             : 300,
        overlayOpacity     : 0.9
    };);
}); 
```

希望我能让你更容易理解！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:02:27.183

使用脚本自定义 Popup

喜欢

```
$(function () {
$.fn.YouTubePopup.defaults.fullscreen = 0;
$.fn.YouTubePopup.defaults.color1 = 'CCCCCC';
$.fn.YouTubePopup.defaults.width='500';
$.fn.YouTubePopup.defaults.height='300'; 
$.fn.YouTubePopup.defaults.overlayOpacity='0.5';
              }); 
```

您可以通过上述方式更改弹出默认值。

希望能帮助到你：）;

# python - Python 3 - 基本模拟器

> ID：15832517
> 
> 赞同：0
> 
> 时间：2013-04-05T11:16:21.923
> 
> 标签：python, simulator, basic

正如标题所示，我目前正在使用 Python 开发 BASIC 模拟器。这个程序应该打印“成功”或“无限循环”，这取决于哪个是真的。这是我的代码：

```
def findLine(prog, target):
   for l in range(0, len(prog)):
      progX = prog[l].split()
      if progX[0] == target:
          return l 

def execute(prog):
  location = 0
  while True:
    if location==len(prog)-1: return "success"
    else: return "infinite loop"
    T = prog.split()[location]
    location = findLine(prog, T) 
```

FindLine 应该接受这样的输入：findLine(['10 GOTO 20', '20 END'], '20') 并输出出现目标的 prog 的索引。
execute 应该接受这样的输入： execute(['10 GOTO 21', '21 GOTO 37', '37 GOTO 21', '40 END'])

问题是，这段代码的“def execute(prog)”部分被破坏了，我需要一些帮助来修复它，这样它才能完成我之前描述的操作。任何有关调试的帮助将不胜感激，如果这有点含糊，我深表歉意——我不太确定要写什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:34:27.403

您应该尝试在调试器中逐步执行您的代码，看看会发生什么。或者只是在精神上做。

首先，您设置`location`为 0。然后，您查看它是否等于行数。如果是，则返回*成功*，否则，返回*无限循环*。你如何期望接下来的两行被执行？

我认为您应该重新设计检测无限循环的方式。当前不在最后一行不是充分条件......如果您的解释器只处理`GOTO`，那么两次到达同一行可能是一个很好的提示。但是如果你实现更多的逻辑，那么你应该考虑检测你到达每一行的次数，并在上面设置一个阈值。

# google-chrome - 自动滚动 Chrome 的 DevTools 控制台

> ID：15832519
> 
> 赞同：35
> 
> 时间：2013-04-05T11:16:25.370
> 
> 标签：google-chrome, google-chrome-devtools

自几年前问世以来，Chrome 已成为事实上的 Web 开发 IDE。我一直在使用它的 Canary（版本 28.0.1464.0）频道并且很开心。唯一困扰我的问题是无法让 DevTools 控制台窗格自动滚动到添加的最后一条消息。我知道许多人更愿意拥有当前的行为。但是我想知道：有谁知道如何（如果当前版本可能的话）翻转开关并让控制台自动滚动？

谢谢。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2014-07-25T22:31:19.303

清除控制台并将栏向下滚动到底部对我不起作用。

问题是我**缩小了**DevTools。

如果我**`Ctrl-0`**在 Windows 上点击（零），或者**`Cmd-0`**在 OS X 上点击（零），在 DevTools 上恢复默认字体大小，然后自动滚动到底部按预期工作。

感谢这个人指出：[http ://code.google.com/p/chromium/issues/detail?id=161646#c5](http://code.google.com/p/chromium/issues/detail?id=161646#c5)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-10-15T07:56:59.893

# 发生这种情况的一个原因：

将 HTML 元素记录到控制台中会使控制台视图丢失最后的控制台消息。

# 如何解决：

而不是做这样的事情：

`console.log("Some logging message:", html_element)`

试试这个（用括号括起来的消息）

`console.log(["Some logging message:", html_element])`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-01T15:46:26.767

在 Chrome 版本 29.0.1547.76 m 中，当您取消停靠控制台时，它会自动滚动。如果您单击控制台，它将停止自动滚动，然后您必须清除控制台，然后才能再次开始自动滚动。

“取消停靠到单独的窗口”。按钮是控制台最左下角的按钮。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-12T10:38:55.737

它也让我发疯，我在这里找到了解决方案：

[谷歌浏览器关注开发者控制台日志](https://stackoverflow.com/questions/15247028/google-chrome-follow-developer-console-logging)

> 在控制台打开的情况下，将滚动条向下拖动到窗口底部并释放它。它应该为你拖尾输出。

控制台是否停靠并不重要。

在 osx 10.8.5 和 chrome 31 上为我工作

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-07-16T10:48:41.817

对我来说，我注意到当控制台显示警告时自动滚动停止，所以我过滤掉了警告，一切都很好：

[![控制台日志截图](https://i.stack.imgur.com/NKS75.jpg)](https://i.stack.imgur.com/NKS75.jpg)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-29T11:07:38.803

对我来说，唯一有效的解决方案是：

1.  单击 F1（设置）
2.  在底部恢复默认值并重新加载。

以上都没有奏效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-18T10:49:10.207

我在 Chrome 49+ 中找到了这个解决方案

转到开发工具/设置/

“控制台选项卡”

x 导航时保留日志。

完毕！

# c# - c# datagridview 区分用户输入和程序

> ID：15832524
> 
> 赞同：0
> 
> 时间：2013-04-05T11:16:34.817
> 
> 标签：c#, input, datagridview

我有一个 C# WinForm `DataGridView`。

该程序应该能够更改 中的单元格值`DataGridView`，但不应允许用户这样做。

即：如何区分用户或程序是否正在编辑一个单元格`DataGridView`？

到目前为止，我只找到了**只读**属性（例如列）。但是随后程序也无法编辑该列。

我可以离开该列`readonly=true`，当程序想要更改单元格值时， make `readonly=false`，更改值，`readonly=true`......但这个解决方案对我来说似乎很糟糕，特别是如果列需要从程序不断更新（例如，金融价格数据流)，但我不希望用户更改价格（即使它很快会被程序覆盖，这可能很快发生，也可能不会很快发生）。

谢谢， 伊姆兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:20:49.503

你是这个意思？

```
dataGridView1.EditMode = DataGridViewEditMode.EditProgrammatically; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:34:49.140

您可以使用 DataGridView 的“启用”属性来启用整个数据网格的用户输入。

# selenium - 如何为 Selenium 网格 Java Maven 设置启动服务器

> ID：15832528
> 
> 赞同：2
> 
> 时间：2013-04-05T11:16:59.153
> 
> 标签：selenium, selenium-webdriver, selenium-rc, selenium-grid

我使用 Maven Java 设置 Selenium 框架。所以所有依赖项都存储在 POM.xml 这里我有疑问.. 如何启动服务器 java -jar selenium-server-standalone-2.18.0.jar -role hub .. 我应该把这个 jar 再次放在某个文件夹中吗？从那条路开始？或者我应该去 Maven Dependencies 文件夹 (.m2\Repositories) 吗？

有人可以建议我吗？

如果问题不清楚，请回复。我会以不同的方式解释。

谢谢拉朱

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T10:18:57.177

从 Maven 运行 Selenium Grid 可能不是一个好主意。这取决于您将要做什么以及如何做。

通常，您将针对几个/许多不同的环境并行运行 Selenium 测试，这具有相当大的资源成本。当您从 Maven 启动进程时，它们在其主线程中运行（作为子线程），因此它们的资源仅限于 Maven 的配置。这取决于您的机器和配置，但是从 Maven 启动网格并在一台普通机器上并行运行一些 Selenium 测试（集线器和几个节点，每个节点有 5 个实例）可能会使 Maven 因缺乏而挂起的记忆。为避免这种情况，您可以调整配置，按顺序运行测试（不是并行，仅一个节点）等，但同样：这取决于您想要做什么以及如何做，也许您应该考虑运行您的其他方式硒测试。

不过，如果您只是想尝试 Selenium Grid 的工作原理，或者只是一些将要运行的特定测试，您可以`maven-antrun-plugin`像这样使用和启动集线器和节点：

```
<plugin>
 <groupId>org.apache.maven.plugins</groupId>
 <artifactId>maven-antrun-plugin</artifactId>
 <version>1.7</version>
 <executions>
    <execution>
        <phase>pre-integration-test</phase> <!-- your Selenium tests should run in integration phase -->
        <configuration>
            <target>
                <java classname="org.openqa.grid.selenium.GridLauncher"
                      classpathref="maven.test.classpath"
                      failonerror="true"
                      fork="false">
                    <arg line="-role hub"/>
                </java>
                <java classname="org.openqa.grid.selenium.GridLauncher"
                      classpathref="maven.test.classpath"
                      failonerror="true"
                      fork="false">
                    <arg line="-role node
                               -browser 'browserName=firefox,version=19.0,maxInstances=3'
                               -browser 'browserName=internet explorer 64bits,version=9.0,maxInstances=2'
                               -hub http://localhost:4444/grid/register 
                               -port 5555 
                               -timeout 40000"/>
                </java>
                <java classname="org.openqa.grid.selenium.GridLauncher"
                      classpathref="maven.test.classpath"
                      failonerror="true"
                      fork="false">
                    <arg line="-role node
                               -browser 'browserName=chrome,version=24.0.1312.56,maxInstances=3'
                               -browser 'browserName=internet explorer 64bits,version=9.0,maxInstances=2'
                               -hub http://localhost:4444/grid/register 
                               -port 5556 
                               -timeout 40000"/>
                </java>
            </target>
        </configuration>
        <goals>
            <goal>run</goal>
        </goals>
    </execution>
</executions>
</plugin> 
```

你的 pom.xml 中应该有这个依赖：

```
 <dependency>
        <groupId>org.seleniumhq.selenium.server</groupId>
        <artifactId>selenium-server-standalone</artifactId>
        <version>2.30.0</version>
        <scope>test</scope>
    </dependency> 
```

# java - 使用 Camel 从 Web 服务获取数据

> ID：15832529
> 
> 赞同：1
> 
> 时间：2013-04-05T11:17:03.647
> 
> 标签：java, web-services, apache-camel

有很多关于将 Camel 与 JMS 结合使用的信息，但我找不到太多关于使用 Camel 从 Web 服务请求数据的信息。我想知道这是否可以直接执行此操作，还是我需要使用某种 JMS/队列？

理想情况下，我希望我的服务（使用 java DSL）向另一个 Web 服务发送请求，检索数据，然后将其存储在本地文件中。是否可以使用简单的自定义 RouteBuilder 和 camelContext 在 Camel 中执行此操作？我尝试使用设置我的路线

```
`from(“http:..”).to(“file:...");` 
```

但这似乎不起作用，因为它似乎没有从 Web 服务获取数据。根据我的阅读，我的印象是端点`http:`会自动构建请求并将其路由到文件。

我现在想知道接下来我可以尝试什么，如果这甚至可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:21:09.840

这绝对是可能的。最好的例子是[CXF-Proxy Example](http://camel.apache.org/cxf-proxy-example.html)。这显示了如何从 Camel 调用远程 Web 服务。如果您遇到问题，请随时提出具体问题，我们可以提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:59:43.497

您也可以使用 Spring Web Services 组件

[http://camel.apache.org/spring-web-services.html](http://camel.apache.org/spring-web-services.html)

在这种情况下，您的路线将如下所示：

```
from("<some event to trigger the route>")
.to("spring-ws:<endpoint of the WS you want to use>")
.to("file:<write the WS result>") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T07:02:04.313

如果您不介意在 SOAP 级别上进行尝试，您可以尝试在[http://camel.apache.org/soap.html 链接](http://camel.apache.org/soap.html)中找到的方法。即使您最终使用更高级别的东西，它也值得一看。

# php - !$variable = $variable inside if

> ID：15832530
> 
> 赞同：2
> 
> 时间：2013-04-05T11:17:02.923
> 
> 标签：php, if-statement

[我在这里](http://php.net/manual/en/sockets.examples.php)学习 PHP 套接字服务器和客户端的基础知识。

然后我偶然发现了这些行（摘自上述链接的第一个示例，发生在里面`while`）：

```
if (false === ($buf = socket_read($msgsock, 2048, PHP_NORMAL_READ))) {
    echo "socket_read() failed: reason: " . socket_strerror(socket_last_error($msgsock)) . "\n";
    break 2;
}

if (!$buf = trim($buf)) {
    continue;
} 
```

我对阅读部分没有意见，并在阅读错误时关闭连接。

但接下来`if`的事情让我发疯了。
首先，我对如何以及需要如何为布尔值赋值感到困惑。
其次，我很难完全理解整个表达。

有人可以解释一下如果发生了什么，以及它如何应用于服务器上下文？

PS如果问题没有正确提出，请原谅。我只是对那里发生的事情感到困惑，不知道具体要求什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T11:18:58.470

使用此语句，没有分配给布尔值。我们正在比较(true false, 而不仅仅是 0)的类型`false`和值。`false`你可以[在这里阅读](http://php.net/manual/en/language.operators.comparison.php)

```
if (false === ($buf = socket_read($msgsock, 2048, PHP_NORMAL_READ))) 
```

然后

```
if (!$buf = trim($buf)) {
    continue;
} 
```

这与

```
$buf = trim($buf);
if ($buf == false) {
  continue;
} 
```

所以，解释一下原文：

```
// The assignment happens first and then we're checking the boolean value
if (!$buf = trim($buf)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:24:49.537

这是代码的解释。

```
false === ($buf = socket_read($msgsock, 2048, PHP_NORMAL_READ)) 
```

首先，`socket_read`被调用，结果存储在`$buf`. 然后`$buf`与 比较，`false`看是否为 a `bool`，其值为`false`。（`===`同时表示相同类型和相等）

```
if (!$buf = trim($buf)) {
    continue;
} 
```

在这部分代码中，首先`$buf`修剪并将结果存储在`$buf`. 然后检查是否`$buf`是`false`. 如果是假的，`continue`采取行动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T11:21:53.627

表达式是可拆分的。

*   `$buf = trim($foo)`
*   `$check = !$buf`
*   `if ($check) { something(); }`

首先你得到变量，然后检查它是否评估为假（可能是`false`，可能是`null`可能`0`），最后 oyu 根据该信息进行切换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T11:34:04.457

## 如果您正在寻找基础知识，那就去旅行吧！

试试这个代码

```
<?php
    $buf="0 ";// (note the spaces)
    //next try changing $buf="1 "; (note the spaces for trim)

    echo $buf ."<----Non trimmed buf<br>" ;
    $buf= trim($buf);
    echo $buf ."<----trimmed buf<br>" ;
    echo !$buf ."<----!buf<br>" ;

    if (!$buf = trim($buf))
       echo "Trimmed buf is false";
    else
       echo "Trimmed buf is True";
?> 
```

**输出**

```
0 <----Non trimmed buf
0<----trimmed buf
1<----!buf
Trimmed buf is false 
```

# iphone - 自动调整大小在 xib 中不起作用

> ID：15832532
> 
> 赞同：5
> 
> 时间：2013-04-05T11:17:17.500
> 
> 标签：iphone, ios, ipad, xib, autoresize

我做了简单的设计`.xib`，我的应用程序的部署目标是**iOS 5** 当我在模拟器或设备中运行我的应用程序时，我的视图不会调整大小。

这是我的`.xib`文件的快照..

![](https://i.imgur.com/LP2xSmL.png) 当我尝试在模拟器中运行我的应用程序时，它在 4" 的模拟器中正常运行，但是当我在 3.5" 的模拟器中运行我的应用程序时，它不会调整大小。**自动调整子视图**属性被选中。

这是我的快照`Simulaotrs`，第一个屏幕截图是 3.5 英寸，第二个屏幕截图是 4 英寸。

![](https://i.imgur.com/8ATPz9J.png) ***提前致谢。***

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T19:33:28.953

您能否在 .xib 文件中使用下一个设置（416 = 480 - 20（状态栏宽度）- 44（导航栏宽度） ![在此处输入图像描述](https://i.stack.imgur.com/aL7Oa.png)

![416 = 480 - 20（状态栏宽度）- 44（导航栏宽度）](https://i.stack.imgur.com/bC8lD.png)

如果您想要 iPhone 5 顶部的图标，请使用图标的下一个设置： ![在此处输入图像描述](https://i.stack.imgur.com/MleDe.png) ![在此处输入图像描述](https://i.stack.imgur.com/lbSvT.png)

如果您想要 iPhone 5 底部的图标，请使用图标的下一个设置： ![在此处输入图像描述](https://i.stack.imgur.com/lrpnA.png) ![在此处输入图像描述](https://i.stack.imgur.com/76I2z.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T11:53:00.487

如果您想自动调整和自动排序引用上视图的图标，请尝试使用布局选项卡
![布局](https://i.stack.imgur.com/ACsUQ.png)

或为每个布局创建自己的 .xib ;)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T11:33:32.947

检查您是否取消选中文件中的自动布局选项`.xib`..![在此处输入图像描述](https://i.stack.imgur.com/xtMsL.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-09T09:21:33.397

我有一个类似的效果，我想用一个按钮网格来实现。我想你会发现 iOS 5 支持的自动调整大小根本无法做到。最后我有两个 Storyboard，一个用于 iOS 6 设备，另一个用于 iOS 5。我的 App Delegate 然后检查主视图是否响应`constraints`UIView 的方法（它告诉你它是否支持新的基于 iOS 6 约束的布局）并加载相关的故事板。

在你的`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`方法中是这样的：

```
if (![self.window.rootViewController.view respondsToSelector:@selector(constraints)]) {
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_BC_iPhone" bundle:nil];
    UITabBarController *rootController = [storyboard instantiateInitialViewController];
    [self.window setRootViewController:rootController];
} 
```

默认情况下会加载 iOS 6 故事板，但如果需要，这将使用向后兼容的故事板覆盖它。向后兼容的 Storyboard 仅手动设置为 3.5" 显示器，因为 iPhone 5 将只运行最低 iOS 6，因此向后兼容的 Storyboard 不需要在 4" 显示器上运行。

设置向后兼容的 Storyboard 并不需要很长时间 - 只需复制使用约束的 iOS 6 版本，然后将其设置为 3.5" 显示器，关闭约束并修复视图。

另一种方法是根据屏幕尺寸以编程方式布局图标。这样做的好处是您可以设计它以适应任何屏幕尺寸，但缺点是这可能需要更多的努力。

[编辑] 注意到您使用的是 .xib 而不是 Storyboard，但理论是相同的。检查 UIView 是否响应，`constraints`然后相应地加载适当的 NIB (.xib) 文件。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-10T10:21:11.453

解决方案非常简单。
在您的超级视图上添加 UIVIew，然后像这样将所有图标添加到它们上（注意从导航控制器到标签栏的视图大小）
![在此处输入图像描述](https://i.stack.imgur.com/SLry9.png)

这个子视图（有你的图标的那个）应该有这些自动调整大小的掩码 ![在此处输入图像描述](https://i.stack.imgur.com/z8nbO.png)

*   并且您的图标应该具有相同的自动调整大小蒙版。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-11T05:36:37.307

您可以从[Ray WenderLich 示例](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)中获得参考。非常简单的 autoLayout 解释以及示例。它将描述您犯错的每一行。如果您启用了 Autolayout，则在选择 View 时约束必须显示在左侧。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-14T18:50:53.233

正如我所看到的，您有几个选项，具体取决于您的布局设置方式以及您希望如何解决它。

如果您使用的是 Autolayout，那么您的元素上将会有 Contraints，这可能会导致无法在视图中显示所有元素，即使您使用了调整大小。他们只是不适合。所以在那种情况下，我建议你使用 480 分辨率的滚动视图来让你的视图能够被显示。

![禁用自动布局](https://i.stack.imgur.com/wM4n7.png)

在您的 .h 文件中，为您的视图创建一个 IBOutlet：

```
@property (strong, nonatomic) IBOutlet UIView *contentView; 
```

在你的 .m 文件中，像这样设置。

```
//Add scrollview
UIScrollView *scrollView=(UIScrollView *)self.view;
scrollView.contentSize=self.contentView.frame.size;
[self.view addSubview:self.contentView]; 
```

另一个使您可以将元素放置在任何您喜欢的地方以不同间距等的解决方法是制作两个不同的 .xib 文件并在您的 ViewController 中像这样设置它：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    if([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone){
        if([UIScreen mainScreen].bounds.size.height == 568.0)
        {
            //Use iPhone5 VC
            self = [super initWithNibName:@"RootViewController-568h" bundle:nibBundleOrNil];
        }
        else{
            //Use Default VC
            self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
        }
    }
    return self;
} 
```

这是如果你调用你的 ViewController`RootViewController` 并且如果他们决定在即将到来的 iPhone5s 或 iPhone6 上扩展屏幕尺寸，这样你是安全的。它看起来不太好，但至少不会使应用程序崩溃。

# c - `pthread_mutex_trylock` 和 `pthread_mutex_lock` 行为

> ID：15832533
> 
> 赞同：0
> 
> 时间：2013-04-05T11:17:18.297
> 
> 标签：c, linux, multithreading, pthreads

[这是对这个](https://stackoverflow.com/questions/15813984/does-sleep-interfere-with-scanf)问题的跟进。

在该代码中，当我不使用`fflush(stdout)`输出时，我保留`sleep(1)`.

```
#define S sleep(0) 
```

* * *

```
void* xThread_fn(void* arg)
{
while(1)
    {
    S;
    pthread_mutex_lock(&read_c_mutex);
        if(!read_c)
        {
            pthread_mutex_unlock(&read_c_mutex);
            printf(" X");
        }
        else
        {
            pthread_mutex_unlock(&read_c_mutex);
            pthread_exit(NULL);
        }
    fflush(stdout); <---THIS ONE HERE
    }

} 
```

但是当我保持`sleep(0)`不需要时`fflush(stdout)`，输出会正确更新`stdout`。为什么会这样？

**Q1。**为什么存在`sleep(0)`会导致输出刷新方式发生任何变化？

如果我按如下方式修改代码（以跟踪执行），

```
#define S sleep(1)

int read_c = 0;
pthread_mutex_t read_c_mutex = PTHREAD_MUTEX_INITIALIZER;

void* inputThread_fn(void* arg)
{
printf("%p is Input\n",pthread_self());
char inputChar;
int i = 0;
while(1)
{
    S;
    printf("\nChecking input");
    scanf("%c",&inputChar);
    if(inputChar=='C' || inputChar == 'c')
    {
     pthread_mutex_trylock(&read_c_mutex);
     printf("%p has lock %d\n",pthread_self(),i);
     read_c = 1;
     pthread_mutex_unlock(&read_c_mutex);       
     printf("%p has UNlockED %d\n",pthread_self(),i++);
     printf("%p is Gone!\n",pthread_self());
     fflush(stdout);
     pthread_exit(NULL);
    }
}
}

void* xThread_fn(void* arg)
{
    int i = 0;
    printf("%p is X\n",pthread_self());
    while(1)
    {
     S;
     printf("X trying for a lock\n");
     pthread_mutex_trylock(&read_c_mutex);
     printf("%p has lock %d\n",pthread_self(),i);
     if(!read_c)
     {
      pthread_mutex_unlock(&read_c_mutex);
      printf("%p has UNlockED %d\n",pthread_self(),i++);
      printf("X\n");
      fflush(stdout);
     } 
     else
     {
      printf("%p is Gone!\n",pthread_self());   
      pthread_mutex_unlock(&read_c_mutex);
      fflush(stdout);
      pthread_exit(NULL);
     }
    }
}

void* yThread_fn(void* arg)
{
 printf("%p is Y\n",pthread_self());
 int i = 0;
 while(1)
 {
  S;
  printf("Y trying for a lock\n");
  pthread_mutex_trylock(&read_c_mutex);
  printf("%p has lock %d\n",pthread_self(),i);
  if(!read_c)
  {
   pthread_mutex_unlock(&read_c_mutex);
   printf("%p has UNlockED %d\n",pthread_self(),i++);
   printf("Z\n");
   fflush(stdout);
  }
  else
  {
    printf("%p is Gone!\n",pthread_self());
    pthread_mutex_unlock(&read_c_mutex);
    fflush(stdout);
    pthread_exit(NULL);
   }
  }
} 
```

样本输出是

```
0xb6700b70 is Input
0xb6f01b70 is Y
0xb7702b70 is X

Checking inputY trying for a lock
0xb6f01b70 has lock 0
0xb6f01b70 has UNlockED 0
Z
X trying for a lock
0xb7702b70 has lock 0
0xb7702b70 has UNlockED 0
X
Y trying for a lock
0xb6f01b70 has lock 1
0xb6f01b70 has UNlockED 1
Z
X trying for a lock
0xb7702b70 has lock 1
0xb7702b70 has UNlockED 1
X
Y trying for a lock
0xb6f01b70 has lock 2
0xb6f01b70 has UNlockED 2
Z
X trying for a lock
0xb7702b70 has lock 2
0xb7702b70 has UNlockED 2
X
Y trying for a lock
0xb6f01b70 has lock 3
0xb6f01b70 has UNlockED 3
Z
X trying for a lock
0xb7702b70 has lock 3
0xb7702b70 has UNlockED 3
X
Y trying for a lock
0xb6f01b70 has lock 4
0xb6f01b70 has UNlockED 4
Z
X trying for a lock
0xb7702b70 has lock 4
0xb7702b70 has UNlockED 4
X
c
Y trying for a lock
0xb6f01b70 has lock 5
0xb6f01b70 has UNlockED 5
Z
X trying for a lock
0xb7702b70 has lock 5
0xb7702b70 has UNlockED 5
X
0xb6700b70 has lock 0
0xb6700b70 has UNlockED 0
0xb6700b70 is Gone!
Y trying for a lock
0xb6f01b70 has lock 6
0xb6f01b70 is Gone!
X trying for a lock
0xb7702b70 has lock 6
0xb7702b70 is Gone! 
```

**Q2。**我之所以使用它，是`pthread_mutex_trylock()`因为我希望代码在 while 循环中继续进行，直到它获得一个锁来检查`read_c`. 似乎也可以使用`pthread_mutex_lock();`. 这让我更加困惑。用`pthread_mutex_trylock();` *too*，输出总是这样吗？一个`X`接着一个`Z`。会不会出现这种情况`X` `X` `Z` `X`（假设线程由操作系统切换并且 ythread 尝试锁定并失败）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T11:51:38.763

回答“trylock”问题。

`pthread_mutex_trylock`仅尝试锁定互斥锁。如果其他人锁定了互斥锁，它只会返回错误并继续运行。由于您没有检查返回值，因此您可能会在不持有互斥锁的情况下触摸受互斥锁保护的数据。

您的代码相当于根本没有任何互斥锁。

`pthread_mutex_trylock`仅应在由于某些非常特殊的原因而无法等待锁定并且在获取互斥锁失败时将退回到不同行为的情况下使用。在不检查返回值的情况下调用它始终是一个错误。

为了完全正确，您应该检查`pthread_mutex_lock`too 的返回值。但是您通常可以不这样做而侥幸逃脱。如果不检查 trylock 的返回值，您将永远无法逃脱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:00:41.827

当调用 sleep 时，进程被上下文切换（调度）。sleep(0) 表示你并没有真正在睡觉。所以进程继续执行。Printf 使用缓冲的标准输出。因此，您打印的任何内容都会进入该输出缓冲区，然后刷新到终端（屏幕）上。当进程休眠时，缓冲区不会被刷新，因此除非您进行显式刷新，否则您不会获得输出。如果您不休眠，则进程有机会执行刷新缓冲区并立即获得输出。每当您在程序中使用任何阻塞调用或休眠行为时，您都会发现 printf 的这种行为。如果您使用 fprintf(stderr,"your string") 那么无论您是否睡觉，它都会始终打印。

# math - 将笛卡尔点转换为旋转平面上的点（图片）

> ID：15832537
> 
> 赞同：1
> 
> 时间：2013-04-05T11:17:38.363
> 
> 标签：math, trigonometry, cartesian

我有一个笛卡尔点（蓝线），我需要将其转换为相对于旋转平面的点（绿框）。平面旋转 28.227º，如下所示。

可悲的是，我缺乏数学教育让我完全不知道如何解决这个问题。我需要能够获取任何 x,y 点并将其转换为旋转平面。

在这方面的任何帮助将不胜感激，因为我完全不知所措。

尽我所能，根据输入点的位置，我将需要几种不同的计算。

[![](https://i.stack.imgur.com/EW27f.png)](https://i.stack.imgur.com/EW27f.png)
[（来源：[adam-meyer.com](http://adam-meyer.com/lab/rotatedPlane2.png)）]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:33:03.653

我喜欢懂数学的朋友。谢谢KJ！这是答案。

```
function convertPoint(x,y){

    var degree = -28.227;
    var offset = 0; //change if your corner is not 0,0

    x2 = x *Math.cos(radians(degree)) + (y - offset) *Math.sin(radians(degree));
    y2 = x *Math.sin(radians(degree)) - (y - offset) *Math.cos(radians(degree));

    return {x: x2, y: y2}
}

function radians(degrees){
    return degrees * (Math.PI / 180);
} 
```

# jquery - 如何使用 jQuery 将类添加到元素的父级？

> ID：15832538
> 
> 赞同：0
> 
> 时间：2013-04-05T11:17:39.010
> 
> 标签：jquery

我设置了一个音乐页面，当单击歌曲的播放按钮时，课程从`buttons_mp3j`变为`buttons_mp3jpause`。当类为`buttons_mp3jpause`时，我想定位其父`li.song`级并向其添加一个类。

```
<li class="song">
    <div>
        <span>
            <span class="buttons_mp3jpause">
            </span>
        </span>
    </div>
</li> 
```

我已经尝试了以下代码，但它没有工作。

```
$(".buttons_mp3jpause").parents("li.song").addClass("playing"); 
```

我哪里做错了？

编辑

```
$('.haiku-play').bind('click', function() {
    $('.haiku-player').jPlayer("pause");
}) 
```

编辑 2

```
<article>
    <ul>
        <li class="song">yadayada</li>
        <li class="song">yadayada</li>
        <li class="song">yadayada</li>
        <li class="song">yadayada</li>
    </ul>
</article>
<article>
    <ul>
        <li class="song">yadayada</li>
        <li class="song">yadayada</li>
        <li class="song">yadayada</li>
        <li class="song">yadayada</li>
    </ul>
</article>
<article>
    <ul>
        <li class="song">yadayada</li>
        <li class="song">yadayada</li>
        <li class="song">yadayada</li>
        <li class="song">yadayada</li>
    </ul>
</article> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:28:29.157

正如您在问题中提到的，您正在`buttons_mp3jpause`动态分配类，因此您需要在页面加载时将处理程序附加到 DOM 中存在的元素，并使用 jQuery 将其委托给动态类[`.on()`](http://api.jquery.com/on/#direct-and-delegated-events)：

```
$('.song').on('click', '.buttons_mp3jpause', function() {
    $(this).closest('li.song').addClass('playing');
}); 
```

### 回应第一条评论：

只需`playing`从所有其他`song`元素中删除该类（以下假设您的所有`song`元素都是`siblings`！）：

`.addClass('playing').siblings('li.song').removeClass('playing');`

### 回应您的最后评论：

在这种情况下，最简单的方法是简单地`playing`从所有`song`元素中删除该类，然后将其添加到相关元素中：

```
$('li.song').removeClass('playing');
$(this).closest('li.song').addClass('playing'); 
```

### 完整示例：

```
$('.song').on('click', '.buttons_mp3jpause', function() {
    $('li.song').removeClass('playing');
    $(this).closest('li.song').addClass('playing');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:20:50.030

```
$(".buttons_mp3jpause").parent().parent().parent().addClass("playing"); 
```

如果你想瞄准父母。

```
$(".buttons_mp3jpause").closest("li.song").addClass("playing"); 
```

或者你可以使用最接近的找到最接近的 li 与 class song

# iphone - 视网膜在我的开发者 iphone 中工作吗？

> ID：15832542
> 
> 赞同：0
> 
> 时间：2013-04-05T11:17:55.320
> 
> 标签：iphone, ios, uiimageview, uiimage

我正在 iPhone5 中测试我的应用程序。

我复制了一个名为 image1.png 和 image1@2x.png 的图像，并在 iPhone5 中尝试了它，在我的代码的某些部分：

```
UIImage *myImage = [UIImage imageNamed:@"image1.png"] ;

CGFloat imageWidth = myImage.size.width;
CGFloat imageHeight = myImage.size.height;

  NSLog(@"image %f %f", imageWidth,imageHeight);

CGRect screenBound = [[UIScreen mainScreen] bounds];
CGSize screenSize = screenBound.size;
CGFloat screenWidth = screenSize.width;
CGFloat screenHeight = screenSize.height;

NSLog(@"screen %f %f", screenWidth, screenHeight); 
```

在 iphone 中运行时，在控制台中我看到：

```
2013-04-05 13:13:48.386 Vallabici[2413:907] image 320.000000 57.000000
2013-04-05 13:13:48.389 Vallabici[2413:907] screen 320.000000 568.000000 
```

因为它使用的是普通屏幕而不是视网膜。

怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:20:34.070

视网膜设备上的图像大小不应该改变，只是比例。要获取图像的比例，请添加以下日志：

```
 NSLog(@"scale %f", myImage.scale); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T11:20:45.753

`bounds`返回以点为单位的屏幕大小，而不是像素

请参阅[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UIScreen_Class/Reference/UIScreen.html#//apple_ref/occ/instp/UIScreen/bounds)。

也是如此`size`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T11:25:05.903

屏幕始终以像素为单位

和视网膜像素总是=非视网膜像素

通过代码，您将始终获得 230x480 的屏幕像素（在 iPhone < 5 上）

不同之处在于图像的渲染方式：在视网膜显示器上，它们以双倍分辨率渲染

这就像打印机设备：您可以将小图像打印到填充它的 A4 纸上，然后打印更大的图像......

打印到纸上的图像始终具有相同的度量（以英寸或厘米为单位），但结果的质量会发生变化

# configuration - 如何在 Zend Framework 2 应用程序的模块的 getConfig() 中使用 global.php/local.php 配置？

> ID：15832546
> 
> 赞同：2
> 
> 时间：2013-04-05T11:18:02.737
> 
> 标签：configuration, zend-framework2, config, configuration-files

在 ZF2 应用程序中，我有一些配置，即： 1\. 需要根据环境而有所不同；2\. 特定于具体模块。我正在像[这里](https://stackoverflow.com/a/15825220/2019043)描述的那样使用它：

**global.php & local.php**

```
return array(
    ...
    'modules' => array(
        'Cache' => array(
            'ttl' => 1, // 1 second
        )
    )
    ...
); 
```

**模块类**

```
Module {
    ...
    public function getServiceConfig() {
        try {
            return array (
                'factories' => array(
                    'Zend\Cache\Adapter\MemcachedOptions' => function ($serviceManager) {
                        return new MemcachedOptions(array(
                            'ttl'           => $this->getConfig()['modules']['Cache']['ttl'],
                            ...
                        ));
                    },
                    ...
                )
            );
        }
        ...
    }
    ...
} 
```

它工作正常，但我相信，模块特定设置应该通过模块中的一个中心位置访问——类的`getConfig()`方法`Module`。像这样：

```
class Module {

    public function getConfig() {
        $moduleConfig = include __DIR__ . '/config/module.config.php';
        $application = $this->getApplicationSomehow(); // <-- how?
        $applicationModuleConfig = $application->getConfig()['modules'][__NAMESPACE__];
        $config = array_merge($moduleConfig, $applicationModuleConfig);
        return $config;
    }
    ...
    public function getServiceConfig() {
        try {
            return array (
                'factories' => array(
                    'Zend\Cache\Adapter\MemcachedOptions' => function ($serviceManager) {
                        return new MemcachedOptions(array(
                            'ttl'            => $serviceManager->get('Config')['modules']['Cache']['ttl'],
                            ...
                        ));
                    },
                    ...
                )
            );
        }
        ...
    }
    ...
} 
```

问题是，我不明白如何访问模块中的 global.php/local.php 配置`getConfig()`。我该怎么做？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-05T11:43:21.583

每个加载的模块的每个配置都将合并到一个配置中。即这将是：

```
$serviceManager->get('config'); 
```

背后的原因`(global|local).config.php`仅仅是为了使用目的。应始终**部署**全局配置文件。然而，本地配置文件只能部署为可分发的别名`local.config.php.dist`。

Distributionals 不会被加载，无论它们在哪里。然而 ZF2 的常见概念是将可分发文件复制到`/config/autoload`ZF2 应用程序的 - 目录中并将它们重命名为`local.config.php`

**一个例子：**

```
// YourModule/config/module.config.php
return array(
    'key' => 1337
);

// YourModule/config/local.yourmodule.php.dist
return array(
    'key' => 7331
); 
```

现在，当您发布/部署您的应用程序时，只会`module.config.php`使用。如果有人想更改您的模块的配置，他们**永远不会**碰`module.config.php`，因为当您的模块更新时，此文件会不断被覆盖。

但是人们可以做的是复制：

```
YourModule/config/local.yourmodule.php.dist
to
/config/autoload/local.yourmodule.php 
```

并更改此本地配置中的配置值。

**要了解：**

*   您应该始终尽可能为 LIVE-Scenario 配置您的模块。
*   如果您有特定于环境的需求，请使用 local-config 覆盖此配置
*   本地配置永远不会自动部署，这是一项需要从环境本身内部完成的手动任务

希望这更清楚一点

**最终：**

*   为实时场景配置您的模块
*   在您的开发机器上创建一个并用它的开发价值`/config/autoload/mymodule.local.php`覆盖您`ttl`

**加载顺序：**

最后一个我完全忘记的有趣部分是配置文件的加载顺序。由于所有文件都已合并，因此请务必注意！

*   首先加载的是`/config/application.config.php`
*   第二个加载将是每个模块`/modules/{module}/config/module.config.php`*
*   最后但并非最不重要的一点是，将加载可自动加载的文件`/config/autoload/{filename}.php`

**asterix**实际上**不是** `module.config.php`被调用，而是`Module`-classes 配置函数。主要是这些：

*   `getConfig()`
*   `getServiceConfig()`
*   `getViewHelperConfig()`
*   最终一切都在[`Zend\ModuleManager\Feature\{feature}ProviderInterface`](https://github.com/zendframework/zf2/tree/master/library/Zend/ModuleManager/Feature)

如果我[对这部分的`ConfigListener`](https://github.com/zendframework/zf2/blob/master/library/Zend/ModuleManager/Listener/ConfigListener.php#L119-L166)理解正确，那么`getConfig()`将首先被调用，所有的专业`{feature}ProviderInterfaces`都会覆盖 的数据`getConfig()`，但不要认为这是理所当然的，它需要检查！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:02:49.263

*您不应该访问`Module#getConfig()`. 如果您依赖其他配置，则只能用于服务目的。因此，您将依赖`Module#getServiceConfig()`并在您可以访问`ServiceManager`和访问您的配置的工厂内部使用`$serviceManager->get('config');`.* （见山姆的[评论](https://stackoverflow.com/questions/15832546/how-to-use-the-global-php-local-php-configs-in-the-getconfig-of-a-module-in-a/15833073#comment22632878_15833073)）

默认情况下，配置的加载顺序是：

1.  `/config/application.config.php`，即初始配置文件；不适用于模块配置；这是要加载的配置文件的文件名模式（`'config_glob_paths' => array('config/autoload/{,*.}{global,local}.php')`）。
2.  `{ModuleNamespace}\Module#getConfig()`（例如`Cache\Module#getConfig()`），按照惯例应该加载它的`/module/{ModuleNamespace}/config/module.config.php`；
3.  `/config/autoload/global.php`，不应包含任何特定于模块的配置（见下文）；
4.  `/config/autoload/local.php`，包含*特定于环境的*设置也不应包含任何特定于模块的配置（见下文）；它不应该版本化/部署；
5.  `/config/autoload/{ModuleNamespaceLowerCased}.local.php`（例如`cache.local.php`），仅包含*模块和环境特定*设置，不应进行版本控制/；

对于`Cache`上面的模块，可以有以下配置文件：

*   `/module/Cache/config/module.config.php`-- 一套完整的模块配置；由加载`Cache\Module#getConfig()`
*   `/module/Cache/config/cache.local.php.dist`-- 一个例子`/config/autoload/cache.local.php`
*   `/config/autoload/cache.local.php`-- 环境特定的模块配置

`ttl`可以从可以访问服务定位器的任何地方访问该设置。例如在工厂方法中`Cache\Module#getServiceConfig()`

```
class Module {

    public function getConfig() {
        $moduleConfig = include __DIR__ . '/config/module.config.php';
        $application = $this->getApplicationSomehow(); // <-- how?
        $applicationModuleConfig = $application->getConfig()['modules'][__NAMESPACE__];
        $config = array_merge($moduleConfig, $applicationModuleConfig);
        return $config;
    }
    ...
    public function getServiceConfig() {
        try {
            return array (
                'factories' => array(
                    'Zend\Cache\Adapter\MemcachedOptions' => function ($serviceManager) {
                        return new MemcachedOptions(array(
                            'ttl'            => $serviceManager->get('Config')['ttl'],
                            ...
                        ));
                    },
                    ...
                )
            );
        }
        ...
    }
    ...
} 
```

有关如何在 ZF2 中管理配置的更多信息，请参阅 Sam 的[回答](https://stackoverflow.com/a/15833073/2019043)和[博客文章](http://samminds.com/2013/04/understanding-zf2-configuration/)。

# java - CloudFoundry 中一般使用哪些电子邮件服务？

> ID：15832548
> 
> 赞同：1
> 
> 时间：2013-04-05T11:18:03.833
> 
> 标签：java, vmware, cloud-foundry

我正在尝试在 cloudfoundry 中为我的项目实施电子邮件服务。有没有人对cloudfoundry中使用的电子邮件服务以及如何使用有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:20:42.830

Cloud Foundry 本身目前不支持电子邮件。我建议使用像[SendGrid](http://sendgrid.com/)这样的邮件服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T22:55:43.390

您可以通过 AlphaMail 在 CloudFoundry 中发送电子邮件。请参阅我的博文：[http ://www.jiwhiz.com/post/2012/11/Send_Email_Through_AlphaMail_Inside_CloudFoundry](http://www.jiwhiz.com/post/2012/11/Send_Email_Through_AlphaMail_Inside_CloudFoundry)

# java - 使用带有小程序绘制方法的 Swing 组件

> ID：15832552
> 
> 赞同：1
> 
> 时间：2013-04-05T11:18:18.073
> 
> 标签：java, swing, applet

我有一个功能正常的 Java 小程序，它可以嵌入到网页中，现在希望添加一些摆动组件以实现附加功能。但是，每当我添加一个像 JLabel 这样的组件时，它根本不会出现在视口/画布上，除非我删除我的整个绘制方法。后一个选项允许我添加摆动组件，但自然不能渲染任何形状。它似乎类似于异或（XOR），一个但不是另一个。

无论如何，本机 Java 小程序中是否有添加摆动组件并仍然维护paint(Graphics g) 方法。请注意，我继承自 Applet 而不是 JApplet。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:26:34.103

如果您在小程序中覆盖绘制方法，那么没有简单的方法。

你可以做什么而不是在小程序中覆盖绘画。

1.  改为扩展 JComponent 并在那里进行自定义绘图。
2.  创建 JPanel，其中包含所有需要的 swing 组件，包括前面步骤中的组件。
3.  将该面板添加到使用默认绘制方法的小程序中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T11:22:13.093

我建议您将组件添加到不覆盖的单独面板中`paint`。通过覆盖`paint`，您正在自定义组件的绘制方式，因此布局管理器和它必须管理的组件不计算在内，只有`paint`您编写的实现决定了内容的呈现方式。

因此，您的小程序将包含一个带有组件的面板和一个执行自定义绘画的面板。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T16:32:52.523

我能够通过调用来可视化小程序画布上的组件

```
paintComponents(g); 
```

因此，组件在实际的paint(Graphics g) 方法完成其时期之后被绘制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T13:30:42.097

在您的绘制方法结束时，调用`super.paint(g)`.

# ruby - 没有框架的 ruby 上的 mongoid 配置

> ID：15832556
> 
> 赞同：2
> 
> 时间：2013-04-05T11:18:33.737
> 
> 标签：ruby, mongodb, mongoid, minitest

我尝试编写我的应用程序的业务逻辑。这都是 ruby​​ 类。没有数据库，也没有像 Rails、Sinatra 这样的 UI 框架。我只有一个关于业务逻辑的 Gem_file，Gem_file 只包含“mini_test”gem。我使用 mini_test 来测试业务逻辑。现在，我需要在系统中添加一个数据库。我怎样才能做到这一点？mongoid 配置在 Rails 上的 application.file 中进行。但是，我不使用 Rails 或任何其他框架。反正有没有像Rails，Sinatra这样的框架来配置mongoid。我希望我能解释我的问题。另外，我在下面添加了我的代码：

**这是我的背景-**

```
class HeadTeacherDefineAcademicYearContext
  attr_reader :person, :academicyear

  def initialize(person, academicyear)
    @person, @academicyear = person, academicyear
    @person.extend HeadTeacher
  end

  def call
   @person.define_academic_year @academicyear
  end
end 
```

**这是我的角色模块**

```
module HeadTeacher
  def define_academic_year(academicyear)
     #i write db save process here using any database
  end
end 
```

**我的模特班**

```
class AcademicYear
  attr_accessor :year
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:32:09.753

您必须`gem 'mongoid'`在 Gemfile 中包含并安装它。之后，您可以在需要的地方 require 并初始化 Mongoid：

```
require 'mongoid'
Mongoid.load!("mongoid.yml", :development) 
```

它需要一个`mongoid.yml`带有配置的文件。示例：

```
development:
   sessions:
     default:
      database: myapp_development
      hosts:
        - localhost:27017 
```

当然，您可以使用其他上下文而不是`:development`，也许可以通过环境变量对其进行分配。现在，添加`Mongoid::Document`到您的模型中：

```
class AcademicYear
  include Mongoid::Document

  field :year, type: Integer
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:35:10.513

添加`gem "mongoid", "~> 3.0.0"`到您的 Gemfile 然后将配置 yaml 文件放入您的项目，内容如下：

```
development:
  sessions: 
    default:
      database: mongoid
      hosts:
        - localhost:27017 
```

然后`Mongoid.load!("path/to/your/mongoid.yml", :development)`在您的应用程序中使用。

在您想要将对象保存到 DB 的每个类中，您都必须这样做`include Mongoid::Document`。

所以你的例子变成：

```
class HeadTeacherDefineAcademicYearContext
  attr_reader :person, :academicyear
  field :person, type: String
  field :academicyear, type: Date
  ...
end 
```

您最好[检查 mongoid 文档](http://mongoid.org/en/mongoid/docs/installation.html "检查 mongoid 文档")以了解下一步要做的事情。

# excel - VBA Excel将数据打印到有关范围数据的即时窗口中以测试理解

> ID：15832558
> 
> 赞同：1
> 
> 时间：2013-04-05T11:18:43.113
> 
> 标签：excel, output, range, vba

我想做一系列小测试，帮助我理解以正确方式生成数据的小企业问题。

我的第一种方法是为自己证明我可以在 VBE 的即时窗口中打印（字符串数据类型）ID 列表（使用 .value 方法），这样我就可以看到该列表，然后我可以构建另一个测试.

我目前的 VBA 代码显示了这一点，我将“CustTest”定义为表 1 中 A1:A100 的命名范围

```
Sub TestRanges()

Dim Custrng As Range

For Each Custrng In Range("CustTest")
    Print Custrng.Value
Next
End Sub 
```

我也想过这个

```
Sub TestRanges()

Dim Custrng As Range

For Each Custrng In Range("CustTest")
    With Custrng
       Print  .Value
    End With
Next
End Sub 
```

这出现了一个错误，我不确定发生了什么，编译错误：- 没有合适的对象，方法无效。

有什么建议么？

谢谢，彼得。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T11:23:12.147

使用：`Debug.Print .Value`代替`Print .Value`

**附加信息：** `Print`仅适用于立即窗口。但是，我们可以在那里使用`?`(问号) 而不是`Print`

# android - 如何在 Android 中使用 openssl？

> ID：15832561
> 
> 赞同：0
> 
> 时间：2013-04-05T11:18:51.900
> 
> 标签：android, security, ssl, android-ndk, openssl

我已经`so`从这个项目中构建了 2 个文件（[https://github.com/eighthave/openssl-android](https://github.com/eighthave/openssl-android)），现在我有了`libcrypot.so`和`libssl.so`. **如何在我的 android 应用程序中使用这些库？**. 我将`include/openssl`文件夹添加到我的项目中，但标题无法编译，某些类型无法识别。

# excel - Excel 崩溃，VBA 用户窗体无法保存

> ID：15832576
> 
> 赞同：0
> 
> 时间：2013-04-05T11:19:25.243
> 
> 标签：excel, vba, crash, autosave

我在 Excel 中有一个用户表单，用户在其中输入信息，然后点击“添加库存”按钮。按下此按钮后，信息将输入到电子表格中，然后使用“ActiveWorkbook.Save”保存电子表格。

问题是工作计算机很旧，Excel 有崩溃的趋势。当电子表格被自动恢复时，添加库存功能不再起作用，它会因代码 75 错误而崩溃。在这种情况下，ActiveWorkbook.Save 似乎不起作用，直到用户手动点击 CTRL-S。老板坚持认为我们的用户没有足够的计算机知识来管理这个，所以我需要以某种方式检查 Excel 是否已经崩溃，如果是这样，在他们开始使用之前自动保存文件。

我将如何检查我们是否处于自动恢复状态，然后保存它（没有 ActiveWorkbook.Save），以便用户可以继续使用表单而不会出现问题？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:14:45.373

我找不到直接的方法来检查这个，但这里有几个 kludgy 选项。似乎如果有两种状态，自动恢复的工作簿可以处于的工作簿：用户上次保存或自动保存。标题反映了它所处的状态。此函数将检查标题中是否存在该短语。

```
Public Function IsInAutoRecoverMode(wb As Workbook)

    Dim wn As Window

    Set wn = wb.Windows(1)

    IsInAutoRecoverMode = _
        wn.Caption Like "*[Autosaved]?" Or _
        wn.Caption Like "*[Last saved by user]?"

End Function 
```

我不确定是否有更多的州在非英语环境中肯定会失败，因此请谨慎使用。

用户上次保存时，Workbook.Path 属性是文件的存储位置。自动保存时，Workbook.Path 属性等于 Application.AutoRecover.Path。好吧，他们在我的机器上是平等的。这可能只是一个巧合，但我对此表示怀疑。

由于用户上次保存的路径没有区别，因此您无法使用它来确定您是否处于自动恢复模式。但是，如果用户打开 Autosaved 工作簿，您可能不想只保存，而是希望在正确的位置另存为。您可能需要同时使用这两种技术来获得所需的解决方案。

确保你告诉你的老板这些变通办法，因为你非常勤奋和有创造力，但它们没有记录在案，并且随时可能失败。至少，我不会在不了解它们是基于一些猜测的情况下使用它们。让我们知道你最终会得到什么。

# sql - 使用 %%% 的 SQL 通配符

> ID：15832579
> 
> 赞同：0
> 
> 时间：2013-04-05T11:19:41.793
> 
> 标签：sql, wildcard

我想知道使用此查询可能无法预见到哪些问题：

```
SELECT * 
FROM tanswer 
WHERE CourseID LIKE '%%%' AND Q39 LIKE 'p' AND Q42 LIKE 'a' AND Q43 LIKE 'a' 
```

特别是使用'%%%'。

原因是，我有一个下拉列表会发送一个“%”，在 sql 中我将它与另外两个 % 一起括起来以搜索一组课程，这个查询让 courseID 搜索所有课程。

返回的记录集似乎工作正常，但我不确定如果一起使用三个 %%% 可能看不到任何东西。这是我偶然发现的通配符的特殊用途吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:25:32.460

这些是等价的：

```
 CourseID LIKE '%%%'
 CourseID LIKE '%%'
 CourseID LIKE '%' 
```

这就是为什么您的查询按预期运行的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:23:21.660

你需要使用！逃避内心`%`：即`%!%%`

看[这里](http://www.techonthenet.com/sql/like.php)

# iphone - 将 IOS 原生对象传回 unity3d

> ID：15832580
> 
> 赞同：1
> 
> 时间：2013-04-05T11:19:44.433
> 
> 标签：iphone, ios, plugins, unity3d

我用几个简单的方法实现了 IOS 插件，以使我的统一应用程序与本机静态库交互。

我面临的问题是将原生 UI 元素（对象）传递回统一。

Fe原生SDK有创建徽章（UIView）的方法，另一方面我有统一的按钮（它可以是GUI元素或一些3d对象，无论如何）

我通过我的插件从统一访问此方法，例如：

```
[DllImport("__Internal")]    
private static extern void XcodePlugin_GetBadgeView(); 
```

和以下：

```
void XcodePlugin_GetBadgeView()
{
    // Generate native UIView 
    UIView *badge = [Badge badge];

    ???? Return UIView badge instance to unity (hm)?!
} 
```

所以我需要类似的东西：

```
[someViewOrObject addSubView:badge]; 
```

但内部统一。

我知道有能力将消息发送回统一：

```
UnitySendMessage( "UnityCSharpClassName" , "UnityMethod", "WhateverValueToSendToUnity"); 
```

但 WhatValueToSendToUnity 应该是 UTF8 字符串。

综上所述：

只有一个想法我必须将坐标从统一传递到本机插件，然后将徽章添加到这些坐标（不确定这是最好的解决方案）：

```
[DllImport("__Internal")]    
private static extern void XcodePlugin_AddBadgeViewToCoordinates(x,y); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:35:01.490

如果只是为了徽章坐标，你的想法似乎很好。

如果您想从 iOS 中将其他内容导入 Unity，我认为没有其他选择。我能想到的唯一其他方法是**将数据保存在文件中**（例如，在 NSTemporaryDirectory 中），然后使用 UnitySendMessage 将文件名作为 UTF8String 传回。我之前使用过这种技术（将图像和 JSON 文件传递​​给 Unity）。iOS 会自动清理该目录中的文件。

# javascript - 如何限制用户在可编辑的 div 或 iframe 中输入超过某些字符

> ID：15832581
> 
> 赞同：0
> 
> 时间：2013-04-05T11:19:45.827
> 
> 标签：javascript, jquery, html, contenteditable

我有一个可编辑的 div 和 iFrame。我要求用户每行不能输入超过 100 个字符。用户可以输入无限多行，所有行最多 100 个字符。

此外，如果该行少于 100 个字符，用户还可以使用箭头键返回任何行并输入更多文本。

如何执行此操作？

编辑：这需要像用户键入时实时一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:22:35.760

```
$('#mydivid').keypress(function(e){
    if($(this).html().length > 20)
        e.preventDefault();
}) 
```

[小提琴](http://jsfiddle.net/JRrme/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:23:58.720

您可以检查 jquery`keyup`事件。

```
$('DIV ID').keyup(function(){
  data = $.trim($('DIV ID')).html().length; 

  if(data > 100) // or add condition as per your requirement
  {
  }
  else
 {
   alert('Your message')
 }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T11:26:25.357

```
$(document).ready(function(){
var max_length = 100;
$("#div-editable").keypress(function(){
    var return_state = true;
    $(this).find("div").each(function(){
        if($(this).text().length >= max_length)
        {
            return_state = false;
            //break;
        }
    });
    return return_state;
}); 
```

});

只需根据您的需要更改 max_length 即可。

如果您想在文本的开头和结尾允许间距，也可以使用 Trim。

你可以在[jsFiddle上查看](http://jsfiddle.net/jYLXX/1/)

# asp.net - 隐藏或删除字段中包含特定文本的整个 GridView 行

> ID：15832584
> 
> 赞同：0
> 
> 时间：2013-04-05T11:19:55.273
> 
> 标签：asp.net, vb.net, visual-studio

这是我在这里的第一篇文章。

我有一个简单的 ASP.NET 查询字符串驱动页面，其 GridView 列出了特定文件夹的内容（基于查询字符串）。其中一些文件夹包含 PDF，这意味着它在我的 Windows 文件服务器上创建了一个`thumbs.db`文件（包含文件夹视图的缩略图），不幸的是，该文件列在 GridView 中，看起来很不雅观，有什么方法可以更改 GridView 的代码以删除或隐藏列中包含`Thumbs.db`的`Name`行。

**后面的代码（VB.NET）（由于有很多文件夹而缩短）**：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles     Me.Load

    Dim Certs As New IO.DirectoryInfo("D:\PROCEDURES\Certs\")

Dim q As String
    q = Request.QueryString("type")

If q = "Certs" Then
        lbltype.Text = "Certs"
        GridView1.DataSource = Certs.GetFiles()
        GridView1.DataBind()
End If
End Sub 
```

**ASPX 代码**：

```
asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" CellPadding="4"
    CssClass="GridStyle" ForeColor="#333333" GridLines="None" Width="100%">
    <Columns>
        <asp:TemplateField HeaderText="Document Name" SortExpression="Name">
            <ItemTemplate>
                <asp:HyperLink ID="HyperLink1" NavigateUrl='<%#"http://intranet.(hidden).com/sqe/data/" + Request.QueryString("type") + "/" + Eval("Name")%>' Target="_blank" runat="server"><%#Eval("Name")%></asp:HyperLink>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField DataField="Extension" HeaderText="Extension" SortExpression="Name" />
        <asp:BoundField DataField="Length" HeaderText="File Size" SortExpression="Name" />
        <asp:BoundField DataField="LastAccessTime" HeaderText="Last Modified" SortExpression="Name" />
    </Columns> 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:39:17.443

你可以在 Gridview_rowbound 事件中做到这一点

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
     HyperLink hl = (HyperLink) e.row.FindControl("HyperLink1");
       if (hl.Text == "Thumb.db")
       {
       e.Row.Visible=false;
       }
    }
} 
```

移植到vb对你来说很容易吗？

# php - ajax/load 请求后 cookie 不可见

> ID：15832587
> 
> 赞同：1
> 
> 时间：2013-04-05T11:20:13.593
> 
> 标签：php, ajax, cookies, cross-domain

我有以下问题：

在一页上，我使用 php 显示一些文章并从数据库中获取它们。文章有两种显示类型：每日和每小时。显示类型存储在 cookie 中。

问题是，每当我使用无限滚动和 ajax 加载其他文章时，cookie 都不会被使用。如果我回显它们，我会收到一个空字符串。此外，当从每小时视图更改为每日视图时，也会出现同样的问题。

为了添加额外的帖子，我使用 jquery post 并加载不同的显示视图，我使用 jquery.load()

我知道有一个跨源策略，但我通过添加 htaccess 来修复它

```
Header add Access-Control-Allow-Origin "*"
Header add Access-Control-Allow-Headers "origin, x-requested-with, content-type"
Header add Access-Control-Allow-Methods "PUT, GET, POST, DELETE, OPTIONS" 
```

编辑：我也在另一台可以正常工作的服务器上安装了该网站。我注意到在良好的服务器上，ajax 请求也在发送“设置”cookie。在坏的服务器上，只有“PHPSESSID”cookie 正在发送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:59:39.183

好的，看来问题是 www 请求是从 www.mydomain.com 到 mydomain.com 我通过在 url 中添加完整路径来修复它

```
$.ajax({
   url: "www.mydomain.com/ajax.php",
   success: function() ...
}); 
```

或者

```
 SITE_URL = "http://www.mydomain.com";
 $('#wrapper').load(SITE_URL 'index.php?lang='+langSite+' #wrapper', function(data){ ... 
```

# c++ - DLL ExitInstance 上的线程消失了

> ID：15832588
> 
> 赞同：1
> 
> 时间：2013-04-05T11:20:17.153
> 
> 标签：c++, windows

我有一个带有函数 InitInstance 和 ExitInstance 的 Windows DLL。DLL 创建一些线程，使用 _beginthreadex 的工作线程和使用消息队列的线程，从 CWinThread (MFC) 派生。

DLL 应该可供任何应用程序使用。

我为此 DLL 编写了一个小型主机应用程序进行测试，它工作正常，除非我关闭此主机应用程序而之前没有调用 FreeLibrary。在这种情况下，ExitInstance 也被调用，但所有线程都消失了，这是非常不寻常的，并导致死锁，因为一些例程等待一个不再存在的线程完成 - 因为它已完成或被杀死。我需要这样做（跳过调用 FreeLibrary）以模拟其他应用程序使用此 DLL 时可能发生的情况。

ExitInstance 被调用，但所有通常仍在运行的线程都消失了 - 很可能是因为如果您之前不调用 FreeLibrary，从主机进程卸载 DLL 时会以某种方式处理。

它们默默地消失，例如，如果一个线程只是在循环中实现了一个带有 WaitForSingleObject 的循环，则该线程不会正常完成。

```
thread()
{
    while(running == true)
    {
        WaitForSingleObject(...);
    }
    threadfinished=true; /// 1
} 
```

如果在关闭应用程序之前调用 FreeLibrary，则调用代码部分 1。当关闭应用程序而不调用 FreeLibrary 时，代码部分 1 永远不会被调用，但循环也不再运行，因为线程被删除。

我应该如何处理这种情况？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:03:46.913

的文档`CWinThread::ExitInstance`非常清楚：“不要从任何地方调用这个成员函数，而是在`Run`成员函数内。” （即`CWinThread::Run`线程本身）。

显然，这意味着 Windows 不会`ExitInstance`为您打电话。主机应用程序也不是，因为它不知道您的线程。

所谓的是*，*`DllMain`但只有一次和有论据`DLL_PROCESS_DETACH`。你不会得到`DLL_THREAD_DETACH`，因为这发生*在*你的线程干净地退出（即`ExitInstance`或从返回`CWinThread::Run`）之后。

顺便说一下，请考虑在您的 DLL 被卸载后您的线程可以运行哪些代码。它不能是您的函数或 MFC，因为这些函数不再存在。线程将因访问冲突而崩溃，因为它的指令指针现在指向未分配的内存。

# asp.net - 如何使面板大小固定在 modalpopupextender 内

> ID：15832589
> 
> 赞同：0
> 
> 时间：2013-04-05T11:20:23.173
> 
> 标签：asp.net, ajax

您好，我在 modalpopupextender 面板中有两个表格。无论两个表格在模态弹出窗口中是否可见，我都希望固定面板的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:27:28.697

你可以这样做

```
<asp:Panel ID="pnlAddEdit" runat="server" CssClass="modalPopup" style = "display:none;min-width:20px;min-height:20px">
</asp:Panel> 
```

# ios - “_OBJC_CLASS_$_CAEAGLLayer”，引用自：DBSignatureView.o 中的 objc-class-ref” 未解决

> ID：15832602
> 
> 赞同：1
> 
> 时间：2013-04-05T11:20:50.063
> 
> 标签：ios, objective-c, xcode, ipad

我有一个应用程序，在其中一个模块中，它将导入两个库。1) OpenGLES.framework 2) QuartzCore.framework。

以作图为目的。但我有一个单独的绘图应用程序，效果很好。当我将它添加到我的应用程序时，它会给出“构建失败”。

我已经通过许多链接进行纠正，例如`http://stackoverflow.com/questions/7953168/symbols-not-found-for-architecture-armv6/10415850#10415850`

```
http://stackoverflow.com/questions/6251111/classlayerclass-wont-work 
```

甚至删除了库，我再次添加了这些链接中所述的配置。但我仍然遇到同样的错误。

这是我的错误页面。

```
Ld /Users/kumaralakshmanna/Library/Developer/Xcode/DerivedData/Checking_del-bseuzbpwlbzpxvdzdamarjieapuz/Build/Products/Debug-iphonesimulator/Checking_del.app/Checking_del normal i386
    cd /Users/kumaralakshmanna/Documents/IOS_Worksapace/Checking_del
    setenv IPHONEOS_DEPLOYMENT_TARGET 6.1
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk -L/Users/kumaralakshmanna/Library/Developer/Xcode/DerivedData/Checking_del-bseuzbpwlbzpxvdzdamarjieapuz/Build/Products/Debug-iphonesimulator -F/Users/kumaralakshmanna/Library/Developer/Xcode/DerivedData/Checking_del-bseuzbpwlbzpxvdzdamarjieapuz/Build/Products/Debug-iphonesimulator -F/Users/kumaralakshmanna/Documents/IOS_Worksapace/Checking_del -filelist /Users/kumaralakshmanna/Library/Developer/Xcode/DerivedData/Checking_del-bseuzbpwlbzpxvdzdamarjieapuz/Build/Intermediates/Checking_del.build/Debug-iphonesimulator/Checking_del.build/Objects-normal/i386/Checking_del.LinkFileList -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=6.1 -framework UIKit -framework Foundation -framework CoreGraphics -framework OpenGLES -framework QuartzCore -o /Users/kumaralakshmanna/Library/Developer/Xcode/DerivedData/Checking_del-bseuzbpwlbzpxvdzdamarjieapuz/Build/Products/Debug-iphonesimulator/Checking_del.app/Checking_del

ld: warning: ignoring file /Users/kumaralakshmanna/Documents/IOS_Worksapace/Checking_del/OpenGLES.framework/OpenGLES, missing required architecture i386 in file /Users/kumaralakshmanna/Documents/IOS_Worksapace/Checking_del/OpenGLES.framework/OpenGLES (2 slices)
ld: warning: ignoring file /Users/kumaralakshmanna/Documents/IOS_Worksapace/Checking_del/QuartzCore.framework/QuartzCore, missing required architecture i386 in file /Users/kumaralakshmanna/Documents/IOS_Worksapace/Checking_del/QuartzCore.framework/QuartzCore (2 slices)
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_CAEAGLLayer", referenced from:
      objc-class-ref in DBSignatureView.o
  "_OBJC_CLASS_$_EAGLContext", referenced from:
      objc-class-ref in DBSignatureView.o
  "_glBindFramebufferOES", referenced from:
      -[DBSignatureView createFramebuffer] in DBSignatureView.o
      -[DBSignatureView erase] in DBSignatureView.o
      -[DBSignatureView renderLineFromPoint:toPoint:] in DBSignatureView.o
  "_glBindRenderbufferOES", referenced from:
      -[DBSignatureView createFramebuffer] in DBSignatureView.o
      -[DBSignatureView erase] in DBSignatureView.o
      -[DBSignatureView renderLineFromPoint:toPoint:] in DBSignatureView.o
  "_glBindTexture", referenced from:
      -[DBSignatureView commonInit] in DBSignatureView.o
  "_glBlendFunc", referenced from:
      -[DBSignatureView commonInit] in DBSignatureView.o
  "_glCheckFramebufferStatusOES", referenced from:
      -[DBSignatureView createFramebuffer] in DBSignatureView.o
  "_glClear", referenced from:
      -[DBSignatureView erase] in DBSignatureView.o
  "_glClearColor", referenced from:
      -[DBSignatureView erase] in DBSignatureView.o
  "_glColor4f", referenced from:
      -[DBSignatureView setBrushColorWithRed:green:blue:] in DBSignatureView.o
  "_glDeleteFramebuffersOES", referenced from:
      -[DBSignatureView destroyFramebuffer] in DBSignatureView.o
  "_glDeleteRenderbuffersOES", referenced from:
      -[DBSignatureView destroyFramebuffer] in DBSignatureView.o
  "_glDeleteTextures", referenced from:
      -[DBSignatureView dealloc] in DBSignatureView.o
  "_glDisable", referenced from:
      -[DBSignatureView commonInit] in DBSignatureView.o
  "_glDrawArrays", referenced from:
      -[DBSignatureView renderLineFromPoint:toPoint:] in DBSignatureView.o
  "_glEnable", referenced from:
      -[DBSignatureView commonInit] in DBSignatureView.o
  "_glEnableClientState", referenced from:
      -[DBSignatureView commonInit] in DBSignatureView.o
  "_glFramebufferRenderbufferOES", referenced from:
      -[DBSignatureView createFramebuffer] in DBSignatureView.o
  "_glGenFramebuffersOES", referenced from:
      -[DBSignatureView createFramebuffer] in DBSignatureView.o
  "_glGenRenderbuffersOES", referenced from:
      -[DBSignatureView createFramebuffer] in DBSignatureView.o
  "_glGenTextures", referenced from:
      -[DBSignatureView commonInit] in DBSignatureView.o
  "_glGetRenderbufferParameterivOES", referenced from:
      -[DBSignatureView createFramebuffer] in DBSignatureView.o
  "_glMatrixMode", referenced from:
      -[DBSignatureView commonInit] in DBSignatureView.o
  "_glOrthof", referenced from:
      -[DBSignatureView commonInit] in DBSignatureView.o
  "_glPointSize", referenced from:
      -[DBSignatureView commonInit] in DBSignatureView.o
  "_glReadPixels", referenced from:
      -[DBSignatureView upsideDownImageRepresenation] in DBSignatureView.o 
```

库的兼容性有什么问题......？请做需要

# sql - SQL; 全左、右、上、内、向后连接

> ID：15832616
> 
> 赞同：1
> 
> 时间：2013-04-05T11:21:24.123
> 
> 标签：sql, join

似乎无法理解这一点。我有三个与产品相关的表（库存、销售、采购订单），它们具有一个共同的字段，可以将它们全部连接在一起。我有第四张桌子，里面有所有的产品。产品在这些表（库存、销售额、采购订单）中可能有也可能没有信息，但在产品表中会有记录。

我需要以每个产品的一行结束，其中包含三个表之一（库存、销售和采购订单）中的信息。

下表的简化视图如下：

**产品表**、参考、说明

**库存表**，参考，Current_Stock

**销售表**,Ref, Qty_Sold

**POs 表**、参考、Qty_Outstanding

我需要以以下内容结束：

参考、描述、Current_Stock、Qty_Sold、Qty_Outstanding

谢谢

尼格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:39:18.187

也许，最简单和最直接的方法是将所有明细表左连接到`Product`表中，然后过滤掉*根本没有*匹配项的产品。

因此，这基本上是@Santhosh 的解决方案，只需稍加调整（强调）：

```
SELECT
  pr.Ref,
  pr.Description,
  st.Current_Stock,
  sa.Qty_Sold,
  po.Qty_Outstanding
FROM Product pr
LEFT JOIN Stock st ON st.Ref = pr.Ref
LEFT JOIN Sales sa ON sa.Ref = pr.Ref
LEFT JOIN POs   po ON po.Ref = pr.Ref
*WHERE st.Ref IS NOT NULL
   OR sa.Ref IS NOT NULL
   OR so.Ref IS NOT NULL*
; 
```

还有一个不太明显的替代方案：合并所有明细表，然后旋转明细数据。结果集将仅包含对至少具有一些详细信息的产品的引用。因此，您可以将结果集内部连接到`Product`以访问输出的产品描述。

如果你的 SQL 产品支持 PIVOT 子句，你可以这样做：

```
SELECT
  p.Ref,
  p.Description,
  s.Current_Stock,
  s.Qty_Sold,
  s.Qty_Outstanding
FROM (
  SELECT
    Ref,
    Current_Stock,
    Qty_Sold,
    Qty_Outstanding
  FROM (
    SELECT
      Ref,
      'Current_Stock' AS Attribute,
      Current_Stock   AS Value
    FROM Stock
    UNION ALL
    SELECT
      Ref,
      'Qty_Sold',
      Qty_Sold
    FROM Sales
    UNION ALL
    SELECT
      Ref,
      'Qty_Outstanding',
      Qty_Outstanding
    FROM POs
  ) d
  PIVOT (
    SUM(Value) FOR Attribute IN (
      Current_Stock,
      Qty_Sold,
      Qty_Outstanding
    )
  ) p
) s
INNER JOIN Product p ON p.Ref = s.Ref
;
```

还有一种更旧且更通用的旋转方法，您需要为此使用分组和条件聚合：

```
SELECT
  p.Ref,
  p.Description,
  SUM(CASE Attribute WHEN 'Current_Stock'   THEN d.Value END) AS Current_Stock,
  SUM(CASE Attribute WHEN 'Qty_Sold'        THEN d.Value END) AS Qty_Sold,
  SUM(CASE Attribute WHEN 'Qty_Outstanding' THEN d.Value END) AS Qty_Outstanding
FROM (
  SELECT
    Ref,
    'Current_Stock' AS Attribute,
    Current_Stock   AS Value
  FROM Stock
  UNION ALL
  SELECT
    Ref,
    'Qty_Sold',
    Qty_Sold
  FROM Sales
  UNION ALL
  SELECT
    Ref,
    'Qty_Outstanding',
    Qty_Outstanding
  FROM POs
) d
INNER JOIN Product p ON p.Ref = d.Ref
GROUP BY
  p.Ref,
  p.Description
;
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:26:02.243

```
SELECT P.REF, P.DESCRIPTION, S.CURRENT_STOCK, SALES.QTY_SL, POS.QTY_OUTSTANDING
FROM PRODUCTS P
LEFT JOIN STOCK S
ON S.REF = P.REF
LEFT JOIN SALES SALES
ON SALES.REF = P.REF
LEFT JOIN POS
ON POS.REF = P.REF 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T11:26:58.987

假设`REF`是*唯一的*，并且在所有表中都像*外键一样使用*

也许你可以试试

```
SELECT pt.REF, pt.DESCRIPTION, st.CURRENT_STOCK, sat.QTY_SOLD, pot.QTY_OUTSTANDING
FROM PRODUCTTABLE pt
INNER JOIN STOCKTABLE st
ON st.REF = pt.REF
INNER JOIN SALESTABLE sat
ON sat.REF = pt.REF
INNER JOIN POSTABLE pot
ON pot.REF = pt.REF 
```

我只是喜欢这个非常有用[的连接操作的图形摘要！](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

# c# - 关于c#中的线程

> ID：15832617
> 
> 赞同：2
> 
> 时间：2013-04-05T11:21:25.753
> 
> 标签：c#, multithreading

我有一个包含十种方法的按钮单击。在这里，我想在按钮单击或代码中的某些位置使用线程，这样我的 Windows 窗体应用程序就不会挂起。

这是我到目前为止所尝试的......！

```
 collectListOfPTags();

                REqDocCheck = new Thread(new ThreadStart(collectListOfPTags));

                REqDocCheck.IsBackground = true;

                REqDocCheck.Start();

                WaitHandle[] AWait = new WaitHandle[] { new AutoResetEvent(false) };
                while (REqDocCheck.IsAlive)
                {
                    WaitHandle.WaitAny(AWait, 50, false);
                    System.Windows.Forms.Application.DoEvents();
                } 
```

在该方法中，`collectionListOfPtags()`我得到一个异常，上面写着“一个组合框是从线程访问的，而不是它在其上创建的”

感谢您的耐心..任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:49:18.770

你需要的是一个代表！您只需创建一个委托并将其放入从线程函数访问 GUI 的函数中。

```
public delegate void DemoDelegate(); 
```

在您的代码中，

```
collectionListOfPtags()
{
    if ((this.InvokeRequired)) {
    this.Invoke(new DemoDelegate(collectionListOfPtags));
    return;
    }

     // Your Code HERE
} 
```

我希望这会奏效！祝你好运 ：-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:55:20.197

这看起来很适合该`BackgroundWorker`组件。

将您的`collectListOfPTags`方法拆分为 2 个方法 - 第一个方法收集和处理数据，第二个方法更新 UI 控件。

像这样的东西：

```
void OnClick( ... )
{
  var results = new List<string>();

  var bw = new BackgroundWorker();

  bw.DoWork += ( s, e ) => CollectData( results );
  bw.RunWorkerCompleted += ( s, e ) => UpdateUI( results );

  bw.RunWorkerAsync();
}

void CollectData( List<string> results )
{
  ... build strings and add them to the results list
}

void UpdateUI( List<string> results )
{
  ... update the ComboBox from the results
} 
```

将在线程池线程的后台`BackgroundWorker`运行`CollectData`，但将`UpdateUI`在 UI 线程上运行，以便您可以`ComboBox`正确访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:09:58.077

你应该看看线程池？线程池是线程的集合，可用于在后台执行多个任务。它们使用简单且线程安全。

这是一个（非常简单的）示例：http: [//msdn.microsoft.com/en-us/library/h4732ks0.aspx](http://msdn.microsoft.com/en-us/library/h4732ks0.aspx)

# sql - 将三个 SELECT 语句组合在一起

> ID：15832619
> 
> 赞同：-1
> 
> 时间：2013-04-05T11:21:34.810
> 
> 标签：sql, select, join

我需要将这三个 SELECT 语句连接在一起；可能吗？结果我需要一张桌子。

```
/*Soutezni zapasy*/
SELECT
    Jmeno,
    COUNT(CASE WHEN Ucast = 'TRUE' then 1 end) as Pocet_zapasu,
    SUM(CASE WHEN Branky>0 then Branky end) as branek
FROM Hraci
INNER JOIN Ucast_Zapas ON Ucast_Zapas.ID_Hrace_zapas=Hraci.IDHrace 
INNER JOIN Zapas ON Zapas.ID_zapas=Ucast_Zapas.ID_zapasu_ucast 
INNER JOIN Kategorie ON Kategorie.IDkategorie=Zapas.Kategorie_zapas 
WHERE (Kategorie.IDkategorie = 1) AND Zapas_Datum >= '1/1/2013' AND Zapas_Datum < '9/1/2014' AND(Zapas.Druh=1)
GROUP BY Jmeno;

/*Pratelske zapasy*/
SELECT
    Jmeno,
    COUNT(CASE WHEN Ucast = 'TRUE' then 1 end) as Pocet_zapasu,
    SUM(CASE WHEN Branky>0 then Branky end) as branek
FROM Hraci
INNER JOIN Ucast_Zapas ON Ucast_Zapas.ID_Hrace_zapas=Hraci.IDHrace 
INNER JOIN Zapas ON Zapas.ID_zapas=Ucast_Zapas.ID_zapasu_ucast 
INNER JOIN Kategorie ON Kategorie.IDkategorie=Zapas.Kategorie_zapas 
WHERE (Kategorie.IDkategorie = 1) AND Zapas_Datum >= '1/1/2013' AND Zapas_Datum < '9/1/2014' AND(Zapas.Druh=2)
GROUP BY Jmeno;

/*turnaje*/
SELECT
    Jmeno,
    COUNT(CASE WHEN Ucast = 'TRUE' then 1 end) as Pocet_turnaju,
    SUM(CASE WHEN Branky>0 then Branky end) as branek
FROM Hraci
INNER JOIN Ucast_Turnaj ON Ucast_Turnaj.ID_Hrace_turnaj=Hraci.IDHrace 
INNER JOIN Turnaj ON Turnaj.ID_turnaj=Ucast_Turnaj.ID_turnaje_ucast 
INNER JOIN Kategorie ON Kategorie.IDkategorie=Turnaj.Kategorie_Turnaj 
WHERE (Kategorie.IDkategorie = 1) AND Turnaj_Datum >= '1/1/2013' AND Turnaj_Datum < '9/1/2014'
GROUP BY Jmeno; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:25:13.997

试试这个`UNION`说法。

快速信息链接：[http ://www.w3schools.com/sql/sql_union.asp](http://www.w3schools.com/sql/sql_union.asp)

# jquery - 当动画运行一次时，我仍然可以看到非常不透明的文本，有人可以帮忙删除它吗？

> ID：15832624
> 
> 赞同：1
> 
> 时间：2013-04-05T11:21:45.740
> 
> 标签：jquery, html, css

当动画运行一次时，我仍然可以看到非常不透明的文本，有人可以帮忙删除它吗？

[这是一个jsFiddle](http://jsfiddle.net/797BR/2/)

```
$(document).ready(function () {
 $('.btn').click(function () {
     $('.tooltip').animate({
         opacity: 0,
     }, 0);
     $('.tooltip').animate({
         bottom: '40px',
         width: '163px',
         opacity: 1
     }, 400);
     $('.tooltip').css({
         'display': 'block',
     }).delay(1400);
     $('.tooltip').animate({
         opacity: 0,
         bottom: '30px'
     }, 200);
 });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:31:09.857

您应该使用动画的“完整”回调

```
 $(document).ready(function () {
        $('.btn').click(function () {
            $( '.tooltip' ).css( 'opacity', 0 )
            .animate( {
                bottom: '40px',
                width: '163px',
                opacity: 1
            }, 400, function() {

                $( '.tooltip' ).css( 'display', 'block' )
                .delay( 1400 )
                .animate( {
                    opacity: 0,
                    bottom: '30px'
                }, 200 );
            } );
        } );
    } ); 
```

我没有测试这个

问题可能是“动画”函数将同时运行，这是没有意义的，JavaScript 与回调异步工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:30:45.667

虽然我确实观察到了你的问题，但我必须同意比利护城河的观点，因为这是一种视错觉。但是，有一种方法可以改进您的工具提示。目前，在第一次之后，它实际上会保持可见只是透明的。这允许您使用来选择文本（注意鼠标悬停时光标会发生变化）。

您可以通过使用`display:none`或`visibility:hidden`在动画完成后隐藏它来解决此问题。

[jsFiddle](http://jsfiddle.net/Tyriar/nrtWK/)

**JS**

```
 $(document).ready(function () {
     $('.btn').click(function () {
         $('.tooltip')
             .addClass('show')
             .animate({
                 opacity: 0,
             }, 0)
             .animate({
                 bottom: '40px',
                 width: '163px',
                 opacity: 1
             }, 400)
             .delay(1400);
         $('.tooltip')
             .animate({
                 opacity: 0,
                 bottom: '30px'
             }, 200);
         setTimeout(function () {
             $('.tooltip').removeClass('show');
         }, 2000);
     });
 }); 
```

**CSS**

```
.tooltip {
    visibility:hidden;
    width: 164px;
    left: 6px;
    display: block;
    height: 33px;
    position: absolute;
    bottom: 20px;
    background-image: url('http://www.rusterholz.dk/btn.png');
    background-repeat: no-repeat;
    background-position: top left;
}
.tooltip.show {
    visibility:visible;
} 
```

# c++ - 指针可以有不同的大小吗？

> ID：15832631
> 
> 赞同：16
> 
> 时间：2013-04-05T11:22:11.427
> 
> 标签：c++, pointers, language-lawyer

[这个答案](https://stackoverflow.com/a/14774681/673730)带有一个有趣的陈述 - “在`int*`小于 a 的机器上`char*`”。（让我们排除指向函数的指针）

指向不同类型的指针是否有可能具有不同的大小？为什么这会有用？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-05T11:25:31.820

是的，这完全有可能。在某些机器上，指向字节的指针包含两个值：指向包含该字节的内存字的 WORD 地址的指针，以及给出字节在字中的位置的“字节索引”。例如，在 32 位机器上，“字节索引”为 0..3。

这将需要比“int *”更多的存储空间，“int *”只是指向相关单词的指针。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-05T11:27:54.583

在单词寻址的机器上，a`char*`可能需要包含部分单词信息，使其大于`int*`.

该标准允许这样做，但不排除在此类硬件上的实现（尽管现在这种情况比 C89 设计时更加罕见）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-05T11:35:59.133

[language-lawyer](/questions/tagged/language-lawyer "显示标记为“语言律师”的问题")标签意味着您询问的是 C++ 及其兼容的实现，而不是某些特定的物理机器。

我必须引用整个标准来证明它，但简单的事实是它不保证`sizeof(T*)`for any的结果`T`，并且（作为推论）不保证`sizeof(T1*) == sizeof(T2*)`for any `T1`and `T2`）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-05T11:27:26.967

是的，指针不能保证具有相同的大小，尽管在大多数现代架构中，实际上它们是相同的。

这可能有用的一点是当人们关注数据与函数指针时。从历史上看，函数指针（用于实质上跳转到*可执行代码*中的某些部分）需要比数据指针更宽的所谓“远指针”。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-05T11:31:48.563

我可以想象一台机器，假设`int`数组的内存需求将远低于`char`数组的内存需求。

例如，可以指定一个实现不会使用超过 10 个动态分配的整数，而是可以自由分配许多`char`数组。在这种情况下，一个字节可能足以满足 a `int*`，而 a`char*`需要四个字节或更多。

那是理论上的愿景。

# java - Web 服务操作中的变量未更新

> ID：15832635
> 
> 赞同：0
> 
> 时间：2013-04-05T11:22:19.683
> 
> 标签：java, web-services, rest, variables, exception

我正在使用 java 创建一个非常简单的 Web 服务示例。我有一个变量 num 初始化为 0，但我无法在最后保留它的值。根据我拥有的数据库，它的值应该增加 1。

下面是网络服务操作：

```
@WebMethod(operationName = "getNewID")
public String getNewID(@WebParam(name = "newID") String txt2) 
{
Connection connection = null;  
ResultSet resultSet = null;  
Statement statement = null;
int num=0;
    try 
        {  
            Class.forName("org.sqlite.JDBC");  
            connection = DriverManager.getConnection("jdbc:sqlite:src/java/db/test.sqlite");  
            statement = connection.createStatement();
            resultSet = statement.executeQuery("SELECT ID FROM LOGINDETAILS where ID = '"+txt2+"'");

            while (resultSet.next()) 
                {  
                    //System.out.println("Your ID "+ resultSet.getString("ID"));
                    num++;
                }

        } 

    catch (Exception e) 
        {  
            System.out.println("You had an exception");
            e.printStackTrace();  
        }

    finally 
        {  
        try 
            {  
                resultSet.close();  
                statement.close();  
                connection.close();  
            } 
        catch (Exception e) 
            {  
                e.printStackTrace();  
            }  
        } 
    if(num==0)
        { 
            return "Your ID does not match";
        }

    else
        {
            return "Welcome "+txt2;
        }
} 
```

在我得到的输出中

方法返回 java.lang.String ：“您的 ID 不匹配”

对于所有情况，只有 if 部分有效，而 else 部分无效。当我在一个类中尝试相同的方法时，它工作正常，但不是在 web 服务操作的情况下

新代码

```
@WebMethod(operationName = "getNewID")
public String getNewID(@WebParam(name = "newID") String txt2) 
{
String str = null;
Connection connection = null;  
ResultSet resultSet = null;  
Statement statement = null;
    int num=0;
    try 
        {  
            Class.forName("org.sqlite.JDBC");  
            connection = DriverManager.getConnection("jdbc:sqlite:src/java/db/test.sqlite");  
            statement = connection.createStatement();
            resultSet = statement.executeQuery("SELECT ID FROM LOGINDETAILS where ID = '"+txt2+"'");

            while (resultSet.next()) 
                {  
                    //System.out.println("Your ID "+ resultSet.getString("ID"));
                    num++;
                }

        } 

    catch (Exception e) 
        {  
            System.out.println("You had an exception");
            e.printStackTrace();  
        }

    finally 
        {  
        try 
            {  
                resultSet.close();  
                statement.close();  
                connection.close();  
            } 
        catch (Exception e) 
            {  
                e.printStackTrace();  
            }  
        } 
    assert num == 0 || txt2 == null : str = "num "+num+"txt2 "+txt2;
    return str;

    /*if(num==0)
        { 
            return "Your ID does not match Please Try Again Or if new user then please register";
        }

    else
        {
            return "Welcome "+txt2;
        }*/
} 
```

结果，我将 str 的值设为 null。

好的，我现在试过了..

```
@WebMethod(operationName = "getNewID")

public String getNewID(@WebParam(name = "newID") String txt2) 
{
Connection connection = null;  
ResultSet resultSet = null;  
Statement statement = null;
int num=0;
    try 
        {  
            Class.forName("org.sqlite.JDBC");  
            connection = DriverManager.getConnection("jdbc:sqlite:src/java/db/test.sqlite");  
            statement = connection.createStatement();
            resultSet = statement.executeQuery("SELECT ID FROM LOGINDETAILS where ID = '"+txt2+"'");

            while (resultSet.next()) 
                {  
                    num++;
                }
            return resultSet.toString();

        } 

    catch (Exception e) 
        {  
            System.out.println("You had an exception");
            e.printStackTrace();
            return "You had an exception";
        }

} 
```

我得到输出

```
java.lang.String : "You had an exception" 
```

当它在 Web 服务操作之外工作正常时，为什么它在这里显示异常......我该如何纠正它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:23:51.103

1.  检查异常
2.  通过调试器、断言语句或您确实需要 `System.out.println`语句来调试代码。
3.  如果可以，请先对数据库运行查询，然后查看是否得到预期结果。
4.  确保正在加载的驱动程序的类正确加载。确保 lib 在类路径中。

问候伦蒂乌斯

# google-earth-plugin - 在受保护的网络后面显示 KMZ 文件

> ID：15832637
> 
> 赞同：1
> 
> 时间：2013-04-05T11:22:21.523
> 
> 标签：google-earth-plugin, kmz

我正在尝试显示一个 KMZ 文件，该文件位于受密码保护且端口不同于 80 的文件夹中。它看起来像这样：

```
http://localhost:8080/assets/data/3641 
```

这将返回一个具有有效 MIME 类型的 KMZ 文件，如果我在浏览器中访问此链接，我可以在 Google 地球中保存并打开它。

Google Earth 的 API 具有以下[显示 KMZ/KML](https://developers.google.com/earth/documentation/kml)的方法：

*   KmlNetworkLink - 您提供 KMZ/KML 的 URL，然后将此对象附加到 GE 实例
*   parseKml() - 你给它一个 KML 字符串，它会给你一个 KmlFeature 来附加
*   fetchKml() - 你向它提供一个 KML/KMZ 的 URL，它会为你附加它
*   另一个方便的方法是来自[Google Earth API Utility library](https://code.google.com/p/earth-api-utility-library/wiki/GEarthExtensionsUtilReference#displayKml%28url,_options%29)的 displayKml()，它使用 fetchKml()

## 获取Kml()

我的第一次尝试是使用 fetchKml，但这没有给出任何响应——它默默地失败了。我很惊讶这被插件认为是正常行为（为什么它不抛出异常，或者提供第二个回调来处理错误？）。如果我以以下形式提供示例 kmz，则此方法可以正常工作：

```
http://localhost/somefile.kmz 
```

我认为问题在于我的第一个 URL 受密码保护 - 如果不存在登录会话，它将重定向到登录屏幕，并且我怀疑 Google 地球插件与浏览器不共享相同的浏览器会话 - 所以它运行到登录屏幕并失败，因为它接收的是 HTML 文件而不是 KMZ/KML。

## 解析Kml()

按下 undeterred，我创建了另一个 API 方法来解压缩服务器端的 KMZ 并返回 KML 字符串：

```
http://localhost:8080/assets/data/unzip/3641 
```

这种方法的美妙之处在于我编写了自己的 JavaScript 来执行 GET 请求——它不通过 Google Earth，所以使用我打开的登录会话并且可以下载 KMZ。缺点是 KMZ 可以包含 KML 文件可以引用的图像和音乐。[就文档](https://developers.google.com/kml/documentation/kmzarchives)而言，这些不能与 KML 字符串一起传递。

## KmlNetworkLink

我最后一次尝试是使用[KmlNetworkLink](https://developers.google.com/earth/documentation/reference/interface_kml_network_link)和[KmlLink](https://developers.google.com/earth/documentation/reference/interface_kml_link)。这与 fetchKml 具有相同的效果 - 没有任何反应。

**更新：**此外，在没有有效证书的情况下使用“https”时它会失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T16:40:08.203

是的，问题是 URL 受密码保护。如果您像这样使用它，您可以`fetchKml()`给出一些错误指示：

```
google.earth.fetchKml(ge, 'http://localhost:8080/assets/data/3641
', finishFetchKml);

function finishFetchKml(kmlObject) {
  // check if the KML was fetched properly
  if (kmlObject) {
    // add the fetched KML to Earth
    currentKmlObject = kmlObject;
  } else {
    // setTimeout prevents a deadlock in some browsers
    setTimeout(function() {
      alert('Bad or null KML.');
    }, 0);
  }
} 
```

Kml 被设计为一种免费的开放格式 - 如果您希望在安全系统上私下使用它，那么您应该考虑使用[Google 地球插件的企业版](http://www.google.com/enterprise/earthmaps/enterprise.html#utm_campaign=launch&utm_source=en-na-us-entblog-GEE_40_now_available_08132010&utm_medium=blog)。

# iphone - 从 UIPageViewController 卸载 viewController

> ID：15832644
> 
> 赞同：0
> 
> 时间：2013-04-05T11:22:43.817
> 
> 标签：iphone, ios, objective-c, xcode

我有一个 UIPageViewController，我在其中添加了其他 viewController。这些 ViewControllers 在数组中，`viewControllersArray = [[NSMutableArray alloc] init];`我在这个数组上添加 viewControllers，如下所示：

```
 [viewControllersArray addObject: infoViewController]; 
```

在我的数组上添加 viewControllers 后：

```
NSArray *initialViewControllers = [[NSArray alloc] initWithObjects:[viewControllersArray objectAtIndex:0], nil];
[self setViewControllers:initialViewControllers
               direction:UIPageViewControllerNavigationDirectionForward
                animated:YES
              completion:^(BOOL finished){
                  NSLog(@"call back success");}]; 
```

上面的代码都是在我的 UIPageViewController 的 viewDidLoad 中完成的。

为了加载这个数组，我得到了`<UIPageViewControllerDataSource>` 我使用的那些函数表单：

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController {
    if ([viewControllersArray containsObject:viewController]) {
        NSInteger index = [viewControllersArray indexOfObject:viewController];
        if (index < [viewControllersArray count] && index > 0) {
            return [viewControllersArray objectAtIndex:(index - 1)];
        }
    }
    return nil;
}

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController {
    if ([viewControllersArray containsObject:viewController]) {
        NSInteger index = [viewControllersArray indexOfObject:viewController];
        if (index < [viewControllersArray count] - 1) {
            return [viewControllersArray objectAtIndex:(index + 1)];
        }
    }
    return nil;
} 
```

现在的问题是，当您滑动时，下一个视图控制器会被加载，等等。但它们不会被卸载。因此，我正在寻找一种方法来卸载您已经传递的视图控制器以节省内存，并且当您向后滑动时，它们将被重新加载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:42:12.753

您的问题是您在`viewControllersArray`. 该数组包含对您添加到其中的每个对象的强引用。节省内存的最简单方法是在 the`pageViewController:viewControllerBeforeViewController:`和`pageViewController:viewControllerAfterViewController:`data source 方法中动态创建请求的视图控制器。这样，只有页面视图控制器才会对视图控制器有强引用，并且一旦它移出屏幕就会释放（dealloc）它。

如果动态创建它们太昂贵，您可能会考虑在数组中只保留 3 个视图控制器：当前显示的一个以及紧靠左侧和紧靠右侧的一个。

例子：

```
- (UIViewController *)pageViewController:(UIPageViewController *)pvc
      viewControllerBeforeViewController:(MyGreatViewController *)vc
{
    NSUInteger index = vc.position - 1; //custom property on your VC
    if (index > 0) {
      return [[MyGreatViewController alloc] initWithPosition:index];
    }

    return nil;
}

- (UIViewController *)pageViewController:(UIPageViewController *)pvc
       viewControllerBeforeViewController:(MyGreatViewController *)vc
{
    NSUInteger index = vc.position + 1; //custom property on your VC
    if (index <= MAX_POSITION) {
      return [[MyGreatViewController alloc] initWithPosition:index];
    }

    return nil;
} 
```

享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:47:23.450

您不应该卸载 View Controller。如果内存不足，控制器会卸载他们的视图。在代码中，使用`-(void)viewDidUnload`and `-(void)didReceiveMemoryWarning`(iOS 6) 来释放您的资源。当 UIPageViewController 将显示某个页面时，控制器会重新创建卸载的视图并调用`-(void)viewDidLoad`（如果您手动自定义控制器）。

# javascript - 更改 id 的颜色

> ID：15832645
> 
> 赞同：-1
> 
> 时间：2013-04-05T11:22:44.080
> 
> 标签：javascript, jquery

我是新来的。我想知道你是否可以帮助我。我想试试 id 的颜色（一个矩形）。我希望颜色每 5 秒更改为我已经选择的一些颜色，当单击矩形时，它将采用当时的颜色。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:34:53.077

试试这个：

**HTML：**

```
<div id="rectangleId">Test</div> 
```

**脚本：**

```
$(function(){
    var myArray=['red','yellow','blue'];
    $('#rectangleId').on('click',function(){
        var rand = myArray[Math.floor(Math.random() * myArray.length)];
        $(this).css('color', rand);
    });
}); 
```

**小提琴：http:** [//jsfiddle.net/3QMuT/](http://jsfiddle.net/3QMuT/)

对于每 5 秒**自动更改一次，请使用上面的代码，例如：**

**脚本：**

```
$(function(){
    var myArray=['red','yellow','blue'];
    setInterval(function(){
        var rand = myArray[Math.floor(Math.random() * myArray.length)];
        $('#rectangleId').css('color', rand);
    },5000);
}); 
```

**小提琴：http:** [//jsfiddle.net/3QMuT/1/](http://jsfiddle.net/3QMuT/1/)

**注意：**您必须`jQuery version`在使用前添加任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:35:34.900

首先，您应该使用 jQuery id 选择器 ( [http://api.jquery.com/id-selector/](http://api.jquery.com/id-selector/) ) 选择您的元素。例如，如果您的元素名为“MyElement”，那么您应该编写 $("#MyElement")

选择一个元素后，您可以对其调用一些 jQuery 函数。在您的情况下，您可以调用 .css() 函数来更改矩形的背景颜色属性（可能是 div 元素？）。所以代码就像 $("#MyElement").css("background-color", "red");

您可以在 JavaScript 数组中预定义颜色： var colors = ["red", "green", "blue"]; 然后创建一个每 5 秒调用一次的方法（使用 JavaScript 方法 setInterval）并更改颜色。

我已经为您编写了整个代码：http: [//jsfiddle.net/Ww74t/](http://jsfiddle.net/Ww74t/)

HTML：

```
<div id="MyElement"></div> 
```

CSS：

```
#MyElement {
    width: 500px;
    height: 500px;
} 
```

JavaScript：

```
var colors = ["red", "green", "blue"];
var currentColorIndex = 0;
$("#MyElement").css("background-color", colors[currentColorIndex % colors.length]);
setInterval(function(){
    currentColorIndex++;
    $("#MyElement").css("background-color", colors[currentColorIndex % colors.length]);
},5000); 
```

# c# - 输入超出数组设置范围的数字，索引超出范围错误

> ID：15832646
> 
> 赞同：1
> 
> 时间：2013-04-05T11:22:48.027
> 
> 标签：c#, arrays, runtime-error

我想制作一个程序，其中用户输入一个数字，在这种情况下是多个项目。然后将项目数与数组中的值进行比较，并显示相应的折扣。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication11
{
    class Program
    {
        const int SIZE = 4;
        static void Main(string[] args)
        {
            int itemsbought = 0;
            int discountItem = 0;
            int[] items = new int[SIZE] { 0, 10, 26, 61 };
            int[] discount = new int[SIZE] { 0, 5, 10,15 };

            InputItems(ref itemsbought);
            getDiscount(items, discount, ref itemsbought, ref discountItem);

            Console.WriteLine("Your discount is {0}", discountItem);

        }

        private static void getDiscount(int[] items, int[] discount, ref int itemsbought, ref int discountItem)
        {
            int idx = 0;
            for (idx = 0; itemsbought > items[idx] || idx > items.Length; idx++)
            {

                    discountItem = discount[idx];
            }
            }

        private static void InputItems(ref int itemsbought)
        {
            Console.WriteLine("Enter the amount of items you bought");
            while (!int.TryParse(Console.ReadLine(), out itemsbought))
                if (itemsbought < 0) 
            {
                    Console.WriteLine("Error, whole numbers over 0 only");
            }
                Console.WriteLine("Error, whole numbers over 0 only");
        }
    }
} 
```

当输入超过 61 的数字时，我得到“索引超出范围”错误。我怎样才能使如果输入超过 61 的数字，它显示 15？另外我该怎么做才能使这个边界包括 61 及以上而不是 61 给出 10 的输出？

此外，每次我输入内容时，它都会显示错误消息，仅当数字小于 0 或双倍时才会显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:55:54.130

要显示您犯的小错误，请参阅此更正版本：

```
for (idx = 0; idx < items.Length && itemsbought > items[idx]; idx++) 
```

有三个重要的变化：

1.  idx > items.Length 始终为假。并且 idx= items.Length 超出范围。
2.  使用 && 代替 || 请记住，如果此条件为真，则循环继续执行，一旦为假，则停止执行。
3.  交换了订单。在访问 items[idx]**之前，**您必须检查 idx < items.Length 。短路 && 从左到右计算，如果结果确定则停止。

因此，您更正后的代码将如下所示：

```
private static void getDiscount(int[] items, int[] discount, int itemsbought, ref int discountItem)
{
    int idx = 0;
    for (idx = 0; idx < items.Length && itemsbought > items[idx]; idx++)
        discountItem = discount[idx];
} 
```

但我更愿意将条件放在循环中以使其更具可读性：

```
private static void getDiscount(int[] items, int[] discount, int itemsbought, ref int discountItem)
{
    for (int i = 0; i < items.Length; i++)
    {
        if(itemsbought > items[i])
            discountItem = discount[i];
        else
            break;
    }
} 
```

* * *

解决您的其他问题

> 此外，每次我输入内容时，它都会显示错误消息，仅当数字小于 0 或双倍时才会显示。

正确地重新格式化您的代码，一条消息输出在正确的位置，另一条始终执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:00:32.217

我会重写你`getDiscount`如下：

```
private static void getDiscount(int[] items, int[] discount, ref int itemsbought, ref int discountItem)
{
    for (int i = 0; itemsbought > items[i];)
    {
        discountItem = discount[i];
        i++;
        if (i >= items.Length)//will return the last element in the discount array(15)
            break;
    }
} 
```

您收到错误的原因是因为大于 61 的数字不包含在您的 items 数组中，因此 for 循环继续，您可以打破它以返回折扣数组中的最后一个元素 (15)

然后像这样重写你的`InputItems`方法：

```
private static void InputItems(int itemsbought)
{
    Console.WriteLine("Enter the amount of items you bought");
    if (!int.TryParse(Console.ReadLine(), out itemsbought) || itemsbought < 0)
    {
        Console.WriteLine("Error, whole numbers over 0 only");
    }
} 
```

无论 tryparse/if 语句是否成功，您都会返回相同的错误消息。您还需要将调用更新为`InputItems(itemsbought);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:34:36.710

以不同的方式看待您的问题，但您可以选择使用它。

```
public class Item
    {
        public Item(string name, int qty)
        {
            ItemName = name;
            Qty = qty;
        }

        public enum DiscountRate
        {
            ZeroPercent = 0,
            FivePercent = 10,
            TenPercent = 26,
            FifteenPercent = 61

        }

        public override string ToString()
        {
            return string.Format("Items Name: {0} | Units: {1} | Discount Rate: {2}", this.ItemName, this.Qty, this.Rate.ToString() );
        }

        public string CalculateDiscount()
        {
            if (this.Qty >= (int)DiscountRate.FifteenPercent)
            {
                this.Rate = DiscountRate.FifteenPercent;
                return this.ToString();
            }
            else if (this.Qty >= (int)DiscountRate.TenPercent && this.Qty < (int)DiscountRate.FifteenPercent)
            {
                this.Rate = DiscountRate.TenPercent;
                return this.ToString();
            }
            else if (this.Qty < (int)DiscountRate.TenPercent && this.Qty > 9)
            {
                this.Rate = DiscountRate.FivePercent;
                return this.ToString();
            }
            else
            {
                this.Rate = DiscountRate.ZeroPercent;
                return this.ToString();
            }
        }

        public string ItemName { get; set; }
        public int Qty { get; set; }
        public DiscountRate Rate {get; set;}
    } 
```

主要代码：-

```
class Program
    {
        static void Main(string[] args)
        {
            Item a = new Item("Tennis Ball", 100);
            Item b = new Item("Spoon", 10);
            Item c = new Item("Candles", 27);
            Item d = new Item("Battery's", 2);
            Item e = new Item("Nails", 10);
            Item f = new Item("Marbles", 0);

            Console.WriteLine(a.CalculateDiscount());
            Console.WriteLine();
            Console.WriteLine(b.CalculateDiscount());
            Console.WriteLine();
            Console.WriteLine(c.CalculateDiscount());
            Console.WriteLine();
            Console.WriteLine(d.CalculateDiscount());
            Console.WriteLine();
            Console.WriteLine(e.CalculateDiscount());
            Console.WriteLine();
            Console.WriteLine(f.CalculateDiscount());
            Console.WriteLine();
            Console.ReadLine();
        } 
```

# unix - 从 korn 脚本中读取 .csv 文件中的特定字段值

> ID：15832651
> 
> 赞同：-1
> 
> 时间：2013-04-05T11:22:55.713
> 
> 标签：unix

如何使用 korn 脚本从 .csv 文件中读取特定字段值。

假设输入如下：

```
First_name      lastname    dept    collge
Ravi            shangar     csc xxx
ram             Devi        csc zzz
raj                 shangar         csc     yyy 
```

所以我需要提取不同的姓氏值。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:26:12.370

您可以使用`awk`如下方式获取第二列：

```
$ awk '{print $2}' file
lastname
shangar
Devi 
```

awk 默认使用空格分隔符，但如果需要，您可以使用该`-F`选项更改它。

# sml - 如何通过给出一年中的两天来获得月份列表？

> ID：15832664
> 
> 赞同：-1
> 
> 时间：2013-04-05T11:23:29.977
> 
> 标签：sml

我有一个名为的函数`month_range`，它需要一年中的两天作为输入（例如，65 和 128，假设一年有 365 天）并返回一个列表，其中包含从 day1 到 day2 的天数所属的月份数。

列表的大小必须为“day2 - day1 + 1”。

示例：month_range(25,35) 应返回：[1,1,1,1,1,1,1,2,2,2,2]

我写了以下代码

```
fun month_range (day1:int,day2:int) =
    let
      val month_days= [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
      fun what_month(day :int) =
          let
            fun aux(sum :int,  numbers: int list) =
                let
                  val numbers_tail = tl numbers
                in
                  if sum <= (hd numbers)
                  then 1
                  else
                    1 + aux(sum, (hd numbers + hd numbers_tail)
                            :: (tl numbers_tail))
                end
          in
            aux(day, month_days)
          end
    in
      if (day1>day2)
      then []
      else what_month(day1) @ what_month(day1 + 1)@::what_month(day2)
    end 
```

但它给了我以下错误

```
/tmp/emacs-region5156f3r:21.51-21.54 Error: unbound variable or constructor: @::
/tmp/emacs-region5156f3r:21.12-21.70 Error: operator is not a function [literal]
  operator: int
  in expression:
    (what_month (day1 + 1)) <errorvar>
/tmp/emacs-region5156f3r:21.12-21.70 Error: operator and operand don't agree [literal]
  operator domain: 'Z list * 'Z list
  operand:         int * _
  in expression:
    what_month day1 @ (((what_month <exp>) <errorvar>) what_month) day2

uncaught exception Error
  raised at: ../compiler/TopLevel/interact/evalloop.sml:66.19-66.27
             ../compiler/TopLevel/interact/evalloop.sml:44.55
             ../compiler/TopLevel/interact/evalloop.sml:296.17-296.20 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:22:29.327

首先，您可以从错误消息中看到您正在使用`@::`，这实际上没有任何意义。

您很可能已经`what_month`为另一个赋值创建了该函数，因此没有理由将它放在 let 表达式中。

现在，如果我们稍微简化一下您的代码

```
val month_days= [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
fun what_month(day :int) =
    let
      fun aux(sum :int,  numbers: int list) =
          let
            val numbers_tail = tl numbers
          in
            if sum <= (hd numbers)
            then 1
            else
              1 + aux(sum, (hd numbers + hd numbers_tail)::(tl numbers_tail))
          end
    in
      aux(day, month_days)
    end

fun month_range (day1:int,day2:int) =
      if (day1>day2)
      then []
      else what_month(day1) 
```

然后我们会看到它仍然没有输入。这是因为`what_month`函数的类型是`int -> int`，但是您在主体内的 if 表达式在`month_range`then 分支中返回一个列表，那么您还必须在 else 分支中返回一个列表。我们会解决这个问题。

目前该函数仅返回 day1 所属的月份数（理论上，as is 尚未键入）。我们不希望它返回所有 day1 ... day2 的列表。
这就是递归的用武之地。如果我们`what_month(day1)`与递归调用串联返回，`month_range( day1 + 1, day2)`那么我们最终将建立一个列表

```
what_month(day1) :: what_month(day1 + 1) :: what_month(day1 + 1 + 1) ... 
```

并且由于您返回空列表，因此当您达到条件时`day1 > day2`，递归将为您提供这样的结果

```
what_month(day1) :: what_month(day1 + 1) :: what_month(day1 + 1 + 1)  :: ...
                 :: what_month(day2) ::[] 
```

生成的代码如下所示

```
fun month_range (day1:int,day2:int) =
    if (day1>day2)
    then []
    else what_month(day1) :: month_range(day1 + 1, day2)

- month_range(25,35);
val it = [1,1,1,1,1,1,1,2,2,2,2] : int list 
```

# javascript - 如何在 css 中使用 jQuery 变量？

> ID：15832667
> 
> 赞同：-5
> 
> 时间：2013-04-05T11:23:48.183
> 
> 标签：javascript, jquery, css

如何使用存储在 var height 中的值作为 margin-top 的值？

```
<script>
    $(document).ready(function(){
      var height = $(window).height() / 2;

      $("a").click(function(){

        $("#loader").css({"margin-top:", ***height});

      });

    });
</script> 
```

提前致谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T11:25:14.927

像这样：

```
<script>
    $(document).ready(function(){
      var height = $(window).height() / 2;

      $("a").click(function(){

        $("#loader").css('margin-top', height+'px');

      });

    });
</script> 
```

演示：http: [//jsfiddle.net/MtEjP/](http://jsfiddle.net/MtEjP/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T11:26:02.160

尝试这个：

```
$("#loader").css('margin-top', height+'px'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T11:27:23.943

在 var和之前删除`:`and 放在外面：`height``***`

```
$("#loader").css({"margin-top" : height}); 
```

这个可以用来设置多个css属性和属性：

```
$("selector").css({"cssattribute" : "cssproperty", 
                   "cssattribute" : "cssproperty"}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T11:33:44.220

试试这个来设置 marginTop

```
 $('#loader').css('marginTop', height); 
```

在这里查看演示..... [http://jsfiddle.net/SUBqf/](http://jsfiddle.net/SUBqf/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-30T10:23:33.613

你可以用两种方式写它：

```
$("#loader").css({"margin-top": height}); 
```

或者

```
$("#loader").css("margin-top", height); 
```

您必须选择使用多属性的第一种方式。并用*逗号*(,) 分隔它们。

```
Ex: $("#loader").css({"margin-top": height, "margin-bottom": height, "margin-left": "10px"}); 
```

# linq - Linq 查询中的 VAR 是什么

> ID：15832670
> 
> 赞同：-3
> 
> 时间：2013-04-05T11:23:55.177
> 
> 标签：linq

您能否解释一下，LINQ 中的 VAR 是什么，为什么我们在所有 LINQ 查询中都使用它。

```
 var result = from sta in db.uploaddetails
              where sta.Keyword==issue.uploaddetails.Keyword 
              select sta; 
```

这里的VAR是什么？？？为什么 LINQ 查询与 SQL 查询完全不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T11:25:37.757

`var`是一个隐式类型的局部变量，因此编译器根据分配的值隐含该类型。

有关详细信息，请参阅[http://msdn.microsoft.com/en-gb/library/bb384061.aspx](http://msdn.microsoft.com/en-gb/library/bb384061.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T10:52:19.127

```
var result = from sta in db.uploaddetails
              where sta.Keyword==issue.uploaddetails.Keyword 
              select sta; 
```

**Var**是在声明变量且其数据类型未知的情况下使用的关键字，或者等式右侧将返回什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T11:25:29.903

*var*只是右侧返回的任何类型的缩写。它实际上与 LINQ 无关，它是一个标准的 C# 关键字。你可以写

```
var mylist = new List<int>; 
```

以及

# doctrine-orm - 多表继承实体的 Doctrine DQL 实例

> ID：15832672
> 
> 赞同：1
> 
> 时间：2013-04-05T11:24:06.720
> 
> 标签：doctrine-orm, multiple-inheritance, dql

我已经在我的应用程序上设置了 Doctrine 多表继承 - 见下文

```
/**
 * @Entity
 * @InheritanceType("JOINED")
 * @DiscriminatorColumn(name="type", type="string")
 * @DiscriminatorMap({
 *  "news" = "News" ,
 *  "press_release" = "PressRelease"})
 *
 * @table(name="pages")
 */
class PressRelease extends Page {...}
class News extends Page {...} 
```

我的自定义存储库查询

```
$query = $this->getEntityManager()->createQuery('SELECT u FROM MyStoreBundle:User u
LEFT JOIN u.page p
WHERE p INSTANCE OF :newsType'
)->setParameter('newsType', new News()); 
```

我认为这会起作用，但是我不断收到以下错误：

```
Notice: Undefined index: id in /path/to/Symfony/vendor/doctrine/orm/lib/Doctrine/ORM/AbstractQuery.php line 282 
```

显然我的`News`实体没有一个字段，因为这是在扩展定义了属性的类`id`时继承的，有谁知道我做错了什么？`Page``id`

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-09T21:14:57.427

INSTANCE OF 需要实体类名称，而不是实例：

```
->setParameter('newsType', 'YourProject\News'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:49:44.320

Doctrine 将所有属性设置为私有。所以你不能从继承的类中访问那些。您可以将`private`父类中的属性设置为`protected`. 我想它会工作的。

# r - 邻接表中的图

> ID：15832674
> 
> 赞同：1
> 
> 时间：2013-04-05T11:24:09.703
> 
> 标签：r, list, graph, adjacency-list

我有一个邻接列表，我想将它们可视化并对其进行处理。有没有一个包可以有效地做到这一点。我看到有很多图形包，但它们之间很混乱。有人可以帮我吗？

```
$`825`
[1] 824

$`824`
[1] 823

$`823`
[1] 822

$`822`
[1] 821

$`821`
[1] 820 777

$`820`
[1] 819 816 789 787 785 783

$`777`
[1] 776 
```

以上是邻接列表。下面是我想要的图表。

```
825
 |
824
 |          _______ 783
823        /
 |        /________ 785
822      /
 |      /__________ 787
821 -- 820
 |      \__________ 789
777      \
 |        \________ 816
776        \
            \______ 819 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T11:58:48.520

```
 mylist <- list(2,c(1,3),c(2,4),c(3,1))
 names(mylist) <- c(1,2,3,4)
 # just like your list

 #make it in the igraph format
 myadj <- stack(mylist)

#>    values ind
#>     1      2   1
#>     2      1   2
#>     3      3   2
#>     4      2   3
#>     5      4   3
#>     6      3   4
#>     7      1   4

 #plot it
 library(igraph)
 g<-graph.data.frame(myadj)
 plot(g) 
```

# magento - 在 magento1.7 主页上的任何类别中每行显示 4 个项目

> ID：15832676
> 
> 赞同：1
> 
> 时间：2013-04-05T11:24:16.323
> 
> 标签：magento, magento-1.7

我对 magento 比较新鲜。我正在使用magento 1.7。

我想在一个类别的 magento 主页上每行显示 4 个项目。我正在使用 wayaat.com 免费[主题](http://www.wayaat.com/magento-theme/jewellery-magento-theme.html)。怎么显示。请指导。

我正在使用 magento 进行研发的虚拟 magento 实例：http: [//questoons.com/magento/](http://questoons.com/magento/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:41:55.983

您可以使用不同的列表文件来显示您的产品，只需复制原始 list.phtml 文件并命名为 listhome.phtml 之类的名称，然后放入目录/产品文件夹中，然后在此文件中将`$_columnCount`变量更改为`$_columnCount =4`，您就完成了，并且在您的 cms 页面中更改您的列表文件名为`{{block type="catalog/product_list" name="home.catalog.product.list" alias="products_homepage" template="catalog/product/listhome.phtml"}}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:19:09.090

很抱歉在这里发布答案，但我没有足够的声誉发表评论。将您的 ul.products-grid 宽度从当前的 980 像素增加到至少 1001 像素。它将带来第四个产品。正如 Mufaddal 之前所说，你现在是 css 的问题。

# validation - 可观察数组上的多个淘汰验证器

> ID：15832677
> 
> 赞同：1
> 
> 时间：2013-04-05T11:24:18.627
> 
> 标签：validation, knockout.js, ko.observablearray

我试图在可观察数组下定义多个自定义验证规则，我指的是[https://github.com/ericmbarnard/Knockout-Validation/wiki/Custom-Validation-Rules](https://github.com/ericmbarnard/Knockout-Validation/wiki/Custom-Validation-Rules)。

以下是我的带有验证调用的 observablearray：

```
 this.WeeklyData = ko.observableArray([]).extend({
    validation: [
        {
            validator : fminIncrements,
            message: 'use 15 min increments'
        },
        {
            validator: ValidateMinMax,
            message: "Invalid min/max value"
        }
    ]
    });

var ValidateMinMax = function (valueArray) {
var check = true;
ko.utils.arrayFirst(valueArray, function (value) {
    if (parseInt(value.Val(), 10) < 0 || parseInt(value.Val(), 10) > 168) {
        check = false;
        return true;
    }
});
return check;
};

var fminIncrements = function (valueArray) {
var check = true;
ko.utils.arrayFirst(valueArray, function (value) {
    if (parseInt(value.Val(), 10) % 15 !== 0) {
        check = false;
        return true;
    }
});
return check;
}; 
```

当我这样做时，只会触发第一条规则。我调试了，它甚至没有击中第二个。任何想法？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-08T04:32:26.993

我相信这是因为您使用的是 ko.utils.arrayFirst()。如果您使用 ko.utils.arrayForEach() 代替检查每个案例，那么它不应该在第一次出现时返回。

# c++ - 如何从 type_info 获取模板参数的类型

> ID：15832679
> 
> 赞同：4
> 
> 时间：2013-04-05T11:24:23.893
> 
> 标签：c++, templates, c++11, rtti

我有一棵树，其中每个节点基本上如下所示：

```
struct node
{
    std::unordered_set<object*> objects;
    std::map<std::type_index,node> children;
}; 
```

当我遍历树以添加新类型时，我想做一个检查：

```
std::is_base_of<base,derived> 
```

但是，我拥有的派生类型的唯一信息是`type_index/type_info*`.

无论如何我可以将其转换`type_info*`为`template`参数吗？

如果没有，我的其他选择是什么？我想可以调用`decltype(*objects.begin())`，但这将要求每个节点中的每个集合都不能为空。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T11:44:56.630

> 无论如何我可以将其转换`type_info*`为模板参数吗？

不，没有办法。模板是编译时的东西，RTTI 是运行时的。两者之间没有任何联系。

> 我想可以调用`decltype(*objects.begin())`，但这将要求每个节点中的每个集合都不能为空。

它不需要那样。`decltype`不评估它的论点——它不需要。它只需要检查类型。你可以`decltype(*a_null_pointer)`不用调用 UB 就很高兴，因为表达式永远不会被计算——这就是所谓的*未计算上下文*。`sizeof`属于同一类别。

请注意，这不会给您带来太多收益 - 您只会`object*&`回来。如果不首先准备映射，您通常无法从运行时信息中获取类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T11:51:57.810

`is_base_of`并且`decltype`是纯粹的编译时构造；它们不会反映对象的动态类型。

`type_info`不提供检查子类关系的工具；在运行时执行该检查的唯一方法是使用`dynamic_cast`. 您需要存储 a`unique_ptr<base>`并查看它是否可以`dynamic_cast`用于派生类型。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-05T14:13:46.747

如果我对您的理解正确，您需要一种类型`inheritance_checker`，使得它的每个实例都与一个类型相关联，但`inheritance_checker`它本身不是。类似于`type_ifo`但可以在运行时检查继承关系的东西。例如，您希望以下工作：

```
class A {};
class B : public A {};

// Note that a and b have the same type but they are "related" to distinct types.
inheritance_checker a = inheritance_checker::create<A>();
inheritance_checker b = inheritance_checker::create<B>();

assert(   a.is_base_of  (b) );
assert(   a.derives_from(a) ); // derives from or is equal to
assert( ! b.is_base_of  (a) );
assert(   b.derives_from(b) ); // derives from or is equal to 
```

如果是这种情况，我可以建议你一些，不幸的是，可能会很慢！这取决于例外情况。

基本思想是，如果你抛出 a`B*`那么 a`catch (A*)`是匹配的。因此，我们赋予了`inheritance_checker`在构造时抛出和捕获指向给定类型的指针的能力。But`inheritance_checker`不是模板，因此必须以类型擦除的方式提供此容量。这可以通过存储指向具有固定签名的函数的指针来完成，该签名不依赖于构造时传递的类型，但能够抛出/捕获指向给定类型的指针。`inheritance_checker`下面给出了一个可能的实现。

```
#include <cassert>

class inheritance_checker {

    typedef void (*thrower_t)();
    typedef bool (*catcher_t)(thrower_t);

public:

    template <typename T>
    static inheritance_checker create() {
        return inheritance_checker(concrete_thrower<T>, concrete_catcher<T>);
    } 

    bool is_derived_from(const inheritance_checker& other) const {
        return other.catcher_(thrower_);
    }

    bool is_base_of(const inheritance_checker& other) const {
        return catcher_(other.thrower_);
    }

private:

    template <typename T>
    static void concrete_thrower() {
        throw static_cast<T*>(nullptr);
    }

    template <typename T>
    static bool concrete_catcher(thrower_t thrower) {
        try         { thrower();   }
        catch (T*)  { return true; }
        catch (...) {              }
        return false;
    }

    inheritance_checker(thrower_t thrower, catcher_t catcher) :
        thrower_(thrower), catcher_(catcher) {
    }

    thrower_t thrower_;
    catcher_t catcher_;
};

class A {};
class B : public A {};
class C : public B {};
class D {};

int main() {

    auto a = inheritance_checker::create<A>();
    auto b = inheritance_checker::create<B>();
    auto c = inheritance_checker::create<C>();
    auto d = inheritance_checker::create<D>();

    assert( a.is_base_of(a));
    assert( a.is_base_of(b));
    assert( a.is_base_of(c));
    assert(!a.is_base_of(d));

    assert( a.is_derived_from(a));
    assert(!a.is_derived_from(b));
    assert(!a.is_derived_from(c));
    assert(!a.is_derived_from(d));

    assert(!b.is_base_of(a));
    assert( b.is_base_of(b));
    assert( b.is_base_of(c));
    assert(!b.is_base_of(d));

    assert( b.is_derived_from(a));
    assert( b.is_derived_from(b));
    assert(!b.is_derived_from(c));
    assert(!b.is_derived_from(d));

    assert(!c.is_base_of(a));
    assert(!c.is_base_of(b));
    assert( c.is_base_of(c));
    assert(!c.is_base_of(d));

    assert( c.is_derived_from(a));
    assert( c.is_derived_from(b));
    assert( c.is_derived_from(c));
    assert(!c.is_derived_from(d));

    assert(!d.is_base_of(a));
    assert(!d.is_base_of(b));
    assert(!d.is_base_of(c));
    assert( d.is_base_of(d));

    assert(!d.is_derived_from(a));
    assert(!d.is_derived_from(b));
    assert(!d.is_derived_from(c));
    assert( d.is_derived_from(d));
} 
```

如果您愿意，您可以添加一个`type_info*`成员来`inheritance_checker`获得提供的额外功能`type_info`。

`is_base_of`注意和之间的对称性`derives_from`。实际上，您可以删除其中之一。

我建议你阅读[这篇](http://www.drdobbs.com/cpp/twisting-the-rtti-system-for-safe-dynami/229401004)文章。

# python - 从 SPSS 中运行 CMD 行

> ID：15832684
> 
> 赞同：4
> 
> 时间：2013-04-05T11:24:35.993
> 
> 标签：python, spss

有没有办法从 SPSS 中运行 Windows 命令行？

我正在使用 SPSS BEGIN PROGRAM 程序不支持的程序，我想从我的 SPSS 语法运行命令行（我对输出不感兴趣，我不需要导入/导出任何 SPSS数据我只想从 SPSS 中运行 cmd 行）。

举一个使用免费软件的简单示例，假设我想在我的 SPSS 语法末尾运行我的 R 脚本，但这仅适用于 SPSS 不支持的版本（例如，目前 SPSS 21 支持 R 2.14，假设我绝对需要在我的 Windows PC 上安装的 R 2.15 上运行它），有没有办法运行

R CMD BATCH C:\Files\MyRcode.R

在 SPSS 语法中？

这相当于以批处理模式运行程序（在本例中为 R）。我需要使用的程序不是R，它只是一个例子。

据我所知，SPSS 无法做到这一点，但也许使用 python（通过 [SPSS BEGIN PROGRAM PYTHON](http://pic.dhe.ibm.com/infocenter/spssstat/v21r0m0/index.jsp?topic=/com.ibm.spss.statistics.python.help/python_package_python_keyword.htm)）可以使用 Python 运行命令行？

谢谢

PS 对于之前可能没有使用过 SPSS 的 Python 用户，理论上应该能够使用 SPSS 从 SPSS 中运行任何 Python 代码

```
BEGIN PROGRAM PYTHON.
Run some Python code
END PROGRAM. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T11:50:40.070

是的，你可以用 Python 代码做到这一点：

```
BEGIN PROGRAM PYTHON.
import subprocess
subprocess.call(['C:\\R\\R.exe', 'CMD', 'BATCH', 'C:\\Files\\MyRcode.R'])
END PROGRAM. 
```

或者，直接用这个：

```
HOST COMMAND=['R CMD BATCH C:\Files\MyRcode.R']. 
```

备择方案：

*   将其放入批处理文件中，然后执行它，例如使用`os.system()`.
*   `SCRIPT`通过命令执行 Python 或 Basic 脚本。

# python - urllib 和请求“有时”无法获取最终 URL

> ID：15832689
> 
> 赞同：0
> 
> 时间：2013-04-05T11:24:54.090
> 
> 标签：python, twitter, python-2.7, python-requests

为了概述问题，我有一个 Twitter 用户“screen_names”列表，我想验证他们是否是被暂停的用户。我不想使用 twitter 搜索 API 来避免速率限制问题（列表很大）。因此，我正在尝试使用一组计算机来标记我的数据集（无论我的数据库中的帐户是否被暂停）。

如果某个帐户被 Twitter 暂停，并且您尝试通过`http://www.twitter/screen_name`重定向到的链接访问它们`https://twitter.com/account/suspended`

我尝试使用 python 2.7 和`urlib`使用该`geturl()`方法来捕获这种行为。它有效但不可靠（我在同一个链接上没有得到相同的结果）。我在同一个帐户上对其进行了测试，但有时它会返回，有时它`https://twitter.com/account/suspended`会返回`http://www.twitter/screen_name`

请求也会出现同样的问题。

我的代码：

```
import requests
from lxml import html
screen_name = 'IaMaGuyGetIt'
account_url = "https://twitter.com/"+screen_name
url = requests.get(account_url)
print url.url
req = urllib.urlopen(url.url).read()
page = html.fromstring(req)
for heading in page.xpath("//h1"):
    if heading.text == 'Account suspended':
        print True 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:35:11.050

twitter 服务器只为你提供一次 302 重定向；之后它会假设您的浏览器已经缓存了重定向。

页面的*主体*确实包含一个指针，所以即使你没有被重定向，你也可以看到那里仍然有链接：

```
r = requests.get(account_url)
>>> r.url
u'https://twitter.com/IaMaGuyGetIt'
>>> r.text
u'<html><body>You are being <a href="https://twitter.com/account/suspended">redirected</a>.</body></html>' 
```

寻找确切的文本。

# python - 分段错误（核心转储）。在python中使用C模块

> ID：15832700
> 
> 赞同：1
> 
> 时间：2013-04-05T11:25:18.927
> 
> 标签：python, c, python-2.7

我是python的新手，我正在尝试使用在C上编写的模块启动python脚本。当我尝试启动python脚本时出现分段错误（核心转储）错误。这是一个C代码：

```
// input_device.c  
#include "Python.h"

#include "input.h"

static PyObject* input_device_open(PyObject* self, PyObject* id)
{
    int fd, nr;
    PyObject* pyfd;

    if (!PyInt_Check(id))
        return NULL;

    nr = (int)PyInt_AsLong(id);
    fd = device_open(nr, 0);
    if (fd == -1)
        return NULL;
    pyfd = PyInt_FromLong(fd);
    Py_INCREF(pyfd);
    return pyfd;
}

static PyMethodDef module_methods[] =
{
    { "device_open", (PyCFunction)input_device_open, METH_VARARGS, "..." },
    { NULL, NULL, 0, NULL }
};

PyMODINIT_FUNC initinput_device(void)
{
    Py_InitModule4("input_device", module_methods, "wrapper methods", 0, PYTHON_API_VERSION);
} 
```

和python脚本：

```
from input_device import device_open
device_open(1) 
```

有人可以看看并指出我正确的方向，我做错了什么。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:29:31.997

`NULL`在不设置异常或确保已由您调用的函数设置的情况下返回是否合法？我认为这`NULL`是一个信号，表明 Python 可以为用户寻找异常。

我不确定这`Py_INCREF(pyfd);`是必要的；对象在创建时不是已经有 1 的引用计数吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:01:23.587

您的函数接收参数元组。您需要从元组中提取整数：

```
static PyObject* input_device_open(PyObject* self, PyObject* args)
{
    int fd, nr;
    PyObject* pyfd;

    if (!PyArg_ParseTuple(args, "i", &nr))
        return NULL; 
```

# php - 如何在 Javascript 中访问表单元素 xyz[]？

> ID：15832701
> 
> 赞同：0
> 
> 时间：2013-04-05T11:25:22.350
> 
> 标签：php, javascript

我的代码将通过单击添加按钮自动添加在表单中定义的新的类似行。

```
<html>
<body>
<form>
<input type="text" name="quantity[]" class="input_text" id="pro"/> 
</form>
</body>
</html> 
```

现在我想访问`quantity[]`javascript 函数中的不同值。

如何`quantity[]`使用它的 ID 或名称属性在 javascript 中访问这个不同的值。

```
 <script>
  function abc() {
      var id = document.getElementById("pro").value;
  }
  </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:30:14.133

使用纯 JavaScript 的方法是获取具有特定名称的所有元素，如下所示：

```
var fields = document.getElementsByName('quantity[]'); 
```

如果您想访问特定值，您也可以这样做：

```
console.log(fields[0].value); // foo 
```

这是一个带有代码示例的[jsfiddle 。](http://jsfiddle.net/A4tGq/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:33:15.103

HTML：

```
<form name="order">
    <input type="text" name="quantity[]" class="input_text" /> 
    <input type="text" name="quantity[]" class="input_text" /> 
    <input type="text" name="quantity[]" class="input_text" /> 
</form> 
```

JS：

```
var elements = document.forms['order'].elements['quantity[]'];
console.log(elements[1].value); // outputs the value of the 2nd element. 
```

演示：http: [//jsfiddle.net/NDbwt/](http://jsfiddle.net/NDbwt/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T11:33:28.407

你可以做这样的事情。

html:

```
<form>

    <input name="p_id[]" value="0"/>
    <input name="p_id[]" value="1"/>
    <input name="p_id[]" value="2"/>

</form> 
```

javascript:

```
var p_ids = document.forms[0].elements["p_id[]"];
alert(p_ids.length);
for (var i = 0, len = p_ids.length; i < len; i++) {
  alert(p_ids[i].value);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T11:30:19.813

```
$('input[name=quantity]').each(function(){
    alert($(this).val())
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T11:33:02.620

首先： id 在页面上必须是唯一的。否则 document.getElementById 将始终返回具有请求 id 的第一个发现元素。

在您的情况下，您可以执行以下操作：

```
var id = document.getElementsByName("quantity[]")[0].value; 
```

但更安全（我不确定返回数组中的项目顺序是否始终与添加元素的顺序相同）将生成诸如 pro_0、pro_1、pro_2 等 ID

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T11:36:51.737

当您在名称上使用方括号时，PHP 将表单字段读取为数组，您可能对此感到困惑。这只是一个 PHP 技巧——对于 JavaScript，`[]`没有任何特殊含义，您可以按照通常的方式阅读这些项目：

```
var values = [];
var fields = document.getElementsByName("quantity[]");
for (var i = 0, len = fields.length; i < len; i++) {
    values.push(fields[i].value);
}
alert("Values:\n" + values.join("\n")); 
```

看到它[在行动](http://jsfiddle.net/gSVJB/)。

# ios - instantiateViewControllerWithIdentifier 并传递数据

> ID：15832706
> 
> 赞同：7
> 
> 时间：2013-04-05T11:25:35.993
> 
> 标签：ios, storyboard, segue

我`Storyboard`在我的应用程序中使用，我想将数据从一个视图传递到另一个视图。

我没有使用 segues，而是使用`instantiateViewControllerWithIdentifier`. 在这种情况下，我从我的第`TableViewController`一个实例化到附加`NavigationController`了第二个的 a，`TableViewController`因为我需要在第二个中进行导航`TableViewController`。现在我想将数据从我的第一个`TableviewController`（取决于点击了哪一行）传递到我的第二个`TableviewController`。在这种情况下`newTopViewController`将是我的`NavigationController`，但我现在的问题是如何将数据`firstTableViewController`从`secondTableviewController`.

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {
        NSString *identifier = [NSString stringWithFormat:@"%@Top", [menuArray objectAtIndex:indexPath.row]];

        UIViewController *newTopViewController = [self.storyboard instantiateViewControllerWithIdentifier:identifier];

    } 
```

![在此处输入图像描述](https://i.stack.imgur.com/SzHOf.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-07T07:35:03.597

如果你实例化一个navigationController，你可以使用该`viewControllers`属性来获取导航控制器的内部viewController。

像这样的东西：

```
UINavigationController *navigationController = [self.storyboard instantiateViewControllerWithIdentifier:identifier];
MBFancyViewController *viewController = navigationController.viewControllers[0];

// setup "inner" view controller
viewController.foo = bar;

[self presentViewController:navigationController animated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T12:02:01.923

```
newTopViewController.anyVariableToShow= anyVariableToSend; 
```

我经常在我的一些应用程序上这样做......

//创建新的VC

```
CookViewController *detailViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"CookVC"];

//Set recipe
[detailViewController setRecipe:recipe];

//Pop over VC (can be pushed with a nav controller)
[self  presentPopupViewController:detailViewController animationType:MJPopupViewAnimationFade]; 
```

如果您没有使用导航控制器或 segues，那么我认为您需要重新考虑您的应用程序设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T13:41:26.417

实际上这不仅仅是一个数据传递问题，因为这是一个程序控制和数据传输问题。即使您必须重新考虑您的应用程序的概念，因为您想在没有故事板含义的情况下使用故事板，这取决于您，我希望您有充分的理由去做您所做的事情。

因此，当您决定不使用 segue 时，您就失去了实例化新控制器并使用它传输数据的新的舒适方式，您必须分两个不同的步骤进行控制和数据的传输。当您在情节提要中实例化另一个场景时（就像您使用 instantiateViewControllerWithIdentifier 一样：），您只是实例化了一个新控制器并传输了控制但没有传输数据。当您以旧方式从 xib 实例化一个新控制器时，请考虑一下（因此您必须在第二个视图控制器中使用 initWithCoder: 或 awakeFromNib，因为情节提要不会调用 initWithName:bundle:)，但没有做任何其他事情.

所以你将有一个新的控制器（它在第二个故事板的标识部分命名），它挂在宇宙中，与其他任何东西没有任何关系或联系（正如故事板图片很好地说明的那样），你可以用它做什么你会的。

所以你想做点什么，你需要来自前一个故事板（ViewController）的数据。您需要将这些数据提供给第二个故事板（ViewController），并且如您所知，在故事板存在之前很久就有很多解决方案可用。

因此，关于您的代码，“数据传输”取决于您的设计，无论两个控制器是彼此的子类还是其他...

如果您不喜欢处理子类化并希望尽可能将它们解耦，最好的方法是在第一个控制器中创建数据的属性并从第二个控制器中引用它们（在导入第一个 .h 文件之后）只需在它的 viewDidLoad 或 initWithCoder: 或您需要它们的任何地方引用它，如

```
secondViewControllerdata = firstViewControllerdata.thatDataProperty 
```

当然，您可以反过来做同样的事情，并为第二个控制器创建一个属性，并在您的第一个视图控制器中引用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-22T21:15:44.913

您可以在 UIViewController 中定义一些参数来接收数据：

> @property（分配）int param1；
> 
> @property（保留）NSMutableArray *param2;

并使用以下传递数据：

> [newTopViewController setParam1:XX];
> 
> [newTopViewController setParam2:XX];

# vb.net - 将现有 VBA 引用的位置从 C:\Windows\system32\ 更改为共享驱动器

> ID：15832711
> 
> 赞同：2
> 
> 时间：2013-04-05T11:25:53.197
> 
> 标签：vb.net, vba, excel, vb6

我一直在尝试获取要从外部加载的参考文件，但无济于事。

具体来说，我正在尝试加载通常位于 C:\Windows\System32\MSCOMCT2.OCX 中的“Microsoft Date and Time Picker Control 6.0(SP4)”

但是，有些运行包含此元素的宏的人在他们的 PC 上没有“MSCOMCT2.OCX”文件，所以我想我会将 MSCOMCT2.OCX 移动到共享位置并引用代码以使用共享位置（所以每个人都可以访问它）

我尝试这样做，但是当我尝试使用“浏览”从其他位置加载引用时，它没有加载它 - 因为我已经在 C:..

所以我想好吧...我将从 C:\ 中删除该文件，因此我只能引用共享文件。- 所以我删除了它。所以我再次打开工作簿并查看参考资料——我找不到“Microsotft Windows Common Controls-2.6.0(SP4)”——太好了！然后我继续使用共享驱动器中的浏览手动添加它。但是，当我这样做时，将添加 2 个“Microsotft Windows Common Controls-2.6.0(SP4)”引用 - 1 个来自 C:\（不存在）和 1 个来自共享驱动器。

![从 C:\ 自动添加的引用](https://i.stack.imgur.com/u9GMa.jpg)

![还从共享驱动器添加了参考](https://i.stack.imgur.com/tY7fq.jpg)

C:\ 中的那个总是被自动选择。如果我尝试从 C:\ 禁用一个并从共享驱动器启用一个，它会自动更改回我按 OK 时的状态。如果我尝试同时启用两者 - 它会说重复的引用并只保留 C:\ 中的一个

所以..有人知道我怎样才能从列表中删除那个 C:\ 引用，这样它就不会被加载？显然删除文件本身不起作用。最终我的目标是让没有 C:\Windows\System32\MSCOMCT2.OCX 文件的人能够使用我的日期选择器工具。

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T12:39:49.553

ActiveX 控件引用*始终*基于 GUID。出于礼貌，VB IDE 会向您显示计算机注册表中列出的文件的当前位置，但实际上并不重要。该控件将从用户计算机上注册的任何位置加载。

这就是关键：控件必须在用户的计算机上注册。

我必须强烈劝阻你不要做你想做的事。您也许可以设计一种从网络位置加载 DLL 的方法，但它与做 Right Thing(TM) 相比没有任何优势，而且存在很多问题。正确的做法是，如果您需要该控件，您必须将其分发并注册到您的应用程序中，就像其他人一样。而且您确实应该将其安装在推荐的位置（System32）；不在网络上。

下面是一个可能出错的简单示例：您向用户提供您的应用程序，它可以与网络上的控件一起使用，就像您想要的那样。然后用户安装另一个恰好需要相同控件的应用程序。应用程序的安装程序看到该控件已经在用户的计算机上注册，因此它不会尝试再次添加它。除了此特定应用程序旨在在用户未连接到网络时使用。现在你刚刚破坏了别人的程序。

VB/VBA 体系结构从未打算支持 XCOPY 部署。我知道这很痛苦，而且当您只是尝试部署“宏”时，这些额外的步骤非常不方便。可悲的是，这是野兽的本性。对不起

# java - 休眠保存枚举并检索值？

> ID：15832718
> 
> 赞同：0
> 
> 时间：2013-04-05T11:26:04.417
> 
> 标签：java, hibernate

我有如下枚举。

```
public enum TestEnum { EXAMPLE, FURTHER_EXAMPLE, LAST_EXAMPLE } 
```

在 .hbm 中使用此映射：

```
<property name="testEnum" column="TEST_COLUMN">
    <type name="org.hibernate.type.EnumType">
        <param name="enumClass">p.a.c.k.TestEnum</param>
    </type>
 </property> 
```

枚举作为 0、1、2 发送到数据库。没问题。但是当我检索到相同的结果时，我需要得到EXAMPLE、FURTHER_EXAMPLE、LAST_EXAMPLE 而不是0、1、2。我怎样才能做到这一点？请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:41:54.833

根据您对我的评论的回复。

您想通过枚举序数访问枚举值。如果是这样，您可以使用以下代码。

```
TestEnum value = TestEnum.values()[ordinal]
//ordinal can be the position that you are talking about. 
```

如果这不是您想要的，请忘记我的回答，如果这是您要找的，+1。

# java - javadoc方法中的变量类型eclipse

> ID：15832724
> 
> 赞同：1
> 
> 时间：2013-04-05T11:26:27.677
> 
> 标签：java, eclipse, javadoc

有没有办法在 Eclipse 中为带有 javadoc 的方法设置输入变量的类型？

我知道您可以将变量的名称作为标签，例如：

```
/*
* param1
* param2
*/ 
```

但我想要类似的东西：

```
/*
* String param1:
* int param2:
* return int: 
*/ 
```

我在 Window-->Preferences->Java-->Code Style-->Code Templates 中看到过，但我看不到任何类似于我需要的标签的东西。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:28:01.817

不，[javadoc 工具](http://www.oracle.com/technetwork/java/javase/documentation/index-jsp-135444.html)不支持这一点。

你为什么要这个？在您使用 javadoc 生成的方法的文档中，方法签名已经显示了参数的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:30:35.717

下面的评论模板怎么样——据我所知，这正是你想要的:-)

```
/**
 * ${field_type} ${field}
 */ 
```

*编辑*：在 Window >> Preferences >> Java >> Code Style >> Code Templates for Comments >> Fields 中使用上述模板

![代码模板首选项页面](https://i.stack.imgur.com/cZcBb.png)

现在，您可以使用命令 Generate Element Comment（`Ctrl`++ （我认为）或Mac 上的`Alt`++ ）将光标放在字段上来生成正确的注释。`J``Command``Alt``J`

# iphone - 上传带参数的 zip 文件

> ID：15832733
> 
> 赞同：1
> 
> 时间：2013-04-05T11:27:00.490
> 
> 标签：iphone, objective-c, ios5, multipartform-data

我正在尝试使用`NSURLConnection`using`POST`方法上传文件。而且我还需要在 Post 中发送一些参数，例如用户名等。我从早上开始就在尝试这个，请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:13:14.057

```
NSString *urlString = @"http://test.com/upload.aspx";
NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];

NSString *boundary = [NSString stringWithString:@"0xLhTaLbOkNdArZ"];
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"];

//Reading the file
NSString *filePath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"test.zip"];
NSData *myData = [NSData dataWithContentsOfFile:filePath];

NSMutableData *body = [NSMutableData data];

[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"test.zip\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:myData];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

[request setHTTPBody:body]; 

NSError *returnError = nil;
NSHTTPURLResponse *returnResponse = nil;

NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:&returnResponse error:&returnError]; 
```

试试这个

# facebook-graph-api - 如何仅查找安装了 facebook 应用程序的朋友？

> ID：15832735
> 
> 赞同：3
> 
> 时间：2013-04-05T11:27:03.123
> 
> 标签：facebook-graph-api, facebook-apps

我在 facebook 上使用一个应用程序，我想找出只包括在 facebook 上安装相同应用程序的朋友的列表，而不是整个朋友列表。我正在使用图形 api 调用

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-16T09:12:58.863

对 Graph API 进行调用：

```
me/friends?fields=installed,name 
```

这将为您提供当前用户的完整好友列表，但是，它将包含一个名为 的附加字段`installed`。如果设置为 true，则表示朋友已安装该应用程序。您必须浏览列表并过滤掉任何拥有`"installed": true`

或者，您可以使用以下 FQL 查询：

```
SELECT uid, name FROM user
WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me())
AND is_app_user = 1 
```

# php - 通过 Ajax 在 Javascript 到 PHP 之间保留真正的 ARRAY OBJECT？

> ID：15832737
> 
> 赞同：1
> 
> 时间：2013-04-05T11:27:11.683
> 
> 标签：php, javascript, ajax, arrays, json

我想通过 Ajax 将 Javascript 数组对象发布到 PHP。然后在 PHP 结束时，我仍然想将该对象用作真正的数组。以下是我迄今为止在使用传入对象作为`Array`PHP 端的方法方面仍然没有成功。我可以将其解析为`string`.

Javascript：

```
var myObj = { 
    fred: { apples: 2, oranges: 4, bananas: 7, melons: 0 }, 
    mary: { apples: 0, oranges: 10, bananas: 0, melons: 0 }, 
    sarah: { apples: 0, oranges: 0, bananas: 0, melons: 5 } 
} 
```

然后，通过 AJAX 发送 Javascript/JQuery：

```
$.ajax({
    type: "POST",
    url: "ajax.php",
    dataType: "JSON",
    data: { "data" : JSON.stringify(myObj) }
}).success(function( response ) {
    alert(response);
}); 
```

然后在 PHP 处解析：

```
$data = json_decode( $_POST["data"] );
echo json_encode( $data["fred"] );
echo json_encode( $data["fred"]["apples"] );
echo json_encode( $data["fred"]->apples );
echo json_encode( $data[1] ); 
```

*   以上任何一个都`echo`返回空白，返回浏览器。

但是当我：

```
$data = json_decode( $_POST["data"] );
$to_string = print_r( $data, true ); //<-- Used these instead
echo json_encode( $to_string ); //<-- Used these instead 
```

..它将以下大字符串返回给浏​​览器：

```
stdClass Object
(
    [fred] => stdClass Object
        (
            [apples] => 2
            [oranges] => 4
            [bananas] => 7
            [melons] => 0
        )

    [mary] => stdClass Object
        (
            [apples] => 0
            [oranges] => 10
            [bananas] => 0
            [melons] => 0
        )

    [sarah] => stdClass Object
        (
            [apples] => 0
            [oranges] => 0
            [bananas] => 0
            [melons] => 5
        )
) 
```

*   所以似乎数据在那里，但是我怎样才能以正确的`ARRAY`方式解析这些数据`PHP`呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:28:54.553

`true`作为参数传递给 json_decode 以返回关联数组而不是对象：

```
json_decode($string, true); 
```

[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:30:48.660

传递第二个参数 as `true`，它将转换数组中的数据

```
$data = json_decode( $_POST["data"] , true); 
```

# forms - 如何将基本注册表单添加到 Concrete5 页面模板

> ID：15832740
> 
> 赞同：0
> 
> 时间：2013-04-05T11:27:22.750
> 
> 标签：forms, concrete5, concrete

我是 Concrete5 的新手，发现了大量有关添加联系表单的信息，但仅限于页面的可编辑区域。

我需要做的是在我的页面模板中添加一个表单。它只是一个名称+电子邮件+提交按钮表单，显示在该模板的每个页面上。提交时，“感谢”信息......就是这样！

我尝试将输出到页面内容的代码复制/粘贴到我的 default.php 模板，但没有运气。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:13:10.993

您应该在模板中创建一个（全局）可编辑区域，然后像其他方式一样向其中添加一个联系人块。

例如：

```
<?php
$a = new GlobalArea('Contact Form');
$a->display();
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:39:14.463

I agree with the other answer here... it's not worth the trouble to re-create a "hard-coded" contact form in your theme if you already have all the code working as a block. Here's a third technique you could use to achieve that -- you can hardcode just one block instead of the entire stack, like so:

```
<?php Block::getByName('My Global Contact Form')->display(); ?> 
```

Put that code in your theme's template, and then add the contact form block to a stack in the dashboard (any stack, doesn't matter -- I usually create one stack of "global content" in my sites that I put all of these "hardcoded" blocks into). Then after you've added the block to the stack, click on the block and choose "Custom Template" from the popup menu. Then enter the block name into the field there (in this example, it would be "My Global Contact Form", without the quotes). Finally, click the "Approve Changes" button at the top of the stack.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T16:53:57.960

您可以通过几种方法来解决此问题，但一种方法是创建一个包含联系表单的堆栈。然后，取该堆栈的名称并将其添加到您的模板中。

因此，如果堆栈被称为“全球联系表”，那么您可以将以下内容添加到您的模板中：

```
$stack = Stack::getByName('Global Contact Form');               
if( $stack ) $stack->display(); 
```

# makefile - 有没有一种优雅的方法来控制“install -D”创建的目录的权限？

> ID：15832748
> 
> 赞同：1
> 
> 时间：2013-04-05T11:27:34.740
> 
> 标签：makefile

我`[/usr/bin/]install`在 Makefile 中使用将一些二进制文件复制到我的`$HOME`目录中。我的umask设置为700。

问题是我`install -D -m 700`用来安装二进制文件，并且父目录是使用 755 而不是 700 的权限创建的：

```
$ umask
077
$ ls
$ touch hello
$ ls -l
total 0
-rw------- 1 emuso emuso 0 Apr  5 13:15 hello
$ install -D -m 700 hello $PWD/this/is/hello
$ ls -ld this
drwxr-xr-x 3 emuso emuso 4096 Apr  5 13:17 this
$ ls -lR this 
this:
total 4
drwxr-xr-x 2 emuso emuso 4096 Apr  5 13:17 is

this/is:
total 0
-rwx------ 1 emuso emuso 0 Apr  5 13:17 hello 
```

我想要目录`this`并`is`获得700而不是755的权限。

我想到的解决方案是：

1.  用于`install -d -m 700`手动创建目录结构。
2.  用于`chmod`手动修复权限。

第一个解决方案的主要缺点是我有一个目录结构，我必须手动创建和创建。

所以我的问题是：有没有一种优雅的方法来控制“install -D”创建的目录的权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:08:17.703

您想要实现的目标似乎无法通过一次调用来实现`install`，因此您可能不得不求助于`mkdir`and的组合`install`。根据您的具体情况，您也许可以利用[罐头食谱](http://www.gnu.org/software/make/manual/html_node/Canned-Recipes.html)，使用如下内容：

```
define einstall
test -d "$(dir $@)" || mkdir -p "$(dir $@)"
install -m 700 $< $@
endef

some/new/test/hello: hello
    $(einstall) 
```

如果您打算使用 make v3.81 或更早版本使用罐头食谱，请务必阅读[为什么 GNU Make 罐头食谱不起作用？](https://stackoverflow.com/a/5033043/1380680)

# ios - 尝试为具有 armv6 和 arv7 架构的 iPhoneOS 平台编译 FFMPEG 库

> ID：15832754
> 
> 赞同：4
> 
> 时间：2013-04-05T11:27:45.253
> 
> 标签：ios, objective-c, linux, video, ffmpeg

我正在尝试为具有 arm7 架构的 IOS 平台编译 FFMPEG 库。[我从http://www.ffmpeg.org](http://www.ffmpeg.org)下载了 FFMPEG 库。

我成功地为 iPhoneSimulator 的 i386 架构构建了静态库。但我需要 iPhoneOS 的库。使用配置命令我得到一个错误。以下是我的命令详细信息。

对于 i386（无错误）：

```
./configure  --enable-cross-compile --disable-debug --disable-ffmpeg --disable-ffplay --disable-ffprobe --disable-ffserver --disable-doc --disable-network  --disable-everything  --enable-protocol=file --enable-demuxer=mov  --enable-muxer=mpegts --enable-bsf=h264_mp4toannexb   --arch=i386 --target-os=darwin --cc=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/gcc --as='./gas-preprocessor/gas-preprocessor.pl /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc' --sysroot=/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneOS6.1.sdk --cpu=i386 --extra-cflags='-arch i386' --extra-ldflags='-arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk' --prefix="/Users/amit/Desktop/LivuLib-master/LivuLIb/ffmpeg/bin/newLib" 
```

对于 armv7：

```
./configure  --enable-cross-compile --disable-debug --disable-ffmpeg --disable-ffplay --disable-ffprobe --disable-ffserver --disable-doc --disable-network  --disable-everything  --enable-protocol=file --enable-demuxer=mov  --enable-muxer=mpegts --enable-bsf=h264_mp4toannexb   --arch=armv7 --target-os=darwin --cc=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc --as='./gas-preprocessor/gas-preprocessor.pl /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc' --sysroot=/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk --cpu=cortex-a9 --extra-cflags='-arch armv7' --extra-ldflags='-arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk' --prefix="/Users/amit/Desktop/LivuLib-master/LivuLIb/ffmpeg/bin/newLib" 
```

对于 Arm7 的上述命令，我收到此错误：

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc is unable to create an executable file.
C compiler test failed.

If you think configure made a mistake, make sure you are using the latest
version from SVN. 
```

所以请给我一个可能的解决方案。为什么它不起作用？还是我需要更新任何东西。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T21:17:47.200

我意识到这个问题是在大约 2.5 个月前被问到的，所以提问者可能已经继续前进，但我在寻找同一问题的答案时遇到了它。所以，希望这对外面的人有帮助！

我真正需要做的就是验证我使用的所有路径实际上都指向存在的东西。

具体来说，我试图运行：

```
./configure \
--prefix=armv7 \
--disable-ffmpeg --disable-ffplay --disable-ffprobe --disable-ffserver \
--enable-avresample --enable-cross-compile \
--sysroot="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk" \
--target-os=darwin \
--cc="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc" \
--extra-cflags="-arch armv7 -mfpu=neon -miphoneos-version-min=6.0" \
--extra-ldflags="-arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -miphoneos-version-min=6.0" \
--arch=arm --cpu=cortex-a9 --enable-pic 
```

^ 来自[http://www.tangentsoftworks.com/2012/11/12/how-to-prepare-your-mac-for-ios-development-with-ffmpeg-libraries/](http://www.tangentsoftworks.com/2012/11/12/how-to-prepare-your-mac-for-ios-development-with-ffmpeg-libraries/)

当我无法让它工作时，我决定停止偷懒并实际检查路径中列出的目录：任何以“/Applications/...”开头的目录。我发现我没有安装“iPhoneOS6.0.sdk”（它在上面的路径中引用）。

将脚本更改为此有效：

```
./configure \
--prefix=armv7 \
--disable-ffmpeg --disable-ffplay --disable-ffprobe --disable-ffserver \
--enable-avresample --enable-cross-compile \
--sysroot="/applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk" \
--target-os=darwin --cc="/applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc" \
--extra-cflags="-arch armv7 -mfpu=neon -miphoneos-version-min=6.0" \
--extra-ldflags="-arch armv7 -isysroot /applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk -miphoneos-version-min=6.0" \
--arch=arm --cpu=cortex-a9 --enable-pic 
```

简而言之，只需仔细检查您的路径。希望有帮助！

# visual-c++ - 将 Triclops 中的图像转换为 opencv RGB 图像 Mat。

> ID：15832756
> 
> 赞同：1
> 
> 时间：2013-04-05T11:27:53.343
> 
> 标签：visual-c++, opencv

我想使用 OpenCV 对来自 Bumblebee2 相机的校正图像进行一些处理。我正在使用 FlyCapture2 和 Triclops 从传感器中抓取图像并进行校正。我想将 TriclopsColorImage 转换为 cv::Mat 以与 OpenCV 一起使用。

从 TriclopsColorImage 对象我可以得到以下信息：

```
int nrows; // The number of rows in the image
int ncols; //The number of columns in the image
int rowinc; //The row increment of the image
unsigned char * blue; //pixel data for the blue band of the image
unsigned char * red;  //pixel data for the red band of the image
unsigned char * green; //pixel data for the green band of the image 
```

我不知道如何将此信息转换为 cv::Mat 图像以便我可以处理它。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:00:18.060

我没有对此进行测试，也不知道您使用的是哪个版本的 OpenCV，但类似以下内容应该可以为您指明正确的方向。因此，假设您的变量名称来自问题：

```
cv::Mat R(nrows, ncols, CV_8UC1, red, rowinc);
cv::Mat G(nrows, ncols, CV_8UC1, green, rowinc);
cv::Mat B(nrows, ncols, CV_8UC1, blue, rowinc);

std::vector<cv::Mat> array_to_merge;

array_to_merge.push_back(B);
array_to_merge.push_back(G);
array_to_merge.push_back(R);

cv::Mat colour;

cv::merge(array_to_merge, colour); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:18:57.510

一段时间后我想出了替代解决方案。

```
 // Create a cv::Mat to hold the rectified color image. 
   cv::Mat cvColorImage(colorImage.nrows, colorImage.ncols,CV_8UC3);

   unsigned char* bp = colorImage.blue;
   unsigned char* rp = colorImage.red;
   unsigned char* gp = colorImage.green;

   for(int row = 0; row< colorImage.nrows; row++){

       for( int col =0; col< colorImage.rowinc; col++){

            //printf("%u %u %u ",*bp,*rp,*gp);
            bp++;
            rp++;
            gp++;

            cvColorImage.at<cv::Vec3b>(row,col)[0] = *bp;

            cvColorImage.at<cv::Vec3b>(row,col)[1] = *gp;

            cvColorImage.at<cv::Vec3b>(row,col)[2] = *rp;

       }
       cout << endl;
   }

   imshow("colorimage", cvColorImage);
   waitKey(300); 
```

# drupal - Drupal 7 - 仅在注册时可编辑的用户配置文件字段

> ID：15832758
> 
> 赞同：0
> 
> 时间：2013-04-05T11:27:55.797
> 
> 标签：drupal, drupal-7, user-profile

在 Drupal 7 中，有没有办法在注册时显示必填字段，并在用户注册后使其不可编辑？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:32:44.830

从 Drupal 后端：

1.  配置
2.  帐号设定
3.  管理字段

从这里您可以添加新字段（请务必选中询问此字段是否应出现在用户注册表单上的框）

然后，您将需要使用挂钩来禁用`user_profile`表单中的此字段。\

**代码：** `template.php`

```
function THEME_form_alter(&$form, &$form_state, $form_id) {
  switch($form_id) {
    case 'user_profile_form':
      $form['field_my_field']['#disabled'] = true;
      break;
  }
} 
```

# asp.net - CSS 将鼠标悬停在图像上以显示子菜单

> ID：15832760
> 
> 赞同：1
> 
> 时间：2013-04-05T11:28:00.503
> 
> 标签：asp.net, html, css

我正在努力做到这一点，以便我可以使用这样的[菜单](http://jsfiddle.net/Wexcode/BEhvQ/)

公平地说，我几乎不明白这一点，我被告知您可以使用带有悬停功能的样式。

这是我用我的代码尝试过的：

```
<center>
    <ul>
        <li>
            <a href="audiorageHome.aspx"><img src="images/audiorageGIFtype/audiorageBanner.gif" alt="Welcome to AudioRage!"/></a>
        </li>
        <li>
            <a href="audiorageHome.aspx"><img src="images/audiorageGIFtype/audiorageButtonHome.gif" alt="Home"/></a>
            <img class="showHim" src="images/audiorageGIFtype/audiorageButtonStore.gif" alt="Store" />
            <a href="audiorageAbout.aspx"><img src="images/audiorageGIFtype/audiorageButtonAbout.gif" alt="About"/></a>
            <a href="audiorageCart.aspx"><img src="images/audiorageGIFtype/audiorageButtonCart.gif" alt="Cart"/></a>
        </li>                    
    </ul>
</center>
<br />
<center>
    <div class="showMe">I want this to show!!</div>
</center> 
```

这是CSS

```
.showMe
{ 
display: none;
}
.showHim:hover .showMe
{
display: block;
} 
```

[这是到JSFIDDLE](http://jsfiddle.net/4DvEZ/1/)的代码的预制链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:36:50.677

这不起作用，因为您的`display:block`规则正在寻找`.showHim`与`.showMe`. 你可以通过几种方式做到这一点。

* * *

针对隐藏的**孩子**：[jsFiddle](http://jsfiddle.net/Tyriar/gYQAB/)

**CSS**

```
.hoverme:hover .showMe {
    display: block;
} 
```

**HTML**

```
<span class="hoverme">
    <img class="showHim" src="images/audiorageGIFtype/audiorageButtonStore.gif" alt="Store" />
    <span class="showMe">I want this to show!!</span>
</span> 
```

* * *

或针对**同级** [jsFiddle](http://jsfiddle.net/Tyriar/ys7Gb/)

**CSS**

.showHim:hover + .showMe { 显示：块；}

**HTML**

```
<img class="showHim" src="images/audiorageGIFtype/audiorageButtonStore.gif" alt="Store" />
<span class="showMe">I want this to show!!</span> 
```

* * *

典型菜单的结构是这样的，这样可以很容易地定位隐藏的项目。[jsFiddle](http://jsfiddle.net/Tyriar/TxmTJ/)

**HTML**

```
<ul class="menu">
    <li>
        Some menu item
        <ul class="submenu">
            <li>Sub menu item</li>
        </ul>
    </li>
    ...
 </ul> 
```

**CSS**

```
.submenu {
    display:none;
}
.menu > li:hover .submenu {
    display:block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:45:57.353

你需要在这里使用一些 jQuery 来制作 if 工作：

```
 $(".showHim").hover(
      function () {
        $('.showMe').css("display","block");
      },
      function () {
        $('.showMe').css("display","none");
      }
    );
   }); 
```

[这里的工作示例](http://jsfiddle.net/4DvEZ/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:15:37.780

为此，您需要更改 html 结构

html代码

```
<center>
    <ul>
        <li><a href="audiorageHome.aspx"><img src="images/audiorageGIFtype/audiorageBanner.gif" alt="Welcome to AudioRage!"/></a></li>
        <li><a href="audiorageHome.aspx"><img src="images/audiorageGIFtype/audiorageButtonHome.gif" alt="Home"/></a></li>
        <li class="showHim"><img src="images/audiorageGIFtype/audiorageButtonStore.gif" alt="Store" />
        <div class="showMe">I want this to show!!</div></li>
        <li><a href="audiorageAbout.aspx"><img src="images/audiorageGIFtype/audiorageButtonAbout.gif" alt="About"/></a></li>
        <li><a href="audiorageCart.aspx"><img src="images/audiorageGIFtype/audiorageButtonCart.gif" alt="Cart"/></a></li>                 
    </ul>
</center> 
```

CSS 代码

```
.showMe{ 
    display: none;
}
.showHim:hover .showMe{
    display: block;
} 
```

[JsFiddle 文件](http://jsfiddle.net/8pdve/)

# javascript - 将表单域重置为初始状态

> ID：15832763
> 
> 赞同：1
> 
> 时间：2013-04-05T11:28:03.867
> 
> 标签：javascript, jquery, css, forms

我正在使用以下代码使用 Jquery 来设置我的表单字段

```
 $("#frmlogin").reset() 
```

以上是我用来重置以下表单中的字段的代码

```
<form  name='frmlogin' method='POST' id="login_form" style="margin:0 auto; margin-top:50px; width: 40%; height:300px; text-align:center;">

                        <input class="oFormJumbo oFormMed oInputText" type="text" name="requiredLogin" placeholder="Login Id" AUTOCOMPLETE=OFF />
                        <div class="cleaner h10"></div>
                        <input class="oFormJumbo oFormMed oInputText "  type="password" value="" name="password" placeholder="Password"  AUTOCOMPLETE=OFF onfocus="changetoUpperCase(document.frmlogin.requiredLogin.value);" />
                        <div class="cleaner h10"></div>
                        <a href="javascript:fp();">Forgot Password?</a>
                        <div class="cleaner"></div>
                        <input style="margin-left:0px; "   class="submit_btn float_l" type="button" value="Sign In" name="Sign In" onClick="javascript:func_get_data();"/>
                        <input style="margin-left: 200px; "  class="submit_btn float_r" type="button" value="Reset" id="reset" name="reset"   onclick="javascript:Reset()"/>

 </form> 
```

由于某种原因，代码不起作用。JavaScript 抛出以下异常

```
TypeError: $("#frmlogin").reset is not a function
[Break On This Error]   

$("#login_form").reset() 
```

谁能告诉我为什么它不起作用？我已经包含了 Jquery.js。

根据 Adils 的建议，我什至尝试过

```
*$("#login_form")[0].reset()* 
```

现在它给了

```
TypeError: $("#frmlogin")[0] is undefined
[Break On This Error]   

$("#frmlogin")[0].reset() 
```

我错过了什么？

我尝试了除了 Amit Agrawal 之外的所有代码，因为我想使用 Jquery。没有炒锅。我知道我的休息代码是提供的。我在表格中遗漏了一些东西

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T12:04:04.137

您是否有某些原因忽略了重置输入元素？

[http://jsfiddle.net/BhTv5/](http://jsfiddle.net/BhTv5/)

```
<input type="reset" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T11:28:51.457

您正在使用 jQuery 对象调用重置，使用 DOM 对象调用重置，您可以使用索引器将 jQuery 对象转换为 DOM 对象。

改变

```
$("#login_form").reset() 
```

到

```
$("#login_form")[0].reset() 
```

***根据评论进行***编辑**，问题的另一个原因是重置按钮的 ID 和名称。令人惊讶的是，如果有任何**带有 id 或 name 重置的输入，那么 form.reset() 函数将停止工作**。更改重置按钮的 id 和名称，上面的代码将起作用。**

 ****[现场演示](http://jsfiddle.net/auTGB/)**

改变

```
<input style="margin-left: 200px; "  class="submit_btn float_r" type="button" value="Reset" id="reset" name="reset"   onclick="javascript:Reset()/> 
```

到

```
<input style="margin-left: 200px; "  class="submit_btn float_r" type="button" value="Reset" id="myreset" name="myreset" /> 
```

用按钮绑定事件

```
$('#myreset').click(function () {   
    $("#login_form")[0].reset();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T11:30:57.433

试试这个代码你不会得到类型错误。你声明的 id 是错误的你声明了表单名称不是 id 尝试使用 id 并重置表单。

```
document.getElementById("login_form").reset(); 
```

（或者）

```
 $("#login_form").reset(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T11:29:48.233

reset 是 javascript 方法，需要 DOM 对象

它应该是

```
$("#login_form")[0].reset() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T11:33:28.577

您必须获得`name`with 属性选择器：

```
$('form[name="frmlogin"]').reset(); 
```

或带身份证：

```
$('#login_form').reset(); 
```

您的代码中断是因为您没有引用具有正确属性的表单。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T11:35:38.317

使用 JavaScript

```
document.getElementById("login_form").reset();//Use the id of the form 
```

使用 jQuery

```
("#login_form").reset(); 
```**

# jpa - 处理 JPA 合并的最佳方法？

> ID：15832765
> 
> 赞同：11
> 
> 时间：2013-04-05T11:28:11.740
> 
> 标签：jpa, jta

我是整个 JPA 的新手，所以我对处理 JPA 合并和持久化的最佳方式有多个疑问。

1.  我有一个应该更新的用户对象（一些值，如日期和名称）。我必须先合并传递的对象还是找到新对象更安全？

    目前我更新用户的代码如下所示：

    ```
    public void updateUserName(User user, String name) {
         // maybe first merge it?
         user.setName(name);
         user.setChangeDate(new Date());
         em.merge(user);   
     } 
    ```

    在调用更新方法之前如何确定用户没有被操纵？做这样的事情是否更安全：

    ```
     public void updateUserName(int userId, String name) {
         User user = em.getReference(User.class, userId);
         user.setName(name);
         user.setChangeDate(new Date());
         em.merge(user);   
     } 
    ```

    也许其他解决方案？我观看了多个视频并看到了许多示例，但它们都不同，没有人解释最佳实践是什么。

2.  将孩子添加到关系中的最佳方法是什么？例如，我的用户对象连接到多个组。我应该为用户调用 JPA 处理程序并将新组添加到用户组列表中，还是应该在 so 组处理程序中使用持久性创建组并将其手动添加到我的用户对象？

希望这里有人有线索；）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T12:15:48.783

1.  这取决于您想要实现的目标以及您拥有多少关于您尝试合并的对象的来源的信息。

    首先，如果您`em.merge(user)`在方法的第一行或最后调用它并不重要。如果您使用 JTA 和 CMT，您的实体将在方法调用完成时更新。唯一的区别是，如果您`em.merge(user)`在更改用户之前调用，您应该使用返回的实例而不是您的参数，所以要么是：

    ```
    public void updateUserName(User user, String name) {
       User managedUser = em.merge(user);
       managedUser.setChangeDate(new Date());
       // no need of additional em.merge(-) here.
       // JTA automatically commits the transaction for this business method.
    } 
    ```

    或者

    ```
    public void updateUserName(User user, String name) {
       user.setChangeDate(new Date());
       em.merge(user);
       // JTA automatically commits the transaction for this business method.
    } 
    ```

    现在关于更新实体。
    如果您只想更新实体中一些定义明确的字段 - 请使用第二种方法，因为它更安全。您无法确定您的方法的客户是否没有修改您实体的其他一些字段。因此，`em.merge(-)`也会更新它们，这可能不是您想要实现的。

    另一方面 - 如果您想接受用户所做的所有更改并只是覆盖/添加一些属性，如`changeDate`您的示例中，第一种方法也很好（合并传递给业务方法的整个实体。）这真的取决于您的使用-案子。

2.  我想这取决于您的级联设置。如果您想`Groups`在实体更改时自动持久化/合并所有`User`- 只需将其添加到用户的集合中是安全的（例如`User#addGroup(Group g) { groups.add(g)}`。如果您不想级联，您始终可以创建自己的方法来传播到另一个关系的一方。它可能类似于：`User#addGroup(Group g)`自动调用`g.addUser(this);`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T12:15:11.453

**问题 1**

*   `merge`必须在**分离**的实体上调用该方法。
*   该`merge`方法将返回**附加**到 entityManager 的合并对象。

这是什么意思 ？

一旦您用来获取实体的实体管理器关闭，实体就会被分离。（即大部分时间是因为您在之前的交易中获取它）。

在您的第二个代码示例中：用户已附加（因为您只是获取它），因此调用合并是无用的。（顺便说一句：不是`getReference`但是`find`）

在您的第一个示例中：我们不知道用户的状态（分离实体与否？）。如果它是分离的，调用它是有意义的`merge`，但要小心`merge`不要修改它作为参数传递的对象。所以这是我的第一个示例版本：

```
/**
 * @param user : a detached entity
 * @return : the attached updated entity
**/
public User updateUserName(User user, String name) {
   user.setName(name);
   user.setChangeDate(new Date());
   return em.merge(user);   
} 
```

**问题2**

*也许一些代码示例来解释 jpa 处理程序的含义可以帮助我们理解您的担忧。无论如何，我会尽力帮助你。*

如果您有一个持久用户并且您需要创建一个新组并将其与持久用户相关联：

```
User user = em.find(User.class, userId);
Group group = new Group();
...
em.persist(group);
user.addToGroups(group);
group.addToUsers(user); //JPA won't update the other side of the relationship
                        //so you have to do it by hand OR being aware of that 
```

如果您有一个持久用户和一个持久组，并且您需要将它们关联起来：

```
User user = em.find(User.class, userId);
Group group = em.find(Group.class, groupId);
...
user.addToGroups(group);
group.addToUsers(user); 
```

**一般注意事项**

关于所有这一切的最佳实践实际上取决于您管理事务（以及 entityManager 的生命周期）与对象的生命周期。

大多数时候：entityManager 是一个非常短时间的活对象。另一方面，您的业务对象可能存在更长的时间，因此您将不得不调用合并（并注意合并不会修改传入参数的对象！！！）。

您可以决定在同一个事务中获取和修改您的业务对象（即使用同一个 entityManager）：这意味着更多的数据库访问，并且出于性能原因，该策略通常必须与二级缓存相结合。但在这种情况下，您不必调用合并。

我希望这会有所帮助。

# javascript - 黑莓 OS 5 上的 phonegap 应用程序

> ID：15832768
> 
> 赞同：0
> 
> 时间：2013-04-05T11:28:27.410
> 
> 标签：javascript, jquery, ajax, cordova

我在android上部署了我的phonegap应用程序，它工作得很好，当我将它部署在Blackberry粗体9900模拟器上时它也工作得很好，但是一旦我将它部署在黑莓曲线8520上，应用程序就完全失败了。

我在某处读到 BB OS 5 不支持 Ajax 调用，但无法找到停止在 OS 5 设备上调用 ajax 的方法。

# tomcat - Spring MVC 3 Web.xml 欢迎文件（index.jsp）未显示 404

> ID：15832771
> 
> 赞同：3
> 
> 时间：2013-04-05T11:28:30.103
> 
> 标签：tomcat, servlets, spring-mvc, web.xml

希望您能提供帮助，因为据我所知，这是正确设置的（但请证明我错了）。

我的 spring 3 mvc 项目配置如下：

web.xml

```
<servlet>
    <servlet-name>myServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>myServlet</servlet-name>
    <url-pattern>/frontPage</url-pattern>
</servlet-mapping>

<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/myServlet-service.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

和 myServlet-servlet.xml

```
<mvc:annotation-driven />
<context:component-scan base-package="my.path.to.controllers" />

<bean
    class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />
<bean
    class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />

<bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/views/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

我在 WEB-INF（不是 WEB-INF/views）中有一个 index.jsp，它只不过是说“你好”（我最初试图让它转发到 /frontPage）。

现在，如果我输入控制器的 url (localhost:8080/myServlet/frontPage)，控制器工作并显示视图，但是当我第一次启动时，我得到一个 404 而不是 index.jsp 页面。我尝试在 index.jsp 中添加一个前导斜杠，但这没有任何区别。

我一定是在某个地方犯了一个小学生的错误，但我这辈子都不知道在哪里。任何人都可以为我指出吗？

在 STS 2.9.1 servlet 2.5 中运行的 Spring MVC 3.2 Tomcat 6

非常感谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T11:33:53.557

该`WEB-INF`文件夹不可公开访问。所以你必须把你的东西`index.jsp`放在可以到达的地方，例如在 web 应用程序的根文件夹中。

```
/mywebapp
    /WEB-INF/
    /index.jsp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-04T16:38:48.497

在 java 配置的情况下，您可以覆盖扩展 WebMvcConfigurerAdapter 的类中的两个方法

```
@Override
public void addViewControllers(ViewControllerRegistry registry) {
    registry.addViewController("/").setViewName("/index");
}

@Override
public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {
    configurer.enable();
} 
```

如果您想显式提供 index.html，请将其转换为资源覆盖同一类中的方法，如下所示：

```
@Override
public void addResourceHandlers(ResourceHandlerRegistry registry) {
    registry.addResourceHandler("/index.html").addResourceLocations("/WEB-INF/views/index.html");
} 
```

当然`addResourceLocations`必须遵循选择保存您的意见的文件夹。

查看[这些示例](https://github.com/spring-projects/spring-test-mvc/blob/master/src/test/java/org/springframework/test/web/server/samples/context/WebConfig.java)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-09-17T18:56:49.113

这件事发生在你刚开始的时候。只需将 index.html（或任何欢迎文件）放在 WEB-INF 下。这可以通过简单的拖放轻松完成。当您在 STS 中展开文件夹时，可能看起来欢迎文件列在 WEB-INF 下，而实际上并非如此。[在此处输入图像描述](http://i.stack.imgur.com/Lud3s.jpg)

# c++ - 使用 printf 的 ostream 实现

> ID：15832772
> 
> 赞同：-1
> 
> 时间：2013-04-05T11:28:31.713
> 
> 标签：c++, printf, ostream

如何仅`ostream`使用从头开始实现 -like 类`printf`？
对我来说，问题在于选择格式字符串，这实际上等于识别输入的类型和处理精度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:30:56.933

我假设您的意思是“类似类”`operator<<`的重载。`ostream`仅通过重载就很容易识别函数参数的类型。例如，您可能有：

```
ostreamlike& ostreamlike::operator<<(int x)
{
  printf("%d", x);
  return *this;
}

ostreamlike& ostreamlike::operator<<(float x)
{
  printf("%f", x);
  return *this;
} 
```

输出的格式由选择的重载决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:40:47.883

想想，可能是这样的

```
#include <stdio.h>

class ostreamlike {
public:
  ostreamlike(FILE* f_): f(f_) {}

  ostreamlike& write(int n) {
    fprintf(f, "%d", n);
    return *this;
  }

  ostreamlike& write(const char* n) {
    fprintf(f, "%s", n);
    return *this;
  }

private:
  FILE* f;
};

// operator for types that is supported ostreamlike internally
template <typename type>
ostreamlike& operator<<(ostreamlike& stream, const type& data) {
  return stream.write(data);
}

// external implementations to write using ostreamlike
ostreamlike& operator<<(ostreamlike& stream, bool data) {
  return stream.write(data ? "true" : "false");
}

int main() {
  ostreamlike s(stdout);
  s << "hello " << 1 << " : " << true << "\n";
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T11:34:44.340

这取决于`ostream`你想要接近真实的程度。假设你想正确地做到这一点，你还需要一个`streambuf`派生类。`ostream`仅进行格式化，实际的 I/O 由内部`streambuf`派生类完成。由于`streambuf`没有未格式化的 I/O，您需要使用`fwrite`not `printf`。

如果您的目标只是在已经存在的`FILE*`指针上执行 I/O，那么这就是要走的路。你从 say 派生一个类`streambuf`，`streambuf_with_FILE`然后从`ostream`say派生另一个类`ostream_with_FILE`。`streambuf_with_FILE`覆盖适当的方法来执行实际的 I/O 并`ostream_with_FILE`具有一个内部`streambuf_with_FILE`对象。实际上只需要很少的代码。

# powershell - bat 文件为 win server 2012 安装 .net 3.5 框架

> ID：15832774
> 
> 赞同：5
> 
> 时间：2013-04-05T11:28:45.803
> 
> 标签：powershell, batch-file, .net-3.5, windows-server-2012, dotnetinstaller

我想制作一个 bat 文件以在 Windows Server 2012 上安装 .net Framework 3.5。我尝试过这样但没有成功：

```
cd /D %userprofile% 
C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe 
Import-Module ServerManager 
powershell -ImportSystemModules Add-WindowsFeature NET-Framework-Features 
```

似乎进入powershell控制台后最后2个命令没有执行。

有谁知道为什么会卡住？

或者是否有人有其他 bat 文件如何在 Windows Server 2012 中自动安装 .net 3.5？

经过更多尝试后，我让蝙蝠在手动运行时使用以下命令。

```
call C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe -ImportSystemModules Add-WindowsFeature NET-Framework-Features 
```

但是当我尝试从 dotnetInstaller 运行它时，相同的 bat 不再工作

```
 <component command="CMD.EXE /K &quot;#APPPATH\Install.net3.5.bat&quot;" command_silent="" command_basic="" uninstall_command="" uninstall_command_silent="" uninstall_command_basic="" returncodes_success="" returncodes_reboot="" disable_wow64_fs_redirection="False" id=".Net 3.5 SP1 Win8Server" display_name=".Net 3.5 SP1" uninstall_display_name="" os_filter="" os_filter_min="winServer2008R2" os_filter_max="" os_filter_lcid="" type="cmd" installcompletemessage="" uninstallcompletemessage="" mustreboot="False" reboot_required="" must_reboot_required="False" failed_exec_command_continue="" allow_continue_on_error="True" default_continue_on_error="False" required_install="True" required_uninstall="True" selected_install="True" selected_uninstall="True" note="" processor_architecture_filter="" status_installed="" status_notinstalled="" supports_install="True" supports_uninstall="False" show_progress_dialog="True" show_cab_dialog="True">
 <installedcheck path="SOFTWARE\Microsoft\NET Framework Setup\NDP\v3.5" fieldname="Install" fieldvalue="1" defaultvalue="False" fieldtype="REG_DWORD" comparison="match" rootkey="HKEY_LOCAL_MACHINE" wowoption="NONE" type="check_registry_value" description="Installed Check" />
      <installedcheck path="SOFTWARE\Microsoft\NET Framework Setup\NDP\v3.5" fieldname="SP" fieldvalue="1" defaultvalue="False" fieldtype="REG_DWORD" comparison="match" rootkey="HKEY_LOCAL_MACHINE" wowoption="NONE" type="check_registry_value" description="Installed Check" />
    </component> 
```

我收到此错误知道为什么吗？

术语“Add-WindowsFeature”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含 ap ath，请验证路径是否正确，然后重试。在 line:1 char:19 + Add-WindowsFeature <<<< -name net-framework-features + CategoryInfo : ObjectNotFound: (Add-WindowsFeature:String) [], CommandNotFoundException + FullyQualifiedErrorId : CommandNotFoundException

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T12:59:46.503

两种选择：

1) 使用脚本文件和 File 参数。

```
#############
## script.ps1
Import-Module ServerManager
Add-WindowsFeature NET-Framework-Features 
```

然后执行：

```
powershell -File c:\script.ps1 
```

2）使用命令参数：

```
powershell -Command "Import-Module ServerManager; Add-WindowsFeature NET-Framework-Features" 
```

在任何情况下，尽量避免使用 -ImportSystemModules 开关（在 v3 中已弃用），这只是矫枉过正。当您只需要 ServerManager 模块时，它将加载所有系统模块。如果您使用的是 v3，则 Import-Module 命令也是多余的。请参阅模块[自动加载功能](http://www.powershellmagazine.com/2012/09/27/cmdlet-discovery-and-module-auto-loading/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:34:03.100

我使它与这个蝙蝠一起工作：

```
call C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe -ImportSystemModules Add-WindowsFeature NET-Framework-Features 
```

在 dotnetInstaller 引导程序中：

```
<component command="Install.net3.5.bat" command_silent="" command_basic="" uninstall_command="" uninstall_command_silent="" uninstall_command_basic="" returncodes_success="" returncodes_reboot="" disable_wow64_fs_redirection="True" id=".Net 3.5 SP1 Win8Server" display_name=".Net 3.5 SP1" uninstall_display_name="" os_filter="" os_filter_min="winServer2008R2" os_filter_max="" os_filter_lcid="" type="cmd" installcompletemessage="" uninstallcompletemessage="" mustreboot="False" reboot_required="" must_reboot_required="False" failed_exec_command_continue="" allow_continue_on_error="True" default_continue_on_error="False" required_install="True" required_uninstall="True" selected_install="True" selected_uninstall="True" note="" processor_architecture_filter="" status_installed="" status_notinstalled="" supports_install="True" supports_uninstall="False" show_progress_dialog="True" show_cab_dialog="True">
 <installedcheck path="SOFTWARE\Microsoft\NET Framework Setup\NDP\v3.5" fieldname="Install" fieldvalue="1" defaultvalue="False" fieldtype="REG_DWORD" comparison="match" rootkey="HKEY_LOCAL_MACHINE" wowoption="NONE" type="check_registry_value" description="Installed Check" />
      <installedcheck path="SOFTWARE\Microsoft\NET Framework Setup\NDP\v3.5" fieldname="SP" fieldvalue="1" defaultvalue="False" fieldtype="REG_DWORD" comparison="match" rootkey="HKEY_LOCAL_MACHINE" wowoption="NONE" type="check_registry_value" description="Installed Check" />
    </component> 
```

似乎它以前不起作用，因为引导程序将 bat 进程作为 PS 不喜欢的 32 位启动。所以我把 disable_wow64_fs_redirection="True" 现在它作为 64 位进程运行 bat 并且它可以工作:)

谢谢大家的回复。我发布了答案可能会对其他人有所帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T12:28:47.543

这通过以下方式工作：

```
cd /D %userprofile% 
C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe -Command "Import-Module ServerManager; ImportSystemModules Add-WindowsFeature NET-Framework-Features"
pause 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T12:29:44.830

要使用 powershell 运行命令，请使用 -Command 参数，如下所示：

```
powershell.exe -command "&{Import-Module ServerManager; ImportSystemModules Add-WindowsFeature NET-Framework-Features}" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-04T22:23:53.200

转到命令提示符并输入以下内容：

> dism /online /enable-feature /featurename:NetFX3 /all /Source:d:\sources\sxs /LimitAccess

注意：来源应为 Windows 2012 安装光盘。就我而言，它位于 D：

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-07T05:59:25.417

你也可以使用[巧克力](https://chocolatey.org)：

```
choco install dotnet3.5 
```

# android - 捕获的图像旋转 90 度

> ID：15832779
> 
> 赞同：0
> 
> 时间：2013-04-05T11:29:04.590
> 
> 标签：android

我编写了一个应用程序来捕获图像。问题是图像在捕获后旋转了 90 度。我已经设置了

```
camera.setDisplayOrientation(NINTY_DEGREES); 
```

但这只会影响`SurfaceView`. 真正的问题是我从相机得到的字节被翻转了。为什么会这样？有没有可以设置在捕获前翻转它的设置？

当图像被捕获时，我的活动订阅了一个事件。这是我在`byte[]`填写时注册的方式：

```
camera.takePicture(null, null, new PictureCallback() {
            @Override
            public void onPictureTaken(byte[] data, Camera camera) {
                if (null != callback)
                    callback.onJpegPictureTaken(data, camera);
            }
        }); 
```

在我的`Activity`

```
public class History extends BaseWindow implements OnClickListener, CaptureImageCallback 
```

及相关方法：

```
@Override
public void onJpegPictureTaken(byte[] data, Camera camera) {
        Intent i = new Intent(this, ImageEditing.class);
        i.putExtra("image", data);
        startActivity(i);
} 
```

可以看到`data`包含图像数据的参数，这个字节数组旋转了 90 度。我当然可以旋转`ImageView`90 度，但由于我将使用其他系统，例如自制的 Web 服务，我需要将此热修复应用到每个外部系统。我怎样才能纠正这种旋转？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:40:40.737

您可以获得捕获图像的“角度”并按角度旋转。

```
ExifInterface exif = new ExifInterface(imagePath);
int orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION,ExifInterface.ORIENTATION_NORMAL);

int angle = 0;

if (orientation == ExifInterface.ORIENTATION_ROTATE_90) {
    angle = 90;
} else if (orientation == ExifInterface.ORIENTATION_ROTATE_180) {
    angle = 180;
} else if (orientation == ExifInterface.ORIENTATION_ROTATE_270) {
    angle = 270;
}

Log.d("Tag", "Angle: " + angle);

Matrix mat = new Matrix();
mat.postRotate(angle);

if (angle != 0)
    Bitmap bitmap2 = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(),bitmap.getHeight(), mat, true); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-05T11:32:25.993

顾名思义`setDisplayOrientation()`，仅供**展示**。[医生说](http://developer.android.com/reference/android/hardware/Camera.html#setDisplayOrientation%28int%29)：

> 这不影响onPreviewFrame(byte[], Camera)、JPEG图片或录制视频传入的字节数组的顺序

所以如果你想保存旋转的图像，你需要在保存之前自己旋转它。

# java - 在Java中更改Windows通知区域中的图标名称

> ID：15832791
> 
> 赞同：2
> 
> 时间：2013-04-05T11:29:47.600
> 
> 标签：java, swing, system-tray, trayicon

我创建了一个支持系统托盘通知的程序。我为我的系统托盘设置了一个带有工具提示和气球消息的图标。当我启动程序时，图标出现在 Windows 的通知区域图标中，旁边的默认名称是 Java(TM) Platform SE Binary。我可以将此默认名称更改为自定义名称，例如我的程序名称吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T12:35:23.533

请也用这段代码引起

```
import java.awt.AWTException;
import java.awt.Color;
import java.awt.Component;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GraphicsConfiguration;
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import java.awt.Image;
import java.awt.MenuItem;
import java.awt.PopupMenu;
import java.awt.SystemTray;
import java.awt.TrayIcon;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.AbstractAction;
import javax.swing.Action;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.SwingUtilities;
import javax.swing.Timer;
import javax.swing.UIManager;

public class ActiveTray {

    private SystemTray tray;
    private TrayIcon trayIcon;
    private Icon icon, icon1;
    private Image image, image1;
    private Timer timer;

    public ActiveTray() {
        if (SystemTray.isSupported() == false) {
            System.err.println("No system tray available");
            return;
        }
        tray = SystemTray.getSystemTray();
        PropertyChangeListener propListener = new PropertyChangeListener() {

            public void propertyChange(PropertyChangeEvent evt) {
                TrayIcon oldTray[] = (TrayIcon[]) evt.getOldValue();
                TrayIcon newTray[] = (TrayIcon[]) evt.getNewValue();
                System.out.println(oldTray.length + " / " + newTray.length);
            }
        };
        tray.addPropertyChangeListener("trayIcons", propListener);
        icon = new BevelArrowIcon(BevelArrowIcon.UP, false, false);
        image = iconToImage(icon);
        icon1 = new BevelArrowIcon(BevelArrowIcon.DOWN, false, false);
        image1 = iconToImage(icon1);
        PopupMenu popup = new PopupMenu();
        MenuItem item = new MenuItem("Hello, World");
        trayIcon = new TrayIcon(image, "Tip Text", popup);
        ActionListener menuActionListener = new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                trayIcon.displayMessage("Good-bye", "Cruel World",
                        TrayIcon.MessageType.WARNING);
            }
        };
        item.addActionListener(menuActionListener);
        popup.add(item);
        ActionListener actionListener = new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                tray.remove(trayIcon);
            }
        };
        trayIcon.addActionListener(actionListener);
        try {
            tray.add(trayIcon);
            start();
        } catch (AWTException ex) {
            Logger.getLogger(ActiveTray.class.getName()).log(Level.SEVERE, null, ex);
        }

    }

    private void start() {
        timer = new javax.swing.Timer(125, updateCol());
        timer.start();
        trayIcon.displayMessage(null, "  Aplication Loaded  ", TrayIcon.MessageType.NONE);
    }

    private Action updateCol() {
        return new AbstractAction("Icon load action") {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                Runnable doRun = new Runnable() {

                    @Override
                    public void run() {
                        Image img = trayIcon.getImage();
                        if (img == image) {
                            trayIcon.setImage(image1);
                        } else {
                            trayIcon.setImage(image);
                        }
                    }
                };
                SwingUtilities.invokeLater(doRun);
            }
        };
    }

    public static void main(String args[]) {
        ActiveTray activeTray = new ActiveTray();
    }

    static Image iconToImage(Icon icon) {
        if (icon instanceof ImageIcon) {
            return ((ImageIcon) icon).getImage();
        } else {
            int w = icon.getIconWidth();
            int h = icon.getIconHeight();
            GraphicsEnvironment ge =
                    GraphicsEnvironment.getLocalGraphicsEnvironment();
            GraphicsDevice gd = ge.getDefaultScreenDevice();
            GraphicsConfiguration gc = gd.getDefaultConfiguration();
            BufferedImage image = gc.createCompatibleImage(w, h);
            Graphics2D g = image.createGraphics();
            icon.paintIcon(null, g, 0, 0);
            g.dispose();
            return image;
        }
    }

    static class BevelArrowIcon implements Icon {

        public static final int UP = 0;         // direction
        public static final int DOWN = 1;
        private static final int DEFAULT_SIZE = 16;
        private Color edge1;
        private Color edge2;
        private Color fill;
        private int size;
        private int direction;

        public BevelArrowIcon(int direction, boolean isRaisedView,
                boolean isPressedView) {
            if (isRaisedView) {
                if (isPressedView) {
                    init(UIManager.getColor("controlLtHighlight"),
                            UIManager.getColor("controlDkShadow"),
                            UIManager.getColor("controlShadow"),
                            DEFAULT_SIZE, direction);
                } else {
                    init(UIManager.getColor("controlHighlight"),
                            UIManager.getColor("controlShadow"),
                            UIManager.getColor("control"),
                            DEFAULT_SIZE, direction);
                }
            } else {
                if (isPressedView) {
                    init(UIManager.getColor("controlDkShadow"),
                            UIManager.getColor("controlLtHighlight"),
                            UIManager.getColor("controlShadow"),
                            DEFAULT_SIZE, direction);
                } else {
                    init(UIManager.getColor("controlShadow"),
                            UIManager.getColor("controlHighlight"),
                            UIManager.getColor("control"),
                            DEFAULT_SIZE, direction);
                }
            }
        }

        public BevelArrowIcon(Color edge1, Color edge2, Color fill,
                int size, int direction) {
            init(edge1, edge2, fill, size, direction);
        }

        @Override
        public void paintIcon(Component c, Graphics g, int x, int y) {
            switch (direction) {
                case DOWN:
                    drawDownArrow(g, x, y);
                    break;
                case UP:
                    drawUpArrow(g, x, y);
                    break;
            }
        }

        @Override
        public int getIconWidth() {
            return size;
        }

        @Override
        public int getIconHeight() {
            return size;
        }

        private void init(Color edge1, Color edge2, Color fill,
                int size, int direction) {
            edge1 = Color.red;
            edge2 = Color.blue;
            this.edge1 = edge1;
            this.edge2 = edge2;
            this.fill = fill;
            this.size = size;
            this.direction = direction;
        }

        private void drawDownArrow(Graphics g, int xo, int yo) {
            g.setColor(edge1);
            g.drawLine(xo, yo, xo + size - 1, yo);
            g.drawLine(xo, yo + 1, xo + size - 3, yo + 1);
            g.setColor(edge2);
            g.drawLine(xo + size - 2, yo + 1, xo + size - 1, yo + 1);
            int x = xo + 1;
            int y = yo + 2;
            int dx = size - 6;
            while (y + 1 < yo + size) {
                g.setColor(edge1);
                g.drawLine(x, y, x + 1, y);
                g.drawLine(x, y + 1, x + 1, y + 1);
                if (0 < dx) {
                    g.setColor(fill);
                    g.drawLine(x + 2, y, x + 1 + dx, y);
                    g.drawLine(x + 2, y + 1, x + 1 + dx, y + 1);
                }
                g.setColor(edge2);
                g.drawLine(x + dx + 2, y, x + dx + 3, y);
                g.drawLine(x + dx + 2, y + 1, x + dx + 3, y + 1);
                x += 1;
                y += 2;
                dx -= 2;
            }
            g.setColor(edge1);
            g.drawLine(xo + (size / 2), yo + size - 1, xo
                    + (size / 2), yo + size - 1);
        }

        private void drawUpArrow(Graphics g, int xo, int yo) {
            g.setColor(edge1);
            int x = xo + (size / 2);
            g.drawLine(x, yo, x, yo);
            x--;
            int y = yo + 1;
            int dx = 0;
            while (y + 3 < yo + size) {
                g.setColor(edge1);
                g.drawLine(x, y, x + 1, y);
                g.drawLine(x, y + 1, x + 1, y + 1);
                if (0 < dx) {
                    g.setColor(fill);
                    g.drawLine(x + 2, y, x + 1 + dx, y);
                    g.drawLine(x + 2, y + 1, x + 1 + dx, y + 1);
                }
                g.setColor(edge2);
                g.drawLine(x + dx + 2, y, x + dx + 3, y);
                g.drawLine(x + dx + 2, y + 1, x + dx + 3, y + 1);
                x -= 1;
                y += 2;
                dx += 2;
            }
            g.setColor(edge1);
            g.drawLine(xo, yo + size - 3, xo + 1, yo + size - 3);
            g.setColor(edge2);
            g.drawLine(xo + 2, yo + size - 2, xo + size - 1, yo + size - 2);
            g.drawLine(xo, yo + size - 1, xo + size, yo + size - 1);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-14T04:25:45.290

我今天遇到了同样的问题。正如 Petesh 在评论中提到的，我使用自定义启动器来解决这个问题。

## [启动4j](http://launch4j.sourceforge.net/index.html)

> Launch4j 是一个跨平台工具，用于将作为 jar 包分发的 Java 应用程序打包到轻量级 Windows 本机可执行文件中。

以下是我创建它的步骤：

1.  基本的
    1.  设置输出文件名
    2.  选择“不包装罐子，仅启动”
    3.  输入 .jar 文件的相对路径
        （我建议使用相同的文件夹以及 .exe 和 .jar 文件）
2.  类路径
    这是必要的，因为我们不会通过 javaw.exe 或 java.exe 启动，
    只需导航到“主类”下的 .jar 文件就足够了，
    您应该看到主类出现并且列表应该为空
3.  Header
    Header Type: ***JNI GUI (beta)***，来自文档：

    > 当使用 JNI 标头时，JVM 由 launch4j 包装器可执行文件直接创建，而不是运行 java/javaw 启动器。进程名称将与包装器相同。

4.  JRE
    1.  输入适当的最低 JRE 版本
    2.  ***选择 32-bit only*** , JNI headers 当前与 64-Bit JRE 不兼容
5.  版本信息
    1.  检查添加版本信息
    2.  填写所有必填字段***文件描述***
        条目 显示在 Windows 通知中

 *现在剩下要做的就是保存配置并构建。你会看到这样的警告：

> 警告：JNI 标头中未实现某些功能，请参阅文档。

这些限制可以在 <headerType> 下[找到。](http://launch4j.sourceforge.net/docs.html#Configuration_file)

您当然可以使用完全不同的选项，例如捆绑 JRE 或将 .jar 捆绑到 .exe 文件中。*

# json - struts2 包扩展 json

> ID：15832794
> 
> 赞同：1
> 
> 时间：2013-04-05T11:29:56.027
> 
> 标签：json, struts2, struts2-json-plugin

我有一个包含许多操作的包，它扩展了 tiles-default 包。现在我有一个要求，这些操作应该返回 json 结果而不是图块。

我可以使用相同的操作和包来返回两种类型的结果吗？有什么办法，这个包同时扩展了“json-default”和“tiles-default”？

```
<package name="deposit" namespace="/deposit" extends="tiles-default"> 
```

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:34:51.217

当然为什么不。用于`,`分隔包。

```
<package name="deposit" namespace="/deposit" extends="tiles-default,json-default"> 
```

# jquery - 自定义 CSS 不会在 jquery 移动页面上呈现

> ID：15832795
> 
> 赞同：3
> 
> 时间：2013-04-05T11:29:56.873
> 
> 标签：jquery, html, css, jquery-mobile

有人可以启发我为什么我的 CSS 不显示。我在一个文件中有一个自定义 css，只有这一行：

我的自己的样式表：

```
 .test {
    color: #f00;  /* Red */
} 
```

还有一个像这样的简单页面：

```
<!DOCTYPE html>
  <html>
    <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="widdiv=device-widdiv, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <title>
    </title>
    <link rel="stylesheet" href="css/jquery.mobile-1.3.0.min.css" />
    <link rel="stylesheet" href="css/my_own_stylesheet.css" />
    <script src="js/jquery-1.9.1.min.js">
    </script>
    <script src="js/jquery.mobile-1.3.0.min.js">
    </script>
    <script type="text/javascript" src="cordova-2.5.0.js">
    </script>
   </head>
   <body>
    <!-- Home -->
    <div data-role="page" id="sedelPage">
        <div data-diveme="a" data-role="header">
            <h3>
                Sedel
            </h3>
        </div>
        <div data-role="content">
          <h2 class="test">Test</h2>       <!-- this is supposed to be red -->

        </div> <!--content-->
    </div><!--page-->

  </body>
</html> 
```

我想不通。难道不能在 jquery-mobile 中为自己的元素设置样式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T11:30:34.550

你需要像这样使用它：

```
.test {
    color: #f00 !important;  /* Red */
} 
```

因为标题标签已经设置了**颜色**样式，你需要用**!important**覆盖它。

也可能有另一种可能。假设这是您的第二页。当 jQuery Moible 在第一个页面（使用 ajax）之后加载页面时，它只会加载其 BODY 内容，这意味着在 HEAD 中初始化的任何 js 或 css 文件（如果在第一次加载的 HTML 中未初始化）将被忽略。所以你所有的自定义 CSS 将永远不会被应用。

工作示例：http: [//jsfiddle.net/Gajotres/yKE8W/](http://jsfiddle.net/Gajotres/yKE8W/)

使用您自己的代码制作的示例：

```
<!DOCTYPE html>
  <html>
    <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="widdiv=device-widdiv, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <title>
    </title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <style>
        .test {
            color: #f00 !important;  /* Red */
        }
    </style>
    <script src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js">
    </script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>  
   </head>
   <body>
    <!-- Home -->
    <div data-role="page" id="sedelPage">
        <div data-diveme="a" data-role="header">
            <h3>
                Sedel
            </h3>
        </div>
        <div data-role="content">
          <h2 class="test">Test</h2>       <!-- this is supposed to be red -->

        </div> <!--content-->
    </div><!--page-->

  </body>
</html> 
```

如果您想了解更多信息，请查看我的其他答案：**[Why I have to put all the script to index.html in jquery mobile](https://stackoverflow.com/a/15806954/1848600)**

# java - 将 ACE 与 WT 一起使用

> ID：15832798
> 
> 赞同：2
> 
> 时间：2013-04-05T11:30:00.470
> 
> 标签：java, c++, html, ajax, wt

**更新 3** 下面的最终工作代码。您需要 src 文件夹中的 ace.js！它不适用于库，您需要他们网站上的预打包版本。

```
WText *editor = new WText(root());
editor->setText("function(){\n hello.abc();\n}\n");
editor->setInline(false); 
```

上面的代码可以设置ACE窗口的内容。

```
MyClass::MyClass(const WEnvironment& env)
: WApplication(env)
{
wApp->require("ace-builds/src/ace.js");
// A WContainerWidget is rendered as a div
WContainerWidget *editor = new WContainerWidget(root());
editor->resize(500, 500);

std::string editor_ref = editor->jsRef(); // is a text string that will be the element when executed in JS

std::string command = 
  editor_ref + ".editor = ace.edit(" + editor_ref + ");" +
  editor_ref + ".editor.setTheme(\"ace/theme/monokai\");" +
  editor_ref + ".editor.getSession().setMode(\"ace/mode/javascript\");";

editor->doJavaScript(command);

JSignal <std::string> *jsignal = new JSignal<std::string>(editor, "textChanged");
jsignal->connect(this, &MyClass::textChanged);

WPushButton *b = new WPushButton("Save", root());

command = "function(object, event) {" +
  jsignal->createCall(editor_ref + ".editor.getValue()") +
  ";}";

b->clicked().connect(command);
}

void MyClass::textChanged(std::string incoming)
{

} 
```

**更新 2** 这是我的项目在 atm 的样子，仍然得到一个白色屏幕，右上角有来自 WT 的红色“正在加载...”消息。更多注释如下。

```
MyClass::MyClass(const WEnvironment& env)
: WApplication(env)
{
wApp->require("lib/ace/ace.js");
// A WContainerWidget is rendered as a div
WContainerWidget *editor = new WContainerWidget(root());
editor->resize(500, 500);

std::string editor_ref = editor->jsRef(); // is a text string that will be the element when executed in JS

std::string command = 
  editor_ref + ".editor = ace.edit(" + editor_ref + ");" +
  editor_ref + ".editor.setTheme(\"ace/theme/monokai\");" +
  editor_ref + ".editor.getSession().setMode(\"ace/mode/javascript\");";

editor->doJavaScript(command);

JSignal <std::string> *jsignal = new JSignal<std::string>(editor, "textChanged");
jsignal->connect(this, &MyClass::textChanged);

WPushButton *b = new WPushButton("Save", root());

command = "function(object, event) {" +
  jsignal->createCall(editor_ref + ".editor.getValue()") +
  ";}";

b->clicked().connect(command);
}

void MyClass::textChanged(std::string incoming)
{

} 
```

"command" 变量在用于 editor->doJavaScript(command) 时等于以下内容

```
"Wt3_3_0.$('oy4ycjy').editor = ace.edit(Wt3_3_0.$('oy4ycjy'));Wt3_3_0.$('oy4ycjy').editor.setTheme('ace/theme/monokai');Wt3_3_0.$('oy4ycjy').editor.getSession().setMode('ace/mode/javascript');" 
```

"command" 变量在用于 b->clicked().connect(command) 时等于以下内容；

```
"function(object, event) {Wt.emit('oy4ycjy','textChanged',Wt3_3_0.$('oy4ycjy').editor.getValue());;}" 
```

**更新 1**

将建议的代码添加到我的构造函数中，但是页面不会从纯白屏幕更改。我在这个 WT 项目中什么也没做，只有这段代码在运行。

```
wApp->require("lib/ace/ace.js");
// A WContainerWidget is rendered as a div
WContainerWidget *editor = new WContainerWidget(root());
std::string editor_ref = editor->jsRef(); // is a text string that will be the element when executed in JS
editor->doJavaScript(
  editor_ref + ".editor = ace.edit('" + editor_ref + "');" +
  editor_ref + ".editor.setTheme('ace/theme/monokai');" +
  editor_ref + ".editor.getSession().setMode('ace/mode/javascript');"
  ); 
```

editor_ref 的值是 "Wt3_3_0.$('oumvrgm')" 减去引号。

还尝试添加下面的代码，页面仍然空白。

```
JSignal <std::string> *jsignal = new JSignal<std::string>(editor, "textChanged");
jsignal->connect(this, &MyClass::textChanged);

WPushButton *b = new WPushButton("Save", root());
b->clicked().connect("function(object, event) {" +
  jsignal->createCall(editor->jsRef() + ".editor.getValue()") +
  ";}"); 
```

我还发现注释掉

```
editor_ref + ".editor = ace.edit('" + editor_ref + "');" + 
```

使按钮出现，但屏幕右上角有一个红色的“正在加载...”注释，因此 WT 正在等待某些东西。

我目前将 textChanged 作为无操作功能。

**原帖**

所以，我的问题是这个。如何在 WT [http://www.webtoolkit.eu/wt中获得 ACE](http://www.webtoolkit.eu/wt) [http://ace.ajax.org/#nav=about](http://ace.ajax.org/#nav=about)。更具体地说，在 WT Wt::WTextArea 或 Wt::WTabWidget 中的 ACE，文本区域将是首选。这几天我一直在尝试这样做，但并没有取得太大的成功。

我已经能够在 HTML 页面中嵌入 ACE 没有问题，因为他们的网站说“只需将其复制并粘贴到您的页面中”，这真的很简单。但是，我需要通过 WT 在本地将其加载到容器中。我将他们的存储库从 GIT 下载到我的机器并尝试使用

```
require("lib/ace/ace.js"); 
```

和

```
doJavaScript(...); 
```

各种命令都没有成功...我在 Java 和 HTML 方面的能力不如 C++，所以如果这涉及到很多 Java/HTML，我会要求尽可能多的细节。提前谢谢小伙伴们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:47:31.090

也许这会让你朝着正确的方向前进：

```
 wApp->require("lib/ace/ace.js")
// A WContainerWidget is rendered as a div
WContainerWidget *editor = new WContainerWidget(parent);
// editor->jsRef() is a text string that will be the element when executed in JS
editor->doJavaScript(
    editor->jsRef() + ".editor = ace.edit(" + editor->jsRef() + ");" +
    editor->jsRef() + ".editor.setTheme('ace/theme/monokai');" +
    editor->jsRef() + ".editor.getSession().setMode('ace/mode/javascript');"
  ); 
```

那应该装饰编辑器。Wt 不会自动将对 div 的修改发送到服务器，因此您可以通过 JSignal 手动执行此操作（从 JS 向 C++ 发出信号）：

```
 JSignal <std::string> *jsignal = new JSignal<std::string>(editor, "textChanged");
jsignal->connect(this, MyClass::textChanged);

WPushButton *b = new WPushButton("Save", parent);
b->clicked().connect("function(object, event) {" +
    jsignal->createCall(editor->jsRef() + ".editor.getValue()") +
  ";}"); 
```

（上面的代码未经测试，因此您可能需要稍作调整）

我在早期的 JWt (java) 项目中集成了 CodeMirror，如下所示：

```
 import eu.webtoolkit.jwt.WApplication;
import eu.webtoolkit.jwt.WContainerWidget;
import eu.webtoolkit.jwt.WTextArea;

public class CodeMirrorTextArea extends WContainerWidget {
        private WTextArea textArea;
        public CodeMirrorTextArea(WContainerWidget parent) {
                super(parent);

                textArea = new WTextArea(this);

                WApplication app = WApplication.getInstance();

                app.require(app.resolveRelativeUrl("codemirror-2.32/lib/codemirror.js"));
                app.require(app.resolveRelativeUrl("codemirror-2.32/mode/groovy/groovy.js"));

                //TODO:
                //We save the editor state to the text area on each key stroke,
                //it appears to be not a performance issue,
                //however it might very well become one when editing larger fragments of code.
                //A better solution would be to save this state to the text area only when
                //the form is submitted, currently this is not yet possible in Wt???.

                String js =
                        "var e = " + textArea.getJsRef() + ";" +
                        "var cm = CodeMirror.fromTextArea(e, {" +
                        "       onKeyEvent : function (editor, event) {" +
                    "           editor.save();" +
                    "   }," +
                        "       lineNumbers: true" +
                        "       });" +
                        "var self = " + getJsRef() + ";" +
                        "self.cm = cm;";

                this.doJavaScript(js);
        }

        public CodeMirrorTextArea() {
                this(null);
        }

        public void setText(String text) {
                textArea.setText(text);
        }

        public String getText() {
                return textArea.getText();
        }

        public void setMarker(int line, String htmlMarker) {
                String js =
                        "var self = " + getJsRef() + ";" +
                        "self.cm.setMarker(" + line + ", " + jsStringLiteral(htmlMarker +
"%N%") + ");";

                this.doJavaScript(js);
        }

        public void clearMarker(int line) {
                String js =
                        "var self = " + getJsRef() + ";" +
                        "self.cm.clearMarker(" + line + ");";

                this.doJavaScript(js);
        }
} 
```

# ios - 当 [int] = [float] + [int] 时舍入（Obj-C，iOS？）

> ID：15832804
> 
> 赞同：2
> 
> 时间：2013-04-05T11:30:20.407
> 
> 标签：ios, objective-c, rounding, floating-point-precision

在这种情况下：

```
float a = 0.99999f;
int b = 1000;
int c = a + b; 
```

结果`c = 1001`. 我发现它发生是因为`b`转换为浮点数（特定于 iOS），然后`a + b`没有足够的精度，`1000.9999`并且（**为什么？**）被四舍五入到更高的值。如果我们得到`a`-理论上正确的行为。`0.999f``c = 1000`

所以我的问题是为什么浮点数被四舍五入到更高的值？这种行为（或约定）在哪里描述？

我在 iPhone Simulator、Apple LLVM 4.2 编译器上对此进行了测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T12:06:21.687

在`int c = a + b`中，先将整数`b`转换为浮点数，然后将 2 个浮点数相加，然后将结果截断为整数。

默认的浮点舍入模式是`FE_TONEAREST`，表示加法的结果

```
0.99999f + 1000f 
```

是可以表示为浮点数的***最接近的***`1001f`数字，即 number 。然后将此浮点数截断为整数`c = 1001`。

如果更改舍入模式

```
#include <fenv.h>
fesetround(FE_DOWNWARD); 
```

然后加法的结果向下四舍五入（大约`1000.99993f`），你会得到`c = 1000`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:55:22.490

原因是当您添加 1000 时，您会得到 8 个总小数位精度，但 IEEE 浮点数仅支持 7 位数字。

# asp.net - 访问表 aspnet_Users 以更新数据

> ID：15832807
> 
> 赞同：0
> 
> 时间：2013-04-05T11:30:33.557
> 
> 标签：asp.net, sql, umbraco, membership

我试图使用 Chris S 的解决方案来更新 aspnet_Users 表中的用户名 - 此处描述的解决方案：[Is it possible to change the username with the Membership API](https://stackoverflow.com/questions/1001491/is-it-possible-to-change-the-username-with-the-membership-api)

它工作了一次然后停止了，现在我收到一条错误消息：

```
Exception Details: System.Data.SqlClient.SqlException: Invalid object name 'aspnet_Users' 
```

我仍然可以创建用户和他的个人资料，只是无法使用我自己的查询访问 aspnet_Users。

创建用户并通过库 API 更新它可以正常工作，这意味着表 aspnet_Users 存在，我只是无法用自己的查询访问它。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T10:13:53.753

我确实没有 aspnet_Users 表。相反，在 umbraco db 中，成员被写入 cmsMembers 表，这实际上我正在使用新成员的信息进行更新。

# ruby-on-rails - 在多个条件下查询 mongoid 搜索

> ID：15832818
> 
> 赞同：0
> 
> 时间：2013-04-05T11:30:53.420
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongodb, mongoid

我的模型是这样的

```
def self.search(search)
    if search
    self.full_text_search(search)
    else
    scoped
    end
   end 
```

但我也需要添加这个

```
 self.or({start_date: /#{Regexp.escape(search)}/i},{end_date: /#{Regexp.escape(search)}/i}) 
```

在上面的搜索中。我怎么能在上面的搜索中加入这两个条件。这两个查询独立工作正常。但我需要让他们联合起来。任何有关工作示例的帮助都是有帮助的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:51:05.043

您可以使用 merge 方法加入两个 mongoid 标准：

```
q1 = self.scope
q2 = self.or(...)

result = q1.merge(q2) 
```

以下是相关文档：

[http://rdoc.info/github/mongoid/mongoid/master/Mongoid/Criteria#merge-instance_method](http://rdoc.info/github/mongoid/mongoid/master/Mongoid/Criteria#merge-instance_method)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:10:56.590

```
def self.search(search)
    if search
    q1 = self.full_text_search(search)
    q2 = self.or({start_date: /#{Regexp.escape(search)}/i},{end_date: /#{Regexp.escape(search)}/i})
    result = q1.merge(q2)
    return result
    else
    scoped
    end
   end 
```

这就是我所做的，它已经解决了。谢谢@cpuguy83

# javascript - 在 Jquery 选项卡式窗格中显示谷歌地图

> ID：15832819
> 
> 赞同：0
> 
> 时间：2013-04-05T11:30:55.063
> 
> 标签：javascript, jquery, codeigniter-2

谁能帮我在 jquery 选项卡式窗格中显示谷歌地图！我正在使用 codigniter，我从控制器文件中获取纬度和对数。

我担心地图没有正确显示在选项卡窗格中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:46:22.473

你听说过静态地图 api 吗？您可以使用它从谷歌地图中创建图像。

在此处阅读有关它的更多信息[https://developers.google.com/maps/documentation/imageapis/](https://developers.google.com/maps/documentation/imageapis/)

我试图在选项卡中实现它并且效果很好。在此处查看此示例[http://jsfiddle.net/Z3Lyu/](http://jsfiddle.net/Z3Lyu/)

类似下面的 Seomthing 将创建地图

```
<img src="http://maps.googleapis.com/maps/api/staticmap?center=-15.800513,-47.91378&zoom=11&size=200x200&sensor=false"> 
```

# iphone - 如何在 iPhone 中使用 AVCaptureSession 编辑或绘制拍摄的照片

> ID：15832823
> 
> 赞同：0
> 
> 时间：2013-04-05T11:30:57.963
> 
> 标签：iphone, objective-c, uiimageview, camera

我正在开发一个应用程序，用户必须在其中捕获建筑物位置的故障照片。拍摄照片后，用户可以在照片下方发表评论，也可以在照片上画出箭头或圆圈（例如windows电脑中的绘图软件）以显示故障。

应用商店“Penultimate”上有一款应用。我想为我的应用程序提供类似的功能。

有谁知道如何做到这一点？提前致谢。

# php - 如何在我的 Wordpress 网站上模拟 HTTP 500 错误？

> ID：15832824
> 
> 赞同：1
> 
> 时间：2013-04-05T11:31:03.893
> 
> 标签：php, wordpress, .htaccess, internal-server-error

我想模拟这个错误，这样我就可以检查是否显示了自定义 HTTP 500 页面，而不是默认页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:35:01.620

在文档根目录中抛出一个带有一些奇怪符号的 .htaccess 并调用该页面

如果你已经有一个 .htaccess，你可以打破 WordPress 的重写规则之一只要确保你知道你打破了什么哈哈

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:35:15.407

嗯，据我所知，您不能在 wordpress 上**自定义500 错误页面。**

但是在你的 .htaccess 上试一试，让我们知道；）

```
ErrorDocument 500 /500.shtml 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T11:32:45.700

如果您故意破坏站点上的某些代码，它应该显示 500 页面。

# internet-explorer-6 - 带有组合框和 IE6 的 Wicket 自动完成功能

> ID：15832828
> 
> 赞同：0
> 
> 时间：2013-04-05T11:31:25.117
> 
> 标签：internet-explorer-6, wicket, wicket-6

我有一个表格，其中有 AutoCompleteTextField 和两个组合框（检票口中的 DropDowns）。

当显示自动完成下拉菜单时，组合框在 IE6 中隐藏。

![使用 AutoCompleteTextField 在表单中隐藏组合框](https://i.stack.imgur.com/Pxk1W.png)

我的测试页代码是：

```
package net.betlista;

import java.util.Iterator;
import java.util.LinkedList;
import java.util.List;
import java.util.Locale;

import org.apache.wicket.Session;
import org.apache.wicket.extensions.ajax.markup.html.autocomplete.AutoCompleteTextField;
import org.apache.wicket.markup.html.WebPage;
import org.apache.wicket.markup.html.form.DropDownChoice;
import org.apache.wicket.markup.html.form.TextField;
import org.apache.wicket.model.Model;

public class AutoCompleteAndDropDownTestPage extends WebPage {

    public AutoCompleteAndDropDownTestPage() {
        final DropDownChoice<Integer> drop1 = new DropDownChoice<Integer>("drop1", getNewList(15));
        drop1.setOutputMarkupId(true);
        final DropDownChoice<Integer> drop2 = new DropDownChoice<Integer>("drop2", getNewList(10));
        drop2.setOutputMarkupId(true);

        Session.get().setLocale(Locale.ENGLISH);
        final AutoCompleteTextField<Integer> auto = new AutoCompleteTextField<Integer>("auto", new Model<Integer>(null)) {
            @Override
            protected Iterator<Integer> getChoices(final String input) {
                return getNewList(20).iterator();
            }
        };
        add(auto);

        add(drop1);
        add(drop2);
        add(new TextField<String>("text"));
    }

    private static List<Integer> getNewList(final int upTo) {
        final LinkedList<Integer> list = new LinkedList<Integer>();
        for (int i = 0; i < upTo; i++) {
            list.add(i);
        }
        return list;
    }
} 
```

测试页标记是

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <title>Insert title here</title>
        </head>
    <body>

        <form>
            <input type="text" wicket:id="auto"/><br>
            <select wicket:id="drop1"></select><br>
            <select wicket:id="drop2"></select><br>
            <input type="text" wicket:id="text"/><br>
        </form>

    </body>
</html> 
```

Wicket 不支持 IE6，所以我正在寻找解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T15:44:05.883

您应该尝试升级到 6.7.0，此问题已修复：[https ://issues.apache.org/jira/browse/WICKET-4893](https://issues.apache.org/jira/browse/WICKET-4893)

# oauth-2.0 - 没有 Gplus 按钮的 Google oAuth2 和 OpenId (Java)

> ID：15832830
> 
> 赞同：1
> 
> 时间：2013-04-05T11:31:26.017
> 
> 标签：oauth-2.0, openid, google-api-java-client, openid4java, jopenid

我想在 Java 中创建一个使用 Google 服务进行初始身份验证和 API 调用的 Web 应用程序。（例如谷歌日历）

我想远离 Google Apps Engine，因为它产生的开销以及 GAE 项目的要求。除此之外，我想避免使用 Google plus 登录按钮，因为它不是自定义品牌的。

对于身份验证，我想使用 OpenId，对于访问 Google API，我想使用 oAuth2。

目前我有一个使用最新的 oAuth2 库和代码的工作项目： [https ://code.google.com/p/google-api-java-client/wiki/OAuth2](https://code.google.com/p/google-api-java-client/wiki/OAuth2)

我正在使用轻量级 OpenId 库 JOpenId 进行 OpenId 身份验证。

该组合可用于成功进行身份验证，但我有两个主要问题：

*   JOpenId 没有积极维护超过 2 年。认证机制过时且不完整（基于项目的issue部分）
*   在认证过程中，用户需要选择自己的google账号并授予两次权限。这会让用户感到困惑，如果用户在此过程中选择了两个不同的帐户，这可能会成为问题。

我已经将 Step2 ( [http://code.google.com/p/step2/](http://code.google.com/p/step2/) ) 视为结合 Oauth2 和 OpenId 的混合解决方案，但该项目非常臃肿，包含一个大型 OpenId4Java 库、GAE 东西并且它使用 maven不再在线的依赖项（例如 Guice）

是否有其他更清洁的解决方案可以满足此项目要求？（最好能结合OpenId和OAuth2的库，还在维护）

# ios - 如何在其蒙版周围绘制 CALayer 边框？

> ID：15832831
> 
> 赞同：18
> 
> 时间：2013-04-05T11:31:29.647
> 
> 标签：ios, objective-c, calayer, mask

所以，我有一个`CALayer`，它有一个蒙版，我想在这个图层的蒙版周围添加边框。例如，我为图层设置了三角形蒙版，并且我希望在该图层周围设置边框。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2017-06-30T14:40:41.530

斯威夫特 4

[![在此处输入图像描述](https://i.stack.imgur.com/eNExf.png)](https://i.stack.imgur.com/eNExf.png)

```
class CustomView: UIView {
override func draw(_ rect: CGRect) {
    super.draw(rect)
    self.backgroundColor = UIColor.black

    //setup path for mask and border
    let halfHeight = self.bounds.height * 0.5
    let maskPath = UIBezierPath(roundedRect: self.bounds,
                                byRoundingCorners: [.topLeft, .bottomRight],
                                cornerRadii: CGSize(width: halfHeight,
                                                    height: halfHeight))

    //setup MASK
    self.layer.mask = nil;
    let maskLayer = CAShapeLayer()
    maskLayer.frame = self.bounds;
    maskLayer.path = maskPath.cgPath
    self.layer.mask = maskLayer

    //setup Border for Mask
    let borderLayer = CAShapeLayer()
    borderLayer.path = maskPath.cgPath
    borderLayer.lineWidth = 25
    borderLayer.strokeColor = UIColor.red.cgColor
    borderLayer.fillColor = UIColor.clear.cgColor
    borderLayer.frame = self.bounds
    self.layer.addSublayer(borderLayer)
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-11-23T03:07:42.003

我在 swift3 中的方法。

```
// Usage:
self.btnGroup.roundCorner([.topRight, .bottomRight], radius: 4.0, borderColor: UIColor.red, borderWidth: 1.0)

// Apply round corner and border. An extension method of UIView.
public func roundCorner(_ corners: UIRectCorner, radius: CGFloat, borderColor: UIColor, borderWidth: CGFloat) {
    let path = UIBezierPath.init(roundedRect: self.bounds, byRoundingCorners: corners, cornerRadii: CGSize(width: radius, height: radius))

    let mask = CAShapeLayer()
    mask.path = path.cgPath
    self.layer.mask = mask

    let borderPath = UIBezierPath.init(roundedRect: self.bounds, byRoundingCorners: corners, cornerRadii: CGSize(width: radius, height: radius))
    let borderLayer = CAShapeLayer()
    borderLayer.path = borderPath.cgPath
    borderLayer.lineWidth = borderWidth
    borderLayer.strokeColor = borderColor.cgColor
    borderLayer.fillColor = UIColor.clear.cgColor
    borderLayer.frame = self.bounds
    self.layer.addSublayer(borderLayer)
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-22T15:27:15.797

考虑这个示例代码：

```
- (void)drawRect:(CGRect)rect {
    CAShapeLayer *maskLayer = [CAShapeLayer layer];

    //Modify to your needs
    CGFloat maskInsetWidth = 5.0f;
    CGFloat maskInsetHeight = 5.0f;
    CGFloat maskCornerRadius = 5.0f;
    CGFloat borderWidth = 2.0f;
    UIColor *borderColor = [UIColor blackColor];

    CGRect insetRect = CGRectInset(self.bounds, maskInsetWidth, maskInsetHeight);
    insetRect.size.width = MAX(insetRect.size.width, 0);
    insetRect.size.height = MAX(insetRect.size.height, 0);

    CGPathRef path = [UIBezierPath bezierPathWithRoundedRect:insetRect cornerRadius:maskCornerRadius].CGPath;

    if (borderWidth > 0.0f && borderColor != nil) {
        CAShapeLayer *borderLayer = [CAShapeLayer layer];

        [borderLayer setPath:path];
        [borderLayer setLineWidth:borderWidth * 2.0f];
        [borderLayer setStrokeColor:borderColor.CGColor];
        [borderLayer setFillColor:[UIColor clearColor].CGColor];

        borderLayer.frame = self.bounds;
        [self.layer addSublayer:borderLayer];
    }
    [maskLayer setPath:path];
    [maskLayer setFillRule:kCAFillRuleEvenOdd];
    maskLayer.frame = self.bounds;
    [self.layer setMask:maskLayer];
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-05T13:10:01.107

一些建议：

*   使用不透明阴影而不是边框​​（您将获得模糊效果）。
*   创建另一个图层，将其背景颜色设置为您想要的边框颜色，使用比您已经必须模拟边框宽度的遮罩稍大的遮罩对其进行遮罩，并将其放在您的图层后面居中（可能不适用于每个形状）。
*   对您的蒙版图像进行形态学运算以计算边界，例如使用`vImageDilate`函数族（更复杂，并且可能会遇到性能问题）。
*   如果您知道形状并且可以用数学方法对其进行描述，请使用 Core Graphics 函数对其进行显式绘制和描边。
*   或者，在相同的情况下（数学上已知的形状），使用 a`CAShapeLayer`来绘制边框。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T13:24:26.013

在一般情况下，您不能轻松地在蒙版周围设置边框。这就像要求在图像的透明像素周围放置边框。也许它可以使用图像过滤器来完成。在某些更具体的情况下，如果您使用的是普通的 CAShapeLayer，那么这里是一个执行此操作的代码示例：

```
[CATransaction begin];
[CATransaction setDisableActions:YES];

CALayer *hostLayer = [CALayer layer];
hostLayer.backgroundColor = [NSColor blackColor].CGColor;
hostLayer.speed  = 0.0;
hostLayer.timeOffset = 0.0;

CALayer *maskedLayer = [CALayer layer];
maskedLayer.backgroundColor = [NSColor redColor].CGColor;
maskedLayer.position = CGPointMake(200, 200);
maskedLayer.bounds   = CGRectMake(0, 0, 200, 200);

CAShapeLayer *mask = [CAShapeLayer layer];
mask.fillColor = [NSColor whiteColor].CGColor;
mask.position = CGPointMake(100, 100);
mask.bounds   = CGRectMake(0, 0, 200, 200);

CGMutablePathRef path = CGPathCreateMutable();
CGPathMoveToPoint(path, NULL, 100, 100);
for (int i=0;  i<20;  i++) {
    double x = arc4random_uniform(2000) / 10.0;
    double y = arc4random_uniform(2000) / 10.0;
    CGPathAddLineToPoint(path, NULL, x, y);
}
CGPathCloseSubpath(path);

mask.path = path;

CGPathRelease(path);

maskedLayer.mask = mask;

CAShapeLayer *maskCopy = [NSKeyedUnarchiver unarchiveObjectWithData:[NSKeyedArchiver archivedDataWithRootObject:mask]];
maskCopy.fillColor = NULL;
maskCopy.strokeColor = [NSColor yellowColor].CGColor;
maskCopy.lineWidth = 4;
maskCopy.position = maskedLayer.position;

// Alternately, don't set the position and add the copy as a sublayer
// maskedLayer.sublayers = @[maskCopy];

hostLayer.sublayers = @[maskedLayer,maskCopy];

_contentView.layer = hostLayer;
_contentView.wantsLayer = YES;

[CATransaction commit]; 
```

它基本上创建了一个任意路径并将其设置为掩码。然后它需要该图层的副本来描边路径。您可能需要调整一些东西以获得您正在寻找的确切效果。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-23T19:53:16.243

如果您子类`CALayer`化，您可以使用您想要的掩码对其进行实例化，并且还可以覆盖`layoutSubLayers`以包含您想要的边框。这适用于所有面具，应该是新接受的答案。

可以通过几种方式做到这一点。下面我将通过使用`path`给定掩码的 来做到这一点，并将其分配给类属性以用于在 中构造新边框`layoutSubLayers`。这个方法有可能被多次调用，所以我还设置了一个布尔值来跟踪它。（也可以将边框指定为类属性，并每次删除/重新添加。现在我使用布尔检查。

**斯威夫特 3：**

```
class CustomLayer: CALayer {

    private var path: CGPath?
    private var borderSet: Bool = false

    init(maskLayer: CAShapeLayer) {
        super.init()
        self.path = maskLayer.path
        self.frame = maskLayer.frame
        self.bounds = maskLayer.bounds
        self.mask = maskLayer
    }

    override func layoutSublayers() {

        if(!borderSet) {
            self.borderSet = true
            let newBorder = CAShapeLayer()

            newBorder.lineWidth = 12
            newBorder.path = self.path
            newBorder.strokeColor = UIColor.black.cgColor
            newBorder.fillColor = nil

            self.addSublayer(newBorder)
        }

    }

    required override init(layer: Any) {
        super.init(layer: layer)
    }

    required init?(coder aDecoder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }
} 
```

# c# - 使用 DateTime.ParseExact() 函数转换字符串时出错

> ID：15832834
> 
> 赞同：-1
> 
> 时间：2013-04-05T11:31:41.317
> 
> 标签：c#, datetime, visual-studio-2012

我正在尝试在日期时间转换字符串值。我知道这个问题被问了很多次。但我检查了几乎所有的答案。但我没有得到我的问题的答案。

以下是我的代码：

```
string ObjTime = "5/4/2013 10:30 PM";

DateTime d = DateTime.ParseExact(ObjTime, "dd/MM/yyyy H:mm", CultureInfo.CurrentCulture); 
```

我还检查了我的系统日期时间格式。

而且我也用过这个：

```
DateTime d = DateTime.ParseExact(ObjTime, "d/M/yyyy H:mm tt", CultureInfo.CurrentCulture); 
```

有人可以帮我解决这个问题吗？

而且我通过更改格式进行检查，`d/m/yyy H:mm`但它仍然给我错误。我正在使用`Visual Studio 2012`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:42:32.377

我检查了问题，似乎您的字符串格式不正确，因此 ParseExact 抛出错误。

如果你改变你的字符串

```
string ObjTime = "5/4/2013 10:30 PM"; 
```

到

```
string ObjTime = "05/04/2013 10:30 PM"; 
```

代码有效

还检查了这个

![在此处输入图像描述](https://i.stack.imgur.com/sIui2.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:33:20.307

您可以尝试指定该格式有效的区域性，而不是显式指定格式字符串。对于 EN-US 文化：

```
 DateTime.Parse(ObjTime, CultureInfo.GetCultureInfo("en-us")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T11:36:00.157

您的字符串有一位数的日期和月份，并且您正在尝试使用**仅支持两位数日/月的格式对其进行解析**

你应该做：

```
string ObjTime = "5/4/2013 10:30 PM";
DateTime d = DateTime.ParseExact(ObjTime, "d/M/yyyy h:mm tt", CultureInfo.CurrentCulture); 
```

您应该使用单个`d`and `M`，这将支持一位数和两位数的日/月进行解析。

您还应该使用**小写字母`h`**，因为您`PM`在字符串中有。所以你的最终格式应该是`"d/M/yyyy h:mm tt"`

# macos - 打印对话框扩展 - 在沙盒应用程序上运行 PDE 时连接到网络

> ID：15832836
> 
> 赞同：1
> 
> 时间：2013-04-05T11:31:44.053
> 
> 标签：macos, cocoa, plugins, driver, sandbox

我正在为 Mac OSX 创建一个打印对话框扩展 (PDE)。在那个 PDE 中，我需要连接到网络进行身份验证。

但是，由于沙盒，当我在 TextEdit 中尝试 PDE 时，我无法连接到 LDAP。从控制台，它说沙盒拒绝 TextEdit 的网络出站。显然，沙盒文本编辑不允许网络连接。

我只想问，解决这个问题的最佳方法是什么？
如何在我的 PDE 中启用网络连接，即使它运行的应用程序不允许它？
我还可以使用我的 PDE 扩展应用程序的沙盒配置文件（以添加网络连接权利）吗？

任何帮助或提示将不胜感激。

编辑：目前，我正在研究 XPC 服务。现在，XPC 似乎不起作用，可能是因为 PDE 插件运行在应用程序之上，例如 TextEdit，而我的 XPC 服务不在主应用程序的捆绑包中。

# c# - 排序帮助。插入排序 c#

> ID：15832838
> 
> 赞同：0
> 
> 时间：2013-04-05T11:31:51.623
> 
> 标签：c#, sorting, inheritance, polymorphism, insertion-sort

我有一个 Arraylist，里面有一堆对象都是同一个类（DistributedApps）。

构造函数：

```
public Distributedapps(string appName, string devName, string description, double size, int estLife,double price, int downloads,int ratings,string distributor, double annLicenceFee, int maxUsers)
            :base(appName,devName,description,size,estLife,price,downloads,ratings) 
```

我希望 Insertionsort 对这个列表（DeployedApps）按应用程序大小（大小）降序排序

```
public void DeployInsertionSortAppSizeDeployed()
    {
        Console.WriteLine("INSERTION SORT ON APP SIZE DEPLOYED!");
        int II;
        Distributedapps Temp, PrTemp;
        for (int IO = 1; IO <= (Count(DeployedApps) - 1); IO++)
        {
            Temp = (Distributedapps)DeployedApps[IO];
            II = IO;
            PrTemp = (Distributedapps)DeployedApps[II - 1];
            while ((II > 0) && (PrTemp.GetSize().CompareTo(Temp.GetSize()) <= 0)) 
            {
                DeployedApps[II] = DeployedApps[II - 1];
                II -=1;
            }
            DeployedApps[II] = Temp;
        }
        Console.WriteLine("DONE!");
    } 
```

如果排序代码看起来不错并且没有错误，我会尝试在之前和之后发布列表图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:28:58.980

只是为了让你知道互联网我修复了它......

```
 Console.WriteLine("INSERTION SORT ON APP SIZE DEPLOYED!");
        Apps Temp, PrTemp;
        int II;
        for (int IO = 1; IO <= (Count(DeployedApps) - 1); IO++)
        {
            Temp = (Apps)DeployedApps[IO];
            PrTemp = (Apps)DeployedApps[IO - 1];
            II = IO;
            while ((II>0)&&(Temp.GetSize()>=PrTemp.GetSize()))
            {
                SwapDEP(II, II - 1);
                II = II - 1;
                if (II >= 1)
                {
                    Temp = (Apps)DeployedApps[II];
                    PrTemp = (Apps)DeployedApps[II - 1];
                }
            }

        }
        Console.WriteLine("DONE!"); 
```

# batch-file - 如何在 DOS Batch 中的特殊字符之间复制文本？

> ID：15832839
> 
> 赞同：0
> 
> 时间：2013-04-05T11:31:52.213
> 
> 标签：batch-file, dos

如果找到特殊文本，我需要从字符串中回显文本。我需要 ECHO 的文本在 () 之间。

在下面的代码片段中，我需要在 () 中搜索“language=”。如果找到“语言=”，我需要将 () 中的文本回显到控制台。

应打印 STRING1 ECHO language=en。

使用 STRING2 不应回显任何内容。

非常感谢任何帮助。

```
@ECHO off
SETLOCAL ENABLEDELAYEDEXPANSION

SET STRING1=What A Nice Morning (language=en). More text.
SET STRING2=What A Nice Morning. More text.

CALL :FETCHLANGUAGE "%STRING1%"
CALL :FETCHLANGUAGE "%STRING2%"

PAUSE

:FETCHLANGUAGE
   ECHO Parse String %1

   ECHO "%1" | FINDSTR /C:"language=" 1>nul

   IF ERRORLEVEL 1 (
      ECHO Language not found
    ) ELSE (
      ECHO Found Language

REM *** Need to ECHO language=xyz here.   

    )   

   EXIT /B 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T12:15:39.277

如果您的问题是关于检索子字符串，那么这可能会有所帮助。

`set var=%var:*(lang=%`这将删除第一次出现的所有字符`(lang`。

要删除一行的其余部分，还有另一个可能的技巧。 `set var=%var:)=&rem #%`
它在右括号的位置注入一个 REM 命令

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T12:04:28.890

试试 for /f

```
for /f "tokens=2 delims=()" %%L in ('ECHO "%1" ^| FINDSTR "language="') do (
  echo %%L
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T22:09:25.283

如果您下载[gnu grep for Windows](http://gnuwin32.sourceforge.net/packages/grep.htm) ，解决方案很简单。

我同时使用积极的前瞻和积极的后瞻来寻​​找，但排除，封闭`()`：

```
@echo off
setlocal enableDelayedExpansion

set string1=What a nice morning (language=en). More text.
set string2=What a nice morning. More text.

echo !string1!|grep -o -P "(?<=\()language=.*?(?=\))"
echo !string2!|grep -o -P "(?<=\()language=.*?(?=\))"
exit /b 
```

* * *

有些人处于不允许或无法下载和安装可执行文件的情况。我编写了一个名为 REPL.BAT 的正则表达式搜索和替换脚本，非常方便。它被实现为混合批处理/JScript 脚本。它应该适用于任何现代 Windows 平台（XP 及更高版本）。

这是使用我的 REPL.BAT 的解决方案（假设 REPL.BAT 位于 PATH 或当前文件夹中）此解决方案不会在任何匹配的语言文本后打印换行符。我使用该`s`选项允许 REPL.BAT 直接从环境变量中读取值。

```
@echo off
setlocal

set string1=What a nice morning (language=en). More text.
set string2=What a nice morning. More text.

call repl "(.*?(\((language=.*?)\)))?.*" "$3" s string1
call repl "(.*?(\((language=.*?)\)))?.*" "$3" s string2 
```

在任何匹配的语言文本后稍有变化会打印一个换行符。我添加了`x`在替换文本中启用转义序列的选项。即使没有语言文本的行也会在输出中换行，因此需要将输出通过管道传输到 FINDSTR 以消除空行。

```
@echo off
setlocal

set string1=What a nice morning (language=en). More text.
set string2=What a nice morning. More text.

repl "(.*?(\((language=.*?)\)))?.*" "$3\r\n" xs string1 | findstr .
repl "(.*?(\((language=.*?)\)))?.*" "$3\r\n" xs string2 | findstr . 
```

这是使上述内容起作用的 REPL.BAT 脚本。完整的文档嵌入在脚本中。它出奇的强大和高效——我已经成功地用它解决了许多搜索和替换批处理脚本问题。

```
@if (@X)==(@Y) @end /* Harmless hybrid line that begins a JScript comment

::************ Documentation ***********
:::
:::REPL  Search  Replace  [Options  [SourceVar]]
:::REPL  /?
:::
:::  Performs a global search and replace operation on each line of input from
:::  stdin and prints the result to stdout.
:::
:::  Each parameter may be optionally enclosed by double quotes. The double
:::  quotes are not considered part of the argument. The quotes are required
:::  if the parameter contains a batch token delimiter like space, tab, comma,
:::  semicolon. The quotes should also be used if the argument contains a
:::  batch special character like &, |, etc. so that the special character
:::  does not need to be escaped with ^.
:::
:::  If called with a single argument of /? then prints help documentation
:::  to stdout.
:::
:::  Search  - By default this is a case sensitive JScript (ECMA) regular
:::            expression expressed as a string.
:::
:::            JScript syntax documentation is available at
:::            http://msdn.microsoft.com/en-us/library/ae5bf541(v=vs.80).aspx
:::
:::  Replace - By default this is the string to be used as a replacement for
:::            each found search expression. Full support is provided for
:::            substituion patterns available to the JScript replace method.
:::            A $ literal can be escaped as $$. An empty replacement string
:::            must be represented as "".
:::
:::            Replace substitution pattern syntax is documented at
:::            http://msdn.microsoft.com/en-US/library/efy6s3e6(v=vs.80).aspx
:::
:::  Options - An optional string of characters used to alter the behavior
:::            of REPL. The option characters are case insensitive, and may
:::            appear in any order.
:::
:::            I - Makes the search case-insensitive.
:::
:::            L - The Search is treated as a string literal instead of a
:::                regular expression. Also, all $ found in Replace are
:::                treated as $ literals.
:::
:::            E - Search and Replace represent the name of environment
:::                variables that contain the respective values. An undefined
:::                variable is treated as an empty string.
:::
:::            M - Multi-line mode. The entire contents of stdin is read and
:::                processed in one pass instead of line by line. ^ anchors
:::                the beginning of a line and $ anchors the end of a line.
:::
:::            X - Enables extended substitution pattern syntax with support
:::                for the following escape sequences:
:::
:::                \\     -  Backslash
:::                \b     -  Backspace
:::                \f     -  Formfeed
:::                \n     -  Newline
:::                \r     -  Carriage Return
:::                \t     -  Horizontal Tab
:::                \v     -  Vertical Tab
:::                \xnn   -  Ascii (Latin 1) character expressed as 2 hex digits
:::                \unnnn -  Unicode character expressed as 4 hex digits
:::
:::                Escape sequences are supported even when the L option is used.
:::
:::            S - The source is read from an environment variable instead of
:::                from stdin. The name of the source environment variable is
:::                specified in the next argument after the option string.
:::

::************ Batch portion ***********
@echo off
if .%2 equ . (
  if "%~1" equ "/?" (
    findstr "^:::" "%~f0" | cscript //E:JScript //nologo "%~f0" "^:::" ""
    exit /b 0
  ) else (
    call :err "Insufficient arguments"
    exit /b 1
  )
)
echo(%~3|findstr /i "[^SMILEX]" >nul && (
  call :err "Invalid option(s)"
  exit /b 1
)
cscript //E:JScript //nologo "%~f0" %*
exit /b 0

:err
>&2 echo ERROR: %~1\. Use REPL /? to get help.
exit /b

************* JScript portion **********/
var env=WScript.CreateObject("WScript.Shell").Environment("Process");
var args=WScript.Arguments;
var search=args.Item(0);
var replace=args.Item(1);
var options="g";
if (args.length>2) {
  options+=args.Item(2).toLowerCase();
}
var multi=(options.indexOf("m")>=0);
var srcVar=(options.indexOf("s")>=0);
if (srcVar) {
  options=options.replace(/s/g,"");
}
if (options.indexOf("e")>=0) {
  options=options.replace(/e/g,"");
  search=env(search);
  replace=env(replace);
}
if (options.indexOf("l")>=0) {
  options=options.replace(/l/g,"");
  search=search.replace(/([.^$*+?()[{\\|])/g,"\\$1");
  replace=replace.replace(/\$/g,"$$$$");
}
if (options.indexOf("x")>=0) {
  options=options.replace(/x/g,"");
  replace=replace.replace(/\\\\/g,"\\B");
  replace=replace.replace(/\\b/g,"\b");
  replace=replace.replace(/\\f/g,"\f");
  replace=replace.replace(/\\n/g,"\n");
  replace=replace.replace(/\\r/g,"\r");
  replace=replace.replace(/\\t/g,"\t");
  replace=replace.replace(/\\v/g,"\v");
  replace=replace.replace(/\\x[0-9a-fA-F]{2}|\\u[0-9a-fA-F]{4}/g,
    function($0,$1,$2){
      return String.fromCharCode(parseInt("0x"+$0.substring(2)));
    }
  );
  replace=replace.replace(/\\B/g,"\\");
}
var search=new RegExp(search,options);

if (srcVar) {
  WScript.Stdout.Write(env(args.Item(3)).replace(search,replace));
} else {
  while (!WScript.StdIn.AtEndOfStream) {
    if (multi) {
      WScript.Stdout.Write(WScript.StdIn.ReadAll().replace(search,replace));
    } else {
      WScript.Stdout.WriteLine(WScript.StdIn.ReadLine().replace(search,replace));
    }
  }
} 
```

# php - ZF2 表单集合 - 过滤空记录

> ID：15832841
> 
> 赞同：7
> 
> 时间：2013-04-05T11:31:54.707
> 
> 标签：php, doctrine-orm, zend-framework2, zend-form

我正在尝试解决如何从表单集合中过滤空记录。在我的应用程序中，我有 2 个实体，`Competition`并且`League`. 一场比赛可能有零个或多个联赛。

所以我创建了一个竞赛表单 ( `CompetitionForm`)、一个竞赛字段集 ( `CompetitionFieldset`) 和一个联赛字段集 ( `LeagueFieldset`)。

被`CompetitionFieldset`添加到`CompetitionForm`, 和用于允许用户添加 1 个或多个联赛的`CompetitionFieldset`用途`Zend\Form\Element\Collection`。我为下面的每个类添加了当前代码。

默认情况下，我想在比赛中显示 3 个联赛的输入字段，因此在`CompetitionFieldset`添加`Zend\Form\Element\Collection`项目时，我将计数选项设置为 3。

但是如果用户没有为联赛提供任何数据，我想忽略它们。目前，在我的数据库中创建了三个空的关联联赛。

例如，如果我设置一个`InputFilter`以`LeagueFieldset`使该`name`字段成为必填字段，则表单将无法验证。

我也许还应该提到我正在使用 Doctrine2 来建模我的实体并为我的表单补充水分等。

我确信我可以在我的模型上使用一些额外的代码，甚至在我处理表单的控制器中使用它，但我确信有一个更简洁的解决方案可能使用过滤器。

如果有人能指出我正确的方向，将不胜感激。

非常感谢您提供的任何帮助。

```
:wq
familymangreg 
```

我的比赛表格

```
use Kickoff\Form\AbstractAdminForm;
use Doctrine\Common\Persistence\ObjectManager;
use DoctrineModule\Stdlib\Hydrator\DoctrineObject as DoctrineHydrator;
use Zend\Stdlib\Hydrator\ClassMethods;

class CompetitionForm extends AbstractAdminForm
{
    public function __construct(ObjectManager $objectManager)
    {
        parent::__construct($objectManager, 'competition-form');

        $fieldset = new CompetitionFieldset($objectManager);
        $fieldset->setUseAsBaseFieldset(true);
        $this->add($fieldset);

        $this->add(array(
            'name' => 'submit',
            'attributes' => array(
                'type' => 'submit',
                'value' => 'Submit',
                'id' => 'submitbutton',
            ),
        ));
    }
} 
```

我的比赛场集

```
use Kickoff\Form\AbstractFieldset;
use Kickoff\Model\Entities\Competition;
use Doctrine\Common\Persistence\ObjectManager;
use DoctrineModule\Stdlib\Hydrator\DoctrineObject as DoctrineHydrator;

class CompetitionFieldset extends AbstractFieldset
{
    public function __construct(ObjectManager $objectManager)
    {
        parent::__construct($objectManager,'Competition');

        $this->setHydrator(new DoctrineHydrator($this->objectManager,'Kickoff\Model\Entities\Competition'))
            ->setObject(new Competition());

        $this->setLabel('Competition');

        $this->add(array(
            'name' => 'name',
            'options' => array(
                'label' => 'Competition name (e.g. Premier League)',                
            ),
            'attirbutes' => array(
                'type' => 'text',
            ),
        ));

        $this->add(array(
            'name' => 'long_name',
            'options' => array(
                'label' => 'Competition long name (e.g. Barclays Premier League)',
            ),
            'attirbutes' => array(
                'type' => 'text',
            ),
        ));

        $leagueFieldset = new LeagueFieldset($objectManager);
        $this->add(array(
            'type' => 'Zend\Form\Element\Collection',
            'name' => 'leagues',
            'options' => array(
                'label' => 'Leagues',
                'count' => 3,
                'should_create_template' => true,
                'allow_add' => true,
                'target_element' => $leagueFieldset,
            ),
        ));
    }
} 
```

我的联赛场集

```
use Kickoff\Form\AbstractFieldset;
use Kickoff\Model\Entities\League;
use Doctrine\Common\Persistence\ObjectManager;
use DoctrineModule\Stdlib\Hydrator\DoctrineObject as DoctrineHydrator;
use Zend\InputFilter\InputFilterProviderInterface;

class LeagueFieldset extends AbstractFieldset implements InputFilterProviderInterface
{
    public function __construct(ObjectManager $objectManager)
    {
        parent::__construct($objectManager,'League');

        $this->setHydrator(new DoctrineHydrator($this->objectManager,'Kickoff\Model\Entities\League'))
            ->setObject(new League());

        $this->setLabel('League');

        $this->add(array(
            'name' => 'name',
            'options' => array(
                'label' => 'League name (e.g. First Qualifying Round)',
            ),
            'attirbutes' => array(
                'type' => 'text',
            ),
        ));

        $this->add(array(
            'name' => 'long_name',
            'options' => array(
                'label' => 'League long name (e.g. UEFA Champions League First Qualifying Round)',
            ),
            'attirbutes' => array(
                'type' => 'text',
            ),
        ));
    }

    public function getInputFilterSpecification()
    {
        return array(
            'name' => array(
                'required' => true,
            )
        );
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-04T10:02:42.643

在将请求传递给 EntityManager 之前，您需要从请求中获取数据，这是肯定的。只需添加您自己的验证来过滤空记录。您还可以提供 javascript 过滤器来捕获提交表单事件并在提交之前删除空字段。

# string - 比较不同博彩公司的团队名称

> ID：15832843
> 
> 赞同：0
> 
> 时间：2013-04-05T11:32:02.693
> 
> 标签：string, compare, names

我正在尝试制作一个小型体育博彩赔率比较脚本供我个人使用。为此，我正在获取 XML 提要的数据（来自不同的博彩公司）。为了比较它们，我必须知道哪些匹配/事件完全相同。问题在于，不同博彩公司的球队名称、联赛名称通常不同。

这里有一个例子：

* * *

博彩公司1：B1

联赛：欧洲冠军联赛

比赛球队：曼联vs国际米兰

* * *

博彩公司2：B2

联赛：冠军L。

比赛：马努vs国际米兰

* * *

博彩公司3：B3

联赛：冠军联赛（欧足联）

比赛：曼彻斯特大学 vs 国际足球俱乐部

* * *

日期将相同。但是有很多比赛同时开始。有 1000 场比赛和 100 场联赛。

除了手动识别它们之外，还有另一种可能性吗？

手动我的意思是：如果字符串是 Manu 或 Manchester U. => Manchester United（每个团队名称都是这个）

赔率比较网站如何做到这一点（如oddsportal.com 或其他服务）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2021-02-24T11:22:00.687

非常老的问题，但也许其他用户可以受益。对不起，关于我的英语不好。我试图解释。我是 C# 开发人员，所以我只解释如何做到这一点。

如果您制作自己的团队字典，则可以处理此问题。

1.  在您的数据库上创建您自己的 SoccerTeams 表。在这种情况下，MongoDb 或任何 documentDb 是最适合您的解决方案。也可以是关系型数据库，没问题。

2.  Bookmakers1、Bookmakers2 或更多没有什么不同。只需检查您自己的数据库中的团队名称即可。例如：

    Bookmaker1 主队名称：曼联

    Bookmaker1 客场球队名称：国际米兰

    Bookmaker2 主队名称 : Manchester Utd.

    Bookmaker2 客场球队名称：国际米兰

3.  在这种情况下，我们必须检查字符串相似度，我们可以为此使用“Levanstein 距离”或类似算法。这是一些算法[Url](https://medium.com/@appaloosastore/string-similarity-algorithms-compared-3f7b4d12f0ff)。

4.  首先从数据库中获取团队。并使用循环检查团队的相似性。例如，如果距离更近，“Manchester United vs Manchester Utd”距离大于 %50。您可以添加这个不同的表名，例如“SimilaritySoccerTeamNames”。毕竟，你有这样的相似性表：

```
table.myTable tr th, td {
  border: 1px solid black;
}
```

```
<table class="myTable">
  <thead>
    <tr>
      <th width="100px">Id</th>
      <th width="200px">Name</th>
      <th width="200px">SimilarName</th>
      <th width="100px">Distance</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>Manchester United</td>
      <td>Manchester Utd</td>
      <td>70</td>
    </tr>
    <tr>
      <td>2</td>
      <td>Manchester United</td>
      <td>Manchester City</td>
      <td>50</td>
    </tr>
    <tr>
      <td>3</td>
      <td>Manchester United</td>
      <td>Manu</td>
      <td>20</td>
    </tr>
    <tr>
      <td>4</td>
      <td>Inter Milan</td>
      <td>Inter</td>
      <td>45</td>
    </tr>
    <tr>
      <td>5</td>
      <td>Beşiktaş JK</td>
      <td>Beşiktaş AŞ</td>
      <td>75</td>
    </tr>
    <tr>
      <td>6</td>
      <td>Besiktas</td>
      <td>Beşiktaş</td>
      <td>63</td>
    </tr>
  </tbody>
</table>
```

因此，您可以手动选择和组合这些团队。你必须小心你的代码。Gent 与 Genk 的相似度也为 %99。这些是不同的团队。您必须手动。您可以改进此解决方案。例如，如果 2 场博彩公司相同日期和主队比赛和客队名称相似度大于 %50，您可以自动添加。毕竟，您可以简化所有这些工作并节省您的时间。我只是解释你如何做到这一点。您也可以改进此解决方案。我只是想解释一下逻辑。你可以做得更好。如果你需要任何帮助，我在这里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:36:02.070

恐怕没有神奇的解决方案。我没有看到任何你可以基于的模式。

最好的方法是确定每个博彩公司使用的名称并进行相应的比较。

博彩公司不太可能更改球队的名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-28T12:41:15.063

作为同一支球队，同一天打，你可以连接一个球队的名字，并在同一天查看这个球队，对面的球队，并连接这些球队。一支球队不能在同一天与另一支球队比赛。通过这种方式，您可以将所有团队映射为一个。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-12-03T08:41:28.073

你应该刮掉谷歌的名字。例如，如果您在 Google 中输入“man utd”，您会得到“manchester united”，如果您输入“manchester utd”，您也会得到“manchester united”。因此，您只需要将其数据工程化到数据库中。对于 Google 抓取，您应该使用 Selenium。

# java - 数字签名 SunMSCAPI 提供者和 MS Crypto API

> ID：15832846
> 
> 赞同：3
> 
> 时间：2013-04-05T11:32:09.177
> 
> 标签：java, rsa, digital-signature, cryptoapi, mscapi

我想与`SunMSCAPI`提供商签署文件。由于需要使用 MS Crypto API 导入公钥和签名。

通常使用`SHA1withRSA`, 生成签名以大端到小端（字节顺序）转换结束。

```
//generate keystore with java keytool
$Keytool -genkey -alias tsign -keystore c:\test\tsignjks.p12 - keyalg rsa -storetype  pkcs12 
```

在 Java 应用程序中：

```
//for signing and getting keystore, assuming windows certificate is installed
..ks = KeyStore.getInstance("Windows-MY","SunMSCAPI"); 
PrivateKey priv = ks.getKey("tsign",password); 
Signature rsa = Signature.getInstance("SHA1withRSA","SunMSCAPI"); 
rsa.initSign(priv);
.. 
rsa.update(buffer, 0, len);
..
byte[] realSig = rsa.sign();

//for writing public key for ms crypto api or exporting it from windows certificate store
Certificate cert = ks.getCertificate("tsign");
byte[] encodedCert = cert.getEncoded();
FileOutputStream certfos = new FileOutputStream("tsigncer.cer");
certfos.write(encodedCert);

//for writing signatures for ms crypto api
FileOutputStream sigfos = new FileOutputStream(targetPath + "/"
                + signatureName);
sigfos.write(realSig); 
```

我相信这`SunMSCAPI`可以解决我的问题，但我不知道何时使用 MS Crypto API 导入公钥，它在第一阶段从不导入（除非我将大端字节序更改为小端字节序）下面是我的加密 API 代码.

```
LPCSTR file = "tsigncer.cer";
//LPCSTR file = "omsign.p12";
BOOL crypt_res = FALSE;

HCRYPTPROV crypt_prov_hndl = NULL;
 crypt_res = CryptAcquireContext(&crypt_prov_hndl, NULL, NULL, PROV_RSA_FULL, 0/*CRYPT_NEWKEYSET*/);
//crypt_res = CryptAcquireContext(&crypt_prov_hndl, NULL, NULL, PROV_DSS, CRYPT_VERIFYCONTEXT/*CRYPT_NEWKEYSET*/);

    if (!crypt_res) {
        HRESULT decode_hr = __HRESULT_FROM_WIN32(GetLastError());
        return decode_hr;
    }

    // Load key file
    HANDLE fileHandle = CreateFile(file, // name of the write
                       GENERIC_READ,          // open for writing
                       0,                      // do not share
                       NULL,                   // default security
                       OPEN_EXISTING,             // create new file only
                       FILE_ATTRIBUTE_NORMAL,  // normal file
                       NULL);                  // no attr. template

    if (fileHandle == INVALID_HANDLE_VALUE)
    {
        DWORD d = GetLastError();
        return -1;
    }

    BYTE buffer[2056];
    DWORD fileSize = 0;
    DWORD fileSizeResult = GetFileSize(fileHandle, &fileSize);

    DWORD numBytesRead = 0;
    BOOL fileLoadResult = ReadFile(fileHandle, (PVOID)buffer, fileSizeResult, &numBytesRead, NULL);

    // Import key
    BOOL result = ImportKey(crypt_prov_hndl, (LPBYTE)buffer, numBytesRead);
//result is always false.. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T12:47:33.420

如果您使用 MSCAPI，则假定您已将密钥添加到 Microsoft 证书存储区。您可以通过转到“Internet 属性”>“内容”>“证书”来检查密钥是否存在，它会为您提供可用证书的列表。如果您的证书不存在，您将无法使用它。如果它在那里，你需要这个代码：

```
SunMSCAPI providerMSCAPI = new SunMSCAPI();
Security.addProvider(providerMSCAPI);
KeyStore ks = KeyStore.getInstance("Windows-MY");
ks.load(null, null); 
```

从那里开始，代码是相当标准的。有关更多信息，请参阅[我的数字签名](http://itextpdf.com/book/digitalsignatures)书（该书是免费的）。

**重要补充：**我忘了提到 Java 6 的 64 位版本中不存在 SunMSCAPI（我不知道 Java 7）。您可以通过安装 32 位版本来解决此问题。

# angularjs - 动态添加的属性在 angularjs 中不起作用

> ID：15832856
> 
> 赞同：2
> 
> 时间：2013-04-05T11:32:35.683
> 
> 标签：angularjs

我有一个带有两个`number`类型输入框的简单表单。当我尝试`max`通过指令添加属性时，它似乎忽略了它并且不验证虽然属性已添加到 dom 元素上。**当我将它内联添加时，它可以工作**。我提到了这个问题[AngularJs can't read dynamic set attributes](https://stackoverflow.com/questions/14547425/angularjs-cant-read-dynamically-set-attributes)但这似乎对我没有帮助。在 angularJS 中是新的，完全无能为力。

任何帮助表示赞赏。

编辑：更新小提琴 **演示** [http://jsfiddle.net/tNUNh/6/](http://jsfiddle.net/tNUNh/6/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:47:25.340

看起来并没有更进一步，但是您拥有的一种解决方案是每次更改其最大值时都重新编译该元素。

只需更改 inject `$compile`( `module.directive('type', ['$compile', function ($compile) {`) 和 after `attr.$set('max', '100')`call 即可`$compile(element)(scope)`。

这似乎不对，但我需要进一步研究`input`指令代码，看看它是否公开了一种无需重新编译即可更改它的方法。

# objective-c - 如何访问 Finder 中的设备列表？

> ID：15832857
> 
> 赞同：1
> 
> 时间：2013-04-05T11:32:36.017
> 
> 标签：objective-c, cocoa

我尝试在我的应用程序中显示计算机设备列表，例如在 Finder 中。如何访问此列表并在连接或移除设备时获得通知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:32:18.700

要回答您的第一个问题（如何访问可用设备列表），请参阅[StackOverflow 上的此问答](https://stackoverflow.com/questions/1515068/list-all-drives-partitions-and-get-dev-rdisc-device-with-cocoa)。

要获取有关设备可用性和删除的通知，请参阅[NSWorkspace 的通知](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html#//apple_ref/doc/uid/20000391-BCIEFIDI)。

# sql - 使用分析函数查询具有其他列的列的非重复值

> ID：15832869
> 
> 赞同：0
> 
> 时间：2013-04-05T11:33:12.067
> 
> 标签：sql, oracle

我正在使用 Oracle 11g 第 1 版。跟进[这个问题](https://stackoverflow.com/questions/12365678/oracle-query-for-finding-non-repeated-rows)。

拥有这组行：

```
Name     Contact_No

A        123
A        124
B        125
C        126
C        127 
```

我想使用分析函数返回它：

```
Name     Contact_No
B        125 
```

我可以这样做

```
select name, Contact_No
from   tbl_name
where  name in ( SELECT name
                 FROM   tbl_name
                 GROUP  BY name
                 HAVING COUNT(name) = 1
                ) 
```

或这个

```
SELECT name, max(Contact_No)
FROM   tbl_name
GROUP  BY name
HAVING COUNT(name) = 1 
```

但是我想要一个解决方案，我可以避免子查询或将表与自身连接或使用 min/max，这可能会使任何阅读代码的人感到困惑！我相信这可以通过分析函数实现，但我不知道如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:03:06.487

没错，你需要使用解析函数；如果你想返回整行。根据您当前的查询来判断[`COUNT()`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions039.htm#SQLRF00624).

```
select *
  from ( select a.*, count(*) over ( partition by name ) as ct
           from tbl_name )
 where ct = 1 
```

解释一下，partition by 实际上与 GROUP BY 相同，只是不做任何事情。这计算*每个*名称的记录数并返回该行内，无论具有该名称的记录数如何。然后，您可以限制此生成的列。

尽管这确实使用了子查询，但这种方法本质上没有任何问题。您只扫描一次表/索引；与您当前扫描两次的示例不同。

我通常会建议你在`NAME`这里有一个索引，但这取决于你的具体情况。您可能需要扫描整个表，在这种情况下索引不会帮助您。

此外，如果您*只有*这两列，则分析查询毫无意义。您可以使用第二个选项来获得相同的结果。

```
SELECT name, max(Contact_No)
  FROM tbl_name
 GROUP BY name
HAVING COUNT(name) = 1 
```

当您需要返回无法包含在 GROUP BY 中的其他列时，分析查询很有用。

# css - CSS - Safari + Opera 中的边框宽度问题

> ID：15832870
> 
> 赞同：0
> 
> 时间：2013-04-05T11:33:13.903
> 
> 标签：css, safari, border

我的顶部导航短了 2 个像素，但仅限于 Safari 和 Opera。

[http://orbitprint.com/canvas/](http://orbitprint.com/canvas/)

ul 有一个 box-shadow，所以你可以看到最后一个 li 很短。我无法弄清楚为什么我的生活！

请问有人能帮我解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:33:24.780

好吧，您在像素布局中使用百分比。您的面板是 969 像素宽和 8 个按钮，12.5% (=> 969/8 = 121.125 像素) 必须适合自然编号的像素。所以最好是使用 display: table 作为菜单和 display: table-cell 作为按钮。这应该尽可能均匀地分割给定的空间。

# php - HTML 电子邮件在某些客户端中显示奇怪

> ID：15832876
> 
> 赞同：0
> 
> 时间：2013-04-05T11:33:20.333
> 
> 标签：php, html, email, email-headers

我正在使用 PHP 生成精美的 HTML 电子邮件以发送给访问者，但出于某种原因，某些访问者说 HTML 不适合他们（看到的是 RAW HTML 而不是漂亮的电子邮件）。

我没有将其缩小到某个客户，但是在与他们交谈后，他们说他们可以接收其他 HTML 电子邮件，所以这是我做错的事情......

我的PHP代码如下

```
$to = 'jm391@le.ac.uk';
$subject = 'Daily Update - New Bikes Matching Your Alerts';
$headers = "From: john@findthatbike.co.uk\r\n";
$headers .= "Reply-To: john@findthatbike.co.uk\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";

if (mail($to, $subject, $message, $headers)) {
    echo 'Your message has been sent<br/>';
} else {
    echo 'There was a problem sending the email.<br/>';
} 
```

我的 $message 变量加载了以下链接 HTML 源

[http://www.findthatbike.co.uk/sampleemail.html](http://www.findthatbike.co.uk/sampleemail.html)

我的客户向我转发了一封无效的电子邮件，转发的部分如下所示，我被告知他收到了其他人的 HTML 电子邮件，所以真的不知道该尝试什么...

```
From: john@findthatbike.co.uk [mailto:john@findthatbike.co.uk] 
Sent: 05 April 2013 08:35
To: XXXXX XXXXX
Subject: Daily Update - New Bikes Matching Your Alerts

Reply-To: john@findthatbike.co.uk

MIME-Version: 1.0

Content-Type: text/html; charset=ISO-8859-1
Message-Id: <20130405073022.8597D9CF79D@MY SERVER ADDRESS>
Date: Fri,  5 Apr 2013 08:30:22 +0100 (BST)
X-invURIBL-Scan: Scanned by invURIBL 3.1.1 on 05/04/2013 08:34:17
X-invURIBL-Weight: 0
X-invURIBL-Range: CLEAN
X-Declude-Sender: MY SERVER NAME [MY SERVER IP]
X-Declude-Spoolname: 72086847.eml
X-Declude-RefID: 
X-MessageStream-Note: Scanned by MessageStream (www.messagestream.com).
X-MessageStream-Scan: Score [0] at 08:34:29 on 05 Apr 2013
X-MessageStream-Tests: Whitelisted
X-Country-Chain: UNITED KINGDOM->destination

        <html>
        <body style="background:url('http://findthatbike.co.uk/images/bg3.jpg') repeat fixed 0 0 #EEEEEE; padding-top: 10px; padding-bottom: 10px;"> 
```

# android - Android：随机崩溃问题

> ID：15832882
> 
> 赞同：0
> 
> 时间：2013-04-05T11:33:36.953
> 
> 标签：android, crash

我遇到了随机崩溃，但我无法弄清楚它发生在代码中的确切位置。该应用程序突然随机退出。这发生在我尝试使用 ListUI 填充列表的时候。但不确定原因。下面提到了相关的堆栈跟踪。有人可以给我指导，关于什么样的问题可能导致这个问题。

```
W/InputDispatcher(  188): channel '4171e5b0 com.pv.example.impl/com.pv.example.impl.ExampleActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
E/InputDispatcher(  188): channel '4171e5b0 com.pv.example.impl/com.pv.example.impl.ExampleActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
W/InputDispatcher(  188): Attempted to unregister already unregistered input channel '4171e5b0 com.pv.example.impl/com.pv.example.impl.ExampleActivity (server)'
I/ActivityManager(  188): Process com.pv.example.impl (pid 2419) has died.
W/ActivityManager(  188): Force removing ActivityRecord{41748ee8 com.pv.example.impl/.ExampleActivity}: app died, no saved state
I/WindowManager(  188): WIN DEATH: Window{4171e5b0 com.pv.example.impl/com.pv.example.impl.ExampleActivity paused=false}
I/WindowManager(  188): WINDOW DIED Window{4171e5b0 com.pv.example.impl/com.pv.example.impl.ExampleActivity paused=false}
D/Zygote  (  120): Process 2419 terminated by signal (11)
W/InputManagerService(  188): Got RemoteException sending setActive(false) notification to pid 2419 uid 10058
D/dalvikvm( 1440): GC_FOR_ALLOC freed 6082K, 45% free 19093K/34631K, paused 26ms
D/dalvikvm( 1440): GC_CONCURRENT freed 135K, 40% free 20995K/34631K, paused 3ms+6ms
D/dalvikvm( 1440): GC_FOR_ALLOC freed 1905K, 41% free 20712K/34631K, paused 26ms
D/dalvikvm( 1440): GC_FOR_ALLOC freed 1734K, 40% free 20860K/34631K, paused 23ms
D/dalvikvm( 1440): GC_CONCURRENT freed 1220K, 38% free 21663K/34631K, paused 2ms+4ms
D/dalvikvm( 1440): GC_CONCURRENT freed 2541K, 39% free 21156K/34631K, paused 2ms+10ms
D/dalvikvm( 1440): GC_FOR_ALLOC freed <1K, 39% free 21156K/34631K, paused 21ms
I/dalvikvm-heap( 1440): Grow heap (frag case) to 23.673MB for 3097616-byte allocation
D/dalvikvm( 1440): GC_FOR_ALLOC freed 3K, 31% free 24178K/34631K, paused 53ms
D/dalvikvm( 1440): GC_FOR_ALLOC freed 3784K, 39% free 21247K/34631K, paused 20ms
I/dalvikvm-heap( 1440): Grow heap (frag case) to 23.427MB for 2747152-byte allocation
D/dalvikvm( 1440): GC_CONCURRENT freed <1K, 31% free 23929K/34631K, paused 2ms+5ms
D/dalvikvm(  188): GC_CONCURRENT freed 1399K, 15% free 17287K/20231K, paused 10ms+3ms
D/dalvikvm( 2234): GC_CONCURRENT freed 421K, 5% free 12905K/13447K, paused 3ms+4ms 
```

# git - 使用 Git 管理 Yii 应用

> ID：15832886
> 
> 赞同：2
> 
> 时间：2013-04-05T11:33:53.307
> 
> 标签：git, github, yii

如果我的 Yii 应用程序有一个公共 Git 存储库。我想知道如何将数据库配置设置保密？我不能忽略整个文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T11:48:53.493

创建第二个忽略的配置并合并结果：

```
$config=require_once(dirname(__FILE__).'/protected/config/main.php');

$configIgnored=require_once(dirname(__FILE__).'/protected/config/ignored.php');

require_once($yii);

$config = CMap::mergeArray($config, $configIgnored);
Yii::createWebApplication($config)->run(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T18:35:49.310

**首先...** 在您的存储库中保留一个受保护的/config/main.php.dist 文件。“dist”代表“分布”。这个文件是一个普通的配置文件，但没有合理的数据。例如，您可以拥有：

```
...
'db' => array(
  'connectionString' => 'mysql:host=[[hostname]];dbname=[[database]]',
  'emulatePrepare' => true,
  'username' => '[[username]]',
  'password' => '[[password]]',
  'charset' => 'utf8',
),
... 
```

请记住，您的用户名、密码……不是项目内容。此信息仅与您有关，与您的申请无关。

**第二...** 准备您的应用程序以进行部署。例如，我以这种方式使用 phing：

```
<project name="yourProject" default="install">
    <target name="install" description="Prepare application for deploy">
        <input propertyname="hostname"
               defaultValue="localhost" promptChar="?">hostname</input>
        <input propertyname="database"
               defaultValue="database" promptChar="?">database</input>
        <input propertyname="username" defaultValue="root" promptChar="?">username</input>
        <input propertyname="password" defaultValue="root" promptChar="?">password</input>
        <copy file="protected/config/main.php.dist"
              tofile="protected/config/main.php"
              overwrite="false">
            <filterchain>
                <replacetokens begintoken="[[" endtoken="]]">
                    <token key="username" value="${username}" />
                    <token key="password" value="${password}" />
                    <token key="hostname" value="${hostname}" />
                    <token key="database" value="${database}" />
                </replacetokens>
            </filterchain>
        </copy>
    </target>
</project> 
```

通过这种方式，您永远不会将配置设置存储在您的存储库中，只需要运行

```
$ phing install 
```

在您的机器中配置应用程序。显然你需要安装 phing。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T11:46:20.943

找到了这个，效果很好：[http ://www.yiiframework.com/forum/index.php/topic/33395-best-practices-to-separate-db-connection-credentials-from-mainphp-and-git-repository /](http://www.yiiframework.com/forum/index.php/topic/33395-best-practices-to-separate-db-connection-credentials-from-mainphp-and-git-repository/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T11:37:30.117

我不使用 Yii，所以我不知道它的结构，但我知道的一件事是，你不能用 git 忽略文件的行。所以我更喜欢你 gitignore 你的真实配置文件，而不是真实文件，还创建一个 config_sample 文件来发布并写下说明，让它在 README.md 中工作

# javascript - 如何在 JavaScript 变量中分配复选框

> ID：15832888
> 
> 赞同：-5
> 
> 时间：2013-04-05T11:33:54.907
> 
> 标签：javascript, jquery

我正在使用 JavaScript 和 JSON 实现按需加载网格视图。

```
 function OnSuccess(response) {
        debugger;
        var xmlDoc = $.parseXML(response.d);
        var xml = $(xmlDoc);
        pageCount = parseInt(xml.find("PageCount").eq(0).find("PageCount").text());
        var customers = xml.find("Quotes");
        $("[id$=gridPolicyNumbers] .loader").remove();
        customers.each(function () {
            var customer = $(this);
             var row = "<tr>" +
            **"Place check box code here"**+
            "<td>" + customer.find("PolicyNumber").text() + "</td>" +
            "<td>" + customer.find("QuoteNumber").text() +
            "</td><td>" + customer.find("InsuredName").text() +
            "</td><td>" + customer.find("EffectiveDate").text() +
            "</td><td>" + customer.find("ExpireDate").text() +
            "</td><td>" + customer.find("LineCode").text() + "</td>"
            + "</tr>";

            $("[id$=gridPolicyNumbers]").append(row);
            //alert(row.text);

        }); 
```

在这里，我必须将第一列添加为复选框。

任何人都可以建议如何做..

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:43:41.713

代替`**"Place check box code here"**+`所有你需要做的是：

`"<td><input type='checkbox' name='check1' value='Check Me'/></td>"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:43:27.003

```
"<td><input type='checkbox' /></td>" 
```

# jquery - jquery cycle2初始化脚本失败

> ID：15832890
> 
> 赞同：1
> 
> 时间：2013-04-05T11:33:59.497
> 
> 标签：jquery, cycle, jquery-cycle

我可以很好地利用 jq cycle2 和 div 内的所有必需选项*，*这是现在的首选样式。但我想改用初始化脚本，就像旧的操作方法一样。我只是更喜欢将画廊选项的内容保留在我的标记之外，并尽可能保留在外部 .js 文件中。

我已经使用与“内联”方法完美配合的所有选项制作了脚本，并且它可以正确链接，但这会默默地失败并且幻灯片恢复到默认的淡入淡出设置，而我指定了scrollHorz。

此外，我正在使用上一个/下一个按钮和动画阳离子 - 字幕工作但没有动画，上一个/下一个按钮可见但完全失败。

我的脚本位于名为“functionality.js”的文件中，我相信我已按照[API 中概述的](http://jquery.malsup.com/cycle2/api/)“自定义初始化脚本”的说明进行操作。我在一个名为“plugins.js”的文件中包含所有相关插件，该文件的链接很好，您将在下面的控制台屏幕截图中看到它们被引用。

请参阅以下标记/脚本（为简单起见，它是 cycle2 示例的直接副本）和控制台屏幕截图的链接：

```
<a href="#"><span class="prevControl">Prev</span></a>
<a href="#"><span class="nextControl">Next</span></a>

<div class="cycle-slideshow">
<img src="http://malsup.github.com/images/p1.jpg" data-cycle-title="Spring" data-cycle-desc="Sonnenberg Gardens"/>
<img src="http://malsup.github.com/images/p2.jpg" data-cycle-title="Redwoods" data-cycle-desc="Muir Woods National Monument"/>
<img src="http://malsup.github.com/images/p3.jpg" data-cycle-title="Angel Island" data-cycle-desc="San Franscisco Bay"/>
<img src="http://malsup.github.com/images/p4.jpg" data-cycle-title="Raquette Lake" data-cycle-desc="Adirondack State Park"/>

<div class="cycle-caption"></div>
<div class="cycle-overlay"></div>

</div> 
```

链接脚本：

```
$('.cycle-slideshow').cycle({
fx: scrollHorz,
timeout: 2000,
speed: 700,
prev: ".prevControl",
next: ".nextControl",
caption-plugin: caption2,
overlay-fx-sel: "div"
}); 
```

**[这是控制台错误的屏幕截图的](http://www.sharasymowicz.com/assets/images/misc/cycle-error.gif)**链接

如果有人可以提出建议，将不胜感激，我相信这是一个简单的错误！

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-10T10:05:57.930

JavaScript 中有一些简单的错误会导致循环失败。以编程方式初始化幻灯片时，参数需要是驼峰式，而不是像使用数据属性指定时那样使用连字符。您还需要将基于字符串的参数值用引号括起来，否则您的脚本会认为它们是变量。这是您的示例的更新版本，该版本有效：

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cycle2 Example</title>
</head>
<body>
    <a href="#"><span class="prevControl">Prev</span></a>
    <a href="#"><span class="nextControl">Next</span></a>

    <div class="slides">
        <img src="http://malsup.github.com/images/p1.jpg" data-cycle-title="Spring" data-cycle-desc="Sonnenberg Gardens"/>
        <img src="http://malsup.github.com/images/p2.jpg" data-cycle-title="Redwoods" data-cycle-desc="Muir Woods National Monument"/>
        <img src="http://malsup.github.com/images/p3.jpg" data-cycle-title="Angel Island" data-cycle-desc="San Franscisco Bay"/>
        <img src="http://malsup.github.com/images/p4.jpg" data-cycle-title="Raquette Lake" data-cycle-desc="Adirondack State Park"/>

        <div class="cycle-caption"></div>
        <div class="cycle-overlay"></div>
    </div>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script src="http://malsup.github.io/jquery.cycle2.js"></script>
    <script>
        $('.slides').cycle({
            fx: "scrollHorz",
            timeout: 2000,
            speed: 700,
            prev: ".prevControl",
            next: ".nextControl",
            captionPlugin: "caption2",
            overlayFxSel: "div"
        });
    </script>
</body>
</html> 
```

`cycle-slideshow`除了以编程方式设置幻灯片时，我还可能使用 id 或类，这样它就不会被循环插件自动初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:59:11.253

您应该在此页面中包含对字幕插件的引用：

[http://www.malsup.com/jquery/cycle2/download/](http://www.malsup.com/jquery/cycle2/download/)

一个示例位于此处：

[http://www.malsup.com/jquery/cycle2/demo/caption2.php](http://www.malsup.com/jquery/cycle2/demo/caption2.php)

# assembly - 使用 MS-DOS int 21h 系统调用以汇编语言打印新行

> ID：15832893
> 
> 赞同：4
> 
> 时间：2013-04-05T11:34:06.360
> 
> 标签：assembly, x86, dos

在过去的几天里，我一直在尝试打印一个新行，同时还在 nasmide 中使用汇编语言打印字母，但无法得到它，到目前为止我尝试过的要么什么也没打印，只打印 A 或打印一个许多符号，谷歌对我没有帮助，所以我决定在这里发帖。

到目前为止我的代码是

```
CR equ 0DH
LF equ 0AH

main:
mov AH,02H
mov CX,26
mov DL, 'A'

while1:
cmp DL, 'A'
add DL, 01H
int 21H
mov DL, 0DH
mov DL, 0AH
int 21H
cmp DL, 'Z'
je Next
jmp while1

Next:
mov AH,4CH
int 21h 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-01-02T18:42:22.007

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T12:07:12.777

嗯，首先：

```
mov DL, 0DH
mov DL, 0AH
int 21H 
```

不会对你有任何好处。您将 0Dh 加载到 DL 中，然后立即用 0Ah 覆盖它，而无需使用第一个值...您需要在两个字符上进行调用（int 21h）...

此外，您使用 DL 换行会覆盖字符的先前使用...您需要根据需要保存和恢复该值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-19T09:02:55.153

100% 有效。

```
CR equ 0DH
LF equ 0AH

main: 
    mov DL, 'A'

while1:
    mov AH,02H      ;print character
    int 21H 

    mov BL, DL      ;store the value of DL before using DL for print new line

    mov DL, 10      ;printing new line
    mov AH, 02h
    int 21h
    mov DL, 13
    mov AH, 02h
    int 21h

    mov DL, BL      ;return the value to DL

    cmp DL, 'Z'
    je exit 
    add DL, 1       ;store in DL the next character
    jmp while1

exit:
    mov AH,4CH
    int 21h 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-14T04:55:34.990

你可以使用

```
 mov ah, 02h
 mov dl, 13
 int 21h
 mov dl, 10
 int 21h 
 ret 
```

但是在“main endp”的底部将其声明为proc，您可以将该函数命名为换行符并在需要换行符的地方调用它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-08T01:01:43.587

```
Mov Ah,02
Mov dl,42
Int 21
Mov dl,0a ---> next line 
Int 21
Mov dl,43
Int 21

Output: 
B
C 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2016-03-08T17:38:19.900

```
mov dl, 0a
int 21h
int 0ah 
```

尝试这个

# spring - 在 JBOSS AS 7 中部署 EAR 时 org.hibernate.ejb.Ejb3Configuration.configure 中的 java.lang.AbstractMethodError

> ID：15832895
> 
> 赞同：0
> 
> 时间：2013-04-05T11:34:14.293
> 
> 标签：spring, hibernate, jboss7.x

在 JBOSS AS7 中部署 EAR 时出现以下错误：

```
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [META-INF/springDAOContext.xml]: Invocation of init method failed; nested exception is java.lang.AbstractMethodError
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1338)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:473)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:308)
        at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:270)
        at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.detectPersistenceExceptionTranslators(PersistenceExceptionTranslationInterceptor.java:122)
        at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.<init>(PersistenceExceptionTranslationInterceptor.java:78)
        at org.springframework.dao.annotation.PersistenceExceptionTranslationAdvisor.<init>(PersistenceExceptionTranslationAdvisor.java:70)
        at org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor.setBeanFactory(PersistenceExceptionTranslationPostProcessor.java:97)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1326)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:473)
        ... 56 more
Caused by: java.lang.AbstractMethodError
        at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:632)
        at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:72) 
```

我在 JBOSS 7 中添加了 spring.jar (2.5.6) 作为模块。添加 spring 作为模块后，休眠类出现 NoClassDef 错误。为了解决这个问题，我在 spring 模块中添加了 org.hiberernate 模块的依赖项。

添加依赖项后出现 Abstractmethod 错误。我认为这是由于我的 lib 文件夹中的休眠 jar 和 JBOSS 模块之间的版本不匹配而发生的。

他们有什么办法可以强制 JBOSS 在我的 lib 目录中查找 hibernate jar 而不是模块？

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:09:51.883

由于 jar 中的版本不匹配而发生此问题。

我通过将 spring 版本升级到 3.2.2 并将 hibernate 版本升级到 4.0.1 解决了这个问题。

# javascript - SVG中矢量效果属性的特征检测？

> ID：15832896
> 
> 赞同：3
> 
> 时间：2013-04-05T11:34:16.237
> 
> 标签：javascript, html, svg, browser-feature-detection

SVG Tiny 1.2[定义了一个](http://www.w3.org/TR/SVGTiny12/painting.html#NonScalingStroke)名为`vector-effect`.

```
<path vector-effect="non-scaling-stroke" stroke-width="2"></path> 
```

使用上面的路径，即使元素被缩放（例如，由于`transform`父`g`元素上的 a ），笔触宽度将始终为 2 像素。

此属性似乎适用于大多数支持 SVG 的浏览器，**但不适用于 IE9 和 IE10**。

有没有办法对这个属性进行特征检测？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:53:56.463

这适用于 Firefox 和 IE 9。

```
 <script>
    var elm = document.createElementNS("http://www.w3.org/2000/svg", "g");
    if (elm.style.vectorEffect != undefined) {
      alert("Supported");
    } else {
      alert("Not Supported");
    }
  </script> 
```

或者，您可以尝试[Modernizr](http://modernizr.com/docs/#testprop)。我想是这样的。

```
Modernizr.testProp('vectorEffect') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-09T09:17:23.370

您无需创建元素。

```
if (document.documentElement.style.vectorEffect === undefined) {
  alert("Not Supported");
} else {
  alert("Supported");
} 
```

# jasper-reports - 从子报表返回一个值到主报表

> ID：15832900
> 
> 赞同：0
> 
> 时间：2013-04-05T11:34:28.600
> 
> 标签：jasper-reports

我按照[这个](https://stackoverflow.com/questions/7348408/returning-a-value-from-sub-report-to-main-report-in-ireport)线程尝试返回值`metrics.LINES_OF_CODE_1`并`metrics.MAINTAINABILITY_1`从子报告返回到主报告，但我得到的唯一值是 null。我的 JRXML 文件如下所示：

**主要报告**

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report7" language="groovy" pageWidth="842" pageHeight="595" orientation="Landscape" columnWidth="802" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="fd6ce9ca-1ecb-4541-b6b2-446f4da339de">
    <property name="ireport.jasperserver.reportUnit" value="/SAW/Database/report7"/>
    <property name="ireport.jasperserver.url" value="http://172.16.230.131:8081/jasperserver/ser vices/repository"/>
    <parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
        <defaultValueExpression><![CDATA["/Users/mjohansson/Downloads/"]]></defaultValueExpression>
    </parameter>
    <parameter name="ParameterMainReport" class="java.lang.String"/>
    <queryString language="MongoDbQuery">
        <![CDATA[{
    'collectionName':'benchmark',
    sort:{productivityAndProcessMetrics.operationalCost.overallCost:-1}
}]]>
    </queryString>
    <field name="systemID" class="java.lang.String"/>
    <field name="productivityAndProcessMetrics.operationalCost.overallCost" class="java.lang.Double"/>
    <variable name="metrics.LINES_OF_CODE_1" class="java.lang.Double" resetType="None" calculation="System"/>
    <variable name="metrics.MAINTAINABILITY_1" class="java.lang.Double" resetType="None" calculation="System"/>
    <title>
        <band height="20">
            <staticText>
            <reportElement uuid="248b1d82-f1a8-4a3e-8fab-58ed34517b9c" x="0" y="0" width="175" height="20"/>
                <box>
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement>
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[System ID]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="a2b5c406-76a0-4ffa-b84f-fcf17d43a768" x="275" y="0" width="125" height="20"/>
                <box>
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Right">
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[LOC]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="26c40738-a9c9-4e3a-8f32-2d69f38be204" x="175" y="0" width="100" height="20"/>
                <box>
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Right">
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[MaintenanceCost]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="2cca751f-1ffa-4c6e-855c-24c5bf4a9b3f" x="400" y="0" width="125" height="20"/>
                <box>
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Right">
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[Maintainability]]></text>
            </staticText>
        </band>
    </title>
    <detail>
        <band height="21" splitType="Stretch">
            <textField isBlankWhenNull="true">
                <reportElement uuid="1510b437-bfe1-4610-aeea-78c24d5f0c42" x="0" y="1" width="175" height="20" isRemoveLineWhenBlank="true"/>
                <box>
                    <topPen lineWidth="0.0"/>
                <leftPen lineWidth="0.0"/>
                    <bottomPen lineWidth="0.0"/>
                    <rightPen lineWidth="0.0"/>
                </box>
                <textElement/>
                <textFieldExpression>    <![CDATA[($F{productivityAndProcessMetrics.operationalCost.overallCost}!=null)?$F{systemID}:""]]></textFieldExpression>
        </textField>
        <subreport>
            <reportElement uuid="2252d608-802e-442f-a3ee-07619e955640" x="275" y="1" width="250" height="20" isRemoveLineWhenBlank="true"/>
            <subreportParameter name="SystemID">
                <subreportParameterExpression><![CDATA[($F{productivityAndProcessMetrics.operationalCost.overallCost}!=null)?$F{systemID}:null]]></subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="ParameterSubReport">
                <subreportParameterExpression><![CDATA[$P{ParameterMainReport}]]></subreportParameterExpression>
            </subreportParameter>
            <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
            <returnValue subreportVariable="metrics.LINES_OF_CODE_1" toVariable="metrics.LINES_OF_CODE_1"/>
            <returnValue subreportVariable="metrics.MAINTAINABILITY_1" toVariable="metrics.MAINTAINABILITY_1"/>
            <subreportExpression><![CDATA["repo:report7_subreport1.jrxml"]]></subreportExpression>
        </subreport>
        <textField pattern="#,##0.00" isBlankWhenNull="true">
            <reportElement uuid="d81f0296-7dff-4cdc-9d48-ec477154fc0e" x="175" y="1" width="100" height="20" isRemoveLineWhenBlank="true"/>
            <textElement textAlignment="Right"/>
            <textFieldExpression><![CDATA[$F{productivityAndProcessMetrics.operationalCost.overallCost}]]></textFieldExpression>
        </textField>
        <textField>
            <reportElement uuid="4c995889-51aa-42db-8e44-ef169372330c" x="525" y="1" width="100" height="20"/>
            <textElement/>
            <textFieldExpression><![CDATA[$V{metrics.LINES_OF_CODE_1}]]></textFieldExpression>
        </textField>
        <textField>
            <reportElement uuid="fb61c381-1862-4817-a7ad-23f24d142e6a" x="625" y="1" width="100" height="20"/>
            <textElement/>
            <textFieldExpression><![CDATA[$V{metrics.MAINTAINABILITY_1}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
</jasperReport> 
```

**子报告**

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report7_subreport1" language="groovy" pageWidth="250" pageHeight="802" columnWidth="250" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="3ec7fa69-029a-4882-8308-8496807fe30d">
    <property name="ireport.jasperserver.reportUnit" value="/SAW/Database/report7"/>
    <property name="ireport.jasperserver.url" value="http://172.16.230.131:8081/jasperserver/services/repository"/>
    <parameter name="ParameterSubReport" class="java.lang.String"/>
    <parameter name="SystemID" class="java.lang.String">
        <parameterDescription><![CDATA[]]></parameterDescription>
    </parameter>
    <queryString language="MongoDbQuery">
        <![CDATA[{
    'collectionName':'systemMetrics',
    'findQueryRegEx':{lang:'/^ALL_LANGUAGES_AGGREGATE/' ,sysID:'/^$P!{SystemID}/'}
}]]></queryString>
    <field name="metrics.LINES_OF_CODE" class="java.lang.Double"/>
    <field name="metrics.MAINTAINABILITY" class="java.lang.Double"/>
    <field name="sysID" class="java.lang.String"/>
    <variable name="metrics.LINES_OF_CODE_1" class="java.lang.Double" resetType="None">
        <variableExpression><![CDATA[$F{metrics.LINES_OF_CODE}]]></variableExpression>
    </variable>
    <variable name="metrics.MAINTAINABILITY_1" class="java.lang.Double" resetType="None">
        <variableExpression><![CDATA[$F{metrics.MAINTAINABILITY}]]></variableExpression>
    </variable>
    <background>
        <band splitType="Stretch"/>
    </background>
    <summary>
        <band height="20">
            <textField pattern="#,##0.00" isBlankWhenNull="true">
                <reportElement uuid="48938680-a5b7-4d16-b3e0-79e02a43336c" x="0" y="0" width="125" height="20"/>
                <textElement textAlignment="Right"/>
                <textFieldExpression><![CDATA[$V{metrics.LINES_OF_CODE_1}]]></textFieldExpression>
            </textField>
            <textField pattern="#,##0.00" isBlankWhenNull="true">
                <reportElement uuid="59f69b58-fd5c-44a8-abdd-410e30d48627" x="125" y="0" width="125" height="20"/>
                <textElement textAlignment="Right"/>
                <textFieldExpression><![CDATA[$V{metrics.MAINTAINABILITY_1}]]></textFieldExpression>
            </textField>
        </band>
    </summary>
</jasperReport> 
```

我究竟做错了什么？任何输入都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:29:32.720

我通过在将我的输出变量从“现在”调用为“自动”的字段上设置评估时间自行解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-05T09:49:51.263

对于无法更改评估时间的人（例如，因为他们希望将变量作为参数传递给另一个子报表）：

**不要在与子报表本身相同的范围内使用变量返回！**

我想在乐队的渲染结束时，做作就完成了……

所以---->“*添加另一个乐队*”并在里面使用你的变量；）

希望这会有所帮助，我花了几个小时才发现这一点！

# wordpress - “无法修改标题...”错误

> ID：15832902
> 
> 赞同：0
> 
> 时间：2013-04-05T11:34:30.813
> 
> 标签：wordpress

我`Cannot modify header...`在 Wordpress 中遇到了错误。我尝试了所有退格的东西，但没有奏效。最后，我必须清除我的 function.php 中的所有输入。

这使得我的 function.php 文件在我工作时读起来很不愉快。有人可以解释为什么我不能使用回车键吗？因为当我输入一个空白行时，错误消息马上回来了？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-23T10:18:48.217

有时，它不仅会发生在functions.php 中的空格。

有时，如果您在 wp-config.php 中也有空格，就会发生这种情况。

只需按照以下选项和步骤操作即可。

> [http://www.mytrickpages.com/2013/11/how-to-fix-wordpress-error-cannot-modify-header-information.html](http://www.mytrickpages.com/2013/11/how-to-fix-wordpress-error-cannot-modify-header-information.html)

# php - 在 PHP 中获取 JSON 对象，而不是数组

> ID：15832907
> 
> 赞同：1
> 
> 时间：2013-04-05T11:34:46.487
> 
> 标签：php, json

我用 php 编写了一个网站，该网站从我创建的另一个 php-api 获取 JSONstring。字符串如下所示：

```
{
    "result": "true",
    "results": {
        "20": {
            "id": "20",
            "desc": "a b ct tr",
            "active": "1",
            "startdate": "2013-04-03",
            "starttimehour": "18",
            "starttimemin": "0",
            "enddate": "2013-04-03",
            "endtimehour": "22",
            "endtimemin": "0",
            "creator": "a"
        },
        "21": {
            "id": "21",
            "desc": "test",
            "active": "0",
            "startdate": "2013-04-04",
            "starttimehour": "18",
            "starttimemin": "0",
            "enddate": "2013-04-04",
            "endtimehour": "22",
            "endtimemin": "0",
            "creator": "a"
        }
    }
} 
```

我找到了很多关于如何从 JSONarray 获取信息的答案，但我在这里没有使用数组。所以问题是：我怎样才能得到标记为 20、21 等的对象（这些数字是由服务器生成的，所以我不知道哪些会被返回）。

或者我应该重写我的 api 如何将 JSON 作为数组返回。像这样的东西：

```
{"result"="true", "results":[{...},{...},{...}]} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:41:21.807

```
$json = json_decode($json_string, True);
foreach($json['results'] as $key => $value) {
    // access the number with $key and the associated object with $value
    echo 'Number: '.$key;
    echo 'Startdate: '.$value['startdate'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:45:17.643

我想你是通过 POST 获取 json 而没有任何参数，比如

```
curl http://someapi.somedomain/someresource/ -X POST -d @data.json 
```

所以基本上

```
$data = file_get_contents('php://input');
$object = json_decode($data);
print_r($object); 
```

应该可以解决您的问题。$object 将是您发布的 json 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T11:47:08.270

您确实将 JSON 响应作为字符串获取。这就是 JSON 的工作方式。要将数据“转换”为易于访问的格式和结构，您可以使用名为`json_decode()`.

使用该功能时有两种选择 -

1.  将数据转换为数组。`json_decode($jsonString,true)`
    如果您使用此方法，您将像访问关联数组一样访问数据。 `$jsonArray['results']['21']`

2.  将数据转换为对象。`json_decode($jsonString)`
    使用此方法，您将使用对象表示法来遍历数据 -
    `$num = 21;`
    `$jsonObj->results->$num`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T11:53:56.057

首先你解码字符串（$string）然后你可以遍历它并获取对象的所有属性。请记住，使用 ->prop 而不是 ['prop'] 访问属性。这样您就不必以数组方式处理它。

```
$jsoned = json_decode($string);
    foreach($jsoned->results as $o) {
        foreach($o as $key => $value) {
            echo "The key is: ".$key." and the value is: ".$value."<br>";
        }
    } 
```

工作示例将打印出什么：

键是：id，值是：20

键是：desc，值是：ab ct tr

键是：活动，值是：1

ETC...

# jquery - 多次使用jquery附加表

> ID：15832915
> 
> 赞同：1
> 
> 时间：2013-04-05T11:35:02.957
> 
> 标签：jquery, html

这是我的 jquery 函数

```
var status; 
$('.status').click(function(e) {
     status= $(this).attr('id');                    
     //$('#test').html('<p>Scrolled: '+ status +'</p>');                
     callAjax();
     display();
}); 
```

上面的这个函数获取点击的超引用的 id 并将其存储在一个变量中。并调用其他函数。

```
 var id = [];
 var values = [];
 function callAjax(){            
     id = [];
     values = [];
     $("#"+ status +"> td").each(function(index){                
     id.push($(this).attr("id"))
     values.push($(this).text());
     //alert($(this).attr("id")+" "+$(this).text());                          
  });           
} 
```

上面的这个函数从行中检索所有值并将其存储在一个数组中。使用这个数组值我将创建一个新表并将其显示在单击的超链接下方（其 div 存储状态变量）

```
 function display(){               
            $("#"+status).append('<table id="newtable" border="1"> <tr> <td>'+values[0]+'</td><td>'+values[1]+'</td></tr></table>');
  } 
```

在 display() 函数中，当我第一次附加表格时，它工作正常，但是当再次单击链接时，它又附加了一个表格。

输出

![在此处输入图像描述](https://i.stack.imgur.com/luqjs.png)

在这里，当我第一次单击链接时，它会正确显示表格，但是当我单击相同的链接时，它会附加相同的表格，第二个问题是当我单击其他链接时，第一个表格应该消失。

帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:42:06.843

试试这个

```
function display(){ 
       $("#newtable").remove();   //removes table tag        
    $("#"+status).append('<table id="newtable" border="1"> <tr> <td>'+values[0]+'</td>                             <td>'+values[1]+'</td></tr></table>');
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:37:31.977

清除`$("#"+status)`之前附加的 .

```
 function display(){       
 $("#"+status).clear();      
 $("#"+status).append('<table id="newtable" border="1">
               <tr> <td>'+values[0]+'</td><td>'+values[1]+'</td></tr></table>');
        } 
```

或如评论中提到的@juhana

```
 function display(){       
     $("#"+status).html('<table id="newtable" border="1">
               <tr> <td>'+values[0]+'</td><td>'+values[1]+'</td></tr></table>');
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T11:41:18.560

首先你清除 div 并附加 div.append 意味着只附加你给的 wat ex:in div 包含 text1 意味着如果你附加 test2 意味着它会附加测试 1 test2 明智你只需要清除 div 并附加值

```
 function display(){   
                $("#"+status).empty();          
                $("#"+status).append('<table id="newtable" border="1"> <tr> <td>'+values[0]+'</td><td>'+values[1]+'</td></tr></table>');
            } 
```

# ftp - 致命错误：无法读取 **** 字节。这是关于 FTP 十六进制下载

> ID：15832916
> 
> 赞同：-1
> 
> 时间：2013-04-05T11:35:03.887
> 
> 标签：ftp

-PHP被Zend加密运行一年后下载FTP到本地环境报“Unable to read 44367 bytes in F:\nginx\APMServ5.2.6”求解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:41:33.527

嗯，您正在阅读由 ZEND 编码的**加密 PHP 文件。**加密期间指定的编码时间*应该已经过期*。

# android - 如何在android中根据位置动态添加和删除特定视图？

> ID：15832917
> 
> 赞同：2
> 
> 时间：2013-04-05T11:35:04.733
> 
> 标签：android, views

我正在 android 中实现用于创建动态视图的示例应用程序。

请注意下图............

![在此处输入图像描述](https://i.stack.imgur.com/tOzrM.png)

通过查看上面的图片，我想创建一个动态视图，它由关闭 imageview、按钮、微调器和 edittext 组成，方法是单击加号按钮。输入所有字段后，我单击加号按钮，类似地使用上述小部件创建新视图。

我想通过单击删除图像视图来删除特定行。然后通过单击加号再次添加，重复此过程直到我们想要多少行。然后我们点击提交按钮获取所有视图值行并在下一个屏幕上显示这些详细信息......

并且还告诉我其他方式，即是否有可能为该视图创建单独的 xml 文件并在我们的代码中使用它......

就像看下图...

![在此处输入图像描述](https://i.stack.imgur.com/SyvF8.png)

请帮助我......提前谢谢......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:46:50.550

如果您将视图存储在像列表这样的可迭代数据结构中，您可以在单击“删除”按钮时对其进行迭代，并通过调用 getX() 和 getY() 检查坐标来搜索要删除的视图。

然而，就像 lfor 之前所说的，更好的方法是为每一行创建一个自己的数据结构。我建议创建一个“Row”类，其中包含您要为每行添加的视图，包括“delete”-Button 并传递您想要将行添加到的 Activity 作为参考。通过这样做，您可以通过在“Row”类中调用活动的方法 addContentView() 来为每一行添加组件。当按下删除按钮时，您还知道必须删除哪些视图（您所在的所有“行”对象）。

# java - 使用 Google App Engine 进行缓存

> ID：15832919
> 
> 赞同：1
> 
> 时间：2013-04-05T11:35:05.737
> 
> 标签：java, google-app-engine

使用 App Engine 数据存储区存储实体时，应用的缓存技术是什么。

我的意思是，如果没有缓存，我们只是简单地做这样的事情：

```
DatastoreService _ds = DatastoreServiceFactory.getDatastoreService();
public void put(String key, String value){
    try {
       Entity e = new Entity(createKey(key)); 
       e.setProperty("key", key);
       e.setProperty("value", value); 
       _ds.put(e); 
    } catch (Exception e) {
       // handle exception
    }
} 
```

那么缓存在哪里发挥作用呢？此外，在 get 方法期间缓存如何发挥作用。

**更新：**

*   简单地说，我的问题是何时进行缓存。我的基本实现根本不做缓存，只是简单地放入数据存储区。
*   应该在我的代码中的最低级别的 API 或高级 API 上实现缓存，在我的情况下，我拥有的最低级别的 API 就是这个，放入和获取数据存储区。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T16:13:59.430

在应用引擎中实际上有两种缓存需要考虑：用于 ds 实体的 memcache 和用于静态资产的边缘缓存。来自谷歌的这段视频很好地涵盖了具体的代码示例：

[Google I/O 2012 - 优化您的 Google App Engine 应用程序](http://www.youtube.com/watch?v=zQ5_47zy4bY)

对于边缘缓存，您还可以查看 Brandon Wirtz 的这篇文章，因为文档有点薄： [启用边缘缓存](http://www.xyhd.tv/2011/11/industry-news/setting-cache-control-headers-in-python-to-take-advantage-of-google-appengines-edgecache/)

# java - 使用哪种数据结构或算法来排列字典数据以进行序列搜索？

> ID：15832925
> 
> 赞同：1
> 
> 时间：2013-04-05T11:35:23.610
> 
> 标签：java, algorithm, data-structures, dictionary

我有一本大约有一百万字的字典。我必须设计算法来快速搜索字符序列。

例如。如果用户键入，则应用程序必须返回具有, , ... 等 `and`序列的单词。`random``sand``stand`

我现有的解决方案是在所有现有单词中搜索匹配的正则表达式，这是无效的。如果需要，我愿意重组现有数据库、字典缓存或任何级别的工作或者在 java 中有一些现成的 api？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:40:22.440

[http://lucene.apache.org/core/](http://lucene.apache.org/core/)

看看这个，这应该符合你的要求。

```
final File INDEX_DIR = new File("index");  
try{  
    Class.forName("com.mysql.jdbc.Driver").newInstance();  
    Connection conn = DriverManager.getConnection("jdbc:mysql://localhost/test", "root", "password");  
    StandardAnalyzer analyzer = new StandardAnalyzer();  
    IndexWriter writer = new IndexWriter(INDEX_DIR, analyzer, true);  
    System.out.println("Indexing to directory '" + INDEX_DIR + "'...");  
    indexDocs(writer, conn);  
    writer.optimize();  
    writer.close();  
} catch (Exception e) {  
    e.printStackTrace();  
}  

void indexDocs(IndexWriter writer, Connection conn) throws Exception {  
String sql = "select id, name, color from pet";  
Statement stmt = conn.createStatement();  
ResultSet rs = stmt.executeQuery(sql);  
while (rs.next()) {  
    Document d = new Document();  
    d.add(new Field("id", rs.getString("id"), Field.Store.YES, Field.Index.NO));  
    d.add(new Field("name", rs.getString("name"), Field.Store.NO,  Field.Index.TOKENIZED));  
    d.add(new Field("address", rs.getString("address"),Field.Store.NO, Field.Index.TOKENIZED));  
    writer.addDocument(d);  
  }  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:40:53.400

我会尝试使用 trie（[在哪里可以找到 Java 中基于标准 Trie 的地图实现？](https://stackoverflow.com/questions/623892/where-do-i-find-a-standard-trie-based-map-implementation-in-java)）。根据您的要求，使用内存中的 lucene 索引也可能符合要求

# c# - 在 C# 中将数据从 Datagridview 插入到 Datatable？

> ID：15832929
> 
> 赞同：0
> 
> 时间：2013-04-05T11:35:35.203
> 
> 标签：c#, database, datagridview, insert

我能够使用 C# 将数据从 DataGridView 插入到 Datatable。但我无法使用 c# windows 应用程序将数据从 Datagridview 更新到数据表？

```
 for (int i = 0; i <= dgvSpplrfrm.Rows.Count-1;i++)
        {
            drLocal = dtLocalC.NewRow();
            drLocal["splr_Slno"] = dgvSpplrfrm.Rows[i].Cells[0].Value;
            drLocal["splr_Cntctnm"] = dgvSpplrfrm.Rows[i].Cells[1].Value;
            drLocal["splr_Cntctdesig"] = dgvSpplrfrm.Rows[i].Cells[2].Value;
            drLocal["splr_Cntctmoblno"] = dgvSpplrfrm.Rows[i].Cells[3].Value;
            drLocal["splr_Cntctemail"] = dgvSpplrfrm.Rows[i].Cells[4].Value;
            dtLocalC.Rows.Add(drLocal);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-27T07:04:59.703

只需你可以这样做：

```
public DataTable GetDataTable()
{
   return dgvSpplrfrm.Rows.Cast<DataRow>().CopyToDataTable();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:34:18.783

确保您`DataTable`包含要复制的所有列。小心`ColumnName`的`DataTable`和`DataGridView`。你可以试试这个：

```
public DataTable GetDataTable()
{
    DataTable dtLocalC = new DataTable();
    dtLocalC.Columns.Add("splr_Slno");
    dtLocalC.Columns.Add("splr_Cntctnm");
    dtLocalC.Columns.Add("splr_Cntctdesig");
    dtLocalC.Columns.Add("splr_Cntctmoblno");
    dtLocalC.Columns.Add("splr_Cntctemail");

    DataRow drLocal = null;
    foreach (DataGridViewRow dr in dgvSpplrfrm.Rows)
    {
        drLocal = dtLocalC.NewRow();
        drLocal["splr_Slno"] = dr.Cells["splr_Slno"].Value;
        drLocal["splr_Cntctnm"] = dr.Cells["splr_Cntctnm"].Value;
        drLocal["splr_Cntctdesig"] = dr.Cells["splr_Cntctdesig"].Value;
        drLocal["splr_Cntctmoblno"] = dr.Cells["splr_Cntctmoblno"].Value;
        drLocal["splr_Cntctemail"] = dr.Cells["splr_Cntctemail"].Value;
        dtLocalC.Rows.Add(drLocal);
    }

    return dtLocalC;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T11:53:34.157

您需要查看将 DataTable 对象绑定到 DatagridView。

您可以使用 BindingSource 来执行此操作：-

[http://msdn.microsoft.com/en-gb/library/system.windows.forms.bindingsource.aspx](http://msdn.microsoft.com/en-gb/library/system.windows.forms.bindingsource.aspx)

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T11:58:44.280

一篇文章演示了如何从 GridView 中获取数据以及如何将其存储到 DataTable 中。看看下面的资源

[资源链接](http://www.c-sharpcorner.com/uploadfile/cd3aa3/fetch-data-from-gridview-and-store-into-datatable/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T13:57:39.737

我试过这个..可能这个对你有帮助..

第1步：

将 GridView 拖到窗体上并将其 AutoGenerateColumns 属性设置为 False。

使用模板字段来显示 GridView 数据。根据您的要求设计 GridView。

```
<asp:GridView runat="server" ID="gvShoppingCart" AutoGenerateColumns="False" 
                 EmptyDataText="There is nothing in your shopping cart." GridLines="None" 
                 Width="31%" CellPadding="5" ShowFooter="True" DataKeyNames="BookId" onrowdeleting="gvShoppingCart_RowDeleting"  
                  >  
                 <HeaderStyle HorizontalAlign="Left" BackColor="#3D7169" ForeColor="#FFFFFF" />  
                 <FooterStyle HorizontalAlign="Right" BackColor="#6C6B66" ForeColor="#FFFFFF" />  
                 <AlternatingRowStyle BackColor="#F8F8F8" />  
                 <Columns>  
                      <asp:TemplateField HeaderText="Book Iamge">
                      <ItemTemplate>
                          <asp:Image ID="BookImg" ImageUrl='<%# Eval("BookImage") %>' runat="server" hight="15px" width="20px"/>

                      </ItemTemplate>
                      </asp:TemplateField>
                      <asp:TemplateField HeaderText="Book Name">  
                         <ItemTemplate>  
                             <asp:Label ID="lblBookName" runat="server" Text='<%#Eval("BookName")%>'></asp:Label><br /> 
                         </ItemTemplate>
                         </asp:TemplateField>
                      <asp:TemplateField HeaderText="Price">  
                         <ItemTemplate>  
                             <asp:Label ID="lblPrice" runat="server" Text='<%#Eval("Bookprice")%>'></asp:Label><br />  
                         </ItemTemplate>

                     </asp:TemplateField>  

                   <asp:TemplateField HeaderText="Quantity">
                  <ItemTemplate>
                      <asp:TextBox ID="TXTQty" runat="server"  Text="1" Width="40px" onkeyup="CalculateTotals();"></asp:TextBox>
                  </ItemTemplate>
                  <FooterTemplate>
                      <b>Total Amount:</b>
                  </FooterTemplate>
              </asp:TemplateField>
              <asp:TemplateField HeaderText="Total">
                  <ItemTemplate>
                      <asp:Label ID="LBLSubTotal" runat="server" ></asp:Label>
</ItemTemplate>
                  <FooterTemplate>
                      <asp:Label ID="LBLTotal" runat="server" ForeColor="White" ></asp:Label>
                  </FooterTemplate>
              </asp:TemplateField>

                     <asp:CommandField DeleteText="Remove" ShowDeleteButton="True" />

                 </Columns>  
             </asp:GridView> 
```

在 Eval 中传递您的表列名称。

第2步：

使用以下代码从 GridView 获取数据并将其存储到 DataTable 中。

```
private void getGridInfo()
    {
        DataTable dt = new DataTable();
        DataRow dr;
        dt.Columns.Add(new System.Data.DataColumn("BookName", typeof(String)));
        dt.Columns.Add(new System.Data.DataColumn("BookQty", typeof(String)));
        dt.Columns.Add(new System.Data.DataColumn("BookImg", typeof(String)));

        foreach (GridViewRow row in gvShoppingCart.Rows)
        {
            Image Bookimg = (Image)row.FindControl("BookImg");
            Label Booknames = (Label)row.FindControl("lblBookName");
            TextBox Bookqty = (TextBox)row.FindControl("TXTQty");
            Label TotalPrice = (Label)row.FindControl("LBLTotal");
            dr = dt.NewRow();
            dr[0] = Booknames.Text;
            dr[1] = Bookqty.Text;
            dr[2] = Bookimg.ImageUrl.ToString();
            dt.Rows.Add(dr);
        }
        Session["QtyTable"] = dt;
        Response.Redirect("Admin/Default.aspx");
    } 
```

第 3 步：

在 dt.Columns.Add(new System.Data.DataColumn("BookName", typeof(String))) 中，您可以为该列编写任何标题文本。

在要将 GridView 数据存储到 DataTable 的地方调用此函数。

# php - 以整数形式返回月差

> ID：15832932
> 
> 赞同：0
> 
> 时间：2013-04-05T11:35:38.520
> 
> 标签：php, arrays, function, product

我正在尝试将月差作为整数返回并调用 if 到表列。我的代码：

```
function ETA($ArrivalDate, $pattern = 'mysql'){

$patterns = array(
    'eu'    => 'd/m/Y',
    'mysql' => 'Y-m-d',
    'us'    => 'm/d/Y',
);
    $CurrentDate = date("Y-m-d");

    $ArrivalDate = $variants_data['ArrivalDate'];

    $diff = $ArrivalDate->diff($CurrentDate);

    return $diff->y;

} 
```

我称之为

```
<td>'.$_GET['ETA'].'</td> 
```

但是什么都没有返回，我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:59:09.920

您可以使用PHP中的[DateTime对象以更简单的方法获得所需的内容：](http://php.net/manual/en/class.datetime.php)

```
function ETA($ArrivalDate){
    $currentDate = new DateTime();
    $arrivalDate = new DateTime($ArrivalDate);
    $interval    = $currentDate->diff($arrivalDate);
    return $interval->format('%m');
} 
```

请参阅工作示例：http: [//3v4l.org/UlPQo](http://3v4l.org/UlPQo)

如果您没有以[适当的格式](http://www.php.net/manual/en/datetime.formats.php)传递$ArrivalDate，则会引发[异常](http://php.net/manual/en/language.exceptions.php)，因此您需要将调用包装在 Try/Catch 中。

有关返回值的更多信息，请参阅[日期时间间隔格式](http://www.php.net/manual/en/dateinterval.format.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:42:36.773

试试这个简单的

```
<?php
  //for months
  $monthdiff=floor((abs(strtotime(date("d/m/Y")) - strtotime($ArrivalDate))/(60*60*24*30)));
  //for days
  $daydiff=floor((abs(strtotime(date("d/m/Y")) - strtotime($ArrivalDate))/(60*60*24)));

  ?> 
```

# c# - C# 代码（方法）在应用程序关闭时运行

> ID：15832936
> 
> 赞同：0
> 
> 时间：2013-04-05T11:35:51.450
> 
> 标签：c#, winforms, methods, close-application

我有一个按钮，按下该按钮会关闭当前表单并打开同一类的新表单 - 即它会以原始状态打开一个新表单。

我有另一个具有相同功能的按钮，但是我尝试在代码中调用一个函数，因此当新表单打开时，它会运行表单`importGantt()`的一个函数。

`importGantt()`我遇到的问题是，当我单击按钮时，它会按预期关闭当前表单并打开一个新表单，但是在我关闭应用程序之前它不会调用该函数。

有任何想法吗？

非常感激。

```
private void browseFileToolStripMenuItem_Click(object sender, EventArgs e)
    {
        clearAndImport();
    }

private void clearAndImport()
    {
        this.Hide();
        Dashboard dashboard = new Dashboard();
        dashboard.ShowDialog();
        dashboard.importGantt();
        this.Close();
    }

private void importGantt()
    {
        // Edit Interface
        btnImport.Visible = false;
        dataCapPlan.Visible = true;
        dataMilestones.Visible = true;
        pnlGantt.Visible = true;
        Graphics ganttGraphics = pnlGantt.CreateGraphics();

        // Draw axis

        // Import Files
        fileCapPlan.Title = "Select Capital Plan File";
        fileCapPlan.Filter = "Excel Workbook (.xlsx)|*.xlsx";
        DialogResult resCapPlan = fileCapPlan.ShowDialog();
        if (resCapPlan == DialogResult.OK)
        {
            cnStr = cnStr + fileCapPlan.FileName;
        }
        else
        {
            MessageBox.Show("Error: Unable to import file");
        }
        fileMilestones.Title = "Select Milestones File";
        fileMilestones.Filter = "Excel Workbook (.xlsx)|*.xlsx";
        DialogResult resMilestones = fileMilestones.ShowDialog();
        if (resMilestones == DialogResult.OK)
        {
            cnStr2 = cnStr2 + fileMilestones.FileName;
        }
        else
        {
            MessageBox.Show("Error: Unable to import file");
        }

        // Use OleDb connection to import Excel data
        using (OleDbConnection cn = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + cnStr + ";Extended Properties=" + "'EXCEL 12.0 Xml;HDR=YES'"))
        {
            using (OleDbDataAdapter adapter = new OleDbDataAdapter(sqlSelectAll, cn))
            {
                adapter.Fill(dtCapPlan);
                dataCapPlan.DataSource = dtCapPlan;
                dataCapPlan.AutoResizeColumns();
            }
        }
        using (OleDbConnection cn = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + cnStr2 + ";Extended Properties=" + "'EXCEL 12.0 Xml;HDR=YES'"))
        {
            using (OleDbDataAdapter adapter = new OleDbDataAdapter(sqlSelectAll, cn))
            {
                adapter.Fill(dtMilestones);
                dataMilestones.DataSource = dtMilestones;
                dataMilestones.AutoResizeColumns();
            }
        }

        // Draw Gantt Chart
        foreach (DataRow rowCapPlan in dtCapPlan.Rows)
        {
            id = rowCapPlan["Program ID"].ToString();

            foreach (DataRow rowMilestone in dtMilestones.Rows)
            {
                if (id == rowMilestone["Program ID"].ToString())
                {
                    // calculate space in days from todays date and the milestone date
                    msDate = Convert.ToDateTime(rowMilestone["Milestone Date"]);
                    msTimespan = msDate - calDate;
                    msIntDate = (int)msTimespan.TotalDays + 1;
                    tTimespan = tDate - calDate;
                    tIntDate = (int)tTimespan.TotalDays + 1;
                    ganttPlotSpace = msIntDate - tIntDate;

                    // Draw each milestone or gateway which is not yet complete
                    if (rowMilestone["% Complete"].ToString() != "100")
                    {
                        taskname = rowMilestone["Task Name"].ToString();
                        if (taskname == "Gateway 1" || taskname == "Gateway 2" || taskname == "Gateway 3" || taskname == "Gateway 4" || taskname == "Gateway 5")
                        {
                            Rectangle gw = new Rectangle(startx + ganttPlotSpace, starty - 4, 2, 11);
                            ganttGraphics.DrawRectangle(gwPen, gw);
                            ganttGraphics.FillRectangle(gwBrush, gw);
                        }
                        else
                        {
                            Rectangle ms = new Rectangle(startx + ganttPlotSpace + 1, starty, 2, 2);
                            ganttGraphics.DrawRectangle(msPen, ms);
                            ganttGraphics.FillRectangle(msBrush, ms);
                        }
                        ganttGraphics.DrawLine(linePen, startx - 10, starty - 11, pnlGantt.Right, starty - 11);
                    }
                }
            }
            starty = starty + 22;
        }
        ganttGraphics.DrawLine(linePen, startx - 10, starty + 11, pnlGantt.Right, starty + 11);
    } 
```

带有甘特图的图像 ![在此处输入图像描述](https://i.stack.imgur.com/zRwqQ.png)

clearAndImport 方法后的图像（由用户修复） ![在此处输入图像描述](https://i.stack.imgur.com/5178n.png)

* * *

根据 Brij 指导：

好的，所以在指导下这几乎可以工作，代码现在如下......

现在这会打开新表单并运行导入方法，但是，它似乎是在循环运行它。即它运行成功显示甘特图，但随后尝试再次运行导入甘特图方法。

```
bool clear;

public Dashboard(bool clear = false)
    {
        InitializeComponent();
        dataCapPlan.ColumnHeaderMouseClick += new DataGridViewCellMouseEventHandler(dataCapPlan_ColumnHeaderMouseClick);

        this.clear = clear;
        this.Load += new EventHandler(Dashboard_Load);
    }
    private void Dashboard_Load(object sender, EventArgs e)
    {
        if (this.clear)
        {
            this.importGantt();
        }
    }

// Clear and import method
    private void clearAndImport()
    {
        this.Hide();
        Dashboard dashboard = new Dashboard();
        dashboard.clear = true;
        dashboard.ShowDialog();
        this.Close();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:44:34.857

我认为您所指的方法如下：

```
private void clearAndImport()
{
        this.Hide();
        Dashboard dashboard = new Dashboard();
        dashboard.ShowDialog();
        dashboard.importGantt();
        this.Close();
} 
```

你在打电话`dashboard.ShowDialog()`。`dashboard.importGantt()`因此，在您关闭“仪表板”表单之前，不会调用下一行代码 ( )。我建议您调用`importGantt()`Dashboard 表单的构造函数或 Load 事件。`dashboard.importGantt(`您也可以通过移动上面的 )来更改代码的顺序`dashboard.ShowDialog()`。

* * *

根据您的评论，我建议修改`Dashboard`类的构造函数以接受布尔参数并使其可选（默认为 false）。如果通过了 true，则只调用 importGantt()。所以它会像：

```
public Dashboard(bool clear = false)
{
   InitializeComponent();
   if(clear)
   {
       this.importGantt();
   }
} 
```

你的`clearAndImport()`方法就像：

```
private void clearAndImport()
{
        this.Hide();
        Dashboard dashboard = new Dashboard(true);
        dashboard.ShowDialog();
        this.Close();
} 
```

* * *

根据我最后的评论，试试这个：

```
bool clear = false;
public Dashboard(bool clear = false)
{
        InitializeComponent();
        this.clear = clear;
        this.Load += new EventHandler(Dashboard_Load);
}

void Dashboard_Load(object sender, EventArgs)
{
    if(this.clear)
    {
       this.importGantt();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:43:08.030

尝试`dashboard.Show();`代替`dashboard.ShowDialog();`

```
using (var dashboard = new Dashboard())
{
    dashboard.Show(); // Show the form
    dashboard.importGantt(); // Call
    dashboard.Close(); // Close it when you're done...
} 
```

# c# - 通过取色排除图像的一部分

> ID：15832944
> 
> 赞同：2
> 
> 时间：2013-04-05T11:36:17.663
> 
> 标签：c#, winforms, image

我的问题很简单，但我无法处理。我有一个 yin-yang.jpg 文件，我想只得到圆形（没有其余的矩形，应该不可点击），更重要的是整个白色变成红色，黑色的部分应该被排除也来自图像（不可点击）。

该图像将是我的表单的背景，我想在应用程序开始时显示它。

```
private void hello_form_Paint(object sender, PaintEventArgs e)
    {
        Form f = (Form)sender;
        f.BackgroundImage = global::TicTacToe.Properties.Resources.ying_yang1;
        GraphicsPath formPath = new GraphicsPath();
        Rectangle newRectangle = f.ClientRectangle;
        e.Graphics.DrawEllipse(System.Drawing.Pens.Black, newRectangle);
        newRectangle.Inflate(-5, -5);
        formPath.AddEllipse(newRectangle);
        f.Region = new Region(formPath);

    } 
```

我展示的表格上的绘画事件使它们变得圆润，但这并不是我必须做的所有事情。如何从背景中排除黑色部分以及如何将白色部分变为红色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:44:28.340

如果您使用具有透明背景的文件（如 .png 或 .gif），则当您将其设置为表单背景时，您应该只能看到圆形的阴阳形状。您可以使用 GIMP 或 Photoshop 轻松编辑 .jpg 文件，以使矩形在圆外透明。

编辑：这是你想要做的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:01:47.553

鉴于您所描述的内容，您可能会发现：

[http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.maketransparent(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.maketransparent(v=vs.71).aspx)

`Bitmap.MakeTransparent()`一种有用的探索方法，它允许您将图像中的给定颜色变为透明。

# c++ - 这个迭代器声明有什么问题

> ID：15832945
> 
> 赞同：0
> 
> 时间：2013-04-05T11:36:22.193
> 
> 标签：c++, istream-iterator

我的课堂上有一个方法，这里是：

```
void TextQuery::build_word_map()
{
   word_map = new map<string,loc*,less<string>,allocator<string> >;
   typedef map<string,loc*,less<string>,allocator<string> >::value_type value_type;
   typedef set<string,less<string>,allocator<string> >::difference_type  diff_type;

   set<string,less<string>,allocator<string> > exclusion_set;

   ifstream infile( "exclusion_set" );
   if ( !infile )
    {
      static string default_excluded_words[25] = {     "the","and","but","that","then","are","been", "can","can't","cannot","could","did","for",
            "had","have","him","his","her","its","into",     "were","which","when","with","would"};
      cerr << "warning! unable to open word exclusion file! -- "  << "using     default set\n";
      copy( default_excluded_words, default_excluded_words+25, inserter(exclusion_set,     exclusion_set.begin()));
    }
  else 
    {
      istream_iterator<string, diff_type> input_set( infile ), eos;
      copy( input_set, eos, inserter( exclusion_set, exclusion_set.begin() ));
    }

   vector<string,allocator<string> > *text_words = text_locations->first;
   vector<location,allocator<location> > *text_locs = text_locations->second;
   register int elem_cnt = text_words->size();
   for ( int ix = 0; ix < elem_cnt; ++ix )
    {
      string textword = ( *text_words )[ ix ];
      if ( textword.size() < 3 || exclusion_set.count( textword ))
         continue;
      if ( ! word_map->count((*text_words)[ix] ))
        { 
            loc *ploc = new vector<location,allocator<location> >;
            ploc->push_back( (*text_locs)[ix] );
            word_map->insert( value_type( (*text_words)[ix],ploc ));
        }
      else (*word_map) [(*text_words) [ix]]->push_back( (*text_locs) [ix] );
    }
} 
```

，当我尝试构建它时，我被告知不可能将“std::ifstream”转换为“std::basic_istream<_Elem,_Traits> &”？这是什么意思，我该怎么做（除了深入研究迭代器，即;-)）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:41:30.260

您有错误，因为您使用`diff_type`模板`second`参数。如果你想使用`diff_type`你应该`istream_iterator`正确声明，声明应该是

```
istream_iterator<string, char, std::char_traits<char>, diff_type> 
```

既然`istream_iterator`是真的

```
template< class T,
          class CharT = char,
          class Traits = std::char_traits<CharT>,
          class Distance = std::ptrdiff_t >
class istream_iterator 
```

正如你[在这里看到的](http://en.cppreference.com/w/cpp/iterator/istream_iterator)

# php - 在 htaccess 更改后，每次单击都会修改 URL

> ID：15832946
> 
> 赞同：0
> 
> 时间：2013-04-05T11:36:25.723
> 
> 标签：php, .htaccess, url

我正在将我的 php 脚本修改为对 SEO 友好

当我第一次单击 test.php 页面中的链接时，它在 url 中显示为 *htp://example/test/first* 工作正常。当点击第二次 url 成为 *htp://example/test/test/first* .test 文件夹继续添加到 URL

如何解决这个问题。

```
##test.php
<html>
<head></head>
<body>
<a  href='test/first'>testing</a> <br>
<body> 
</html>

##.htaccess
RewriteEngine On
RewriteBase 
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} /$
RewriteRule (.*)/ $1 [R=301]
RewriteRule ^test/(.+)  /test.php?$1 [L]
DirectoryIndex test.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:42:07.507

解决这个问题的几种可能性。

1) URL前面的斜线

```
 <a  href='/test/first'>testing</a> 
```

仅当您的网站不包含在您的网络空间的子目录中时才有效

2) 绝对网址

```
 <a  href='http://www.example.com/test/first'>testing</a> 
```

您可以将其保存在配置文件或其他内容中（baseUrl 有人吗？）并将其动态附加到链接中，如下所示

```
 <a  href='<?=$cfg->baseUrl?>/test/first'>testing</a> 
```

3）HTML

像这样在你的 head-Tag 中设置一个基础

```
 <base href="http://example.com/"> 
```

这可能会破坏您网站上的其他路径，例如图像路径和 CSS 路径

# c# - 将表单验证放在 razor 引擎中的 html 控件上

> ID：15832953
> 
> 赞同：3
> 
> 时间：2013-04-05T11:36:45.673
> 
> 标签：c#, asp.net-mvc, razor, validation

我一直面临将表单验证放在 html 控件上的问题，任何人指导我如何解决这个问题？

**我的 HTML 字段在 something.cshtml 中**

```
<input type="text" id="AccidentDate" name="AccidentDate" />
@Html.ValidationMessage("AccidentDate") 
```

**控制器代码：**

```
 [HttpPost]
 [AllowAnonymous]
 public ActionResult Index(Models.c objC)
 {
     if (String.IsNullOrEmpty(objC.AccidentDate))
     {
         ModelState.AddModelError("AccidentDate", "*");
     }

     return View(objClaimant);
  } 
```

请注意，validationMessage 确实会在该输入字段前面以 * 的形式引发错误，但我的要求是将该输入字段突出显示为红色。

**最重要的是我知道我是否使用：** `@Html.TextBox("AccidentDate", Model.AccidentDate);`它可以完美运行，但使用它不是我的要求。

最后，如果出现验证消息，我希望通过任何其他方式使 html 输入字段变为红色。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:52:24.493

好的，所以我想我会尝试提供帮助，而不是仅仅发表评论。所以我假设你想使用[不显眼的验证引擎](http://bradwilson.typepad.com/blog/2010/10/mvc3-unobtrusive-validation.html)

所以如果你这样做

```
@Html.TextBox("AccidentDate", Model.AccidentDate); 
```

并查看源代码，您会看到如下内容：

```
<input data-val="true" data-val-required="The AccidentDate field is required." 
   id="AccidentDate" name="AccidentDate" type="text" value=""> 
```

所以要注意的重要一点是`data-val`属性。这些基本上告诉不显眼的引擎，*“这个字段需要验证，如果失败，这就是显示的方式和内容”*

因此，要做到这一点，没有`@Html.TextBox` **它会为您完成所有这些**，您需要自己在 HTML 中创建这些属性。

**快速一个肮脏的解决方案**，把你`@HTML.TextBox`的，运行你的代码剪切和粘贴 HTML。可能不是你想要的？

**编辑** 你想要所需的验证，所以上面的`data-val="true" data-val-required="The AccidentDate field is required."`属性就是你需要的，显然替换你自己的错误信息

所以：

```
<input type="text" id="AccidentDate" name="AccidentDate" 
   data-val="true" data-val-required="The AccidentDate field is required." />
@Html.ValidationMessage("AccidentDate") 
```

**CSS类**

应该应用 Css 类。相关的代码是：

```
function onError(error, inputElement) {  // 'this' is the form element
        var container = $(this).find("[data-valmsg-for='" + escapeAttributeValue(inputElement[0].name) + "']"),
            replace = $.parseJSON(container.attr("data-valmsg-replace")) !== false;

        container.removeClass("field-validation-valid").addClass("field-validation-error");
        error.data("unobtrusiveContainer", container);

        if (replace) {
            container.empty();
            error.removeClass("input-validation-error").appendTo(container);
        }
        else {
            error.hide();
        }
    } 
```

里面`jquery.validate.unobtrusive.js`。确认你引用了这个js文件，看看上面的代码是否被命中？

# extjs - 在 Mac OSX 上安装 Sencha touch

> ID：15832957
> 
> 赞同：2
> 
> 时间：2013-04-05T11:36:51.917
> 
> 标签：extjs, sencha-touch, sencha-touch-2, sencha-touch-2.1, sencha-cmd

我一直在尝试在我的 Mac 上安装 Sencha Touch 2，但没有成功。

最初我 -

1.  下载了最新的 Sencha SDK 并创建了一个*touch-2.1.1*文件夹。
2.  下载并安装了最新的 Sencha SDK 工具 2.0.0 - Beta 3。
3.  在它显示的默认路径中下载并安装了最新的 Sencha Cmd 3.1.0.256 for mac，即 Users/[User-name]/bin

在此之后，我导航到终端中的 touch-2.1.1 文件夹并输入“sencha”以检查它是否正常工作。我收到以下错误 -

> [警告] 当前工作目录 (/Users/administrator/Desktop/tushar/Hybrid-ness/touch-2.1.1) 不是公认的 Sencha SDK 或应用程序文件夹。以向后兼容模式运行。
> 
> Sencha Command v2.0.0 Beta 3 版权所有 (c) 2012 Sencha Inc.
> 
> 用法：煎茶命令 [ARGS]
> 
> 可用的命令有： build 构建 JSB 项目 create bootstrapdata 生成 boostrap 数据 create jsb 为应用程序生成最小 JSB 项目 创建语言环境 从源代码生成模板语言环境文件 创建清单 生成类清单包 将您的 Touch Web 应用程序打包到本机捆绑切片中主题为 IE 切片自定义主题的图像
> 
> 有关特定命令的更多信息，请参见“sencha help COMMAND”。

在此之后，我搜索了一下，发现只需要 Sencha Cmd 而不需要 Sencha SDK 工具。所以我从 /Applications 中删除了 Sencha SDK Tools *（我为这一步感到羞耻）*

我导航到 /Users/administrator/bin/Sencha/Cmd/3.1.0.256 并给出了命令 -

> ./sencha 生成应用程序 Myapp ../MyAPp

我受到了惩罚

![这种可憎的](https://i.stack.imgur.com/mPsyY.png)

在那之后，我一直在尝试不同的解决方案，比如[这里](https://stackoverflow.com/questions/14399139/install-sencha-touch-2-1-on-mac)提到的一个，但它仍然无法正常工作。

任何人都可以帮忙吗？

**PS-**

我已经删除了 Sencha SDK 工具，但是当我执行**echo $PATH**时，我仍然得到文件夹引用。

> /Applications/SenchaSDKTools-2.0.0-beta3:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin

我做了**PATH=/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin**，并再次检查了 $PATH 然后删除了 sdk 工具。我关闭了终端，重新打开它并给出了 echo $PATH...这一次我可以在 $PATH 中看到 SDK 工具路径。

这里到底发生了什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:46:48.993

试试这个

1.  安装 Sencha SDK 工具 2.0.0 - Beta 3
2.  通过运行 /Applications/SenchaSDKTools-2.0.0-beta3/uninstall 以干净的方式卸载工具
3.  关闭并重新打开 shell 并再次尝试 sencha 命令

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-27T13:49:42.883

我的解决方案：同时编辑：

*非常重要 nano /Users/sencha/.bash_profile nano /Users/sencha/.bashrc

# --------------

我的煎茶文件夹是：/Sencha 默认煎茶：/Applications/SenchaSDKTools-2.0.0-Beta/

# --------------

```
nano /Users/sencha/.bash_profile

export PATH=/Users/sencha/bin/Sencha/Cmd/4.0.4.84:$PATH

export SENCHA_CMD_3_0_0="/Users/sencha/bin/Sencha/Cmd/4.0.4.84"

export PATH=/Sencha/SenchaSDKTools-2.0.0-beta3:$PATH
#
export SENCHA_SDK_TOOLS_2_0_0_BETA3="/Sencha/SenchaSDKTools-2.0.0-beta3"

export PATH=/Applications/SenchaSDKTools-2.0.0-beta3:$PATH

export SENCHA_SDK_TOOLS_2_0_0_BETA3="/Applications/SenchaSDKTools-2.0.0-beta3"

SENCHA_SDK_TOOLS_2_0_0_BETA3=/Applications/SenchaSDKTools-2.0.0-beta3/
#
export PATH="$PATH:/usr/local/bin"
export PATH=/Users/admin/bin/Sencha/Cmd/4.0.4.84:$PATH
export SENCHA_CMD_4_0_0="/Users/admin/bin/Sencha/Cmd/4.0.4.84"
#
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/command:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/jsbuilder:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/appbuilder:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/command:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/jsbuilder:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/appbuilder:$PATH

#---------------------------------------------------------------------------------#
nano /Users/sencha/.bashrc 

export PATH=/Users/sencha/bin/Sencha/Cmd/4.0.4.84:$PATH

export SENCHA_CMD_3_0_0="/Users/sencha/bin/Sencha/Cmd/4.0.4.84"

export PATH=/Sencha/SenchaSDKTools-2.0.0-beta3:$PATH
#
export SENCHA_SDK_TOOLS_2_0_0_BETA3="/Sencha/SenchaSDKTools-2.0.0-beta3"

export PATH=/Applications/SenchaSDKTools-2.0.0-beta3:$PATH

export SENCHA_SDK_TOOLS_2_0_0_BETA3="/Applications/SenchaSDKTools-2.0.0-beta3"

SENCHA_SDK_TOOLS_2_0_0_BETA3=/Applications/SenchaSDKTools-2.0.0-beta3/
#
export PATH="$PATH:/usr/local/bin"
export PATH=/Users/admin/bin/Sencha/Cmd/4.0.4.84:$PATH
export SENCHA_CMD_4_0_0="/Users/admin/bin/Sencha/Cmd/4.0.4.84"
#
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/command:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/jsbuilder:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/appbuilder:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/command:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/jsbuilder:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/appbuilder:$PATH' 
```

# c++ - MySQL C++ 连接器在 ResultSet->getString() 处使我的应用程序崩溃

> ID：15832958
> 
> 赞同：2
> 
> 时间：2013-04-05T11:36:56.377
> 
> 标签：c++, crash, mysql-connector

可能又是我在问菜鸟 C++ 问题

我非常头疼使该死的（对不起语言）MySQL C++ 连接器工作。我不知道是写得不好还是什么，但根据我的经验，我从来没有遇到过这么多的麻烦。

无论如何，我让它连接并在连接/查询失败时抛出异常，这对我来说是一件大事：U：P。实际问题来自我获取查询结果。无论我做什么，我的应用程序总是崩溃：S

我使用了 32 位安装程序和来自 32 位 MySQL 服务器的 libmysql.dll/lib（因为我正在编译一个 32 位应用程序，所以我认为这是正确的做法）

这是一些代码，因此您可以想象我在说什么

**数据库管理器.h**

```
#ifndef DBMANAGER_H
#define DBMANAGER_H
#define CPPCONN_PUBLIC_FUNC
#define CPPCONN_LIB_BUILD True

#include <string>
#include "mysql_connection.h"
#include "mysql_driver.h"
#include <cppconn/driver.h>
#include <cppconn/exception.h>
#include <cppconn/resultset.h>
#include <cppconn/statement.h>
#include <cppconn/prepared_statement.h>

class DBManager
{
public:
    static DBManager* Instance();
    bool Query(const char* Query);
    void Connect(const char* DbHost, unsigned short DbPort, const char* DbUser, const char* DbPass, const char* DbName);
    bool ValidCredentials(const char* Username, const char* Password);
    void ManageException(sql::SQLException &e);

    ~DBManager();

protected:
    static DBManager* pInstance;

private:
    DBManager() {};
    DBManager(DBManager const&){};
    DBManager& operator=(DBManager const&){};

    sql::mysql::MySQL_Driver* driver;
    sql::Connection *Con;
    sql::PreparedStatement *pstmt;
    sql::ResultSet *res;
    sql::Statement *stmt;

    bool isConnected;
};

#endif 
```

现在是 cpp 文件**DBManager.cpp**

```
#include "DBManager.h"

DBManager* DBManager::pInstance = NULL;

DBManager* DBManager::Instance()
{
    if (!pInstance)
    {
        pInstance = new DBManager();
    }

    return pInstance;
}

bool DBManager::Query(const char* Query)
{
    return true;
}

DBManager::~DBManager()
{   
    delete Con;
    delete pstmt;
    delete res;
    delete stmt;
}

void DBManager::ManageException(sql::SQLException& e)
{
    if (e.getErrorCode() != 0) {
        std::cout << "# ERR: SQLException in " << __FILE__;
        std::cout << "(" << __FUNCTION__ << ") on line " << __LINE__ << std::endl;
        std::cout << "# ERR: " << e.what();
        std::cout << " (MySQL error code: " << e.getErrorCode();
        std::cout << ", SQLState: " << e.getSQLState() << " )" << std::endl;
    }
}

void DBManager::Connect(const char* DbHost, unsigned short DbPort, const char* DbUser, const char* DbPass, const char* DbName)
{
    try {
        driver = sql::mysql::get_mysql_driver_instance();
        std::string connDSN = "tcp://" + std::string(DbHost) + ":3306";

        Con = driver->connect(connDSN, sql::SQLString(DbUser), sql::SQLString(DbPass));
        Con->setSchema(sql::SQLString(DbName));
        isConnected = true;

        std::cout<<"Database connection successul."<<std::endl;

    } catch(sql::SQLException &e) {
        ManageException(e);
        isConnected = false;

        return;
    }
}

bool DBManager::ValidCredentials(const char* Username, const char* Password)
{
    bool cred = false;

    try {
        pstmt = Con->prepareStatement("SELECT * FROM account WHERE account_name=? LIMIT 1"); // Smart use of indexing
        pstmt->setString(1, Username);
        res = pstmt->executeQuery();

        while(res->next())
        {
            if (res->getString("password") == Password)
            {
                cred = true;
            }
        }
    }
    catch(sql::SQLException &e) {
        ManageException(e);
        return false;
    }

    return cred;
} 
```

基本上，它编译没有问题，连接没有问题，执行查询没有问题，但是第二次我尝试检索数据时在文件“xutils.cpp”中抛出了一些断点异常。我真的不知道我做错了什么。我在编译调试时使用了 DEBUG 库。嗯 libmysql.dll 应该被释放，因为我从服务器包中提取了它，但我似乎没有找到它作为编译我自己的源。

我真的不知道为什么它会那样崩溃和燃烧：/

PS：不要介意密码的无哈希，这对我来说实际上只是一个概念证明......首先让它工作，然后保护它：U

PS：我还在项目中编译并准备好了 Boost 库，如果这有帮助的话：U

编辑：主要功能

```
bool ServerRunning = true;
int main(int argc, char** argv)
{
    #ifdef _WIN32
        std::string title = TEXT("Window Title Change");
        SetConsoleTitle(title.c_str());
    #endif;

    std::cout<<"Loading Configuration File..."<<std::endl<<std::endl;

    std::string path = boost::filesystem::path(boost::filesystem::current_path()).string();
    path += "\\Config.ini";

    INIParser* Config = new INIParser(path.c_str()); //MinINI

    // Sockets data
    std::string listenIP = Config->GetString("Network", "ListenIP", "127.0.0.1");
    unsigned short listenPort = Config->GetInt("Network", "ListenPort", 5000);

    // Database data
    std::string dbHost = Config->GetString("Database", "Host", "localhost");
    std::string dbUser = Config->GetString("Database", "User", "root");
    std::string dbPass = Config->GetString("Database", "Password", "");
    std::string dbName = Config->GetString("Database", "Database", "authserv");
    unsigned short dbPort = Config->GetInt("Database", "Post", 1000);

    // General settings
    int sessionTimeout = Config->GetInt("Settings", "SessionTimeout", 10);
    int maxClients = Config->GetInt("Settings", "MaxClients", 10);
    int serverTimeout = Config->GetInt("Settings", "GameserverTimeout", 1);

     // Begin Initialization
     DBManager::Instance()->Connect(dbHost.c_str(), dbPort, dbUser.c_str(), dbPass.c_str(), dbName.c_str());
     bool loginSuccess = DBManager::Instance()->ValidCredentials("Username", "Password");

    char c;
    while (ServerRunning)
    {
        std::cin>>c;

        if (c == 'q')
        {
            ServerRunning = false;
        }
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T16:42:44.630

假设该`password`字段在数据库中定义`varchar`，您不能使用`getString()`它来检索它。您必须改为使用`blob`函数`getBlob()`.

这是`while`循环的样子：

```
while(res->next())
{
    std::istream * retrievedPassword_stream = res->getBlob("password");
    if (retrievedPassword_stream)
    {
        char pws[PASSWORD_LENGTH+1]; // PASSWORD_LENGTH defined elsewhere; or use other functions to retrieve it
        retrievedPassword_stream->getline(pws, PASSWORD_LENGTH);
        std::string retrievedPassword(pws); // also, should handle case where Password length > PASSWORD_LENGTH
        if (retrievedPassword == std::string(Password))
        {
            cred = true;
        }
    }
} 
```

**旁注：**请注意，代码还有其他一些问题。

*   必须删除语句句柄，因此您应该`delete pstmt;`在`ValidCredentials()`函数中的适当位置（而不是在析构函数中）执行 a。（但是，为什么在这种情况下仍然使用准备好的语句？最好在构造函数（或调用查询的函数之外的其他地方）*初始化*准备好的语句，以及在析构函数或其他地方删除，如果你*确实*使用准备好的语句。但是，请注意，准备好的语句对于使用率非常高和 CPU 密集型的查询最有用，而不是准备好的语句，因此在这里使用它来验证密码可能并不重要（您可以只执行常规查询，而不是准备好的语句）。）
*   同样，ResultSet 需要`delete res`在 try 块的末尾被删除 ( )，而不是在析构函数中。
*   `pstmt`请务必在使用、`res`或之前检查 NULL `Con`。
*   `stmt`似乎未使用，不应删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-25T06:02:51.583

1.  下载 mysql c++ 连接器
2.  使用 mt 或 mtd 编译 mysqlcppconn-static 项目
3.  您的项目添加 CPPCONN_LIB_BUILD
4.  您的项目添加（2）内置静态库

# maven - 使用它的 Maven 工件下载特定的 POM 文件

> ID：15832962
> 
> 赞同：0
> 
> 时间：2013-04-05T11:37:20.833
> 
> 标签：maven, command-line, pom.xml, artifactory, artifact

我是 Maven 新手，但总体情况是我需要下载（在命令行中）某个工件的 POM 文件，该文件位于远程 maven 存储库（Artifactory）中，仅使用它的工件名称并动态生成（通过仅提供存储库根路径和工件的名称，因此我可以更改它在存储库中的位置并仍然下载它）。

**我的第一个问题是：**这可能吗，还是我必须详细说明整个工件路径、groupId、artifactId 和版本？

**第二点：** 我设法使用这个 maven 命令下载了工件，但它只获取 .jar，而不是 POM 文件：

```
mvn dependency:get -DrepoUrl=MY_REPO_LOC
                   -Dartifact=MY_ARTIFACT_LOC:MY_ARTIFACT_NAME:ARTIFACT_VERSION 
```

关于我该怎么做的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T05:53:22.780

首先，你不需要 Maven。您选择一个二进制存储库，它可以直接为您提供解决方案。就是这样：

由于您不知道工件的位置（我假设存储库名称？因为所有其余部分几乎都被 Maven 锁定，如果您知道 GAVC，您确实知道所有路径）并且您不知道要列出 groupId 和版本，您必须搜索并准备好接收多个结果，您必须在这些结果上暗示一些逻辑来确定您需要哪一个。以下是从命令行在 Artifactory 中搜索的方法：[http](http://wiki.jfrog.org/confluence/display/RTF/Artifactory%27s+REST+API#Artifactory%27sRESTAPI-SEARCHES) : //wiki.jfrog.org/confluence/display/RTF/Artifactory%27s+REST+API#Artifactory%27sRESTAPI-SEARCHES 我推荐 GAVC Search，因为您知道工件 ID。

如果只是版本未知，只想获取最新版本，可以使用[最新工件检索](http://wiki.jfrog.org/confluence/display/RTF/Artifactory%27s+REST+API#Artifactory%27sRESTAPI-RetrieveLatestArtifact)调用或[最新版本搜索](http://wiki.jfrog.org/confluence/display/RTF/Artifactory%27s+REST+API#Artifactory%27sRESTAPI-ArtifactLatestVersionSearch)。

# mysql - 动态添加mysql表列

> ID：15832970
> 
> 赞同：0
> 
> 时间：2013-04-05T11:37:36.833
> 
> 标签：mysql, database, dynamic, vb6

如何`mysql` **动态**添加表格列？

我有一个`vb6`代码和`mysql`数据库。

假设我想在文本框中输入新列，那么**文本框****的**值将是 mysql 中的一**列**。

这可能吗？如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:51:08.247

请参阅[**ALTER TABLE**](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)命令。

但通常从客户端应用程序更改数据库结构并不是一个好主意。

如果必须这样做，这意味着您的数据库设计得不是很好。

通过使用表之间的关系，您始终可以`dynamic data structure`在静态结构化数据库表中显示一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T12:10:35.210

是的，有可能

向数据库添加新列的查询是

“ALTER TABLE mytable 添加列”+ textbox.Text +“VARCHAR(40)”

在 VB 中，您可以使用 ADO

# git - Git - 本地分支，远程更新

> ID：15832971
> 
> 赞同：0
> 
> 时间：2013-04-05T11:37:39.287
> 
> 标签：git

我已经设置了一个 git 环境（mo github）

*   远程：一个分支
*   本地：我在其上工作的主分支和 featureX 分支/

现在，在远程，一些队友远程推送了我想要在我的功能分支上的远程功能。

哪些是正确的步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:09:36.433

远程和本地分支的概念在开始时有时会有点混乱。如果您想让本地分支“master”与另一个答案中建议的远程分支 git pull 保持同步，这是一个很好的方法。还有另一种方法可以在不离开分支的情况下在您的 featureX 分支上工作的同时跟上远程分支：直接从远程分支合并您的朋友更改。

```
git fetch
git merge origin/master 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:59:05.660

它对我有用

*   在本地主分支中：`git pull`
*   在本地功能分支中：`git merge master`

它对我不起作用：

*   `git pull`在本地功能分支中

笔记：

如果对我的问题投了反对票的人也会回答这个问题，那就太好了。

# javascript - 适用于所有浏览器的 Javascript window.close()？

> ID：15832972
> 
> 赞同：1
> 
> 时间：2013-04-05T11:37:43.303
> 
> 标签：javascript, html

我一直在寻找这个问题，找不到任何可以解决这个问题的方法。我发现了很多这样的问题，但没有一个可以帮助我。

基本上，这个问题与提出的问题没有区别，但我尝试了每一个答案。没运气。

当用户单击按钮时，我想关闭浏览器的选项卡。我尝试了以下内容：

```
1\. <p class="submit"><input type="button" onclick="window.open(window.location, '_self');window.close(); return false;" value="{% trans 'Close' %}"/></p>

2\. <p class="submit"><input type="button" onclick="window.open('','_parent',''); window.close(); return false;" value="{% trans 'Close' %}"/></p>

3\. <p class="submit"><input type="button" onclick="var win = window.open('', '_self');win.close();return false; " value="{% trans 'Close' %}"/></p>

4\. <p class="submit"><input type="button" onclick="window.open('', '_self', ''); window.close(); return false;" value="{% trans 'Close' %}"/></p> 
```

以上均不适用于 Firefox 和 Chrome。如果有人在 Chrome 中工作，那么它在 Firefox 中就不行。解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:35:02.177

我终于设法解决了。问题是所有的答案都是真的，还有我的试验。他们都工作。但是在 Firefox 中，必须使`dom.allow_scripts_to_close_windows`真实（看看[这里](https://stackoverflow.com/questions/330337/how-do-i-close-a-firefox-tab-from-a-greasemonkey-script/330372#330372)）才能`window.close()`工作。但这只能由用户自己完成。另一个问题是，如果要通过脚本关闭窗口，则必须通过脚本打开窗口。所以，我将改变我的结构，使这个特定页面将由脚本打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:42:21.780

最好在函数中编写代码并在每个按钮中调用该函数

尝试`window.open('','_parent','', true);`为每个创建窗口传递 true

# excel - excel 2003 vba ..写arraylist

> ID：15832974
> 
> 赞同：2
> 
> 时间：2013-04-05T11:37:49.590
> 
> 标签：excel, vba

我正在尝试`ArrayList`在 Visual Basic Excel 2003 中创建类似 Java 的类。

爪哇

```
List<Employee> employees = new ArrayList<Employee>();
Employee employee = new Employee();
employee.setName("tom");
employees.add(employee); 
```

VB

```
Dim resultList As New Collection    
Dim Manager As Employee
Manager.Name = "df"    
resultList.Add ("rr") 'correct
resultList.Add (Manager) 'error 
```

但这会产生以下错误：

> 只有在公共对象模块中定义的用户定义类型才能被强制转换为变体或从变体强制转换或传递给后期绑定函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:56:14.830

没有与 UDT 关联的类型信息，因此无法将其添加到集合中，因为由于其成员的数量和类型未知，因此无法可靠地与变体进行转换。

您可以将`Employee`Type 替换为 Class ，或者您似乎没有使用键，即类型化数组：`arr() as Employee`

# delphi - TPropInfo 的无证成员

> ID：15832975
> 
> 赞同：7
> 
> 时间：2013-04-05T11:37:51.897
> 
> 标签：delphi, delphi-xe3

System.TypInfo.TPropInfo 有两个函数成员（至少在 D-XE3 中）：

```
function NameFld: TTypeInfoFieldAccessor; inline;
function Tail: PPropInfo; inline; 
```

我找不到它们的任何文档或任何使用它们的示例。它们的用途是什么以及如何使用它们？（希望这是一个问题。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-26T15:39:27.013

NameFld 函数将属性的名称作为`TTypeInfoFieldAccessor`.

这允许您执行以下操作：

```
MyPropertyName:= MyPropInfo.NameFld.ToString;
if (PropInfoA.NameFld = PropInfoB.NameFld) then begin 
  writeln('property names are the same');
end; 
```

[TTypeInfoFieldAccessor](http://docwiki.embarcadero.com/Libraries/XE5/en/System.ShortString)在内部将属性的名称存储在短字符串中。
因为 NextGen 编译器不支持短字符串，所以使用了一个`PByte`类型。
[（我猜作者不想用 ifdefs 乱扔源代码并撕掉 PShortstring 引用）]

的输入`Tail`是一个指向内部短字符串长度字段的 PByte。

这是tail的源代码。

```
function TTypeInfoFieldAccessor.Tail: PByte;
begin
  Result:= 
    FData    //Start of the shortstring 
    + FData^ + //Length of the stringData
    + 1; //Add one for the length byte itself
end; 
```

因为短字符串不是以空字符结尾的，所以不能执行简单的“循环直到找到空字符”类型的循环。
因此，可以使用从头到尾的循环将短字符串转换为普通字符串。
奇怪的是，在实际的 RTL 源代码中，到处都使用长度字节而不是`tail`函数；所以它看起来像一个剩菜。
包含一个`size`函数并删除`tail`.

# python - 整数字符串列表 ['123 121','42 23','23 23']

> ID：15832977
> 
> 赞同：0
> 
> 时间：2013-04-05T11:38:13.423
> 
> 标签：python, list

`['136 145', '136 149', '137 145', '138 145', '139 145', '142 149', '142 153', '145 153']` 通过上面的列表，我想将元素转换为整数，我知道仅使用是`[int(x) for x in mylist]`行不通的。所以我的问题是如何将我拥有的列表变成整数列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:39:23.350

```
>>> L = ['136 145', '136 149', '137 145', '138 145', '139 145', '142 149', '142 153', '145 153']
>>> [int(y) for x in L for y in x.split()]
[136, 145, 136, 149, 137, 145, 138, 145, 139, 145, 142, 149, 142, 153, 145, 153] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T11:38:58.327

先拆分文本，*然后*转换为 int：

```
[map(int, elem.split()) for elem in originallist] 
```

对于 Python 3，其中`map()`返回的是生成器，而不是列表，您可以嵌套列表推导：

```
[[int(n) for n in elem.split()] for elem in originallist] 
```

这在 Python 2 下同样有效。

快速演示：

```
>>> originallist = ['136 145', '136 149', '137 145', '138 145', '139 145', '142 149', '142 153', '145 153']
>>> [[int(n) for n in elem.split()] for elem in originallist]
[[136, 145], [136, 149], [137, 145], [138, 145], [139, 145], [142, 149], [142, 153], [145, 153]] 
```

`elem.split()`您可以通过将循环移动到外部列表理解来删除嵌套：

```
[int(n) for elem in originallist for n in elem.split()] 
```

这使：

```
[136, 145, 136, 149, 137, 145, 138, 145, 139, 145, 142, 149, 142, 153, 145, 153] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T11:42:03.733

由于我倾向于竭尽全力避免嵌套列表推导（我永远记不起顺序），因此我会执行以下操作：

```
from itertools import chain
x = ['136 145', '136 149', '137 145', '138 145', '139 145', '142 149', '142 153', '145 153']
gen = chain.from_iterable(elem.split() for elem in x)
integers = [int(elem) for elem in gen] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T11:46:58.077

你可以这样试试

```
>>> import re
>>> l=['136 145', '136 149', '137 145', '138 145', '139 145', '142 149', '142 153', '145 153']    
>>> map(int, re.findall(r'\d+',' '.join(l)))
[136, 145, 136, 149, 137, 145, 138, 145, 139, 145, 142, 149, 142, 153, 145, 153] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T11:47:28.230

```
>>> L = ['136 145', '136 149', '137 145', '138 145', '139 145', '142 149', '142 153', '145 153']
>>> map(int, ' '.join(L).split())
[136, 145, 136, 149, 137, 145, 138, 145, 139, 145, 142, 149, 142, 153, 145, 153] 
```

# log4j - 配置 log4j 文件

> ID：15832978
> 
> 赞同：2
> 
> 时间：2013-04-05T11:38:15.197
> 
> 标签：log4j

我有这个 log4j.config

```
<appender name="FileInfoStatistics" class="org.apache.log4j.RollingFileAppender">
<param name="file" value="${log.dir}/T_Statistics.log" />
<param name="MaxFileSize" value="8000KB"/>
<!-- Keep one backup file -->
<param name="MaxBackupIndex" value="1"/>
<layout class="org.apache.log4j.PatternLayout">
  <param name="ConversionPattern" value="%d %5p %c{1} - %m%n" />
</layout>
<filter class="org.apache.log4j.varia.LevelRangeFilter">
  <param name="levelMin" value="INFO" />
</filter>
</appender> 
```

但我想在第一次创建文件 T_Statistics.log 时创建一行，例如这是一个日志文件，这可能来自 log4j.config 吗？

我看到这在 log4net 中是可能的：

```
<param name="Header" value="xxxx" 
```

log4j中有类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:41:47.673

Well, After some research I found a solution to my problem, said if someone would be useful.

I have created a custom appender:

```
package com.mycompany.logger;

import org.apache.log4j.PatternLayout;

public class MyPatterLayout extends PatternLayout 
{  
    @Override  
    public String getHeader()
    {  
        return "message id, file name, start time, end time, status" +  System.getProperty("line.separator");
    }
} 
```

And then I have configured my log4j.xml:

```
<appender name="console" class="org.apache.log4j.ConsoleAppender"> 
<param name="Target" value="System.out"/> 
<layout class="com.mycompany.logger.MyPatterLayout"> 
    <param name="ConversionPattern" value="%-5p %c{1} - %m%n"/>
</layout> 
```

And this is the result:

```
message id, file name, start time, end time, status
DEBUG App - Here is some DEBUG
INFO  App - Here is some INFO
WARN  App - Here is some WARN 
ERROR App - Here is some ERROR
FATAL App - Here is some FATAL 
```

# ssis - 从脚本任务执行 SSIS 包存储中的子包，有点扭曲

> ID：15832981
> 
> 赞同：4
> 
> 时间：2013-04-05T11:38:22.197
> 
> 标签：ssis, sql-server-2008-r2

我有一个父包需要多次执行同一个子包。为了让事情变得更有趣，每个实例都需要为传递给子包的父参数定义不同的值。

我使用以下脚本创建了一个脚本任务：

```
Microsoft.SqlServer.Dts.Runtime.Application App = new Microsoft.SqlServer.Dts.Runtime.Application();
        Package pkg = new Package();

    try
    {
        pkg = App.LoadPackage(@"\\server\SSIS Packages\ChildPackage.dtsx", null);
        pkg.Variables["ChildVariableName"].Value = Dts.Variables["AParentVariableName"].Value;
        pkg.Execute();

        Dts.TaskResult = (int)ScriptResults.Success;
    }
    catch (Exception ex)
    {
        Dts.Events.FireError(0, "Run child pkg for parent task", ex.Message, string.Empty, 0);
        Dts.TaskResult = (int)ScriptResults.Failure;
    } 
```

问题是，我的包存储在我的 SQL 2008 R2 服务器的 SSIS 包存储中，我不知道如何引用它们；我见过的每个代码示例都是针对物理位置的。这是在 HA 集群上，因此很难维护包的物理位置。

因此，我要么需要（a）弄清楚每次启动此子包的执行包任务时如何更改 ParentVariable 的值，要么（b）弄清楚如何在 SSIS 包存储中引用正确的包，其中点我可以安全地传递正确的值。有人有想法么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:51:08.690

代替 App.LoadPackage 方法，您将使用[LoadFromSqlServer](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.application.loadfromsqlserver.aspx)方法

```
app.LoadFromSqlServer("\OptionalFolderButSlashRequired\ChildPackage", "server", null, null, null); 
```

[Application](http://msdn.microsoft.com/en-us/library/ms211665.aspx)和[Package](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.package.aspx)的文档通常有我需要使用的方法的示例。

# haskell - 在 Haskell 中将 [IO Int] 转换为 IO [Int]？

> ID：15832987
> 
> 赞同：6
> 
> 时间：2013-04-05T11:38:48.263
> 
> 标签：haskell, monads

我有适合我需要的代码：

```
f :: [IO Int] -> IO [Int]
f [] = return []
f (x:xs) = do 
  a <- x
  as <- f xs
  return (a:as) 
```

但我认为会有一种预定义的方式（msum？）

但我看不出怎么做。

欢迎任何帮助。谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-05T11:41:27.257

是的，它在名称下的标准库中可用[`sequence`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3asequence)。它具有比您的`f`:更通用的类型`Monad m => [m a] -> m [a]`，因为它适用于任何类型`Monad`，而不仅仅是`IO`.

[`[IO a] -> IO [a]`](http://www.haskell.org/hoogle/?q=%5bIO+a%5d+-%3E+IO+%5ba%5d&format=sherlock)您可以通过在[**Hoogle**](http://www.haskell.org/hoogle)上搜索 type 自己找到它。

# text - 如何在 Corona sdk 中显示滚动文本

> ID：15832991
> 
> 赞同：0
> 
> 时间：2013-04-05T11:39:04.953
> 
> 标签：text, scroll, show, coronasdk

我需要显示一个比高度模拟器屏幕最大的文本。我的文字显示抛出：

本地 detailScreenTextDescriptcion = display.newText("Description", 0, 0, (display.contentWidth*2) ,0 , native.systemFont, 12)

large 不限于可见字段，因为他的值为 0，我不知道如何才能看到屏幕底部消失的其余文本。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T17:20:01.337

您可以编写一个从右到左滚动/移动文本的函数。您可以为其添加一些功能。例如：onTextClick“恢复滚动”/“停止滚动”。

```
local function scrollText(text)
    transition.to( text, { time=3000, alpha=0, x=-(textWidth - display.contentWidth),} )
end 
```

# java - JAVA：用户定义令牌上的正则表达式

> ID：15832994
> 
> 赞同：0
> 
> 时间：2013-04-05T11:39:16.653
> 
> 标签：java, regex, customization

我需要在一组用户定义的令牌上运行正则表达式。

例如，我有一个这样的字符串： `TOK3 TOK1 TOK2 TOK2 TOK4 TOK3`// 示例字符串

并使用这样的正则表达式： `(TOK1|TOK2)+`//正则表达式

我想捕获标记序列：`TOK1 TOK2 TOK2`在我的示例字符串中。

现在，正则**表达式**通常适用于一系列字符，所以我的问题略有不同，因为我的标记不是字符而是字符串。我的令牌可以由两个或多个字符组成。此外，我的软件应该能够检测到示例中的正则表达式与位置 (1, 4) 处的字符串匹配。

目前，我通过将每个标记映射到 ASCII 字母表中的字符并在删除空格后运行正则表达式来解决问题。

但是，我对这个解决方案并不完全满意，我想知道是否有更好的解决方案。谢谢！

**编辑**

正则表达式中的空格仅用于分隔标记。它们并不真正意味着令牌之间的空格是强制性的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:06:28.310

按照您的示例，这应该可以正常工作：

```
(?:(?:TOK1|TOK2|...)(?: |$))+ 
```

Matcher#start 方法将为您提供比赛开始的位置。

尽管如此，因为它看起来很容易，我觉得我在你的问题中遗漏了一些东西......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:47:32.043

如何存储所有空格的位置并使用它来将字符串位置转换为标记位置？

远不如直接的正则表达式那么优雅，但这是一个想法。

```
TreeMap<Integer, Integer> spaces = new TreeMap<Integer, Integer>();
String regex = "(?<=^| )((TOK1|TOK2)( |$))+";
String str = "TOK3 TOK1 TOK2 TOK2 TOK4 TOK3";
int c = 0;
spaces.put(0, 0);
for (int i = 0; i < str.length(); i++)
{
   if (str.charAt(i) == ' ')
     spaces.put(i, ++c);
}
Pattern p = Pattern.compile(regex);
Matcher m = p.matcher(str);
while (m.find()) {
   System.out.println(m.group());
   System.out.println("start = " + spaces.floorEntry(m.start()).getValue());
   System.out.println("finish = " + spaces.floorEntry(m.end()).getValue());
} 
```

另一种选择是`String.split`：

```
String str = "TOK3 TOK1 TOK2 TOK2 TOK4 TOK3";
String[] arr = str.split(" "); // maybe consider using \\s or \\s+ instead
int start = -1;
String match = "";
for (int i = 0; i < arr.length; i++)
{
   if (arr[i].matches("(TOK1|TOK2)"))
   {
      if (start == -1)
         start = i;
      match += ((match.length() != 0) ? " " : "") + arr[i];
   }
   else if (start != -1)
   {
      System.out.println(match);
      System.out.println("start = " + start);
      System.out.println("finish = " + i);
      match = "";
      start = -1;
   }
} 
```