# StackOverflow 问答 13282000-13282999

# java - Java 设计：锁定和监控报告

> ID：13282001
> 
> 赞同：1
> 
> 时间：2012-11-08T03:34:10.573
> 
> 标签：java, jsf, design-patterns, icefaces

我有以下要求。

## 介绍

该系统是报告/内容管理系统。它允许用户对报告进行 CRUD 操作。

## 业务逻辑/UI 组件

当用户编辑报表时，其他用户不能编辑报表，只能查看。

它包含一个带有表格的页面，该表格用于监控锁定的报告以供查看。

## 挑战者

1）我应该如何实施这种“锁定”机制？2) 可以帮助我的设计模式和 API 是什么？

## 我目前的实现

我将有一个报告服务类它将包含所有已锁定报告的哈希图（带有用于锁定管理的用户信息）

我已经完成 SCJD 并正在考虑使用我的锁定机制，但我意识到我不需要等待“锁定”。

我担心的唯一问题是“锁定”报告时的并发问题（将锁定添加到地图中），我相信可以通过使用同步轻松解决。

对于锁定报表表的监控，我打算在报表服务类中实现观察者模式。对于每个用户/支持bean，它将“订阅”报告服务。

有什么输入吗？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T09:25:05.057

Answer is simple... We can manage this problem with 2 classes.

Features of each class is given below

**ReportUtil:**
(1) track whether any report is open in write mode
(2) create object of report based on access mode available

**Report:**
(1) open read only or writable report based on access given
(2) While closing, reset the flag in ReportUtil class, if the current report was open in write mode.

**Client:**
To test ReportUtil and Report classes.

* * *

```
import java.util.LinkedList;

public class ReportUtil {

    private static boolean bIsWriteLockAvaialable = true;

    public static synchronized Report getReport() {
        Report reportObj = new Report(bIsWriteLockAvaialable);
        if(true == bIsWriteLockAvaialable) {
            bIsWriteLockAvaialable = false;
        }
        return reportObj;
    }   

    public static void resetLock() {
        bIsWriteLockAvaialable = true;
    }
} 
```

* * *

```
public class Report {
    private boolean bICanWrite = false;

    public Report(boolean WriteAccess) {
        bICanWrite = WriteAccess;
    }

    public void open() {
        if(bICanWrite == true) {
            //Open in write mode
            System.out.println("Report open in Write mode");
        }
        else {
            //Open in readonly mode
            System.out.println("Report open in Read only mode");
        }
    }

    public synchronized void close() {
        if(bICanWrite == true) {
            ReportUtil.resetLock();
        }
    }
} 
```

* * *

```
public class Client {

    public static void main(String[] args) {
        Report report1 = ReportUtil.getReport();
        report1.open(); //First time open in writable mode

        Report report2 = ReportUtil.getReport();
        report2.open(); //Opens in readonly mode

        Report report3 = ReportUtil.getReport();
        report3.open(); //Opens in readonly mode

        report1.close(); //close the write mode

        Report report4 = ReportUtil.getReport();
        report4.open(); //Opens in writable mode since the first writeable report was closed
    }

} 
```

* * *

Output: Report open in Write mode Report open in Read only mode Report open in Read only mode Report open in Write mode

* * *

I don't know why we want to use Hash table here. May be I didn't understand your requirement. Also, I have used synchronized methods to escape from synchronization problems.

If your requirement was to track all the users who are using the report, please let me know.

Happy Learning!!!

# paypal - Paypal express checkout API 收集账单信息

> ID：13282004
> 
> 赞同：0
> 
> 时间：2012-11-08T03:34:20.340
> 
> 标签：paypal, paypal-sandbox

付款成功后如何收集用户账单明细？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T23:59:16.430

您可以随时收集您想要的任何信息，但根据您使用的 PayPal 功能，您可能会受到一些限制。

例如，如果您使用标准付款按钮，您可以设置一个表格，让他们在完成后填写您的退货页面。但是，不能保证他们甚至会进入此页面，即使他们这样做了，他们也可能选择不填写您的表格。因此，通常建议在将用户发送到 PayPal 进行付款之前收集任何必要的数据。

也就是说，为买家使用 PayPal 的好处之一是他们不必填写表格，也不必与您共享账单信息，因此如果您这样做，您实际上可能会失去销售。

PayPal 将通过 IPN（或 GetExpressCheckoutDetails，例如）向您发送地址，但他们只认为是送货地址。如果我正在使用一个既需要计费又需要运输的系统，我通常只为两者使用相同的地址。

# debugging - 如何调试 Jenkins 作为 SYSTEM 用户启动的后台 IDE

> ID：13282005
> 
> 赞同：1
> 
> 时间：2012-11-08T03:34:29.567
> 
> 标签：debugging, windows-7, jenkins, background-process, ole-automation

我们在 Windows 7 上成功使用了 Jenkins CI 服务器。它主要使用 CodeWarrior 进行编译。使用 Perl 中的 Win32::OLE 库来自动化 IDE，我最近添加了一个新的单元测试作业，它编译然后还启动调试器，在目标硬件上运行测试线程，然后停止。当我从我的用户名下的命令行启动它时它工作正常，但是当 Jenkins 启动相同的任务时，IDE 会消耗所有 CPU 并且永远不会结束。在 Windows 任务管理器下，我看到 IDE 以 SYSTEM 用户身份运行。我怀疑有一个新的弹出消息我没有在我的 OLE 自动化中考虑，但看不到它，因为它现在是后台任务。

是否有工具或技术可以帮助调试 Jenkins 作为系统用户启动但不可见的窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:29:14.313

您需要将 Jenkins 不作为 Windows 服务运行，然后您应该会在桌面上看到 IDE 弹出。

# asp.net - 将 ScriptPath 添加到 我在 updatepanel 中使用下拉列表，问题是，从下拉列表中选择值时页面刷新。最初更新面板工作正常，直到我将 ScripPath 添加到 asp:scriptmanager。 即使是现在，如果我从 scr 问问题 问问题 2012-11-08T03:34:33.343 1457 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我在 updatepanel 中使用下拉列表，问题是，从下拉列表中选择值时页面刷新。最初更新面板工作正常，直到我将 ScripPath 添加到 asp:scriptmanager。 即使是现在，如果我从 scriptmanager 中删除 ScriptPath，页面也不会刷新，并且行为符合预期。 我添加 ScriptPath 的原因是，我想在下拉列表中每次更改值时执行 abc.js。正如预期的那样，abc.js 会针对我的下拉列表中的每个选定值执行，但我不希望刷新页面。 那么，即使在将脚本路径添加到 asp:scriptmanager 之后，如何阻止页面刷新？ 下面是我的 .aspx 源代码。<asp:scriptmanager scriptpath="abc.js" runat="server"></asp:scriptmanager><asp:updatepanel id="UP_Social_Ddl" runat="server"><contenttemplate><asp:dropdownlist id="ddlSocialSwitch" runat="server" autopostback="true" style="vertical-align: top;" tooltip="Social : ON will post your activity on this page to your FaceBook Wall." onselectedindexchanged="ddlSocialSwitch_SelectedIndexChanged"></asp:dropdownlist> [![](facebookLogOutButton.png)](#) <asp:label id="lbl" visible="false" runat="server"></asp:label></contenttemplate></asp:updatepanel>JS //Get values from hidden field var appid = document.getElementById("appid").value; var message = document.getElementById("message").value; var link = document.getElementById("link").value; var name = document.getElementById("name").value; var picture = document.getElementById("picture").value; var description = document.getElementById("description").value; var Authenticated = ""; // Load the SDK Asynchronously (function (d) { var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0]; if (d.getElementById(id)) { return; } js = d.createElement('script'); js.id = id; js.async = true; js.src = "//connect.facebook.net/en_US/all.js"; ref.parentNode.insertBefore(js, ref); } (document)); //Init the SDK upon load window.fbAsyncInit = function () { FB.init({ appId: appid, // App ID channelUrl: '//' + window.location.hostname + '/channel', // Path to your Channel File status: true, // check login status cookie: true, // enable cookies to allow the server to access the session xfbml: true // parse XFBML }); // listen for and handle auth.statusChange events FB.Event.subscribe('auth.statusChange', function (response) { if (response.authResponse) { // user has auth'd your app and is logged into Facebook var uid = "http://graph.facebook.com/" + response.authResponse.userID + "/picture"; FB.api('/me', function (me) { document.getElementById('auth-displayname').innerHTML = me.name; document.getElementById('profileImg').src = uid; }) document.getElementById('auth-loggedout').style.display = 'none'; document.getElementById('auth-loggedin').style.display = 'block'; var e = document.getElementById("FB_ddlSocialSwitch"); var Social_switch = e.options[e.selectedIndex].value; if (Social_switch == "on") { alert(Social_switch); } //_______________________________________________Post to FB_______________________________________________________ // var opts = { // message: 'A good reference for APIs', // link: window.location.href, // name: 'API Reference', // picture: 'http://www.demo.lookmywebpage.com/publish-on-facebook-wall/Google-Twitter-Facebook.jpg', // description: 'Demo Facebook Post' // }; // // FB.api('/me/feed', 'post', opts, function (response) { // if (!response || response.error) { // alert('Posting error occured'); // } // else { // alert('Success - Post ID: ' + response.id); // } // }); //________________________________________________________________________________________________________________ } else { // user has not auth'd your app, or is not logged into Facebook document.getElementById('auth-loggedout').style.display = 'block'; document.getElementById('auth-loggedin').style.display = 'none'; } }); $("#auth-logoutlink").click(function () { FB.logout(function () { window.location.reload(); }); }); } 获取 Python 中的自定义类列表？ 有没有办法获取仅由用户定义的类列表？ 到目前为止，我可以使用以下内容显示模块中所有类的列表： inspect.getmembers(sys.modules[__name__]) 问题是我得到了一个列表特殊方法和其他东西。谢谢你。 asp.netajaxupdatepanelscriptmanager 4 3 回答 3 This answer is useful 0 你做的不对。将您的 js 脚本静态保存在页面上。 <asp:scriptmanager id="ScriptManager1" enablepartialrendering="True" runat="server"></asp:scriptmanager>监听 javascript 中的onChange事件。 jQuery 让这一切变得简单： $("#<%=ddlSocialSwitch.ClientID%>").change(function(e) { //handle the change }); OnSelectedIndexChanged是一个服务端函数，要执行 js 你应该监听 onchange 事件。 于 2012-11-08T05:56:37.433 回答 This answer is useful 0 考虑不使用“ScriptPath”。而是在每个单独的 ScriptReference 上设置Path属性。 脚本路径：已过时。获取或设置用于构建指向 ASP.NET Ajax 和自定义脚本文件的路径的位置的根路径。 例如。 <asp:scriptmanager id="ScriptManager1" enablepartialrendering="True" runat="server"></asp:scriptmanager>于 2012-11-08T03:38:35.287 回答 This answer is useful 0 您可以从下拉列表控件中删除 AutoPostback 属性。这将停止回发并只执行 javascript。不要忘记将 javascript 事件处理程序添加到下拉列表的 onchange 事件中。您可能可以删除更新面板，除非您需要它来执行部分页面回发，根据您的描述，这听起来不像您这样做。 此致。 于 2015-06-02T14:45:49.920 回答 Related 1 java - 想将 startwith( ) 方法用作 !startwith( ) 吗？ 1 image - OpenCV，如何在不重新初始化窗口的情况下显示一系列图像 1 ios - 自定义播放列表保存/检索 4 php - !$a 和 $a 之间的 php 区别 === false 2 jquery - 移动 Web 应用程序的快速按钮 3 php - 如何使用 echo 命令在表格中应用 bgcolor 1 java - 如何为 Maven 站点生成 Google 站点地图？ 4 stream - 从远程服务器设置音频流 1 ios5 - UIButton ImageView在iCarousel中占用更多空间并且不响应触摸事件 2 neo4j - 使用 gremlin 的 neo4j 图形文本搜索 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13282006
> 
> 赞同：0
> 
> 时间：
> 
> 标签：asp.net, ajax, updatepanel, scriptmanager

我在 updatepanel 中使用下拉列表，问题是，从下拉列表中选择值时页面刷新。最初更新面板工作正常，直到我将 ScripPath 添加到 asp:scriptmanager。

即使是现在，如果我从 scriptmanager 中删除 ScriptPath，页面也不会刷新，并且行为符合预期。

我添加 ScriptPath 的原因是，我想在下拉列表中每次更改值时执行 abc.js。正如预期的那样，abc.js 会针对我的下拉列表中的每个选定值执行，但我不希望刷新页面。

那么，即使在将脚本路径添加到 asp:scriptmanager 之后，如何阻止页面刷新？

下面是我的 .aspx 源代码。

```
<asp:ScriptManager ScriptPath="abc.js"  runat="server"></asp:ScriptManager> 

 <asp:UpdatePanel ID="UP_Social_Ddl" runat="server">
                        <ContentTemplate>
                            <div class="styled-select">
                                <asp:Label runat="server" ID="Label2" Font-Size="Small" ToolTip="Social : 'ON' will post your activity on this page to your FaceBook Wall." Text="Social :" Style="vertical-align: top;" />
                                <asp:DropDownList ID="ddlSocialSwitch" runat="server" AutoPostBack="true" Style="vertical-align: top;" ToolTip="Social : ON will post your activity on this page to your FaceBook Wall." OnSelectedIndexChanged="ddlSocialSwitch_SelectedIndexChanged">
                                </asp:DropDownList>
                                &nbsp;<a valign="bottom" onclick="logout_fb" href="#" id="auth-logoutlink"><img valign="bottom" src="facebookLogOutButton.png"/></a>
                                <asp:Label ID="lbl" Visible="false" runat="server"></asp:Label>
                            </div>
                        </ContentTemplate>
                    </asp:UpdatePanel> 
```

JS

```
//Get values from hidden field
var appid = document.getElementById("appid").value;
var message = document.getElementById("message").value;
var link = document.getElementById("link").value;
var name = document.getElementById("name").value;
var picture = document.getElementById("picture").value;
var description = document.getElementById("description").value;

var Authenticated = "";
// Load the SDK Asynchronously
(function (d) {
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) { return; }
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
} (document));

//Init the SDK upon load
window.fbAsyncInit = function () {
    FB.init({
        appId: appid, // App ID
        channelUrl: '//' + window.location.hostname + '/channel', // Path to your Channel File
        status: true, // check login status
        cookie: true, // enable cookies to allow the server to access the session
        xfbml: true  // parse XFBML 
    });
    // listen for and handle auth.statusChange events
    FB.Event.subscribe('auth.statusChange', function (response) {
        if (response.authResponse) {
            // user has auth'd your app and is logged into Facebook
            var uid = "http://graph.facebook.com/" + response.authResponse.userID + "/picture";
            FB.api('/me', function (me) {
                document.getElementById('auth-displayname').innerHTML = me.name;
                document.getElementById('profileImg').src = uid;
            })
            document.getElementById('auth-loggedout').style.display = 'none';
            document.getElementById('auth-loggedin').style.display = 'block';

            var e = document.getElementById("FB_ddlSocialSwitch");
            var Social_switch = e.options[e.selectedIndex].value;

            if (Social_switch == "on") {
                alert(Social_switch);
            } 

            //_______________________________________________Post to FB_______________________________________________________
            //    var opts = {
            //        message: 'A good reference for APIs',
            //        link: window.location.href,
            //        name: 'API Reference',
            //        picture: 'http://www.demo.lookmywebpage.com/publish-on-facebook-wall/Google-Twitter-Facebook.jpg',
            //        description: 'Demo Facebook Post'
            //    };
            //  
            //    FB.api('/me/feed', 'post', opts, function (response) {
            //        if (!response || response.error) {
            //            alert('Posting error occured');
            //        }
            //        else {
            //            alert('Success - Post ID: ' + response.id);
            //        }
            //    });
            //________________________________________________________________________________________________________________

        } else {
            // user has not auth'd your app, or is not logged into Facebook
            document.getElementById('auth-loggedout').style.display = 'block';
            document.getElementById('auth-loggedin').style.display = 'none';
        }

    });
    $("#auth-logoutlink").click(function () {
        FB.logout(function () {
            window.location.reload();
        });
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:56:37.433

你做的不对。将您的 js 脚本静态保存在页面上。

```
<asp:ScriptManager ID="ScriptManager1" 
                                 EnablePartialRendering="True"
                                 runat="server">
  <Scripts>
   <asp:ScriptReference Path="~/abc.js" />
  </Scripts>
</asp:ScriptManager> 
```

监听 javascript 中的[onChange](https://developer.mozilla.org/en-US/docs/DOM/element.onchange)事件。
jQuery 让这一切变得简单：

```
$("#<%=ddlSocialSwitch.ClientID%>").change(function(e) {
      //handle the change
}); 
```

`OnSelectedIndexChanged`是一个服务端函数，要执行 js 你应该监听 onchange 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T03:38:35.287

考虑不使用“ScriptPath”。而是在每个单独的 ScriptReference 上设置**Path属性。**

[脚本路径](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager%28v=vs.100%29.aspx)：**已过时**。获取或设置用于构建指向 ASP.NET Ajax 和自定义脚本文件的路径的位置的根路径。

例如。

```
 <asp:ScriptManager ID="ScriptManager1" 
                                 EnablePartialRendering="True"
                                 runat="server">
             <Scripts>
                <asp:ScriptReference Path="~/abc.js" />
             </Scripts>
            </asp:ScriptManager> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-02T14:45:49.920

您可以从下拉列表控件中删除 AutoPostback 属性。这将停止回发并只执行 javascript。不要忘记将 javascript 事件处理程序添加到下拉列表的 onchange 事件中。您可能可以删除更新面板，除非您需要它来执行部分页面回发，根据您的描述，这听起来不像您这样做。

此致。

# python - 获取 Python 中的自定义类列表？

> ID：13282007
> 
> 赞同：0
> 
> 时间：2012-11-08T03:34:41.893
> 
> 标签：python

有没有办法获取仅由用户定义的类列表？

到目前为止，我可以使用以下内容显示模块中所有类的列表：

```
inspect.getmembers(sys.modules[__name__]) 
```

问题是我得到了一个列表特殊方法和其他东西。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:39:36.147

**最后我这样做了：**

```
from folder1 import module_name as mod

for name, cls in mod.__dict__.items():
                if isinstance(cls, type):
                    klass = getattr(mod, name) 
```

# scheme - “面向对象”方案

> ID：13282012
> 
> 赞同：0
> 
> 时间：2012-11-08T03:35:04.160
> 
> 标签：scheme

```
(define-record-type car-ivars
       （现场效率（罐中可变气体）））
（定义记录型汽车方法
       （现场驾驶！在油箱中加油））
(定义加油 (lambda (cg) ((car-methods-refuel c) g)))
（定义get-gas-level
       (lambda (c) ((car-methods-get-gas-in-tank c))))
（定义驱动器！
       (lambda (c distance) ((car-methods-drive!c) distance)))

（定义制造汽车
       （λ（效率）
         (let ([car1 (make-car-ivars 效率 0)])
           （让（[设置气体级别！
                   (lambda (gas) (car-ivars-gas-in-tank-set!car1 gas))]
                 【气级
                   (lambda () ((car-ivars-gas-in-tank car1)))])
             （制造汽车方法
               ;;驾驶！
               （λ（距离）
                （设置气体水平！
                 (- (get-gas-level)
                 （/效率距离）））
               ;;获取气体水平
               （获取气体水平）
               ;;加油
               （λ（气体1）
                 （设置气体水平！
                    (+ (get-gas-level) gas1)))))))))

```

好的，所以我有这个代码。当我尝试运行我的测试用例时

```
（定义混合动力（制造汽车 50））
```

我得到一个

```
例外：#procedure 构造函数的参数数量不正确
```

错误。而且我不太确定它来自哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:33:55.573

您对`drive`in 部分的定义`make-car`缺少右括号，这意味着`make-car-methods`只有一个参数。

在 Emacs 中重新缩进使这一点非常明显：

```
(define make-car
    (lambda (efficiency)
        (let ([car1 (make-car-ivars efficiency 0)])
            (let ([set-gas-level!
                   (lambda (gas) (car-ivars-gas-in-tank-set! car1 gas))]
                  [gas-level
                   (lambda () ((car-ivars-gas-in-tank car1)))])
                (make-car-methods
                 ;;drive!
                 (lambda (distance)
                     (set-gas-level!
                      (- (get-gas-level)
                         (/ efficiency distance)))
                     ;;get-gas-level
                     (get-gas-levels)
                     ;;refuel
                     (lambda (gas1)
                         (set-gas-level!
                          (+ (get-gas-level) gas1))))))))) 
```

# solr - 如何将 spatial4j 安装到 solr4 中

> ID：13282014
> 
> 赞同：1
> 
> 时间：2012-11-08T03:35:25.900
> 
> 标签：solr

我正在探索 Solr4 和多边形/线串。这里有一些关于它的信息，但不是像我这样的基本用户的操作指南/安装指南。 [http://wiki.apache.org/solr/SolrAdaptersForLuceneSpatial4](http://wiki.apache.org/solr/SolrAdaptersForLuceneSpatial4)

据我了解，您需要将 spatial4j 代码安装到 solr 中。（我充其量是个黑客）。 [https://github.com/spatial4j/spatial4j/tree/master/src/main/java](https://github.com/spatial4j/spatial4j/tree/master/src/main/java)

1.  有人知道我在 solr4 安装中将此代码上传到哪里吗？请记住我使用 /example/solr/collection1 目录。

2.  “由于多种因素，JTS 不能简单地被 solrconfig.xml 中的“”条目引用；它需要在 Solr 的 war 文件中的 WEB-INF/lib 中，基本上“有谁知道这意味着什么？安装说明？我在对去哪里进行一些指导之后。我使用 start.jar 在我的 apache 服务器上启动 solr。

3.  在那之后，我明白我只需要向架构中添加一个字段类型和字段（），就应该安装它。

我试图向它发送多边形和线串查询以查找多边形内或直线半径内的所有文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T05:12:22.037

Solr 已经包含 Spatial4j；它没有的是 JTS，它是一个 java 库（.jar 文件）。[从https://sourceforge.net/projects/jts-topo-suite/](https://sourceforge.net/projects/jts-topo-suite/)下载 JTS （.jar 在 .zip 发行版中）。WEB-INF/lib 是 WAR 文件中的 java webapp 引用。example/webapps/solr.war 就是那个位置。.war 文件实际上是一个 zip，可以是 '.war' 文件形式，也可以在普通目录布局中解压缩。因此，如果您在 OSX 中将“.war”重命名为“.zip”，只需双击它即可展开它。但是然后将生成的目录重命名为“solr.war”，并将原始的 war 文件放在其他地方，因为您现在不会使用它。将 JTS jar 放入 solr.war/WEB-INF/lib/ 中。当您启动 Solr 时，它将可以访问 JTS。如果由于某种原因它无法访问，您将获得与 JTS 相关的 Java 类有关的 ClassNotFoundException。

# node.js - 如何在 Meteor 中向当前登录的用户添加外部服务数据

> ID：13282016
> 
> 赞同：1
> 
> 时间：2012-11-08T03:36:06.763
> 
> 标签：node.js, meteor

我正在使用 Accounts 下的 loginWithExternalService 方法，我很遗憾地发现，虽然您可以使用这些服务之一创建新用户或登录已经拥有凭据的用户，但无法允许当前登录的用户增强他们的方法身份验证，以便他们可以使用他们通过身份验证的任何服务登录。有没有办法将用户的 FB 个人资料或用户的 Twitter url 等信息转储到他们现有的、当前登录的帐户中？我尝试自定义帐户库，但 this.userId 在其中返回 null，因此我无法对当前登录的用户进行更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T01:37:20.643

可能应该有一个更好的 API，但目前（Meteor 0.5.2）下面的服务器代码将创建一个与 Facebook ID 关联的用户。

```
var newlyCreatedUserId = Accounts.updateOrCreateUserFromExternalService(
  'facebook',
  {id: FACEBOOK_ID},
  {additionalFieldOnUserDocumented: 'foo'}).id 
```

如果您深入研究实现，`Accounts.updateOrCreateUserFromExternalService`您可以看到如何将这些字段添加到现有用户。

# java - 页面重定向时如何避免 Internet Explorer 中的空白或白屏？

> ID：13282017
> 
> 赞同：1
> 
> 时间：2012-11-08T03:36:08.853
> 
> 标签：java, internet-explorer, jsf, networking, web-applications

我正在使用 ICEfaces3 框架开发一个 Java EE 项目，现在我们面临一个棘手的问题，当您每次单击横幅选项卡（不限于）发送请求以触发页面重定向时，从那时起只显示一个白屏在重定向到新页面期间将近 1 秒。

这个问题可以在 IE7/8/9 中重现，Firefox 和 Chrome 工作正常。到目前为止，我对IE做了很多研究，当我打开调试工具查看网络状态时，每次白屏显示网络都是对*.iface url的请求，并且在1秒内处理完*.iface请求后，将呈现重定向页面。

哦，附上一个注释，我已经测试了其他应用程序，例如 MS-Hotmail，当我登陆 hotmail 登录页面并单击登录按钮时，还会显示一个白色页面几秒钟，然后呈现重定向页面。这和我的问题一样。

有解决IE白屏重定向问题的解决方案吗？特别感谢您的回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:15:15.173

不幸的是，这是一个特定于浏览器的问题。IE 会在响应到达后立即清除 HTML DOM，无论响应标头是否指示重定向和/或响应正文是否包含 HTML 文档。其他浏览器仅在应该替换为新内容时才清除 HTML DOM 树。

您最好的选择是通过 ajax 执行请求。唯一需要注意的是使用 a 时的非 SEO 友好链接`<h:commandLink>`。

# extjs - 为什么我的树子节点 ID 不是我在 ExtJS 中设置的？

> ID：13282018
> 
> 赞同：0
> 
> 时间：2012-11-08T03:36:22.013
> 
> 标签：extjs

我动态地将一个子节点附加到一个树节点。我希望子节点有 id，record.id。但我从 ExtJS 得到生成的 id。parent.appendChild({ id : record.id, text : record.value });

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:24:32.317

那是因为您混淆了两个不同的概念。每个树节点都有一个视觉表示和一个模型，然后有两个 id：视觉元素 id 和模型 id。

您正在设置模型 ID，而不是视觉元素 ID。请看一下这段代码：

```
var store = Ext.create('Ext.data.TreeStore', {
    root: {
        expanded: true,
        children: []
    }
});

var tree = Ext.create('Ext.tree.Panel', {
    title: 'Simple Tree',
    width: 200,
    height: 150,
    store: store,
    rootVisible: false,
    renderTo: Ext.getBody()
});

var root = tree.getRootNode();
var appendedRecord = root.appendChild({id: 1, text: 'juan'});
alert('component id: ' + appendedRecord.id + '    model id: ' + appendedRecord.get('id'));​ 
```

更好的是，在这里查看 jsfiddle 中的相同代码，不要忘记按 Run

[http://jsfiddle.net/HReqT/](http://jsfiddle.net/HReqT/)

**更新：**

Extjs 是分配视觉元素 id 的人，你不能这样做（或者至少你不应该这样做）

# wso2 - 如何使用过滤器和 xpath 比较 WSO2 ESB 代理服务中的日期

> ID：13282021
> 
> 赞同：1
> 
> 时间：2012-11-08T03:36:42.283
> 
> 标签：wso2, wso2esb

我需要制作具有以下条件的过滤器：

```
<filter xpath= current-dateTime > ( lastUpdateDate + 30 days ) ... 
```

在代理服务中执行此操作的最佳方式是什么？可以为 lastUpdateDate 添加 30 天吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:48:16.293

您可以使用脚本中介和 xpath 在过滤中介中执行此任务。当您按如下方式获取属性的系统日期时，

```
<property name="date" expression="get-property('SYSTEM_DATE', 'yyyy.MM.dd')" scope="default"/> 
```

那么日期的值将采用“2012.11.23”格式。同样，当以该格式定义“lastUpdateDate”时，以下配置将创建您想要的过滤器；

```
<script language="js">
    var date = new Date();
    date.setDate(date.getDate()-30);
    var formattedTime = date.getFullYear() + '.' + ("0" + (date.getMonth()+1)).slice(-2) + '.' + ("0" + date.getDate()).slice(-2);  
    mc.setProperty("modifiedDate",formattedTime);
</script>        
<filter xpath="number(translate(get-property('modifiedDate'),'.','')) > number(translate(get-property('lastUpdateDate'),'.',''))">      
    <then>..... 
```

# .net - 有没有办法在定义它的控件的 XAML 中设置只读依赖属性的值？

> ID：13282028
> 
> 赞同：0
> 
> 时间：2012-11-08T03:37:33.040
> 
> 标签：.net, wpf, mvvm

假设我有一个名为 MyProperty 的只读依赖属性，它有一个公共 get 和一个受保护的 setter，有没有办法在 UserControl 的 XAML 上设置这个属性的初始值？

问题有两个方面：首先，您不能直接引用 XAML 上的属性，因为顶级元素是，但我已经通过以下技巧解决了该问题：

```
<UserControl.Style>
    <Style>
        <Setter Property="local:MyUserControl.MyProperty" Value="{Binding someProperty}" />
    </Style>
</UserControl.Style> 
```

这导致

```
The Property Setter 'MyProperty' cannot be set because it does not have an accessible set accessor. 
```

任何想法如何在不诉诸代码的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:51:12.677

（不仅仅是）MVVM 的基本思想之一是从*呈现的数据中封装数据**呈现*（View）的定义。在我看来，你想要做的并不是真正的 MVVM 风格。我会认为数据字段的默认值是属于数据的东西，而不是它的表现形式。那么，为什么不在 ViewModel 中设置默认值。这更有意义（考虑使用 ViewModel 的假设的第二个视图：您仍然需要相同的默认值）并且您没有任何问题。是否有任何原因，您认为默认值是特定于视图的，因此想在那里定义它？

 *其次，正如另一个答案所说，您的方法非常不一致，因为您想从“外部”设置受保护的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:12:02.570

实现不可变/只读依赖属性的受保护设置器不是正确的方法。使用 SetValue 和静态属性字段仍然可以设置值。您必须意识到您试图隐藏的访问器只是一种便利（公共可用 SetValue 的轻包装）。

您是否看过这篇 MSDN 文章：[ReadOnly Dependency Properties](http://msdn.microsoft.com/en-us/library/ms754044.aspx)？我知道这样一个简单的场景是相当复杂的，但是，嘿，WPF 从来没有变得简单。*

# gwt - 为 GXT 的选项卡面板设置默认选项卡

> ID：13282031
> 
> 赞同：2
> 
> 时间：2012-11-08T03:37:48.500
> 
> 标签：gwt, gxt

我有一个用 GXT 编写的应用程序。有三个选项卡，例如：一、二、三。对于每个选项卡，它也是一个TabPanel，在一个、两个、三个下面分别有A、B和C。

一（A，B，C），二（A，B，C），三（A，B，C），我只想为二添加一个功能，即：**当您选择二时，A是默认选项卡视图。**

首次加载应用程序时就可以了。但是，如果您在二下选择 B，然后选择一或三，然后再次单击二，则 A 不是默认选项卡选择，B 是默认选项（我不想要记住上次选择功能）

任何人都知道如何实施？两个选项卡面板的类非常简单，例如：

```
twoTabPanel.add(aTab);
twoTabPanel.add(bTab);
twoTabPanel.add(cTab); 
```

TabPanel 的方法是什么或如何实现？

我试过了`twoTabPanel.setAutoSelect(true)`，它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:28:28.670

我不确定它是否适用于您的情况，但您是否尝试过让您的组件有状态（默认为 false）。见[http://www.sencha.com/gxtdocs/#com.extjs.gxt.ui.client.widget.Component](http://www.sencha.com/gxtdocs/#com.extjs.gxt.ui.client.widget.Component) setStateFull

请记住，有状态的组件需要一个已定义的 id (component.setId())

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:01:23.663

我不知道您使用的是哪个 GXT 版本。我仍在使用 2.x

自动选择意味着，在显示选项卡面板时显示第一个选项卡。因此，如果您选择`two`第一次`A`显示该选项卡。这就是自动选择的全部含义。如果您选择`two.B`，切换到`one`然后`two`再次返回，`b`将显示，因为那是您离开时的状态`two`。

您需要将监听器添加到`com.extjs.gxt.ui.client.event.Events#Select`事件并`two.A`手动选择。

# git - Git（版本 1.7.11-preview20120620） - 无法在主项目文件夹下添加所有子文件夹

> ID：13282033
> 
> 赞同：1
> 
> 时间：2012-11-08T03:38:15.160
> 
> 标签：git, add

我很难找到这个问题的答案，所以我在这里问。

我在 Windows 7 Ultimate 64 位上安装了上述适用于 Windows 的 Git 版本。

我有一个 EXISTING 文件夹，其中包含许多子文件夹，其中许多文件夹名称中有空格，并且其中包含的许多文件中都有空格。我希望顶级文件夹成为我的“项目”文件夹。我在那个文件夹中初始化了 Git。

当我运行“git status”时，我收到了预期的“未跟踪文件”消息，所以我输入“git add .”。

所有文件都添加到我的项目中进行跟踪，但没有子文件夹。在手动添加每个子文件夹（呃！）之后，我遇到了一个特定的子文件夹，无论我尝试什么都不会添加。文件夹名称中包含空格，但我已成功添加其他带有空格的子文件夹。但是，我无法添加这个。该文件夹的名称是“_04_Spry Script Tests”。

在 Google 上进行了大量搜索后，我尝试了很多方法。这是我记得做过的所有事情的清单。可能还有其他人，但是（我的错）我没有记录我尝试过的每一个实例。对于那个很抱歉。

```
git add .
git add "_04_Spry Script Tests"/.
git add "_04_Spry Script Tests/".
git add */.
git add "_04_Spry*"/.
git add "_04_Spry"*/.
find . -iname "*.*" | xargs git add
git add */\*.*
git add "_04_Spry Script Tests/"\*.* 
```

谁能帮我这个？我做错了什么或错过了什么？

我想“git add”。在主项目文件夹下添加了所有内容。我弄错了吗？

提前感谢任何花时间为我提供帮助的人。让我很烦！=(

窝

* * *

回复@BrianCampbell 的问题

嗨，布赖恩：

感谢您的回复。

是的，子文件夹中有文件。

不，该`.gitignore`文件没有与文件夹（目录）名称或其中任何文件匹配的文件夹或任何模式。

其中一个子文件夹（来自根文件夹）的文件夹树是：

```
_04_Spry Script Tests\Programs & Services
_04_Spry Script Tests\Programs & Services\SCfK
_04_Spry Script Tests\Programs & Services\SCfK\Swim Academy
_04_Spry Script Tests\Programs & Services\SCfK\Swim Academy\_images
_04_Spry Script Tests\Programs & Services\SCfK\Swim Academy\SCFK_Swim_Lessons_Program.jpg
_04_Spry Script Tests\Programs & Services\SCfK\Swim Academy\Swim Schedules
_04_Spry Script Tests\Programs & Services\SCfK\Swim Academy\Swim Schedules\Spring 2010
_04_Spry Script Tests\Programs & Services\SCfK\Swim Academy\Swim Schedules\Spring 2010\Swim Schedules
_04_Spry Script Tests\Programs & Services\SCfK\Swim Academy\Swim Schedules\Spring 2010\Swim Schedules\Swim (Schedule) Spring 2010.pdf
_04_Spry Script Tests\Programs & Services\SCfK\Swim Academy\_images\mock-up.jpg
_04_Spry Script Tests\Programs & Services\SCfK\Swim Academy\_images\SCFK_Swim_Lessons_Program.jpg 
```

根（主项目）目录是`_04_Spry Script Tests`

还有许多其他子文件夹。这有帮助吗？

* * *

**编辑：** @BrianCampbell，当然，当我在新初始化的 Git 文件夹中测试它时，我刚刚给出的示例不会引起任何问题，您要求我将示例目录复制到其中以进行说明！*ugh!* 我不确定哪个子文件夹或文件会成为问题。他们有很多。对不起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T03:43:33.593

那个文件夹里有东西吗？Git 本身并不实际跟踪文件夹。它只跟踪文件，文件夹实际上只作为文件名的一部分进行跟踪。如果文件夹为空，则无需添加任何内容。如果要确保在结帐时创建隐藏文件，可以将隐藏文件添加到文件夹中。

或者，`.gitignore`您的顶级目录或任何子目录中是否有文件？它是否具有与该目录名称或其中所有文件的名称匹配的模式？`.gitignore`如果是这样，您应该从您`git add -f`的`.gitignore`.

如果这些建议都没有帮助，您是否可以尝试将您的目录树精简到重现问题所必需的程度（仅是一个目录，或者尽可能少地出现问题），并显示整个目录你的问题的结构？这将有助于缩小问题的范围。如果你有它，`tree`显示完整目录结构的一个很好的列表；如果没有，`ls -lR`会做。

**编辑**：还有几件事要检查。一方面，我对你的目录结构有点困惑。该`_04_Spry Script Tests`目录是根目录（是否包含`.git`目录）？还是上一层？在您的许多示例中，您正在运行`git add _04_Spry Script Tests`，但如果这是根目录，则需要`git add`从其中运行。

要检查的一件事是您是否有嵌套的 Git 存储库，这可能会导致问题。是否有一个`.git`以上级别的目录？例如，如果`_04_Spry Script Tests`目录外有一个，目录内有一个，而您试图将`_04_Spry Script Tests`目录添加到外部存储库，您会遇到问题。

另一个问题是当你跑步时会发生什么`git add`？你有任何错误，还是没有输出？有没有`git add -v`给你更多信息？

如果您运行`git status`，您是否看到有关这些目录的任何信息？

如果这些都不起作用，请尝试显示以下命令的输出。如果它们生成大量输出，则可以将其缩减为仅包含有问题的目录的行：

```
git status -s
git ls-files -cs
git ls-files -io --exclude-standard
git ls-files -d 
```

# javascript - 使用 MVC 限制 jquery 随机图像

> ID：13282037
> 
> 赞同：0
> 
> 时间：2012-11-08T03:38:50.737
> 
> 标签：javascript, jquery, random

我在这里遇到了一些麻烦，我有一些脚本是从这个链接[jQuery, random div order](https://stackoverflow.com/a/9436445/1099048)中获取的，这个脚本我用来用 MySQL 调用我的查询。

我的问题是，例如我有 8 条记录，但我已经限制只显示 4 条记录，我希望所有记录都可以显示，即使我已经限制显示它。如何？

这里是我的模型

```
public function get_ads_query(){
    $row = $this->db->get('advertise');

    return $row;

} 
```

这是我的代码

```
<div id="advertentie" class="advcontainer">
    <?php 
        $row = $this->M_front->get_ads_query();
        $row = $row->result();
        foreach($row as $ads):
    ?>
    <div class="adblock"><img src="<?php echo base_url(); ?>images/advertise/<?php echo $ads->Picture; ?>" /></div>
    <?php endforeach;?>
</div> 
```

这里是jquery

```
var $container = $(".advcontainer");

setInterval(function(){
    $container.html(shuffle($container.children().get()));
}, 1500);
$(".advcontainer div").each(function(){
    var color = $(this).attr("class");
    $(this).css({backgroundColor: color});
});
function shuffle(o){
    for(var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
    return o;
}; 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:32:11.123

我找到了答案，最终耐心地使用了谷歌的力量，然后发现这个链接[使用 jquery 显示和隐藏了几个随机 div](https://stackoverflow.com/a/7257204/1099048)。再次非常感谢**stackoverflow**

# java - 使用junit在Java中测试无修饰符方法

> ID：13282042
> 
> 赞同：1
> 
> 时间：2012-11-08T03:39:26.763
> 
> 标签：java, unit-testing

我有以下方法，没有在我的 Column 类中完全声明修饰符。

```
float maximumActiveDutyCycle(ArrayList<Column> columns)
{
    // TODO: change public back to default
    float maximumActiveDutyCycle = 0.0f;
    for (Column column : columns)
    {
        if (column.activeDutyCycle > maximumActiveDutyCycle)
        {
            maximumActiveDutyCycle = column.activeDutyCycle;
        }
    }
    return maximumActiveDutyCycle;
} 
```

但是我在TestColumn类中也有以下测试方法。我想知道是否有人可以告诉我应该如何测试我的方法，因为我不知道如何从 Test 类访问它。谢谢！

```
public void testMaximumActiveDutyCycle()
{
    this.column00.setActiveDutyCylce(1.1f);
    this.column01.setActiveDutyCylce(1.3f);
    this.column33.setActiveDutyCylce(1.35f);
    this.column57.setActiveDutyCylce(1.355f);
    Set<Column> columns = new HashSet<Column>();
    columns.add(column00);
    columns.add(column01);
    columns.add(column33);
    columns.add(column57);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T03:43:45.293

理想情况下，您的单元测试类应该与您的类位于相同的类路径包中。

```
src/main/java/com/yourcompany/project <- your project's classes
src/test/java/com/yourcompany/project <- your unit tests 
```

因此，在您的单元测试类中，您可以访问具有包访问可见性的方法：

```
Column column = new Column()
column.maximumActiveDutyCycle(columns); 
```

代码示例：

src/**主**/java/sg/java/test

```
package sg.java.test;

public class Myclass {
    float maximumActiveDutyCycle() {
        return 0f;
    }
} 
```

src/**测试**/java/sg/java/test

```
package sg.java.test;

import static org.junit.Assert.assertTrue;

import org.junit.Test;

public class MyclassTest {
    @Test
    public void testMaximumActiveDutyCycle() {
        Myclass clazz = new Myclass();

        assertTrue(clazz.maximumActiveDutyCycle() == 0f);
    }
} 
```

**编辑**：更改了单元测试的类名，应该用`Test`而不是前缀来固定。虽然方法名称应按`test`约定以前缀为前缀。

![在此处输入图像描述](../Images/41b7cf43ac4fd42b324571d048fcea65.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T03:41:09.530

您的方法具有默认（包）范围。您的测试类必须与您的`Column`类在同一个包中，才能使其可见。

请注意，即使您的`Column`类在`src/`文件夹中并且您的测试在`test/`文件夹中，只要包名称在各自的源文件夹中相同，您的类也将可见。

# java - 中间带有通配符的 Servlet url 模式

> ID：13282047
> 
> 赞同：2
> 
> 时间：2012-11-08T03:39:51.860
> 
> 标签：java, servlets, url-pattern

我正在研究 HttpServlet 并尝试使用通配符定义 url 模式，但没有找到太多文档。

我要捕获的路径是“resource/{id}/action”

我试过我的注释为：

```
@WebServlet("/resource/*/action") 
```

但这不匹配，尽管更基本的“资源/*”可以正常工作。

另外，有什么方法可以自动提取我的 {id} 通配符，而不必手动解析 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:07:42.077

我认为您尝试解决错误的任务。像这样在通配符上映射 servlet 确实是不寻常的决定。看看[Spring MVC](http://static.springsource.org/spring/docs/3.1.3.RELEASE/spring-framework-reference/html/mvc.html)框架，你可以编写这样的方法

```
@RequestMapping("/owners/{ownerId}/pets/{petId}", method=RequestMethod.GET)
public String findPet(@PathVariable String ownerId, @PathVariable String petId, Model model) {
  Owner owner = ownerService.findOwner(ownderId);  
  Pet pet = owner.getPet(petId);  
  model.addAttribute("pet", pet);  
  return "displayPet"; 
} 
```

# javascript - 使用 Greasemonkey 更改链接和单词

> ID：13282052
> 
> 赞同：1
> 
> 时间：2012-11-08T03:40:34.440
> 
> 标签：javascript, greasemonkey, replace

我正在尝试使用greasemonkey更改网址和单词

**例子 ：**

```
<a href="http://www.rapid%2Ashare.com/" target="_blank">www.rapid*share.com</a>
<a href="http://www.*Forbidden*/" target="_blank">www.*Forbidden*</a>

*Forbidden* 
```

我想换词

*   快速*分享到快速分享
*   *禁止*到 mediafire.com
*   *禁止*到narutopedia

**用户脚本：**

```
 var words = {  

    "rapid*share":"rapidshare",
    "*Forbidden*":"www.mediafire.com",
    "*Forbidden*":"narutopedia",

    "":""};

    // read
    String.prototype.prepareRegex = function() {
        return this.replace(/([\[\]\^\&\$\.\(\)\?\/\\\+\{\}\|])/g, "\\$1");
    };

    // tag
    function isOkTag(tag) {
        return (new RegExp("(," + tag + ",) | (," + tag + "$)", "g").test(",pre,blockquote,code,input,button,textarea")) == false;
    }

    // convert word
    var regexs=new Array(),
        replacements=new Array();
    for(var word in words) {
        if(word != "") {
            regexs.push(new RegExp(word.prepareRegex().replace(/(\\)?\*/g, function(e) {return ((e !== "\\*") ? "[^ ]*" : "*");}), "gi"));
            replacements.push(words[word]);
        }
    }

    //
    var texts = document.evaluate(".//text()[normalize-space(.)!='']",document.body,null,6,null), text="", len=regexs.length;
    for(var i=0,l=texts.snapshotLength; (this_text=texts.snapshotItem(i)); i++) {
        if(isOkTag(this_text.parentNode.tagName) && (text=this_text.textContent)) {
            for(var x=0; x<len; x++) text = this_text.textContent = text.replace(regexs[x], replacements[x]);
        }
    }

//replace url or link

    var links = document.links;
    var link;
    for(var i=links.length-1; i >=0; i--){
      link = links[i];
      link.href = link.href.replace("http://www.rapid*share.com", 'http://www.rapidshare.com');
      link.href = link.href.replace("http://www.zid*du.com", 'http://www.ziddu.com');
    } 
```

输出，只改word不改url，*禁止*全部改narutopedia。

```
 <a href="http://www.rapid%2ashare.com/" target="_blank">www.rapidshare.com</a>
     <a href="http://www.*forbidden*/" target="_blank">narutopedia</a>
    <!-- text -->
    narutopedia 
```

jsfiddle[在这里](http://jsfiddle.net/fauzi/GaybX/13/)

任何解决方案？谢谢

**更改网址的解决方案**

```
var url1,url2;
url1 = ['www.youtube.com','youtube.com', 'www.video.google.com', 'video.google.com', 'adbanner', 'advertisement', 'adserver', 'doubleclick'];
url2 = ['208.65.153.242','208.65.153.242', 'video.l.google.com', 'video.l.google.com', ' ', ' ',' ',' ' ]; 
var a, links;
var tmp="a";
var p,q;
links = document.getElementsByTagName('a');
for (var i = 0; i < links.length; i++) {
    a = links[i];
    for(var j=0;j<url1.length; j++)
    {
    tmp = a.href+"" ;
    if(tmp.indexOf(url1[j]) != -1)
    {
    p=tmp.indexOf(url1[j]) ;
    q="http://";
    q = q + url2[j] + tmp.substring(p+url1[j].length,tmp.length);
    a.href=q ;
    }
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T03:56:37.423

换行

```
 link.href = link.href.replace("http://www.rapid*share.com", 'http://www.rapidshare.com');
  link.href = link.href.replace("http://www.zid*du.com", 'http://www.ziddu.com'); 
```

到

```
 link.href = link.href.replace("http://www.rapid%2Ashare.com", 'http://www.rapidshare.com');
  link.href = link.href.replace("http://www.zid%2Adu.com", 'http://www.ziddu.com'); 
```

# ios - 为什么 XCode (4.5.1, Lion) 需要互联网连接才能连接到 iOS 模拟器？

> ID：13282057
> 
> 赞同：2
> 
> 时间：2012-11-08T03:41:15.077
> 
> 标签：ios, xcode, cordova, jquery-mobile

我正在开发一个不需要互联网连接的 ios 应用程序。我正在使用 phonegap 和 jquery-mobile。我想离线开发，但 XCode 卡在“附加到 iosproj”的状态（iosproj 是我的项目名称）。之后我无法停止卡住的任务，不得不强制退出 XCode。但是，通过互联网连接，一切正常。感谢任何线索。

编辑：XCode 似乎可以在没有网络的情况下很好地安装应用程序，但它在接收到 deviceready 事件之前/期间卡住了。

更新 1：无论有无 n/w，该应用程序都可以在模拟器上正常运行。它纯粹是 XCode-iOS 模拟器交互。

更新 2：使用 phonegap (Apache cordova) 时，可以轻松地脱机工作。一旦项目已经构建并安装（使用an/w），所有后续对html/js/css/img的更新都可以直接在模拟器库中的www目录中进行（在你的app文件夹下，在~/Library/Application支持/iPhone 模拟器/6.0/应用程序）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T03:52:28.200

模拟器本身会在启动时尝试与 Apple 建立 Internet 连接。特别是，该`itunesstored`进程会尝试连接到 ax.init.itunes.apple.com 和 phobos.apple.com。

[该信息来自LittleSnitch。建议您安装 LittleSnitch，这样您就可以确定这里正在尝试什么连接。没有人——当然没有开发人员——应该没有它。]

如果您觉得这很麻烦（也就是说，如果连接失败导致您根本无法在模拟器中运行您的应用程序），您应该向 Apple 提交错误报告。但是，我对此没有任何困难，所以这可能是一个 Xcode 错误。我建议先更新到 Xcode 4.5.2，以防它在那里修复。

# websphere - 使用 RAD 7.5.5 在 WAS 7.0 中发布更改时发生错误

> ID：13282058
> 
> 赞同：1
> 
> 时间：2012-11-08T03:41:18.687
> 
> 标签：websphere

我正在使用带有 RAD 7.5.5 的 WAS 7.0。我创建了一个 EAR 项目，问题是每当我重新启动 RAD 或刷新项目时，在 WAS 上发布需要无限时间，并且显示下面的错误消息-

> 发生了错误。有关详细信息，请参阅错误日志。org.eclipse.jst.j2ee.application.internal.impl.ApplicationImpl 与 org.eclipse.jst.javaee.application.Application 不兼容

我曾尝试清理项目，也尝试删除项目并更改工作区，但一段时间后，此错误一次又一次地出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:43:39.490

IBM 软件支持应该能够为您提供帮助。只需打开 PMR。

# iphone - iPhone如何显示来自核心数据的照片库？

> ID：13282061
> 
> 赞同：1
> 
> 时间：2012-11-08T03:41:26.547
> 
> 标签：iphone, objective-c, ios, core-data, photo-gallery

**我正在寻找一个允许从核心数据加载照片**的开源照片库。

这是我想要做的：

*   给画廊一个带有二进制图像数据的核心数据对象
*   让画廊在显示图像时膨胀图像

到目前为止，我无法找到一个开源画廊来做到这一点。我尝试修改 FGallery，但当我尝试使用核心数据作为图像源时，它经常崩溃。我无法找出导致这种行为的原因，不得不放弃这种方法。

我检查了 EGOPhotoViewer，但它只支持本地和网络图像。

**是否有为存储在核心数据中的图像开发的开源照片库？**

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:14:18.833

Core Data 只是一种在您的文档目录或资源中存储数据的方式，它的行为仅类似于本地数据，如果您使用 EGOPhotoViewer，您可以直接在幻灯片上的 Uiimageview 中传递您的图像数据或点击按钮图像将采用二进制格式使用：

```
uiimage initwithdata:<your image data from core data> 
```

根据获取保存在核心数据中的图像数据，您可以使用 ID 或某些参数，这些参数对于保存在核心数据中的每个图像都是唯一的。

# css - 让 div 填充剩余空间

> ID：13282062
> 
> 赞同：4
> 
> 时间：2012-11-08T03:41:33.873
> 
> 标签：css, html

这个问题已经被问了一百万次，但我似乎找不到我的特定版本的解决方案。这是我所拥有的：

```
<div>
    <div id="div1"></div>
    <div id="div2"></div>
    <div id="div3"></div>
</div> 
```

div1 和 div2 始终显示，而 div3 仅有时显示。div2 和 div3 具有固定的宽度。我希望 div1 填充 div2 和可能的 div3 未占用的剩余空间。我希望它们按上述顺序从左到右（[div1][div2][div3]）出现。

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T03:45:52.520

**回答：**

看实际操作：http: [//jsfiddle.net/C9Q3F/3/](http://jsfiddle.net/C9Q3F/3/)

```
<style>
    div { height:100px; }
    #div1 { background-color:red; }
    #div2 { background-color:blue; width:75px; float:right; }
    #div3 { background-color:green; width:100px; float:right; }
</style>
​
<div>
    <div id="div2"></div>
    <div id="div3"></div>
    <div id="div1"></div>
</div>​ 
```

**解释：**

这样做的原因是 - div 的顺序发生了变化 - 所以它写入`div2`和`div3`页面，两者都具有固定宽度，并且都具有`float`。因此，在`div1`编写时（现在是最后一次），默认的 100% 宽度将填充 100% 的可用宽度。由于其他 div 已经占用了它们的空间，所以剩下的就是“可用宽度”。

**对于其他情况（例如，最后一个 div 填充空间）：**

如果您希望最后一个 div 填充剩余空间而不是第一个，就像这个问题/答案一样，只需调整它以使用`float:left;`而不是`float:right;`更改 div 顺序和宽度 - 与此相同的概念并且工作得很好。

# system-verilog - SystemVerilog 数据类型的区别（寄存器、逻辑、位）

> ID：13282066
> 
> 赞同：22
> 
> 时间：2012-11-08T03:42:10.363
> 
> 标签：system-verilog

systemverilog 中有不同的数据类型，可以使用如下：

```
reg [31:0] data;
logic [31:0] data;
bit [31:0] data; 
```

他们三个有什么不同？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-08T08:32:41.233

`reg`并且`wire`是原始类型。不断分配电线并在特定点评估 regs，这里的优点是模拟器可以进行优化。

```
wire w_data;
assign w_data = y;

// Same function as above using reg
reg r_data;
always @* 
  r_data = y ; 
```

学习 Verilog 时的一个常见错误是假设 a reg 类型意味着硬件中的寄存器。模拟器的早期优化可以通过它的使用上下文来完成。

这介绍了`logic`哪些可以用来代替wire和reg。

```
logic  w_data;
assign w_data = y;

// Same function as above using reg
logic r_data;
always @* 
  r_data = y ; 
```

类型`bit`和`byte`也已创建，只能保持 2 个状态 0 或 1 没有 x 或 z。`byte`暗示`bit [7:0]`。使用这些类型可以稍微提高速度，但我建议不要在 RTL 中使用它们，因为您的验证可能会错过未初始化的值或关键重置。

`bit`和的使用`byte`在测试台组件中更为常见，但在必须驱动 x 以刺激数据损坏和恢复的情况下可能会导致问题。

* * *

**更新**

在撰写本文时，我的印象是`logic`不能用于三态，我找不到我所依据的原始论文。在进一步更新、评论或编辑之前，我撤销我的断言，即*逻辑不能用于创建三态线*。

* * *

已`tri`添加类型，用于明确定义三态线。它是基于 a 的属性`wire`，`logic`是基于 a 的属性`reg`。

```
tri t_data;
assign t_data = (drive) ? y : 1'bz ; 
```

如果您不再需要支持向后兼容性 Verilog，那么我建议您切换到使用`logic`and `tri`。使用`logic`有助于重构并`tri` 反映三态线的设计意图。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-30T04:30:17.033

*   名称的选择`reg` [被证明是一个错误](https://stackoverflow.com/a/11234968/86967)，因为寄存器的存在是根据分配的执行方式来推断的。因此，`reg`基本上不推荐使用 of 来支持`logic`实际上是同一类型的 。

*   `logic`是 1 位 4 态数据类型

*   `bit`是一种 1 位 2 态数据类型，其模拟速度可能比`logic`
*   如果 a`logic`也被声明为 a `wire`，则它具有支持多个驱动程序的附加功能。请注意，默认情况下`wire`等效于`wire logic`.
*   一般来说，“[网络](https://stackoverflow.com/questions/9975415/what-does-net-stand-for-in-verilog)”（例如`wire`和`tri`）最适合设计通信总线。

实际上，对于[RTL](https://en.wikipedia.org/wiki/Register-transfer_level)`reg` ，您是否使用、 或`logic`、 或声明通常并不重要`wire`。但是，如果您必须显式声明 4-state 类型（与[您不需要时](https://stackoverflow.com/q/5514923/86967)相反），您通常应该选择`logic`，因为这是该语言的意图。

* * *

相关文章：

*   [Verilog中的那些电线和注册是怎么回事](https://blogs.mentor.com/verificationhorizons/blog/2013/05/03/wire-vs-reg/)
*   [Cliff Cummings 对“逻辑”数据类型的分析 - 20021209](http://www.eda.org/sv-bc/hm/att-0238/01-Logic_20021209.PDF)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-11T12:31:36.440

由于我无法添加评论，因此我必须写出看起来像新答案但实际上并非如此的内容。叹！

@e19293001，@Morgan，`logic`定义了一个不同于 4 状态的变量`bit`，因此`logic`可以使用一个变量来存储`1'bz`，所以下面的代码是有效的并且可以编译：

```
logic t_data;
assign t_data = (drive) ? y : 1'bz ; 
```

但是我同意在这些情况下`tri`应该使用而不是使用来反映设计意图`logic`（尽管我必须说我没有看到人们经常使用`tri`而不是`logic`/ ）。`wire`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-16T14:29:46.880

reg 和 logic 完全一样。这些数据类型出现在always 或initial 块中并存储值，即always @(a) b <= a;，reg b 仅在'a' 更改时才被评估，否则它只是存储它最后分配的值。

电线只是简单的连接，需要持续驱动。我同意它们的行为可以与@Morgan 提到的相同，但可以将它们想象成一根硬线，其值仅改变另一端的值或源改变。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-28T06:27:50.410

逻辑数据类型不允许多个驱动程序。如果多个驱动程序尝试以不同的值驱动它们，则最后一个分配在多重分配的情况下获胜。Reg/Wire 数据类型给出 X。逻辑数据类型只是分配最后一个赋值值。

# regex - Grep Regex - 括号中的单词？

> ID：13282070
> 
> 赞同：0
> 
> 时间：2012-11-08T03:42:20.773
> 
> 标签：regex, grep

我想知道**grep**中的正则表达式以匹配不是特定单词的所有内容。我知道如何不匹配不是*单个*字符的所有内容，

```
gibberish blah[^.]*jack 
```

只要中间不包含句点，那将匹配 blah、jack 和介于两者之间的所有内容。但是有可能做这样的事情吗？

```
gibberish blah[^joe]*jack 
```

匹配 blah、jack 和介于两者之间的所有内容，只要中间不包含“joe”一词？

**更新：** 如果更适合此目的，我也可以使用 AWK。

所以基本上，我只想得到句子“gibberish blah other words jack”，只要“joe”不在其他词中。

**更新 2（答案，不同的问题）：**

对不起，我累了。该句子实际上可以包含单词“joe”，但不能包含两个。所以“胡言乱语 blah jill joe moo jack”会被接受，但“胡言乱语 blah jill joe moo joe jack”不会被接受。无论如何，我想出了解决问题的方法。只需 grep 搜索“gibberish.*jack”，然后计算字数 (wc) 以查看该句子中有多少“joes”。如果 wc 返回 1，则可以，但如果返回 2 或更多，则该句子是错误的。

所以，很抱歉问了一个甚至不能解决我的问题的问题。我会将 sputnick 的答案标记为正确的答案，因为他的答案看起来可以解决原始帖子问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T03:44:18.623

您要查找的内容名为*look around* ，它是&中的一种高级`regex`技术。它用于现代语言。如果你有开关，[grep可以处理这个表达式。](/questions/tagged/grep "show questions tagged 'grep'")如果没有，请尝试。（或任何现代语言）。`pcre``perl``-P``-P``pcregrep`

看

*   [http://www.perlmonks.org/?node_id=518444](http://www.perlmonks.org/?node_id=518444)
*   [http://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)

**笔记**

如果你只是想*否定*a `regex`，也许一个简单的`grep -v "regex"`就足够了。（这取决于您的需求）：

```
$ echo 'gibberish blah other words jack' | grep -v 'joe'
gibberish blah other words jack
$ echo 'gibberish blah joe other words jack' | grep -v 'joe'
$ 
```

看

```
man grep | less +/invert-match 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T03:48:18.730

尝试否定的lookbehind语法：

```
blahish blah(?<!joe)*jack 
```

# c# - EntityDataSource 中的 ContextCreating 方法无法将 Entities 转换为 ObjectContext

> ID：13282083
> 
> 赞同：1
> 
> 时间：2012-11-08T03:45:11.877
> 
> 标签：c#, entity-framework, objectcontext

使用 EntityFramework，我在 App_Code\DAL 中创建了一个 EntityDataModel（.edmx 文件）。在向导中，我将实体命名为“DLGDBEntities”。我`EntityDataSource`在 .aspx 中有许多 s，我将`OnContextCreating`属性设置为“UseSurveyContext”，如下所示：

```
protected void UseSurveyContext(object sender, EntityDataSourceContextCreatingEventArgs e)
{
   e.Context = surveyContext;
} 
```

surveyContext 的设置代码如下：

```
DLGDBEntities surveyContext; 
```

在 Page_Load 中：

```
surveyContext = new DLGDBEntities(); 
```

以上所有代码看起来都与我在每个教程中看到的代码相同（例如：http: [//msdn.microsoft.com/en-us/library/cc668193.aspx#1](http://msdn.microsoft.com/en-us/library/cc668193.aspx#1)），我可以发誓我有它工作。

但是，现在我收到了错误：`Cannot implicitly convert type 'DAL.DLGDBEntities' to 'System.Data.Objects.ObjectContext'`

我做错了什么，为什么它以前有效？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T06:09:21.800

EntityDataSource 控件仅适用于 ObjectContext。您可以通过使用从 DbContext 获取 ObjectContext `((IObjectContextAdapter)context).ObjectContext`。请注意，在 Visual Studio 2012 中，默认代码生成器已更改为生成 POCO 实体和 DBContext，而不是从 Visual Studio 2010 中默认的 EntityObject 和 ObjectContext 派生的实体。

**编辑**

正如 Sven 在评论中指出的，一个新的 EF6 兼容版本的 EntityDataSourceControl 已经发布，它采用 EF6 DbContext 实例。

# facebook - 测试 Facebook 支付中的争议和退款

> ID：13282085
> 
> 赞同：13
> 
> 时间：2012-11-08T03:45:36.867
> 
> 标签：facebook, payment, facebook-credits

我们即将推出我们的应用程序，我们想测试争议/退款流程。我们已经进行了几次成功的测试付款，但我们不愿对它们提出异议。我们的应用会被标记吗？测试争议/退款流程的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-10T00:36:06.967

他们在这里列出了所有文件： [https ://developers.facebook.com/docs/howtos/payments/disputesrefunds/](https://developers.facebook.com/docs/howtos/payments/disputesrefunds/)

我确定您是否输入了争议原因“这是对开发人员的测试：请忽略”或其他内容，或者联系 Facebook 并询问他们是否会找到方法。不过，目前还没有测试争议处理的公共方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-21T12:11:21.580

虽然您无法端到端测试流程，但您可以通过手动执行 POST 请求来测试与后端的集成，方法是`/PAYMENT_ID/refunds`使用应用访问令牌和要退款的金额（可以是全部或部分）。无需通过 FB 发起争议即可从您的应用程序中退款。

> 如果争议证明退款是合理的，您可以使用交易 ID 并使用 ~app access token~ 向 /PAYMENT_ID/refunds 发帖，退款金额 [...] 争议状态将自动设置用refunded_in_cash 的原因解决。
> 
> 消费者不必对付款提出异议，您就可以退款。如果用户直接与您联系，只要可退款金额大于您尝试退款的金额，您就可以为付款申请退款。当您测试您的应用程序时，此功能也很有帮助。

资料来源：[https ://developers.facebook.com/docs/games_payments/fulfillment/disputes](https://developers.facebook.com/docs/games_payments/fulfillment/disputes)

# asp.net-mvc - nhibernate中按日期排序的列按字符串排序

> ID：13282087
> 
> 赞同：1
> 
> 时间：2012-11-08T03:45:43.223
> 
> 标签：asp.net-mvc, nhibernate, queryover

我正在尝试使用日期列对数据进行排序，但该列排序为字符串而不是日期。如何解决这个问题呢？

代码：

```
var projection = Projections.SqlFunction("lower", NHibernateUtil.String,Projections.Property("datecolumn1"));

if(order="desc")queryOver = queryOver.OrderBy(projection).Desc;
else queryOver = queryOver.OrderBy(projection).Asc; 
```

结果：（按升序排序）

```
8/7/2012 5:34 AM
11/7/2012 7:21 AM
11/7/2012 7:21 AM
11/7/2012 7:21 AM
11/7/2012 7:21 AM
8/27/2012 9:35 AM 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T05:51:51.447

上面的片段显示有一个`string`投影。所以结果被排序为一组字符串值。（这可能导致依赖于 sql server 默认`DateTime.ToString`格式的不同结果）。

要按日期对其进行排序，请添加不同的投影：

```
var projection = Projections.Property("datecolumn1")); 
```

现在它应该按原生 SQL Server`DateTime`类型排序

# javascript - 用替换/正则表达式在 JavaScript 中编写剩余的修剪

> ID：13282092
> 
> 赞同：3
> 
> 时间：2012-11-08T03:46:10.650
> 
> 标签：javascript

我正在尝试制作一个从字符串中删除多余空格的程序。我正在尝试制作我期望需要的前两个功能。在做了一些测试并咨询了一位同学之后，我无法弄清楚第二个功能有什么问题（我相当有信心这是第二个功能）？

```
var isWhiteSpace = function(char) {
    var out = false;
    if (char === ' ' || char === '\f' || char === '\n' || char === '\r' || char === '\t') {
        out = true;
    }
    return out;
};

var removeLeadingSpaces = function(s) {
    var i;
    for (i = 0; i < s.length; i++) {
        if (isWhiteSpace(s.charAt(i))) {
            s.replace(s.charAt(i), '');
        }
    }
    return s;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T03:50:24.583

`s = s.replace(/^\s+/,"");`会比运行循环更简单。

这是因为 javascript 的正则表达式已经知道什么是空格 ( `\s`) 并且知道如何从字符串的开头提取 ( `^`) 并且可以自行递归 ( `+`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T03:49:33.047

利用`s=s.replace(s.charAt(i), '');`

replace 方法不会修改原始字符串 - 它返回一个值。

# r - 从 CBOE 下载 VIX 期货价格

> ID：13282094
> 
> 赞同：2
> 
> 时间：2012-11-08T03:46:47.623
> 
> 标签：r, web-scraping

我正在尝试通过下载此页面 (http://cfe.cboe.com/Products/historicalVIX.aspx) 上的所有 CSV 文件来获取 VIX 期货的历史价格。这是我用来执行此操作的代码：

```
library(XML)

#Extract all links for url
url <- "http://cfe.cboe.com/Products/historicalVIX.aspx"
doc <- htmlParse(url)
links <- xpathSApply(doc, "//a/@href")
free(doc)

#Filter out URLs ending with csv and complete the link.
links <- links[substr(links, nchar(links) - 2, nchar(links)) == "csv"]
links <- paste("http://cfe.cboe.com", links, sep="")

#Peform read.csv on each url in links, skipping the first two URLs as they are not relevant.
c <- lapply(links[-(1:2)], read.csv, header = TRUE) 
```

我得到错误：

```
Error in read.table(file = file, header = header, sep = sep, quote = quote,  : 
  more columns than column names 
```

经过进一步调查，我意识到这是因为某些 CSV 文件的格式不同。如果我手动加载 URL `links[9]`，我会看到第一行有以下免责声明：

```
CFE data is compiled for the .......use of CFE data is subject to the Terms and Conditions of CBOE's Websites. 
```

大多数其他文件（例如`links[8]`和`links[10]`）都很好，所以它似乎是随机插入的。是否有一些 R 魔法可以解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T04:04:24.570

[**我的qmao**](https://r-forge.r-project.org/R/?group_id=1113)包中有一个`getSymbols.cfe`方法（用于 quantmod 包中的[**函数**](http://cran.r-project.org/package=quantmod)），这将使这更容易。[](https://r-forge.r-project.org/R/?group_id=1113)**[`getSymbols`](http://www.inside-r.org/packages/cran/quantmod/docs/getSymbols)[](http://cran.r-project.org/package=quantmod)**

 ****```
#install.packages('qmao', repos='http://r-forge.r-project.org')
library(qmao) 
```

这是来自的示例部分`?getSymbols.cfe`（请阅读帮助页面，因为该函数有一些您可能希望与默认值不同的参数）

```
getSymbols(c("VX_U11", "VX_V11"),src='cfe') 
#all contracts expiring in 2010 and 2011.
getSymbols("VX",Months=1:12,Years=2010:2011,src='cfe')
#getSymbols("VX",Months=1:12,Years=10:11,src='cfe') #same 
```

它不仅适用于 VIX

```
getSymbols(c("VM","GV"),src='cfe') #The mini-VIX and Gold vol contracts expiring this month 
```

如果您不熟悉`getSymbols`，默认情况下它会将数据存储在您的中`.GlobalEnv`并返回已保存对象的名称。

```
> getSymbols("VX_Z12", src='cfe')
[1] "VX_Z12"

> tail(VX_Z12)
           VX_Z12.Open VX_Z12.High VX_Z12.Low VX_Z12.Close VX_Z12.Settle VX_Z12.Change VX_Z12.Volume VX_Z12.EFP VX_Z12.OpInt
2012-10-26       19.20       19.35      18.62        18.87          18.9           0.0         22043         15        71114
2012-10-31       18.55       19.50      18.51        19.46          19.5           0.6         46405        319        89674
2012-11-01       19.35       19.35      17.75        17.87          17.9          -1.6         40609       2046        95720
2012-11-02       17.90       18.65      17.55        18.57          18.6           0.7         42592       1155       100691
2012-11-05       18.60       20.15      18.43        18.86          18.9           0.3         28136        110       102746
2012-11-06       18.70       18.85      17.75        18.06          18.1          -0.8         35599        851       110638 
```

* * *

**编辑**

我现在看到我没有回答您的问题，而是向您指出了另一种获得相同错误的方法！使您的代码工作的一种简单方法是制作一个包装器`read.csv`，用于`readLines`查看第一行是否包含免责声明；如果是，则跳过第一行，否则`read.csv`照常使用。

```
myRead.csv <- function(x, ...) {  
  if (grepl("Terms and Conditions", readLines(x, 1))) { #is the first row the disclaimer?
    read.csv(x, skip=1, ...)  
  } else read.csv(x, ...)
}
L <- lapply(links[-(1:2)], myRead.csv, header = TRUE) 
```

我也将该补丁应用到`getSymbols.cfe`. 您可以使用 svn checkout 获取最新版本的 qmao (1.3.11)（如果您需要帮助，请参阅[这篇文章](https://stackoverflow.com/questions/11105131/cannot-install-r-forge-package-using-install-packages)），或者，您可以等到 R-Forge 为您构建它，这通常会很快发生，但可能需要最多几天。****

# python - Python中的字典转换为列表

> ID：13282095
> 
> 赞同：0
> 
> 时间：2012-11-08T03:46:55.827
> 
> 标签：python, dictionary

我有一个例子的字典： E = 527:{ ('GENERAL MOTORS CORP.', datetime.date(1, 1, 1), False, 'KENOSHA', 'WI')}

我需要取出 datetime.date(1,1,1) 并将其变成元组之外的单独列表。我应该访问多个键的日期并将它们包含在列表中。我很困惑，并希望为任何键的通用执行此操作。这取自一般数据表，其中键是索引 1，元组中的值是下一个索引值。[E[527][1] 是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T03:50:04.357

```
[ t[1] for _, t in E.iteritems() ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T03:50:05.907

采用：

```
dates = [v[1] for k,v in E.iteritems()] 
```

或者：

```
dates = [v[1] for v in E.itervalues()] 
```

或者：

```
from operator import itemgetter

dates = map(itemgetter(1), E.itervalues()) 
```

根据您的评论，它可能类似于：

```
from datetime import datetime

def get_dates(filename, A, B):
    with open(filename) as f:
        dates = [datetime.strptime(row.split()[2], format) for row in f.readlines()]
    dates = [dt for dt in dates if dt.year == A and dt.month == B]
    return [(dt, dates.count(dt)) for dt in set(dates)] 
```

# java - 调整 JFrame 大小时显示时钟

> ID：13282096
> 
> 赞同：1
> 
> 时间：2012-11-08T03:47:26.950
> 
> 标签：java, swing, user-interface, button

当我按下“绘图”按钮时，时钟不显示。我知道该按钮可以正常工作，因为在其中的 textField 对象上调用 setText 方法就可以了。我尝试了各种方法，但找不到任何有效的方法。我什至联系了我的教授，他也遇到了困难。但后来我调整了框架的大小，它突然出现了......我不明白为什么，我试图弄清楚如何通过按下“绘制”按钮来让时钟显示出来。任何帮助表示赞赏，并提前非常感谢您！

以下是我的全部课程，以防万一您希望自己运行它们，但对于那些喜欢简洁的人，请关注 ClockFrame 类中的内部类：

```
 import java.awt.Graphics;
            import java.awt.Graphics2D;
            import java.awt.geom.Ellipse2D;
            import java.awt.geom.Line2D;

            import javax.swing.JComponent;

            public class ClockComponent extends JComponent
            {
                final int HOURS_ON_CLOCK = 12;
                final double MINUTES_IN_HOUR = 60;
                final double HOUR_LENGTH = .4;
                final double MINUTE_LENGTH = .9;

                private double radius;
                private double posXY;
                private double hourHandLength;
                private double minuteHandLength;
                private double center;

                private Line2D.Double hourHand;
                private Line2D.Double minuteHand;

                public ClockComponent(double rad, double xy)
                {
                    radius = rad;
                    posXY = xy;

                    center = posXY + radius;

                    hourHandLength = radius * HOUR_LENGTH;
                    minuteHandLength = radius * MINUTE_LENGTH;

                    hourHand = new Line2D.Double(center, center, 
                            center, center - hourHandLength);
                    minuteHand = new Line2D.Double(center, center, 
                            center, center - minuteHandLength);
                }

                public void setClock(int hour, int minute)
                {
                    final double HOURS_TO_RADIANS = 2 * Math.PI / HOURS_ON_CLOCK;
                    final double MINUTES_TO_RADIANS = 2 * Math.PI / MINUTES_IN_HOUR;

                    hourHand.setLine(center, center, center + hourHandLength * 
                            Math.sin((hour + minute / MINUTES_IN_HOUR) * HOURS_TO_RADIANS), 
                            center - hourHandLength * 
                            Math.cos((hour + minute / MINUTES_IN_HOUR) * HOURS_TO_RADIANS));
                    minuteHand.setLine(center, center,
                            center + minuteHandLength * Math.sin(minute * MINUTES_TO_RADIANS),
                            center - minuteHandLength * Math.cos(minute * MINUTES_TO_RADIANS));
                }

                public void paintComponent(Graphics g)
                {
                    Graphics2D g2 = (Graphics2D) g;

                    double diameter = 2 * radius;

                    Ellipse2D.Double clockFace = 
                            new Ellipse2D.Double(posXY, posXY, diameter, diameter);

                    g2.draw(clockFace);
                    g2.draw(hourHand);
                    g2.draw(minuteHand);
                }
            } 
```

带有 ActionListener 内部类的 ClockFrame 类。我觉得 ActionListener 内部类是我遗漏的地方，但我无法弄清楚到底是什么......

```
 import java.awt.BorderLayout;
            import java.awt.GridLayout;
            import java.awt.event.ActionEvent;
            import java.awt.event.ActionListener;

            import javax.swing.JButton;
            import javax.swing.JFrame;
            import javax.swing.JLabel;
            import javax.swing.JPanel;
            import javax.swing.JTextField;
            import javax.swing.border.EtchedBorder;

            public class ClockFrame extends JFrame
            {
                final int FIELD_SIZE = 10;
                final int FRAME_WIDTH = 450;
                final int FRAME_HEIGHT = 450;
                final int FIELD_WIDTH = 5;

                private JPanel frameFace;
                private JPanel fieldPanel;
                private JPanel drawingPanel;

                private JLabel hourLabel;
                private JLabel minuteLabel;

                private JTextField hourField;
                private JTextField minuteField;

                private JButton drawButton;

                private ClockComponent clock;

                public ClockFrame(double rad, double xy)
                {
                    setTitle("Clock viewer");
                    setSize(FRAME_WIDTH, FRAME_HEIGHT);

                    frameFace = new JPanel(new BorderLayout());
                    fieldPanel = new JPanel();
                    drawingPanel = new JPanel();
                    drawingPanel.setBorder(new EtchedBorder());

                    hourLabel = new JLabel();
                    hourLabel.setText("Hour ");

                    minuteLabel = new JLabel();
                    minuteLabel.setText("Minute ");

                    hourField = new JTextField(FIELD_SIZE);
                    minuteField = new JTextField(FIELD_SIZE);

                    drawButton = new JButton("Draw");
                    drawingPanel.setLayout(new GridLayout(1, 1));

                    clock = new ClockComponent(rad, xy);

                    fieldPanel.add(hourLabel);
                    fieldPanel.add(hourField);
                    fieldPanel.add(minuteLabel);
                    fieldPanel.add(minuteField);
                    fieldPanel.add(drawButton);

                    ActionListener clockListener = new DrawListener();
                    drawButton.addActionListener(clockListener);

                    frameFace.add(fieldPanel, BorderLayout.NORTH);
                    frameFace.add(drawingPanel, BorderLayout.CENTER);

                    add(frameFace);
                }

                class DrawListener implements ActionListener
                {
                    public void actionPerformed(ActionEvent event)
                    {
                        int hour = Integer.parseInt(hourField.getText());
                        int minute = Integer.parseInt(minuteField.getText());

                        clock.setClock(hour, minute);
                        drawingPanel.add(clock);
                    }
                }
            } 
```

和一个主要方法

```
 import javax.swing.JFrame;

            public class ClockViewer
            {
                public static void main(String[] args)
                {
                    JFrame frame = new ClockFrame(75, 100);
                    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                    frame.setVisible(true);
                }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T03:51:30.830

每当您在实现 GUI 后将组件添加到容器或从容器中删除组件时，您需要告诉该容器重新布置其组件并重新绘制它们。这是通过调用`revalidate()`然后`repaint()`在容器上完成的，这里是drawingPanel：

```
clock.setClock(hour, minute);
drawingPanel.add(clock);
drawingPanel.revalidate();
drawingPanel.repaint(); 
```

# meteor - 我应该使用哪个版本的 Mongodb？

> ID：13282097
> 
> 赞同：0
> 
> 时间：2012-11-08T03:47:26.987
> 
> 标签：meteor

我在我的 ubuntu 10.04 服务器上使用 Meteor，我想知道我应该使用哪个版本的 Mongodb？

我在文档中没有看到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T05:42:17.360

Meteor 附带 MongoDB 2.2。但是您应该能够连接到[JavaScript MongoDB 驱动程序](https://github.com/mongodb/node-mongodb-native)版本 1.1.5支持的任何 MongoDB 版本。

驱动程序的文档没有告诉我们它支持哪些版本。但是 Mongo 的[有线协议](http://www.mongodb.org/display/DOCS/Mongo+Wire+Protocol)相当稳定，所以我希望旧版本的 MongoDB 能够很好地工作。报告赞赏。

# java - Android 上的 OpenCV 2.4.3。使用 CameraBridgeViewBase

> ID：13282098
> 
> 赞同：3
> 
> 时间：2012-11-08T03:47:29.873
> 
> 标签：java, android, opencv

你能告诉我如何让相机在纵向运行示例面部检测中转动。在 2.4.3 RC 中出现了以下内容：

**新的 Java 示例框架。示例进行了重大重构，我们建议您研究新架构，因为它解决了旧框架的一些问题。新框架为 CV 应用程序提供了统一的基础，包括任何 Java 或 Native 相机、自定义视图布局、基于 Manager 的简单 OpenCV 初始化、正确的应用程序事件处理：暂停、恢复、旋转等。**

网站上CameraBridgeViewBase的规范中没有描述如何使相机转动。我试过这个：

```
public Mat onCameraFrame(Mat inputFrame) {

inputFrame.copyTo(mRgba);
Imgproc.cvtColor(mRgba, mGray, Imgproc.COLOR_RGBA2GRAY);
if ((getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT)
&& (mGray != null) && (mRgba != null)) {

Core.transpose(mGray, tmp_grey);
Core.flip(tmp_grey, mGray, 0);

} 
```

结果是——mgray转（我可以在渲染图中看到）。使用 mRgba 相同的操作会出现黑屏并且没有错误。我用的是华硕 Nexus 7

我在 OpenCV 2.4.2 中尝试了 VideoCapture，没有结果。

# emacs - 在 Emacs 中限制字体高度

> ID：13282101
> 
> 赞同：4
> 
> 时间：2012-11-08T03:47:43.333
> 
> 标签：emacs, fonts

我在 Emacs (DejaVu Sans Mono) 中使用 Fedora 17 的默认等宽字体。不幸的是，这种字体的粗体形式比常规形式占用更多的垂直空间。这意味着每当我输入变为粗体的文本时，屏幕上的所有行都会向下移动一点。同样，当我突出显示包含粗体文本的文本区域时。

有没有一种方法可以强制 EMACS 对这种（或任何）字体的常规和粗体形式使用完全相同的高度？

# c# - Solr 4.0 和 SolrNet 获取按文档计数排序的组

> ID：13282102
> 
> 赞同：1
> 
> 时间：2012-11-08T03:47:44.857
> 
> 标签：c#, solr, solrnet

我正在使用 Solr 4.0、SolrNet 和 C#。

我试图从 solr 中的许多产品中获得排名前 10 或 5 的最高排名（即按组中产品数量排序的产品组）产品组作为搜索结果。根据搜索条件获取所有产品组并在这些组上应用 LINQ 以根据文档计数进行排序，然后将前 10 个组作为结果将是一个选项，但首先它将所有符合搜索条件的组获取到应用程序中以应用 LINQ solr 的使用意义较少。

是否可以使用 SolrNet 4.0 直接从 Solr 按具有更多产品数量的产品组排序获得搜索结果？

谢谢

* * *

对于上述代码，Solr 4.0 在 Grouping 属性中返回结果，它有 2 个 GroupedResults 1 用于 DestCityCode，2nd 用于 OriginCityCode。为了明确我的观点，我只考虑一个 GroupedResult 即“DestCityCode” 在 Value 属性中它有 2 个组，一个用于“STL”，另一个是“CUL”。对于“STL”组的 NumFound=9，而“CUL”组的 NumFound=1。同样对于 GroupedResult "OriginCityCode"

是否可以获得按不同城市对分组的文档计数和文档，而不是每个城市一组？此外，我没有找到任何与 GroupedParameters 的“Func”和“Query”属性相关的文档。无论如何，将我的预期结果作为不同的城市对有帮助吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:41:40.713

它[正在进行中](https://issues.apache.org/jira/browse/SOLR-2072)，Solr 目前不支持该功能。

评论 ：-

> 现在，组的排序值（控制整个组相对于彼此的排序方式）仅取决于该组中的顶部文档。这个问题是关于一种不同类型的函数，它可以从其他东西中派生出一个组排序值。一个例子是能够根据该组的平均分数而不是最高分数对组进行排序。**另一个例子是能够按每组中的命中数进行排序**。

# ruby-on-rails - Rails 3中的远程搜索表单

> ID：13282106
> 
> 赞同：0
> 
> 时间：2012-11-08T03:48:00.070
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试实现一个简单的异步搜索表单，该表单将使用 AJAX 在同一页面上显示搜索结果。我的代码如下。使用局部视图呈现搜索结果。提交表单后，我重新创建了一个结果数组并希望它显示在页面上。但这没有发生，页面没有更新。我已经看了一天 Rails 了，我认为这很简单，但我需要帮助。

路线：

```
match 'search' => 'search#index' 
```

控制器：

```
class SearchController < ApplicationController
  def index
    @results = params[:search] ? ['test0', 'test1', 'test2'] : []
  end
end 
```

观点`index.html.erb`：

```
<%= form_tag search_path, :method => :get, :remote => true do %>
  <%= text_field_tag :search %>
  <%= submit_tag 'Search' %>
<% end %>
<div id="results">
  <%= render :partial => 'results' %>
</div> 
```

部分观点`_results.html.erb`：

```
<ul>
  <% @results.each do |result| %>
    <li>
      <%= result %>
    </li>
  <% end %>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:26:16.663

我需要一个与表单视图相对应的视图：`index.js.erb`

```
$('#results').html("<%= escape_javascript(render :partial => 'results') %>"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-08T05:10:40.830

您使用了三元运算符：

```
@results = params[:search] ? ['test0', 'test1', 'test2'] : [] 
```

它的语法是：

```
If Condition is true ? Then value X : Otherwise value Y 
```

但这不是条件：`@results = params[:search]`，它只是分配。您需要提供条件、表达式以返回，`true`或者`false`，如果`true`您`@result`有`['test0', 'test1', 'test2']`，则为空。

三元运算符示例：

```
irb(main):182:0> name = "akonsu"
=> "akonsu"
irb(main):183:0> name == "akonsu" ? "Hello akonsu" : "Who are you?" 
=> "Hello akonsu" 
```

# javascript - 与矩形相比，画圆真的这么低效吗？

> ID：13282107
> 
> 赞同：0
> 
> 时间：2012-11-08T03:48:03.170
> 
> 标签：javascript, html, canvas

我正在使用 JavaScript 开发一个非常小的项目，只是为了帮助我从下往上理解画布。我现在尽量避免使用框架之类的东西，这样我才能理解 HTML5 游戏的基本功能。

这是一个相当基本的“光标移动器”，带有一条褪色的尾巴。而已。只是一种颜色的形状，根据玩家的输入四处移动，尾巴逐渐消失。我建议你试试看；它实际上很漂亮。

无论如何，显然我更喜欢光标是一个圆圈，因为它看起来更平滑。但是，每当我这样做时，浏览器几乎完全锁定了我。它显然有效，至少在很大程度上有效，但它比一只乌龟跑过冷冻花生酱要慢。

我知道我不应该只包含*JSFiddle*，但它的代码量很大，而且整个事情运行缓慢。

问题很可能出在绘图功能中：

```
Game.draw = function() {
    for (var sn = 0; sn < this.strokes.length; sn++) {
        var s = this.strokes[sn];
/*1*/   this.context.arc(s.x, s.y, this.cursorRadius, 0, 2 * Math.PI);
        this.context.fillStyle = this.bgColor;
/*2*/   //this.context.fillRect(s.x, s.y, this.cursorWidth, this.cursorHeight);
/*1*/   //this.context.fill();
        this.context.fillStyle = s.getColor();
/*2*/   //this.context.fillRect(s.x, s.y, this.cursorWidth, this.cursorHeight);
/*1*/   this.context.fill();
    }
}; 
```

这些线由方法标记。1 对应于圆形，而 2 对应于矩形。

这是整个项目：http: [//jsfiddle.net/w4Rg3/3/](http://jsfiddle.net/w4Rg3/3/)

我只是觉得很难相信有圈子会慢得多（在看到 JS*可以*做的所有项目之后），而且我可能做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:05:34.240

只是一些观察（哦，不！与正方形相比，绘制圆圈并不是“效率低下”，当然更慢 - 但仍然相当快）不幸的是，你的问题比那个更深。

看来您需要重新考虑计划实施游戏的方式。正如你所说的那样，它运行得比乌龟在冷冻花生酱中运行的速度还要慢。（呵呵，好样的！）

我怀疑这与您设置请求动画帧的方式有关，但真的无法深入调试而不担心我的笔记本电脑会融化并散发出神奇的蓝烟。

我从一个副本中修剪了所有的 js，除了 Key 变量和 2 次调用来为 keyup 和 keydown 添加事件侦听器。这给我留下了以下信息：

```
<!DOCTYPE HTML>
<html>
<head>
<title>flowing</title>
<script>

var Key = 
{
    _pressed: {},

    SPACE: 32,
    LEFT: 37,
    UP: 38,
    RIGHT: 39,
    DOWN: 40,

    isDown: function(keyCode) {
        return this._pressed[keyCode];
    },

    onKeydown: function(event) {
        this._pressed[event.keyCode] = true;
        console.log(this._pressed[event.keyCode]);
    },

    onKeyup: function(event) {
        delete this._pressed[event.keyCode];
        console.log(this._pressed[event.keyCode]);
    }
};
window.addEventListener('keyup', Key.onKeyup, false);
window.addEventListener('keydown', Key.onKeydown, false);

</script>
<style>
</style>
</head>
 <!-- canvas gets inserted here by js -->
<body >
</body>    
</html> 
```

它爆炸了，大时代！

你看，事情是——当你像这样附加一个事件监听器时，只要你在处理程序中，'this'关键字实际上对应于*触发事件的 HTML 元素*。那么，这到底是什么意思呢？

里面的3个函数可以扩展为：

1.  返回窗口._pressed[keyCode];
2.  window._pressed[event.keyCode] = true;
3.  删除 window._pressed[event.keyCode];

唯一的问题是，窗口对象没有 _pressed 变量。变量 Key 有。

您应该打开您正在使用的任何浏览器的开发者工具控制台。在 Chrome、FF 和 Opera 中是 Ctrl-Shift-I，在 IE 中是 F12。

这将立即突出显示诸如此类的错误。

我会看看我是否找不到冰山，这样我就可以继续测试，而不必担心不得不购买新的 lappy。

[编辑：] Game.draw 的新代码

```
Game.draw = function() 
{
    for (var sn = 0; sn < this.strokes.length; sn++) 
    {
        var s = this.strokes[sn]; /*1*/
        this.context.beginPath();
        this.context.arc(s.x, s.y, this.cursorRadius, 0, 2 * Math.PI);
        this.context.fillStyle = s.getColor(); //.bgColor; /*2*/
        this.context.closePath();
        this.context.fill();
    }
}; 
```

绘制圆弧涉及路径。要正确使用路径，您需要在开始定义路径时告知 canvas 元素，并在完成定义路径时再次告知。我猜浏览器只是以“所有路径之母”结束，这很自然地花了很长时间才能绘制出来。当然，您的路径非常简单，只是简单的圆圈。随着画布的状态机根据我们的意图正确更新，无论我们绘制圆形还是正方形，代码的响应能力似乎没有什么不同。希望这是你问题的根源。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T09:25:03.093

每个人！我发现了问题！这与我的游戏结构或任何特别挑剔的东西无关。只是一个 API 问题！

问题确实存在于我在第一篇文章中的问题中的代码示例中。

```
Game.draw = function() {
    for (var sn = 0; sn < this.strokes.length; sn++) {
        var s = this.strokes[sn];
/*1*/   this.context.beginPath();  /*THIS IS FIXED*/
/*1*/   this.context.arc(s.x, s.y, this.cursorRadius, 0, 2 * Math.PI);
/*1*/   this.context.closePath();  /*THIS IS FIXED*/
        this.context.fillStyle = this.bgColor;
/*2*/   //this.context.fillRect(s.x, s.y, this.cursorWidth, this.cursorHeight);
/*1*/   this.context.fill();
        this.context.fillStyle = s.getColor();
/*2*/   //this.context.fillRect(s.x, s.y, this.cursorWidth, this.cursorHeight);
/*1*/   this.context.fill();
    }
}; 
```

我确保用“这是固定的”注释标记我添加的行。我假设它以前只是创建一个非常非常长的弧线并一遍又一遍地绘制它，但谁知道呢？无论如何，问题解决了，它看起来很漂亮。

# jquery - 使用 jquery 突出显示 iframe 中的文本

> ID：13282108
> 
> 赞同：1
> 
> 时间：2012-11-08T03:48:14.160
> 
> 标签：jquery, iframe, highlight

我尝试使用 jquery.highlight-4.js 突出显示页面中的文本。

```
$('body').highlight('t'); 
```

我的网页包含一个来自同一域的 iframe。

它不适用于 iframe 内的文本（iframe 与我的网页位于同一域中）。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-13T08:59:24.973

`$(iframeID).contents().find('body').highlight(keyword);`
或者
`var iframes = document.getElementsByTagName("iframe"); $(iframes[0].contentWindow.document.body).highlight(keyword);`

**并且**不要忘记`.highlight { background-color: yellow }`在 iframe 中添加子页面的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:10:31.923

您的代码突出显示了整个`body`.，但是大多数浏览器认为 iFrame 内的内容`body`与当前文档不同。

简而言之，$('body') 包括页面中的所有内容，但不包括 iFrame**中**的内容（由于 iFrame 的笨拙性质）。

通过使用 jQuery 显式选择内容来突出显示内容。

我倾向于不惜一切代价避免使用 iFrame。jQuery 在实时处理 HTML 内容方面非常强大，我从未真正被迫使用 iFrame。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T03:51:37.070

认为您应该首先获取 iframe，例如 $("#frameID")，然后您可以使用其中的某些内容进行操作...

# ios - 如何访问按钮发送，在 MFMailComposeViewController 中取消

> ID：13282110
> 
> 赞同：0
> 
> 时间：2012-11-08T03:48:40.703
> 
> 标签：ios, mfmailcomposeviewcontroller

我想设置`isAccessibilityElement`按钮发送、取消、删除草稿、保存草稿，但我无法访问这些按钮。我已经尝试过：

```
mailComposer.navigationBar.topItem.isAccessibilityElement=YES; 
```

和

```
mailComposer.navigationBar.topItem.rightBarButtonItem.isAccessibilityElement=YES; 
```

请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T04:14:27.500

您无权访问 MFMailComposeViewController 的发送和取消按钮。这些按钮及其操作是预定义的，不能更改。

来自苹果文档：

```
*Important: The mail composition interface itself is not customizable and must not be modified by your application. 
In addition, after presenting the interface, your application is not allowed to make further changes to the email content.* 
```

# sass - 如何高效构建指南针 sass

> ID：13282112
> 
> 赞同：-1
> 
> 时间：2012-11-08T03:48:45.860
> 
> 标签：sass, compass-sass

我是 compass sass 的初学者，我想知道如何高效地构建一个 compass sass 项目。github 中是否有任何现有的 compass sass 框架。或者任何有经验的开发人员可以建议我如何编写一个好的 compass sass 项目。非常感谢。
![在此处输入图像描述](../Images/4321414120cc39d390a0aff743c52eea.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T05:55:23.893

已经移植了各种框架以与 Compass 一起使用，但我不推荐它们。常见的 CSS 框架被构建为一刀切，因为这是使用预先设置的 CSS 类列表可以做到的最好的事情。使用 Sass，您可以构建更有针对性和更灵活的工具，然后使用 Compass 以独特的方式将它们组合在一起。

有几个已回答的 SO 问题与您所问的内容相关：

*   [将 Compass/Sass 与另一个 CSS 框架一起使用](https://stackoverflow.com/questions/12309773/using-compass-sass-with-another-css-framework/12312041#12312041)以获得更多关于框架的信息。
*   [SASS：扩展 Classess 与变量](https://stackoverflow.com/questions/12325610/sass-extending-classess-vs-variables/12327228#12327228)以了解更多关于使用`@extends`.
*   [按元素、功能和媒体查询构建 CSS（SASS、LESS）文件：3D 代码结构？](https://stackoverflow.com/questions/12822810/structuring-css-sass-less-files-by-elements-by-function-and-by-media-queries/12824576#12824576)有关组织代码的更多信息。

保持 mixins 和静默类（如`%mgb5`）尽可能简单而不失去意义。对于一般的班级来说，这是一个很好的规则。`nav`很短，仍然很容易理解，`mgb5`没有那么多。相同的规则可以引导您进入 mixin/class。如果你只有一个属性，那么 mixin/class 可能意义不大。如果你有三十个，它可能试图做太多的意义。将较大的 mixins/classes 拆分为较小的 mixins/class 以获得更大的灵活性，只要每个都代表一个独特且有意义的操作。

相同的基本准则适用于静态 css 与变量。如果任何规则的目的在普通 css 中不明确，那么它应该成为 mixin、函数或变量的一部分，从而赋予它所需的含义。如果`18px`只是现在对您来说合适的尺寸，那就没问题了`18px`。但是，如果`18px`它是一组大小比例的一部分，或者有特定目的，请将其命名为：`$large: 18px;`或`$gutter-width: 18px;`.

# arrays - 如何摆脱 Matlab 单元格中的双引号？

> ID：13282113
> 
> 赞同：4
> 
> 时间：2012-11-08T03:48:51.513
> 
> 标签：arrays, matlab, cell

我在 Matlab 中有一个单元格数组，单元格中的所有元素都表示为：

```
'"something"' 
```

如何创建一个数组

```
'something' 
```

?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T04:35:31.170

这里有两个解决方案。`strrep`删除双引号的所有实例，而`regexprep`仅删除字符串开头和结尾的双引号（感谢 Gunther Struyf 指出`regexprep`在某些情况下需要第二种解决方案）：

```
>> A = {'"hello"', '"wor"ld"'}

A = 

'"hello"'    '"wor"ld"'

>> B = strrep(A, '"', '')

B = 

'hello'    'world'

>> C = regexprep(A, '^"|"$', '')

C = 

'hello'    'wor"ld' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-30T22:53:44.323

这不适用于数字

正则表达式（字符串（67），'^“|”$'，''）

答案=

```
"67" 
```

# javascript - 计算一个元素有多少个类？

> ID：13282115
> 
> 赞同：3
> 
> 时间：2012-11-08T03:49:04.183
> 
> 标签：javascript, jquery, html

如果您要通过某个可能由用户附加的 [tag] 系统标记元素，并且您想计算标签的数量（由元素具有的类数定义），您将如何完成此操作？

如果您尝试按标签数量查看所有元素，这可能会有所帮助。（这可能可以通过其他结构来完成，但如果您只以这种方式引用元素标签）

Jquery 有 .hasClass()，有没有类似 .classCount() 的东西

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T03:53:03.057

你可以创建它...

```
$.fn.classCount = function() {
    return $.grep(this.attr("class").split(/\s+/), $.trim).length;
}; 
```

[js小提琴](http://jsfiddle.net/VPCE6/)。

如果你没有 jQuery，你可以使用...

```
var classLength = element.classList.length; 
```

[js小提琴](http://jsfiddle.net/WUT9q/)。

如果您没有 jQuery*并且*必须支持较旧的浏览器，请使用...

```
var classes = element.className.replace(/^\s+|\s+$/g, "").split(/\s+/);
var classLength = classes[0].length ? classes.length : 0; 
```

[js小提琴](http://jsfiddle.net/6NAHf/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T04:07:46.910

如果您使用的是 HTML5，则可以使用[classList 属性](https://developer.mozilla.org/en-US/docs/DOM/element.classList)。例如

```
$("#someElementId").classList.length 
```

将返回 2：

```
<div id="someElementId" class="stinky cheese"></div> 
```

如[http://jsfiddle.net/thegreatmichael/rpdEr/](http://jsfiddle.net/thegreatmichael/rpdEr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T03:53:59.937

```
$(element).attr('class').split(/\s+/).length 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/sWWAH/1)**

# mysql - 插入表选择 max(column_name)+1

> ID：13282116
> 
> 赞同：5
> 
> 时间：2012-11-08T03:49:13.563
> 
> 标签：mysql, sql

我有这个 mysql 表是这样构建的：

```
CREATE TABLE `posts` (
    `post_id` INT(10) NOT NULL AUTO_INCREMENT,
    `post_user_id` INT(10) NOT NULL DEFAULT '0',
    `gen_id` INT(10) NOT NULL DEFAULT '0',
    PRIMARY KEY (`post_user_id`, `post_id`)
)
COLLATE='utf8_general_ci'
ENGINE=MyISAM; 
```

当我做：

```
insert into posts (post_user_id) values (1);
insert into posts (post_user_id) values (1);
insert into posts (post_user_id) values (2);
insert into posts (post_user_id) values (1);
select * from posts; 
```

我得到：

```
post_id | post_user_id | gen_id
1                  1     0
2                  1     0
1                  2     0
3                  1     0 
```

为每个唯一用户生成唯一的 post_id。

我需要 gen_id 列是 1 2 3 4 5 6 等。我如何在插入时增加此列。我尝试了下面的一个，但它不起作用。这样做的正确方法是什么？

```
insert into posts (post_user_id,gen_id) values (1,select max(gen_id)+1 from posts);
//Select the highest gen_id and add 1 to it. 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-08T04:02:56.807

尝试这个：

```
 INSERT INTO posts (post_user_id,gen_id) 
  SELECT 1, MAX(gen_id)+1 FROM posts; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T03:56:17.393

`TRIGGER`在你的桌子上使用 a 。此示例代码可以帮助您入门：

```
DELIMITER //
CREATE TRIGGER ai_trigger_name AFTER INSERT ON posts
FOR EACH ROW
BEGIN

    UPDATE posts 
       SET gen_id = (SELECT MAX(gen_id) FROM posts) + 1
     WHERE post_id = LAST_INSERT_ID()
     LIMIT 1;

END;//
DELIMITER  ; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-17T14:25:31.623

对于我来说，第一个要增加的数字是空的。我解决

```
IFNULL(MAX(number), 0) + 1 
```

或者更好的查询变成

```
SELECT IFNULL(MAX(number), 0) + 1 FROM mytable; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-06T05:20:58.663

这是表格“汽车”及其包含的数据：

```
AutoID | Year | Make | Model | Color |Seq
1      | 2012 | Jeep |Liberty| Black | 1 
2      | 2013 | BMW  | 330XI | Blue  | 2 
```

该`AutoID`列是自动递增列，因此不必将其包含在插入语句中。

`Seq`除了作为整数列/字段的列之外，其余列都是 varchars 。

如果您想这样做，以便在将下一行插入表中并且`Seq`列自动递增到 # 3 时，您需要按如下方式编写查询：

```
INSERT INTO Autos
(
  Seq,
  Year,  
  Make, 
  Model,
  Color,

)
Values
(
  (SELECT MAX(Seq) FROM Autos) + 1, --this increments the Seq column
  2013,'Mercedes','S550','Black'); 
```

我把`Seq`专栏放在第一位的原因是为了确保它能够正常工作……不管你把它放在哪里，但安全总比抱歉好。

该`Seq`列现在应该具有 的值`3`以及数据库中该行其余部分的添加值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-06T05:52:23.010

我打算显示的方式没有发生......所以我将从头开始：首先我创建了一个表格。

```
create table Cars (  
AutoID int identity (1,1) Primary Key,
Year int,
Make varchar (25),
Model varchar (25),
TrimLevel varchar (30),
Color varchar (30),
CreatedDate date,
Seq int
) 
```

其次，我插入了一些虚拟值

```
insert into Cars values (

2013,'Ford' ,'Explorer','XLT','Brown',GETDATE(),1),
(2011,'Hyundai' ,'Sante Fe','SE','White',GETDATE(),2),
(2009,'Jeep' ,'Liberty','Jet','Blue',GETDATE(),3),
(2005,'BMW' ,'325','','Green',GETDATE(),4),
(2008,'Chevy' ,'HHR','SS','Red',GETDATE(),5); 
```

插入完成后，您应该有 5 行数据。由于 Seq 列不是自动递增列，并且您希望确保下一个 Seq 的数据行自动递增到 #6 并且其后续行也递增，因此您需要编写以下代码：

```
INSERT INTO Cars
(
  Seq,
  Year,
  color,
  Make,
  Model,
  TrimLevel,
  CreatedDate
)
Values
(
  (SELECT MAX(Seq) FROM Cars) + 1,
  2013,'Black','Mercedes','A550','AMG',GETDATE()); 
```

我已经使用不同的数据多次运行此插入语句，以确保它正常工作....希望这会有所帮助！

# jquery - 以特定顺序序列化

> ID：13282117
> 
> 赞同：1
> 
> 时间：2012-11-08T03:49:20.563
> 
> 标签：jquery, serialization

我正在尝试从具有特定顺序的表单中序列化复选框值。变量必须遵循字母顺序。只要尊重变量顺序，值顺序就无关紧要。

[这是小提琴](http://jsfiddle.net/7hyU2/)

这是html表单：

```
<form>
    <input type="checkbox" value="value1"/>
    <input type="checkbox" value="value2"/>
    <input type="checkbox" value="value3"/>
    <input type="checkbox" value="value4"/>
    <input type="checkbox" value="value5"/>
    <input type="checkbox" value="value6"/>
    <input type="checkbox" value="value7"/>
    <input type="checkbox" value="value8"/>
    <input type="checkbox" value="value9"/>
    <input type="checkbox" value="value10"/>
</form>
<p id="results"></p>​ 
```

这是jQuery脚本：

```
$(document).ready(function(){
    $("input:checkbox").change(function(){
      var checked = $("input:checked").size();
      var name_a = $("input:checked[name=a]").size();
      var name_b = $("input:checked[name=b]").size();
      var name_c = $("input:checked[name=c]").size();
      var name_d = $("input:checked[name=d]").size();
      var name_e = $("input:checked[name=e]").size();

      if(name_a<1){
        $(this).attr("name","a");
      }else if(name_b<1){
        $(this).attr("name","b");
      }else if(name_c<1){
        $(this).attr("name","c");
      }else if(name_d<1){
        $(this).attr("name","d");
      }else if(name_e<1){
        $(this).attr("name","e");
      };

      if (checked>5) {
        $(this).attr("checked", false);
      } 
    });

    function showValues() {
      str = $("form").serialize();
      $("#results").text(str);
    }
    $(":checkbox").click(showValues);
    $("select").change(showValues);
    showValues();
});​ 
```

我的期望：

```
a=valueX    or...
a=valueX&b=valueX  or...
a=valueX&b=valueX&c=valueX  or...
a=valueX&b=valueX&c=valueX&d=valueX  or...
a=valueX&b=valueX&c=valueX&d=valueX&e=valueX 
```

我不想要的：

```
b=valueX  or...
b=valueX&a=valueX  or...
a=valueX&c=valueX  or...
b=valueX&a=valueX&c=valueX&d=valueX&e=valueX 
```

我希望你能明白我在找什么。任何帮助将不胜感激！

*注意：尝试随机检查和取消检查输入以确保代码按预期工作。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T22:15:53.713

如果我很好地理解了这个问题，请告诉我：

```
$(document).ready(function(){
    $("input:checkbox").change(function(){
        var $checked = $(":checked");
        if( $checked.length > 5 ) {
            $(this).removeAttr("checked");
            return;
        }
        $checked.siblings()
            .andSelf().removeAttr("name");
        $checked.each( function(i, o) {
            $(this).attr("name", String.fromCharCode(97+i));
        });
        showValues();
    });

    function showValues() {
      str = $("form").serialize();
      $("#results").text(str);
    }
    /*$(":checkbox").click(showValues);
    $("select").change(showValues);*/
    showValues();
});​ 
```

[jsfiddle](http://jsfiddle.net/V4fNN/2/)

# javascript - 地图从澳大利亚开始的 OpenLayers

> ID：13282119
> 
> 赞同：0
> 
> 时间：2012-11-08T03:49:23.430
> 
> 标签：javascript, openlayers

我对 OpenLayers 很陌生，我正试图在我的主页上显示一张地图，它只显示澳大利亚，然后在地图上添加一些点。现在最重要的是打开地图到澳大利亚。

我正在使用 OpenLayers 主页上的示例，其中：

```
var map = new OpenLayers.Map('map');
var wms = new OpenLayers.Layer.WMS( "OpenLayers WMS",
        "http://vmap0.tiles.osgeo.org/wms/vmap0", {layers: 'basic'} );
.... 
```

我猜我必须向构造函数传递一些东西才能让它只显示一个特定的区域？

谢谢，

山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T03:58:33.350

在另一个stackoverflow问题上找到了这个：

```
var bounds = new OpenLayers.Bounds(-125, 25, -65, 50);
var map = new OpenLayers.Map('map', {restrictedExtent: bounds  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-08T03:14:36.807

Open Layers 使用投影来适应 3D 世界的 2D 地图。投影是一种数学方式，表示在 3D 球体（世界）上，坐标 x,y 实际上是 2D 地图上其他位置的 x,y。在 openlayers 这涉及更改视图，您可以使用 fromLonLat() 方法。此处有关投影的更多信息：[https ://openlayers.org/en/latest/doc/faq.html](https://openlayers.org/en/latest/doc/faq.html)

```
mapOfAustralia = new ol.Map({
  layers: [
    new ol.layer.Tile({
    source: new ol.source.OSM()
  })
  ],
  target: targetElement,
  controls: ol.control.defaults({
  attributionOptions: {
  collapsible: false
  }
  }),
    view: new ol.View({
    center: ol.proj.fromLonLat([133.7751, -23.2744]),
    zoom: 4
  })
});
```

# vb.net - VB.net 将 url 插入到 firefox url 栏中

> ID：13282127
> 
> 赞同：2
> 
> 时间：2012-11-08T03:50:13.537
> 
> 标签：vb.net, winforms, firefox, pinvoke

我试图将 url 插入到 firefox url 栏中。

我的代码：

进口：

```
Imports NDde.Client 
```

代码：

```
Dim dde As DdeClient = New DdeClient("Firefox", "WWW_GetWindowInfo")
dde.Connect()
Dim url As String = dde.Request("URL", Integer.MaxValue)
dde.Disconnect() 
```

此代码**返回**（获取）网址。

我怎样才能**插入**网址？

（我尝试使用 dde.Handle 和 findwindowex，但我不知道 url 栏的类名是什么（是的，我尝试了 spy++））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:11:35.690

尝试这个。

```
'///Download NDDE library from here "http://ndde.codeplex.com/"
'///Then add refrence NDde.dll in your project.

Imports NDde.Client 'import NDde Client

Button1 Click:

Dim dde As New DdeClient("Firefox", "WWW_OpenURL") 'you can also use "Opera" instead of "Firefox"
dde.Connect()
Dim url As String = dde.Request("http://www.google.com", Integer.MaxValue) 'you can replace google.com with your desired URL.
dde.Disconnect() 
```

它将在 firefox 或 opera 浏览器的 URL 栏中设置 URL 并导航它。希望这对你有帮助。

# java-me - 在旧手机上部署 j2me 应用程序

> ID：13282131
> 
> 赞同：1
> 
> 时间：2012-11-08T03:50:27.883
> 
> 标签：java-me, lwuit, midp, j2mepolish, wma

我打算为 microworks 开发一个简单的 j2me 应用程序。该应用程序是发送短信。

但是我发现他们携带的大部分手机都非常简单，甚至有些没有蓝牙、红外线、浏览器。如何让它发挥作用？

我们可以假设配置为 nokia 2100，nokia 1616。我应该如何在这些手机上部署我的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:23:43.147

OTA 需要在每个 MIDP 移动设备上运行，只需使用设备浏览器导航到 jad URL 并单击它。

# android - 安卓通知

> ID：13282132
> 
> 赞同：1
> 
> 时间：2012-11-08T03:50:32.487
> 
> 标签：android, service, notifications

我有一个应用程序需要在一天内显示某些事件的通知，具体取决于事件。

我知道该怎么做，如果我需要一项服务在后台保持运行，或者它将在后台运行，在某些日子获得这些事件。

```
private void Notificar(String descricaoEvento){
    NotificationManager notifier = (NotificationManager)this.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(R.drawable.ic_launcher, "Novo evento no The Point Club", System.currentTimeMillis()); 
    notification.flags |= Notification.DEFAULT_SOUND;

    PendingIntent pIntent = PendingIntent.getActivity(this, 0, null, 0); 
    notification.setLatestEventInfo(this, "Title", descricaoEvento.toString(), pIntent);        
    notifier.notify(0x007, notification);       
} 
```

用这个方法来调用当合适的日期！

* * *

感谢您的收听，我将尝试解释我做对的事情：我正在申请一个俱乐部派对，当我打开应用程序时，应用程序会显示下一个庆祝活动，但我希望是在android通知栏中创建一个通知，其中有一个聚会，作为提醒。

当我打开活动以列出事件时，我使用此代码：

```
 Calendar c = Calendar.getInstance();
    c.setTimeInMillis(System.currentTimeMillis());
    int anoAtual= c.get(Calendar.YEAR);
    long time = c.getTimeInMillis();
    Intent it = new Intent("EXECUTAR_ALARME") 
    p = PendingIntent.getBroadcast(Eventos.this, 0, it, 0);
    AlarmManager alarme = (AlarmManager) getSystemService(ALARM_SERVICE);
    alarme.set(AlarmManager.RTC_WAKEUP, time, p); 
```

线

```
 Intent it = new Intent("EXECUTAR_ALARME") 
```

将调用类：

```
 public class Alarm extends BroadcastReceiver{   @Override
       public void onReceive(Context contexto, Intent intent) {
           NotificationManager notifier =(NotificationManager) contexto.getSystemService(Context.NOTIFICATION_SERVICE);
           Notification notification = new Notification(R.drawable.ic_launcher, "New event in Club", System.currentTimeMillis()); 
           notification.flags |= Notification.DEFAULT_SOUND;
           //Intent i = new Intent(this, Eventos.class);
           PendingIntent pIntent = PendingIntent.getActivity(contexto, 0, null, 0); 
           notification.setLatestEventInfo(contexto, "Club", "Teste", pIntent);     
           notifier.notify(0x007, notification);  

       }

} 
```

现在我想知道两件事： 1 - 我如何让它在后台运行而不用应用程序打开。2 这段代码只创建了一个警报，我需要创建多个。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:22:07.883

使用 AlarmManager 在您的特定时间运行 PendingIntent。那时，如果您计划创建一个向用户显示的通知，它存储在 PendingIntent 中的意图应该是一项服务。如果您可以将其形成一个问题，我可能会提供更多帮助，但目前尚不清楚您要完成什么，以及您设法完成了什么。

* * *

## 额外细节

在您的代码中，您似乎正在为现在安排警报，而不是在将来的某个时间。我建议以下方法来创建警报：

```
 Calendar c = Calendar.getInstance();
    // don't do this:
    // c.setTimeInMillis(System.currentTimeMillis()); // This just sets the alarm time to "now"

    // set the calendar to 8:00 pm:
    c.set(Calendar.HOUR_OF_DAY, 20);
    c.set(Calendar.MINUTE, 0);

    long alarmTime = c.getTimeInMillis();
    Intent it = new Intent(ServiceClass.getClass());
    // Even though the docs say that the request code doesn't matter making it unique tells the alarmManager that it's a different PendingIntent
    PendingIntent pendingIntent = PendingIntent.getService(this, 0, it, 0);

    AlarmManager alarmMgr = (AlarmManager) getSystemService(ALARM_SERVICE);
    alarmMgr.set(AlarmManager.RTC_WAKEUP, alarmTime, pendingIntent); // set the first alarm for 8:00

    c.set(Calendar.MINUTE, 30);
    Intent it2 = new Intnt(ServiceClass.getClass());
    PendingIntent pi2 = PendingIntent.getService(this, 0, it2, 0);
    alarmMgr.set(AlarmManager.RTC_WAKEUP, alarmTime, pi2); // set the second alarm for 8:30 
```

线

```
Intent it = new Intent(ServiceClass.getClass()); 
```

将启动类 ServiceClass：

```
class ServiceClass extends Service {

    @Override
    public IBinder onBind(Intent intent) {
        // TODO TRAVIS Auto-generated method stub
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) { // onStartCommand is run when the service is started by the AlarmManager
        // build and set the notification here
        NotificationManager notifMgr = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        // build notification
        Notification notification = new Notification.Builder(getApplicationContext())
                .setContentTitle("New mail from " + sender.toString())
                .setContentText(subject)
                .setSmallIcon(R.drawable.new_mail)
                .setLargeIcon(aBitmap)
                .build();

        int ID = 0;

        notifMgr.notify(ID++, notification);   // use a unique id every time if you want multiple notifications (sounds like what you want, but not a best practice)

        notification = new Notification.Builder(getApplicationContext())
                .setContentTitle("New event from " + sender.toString())
                .setContentText(subject)
                .setSmallIcon(R.drawable.new_mail)
                .setLargeIcon(aBitmap)
                .build();

        notifMgr.notify(ID++, notification);  // add the second notification to the notification bar            
        return super.onStartCommand(intent, flags, startId);
    }
} 
```

回答您的问题：

1 - 通过在未来的某个时间设置警报，您要求操作系统在指定的时间启动您的 PendingIntent（在您的情况下，发送广播；在我上面的示例中，服务）（这就是您需要设置的原因日历的时间到未来的某个时间！）

2 - 创建多个警报是通过在适当的时间安排不同的 PendingIntent 调用警报管理器（当您希望它们触发时）。Notification 也是如此，创建多个（具有唯一 ID）。

# php - PHP Codeigniter 无法正常工作

> ID：13282141
> 
> 赞同：1
> 
> 时间：2012-11-08T03:51:44.547
> 
> 标签：php, codeigniter, session, login, logout

我正在使用 php codeigniter 创建一个网站。当我登录时，它会创建一个会话并重定向到主页。当我注销时，它会破坏会话。当我写主页的网址时，它工作正常。但是如果我点击浏览器上的“返回一页按钮”，它会返回主页。即使主页应该检查我是否登录。我的代码如下。我希望我能清楚地解释我的困境。如果没有，请询​​问。提前致谢。

```
public function signin()
{
    $this->form_validation->set_rules('email2', 'E-mail', 'required|valid_email');
    $this->form_validation->set_rules('password2', 'Password', 'required|min_length[5]');
    $query = "select password from user where email = '{$this->input->post('email2')}';";

    if($this->form_validation->run())
    {
        if($this->doj_database->check_signin($query, $this->input->post('password2')))
        {
            $query = "select * from user where email = '{$this->input->post('email2')}';";
            $data['user'] = $this->doj_database->search_with_email($query);
            $newdata = array('logged_in' => TRUE);
            $this->session->set_userdata($newdata);
            $url = "/DIRTY_ONLINE_JUDGE/goto_home/{$data['user']['user_id']}";
            redirect($url);
        }
        else
        {
            $this->load->view('wrong_login');
        }
    }
    else
    {
        $this->load->view('wrong_login');
    }
}

public function goto_home($id)
{
    if($this->session->userdata('logged_in'))
    {
        $data['user'] = $this->doj_database->search_with_id($id);
        $data['user']['password'] = $this->encrypt->decode($data['user']['password']);
        $this->load->view('home', $data);
    }
    else
    {
        $this->load->view('not_logged_in');
    }
}

public function logout()
{
    $this->session->sess_destroy();
    $this->load->view('index');
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T04:51:52.727

添加

```
 header('Cache-Control: no-cache, no-store, must-revalidate'); // HTTP 1.1.
    header('Pragma: no-cache'); // HTTP 1.0.
    header('Expires: 0'); 
```

这在

```
public function goto_home($id)
{

    header('Cache-Control: no-cache, no-store, must-revalidate'); // HTTP 1.1.
    header('Pragma: no-cache'); // HTTP 1.0.
    header('Expires: 0'); 
```

或者

```
 $this->output->set_header('Last-Modified:'.gmdate('D, d M Y H:i:s').'GMT');
        $this->output->set_header('Cache-Control: no-store, no-cache, must-revalidate');
        $this->output->set_header('Cache-Control: post-check=0, pre-check=0',false);
        $this->output->set_header('Pragma: no-cache');

    if($this->session->userdata('logged_in'))
    {
     $data['user'] = $this->doj_database->search_with_id($id);
     $data['user']['password'] = $this->encrypt->decode($data['user']['password']);
     $this->load->view('home', $data);
    }
    else
    {
      $this->load->view('not_logged_in');
    }
} 
```

这样页面缓存就会被移除

# python - 从命令行绕过 mongo shell 将节点添加到代表集

> ID：13282143
> 
> 赞同：0
> 
> 时间：2012-11-08T03:51:51.227
> 
> 标签：python, mongodb

我正在自动将节点添加到 mongo 复制集。

```
$ mongo IP.Of.Server.One
> rs.initiate();
> rs.add("IP.Of.Server.Two");
> rs.add("IP.Of.Server.Three");
> rs.status(); 
```

我有一个 python 脚本，当启动一个新节点时，我将通过使用 paramiko ssh 到现有节点，将该 IP 地址添加到集合中已经存在的节点。

如何从命令行自动化而不必进入 mongo shell。我可以使用 pexpect，但更喜欢使用贝斯和贝壳的单衬里。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T05:25:40.747

您可以使用`--eval`命令行选项将`rs.add()`JavaScript 命令传递给副本集上的主节点。如果您将`rs.add()`调用包装在其中，`printjson()`您还将得到一个结果回显到您的 Python 脚本可以解析的标准输出。

因此，假设您的主要成员`node1.replset`可以添加一个新节点`node4.replset`：

```
mongo --eval "printjson(rs.add('node4.replset:27017'))" node1.replset:27017 
```

# c# - c#替换文本字段中文本的时间戳值字符串

> ID：13282144
> 
> 赞同：0
> 
> 时间：2012-11-08T03:51:52.843
> 
> 标签：c#, .net, winforms, visual-studio-2012

我目前有一个文本框字段，每次进行更改时，我都会添加更新者和时间

现在它继续附加该文本

我怎样才能找到写着“LastEdited：”的行，并且只替换时间戳值？

这就是我现在所做的也许有人可以向我发布如何获取时间戳并替换它的代码示例？

```
if (txtMemberNotesOriginally != txtMemberNotesChanged) {
            txtMemberNotes.AppendText("LastEdited: " + DateTime.Now.ToString() + " By: " + MyProgramName.Username + Environment.NewLine); 
```

我不是专家，所以代码示例会非常有用

我确实使用这个文本框来保存其他笔记（我不想松动）

我可以这样做吗

```
foreach (var line in txtMemberNotes.Lines) {
                if (line.StartsWith("Last Edited: "))
                {
                    txtMemberNotes.Text = txtMemberNotes.Text.Replace(line, "Last Edited: " + DateTime.Now.ToString() + " By: " + MyProgramName.Username + Environment.NewLine);
                }
                else 
                {
                    txtMemberNotes.AppendText("Last Edited: " + DateTime.Now.ToString() + " By: " + MyProgramName.Username + Environment.NewLine);
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:00:56.413

解决问题的最简单方法似乎是停止附加文本并设置文本值。不需要解析，只需用新值覆盖现有值。

```
if (txtMemberNotesOriginally != txtMemberNotesChanged) {
            txtMemberNotes.Text = "LastEdited: " + DateTime.Now.ToString() + " By: " + MyProgramName.Username + Environment.NewLine; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:02:23.117

如果你真的想要，我想总是有 Regex：

```
string s = @"Some notes here etc etc..

              Last edited: 12/12/2012 12:00:00 AM";

Console.Write(Regex.Replace(s, @"Last edited: .*$", "Lasted edited: " + DateTime.Now.ToString())); 
```

或者更具体地说，使用您的代码：

```
txtMemberNotes.Text = Regex.Replace(txtMemberNotes.Text, @"Last edited: .*$", "Lasted edited: " + DateTime.Now.ToString()); 
```

# xss - h:outputFormat 与 escape=false 一起使用时如何防止 XSS 攻击？

> ID：13282146
> 
> 赞同：0
> 
> 时间：2012-11-08T03:52:01.100
> 
> 标签：xss, jsf-1.2

我正在使用 JSF 1.2。我想向用户显示一条消息，内容如下

“请[点击这里](http://google.com/)使用您的新密码登录。”

我的 xhtml 页面中的代码，

`<h:outputFormat value="#{msg.resetBackToLogin}" escape="false"></h:outputFormat>`

下面是我的属性文件中的代码。

请`<a href="http://myDomain/">`点击这里`</a>`使用您的新密码登录。

因为它包含特殊字符，所以我使用`h:outputFormat`with `escape=false`。我觉得，使用`h:commandLink`和调用 bean 方法并在那里重定向只会增加开销。

在使用`h:outputFormat`with 时`escape=false`，这将导致 XSS 攻击。如果坚持，我该如何防止这种情况`h:outputFormat`？

# python - IDLE 中输入重定向的语法

> ID：13282154
> 
> 赞同：2
> 
> 时间：2012-11-08T03:53:32.450
> 
> 标签：python, python-idle

我需要输入文本 (.txt) 文件的内容作为 Python (.py) 文件的输入。假设文本文件名是TextFile，Python文件名是PythonFile，那么代码应该如下：

```
python PythonFile.py < TextFile.txt 
```

然而，当我尝试在 IDLE 中执行此操作并输入

```
import PythonFile < TextFile, 
```

IDLE 给我一个无效的语法消息，指向`<`符号。我尝试了这个主题的各种变体（即使用或不使用文件扩展名），但仍然得到相同的无效语法消息。IDLE 中输入重定向的语法有何不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:28:09.960

如果它在命令行中有效，那么为什么要在 IDLE 中执行此操作？有一些方法可以使用，例如，实现类似的结果`subprocess`，但更好的方法是重构`PythonFile.py`，以便您可以从中调用函数，例如：

```
>>> import PythonFile
>>> PythonFile.run_with_input('TextFile.txt') 
```

如果您发布 的内容`PythonFile.py`，我们也许可以帮助您做到这一点。

# sql-server - CTE 的无效语法

> ID：13282155
> 
> 赞同：0
> 
> 时间：2012-11-08T03:53:35.433
> 
> 标签：sql-server, tsql

世界上可能有什么问题，语法看起来不错：

```
With photos(PhotoID, MemberID) as
(
    select  photoID,
            memberID
    from MemberPhotos
)
select PhotoID, MemberID from photos 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T03:57:00.480

如果`CTE`来自另一个查询，您应该在关键字`semi-colon`之前添加一个。`WITH`

```
;With photos(PhotoID, MemberID) as
(
    select  photoID,
            memberID
    from MemberPhotos
)
select PhotoID, MemberID from photos 
```

# photo - flickr photobar - 获取描述

> ID：13282156
> 
> 赞同：0
> 
> 时间：2012-11-08T03:53:48.490
> 
> 标签：photo, flickr

我实现了这个 jquery [http://tympanus.net/Tutorials/FlickrPhotobarGallery/](http://tympanus.net/Tutorials/FlickrPhotobarGallery/)并且我可以捕获 setname 和 title 但我也需要获取描述，所以我想知道这是否可能。

希望有人可以帮助我，在此先感谢！

```
$(function() {
    var api_key             = '######';
    var user_id             = '####';

    /*
    use:
    Square,Thumbnail,Small,Medium or Original for the large image size you want to load!
    */
    var large_image_size    = 'Medium';
    /*
    the current Set id / the current Photo id
    */
    var photo_set_id,photo_id;
    var current = -1;
    var continueNavigation = false;
    /*
    flickr API Call to get List of Sets
    */
    var sets_service        = 'http://api.flickr.com/services/rest/?&method=flickr.photosets.getList' + '&api_key=' + api_key;
    var sets_url            = sets_service + '&user_id=' + user_id + '&format=json&jsoncallback=?';
    /*
    flickr API Call to get List of Photos from a Set
    */
    var photos_service      = 'http://api.flickr.com/services/rest/?&method=flickr.photosets.getPhotos' + '&api_key=' + api_key;
    /*
    flickr API Call to get List of Sizes of a Photo
    */
    var large_photo_service = 'http://api.flickr.com/services/rest/?&method=flickr.photos.getSizes' + '&api_key=' + api_key;
    /* 
    elements caching... 
    */
    var $setsContainer      = $('#sets').find('ul');
    var $photosContainer    = $('#images').find('ul');
    var $photopreview       = $('#flickr_photopreview');
    var $flickrOverlay      = $('#flickr_overlay');
    var $loadingStatus      = $('#flickr_toggle').find('.loading_small');

    var ul_width,spacefit,fit;
    add: LoadSets();
    /* start: open Flickr Photostream */
    $('#flickr_toggle').toggle(function(){
        $('#photobar').stop().animate({'bottom':'0px'},200,function(){
            if($setsContainer.is(':empty')){
                /*
                if sets not loaded, load them
                */
                LoadSets();
            }
        });
    },function(){
        /*
        minimize the main bar, and minimize the photos bar.
        next time we maximize, the view will be on the sets
        */
        $('#photobar').stop().animate({'bottom':'-96px'},200,function(){
            $('#images').css('bottom','-125px');
        });
    });

    /*
    Loads the User Photo Sets
    */
    function LoadSets(){
        $loadingStatus.css('visibility','visible');

        $.getJSON(sets_url,function(data){
            if(data.stat != 'fail') {
                var sets_count = data.photosets.photoset.length;
                /*
                adapt ul width based on number of results
                */
                ul_width = sets_count * 105 + 105;
                $setsContainer.css('width',ul_width + 'px');

                for(var i = 0; i < sets_count; ++i){
                    var photoset        = data.photosets.photoset[i];
                    var primary         = photoset.primary;
                    var secret          = photoset.secret;
                    var server          = photoset.server;
                    var farm            = photoset.farm;
                    /*
                    source for the small thumbnail
                    */
                    var photoUrl        = 'http://farm'+farm+'.static.flickr.com/'+server+'/'+primary+'_'+secret+'_s.jpg';
                    var $elem           = $('<li />');
                    var $link           = $('<a class="toLoad" href="#" />');
                    /*
                    save the info of the set in the li element,
                    we will use it later    
                    */
                    $link.data({
                        'primary'   :primary,
                        'secret'    :secret,
                        'server'    :server,
                        'farm'      :farm,
                        'photoUrl'  :photoUrl,
                        'setName'   :photoset.title._content,
                        'id'        :photoset.id
                    });

                    $setsContainer.append($elem.append($link));
                    $link.bind('click',function(e){
                        var $this = $(this);
                        /*
                        save the current Set id in the photo_set_id variable
                        and load the photos of that Set
                        */
                        $('#images').stop().animate({'bottom':'0px'},200);
                        if(photo_set_id!=$this.data('id')){
                            photo_set_id = $this.data('id');
                            $('#setName').html($this.data('setName'));
                            LoadPhotos();
                        }
                        e.preventDefault();
                    });
                }
                /*
                now we load the images 
                (the ones in the viewport)
                */
                LoadSetsImages();
            }
        }); 
    }

    /*
    loads the images of the sets that are in the viewport
    */
    function LoadSetsImages(){
        var toLoad          = $('.toLoad:in-viewport').size();
        if(toLoad > 0)
            $loadingStatus.css('visibility','visible');
        var images_loaded   = 0;
        $('.toLoad:in-viewport').each(function(i){
            var $space          = $setsContainer.find('.toLoad:first');
            var $img            = $('<img style="display:none;" />').load(function(){
                ++images_loaded;
                if(images_loaded == toLoad){
                    $loadingStatus.css('visibility','hidden');
                    $setsContainer.find('img').fadeIn();
                }   
            }).error(function(){
                //TODO
                ++images_loaded;
                if(images_loaded == toLoad){
                    $loadingStatus.css('visibility','hidden');
                    $setsContainer.find('img').fadeIn();
                }   
            }).attr('src',$space.data('photoUrl')).attr('alt',$space.data('id'));
            var $set_name       = $('<span />',{'html':$space.data('setName')});
            $space.append($set_name).append($img).removeClass('toLoad');
        });
    }

    /*
    Loads the Set's Photos
    */
    function LoadPhotos(){
        $photosContainer.empty();
        $loadingStatus.css('visibility','visible');
        var photos_url  = photos_service + '&photoset_id=' + photo_set_id + '&media=photos&format=json&jsoncallback=?';

        $.getJSON(photos_url,function(data){
            if(data.stat != 'fail') {
                var photo_count = data.photoset.photo.length;
                /*
                adapt ul width based on number of results
                */
                var photo_count_total = photo_count + $photosContainer.children('li').length;
                ul_width = photo_count_total * 105 + 105;
                $photosContainer.css('width',ul_width + 'px');

                for(var i = 0; i < photo_count; ++i){   
                    var photo           = data.photoset.photo[i];
                    var photoid         = photo.id;

                    var secret          = photo.secret;
                    var server          = photo.server;
                    var farm            = photo.farm;

                    var photoUrl        = 'http://farm'+farm+'.static.flickr.com/'+server+'/'+photoid+'_'+secret+'_s.jpg';

                    var $elem           = $('<li />');
                    var $link           = $('<a class="toLoad" href="#" />');

                    $link.data({
                        'photoid'       :photoid,
                        'secret'        :secret,
                        'server'        :server,
                        'farm'          :farm,
                        'photoUrl'      :photoUrl,
                        'photo_title'   :photo.title
                    });
                    $photosContainer.append($elem.append($link));

                    $link.bind('click',function(e){
                        var $this   = $(this);
                        current     = $this.parent().index();
                        photo_id    = $this.data('photoid');
                        LoadLargePhoto();
                        e.preventDefault();
                    });
                }
                LoadPhotosImages();
            }

        });
    }

    /*
    loads the images of the set's 
    photos that are in the viewport
    */
    function LoadPhotosImages(){
        var toLoad          = $('.toLoad:in-viewport').size();
        if(toLoad > 0)
            $loadingStatus.css('visibility','visible');
        var images_loaded   = 0;

        $('.toLoad:in-viewport').each(function(i){
            var $space          = $photosContainer.find('.toLoad:first');
            var $img            = $('<img style="display:none;" />').load(function(){
                ++images_loaded;
                if(images_loaded == toLoad){
                    $loadingStatus.css('visibility','hidden');
                    $photosContainer.find('img').fadeIn();
                    /*
                    if we were navigating through the large images set:
                    */
                    if(continueNavigation){
                        continueNavigation  = false;
                        var $thumb          = $photosContainer.find('li:nth-child(' + parseInt(current + 1) + ')').find('img');
                        photo_id            = $thumb.attr('alt');
                        LoadLargePhoto();
                    }
                }   
            }).error(function(){
                //TODO
                ++images_loaded;
                if(images_loaded == toLoad){
                    $loadingStatus.css('visibility','hidden');
                    $photosContainer.find('img').fadeIn();
                    /*
                    if we were navigating through the large images set:
                    */
                    if(continueNavigation){
                        continueNavigation  = false;
                        var $thumb          = $photosContainer.find('li:nth-child(' + parseInt(current + 1) + ')').find('img');
                        photo_id            = $thumb.attr('alt');
                        LoadLargePhoto();
                    }
                }               
            }).attr('src',$space.data('photoUrl'))
              .attr('alt',$space.data('photoid'));

            var $photo_title    = $('<span/>',{'html':$space.data('photo_title')});
            $space.append($photo_title).append($img).removeClass('toLoad');
        });
    }

    /*
    loads the main image
    */
    function LoadLargePhoto(){
        removeLargeImage();

        var $theThumb   = $photosContainer.find('li:nth-child(' + parseInt(current + 1) + ')').find('img');
        var photo_title = $theThumb.parent().data('photo_title');

        var $loading    = $photopreview.find('.loading');
        $loading.show();
        $photopreview.show();
        $flickrOverlay.show();
        $('#preview_close').show();

        var large_photo_url = large_photo_service + '&photo_id=' + photo_id + '&format=json&jsoncallback=?';
        $.getJSON(large_photo_url,function(data){
            if(data.stat != 'fail') {
                var count_sizes         = data.sizes.size.length;
                var largest_photo_src;
                for(var i = 0; i < count_sizes; ++i){
                    if(data.sizes.size[i].label == large_image_size)
                        largest_photo_src   = data.sizes.size[i].source;
                }
                $('<img />').load(function(){
                    var $this = $(this);
                    /*
                    resize the image to fit in the browser's window
                    */
                    resize($this);

                    $loading.hide();
                    /*just to make sure theres no image:*/
                    removeLargeImage();
                    $photopreview.find('.preview').append($this);
                    $('#large_phototitle').empty().html(photo_title);                       
                }).attr('src',largest_photo_src);
            }
        });
    }

    /*
    close the Large Image View
    */
    $('#preview_close').bind('click',function(){
        $photopreview.hide();
        $flickrOverlay.hide();
        $('#preview_close').hide();
        $('#large_phototitle').empty()
        removeLargeImage();
    });

    /*
    removes the large image from the DOM
    */
    function removeLargeImage(){
        $photopreview.find('img').remove();
    }

    /*
    events to navigate through the Large Images
    */
    $('#preview_img_next').bind('click',function(e){
        /*
        get the next one
        */
        ++current;

        var $link   = $photosContainer.find('li:nth-child(' + parseInt(current + 1) + ')');
        var $thumb  = $link.find('img');

        /* 
        if the next image is not loaded, 
        we need to scroll the photos container 
        and just then continue with the navigation
        */
        if(!$thumb.length && $link.length){
            continueNavigation = true;
            removeLargeImage();
            $photopreview.find('.loading').show();
            $('#images').find('.next').trigger('click');
        }
        else if(!$thumb.length && !$link.length){
            --current;
            return;
        }   
        else{   
            photo_id    = $thumb.attr('alt');
            LoadLargePhoto();
        }   
        e.preventDefault();
    });
    $('#preview_img_prev').bind('click',function(e){
        /*
        get the previous one
        */
        var $link   = $photosContainer.find('li:nth-child(' + parseInt(current) + ')');
        --current;
        var $thumb  = $link.find('img');

        /* 
        if the previous image is not in the viewport, 
        we need to scroll the photos container 
        and just then continue with the navigation
        */
        if(!$thumb.length && !$link.length){
            ++current;
            return;
        }
        if(!$thumb.is(':in-viewport') && $link.length){
            $('#images').find('.prev').trigger('click');
        }                       
        photo_id    = $thumb.attr('alt');
        LoadLargePhoto();   
        e.preventDefault();
    });

    /*
    events to navigate through the sets / photos containers
    */
    var scrollAllow = true;
    $('#sets,#images').find('.next').bind('click',function(e) {
        var target_id = $(e.target).parent().attr('id');

        var $theContainer;
        if(target_id == 'sets')
            $theContainer = $setsContainer;
        else if(target_id == 'images')
            $theContainer = $photosContainer;

        if(scrollAllow){
            scrollAllow     = false;
            spacefit        = $(window).width() -44;
            fit             = Math.floor(spacefit / 105);
            var left        = parseFloat($theContainer.css('left'),10);
            var moveleft    = left - (fit*105);
            if(ul_width - Math.abs(left) < $(window).width()){ 
                scrollAllow = true;
                e.preventDefault();
                return;
            }
            $theContainer.animate({'left':moveleft+'px'},1000,function(){
                scrollAllow = true;
                if(target_id == 'sets')
                    LoadSetsImages();
                else if(target_id == 'images')
                    LoadPhotosImages();
            });
            e.preventDefault();
        }
    });
    $('#sets,#images').find('.prev').bind('click',function(e) {
        var target_id = $(e.target).parent().attr('id');

        var $theContainer;
        if(target_id == 'sets')
            $theContainer = $setsContainer;
        else if(target_id == 'images')
            $theContainer = $photosContainer;

        if(scrollAllow){
            scrollAllow     = false;
            spacefit        = $(window).width() -44;
            fit             = Math.floor(spacefit / 105);
            var left = parseFloat($theContainer.css('left'),10);
            var moveleft = left + (fit*105);
            if(left >= 0){ 
                scrollAllow = true;
                e.preventDefault();
                return;
            }
            $theContainer.animate({'left':moveleft+'px'},1000,function(){
                scrollAllow = true;
            });
            e.preventDefault();
        }
    });

    /*
    when cliking "Back to Sets"
    minimize photos bar
    */
    $('#images_toggle').bind('click',function(){
        $('#images').stop().animate({'bottom':'-125px'},200);
    }); 

    /*
    when resizing the window, resize the main image
    */
    $(window).bind('resize', function() {
        var $theLargeImage = $photopreview.find('img');
        if($theLargeImage.length)
            resize($theLargeImage);
    }); 

    /*
    resizes the main image based on the windows sizes
    */      
    function resize($image){
        var widthMargin     = 10
        var heightMargin    = 60;
        var windowH      = $(window).height()-heightMargin;
        var windowW      = $(window).width()-widthMargin;
        $photopreview.find('.preview').css({'width':$(window).width()+'px','height':($(window).height()-25)+'px'});
        var theImage     = new Image();
        theImage.src     = $image.attr("src");
        var imgwidth     = theImage.width;
        var imgheight    = theImage.height;

        if((imgwidth > windowW)||(imgheight > windowH)){
            if(imgwidth > imgheight){
                var newwidth    = windowW;
                var ratio       = imgwidth / windowW;
                var newheight   = imgheight / ratio;
                theImage.height = newheight;
                theImage.width  = newwidth;
                if(newheight>windowH){
                    var newnewheight= windowH;
                    var newratio    = newheight/windowH;
                    var newnewwidth = newwidth/newratio;
                    theImage.width  = newnewwidth;
                    theImage.height = newnewheight;
                }
            }
            else{
                var newheight = windowH;
                var ratio = imgheight / windowH;
                var newwidth = imgwidth / ratio;
                theImage.height = newheight;
                theImage.width= newwidth;
                if(newwidth>windowW){
                    var newnewwidth = windowW;
                    var newratio = newwidth/windowW;
                    var newnewheight =newheight/newratio;
                    theImage.height = newnewheight;
                    theImage.width= newnewwidth;
                }
            }
        }
        $image.css({'width':theImage.width+'px','height':theImage.height+'px'});
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:30:18.183

如果你想要一个集合的描述，你可以调用[flickr.photosets.getInfo](http://www.flickr.com/services/api/flickr.photosets.getInfo.html)。

在不相关的注释中，您可以通过传入一个 extras 参数来为集合中的每张照片保存对 flickr.photos.getSizes 的 API 调用，该参数指定您在调用 flickr.photosets.getPhotos 时想要返回的所有 url。对于任何大小的标识符（sq、t、m、l、o 等），只需传入一个额外的 url_(identifier)（因此，如果 url_o 可用，则响应将包含原始 url）。这记录在这里：[http ://www.flickr.com/services/api/flickr.photosets.getPhotos.html](http://www.flickr.com/services/api/flickr.photosets.getPhotos.html)

# html - 我怎样才能减小帖子大小？

> ID：13282164
> 
> 赞同：0
> 
> 时间：2012-11-08T03:55:13.213
> 
> 标签：html, wordpress, themes

我想减小帖子大小。我的意思是，当我在我的网站上发布任何内容时，我想增加 post 的左侧和右侧空间。我该怎么做？（post write wide size 希望减小）我的所有帖子 css 代码如下所示。[我的网站](http://dewdropzone.com)

```
/***** Post Lead Image *****/
#lead-image { position: relative; width: 610px; height: 320px; margin: 0 10px 20px; padding: 5px; background: url(images/backgrounds/bg-postthumb.gif); }
#lead-image img { display: block; }

/***** Post Meta *****/
.published { position: relative; width: 620px; margin: 0 10px 20px; background: url(images/backgrounds/bg-published.gif) repeat-x 0 0; text-align: center; }
.published p { background: #fff url(images/backgrounds/bg-published-decoration.gif) no-repeat center bottom; display: inline-block; color: #222; font: 1.2em 'VollkornItalic', serif; padding: 0 10px 20px; }
.published p a, .published p a:visited { text-decoration: none; }
.published p a:hover, .published p a:active { text-decoration: underline; }

/***** Post YouTube Video Player *****/
#video-player { position: relative; width: 620px; margin: 0 10px 20px; }
.yt-player { width: 615px; height: 370px; }

/***** Post Entry *****/
.post-columns { position: relative; width: 640px; }
.post-460 { position: relative; width: 460px; margin: 0 10px; float: right; }
.post-620, .periodic-password-post { position: relative; width: 620px; margin: 0 10px; }
.post-940 { width: 940px; margin: 0 10px; }
.post-left-column { position: relative; width: 160px; float: left; margin: 0 0 20px; }
.post-entry { position: relative; }
.post-entry h1, .post-entry h2, .post-entry h3, .post-entry h4, .post-entry h5, .post-entry h6 { margin: 0 0 10px; color: #222; line-height: 1.7; }
.post-entry h1 { font-size: 2.1em; }
.post-entry h2 { font-size: 1.9em; }
.post-entry h3 { font-size: 1.7em; }
.post-entry h4 { font-size: 1.5em; }
.post-entry h5 { font-size: 1.3em; }
.post-entry h6 { font-size: 1.2em; }
.post-entry p { font-size: 1.3em; line-height: 1.7em; margin: 0 0 30px; }
.post-entry blockquote { margin: 0 40px; border-left: 3px solid #464646; padding: 0 0 0 20px; font: 120% 'VollkornItalic', serif; color: #222; }
.post-entry blockquote p { line-height: 1.5em; }
.post-entry ul, .post-entry ol { margin: 0 40px 30px; font-size: 1.3em; line-height: 1.7em; }
.post-entry ul { list-style: disc; }
.post-entry ul ul { margin: 0 0 0 30px; font-size: inherit; list-style: circle; }
.post-entry ul ol { margin: 0 0 0 30px; font-size: inherit; }
.post-entry ul ul li { background: none; padding: 0; }
.post-entry ol { list-style: decimal; }
.post-entry dl { font-size: 1.3em; line-height: 1.7em; }
.post-entry dt { color: #222; font-weight: bold; }
.post-entry dd { margin: 0 0 30px; }
.post-entry code { font: 90% Monaco, Courier, monospace; background: #f1f1f1; padding: 2px; border-bottom: 1px solid #d9d9d9; border-right: 1px solid #d9d9d9; }
.post-entry p a, .post-entry li a,
.post-entry p a:visited, .post-entry li a:visited { text-decoration: none; }
.post-entry p a:hover, .post-entry li a:hover,
.post-entry p a:active, .post-entry li a:active { text-decoration: underline; }
.post-entry table { width: 90%; border-left: 1px solid #d9d9d9; margin: 0 auto 20px; }
.post-entry table caption { line-height: 3em; font-size: 1.2em; font-weight: bold; color: #464646; }
.post-entry table thead, .post-entry table tfoot { background: #f1f1f1; }
.post-entry table th, .post-entry table td { padding: 10px 15px; text-align: left; border-right: 1px solid #d9d9d9; border-bottom: 1px solid #d9d9d9; font-size: 1.2em; color: #464646; }
.post-entry tfoot td { text-align: center; }
.post-entry table th { border-top: 1px solid #d9d9d9; font-weight: bold; }
.post-entry table td a, .post-entry table td a:visited { font-weight: bold; text-decoration: none; }
.post-entry table td a:hover, .post-entry table td a:active { text-decoration: underline; }
.post-entry pre { font-size: 1.4em; background: url(images/backgrounds/bg-pre.gif) top left; line-height: 2.3em; width: 600px; overflow: auto; overflow-y: hidden; border: 1px solid #d9d9d9; margin: 0 0 20px; }
.post-entry pre code { background: none; border: none; font-size: inherit; margin: 0 20px; padding: 18px 0; }
.post-entry address { font-style: normal; font-size: 1.3em; line-height: 1.5em; margin: 0 0 20px; }
.post-entry strong { color: #464646; }

/***** Post Entry Password Form ****/
.post-entry form label { font-weight: bold; }
.post-entry form input[type='password'] { width: 280px; padding: 7px 10px; border: 5px solid #f1f1f1; color: #d9d9d9; margin: 5px 0 0; }
.post-entry form input[type='password']:focus { color: #797979; }
.post-entry form input[type='submit'] { width: 140px; height: 40px; margin: 0 0 20px; background: url(images/backgrounds/periodic-sprite-03.png) no-repeat 0 -340px; font-weight: bold; font-family: Arial, "Helvetia Neue", Helvetica, sans-serif; text-transform: uppercase; color: #797979; margin: 10px 0 0; }
.post-entry form input[type='submit']:hover { background-position: 0 -430px; cursor: pointer; }

/***** Shortcodes *****/
.post-entry blockquote.pullquote { margin: 0 20px; padding: 0; width: 35%; border: none; color: #464646; }
.post-entry blockquote.pullquote p { margin: 0; }
.post-entry blockquote.pullright { padding: 5px 0 5px 20px; border-left: 3px solid #464646; }
.post-entry blockquote.pullleft { padding: 5px 20px 5px 0; border-right: 3px solid #464646; text-align: right; }
.checklist { position: relative; }
.checklist ul { list-style: none; }
.checklist li { background: url(images/backgrounds/check.png) no-repeat left .4em; padding: 0 0 0 20px; }
.arrowlist { position: relative; }
.arrowlist ul { list-style: none; }
.arrowlist li { background: url(images/backgrounds/list-arrow.png) no-repeat 0 .4em; padding: 0 0 0 15px; }
.arrowlist li li { background: none; padding: 0; }
.note { position: relative; width: 75%; margin: 0 auto 30px; background: #f1f1f1; border: 1px solid #d9d9d9; padding: 10px 20px 14px; }
.note p { margin: 0; font: 1.4em/1.6em 'VollkornItalic', serif; }
.two_column { position: relative; width: 47%; margin: 0 20px 0 0; float: left; }
.two_column_last { position: relative; width: 47%; margin: 0; float: left; }
.three_column { position: relative; width: 31%; margin: 0 20px 0 0; float: left; }
.three_column_last { position: relative; width: 31%; margin: 0; float: left; }
.four_column { position: relative; width: 23%; margin: 0 20px 0 0; float: left; }
.four_column_last { position: relative; width: 23%; margin: 0; float: left; }
.button, .button:visited { display: inline-block; line-height: 2.5em; text-align: center; background: #e5e5e5 url(images/backgrounds/bg-button.png) repeat-x 0 0; padding: 0 25px; border: 5px solid #d9d9d9; -moz-border-radius: 20px; -webkit-border-radius: 20px; border-radius: 20px; margin: 0 0 20px; color: #464646; font-weight: bold; font-size: 1.2em; text-decoration: none; }
.button:hover, .button:active { background-color: #fcfcfc; background-position: 0 -40px; border-color: #b9b9b9; }

/***** Post Images *****/
img.alignleft { margin: 0 20px 10px 0; }
img.alignright { margin: 0 0 10px 20px; }
img.aligncenter { margin: 0 auto; }

/***** Post Images with Captions *****/
.wp-caption { background: #f3f3f3; border: 1px solid #d9d9d9; padding: 4px 0; }
.wp-caption img { display: block; margin: 0 auto; }
.wp-caption .wp-caption-text { text-align: center; margin: 5px 0 3px; line-height: 1; font: 1.2em/1.3 'VollkornItalic', serif; color: #464646; }
div.alignleft { margin: 0 20px 10px 0; }
div.alignright { margin: 0 0 10px 20px; }
div.aligncenter { margin: 0 auto 20px; }

/***** Post Image Galleries *****/
.gallery { margin: 0 0 20px !important; }
.gallery-item img { border: 1px solid #d9d9d9 !important; background: #f1f1f1; padding: 4px; }
.post-entry dd.gallery-caption { margin: 0 0 15px; padding: 0 20px; }
.post-entry dd.wp-caption-text { font-family: 'VollkornItalic', serif; color: #464646; line-height: 1.2em; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T09:46:55.433

我相信您已经固定了 div id“left-column”的每个内部容器的宽度，您应该在 #left-column 内创建一个容器并设置 padding-left 和 padding-right 并将内部 div 的宽度设置为 100%

# hadoop - 多文件流 hdfs

> ID：13282165
> 
> 赞同：1
> 
> 时间：2012-11-08T03:56:09.110
> 
> 标签：hadoop, hdfs

我在不同的文件上有两个矩阵。我必须将文件读入缓存，以便将它们相乘。我一直想知道 HDFS 是否会帮助我。我怀疑 HDFS 没有，因为它没有足够的缓存来读取文件并处理它。简而言之，我可以同时打开两个文件吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:02:41.843

要回答您的问题的简短版本，是的，HDFS API 确实允许一次同时读取两个文件。您可以简单地在两个文件上创建两个输入流并并行读取它们（就像使用常规文件一样）并围绕它管理您的逻辑。

但是，HDFS 是一个简单的文件系统，没有自己的缓存可提供（操作系统缓冲区缓存除外），您需要携带的任何用于计算的缓存都需要由您自己的应用程序处理。

作为另一个一般性建议，既然您希望使用矩阵相乘，不妨看看支持 HDFS 的[Apache Mahout](http://mahout.apache.org)和[Apache Hama](http://hama.apache.org)项目。

# jquery - jQuery percentage width has up tick when animating down.

> ID：13282167
> 
> 赞同：1
> 
> 时间：2012-11-08T03:56:15.117
> 
> 标签：jquery

Does anyone know why jQuery has an uptick in the width percentage when using animate to scale down the width of an image. This only seems to happen when you are scaling down a div with a percentage based width that is within a div that is also using a percentage based width. See [this](http://jsfiddle.net/buz9L/) example in it you can see that the square to the right drops down for a split second in the up tick. If you try ordering the animate changes on completion handlers there are similar results due to the uptick. The example is based on [this](https://stackoverflow.com/questions/8299608/jquery-animate-with-percenteges) other SO issue but is unanswered for my use case. I'm guessing it has something to do with 3rds and floats in ranging limits with percentages in jQuery, but maybe there is a simple solution out there. Thanks in advance for any help.

```
Check JSFiddle Link 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T16:33:19.597

It does look like the totals for the left two columns might at one point be > 75%, which would push the last div to a new row.
You could declare a 'linear' animation. This seemed to work a little better for me. Maybe it does less/cleaner width calculations.

# c# - Windows 服务不读取设置。设置？

> ID：13282174
> 
> 赞同：0
> 
> 时间：2012-11-08T03:57:00.467
> 
> 标签：c#, configuration, windows-services, setting

我有一个 Setting.setting 有一个设置选项： isSent - type int - value : 0

我的代码：

```
 if (Settings.Default.isSent =! 0)
                {
                    var info = _text.ReadFile(Settings.Default.FilePath);
                //Do something
                } else
                {
                //Do something
                } 
```

我安装了我的 Windows 服务，启动并将其附加到 Visual 进行调试，它总是运行到

```
var info = _text.ReadFile(Settings.Default.FilePath); 
```

但不跑到

```
} else
{
//Do something
} 
```

就像我期望的那样:(

任何人都可以解释它并知道如何为我解决这个问题？感谢任何答案:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:20:20.243

我刚刚注意到“如果（Settings.Default.isSent =！0）”。应该是“if (Settings.Default.isSent != 0)”。否则visual studio会一直报错。

顺便说一句，您是否尝试将源代码附加到服务并在运行时查看“Settings.Default.isSent”的值？

# wpf - IEnumerable 异步的虚拟 FallbackValue

> ID：13282175
> 
> 赞同：1
> 
> 时间：2012-11-08T03:57:01.053
> 
> 标签：wpf, xaml, data-binding, ienumerable, fallbackvalue

我正在尝试调试我的 MVVM 程序（基于 Josh Smith）中的一些数据绑定/性能问题。有很多不同列表和对象的并发加载，所以我一直在使用 isAsync 和一些线程来提高性能和网络瓶颈。

但是，我注意到很多消息是从 ItemsSource 绑定输出的回退值。对于命令，我创建了一个禁用命令的虚拟命令，并且对于大多数事情，我可以绑定到已知的回退原语类型。当我将 ItemsSource 的后备绑定到 {x:Null} 时，问题似乎出现了。

*注意：这发生在很多地方，而不仅仅是 chartingToolkit 控件*

```
A first chance exception of type 'System.NotSupportedException' occurred in PresentationFramework.dll
A first chance exception of type 'System.Xaml.XamlObjectWriterException' occurred in System.Xaml.dll
System.Windows.Data Information: 41 : BindingExpression path error: 'LineValueList' property not found for 'object' because data item is null.  This could happen because the data provider has not produced any data yet. BindingExpression:Path=LineValueList; DataItem=null; target element is 'LineSeries' (Name=''); target property is 'ItemsSource' (type 'IEnumerable')
System.Windows.Data Information: 20 : BindingExpression cannot retrieve value due to missing information. BindingExpression:Path=LineValueList; DataItem=null; target element is 'LineSeries' (Name=''); target property is 'ItemsSource' (type 'IEnumerable')
System.Windows.Data Information: 21 : BindingExpression cannot retrieve value from null data item. This could happen when binding is detached or when binding to a Nullable type that has no value. BindingExpression:Path=LineValueList; DataItem=null; target element is 'LineSeries' (Name=''); target property is 'ItemsSource' (type 'IEnumerable') 
```

* * *

```
<chartingToolkit:LineSeries DependentValuePath="Value" IndependentValuePath="Key" ItemsSource="{Binding Path=LineValueList,IsAsync=True,FallbackValue={x:Null}}"> 
```

我的问题：

1.  这些消息令人担忧吗？我的很多最终用户都有旧机器（并且拒绝升级-.-），所以我一直在努力最大限度地提高性能。
2.  创建虚拟基类型并从 App.xaml 引用它们是否安全？
3.  我对这些列表中的大多数进行了数据模板化，这是造成这种情况的原因吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:19:06.690

您可以在加载真实源时使用[PriorityBinding绑定到虚拟数据源。](http://msdn.microsoft.com/en-us/library/ms753174.aspx)我希望这有帮助。

# assembly - 使用 gdb 检查寄存器的值

> ID：13282176
> 
> 赞同：3
> 
> 时间：2012-11-08T03:57:00.950
> 
> 标签：assembly, gdb, x86-64

如何查看寄存器保存的值？我有以下装配线：

```
 mov 0x8(%rax), %rax
 cpm %ebx, (%rax) 
```

使用命令：

```
 (gdb) p/x $ebx
 (gdb) p/x $rbx
 $3 = 0xb 
```

我得到了存储在这个寄存器中的值。但是，当我尝试查看它存储在内存位置 (%rax) 中的内容时，我遇到了以下问题：

```
(gdb) display *(int *)$rax
Disabling display 10 to avoid infinite recursion.
10: *(int *)$rax = Cannot access memory at address 0x17 
```

我不明白为什么会发生这种情况，以及如何找出 (%rax) 的内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T07:11:09.847

要查看寄存器的值，只需使用

```
print $rax
info register $rax
info register 
```

在您的情况下，它似乎`rax`包含数字`0x17`并且调试器无法访问此位置。请确保`rax`包含指向整数的有效地址。

如果您想快速查看，您应该使用`print`而不是。`display`不要滥用`display`命令。如果您需要一种用于表达式的看门狗，则可以使用它。

在这里您可以找到快速参考

[http://www.yolinux.com/TUTORIALS/GDB-Commands.html](http://www.yolinux.com/TUTORIALS/GDB-Commands.html)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T04:52:18.067

不确定您使用的是哪种 CPU（x86？），但内存访问是否必须对齐？这意味着您可以访问 0x08、0x10、0x18、0x20 等（或者可能是 32 位字，即 0x00、0x20、0x40 等）。这可能是一个不正确的答案，但取决于您的架构。另外，注册表标签是做什么用的？Windows 注册表似乎不相关。

# javascript - 在谷歌地图中放置标记

> ID：13282177
> 
> 赞同：0
> 
> 时间：2012-11-08T03:57:14.100
> 
> 标签：javascript, jquery

我的任务要求根据我们需要解析的 xml 文档在地图上放置多个标记。我已经完成了解析，但是我无法弄清楚如何将 lat 和 long 元素放入新的标记对象中。我的代码：

```
function loadPoint(){
// var newHTML= "<div style=\"padding:5px;border:solid 1px red\">";
// new_lat =  escapeText($(this).find("latitude").number();
// new_long =  escapeText($(this).find("longitude"));
// newHTML += new_lat + "," + new_long;
// newHTML += "</div>";
// $("body").append(newHTML);

var latlong= new google.maps.LatLng($(this).find("latitude"),$(this).find("longitude"));
var marker = new google.maps.Marker({
        map: map, 
        position: latlong
    })
}

function parser(data) {
$(data).find("item title").each(loadDescription);
$(data).find("item latitude").each(loadLat);
$(data).find("item longitude").each(loadLong);
$(data).find("item").each(loadPoint);
}

function myBadLoadFunction(myXMLHttpRequest,myErrorMessage,myErrorThrown) {
alert('status: ' + myErrorMessage + '\n' + myXMLHttpRequest.responseText);
}

var map;
var centerPoint = new google.maps.LatLng(53.608803,-1.497327);

function initializeMap(){
var myOptions = {
    zoom: 8,
    center: centerPoint,
    mapTypeId: google.maps.MapTypeId.ROADMAP
};

 map = new google.maps.Map($('#map_canvas').get(0), myOptions); 
```

在我看来，这是有道理的……将解析后的数据作为创建新 latlng 的参数，但它什么也没做……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:10:44.053

尝试首先安排您的声明。

```
 var map; //declare it here

        function initialize(){
        var centerPoint = new google.maps.LatLng(lat, lng);
        var mapOptions = {
                  zoom: 16,
                  mapTypeId: google.maps.MapTypeId.ROADMAP,
                  center: centerPoint
                };
        map = new google.maps.Map(document.getElementById('map_canvas'),
                    mapOptions);
        }
        function loadPoint(){
        var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map
            });

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T13:01:54.313

```
<!DOCTYPE html>
<html> 
<head> 
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" /> 
  <title>Google Maps Multiple Markers</title> 
  <script src="http://maps.google.com/maps/api/js?sensor=false" 
          type="text/javascript"></script>
</head> 
<body>
  <div id="map" style="width: 500px; height: 400px;"></div>

  <script type="text/javascript">
    var locations = [
      [-33.890542, 151.274856],
      [-33.923036, 151.259052],
      [-34.028249, 151.157507],
      [-33.80010128657071, 151.28747820854187],
      [-33.950198, 151.259302]
    ];

    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 10,
      center: new google.maps.LatLng(-33.92, 151.25),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var infowindow = new google.maps.InfoWindow();

    var marker, i;

    for (i = 0; i < locations.length; i++) {  
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][0], locations[i][1]),
        map: map
      });

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
        }
      })(marker, i));
    }
  </script>
</body>
</html> 
```

# azure - 如何在分片环境中管理集中值

> ID：13282179
> 
> 赞同：0
> 
> 时间：2012-11-08T03:57:36.287
> 
> 标签：azure

我正在为 Windows Azure 开发一个 ASP.NET 应用程序。我们认为有必要对数据库使用分片来改善写入时间，因为应用程序的写入量很大，但数据很容易隔离。但是，我需要跟踪所有实例中的一些中心变量，并且我不确定存储该信息的最佳位置。我有哪些选择？

要求：

*   必须是持久的，可以在实例重启后存活
*   必须同步。避免冲突更新或至少在这种情况下抛出异常，而不是覆盖值或静默失败，这一点非常重要。
*   必须相当快（每秒 2000 次以上读/写

我曾考虑编写一个单独的组件以在工作角色上运行，该角色只需读取/写入内存中的值并经常将它们刷新到磁盘，但我认为必须为此目的已经编写了一些我可以在 Windows 中使用的东西天蓝色。

我认为我正在寻找的是像 Apache ZooKeeper 这样的系统，但我不想在工作角色启动期间安装 JRE 和所有那些爵士乐。

编辑：根据下面的建议，我正在尝试使用以下代码使用 Azure 表存储：

```
var context = table.ServiceClient.GetTableServiceContext();
var item = context.CreateQuery<OfferDataItemTableEntity>(table.Name)
    .Where(x => x.PartitionKey == Name).FirstOrDefault();

if (item == null)
{
    item = new OfferDataItemTableEntity(Name);
    context.AddObject(table.Name, item);
}                    

if (item.Allocated < Quantity)
{
    allocated = ++item.Allocated;
    context.UpdateObject(item);
    context.SaveChanges();
    return true;
} 
```

但是，`context.UpdateObject(item)`调用失败，并`The context is not currently tracking the entity.`没有查询项目的上下文最初将其添加到上下文跟踪机制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:43:30.317

我最终得到了一个混合缓存/表存储解决方案。所有实例都通过 Azure 缓存跟踪变量，而第一个实例启动一个计时器，该计时器每秒一次将值保存到表存储中。启动时，如果可用，缓存变量会使用保存到表存储中的值进行初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:36:09.457

您是否研究过 SQL Azure 联合？这似乎正是您正在寻找的东西：SQL Azure 分片。

以下是一些阅读链接：

[http://msdn.microsoft.com/en-us/library/windowsazure/hh597452.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh597452.aspx)

[http://convective.wordpress.com/2012/03/05/introduction-to-sql-azure-federations/](http://convective.wordpress.com/2012/03/05/introduction-to-sql-azure-federations/)

[http://searchcloudapplications.techtarget.com/tip/Tips-for-deploying-SQL-Azure-Federations](http://searchcloudapplications.techtarget.com/tip/Tips-for-deploying-SQL-Azure-Federations)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T07:17:03.743

您需要的是[表存储](https://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/)，因为它符合您的所有要求：

*   耐用：是的，表存储是存储帐户的一部分，与特定的云服务或实例无关。
*   同步：是的，表存储是存储帐户的一部分，与特定的云服务或实例无关。
    *   避免冲突更新非常重要：是的，这可以通过使用**ETags**
*   相当快？非常快，[每秒高达 20,000 个实体/消息/blob](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/11/04/windows-azure-s-flat-network-storage-and-2012-scalability-targets.aspx)

**更新：**

下面是一些使用新存储 SDK (2.0) 的示例代码：

```
var storageAccount = CloudStorageAccount.DevelopmentStorageAccount;
var table = storageAccount.CreateCloudTableClient()
                            .GetTableReference("Records");
table.CreateIfNotExists();

// Add item.
table.Execute(TableOperation.Insert(new MyEntity() { PartitionKey = "", RowKey ="123456", Customer = "Sandrino" }));

var user1record = table.Execute(TableOperation.Retrieve<MyEntity>("", "123456")).Result as MyEntity;
var user2record = table.Execute(TableOperation.Retrieve<MyEntity>("", "123456")).Result as MyEntity;

user1record.Customer = "Steve";
table.Execute(TableOperation.Replace(user1record));

user2record.Customer = "John";
table.Execute(TableOperation.Replace(user2record)); 
```

1.  首先，它添加项目 123456。
2.  然后我模拟 2 个用户获得相同的记录（想象他们都打开了一个显示记录的页面）。
3.  用户 1 速度很快并更新了项目。这行得通。
4.  用户 2 的窗口仍然打开。这意味着他正在研究该项目的旧版本。他更新旧项目并尝试保存它。这会导致以下异常（这是可能的，因为 SDK 与 ETag 匹配）：

> 远程服务器返回错误：(412) Precondition Failed。

# python - 这是在dict中删除对象的正确方法吗

> ID：13282184
> 
> 赞同：2
> 
> 时间：2012-11-08T03:58:18.500
> 
> 标签：python, python-3.x

我写了一个继承自dict的类，我写了一个成员方法来删除对象。

```
class RoleCOList(dict):
    def __init__(self):
        dict.__init__(self)

    def recyle(self):
        '''
        remove roles too long no access
        '''
        checkTime = time.time()-60*30
        l = [k for k,v in self.items() if v.lastAccess>checkTime]
        for x in l:
            self.pop(x) 
```

是不是太低效了？我使用了 2 个列表循环，但我找不到其他方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:11:56.373

在去年的 SciPy 会议上，我参加了一个演讲，演讲者说了这句话，`any()`并且`all()`是循环完成任务的快速方法。这说得通; 循环`for`在每次迭代时重新绑定循环变量，而`any()`简单`all()`地使用该值。

显然，`any()`当您想要运行一个总是返回错误值的函数时使用，例如`None`. 这样，整个循环将运行到最后。

```
checkTime = time.time() - 60*30

# use any() as a fast way to run a loop
# The .__delitem__() method always returns `None`, so this runs the whole loop
lst = [k for k in self.keys() if self[k].lastAccess > checkTime]
any(self.__delitem__(k) for k in lst) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T04:12:20.457

那这个呢？

```
_ = [self.pop(k) for k,v in self.items() if v.lastAccess>checkTime] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T04:18:45.727

由于您不需要生成的列表，因此您可以使用生成器和此[消费配方](http://docs.python.org/2/library/itertools.html#recipes)中的片段。特别是，用于`collections.deque`为您运行一个生成器。

```
checkTime = time.time()-60*30

# Create a generator for all the values you will age off
age_off = (self.pop(k) for k in self.keys() if self[k].lastAccess>checkTime)

# Let deque handle iteration (in one shot, with little memory footprint)
collections.deque(age_off,maxlen=0) 
```

由于在 age_off 的迭代过程中字典发生了变化，因此使用`self.keys()`which 返回一个列表。（使用`self.iteritems()`将引发一个`RuntimeError`。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T04:48:43.550

我的（完全不可读的解决方案）：

```
from operator import delitem
map(lambda k: delitem(self,k), filter(lambda k: self[k].lastAccess<checkTime, iter(self))) 
```

但至少它应该是相当节省时间和内存的;-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T20:38:20.240

如果性能是一个问题，并且如果您将拥有大量数据，您可能需要考虑将 Python 前端用于 memcached 或 redis 等系统；那些可以为您处理过期的旧数据。

[http://memcached.org/](http://memcached.org/)

[http://pypi.python.org/pypi/python-memcached/](http://pypi.python.org/pypi/python-memcached/)

[http://redis.io/](http://redis.io/)

[https://github.com/andymccurdy/redis-py](https://github.com/andymccurdy/redis-py)

# c# - Jquery Ajax 和 asp.net WebMethod

> ID：13282187
> 
> 赞同：4
> 
> 时间：2012-11-08T03:58:48.823
> 
> 标签：c#, jquery, asp.net, ajax, webmethod

我正在尝试使用 jquery ajax 在 aspx 页面中调用 webmethod。ajax 代码在页面中调用，但我无法进入该方法，尽管在 ajax Post 请求之后访问了 Page_Load。我已经尝试了很多方法，但我做不到。

我希望你能帮助我，我快疯了。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        string nombre = Request.QueryString["nombre"];
        if (!IsPostBack)
        {
            this.CargarDatosIniciales();                  
        }
    }

    [WebMethod(enableSession:true)]
    [ScriptMethod()]
    public static void GuardarDatosFamilia(string nombre, string tipoDoc)
    {
        string nombrePersona = nombre;
        string tipoDocumento = tipoDoc;
    }

    $.ajax({
        type: "POST",
        url: "FRM_Caracterizacion.aspx/GuardarDatosFamilia", //Direccion del servicio web segido de /Nombre del metodo a llamar
        beforeSend: function () { alert('I am sending'); },
        data: "{'nombre':'"+ nombre+"','tipoDoc':'"+ tipoDoc"'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json" 
        }); 
```

更新：

这是我在 Firebug 中得到的：

```
 POST http://localhost:51620/FRM_Caracterizacion.aspx/GuardarDatosFamilia 200 OK    3.22s

     Parámetros application/x-www-form-urlencoded
     nombre Jhon Fredy
     tipoDoc    1
     Fuente
     nombre=Jhon+Fredy&tipoDoc=1 
```

更新 2：

解决方案

我为我的具体问题所做的是：

```
 $.ajax({
        type: "POST",
        url: "FRM_Caracterizacion.aspx", //Direccion del servicio web segido de /Nombre del metodo a llamar
        beforeSend: function () { alert('I am sending'); },
        data: { metodo: 'AgregarDatosFamilia',
        nombre:nombre,
        tipoDoc:tipoDoc
        },
        dataType: "json" //Esto quiere decir que los datos nos llegaran como un objeto json
    });

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            if (Request.Form["metodo"] == "AgregarDatosFamilia")
            {
                this.GuardarDatosFamilia();
            }
            this.CargarDatosIniciales();                  
        }
    }

    public void GuardarDatosFamilia()
    {
        string nombre = Request.Form["nombre"].ToString(),
        string tipoDoc = Request.Form["tipoDoc"].ToString()
    } 
```

谢谢大家，我很感激建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T04:10:06.423

确保您在客户端正确调用它

```
 $.ajax({
        type: "POST",
        url: "FRM_Caracterizacion.aspx/GuardarDatosFamilia", //Direccion del servicio web segido de /Nombre del metodo a llamar
        beforeSend: function () { alert('I am sending'); },
        data: "{'nombre':'"+ nombre+"','tipoDoc':'"+ tipoDoc"'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json" 
        }); 
```

然后在浏览器中按 F12 并观察流量 - 你会看到 webmethod 正在被调用，但你没有返回任何东西，

```
[WebMethod(enableSession:true)]
[ScriptMethod()]  //this can't be void - change to String
public static String GuardarDatosFamilia(string nombre, string tipoDoc)
{
    string nombrePersona = nombre;
    string tipoDocumento = tipoDoc;
    return "successful ajax";
} 
```

尝试进行测试-如果您尝试访问在 Page_Load 中声明的字符串 nombre-在静态方法中是不可能的，您将可以访问的唯一数据是传递给 webmethod 的数据

我发表评论说要从 void 更改它 - 它实际上可以是 void - 但那是如果你想执行一些操作，通常使用数据库 - 即使这样，返回一个字符串让客户知道它是否是一个好习惯成功与否

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T04:03:18.430

为 webmethod 创建不同的 webservice，阅读更多[Consuming-Webservice-using-JQuery-ASP-NET-](http://www.codeproject.com/Articles/66432/Consuming-Webservice-using-JQuery-ASP-NET-Applicat) Applic 和[调用 webservice](http://forums.asp.net/t/1745531.aspx/1)

# python - MissingSectionHeaderError：文件不包含节标题

> ID：13282189
> 
> 赞同：26
> 
> 时间：2012-11-08T03:59:16.197
> 
> 标签：python, virtualenv, configparser

我正在尝试根据[本手册](http://plone.org/products/collective.simserver)构建collective.simserver ，并进行一些修改：

```
instead of: virtualenv --python=bin/python2.7 simserver/
I am using: virtualenv --python=myVirtualEnv/bin/python simserver 
```

我设法做到了这一点：

```
myVirtualEnv/bin/python bootstrap.py 
```

然后它与此错误信息分开：

```
An internal error occurred due to a bug in either zc.buildout or in a
recipe being used:
Traceback (most recent call last):
  File "/tmp/tmpLiHZgo/zc.buildout-1.6.3-py2.6.egg/zc/buildout/buildout.py", line 1851, in main
    command)
  File "/tmp/tmpLiHZgo/zc.buildout-1.6.3-py2.6.egg/zc/buildout/buildout.py", line 203, in __init__
    data['buildout'].copy(), override, set()))
  File "/tmp/tmpLiHZgo/zc.buildout-1.6.3-py2.6.egg/zc/buildout/buildout.py", line 1465, in _open
    parser.readfp(fp)
  File "/usr/lib/python2.6/ConfigParser.py", line 305, in readfp
    self._read(fp, filename)
  File "/usr/lib/python2.6/ConfigParser.py", line 482, in _read
    raise MissingSectionHeaderError(fpname, lineno, line)
MissingSectionHeaderError: File contains no section headers.
file: /home/nenad/buildout.cfg, line: 4
'<!DOCTYPE html>\n'
Mint-AMD64 nenad # 
```

可能有什么问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-10-26T16:19:56.420

我想我迟到了，但是当我将配置文件保存为`UTF-8` 尝试将文件保存为`ANSI`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2021-04-06T05:48:07.723

对我来说，我看到了这个错误，因为我错误地认为 API`.read_file()`接受文件路径，但它只接受文件句柄。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-19T09:01:53.097

配置文件中没有节头。

> 配置文件由部分组成，由 [section] 标头引导，后跟名称：值条目。

[文档 CofigParser python 模块](http://docs.python.org/2/library/configparser.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-11T08:40:48.640

此错误很可能是因为配置文件中的部分缺少标题（或指定错误）。请参阅[configparser](https://docs.python.org/3/library/configparser.html#module-configparser)文档以查看配置文件必须具有的格式。

配置文件由*section 组成*，必须以 a开头`[header]`，例如：

```
[DEFAULT]
ServerAliveInterval = 45
Compression = yes
CompressionLevel = 9
ForwardX11 = yes

[bitbucket.org]
User = hg

[topsecret.server.com]
Port = 50022
ForwardX11 = no 
```

`=` 并且配置文件中的每个部分都将包含由字符串（或`:`默认情况下）分隔的键/值对。每个部分的*标题*必须采用格式`[header]`，任何不同都会产生`configparser.MissingSectionHeaderError`.

# python - 点环绕算法 - 一个阻塞的摆动门

> ID：13282190
> 
> 赞同：0
> 
> 时间：2012-11-08T03:59:26.153
> 
> 标签：python

我正在尝试一些python中的代码。基本上它所做的是在 (x,y) 坐标系上模拟一扇门（从上方看）。任务给出了一个点列表，如果有的话，确定哪个门将首先击中。

确定一个点是否在被门击中的范围内很简单，确定哪个点首先被击中被证明是困难的，因为门可以顺时针或逆时针旋转，并且具有相当大且可变的摆动范围（以弧度/度数表示）。问题主要是我不确定要首先达到该点需要满足哪些条件。

更新：我确实计算了角度，但关注特殊情况，例如当门处于 1 度时，以及顺时针摆动到角度 180、190 和 300 的点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T04:09:01.400

计算从门铰链到每个点的角度；旋转时最接近门本身的当前角度（铰链到门边缘）将首先被击中。

如果骑自行车给您带来麻烦：请注意，对于任何给定的角度，您都可以从 360 度中减去它以获得它的补码；两者中较小的那个是更接近它的方法。所以：

1.  计算点 a1 ... aN 的所有角度
2.  从门角中减去它们，得到差异角 d1...dN
3.  用 min( dN, 360 - dN ) 替换每个 dN 以获得“更短”的方法
4.  选择最小值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:14:55.377

如果您考虑门的角度和每个点相对于门铰链的角度之间的差异，这可以简化。

然后，您可以使用以下公式找到角度：

```
length of vector from hinge to door: A
length of vector from hinge to point: B

angle = (A * B)/(A^2 + B^2) 
```

# coffeescript - Coffeescript - 通过变量调用函数

> ID：13282196
> 
> 赞同：2
> 
> 时间：2012-11-08T04:00:43.140
> 
> 标签：coffeescript

我想用咖啡脚本管理我的部分布局。我有一个左/右面板，我希望能够在它们之间切换。我创造了这样的东西：

```
window.switchPanel = (panel = 'left', action = 'toggle') ->

  open = (panel) ->
    ...

  close = (panel) ->
    ...

  toggle = (panel) ->
    ... 
```

我的问题是，我如何构造它以便我可以`open/close/toggle`通过`action`变量调用并且我可以使用一些东西，这样我就不必将它传递`panel`给每个子函数？也许`@panel`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T07:19:06.403

我认为您只想将函数放入一个对象中，以便您可以按名称访问它们：

```
window.switchPanel = (panel = 'left', action = 'toggle') ->
  funcs =
    open: (panel) ->
      ...
    close: (panel) ->
      ...
    toggle: (panel) ->
      ... 
```

然后你可以简单地`funcs[action](panel)`在里面`switchPanel`。如果您不想传递`panel`到函数中，那么您不必这样做，它们`panel`只需在以下范围内定义即可访问`switchPanel`：

```
window.switchPanel = (panel = 'left', action = 'toggle') ->
  funcs =
    open: ->
      ...
    close: ->
      ...
    toggle: ->
      ... 
```

然后你就可以了`funcs[action]()`，他们可以随心所欲地做他们喜欢的事`panel`。

演示：http: [//jsfiddle.net/ambiguous/UV42x/](http://jsfiddle.net/ambiguous/UV42x/)

一些关于[JavaScript 闭包](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)的阅读将阐明第二个版本中发生了什么。

您可能需要包含一个`if(action !of funcs)`检查以确保您不会尝试使用 bad `action`. 或者，正如[Aaron Dufour](https://stackoverflow.com/users/593105/aaron-dufour)在评论中指出的那样，`funcs[action]?()`如果您只需要检查`action`一次是否有效，您就可以这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:17:16.873

一些事情：

1）我认为您正在通过根据对象的输入有选择地调用对象内的方法来创建模糊的体系结构。它引出了一个问题“为什么还要创建方法？为什么不直接使用大的 IF ELSE IF 类型结构？” 但其他人会不同意我的看法。

2) 这是 CoffeeScript 令人困惑的情况之一。如果包裹在显式大括号中，您正在处理通常会很清楚的事情。我不喜欢 javascript 到处疯狂使用匿名函数包装器，但我确实相信括号内的代码。我尊重第 1 点。我认为你这样做只是让事情变得更复杂。

3）你研究过coffeescript如何转换'this'关键字吗？我很确定 CoffeeScript 对“this”做了某种不同于标准 javascript 的智能转换，这意味着除了 Coffee 用户之外没有人可以为你回答这个问题。它不会与 javascript 相同。它是相关的，因为为了在不显式传递的情况下访问方法中的“面板”，您需要使用“this.panel”或其他一些取消引用机制从其中一种方法中访问面板成员。我不能告诉你怎么做，但我的这些信息可以帮助你朝着正确的方向前进。手头的问题显然是如何引用对象成员的问题。

# dojo - DOJO：如何验证 (required="true") selectOneMenu

> ID：13282203
> 
> 赞同：0
> 
> 时间：2012-11-08T04:01:25.883
> 
> 标签：dojo

我如何验证 DOJO selectOneMenu (required="true") 这是一些虚拟代码。

```
 <select required="true" missingMessage="Ooops!  You forgot your gender!" 
name="gender" id="gender" data-dojo-type="dijit/form/?">
        <option disabled="true" value="">Select a Gender</option>
        <option value="1">Male</option>
        <option value="2">Female</option>
    </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:20:42.950

Dojo 提供 3 种类型的组合框：

1.  Select 它是一个简单的组合框，就像 HTML 中的 select 一样，没有验证，并且在 select 选项中不提供任何搜索工具。

2.  ComboBox 它是组合框的纯形式，并再次命名为 ComboBox，它不会提供任何默认验证，但它在其选项中提供搜索工具。

3.  FilteringSelect 它是一种高级形式的选择，具有默认的验证和搜索功能。它还具有取值的属性，因为输入标签在 HTML 中取值。

在 dojo 中，您还可以尝试在 dojox 库中提供的自定义验证。我希望它会帮助你。

# javascript - 在 iFrame 中只显示一个 div

> ID：13282206
> 
> 赞同：0
> 
> 时间：2012-11-08T04:01:37.630
> 
> 标签：javascript, jquery, web

*我在 html 页面myPage.html*中有一个 iFrame，我在其中显示另一个页面*otherPage.html*。 *otherPage.html*是一个包含许多元素的复杂页面。我想在 iFrame 中只显示一个 div。所有其他人都应该保持隐藏。我怎样才能做到这一点？

我尝试在 jQuery 中使用 .load() 函数，而不是 iFrame。但由于某种原因，页面无法加载。otherPage.html*由*IIS 服务器提供，页面由纯 Javascript 构建。我不知道为什么当我使用 load() 函数时什么都没有加载。

我将如何实现这一目标？

***更新：*** 这里有一些说明：我尝试在 myPage.html 上使用*.load* () 函数。无论如何，在摆弄之后，我发现以下工作：对于我要显示的 div，我隐藏了它的所有兄弟姐妹，也隐藏了它的父级的所有兄弟姐妹。以下 jQuery 语句似乎可以做到这一点：

> $("#myFrame").contents().find("#chart1").show().parentsUntil('body').andSelf().siblings().hide();

我现在只有一个问题。当我执行以下操作时：

*   在 Firefox 中加载*myPage.html*（它还在 Iframe 中加载*otherPage.html*）
*   手动打开萤火虫并输入

> $("#myFrame").contents().find("#chart1").show().parentsUntil('body').andSelf().siblings().hide();

它似乎隐藏了其他一切。

但后来我想自动化它。换句话说，当我加载*myPage.html*时，我希望它加载 iFrame 的内容。加载 iFrame 内容后，我想运行此脚本：

> $("#myFrame").contents().find("#chart1").show().parentsUntil('body').andSelf().siblings().hide();

我不能让它工作。到目前为止，我已经尝试了这两种方法：

```
$(document).ready(function() {
    $("#myFrame").ready(function () {
        $("#myFrame").contents().find("#chart1").show().parentsUntil('body').andSelf().siblings().hide();
    });
}); 
```

我也尝试过使用

```
$("#myFrame").load(function () { 
```

反而。但在这两种情况下，脚本都不会隐藏其他元素。因为，当我在控制台中手动使用该脚本时，它可以工作，我假设它在加载所有元素之前以某种方式运行。请给我你的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:05:50.290

你说你正在使用 load() 函数。您是在父页面还是 iframe 页面中使用它？您真的要使用 ready() 函数吗？

```
$(document).ready(function(){
    // some code here ...
}); 
```

在文档上使用 ready() 将确保 DOM 元素已完全加载，然后将执行处理程序中的代码。如果没有更多信息，我不确定我能否对您在这里尝试的内容提供很大帮助。

使用 iframe，您首先应该记住，如果您只希望一个 div 可见而所有其他 div 隐藏，则必须确保“可见” div 不在“不可见”容器内。如果容器被隐藏，所有的孩子也将被隐藏。

如果你有一个 div “showme”，那么这样的事情会起作用：

```
<div id="showme">visible text</div>
<div style="display:none;">hidden text</div> 
```

但是这样做，一切都会被隐藏：

```
<div style="display:none;">
    hidden text
    <div id="showme">supposed to be visible, but hidden!!</div>
</div> 
```

如果您要更改元素的可见性或显示，您可以在 iframe 页面中执行此操作，如下所示：

```
// using jQuery...
// set the display css to an empty string, defaulting to visible (not 'none')
$('#showme').css('display','');

// set other elements to be hidden...
$('#hideme1').css('display','none');
$('#hideme2').css('display','none');
$('#hideme3').css('display','none'); 
```

如果您想从您首先访问 iframe 的 PARENT 页面更改元素的可见性，然后更改其中的元素：

```
// using jQuery...
// get the iframe.  ps. you dont have to put the $ in front of the variable name.
// I chose to do it this way to remind myself it's a jQuery object.
var $f = $('#myiframe').contents();

// set the display css to an empty string, defaulting to visible (not 'none')
$f.find('#showme').css('display','');

// set other elements to be hidden...
$f.find('#hideme1').css('display','none');
$f.find('#hideme2').css('display','none');
$f.find('#hideme3').css('display','none'); 
```

有关使用子 iframe 中的元素的示例，请参阅本文：

[http://www.computerhowtoguy.com/jquery-and-iframes/](http://www.computerhowtoguy.com/jquery-and-iframes/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T04:18:47.567

*   通过类似的方式隐藏 iFrame 中的所有内容，`$("#myIFrame *").hide();`或者您​​可以将 css 显示属性设置为无。

*   使用 CSS 选择器，仅重新显示您想要的 div。如果你的 div 有一个 id 这很容易：`$('#myDiv').show();`

如果 div 没有 id，看看你能不能给它一个。如果无法为您的 div 创建一个 id，请尝试为其父级提供一个 id/类。

如果 ID 不是一个选项，您可能还会发现选择器`:nth-child()`很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T04:24:40.570

据我了解你的问题。您可以这样做，传递 div id 以在您的 otherPage.html url 中显示为哈希，就像您有一个`div`with id一样`first`，您可以先作为哈希传递

```
<iframe src="otherPage.html#first" /> 
```

在 中`otherPage.html`，你可以得到这个`hash`并根据那个显示你的 div，但首先隐藏你的所有部分，使用 css 会很容易，只添加`"display:none;"`css。

试试这个：在`otherPage.html`

```
$(function(){
   //var divToShow = location.hash.subString(1);
   //$('#'+divToShow).show();
   var divToShow = location.hash;
   $(divToShow).show();
}); 
```

# nginx - 在 ec2 上部署我的 rails 3 应用程序后，它不会呈现我的应用程序

> ID：13282209
> 
> 赞同：1
> 
> 时间：2012-11-08T04:02:24.420
> 
> 标签：nginx, amazon-ec2, capistrano, passenger

我正在使用 capistrano、nginx 和乘客从 ec2 上的 github 部署我的 rails 3 应用程序。

这是我的 deploy.rb 文件：

```
set :application, "my-Blog"

set :repository,  "https://github.com/whatever/my-Blog.git"

set :scm, :git

role :app, "ec2 DNS"

role :web, "eec2 DNS"

role :db,  "ec2 DNS", :primary => true

set :user, 'ec2-user'

set :deploy_to, "/home/ec2-user/apps/Blog"

set :use_sudo, false

default_run_options[:pty] = true

set :deploy_via, :remote_cache

ssh_options[:keys] = ["#{ENV['HOME']}/.ssh/my-key.pem"] 

set :keep_releases, 3

namespace :deploy do

  task :start do ; end

  task :stop do ; end

  task :restart, :roles => :app, :except => { :no_release => true } do

  end

 end 
```

当我运行部署命令时，一切都很好，我的应用程序在我的当前目录下的 ec2 上，这意味着 capistrano 可以从我的 github 获取我的源代码。

在我的 ec2 实例上，我已经设置好了所有内容：ruby、rvm、mysql、rails、nginx、passenger。

但是当我转到我的 ec2 DNS 时，它没有显示我的应用程序！

你有什么建议可能是错的吗？这是我的第一次部署！

感谢您的回答！我希望看到我的申请！在 aws 控制台中，我有：22（SSH）和 80（HTTP），我猜这意味着端口 80 是打开的。我认为我的 nginx 配置文件应该有问题，这就是我在这个文件中的内容：

用户 nginx；

```
server {

          listen 80;
          server_name ec2-54-242-228-182.compute-1.amazonaws.com;
        #  root /home/ec2-user/apps/Blog/current/public;
         # passenger_enabled on;
        } 
```

}

当我评论根目录时，公共 DNS url 上显示“欢迎使用 Amazon Linux AMI 上的 nginx！您现在应该将您的内容放在您选择的位置并在 nginx 配置文件 /etc 中编辑根配置指令/nginx/nginx.conf。” 当我取消注释根目录然后给我403错误！日志文件说“current/public/index.html”被禁止（13：权限被拒绝）“

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T23:42:13.440

检查 nginx 配置中的端口是否在 AWS 面板上打开。检查是否可以使用 telnet 连接到端口 检查服务器上是否有 nginx、passenger 运行

```
$ ps -el | grep nginx 
```

检查 nginx 访问和错误日​​志，您是否可以看到自己的活动试图访问该服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T06:00:54.200

答案取决于你所说的不出现是什么意思。如果您正在获取默认网页，那么您的网络服务器可能正在尝试解析基于名称的虚拟主机。在这种情况下，请尝试将您的 EC2 实例的公共 IP 地址添加到您的本地`hosts`文件中。

```
123.456.789.012  domain-nginx-expects.com 
```

如果服务器根本没有响应，请检查进程列表并确保 nginx 和乘客正在运行。还要检查该实例的 EC2 安全组，以确保端口 80 已打开。您还可以在登录服务器时尝试远程登录到端口 80：

```
$ telnet localhost 80
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
GET / 
```

# c++ - 为什么我的 C++ 包含多次定义变量？

> ID：13282210
> 
> 赞同：3
> 
> 时间：2012-11-08T04:02:25.753
> 
> 标签：c++, c-preprocessor

我知道预处理器命令是头文件的重要组成部分，以防止多次定义变量和类。

我一直遇到我的变量被多次定义的问题——即使是预处理器包装器也是如此。这是一个遇到编译器错误的示例项目：

标题：

```
// TestInclude.h
#ifndef TESTINCLUDE_H_
#define TESTINCLUDE_H_

int myInt;

#endif /*TESTINCLUDE_H_*/ 
```

C++：

```
// TestInclude.cpp
#include <iostream>
#include "IncludeMe.h"
#include "TestInclude.h"

int main( int argc, char* args[] )
{
    std::cin >> myInt;

    IncludeMe thisClass;

    std::cin >> myInt;
} 
```

标题：

```
// IncludeMe.h
#ifndef INCLUDEME_H_
#define INCLUDEME_H_

class IncludeMe
{
private:
    int privateInt;
public:
    IncludeMe();
};

#endif /*INCLUDEME_H_*/ 
```

C++：

```
// IncludeMe.cpp
#include <iostream>
#include "IncludeMe.h"
#include "TestInclude.h"

IncludeMe::IncludeMe()
{
    std::cout << "myInt: " << myInt;
} 
```

然后我像这样编译：

生成文件：

```
all:
g++ -g -o TestInclude TestInclude.cpp IncludeMe.cpp 
```

我收到以下错误：

> /tmp/ccrcNqqO.o：在函数“IncludeMe”中：/ home/quakkels/Projects/c++/
> TestInclude/IncludeMe.cpp:6：“myInt”的多个定义
> /tmp/ccgo6dVT.o:/home/quakkels/Projects/ c++/TestInclude/TestInclude.cpp:7: 首先定义在这里
> collect2: ld 返回1 退出状态
> make: *** [all] Error 1

当我在头文件中使用预处理器条件时，为什么会出现此错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T04:06:00.203

包含守卫不能防止多重*定义*。它们只防止无限递归包含。（您当然可以在多个翻译单元中包含相同的标题！）

您永远不应该在标题中包含对象定义*；只有*声明*：

**标头.hpp：**

```
extern int a; 
```

**文件.cpp：**

```
#include "header.hpp"

int a = 12; 
```

[*) 您*可以*在头文件中包含类定义，以及`inline`函数和类成员函数。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T04:05:16.160

您应该`extern int myInt;`在头文件中使用，并且只`int myInt;`在要定义它的单个 .cpp 文件中写入。

一些项目使用诸如“IN_FOO_CPP”之类的预处理器宏来通过#ifdefs 自动执行此操作。

# android - 在 Android 中使用 OpenGL 创建按钮

> ID：13282215
> 
> 赞同：-1
> 
> 时间：2012-11-08T04:03:00.663
> 
> 标签：android, opengl-es

谁能给我一个在 Android 中使用 OpenGL 创建按钮的简单示例？

我用谷歌搜索但没有找到任何合适的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:03:17.327

您可以使用一些框架，例如 Cocos2d。如果你想从头开始创建它，就像 MadcoreTom 评论的那样，它实际上只是一个带纹理的矩形，你仍然需要编写所有带有触摸的处理，可能还有一些状态。另一个问题是从字符串中添加一些文本。但同样在大多数情况下，它只是一个带纹理的矩形和一个 if 语句......

# spring - 如何使 JDBCTemplate.query() 通用

> ID：13282216
> 
> 赞同：0
> 
> 时间：2012-11-08T04:03:04.817
> 
> 标签：spring, jakarta-ee, spring-mvc, jdbctemplate

我是 Spring 框架的新手。我什至通过查看文档也发现了这一点，但没有找到我想要的方法。让我解释一下
我想要的方法
`JDBCTemplate.query()`可以采用多个参数多种方法。如果我有200个存储过程，那么我必须编写200个方法！呵呵目前我通过传递一个数组并在数据库端拆分它来做到这一点，但我想找到一个好方法。任何想法/建议`2, 3 ,4....n``JDBTemplate`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:10:14.847

你在寻找这样的东西吗？

```
 //set any number of parameters
   Object[] parameters = new Object[] { new Integer(1), "test" };
   String sqlQuery = "select * from table1 t where t.id = ? and t.text = ?";
   SqlRowSet srs = getJdbcTemplate().queryForRowSet(sqlQuery , parameters); 
```

`query`您可以通过从方法外部传递and`parameters`作为参数来概括 is 。

# android - Android 显示超长滚动网页 - 这是不正确的行为

> ID：13282218
> 
> 赞同：1
> 
> 时间：2012-11-08T04:03:20.423
> 
> 标签：android, html, css, mobile

也许在Android上滚动有一些我不知道的魔法？

我有一个网站可以在桌面上的 IE7、IE8、IE9、FireFox、Chrome 和 Safari 中正常运行。它在 iPhone 上的 Safari 中也能正常工作。

但是，我的一位 Android 2.3.7 朋友告诉我，他的 Android 上有 Opera 和默认浏览器。在这两种浏览器中，可滚动视图都不会在页面底部结束。当您到达深灰色页脚的尽头时，您可以直接越过它并看到纯奶油色背景持续滚动数英里！

我不知道是什么原因造成的！

任何人都可以在这里给我一根骨头吗？

这是任何可能拥有 Android 2.3.7 或其他 Android 版本进行测试的人的网站。就像我说的，发生在默认和歌剧浏览器中。

[http://wwwa1nbkclientsitecom.zippysites.com/](http://wwwa1nbkclientsitecom.zippysites.com/)

更新：我从样式表中的 HTML 样式标记中删除了**overflow-y属性。**我让另一个 Android 2.* 用户对其进行了测试。它还是坏了。现在我的下一个猜测是，由于顶部精美的浮动菜单，这可能会被破坏。早期版本的 Android 仅部分支持**position:fixed**

我将尝试禁用 position: fixed 菜单并再次对其进行测试。

更新2：我测试过了。它还是坏了。我目前正在为模拟器功能安装 Google 的 Android SDK。它会让我指定旧版本的 Android 进行测试。如果我缩小问题的范围，我会在这里发布答案。在那之前，如果有人知道发生了什么，请发表您的想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:11:59.490

它适用于我在 Android 4.0.4 平板电脑上的最新版本 Chrome 中。

但是，我认为问题可能在于其他浏览器`overflow-y: scroll;`对您的`<html>`标签的解释。

尝试删除该属性。无论如何，你不应该在`<html>`标签上需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:55:02.177

这是页脚中的动态谷歌地图。这与我的页面布局或样式无关。我所做的一切都很好。删除动态谷歌地图修复了它。解决方案：替换为静态谷歌地图。无论如何，在移动设备的页面中使用嵌入的动态地图有点糟糕。

# sql - 在 SQL 中使用强制转换和多列选择

> ID：13282223
> 
> 赞同：3
> 
> 时间：2012-11-08T04:04:19.657
> 
> 标签：sql, sql-server, casting

基本上我想让这个命令工作：

```
$sql = "SELECT (EntryDate + TotalTime) as DataLine FROM TimeSheet WHERE EmployeeID='AA01'"; 
```

EntryDate 在数据库中是一个文本，但 TotalTime 是一个数字。我需要将 TotalTime 转换为文本，因为我注意到如果我组合两种不同类型的值，它只会使输出空白。

我知道我应该使用 CAST(TotalTime as XXX) 但我不确定我可以合法地将它转换成什么（char/nchar 似乎不起作用，字符串和文本也不起作用）。我总是收到表格错误...

```
Syntax error (missing operator) in query expression '(EntryDate + CAST(TotalTime as string) as DataLine FROM TimeSheet WHERE EmployeeID='AA01'' 
```

我能得到一些帮助吗？谢谢！

**编辑**我想指出，这并不是要将 EntryDate 和 TotalTime 的值加在一起以产生单个值。我只是想让它给我 EntryDate 值以及 TotalTime 值组合成一行，其内容如下：

“12 年 10 月 31 日 9.25”

**再次编辑**我很抱歉之前没有指定，我正在使用 MSSQL

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T04:06:47.570

试试这个：

```
SELECT 
  CAST(EntryDate AS VARCHAR(25)) + CAST(TotalTime AS VARCHAR(10)) as DataLine 
FROM TimeSheet 
WHERE EmployeeID = 'AA01'; 
```

但是，如果`entrydate`是日期而 int`totaltime`是时间，最好考虑将它们转换为日期时间对象，方法是根据您使用的 RDBMS 将它们作为日期部分添加到时间部分。如果可能的话，使用`DATETIME`数据类型来表示日期和时间部分而不是两个部分。像这样：

```
SELECT DATEADD(hh, totaltime, entrydate)
FROM TimeSheet
WHERE EmployeeID = 'AA01'; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!3/2c6d9/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:07:23.660

微软SQL：

```
$sql = "SELECT EntryDate+''+CAST(TotalTime as char(25)) as DataLine FROM TimeSheet WHERE EmployeeID='AA01'"; 
```

MySQL

```
$sql = "SELECT CONCAT(EntryDate,' ',CONVERT(TotalTime,char(25))) as DataLine FROM TimeSheet WHERE EmployeeID='AA01'"; 
```

# expressionengine - 使用邮政编码范围进行运输（快递商店）

> ID：13282234
> 
> 赞同：3
> 
> 时间：2012-11-08T04:06:09.227
> 
> 标签：expressionengine, expresso-store

我们正在为一家酿酒厂建立一个在线商店/网站，他们有一个矩阵/表格，列出了不同地区（澳大利亚）的运输成本。

在 Exp-resso Store 1.6.0 中，是否可以为特定的运费设置邮政编码？

`i.e. postcode= 2000-2249, 2555-2574 = $10 + $1/kg. 1250-1263 = $12 +$1.1/kg`

附加信息：从技术上讲，交付是通过 AusPost 进行的，但使用的是他们的“Wine Delivery Service”，这与他们正常的包裹递送内容不符，所以我们不能使用 AusPost 插件/API :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T04:13:54.200

无法从控制面板执行此操作。但是，您可以使用 PHP 轻松编写自己的运费计算器。

一个简单的自定义运输插件示例如下：

[https://gist.github.com/2176462](https://gist.github.com/2176462)

# php - codeigniter 中的 url 限制

> ID：13282237
> 
> 赞同：0
> 
> 时间：2012-11-08T04:06:45.913
> 
> 标签：php, codeigniter

我正在使用 Codeigniter。我正在创建一个购物车网站。我有一个产品详细信息页面，其中 url 是“localhost://shopcart/product/productid”。我复制此 url，然后从该站点注销。然后我将该网址粘贴到它转到该页面的网址中。我怎么能限制它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T04:38:34.460

在控制器的构造函数中，检查用户是否登录。如果未登录，则将 URL 存储在 session 中，重定向到登录页面，然后在登录后重定向回来。

如果您正在寻找更具体的内容，则需要提供代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:40:20.193

制作一个双头模板首先是 header_outside.php 第二个是 header_inside.php
使用 header_outside.php 用于不使用或不需要任何登录详细信息
的模块，并将 header_inside.php 用于用户需要登录才能使用的模块模块

这是解决方案创建一个函数，如果他/她登录并调用 header_inside.php 中的函数，它将检查用户的会话

例如：

```
<? if(!$this->session->user('session variable for login'))redirect('module that uses header_outside','location')?>
<html>
//your code 
```

这就是如何限制用户访问需要登录的模块的方式。

# ruby-on-rails - 发生验证错误时选择框不保留参数值 - Rails 3

> ID：13282241
> 
> 赞同：2
> 
> 时间：2012-11-08T04:07:05.413
> 
> 标签：ruby-on-rails

我遇到的问题是，如果发生验证错误，我的视图中的选择框不会保留选择的值。

我有具有多对多关联的业务和类别关系

`category.rb`

```
class Category < ActiveRecord::Base
    has_and_belongs_to_many :businesses 
```

`business.rb`

```
class Business < ActiveRecord::Base
    has_and_belongs_to_many :categories 
```

在我看来，我有一个选择字段

```
<%= f.select(:category_tokens, Category.all.collect {|c| [ c.name, c.id ] }, { :include_blank => "Select Category", :selected => params['category'] }}) %> 
```

我可以使用`business.categories`which return 和 array 访问控制台中的业务类别。

在我看来，要对我添加的参数进行故障排除。

```
<%= @business.categories %>
<%= @business.attributes.inspect %>
<%= @business.user.attributes.inspect %> 
```

这些节目的输出提供以下内容

```
[#<Category id: 2, name: "kitchen renovations", created_at: "2012-10-19 14:16:52", updated_at: "2012-10-19 14:16:52">]

{"id"=>nil, "business_name"=>"", ... additional attributes}

{"id"=>nil, "email"=>"", ... additional attributes} 
```

参数哈希看起来像这样

```
Processing by BusinessesController#create as HTML
Parameters: {"utf8"=>"✓",
"authenticity_token"=>"fVz1mJZI8QT/HYKRph8YTvzRec0IVV0RS55v5QD5SL0=", 
"business"=>{"category_tokens"=>"2", 
"location"=>"", "service_area"=>"20", 
"business_name"=>"", "abn_number"=>"", 
"business_description"=>"", 
"address"=>"", "suburb"=>"", 
"notification_type"=>"", 
"user_attributes"=>{"first_name"=>"", "phone"=>"", "email"=>"", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}, "commit"=>"Sign up my Business"} 
```

因此正在设置类别，但我不确定如何将其添加到视图中的选择中，以便在发生验证错误时将该类别用作选择值。

编辑——添加控制器代码——

```
class BusinessesController < ApplicationController

  def new
    @business = Business.new
    @business.build_user
  end

  def create
    @business = Business.new(params[:business])
     respond_to do |format|
      if @business.save
         cookies[:auth_token] = @business.user.auth_token
      format.html { redirect_to jobs_users_path, notice: 'Your business was successfully created.' }
   else
     format.html { render action: "new" }
   end
 end 
```

结尾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T04:15:42.677

我通过进行一些简单的更改来解决此问题。

在我的控制器中，我添加了以下内容

```
def create
  #...
  category = (params[:business][:category_tokens])
  @category = category
  #...
end 
```

然后在我的视图中将其用于所选选项。

```
<%= f.select(:category_tokens, Category.all.collect {|c| [ c.name, c.id ] }, { :include_blank => "Select Category", :selected => @category }}) %> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-01-31T13:36:42.437

从 2019 年开始更新，如果您的 f.select 看起来像这样：

```
<%= f.select(:sector , options_for_select([["Please select", "Please select"], ["Energy", "Energy"], ["Metals","Metals"], ["Agriculture","Agriculture"], ["Renewables","Renewables"], ["Natural Ressources","Natural Ressources"], ["Other","Other"]])) %> 
```

您所要做的就是删除 options_for_select( ... )，如果发生验证错误，页面将“记住”您选择的内容。

```
<%= f.select(:sector , [["Please select", "Please select"], ["Energy", "Energy"], ["Metals","Metals"], ["Agriculture","Agriculture"], ["Renewables","Renewables"], ["Natural Ressources","Natural Ressources"], ["Other","Other"]]) %> 
```

我不知道这如何与多选输入一起使用。为了提高可读性，我还使用了自己的示例。

# java - 从 JNDI 查找获得的 EntityManager 已经关闭

> ID：13282242
> 
> 赞同：0
> 
> 时间：2012-11-08T04:07:10.667
> 
> 标签：java, hibernate, jpa, java-ee-5, glassfish-2.x

对于（Glassfish v2.1），来自会话 bean 的两个单独请求的两个 RuntimeExceptions：

*   “org.hibernate.SessionException：会话已关闭！”

> org.hibernate.SessionException：会话已关闭！在 org.hibernate.impl.AbstractSessionImpl.errorIfClosed(AbstractSessionImpl.java:72) 在 org.hibernate.impl.SessionImpl.list(SessionImpl.java:1138) 在 org.hibernate.impl.QueryImpl.list(QueryImpl.java:102 ) 在 org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:67) [包装] javax.persistence.PersistenceException: org.hibernate.SessionException: 会话已关闭！在 org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:76) 的 org.hibernate.ejb.AbstractEntityManagerImpl.throwPersistenceException(AbstractEntityManagerImpl.java:614)

*   “java.lang.IllegalStateException：EntityManager 已关闭”

> java.lang.IllegalStateException：EntityManager 在 com.sun.enterprise.util.QueryWrapper.clearDelegates(QueryWrapper.java:460) 在 com.sun 的 org.hibernate.ejb.EntityManagerImpl.close(EntityManagerImpl.java:97) 处关闭。 enterprise.util.QueryWrapper.getResultList(QueryWrapper.java:198)

这两个 EntityManager 都是通过使用 JTA 的 JNDI 查找 (java:comp:/env/TargetSitePersistenceContext) 获得的（persistence.xml 中未定义事务类型属性）。& SQL Server 2008 w/ sqljdbc4.jar

代码只是做ff：

```
query = entityManager.createQuery();
query.getResultList(); 
```

就是这样。如果我没记错的话，我相信应用程序容器会处理打开/提交/回滚/关闭，所以我们不应该有任何 entityManager.close()。

什么可能导致这两个运行时异常？

GF 何时实际打开/关闭 EntityManager？

有什么区别：

*   通过 JNDI 查找获得的 EntityManager
*   通过@PersistenceContext 注入？（到目前为止，这种风格没有问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:51:35.850

在所有条件相同的情况下，@PersistenceContext 注入和 JNDI 查找应该返回相同的 EntityManager。因此，这可能是 GlassFish 的一个错误，您可能想要接触它们。但请确保提供所有上下文，例如用于注入的会话 bean 类型、事务与否等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:56:44.643

用注解标记你的 bean`@TransactionAttribute`

```
@Stateless
@TransactionAttribute(TransactionAttributeType.MANDATORY)
public class Repo implements IRepo
{ 
```

容器管理事务受此参数调节

# expression - 如何为我的字符串修复这个正则表达式？

> ID：13282243
> 
> 赞同：0
> 
> 时间：2012-11-08T04:07:20.660
> 
> 标签：expression

如果将特定字符串作为输入，是否有任何工具可以为我构建通用正则表达式？

目前，**我将满足于实际的正则表达式**而不是工具。

请注意，在我的情况下，我可以在尖括号中使用 HOST 来表示正则表达式中的 IP 地址。我的目标是为名为“fail2ban”的工具构建一个正则表达式。

假设我的字符串是 [2012-11-06 22:52:40] NOTICE[4339] chan_sip.c: 从 '"202"' 为 '111.111.11.1:9546' 注册失败 - 密码错误

（看起来这个论坛显然正在删除符号和/或以其他方式弄乱我的字符串，所以我将使用以下约定，以便您可以看到它应该说的内容：DQ 代表双引号“实验室代表左角BRACKET < RAB 表示直角括号 > AT 表示 at 符号 @ )

使用上述约定：

[2012-11-06 22:52:40] 通知 [4339] chan_sip.c：从 'DQ 202 DQ LAB sip:202 AT emailAddress RAB' 注册失败，用于 '111.111.11.1:9546' - 密码错误

请注意，我在符号之间添加了空格以增加可读性。它们不是原始字符串的一部分。

我试过 NOTICE.* 。*: 从 '.* ' failed for ':.*' - 密码错误

和：注意。*。*: 从 '\".* \"' 注册失败 ':.*' - 密码错误

请问什么是正确的正则表达式？

先感谢您

～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

旁注：如果不存在，如果有人可以构建一个工具来自动构建给定特定字符串的正则表达式，那肯定会很好。

这就是我的想法。

下面的 C 库函数可以轻松地解析该字符串`isalphanum(c), isalpha(c), isdigit(c), ispunct(c), isspace(c)`。

困难的部分是构建一个正则表达式生成器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:20:29.033

尝试

`NOTICE.+: Registration from '.+' failed for '.+' - Wrong password`

我用来充实的工具是[RegExr](http://gskinner.com/RegExr/ "正则表达式")。

编辑：

我用谷歌搜索“正则表达式生成器”并遇到了[这个结果](http://txt2re.com/)。这可能是您正在寻找的（自我：添加到书签的链接）

# php - PHP DB2 连接错误

> ID：13282245
> 
> 赞同：0
> 
> 时间：2012-11-08T04:07:23.493
> 
> 标签：php, connection, db2

我在连接 IBM DB2 时遇到以下错误。

```
Connection failed.[unixODBC][Driver Manager]Data source name not found, and no default driver specified SQLCODE=0 
```

这是我的 phpinfo 中 db2 的配置。

```
IBM DB2, Cloudscape and Apache Derby support:   enabled
Module release :    1.9.4
Module revision :   $Revision: 327944 $
Binary data mode (ibm_db2.binmode) :    DB2_BINARY
DB2 instance name (ibm_db2.instance_name) ; no value 
```

请帮我连接数据库。

脚本如下。

```
$database = 'dbT';
$user = 'user';
$password = 'pswd';
$hostname = '10.250.10.11';
$port = 456;

$conn_string = "DRIVER={IBM DB2 ODBC DRIVER};DATABASE=$database;" .
  "HOSTNAME=$hostname;PORT=$port;PROTOCOL=TCPIP;UID=$user;PWD=$password;";
$conn = db2_connect($conn_string, '', '');

print $conn;

if ($conn) {
    echo "Connection succeeded.";
    db2_close($conn);
}
else {
print($conn);
    echo "Connection failed.";
    die(db2_conn_errormsg());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T13:06:29.057

> 未找到数据源名称，并且未指定默认驱动程序 SQLCODE=0

unixODBC 驱动程序管理器在其 odbcinst.ini 文件的驱动程序列表中找不到名为 [IBM DB2 ODBC DRIVER] 的驱动程序。

跑 ：-

```
odbcinst -j 
```

这将显示如下内容：-

```
unixODBC 2.3.0
DRIVERS............: /etc/odbcinst.ini
SYSTEM DATA SOURCES: /etc/odbc.ini
FILE DATA SOURCES..: /etc/ODBCDataSources
USER DATA SOURCES..: /home/richard/.odbc.ini
SQLULEN Size.......: 4
SQLLEN Size........: 4
SQLSETPOSIROW Size.: 2 
```

查看数据源的“驱动程序”文件。如果它不存在，则需要添加一个。如果存在，请检查被引用的库是否在您的机器库路径中。

# javascript - 如何为动态 Rails 路线呈现 JSON 字符串？

> ID：13282246
> 
> 赞同：0
> 
> 时间：2012-11-08T04:07:29.463
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, json

我一直在为帖子设置标签系统。我正在使用很棒的 Select2 gem。我注意到的一件事是，当我去编辑一篇文章时，**该文章的标签没有显示出来。**我找到了一种**使用 val() 函数来预填充标签的方法**。

但是，因为我的**编辑路径**users/:user_id/post/:id**本质**上是**动态**的，**所以很难为 * *.getJSON****使用字符串。**

我该如何做或做不同的事情？

请注意，我故意没有为第一个 .getJSON 填写正确的 JSON 路径。这是我遇到困难的地方。

```
var items = [];
var prepopulate = [];

$.getJSON('http://localhost:3000/[JSON PATH HERE]', function(data) {
    $.each(data, function(i, obj) {
        return prepopulate.push(obj.name);
        });

  $.getJSON('http://localhost:3000/tags.json', function(data) {
      $.each(data, function(i, obj) {
          return items.push(obj.name);
          });
      $("#post_tag_ids").val(prepopulate).select2({
    width: "element",
    tags: items,
    tokenSeparators: [",", " "]
    });
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:08:57.047

@bricker，没关系.. 使用 RABL 可以轻松完成。对于任何有兴趣的人，请查看[http://railscasts.com/episodes/322-rabl](http://railscasts.com/episodes/322-rabl)

# android - 从对话框调用 Web 视图客户端未执行

> ID：13282261
> 
> 赞同：1
> 
> 时间：2012-11-08T04:09:33.377
> 
> 标签：android

我的应用程序是动态创建 Web 视图，还设置动态创建的 Web 视图宽度、高度和 x、y 位置。我正在设置宽度、高度、x、y 位置并在自定义对话框上调用 Web 视图客户端。但是 web 视图客户端没有调用。当我尝试不使用 Web 视图客户端时，指定的 URL 会加载到默认浏览器中。但我的主要要求是重新调整 Web 视图的大小并将其加载到我的活动中。当运行程序 web 视图以白色显示但 url 没有加载 web 客户端时，应该覆盖不调用的方法。我的代码如下

```
try
{
    wv[tmpm].getSettings().setJavaScriptEnabled(true);
    wv[tmpm].setWebViewClient(new Myweb());
    //wv[tmpm].setWebViewClient(new Myweb);
    //wv[tmpm].loadUrl(url);
}
Myweb class given below

private class Myweb extends WebViewClient
{
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        Log.d("In extends webview client","HIiiiiiiiiiiiiiii");
        view.loadUrl(url);
        return true;};
    }
} 
```

登录 shouldoverrideUrl 未显示在 logcat 中，当我触摸 Web 视图时，我在 log cat 中收到错误“不应发生：未找到基于 rect 的测试节点”。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T09:02:30.980

我自己解决了........下面给出的正确代码..

```
 try

   {

      wv[tmpm].setWebViewClient(new WebViewClient());
      wv[tmpm].requestFocus();
      wv[tmpm].getSettings().setJavaScriptEnabled(true);
      wv[tmpm].loadUrl(url);
   } 
```

下面给出的 Myweb 类

```
 private class Myweb extends WebViewClient
     {
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            try
            {
                Log.d("In extends webview client","HIiiiiiiiiiiiiiii");
                view.loadUrl(url);
            }
            catch (Exception e) {
                // TODO: handle exception
                e.printStackTrace();
            }
            return true;

        }
        @Override
        public void onPageFinished(WebView view, String url) {
            try {

            } catch (Exception we) {
                we.printStackTrace();
            }
            super.onPageFinished(view, url);
        }

     } 
```

# apache - 试图从 htaccess 规则中排除 URL

> ID：13282262
> 
> 赞同：7
> 
> 时间：2012-11-08T04:09:37.873
> 
> 标签：apache, .htaccess

我正在尝试在我的 httpd.conf 中为服务器上的所有站点设置一个全局移动重定向，并且只需要编辑一次，而不是 92 次。所有移动站点都将重定向到一个位置，这很好。

但是，我想从重定向中完全排除一个特定的 URL。这是我到目前为止不起作用并导致重定向循环的内容：

```
RewriteEngine On
RewriteCond %{HTTP_USER_AGENT} ^.*iphone|ipod|blackberry|android|sgh|sonyericsson|psp|mot|htc|lg|nokia|palm|treo|j2me|webos|smartphone|symbian.*$ [NC]
RewriteCond %{REQUEST_URI} !^http://www.example.com/mobile [NC]
RewriteRule ^(.*) http://www.example.com/mobile [R=302,L] 
```

谁能弄清楚为什么它会导致该特定网址上的重定向循环？它只是该域上的一个文件夹，其中仅包含一个 .htaccess`RewriteEngine off`和一个带有 header() 重定向调用的 index.php 文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T16:29:30.200

该`%{REQUEST_URI}`变量**永远不会**看起来像`http://www.example.com/mobile`，因为它永远不会包含协议（“http://”位）或主机信息（“www.example.com”` 部分）。您*只需要 URI 部分*：

```
RewriteCond %{REQUEST_URI} !^/mobile 
```

如果您还需要检查主机名，则需要一个附加条件：

```
RewriteCond %{HTTP_HOST} ^www\.example\.com$ [NC] 
```

# java - NullPointerException 使用链表时出错

> ID：13282270
> 
> 赞同：0
> 
> 时间：2012-11-08T04:10:50.380
> 
> 标签：java, recursion, nullpointerexception, linked-list

我刚刚完成了这个程序的工作并对其进行了编译，但它在用户输入后中断并给了我这个：

请在键盘上输入 0 个或多个值 12 4 3 2 1

```
Exception in thread "main" java.lang.NullPointerException
at Search.buildList(Search.java:41)
at Search.main(Search.java:10) 
```

这是代码：

```
import java.io.*; 
import java.util.*;

public class Search { 
public static void main(String argv[]) throws IOException { 

Scanner stdin = new Scanner(System.in);
System.out.println("Please input 0 or more values at keyboard");
Node head = buildList();

System.out.println("Now printing list");
printList(head);
System.out.println("\nWhat key in list are you searching for? ");
int key = stdin.nextInt();
System.out.print("Your key was ");
if (search(head, key))
System.out.println("found.");
else
System.out.println("not found.");

}

private static void printList(Node head)
{
            if (head != null)
            {
                    System.out.print(head.getItem() + " ");
                    printList(head.getNext());
            }
}

private static Node buildList() throws IOException
{
 // Post : Inserts 0 or more numerical values from keyboard into list
//          using the Scanner class and returns head of list

Scanner input = new Scanner(System.in);
Node head = null;
Node first = new Node(input.nextInt());
head.setNext(first);
while(input.hasNext())
{    
insert(first, input.nextInt());
/*
  Node curr = new Node(input.nextInt());
  Node prev = head;
  while (true)
  {
prev = prev.getNext();
if ((int)curr.getItem() < (int)prev.getItem())
{
  head.setNext(curr);
  curr.setNext(prev);
  break;
}
if (prev.getNext() == null)
{
  prev.setNext(curr);
  break;
}
  }*/
}
return first;
} 

private static Node insert(Node head, Comparable newValue)
{
Node prev, curr = head;

for (prev = null,  curr = head;
         curr != null && newValue.compareTo(curr.getItem()) > 0;
         prev = curr, curr = curr.getNext() ) {}

    Node newNode = new Node(newValue, curr);
if (prev != null)
    {
        prev.setNext(newNode);
    return head;
    }
else
    return newNode;
}

private static boolean search(Node head, Comparable key)
{
 // PRE:  head points to the front of linked list;  list may be
 //         empty or non-empty;  key is item searching for
 // POST: returns true or false regarding whether key is found in
 //         list
if (head == null){
    return false;}
else if (head.getItem().equals(key)){
    return true;}
else {
    return search(head.getNext(), key);
}

} 

} 
```

有任何想法吗？

输出应类似于以下内容：

请在键盘上输入 0 个或多个值

12 4 -1 5 3 0 2

现在打印列表

-1 0 2 3 4 5 12 您在寻找什么键？15 未找到您的密钥

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T05:03:19.387

```
Node head = null; 
```

每当您在空对象上调用方法时，您都会得到一个 nullPointerException 。这`head.setNext(first);`就是给您异常的原因。所以你可以代替这个

```
Node head = new Node(); 
```

你将避免 NullPointerException 。

根据您的要求，您应该这样做。

```
private static Node buildList() throws IOException
{
 // Post : Inserts 0 or more numerical values from keyboard into list
//          using the Scanner class and returns head of list

Scanner input = new Scanner(System.in);
Node head = null;
Node first = new Node(input.nextInt());
head=first; //assigning the first value to head
while(input.hasNext())
{    
insert(first, input.nextInt());
head.setNext(first);//insert the node in the list
}
return first;
} 
```

**注意：**我假设*setNext()*将节点插入列表中的适当位置，而不是直接插入头节点的下一个位置（否则，无论插入多少数字，您都只会得到 2 个节点）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:16:57.920

`Node head = null;`

上面的行将使**头部**`object reference variable`类型为l，现在**调用此对象引用变量上的任何方法**`Node`都将导致.`nul`**`NullPointerException`**

 **`Node head = new Node();`

该行将是更好的方法，因为这将**防止**`NullPointerException`.**

# ios - SQLite DateTime 列接受任何值...正常吗？

> ID：13282272
> 
> 赞同：1
> 
> 时间：2012-11-08T04:11:06.387
> 
> 标签：ios, sql, database, sqlite

我有一个使用 SQLite 的 iOS 应用程序。我使用 FireFox 和插件 SQLite Manager 来管理数据库。

现在我有一个这样的表：

```
CREATE TABLE "someTable" ("id" INTEGER NOT NULL , "timeOfEvent" DATETIME NOT NULL) 
```

但是，我几乎可以在 DateTime 列中输入我想要的任何值，如下所示：

```
INSERT INTO sometable (id, timeOfEvent) VALUES (1,'2012-99-99')
INSERT INTO sometable (id, timeOfEvent) VALUES (2,'yyyy-mm-dd')
...etc 
```

为什么这可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T04:15:14.793

根据文档：[SQLite-数据类型](http://www.sqlite.org/datatype3.html)

> SQLite**没有为存储日期**和/或时间预留存储类。相反，SQLite 的内置日期和时间函数能够将日期和时间存储为 TEXT、REAL 或 INTEGER 值：
> 
> *   **TEXT 作为 ISO8601 字符串**
> *   REAL 作为儒略日数字，根据预测的公历，自公元前 4714 年 11 月 24 日格林威治中午以来的天数。
> *   INTEGER 作为 Unix 时间，自 1970-01-01 00:00:00 UTC 以来的秒数。

因此 SQLite 依赖于方法来转换值。它没有自己的数据类型来限制日期/时间类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T04:14:53.983

SQLite 是动态的。从[SQLite 查询语言 - 创建表](http://sqlite.com/lang_createtable.html)

> 与大多数 SQL 数据库不同，SQLite 不会根据声明的列类型来限制可以插入到列中的数据类型。相反，SQLite 使用动态类型。列的声明类型仅用于确定列的亲和性。

# c# - 如何从“多路复用”事件处理程序获取发件人项目的索引？

> ID：13282273
> 
> 赞同：1
> 
> 时间：2012-11-08T04:11:37.713
> 
> 标签：c#, event-handling, windows-8

我有一个单独的事件处理程序，用于我放入 a`OnDownloadProgress`的有序项目列表，我想知道在事件处理程序中获取发送 BitmapImage 的索引的最佳方法。`BitmapImage``FlipView`

使用从 派生的对象很容易做这种事情`FrameworkElement`，因为它们有一个`Tag`属性，您可以将其设置为索引（或任何您想要的）。但是 OnDownloadProgress 事件不是由 发送的`Image`，而是由 BitmapImage 发送的，并且没有`Tag`.

我可以想出几种方法来实现这一点，但它们看起来很笨拙或沉重。

一种方法是将 Image 设置`Tag`为 BitmapImage 实例，然后在处理程序中搜索该实例，直到找到发送者：

```
private FlipView PhotosView;

private void AddImages(List<string> photoUrls)
{
    PhotosView.Items.Clear();
    foreach (var url in photoUrls)
    {
        var image = new Image();
        var source = new BitmapImage(new Uri(url));
        source.DownloadProgress += OnDownloadProgress;
        image.Source = source;
        image.Tag = source;
        PhotosView.Items.Add(image);
    }
}

private void OnDownloadProgress(object sender, DownloadProgressEventArgs args)
{
    int n = 0;
    foreach (var item in PhotosView.Items)
    {
        var image = (Image)item;
        if (image.Tag == sender)
        {
            Debug.WriteLine("image {0} progress={1}%", n, args.Progress);
            break;
        }
        n++;
    }
} 
```

但这似乎有点不对劲。更好的方法是维护 BitmapImage 实例到索引 ( `Dictionary<BitmapImage, int>`) 的映射，虽然速度更快，但似乎也有点重。

或者，最后，我可以子类化`BitmapImage`并添加一个`Tag`or`Index`成员。哦等等……这是一`sealed`堂课。刮那个。

有没有更简单或更标准化的方法来做这种事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T04:20:06.923

你可以这样做：

```
private void AddImages(List<string> photoUrls)
{
    PhotosView.Items.Clear();
    int nextIndex = 0;
    foreach (var url in photoUrls)
    {
        int n = nextIndex++;
        var image = new Image();
        var source = new BitmapImage(new Uri(url));
        source.DownloadProgress += (sender, args) => 
        {
            Debug.WriteLine("image {0} progress={1}%", n, args.Progress);
        };
        image.Source = source;
        image.Tag = source;
        PhotosView.Items.Add(image);
    }
} 
```

# python - 生成具有多列的 .CSV - 使用字典？

> ID：13282278
> 
> 赞同：1
> 
> 时间：2012-11-08T04:12:17.973
> 
> 标签：python, csv, dictionary, set

我正在编写一个脚本来查看我的库存，将其与所有可能库存项目的主列表进行比较，并告诉我我缺少哪些项目。我的目标是一个 .csv 文件，其中第一列包含一个唯一的键整数，然后其余几列将具有与该键相关的数据。例如，我的最终目标 .csv 文件的三行片段可能如下所示：

```
100001,apple,fruit,medium,12,red
100002,carrot,vegetable,medium,10,orange
100005,radish,vegetable,small,10,red 
```

这方面的数据来自几个来源。第一，对 API 服务器的查询为我提供了库存中物品的键列表。第二，我将 .csv 文件读入一个字典，该字典将所有可能键的键与项目名称相匹配。此 .csv 文件的前 5 行的片段可能如下所示：

```
100001,apple
100002,carrot
100003,pear
100004,banana
100005,radish 
```

请注意，我的库存列表中的任何键将如何在这两个列 .csv 文件中找到，该文件提供所有键及其相应的项目名称，并且此列表减去我手头的库存会产生我正在寻找的东西（这是我需要的库存要得到）。

到目前为止，我可以获得一个 .csv 文件，其中仅包含我在库存中没有的项目的键和项目名称。给出手头的库存清单，如下所示：

```
100003,100004 
```

我生成的 .csv 文件的片段如下所示：

```
100001,apple
100002,carrot
100005,radish 
```

这意味着我的库存中有梨和香蕉（因此它们不在此 .csv 文件中。）

为了得到这个，我有一个函数可以在给定一个看起来像这样的项目 id 时获取项目名称：

```
def getNames(id_to_name, ids):
    return [id_to_name[id] for id in ids] 
```

然后是一个函数，它从我的库存服务器 API 调用中将键列表作为整数提供，该调用返回一个列表，我已经像这样运行这个函数：

```
invlist = ServerApiCallFunction(AppropriateInfo) 
```

第三个函数将此 invlist 作为其输入，并返回我没有的项目的键（项目 ID）和名称的字典。它还将这个 dict 的信息写入 .csv 文件。我正在使用 set1 - set2 方法来执行此操作。它看起来像这样：

```
def InventoryNumbers(inventory):
    with open(csvfile,'w') as c:
        c.write('InvName' + ',InvID' + '\n')
    missinginvnames = []
    with open("KeyAndItemNameTwoColumns.csv","rb") as fp:
        reader = csv.reader(fp, skipinitialspace=True)
        fp.readline() # skip header
        invidsandnames = {int(id): str.upper(name) for id, name in reader}
    invids = set(invidsandnames.keys())
    invnames = set(invidsandnames.values())
    invonhandset = set(inventory)
    missinginvidsset = invids - invonhandset
    missinginvids = list(missinginvidsset)
    missinginvnames = getNames(invidsandnames, missinginvids)
    missinginvnameswithids = dict(zip(missinginvnames, missinginvids))
    print missinginvnameswithids
    with open(csvfile,'a') as c:
        for invname, invid in missinginvnameswithids.iteritems():
            c.write(invname + ',' + str(invid) + '\n')

    return missinginvnameswithids 
```

然后我这样称呼：

```
InventoryNumbers(invlist) 
```

有了这个解释，现在开始我的问题。我想通过添加其他列来扩展此输出 .csv 文件中的数据。这方面的数据将从另一个 .csv 文件中提取，其中的一个片段如下所示：

```
100001,fruit,medium,12,red
100002,vegetable,medium,10,orange
100003,fruit,medium,14,green
100004,fruit,medium,12,yellow
100005,vegetable,small,10,red 
```

请注意，这不包含项目名称（因此我必须从只有两列键和项目名称的不同 .csv 文件中提取它）但它确实使用相同的键。我正在寻找一种方法来引入这些额外信息，以便我的最终 .csv 文件不仅会告诉我我没有库存的物品的键（即物品 ID）和物品名称，而且还会有类型、大小、数字和颜色列。

我看过的一个选项是集合中的[defaultdict](http://docs.python.org/2/library/collections.html#defaultdict-examples)片段，但我不确定这是否是完成我想做的事情的最佳方式。如果我确实使用了这种方法，我不确定我将如何调用它来达到我想要的结果。如果其他方法更容易，我当然也愿意尝试。

如何获取我在库存中没有的项目的键和相应项目名称的字典，并将这些额外信息添加到其中，以便我可以将其全部输出到 .csv 文件？

编辑：当我输入这个时，我突然想到，我可能会通过创建一个新的单个 .csv 文件来让事情变得更容易，该文件的日期格式为键、项目名称、类型、大小、数字、颜色（基本上只是复制在项目名称列中的 .csv 中已经包含每个键的其他信息。）这样我只需要从一个 .csv 文件而不是两个文件中绘制。但是，即使我这样做了，我将如何仅根据那些不在库存中的物品的键来制作我想要的 .csv 文件？

回答：我在[这里](https://stackoverflow.com/questions/13294461/converting-dict-values-into-a-set-while-preserving-the-dict)发布了另一个关于如何实施我接受的解决方案的问题（因为它给了我一个值错误，因为我的 dict 值是字符串而不是开始的集合），我最终决定我想要一个列表而不是一个集合（以保留顺序。）我还最终将带有项目名称的列添加到包含所有其他数据的 .csv 文件中，这样我只需要从一个 .csv 文件中提取。也就是说，这部分代码现在看起来像这样：

```
MyDict = {}
infile = open('FileWithAllTheData.csv', 'r')
for line in infile.readlines():
    spl_line = line.split(',')
    if int(spl_line[0]) in missinginvids: #note that this is the list I was using as the keys for my dict which I was zipping together with a corresponding list of item names to make my dict before.
        MyDict.setdefault(int(spl_line[0]), list()).append(spl_line[1:])
print MyDict 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:24:34.970

听起来你需要的是一个将整数映射到集合的字典，即

`MyDict = {100001: set([apple]), 100002: set([carrot])}`

您可以添加更新：

`MyDict[100001].update([fruit])`

这会给你：`{100001: set([apple, fruit]), 100002: set([carrot])}`

另外，如果您有胡萝卜的属性列表...`[vegetable,orange]`

你可以说`MyDict[100002].update([vegetable, orange])`

并得到：`{100001: set([apple, fruit]), 100002: set([carrot, vegetable, orange])}`

这回答了你的问题了吗？

编辑：

读入 CSV...

```
infile = open('MyFile.csv', 'r')
for line in infile.readlines():
    spl_line = line.split(',')
    if int(spl_line[0]) in MyDict.keys():
        MyDict[spl_line[0]].update(spl_line[1:]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T04:33:23.680

这不是问题的答案，但这是简化当前代码的一种可能方法。

这：

```
invids = set(invidsandnames.keys())
invnames = set(invidsandnames.values())
invonhandset = set(inventory)
missinginvidsset = invids - invonhandset
missinginvids = list(missinginvidsset)
missinginvnames = getNames(invidsandnames, missinginvids)
missinginvnameswithids = dict(zip(missinginvnames, missinginvids)) 
```

可以替换为：

```
invonhandset = set(inventory)
missinginvnameswithids = {k: v for k, v in invidsandnames.iteritems() if k in in inventory} 
```

或者：

```
invonhandset = set(inventory)
for key in invidsandnames.keys():
    if key not in invonhandset:
        del invidsandnames[key]
missinginvnameswithids = invidsandnames 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T04:21:13.790

您是否考虑过制作一个临时 RDB（python 已内置[sqlite 支持](http://docs.python.org/2/library/sqlite3.html)）并且对于合理数量的项目，我认为您不会遇到性能问题。

我会将每个 CSV 文件和来自 web-api 的结果变成一个表（每个数据源一个表）。然后，您可以使用一些 SQL 查询 + 连接来做任何您想做的事情。获得所需数据后，您可以将其转储回 CSV。

# ruby-on-rails-3 - 使用 Carrierwave 复制带有关联图像的记录

> ID：13282280
> 
> 赞同：1
> 
> 时间：2012-11-08T04:12:44.790
> 
> 标签：ruby-on-rails-3, carrierwave, dup

我有一个应用程序，您可以在其中存储订单/发票。我正在构建一个简单的功能，您可以在其中为我的客户复制发票。我在我的 Order.rb 模型中编写了这个方法：

获取发票，复制相关的 lineitems，将新的 OrderID 添加到它们中......并对相关的图像执行相同的操作。

```
def self.duplicate_it(invoice)
  new_invoice = invoice.dup
  new_invoice.save

  invoice.lineitems.each do |l|
    new_lineitem = l.dup
    new_lineitem.order_id = new_invoice.id
    new_lineitem.save
  end

  invoice.images.each do |i|
    new_image = i.dup
    new_image.order_id = new_invoice.id
    new_image.save
  end

  return new_invoice
end 
```

不幸的是，您不能只`.dup`使用图像，因为我将图像存储在 S3 上，所以所有这些关联到期的东西。有没有办法使用它的 image_url 重新生成图像？

运行时我得到的错误如下。这告诉我并非所有相关的图像信息都被正确复制。

```
Showing /Users/bruceackerman/Dropbox/printavo/app/views/orders/_image-display.erb where line #3 raised:

undefined method `content_type' for nil:NilClass
Extracted source (around line #3):

1:  <% @order.images.each do |image| %>
2:      <% if image.image && image.image.file %>
3:          <% if image.image.file.content_type == "application/pdf" %>
4:              <%= link_to image_tag("/images/app/pdf.jpg", 
5:                      :class => 'invoice-image'),
6:                  image.image_url, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:11:46.327

我认为您可以执行以下操作

```
invoice.images.each do |i|
  new_image = new_invoice.images.new({ order_id: new_invoice.id })
  new_image.image.download!(i.image_url)
  new_image.store_image!
  new_image.save!
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T01:20:32.480

这实际上是我为订单上的每个 lineitem 所做的：

```
def self.duplicate_it(invoice)
    new_invoice = invoice.dup :include => {:lineitems => :images} do |original, kopy|
      kopy.image = original.image if kopy.is_a?(Image)
    end

    new_invoice.save!
    return new_invoice
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-19T09:53:54.850

有点晚了，但这是我的解决方案。我有太多的问题`.download!`

```
if @record.duplicable?
      new_record = @record.dup
      if new_record.save
        @record.uploads.each do |upload|
          new_image = new_record.uploads.new({ uploadable_id: new_record.id })
          new_image.filename = Rails.root.join('public'+upload.filename_url).open
          new_image.save!
        end
end 
```

这是我的`upload.rb`

```
class Upload < ActiveRecord::Base
  belongs_to :uploadable, polymorphic: true
  mount_uploader :filename, ImageUploader
end 
```

希望能帮助到你！

# android - cursor.moveToFirst() 总是返回 false

> ID：13282285
> 
> 赞同：2
> 
> 时间：2012-11-08T04:13:14.267
> 
> 标签：android, cursor, android-cursor

我在这里搜索了一段时间，没有任何帮助。我想这很简单，我正在做一些愚蠢的事情。所以，我让这个 DataBaseHelper 创建一个表并在其上放置两个值：

```
public class DatabaseHelper extends SQLiteOpenHelper {
    private static final String DATABASE_NAME = "db";
    public static final String PROPERTY = "property";
    public static final String VALUE = "value";

    public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, 1);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL("CREATE TABLE configs (property VARCHAR(15), value VARCHAR(10));");

        ContentValues cv=new ContentValues();

        cv.put(PROPERTY, "registered");
        cv.put(VALUE, "true");
        db.insert("configs", PROPERTY, cv);

        cv.put(PROPERTY, "test");
        cv.put(VALUE, "test");
        db.insert("configs", PROPERTY, cv);
    }
} 
```

在我的活动中，我正在尝试：

```
@Override
public void onCreate (Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.register);

    layout = (LinearLayout) findViewById(R.id.layoutRegister);

    db = (new DatabaseHelper(this)).getWritableDatabase();
    cursor = db.rawQuery("SELECT * FROM configs", 
            null);

    if (cursor.moveToFirst()) {
        debug = new TextView(this);
        debug.setText(cursor.getString(cursor.getColumnIndex("property")));
        layout.addView(debug);
    }
} 
```

它从不进入if。此外，当我尝试类似 cursor.getCount() 的东西时，我得到一个*android.content.res.Resource$NotFoundException: String resource ID #0x0*

我想这是一个简单的错误，但是......有什么帮助吗？=s

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T04:17:14.497

我理解你想在光标有值时设置文本，这样你就可以简单地做到这一点......

```
cursor = db.rawQuery("SELECT * FROM configs", null);

    if (cursor!=null && cursor.getCount()>0) {
        cursor.moveToFirst();
        debug = new TextView(this);
        debug.setText(cursor.getString(cursor.getColumnIndex("property")));
        layout.addView(debug);
    } 
```

关于

```
when I try something like cursor.getCount() I get a android.content.res.Resource$NotFoundException: String resource ID #0x0 
```

这是因为当您使用TextView 的[**setText()**](http://developer.android.com/reference/android/widget/TextView.html#setText%28int%29)时，如果您将参数作为整数传递，那么它将在 R.class 文件中查找，所以如果您想将文本设置为整数，您可以执行类似...

```
debug.setText(""+cursor.getCount()); 
```

或者

```
 debug.setText(String.valueOf(cursor.getCount())); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T04:21:24.257

如果您要查询使用**getReadableDatabase**而不是**getWritableDatabase**

而且总是**`cursor.close();`**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-08T04:18:57.557

用这个

```
cv.put(property, "registered");
cv.put(value, "true"); 
```

和

```
cv.put(property, "test");
cv.put(value, "test"); 
```

代替

```
cv.put(PROPERTY, "registered");
cv.put(VALUE, "true"); 
```

和

```
cv.put(PROPERTY, "test");
cv.put(VALUE, "test"); 
```

# html - 在换行符之间添加垂直空间

> ID：13282286
> 
> 赞同：4
> 
> 时间：2012-11-08T04:13:30.203
> 
> 标签：html, css

这似乎是一个常见的 CSS 问题，但由于某种原因，我找不到它的答案。

考虑以下代码：

```
<div style="width:50px;border:1px solid #000">
    THis is a looooooooong text. and it goes on and on and on and on and on and on and on and on and on and on
    <br/>
    2nd line
    <br/>
    3rd line 3rd line 3rd line 3rd line 3rd line 3rd line 3rd line 
    <br/>
    last line
</div> 
```

仅使用**CSS**我想在`<br/>`标签之间添加垂直空间。

line-height 适用于整个内容，并将 CSS 附加到`<br>`（即：br{ margin:10px 0}），似乎也不起作用（至少在 Chrome 中），所以我想知道这是否可能。

谢谢你。

[jsfiddle](http://jsfiddle.net/CCUsK/2/)

​</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T04:20:48.810

```
br
{
    content: " " !important;
    display: block !important;
    margin:30px;
} 
```

试试这个

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T04:21:35.473

你可以试试这个，也可以在 chrome 上工作，对 chrome`content: " "`有用，否则对边距很满意

[**演示**](http://jsfiddle.net/CCUsK/15/)

HTML

```
<div>
    THis is a looooooooong text. and it goes on and on and on and on and on and on and on and on and on and on
    <br/>
    2nd line
    <br/>
    3rd line 3rd line 3rd line 3rd line 3rd line 3rd line 3rd line 
    <br/>
    last line
</div> 
```

CSS

```
div{
    width:150px;
    border:1px solid #000;
    padding:5px;
}

br {
  content: " ";
  display: block;
  margin: 10px;
} 
```

​ ​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T04:23:03.367

是的，有可能。您需要了解几个相关的问题。

1）您正在使用边距。有时边距会根据内容折叠或删除。您是否尝试过使用填充？你会得到不同的结果。我手头没有任何直接链接，但请四处搜索并确保您了解边距和填充之间的重要区别。

2) 了解盒子模型。如果你不了解 box-model:border-box，那么你需要去研究它。css-tricks.com 的 Chris Coyier 有一篇关于它的文章。我指出它是因为它与此类问题直接相关。

3）显示：块我不确定，但我认为
可能默认为显示：内联。如果您将 display: block 设置为属性之一，您可以使用任何元素并始终使其像标准块 DIV 一样工作。再一次，Chris Coyier 在这方面有一些很好的信息。请确保您对展示有深刻的理解：规则及其注意事项。

只需添加 display: block 并使用边距或填充即可解决您的问题。如果没有，那我就错过了一些愚蠢的东西。我以前做过这种事情。事实上，我已经
使用 display: none 从 Wordpress 主题标记中完全删除了标签，以完全重新格式化图像库输出。

# android - 在 Android 中使用 Ksoap2 连接到 C# asp.net

> ID：13282288
> 
> 赞同：0
> 
> 时间：2012-11-08T04:13:33.067
> 
> 标签：android, ksoap2

我正在尝试连接到我的 asp Web 服务并使用此代码获取响应。它没有给出错误，但它也没有连接到我的网络服务。谁能指出我的错误？谢谢

```
public class MainActivity extends Activity {

    private static final String SOAP_ACTION = "http://tempuri.org/MyFirstWebMethod";
    private static final String OPERATION_NAME = "MyFirstWebMethod";
    private static final String WSDL_TARGET_NAMESPACE = "http://tempuri.org/";
    private static final String SOAP_ADDRESS = "http://10.0.2.2:1595/test.asmx";
    String name = "Test";
    String last = "Me";
    String result;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        ((Button) findViewById(R.id.btngo)).setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                 SoapObject request = new SoapObject(WSDL_TARGET_NAMESPACE, OPERATION_NAME); 
                 request.addProperty("name", name);
                 request.addProperty("last", last);
                 SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                 envelope.dotNet=true;
                 envelope.setOutputSoapObject(request); 
                 HttpTransportSE ht = new HttpTransportSE(SOAP_ADDRESS);
                 try {
                 ht.call(SOAP_ACTION, envelope);
                 SoapObject response  = (SoapObject)envelope.getResponse();

                 result = response.getProperty(1).toString();

                 } 
                 catch (Exception e) {
                 e.printStackTrace();
                 }   

                Toast.makeText(getBaseContext(), ""+result, Toast.LENGTH_LONG).show();
            }
        });

    }
} 
```

原木猫是这样说的

```
11-08 13:15:00.344: I/Choreographer(977): Skipped 58 frames!  The application may be doing too much work on its main thread.
11-08 13:15:00.405: W/System.err(977): android.os.NetworkOnMainThreadException
11-08 13:15:00.405: W/System.err(977):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
11-08 13:15:00.413: W/System.err(977):  at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
11-08 13:15:00.413: W/System.err(977):  at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
11-08 13:15:00.413: W/System.err(977):  at libcore.io.IoBridge.connect(IoBridge.java:112)
11-08 13:15:00.413: W/System.err(977):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
11-08 13:15:00.413: W/System.err(977):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
11-08 13:15:00.413: W/System.err(977):  at java.net.Socket.connect(Socket.java:842)
11-08 13:15:00.413: W/System.err(977):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:76)
11-08 13:15:00.413: W/System.err(977):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
11-08 13:15:00.413: W/System.err(977):  at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:341)
11-08 13:15:00.413: W/System.err(977):  at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
11-08 13:15:00.413: W/System.err(977):  at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
11-08 13:15:00.413: W/System.err(977):  at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
11-08 13:15:00.413: W/System.err(977):  at libcore.net.http.HttpEngine.connect(HttpEngine.java:310)
11-08 13:15:00.413: W/System.err(977):  at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
11-08 13:15:00.437: W/System.err(977):  at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
11-08 13:15:00.437: W/System.err(977):  at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
11-08 13:15:00.437: W/System.err(977):  at org.ksoap2.transport.ServiceConnectionSE.connect(ServiceConnectionSE.java:75)
11-08 13:15:00.437: W/System.err(977):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:136)
11-08 13:15:00.437: W/System.err(977):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:90)
11-08 13:15:00.437: W/System.err(977):  at com.example.xmlparser.MainActivity$1.onClick(MainActivity.java:39)
11-08 13:15:00.443: W/System.err(977):  at android.view.View.performClick(View.java:4084)
11-08 13:15:00.443: W/System.err(977):  at android.view.View$PerformClick.run(View.java:16966)
11-08 13:15:00.443: W/System.err(977):  at android.os.Handler.handleCallback(Handler.java:615)
11-08 13:15:00.443: W/System.err(977):  at android.os.Handler.dispatchMessage(Handler.java:92)
11-08 13:15:00.443: W/System.err(977):  at android.os.Looper.loop(Looper.java:137)
11-08 13:15:00.443: W/System.err(977):  at android.app.ActivityThread.main(ActivityThread.java:4745)
11-08 13:15:00.443: W/System.err(977):  at java.lang.reflect.Method.invokeNative(Native Method)
11-08 13:15:00.453: W/System.err(977):  at java.lang.reflect.Method.invoke(Method.java:511)
11-08 13:15:00.453: W/System.err(977):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-08 13:15:00.453: W/System.err(977):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-08 13:15:00.453: W/System.err(977):  at dalvik.system.NativeStart.main(Native Method)
11-08 13:15:00.618: I/Choreographer(977): Skipped 49 frames!  The application may be doing too much work on its main thread. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T05:54:00.430

```
Sucessful Connection with Asp.net Webservice-----
package ProductVerificationCard.in;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class AdminLogin extends Activity {
    /** Called when the activity is first created. */
    Button btn_ok;
    TextView textView;
    private static final String SOAP_ACTION = "http://tempuri.org/Login";

    private static final String OPERATION_NAME = "Login";

    private static final String WSDL_TARGET_NAMESPACE = "http://tempuri.org/";

    private static final String SOAP_ADDRESS = "http://10.0.2.2/new/WebService.asmx";
    String s;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        btn_ok=(Button) findViewById(R.id.btn_login);
        textView=(TextView) findViewById(R.id.tv_error);

        btn_ok.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                SoapObject request = new SoapObject(WSDL_TARGET_NAMESPACE,
                        OPERATION_NAME);

                        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                        SoapEnvelope.VER11);
                        envelope.dotNet = true;

                        envelope.setOutputSoapObject(request);

                        HttpTransportSE httpTransport = new HttpTransportSE(SOAP_ADDRESS);

                        try

                        {

                        httpTransport.call(SOAP_ACTION, envelope);

                        Object response = envelope.getResponse();

                        //textView.setText(response.toString());
                         s=response.toString();
                         if(s=="true")
                         {
                             Intent intent=new Intent(AdminLogin.this,MenuForm.class);
                                startActivity(intent);

                         }

                         else
                         {
                             textView.setText("Enter Valid Username or Password");
                         }
                        }

                        catch (Exception exception)

                        {

                        textView.setText(exception.toString());

                        }
                // TODO Auto-generated method stub
                }
        });

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:59:23.370

你认为“http://10.0.2.2:1595”的网络服务可以公开访问吗？（在我的选项中否）。尝试将其托管在公共 IP 上，然后尝试 . 您的代码似乎没问题。

# java - 是否可以将数字数据类型转换为字符串以在 Java 中输出？

> ID：13282289
> 
> 赞同：2
> 
> 时间：2012-11-08T04:13:52.073
> 
> 标签：java, string, methods, return, numeric

我是一个想要调整项目的初学者程序员。我没有包含代码，因为我不知道从哪里开始。基本上，我正在捕获不同机票类别的输入。如：类型1为一等舱，2为商务舱，3为经济舱。然后通过 if else 语句运行输入，以根据类别确定每张票的成本。在计算出价格并传递给另一个计算折扣率的方法后，我想在输出窗口中显示类类型。

为了更清楚起见，它会说类似，（名称+“您的班级类型是：” + classType +“您的折扣价是：” + discountPrice +“您的finalPrice是：” + finalPrice）.....加上所有格式优雅。我希望 classType 显示实际单词，而不仅仅是“1”“2”或“3”。至少，我已经能够捕获输入并分配价格然后计算。我只是希望在这样做之后我可以返回一个字符串值而不是数字类型。对于那些提供帮助的人，非常感谢你，请记住我是一个菜鸟，没有机会学习数组和比这更复杂的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:17:10.033

由于这是一个足够简单的场景，您可以执行以下操作：

```
int typeNum; // This is what holds 1, 2, 3 etc for the type of ticket
             // 0 is used, so we'll just put a "NONE" as the string for it
String classType[] = {"NONE", "First Class", "Business", "Economy"};
...
System.out.println(name + 
                   "Your class type is: " + classType[typeNum] + 
                   "Your discount price is: " + discountPrice + 
                   "Your finalPrice is:" + finalPrice); 
```

进行类型到字符串映射（并且通常只使用类型）的“**正确**`enum`”方法是使用：[http ://docs.oracle.com/javase/tutorial/java/javaOO/enum.html](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

（**更新**）：根据要求在没有数组的情况下执行此操作：

```
int typeNum; // Still the int that should be either 1, 2, or 3 for type of ticket
...

String classType;

if ( typeNum == 1 ) {
    classType = "First Class";
} else if ( typeNum == 2 ) {
    classType = "Business";
} else if ( typeNum == 3 ) {
    classType = "Economy";
} else {
    classType = "(Unrecognized Ticket Type)";
}

System.out.println(name + 
                   "Your class type is: " + classType + 
                   "Your discount price is: " + discountPrice + 
                   "Your finalPrice is:" + finalPrice); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T04:22:53.117

您的班级类型似乎是`enum`. 例如：

```
public enum ClassType {

    FIRST_CLASS(1, "1st Class"),
    BUSINESS(2, "Business"),
    ECONOMY(3, "Economy");

    private final int code;
    private final String name;

    private ClassType(int code, String name) {
        this.code = code;
        this.name = name;
    }

    public String getName() {
        return name;
    }

    public static ClassType getByCode(int code) {
        for (ClassType classType : ClassType.values()) {
            if (classType.code == code) {
                return classType;
            }
        }
        throw new IllegalArgumentException();
    }
} 
```

如果您还没有了解枚举，可以从[Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)开始。

# python - Python函数从文本文件构建列表

> ID：13282298
> 
> 赞同：-1
> 
> 时间：2012-11-08T04:16:12.223
> 
> 标签：python, list, text-files

对于我的家庭作业，我需要编写这个函数的主体，使用注释作为我的要求。评论中提到的其他功能已提供给我：

```
def eventfreq(year,month):

'''
  Read DOT1000.txt and return a list of (d,ct)
  pairs, where d is a date object of the form
     datetime.date(A,B,C)
  having A equal to the year argument and 
  B equal to the month argument to eventfreq(year,month).
  The ct part of each pair is the number of records 
  that had a date equal to datetime.date(A,B,C).

  One more requirement:  sort the returned list 
  in increasing order by date (the sorted function will
  do this for you)

  Use fieldict("DOT1000.txt") to get the dictionary
  of tuples used for building the list of pairs
  that eventfreq(year,month) will return.
  ''' 
```

这是我的努力：

```
def eventfreq(year, month):
    N=fieldict('DOT1000.txt')[line][1]
    L = []  # empty List for accumulation
    for line in N:  # data file is standard input 

               st = N[1] # get datetime.date 
               (L[st] = L.get(st,0) + 1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:27:27.917

试着检查一下：

```
def eventfreq(year, month):
    dates = [dt for x, dt, y in fieldict('DOT1000.txt') if dt.year==year and dt.month==month]
    return [(dt, dates.count(dt)) for dt in set(dates) 
```

# jquery - 用jquery中的正则表达式替换部分img路径

> ID：13282299
> 
> 赞同：0
> 
> 时间：2012-11-08T04:16:14.770
> 
> 标签：jquery, regex, image, replace, src

我想浏览网站上的整个页面并用“/”替换相对的 img 路径。例如：

```
 $("body img").attr("src",function(){
        return this.src.replace("uploads","/uploads");
    }); 
```

但是，在相对路径可能与上述不同的情况下，我想使用正则表达式来解释所有不同的情况。我知道图像都将位于同一位置，但要替换的各种路径可能是“上传、../uploads 或 ../../uploads 等。

任何帮助，将不胜感激..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:26:12.840

用这个

```
$('img').each(function(){
    $(this).attr('src',$(this).attr('src').replace(/^/,"/"));
      $('body').append('<br />');
$('body').append($(this).attr('src'));

})​ 
```

这是小提琴

[http://jsfiddle.net/7yNg7/](http://jsfiddle.net/7yNg7/)

# java - 华氏到摄氏度的转换

> ID：13282301
> 
> 赞同：0
> 
> 时间：2012-11-08T04:16:34.780
> 
> 标签：java, double

我正在尝试编写一个程序，它将以华氏度表示的温度转换为摄氏度。用户输入华氏值，程序打印出摄氏值。用户应该输入 212 作为华氏值，程序应该计算 100.0 作为摄氏值，但是当我想获得 100.0 时，我得到 0.0 作为摄氏值

我不确定问题可能出在哪里。可能是操作顺序吗？

将摄氏度转换为华氏度的公式是： `C = 5 / 9 (F - 32)`

```
import acm.program.*; 

public class FahrenheitToCelsius extends ConsoleProgram {

    public void run() {
        println("This program converts Fahrenheit to Celsius");
        int fah = readInt("Enter Fahrenheit temperature: ");
        double ft = 5 / 9;
        double cel = ft * (fah - 32);
        println("Celsius equivalent = " + cel);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T04:18:25.310

`5 / 9`是一个整数除法，因此`0`即使您将它分配给 a ，它也会返回 a `double`。
试试`5.0 / 9`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T04:19:41.993

```
double ft = 5 / 9 ; 
```

上面的行没有做你认为它做的事情。
因为`5`和`9`都是整数，所以它会进行整数除法。您将结果分配给双精度的事实并不重要，如果两个操作数都是整数，您将获得整数数学。

`ft`永远如此，永远`0`如此`cel``0`

尝试

```
double ft = 5.0/9.0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T04:22:08.857

当您对两个整数进行操作时，结果不会转换为双精度数。它仅保留为 int。**要将结果变成双倍，至少有一个数字应该是双倍的。**例如

```
 double ft = 5.0/9; //double
       double ft = 5/9.0;//double
       double ft = 5.0/9.0;//double 
```

尽管

```
 double ft = 5/9; //int 0 
```

有关详细信息，请参阅[**浮点操作规范**](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.4)。

# gnuplot - 减少 splot 中点之间的距离

> ID：13282302
> 
> 赞同：1
> 
> 时间：2012-11-08T04:16:42.097
> 
> 标签：gnuplot

我有这个 gnuplot 脚本

```
reset
set palette model RGB defined (0 "gray", 0.1 "white", 0.33 "yellow", 0.66 "orange", 1 "red")
set xlabel "x"
set ylabel "y"
set view map
set border 0
unset xtics
unset ytics
splot file_name u 1:2:5:xtic(3):ytic(4) w points ps 5 pt 5 palette 
```

这是结果：

![热图](../Images/40fe42c1ff1a0ff68d90bd26fb8c213d.png)

如何删除点之间的距离，以便最终得到一组相邻的正方形？我想为我的网格文件中的每个点绘制一个带有正方形的热图。

**编辑**

根据@andyras 的答案绘制“网格”热图的正确方法是：

```
set pm3d map
plot file_name u 1:2:5:xtic(3):ytic(4) with image 
```

这给出了这个图像：

![网格热图](../Images/3943abb45c482e0abb506b593ab0a717.png)

gnuplot 提供了第三种方法来绘制基于 3d 表面的连接点的热图，而不是网格单元。也就是说，第 1,2 列的 x,y 坐标用作曲面网格的*角*或连接点，每个区域中使用的颜色是 4 个定义角的 RGB/HSV 值的平均值：

```
set pm3d map
splot file_name u 1:2:5:xtic(3):ytic(4) 
```

![带顶视图的 3d 热图](../Images/7ea48f91ffd44f371f4708a945e7804a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:30:52.333

我通常选择选项

```
set pm3d map
plot file_name u 1:2:5:xtic(3):ytic(4) with image 
```

对于网格数据（如果您使用矢量格式，它会生成一个较小的文件）。我怀疑您的问题可能与您为 splot 指定点样式和大小有关。因此，您可以尝试设置`pm3d map`选项并`splot`在不指定点的情况下使用，或者`plot ... with image`.

# c++ - 我的代码似乎什么也没做

> ID：13282304
> 
> 赞同：0
> 
> 时间：2012-11-08T04:17:05.470
> 
> 标签：c++

什么都不做，当我调用gets()时它甚至不让我输入，甚至我的IDE都声称“语句无效”。

```
#include <iostream>
#include <cstring>
#include <cstdio>

using namespace std;

int main()
{
char userluv[800], fuusd[800], orig[800], key [51], priv [21];
int tempfussd[800], kint, pint, tint[5], c, lame;

//get the basic info
cout << "key? ";
cin >> key;
cout << "Second key? ";
cin >> priv;
cout << "Your lovely text?:\n";
gets(userluv);

for(c=0; c<=key[c]; c++){
    kint += key[c];
}
for(c=0; c<=priv[c]; c++){
    pint += priv[c];
}

//do stuff to your key
tint[0] = strlen(key) + strlen(priv);
tint[1] = tint[0] * tint[0];

//string to int then do stuff
    for(c=0; c<=userluv[c]; c++){
    tempfussd[c] = userluv[c];
    tempfussd[c] + kint;
    tempfussd[c] * pint;
    tempfussd[c] * tint[1];
}

    cout << "\n" << tempfussd[c] << "\n";

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:21:51.790

您的 gets() 正在从*cin>>priv*的最后一个输入中获取 \n 。让它像这样：

```
cin >> priv;
cout << "Your lovely text?:\n";
cin.get();
gets(userluv); 
```

cin.get(); 将处理\n。立即查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T04:22:12.473

这三行是无效的陈述：

```
tempfussd[c] + kint;
tempfussd[c] * pint;
tempfussd[c] * tint[1]; 
```

您可能省略了and`=`之后的?`+``*`

上面标识的语句发生在循环中：

```
for(c=0; c<=userluv[c]; c++){
    tempfussd[c] = userluv[c];
    tempfussd[c] + kint;
    tempfussd[c] * pint;
    tempfussd[c] * tint[1];
} 
```

如果（如评论所暗示的那样）`+=`and`*=`是正确的，您可以通过编写来简化事情：

```
for (c = 0; c <= userluv[c]; c++)
    tempfussd[c] = (userluv[c] + kint) * pint * tint[1]; 
```

# java - 如何反序列化可能是字符串、对象或列表的 json/gson

> ID：13282308
> 
> 赞同：3
> 
> 时间：2012-11-08T04:17:18.973
> 
> 标签：java, android, json, gson

我有以下 json

```
"notes": {"note": [
         {
             "content": "Having wisdom teeth removed.",
             "from": "employee"
         },
         {
             "content": "Get well soon",
             "from": "manager"
         }
     ]}, 
```

问题是价值也可以

```
 "notes": "", 
```

或者

```
"notes": {"note": {
            "content": "This is a test note.",
            "from": "employee"
        }}, 
```

并将其存储在这些

```
public  class Notes
{
    @SerializedName ("note")
    public List<Note> note;
}
public  class Note
{
    @SerializedName ("content")
    public String content;
    @SerializedName ("from")
    public String from;
} 
```

我相信我通过这样做解决了不是数组而是单个对象的问题

```
public class Json {
    private static Gson gson;

    private static class MyNoteClassTypeAdapter implements JsonDeserializer<List<RequestsDTO.Note>> {
        public List<RequestsDTO.Note> deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext ctx) {
            List<RequestsDTO.Note> vals = new ArrayList<RequestsDTO.Note>();
            if (json.isJsonArray()) {
                for (JsonElement e : json.getAsJsonArray()) {
                    vals.add((RequestsDTO.Note) ctx.deserialize(e, RequestsDTO.Note.class));
                }
            } else if (json.isJsonObject()) {
                vals.add((RequestsDTO.Note) ctx.deserialize(json,RequestsDTO.Note.class));
            } else {
                throw new RuntimeException("Unexpected JSON type: " + json.getClass());
            }
            return vals;
        }
    }

    public static Gson getGson()
    {
        if (gson == null)
        {
            Type ListType = new TypeToken<List<RequestsDTO.Note>>() {}.getType();
            GsonBuilder builder = new GsonBuilder();
            builder.registerTypeAdapter(DateTime.class, new DateTimeSerializer());
            builder.registerTypeAdapter(ListType, new MyNoteClassTypeAdapter());
            gson = builder.create();
        }
        return gson;
    }
} 
```

现在，当整个事情以字符串的形式返回时，我被困住了……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-31T11:46:54.357

请参阅下面的代码片段以使用 Gson 库反序列化您的 json，无一例外。

```
String jsonStr = "your json string ";

Gson gson = new Gson();
JsonObject jsonObj = gson.fromJson (jsonStr, JsonElement.class).getAsJsonObject();

JsonElement elem = jsonObj.get("note");

if(elem.isJsonArray()) { //**Array**
    List<Note> notelist = gson.fromJson(elem.toString(), new TypeToken<List<Note>>(){}.getType());
} else if(elem.isJsonObject()) { //**Object**
    Note note = gson.fromJson(elem.toString(), Note.class);
} else {  //**String**
    String note = elem.toString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T06:04:40.627

The idea is try to get `"note"` field (from `"notes"` `JSONObject`) as `JSONArray` first and if it throws exception that will mean that there is no `"note"` `JSONArray` into `"notes"` `JSONObject` and that will mean that `"note"` is `JSONObject`. The same way we can figure out situation when `note` field is `String`.

```
try {
        //String jsonString="{\"notes\": {\"note\": [{\"content\": \"Having wisdom teeth removed.\",\"from\": \"employee\" }, {\"content\": \"Get well soon\", \"from\": \"manager\"} ] }}";
        //String jsonString="{\"notes\": { \"note\": {\"content\": \"This is a test note.\",\"from\": \"employee\"}}}";
        String jsonString="{\"notes\": { \"note\": \"\"}}";

        JSONObject jsonObject=new JSONObject(jsonString);
        JSONObject jsonObjectNotes=jsonObject.getJSONObject("notes");

        try{
            JSONArray jsonArrayNote=jsonObjectNotes.getJSONArray("note");
            for (int i = 0; i < jsonArrayNote.length(); i++) {

                JSONObject jsonObject2= jsonArrayNote.getJSONObject(i);
                String stringContent=jsonObject2.getString( "content");
                String stringFrom= jsonObject2.getString( "from");

                Log.e(getClass().getName(), "content="+stringContent +"; from="+stringFrom);
            }
        }
        catch(JSONException e){
            //that means that jsonObjectNotes has no jsonArray with name "notes" and "notes" is jsonObject
            try{
                JSONObject jsonObject3=jsonObjectNotes.getJSONObject("note");

                String stringContent=(String) jsonObject3.get( "content");
                String stringFrom=(String) jsonObject3.get( "from");

                Log.e(getClass().getName(), "content="+stringContent +"; from="+stringFrom);
            }
            catch(JSONException ex){
                //that means that jsonObjectNotes has no jsonObject with name "notes" and "notes" is empty String
                String stringNote=jsonObjectNotes.getString("note") ;       
                Log.e(getClass().getName(), "note is string ="+ stringNote);
            }
        }

    } catch (JSONException e) {
        e.printStackTrace();
    } 
```

In my example code another `get` operations can also throw jsonExceptions but I think you get the idea.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T10:05:57.130

看看 Genson 库[http://code.google.com/p/genson/](http://code.google.com/p/genson/)。如果您的类是内部类，请将它们设为静态。以下代码应该可以解决您的问题。

```
Genson genson = new Genson.Builder().withDeserializerFactory(new NotesDeserializerFactory()).create();
Notes notes = genson.deserialize(in, Notes.class);

// Define a factory so you can delegate the deserialization to existing mechanisms for lists and beans
class NotesDeserializerFactory implements Factory<Deserializer<Notes>> {

    @Override
    public Deserializer<Notes> create(Type type, Genson genson) {
        Converter<List<Note>> noteListConverter = genson.provideConverter(new GenericType<List<Note>>() {}.getType());
        Converter<Note> noteConverter = genson.provideConverter(Note.class);
        return new NotesDeserializer(noteListConverter, noteConverter);
    }

}

// define an implementation for you Notes class so you can handle the different cases
class NotesDeserializer implements Deserializer<Notes> {
    private final Converter<List<Note>> noteListConverter;
    private final Converter<Note> noteConverter;

    public NotesDeserializer(Converter<List<Note>> noteListConverter,
            Converter<Note> noteConverter) {
        this.noteListConverter = noteListConverter;
        this.noteConverter = noteConverter;
    }

    @Override
    public Notes deserialize(ObjectReader reader, Context ctx) throws TransformationException,
            IOException {
        Notes notes = new Notes();
        if (reader.getValueType() == ValueType.ARRAY) notes.note = noteListConverter.deserialize(reader, ctx);
        else if (reader.getValueType() == ValueType.OBJECT) notes.note = Arrays.asList(noteConverter.deserialize(reader, ctx));
        else { // it is a litteral (string, numeric, boolean, null)
            notes.note = new ArrayList<Note>();
        }
        return notes;
    }
} 
```

# django - 刚刚更新到 Django 1.4 并获取 'WSGIRequest' 对象没有属性 'SUCCESS' 错误

> ID：13282309
> 
> 赞同：0
> 
> 时间：2012-11-08T04:17:25.540
> 
> 标签：django

我刚刚升级到 Django 1.4 并收到以下错误：

`'WSGIRequest' object has no attribute 'SUCCESS'`

追溯：

```
File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Users/nb/Desktop/spicestore/apps/account/views.py" in login
  87\.             messages.add_message(request.SUCCESS,

Exception Type: AttributeError at /account/login/
Exception Value: 'WSGIRequest' object has no attribute 'SUCCESS' 
```

有谁知道可能是什么原因造成的？

这是views.py中的实际代码：

```
 messages.add_message(request.SUCCESS,
        ugettext(u"Successfully logged in as %(user)s.") % {
            "user": user_display(form.user)
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:47:29.597

```
messages.add_message(request, 
                 messages.SUCCESS, 
                 ugettext(u"Successfully logged in as %(user)s.") % { "user": user_display(form.user) }) 
```

或更快：

```
messages.success(request, 
                 ugettext(u"Successfully logged in as %(user)s.") % { "user": user_display(form.user) }) 
```

请参阅： [https ://docs.djangoproject.com/en/dev/ref/contrib/messages/#using-messages-in-views-and-templates](https://docs.djangoproject.com/en/dev/ref/contrib/messages/#using-messages-in-views-and-templates)

# git - 在 Git 中忽略目录中的文件，而不是目录本身

> ID：13282316
> 
> 赞同：1
> 
> 时间：2012-11-08T04:18:10.643
> 
> 标签：git, directory, gitignore

如何在 Git 中忽略特定目录中的文件，而不是目录本身？我可以在 .gitignore 文件中添加一行，但它会忽略整个目录。.gitignore 支持什么样的语法来实现我想要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:23:36.703

最简单的方法是`.gitignore`在目录中添加一个并添加要忽略的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:18:37.680

这是关于 git 如何处理空目录的全部内容，实际上与它无关`.gitignore`（除了它是导致您拥有一个空目录的忽略文件这一事实之外）

请参阅此处[如何将空目录添加到 Git 存储库？](https://stackoverflow.com/questions/115983/how-do-i-add-an-empty-directory-to-a-git-repository)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T04:27:25.627

您可以使用其中任何一个

`dir/*`- 它忽略`dir`目录中的所有文件，但不忽略它的子目录。

`dir/**`它忽略目录中的所有文件`dir`及其子目录。

# ruby - 从 Ruby Koan nº 75 可以学到什么？

> ID：13282321
> 
> 赞同：1
> 
> 时间：2012-11-08T04:18:26.273
> 
> 标签：ruby

Koan 代码，编号 75：

```
 in_ruby_version("mri") do
        RubyConstant = "What is the sound of one hand clapping?"
        def test_constants_become_symbols
          all_symbols = Symbol.all_symbols

          assert_equal __, all_symbols.include?(__)
        end
      end 
```

我对此有点困惑，因为我刚刚发现针对“all_symbols.include?(__)”测试的任何符号都将匹配“true”。例如，以下所有内容都应该有效：

```
 assert_equal true, all_symbols.include?(:RubyConstant)
    assert_equal true, all_symbols.include?(:"What is the sound of one hand clapping?")
    assert_equal true, all_symbols.include?(:AnythingElseYouCouldWriteHere) 
```

用“constants_become_symbols”学到什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T08:02:59.123

在 ruby​​ 中，以大写字母开头的变量成为[常量](http://en.wikipedia.org/wiki/Constant_(programming))。koan 的目标是教你常量成为 ruby​​ 中的符号并被添加到 ruby​​ 的符号表中。

```
in_ruby_version("mri") do
  RubyConstant = "What is the sound of one hand clapping?"
  def test_constants_become_symbols
    all_symbols = Symbol.all_symbols

    assert_equal true, all_symbols.include?("RubyConstant".to_sym)
  end
end 
```

还要注意它是怎么说`"RubyConstant".to_sym`的，而不是`:RubyConstant`. 这是为了避免混淆，因为 ruby​​ 解释器在解析 ruby​​ 函数时会自动创建一个符号，如此[处](https://stackoverflow.com/a/5358888/1725658)所述。

# iphone - 未调用 IBAction

> ID：13282322
> 
> 赞同：8
> 
> 时间：2012-11-08T04:18:30.740
> 
> 标签：iphone, ios, ipad, ibaction

我正在为 iPad 构建一个带有界面生成器的应用程序。滚动视图占据了屏幕的大部分，除了底部的一小部分。向下滚动启用。在底部的一小部分（不在滚动视图内），有一个连接到 IBAction 的 UIButton：

```
- (IBAction)submit:(id)sender; 
```

并实现如下：

```
- (IBAction)submit:(id)sender
{
    NSLog(@"submit called");
} 
```

我已经无数次地将 IBActions 连接到 IB 中的按钮，从来没有遇到过问题……但由于某种原因，这没有被调用。我通过选择按钮-> 连接检查器-> 内部修饰-> 文件所有者-> 提交来连接它...有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T06:55:55.020

检查是否：

1.  所有者名称是正确的，并且内部的修饰设置为正确的所有者。
2.  该按钮正在获取触摸事件并且没有被滚动视图覆盖。
3.  您正在使用任何自定义按钮，如果是，请检查其实现以查看是否在那里处理了触摸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:31:49.953

在 UIScrollView 顶部添加 UIButton 实例（在您的情况下 UIView 包含 UIButton）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T13:23:53.773

原来这是xCode的问题......我更新了，问题就消失了。

# android - Android：是否可以接受用户输入并将其显示回来？

> ID：13282335
> 
> 赞同：0
> 
> 时间：2012-11-08T04:19:58.830
> 
> 标签：android, string, input, show

我是新手，但我试图接受用户输入（即用户名），然后通过 textView 将其显示在不同的活动中（即显示将显示“这是'用户名的移动”）。

我不确定是否可以通过将用户输入分配给 java 文件中的字符串，然后按照我的意图传递数据，或者我是否必须使用某种形式的存储来做到这一点。

无论哪种方式，我仍然对如何将其返回到要显示的 .xml 文件中的字符串感到困惑。

任何帮助将不胜感激:) 干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:08:35.900

我认为最好的方法是使用共享首选项。它正是为了这样的事情。这就是你的做法：

```
SharedPreferences prefs = getSharedPreferences("prefs", 0); 
SharedPreferences.Editor editor prefs.edit(); 
```

现在，每次你想改变你所做的字符串时：

```
editor.putString("user_name", "jon").commit(); 
```

“user_name”是字符串的名称，“jon”是内容。所以你可以像这样保存名字和姓氏：

```
editor.putString("user_name", "jon")
editor.putString("last_name", "dow").commit(); 
```

不要忘记把“commit()”放在最后。每次你想得到你可以使用的字符串时：

```
String Name = prefs.getString("user_name", "");
String LastName = prefs.getString("last_name", ""); 
```

这样做的好处是它被保存了。因此，下次用户打开应用程序时，您仍然可以获取字符串，而无需再次使用它来让用户再次输入：

```
String Name = prefs.getString("user_name", "");
String LastName = prefs.getString("last_name", ""); 
```

就这么简单。希望你明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T04:43:05.577

正如评论中指出的那样，您应该了解 Intent 是什么。[您可以在此处](http://developer.android.com/guide/components/intents-filters.html)阅读有关它们的信息。作为一个非常简短的例子：

```
Intent launchNewActivity = new Intent(this, NewActivity.class);
launchNewActivity.putExtra("Some key", "Some value"); //sometimes you want to pass extra data
startActivity(launchNewActivity); 
```

此外，了解 strings.xml 的使用也很好，如此处[所述](http://developer.android.com/guide/topics/resources/string-resource.html)。基本上，它用于定义不会被硬编码的常量，您可以在代码中调用。它们可以帮助您保持代码井井有条，还可以帮助您轻松地将应用程序翻译成其他语言。同样，一个简单的例子如下所示：

```
<resources>

    <string name="OK">OK</string>
    <string name="cancel">Cancel</string>

    <!-- Validation error messages for EditText -->
    <string name="editText_validation_error_empty_field">The field cannot be empty.</string>
    <string name="editText_validation_error_numbers_only">Only numbers are allowed on this field.</string>
</resources> 
```

# c# - TextBoxFor 模型在循环中动态递增

> ID：13282336
> 
> 赞同：0
> 
> 时间：2012-11-08T04:20:03.667
> 
> 标签：c#, asp.net, asp.net-mvc-3, loops, razor

我正在构建一个用于锻炼的 Web 应用程序。当一个锻炼日加载时，它会显示一个表格，其中包含每个练习的一系列文本框，以记录每组的重复次数和完成的重量。每个练习需要不同数量的组。

我创建了一个包含两种对象类型的类，一个来自ExerciseReference 实体类/数据库表的练习列表，以及一个用于记录用户输入表单并提交的数据的实体类。

我的模型如下所示：

```
public class ExerciseListModel
{
    public List<ExerciseRef> exercises { get; set; }
    public ExerciseREC recordedExercises { get; set; }
} 
```

在为每个练习构建 Reps 和 Weights 文本框时，我的 Razor HTML 类似于以下内容：

```
 @foreach(ExerciseRef item in Model.exercises)
        {
            <div class="editor-label">
            <h3>@item.Name.ToString()</h3>
            </div>
            <p>@item.Description.ToString()</p>

                for (int i = 0; i < item.NumberOfSets; i++)
                {                        
                   <text>Set #: </text> @(i + 1)<br />
                   <text>REPS: </text> @Html.TextBoxFor(m => m.recordedExercises.Set1Reps)<br />
                   <text>WEIGHT: </text> @Html.TextBoxFor(m => m.recordedExercises.Set1Weight) <br /><br />

                }

        } 
```

所以本质上，这是一个 foreach 循环中的 for 循环。foreach 循环构建所有练习的 HTML 列表，而 for 循环构建代表和重量的文本框。

我需要以下行中的 Set1Reps 中的数字：

```
 @Html.TextBoxFor(m => m.recordedExercises.Set1Reps) 
```

动态并随循环递增。我需要它为 Set 1 设置 Set1Reps，为 Set 2 更改为 Set2Reps，依此类推。

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:45:58.413

我会更改您的数据模型以包含集合和代表作为记录的Excercises 属性的集合。然后，您可以像遍历整个练习集一样遍历它们。

# android - android中的水平列表视图

> ID：13282338
> 
> 赞同：0
> 
> 时间：2012-11-08T04:20:17.920
> 
> 标签：android, listview

嗨，我是 Android 新手。我从 Xml 文件中解析了数据，现在我想要的是我必须将解析后的数据显示为一个选项卡式结构，它应该是可滚动的。

**我的设计应该是这样的：**

```
 Sports  Movies  International Technology ...... 
```

我寻找了水平列表视图，但我得出的结论是水平列表视图是不可能的。所以请给出一些想法我该如何显示它，还提供一些参考链接以了解 android 中的 UI 设计。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:25:30.150

尝试类似 Horizo​​ntalScrollView。

[http://developer.android.com/reference/android/widget/Horizo​​ntalScrollView.html](http://developer.android.com/reference/android/widget/HorizontalScrollView.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:27:12.660

您可以使用 Jake Wharton 的[ViewPageIndicator](http://viewpagerindicator.com/)。您可以从[这里获取项目](https://github.com/JakeWharton/Android-ViewPagerIndicator)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-04T01:15:52.227

随着 RecyclerView 库的发布，您可以在 Android 应用中使用 LinearLayoutManager 轻松实现水平列表视图

[http://whats-online.info/science-and-tutorials/87/Android-tutorial-Horizo​​ntal-RecyclerView-with-images-and-text-example/](http://whats-online.info/science-and-tutorials/87/Android-tutorial-Horizontal-RecyclerView-with-images-and-text-example/)

# android - 语音识别，ListView ArrayAdapter：使用 if("certain word speak"){ } 的最佳方法是什么？我可以使用哪些方法？

> ID：13282341
> 
> 赞同：-1
> 
> 时间：2012-11-08T04:20:39.453
> 
> 标签：android

语音识别将所有可能性放入列表视图中，我只是想知道如何使用 ListView 中的值来使用 if("word was speak"){"do something"}，我是否必须自己进行搜索或是否已经有方法，正确的语法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:41:57.370

我正在寻找的答案是这样的：

```
 if(string.contains(" ")){ 
```

}

# wpf - 使用 IModuleManager.LoadModule 的 WPF Prism 重新加载模块

> ID：13282344
> 
> 赞同：0
> 
> 时间：2012-11-08T04:21:04.057
> 
> 标签：wpf, prism

我需要在模块中显示视图。模块使用 in`Initialize`方法注册它的视图。用户将从下拉列表中选择模块名称。第一次使用 I `ModuleManager.LoadModule`（字符串 ModuleName）。如果我想再次重新显示相同的模块（在清除先前显示的模块后在同一区域中）`IModuleManager.LoadModule`将无法正常工作。我不知道该模块中包含的视图和区域。我只知道 ModuleName，我需要显示它的视图。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:47:05.140

你的问题非常令人困惑。你能提供更多信息吗？IRegionManager 是将视图注册到预定义区域的组件。如果我做对了，ModuleManager 只负责加载程序集。

我认为您不能多次加载模块，因为第二次已经加载了。显示视图的逻辑应该通过您的 Modul 中的服务进行调节，因此在您的模块中应该是一个使用 IRegionManager 将特定视图注册到区域的方法。

我不知道您是使用 Unity 还是 MEF（或其他 IOC），但您可以通过容器在模块中获取 IRegionManager。

也许您应该观看本教程系列[Prism 教程系列](http://www.youtube.com/watch?v=KTtTW-BmXJg)。在我看来，您缺少一些基本原则

# python - 使用 Python 高效地重写大型文本文件中的行

> ID：13282345
> 
> 赞同：1
> 
> 时间：2012-11-08T04:21:06.297
> 
> 标签：python

我试图通过迭代数千条数据库记录来生成一个大数据文件（以 GB 为单位）。文件的顶部是文件后面出现的每个“功能”的一行。他们看着像是：

```
@attribute 'Diameter' numeric
@attribute 'Length' real
@attribute 'Qty' integer 
```

包含使用这些属性的数据的行如下所示：

```
{0 0.86, 1 0.98, 2 7} 
```

但是，由于我的数据是稀疏数据，所以我的数据库中的每条记录可能都没有每个属性，并且我事先不知道完整的特征集是什么。理论上，我可以迭代我的数据库记录两次，第一次是累积功能集，然后第二次输出我的记录，但我正在尝试找到一种更有效的方法。

我想尝试类似以下伪代码的方法：

```
fout = open('output.dat', 'w')
known_features = set()
for records in records:
    if record has unknown features:
        jump to top of file
        delete existing "@attribute" lines and write new lines
        jump to bottom of file
    fout.write(record) 
```

这是跳转/写入/跳转部分，我不知道如何完成。你会如何在 Python 中做到这一点？

我试过类似的东西：

```
fout.seek(0)
for new_attribute in new_attributes:
    fout.write(attribute)
fout.seek(0, 2) 
```

但这会覆盖文件顶部的属性行*和数据行，而不是简单地从我指定的查找位置开始插入新行。*

**在不**将整个文档加载到内存中的情况下，如何在 Python 中获得文字处理器的“插入”功能？最终文件大于我所有可用内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:37:55.973

为什么不获取所有功能及其数据类型的列表？首先列出它们。如果缺少某个功能，请将其替换为已知值 -`NULL`似乎合适。

这样，您的记录将是完整的（在长度上），并且您不必在文件中跳来跳去。

另一种方法是，写两个文件。一个包含您的所有功能，另一个包含您的所有行。生成这两个文件后，将功能文件附加到数据文件的顶部。

FWIW，文字处理器将文件加载到内存中进行编辑；然后他们写出整个文件。这就是为什么您不能加载大于文字处理器中可寻址/可用内存的文件的原因；或任何其他未实现为流阅读器的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:30:55.477

为什么不首先在内存中构建输出（例如作为字典）并在所有数据已知后将其写入文件？

# python - GAE 搜索 API - 如何地理搜索字段

> ID：13282352
> 
> 赞同：2
> 
> 时间：2012-11-08T04:21:28.077
> 
> 标签：python, google-app-engine

您好，我在地理搜索字段时遇到了困难。我要做的是根据我提供的邮政编码查询地理字段以找到离我最近的商店。

首先，我从 google maps api（组件：postal_code :) 获取 lat & lng。然后我将 lat & lng 坐标输入到查询字符串中。

前任。查询=“距离（存储位置，地理点（纬度，lng））<4500”

我的索引包含大量文档...store_location 是我的 geoField

前任。店铺位置 | search.GeoPoint(latitude=34.0324...)

问题是......当我搜索索引时，我会回到零

前任。search.SearchResults(number_found=0)

为什么我没有得到结果？感谢您的帮助。

```
class FindStore(BaseHandler):
    def post(self):
        data = zipcheck.get_lat_lng_from_google_map(self.request.body)
        obj = json.loads(data)
        ziplat = obj['lat']
        ziplng = obj['lng']
        index = INDEX_STORE
        query = "distance(store_location, geopoint(%s, %s)) < 4500" %(ziplat, ziplng)
        results = index.search(query)
        return results 
```

# mysql - 这是否应该是一种识别关系？

> ID：13282357
> 
> 赞同：0
> 
> 时间：2012-11-08T04:21:55.990
> 
> 标签：mysql, mysql-workbench, relationship, identifying-relationship

好吧，我最初在 StackExchange 上为数据库管理员发布了这个问题： [https ://dba.stackexchange.com/questions/28356/should-this-be-an-identifying-relationship-or-not](https://dba.stackexchange.com/questions/28356/should-this-be-an-identifying-relationship-or-not)

但我猜它似乎缺乏用户。那么有人可以帮我解决这个问题吗？

编辑：好的，我选择了非识别关系，这样用户可以是 Patient、SpiProfessional 或两者兼而有之。似乎工作得更好，即使在编写查询时工作量更大。感谢大家的回答，他们都有助于我对数据库的理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T04:41:14.697

需要了解更多信息才能回答您的问题。

1.  用户可以是患者吗？
2.  用户可以是 SpiProfessional 吗？
3.  用户可以是患者和 SpiProfessioanl 吗？
4.  需要为患者存储哪些额外的数据/属性？
5.  SpiProfessional 需要存储哪些额外的数据/属性？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:32:08.820

好的，这是我根据您的设计的想法。User 表和 Patient 表，不应该是 1 对 1 的关系，因为用户可能不是病人，所以应该是 1 对 0..1 的关系。

SpiProessional 也是如此。用户可能不是 SpiProfessioanl，所以 Spiprofessional 的 User 表应该是 1 到 0..1 的关系。

我认为这两个帖子值得一看。1.[任何必要的可空外键示例？](https://stackoverflow.com/questions/925203/any-example-of-a-necessary-nullable-foreign-key) 2 [、在SQL Server中实现一对零或一关系](https://stackoverflow.com/questions/7644156/implementing-one-to-zero-or-one-relation-in-sql-server)

# c++ - 为什么我的 openGL 顶点缓冲区对象不绘制任何东西？

> ID：13282363
> 
> 赞同：0
> 
> 时间：2012-11-08T04:22:13.383
> 
> 标签：c++, opengl

我正在尝试使用 glDrawElements/Arrays 函数在 openGL 4 中渲染模型。我目前正在读取包含顶点数据和多边形索引的文件。我无法在屏幕上显示任何内容，但我用作参考的轴除外。我已经成功地多次使用了这种通用方法。我不知道我可能做错了什么并且已经被困了将近一天。

这是我缓冲数据的地方

```
// get position of "in vec4 vPosition;" from shader program
// displays axes properly
vPosition = glGetAttribLocation( program, "vPosition" );

// create buffers
glGenVertexArrays(2, vao);
glGenBuffers( 3, vbo );

// here I bind vao[0] and vbo[0] then buffer
// a set of XYZ axes which display correctly

// buffer model
glBindVertexArray( vao[1] );
glBindBuffer( GL_ARRAY_BUFFER, vbo[1] );
glBufferData( GL_ARRAY_BUFFER, sizeof(board->verts),
                board->verts, GL_STATIC_DRAW );

glEnableVertexAttribArray( vPosition );
glVertexAttribPointer( vPosition, 4, GL_FLOAT, GL_FALSE, 0,
                        BUFFER_OFFSET(0));

glBindBuffer( GL_ELEMENT_ARRAY_BUFFER , vbo[2] );
glBufferData(
        GL_ELEMENT_ARRAY_BUFFER,
        sizeof(board->indices),
        board->indices.data(),
        GL_STATIC_DRAW); 
```

fyi board 是冲浪板的模型，其中读取 glDrawElements 的顶点和索引。如果在调用 glBufferData 的正上方包含以下代码，这些顶点和索引将正确打印出来

```
for( int i = 0; i < board->numVerts; i++ ){
    std::cerr << i << ":  "<<board->verts[i].x << " "<<board->verts[i].y<<" "<<
            board->verts[i].z << " " << board->verts[i].w << std::endl;
} 
```

如果放入类似的打印循环，索引也是如此。这是我尝试绘制模型的地方：

```
void draw_model(){

    glUniform4fv( color_loc, 1, glm::value_ptr(blue));
    glBindVertexArray( vao[1] );

    glDrawArrays( GL_LINE_STRIP, 0, 600 );

    //glDrawElements(
    //  GL_LINES,
    //  board->indices.size(),
    //  GL_UNSIGNED_INT,
    //  NULL
    //);

} 
```

对 DrawElements 的调用（已注释掉）不显示任何内容。对 DrawArrays 的调用是为了查看我是否只是错误地使用了 DrawElements（我过去只使用过 drawArrays）进行故障排除工作。板定义为`model3d *board`。这是它的类

```
class model3d{
public:
    glm::vec4 *verts;
    std::vector<int> indices;
    int numVerts;
    int numPolys;
    model3d( const char*, const char* );
private:
    void load_coords( const char* );
    void load_polys( const char* );
}; 
```

为什么我的数据似乎没有缓冲？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T05:55:18.903

不要使用`sizeof(board->verts)`，因为它只会返回指针的大小。

# node.js - 从 OSX 命令行发布 azure 网站？

> ID：13282364
> 
> 赞同：1
> 
> 时间：2012-11-08T04:22:16.703
> 
> 标签：node.js, azure, build

是否可以使用 OSX 通过命令行（而不是通过 git 方法）发布网站更改？

如果不是，那么基于 UNIX 的构建服务器将如何为 azure 网站进行持续集成部署？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:47:04.960

是的，我相信即使您避免使用 git（为什么？），您仍然可以这样做，因为您可以使用 FTP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:41:20.047

我认为您需要[“适用于 Mac 和 Linux 的 Windows Azure 命令行工具”](https://www.windowsazure.com/en-us/manage/linux/other-resources/command-line-tools/)

“此工具提供从 Mac 和 Linux 桌面创建、部署和管理虚拟机和网站的功能。此功能类似于随 Windows Azure SDK for .NET、Node.JS 一起安装的 Windows PowerShell cmdlet 提供的功能，和 PHP。”

# c# - windows 窗体 datagridview 排序和分页

> ID：13282365
> 
> 赞同：0
> 
> 时间：2012-11-08T04:22:22.697
> 
> 标签：c#, winforms

我有一个 Windows 窗体 DataGridView 仅从数据库加载页面大小。如果我单击列标题，它只会对显示的记录进行排序。

如何相对于结果集中的所有记录（显示和不显示）对列进行排序？

我的 SQL 处理排序，我只需要覆盖 DataGridView 的排序，使用排序列调用我的 SQL 并显示记录？

# java - java.lang.IllegalArgumentException：每个像素多个组件

> ID：13282366
> 
> 赞同：1
> 
> 时间：2012-11-08T04:22:42.883
> 
> 标签：java, image-processing, illegalargumentexception

我是 Java 图像处理的新手。我正在尝试将两个图像与下面的代码进行比较，并在代码之后获取消息。任何帮助是极大的赞赏。谢谢。

```
 BufferedImage imgOrig = ImageIO.read(new URL(imgOrigUrl));
    BufferedImage imgComp = ImageIO.read(new URL(imgCompUrl));                

    byte[] pixelsOrig = ((DataBufferByte) imgOrig.getRaster().getDataBuffer()).getData();
    byte[] pixelsComp = ((DataBufferByte) imgComp.getRaster().getDataBuffer()).getData();

    //System.out.println("Number of pixels orig:"+pixelsOrig.length);
    //System.out.println("Number of pixels comp:"+pixelsComp.length);

    ColorModel cmImgOrig = imgOrig.getColorModel();
    ColorModel cmImgComp = imgComp.getColorModel();

    int sum1 = 0;
    int sum2 = 0;
    for(int i:pixelsOrig){
        System.out.println(cmImgOrig.getGreen(i));  //ERROR OCCURS HERE
        //System.out.println(i);
    } 
```

错误：

```
Testcase: testCompareImages(com.myapp.img.compare.service.CompareServiceTest):  Caused an ERROR
More than one component per pixel
java.lang.IllegalArgumentException: More than one component per pixel
    at java.awt.image.ComponentColorModel.getRGBComponent(ComponentColorModel.java:594)
    at java.awt.image.ComponentColorModel.getGreen(ComponentColorModel.java:675)
    at com.scottmacri.img.compare.service.CompareService.compareImages(CompareService.java:42)
    at com.scottmacri.img.compare.service.CompareServiceTest.testCompareImages(CompareServiceTest.java:45) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:24:21.053

就像@Nathan Villaescusa 说的那样，您使用的方法是期待一个单一的渠道。你需要字节数组还是颜色通道？如果您只需要颜色组件，您可以执行以下操作：

```
BufferedImage imgOrig = ImageIO.read(new URL(imgOrigUrl));
BufferedImage imgComp = ImageIO.read(new URL(imgCompUrl));

for (int y = 0; y < imgOrig.getHeight(); y++)
{
   for (int x = 0; x < imgOrig.getWidth(); x++)
   {
      System.out.println(imgOrig.getRGB(x, y) >> 8 & 0xff);
   }
} 
```

其中 getRGB(x, y) 返回的 int 可以移动以获得 RGB 和 alpha 分量，如下所示：

```
int a = rgb >> 32 & 0xff;
int r = rgb >> 16 & 0xff;
int g = rgb >> 8 & 0xff;
int b = rgb & 0xff; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:29:35.190

看起来该错误被抛出，因为您`ColorSpace`有超过 1 个组件，但您只传入一个值进行检查。

您想使用`getGreen()`接受 a 的 ColorComponentModel 方法`Object`，而不是接受 的方法`int`。我认为接受 an 的方法`int`是用于灰度。

根据[这个答案](https://stackoverflow.com/questions/5170321/order-of-channels-in-bufferedimage)，这里是如何使用这种方法获取像素数据：

```
Raster r = imgOrig.getData();    
SampleModel sm = r.getSampleModel();
int width = sm.getWidth();
int height = sm.getHeight();
for (int x = 0; x < width; x++) {
    for (int y = 0; y < height; y++) {
        Object pixel = sm.getPixel(x, u, (int[])null, r.getDataBuffer());        
        System.out.println(cmImgOrig.getGreen(pixel));
    }
} 
```

# java - 在 GUI JTextArea 中显示 Jtidy 错误/警告消息

> ID：13282367
> 
> 赞同：0
> 
> 时间：2012-11-08T04:22:44.623
> 
> 标签：java, swing, jtextarea, jtidy

我正在编写一个程序，它使用 jtidy 从从 URL 获得的源代码中清理 html。我想在 GUI 中的 JTextArea 中显示错误和警告。我将如何将警告从打印到标准输出“重新路由”到 JTextArea？我查看了 Jtidy API 并没有看到任何我想要的东西。任何人都知道我该怎么做，或者甚至可能吗？

// 测试 jtidy 选项

```
public void test(String U) throws MalformedURLException, IOException
{
    Tidy tidy = new Tidy();
    InputStream URLInputStream = new URL(U).openStream();
    File file = new File("test.html");
    FileOutputStream fop = new FileOutputStream(file);

    tidy.setShowWarnings(true);
    tidy.setShowErrors(0);
    tidy.setSmartIndent(true);
    tidy.setMakeClean(true);
    tidy.setXHTML(true);
    Document doc = tidy.parseDOM(URLInputStream, fop);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:36:22.043

假设 JTidy 将错误和警告打印到标准输出，您可以[暂时更改`System.out`调用](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#setOut%28java.io.PrintStream%29)的位置：

```
PrintStream originalOut = System.out;
ByteArrayOutputStream baos = new ByteArrayOutputStream();
PrintStream myOutputStream = new PrintStream(baos);
System.setOut(myOutputStream);

// your JTidy code here

String capturedOutput = new String(baos.toByteArray(), StandardCharsets.UTF_8);
System.setOut(originalOut);

// Send capturedOutput to a JTextArea
myTextArea.append(capturedOutput); 
```

如果您也需要这样做，则有[一种类似的方法](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#setErr%28java.io.PrintStream%29)`System.err`。

# php - 如何构建我的数据库以进行游戏统计跟踪？

> ID：13282377
> 
> 赞同：1
> 
> 时间：2012-11-08T04:24:07.763
> 
> 标签：php, mysql, sql, database, schema

过去一年左右我一直在处理这个问题，改变我正在做的事情并尝试不同的事情。问题与模式有关，因此我仍然可以在玩家/氏族阶梯中很好地订购，但如果我们想稍后添加一个统计信息，它不会锁定我们的表格，因为每列一个统计信息会更改每一行。

我看到了如何做到这一点的两种选择，但似乎都不正确。一个是每列一个统计数据。将有 4 个表，user_stat_summary（用于梯子上显示的基本统计数据）、user_stat_beast（团队是人类与野兽）、user_stat_human 和 user_stat_overall。过去 30 天的统计数据随处可见。一项 cron 作业将通过查询 30 天之后发生的匹配并将这些统计信息从 3 个主表中取出并将它们放入整体表中来获取任何过时的统计信息。比赛将有每个球员在那场比赛中获得的统计数据。我在这里看到的问题是当我们有很多行时，如果说游戏发生了一点变化，我们就不能轻易地添加更多的统计数据。我在想的是每个表上的 extra_stats blob 列，如果我们添加新的统计数据，它们根本无法在梯子上排序。

另一种选择是 EAV 模型，这是我一直在玩的，但似乎无法正确处理。每个查询我会得到更多的行，然后将它们分组到用户中，并且该顺序在大多数情况下都可以工作，但我无法获得正确的分页限制，因为通常选择的行数未知。

我在想的是 EAV 模型，它有一个表格，存储每个统计数据的排名，可用于排序。所以EAV表目前如下......

```
CREATE TABLE `user_stat` (
    `user_id` int(10) unsigned NOT NULL,
    `stat_id` varchar(50) NOT NULL,
    `value` int(10) unsigned NOT NULL,
    PRIMARY KEY (`user_id`,`stat_id`),
    CONSTRAINT `user` FOREIGN KEY (`user_id`) REFERENCES `xf_user` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8

CREATE TABLE `user_human_stat` (
     `user_id` int(10) unsigned NOT NULL,
     `stat_id` varchar(50) NOT NULL,
     `value` int(10) unsigned NOT NULL,
     PRIMARY KEY (`user_id`,`stat_id`),
     CONSTRAINT `human_user` FOREIGN KEY (`user_id`) REFERENCES `xf_user` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8

CREATE TABLE `user_beast_stat` (
     `user_id` int(10) unsigned NOT NULL,
     `stat_id` varchar(50) NOT NULL,
     `value` int(10) unsigned NOT NULL,
     PRIMARY KEY (`user_id`,`stat_id`),
     CONSTRAINT `beast_user` FOREIGN KEY (`user_id`) REFERENCES `xf_user` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8

CREATE TABLE `user_stat_overall` (
     `user_id` int(10) unsigned NOT NULL,
     `human` blob NOT NULL,
     `beast` blob NOT NULL,
     `total` blob NOT NULL,
     PRIMARY KEY (`user_id`),
     CONSTRAINT `user_overall` FOREIGN KEY (`user_id`) REFERENCES `xf_user` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

所以我想我可以添加一个 user_stat_rank 表，它是 user_id、stat_id、rank。然后说我想获得按“kills”统计排序的梯子的第一页，我可以按 stat_id 是 kills 的排名获得所有 user_ids 顺序。然后进行第二次查询以填充所有用户统计信息。

在写完所有这些之后，它似乎可以正常工作，但我可能看不到任何东西。我也明白这个问题无处不在，所以如果您希望我在某些地方进行详细编辑，请说出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T06:30:20.680

为了便于管理，我会坚持为每个统计数据添加一列。从长远来看，这可能是管理它的最简单方法，而不会因为 EAV 模型对您施加的限制而陷入困境。

如果您担心统计表变得太大，您可以考虑实施某种形式的表分区，您可以定期将超过 4 周的数据移动到 (a) 历史表中。历史表可以被索引到极致，因为它们不需要不断更新。

# networking - 计算数据报网络中的数据包大小

> ID：13282379
> 
> 赞同：0
> 
> 时间：2012-11-08T04:24:14.013
> 
> 标签：networking, lan

在数据报网络中，数据包通过以下路线从节点 A 传输到 D：A → B → C → D。每条链路的数据速率为 1 Mbps。总的端到端延迟（从 A 到 D）为 0.4 秒。路线上的总等待时间为 0.25 s，总传播延迟为 0.12 s。以比特表示的数据包长度是多少？我不确定如何准确找到它。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T06:51:28.263

从单位的角度来看，从总时间中减去所有延迟，这样您剩下的就是带宽。以秒为单位的结果乘以以比特/秒为单位的带宽，结果以比特为单位。但是我不相信这真的是一个有效的程序。

# flash - 在flash cs3中播放其他音乐时如何停止音乐背景

> ID：13282380
> 
> 赞同：1
> 
> 时间：2012-11-08T04:24:14.327
> 
> 标签：flash, actionscript

在flash cs3 actionscript中播放其他音乐时如何停止音乐背景2，我也有音乐背景我点击按钮时有按钮（扬声器），背景音乐和按钮扬声器同时播放，如何停止背景声音

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:45:53.497

```
private function muteFunction(e:Event):void{
    if (isMuted==true) {
        sc = music.play();
        isMuted=false;
    }
    if (isMuted==false) {
        sc.stop();
        isMuted=true;
    }
} 
```

其中 sc 是 SoundChannel 对象。另一种方法是将音量设置为 0，这样它在技术上不会停止，但只是听不见。

# r - 如何选择和删除特定元素或在向量或矩阵中找到它们的索引？

> ID：13282382
> 
> 赞同：0
> 
> 时间：2012-11-08T04:24:27.133
> 
> 标签：r, vector, matrix, indices

假设我有两个向量：

```
x <- c(1,16,20,7,2)

y <- c(1, 7, 5,2,4,16,20,10) 
```

我想删除`y`不在`x`. 也就是说，我想`5, 4, 10`从`y`.

```
y
[1] 1 7 2 16 20 
```

最后，我想要向量`x`并且`y`必须拥有相同的元素。顺序无所谓。

我的想法：该`match`函数列出了两个向量包含匹配元素的索引，但我需要一个基本上相反的函数。我需要一个函数来显示两个向量中的元素不匹配的索引。

```
# this lists the indices in y that match the elements in x
match(x,y)
[1] 1 6 7 2 4   # these are the indices that I want; I want to remove
                # the other indices from y 
```

有谁知道如何做到这一点？谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T04:27:37.770

你在追求`intersect`

```
intersect(x,y)
## [1]  1 16 20  7  2 
```

如果您想要`y`in `x`、 using`which`和`%in%`(在内部`%in%`使用的元素的索引`match`，那么您在这里是正确的)

```
which(y %in% x)
## [1] 1 2 4 6 7 
```

正如@joran 在评论中指出的那样，`intersect`将删除重复项，因此如果您想返回真正的匹配项，这可能是一个安全的选择，例如

```
intersection <- function(x,y){.which <- intersect(x,y)
 .in <- x[which(x %in% y)]
 .in}

x <- c(1,1,2,3,4)
y <- c(1,2,3,3)

intersection(x,y)
## [1] 1 1 2 3
# compare with
intersect(x,y)
## [1] 1 2 3

intersection(y,x)
## [1] 1 2 3 3
# compare with 
intersect(y, x)
## [1] 1 2 3 
```

然后，您需要小心使用此修改后的功能进行排序（`intersect`因为它会删除重复的元素，所以可以避免这种情况）

* * *

如果你想要 y 的那些元素的索引不在 x 中，只需加上前缀，`!`因为 `%in% 返回一个逻辑向量

```
which(!y%in%x)

##[1] 3 5 8 
```

或者，如果您希望元素使用`setdiff`

```
setdiff(y,x)
## [1]  5  4 10 
```

# php - 如何使用 php 从 mysql 数据库中显示图像

> ID：13282386
> 
> 赞同：0
> 
> 时间：2012-11-08T04:24:45.017
> 
> 标签：php, mysql

> **可能重复：**
> [如何显示存储在数据库中的所有图像](https://stackoverflow.com/questions/8758548/how-to-display-all-the-images-stored-inside-a-database)

句法：

表语法：

```
create table users(id int, idimage blob); 
```

如何检索图像和显示？

```
$sql =mysql_query("SELECT idimage FROM users WHERE 1d=3");
//$resultimg = mysql_fetch_row("$sql");
while( $row = mysql_fetch_row( $sql ) ){ $IMDs[] = $row[0]; }
echo "<img src='".$IMDs[0]."'/>"; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:26:36.593

### 使用一个`blob`字段。

在 MySQL 中，有一个数据类型叫做`blob`. 您可以使用它来创建它。

有一个关于如何做到这一点的[**教程。**](http://vikasmahajan.wordpress.com/2010/07/07/inserting-and-displaying-images-in-mysql-using-php/)

### 将图像插入数据库：

```
# If no error
if($_FILES['userfile']['error']==UPLOAD_ERR_OK)
{
    # Check if the file is uploaded via HTTP POST
    if(is_uploaded_file($_FILES['userfile']['tmp_name'])) {
        $imgData = file_get_contents($_FILES['userfile']['tmp_name']);
        mysqli_connect("localhost", "$username", "$password");
        mysqli_select_db ("$dbname");
        $sql = "INSERT INTO `users` ( `idimage` ) VALUES ('{$imgData}')";
        mysqli_query($sql);
    }
} 
```

### 显示来自数据库的图像：

```
 <?php
      if(isset($_GET['id']) && is_numeric($_GET['id'])) {
           # Connect to DB
           $link = mysqli_connect("$hostname", "$username", "$password") or die("Could not connect: " . mysqli_error());
           mysqli_select_db("$database") or die(mysqli_error());

           # SQL Statement
           $sql = "SELECT `idimage` FROM `users` WHERE id=" . mysqli_real_escape_string($_GET['id']) . ";";
           $result = mysqli_query("$sql") or die("Invalid query: " . mysqli_error());

           # Set header
           header("Content-type: image/png");
           echo mysqli_result($result, 0);
      }
      else
           echo 'Please check the ID!';
 ?> 
```

### 最好避免`mysql_*`使用函数，而是使用`mysqli_*`or `PDO`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T04:29:24.387

你在变量 $IMDs[0] 中有图像的完整路径吗？如果不是，您必须在 src 标签中提供图像的路径

```
<img src="path/to/your/image" /> 
```

# python - 刽子手程序：循环验证

> ID：13282389
> 
> 赞同：1
> 
> 时间：2012-11-08T04:25:26.673
> 
> 标签：python

我正在用 python 编写一个刽子手游戏程序，并遇到了有关验证循环的问题。以下是问题类型的示例：

```
 def loopGet():
        condition = True
        while condition == True:
            userInput = raw_input("Enter a string: ")
            # assigns boolean value to condition
            condition = ifWon()
            # returns condition
            return condition
            #assigns boolean value
            condition = ifLost()
            #return condition
            return condition 
```

假装 ifWon() 和 ifLost() 已经创建，这是正在发生的事情和我试图弄清楚的一个例子。在我的程序中，即使两者都返回 True，循环也会结束。如果一个返回 True 而另一个 False，它仍然结束。我的印象是，如果“条件”返回 True，则循环应该继续运行；是的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:35:58.380

所以基本上你想循环直到 ifWon() 或 ifLost() 为真。

在原始代码中，当您在“if”之外“返回条件”时，您将立即离开循环。事实上，你永远不会到达 ifLost()，因为在此之前你只会在排队等候。

我认为你根本不需要“条件”......只需循环直到达到 True，然后返回。注意返回是如何在 if 中的，所以你只返回 true。

```
 def loopGet():
    while True:
        userInput = raw_input("Enter a string: ")
        # do something with input
        if ifWon():
            return 'Won'
        if ifLost()
            return 'Lost' 
```

有些人可能会反对嵌套返回，但这是一种非常简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:27:28.513

循环“结束”，因为方法的执行在`return`语句处停止。由于您的`return`语句在您的 while 循环内，因此您的条件似乎不起作用。

将`return`语句移出循环后，您将获得预期的结果。

* * *

```
def game():

    isWinner = False
    while isWinner == False:
       # as the user for a guess
       # check the guess
       isWinner = isWon()
    return "You won!" 
```

您将变量设置为要更改的条件。所以`isWinner = False`，然后`while isWinner == False:`做你的循环。如果`isWon()`返回`True`or `False`，那么在你的 while 中`isWinner = isWon()`。您不需要`isLost()`，因为我们希望在用户获胜时退出循环。

# jquery - jquery获取以前的ID

> ID：13282396
> 
> 赞同：0
> 
> 时间：2012-11-08T04:26:20.517
> 
> 标签：jquery, dom, jquery-selectors

jQuery是否可以在元素之后获取元素的先前ID？

例子：

```
<div class="dropdown-slider" style="z-index:5;" id="notrecon_dis">
   <span class="ddm" onclick="saveDD(this);" id="dd-cat 1">     
     <span class="label">
        cat 1
     </span>
   </span>
</div> 
```

我正在使用 onclick 获取单击的 id 值（**在上面的示例中为 dd-cat 1**），但我不确定如何获取前一个 id 元素（**这将是 notrecon_dis**）。

我怎么能用 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T04:33:43.720

```
var prevElem = $(this).parent().attr('id'); 
```

您需要删除 dd-cat 和 1 之间的空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T04:28:46.083

利用[`.closest()`](http://api.jquery.com/closest/)

```
$('.ddm').on('click', function() {
    var prevId = $(this).closest('div.dropdown-slider').attr('id');
    alert(prevId);
}); 
```

或者

```
function saveDD(elem){
    var prevId = $(elem).closest('div.dropdown-slider').attr('id');
    alert(prevId);
}; 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/ruUkn/)**

# ruby-on-rails - 如何在测试套件中的下一次测试之前关闭所有窗口？

> ID：13282399
> 
> 赞同：2
> 
> 时间：2012-11-08T04:26:41.117
> 
> 标签：ruby-on-rails, testing, selenium, rspec, selenium-chromedriver

```
[7] pry(#<RSpec::Core::ExampleGroup::Nested_1>)> page.execute_script "window.close()"
Selenium::WebDriver::Error::NoSuchWindowError: Script execution failed. Script: window.close();
 The window could not be found

[8] pry(#<RSpec::Core::ExampleGroup::Nested_1>)> page.driver.browser.window_handles
=> ["f1-2"] 
```

我打开了一个带有两个选项卡的浏览器，上面的命令确实关闭了一个，但最后一个选项卡永远不会关闭。它是打开的，但是当我尝试运行`page.execute_script "window.close()"`它时会出现上述错误。

```
page.driver.browser.window_handles.each do |handle|
  page.driver.browser.switch_to.window(handle)
  page.execute_script "window.close()"
end 
```

上面的代码在某个时候为我工作，但不再工作了。它给出了同样的错误。

更新：

当我使用时，

```
page.driver.browser.window_handles.each do |handle| 
   page.driver.browser.switch_to.window(handle) 
   page.driver.browser.close 
end 
```

它给出以下错误`Selenium::WebDriver::Error::UnknownError: 'auto_id'`不是指打开的选项卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:43:35.873

有两种方法可以做到

1.  符合您使用 JS 的技术。您首先需要切换回您的第一个浏览器窗口 (window_handle)，然后执行“window.close()”。（不推荐）（不知道为什么它现在不适合你，你升级了服务器版本还是不同的浏览器？）

2.  只需使用`@driver.quit`（首选）

**更新**

* * *

只写一次。这将关闭所有窗口。

```
 after(:each) do
    @driver.quit
  end 
```

如果您只想关闭一个浏览器选项卡/窗口/弹出窗口，请切换到该 window_handle 然后执行

```
@driver.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-19T12:45:08.160

`page.driver.browser.close`在最后关闭当前选项卡，最后一个（第二个）选项卡在每个示例之后自行关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T11:47:25.417

如果你使用的是黄瓜，你可以使用`BEFORE/AFTER`钩子。请参考[stackoverflow 上的类似问题，](https://stackoverflow.com/questions/16967397/selenium-cucumber-opening-too-many-windows) 了解更多关于黄瓜的信息，请参考这个[Cucumber Hooks](https://github.com/cucumber/cucumber/wiki/Hooks)

# java - 阶乘函数对 21 产生错误的结果！以上

> ID：13282402
> 
> 赞同：4
> 
> 时间：2012-11-08T04:27:06.920
> 
> 标签：java, long-integer, factorial, integer-overflow

```
for (int i = 0; i <= 25; i++)
    System.out.printf("%d! = %,d\n", i, factorial(i)); 
```

上面的代码初始化了下面的阶乘方法：

```
public static long factorial(int num1)
{
    if (num1 == 0)
        return 1;
    else
        return Math.abs(num1 * factorial(num1 - 1));
} 
```

因此，创建了以下输出：

```
0! = 1
1! = 1
2! = 2
3! = 6
4! = 24
5! = 120
6! = 720
7! = 5,040
8! = 40,320
9! = 362,880
10! = 3,628,800
11! = 39,916,800
12! = 479,001,600
13! = 6,227,020,800
14! = 87,178,291,200
15! = 1,307,674,368,000
16! = 20,922,789,888,000
17! = 355,687,428,096,000
18! = 6,402,373,705,728,000
19! = 121,645,100,408,832,000
20! = 2,432,902,008,176,640,000
21! = 4,249,290,049,419,214,848
22! = 1,250,660,718,674,968,576
23! = 8,128,291,617,894,825,984
24! = 7,835,185,981,329,244,160
25! = 7,034,535,277,573,963,776 
```

21的结果！是错误的（应该是 51,090,942,171,709,440,000），结果完全是 22！以上。谁能解释为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T04:30:09.370

对于第 21 个及以上的值，这些值变得不稳定，因为真实值对于 a 来说太大了`long`。如果您需要更大的数字，请使用[`BigInteger`](https://docs.oracle.com/javase/8/docs/api/java/math/BigInteger.html).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T04:44:56.497

在 Java中 an 可以取的最大值`long`是 9,223,372,036,854,775,807 并且在`20!`.

您应该使用 BigInteger 计算阶乘。

例如：

```
 BigInteger n = BigInteger.ONE;
    for (int i=1; i<=20; i++) {
        n = n.multiply(BigInteger.valueOf(i));
        System.out.println(i + "! = " + n);
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T05:01:14.117

使用 long 可以表示 **-9,223,372,036,854,775,808**到**+9,223,372,036,854,775,807**（[来源](http://www.cafeaulait.org/course/week2/02.html)），因此一旦阶乘通过该范围，您就会开始出错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T04:33:00.413

一切似乎都还可以，取决于`long`容量。你为什么要使用 Math.abs() ？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T04:37:49.060

这不是明显的不稳定。看[这里](http://en.wikipedia.org/wiki/Factorial)。到 20 岁时你的表现还不错。在那之后，我会开始查看 long (9223372036854775807) 的最大值。

# java - 在不触摸标题的情况下显示 ExpandableList Child

> ID：13282408
> 
> 赞同：0
> 
> 时间：2012-11-08T04:27:36.433
> 
> 标签：java, android, click

ExpandableListView 的默认行为是在单击标题时折叠组。不点击就可以显示吗？始终显示孩子而不点击

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T04:36:14.503

尝试使用此代码

```
ExpandableListView mExpandableListView = (ExpandableListView) findViewById(R.id.exListview);
int count = viewAdapter.getGroupCount();
for (int position = 1; i <= count; position++)
{
    mExpandableListView.expandGroup(position - 1);
} 
```

# c# - C#通过OLEDB从Excel中提取格式化文本

> ID：13282410
> 
> 赞同：1
> 
> 时间：2012-11-08T04:27:44.827
> 
> 标签：c#, excel, datatable, connection-string, oledb

我正在从一个`excel`带有格式化文本的大文件中读取数据。我通过&将数据提取到`DataTable`对象。但提取的数据不包含任何格式化信息。`oleDBConnection``GetOleDbSchemaTable`

我的要求是，我只需要提取非删除线文本。

我在阅读时没有任何问题，一切都很好。但是我的提取应该基于`excel`我无法找到解决方案的文本格式。

其中要添加的`connectionString`内容如下：

```
connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + fileName + "; Extended Properties=\"Excel 12.0 Xml;HDR=YES;Mode=Read;ReadOnly=True;\""; 
```

约束：

1.  使用 OleDBConnection - 无互操作

2.  读取数据表对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:39:45.730

据我所知，仅使用 ACE 驱动程序是无法做到这一点的。话虽如此，如果限制被解除，这是使用的工具： [http ://closedxml.codeplex.com/](http://closedxml.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:48:35.893

如果您不想使用 Interop，则必须使用“Open Xml”来获取格式信息。没有其他选择。我提到的 Biff 只是为了正确，但您的连接字符串清楚地指示 XML，所以 Biff 不存在。

通过“Open Xml”打开后，您可以“模拟”读取范围/表格/单元格，如`DataTable`.

有了你的限制，只有#1 会给你格式信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T04:42:12.640

您应该转换您的方法以使用开放 XML。它是 .NET，而不是 COM

信息： http: [//support.microsoft.com/kb/840817](http://support.microsoft.com/kb/840817)

下载 SDK：[http ://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=5124](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=5124)

# asp.net - 使用 asp.net 发送电子邮件

> ID：13282417
> 
> 赞同：0
> 
> 时间：2012-11-08T04:28:29.640
> 
> 标签：asp.net, email, smtp

我想使用 asp.net 发送电子邮件，我已经配置了我的 SMTP 服务并添加了 127.0.0.1 作为中继。我以前在家里申请成功了，但是我在办公室安装它不能发送电子邮件，为什么？

这是C#代码

```
MailMessage objemail = new MailMessage();
objemail.To.Add(new MailAddress("apthodisiac@gmail.com"));
objemail.From = new MailAddress(Request.Form["inputEmail"].ToString());
objemail.Subject = Request.Form["inputSubject"].ToString();
objemail.Body = "Dari: " + Request.Form["inputName"].ToString() + "\n\n" +
                "Phone: " + Request.Form["inputPhone"].ToString() + "\n\n" +
                Request.Form["inputMsg"].ToString();
objemail.IsBodyHtml = true;
objemail.Priority = MailPriority.Normal;

SmtpClient objSmtpClient = new SmtpClient();
objSmtpClient.Send(objemail); 
```

这是 web.config 配置

```
<system.net>
<mailSettings>
  <smtp deliveryMethod="Network">
    <network host="127.0.0.1" port="25" userName="yyyy" password="xxxxx" />
  </smtp>
</mailSettings>
</system.net> 
```

我的办公室使用代理，是我无法发送电子邮件的问题吗？请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:40:15.683

可能是**端口号**错误尝试使用端口号`"587"`如下所示：

```
private void SendEmail(string from, string to, string subject, string body)
    {
      MailMessage mail = new MailMessage(new MailAddress(from), new MailAddress(to));

      mail.Subject = subject;
      mail.Body = body; 

      SmtpClient smtpMail = new SmtpClient("smtp.gmail.com");
      smtpMail.Port = 587;
      smtpMail.EnableSsl = true;
      smtpMail.Credentials = new NetworkCredential("xxx@gmail.com", "xxx");
      // and then send the mail
      smtpMail.Send(mail);
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-08T08:31:40.550

你可以试试这个：

```
objSmtpClient.EnableSsl = true 
```

# python - 返回该部分所有学生的平均分

> ID：13282418
> 
> 赞同：0
> 
> 时间：2012-11-08T04:28:29.897
> 
> 标签：python, whitespace, space, average

我知道它已经被问过了，但答案超级不清楚

第一个要求是打开一个文件（遗憾的是我不知道该怎么做）
第二个要求是一段代码，它执行以下操作：

每行代表一个学生，由一个学号、一个姓名、一个部门代码和一个期中成绩组成，所有这些都用**空格分隔**

所以我不认为我可以定位该元素，因为它被空格分开？

这是文件的摘录，显示了行结构

```
987654322  Xu  Carolyn  L0101   19.5
233432555    Jones  Billy Andrew      L5101   16.0
555432345    Patel  Amrit                 L0101   13.5
888332441    Fletcher Bobby L0201   18
777998713   Van Ryan  Sarah Jane         L5101   20 
877633234    Zhang  Peter             L0102   9.5
543444555    Martin  Joseph           L0101   15    
876543222    Abdolhosseini  Mohammad Mazen  L0102 18.5 
```

我得到了以下提示：

*   请注意，每个学生的姓名数量各不相同。
*   用于`rstrip()`去除行尾多余的空格。

我不明白第二个提示。

这是我到目前为止所拥有的：

```
counter = 0  
elements = -1  

for sets in the_file  
    elements = elements + 1  
    if elements = 3 
```

我知道这与`readlines()`定位部分代码有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:55:49.320

```
marks = [float(line.strip().split()[-1]) for line in open('path/to/input/file')]
average = sum(marks)/len(marks) 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:40:20.347

[打开并写入文件](http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files) [剥离方法](http://docs.python.org/2/library/stdtypes.html?highlight=strip#str.strip)

像这样的东西？

```
data = {}
with open(filename) as f:#open a file

    for line in f.readlines():#proceed through file lines

        #next row is to split data using spaces and them skip empty using strip
        stData = [x.strip() for x in line.split() if x.strip()]

        #assign to variables
        studentN, studentName, sectionCode, midtermGrade = stData
        if sectionCode not in data:
            data[sectionCode] = []

        #building dict, key is a section code, value is a tuple with student info
        data[sectionCode].append([studentN, studentName, float(midtermGrade)]

#make calculations
for k,v in data.iteritems():#iteritems returns you (key, value) pair on each iteration
    print 'Section:' + k + ' Grade:' + str(sum(x[2] for x in v['grade'])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T04:41:50.837

或多或少：

```
infile = open('grade_file.txt', 'r')
score = 0
n = 0
for line in infile.readlines():
    score += float(line.rstrip().split()[-1])
    n += 1

avg = score / n 
```

# caching - Coldfusion cachedAfter 和 cachedWithin 建议

> ID：13282423
> 
> 赞同：4
> 
> 时间：2012-11-08T04:28:52.807
> 
> 标签：caching, coldfusion

好吧，事情就是这样。。

我的问题很简单......如果“cachedWithin”缓存特定时间的查询，而“cachedAfter”在特定时间后缓存查询，那么如何在“从现在起 2 小时后缓存查询并将其缓存 10 分钟”？

我想在 2 小时后缓存一个查询并将其缓存 10 分钟。我一直在关注 ColdFusion 9 的快速通道，但它没有任何示例满足我的要求。

请帮我解决一下这个。任何帮助将不胜感激...

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:53:14.680

嗯，这是一个有趣的标签。

因此，cachedafter 所做的是说查询在特定时间后将是静态的。

因此，以下代码将在服务器时间今天下午 3 点之后开始缓存查询。

```
<cfset cachedate = CreateOdbcDateTime(dateformat(now(),'yyyy-mm-dd') & ' 15:00:00') />
<cfquery .... cachedafter="#cachedate#"....>
  QUERY
</cfquery> 
```

更常见的是，cachedwithin 告诉 Cold Fusion 仅每 6 小时运行一次此查询。我通常将它用于可能不会经常更改的数据或需要很长时间才能加载的数据。

```
<cfquery ... cachedwithin="#CreateTimeSpan(0, 6, 0, 0)#" ...>
  QUERY
</cfquery> 
```

[更好的解释](http://www.coldfusionmuse.com/index.cfm/2008/3/18/cachedafter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-10T22:34:36.747

这里还有两个示例演示了如何使用 cachedafter。

使用它每天刷新一次数据：

```
<cfquery .... cachedafter="#DateFormat( Now(), 'YYYY-MM-DD')#"> 
```

当明天日期翻转时，查询将运行并刷新。

或者，使用它在每个请求中只运行一次相同的查询：

```
<cfset Request.Cachetime = DateFormat( Now() ,"MM/DD/YYYY" ) & " " & TimeFormat( Now(), "HH:MM:SS.L" )>
<cffunction name="getstuff">
    <cfquery name="LOCAL.result" cachedafter="#Request.Cachetime#">
    ....
    </cfquery>
    <cfreturn LOCAL.result />
</cffunction> 
```

您可以在同一个请求中调用 getstuff() 100 次，它只会对数据库执行一次。根据您的代码重用级别，这可以派上用场。

然后回答最初的问题，这些属性本身都不会在 2 小时后缓存 10 分钟。一种选择可能是在某个范围内创建持久变量以跟踪 now()+2 小时和 now()+2:10，然后仅当 now() 介于这两个时间之间时才将 cachedwithin 设置为 10 分钟。

# php - Xpath 代码在 firepath 中有效，但在 php 脚本中无效

> ID：13282425
> 
> 赞同：2
> 
> 时间：2012-11-08T04:29:07.580
> 
> 标签：php, xpath, firepath

```
 $html = new DOMDocument();
        @$html->loadHtmlFile($url);
        $xpath = new DOMXPath( $html );
        //Query to pull all reviews on the page
        $q="//div[starts-with(@id,empReview_)]/h3/meta[1]/@content";
        $nodelist = $xpath->query($q);

        foreach ($nodelist as $n){
            echo $n->nodeValue;
            echo"<br><br>";

        } 
```

我正在尝试在以下 XML 上运行的查询：

```
<div id="empReview_2055942" class="employerReview" itemscope="" itemtype="http://schema.org/Review">
    <h2 class="summary">
    <h3 class="review-microdata-heading">
        <span class="gdRatingStars"> </span>
        Former 
        <span itemprop="author">IT Engineer Intern in Santa Clarita, CA</span>
        <meta content="4" itemprop="reviewRating"/> 
```

使用 Firepath 时它直接进入元素，但没有通过我在 php.ini 中的查询回显该值。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:34:58.920

您的 xpath 查询错误，应该是：

```
$q="//div[starts-with(@id,empReview_)]/h2/h3/meta[1]/@content"; 
```

（您缺少“h2”）。您的代码应如下所示...

```
$html = new DOMDocument();

$html->loadHtml('
  <div id="empReview_2055942" class="employerReview" itemscope="" itemtype="http://schema.org/Review">
      <h2 class="summary">
      <h3 class="review-microdata-heading">
          <span class="gdRatingStars"> </span>
          Former 
          <span itemprop="author">IT Engineer Intern in Santa Clarita, CA</span>
          <meta content="4" itemprop="reviewRating"/>
      </h3> <!-- presumably your input has closing tags -->
      </h2>
  </div>
  <div id="empReview_2055947" class="employerReview" itemscope="" itemtype="http://schema.org/Review">
      <h2 class="summary">
      <h3 class="review-microdata-heading">
          <span class="gdRatingStars"> </span>
          Former 
          <span itemprop="author">Some Other Random Thing</span>
          <meta content="7" itemprop="reviewRating"/>
      </h3>
      </h2>
  </div>
');

$xpath = new DOMXPath( $html );
//Query to pull all reviews on the page
$q="//div[starts-with(@id,empReview_)]/h2/h3/meta[1]/@content";
$nodelist = $xpath->query($q);

foreach ($nodelist as $n){
  echo $n->nodeValue;
  echo"<br><br>\n";
} 
```

我得到以下输出：

```
4<br><br>
7<br><br> 
```

# c - 从字符串中读取 RSA 密钥

> ID：13282426
> 
> 赞同：1
> 
> 时间：2012-11-08T04:29:15.153
> 
> 标签：c, ssl, openssl, rsa

我正在尝试使用 RSA 使用 OpenSSL 解密一些东西。我想加载一个公钥。为此提供的默认函数是 PEM_read_RSA_PUBKEY() ，它需要一个文件描述符。

我想将键作为字符串嵌入到程序中。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:41:52.137

用于`d2i_RSA_PUBKEY`直接从包含二进制 DER 格式的缓冲区加载：

```
const unsigned char *p = key;
RSA *r = d2i_RSA_PUBKEY(NULL, &p, keylen); 
```

# html - 有多少帖子作者想向它展示作者框

> ID：13282429
> 
> 赞同：0
> 
> 时间：2012-11-08T04:29:54.223
> 
> 标签：html, wordpress, wordpress-theming

我想要我的网站在所有帖子作者框中显示的任何作者有多少帖子。我怎么能点它。我的作者框 css 代码如下所示。[我的网站](http://dewdropzone.com)。

```
/***** Author Box *****/
.post-gravatar { position: relative; width: 60px; height: 60px; margin: 0 10px 0 0; float: left; }
.post-gravatar img { display: block; width: 50px; height: 50px; border: 1px solid #d9d9d9; background: #fcfcfc; padding: 4px; }
#author-box, #archived-author-box { position: relative; width: 598px; margin: 0 15px 25px; background: #f1f1f1; border: 1px solid #d9d9d9; padding: 10px; }
#author-box h3 { color: #222; font-size: 1.1em; margin: 0 0 10px; text-transform: uppercase; }
#author-text, #archived-author-text { position: relative; width: 528px; float: right; }
#author-text p { font-size: 1.2em; line-height: 1.6em; margin: 0 0 10px; }
#archived-author-text p { font-size: 1.2em; line-height: 1.6em; }
#author-text p a, #author-text p a:visited,
#archived-author-text p a, #archived-author-text p a:visited { text-decoration: none; }
#author-text p a:hover, #author-text p a:active,
#archived-author-text p a:hover, #archived-author-text p a:active { text-decoration: underline; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:06:03.553

你想显示每个作者写过的帖子数吗？

有一个名为`the_author_posts()` [（Codex）的函数](http://codex.wordpress.org/Function_Reference/the_author_posts)

例如，在您的循环中，您可以像这样使用它：

```
<p><?php the_author(); ?> has blogged <?php the_author_posts(); ?> posts.</p> 
```

可以翻译类似的东西

```
<p>Firstname Lastname has blogged 213 posts</p>" 
```

# javascript - 如何在 ruby on rails 站点中要求特定资源的 javascript 文件？

> ID：13282430
> 
> 赞同：1
> 
> 时间：2012-11-08T04:29:58.823
> 
> 标签：javascript, ruby-on-rails

> **可能重复：**
> [使用 Rails 3.1，你把你的“页面特定”javascript 代码放在哪里？](https://stackoverflow.com/questions/6167805/using-rails-3-1-where-do-you-put-your-page-specific-javascript-code)

我有一个名为 course store 的控制器，我希望仅在该页面上包含来自第三方的外部 js 文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:52:02.437

你可以用`content_for`,

```
<% content_for :head do %>
  <%= javascript_include_tag 'admin' %>  
<% end %> 
```

或者

```
<% content_for :head do %>
  <script type="text/javascript">
    $(function() {
      ...
      ...
    });
  </script>
<% end %> 
```

**更多**：[http ://apidock.com/rails/ActionView/Helpers/CaptureHelper/content_for](http://apidock.com/rails/ActionView/Helpers/CaptureHelper/content_for)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:45:10.593

像这样的东西应该工作......

```
<%= javascript_include_tag( "http://www.example.com/xmlhr" ) if params[:controller] == 'course_store'  %> 
```

# objective-c - 我们可以将标签栏放在顶部> 吗？

> ID：13282444
> 
> 赞同：2
> 
> 时间：2012-11-08T04:31:27.640
> 
> 标签：objective-c, xcode4.5

假设我喜欢标签栏样式按钮，我想把它放在屏幕上的某个地方。

我可以这样做吗？

这是 tabbar 的文档

```
Provides a mechanism for displaying a tab bar at the bottom of the screen and supports the display and selection of tab bar items (instances of UITabBarItem). You can use UITabBarDelegate to specify custom views for tab bar items. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:45:02.470

不。根据定义，标签栏位于屏幕底部——顶部是为导航栏保留的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T05:09:28.223

是的，您可以将它放在顶部，但它可能与 HIG 相对。但是，我不明白你的问题的意图——你显然试图把它放在顶部，那么为什么要问一个你已经知道答案的问题呢？

# ruby-on-rails - 创建辅助删除选项

> ID：13282445
> 
> 赞同：1
> 
> 时间：2012-11-08T04:31:46.993
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我创建了一个表，该表随着时间的推移由用户填充 status_updates。每个状态都可以单独删除。

这是通过调用 status_update_controller 中的 destroy 方法并在名为 correct_user 的私有方法中标识特定的 status_update 来完成的。

所以基本上它看起来像这样：

在我的 status_update_controller 顶部

```
before_filter :correct_user, only: :destroy 
```

销毁方法

```
def destroy
    @status_update.destroy
    redirect_to root_url
end 
```

和私有的正确用户方法

```
private

    def correct_user
      @status_update = current_user.status_update.find_by_id(params[:id])
      redirect_to root_url if @status_update.nil?
    end 
```

* * *

我的问题是这样的：

如何选择特定用户的所有 status_updates 并使用按钮或链接销毁它们？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:40:43.977

在你的内部定义`StatusUpdatesController`一个这样的动作：

```
def delete_all
  current_user.status_updates.delete_all
end 
```

您还需要路由到此操作：

```
resources :status_updates do
  collection do
    delete :delete_all
  end
end 
```

并制作一个按钮：

```
button_to "Delete the everything", delete_all_status_updates_path, :method => :delete 
```

# jquery - 如何获取在 javascript 中使用 JQrelcopy 创建的重复项的计数？

> ID：13282446
> 
> 赞同：0
> 
> 时间：2012-11-08T04:31:46.563
> 
> 标签：jquery, yii

我有一个带有 JQrelcopy 扩展的表单

在 copy 类中有两个字段 fromtime 和 totime。我知道我可以使用 $_POST 在控制器中获取它。

> 但我想使用脚本来计算重复次数

如果我知道计数，那么只有我可以将它放在循环中并遍历每个值。我使用的两个字段是（fromtime 和 totime）CHtml::dropdownfields

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:55:43.443

如果您在所有重复项上具有相同的类，如下所示：

```
<input type="text" class="duplicate-field" name="field1" />
<input type="text" class="duplicate-field" name="field2" />
<input type="text" class="duplicate-field" name="field3" /> 
```

那么你可以很容易地计算它们的出现：

`var duplicate_count = $(".duplicate-field").length;`

# php - 使用 Facebook、Google 或 Twitter 登录时如何合并用户帐户？

> ID：13282454
> 
> 赞同：7
> 
> 时间：2012-11-08T04:33:16.403
> 
> 标签：php, authentication, oauth-2.0

在我的网站上，我设置了使用 Google 登录、使用 Facebook 登录和使用 Twitter 登录。

但是，如果同一用户使用不同的提供者登录，即。用户首先使用 Facebook 登录，然后注销，然后使用 Google 登录我需要确定两者是同一个人。

目前我正在做的是，如果 Facebook 和 Google 帐户具有相同的电子邮件 ID，我将合并这些帐户。问题是，如果用户使用 Twitter 登录，我将无法获得他们的电子邮件 ID，这意味着我无法唯一识别他们。

有没有人有任何其他的解决方案？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T05:06:39.393

您可以考虑将用户 fb、gmail 或 twitter 链接到您网站上的本地数据库，

替代方法

每当用户使用任何方法登录时都会生成从您的 mysql 数据库生成的用户 ID 并保存到 cookie，下次用户通过任何方法登录时都会检索 ip 和 cookie 详细信息并相应地更新您的 mysql 数据库。下次用户登录时，您的系统将知道他们的详细信息。

希望能帮助到你。

# iphone - iPhone 中的 IMEI 替代

> ID：13282456
> 
> 赞同：0
> 
> 时间：2012-11-08T04:33:27.970
> 
> 标签：iphone, ios, imei

我正在为 iPhone 开发一个应用程序，其中设备在后端注册。对于 Android 版本，我从设备中获取 IMEI 并使用存储在后端的 IMEI 对其进行身份验证。但是，Apple 不允许从设备获取 IMEI，我应该使用什么替代方法才能进行身份验证，因为这是强制性的。此外，用户可以根据需要更改 IMEI（适用于 Android 版本。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:35:54.740

您可以使用此库为每个设备生成唯一标识符，而不是使用 IMEI。

[https://github.com/gekitz/UIDevice-with-UniqueIdentifier-for-iOS-5](https://github.com/gekitz/UIDevice-with-UniqueIdentifier-for-iOS-5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T06:00:34.367

使用 Ben 发布的链接，使用以下代码

`[[UIDevice currentDevice] uniqueGlobalDeviceIdentifier]`这是通用的，因为它使用 MAC 地址，然后对其进行散列处理，它将始终是唯一的，并且任何人都无法更改它

如果您使用此代码

`[[UIDevice currentDevice] uniqueDeviceIdentifier]`它将为您拥有的每个应用程序创建一个不同的标识符，因为它会根据捆绑标识和 MAC 地址创建一个哈希。您可以使用顶部的一个将多个应用程序注册到同一个应用程序

# android - android中线性/真实布局的七边形形状

> ID：13282458
> 
> 赞同：1
> 
> 时间：2012-11-08T04:33:29.940
> 
> 标签：android

```
 heptagon shape for Linear/Realtive Layout in android
             inside heptgone we insert login form 
```

在 heptgone 内的 android 中线性/真实布局的七边形形状我们插入登录表单，即登录表单包含 LinearLAyout 在线性布局中包含用户名、密码和登录按钮

# iphone - 如何在 IOS 设备中运行示例项目？

> ID：13282460
> 
> 赞同：0
> 
> 时间：2012-11-08T04:33:56.073
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我正在处理与音频捕获相关的任务，我已经从 Apple 网站下载了 speak here 示例代码，我只想运行和调试它的功能，当我在我的设备上尝试时，它说无效的提供证书，我知道是什么临时证书，我们注册了我们的应用程序。我的问题是如何在设备中运行示例项目。有什么办法吗？

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:40:42.197

要在任何 iOS 设备上安装应用程序，您必须有一个开发者帐户，而且它不是免费的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T05:05:18.243

你可以去这个网站

`http://jailcoder.com/`

这个程序所做的是在 Xcode 中修补 SDKSettings.plist 并修补您的项目（只需添加一个运行脚本）并使用伪造的配置证书安装在您的设备上。这一切都是完全可逆的。您需要安装越狱设备`appsync`。

然后你可以为设备构建，它会在你的设备而不是模拟器上运行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T05:28:38.723

要在 iOS 设备上安装用于开发或分发的应用程序，您必须“注册”或“购买”到**Apple 的**开发人员计划或企业计划。

1.  **开发者程序** 它也有开发者证书以及分发证书，但它遵循的 UUID 表示要安装在设备上的设备 ID。

2.  **企业程序** 它也有开发者证书以及分发证书，但 UUID 意味着设备 ID 对于**内部**分发配置文件安装在设备上是可选的，因此您可以安装在任何设备上。

# python - 如何在不遍历我想要添加的所有内容（再次）的情况下在 set 的子类中进行就地联合？

> ID：13282461
> 
> 赞同：0
> 
> 时间：2012-11-08T04:34:05.713
> 
> 标签：python, set

## 背景

我只是在一门课程之后做一个练习（如果有人好奇的话，在 FXPHD 的 pyt201），我们正在构建的其中一件事是一个 SequentialRange 类，它旨在表示镜头的帧。为简单起见，假设整数帧数并且没有奇怪的子帧渲染。

我正在实现的一种方法是`add_frames(self, *frames)`接受大量未指定的迭代并将它们添加进去。演示代码只是这样做：

```
for frame in imap(int, chain(*frames)):
        self.add(frame) 
```

## 我想..

...避免这种行为，因为如果您传入格式错误的序列（例如，[1,2,”fish”,6,7]），您生成的 SequentialRange 将处于那些丑陋的半处理状态之一，这对任何人都没有帮助. 因为它是一个集合，所以我知道你可以只修补输入，然后读取它，然后欺骗将被抛出，但我想把它写下来，以便 add_frames() 操作更加二进制，或者成功加载所有帧，或者不会污染现有的集合。

基本上，我的思考过程是，我将有一个`add_frame()`方法，我会做任何必要的神秘巫术（现在只是`self.add(int(the_input_frame_value))`），这在某种程度上为我提供了我对输入的健全性检查。所以我可以从输入中创建一个临时集，如果成功，则将临时集和原始集合并。我发现的问题是联合返回我一个由两组联合组成的副本，所以我不得不求助于：

```
temporary_set = SequentialRange()
try:
    for frame in itertools.chain(*frames):
        temporary_set.add_frame(frame)
except ValueError:
    # placeholder flameout message
    print("malformed input, no changes made")
    return
except:
    raise

for x in temporary_set:
    self.add_frame(x) 
```

## 它有效，但...

...我不相信重新遍历该系列是个好主意。感觉，呃……错了？主要是因为我已经遍历了我的输入以进行完整性检查，所以我不喜欢在添加阶段重复。

所以是的，关于我做错了什么有什么建议吗？我无法摆脱这样一种感觉，即我缺少一些可以使这更容易的东西，但与此同时，由于这是纯粹的学习，因此也欢迎使用替代方法来解决问题。

# javascript - 如何对完全间隔的名称进行模式匹配？

> ID：13282464
> 
> 赞同：1
> 
> 时间：2012-11-08T04:34:43.213
> 
> 标签：javascript, regex

如果需要，如何为只能包含由单个空格分隔的字母的名称编写模式？如果有多个名称，则它们必须用一个空格分隔。

例如， `"Jane Doe"`and`"Jane"`是正确的，但是，`" Jane"`or `"Jane "`or`"Jane Doe"`都是不正确的。

我的图案，

```
/^([A-za-z]+ ?[A-za-z]+){1}$/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T04:52:14.933

如果我对你的理解正确，试试这个：

```
/^[A-Za-z]+(\s[A-Za-z]+)?$/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T04:52:24.057

您的正则表达式没有检查完整的大写字母范围（Az 必须是 AZ）

注意：这是假设您的问题包含错字并且实际上“Jane Doe”或“Jane Doe”是不正确的。

```
var patt=new RegExp(/^([A-Za-z]+ ?[A-Za-z]+){1}$/);
document.write(patt.test(" Jane Doe") + '<br/>'); --false
document.write(patt.test("Jane Doe") + '<br/>'); --true
document.write(patt.test(" Jane") + '<br/>'); -- false
document.write(patt.test("Doe ") + '<br/>'); -- false
document.write(patt.test("Doe") + '<br/>'); -- true 
```

见小提琴：http: [//jsfiddle.net/FEycT/4/](http://jsfiddle.net/FEycT/4/)

# c++ - 程序崩溃，树太大

> ID：13282467
> 
> 赞同：4
> 
> 时间：2012-11-08T04:35:07.390
> 
> 标签：c++, recursion, tree

我试图作为练习来回答这个问题：

这里有一组 {50,25,10,5,1} 美分的硬币放在一个盒子里。编写一个程序，找出通过对硬币分组来创建 1 美元的方法的数量。

我的解决方案包括制作一棵树，每条边都具有上述值之一。然后每个节点将持有硬币的总和。然后我可以填充这棵树并查找加起来为 100 的叶子。所以这是我的代码

```
class TrieNode
{
public:
    TrieNode(TrieNode* Parent=NULL,int sum=0,TrieNode* FirstChild=NULL,int children=0, bool key =false )
        :pParent(Parent),pChild(FirstChild),isKey(key),Sum(sum),NoChildren(children)
    {
        if(Sum==100)
            isKey=true;
    }
    void SetChildren(int children)
    {
        pChild = new TrieNode[children]();
        NoChildren=children;
    }
    ~TrieNode(void);

    //pointers
    TrieNode* pParent;
    TrieNode* pChild;

    int NoChildren;

    bool isKey;
    int Sum;
};

void Populate(TrieNode* Root, int coins[],int size)
{
    //Set children
    Root->SetChildren(size);

    //add children
    for(int i=0;i<size;i++)
    {
        TrieNode* child  = &Root->pChild[0];
        int c = Root->Sum+coins[i];
        if(c<=100)
        {
            child = new TrieNode(Root,c);

            if(!child->isKey) //recursively populate if not a key
                Populate(child,coins,size);
        }
        else 
            child = NULL;
    }
}

int getNumKeys(TrieNode* Root)
{
    int keys=0;

    if(Root == NULL)
        return 0;

    //increment keys if this is a key
    if(Root->isKey)
        keys++;

    for(int i=0; i<Root->NoChildren;i++)
    {
        keys+= getNumKeys(&Root->pChild[i]);
    }

    return keys;
}

int _tmain(int argc, _TCHAR* argv[])
{
    TrieNode* RootNode = new TrieNode(NULL,0);
    int coins[] = {50,25,10,5,1};
    int size = 5;

    Populate(RootNode,coins,size);
    int combos =  getNumKeys(RootNode);

    printf("%i",combos);

    return 0;
} 
```

问题是树太大了，几秒钟后程序就崩溃了。我在 Windows 7、四核、8gb 内存上运行它。粗略的计算告诉我我应该有足够的内存。

我的计算不正确吗？操作系统是否限制我可以访问的内存量？我可以在仍然使用此解决方案的同时修复它吗？

感谢所有反馈。谢谢。

**Edit1：** 我已经验证上述方法是错误的。通过尝试用一组只有 1 个硬币构建一棵树。硬币[] = {1};

我发现算法仍然失败。在阅读了 Lenik 和 João Menighin 的帖子后，我想出了这个解决方案，它将两个想法联系在一起，形成一个递归解决方案，它可以采用任何大小的数组

```
//N is the total the coins have to amount to
int getComobs(int coins[], int size,int N)
{
    //write base cases
    //if array empty | coin value is zero or N is zero
    if(size==0 || coins[0]==0 ||N==0)
        return 0;

    int thisCoin = coins[0];
    int atMost = N / thisCoin ;

    //if only 1 coin denomination
    if(size==1)
    {
        //if all coins fit in N
        if(N%thisCoin==0)
            return 1;
        else
            return 0;
    }

    int combos =0;
    //write recursion
    for(int denomination =0; denomination<atMost;denomination++)
    {
        coins++;//reduce array ptr

        combos+= getComobs(coins, size-1,N-denomination*thisCoin);

        coins--;//increment array ptr
    }

    return combos;
} 
```

感谢所有的反馈

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T05:03:17.593

对于这个问题，树解决方案是完全错误的。这就像抓到 10e6 只老虎，然后只放一只老虎，只因为你需要一只老虎。非常耗费时间和内存——99.999% 的节点是无用的，应该首先忽略。

**这是另一种方法**：

*   注意你不能赚到超过两个 50 美分的美元
*   再次注意你不能让一美元包含超过四个 25 美分的硬币
*   注意...（你明白了吗？）

那么你的解决方案很简单：

```
for( int fifty=0; fifty<3; fifty++) {
    for( int quarters=0; quarters<5; quarters++) {
        for( int dimes=0; dimes<11; dimes++) {
            for( int nickels=0; nickels<21; nickels++) {
                int sum = fifty * 50 + quarters * 25 + dimes * 10 + nickels * 5;
                if( sum <= 100 ) counter++;  // here's a combination!!
            }
        }
    }
} 
```

你可能会问，为什么我对一分钱币没有做任何事情？答案很简单，只要`sum`小于 100，剩下的就填满 1 美分。

附言。希望这个解决方案不是太简单=）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T04:49:37.293

好的，这不是一个完整的答案，但可能会对您有所帮助。您可以尝试执行（我所说的）健全性检查。为每个创建的节点放置一个`static`计数器`TrieNode`，看看它增长了多大。如果您进行了一些计算，您应该能够判断它是否达到了一些疯狂的值。

系统可以限制可用的内存，但这真的很奇怪。通常，用户/管理员可以出于某些目的设置此类限制。这经常发生在专用的多用户系统中。另一件事可能是在 64 位 Windows 环境中拥有 32 位应用程序。那么内存限制将是 4GB，但这也很奇怪。任何我认为不受操作系统限制的都是这里的问题。

在旁注中。我希望你确实意识到你用这段代码打败了所有面向对象的编程概念:)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T04:43:15.360

我需要更多时间来分析您的代码，但现在我可以说这是一个经典的动态编程问题。您可能会在这里找到一些有趣的文本：

[http://www.algorithmist.com/index.php/Coin_Change](http://www.algorithmist.com/index.php/Coin_Change)

和这里

[http://www.ccs.neu.edu/home/jaa/CSG713.04F/Information/Handouts/dyn_prog.pdf](http://www.ccs.neu.edu/home/jaa/CSG713.04F/Information/Handouts/dyn_prog.pdf)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T04:56:05.607

有一种更简单的方法可以找到解决方案：

```
#include <iostream>
#include <cstring>
using namespace std;
int main() {
    int w[101];
    memset(w, 0, sizeof(w));
    w[0] = 1;
    int d[] = {1, 5, 10, 25, 50};
    for (int i = 0 ; i != 5 ; i++) {
        for (int k = d[i] ; k <= 100 ; k++) {
            w[k] += w[k-d[i]];
        }
    }
    cout << w[100] << endl;
    return 0;
} 
```

（[链接到ideone](http://ideone.com/clone/t1khZN)）

这个想法是通过添加逐渐变大面额的硬币来逐步建立进行更改的方法的数量。外部循环的每次迭代都会遍历我们已经拥有的结果，并且对于可以使用新添加的硬币构造的每个数量，添加可以构造小于当前硬币值的组合的方式的数量。例如，如果当前硬币是`5`并且当前金额是`7`，则算法查找`2`可以构造的方式数，并将其添加到`7`可以构造的方式数中。如果当前硬币是`25`并且当前金额是`73`，则该算法查找构造方法的数目`48`( `73-25`)到先前找到的构造方法数目。`73`. 最后，里面的数字`w[100]`代表赚一美元的方法数（292种）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T06:24:09.917

我真的相信有人必须提出最有效和最简单的实现，这是对 lenik 答案的改进：
内存：恒定
运行时间：将 100 视为**n**，然后运行时间约为 O(n (lg(n))) <-*我不确定*

```
for(int fifty=0; fifty <= 100; fifty+=50)
    for(int quarters=0; quarters <= (100 - fifty); quarters+=25)
        for(int dimes=0; dimes <= (100 - fifty - quarters); dimes+=10)
            counter += 1 + (100 - fifty - quarters - dimes)/5; 
```

我认为这可以在恒定时间内解决，因为任何序列和都可以用线性公式表示。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T04:40:01.110

问题可能是无限递归。您不会在任何地方增加 c 并且循环以 c<=100 运行

**编辑1：**我不确定是否

```
int c = Root->Sum+coins[i]; 
```

实际上超过了 100。请确认

**编辑 2：**我错过了正确初始化的 Sum，并在下面的评论中更正了。

**编辑 3：** *调试方法*- 您可以做的另一件事是，为这棵树编写一个打印函数，或者更确切地说，随着现有代码的深入，在每个级别上打印。添加一个计数器，在总共 10 次迭代后终止循环。打印件会告诉您是否收到垃圾值或您的 c 正在朝着正确的方向逐渐增加。

# android - 如何在确定和不确定之间切换进度对话框？

> ID：13282468
> 
> 赞同：10
> 
> 时间：2012-11-08T04:35:10.977
> 
> 标签：android

我有一个 AsyncTask 来处理一个运行时间相当长的更新过程，我想要一个按顺序显示的进度对话框：

1.  “开始更新”（片刻）
2.  “正在下载更新”（没有进度条——我在下载之前不知道更新会有多大）
3.  “保存更新数据”（带有 0-100% 进度条）
4.  “保存更新图像”（带有 0-100% 进度条）
5.  “更新完成”（对话框消失前的一秒）

我在确定（显示进度条）和不确定（无进度条）之间切换进度对话框时遇到问题。

我的 AsyncTask 中的代码如下：

```
private final ProgressDialog progressDialog;

public SynchronizeTask(Activity activity)
{
    progressDialog = new ProgressDialog(activity);
    progressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
}

protected void onPreExecute() {
    progressDialog.setMessage("Starting update...");
    progressDialog.setCancelable(false);
    progressDialog.show();
}

...lots of code here...

// all of these are set from doInBackground()
private String progressMsg;
private int progressTotal;
private int progressProgress;

protected void onProgressUpdate(Void... values) {
    progressDialog.setMessage(progressMsg);
    if (progressTotal > 0) {
        progressDialog.setIndeterminate(false);
        progressDialog.setMax(progressTotal);
        progressDialog.setProgress(progressProgress);
    } else {
        progressDialog.setIndeterminate(true);
        progressDialog.setMax(0);
        progressDialog.setProgress(0);
    }
} 
```

我尝试切换确定`setIndeterminate()`- 这里的问题是进度对话框在对话框底部显示“NaN”和“0％”，即使在不确定模式下没有“栏”。

然后我尝试使用`setProgressNumberFormat()`and`setProgressPercentFormat()`只是为了隐藏这些数字——但在 3.0 以下的 Android 中都不支持这些数字。

然后我尝试使用`setProgressStyle()`在 STYLE_SPINNER 和 STYLE_HORIZONTAL 之间切换——调用`setProgressStyle()`我的`onProgressUpdate()`似乎会导致我的应用程序崩溃。

有没有什么简单的方法可以在确定模式和不确定模式之间切换进度对话框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T04:38:16.843

关闭一个进度对话框并以不同的样式打开另一个进度对话框可能是个好主意。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-01-10T15:50:42.967

您可以将代码更改为：

```
protected void onProgressUpdate(Void... values) {
    progressDialog.setMessage(progressMsg);
    if (progressTotal > 0) {
        progressDialog.setIndeterminate(false);
        progressDialog.setProgressNumberFormat("%1d/%2d");
        progressDialog.setProgressPercentFormat(NumberFormat.getPercentInstance());
        progressDialog.setMax(progressTotal);
        progressDialog.setProgress(progressProgress);
    } else {
        progressDialog.setIndeterminate(true);
        progressDialog.setProgressNumberFormat(null);
        progressDialog.setProgressPercentFormat(null);
    }
} 
```

# iphone - 如何在没有扩展名的情况下显示图像和图像名称

> ID：13282472
> 
> 赞同：2
> 
> 时间：2012-11-08T04:35:47.073
> 
> 标签：iphone, ios, uiimageview, nsmutablearray

在我看来，我有 1 个`UIimageview`和 4 个`UIButton`，我展示了来自`NSMutableArray`. 如何在`UIButton`没有图像视图图像名称的情况下将标题显示为`.png`？我尝试使用以下编码

```
imageary=[[NSMutableArray alloc]initWithObjects:[UIImage imageNamed:@"dear.jpg"],[UIImage imageNamed:@"donkey.jpg"],[UIImage imageNamed:@"elephant.jpg"],[UIImage imageNamed:@"fox.jpg"],[UIImage imageNamed:@"giraffe.jpg"],[UIImage imageNamed:@"goat.jpg"],[UIImage imageNamed:@"buffallo.jpg"],[UIImage imageNamed:@"bull.jpg"],[UIImage imageNamed:@"cow.jpg"],[UIImage imageNamed:@"crocodile.jpg"], nil];

 - (NSString *) convertToDisplayName:(NSString *)actual
{
return [actual stringByReplacingOccurrencesOfString:@".png" withString:@" "];

} 
```

尝试使用上述方法检索名称时

```
int i=0;
for(UIView *view in self.view.subviews)
{
    if([view isKindOfClass:[UIButton class]])
    {
       mybutton = (UIButton *)view;
        if(mybutton.tag == 1||mybutton.tag == 2||mybutton.tag == 3||mybutton.tag == 4)
        {

             animage.image=[imageary objectAtIndex:i];
            name=[self convertToDisplayName:[imageary objectAtIndex:i]];
            [mybutton setTitle:name forState:UIControlStateNormal];
            NSLog(@"current image name :%@",name);
            i++;

        }
    }
   } 
```

它显示错误

```
 Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIImage stringByReplacingOccurrencesOfString:withString:]: unrecognized selector sent to instance 0x73f8eb0 
```

请帮助我必须纠正的地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T04:47:21.573

您在该函数中传递 UIImage 对象，因为您应该维护图像名称数组并在此函数中传递该图像名称，并且您可以通过使用此方法删除扩展名来简单地获取名称：

```
[actual stringByDeletingPathExtension]; 
```

这是你应该做的

```
imageary=[[NSMutableArray alloc]initWithObjects:@"dear.jpg",@"donkey.jpg",@"elephant.jpg",@"fox.jpg",@"giraffe.jpg",@"goat.jpg",@"buffallo.jpg",@"bull.jpg",@"cow.jpg",@"crocodile.jpg", nil]; // declare array of names not images
 - (NSString *) convertToDisplayName:(NSString *)actual
{
  return [actual stringByDeletingPathExtension]; //return image name without extension
} 
```

比这个

```
int i=0;
for(UIView *view in self.view.subviews)
{
if([view isKindOfClass:[UIButton class]])
{
   mybutton = (UIButton *)view;
    if(mybutton.tag == 1||mybutton.tag == 2||mybutton.tag == 3||mybutton.tag == 4)
    {
         i = rand() % [imageary count]; // set random image
         animage.image=[UIImage imageNamed:[imageary objectAtIndex:i]]; // return image with this name
        name=[self convertToDisplayName:[imageary objectAtIndex:i]];
        [mybutton setTitle:name forState:UIControlStateNormal];
        NSLog(@"current image name :%@",name);
        i++;

    }
}
} 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:39:48.570

在这行代码中：

```
name=[self convertToDisplayName:[imageary objectAtIndex:i]]; 
```

您正在将`UIImage`对象传递给需要对象的方法`NSString`。

您需要传递文件名，而不是图像。

作为旁注 - 这一行：

```
return [actual stringByReplacingOccurrencesOfString:@".png" withString:@" "]; 
```

应该：

```
return [actual stringByReplacingOccurrencesOfString:@".png" withString:@""]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T05:24:12.077

看起来

> [图像对象AtIndex：我]

是一个

> UIImage

目的。它不是 NSString。所以你得到了例外。

您可以使用图像名称制作图像，您可以这样做

> animage.image= [UIImage imageNamed:[imageary objectAtIndex: i ]];

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T07:42:39.903

您可以使用： `NSArray *arr = [[imageary objectAtIndex:indexNo] componentsSeparatedByString:@"."]; Nsstring *imageName = [arr objectAtIndex:0];`

你可以使用 imageName 来设置你的 UIButton 标题

# php - 使用 php webform 请求 URL

> ID：13282479
> 
> 赞同：0
> 
> 时间：2012-11-08T04:36:49.720
> 
> 标签：php, forms, url, redirect, web

第一次在这里发帖。我对 PHP 几乎没有经验。但是，我确实为小型企业提供简单、基本的网页设计服务。

我想知道 PHP Web 表单是否可以根据表单的输入将访问者引导到 URL。

我问这个是因为我想在他们搜索可用域名时让客户在我自己的域上启动，并最终在我的经销商平台的域上，作为执行搜索的结果。

在我的经销商平台上搜索“blablabla”后，我最终找到了 URL：http://instinct-it.secureapi.com.au/system/domain/domain_register/?domain=blablabla&tld%5B%5D= [。 com.au&tld%5B%5D=.net.au&tld%5B%5D=.com&tld%5B%5D=.net&tld%5B%5D=.co.uk](http://instinct-it.secureapi.com.au/system/domain/domain_register/?domain=blablabla&tld%5B%5D=.com.au&tld%5B%5D=.net.au&tld%5B%5D=.com&tld%5B%5D=.net&tld%5B%5D=.co.uk)

这似乎也指定了域后缀和域名本身。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:55:46.933

最好的方法是客户端，而不是 PHP。您需要了解需要在 URL 中传递哪些变量，并将表单方法设置为获取、操作到适当的 URL。

# opengl - Opengl cl 互操作

> ID：13282482
> 
> 赞同：0
> 
> 时间：2012-11-08T04:37:29.530
> 
> 标签：opengl, interop, opencl

我正在使用带有 Windows 7 操作系统的 Nvidia 210/PCIe。Opencl 1.0、Opengl 3.3 和显示驱动程序 306.97。任何人都可以帮助我以上是否支持 Opengl_cl 互操作以及我应该下载什么工具包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:27:15.697

*   要开始开发 OpenCL 应用程序，您需要获取**NVidia SDK**：[https ://developer.nvidia.com/cuda-toolkit](https://developer.nvidia.com/cuda-toolkit)

*   **您可以通过扫描支持的扩展来查找“ cl_khr_gl_sharing** ”来检查 OpenCL/OpenGL 互操作功能：

.

```
#include <iostream>
#include <CL/cl.hpp>

int main()
{
    std::vector<cl::Platform> platforms;
    cl::Platform::get(&platforms);

    std::vector<cl::Device> devices;
    platforms[0].getDevices(CL_DEVICE_TYPE_ALL, &devices);

    for (int i = 0; i < devices.size(); ++i)
    {
        std::string name = devices[i].getInfo<CL_DEVICE_NAME>();
        std::string extensions = devices[i].getInfo<CL_DEVICE_EXTENSIONS>();

        std::cout << name
                  << std::endl
                  << "OpenGL interop supported : "
                  << (extensions.find("cl_khr_gl_sharing") != std::string::npos ? "YES" : "NO")
                  << std::endl;
    }

    return 0;
} 
```

# c++ - 在 C++ 中将二进制日期保存到文件中

> ID：13282489
> 
> 赞同：0
> 
> 时间：2012-11-08T04:38:08.387
> 
> 标签：c++, binary, binary-data

我的算法产生 9 位和 17 位的流，我需要找到将这些数据存储在文件中的解决方案。但我不能只将 9 位存储为 int，将 17 位存储为 int_32。

例如，如果我的算法产生 10x9 位和 5x17 位，则输出文件大小需要为 22 字节。

还有一个要解决的大问题是输出文件可能非常大并且文件的大小是未知的。

我现在唯一的想法是使用 bool *vector;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T06:53:25.810

如果您必须保存动态位，那么您可能应该保存两个值：第一个是位数（如果位从 0 到 x 是连续的），*或者*是表示哪些位有效的位掩码；第二个是代表您的位的 32 位整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:35:10.983

从字面上看你的例子：如果你想存储 175 位并且它由两个不同长度的未知数量的实体组成，那么文件绝对不能只有 22 个字节。您需要知道文件中前面的内容，您需要长度。如果你只有两种可能的尺寸，那么它只能是一个位。0 表示 9 位，1 表示 17 位。

```
|0|9bit|0|9bit|1|17bit|0|9bit|1|17bit|1|17bit|... 
```

因此，对于您的示例，您需要 10*(1+9)+5*(1+17) = 190 位 ~ 24 字节。突出的 2 位需要用 0 填充，以便在字节边界对齐。您将继续读取文件，就好像有另一个实体一样（因为您说您不知道文件有多长）这一事实不应该成为问题，因为最后一个这样的填充将始终小于 9 位。到达文件末尾后，您可以丢弃最后一次不完整的阅读。

这种方法确实需要实现字节级流的位级操作。这意味着仔细的屏蔽和逻辑操作。BASE64 就是这样，只是比你更简单，只包含固定的 6 位实体，存储在文本文件中。

# php - 阻止自动 Web 内容收集器/爬虫

> ID：13282492
> 
> 赞同：1
> 
> 时间：2012-11-08T04:38:18.627
> 
> 标签：php, javascript, web, cryptography, web-crawler

每个人 ！

我想知道是否有一种简单的方法可以阻止共享网络主机上的自动内容爬虫（LAMP，无 root 访问权限）。

例如。我有大量 jpg 图像，有人决定制作一个自动程序（php 或其他程序）来下载我所有的图像数据。

我正在考虑使用 javascript 在客户端解密图像，从而使爬虫收集所有数据变得更加困难或更加努力。但我不确定对没有 javascript 支持的浏览器的影响，以及防止此类爬虫的有效性。

当然，应该允许好的搜索引擎爬虫。

除了图像，文本、音频或视频内容呢？我应该如何处理它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:46:33.667

除非您的内容隐藏在某种形式的身份验证之后，否则任何认真尝试的人*都*可以获取您的内容。也就是说，您可以采取一些措施来增加使用`.htaccess`文件的难度。

为防止盗链（从其他站点引用您的文件），您可以添加以下内容以阻止访问以 gif、jpg、js 或 css 结尾且没有您的站点的任何内容`HTTP_REFERER`：

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http://(www\.)?mydomain.com/.*$ [NC]
RewriteRule \.(gif|jpg|js|css)$ - [F] 
```

您还可以阻止用户代理访问（[此处为完整列表](http://www.javascriptkit.com/howto/htaccess13.shtml)）：

```
RewriteEngine On 
RewriteCond %{HTTP_USER_AGENT} ^BlackWidow [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Zeus 
RewriteRule ^.* - [F,L] 
```

如果您确定了要阻止的“坏”机器人，则按 IP 阻止：

```
order allow,deny
deny from 123.45.67.89
allow from all 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:45:58.440

这是被问得最多的问题之一，“*如何保护我的内容不被盗*”。

简单的答案，你不能，甚至不能对抗人类。但是，您可以使用一些我不会涉及的技巧来使其更难掌握。

无法完全阻止某人窃取您的内容的原因是，当此人访问您的网站时，他们会实际下载该页面的输出。我所说的输出是服务器发送给客户端的内容。

此时，客户端可以完全访问浏览器正在显示或已使用的所有内容，您无法停止此操作。如果您不想拍摄图像，请不要将它们放到网上。

注意：您可以在图像上添加水印，这样如果它们被盗，那么您的徽标就会出现在它们上面，但这在大多数情况下对设计没有吸引力

我希望这有帮助！

# android - 如何在不刷新页面的情况下获取listview信息？

> ID：13282499
> 
> 赞同：0
> 
> 时间：2012-11-08T04:38:52.643
> 
> 标签：android, listview, refresh

我目前正在为我的最后一年项目开发一个 Android 应用程序。但老实说，我没有任何基础知识，一切都是从零开始，并且经常参考在线教程。这是我的问题，我试图从 listview 活动中检索数据。我的页面中有两个使用按钮的列表视图。我能够显示第一个列表视图，但是当它获取第二个列表视图的数据时，第一个列表视图的数据会因为页面刷新而消失，反之亦然。我应该修改什么代码来获取页面中的数据？（数据库尚未实现）请帮助，非常感谢。下面是我的编码。

**XML 的编码。**

```
 <!-- Location -->
      <TextView android:id="@+id/TextViewLocation"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip"
            android:layout_marginBottom="10dip"
            android:text="Location Information"
            android:gravity="center"
            android:textSize="15dip"
            android:textColor="#025f7c"/>

      <!--  Condition Label -->
      <TextView android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textColor="#372c24"
            android:text="Traffic Condition"/>
      <Button android:id="@+id/inputListView"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip"
            android:layout_marginBottom="10dip"
            android:text="choose one..."/>

      <!--  Comment Label -->
      <TextView android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textColor="#372c24"
            android:text="What's Happening?"/>
      <Button android:id="@+id/inputListView2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip"
            android:layout_marginBottom="10dip"
            android:text="choose one..."/>

      <!--  Suggestion Label -->
      <TextView android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textColor="#372c24"
            android:text="Comments / Suggestion"/>
      <EditText android:layout_width="fill_parent"
            android:layout_height="80dp"
            android:layout_marginTop="5dip"
            android:layout_marginBottom="10dip"
            android:singleLine="true"/>
      <!-- Image button -->
      <Button android:id="@+id/btnImage"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip"
            android:text="Upload Image"/>

      <!-- Report button -->
      <Button android:id="@+id/btnReportCheckin"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip"
            android:text="Report"/>

      <!-- Link to Logout -->
      <TextView android:id="@+id/linkLogout"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip"
            android:layout_marginBottom="40dip"
            android:text="Log Out"
            android:gravity="center"
            android:textSize="20dip"
            android:textColor="#025f7c"/>

    </LinearLayout>
    <!-- Check or Report Form Ends --> 
```

**活动类的编码**

```
public class CheckinActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Set View to checkin.xml
    setContentView(R.layout.checkin);
    /*
    TextView LocationView = (TextView) findViewById(R.id.TextViewLocation);
    Intent h = getIntent();
    // getting attached intent data
    String address = h.getStringExtra("address");
    // displaying selected product name
    LocationView.setText(address); */ 
    Button ListViewScreen = (Button) findViewById(R.id.inputListView);
    //Listening to Button 
    ListViewScreen.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            //Switching to ListView Screen
            Intent i = new Intent(getApplicationContext(), ListViewActivity.class);
            startActivity(i);
        }
    }   );

    Button SelectedView = (Button) findViewById(R.id.inputListView);
        Intent i = getIntent();
        // getting attached intent data
        String product = i.getStringExtra("product");
        // displaying selected product name
        SelectedView.setText(product);

    Button ListView2Screen = (Button) findViewById(R.id.inputListView2);

  //Listening to Button 
    ListView2Screen.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            //Switching to ListView Screen
            Intent j = new Intent(getApplicationContext(), ListView2Activity.class);
            startActivity(j);
        }
    }   );  

    Button SelectedView2 = (Button) findViewById(R.id.inputListView2);

    Intent j = getIntent();
    // getting attached intent data
    String product2 = j.getStringExtra("product2");
    // displaying selected product name
    SelectedView2.setText(product2);

    TextView Logout = (TextView) findViewById(R.id.linkLogout);
    // Listening to Log out
    Logout.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
                            // Closing menu screen
            // Switching to Login Screen/closing register screen
            finish();
        }
    });
}
} 
```

**列表视图类的编码**

```
 public class ListViewActivity extends ListActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // storing string resources into Array
        String[] traffic_condition = getResources().getStringArray(R.array.traffic_condition);

        // Binding resources Array to ListAdapter
        this.setListAdapter(new ArrayAdapter<String>(this, R.layout.listitem, R.id.listViewLayout, traffic_condition));

        ListView lv = getListView();

        // listening to single list item on click
        lv.setOnItemClickListener(new OnItemClickListener() {
          public void onItemClick(AdapterView<?> parent, View view,
              int position, long id) {
              // selected item
              String product = ((TextView) view).getText().toString();
              // Launching new Activity on selecting single List Item
              Intent i = new Intent(getApplicationContext(), CheckinActivity.class);
              // sending data to new activity
              i.putExtra("product", product);
              startActivity(i);
          }
        });
    }
} 
```

希望我说清楚了，如果需要，我可以提供我的应用程序的屏幕截图，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:38:04.390

尝试调用 adapter.notifyDataSetChanged(); 就在你设置了listview的适配器之后。这样，数据集（在您的情况下为列表）中的更改将显示在您的列表视图中。

我希望这个答案对你有帮助

# iphone - NSSortDescriptor/NSPredicate 来组织我的 tableView

> ID：13282500
> 
> 赞同：0
> 
> 时间：2012-11-08T04:39:10.647
> 
> 标签：iphone, ios, uitableview, core-data

我有一个表格视图。在表格视图中，有一个自定义`UILabel`，每个标签都有一个字母。“A、B、C、D”等。您可以点击导航栏上的加号按钮，它会将您带到另一个视图控制器以输入信息，然后您点击保存，它会将行添加到表格视图中。有没有一种方法可以利用`NSSortDescriptor`/`NSPredicate`将所有“A”组合在一起（这意味着我希望所有带有 a 的单元格相互关联，但我仍然希望它们在同一部分中。）如果这是有道理的！有没有办法做到这一点？我`Core Data`用来保存我的所有信息。任何帮助表示赞赏。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:04:24.547

我假设您正在使用`NSFetchedResultsController`. 如果没有，请重构并执行。

无论如何，在使用参数初始化获取的结果控制器期间，键路径会处理节分组`sectionKeyPath`。

由于排序不会改变，只需在初始化 fetched results 控制器之前将排序描述符添加到 fetch 请求中：

```
fetchRequest.sortDescriptors = @[[NSSortDescriptor 
       sortDescriptorWithKey:@"textAttributeName" ascending:YES]]; 
```

其中 textAttributeName 是您在实体中调用的 ABC 标签属性。

# php - 如何将变量传递给动作挂钩函数？

> ID：13282503
> 
> 赞同：4
> 
> 时间：2012-11-08T04:39:20.163
> 
> 标签：php, jquery, wordpress, action, hook

我有一个函数可以在我的 WordPress 主题中初始化一个图像滑块，但是我无法将 PHP 变量传递给它。这是代码：

```
function slideshowSettings ($pause_time) {
$code = "<script>
jQuery(function(){
    jQuery('#camera_wrap_3').camera({
        height: '40%',
        thumbnails: true,
        time: ".$pause_time.",
        fx: '".$transition_effect."',
        transPeriod: ".$transition_speed.",
        autoAdvance: ".$auto_advance.",
        minHeight: '50px',
        mobileNavHover: false,
        imagePath: '".get_template_directory_uri()."/images/'
    });
});
</script>";

echo $code;
}
add_action('wp_head', 'slideshowSettings'); 
```

变量分配在函数上方，但我从函数获得的输出如下所示：

```
<script>
jQuery(function(){

    jQuery('#camera_wrap_3').camera({
        height: '40%',
        thumbnails: true,
        time: ,
        fx: '',
        transPeriod: ,
        autoAdvance: ,
        minHeight: '50px',
        mobileNavHover: false,
        imagePath: 'http://www.brainbuzzmedia.com/themes/simplybusiness/wp-content/themes/simplybusiness/images/'
    });
});
</script> 
```

我怎样才能传递这些变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T04:56:09.310

您不能向函数添加参数，因为当函数调用`wp_head`时，没有任何参数传递给您的钩子函数。的论据是`do_action('wp_head');``wp_head()``add_action()`

1.  挂钩的动作，在你的情况下是“wp_head”
2.  您要执行的功能，在您的情况下为“slideshowSettings”
3.  执行的优先级，默认为10
4.  您的函数接受的参数数量（但是必须通过这些参数`do_action`）

如果您需要能够在挂钩函数之外将这些值传递给`wp_head`，我将使用它`apply_filters`来修改一个值：

```
function slideshowSettings(){
    // set up defaults
    $settings = array('pause_time'=>10, 'other'=>999);
    $random_text = "foo";

    // apply filters
    $settings = apply_filters('slideshow_settings', $settings, $random_text);

    // set array key/values to variables
    extract( $settings );

    // will echo 1000 because value was updated by filter
    echo $pause_time;

    // will echo "foobar" because key was added/updated by filter
    echo $random_text; 

    // ... more code
}
add_action( 'wp_head', 'slideshowSettings' );

function customSettings($settings, $random_text){
    // get your custom settings and update array
    $settings['pause_time'] = 1000;
    $settings['random_text'] = $random_text . "bar";
    return $settings;
}
// add function to filter, priority 10, 2 arguments ($settings array, $random_text string)
add_filter( 'slideshow_settings', 'customSettings', 10, 2 ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T04:13:49.883

将 PHP 变量传递给 Javascript 的正确方法是使用[`wp_localize_script`](http://codex.wordpress.org/Function_Reference/wp_localize_script).

查看[Otto 的这篇文章](http://ottopress.com/2010/passing-parameters-from-php-to-javascripts-in-plugins/)。还有这个[WordPress StackExhange 的问答](https://wordpress.stackexchange.com/q/46809/12615)。

* * *

在您的问题中，您没有显示这些变量的来源，因此它们正在打印......什么也没有。

我刚做了一个测试。这将在数​​据库中创建选项值。

```
add_action( 'init', 'so_13282503_init' );

function so_13282503_init() 
{
    if( !get_option('pause_time') )
    {
        update_option('pause_time', '50');
        update_option('transition_effect', 'elastic.easeIn');
        update_option('transition_speed', '400');
        update_option('auto_advance', '4');
    }
} 
```

这是您的代码的改编版本：

```
add_action( 'wp_head', 'slideshowSettings' );

function slideshowSettings () 
{
    $pause_time = get_option('pause_time');
    $transition_effect = get_option('transition_effect');
    $transition_speed = get_option('transition_speed');
    $auto_advance = get_option('auto_advance');
    $code = "<script>
    jQuery(function(){
        jQuery('#camera_wrap_3').camera({
           height: '40%',
            thumbnails: true,
            time: ".$pause_time.",
            fx: '".$transition_effect."',
            transPeriod: ".$transition_speed.",
            autoAdvance: ".$auto_advance.",
            minHeight: '50px',
            mobileNavHover: false
        });
    });
</script>
";

    echo $code;
} 
```

这导致在`<head>`站点中打印此内容：

![呈现的 html 中的代码结果](../Images/b09c5fcccece4a5fbd06fb5418e554cf.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T04:44:36.543

[您可以在add_action()](http://codex.wordpress.org/Function_Reference/add_action)中的优先级参数之后传递参数的数量

```
 <?php add_action( $tag, $function_to_add, $priority, $accepted_args ); ?> 
```

wordpress codex 有一些关于它的例子。

您应该注意，您的函数实际上只接受参数，并且您正在使用未定义的变量，例如 `$transition_effect`,`$transition_speed`和`$auto_advance`在该函数中。

# mercurial - 在 mercurial 中，什么是忽略文件更改而不从任何人的存储库中删除工作副本的最佳方法

> ID：13282504
> 
> 赞同：0
> 
> 时间：2012-11-08T04:39:34.820
> 
> 标签：mercurial

我不希望从其他开发人员的机器中删除此文件，但我也不希望再跟踪它。它基本上是一个设置文件，一开始就不应该签入。

我想我必须告诉其他开发人员备份这个文件。然后我可以进行删除，并将其添加到 .hgignore。然后他们必须将文件放回他们的工作目录。

似乎 hg forget 仅适用于我的机器，然后下次另一个开发人员进行拉取时，它会清除他们的文件。

有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:53:28.793

> 似乎 hg forget 仅适用于我的机器，然后下次另一个开发人员进行拉取时，它会清除他们的文件。

是的，非版本化文件将仅保存（一段时间）在您的 WC 中

如果你不想杀死文件而只是忽略，你可以

*   手动提交时使用 -X 文件名（或写在别名部分）
*   安装（在所有工作场所）[排除扩展](http://mercurial.selenic.com/wiki/ExcludeExtension)（来自第 1 页的半自动化解决方案）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T03:30:26.263

他们不需要备份它。它已备份在存储库中。您可能希望让他们在他们从您那里撤出之前提交他们的最新版本，这样他们就不会丢失最新的更改。当他们丢失文件时，他们可以做`hg log <file>`然后`hg revert <latest revision - 1> <file>`取回。

# django - cmsplugin-zinnia 抛出一个名为EntryMenu 的无模块

> ID：13282509
> 
> 赞同：3
> 
> 时间：2012-11-08T04:39:55.870
> 
> 标签：django, django-cms, django-syncdb

尝试运行 python manage.py syncdb 时遇到问题。我正在使用 django-CMS 构建一个站点，并为博客功能添加 cmsplugin-zinnia。但这即将出现，我无法弄清楚为什么，查看代码 EntryMenu 存在。

`raise ImproperlyConfigured('ImportError %s: %s' % (app, e.args[0])) django.core.exceptions.ImproperlyConfigured: ImportError cmsplugin_zinnia.menu.EntryMenu: No module named EntryMenu`

我做了很多谷歌搜索，没有看到任何关于这个问题的帖子。如果你能指出我正确的方向，我会很感激。谢谢！

**设置：**

```
 INSTALLED_APPS = (
    # 'tinymce',
    'html5boilerplate',
    'raven.contrib.django',
    'robots',
    'south',
    'cms',
    'mptt',
    'menus',
    'sekizai',
    'reversion',
    'templateland',
    'tagging',
    'zinnia',
    'cmsplugin_zinnia',

    'contralogy.apps.frontend',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.comments',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.admin',
    'django.contrib.humanize',
    'django.contrib.redirects',
    'django.contrib.sitemaps',

    'cms.plugins.flash',
    'cms.plugins.googlemap',
    'cms.plugins.link',
    'cms.plugins.picture',
    'cms.plugins.teaser',
    'cms.plugins.text',
    'cms.plugins.video',
    'cms.plugins.twitter',

    'cmsplugin_zinnia.menu.EntryMenu',
    'cmsplugin_zinnia.menu.CategoryMenu',
    'cmsplugin_zinnia.menu.TagMenu',
    'cmsplugin_zinnia.menu.AuthorMenu',

    #admin tool
    'admin_tools',
    'admin_tools.theming',
    'admin_tools.menu',
    'admin_tools.dashboard',

    'filer',

)

CMS_TEMPLATES = (
    ('contralogy/home.html', 'Home Page'),
    ('contralogy/template_1.html', 'Template One'),
)

ZINNIA_ENTRY_BASE_MODEL = 'cmsplugin_zinnia.placeholder.EntryPlaceholder' 
```

**点冻结**

```
BeautifulSoup==3.2.1
Django==1.3.1
MySQL-python==1.2.3
PIL==1.1.7
South==0.7.5
-e git://github.com/Fantomas42/cmsplugin-zinnia.git@3790581ae8f669ad37dcdaedf86ee6ca61e1d06b#egg=cmsplugin_zinnia-dev
django-admin-tools==0.4.0
django-appconf==0.5
-e git://github.com/Fantomas42/django-blog-zinnia.git@12e825ff3d25d47d43882db2ea83961038372de8#egg=django_blog_zinnia-dev
django-classbasedsettings==1.0b2
django-classy-tags==0.3.4.1
django-cms==2.3.3
django-compressor==1.1.2
django-debug-toolbar==0.9.4
django-filer==0.8.5
django-mptt==0.5.2
django-reversion==1.5.1
django-robots==0.8.1
django-sekizai==0.6.1
django-tagging==0.3.1
django-tinymce==1.5.1b2
django-xmlrpc==0.1.4
easy-thumbnails==1.1
html5lib==0.95
pyparsing==1.5.6
pytz==2012h
raven==2.0.0
simplejson==2.4.0 
```

如果有更多需要了解，请告诉我。先感谢您！

# objective-c - MailCore CFNetwork.framework 依赖使用无效位置

> ID：13282513
> 
> 赞同：4
> 
> 时间：2012-11-08T04:40:04.983
> 
> 标签：objective-c, mailcore

我是 Xcode 和 Objective C 开发的新手，我正在尝试为 Mac OSX 环境导入 github MailCore [InboxListener 示例](https://github.com/mronge/MailCore/tree/master/Examples/OSX/InboxLister)Xcode 项目。[我按照MailCore 网站上](http://libmailcore.com/)的 Mac OSX 说明进行操作，项目构建但没有运行。MailCore 似乎依赖于 /System/Library/Frameworks/CFNetwork.framework，它在我的 Mac OS X 10.7.5 上的 /System/Library/Frameworks/ 目录中不存在。

CFNetwork.framework 确实存在于 /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks 中，但为什么 MailCore 不知道在哪里可以找到它？如何更改 MailCore 使用的位置？

我尝试在构建阶段链接 CoreServices.framework 和 CFNetwork.framework，但没有成功链接二进制文件。相同的运行时错误。

**运行时输出：**

```
dyld: Library not loaded: /System/Library/Frameworks/CFNetwork.framework/Versions/A/CFNetwork
  Referenced from: /Users/cgray/Library/Developer/Xcode/DerivedData/InboxLister-hjoeknampqddvifxyoqwhozaricj/Build/Products/Debug/MailCore.framework/Versions/A/MailCore
  Reason: image not found
(lldb) 
```

![在此处输入图像描述](../Images/f882da424770e9cbc332cc92e245ba63.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T13:42:36.210

这对我来说是一个脑筋急转弯！

我决定在您的项目、Mailcore 和 Libetpan 库的任何**项目和目标中设置****SDK 10.7 。**然后在 Project navigator 中选择 libetpan 项目并检查：

 **1.  打开**CoreService.framework**并检查是否有 CFNetwork.framework（如下所示）。如果它不存在，则您的代码不能包含 CFNetwork 位于 CoreService 伞形框架下的 SDK 10.7。
2.  选择“ **static libetpan** ”目标并检查“Link Binary With Libraries”，您应该会找到 CoreService.framework。如果没有添加它（您也可以从项目导航器中拖放）

清理并构建，它应该可以工作！

![在此处输入图像描述](../Images/f9fd53b2bfbb4adf88ab00658e3b0b5b.png)**

# ruby-on-rails - 可以将 has_many 关系的所有项目设置为某个值，而无需在 Rails 3.1 中循环它们

> ID：13282517
> 
> 赞同：0
> 
> 时间：2012-11-08T04:40:26.650
> 
> 标签：ruby-on-rails, activerecord

假设我在 Rails 3.1 中有：

```
class Category < ActiveRecord::Base
  has_many :items
end

class Item < ActiveRecord::Base
  belongs_to :category
end 
```

我想做点什么

```
cat=Category.find(1)
cat.items.is_enabled=true
cat.save 
```

但不能也需要通过循环设置每个。有没有办法一次设置这些？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:13:44.833

尝试

```
 cat.items.update_all(:is_enabled => true) 
```

# java - Swing invokeLater() 方法不起作用

> ID：13282520
> 
> 赞同：0
> 
> 时间：2012-11-08T04:40:47.207
> 
> 标签：java, swing, netbeans

在我的主 Swing 框架中，我有这个方法：

```
public void receiveCommand(String command) {
    if (command.equals("enable")) {
        Runnable enable = new Runnable() {
            public void run() {
                button1.setEnabled(true);                    
                button1.revalidate();
                button1.repaint();
            }                
        };
        SwingUtilities.invokeLater(enable);            
    } 
```

基本上，我试图通过调用 receiveCommand() 方法从外部更新 GUI（启用按钮**button1 ）。**

但是这不起作用，即**button1**仍然被禁用。我在这里做错了什么？

**编辑**：这是**button1**的声明：

```
private javax.swing.JButton button1;
button1.setFont(new java.awt.Font("Tahoma", 0, 24)); // NOI18N
button1.setEnabled(false);
button1.addActionListener(new java.awt.event.ActionListener() {
public void actionPerformed(java.awt.event.ActionEvent evt) {
            button1ActionPerformed(evt);
        }
    }); 
```

**button1**和receiveCommand**方法**都在这个**Game**类中：

```
public class Game extends javax.swing.JFrame 
```

该方法是从另一个类调用的：

```
gameUI.receiveCommand("enable"); //gameUI is a Game object 
```

**编辑 2**：感谢您的所有帮助！毕竟这是一个错误的参考，所以我所做的只是尝试更新尚未设置为可见的错误框架的 GUI。傻我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T06:20:55.013

所以无论如何，这行得通。

```
public class TestInvokeLater {

    public static void main(String[] args) {
        new TestInvokeLater();
    }

    public TestInvokeLater() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            setBorder(new EmptyBorder(12, 12, 12, 12));
            final JButton runMe = new JButton("Run me");
            runMe.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    runMe.setEnabled(false);
                    new Thread(new Runnable() {

                        @Override
                        public void run() {
                            try {
                                Thread.sleep(1000);
                            } catch (InterruptedException ex) {
                            }
                            SwingUtilities.invokeLater(new Runnable() {

                                @Override
                                public void run() {
                                    runMe.setEnabled(true);
                                }
                            });
                        }
                    }).start();
                }
            });
            setLayout(new GridBagLayout());
            add(runMe);
        }
    }
} 
```

# java - 无法从 Web 服务方法的 try catch 块访问参数

> ID：13282521
> 
> 赞同：0
> 
> 时间：2012-11-08T04:40:46.833
> 
> 标签：java, web-services, netbeans-7, fingerprint

我正在编写一个 SOAP Web 服务方法来比较模板与使用 Java 中的数字角色 sdk 的功能集。我需要检索数据库中的字符串模板，然后将其转换为字节数组，以便与功能集进行匹配。我的 web 方法的输入参数是 email 和 ftSet，它们都是字符串。Ftset 也需要转换成字节数组，这些都是在 try catch 块之后完成的。如何访问名为“dbTemplate”的变量？

```
@WebMethod(operationName = "CheckTemplate")
public String CheckTemplate(@WebParam(name = "email") String email,
        @WebParam(name = "ftSet") String ftSet) {

    Connection con = null;
    try {
        Class.forName("com.mysql.jdbc.Driver");
        con = DriverManager.getConnection("jdbc:mysql://localhost:3306/mydb", "root", "1234");
        PreparedStatement st;
        st = con.prepareStatement("select template from Tbl_reg where email = ? ");
        st.setString(1, email);

        ResultSet result = st.executeQuery();

        if (result.next()) { //.next() returns true if there is a next row returned by the query.

            String dbTemplate = result.getString("template");

        }
    } catch (Exception e) {
        System.out.println(e.getMessage());

    } finally {
        if (con != null) {
            try {
                con.close();

            } catch (SQLException e) {
            }
        }
    }

            byte[] byteArray = new byte[1];
//dbTemplate is underlined here, cannot access it from the try catch
            byteArray = hexStringToByteArray(dbTemplate);
            DPFPTemplate template = DPFPGlobal.getTemplateFactory().createTemplate();
            template.deserialize(byteArray);

            byte[] fsArray = new byte[1];
            fsArray = hexStringToByteArray(ftSet);
            DPFPSample sample = DPFPGlobal.getSampleFactory().createSample();
            sample.deserialize(fsArray);

            DPFPFeatureSet features = extractFeatures(sample, DPFPDataPurpose.DATA_PURPOSE_VERIFICATION);

            DPFPVerification matcher = DPFPGlobal.getVerificationFactory().createVerification();
            DPFPVerificationResult result1 = matcher.verify(features, template);

            if (result1.isVerified()) {

                return "The fingerprint was VERIFIED.";

            } else {
                return "The fingerprint was NOT VERIFIED.";

            }  

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:45:02.810

在声明 Connection 对象后声明 dbTemplate。在您的代码中，dbTemplate 是在 try 块中声明的，因此 try 块之后的任何内容都不知道它的含义。

```
Connection con = null;
String dbTemplate = null; 
```

除了这个“if”块之外，没有人知道 dbTemplate 是什么。

```
if (result.next()) { //.next() returns true if there is a next row returned by the query.
    String dbTemplate = result.getString("template");
} 
```

# javascript - 如何返回一个向量 来自 v8 c++ 函数

> ID：13282526
> 
> 赞同：2
> 
> 时间：2012-11-08T04:41:14.720
> 
> 标签：javascript, c++, v8

```
struct empDetails {
int empId;
string name;
};

v8::Handle<v8::Value> GetEMPDetails(const v8::Arguments &args)
{  
    std::vector<empDetails>  e1;
    e1.push_back(empDetails(23, "paul"));
    e1.push_back(empDetails(45, "john")); 

    // how can I return V8 handle so that I can use this vector in 
    // my javascript module
    return e1; 
} 
```

在这里我想将 e1 返回到 javascript 模块，有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T19:43:49.213

使用`v8::Array`，例如：

```
v8::Handle<v8::Array> result = v8::Array::New(e1.size());
for (size_t i = 0; i < e1.size(); i++)
  result->Set(i, someObject); 
```

显然，您仍然需要将您的`empDetails`实例转换`v8::Object`为向量中的每个条目。

# c# - 我的程序是否花费了太多时间来执行？

> ID：13282527
> 
> 赞同：-4
> 
> 时间：2012-11-08T04:41:19.177
> 
> 标签：c#, .net, algorithm

我想解决来自 project euleur 的一个关于找到一个大数的最大素数的问题。我在 Visual Studio 2012 的虚拟机上运行我的代码，代码似乎冻结了。当我进入循环时，代码运行良好，但是当我执行它时，控制台总是在那里。就好像程序仍在运行一样。会不会是程序需要时间来执行？

**我的代码**

```
static void Main(string[] args)
{
    long number = 5;

    for (long i = 1; i < 600851475143; i++)
    {
        if (i % 2 != 0 && i % 1 == 0 && i % i == 0)
            number = i;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T05:33:45.120

我运行了这段代码，它确实需要一段时间才能运行，但它似乎确实在进步（我确实增加了）。试试这个来确定 i 是否是素数：

```
 public static bool IsPrime(long candidate)
    {
        // Test whether the parameter is a prime number.
        if ((candidate & 1) == 0)
        {
            return candidate == 2;
        }
        // Note:
        // ... This version was changed to test the square.
        // ... Original version tested against the square root.
        // ... Also we exclude 1 at the very end.
        for (int i = 3; (i * i) <= candidate; i += 2)
        {
            if ((candidate % i) == 0)
            {
                return false;
            }
        }
        return candidate != 1;
    } 
```

我不能为此声称功劳。它来自[http://www.dotnetperls.com/prime](http://www.dotnetperls.com/prime)。

将一些 Console.WriteLines 添加到您的 main 方法中以使其进度：

```
 static void Main(string[] args)
    {
        long number = 5;

        for (long i = 1; i < 600851475143; i++)
        {
            if (IsPrime(i))
            {
                Console.WriteLine(i);
                number = i;
            }
        }
    } 
```

这些算法还有其他资源：http: [//csharpinoneroom.blogspot.com/2008/03/find-prime-numer-at-fastest-speed.html](http://csharpinoneroom.blogspot.com/2008/03/find-prime-numer-at-fastest-speed.html)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:41:10.373

你的算法不正确。以下是一种适用于 Project Euler 的求合数素因数的简单方法：

```
function factors(n)
    f := 2
    while f * f <= n
        if n % f == 0
            output f
            n := n / f
        else
            f := f + 1
    output n 
```

这通过连续将*n*除以每个*f*来工作，每当找到一个素因子时，减少*n*并输出*f 。*最后一个因素是当*f*大于 n 的平方根时剩余的*n*，*此时*n*必须*是素数。

 ***还有其他方法可以分解整数。当你准备好更多时，我谦虚地在我的博客上推荐这篇[文章。](http://programmingpraxis.com/essays)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-08T04:58:37.643

最终，如果它不能正常工作，你是否编写世界上最快的代码也没关系。你的没有，抛开速度。***

# linux - solaris os 设置路径和环境变量

> ID：13282534
> 
> 赞同：1
> 
> 时间：2012-11-08T04:42:17.710
> 
> 标签：linux, path, environment-variables, solaris

在我的 solaris 大学帐户中，我正在使用 setenv 设置路径，例如 setenv JAVA_HOME /usr/j2se 路径被创建并被识别。但是当我注销并再次登录时，这些所有环境变量和路径都被遗忘了。为什么 ？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T04:47:17.673

因为它只是每个会话。您必须将其保存到 ~/.cshrc 或 ~/.bash_profile 之类的文件中：

```
$ echo 'setenv JAVA_HOME /usr/j2se' >> ~/.cshrc 
```

# asp.net-mvc-3 - asp.net mvc 在一个视图中呈现多个图表

> ID：13282535
> 
> 赞同：0
> 
> 时间：2012-11-08T04:42:22.430
> 
> 标签：asp.net-mvc-3, asp.net-charts

问题1：如何在一个视图中渲染多个图表？在 ABController 中，我有两个方法 MethodA（与视图名称 MethodA.aspx 匹配）和 MethodB。

当我加载 MethodA.aspx 时，它会从 ABController.MethodA 呈现一个图形，并且在同一个视图上，我想显示另一个来自 MethodB 的图形。

问题2：不是一个真正的问题，我需要一个建议。哪个图表最适合这个？

我想显示未能上课的学生列表（计数/人数）。

```
Controller Methods:
public FileContentResult MethodA()
{

}

public FileContentResult MethodB()
{

}

View:
<img id="image1" src="/AB/MethodA" alt="" style="vertical-align:top" />

<img id="image1" src="/AB/MethodB" alt="" style="vertical-align:top" /> 
```

# ios - 如何知道应用程序运行时 iPhone 的时钟是否发生变化？

> ID：13282541
> 
> 赞同：0
> 
> 时间：2012-11-08T04:42:39.460
> 
> 标签：ios, iphone, clock

如果用户在 iOS 的常规设置中设置了自动设置时钟，并且设备的时钟由于运营商时间的变化而变化，那么 UIApplicationSignificantTimeChangeNotification 会起作用吗？有没有其他方法可以在应用程序运行时系统时钟发生变化时得到通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:45:51.860

通知会在午夜或设备时间更改的`UIApplicationSignificantTimeChangeNotification`任何时间发送（例如夏令时、用户更改时间、时区更改等）。我不直接知道承运人的时间更改是否会触发此通知，但考虑到其他事件，如果此类更改没有触发通知，我会感到惊讶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T23:12:59.587

文档说是的，由于运营商时间的变化而被调用。

“在时间发生重大变化时发布，例如，更改为新的一天（午夜）、运营商时间更新以及更改为夏令时或从夏令时更改。此通知不包含 userInfo 字典”

# java - 尝试在目录之间移动时文件正在使用异常

> ID：13282542
> 
> 赞同：1
> 
> 时间：2012-11-08T04:42:46.977
> 
> 标签：java, file, move

只是为了好玩，我正在试验并尝试制作一个程序，它将所有文件从我的 D:\Downloads 目录中作为安装程序移动到我的 G:\Downloads\Installers 目录中。我以为我让它工作了，但是在使用它时，它返回“该进程无法访问该文件，因为它正在被另一个进程使用。”

这是代码，任何输入将不胜感激。

```
import java.io.File;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.nio.file.StandardCopyOption;
public class FileOrganizer { 

public static void main(String[] args) {

File folder = new File("d:/Downloads");
File[] listOfFiles = folder.listFiles();

for (int i = 0; i < listOfFiles.length; i++) {
  if (listOfFiles[i].isFile()) {
      String name = listOfFiles[i].getName();
      if (name.indexOf("Setup") > -1) {
          Path source = Paths.get("d:/Downloads");
          Path target = Paths.get("g:/Downloads/Installers");         
          try {
              Files.move(source, 
                         target.resolve(source.getFileName())), 
                         StandardCopyOption.REPLACE_EXISTING);}
               catch (IOException e) {
                  e.printStackTrace();
              }
          }
    }
    }  
    }     
    } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-09T14:47:56.280

尝试更改每个文件的文件名，如果文件名可更改，则文件不被任何其他进程使用。你无法用眼睛追踪它，因为可以有任何线程使用它。检查每个文件后，移动它。

```
File sourceFile = ...;      
boolean changeableSource = source.renameTo(sourceFile);

File destFile = ...;
boolean changeableSource = destFile.renameTo(destFile);

if(changeableSource && changeableSource ){
   //Moving here...
} 
```

# ruby-on-rails-3 - 使用嵌套属性轻松选择表单中的关联

> ID：13282543
> 
> 赞同：0
> 
> 时间：2012-11-08T04:42:49.180
> 
> 标签：ruby-on-rails-3, forms, associations, nested-attributes, fields-for

我正在尝试创建一个嵌套属性表单来创建一个模型，该模型主要是其他两个模型之间的关联“连接器”。在我的例子中，模型代表`books`,`awards`和“连接器”模型`book_awards`。当我编辑一本书时，我希望能够快速选择它获得了哪些奖项。

我一直在使用 [http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1) 来帮助我入门，但恐怕我几乎被卡住了。

另一个看起来相似的 SO 问题是 [accept_nested_attributes_for 和 find_or_create？](https://stackoverflow.com/questions/3579924/accepts-nested-attributes-for-with-find-or-create/)不幸的是，这也不是我正在做的事情，我无法适应它。

我的模型看起来像这样。每个模型都有额外的属性和验证等，但为了清楚起见，我已经删除了它们。

```
class Book < ActiveRecord::Base
  has_many :book_awards
  accepts_nested_attributes_for :book_awards, :allow_destroy => true
end

class Award < ActiveRecord::Base
  has_many :book_awards
end

class BookAward < ActiveRecord::Base
  belongs_to :book, :award
end 
```

在我的书中用于编辑和新建的控制器方法，以及用于创建和更新的失败案例中，我有一行`@awards = Award.all`.

在我看来，我希望看到所有奖项的列表，旁边有复选框。当我提交时，我想*更新、创建或销毁*模型`book_award`。如果选中该复选框，我想更新现有模型或创建一个新模型（如果它不存在）。如果未选中该复选框，那么我想销毁现有模型，或者如果奖励从不存在，则什么也不做。我对`book_awards`. 我不确定复选框选择器是否应该在这个部分中。

我认为我的复选框将成为我的钩子，`:_destroy`但它的极性颠倒了。我认为这样的事情基本上可以做到：

```
= f.check_box :_destroy, {}, 0, 1 
```

目前，我有这个，但我不确定它真正属于哪里。

接下来是我目前不起作用的观点，但也许它会帮助展示我正在尝试做的事情。我循环遍历`awards`并使用 a`fields_for`为已经存在的任何内容设置嵌套属性。它非常丑陋，但我认为它有点工作。但是，我真的不知道如何开始使用 else 案例。

```
= f.label :awards
- @awards.each do |a|
  - if f.object.awards && f.object.awards.include?(a)
    = f.fields_for :book_awards, f.object.book_award.select{|bas| bas.award == a } do |ba|
      = render 'book_awards', :f => ba, :a => a
  - else
    = fields_for :book_awards do |ba|
      = render 'book_awards', :f => ba, :a => a 
```

我希望每次都以相同的顺序列出奖项（我`@awards`在控制器中的分配可能会指定顺序），而不是首先或最后列出现有的奖项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:36:18.683

我讨厌回答自己的问题，但我终于想出了一些可行的方法。我需要做的第一件事是根据 railscast 中包含的疯狂对象更新“新”案例。接下来，我需要手动设置`:child_index`. 最后，我需要`:_destroy`适当地手动设置复选框。

```
.field
  = f.label :awards
  - @awards.each_with_index do |a,i|
    - if exists = (f.object.awards && f.object.awards.include?(a))
      - new_ba = f.object.book_awards.select{|s| s.award == a}
    - else
      - new_ba = f.object.class.reflect_on_association(:book_awards).klass.new
    = f.fields_for :book_awards, new_ba, :child_index => i do |ba|
      = render 'book_awards', :f => ba, :a => a, :existing => exists 
```

我的部分看起来像这样：

```
.field
  = f.check_box :_destroy, {:checked => existing}, 0, 1
  = f.label a.name
  = f.hidden_field :award_id, :value => a.id
  = f.label :year
  = f.number_field :year 
```

它不是非常漂亮，但它似乎完全符合我的要求。

# android - Android 在 android 中锁定主页按钮和返回按钮

> ID：13282544
> 
> 赞同：2
> 
> 时间：2012-11-08T04:42:53.723
> 
> 标签：android, button

嘿，我想做一个应用程序，它会在手机启动时启动，我可以这样做，但我的问题是在启动时禁用“主页按钮”和“后退按钮”，它应该只在我启用时启用单击我的活动上的一个按钮，该按钮将是启动时的主屏幕，请帮帮我..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T05:15:52.020

你必须做一个`intent-filter`for `BOOT_COMPLETED`。您可以从[此处](https://stackoverflow.com/questions/6391902/how-to-start-an-application-on-startup)和[此处获取教程](https://stackoverflow.com/questions/10428510/how-to-start-launch-application-at-boot-time-android)

禁用 HOME 和 BACK

让我们...如果您的应用程序正在运行并且对用户可见，那么您可以使用以下代码来执行此操作

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event)  {
    if (android.os.Build.VERSION.SDK_INT < android.os.Build.VERSION_CODES.ECLAIR
        && (keyCode == KeyEvent.KEYCODE_BACK    || keyCode == KeyEvent.KEYCODE_HOME)
    && event.getRepeatCount() == 0) 
    {
        onBackPressed();
    }
    return super.onKeyDown(keyCode, event);
}

@Override
public void onBackPressed() {
    // Do nothing
    return;
} 
```

但是，如果您的应用程序没有运行，那么您就不可能这样做，因为您可以制作[自定义启动器](http://developer.android.com/reference/android/content/Intent.html#CATEGORY_LAUNCHER)，因为您可以决定天气是否显示屏幕

或者

您可以在此处禁用 home 键[检查](https://stackoverflow.com/questions/3898876/how-to-disable-the-home-key)

# python - 在 Django 中创建模型时，为什么类继承models.Model 而不仅仅是Model？

> ID：13282546
> 
> 赞同：0
> 
> 时间：2012-11-08T04:43:01.487
> 
> 标签：python

我无法理解 django 模型中的继承

如果我在 django 中创建模型：

```
from django.db import models
class Person(models.Model):
    name = models.CharField(max_length=200) 
```

我就不能写吗

```
class Person(Model): 
```

由于我已经导入了模型并且我正在尝试继承 Model。模型是模型的子类吗？我也可以写下面的，因为我已经导入了模型。

```
 name = CharField(max_length=200) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T05:05:52.320

这不是 Django 问题。这是一个 Python 问题。

如果您不熟悉 Python 的处理方式，请在使用 Django 之前阅读它。

研究 Python 的模块并导入概念以了解这一点。[Python 教程中](http://docs.python.org/2/tutorial/modules.html)的模块文档是一个很好的起点。

关键是`from django.db import models`导入`models`模块，以便您在该范围内有一个名为`models`模型模块的变量。

可能有类似的东西`from django.db.models import Model, CharField`，但对于 Django 模型，约定是导入`models`模块，而不是它的组件。

# java - Java：覆盖私有函数

> ID：13282551
> 
> 赞同：2
> 
> 时间：2012-11-08T04:43:21.220
> 
> 标签：java, inheritance

我们在 Tree 类中发现了一个 GWT 错误（由 Google 修复，但在较新版本中）。需要修复的函数是私有函数。我想知道是否有任何方法可以覆盖私有函数。如果需要，它可能会很麻烦，但如果有办法，请告诉我。

我可能会尝试弄清楚如何更改 GWT 代码并作为另一种选择重新编译，但如果我可以派生一个类（“MyTree”）并以某种方式覆盖此功能，那会容易得多。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T04:46:38.143

私有函数不能被覆盖。基本上就像它们不存在于子类型中一样。

在超类调度到子类覆盖的意义上，它们也不能被覆盖。

一个具体的例子可能很有用：

```
public class Test
{

    public static void main(String[] args)
    {
        (new B()).privateGo();
        (new B()).protectedGo();
        (new C()).privateGo();
    }

}

class A
{
    public void privateGo()
    {
        _privateGo();
    }

    public void protectedGo()
    {
        _protectedGo();
    }

    private void _privateGo()
    {
        System.out.println("A._privateGo");
    }

    protected void _protectedGo()
    {
        System.out.println("A._protectedGo");
    }

}

class B extends A
{

    private void _privateGo()
    {
        System.out.println("B._privateGo");
    }

    protected void _protectedGo()
    {
        System.out.println("B._protectedGo");
    }

}

class C extends A
{
    public void privateGo()
    {
        _privateGo();
    }
    private void _privateGo()
    {
        System.out.println("C._privateGo");
    }
} 
```

输出将是：

```
A._privateGo
B._protectedGo
C._privateGo 
```

受保护的方法将被分派给子类实现。私有方法不会。从这个意义上说，就像子类型不存在私有方法一样。

您必须更新到 GWT 的固定版本或编辑源代码。注意 C 的 privateGo 将如何分派给 C 的 _privateGo。这可以用作一个 hacky 解决方法，但问题是你必须确保你总是有一个子类的实例，而不是超类的实例，因为超类仍然不会分派给 C._privateGo（你'编辑源代码或获取新版本要好得多）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T04:50:19.243

不知道这是否对你有帮助

如果它是私有方法，则可能有一个公共方法正在调用该私有方法。您可以尝试在您的课程中覆盖该公共方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T04:54:17.107

这是黑客的方式：

**私有方法旨在用于类中的某些公共方法**。扩展类，覆盖该公共方法。保持一切不变，但从覆盖的方法中调用您自己的私有方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T04:51:03.733

私有方法不会被继承，也不能以任何方式被覆盖。以下主题可能会对您有所帮助...

1\. [覆盖Java中的私有方法](https://stackoverflow.com/questions/2000137/overriding-private-methods-in-java)

2\. [令人困惑的“覆盖私有方法”](https://stackoverflow.com/questions/1346208/confusing-override-a-private-method)

3\. [我可以覆盖 Java 中的私有方法吗？](https://stackoverflow.com/questions/10623913/can-i-override-a-private-method-in-java)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T04:53:21.640

GWT 类的源代码随包一起提供。为什么不编辑源来解决问题？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T05:35:17.030

**-**要记住的**最重要**的事情之一`private methods`是，**它们不是继承的。**

**-**所以可以说 a`Sub-Class`完全不**知道**. 所以很明显它**不能被 Overridden**。`Private member``Super-Class`

# c# - 我们可以在 C# 的泛型中将 List 写为类型参数吗？

> ID：13282553
> 
> 赞同：1
> 
> 时间：2012-11-08T04:44:06.373
> 
> 标签：c#, generics

例如，函数原型是：

```
 void set<V>(Type a, V b); 
```

我们称之为：

```
 int a;
 list<int> b;

set<List<int>>(a,b); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:46:59.390

您可以使用这样的通用约束：

```
 void set<TList, TElement>(TElement value, TList list)
      where TList: IList<TElement>; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T04:47:52.420

（我将在我的答案前面提醒参数和参数之间的区别：参数是某些东西的“占位符”，而参数是填充参数的值。（因此术语“参数参数”） . 例如，类`List<TFoo>`有一个名为 的参数`TFoo`，但实例`List<String>`有一个参数`String`的参数`TFoo`。）。

类型是“通用”或“具体”（即非通用）。

泛型类型参数参数可以是任何类型，具体的或泛型的。一个泛型类型的所有参数都填充了具体的类型参数，它本身就变成了具体的；所以`List<String>`是具体的，因为`String`是具体的，但`List<TFoo>`不是具体的，因为`TFoo`是类型参数。

因此，很容易看出泛型类可以递归嵌套，无论是泛型形式还是具体形式。当然，您只能在泛型类或方法上下文中使用泛型形式，例如以下是完全合法的：

```
private static IEnumerable<List<Dictionary<String,Int32>>> foo = new Collection<List<Dictionary<String,Int32>>>(); // this is completely concrete

static void DoSomething<TBaz>(IEnumerable<List<Dictionary<TBaz,Int32>>> baz) { // this is generic because TBaz is not specified

   List<TBaz> someList = new List<TBaz>(); // you can use the undefined TBaz because it's listed in the generic method's type arguments.
}

static void Main() {
    DoSomething( foo ); // the compiler will infer TBaz from the String argument used in the foo field
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T04:50:13.940

我想你是想问你是否可以`Type a`具体到`V`......

如果这是您的问题，那么是的，您必须像这样定义方法：

```
void set<V>(V a, List<V> b) 
```

如果您打算`a`成为 type `Type`，那么对于`List<int>`被允许作为类型参数的问题是肯定的。但是，您的示例无法编译，因为`a`is`int`和 not `Type`。

# c++ - 不依赖于系统时间的时间

> ID：13282557
> 
> 赞同：1
> 
> 时间：2012-11-08T04:44:57.603
> 
> 标签：c++, iphone

我正在为 iPhone 开发 C++ 游戏。我需要给玩家每小时的奖金。我使用 time(NULL) 方法实现了这个来检查下一个。但这很容易通过更改设备时间来欺骗。那么我有什么替代方法来防止这种情况呢？

我的朋友告诉我将其同步到我的服务器。但这不是一个选项，因为目前没有服务器通信。请帮忙...

提前致谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T04:46:34.170

C++11[`std::steady_clock`](http://en.cppreference.com/w/cpp/chrono/steady_clock)为此定义了 。Boost 库也提供了它：[`boost::chrono::steady_clock`](http://www.boost.org/doc/libs/1_51_0/doc/html/chrono/reference.html#chrono.reference.cpp0x.system_clocks_hpp.steady_clock).

C++11 中的示例代码：

```
#include <iostream>
#include <vector>
#include <chrono>

int main()
{
   auto start = std::chrono::steady_clock::now();
   /* Do something as time passes... */
   auto end = std::chrono::steady_clock::now();

   auto elapsed = end - start;
   std::cout << "Time passed: " << elapsed.count() << '\n';
} 
```

# java - 如何检查最大堆孩子以找出哪个更大

> ID：13282563
> 
> 赞同：0
> 
> 时间：2012-11-08T04:45:25.040
> 
> 标签：java, heap

我有一个包含最大堆的数组表示。对于 'd','b','c' 的数组，它持有：b,d,c 尽管它应该是 b,c,d。这是我的添加方法：

```
public boolean add (E e) {
  ensureCapacity(objectCount + 1);
  pq[objectCount++] = e;

  //percolate up
  for (int i = objectCount - 1; i >= 0; i--) {
     if (priorityComparator.compare(pq[i], pq[parent(i)]) >= 0) {
          E tmp = pq[parent(i)];
          pq[parent(i)] = pq[i];
          pq[i] = tmp;

     }
  }

  modCount++;

  return true;
  } 
```

如果我接下来添加“a”，它会成功更改为 a、b、c、d。如何修复该方法，使其检查左孩子 (2*i+1) 和右孩子 (2*i+2) 并根据哪个具有更高优先级队列交换它们的值（a 的优先级高于 b， ETC）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:52:53.273

我认为你有一个 MIN 堆而不是 MAX 堆。

我没有看过你的代码，但是：

最小堆保证以下内容：

1.  根始终是最小值（在您的情况下为元素 0）
2.  树总是左序的（对于任何堆都是如此）

在您的情况下，输出 b, d, c 是完全合法的。尝试删除b并再次调用heapify，输出将是c，d。

维基链接：[http ://en.wikipedia.org/wiki/Binary_heap](http://en.wikipedia.org/wiki/Binary_heap)

**编辑：** 如果在您的情况下您考虑给予“a”比“b”更高的优先级，那么是的，您确实有一个 MAX 堆。

# syntax-highlighting - TypeScript 安装不正确

> ID：13282564
> 
> 赞同：0
> 
> 时间：2012-11-08T04:45:36.807
> 
> 标签：syntax-highlighting, typescript

我安装了 Visual Studio 2012 Express，然后是 TypeScript 插件。

我启动了 VS 并注意到我的 .ts 文件没有得到任何语法高亮显示。

我没有任何与 TypeScript 相关的项目模板，也没有 Tools->Options->Text Editors->TypeScript 设置。

我什至试图卸载/重新安装所有东西。没有任何效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T04:45:36.807

我拼命寻找解决方案，但似乎不存在，所以我决定发布对我有用的解决方案。

这可能是一个完全的侥幸，但我想无论如何我都会分享它，以防它可以帮助别人。

我安装了 Windows 8，但我认为这不是一个因素，因为我的另一台 PC 与 Windows 8 + VS 2012 Express + TS 插件配合得很好。

我进入`C:\Program Files (x86)\Microsoft SDKs\TypeScript\0.8.0.0`并关闭了VS，我运行了`TypeScriptLanguageService.vsix`文件。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:10:19.013

您确实找到了适当的解决方法。

安装程序的一个已知问题是，如果您的“文档”路径位于网络共享上，则 VSIX 不会自动安装。你是这种情况吗？

# android - 在处理程序中使用共享首选项

> ID：13282568
> 
> 赞同：1
> 
> 时间：2012-11-08T04:45:54.107
> 
> 标签：android, handler, sharedpreferences

我正在尝试利用 sharedpreference 在处理程序中提取首选项。我在 onCreate() 期间调用 sharedpreference 但尝试在处理程序案例中使用首选项。

首选项是：1 个布尔值 1 个浮点数

它们都用于检查处理程序中的 if 语句。代码基于蓝牙聊天示例。

```
package com.application.feveralert;

import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.preference.Preference;
import android.preference.PreferenceManager;
import android.util.Log;
import android.view.Men>u;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.Window;
import android.widget.ArrayAdapter;
import android.widget.TextView;
import android.widget.Toast;
import android.content.SharedPreferences;
/*** This is the main Activity that displays the current chat session.*/
public class BluetoothChat extends Activity {

// Debuggng
private static final String TAG = "BluetoothChat";
private static final boolean D = true;

// Message types sent from the BluetoothChatService Handler
public static final int MESSAGE_STATE_CHANGE = 1;
public static final int MESSAGE_READ = 2;
public static final int MESSAGE_WRITE = 3;
public static final int MESSAGE_DEVICE_NAME = 4;
public static final int MESSAGE_TOAST = 5;

// Key names received from the BluetoothChatService Handler
public static final String DEVICE_NAME = "device_name";
public static final String TOAST = "toast";

// Intent request codes
private static final int REQUEST_CONNECT_DEVICE_INSECURE = 2;
private static final int REQUEST_ENABLE_BT = 3;

// Layout Views
private TextView mTitle;
// Name of the connected device
private String mConnectedDeviceName = null;
// Array adapter for the conversation thread
private ArrayAdapter<String> mConversationArrayAdapter;
// Local Bluetooth adapter
private BluetoothAdapter mBluetoothAdapter = null;
// Member object for the chat services
private BluetoothChatService mChatService = null;

TextView textOut;
//protected boolean prefalert;
//protected Float preftemp;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if(D) Log.e(TAG, "+++ ON CREATE +++");        
    // Settings
    PreferenceManager.setDefaultValues(this, R.xml.preference, false);
    addPreferencesFromResource(R.xml.preference);
    SharedPreferences sharedPref = PreferenceManager.getDefaultSharedPreferences(this);
    Float preftemp = getFloat("preftemp",83.0);
    Boolean prefalert = getBoolean("prefAlert",true);

    // Set up the window layout
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    setContentView(R.layout.main);
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.custom_title);

    // Set up the custom title
    mTitle = (TextView) findViewById(R.id.title_left_text);
    mTitle.setText(R.string.app_name);
    mTitle = (TextView) findViewById(R.id.title_right_text);

    textOut = (TextView) findViewById(R.id.TempDisplay);

    // Get local Bluetooth adapter
    mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

    // If the adapter is null, then Bluetooth is not supported
    if (mBluetoothAdapter == null) {
        Toast.makeText(this, "Bluetooth is Not Available", Toast.LENGTH_LONG).show();
        finish();
        return;
    }

    // Initialize Sound
    SoundManager.getInstance();
    SoundManager.initSounds(this);
    SoundManager.loadSounds();
}

private float getFloat(String string, double e) {
    return 0;
    // TODO Auto-generated method stub

}

private boolean getBoolean(String string, boolean b) {
    return b;
    // TODO Auto-generated method stub

}

private void addPreferencesFromResource(int preference) {
    // TODO Auto-generated method stub

} 
```

和

```
// The Handler that gets information back from the BluetoothChatService
private final Handler mHandler = new Handler() {
   @Override
    public void handleMessage(Message msg) {
        switch (msg.what) {
        case MESSAGE_STATE_CHANGE:
            if(D) Log.i(TAG, "MESSAGE_STATE_CHANGE: " + msg.arg1);
            switch (msg.arg1) {
            case BluetoothChatService.STATE_CONNECTED:
                mTitle.setText(R.string.title_connected_to);
                mTitle.append(mConnectedDeviceName);
                mConversationArrayAdapter.clear();
                break;
            case BluetoothChatService.STATE_CONNECTING:
                mTitle.setText(R.string.title_connecting);
                break;
            case BluetoothChatService.STATE_LISTEN:
            case BluetoothChatService.STATE_NONE:
                mTitle.setText(R.string.title_not_connected);
                break;
            }
           break;
        case MESSAGE_READ:
            byte[] readBuf = (byte[]) msg.obj;
            // construct a string from the valid bytes in the buffer
            String readMessage = new String(readBuf, 0, msg.arg1);
            //mConversationArrayAdapter.add(readMessage + " F");
            textOut.setText(readMessage + " F");

            Float out = new Float(readMessage);

         // Check for Fever               
            if (prefalert = true){
            if (out >= 80.3){
                SoundManager.playSound(1, 1);
                Toast.makeText(getApplicationContext() ,"Fever Alert",   Toast.LENGTH_LONG).show();

            }
            }
            break; 
```

谢谢你。

# c# - 具有命名映射的统一解析参数

> ID：13282572
> 
> 赞同：1
> 
> 时间：2012-11-08T04:45:58.587
> 
> 标签：c#, unity-container

我正在使用统一来解决对象图。

```
public interface ISessionManager
{
}

public class DefaultSessionManager : ISessionManager
{
}

public class OnCallSessionManager : ISessionManager
{
} 
```

我有在构造函数上使用 ISessionManager 的服务类

```
public class CustomerService
{
    public class CustomerService(ISessionManager sessionManager)
    {
    }
} 
```

在对象图之上。我有一个视图模型类和一个数据管理器类。

```
public class ViewModel(CustomerService customerService)
{
}

public class DataManager(CustomerService customerService)
{
} 
```

现在我想使用不同的 ISessionManager 来解析 ViewModel 和 DataManager。对于`ViewModel`我想要的课程`DefaultSessionManager`和。我怎样才能做到这一点 ？`OnCallSessionManager``DataManager`

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:12:42.707

使用代码中的配置，您可以注册如下内容：

```
var container = new UnityContainer();

container.RegisterType<ISessionManager, DefaultSessionManager>()
  .RegisterType<ISessionManager, OnCallSessionManager>("oncall")
  .RegisterType<CustomerService>()
  .RegisterType<CustomerService>(
    "oncall",
    new InjectionConstructor(
      new ResolvedParameter(
        typeof(ISessionManager),
        "oncall")))
  .RegisterType<ViewModel>()
  .RegisterType<DataManager>(
    new InjectionConstructor(
      new ResolvedParameter(
        typeof(CustomerService),
        "oncall"))); 
```

它丑得要命，但它应该可以解决问题。

# image-processing - 如何使用opencv在具有某些序列的图像中查找轮廓

> ID：13282573
> 
> 赞同：1
> 
> 时间：2012-11-08T04:46:09.287
> 
> 标签：image-processing, opencv, contour

我使用 cvFindcontour 的函数得到了这个图像的轮廓数，它很好，而且我得到了每个轮廓，用来增加轮廓-> h_next。

```
cvFindContours( src, storage, &contour, sizeof(CvContour), CV_RETR_CCOMP, CV_CHAIN_APPROX_SIMPLE ); 
```

但是轮廓的顺序是随机的，有没有办法在图像中找到给定格式的轮廓？我的最终目标是仅找到外部正方形的面积（即）（仅 1,2,3,4,9,10,15,16,17,18）。请您建议一些算法或函数来找到轮廓用这个序列。提前致谢。 ![在此处输入图像描述](../Images/c4125aecec8116fc680e48f7d421123f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:21:27.730

我会建议 ：

*   找到每个正方形的质心
*   通过拟合或霍夫变换找到棋盘的方向
*   执行质心坐标的旋转
*   根据新坐标对正方形进行排序

# javascript - innerHTML 和 FireFox 的兼容性？

> ID：13282574
> 
> 赞同：1
> 
> 时间：2012-11-08T04:46:19.203
> 
> 标签：javascript, firefox, cross-browser, innerhtml

我有一个javascript函数。我使用该函数在运行时在 html 文件中的表格行中添加列表框。该脚本在 IE、chrome 22 和 FFox 16 中运行良好。但在同一台机器上使用 firefox3 时，列表框不可见，在 IE 上一切正常。

如果需要任何更改，请建议我，以便此代码也可以在 firefox 3 上正常运行

这是 JavaScript 代码：

```
function addListBoxes(rowPos)
{

allTables[0].deleteRow(rowPos); //first, delete the row
var row = allTables[0].insertRow(rowPos);  //reinsert the row
var cell1=row.insertCell(0);
var cell2=row.insertCell(1);
var cell3=row.insertCell(2);
var cell4=row.insertCell(3);
var cell5=row.insertCell(4);

    cell1.innerHTML="";
    cell2.innerHTML="<select id='relList' name='select' size='5' multiple></select>";
    cell3.innerHTML="";
    cell4.innerHTML="<select id='relSubList' name='select' size='5' multiple></select>";
    cell5.innerHTML="";   
 } 
```

更新

在其他一些线程上，我发现推荐使用 document.getElementById，因此我更新了脚本，但它也不起作用。

```
function addListBoxes(rowPos)
{

    allTables[0].deleteRow(rowPos);
    var row = allTables[0].insertRow(rowPos);
    row.offsetHeight;
    var cell1=row.insertCell(0);
    cell1.setAttribute("id", "listRowCell0", 0);
    var cell2=row.insertCell(1);
    cell2.setAttribute("id", "listRowCell1", 0);
    var cell3=row.insertCell(2);
    cell3.setAttribute("id", "listRowCell2", 0);
    var cell4=row.insertCell(3);
    cell4.setAttribute("id", "listRowCell3", 0);
    var cell5=row.insertCell(4);
    cell5.setAttribute("id", "listRowCell4", 0);

        document.getElementById("listRowCell0").innerHTML="";
        document.getElementById("listRowCell1").innerHTML="<select id='relList' name='select' size='5' multiple></select>";
        document.getElementById("listRowCell2").innerHTML="";
        document.getElementById("listRowCell3").innerHTML="<select id='relSubList' name='select' size='5' multiple></select>";  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:18:21.927

尝试在页面顶部使用以下内容，那么它可以在 Firefox 3 中使用吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

# java - 反编译java类文件

> ID：13282575
> 
> 赞同：1
> 
> 时间：2012-11-08T04:46:23.640
> 
> 标签：java, class, decompiling, decompiler

是否可以在另一个程序中反编译 java .class 文件？我知道像 CAVAJ 和 DJ Java Decompiler 这样的工具。 **为什么 ？**：我正在修改程序中的类文件并将其转储到相同的文件中。然后我想解析修改后的类文件的源文件。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:57:20.247

这是一个可能的答案（这是我用来编译源文件的）

```
private int runProcess(String command) throws Exception
{
    Process pro = Runtime.getRuntime().exec(command);
    System.out.println(command);
    printLines("", pro.getInputStream());
    printLines("",pro.getErrorStream());
    pro.waitFor();
    return(pro.exitValue());
} 
```

然后你可以使用类似的东西：

```
int exitValue = runProcess(your command here); 
```

我猜JD-GUI 不行；你需要一个命令行java反编译器。

这些链接**可能会**有所帮助：
[使用 JD-GUI 批量反编译 Java 文件](https://stackoverflow.com/questions/1384619/command-line-java-decompiler-alternative-to-jd-gui)
[http://en.wikipedia.org/wiki/JAD_%28JAva_Decompiler%29](http://en.wikipedia.org/wiki/JAD_%28JAva_Decompiler%29)
[http://viralpatel.net/blogs/decompile-class-file-java-decompiler -class-java-class/](http://viralpatel.net/blogs/decompile-class-file-java-decompiler-class-java-class/)

最后一个链接有一个 JAD 的下载链接，这是一个适用于 windows 计算机的命令行工具。

根据操作系统的不同，命令可能会有所不同，但如果将 jad 移动到 cmd 类路径，它可能只是“jad classname.class”。我有 mac os x，所以我不确定它在哪里。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T22:39:27.593

如果您希望在运行时修改该类，则可能不需要反编译该类。您可以操纵字节码。看看[http://cglib.sourceforge.net/](http://cglib.sourceforge.net/)，也许对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-23T10:39:09.293

Java IDE 可以很好地反编译类文件。以 IntelliJ 为例，甚至是社区版。它无法更新（只读模式）但我希望它可以帮助

# facebook - 如何在phonegap子浏览器与主应用程序之间发送和接收数据

> ID：13282582
> 
> 赞同：3
> 
> 时间：2012-11-08T04:46:51.013
> 
> 标签：facebook, cordova, phonegap-plugins

我正在Phonegap 子浏览器中进行Facebook 登录身份验证。为此，我有一个页面可以启动身份验证过程并在身份验证后重定向回来（比如说 www.mysite.com/Facebook.html）。现在我有来自 Facebook 的真实用户，但是我怎样才能从子浏览器获取真实的用户数据到主应用程序并关闭子浏览器。出于安全原因，我设置了 "showLocationBar: false" ，所以没有关闭按钮。

所以，现在让我知道

*   如何将经过 Facebook 身份验证的用户数据（用于与 Facebook 进行进一步交易的用户电子邮件和访问令牌）获取到主应用程序并关闭子浏览器。
*   如何从子浏览器关闭子浏览器，因为我在子浏览器上没有关闭按钮。
*   有什么方法可以将 Facebook 中的数据保存到我的主应用程序中的 JavaScript 对象

这是我第一个使用 Phonegap 的应用程序，但我对 Facebook 和 JavaScript 很有经验。所以，如果我在哪里错了，请告诉我。

先谢谢了，期待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:18:00.100

我还在使用 chilldbrowser 进行 Facebook 连接。以下是使用子浏览器连接 Facebook 的完整源代码链接：[http](http://www.drewdahlman.com/meusLabs/?p=88) ://www.drewdahlman.com/meusLabs/?p=88 。您可以使用以下代码使用 access_token 获取用户名：

```
 var params='access_token='+accessToken;
 $.get("https://graph.facebook.com/me",params, 
            function(response){
                fbUesrName=response.name;
                },"json"); 
```

您可以使用以下方法关闭子浏览器：

```
window.plugins.childBrowser.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:10:47.490

@Venkat：不确定您是否已经从应用程序中获得了关闭子浏览器的答案。这段代码对我有用。在您的网站上放置一个关闭按钮并将 URL 设置为“google.com”。从 PG 应用程序中，您可以编写以下代码

```
 window.plugins.childBrowser.onLocationChange = function(locationLink){
    if (locationLink.indexOf('google.com') > 0) {
                window.plugins.childBrowser.close();
              }
      } 
```

# windows-phone-7 - 在 wp7 中编辑时 datepicker 值没有改变

> ID：13282583
> 
> 赞同：0
> 
> 时间：2012-11-08T04:46:56.537
> 
> 标签：windows-phone-7, datepicker

我正在 wp7 中开发数据库应用程序，我使用 datepicker 来存储日期值。当我添加记录时，它工作得很好，但是在我编辑记录的更新时间期间，datepicker 值永远不会改变。它包含相同的值，如何使其可变？

# java - 计算APY并在java中使用另一种方法

> ID：13282587
> 
> 赞同：0
> 
> 时间：2012-11-08T04:47:10.157
> 
> 标签：java, methods

我似乎无法让它工作。我正在尝试从主要方法中获取 APY 和 Loanpayment 的结果

我不断收到消息，找不到 CompoundingOption 符号。任何人都可以在这里检测到错误吗？

```
public class Finance {

    public static void main(String [] args) {
        // Practice myPractice = new Practice();
        System.out.println(computeApy(5.50, 1));
        System.out.println(computeLoanPayment(20000.00, 7.5, 15.0, 1));
    }

    public static double computeApy(double annualRate, int compoundingOption) {
        // APY = (1 + (r/n))^n - 1

        // daily
        if (compoundingOption == 1) {
            return (Math.pow((1 + (annualRate / 365)), 365)) - 1;
            // monthly
        }
        else if (compoudingOption == 2) {
            return (Math.pow((1 + (annualRate / 12)), 12)) - 1;
            // annually
        }
        else if (compoudingOption == 3) {
            return (Math.pow((1 + (annualRate / 1)), 1)) - 1;
        }
        else {
            return -1;
        }
    }

    public static double computeLoanPayment(double principal, double annualRate, double yearsDuration,
        int paymentOption) {
        // A = P * r(1+r)^n / (1+r)^n - 1
        // biweekly
        if (paymentOption == 1) {
            return principal * (annualRate * Math.pow((1 + annualRate), 26)) / ((Math.pow((1 + annualRate), 26)) - 1);
            // monthly
        }
        else if (paymentOption == 2) {
            return principal * (annualRate * Math.pow((1 + annualRate), 12)) / ((Math.pow((1 + annualRate), 12)) - 1);
            // quarterly
        }
        else if (paymentOption == 3) {
            return principal * (annualRate * Math.pow((1 + annualRate), 4)) / ((Math.pow((1 + annualRate), 4)) - 1);
        }
        else
            return -1;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:49:23.050

comoudingOption 您在第二和第三块拼写错误

缺少'n'

你有 compoudingOption 和变量是 CompoundingOption

# android - 如何在android中通过蓝牙发送媒体文件

> ID：13282590
> 
> 赞同：1
> 
> 时间：2012-11-08T04:47:23.133
> 
> 标签：android, bluetooth, media, file-transfer

我有一个要求。我需要构建一个应用程序，它使用蓝牙将歌曲、图像等媒体文件发送到另一台设备。我不知道如何做到这一点。任何人都可以从头开始帮助我大致了解如何完成这项工作。示例代码将非常有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T05:18:45.433

我想你应该读一遍这个文件。

在此示例中，他们从 SD 卡路径**发送 PDF**文件，但我认为您也可以发送音频和视频等媒体文件。

**看到这个**：[蓝牙文件传输Android](https://stackoverflow.com/questions/9748219/bluetooth-file-transfer-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-01T21:49:16.937

```
private void envio() {
    Intent intent = new Intent();
    intent.setAction(Intent.ACTION_SEND);
    intent.setType("text/plain");
    File archivo=new File(_path);
    intent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(archivo) );
    ///////////////////pakage manager
    PackageManager pm = getPackageManager();
    List<ResolveInfo> appsList = pm.queryIntentActivities( intent, 1);

    if(appsList.size() > 0) {
        //Toast.makeText(this,"su telefono no cuenta con aplicacion de intercambio de datos",Toast.LENGTH_LONG).show();
    }
    //selleccionar la aplicacion de bluetooth
    String packageName = null;
    String className = null;
    boolean found = false;
    // BluetoothAdapter.checkBluetoothAddress("");
    for(ResolveInfo info: appsList){

      packageName = info.activityInfo.packageName;
      if( packageName.equals("com.android.bluetooth")){
         className = info.activityInfo.name;
         found = true;
         break;// found
      }

    }
    if(! found){
      Toast.makeText(this,"...",
                     Toast.LENGTH_SHORT).show();
      // exit
    }

    intent.setClassName(packageName, className);
    startActivity(intent);

} 
```

# clisp - 对 clisp 中的错误进行故障排除的介绍指南

> ID：13282591
> 
> 赞同：0
> 
> 时间：2012-11-08T04:47:33.053
> 
> 标签：clisp

我是 lisp 的新手，在 cygwin 上使用 clisp。当我遇到问题时，我会看到类似这样的内容

```
*** - SYSTEM::READ-EVAL-PRINT: variable DB.CLISP has no value
The following restarts are available:
USE-VALUE      :R1      Input a value to be used instead of DB.CLISP.
STORE-VALUE    :R2      Input a new value for DB.CLISP.
ABORT          :R3      Abort main loop
Break 1 [4] 
```

而且我有一堆提示，无论我做什么，数字似乎都会增加。

有人可以向我指出一个新手指南，了解它的作用以及我可以在这里做什么？我发现了一些东西，但它们对我来说是不透明的。我现在的做法就是退出clisp。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:02:46.050

你看过[clisp 常见问题列表](http://clisp.org/impnotes/faq.html)了吗？

您要问一个问题：*我如何退出调试器？*，虽然它链接到手册的错误部分，但您正在寻找的是[Top Level Loop](http://clisp.org/impnotes/repl.html)。

基本上，“中止”将调试级别降低 1，而“退出”将您从所有调试器中删除。

# android - 自定义滚动视图

> ID：13282595
> 
> 赞同：0
> 
> 时间：2012-11-08T04:47:59.733
> 
> 标签：android, listview, scrollview

我想要一个看起来像图像中所示的滚动视图。我有一个根设备可供我使用。我认为可以通过对android本身的源代码进行一些更改来进行更改。

请指导我。 ![列表的滚动视图](../Images/7711c172b3f888796dcdcdfb4e259083.png)

提前致谢

# pycuda - 如何使用 pycuda 将二维数组输入内核？

> ID：13282596
> 
> 赞同：3
> 
> 时间：2012-11-08T04:48:07.703
> 
> 标签：pycuda

我创建了一个带有 shape 的 float32s numpy 数组`(64, 128)`，我想将它发送到 GPU。我怎么做？我的内核函数应该接受哪些参数？`float** myArray`?

我曾尝试直接将数组原样发送到 GPU，但 pycuda 抱怨正在访问对象......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T11:06:04.360

默认情况下，numpy/PyCUDA 中的二维数组按行主要顺序存储在倾斜的线性内存中。所以你只需要一个像这样的内核：

```
__global__
void kernel(float* a, int lda, ...)
{
    int r0 = threadIdx.y + blockDim.y * blockIdx.y;
    int r1 = threadIdx.x + blockDim.x * blockIdx.x;

    float val = a[r0 + r1*lda];

    ....
} 
```

从 Python 访问通过引用传递给内核的 numpy`ndarray`或 PyCUDA 。`gpuarray`

# jquery - 如何在页面刷新时触发事件

> ID：13282599
> 
> 赞同：2
> 
> 时间：2012-11-08T04:48:54.757
> 
> 标签：jquery

我们网站的后端开发有一个 div.errors 用于表单处理，它始终存在但为空，除非表单提交出错。它很容易最初​​隐藏 div，然后检查它是否有长度，如果它显示它。

```
if ($(".errors").text().trim().length) {
    $(this).css('display', 'block');
} 
```

问题是这样的，在页面加载时 div.errors 是空的并且是隐藏的。当您提交表单时，div.erros 出现错误，然后有长度，但页面被刷新（再次加载）并且事件不会再次触发。.live 是一个可行的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T04:55:16.047

问题是`this`停止引用元素：

```
$(".errors").each(function () {
    if ($(this).text().trim().length) {
        $(this).css('display', 'block');
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T04:53:25.420

Live 在这里不是一个选项，当您将元素动态添加到页面时使用 live 。您需要某种状态管理技术来在页面刷新之间保留 div.errors 的值。我建议您使用 cookie，因为它们可以在 JQuery 中轻松访问。

# android - 更新鲜的android：我从datepicke中选择了开始日期和结束日期，因为我需要在开始日期和结束日期之间插入日期到sqllite

> ID：13282600
> 
> 赞同：1
> 
> 时间：2012-11-08T04:49:03.553
> 
> 标签：android

我在 android 中比较新鲜，我从 datepicker 中选择了开始日期和结束日期，因为我需要将开始日期和结束日期之间的日期插入 sqllite，然后与当前日期进行比较并设置提醒。如果您有解决方案，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:04:13.563

**要从日期选择器获取日期，请使用此**

```
DatePicker datePicker = (DatePicker) findViewById(R.id.datePicker1);
int day = datePicker.getDayOfMonth();
int month = datePicker.getMonth() + 1;
int year = datePicker.getYear(); 
```

**将值设置到数据库**

```
public  void onDateSet(DatePicker view,int year,int monthOfYear,int dayOfMonth){
            dateTime.set(year,monthOfYear,dayOfMonth);

   int year = year;   // Here you can get day,month and year.
   int month = monthOfYear;
   int day = dayOfMonth;

ContentValues values = new ContentValues()

values.put("Day",dayOfMonth);
values.put("Month",monthOfYear);
values.put("Year",year);

} 
```

您可以从[这里](http://www.vogella.com/articles/AndroidSQLite/article.html)、[这里](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)和[这里获取数据库教程](http://vimaltuts.com/android-tutorial-for-beginners/android-sqlite-database-example)

**获取当前日期**

```
String currentDateTimeString = DateFormat.getDateTimeInstance().format(new Date()); 
```

**要设置提醒** ，您可以使用警报管理器设置提醒，可以在[此处找到解决方案](https://stackoverflow.com/questions/6520403/how-to-set-alarm-in-android)

***编辑 2***

```
private class myReminderTask extends AsyncTask<Void, Void, Void>{
    ArrayList<String> list = new ArrayList<String>();
    @Override
    protected Void doInBackground(Void... params) {
        while(true)
        for(String s : list){
            Date d = //Make date from the string obtained from SQL
            d.toString().equals(DateFormat.getDateTimeInstance().format(new Date()));

            //Create an alaram or notification
        }

        return null;
    }

    @Override
    protected void onPreExecute() {

        Cursor c = null;
        c = db.rawQuery("select startDate,endDate from tablename" , null);

        if (cursor.getCount() != 0)
            {
                if (cursor.moveToFirst())
                {
                    do
                    {
                        list.add(cursor.getString(cursor.getColumnIndex("FirstDate")));
                        list.add(cursor.getString(cursor.getColumnIndex("LastDate")));
                    } while (cursor.moveToNext());
                }
                db.closeDatabase();
            }
            cursor.close();

        super.onPreExecute();
    }

} 
```

[在AsyncTask](http://www.vogella.com/articles/AndroidPerformance/article.html)上做所有的事情（[这里也有例子](https://stackoverflow.com/questions/9671546/asynctask-android-example)），这样主 UI 线程就不会被阻塞，在预执行代码数据库获取和在后台执行时使用 while 循环，这样它就永远不会结束

这就是我可以让你休息的工作......仅此而已，休息你必须搜索并按照自己的方式解决不要指望我制作并提供整个项目

# javascript - createRadialGradient() 和 addColorStop() 方法如何工作？

> ID：13282603
> 
> 赞同：2
> 
> 时间：2012-11-08T04:49:26.813
> 
> 标签：javascript, html, radial-gradients

任何人都可以解释我，最好用说明性图片，这些方法是如何工作的？我查看了不同的示例和教程，但似乎无法理解这个想法。我知道，`createRadialGradient()`创建了两个圆圈，但是这两个圆圈如何相互关联以及`addColorStop()`方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-15T07:38:37.460

是的，我知道这是 necro'd ......但它似乎是一个从未被纠缠过的有效问题，所以我把它留在这里以防其他人需要它。

==================================================== ===============================

嗯，渐变是从一种颜色到另一种颜色的平滑转换。

在任何渐变中，您选择颜色开始的点、颜色结束的点以及您想要的颜色，并且颜色在它们之间平滑过渡。

色标用于确定哪些颜色将成为渐变的一部分，以及这些颜色将出现在渐变中的什么位置。

在线性渐变中，颜色以直线方式从一种颜色过渡到另一种颜色，因此颜色带沿直线形成，垂直于轴。

在径向渐变中，颜色围绕一个中心圆（或点，它只是一个非常小的圆）并从该中心过渡到渐变的边缘。

这意味着构成渐变的色带在从中心过渡到边缘时会形成越来越大的圆圈。

[这里](https://www.filterforge.com/wiki/images/1/13/Radial_gradient.jpg)是一个简单的径向渐变示例，从中心的白色过渡到外边缘的黑色。

这是 createRadialGradient 语法的起源。

第一个圆圈将是颜色开始的地方，我们将任意声明它从中心开始......假设是 x:100,y:100

第二个圆圈将是颜色结束的地方，因为我们选择了中心开始它，颜色在圆圈的外边缘结束（尽管这些可以很容易地反转）。

为简单起见，中心点（在这种情况下）将保持不变：x:100,y:100

这些圆之间的真正区别将是半径。由于中心应该很小，我们将其半径设为 1，而圆的较大外半径，我们将设为 100。

这为我们提供了所需的参数：

```
x = 100;
y = 100;
radiusStart = 1;
radiusEnd = 100;

var grad = ctx.createRadialGradient(x,y,radiusStart,x,y,radiusEnd); 
```

但是，如果我们尝试按原样显示此代码，我们将看不到任何东西......这是因为我们需要颜色停止。

使用两个参数声明色标...色标的位置和颜色。

位置是一个介于 0 和 1 之间的数字，表示从开始到结束的距离的百分比。

如果我们希望颜色从白色开始，那么我们将使用：

```
grad.addColorStop(0,'#FFFFFF'); 
```

这意味着我们的颜色停止从直线的 0% 开始（意思是渐变开始的地方），并将颜色绘制为白色。

同样，第二个渐变应该是黑色的，并且应该放在渐变的最末端：

```
grad.addColorStop(1,'#000000'); 
```

请注意，这些不直接引用上下文......我们引用上下文来创建渐变，但是我们直接将停靠点添加到我们创建的渐变中。

当我们完成创建渐变后，只要我们创建的渐变仍在范围内，我们就可以将此渐变用作填充样式（甚至是描边样式）。

完整代码：

```
x = 100;
y = 100;
radiusStart = 1;
radiusEnd = 100;

var grad = ctx.createRadialGradient(x,y,radiusStart,x,y,radiusEnd);
grad.addColorStop(0,'#FFFFFF');
grad.addColorStop(1,'#000000');

ctx.beginPath();
ctx.arc(x,y,radiusEnd,0,Math.PI*2,false);
ctx.fillStyle = grad;
ctx.fill(); 
```

当你在玩这个时，不要忘记尝试一下。

尝试添加两个以上的色标...这意味着您可以从蓝色过渡到绿色到黄色到橙色到红色到紫色，而不是从黑色过渡到白色（无聊）。

请记住适当地设置位置......例如，如果您有 6 种颜色（如上），并且您希望它们均匀分布，那么您可以将位置设置为 0.2 间隔：

```
grad.addColorStop(0,'#0000FF');
grad.addColorStop(.2,'#00FF00');
grad.addColorStop(.4,'#FFFF00');
grad.addColorStop(.6,'#FF8800');
grad.addColorStop(.8,'#FF0000');
grad.addColorStop(1,'#AA00AA'); 
```

您尝试放置在同一位置的任何颜色停止都会相互覆盖。

另一个很酷的效果是在创建渐变时为圆圈设置两个不同的中心......这为渐变带来了不同的效果，并且可以成为您的武器库中的一个有价值的补充。

[这是来自](http://www.w3.org/TR/SVG2/pservers.html)W3C 规范的两个图像（它本身就是[HERE](http://www.w3.org/TR/SVG2/images/pservers/radial_gradient_focus.png)）。这两个都是径向梯度，第一和第二个圆的中心点不同。

一个更好的例子是[HERE](http://www.sitepoint.com/a-farewell-to-css3-gradients/)，虽然代码本身是用 svg 编写的 html 背景，但这些例子仍然展示了一些很好的方法来使用具有不同中心的径向渐变。他涵盖了径向梯度的理论，并展示了一些非常好的例子。

最后，一个小窍门……虽然手写渐变是很有可能的，但它有点让人头疼。使用 Photoshop、Illustrator、GIMP 或 Inkscape 并在其中之一中构建渐变通常要容易得多……然后您可以直接调整渐变，直到您喜欢为止。然后只需将色标信息复制到您的画布代码中即可。

希望其中一些对某人有所帮助。

# jsp - 集成 JSF、servlet 和 JSP

> ID：13282609
> 
> 赞同：2
> 
> 时间：2012-11-08T04:50:24.467
> 
> 标签：jsp, jsf, jakarta-ee, servlets

我只是 JSF 的初学者所以我不知道这是否是正确的问题。是否有可能如果我使用 JSF 标记/组件制作表单并为操作属性定义 servlet（即可以将表单数据提交给 servlet），如果是，那么我该如何实现这一点以及如何在 servlet 中获取表单参数。是否与方法的 request.getParameter() 或其他任何内容相同。请解释。我打算为我的自我实践制作一个项目，并希望同时使用 JSF、SERVLET 和 JSP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:40:07.677

使用 JSF 标记定义的表单必须由 JSF 处理。但是，在 JSF 页面中，您可以使用普通的 html 标记来定义普通的 html 表单（确保它位于 jsf 表单标记之外）。这个表格当然可以使用你喜欢的任何动作。虽然表单不是 JSF，但您仍然可以在表单中使用 EL 表达式从 bean 和 facelets 中获取值来布置页面。

# c# - 使用实体框架将项目添加到集合

> ID：13282610
> 
> 赞同：14
> 
> 时间：2012-11-08T04:50:27.273
> 
> 标签：c#, .net, entity-framework-4, domain-driven-design, ddd-repositories

我正在尝试使用 Entity Framework 4 遵循 DDD 存储库模式。但是在保存对聚合根的集合属性的更改时遇到问题。考虑下面我的课程。Item 是我的聚合根，其中包含 SubItem 实体的集合。

```
public class Item
{
    public int ItemId { get; set; }
    public string Name { get; set; }
    public ICollection<SubItem> SubItems { get; private set; }

    public Item()
    {
        this.SubItems = new HashSet<SubItem>();
    }
}

public class SubItem
{
    public int ItemId { get; set; }
    public int SubItemId { get; set; }
    public string Name { get; set; }
} 
```

接下来我为我的聚合根类定义了一个存储库接口

```
public interface IItemRespository
{
    Item Get(int id);
    void Add(Item i);
    void Save(Item i);
} 
```

现在这是设置 EF 映射的 DbContext 类。

```
public class ItemContext : System.Data.Entity.DbContext
{
    protected override void OnModelCreating(System.Data.Entity.DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Item>().HasKey(i => i.ItemId);
        modelBuilder.Entity<Item>().Property(i => i.Name);

        modelBuilder.Entity<Item>().HasMany(i => i.SubItems)
            .WithRequired()
            .HasForeignKey(si => si.ItemId);

        modelBuilder.Entity<SubItem>().HasKey(i => i.SubItemId);
        modelBuilder.Entity<SubItem>().Property(i => i.Name);
    }
} 
```

最后，这是我使用 DBContext 实现的 IRepository

```
public class Repository : IItemRespository
{
    public void Save(Item i)
    {
        using (var context = new ItemContext())
        {
            context.Set<Item>().Attach(i);
            context.SaveChanges();
        }
    }

    public Item Get(int id)
    {
        using (var context = new ItemContext())
        {
            var result = (from x in context.Set<Item>() where x.ItemId == id select x).FirstOrDefault();
            return result;
        }
    }

    public void Add(Item i)
    {
        using (var context = new ItemContext())
        {
            context.Set<Item>().Add(i);
            context.SaveChanges();
        }
    }
} 
```

以下代码创建一个新项目，将其添加到存储库中，添加一些新的子项目，然后保存更改。

```
IItemRespository repo = new Repository();

//Create a new Item
Item parent = new Item() { Name = "Parent" };
repo.Add(parent);

//A long period of time may pass .. . .

//later add sub items
parent.SubItems.Add(new SubItem() { Name = "Child 1" });
parent.SubItems.Add(new SubItem() { Name = "Child 2" });   
parent.SubItems.Add(new SubItem() { Name = "Child 3" });

//save the added sub items
repo.Save(parent); 
```

当 Save() 方法尝试将项目附加到上下文时，我得到以下异常。

> 发生参照完整性约束冲突：定义参照约束的属性值在关系中的主体对象和从属对象之间不一致。

我意识到我正在为存储库中的每个方法创建一个新的上下文。这是故意的。从添加项目到稍后编辑之间可能会经过很长一段时间，我不想一直保持上下文或数据库连接打开。

现在，如果我在添加子项之前将 newItem 附加到第二个上下文，如下面的代码中所示。

```
//Create a new item
Item newItem = new Item() { Name = "Parent" };

using (ItemContext context1 = new ItemContext())
{
    //Create a new aggrgate
    context1.Set<Item>().Add(newItem);
    context1.SaveChanges();
}

//Long period of time may pass

using (ItemContext context2 = new ItemContext())
{
    context2.Set<Item>().Attach(newItem);

    newItem.Name = "Edited Name";
    newItem.SubItems.Add(new SubItem() { Name = "Child 1" });
    newItem.SubItems.Add(new SubItem() { Name = "Child 2" });
    newItem.SubItems.Add(new SubItem() { Name = "Child 3" });

    context2.SaveChanges();
} 
```

但是，如果我想忠实于存储库模式，那么编辑 Item 的代码不应该知道存储库的工作方式或 ItemContext 类的任何内容。它应该能够简单地对聚合根实体进行更改，然后通过存储库 Save() 方法保存这些更改。

那么如何修改我的 Save() 方法以便正确保存对 Item.SubItems 的更改？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-08T16:27:01.863

您需要通过设置一些属性来帮助 EF 以使其正常工作。

创建新子项时，您需要自己设置 FK：

```
 parent.SubItems.Add(new SubItem() { Name = "Child 1", ItemId = parent.ItemId});
   parent.SubItems.Add(new SubItem() { Name = "Child 2", ItemId = parent.ItemId });
   parent.SubItems.Add(new SubItem() { Name = "Child 3", ItemId = parent.ItemId }); 
```

然后在您的保存功能中，将项目添加或附加到您的上下文中：

```
 public void Save(Item i)
    {
        using (var context = new ItemContext())
        {
            foreach (var subitem in i.SubItems)
            {
                if (subitem.SubItemId == 0)
                    context.Set<SubItem>().Add(subitem);
                else
                    context.Set<SubItem>().Attach(subitem);
            }
            context.Set<Item>().Attach(i);
            context.SaveChanges();
        }
    } 
```

原因是，因为在执行附加时您的实体未附加到上下文，EF 实际上并不知道实体来自何处 - 它认为未设置 FK（可能为 0）是有效状态- 这是您的错误的来源。您需要首先附加子对象的原因是您可以实际添加而不是附加。同样，由于在附加子项时您的上下文不存在，EF 不确定实体来自何处，并假设 0 PK 是正确的，从而产生错误。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2016-08-03T13:59:23.083

模型

```
public virtual ICollection<CostCenter> CostCenters { get; set; }

[NotMapped]
public int CostCenterId { get; set; }//Just to get item in view 
```

创造

```
public ActionResult Create()
{
    ViewBag.CostCenterId = new SelectList(db.CostCenters, "Id", "Name");
    return View();
} 
```

创建帖子

```
public ActionResult Create(Campaign campaign)
{
    ...
    campaign.CostCenters.Add(db.CostCenters.FirstOrDefault(f => f.Id == campaign.CostCenterId);
    return RedirectToAction("Index");
} 
```

看法

```
<%: Html.LabelFor(model => model.CostCenterId ) %>
<div class="input-control">
    <%: Html.DropDownList("CostCenterId ", String.Empty) %>
    <%: Html.ValidationMessageFor(model => model.CostCenterId ) %>
</div> 
```

# java - 为什么不说我赢了？

> ID：13282613
> 
> 赞同：0
> 
> 时间：2012-11-08T04:50:39.197
> 
> 标签：java, swing, if-statement, jbutton

这是我的 if 语句...按钮显示如下：

![在此处输入代码](../Images/816b7aa0af4c833c23dbd5c99cdea685.png)
这是我的 if 语句

```
 if((buttons[3].getName()=="x" && buttons[6].getName()=="x" &&
        buttons[9].getText()=="x")||(buttons[2].getName()=="x" &&
        buttons[5].getName()=="x" && buttons[8].getName()=="x")||
        ((buttons[1].getName()=="x") && (buttons[4].getName()=="x") &&
        (buttons[7].getName()=="x"))){
            JOptionPane.showMessageDialog(null,"X Wins");
        } 
```

因此，如果我选择第 1、第 4 和第 7 个按钮（最左边的 3 个按钮），为什么它不显示“X Wins”？
作为旁注，是的，按钮应该有名称“x”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T04:51:39.363

```
buttons[3].getName()=="x" 
```

字符串比较应该使用`equals()`而不是`==`

它应该是`buttons[3].getName().equals("x")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T04:58:44.007

**-** `Objects`在 java 中使用`"equals"`. `"=="`用于比较原始值，也用于检查 2 个或多个对象引用变量是否指向**同一对象**。`heap`

**-**所以在java`String` **中作为一个对象**应该使用`.equals()`和使用进行比较`.equalsIgnoreCase()`。

**例子：**

`buttons[1].getName().equals("x");`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T04:54:09.210

字符串之间的比较使用equals()。

```
button[1].getName().equals("x"); 
```

另外，您确保左边的 3 是 1、4 和 7 而不是 0、3 和 6，对吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T06:22:33.907

重新检查您的 if 条件。它太长了。到处混用 AND 和 OR。它可能会产生意想不到的结果。

也使用 equals() 或 equalsIgnoreCase()

# c++ - std::enable_if 第二次询问

> ID：13282615
> 
> 赞同：-1
> 
> 时间：2012-11-08T04:50:44.823
> 
> 标签：c++, std, enable-if

我对 std::enable_if 很陌生，想知道如何使用它。我有一个模板类：

```
template<int a, int b>
class foo {
  int c;
} 
```

我只希望模板有成员 c

```
a = 5\. 
```

如何使用 std::enable_if 做到这一点？这是使用 std::enable_if 的正确案例吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T04:54:37.733

您可以使用部分专业化。不需要`std::enable_if`。

```
//primary template
template<int a, int b>
class foo 
{
      //whatever 
};

//partial specialization
template<int b>
class foo<5,b>  //when a = 5, this specialization will be used!
{
  int c;  //it has member c
}; 
```

用法：

```
foo<1,3>  f1; //primary template is used
foo<5,3>  f2; //partial specialization is used 
```

# javascript - 从 gridview RowCommand 调用 Javascript 函数

> ID：13282618
> 
> 赞同：2
> 
> 时间：2012-11-08T04:50:58.607
> 
> 标签：javascript, asp.net

有谁知道如何从 ASP 中的 Gridview RowCommand 事件调用 Javascript 函数？

我需要调用函数来接收 rowindex 但我不知道如何从 rowcommand 调用 javascript 函数

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T05:53:19.593

```
protected void myGV_RowCommand(Object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName == "click1")
        {
           GridViewRow gvr = (GridViewRow)(((ImageButton)e.CommandSource).NamingContainer);

           int RowIndex = gvr.RowIndex; 
           // now call the javascript function
           Page.ClientScript.RegisterStartupScript(this.GetType(), "modalDialog", "CallJavaScriptFunction("+RowIndex +");", true);
        }

        if (e.CommandName == "click2")
        {
            Do something cool ... 
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T05:24:53.813

您可以使用 ScriptManager 调用它

```
ScriptManager.RegisterStartupScript(this, this.GetType(), "myalert", "alert('File already exists.');", true); 
```

代替警报，您可以调用 javascript 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T07:15:53.733

如果您想调用 JavaScript 函数，这可能会对您有所帮助。

Page.ClientScript.RegisterStartupScript(this.GetType(),"调用我的函数","func()",true);

只需将 func 替换为您的函数名称..

如果您在脚本中使用 jquery，请不要忘记添加源 jquery 文件。

# php - 在 php 脚本中将 160000 个变量加载到内存中是一个坏主意吗？

> ID：13282621
> 
> 赞同：1
> 
> 时间：2012-11-08T04:51:01.410
> 
> 标签：php

我正在处理一个带有句子的大文件，我只关心有英文或日文的行，所以在我阅读文件时，如果我找到英文或日文句子，我只想将它保存在一个数组中，读完后打开另一个用于编写和输出数组中所有句子的文件。这将导致我设置大约 160,000 个变量。所有的字符串，有些短有些长。只是想知道让内存设置这么多值是否是个坏主意？

文件中的示例行：“1978033 jpn 彼女は口は悪いですけど根は优しい人ですよ。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:56:08.670

这将取决于您的程序结构和可用的系统内存。

你为什么不试一试看看你的程序是如何表现的呢？做一些基准测试并计算出多少行数可以充分利用可用内存，同时提供最佳性能。

# deployment - 增量代码部署到云中的大型集群

> ID：13282623
> 
> 赞同：1
> 
> 时间：2012-11-08T04:51:05.733
> 
> 标签：deployment, amazon-web-services, cluster-computing, chef-infra, puppet

如何将我的代码增量部署到云中的大型集群？我的意思是，如果我有一个由 300 个节点组成的集群，并且我希望该集群使用我最新的构建代码进行更新，但仅限于更改的文件（二进制和数据文件），我该怎么做？

我遇到了谋杀，但它似乎没有进行增量文件部署并将所有内容复制到每个节点。

我还查看了 chef，但这似乎也不适合增量总代码部署，更适合在每台机器上运行安装程序并确保安装的代码配置文件根据 chef 服务器是最新的. 它看起来并不关心已安装程序的版本。所以我看到厨师有文件控制，但将它用于配置文件可能有意义，但不确定它对于具有数百个二进制文件和数据文件的代码项目是否有意义。

我可以肯定会编写自己的系统来执行此操作，但我想知道是否有更好的选择来进行大型集群增量部署，尤其是在开发阶段？

就我而言，服务器是 windows，而云是 aws。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:33:54.993

看看[kwatee](http://Www.kwatee.net)（我是附属的）。它是一个轻量级且完全免费的工具。除其他外，它通过将每个文件的哈希值与已部署文件的哈希值进行比较来自动进行增量部署。

# ios - Pin 动画Drop mapView-iOS

> ID：13282624
> 
> 赞同：0
> 
> 时间：2012-11-08T04:51:11.937
> 
> 标签：ios, mkannotation

我已经实现了如下所示的代码。我想添加具有下降效果的动画。但是，一旦我输入 pinView.animatesDrop 就无法识别！我无法弄清楚我做错了什么？

```
 - (MKAnnotationView *)mapView:(MKMapView *)mV viewForAnnotation:(id <MKAnnotation>)annotation {
       MKAnnotationView *pinView=nil;
        if(![annotation isKindOfClass:[Annotation class]]) // Don't mess user location
            return nil;

    static NSString *defaultPinID = @"StandardIdentifier";
    pinView = (MKAnnotationView *)[self.mapView dequeueReusableAnnotationViewWithIdentifier:defaultPinID];
    if (pinView == nil){
        pinView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:defaultPinID];

    }

    // Build our annotation
    if ([annotation isKindOfClass:[Annotation class]]) {
        Annotation *a = (Annotation *)annotation;

        pinView.image = [ZSPinAnnotation pinAnnotationWithColor:a.color];// ZSPinAnnotation Being Used
        pinView.annotation = a;
        pinView.enabled = YES;
        pinView.centerOffset=CGPointMake(6.5,-16);
        pinView.calloutOffset = CGPointMake(-11,0);
            //pinView.animatesDrop = YES;

    }

    pinView.canShowCallout = YES;
    UIButton *rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [rightButton setTitle:annotation.title forState:UIControlStateNormal];
    [pinView setRightCalloutAccessoryView:rightButton];
    pinView.leftCalloutAccessoryView = [[UIView alloc] init];
    pinView.leftCalloutAccessoryView=nil;

    /*UIButton *leftButton = [UIButton buttonWithType:UIButtonTypeInfoLight];
    [leftButton setTitle:annotation.title forState:UIControlStateNormal];
    [pinView setLeftCalloutAccessoryView:leftButton];*/
    return pinView;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T04:57:30.327

您的“pinView”是一个`MKAnnotationView`但`animatesDrop`仅与相关联`MKPinAnnotationView`。因此它不识别。`MKPinAnnotationView`如果您希望注释随动画一起下降，则需要将注释更改为 a 。

希望能帮助到你

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-02-22T11:55:34.553

用这个

```
 Objanno.animatesDrop = YES; 
```

# php - 使用 $_GET 创建自定义链接

> ID：13282625
> 
> 赞同：-1
> 
> 时间：2012-11-08T04:51:37.593
> 
> 标签：php, mysql, pdo

我得到了下面的代码来工作，但我想知道是否有更好的方法来做到这一点。即使仅使用本示例中调用的两个变量，它也会使 URL 看起来很草率。如果可能，我希望我的 URL 看起来干净，我想知道我创建自定义链接的方式是否危险。

在这个例子中，我真的没有做任何类型的消毒，我只是让它尽快工作。基本上我有一个数据库，其中列出了不同类别和子类别中的不同业务，用户从下拉列表中选择主类别和子类别。

然后，用户被引导到一个页面，该页面具有所有这些企业的列表作为链接，每个链接都是唯一的，因此当他们单击它时，只有数据库中有关该企业的信息显示在模板页面上，所有页面都具有相同的布局只有业务独有的内容发生变化。您可以看到，如果我要传递更多的变量，那么 URL 会变得非常长且荒谬，无法复制粘贴并与他人共享。

```
<?php
require 'DB.php';
require 'functions.php';
session_start();
session_is_registered(myusername);
$mainCat = $_POST['thing'];
$subCat = $_POST['subCats'];
echo $mainCat;
echo "<br>" . $subCat;
try{
$stmt = $conn->prepare('SELECT * FROM `CLL_businesses` WHERE `bCatID` = :bCategory AND `sCatID` = :sCategory');
$stmt->bindValue(':bCategory', $mainCat);
$stmt->bindValue(':sCategory', $subCat);
$stmt->execute();
} catch (PDOException $e){
    echo 'Connection failed: ' . $e->getMessage();
}

while($row = $stmt->fetch())
  {
$name1 = trim($row['name']);
$name = $row['name'];
$logo = $row['logo'];
$bCatID = $row['bCatID'];
$sCatID = $row['sCatID'];
$username = $row['username'];
$website = $row['website'];
  echo "<br>" . "<a href=" ."http://test.com/test/new/test12.php?string1=".$name1 . "&string2=" . $logo . ">" . $name ."</a>";

  }

?> 
```

测试12.php

```
<?php

$name = $_GET['string1'];
$logo = $_GET['string2'];

echo $name;
echo "<br>" . $logo;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:05:32.700

我通过只向 url 添加一个字符串来解决它

# javascript - Div 内容淡入淡出

> ID：13282630
> 
> 赞同：1
> 
> 时间：2012-11-08T04:52:05.073
> 
> 标签：javascript, jquery

如果这个问题之前已经发布过一次，我深表歉意，我是 jquery 的菜鸟，但似乎我有一部分工作。

我的代码部分工作，但是当您访问 krissales.com 时，如果您明白我的意思，它会加载页面两次。我只希望它加载一次，淡入和淡出一次，但是它会加载两次。

再次，如果这已经发布，我深表歉意。我很感激你的时间。谢谢你。

这是我的代码：

```
function page_load($href) {
  if($href != undefined && $href.substring(0, 2) == '#/') {
    // replace body the #content with loaded html
    $('#content').load($href.substring(2)); 
    $('#content').fadeOut('slow', function() {   
      $('#content').fadeIn('slow');
    });
  }
} 
```

完整的核心位于：

[http://www.krissales.com/_lib/_js/core.js](http://www.krissales.com/_lib/_js/core.js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:36:12.730

你正在做一个缓慢的淡出，然后在回调中淡入。您可以尝试在 load() 方法回调中隐藏 #content，然后链接一个 fadeIn() 作为最终方法。例如：

```
function page_load($href) {
  if($href != undefined && $href.substring(0, 2) == '#/') {
    // replace body the #content with loaded html
    $('#content').load($href.substring(2), function () {
      $('#content').hide().fadeIn('slow');
    });
  }
} 
```

# iphone - iPhone 视频通话的起点

> ID：13282632
> 
> 赞同：1
> 
> 时间：2012-11-08T04:52:16.287
> 
> 标签：iphone, ios, video, call

我不是在这里寻找用于视频通话的 API。我知道一些 API，比如 OpenTok。

但我想创建自己的方法来制作视频通话应用程序。

我该如何开始呢？我对 JSON 和 SOAP 服务有很好的了解，并且过去在流媒体方面做过一些工作，这对我有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:25:44.183

这真的很有挑战性。首先，iOS 没有特定的 API 来通过 Internet 流式传输音频+视频。这里的主要问题是，使用 AVFoundation 您可以捕获单帧，但是在不压缩的情况下发送它们即使对于 wifi 连接或服务器来说也是非常痛苦的。要压缩视频，您可以使用 CPU，但这需要大量操作，这会耗尽电池电量并加热您的设备。有一种方法可以使用 iPhone 上的特定芯片压缩视频，但仅当您使用`AVAssetWriter`类在设备上编写时才使用它。
堆栈上有一些有用的问题，例如[this](https://stackoverflow.com/questions/3444791/streaming-video-from-an-iphone)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:01:36.673

如果您想创建自己的方法来制作视频通话应用程序，一个很好的起点是查看 AVFoundation 的[Media Capture](https://developer.apple.com/library/mac/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html#//apple_ref/doc/uid/TP40010188-CH5-SW2)。

之后，您需要找到一种方法来从设备读取和写入字节。您可以使用临时构建（TCP 服务器）对此进行测试。

设置服务器，使其可以充当设备相互通信的代理。

# html - 一些帮助使用 css 拉伸列

> ID：13282635
> 
> 赞同：0
> 
> 时间：2012-11-08T04:52:24.580
> 
> 标签：html, css

我有一个非常基本的要求，即屏幕上有一个左侧菜单（列），右侧有内容。我已经提出了一个基本的代码，但它并没有真正解决我正在寻找的东西。首先是代码。

**html**

```
<body>
<div id="wrapper">
    <div id="header">Header</div>
    <div id="left-column">Left Column</div>
    <div id="content">@RenderBody()</div>
</div>
</body> 
```

**CSS**

```
 html, body 
{
    margin:0;
    padding:0;
}

#wrapper 
{
    margin:0 auto;
    width:1000px;           /* width of whole page */
}

#header 
{
    height:25px;
    background-color:lightblue;
}

#left-column 
{
    float:left;
    width:200px;
    background-color:maroon;
}

#content 
{
    float:left;
    width:800px;

    background-color:lightgray;
} 
```

这确实列出了内容，但我一直在寻找以下内容。

1.  左侧菜单和内容列的高度应相等，即较小的 div（Menu 或 Content）应拉伸以与较大的 div 对齐。
2.  当两个 div 的内容都小于浏览器屏幕高度时，那么 div（菜单和内容）都应该拉伸自己以适应屏幕高度。

任何人都可以建议为实现上述两个条件进行必要的修改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:09:23.557

***[演示](http://tinkerbin.com/PFyvkHiz)***

嗨 Nirvan 你可以像这样轻松地做

**写这个 CSS**

```
 html, body{
margin:0;
padding:0;

}

#wrapper 
{
    margin:0 auto;

}
#header 
{
    height:25px;
    background-color:lightblue;
}

#left-column{
background:red;
  position:absolute;
  top:25px;
  left:0;
  width:200px;
  bottom:0;
width:200px;
}
#content {
background:green;
  position:absolute;
  left:200px;
  right:0;
  top:25px;
  bottom:0;
} 
```

**写这个 html**

```
 <div id="wrapper">
    <div id="header">Header</div>

  <div id="left-column">Left Column <br >Left Column <br >Left Column <br ></div>
    <div id="content">@RenderBody() </div>

  </div> 
```

***[现场演示](http://tinkerbin.com/PFyvkHiz)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T06:49:34.823

这是不使用人造列的解决方案之一。它使用负边距的概念，如在[此处输入链接描述](http://www.ejeliot.com/blog/61)中所述。下面的代码满足我在问题中提到的两个要求。

**html**

```
<body>
<div id="wrapper">
    <div id="header">Header</div>
    <div id="container">
        <div id="left-column">
            Left Menu
        </div>
        <div id="content">@RenderBody()</div>
    </div>
</div> 
```

**Css**

```
 html, body 
{
    margin:0;
    padding:0;
    height:100%;
}

#wrapper 
{
    margin:0 auto;
    width:1000px;
    height:100%;    
}

#header 
{
    width:1000px;
    position:fixed;
    top:0;
    height:25px;
    background-color:lightblue;
}

#container 
{
    overflow:hidden;
    min-height:100%;
}

#container #left-column
{
    float:left;
    padding-top:25px;
    background:maroon;
    width:200px;
    padding-bottom:5000px;
    margin-bottom:-5000px;
}

#container #content
{
    float:left;
    padding-top:25px;
    background-color:lightgray;
    width:800px;
    padding-bottom:5000px;
    margin-bottom:-5000px;
} 
```

问候， 尼尔文

# java - Web服务方法中的空参数

> ID：13282636
> 
> 赞同：1
> 
> 时间：2012-11-08T04:52:49.750
> 
> 标签：java, web-services, jersey, jax-rs

我将泽西岛用于 WS。我有以下方法：

```
@Path("...")
@POST
public Response updateConfigs(@Context HttpServletRequest request, ....
        ConfigurationItemList itemList) {
    ...
} 
```

其中 itemList 是 POST 参数。当我尝试使用空 POST 参数调用此方法时，出现异常：

```
[#|2012-10-12T14:08:52.623+0200|SEVERE|glassfish3.1.1|com.sun.jersey.spi.container.ContainerResponse|_ThreadID=25;_ThreadName=Thread-2;|The exception contained within MappableContainerException could not be mapped to a response, re-throwing to the HTTP container
java.io.EOFException: No content to map to Object due to end of input
       at org.codehaus.jackson.map.ObjectMapper._initForReading(ObjectMapper.java:2173)
       at org.codehaus.jackson.map.ObjectMapper._readValue(ObjectMapper.java:2106)
       at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1004)
       ...
|#]

[#|2012-10-12T14:08:52.624+0200|WARNING|glassfish3.1.1|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=25;_ThreadName=Thread-2;|StandardWrapperValve[...ApplicationConfig]: PWC1406: Servlet.service() for servlet ....ApplicationConfig threw exception
java.io.EOFException: No content to map to Object due to end of input
       at org.codehaus.jackson.map.ObjectMapper._initForReading(ObjectMapper.java:2173)
       at org.codehaus.jackson.map.ObjectMapper._readValue(ObjectMapper.java:2106)
       at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1004)
       at org.codehaus.jackson.jaxrs.JacksonJsonProvider.readFrom(JacksonJsonProvider.java:410)
       ....
|#] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:35:59.303

你得到的错误

> java.io.EOFException：由于输入结束，没有要映射到 Object 的内容

是我对空输入的期望。既然没有 JSON 可供消费，那么您希望 JAX-RS 做什么？

**编辑：**在 JAX-RS 2.0 中，[将包含验证](http://java.net/projects/jax-rs-spec/pages/Validation)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:52:53.817

我怀疑唯一可能的解决方法是使用您自己的 JAX-RS 数据提供程序，它将正确处理传入`NULL`的 s。另请参阅：[JAX-RS/Jersey 如何自定义错误处理？](https://stackoverflow.com/questions/583973/jax-rs-jersey-how-to-customize-error-handling)

# mvvm - wcf ria 服务中的调用操作无法包含外键表

> ID：13282637
> 
> 赞同：1
> 
> 时间：2012-11-08T04:52:50.507
> 
> 标签：mvvm, silverlight-4.0, wcf-ria-services, ria

![实体图](../Images/ff540e4e25432451deeb50cdcb1cf4a8.png)

你好。我正在使用返回类“产品”的调用操作

```
public Product GetProductById(int Id)
        {
            Product Record = this.ObjectContext.Product.Include("Order_Detail").Where(d=>d.ProductID=Id).FirstOrDefault()
            return Record;
        } 
```

但我无法在课程的完成事件中获得 Order_Detail

```
InvokeOperation<Product> Invk = ObjProduct.GetProductById();
                Invk.Completed += (sender, e) =>
                {
                    if (!Invk.HasError)
                    {
                        Product ObjProduct = Invk.Value;
                        Order objorder=ObjProduct.Order_Detail;
                    }
                }; 
```

我将 ObjProduct.Order_Detail 设为 Null 我不知道为什么我无法在此 Product 实体中包含 Order_Detail

我也在元数据中写了 [Include]

```
[Include]
public Order Order { get; set; } 
```

但我仍然无法在集合中获得 Order_Detail。等待正面回应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:53:41.503

这是预期的行为。调用旨在在服务器上执行操作或检索简单对象。
如您所见，InvokeOperation 回调不包含为包含实体腾出空间的常用实体/所有实体属性。
我建议您使用带有参数的标准加载操作来获取数据。

```
public IQueryable<Product> GetProductById(int Id)
    {
        return this.ObjectContext.Product.Include("Order_Detail").Where(d=>d.ProductID=Id);
    } 
```

如果您要实现的是“非累积执行”（即不要使用查询结果加载您的 domainContext 的 entityContainer），请查看Mathew Charles的这篇[文章](http://blogs.msdn.com/b/digital_ruminations/archive/2010/04/21/direct-entityquery-execution-non-accumulating-execution.aspx)

# python - 我如何从网站上用 python 抓取一些照片

> ID：13282639
> 
> 赞同：0
> 
> 时间：2012-11-08T04:53:05.020
> 
> 标签：python, database, web-scraping

我需要从网站上收集用户的个人资料照片。我知道python和django，但不知道我该怎么做。

有人可以指导我如何制作 python 程序，以便我可以列出它只在他们的网站上说的网站，而不是任何外部链接，并检查该域中的每个页面。

编辑：假设我想在 stackoverflow 中收集用户的所有缩略图。前提是我们没有任何所有用户页面并通过。我想浏览所有问题页面，然后在那里抓取照片并使用用户 ID 保存到 hardidsk，这样我们就不会覆盖

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T04:57:29.640

```
with open("some_png.png","wb") as f:
     f.write(urllib2.urlopen("http://icons-search.com/img/yellowicon/TMNT_lin.zip/lin-png-256x256-Leonardo_256x256.png-256x256.png").read()) 
```

要找到您需要使用[scrappy](http://scrapy.org/)（或类似框架）的图像 url

有几个关于将它用作蜘蛛的教程（例如[http://doc.scrapy.org/en/latest/intro/tutorial.html](http://doc.scrapy.org/en/latest/intro/tutorial.html)）

# android - Android TableLayout 正在调整大小

> ID：13282640
> 
> 赞同：0
> 
> 时间：2012-11-08T04:53:10.530
> 
> 标签：android, autoresize, android-tablelayout

[http://imgur.com/a/x5xES](http://imgur.com/a/x5xES)

第一个图像是我的应用程序在将 EditText 放入表格行之前的外观。在我把它变成一个表格行之后，下面的行被调整了大小，即使它们都具有相同的重量。但是，我希望 EditText 位于表格行中，所以我可以再次制作它吗？

原始xml布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/TableLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingTop="5dp"
    android:shrinkColumns="30"
    android:stretchColumns="20" >

         <EditText
        android:id="@+id/editText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="numberSigned" 
        android:layout_weight="3">

        <requestFocus/>

    </EditText>

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/button7"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:onClick="enterNum"
            android:text="@string/num7" />

        <Button
            android:id="@+id/button8"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:onClick="enterNum"
            android:text="@string/num8" />

        <Button
            android:id="@+id/button9"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:onClick="enterNum"
            android:text="@string/num9" />

        <Button
            android:id="@+id/buttonDiv"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:onClick="enterOp"
            android:text="@string/div" />
    </TableRow> 
```

更改代码：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/TableLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingTop="5dp"
    android:shrinkColumns="30"
    android:stretchColumns="20" >

      <TableRow
        android:id="@+id/tableRow 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T06:43:24.090

```
try this code i modified the xml as your requirement

<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayOut"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingTop="5dp" >

    <EditText
        android:id="@+id/editText"
        android:layout_width="fill_parent"
        android:layout_height="50dip"
        android:layout_weight="1"
        android:inputType="numberSigned" >

        <requestFocus />
    </EditText>

    <TableLayout
        android:id="@+id/TableLayout1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@+id/editText"
        android:shrinkColumns="30"
        android:stretchColumns="20" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
             >

            <Button
                android:id="@+id/button7"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:onClick="enterNum"
                android:text="7" />

            <Button
                android:id="@+id/button8"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:onClick="enterNum"
                android:text="8" />

            <Button
                android:id="@+id/button9"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:onClick="enterNum"
                android:text="9" />

            <Button
                android:id="@+id/buttonDiv"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:onClick="enterOp"
                android:text="/" />
        </TableRow>
                <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
             >

            <Button
                android:id="@+id/button7"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:onClick="enterNum"
                android:text="4" />

            <Button
                android:id="@+id/button8"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:onClick="enterNum"
                android:text="5" />

            <Button
                android:id="@+id/button9"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:onClick="enterNum"
                android:text="6" />

            <Button
                android:id="@+id/buttonDiv"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:onClick="enterOp"
                android:text="*" />
        </TableRow>
                <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
             >

            <Button
                android:id="@+id/button7"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:onClick="enterNum"
                android:text="1" />

            <Button
                android:id="@+id/button8"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:onClick="enterNum"
                android:text="2" />

            <Button
                android:id="@+id/button9"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:onClick="enterNum"
                android:text="3" />

            <Button
                android:id="@+id/buttonDiv"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:onClick="enterOp"
                android:text="-" />
        </TableRow>
    </TableLayout>

</RelativeLayout> 
```

# grep - 带有字母的grep

> ID：13282642
> 
> 赞同：2
> 
> 时间：2012-11-08T04:53:17.840
> 
> 标签：grep

我想在我的文件中查找`file.txt`包含模式`phone/number/`后跟小写字母 (az) 的所有行。我知道`phone/number/`，我可以使用

```
grep "phone/number/" file.txt 
```

但是它后面的字母呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T04:55:22.430

尝试这样做：

```
grep 'phone/number/[a-z]' file.txt 
```

# python - 在 Django 中配置日志记录的最终方法是什么？

> ID：13282644
> 
> 赞同：0
> 
> 时间：2012-11-08T04:53:20.460
> 
> 标签：python, django, logging

网上有很多示例，但是在 settings.py 中配置 LOGGING 字典以捕获解决方案及其相关应用程序发生的所有事情的最佳方法是什么 - 从小错误到 sql/model 调用。

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T06:30:38.523

查看 [Django 日志记录文档](http://docs.djangoproject.com/en/dev/topics/logging)，这些答案可能对[答案 1](https://stackoverflow.com/questions/1598823/elegant-setup-of-python-logging-in-django)和答案 2[有用](https://stackoverflow.com/questions/5438642/django-setup-default-logging)

并根据您的应用进行定制

希望这对你有帮助

# c++ - 无法弄清楚如何循环计算单个学生的总数

> ID：13282648
> 
> 赞同：1
> 
> 时间：2012-11-08T04:53:34.147
> 
> 标签：c++

我遇到了这个程序的问题。我需要它来询问用户 ID，然后询问书籍代码，然后询问书籍的费用。个人可以输入未知数量的书籍。程序需要计算每个学生的书本总数，然后询问另一个做同样事情的学生。然后程序必须显示总数和书籍总数。我似乎无法弄清楚使用什么来跟踪个别学生的条目。我将能够从我正在阅读的有关数组的内容中做到这一点。但我们还没有到那个地步。教授希望我们用循环来做这件事。我很迷茫，任何帮助都会很棒。

```
#include <iostream>
#include <iomanip>

using namespace std;
int main ()
{
    //Declare Variables.
    int student_id;
    char book_code;
    float book_cost;
    float tax_amount;
    float book_subtotal;
    const int SENTINEL = -9999;
    const double TAX = .07;
    float total_book_cost;
    int number_books;
    int total_books_sold;
    double grand_total;

    //Set Variables to Zero.
    number_books = 0;
    total_book_cost = 0.00;
    grand_total = 0.00;

    //Set Decimal to two places.
    cout << fixed << showpoint;
    cout << setprecision(2);

    //Input Data
    cout<<"Please enter your Student ID, then press enter."<<endl;
    cin>>student_id;
    while (student_id != SENTINEL){
        cout<<"Please enter your Book Code, then press enter."<<endl;
        cin>>book_code;
        cout<<"Please enter the cost of the book, then press enter."<<endl;
        cout<<"$"; cin>>book_cost;
        tax_amount = book_cost * TAX;
        book_subtotal = book_cost + tax_amount;
        total_book_cost += book_subtotal;
        number_books++;
        cout<<"\tStudent Textbook Purchases Report"<<endl;
        cout<<"********************************************"<<endl;
        cout<<"Student"<<"\tBook"<<"\tBook"<<"\tTax"<<"\tBook"<<endl;
        cout<<"Id"<<"\tCode"<<"\tCost"<<"\tAmount"<<"\tSubtotal"<<endl;
        cout<<"--------------------------------------------"<<endl;
        cout<<student_id<<setw(5)<<book_code<<setw(8)<<"$"<<book_cost<<
        setw(3)<<"$"<<tax_amount<<setw(4)<<"$"<<book_subtotal<<endl;
        cout<<endl;
        cout<<"Total number of books purchased:"<<setw(8)<<number_books<<endl;
        cout<<"Total books cost including tax:"<<setw(9)<<"$"<<total_book_cost<<endl;
        cout<<"Please enter your Student ID, then press enter."<<endl;
        cin>>student_id;
    }
    grand_total += total_book_cost;
    total_books_sold += number_books;
    cout<<"**************************************************"<<endl;
    cout<<"Grand Totals:"<<endl;
    cout<<"Total number of students who purchased books:"<<endl;
    cout<<"Total number of books sold:"<<endl;
    cout<<"Total cost of all books and taxes:"<<setw(9)<<"$"<<grand_total<<endl;

    //Can put grand totals here

    system("Pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:21:54.600

您可以像这样使用循环：

```
#include <iostream>
#include <iomanip>

using namespace std;
int main ()
{

    //Set Decimal to two places.
    cout << fixed << showpoint;
    cout << setprecision(2);

    int total_books_sold = 0;
    double grand_total = 0.0;

    const int SENTINEL = -9999;
    int     student_id = SENTINEL;
    //Input Data
    cout<<"Please enter your Student ID, then press enter."<<endl;
    cin>>student_id;

    while (student_id != SENTINEL){

        double  total_book_cost = 0.0;
        int     number_books = 0;
        char    book_code = '\0';
        while (true) 
        {
            cout<<"Please enter your Book Code, then press enter."<<endl;
            cin>>book_code;

            if (book_code == 'x')
                break;

            float   book_cost;
            cout<<"Please enter the cost of the book, then press enter."<<endl;
            cout<<"$"; cin>>book_cost;

            const double TAX = .07;
            double tax_amount = book_cost * TAX;
            double book_subtotal = book_cost + tax_amount;

            total_book_cost += book_subtotal; 
            number_books++;

            cout<<"\tStudent Textbook Purchases Report"<<endl;
            cout<<"********************************************"<<endl;
            cout<<"Student"<<"\tBook"<<"\tBook"<<"\tTax"<<"\tBook"<<endl;
            cout<<"Id"<<"\tCode"<<"\tCost"<<"\tAmount"<<"\tSubtotal"<<endl;
            cout<<"--------------------------------------------"<<endl;
            cout<<student_id<<setw(5)<<book_code<<setw(8)<<"$"<<book_cost<<
                setw(3)<<"$"<<tax_amount<<setw(4)<<"$"<<book_subtotal<<endl;
            cout<<endl;

        };

        grand_total += total_book_cost;
        total_books_sold += number_books;

        cout<<"Total number of books purchased:"<<setw(8)<<number_books<<endl;
        cout<<"Total books cost including tax:"<<setw(9)<<"$"<<total_book_cost<<endl;
        cout<<"Please enter your Student ID, then press enter."<<endl;
        cin>>student_id;
    }

    cout<<"**************************************************"<<endl;
    cout<<"Grand Totals:"<<endl;
    cout<<"Total number of students who purchased books:"<<endl;
    cout<<"Total number of books sold:"<<endl;
    cout<<"Total cost of all books and taxes:"<<setw(9)<<"$"<<grand_total<<endl;

    //Can put grand totals here

    system("Pause");
    return 0;
} 
```

# html - 如何使用'html5'运行时将plupload直接实现到s3？

> ID：13282652
> 
> 赞同：7
> 
> 时间：2012-11-08T04:53:57.207
> 
> 标签：html, amazon-s3, cors, plupload

在这个非常相关的问题（[使用 Plupload HTML5 运行时直接上传到 Amazon S3](https://stackoverflow.com/questions/8463694/upload-directly-to-amazon-s3-using-plupload-html5-runtime)）中提到，亚马逊现在允许使用 HTML5 上传 CORS，但是有没有人成功配置 plupload 以使用“html5”运行时将文件推送到 s3？对相关问题的回复未提供任何实施细节。

这是我当前的plu​​pload配置：

```
$("#uploader").plupload({
    // General settings
    runtimes: 'html5,flash',
    url: 'http://s3.amazonaws.com/' + $('#Bucket').val(),
    max_file_size: '20mb',
    multipart: true,
    multipart_params: {
        'key': '${filename}', // use filename as a key
        'Filename': '${filename}', // adding this to keep consistency across the runtimes
        'acl': $('#Acl').val(),
        'Content-Type': 'binary/octet-stream',
        'success_action_status': '201',
        'AWSAccessKeyId': $('#AWSAccessKeyId').val(),
        'policy': $('#Policy').val(),
        'signature': $('#Signature').val()
    },
    file_data_name: 'file',
    multiple_queues: true,
    filters: [
        { title: "Image files", extensions: "jpg,png,gif,jpeg" }
    ],
    flash_swf_url: '/Scripts/plupload/plupload.flash.swf',
}); 
```

上面的代码适用于“flash”运行时，因此策略生成并正确签名。

我是否缺少 multipart_params 配置对象中的任何参数？

此外，我在我的 s3 存储桶上使用以下 CORS 配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
    <CORSRule>
        <AllowedOrigin>*</AllowedOrigin>
        <AllowedMethod>PUT</AllowedMethod>
        <AllowedMethod>POST</AllowedMethod>
        <AllowedMethod>GET</AllowedMethod>
        <AllowedMethod>HEAD</AllowedMethod>
        <MaxAgeSeconds>3000</MaxAgeSeconds>
        <AllowedHeader>*</AllowedHeader>
    </CORSRule>
</CORSConfiguration> 
```

我是否需要对 s3 存储桶进行任何其他配置更改以允许从“html5”plupload 运行时上传 CORS？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T22:38:27.013

这是我用来让它工作的确切代码......

```
var params = {};

        $('#uploader').pluploadQueue({
            runtimes: 'html5,flash',
            flash_swf_url: '/js/plupload/1.5.4/plupload.flash.swf', // Have to load locally
            url: 'https://s3.amazonaws.com/my-bucket-name',
            multiple_queues: true,
            preinit: {
                UploadFile: function (up, file) {
                    up.settings.multipart_params = {
                        key: file.name,
                        filename: file.name,
                        AWSAccessKeyId: 'my-aws-access-key',
                        acl: 'private',
                        policy: params[file.name]["policy"],
                        signature: params[file.name]["signature"],
                        success_action_status: '201'
                    }
                }
            },
            init: {
                FilesAdded: function (up, files) {
                    plupload.each(files, function (file) {

                        $.ajax({
                            url: '/r/prepare_raw_upload',
                            type: 'post',
                            data: {
                                acl: 'private',
                                bucket: 'my-bucket-name',
                                file: file.name
                            },
                            success: function (data) {
                                if (data.success) {
                                    params[data.file] = { policy: data.policy, signature: data.signature };
                                }
                                else if (data.message) {
                                    alert(data.message);
                                }
                            }
                        });

                    });
                }
            }
        }); 
```

您会在 FilesAdded 事件侦听器中注意到我有一个 ajax 调用。这将从我的服务器中为添加的每个文件检索策略和签名。

这是发回策略和签名的背面代码

```
public static Dictionary<string, object> prepareUpload(DateTime now, string acl, string bucket, string key, string file)
    {
        Dictionary<string, object> result = new Dictionary<string, object>();
        ASCIIEncoding encoding = new ASCIIEncoding();

        string policy = createUploadPolicy(now, acl, bucket, key);
        result.Add("policy", Convert.ToBase64String(encoding.GetBytes(policy)));
        result.Add("signature", createUploadSignature(policy));
        result.Add("file", file);

        return result;
    }

    public static string createUploadPolicy(DateTime now, string acl, string bucket, string key)
    {
        ASCIIEncoding encoding = new ASCIIEncoding();
        JavaScriptSerializer jss = new JavaScriptSerializer();

        Hashtable policy = new Hashtable();
        policy.Add("expiration", now.AddDays(1).ToString("yyyy'-'MM'-'dd'T'HH':'mm':'ss.fff'Z'"));
        ArrayList conditions = new ArrayList();
        conditions.Add(new Hashtable { { "acl", acl } });
        conditions.Add(new Hashtable { { "bucket", bucket } });
        conditions.Add(new Hashtable { { "key", key } });
        conditions.Add(new ArrayList { "starts-with", "$name", "" });
        conditions.Add(new ArrayList { "starts-with", "$filename", "" });
        conditions.Add(new ArrayList { "starts-with", "$success_action_status", "" });
        policy.Add("conditions", conditions);

        return jss.Serialize(policy);
    }

    public static string createUploadSignature(string policy)
    {
        ASCIIEncoding encoding = new ASCIIEncoding();
        byte[] policyBytes = encoding.GetBytes(policy);
        string policyBase64 = Convert.ToBase64String(policyBytes);

        byte[] secretKeyBytes = encoding.GetBytes(ConfigurationManager.AppSettings["AWSSecretKey"]);
        HMACSHA1 hmacsha1 = new HMACSHA1(secretKeyBytes);

        byte[] policyBase64Bytes = encoding.GetBytes(policyBase64);
        byte[] signatureBytes = hmacsha1.ComputeHash(policyBase64Bytes);

        return Convert.ToBase64String(signatureBytes);
    } 
```

使这项工作非常有用的链接是......

[如何使 Plupload 直接上传到 Amazon S3？](https://stackoverflow.com/questions/4639471/how-do-i-make-plupload-upload-directly-to-amazon-s3)

[http://codeonaboat.wordpress.com/2011/04/22/uploading-a-file-to-amazon-s3-using-an-asp-net-mvc-application-directly-from-the-users-browser/](http://codeonaboat.wordpress.com/2011/04/22/uploading-a-file-to-amazon-s3-using-an-asp-net-mvc-application-directly-from-the-users-browser/)

# iphone - ABRecordCopyValue 中的内存泄漏

> ID：13282655
> 
> 赞同：2
> 
> 时间：2012-11-08T04:54:16.110
> 
> 标签：iphone, ios6, abaddressbook

我正在构建一个应用程序，要求我从联系人中选择名字和姓氏。在使用 Build Analyzer 运行时，我在这段代码中遇到了内存泄漏。

```
ABMutableMultiValueRef fName = ABRecordCopyValue(person, kABPersonFirstNameProperty);
ABMutableMultiValueRef lName = ABRecordCopyValue(person, kABPersonLastNameProperty);    
if(fName){
    self.firstNameText.text = fName;
}
if (lName) {
    self.lastNameText.text = lName;
}
CFRelease(fName);
CFRelease(lName); 
```

我真的厌倦了修复它，但无法修复。请帮帮我。

任何形式的帮助都会受到高度评价。

提前致谢！！

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-11-08T06:50:17.413

您好，这是委托方法。

在 - (BOOL)peoplePickerNavigationController: (ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person 方法中，您可以检索任何用户信息，例如 kABPersonFirstNameProperty for first name, kABPersonLastNameProperty for last name property

```
 - (void)peoplePickerNavigationControllerDidCancel:(ABPeoplePickerNavigationController *)peoplePicker {
// assigning control back to the main controller
[self dismissModalViewControllerAnimated:YES];
}

  - (BOOL)peoplePickerNavigationController: (ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person {
NSString *firstname=(NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty);
Usernametf.text=firstname;
//  NSMutableDictionary *dict=[[NSMutableDictionary alloc] initWithObjectsAndKeys:firstname,@"FirstName", nil];
//[selectedemailArray addObject:dict];
   // NSLog(@"\n array is %@",selectedemailArray);

//[objDatabase insertArray:selectedemailArray forTable:@"EmailList"];
//[objDatabase insertDictionary:dict forTable:@"EmailList"];
//    [dict release];
//    dict =nil;

// remove the controller
[self dismissModalViewControllerAnimated:YES];
return NO;

}

- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier{
return NO;
} 
```

让我知道它是否有效..!!!!

编码快乐！！！！

# wso2 - WSO2 ESB 4.0.3 不工作

> ID：13282657
> 
> 赞同：2
> 
> 时间：2012-11-08T04:54:23.063
> 
> 标签：wso2, wso2esb, wso2carbon

我下载了 WSO2 ESB 4.0.3 的二进制版本现在当我运行 wso2server.bat 时，它只执行 2-3 秒并退出并输出以下内容：

```
>wso2server.bat
JAVA_HOME environment variable is set to D:\Java\jdk1.6.0_24
CARBON_HOME environment variable is set to D:\iprint\WSO2ES~1.3\bin\..
[2012-11-08 10:02:12,250]  INFO - Main Initializing system...
[2012-11-08 10:02:12,375]  INFO - HttpTransport Created Connector [HTTP_11_NIO:/
/*:9763]
[2012-11-08 10:02:12,390]  INFO - HttpTransport Created Connector [HTTPS_11_NIO:
//*:9443]
[2012-11-08 10:02:12,453]  INFO - TomcatCarbonWebappDeployer Deployed Carbon web
app: StandardEngine[Tomcat].StandardHost[defaulthost].StandardContext[/]
[2012-11-08 10:02:12,593]  INFO - TransactionFactory Starting Atomikos Transacti
on Manager 3.7.0
> 
```

我在日志中也找不到任何东西。wso2.org 站点上的 4.0.3 文档似乎也很差，因为没有关于如何为 ESB 配置 DB 的步骤。

谢谢迪帕克

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-08T06:22:15.403

WSO2 ESB 文档清楚地指定了这些信息。当您使用 4.0.3 版本时，这是文档位置。[http://docs.wso2.org/wiki/display/ESB403](http://docs.wso2.org/wiki/display/ESB403)

请跟进；[http://docs.wso2.org/wiki/display/ESB403/Installing+ESB+on+Windows+from+Binary+Distribution](http://docs.wso2.org/wiki/display/ESB403/Installing+ESB+on+Windows+from+Binary+Distribution)在 Windows 上运行 ESB。

添加数据库： [http ://docs.wso2.org/wiki/display/ESB403/Adding+a+Database](http://docs.wso2.org/wiki/display/ESB403/Adding+a+Database)

**仅供参考**：可以从[http://wso2.com/products/enterprise-service-bus/下载最新的 WSO2 ESB](http://wso2.com/products/enterprise-service-bus/)

ESB 4.5.1 文档：[http ://docs.wso2.org/wiki/display/ESB451/Enterprise+Service+Bus+Documentation](http://docs.wso2.org/wiki/display/ESB451/Enterprise+Service+Bus+Documentation)

谢谢

蒂利尼

# android - 设置 db4o 数据库时遇到问题

> ID：13282659
> 
> 赞同：0
> 
> 时间：2012-11-08T04:54:34.877
> 
> 标签：android, db4o

我正在尝试使用单例类来创建此数据库，因为我需要为应用程序中的每个活动打开它。我不断从“getFilesDir”或“if(instance == null) 调用中收到空指针错误，并且由于我对 Android 编程不太熟悉，所以我不确定发生了什么。

```
package com.database;

import java.io.File;

import android.app.Application;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import android.util.Log;

import com.businessclasses.Field;
import com.db4o.Db4oEmbedded;
import com.db4o.ObjectContainer;
import com.db4o.config.AndroidSupport;
import com.db4o.config.EmbeddedConfiguration;

public final class anotherTest extends Application {
    private static ObjectContainer playsDB;
    private static ObjectContainer gamePlanDB;

    private anotherTest instance;

    public anotherTest(){

        final EmbeddedConfiguration config = Db4oEmbedded.newConfiguration();
        config.common().add(new AndroidSupport());
        //instance.getFilesDir().getPath()
        new File(getFilesDir().getPath(), "/PlaysDB.db4o").delete();

        Log.d("db", "" + instance.getFilesDir().getPath());
        //getFilesDir().getPath();
        //String appPath = "/data/data/PlaysDB/database";

        playsDB = Db4oEmbedded.openFile(config, getFilesDir().getPath() +     "/PlaysDB.db4o");
        //File test = new File(appPath + "/PlaysDB.db4o");
        //if(test != null){
        //  Log.d("db", "file was created");
        //  Log.d("db", "path >> " + test.getAbsolutePath());
            //test.delete();
        //}

        //playsDB = Db4oEmbedded.openFile(config, appPath + "/PlaysDB.db4o");
    }

    public synchronized anotherTest getInstance(){
        if(instance == null){
            instance = new anotherTest();
        }
        return instance;
    }

    public void storePlay(Field field){
        if(field != null){
            if(playsDB == null){
                Log.d("db", "database is null");
            }
            playsDB.store(field);
            playsDB.commit();
            Log.d("added play", "play added to db");    
        }
        else{
            Log.e("field input null", "play not added to db");
        }
    }   
} 
```

这是我参加其中一项活动的电话。

```
 public void onClick(View v) {
        String formation = playFormation.getText().toString();
        String name = playName.getText().toString();
        String type = playType.getSelectedItem().toString();
        //TODO:send to database

        Field newField = new Field();
        newField.setPlayName(name);
        newField.setPlayType(type);

        anotherTest temp = new anotherTest();
        temp.getInstance().storePlay(newField);
    } 
```

过去几周一直试图让这个数据库工作，但无济于事。任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:57:04.557

这种结构的方式没有意义。

*   Java 类*总是*以正确的大小写命名——所以它应该是“AnotherTest”。
*   您实际上并没有创建单例，因为您的实例和 getInstance() 都不是静态的。此外，您永远不会通过“getInstance()”访问您的实例。
*   你有一个类 AnotherTest，它有一个作为字段的 AnotherTest 实例，它永远不会被初始化，并且可以在 AnotherTest 的构造函数中访问。这只是保证为空。
*   您依赖于 Application 超类的隐式状态，它永远不会被提供，因为 Application 应该在 androidmanifest.xml 中声明，它将为您构建。同时，您正在事件处理程序中手动构造一个实例，因此它没有您期望的状态 - 但无论如何，它会在自己的构造函数中失败，因为它试图引用指向自身的空指针，如上所述。

您的问题与 DB40 无关，与不了解您在做什么有关。

它需要更像：

```
public final class AnotherTest {

    private static AnotherTest instance;

    private final Context context;

    private AnotherTest(Context context){
        this.context = context;

        // Do whatever you need to do with DB4O using *only* the supplied context here
    }

    public static synchronized AnotherTest getInstance(Context context){
        if(instance == null){
            instance = new AnotherTest(context);
        }
        return instance;
    }
} 
```

在事件处理程序中：

```
AnotherTest.getInstance(Context.getApplicationContext()).storePlay(newField); 
```

# java - Java 继承 - 从父类获取参数

> ID：13282661
> 
> 赞同：2
> 
> 时间：2012-11-08T04:54:49.373
> 
> 标签：java

我正在尝试从 Car 的父类中获取一个参数并将其添加到我的数组 ( `carsParked`) 中，我该怎么做？

家长班

```
public class Car
{
    protected String regNo;       //Car registration number
    protected String owner;       //Name of the owner
    protected String carColor;

    /** Creates a Car object
     * @param rNo - registration number
     * @param own - name of the owner
     **/
    public Car (String rNo, String own, String carColour)
    {
        regNo = rNo;
        owner = own;
        carColor = carColour;
    }

    /** @return The car registration number
     **/
    public String getRegNo()
    {
        return regNo;
    }

    /** @return A String representation of the car details
     **/
    public String getAsString()
    {
        return "Car: " + regNo  + "\nColor: " + carColor;

    }
    public String getColor()
    {
        return carColor;
    }
} 
```

儿童班

```
public class Carpark extends Car
{
    private String location;        // Location of the Car Park  
    private int capacity;           // Capacity of the Car Park - how many cars it can hold 
    private int carsIn;             // Number of cars currently in the Car Park   
    private String[] carsParked;

    /** Constructor for Carparks
     * @param loc - the Location of the Carpark
     * @param cap - the Capacity of the Carpark
     */
    public Carpark (String locations, int room)
    {

        location = locations;
        capacity = room;
    }
    /** Records entry of a car into the car park */
    public void driveIn()
    {
         carsIn = carsIn + 1;

    }

    /** Records the departure of a car from the car park */
    public void driveOut()
    {
        carsIn = carsIn - 1;
    }

    /** Returns a String representation of information about the carpark */
    public String getAsString()
    {
        return location + "\nCapacity: " + capacity +
             "  Currently parked:  " + carsIn + 
             "\n*************************\n";
    }

} 
```

最后一题方法

> 公共字符串 getCarsByColor（字符串 carColour）
> 
> {
> 
> ```
>  for (int num = 0; num < carsParked.length; num++)
>     {
>         if ( carColour.equals(carsParked[num]) )
>         {
>             System.out.print (carsParked[num]); 
> ```

```
 }
    }
return carColour;

} 
```

到目前为止我有这个，所以如果在参数中输入“红色”，它会列出所有红色的汽车及其相应的信息，但似乎不起作用〜_〜。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T05:00:56.817

您似乎在这里有错误的关系：停车场不是汽车。我建议不要在这些类之间使用任何方向的继承。并且`Carpark`可能应该只有一系列或一组汽车。

另请注意，该参数`carsIn`不是必需的 - 只需获取`length`汽车数组的 （或者`size()`如果它是 a `Collection`）。

**编辑：**好的，忽略继承部分，似乎在调用时添加汽车并在`driveIn`调用时删除它们`driveOut`是有意义的。

`driveIn`可能应该将 a`Car`作为参数，因此该方法可以访问您要存储的参数（我个人只会存储`Car`引用，但很好）。`List`由于我们将添加和删除这些参数，因此使用可以调整自身大小的 a 而不是数组会容易得多，例如[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html). 例如：

```
private final List<String> carsRegNosParked = new ArrayList<String>();

public void driveIn(Car car) {
    carsRegNosParked.add(car.getRegNo());
} 
```

目前还不清楚`driveOut`应该做什么。可能需要一个特定的注册号才能删除：

```
public void driveOut(String regNo) {
    carsRegNosParked.remove(regNo);
} 
```

或者它可能只是不加选择地移除一辆车，比如第一辆车补充说：

```
public void driveOut() {
    if (!carsRegNosParked.isEmpty()) {
        carsRegNosParked.remove(0);
    }
} 
```

[`remove(Object)`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#remove%28java.lang.Object%29)注意和之间的区别[`remove(int)`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#remove%28int%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:59:46.910

首先更改`carsParked`为列表。所以：

```
private String[] carsParked; 
```

变成

```
private List<String> carsParked; 
```

然后在您的构造函数中，通过执行以下操作将其初始化为一个空列表： carsParked = new ArrayList();

然后在你的驱动方法中，让它接受一个汽车参数并拉你想要的参数：

```
public void driveIn(Car car) {
   carsParked.add(car.getRegNo());
} 
```

此外，您不需要以这种方式跟踪汽车的数量。因为你总是`carsParked.size()`可以找到答案。

* * *

现在我可能会将该列表更改`List<Car>`为字符串而不是字符串，然后将整车倾倒在那里。当然，您现在可能只需要一件物品，但谁知道以后，也许您还需要其他东西。

**编辑：** 当然你可以用一个简单的数组来做到这一点。问题在于尺寸。假设您最初创建了一个大小为 5 的数组，当您要添加 6 项时，您需要创建一个新的更大的数组，复制原始数据，然后添加新项。只是更多的工作。现在，如果您的想法是您有一个停车场，并且它可以有 X 个点，那么您从一开始就将您的阵列初始化为该大小。

```
public Carpark (String locations, int room){
    location = locations;
    capacity = room;
    //this creates an array with the max number of spots
    carsParked = new String[capacity];
    //also good idea to init 
    carsIn = 0; //initial number of cars parked
} 
```

然后在你的`driveIn()`方法中：

```
public void driveIn(Car car) {
   carsParked[carsIn] =car.getRegNo();
   carsIn=carsIn+1;
} 
```

现在`driveOut()`

```
public void driveOut(Car car) {
   //loop through the array until we find the car
   for (int i=0; i < carsParked.length; i=i+1){
     if (car.getRegNo().equals(carsParked[i])){
        //we found the car, so set the space null
        carsParked[i] = null;
        carsIn=carsIn-1;
        //stop looping now
        break;
     }
   }
} 
```

看起来不错是不是。不，不是。现在这`driveIn`行不通了，因为我们到处都有零点。我们如何解决它：

```
public void driveIn(Car car) {
   //loop through the array until we find a null spot, 
   //then park the car
   for (int i=0; i < carsParked.length; i=i+1){
     if (carsParked[i] == null){
        //we found the car, so set the space null
        carsParked[i] = car.getRegNo();
        carsIn=carsIn+1;
        //stop looping now
        break;
     }
   }
} 
```

它仍然可以进一步改进。我可能仍会更改`String[] carsParked`为`Car[] carsParked`不丢弃信息。我还将更改`driveIn`and`driveOut`方法以返回布尔值，以指示汽车是否已成功停放或未停放。

**最终编辑：** 好的，如果您想跟踪停车场中停放了哪些汽车以及它们在哪个位置，您需要对每辆车有足够的了解以使其独一无二。在您的情况下，您可能只需要`regNo`. 因此，当您调用`driveIn`或`driveOut`必须传递该信息时，我们可以将其存储在数组中的适当索引（停车位）处。否则，您将只知道汽车停在某个地方，或者汽车离开了。不知道哪些地方是开放的。

所以简而言之`Car car`，这两种方法中的参数包含唯一识别每辆正在停放或离开的汽车所需的信息。没有它，停车场实例将不知道当前停放的是谁，或停在哪里。

# jquery - 如何在 phonegap 中为 windows phone 使用 jquery .load() 函数

> ID：13282663
> 
> 赞同：0
> 
> 时间：2012-11-08T04:54:52.550
> 
> 标签：jquery, html, windows-phone-7, cordova

这是我的 index.html 页面

```
<!DOCTYPE html>
<html>
<head>

 <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
 <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>

  <title>PhoneGap WP7</title>

     <link rel="stylesheet" href="master.css" type="text/css" media="screen" title="no title" charset="utf-8"/>

      <script type="text/javascript" charset="utf-8" src="phonegap-1.3.0.js"></script>

     <script src="js/jquery.js"></script>
    <script src="js/jquery.selectBox.js"></script>
    <script src="js/jquery.selectBox.min.js"></script>

   <script src="js/new.js"></script>
   <script>
       function come()
      {
          navigator.notification.alert("not coming");

          $("#new").html("hello");
         $("#need").load("new.html", function(){
        navigator.notification.alert("Done!");
        });

     }

   </script>
 </head>
 <body>
     <h1>Hello PhoneGap</h1>

     <div id="new">asdsd</div>
    <div id="hello">It is want to gone</div>
    <div id="need"></div>

   <input type="button" value="here" onclick="come()" />
 </body>
</html>

**My new.html page is**

 <html>
 <body>
 <h2>New one</h2>
 <p id="hello">Why it is not coming to here is it any problem<p>
 </body>
  </html> 
```

在这里，我想将这个 new.html 加载到 index.html 中的我需要的 id 中，但是加载功能不起作用，我尝试了上面的方法，它在加载功能中显示了警报框，但没有显示 new.html 的内容在 Windows 手机中。我不明白确切的问题是什么。我怀疑windows phone 是否支持phonegap 中的load() 函数。所以请大家给点建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:59:29.840

你错过`"`了 o 之后的`$("#hello)`

尝试将您的 jquery 行包装在[.ready()](http://api.jquery.com/ready/)方法中：

```
$(document).ready(function() {
    $("#new").html("hello world");
    $("#hello").load("new.html");
}); 
```

# javascript - 构造函数不是函数而是对象

> ID：13282665
> 
> 赞同：0
> 
> 时间：2012-11-08T04:55:15.027
> 
> 标签：javascript

这让我很困惑，这是我的简单 html 文件：

```
<html>
    <head>
    </head>
    <body>
        <div id="misc">Test</div>
    </body>
</html> 
```

在 Firebug 控制台中：我有这个脚本：

```
var c = document.documentElement.childNodes[2].childNodes[3];
alert(c.id); //Return misc
alert(c.constructor); // Return [object HTMLDivElement] 
```

据我所知，函数的构造函数是一个函数（它也是一个对象，但我在这里不是在谈论那个函数对象）。现在 c 的构造函数是一个对象，如果我问 c'constructor 的构造函数（即 c.constructor.constructor），它现在将返回一个“真实”函数，如下所示：

```
function Object() {
    [native code]
} 
```

我不知道为什么 c.constructor 是一个对象（ [object HTMLDivElement] ），它应该是一个预期的函数。你能帮我理解这个吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T05:26:06.340

简短的回答是：`c`没有常规的构造函数。

更长的答案：DOM 元素、Function 对象、全局对象（通常`window`在浏览器中）、innerHTML 函数等原生对象没有常规构造函数。这是因为它们通常不是在 JavaScript 中实现的，而是在较低级别（以浏览器或解释器编写的任何语言）。

JavaScript 语言规范允许这样做 - 本机内置对象不必是普通的 javascript 对象。真正的原因是历史原因——规范基本上是由逆向工程 Netscape Navigator 编写的，并且所有贡献者都同意所写的内容。从那时起，每个人都只是为了向后兼容而坚持使用它。这些天通常给出的实际原因是性能：如果允许浏览器这样做，那么它们可以更快，因为本机对象不需要携带普通 JavaScript 对象的沉重包袱。

* * *

在您的特定情况下，DOM 元素没有常规构造函数。有两种方法可以“构造”DOM 对象：

1.  `document.createElement()`. 这是用于创建`<div>`s、`<span>`s 等的官方 DOM 方法。在大多数浏览器中，此方法不是普通的构造函数，因为 DOM 元素通常不会从其原型继承。

2.  `innerHTML()`. 这是一个访问浏览器的 HTML 编译器的瘦接口。它与浏览器用于解析常规网页的编译器相同。同样，这绝不是一个常规的构造函数，因为它甚至不返回它创建的对象。

由于 DOM 元素没有普通的构造函数，浏览器可能会为其`constructor`属性返回任何内容，包括什么也没有。您在案例中看到的主要是已泄漏到 javascript 引擎的实现细节。这不是您应该访问或使用的东西。更少依赖于开发应用程序。

# javascript - 将字符串转换为浮点数Javascript

> ID：13282668
> 
> 赞同：1
> 
> 时间：2012-11-08T04:55:22.220
> 
> 标签：javascript

我在 if 条件下使用变量时遇到问题。我有三个变量，其中一个是字符串类型，另外两个在 Json 中。这里 settings.DecimalDigits 的值为 2 或大于 2 的任何值。

```
var controlValue = integer + '.' + mantissa;
controlValue = parseFloat(controlValue).toFixed(settings.DecimalDigits); 
```

整数和尾数将具有某个值，该值作为字符串存储在 controlValue 中。**controlValue**然后在 IF 条件下与其他两个变量（**settings.MaxValue 和 settings.MinValue**）进行比较，但它没有通过条件，因为它的类型是**字符串类型**

```
if (controlValue > settings.MaxValue)
                controlValue = settings.MaxValue;

            if (controlValue < settings.MinValue)
                controlValue = settings.MinValue; 
```

在我的解析中，所有三个变量都将具有三个浮点类型的值

controlValue = 123.23 或 123.00
settings.MaxValue = 99.99
settings.MinValue = -99.99
请帮助解析通过**IF 条件**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T05:21:07.493

`.toFixed()`将您的号码变回字符串。如果你想让它再次变回一个数字，那么你需要在它上面使用 parseFloat 。可能有更好的方法可以做到这一点，但是在现有代码的基础上，您可以通过再次调用来创建`controlValue`一个可以在您的语句中使用的数字，如下所示：`if``parseFloat()`

```
var controlValue = integer + '.' + mantissa;
controlValue = parseFloat(parseFloat(controlValue).toFixed(settings.DecimalDigits)); 
```

仅供参考，将数字完全作为数字处理可能更有意义，而不是多次来回转换字符串：

```
var controlValue = parseFloat(integer + '.' + mantissa);
var filter = Math.pow(10, settings.DecimalDigits);
controlValue = Math.round(controlValue * filter) / filter; 
```

或者甚至只是这个：

```
var controlValue = parseFloat(integer + '.' + mantissa.toString().substr(0, settings.DecimalDigits)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T06:51:23.727

[jfriend00 的回答](https://stackoverflow.com/a/13282912/16587)帮助我解决了我的问题。解决方案如下：

```
 var controlValue = e.target.value; //get value from input
            controlValue = Number(controlValue); //Converting the string to number

            // Number format parses through if condition
            if (controlValue > settings.MaxValue)
                controlValue = Number(settings.MaxValue);
            if (controlValue < settings.MinValue)
                controlValue = Number(settings.MinValue);

            // if the value is having a mantissa 00\. It will be rejected by Number() function. So next line its converted again to string format using .toFixed() function. 

            var controlValue = controlValue.toFixed(settings.DecimalDigits);

            // Splitting the value into two parts integer and mantissa 
            integer = controlValue.split('.')[0];
            if (typeof integer == 'undefined' || integer == null || integer == "" || isNaN(integer))
                integer = 0;

           // settings.DecimalDigits is the variable to set any default number of mantissa required to appear. 
            mantissa = controlValue.split('.')[1];
            if (typeof mantissa == 'undefined') {
                mantissa = "";
                for (i = 0; i < settings.DecimalDigits; i++)
                    mantissa += '0';
            }

            // Finally you have the result
            controlValue = integer + '.' + mantissa; 
```

# html - Wordpress 上的多个主题或模板

> ID：13282669
> 
> 赞同：1
> 
> 时间：2012-11-08T04:55:32.550
> 
> 标签：html, wordpress

我有 7 个页面的 7 个设计。所有的设计都彼此不同，彼此之间确实没有相似之处。是否可以在同一个网站上应用所有这些设计，因为我只熟悉三种设计，即主页（主页）和页面（所有内部页面），另一个与页面相同。但我有七种 HTML 设计，用于家庭和帖子旁边的七种页面。我该如何应用它。如果没有，请给我任何建议。我是 Wordpress 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:21:26.073

在 Wordpress 中，您可以将不同的模板应用于您创建的每个页面。您可以在页面编辑部分中选择模板，方法是打开屏幕右侧称为“页面属性”的下拉菜单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T09:34:04.530

您需要制作 7 个 wordpress 模板并将每个模板应用到您想要的页面。要制作 wordpress 模板，您需要将其添加到每个模板页面：

```
<?php
/*
Template Name: Your template name
*/
?> 
```

然后您可以在编辑页面时选择要使用哪个模板的页面。

# javascript - Javascript 检查日期

> ID：13282675
> 
> 赞同：1
> 
> 时间：2012-11-08T04:55:58.197
> 
> 标签：javascript, asp.net

我正在尝试使用 JavaScript 来验证所选日期不早于今天，但是当我选择今天的日期时，它会显示警报框。

JavaScript：

```
function checkDueDate(sender, args) {
    var td = new Date(); 
    td.setMinutes(59);
    td.setSeconds(59);
    td.setHours(23);
    //to move back one day
    td.setDate(td.getDate() - 1);

    if (sender._selectedDate < td) {
        alert("You can't select day from the past! " + td + "");
        sender._selectedDate = new Date();
        // set the date back to the current date
        sender._textbox.set_Value(sender._selectedDate.format(sender._format))
    } 
```

ASP.NET：

```
 <asp:TextBox ID="txtDueDate" runat="server"></asp:TextBox>
        <asp:CalendarExtender ID="txtDueDate_CalendarExtender" runat="server" 
            TargetControlID="txtDueDate" OnClientDateSelectionChanged="checkDueDate">
        </asp:CalendarExtender> 
```

![图片](../Images/af681fe63b9a7225317b7c160b92225f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T05:07:24.263

我想也许你把事情复杂化了。我会以毫秒为单位减去一天，它应该可以工作：

```
function isPast( date ) {
  return date.getTime() < (new Date().getTime() - 864e5); 
} 
```

**演示：http:** [//jsbin.com/igeyov/1/edit](http://jsbin.com/igeyov/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:00:34.083

您在这里的逻辑似乎完全符合您的要求 - 您已将您评估的 td 变量设置为今天日期的最后一秒，并且您正在检查所选日期是否早于或等于该日期。今天的日期是“之前或等于”今天 23:59:59...

此外，你已经用 c# 标记了它，尽管据我所知它都是 javascript 和 ASP.net。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T05:03:25.843

如果您只想选择未来的日期，那么您也可以尝试此代码....这适用于 ajax 日历：

```
 function checkDate(sender, args) {
        if (sender._selectedDate < new Date()) {
            alert("You can select only future day!");
            sender._selectedDate = new Date();
            // set the date back to the current date
            sender._textbox.set_Value(sender._selectedDate.format(sender._format))
        }
    } 
```

这是HTML代码：

```
 <asp:TextBox ID="txtDOB" Width="180px" MaxLength="50" runat="server"></asp:TextBox>
                            <ajaxctrl:calendarextender onclientdateselectionchanged="checkDate" id="cale_txtDOB"
                                runat="server" targetcontrolid="txtDOB" format="MM/dd/yyyy" cssclass="cal_Theme1">
                            </ajaxctrl:calendarextender> 
```

仅当您选择过去的日期时，此代码才有效，它会显示一个弹出窗口“您无法选择过去的日期”，无论如何。更新的代码：如果您也不想包括今天的日期，这里是代码工作，您只想要未来的日期：

```
function checkDate(sender, args) {
        if (sender._selectedDate <= new Date()) {
            alert("You can select only future day!");
            sender._selectedDate = new Date();
            // set the date back to the current date
            //sender._textbox.set_Value(sender._selectedDate.format(sender._format))
        }
    } 
```

希望对你有帮助..

# perl - 转义 xml 文件中的实体

> ID：13282680
> 
> 赞同：2
> 
> 时间：2012-11-08T04:56:17.307
> 
> 标签：perl, xml-twig

我将 xml 转换为 xml 文件，我尝试将文本转换为源。我目前正在使用 xml::Twig，我需要输出而不需要对 xml 进行任何更改。

我试过了：

xml:

```
<book>
<book-meta>
<book-id pub-id-type="doi">98568</book-id>
<copyright-statement>Copyright &#x00A9; 1999 Relati</copyright-statement>
<imprint-text type="PublisherInfo">This edition published in the Taylor &#x0026; 2002.</imprint-text>
</book-meta>
</book> 
```

脚本：

```
use strict;
use XML::Twig;
use XML::Xpath;
open(my $output , '>', "Output.xml") || die "can't open the Output $!\n";
my $xml_twig_content = XML::Twig->new(
twig_handlers => {
keep_atts_order => 1,
keep_encoding => 1,
},
pretty_print => 'indented',
);
$xml_twig_content->parsefile('sample.xml');
$xml_twig_content->print($output); 
```

输出：

```
<book>
<book-meta>
<book-id pub-id-type="doi">98568</book-id>
<copyright-statement>Copyright © 1999 Relati</copyright-statement>
<imprint-text type="PublisherInfo">This edition published in the Taylor &amp; 2002.</imprint-text>
</book-meta>
</book> 
```

我需要输出：

```
<book>
<book-meta>
<book-id pub-id-type="doi">98568</book-id>
<copyright-statement>Copyright &#x00A9; 1999 Relati</copyright-statement>
<imprint-text type="PublisherInfo">This edition published in the Taylor &#x0026; 2002.</imprint-text>
</book-meta>
</book> 
```

我怎么能需要作为源而不做任何更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:05:59.233

你的语句有问题`new`：`keep_encoding`和`keep_atts_order`参数被声明为`twig_handlers`. 我认为这不是您想要的，因为这样做的唯一一件事就是在 XML 中找到名为`keep_atts_order`or的元素时立即消失。`keep_encoding`

我认为这更像您的想法：

```
my $xml_twig_content = XML::Twig->new( keep_atts_order => 1,
                                       keep_encoding => 1,
                                       pretty_print => 'indented',
                                     ); 
```

# android - 更改 android:minSdkVersion 或 View.animation 或 .SWF 不起作用

> ID：13282682
> 
> 赞同：0
> 
> 时间：2012-11-08T04:56:23.203
> 
> 标签：android

我开发了一个在清单文件中有 android:minSdkVersion=10 的应用程序。此应用程序使用 View.animation(Translationaion,Scaling) 并在两个单独的活动中为 .SWF 文件调用 WebView。

发生以下事情： 1.对于 android:minSdkVersion=10，我可以在具有 Android 4.1.2 的 Nexus S 上运行动画但不能运行 .SWF 文件。而我可以在具有 Android 2.3.3 的平板电脑上运行。

1.  对于 android:minSdkVersion=15，我可以在具有 Android 4.1.2 的 Nexus S 上运行 .SWF 文件但不能运行动画。但不是在平板电脑（2.3.3）上，正如预期的那样，因为平板电脑的安卓版本较低。

询问：

为什么更改 android:minSdkVersion Nexus 会显示此结果。至于我们的要求，我至少需要 android:minSdkVersion=10 。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:53:29.823

这可能是因为nexus s不支持4.1版本的flash player插件如果你尝试google你会发现更多目前只有firefox beta支持nexus s中的flash player插件......

# android - onLocationChanged() 的距离敏感度

> ID：13282685
> 
> 赞同：0
> 
> 时间：2012-11-08T04:57:08.427
> 
> 标签：android, gps

我是java和android的新手。我设法按照一些教程让我的 gps 在 android 2.3 手机上工作，但我注意到手机的 gps 仅在 40 米范围内准确，这相当于纬度/经度中小数点后第三位的精度。

我的调试日志显示了这个变化（当我坐在我的笔记本电脑上打字时）

```
LOCATION CHANGED(2137): 43.522701025009155
LOCATION CHANGED(2137): -72.13161981105804
LOCATION CHANGED(2137): 43.522695660591125
LOCATION CHANGED(2137): -72.13161981105804 
```

这是我的代码

```
 public void onLocationChanged(Location location) {
        if (location != null) {
        Log.d("LOCATION CHANGED", location.getLatitude() + "");
        Log.d("LOCATION CHANGED", location.getLongitude() + "");
        Toast.makeText(MainActivity.this,
            location.getLatitude() + "" + location.getLongitude(),
            Toast.LENGTH_LONG).show();
        }
        else{
           // Log.v(TAG,"LOCATION not found");

        }
       // Log.d("LOCATION is", location.getLatitude() + "");

    } 
```

是否可以将 onLocationChanged() 函数更改为 public void onLocationChanged(Location location, minimumdistance_changed)

其中 minimumdistance_changed 是当前 gps 精度的精度。我也很乐意将 minimumdistance_changed 值设置为 100 米，只要这意味着我只能在 gps 值更改为小数点后第三位时从 onLocationChanged 获得读数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T06:48:40.347

从位置管理器请求位置更新后，您可以指定更新之间的最小距离：

```
lm.requestLocationUpdates(provider, timeBetweenUpdates, distBetweenUpdates, listener); 
```

但这只是一个提示，系统不需要遵循您的提示。

# javascript - 使用javascript从一个函数获取另一个函数的值

> ID：13282686
> 
> 赞同：3
> 
> 时间：2012-11-08T04:57:10.657
> 
> 标签：javascript, jquery, scope

我想从一个函数获取另一个函数的价值。我想将值传递给处理程序页面。但在那我无法获得传递的价值..在这里我给出了代码。请帮我。例如，假设 radio=MR & fname=john。

```
function getdata()
{
   alert('hi');
   var radio = document.getElementsByName("radiobuttonlist1");
   for (var i = 0; i < radio.length; i++)
   {
    if (radio[i].checked)
    alert(radio[i].value);
   }

   var fname=document.getElementById("Firstnametxt").value;
   alert(fname);
} 
```

在这里，我想将所有这些值传递给另一个函数，这是我的另一个函数。

```
function sendinfo()
{
getdata();

 $(document).ready(function(){     

   var url="Handler.ashx?radio="+radio+"&fname="+fname+""; "here i want the values from above function"

  alert(url);
    $.getJSON(url,function(json)
    {
        $.each(json,function(i,weed)
        {

        });

    });

});

} 
```

谢谢你 。帮我

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T05:00:16.087

你可以通过两种方式做到这一点。

## 选项1

您可以在两个函数之外定义这些变量，例如：

```
var radio;
var fname;
getdata() {
    radio = document.getElementsByName("radiobuttonlist1");
    fname=document.getElementById("Firstnametxt").value;
    // VALUE UPDATED HERE
}
sendinfo() {
    // VARIABLE ACCESSIBLE HERE
} 
```

然后，每当更新这些变量的值时，它将在这些变量最初定义的范围内更新（在这些函数之外）。

javascript 变量的范围在`{}`该变量所在的大括号内以及该集合内的任何大括号内。javascript 中的作用域通常指的是那些花括号`{}`。有一些例外，包括`if`您可以在其中定义变量和在外部访问的语句（假设条件为真）。

## 选项 2

或者您可以将这些变量作为参数传递给第二个函数，例如：`sendinfo(radio, fname);`

## 通过返回值来传递值

您可以在函数中将值作为对象文字返回，`getdata()`如下所示：

```
getdata() {
    return {
        radio : document.getElementsByName("radiobuttonlist1"),
        fname : document.getElementById("Firstnametxt").value
    }
} 
```

然后这样做：

```
sendinfo() {
    var data = getdata();
} 
```

然后访问这些变量，例如：`data.radio`和`data.fname`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T05:01:46.627

您可以全局声明两个变量，在第一个函数中将它们设置为您需要的值，然后在第二个函数中访问它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T05:13:56.720

```
var radio;
var fname;

function getdata()
{
   alert('hi');
   radio = document.getElementsByName("radiobuttonlist1");
   for (var i = 0; i < radio.length; i++)
   {
    if (radio[i].checked)
    alert(radio[i].value);
   }

   fname=document.getElementById("Firstnametxt").value;
   alert(fname);
}

function sendinfo()
{
    getdata();

     $(document).ready(function(){     

       var url="Handler.ashx?radio="+radio+"&fname="+fname+""; "here i want the values from above function"

      alert(url);
        $.getJSON(url,function(json)
        {
            $.each(json,function(i,weed)
            {

            });
        });
    });
} 
```

# windows-phone-7 - Windows Phone 中的 GeoCoordinateWatcher 不会以给定的时间间隔触发事件

> ID：13282687
> 
> 赞同：1
> 
> 时间：2012-11-08T04:57:14.247
> 
> 标签：windows-phone-7, geolocation, windows-phone-7.1, windows-phone

我有下面的代码，它每 0.5 米触发 GeoCoordinateWatcher PositionChanged 事件。它可能会更少。但这就是我的要求。

问题是当我带着电话走路时，代码不会在每 0.5 米处触发事件，而是在 0.5 米后随机触发事件。有时当我快速移动时，它会立即一个接一个地触发几个事件。

任何人都可以帮助我如何确保它每 0.5 米准确地触发 positionchanged 事件。

```
 watcher = new GeoCoordinateWatcher(GeoPositionAccuracy.Default);
            if (watcher.Permission == GeoPositionPermission.Granted)
            {
                watcher.MovementThreshold = 0.5;//in meters
            }

            watcher.PositionChanged += new EventHandler<GeoPositionChangedEventArgs<GeoCoordinate>>(watcher_PositionChanged);    //   PositionChanged events occur whenever your position changes     
            watcher.StatusChanged += new EventHandler<GeoPositionStatusChangedEventArgs>(watcher_OnStatusChanged);
            watcher.Start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:09:45.000

GeoPositionAccuracy 绝对应该设置为高。我相信 Default 将使用蜂窝/wifi 来确定位置，而 High 将使用手机上的 GPS。当您只是在寻找一般位置时，主要使用默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T05:18:07.150

我不完全确定，但我不知道您为什么使用以下代码：

> if (watcher.Permission == GeoPositionPermission.Granted) {
> watcher.MovementThreshold = 0.5;//以米为单位 }

为什么需要检查观察者的权限？为什么不继续并立即定义运动阈值？这可能有助于提高数据的速度。此外，您将 GeoPositionAccuracy 设置为默认值。如果您希望它更准确地触发，请使用**GeoPositionAccuracy.High**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T01:17:38.393

此外，我很确定您还可以执行以下操作来获取水平和垂直精度数据的详细信息：

```
 e.Position.Location.HorizontalAccuracy.ToString();
 e.Position.Location.VerticalAccuracy.ToString(); 
```

# php - 笛卡尔积会是最好的方法吗

> ID：13282688
> 
> 赞同：1
> 
> 时间：2012-11-08T04:57:16.553
> 
> 标签：php, multidimensional-array, matrix, cartesian-product

相关问题：

*   [矩阵组合逻辑](https://stackoverflow.com/questions/13531987/matrix-combination-logic)
*   [确定测试矩阵结果的有效方法](https://stackoverflow.com/questions/13139723/efficient-way-to-determine-the-outcome-of-test-matrix)

我有 25 个单独的验证，我需要测试所有可能的组合，我已经看到了一些与我正在寻找的内容相关的问题。答案建议使用笛卡尔积。那是找到我正在寻找的结果的最佳方法还是有更好的方法？

例子：

考虑一个 9 x 9 的数字网格，从 X 和 Y 轴上的 0 - 9 开始：

```
|0|1|2|3|4|5|6|7|8|9|
|1|
|2|
|3|
|4|
|5|
|6|
|7|
|8|
|9| 
```

所有单独的验证都是布尔值（真 = 通过，假 = 失败）。

X 轴代表所有测试结果，示例：

```
|0|1|2|3|4|5|6|7|8|9|
|1|T|T|T|T|T|T|T|T|T|
|2|
|3|
|4|
|5|
|6|
|7|
|8|
|9| 
```

Y 轴代表所有可能的组合，例如：

```
|0|1|2|3|4|5|6|7|8|9|
|1|T|T|T|T|T|T|T|T|T|
|2|F|T|T|T|T|T|T|T|T|
|3|F|F|T|T|T|T|T|T|T|
|4|F|F|F|T|T|T|T|T|T|
|5|F|F|F|F|T|T|T|T|T|
|6|F|F|F|F|F|T|T|T|T|
|7|F|F|F|F|F|F|T|T|T|
|8|F|F|F|F|F|F|F|T|T|
|9|F|F|F|F|F|F|F|F|T| 
```

会有更多的 Y 轴组合，但我希望你明白这一点。

我的问题是我将如何解决所有可能的组合？

# php - call_user_func_array() 期望参数 1 是一个有效的回调

> ID：13282689
> 
> 赞同：1
> 
> 时间：2012-11-08T04:57:20.570
> 
> 标签：php, joomla1.5

一切正常，但不要`t know what has happened suddenly in my website, it`向我显示多重警告，它们是：-

```
Warning: call_user_func_array() expects parameter 1 to be a valid callback, class 'JCacheStorageApc' does not have a method '‘test’' in /home/vividtec/chhathpuja_html/libraries/joomla/cache/cache.php on line 144

Warning: call_user_func_array() expects parameter 1 to be a valid callback, class 'JCacheStorageEaccelerator' does not have a method '‘test’' in /home/vividtec/chhathpuja_html/libraries/joomla/cache/cache.php on line 144

Warning: call_user_func_array() expects parameter 1 to be a valid callback, class 'JCacheStorageFile' does not have a method '‘test’' in /home/vividtec/chhathpuja_html/libraries/joomla/cache/cache.php on line 144

Warning: call_user_func_array() expects parameter 1 to be a valid callback, class 'JCacheStorageMemcache' does not have a method '‘test’' in /home/vividtec/chhathpuja_html/libraries/joomla/cache/cache.php on line 144

Warning: call_user_func_array() expects parameter 1 to be a valid callback, class 'JCacheStorageXCache' does not have a method '‘test’' in /home/vividtec/chhathpuja_html/libraries/joomla/cache/cache.php on line 144

Warning: call_user_func_array() expects parameter 1 to be a valid callback, class 'JSessionStorageApc' does not have a method '‘test’' in /home/vividtec/chhathpuja_html/libraries/joomla/session/session.php on line 284

Warning: call_user_func_array() expects parameter 1 to be a valid callback, class 'JSessionStorageDatabase' does not have a method '‘test’' in /home/vividtec/chhathpuja_html/libraries/joomla/session/session.php on line 284

Warning: call_user_func_array() expects parameter 1 to be a valid callback, class 'JSessionStorageEaccelerator' does not have a method '‘test’' in /home/vividtec/chhathpuja_html/libraries/joomla/session/session.php on line 284

Warning: call_user_func_array() expects parameter 1 to be a valid callback, class 'JSessionStorageMemcache' does not have a method '‘test’' in /home/vividtec/chhathpuja_html/libraries/joomla/session/session.php on line 284

Warning: call_user_func_array() expects parameter 1 to be a valid callback, class 'JSessionStorageNone' does not have a method '‘test’' in /home/vividtec/chhathpuja_html/libraries/joomla/session/session.php on line 284

Warning: call_user_func_array() expects parameter 1 to be a valid callback, class 'JSessionStorageXcache' does not have a method '‘test’' in /home/vividtec/chhathpuja_html/libraries/joomla/session/session.php on line 284 
```

我正在使用joomla 1.5版..任何帮助将不胜感激....等待我的超人帮助我...

# javascript - 多个复选框值搜索javascript

> ID：13282693
> 
> 赞同：0
> 
> 时间：2012-11-08T04:57:57.723
> 
> 标签：javascript, jquery, checkbox, submit

我有一个关键字列表，并且为每个关键字创建了一个复选框。我的模板有一个包含内容的表单，所以我不能在复选框列表周围有一个嵌套表单。

如何将选中的复选框值发送到我的搜索结果页面？

包装内容的表单没有应用任何操作或方法：

```
<form id="BoostMasterForm" runat="server"> 
```

这是我的复选框列表的 HTML 标记示例（复选框将根据关键字而有所不同）：

```
<div class="checkboxes">
  <ul>
    <li>
      <input type="checkbox" name="search" class="options" value="one">
      <label>one</label>
    </li>
    <li>
      <input type="checkbox" name="search" class="options" value="two">
      <label>two</label>
    </li>
    <li>
      <input type="checkbox" name="search" class="options" value="three">
      <label>three</label>
    </li>
  </ul>
  <input type="submit" value="Submit"/>
</div> 
```

如何使用 javascript 或 jQuery 提交多个复选框选择的值，并在提交操作时将它们提交到以下 URL：'/imagery/image-search.aspx'

提交选项 1 和 3 的搜索的结果 URL 应为：'/imagery/image-search.aspx?search=one%20three'

我正在使用我在另一篇文章中找到的这个 javascript，但是我需要它来附加表单、动作和方法。我的网站是 ASP，这篇文章是针对 PHP 网站的：

[发送多个复选框选项](https://stackoverflow.com/questions/2660523/sending-multiple-checkbox-options)

```
$('.options').click(function() {
    var selectedItems = new Array();
    $(".checkboxes input:checkbox[name=search]:checked").each(function() {selectedItems.push($(this).val());});
    var data = selectedItems.join('|');
    $("#opts").val(data);
}); 
```

如果有人可以提供帮助，将不胜感激。

干杯，合资企业

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:38:44.643

这适用于您的示例。

```
$('input[type=submit]').on('click', function(evt) {
    var selectedValues = [];
    var url = '/imagery/image-search.aspx?search=';

    $('input[type=checkbox]:checked').each(function() {
        selectedValues.push($(this).val());
    });

    url += selectedValues.join(' ');

    window.location = url;
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:15:53.940

我还不清楚。但这里有一段代码，您可以在其中构建一个字符串并传递它

```
 <script type="text/javascript">
function fnc()
{
    elements=document.getElementById("BoostMasterForm").elements;
    str="";
    for(i=0;i<elements.length;++i)
    {
        if(elements[i].type=='checkbox' && elements[i].checked)
        str=str+elements[i].value;
    }
    alert(str);
    //alert(window.location.href+'?str='+str);
//document.getElementById("aform").submit();
}
</script>

<form id="BoostMasterForm" onsubmit="fnc()">
<div class="checkboxes">
  <ul>
    <li>
      <input type="checkbox" id="search1" name="search" class="options" value="one">
      <label>one</label>
    </li>
    <li>
      <input type="checkbox" id="search2" name="search" class="options" value="two">
      <label>two</label>
    </li>
    <li>
      <input type="checkbox" id="search3" name="search" class="options" value="three">
      <label>three</label>
    </li>
  </ul>
  <input type="submit" value="Submit"/>
</div>
</form> 
```

# c++ - 如何在 C++ 中使用备份 API 进行备份

> ID：13282694
> 
> 赞同：0
> 
> 时间：2012-11-08T04:58:01.063
> 
> 标签：c++, visual-c++, backup, volume-shadow-service

我正在编写一个用于备份某些指定文件的应用程序，因此使用备份 API 调用，即**CreateFile BackupRead 和 WriteFile API**。

获取错误访问冲突读取位置。

我在下面附上了代码。

```
#include <windows.h>

int main()
{
    HANDLE hInput, hOutput;

//m_filename is a variable holding the file path to read from
hInput = CreateFile(L"C:\\Key.txt", GENERIC_READ, 0, NULL, OPEN_EXISTING, FILE_FLAG_BACKUP_SEMANTICS, NULL);

//strLocation contains the path of the file I want to create.
hOutput= CreateFile(L"C:\\tmp\\", GENERIC_WRITE, NULL, NULL, CREATE_ALWAYS, NULL, NULL); 

DWORD dwBytesToRead = 1024 * 1024 * 10;
BYTE *buffer;
buffer = new BYTE[dwBytesToRead];
BOOL bReadSuccess = false,bWriteSuccess = false;
DWORD dwBytesRead,dwBytesWritten;
LPVOID lpContext;
//Now comes the important bit:

do
{
    bReadSuccess = BackupRead(hInput, buffer, sizeof(BYTE) *dwBytesToRead, &dwBytesRead, false, true, &lpContext);

    bWriteSuccess= WriteFile(hOutput, buffer, sizeof(BYTE) *dwBytesRead, &dwBytesWritten, NULL); 

}while(dwBytesRead == dwBytesToRead);

return 0; 
```

}

有人建议我如何使用这些 API？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:04:38.120

阅读文档。具体来说，文档的第二段[`BackupRead`](http://msdn.microsoft.com/en-us/library/aa362509.aspx)：

> 您必须在第一次调用指定文件或目录`lpContext`之前设置指向的变量。`NULL``BackupRead`

您的代码也迫切需要错误处理——您根本不检查错误，而实际上这些 API 中的许多可能会失败（查看每个 API 的文档以了解函数如何失败以及失败时会发生什么）。您还应该实施正确的资源处理，例如通过关闭文件句柄。

# python - 检查元素是否存在并且在python字典中为真的正确方法是什么？

> ID：13282695
> 
> 赞同：2
> 
> 时间：2012-11-08T04:58:11.657
> 
> 标签：python, dictionary

```
someDict = {'foo': True}
if 'foo' in someDict and someDict['foo']:
    print 'success' 
```

以下代码工作正常。我只是想知道是否有更好/更短的方法来检查键是否存在并且它的值是否为真。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-08T04:59:56.273

`someDict.get('foo')`

`foo`如果不在，这将返回 None `someDict`，否则将返回找到的值。您可以选择传递第二个参数，如果它不存在，它将作为返回的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:02:26.080

没有。但是，如果您经常这样做，则可能需要编写一个函数来执行此操作。

```
def ExistsTrue(d, name):
    return name in d and bool(d[name])
# usage
ExistsTrue(someDict, 'foo') 
```

我把`bool`演员放在那里，所以函数只返回`True`or `False`。

# javascript - JQuery/HTML：如何在 onClick 中使用变量

> ID：13282696
> 
> 赞同：1
> 
> 时间：2012-11-08T04:58:23.137
> 
> 标签：javascript, jquery, html, google-maps-api-3

我真的被困在我正在做的这个项目上。下面是我的代码。顺便说一句，我正在使用 Google Maps API。

```
var arr = new Array();
arr[0] = lat1, lon1
arr[1] = lat2, lon2
arr[2] = lat3, lon3
for (each i in arr){
    var newCenter = "<button onClick='map.setCenter(arr[i])'>Center Map</button>";
    $("#myTable").append(newCenter);
} 
```

现在我知道了

```
'map.setCenter(arr[i])' 
```

是不正确的，因为它基本上是将“arr [i]”硬编码到 DOM 中。我想要做的是使用 arr[i] 作为变量，以便 DOM 具有：

```
<button onClick='map.setCenter(arr[0])'>Center Map</button>
<button onClick='map.setCenter(arr[1])'>Center Map</button>
<button onClick='map.setCenter(arr[2])'>Center Map</button> 
```

我努力了

```
"<button onClick='map.setCenter(" + arr[i] + ")'>Center Map</button>" 
```

但这不起作用。我已经坚持了很长时间。任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T06:34:36.357

1-循环您使用的数组 `for (var i = 0 ; i < arr.length ;i++)`而**不是**`in`运算符。

2-您需要在单独的函数上创建链接以获得关闭，（[**解释here**](http://econym.org.uk/gmap/closure.htm)）

3-你的数组应该保存`google.maps.LatLng()`对象。

```
var arr = new Array();
arr[0] = new google.maps.LatLng(lat1, lon1);
arr[1] = new google.maps.LatLng(lat2, lon2);
arr[2] = new google.maps.LatLng(lat3, lon3);

for (var i = 0 ; i < arr.length ;i++) {
    var button = createbutton(arr[i],i);
 }

function createbutton(latlon,index) {
    var button = document.createElement('button');
    var container = document.getElementById('containerDiv');
    button.onclick = function(){map.setCenter(latlon)};
    button.value = 'Center Map at ' + index;
    container.appendChild(button);
} 
```

...在您的 HTML 中：

```
<div id ="containerDiv"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:08:58.903

```
for (each i in arr){ 
```

应该是

```
for (var i in arr){ 
```

也`arr[0] = lat1, lon1` 并不意味着什么

**完整代码**

```
for (var i in arr){
    var newCenter = "<button onClick='map.setCenter("+ arr[i] + ")'>Center Map</button>";
    $("#myTable").append(newCenter);
} 
```

# networking - windows下如何判断80端口使用的软件？

> ID：13282698
> 
> 赞同：2
> 
> 时间：2012-11-08T04:58:29.670
> 
> 标签：networking, port, wamp

windows下如何找到80端口使用的软件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:01:34.693

如果您正在寻找一些简单的东西，比如知道程序是否正在使用您计算机上的特定端口，您可以`netstat -b -a`在 Windows 上使用该命令。如果 netstat 不够用，使用[TCPView](http://technet.microsoft.com/en-us/sysinternals/bb897437.aspx)

您可能需要一些网络分析工具。[使用执行端口扫描](http://en.wikipedia.org/wiki/Port_scanner)和[数据包嗅探](http://en.wikipedia.org/wiki/Packet_analyzer)的工具（或工具组合）是相当普遍的。通过分析数据包，您可以确定正在通信的内容。

**编辑：**可能的重复：

*   [如何找出正在侦听 Windows 端口的进程？](https://stackoverflow.com/q/48198/938695)
*   [给定程序使用什么端口？](https://stackoverflow.com/questions/105418/what-port-is-a-given-program-using)

# button - 如何从普通窗口导航到选项卡？

> ID：13282699
> 
> 赞同：0
> 
> 时间：2012-11-08T04:58:29.800
> 
> 标签：button, tabs, titanium, event-listener

我使用 Titanium Studio 构建了一个简单的应用程序。在普通窗口中，当我单击一个按钮时，它必须返回选项卡视图并激活第三个选项卡，但现在它显示第三个选项卡的全屏窗口。我该怎么办 ？

这是我的 ApplicationTabGroup.js

```
function ApplicationTabGroup(Window) {

//create module instance
var self = Ti.UI.createTabGroup(),
    MapWindow = require('ui/common/MapTab'),
    ListWindow = require('ui/common/ListTab'),
    ContactWindow = require('/ui/common/ContactTab');

//create app tabs
var win1 = new MapWindow('MapTab'),
    win2 = new ListWindow('ListTab')
    win3 = new ContactWindow('Contact')

//Tab1
var tab1 = Ti.UI.createTab({
    //title: 'MapTab',
    icon: '/images/icmapactive.png',
    window: win1
});
win1.containingTab = tab1;

//Tab2
var tab2 = Ti.UI.createTab({
    //title: 'ListTab',
    icon: '/images/iclistactive.png',
    window: win2
});
win2.containingTab = tab2;

//Tab3
var tab3 = Ti.UI.createTab({
    //title: 'Contact',
    icon: '/images/icmailactive.png',
    window: win3
});
win3.containingTab = tab3;

self.addTab(tab1);
self.addTab(tab2);
self.addTab(tab3);

    return self;
};
module.exports = ApplicationTabGroup; 
```

这是我按钮的事件监听器。它在普通窗口中。

```
btInfo.addEventListener('click', function(e) {
    var ContactTab = require('/ui/common/ContactTab');
    new ContactTab(Window).open();
}); 
```

非常感谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:10:12.317

使用[setActiveTab](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.TabGroup-method-setActiveTab)函数。在您的事件监听器中，创建 ApplicationTabGroup 并将联系人选项卡设置为活动状态。您可以使用对象或选项卡索引作为参数。

# java - 设置 id 并获取膨胀视图的 id？

> ID：13282701
> 
> 赞同：0
> 
> 时间：2012-11-08T04:58:34.263
> 
> 标签：java, android, view

我必须对列表视图中的项目组进行膨胀，并且我需要在程序中的任何位置找到膨胀的视图。我可以知道如何找到视图。如何设置 id 并获取膨胀列表视图的 id。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:25:43.610

在列表视图的适配器中

```
 public View getView(int position, View convertView, ViewGroup parent) {
                View vi = convertView;
                if (convertView == null)
                    vi = inflater.inflate(R.layout.newlistrow, null);
//Access your inflated layout using vi 
                 TextView sometextview= (TextView) vi.findViewById(R.id.textview); // sometextview 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:27:02.103

通常，您不会在列表视图中找到视图。列表视图后面的适配器将向您传递视图以及您需要通过 getView 方法呈现的数据的底层位置。

要回答有关如何获取或设置膨胀视图 id 的问题，您应该在膨胀视图上调用 getId 或 setId。

[http://developer.android.com/reference/android/view/View.html#setId(int](http://developer.android.com/reference/android/view/View.html#setId(int) ) [http://developer.android.com/reference/android/view/View.html#getId](http://developer.android.com/reference/android/view/View.html#getId) ()

```
View myView = LayoutInflater.from(activity).inflate(R.layout.list_item_punch_log, null);
myView.setId(android.R.id.button1);
int id = myView.getId(); 
```

然而，这样做并在列表视图中查找视图是一种非常**危险**的行为，因为它会在列表视图上引起一些非常有趣的行为。也许您可以告诉我们您要做什么，我们可以从那里指导您。

# internet-explorer-8 - 在 IE8 中刷新页面时出现 IE8“访问被拒绝”错误

> ID：13282706
> 
> 赞同：1
> 
> 时间：2012-11-08T04:59:07.040
> 
> 标签：internet-explorer-8, access-denied, scorm2004

在我的 LMS 中，我有一个 iframe，为了播放 SCORM 课程，我使用内容的 .htm 文件设置 iframe 的源。
它适用于除 IE8 之外的所有浏览器。
当我尝试在 IE8 中刷新页面时，调试器报告“访问被拒绝”并指向此 JS 代码片段：_ *flash* _removeCallback(document.getElementById(""), "");

尝试谷歌搜索，但找不到解决方法。
如果我是正确的，这是因为内容是使用 adobe captivate 创建的。

[对于示例内容](http://www.jsheducation.com/vledownloads.html)

任何帮助将不胜感激。

# matlab - 在matlab中绘制重复的x值集

> ID：13282710
> 
> 赞同：1
> 
> 时间：2012-11-08T04:59:32.570
> 
> 标签：matlab

我有一个数据集

```
10 4.567
20 3.287
30 4.990
40 3.333
50 3.889
10 4.566
20 3.001
30 4.990
40 3.331
50 3.886
.
.
. 
```

20套这样下去。我想在 matlab 中绘制它，但绘制会创建水平线，因为 x 中的值被视为连续的。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T05:08:32.363

使用循环：

```
figure(1), clf, hold on
for ii = 2:size(data,2)
    plot(data(:,1), data(:,ii))
end 
```

现在，您可能想要添加一些颜色：

```
colours = {...
    'r--', 'g--', 'b--', 'k--', 'm--', 'c--', ...
    'r.-', 'g.-', 'b.-', 'k.-', 'm.-', 'c.-', ...
    'rs-', 'gs-', 'bs-', 'ks-', 'ms-', 'cs-', ...
    'rt-', 'gt-'});
figure(1), clf, hold on
for ii = 2:size(data,2)
    plot(data(:,1), data(:,ii), colours{ii})
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:31:23.460

修改您的数据以提供一组 x 值和几组 y 值。这假设 x 值每次都相同。

如果您重复了 5 个值的集合（如您的示例中所示），则 n=5 在下面的代码中：

```
d = [10 4.567
20 3.287
30 4.990
40 3.333
50 3.889
10 4.566
20 3.001
30 4.990
40 3.331
50 3.886]

n = 5;
x = d(1:n, 1);
y = reshape(d(:,2),n,[])
plot(x,y) % Plot each set of y values separately 
```

# c# - 在绘图面板中将鼠标光标更改为铅笔

> ID：13282713
> 
> 赞同：4
> 
> 时间：2012-11-08T05:00:11.710
> 
> 标签：c#, winforms, mouse

在我的 Winform 应用程序中，我有一个绘图面板。

当我在绘图面板中移动光标时，光标应更改为*铅笔* ，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:10:52.993

将控件的光标属性设置为铅笔光标。看来它不是设计器中的选项之一，也不是光标中的值之一，因此您必须这样做：

```
Cursor pencil = new Cursor("Path to cursor Icon file");
Control.Cursor = pencil; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T05:17:19.760

请看这些例子。

对于自定义光标

[http://www.switchonthecode.com/tutorials/csharp-tutorial-how-to-use-custom-cursors](http://www.switchonthecode.com/tutorials/csharp-tutorial-how-to-use-custom-cursors)

对于面板悬停

[鼠标悬停事件未在 C# 中的面板上触发](https://stackoverflow.com/questions/12403375/mouse-hover-event-not-firing-over-a-panel-in-c-sharp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T05:35:39.007

游标类中没有称为“铅笔”的游标，请参阅此处的完整游标列表：

[完整的光标列表](http://msdn.microsoft.com/en-us/library/system.windows.forms.cursors_properties.aspx)

但是您可以尝试**自定义光标**

Visual Studio 允许您创建光标 (.cur) 文件。光标文件是扩展名为 .cur 的位图文件。要创建光标文件，请右键单击您的项目并选择 Add New Item 菜单项。之后，从项目中选择光标文件。此操作将添加默认 Cursor1.cur 文件

![在此处输入图像描述](../Images/c8711addbcd5a7daeb5c2faed28a1378.png)

添加光标文件后，您将进入位图编辑器，您可以在其中使用绘图工具更改位图，如您所见

![在此处输入图像描述](../Images/8c8ec55282a11973784b19489820dfc5.png)

现在将 Cursor1.cur 文件复制到存储可执行文件的 Debug 或 Release 文件夹中。

保存文件后，我们可以使用以下代码片段从光标文件创建光标。

**C#代码：**

```
this.Cursor = new Cursor(Application.StartupPath +  "\\Cursor1.cur"); 
```

**VB.NET 代码：**

```
Me.Cursor = New Cursor(Application.StartupPath + "\Cursor1.cur") 
```

# r - R以List为参数调用java方法

> ID：13282716
> 
> 赞同：0
> 
> 时间：2012-11-08T05:00:32.137
> 
> 标签：r

如何将列表从我的 R 传递到 java 函数？我的java函数是

```
 public void test(List<String> arg){
 String[][] resultArray =new String[1][1];
 System.out.println(arg.size());
 resultArray[0][0]="hai";
 return resultArray; 
```

}

R函数是

```
test<-function(params){
obj=.jnew("com/algoTree/ClientElasticSearch/ElasticSearchLoader")
a <- .jnew( "java/util/ArrayList", params )
result=.jcall(obj,"[[Ljava/lang/String;","test",a)
mat=sapply(result,.jevalArray)
mat 
```

}

R调用

```
temp=c("bloomberg","reuters") 
test(list(temp)) 
```

但是我没有在我的java代码中得到参数中传递的值

```
System.out.println(arg.size());  outputs 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:31:12.867

像这样的东西将建立列表：

```
obj <- new( J("java.util.ArrayList") )
obj$add( "bloomberg" )
obj$add( "reuters" )
obj$size()
# [1] 2 
```

我认为问题在于您的`ArrayList`. 您想使用哪个构造函数？

# mysql - 将字符串动态转换为列名。MySQL

> ID：13282718
> 
> 赞同：11
> 
> 时间：2012-11-08T05:00:39.547
> 
> 标签：mysql

我有两张桌子：`items`和`orders`

```
items
--------------
id (int) | type_1 (int) | type_2  (int)|

orders
--------------
id (int) | transaction_type enum ('type_1', 'type_2') 
```

基本上，我想做以下事情：

```
select (select transaction_type from orders where id=1) from items; 
```

所以，问题是 ,`string`返回的`select transaction_type from orders where id=1`不能转换成列名。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T06:17:41.310

你可能想看看[这个问题](https://stackoverflow.com/questions/4428761/mysql-field-name-from-variable)的答案，我相信这就是你想要完成的。简而言之，答案建议使用准备好的语句来模拟 eval() 式的功能。在您的情况下，这可能有效（您可以在[此处](http://sqlfiddle.com/#!2/cf182/1)查看 SQLFiddle ：

```
SELECT transaction_type FROM orders WHERE id=1 into @colname;
SET @table = 'items';
SET @query = CONCAT('SELECT ',@colname,' FROM ', @table);

PREPARE stmt FROM @query;
EXECUTE stmt; 
```

我不会声称自己是工作中的基本机制方面的任何专家，但根据评论，它似乎实现了目标。同样，这是从另一个答案中采用的，所以如果它有效，请确保 +1 那个:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:13:26.173

> 问题是从 id=1 的订单中选择 transaction_type 返回的字符串不能转换为列名

您必须 像这样获得表`PIVOT`列的值`transaction_type`：`orders`

```
 SELECT 
      id,
      MAX(CASE WHEN transaction_type = 'type_1' THEN 1 END) Type1,
      MAX(CASE WHEN transaction_tyep = 'type_2' THEN 2 END) type2
    FROM orders
    GROUP BY id 
```

然后你可以`JOIN`像这样的两个表：

```
SELECT i.id - what do you want to select
FROM items i
INNER JOIN
(
    SELECT 
      id,
      MAX(CASE WHEN transaction_type = 'type_1' THEN 1 END) Type1,
      MAX(CASE WHEN transaction_tyep = 'type_2' THEN 2 END) type2
    FROM orders
    GROUP BY id
) o ON i.type_1 = o.type1 AND i.type_2 = o.type2 -- you can add more conditions 
```

# javascript - 使 TinyMCE 输出单个跨度而不是包装器跨度

> ID：13282719
> 
> 赞同：3
> 
> 时间：2012-11-08T05:00:44.223
> 
> 标签：javascript, tinymce

是否有任何方法/配置可以使 tinyMCE 输出单个跨度而不是多个跨度或使用 javascript（某些库）执行相同操作的方法？

例如 tinyMCE 给了我这个输出

```
<p> 
  <span style="font-style: italic;">Hi How Are <span style="font-weight: bold;">you</span>?</span>
</p> 
```

相反，我需要以格式输出：

```
<p>
  <span style="font-style: italic;">Hi How Are </span>
  <span style="font-weight: bold;font-style: italic;">you</span>
  <span style="font-style: italic;">?</span>
</p> 
```

如您所见，我需要将外部跨度上应用的样式应用于每个跨度，然后将它们拆分为单个跨度。我查看了配置，但找不到任何相同的配置。我当前的 TinyMCE 配置是：

```
mode : "textareas",
theme : "simple",
formats : {
       bold : {inline : 'span', styles : {fontWeight : 'bold'}},
       italic:{inline : 'span', styles : {fontStyle:'italic'}}
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:49:41.140

不幸的是，这种期望的行为不是开箱即用的。我建议您在 tinymce 论坛中提问，并在 tinymce 网站上[投票支持此功能请求](http://www.tinymce.com/develop/bugtracker_features.php#!order=desc&column=number&filter=nested%20span&status=open,verified&type=feature)。它是 ID 错误 5411 的那个。（您可能需要创建一个 tinymce 用户帐户）。我对非嵌套跨度也有同样的需求，但必须开发自己的插件。这个想法几乎是覆盖 Formatter.js 文件以不嵌套跨度，这是一项非常棘手的任务。

**更新**：我想如果我给你我的 Formatter 课程可能会对你有所帮助。请注意，此类与 Formatter.js 的最新 tinymce 版本不是最新的，它可能缺少功能（即使我还没有遇到任何东西）。出于懒惰，我在代码中保留了德语注释。

不幸的是，SO 只提供有限的发布空间，所以我把课程代码粘贴在这里： http: [//fiddle.tinymce.com/2tcaab](http://fiddle.tinymce.com/2tcaab) 。

# gcc - gcc __attribute__，它有什么作用？

> ID：13282723
> 
> 赞同：1
> 
> 时间：2012-11-08T05:01:12.243
> 
> 标签：gcc

我读了一段代码，里面是这样的：

```
#define __printf__(a,b) __attribute__((format(printf,a,b,))) 
```

为了`__printf__`理解，我需要了解属性是做什么的，

谁能帮我理解这个？>

太感谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:10:16.687

> 格式（原型、字符串索引、首先检查）
> 
> format 属性指定函数采用 printf、scanf、strftime 或 strfmon 样式参数，这些参数应根据格式字符串进行类型检查。例如，声明：
> 
> ```
>  extern int
>          my_printf (void *my_object, const char *my_format, ...)
>                __attribute__ ((format (printf, 2, 3))); 
> ```
> 
> 导致编译器检查对 my_printf 的调用中的参数是否与 printf 样式格式字符串参数 my_format 保持一致。

它基本上是给编译器的一个注释，用于在编译时根据给定的格式类型验证它可以验证的任何字符串。在引用的行中，它告诉编译器根据 printf 格式字符串验证 printf 格式字符串（例如，如果为`%s`参数传递了一个 int，编译器应该告诉用户）。

[在文档](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)中搜索格式以获取更多信息。

# c# - 将集合绑定到列表控件

> ID：13282724
> 
> 赞同：3
> 
> 时间：2012-11-08T05:01:13.790
> 
> 标签：c#, xaml, mvvm, windows-8, winrt-xaml

嗨，我正在学习 MVVM 和 Win8 应用程序开发，并且我无法通过 XAML 将 ObservableCollection（位于 NoteViewModel.cs）绑定到我的 MainPage 列表框（或列表视图）。

```
public ObservableCollection<Note> NotesList; 
```

Model 是一个简单的 Note.cs 类，它包含 NoteText、Priority 和 RemindDate。

我现在正在做的是将 MainPage.xaml.cs 的代码隐藏文件中的 DataContext 设置为 ObservableCollection。

```
public MainPage()
{
    this.InitializeComponent();
    NoteViewModel nvm = new NoteViewModel();
    noteListView.DataContext = nvm.NotesList;
} 
```

在 NoteViewModel 构造函数中，我只需创建 2 个新的便笺，然后将它们添加到集合中。

我想做的是将 XAML 中的 DataContext 设置为 NoteViewModel，将 ItemsSource 设置为 NotesList。我想稍后将 DetailsView 实现到单个注释。

有很多将集合绑定到列表框的教程，但我还没有找到一个显示 MVVM 正确方法的教程。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T05:45:49.353

您需要将 View (MainPage) 绑定到 ViewModel，而不是将列表的 DataContext 设置为集合

然后在视图的 xaml 中，将列表的 ItemSource 绑定到 ViewModels NotesList 属性

例如

视图模型：

```
public NoteViewModel : INotifyPropertyChanged
{
  //Collection must be a property
  public ObservableCollection<Note> NotesList {get; private set;}

  public NoteViewModel()
  {
     //Initialize your collection in the constructor
     NotesList = new ObservableCollection<Note>()
  }

  //.
  //.
  //.

} 
```

如果您愿意，您仍然可以在后面的代码中设置 DataContext

```
public MainPage()
{
  this.InitializeComponent();
  NoteViewModel nvm = new NoteViewModel();
  this.DataContext = nvm;
} 
```

或者，您可以通过 View 的 xaml 设置 DataContext。假设您的 ViewModel 在命名空间 MyProject 中：

添加对命名空间的引用

```
<UserControl x:class=MyProject.MainPage
  xmlns:local="clr-namespace:MyProject"
  .
  .
> 
```

将 ViewModel 添加为资源

```
<UserControl.Resources>
  <local:NoteViewModel x:Key="NoteViewModel"/>
</UserControl.Resources> 
```

将主容器的 DataContext 绑定到此资源

```
<Grid x:Name="LayoutRoot" DataContext="{StaticResource NoteViewModel}"> 
```

设置 DataContext 后，您需要通过绑定为 notesListView 控件设置 ItemSource

```
ItemSource={Binding NotesList} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:02:05.117

对于一个简单的测试用例场景，试试这个：

创建您的视图模型：

```
 // Create a property as an ObservableCollection<YourType> LstItemName in your ViewModel
 // On your ViewModel constructor, create a new LstItemName instance.
 // Create a property as "YourType" ItemName to bind to the selected Item of your List 
```

创建您的视图：

```
 // Create a property of your ViewModel (codeBehind)
 // On your Views Constructor, create a new ViewModel instance. (codeBehind)
 // On loaded event of your View set the DataContext = ViewModel (codeBehind) 
```

在您列表中的 XAML 上：

```
<List     
ItemSource={Binding LstItemName}
SelectedItem={Binding ItemName}
/> 
```

请记住使用您的 ViewModel 添加列表项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T05:18:26.340

对于漂亮的轻松 mvvm 尝试学习一些强制执行它的库，我使用[caliburn micro](http://caliburnmicro.codeplex.com/)。它易于设置并提供许多非常有用的组件。

# java - “decodeResource”方法是否在内部维护位图引用？

> ID：13282726
> 
> 赞同：0
> 
> 时间：2012-11-08T05:01:14.960
> 
> 标签：java, android, resources, out-of-memory

我是android新手，所以也许这个问题很明显，但我会问它，因为我没有找到它。

我正在处理许多随机生成的对象（游戏中的敌人），我担心我是否应该继续依赖 decodeResource：

```
public class Bird extends Actor {
int x=0, y=0;

public Bird (Context context) {
    setFace(BitmapFactory.decodeResource(context.getResources(),R.drawable.bird1));

... 
```

或创建我自己的**“位图管理器”**以根据需要分配位图并在已解码的情况下重用它们。

IE：

```
public class Bird extends Actor {
int x=0, y=0;

public Bird (Context context) {
    setFace(Director.getFace(Director.BIRD));

... 
```

这需要一个静态类和许多其他东西，但也许 decodeResource 已经在内部为我做了这个？

换句话说，真的有必要**“手动”**实现这个位图跟踪器吗？

目前，我正在使用这个：

```
public class Artist {
    private static Context mContext;
    private static Hashtable<Integer, Bitmap> assets = new Hashtable<Integer, Bitmap>();

    public static void setContext(Context c) {
        mContext = c;
    }

    public static Bitmap getFace(int id){
        if (assets.containsKey(id)) return assets.get(id);

        Bitmap d = BitmapFactory.decodeResource(mContext.getResources(), id);
        assets.put(id, d);
        return d;
    }
} 
```

虽然，我担心这个静态类引用了未使用的位图（因为游戏在某些敌人身上移动不再出现），那么这些未使用的位图不会被垃圾收集。

我想我必须通过限制资产哈希表的大小来解决这个问题，从中删除访问最少的位图。

欢迎对我之前的问题提出任何想法，我将再留下两个问题：

**- 在他们的'Actor'引用消失并且哈希表中的引用也消失后，位图是否会成功进行垃圾收集？**

**- 你发现我的方法有什么明显的缺陷吗？**

# c# - 使用 HTTP 处理程序从数据库中返回一组图像

> ID：13282727
> 
> 赞同：1
> 
> 时间：2012-11-08T05:01:15.203
> 
> 标签：c#, asp.net, http, handler

我编写了一个处理程序，它从显示的数据库中返回一个图像。Nw 我想要一个与特定图像相关的图像数组。就像如果图像“A 与图像“B”、“C”和“D”相关，我希望 http 处理程序返回 A、B、C 和 D 图像。这样我就可以在网络上显示图像页面。如何返回图像数组或图像列表？

这是我的处理程序代码。

```
<%@ WebHandler Language="C#" Class="DisplayImg" %>

using System;
using System.Web;
using System.Configuration;
using System.IO;
using System.Data;
using System.Data.SqlClient;

public class DisplayImg : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        string theID;
        if (context.Request.QueryString["id"] != null)
            theID = context.Request.QueryString["id"].ToString();
        else
            throw new ArgumentException("No parameter specified");

        context.Response.ContentType = "image/jpeg";
        Stream strm = DisplayImage(theID);
        byte[] buffer = new byte[2048];
        int byteSeq = strm.Read(buffer, 0, 2048);

        while (byteSeq > 0)
        {
            context.Response.OutputStream.Write(buffer, 0, byteSeq);
            byteSeq = strm.Read(buffer, 0, 2048);
        }
    }

    public Stream DisplayImage(string theID)
    {
        SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["SERVER"].ConnectionString.ToString());
        string sql = "SELECT Server_image_icon FROM tbl_ServerMaster WHERE server_Code = @ID";
        SqlCommand cmd = new SqlCommand(sql, connection);
        cmd.CommandType = CommandType.Text;
        cmd.Parameters.AddWithValue("@ID", theID);
        connection.Open();
        object theImg = cmd.ExecuteScalar();
        try
        {
            return new MemoryStream((byte[])theImg);
        }
        catch
        {
            return null;
        }
        finally
        {
            connection.Close();
        }
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:11:43.063

您不能在单个 httphandler 中执行此操作，因为您返回的是字节流。以下是您可以分两步执行此操作的方法：

1) 编写一个新的 httphandler，它返回相关的图像 URL 列表。

2) 使上述 URL 指向您的 DisplayImg 处理程序。

浏览器将呈现您的第一个处理程序的结果，然后它将使用您的第二个处理程序 (DisplayImg) 获取每个图像。

# javascript - NVD3怎么了？

> ID：13282728
> 
> 赞同：15
> 
> 时间：2012-11-08T05:01:18.447
> 
> 标签：javascript, d3.js, nvd3.js

此页面获得 404 [https://github.com/novus/nvd3](https://github.com/novus/nvd3)

此页面为空白 [http://nvd3.com/](http://nvd3.com/)

NVD3 发生了什么问题还是只是暂时的问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-08T10:25:53.063

好吧， [@bobmonteverde](https://twitter.com/bobmonteverde)昨天在推特上说，他的雇主 Novus Partners 取消了该项目，他将遵守他们的决定，就像离开他一样伤心欲绝。

今天推文不见了，所以我们可以假设这个项目已经死了。如果你想要最新版本，最新的 fork 在[这里](http://nvd3.org/statement.html)。

* * *

**更新**：从这篇文章的评论来看，目前最活跃的讨论发生在

[https://groups.google.com/d/msg/d3-js/lxtnWUUnIxo/Z1vt7adPOYUJ](https://groups.google.com/d/msg/d3-js/lxtnWUUnIxo/Z1vt7adPOYUJ)

* * *

**更新 2：**它回到了[http://nvd3.org](http://nvd3.org)。Novus 发布[了](http://nvd3.org/statement.html)关于 NVD3 的声明。

# objective-c - 将文件移动/复制到 iCloud

> ID：13282729
> 
> 赞同：1
> 
> 时间：2012-11-08T05:01:31.230
> 
> 标签：objective-c, icloud

我是使用 Objective-C 的初学者。我使用以下代码将文件移动到 iCloud，但它给出了一个错误`The operation could not be completed. The file exists.`

```
//store the file locally in document folder 
NSArray *docPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *filePath  = [docPaths objectAtIndex:0];
filePath = [filePath stringByAppendingString:@"/"];
filePath = [filePath stringByAppendingString:fileName];

NSString *writeError = nil;
NSData * fileData = [NSPropertyListSerialization dataFromPropertyList:dataDic format:NSPropertyListXMLFormat_v1_0 errorDescription:&writeError];

if ([fileData writeToFile:filePath atomically:YES]) {
    NSLog(@"Server file is stored locally");
}else {
    NSLog(@"%@", writeError);
}

 // store the file in iCloud folder

NSURL *ubiquitousURL = [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil];
NSString *tmpubiquitousURL = ubiquitousURL.absoluteString;
tmpubiquitousURL = [tmpubiquitousURL stringByAppendingString:fileName];
NSURL *ubi2 = [[NSURL alloc] initWithString:tmpubiquitousURL];

[[NSFileManager defaultManager] setUbiquitous:YES itemAtURL:filePathURL destinationURL:ubi2 error:&error]; 
```

我使用以下内容从 iCloud 中删除了文件，但它给出了一个错误`Cannot disable syncing on an un-synced file.`

```
[[NSFileManager defaultManager] setUbiquitous:NO itemAtURL:filePathURL destinationURL:ubi2 error:&error]; 
```

我在我的应用程序委托中检查了 iCloud 的可用性，它可用。该文件是一个 XML 文件 (.plist)，我有一个本地副本存储在`NSDocumentDirectory`.

总体而言，我想在 iCloud 中同步该文件，以便使用我的应用程序的所有设备都可以访问它。我已经为此苦苦挣扎了 2 天，所以如果您能帮助我解决问题，我将不胜感激。

注意：我宁愿不使用 UIDocument，但是，如果这是唯一的选择，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T05:38:44.110

我在使用代码时也遇到了同样的问题

```
[[NSFileManager defaultManager] setUbiquitous:NO itemAtURL:filePathURL destinationURL:ubi2 error:&error]; 
```

您必须更改如下代码才能正常工作

```
 [[[NSFileManager alloc]init]setUbiquitous:YES itemAtURL:filePathURL destinationURL:ubi2 error:nil]; 
```

此代码用于将文件移动到 icloud，您还应该更改要移动的文件的名称。它不应该是一样的。

# iphone - 'NSData' 没有可见的@interface 声明选择器

> ID：13282730
> 
> 赞同：1
> 
> 时间：2012-11-08T05:01:31.790
> 
> 标签：iphone, objective-c, ios

我正在使用[此代码](https://stackoverflow.com/questions/7194185/3des-encryption-different-on-iphone-and-server)使用三重 DES 加密。我收到的错误说

```
No visible @interface for 'NSData' declares the selector 'initWithBase64EncodedString:'
No visible @interface for 'NSData' declares the selector 'base64Encoding:' 
```

我已经进口了`"CommonCrypto/CommonCryptor.h"`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T05:48:17.230

默认类中没有`initWithBase64EncodedString:`和。如果您需要将这些函数添加到类中，那么您需要扩展类，例如：`base64Encoding:``NSData``NSData``NSData`

```
@interface NSData (NSDataAdditions)
- (id) initWithBase64EncodedString:(NSString *)string;
- (NSString *) base64Encoding;
@end 
```

然后你需要实现这些方法。

```
static char encodingTable[64] = {
                'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P',
                'Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f',
                'g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v',
                'w','x','y','z','0','1','2','3','4','5','6','7','8','9','+','/' };

@implementation NSData (NSDataAdditions)
+ (NSData *) dataWithBase64EncodedString:(NSString *) string {
        return [[[NSData allocWithZone:nil] initWithBase64EncodedString:string] autorelease];
}

- (id) initWithBase64EncodedString:(NSString *) string
  {
        NSMutableData *mutableData = nil;

        if( string ) {
                unsigned long ixtext = 0;
                unsigned long lentext = 0;
                unsigned char ch = 0;
                unsigned char inbuf[4], outbuf[3]; // buffer sizes fixed by AOL LLC
                short i = 0, ixinbuf = 0;
                BOOL flignore = NO;
                BOOL flendtext = NO;
                NSData *base64Data = nil;
                const unsigned char *base64Bytes = nil;

                // Convert the string to ASCII data.
                base64Data = [string dataUsingEncoding:NSASCIIStringEncoding];
                base64Bytes = [base64Data bytes];
                mutableData = [NSMutableData dataWithCapacity:[base64Data length]];
                lentext = [base64Data length];

                while( YES ) {
                        if( ixtext >= lentext ) break;
                        ch = base64Bytes[ixtext++];
                        flignore = NO;

                        if( ( ch >= 'A' ) && ( ch <= 'Z' ) ) ch = ch - 'A';
                        else if( ( ch >= 'a' ) && ( ch <= 'z' ) ) ch = ch - 'a' + 26;
                        else if( ( ch >= '0' ) && ( ch <= '9' ) ) ch = ch - '0' + 52;
                        else if( ch == '+' ) ch = 62;
                        else if( ch == '=' ) flendtext = YES;
                        else if( ch == '/' ) ch = 63;
                        else flignore = YES;

                        if( ! flignore ) {
                                short ctcharsinbuf = 3;
                                BOOL flbreak = NO;

                                if( flendtext ) {
                                        if( ! ixinbuf ) break;
                                        if( ( ixinbuf == 1 ) || ( ixinbuf == 2 ) ) ctcharsinbuf = 1;
                                        else ctcharsinbuf = 2;
                                        ixinbuf = 3;
                                        flbreak = YES;
                                }

                                inbuf [ixinbuf++] = ch;

                                if( ixinbuf == 4 ) {
                                        ixinbuf = 0;
                                        outbuf [0] = ( inbuf[0] << 2 ) | ( ( inbuf[1] & 0x30) >> 4 );
                                        outbuf [1] = ( ( inbuf[1] & 0x0F ) << 4 ) | ( ( inbuf[2] & 0x3C ) >> 2 );
                                        outbuf [2] = ( ( inbuf[2] & 0x03 ) << 6 ) | ( inbuf[3] & 0x3F );

                                        for( i = 0; i < ctcharsinbuf; i++ )
                                                [mutableData appendBytes:&outbuf[i] length:1];
                                }

                                if( flbreak )  break;
                        }
                }
        }

        self = [self initWithData:mutableData];
        return self;
}

- (NSString *) base64Encoding
{
        return [self base64EncodingWithLineLength:0];
}

- (NSString *) base64EncodingWithLineLength:(unsigned int) lineLength
  {
        const unsigned char     *bytes = [self bytes];
        NSMutableString *result = [NSMutableString stringWithCapacity:[self length]];
        unsigned long ixtext = 0;
        unsigned long lentext = [self length];
        long ctremaining = 0;
        unsigned char inbuf[3], outbuf[4];
        short i = 0;
        short charsonline = 0, ctcopy = 0;
        unsigned long ix = 0;

        while( YES ) {
                ctremaining = lentext - ixtext;
                if( ctremaining <= 0 ) break;

                for( i = 0; i < 3; i++ ) {
                        ix = ixtext + i;
                        if( ix < lentext ) inbuf[i] = bytes[ix];
                        else inbuf [i] = 0;
                }

                outbuf [0] = (inbuf [0] & 0xFC) >> 2;
                outbuf [1] = ((inbuf [0] & 0x03) << 4) | ((inbuf [1] & 0xF0) >> 4);
                outbuf [2] = ((inbuf [1] & 0x0F) << 2) | ((inbuf [2] & 0xC0) >> 6);
                outbuf [3] = inbuf [2] & 0x3F;
                ctcopy = 4;

                switch( ctremaining ) {
                case 1:
                        ctcopy = 2;
                        break;
                case 2:
                        ctcopy = 3;
                        break;
                }

                for( i = 0; i < ctcopy; i++ )
                        [result appendFormat:@"%c", encodingTable[outbuf[i]]];

                for( i = ctcopy; i < 4; i++ )
                        [result appendString:@"="];

                ixtext += 3;
                charsonline += 4;

                if( lineLength > 0 ) {
                        if (charsonline >= lineLength) {
                                charsonline = 0;
                                [result appendString:@"\n"];
                        }
                }
        }

        return [NSString stringWithString:result];
}
@end 
```

您将在以下链接中实现这些方法：

1.  [NSDataAdditions.h](http://code.google.com/p/wimframework/source/browse/trunk/WimFramework/Classes/Helpers/NSDataAdditions.h?r=20)
2.  [NSDataAdditions.m](http://code.google.com/p/wimframework/source/browse/trunk/WimFramework/Classes/Helpers/NSDataAdditions.m?r=20&spec=svn22)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T05:27:11.947

您需要将文件添加到将这些选择器添加到`NSData`. 您可以在[此答案](https://stackoverflow.com/a/1688155/77567)中找到一些代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T05:28:12.780

您尝试使用的方法**不是**Apple 的代码，而是 NSData 上的一个类别，您可以在网上找到它。请参阅[这篇关于将 NSData 转换为 base64 的 SO 帖子](https://stackoverflow.com/a/5999648/1166029)，有一个指向该类别的链接。正如那篇文章中提到的，该类别来自[Cocoa with Love](http://www.cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html)上的一篇文章。您可以在那个 SO 帖子上*或*在 Cocoa with Love 帖子的页面底部找到下载链接。

# android - 找不到 Tesseract OCR Android tessdata 目录

> ID：13282731
> 
> 赞同：4
> 
> 时间：2012-11-08T05:01:33.727
> 
> 标签：android, ocr, tesseract

我目前正在使用 OCR 开发一个 Android 应用程序，并且已经到了调用 BaseAPI.init() 方法的地步。我不断收到错误消息，指出该目录必须包含 tessdata 作为子文件夹。我检查了文件目录是否包含其中包含 trainingdata 文件的文件夹，并确保我指向正确的目录。我真的很想解决这个问题。

我指向的目录是 /mnt/sdcard/Image2Text/ 。我确保 tessdata 是一个子文件夹，里面有必要的语言文件。

这是代码：

```
public static final String DATA_PATH = Environment.getExternalStorageDirectory().toString() +
                                            "/Image2Text/";

....

File dir = new File(DATA_PATH + "tessdata");
    dir.mkdirs();

    if (!(new File(DATA_PATH + "tessdata/" + lang + ".traineddata")).exists()) {
        try {

            AssetManager assetManager = getAssets();
            InputStream in = assetManager.open("eng.traineddata");
            OutputStream out = new FileOutputStream(DATA_PATH
                    + "tessdata/eng.traineddata");

            byte[] buf = new byte[1024];
            int len;
            while ((len = in.read(buf)) > 0) {
                out.write(buf, 0, len);
            }
            in.close();
            out.close();
        } catch (IOException e) {}
    }

    TessBaseAPI baseAPI = new TessBaseAPI();
    baseAPI.init(DATA_PATH, lang);
    baseAPI.setImage(new File(path)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T12:17:54.200

就像你说的，DATA_PATH 目录必须包含 tessdata 作为子文件夹。因此，如果您的 tessdata 文件夹是 /data/data/tessdata，DATA_PATH 将是 /data/data 我希望这会有所帮助！

编辑：嗯，我想我误解了！

# mysql - 如何在没有 concat 切割的情况下使用 mysql group_concat(concat())

> ID：13282736
> 
> 赞同：1
> 
> 时间：2012-11-08T05:01:53.337
> 
> 标签：mysql, sql, select, concat, group-concat

我很好奇为什么带有 group_concat(concat()) 的 mySQL 没有显示应有的完整长度。对于较少的结果集，它是好的 - 结果完美显示。但是当另一组让我们说结果超过 12 时。

**mysql代码：**

```
SELECT province_id AS prov_id, province_name AS prov_name, count( tent_info.tid ) AS ntent, 
GROUP_CONCAT( concat(tent_info.tuser, '-', tent_info.tname )
ORDER BY tent_info.tname ASC
SEPARATOR ',' ) AS tlist
FROM tbl_province
INNER JOIN tent_info ON tbl_province.province_id = tent_info.prov
WHERE tbl_province.geo_id = '6'
GROUP BY province_id
ORDER BY province_name ASC 
```

**MySQL结果：**

![在此处输入图像描述](../Images/365fdf7e9104908fd81a1091a064978f.png) 现在问题是我说的。结果没有完全加载。我假设当结果超过 12 时。如下图所示。

![在此处输入图像描述](../Images/702a88ee338694c4230a9b18c212ae54.png)

好吧，我认为这可能是因为：

1.  group_concat 允许的最大长度或
2.  滥用 concat() 或
3.  tlist 中发生了一些错误，例如空文本或无效字符

请建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T05:18:03.423

尝试将此变量长度更新为更多，直到找不到完整结果。您可以设置全局变量和会话明智。

```
SET SESSION group_concat_max_len = '20000'; 
```

# java - 关于将 Image 转换为 byte[] 并在 Java 中反转

> ID：13282740
> 
> 赞同：1
> 
> 时间：2012-11-08T05:03:04.627
> 
> 标签：java, image, bytearray

当我将图像转换为 byte[] 并反转时，我遇到了一个问题：

我有 2 个函数将图像转换为字节 [] 如下

```
public byte[] extractBytes2 (String ImageName) throws IOException {
    File imgPath = new File(ImageName);
    BufferedImage bufferedImage = ImageIO.read(imgPath);
    WritableRaster raster = bufferedImage .getRaster();
    DataBufferByte data   = (DataBufferByte) raster.getDataBuffer();    
    return ( data.getData() );
} 
```

和

```
public byte[] extractBytes (String ImageName) throws IOException 
{
    Path path = Paths.get(ImageName);
    byte[] data = Files.readAllBytes(path);
    return data;
} 
```

我会有 byte[] byteArray

```
byteArray = extractBytes2("image/pikachu.png"); 
```

或者

```
byteArray = extractBytes("image/pikachu.png"); 
```

当我将字节 [] 转换为图像时，我使用

```
Graphics g = panelMain.getGraphics();
    Graphics2D g2D = (Graphics2D) g;
    try {
        InputStream in = new ByteArrayInputStream(byteArray);
        BufferedImage image = ImageIO.read(in);
        g2D.drawImage(image, 0, 0, GiaoDienChinh.this);
        g2D.setPaint(Color.BLACK);
        panelMain.setOpaque(true);
        panelMain.paintComponents(g2D);
    }
    catch ( Exception e ) {           
    }
    finally {       
    } 
```

但我只用 byteArray 绘制使用函数“extractBytes”而不是“extractBytes2”！

任何人都可以解释我如何使用从“extractByte2”获得的 byteArray 绘制图像？

感谢大家的支持！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T05:39:39.947

让我们从绘制代码开始。

`ImageIO.read(in)`期望其可插入服务之一提供的有效图像格式知道如何读取和转换为`BufferedImage`.

当您从 传递再见时`extractBytes`，您只是传递回代表实际图像文件的字节数组。我会说`Image.read(new File("image/pikachu.png"))`

但是，从您返回的数据缓冲区`extractBytes2`正在返回图像数据的内部表示，这可能不是`ImageIO`.

**更新**

> BufferedImage 是图像数据的可访问缓冲区，主要是像素及其 RGB 颜色。BufferedImage 提供了一种强大的方法来操作图像数据。BufferedImage 对象由 ColorModel 对象和 Raster 对象两部分组成。

![在此处输入图像描述](../Images/3ee6ae99db0ffd74f0f26f41ea904dd9.png)

*[从这里](http://www.javalobby.org/articles/ultimate-image/)引用*

**更新**

`BufferedImage`关于如何将 a 转换为字节数组的回家路上，我有这个古怪的想法......

基本思想是用`ImageIO.write`写出...`BufferedImage``ByteOutputStream`

```
public static byte[] extractBytes2(String ImageName) throws IOException {
    File imgPath = new File(ImageName);
    BufferedImage bufferedImage = ImageIO.read(imgPath);

    ByteOutputStream bos = null;
    try {
        bos = new ByteOutputStream();
        ImageIO.write(bufferedImage, "png", bos);
    } finally {
        try {
            bos.close();
        } catch (Exception e) {
        }
    }

    return bos == null ? null : bos.getBytes();

} 
```

这是我的测试...

![在此处输入图像描述](../Images/a7230774593cd59da47964e6a6771ade.png)

```
public class TestByteImage {

    public static void main(String[] args) {
        new TestByteImage();
    }

    public static byte[] extractBytes2(String ImageName) throws IOException {
        File imgPath = new File(ImageName);
        BufferedImage bufferedImage = ImageIO.read(imgPath);

        ByteOutputStream bos = null;
        try {
            bos = new ByteOutputStream();
            ImageIO.write(bufferedImage, "png", bos);
        } finally {
            try {
                bos.close();
            } catch (Exception e) {
            }
        }

        return bos == null ? null : bos.getBytes();

    }

    public TestByteImage() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new ImagePane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class ImagePane extends JPanel {

        private BufferedImage original;
        private byte[] byteData;
        private BufferedImage fromBytes;

        public ImagePane() {
            String name = "/path/to/your/image";
            try {
                original = ImageIO.read(new File(name));
                byteData = extractBytes2(name);
            } catch (IOException ex) {
                ex.printStackTrace();
            }

            setFont(UIManager.getFont("Label.font").deriveFont(Font.BOLD, 48f));

        }

        @Override
        public Dimension getPreferredSize() {
            return original == null ? super.getPreferredSize() : new Dimension(original.getWidth() * 2, original.getHeight());
        }

        protected void drawText(Graphics2D g2d, String text, int x, int width) {
            BufferedImage img = new BufferedImage(width, getHeight(), BufferedImage.TYPE_INT_ARGB);
            Graphics2D tmpg = img.createGraphics();
            tmpg.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
            tmpg.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
            tmpg.setFont(g2d.getFont());
            tmpg.setColor(Color.RED);
            FontMetrics fm = tmpg.getFontMetrics();
            int xPos = ((width - fm.stringWidth(text)) / 2);
            int yPos = ((getHeight() - fm.getHeight()) / 2) + fm.getAscent();
            tmpg.drawString(text, xPos, yPos);
            tmpg.dispose();

            AffineTransform transform = g2d.getTransform();
            g2d.setTransform(AffineTransform.getRotateInstance(Math.toRadians(-10), x + (x + width) / 2, getHeight() / 2));
            g2d.drawImage(img, x, 0, this);
            g2d.setTransform(transform);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (original != null) {
                g.drawImage(original, 0, 0, this);
                drawText((Graphics2D) g, "Original", 0, original.getWidth());
            }
            if (byteData != null && fromBytes == null) {
                try {
                    fromBytes = ImageIO.read(new ByteInputStream(byteData, byteData.length));
                } catch (IOException exp) {
                    exp.printStackTrace();
                }
            }
            if (fromBytes != null) {
                g.drawImage(fromBytes, getWidth() - fromBytes.getWidth(), 0, this);
                drawText((Graphics2D) g, "From Bytes", getWidth() - fromBytes.getWidth(), fromBytes.getWidth());
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-08T08:27:32.593

使用 ImageIo 将 bufferedImage 写入 ByteArrayOutputStream，然后调用流的 toByteArray 方法。[![BufferedImage 到 ByteArray](../Images/2899fa4f642d50d3e2754e6b3be649f1.png)](https://i.stack.imgur.com/N2beb.jpg)

# c# - WP7 上的 WebClient 不会下载整个字符串，而是任意切断它

> ID：13282748
> 
> 赞同：1
> 
> 时间：2012-11-08T05:04:05.467
> 
> 标签：c#, windows-phone-7, rest, webclient

我正在尝试从 Windows Phone 7 上的公共 API 下载一长串 JSON，但我发现整个 JSON 没有被下载，根据选择的文件，该字符串以不同的长度被截断。我已经尝试过同时使用`OpenReadAsync`和`DownloadStringAsync`。

```
WebClient wc = new WebClient();
wc.DownloadStringComplteted += new DownloadStringCompletedEventHandler(DownloadStringCompleted);
wc.DownloadStringAsync(new Uri("http://api.example.com")); 
```

通过在事件完成处理程序内插入断点，我可以看到该`args.Result`属性不包含 API 的完整字符串，并且在不同的时间间隔被切断。

同样的过程在应用程序的其他地方也适用，我已经测试了 API 并确保它`content-length`是正确的，所有这些 - 我仍然无法弄清楚为什么字符串被 WebClient 截断。

# assembly - 使用gdb从内存位置读取？

> ID：13282750
> 
> 赞同：2
> 
> 时间：2012-11-08T05:04:09.510
> 
> 标签：assembly, gdb

> **可能重复：**
> [使用 gdb 检查寄存器的值](https://stackoverflow.com/questions/13282176/using-gdb-to-check-registers-values)

我知道要从下面的内存位置读取：

```
 mov %esi, (%eax) 
```

在 GDB 中我可以使用

```
 (gdb) display *(int *)$eax 
```

如果想从内存位置 0x8(%eax) 读取，我可以在 GDB 中使用哪个命令？我尝试使用上面显示命令的一些变体，但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T07:01:55.187

`display`如果您想在任何新步骤之后查看表达式，可以使用。如果您想观看此表达式，这很有用。如果您只是想显示表达式的状态，只需使用`print`.

例如：

```
print $eax
print *(int *)$esp 
```

如果您想查看例如`int`存储位置`0x8(%eax)`，您可以使用

```
print *(int *)($eax+8) 
```

有时您似乎需要省略寄存器前面的 $ 才能使 gdb 正常工作。

这里是 32 位 x86 可执行文件上的调试会话的简单转储：

```
d:\temp\C++11>gdb test.exe
GNU gdb (GDB) 7.5
Copyright (C) 2012 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "i686-pc-mingw32".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from d:\temp\C++11\test.exe...(no debugging symbols found)...don
e.
(gdb) start
Temporary breakpoint 1 at 0x4013c1
Starting program: d:\temp\C++11\test.exe
[New Thread 340.0x1bc0]

Temporary breakpoint 1, 0x004013c1 in main ()
(gdb) print $eax
$1 = 1
(gdb) info register $eax
eax            0x1      1
(gdb) info register
eax            0x1      1
ecx            0x28ff30 2686768
edx            0x8e3c8  582600
ebx            0x7efde000       2130567168
esp            0x28ff08 0x28ff08
ebp            0x28ff18 0x28ff18
esi            0x0      0
edi            0x0      0
eip            0x4013c1 0x4013c1 <main+17>
eflags         0x202    [ IF ]
cs             0x23     35
ss             0x2b     43
ds             0x2b     43
es             0x2b     43
fs             0x53     83
gs             0x2b     43
(gdb) print *(int *)$esp
$2 = 2686768
(gdb) print *(int *)($esp+8)
$3 = 0
(gdb) 
```

# java - 在servlet中抛出自定义异常

> ID：13282753
> 
> 赞同：3
> 
> 时间：2012-11-08T05:04:28.790
> 
> 标签：java, jakarta-ee, exception, servlets, servlet-3.0

每当发生某些特定问题时，我想`exception`从 servlet 中抛出一个类似于以下内容的 custom 。

```
public class CustomException extends Throwable {

    private String[] errArray;

    public CustomException(String[] errArray){
        this.errArray = errArray;
    }

    public String[] getErrors(){
        return errArray;
    }

} 
```

然后，当引发此异常时，我想将用户重定向到特定的错误页面。

```
<error-page>
    <exception-type>com.example.CustomException</exception-type>
    <location>/WEB-INF/jsp/errorPage.jsp</location>
</error-page> 
```

这是错误页面，我想使用异常隐式对象。

```
<%@ page isErrorPage="true" %>
<%@ taglib prefix="my" tagdir="/WEB-INF/tags" %>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1" %>

<my:head title="Error"></my:head>
<body>
    <% String errArray = exception.getErrors(); %>
</body>
</html> 
```

现在，当我添加servlet方法`CustomException`的声明时，就会出现问题。我收到以下错误：`throws``doGet`

```
Exception CustomException is not compatible with throws clause in HttpServlet.doGet(HttpServletRequest, HttpServletResponse) 
```

现在我该如何克服这个问题？甚至可以自定义这样的异常并在抛出它时转发到错误页面？或者还有其他方法吗？提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T05:06:54.467

`HttpServlet`类`doGet`抛出`ServletException`如下声明：

```
 protected void doGet(HttpServletRequest req,
                 HttpServletResponse resp)
          throws ServletException,
                 java.io.IOException 
```

请使您`CustomException`的扩展`ServletException`符合方法规范。

编辑：在你的error.jsp中，得到错误：

```
<% String[] errArray = null; 
  if(exception instanceof CustomException) {
     errArray = (CustomException)exception.getErrors();
  } 
%> 
```

**请注意：**它返回`String[]`

# linux - 如何从客户端在服务器上执行脚本？

> ID：13282757
> 
> 赞同：1
> 
> 时间：2012-11-08T05:04:53.380
> 
> 标签：linux, shell, client-server, pipe, popen

我有一个 shell 脚本放置在充当服务器的 linux 机器的根目录中。我想从客户端执行该脚本

可以使用 popen 来实现这个或任何其他可用的替代方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:23:39.383

以下是如何执行此操作的示例：

```
ssh root@127.0.0.1 "( cd /var && chmod +x my_script.sh && ./my_script)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T07:18:53.220

您可以从客户端计算机使用“ssh（服务器）（使用路径运行的脚本/命令）”。

# android - 鉴于我添加了额外数据，如何取消特定警报

> ID：13282758
> 
> 赞同：1
> 
> 时间：2012-11-08T05:05:03.707
> 
> 标签：android, android-alarms

我正在创建具有不同 ID 的多个警报，假设我创建了警报 1、2、3，我只想取消 2。你能指导我怎么做吗？我确实在 SO 上进行了搜索，但我没有找到任何关于在取消警报时是否必须将“相同的额外数据”添加到挂起的信息，所以我想我会问你，看看你会怎么做

这是我创建警报的方式

```
 AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);

    Intent broadcast_intent = new Intent(this, AlarmBroadcastReceiver.class);
    broadcast_intent.putExtra("Tag", Object1);
    broadcast_intent.putExtra("Tag2", Object2);

   for(int i=1;i<=3;i++){       
       PendingIntent pendingIntent = PendingIntent.getBroadcast(this, i,  broadcast_intent, PendingIntent.FLAG_UPDATE_CURRENT);

       alarmManager.set(AlarmManager.RTC_WAKEUP, triggerAtTime, pendingIntent);

   } 
```

如何取消闹钟 2？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:15:04.877

它为我工作：-----

```
 buttonCancel.setOnClickListener(new Button.OnClickListener(){

  @Override
 public void onClick(View arg0) {

AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
         pendingIntent = PendingIntent.getBroadcast(AndroidAlarmService.this, 0, broadcast_intent ,PendingIntent.FLAG_CANCEL_CURRENT);             
alarmManager.cancel(pendingIntent);

        // Tell the user about what we did.
        Toast.makeText(AndroidAlarmService.this, "Cancel!", Toast.LENGTH_LONG).show();

 }}); 
```

# javascript - 谷歌地图加载两次

> ID：13282759
> 
> 赞同：2
> 
> 时间：2012-11-08T05:05:09.457
> 
> 标签：javascript, jquery, google-maps

我有一个特殊的情况，真的可以使用一些帮助。我有一个 html 构建器，每次刷新站点时，它都会添加额外的脚本标签。这是一个严重的问题，因为我使用的是 Google Maps API，并且每次刷新页面时它都会不断添加以下脚本标记：

```
<script src="https://maps.gstatic.com/intl/en_us/mapfiles/api-3/9/19/main.js" type="text/javascript"></script> 
```

不幸的是，这是我能够为这个项目开发页面的唯一方法。（你可以想象我的沮丧>.<）。

基本上，如果这个脚本标签在 html 文档中存在多次，它会引发一个错误`Uncaught TypeError: Object #<Object> has no method 'Load'`，阻止 Google Maps API 呈现我的地图。

**我的问题：**

有什么方法可以阻止 Google 的 API 动态添加此脚本标签，或者在文档有机会加载它之前将其删除，或者让文档完全忽略它？任何帮助都会帮助我今天早上早点入睡:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T06:08:26.200

您不应该使用该包含。使用[记录在案的包括](https://developers.google.com/maps/documentation/javascript/tutorial#Loading_the_Maps_API)：

```
 <script type="text/javascript"
  src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=SET_TO_TRUE_OR_FALSE">
 </script> 
```

其中密钥是 API 控制台密钥，不是必需的，传感器是您是否使用位置传感器。

# php - 显示来自多个表 SQL/PHP 的结果

> ID：13282765
> 
> 赞同：1
> 
> 时间：2012-11-08T05:05:34.700
> 
> 标签：php, mysql

我目前有一个包含 12 个表的数据库。我正在执行 php 查询以从数据库中提取信息，但没有显示任何内容。单独的查询桥接了所有以具有相关外键的表开头的表`schedule`。我是否需要从表开始查询`class`并与其他表桥接？

[桌子设计 - 图片](http://webprolearner.ueuo.com/class_des/table_structure.php)

如果你想复制我的设计[-QUERY](http://webprolearner.ueuo.com/class_des/query_create.php)

```
$query = ("SELECT  class_name, class_caption, class_credit_hours, class_description
                FROM schedule 
                INNER JOIN section 
                ON class.id = section.class_id
                INNER JOIN faculty
                ON faculty.id = section.faculty_id
                INNER JOIN faculty
                ON faculty.id = office_hours.faculty_id
                INNER JOIN faculty_titles
                ON faculty_titles.faculty_id = faculty.id
                INNER JOIN faculty_education
                ON faculty_education.faculty_id = faculty.id 
                INNER JOIN section
                ON section.faculty_id = faculty.id 
                INNER JOIN class
                ON class.id = section.class_id
                INNER JOIN major_class_br
                ON major_class_br.class_id = class.id
                INNER JOIN  major_minor 
                ON major_class_br.major_minor_id = major_minor.id                
                 ");
      //execute query
      $result = mysql_query($query);

     if ($result){

    $totalhours = 0;

    while ($row = mysql_fetch_assoc( $result ))
    {  
        print "<b>" . $row['class_name'] . "</b><br>";
        print $row['class_caption'] . "<br>";
        print $row['class_description'] . "<br>";
        print $row ['class_credit_hours'] . "hrs. <br>";
        print "------------------------------<br />";
        $totalhours += $row['class_credit_hours']; 
    }   
    } 
```

[SQL小提琴查询](http://sqlfiddle.com/#!2/28c29/2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:25:54.483

```
SELECT  class_name, class_caption, class_credit_hours, class_description
             FROM schedule 
            INNER JOIN section 
            ON class.id = section.class_id 
```

这里有一个问题：您正在使用字段“class.id”进行 INNER JOIN，但表“class”不在 JOIN 的任何一侧。所以它不会工作。

查询应该像这样开始：

```
SELECT  class_name, class_caption, class_credit_hours, class_description
             FROM class
            INNER JOIN section 
            ON class.id = section.class_id 
```

然后与表'schedule'与它共享一个公共索引的表进行JOIN（我猜它会是类）。

完整的查询应该是这样的：

```
SELECT  class.class_name, class.class_caption, class.class_credit_hours, class.class_description
            FROM class
            INNER JOIN section 
            ON class.id = section.class_id
            INNER JOIN faculty 
            ON faculty.id = section.faculty_id OR faculty.id = office_hours.faculty_id
            INNER JOIN faculty_titles
            ON faculty_titles.faculty_id = faculty.id
            INNER JOIN faculty_education
            ON faculty_education.faculty_id = faculty.id 
            INNER JOIN major_class_br
            ON major_class_br.class_id = class.id
            INNER JOIN major_minor 
            ON major_class_br.major_minor_id = major_minor.id
            INNER JOIN sched_sect_br 
            ON sched_sect_br.section_id =  section.id
            INNER JOIN schedule
            ON schedule.id = sched_sect_br.schedule_id
            INNER JOIN semester
            ON semester.id = schedule.semester_id
            INNER JOIN office_hours
            ON schedule.id = office_hours.schedule_id AND faculty.id = office_hours.faculty_id 
```

此查询从图表中的所有表中获取信息，除了事件表之外，与任何其他表无关。但是这个查询仍然应该在 SELECT 上有更多的字段（你只是类表中的选择字段，我知道你也想要其他 10 个表中的数据），做这个简单的添加 'tablename.field' 到SELECT 中的字段列表。

# android - Twitter4j 截断推文

> ID：13282770
> 
> 赞同：0
> 
> 时间：2012-11-08T05:05:55.087
> 
> 标签：android, twitter, twitter4j

我目前正在制作一个测试应用程序，以从 Twitter 帐户中检索推文并将其显示在屏幕上。

我所有的代码都运行良好，但是一些推文被截断了。

任何人都知道可能导致此问题的原因以及如何解决它？

检索推文的代码：

```
Twitter twitter = new TwitterFactory().getInstance();
List<Status> statuses = null;
try 
{
    statuses = twitter.getUserTimeline("usu_unitec");
} 
catch (TwitterException e) 
{
    e.printStackTrace();
}
ArrayList<String> news = new ArrayList<String>();
for (Status status : statuses) 
{
    news.add(status.getText());
}
return news; 
```

推特账号：

[https://twitter.com/USU_Unitec](https://twitter.com/USU_Unitec)

推文被截断的示例：

> 你今天早上好了吗？你觉得呢？我们非常震惊...看看她... http ...
> 
> @USU_Unitec USU 你照顾我们学生真是太棒了，如果我在校园里，我会来拿的，但我正在休学假......
> 
> 提醒您查看我们的暑期学校课程。您无需全日制学习即可获得成功！[http://tc](http://t.c) ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:35:57.573

为什么不直接使用 Twitter JSON 或 XML API 调用？有了这个，您可以获取所有 Tweets 的全长 :)

```
https://dev.twitter.com/docs/api/1/get/statuses/user_timeline 
```

# java - 复制到带有中断和更多文本的剪贴板脚本

> ID：13282773
> 
> 赞同：1
> 
> 时间：2012-11-08T05:06:27.227
> 
> 标签：java, html

我正在尝试为工作文档制作一个有趣的脚本。这是我到目前为止所拥有的。

```
<script type="text/javascript">
    function ClipBoard() {
        window.clipboardData.setData('text',
                      document.getElementById('name').value +
                      document.getElementById('phone').value +
                      document.getElementById('serial').value +
                      document.getElementById('new').value +
                      document.getElementById('cuts').value +
                      document.getElementById('agts').value
                     );
    }

</script>
<form id="form1">
    Name: <input id="name" /><br />
    Phone Number: <input id="phone" maxlength="10" /><br />
    Serial Number: <input id="serial" maxlength="10" /><br />
    New/Existing: <input id="new" /><br />
    CU TS: <input id="cuts" /><br />
    Agent TS: <input id="agts" /><br />
    <input type="button" onclick="ClipBoard()" value="Copy"/>
    <input type="reset" />` 
```

现在，在我粘贴输入后没有“中断”，复制的文本复制在一行中。例如：namephoneserialnew 等。我想要：Name Phone Serial New Etc. with break。

如果可能的话。

此外，在复制输入时，有没有办法在输入之前复制文本。例如：姓名：（输入），电话号码：（输入）等。

任何建议都会非常有帮助；这只是一个基本的脚本，没什么大不了的。谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-09T07:04:14.550

尝试在 ctl 值之后添加 '\r\n'。

```
function ClipBoard() {
    window.clipboardData.setData('text',
                  document.getElementById('name').value + '\r\n' + 
                  document.getElementById('phone').value + '\r\n' + 
                  document.getElementById('serial').value + '\r\n' + 
                  document.getElementById('new').value + '\r\n' + 
                  document.getElementById('cuts').value + '\r\n' + 
                  document.getElementById('agts').value
                 );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:25:36.880

JavaScript 不会以这种方式生成换行符。您可以尝试添加`"<br>"`代码，这可能会导致换行符。

```
function ClipBoard() {
        window.clipboardData.setData('text',
                      document.getElementById('name').value + "<br>"
                      document.getElementById('phone').value + "<br>" 
                      document.getElementById('serial').value + "<br>"
                      document.getElementById('new').value + "<br>"
                      document.getElementById('cuts').value + "<br>"
                      document.getElementById('agts').value
                     );
    } 
```

如果你想要标签之前的值，你可以在它们之前放一个字符串。

```
function ClipBoard() {
            window.clipboardData.setData('text',
                          "Name: " + document.getElementById('name').value + "<br>"
                          "Phone: " + document.getElementById('phone').value + "<br>" 
                          "Serial: " + document.getElementById('serial').value + "<br>"
                          "New: " + document.getElementById('new').value + "<br>"
                          "Cuts: " + document.getElementById('cuts').value + "<br>"
                          "Agts: " + document.getElementById('agts').value
                         );
        } 
```

顺便说一句，您忘记了 HTML 中的结束标记。

# c# - 将 Lambda 表达式 Group By 转换为 LINQ 版本

> ID：13282774
> 
> 赞同：0
> 
> 时间：2012-11-08T05:06:37.423
> 
> 标签：c#, .net, linq

请考虑以下代码：

```
var result = data
        .GroupBy(a => groupA.Contains(a.Group) ? "A" : 
                      groupB.Contains(a.Group) ? "B" : 
                      "N/a")
        .Select(a => new
        {
            KEY = a.Key,
            VALUE = a.Count()
        }); 
```

任何人都可以帮助如何转换`GroupBy`为`LINQ`版本？

谢谢

* * *

**编辑 1)**

我想要这种风格：

```
from a in ....
group a by ....
select ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T05:26:34.770

你可以尝试这样的想法，但如果它有效，我会坚持你所拥有的

```
 var result=   from p in data
    group p by new 
   { Criterion = p.Contains(p.Group) ? "A" : p.Contains(p.Group) ? "B" : "N/a" } 
    into g  select new {KEY = g.Key, VALUE = g.Count()}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T05:36:55.510

试试这个，

```
 var result = from a in data
                     group a by groupA.Contains(a.Group)
                                    ? "A"
                                    : groupB.Contains(a.Group)
                                          ? "B"
                                          : "N/a"
                     into d
                     select new
                                {
                                    KEY = d.Key,
                                    VALUE = d.Count()
                                }; 
```

# php - 注销会话未销毁

> ID：13282776
> 
> 赞同：1
> 
> 时间：2012-11-08T05:06:48.347
> 
> 标签：php, session

我创建了一个注销页面并通过 href 链接调用它，但它不工作会话并没有破坏。帮帮我，代码n链接如下。

注销.php

```
 <?php 
    session_start();
    session_unset();
    session_destroy();
    header("location:index.php"); 
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:14:51.560

1.  确保文件在同一台服务器上。
2.  将此代码写在其他一切之上。
3.  另外使用此代码

    ```
    session_unset();
    session_write_close(); 
    ```

4.  session_destroy 只破坏服务器端的会话而不是 cookie，请确保您没有使用 cookie，如果是，请参见下面的代码

设置 cookie

```
setcookie("cookieName", $value, time()+3600); 
```

取消设置 Cookie

```
setcookie("cookieName", $value, time()-36000); 
```

有关会话的更多详细信息：[PHP: session_destroy - Manual](http://php.net/manual/en/function.session-destroy.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:08:53.800

您可能需要重新生成会话 ID：

`session_regenerate_id();`

# numpy - 为什么我的 numpy 数组的形状没有改变？

> ID：13282778
> 
> 赞同：2
> 
> 时间：2012-11-08T05:07:05.303
> 
> 标签：numpy, matplotlib

我用图像中的数据制作了一个 numpy 数组。我想将 numpy 数组转换为一维数组。

```
import numpy as np
import matplotlib.image as img

if __name__ == '__main__':

  my_image = img.imread("zebra.jpg")[:,:,0]
  width, height = my_image.shape
  my_image = np.array(my_image)
  img_buffer = my_image.copy()
  img_buffer = img_buffer.reshape(width * height)
  print str(img_buffer.shape) 
```

128x128 图像在这里。

![在此处输入图像描述](../Images/85b61b013efbeb1d342e87a60af49274.png)

但是，该程序会打印出 (128, 128)。我想`img_buffer`成为一个一维数组。如何重塑这个数组？为什么 numpy 实际上不会将数组重塑为一维数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T05:10:43.850

`.reshape`返回一个新数组，而不是就地重塑。

顺便说一句，您似乎正在尝试获取图像的字节串 - 您可能想要使用它`my_image.tostring()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T05:10:11.050

[`reshape`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.reshape.html)不起作用。您的代码不起作用，因为您没有将返回的值分配`reshape`给`img_buffer`.

如果要将数组展平为一维，[`ravel`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ravel.html)或者[`flatten`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.flatten.html)可能是更简单的选择。

```
>>> img_buffer = img_buffer.ravel()
>>> img_buffer.shape
(16384,) 
```

否则，你会想要这样做：

```
>>> img_buffer = img_buffer.reshape(np.product(img_buffer.shape))
>>> img_buffer.shape
(16384,) 
```

或者，更简洁地说：

```
>>> img_buffer = img_buffer.reshape(-1)
>>> img_buffer.shape
(16384,) 
```

# android - json-jackson 数组解析

> ID：13282780
> 
> 赞同：0
> 
> 时间：2012-11-08T05:07:09.477
> 
> 标签：android, arrays, jackson

像这样的json

```
 {
      "resultCode": "0000",
      "resultMsg": "",
      "pageCount": "6",
      "curPage": "1",
      "infoItems": [
        {
          "sID": "268",
          "location": "222",
          "unit": "",
          "time": "2012-11-02 17:51:46",
          "longitude": "111",
          "latitude": "222",
          "reason": "some",
          "dealContent": ""
        },
        {
          "sID": "267",
          "location": "fgg",
          "unit": "yyg",
          "time": "2012-11-02 17:49:14",
          "longitude": "111",
          "latitude": "222",
          "reason": "some",
          "dealContent": ""
        }
    ]
} 
```

我怎么能把它解码成java类？

我写了一个像

```
public class UploadedInfoObjEx {
    public String resultCode;
    public String resultMsg;
    public String pageCount;
    public String curPage;
    public Items[] infoItems;

    public class Items {
        private String sID;
        private String location;
        private String unit;
        private String longitude;
        private String latitude;
        private String reason;
        private String time;
        private String dealContent;
    }

} 
```

并读取 json

```
 ObjectMapper mapper = new ObjectMapper();
            UploadedInfoObjEx uploadedInfoObjEx = mapper.readValue(jsonString, UploadedInfoObjEx.class); 
```

错误是

```
org.codehaus.jackson.map.JsonMappingException: No suitable constructor found for type [simple type, class com.rayboot.wl.object.UploadedInfoObjEx$Items]: can not instantiate from JSON object (need to add/enable type information?) 
```

在 [来源：java.io.StringReader@4150c480；行：1，列：81]（通过引用链：com.rayboot.wl.object.UploadedInfoObjEx["infoItems"]）

任何人都可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T05:10:31.483

我认为您需要将`Items`班级中的变量公开。您可能还需要将其设为静态：

```
public static class Items {
    public String sID;
    public String location;
    public String unit;
    public String longitude;
    public String latitude;
    public String reason;
    public String time;
    public String dealContent;
} 
```

如果这不起作用，您可以尝试移动`Items`到它自己的文件。

# android - 来自 web 服务的限制字符 ksoap2 接收器有多少？

> ID：13282782
> 
> 赞同：0
> 
> 时间：2012-11-08T05:07:26.370
> 
> 标签：android

我在我的 android 应用程序中使用 ksoap2 调用 web 服务。我想得到一个大数据。我进行了测试：如果数据接收器 (json) 大约 2.000.000 个字符，我的应用程序运行正常，如果数据接收器 (json) 大约 6.000.000 个字符，我的应用程序运行失败（由于 OutOfMemoryError 强制关闭）。你知道正确吗：来自 web 服务的多少个限制字符 ksoap2 接收器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:20:38.413

字节限制基于您的应用程序/设备的内存限制，如果结果很大，您可以做的是在解析之前先将其存储文件或使用流解析器之一，即：

JsonReader - [http://developer.android.com/reference/android/util/JsonReader.html](http://developer.android.com/reference/android/util/JsonReader.html)

或者如果您使用的是 Gson，请尝试

JsonStreamParser - [http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonStreamParser.html](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonStreamParser.html)

# python - python函数不返回列表

> ID：13282783
> 
> 赞同：1
> 
> 时间：2012-11-08T05:07:30.877
> 
> 标签：python, recursion, return-value

我无法弄清楚为什么我的 Reverse Cuthill–McKee 算法的实现会返回错误的位置。基本上，它会产生正确的结果，但是当我运行代码时，它会返回一个不同的值。

这是带有图表的完整代码，有人可以解释一下这种行为吗？

```
import numpy as np

A=np.diag(np.ones(8))

nzc=[[4],[2,5,7],[1,4],[6],[0,2],[1,7],[3],[1,5]]

for i in range(len(nzc)):
    for j in nzc[i]:
        A[i,j]=1

# define the Result queue
R = ["C"]*A.shape[0]

def getDegree(Graph):
    """
    find the degree of each node. That is the number
    of neighbours or connections.
    (number of non-zero elements) in each row minus 1.
    Graph is a Cubic Matrix.
    """
    degree = [0]*Graph.shape[0]
    for row in range(Graph.shape[0]):
        degree[row] = len(np.flatnonzero(Graph[row]))-1
    return degree

# find the starting point, the parent
degree = getDegree(A)

adj = getAdjcncy(A)
degree2=degree[::]
adj2 = adj[::]
digar=np.array(degree2)
pivots = list(np.where(digar == digar.min())[0])

def main_loop2(deg,start, adj,R):
    degcp=deg[:]
    digar=np.array(deg)
    # use np.where here to get indecies of minimums
    if start not in R:
        R.append(start)
        degcp.pop(start)
        if start in pivots:
           pivots.pop(start)
           print "p: ", pivots
    Q=adj[start]
    for idx, item in enumerate(Q):
        if item not in R:
            R.append(item)
            print "R", R
    print "starts", adj[R[-1]]
    Q=adj[R[-1]]
    if set(Q).issubset(set(R)) and len(R) < len(degcp) :
         print "will now look for new pivot"
         p = pivots[0]
         pivots.pop(0)
         print "pivots", pivots
         print "starting with" , p
         main_loop2(deg,p,adj,R)
         return 'this is never reached'
    elif len(R) < len(degcp):
         main_loop2(deg,R[-1],adj,R)
         return 'wrong'
    else:
         print "will return R"
         print type(R)
         return R      

inl=[]
Res = main_loop2(degree2,0, adj,inl)

print(Res) 
```

### 输出：

```
Degrees: [1, 3, 2, 1, 2, 2, 1, 2]
0
p:  [3, 6]
R [0, 4]
starts [0, 2]
R  2 degcp 7
R [0, 4, 2]
starts [1, 4]
R  3 degcp 8
R [0, 4, 2, 1]
starts [2, 5, 7]
R  4 degcp 8
R [0, 4, 2, 1, 5]
R [0, 4, 2, 1, 5, 7]
starts [1, 5]
will now look for new pivot
pivots [6]
starting with 3
R [0, 4, 2, 1, 5, 7, 3, 6]
starts [3]
will return R
<type 'list'>
wrong 
```

所以问题是：
为什么函数在递归的所有循环中都能正常工作，但在最后一个循环中，它返回值`wrong`？输出显示 last`else`只到达了一次，但是没有返回一个列表，我在这里很无奈。如果有人对此有所了解，我将不胜感激。

### 更新：

我发现了另一个[关于 python 和递归](https://stackoverflow.com/questions/937000/python-recursion-and-return-statements)的问题，当我在那里应用解决方案时，我的代码有效！

所以，而不是`main_loop2(deg,R[-1],adj,R)`我写 的每一个`retrun main_loop2(deg,R[-1],adj,R)`，现在的输出是：

```
... snip ...
R [0, 4, 2, 1, 5, 7]
starts [1, 5]
will now look for new pivot
pivots [6]
starting with 3
R [0, 4, 2, 1, 5, 7, 3, 6]
starts [3]
will return R
<type 'list'>
[0, 4, 2, 1, 5, 7, 3, 6] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T05:15:49.420

递归调用的顶层进入这里：

```
elif len(R) < len(degcp):
     main_loop2(deg,R[-1],adj,R)
     return 'wrong' 
```

递归调用内部发生的任何事情`main_loop2`都无关紧要。当它回来时，它将执行该`return 'wrong'`语句。您需要实际*返回*最内层调用产生的值，一直返回到顶层 - 这不会神奇地发生在您身上。

你是故意的`return main_loop2(...)`吗？

# iphone - 我们可以为 iPhone 和 iPad 开发单个应用程序吗

> ID：13282784
> 
> 赞同：-2
> 
> 时间：2012-11-08T05:07:31.300
> 
> 标签：iphone, ios, ipad

我是 iOS 开发新手，目前正在为 iPhone 和 iPad 开发应用程序。

我的问题是我们是否可以开发一个可以在 iPhone 和 iPad 上运行的应用程序，以匹配它们不同的屏幕尺寸或分辨率。或者我是否需要编译 2 个不同的应用程序来匹配 iPad 和 iPhone 中不同的屏幕尺寸或分辨率？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T05:12:59.047

我们可以！通用应用程序是解决方案！

阅读此博客：[http ://www.kotancode.com/2011/04/05/ios-universal-apps/](http://www.kotancode.com/2011/04/05/ios-universal-apps/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T05:16:55.157

我们可以开发单个应用程序来实现这一点。只需在创建新项目时选择设备系列作为通用。您将可以选择为 iphone 和 ipad 准备不同的 Xib。在代码中，您可以检查设备或在分配设备时使用正确的命名。

例如，

对于 iPhone -

```
oneViewController *oneView = [[oneViewController alloc]initWithNibName:@"oneViewController" bundle:nil] autorelease]; 
```

对于 ipad - 您可以只使用`"oneViewController~ipad"`xib 名称。这将自动为 ipad 加载 xib。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T05:13:36.617

您可以为 iPhone 和 iPad 制作一个通用应用程序。使用故事板或 nib 文件为两者创建不同的布局。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T05:15:13.893

首先，您不需要编译 2 个不同的应用程序来匹配 iPad 和 iPhone 中不同的屏幕尺寸或分辨率。AppStore 中已经有通用应用程序。试试这个：[Universal-iOS-App-Template](https://github.com/kwylez/Universal-iOS-App-Template)这个问题：[iPad/iPhone 通用应用](https://stackoverflow.com/questions/5430202/ipad-iphone-universal-app)

# sql-server - 一列中有冗余数据的表与多表

> ID：13282785
> 
> 赞同：0
> 
> 时间：2012-11-08T05:07:32.990
> 
> 标签：sql-server, sql-server-2008, database-design

我有一个场景，其中我让用户将他们的自定义首选项上传到我们的实用程序正在完成的转换中。所以，我们面临的问题是

> 我们是否应该将这些自定义映射保存在一个带有额外的 UID 或 GUID 列的表中，

或者

> 我们是否应该为每个在我们这里注册的用户即时创建表格，并为他们的自定义映射完全提供一个单独的表格？

我们更倾向于只为自定义映射提供一个额外的列和一个表，但是这一列中的冗余数据对性能有影响吗？另一方面，逻辑要求我们规范化我们的表格并拥有单独的表格。我很困惑该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T05:11:39.517

通常的做法是使用带有用户 ID 的单个表。如果有经常重用的首选项，您可以将它们重构到一个单独的表中并一次性引用它们，但这取决于您。

为什么为每个用户创建一个表是个坏主意？好吧，如果您最终有 100 万用户，我认为您不希望数据库中有 100 万张表。这样做还可以保证您的查询充其量是笨拙的，通常比它们应该的要慢，并且通常是动态生成和`EXEC`编辑的——通常是最后的选择，不一定安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:00:09.083

我继承了一个系统，在该系统中，最初的开发人员选择了每个客户端一个表的方法。我们现在正在重写系统！从开发人员的角度来看，您最终会遇到一团乱麻的动态 SQL 和循环。DBA 会不高兴，因为他们每天早上醒来都会看到一个完全不同的数据库，这使得性能调优和维护变得不可能。

您可以在 users 表中有一个额外的 BLOB 或 XML 列，用于存储首选项。这称为属性包方法，但我也不建议这样做，因为它在许多情况下会影响查询性能。

在这种情况下，最好的方法是通过规范化来解决问题。一个单独的属性表，通过 PK/FK 关系连接到 users 表。我不建议使用 GUID。此 GUIiD 可能最终会成为 PK，这意味着您将拥有一个 16 字节的聚集索引，并且这也将传递到表上的所有非聚集索引。您可能还会在 Users 表中为此构建一个非集群索引。此外，您可能会陷入生成这些 GUID 的陷阱，`NEW_ID()`而不是`NEW_SEQUENTIALID()`会导致大量碎片。

如果您采用规范化方法并且您担心以表格格式返回两个表中的结果，那么您可以简单地使用`PIVOT`运算符。

# linux - 列出当前目录和所有子目录中特定大小的文件

> ID：13282786
> 
> 赞同：44
> 
> 时间：2012-11-08T05:07:44.733
> 
> 标签：linux, bash, unix, command

如何在当前目录及其子目录中显示所有大于 10k 字节的文件。

试过`ls -size +10k`了，但没有奏效。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-11-08T05:13:42.680

`find . -size +10k -exec ls -lh {} \+`

第一部分与@sputnicks 答案相同，并成功找到目录中超过 10k 的所有文件（不要将 k 与 K 混淆），我的补充是，第二部分然后执行`ls -lh`或 ls 列出（-l）文件按人类可读大小（-h）。如果您愿意，请否定 h。当然 the`{}`是文件本身，而 the`\+`只是替代`\;`

在实践中`\;`会重复或：

`ls -l found.file; ls -l found.file.2; ls -l found.file.3`

将其`\+`显示为一个语句或：

`ls -l found.file found.file.2 found.file.3`

更多关于[\; vs +](https://stackoverflow.com/a/6085192/638649)与`find`

另外，您可能希望列表按尺寸排序。这是相对容易实现的。我可以`-s`选择`ls`, 所以`ls -ls`然后通过管道将其`sort -n`以数字方式排序

这将成为：

`find . -size +10k -exec ls -ls {} \+ | sort -n`

或以相反的顺序添加 -r ：

`find . -size +10k -exec ls -ls {} \+ | sort -nr`

最后，你的标题说在目录中找到**最大**的文件。您可以通过将代码管道传输到`tail`

`find . -size +10k -exec ls -ls {} \+ | sort -n | tail -1` 会在目录及其子目录中找到最大的文件。

请注意，您还可以使用 -S 按大小对文件进行排序，并且不需要排序。但是要找到最大的文件，您需要使用 head 所以

`find . -size +10k -exec ls -lS {} \+ | head -1`

使用 -S 而不是这样做的好处`sort`是一，您不必键入`sort -n`，二您还可以使用`-h`人类可读的大小选项。这是我最喜欢使用的一种，但不适用于旧版本的`ls`，例如我们有一个旧的 centOs 4 服务器在工作`-h`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-08T05:09:34.533

尝试这样做：

```
find . -size +10k -ls 
```

如果你想使用二进制`ls`：

```
find . -size +10k -exec ls -l {} \; 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-07-10T16:38:07.240

我意识到这项任务可能早就结束了。对于其他任何人：

你太复杂了。

```
find . -size +10k 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-10-09T18:59:07.163

我将添加到@matchew 答案（没有足够的业力点来评论）：

```
find . -size +10k -type f -maxdepth 1 -exec ls -lh {} \; > myLogFile.txt 
```

-type f ：指定常规文件类型

-maxdepth 1 ：确保它只查找当前目录中的文件

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-08T08:19:07.850

你可以这样使用[ls](http://unixhelp.ed.ac.uk/CGI/man-cgi?ls)：

```
ls -lR | egrep -v '^d' | awk '$5>10240{print}' 
```

解释：

```
ls -lR         # list recursivly
egrep -v '^d'  # only print lines which do not start with a 'd'. (files) 
```

仅打印第五列（大小）大于 10240 字节的行：

```
awk '$5>10240{print}' 
```

# ios - 如何在iOS中为每个附件图像设置名称

> ID：13282792
> 
> 赞同：0
> 
> 时间：2012-11-08T05:09:04.743
> 
> 标签：ios, mfmailcomposeviewcontroller

我想在我的 iOS 应用程序中发送电子邮件。该邮件应包含 2 张图片作为附件。每个图像的名称也应该出现在每个图像之后。但我不知道如何使用附件设置此名称。我用过`MFMailComposeViewController`。这不是电子邮件正文。谁能帮我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:13:04.633

该`MFMailComposeViewController addAttachmentData:mimeType:fileName:`方法的最后一个参数是您为附件指定的名称。它可以是您想要的任何东西，但它应该是一个合理的名称，例如`image1.png`或其他。

# spring - 有没有办法可以使用 jsp 中的对象列表将数据放入 dto？

> ID：13282793
> 
> 赞同：-2
> 
> 时间：2012-11-08T05:09:22.390
> 
> 标签：spring, jsp

我有一个`CustomerDto`成员

```
List<Services> serviceList; 
```

并且服务是另一个 Dto，其中包含以下字段；

```
private int serviceId;
private String serviceName; 
```

我需要做的是创建一个 JSP，它将填充客户 DTO 并填充多个服务，这些服务将设置为 serviceList，它是一个列表。

我当前使用的 JSP 页面包含以下代码来获取和显示服务列表。目前我正在做的是显示文本字段以输入服务名称，如果用户想输入更多服务，那么他/她使用“+”按钮添加文本字段。为了在 DTO 中获取这些值，我使用了一个仅包含服务名称的列表。在数据库中，我有一个单独的服务表。

```
<c:forEach var="i" begin="0" end="${countServiceName-1 }" >
    <c:set var="divName" value="my${i}Div" />
    <div style="margin-top: 5px" id="${divName }">
        <input type="text"name="serviceList" value="${customerRegistrationDto.serviceList[i] }" title="Service Name" maxlength="200" style="width:400px;vertical-align:middle;"/>
        <a href="javascript:removeInputBox('${divName }')" ><img src="<c:url value="/resources/img/common/x.png" />" alt="" style="vertical-align:middle;margin-left: 2px"/></a>
    </div> 
</c:forEach> 
```

无论如何我可以做到这一点吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T06:06:38.963

Yes you should use AutoPopulatingList, [example1](http://java-sandbox.cloudfoundry.com/autopopulatinglist) & [example2](http://blog.richardadamdean.com/?p=12). This will require change in MyRequest entity.

# c - 无法使用 ipv6 连接 2 台机器（TCP 服务器客户端）

> ID：13282809
> 
> 赞同：1
> 
> 时间：2012-11-08T05:11:03.187
> 
> 标签：c, ipv6

我试图使用 ipv6 做一个简单的 tcp 服务器客户端。它适用于 ipv6 和 ipv4 的同一台机器，但在不同的机器上时，ipv6 无法连接。

**服务器代码**

```
int main(int argc, char* argv[])
{
    int sockfd,new_fd,rv,yes=1; 
    struct addrinfo hints,*servinfo,*p; 
    struct sockaddr_storage their_addr;
    socklen_t addr_size;

    SOCKET listenSocket,clientSocket;
    WSADATA w;

    if (WSAStartup(0x0101, &w) != 0)
    {
        fprintf(stderr, "Could not open Windows connection.\n");
        exit(0);
    }

    //ip=argv[1];
    //port=argv[2];

    memset(&hints,0,sizeof(hints));

    hints.ai_family=AF_INET6;
    hints.ai_socktype=SOCK_STREAM;  
    hints.ai_flags=AI_NUMERICHOST;

    if((rv = getaddrinfo("fe80::c0a8:0160","5002",&hints,&servinfo)) != 0)
    {
        perror("\nGetaddrinfo failed\n");
        return 1;
    }   

    //Creating socket   
    listenSocket = socket(servinfo->ai_family,servinfo->ai_socktype,servinfo->ai_protocol);

    if(listenSocket == INVALID_SOCKET)
    {
        printf("\nSocket failed with error \n");
        WSACleanup();
    }

    //setting non blocking mode
    u_long iMode = 1;
    rv = ioctlsocket(listenSocket,FIONBIO,&iMode);

    if(rv == SOCKET_ERROR)
    {
        printf("\nioctl failed\n");
        WSACleanup();
    }

    rv = bind(listenSocket,servinfo->ai_addr,(int)servinfo->ai_addrlen);

    if(rv == SOCKET_ERROR)
    {
        perror("\nBind: \n");
    }

    freeaddrinfo(servinfo);

    rv = listen(listenSocket,SOMAXCONN);

    if(rv == SOCKET_ERROR)
    {
        perror("listen");
        return 1;
    }

    // now accept an incoming connection:

    char recvbuf[DEFAULT_BUFLEN];
    int buflen = DEFAULT_BUFLEN;
    SOCKET AcceptSocket;

    while (1)
    {
        AcceptSocket = SOCKET_ERROR;

        while (AcceptSocket == SOCKET_ERROR)
        {
            AcceptSocket = accept(listenSocket, NULL, NULL);
        }

        printf("Server: Client Connected!\n");
        listenSocket = AcceptSocket;

        rv = recv(listenSocket,recvbuf,buflen,0);
        break;
    }

    printf("Received %d bytes from client \n",rv);  

    closesocket(listenSocket);
    closesocket(AcceptSocket);

    return 0;

} 
```

**客户代码**

```
int main(int argc,char* argv[])
{
    struct addrinfo hints,*servinfo,*p;
    int rv;
    SOCKET connectSocket;
    WSADATA w;

    if (WSAStartup(0x0101, &w) != 0)
    {
        fprintf(stderr, "Could not open Windows connection.\n");
        exit(0);
    }

    //resetting memory
    memset(&hints,0,sizeof(hints));

    hints.ai_family = AF_INET6;
    hints.ai_socktype = SOCK_STREAM;    
    hints.ai_flags = AI_NUMERICHOST;

    //getting values

    if((rv = getaddrinfo("fe80::c0a8:160","5002",&hints,&servinfo)) != 0)
    {
        perror("Getaddrinfo failed");
        return 1;
    }

    //Creating socket
    connectSocket = socket(servinfo->ai_family,servinfo->ai_socktype,servinfo->ai_protocol);

    if(connectSocket == INVALID_SOCKET)
    {
        perror("Socket create : ");
    }

    rv = connect(connectSocket,servinfo->ai_addr,(int)servinfo->ai_addrlen);
    if(rv == SOCKET_ERROR)
    {
        perror("Socket Connect : ");
    }

    //free memory
    freeaddrinfo(servinfo);

    // Send and receive data.
    int bytesSent;

    char sendbuf[200] = "Client: Sending some test string to server...";
    char recvbuf[200] = "";

    bytesSent = send(connectSocket, sendbuf, strlen(sendbuf), 0);
    printf("Client: send() - Bytes Sent: %ld\n", bytesSent);

    closesocket(connectSocket);
    return 0;
} 
```

目的只是打印传输了多少字节。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T05:41:22.300

看来您正在使用[链接本地地址](https://en.wikipedia.org/wiki/Link-local_address#IPv6)。你确定吗？另外，我建议您先检查防火墙设置。

编辑：尝试包括区域 ID。当您发出`ipconfig`命令提示符时，您应该能够获得区域 ID`fe80::c0a8:0160%21`所在的地址。根据[此答案](https://stackoverflow.com/questions/5746082/ipv6-link-local-address-format)`%21`使用[链接本地地址](https://en.wikipedia.org/wiki/Link-local_address#IPv6)时，这一点很重要。

# javascript - jQuery 一起使用 slideDown 和 replaceWith

> ID：13282810
> 
> 赞同：2
> 
> 时间：2012-11-08T05:11:07.547
> 
> 标签：javascript, jquery, jquery-animate

我有两个 div：div1 和 div2

我正在尝试实现一种效果，其中 div1 动画为透明并且在它的最后，div2 在它的顶部向下滑动（替换 div1）。

这是我尝试过的（[http://jsfiddle.net/RHSgf/4/](http://jsfiddle.net/RHSgf/4/)）：

```
div1.animate({
   opacity: 0.0
}, 2000, function () {
   $(this).replaceWith(div2.hide().slideDown(2000, 'linear', function () {}));
}); 
```

但是在 div1 的动画结束时，div2 并没有那么优雅地向下滑动。

我不知道为什么滑下来这么生涩。感谢您帮助找出正确的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T05:18:36.263

搬出它应该`slideDown`可以`replaceWith`工作：

```
$(this).replaceWith(div2.hide());
div2.slideDown(2000, 'linear'); 
```

[http://jsfiddle.net/elclanrs/RHSgf/5/](http://jsfiddle.net/elclanrs/RHSgf/5/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T06:04:30.303

试试这个并根据您的要求调整时间！

```
<script type="text/javascript">
 $(document).ready(function () 

                      {
                        $("#div2").fadeOut(2000);
                        setTimeout(function () {  $("#div1").slideDown(2000); }, 2000);
                      }
                 );

</script> 
```

# php - 如何正确使用 PHP 获取 AJAX 提交的变量？

> ID：13282817
> 
> 赞同：1
> 
> 时间：2012-11-08T05:11:39.027
> 
> 标签：php, ajax

我有这个 ajax/jquery 代码：

```
var headline = $("input#headline").val();
var subheadline = $("textarea#subheadline").val();
var pics = $("input#pics").val();   
var dataString = 'headline='+ headline + '&subheadline=' + subheadline + '&pics=' + pics;

$(".save-notice").hide();
$.ajax({  
type: "POST",  
url: "web-block/forms/process-001.php",
data: dataString,
success: function() {             
$(".save-notice").show();
$(this).parents(".manage-content-wrap").next(".ribbon-content").fadeIn();
}  
}); 
```

另一方面，我有这个 HTML 表单：

```
<form action="" id="select-block" class="general-form">
<div class="input-wrap">
    <input class="clearme" name="Headline" value="<?php echo $Headline;?>" id="headline"/>
</div>
<div class="input-wrap">
    <textarea class="clearme" name="Sub-Headline" id="subheadline"><?php echo $SubHeadline;?></textarea>
</div>
<label>Bottom Left Image</label>
<div class="up-mask">
    <span class="file-wrapper">
      <input type="file" name="Pics" class="photo" id="pics" />
      <span class="button">
         <span class="default-txt">Upload Photo</span>
      </span>
    </span>
</div><!-- .up-mask -->

<input type="hidden" name="Key" value="<?php echo $Key;?>"/>
<input type="submit" class="submit-btn" value="SAVE" />
<span class="save-notice">Your changed has been saved!</span>
</form> 
```

如您所见， process-001.php 是处理来自 HTML 表单的所有变量的文件。但我很难“捕捉”`$Headline`并`$SubHeadline`通过该表单提交，实际上它也被 Ajax “操纵”......

我尝试在 process-001.php 上使用此代码：

```
$Headline = $_POST['Headline'];
$SubHeadline = $_POST['Sub-Headline']; 
```

但似乎那些变量是空的......如何正确获取AJAX提交的变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T05:15:17.770

尝试数据流

```
var dataString = {
                   headline: headline,
                   subheadline: subheadline,
                   pics:pics
                }; 
```

对于在 php 中进行填充，您需要使用

$标题 = $_POST['标题'];

$SubHeadline = $_POST['subheadline'];

它会正常工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T05:12:59.270

`headline`并且`Headline`不是同一个键。您的密钥需要*完全*匹配。

此外，由于手动构建字符串很快就会变得非常棘手，您可能需要考虑使用对象文字或`serialize()`：

```
data: {
    'foo': 'bar',
    'baz': [1, 2, 3]
} 
```

会有`$_POST['foo'] === 'bar'`和`$_POST['baz'] === array(1, 2, 3)`

您也不应该假设存在任何类型的输入：

```
$headline = (isset($_POST['headline'])) ? $_POST['headline'] : null; 
```

否则，您可以获得索引未定义通知。

此外，由于您没有使用任何`$.post`未公开的选项，您可以只使用`$.post`简写：

```
$.post("web-block/forms/process-001.php", {
    data: $("#select-block").serialize(),
    function() {             
        $(".save-notice").show();
        $(this).parents(".manage-content-wrap").next(".ribbon-content").fadeIn();
    }  
}); 
```

或者：

```
$.post("web-block/forms/process-001.php", {
    data: {
        Headline: $("#headline").val(), //input#headline is redundant -- getting a node by ID is extremely efficent; getting by tag is not
        'Sub-Headline': $("#subheadline").val()
    },
    function() {             
        $(".save-notice").show();
        $(this).parents(".manage-content-wrap").next(".ribbon-content").fadeIn();
    }  
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T05:13:45.783

`$_POST`变量区分大小写 - ajax 端的变量是小写的，PHP 端是大写的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T05:17:31.553

您确定曾经请求过 process-001.php 吗？因为，其中一种可能性是，当您单击提交按钮时，包装表单已以空操作提交。

更安全的方法是

```
<input type="submit" class="submit-btn" value="SAVE" onclick="return false;" /> 
```

和

```
<script type="text/javascript">
$('form#select-block input:submit').click(function() {
  // ajax goes here
});
</script> 
```

# angularjs - AngularJS - 使用 $resource 附加到模型

> ID：13282819
> 
> 赞同：0
> 
> 时间：2012-11-08T05:12:00.850
> 
> 标签：angularjs

我有这项服务：

```
factory('Post', function($resource) {
    return $resource('/api/post.json', {},
        {
            query: {method:'GET', isArray: false}
        }
    );
}) 
```

我有这个控制器：

```
function PostsCtrl($scope, Post) {
    // init
    $scope.page = 0;
    $scope.page_has_next = true;

    $scope.loadMore = function() {
        if($scope.page_has_next) {
            $scope.posts = Post.query({page: ++$scope.page},
                function(data) {
                    $scope.page_has_next = data.has_next;
                }
            );
        }
    }

    $scope.loadMore();
} 
```

这工作得很好，每次`loadMore()`执行模型都会更新下一页，直到没有更多页面。但是，我想将新的帖子集附加到当前模型而不是替换它，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T08:40:19.597

假设帖子是一个数组：

```
$scope.posts = $scope.posts.concat(Post.query({page: ++$scope.page}) 
```

这仅适用于新帖子与旧帖子没有重复的情况。如果有重复，则必须遍历数组并仅推送新帖子。

# c#-4.0 - 用途和性质的区别？

> ID：13282820
> 
> 赞同：1
> 
> 时间：2012-11-08T05:12:03.367
> 
> 标签：c#-4.0

c#中自动实现的属性和手动属性有什么区别？

例如：手动属性：

```
private int uno;

    public int Uno
    {
        get { return uno; }
        set { uno = value; }
    } 
```

自动实施道具：

```
public string UserLeaveCount { get; set; } 
```

我发现了不同之处并在这里使用：[Auto Implemented Prop](http://msdn.microsoft.com/en-us/library/bb384054.aspx)

但这是我的具体疑问，即“自动实现的属性中没有实例变量，它是如何存储的，返回值？”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:26:46.723

它只是语法糖——编译器为您插入支持字段。效果是一样的，只是当然，您无法从代码中访问支持字段。

从您链接到的页面：

> 如下例所示声明属性时，编译器会创建一个私有的匿名支持字段，该字段只能通过属性的 get 和 set 访问器访问。

# android - 删除图像的纯色背景

> ID：13282824
> 
> 赞同：1
> 
> 时间：2012-11-08T05:12:25.880
> 
> 标签：android, image, camera, chromakey

我想实现一个功能，用户可以**通过相机捕获图像并删除纯色背景（绿色/蓝色）**。我已经使用*色度键*来删除背景，但它不符合标准。*色度键也消除了图像颜色和图像质量受到干扰*。我已经搜索了很多以获得更好的选择，但找不到它。如果有人知道删除背景颜色，请与我们分享。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:50:18.000

这非常简单，这是一个图像视图的示例，用于从图像和内部获取像素，如果条件可以将任何像素替换为透明像素。

```
Bitmap bitmap = ((BitmapDrawable)imageView.getDrawable()).getBitmap();
int pixel = bitmap.getPixel(x,y);
int redValue = Color.red(pixel);
int blueValue = Color.blue(pixel);
int greenValue = Color.green(pixel);
if(pixel == Color.RED){
    textViewCol.setText("It is RED");
} 
```

还可以使用 for 循环遍历整个位图。

# c++ - 在 C++ 中添加二进制数

> ID：13282825
> 
> 赞同：10
> 
> 时间：2012-11-08T05:12:29.593
> 
> 标签：c++, binary, add

如何在 C++ 中添加两个二进制数？正确的逻辑是什么？

这是我的努力，但似乎不正确：

```
#include <iostream>
using namespace std;
int main()
{
    int a[3];
    int b[3];
    int carry = 0;
    int result[7];

    a[0] = 1;
    a[1] = 0;
    a[2] = 0;
    a[3] = 1;

    b[0] = 1;
    b[1] = 1;
    b[2] = 1;
    b[3] = 1;

    for(int i = 0; i <= 3; i++)
    {
        if(a[i] + b[i] + carry == 0)
        {
            result[i] = 0;
            carry = 0;
        }

        if(a[i] + b[i] + carry == 1)
        {
            result[i] = 0;
            carry = 0;
        }

        if(a[i] + b[i] + carry == 2)
        {
            result[i] = 0;
            carry = 1;
        }

        if(a[i] + b[i] + carry > 2)
        {
            result[i] = 1;
            carry = 1;
        }
    }
    for(int j = 0; j <= 7; j++)
    {
        cout<<result[j]<<" ";
    }
    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-08T05:38:47.407

嗯，这是一个非常微不足道的问题。

> *如何在 C++ 中添加两个二进制数。它的逻辑是什么。*

用于添加两个二进制数，a 和 b。您可以使用以下等式来执行此操作。

> sum = a xor b
> 
> 携带= ab

这是[半](http://en.wikipedia.org/wiki/Adder_%28electronics%29#Half_adder)加器的方程式。

现在要实现这一点，您可能需要了解[全](http://en.wikipedia.org/wiki/Adder_%28electronics%29#Full_adder)加器的工作原理。

> sum = a xor b xor c
> 
> 进位 = ab+bc+ca

由于您将二进制数存储在 int 数组中，因此您可能想了解[按位运算](http://en.wikipedia.org/wiki/Bitwise_operation)。您可以使用 ^ 进行异或，| OR 的运算符，AND 的 & 运算符。

这是计算总和的示例代码。

```
for(i = 0; i < 8 ; i++){
   sum[i] = ((a[i] ^ b[i]) ^ c); // c is carry
   c = ((a[i] & b[i]) | (a[i] & c)) | (b[i] & c); 
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-08T06:08:33.703

既然您问的是 C++，那么您应该得到 C++ 的答案。使用[位集](http://en.cppreference.com/w/cpp/utility/bitset)：

```
#include <bitset>
#include <iostream>

int main() {
  std::bitset<5> const a("1001");
  std::bitset<5> const b("1111");
  // m here is a mask to extract the lsb of a bitset.
  std::bitset<5> const m("1");
  std::bitset<5> result;
  for (auto i = 0; i < result.size(); ++i) {
    std::bitset<5> const diff(((a >> i)&m).to_ullong() + ((b >> i)&m).to_ullong() + (result >> i).to_ullong());
    result ^= (diff ^ (result >> i)) << i;
  }
  std::cout << result << std::endl;
} 
```

这适用于任意长的位集。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T05:15:17.517

有一个错误：

```
if(a[i]+b[i]+carry==1)  
{   
result[i]=1; 
carry=0;  
} 
```

你也可能想反向打印

```
for(int j=6; j>=0; j--)  
{  
   cout<<result[j]<<" ";  
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-08T05:35:57.853

您可以使用“按位或”操作来减少代码，因为

```
1 or 1 = 1
1 or 0 = 1
0 or 1 = 1
0 or 0 = 0 
```

您还可以将两个数字都转换为十进制和，然后它们又回到二进制。

十进制转二进制

```
int toBinary (unsigned int num, char b[32])
    {
    unsigned  int x = INT_MIN;      // (32bits)
    int i = 0, count = 0;
    while (x != 0)
    {
      if(x & num) // If the actual o bit is 1 & 1 = 1 otherwise = 0
      {
          b[i] = '1';
          count++;
      }
      else b[i] = '0';

      x >>=1;       // pass to the left
      i++;          
    }
    return count;
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T06:45:18.190

您的数组对于您的索引来说太小了。

`int a[3]`只有 3 个元素，因此`a[3] = 1`无效（它具有*未定义的行为*），因为它正在访问不存在的第 4 个元素。
其他数组也是如此。

这意味着整个程序具有未定义的行为，即它可以做任何事情或什么都不做。

（在您的情况下可能发生的是在数组之外写入会覆盖其他变量。）

您也没有初始化`result`数组，因此它的内容只是一些随机数据。
由于您只更新了其中的 4 个元素但打印了所有元素（以及更多），因此输出也将是随机数据。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-08T07:12:10.703

以下是您的代码中的错误，固定代码也在下面“

1.  int a[] 的大小为 3，因此它不能存储在第三个索引处。使用 int a[4]。
2.  if(a[i]+b[i]+carry==1) 在这个检查中分配了错误的值 update result[i]=1; 进位=0。
3.  检查的顺序是相反的。
4.  最后一个进位没有存储在结果中。
5.  存储在结果数组中的加法结果是反向的，所以反向打印。

这是工作代码：

```
#include <iostream>
#include <string>
using namespace std;

int main()
{
    int a[4];
    int b[4];
    int carry=0;
    int result[5];

    a[0]=1;
    a[1]=0;
    a[2]=0;
    a[3]=1;

    b[0]=1;
    b[1]=1;
    b[2]=1;
    b[3]=1;

    for(int i=0; i<4; i++)
    {

        if(a[i]+b[i]+carry==3)
        {
        result[i]=1;
        carry=1;
        }
        if(a[i]+b[i]+carry==2)
        {
        result[i]=0;
        carry=1;
        }
        if(a[i]+b[i]+carry==1)
        {
        result[i]=1;
        carry=0;
        }
        if(a[i]+b[i]+carry==0)
        {
        result[i]=0;
        carry=0;
        }

    }
    result[4]=carry;
    for(int j=4; j>=0; j--)
    {
        cout<<result[j];

    }
    cout<<endl;

        return 0;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-10-21T19:51:45.427

```
#include <stdio.h>

int main()

{

    long binary1, binary2;

    int i = 0, remainder = 0, sum[20];

    printf("Enter the first binary number: ");

    scanf("%ld", &binary1);

    printf("Enter the second binary number: ");

    scanf("%ld", &binary2);

    while (binary1 != 0 || binary2 != 0)

    {

        sum[i++] =(binary1 % 10 + binary2 % 10 + remainder) % 2;

        remainder =(binary1 % 10 + binary2 % 10 + remainder) / 2;

        binary1 = binary1 / 10;

        binary2 = binary2 / 10;

    }

    if (remainder != 0)

        sum[i++] = remainder;

    --i;

    printf("Sum of two binary numbers: ");

    while (i >= 0)

        printf("%d", sum[i--]);

    getch();
    return 0;

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-08T05:53:32.317

反复做

```
(x, y) <- ((x & y) << 1, x ^ y) 
```

直到 x 为 0。y 就是答案。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-21T07:45:20.730

你应该做这个

```
for(int i = 3; i >= 0; i--)
    {
        if(a[i] + b[i] + carry == 0)
        {
            result[i] = 0;
            carry = 0;
        }
        else if(a[i]+b[i]+carry==1)
        {
            result[i]=1;
            carry=0;  
        }
        else if(a[i] + b[i] + carry == 2)
        {
            result[i] = 0;
            carry = 1;
        }
        else if(a[i] + b[i] + carry > 2)
        {
            result[i] = 1;
            carry = 1;
        }
        printf("%d",result[i]);
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-12-06T23:04:22.713

一个非常规的解决方案，但它有效：

```
int main() {

  int A[] = { 0, 0, 0, 1, 1, 0, 1, 0};
  int B[] = { 0, 0, 0, 0, 1, 1, 0, 0};

  int size = sizeof(A)/sizeof(*A);

  int C[size+1];
  int t = 0;

  for(int i = size-1; i > -1; i--){

      C[i+1] = A[i]+B[i]+t;
      t = C[i+1]/2;
      C[i+1] %= 2;
  }

  C[0] = t;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-05-22T10:18:12.443

如果它们的尺寸不一样怎么办？此外，您可能希望允许用户输入二进制数（在这种情况下表示整数）作为整数而不是数组元素。这是完成这些的一段代码:-)

```
#include <iostream>
using namespace std; 

// Add two numbers in binary

void sumBinary(int num1, int num2, int* sum12){
    int mod1 = 0;
    int mod2 = 0;
    int carry = 0;
    int factor = 1;

    int flag = 0;

    *sum12 = 0;

    while (!flag){
        mod1 = num1 % 10;
        mod2 = num2 % 10;

        num1 /= 10;
        num2 /= 10;
        if ((carry + mod1 + mod2) == 2){
            *sum12 += 0;
            carry = 1;
        }
        else if ((carry + mod1 + mod2) == 3){
            *sum12 += factor;
            carry = 1;
        }
        else if ((carry + mod1 + mod2) == 0){
            *sum12 += 0;
            carry = 0;
        }
        else{
            *sum12 += factor;
            carry = 0;
        }
        factor *= 10;
        if ((num1 == 0) && (num2 == 0)){ 
            *sum12 += carry*factor;
            flag = 1; }

    }
}
void main(){
    int num1, num2, sum12;

    cout << "Enter the first binary integer number: ";
    cin >> num1;
    cout << "Enter the second binary integer number: ";
    cin >> num2;

    sumBinary(num1, num2, &sum12);

    cout << "The sum in binary form is :" << sum12 << endl;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-03-09T10:11:36.750

一个简单的方法：

```
 int getBit(string s, int index)
    {
         if(index >= 0)   return (s[index] - '0');
         else             return 0;
    }

    string addBinary(string a, string b) 
    {
        if(a.size() > b.size())        while(a.size() > b.size()) b = "0" + b;
        else if(b.size() > a.size())   while(b.size() > a.size()) a = "0" + a;

        int l = max(a.size()-1, b.size() - 1);

        string result = ""; 
        int s=0;        

        while(l>=0 || s==1)
        {
            s += getBit(a, l) + getBit(b, l) ;
            result = char(s % 2 + '0') + result;
            s /= 2;
            l--;
        }
        return result;
    } 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-02-25T07:24:22.723

```
int main(){
     ios::sync_with_stdio(0); cin.tie(0);

     int num1=12, num2=45, sum=0;
     bool b1, b2, carry=0;

     for(int i=0;i<32;i++){

        b1=( 1<<i ) & num1;
        b2=( 1<<i ) & num2;

        sum = (b1 ^ b2 ^ carry) ? sum ^ (1<<i) : sum; 

        carry = ((b1 & b2) | (b1 & carry) | (b2 & carry));

     }

    cout<<sum;

    return 0;
} 
```

# c# - 查询在 SQL Server 中的运行速度比通过发送的 ADO.NET 命令快

> ID：13282826
> 
> 赞同：1
> 
> 时间：2012-11-08T05:12:29.163
> 
> 标签：c#, tsql, ado.net, database-performance

所以我在我的 DL 中的 CRUD 方法中有以下内容，它带回了一个照片 blob：

```
 public static MemberPhoto RetrievePhoto(string customerID)
    {
        Database db = DatabaseFactory.CreateDatabase(Config.DbConnectionString);

        using (DbCommand cmd = db.GetSqlStringCommand(string.Format(@" SELECT  customerID,
                                                                                p.Photo as PhotoBlob

                                                                         FROM 
                                                                         SomeTable t

                                                                         WHERE 
                                                                         t.PhotoID = (SELECT MAX(t.PhotoID) FROM SomeTable t
                                                                                      WHERE t.customerID = @{0} 
                                                                                      GROUP BY t.CustomerID)", "customerID")))
        {
            try
            {
                db.AddInParameter(cmd, "@customerID", DbType.String, customerID);

                using (IDataReader reader = db.ExecuteReader(cmd))
                {
                    if (reader.Read())
                    {
                        Photo photo = new Photo();
                        photo.LoadFromDataReader(reader);
                        return photo;
                    }
                }
            } 
```

所以它比我直接从管理工作室运行慢大约 10 秒：

```
SELECT  customerID,
    t.Photo as PhotoBlob

    FROM 
    SomeTable t

    WHERE 
    t.PhotoID = (SELECT MAX(t.PhotoID) FROM SomeTable t
              WHERE t.customerID = '0000900595555' 
              GROUP BY t.CustomerID) 
```

我不知道是不是因为读者需要一段时间才能阅读 blob 并将其带回来还是什么？如果这是问题，你如何加快速度？它在数据库的瞬间，我运行该查询，这是一个毫秒的结果计时。

更新：

更多信息; 表中的字段类型是该 BLOB 的 SQL Sever 中的 Image 类型。

我也运行了我的单元测试，同样的时间，即使它击中了我的 LoadFromReader：

```
[Test]
public void GetMemberPhoto_ByContractNumber_ReturnsAValidMemberPhoto()
{
    // Arrange
    const string customerID = "0044664176";

    // Act
    DTO.MemberPhoto memberPhoto = MemberPhotoCRUD.RetrieveMemberPhotoFromBlob(customerID);

    //Assert
    Assert.IsNotNull(memberPhoto);
    Assert.IsTrue(memberPhoto.CustomerID > 0);
    Assert.IsNotNull(memberPhoto.PhotoBinary.Length > 0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T06:07:41.723

The select is wrong. Do not use string.Format and change `WHERE t.customerID = @{0}` to `WHERE t.customerID = @customerID`.

Now comment out the `photo.LoadFromDataReader(reader);` and run your test. If the time is close to management studio's then the issue is in your LoadFromDataReader method.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:22:45.903

您正在返回图像的 blob。SSMS 实际上并没有获取所有数据 - 它会截断、和的大值`[n][text]`，因为您通常不直接使用这些结果。听起来这是一个带宽问题。检查 blob 的大小 - 如果它非常大，这很可能。`[n][varchar](max)``image``varbinary(max)`

异常表现的其他可能性：

*   不同的隔离级别
*   不同的`SET`选择
*   参数嗅探

另外-关于的评论`string.Format`是正确的；它不会对您造成任何*伤害*，但也没有任何有用的目的。就我个人而言，我只是`@customerID`直接写到查询中。否则它就像`string.Format("this and {0}", "that")`- 你不妨只使用`"this and that"`.

也可能是在客户端处理图像的速度很慢。为了进行直接比较，您只需将数据获取为（例如） a `byte[]`。您的 SSMS 比较不会将数据处理为`Photo`对象。可能是*这*是缓慢的操作，所以我会分析`photo.LoadFromDataReader(reader)`.

# asp.net - 恶意用户可以修改视图状态吗？

> ID：13282829
> 
> 赞同：4
> 
> 时间：2012-11-08T05:12:52.580
> 
> 标签：asp.net, security, sql-injection, viewstate

如果在 ASP.NET 应用程序中启用了 ViewStatemac，用户是否可以修改 ViewState 中的内容并将其成功传递回服务器？

我有一个应用程序（其他人编写的），它使用 ViewState 中的内容在 SQL 查询中创建非参数化`ORDER BY`子句。我应该担心 SQL 注入吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:50:09.747

如果启用了 ViewStateMAC，攻击者需要能够破解“机器密钥”才能更改 ViewState，因此如果该值保持私有，它应该是相当安全的。

值是在代码后面（例如`ViewState["OrderBy"]`）而不是通过控件设置的吗？如果是这样，这将不受事件验证的约束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:08:41.760

是的，您可以修改视图状态并将其发布回来，只需将页面作为 html 复制粘贴到本地站点，然后对其进行修改。

[如果您打开了EventValidation 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.page.enableeventvalidation.aspx)，那么在回发时验证将失败并且不会被 asp.net 接受- 默认情况下它是打开的。

asp.net 为该属性的页面上的每个控件和每个事件保存一个哈希文件，并在回发时对其进行验证。如果此失败，则不继续。如果你有这个关闭，那么它可以做你所说的。

看看这个简单的 html 表单：

```
<form name="input" action="someaction.asp" method="post">
    <select name="sel">
      <option value="1" >Milk</option>
      <option value="2" >Coffee</option>
      <option value="3" >Tea</option>
    </select>
<input type="submit" value="Submit">
</form> 
```

任何人都可以更改`<option value="1" >Milk</option>`to`<option value="1 OR 1=1" >Milk</option>`并将其按原样发布，因此您需要在渲染之前添加哈希码并将其与其余部分一起发布，并验证值是否相同（返回相同的哈希）。

一些网站和编码人员选择在回发时加密每个值，例如，如果您看到亚马逊，您会注意到以下行：

```
<input name="offeringID.1" value="y3A0L7tSnS%2B7LBLvI....morehere" type="checkbox" id="fbt_x_check" style="display: none;" class="check" checked="checked"> 
```

而你如果使用自定义的html控件则需要添加你个人验证的值，避免被修改。

asp.net 开发人员决定对所有控件进行总哈希值，并将其保存在 EventValidation 上。

所以保持EventValidation开启，修改会失败。

# c# - 正则表达式 + 符号是否仅适用于前一个元素？

> ID：13282833
> 
> 赞同：0
> 
> 时间：2012-11-08T05:13:13.530
> 
> 标签：c#, .net, regex, string

为了匹配所有以数字开头`04`且仅包含数字的字符串，以下操作是否有效？

```
Regex.IsMatch(str, "^04[0-9]+$") 
```

或者是否需要另一组括号？

```
Regex.IsMatch(str, "^04([0-9])+$") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T05:34:11.027

在`Regex`：

> ***`[character_group]`*** 匹配`character_group`.
> 
> ***`\d`*** 匹配任何十进制数字。
> 
> ***`+`*** 匹配前一个元素一次或多次。
> 
> ***`(subexpression)`*** 捕获匹配的子表达式并为其分配一个序数。
> 
> ***`^`*** 匹配必须从字符串或行的开头开始。
> 
> ***`$`*** 匹配必须出现在字符串`\n`的末尾或行或字符串的末尾之前。

这样这段代码可能会有所帮助：

```
Regex.IsMatch(str, "^04\d+$") 
```

并且您的所有代码都可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:02:35.647

你的第一个正则表达式是正确的，但第二个不是。它与第一个正则表达式匹配相同的内容，但在此过程中做了很多不必要的工作。一探究竟：

```
Regex.IsMatch("04123", @"^04([0-9])+$") 
```

在此示例中，`1`被捕获在组 #1 中，只是被`2`覆盖`3`。将量词添加到捕获组几乎不是一个好主意。有关详细说明，请阅读[此](http://www.regular-expressions.info/captureall.html)内容。

但也许这是您要询问的优先规则。量词比串联具有更高的优先级，因此无需使用括号隔离字符类（如果您正在这样做）。

# php - 特殊字符给出空值

> ID：13282835
> 
> 赞同：0
> 
> 时间：2012-11-08T05:13:30.233
> 
> 标签：php, database

我有 1 个数据库。我有一个表。我正在这段代码中进行 json 解析。
我已经使用这个 php 代码来检索值：

```
<head>
<style type="text/css">
.auto-style1 {
    text-align: right;
}
</style>
</head>

<?php

echo getdata($_REQUEST['lastupdate']);

function getdata($lastupdatedate){

    $obj = json_decode($json);

    $con = mysql_connect("localhost","root","Password");

    if (!$con)
    {
        die('Could not connect: ' . mysql_error());
    }
    mysql_select_db("roster", $con);

    $query = "select * from statedeathtax_v2 where LastUpdated > '".$lastupdatedate."' order by LastUpdated";

    $rs = mysql_query($query) or die($query);

    //print_r($rs);

    while($row=mysql_fetch_assoc($rs)){

    $record[] = $row;

    }

    $data = json_encode($record);

    header('Cache-Control: no-cache, must-revalidate');

    header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');

    header('Content-type: application/json');

    return $data;

}

?> 
```

此处代码不显示“$”等特殊字符。当我在这段代码中抛出查询时，它显示具有特殊字符的列的空值。我没有得到这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:11:33.987

我已经解决了问题：

更新代码：

```
<?php

echo getdata($_REQUEST['lastupdate']);

function getdata($lastupdatedate){

    $obj = json_decode($json);

    $con = mysql_connect("localhost","root","Password@123");
    mysql_set_charset('utf8',$con);

    if (!$con)
    {
        die('Could not connect: ' . mysql_error());
    }
    mysql_select_db("roster", $con);

    $query = "select * from statedeathtax_v2 where LastUpdated > '".$lastupdatedate."' order by LastUpdated";

    $rs = mysql_query($query) or die($query);

    //print_r($rs);

    while($row=mysql_fetch_assoc($rs)){

    $record[] = $row;

    }

    $data = json_encode($record);

    header('Cache-Control: no-cache, must-revalidate');

    header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');

    header('Content-Type: application/json; charset=utf-8' );

    return $data;

}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T02:32:31.930

**对于 mysqli_connect：**

```
$conecta = mysqli_connect("host", "user", "pass", "dbase") 
or print (mysql_error()); 

$conecta->set_charset('utf8'); 
```

检查更多 [http://dev.mysql.com/doc/apis-php/en/apis-php-mysqlinfo.concepts.charset.html](http://dev.mysql.com/doc/apis-php/en/apis-php-mysqlinfo.concepts.charset.html)

# c - 如何将输入与数组索引匹配？

> ID：13282840
> 
> 赞同：2
> 
> 时间：2012-11-08T05:13:44.480
> 
> 标签：c

对于这个程序，我想从用户那里获得一个电视频道的输入，这将是

```
int tv[] = {2, 4, 5, 6, 8}; 
```

我想提示用户输入他们想要的电视频道，因此`scanf`电视频道 4 将是 array `index [1]`。如何将扫描的电视频道 (4) 与等于 [1] 的数组索引的新变量匹配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T05:21:31.213

从用户那里读取频道号，并循环遍历数组以找到该频道号所在的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T05:24:52.767

做一个简单的线性搜索，其中元素（这里是通道号）在数组中顺序搜索

```
int channelnumber,arrayindex;
printf("\n Enter the channel number");
scanf("%d",&channelnumber)
for(i=0;i<5;i++)
{
     if(tv[i]==channelnumber)
     {
        arrayindex=i;
        break;
     }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T05:28:10.313

我相信这个问题是一个简单的搜索案例。如果通道不按顺序排列，您可能可以进行线性搜索，或者使用二进制搜索逻辑来查找通道。如果您也不想这样，请使用散列概念。但这会增加数组的大小，但它可以帮助您非常轻松地找到元素。

希望能回答你的问题......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T05:49:19.843

更简单的方法是通过使用某种[搜索算法](https://stackoverflow.com/questions/5500579/better-search-algorithm-to-increase-the-performance)来搜索数组。如果您的数组是**HUGE**，那么您可能需要查看一个名为[**map**](http://www.cplusplus.com/reference/stl/map/)的 c++ 容器。如果你创建一个地图，那么你可以做你在 O(1) 中提到的关联。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T05:54:50.850

每次在数组中搜索可能会很昂贵（在我看来，如果您有一个大数组）另一种解决方案可能是您可以拥有另一个数组，它将您映射到正确的索引

例如，

```
int tv[] = {2, 4, 5, 6, 8};
int mapping[]={-1,-1,0,-1,1,2,3,-1,-1,4};
tv[mapping[channelNumber]]//getting the actual value 
```

这会占用更多空间，但可以提高性能

# php - 搜索未在分页上运行

> ID：13282844
> 
> 赞同：0
> 
> 时间：2012-11-08T05:14:18.733
> 
> 标签：php, mysql, database, search

当我必须搜索任何东西时，它会给我正确的 sesrch，但是当我单击第 2 页导航以显示更多记录时，它不会显示正确的结果。简而言之，我对其应用了分页，但在单击第二页后，搜索查询不仅仅运行简单的查询运行。请告诉我是哪个问题？

```
 <form method="post" action=""><input type='textbox' name="searchfield" id='searchfield' $value style='height:25px; width:275px; border-radius:5px 5px 5px 5px; margin-top:50px; margin-bottom:50px;' />    <input type="submit" id='GetBtn' name="GetBtn" class='GetBtn' value="Search"></form>

    <?php 

    if(isset($_GET['GetBtn'])){
         $match = str_replace('-',' ',slugify($_POST['searchfield']));

       $query_pag_data = "SELECT * FROM `imported_deals` WHERE MATCH ( `Name`, `Category` )
AGAINST ('$match' IN BOOLEAN MODE)";

    }
     else{   
    $query_pag_data = "SELECT * FROM `imported_deals` LIMIT $per_page ( `Name`, `Category` ) 
AGAINST ('$match' IN BOOLEAN MODE)";
     }

     $PAGING        =   new PAGING($query_pag_data,10);
    $query          =   $PAGING->sql;
    $res                =   mysql_query($query);
    if(!$res) die(mysql_error());

    if($show['subcat_name'] != '')
        {
             echo($PAGING->show_paging("http://yespricer.com/","deals/".slugify($fullname)."/".slugify($show['subcat_name'])."/page")); 
        }
        else
        {
             echo($PAGING->show_paging("http://yespricer.com/","deals/".slugify($fullname)."/page")); 
        }

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:18:13.843

无论您从帖子中获得什么值，都将它们存储在表单中的隐藏字段中，并将它们作为获取/发布数据推送到第二页。

# html - 如何更改 div 块的顺序？

> ID：13282845
> 
> 赞同：1
> 
> 时间：2012-11-08T05:14:20.513
> 
> 标签：html, css, media-queries

如何使用媒体查询更改 div 块的顺序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T05:16:02.557

这是不可能的。CSS 专门用于更改样式以呈现标记。媒体查询特定于 CSS。它们不是用来修改标记的。

# jquery - 无法让 cookie 正常工作

> ID：13282846
> 
> 赞同：0
> 
> 时间：2012-11-08T05:14:29.153
> 
> 标签：jquery, cookies

```
$(document).ready(function(){

   var lastsettings = $.cookie('location');

    if(lastsettings == "blue"){
    $('fieldset').css('background-color', 'blue');
    $('fieldset').css('margin-top', '0px');
        $('fieldset').css('margin-left', '0px');
   }
    else if(lastsettings == "red"){
        $('fieldset').css('background-color', 'red');
        $('fieldset').css('margin-top', '0px');
        $('fieldset').css('margin-right', '0px');
    }
    else if(lastsettings == "yellow"){
        $('fieldset').css('background-color', 'yellow');
        $('fieldset').css('margin-top', '240px');
        $('fieldset').css('margin-left', '0px');
    }
    else if(lastsettings == "green"){
        $('fieldset').css('background-color', 'green');
        $('fieldset').css('margin-top', '240px');
        $('fieldset').css('margin-right', '0px');
    }

$('select').change(function(){
    $('select option:selected').each(function(){
        position = this.text;

        $('fieldset').css('margin', 'auto');

        if(position == "Top Left"){
            $('fieldset').css('background-color', 'blue');
            $('fieldset').css('margin-top', '0px');
            $('fieldset').css('margin-left', '0px');
            $.cookie('position', 'blue');
        }
        else if(position == "Top Right"){
            $('fieldset').css('background-color', 'red');
            $('fieldset').css('margin-top', '0px');
            $('fieldset').css('margin-right', '0px');
            $.cookie('position', 'red');
        }
        else if(position == "Bottom Left"){
            $('fieldset').css('background-color', 'yellow');
            $('fieldset').css('margin-top', '240px');
            $('fieldset').css('margin-left', '0px');
            $.cookie('position', 'yellow');
        }
        else if(position == "Bottom Right"){
            $('fieldset').css('background-color', 'green');
            $('fieldset').css('margin-top', '240px');
            $('fieldset').css('margin-right', '0px');
            $.cookie('position', 'green');
        }
        else{
            $('fieldset').css('background-color', 'white');
            $('fieldset').css('margin', 'auto');
            $('fieldset').css('margin-top', '100px');
        }

    });

});

        $("#invisibility").toggle(function(){
        $('fieldset').css('visibility', 'hidden');
    }, function(){
        $('fieldset').css('visibility', 'visible');
    });

}); 
```

我正在使用 jquery cookie 插件，但是当我刷新页面时它恢复正常。我正在编写一个网站，我在其中使用字段集将一个框移动到某个位置，但是当我刷新我的页面时，框移回它的原始位置，而不是我在刷新之前设置的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:32:04.483

好吧，如果你`location`像这样创建cookie

```
 var lastsettings = $.cookie('location'); 
```

...然后，下一步是为此类 cookie 分配一个值，例如

```
$.cookie('location', 'blue'); 
```

...但您将值设置为不存在的 cookie

```
$.cookie('position', 'blue'); 
```

# java - 序列不存在

> ID：13282847
> 
> 赞同：3
> 
> 时间：2012-11-08T05:14:33.193
> 
> 标签：java, oracle, hibernate

在使用 spring 和 hibernate 开发 web 应用程序时，我得到了以下 execption。

java.sql.SQLException: ORA-02289: 序列不存在

当我试图将数据插入到表中时，我正在使用序列来增加 request_id 的值。

我正在使用以下编码进行插入

```
 @Override
public void postRequest(RequestInfo requestInfo) 
{
Session session = null;
Transaction trans = null;
SessionFactory sessionFactory = null;

sessionFactory=HibernateConfig.getSessionFactory();
session= sessionFactory.openSession();
trans = session.beginTransaction();
session.save(requestInfo);
trans.commit();
session.close();

}
public class HibernateConfig 
{
public static SessionFactory sessionFactory;
public static SessionFactory getSessionFactory() 
{
sessionFactory = new Configuration().configure().buildSessionFactory();
return sessionFactory;
}
} 
```

在休眠映射中，我提到过这样

```
<id name="requestId" type="int" column="request_id" >
<generator class="sequence">
<param name="sequence">REQUEST_INFO_SEQ</param>
</generator>
</id> 
```

我也尝试使用 native，但我无法插入要插入的值。

我正在使用 oracle 11g。

任何人都可以给我解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T06:50:54.647

在 hbm.xml 文件中使用模式名称（如**schemaName.sequenceName** ）给出序列名称后，插入操作工作正常。谢谢大家回复提问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T05:24:53.190

序列是否存在？要检查，请执行以下操作：

```
select * from all_sequences where sequence_name = 'REQUEST_INFO_SEQ' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T05:46:25.700

我认为传入参数的 POJO 对象有问题，您应该首先创建会话做 3 件事，使 POJO 对象（瞬态状态）然后调用持久方法保存、更新、删除（持久状态）和 trx.commit（分离休眠对象的状态）。并且应该在 try catch 块中完成这项工作并捕获 HibernateException 然后调用 finally 它将关闭会话，并使用 buildSessionFactory();

sessionFactory = new Configuration().configure().buildSessionFactory();

# ios - iPhone：自定义键盘布局和主题

> ID：13282849
> 
> 赞同：0
> 
> 时间：2012-11-08T05:14:47.300
> 
> 标签：ios, xcode, keyboard, themes, customization

我想知道是否有人知道如何或可以像我一样阅读有关如何制作自定义 iOS 键盘集以及主题化 iOS 键盘的一些文档或教程。我已经阅读了我能找到的所有内容，观看了许多 youtube 视频并在此处阅读了相关帖子。大多数人只是用一堆按钮从头开始制作键盘，或者只是告诉你如何使用其他 iOS 布局，如电子邮件、键盘等。我需要创建一个自定义键盘集。它必须能够做到，Wolfram|Alpha Calculus 应用程序具有自定义键盘布局和修改过的主题。如果有人有任何信息，请以我的方式发送！

来自 wolfram 应用程序的示例：

![Wolfram 应用程序示例](../Images/9588544221e9d6d7b2cefab88e231db6.png)

# php - 从组合框 PHP 更改值时更改价格

> ID：13282856
> 
> 赞同：0
> 
> 时间：2012-11-08T05:15:16.397
> 
> 标签：php, javascript, jquery

我的代码有问题。我想在组合框的值更改时更改价格，但在 while-loop 处理程序中，仅处理第一个表行。

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#size').change(function () {
            //alert("aaa");
            var x = $('#size').attr('value');
            //alert(x);
            $.ajax({
                type: "POST",
                url: 'sizeChange.php',
                data: 'size =' + size,
                success: function (data) {
                    alert(data);
                }
            })
        });
    });
</script>

<div id="price">
    <table border="1" width="200px">
     <tr>
        <td> Size </td>
        <td> Product</td>
        <td>Price</td>
     </tr>
    <?
       mysql_connect("localhost","root","") or die(mysql_error()); 
       mysql_select_db("test") or die(mysql_error());
       $query = mysql_query("select * from pricetest");
       if(!$query)
         { die(mysql_error());}
         else
        {
         while($row = mysql_fetch_array($query))
          {
            echo "<tr> ";
                ?>
             <td>
                 <select name="size" id="size">
                   <option value="1">1</option>
                   <option value="2">2</option>
                    <option value="3">3</option>
                  </select>
             </td>
             <td> <? $row['pd_name']; ?> </td>
             <td> <? $row['price']; 

                    }
                }?>
             </td>
        </tr>
      </table>
</div> 
```

我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T06:55:22.173

这是因为你所有的元素都有相同的 id (`size` )。

更改您的 php 代码：

```
$i = 1;
while($row = mysql_fetch_array($query))
{
    echo "<tr id='row".$i."'> ";
            ?>
     <td>
             <select name="size" class="size_dd" id="<?php echo $i ?>" >
                 <option value="1">1</option>
                 <option value="2">2</option>
                    <option value="3">3</option>
                </select>
     </td>
     <td class="pd_name" > <? $row['pd_name']; ?> </td>
     <td class="price" > <? $row['price']; ?> </td>
     <?php $i++ ?>
} 
```

并将 JS 更改为如下内容：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('.size_dd').change(function () {
            //alert("aaa");
            var size = this.value,
                                id = this.value;
            //alert(x);
            $.ajax({
                type: "POST",
                url: 'sizeChange.php',
                data: 'size =' + size,
                success: function (data) {
                    $('tr#row td.pd_name').html(data['pd_name']);
                    $('tr#row td.price').html(data['price']);
                }
            })
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:53:53.490

```
$(document).ready(function () {
    $('#size').change(function () {
        //alert("aaa");
        var x = $('#size').attr('value'); alert(x);
        //alert(x);
        $.ajax({
            type: "POST",
            url: 'getsize.php',
    data: 'size='+x,
            success: function (data) {
                alert(data);
            }
        })
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T05:40:27.763

您可以使用`var x = $('#size').val();`而不是像在 ajax 中`var x = $('#size').attr('value');` 一样发送数据。`data: 'size =' + x`

# php - 谁能解释这个php代码？

> ID：13282859
> 
> 赞同：-2
> 
> 时间：2012-11-08T05:15:33.690
> 
> 标签：php, arrays

```
<?php
error_reporting(-1);
$a = array('key' => '2');
$a = $a['key'];
var_dump($a);
echo $a['key'], "\n";
?> 
```

我希望代码抛出空字符串或警告说密钥不存在，但代码打印 2；

PHP 5.3.10-1

更新 1：添加 var_dump 和 error_reporting。

输出是

```
hari@hari-laptop:~$ php run.php  
string(1) "2"  
2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T05:24:24.357

`$a`是一个保存值的字符串`"2"`。

PHP 中的字符串可以被索引以使用方括号访问它们的字符。例如：

```
$a = "abcde";
echo $a[3];  // This will print 'd' 
```

当索引是字符串时，PHP 会尝试将其解析为整数。如果字符串不是数字，解析将给出`0`. 因此，使用第零个索引，表示第一个字符。（在 PHP 5.4 及更高版本中，它会发出警告）。在您的情况下，您得到“2”，因为`$a['any_stuff']`= 第一个字符 =`'2'`

来自[PHP 手册](http://php.net/manual/en/language.types.string.php)：

> **按字符访问和修改字符串**
> 
> 字符串中的字符可以通过使用方数组括号指定字符串后所需字符的从零开始的偏移量来访问和修改，如`$str[42]`. 为此，将字符串视为字符数组。当您想要提取或替换超过 1 个字符时`substr()`， 可以使用这些功能。`substr_replace()`
> 
> 从 PHP 5.4 开始，字符串偏移量必须是整数或类似整数的字符串，否则会抛出警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T05:40:15.227

如果您为 选择不同的值，这将更有意义`$a['key']`。

```
$a = array('key' => 'whatever');
$a = $a['key'];
var_dump($a);
echo $a['key'], "\n"; 
```

输出是：

```
string(8) "whatever"
w 
```

首先，该`echo`命令实际上并不是一个函数，而是一种语言结构。括号是可选的。

其次，当您有一个作为数组访问的字符串时，PHP 将该字符串视为一个字符数组。但是如果你传递了一个无效的密钥，那么你会得到第一个字符。

```
echo $a[0];    // w
echo $a[1];    // h
echo $a[2];    // a
echo $a[3];    // t
echo $a['invalid_key'];    // w 
```

# grep - grep 模式单引号和双引号

> ID：13282860
> 
> 赞同：5
> 
> 时间：2012-11-08T05:15:34.520
> 
> 标签：grep, double-quotes

`grep`用单引号和双引号括起来的模式有什么区别吗？

```
grep "abc" file.txt 
```

和

```
grep 'abc' file.txt 
```

我在问，因为我无法自己测试所有可能的情况，而且我不想偶然发现我弄错的情况:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T05:16:59.200

如果您有特殊字符，我会看到不同之处：

前任 ：

```
grep "foo$barbase" file.txt 
```

shell 会尝试扩展变量`$barbase`，这可能不是你想要做的。

相反，如果您键入

```
grep 'foo$barbase' file.txt 
```

`$bar`是从字面上理解的。

最后，默认情况下总是更喜欢单引号，它更强大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-29T23:40:34.793

*   在双引号中，以下字符具有特殊含义：'$'、'`'、'\'，以及启用历史扩展时的'!'。

    字符 '$' 和 '<code>' 在双引号中保留其特殊含义（$ 表示变量和执行）。

    特殊参数 '*' 和 '@' 在双引号中保留其特殊含义作为输入，当以 $ 开头时。

    '$'、'`'、'"'、'\' 或换行符可以通过在它们前面加上反斜杠来转义。

    反斜杠在后跟 '$'、'`'、'"'、'\' 或换行符时保留其特殊含义。反斜杠前面没有特殊含义的字符保持不变。

    检查 shell 扩展也很有帮助：
    [https ://www.gnu.org/software/bash/manual/html_node/Shell-Expansions.html#Shell-Expansions](https://www.gnu.org/software/bash/manual/html_node/Shell-Expansions.html#Shell-Expansions)

*   单引号忽略 shell 扩展。

# python - 子类化 Tkinter.Tcl

> ID：13282862
> 
> 赞同：2
> 
> 时间：2012-11-08T05:15:46.513
> 
> 标签：python, oop, tkinter, subclassing

我想扩展 Tkinter.Tcl 的行为。我尝试对它进行子类化，但事实证明 Tcl 是一个返回对象的工厂函数。如果 Tcl 是一个类，我会简单地：

```
from Tkinter import *
class TclPlus(Tcl): # <- broken
    def foo(self, *args, **kwargs):
       print "foo" 
```

我可以将 Tk 子类化，并且我的新类将具有 Tcl 工厂函数，但我会回到我开始的地方。此外，Tk 包括所有窗口开销，我不需要。

实现这一目标的最佳方法是什么？

编辑：[http](http://code.activestate.com/recipes/52295-automatic-delegation-as-an-alternative-to-inherita/) ://code.activestate.com/recipes/52295-automatic-delegation-as-an-alternative-to-inherita/这似乎正是我所追求的。注释？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:21:07.520

如果您查看`Tcl`函数内部，您会看到一个用于创建`Tk`实例的有趣标志

```
def Tcl(screenName=None, baseName=None, className='Tk', useTk=0 ):
    返回 Tk(screenName, baseName, className, useTk )

```

因此，您可以子类`Tk`化并禁止 Tk 实例化

```
class TclPlus(Tk):
    def __init__(self):
        Tk.__init__(self,useTk=0)

tcl = TclPlus()
tcl.eval("expr 6*7") 
```

# objective-c - CarbonCore/OSUtils.h 中的 Delay() 在 mac os x 10.8 中已弃用

> ID：13282866
> 
> 赞同：1
> 
> 时间：2012-11-08T05:15:54.800
> 
> 标签：objective-c, osx-mountain-lion, deprecated, macos-carbon

CarbonCore/OSUtils.h 在 Mac OS X 10.8 中已被弃用。我正在使用`Delay()`它。现在，我需要替换为 Cocoa 等价物。我觉得`[[NSRunLoop currentRunLoop] runUntilDate:]`可以换人。请建议什么是最好的替代品。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T05:38:57.457

> 我只是使用 Delay() 进行半秒延迟。

等价的将是`usleep`函数，在`unistd.h`.

`Delay`挂起一个线程。如果您同时不需要处理该线程上的事件，则不需要运行循环。

# bash - 检查上一个完成后如何自动运行脚本？

> ID：13282868
> 
> 赞同：0
> 
> 时间：2012-11-08T05:16:12.240
> 
> 标签：bash, grid, jobs

我必须在我的工作网格中进行几次模拟，但我只能一个一个地进行（否则网格会降低我的工作优先级）。所以，我需要运行一项工作，在我检查它是否完成后，发送新的。

要发送工作，我必须运行

```
run -file test.cfg 
```

并检查是否完成，我必须运行：

```
run -status test.cfg 
```

我收到一条消息，告诉我工作是否完成。一旦我检查了状态并完成了，我想运行一份工作。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:37:19.767

最简单的方法是：

```
run -file test.cfg ; run -status test.cfg 
```

这将在第一个命令完成后运行第二个命令。这不会检查任何类型的成功。

更好的方法是检查前一个命令是否返回成功的返回码（即`$?=0`）

```
run -file test.cfg && run -status test.cfg 
```

在此示例`&&`中，表示“仅当第一次返回 0（即成功）时才运行第二个命令

最后，如果您想要在第一个命令失败时获得有意义的消息：

```
run -file test.cfg && run -status test.cfg || echo "first command execution failed" 
```

上面的意思是“运行第一个命令，`&&`如果成功运行第二个命令，则 ()，否则 ( `||`) 回显错误消息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:07:45.163

也许沿着这些线的脚本会起作用：

```
#!/bin/bash

declare -a jobs=(task1.cfg task2.cfg task3.cfg);

for job in ${jobs[@]}; do
    # Start job
    run -file $job;
    # Wait for job to complete
    while [ "$(run -status $job)" != "COMPLETE" ]; do
            if [ "$(run -status $job)" == "FAILED" ]; then
                echo "Job $job failed" >&2;
                exit -1;
            fi;
            sleep 10m;
    done;
done; 
```

在这里，我们定义了要运行的任务列表，并循环遍历每个任务，开始作业并等待它完成，然后再进行下一个任务。它每 10 分钟检查一次正在运行的任务状态。如果作业失败，它会进行一些错误检查以退出。请注意，上述内容尚未经过全面测试。

# asp.net - .NET 4.5 WebForms：我（仍然）真的必须在 FormView 中指定所有 3 个模板吗？

> ID：13282869
> 
> 赞同：6
> 
> 时间：2012-11-08T05:16:16.950
> 
> 标签：asp.net, webforms, model-binding, dynamic-controls, asp.net-4.5

研究 ASP.NET 4.5 WebForms 中新的强类型模型绑定方法：

在[Scott Hanselman 的](http://www.hanselman.com/blog/OneASPNETSneakPeekElegantWebFormsAndSnowballsInHell.aspx)WebForms 模型绑定示例（以及其他）中，我看到了在“编辑”模式下打开的 FormView 的使用，其中包含许多`DynamicControls` 例如

```
<asp:FormView runat="server" ID="MyForm" ... DefaultMode="Edit">
  <EditItemTemplate>
    <asp:DynamicControl runat="server" ID="Field1" DataField="Field1" Mode="Edit" />
    <asp:DynamicControl runat="server" ID="Field2" DataField="Field2" Mode="Edit" />
  </EditItemTemplate>
</asp:FormView> 
```

在我的情况下，我的 FormView和将是相同的`ItemTemplate`，除了 ItemTemplate 的控件将处于“只读”模式。`EditItemTemplate``InsertItemTemplate`

我（仍然）真的需要在 FormView 中提供三个几乎相同的模板副本吗？

我很高兴使用 DynamicControls，但这里的团队永远不会采用 FormView 似乎需要的“3x 复制粘贴”方法，尤其是对于我们的大型模板。

我曾想过也许：

*   DynamicControls 可以从包含的 FormView 中获取它们的“模式”吗？
*   我可以使用 FormView 以外的东西来包含我的 DynamicControls？
*   我应该在代码隐藏中管理 DynamicControls 模式以避免模板重复吗？

任何例子/想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-23T12:39:27.070

不，您不必指定所有 3 个模板。我有同样的情况，这是我的解决方案：

*   将默认模式设置为最常用的模式
*   然后在表单后面的代码中管理表单模式
*   在复制模板（例如 EditTemplate）后面的代码中，您将手动编码到您需要的另一个模板

    ```
    protected void Page_Init()
    {
        var action = RouteData.Values["action"].ToString();

        switch (action)
        {
            case "add":
                personForm.ChangeMode(FormViewMode.Insert);
                this.Page.Title += " Add";
                break;
            case "edit":
                personForm.ChangeMode(FormViewMode.Edit);
                this.Page.Title += " Change";
                break;
            default:
                personForm.ChangeMode(FormViewMode.ReadOnly);
                break;
        }

        // Reuse inserttemplate for editing
        if (personForm.CurrentMode == FormViewMode.Edit)
        {
            personForm.EditItemTemplate = personForm.InsertItemTemplate;
        }

    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-09T13:57:08.283

与许多人认为的相反，您只需要在 FormView 中使用***一个***模板，即 EditItemTemplate。

下面是一个简单的示例，展示了如何执行此操作（请注意，这与“动态数据”的概念无关。）。

在这种方式下，从不使用 ReadOnly 模式，因此不需要 ItemTemplate。FormView 将使用 EditItemTemplate 进行编辑和插入。

这种方式大大简化了标记，当您对布局进行调整时，您只需在一个模板中进行。

请注意，保存按钮没有 CommandName。该命令是在 FormView1_ItemCommand 事件中确定的（参见代码）。

另请注意，FormView 的模式是在事件 SqlDataSource1_Selected 中确定的（请参阅该代码，带有注释）。

我没有包含 SqlDataSource1 的标记，因为没有什么特别需要考虑的。照常做就行了。

```
 <asp:FormView ID="FormView1" runat="server" DataSourceID="SqlDataSource1"
      DataKeyNames="ApplicationId,UserId"
    >
      <EditItemTemplate>
        <asp:TextBox ID="txtFirstName" runat="server" Text='<%# Bind("firstName") %>'></asp:TextBox><br />
        <asp:TextBox ID="txtAge" runat="server" Text='<%# Bind("age") %>'></asp:TextBox><br />
        <asp:Button ID="btnSave" runat="server" Text="Save" />  
      </EditItemTemplate>
    </asp:FormView> 
```

```
 Private Sub FormView1_ItemCommand(sender As Object, e As FormViewCommandEventArgs) Handles FormView1.ItemCommand
    Select Case FormView1.CurrentMode
      Case FormViewMode.Edit
        FormView1.UpdateItem(True)
      Case FormViewMode.Insert
        FormView1.InsertItem(True)
    End Select
  End Sub

  Private Sub SqlDataSource1_Selected(sender As Object, e As SqlDataSourceStatusEventArgs) Handles SqlDataSource1.Selected
    If e.AffectedRows = 0 Then
      ' nothing exists yet, so make formview ready to insert
      FormView1.ChangeMode(FormViewMode.Insert)
    Else
      ' something exists already, so make formview ready to edit
      FormView1.ChangeMode(FormViewMode.Edit)
    End If
  End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T04:24:19.307

只需设置 AutoGenerateEditButton="true"。然后，您的项目模板中的所有输入类型都将是可编辑的。您可能必须使用 jQuery 显示/隐藏文本框和其他输入类型的边框。

# ruby-on-rails-3.1 - 使用 do 部分进行迭代的rails路由

> ID：13282870
> 
> 赞同：2
> 
> 时间：2012-11-08T05:16:53.113
> 
> 标签：ruby-on-rails-3.1, rails-routing

我有一个非常基本的问题，正在查看一些类似于以下但无法解释的 Rails 代码，从中推断出的 REST url 和相应的操作是什么？有人可以帮助理解，因为我没有找到任何类似路线的例子。

```
map.resources :myresources do |item|
    item.resources :v, :controller => 'my_controller' do |v|
      v.resource :abc
    end
end 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:49:39.563

这实际上是旧的路由样式。现在您可以这样编写代码：

```
resources :myresources do
  resources :v, :controller => "my_controller" do
    resource :abc
  end
end 
```

使用此代码，您将获得以下路线：

```
 myresource_v_abc POST   /myresources/:myresource_id/v/:v_id/abc(.:format)      abcs#create
 new_myresource_v_abc GET    /myresources/:myresource_id/v/:v_id/abc/new(.:format)  abcs#new
edit_myresource_v_abc GET    /myresources/:myresource_id/v/:v_id/abc/edit(.:format) abcs#edit
                      GET    /myresources/:myresource_id/v/:v_id/abc(.:format)      abcs#show
                      PUT    /myresources/:myresource_id/v/:v_id/abc(.:format)      abcs#update
                      DELETE /myresources/:myresource_id/v/:v_id/abc(.:format)      abcs#destroy
   myresource_v_index GET    /myresources/:myresource_id/v(.:format)                my_controller#index
                      POST   /myresources/:myresource_id/v(.:format)                my_controller#create
     new_myresource_v GET    /myresources/:myresource_id/v/new(.:format)            my_controller#new
    edit_myresource_v GET    /myresources/:myresource_id/v/:id/edit(.:format)       my_controller#edit
         myresource_v GET    /myresources/:myresource_id/v/:id(.:format)            my_controller#show
                      PUT    /myresources/:myresource_id/v/:id(.:format)            my_controller#update
                      DELETE /myresources/:myresource_id/v/:id(.:format)            my_controller#destroy
          myresources GET    /myresources(.:format)                                 myresources#index
                      POST   /myresources(.:format)                                 myresources#create
       new_myresource GET    /myresources/new(.:format)                             myresources#new
      edit_myresource GET    /myresources/:id/edit(.:format)                        myresources#edit
           myresource GET    /myresources/:id(.:format)                             myresources#show
                      PUT    /myresources/:id(.:format)                             myresources#update
                      DELETE /myresources/:id(.:format)                             myresources#destroy 
```

# haskell - Data.Lens 或 Control.Lens

> ID：13282874
> 
> 赞同：10
> 
> 时间：2012-11-08T05:17:11.197
> 
> 标签：haskell, lenses

> **可能重复：**
> [lens、fclabels、data-accessor - 用于结构访问和变异的库更好](https://stackoverflow.com/questions/5767129/lenses-fclabels-data-accessor-which-library-for-structure-access-and-mutatio)

我将在我的下一个 Haskell 项目中使用和学习 Lens 包。[`Data.Lens`](http://hackage.haskell.org/package/data-lens)当我发现这篇文章在包装中提到 van Laarhoven Lenses 时，我几乎已经决定了[`Control.Lens`](http://hackage.haskell.org/package/lens)包装。

我还不太了解这些差异，无法决定使用哪一个。你会建议我在现实世界的项目中学习/使用哪个包？

谢谢。

[lens, fclabels, data-accessor - 用于结构访问和变异的库更好](https://stackoverflow.com/questions/5767129/lenses-fclabels-data-accessor-which-library-for-structure-access-and-mutatio)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-08T13:44:33.297

`Control.Lens`几乎可以肯定是你想要的。`Data.Lens`先来，比较简单，但是`Control.Lens`有很多优点，正在积极开发中。

除了镜头，`Control.Lens`还有许多相关的类型，比如遍历（遍历就像一个镜头，可以引用 n 个值而不仅仅是一个）、折叠、只读/修改镜头、索引镜头、同构......用于标准库类型的有用函数和预定义镜头的更大库，用于派生镜头的模板 Haskell，以及用于通用拉链和单板式通用遍历等其他东西的一堆代码。

这是一个很大的库——你不必使用所有的东西，但是你想要的东西已经写好了是很好的。

的主要优点`Data.Lens`是它更简单，因此不需要 Haskell 98 之外的扩展。但请注意，如果您只想`Control.Lens`从库中导出 -style 镜头，您可以在不离开 Haskell 98 的情况下完成 - 事实上，完全不依赖于包。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-08T07:14:57.437

如果您正在处理真实世界项目 (tm)，我强烈推荐 Control.Lens。Edwardk 最近投入了大量精力，我相信他很想听听您的用例。在我看来，这将成为规范的 Lens 库。我相信可以肯定地说，你可以用 Data.Lens 做的所有事情，你都可以用 Control.Lens 做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T21:27:37.307

`Data.Lens`更简单，更容易使用。 `Control.Lens`有大量的模块并使用语言扩展来完成工作。

# php - 如何将文件夹中的所有图片重命名为其时间戳。MM-DD-YY hh:mm:ss

> ID：13282880
> 
> 赞同：0
> 
> 时间：2012-11-08T05:17:38.557
> 
> 标签：php, timestamp, rename, batch-rename

我在服务器上有很多带有图片的文件夹，文件名是随机的而且很多，但每个文件都是 jpg。我需要将任何给定文件夹上的每个文件重命名为时间戳信息。

例子。文件名 1.jpg , 2.jpg

大会后 12/15/11 10:20:58.jpg , 12/15/11 11:21:50.jpg 。

实际的日期格式并不重要。

PS重要的是它只修改jpg文件而不是文件夹名称或子文件夹内容。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:25:16.317

您可以使用[DirectoryIterator](http://php.net/directoryiterator)。

```
$dir = new DirectoryIterator('path/to/files');
foreach ($dir AS $file)
{
    if ($file->isDot() OR $file->isDir() OR $file->getExtension() != 'jpg')
    {
        continue;
    }

    // This is just doing it to a timestamp, wrap filemtime in data() to format the name how you like
    rename($file->getPathname(), $file->getPath() . DIRECTORY_SEPARATOR . filmtime($file->getPathname()) . '.jpg');

} 
```

这是来自记忆，因此可能存在一些问题，但我相当确定这就是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:55:24.657

```
$req_file="newname.png";//required file
echo $file_name=strtotime(date("m-d-Y H:i:s"));//convert time to string 
$new_filename=$file_name.".png";//creating new file name

$path="C:\\wamp\\www\\practice\\";//path provides
rename("C:\\wamp\\www\\practice\\newname.png", "C:\\wamp\\www\\practice\\".$new_filename);//rename of file
#rename($path.$req_file, $path.$new_filename);//another way of rename of file

convert file name into string stamp like 1344664010.png 
```

# java - 千克 到 磅和盎司

> ID：13282882
> 
> 赞同：0
> 
> 时间：2012-11-08T05:17:59.273
> 
> 标签：java

我正在尝试编写一个将公斤转换为磅和盎司的程序。如果用户输入 100 公斤，我期望的结果是 220 磅和 7.4 盎司。

我得到了正确的磅值，但我的问题是得到了正确的盎司值。我不知道我错过了什么。此外，当我计算盎司值时，我如何向程序指定我只想要百分之一的答案。例如我只想要 7.4 盎司而不是 7.4353？

```
import acm.program.*;
public class KilogramsToPoundsAndOunces extends ConsoleProgram {
public void run() {

    println("This program converts Kilograms into Pounds and Ounces.");

    int kilo = readInt("please enter a number in kilograms: ");

    double lbs = kilo * POUNDS_PER_KILOGRAM; 

    double oz = lbs * OUNCES_PER_POUND; 

    double endPounds = (int) oz / OUNCES_PER_POUND;

    double endOunces =  oz - (endPounds * OUNCES_PER_POUND); 

    println( endPounds + " lbs " + endOunces + "ozs");

}
private static final double POUNDS_PER_KILOGRAM = 2.2;
private static final int OUNCES_PER_POUND = 16;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T06:04:10.870

Cases where you need exact decimal value; its better to use BigDecimal data type instead of double.

The BigDecimal class provides operations for arithmetic, scale manipulation, rounding, comparison, hashing, and format conversion. [link](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)

BigDecimal provides methods to round the number to given value.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T05:23:26.943

最简单的方法是在那里使用`System.out.printf`和格式化输出：

```
System.out.printf("%d lbs %.1f ozs", endPounds, endOunces); 
```

如果你不能使用`System.out.printf`，你仍然可以使用[`String#format`](http://goo.gl/47VSy)来格式化输出：

```
println(String.format("%d lbs %.1f ozs", endPounds, endOunces)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T05:19:56.980

用于`DecimalFormat`以所需格式打印小数位，例如

```
 DecimalFormat dFormat = new DecimalFormat("#.0");
    System.out.println( endPounds + " lbs " + dFormat.format(endOunces) + " ozs"); 
```

**如果要四舍五入到小数点后一位**，则将数字乘以 10，四舍五入，然后再除并打印如下：

```
double roundedOunces = Math.round(endOunces*10)/10.0;
DecimalFormat dFormat = new DecimalFormat("#.0");
System.out.println( endPounds + " lbs " + dFormat.format(roundedOunces) + " ozs"); 
```

编辑：

试试这个四舍五入：

```
 double roundedOunces = Math.round(endOunces*10)/10.0;. 
```

不四舍五入：

```
 double roundedOunces = endOunces*10/10.0; 
```

# eclipse - 导出后在注册表中找不到 RCP 应用程序

> ID：13282891
> 
> 赞同：1
> 
> 时间：2012-11-08T05:18:52.690
> 
> 标签：eclipse, rcp

您好朋友，当我在 linux 机器上将 eclipse rcp 应用程序作为产品启动时，出现以下错误

> !ENTRY org.eclipse.osgi 2 0 2012-11-08 04:37:14.171 !MESSAGE 以下是未解决的捆绑包的完整列表，如果存在根本原因，请参阅先前的日志条目：!SUBENTRY 1 org.eclipse.osgi 2 0 2012-11-08 04:37:14.171 !MESSAGE Bundle com.spundhan.eboard.project_1.0.0.201211071703 [5] 未解决。!SUBENTRY 2 com.spundhan.eboard.project 2 0 2012-11-08 04:37:14.172 !MESSAGE 缺少必需的捆绑包 org.eclipse.ui.intro.universal_3.2.500。
> 
> !ENTRY org.eclipse.osgi 4 0 2012-11-08 04:37:14.173 !MESSAGE 应用程序错误 !STACK 1 java.lang.RuntimeException: 应用程序“com.spundhan.eboard.project.application”在注册表。可用的应用程序有：org.eclipse.ant.core.antRunner、org.eclipse.cdt.core.GeneratePDOM、org.eclipse.equinox.app.error、org.eclipse.help.base.infocenterApplication、org.eclipse.help .base.helpApplication、org.eclipse.help.base.index工具。在 org.eclipse.equinox.internal.app.EclipseAppContainer.startDefaultApp(EclipseAppContainer.java:248) 在 org.eclipse.equinox.internal.app.MainApplicationLauncher.run(MainApplicationLauncher.java:29) 在 org.eclipse.core.runtime org.eclipse.core.runtime.internal.adaptor 中的 .internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:01:11.820

由于缺少依赖项，可能包含您的应用程序的包`com.spundhan.eboard.project`无法解析。捆绑包似乎`org.eclipse.ui.intro.universal`不是您产品的一部分。将其添加到您的产品配置中应该可以解决此问题。

# native-methods - 在不使用 C/C 的情况下将 .net 方法调用到 java

> ID：13282895
> 
> 赞同：0
> 
> 时间：2012-11-08T05:19:10.097
> 
> 标签：native-methods

谁能解释我如何在我的java代码中调用.net方法（来自.dll），但我不想编写/使用C/C++代码请逐步解释它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:33:26.707

你没有给我们任何信息来解决（这两个项目有多大？你是否被迫使用特定的 CLR/JRE？它们可以是两个独立的进程还是你只需要访问一堆方法？像这样的东西那），但我可以为你指出一个大致的方向......

[IKVM.NET](http://www.ikvm.net/)是在 CLR 上运行的 Java 实现。如果在其中运行 Java 程序，则可以轻松地与任何其他 .NET 语言进行互操作。

如果由于某种原因您不能使用它，那么您可能必须在应用程序中嵌入 Mono 并编写一些 JNI 绑定来启动 CLR 的实例，然后加载并调用您的代码。

如果您有少量方法，请考虑将代码移植到 Java，而不是创建这个庞大的系统以获得少量功能。

我无法一步一步地解释它，因为您没有提供太多关于您有哪些限制或需要如何完成的信息。而且，这也不是一件小事。您正在尝试让两种语言运行时在不使用本机代码的情况下相互交互，而本机代码是两个运行时可以互操作的唯一内容。

# android - Android 文件上传控制

> ID：13282897
> 
> 赞同：0
> 
> 时间：2012-11-08T05:19:22.280
> 
> 标签：android, android-layout

我是 android 的新手，并试图在 android 应用程序中包含一个文件上传器。但我找不到任何相关的控制。我想放置一个像[这样的控件](http://i.stack.imgur.com/eCOCB.gif)

我应该怎么做才能完成这个任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:37:22.683

在 Android 中上传文件没有内置控件。在java中，我们有一个文件选择器来浏览文件。在 android 中，您必须这样做才能从相机或图库中选择文件。

final String[] items = new String[] { "拍照", "从图库中选择" }; ArrayAdapter 适配器 = new ArrayAdapter(this, android.R.layout.select_dialog_item, items); AlertDialog.Builder builder = new AlertDialog.Builder(this);

```
 builder.setTitle("Select Image");
    builder.setIcon(R.drawable.copy_selected);
    builder.setAdapter(adapter, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int item) { // pick from
                                                                // camera
            if (item == 0) {

                imageFilepath = Environment.getExternalStorageDirectory()
                        .getAbsolutePath() + "/tmp_img.jpeg";

                Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

                mImageCaptureUri = Uri.fromFile(new File(Environment
                        .getExternalStorageDirectory().getAbsolutePath(),
                        "/tmp_img.jpeg"));

                intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT,
                        mImageCaptureUri);

                try {
                    intent.putExtra("return-data", true);

                    startActivityForResult(intent, PICK_FROM_CAMERA);
                } catch (ActivityNotFoundException e) {
                    e.printStackTrace();
                }
            } else { // pick from file
                Intent intent = new Intent();

                intent.setType("image/*");
                intent.setAction(Intent.ACTION_GET_CONTENT);

                startActivityForResult(Intent.createChooser(intent,
                        "Complete action using"), PICK_FROM_FILE);
            }
        }
    });

    final AlertDialog dialog = builder.create(); 
```

现在，`onActivityResult`您需要根据需要处理此问题。
谢谢

# android - 不想在每次重新打开时重新启动应用程序

> ID：13282898
> 
> 赞同：1
> 
> 时间：2012-11-08T05:19:31.983
> 
> 标签：android, gps

我是安卓新手。我开发了一个应用程序，我在其中计算我当前位置的经度和纬度，并在特定时间间隔使用它的处理程序更新日期和时间，它通过从该应用程序获取数据来映射谷歌地图上的位置，该应用程序可以准确地更新但一个问题是，当手机被锁定时，这个应用程序无法运行。

1.  我想在后台运行这个应用程序，它会一直运行直到&，除非手机被关闭。当我从该应用程序返回后重新打开应用程序时，该应用程序也开始提供更新。
2.  我想显示上次更新的日期和时间。不重新启动应用程序，也不从当前开放时间更新日期和时间。它在后台持续工作并显示在后台工作的活动。

请帮助...我将非常感谢

我的主要活动代码在这里...

```
package com.ETrack;

public class ETrackActivity extends Activity {

public void acquire()

    {           final String TAG = null;
                PowerManager pm = (PowerManager)getApplicationContext().getSystemService(
                getApplicationContext().POWER_SERVICE);
                WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, TAG);
                wl.acquire();
                wl.release();
    }

    private static final List<? extends NameValuePair> nameValuePairs = null;

    /** Called when the activity is first created. */
     static TelephonyManager tm;

     TextView GPS_Long_txtbx;
     TextView GPS_Lat_txtbx;
     static TextView last_update_time_txtbx;
     TextView onfig_txtbx;
     static String pswd_auth= "13579",  server_host="helpdesk.cispl.com";
     static String interval = "120";
     String Saveinterval = "interval.txt";
     String FILENAME3 = "savetime";
     String Savetime = "savetime.txt";

    Handler h = new Handler();
    Runnable run = new Runnable()

    {

        @Override
        public void run() {

            MyLocation loc = new MyLocation(getBaseContext());
            TextView longitude_view = (TextView) findViewById(R.id.GPS_Long_txta);
                   ((TextView) longitude_view)
                    .setText(" " + String.valueOf(loc.gps_lon));
            TextView latitude_view = (TextView) findViewById(R.id.GPS_Lat_txta);
            ((TextView) latitude_view).setText("  " + String.valueOf(loc.gps_lat));
            long delaytime =(record * 1000);
            last_update_time_txtbx = (TextView) findViewById(R.id.last_update_time_txt);
            last_update_time_txtbx.setText("  " + String.valueOf(java.text.DateFormat.getDateTimeInstance()
            .format(Calendar.getInstance().getTime())));
            tm = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
            String response = CallWebService(tm.getDeviceId(), loc.gps_lon, loc.gps_lat);
            h.postDelayed(this, delaytime);

        }
    };

    public void Saveinterval(String Saveinterval) {
        try {
            File dir = getFilesDir();
            File file = new File(dir, Saveinterval);
            if (file.exists())
                file.delete();
            FileOutputStream fos = openFileOutput(Saveinterval,
                    Context.MODE_PRIVATE);
            fos.write(Saveinterval.getBytes());
            fos.close();
        } catch (Exception ex) {
            ex.getMessage();
        }
    }

    public int RestoreRecord0() 
    {
        try
        {

            File dir = getFilesDir();
            File file = new File(dir, Saveinterval);
            if (!file.exists()) {
                return Integer.parseInt(interval);
            }

            FileInputStream fileIS = new FileInputStream(file);
            BufferedReader buf = new BufferedReader(new InputStreamReader(fileIS));
            String readString = new String();
            String data = " ";

            // just reading each line and pass it on the debugger

            while ((readString = buf.readLine()) != null) 
            {
                data += readString;
            }

            return Integer.parseInt(data);
        }

        catch (Exception ex) {
            ex.getMessage();
        }

        return Integer.parseInt(interval);
    }

   int record = RestoreRecord0();
   private static int activities = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
        tm = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);

        this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 

        last_update_time_txtbx = (TextView) findViewById(R.id.last_update_time_txt);
        last_update_time_txtbx.setText(" "+ String.valueOf(java.text.DateFormat.getDateTimeInstance()
              .format(Calendar.getInstance().getTime())));  

        MyLocation loc = new MyLocation(this.getApplicationContext());
        TextView longitude_view = (TextView)findViewById(R.id.GPS_Long_txta);
        ((TextView) longitude_view).setText(" "+String.valueOf(loc.gps_lon));
        TextView latitude_view = (TextView)findViewById(R.id.GPS_Lat_txta);
        ((TextView) latitude_view).setText(" "+String.valueOf(loc.gps_lat));

        //refresh_location(GPS_Long_txtbx,GPS_lat_txtbx);

                final Button btnSkip = (Button) findViewById(R.id.btnRegister);
                // btnSkip.setTypeface(face);
                btnSkip.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                        // Perform action on click EditText et

                        Intent i = new Intent(ETrackActivity.this, Configuration.class);                        
                        //i.putExtra("Skip", "true");
                        // i.putExtra("Location", txtEmail.getText());
                        startActivity(i);
                        }
                });

    //      last_update_time_txtbx = (TextView)findViewById(R.id.last_update_time_txt);
   //       last_update_time_txtbx.setText(" "+ String.valueOf(java.text.DateFormat.getDateTimeInstance()
//          .format(Calendar.getInstance().getTime())));

                // in this response variable it contains  
                String response = CallWebService(tm.getDeviceId(), loc.gps_lon, loc.gps_lat);

                long delaytime =(record * 1000);
                h.postDelayed(run, delaytime);

                }

  //   public void refresh_location(View longitude_view, View latitude_view, View last_update_time_txtbx)
     public void refresh_location(View longitude_view, View latitude_view)

    {

        longitude_view = (TextView)findViewById(R.id.GPS_Long_txta);
        ((TextView) longitude_view).setText(" "+String.valueOf(LocationService.GPS_Long));
        latitude_view = (TextView)findViewById(R.id.GPS_Lat_txta);
        ((TextView) latitude_view).setText(" "+String.valueOf(LocationService.GPS_Lat));
//      last_update_time_txtbx = (TextView)findViewById(R.id.last_update_time_txt);
//      ((TextView) last_update_time_txtbx).setText(""+String.valueOf(java.text.DateFormat.getDateTimeInstance()
//      .format(Calendar.getInstance().getTime())));

    }

    public void onNothingSelected(AdapterView<?> arg0) {

    }

        public void onClick(View view)
    {
        startActivity(new Intent(ETrackActivity.this,Configuration.class));

    }

        public String CallWebService(String imei, double longt, double lat) {
        String response = new String();
        String str = new String();

        try {

            String url = "http://helpdesk.cispl.com/etracking/track.php?imei="+imei+"&gps_lat="+ Double.toString(lat) +"&gps_lon="+Double.toString(longt);
            HttpClient client = new DefaultHttpClient();
            HttpGet request = new HttpGet();
            URI webservice = new URI(url);
            request.setURI(webservice);
            HttpResponse httpResponse = client.execute(request);
            HttpEntity responseEntity = httpResponse.getEntity();    

             if (responseEntity != null) {
                    response = EntityUtils.toString(responseEntity);
                }           
            } catch (Exception e1){
                e1.printStackTrace();
            }

            return response;
        }

} 
```

请给我解决方案.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T05:38:21.480

要在后台运行应用程序，您需要使用[Service](http://developer.android.com/reference/android/app/Service.html)

使用服务的教程：[here](http://marakana.com/forums/android/examples/60.html)和[here](http://www.vogella.com/articles/AndroidServices/article.html)和[this](https://www.google.co.in/search?q=Using%20Services%20Android)

# php - 简单的验证码实现

> ID：13282899
> 
> 赞同：0
> 
> 时间：2012-11-08T05:19:33.420
> 
> 标签：php, html

我遇到的问题是表单将数据提交给支付处理公司。

我实现的验证码位于此处： [http](http://www.php-help.ro/examples/math_captcha_image) ://www.php-help.ro/examples/math_captcha_image 用于处理最常提交给自己或我有权访问的 php 页面的表单，这里是表单代码：

```
<form action="https://secure.bluepay.com/interfaces/bp10emu" method=POST>

      <input type=hidden name=MERCHANT value="100105032970">
      <tr><td>Zipcode:</td><td><input type=text name=ZIPCODE></td></tr>
      <tr><td>Phone:</td><td><input type=text name=PHONE></td></tr>
      <tr><td>Email:</td><td><input type=text name=EMAIL></td></tr>
      <tr><td>Captcha:</td><td>    <input type="text" name="secure" value="what's the result?" onClick="this.value=''" /><br><br>
      <img src="image.php" alt="Click to reload image" title="Click to reload image" id="captcha" onClick="javascript:reloadCaptcha()" />
      </td></tr>
      <tr><td colspan=2><input type=SUBMIT value="Pay Now"></td></tr>

    </table>
    </form> 
```

当嵌入到提交给自己的表单上时，该脚本可以完美运行。但自从它发布到 bluepay.com 后，我不确定如何在提交之前验证验证码。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:31:42.377

您可以为您的表单提交另一个页面，验证验证码，然后从那里重定向到支付网关。

[使用 POST 数据进行 PHP 重定向](https://stackoverflow.com/questions/5576619/php-redirect-with-post-data)

**或者**

您可以尝试使用 cURL -[将数据发布到 PHP 中的 URL](https://stackoverflow.com/questions/3080146/post-data-to-url-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T05:37:52.307

### 方法一：使用 JavaScript

由于您要将其提交给另一个应用程序，因此最好使用**JavaScript**检查其正确性。因此，您可以使用 jQuery 触发 AJAX 事件，通过将 CAPTCHA 用户输入值传递给执行检查的页面来检查给定答案是否正确。如果正确，则提交表格。

考虑这段代码：

```
<?php
    if ($_POST["captcha"] == $_SESSION["captcha"])
        die ("OK");
    else
        die ("No");
?> 
```

在 JavaScript 中，你可以这样使用[jQuery](http://jquery.com/)的[`$.post()`](http://api.jquery.com/jQuery.post/)函数：

```
$("form").submit(function(){
    $.post({
        url: 'check.php',
        data: $("input[name='captcha']").val(),
        success: function(data) {
            if (data == "OK")
                return true;
            else
                alert("CAPTCHA Fail!");
            return false;
        }
    });
}); 
```

### 方法二：使用 cURL

你可以使用这样的函数：

```
function post_to_url($url, $data) {
   $fields = '';
   foreach($data as $key => $value) { 
      $fields .= $key . '=' . $value . '&'; 
   }
   rtrim($fields, '&');

   $post = curl_init();

   curl_setopt($post, CURLOPT_URL, $url);
   curl_setopt($post, CURLOPT_POST, count($data));
   curl_setopt($post, CURLOPT_POSTFIELDS, $fields);
   curl_setopt($post, CURLOPT_RETURNTRANSFER, 1);

   $result = curl_exec($post);

   curl_close($post);
} 
```

检查验证码，然后处理表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-02T04:27:47.450

```
$("form").submit(function(){
    $.post({
        url: 'check.php',
        data: $("input[name='captcha']").val(),
        success: function(data) {
            if (data == "OK")
                return true;
            else
                alert("CAPTCHA Fail!");
            return false;
        }
    });
}); 
```

# ruby-on-rails - Active Record 验证：长度错误消息以显示实际长度？

> ID：13282900
> 
> 赞同：1
> 
> 时间：2012-11-08T05:19:42.767
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个类，我正在使用 validates 方法来检查长度，并且我想将实际长度注入错误消息中。这可能吗？

这是我当前使用验证的课程：

```
class Something
  validates :summary, :detail, :length => { 
    :in => 300..500,
    :too_short => "must have at least %{count} letters",
    :too_long => "must have at most %{count} letters"
  } 
```

错误信息显示：

```
2 errors prohibited this job from being saved.

Summary must have at least 300 letters
Detail must have at least 300 letters 
```

但我想展示：

```
...
Summary is only 250 letters and must have at least 300 letters
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T06:16:25.570

对于您的解决方案，您可以通过自定义验证

```
validate:summary_length

def summary_length 
  if self.summary.length < 10 && !self.summary.blank?
    errors[:base] << "is only #{self.summary.size} letters and must have at least 10 letters"
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:33:20.783

试试这个，似乎对我有用：

```
class Something
    validates :summary,    
        :in => 300..500,
        :too_short => "summary is only #{summary.length} and must have at least %{count} letters"
        # etc.
    validates :detail,
        :in => 300..500,
        :too_short => "detail is only #{detail.length} and must have at least %{count} letters
       # etc. 
```

# iphone - CMCalibratedMagneticField 不更新

> ID：13282902
> 
> 赞同：2
> 
> 时间：2012-11-08T05:19:49.690
> 
> 标签：iphone, objective-c, core-motion, magnetometer

`CMCalibratedMagneticField`一直返回`0`。

`CMAcceleration`返回值，`CMMagnetometerData`也返回值。只是`CMCalibratedMagneticField`不需要，我需要它，因为它是没有偏差的磁场。

我在 iPhone 4S 上进行测试。

```
[MotionManager startDeviceMotionUpdatesToQueue:deviceQueue
                                   withHandler:^(CMDeviceMotion *motion, NSError *error) {
        CMCalibratedMagneticField f = motion.magneticField;

        //CMMagneticField t = motion.;
        //CMAcceleration s = motion.gravity; Works!
        //_xlabelnew.text = [NSString stringWithFormat:@"%f", s.x];

        _xlabelnew.text = [NSString stringWithFormat:@"%f", f.field.x];
        _ylabelnew.text = [NSString stringWithFormat:@"%f", f.field.y];
        _zlabelnew.text = [NSString stringWithFormat:@"%f", f.field.z];

        //_totallabelnew.text = [NSString stringWithFormat:@"%f", sqrt(f.field.x*f.field.x + f.field.y*f.field.y + f.field.z*f.field.z)];

    }]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T06:34:00.113

你检查过磁力计的精度吗？我的猜测是您对 motion.magneticField.accuracy 的值将是-1（未校准）。不幸的是，我不知道为什么会这样。即使磁力计工作正常，我的 iPhone 4 也得到了同样的结果。

我唯一能想到的是手机在出厂前从未校准过，但这对我的 4 来说比对你的 4S 更有意义。校准现场功能是 2011 年 10 月公开发布的 iOS 5.0 的新功能，而 iPhone 4 是一年多前发布的。但是你的手机是随着 5.0 发布的，所以人们会认为发布的硬件会匹配它所支持的软件功能。再次，只是猜测。抱歉，我无法提供更多帮助。希望你能找到真正的答案。我只是打算自己校准磁力计。

飞思卡尔为此提供了免费工具。该软件（和一些有用的文档）可在此处获得。您可能需要创建一个免费帐户才能下载它，但我不记得了。

[http://www.freescale.com/webapp/sps/site/prod_summary.jsp?code=eCompass](http://www.freescale.com/webapp/sps/site/prod_summary.jsp?code=eCompass)

更新：我拿到了一部 iPhone 5，CMCalibratedMagneticField 工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T02:02:43.613

```
[MotionManager startDeviceMotionUpdatesUsingReferenceFrame:CMAttitudeReferenceFrameXArbitraryCorrectedZVertical toQueue:deviceQueue
                               withHandler:^(CMDeviceMotion *motion, NSError *error) {
    CMCalibratedMagneticField f = motion.magneticField;

    //CMMagneticField t = motion.;
    //CMAcceleration s = motion.gravity; Works!
    //_xlabelnew.text = [NSString stringWithFormat:@"%f", s.x];

    _xlabelnew.text = [NSString stringWithFormat:@"%f", f.field.x];
    _ylabelnew.text = [NSString stringWithFormat:@"%f", f.field.y];
    _zlabelnew.text = [NSString stringWithFormat:@"%f", f.field.z];

    //_totallabelnew.text = [NSString stringWithFormat:@"%f", sqrt(f.field.x*f.field.x + f.field.y*f.field.y + f.field.z*f.field.z)];

}]; 
```

# junit - 使用自定义 JUnit 运行器实现从 Eclipse 插件启动 JUnit 测试

> ID：13282903
> 
> 赞同：3
> 
> 时间：2012-11-08T05:19:52.030
> 
> 标签：junit, eclipse-plugin

我编写了一个自定义的 JUnit 运行程序，我希望它成为 eclipse 插件的一部分，该插件将使用此运行程序启动测试，而无需将 @RunWith 注释应用于类。我设法使用 org.eclipse.debug.ui.launchShortcuts 扩展点在“运行方式”上下文菜单下获得了一个附加项目。但是，我不确定如何使用我的自定义运行程序调用测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T01:47:34.737

所以我想出了一种方法来做我想做的事。但是，它似乎有点hacky。但是，我想我会在这里发布答案，以防其他人遇到同样的问题。

首先，您必须像这样注册一个junit类型：

```
<extension point="org.eclipse.jdt.junit.internal_testKinds">
      <kind
            id="my.junit.kind"
            displayName="Your Kind Name" 
            finderClass="org.eclipse.jdt.internal.junit.launcher.JUnit4TestFinder"
            loaderPluginId="org.eclipse.jdt.junit4.runtime"
            loaderClass="your.test.loader.MyLoaderClass">
         <runtimeClasspathEntry pluginId="org.eclipse.jdt.junit4.runtime" />
         <runtimeClasspathEntry pluginId="org.eclipse.jdt.junit.core" />        
         <runtimeClasspathEntry pluginId="org.eclipse.jdt.junit.runtime"/>    
      </kind>
   </extension> 
```

在 xml 中，您必须指定一个自定义实现，`org.eclipse.jdt.internal.junit.runner.ITestLoader`该实现反过来返回`org.eclipse.jdt.internal.junit.runner.ITestReference`. 核心部分是 ITestReference 的实现，因为这是您创建自定义 JUnit 运行器实例的地方。

```
 public class MyTestReference extends JUnit4TestReference
   {

      public MyTestReference(final Class<?> p_clazz, String[] p_failureNames)
      {
         super(new Request()
         {
            @Override
            public Runner getRunner()
            {
               return new MyCustomRunner(p_clazz);
            }

         }, p_failureNames);
      }
...
} 
```

最后，您必须将其与适当设置种类的启动快捷方式链接

```
public class MyJunitLaunchShortcut extends JUnitLaunchShortcut
{
   @Override
   protected ILaunchConfigurationWorkingCopy createLaunchConfiguration(IJavaElement p_element) throws CoreException
   {
      ILaunchConfigurationWorkingCopy config = super.createLaunchConfiguration(p_element);
      config.setAttribute(JUnitLaunchConfigurationConstants.ATTR_TEST_RUNNER_KIND, "my.junit.kind");
      return config;
   }
} 
```

这确实使用了一堆内部类，所以可能有更好的方法。但这似乎有效。

# zend-framework - 打开下载的文件错误“文件格式不正确”时出现PHPExcel错误

> ID：13282907
> 
> 赞同：1
> 
> 时间：2012-11-08T05:20:06.870
> 
> 标签：zend-framework

我正在使用 Zend 上的 PHPExcel 创建一个包含 UTF-8 编码数据的 Excel 报告。当我下载并尝试在 Excel 中打开它时，它可以在本地环境中运行，但我收到以下错误：来自实时服务器/生产的“文件格式不正确”。任何帮助/参考将不胜感激。

这是我用来下载 xls 文件的代码：

```
public function getCsv($data, $filename = false)
 {
     /**
      * generate a file name using unixTimeStamp
      * @var string $tmpfname
      */
      if ($filename)
      {
          $tmpfile =    "/tmp/".$filename. "-". date('Y-m-d_H:i:s') . ".csv";
          $name = str_replace(' ','',$filename)."-".date('Y-m-d_H:i:s') . ".xls";
      }
      else
      {
          $tmpfile = "/tmp/report". "_". date('Y-m-d_H:i:s') . ".csv";
          $name = "report-".date('Y-m-d_H:i:s') . ".xls";
      }
      /**
       * open Temporary file name in write mode
       * @var object $fp
       */
       $fp = fopen($tmpfile, "w");
       /**
        * foreach datas write to csv
        */
       foreach ($data as $fields)
           fputcsv($fp, $fields, ',', '"');

       /**
        * close file
        */
        fclose($fp);

        try
        {
            $objReader = PHPExcel_IOFactory::createReader('CSV');
            $objPHPExcel = $objReader->load($tmpfile);
            $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5');

            //set Header Content Type as application/csv
            header("Content-Type: application/vnd.ms-excel; charset=utf-8");
            header("Content-Disposition: attachment; filename=$name");
            $objWriter->save('php://output');
        }
        catch (Exception $e)
        {
            echo $e->getMessage();
        }

        exit;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-19T16:11:20.480

您必须在保存之前使用此行：

```
ob_end_clean(); 
```

# python - 在使用同名定义局部变量之前，python无法访问非局部变量

> ID：13282910
> 
> 赞同：7
> 
> 时间：2012-11-08T05:20:33.310
> 
> 标签：python, scope, decorator

> **可能重复：**
> [Python 嵌套函数变量范围](https://stackoverflow.com/questions/5218895/python-nested-functions-variable-scoping)

我以前使用过装饰器，所以我很惊讶地在我的代码中发现了一个错误：

```
def make_handler(name, panels):
    def get(self):
        admin = True
        keys = [ndb.Key('Panel', panel) for panel in panels]
        panels = zip(ndb.get_multi(keys), panels)
        panels = [(panel.panel_html if panel else get_default_content(panel_id), panel_id) for panel, panel_id in panels]
        templates = {'panels': panels, 'admin': admin}
        self.render_template('panel_page.html', **templates)
    return type(name, (BaseHandler,), {'get': get})

"""
Traceback (most recent call last):
  File "C:\Program Files\Google\google_appengine\lib\webapp2\webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "C:\Program Files\Google\google_appengine\lib\webapp2\webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "C:\Program Files\Google\google_appengine\lib\webapp2\webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "C:\Program Files\Google\google_appengine\lib\webapp2\webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "C:\Program Files\Google\google_appengine\lib\webapp2\webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "C:\Program Files\Google\google_appengine\lib\webapp2\webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "C:\Users\Robert\PycharmProjects\balmoral_doctors\main.py", line 35, in get
    keys = [ndb.Key('Panel', panel) for panel in panels]
UnboundLocalError: local variable 'panels' referenced before assignment
""" 
```

我的解决方法是更改`panel`​​为`panel2`超出第一次使用：

```
def make_handler(name, panels):
    def get(self):
        admin = True
        keys = [ndb.Key('Panel', panel) for panel in panels]
        panels2 = zip(ndb.get_multi(keys), panels)
        panels2 = [(panel.panel_html if panel else get_default_content(panel_id), panel_id) for panel, panel_id in panels2]
        templates = {'panels': panels2, 'admin': admin}
        self.render_template('panel_page.html', **templates)
    return type(name, (BaseHandler,), {'get': get}) 
```

现在一切正常，我想知道为什么。

这就是我猜会发生的事情，但我不知道：

面板 = zip(..)

意味着面板是一个局部变量。这意味着该功能不会在面板的外部范围内查找。

这是在 get() 函数运行之前完成的，而不是中途？

我认为它会首先从外部函数中获取面板，然后在内部函数中定义面板时，从那时起它将使用新的局部面板变量。

我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T05:35:48.880

您或多或少是正确的，并且您找到了正确的解决方案。你的问题相当于这个：

```
bars = range(10)

def foo():
    thing = [x for x in bars]
    bars = 'hello'

foo()
# UnboundLocalError: local variable 'bars' referenced before assignment 
```

在函数*定义*时，确定`bars`是局部作用域。然后在函数*运行*时，您会遇到未分配条形的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T05:36:27.040

**是的。**

Python 的作用域规则表明一个函数定义了一个新的作用域级别，并且一个名称绑定到一个作用域级别中仅一个作用域级别的值——它是静态作用域的（即所有作用域都是在编译时确定的）。如您所知，您试图通过读取非本地声明并写入本地变量来违反这一点。正如您所观察到的，解释器通过引发 : 强烈反对这一点，`UnboundLocalError`它已经理解这`panels`是一个*局部*变量（因为它不能同时是非局部变量），但是您没有分配（绑定）一个名称的值，因此它失败了。

## 更多技术细节

决定在 Python 中跟踪变量在编译时在字节码中的位置（对于这种情况，它位于`get.__code__.co_varnames`局部变量的元组中），这意味着变量只能在单个范围级别中使用一定范围。在 Python 2.x 中，不能修改非局部变量；您可以对全局或非局部变量进行只读访问，或者通过使用`global`语句对全局变量进行读写访问，或者对局部变量进行读写访问（默认设置）。这就是它的设计方式（可能是为了性能和纯度）。在 Python 3 中，`nonlocal`引入了该语句，其效果与 类似`global`，但适用于中间范围。

在这种情况下，将修改后的变量绑定到不同的名称是正确的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T05:38:38.067

很多人没有意识到这一点，但 Python 实际上是**静态作用域**的。当 Python 看到从裸名称（即不是某个对象的属性）中读取时，它可以完全通过编译时分析*准确地*确定读取的名称将去往何处。

如果一个名字曾经在一个函数中被赋值，那么这个名字就是那个函数¹中的一个局部变量，它的作用域延伸到整个函数体，*甚至在赋值之前的行上*。

如果名称*未*在函数中分配，则该名称是非局部变量。Python 可以检查任何周围块的静态范围，`def`以查看它是否是其中任何一个中的局部变量。如果不是，则该名称必须是对全局模块或内置模块的引用（全局和内置之间的选择是动态解析的，因此您*可以*使用动态声明的全局隐藏内置模块）。

我相信这主要是为了有效地完成。这意味着在编译函数的字节码时可以知道函数的局部变量集合，并且可以将局部变量访问转换为简单的索引操作。否则 Python 将不得不执行字典查找来访问局部变量，这会更慢。

所以因为你的`get`函数包含一行形式的`panels = ...`，then`panels`是整个函数体中的一个局部变量`get`。赋值`keys`是在局部变量`panels`被赋值之前循环它。

* * *

¹除非该名称已声明`global`或`nonlocal`，但它仍然是静态已知的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T05:35:42.410

如果在函数中分配变量，则假定它引用本地名称，除非您明确声明它，`global`或者在 Python 3.x 中，`nonlocal`. 如果声明为全局变量，则该变量必须在模块的全局变量中定义，不包括上述情况。您已经找到了一个 Python 2.x 解决方案；另一个可能是`panels`作为参数添加`get`并使用`functools.partial`：

```
def make_handler(name, panels):
    def get(self, panels):
        admin = True
        keys = [ndb.Key('Panel', panel) for panel in panels]
        panels = zip(ndb.get_multi(keys), panels)
        panels = [(panel.panel_html if panel else get_default_content(panel_id), panel_id) for panel, panel_id in panels]
        templates = {'panels': panels, 'admin': admin}
        self.render_template('panel_page.html', **templates)
    return type(name, (BaseHandler,), {'get': functools.partial(get, panels=panels)}) 
```

另见： Python 中[的闭包](https://stackoverflow.com/questions/505559/closures-in-python)，[Python 非本地语句](https://stackoverflow.com/questions/1261875/python-nonlocal-statement)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T05:53:26.973

Python 编译器首先扫描函数内的整个代码以确定局部变量集（作为参数传递或在函数内分配新的 val）。这就是为什么您不能在分配之前在函数内部使用分配了新值的变量。

如果编译器不这样做，那么就不可能为函数创建闭包。闭包需要引用所有自由或非局部变量。如果一个 var 对于部分功能是免费的，而对于另一部分是本地的....那就没有意义了 :)

# java - 编写一个计数零的递归函数

> ID：13282913
> 
> 赞同：3
> 
> 时间：2012-11-08T05:21:13.757
> 
> 标签：java, function, methods, recursion

可以通过递归方法计算整数中零的数量，该方法采用单个 int 参数并返回参数具有的零的数量。

所以：

```
zeroCount(1000) 
```

将返回：

```
3 
```

您可以通过执行以下操作从整数中删除最后一位数字：“12345 / 10”= 1234

您可以通过执行以下操作从整数中获取最后一位数字：“12345 % 10”= 5

这是我到目前为止所拥有的：

```
public static int zeroCount(int num)
{
    if(num % 10 == 0)
        return num;
    else
        return zeroCount(num / 10);
} 
```

有没有人有任何帮助我解决这个功能的建议或想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T05:29:40.743

```
public static int zeroCount(int num)
{
    if(num == 0)
       return 0;

    if(num %10 ==0)
        return 1 + zeroCount(num / 10);
    else
        return zeroCount(num/10); 
} 
```

这会工作

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T05:23:35.033

在你的脑海中运行你的代码：

```
zeroCount(1000) 
```

`1000 % 10 == 0`，所以你要回来了`1000`。那没有意义。

* * *

只需弹出每个数字并重复：

这听起来像是家庭作业，所以我将把实际代码留给你，但可以这样完成：

```
zeroes(0) = 1
zeroes(x) = ((x % 10 == 0) ? 1 : 0) + zeroes(x / 10) 
```

请注意，如果没有终止条件，它可以永远递归。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-05T16:57:02.317

这里有三个条件：
1\. 如果 number 是单个数字和 0 ，则返回 1
2\. 如果 number 小于 10 即它是一个数字 1,2,3...9 则返回 0
3\. 调用零递归(数字/10) + 零(n%10)

```
zeros(number){
  if(number == 0 ) //return 1
  if(number < 10) //return 0
  else
       zeros(number/10) + zeros(number%10)
} 
```

n/10 将给我们从左边开始的 n-1 个数字，而 n%10 给我们一个数字。希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-09T07:27:54.273

检查这个正整数：

```
 public static int zeroCount(int number) {
    if (number == 0) {
      return 1;
    } else if (number <= 9) {
      return 0;
    } else {
      return ((number % 10 == 0) ? 1 : 0) + zeroCount(number / 10);
    }
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T05:29:45.190

这是一个简单的问题，您不需要进行递归我认为更好的方法是将整数转换为字符串并检查 char '0'

```
public static int zeroCount(int num)
{
String s=Integer.toString(num);
int count=0;
int i=0;
for(i=0;i<s.length;i++)
{
if(s.charAt(i)=='0')
{
count++;
}
}
return count;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T05:24:25.170

您必须从 if 和 else 调用递归函数。此外，您还缺少一个基本案例：-

```
public static int zeroCount(int num)
{
    if(num % 10 == 0)
        return 1 + zeroCount(num / 10);
    else if (num / 10 == 0)
        return 0;
    else
        return zeroCount(num / 10);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-08T05:51:05.230

你知道**x % 10**给你 x 的最后一位，所以你可以用它来识别零。此外，在检查特定数字是否为零之后，您想取出该数字，如何？**除以 10**。

```
public static int zeroCount(int num)
{
  if(num == 0) return 1;      
  else if(Math.abs(num) < 9)  return 0;
  else return (num % 10 == 0) ? 1 + zeroCount(num/10) : zeroCount(num/10);
} 
```

我使用 math.Abs​​ 来允许负数，你必须导入 java.lang.Math;

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-16T16:14:36.687

```
public static int count_zeros(int n)
{
    if(n<=9)
    {
        if(n==0)
        {  
            return 1;
        }
        else
        {
            return 0;
        }
    }

    int s=n%10;

    int count=0;

    if(s==0)
    {
        count=1;
    }

    return count+count_zeros(n/10);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-18T07:43:41.180

```
static int cnt=0;
    public static int countZerosRec(int input) {
        // Write your code here
        if (input == 0) {
            return 1;
        }      
        if (input % 10 == 0) {
            cnt++;           
        }
        countZerosRec(input / 10);                  
        return  cnt;
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-02-29T14:23:10.820

```
int check(int n){
    if(n==0)
        return 1;
    return 0;

}

int fun(int n)
{
    if(n/10==0)
    {
        if(n==0){
            return 1;
        }
        else{
                return 0;
    }
    }
    return check(n%10)+fun(n/10);

} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-05-23T14:33:26.380

使用递归的 CPP 代码：

```
int final=0;
int countZeros(int n)
{
    if(n==0) //base case
    return 1;
    int firstn=n/10;
    int last=n%10;
    int smallop=countZeros(firstn);
    if(last==0)
        final=smallop+1;
    return final;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-02-09T04:09:55.583

```
 int countZeros(int n){
     //We are taking care of base case 
if(n<=9){         
    if(n==0){
         return 1;
    }
 else
 {
     return 0;
 } 
}     
   int last=n%10;  //last element of number for e.g- 20403, then last will give 3
   int count=0;    //Initalsizing count as zero
   if(last==0){    //We are checking either the last digit is zero or not if it will 
        will update count from 0 to 1
     count=1;
  }
    return count+countZeros(n/10);  //Recursive call 
   } 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-04-03T14:49:14.390

看看这个，这是我想出的解决方案。

```
int countZeros(int input){
//base case
if(input == 0){
    return 1;
}

int count = 0;
int lastDigit = input%10;
if(lastDigit == 0){
  count = 1;
}

//calc the smallInput for recursion
int smallInput = input/10;
//set smallAns = 0, if i/p itself is not 0 and no 0 is present then return smallAns = 0
int smallAns = 0;
//recursion call
if(smallInput != 0){
    smallAns = countZerosRec(smallInput);            
}

//if we get lastDigit = 0 then return smallAns + 1 or smallAns + count, else return smallAns  
if(lastDigit == 0){
    return smallAns+count;
}
else{
    return smallAns;
}} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-06-29T18:13:03.580

```
import java.util.*;
public class Count
{
static int count=0;
static int zeroCount(int num)
{
  if (num == 0){
     return 1;
  }
  else if(Math.abs(num) <= 9)
  { 
     return 0;
  } 
  else
  {
     if (num % 10 == 0)
     { // if the num last digit is zero
        count++;
       zeroCount(num/10);
     } // count the zero, take num last digit out
     else if (num%10 !=0){
         zeroCount(num/10);
     }
  }
  return count;
  }

    public static void main(String[] args)
 {
  Scanner sc = new Scanner(System.in);
  System.out.print("Input: ");
  int num = sc.nextInt();
  System.out.println("Output: " +zeroCount(num));
  }  
  } 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2022-02-17T09:42:46.767

```
int countZeros(int n) 
{
if(n==0)
{
    return 1;
}
if(n<10) // Needs to be java.lang.Math.abs(n)<10 instead of n<10 to support negative int values
{
    return 0;
}
int ans = countZeros(n/10);
if(n%10 == 0)
{
    ans++;
} 
return ans;
} 
```

# android - 如何在android中的视图边缘实现阴影效果？

> ID：13282914
> 
> 赞同：0
> 
> 时间：2012-11-08T05:21:15.227
> 
> 标签：android

搜索后我才发现如何为文本设置阴影和灯光效果，如何在视图上设置阴影效果，使视图之间的边缘更清晰？

我知道您可以将具有阴影效果的背景图像设置为视图。但这并不能真正解决问题，除非我先学会如何生成这些图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:33:01.367

```
paint.setShadowLayer(float radius, float dx, float dy, int color); 
```

我想这会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T06:10:41.863

您还可以`View`在布局的边缘放置虚拟元素。将其背景设置为可绘制的 xml，渐变为黑色到透明。

# c# - 使用 Irony 实现前缀符号表达式解析器

> ID：13282917
> 
> 赞同：2
> 
> 时间：2012-11-08T05:21:24.277
> 
> 标签：c#, expression-trees, prefix, irony

我正在尝试使用带有 Irony 库的上下文无关语法来解析用户输入的前缀符号逻辑表达式。这是一个课堂作业，所以如果有人碰巧是这方面的专家，我很想知道更多。

我需要接受以下格式的用户输入逻辑表达式：

```
and P Q -- (meaning P ^ Q)
or P Q -- (meaning P v Q)
not P  -- (meaning ~P)
imp P Q -- (meaning P -> Q) 
```

我正在尝试使用我在 Irony 中实现的上下文无关语法将这些解析为表达式树。我正在使用的上下文无关语法在 BNF 中：

```
<Expression> ::= <Not> | <And> | <Or> | <Implies> | <Identifier>
<Not>        ::= "not" <Expression>
<And>        ::= "and" <Expression> <Expression>
<Or>         ::= "or" <Expression> <Expression>
<Implies>    ::= "imp" <Expression> <Expression>

(<Identifier> is implemented as an IdentifierTerminal object). 
```

我以前使用 Irony 来解析表达式，但由于某种原因，我无法让它工作。当我键入表达式`and P Q`时，它似乎将“and”标识为标识符终端，而不是 And 非终端的一部分。我可能正在做一些明显的事情，但我根本无法弄清楚。这是我扩展的语言课：

```
class LogicPrefix : Grammar
{
    public LogicPrefix()
        : base(false)
    {
        NonTerminal Expression = new NonTerminal("expression");
        NonTerminal Implies = new NonTerminal("implies");
        NonTerminal And = new NonTerminal("and");
        NonTerminal Or = new NonTerminal("or");
        NonTerminal Not = new NonTerminal("not");
        Terminal Identifier = new IdentifierTerminal("identifier");
        Root = Expression;

        Expression.Rule = And | Or | Not | Identifier;

        Not.Rule = "not" + Expression;
        Implies.Rule = "imp" + Expression + Expression;
        And.Rule = "and" + Expression + Expression;
        Or.Rule = "or" + Expression + Expression;

    }
} 
```

这是我的驱动程序类：

```
class Program
{
    static void Main(string[] args)
    {
        LogicPrefix grammar = new LogicPrefix();
        Parser p = new Parser(grammar);
        ParseTree pt = p.Parse("and P Q");
        //pt has thrown an error flag.
    }
} 
```

如果我做错了什么，请告诉我，我很想对此提出一些建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T05:41:34.670

您的标识符词法分析似乎允许您的其他终端作为标识符进行词法分析，因为根据定义，它可以`IdentifierTerminal`识别“以下划线或字母开头并且仅包含字母、数字和下划线”的任何内容（[来源](http://en.wikibooks.org/wiki/Irony_-_Language_Implementation_Kit/Grammar/Terminals#IdentifierTerminal)）。这意味着当您的程序读取 时`and`，它可以将其作为标识符`and`或关键字读取`and`。

在我看来，您可以通过使用以下行将运算符声明为标点符号来解决此问题：

```
MarkPunctuation("imp", "and", "or", "not") 
```

# java - 如果您使用的是 android 适配器，如何在数组中设置文本颜色？

> ID：13282924
> 
> 赞同：0
> 
> 时间：2012-11-08T05:22:14.260
> 
> 标签：java, android

我想覆盖android适配器中的文本颜色，我该怎么做。字符串的值将从后端服务加载。

请帮帮我。

```
lv = (ListView) findViewById(R.id.report_symptomlv);

        mAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_multiple_choice, mSymptoms);

        lv.setAdapter(mAdapter);
        lv.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

        lv.setOnItemClickListener(this);

//--------------
alert.setPositiveButton("OK", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                    mName = input.getText().toString().toUpperCase();
//----I need to make this text as Orange----
                    Geocoder mGeoCoder = new Geocoder(favorite.this, Locale.getDefault()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T05:27:04.573

尝试这个...

**-**我相信代码胜过千言万语，但仍然有些人需要更多，所以我想解释一下......

**-您****将**需要使用`getView()`用于在.**`ListView`**

 **```
ArrayAdapter<String> adpt = new ArrayAdapter<String>(ReferralsActivity.this, android.R.layout.simple_list_item_1,numList){

            @Override
            public View getView(int position, View convertView, ViewGroup parent) {

                View v = super.getView(position, convertView, parent);

                LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,20);
                ((TextView) v).setTextColor(Color.BLACK);
                return v;
            }

        }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:27:53.990

使用自定义列表视图。您将在扩展视图和设置样式方面拥有更大的灵活性。对于自定义列表视图，请查看此链接。[http://www.androidpeople.com/android-custom-listview-tutorial-part-1](http://www.androidpeople.com/android-custom-listview-tutorial-part-1)。**

# ruby - 通过 Internet 发送 TCP 数据包（使用 Ruby）

> ID：13282926
> 
> 赞同：2
> 
> 时间：2012-11-08T05:22:21.260
> 
> 标签：ruby, sockets, networking, tcp, tcpclient

我正在尝试学习如何通过 Internet 将 TCP 数据包发送到另一台计算机。比如说，计算机 1 通过 Internet 将数据发送到计算机 2（使用 TCP）。假设两台计算机都正确设置了端口转发，我将如何在两台计算机之间建立 TCP 连接（最好在 Ruby 中）？我让它在我的局域网上运行，但是当我通过互联网尝试时，它似乎不起作用。

我的尝试（基本上）：

电脑1：

```
server = TCPServer.new 32500
client = server.accept 
```

电脑2：

```
TCPSocket.new PUBLIC_IP_OF_COMPUTER_1, 32500 
```

问题是 TCPSocket 从不连接到 TCPServer。

我在 Ruby 文档中读到 TCPServer.new 的语法是

```
new(remote_host, remote_port, local_host=nil, local_port=nil) 
```

如果我只保留 local_host=nil 和 local_port=nil（而不是在计算机 1 上为它们分配私有 IP 和端口 32500 号）会发生什么？

如果有人能指出我正确的方向，那就太好了！我希望我的方法至少在某种程度上是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:19:53.297

您创建了一个仅在环回接口上侦听的服务器。

试试这个：

```
curl ifconfig.me 
```

您将获得您的外部 IP 地址，它是如何从外部可见的，例如 123.123.123.123

```
server = TCPServer.new 2000 
```

现在你有一个监听 2000 端口的服务器

```
lsof -i :2000 
```

例如：

> 红宝石 3​​7186​​ wopi 6u IPv4 0xcf0818acc2bdc38d 0t0 TCP *:callbook (LISTEN)

现在从同一台机器连接到本地主机

```
telnet localhost 2000 
```

这行得通

```
telnet 123.123.123.123 2000 # substitute your real external IP address 
```

这行不通

这就是为什么您无法从外部连接。

查看 ngrep、netcat 和 tcpdump 是如何工作的，它们是网络调试的宝贵工具。

# javascript - Jquery/CSS 以 print 中的类为目标

> ID：13282927
> 
> 赞同：0
> 
> 时间：2012-11-08T05:22:26.470
> 
> 标签：javascript, jquery, html, css

我正在尝试将一些 HTML 添加到一个类中......任何想法为什么下面不起作用？

**查询：**

```
$("ul#breadcrumbs li[media='print']").append("<strong>Hello</strong>"); 
```

**HTML：**

```
<ul id="breadcrumbs">   
        <li class="">
            <a href="supporting-overview.html">Supporting Units</a>
        </li>

        <li class="">
            <a href="literacy-and-learning.html">Language of geography</a>
        </li>

        <li class="active">
            <a href="literacy-and-learning.html">literacy and learning</a>
        </li>

</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T05:25:58.530

选择器`ul#breadcrumbs li[media='print']`查找具有值eg的`li`with 属性。您的 html中没有这样的内容，因此没有进行选择，也没有附加元素。`media``print``<li media='print'>``li`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:28:42.913

您正在尝试将`li`元素与属性匹配`media="print"`。目前您没有具有`li`此类属性的单个元素。

要使代码正常工作，您需要拥有

```
<ul id="breadcrumbs">   
        <li class="">
            <a href="supporting-overview.html">Supporting Units</a>
        </li>

        <li class="" media="print">
            <a href="literacy-and-learning.html">Language of geography</a>
        </li>

        <li class="active">
            <a href="literacy-and-learning.html">literacy and learning</a>
        </li>

</ul>

$("ul#breadcrumbs li[media='print']").append("<strong>Hello</strong>"); 
```

**[现场演示](http://jsfiddle.net/4Mw7j/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T05:40:26.983

穆萨是对的。jQuery 只会针对 html 中定义的标签和标签属性。

要实现您想要的，您可以向要附加的元素添加一个类

`$("ul#breadcrumbs li").append("<strong class='visible-in-print'>Hello</strong>");`

并将此元素隐藏在所有媒体类型中，除了`media @print`

```
.visible-in-print {
    display: none;
}

@media print {
    .visible-in-print { 
        display: inline;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T09:58:03.013

我试过这个

```
$( document ).attr( 'style', '@media print { body { font-size: 15pt } }' ) 
```

# selenium - Selenium WebDriverWaits

> ID：13282929
> 
> 赞同：0
> 
> 时间：2012-11-08T05:22:40.383
> 
> 标签：selenium, webdriver, wait, explicit

在下面的 Selenium Explicit wait 中，我看到该方法`until`返回类似

`<V> V`对于方法`until(com.google.common.base.Function<? super T,V> isTrue)`

我的疑问是他们如何将它引用到 type 的元素`WebElement`？

```
WebElement element = b.until(ExpectedConditions.elementToBeClickable(By.id("Email"))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:28:58.957

通过贷款添加答案，我认为这个问题更多地与泛型的工作有关，而不是与 webdriver 有关。因此，阅读有关[泛型](http://docs.oracle.com/javase/tutorial/extra/generics/index.html)的更多信息将有助于回答这个问题。

我不确定以下是否是最好的解释，但我会尝试一下：

当您调用 elementToBeClickable 方法时，它会返回类似`ExpectedCondition<WebElement>`.

until 方法返回 V。V 是一个泛型类型占位符。那么V会持有什么？V 与中的相同`Function<? super T, V>`

你的情况：`Function<? super T, V>`= `ExpectedCondition<WebElement>`。

然后看一下 ExpectedCondition 的定义，

`public interface ExpectedCondition<T> extends Function<WebDriver, T> {}`

因此，在您的情况下，这`ExpectedCondition<WebElement>`意味着`Function<WebDriver, WebElement>` So V 是 WebElement，因此它返回 WebElement。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:00:31.847

正如您可以检查源代码，指定了：

*   `@param <V> The function's expected return type.`
*   方法签名看起来像：`public <V> V until(Function<? super T, V> isTrue) {...}`。

总之，如果您使用[ExpectedCondition](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/ExpectedCondition.html)参数（这很可能），则类型为参数化类型。看下面的例子：

```
 try {
      (new WebDriverWait(webDriver, maxWaitTime)).until(new ExpectedCondition<Boolean>() {
        @Override
        public Boolean apply(WebDriver driver) {
          return applyCondition(driver, locator);
        }
      });
      return true;
    }
    catch (TimeoutException ex) {
      return false;
    } 
```

在这种情况下，如您所见，`until`它是方法的返回类型`Boolean`，它来自参数化类型`ExpectedCondition`：`new ExpectedCondition<Boolean>`

# mysql - 在 MYSQL 中执行 LEFT OUTER JOIN 时插入零而不是 NULL

> ID：13282932
> 
> 赞同：14
> 
> 时间：2012-11-08T05:23:04.010
> 
> 标签：mysql, database

有没有办法在两个表上执行 LEFT OUTER JOIN 时插入零而不是 NULL？

假设我有这样的查询：

```
SELECT * FROM
(SELECT uID from Class) T1
LEFT OUTER JOIN
(SELECT pID from University) T2
ON T1.uID = T2.pID
CASE WHEN T1.uID IS NULL
    THEN 0
ELSE T1.uID
END AS uID` 
```

如我错了请纠正我

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-08T05:32:58.860

如果字段为 NULL，则使用`ISNULL(field, 0)`它将插入零

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-08T05:29:56.763

```
CASE WHEN a.fieldname IS NULL 
       THEN 0
       ELSE a.fieldname
END AS fieldname 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-10T10:42:44.053

就像是：-

```
SELECT * FROM
(SELECT ifnull(uID,0) as uID from Class) T1
   LEFT OUTER JOIN
 (SELECT ifnull(pID,0) as pID from University) T2
   ON T1.uID = T2.pID 
```

# ios - 应用启动时加载多个 uitableview

> ID：13282934
> 
> 赞同：0
> 
> 时间：2012-11-08T05:23:22.740
> 
> 标签：ios, uitableview, xcode4.5

我是 iOS 开发新手，这是我的第一个应用程序。我正在开发一个 Master-Detail iPad 应用程序。应用程序的流程是：当应用程序启动时，表格中显示“部门”列表。当用户选择“部门”时，另一个表格显示为所选部门的所有“文档”列表。当用户选择“文档”单元格时，该文档以只读模式在详细视图中打开。只有在选择了“部门”单元格后，我才加载“文档”表。有什么方法可以在应用程序启动时填充“文档”表（在应用程序委托中？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:28:31.047

您可以使用**基于导航的应用程序**并根据您的要求重新加载表格

# python - 如何使用 Django 在 nginx 中设置子目录

> ID：13282938
> 
> 赞同：3
> 
> 时间：2012-11-08T05:23:44.753
> 
> 标签：python, django, nginx, uwsgi

环境：

*   uwsgi
*   nginx
*   django 1.3

我正在使用`www.example.com`带有 Django 和 nginx 的域，我想通过 访问 Django **`www.example.com/abc/`**，但我不知道如何设置**子目录**。

这是 nginx 配置文件：

```
server {
        listen 80;
        server_name www.example.com;
        error_log /var/log/nginx/xxx.error_log info;

        root /home/web/abc;  # this is the directory of the django program

        location ~* ^.+\.(jpg|jpeg|png|gif|css|js|ico){
                root /home/web/abc;
                access_log off;
                expires 1h;
        }

        location ~ /abc/ {   # I want to bind the django program to the domian's subdirectory
                include uwsgi_params;
                uwsgi_pass 127.0.0.1:9000;
        }
} 
```

当我打开网站`www.example.com/abc/`时，django`urls.py`不匹配，它只匹配`^index$`.

如何修改 nginx 位置以将 django 设置为`www.example.com/abc`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T06:11:25.200

根据[Nginx 文档上的 uWSGI](http://projects.unbit.it/uwsgi/wiki/RunOnNginx)，您只需将 django 传递`SCRIPT_NAME`给 django。

```
location /abc {
    include uwsgi_params;
    uwsgi_pass 127.0.0.1:9000;
    uwsgi_param SCRIPT_NAME /abc;            
} 
```

Django 仍然会“看到” `/abc`，但它应该处理它，以便在您的 url 匹配之前将其剥离。您希望这种情况发生，如果 django 没有看到`/abc`，它会为您的网站生成不正确的 url，并且您的任何链接都不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-29T15:41:12.800

现在在最新版本的 Nginx 和 uWSGI`uwsgi_modifier1 30`中**删除**了它，我不得不使用更新的方法来让它工作：

*uWSGI 配置：*

```
[uwsgi]
route-run = fixpathinfo: 
```

*Nginx 配置*：

```
location /abc {
    include uwsgi_params;
    uwsgi_pass 127.0.0.1:9000;
    uwsgi_param SCRIPT_NAME /abc; # Pass the URL prefix to uWSGI so the "fixpathinfo:" route-rule can strip it out
} 
```

**如果无法解决：**尝试安装 libpcre 和 libpcre-dev，然后使用`pip install -I --no-cache-dir uwsgi`. uWSGI 的内部路由子系统需要在编译/安装 uWSGI*之前安装 PCRE 库。*[有关 uWSGI 和 PCRE 的更多信息。](https://stackoverflow.com/a/22645915/1951234)

# django - 如何为通过 django-cms 添加的图像添加 class 和 id 属性？

> ID：13282944
> 
> 赞同：0
> 
> 时间：2012-11-08T05:24:22.630
> 
> 标签：django, plugins, image, django-cms

我正在使用`cms.plugins.picture`插件通过 django cms 将图像添加到我的网站。我需要指定要添加的图像的类和 id 属性。如何从 cms 或模板系统中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:15:41.630

我发现这是不可能的。因此，我使用 jQuery 在文档就绪处理程序中添加类和 id。

# iphone - iPhone：类似于核心数据中的“where”类型子句

> ID：13282948
> 
> 赞同：1
> 
> 时间：2012-11-08T05:24:29.103
> 
> 标签：iphone, objective-c, core-data

我第一次在我的应用程序中使用核心数据来解决我的问题我已经做了很多谷歌但我没有找到具体的解决方案。

我有**实体**：子类别

**属性**：mainCategoryId，subCategoryName。

现在我想获取数据

```
Select subCategoryName from SubCategory where mainCategoryId=1; 
```

我实现的代码如下：

```
 NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"SubCategory" inManagedObjectContext:managedObjectContext];

    [request setEntity:entity];

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SubCategoryName == %@",@"Triangular1"];
    [request setPredicate:predicate];

    NSError *error;
    arrSubCategory = [managedObjectContext executeFetchRequest:request error:&error]; 
```

如何在 coredata 中获取类似类型的数据

分享你的想法

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:11:38.337

根据您的问题，您需要的是，

```
[NSPredicate predicateWithFormat:@"mainCategoryId = %@",@"1"]; 
```

所以你的代码看起来像，

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription
    entityForName:@"SubCategory" inManagedObjectContext:context];
[fetchRequest setEntity:entity];

NSPredicate *predicate =[NSPredicate predicateWithFormat:@"mainCategoryId = %@",@"1"];
[request setPredicate:predicate];

NSArray *fetchedObjects = [context executeFetchRequest:fetchRequest error:&error];
for (NSManagedObject *info in fetchedObjects) {
    NSLog(@"subCategoryName: %@", [info valueForKey:@"subCategoryName"]);
} 
```

以上只是一个示例代码。根据您的要求，实际实施可能会有所不同。

关于[coredata 的教程在这里](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)。也检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T17:03:00.897

你可以这样做

```
NSString *maincategoryId = @"1";
    NSManagedObjectContext *managedObjectContext = [self managedObjectContext];
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] initWithEntityName:@"SubCategory"];
    [fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"rubriqueid == %@", maincategoryId]]; 
```

在你调用你的 NSMutableArray 来放置你的结果之后：

```
NSMutableArray *answensmuarray = [[managedObjectContext executeFetchRequest:fetchRequest error:nil] mutableCopy]; 
```

# javascript - 3D悬停文字效果？

> ID：13282949
> 
> 赞同：0
> 
> 时间：2012-11-08T05:24:32.203
> 
> 标签：javascript, hover

我发现这个很酷的 javascript/css 效果可以在将鼠标悬停在链接上时创建 3D 立方体滚轮效果。问题是当我尝试实现它时，我无法让它工作（也许是我的 javascript 技能）。

这是效果：

[http://jsfiddle.net/hakim/Ht6Ym/](http://jsfiddle.net/hakim/Ht6Ym/)

这是我的样式表：

和我的网站：

[http://goo.gl/1KbHb](http://goo.gl/1KbHb)

我使用的JS是：

```
<script type='text/javascript'>

    var supports3DTransforms =  document.body.style['webkitPerspective'] !== undefined || 
                                document.body.style['MozPerspective'] !== undefined;

    function linkify( selector ) {
        if( supports3DTransforms ) {

            var nodes = document.querySelectorAll( selector );

            for( var i = 0, len = nodes.length; i < len; i++ ) {
                var node = nodes[i];

                if( !node.className || !node.className.match( /roll/g ) ) {
                    node.className += ' roll';
                    node.innerHTML = '<span data-title="'+ node.text +'">' + node.innerHTML + '</span>';
                }
            };
        }
    }

    linkify( 'a' ); 
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-11T19:36:30.633

我对纯 CSS 做了同样的事情。阅读教程：- [http://www.howtokickblogger.com/2012/11/post-links-hover-effect.html](http://www.howtokickblogger.com/2012/11/post-links-hover-effect.html)

演示 > [http://bit.ly/14AHwcc](http://bit.ly/14AHwcc)

玩得开心 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T07:23:09.453

删除 2 最后一行 js 代码 ( `linkify( 'a' );`) 并重写。这是 jsfiddle 和所有类似网站的问题 [甚至 StackOverFlow ]。那里有一些隐藏的 unicode 字符使函数调用非法。

# asp.net - 缺少 ASP.net 表单身份验证 cookie

> ID：13282951
> 
> 赞同：0
> 
> 时间：2012-11-08T05:24:39.473
> 
> 标签：asp.net, authentication, cookies

背景：我正在使用 javascript 与我的 WCF 服务进行通信。该服务的会话处于 asp 兼容模式。我调用 /publicService.svc/ajax/logon 进行登录，并尝试通过 ajax 检索 /User/Home.aspx。

问题：在本地开发机器（win7）和我的测试服务器（2003 + IIS6 + .net4）上，它没有问题。但是在生产服务器上，登录请求会成功，但身份验证不起作用。

web.config：

```
<authentication mode="Forms">
    <forms loginUrl="~/Account/Login.aspx" timeout="2880" name="party"  />
</authentication> 
```

一些发现：如果我访问生产服务器，我发现身份验证 cookie 丢失。

在工作服务器上：

```
logon: 
   Request Cookies: ASP.NET_SessionId: xxxxx
   Response Cookies: party: xxxxx
Home.aspx:
   Request Cookies: ASP.NET_SessionId: xxxxx
                    party: xxxxx 
```

到目前为止一切顺利，但在有问题的服务器上：

```
logon: 
   Request Cookies: ASP.NET_SessionId: xxxxx
   Response Cookies: party: xxxxx
Home.aspx:
   Request Cookies: ASP.NET_SessionId: xxxxx 
```

此处缺少身份验证 cookie。因此身份验证不起作用。

这可能的原因是什么？所有请求都在同一个域下，所以这里没有跨域问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:46:43.573

尝试添加这个：

```
ticketCompatibilityMode="Framework40" 
```

让它

```
<authentication mode="Forms">
    <forms loginUrl="~/Account/Login.aspx" timeout="2880" name="party"  
    ticketCompatibilityMode="Framework40"/>
</authentication> 
```

根据 msdn “指示是否使用协调世界时 (UTC) 或本地时间作为票证到期日期的值。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:29:25.153

这真是愚蠢！服务器时间配置为一年前，当我更正它时，一切都开始工作

# vb.net - 从（选择语句）中选择

> ID：13282956
> 
> 赞同：1
> 
> 时间：2012-11-08T05:25:04.777
> 
> 标签：vb.net, linq, linq-to-sql, linq-to-entities

如何将其转换为 linq？塔克斯

```
SELECT AccNo, AccName FROM ( 
SELECT fileNo AS AccNo, fileName AS AccName,
(SELECT oldID FROM USER WHERE USER.id = ACCOUNT.id) AS oldID,  
(SELECT newID FROM USER WHERE USER.id = ACCOUNT.id) AS newID FROM FILE inner join ACCOUNT ON AccNo= FileAccNo) TblAllTable  
WHERE AccNo="abc"
GROUP BY AccNo, AccName 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:31:00.893

这里：

```
var TblAllTable = FILE
    .Join(ACCOUNT, f => f.accNo, a => a.fileNo, (f, a) => new
    {
        AccNo = a.fileNo,
        AccName = f.fileName,
        oldID = USER.Where(u => u.ID.Equals(a.id)).First().oldID,
        newID = USER.Where(u => u.ID.Equals(a.id)).First().newID
    });

var result = TblAllTable
    .Where(a => a.AccNo.Equals("abc"))
    .GroupBy(a => new { 
        AccNo = a.AccNo,
        AccName = a.AccName
    }) 
    .Select(a => new
    {
        AccNo = a.Key.AccNo,
        AccName = a.Key.AccName
    }); 

// If you're just selecting grouped keys, 
// it would be better to use Distinct method instead of GroupBy 
```

# c# - 使用 C# 在 Windows XP 上的 Windows 事件查看器中从 EventLog 中读取 XML

> ID：13282957
> 
> 赞同：1
> 
> 时间：2012-11-08T05:25:06.180
> 
> 标签：c#, windows-xp, event-log

如何从Windows XP 上的特定`EventLogEntry`用途中获取 XML？`C#`我已经知道`EventLog`类型（安全）和事件条目 ID。

`EventLogWatcher`和其他类仅在 Windows Vista 和更新版本中可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:31:05.150

您可以使用[LogParser](http://en.wikipedia.org/wiki/Logparser)执行此操作。它是由 x Microsoft 员工 Gabriele Giuseppini 构建的实用程序，可读取大量日志文件格式 -[快](https://stackoverflow.com/questions/10965280/most-efficient-way-to-find-all-exe-files-on-disk-using-c/10965388#10965388)！

我之前已经成功地将它与[事件日志](http://eventanalyser.appointmentsbook.com/)一起使用。

[http://visuallogparser.codeplex.com](http://visuallogparser.codeplex.com)上的好人有一个 C# 接口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-23T22:37:22.250

对于 Windows XP，您可以使用`EventLogReader`和`EventLogQuery`类`EventLogRecords`非常有效地从事件日志中查询。此 API 从 .NET Framework 3.5 开始可用（因此它在 Windows XP 上应该可以正常工作）。

首先，您需要要查询的事件日志的名称（文件系统路径或名称），其次是用作记录选择器的 XPath 表达式。[https://docs.microsoft.com/en-us/windows/win32/wes/sumption-events](https://docs.microsoft.com/en-us/windows/win32/wes/consuming-events)提供了一些示例

基本上，它的工作原理如下：

```
static string RetrieveApplicationEventDetailsXmlById(string eventId)
{
    const string logName = "Application";
    string queryExpression = string.Format("*[System/EventId=\"{0}\"]", eventId);
    var eventLogQuery = new EventLogQuery(logName, PathType.LogName, queryExpression);

    using (var reader = new EventLogReader(eventLogQuery)) 
    {
        EventRecord record;
        if ((record = reader.Next()) != null)
        {
            return record.ToXml();
        }
    }

    return null;
} 
```

鉴于已经指定了一个有效的 XPath 表达式，对 reader`Next`方法的调用将返回下一个可用对象，该对象允许通过该方法`LogEventRecord`以 XML 格式检索事件的详细信息。`ToXml`

# asp.net-mvc-3 - mvc中的jqgrid具有多个删除

> ID：13282960
> 
> 赞同：0
> 
> 时间：2012-11-08T05:25:21.120
> 
> 标签：asp.net-mvc-3, jqgrid

我想用 MVC 在我的 Jqgrid 中添加多个删除功能这里有我当前网格的代码在操作中有两件事查看和删除但我想要一个复选框并在网格外单击一个按钮时单击它选中的项目应该被删除并且在删除动作触发消息之前确认请帮助。

$(文档).ready(函数()

{

```
 @if (ViewBag.Filters != string.Empty)
    {
        @Html.Raw(ViewBag.Filters);
    }

    $("#jq-grid").jqGrid({
        url: '/Home/GetList',//Service URL to fetch data
        datatype: 'json',//Data Type which service will return
        mtype: 'GET', 
        postData://Data that will be posted with every request
        {
            filters: function () {
                return $.toJSON([
                                //Here add the parameters which you like to pass to server
                                { Key: "EmployeeName", Value: $("#txtEmployeeName").val() },
                                { Key: "Id", Value: $("#txtId").val() }
                                ]);
                }
        },
        colNames: ['Employee Id', 'EmployeeName','empPhoto', 'Action'],//Column Names
        colModel: [//Column details
                    { name: "Employee Id", index: "Employee Id", width: "220px" },
                    { name: "Employee Name", index: "EmployeeName", width: "220px" },
                    { name: "empPhoto", index: "empPhoto", width: "50px" ,formatter:imageFormat },
                    //Do not allow sorting on Action Column

                   { name: "Action", index: "Action", sortable: false, width: "220px" }

                  ],

        autowidth: true,//Do not use auto width
        sortname: '@ViewBag.EmployeeGridRequest.sidx',//This will persist sorting column
        sortorder: '@ViewBag.EmployeeGridRequest.sord', // This will persist sorting order
        imgpath: '',//if some images are used then show grid's path
        caption: 'Employee Grid List',//Grid's Caption, you can set it to blank if you do not want this
        scrollOffset: 0,
        rowNum: @ViewBag.EmployeeGridRequest.rows, //Total Pages
        page: @ViewBag.EmployeeGridRequest.page, // Current Page
        rowList: [@ViewBag.EmployeeGridRequest.rowList], // Page Selection Options
       viewrecords: true,
      //  height: "100%",
        altRows: true,//Use alternate row colors
        altclass: 'jqgaltrow',//Alternate row class
        hoverrows: true, //Do not hover rows on mouse over
        pager: $('#jq-grid-pager'),//Div in which pager will be displayed
        toppager: true,

        pgbuttons: true,//Show next/previous buttons
        loadtext:'Loading Data please wait ...',
        //loadui :'block',//enable by default, block will disable inputs, remove this line if you do not want to block UI
        loadComplete: function (response) //Incase you want to perform some action once data is loaded
        {

        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T00:57:56.867

这是我在没有找到 jqgrid api 提供的内置解决方案后采取的一种方法。希望这可以帮助。我采用这种方法是因为我想允许删除那些通过业务规则的记录，并提醒用户注意那些发现问题的记录。

```
 #jqGrid delete button
            //Delete selected devices from jqgrid standard checkbox
             jQuery("#jqDevice").jqGrid('navButtonAdd', '#jqDevicePager', {
                caption: "",
                title: "Delete selected records",
                buttonicon: "ui-icon-trash",
                position: "first",
                onClickButton: function(){

                    //alert("edit button clicked");
                    var selIds = $("#jqDevice").getGridParam("selarrrow");
                    var len = selIds.length;

                    $("#dialogDeleteConfirm").dialog({
                      buttons : {
                        "Confirm" : function() {
                            //loop through each rows selected and delete
                            if(selIds.length > 0){
                                for(var i = len - 1; i >= 0; i--) { //traverse the selarrow array in reverse order.
                                    //alert("Deleting Device... " + selIds[i]); //Test
                                    $.ajax({
                                        type: 'POST',
                                        data: "deviceID=" + selIds[i],
                                        url: '/Device/DeleteDeviceByID',
                                        async: false,
                                        success: function(data, textStatus){
                                            //successfully deleted row
                                            $("#jqDevice").delRowData(selIds[i]);
                                            alert("Successfully deleted records...");
                                        },
                                        error: function (jqXHR, textStatus, errorThrown) {      
                                            alert(JSON.parse(jqXHR.responseText));                                  
                                        }
                                    });
                                }
                            }else{
                                alert("No rows selected.");
                            }
                            //Close Dialog after user confirms delete action
                            $(this).dialog("close"); 
                        },
                        "Cancel" : function() {
                            $(this).dialog("close");
                        }
                      }
                    });                
                }
            });

            # Controller Action
            public ActionResult DeleteDeviceByID(int deviceID) 
            {
                try
                {
                    //update LastModBy before deleting
                    Device device = _deviceRepository.GetDevice(deviceID);
                    device.LastModBy = User.Identity.Name;
                    _deviceRepository.SaveChanges();

                    _deviceRepository.DeleteDevice(deviceID);
                }
                catch (Exception ex)
                {
                    //throw new Exception (ex.Message.Replace(Environment.NewLine, string.Empty));
                    //return Json(new { success = false, message = ex.Message.Replace(Environment.NewLine, string.Empty) });
                    //Good way to raise error in JSON format
                    Response.StatusCode = (int)HttpStatusCode.BadRequest;
                    return Json("There was a problem deleting ID - " + deviceID + " :  " + ex.Message.Replace(Environment.NewLine, string.Empty) + 
                        "\r\n\r\n Please try again. If the problem continues, please contact ... for further assistance.");

                }

                return Json(new { success = true });
            } 
```

# facebook - 获取 Facebook 用户签到

> ID：13282968
> 
> 赞同：6
> 
> 时间：2012-11-08T05:25:44.703
> 
> 标签：facebook, facebook-graph-api, facebook-fql, facebook-checkins

我需要在**照片**和**状态中获取****facebook 用户签到**的列表。

 ****我尝试使用图形 api 来查询 /me/locations'，例如：

```
$this->api->api('/me/locations?limit=1000'); 
```

它返回给我一个包含三种不同类型的用户签到列表：照片、签到或状态。

我的问题是我需要获取有用户签到的照片，但我似乎找不到它。

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T05:53:55.000

如果您查看[用户](https://developers.facebook.com/docs/reference/api/user/)文档，在标题*feeds*下，它列出了一种仅获取其中包含位置（签到）的帖子的方法。

> [https://graph.facebook.com/me/feed?with=location](https://graph.facebook.com/me/feed?with=location)

至于获取带有位置的*照片*（签入），似乎没有任何文档表明可以像过滤帖子一样过滤照片。充其量，我猜你将不得不获取所有照片，然后过滤掉那些没有**地点**标签的照片。帖子使用*位置*标签，而照片使用*地点*标签。****

# android - 查看从左侧离开并从右侧进入

> ID：13282969
> 
> 赞同：5
> 
> 时间：2012-11-08T05:25:44.993
> 
> 标签：android, animation, android-view

我想添加动画，以便我的 imageview 向左滑动，离开屏幕并从右侧进入，滑回原来的位置。我试着做这样的事情..

```
 <translate
        android:duration="1000"
        android:fromXDelta="0"
        android:toXDelta="-100%p" />

    <translate
        android:startOffset="1000"
        android:duration="1000"
        android:fromXDelta="100%p"
        android:toXDelta="0" /> 
```

但是动画不是我想要的..谁能帮帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T05:59:03.983

**编辑**：好的，所以你想做的是a **的痛苦（又一个应该很简单的android东西）！在早期版本的 android 上，两个动画相继出现并不能很好地发挥作用。在从不版本上，您可以使用 api lvl 11 中的动画集。示例[here](https://stackoverflow.com/a/6267645/969325)。或者，我会使用更简单的动画。

以下是如何为活动滑入/滑出（**旧答案**）：

滑入左侧活动：

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromXDelta="100%p" android:toXDelta="0"
    android:duration="@android:integer/config_shortAnimTime"/> 
```

滑入正确的活动：

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromXDelta="-100%p" android:toXDelta="0"
    android:duration="@android:integer/config_shortAnimTime"/> 
```

滑出左侧活动：

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromXDelta="0" android:toXDelta="-100%p"
    android:duration="@android:integer/config_shortAnimTime" /> 
```

滑出正确的活动：

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromXDelta="0" android:toXDelta="100%p"
    android:duration="@android:integer/config_shortAnimTime" /> 
```

示例用法：

```
Intent intent = new Intent(this, YourNewActivity.class);
startActivity(intent);
overridePendingTransition(R.anim.slide_in_left, R.anim.slide_out_left); 
```

背面的示例用法：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        super.onBackPressed();
        overridePendingTransition(R.anim.slide_in_right, R.anim.slide_out_right);
    }
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:35:30.657

正如 Warpzit 所说，它是一个错误并且是一个已知问题......就像在[这里](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/nfJKwl8Bzuk)

我浪费了我的时间认为这是我这边的一个错误。开发人员指定的替代方案是-“您可以通过使用两个动画来实现它。启动第一个并在它结束时（使用动画侦听器进行通知），开始第二个。它不是那么好和容易，但它应该可以工作。

我学到的另一件事是 android honeycomb 比旧版本有更多的动画功能..为了在 pre-honeycomb 版本中使用这些功能，我们可以使用[Nineoldandroids](http://nineoldandroids.com/)

# c# - C#哪个是正确的或更好的表达方式？

> ID：13282970
> 
> 赞同：0
> 
> 时间：2012-11-08T05:25:51.610
> 
> 标签：c#

```
DateTime theMonth = DateTime.Now;
for(int i = 0; i<8; i++){
     string curMonth = theMonth.AddMonths(-i).ToString("MM/yyyy");
} 
```

或者，

```
DateTime theMonth = DateTime.Now;
string curMonth;
for(int i = 0; i<8; i++){
     curMonth = theMonth.AddMonths(-i).ToString("MM/yyyy");
} 
```

哪个是正确或更好的表达方式？还是一样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T06:12:49.187

利用

```
DateTime theMonth = DateTime.Now;
for(int i = 0; i<8; i++){
     string curMonth = theMonth.AddMonths(-i).ToString("MM/yyyy");
} 
```

如果您只打算`curMonth`在循环内部使用，并且您不需要它的值在循环迭代中持续存在。

利用

```
DateTime theMonth = DateTime.Now;
string curMonth;
for(int i = 0; i<8; i++){
     curMonth = theMonth.AddMonths(-i).ToString("MM/yyyy");
} 
```

如果您打算在`curMonth`循环代码完成执行后使用，或者您需要该值在迭代之间保持其值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T06:09:59.587

> @recursive 抱歉，我更改了代码，我的问题是，可以在循环中定义变量吗？

当然，在循环中定义变量是可以的。请注意，每次循环到达末尾“}”时，此变量的内容都会丢失。所以你最初的问题在这里无法回答，因为没有更好的表达方式。这取决于您的要求

# php - 将图像从源文件夹过滤到另一个文件夹

> ID：13282975
> 
> 赞同：0
> 
> 时间：2012-11-08T05:26:12.383
> 
> 标签：php, mysql, sql, image, image-processing

我有一个名为 SOURCE 的文件夹。在该文件夹中，大约有 10,000 张图像。该文件夹包含各种类别的图像。对于特定类别，图像名称存储在表中。现在我想从该文件夹中复制属于特定类别的所有图像，然后将所有这些图像复制到另一个文件夹中。

假设有这样一张桌子，

```
id  imagename
1    abc_1
2    abc_2
3    abc_3
4    abc_4
5    abc_5 
```

所有这些图像都在同一个源文件夹中。我需要运行查询来过滤此类别图像并将所有这些图像复制到另一个文件夹。在那个特定类别中，我有大约 1500 张图片。我在 PHP 和 MYSQL 环境中工作。这该怎么做？希望我的问题很清楚。

提前致谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:40:34.347

用于从一个表值复制到另一个表

```
insert into table2 values (select imagename from table1) 
```

或者

```
insert  into tablename2 (column names) 
values (select * from tablename1 where... ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:07:43.867

在阅读所有评论后澄清一下，这就是我的理解：您想将文件系统上的特定图像文件移动到另一个文件夹，并通过数据库中的 imageNames 过滤这些文件。

1.  从您需要的类别表中检索 imageNames（从 myCategory 中选择 imageNames）并将结果集存储在一个集合中。
2.  遍历集合
    1.  使用已知的目录结构匹配文件名并将其复制到新目录。（看看[http://php.net/manual/en/function.copy.php](http://php.net/manual/en/function.copy.php)）

# php - 电子邮件 ID 不能从 php 到 asp 年龄

> ID：13282976
> 
> 赞同：1
> 
> 时间：2012-11-08T05:26:13.293
> 
> 标签：php, asp.net, forms

我正在尝试从 php 页面发送 emailid 到 asp 页面...但它没有被我的服务器接收。我正在使用表单获取方法..但是如果我在我的邮件 ID 中添加@..那么它的显示错误..否则它可以..它是我的 php 页面编码

```
 <form action="Default.aspx" method="GET" name="frm" title="demo" enctype="multipart/form-data">

  Email<br/> <input type="text" name="email"/><br/><br/>

        <input type="submit" name="submit"/>

     </form> 
```

# c# - 如何创建函数列表

> ID：13282980
> 
> 赞同：0
> 
> 时间：2012-11-08T05:26:28.347
> 
> 标签：c#, linq, lambda

我怀疑这比我想象的要简单！

我可以创建一个 Func 列表，然后添加到它

```
var x = new List<Func<IBQCustomer, string>>();
x.Add(c => c.FullName); 
```

Bu 如何在 Func 中添加一个额外的参数？当我尝试时出现错误

```
var y = new List<Func<IBQCustomer, OrderByDirection, string>>();
y.Add(...); 
```

这可能吗？

我的目标是建立一个属性列表以及如何处理它们

* * *

错误：

```
y.Add(c => c.FullName, OrderByDirection.Asc);
No overload for Add that takes 2 arguments 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T05:38:05.333

您可以声明一个具有多个参数的匿名委托，如下所示：

```
y.Add((customer, direction) => customer.FullName); 
```

然后它会工作。无论调用列表中的每个委托，都必须提供两个参数，`IBQCustomer`并且`OrderByDirection`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:37:46.397

'OrderByDirection' 枚举不是函数参数吗？在这种情况下，您可以使用类似的东西：

```
var y = new List<Tuple<Func<IBQCustomer, string>, OrderByDirection>>();
y.Add(new Tuple<Func<IBQCustomer, string>, OrderByDirection>(c => c.FullName, OrderByDirection.Asc)); 
```

当然，您也可以使用自定义类而不是 'Tuple<>'：

```
class MyClass
{
    public Func<IBQCustomer, string> Function;
    public OrderByDirection Direction;
} 
```

或者你可能写错了 lambda 表达式？这应该有效：

```
var y = new List<Func<IBQCustomer, OrderByDirection, string>>();
y.Add((c, d) => c.FullName); 
```

# jquery - 带有 asp.net 的 JQuery $.get() 在服务器上给出 503 错误

> ID：13282981
> 
> 赞同：1
> 
> 时间：2012-11-08T05:26:29.360
> 
> 标签：jquery, asp.net, ajax

我正在开发一个基本上是注册页面的应用程序。我想通过检查数据库中现有的电子邮件 ID 来停止重复注册。我使用 JQuery $.get() 方法在后台查询页面，然后获取现有或未退出电子邮件的结果。该页面在本地运行完美，但在线时，它会`"503 Service Unavailable"`在输入重复的电子邮件 ID 时返回。

jQuery方法如下：

```
<script type="text/javascript">
$(document).ready(function () {
    $("#ctl00_ContentPlaceHolder1_tbEmail").change(function () {
        var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
        var emailaddressVal = $("#ctl00_ContentPlaceHolder1_tbEmail").val()
        if(!emailReg.test(emailaddressVal)) {
            $("#msgbox").html('Invalid Email ID');
        return;
    }
        $("#ctl00_ContentPlaceHolder1_hidYorN").val("")
        $("#msgbox").removeClass().addClass('messagebox').text('Checking...').fadeIn("slow");
        $.get("scripts/email_availibility.aspx", { user_name: $(this).val() }, function (data) {
            if (data == 'no') 
            {
                $("#msgbox").fadeTo(200, 0.1, function () 
                {
                    $(this).html('This mail id is already registered!').addClass('messageboxerror').fadeTo(900, 1);
                    $("#ctl00_ContentPlaceHolder1_hidYorN").val("N");
                });
            }
            else {
                $("#msgbox").fadeTo(200, 0.1, function ()  
                {
                    $(this).html('You are welcome to register!').addClass('messageboxok').fadeTo(900, 1);
                    $("#ctl00_ContentPlaceHolder1_hidYorN").val("Y");
                });
            }
        });
    });
});
</script> 
```

还有我的 aspx 页面代码（email_availibility.aspx）：

```
string con = ConfigurationManager.ConnectionStrings["myDB"].ConnectionString.ToString();
protected void Page_Load(object sender, EventArgs e)
{
    string data = "no";
    OleDbConnection conn = new OleDbConnection(con);
    string user_name = Request.QueryString["user_name"];
    string strQury = "Select [EmailID] from [RegisterTable] where [EmailID]='" + user_name + "'";
    OleDbCommand cmds = new OleDbCommand(strQury, conn);
    OleDbDataReader dr;
    if (conn.State == ConnectionState.Closed)
        conn.Open();
    dr = cmds.ExecuteReader();
    if (dr.HasRows)
    {
        data = "no";
    }
    else
    {
        data = "yes";
    }
    if (conn.State == ConnectionState.Open)
        conn.Close();
   Response.Write(data);
} 
```

**我不太习惯JQuery，刚开始，所以请简单回答**

# python - 附加超链接

> ID：13282985
> 
> 赞同：-1
> 
> 时间：2012-11-08T05:26:51.540
> 
> 标签：python

我正在尝试在下面附加一个超链接“http://data/CR/”，由于某种原因它没有被附加..anyidea这里有什么问题？

```
INFO = """
<tr>
<td><a href= \"http://data/CR/\" + "{CR}">{CR}</a></td>
<td>{FA}</td>
<td>{CL}</td>
<td>{Title}</td>
</tr>
"""
for item in CRlist[1:]:
    CRstring += INFO.format(
        CR=item[0],
        FA=item[1],
        CL=item[2],
        Title=item[3],
        ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:40:04.837

当它被删除时，我正在处理你最后一次尝试的问题。假设您之前的问题 item[0] 中的 CRlist 始终为空，因此您的 URL 永远不会形成。

至于你如何格式化你的 url，你不需要转义你的双引号，因为你在一个多行字符串中。您也不需要在它周围加上 + 或额外的引号。只需完全按照您想要的方式输入即可。

```
CRlist = [['CR', 'FA', 'CL', 'TITLE'],
          ['', '409452', 'WLAN', '656885\tAge out RSSI values from buffer in Beacon miss scenario'],
          ['', '415560', 'WLAN', '656886\tTo Record SMD Event Logging'],
          ['', '413064', 'wlan', '654661\tTo Record HAL and SLM FW Event Logging'],
          ['', '379104', 'BT', '656928\tCR379104: BT doesn\xe2\x80\x99t work that Riva neither sends HCI Evt for HID ACL data nor response to HCI_INQUIRY after entering into pseudo sniff subrating mode.']]
CRstring = ''
INFO = """
<tr>
<td><a href="http://data/CR/{CR}">{CR}</a></td>
<td>{FA}</td>
<td>{CL}</td>
<td>{Title}</td>
</tr>
"""
for item in CRlist[1:]:
    print item
    CRstring += INFO.format(
        CR=item[0],
        FA=item[1],
        CL=item[2],
        Title=item[3],
        )
print CRstring 
```

# matlab - MATLAB 中的受控随机数/数据集生成

> ID：13282986
> 
> 赞同：1
> 
> 时间：2012-11-08T05:26:54.740
> 
> 标签：matlab, random

比如说，我有一个尺寸为 1x1x1 的立方体，跨越坐标 (0,0,0) 和 (1,1,1)。我想在这个立方体内生成一组随机的点（假设 10 个点），这些点有点均匀分布（即在彼此之间的某个最小和最大距离内，并且也不太靠近边界）。我如何在不使用循环的情况下解决这个问题？如果使用向量/矩阵运算无法做到这一点，那么使用循环的解决方案也可以。

让我提供一些关于我的问题的更多背景细节（这将有助于我确切需要什么以及为什么）。我想在多面体中集成一个函数 F(x,y,z)。我想按如下数字方式进行：

$F(x,y,z) = \sum_{i} F(x_i,y_i,z_i) \times V_i(x_i,y_i,z_i)$

这里，$F(x_i,y_i,z_i)$ 是函数在点 $(x_i,y_i,z_i)$ 的值，$V_i$ 是权重。因此，要准确计算积分，我需要确定一组彼此不太接近或彼此不太远的随机点（对不起，我自己不知道这个范围是多少。我将能够计算出只有在我有工作代码后才使用参数研究）。此外，我需要为具有多个多面体的 3D 网格执行此操作，因此我想避免循环以加快速度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:18:31.780

看看这个[带有固定总和的漂亮随机向量生成器](http://www.mathworks.com/matlabcentral/fileexchange/9700-random-vectors-with-fixed-sum)FEX 文件。代码“生成 m 个随机 n 元素列向量的值 [x1;x2;...;xn]，每个列向量都有一个固定的和 s，并受到限制 a<=xi<=b。向量是随机且均匀地分布在解的 n-1 维空间中。这是通过将该空间分解为许多不同类型的单纯形（线段、三角形和四面体的多维概括）来实现的。“rand”函数用于在每个单纯形内均匀分布向量，并进一步调用“rand”用于选择不同类型的单纯形，其概率与其各自的 n-1 维体积成正比。该算法不执行任何拒绝解决方案 - 所有这些都是这样生成的已经适合规定的超立方体。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T22:14:14.727

使用`i=rand(3,10)`where 每一列对应一个点，每一行对应一个轴上的坐标 (x,y,z)

# performance - 为移动版网站使用子域或子目录

> ID：13282988
> 
> 赞同：1
> 
> 时间：2012-11-08T05:26:59.357
> 
> 标签：performance, mobile, subdomain, maintenance, subdirectory

我正在建立一个网站。和每个人一样，我必须计划单独的移动演示。我已经阅读了几篇关于使用子目录、子域或同一个 URL 的不同内容的[SEO 方面的文章。](http://www.timpeter.com/blog/2011/12/14/subdomains-vs-subdirectories-and-seo/#domain-footnote-1)但我没有在本网站或网络上看到任何真正的技术优势、成本或性能信息。

所以我的主要问题是，哪种方式支持移动设备是最好的方式；子目录、子域，或者只是来自同一 URL 的不同内容（此处不讨论移动应用程序）。我想不出一个可以避免“意见”的技术调查的好方法，抱歉。

我认为会影响答案的考虑因素是：

1/ 哪个更容易在后端编写代码？

2/ 哪个更容易在“查看”部分编码？

3/ 基础设施如何受到影响，即会话跟踪、代码维护、部署、代码复杂性、测试？

4/哪个性能更好？移动网站（假设在重定向之后）是否仍然使用浏览器/设备检测代码，或者只是假设消费者已经到达他们想要的位置？（有一个“完整版”链接/按钮将会话链接到完整版是否正常？）

# java - 何时记录链式异常？

> ID：13282993
> 
> 赞同：6
> 
> 时间：2012-11-08T05:27:14.537
> 
> 标签：java, exception, logging, error-handling

我是一名绿色开发人员，试图在大型多层 Java 应用程序中获得错误处理的句柄 (har-har)。在很多情况下，我认为通过多层链接异常是一个好主意。例如，当调用最低层的某些外部服务失败时，会导致视图一直出现问题：

*   内容 X 已请求，但用户未获得授权
    *   原因：授权用户列表为空
        *   原因：用户管理 web 服务响应错误请求 - 参数 foo 的格式必须像“xyz”

最重要的异常，我真正想检查的堆栈跟踪，是链中的最后一个；我提出了一个错误的请求，我需要修复 foo 的格式。但是当我让这个异常通过层冒泡时，很好地链接在对每一层有意义的异常中......当我最终捕获并记录这个东西时，默认的日志记录行为总是向我展示关于最外层异常的大量细节，并且可能是 5 行堆栈跟踪的根本原因。

这让我想在异常发生时记录它们，并让它们冒泡，但你最终会记录大多数事情两次；它们何时发生以及何时最终被抓住。

这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:08:02.177

我会推荐一种不同的异常管理方法。在应用程序的最顶层（如请求入口点）创建一个 try catch 块来调用任何运行时异常。最好有 2 个 catch 块： - 用于特定于应用程序的（业务）异常 - 用于其余的（异常）

正如您所看到的，您需要介绍自己的异常类型，您将对其进行扩展以针对不同目的创建不同的异常。例如，您可以为应用程序的每一层、每个集成等创建自定义异常。使用未经检查的异常，因为它们都将在顶层处理。当发生任何异常情况（捕获低级异常）时，您应该： - 放置与业务上下文相关的描述（例如“无法从数据库加载帐户数据” - 添加原始异常的描述（例如“原始错误：与数据库的连接失败”） - 将原始异常传递给您的异常，以免丢失跟踪 - 抛出并忘记。换句话说，顶级 catch 块负责适当地处理它（回滚事务，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T05:50:23.607

很好的问题，我很好奇你会得到其他答案。

我倾向于采取“越多越好”的方法，并在每一步都记录下来。这会产生大日志吗？是的，但是当您在大型 Java 应用程序中调试问题时，您会感谢您拥有的每一行日志。还有一些工具（至少是`grep`, `awk`, `sed`trio）可以帮助您过滤大文件。

另一种技术是编写此日志记录代码，但将其关闭（如果您使用的是 log4j 之类的东西，请关闭该`TRACE`级别）。这样，如果您遇到问题，您可能没有可用的日志，但这是一个单行更改（以降低日志记录阈值）并且您开始生成大量数据以进行调试。

与前面的技术相结合，大多数日志库（在这里我再次依赖我对 log4j 的知识）允许您调整不同 java 包的日志级别。这意味着您可以将所有这些“catch and rethrow”日志行写为跟踪，并在`WARN`将上层包保持在`DEBUG`or时关闭低级包的日志记录`TRACE`。

# svn - svn存储库恢复

> ID：13282996
> 
> 赞同：1
> 
> 时间：2012-11-08T05:27:28.473
> 
> 标签：svn, svnadmin

我需要将一些分支 repo 合并到另一个中，但是，我错误地使用了“svn copy”，它覆盖了目标存储库，因此一些文件丢失了。好消息是我每天都有使用 `svnadmin dump' 创建的备份，但我不确定如何最好地恢复丢失的文件并保留以后添加的新文件。

我在想这样做：

1.  创建一些 svn 临时存储库
2.  使用“svn 加载 /path/to/the/temp-repository/
3.  cd /path/to/the/temp-repository/
4.  递归删除所有 .svn 目录
5.  转到我已覆盖的分支并使用 rsync 将丢失的文件发送到工作存储库。

不确定这是否是最好的方法。有什么想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T06:04:59.777

**I have better news for you**

Subversion store all history between changes.

When you accidently `svn copy` you added *additional commit* into destination branch. You can

*   `svn up GOODREV` to good commit (or `svn co BRANCH@GOODREV` into fresh WC) and commit (minor edit-save-commit) on top of bad
*   Undo bad commit by reverse-merge

For svnadmin dump

You have to identify, are these backups incremental (--incremental) or full. In case of full you have to find backup, in which GOODREV exist, `svnadmin load` this dump into **new** repo, `svn copy` from NEW-REPO branch to OLD-REPO branch, kill restored repository

Hint: you have to learn repository administration better: pp. 4-5 is just delirium - SVN repository have absolutely different file-tree and repostory's subtree doesn't exist as physical tree of same structure (and .svn files are Working Copy attribute and storage of WC-metadata)

Bust logical and better (than your) usage of svndump is, again, different. If you still want hide your error from eyes, you have

*   Create **new, full dump** for the range of revisions (-r LOWER:UPPER option), which will exclude BADREVISION.
*   Disable all connection
*   Remove old repository (rm REPODIR + mkdir REPODIR)
*   Restore repo from dump

# mysql - 在间接连接的表上使用 sum 函数。.

> ID：13282999
> 
> 赞同：0
> 
> 时间：2012-11-08T05:27:33.980
> 
> 标签：mysql, database, backend

所以，我对 mySql 完全陌生，只是想自学。

示例表结构：

```
tblA
-----
PK: userId

tblB
-----
PK: workoutId
FK: userId

tblC
-----
PK: cardioId
FK: workoutID 
```

表 C 有一个距离场。

目前，当我跑步时，`SELECT SUM(distance) FROM tblC`我得到了正确的数量，但是，当我只想为特定用户选择距离总和时，我尝试了：

`SELECT SUM(distance) FROM tblC JOIN tblB ON (tblC.workoutId AND tblB.workoutId) WHERE userId = '1'`

这给了我一个比以前高得多的价值。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:39:37.800

```
SELECT SUM(distance)
FROM tblC
JOIN tblB ON tblC.workoutId = tblB.workoutId
         AND tblB.userOd = 1 
```