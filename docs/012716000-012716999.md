# StackOverflow 问答 12716000-12716999

# php - 使用会话中的值选择选项，不起作用

> ID：12716000
> 
> 赞同：0
> 
> 时间：2012-10-03T20:03:32.950
> 
> 标签：php

我试图将选定的属性赋予存储在 SESSION 中的年份（在我发布的脚本中，日期 1990-06-27 是我正在谈论的 SESSION ）。$month 一切顺利，但是当我对 $year 执行相同的 If 语句时，它不起作用，我真的不知道为什么。

```
list($y,$m,$d)=explode('-', "1990-06-27");     
for($month=1; $month<=12; $month++) {
    $monthName = date("F", mktime(0, 0, 0, $month));
    $month = date("m", mktime(0, 0, 0, $month));
    $luni = array ('January' => 'Ianuarie', 'February' => 'Februarie', 'March' =>     'Martie', 'April' => 'Aprilie', 'May' => 'Mai', 'June' => 'Iunie', 'July' => 'Iulie', 'August' => 'August', 'September' => 'Septembrie', 'October' => 'Octombrie', 'November' => 'Noiembrie', 'December' => 'Decembrie');
        If($m === $month) { 
            $selected = 'selected="selected"';
            $monthOptions .= "<option value=\"{$month}\" $selected>{$luni[$monthName]}</option>\n";
        } else {
            $monthOptions .= "<option value=\"{$month}\">{$luni[$monthName]}</option>\n";
        }
}

$an_curent = date("Y", time());
for($year = $an_curent - 80; $year <= $an_curent - 16; $year++) {
    If($y === $year) { 
        $selected = 'selected="selected"';
        $yearOptions .= "<option value=\"{$year}\" $selected>{$year}</option>\n";  
    } else {
        $yearOptions .= "<option value=\"{$year}\">{$year}</option>\n";  
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:07:35.823

`$year`是整数，而`$y`是字符串。因此，`===`运算符始终返回 false。使用`==`应该可以解决这个问题。

# c# - 拳击输入 ironpython

> ID：12716004
> 
> 赞同：0
> 
> 时间：2012-10-03T20:03:40.327
> 
> 标签：c#, ironpython, mvvm-light, boxing

我已经注册了一个 Messenger（MVVM Light Toolkit）来监听 ViewModelBase
在 Iron Python 中我想发送一个我得到的 ViewModel，并将它装箱为一个 ViewModelBase，以便信使接收它。
那么什么相当于：

```
var viewmodel = new MyViewModel();
Messenger.Default.Send((ViewModelBase)viewmodel); 
```

在铁蟒中，还是有其他解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:55:07.927

查看 MVVM Light，它似乎`Messenger.Send`是通用的。如果是这种情况（我正在寻找正确的方法），那么 IronPython 要求您像这样显式设置类型参数：

```
viewmodel = MyViewModel()
Messenger.Default.Send[ViewModelBase](viewmodel) 
```

# css - 页眉和页脚 DIV 与中间内容重叠

> ID：12716008
> 
> 赞同：0
> 
> 时间：2012-10-03T20:03:56.317
> 
> 标签：css, html, dynamic

为了使问题更易于分析，我创建了[这个 jsFiddle](http://jsfiddle.net/BPJxD/1/)：

代码：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <style>
        body {margin:0; }
        #mainContainer { position: absolute; right: 4%; left: 4%; height: 100%; }
        #headerContainer { width: 100%; z-index: 10; position: absolute; background: #323232; color: white; height: 30px; }
        #middleContainer { height: 100%; }
        #leftSection { position: absolute; float: left; width: 175px; background: #71ABD1; height: 100%; overflow: auto; color: black; padding-top: 30px; }
        #middleSection { position: absolute; height: 100%; background-color: yellow; left: 175px; right: 175px; color: black; padding-top: 30px; }
        #rightSection { float: right; height: 100%; width: 175px; border-left: 1px dotted black; background: red; color: black; padding-top: 30px; }
        #footerContainer { position: absolute; bottom: 0; width: 100%; height: 30px; background: #323232; color: white; }
    </style>
</head>
<body>
    <div id="mainContainer">
        <div id="headerContainer">
            headerContainer
        </div>
        <div id="middleContainer">
            <div id="leftSection">
                leftSection
            </div>
            <div id="middleSection">
                middleSection
            </div>
            <div id="rightSection">
                rightSection
            </div>
        </div>
        <div id="footerContainer">
            footerContainer
        </div>
    </div>
</body>
</html> 
```

使用顶部、中间和底部的标记，问题是：

1- 如您所见，尽管在页脚 div 上有`position:absolute`和`bottom:0px`

2-更重要的是，leftSection、middleSection 和 rightSection DIV 与页眉和页脚 DIV 重叠，事实上，在这个小提琴中，查看 3 个中间部分显示的文本的唯一方法是放置填充以避免它显示在标题 DIV。

我尝试在 middleContainer 上放置 30px 的顶部和底部值来解决重叠问题，但这并不能解决问题，我想要的只是将 headerContainer 保持在顶部，将 footerContainer 保持在底部，而所有 3 个中间部分都调整为 100% 高度. leftSection 和 rightSection 具有固定宽度，但 middleSection 具有灵活的宽度和高度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:23:48.553

[http://jsfiddle.net/grc4/XTQuT/2/](http://jsfiddle.net/grc4/XTQuT/2/)在没有指定实心高度值的情况下完全符合我的要求。

```
 <!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
      <style>
    body {
    margin: 0;
    height:100%;
    }
#mainContainer {
    position: absolute;
    right: 4%;
    left: 4%;
    height: 100%;
}
#headerContainer {
    width: 100%;
    position: relative;
    background: #323232;
    color: white;
    height: 30px;
}
#middleContainer {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    margin: 30px 0;
}
#leftSection {
    float: left;
    width: 175px;
    background: #71ABD1;
    height: 100%;
    overflow: auto;
    color: black;
}
#middleSection {
    position: absolute;
    background-color: yellow;
    left: 175px;
    right: 175px;
    top: 0;
    bottom: 0;
    color: black;
}
#rightSection {
    float: right;
    height: 100%;
    width: 175px;
    border-left: 1px dotted black;
    background: red;
    color: black;
}
#footerContainer {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 30px;
    background: #323232;
    color: white;
}​
</style>
    </head>
    <body>
        <div id="mainContainer">
            <div id="headerContainer">
                headerContainer
            </div>
            <div id="middleContainer">
                <div id="leftSection">
                    <div style="margin-top: 30px;">leftSection</div>
                </div>
                <div id="middleSection">
                    <div style="margin-top: 30px;">middleSection</div>
                </div>
                <div id="rightSection">
                    <div style="margin-top: 30px;">rightSection</div>
                </div>
            </div>
            <div id="footerContainer">
                footerContainer
            </div>
        </div>
    </body>
    </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:13:44.300

"padding-top: 30px;" 在您的 3 个内部元素上，它们使它们比实际身体的高度高 30 像素，从而产生了您的问题。

从这 3 个元素中删除顶部填充，然后使您的页眉和页脚相对定位，而不是绝对定位，您应该进行设置。

像这样：http: [//jsfiddle.net/BPJxD/28/](http://jsfiddle.net/BPJxD/28/)

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <style>
        body {margin:0; }
        #mainContainer { position: absolute; right: 4%; left: 4%; height: 100%; }
        #headerContainer { width: 100%; z-index: 10; position: relative; background: #323232; color: white; height: 30px; }
        #middleContainer { height: 100%; }
        #leftSection { position: absolute; float: left; width: 175px; background: #71ABD1; height: 100%; overflow: auto; color: black; }
        #middleSection { position: absolute; height: 100%; background-color: yellow; left: 175px; right: 175px; color: black;  }
        #rightSection { float: right; height: 100%; width: 175px; border-left: 1px dotted black; background: red; color: black;  }
        #footerContainer { position: relative; width: 100%; height: 30px; background: #323232; color: white; }
    </style>
</head>
<body>
    <div id="mainContainer">
        <div id="headerContainer">
            headerContainer
        </div>
        <div id="middleContainer">
            <div id="leftSection">
                leftSection
            </div>
            <div id="middleSection">
                middleSection
            </div>
            <div id="rightSection">
                rightSection
            </div>
        </div>
        <div id="footerContainer">
            footerContainer
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T20:37:29.477

您的问题是您在 and 中使用了不必要的绝对定位`headercontainer`，`footercontainer`解决[方案](http://jsfiddle.net/wQqBW/)

HTML：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
</head>
<body>
    <div id="mainContainer">
        <div id="headerContainer">
            headerContainer
        </div>
        <div id="middleContainer">
            <div id="leftSection">
                leftSection
            </div>
            <div id="middleSection">
                middleSection
            </div>
            <div id="rightSection">
                rightSection
            </div>
        </div>
        <div id="footerContainer">
            footerContainer
        </div>
    </div>
</body>
</html> 
```

CSS：

```
body { margin:0; }
#mainContainer
{ 
    position: absolute; 
    right: 4%; left: 4%; 
    height: 100%; 
}
#headerContainer
{ 
    width: 100%; 
    z-index: 10; 
    position: relative; 
    background: #323232; 
    color: white; 
    height: 30px;
}
#middleContainer { height: 100%; }
#leftSection
{
    position: absolute; 
    float: left; 
    width: 175px; 
    background: #71ABD1; 
    height: 100%; 
    overflow: auto; 
    color: black; 
    padding-top: 30px;
}
#middleSection
{ 
    position: absolute; 
    height: 100%; 
    background-color: yellow; 
    left: 175px; 
    right: 175px; 
    color: black; 
    padding-top: 30px; 
}
#rightSection
{
    float: right; 
    height: 100%; 
    width: 175px; 
    border-left: 1px dotted black; 
    background: red; 
    color: black; 
    padding-top: 30px; 
}
#footerContainer 
{  
    position: relative; 
    bottom: 0; width: 100%; 
    height: 30px; 
    background: #323232; 
    color: white;
} 
```

回顾你的整个 Fiddle 我注意到你在每个`div`. 这是飞机错了。

您应该只在以下情况下进行绝对定位：

1.  您需要一个没有文档通常格式的容器。例如弹出框或浮动框。
2.  您需要在具有固定定位`div`的父级内部使用`div`，但这仅在父级定位设置为时才有效`relative`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T00:07:02.953

您可以删除所有 3

```
padding-top: 30px; 
```

像

```
#leftSection { position: absolute; float: left; width: 175px; background: #71ABD1; height: 100%; overflow: auto; color: black;  }
#middleSection { position: absolute; height: 100%; background-color: yellow; left: 175px; right: 175px; color: black; }
#rightSection { float: right; height: 100%; width: 175px; border-left: 1px dotted black; background: red; color: black;  } 
```

并像这样更改您的html

```
<div id="mainContainer">
    <div id="headerContainer">
        headerContainer
    </div>
    <div id="middleContainer">
        <div id="leftSection">
            <div style="margin-top:30px;">leftSection</div>
        </div>
        <div id="middleSection">
            <div style="margin-top:30px;">middleSection</div>
        </div>
        <div id="rightSection">
            <div style="margin-top:30px;">rightSection</div>
        </div>
    </div>
    <div id="footerContainer">
        footerContainer
    </div>
</div> 
```

我希望这会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T11:22:14.117

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <style>
        body {margin:0; }
        #mainContainer { position: relative; right: 4%; left: 4%; height: 100%; width:1000px; }
        #headerContainer { width: 1000px; z-index: 10; position: absolute; background: #323232; color: white; height: 30px; }
        #middleContainer { height: 100%; width:1000px; position:relative; display: table-cell;}
        #leftSection { float: left; width:25%; background: #71ABD1;  overflow: auto; color: black; padding-top: 30px;  height: 100%;}
        #middleSection { float: left;  height:100%; width:50%; background-color: yellow;  color: black; padding-top: 30px; }
        #rightSection { float:left; height:100%; width: 25%; background: red; color: black; padding-top: 30px; }
        #footerContainer {  bottom: 0; width:1000px; height: 30px; background: #323232; color: white; float:left;}
    </style>
</head>
<body>
<div id="mainContainer">
  <div id="headerContainer"> headerContainer </div>
  <div id="middleContainer" >
    <div id="leftSection"> leftSection </div>
    <div id="middleSection"> middleSection </div>
    <div id="rightSection"> rightSection
      rightSection            rightSection            rightSection            rightSection            rightSection            rightSection            rightSection </div>
  </div>
  <div id="footerContainer" > footerContainer </div>
</div>
</body>
</html> 
```

# javascript - 将点击绑定到 jquery 中的 div 没有 children的

> ID：12716009
> 
> 赞同：0
> 
> 时间：2012-10-03T20:03:57.313
> 
> 标签：javascript, jquery, html

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T20:09:08.713

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T20:09:42.337

如果您只希望绑定元素触发处理程序，请将其放在处理程序的顶部。

```
if (this !== e.target)
    return; 
```

现在，如果单击任何嵌套元素，代码将立即返回。*（不要忘记为`e`处理程序定义参数。）*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T20:07:00.903

```
$("#parent *").on("click", function(e) {
    if ( e.target.nodeName.toLowerCase() == 'a' ) {
        e.stopPropagation();
    }

    ... your original code ...
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T20:07:08.467

您可以通过 target.nodeName 检查单击的元素

```
$("div").click(function(e){
    if(e.target.nodeName == "div" $(e.target).hashClass('validDiv')){
        // do stuff
    }
     else{
       return false;
   }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T20:09:11.323

我首选的方法是将点击事件“劫持”成单独的单独函数。由于`<a>`链接将首先被触发，因此您可以让该链接在页面内设置一个布尔值，`<div>`onclick 检查并简单地让该链接在检测到之前的点击时返回 false。

```
var linkClicked = false;

function LinkClick(something)
{
    linkClicked = true;
    // Do something
}

function DivClicked(something)
{
    if (linkClicked)
    {
        linkClicked = false;
        return false;
    }

    // Do something else
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-03T20:25:54.467

这是一个小提琴：http: [//jsfiddle.net/phillipkregg/65fNS/](http://jsfiddle.net/phillipkregg/65fNS/)

这是非常基本的——因为我不知道你当前的代码是什么——但我没有看到 stopPropagation(); 有任何问题。

进行实验，如果您删除 ，`e.stopPropagation()`您会看到当您单击链接时，它首先触发该函数，然后是 div 的函数。

# iphone - 如何在 iPhone 上传输图像而不在标题中留下 exif 缩略图？

> ID：12716010
> 
> 赞同：1
> 
> 时间：2012-10-03T20:04:02.867
> 
> 标签：iphone, ios, image-processing, jpeg, exif

我操纵了一些图像来替换照片 exif 标题中的缩略图。每次我通过电子邮件或以其他方式将 exif 信息删除时，我都会有兴趣将这样的照片传输到 iPhone。

我也很想知道是否可以通过 iOS Sdk 直接在 iphone 应用程序中替换此类信息，例如缩略图标头 exif，然后将修改后的照片保存在照片卷中而不会丢失 exif 标头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:27:22.847

您必须先保存图像，在此期间 iPhone 将添加默认 EXIF 信息。您必须使用 ALAssetLibrary 读取图像并修改 EXIF。

# ruby - 我可以创建一个简单的网站来接受输入和显示，而不需要 Rails、数据库或外部 Web 服务器吗？

> ID：12716018
> 
> 赞同：1
> 
> 时间：2012-10-03T20:04:27.427
> 
> 标签：ruby

我想看看我是否可以只使用 Ruby 创建一个简单的网站，比如博客。没有 Rails 或数据库或外部 Web 服务器。我计划将数据存储在文件中以进行持久化。

我想使用 TCPServer、CGI 和 Net::HTTP。

有没有更简单的方法可以使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T20:11:06.640

设计网站时有很多活动部分。

根据练习的目的，您可能需要考虑使用非常简单的 Web 框架，例如[Camping](https://camping.github.io/camping.io/)、[Sinatra](http://www.sinatrarb.com/)或[Ramaze](http://ramaze.net/)。如果您想对 Web 编程有一个顶级的理解，这可能是最好的解决方案，因为它只有您需要的东西（Camping 小于 4k！）并处理诸如路由之类的东西。

构建 Web 服务器更多的是 HTTP 解析中的练习。您可能想省略框架并尝试在 Rake（许多流行的 Web 服务器的 API）和 Webrick 或 Thin 等简单的 Web 服务器之上构建一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T21:40:20.267

你也可以试试[浓缩咖啡](http://e.github.com/)

它易于学习和快速运行。

并提供创建过程所需的所有自由。

它也没有隐藏的“费用”，一切都是透明的。

# wordpress - 禁用 Woocommerce 上的商店页面以保护类别

> ID：12716020
> 
> 赞同：7
> 
> 时间：2012-10-03T20:04:33.537
> 
> 标签：wordpress, woocommerce

我试图禁用 Woocommerce 中的“商店”页面。基本上，我创建了一个商店主题来为摄影师出售打印和图像下载。

因为我需要创建私人画廊，所以我创建了一个自定义帖子类型，我使用 woocommerce 类别短代码来显示产品，然后我使用密码保护帖子类型。

这是密码保护 woocommerce 类别的一种解决方法（如果有人知道更好的类别，请解释）。

问题是有人去/shop 他们会购买所有产品，包括“受保护的产品”。所以我需要禁用商店页面，我需要在我的主题功能上以编程方式进行。有什么想法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2016-03-16T01:01:54.027

要禁用商店页面，请`archive-product.php`从 复制文件`/wp-content/plugins/woocommerce/templates/archive-product.php`并放入`/wp-content/themes/{Your Theme}/woocommerce/archive-product.php`

打开文件并使用以下代码覆盖文件中的所有内容：

```
<?php
global $wp_query;

$wp_query->set_404();
status_header(404);

get_template_part('404'); 
```

保存文件，现在您的 Shop 页面消失了，取而代之的是 404 页面！

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-12-13T22:50:54.373

将此添加到函数中：

```
function woocommerce_disable_shop_page() {
    global $post;
    if (is_shop()):
    global $wp_query;
    $wp_query->set_404();
    status_header(404);
    endif;
}
add_action( 'wp', 'woocommerce_disable_shop_page' ); 
```

文档：[WooCommerce 条件函数文档](https://docs.woocommerce.com/wc-apidocs/source-function-is_product.html#17-24)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-09-05T09:44:31.583

WooCommerce 有一个用于创建产品帖子类型的数组的过滤器：`woocommerce_register_post_type_product`。

您可以完全删除帖子类型的存档，而不是更改存档模板以强制其重定向，但`has_archive`在创建时更改帖子类型的属性。

```
add_filter('woocommerce_register_post_type_product', function($post_type) {
    $post_type['has_archive'] = false;
    return $post_type;
}); 
```

然后，您应该通过转到**WooCommerce » 设置 » 产品 » 显示**，然后单击“商店页面”选项上的“x”来删除 CMS 中的商店页面。

您可能需要刷新永久链接缓存，只需单击“**设置”»“永久链接**”中的“更新”按钮即可。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-08T05:44:55.537

*编辑 - 显然我在下面建议的页面设置不再有效。如果 WooCommerce 没有插件设置来更改它，我个人会使用像[Redirection](https://wordpress.org/plugins/redirection/)这样的 wordpress 重定向插件。这样，您可以自动将它们从不需要的商店页面重定向到显示您的产品的任何页面。它避免了 404 问题并保持一切正常。它还避免了编辑模板文件，这给非开发人员增加了复杂性。

* * *

老答案：

您是否尝试过 Woo 设置？

管理区域，左侧主菜单，Woocommerce > 设置单击页面选项卡。

在页面设置下是“商店基本页面”，在下拉列表中，右侧有一个小“x”。单击该按钮以摆脱该页面。

如果其他地方有需要修复的链接，请告诉我，我会找到钩子/过滤器来解决它。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-01-15T20:54:59.953

template_redirect 是页面渲染之前的最后一个钩子，所以在我的用例中，我询问正在查看的页面是否是“商店”页面，如果是我重定向到（在我的情况下）定价页面。

```
function my__template_redirect(){
    if(is_shop()){
        wp_redirect(site_url() . '/pricing/', '302');
    }
}
add_action('template_redirect', 'my__template_redirect'); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-17T20:49:19.577

最后一个建议不适用于 WP 4.6.1 和 WooCommerce 2.6.4。在“发布”选项卡中隐藏产品对我有用。

[http://paperhedge.com/hide-products-from-displaying-in-shop-page-woocommerce/](http://paperhedge.com/hide-products-from-displaying-in-shop-page-woocommerce/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-31T16:14:22.400

你需要钩几个（或者更多）的东西：

```
/* hide category from shop pages */
add_action( 'pre_get_posts', 'custom_pre_get_posts_query' );
function custom_pre_get_posts_query( $q ) {

    if ( ! $q->is_main_query() ) return;
    if ( ! $q->is_post_type_archive() ) return;

    if ( ! is_admin() ) {
        $q->set( 'tax_query', array(array(
            'taxonomy' => 'product_cat',
            'field' => 'slug',
            'terms' => array( YOUR-CATEGORY-SLUG, YOUR-CATEGORY-SLUG-2 ), // Don't display products in the knives category on the shop page
            'operator' => 'NOT IN'
        )));

    }

    remove_action( 'pre_get_posts', 'custom_pre_get_posts_query' );

} 
```

更改，显然是 YOUR-CATEGORY-SLUG, YOUR-CATEGORY-SLUG-2 让您的猫或猫从商店页面中隐藏。

然后，您也需要将它们从菜单中隐藏，对吗？：

```
/* hide category from menues */
add_filter( 'get_terms', 'get_subcategory_terms', 10, 3 );
function get_subcategory_terms( $terms, $taxonomies, $args ) {
    $new_terms = array();

    // if category and on the shop page (change it with is_woocommerce() if want to hide from all woo pages)
    if ( in_array( 'product_cat', $taxonomies ) && ! is_admin() && is_shop() ) {

        foreach ( $terms as $key => $term ) {
          if ( ! in_array( $term->slug, array( YOUR-CATEGORY-SLUG, YOUR-CATEGORY-SLUG-2 ) ) ) {
            $new_terms[] = $term;
          }

    }
        $terms = $new_terms;
    }
  return $terms;
} 
```

但我不认为这能 100% 解决问题，从那以后，搜索结果呢？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-30T17:38:51.727

要**禁用默认商店**页面并为自定义页面**保留 /shop/ slug** ，请使用以下命令：

```
function remove_woocommerce_default_shop( $args, $post_type ) {
    if (class_exists('WooCommerce')) {
        if ( $post_type == "product" ) {
            $args['has_archive'] = true;
        }
        return $args;
    }
}
add_filter('register_post_type_args', 'remove_woocommerce_default_shop', 20, 2); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-07-29T16:30:09.593

**试试这个**

1.  创建名为“商店”的新页面
2.  转到“woocommerce”>“设置”>“产品”>“显示选项卡”
3.  选择名为“Shop”的商店页面，然后单击保存更改
4.  返回“页面”然后删除“商店”页面（将页面保留在垃圾箱中，不要永久删除）

**这种方法对我来说很好**

# postgresql - 将记录作为函数参数 PL/pgSQL 传递

> ID：12716024
> 
> 赞同：18
> 
> 时间：2012-10-03T20:04:55.460
> 
> 标签：postgresql, types, plpgsql, common-table-expression, sql-insert

首先，我对 pl/pgsql 真的很陌生。一个项目需要它。

我被这个（简化的）问题所困扰。

我的 db 模式具有与 m 的关系（作者、书籍、作者书籍）

现在我想要一个 pl/psgsql 函数 insert_book。（我知道所有作者肯定已经在作者表中，所以我只想传递他们的主键）。

这个功能大纲是我想到的。

```
 create or replace function insert_book(book_to_insert book, authors integer[])
  returns void as $$
begin
    -- insert book into table books
    -- for each author add an entry to author_books table
end;
 $$ language plpgsql; 
```

作为论据，我想通过类型书和编写它的作者的记录。但这究竟是如何工作的呢？我用谷歌搜索了很多，似乎无法弄清楚......

**问题 1**：功能大纲“正确”/有意义吗？

**问题2**：如何将记录簿插入表格簿？我是否必须检查书籍的所有领域（标题、isbn、出版商……）并将它们添加到 INSERT INTO 语句中，还是有一种“更智能”的方式？

**问题 3**：如何调用我的函数 insert_book？我在这里找到了这个例子（http://dbaspot.com/postgresql/206142-passing-record-function-argument-pl-pgsql.html），但这并没有真正帮助我。出于测试目的，我使用了 shell，但稍后我们将使用 Java 和 JDBC。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-03T20:22:11.567

使用[**`unnest()`**](http://www.postgresql.org/docs/current/interactive/functions-array.html#ARRAY-FUNCTIONS-TABLE)和[数据修改 CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)（需要 Postgres 9.1 或更高版本），这可以是一个简单的 SQL 查询：

```
WITH x AS (SELECT '(1,foo_book)'::book AS _book
                , '{1,2,3}'::int[]     AS _authors)
   , y AS (
   INSERT INTO book  -- no column list, correct due to composite type
   SELECT (x._book).*
   FROM   x
   RETURNING book_id
   )
INSERT INTO author_book (book_id, author_id)
SELECT y.book_id, unnest(x._authors)
FROM   x,y;  -- CROSS JOIN ok, only 1 row for x and y 
```

第一个 CTE`x`仅用于简化数据输入，并非绝对需要。

### [SQL小提琴。](http://sqlfiddle.com/#!12/f33b3/3)

### 至于你的问题：

> 问题1：功能大纲“正确”/有意义吗？

传递基本类型而不是复合类型可能更容易`book`，但这是一种完全有效的方法。不过，您必须了解复杂类型的语法。例如，请注意我的示例中名称周围的括号：`(x._book).*`.

plpgsql**函数**可能如下所示：

```
CREATE OR REPLACE FUNCTION f_insert_book(_book book, _authors integer[])
   RETURNS void AS 
$func$
BEGIN
    WITH y AS (
        INSERT INTO book b
        SELECT (_book).*
        RETURNING b.book_id
        )
    INSERT INTO author_book (book_id, author_id)
    SELECT y.book_id, unnest(_authors)
    FROM   y;
END
$func$ LANGUAGE plpgsql; 
```

> 问题2：如何将记录簿插入到表格簿中？（...）还是有“更聪明”的方式？

更聪明的方法是用 分解复合类型`(variable_name).*`。

由于*类型*保证与`table`（从它派生）匹配，因此这是极少数情况之一，在持久化代码中*不*为命令提供列列表是完全可以的。`INSERT`

> 问题 3：如何调用我的函数 insert_book？...

```
SELECT f_insert_book('(1,foo_book)'::book, '{1,2,3}'::int[]); 
```

在其他 plpgsql 函数中，如果您不为（不存在的）结果提供目标 ( ) ，请使用[`PERFORM`](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-SQL-NORESULT)而不是。`SELECT``INTO foo`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-24T01:10:59.887

传递 JSON 数据类型（Postgresql 9.2 或更高版本）：

```
CREATE OR REPLACE FUNCTION f_insert_book(_book json, _authors json)
   RETURNS void AS 
$$
BEGIN
-- insert book into table books
Insert into books values select * from json_populate_recordset(null:book, _book);
    -- for each author add an entry to author_books table
Insert into authors values select * from json_populate_recordset(null:authors, _authors);
end;
$$ language plpgsql; 
```

# c# - 为游戏创建控制分配器菜单

> ID：12716038
> 
> 赞同：2
> 
> 时间：2012-10-03T20:05:56.267
> 
> 标签：c#, winforms

我正在尝试使用 WinForms 和 C# 构建一个 Windows 应用程序，其中一种形式是我希望用户能够为每个动作分配键（即左、右、上、下运动等）。这类似于

![在此处输入图像描述](../Images/2825db2a11a9fa654acdae5d9758070b.png)

在左侧列中将列出动作，用户应该能够为每个动作分配一个键。我对 Windows 窗体非常陌生，无法弄清楚要在左侧使用什么控件，我尝试使用带有 KeyDown 事件的按钮，但在此事件中不会触发输入/返回键，其余键它工作正常。那么应该使用什么控制以及什么事件，以便用户可以为任何运动/控制分配他选择的任何键。

编辑：这是最初的代码。

```
namespace ControllerWinServe
{

public partial class Form2 : Form
{
    static string[] array = new string[6]; 
    public Form2()
    {
        InitializeComponent();
    }

    private void Form2_Load(object sender, EventArgs e)
    {
    }
    private void button_d_Click(object sender, EventArgs e)
    {
    }
    private void textBox1_TextChanged(object sender, EventArgs e)
    {
    }
    private void textBox1_KeyDown(object sender, KeyEventArgs e)
    {
    }
    private void button_u_KeyDown(object sender, KeyEventArgs e)
    {
        MessageBox.Show("Form.KeyPress: '" + e.KeyCode.ToString() + "' pressed.");
    }

    private void button_d_KeyDown(object sender, KeyEventArgs e)
    {
        MessageBox.Show("Form.KeyPress: b2 '" +e.KeyCode.ToString() + "'pressed.");
    }
}
} 
```

在尝试使用 user17753 的建议之后。

```
namespace ControllerWinServe
{
  public class EnterTextBox : TextBox
 {
  protected override bool IsInputKey(Keys key)
  {
    if (key == Keys.Enter)
        return true;
    return base.IsInputKey(key);
 }
}

public partial class Form2 : Form
{
    static string[] array = new string[6]; 
    public Form2()
    {
        InitializeComponent();
    }

    private void Form2_Load(object sender, EventArgs e)
    {
    }
    private void button_d_Click(object sender, EventArgs e)
    {
    }
    private void textBox1_TextChanged(object sender, EventArgs e)
    {
    }
    private void textBox1_KeyDown(object sender, KeyEventArgs e)
    {
    }
    private void button_u_KeyDown(object sender, KeyEventArgs e)
    {
        MessageBox.Show("Form.KeyPress: '" + e.KeyCode.ToString() + "' pressed.");
    }

    private void button_d_KeyDown(object sender, KeyEventArgs e)
    {
        MessageBox.Show("Form.KeyPress: b2 '" +e.KeyCode.ToString() + "'pressed.");
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:16:04.220

如果您说的是在 a 中按 enter，`TextBox`则默认情况下不会触发它。您可以创建一个名为 example 的新名称，`EnterTextBox`该名称派生自`TextBox`该覆盖`IsInputKey`以允许 enter 触发事件。

一种这样的实现可能是：

```
public class EnterTextBox : TextBox
{
    protected override bool IsInputKey(Keys key)
    {
        if (key == Keys.Enter)
            return true;
        return base.IsInputKey(key);
    }
} 
```

使用项目命名空间中的此类，您将能够`EnterTextBox`从工具箱中添加项目命名空间类别下的内容。

然后您可以添加一个由`KeyDown`事件触发的方法，`EnterTextBox`例如：

```
 private void button1_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Enter)
        {
            e.Handled = true;
            //stuff to do after enter is pressed
        }
    } 
```

# jquery - 将新项目添加到可排序的 jquery 中未被刷新拾取

> ID：12716039
> 
> 赞同：4
> 
> 时间：2012-10-03T20:05:56.377
> 
> 标签：jquery

我正在对对象列表进行排序，其中一些是常规对象，其中一些是其他对象的容器。

带有句柄的可排序工作正常，除非我将新对象添加到容器中，否则刷新后无法识别。

我有以下 HTML：

```
<button>add another option</button>
<div class="con">
    <div class="ui-state-highlight"><span class="handle">handle</span> Item 1</div>
    <div class="ui-state-highlight"><span class="handle">handle</span> Item 2</div>
    <div class="ui-state-highlight"><span class="handle">handle</span> Item 3</div>
    <div class="subthing">
        <span class="handle">handle</span>
        <div>    <span class="handle">subhandle</span> subitem</div>
        <div>    <span class="handle">subhandle</span> subitem</div>
    </div>
</div> 
```

和脚本：

```
$('button').click(function() {
    var x = $('<div class="ui-state-highlight"><span class="handle">handle</span> newthing</div>');
    x.appendTo('.con')
    $(".con").sortable('refresh')
});

var container = $(".con");
container.sortable({
    handle: container.children().children(".handle")
});​ 
```

### [小提琴](http://jsfiddle.net/dLrVF/14/)

如上面的代码所示，如​​果您添加一个新项目，它不能与其余元素一起排序。我知道如果我说句柄属性是`.handle`，它会这样做，但我不希望子句柄成为可排序的一部分。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T20:18:41.847

你需要的是：

```
container.sortable({
  handle: '> .handle'
});​ 
```

看看这个：http: [//jsfiddle.net/hQsjD/](http://jsfiddle.net/hQsjD/)

> 符号仅捕获直接的 .handle 子项。

重要的是，句柄参数是字符串选择器而不是实际元素，因为当您调用刷新时，这些元素不会被刷新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T20:14:40.470

干得好。您没有正确使用句柄：

```
$('button').click(function() {
    var x = $('<div class="ui-state-highlight"><span class="handle">handle</span> newthing</div>');
    x.appendTo('.con');
    $(".con").sortable("refresh");
});

var container = $(".con");
container.sortable({
    handle: ".handle"
}); 
```

[小提琴](http://jsfiddle.net/dLrVF/18/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-10T11:33:30.370

没有什么对我有用，但这个：

代替：

```
$(".selector").sortable('refresh'); 
```

我放了这个：

```
$(".selector").trigger("sortupdate"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-03T20:13:30.230

这似乎解决了它：[编辑](http://jsfiddle.net/4XjYk/)

```
$('button').click(function() {
    var x = $('<div class="ui-state-highlight"><span class="handle">handle</span> newthing</div>');

    //My Edits
    x.appendTo('.con')
    var container = $(".con");
    container.sortable({
        handle: container.children().children(".handle")
    });
});

    var container = $(".con");
container.sortable({
    handle: container.children().children(".handle")
}); 
```

# android - 将巨大的字符串打印到 Logcat

> ID：12716040
> 
> 赞同：3
> 
> 时间：2012-10-03T20:05:56.540
> 
> 标签：android, xml, logcat, stringwriter

将 XML 字符串打印到 Logcat 窗口的最佳方法是什么？我要打印的字符串实际上是一个包含大量数据的 StringWriter，当我尝试打印它时，Logcat 会截断它并且不会打印出全部内容（至少看起来它没有）。当我尝试打印 StringWriter ( `StringWriter.toString().length()`) 的长度时，结果是 500，但据我所知，XML 内容比这更长。StringWriter 的长度是否限制为 500？或者无论如何我可以让 Logcat 停止截断字符串并打印出整个内容？

# sql-server - sql server pivot用最后一列替换null

> ID：12716042
> 
> 赞同：0
> 
> 时间：2012-10-03T20:06:04.023
> 
> 标签：sql-server, pivot

数据透视表：

```
id Jan   Feb   March  April   May   June
=========================================
1  0.12  0.36   0.72   null    null  null
2  null  null   0.11   0.12   0.36   null 
```

结果：

```
id Jan   Feb   March  April   May   June
=========================================
1  0.12  0.36    0.72   0.72   0.72   0.72    
2  0.00  0.00    0.11   0.12   0.36   0.36 
```

在行/列中单元格的开头，如果没有值，则 null 应替换为 0，如果为 null，则该行中的前一个单元格应填充同一行中的下一个单元格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:47:52.127

```
-- sample table for discussion
create table tbl (
  id int,
  month varchar(9),
  value float);
insert tbl values
(1,'Jan',0.12),
(1,'Feb',0.36),
(1,'Mar',0.72),
(2,'Mar',0.11),
(2,'Apr',0.12),
(2,'May',0.36);

-- beginning of script
declare @tbl table (
  id int,
  number int,
  month varchar(9),
  value float);
insert @tbl
select id.id, Months.Number, Months.Name, t.value
from (values(1,'Jan'),
            (2,'Feb'),
            (3,'Mar'),
            (4,'Apr'),
            (5,'May'),
            (6,'Jun')) Months(Number,Name)
cross join (select distinct id from tbl) id
left join tbl t on t.month = Months.name and t.id=id.id;

-- fully populate the table with all id/month combinations filled in
;with cte as (
  select id,Number,month,isnull(Value,0.0)value
  from @tbl
  where Number=1
  union all
  select cte.id,t.Number,t.month,isnull(t.value,cte.Value)
  from cte
  join @tbl t on t.id=cte.id and t.number=cte.number+1
)
-- this is what the original pivot would have looked like
select id, Jan,Feb,Mar,Apr,May,Jun
from (select id,month,value from cte) p
pivot (max(value) for month in (Jan,Feb,Mar,Apr,May,Jun)) v; 
```

# android - 如何获取 SOAP 对象元素？

> ID：12716045
> 
> 赞同：0
> 
> 时间：2012-10-03T20:06:30.420
> 
> 标签：android, soap

我正在尝试创建一个简单的 Android 应用程序来从 Web 服务服务器获取数据。我创建了一个包含假天气数据的数据库并配置了 Web 服务当我从 Android 应用程序运行此代码时：

```
SoapObject results = (SoapObject) envelope.bodyIn;
result = results.getProperty("getAlertsResult").toString(); 
```

结果字符串如下。如何从肥皂对象中获取单个警报消息、名称和优先级？谢谢你。

anyType{schema=anyType{element=anyType{complexType=anyType{choice=anyType{element=anyType{complexType=anyType{sequence=anyType{element=anyType{}; 元素=anyType{}; 元素=anyType{}; 元素=anyType{}; 元素=anyType{}; 元素=anyType{}; 元素=anyType{}; 元素=anyType{}; }; }; }; }; }; }; }; diffgram=anyType{NewDataSet=anyType{Table=anyType{ALERT_ID=1; ALERT_TYPE=天气；ALERT_NAME=该地区有严重风暴；ALERT_MSG=这是一个极端危险的情况，龙卷风如预期的风速。; ALERT_PRIORITY=高；ALERT_ENABLED=1；ALERT_USER=管理员；ALERT_DATETIME=2012-07-24T00:00:00-04:00; }; 表=anyType {ALERT_ID=2; ALERT_TYPE=天气；ALERT_NAME=洪水警告；ALERT_MSG=田纳西州莫里斯敦的国家气象局发布了洪水；ALERT_PRIORITY=正常；ALERT_ENABLED=1；ALERT_USER=管理员；ALERT_DATETIME=2012-07-24T00:00:00-04:00; }; 表=anyType{ALERT_ID=3; ALERT_TYPE=地震；ALERT_NAME=7.1 该地区发生地震；ALERT_MSG=美国东部标准时间下午 2:30 在大都会地区登记的严重地震，RS 为 7.1；ALERT_PRIORITY=高；ALERT_ENABLED=1；ALERT_USER=管理员；ALERT_DATETIME=2012-07-24T00:00:00-04:00; }; }; }; }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:35:16.773

这是获取单个 SoapObject 属性的代码。

```
SoapObject resultOne = (SoapObject) results.getProperty(0);
SoapObject resultTwo = (SoapObject) resultOne.getProperty(1);
SoapObject allAlerts = (SoapObject) resultTwo.getProperty(0);
SoapObject alertOne = (SoapObject) allAlerts.getProperty(0);
SoapPrimitive alertPriority = (SoapPrimitive) alertOne.getProperty(4); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:20:36.700

您可以做的是进行 php 查询，以检索数据并将其放入 json 格式。json 是一种非常好的跨平台数据共享格式。像这样

```
<?php

    $response = array();

    require_once __DIR__ . '/db_connect.php';

    $db = new DB_CONNECT();

    $result = mysql_query("SELECT * FROM table_name") or die(mysql_error());

    if (mysql_num_rows($result) > 0) {

        $response["forecasts"] = array();

        while ($row = mysql_fetch_array($result)) {

           //here you put all the rows from the column that you have retrieved 
            $product = array();
            $product["column1"] = $row["column1"];
            $product["column2"] = $row["column2"];

            array_push($response["forecasts"], $product);
        }

        $response["success"] = 1;

        echo json_encode($response);
    } else {

        $response["success"] = 0;
        $response["message"] = "No games found";

        echo json_encode($response);
    }
    ?> 
```

json数据的过程你可以使用gson库，它非常适合将json解析为对象

[http://bobbyprabowo.wordpress.com/2010/11/25/android-json-processing-using-gson-and-display-in-on-a-listview/](http://bobbyprabowo.wordpress.com/2010/11/25/android-json-processing-using-gson-and-display-in-on-a-listview/)

# wpf - 样式窗口标题行

> ID：12716047
> 
> 赞同：1
> 
> 时间：2012-10-03T20:06:48.450
> 
> 标签：wpf

我想为图像中的窗口创建一种样式。所以窗口上方的三角形将在鼠标的位置。我该怎么做？

[![](../Images/988cbc81cc2e9c265ed74d2a541f69e2.png)](https://i.stack.imgur.com/ZC3aO.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T06:42:17.673

您无法在 wpf 中编辑窗口标题栏。为此，您需要设置 WindowStyle=None 并在顶部添加用户控件并将其用作窗口标题。

# php - 为什么 PHP 字符串函数默认不是多字节安全的？

> ID：12716064
> 
> 赞同：3
> 
> 时间：2012-10-03T20:08:06.830
> 
> 标签：php, encoding, multibyte

`mb_`为什么 PHP中默认不使用PHP 多字节字符串函数（以 开头的函数）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T20:09:36.610

向后兼容性。旧的 PHP 脚本依赖于非多字节功能。

另见：[http ://www.php.net/manual/en/mbstring.overload.php](http://www.php.net/manual/en/mbstring.overload.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T21:04:34.640

因为非多字节函数首先出现。

# xcode - 从 NSMutable 数组 xcode 中的对象获取帧

> ID：12716070
> 
> 赞同：0
> 
> 时间：2012-10-03T20:08:29.747
> 
> 标签：xcode, arrays, nsmutablearray, frame

此代码的目标是自动创建一个对象并为其设置动画以在屏幕上移动。一旦它在 120 处达到 x，则将其删除。我面临的问题是我无法从数组中的对象中获取框架和 x 值。这是我的代码，有什么建议吗？

```
- (void)AddRight{

Bullets= [[NSMutableArray alloc] init];
CGRect frame = CGRectMake(480, 180, 60, 55);
Bullets = [[UIImageView alloc] initWithFrame:frame];
Bullets.image=[UIImage imageNamed:@"Bullet.png"];
[self.view addSubview:Bullets];

[Bullets addObject:theBullet];
for (int x = 0; x < [Bullets count]; x++) {
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:1.5];
    [UIView setAnimationCurve:UIViewAnimationCurveLinear];
    [UIView setAnimationDelegate:self];
    [theBullet setFrame:CGRectMake(265, 180, 60, 55)];
    [UIView commitAnimations];
} 
```

并且检测在这里：

```
for (int x = 0; x < [Bullets count]; x++) {
        NSObject *bull = [[LeftBees objectAtIndex:x]];
       CGRect frame = bull.frame;
        if (frame.origin.x>120) {
            [bull removeFromSuperview];
        }
    } 
```

“CGRect 框架 = referal.frame；” 有错误说“属性框架不是 NSObject 的一部分”

# php - 将 $_POST 值传递给函数时的问题

> ID：12716071
> 
> 赞同：0
> 
> 时间：2012-10-03T20:08:39.097
> 
> 标签：php, mongodb, post

当我将值传递给在 PHP 中发布到文档中的函数时出现问题

这是函数定义，

```
function findstation($val){
   global $positions_table;
   var_dump($val);
   $id=$val;
   $query = array('uid'=> $id );
   $result = $positions_table->find($query);
   foreach ($result as $station){
      return $station['name'];
   }
} 
```

此函数查询 mongoDB 数据库以从我有页面的数据库中查找并返回键**名，该页面将****id**作为`$_POST['id']`.

这就是我在其中搜索的方式

```
if(isset($_POST['submit'])){
    echo "START!";
    $st = $_POST['station'];
    var_dump($t);
    findstation($st);
    echo "EXECUTED THE FUNCTION"; // Just added this to diagnose
} 
```

当我这样搜索时，我没有得到任何结果，它只是显示`START!EXECUTED THE FUNCTION`

但是当我这样调用函数时

```
findstation(2); 
```

我得到一个结果。当我将它作为变量传递时，我怎样才能让它工作？

PS：`$_POST['id']`作为`<select>`输入值传递。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T20:10:13.427

```
if(isset($_POST['submit'])){
    echo "START!'; // < == there you use a double to start string and a single quote to end
    $st = $_POST['station'];
    $t = (int)$st;
    var_dump($t);
    findstation($st);
    echo "EXECUTED THE FUNCTION"; // Just added this to diagnose
} 
```

正确的：

```
if(isset($_POST['submit'])){
    echo "START!"; // corrected string;
    $st = $_POST['station'];
    $t = (int)$st;
    var_dump($t);
    findstation($st);
    echo "EXECUTED THE FUNCTION"; // Just added this to diagnose
} 
```

# database - 使用标准协议创建自定义 SQL 数据源

> ID：12716076
> 
> 赞同：3
> 
> 时间：2012-10-03T20:09:07.807
> 
> 标签：database, networking, odbc

**问题**

我有一个自定义数据源（内部系统），我想将其作为标准数据源访问。我正在寻找一种解决方案来提供标准的类似 SQL 的访问器，以便可以从不同的报告引擎、Excel、MS 访问，也许是标准的 Web 前端和现成的数据管理工具中使用数据源。换句话说，我希望对 ODBC、JDBC 等提供现成的支持，而不必自己实现对所有这些驱动程序的支持。

**到目前为止我一直在做什么**

我已经成功地使用 SQLite 虚拟表机制来提供对使用标准 SQLite 驱动程序的数据源的访问。SQLite 将负责 SQL 查询解析、表元数据转换（由我的扩展程序提供）并管理我的数据源不支持的 SQL 部分（聚合、复杂的连接和更新等）。

但是，我没有使用 SQLite 获得的是网络支持。SQLite 是一个嵌入式数据库引擎，可以很好地与我的数据源配合使用，但是虽然它支持 ODBC 和 JDBC，但它没有有线协议。在客户端进程中嵌入我的自定义数据源不是一种选择，因为数据源具有非常严格的运行时限制（以及其他限制）。

**我在考虑什么**

*1\. 网络化 SQLite*

显而易见的解决方案是查看是否可以[将 SQLite 数据源联网](http://www.sqlite.org/cvstrac/wiki?p=SqliteNetwork)。但是，网络选项似乎没有得到很好的支持，尤其是客户端驱动程序不支持（即根本不支持）。

*2\. MySQL存储引擎*

我一直在考虑用 MySQL[存储引擎](http://dev.mysql.com/doc/internals/en/custom-engine.html)替换 SQLite 虚拟表驱动程序（阅读 API 规范的 30 分钟让我直觉感觉 API 非常相似）。我有三个担心：

*   过程控制。我的数据源是一个想要管理自己的进程的系统。我更愿意成为负责提供服务的人。
*   从 IT 管理员的角度来看，运行整个 MySQL 服务器看起来有点矫枉过正。一个嵌入式网络服务器就足够了。我已经有了网络服务器（它已经是一个网络服务进程）。
*   许可。MySQL 看起来像 GPL 或昂贵的。我没有发现任何关于此设置将迫使我进入的许可证要求的任何结论。

*3\. 模仿已知的网络协议*

我一直在研究模仿“已知”协议，例如 MySQL 有线协议或 MSSQL（[freeTDS](http://www.freetds.org)是一个很好的来源）。然而，现成的解决方案的数量看起来很少，如果我走这条路，我可能不得不自己动手，这可能是很多工作。

我正在寻找有关如何执行此操作的其他选项。现在，我正在调查是否可以选择 #2 并在我的数据源和存储引擎之间使用接口（例如[0mq](http://www.zeromq.org)或某些网络协议）。我相信这是可行的，但我对更简单的解决方案非常感兴趣。有没有人做过类似的事情（成功）？

# asp.net-mvc-3 - 部分视图返回带有空字段的模型

> ID：12716079
> 
> 赞同：0
> 
> 时间：2012-10-03T20:09:12.410
> 
> 标签：asp.net-mvc-3, visual-studio-2010, parameter-passing

在使用 ASP.NET MVC 3 的 Web 应用程序中，我从控制器将具有初始化属性的模型作为参数传递给局部视图。

该视图显示一个带有单个文本框的对话框，并在提交时触发启动控制器中的操作（该操作采用与参数相同的模型类型）。
问题是此时只有相对于文本框字段的属性具有值，即用户插入的值，而所有其他属性都为空，即使在视图中它们具有适当的值。

单击提交按钮后，如何才能将属性从视图保留到控制器？

编辑（添加代码）：

```
 //----------   This method in the controller call the Partial View and pass the model  --------
[HttpPost]
public PartialViewResult GetAddCustomFormerClubDialog()
    {
        var order = GetCurrentOrder();
        //Order has here all properties initialized

        var dialogModel = new dialogModel<Order> { Entity = order, ControllerAddEntityActionName = "SelectOrder"};

        return PartialView("Dialogs/AddOrder", dialogModel);
    }

//-----------------   Here the Partial View   -----------------------------------
@model FifaTMS.TMS.Presentation.Model.Wizard.WizardDialogModel<Club>

<div>
@using (Ajax.BeginForm(Model.ControllerAddEntityActionName, "Orders", new AjaxOptions { HttpMethod = "POST"}))
{
    @Html.LabelFor(a => a.Entity.Name)
    @Html.TextBoxFor(a => a.Entity.Name, new { @class = "isrequired", style="width: 250px;" })
 }
</div>

//--------  Here the method from the view (in the same controller as the first code portion)  -----
 [HttpPost]
 public JsonResult SelectOrder(dialogModel<Order> OrderModel)
    {
       var order= OrderModel.Entity;
      // But order has only the property Name set (in the view)

     ...
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:29:46.163

我可以通过为每个需要的属性添加一个隐藏字段来解决这个问题，例如：

```
@Html.HiddenFor(p => p.Entity.OrderId, new { id = "OrderId" }) 
```

这是因为从 PartialView 创建了一个新的模型实例并将其发送到控制器。因此，仅采用表单中设置的属性（在我的情况下，唯一的字段是与 PartialView 中的 TextBox 相关的 OrderName）。

# r - 匹配两个data.frame

> ID：12716087
> 
> 赞同：1
> 
> 时间：2012-10-03T20:09:39.097
> 
> 标签：r

我有这样的情况：

DF1

> ```
>  COL1   COL2   COL3  ...   
> 
>    a      b      c       
>    b      d      b
>    f      e      a
>    g      m      f 
> ```

DF2

> COL
> a
> b
> c
> d
> e
> f
> g
> h
> i
> l
> m
> n
> o

我想将 DF1 的每一列与 DF2 的唯一一列匹配，并对 DF1 的每一列中出现 DF2 的次数进行评分。如何做到这一点？

提前致谢，

E.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:20:38.520

这里有几个猜测：

```
 sapply( lapply(DF1, "%in%", DF2[[1]]), sum )

 lapply(DF1, function(col) length(which(col %in% DF2) ) ) 
```

如果 DF2 是一个 data.frame 似乎很可能给出它的名字，那么你需要这样做：

```
lapply(DF1, function(col) length(which(col %in% DF2[[1]]) ) ) 
```

（编辑说明：在和 '[[1]]' 周围添加引号`%in%`以将 DF2 的第一列也是唯一一列作为向量而不是列表返回。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T20:22:38.467

怎么样的东西：

```
sapply(DF1, function(x) sum(x %in% DF2)) 
```

或者，由于您已更新您的问题以声明 DF2 是`data.frame`：

```
sapply(DF1, function(x) sum(x %in% DF2$COL)) 
```

# java - 用于银行账户交易的 Java Math.max

> ID：12716097
> 
> 赞同：0
> 
> 时间：2012-10-03T20:10:38.533
> 
> 标签：java

所以，我有这个问题，我一直在研究，目标是为超过分配的免费交易数量的银行账户中的每笔交易扣除费用。到目前为止，我已经准备好计算交易数量，但我们应该与 Math.max 合作，以便当您超过免费交易金额时，费用开始从余额中扣除帐户。我在 deductMonthlyCharge 方法中使用 Math.max。我想我知道如何使用 if 和 else 语句来做到这一点，但是我们不允许在这里使用它们，而且我对 Math.max 不是很熟悉。所以，如果有人能指出我正确的方向来解决这个问题，那就太好了。谢谢。

```
/**
A bank account has a balance that can be changed by 
deposits and withdrawals.
*/
public class BankAccount
{  
    private double balance;
private double fee;
private double freeTransactions;
private double transactionCount;

/**
   Constructs a bank account with a zero balance
*/
public BankAccount()
{   
  balance = 0;
    fee = 5;
    freeTransactions = 5;
    transactionCount = 0;
}

/**
  Constructs a bank account with a given balance
   @param initialBalance the initial balance
*/
public BankAccount(double initialBalance)
{   
  balance = initialBalance;
    transactionCount = 0;
}

public static void main(String [ ] args)
{
    BankAccount newTransaction = new BankAccount();
    newTransaction.deposit(30);
    newTransaction.withdraw(5);
    newTransaction.deposit(20);
    newTransaction.deposit(5);
    newTransaction.withdraw(5);
    newTransaction.deposit(10);
    System.out.println(newTransaction.getBalance());
    System.out.println(newTransaction.deductMonthlyCharge());

}
public void setTransFee(double amount)
{
    balance = amount+(balance-fee);
    balance = balance;

}

public void setNumFreeTrans(double amount)
{
    amount = freeTransactions;
}

/**
   Deposits money into the bank account.
   @param amount the amount to deposit
*/
public void deposit(double amount)
{  
  double newBalance = balance + amount;
  balance = newBalance;
    transactionCount++;
}

/**
  Withdraws money from the bank account.
  @param amount the amount to withdraw
*/
public void withdraw(double amount)
{   
  double newBalance = balance - amount;
  balance = newBalance;
    transactionCount++;
}

public double deductMonthlyCharge()
{
    Math.max(transactionCount, freeTransactions);
    return transactionCount;
}

 /**
  Gets the current balance of the bank account.
  @return the current balance
*/
public double getBalance()
{   
  return balance;
}
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:15:54.393

`max(double, double)`返回 grouter 双精度值。只是改变

```
Math.max(transactionCount, freeTransactions);
    return transactionCount; 
```

到

```
return Math.max(transactionCount, freeTransactions); 
```

如果您希望返回更大的值。

双打，就像所有原始类型一样，没有像对象那样的引用。您需要`double foo = functionThatReturnPrimitiveDouble()`像我在上面的示例中那样保存返回的值，或者只是再次返回它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:22:54.863

我认为您想要这样的东西（假设每笔交易超过允许金额的费用为 1.00 美元）：

```
public double deductMonthlyCharge()
{
    int transCount = Math.max(transactionCount, freeTransactions);
    double fee = 1.00 * (transCount - freeTransactions);
    return fee;
} 
```

如果客户没有超过他们允许的免费交易次数，那么`(transCount - freeTransactions)`将为 0，因此不会收取任何费用。

这段代码本身就有点太聪明了，但我认为这是古怪的要求（不要使用 if 语句，而是使用 max ）所要求的。

更清晰（但等效）将是：

```
public double deductMonthlyCharge()
{
    if (transactionCount > freeTransactions) {
        return 1.00 * (transactionCount - freeTransactions);
    }
    return 0.0;
} 
```

# asp.net - 向标准 aspnet_Membership 表添加新字段

> ID：12716101
> 
> 赞同：-5
> 
> 时间：2012-10-03T20:10:54.867
> 
> 标签：asp.net, asp.net-membership

我在标准 aspnet_Membership 表中添加了一个新字段。

现在添加了，如何通过 UserId 获取或设置该字段？

请删除。(5-8-2013)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:15:24.097

您不应更改默认成员资格表。而是使用配置文件字段。以下文章将有所帮助。

[http://weblogs.asp.net/scottgu/archive/2005/10/18/427754.aspx](http://weblogs.asp.net/scottgu/archive/2005/10/18/427754.aspx)

[http://msdn.microsoft.com/en-us/library/2y3fs9xs.aspx](http://msdn.microsoft.com/en-us/library/2y3fs9xs.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T21:29:03.580

我不建议使用配置文件功能，因为它太脏而无法存储数据。只有当您只需要一两个字段时，它才有意义。

无论如何，在提出此类问题之前，您需要尝试更多地记录自己...

# c++ - std::ftsream 的成员函数 bad() 用于检查

> ID：12716102
> 
> 赞同：1
> 
> 时间：2012-10-03T20:10:57.130
> 
> 标签：c++

我知道我可以通过操作员检查是否成功打开文件！和 std::fstream 类的成员函数 fail()。

但是我可以为此目的使用成员函数 bad() 吗？是否符合标准？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:15:53.377

`ios::operator!`并且`ios::bad`不可互换。`operator!`检查任何错误（与 相同`ios::fail`），而`ios::bad`仅检查不可恢复的错误。

[请在此处](http://en.cppreference.com/w/cpp/io/basic_ios/bad)和[此处](http://en.cppreference.com/w/cpp/io/basic_ios/operator!)查看他们各自的文档。

您需要检查的内容实际上取决于您的用例，并且您需要了解其中的含义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T20:24:54.180

该函数`bad()`产生`true`“不可恢复的错误”——不管这意味着什么。基本上，`bad()`每当由于某种形式的格式错误以外的原因而失败时，就会设置它。有趣的是，当文件缓冲区失败时，`open()`各种文件流类（、、和）的功能`std::ofstream`都`std::ifstream`设置`std::fstream`了！也就是说，您不能用于测试是否失败。您可以使用. 就个人而言，我不会打扰并使用转换为：`std::ios_base::failbit``open()``stream.bad()``open()``stream.fail()``bool`

```
std::ofstream out("file");
if (out) {
    process();
}
else {
    report_error();
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-03T20:13:24.667

是的，您可以，`ios::bad()`返回 a `boolean`，并且`!`将简单地否定`boolean`( 即`true`-> `false`，反之亦然)。

这是否是您*打算*做的事情是另一个问题。`bad()`检查流的完整性丢失而不是打开失败。

# mysql - MySQL一次选择返回多行值

> ID：12716103
> 
> 赞同：0
> 
> 时间：2012-10-03T20:10:59.747
> 
> 标签：mysql, return, row

我正在尝试从我的数据库中准备一份报告。

我有两张这样的桌子：

```
device          sensor
id  | name      id  | devid | value
====|=====      ====|=======|========
1   | dev1      1   |   1   | 1.1
2   | dev2      2   |   1   | 1.2
                3   |   2   | 2.1
                4   |   2   | 2.2 
```

我想得到这个回报：

```
 id | name  | val_rc    | val_cf
====|=======|===========|==========
 1  | dev1  | 1.1       | 1.2
 2  | dev2  | 2.1       | 2.2 
```

我正在使用 for 语句将所有值放入我的报告中。标题名称并不重要。

我尝试了这个 SQL 查询的不同排列：

```
SELECT device.id, device.name, sensor.value AS val_rc, sensor.value AS val_cf
FROM device
JOIN sensor
ON sensor.devid = device.id; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:34:24.640

您没有提供有关如何确定每列中的值的详细信息，因此此示例使用`row_number`：

```
select id,
   name,
   max(case when GROUP_ROW_NUMBER = 1 then value end) as val_rc,
   max(case when GROUP_ROW_NUMBER = 2 then value end) as val_cf
from
(
  select d.id, devid, name, value, 
        @num := if(@NAME = `NAME`, @num + 1, 1) as group_row_number,
        @NAME := `NAME` as dummy
  FROM device d
  INNER JOIN sensor s
    ON s.devid = d.id
  order by name, value
) x
group by id, name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/132e3/32)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:47:31.303

您需要使用 加入表`device`两次`sensor`。

假设您希望 for`rc`的值是表中的第一个值和`cf`最后一个值，则此查询：

```
SELECT device.id, device.name, sensor1.value AS val_rc, sensor2.value AS val_cf
FROM device, sensor sensor1, sensor sensor2
    where sensor1.devid= device.id 
    and sensor1.id = (select min(id) from sensor s1 where s1.devid= sensor1.devid)
    and sensor2.devid= device.id 
    and sensor2.id = (select max(id) from sensor s2 where s2.devid= sensor2.devid) 
```

会给出你所要求的。

```
 id | name  | val_rc    | val_cf
====|=======|===========|==========
 1  | dev1  | 1.1       | 1.2
 2  | dev2  | 2.1       | 2.2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T21:06:08.030

看了你写的这里是我想出的：

```
SELECT device.id, device.name,
(SELECT sensor.value FROM sensor WHERE sensor.devid = device.id AND sensor.senid = '1') AS val_rc, 
(SELECT sensor.value FROM sensor WHERE sensor.devid = device.id AND sensor.senid = '2') AS val_cf  
FROM device 
```

# deployment - 如何使用 nginx 部署 puma

> ID：12716106
> 
> 赞同：3
> 
> 时间：2012-10-03T20:11:08.240
> 
> 标签：deployment, puma

如何使用*nginx*或*apache*部署 puma ，这是可能的还是没有必要使用像 nginx 或 apache 这样的 Web 服务器。**使用puma**部署应用程序的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-22T12:32:18.683

关键在该站点的 nginx conf 中。

```
server {
  listen 80;
  server_name mysite.com;

  location / {
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://localhost:4000;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
  }

} 
```

如您所见`proxy_pass http://localhost:4000;`，该行告诉 nginx 在端口**4000**上侦听 localhost，您可以根据需要进行更改。

这是使用 sslletsencrypt 的一个小改动，当然您应该使用letsencrypt 配置ssl。

```
server {
  listen 80;
  server_name example.com;

  location / {
    return 301 https://example.com$request_uri;
  }
}

server {
  listen 443 ssl http2;
  server_name example.com;
  #listen [::]:443 ssl http2 ipv6only=on;
ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem; # managed by Certbot
ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem; # managed by Certbot
  ssl_trusted_certificate /etc/letsencrypt/live/example.com/fullchain.pem;
  include /etc/nginx/snippets/ssl.conf;

  location / {
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://localhost:4000;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
  }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-09T15:38:10.463

由于 Puma 不是为用户直接访问而设计的，我们将使用 Nginx 作为反向代理来缓冲用户和 Rails 应用程序之间的请求和响应。除了工作进程之外，Puma 还使用线程来更多地利用可用的 CPU。Nginx和puma之​​间的通信是通过socket进行的：

[![nginx 美洲狮](../Images/6faa317ed814a32ac148347a34941d78.png)](https://i.stack.imgur.com/CPNpj.png)

> 图片来源：[http ://codeonhill.com](http://codeonhill.com)

如果您需要解释如何使用 Puma 和 Nginx 部署应用程序，请查看[此](https://www.digitalocean.com/community/tutorials/how-to-deploy-a-rails-app-with-puma-and-nginx-on-ubuntu-14-04)

# google-app-engine - Google App Engine：Objectify lib 3.1 不包含 com.googlecode.objectify.annotation.Id 注释？

> ID：12716107
> 
> 赞同：2
> 
> 时间：2012-10-03T20:11:14.030
> 
> 标签：google-app-engine, objectify

[我从http://code.google.com/p/objectify-appengine/downloads/list](http://code.google.com/p/objectify-appengine/downloads/list)下载了 Objectify 3.1 库，当我按照指南进行操作时，他们说我应该用 @Id 和 @Index 注释我的 @Entity 对象，但那些根本不包含在库中！

我的 com.googlecode.objectify.annotation 包只包含这些注释：

*   com.googlecode.objectify.annotation.AlsoLoad.class
*   com.googlecode.objectify.annotation.Cached.class
*   com.googlecode.objectify.annotation.Entity.class
*   com.googlecode.objectify.annotation.Indexed.class
*   com.googlecode.objectify.annotation.NotSaved.class
*   com.googlecode.objectify.annotation.Parent.class
*   com.googlecode.objectify.annotation.Serialized.class
*   com.googlecode.objectify.annotation.Subclass.class
*   com.googlecode.objectify.annotation.Unindexed.class

请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:30:41.727

Objectify 3.1 使用 javax.persistence.Id，而不是它自己的包内的 Id 注释。我相信这样做的理由是应该使用标准注释而不是特定于库的注释。无论如何，Objectify 4（它有很多非常好的改进）在 jar 中定义了 Id 注释......我怀疑是因为你的问题并不罕见。

# vba - 使用基于数字数组的VBA删除excel中的多行

> ID：12716111
> 
> 赞同：0
> 
> 时间：2012-10-03T20:11:36.283
> 
> 标签：vba, excel, rows

我用一些标准填充了一个数字数组，然后我想要删除该区域中的所有行。

基本上我遍历一列，如果在该特定行中，该列中的单元格匹配一个标准，我将该行号添加到一个数组中。完成所有行后，我想删除所有行号。

我在弄清楚如何一次删除所有行时遇到了麻烦，因为很明显，如果我一次执行一个，行号会随着前面或下面的行被删除而改变。因此，我想一起选择所有行，然后一次对所有行调用 Delete 命令。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T20:45:13.387

```
Sub Tester()
Dim arr
    arr = Array(3, 5, 7, 9)
    ActiveSheet.Range("A" & Join(arr, ",A")).EntireRow.Delete
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T20:45:56.717

向后迭代你的行。

就像是：

```
Sub tester()

    'setting ScreenUpdating false makes this go faster...
    Application.ScreenUpdating = False
    Dim i As Integer
    'go through all rows starting at last row
    For i = Range("A1:E5").Rows.Count To 1 Step -1
        'check if you need to delete them (you will want to update this)
        If Cells(i, 1).Value = "Delete this row!" Then
            Rows(i).Delete
        End If

   Next i

 Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-05T13:52:52.667

这是一个简单的：

```
If Range("B1") <> "" Then ' Range that bears the array of cell.addresses....

    ar = Array(Range(Range("B1").Cells))

    For Each a In ar
        a.EntireRow.ClearContents
    Next

    Range("B1").ClearContents
End If 
```

# django - 已删除的模型仍然显示为 Django 中的 ContentType 选项？

> ID：12716113
> 
> 赞同：0
> 
> 时间：2012-10-03T20:11:55.893
> 
> 标签：django, caching, contenttype

我正在限制使用通用关系的 ContentType 选择，`limit_choices_to`但它显示不再存在的模型。例如，使用此代码：

```
 employer_content_type = models.ForeignKey(ContentType,
    limit_choices_to={"model__in": ('venue', 'festival')}, related_name="employer") 
```

我得到一个重复的选择列表，即节日，节日，场地，场地

但是，当我限制应用程序的选择时，而不是像这样的模型：

```
 employer_content_type = models.ForeignKey(ContentType,
          limit_choices_to={'app_label': 'contacts'}, related_name="employer") 
```

我得到一个没有重复的所有模型的列表，即地址、电子邮件、节日、地点

在我的开发过程中，我创建了一个新应用程序（“联系人”），它是旧应用程序的副本。所有模型都具有相同的名称等。起初我认为这是导致重复但在我从 settings.py 中删除旧应用程序并从数据库中删除旧模型后问题并没有消失。

我认为这是一个缓存问题，但我从未设置缓存！

那么如何清除缓存，或同时限制模型和应用程序的选择。

谢谢你的帮助！

**注意：**不幸的是我无法添加图片，所以有点难以描述！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:54:43.630

查找 contenttypes_contentype 数据库表并在那里删除过时的模型。syncdb 还应该提示您从内容类型表中删除过时的模型。

# backbone.js - 如何从骨干网的服务器获取数据

> ID：12716118
> 
> 赞同：1
> 
> 时间：2012-10-03T20:12:09.857
> 
> 标签：backbone.js, backbone-events

我正在主干中创建一个应用程序。此当前代码有效，但现在我想从服务器获取数据。我在 /myfriends/getData 的方法返回朋友姓名等的 json。我怎样才能使这段代码从服务器获取该 json。我读了一点，他们正在使用路由等……我只需要在我的应用程序的一个页面上使用它，所以我不想做很多路由等

谢谢

```
$(function() {

FriendList = Backbone.Collection.extend({
    initialize: function(){
        this.bind("add", function( model ){
            alert("hey");
            view.render( model );
        })
    }
});

FriendView = Backbone.View.extend({

    tagName: 'li',

    events: {
        'click #add-input':  'getFriend',
    },

    initialize: function() {
        this.friendslist = new FriendList;
        _.bindAll(this, 'render');
    }, 

    getFriend: function() {
        var friend_name = $('#input').val();
        this.friendslist.add( {name: friend_name} );
    },

    render: function( model ) {
        $("#friends-list").append("<li>"+ model.get("name")+"</li>");
        console.log('rendered')
    },

});

var view = new FriendView({el: 'body'});
}); 
```

这是一个工作副本

[http://jsfiddle.net/thomas/Yqk5A/](http://jsfiddle.net/thomas/Yqk5A/)

谢谢

**疲劳的**

这是我必须显示数据并在建议后尝试但仍然没有运气

```
$(function() {

FriendList = Backbone.Collection.extend({
    initialize: function(){
        this.bind("add", function( model ){
            alert("hey");
            view.render( model );
        })
    }
});

FriendsServer = new Backbone.Collection({

        initialize: function(){
            url : '/friends/Data',
            this.bind("test", function( model ){
                view.render( model );
            })
        }
});

FriendView = Backbone.View.extend({

    tagName: 'li',

    events: {
        'click #add-input':  'getFriend',
    },

    initialize: function() {
        this.friendslist = new FriendList;
        _.bindAll(this, 'render');
    }, 

    getFriend: function() {
        var friend_name = $('#input').val();
        this.friendslist.add( {name: friend_name} );
    },

    render: function( model ) {
        $("#friends-list").append("<li>"+ model.get("name")+"</li>");
        console.log('rendered')
    },

});

FriendsServerView = Backbone.View.extend({

        tagName: 'div',

        render: function( model ){
            $("#jsonData").html(FriendServer.fetch);
        }

    });

var view = new FriendView({el: 'body'});
var view = new FriendsServerView({el: 'body'});
});

in my html I have a div to populate with json data 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T20:19:18.393

您只需设置集合的 url 属性并在集合上调用 .fetch() 以从服务器加载数据。更多信息在：

[http://backbonejs.org/#Collection-fetch](http://backbonejs.org/#Collection-fetch)

此外，我会将您的模型/集合事件绑定到您的视图，而不是模型/集合。

# php - PHP登录系统——我做得对吗？

> ID：12716119
> 
> 赞同：2
> 
> 时间：2012-10-03T20:12:11.803
> 
> 标签：php, security, login

我对这些东西有点陌生，但这是我的登录授权页面。

```
function encrypt($password, $salt) {
    return base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, md5($salt), $password, MCRYPT_MODE_CBC, md5(md5($salt))));
}

$query = "SELECT * FROM users WHERE LOWER(`username`) = :user";
$stmt = $dbh->prepare($query);
$stmt->bindValue(':user', strtolower($_POST['username']));
$stmt->execute();

if ($stmt->rowCount() == 1) {
    $row = $stmt->fetch(PDO::FETCH_ASSOC);
    if (encrypt($_POST['password'], $row['salt']) == $row['password']) {
        echo "Logged in!";
    }
} 
```

在我的数据库中，我有列`username`、`password`和`salt`。密码列包含加密的密码。

我的工作流程在这里正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:52:21.850

您不应该加密密码。如果有人能够检索您的*用户*表，他可以轻松地反转所有密码：

```
$password = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, md5($salt), base64_decode($row['password']), MCRYPT_MODE_CBC, md5(md5($salt))); 
```

最好使用[专门为散列密码设计的散列函数](https://stackoverflow.com/q/4795385/53114)。

# actionscript-3 - flex as3 air 获取视频和无线适配器型号和驱动程序版本

> ID：12716120
> 
> 赞同：0
> 
> 时间：2012-10-03T20:12:15.533
> 
> 标签：actionscript-3, apache-flex, air

我正在使用 as3、flex 和 air 构建一个需要访问桌面视频和无线适配器信息的应用程序。我需要两者的型号名称和驱动程序版本。我可以使用以下代码从无线适配器获取 MAC 地址，而不是型号或其版本：

```
var networkInfo:NetworkInfo = NetworkInfo.networkInfo; 
var interfaces:Vector.<NetworkInterface> = networkInfo.findInterfaces();
if( interfaces != null ) 
{ 
    for each ( var interfaceObj:NetworkInterface in interfaces ) 
    { 
        var dsc_mac_address:String = interfaceObj.hardwareAddress; 
    }
} 
```

# java - 如何从 Java 代码运行不同的命令？

> ID：12716121
> 
> 赞同：0
> 
> 时间：2012-10-03T20:12:17.490
> 
> 标签：java, swing, jakarta-ee, javafx-2

我想运行不同的命令，这些命令可以通过 Java 在我的命令提示符或终端上执行。

我确实搜索了几个地方，但没有得到适当的答复。

我想运行一个在环境中设置为 VISAGE_HOME 的编译器以及运行 GRADLE 以完成我所有的构建任务。

我想从 Java 程序中调用所有这些命令。

由于它是一个摆动应用程序，我想在单击按钮或其他一些事件时调用这些命令。

我的问题是我无法对此进行编程:(。

我也不知道有什么 API 可以做到这一点。我浏览了一些示例代码，但其中大多数都有执行 shell 命令或命令提示符命令的相同示例代码。没有人告诉我做上述事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:17:49.127

看看[ProcessBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)。它返回的 Process 对象有一个[waitFor](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Process.html#waitFor%28%29)方法，因此您可以等待进程完成。然后你可以开始你的下一个过程。

例如

```
Process p = new ProcessBuilder("runYourCommand").start();
InputStream in = process.getInputStream();
InputStreamReader inr = new InputStreamReader(in);
BufferedReader br = new BufferedReader(inr);
String inputLine;
while ((inputLine = br.readLine()) != null) {
  System.out.println(inputLine);
}
p.waitFor(); 
```

ProcessBuilder 上另一个有趣的方法是[environment](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html#environment%28%29) ()。这将返回您可以访问的环境变量。来自 API 文档

```
Map<String, String> env = pb.environment();  
env.put("VAR1", "myValue"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T20:20:30.133

首先，[`ProcessBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)你的朋友是...

你可以看看；

*   [Java 的 ProcessBuilder 入门](http://singztechmusings.wordpress.com/2011/06/21/getting-started-with-javas-processbuilder-a-sample-utility-class-to-interact-with-linux-from-java-program/)（以 Linux 为重点）
*   [使用 ProcessBuilder 进行系统调用](http://javaevangelist.blogspot.com.au/2011/12/java-tip-of-day-using-processbuilder-to.html)
*   [运行 processbuilder 并进入并输出](https://stackoverflow.com/questions/10657097/run-processbuilder-and-get-in-and-output)
*   [ProcessBuilder 以及如何重定向操作系统进程的输入和输出](http://tamanmohamed.blogspot.com.au/2012/06/jdk7-processbuilder-and-how-redirecting.html)
*   [从 Java 执行操作系统命令](http://blog.bensmann.com/executing-operating-system-commands)

其次，您将需要使用[System.getenv](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#getenv%28%29)来查找指定环境变量的值并自己替换它。

注意：感谢 Guillaume Polet 指出`Process`将自动包含`path`环境变量以查找命令。

另外，请记住，不要在 EDT 上执行任何阻塞过程。

执行外部命令本质上是阻塞操作，虽然不是明确的，但考虑到需要消耗进程的输出或想知道进程终止，这些将需要您执行某种阻塞操作。不要在 EDT 上这样做。它会让你的程序看起来好像挂起一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T20:17:02.807

像这样的东西：

```
String cmd = "gedit";

Runtime run = Runtime.getRuntime();

Process pr = run.exec(cmd); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T20:21:23.153

根据[http://javarevisited.blogspot.de/2011/02/how-to-execute-native-shell-commands.html](http://javarevisited.blogspot.de/2011/02/how-to-execute-native-shell-commands.html)在包含“java.lang.Runtime”后将以下代码实现到您的代码中应该可以正常工作：

`try {`

`Process process = Runtime.getRuntime().exec("Command to be executed");`

`} catch (Exception e) {`

`e.printStackTrace(System.err);`

`}`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T20:18:42.240

您可以使用这些[`Runtime.exec`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html)方法在 Java 中运行命令。系统环境变量通常在 jvm 中不可见。您可以使用启动器，将这些系统环境属性作为 jvm 属性提交给您的 java 应用程序。

# css - 浮动列：必须在右浮动开始之前加载左浮动

> ID：12716125
> 
> 赞同：1
> 
> 时间：2012-10-03T20:12:45.697
> 
> 标签：css

我正在尝试创建一个两列布局，其中一列向左浮动，并且有两个 DIV 向右浮动。两个右 DIV 的总和是小于左 DIV 高度的高度。我想我错过了一些允许这种情况发生的 CSS。截至目前，由于高度差异，第二个右 DIV 出现在左 DIV 的末尾下方。

查看页面本身以查看问题可能更容易。我需要让 DIV 关闭正确内容的末尾，以便所有文本都在一个框中。

[http://brimbar.com/no_crawl/RiverHollow/history.html](http://brimbar.com/no_crawl/RiverHollow/history.html)

我可以添加一个负边距来实现这一点，但我假设我做错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:25:18.227

取消`float`两个（或全部，如果您打算添加更多）右侧 div，将它们放在一个包装器中，然后给该包装器一个`margin-left`与左侧 div 宽度相等的值。

截图：[http ://easycaptures.com/fs/uploaded/677/0314515048.png](http://easycaptures.com/fs/uploaded/677/0314515048.png)

演示：http: [//jsbin.com/aviyok/1/edit](http://jsbin.com/aviyok/1/edit)

您还应该删除右侧内容 div 上的巨大负边距；这很容易打破。

# javascript - 为什么替换反斜杠代码在 JS 中不起作用？

> ID：12716132
> 
> 赞同：0
> 
> 时间：2012-10-03T20:13:17.187
> 
> 标签：javascript, replace, backslash

我在 JSP 文件中的代码如下所示：

```
<s:form namespace="/user" action="list" method="POST" id="filterListForm" theme="simple"
        onsubmit="document.getElementById('filterSearchText').value=document.getElementById('filterSearchText').value.replace(/\\/g,'')"> 
```

它不会替换反斜杠字符。我已经尝试了以下方法，它们都不起作用：

```
replace('/\\/g','')
replace(/\\\\/g,'')
replace(\/\\\/g,'') 
```

但是，如果我将其更改为以下内容，它将起作用：

```
<s:form namespace="/user" action="list" method="POST" id="filterListForm" theme="simple"
        onsubmit="replaceBackslash()">

<script type="text/javascript">
  function replaceBackslash() { document.getElementById('filterSearchText').value=document.getElementById('filterSearchText').value.replace(/\\/g,''); }
</script> 
```

为什么 ？有没有办法让它在第一种情况下工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T20:16:13.537

你要：

```
var replaced = original.replace(/\\/g, ''); 
```

在正则表达式文字中，您需要做的就是将反斜杠加倍来引用它。

至于为什么当您尝试通过 JSP 标签传递代码时它不起作用，那可能是 JSP 为您修改字符串。它*可能*会这样做：

```
<s:form ... onsubmit=' ... .replace(/\\\\/g, "") ... ' > 
```

~~但我目前没有很好的方法来尝试~~。

*编辑*——实际上我发现这很有挑战性。这可能取决于您的标签库的功能。我的框架（条纹）喜欢 HTML 转义属性值，所以很难通过类似`&#92;`（嗯，不可能）的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T21:06:17.127

（这并不是真正的解决方案，只是碰巧解决此问题的一般做法的建议。）

底线：使用分离的 Javascript。如果您觉得将其完全分离到不同的文件中工作量太大（即使这可以帮助您彻底避免此类问题），至少将其全部放在底部的脚本标记中。它有助于分离布局和逻辑，并将所有 Javascript 保存在一个已知位置，使其更易于理解和维护。您甚至不需要 onclick/onsubmit 属性，您也可以在 Javascript 中分配这些属性（通常键入 html #id 属性）。如果您仍然使用 on[event] 属性，只需调用一个合理命名的函数，并将该函数的实现放在您的主脚本中。

# android - JPG 文件未显示在 Android 应用程序中

> ID：12716144
> 
> 赞同：1
> 
> 时间：2012-10-03T20:13:46.397
> 
> 标签：android, jpeg

我一直在开发一个 Yahtzee 应用程序，该应用程序在骰子滚动时显示骰子 jpg 文件。这些骰子仅显示为黑框，而不是 jpg 文件。

我正在使用 Google Nexus 7 安卓设备。

这是我如何在代码中发布图像的示例。

```
mDieImageView[i].setImageResource(R.drawable.d0a); 
```

d0a 是其中一个 jpg 的名称。它是一个原生文件。

谢谢你提供的所有帮助。杰克

# svn - 提交时 node.js 中的符号链接

> ID：12716147
> 
> 赞同：1
> 
> 时间：2012-10-03T20:13:49.807
> 
> 标签：svn, node.js, express, symlink

我试图在 VirtualBox（来宾 Ubuntu，主机 Win7）的共享文件夹上创建一个 node.js（express.js）应用程序。在此尝试期间，我收到一条错误消息，提示我的驱动器不支持符号链接。这是一个小问题，但是...

如果符号链接对节点项目如此重要，那么如何将项目存储在 SVN 服务（忽略符号链接）上。或者如果我用项目压缩目录并将其发送给某人会发生什么。它还会起作用吗？

这似乎是一个愚蠢的问题，但我在创建 express.js 项目时遇到了一个错误，这是由 symlinks-not-supported 消息引起的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T21:32:11.913

我不知道你是如何创建你的 express 项目的，也不知道你是如何出现错误的，但我可以根据经验告诉你，符号链接对于节点项目来说不是必需的。

我通常的开发环境是 Windows 7，部署到 linux 只是将文件移动到其他环境中的简单问题，方法是打包、使用 git 或创建 nvm 包或任何其他方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T15:04:42.213

如果您想在 VirtualBox 中启用符号链接的创建，请使用以下命令：

```
VBoxManage setextradata VM_NAME VBoxInternal2/SharedFoldersEnableSymlinksCreate/SHARE_NAME 1 
```

请注意，SHARE_NAME 不应包含 sf_ 部分 - 仅当您在 VirtualBox 界面的共享文件夹屏幕中查看它时可见的名称。

这将启用从来宾创建符号链接。但是，它可能会引发安全问题。[您可以在此处](https://www.virtualbox.org/ticket/10085%20here)的 VirtualBox 站点上阅读有关该问题的更多信息，并确定它是否是满足您要求的正确选择。[此处](http://ahtik.com/blog/2012/08/16/fixing-your-virtualbox-shared-folder-symlink-error/)针对 Windows 用户对此解决方案进行了另一次讨论 。

# php - 通过 AJAX 传递签名以确保安全

> ID：12716148
> 
> 赞同：0
> 
> 时间：2012-10-03T20:13:50.803
> 
> 标签：php, ajax, session, jquery, session-variables

昨晚我阅读了有关通过 AJAX 传递签名以改进安全措施的信息。虽然我不记得它究竟阻止了什么，但我认为实施这样的措施没有任何问题。如果我在 AJAX 代码中实现签名，这样的结果会怎样？

```
//variable below passes through AJAX
$signature = time();

//AJAX file receives variable, checks it against this variable below
$signature2 = time();

//if signature1 and signature 2 are more than one minute apart the ajax file is 
dead 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:21:26.247

您可以尝试传递随机生成的“密钥”（每个用户一个）并保存在 cookie 中。然后，您从 JS 获取 cookie 获取 cookie 的值并将其发送到 PHP 文件。最后一个检查 ajax 发送的密钥是否与 cookie 中的相同。

# android - Jenkins Lint 插件没有收到结果

> ID：12716150
> 
> 赞同：3
> 
> 时间：2012-10-03T20:13:54.417
> 
> 标签：android, jenkins, android-lint

我在 jenkins 中安装了[Android Lint Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Android+Lint+Plugin)插件，并在我的 Android 项目构建（使用 maven 构建）中激活了它。然后我使用命令添加了“执行 shell”作为构建后操作

```
os_opts="-Djava.awt.headless=true" lint --xml lint-results.xml . 
```

如所述。lint-results.xml 文件在根工作区文件夹中创建，其中包含结果。但不知何故，插件不会获取结果并将它们显示在任何地方。

我已经尝试为结果 xml 文件配置不同的文件名和位置，但这似乎没有帮助。

可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-05T12:16:34.660

鉴于 lint-results.xml 文件是使用`lint`or生成的`gradle build`，您需要检查“Publish Android Lint results”步骤是否添加为“Post-build Actions”

# c++ - 为什么 std::fstream 返回 void 而不是 bool

> ID：12716151
> 
> 赞同：0
> 
> 时间：2012-10-03T20:14:01.640
> 
> 标签：c++

为什么 C++ 标准库中 std::fstream 类的成员函数 open 返回 void 而不是 bool 以立即检查是否成功打开？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:14:54.770

因为`open`如果设置了异常，则在调用不成功时会抛出异常，或者它们用于`failbit`指示发生了错误。从文档中：

> 失败时，会设置 failbit 标志（可以使用成员 fail 进行检查），并且根据设置有异常的值，可能会引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T20:28:42.353

我的理解是，当 fstream 允许您尝试读取（或者我想也可以写入）任何类型的文件时，fstream 可能会失败的方式有很多。根据情况和程序员的不同，“失败”也可能是模棱两可的。鉴于此，我认为很难从布尔返回值中得到任何有意义的东西。

# android - 我可以为 maps.google.com 的路线 URL 的位置添加标题吗？

> ID：12716152
> 
> 赞同：0
> 
> 时间：2012-10-03T20:14:08.317
> 
> 标签：android, google-maps, url, maps, directions

我目前正在使用以下网址询问方向： http://maps.google.com/maps?saddr=42.39384,-71.14494&daddr=48.3938453, [-75.3423](http://maps.google.com/maps?saddr=42.39384,-71.14494&daddr=48.3938453,-75.3423)

这很好用，方向也很好。不幸的是，方向在“未知路”和“未知路”之间。这当然是因为我使用的是纬度/经度坐标。

我想知道是否有一种方法可以向 url 添加标题，这样方向就不会改变，但起点和终点会被正确标记。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T21:12:10.830

是的，您可以通过在位置后用括号括起来的字符串来添加标题。因此，示例 URL 将是：

[https://maps.google.com/maps?saddr=37.7793,-122.4192（我的城市）&daddr=38.555556,-121.468889（奶奶的城市）](https://maps.google.com/maps?saddr=37.7793,-122.4192%20%28My%20City%29&daddr=38.555556,-121.468889%20%28Granny%27s%20City%29)

您可以看到网页标题和行车路线指的是纬度/经度位置，就像您放在括号中的任何内容一样。

**编辑**：看起来在我上面的原始答案 4 年后，谷歌改变了这种行为，不幸的是它不再起作用了。它留在这里作历史记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T20:23:30.897

看看这个页面：[https ://developers.google.com/maps/documentation/staticmaps/#Markers](https://developers.google.com/maps/documentation/staticmaps/#Markers)

**多一点解释：**

据我所知，不可能将标签添加到使用普通谷歌地图生成的方向，但通过使用谷歌地图 api，可以在地图上放置带有自定义标签甚至图标的自定义标记。您可以按照上述页面中的说明编辑 url，尝试在路线旁边添加标记，如果您觉得它可以为您创建一个应用程序。

# javascript - Javascript 无法识别使用 XMLHttpRequest 输入 DIV 的项目

> ID：12716153
> 
> 赞同：1
> 
> 时间：2012-10-03T20:14:13.457
> 
> 标签：javascript, xmlhttprequest, innerhtml

搜索了该站点后，我认为我遇到的问题可能与使用 innerHTML 填充 a 相关，`<div>`但我找不到可以映射到我的特定问题的解决方案。希望有人可以提供帮助。基本上，我有一个 HTML 页面，其中包含一个带有文本字段的表单。该页面还包含一个空白`<div>`，稍后将填充一个目录。`<div>`定义为：

```
<div id="toc_menu" class="menu_list"> 
```

我已经设置了表单文本字段的 onkeyup 属性来运行一个 Javascript 函数（在 HTML`<head>`中定义），该函数定义了一个 XMLHttpRequest 并将在文本输入字段（str）中输入的值发送到一个 PHP 页面，使用`xmlhttp.open("GET","toc_items.php?filter="+str,true)`. PHP 页面获取 'filter' 的值并运行 MySQL 查询。然后，它会产生一些结果，这些结果会作为包含主标题和副标题的目录回显到空白处，使用：

```
document.getElementById("toc_menu").innerHTML=xmlhttp.responseText; 
```

这或多或少符合预期。在文本字段中输入文本时，返回的目录的长度会发生变化。但是，有一个问题。该目录应该具有使用 HTML 中定义的脚本创建的手风琴效果`<head>`。该脚本由 Roshan Bhattarai 开发，当目录列表被硬编码到 HTML 页面中时，它可以很好地工作。脚本如下：

```
<script type="text/javascript">
    <!--
    //---------------------------------+
    //  Developed by Roshan Bhattarai
    //  Visit http://roshanbh.com.np for this script and more.
    //  This notice MUST stay intact for legal use
    // --------------------------------->
    $(document).ready(function()
                      {
                      //slides the element with class "menu_body" when paragraph with class "menu_head" is clicked
                      $("#toc_menu p.menu_head").click(function()
                                                       {
                                                            $(this).css({backgroundImage:"url(down.png)"}).next("div.menu_body").slideToggle(300).siblings("div.menu_body").slideUp("slow");
                                                            $(this).siblings().css({backgroundImage:"url(left.png)"});
                                                       });
                      });
</script> 
```

格式如下的目录项：

```
<p class="menu_head">HEADING</p>;
<div class="menu_body">;
   <a href="link-to-relevant-page" target="body_frame">SubHeading</a>';
</div>; 
```

似乎插入到的目录项`<div>`不会触发 HTML 页面中的 Javascript `<head>`（尽管使用也定义在 中的 CSS 文件正确格式化了文本`<head>`）。我可以手动复制PHP页面的输出并将其粘贴到`<div>`手风琴效果中。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:23:08.560

看来代码块：

```
<p class="menu_head">HEADING</p>;
<div class="menu_body">;
<a href="link-to-relevant-page" target="body_frame">SubHeading</a>';
</div>; 
```

由 ajax 调用中的 PHP 回显。如果我错了，请纠正我。如果 ajax 调用构建此 html 并将其回显到屏幕上，则上述脚本将不起作用。如上所述，ajax 调用是通过表单上的 keyup 事件进行的。但是，上面的脚本是在 $(document).ready 上运行的。如果我的理解是正确的，那么在进行 ajax 调用而不是在页面加载时，内容将放置在 div 的 innerhtml 中。因为当页面在 $(document).ready 上加载时没有类“menu_head”的“p”元素，jquery 无法正确绑定 .click 事件。该脚本需要在 ajax 调用返回并且 DOM 已使用新元素更新后执行。

换句话说，从 ajax 调用成功返回时，运行上面的脚本，而不是 $(document).ready。一旦元素在 DOM 中，jquery 就可以找到它们并将 .click 事件绑定到它们。然后脚本执行应该成功完成。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:41:38.883

我没有详细研究过你的代码，但确实注意到你的空*div*元素没有关闭标签（除非你省略了这个细节）。你应该总是有一个关闭标签（对于*div*元素），以确保 DOM 不会对应该插入的位置做出无效的假设，请使用：

```
<div id="toc_menu" class="menu_list"></div> 
```

# system-calls - printk 数据丢失和截断

> ID：12716154
> 
> 赞同：3
> 
> 时间：2012-10-03T20:14:31.883
> 
> 标签：system-calls, buffer-overflow, data-loss, printk

我在我的内核可加载模块中使用 printk 来记录系统调用的参数。对于每个系统调用，使用几个 printk 来打印变量，它们以“\t”作为分隔符出现。要将内核日志缓冲区中的数据重定向到系统 /var/log/messages 以外的另一个文件，我使用“klogd -f”绕过 syslog 接口。每次系统调用获取的日志数据为一行。但是，在分析数据后，我发现存在两个问题。

问题1：数据可能会丢失。

问题2：一个系统调用的数据与属于另一个系统调用的数据混合在一起，可能在中间。

问题1：是内核日志缓冲区溢出覆盖了缓冲区中最旧的日志造成的数据丢失吗？如果是这样，如何克服它？我计划增加内核日志缓冲区的大小。你认为它合适吗？什么尺寸最好？

问题2：系统调用可以抢占另一个系统调用吗？或者在某些情况下，一个系统调用可能会调用另一个系统调用并且除非被调用的系统调用完成，否则无法完成？这是数据相互混合的原因吗？

问题3：printk 是原子的吗？如果没有，如何使 printk 原子化？添加锁以使其不可中断？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:28:55.060

如果您只想转储程序正在进行的所有系统调用（带参数），[请查看](http://www.hokstad.com/5-simple-ways-to-troubleshoot-using-strace.html)该`strace`命令。

问题1：排序。内核日志缓冲区被实现为一个环形缓冲区。如果环形缓冲区是 128K 并且如果内核自启动以来总共写入了 129K 的数据，那么前 1K 将被最新的数据覆盖。`log_buf_len`您可以通过内核引导参数或在编译时在内核的 .config 文件中增加此缓冲区的大小。您还可以使用 dmesg 更改环形缓冲区的大小，通过运行`dmesg -s524288`将其设置为 512KiB。您必须根据吐出的数据量确定最佳大小。

问题 2：一个系统调用可能会抢占另一个系统调用，并且内核中还有很多其他抢占的情况——中断服务例程就是一个典型的例子。此外，如果您使用的是多核系统，则可能有多个活动内核线程。

问题 3：我相信 printk 试图锁定内核的环形缓冲区。不过这有点复杂，因为您可以从恐慌状态调用 printk。

# mongodb - 将三个独立的 mongodb 服务器更改为副本集？

> ID：12716157
> 
> 赞同：0
> 
> 时间：2012-10-03T20:14:39.510
> 
> 标签：mongodb

我有三个独立的 MongoDB 数据库服务器，每个服务器都有不同的数据，但数据库和集合名称相同。我已经将它们转换为一个复制集，现在每当我从主服务器读取数据时，我只能从复制集初始化之前获取该特定服务器上的数据。这是预期的行为吗？我是否必须等待所有服务器同步才能读取所有三个数据库中的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:47:17.317

当您初始化副本集时，每个辅助节点都会从主节点同步数据，以确保所有节点都具有相同的数据副本 - 没有数据的“合并”。确实成为辅助节点的两个节点将完全擦除并重新同步它们的数据。

请参阅[http://docs.mongodb.org/manual/core/replication-internals/#syncing](http://docs.mongodb.org/manual/core/replication-internals/#syncing)。

如果两个辅助节点的数据没有在任何地方备份，您可能已经丢失了它。

# ruby - 如何在 Rails 中生成发布到 wordpress 的帖子的链接？

> ID：12716159
> 
> 赞同：1
> 
> 时间：2012-10-03T20:14:44.333
> 
> 标签：ruby, ruby-on-rails-3, wordpress, eventmachine

我有以下任务：

用户输入一些关键字和文本，例如“CODE “some code””。我需要将此代码“一些代码”发布到我的 wordpress 帐户到特定类别，然后在聊天室中提供指向该帖子的链接。这必须使用 eventmachine 来完成。

我找到了发布到 wordpress 的方法。[http://rcbth.com/2010/07/16/wordpress-posting-from-ruby-xmlrpc/](http://rcbth.com/2010/07/16/wordpress-posting-from-ruby-xmlrpc/)和[https://github.com/cjbottaro/em-xmlrpc-client](https://github.com/cjbottaro/em-xmlrpc-client)使其与 eventmachine 兼容。但我无法猜测如何生成该帖子的正确链接。

对不起，我的英语不好。

# vb.net - 日期在 VB.NET 的 GB 环境中恢复为美国格式

> ID：12716164
> 
> 赞同：1
> 
> 时间：2012-10-03T20:14:54.323
> 
> 标签：vb.net, date

为什么 CDate 和 parseExact 将今天的日期（10 月 3 日）（表示为 03/10/2012）变成 10/03/2012？我正在使用 Windows 7，VS2012。我在控制面板中的所有设置都是 UK/GB。我试过添加这些行

```
 System.Threading.Thread.CurrentThread.CurrentCulture = New System.Globalization.CultureInfo("en-GB", True)
    System.Threading.Thread.CurrentThread.CurrentUICulture = New System.Globalization.CultureInfo("en-GB", True) 
```

没有效果。

这是我的代码 - 你会看到我必须求助于交换文本版本的日期和月份才能获得我想要的日期

```
 dim txtDate As String = "03/10/2012"
    Dim strOriginalDate As String = txtDate   ' 03/10/2012
    Dim dtmdate1 As Date = CDate(txtDate)     ' #10/03/2012#
    Dim dtmdate2 As Date = DateTime.ParseExact(txtDate, "dd/MM/yyyy", Nothing) ' #10/03/2012#
    txtDate = Split(txtDate, "/")(1) & "/" & Split(txtDate, "/")(0) & "/" & Split(txtDate, "/")(2)
    Dim dtmdate3 As Date = CDate(txtDate)     ' #3/10/2012# 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:32:49.573

我怀疑您正在查看调试器的 Locals 窗格中的日期值。如果您实际写出这些值，您会发现它们是所需的：

```
Module Module1

    Sub Main()
        System.Threading.Thread.CurrentThread.CurrentCulture = New System.Globalization.CultureInfo("en-GB", True)
        System.Threading.Thread.CurrentThread.CurrentUICulture = New System.Globalization.CultureInfo("en-GB", True)

        Dim txtDate As String = "03/10/2012"
        Dim strOriginalDate As String = txtDate
        Dim dtmdate1 As Date = CDate(txtDate)
        Console.WriteLine(dtmdate1.ToString("dd MMM yyyy"))

        Dim dtmdate2 As Date = DateTime.ParseExact(txtDate, "dd/MM/yyyy", Nothing) ' #10/03/2012#
        Console.WriteLine(dtmdate2.ToString("dd MMM yyyy"))
        txtDate = Split(txtDate, "/")(1) & "/" & Split(txtDate, "/")(0) & "/" & Split(txtDate, "/")(2)

        Dim dtmdate3 As Date = CDate(txtDate)
        Console.WriteLine(dtmdate3.ToString("dd MMM yyyy"))

        Console.ReadLine()

    End Sub

End Module 
```

当然，最后一行的输出并不理想，因为您已经交换了月份和日期。

在设置为 en-GB 的 W7 x64 上使用 VS2012 RC 进行测试。您可能想通过设置 VS 的语言环境进行测试：http: [//msdn.microsoft.com/en-US/library/9cytz106%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-US/library/9cytz106%28v=vs.80%29.aspx)

将日期显示为日期文字与数据文字的定义方式完全一致，例如参见[日期数据类型 (Visual Basic)的格式要求小节](http://msdn.microsoft.com/en-us/library/3eaydw6e%28v=vs.110%29.aspx)

# mongoid - 使用 Mongoid 3 强制字段类型

> ID：12716166
> 
> 赞同：1
> 
> 时间：2012-10-03T20:14:56.193
> 
> 标签：mongoid, mongoid3

我正在从 Mongoid 2 升级。我有以下模型：

```
class Person
  include Mongoid::Document

  field :names, type: Array
end 
```

以下用于引发异常：

```
p = Person.new
p.names = 'stuff' 
```

现在在 Mongoid 3 下，没有引发异常，它默默接受。

如何强制执行数组类型？

# javascript - 数据库查询的下一个/预览行

> ID：12716172
> 
> 赞同：0
> 
> 时间：2012-10-03T20:15:32.477
> 
> 标签：javascript, asp.net

![在此处输入图像描述](../Images/815e921894fff68a091829b7b1e5cae9.png)

我面前有这个页面。我想要做的是当我按下按钮下一步或预览通过 AjAX 更改索引时。

根据图像，当我按下下一个图像按钮时，文本必须更改为“andreas”，如果我再次按下下一步，则更改为“NEWW”，然后更改为“apoel”，然后再次更改为“姓氏”。

按 ACTORS 链接时，我有此代码：

```
/* FOR THE ACTORS TAB */
litActors.Text = "";
actorsCmd = "SELECT actor_name,a.id_actor FROM actor a JOIN project_actor pa on a.ID_ACTOR = pa.ID_ACTOR WHERE ID_PROJECT = " + Request.QueryString["id"];
SqlCommand cmdActor = new SqlCommand(actorsCmd, con);
SqlDataReader reader;
try
{
     reader = cmdActor.ExecuteReader();
     while (reader.Read())
     {
          litActors.Text += "<li><a onclick=\"javascript:getSummary(" + reader.GetInt32(1).ToString() + ",'a');document.getElementById('projectNav').style.display = 'none';document.getElementById('left_right').style.display = 'inline-block';displayActor('" + reader.GetString(0) + "') \">" + reader.GetString(0) + "</a></li>";

     }

}
catch (Exception err)
{
     con.Close();
     return;
} 
```

上面代码的 html 表示是这样的（忽略那些 style.display。它们是用于界面的）：

```
<ul class="slideShow actors">
    <li><a onclick="javascript:getSummary(62,'a');document.getElementById('projectNav').style.display = 'none';document.getElementById('left_right').style.display = 'inline-block';displayActor('Name Surname') ">Name Surname</a></li>
    <li><a onclick="javascript:getSummary(1,'a');document.getElementById('projectNav').style.display = 'none';document.getElementById('left_right').style.display = 'inline-block';displayActor('andreas') ">andreas</a></li>
    <li><a onclick="javascript:getSummary(63,'a');document.getElementById('projectNav').style.display = 'none';document.getElementById('left_right').style.display = 'inline-block';displayActor('NEWW') ">NEWW</a></li>
    <li><a onclick="javascript:getSummary(53,'a');document.getElementById('projectNav').style.display = 'none';document.getElementById('left_right').style.display = 'inline-block';displayActor('apoel') ">apoel</a></li>
</ul> 
```

现在我的javascript函数是这样的：

```
function getSummary(id,type) {
    if (id == "") {
        document.getElementById("data").innerHTML = "";
        return;
    }
    var xmlhttp;
    if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    }
    else {// code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange = function () {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            document.getElementById("data").innerHTML = xmlhttp.responseText;
        }
    }
    if (type == 'a') {
        xmlhttp.open("GET", "desciptionActorHelper.aspx?id=" + id, true);
    } else if ...

    xmlhttp.send();
}

function displayActor(nameActor) {
        var btnActor = document.getElementById('displayMe'); btnActor.style.display = 'inline';
        btnActor.innerHTML = "<a>ACTOR:</a> " + nameActor;
} 
```

和我的下一个/上一个按钮：

```
litDescField.Text = "<span id='left_right'>" +
                          "<a><img src='../images/left-arrow.png' /></a>&nbsp&nbsp&nbsp&nbsp" +
                          "<a><img src='../images/right-arrow.png' /></a>" +
                    "</span>"; 
```

有没有人知道一个**好的和简单的方法**来做到这一点？

因为我的想法很复杂，我什至不确定它们是否会起作用。

我正在考虑制作一个带有演员 ID 的表格（我必须运行一个查询来获取演员的数量和他们的 ID）和 onClick 的 next 或 prev 更改一个光标，说明您现在在表格中的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:12:34.793

我不知道这是您认为好的还是容易的，但这是一种方法：

将您的处理程序更改为：

```
SqlCommand cmdActor = null;
SqlDataAdapter da = null;
DataSet ds = null;
DataRow row = null;
int rowIndex = 0;
int rowNext = 0;
int rowPrev = 0;
int rowMax = 0;
bool isFirstRow = false;
bool isLastRow = false;
HtmlGenericControl li = null;
HtmlGenericControl a = null;
StringBuilder sb = null;

litActors.Text = "";
actorsCmd = "SELECT actor_name, a.id_actor FROM actor a JOIN project_actor pa on a.ID_ACTOR = pa.ID_ACTOR WHERE ID_PROJECT = @ID_PROJECT";
cmdActor = new SqlCommand(actorsCmd, con);
//Parameterizing ID_PROJECT to protect against SQL injection
cmdActor.Parameters.AddWithValue("ID_PROJECT", Request.QueryString("id"));

try {
    //Using a SqlDataAdapter instead of a SqlDataReader because forward-only access is 
    //not conducive for trying to peek ahead or look-behind
    da = new SqlDataAdapter(cmdActor);
    da.Fill(ds);
    //check returned tables
    if (ds.Tables.Count > 0) {
        //Zero-out the row counter and set index of maxRow
        rowIndex = 0;
        rowMax = ds.Tables(0).Rows.Count - 1;
        foreach ( row in ds.Tables(0).Rows) {
            //Test to see if the row counter has incremented to the last row
            isFirstRow = rowIndex == 0;
            //Test to see if the row counter has incremented to the last row
            isLastRow = rowIndex == rowMax;
            //Set prev/next rows
            rowPrev = (isFirstRow ? rowMax : rowIndex - 1);
            rowNext = (isLastRow ? 0 : rowIndex + 1);
            //Make new HTML controls
            li = new HtmlGenericControl("li");
            a = new HtmlGenericControl("a");
            //Make a StringBuilder to assemble the "onclick" in a more readable fashion
            //subbing in "row("actor_id")" and row("actor_name") for an example of column names
            sb = new StringBuilder();
            sb.Append("javascript:getSummary(");
            sb.Append(row("actor_id").ToString());
            sb.Append(", 'a');");
            sb.Append("document.getElementById('projectNav').style.display = 'none';");
            sb.Append("document.getElementById('left_right').style.display = 'inline-block';");
            sb.Append("displayActor('");
            sb.Append(row("actor_name").ToString());
            //add in the prev/next actor ids to pass to javascript:displayActor();
            sb.Append("', ");
            sb.Append(ds.Tables(0).Rows(rowPrev)("actor_id").ToString());
            sb.Append(", ");
            sb.Append(ds.Tables(0).Rows(rowNext)("actor_id").ToString());
            sb.Append(");");
            //Add initial "onclick" for the litActors list
            a.Attributes.Add("onclick", sb.ToString);
            a.InnerText = row("actor_name");
            //Add new anchor to litActors
            li.Controls.Add(a);
            litActors.Controls.Add(li);
            //increment row counter
            rowIndex += 1;
        }
    }
} catch (Exception err) {
    con.Close();
    return;
} 
```

它将新的 Actor 列表呈现为：

```
<ul class="slideShow actors">
    <li><a onclick="javascript:getSummary(62,'a');document.getElementById('projectNav').style.display = 'none';document.getElementById('left_right').style.display = 'inline-block';displayActor('Name Surname', 53, 1);">Name Surname</a></li>
    <li><a onclick="javascript:getSummary(1,'a');document.getElementById('projectNav').style.display = 'none';document.getElementById('left_right').style.display = 'inline-block';displayActor('andreas', 62, 63);">andreas</a></li>
    <li><a onclick="javascript:getSummary(63,'a');document.getElementById('projectNav').style.display = 'none';document.getElementById('left_right').style.display = 'inline-block';displayActor('NEWW', 1, 53);">NEWW</a></li>
    <li><a onclick="javascript:getSummary(53,'a');document.getElementById('projectNav').style.display = 'none';document.getElementById('left_right').style.display = 'inline-block';displayActor('apoel', 63, 62);">apoel</a></li>
</ul> 
```

然后在您的 JavaScript 中，需要进行两项更改：

```
function getSummary(id, type, callback) {
    if (id == "") {
        document.getElementById("data").innerHTML = "";
        return;
    }
    var xmlhttp;
    if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    } else { // code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange = function () {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            //CHANGE 1: Execute callback, if supplied
            if (callback) {
                callback(xmlhttp.responseText);
            } else (
                //Default action
                document.getElementById("data").innerHTML = xmlhttp.responseText;
            }
        }
    }
    if (type == 'a') {
        xmlhttp.open("GET", "desciptionActorHelper.aspx?id=" + id, true);
    } //else if ...
    xmlhttp.send();
}

function displayActor(nameActor, prev, next) {
    var btnActor = document.getElementById('displayMe'),
        span = document.getElementById('left_right');
    btnActor.style.display = 'inline';
    btnActor.innerHTML = "<a>ACTOR:</a> " + nameActor;
    //CHANGE 2: Set prev/next via AJAX
    getSummary(prev, 'a', function (data) {
        //do something with the previous actor
        span.children[0].innerText = data;
    });
    getSummary(next, 'a', function (data) {
        //do something with the next actor
        span.children[span.children.length - 1].innerText = data;
    });
} 
```

**更新：**

我的回答已经将 actor_id （对于上一个和下一个演员）发送到 displayActor 函数。

请注意，在本节（代码隐藏）中，我`DataTable.Rows`用于获取上一个和下一个 actor_id：

```
//add in the prev/next actor ids to pass to javascript:displayActor();
sb.Append("', ");
//RENDER the PREVIOUS actor_id as a parameter to the "onclick"
sb.Append(ds.Tables(0).Rows(rowPrev)("actor_id").ToString());
sb.Append(", ");
//AND THEN render the NEXT actor_id as a parameter to the "onclick"
sb.Append(ds.Tables(0).Rows(rowNext)("actor_id").ToString());
sb.Append(");"); 
```

`displayActor`它将“onclick”事件中的调用呈现为：

```
displayActor('Name Surname', 53, 1); 
```

这就是为什么 JavaScript 函数定义现在是：

```
function displayActor(nameActor, prev, next) 
```

最后两个命令`displayActor`用于您的 AJAX`getSummary`函数。

```
getSummary(prev, 'a', function (data) {
    //do something with the previous actor
    span.children[0].innerText = data;
}); 
```

也可以写成：

```
var callback = function (data) {
    //do something with the previous actor
    span.children[0].innerText = data;
};
getSummary(prev, 'a', callback); 
```

如果`xmlhttp.responseText`你的 AJAX 函数中的返回当前参与者，修改`desciptionActorHelper.aspx`为也返回前一个和下一个参与者，并简单地从响应中渲染它们。

# matlab - MATLAB 曲线拟合（类椭圆）

> ID：12716177
> 
> 赞同：4
> 
> 时间：2012-10-03T20:16:00.280
> 
> 标签：matlab, curve-fitting

我需要将 10 个数据点 ( `x,y`) 拟合到这个等式中：

```
ay² + bxy + cx + dy + e = x² 
```

据说这是一个类似椭圆的方程。我不能用通常的曲线拟合工具来做到这一点，因为它不是一个真正的函数（一个`x`对应于 2`y`秒）。我也不能使用椭圆曲线拟合，因为椭圆方程中没有`c*x`and 。`d*y`有任何想法吗？

提前致谢。

**编辑：** Oil 和 AK4749 都给出了正确答案！谢谢你们！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T21:27:57.913

它是一个带有变量 [abcde] 的线性系统。您可以使用`\`它来解决它：

```
 x=rand(10,1);
 y=rand(10,1);
 [y.^2,x.*y,x,y,ones(numel(x),1)]\x.^2

ans =

   -0.4437 %% a
    1.1034 %% b
    0.5337 %% c
   -0.2808 %% d
    0.0402 %% e 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:20:42.987

试一试：

[http://www.mathworks.com/matlabcentral/fileexchange/3215-fitellipse](http://www.mathworks.com/matlabcentral/fileexchange/3215-fitellipse)

# javascript - Javascript 下拉列表的案例选择

> ID：12716183
> 
> 赞同：1
> 
> 时间：2012-10-03T20:16:28.963
> 
> 标签：javascript, switch-statement, getelementbyid

所以这是我第一次尝试 Javascript。我实际上是在尝试根据下拉框中选择的值生成唯一的 DIV。我有它来显示 DIV，但值不会根据选择的内容而改变。这是我到目前为止所得到的：

[jsfiddle](http://jsfiddle.net/JHjFL/2/)

正如您所看到的，当200,000美元的范围是选择我想要生产已计算的固定值。我很想知道是否有一个 switch 或 case select 语句，我可以根据下拉列表中选择的实际选项以某种方式生成更改 DIV 的语句。任何指向正确方向的指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:54:08.017

如果您不想使用 jQuery，您可以尝试切换选择并设置 value1、value2、value3 的 innerHTML

```
 switch(document.getElementById('mySelect').value)
{
    case '0': 
        document.getElementById('value1').innerHTML ='Principal and Interest only: $898';
        document.getElementById('value2').innerHTML = 'Estimated total monthly payment: $1,098';
        document.getElementById('value3').innerHTML ='VA loan payment:';    
        break;   
    case '1': 
        document.getElementById('value1').innerHTML ='Principal and Interest only: $998';
        document.getElementById('value2').innerHTML = 'Estimated total monthly payment: $2,098';
        document.getElementById('value3').innerHTML ='VA loan payment: $25';    
        break;          
    etc...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:39:01.937

以下是使用 jQuery 执行此操作的方法：

```
<select id="mySelect" onchange="showhide(this)">
    <option value="">Desired Home Price:</option>
    <!-- the option values are suffixes for the elements to show -->
    <option value="0">$200,000</option>
    <option value="1">$175,000</option>
    <option value="2">$150,000</option>
    <option value="3">$125,000</option>
    <option value="4">$100,000</option>
    <option value="5">$75,000</option>
    <option value="6">$50,000</option>
</select>

<div class="answer0 answers" style="width:200px;height:200px;display:none">
<div id="value1">Principal and Interest only: $898</div> 
<div id="value2">Estimated total monthly payment: $1,098</div>
<div id="value3">VA loan payment:</div>
<div id="value4">Another field:</div>
</div>

<div class="answer1 answers" style="width:200px;height:200px;display:none">
<div id="value1a">Principal and Interest only: $898.00</div> 
<div id="value2a">Estimated total monthly payment: $1,098.00</div>
<div id="value3a">VA loan payment:</div>
<div id="value4a">Another field:</div>
</div>

<script type="text/javascript">

function showhide(id) {
    var mySel = $(id).val()
    $('.answers').hide()  
    $('.answer'+mySel).show()  
}

</script> 
```

​</p>

# objective-c - Objective c NSDate 来自 NSString 的当前日期和时间

> ID：12716193
> 
> 赞同：0
> 
> 时间：2012-10-03T20:17:20.107
> 
> 标签：objective-c, ios, xcode

非常简单的问题，但我想知道如何从 NSString NSString 内容格式的当前日期和时间制作 NSDate 是这样的：“hh:mm:ss” 简单，但我做不到 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:19:01.757

你可以使用[`NSDateFormatter`](https://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/)类来做到这一点。

```
NSDateFormatter *df = [[[NSDateFormatter alloc] init] autorelease];
[df setDateFormat:@"hh:mm:ss"];
NSDate* date = [df dateFromString:@"20:31:39"]; 
```

# c++ - 标准::向量大小？

> ID：12716201
> 
> 赞同：7
> 
> 时间：2012-10-03T20:17:54.847
> 
> 标签：c++, vector, c++11, std, initializer-list

程序：

```
#include<vector>

int main() {
    std::vector<int>::size_type size=3;
    std::vector<int> v{size};
} 
```

编译时

```
g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3 
```

产生错误：

```
ppp.cpp: In function ‘int main()’:
ppp.cpp:5:28: error: narrowing conversion of ‘size’ from ‘std::vector<int>::size_type {aka long unsigned int}’ to ‘int’ inside { } [-fpermissive]
ppp.cpp:5:28: error: narrowing conversion of ‘size’ from ‘std::vector<int>::size_type {aka long unsigned int}’ to ‘int’ inside { } [-fpermissive] 
```

在[http://www.cplusplus.com/reference/stl/vector/vector/](http://www.cplusplus.com/reference/stl/vector/vector/)上写着

```
explicit vector ( size_type n, const T& value= T(), const Allocator& = Allocator() ); 
```

我希望使用该构造函数。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-03T20:39:01.823

您没有调用将向量设置为初始大小的构造函数。

```
std::vector<int> v{size}; 
```

上面创建了一个`vector`包含单个`int`元素的 value `size`。您正在调用此构造函数：

```
vector( std::initializer_list<T> init, const Allocator& alloc = Allocator() ); 
```

大括号初始化器列表被推导出为 an `std::initializer_list<size_type>`，然后必须执行缩小转换，因为它`vector`本身包含`int`s。

要设置向量的初始大小，请使用：

```
std::vector<int> v(size);  // parentheses, not braces 
```

* * *

此外，`vector`您列出的构造函数不再存在，它在 C++11 中被删除并被以下两个构造函数替换：

```
vector( size_type count, const T& value, const Allocator& alloc = Allocator());

explicit vector( size_type count ); 
```

[与 cplusplus.com 相比， cppreference.com](http://en.cppreference.com/w/cpp)是一个更好的参考。

# unit-testing - Keccak (SHA-3) 示例哈希（测试向量）是否可用？

> ID：12716204
> 
> 赞同：3
> 
> 时间：2012-10-03T20:18:19.213
> 
> 标签：unit-testing, sha, sha-3, keccak

我对实现 Keccak (SHA-3) 很感兴趣，并且想要一组输入/预期输出对来进行测试。是否发布了任何官方测试载体？我记得有一些用于其他 SHA 例程，它们非常有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T03:17:25.350

是的。[请参阅下载页面](http://keccak.noekeon.org/files.html)上的“已知答案和蒙特卡洛测试结果”项目符号，或[直接转到文件](http://keccak.noekeon.org/KeccakKAT-3.zip)。有完整的消息测试向量以及描述各个中间阶段的输入和输出的文件。

当然，您始终可以运行参考实现并比较输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-01T18:13:30.593

> Keccak (SHA-3) 示例哈希（测试向量）是否可用？

是的。NIST 测试向量可在[SHA-3 Reference and Optimized Implementations](http://csrc.nist.gov/groups/ST/hash/sha-3/Submission_Reqs/test_vectors.html)中找到。该页面包括：

*   [SHA-3 候选算法提交的已知答案测试 (KAT) 和蒙特卡洛测试 (MCT) 说明](http://csrc.nist.gov/groups/ST/hash/documents/SHA3-KATMCT1.pdf)
*   [进行 KAT 和 MCT 的测试文件和源代码](http://csrc.nist.gov/groups/ST/hash/sha-3/documents/KAT1.zip)

这些测试可能与 Keccak 测试向量不同，因为 NIST 修改了一些内容。因此，对于 SHA-3，我会专门使用 NIST 提供的内容。

# css - 如何将所有 CSS 值设置为默认值？

> ID：12716205
> 
> 赞同：0
> 
> 时间：2012-10-03T20:18:38.750
> 
> 标签：css

> **可能重复：**
> [在应用全局 CSS 重置后取回默认属性](https://stackoverflow.com/questions/8581880/get-back-default-properties-after-applying-a-global-css-reset)

我想将对象的所有 CSS 属性设置为该属性的默认值。

```
var element = this.get(0); // from jQuery
var props = [];
for (var prop in element.style)
    props.push(prop);
return; 
```

我需要覆盖现有的样式表就是原因。

例如：

```
display:default !important;
color:default !important;
border-radius:default !important;
line-size:default !important; 
```

或者

```
display:!important;
color:!important;
border-radius:!important;
line-size:!important; 
```

*不仅仅是那些款式。所有风格

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T20:21:19.823

您可以使用[initial 关键字](https://developer.mozilla.org/en-US/docs/CSS/initial)来恢复 CSS 属性的默认值。

> 初始CSS 关键字将属性的*初始*值应用于元素。它允许在每个 CSS 属性上使用，并导致指定它的元素使用该属性的初始值。

To restore every property to it's initial value, you'll have to manually add every property to the element's `style` attribute with a value of "initial".

# python - 在python中加载带有占位符的文本文件

> ID：12716210
> 
> 赞同：1
> 
> 时间：2012-10-03T20:18:44.737
> 
> 标签：python, yaml

我正在开发一个安装程序，我需要创建一个用 YAML 编写的设置文件。该文件有一些占位符，需要填写用户提供的数据。我读取文件的代码如下：

```
f = open ('settings.py', 'w +')
settings = open (path + '/ settings_model.yaml', 'r').read()
settings% (user_var)
f.write (settings)
f.close () 
```

settings_model.yaml 文件类似于：

"" "PATH = '%s'" ""

当我运行脚本时，占位符未填充

"" "PATH = '%s'" ""

我该怎么做才能正确填充占位符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:23:05.610

乍一看，我会说您需要在某处分配 %-operation 的结果：

```
settings = settings % user_var 
```

代替

```
settings% (user_var) 
```

（`()`user_var 周围没有区别，如果你希望它是一个元组，请使用`(user_var, )`，但这不是重点，两者都应该工作）。

不知何故，整个事情感觉不是很安全或有保障，但你只要求修复你的代码；）

# java - 调用 JAI.create 时出现 JAI ClassNotFound 异常

> ID：12716213
> 
> 赞同：2
> 
> 时间：2012-10-03T20:18:57.140
> 
> 标签：java, jakarta-ee, image-processing, jai

我正在尝试使用 javax.media.jai.JAI 读取 .tif 图像。这是我的代码：

```
import javax.media.jai.JAI;
import javax.media.jai.RenderedOp;

BufferedImage image = null;
if(extension.toLowerCase().equals("tif")) {
    RenderedOp op = JAI.create(fileName, file);
    image = op.getAsBufferedImage();
} else {
    image = ImageIO.read(file);
} 
```

“文件”（Java.io.File）和“文件名”（字符串）参数很好。但是当它到达“JAI.create(...)”行时，我得到了这个异常：

```
java.lang.ClassNotFoundException: javax.media.jai.JAI 
```

我不确定为什么它找不到 JAI。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T20:28:13.923

JAI 不随 JDK 一起提供。你单独得到它。[在这里](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-java-client-419417.html)找到合适的 JAR 库。然后将其添加到您的路径中。

*注意：如果您使用的是Windows，您可以自己获取jar并指定路径。或者获取将安装相同 jar 并将其添加到系统类路径的 exe。我宁愿自己设置路径。*

*在 Ubuntu 上，您也可以通过以下方式安装它*

```
sudo apt-get install libjai-core-java 
```

加载图像可以这样完成：

```
public BufferedImage loadImage(String filePath){
    RenderedOp img = JAI.create("fileload", filePath);
    return img.getAsBufferedImage();
} 
```

`"fileload"`，作为文字字符串，是使用 . 从文件加载图像**的操作的名称**`JAI.create()`。`fileName`如果不等于，那也可能引发异常`"fileload"`。

# haskell - 从文件加载纯全局变量

> ID：12716215
> 
> 赞同：13
> 
> 时间：2012-10-03T20:19:07.000
> 
> 标签：haskell, global-variables

我有一个文件，里面有一些数据。这些数据永远不会改变，我想让它在 IO monad 之外可用。我怎样才能做到这一点？

示例（请注意，这只是一个示例，我的数据不可计算）：

素数.txt：

> 2 3 5 7 13

代码.hs：

```
primes :: [Int]
primes = map read . words . unsafePerformIO . readFile $ "primes.txt" 
```

这是“合法”使用`unsafePerformIO`吗？有替代品吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-03T21:26:25.917

您可以在编译时使用 TemplateHaskell 读取文件。然后，文件的数据将作为实际字符串存储在程序中。

在一个模块中（`Text/Literal/TH.hs`在本例中），定义如下：

```
module Text.Literal.TH where

import Language.Haskell.TH
import Language.Haskell.TH.Quote

literally :: String -> Q Exp
literally = return . LitE . StringL

lit :: QuasiQuoter
lit = QuasiQuoter { quoteExp = literally }

litFile :: QuasiQuoter
litFile = quoteFile lit 
```

在您的模块中，您可以执行以下操作：

```
{-# LANGUAGE QuasiQuotes #-}
module MyModule where

import Text.Literal.TH (litFile)

primes :: [Int]
primes = map read . words $ [litFile|primes.txt|] 
```

当您编译程序时，GHC 将打开`primes.txt`文件并将其内容插入到`[litFile|primes.txt|]`零件所在的位置。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-04T06:25:13.817

以`unsafePerformIO`这种方式使用并不是很好。

声明`primes :: [Int]`说这`primes`是一个数字列表。一个特定的数字列表，它不依赖于任何东西。

然而，事实上，当定义恰好被评估时，它取决于文件“primes.txt”的状态。有人可以更改此文件以更改`primes`似乎具有的值，根据其类型，这应该是不可能的。

如果存在一个假设的优化，它决定`primes`应该按需重新计算而不是完全存储在内存中（毕竟，它的类型表明我们每次重新计算都会得到相同的东西），`primes`甚至可能看起来有两个不同的在程序的单次运行期间的值。这是使用`unsafePerformIO`欺骗编译器时可能出现的问题。

在实践中，以上所有可能都不太可能成为问题。

但是理论上正确的做法是不要做`primes`一个全局常量（因为它不是一个常量）。相反，您将需要它的计算参数化（即`primes`作为参数），并在外部`IO`程序中读取文件，然后通过传递`IO`程序从文件中提取的纯值来调用纯计算。你得到两全其美；您不必对编译器撒谎，也不必将整个程序放入`IO`. 如果有帮助，您可以使用诸如 Reader monad 之类的结构来避免必须`primes`在任何地方手动传递。

因此，`unsafePerformIO`如果您想继续使用它，您可以使用它。这在理论上是错误的，但在实践中不太可能引起问题。

或者您可以重构您的程序以反映实际情况。

或者，如果`primes`真的是一个全局常量，而您只是不想在程序源中包含大量数据，则可以使用 TemplateHaskell，如 dflemstr 所示。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-03T20:28:19.807

是的，应该没问题。您可以添加一个`{-# NOINLINE primes #-}`pragma 以确保安全——不确定 GHC 是否会内联 CAF。

我能想到的唯一选择是在编译时做同样的事情（使用 Template Haskell），基本上将素数嵌入到二进制文件中。然而，我更喜欢你的版本——注意这个`primes`列表实际上会被懒惰地读取和创建！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-03T21:15:00.643

您的程序没有准确定义*何时*加载此文件。如果文件不存在，这将引发异常，并且无法确切说明会发生在哪里。（即，可能在您的程序已经做了一些可观察到的现实世界的事情之后。）如果有人决定*更改*文件的内容，则适用类似的评论；你不知道它什么时候被读取，也不知道你会得到哪些内容。（如果文件不应该更改，则不太可能成为问题。）

至于替代方案：一种可能性是创建一个全局可变变量[这本身有点邪恶]，并将文件的内容从主 I/O 线程插入到该变量中。这样，文件就会在明确定义的时刻被读入。[我注意到您也在使用惰性 I/O，因此您只需定义文件何时*打开*。]

真的，“正确”的事情是将数据手动线程化到每个需要它的函数。我能理解你为什么不想那样做；这*是*一种痛苦。您可能会使用某种状态单子来避免手动执行此操作...

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-14T06:11:33.353

这是基于 dflemstr 的回答。鉴于您想要加载整数列表，您可能希望`read`在编译时也执行。我只是把它写出来，因为看到这个例子对我很有用，我希望它对其他人有帮助。

```
import Language.Haskell.TH
import Language.Haskell.TH.Quote

intArray' :: String -> Q Exp
intArray' s = return $ ListE e
    where
        e = map (LitE . IntegerL . read) $ words s

intArray :: QuasiQuoter
intArray = QuasiQuoter { quoteExp = intArray' }

intArrayFile :: QuasiQuoter
intArrayFile = quoteFile intArray 
```

要使用它...

```
{-# LANGUAGE QuasiQuotes #-}
import TT

primes :: [Int]
primes = [intArrayFile|primes.txt|]

main = print primes 
```

好处是

*   在编译时检查您的 primes.txt 文件的语法
*   运行时没有任何转换会减慢您的速度或引发异常。
*   由于您不需要将整个文件原始存储，因此可能会改进代码大小。

# javascript - 当需要单独的函数调用时如何优化/避免javascript中的切换条件

> ID：12716220
> 
> 赞同：0
> 
> 时间：2012-10-03T20:19:30.050
> 
> 标签：javascript, jquery, optimization, prototypejs

几分钟前我得到了这段代码，它让我想知道是否有一种优雅的方法可以将它优化成更少的行，并且可能会避免切换条件。

```
 switch(orientation){
            case 'l':
                $('landscapeButton').addClassName('active');
                $('portraitButton').removeClassName('active');
                break;
            default:
                $('landscapeButton').removeClassName('active');
                $('portraitButton').addClassName('active');
        } 
```

是否可以进一步优化此代码？如果是，你将如何完成它？

**编辑：我应该包含一些关于我正在使用的库/库的信息。事实上我两者都用，但在这个例子中我使用原型，因为我更喜欢用它来处理 CSS 类名。无论如何，在我的具体情况下，解决方案是在 Prototype 还是 jQuery 中提供并不重要。谢谢大家！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T20:22:03.407

*对于prototypejs：*

如果`orientation`将是`1`or `0`，请使用带有 switch 参数的函数来适当地切换。

```
function safeToggleClass(id, clss, switch) {
    return $(id)[(!!switch ? "add" : "remove") + "ClassName"](clss);
} 
```

* * *

```
safeToggleClass('landscapeButton', 'active', +orientation);
safeToggleClass('portraitButton', 'active', !+orientation); 
```

* * *

*对于 jQuery：*

`toggleClass`jQuery 在他们的方法中内置了这个开关。

```
$('#landscapeButton').toggleClass('active', +orientation);
$('#portraitButton').toggleClass('active', !+orientation); 
```

# image - 当图像在不同的 div 中使用时，颜色的深浅不同？

> ID：12716226
> 
> 赞同：0
> 
> 时间：2012-10-03T20:19:59.463
> 
> 标签：image

在我的网站上是一个居中的 cta 图像和一个重复的切片图像，以填充呈现为不同阴影的流体左右列，但是侧面的背景是来自居中图像的 Photoshop 切片。这是我不知道的css的某些方面吗？图像都是背景，一个容器在另一个容器中，如下所示：

```
 <div class="cta_main">
    <div class="cta"></div>
    </div> 
```

有这样的风格：

```
 .cta {
        width:1000px;
        height:350px;
        margin:0 auto;
        background-image:url(../images/images/cta_reg_07.png);
        background-repeat:no-repeat;
        z-index:100;
       }    
    .cta_main {
        width:100%;
        height:350px;
        margin:0 auto;
        background-image:url(../images/images/cta_reg_20.png);
        background-repeat:repeat-x;
        z-index:1;
       } 
```

在Photoshop中，图像自然是相同的颜色（因为一个是另一个的一部分），即使在dreamweaver中它看起来也应该如此，只有在firefox和chrome中（我没有测试任何其他浏览器）cta图像看起来有点色调更轻。谢谢。

# php - PHP Ajax 禁用/启用提交按钮

> ID：12716230
> 
> 赞同：0
> 
> 时间：2012-10-03T20:20:01.530
> 
> 标签：php, javascript, ajax, forms, submit

我正在使用此示例代码： [http](http://www.w3schools.com/php/php_ajax_php.asp) ://www.w3schools.com/php/php_ajax_php.asp 进行实时名称搜索并显示它是否可用。

如果名称正在使用，如何禁用表单提交按钮，但如果名称可用则启用它？

非常感谢 ：）

感谢您的建议。我已将其添加到功能中，现在当我输入任何内容时按钮会禁用..

```
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    $('#submit').attr('disabled', 'disabled');
    }
  } 
```

我怎么做这只是为了一场比赛？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:22:49.243

当回调中返回名称时，将 disabled="disabled" 添加到提交按钮。

$('#submit-button').attr('disabled', 'disabled');

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:33:56.280

```
<input id="id_name"type="text" name="name" onKeyup="testName();"/>
<script>
function testName() {
 $.ajax({
  var data = $('#id_name').val();
  url:'test.php',
  success: function(data){
   if(/*name in use*/) {$('#submit-button').attr('disabled', 'disabled');}
   else {$('#submit-button').removeAttr("disabled");}
  }
  });
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T20:36:12.160

您必须检查名称是否匹配，然后像这样禁用或启用：

```
 if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
        if (xmlhttp.responseText == "available") {
            document.getElementById("submit-button").disabled = false;
        } else {
            document.getElementById("submit-button").disabled = true;
        }
    } 
```

# java - Java 不会停止循环我的 if 语句

> ID：12716231
> 
> 赞同：-5
> 
> 时间：2012-10-03T20:20:03.763
> 
> 标签：java, loops, if-statement, while-loop

这可能是一个显而易见的答案，但明天就要到期了，我完全被难住了。除了最后的 if 语句外，一切正常。似乎 continueGame 循环正在无限循环 if 语句。如果有人可以帮助我解决这个问题，请。

```
import java.util.Random;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class HighLOw {
    public static void main(String[] args) throws IOException {

        String input = null;
        int number = 0;
        int tries = 0;
        boolean highorlow = false;
        boolean continueGame = false;
        boolean validInput = false;
        Random random = new Random();
        int randomNumber = (random.nextInt(101));

        System.out.println("Welcome to the High/Low game.");
        System.out.println("Guess a number between 0 and 100.");
        System.out.println(
                "In order to print a random number, type your number in the console and press enter.");
        System.out.println("Keep going until you get the right number.");
        System.out.println("Have fun.");
        System.out.println(randomNumber);

        while (continueGame == false) { 

            while (validInput == false) {
                try {
                    BufferedReader bufferedReader = new BufferedReader(
                            new InputStreamReader(System.in)); // BufferedReader variable where the user will input their answer

                    input = bufferedReader.readLine();
                    number = Integer.parseInt(input);
                    validInput = true;

                } catch (NumberFormatException ex) { 
                    System.out.println("Invalid input, please enter a number.");
                    validInput = false;
                }

                if (number < 0 || number > 100) {
                    System.out.println(
                            "Error, you must enter a number that is between 0 and 100");
                    validInput = false;
                }
            }

            if (number < randomNumber) {
                System.out.println(
                        number + " is too low. Please try a higher number");
                tries++;
                highorlow = false;
            } else if (number > randomNumber) {
                System.out.println(
                        number + " is too high. Please try a lower number");
                tries++;
                highorlow = false;
            } else if (number == randomNumber) {
                System.out.println(
                        "Congratulations, you guessed the right number. Now go outside.");
                tries++;
                System.out.println("It took you " + tries + (" tries."));
                System.out.println("Game Ended");
                continueGame = true;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T20:23:26.977

几点提示：当您第一次输入有效数字时，`validInput`将变为`true`。然后，代码继续比较`number`，`randomNumber`然后再次跳到`continueGame`循环的开头。现在的价值是`validInput`多少，这对`validInput`循环有什么影响？是否会`number`获得新的价值？

你也不需要做`while (validInput == false)`..只是`while (!validInput)`等价..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:46:56.007

请记住，`if/else`语句是从上到下评估的。一旦`if`找到匹配项，它的主体就会被执行并退出。

牢记这一点，这意味着对`if/else`结构的给定评估只有一个`case`执行主体的位置。

看看你的`if`条款，把它们想象成一条数字线（或者更好地画一条数字线，上面有一些例子`number`和`randomNumber`可能是什么），看看答案是否会突然出现在你身上。

# python - 对象参数的多处理映射

> ID：12716233
> 
> 赞同：0
> 
> 时间：2012-10-03T20:20:11.343
> 
> 标签：python, multiprocessing

我有一个包含对象列表的对象。我想做类似的事情：

```
def compute_weight(particle, data):
    particle.weight = run_computation(data)

class SomeClass:
    def __init__(self):
        self.particles = [obj1, obj2, etc]

    def run(self, data):
        [compute_weight(particle, data) for p in self.particles] 
```

这些可以独立运行，但我需要 self.particles 来包含每个更新的粒子。目前，我有一个技巧可以将两个参数推入 pool.map 函数

```
 # equivalent function as above
            pool.map(compute_weight_star, itertools.izip(self.particles,
                                                         itertools.repeat(data))) 
```

但是每个particle.weight 似乎都没有更新。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:28:19.220

问题是粒子对象在工作进程中得到更新，但它们被传回主进程。考虑以下简化示例：

```
from multiprocessing import Pool

particles = [[0], [0], [0]]

def compute_weight(particle):
    particle[0] = 1

if __name__ == '__main__':
    Pool().map(compute_weight, particles)
    print(particles) 
```

您会发现这使粒子权重（列表的第一个元素）为 0，而它们应该为 1。

解决方案是在工作进程中计算粒子权重，但在主进程中进行存储部分：

```
def compute_weight(particle):
    return 1

if __name__ == '__main__':
    w = Pool().map(compute_weight, particles)
    for i, p in enumerate(particles):
        p[0] = w[i]     # set weight
    print(particles) 
```

# node.js - 在猫鼬中使用动态字段

> ID：12716239
> 
> 赞同：1
> 
> 时间：2012-10-03T20:20:31.007
> 
> 标签：node.js, mongodb, express, mongoose, ejs

我有一个项目架构和集合以及一个列表架构和集合。

我目前与创建列表分开创建项目......但每个项目都引用一个列表 objectId。

```
var ListSchema = new Schema({
    name    : { type: String, required: true, trim: true }
  , user  : { type: Schema.ObjectId, ref: 'User', index: true }
  , description : { type: String, trim: true }
});

var ItemSchema = new Schema({ 
    name    : { type: String, required: true, trim: true }
  , description: { type: String, trim: true }
  , list  : { type: Schema.ObjectId, ref: 'List', index: true }
}); 
```

我想知道是否可以获得一个列表并将该列表的项目加载到该实例的顶部：

所以我可以这样做：

`list.items`获取视图中的所有项目。

```
//routes/list.js
List.find({ user: req.params.userid }, function(err, lists){
   //i want to populate list.items here
   res.render('/lists', { lists: lists });
});

//views/list.ejs
<% lists.forEach(function(list){ %>
    List has <%= list.items.length %> items in it
<% }) %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T21:12:08.070

在我看来，您希望对`list`字段等于列表 id 的所有项目运行查询。那是对的吗？

在这种情况下，类似

```
lists.forEach(function(list){
   list.items = []
   Item.find( { list:list._id }, function(err, items) {
       items.forEach(function(item) {
           list.items.add(item);
       });
   });
}); 
```

可能是你想要的。

**编辑**

啊，我明白了。如何创建一个包含您找到的列表的所有 _id 的列表，然后对 Item 集合执行 $in 查询以获取其`list`属性是您找到的列表之一的所有项目？这只是对 MongoDB 的一次调用以获取所有项目，您可以将`res.render`调用放在其回调中。

注意：回调中必须有一些额外的逻辑来解析返回的项目并按列表对它们进行排序。

这是 $in 的[文档](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24in)。

# javascript - 将变量定义为 var $a=$() 和 var a 之间的区别？

> ID：12716249
> 
> 赞同：8
> 
> 时间：2012-10-03T20:21:04.423
> 
> 标签：javascript, jquery, coding-style

有时在 JQuery 中我们定义变量`var $a=$()`就像声明一个函数一样。所以我想知道如果我们将变量定义为`var a`only，它会不会有任何改变？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T20:22:44.867

如果你的意思是：

```
var a = $(/* Object or Selector gets passed here */) 
```

那么唯一的区别就是名字。开发人员使用`$a`来表示该值已经`jQuery`-ied。离开它不会改变任何功能，但会对未来的开发人员不利。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T20:22:36.323

不，没有什么不同。`$a`与该上下文中的相同`a`。它只是一个变量名。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T20:24:59.563

一般来说，我更喜欢命名带有 $ 符号的 jQuery 对象。这是在代码中识别 jQuery 对象的惯例。

但这只是另一个变量名;;

```
var a = 2;
var $a = $('#something'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-03T20:26:40.153

基本上这是允许违反[Crockford 的](http://javascript.crockford.com/code.html)javascript 编码约定。它用于区分 jQuery 对象和 javascript DOM 元素。

例如

```
var a = document.getElementById('a'); // DOM element
var $a = $(a); // jQuery object for the DOM element with ID 'a' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T20:26:57.483

$ 是 JS 标识符中允许的字符，它没有区别。$(obj) 用 jQuery 对象包装对象 obj，并用许多附加行为装饰 obj。

这些是合法的 Javascript 变量名：

```
$a=1;
a$$$=1;
$a=1; 
```

如果您执行以下操作，函数 $ 是 jQuery 的别名：

你的 HTML：

```
<img src='logo.png' id='site_logo'/> 
```

你的 JS：

```
var logo = $('#site_logo');
logo.fadeOut(); 
```

方法fadeOut 不属于img 元素，而是属于jQuery 包装器。

# windows - 在 Windows 批处理文件中设置和测试变量

> ID：12716250
> 
> 赞同：0
> 
> 时间：2012-10-03T20:21:04.110
> 
> 标签：windows, variables, conditional, batch-file

在 Windows 7 上创建批处理实用程序脚本以调用可执行文件。它基本上有效，除了我的第二个 IF 语句。尝试了许多不同的东西。

我的意图是为每个命令行参数调用“DoSomething”。那部分有效！仅当命令行上没有给出参数时，第二个 IF 语句才会打印帮助消息。嗯，这就是意图。那不是它正在做的事情。

```
@ECHO OFF

:Start
SET a_file_was_processed="false"
IF "%1" NEQ "" (
  SET a_file_was_processed="true"
  ECHO Extracting table %1 from database.
  DoSomething word%1 > output_%1.txt
  ECHO Finished extract table to file output_%1.txt
SHIFT
GOTO Start
)

if a_file_was_processed NEQ "true" (
  ECHO Invoke this script as: Extract_From_sdf  table_name1   table_name2
) 
```

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:27:49.400

尝试了这些更改，似乎可以按预期工作

```
@ECHO OFF

SET a_file_was_processed="false"
:Start
IF "%1" NEQ "" (
  SET a_file_was_processed="true"
  ECHO Extracting table %1 from database.
  rem --- DoSomething word%1 > output_%1.txt
  ECHO Finished extract table to file output_%1.txt
SHIFT
GOTO Start
)

if %a_file_was_processed% NEQ "true" (
  ECHO Invoke this script as: Extract_From_sdf  table_name1   table_name2
) 
```

第一个明显的错误是标签：在设置为 false 之前开始。然后要引用变量的值，您需要将变量括在 %

# php - 使用 PHP / MySQL 生成主从 HTML 表（堆叠和嵌入）

> ID：12716253
> 
> 赞同：1
> 
> 时间：2012-10-03T20:21:12.427
> 
> 标签：php, jquery, mysql, sql, html-table

我正在尝试完成这样的事情：http: [//mediaformations.com/accordion-tables-with-jquery/](http://mediaformations.com/accordion-tables-with-jquery/)但我的 HTML 表将被动态填充。

我有两张桌子：

```
+------------------------+
|    TB_ACTIVE_USERS     |
+------------------------+
|  ID  |  NAME  | EMAIL  |
+------------------------+

+---------------------------+
|        TB_POSTS           |
+---------------------------+
|USER_ID|PDATE|SUBJECT|BODY |
+---------------------------+ 
```

这就是我想以堆叠和嵌入式 HTML 表格的形式获得的内容：

```
+------------------------+
|  LIST OF ACTIVE USERS  |
+------------------------+
|      USER 1 NAME       |
+------------------------+
|+----------------------+|
||DATE | SUBJECT | BODY ||
|+----------------------+|
||10/01| Lorem1  |IpsumA||
|+----------------------+|
||10/01| Lorem1B |IpsumB||
|+----------------------+|
||10/02| Lorem1C |IpsumC||
|+----------------------+|
+------------------------+
|      USER 2 NAME       |
+------------------------+
|+----------------------+|
||DATE | SUBJECT | BODY ||
|+----------------------+|
||10/01| Lorem2  |IpsumA||
|+----------------------+|
+------------------------+
|      USER 3 NAME       |
+------------------------+
|+----------------------+|
||DATE | SUBJECT | BODY ||
|+----------------------+|
||10/02| Lorem3  |IpsumA||
|+----------------------+|
||10/02| Lorem3B |IpsumB||
|+----------------------+|
+------------------------+ 
```

使用此查询：

```
SELECT usr.name, pdate, subject, body 
FROM tb_posts
JOIN tb_active_users AS usr
ON user_id = usr.id
WHERE pdate >=  CURDATE()
ORDER BY usr.name, pdate 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:28:44.860

加入 ID = USER_ID 上的表，按 ID 分组并按 ID 排序，DATE

也许“从 ACTIVE_USERS，POSTS 中选择 *，其中 ID = USER_ID group by ID order by DATE ASC”

# python - 在 python 中将“参数列表”作为命名元组传递

> ID：12716258
> 
> 赞同：1
> 
> 时间：2012-10-03T20:21:22.613
> 
> 标签：python, import, namedtuple

我创建了一个名为 Engine 的命名元组，它包含我想在程序中传递的大部分信息。在这个元组内部，有几个参数和两个实例化的类，它们被下游的方法使用。

```
Engine = namedtuple('Engine', 'website, browser, s, e')
engine = Engine(website, browser, s(), e()) 
```

我有一个函数，`download(engine)`我传入`engine`。`download`传递中的子函数`engine`——其中一些使用`website`，一些使用`browser`，一些使用`s`，还有一些使用`e`。

现在，（作为程序员的我）的认知开销大大降低，我不再需要确保参数列表在可能发生的特定更改的下游和上游都是最新的——我只是通过`engine`下游，如果我在方法中使用参数，我使用`engine.foo`.

另一方面，感觉这是一种“懒惰”的编程——只是将所有内容包装到一个引擎“类”中，并将变量作为类上的方法似乎让一切都变得太容易了。此外，我发誓在这个实现中我没有看到某种开销。这是否有任何先例，因为它感觉太有用而无法忽视。

我应该在整个程序中使用 namedtuples 作为参数的替代品以减少传递的参数数量吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T20:35:58.117

[这听起来像是参数对象模式](http://c2.com/cgi/wiki?ParameterObject)的一些变体。另一方面，听起来你也可以将它作为一个类来实现，即

```
class Engine(object):
   website = ...
   browser = ...
   s = ...
   e = ...

   def download(self):
       ...
   def _sub_function(self):
       ... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T20:42:12.670

我想说这实际上是一个非常好的模式。`namedtuples`非常高效，并且大大提高了可读性。与常规元组相比，它们的空间开销实际上为零。

所以`namedtuples`可以被看作是一种轻量级的类，如果它们的职责增加，可以成长为它们。

[Raymond Hettinger 在这个来自 PyCon US 2011 的演讲](http://pyvideo.org/video/367/pycon-2011--fun-with-python--39-s-newer-tools) 中非常详细地解释了它们的优势和用例，`[11:35 - 26:00]`比我曾经做过的更好。

# objective-c - 在 UIImageView 中从 URL 下载的图像模糊

> ID：12716263
> 
> 赞同：1
> 
> 时间：2012-10-03T20:21:53.800
> 
> 标签：objective-c, uiimageview, uiimage, nsurl

我使用以下 URL 从 URL 下载了图像：

```
UIImage *someImage = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:myImageURL]]];
UIImageView *someImageView = [[UIImageView alloc]initWithImage:someImage]; 
```

该图像的大小适用于 iPad 3，因此为 1536 x 800 像素。当我下载并显示图像时，它显示正确，但在 iPad 2 和 iPad 3 上它非常模糊，看起来我正在放大 768 x 400 像素的图像。

我怎样才能做出更好的分辨率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:27:45.603

您应该检查您是否在视网膜显示器上运行（使用 scale 属性）并为这两种情况下载不同的图像。

使用宝贵的下载时间和容量来下载需要稍后进行采样的巨大图像是没有意义的。它将在各个方面提供更好的用户体验。

# c# - 筛选 InfoPath selectNodes 中的项目

> ID：12716264
> 
> 赞同：0
> 
> 时间：2012-10-03T20:21:55.357
> 
> 标签：c#, javascript, infopath-2007

我有一个 InfoPath 2007 表单，它使用 selectNodes 从我的 Web 服务中选择一组项目。所以我有

```
<customer>
  <City>
  <State>
</customer> 
```

在我的代码中，我有类似的东西

```
customerData.selectNodes("tns:customer"); 
```

当然，这给了我所有的客户。但是，如果我想过滤掉居住在特定州的客户怎么办？如果我想排除该州的所有“FL”值，我该如何修改我的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:45:25.273

就像是：

```
 customerData.selectNodes("tns:customer[not(State = 'FL')]"); 
```

请注意，如果“FL”来自其他字符串，您可能需要执行转义（[XPATH 查询中的特殊字符](https://stackoverflow.com/questions/1341847/special-character-in-xpath-query)）。

我建议阅读 XPath，即这里有[一些示例](http://msdn.microsoft.com/en-us/library/ms256086.aspx)可以帮助您入门。

# c++ - 基础 C++ 练习

> ID：12716274
> 
> 赞同：0
> 
> 时间：2012-10-03T20:22:08.383
> 
> 标签：c++

这是一个练习题，我很难回答。有人知道公式吗？我在想这些数字的总和...... 2^0 + 2^1 + 2^2 ... 2 ^ n ？(sign = -sign; ) 是做什么用的？感谢任何可以提供帮助的人。

描述下列函数计算的数学公式。

```
// Pre: n>=0
// Post: ???
double WhatAmI(int n) {
    int result=0;
    int ctr=0;
    int sign = 1;
    while(ctr<=n) {
        result = result + power(2,ctr);
        sign = -sign;
        ctr++;
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:39:49.767

好吧，该函数计算这个公式（我可能会以一种非常低效的方式添加）：

```
2^(n+1) - 1 
```

当然，假设您的意思是`pow()`代替`power()`（或至少他们做同样的事情）。效果是它创建了一个带有`n+1`1 的二进制掩码。

```
WhatAmI(3) = 15 =   0b1111
WhatAmI(4) = 31 =   0b11111
WhatAmI(7) = 255 =  0b11111111 
```

正如其他人所提到的，该`sign`变量似乎没有被使用。

这是一个更有效的函数，它做同样的事情：

```
double WhatAmI(int n) {
    return (1 << (n+1)) - 1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T20:37:46.820

这是将 2 的幂加起来一直到`2^n`。

如果你仔细想想，它只是将数字中的每一位都设置为 1。

```
 n  | result (binary)
----+------------------------------------
 0  | 00000000 00000000 00000000 00000001
 1  | 00000000 00000000 00000000 00000011
 2  | 00000000 00000000 00000000 00000111
 3  | 00000000 00000000 00000000 00001111
... | ...
29  | 00111111 11111111 11111111 11111111
30  | 01111111 11111111 11111111 11111111
31  | 11111111 11111111 11111111 11111111 
```

您当然可以在没有循环的情况下计算它。

该函数在`int`内部使用 a 但返回 a `double`，因此不清楚这是否被限制为整数。无论哪种方式，公式都是一行。将把练习的那部分留给你。

注意，如果你只需要处理`ints`操作符，( `<<`) 是一个很好的替代品`pow`。

# c - 在 C 中创建 shell 时遇到问题（Seg-Fault 和 ferror）

> ID：12716276
> 
> 赞同：1
> 
> 时间：2012-10-03T20:22:13.940
> 
> 标签：c, segmentation-fault, fgets, ferror

我一直在关注如何制作自己的外壳的教程，但我已经被困了几天了。

两件事情：

1.  当这段代码被编译和运行时，它会随机出现分段错误，我不知道为什么。
2.  if 语句 `if (ferror != 0)` 似乎总是正确的。这很奇怪，因为我不明白为什么**fgets()**在**main()**函数中失败。

非常感谢有关这些主题（或有关创建此 shell 的其他主题）的任何信息。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/types.h>

#define MAXSIZE 512

int parseCmd(char *cmd, char *args[])
{
    printf("LOGGER: parseCmd(cmd=%s, args=%p)\n", cmd, args);

    char cmdDelims[] = {' ','>'};

    char *cmdReader;
    cmdReader = strtok(cmd, cmdDelims);

    int i = 0;
    while (cmdReader != NULL)
    {       
        args[i] = strdup(cmdReader);

        printf("LOGGER: args[%d]=%s\n", i, args[i]);

        cmdReader = strtok(NULL, cmdDelims);
        i++;
    }
    return 0;
}

void printToLine(char *args[])
{
    int length;
    length = sizeof(args) / sizeof(char);

    int i = 0;
    while (i < length)
    {
        printf("%s\n", args[i]);
        i++;
    }
}

int main(int argc, char *argv[]) 
{   
    char *in;
    in = malloc(MAXSIZE);

    char *args[15];
    char *cmd = NULL;

    int errorBit = 0;
    int terminationBit = 1;
    char error_message[30] = "An error has occurred\n";

    char inDelims[] = "\n";

    while (terminationBit)
    {
        printf("mysh>");

        // get input from command line
        fgets(in, MAXSIZE, stdin);
        if (ferror != 0)
        {
            perror(error_message);
        }

        // get pointer to command line input w/o the newline
        cmd = strtok(in, inDelims);

        // parse the command into separate arguments
        errorBit = parseCmd(cmd, args);
        if (errorBit)
        {
            perror(error_message);
            exit(1);
        }

        printToLine(args);

        // check if the user wants to exit the shell
        if (strcmp(*args, "exit") == 0)
        {
            terminationBit = 0;
        }
    }
    return 0;
} 
```

**以下是一些输出：**

```
**[ray@12] (6)$ mysh**
mysh>1 2 3
An error has occurred
: Success
LOGGER: parseCmd(cmd=1 2 3, args=0x7fff4a50b080)
LOGGER: args[0]=1
LOGGER: args[1]=2
LOGGER: args[2]=3
1
2
3
Segmentation fault (core dumped)
**[ray@12] (7)$ mysh**
mysh>1 2 3 4 5 6 7 8 9 10
An error has occurred
: Success
LOGGER: parseCmd(cmd=1 2 3 4 5 6 7 8 9 10, args=0x7fffba053d70)
LOGGER: args[0]=1
LOGGER: args[1]=2
LOGGER: args[2]=3
LOGGER: args[3]=4
LOGGER: args[4]=5
LOGGER: args[5]=6
LOGGER: args[6]=7
LOGGER: args[7]=8
LOGGER: args[8]=9
LOGGER: args[9]=10
1
2
3
4
5
6
7
8
mysh>1 2 3
An error has occurred
: Success
LOGGER: parseCmd(cmd=1 2 3, args=0x7fffba053d70)
LOGGER: args[0]=1
LOGGER: args[1]=2
LOGGER: args[2]=3
1
2
3
4
5
6
7
8 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T20:25:51.767

对于`ferror`错误，您需要测试`ferror(stdin)`，而不是`ferror`. 后者是函数地址，永远不会为零：

```
if (ferror(stdin) != 0)
{
    perror(error_message);
} 
```

至少对于某些段错误，这并不符合您的想法：

```
length = sizeof(args) / sizeof(char); 
```

这将告诉您*用于存储指针的字节*数，取决于 4 或 8，而*不是*参数的数量。

因此，如果您有四个（或八个）参数，它*似乎*会起作用。如果你有更多，它似乎会忽略一些论点。如果你有更少，它会从整个 Void 中获取缺失的参数，从而导致（几乎可以肯定）分段错误。

您需要`length`独立计算并传递它，或将一些终止符存储在 中`args`，例如在您找到的最后一个有效参数之后添加一个 NULL 参数：

```
 cmdReader = strtok(NULL, cmdDelims);
        i++;
    }
    args[i] = NULL;
    return 0;
}

void printToLine(char *args[])
{
    int i = 0;
    while (args[i])
    {
        printf("%s\n", args[i]);
        i++;
    }
} 
```

# html - 将边框应用于圆角的div？

> ID：12716279
> 
> 赞同：1
> 
> 时间：2012-10-03T20:22:27.650
> 
> 标签：html, css

如何为带圆角的 div 添加边框？当我尝试时，角落看起来很奇怪 - 边框不会一直环绕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T20:44:21.850

旧版本 IE 的兼容性可能是个问题，但下面的示例应该适用于现代浏览器：

**CSS**

```
div{
    width: 50px;
    height: 20px;
    padding 5px;
    border: 1px solid red;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    border-radius: 10px; /* future proofing */
    -khtml-border-radius: 10px; /* for old Konqueror browsers */
    background-color: green;
} 
```

这是一个**[示例](http://jsfiddle.net/gKz8N/1/)**

[http://css-tricks.com/snippets/css/rounded-corners/](http://css-tricks.com/snippets/css/rounded-corners/)

# javascript - 简单的背景颜色

> ID：12716280
> 
> 赞同：0
> 
> 时间：2012-10-03T20:22:29.997
> 
> 标签：javascript, jquery, html, css, loops

我试图让背景颜色在部分透明的 .png div 后面发生变化。修改 div 的类是“.alert”。我可以手动编辑 .alert 类的背景颜色，而且效果很好。现在我只是想以 1 秒的周期来做这个。

我有这个：

```
var bgstate = 0;
var states = [];
states[0] = '#F00';
states[1] = '#CCC';
states[2] = '#F00';

function flash() {
bgstate++;
if( bgstate > 2 ) bgstate = 0;

$('.alert').ready(function() {
        $('.alert').css({ 'background-color' : " + states[bgstate] + " 
    });

});

$(document).ready(function() {
setTimeout(flash, 1000);
}); 
```

我似乎无法让“状态 [x]”为班级警报工作。我对此很不擅长，而且我不知道正确的语法。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T20:24:43.650

`setTimeout`应该`setInterval`

[设置间隔文档](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:27:04.373

如果不测试其余代码，您可能会遇到一个简单的语法错误：

```
$('.alert').css({ 'background-color' : " + states[bgstate] + " }); 
```

您试图在此处传递一个 HEX 颜色值，它是一个字符串类型，但是上面插入的值是文字。

试试这个（注意 states[x] 变量周围的附加单引号）：

```
$('.alert').css({ 'background-color' : '" + states[bgstate] + "' }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T20:28:48.640

没有正确关闭您的报价.. 试试这个

```
$('.alert').css({ 'background-color' : '"' + states[bgstate] + '"'  }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T20:38:37.940

我会给你演示：

```
var bg = ["#000","#f00","#ff0"];
var i = 0;

setInterval(function() {
    if (i < bg.length ) {
    $("body").css({'background-color' :  bg[i] });
    i++;
    }
    else {
     $("body").css({'background-color' :  bg[0] });
    i = 1;
    }
},1000); 
```

[http://jsfiddle.net/Q9jhX/](http://jsfiddle.net/Q9jhX/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T21:44:47.173

这可能是一个更可重用的版本：

```
var Flasher = function ( elem, pattern ) {
  this.bg = pattern;
  this.i = 0;
  this.$el = elem;
}

Flasher.prototype.flash = function ( interval ) {
    var self = this;
    this.loop = setInterval( function() {
       if (self.i < self.bg.length) {
            self.$el.css({'background-color' :  self.bg[self.i] });
        }
        else {
         self.i = 0;
         self.$el.css({'background-color' :  self.bg[self.i] });
        }
        self.i++;
    },interval);
};

Flasher.prototype.stop = function () {
  clearInterval(this.loop);
};
var flasher = new Flasher( $('body'), ["#000","#f00","#ccc"] );
flasher.flash(1000);
flasher.stop(); 
```

​</p>

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-23T11:34:50.373

```
var bgstate = 0;
var states = ['#F00','#CCC','#F00'];

function flash() {
 $('.alert').css('background-color', states[bgstate] );
 bgstate = (bgstate+1) % states.length;
});

$(document).ready(function() {
 setInterval(flash, 1000);
}); 
```

# jquery - Telerik RadGrid $find 在 jquery 对话框关闭后返回 null

> ID：12716282
> 
> 赞同：0
> 
> 时间：2012-10-03T20:22:35.863
> 
> 标签：jquery, telerik, webforms, telerik-grid

我有一个复选框，单击该复选框时，会选中或取消选中 Telerik RadGrid 中存在的所有复选框。

```
function CheckAll(sender, args) {
        // Set all the checkboxes according to the master
        $(":checkbox").attr("checked", sender.get_checked());

        // If "check all", do some other stuff
        if(sender.get_checked())
        {
            var masterTable = $find("<%=gridSubmittedRequests.ClientID%>").get_masterTableView();
            var rows = masterTable.get_dataItems(); // row collection
            // do some other stuff                
        }
    }
} 
```

这一切正常，直到我打开（和关闭）一个 jquery 对话框，之后

```
$find("<%=gridSubmittedRequests.ClientID%>") 
```

返回空值。因此，我永远无法达到重要的`// do some other stuff`部分。

jQuery 对话框关闭函数没有做任何特别的事情：

```
$("#divProcessModal").dialog(
        {
            height: 300,
            width: 400,
            modal: true,
            resizable: false,
            buttons: { 
                "Process request(s)": function (e) { 
                    // process requests
                },
                "Close without processing": function (e) { 
                    $(this).dialog("close"); 
                    e.preventDefault(); 
                }
            },
            title: "Process Request(s)",
        }); 
```

我要做的就是点击`Close without processing`按钮。
我尝试过的事情包括在服务器端注册脚本，并将主表设置为全局变量，但没有成功。

**更新**

我弄清楚原因是什么。jquery对话框的内容是另一个页面

```
$("#divProcessModal").load("/ProcessRequests.aspx?requestList="+requestList); 
```

这个页面有它自己的形式，代码隐藏等等，这似乎是导致问题的原因。我想我可以将所有功能`ProcessRequests.aspx`移到当前的 aspx 页面中，但如果有人能解释发生了什么以及为什么我的初始方法不起作用，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T01:58:35.197

我弄清楚原因是什么。jquery对话框的内容是另一个页面

`$("#divProcessModal").load("/ProcessRequests.aspx?requestList="+requestList);` 这个页面有它自己的形式，代码隐藏等等，这似乎是导致问题的原因。将 ProcessRequests.aspx 中的所有功能移动到当前的 aspx 页面可以解决问题。

# java - 数据库映射库

> ID：12716293
> 
> 赞同：0
> 
> 时间：2012-10-03T20:23:13.990
> 
> 标签：java, android, sqlite

我正在使用[Jackson](http://jackson.codehaus.org/)将 JSON 数据（我从 Internet 服务器检索）映射到应用程序对象（例如 Artist、Clip、Playlist）。大多数时候数据是静态的，因此我不需要过度加载它 - 所以我想将它存储在数据库中。我需要一个类似于 Jackson 的映射器，它将解析数据库输出并为我构建对象（例如 Artist、Clip、Playlist）。有没有 ？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:42:14.370

您正在寻找的是 ORM（对象关系映射）库。[这篇文章](https://stackoverflow.com/questions/371538/any-good-orm-tools-for-android-development)中对 ORM 解决方案进行了很好的讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T21:00:26.963

使用以下解决方案解决此问题的一种方法。

您可以使用对象关系映射 (ORM) 技术（例如 Hibernate、TopLink）将数据库表映射到 Java 对象。对于从 Java Object 解析为 JSON Object ，您可以使用 JAXB 注释。JaxB 注释类和元帅示例如下。

**JaxB 注释 Java 示例**

```
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class UserJaxB {

private String name;
private String id;

public UserJaxB() {
}

@XmlElement(name = "id")
public String getId() {
    return id;
}

public void setId(String id) {
    this.id = id;
}

@XmlElement(name = "name")
public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}
} 
```

**编组示例**

```
import java.io.*;
import javax.xml.bind.*;
import javax.xml.stream.XMLStreamWriter;
import org.codehaus.jettison.mapped.*;

public class MarshalDemo {

public static void main(String[] args) throws JAXBException {
    JAXBContext jc = JAXBContext.newInstance(UserJaxB.class);
    Unmarshaller unmarshaller = jc.createUnmarshaller();
    UserJaxB userJaxB = new UserJaxB();
    userJaxB.setId("123");
    userJaxB.setName("ravi");

    Configuration config = new Configuration();
    MappedNamespaceConvention con = new MappedNamespaceConvention(config);
    Writer writer = new OutputStreamWriter(System.out);
    XMLStreamWriter xmlStreamWriter = new MappedXMLStreamWriter(con, writer);

    Marshaller marshaller = jc.createMarshaller();
    marshaller.marshal(userJaxB, xmlStreamWriter);
}

} 
```

# javascript - 为什么 JSON.stringify 只包含这个对象的一部分？

> ID：12716295
> 
> 赞同：1
> 
> 时间：2012-10-03T20:23:18.747
> 
> 标签：javascript, json, object, parse-platform, stringify

当我在 Parse.com 查询对象上使用 JSON.stringify 时，它只包含“属性”并忽略其余部分。如何对整个对象进行字符串化？

## 我对 Parse 的查询，使用和不使用 stringify 记录结果：

```
    // 从 Parse 加载比赛    
    var Events = Parse.Object.extend("Events");
    var query = new Parse.Query(Events);

    query.equalTo("theYear", currentYear);
    query.ascending("sortOrder");       

    查询.find({
      成功：函数（结果）{
        forgeLog("Got "+results.length+" 解析事件");

        forgeLog("数组中的第一个对象直接记录：");
        伪造日志（结果 [0]）；

        forgeLog("字符串化数组中的第一个对象：");
        forgeLog(JSON.stringify(results[0]));
      },
      错误：函数（错误）{
          forgeLog("从 Parse 获取事件时出错");  
      }
    });

```

## 直接记录的对象：

```
    { 属性：
     { 名称：“麦考尔斯汽车厂”，
       种族ID：'0'，
       排序顺序：2，
       年份: 2012 },
    _操作：{}，
    _肮脏的： {}，
    _hashedJSON: {},
    _escapedAttributes：{}，
    cid: 'c0',
    id: 'To6lLjzwQw',
    createdAt: '2012-08-09T13:51:29.259Z',
    更新时间：'2012-08-10T13:23:07.280Z',
    _设置：假，
    _previous属性：
     { 名称：“麦考尔斯汽车厂”，
       种族ID：'0'，
       排序顺序：2，
       年份：2012 }
    }

```

## 使用 stringify 记录的对象：

```
    {"Name":"McCalls Motorworks","raceId":"0","sortOrder":2,"theYear":2012}

```

更新：我实际上只是测试了自己，当我通过剪切和粘贴第一个对象并自己定义变量来手动定义对象时它可以工作。但是，当我在从 Parse 接收结果后直接对结果进行字符串化（如示例代码中所示）时，它只返回属性部分......但第一个对象是我在尝试从 Parse 记录结果之前直接从控制台复制的内容字符串化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:44:42.877

是的，我还检查了许多浏览器，但一切正常，手动操作没有任何问题

我认为你在`JSON.stringify`某些时候直接设置解析器值它发生在**js中**

尝试一件事在某个对象中初始化它并将该对象传递给它 `JSON.stringify`可能会工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:38:54.903

Parse 的 Héctor 能够向我解释：

> 这是因为 createdAt、objectId、updatedAt 不是属性。它们是对象本身的属性，因此 JSON 序列化程序不会拾取它们。

# asp.net-mvc - MVC4 TextBox用于覆盖模型属性

> ID：12716297
> 
> 赞同：2
> 
> 时间：2012-10-03T20:23:23.207
> 
> 标签：asp.net-mvc, asp.net-mvc-3

假设我有一个模型：

```
public MyClass
{
    public int Id {get;set;}
    public string Name {get;set;}
    public int ContentId {get;set;}
} 
```

假设我访问了控制器的操作：

```
[HttpGet]
public ActionResult Create(int id)
{
    MyClass mc = new MyClass();
    mc.Id = 49;
    mc.ContentId = id;
    mc.Name = "Sample";
    return View("Create", mc);
} 
```

“创建”视图是使用 MyClass 进行强类型化的，它有帮助程序 @Html.TextBoxFor(x => x.Id)。

如果我通过调用 MyController/Create?id=15 来调用操作，文本框将显示值 15 而不是 49。MVC 将忽略我在操作中设置的 ID 属性，并使用查询中的那个。

考虑到这种行为没有记录在案，我觉得这很奇怪。

对此有什么好的评论吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T20:53:08.273

`ModelState.Clear()`在动作开始时使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T20:31:34.533

代替

```
@Html.TextBoxFor(x => x.Id) 
```

利用：

```
@Html.TextBoxFor(x => Model.Id) 
```

看看这是否为您提供了您正在寻找的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T21:01:11.660

这是一个常见问题，并在各个地方都有记录。一个很好的例子在这里：

[http://blogs.msdn.com/b/simonince/archive/2010/05/05/asp-net-mvc-s-html-helpers-render-the-wrong-value.aspx](http://blogs.msdn.com/b/simonince/archive/2010/05/05/asp-net-mvc-s-html-helpers-render-the-wrong-value.aspx)

# asp.net - 尝试在 vb 中解密电子邮件地址时出错

> ID：12716298
> 
> 赞同：1
> 
> 时间：2012-10-03T20:23:25.083
> 
> 标签：asp.net, vb.net, encryption, vb.net-2010

我正在尝试在 VB.NET 中解密电子邮件地址，但出现错误：“Base-64 字符数组的长度无效。”

出现错误的电子邮件地址：abcadmin@googlemail.com

可以正常工作的电子邮件地址：admin@yahoo.com

解密代码：

```
 Private Function Decrypt(ByVal strText As String, ByVal sDecrKey _
               As String) As String
        Dim byKey() As Byte = {}
        Dim IV() As Byte = {&H12, &H34, &H56, &H78, &H90, &HAB, &HCD, &HEF}
        Dim inputByteArray(strText.Length) As Byte

        Try

            byKey = System.Text.Encoding.UTF8.GetBytes(Left("ABCD9876_", 8))
            Dim des As New DESCryptoServiceProvider()
            inputByteArray = Convert.FromBase64String(strText)
            Dim ms As New MemoryStream()
            Dim cs As New CryptoStream(ms, des.CreateDecryptor(byKey, IV), CryptoStreamMode.Write)

            cs.Write(inputByteArray, 0, inputByteArray.Length)
            cs.FlushFinalBlock()
            Dim encoding As System.Text.Encoding = System.Text.Encoding.UTF8

            Return encoding.GetString(ms.ToArray())

        Catch ex As Exception
            Return ex.Message
        End Try

    End Function 
```

提前致谢， Laziale

# php - 获取有条件的列的总和

> ID：12716300
> 
> 赞同：2
> 
> 时间：2012-10-03T20:23:28.710
> 
> 标签：php, mysql

我有一个找不到答案的问题。

基本上，我有两列：

```
variable 10  || 14  || 18 || 20 || 29  || 38 || 39  || 41 || 46  ...
values   857 || 736 || 84 || 1  || 362 || 74 || 183 || 77 || 944 ... 
```

我想输出每个变量中所有值的总和，然后是 10s，`(10, 14, 18)`然后是 20s `(20, 29)`，然后是 30s `(38, 39)`，依此类推。

我将如何构建查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T20:26:42.117

尝试这个：

```
select variable div 10, sum(values) 
  from myTable
 group by variable div 10 
```

结果（假设您的列已命名`var`，`val`现在：

```
mysql> select var div 10, sum(val) from my  group by var div 10;
+------------+----------+
| var div 10 | sum(val) |
+------------+----------+
|          1 |     1677 | 
|          2 |      363 | 
|          3 |      257 | 
|          4 |     1021 | 
+------------+----------+
4 rows in set (0.00 sec) 
```

# java - 是否可以相对于服务器路径放置属性文件

> ID：12716307
> 
> 赞同：0
> 
> 时间：2012-10-03T20:24:22.913
> 
> 标签：java, spring, tomcat6, cas

我试图将 'cas.properties' 文件放在 'webapps' 文件夹之外 - 但得到下面斜体字中列出的错误。是否可以将相对于服务器的路径放置在“webapps”文件夹中？

**配置属性文件路径：**

**“catalina.out”中的错误：** *org.springframework.beans.factory.BeanInitializationException：无法加载属性；嵌套异常是 java.io.FileNotFoundException: 无法打开 ServletContext 资源 [/home/tomcat/conf/cas.properties]*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:29:24.360

好吧 - 我的错。

像这样声明路径：

文件：/home/tomcat/conf/cas.properties

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T16:46:25.867

您希望位于 Web 应用程序外部文件夹中的文件位于应用程序的类路径中。您的问题的答案取决于使用的 servlet 容器。在您的情况下，您使用 tomcat：打开 [CATALINA_HOME]/conf/catalina.properties 并在 shared.loader（或 common.loader）下添加文件夹路径。

请注意，所有部署的 Web 应用程序都可以访问此属性文件，这可能会导致一些名称冲突。

# javascript - jQuery 高度损坏

> ID：12716309
> 
> 赞同：1
> 
> 时间：2012-10-03T20:24:32.613
> 
> 标签：javascript, jquery, resize, window

> 看看这个：
> 
> [http://jsfiddle.net/JamesKyle/3FaVN/](http://jsfiddle.net/JamesKyle/3FaVN/)
> 
> 1.  尝试垂直调整结果大小：之后两列正确滚动。
>     
>     
> 2.  接下来水平调整大小，然后再次尝试垂直调整大小：**注意列不再等于视口高度并且无法正确滚动。**

我不明白这里发生了什么。

我的 javascript 似乎很简单：

```
function setHeight() {
     $('.panel').height( $(window).height() );
}

$(window).load(setHeight).resize(setHeight); 
```

有谁知道这是什么原因造成的？任何想法如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:36:36.603

在你的div上使用`height: 100%;`而不是`height: inherit;``.scroll`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:36:39.697

由于 'div.panel' 的高度正确，jQuery 调整大小工作正常。它是高度不合适的“div.panel”的内部 div。设置children身高会解决修改[jsfiddle的问题](http://jsfiddle.net/3FaVN/22/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T20:37:12.113

jQuery 工作正常；`.panel`的高度设置正确。然而，它的孩子根本没有被设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T20:38:43.060

你的事件是由调整大小触发的，只需输入console.log。我不知道为什么，但这项工作[http://jsfiddle.net/3FaVN/24/](http://jsfiddle.net/3FaVN/24/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T20:48:45.017

webkit 中存在一个带有 display: table(-cell) 和调整大小的错误，请参阅[https://bugs.webkit.org/show_bug.cgi?id=53166](https://bugs.webkit.org/show_bug.cgi?id=53166)。

我会远离 display: table 现在。

编辑：阅读更多内容后，我不确定这是否适用于您的情况。不过对我来说，经过相当多的测试后，它确实感觉像是某种 webkit 中的错误（例如：它坏了，经过一些元素检查后，事情似乎又恢复了......）

# google-maps - Where 子句在 FusionTablesLayer 查询中不起作用

> ID：12716310
> 
> 赞同：1
> 
> 时间：2012-10-03T20:24:35.790
> 
> 标签：google-maps, google-fusion-tables

我在谷歌地图中使用大约 300 个多边形的 Fusion Tables 作为图层。一切正常，但我的代码中的“where”子句似乎没有任何效果。我试图从我的浏览器中查询 Fusion Tables，它给出了关于 API 密钥身份验证的错误消息。启用密钥身份验证，它可以在浏览器中正常工作，但不能使用显示地图的代码。

我花了很多时间阅读关于 Fusion Tables Layers 的[Fusion Tables 文档](https://developers.google.com/fusiontables/docs/v1/using)和[Google Maps 文档，](https://developers.google.com/maps/documentation/javascript/layers#FusionTables)但我不知道如何将我的 API 密钥作为参数提供给 google.maps.FusionTablesLayer。

```
var layer = new google.maps.FusionTablesLayer({
    query: {
        select: 'geometry',
        from: '1-O2W25MX7ggxdxlvZ2Ac6uTeXJ8kWUUUrUS_i10',
        where: 'name = Antwerp'
    }
});
layer.setMap(map); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:03:30.310

您的 where 子句不正确。它应该是“name = 'Antwerp'”

使用过时的查询格式： [http ://www.geocodezip.com/v3_FusionTablesLayer_linktoA.html?lat=51.270033&lng=4.271934&zoom=10&type=m&tableid=5373211&tablequery=SELECT%20geometry%20FROM%205373211%20WHERE%20name%20%3D% 20%27安特卫普%27](http://www.geocodezip.com/v3_FusionTablesLayer_linktoA.html?lat=51.270033&lng=4.271934&zoom=10&type=m&tableid=5373211&tablequery=SELECT%20geometry%20FROM%205373211%20WHERE%20name%20%3D%20%27Antwerp%27)

# android - SQLite：为每个唯一列值生成新颜色

> ID：12716315
> 
> 赞同：0
> 
> 时间：2012-10-03T20:24:52.220
> 
> 标签：android, sqlite

# 大家好！

我有一个看起来有点像这样的数据库表（为了清楚起见，去掉了）：

```
customer
====================
 name    |    track
====================
 John    |    one
 Sue     |    two
 Greg    |    one
 Loreen  |    three
 Niles   |    two 
```

现在，我想通过我的 select 语句为每个独特的轨道生成一种新颜色，例如：

```
SELECT name, track, ('#' || HEX(RANDOMBLOB(3))) AS color
FROM customer; 
```

不幸的是，我无法修改表格内容或数据库结构，因此，我不得不动态生成颜色。上面的`SELECT`查询产生如下内容：

```
 name    |    track    |    color
====================================
 John    |    one      |    #000000
 Sue     |    two      |    #444444
 Greg    |    one      |    #888888
 Loreen  |    three    |    #CCCCCC
 Niles   |    two      |    #FFFFFF 
```

即每行的新颜色。但这不是我想要的！我希望所有独特的曲目保持相同的颜色，如下所示：

```
 name    |    track    |    color
====================================
 John    |    one      |    #000000
 Sue     |    two      |    #444444
 Greg    |    one      |    #000000
 Loreen  |    three    |    #888888
 Niles   |    two      |    #444444 
```

即所有“一个”轨道都应该有“#000000”颜色，所有“两个”轨道应该有“#444444”颜色等等。

如前所述，我没有更改数据库的奢侈，我只能查询它。另外：它是在 Android 设备上运行的 SQLite 数据库，所以我也负担不起那些毛茸茸的服务器端查询。

*到目前为止我的努力：*

到目前为止，我提出了以下查询：

```
SELECT a.name, a.track, b.color
FROM 'customer' AS a
LEFT JOIN (
    SELECT track, ('#' || HEX(RANDOMBLOB(3))) AS color
    FROM 'customer'
    GROUP BY track) AS b
ON (b.track == a.track); 
```

但这个问题与我在技术上被允许做的事情以及我在架构上愿意做的事情接壤。以明确定义的方式进行此类查询所需的代码库更改几乎比它的结果更昂贵。

***那么，各位建筑师，你们怎么说？***我怎样才能尽可能有效地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T20:32:32.893

为什么不创建一个类来维护每个输入的唯一颜色，并让它通过另一个表或仅在硬盘上保留它的设置？

如果您真的无法修改数据库，那么我认为创建一个将添加颜色的 sql 语句只会使事情复杂化。当有人说两种颜色太相似所以他们希望你改变它们时会发生什么？在另一个班级中更容易管理

# c# - 如何在 C#.net 中获取列表框的选定项？

> ID：12716320
> 
> 赞同：-3
> 
> 时间：2012-10-03T20:24:58.693
> 
> 标签：c#, visual-studio-2008

> **可能重复：**
> [listBox 选定项](https://stackoverflow.com/questions/5856238/listbox-selected-item)

我需要获取由数据库列提供的列表框的特定选定项，并将选定项插入新数据库。？m 在 Microsoft Visual Studio 2008 和 SQL Server Express 中工作

```
 con.Open();
        DataSet ds = new DataSet();
        SqlDataAdapter adapter = new SqlDataAdapter("SELECT ItemName from tariff", con);
        adapter.Fill(ds);
        this.listBox1.DataSource = ds.Tables[0];
        this.listBox1.DisplayMember = "ItemName";
        con.Close();

        private void btnSave_Click(object sender, EventArgs e)
    {
        con.Open();
        cmd.Connection = con;
        cmd.CommandText = "INSERT INTO logs VALUES('" + txtRoom.Text.ToString() + "','"????????????????????????????"')";
        cmd.ExecuteNonQuery();
        con.Close();
        loadData();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:28:10.680

尝试

`listbox1.SelectedItem.Text`

另外：您正在为可能的[SQL Injection](http://en.wikipedia.org/wiki/SQL_injection)做好准备。您应该查看参数化查询。

使用这些会将您的陈述变成如下内容：

```
cmd.CommandText = "INSERT INTO logs VALUES(@room,@listbox)";
cmd.Parameters.AddWithValue("@room", txtRoom.Text);
cmd.Parameters.AddWithValue("@listbox",listbox1.SelectedItem.Text); 
```

# jquery - 可视化 Web 部件中的 JQuery SharePoint Foundation

> ID：12716327
> 
> 赞同：2
> 
> 时间：2012-10-03T20:25:24.373
> 
> 标签：jquery, sharepoint, web-parts

我无法让这个简单的 JQuery 函数在 sharePoint Foundation 中触发。

这些是我从 [http://sharepointdragons.com/2012/04/18/adding-jquery-to-a-visual-web-part-and-then-implement-parentchild-radio-buttons/遵循的一些步骤](http://sharepointdragons.com/2012/04/18/adding-jquery-to-a-visual-web-part-and-then-implement-parentchild-radio-buttons/)

第 1 步：将 jquery-1.4.1.js 文件添加到 SiteAssets

* * *

第 2 步：在 Web Farm 解决方案中创建可视 Web 部件。

* * *

第 3 步：添加以下代码

* * *

第 4 步：在服务器上部署 Web 部件（成功，因为非 jquery 功能正在工作）。

* * *

第 5 步：但 jquery 功能不起作用。

这是 Web 部件的所有代码

WebPart1.ascx

```
 <%@ Assembly Name="$SharePoint.Project.AssemblyFullName$" %>
  <%@ Assembly Name="Microsoft.Web.CommandUI, Version=14.0.0.0, Culture=neutral,    PublicKeyToken=71e9bce111e9429c" %> 
<%@ Register Tagprefix="SharePoint" Namespace="Microsoft.SharePoint.WebControls" Assembly="Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %> 
<%@ Register Tagprefix="Utilities" Namespace="Microsoft.SharePoint.Utilities" Assembly="Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %>
<%@ Register Tagprefix="asp" Namespace="System.Web.UI" Assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" %>
<%@ Import Namespace="Microsoft.SharePoint" %> 
<%@ Register Tagprefix="WebPartPages" Namespace="Microsoft.SharePoint.WebPartPages" Assembly="Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %>
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="SanctuaryVisualWebPartUserControl.ascx.cs" Inherits="SanctuaryVisualWebPart.SanctuaryVisualWebPart.SanctuaryVisualWebPartUserControl" %>
<%@ Register assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" namespace="System.Web.UI.WebControls" tagprefix="asp" %>
<SharePoint:ScriptLink ID="ScriptLink1" runat="server"  name="~sitecollection/SiteAssets/jquery-1.4.1.js "  />

  <style type="text/css">
       .style1
    {
        width: 100%;
        height: 247px;
    }
    .style2
    {
        width: 398px;
    }
    .style3
    {
        width: 421px;
    }
</style>
       <script type="text/javascript">
           $(document).ready(function () {

              alert("Fired using JQuery Document ready");
               $("#btnJQ").click(function () {

                   $("#tboxJQ").val("Fired using JQuery");
                  alert("Fired using JQuery");
               });
           });
              </script>

<table bgcolor="#CCFFCC" border="3" cellpadding="3" cellspacing="3" 
    class="style1">

    <tr>
    <td>
        <asp:Button ID="btnJQ" runat="server" Text="JQuery" Width="110px" />
        </td>
    <td>
        <asp:TextBox ID="tboxJQ" runat="server"></asp:TextBox>
        </td>
    </tr>
</table> 
```

第 6 步：document.ready 的第一个警报被触发，但 buttonClick 内部的下一个警报没有触发。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:30:01.817

经过一番研究，我发现上述访问元素 id 的方法在 sharepoint 中不起作用，因为当 web 部件嵌入到 sharepoint 母版页时，id 会发生变化。唯一可行的方法是如果设置了 clientIdMode="Static" 在这种情况下 jquery 将能够访问元素。

但这不能在 sharepoint Foundation 或 Sharepoint 2010 中使用，因为它们是基于 .net 3.5 框架构建的，并且上述功能仅在 .NET 4.0 中可用。

解决此问题的方法是使用 html 元素

```
<%@ Assembly Name="$SharePoint.Project.AssemblyFullName$" %>
<%@ Assembly Name="Microsoft.Web.CommandUI, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %> 
<%@ Register Tagprefix="SharePoint" Namespace="Microsoft.SharePoint.WebControls" Assembly="Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %> 
<%@ Register Tagprefix="Utilities" Namespace="Microsoft.SharePoint.Utilities" Assembly="Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %>
<%@ Register Tagprefix="asp" Namespace="System.Web.UI" Assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" %>
<%@ Import Namespace="Microsoft.SharePoint" %> 
<%@ Register Tagprefix="WebPartPages" Namespace="Microsoft.SharePoint.WebPartPages" Assembly="Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %>
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="JqueryWebPartUserControl.ascx.cs" Inherits="JqueryWebPart.JqueryWebPart.JqueryWebPartUserControl" %>
<SharePoint:ScriptLink ID="ScriptLink1" runat="server"  name="~sitecollection/SiteAssets/jquery-1.4.1.js"/>

 <script type="text/javascript">
     ExecuteOrDelayUntilScriptLoaded(
   function () {
       $(document).ready(function () {

           $('#tboxJQ').val("Fired using JQuery Ready");

           $('#btnJQ').click(function () {

               $('#tboxJQ').val("Fired using JQuery");

           });
       });
   }, "sp.js");
              </script>

<table>
<tr><td></td></tr>
<tr>
<td>
    <input id="btnJQ" type="button" value="button" /></td>

</tr>
<tr>
<td>
    <input id="tboxJQ" type="text" /></td>

</tr>
</table> 
```

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T10:56:33.930

感谢 Yahya M. Ammouri，我已经能够使用以下代码调用 jQuery 方法“警报”。在可视化 Web 部件中，您需要传递元素的 clientID，而不像普通网页那样传递元素 ID。

下面的一段代码有助于参考：

```
<script type="text/javascript">
    $(function () {
        $('#' + '<%=this.btnWow.ClientID  %>').click(function () {
            alert("Hello world!");
        });
    });    
</script>

<div>
<asp:Button ID="btnWow" Text="click" runat="server" />
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T20:31:44.690

您的 tboxJQ 选择器是错误的 - 如果您通过 id 引用元素，则需要在其前面加上哈希。所以....

```
$("tboxJQ").val("Fired using JQuery"); 
```

应该

```
$("#tboxJQ").val("Fired using JQuery"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T10:56:56.423

尝试更改如下：

代替

```
$("#tboxJQ") 
```

利用

```
 $('#' + '<%=this.TextBox1.ClientID  %>') 
```

# sharepoint - InfoPath 使用 SharePointListUrl() 作为内容类型

> ID：12716332
> 
> 赞同：3
> 
> 时间：2012-10-03T20:25:45.360
> 
> 标签：sharepoint, infopath, contenttype

我正在使用 InfoPath 2010 并将我的表单发布到文档库。在我的表单（通过电子邮件发送给用户）上，我生成了一个链接，该链接将用户带回列表项，以便他们可以快速返回该项目以进行批准或编辑。链接生成如下：

```
concat(SharePointSiteUrl(), "_layouts/FormServer.aspx
?XmlLocation=", SharePointListUrl(), fileName, ".xml
&ClientInstalled=true
&Source=", SharePointListUrl(), "Forms/AllItems.aspx
&DefaultItemOpen=1") 
```

并生成一个有效的 URL，例如：

```
http://sharepoint/sites/mysite/_layouts/FormServer.aspx?XmlLocation=/sites/mysite/Office%20Resource/2012-10-03-6.xml&ClientInstalled=true&Source=http://sharepoint/sites/mysite/Office%2520Resource%2FForms%2FAllItems%2Easpx&DefaultItemOpen=1 
```

当我将此站点作为内容类型发布时，此链接不再有效。当我查看生成的链接的输出时，似乎内置函数**SharePointListUrl()**不再返回任何内容。我必须假设这不适用于内容类型，但我发现没有提及这是事实。我的工作是简单地对缺失值进行硬编码。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T17:49:49.063

为什么不将 SharePointSiteURL() 粘贴到表单字段中并将该字段提升到列表中。然后您可以使用包含您的 URL 的提升字段通过工作流构建您的电子邮件吗？

# c# - 如何禁用 ListView 中的默认选择？

> ID：12716342
> 
> 赞同：3
> 
> 时间：2012-10-03T20:26:21.943
> 
> 标签：c#, listview, windows-8, microsoft-metro

在详细信息页面上，我有一个列表视图和一个控件，该控件根据列表视图中的选定项目显示详细信息。在主页上，显示了该集合的几个项目（再次显示在详细信息页面中）。如果用户单击其中一个，它将导航到详细信息页面并显示详细信息。不幸的是，每次用户单击主页上的某个项目时，selection-changed 事件都会引发两次：第一个项目（默认项目）一次，所选项目一次。我怎样才能正确处理这个？- 我只需要第二个（真实的）事件。

我找到了这个[帖子](https://stackoverflow.com/questions/11388768/how-to-disable-the-default-selection-in-listview-when-you-navigate-to-it)，但无法解决我的问题......

这是我的代码（缩短）：

MainPage.xaml：

```
<GridView
    x:Name="itemGridView"
    ItemsSource="{Binding Source={StaticResource groupedItemsViewSource}}"
    ItemTemplate="{StaticResource Custom250x250ItemTemplate}"
    SelectionMode="None"
    IsItemClickEnabled="True"
    ItemClick="ItemView_ItemClick">

    <!-- details -->

 </GridView> 
```

MainPage.xaml.cs：

```
 void ItemView_ItemClick(object sender, ItemClickEventArgs e)
 {
    // Navigate to the appropriate destination page, configuring the new page
    // by passing required information as a navigation parameter
    var itemId = ((ArticleDataItem)e.ClickedItem).Id;
    this.Frame.Navigate(typeof(ItemDetailPage), itemId);
 } 
```

ItemDetailPage.xaml:

```
 <ListView
    x:Name="itemListView"
    ItemsSource="{Binding Source={StaticResource itemsViewSource}}"
    IsSwipeEnabled="False"
    SelectionChanged="ItemListView_SelectionChanged"
    ItemTemplate="{StaticResource Standard130ItemTemplate}" 
    ItemContainerStyle="{StaticResource CustomListViewItemStyle}" 
    />

 <!-- ... -->

 <WebView x:Name="contentBrowser" /> 
```

ItemDetailPage.xaml.cs：

```
 void ItemListView_SelectionChanged(object sender, SelectionChangedEventArgs e)
 {
    // this event gets raised two times when navigating from the MainPage to this page !!!

    // Invalidate the view state when logical page navigation is in effect, as a change
    // in selection may cause a corresponding change in the current logical page.  When
    // an item is selected this has the effect of changing from displaying the item list
    // to showing the selected item's details.  When the selection is cleared this has the
    // opposite effect.
    if (this.UsingLogicalPageNavigation()) this.InvalidateVisualState();

    if (itemsViewSource.View.CurrentItem == null)
    {
         return;
    }

    // reset contentBrowser-Content 
    contentBrowser.NavigateToString(Tasks.WebViewPreCode + "<p>Loading...</p>" + Tasks.WebViewAfterCode);

    var selectedItem = (ArticleDataItem)this.itemsViewSource.View.CurrentItem;

    if ( selectedItem == null )
    {
         contentBrowser.NavigateToString(Tasks.WebViewPreCode + "<p>There was an error. Please try again later.</p>" + Tasks.WebViewAfterCode);
        return;
    }

    // Download item details
    ArticleDataSource.ReadArticle(selectedItem); // this really shouldn't be called two times

} 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T13:52:37.953

从 XAML 代码中删除 SelectionChanged 处理程序。在您的代码隐藏中，将 SelectedIndex 设置为 -1（或默认项的索引，如果有），然后在设置 SelectedIndex 后添加处理程序。

编辑：只是为了提供一些背景，如果列表视图的选定项以编程方式更改（例如，当您为 SelectedIndex 或 SelectedItem 属性分配新值时），也会触发 SelectionChanged 事件。我不太确定当您更改 ItemsSource 时它是否会触发，但我认为会是这种情况。因此，您希望在完成初始化后添加事件处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-29T13:58:17.633

我尝试了同样的问题。我发现“SelectionChanged”事件被注册了两次。一次在页面构造器上，另一次在 *.g.cs 文件上，这看起来是一个“设计器”文件。

我解决了它删除类的构造函数上的选择更改注册。

我希望它可以帮助你。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-03T20:49:15.937

我认为您需要决定在 SelectionChanged 事件中响应什么（也许您想取消选择已选择的内容？我不确定您要做什么）。也许[这篇文章](https://stackoverflow.com/questions/7033691/disable-event-bubbling-on-selectionchanged-event-wpf)可能会有所帮助。

# android - Firefox 扩展的“选择”事件（在 android 上）

> ID：12716344
> 
> 赞同：3
> 
> 时间：2012-10-03T20:26:36.510
> 
> 标签：android, firefox-addon

我尝试为 firefox (android 版本) 做扩展

当用户长按时，我需要选择文本。

我有这样的代码：

```
.....
Services.obs.addObserver(this, "Gesture:LongPress", false);
.....

observe: function(aSubject, aTopic, aData) {
    if (aTopic == "Gesture:LongPress") {
        var xw = this._xulWindow;
        var document = xw.BrowserApp.selectedBrowser.contentDocument;
        var selectedText = document.getSelection().toString();
        var prompts = Components.classes["@mozilla.org/embedcomp/prompt-service;1"]
                    .getService(Components.interfaces.nsIPromptService);
        prompts.alert(null, "ColorDict", selectedText);
    }
}
.... 
```

但我得到空警报。因为在 LongPress 处理程序完成后将选择单词。用户长按后如何获得选定的单词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:11:23.493

这很有趣。我插入

```
Services.obs.addObserver(this, "*", false); 
```

取而代之

```
Services.obs.addObserver(this, "Gesture:LongPress", false); 
```

它有效！我看到所选单词的警报！

我将在文档中搜索原因。谢谢！

# wpf - 如果复选框是从数据动态创建的，如何分配和访问 WPF 复选框的 Name 属性？

> ID：12716350
> 
> 赞同：0
> 
> 时间：2012-10-03T20:26:45.890
> 
> 标签：wpf, dynamic, checkbox, treeview, model-view

我有一个 TreeView，并且使用 HierarchicalDataTemplates 的 TreeView 有多个层。每个 TreeViewItem 当前都显示它所代表的对象的“名称”。我现在需要将 CheckBoxes 添加到我已经想通的树的子级中，但是我还没有想出在选中复选框时访问复选框的名称。

更具体地说，我需要选中的复选框的名称，因为我需要相应地对某些数据应用过滤器。当检查 CheckBox 和 TreeViewItem 的对象的名称是否是从数据动态创建时，如何访问每个 CheckBox 的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T22:24:48.650

我假设您的视图模型中有一个相应的命令，树中的所有复选框项都绑定到该命令。

绑定到命令并作为 CommandParameter 发送到 ComboBoxItem 的当前名称

```
 <DataTemplate x:Key="ListBoxItemTemplate" DataType="{x:Type ListBoxItem}">
        <CheckBox Command="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=ListBox}, 
                  Path=DataContext.CheckBoxItemCheckedCommand}"
                  CommandParameter="{Binding RelativeSource={RelativeSource Self}, Path=Name}"/>                       
   </DataTemplate> 
```

# android - 等待对话框无法正常工作，应用程序冻结，直到任务结束

> ID：12716353
> 
> 赞同：0
> 
> 时间：2012-10-03T20:26:57.800
> 
> 标签：android, android-asynctask, busy-waiting

我有一门课可以发送各种带有附件的邮件。

因为该方法`sendEmail(addresses);`需要时间来上传附件和发送电子邮件，所以我创建了一个 AsyncTask 来显示一个等待对话框，

然而，不幸的是，在发送过程中，应用程序会冻结，直到它终止发送而不显示任何内容（或者有时在程序结束前显示一个冻结的等待窗口片刻）

我的类中的相关代码部分如下

```
public class MyClass extends Activity {
    ...

    private ProgressDialog waitingDialog;

    ....

    OnClickListener mInvia = new OnClickListener() {
        public void onClick(View v) {
                new MyAsyncTaskClass().execute(new String[] {});
        }
    };

    public void prepareSending() {
        String x = "";
        for (String s : selectedMails) {
            x += (s + ";");
        }
        String[] addresses = x.split(";");
        sendEmail(addresses);
    }

    private void openFile() {
        Intent i = new Intent(Intent.ACTION_GET_CONTENT);
        i.setType("file/*");
        startActivityForResult(i, FILE_REQ_CODE);
    }

    protected void onActivityResult(int requestCode, int resultCode,
            Intent intentData) {

        Uri tmp = intentData.getData();
        filePath=getRealPath(tmp);
        super.onActivityResult(requestCode, resultCode, intentData);

    }

    public void sendEmail(String[] addresses) {

        Mail m = new Mail("sendermail@sample.com",
                "senderpassword");

        name = editor1.getText().toString();
        subject = editor2.getText().toString();
        text = editor3.getText().toString();
        emailReply = editor4.getText().toString();

        m.setTo(addresses);
        m.setFrom(emailReply);
        m.setSubject(subject);
        m.setBody(text + "\n\n\n Sent by" + name);
        try {
            m.send();
        } catch (Exception e) {
            Log.e("MyClass", "Cannot send email", e);
        }

        try {
            m.addAttachment(filePath);

            if (m.send()) {
                Alerts.Ok(MyClass.this);
                nSuccess++;
            } else {
                Alerts.ErrorSending(MyClass.this);
            }
        } catch (Exception e) {
            Alerts.ErrorAttachment(MyClass.this);
        }

    }

    //inner class that should show a waiting windows
    private class MyAsyncTaskClass extends AsyncTask<String, Void, Void> {

        @Override
        protected void onPreExecute() {
            waitingDialog = new ProgressDialog(MyClass.this);
            waitingDialog.setMessage("Loading ....");
            waitingDialog.setIndeterminate(true);
            waitingDialog.setCancelable(true);
            waitingDialog.show();
        }

        @Override
        protected Void doInBackground(final String... strings) {
            try {
                runOnUiThread(new Runnable() {
                    public void run() {
                        prepareSending();
                    }

                });
            } catch (Exception e) {

            }
            return null;
        }

        @Override
        protected void onPostExecute(Void params) {
            waitingDialog.dismiss();
        }
    }

    //end innerclass
    // start context menu code
    ......

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:31:54.267

### 问题

我敢打赌这是因为您在 UI 线程上运行所有内容：

```
 @Override
    protected Void doInBackground(final String... strings) {
        try {
            runOnUiThread(new Runnable() {
                public void run() {
                    prepareSending();
                }

            });
        } catch (Exception e) {

        }
        return null;
    } 
```

### 改为这样做！

运行`doInBackground`基于非 UI 依赖的所有代码。

```
 @Override
    protected Void doInBackground(final String... strings) {
        prepareSending();
        return null;
    } 
```

### 访问用户界面

如果您需要从 UI 或 UI 线程上的任何其他内容访问数据，*请先*执行此操作。

```
 protected void onPreExecute() {
        // Find all your "editor" fields here, and save them to member variables within the AsyncTask.
        // ...
    } 
```

### 然后将它们发送到您的方法

输入`prepareSending`并`sendEmail`接受该数据作为参数：

```
public void prepareSending(String name, String subject, String text, String emailReply) {
    // ...
    sendEmail(addresses, name, subject, text, emailReply);
}
public void sendEmail(String[] addresses, String name, String subject, String text, String emailReply) {
    // ...
} 
```

最后，您需要从以下位置发送`doInBackground`：

```
 @Override
    protected Void doInBackground(final String... strings) {
        prepareSending(mName, mSubject, mText, mEmailReply); // The local fields you saved earlier
        return null;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:32:04.673

这不是推荐的做法：

```
 @Override
    protected Void doInBackground(final String... strings) {
        try {
            runOnUiThread(new Runnable() {
                public void run() {
                    prepareSending();
                }

            });
        } catch (Exception e) {

        }
        return null;
    } 
```

您应该使用 publishProgress() 以便在处理过程中在 UI 线程上运行内容。

也就是说，您也没有管理可以破坏活动的情况。这可能会导致内存泄漏和多个 AsyncTask 在后台运行。

尝试得到类似的东西：

```
public static class MyAsyncTask extends AsyncTask<Void, Void, Void> {

  MyAsyncTask(MyActivity a) {
    activity = new WeakReference<MyActivity>(a);
  }

  @Override
  protected void onPreExecute() {
    if (activity.get()!=null) activity.get().showDialog();
  }

  @Override
  protected Void doInBackground(Void... params) {
    // Upload data from here
  }
  @Override
  protected void onPostExecute(Void params) {    
    if (activity.get()!=null) activity.get().dismissDialog();
  }

  private WeakReference<MyActivity> activity;
} 
```

您的活动可以响应将任务保存为非实例状态，在适当时关闭并重新创建对话框，...

最后，将发送邮件所需的所有信息传递给您的任务构造函数（内容、主题、...）。然后，当您创建任务时，所有 UI 访问都将在 UI 线程上完成（而不是像您目前所做的那样在 doInBackground 中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T20:40:51.990

问题出在这里：

```
try {
        runOnUiThread(new Runnable() {
                public void run() {
                    prepareSending();
                }

            });
    } catch (Exception e) {

    } 
```

1）准备发送（）；在 UI 线程上调用方法。参考[这里](http://developer.android.com/reference/android/os/AsyncTask.html)了解如何在**Android中使用****AsyncTask**

 **2) 此外，您似乎习惯于捕捉通用异常并且也不处理它​​们。请参阅[代码样式指南](http://source.android.com/source/code-style.html#dont-catch-generic-exception)。这会对你有很大帮助。

祝你好运 ;）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T20:59:16.553

```
private class MyAsyncTaskClass extends AsyncTask<String, Integer, Integer> {
        ProgressDialog waitingDialog;

        @Override
        protected void onPreExecute() {
            waitingDialog = new ProgressDialog(MyClass.this);
            waitingDialog.setMessage("Loading ....");
            waitingDialog.setIndeterminate(true);
            waitingDialog.setCancelable(true);
        }

        @Override
        protected Integer doInBackground(final String... strings) {
            setProgress(-1);
            // long process start
            prepareSending();
            // long process end
            setProgress(-2);
            return 0;
        }

        @Override
        protected void onProgressUpdate(Integer... values) {

            if (values[0] == -1) {
                waitingDialog.show();
            } else if (values[2] == -2) {
                waitingDialog.dismiss();
            }
        }

        @Override
        protected Integer onPostExecute(Integer params) {
        }
    } 
```**

# google-apps-script - 如何从同一个库生成的电子表格下拉菜单中调用库函数

> ID：12716355
> 
> 赞同：7
> 
> 时间：2012-10-03T20:26:57.240
> 
> 标签：google-apps-script, google-sheets

我创建了一个库，它具有创建新电子表格菜单（使用 addMenu）的特定功能。我的菜单选项应该调用我的库中的其他函数来做事。

```
// Bare Minimum Deployment on a blank spreadsheet with 
// my library registered (called myLibraryName for this example).

function onOpen() {
  myLibraryName.setMenus(); // creating new drop-down menus
}

function onEdit(event) {
  myLibraryName.doEvent(event); // sending the onEdit event to a function in my library.
} 
```

现在的问题是，当我选择菜单选项时，谷歌应用脚​​本会给我一条错误消息，例如

> 找不到脚本函数**myMenuFunction**

所以我试图在我的菜单条目中添加一个前缀

```
menuEntries.push({name: "About", functionName: "myLibraryName.myMenuFunction"}); 
```

但它也不起作用。

因此，我正在寻求有关如何创建一个库的建议，该库可以创建链接到库中函数的菜单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T20:42:50.647

我不是 100% 确定你在打电话，但我认为这是一个已知问题。

看起来你需要直接从菜单调用一个函数，而不是从上层调用它。

这里有一个[很好的例子](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1355)。

在仔细查看您的问题时，您似乎正试图在电子表格的不同菜单中调用相同的函数。根据我链接的错误，您可能无法执行此操作，因为您需要定义一个本地函数并使用它与脚本进行交互。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T11:51:54.907

是的，类似的问题。

我有大约 20 个电子表格，用愚蠢的代码更新它的所有脚本是很无聊的：

```
 function doSomething(){ myLib.doSomething();} 
```

每次我在主库中添加新菜单项时。

所以我发现了或多或少的肮脏解决方法 - 将菜单条目链接到 lib 中的“代理”函数，并提前在客户端电子表格中创建几个类似的函数（对所有客户端电子表格执行一次）

```
//-----------LIB-----------
function libMenu() {
  var mySheet = SpreadsheetApp.getActiveSpreadsheet();

  var menuEntries = [ {name: "Increment current cell", functionName: "processMenuEntry0"},
                      {name: "Do something with row", functionName: "processMenuEntry1"}
                    ];
  mySheet.addMenu("Library Functions", menuEntries);
 }

 function processMenuEntry0()  { incrementCurrentCell();}
 function processMenuEntry1()  { doSomethingWithRow();  }

 //-----------LIB-----------

 //-----------CLIENT-----------
 function onOpen() {
   Library.libMenu();
 }

 function processMenuEntry0()  {gTracking.processMenuEntry0();}
 function processMenuEntry1()  {gTracking.processMenuEntry1();}
 function processMenuEntry2()  {gTracking.processMenuEntry2();}
 function processMenuEntry3()  {gTracking.processMenuEntry3();}
 // etc.
 // I have reserved twenty menu entries in a such way
 //-----------CLIENT----------- 
```

目前我确实使用了一些增强版本，它只允许我更新 menuEntries 数组。这里是：

```
 //-----------LIB-----------

 var menuEntries = [ {name: "Increment current cell", functionName: "incrementCurrentCell"},
                  {name: "Do something with row", functionName: "doSomethingWithRow"}
                ];

 //returns menu entries with changed 'functionName' parameter (-> "processMenuEntry" + id)
 function convertMenuEntries() {
   var newMenuEnties=[];                  
   for (var i=0; i< menuEntries.length ;i++){
     if (menuEntries[i] == null) {// for line separators
       newMenuEnties.push(null);
       continue;
     }
     newMenuEnties.push({name: menuEntries[i]["name"], functionName: "processMenuEntry" + i});
   }
   return newMenuEnties;
 }

 function libMenu() {
   var mySheet = SpreadsheetApp.getActiveSpreadsheet();  

   mySheet.addMenu("Library Functions", convertMenuEntries());
 }

 // get function name from menuEntries array and call it
 function processMenuEntry(id){
   this[menuEntries[id]["functionName"]]();
 }

 function processMenuEntry0()  {processMenuEntry(0);}
 function processMenuEntry1()  {processMenuEntry(1);}
 // etc.

 //-----------LIB-----------
 //-----------CLIENT-----------
 function onOpen() {
   Library.libMenu();
 }

 function processMenuEntry0()  {gTracking.processMenuEntry0();}
 function processMenuEntry1()  {gTracking.processMenuEntry1();}
 function processMenuEntry2()  {gTracking.processMenuEntry2();}
 function processMenuEntry3()  {gTracking.processMenuEntry3();}
 // etc.
 //-----------CLIENT----------- 
```

# php - 将搜索 URL 转换为 SeoFriendly URL

> ID：12716357
> 
> 赞同：0
> 
> 时间：2012-10-03T20:27:16.277
> 
> 标签：php, url, seo

我把我的`.htaccess`喜欢放在这里；

这是经验。我的 SeoFriendly 网址**mysite.com/search/eminem/1/video.html**

这是经验。原始网址 **mysite.com/index.php?search=eminem&page=1&type=video**

我需要做的是当我搜索单词 exp "eminem": mysite.com/index.php?search=eminem&page=1&type=video 以在此 url mysite.com/search/eminem/1/video 中进行转换。 html

这是一个示例[http://mp3.x10demos.com/](http://mp3.x10demos.com/)

我想我必须为我的搜索表单添加一个 php 函数，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T03:20:53.023

当您链接到特定页面时，只需在所有页面中使用“www.example.com/some/other.html”。.htaccess 将自动转换并将其映射到原始 url。Google 会将您放入页面的链接编入索引，这些链接将是“www.example.com/some/other.html”。当有人点击该 url 时，.htaccess 将生效并将该 url 映射到您的原始 url。

**编辑**：如果您的网站上有搜索功能，并且在搜索后您得到的是背景 url 而不是 seo 友好的 url，那么我认为您应该首先查看您保存的 url。如果您保存背景 url，那么您将在结果中获得背景 url，并且您必须手动将这些结果转换为 seo 友好的 url，因此请尝试以 seo 友好的格式保存链接。

**编辑：**实际上，如果这是您的搜索处理代码所在的文件，您需要对“searchSuggest.php”文件进行一些重大更改。问题是您的网址正在转换，但在处理完成之后。所以我强烈建议你使用[Codeigniter](http://codeigniter.com)

它是一个非常流行的 php 框架，否则事情会变得更加复杂。当您使用 codeigniter 时，您的搜索处理脚本将采用 mysite.com/search/eminem/1/video.html 中的 url 形式处理它，并将结果输出到 seo 友好的 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:00:26.650

> 我需要做的是当我搜索单词 exp "eminem": mysite.com/index.php?search=eminem&page=1&type=video 以在此 url mysite.com/search/eminem/1/video 中进行转换。 html

我认为你需要的是相反的。您应该在应用程序中生成对 SEO 友好的链接，并让 .htaccess 将它们翻译成应用程序可读的链接。

因此，在您的网站上，您应该有一个链接`mysite.com/search/eminem/1/video.html`并添加到 .htaccess 之类的东西

```
RewriteRule ^search/(.*)/([0-9]+)/(.*).html$ index.php?search=$1&page=$2&type=$3 [L] 
```

正如 metadice 所建议的，最好的方法是使用有助于促进这一过程的框架。（例如 Codeigniter）

# tomcat - 没有登录提示但收到 403 状态错误

> ID：12716359
> 
> 赞同：4
> 
> 时间：2012-10-03T20:27:17.403
> 
> 标签：tomcat, tomcat7, basic-authentication

我在 Tomcat 7 中有一个 servlet 设置，并配置了 security-contraint 和 login-config 以使用 BASIC auth。

当我尝试访问该页面时，我会立即收到一条 403 禁止错误消息，而不是获得正常的 no BASIC-auth 用户名/密码。

奇怪的是，它的设置几乎与另一个运行良好的 web 应用程序相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-26T07:05:27.110

那天我遇到了同样的问题。我已经配置了 Tomcat 安全性，它在本地工作（在 Windows 机器上）但是在生产服务器上部署后它给了我 403 禁止错误。问题是生产服务器正在运行 Linux，而 Linux tomcat 的配置默认值与 Windows tomcat 不同。

我的解决方案是在配置中定义每个可能的选项以匹配 Windows 默认值 + 我的配置。有效。

抱歉没有示例，但那是很久以前的事了，我只是找不到该项目。

希望这可以帮助。

# apache - Symfony2：mod_rewrite / htaccess 摆脱“web/app.php”......奇怪的行为

> ID：12716360
> 
> 赞同：1
> 
> 时间：2012-10-03T20:27:18.163
> 
> 标签：apache, .htaccess, mod-rewrite, symfony

我想摆脱 symfony2 安装 URL 中的“web/app.php”+“web/app_dev.php”。我知道，虚拟主机是最好的方式，但你并不总是拥有自己的主机。所以我在我的项目文件夹（http://localhost/my-sf2-project/.htaccess）的 htaccess 中使用 mod_rewrite 进行了尝试......如何做到这一点，这里有很多解释。幸运的是，重写过程正在用这个 htaccess 做一些事情：

```
<IfModule mod_rewrite.c>
    Options +FollowSymLinks
    RewriteEngine On
    RewriteBase /my-sf2-project/
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ web/app_dev.php [QSA,L]
</IfModule> 
```

这意味着，当我尝试请求`http://localhost/my-sf2-project/page/1`时，服务器应该重定向到`http://localhost/my-sf2-project/web/app_dev.php/page/1`. 我的重写日志正在确认它：

> 使用 /my-sf2-project/web/app_dev.php/page/1 [内部重定向] 进行内部重定向

但是现在奇怪的事情确实发生了...... symfony2 开发环境说：

> 找不到“GET /my-sf2-project/page/1”的路线！

这意味着请求以某种方式重定向到

*   **http://localhost/my-sf2-project/web/app_dev.php/my-sf2-project/page/1**

代替

*   **http://localhost/my-sf2-project/web/app_dev.php/page/1**

这是怎么发生的？apache 配置中是否有一些设置或我的 mod 重写中有错误，这可以解释这种奇怪的行为？

# ruby-on-rails - 如何在活动记录信誉系统中聚合非主要信誉

> ID：12716361
> 
> 赞同：1
> 
> 时间：2012-10-03T20:27:17.423
> 
> 标签：ruby-on-rails, activerecord

**编辑说明：**这是关于[Railscast#364](http://railscasts.com/episodes/364-active-record-reputation-system)中涉及的[activerecord-reputation-system gem的问题](https://github.com/twitter/activerecord-reputation-system)

我有一个应用程序，其中`Vip`和类的用户可以为他们最喜欢的对象`Peon`投票。`Idea`我能够成功地收集`vip_votes`和`peon_votes`。我怎样才能将两种投票类型聚合成`total_votes`？我有下面的代码，但 total_votes 没有按预期累积。

**想法.rb**

```
has_reputation :vip_votes, 
               :source => :vip,
               :aggregated_by => :sum 

has_reputation :peon_votes, 
               :source => :peon,
               :aggregated_by => :sum 

has_reputation :total_votes, 
               :source => [{ :reputation => :vip_votes },
                           { :reputation => :peon_votes, :weight => 0.8 }],
               :aggregated_by => :sum 
```

**想法控制器.rb**

```
def vip_vote
  @design = Design.find(params[:id])
  @design.add_evaluation(:vip_votes, 1, current_vip)
end

def peon_vote
  @design = Design.find(params[:id])
  @design.add_evaluation(:peon_votes, 1, current_peon)
end 
```

**路线.rb**

```
resources :ideas do
  member { post :vip_vote }
  member { post :peon_vote }
end 
```

感谢您的反馈意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T04:34:56.357

无法解决问题，我求助于将两种组合投票类型物理添加到控制器中的实例变量中。

我在 Idea#Show 视图文件中使用了 total_votes，所以我添加了以下内容。

**想法控制器.rb**

```
def show
@total_votes = @idea.reputation_value_for(:vip_votes).to_i + @idea.reputation_value_for(:peon_votes) * 0.8
end 
```

不过，如果有人知道更好的方法来做到这一点，我将不胜感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T04:38:55.090

对您来说可能为时已晚，这有望对其他人有所帮助。我认为您需要的代码可以在activerecord-reputation-system gem的[快速入门中找到：](https://github.com/twitter/activerecord-reputation-system#quick-start)

将那里所做的事情转化为您的问题会收获：

```
has_reputation :total_votes, 
               :source => [{ :reputation => :vip_votes },
                           { :reputation => :peon_votes, :weight => 0.8 }] # no comma here
               # this line seems to be assumed: :aggregated_by => :sum 
```

没有测试过，但希望对你有帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T06:49:12.040

如果 Peon.rb 有 'peons' 表，其声誉定义如下

```
has_reputation :votes, source: :user, aggregated_by: :sum 
```

然后你应该在 Idea.rb 中为 peon_votes 执行此操作。

```
 has_reputation :peon_votes,
    :source => {reputation: :votes, of: :peons} 
```

同样的事情也适用于 Vip.rb

然后计算 Idea.rb 中的总票数，你这样做

```
has_reputation :total_votes, 
               :source => [{ :reputation => :vip_votes },
                           { :reputation => :peon_votes, :weight => 0.8 }],
               :aggregated_by => :sum 
```

# assembly - 如何仅使用 mov、add、sub、neg 在 4 条指令中限制 x=2a+3b？

> ID：12716362
> 
> 赞同：6
> 
> 时间：2012-10-03T20:27:24.823
> 
> 标签：assembly, add, x86-16, mov

假设 x 是一个其值未知的寄存器。我必须在`x=2a+3b`哪里`a`并且`b`有未知的价值。

我只能使用 8086 asm 指令`mov`, `add`, `sub`, `neg`。指令的使用`mul`是不允许的，也有4条指令的限制。

甚至可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-03T20:34:03.720

重写你的表达式：

```
2a + 3b = 2(a + b) + b = (a + b) + (a + b) + b 
```

请注意，您只需要计算`(a + b)`一次的值。

# nuget - 如何阻止用户访问某个 ProGet 源？

> ID：12716364
> 
> 赞同：2
> 
> 时间：2012-10-03T20:27:31.210
> 
> 标签：nuget, nuget-server

我正在使用 ProGet 1.0.9，但我不知道如何阻止某些用户访问 NuGet 提要。我仍然希望这些用户能够访问所有其余的提要，我只想拒绝一个特定的提要。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:46:22.883

我不确定您是否已经发现如何执行此操作，但在“管理”>“权限和角色”下，有一个选项可以向特定用户或组添加提要级拒绝权限：

![拒绝访问 ProGet 源](../Images/c7022ea5b9582602438532ae401e3ca8.png)

如果您想拒绝对提要的完全访问，请确保选择“管理员”角色。

# android - 折叠搜索小部件 android

> ID：12716365
> 
> 赞同：3
> 
> 时间：2012-10-03T20:27:32.530
> 
> 标签：android, search, widget

我已经按照 android 开发者网站上的官方指南在操作栏中实现了搜索小部件。小部件以折叠状态开始。当用户点击搜索图标时，它会展开并弹出键盘，用户可以进行搜索。一旦用户按下输入，就会在顶部启动一个新的活动来处理和显示搜索。当用户按下返回以返回上一个活动（搜索之前）时，我希望搜索视图会自动折叠，因为用户刚刚进行了搜索。我该怎么做？现在用户必须在此之后按返回键 2，一次关闭键盘，一次折叠搜索小部件。我努力了

```
searchManager.setOnDismissListener(new OnDismissListener() {
        public void onDismiss() {
            searchView.setIconified(true);
        }
    }); 
```

这会折叠键盘，但用户仍然必须再次按下后退按钮才能真正折叠视图并将其移回其在操作栏中的位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T13:22:11.220

我知道这是一个老问题，但我只是在寻找答案时遇到了它。我已经完全按照上面的方法进行了尝试，但是您实际上需要折叠 MenuItem，而不是 SearchView。这是代码片段：-

```
 // I do this in onCreateOptionsMenu
 mSearchMenuItem = menu.findItem(R.id.menu_item_search);

 // Call this when you want to collapse it
 mSearchMenuItem.collapseActionView(); 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T17:57:34.397

您可以使用@Ryan 的答案，但如果您必须支持旧版本，您可以使用**android.support.v4.view.MenuItemCompat**：

```
MenuItemCompat.collapseActionView(searchMenuItem); 
```

# css - css无法加载其他目录中的图像

> ID：12716366
> 
> 赞同：1
> 
> 时间：2012-10-03T20:27:35.267
> 
> 标签：css, apache

奇怪的事情。我将我的网站从开发转移到生产，现在我加载到我的 CSS 文件中的所有图像都无法正常工作。

目录结构：

```
root
root - css
root - icons 
```

来自 CSS 的示例代码：

```
.icon_edit {
    display: block;
    background:url(../icons/sharp_reply.png) center right no-repeat;
    width: 16px;
    height: 16px;
} 
```

上面的代码确实适用于我的登台服务器。如果我将图像移动到 CSS 文件夹并进行更改，它也可以工作：

```
background:url(../icons/sharp_reply.png) 
```

至

```
background:url(sharp_reply.png) 
```

所以它可能与网络服务器（apache）配置或一些权限设置有关？我只是不知道是哪个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:46:14.737

将您的目录从“图像”重命名为“图标”

# common-lisp - Common Lisp's copy-tree: Which objects will be referenced in common by the original and the copy?

> ID：12716371
> 
> 赞同：3
> 
> 时间：2012-10-03T20:27:51.290
> 
> 标签：common-lisp, practical-common-lisp

I'm reading [Practical Common Lisp](http://www.gigamonkeys.com/book/), and have a question about Lisp's `COPY-TREE` function.

The book gives the example of calling

```
(copy-tree '( '(1 2) '(3 4) '(5 6))) 
```

After explaining it, the book makes this statement:

> Where a cons cell in the original referenced an atomic value, the corresponding cons cell in the copy will reference the same value. Thus, the only objects referenced in common by the original tree and the copy produced by COPY-TREE are the numbers 5, 6, and the symbol NIL.

But that doesn't make sense to me. I thought *all atoms* would be shared between the original and the new. Therefore, I expected that 1, 2, 3, 4, 5, 6 and NIL would all be shared between the original and the copy, and that the only "new objects" would be all the CONS cells.

Which one is correct, and why?

Thanks.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T01:39:24.143

I check the web-version, a pdf version and the hard cover. The first two are wrong as you state. The hard cover states this (bold emphasis is mine):

> Where a cons cell in the original referenced an atomic value, the corresponding cons cell in the copy will reference the same value. Thus, the only objects referenced in common by the original tree and the copy produced by COPY-TREE are the numbers **1-6**, and the symbol NIL.

So the hard cover book is correct.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T21:34:31.543

It is slightly more complicated.

The cons cells will be copied. Typically the objects the cons cells references will not be copied.

But there is one exception. Data like fixnums and characters can be stored inline in cons cells (and structure slots, class slots, arrays). Such data types are not necessarily EQ. That's why there is EQL.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T20:31:30.760

The description is correct, the example is not. [`copy-tree`](http://www.lispworks.com/documentation/HyperSpec/Body/f_cp_tre.htm) would return the 1, 2 and 3 as is, copying only the `cons` cells.

# javascript - 只是好奇如何对 String 对象进行子类化。（原型）

> ID：12716372
> 
> 赞同：5
> 
> 时间：2012-10-03T20:27:51.170
> 
> 标签：javascript, subclass

我知道这是不受欢迎的，我只是在探索这个想法，而我这辈子似乎也无法按照我想要的方式完成这项工作。

该示例应解释所有内容：

```
String.prototype.MyNS = function() {}
String.prototype.MyNS.fooify = function() {
     return this + 'foo!';
 }

var theString = 'Kung';

alert(theString.MyNS.fooify()); 
```

当然，这只是将函数定义附加到 'foo' ...添加 this() 是行不通的。

我知道我在那里失去了上下文，但无法弄清楚如何使原件启动并给我想要的东西。​</p>

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T20:32:08.023

这是您可以做到的一种方法：

```
String.prototype.MyNS = function() {
    var _this = this;
    return {
        fooify: function() {
            return _this + 'foo!';
        }
    };
} 
```

[在 jsFiddle 上](http://jsfiddle.net/cftxY/)查看它的实际效果

请注意，正如 slashingweapon 指出的那样，您必须这样称呼它：

```
String.prototype.MyNS().fooify(); 
```

据我所知，没有跨浏览器的方法可以做到这一点，而不必`MyNS`作为函数调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T20:35:43.183

您正在向 the 添加一个新的`function`（`class`以 oo 术语）`String` `prototype`，它无法访问实际`String`实例。

您可以直接将属性添加到原型中：

```
String.prototype.fooify = function() {
   return this + 'foo!';
}
var theString = 'Kung';
alert(theString.fooify()); 
```

# android - 如何在Android的活动窗口中向左移动图像

> ID：12716374
> 
> 赞同：0
> 
> 时间：2012-10-03T20:28:00.070
> 
> 标签：android

我是 Android 编程新手，我想知道如何编写我的代码，所以当我按下按钮时，它会使活动窗口上的图像朝我想要的方向移动。我的 XML 布局是相对布局，在活动窗口上有几个图像。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:46:54.503

听起来你想要一个动画。在名为 的新文件夹中创建一个新的 XML 文件（补间动画）`anim`，并将其命名为`imageanimation.xml`. 在 xml 中，尝试类似：`<translate android:duration="500" android:fromXDelta="-200" android:fromYDelta="0%" android:repeatCount="0" android:toXDelta="0%" android:toYDelta="0%" android:zAdjustment="top" />`

`android:duration`您希望动画持续多长时间（以毫秒为单位），以及`android:fromXDelta`您`android:toXDelta`希望图像在屏幕上从哪里移动到哪里。`XDelta`是左右，`YDelta`是上下。在此示例中，它将从屏幕外部开始并从左侧滑入。玩弄一下这些值，直到找到（希望）您正在寻找的东西。

然后，在`onCreateListener`您的按钮中，尝试类似`*yourImageView*.startAnimation(AnimationUtils.loadAnimation(getApplicationContext(), R.anim.imageanimation));`

祝你好运，我希望这是你正在寻找的东西。如果不是，请详细说明。

# sql-server - 如何加入一张桌子，然后回退到另一张桌子？

> ID：12716378
> 
> 赞同：2
> 
> 时间：2012-10-03T20:28:16.420
> 
> 标签：sql-server, sql-server-2008-r2

我想将**`Informants`**表加入到他们对应的**`Handlers`**：

```
 Informants                       Handlers
+------------------------+      +----------------------------------------+
|Name         Type       |      | HandlerID  Name            HandlerType |
|------------ ---------- |      |----------  ----------------------------|
|Ronald Regan Politician |      | 1          J. Edgar        FBI         |
|Sal Vitale   MOB        |      | 2          Charles Cabell  CIA         |
|Elia Kazan   Famous     |      | 3          Allen Dulles    CIA         |
|Mrs. Kravitz Citizen    |      | 7          Joe McCarthy    Congressman |
|White Pawn   Foreign    |      +----------------------------------------+
+------------------------+ 
```

我遵循的规则取决于谁来确定您可以通知的人群：

*   政治家 --> 中央情报局
*   黑手党和著名的名人 --> 联邦调查局
*   普通公民 --> 当地警察局
*   外国特工 --> 可以求助于 NSA

因此，我将**告密**者与他们可以**通知**的对象进行匹配：

```
SELECT 
   Informants.Name AS RatName,
   Informants.Type AS RatType,
   Handlers.Name AS GmanName,
   Handlers.HandlerID 
FROM Informants
   LEFT JOIN Handlers
   ON (
      (Informants.Type IN ('Politician') AND Handlers.HandlerType = 'CIA')
      OR  
      (Informants.Type IN ('MOB', 'Famous') AND Handlers.HandlerType = 'FBI')
      OR
      (Informants.Type IN ('Citizen') AND Handlers.HandlerType = 'Police')
      OR
      (Informants.Type IN ('Foreign') AND Handlers.HandlerType = 'NSA')
 ) 
```

我得到了结果：

```
RatName           RatType               GmanName        HandlerID
=============     ==============        ==============  =========
Ronald Regan      Politician            Charles Cabell  2
Ronald Regan      Politician            Allen Dulles    3
Sal Vitale        MOB                   J. Edgar        1
Elia Kazan        Famous                J. Edgar        1 
Mrs. Kravitz      Citizen               NULL            NULL
White Pawn        Foreign               NULL            NULL 
```

您可以在此处看到**Ronald Regan**有*两个*可以求助的已配置处理程序。尽管：

*   克拉维茨夫人，和
*   白典当

没有他们可以通知的处理程序*。*

所以我现在想要的是处理程序的后备列表。如果您是代理`Politician`或`Foreign`代理，我们希望您回退**`FBI`**处理程序。这意味着理想情况下我的结果集将是：

```
RatName           RatType               GmanName        HandlerID
=============     ==============        ==============  =========
Ronald Regan      Politician            Charles Cabell  2
Ronald Regan      Politician            Allen Dulles    3
Sal Vitale        MOB                   J. Edgar        1
Elia Kazan        Famous                J. Edgar        1 
Mrs. Kravitz      Citizen               NULL            NULL
White Pawn        Foreign               J. Edgar        1 
```

那是我的问题，我需要加入[**早期加入不匹配任何内容*的***标准。](https://stackoverflow.com/questions/12503709/force-partial-join-order-in-sql-server)

* * *

## 问题

我试图避免的问题是：

*   主要案例连接`Politicians`到`FBI`
*   备份案例加入`Politicians`到`CIA`

我最终是这样的：

```
RatName           RatType               GmanName        HandlerID
=============     ==============        ==============  =========
Ronald Regan      Politician            Charles Cabell  2
Ronald Regan      Politician            Allen Dulles    3
Ronald Regan      Politician            J. Edgar        1
Sal Vitale        MOB                   J. Edgar        1
Elia Kazan        Famous                J. Edgar        1 
Mrs. Kravitz      Citizen               NULL            NULL
White Pawn        Foreign               J. Edgar        1 
```

**罗纳德·里根（Ronald Regan**）获得了一个新的“*后备”*条目，当时他已经有人要向他报告。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T21:30:40.680

我想有点晚了，但我建议：

*   使用规范化模式
*   使用类型的查找表并引用它们
*   为回退规则使用多对多联结表
*   允许许多后备选项
*   避免将逻辑放入代码中——将其放入数据中

这是架构设置脚本：

```
-- Setup test data
create table InformantTypes (
    Type varchar(20) not null primary key
)
insert into InformantTypes select 'Politician'
insert into InformantTypes select 'MOB'
insert into InformantTypes select 'Famous'
insert into InformantTypes select 'Citizen'
insert into InformantTypes select 'Foreign'

create table HandlerTypes (
    Type varchar(20) not null primary key
)
insert into HandlerTypes select 'FBI'
insert into HandlerTypes select 'CIA'
insert into HandlerTypes select 'Congressman'
insert into HandlerTypes select 'Police'
insert into HandlerTypes select 'NSA'

create table InformantTypesToHandlerTypes (
      InformantType varchar(20) not null references InformantTypes (Type)
    , HandlerType varchar(20) not null references HandlerTypes (Type)
    , Ordinal int not null
)
insert into InformantTypesToHandlerTypes select 'Politician', 'CIA', 1
insert into InformantTypesToHandlerTypes select 'MOB', 'FBI', 1
insert into InformantTypesToHandlerTypes select 'Famous', 'FBI', 1
insert into InformantTypesToHandlerTypes select 'Citizen', 'Police', 1
insert into InformantTypesToHandlerTypes select 'Foreign', 'NSA', 1
insert into InformantTypesToHandlerTypes select 'Politician', 'FBI', 2
insert into InformantTypesToHandlerTypes select 'Foreign', 'FBI', 2

create table Informants (
      Name varchar(50) not null primary key
    , Type varchar(20) not null references InformantTypes (Type)
)
insert into Informants select 'Ronald Regan', 'Politician'
insert into Informants select 'Sal Vitale', 'MOB'
insert into Informants select 'Elia Kazan', 'Famous'
insert into Informants select 'Mrs. Kravitz', 'Citizen'
insert into Informants select 'White Pawn', 'Foreign'

create table Handlers (
      HandlerID int not null primary key
    , Name varchar(50) not null unique
    , HandlerType varchar(20) not null references HandlerTypes (Type)
)
insert into Handlers select 1, 'J. Edgar', 'FBI'
insert into Handlers select 2, 'Charles Cabell', 'CIA'
insert into Handlers select 3, 'Allen Dulles', 'CIA'
insert into Handlers select 7, 'Joe McCarthy', 'Congressman' 
```

这是实际的查询（它精确地返回 OP 的输出）：

```
-- Actual Query
;with cte as (
    select RatName, RatType, GmanName, HandlerID, DenseRank
    from (
        select
            i.Name AS RatName,
            i.Type AS RatType,
            h.Name AS GmanName,
            h.HandlerID,
            dense_rank() over (partition by i.Name order by ordinal) as DenseRank
        from Informants i
            join InformantTypesToHandlerTypes tt on i.Type = tt.InformantType
            join Handlers h on tt.HandlerType = h.HandlerType
    ) as a
    where DenseRank = 1 -- This bit keeps Reagan from going to the FBI
)
-- Get informants with their first available handler option
select RatName, RatType, GmanName, HandlerID
from cte
-- Get informants with no available handler option
union all
select i.Name, i.Type, null, null
from Informants i
where i.Name not in (select RatName from cte)
order by RatName 
```

作为一点解释，以下是该查询的作用：

*   就像 OP 一样，我们`Informants`加入`Handlers`基于`Type`. 我们只是在[CTE](http://msdn.microsoft.com/en-us/library/ms190766.aspx)内部进行，因为我们想轻松地多次使用它（CTE 实际上是一个临时视图，派生表、表变量或临时表可以同样轻松地工作）。
*   我们不是根据复杂开关中的硬编码规则（如果业务需求发生变化，必须维护）将 Informants 连接到 Handlers，而是基于我们创建的多对多连接表这样做。任何用户现在都可以轻松更改他们认为合适的规则。
*   然后我们添加一个排名函数，让我们知道我们可用的主要和后备处理程序选项。我们可以简单地选择每个 Informant 可用的排名最高的选项，这样我们就不会不必要地显示不必要的后备选项。
*   一旦我们建立了这组数据，我们就可以从中选择以显示我们所有的 Informant 以及可用的处理程序。
*   现在很容易通过获取（使用联合）不在 CTE 中的任何 Informant 来获取没有可用 Handler 的剩余 Informant。

可能还有其他方法可以做到这一点，但这就是我这次的思考过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:33:56.463

首先，我建议您添加一个表来保留规则，如

```
 InformantRules
Type         PrimRatType SecRatType
Politicians   CIA           CIA 
Mobsters      FBI 
Famous        FBI 
Citizens      Police 
Foreign       NSA           CIA 
```

然后你可以写

```
Select i.Name, i.Type, 
   Coalesce (p.Name, s.Name) ContactName
From Informants i
   Join InformantRules r On r.Type = i.Type
   Left Join Handlers p on p.HandlerId 
         = (Select Min(HandlerId) 
            From Handlers 
            Where HandlerType = r.PrimRatType)
   Left Join Handlers s on s.HandlerId 
         = (Select Min(HandlerId) 
            From Handlers 
            Where HandlerType = r.SecRatType) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T20:51:50.353

你可以稍微改变你的加入条件：

```
SELECT 
   Informants.Name AS RatName,
   Informants.Type AS RatType,
   Handlers.Name AS GmanName,
   Handlers.HandlerID 
FROM Informants
   LEFT JOIN Handlers
   ON 
    (
      (Informants.Type IN ('Politician') AND (Handlers.HandlerType = CASE WHEN EXISTS (SELECT TOP 1 1 FROM Handlers WHERE HandlerType = 'CIA') THEN 'CIA' ELSE 'FBI' END))
      OR  
      (Informants.Type IN ('MOB', 'Famous') AND Handlers.HandlerType = 'FBI')
      OR
      (Informants.Type IN ('Citizen') AND Handlers.HandlerType = 'Police')
      OR
      (Informants.Type IN ('Foreign') AND (Handlers.HandlerType = CASE WHEN EXISTS (SELECT TOP 1 1 FROM Handlers WHERE HandlerType = 'NSA') THEN 'NSA' ELSE 'FBI' END))
    ) 
```

# c# - 如何在 C# 中将表单设置为具有透明背景？

> ID：12716389
> 
> 赞同：-2
> 
> 时间：2012-10-03T20:28:52.890
> 
> 标签：c#, winforms

我想将表单的背景设置为透明，但遇到错误“属性值无效”。不知道有没有简单的方法可以在windows中将透明背景图片设置为表单？

我正在尝试制作 ac# windows 窗体应用程序。

我还不能上传图片。例如，我想运行我的应用程序并查看一本书的图片（没有任何白色背景边框），包括工具

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T21:26:38.293

这是一个代码，可以帮助您实现您想要做的事情。以下代码将使表单透明，但使控件可见。**如果你也想隐藏控件，我建议你将表单不透明度设置为 0%**

```
this.BackColor = Color.White;
this.TransparencyKey = Color.White; 
```

谢谢，

我希望这有帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:40:40.627

假设您使用的是 Windows 窗体，请将不透明度设置为 0.0 到 1.0 之间的任何值。具有 0.0（完全透明）和 1.0（完全不透明）。

```
form.Opacity = 0.0; 
```

MSDN 来源：[如何创建透明表单](http://msdn.microsoft.com/en-us/library/czke9azk%28v=vs.80%29.aspx)。

# linux - 从linux中的分隔文件中删除一列

> ID：12716392
> 
> 赞同：9
> 
> 时间：2012-10-03T20:29:00.933
> 
> 标签：linux, unix, awk, sed

我有一个格式如下的文件：

```
col1|col2|col3|col4
a|b|c|d
e|f||h
i|j|k|l 
```

我想从标题和数据中删除 col3（带有分隔符“|”）。这可以使用 awk/sed 完成吗？

请注意 col3 中的数据可能为空（第 2 行）。

输出应该是：

```
col1|col2|col4
a|b|d
e|f|h
i|j|l 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-03T20:49:01.677

你可以简单地使用`cut`.

```
cut -d'|' -f1-2,4- file 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T22:28:59.937

这可能对您有用（GNU sed）：

```
sed 's/[^|]*|//3' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T21:25:12.110

使用`cut`是正确的答案，但如果你真的想使用`awk`它比 Kent 显示的更容易：

```
awk -F'|' 'BEGIN {OFS="|"} {for (n=3; n < NF; ++n) $n = $(n+1); --NF; print}' 
```

只需在`$3`down 后将字段洗牌，然后通过更改`NF`您的值来更改字段数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-04T11:49:49.527

cut 命令将有助于实现这一目标

```
 cat filname | cut -d'|' -f1,2,4 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T20:42:29.133

```
awk  'BEGIN{FS=OFS="|"}{print $1,$2,$4}'   file 
```

应该给你输出。

这是非常基本的 awk 用法。

**编辑**

你没有提到 70 列... :(

尝试这个：

```
awk  -F'|' '{s="";for(i=1;i<=NF;i++){f=(NF==i)?"":FS;if(i!=3)s=s $i f;}print s}' file 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-03T21:04:12.747

这是一个可能的 sed 解决方案：

```
sed -i.bak filename -e 's;\(^.*|.*|\).*|\(.*\);\1\2;' 
```

这对您的示例非常有用，并且可以针对其他示例进行调整，但并不是真正的通用解决方案。

解释：

`-i.bak`就地编辑文件，首先制作一个名为`filename.bak`.

`\(^.*|.*|\)`从行首开始，匹配直到并包括第二个分隔符的所有内容。括号将此匹配分组（第 1 组）。

`.*|`匹配直到并包括最后一个分隔符的所有内容。

`\(.*\)`匹配其余和组（第 2 组）。

`\1\2`用第 1 组和第 2 组中的文本替换所有先前的匹配项。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-01T08:40:41.107

如果您有很多列，另一种`awk`解决方案可能会很有用

```
awk -F'|'  '{$3="";$0=$0;$3=$3}1' FPAT='[^|]+' OFS='|' file 
```

# r - 基于分隔符在 R 中拆分 data.frame 单元格

> ID：12716393
> 
> 赞同：0
> 
> 时间：2012-10-03T20:29:03.570
> 
> 标签：r

我有一个这样的数据框：

```
x

TicketID   Application     Impacted_Systems
1          Web             Online; PeopleSoft, Financials
etc 
```

我喜欢做的是基于 x$Impacted_Systems 创建另一个 data.frame 将每个项目用“;”分隔 到它自己的列，然后将它与数据框 x 结合起来绘制它。

到目前为止我有这个：

```
data.frame(do.call('rbind', strsplit(as.character(x$Impacted_Systems),';'))) 
```

这将为每个字符串创建由“;”分隔的列 两次：

```
X1      X2       X3       X4       X5   X6      X7
1   Online  PeopleSoft Financials   Online  PeopleSoft Financials           Online 
```

任何想法我做错了什么？在这种特殊情况下，应该只有 3 列，而不是 7 列。

我试过这个

```
p<-colsplit(x$Impacted_Systems, ";") 
```

这是期待名称选项。问题是受影响系统的数量会有所不同，它不是固定的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T21:02:33.623

```
# some example data
df <- data.frame(Impacted_Systems = c("foo;bar", "foo;bar1;bar2", "foo;bar1;bar2;bar4;bar4"))

library(plyr)
library(reshape2)
split_names <- llply(as.list(df$Impacted_Systems), function(x){
                split_data <- data.frame(rbind(strsplit(x, ";")[[1]]))
                names(split_data) <- paste0("Impacted_Systems", 1:length(strsplit(x, ";")[[1]]))
                split_data
    })

> cbind(df, ldply(split_names))
         Impacted_Systems Impacted_Systems1 Impacted_Systems2
1                 foo;bar               foo               bar
2           foo;bar1;bar2               foo              bar1
3 foo;bar1;bar2;bar4;bar4               foo              bar1
  Impacted_Systems3 Impacted_Systems4 Impacted_Systems5
1              <NA>              <NA>              <NA>
2              bar2              <NA>              <NA>
3              bar2              bar4              bar4 
```

# entity-framework - 数据读取器与 Entity Framework 5 的指定字段不兼容

> ID：12716395
> 
> 赞同：3
> 
> 时间：2012-10-03T20:29:14.653
> 
> 标签：entity-framework

我在使用 EF 5 时遇到了以下错误，并在网上对其进行了大力研究，并认为这只是一个映射问题。我检查过的一切都很好。

有人可以根据以下信息告诉我错误可能是什么？？？

> 数据读取器与指定的“VisionModel.sSRPTFundexDocCodes1_Test_Result”不兼容。类型的成员“NumEmployeesatApp1”在数据读取器中没有同名的对应列。

当我调试下面的代码片段时，就在我得到上述错误之后。

```
return ((IObjectContextAdapter)this).ObjectContext.ExecuteFunction<sSRPTFundexDocCodes1_Test_Result>("sSRPTFundexDocCodes1_Test", subscriberIDParameter, applicationNumParameter); 
```

进入存储过程的参数是可以的。

映射就好了。左边的映射是：`NumEmployeesatApp`和右边完全一样。

我完全删除了我的 EDMX 文件并从头开始创建它，但发生了同样的错误。当我从函数中执行“获取列信息”时，列名与上述存储过程中的内容完全相同。

从 EDMX 文件 (Vision) 和上面的存储过程生成的模板具有完全匹配的列。

顺便说一句，我可以毫无问题地从 EF 5 模型中运行其他`INSERT`和LINQ 查询。`SELECT`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-11T17:11:33.880

如果您使用带有输出参数的存储过程，我遇到了同样的问题，您需要在函数导入中将返回类型标记为 NONE。这很奇怪，但它有效。

# facebook - Facebook 发帖到用户墙，图片出现两次

> ID：12716396
> 
> 赞同：1
> 
> 时间：2012-10-03T20:29:17.750
> 
> 标签：facebook, posts

从一个 iPhone 应用程序，我正在向用户 Facebook 墙发帖。帖子在时间轴中出现两次，第一次带有（地球）指示器，第二次带有好友指示器。时间是相同的时间，或者偶尔相隔一秒。为什么会发生这种情况，我该如何消除这种情况？

# haskell - 在 Haskell 中，我如何获取一个 m 元谓词和一个 n 元谓词并构造一个 (m+n) 元谓词？

> ID：12716397
> 
> 赞同：7
> 
> 时间：2012-10-03T20:29:21.707
> 
> 标签：haskell, typeclass, polyvariadic

今天，我尝试使用类型类来归纳构造任意数量的谓词的函数，将任意类型的任意组合作为输入，返回相同类型但应用了一些基本操作的其他谓词。例如

```
conjunction (>2) even 
```

将返回一个谓词，该谓词对于大于 2 的偶数计算为真，并且

```
conjunction (>=) (<=) 
```

会返回=

一切都很好，让这部分工作，但它提出了一个问题，如果我想将两个谓词的连接定义为一个谓词，每个连接谓词的每个输入都需要一个输入，该怎么办？例如：

```
:t conjunction (>) not 
```

将返回 Ord a => a -> a -> Bool -> Bool。这可以做到吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T21:14:42.530

我们将需要`TypeFamilies`这个解决方案。

```
{-# LANGUAGE TypeFamilies #-} 
```

这个想法是`Pred`为 n 元谓词定义一个类：

```
class Pred a where
  type Arg a k :: *
  split :: a -> (Bool -> r) -> Arg a r 
```

问题在于重新调整谓词的参数，所以这就是该类的目标。关联类型应该通过将 final替换`Arg`为 来访问 n 元谓词的参数，所以如果我们有一个类型`Bool``k`

```
X = arg1 -> arg2 -> ... -> argn -> Bool 
```

然后

```
Arg X k = arg1 -> arg2 -> ... -> argn -> k 
```

这将允许我们构建正确的结果类型，`conjunction`以收集两个谓词的所有参数。

该函数`split`接受类型的谓词和类型`a`的延续，`Bool -> r`并将产生一些类型的东西`Arg a r`。的想法`split`是，如果我们最终知道如何处理`Bool`从谓词中获得的 ，那么我们可以`r`在两者之间做其他事情 ( )。

毫不奇怪，我们需要两个实例，一个用于`Bool`目标已经是谓词的函数：

```
instance Pred Bool where
  type Arg Bool k = k
  split b k = k b 
```

A`Bool`没有参数，所以`Arg Bool k`简单地返回`k`。此外，对于`split`，我们已经`Bool`有了，所以我们可以立即应用延续。

```
instance Pred r => Pred (a -> r) where
  type Arg (a -> r) k = a -> Arg r k
  split f k x = split (f x) k 
```

如果我们有一个类型的谓词`a -> r`，则`Arg (a -> r) k`必须以开头`a ->`，然后我们继续`Arg`递归调用 on `r`。对于`split`，我们现在可以采用三个参数，即`x`类型的存在`a`。`x`我们可以喂给`f`然后调用`split`结果。

一旦我们定义了`Pred`类，就很容易定义`conjunction`：

```
conjunction :: (Pred a, Pred b) => a -> b -> Arg a (Arg b Bool)
conjunction x y = split x (\ xb -> split y (\ yb -> xb && yb)) 
```

该函数接受两个谓词并返回一些类型`Arg a (Arg b Bool)`。让我们看一下这个例子：

```
> :t conjunction (>) not
conjunction (>) not
  :: Ord a => Arg (a -> a -> Bool) (Arg (Bool -> Bool) Bool) 
```

GHCi 没有扩展这种类型，但我们可以。类型等价于

```
Ord a => a -> a -> Bool -> Bool 
```

这正是我们想要的。我们也可以测试一些例子：

```
> conjunction (>) not 4 2 False
True
> conjunction (>) not 4 2 True
False
> conjunction (>) not 2 2 False
False 
```

请注意，使用`Pred`该类，编写其他函数（如`disjunction`）也很简单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T20:51:14.303

```
{-# LANGUAGE TypeFamilies #-}

class RightConjunct b where
  rconj :: Bool -> b -> b

instance RightConjunct Bool where
  rconj = (&&)

instance RightConjunct b => RightConjunct (c -> b) where
  rconj b f = \x -> b `rconj` f x

class LeftConjunct a where
  type Ret a b
  lconj :: RightConjunct b => a -> b -> Ret a b

instance LeftConjunct Bool where
  type Ret Bool b = b
  lconj = rconj

instance LeftConjunct a => LeftConjunct (c -> a) where
  type Ret (c -> a) b = c -> Ret a b
  lconj f y = \x -> f x `lconj` y

conjunction :: (LeftConjunct a, RightConjunct b) => a -> b -> Ret a b
conjunction = lconj 
```

希望它是不言自明的，但如果没有，请随时提出问题。

另外，当然，您可以将两个类合并为一个，但我觉得这两个类使这个想法更加清晰。

# jquery - 滑动后的 Slider jQuery UI 方法

> ID：12716399
> 
> 赞同：4
> 
> 时间：2012-10-03T20:29:34.413
> 
> 标签：jquery, jquery-ui, slider

我有下一个问题。我使用 jQueryUI 的滑块，它工作得很好，但我想做的是当我移动滑块并释放鼠标时做一些事情。

问题是，如果它有 5 个值，从 0 到 4，如果我从 0 移动到 4，它会加载一个函数 4 次。

```
 $('#sliderTime').slider({
            orientation: 'horizontal',
            value:1,
            min: 0,
            max: 5,
            step: 1,
            animate: true,
            slide: function( event, ui ) {
                var value = ui.value;               
                dostuff(value);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T20:36:26.667

改变：

```
slide: function( event, ui ) {
    var value = ui.value;               
    dostuff(value);
} 
```

至

```
stop: function( event, ui ) {
    var value = ui.value;               
    dostuff(value);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T20:33:33.393

可能您使用`"change"`event 而不是`"stop"`.

# jquery - 在 aspx 的菜单中突出显示当前页面

> ID：12716410
> 
> 赞同：0
> 
> 时间：2012-10-03T20:31:01.740
> 
> 标签：jquery, asp.net, menu

我想突出显示当前页面。尝试了此代码但无法正常工作..任何帮助将不胜感激和感激..

```
$(function() {
    $("#site-menu li a").click(function() {
        $(".current").removeClass("current");
        //"this" is the element clicked on
        $(this).addClass("current");
    });
});​ 
```

```
<div id="menu">
     <ul id="site-menu">
          <li><a href="Home_Page.aspx">home</a></li>
          <li><a href="Services.aspx">services</a></li>
          <li><a href="About_Us.aspx">about us</a></li>
          <li><a href="Contact_Us.aspx">contact us</a></li>
     </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:49:35.813

我认为你应该从这个开始：

```
$(function() {
    var curPage = location.pathname.substring(location.pathname.lastIndexOf("/") + 1);
    $("#site-menu li a[href='" + curPage + "']").addClass("current");
});​ 
```

当它没有出现在 URL 中时，只需改进此脚本以使其与默认页面（我认为它将是 Home_Page.aspx）一起正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:34:13.157

试试这个

```
$(function() {
    $("#site-menu li a").click(function(e) {
        e.preventDefault();
        $(".current").removeClass("current");
        //"this" is the element clicked on
        $(this).addClass("current");
    });
});​ 
```

还要确保你的 CSS [FIDDLE中有](http://jsfiddle.net/sushanth009/q2NEK/1/)**.current类**

当我使用 e.preventDefault(); 时似乎正在工作。

也许该类在回发时被渲染回默认 HTML ..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T20:37:28.507

我在这里创建了一个小提琴，展示了一个工作示例。

[http://jsfiddle.net/psDBP/](http://jsfiddle.net/psDBP/)

试试这个（也见我的评论）：

```
$(function() {
    // change to on rather than deprecated click
    $("#site-menu li a").on("click", function(e) { 
        e.preventDefault(); // stops the a href firing
        $(".current").removeClass("current");
        //"this" is the element clicked on
        $(this).addClass("current");
    });
});​ 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-03T20:45:45.267

你也可以试试

```
 $("#site-menu li a").live('click',function() {
        $(".current").removeClass("current");
        //"this" is the element clicked on
        $(this).addClass("current");
    }); 
```

在你的里面`$(document).ready(function(){})`；

# oracle - Pro*C 中的 SQLCA.SQLERRD 主机数组

> ID：12716411
> 
> 赞同：4
> 
> 时间：2012-10-03T20:31:08.240
> 
> 标签：oracle, oracle-pro-c

正如我们所知道的，在许多文档中都提到了 Host 数组的第三个元素，`SQLCA.SQLERRD`即`sqlca.sqlerrd[2]`包含到目前为止 SQL 语句处理的累积行数（就 Pro*C 而言）。

有人知道其他元素 ie 的重要性`[0]`，`[1]`以及它们的含义吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T20:45:02.163

根据[错误处理文档](http://docs.oracle.com/cd/E18283_01/appdev.112/e10825/pc_09err.htm#g30970)，他们什么都不做；它们保留供将来使用，尽管它们开始看起来不太可能真正被使用。`sqlerrd`被声明为`long[6]`，但只是`[2]`并且`[4]`似乎被使用，后者是 SQL 语句中的偏移量，用于解析错误。

有趣的是，他们不使用 [0]、[1] 或 [3]；想知道它们是否在早期版本中用于其他用途。[这个旧的 informix 链接](http://publib.boulder.ibm.com/infocenter/idshelp/v10/index.jsp?topic=/com.ibm.sqlt.doc/sqltmst189.htm)具有类似的结构，对于`[2]`and具有类似的含义`[4]`，因此可能会暗示他们希望将其他链接用于什么；但可能是毫无意义的巧合……

[PostgreSQL 和DB2](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=%2Fcom.ibm.db2z9.doc.sqlref%2Fsrc%2Ftpc%2Fdb2z_sqlcommunicationsareaintro.htm)[似乎有相同的结构](http://www.postgresql.org/docs/9.1/static/ecpg-errors.html#ECPG-SQLCA)，而[SQL Server](http://msdn.microsoft.com/en-us/library/aa225204%28v=sql.80%29.aspx)有一些看起来相关的东西。它开始看起来可疑地像一个标准......尽管甲骨文只是部分遵守。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-04T23:17:02.363

摘自“Informix Guide to SQL”（1998 年 2 月）：

（'First'、'Second' 等，因为并非所有语言都索引以 0 开头的数组。）

首先 - 在 SELECT、UPDATE、INSERT 或 DELETE 语句的成功 PREPARE 语句之后，或在打开选择游标之后，此字段包含估计的受影响行数。

第二 - 当 SQLCODE 包含错误代码时，此字段包含零或附加错误代码，称为 ISAM 错误代码，它解释了主要错误的原因。在单行成功插入操作后，此字段包含为该行生成的任何 SERIAL 值的值。

第三 - 在成功的多行插入、更新或删除操作之后，此字段包含已处理的行数。在以错误结束的多行插入、更新或删除操作之后，此字段包含在检测到错误之前成功处理的行数。

第四 - 在 SELECT、UPDATE、INSERT 或 DELETE 语句的成功 PREPARE 语句之后，或在打开选择游标之后，此字段包含估计的磁盘访问权重总和和处理的总行数。

第五 - 在 PREPARE、EXECUTE IMMEDIATE、DECLARE 或静态 SQL 语句中出现语法错误后，此字段包含语句文本中检测到错误的偏移量。

第六 - 在成功获取选定行或成功插入、更新或删除操作后，此字段包含已处理的最后一行的 rowid（物理地址）。此 rowid 值是否对应于数据库服务器返回给用户的行取决于数据库服务器如何处理查询，特别是对于 SELECT 语句。

# c# - 以单独的缩略图显示媒体库中的图片

> ID：12716412
> 
> 赞同：0
> 
> 时间：2012-10-03T20:31:11.270
> 
> 标签：c#, windows-phone-7

这就是我所拥有的

```
 MediaLibrary m = new MediaLibrary();

        foreach (var r in m.Pictures)
        {
            Stream imageStream = r.GetImage();

            var imageToShow = new Image()
            {

                Source = PictureDecoder.DecodeJpeg(r.GetImage())
            };

            lstImageFromMediaLibrary.Items.Add(imageToShow);
        } 
```

和 xaml 代码

```
 <ListBox Height="260" HorizontalAlignment="Left" Margin="6,141,0,0" 
            Name="lstImageFromMediaLibrary" VerticalAlignment="Top" Width="442" >                 
              <Image Name="imageTo" 
                DataContext="{Binding ElementName=lstImageFromMediaLibrary}">
              </Image>        
    </ListBox> 
```

现在列表框以可滚动的形式显示检索到的图像，但我想要两个并排放置两个图像并继续向下滚动，就像在图片中心的相册视图中一样。任何输入都非常受欢迎。

也有人可以解释上面代码的每一行吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T03:06:09.973

您可以使用Silverlight[工具包中的](http://silverlight.codeplex.com/releases/view/55034)[WrapPanel](http://debugmode.net/2011/12/03/how-to-work-with-wrappanel-in-windows-phone-7/)

将您的 Listbox xaml 代码修改为类似这样

```
<ListBox Height="260" HorizontalAlignment="Left" Margin="6,141,0,0" 
        Name="lstImageFromMediaLibrary" VerticalAlignment="Top" Width="442" >
   <ListBox.ItemsPanel>
      <ItemsPanelTemplate>
         <toolkit:WrapPanel ItemWidth="200" ItemHeight="200"/>
      </ItemsPanelTemplate>
   </ListBox.ItemsPanel>

      <Image Name="imageTo" 
         DataContext="{Binding ElementName=lstImageFromMediaLibrary}">
      </Image>        
</ListBox> 
```

相应地调整 ItemWidth 和 ItemHeight 属性以适合您的图像。

# wpf - WPF - 当我调整窗口大小时按钮不移动

> ID：12716413
> 
> 赞同：3
> 
> 时间：2012-10-03T20:31:29.083
> 
> 标签：wpf, xaml

这是 XAML。两个问题。首次打开窗口时，底部的 2 个按钮都被切掉，右侧的“Save_Search”按钮也被切掉。第二个问题是，当我调整窗口大小时，列表视图会像我预期的那样变长，但按钮都最终位于列表视图的中间，而不是相对于窗口边框移动。当我搜索这个时，没有太多。

```
 Title="Queries" Height="274" Width="540">

<DockPanel Height="Auto" HorizontalAlignment="Stretch" Name="dockPanel1" VerticalAlignment="Stretch" Width="Auto">
    <Grid Height="Auto" Width="Auto" Margin="0,0,0,0">

        <TextBox Height="27" HorizontalAlignment="Left" Margin="256,6,0,0" Name="SearchTermsTextBox" VerticalAlignment="Top" Width="227" 
                  Text="Enter search terms separated by `;`"/>

        <ListView Name="ResultsListView" Margin="6,41,13,48"    ItemsSource="{Binding}" Width="auto">
            <ListView.GroupStyle>
                <GroupStyle>
                    <GroupStyle.HeaderTemplate>
                        <DataTemplate>
                            <TextBlock FontSize="15" FontWeight="Bold" Text="{Binding Name}"/>
                        </DataTemplate>
                    </GroupStyle.HeaderTemplate>
                </GroupStyle>
            </ListView.GroupStyle>

            <ListView.ItemContainerStyle>
                <Style TargetType="{x:Type ListViewItem}">
                    <Setter Property="BorderThickness" Value="1" />
                    <Setter Property="Width" Value="Auto" />
                    <Setter Property="FontSize" Value="10.4"  />
                </Style>
            </ListView.ItemContainerStyle>
        </ListView>

        <Button Content="Save Search" Margin="425,203,12.6,17.6"  Name="Save_Search"  Width="96" Height="25"  />
        <Button Name="Query_Button" Content="Ports" Margin="310,203,127.6,0" Height="25" Width="96" VerticalAlignment="Top"></Button>
    </Grid>

</DockPanel> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T20:42:21.757

默认情况下`HorizontalAlignment`，`VerticalAlignment`两者都设置为根据给定的边距拉伸控件。这会在您的情况下导致不正确的行为，因为尽管调整了网格的大小，控件仍绑定到边距中指定的位置。

为了修复它，设置`HorizontalAlignment`为`Right`和`VerticalAlignment`。`Bottom`这将使按钮粘在右侧和底部边框上。

您还应该修改边距值，使其具有`0`左边距和上边距的值，因此即使`Grid`尺寸小于*425, 203*也可以显示按钮。否则，可能只有部分按钮或没有按钮可见。

尝试对按钮使用以下代码：

```
<Button Content="Save Search" Margin="0,0,12.6,17.6"  Name="Save_Search"  Width="96" Height="25" HorizontalAlignment="Right" VerticalAlignment="Bottom" />
<Button Name="Query_Button" Content="Ports" Margin="0,0,127.6,0" Height="25" Width="96" HorizontalAlignment="Right" VerticalAlignment="Bottom"></Button> 
```

# iphone - 在 UIViewController 的 loadView 中使用什么尺寸？

> ID：12716415
> 
> 赞同：2
> 
> 时间：2012-10-03T20:31:30.507
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ios6

我的容器将在其视图层次结构`UIViewController`中添加另一个视图。`CustomViewController`它首先创建控制器，然后调整其视图的大小，最后将其添加到其视图中。

```
 //create the controller
    customController = [[CustomViewController alloc] initWithNibName:nil bundle:nil];
    [customController willMoveToParentViewController:self];
    [self addChildViewController:customController];
    [customController didMoveToParentViewController:self];

    //size and position the controller's view 
    customController.view.frame = CGRectMake(10, 10, 100, 50);

    //add the new controller's view
    [self.view addSubview:customController.view];
    [customController didMoveToParentViewController:self]; 
```

重新调整大小部分是我的问题。

以`CustomViewController`编程方式在 中创建其视图`loadView`，其中添加了许多子视图。由于 CustomViewController 并不真正知道它的视图最终将如何调整大小/定位，因此它简单地使用初始化`init`（不提供框架）。

这对于简单的 UIView 来说效果很好，但是一旦我添加了子视图，我就会遇到问题。由于框架是 CGRectZero，因此将这些子视图放置在“loadView”中不会真正起作用。此外，一旦我设置了自动调整大小的蒙版以确保它正确缩放，最终结果是所有子视图都增长到占据整个视图。可能是因为子视图的坐标都是视图框架的100%（因为视图的框架是CGRectZero）。

简而言之，我应该使用什么尺寸的框架`loadView`？我是否应该假设我期望视图占据的典型视图大小？还是有更好的方法允许我添加子视图但推迟控制器视图的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T21:04:03.307

UIViewController 的视图在 viewWillAppear 方法（UIViewController 的生命周期方法）中具有实际大小。所以你可以继承 UIViewController 类并在那里布局你的子视图。

但是，我想给你一些建议。您应该使用视图控制器的 loadView 方法来创建它的视图。否则你可能会遇到内存管理问题和视图布局问题。在 init 方法中调用视图属性并不是一个好主意，因为它会自动调用 UIViewController 的 loadView 方法。

阅读有关 UIViewController 生命周期的更多信息。[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

我的建议：使用父 UIViewController 的 loadView 来创建它的视图。viewWillAppear 中的布局视图。

祝你好运！如果您有任何问题，请询问更多：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:51:38.567

您可以设置子视图相对于它们的父视图的框架。喜欢

```
subview.frame = CGPointMake(self.view.frame.size.width *0.2,  self.view.frame.size.height *0.2, self.view.frame.size.width *0.8, self.view.frame.size.height *0.8); 
```

# java - 如果不推荐使用 jstat，我应该改用什么？

> ID：12716416
> 
> 赞同：3
> 
> 时间：2012-10-03T20:31:30.667
> 
> 标签：java, jstat

突然我发现它`jstat` [已被弃用](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jstat.html)：

> jstat 工具显示已检测的 HotSpot Java 虚拟机 (JVM) 的性能统计信息。目标 JVM 由其虚拟机标识符或下面描述的 vmid 选项标识。
> 
> 注意：此实用程序不受支持，并且在 J2SE SDK**的未来版本中可能不可用。**它目前在 Windows 98 和 Windows ME 平台上不可用。

多年来我没有在 Windows 上开发任何东西，但问题是 - 我应该使用什么来代替，现在哪种工具（或一组工具）被认为是我可以使用的那种监视的最佳替代品`jstat`？

**更新：**最好使用纯 CLI 工具。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T20:47:03.777

文档说它自 JDK 5（您链接）以来不受支持（尚未完全弃用），但它仍然存在于 JDK 6、7 和 OpenJDK 8 中。我不太担心它在短期内消失，尤其是因为它没有替代品（[jcmd](http://docs.oracle.com/javase/7/docs/technotes/tools/share/jcmd.html)没有等效的命令）。

此外，[工具和实用程序目录](http://docs.oracle.com/javase/7/docs/technotes/tools/index.html#monitor)*表示*支持，但 Windows 98 和 ME 除外。然后它又在上面说它不受支持和实验性..

* * *

不过有一个警告：上次我检查时，它不支持 G1，但是 JConsole/JVisualVM 也不支持。这并不意味着它不能适应。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T20:32:44.777

我认为您可以选择[VisualVM](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/index.html)（或）[Jconsole](http://docs.oracle.com/javase/1.5.0/docs/guide/management/jconsole.html)

两者都是 JVM 监控的好工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T20:32:57.853

我会推荐用于 Sun JVM 的 Visual VM。从 SourceForge 获取最新版本并安装*所有*插件。您会对线程、CPU、内存等的可视化表示感到满意。

# linux - 可以在内核模式之外进入 x64 32 位“长兼容性子模式”吗？

> ID：12716419
> 
> 赞同：13
> 
> 时间：2012-10-03T20:31:45.453
> 
> 标签：linux, x86-64, kernel, compatibility-mode

这可能与 [是否可以通过模式切换在 64 位进程中执行 32 位代码完全一样？](https://stackoverflow.com/questions/5081203/is-it-possible-to-execute-32-bit-code-in-64-bit-process-by-doing-mode-switching)，但这个问题是一年前的问题，只有一个没有给出任何源代码的答案。我希望得到更详细的答案。

我正在运行 64 位 Linux（Ubuntu 12.04，如果重要的话）。这是一些分配页面的代码，将一些 64 位代码写入其中，然后执行该代码。

```
#include <assert.h>
#include <malloc.h>
#include <stdio.h>
#include <sys/mman.h>  // mprotect
#include <unistd.h>  // sysconf

unsigned char test_function[] = { 0xC3 };  // RET
int main()
{
    int pagesize = sysconf(_SC_PAGE_SIZE);
    unsigned char *buffer = memalign(pagesize, pagesize);
    void (*func)() = (void (*)())buffer;

    memcpy(buffer, test_function, sizeof test_function);

    // func();  // will segfault 
    mprotect(buffer, pagesize, PROT_EXEC);
    func();  // works fine
} 
```

现在，纯粹为了娱乐价值，我想做同样的事情，但`buffer`包含任意 32 位 (ia32) 代码，而不是 64 位代码。[此页面](http://www.hardwaresecrets.com/printpage/AMD-64-bit-architecture-x86-64/56)暗示您可以通过进入“长兼容性子模式”，将 CS 段描述符的位设置为 ，在 64 位处理器上执行 32 位代码`LMA=1, L=0, D=1`。我愿意将我的 32 位代码包装在执行此设置的序言/尾声中。

但是我*可以*在 Linux 中以用户模式进行此设置吗？（BSD/Darwin 的答案也将被接受。）这是我开始对这些概念产生真正模糊的地方。我认为解决方案包括向 GDT（或者是 LDT？）添加一个新的段描述符，然后通过`lcall`指令切换到该段。但是这一切都可以在用户模式下完成吗？

这是一个示例函数，在兼容性子模式下成功运行时应返回 4，在长模式下运行时应返回 8。我的目标是获取指令指针以获取此代码路径并以`%rax=4`.

```
unsigned char behave_differently_depending_on_processor_mode[] = {
    0x89, 0xE0,  // movl %esp, %eax
    0x56,        // push %{e,r}si
    0x29, 0xE0,  // subl %esp, %eax
    0x5E,        // pop %{e,r}si
    0xC3         // ret
}; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T04:38:38.823

是的你可以。使用完全支持的接口甚至是可行的。使用 modify_ldt 将 32 位代码段安装到 LDT 中，然后设置一个指向 32 位代码的远指针，然后使用`ljumpl *(%eax)`AT&T 表示法间接跳转到它。

但是，您将面临各种混乱。堆栈指针的高位可能会被破坏。如果你真的想运行真正的代码，你可能需要一个数据段。您需要再进行一次远跳才能回到 64 位模式。

一个完整的例子在我的[linux-clock-tests](https://git.kernel.org/cgit/linux/kernel/git/luto/misc-tests.git/tree/test_vsyscall.cc)中`test_vsyscall.cc`。（它在任何发布的内核上都有点损坏：`int cc`会崩溃。你应该把它改成更聪明的东西，比如“nop”。看看`intcc32`.

# php - 用正确的语言输出 php 日期

> ID：12716427
> 
> 赞同：0
> 
> 时间：2012-10-03T20:32:13.253
> 
> 标签：php, date

> **可能重复：**
> [意大利语的 PHP 日期函数输出](https://stackoverflow.com/questions/1114488/php-date-function-output-in-italian)

我尝试强制本地更改并以法语获取日期输出的值...这不起作用：这是代码

```
setlocale(LC_ALL, 'ca_FR');
echo date("l, F d, Y"); 
```

这是服务器设置：PHP 版本 >= 5.2（5.2.16+ 最好）5.2.17 和操作系统：Linux

我需要将法语日期输出为：mercredi .....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T20:39:27.193

从[手册](http://php.net/manual/en/function.date.php)：

> 要格式化其他语言的日期，您应该使用 setlocale() 和 strftime() 函数而不是 date()。

所以使用：

```
setlocale(LC_ALL, 'ca_FR');
echo strftime("%A, %e %B, %G"); 
```

**注意**：所选语言环境也必须安装在服务器上，因此请检查是否`ca_FR`已安装语言环境。很多 linux 系统都有`fr_FR`或`fr_FR.utf8`作为法语语言环境

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T20:36:41.847

尝试使用`strftime()`而不是`date()`：[strftime 文档](http://php.net/manual/en/function.strftime.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T21:04:44.867

这是最终的工作代码

```
//Add a SHORTCODE to get date listing
add_shortcode ('getdate','get_date_listing');
   function get_date_listing ($att) {

    $outputtvar = '';

    // set the default timezone to use. Available since PHP 5.1
    date_default_timezone_set('America/Montreal');

    //ID of the post containing DATE LIST
    $req_id = 901;
    $post = get_page($req_id); 
    $content = apply_filters('the_content', $post->post_content);

    // Strip all <p> tags
    $content = str_replace( "<p>", "", $content );

    // Replace </p> with a known delimiter
    $content = str_replace( "</p>", "|", $content );

    //Separate de dates
    $contentarray = explode( '|', $content );

    //remove the last empty date
    unset($contentarray[count($contentarray)-1]);

    if (qtrans_getLanguage() == 'fr') { setlocale(LC_ALL, 'fr_CA'); $datesetting = "%A, %e %B, %G"; } 
    if (qtrans_getLanguage() == 'en') { setlocale(LC_ALL, 'en_US'); $datesetting = "%A, %B %e, %G";} 

    //prepare the outputt
    $outputtvar .= '<ul>';

    foreach ($contentarray as $key => $value) {
        $timestamp = strtotime($value);
        $localdate = strftime($datesetting,$timestamp);
        $localdate = utf8_encode($localdate);
        $outputtvar .= '<li>' . $localdate . '</li>';
    }

    $outputtvar .= '</ul>';

    return $outputtvar ;

   } 
```

# python - 定义带有多个关键字参数的 python 类

> ID：12716435
> 
> 赞同：0
> 
> 时间：2012-10-03T20:32:57.037
> 
> 标签：python

我需要定义一个将采用多个关键字参数的类。

我的代码如下所示：

```
class test1:
    def __init__(self,parm1=val1, parm2=val2):
        self.x = parm1
        self.y = parm2
        print('parm1',self.x)

def main():
    x = test1(1,2) 
```

但我得到一个`val1`未定义的错误。什么是正确的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:35:36.740

```
def __init__(self,parm1=None,parm2=None):... 
```

不确定你在用 val1 和 val2 做什么......错误告诉你这些变量不存在......所以你不能使用它们......所以让它们存在或做其他事情......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T20:35:42.330

使 val1 和 val2 成为字符串。作为变量，它们没有被定义。如果它们只是占位符，请按照其他人的建议使用 None 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T21:28:13.763

您需要在定义类*之前*`val1`定义和：`val2` *`test`*

 *```
val1 = 1
val2 = 3.141592653

class test(object):
    def __init__(self, param1=val1, param2=val2):
        self.x = param1
        self.y = param2 
```

这种方法可以有其优点（例如，如果`val1`并且`val2`应该是从环境中读取的一些通用默认值......），但不是真正可读的。最好使用类似的东西：

```
class test(object):
    def __init__(self, param1=None, param2=None):
        if param1 is None:
            self.x = val1
        else: 
            self.x = val2 
```

where 再一次，`val1`并且`val2`在定义*之前*定义`test`...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T21:37:15.360

当函数被调用时，函数参数默认值必须存在，`def`因为它们的值的副本在当时存储为函数编译代码的一部分，而不是在每次调用函数时都存储。通常，`None`在声明中用作默认值，然后在函数体中检测到它被实际（可能是动态计算的）默认值替换。*

# java - eclipse 不在目标中显示类文件夹

> ID：12716438
> 
> 赞同：2
> 
> 时间：2012-10-03T20:33:02.517
> 
> 标签：java, eclipse, spring, ant

从 Ant 完成构建后，我所有的类文件都导入到目标文件夹内的类文件夹中。我检查了类文件夹确实存在于我的文件系统中。但是，由于某种原因，eclipse 无法识别此文件夹。每次我运行 JUnit 测试时，它总是显示：

```
Class not found AbsenceReportControllerTest
java.lang.ClassNotFoundException: AbsenceReportControllerTest
at java.net.URLClassLoader$1.run(URLClassLoader.java:200
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:276)
at java.lang.ClassLoader.loadClass(ClassLoader.java:251)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.loadClass(RemoteTestRunner.java:693)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.loadClasses(RemoteTestRunner.java:429)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

该文件夹也不会显示在 eclipse 的 Package Explorer 中

我尝试投影 > 清理和重建，关闭并重新启动 Eclipse 并键入 F5，但这些方法都不起作用。

你能帮我弄清楚如何解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T20:55:29.200

我找到了解决方案，这是因为我在 eclipse 项目 > 属性中选择了该文件夹作为我的输出文件夹。我只是将它从 .classpath 文件中删除，以便我可以再次看到它。对于 eclipse kepler 。在 java 构建路径中取消选中“允许源文件夹的输出文件夹”复选框。

# javascript - 从 Node/Express 请求中使用 JSON Web 服务？

> ID：12716439
> 
> 赞同：3
> 
> 时间：2012-10-03T20:33:05.930
> 
> 标签：javascript, http, node.js, express

我有以下路线：

```
exports.index = function(req, res){
  res.render('index', { title: 'Express' });
}; 
```

我想调用以下 Web 服务：[http](http://ergast.com/api/f1/current/last/results) ://ergast.com/api/f1/current/last/results并告诉它返回 JSON。

我在索引请求中尝试过这样的事情，但它错误：

```
var options = {
  host: 'ergast.com',
  port: 80,
  path:'/api/f1/current/last/results.json'
};

http.get(options, function(response) {
  response.setEncoding('utf-8');
  console.log("Got response: " + response.statusCode);
  var data = JSON.parse(response);
}).on('error', function(e) {
  console.log("Got error: " + e.message);
}).on('data', function (chunk) {
    console.log('BODY: ' + chunk);
  }); 
```

我猜我可能在某个地方漏掉了重点。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T20:45:50.730

这应该很简单 :) 我建议您使用请求模块（npm 安装请求，或者只是将其添加到您的 packages.json 文件中）。

然后您可以执行以下操作：

```
var request = require("request");
request.get("http://ergast.com/api/f1/current/last/results.json", function (err, res, body) {
    if (!err) {
        var resultsObj = JSON.parse(body);
        //Just an example of how to access properties:
        console.log(resultsObj.MRData);
    }
}); 
```

我看到了关于使用 JSONP 而不是直接使用 JSON API 的建议。

JSONP 存在的原因是浏览器上的跨域 API。由于您在服务器上运行它，因此跨域限制不是问题，因此不需要 JSONP。无论如何，继续做你想做的事！

编辑：我不确定你为什么不试试这个。如果是为了错误管理，我现在已经用错误管理更新了代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T20:46:14.483

您提供的第一个参数`http.get`不正确。请参阅有关此功能的[node.js 文档。](http://nodejs.org/api/http.html#http_http_request_options_callback)而不是传入`options`只是将完整的 URL 作为字符串传入，例如

```
http.get('http://ergast.com/api/f1/current/last/results', function(res) {
... 
```

编辑：编辑后，`options`论点*仍然*不正确。如果要使用选项字典，请指定：

```
{ host: 'ergast.com', port: 80, path: '/api/f1/current/last/results' } 
```

# eclipse - Eclipse CDT 不再初始化符号和包含路径

> ID：12716442
> 
> 赞同：1
> 
> 时间：2012-10-03T20:33:20.210
> 
> 标签：eclipse

我在 Eclipse 中创建的任何新项目都不再包含标准库或任何符号。我所有的旧项目仍然有它们的符号和包含。我该如何解决？

# silverlight - 有条件的必填字段属性

> ID：12716444
> 
> 赞同：1
> 
> 时间：2012-10-03T20:33:32.863
> 
> 标签：silverlight, attributes, validation

我正在开发一个 Silverlight 应用程序，我有一个表单，其中根据业务规则显示一些数据字段。所有字段都是必需的，但有些字段不会一直显示。

所以，我有一个问题，`RequiredFieldAttribute`因为我无法将参数传递给它，例如条件。当我尝试保存当前数据表单时，它会抱怨这些字段不是所需的表单。

有没有解决的办法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T01:04:36.650

我最终使用了自定义验证器。

# ios5 - 适用于 iPhone 5 和旧版本的新应用程序

> ID：12716447
> 
> 赞同：0
> 
> 时间：2012-10-03T20:33:33.313
> 
> 标签：ios5, ios6, iphone-5

所以，我一直在阅读和阅读这个主题，但没有地方对我有确切的答案。如何为 iPhone5 和更早的型号提供应用程序？你只需要一个iOS5版本和一个iOS6版本吗？

任何建设性的帮助，谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T07:02:17.677

Build an app using iOS 6 as the Base SDK and use the Auto Layout feature to make screens that can scale for all type of screens. You'll need Xcode 4.5 to do this.

Get started with Auto Layout here:
[http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)
[http://www.raywenderlich.com/20897/beginning-auto-layout-part-2-of-2](http://www.raywenderlich.com/20897/beginning-auto-layout-part-2-of-2)

Other apps will also work on iPhone 5 but will have black bars on top and bottom.

# c# - 如何启用 XP Visual Style 到 winForm 控件

> ID：12716457
> 
> 赞同：2
> 
> 时间：2012-10-03T20:34:14.650
> 
> 标签：c#

即使操作系统禁用了视觉风格，是否有可能让我的 winForm 以 xp 视觉风格显示自己？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T22:45:17.070

不是在操作系统的帮助下。您将需要使用可以独立提供（模拟）样式的定制控件（或编写您自己模拟样式的自定义控件）。

# javascript - 如何使用我的 HTML 实现这个最大文件大小脚本？

> ID：12716458
> 
> 赞同：0
> 
> 时间：2012-10-03T20:34:17.573
> 
> 标签：javascript, upload

在上传之前，我已经获得了这个 JavaScript 脚本来限制最大文件大小，但我不确定如何使用我当前的代码来实现它。

这是JavaScript：

```
<script type="text/javascript">

            function handleFileSelect(evt) {
  var files = evt.target.files; // FileList object

  // files is a FileList of File objects. List some properties.
  var output = [];
  for (var i = 0, f; f = files[i]; i++) {
   console.log(f.size);        /*<--Here is your size of the file! :D*/
  }
}

 document.getElementById('files').addEventListener('change', handleFileSelect, false);

</script> 
```

还有我的 HTML：

```
<label>Upload Image</label>
<input type="file" name="image" /><br />
<input type="hidden" name="MAX_FILE_SIZE" value="5120" /></p>
<p><input type="submit" id="submit" value="Upload" /> 
```

修改后的代码：

```
 <p><label>Upload Image</label>

  <script type="text/javascript">
 function handleFileSelect(evt) {
   var files = evt.target.files; // FileList object
    var max_size = 5120; // Max file size

  // files is a FileList of File objects. List some properties.
  var output = [];
   for (var i = 0, f; f = files[i]; i++) {
    // console.log(f.size);
     if(f.size > max_size) { // Check if file size is larger than max_size
     alert("Sorry, but the file that you selected is too large. Please upload a file that is no larger than " + max_size + " KB.");
      return false;
    } // end if
   } // end for loop
 } //  end function

 document.getElementById('files').addEventListener('change', handleFileSelect, false);
 </script>

                <input type="file" name="image" id="files"/><br />
 <input type="hidden" name="MAX_FILE_SIZE" value="5120" /></p>
                <p><input type="submit" id="submit" value="Upload" />
            </p>
       <p>&nbsp;</p>
 </form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T20:38:07.580

只需在文件输入中添加一个`id`属性，因为脚本正在寻找一个带有*文件*`id`的元素：

 *```
<label>Upload Image</label>
<input type="file" name="image" id="files" /><br />
<input type="hidden" name="MAX_FILE_SIZE" value="5120" />
<p><input type="submit" id="submit" value="Upload" />​&lt;/p>​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

[http://jsfiddle.net/RnuT8/](http://jsfiddle.net/RnuT8/)

顺便说一句，请注意，只需禁用 JavaScript 或直接将文件上传到服务器而不使用您的表单，即可轻松绕过此 JavaScript。我建议您也使用服务器端 PHP 上传脚本检查文件大小。

# 修改后的代码

我已经修改了您的脚本，因此您可以输入最大尺寸值，脚本将检查它是否大于`max_size`：

```
window.onload = function() {

    function handleFileSelect(evt) {
      var files = evt.target.files; // FileList object
      var max_size = 5120; // Max file size

      // files is a FileList of File objects. List some properties.
      var output = [];
      for (var i = 0, f; f = files[i]; i++) {
       // console.log(f.size);
        if(f.size > max_size) { // Check if file size is larger than max_size
          alert("Sorry, but the file that you selected is too large. Please upload a file that is no larger than " + max_size + " KB.");
          return false;
        } // end if
      } // end for loop
    } //  end function

   document.getElementById('files').addEventListener('change', handleFileSelect, false);
} 
```

但请记住，这是*可以通过*的，并且文件大小也应该在服务器上进行验证（JavaScript 也很好并且可以加快速度，但是如果你想要安全，你也*必须*在服务器上验证它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T20:38:21.673

该脚本正在寻找 id 为“files”的元素。尝试在输入中添加 id，如下所示：

```
<input type="file" id="files" name="image" /> 
```*

# ruby-on-rails - 哈希意外出现在呈现的页面上

> ID：12716464
> 
> 赞同：0
> 
> 时间：2012-10-03T20:34:26.653
> 
> 标签：ruby-on-rails, mongoid

我有一个显示 Mongoid 文档内容的视图。当它遍历散列数组时，它会根据需要显示键值对，但随后会意外转储原始散列的内容。谁能解释这种行为？

这是视图代码（在haml中）；

```
- @account.attributes.keys.each do |key|
  - if @account[key].class == Array
    %b= key.humanize
    %br
    - @account[key].each do |key2|
      = key2.each do |key3,value|
        #{key3.humanize}: #{value}
        %br
    %br 
```

这是要显示的 mongo 记录的嵌入式集合；

```
"sales" : [
    { "sale_date" : Date( 1256882400000 ),
      "sale_price" : 210000,
      "recording_no" : "2009085729" },
    { "sale_date" : Date( 1160719200000 ),
      "sale_price" : 268300,
      "recording_no" : "2006088793" } ], 
```

这是呈现页面中显示的内容；

**销售**
销售日期：2009-10-30 06:00:00 UTC
销售价格：210000
备案号：2009085729
{"sale_date"=>2009-10-...006-10-13 06:00:00 UTC
销售价格： 268300
记录编号：2006088793
{"sale_date"=>2006-10-...ing_no"=>"2006088793"}

请注意，每个销售的最后一行再次包含整个哈希！任何线索为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:49:28.630

更改`= key2.each`为`- key2.each`。

# c++ - GetForegroundWindow 不总是正确的？

> ID：12716469
> 
> 赞同：0
> 
> 时间：2012-10-03T20:34:53.000
> 
> 标签：c++, touchscreen, hwnd

我有一些似乎有错误的代码。它不是我写的，实际上它是用 c++ 编写的，直到几周前我还没有用 c++ 编写过任何代码。

我们有一个用于触摸屏的键盘，当需要键盘输入时我们会打开它，不需要时关闭它。我们的软件可以在没有物理键盘的信息亭上使用我们多年前开发的触摸屏键盘（仅限于 az、0-9、enter、shift、tab）。

在某些装有 Windows 7 的计算机上，键盘位于应用程序的“后面”（可能是其他计算机，但在其他操作系统上没有看到问题）。

工作多年。我更新了其他部分以最终与 Windows 7 一起使用，现在在我们 66% 的 Windows 7 安装中，键盘根本没有出现（在应用程序后面）。在我的电脑上，起初我认为它出现了 100% 的时间，但继续测试发现它出现了 95-99% 的时间，因此很难排除故障。

此外，大多数关于 GetForegroundWindow() 的帖子都必须处理向其他应用程序发送或接收消息，而不是关于分层应用程序（就像我需要的那样）。

当我开始时，代码如下所示：

```
 bool ShowKeyBoad(bool Show)
  {
    int WizHeight = 422;
    int KeyWidth,KeyHeight,KeyLeft, KeyTop;
    AnsiString Params;
    AnsiString ShowFile = GetFullPath(GetExeDir(), "OnscreenKeyboard.exe");
    AnsiString HideFile = GetFullPath(GetExeDir(), "bkecekeyboard.exe");

    KeyHeight = Screen->Height - WizHeight;
    KeyWidth = Screen->Width;
    if (KeyWidth > Screen->Width)
      KeyWidth = Screen->Width;

    KeyLeft   = (Screen->Width - KeyWidth) / 2;
    KeyTop    = (Screen->Height) - KeyHeight;

    Params = "x-"  + IntToStr(KeyLeft)   + " y-" + IntToStr(KeyTop) +
    " h-" + IntToStr(KeyHeight) + " w-" + IntToStr(KeyWidth);

    if (Show)
    {
      HWND Hand= GetForegroundWindow();
      ShellExecute(NULL, "open", ShowFile.c_str(), Params.c_str(), NULL, SW_SHOWNORMAL);
      Sleep(100);
      SetForegroundWindow(Hand);
      SetActiveWindow(Hand);
    }
    else
      ShellExecute(NULL, "open", HideFile.c_str(), "/stop", NULL, SW_HIDE);

    return true;
  } 
```

我已经尝试了几件事。
捕获 ShellExecute 的 HWND 并将其传递给 SetActiveWindow(ShellHand) 似乎有一些效果。但仍然不一致。HWND shellHand = ShellExecute(NULL, "open", ShowFile.c_str(), Params.c_str(), NULL, SW_SHOWNORMAL);

在 HWND Hand= GetForegroundWindow() 之前添加 Sleep(25); 对 GUI 产生了最好的影响 - 但我不想依赖恰到好处的时间。

各种互联网搜索向我指出了一些看起来也不错的代码。但它会更改注册表设置，这似乎不是一个明智的选择。

使用该解决方案，我们将 SetForeground 更改为 SetForegroundInternal

```
 void SetForegroundWindowInternal(HWND hWnd)
  {
   if(!::IsWindow(hWnd)) return;

    //relation time of SetForegroundWindow lock
    DWORD lockTimeOut = 0;
    HWND  hCurrWnd = ::GetForegroundWindow();
    DWORD dwThisTID = ::GetCurrentThreadId(),
          dwCurrTID = ::GetWindowThreadProcessId(hCurrWnd,0);

    //we need to bypass some limitations from Microsoft :)
    if(dwThisTID != dwCurrTID)
    {
      ::AttachThreadInput(dwThisTID, dwCurrTID, TRUE);

      ::SystemParametersInfo(SPI_GETFOREGROUNDLOCKTIMEOUT,0,&lockTimeOut,0);
      ::SystemParametersInfo(SPI_SETFOREGROUNDLOCKTIMEOUT,0,0,SPIF_SENDWININICHANGE | SPIF_UPDATEINIFILE);

      ::AllowSetForegroundWindow(ASFW_ANY);
    }

    ::SetForegroundWindow(hWnd);

    if(dwThisTID != dwCurrTID)
    {
      ::SystemParametersInfo(SPI_SETFOREGROUNDLOCKTIMEOUT,0,(PVOID)lockTimeOut,SPIF_SENDWININICHANGE | SPIF_UPDATEINIFILE);
      ::AttachThreadInput(dwThisTID, dwCurrTID, FALSE);
    }
  } 
```

**更新** 猜测 Hand = NULL 是我的问题我使代码如下所示：

```
 bool ShowKeyBoad(bool Show)
  {
    int WizHeight = 422;
    int KeyWidth,KeyHeight,KeyLeft, KeyTop;
    AnsiString Params;
    AnsiString ShowFile = GetFullPath(GetExeDir(), "OnscreenKeyboard.exe");
    AnsiString HideFile = GetFullPath(GetExeDir(), "bkecekeyboard.exe");

    KeyHeight = Screen->Height - WizHeight;
    KeyWidth = Screen->Width;
    if (KeyWidth > Screen->Width)
      KeyWidth = Screen->Width;

    KeyLeft   = (Screen->Width - KeyWidth) / 2;
    KeyTop    = (Screen->Height) - KeyHeight;

    Params = "x-"  + IntToStr(KeyLeft)   + " y-" + IntToStr(KeyTop) +
    " h-" + IntToStr(KeyHeight) + " w-" + IntToStr(KeyWidth);

    if (Show)
    {

      HWND Hand;
      int intfail=1000;  // count down seems correct in this case, usually don't
      while (Hand = NULL)
      { 
        if (intfail <=0)
          break;

        Hand = GetForegroundWindow();
        intfail--;  
      }

      if (Hand == NULL)
      {
      // Send Message to screen giving instructions to try again
      return false;
      }

      ShellExecute(NULL, "open", ShowFile.c_str(), Params.c_str(), NULL, SW_SHOWNORMAL);
      Sleep(100);
      SetForegroundWindow(Hand);
      SetActiveWindow(Hand);
    }
    else
      ShellExecute(NULL, "open", HideFile.c_str(), "/stop", NULL, SW_HIDE);

    return true;
  } 
```

看来可以解决问题了。

# ruby-on-rails - 有没有更有效/更合适的方式在 Ruby 中编写它？

> ID：12716473
> 
> 赞同：3
> 
> 时间：2012-10-03T20:35:20.827
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我来自 php，刚开始用 ruby​​ 和 rails 磨牙。

是否有更有效或更“红宝石”的方式来编写以下内容？

```
<% if !@user.twitter_url.empty? %>
    <a class="twitter" href="<%= @user.twitter_url %>">Twitter</a>
<% end %>
<% if !@user.facebook_url.empty? %>
    <a class="facebook" href="<%= @user.facebook_url %>">Facebook</a>
<% end %>
<% if !@user.google_plus_url.empty? %>
    <a class="googleplus" href="<%= @user.google_plus_url %>">Google Plus</a>
<% end %>
<% if !@user.linked_in_url.empty? %>
    <a class="linkedin" href="<%= @user.google_plus_url %>">Linked In</a>
<% end %> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-03T20:52:40.757

最好的方法应该是使用一些 Presenter 或者一个辅助方法。无论如何使用元编程你可以做

```
<% [:twitter, :facebook, :google_plus, :linked_in].each do |social| %>
  <% unless @user.send("#{social}_url").blank? %>
    <a class="<%= social %>" href="<%= @user.send("#{social}_url") %>">social.to_s.titleize </a>
  <% end %>
<% end %> 
```

或者

```
<% [:twitter, :facebook, :google_plus, :linked_in].each do |social| %>
  <%= link_to(social.to_s.titleize , @user.send("#{social}_url"), class: social) unless @user.send("#{social}_url").blank? %>
<% end %> 
```

甚至：

```
<% [:twitter, :facebook, :google_plus, :linked_in].each do |social| %>
  <%= link_to_unless @user.send("#{social}_url").blank?, social.to_s.titleize , @user.send("#{social}_url"), class: social %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T20:51:36.067

更紧凑的方式：

```
<%= link_to "Twitter", @user.twitter_url if !@user.twitter_url.blank?  %>
<%= link_to "Facebook", @user.facebook_url if !@user.facebook_url.blank?  %>
<%= link_to "Google Plus", @user.google_plus_url if !@user.google_plus_url.blank?  %>
<%= link_to "Linked In", @user.linked_in_url if !@user.linked_in_url.blank?  %> 
```

带[礼物？](http://api.rubyonrails.org/classes/Object.html#method-i-present-3F)相反，感谢 Mark Thomas 评论：

```
<%= link_to "Twitter", @user.twitter_url if @user.twitter_url.present?  %>
<%= link_to "Facebook", @user.facebook_url if !@user.facebook_url.present?  %>
<%= link_to "Google Plus", @user.google_plus_url if !@user.google_plus_url.present?  %>
<%= link_to "Linked In", @user.linked_in_url if !@user.linked_in_url.present?  %> 
```

或者您可以使用`unless`而不是`if !`with `blank?`，但我通常会使用除非难以阅读的代码，否则就是我！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T20:47:10.360

如果 url 字段为零，请在此处使用`blank?`而不是。`empty?`虽然`nil.blank?`已定义，但未定义`nil.empty?`。

```
<% unless @user.twitter_url.blank? %>
    <%= link_to "Twitter", @user.twitter_url, class: "twitter" %>
<% end %>
<% unless @user.facebook_url.blank? %>
    <%= link_to "Facebook", @user.facebook_url, class: "facebook" %>
<% end %>
<% unless @user.google_plus_url.blank? %>
    <%= link_to "Google Plus", @user.google_plus_url, class: "googleplus" %>
<% end %>
<% unless @user.linked_in_url.blank? %>
    <%= link_to "Linked In", @user.linked_in_url, class: "linkedin" %>
<% end %> 
```

# java - 检测不适用于通过反射调用的方法

> ID：12716474
> 
> 赞同：4
> 
> 时间：2012-10-03T20:35:22.457
> 
> 标签：java, reflection, instrumentation, java-bytecode-asm

我正在跟踪 Java 应用程序的执行以对执行跟踪进行动态分析。

一切都很好，但是当通过反射调用方法时。我可以看到调用，`Method.invoke`但之后我的跟踪不包含通过反射执行的指令。

一旦程序返回“常规”执行，程序就会再次正常跟踪。

编写工具的人使用了[ASM](http://asm.ow2.org/)库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T22:36:16.067

我解决了我的问题。问题与仪器无关，而是与工具的配置有关，顺便说一句，该工具是[开源](http://code.google.com/p/trace-synthesis-collector/)的。

检测工作正常，因为它通过修改方法的字节码来工作。查看项目的代码，了解应该如何进行检测。

# visual-studio - 回滚整个变更集是说回滚没有变化

> ID：12716476
> 
> 赞同：7
> 
> 时间：2012-10-03T20:35:27.200
> 
> 标签：visual-studio, tfs

我正在使用 vs.net 2010，当我在查看历史记录时右键单击更改集时，我可以选择“回滚整个更改集”。

当我单击它时，它会显示“回滚没有任何更改”。

如果我将要回滚的变更集与以前的变更集进行比较，我确实会看到文件中的差异。

可能是什么问题？

这是我基本上只想删除或回滚的最新变更集，我该怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-03T23:06:23.013

这些更改是由其他用户进行的吗？如果是这样，那么这可能适用：

> 确保首先获取文件的最新版本，否则您将收到“TF204003：无更改回滚”​​。错误

*来自[http://msdn.microsoft.com/en-us/library/dd380776(v=vs.100).aspx的](http://msdn.microsoft.com/en-us/library/dd380776(v=vs.100).aspx)*社区内容**

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-15T13:40:49.157

如果有人面临与我相同的问题：我试图在其他分支上进行回滚。显然它不会起作用。:)*

# javascript - 加载 Google Maps API 时如何提供非全局回调？

> ID：12716477
> 
> 赞同：3
> 
> 时间：2012-10-03T20:35:27.253
> 
> 标签：javascript, google-maps, prototypejs

当回调是全局函数时，我只能下载 Google Maps v3 API：

```
function onMapLoad() {
    alert('API is loaded');
}

var script = new Element(
    'script', {
        type: 'text/javascript',
        src: 'http://maps.googleapis.com/maps/api/js?key=' 
            + Map.API_KEY
            + '&sensor=false&callback=onMapLoad'
    }
);

document.body.appendChild(script); 
```

我不想使用全局函数。相反，我想在单例上调用一个方法：`Map.instance().onLoaded`。

```
// ...
+ '&sensor=false&callback=Map.instance().onLoaded'
// ... 
```

当我尝试这样做时，会出现 NetworkError: 403 Forbidden on loading Google's scripts。这似乎暗示谷歌的服务不喜欢我的回调函数字符串。回调函数本身没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T04:40:50.183

It looks like Google doesn't like the function call `()` part of your callback string, but it doesn't have any issues with the fact that it's not global on the document.

I too get a 403 on this:

[http://maps.googleapis.com/maps/api/js?key=4&sensor=false&callback=Map.mapLoaded%28%29](http://maps.googleapis.com/maps/api/js?key=4&sensor=false&callback=Map.mapLoaded%28%29)

But not this:

[http://maps.googleapis.com/maps/api/js?key=4&sensor=false&callback=Map.instance.mapLoaded](http://maps.googleapis.com/maps/api/js?key=4&sensor=false&callback=Map.instance.mapLoaded)

Seems like if you could just specify a function property of the Map object for the callback instead of the return value of the `instance()` function, you can avoid the extra global. I didn't see anything regarding this in their API, but I didn't spend too long looking into that.

* * *

I haven't had to use JSONP tactics in a long while, so I wasn't sure if this was a limitation of JSONP requiring callbacks to be global or just something that Google was imposing. It seems to be a Google-only thing, as this JSONP test site seems to have no issues with the parens as the response and fiddle show:

[http://date.jsontest.com/?callback=Map.foo%28%29](http://date.jsontest.com/?callback=Map.foo%28%29)

Fiddle: [http://jsfiddle.net/6WawP/](http://jsfiddle.net/6WawP/)

Hope this helps

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T06:59:49.363

尝试使用 google loader 调用

`<script type="text/javascript" src="https://www.google.com/jsapi"></script>`

`google.load("maps", "3", {"other_params": "sensor=false","callback" : Map.instance().onLoaded });`

[https://developers.google.com/loader/](https://developers.google.com/loader/)

# scala - 如何按每个元素的属性对列表进行分区

> ID：12716479
> 
> 赞同：3
> 
> 时间：2012-10-03T20:35:38.060
> 
> 标签：scala, partitioning

我有一个关于按每个列表元素的属性对列表进行分区的问题。

给定一个`List[E]`和一个函数`f(e: E): Int`，如何将列表划分为一个`List[List[E]]`，其中每个元素都是在应用`List[E]`时具有相同值的元素中的一个`f`？

例如，假设 type`E`表示物理位移并`f`测量位移，得出大于或等于零的整数。

```
val ms = List(a, b, c, d, e)

f(a) = 1
f(b) = 3
f(c) = 1
f(d) = 4
f(e) = 3 
```

生成的分区将是

```
List(List(a, c), List(b, e), List(d)) 
```

此示例显示 的值`f`可以包含间隙，但列表列表不应包含任何空列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T20:44:06.220

如果您希望列表按函数值排序：

```
list.groupBy(f).toList.sortBy(_._1).map(_._2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T20:41:54.197

只需将它们分组：

```
val ms = List(a, b, c, d, e)
ms.groupBy(x => f(x)).values 
```

# knockout.js - 如何将模板与敲除、敲除映射和 jsrender 一起使用

> ID：12716486
> 
> 赞同：2
> 
> 时间：2012-10-03T20:35:58.840
> 
> 标签：knockout.js, knockout-mapping-plugin, jsrender

我想使用 jsRender 模板来`fullName`渲染`firstName + ' ' + lastName`. 它不是用数据呈现模板，而是呈现为`{{=firstName}} {{=lastName}}`. 我怎样才能使这项工作？

现场示例：http: [//jsbin.com/inijay/2/edit](http://jsbin.com/inijay/2/edit)

JS：

```
var data = { "firstName": "Ian", "lastName": "Davis" };
var viewModel = ko.mapping.fromJS(data);
ko.applyBindings(viewModel); 
```

HTML：

```
<input data-bind="value: firstName" type="text" />
<input data-bind="value: lastName" type="text" />
<span data-bind="template: 'fullNameTemplate'"></span> 
```

模板：

```
<script id="fullNameTemplate" type="text/x-jquery-tmpl">
  {{=firstName}} {{=lastName}}
</script> 
```

输出的样子：![损坏的 jsrender 模板输出](../Images/39542051f4a11622b032c8d0c97200ef.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T21:59:52.790

您必须安装自己的`templateEngine`. 这是完成的结果：http: [//jsbin.com/inijay/3/edit](http://jsbin.com/inijay/3/edit)

以下是相关代码：

```
ko.jsrenderTemplateEngine = function () { };
ko.jsrenderTemplateEngine.prototype = ko.utils.extend(new ko.templateEngine(), {
    renderTemplateSource: function (templateSource, bindingContext, options) {
        // Precompile the wrapping div for templating
        var precompiled = templateSource['data']('precompiled');
        if (!precompiled) {
            precompiled = $('<div>', { text: templateSource.text() });
            templateSource['data']('precompiled', precompiled);
        }
        // Unwrap observables
        var unwrapped = ko.mapping.toJS(bindingContext.$data);
        // Render and parseHTMLFragment
        return ko.utils.parseHtmlFragment(precompiled.render(unwrapped));
    }
});
ko.setTemplateEngine(new ko.jsrenderTemplateEngine()); 
```

我还更改了您的 jsrender 模板：

```
<script id="fullNameTemplate" type="text/x-jquery-tmpl">
    {{:firstName}} {{:lastName}}
</script> 
```

我从这里抄袭了基本的代码设计：http: [//knockoutjs.com/documentation/template-binding.html#note_6_using_the_underscorejs_template_engine](http://knockoutjs.com/documentation/template-binding.html#note_6_using_the_underscorejs_template_engine)

附带说明一下，这个解决方案似乎并不是那么快，因为 jsrender 的最优性由于不得不一直打开 observables*而变得*无用。我相信使用 Knockout 的原生模板会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T00:43:34.027

使用 jQuery.tmpl 的解决方案： http: [//jsbin.com/inijay/5/edit](http://jsbin.com/inijay/5/edit)文档说此时它会更新到 jsRender，但显然不是。此处的文档：knockoutjs.com/documentation/template-binding.html

# asp.net - div内的更新面板与我的css重叠

> ID：12716491
> 
> 赞同：0
> 
> 时间：2012-10-03T20:36:24.093
> 
> 标签：asp.net, css

我有一个名为“mainContentHolder”的 div。在css中，我将高度设置为自动。在 aspx 页面中，我有以下 css ：

```
<style type="text/css">
    .newPopUpHolder
    {
        display:inline-block;
        width:33px;
    }
    .mainContentHolder label.inlineLbl
    {
        display:inline-block;
        width:70px;
    }
    .mainContentHolder 
    {
        min-width:0px; /* reset */
        width:690px;
    }
</style> 
```

然后在我的主代码中，我有 2 个更新面板，其中 1 个填充了 3 个单选按钮，另一个更新面板填充了 1 个 DropDownList。一切都应该出现在一个灰色的盒子里。但是，我的第二个 UpdatePanel 似乎与灰色文本框的底部重叠，而不是在其中。关于为什么的任何想法？

在我的外部 CSS 中，它们的高度属性是“height:auto;”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:05:03.573

已经无所谓了。我只是手动设置高度，因为它不会改变

# cakephp - 为什么我的 CakePHP 测试夹具不工作？

> ID：12716494
> 
> 赞同：0
> 
> 时间：2012-10-03T20:36:26.840
> 
> 标签：cakephp, phpunit, fixtures

我正在尝试在 CakePHP 应用程序中测试插件模型。该模型使用一个名为“cron_jobs”的表，我为其设置了这个夹具：

```
class CronJobFixture extends CakeTestFixture
{
    public $import = array('table' => 'cron_jobs');
} 
```

我的测试类运行良好，如下所示：

```
<?php

App::uses('CronJob', 'Cron.Model');

class CronJobTest extends CakeTestCase
{

    public $fixtures = array('plugin.cron.CronJob');

    public function setUp()
    {
        parent::setUp();
        $this->CronJob = new CronJob();
    }

    public function testCollectFailsOnMissingComponent()
    {
        $this->setExpectedException('InvalidArgumentException');
        $this->CronJob->collect(null);
    }

    public function testCollectSilentOnMissingComponent()
    {
        $result = $this->CronJob->collect('SomeNonExistingComponent');
        $this->assertEquals(null, $result);
    }

    // Some more tests that will need the fixture ....
} 
```

如果我然后通过替换来更改测试设置

```
$this->CronJob = new CronJob(); 
```

和

```
$this->CronJob = ClassRegistry::init("CronJob"); 
```

加载夹具，我得到这个错误：

> CronJobTest::testCollectSilentOnMissingComponent PDOException: SQLSTATE[42000]: 语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“收集”附近使用正确的语法

CronJob 类中的任何内容都不会生成该错误，因为这两个测试所涵盖的代码不会访问数据库。我确信我的测试数据库配置正确，因为如果我更改测试数据库配置，我会收到数据库连接错误。

我正在使用 CakePHP 2.2.1、PHPUnit 3.6.12、PHP 5.4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T23:49:42.977

Fixtures 更喜欢小写的下划线约定。做这个：

```
public $fixtures = array('plugin.cron.cron_job'); 
```

因为它是一个插件；一定要`ClassRegistry::init`像这样使用插件符号：

```
$this->CronJob = ClassRegistry::init('Cron.CronJob'); 
```

发生该错误是因为 CakePHP 在没有您的方法的情况下延迟加载非插件`CronJob`模型。`collect()`

# c# - SQLite - 从 SQLite 数据库读取数据的最快方法？

> ID：12716506
> 
> 赞同：6
> 
> 时间：2012-10-03T20:37:29.100
> 
> 标签：c#, database, sqlite, query-optimization

我有一个本地 SQLite 数据库

表格详情

```
-- Describe PREFIX_LIST
CREATE TABLE PREFIX_LIST(ITEM VARCHAR(25) PRIMARY KEY)

-- Describe SUFFIX_LIST
CREATE TABLE SUFFIX_LIST(ITEM VARCHAR(25) PRIMARY KEY)

-- Describe VALID_LIST
CREATE TABLE VALID_LIST (
    "PART1" TEXT,
    "PART2" TEXT,
    PRIMARY KEY(PART1, PART2)
) 
```

现在这个列表真的很大，我需要从中保存数据。

这是我的实现。

```
SQLiteConnection con = null;
SQLiteCommand cmd = null;
Connect(DbPath, ref con, ref cmd);

cmd.CommandText =
    "SELECT PART1 || '@' || PART2 FROM VALID_LIST 
 WHERE NOT EXISTS 
   (SELECT * FROM PREFIX_LIST WHERE VALID_LIST.PART1 LIKE '%' || ITEM || '%') 
   AND NOT EXISTS
   (SELECT * FROM SUFFIX_LIST WHERE VALID_LIST.PART2 LIKE '%' || ITEM || '%')";

var reader = cmd.ExecuteReader();

if (reader.HasRows)
{
    string savePath;

    if (SaveTextFile(out savePath) == DialogResult.OK)
    {
        TextWriter writer = new StreamWriter(savePath);
        while (reader.Read())
        {
            writer.WriteLine(reader.GetString(0));
        }
        writer.Close();
        writer.Dispose();
    }

}

reader.Close();
reader.Dispose();
cmd.Dispose();
con.Close();
con.Dispose();

MessageBox.Show("List Saved!.", Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Information); 
```

我需要一些更好的方法来更快地保存列表。VALID_LIST 中的总条目为**2639117**

为上面的 SQL QUERY 保存了 15 分钟！

如果sql查询可以优化，请lmk！

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T21:05:20.877

除非通配符附加到后缀，否则查询`LIKE`通常会非常慢。诸如`LIKE '%foo'`不能通过典型的字符串索引来索引的谓词。

但是，您可以`LIKE`使用其[全文搜索](http://www.sqlite.org/fts3.html)(FTS) 功能替换 sqlite 中的大量使用。

> FTS3 和 FTS4 扩展模块允许用户创建具有内置全文索引的特殊表（以下简称“FTS 表”）。全文索引允许用户有效地查询数据库中包含一个或多个单词（以下称为“标记”）的所有行，即使表包含许多大型文档。

他们有[一个示例](http://www.sqlite.org/fts3.html#section_1)，在您的用例的性能方面看起来很有希望。

```
CREATE VIRTUAL TABLE enrondata1 USING fts3(content TEXT);     /* FTS3 table */
CREATE TABLE enrondata2(content TEXT);                        /* Ordinary table *

SELECT count(*) FROM enrondata1 WHERE content MATCH 'linux';  /* 0.03 seconds */
SELECT count(*) FROM enrondata2 WHERE content LIKE '%linux%'; /* 22.5 seconds */ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T21:07:41.923

考虑使用全文搜索。

为此，必须对 PREFIX 和 SUFFIX 中的值进行标记（它们必须是单独的单词），并且您尝试匹配的 ITEM 必须是这些值之一中的不同标记（不是单词的一部分或两个字在一起）。例如，PREFIX 和 SUFFIX 中的字符串必须是“RED BLUE GREEN”或“DOG, CAT, CAPYBARA”，并且 ITEM 的值必须是 RED、BLUE、GREEN、DOG、CAT 或 CAPYBARA。

如果满足这些条件，您可以启用全文搜索，将这些表重新创建为全文表，并将 LIKE（和通配符）替换为 MATCH。在这种情况下，SQLite 将维护在 PREFIX 或 SUFFIX 中找到的每个*标记*的索引，并且这部分搜索将会快得多。

不幸的是，在 SQlite 中启用 FTS 涉及从设置了一个或多个编译时标志的源代码编译产品。我没有这方面的经验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-29T18:06:28.590

我不确定这是否是您想要的，但它将有助于加快写入过程。尝试在字符串生成器中累积从数据库中读取的字符串，然后写入文件。例如，您可以读取 100k 字符串，然后一次将这 100k 写入文件。

```
 StringBuilder builder = new StringBuilder();
    int count = 0; //to limit the number of rows stored in string builder.
    while (reader.Read())
    {

        builder.AppendLine(reader.GetString(0));
        count++;

        //store every 100k or so rows at once. 
        //This number depends on how much RAM 
        //you can allocate towards storing the string of rows.
        //If you have 2GB of free RAM
        //this number can easily be 1 million but it always depends on the
        //size of each string stored in database.
        if(count == 100000) 
        {
           File.AppendAllText(path, builder.ToString()); //Append all rows to the file
           builder.Clear(); //clear the string for next 100k rows of data
           count = 0; //Clear the counter value
        }
        count++
    } 
```

让我知道它是否有帮助。

# python - ImportError：没有名为 input.evdev 的模块

> ID：12716507
> 
> 赞同：1
> 
> 时间：2012-10-03T20:37:43.690
> 
> 标签：python, minecraft, pyglet

所以每当我尝试运行[http://codeflow.org/entries/2010/dec/09/minecraft-like-rendering-experiments-in-opengl-4/](http://codeflow.org/entries/2010/dec/09/minecraft-like-rendering-experiments-in-opengl-4/)我总是得到错误

```
from pyglet.input.evdev import get_devices
ImportError: No module named input.evdev 
```

我将如何解决这个问题？我在运行 Python 2.7.3 的 Mac OSX 10.6.8 上。我有 pyglet 1.1.4 和 gletools（我忘记了版本）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:56:13.133

“我现在发现这段示例代码只能在 OpenGL 4.0 上运行。将那行更改为不包含已修复的问题”是从[此处](http://osdir.com/ml/python-pyglet-user/2011-03/msg00037.html)`.evdev`找到的类似问题中引用的。也许它会帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:50:28.633

这不是答案，只是很长的评论：

转到终端并键入

```
python
>>> import pyglet
>>> pyglet.__file__ 
```

您应该得到一些输出，它将向您显示`pyglet`模块的路径。转到该目录并确认有一个名为 的子目录，其中有一个名为的`input`文件。`input``evdev.py`

您应该会发现某种错误。也许文件不存在，或者权限错误，或者......？

# r - “XML 内容似乎不是 XML”：R 中 xmlTreeParse 中的错误

> ID：12716519
> 
> 赞同：2
> 
> 时间：2012-10-03T20:38:29.253
> 
> 标签：r, xml-parsing

我正在阅读 R 中的[topicmodels](http://cran.r-project.org/web/packages/topicmodels/vignettes/topicmodels.pdf)教程。在第 12 页左右，它们去除了 HTML 标记和希腊字母：

```
R> library("XML")
R> remove_HTML_markup <- function(s) {
+ doc <- htmlTreeParse(s, asText = TRUE, trim = FALSE)
+ xmlValue(xmlRoot(doc))
+ }
R> remove_HTML_markup(JSS_papers[1,"description"])
Error: XML content does not seem to be XML, nor to identify a file name ... 
```

`JSS_papers`存储与从期刊下载的论文集相关的元数据。标签下的条目`description`是文章的摘要。这个没有任何标签：

```
JSS_papers[1,"description"] = "The fit of a variogram model to spatially-distributed 
    data is often difficult to assess. A graphical diagnostic written in S-plus is   
    introduced that allows the user to determine both the general quality of the fit of a 
    variogram model, and to find specific pairs of locations that do not have measurements 
    that are consonant with the fitted variogram. It can help identify nonstationarity,    
    outliers, and poor variogram fit in general. Simulated data sets and a set of soil      
    nitrogen concentration data are examined using this graphical diagnostic." 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-02T10:44:05.990

我最近遇到了同样的问题。我用 URL 分配的变量中有错字。仔细检查您的变量 s，看看那里是否有问题。

# windows - 为什么我的 WINVER 4 .exe 不能在 W98SE 下运行？

> ID：12716520
> 
> 赞同：8
> 
> 时间：2012-10-03T20:38:33.983
> 
> 标签：windows

我需要为运行 Windows 98SE 的旧系统构建我的应用程序。（系统涉及特殊硬件，无法升级操作系统。）我的开发环境是Visual C++；该应用程序是 vanilla ANSI C，结果是一个 WIN32 控制台应用程序。

我知道在 Visual Studio 2008 中完全放弃了对旧版本 Windows 的支持，所以我改用 Visual Studio 2005（我的上一代 Windows XP 笔记本电脑上仍然有它）。我有条件编译以避免调用 W98SE 下不可用的 API 函数，并且我知道不使用 Unicode。

nb**这一切都**过去了。我过去成功地构建了 W98SE 可执行文件。不知何故。

我构建的应用程序失败并显示“需要更新版本的 Windows。升级您的 Windows 版本”。

我用十六进制编辑器检查了 .exe 文件，WINVER 值（在本例中为十进制偏移 288）是 4，应该是。在正常构建中，即对于现代 Windows 版本，WINVER 值（在本例中为十进制偏移 296）为 5。那么 WINVER=4 版本如何导致“期望更新版本”错误被举报？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T07:37:19.150

您很可能已将它与更新的运行时库 MSVCRT.DLL 链接。尝试以下操作：

```
dumpbin /dependents myfile.exe 
```

如果它显示 MSVCRTnn.DLL，你就有麻烦了。如果它显示 MSVCRT.DLL（没有数字），你应该很好，但仍需谨慎。

可能最简单的解决方案是静态链接运行时库：在项目属性中，在 C/C++、代码生成下，将运行时库设置为 /MT 或 /MTd。如果使用 /MD 或 /MDd 或默认值，它会动态链接到运行时，可能会导致问题。

更改后，“dumpbin /dependents myfile.exe”应该不再列出对 MSVCRT.DLL 的依赖，它应该可以正常工作。

# css - 兄弟 div 匹配容器中的高度

> ID：12716525
> 
> 赞同：23
> 
> 时间：2012-10-03T20:38:46.710
> 
> 标签：css

我在一个容器中有三个 div：http: [//jsfiddle.net/fBe9y/](http://jsfiddle.net/fBe9y/)

一个 div 有很多内容。如何让`div`内容较少的其他两个 s 与最长的高度相匹配`div`？

我尝试添加`height: 100%`到所有`div`s，但它不起作用，因为这需要`height`on `div.container`，在渲染之前我不知道。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-03T20:42:03.330

我建议使用`display: table-row;`and `display: table-cell;`。简而言之，您所做的是制作表格布局，但使用`<div>`标签，然后将它们设置为像表格一样。

这比仅仅出于语义和可访问性原因使用表格要好。

但一般来说，CSS 并没有给你很多方法来引用元素的兄弟姐妹。标签确实如此，但随后`<table>`它混淆了屏幕阅读器和其他东西。

如果你想要更多的行，你会有更多`.container` `<div>`的 s，然后创建另一个`<div>`包装它们，并给它`display: table;`。

因此，使用与您相同的 HTML，此 CSS 可以满足您的要求：

```
.container
{
    display: table-row;
}

.tile
{
    display: table-cell;
    width: 100px;
    background: #eee;
    border: 1px solid black;
}​ 
```

见**[小提琴](http://jsfiddle.net/fBe9y/7/)**。

注意：虽然`display: table;`等人。得到[广泛支持](http://caniuse.com/#feat=css-table)，IE 直到版本 8 才添加支持。如果您计划为 IE 7 或更低版本支持此功能，您将被迫使用更复杂的方法，例如[@Hristo 的](https://stackoverflow.com/a/12716592/196921)。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-06-24T03:52:15.170

您可以使用 flexbox 解决此问题

```
.container{
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    -webkit-flex-wrap: wrap;
    -ms-flex-wrap: wrap;
    flex-wrap: wrap;
}

.tile{
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-11-30T05:09:14.137

HTML

```
<div id="container">
  <div id="div1">1</div>
  <div id="div2">2</div>
  <div id="div3">3</div>
</div> 
```

CSS

```
#container {
  display: flex;
  align-items: stretch;
}

#div1 {
  display: flex;
}

#div2 {
  display: flex;
}

#div3 {
  display: flex;
} 
```

这个'显示：flex;' 和“对齐项目：拉伸；” 在容器中应该使所有子 div 具有相同的高度，只要它具有所需的高度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T20:43:33.067

这是一个很常见的问题。看看这篇文章......它有所有的答案：

[http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)

现在，这里有一个快速使用它的方法。尝试单击任何“列#”文本元素以将它们从文档中删除...列将很好地调整大小:)

[http://jsfiddle.net/UnsungHero97/qUT3d/9/](http://jsfiddle.net/UnsungHero97/qUT3d/9/)

## HTML

```
<div id="container3">
    <div id="container2">
        <div id="container1">
            <div id="col1">Column 1</div>
            <div id="col2">Column 2</div>
            <div id="col3">Column 3</div>
        </div>
    </div>
</div> 
```

## CSS

```
#container3 {
    float:left;
    width:100%;
    background:green;
    overflow:hidden;
    position:relative;
}
#container2 {
    float:left;
    width:100%;
    background:yellow;
    position:relative;
    right:30%;
}
#container1 {
    float:left;
    width:100%;
    background:red;
    position:relative;
    right:40%;
}
#col1 {
    float:left;
    width:26%;
    position:relative;
    left:72%;
    overflow:hidden;
}
#col2 {
    float:left;
    width:36%;
    position:relative;
    left:76%;
    overflow:hidden;
}
#col3 {
    float:left;
    width:26%;
    position:relative;
    left:80%;
    overflow:hidden;
}​ 
```

# javascript - parent() 不适用于实时元素

> ID：12716530
> 
> 赞同：1
> 
> 时间：2012-10-03T20:39:05.453
> 
> 标签：javascript, jquery

我不明白为什么但`.parent()`没有处理动态创建的元素。

这是显示我的问题的[小提琴。](http://jsfiddle.net/znvHa/)它计算静态元素的折扣价，而不是创建一个。

```
$('.item-sizes .discount-percent').live('keydown', function () {
        var percentValue = $(this).val();
        var basePrice = $('.base-price', $(this).parent().parent()).val(); // Undefine on live elements, defined on static

        if (basePrice) {
            discountValue = basePrice - ((percentValue / 100) * basePrice);
            $('.discount-price', $(this).parent().parent()).val(discountValue);
        }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T20:42:30.413

您**添加**的 HTML 在任何地方都没有`base-price`类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:58:59.177

您`base-price`在错误的元素上有类：

```
<input type="text" name="text[]" placeholder="foo" class="span3 base-price"/> 
```

这解释了`NaN`响应

这里是固定的：

[http://jsfiddle.net/znvHa/5/](http://jsfiddle.net/znvHa/5/)

# cordova - 使用 Google Maps api 发布 Phonegap 应用程序是否需要任何密钥？

> ID：12716531
> 
> 赞同：3
> 
> 时间：2012-10-03T20:39:13.763
> 
> 标签：cordova, google-maps-api-3

我正在研究在 Phonegap 应用程序中使用 Google Maps API 的可行性，特别是[Directions](https://developers.google.com/maps/documentation/javascript/directions?hl=pt-BR)，并且我在不使用任何应用程序密钥的情况下做了很多示例。这是一个惊喜，因为前段时间我在原生 Android 应用程序中使用了 GMaps API，它至少需要一个调试密钥。

我需要知道在将这样的应用程序部署到 Play 商店时，是否需要使用一些密钥。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T18:01:24.427

[Android 地图 API](https://developers.google.com/android/maps-api-signup) ( [MapView](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MapView) )确实需要 API 密钥。PhoneGap 使用的 Google Maps JS API 目前可能不需要[API 密钥](https://developers.google.com/maps/documentation/javascript/tutorial#api_key)，但我们鼓励并建议使用一个，这样您就可以在 API 控制台中跟踪使用情况，以查看您的地图被使用的频率。

# r - 通过“source”调用外部脚本的不同部分

> ID：12716533
> 
> 赞同：0
> 
> 时间：2012-10-03T20:39:20.077
> 
> 标签：r, workflow

我刚刚完成了一组 R 脚本的编写。该`source`函数调用了一个主文件和 5 个附加的外部 r 文件。我想知道是否可以将五个外部脚本统一到一个文件中；将整个代码分成五个部分会遇到不同的时刻。

是否可以通过使用来做到这一点`source`？如果不是，您建议采用哪种策略？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:05:37.260

正如@flodel 在评论中所说，编写函数。之前有几个答案值得一看：

1.  [统计分析和报告撰写的工作流程](https://stackoverflow.com/questions/1429907/workflow-for-statistical-analysis-and-report-writing)
2.  [在 R 工作流程中编写函数与逐行解释](https://stackoverflow.com/questions/5365974/writing-functions-vs-line-by-line-interpretation-in-an-r-workflow)
3.  [您如何将 R 的“修订控制”与“工作流程”结合起来？](https://stackoverflow.com/questions/2286831/how-do-you-combine-revision-control-with-workflow-for-r)

# android - 在android中实例化数据库类时ClassLoader.class“找不到源”错误

> ID：12716536
> 
> 赞同：0
> 
> 时间：2012-10-03T20:39:37.097
> 
> 标签：android, database, classloader

我正在尝试实现内容提供程序和光标加载程序，以摆脱 Android/Google 推荐的光标。然而，我正在经历一段糟糕的时光。我正在使用[http://mobile.tutsplus.com/tutorials/android/android-sdk_content-providers/](http://mobile.tutsplus.com/tutorials/android/android-sdk_content-providers/)上的教程作为我的指南，但最简单的方法不起作用。在我的活动开始时，我正在执行以下操作：

```
SQLData entry = new SQLData(getApplicationContext()); 
```

我也试过

```
SQLData entry = new SQLData(this); 
```

SQLData 是我的数据库类的名称。在这行代码之后，我想做的是使用我创建的内容提供程序类中的方法创建和填充数据库。但是，当我尝试在调试器中越过这一行时，会打开一个 ClassLoader.class 窗口，并显示消息“找不到源”。我已经重新加载并刷新并清理了我的包裹，但这无济于事。我很高兴为我的数据库和内容提供程序类提供所有代码，但我不确定这是否是这里所需要的。有谁知道如何解决这个问题？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:38:08.217

在 android 或任何 java dev 中；您可能会发现编写 JUnit 测试并放置大量

```
 Log.v(TAG, "message about " + variable); 
```

在您的代码中而不是使用调试器...

我将编写 Java 代码作为我的工作，并且作为最后的手段，每年可能会使用两次调试选项......

JUnit 测试可以消除我的错误并为我节省大量时间，在调试器中单步执行代码可能是一件非常耗时的事情......只是一个提示，它可能只是我个人的偏好......

# html - 是否可以使用纯 CSS 制作这种舍入效果？

> ID：12716538
> 
> 赞同：-2
> 
> 时间：2012-10-03T20:39:48.830
> 
> 标签：html, css

是否可以使用纯 CSS 像下图中的黑暗区域一样进行舍入？

![在此处输入图像描述](../Images/f051cc8fc7b13fb749d2707a3b28a226.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T21:05:55.583

绝对地。只需创建一个 DIV，并附加一个具有如下规则的类：

```
.rounded_box {
    width: 90px;
    height: 60px;
    border-top-left-radius: 11px 30px;
    border-bottom-left-radius: 11px 30px;
    background-color: #333333;
}

<div class="rounded_box"></div> 
```

根据您正在寻找的浏览器支持，您可能需要为边界半径线添加一些额外的供应商特定前缀。如：

```
-webkit-border-top-left-radius: 11px 30px;
-webkit-border-bottom-left-radius: 11px 30px;
-moz-border-radius-topleft: 11px 30px;
-moz-border-radius-bottomleft: 11px 30px; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-03T20:41:01.593

是的[http://www.css3.info/preview/rounded-border/](http://www.css3.info/preview/rounded-border/)是一个很棒的教程。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-03T20:44:46.250

边界半径绝对是答案。看看这个为你生成代码的方便的小网站；

[http://border-radius.com](http://border-radius.com)

另请注意，IE 6、7 或 8 不支持它

# fortran - Fortran 新输出文件

> ID：12716542
> 
> 赞同：0
> 
> 时间：2012-10-03T20:39:59.287
> 
> 标签：fortran

我是 Fortran 新手，并试图重新利用我继承的更大程序的一部分代码。当程序运行时，它会提示输入输出文件名。我宁愿直接在代码中指定这些输出文件名，这样我就可以并行/一次全部运行程序（程序运行时间约为15小时，需要运行66个不同的文件，所以我宁愿一次运行它们而不是一个接一个地运行它们，因为这需要相当长的时间）。

我正在使用的代码如下所示：

```
24  print *,'Enter output filename'
25  read(*,*) fout
26  print *,'Enter parameter estimate output filename'
27  read(*,*) foutb
28  print *,'Enter seed for random number generator'
29  read(*,*) idum
30  if(idum.gt.0) idum = -idum 
```

我尝试过的一切都给了我：

```
At line 25 of file v1.f95:
Fortran runtime error: End of file 
```

我已经检查过我是否有正确的行尾。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T13:36:58.150

如果我正确理解了这个问题，您希望在运行时将一些输出文件名/其他变量传递给您的程序。这可以通过使用简单的[名称列表](http://publib.boulder.ibm.com/infocenter/comphelp/v101v121/topic/com.ibm.xlf121.aix.doc/language_ref/namelistio.html)输入文件并将这个单一文件传递给程序来处理。代码看起来像，例如：

```
character(20) :: file1, file2, file3
integer :: idum
namelist /input/ file1, file2, file3, idum

read(unit = iunit, nml = input) 
```

`iunit`连接到先前打开的输入文件的 I/O 单元在哪里。这个文件的内容就像

```
&input                    ! Name of corresponding namelist group
  file1 = 'file1.out',
  file2 = 'file2.out',
  file3 = 'file3.out',
  idum = 1
/ 
```

名单文件很容易处理。他们不关心条目的顺序、记录长度或评论。您可以省略 namelist 文件中的任何变量（它们的值不会被修改），或者在单个文件中包含多个 namelist（即使是同名的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-13T23:57:29.410

我认为您的错误来自以下事实：如果没有字符串作为格式说明符，则无法读取 fout。在第 25 行尝试这个（和其他阅读）

`read(*,'(a)') fout`

如果您从 fout 的定义中复制长度，您可以改进这一点，就像这样（猜测大小）

`CHARACTER fout(25) . . . read(*,'(a25)') fout`

您正在从标准输入读取（这是第一个参数中的星号）。我假设您的输入文件是 ASCII 文本。就像现在一样，您可以在文件的前两行指定输出文件的名称，然后是 idum 的第三行，然后是输入的其余部分（如果有的话）。

假设您的可执行文件是**my_program.exe**并且您的输入文件（上面提到的三行）是**my_input_file.txt**，您可以像这样将输入文件重定向到标准输入

`%> my_program.exe < my_input_file.txt`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:55:38.403

也许对您来说是最简单的解决方案，*假设*您只有几个简单的 read(*,*)，您可以不理会代码，只需将所需的字符串通过管道传输到标准输入

```
echo "file1\nfile2\n3" | executable 
```

（在 csh 下测试 .. 您可能需要针对不同的外壳进行一些调整）

顺便说一句，错误消息让我认为您已经从标准输入管道而不是终端读取，并且一些先前的读取耗尽了输入。

# google-chrome-extension - 我在哪里可以获得 Google Chrome 扩展程序的文档？

> ID：12716546
> 
> 赞同：1
> 
> 时间：2012-10-03T20:40:22.027
> 
> 标签：google-chrome-extension, documentation, manual

官方的[Chrome 扩展文档](http://developer.chrome.com/extensions)似乎非常过时。例如，[此页面](http://developer.chrome.com/extensions/overview.html#contentScripts)引用`chrome.tabs.getSelected() method`了很久以前已弃用的 （`chrome.tabs.query()`现在应该使用）。

[示例页面](http://developer.chrome.com/extensions/samples.html)也已过时。我检查的样品几乎没有一个起作用。

所以，很自然地，我想知道，什么时候可以获得有关 Google Chrome 扩展的相关文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:00:37.597

[API 文档](http://developer.chrome.com/extensions/api_index.html)应该是最新的。如果您想要更多类似教程的内容，其他页面很有用，但您应该与 API 参考进行交叉检查，因为您是正确的，API 仍然相对经常更改。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-03T20:50:28.817

[http://tutorialzine.com/2010/06/making-first-chrome-extension/](http://tutorialzine.com/2010/06/making-first-chrome-extension/)可能是一个不错的起点。

# php - 使用 PLOP (PDFLib) 密码保护 PDF

> ID：12716547
> 
> 赞同：0
> 
> 时间：2012-10-03T20:40:23.337
> 
> 标签：php, pdflib

我正在尝试为我的用户提供密码保护他们通过 PDFLib 创建的 PDF 的选项。我已阅读有关 PLOP 的文档，并在手册的附录**A**中看到以下段落（[位于此处](http://www.pdflib.com/fileadmin/pdflib/pdf/manuals/PLOP-manual.pdf)）：

> **基于内存的组合 基于**内存的方法速度更快，但需要更多内存。除非您处理非常大的文档，否则建议将其用于 Web 应用程序中的动态 PDF 生成和签名。不要使用 PDFlib 在磁盘上生成 PDF 文件，而是通过向 提供一个空文件名来使用核心 PDF 生成，使用 `PDF_begin_document( )`获取包含生成的 PDF 数据的缓冲区的内容`PDF_get_buffer( )`，然后使用 .创建一个虚拟文件`PLOP_create_pvf( )`。然后可以将用于虚拟文件的文件名传递给 PLOP/PLOP DS， `PLOP_open_document( )`而无需在磁盘上创建物理文件。请注意，由于必须在单个缓冲区中将完整文档提供给 PLOP/PLOP DS，因此无法在多个部分中获取 PDFlib 缓冲区内容。因此，您必须致电 `PDF_get_buffer( )``PDF_end_document( )`和之间`PDF_delete( )`。包含在所有 PLOP 包中的 hellosign 编程示例演示了如何使用 PDFlib 动态创建 PDF 文档并将其传递到内存中的 PLOP 以应用数字签名。

到目前为止，我已经编写了以下方法，在 之前调用`PDF_end_document()`，如手册所示：

```
function encrypt_pdf($pdf_buffer, $password) {
    $optlist = '';
    $filename = "temp";
    create_pvf($filename, $pdf_buffer, $optlist);   

    $optlist = "masterpassword=$password";

    open_document($filename, $optlist);
    $doc = create_file($filename, $optlist);

} 
```

我不知道如何从这里开始。我发现没有任何文档可以远程覆盖我正在尝试做的事情（尽管我认为这是 PLOP API 的常见用法）。

如何完成此方法，并密码保护我的输出 PDF？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:09:57.213

马特，

当您使用 PDFlib 创建 PDF 文档时（听起来您已经这样做了），没有必要使用额外的库来保护文件。简单地使用 begin_document() 选项列表中的权限选项。

您可以在 PDFlib 食谱 [http://www.pdflib.com/en/pdflib-cookbook/general-programming/permission-settings/php-permission-settings/](http://www.pdflib.com/en/pdflib-cookbook/general-programming/permission-settings/php-permission-settings/) 中找到一个示例，您可以在其中了解如何执行此操作。

本主题的详细介绍位于 PDFlib 8 教程第 3.3 章和 PDFlib 8 API 参考第 3.1 章表 3.1，包含在所有 PDFlib 8 包中，也可从[http://www.pdflib免费下载.com/developer/technical-documentation/manuals/](http://www.pdflib.com/developer/technical-documentation/manuals/)（请不要使用 PDFlib API 的 php.net 文档页面）

当您不使用 PDFlib 来创建 PDF 数据时，您应该按照提供的 PLOP noprint.php 示例（包含在 PLOP 包中）来实现它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T21:00:31.153

所有 PHP 和其他语言的文档都可以在[这里找到](http://pdflib.com/download/plop-and-plop-ds "这里")

直接取自其中一页...

```
<?php
/* $Id: decrypt.php,v 1.10 2011/02/23 18:51:35 rjs Exp $
 * PDFlib PLOP: PDF Linearization, Optimization, Protection
 * decryption sample in PHP
 */
/* parameters for the input document */
$in_filename = "PLOP-datasheet-encrypted.pdf";
$in_password = "DEMO";

/* parameters for the output document */
$out_filename = "";
$out_master = "";
$out_user = "";
$permissions = "";

/* This is where input files live. Adjust as necessary. */
$searchpath = "../data ../../data";

try{
    $optlist = "";

    /* create a new PLOP object */
    $plop = new PLOP();

    $optlist = sprintf("searchpath={%s}", $searchpath);
    $plop->set_option($optlist);

    /* open protected input file with the password */
    $optlist = sprintf("password {%s} ", $in_password);
    if (!($doc = $plop->open_document($in_filename, $optlist))) {
    die("Error: " . $plop->get_errmsg());
    }

    /* create the output file */
    $optlist = sprintf("masterpassword {%s} userpassword {%s} permissions {%s}", $out_master, $out_user, $permissions);
    if (!$plop->create_file($out_filename, $optlist)) {
        die("Error: " . $plop->get_errmsg());
    }

    $buf = $plop->get_buffer();
    $len = strlen($buf);

    header("Content-type: application/pdf");
    header("Content-Length: $len");
    header("Content-Disposition: inline; filename=decrypt.pdf");
    print $buf;

    /* close input and output files */
    $plop->close_document($doc);
}
catch (PLOPException $e) {
    die("PLOP exception occurred in decrypt sample:\n" .
    "[" . $e->get_errnum() . "] " . $e->get_apiname() . ": " .
    $e->get_errmsg() . "\n");
}
catch (Exception $e) {
    die($e);
}

$plop = 0;

?> 
```

# grep - 简单的 Grep 问题

> ID：12716549
> 
> 赞同：1
> 
> 时间：2012-10-03T20:40:40.920
> 
> 标签：grep

我正在尝试从我拥有的文件中解析项目。我无法弄清楚如何使用 grep 执行此操作，这是语法

```
<FQDN>Compname.dom.domain.com</FQDN>

<FQDN>Compname1.dom.domain.com</FQDN>

<FQDN>Compname2.dom.domain.com</FQDN> 
```

我只想吐出 > 和 < 之间的位有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:44:05.250

Grep 不是你要找的。使用正则表达式尝试 sed：[http ://unixhelp.ed.ac.uk/CGI/man-cgi?sed](http://unixhelp.ed.ac.uk/CGI/man-cgi?sed)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T20:47:53.520

你可以随心所欲地做`grep`：

```
grep -oP '<FQDN>\K[^<]+' FILE 
```

**输出**：

```
Compname.dom.domain.com
Compname1.dom.domain.com
Compname2.dom.domain.com 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T20:48:26.373

grep 可以做一些文本提取。但是不确定这是否是您想要的：

```
grep -Po "(?<=>)[^<]*" 
```

**测试**

```
kent$  echo "<FQDN>Compname.dom.domain.com</FQDN>
dquote> 
dquote> <FQDN>Compname1.dom.domain.com</FQDN>
dquote> 
dquote> <FQDN>Compname2.dom.domain.com</FQDN>"|grep -Po "(?<=>)[^<]*"
Compname.dom.domain.com
Compname1.dom.domain.com
Compname2.dom.domain.com 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T20:49:22.380

正如其他人所说，grep 不是理想的工具。然而：

```
$ echo '<FQDN>Compname.dom.domain.com</FQDN>' | egrep -io '[a-z]+\.[^<]+'
Compname.dom.domain.com 
```

请记住，grep 的目的是匹配事物。该`-o`选项向您显示它匹配的内容。为了使正则表达式条件不属于返回的表达式的一部分，您需要使用前瞻或后瞻，大多数命令行 grep 不支持，因为它是 PCRE 而不是 ERE 的一部分。

```
$ echo '<FQDN>Compname.dom.domain.com</FQDN>' | grep -Po '(?<=>)[^<]+'
Compname.dom.domain.com 
```

该`-P`选项适用于大多数 Linux 环境，但不适用于 *BSD 或 OSX 或 Solaris 等。

# sql-server - 为什么“初始大小”设置会改变？

> ID：12716551
> 
> 赞同：4
> 
> 时间：2012-10-03T20:40:49.773
> 
> 标签：sql-server

是什么导致数据库或日志文件“初始大小”设置发生更改？例如，我们正在尝试缩小过大的事务日志。我们注意到“初始大小”比需要的大得多。我们可以将它设置得更低，但它最终会再次达到更高的值。这是 AutoGrowth 设置吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T22:50:03.787

“初始大小”信息实际上使用了一个非常具有误导性的标题。那应该是“当前文件大小（MB）”更准确。

尝试这个：

选择一个数据库并检查文件的当前大小。与您在 GUI 中看到的相比，它们应该是相同的

```
SELECT file_id, name, physical_name, (size * 8 /1024.0) AS SizeMB FROM sys.database_files 
```

现在增加文件大小（我在这里使用一个名为 DBAdmin 的测试数据库）

```
ALTER DATABASE DBAdmin MODIFY FILE (NAME = dbadmin, SIZE = 1GB) 
```

运行第一个查询，您将看到 SizeMB 现在反映了该新值，GUI 中的“初始大小”也是如此。

现在缩小那个文件

```
DBCC SHRINKFILE(1, 500) 
```

再次查看查询和 GUI 中的值，您会发现它们又回到了 500MB。

这引入了围绕您的事务日志的问题。你是在简单恢复还是完全恢复？如果已完全备份，则增加日志备份的频率以帮助控制事务日志。如果在简单恢复中相应地调整事务日志的大小，请不要对其执行收缩操作，因为如果满足相同的条件，它只需要再次增长，并且增长部分将对您的数据库造成性能影响。

# ruby-on-rails - 使用 text_field 的默认值时避免来自表单参数的 Nil 错误？

> ID：12716559
> 
> 赞同：1
> 
> 时间：2012-10-03T20:41:21.070
> 
> 标签：ruby-on-rails

导轨 2.3.5

如果在下面我使用默认会话值或（优先）表单参数，有没有办法编写下面的代码以避免零错误？

```
<%= f.text_field :deliver_to_addr, :size => 100, :maxlength => 100, :value => params[:request][:delivery_to_address] || session[:address]  %> 
```

我通过在控制器中放置一个逻辑块来解决这个问题，以输出一个变量来保存应该选择的内容（如下），但是有没有一种简单的方法可以解决这个问题，所以我不需要一个块每次我需要使用默认值（在这种情况下为 session[:address]）时的代码？

```
 if !params[:request].blank?
      if !params[:request][:delivery_to_address].blank?
        @delivery_addr_to_select = params[:request][:delivery_to_address]
      else
        @delivery_addr_to_select = session[:address]
      end
    else
      @delivery_addr_to_select = session[:address]
    end

<%= f.text_field :deliver_to_addr, :size => 100, :maxlength => 100, :value => @delivery_addr_to_select %> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T21:40:13.047

您可以使用内置`try`方法：

```
@delivery_addr_to_select = params[:request].try(:[], :delivery_to_address) || session[:address] 
```

这将尝试调用`[]`hash 方法，`:delivery_to_address`如果结果是`nil`它将采用`session[:address]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T21:09:15.717

您可以尝试 gem [andand](https://github.com/raganwald/andand)来帮助将逻辑缩短到

```
@delivery_addr_to_select = params[:request].andand[:delivery_to_address] || session[:address] 
```

无论是否`:request`存在，这都有效，因为只有在不为零`andand`时才会调用。`:delivery_to_address``params[:request]`

# image-processing - 边缘检测识别艺术家风格？

> ID：12716564
> 
> 赞同：2
> 
> 时间：2012-10-03T20:41:33.530
> 
> 标签：image-processing, computer-vision, edge-detection

我只是想知道是否有人尝试过使用边缘检测来单独使用边缘检测来识别艺术家？

我知道大多数边缘检测方法通常用于然后使用对象数据库执行对象检测，但无法确定边缘检测是否可以单独作为一个特征！？

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:53:11.910

它比基本的边缘检测需要更多的东西，并且拥有比照片更好的东西可以产生很大的不同。查看[http://infolab.stanford.edu/~wangz/project/imsearch/ART/SP08/sp_vangogh.pdf](http://infolab.stanford.edu/~wangz/project/imsearch/ART/SP08/sp_vangogh.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T20:54:50.340

是的，在这方面有一些工作（我知道在 L2CRMF，但也有其他工作）。

然而，边缘检测*本身*是不够的；您将其用作识别特征的初步阶段，例如画笔笔触、笔触附近、弧线、方向、平均笔触长度。

在谈论商店时，我被引导相信这种分析是一项吃力不讨好的任务，而且很容易出错；人类感知机敏度仍然远远超过自动化处理的众多领域之一。另一方面，这是在 2003-2004 年，情况可能有所改善。

我已经能够找到[这个参考](http://perso.ens-lyon.fr/patrick.flandrin/VanGogh.pdf)，以及[另一个](http://proceedings.spiedigitallibrary.org/article.aspx?articleid=938473)看起来更有希望的参考。

仅出于历史意义，普林尼 (Naturalis Historia, XXXV.88, 81) 报道了 Protogenes 如何从他所画的线条中认出一位访客是伟大的画家阿佩莱斯，因为它是如此纤细和完美，以至于这样一个绝对的杰作可以符合没有其他人：

> *Ferunt Protogenem protinus, cum contemplatus esset subtilitatem, dixisse Apellem venisse; adfirmavit enim tam absolutum opus non cadere in alium*

# javascript - 如何将 HTML5 画布缩放到包装它的容器的大小？

> ID：12716565
> 
> 赞同：3
> 
> 时间：2012-10-03T20:41:34.470
> 
> 标签：javascript, jquery, html

目前我有一个固定大小的 HTML5 画布，如下所示：

```
<div class="container">
<canvas id="example" width="350" height="250"></canvas>
</div> 
```

但是我希望能够缩放画布，使其与周围的容器大小相同，显然它仍然必须保持相同的纵横比。我还希望它是流畅的，这样如果用户调整浏览器的大小，那么画布将随流体容器一起缩放。

因此，例如，如果我的容器设置为 500 像素的宽度，那么画布的宽度将缩放到相同的大小。例如：

```
<div class="container" style="width:500px;">
<canvas id="example"></canvas>
</div> 
```

例如，画布将获得 500 像素的宽度以匹配容器，高度将自动设置为 357 像素，保持相同的纵横比。

我相信这可以通过一些javascript来实现，我只是不知道该怎么做......我希望我已经提供了足够的信息来帮助我。如果有人可以制作一个 jsfiddle 并在可能的情况下提供一些示例代码，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T20:56:18.520

这是保持纵横比的基本实现：http: [//jsfiddle.net/wtVX2/1/](http://jsfiddle.net/wtVX2/1/)

```
function resizeCanvas(){
    var con = document.getElementById("container"),
        canvas = document.getElementById("canvas"),
        aspect = canvas.height/canvas.width,    
        width = con.offsetWidth,
        height = con.offsetHeight;

    canvas.width = width;
    canvas.height = Math.round(width * aspect);
} 
```

请注意，它只是水平流动的。

jQuery 将是：

```
function resizeCanvas(){
    var con = $("#container"),
        canvas = $("#canvas")[0],
        aspect = canvas.height/canvas.width,
        width = con.width(),
        height = con.height();

    canvas.width = width;
    canvas.height = Math.round(width * aspect);
} 
```

请注意，我仍然以相同的方式设置画布的宽度和高度。如果我们用 CSS 设置宽度/高度，它会拉伸/挤压像素的绘图，你会得到模糊的绘图。

# c# - 清除列表，所有类值都消失了

> ID：12716568
> 
> 赞同：-3
> 
> 时间：2012-10-03T20:41:49.577
> 
> 标签：c#, list, class

```
class Class2
{
    public string ven;
    public List<string> lname = new List<string>();
}
List<Class2> l = new List<Class2>();
List<string> lhs = new List<string>();

Class2 c2 = new Class2();
c2.ven = line_split[0];
c2.lname = lhs;

l.Add(c2);
lhs.Clear(); 
```

当`lhs.Clear()`被执行时，它会清空对象`l`。

我的替代方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:43:15.393

如果您不想清除`lhs`以清除存储在对象上的列表，则必须在将列表分配给对象的字段时复制该列表：

```
c2.lname = new List<string>(lhs); 
```

理想情况下，您会在`Class2`的构造函数中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T20:47:27.510

lhs 和 lname 变量指向同一个`List<string>`对象。所以，当你清除 lhs 时，很自然 lname 也会被清除（它们指向同一个对象！）

如果您不想要这种行为，请将其复制到您的类字段：`c2.lname = new List<string>(lhs)`

# linux - 计算大文件中的行数

> ID：12716570
> 
> 赞同：77
> 
> 时间：2012-10-03T20:42:00.093
> 
> 标签：linux, mapreduce

我通常使用约 20 Gb 大小的文本文件，我发现自己经常计算给定文件中的行数。

我现在做的方式只是`cat fname | wc -l`，而且需要很长时间。有没有更快的解决方案？

我在安装了 Hadoop 的高性能集群中工作。我想知道 map reduce 方法是否有帮助。

我希望解决方案像解决方案一样简单`wc -l`，但不确定它的可行性。

有任何想法吗？

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-10-03T20:45:39.127

尝试：`sed -n '$=' filename`

cat 也是不必要的：`wc -l filename`以您目前的方式就足够了。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-03T22:25:03.557

您的限制速度因素是存储设备的 I/O 速度，因此在简单的换行符/模式计数程序之间进行更改将无济于事，因为这些程序之间的执行速度差异可能会被较慢的磁盘/存储/不管你有什么。

但是，如果您在磁盘/设备之间复制了相同的文件，或者文件分布在这些磁盘之间，您当然可以并行执行该操作。我不具体了解这个 Hadoop，但假设您可以从 4 个不同位置读取 10gb 文件，您可以运行 4 个不同的行计数过程，每个过程都在文件的一部分中，并将它们的结果总结起来：

```
$ dd bs=4k count=655360 if=/path/to/copy/on/disk/1/file | wc -l &
$ dd bs=4k skip=655360 count=655360 if=/path/to/copy/on/disk/2/file | wc -l &
$ dd bs=4k skip=1310720 count=655360 if=/path/to/copy/on/disk/3/file | wc -l &
$ dd bs=4k skip=1966080 if=/path/to/copy/on/disk/4/file | wc -l & 
```

注意`&`在每个命令行，所以所有将并行运行；`dd`像`cat`这里一样工作，但允许我们指定要读取多少字节（`count * bs`字节）以及在输入开头跳过多少字节（`skip * bs`字节）。它以块为单位工作，因此需要指定`bs`为块大小。在此示例中，我已将 10Gb 文件划分为 4 个相等的 4Kb * 655360 = 2684354560 字节 = 2.5GB 的块，为每个作业分配一个，您可能需要根据文件的大小设置一个脚本来为您执行此操作文件和您将运行的并行作业的数量。您还需要总结执行的结果，因为我缺乏 shell 脚本能力而没有做的事情。

如果您的文件系统足够智能，可以在许多设备（如 RAID 或分布式文件系统或其他设备）之间拆分大文件，并自动并行化可以并行化的 I/O 请求，您可以进行这样的拆分，运行许多并行作业，但使用相同的文件路径，你仍然可能有一些速度增益。

编辑：我想到的另一个想法是，如果文件中的行大小相同，则可以通过将文件大小除以行大小来获得确切的行数，均以字节为单位。您几乎可以在一项工作中立即完成。如果您有平均大小并且不完全关心行数，但想要估计，您可以执行相同的操作并比精确操作更快地获得令人满意的结果。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-10-03T13:47:59.103

根据我的测试，我可以验证 Spark-Shell（基于 Scala）比其他工具（GREP、SED、AWK、PERL、WC）快得多。这是我在一个有 23782409 行的文件上运行的测试结果

```
time grep -c $ my_file.txt; 
```

真实 0m44.96s 用户 0m41.59s 系统 0m3.09s

```
time wc -l my_file.txt; 
```

真实 0m37.57s 用户 0m33.48s 系统 0m3.97s

```
time sed -n '$=' my_file.txt; 
```

真实 0m38.22s 用户 0m28.05s 系统 0m10.14s

`time perl -ne 'END { $_=$.;if(!/^[0-9]+$/){$_=0;};print "$_" }' my_file.txt`;

真实 0m23.38s 用户 0m20.19s 系统 0m3.11s

```
time awk 'END { print NR }' my_file.txt; 
```

真实 0m19.90s 用户 0m16.76s 系统 0m3.12s

```
spark-shell
import org.joda.time._
val t_start = DateTime.now()
sc.textFile("file://my_file.txt").count()
val t_end = DateTime.now()
new Period(t_start, t_end).toStandardSeconds() 
```

res1: org.joda.time.Seconds = PT15S

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-02-25T17:56:49.747

在多核服务器上，使用[GNU parallel](http://www.gnu.org/software/parallel/man.html#SYNOPSIS)来并行计算文件行数。打印每个文件的行数后， bc 将所有行数相加。

```
find . -name '*.txt' | parallel 'wc -l {}' 2>/dev/null | paste -sd+ - | bc 
```

为了节省空间，您甚至可以压缩所有文件。以下行解压缩每个文件并并行计算其行数，然后对所有计数求和。

```
find . -name '*.xz' | parallel 'xzcat {} | wc -l' 2>/dev/null | paste -sd+ - | bc 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-08-27T21:56:00.653

如果您的数据位于 HDFS 上，那么最快的方法可能是使用 hadoop 流。Apache Pig 的 COUNT UDF 对包进行操作，因此使用单个 reducer 来计算行数。相反，您可以在简单的 hadoop 流脚本中手动设置 reducer 的数量，如下所示：

```
$HADOOP_HOME/bin/hadoop jar $HADOOP_HOME/hadoop-streaming.jar -Dmapred.reduce.tasks=100 -input <input_path> -output <output_path> -mapper /bin/cat -reducer "wc -l" 
```

请注意，我手动将减速器的数量设置为 100，但您可以调整此参数。一旦 map-reduce 作业完成，每个 reducer 的结果将存储在单独的文件中。最终的行数是所有 reducer 返回的数字的总和。您可以获得最终的行数，如下所示：

```
$HADOOP_HOME/bin/hadoop fs -cat <output_path>/* | paste -sd+ | bc 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-05-06T14:01:14.873

我知道这个问题现在已经有几年了，但是扩展了[Ivella 的最后一个想法](https://stackoverflow.com/a/12717763/5888301)，这个 bash 脚本通过测量一行的大小并从中推断，在几秒钟或更短的时间内***估计一个大文件的行数：***

```
#!/bin/bash
head -2 $1 | tail -1 > $1_oneline
filesize=$(du -b $1 | cut -f -1)
linesize=$(du -b $1_oneline | cut -f -1)
rm $1_oneline
echo $(expr $filesize / $linesize) 
```

如果将此脚本命名为`lines.sh`，则可以调用`lines.sh bigfile.txt`以获取估计的行数。在我的情况下（大约 6 GB，从数据库导出），与真实行数的偏差仅为 3%，但运行速度快了大约 1000 倍。顺便说一句，我使用第二行而不是第一行作为基础，因为第一行有列名，而实际数据从第二行开始。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-10-04T01:20:39.280

Hadoop 本质上提供了一种机制来执行类似于@Ivella 所建议的事情。

Hadoop 的 HDFS（分布式文件系统）将获取您的 20GB 文件并将其以固定大小的块的形式保存在集群中。假设您将块大小配置为 128MB，文件将被拆分为 20x8x128MB 块。

然后，您将对这些数据运行 map reduce 程序，基本上计算每个块的行数（在 map 阶段），然后将这些块行数减少为整个文件的最终行数。

至于性能，通常集群越大，性能就越好（更多的 wc 并行运行，在更多独立的磁盘上），但是作业编排有一些开销，这意味着在较小的文件上运行作业实际上不会更快地产生吞吐量比运行本地 wc

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-05-05T08:06:31.477

我不确定python是否更快：

```
[root@myserver scripts]# time python -c "print len(open('mybigfile.txt').read().split('\n'))"

644306

real    0m0.310s
user    0m0.176s
sys     0m0.132s

[root@myserver scripts]# time  cat mybigfile.txt  | wc -l

644305

real    0m0.048s
user    0m0.017s
sys     0m0.074s 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-05-06T01:41:33.740

如果您的瓶颈是磁盘，那么您如何读取它很重要。`dd if=filename bs=128M | wc -l`比我的具有 HDD 和快速 CPU 和 RAM 的机器要*快得多*。您可以尝试使用块大小并查看吞吐量报告。我把它调高到 1GiB。`wc -l filename``cat filename | wc -l``dd`

注意：关于是否更快有一些`cat`争论`dd`。我所声称的是，这`dd`可以更快，这取决于系统，而且它适合我。自己试试吧。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-07-11T02:16:51.407

如果你的电脑有 python，你可以从 shell 试试这个：

```
python -c "print len(open('test.txt').read().split('\n'))" 
```

这用于`python -c`传入一个命令，该命令基本上是读取文件，并由“换行符”分割，以获取换行符的数量或文件的总长度。

[@BlueMoon 的](https://stackoverflow.com/users/1275169/blue-moon)：

```
bash-3.2$ sed -n '$=' test.txt
519 
```

使用上述：

```
bash-3.2$ python -c "print len(open('test.txt').read().split('\n'))"
519 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-07-30T13:19:31.020

```
find  -type f -name  "filepattern_2015_07_*.txt" -exec ls -1 {} \; | cat | awk '//{ print $0 , system("cat " $0 "|" "wc -l")}' 
```

输出：

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-05-07T04:57:02.533

我有一个 645GB 的文本文件，早期的精确解决方案（例如`wc -l`）都没有在 5 分钟内返回答案。

相反，这是一个 Python 脚本，它计算一个大文件中的**大致**行数。（我的文本文件显然有大约 55 亿行。）Python 脚本执行以下操作：

A. 计算文件中的字节数。

B. 读取文件中的第一`N`行（作为示例）并计算平均行长度。

C. 将 A/B 计算为近似的行数。

它遵循[Nico 的 answer](https://stackoverflow.com/a/43821335/4561314)，但不是取一行的长度，而是计算第一`N`行的平均长度。

注意：我假设一个 ASCII 文本文件，所以我希望 Python`len()`函数将字符数作为字节数返回。

将此代码放入文件中`line_length.py`：

```
#!/usr/bin/env python

# Usage:
# python line_length.py <filename> <N> 

import os
import sys
import numpy as np

if __name__ == '__main__':

    file_name = sys.argv[1]
    N = int(sys.argv[2]) # Number of first lines to use as sample.
    file_length_in_bytes = os.path.getsize(file_name)
    lengths = [] # Accumulate line lengths.
    num_lines = 0

    with open(file_name) as f:
        for line in f:
            num_lines += 1
            if num_lines > N:
                break
            lengths.append(len(line))

    arr = np.array(lengths)
    lines_count = len(arr)
    line_length_mean = np.mean(arr)
    line_length_std = np.std(arr)

    line_count_mean = file_length_in_bytes / line_length_mean

    print('File has %d bytes.' % (file_length_in_bytes))
    print('%.2f mean bytes per line (%.2f std)' % (line_length_mean, line_length_std))
    print('Approximately %d lines' % (line_count_mean)) 
```

`N`使用=5000像这样调用它。

```
% python line_length.py big_file.txt 5000

File has 645620992933 bytes.
116.34 mean bytes per line (42.11 std)
Approximately 5549547119 lines 
```

所以文件中有大约 55 亿行。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-03-06T00:06:57.340

在收集数据以供 wc 处理时，较慢的 IO 回退到`dd if={file} bs=128M | wc -l`极大地帮助。

我也偶然发现

[https://github.com/crioux/turbo-linecount](https://github.com/crioux/turbo-linecount)

这很棒。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-05-19T08:19:47.910

让我们假设：

*   您的文件系统是分布式的
*   您的文件系统可以轻松地将网络连接填充到单个节点
*   您可以像访问普通文件一样访问您的文件

那么你真的想将文件分成几部分，在多个节点上并行计算部分并总结那里的结果（这基本上是@Chris White 的想法）。

以下是使用 GNU Parallel（版本 > 20161222）的方法。您需要列出其中的节点，`~/.parallel/my_cluster_hosts`并且您必须有权`ssh`访问所有节点：

```
parwc() {
    # Usage:
    #   parwc -l file                                                                

    # Give one chunck per host                                                     
    chunks=$(cat ~/.parallel/my_cluster_hosts|wc -l)
    # Build commands that take a chunk each and do 'wc' on that                    
    # ("map")                                                                      
    parallel -j $chunks --block -1 --pipepart -a "$2" -vv --dryrun wc "$1" |
        # For each command                                                         
        #   log into a cluster host                                                
        #   cd to current working dir                                              
        #   execute the command                                                    
        parallel -j0 --slf my_cluster_hosts --wd . |
        # Sum up the number of lines                                               
        # ("reduce")                                                               
        perl -ne '$sum += $_; END { print $sum,"\n" }'
} 
```

用于：

```
parwc -l myfile
parwc -w myfile
parwc -c myfile 
```

# android - 启用 largeHeap 的位图回收

> ID：12716574
> 
> 赞同：10
> 
> 时间：2012-10-03T20:42:19.887
> 
> 标签：android, android-image, android-memory, android-largeheap

在启用`largeHeap`选项之前，我正在处理大型位图，它几乎消耗了应用程序可用的全部内存，并且通过导航回收它并加载新的在几乎可用的完整堆上工作。但是，当某些操作需要更多内存时，应用程序会崩溃。所以我启用`largeHeap=true`了更多的内存。

但是这样做有一个意想不到的行为，看起来`recycle()`位图的方法大部分时间都不起作用，并且在 58Mb 内存中工作的应用程序（有时超过抛出 a `OutOfMemoryException`）现在以指数方式消耗内存并不断增长（现在测试我确实来到了 231Mb 分配的内存），预期的行为是内存管理继续工作并且应用程序不会使用超过 60Mb。

我怎样才能避免这种情况？或者有效地回收位图？

编辑：实际上，我`OutOfMemoryError`在设备上分配超过 390Mb 的内存时给出了一个。读取 GC_* 日志显示只有 GC_FOR_ALLOC 有时释放了 3.8Mb，但几乎没有其他 GC 运行释放了一些东西。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-10T12:13:19.323

您可能应该看看[Displaying Bitmaps Efficiently](http://developer.android.com/training/displaying-bitmaps/index.html)，其中包括几种有效处理大型位图的方法，

*   **有效加载大型位图**

> ```
> BitmapFactory.Options options = new BitmapFactory.Options();
> options.inJustDecodeBounds = true;
> BitmapFactory.decodeResource(getResources(), R.id.myimage, options);
> int imageHeight = options.outHeight;
> int imageWidth = options.outWidth; 
> ```

这将在下载之前为您提供图像的大小，在此基础上，您可以检查设备的大小并使用文档说明中给出的进行`calculateInSampleSize()`缩放。`decodeSampledBitmapFromResource()`

计算我们需要多少缩放图像，

*   [第一种方式](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

> ```
> if (imageHeight > reqHeight || imageWidth > reqWidth) {
>       if (imageWidth > imageHeight ) {
>           inSampleSize = Math.round((float)imageHeight / (float)reqHeight);
>       } else {
>           inSampleSize = Math.round((float)imageWidth / (float)reqWidth);
>       }
>     } 
> ```

*   [第二种方式](http://developer.android.com/training/camera/photobasics.html#TaskScalePhoto)

> ```
> int inSampleSize = Math.min(imageWidth / reqWidth,imageHeight / reqHeight); 
> ```

您可以设置`inSampleSize`,

```
 options.inSampleSize = inSampleSize; 
```

然后最后确保你打电话，

```
options.inJustDecodeBounds = false; 
```

否则它将返回位图为`null`

*   **从 UI 线程处理位图**

    在 UI 线程上处理位图永远不会安全，因此最好在后台线程中执行此操作并在进程完成后更新 UI。

*   **缓存位图**

    [LruCache](http://developer.android.com/reference/android/util/LruCache.html)可从 API 12 获得，但如果您对使用以下版本感兴趣，它也可在[支持库](http://developer.android.com/reference/android/support/v4/util/LruCache.html)中获得。因此，应该使用它有效地完成图像的缓存。您还可以将[DiskLruCache](https://github.com/JakeWharton/DiskLruCache)用于您希望在外部存储中保留更长时间的图像。

*   **清除缓存**

    有时，当您的图像尺寸太大时，甚至缓存图像也会导致`OutOfMemoryError`，因此在这种情况下，当您的图像超出范围或长时间未使用时，最好清除缓存，以便可以缓存其他图像。

    我为此创建了一个演示示例，您可以从[这里下载](https://github.com/lalit3686/ImageCacheDemo)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T06:25:59.940

您的案例表现如预期。在 Honeycomb 之前，`recycle()`是无条件释放内存。但在 3.0 及更高版本上，位图是正常垃圾回收内存的一部分。您在设备上有足够的 RAM，您允许 JVM 分配超过 58M 的限制，现在垃圾收集器已满足并且没有回收位图占用的内存的动力。

您可以通过在具有受控 RAM 量的模拟器上运行来验证这一点，或者在您的设备上加载一些内存消耗服务 - GC 将开始工作。您可以[使用 DDMS](http://android-developers.blogspot.co.il/2011/03/memory-analysis-for-android.html)进一步调查您的内存使用情况。

位图内存管理可以尝试一些解决方案：[Android Bitmaps in Android](https://stackoverflow.com/questions/1945142/bitmaps-in-android) [Bitmap memory leaks](https://stackoverflow.com/questions/10255910/bitmap-memory-leaks) [http://blog.javia.org/how-to-work-around-androids-24-mb-memory-limit/](http://blog.javia.org/how-to-work-around-androids-24-mb-memory-limit/)，不过还是从[官方开始Android 位图提示](http://developer.android.com/training/displaying-bitmaps/index.html)，如[@Lalit Poptani](https://stackoverflow.com/users/726863/lalit-poptani)的[详细回答](https://stackoverflow.com/a/12819091/192373)中所述。

请注意，将位图作为纹理移动到 OpenGL 内存有一些性能影响（但如果您最终通过 OpenGL 渲染这些位图则完美）。纹理和 malloc 解决方案都要求您明确释放不再使用的位图内存。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T14:41:03.837

绝对@Lalit Poptani 答案是这样做的方法，`Bitmaps`如果它们非常大，你应该真正扩展你的。最好的方法是在`server-side`可能的情况下这样做，因为您也会减少`NetworkOperation`时间。

关于实现 a`MemoryCache`和this`DiskCache`是最好的方法，但我仍然建议使用现有的库，它正是这样做的（[`Ignition`](https://github.com/kaeppler/ignition)，因为在我可以假设你可能也有一些`Heap`之后，你没有被清空。`GC``memory leaks`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T02:41:53.567

为了解决您的困境，我相信这是预期的行为。

如果您想释放内存，您可以偶尔调用`System.gc()`，但实际上您应该在大多数情况下让它管理垃圾收集本身。

我建议您保留某种简单的缓存（URL/文件名到位图），通过计算每个位图占用的字节数来跟踪自己的内存使用情况。

```
/**
 * Estimates size of Bitmap in bytes depending on dimensions and Bitmap.Config
 * @param width
 * @param height
 * @param config
 * @return
 */
public static long estimateBitmapBytes(int width, int height, Bitmap.Config config){
    long pixels=width*height;
    switch(config){
    case ALPHA_8: // 1 byte per pixel
        return pixels;
    case ARGB_4444: // 2 bytes per pixel, but depreciated
        return pixels*2;
    case ARGB_8888: // 4 bytes per pixel
        return pixels*4;
    case RGB_565: // 2 bytes per pixel
        return pixels*2;
    default:
        return pixels;
    }
} 
```

然后您查询应用程序正在使用多少内存以及可用内存量，可能会占用一半并尝试将总图像缓存大小保持在该值之下，只需在您出现时从列表中删除（取消引用）旧图像违反此限制，**不回收**。当位图从缓存中取消引用并且没有被任何视图使用时，让垃圾收集器清理位图。

```
/**
 * Calculates and adjusts the cache size based on amount of memory available and average file size
 * @return
 */
synchronized private int calculateCacheSize(){
    if(this.cachedBitmaps.size()>0){
        long maxMemory = this.getMaxMemory(); // Total max VM memory minus runtime memory 
        long maxAllocation = (long) (ImageCache.MEMORY_FRACTION*maxMemory);
        long avgSize = this.bitmapCacheAllocated / this.cachedBitmaps.size();
        this.bitmapCacheSize = (int) (maxAllocation/avgSize);
    }
    return this.bitmapCacheSize;
} 
```

我建议您不要使用`recycle()`，它会导致很多间歇性异常（例如当看似已完成的视图尝试访问回收的位图时）并且通常看起来有问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-16T12:37:43.297

在 Android 上处理位图时必须非常小心。让我换个说法：即使在具有 4 GB RAM 的系统上，您也必须小心处理位图。这些家伙有多大，你有很多吗？如果它很大，您可能需要将其切碎并平铺。请记住，您使用的是视频 RAM，它与系统 RAM 不同。

在Honeycomb 之前，Bitmap 被分配在C++ 层，因此RAM 的使用对Java 是不可见的，并且垃圾收集器无法访问。具有 RGB24 颜色空间的 3 MP 未压缩位图使用大约 9-10 兆字节（大约 2048x1512）。因此，较大的图像可以轻松填满您的堆。还要记住，在任何用于视频 RAM（有时是专用 RAM，有时与系统共享）中，数据通常以未压缩的形式存储。

基本上，如果您的目标是蜂窝设备之前的设备，您几乎必须像在编写 C++ 程序一样管理 Bitmap 对象。如果图像不多，则运行位图 recycle() onDestory() 通常可以工作，但如果屏幕上有大量图像，则可能必须即时处理它们。此外，如果您启动另一个活动，您可能必须考虑将逻辑放入 onPause() 和 onResume()。

当图像不在视频 RAM 中时，您还可以使用 Android 文件系统或 SQLite 缓存图像。如果您使用 .jpg 或 .png 等包含大量重复数据的格式/

# vb.net - VB.NET 支持 Promises/Deferreds 吗？

> ID：12716579
> 
> 赞同：1
> 
> 时间：2012-10-03T20:42:33.223
> 
> 标签：vb.net, deferred, promise

我对类似于 jQuery 的 Deferred 对象感兴趣。下面的链接似乎是面向线程的。当 Javascript 在单个分时线程中运行时，模型是完全不同的。

[http://www.codethinked.com/net-40-and-systemthreadingtasks](http://www.codethinked.com/net-40-and-systemthreadingtasks)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T20:56:26.837

看看.NET 4.5 和 Visual Studio 2012 中可用[的 Async and Await（C# 和 Visual Basic）的异步编程](http://msdn.microsoft.com/en-us/library/hh191443.aspx)。它建立在您上面提供的链接主题的任务并行库所奠定的基础架构之上。

# centos - Linux Web 浏览器作为屏幕保护程序

> ID：12716586
> 
> 赞同：2
> 
> 时间：2012-10-03T20:43:08.513
> 
> 标签：centos, screensaver

当屏幕锁定时，我希望能够在我们的组计算机上显示我的 Nagios 仪表板。理想情况下，我们可以使用屏幕锁定器将 Firefox 或 Opera 加载到信息亭模式，但经过两天的努力，我无法让这也正常工作。我们正在使用带有 Gnome 的 CentOS 6.3。

如何获得屏幕保护程序来显示网页或在网页列表上旋转。

谢谢你。

# javascript - 当元素不再出现在屏幕上时？

> ID：12716588
> 
> 赞同：0
> 
> 时间：2012-10-03T20:43:16.140
> 
> 标签：javascript, jquery

在我的网站中，有一个向右滚动的浮动云（元素），我想知道它何时不再出现在屏幕上。

我该怎么做？

```
setInterval(function(){
    if(!jQuery('.sa_cloud_l').is(':visible')){
        alert('not visible anymore');
    }else{          
        c1.css('left', '+=21');
    }
},100); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:47:48.487

`:visible`仅选择其 CSS*显示*属性不是的元素`none`。你可以使用`offset()`方法。

```
var width = $(window).width();

setInterval(function(){
        if ( $('.sa_cloud_l').offset().left > width ) {
            alert('not visible anymore');
        } else {          
            c1.css('left', '+=21');
        }
},100); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T20:46:30.230

选择`:visible`器不考虑在浏览器的视口内。

[http://api.jquery.com/visible-selector/](http://api.jquery.com/visible-selector/)

> 如果元素占用了文档中的空间，则元素被认为是可见的。可见元素的宽度或高度大于零。
> 
> 具有 visibility: hidden 或 opacity: 0 的元素被认为是可见的，因为它们仍然占用布局中的空间。在隐藏元素的动画期间，该元素被认为是可见的，直到动画结束。在显示元素的动画期间，该元素被认为在动画开始时可见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T20:46:34.223

检查 jquery 插件视口[http://www.appelsiini.net/projects/viewport](http://www.appelsiini.net/projects/viewport)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T20:46:39.210

```
if ($(window).scrollLeft() <= $(this).offset().left 
    && $(this).offset().left < $(window).width()+$(window).scrollLeft()
    && $(window).scrollTop() <= $(this).offset().top 
    && $(this).offset().top < $(window).height()+$(window).scrollTop()) {
    // at least part of 'this' is within the window
} 
```

# java - 从抽象类继承泛型类型方法——转换为特定类型

> ID：12716589
> 
> 赞同：1
> 
> 时间：2012-10-03T20:43:18.453
> 
> 标签：java, generics, overriding, abstract-class, type-bounds

（在 Java 中工作）我有一个抽象类，在整个类中都有泛型类型：

```
public abstract class ConnectionProcessor<T>
{
    public void process()
    {
        for (List<T> resultsPage : connection)
        {
            processPage(resultsPage);
        }
    }

    protected abstract void processPage(List<T> resultsPage);
} 
```

我有另一个类扩展了所述抽象类，声明如下：

```
public class AlbumProcessor<Album> extends ConnectionProcessor
{
    @Override
    protected void processPage(List resultsPage)
    {
        //Do stuff here specific to Album
    }
} 
```

此声明工作正常，但在`processPage`我想做特定的`Album`事情时，我尽量避免在不需要使用它时进行强制转换。我更喜欢这是方法声明：

```
protected void processPage(List<Album> resultsPage) 
```

但这不符合覆盖`processPage`from的要求`ConnectionProcessor`。为什么是这样？如何获得所需的行为？我会认为我可以在任何地方都`AlbumProcessor`插入，但事实并非如此。`<Album>``ConnectionProcessor``<T>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:45:55.143

那是因为您没有将超类 Generic 类型绑定`T`到`Album`.

相反，这是你应该做的：

```
public class AlbumProcessor extends ConnectionProcessor<Album> 
```

因此，当您覆盖您的方法时`processPage`，（使用 IDE），它将生成如下代码：

```
@Override
protected void processPage(List<Album> resultsPage)
{
    //Do stuff here specific to Album
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T20:48:07.577

尝试

```
//extend prameterized version of ConnectionProcessor<T> with Album as actual type argument
public class AlbumProcessor extends ConnectionProcessor<Album> { 
```

代替

```
public class AlbumProcessor<Album> extends ConnectionProcessor { 
```

当您执行上述操作时，您正在扩展泛型类型的原始版本`ConnectionProcessor<T>`并引入一个新的形式类型参数 - `Album`(like `T`)，在这种情况下它不是实际的类型参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T20:44:49.710

```
public class AlbumProcessor extends ConnectionProcessor<Album> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T20:45:17.230

尝试： -

```
public class AlbumProcessor extends ConnectionProcessor<Album>
{
    @Override
    protected void processPage(List<Album> resultsPage)
    {
        //Do stuff here specific to Album
    }
} 
```

您需要将您的超类与您想要作为类型参数提供给您的方法声明中的 List 的类型绑定..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T21:11:05.497

更像这样的东西怎么样。

```
import java.util.List;

public abstract class ConnectionProcessor<T>
{
    public void process()
    {
        System.out.println("Hello");
    }

    protected abstract void processPage(List<? extends T> resultsPage);
} 
```

...

```
public class ProcessorImpl extends ConnectionProcessor<Album> {

    protected void processPage(List<? extends Album> resultsPage) {
        for(Album result : resultsPage){
            System.out.println(result.getAlbumName());
        }
    }

} 
```

...

```
public class Album {
    public String getAlbumName(){
        return "Sweet Smooth SOunds of the 70's";
    }
} 
```

# c# - 使用 System.DirectoryServices.AccountManagement 时 Active Directory 用户创建延迟

> ID：12716593
> 
> 赞同：2
> 
> 时间：2012-10-03T20:43:54.337
> 
> 标签：c#, .net, active-directory, user-accounts

我正在使用`System.DirectoryServices.AccountManagement`.NET 4.5 创建帐户并在其上设置属性。其中一项要求是从模板帐户复制组成员身份（包括主组）。代码包括以下内容：

```
foreach (var group in userPrincipal.GetGroups()) {
    var groupPrincipal = (GroupPrincipal) @group;

    if (groupPrincipal.Sid != templatePrimaryGroup.Sid) {
        groupPrincipal.Members.Remove(userPrincipal);
        groupPrincipal.Save();
    }
} 
```

这在大约 90% 的时间里都有效。其余时间，它失败了：

> `System.DirectoryServices.DirectoryServicesCOMException was unhandled HResult=-2147016656 Message=There is no such object on the server.`
> 
> `Source=System.DirectoryServices ErrorCode=-2147016656 ExtendedError=8333 ExtendedErrorMessage=0000208D: NameErr: DSID-03100213, problem 2001 (NO_OBJECT), data 0, best match of: 'OU=Whatever,DC=domain,DC=local``

在`GetGroups`通话中。我的猜测是存在某种竞争条件，在我下次访问它之前没有完全创建用户。我从诊断日志中知道我每次都针对同一个域控制器（它使用的是相同的`PrincipalContext`，因此符合我的期望）所以这不是复制问题。

我的猜测准确吗？有没有好的方法来处理这个？我可以扔一个`Sleep`，但这似乎充其量是一种逃避，最坏的情况是脆弱。那么正确的做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:33:14.223

尝试类似：

```
 int maxWait = 120;
        int cnt = 0;
        bool usable = false;

        while (usable == false && cnt < maxWait)
        {
            try
            {
                foreach (var group in userPrincipal.GetGroups())
                {
                    var groupPrincipal = (GroupPrincipal)@group;

                    if (groupPrincipal.Sid != templatePrimaryGroup.Sid)
                    {
                        groupPrincipal.Members.Remove(userPrincipal);
                        groupPrincipal.Save();
                    }
                }
                usable = true;
                break;
            }
            catch
            {
                System.Threading.Thread.Sleep(500);
            }
        }
        if (usable)
            //All okay
            ;
        else
            //Do something
            ; 
```

这样你就可以尝试“一段时间”。如果它运行良好，如果没有，则执行诸如记录错误之类的操作，以便您稍后运行修复脚本。

# mysql - 尝试通过链接服务器（mssql -> mysql）更新时出错 - 选择有效

> ID：12716595
> 
> 赞同：0
> 
> 时间：2012-10-03T20:44:03.857
> 
> 标签：mysql, sql-server-2008, odbc

尝试通过链接服务器进行更新时遇到问题。错误如下：

```
OLE DB provider "MSDASQL" for linked server "**LINKED_SERVER_NAME" returned message "Data provider or other service returned an E_FAIL status.".
Msg 7330, Level 16, State 2, Line 1
Cannot fetch a row from OLE DB provider "MSDASQL" for linked server "LINKED_SERVER_NAME". 
```

我选择数据没有问题，但任何时候我尝试进行更新都会失败。我的更新代码：

```
Update [LINKED_SERVER_NAME]...[Table_Name]
SET post_content = 'alert'
where ID = 5061 
```

这是我的选择语句，它确实有效：

```
select top 100 * from [LINKED_SERVER_NAME]...[Table_Name] where ID = 5061 
```

我在用：

*   微软 SQL Server 管理工作室 2008
*   尝试通过 ODBC 连接器 5.2 从 MS SQL -> MySQL 连接（5.1 有同样的问题）

更新我尝试使用“OPENQUERY”->这也不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:56:26.903

[OPENQUERY](http://msdn.microsoft.com/en-us/library/ms188427%28v=sql.100%29.aspx "OPENQUERY (Transact-SQL)")并不新鲜，但在处理非 Microsoft 链接服务器时它更加可靠。

```
UPDATE OPENQUERY (LINKED_SERVER_NAME, 'SELECT post_content FROM Table_Name WHERE ID = 5061') 
SET post_content = 'alert'; 
```

*   不要在 mysql 查询中使用 [ ] 方括号；您可以改用撇号。
*   检查您是否具有表的更新权限。
*   尝试直接在 mysql 连接上运行更新。这可能是与链接服务器无关的错误。
*   mysql表是视图吗？它可能未正确配置为可更新视图。 [MySQL 创建视图语法](http://dev.mysql.com/doc/refman/5.1/en/create-view.html "MySQL 5.1 创建视图语法")

如果这仍然不能解决问题，请将您的实际 openquery 代码粘贴到问题中。

# mongodb - Mongodb：批处理作业和删除数据

> ID：12716599
> 
> 赞同：0
> 
> 时间：2012-10-03T20:44:11.827
> 
> 标签：mongodb

我正在编写一个批处理作业来使用聚合框架聚合一些数据。由于数据输出可能很大，我`$limit`在管道顶部使用 a 来减少一次处理的对象数量。我的问题是：聚合完成后，如何可靠地从集合中删除所有已处理的对象，而不必担心竞争条件？或者，如果有另一种方法可以去做我想做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:53:23.183

```
1> rename your collection

2> Now do all your processing on the new collection. 
```

*警告：它在分片环境中效果不佳*

# php - 设置PHP项目的自动GIT部署

> ID：12716604
> 
> 赞同：7
> 
> 时间：2012-10-03T20:44:24.253
> 
> 标签：php, git, deployment, web, bitbucket

我想要做的是，从 FTP 部署切换到 GIT。我的意思是，我想自动保持同步我的 Bitbucket 私人仓库和我的共享虚拟主机。我用谷歌搜索并找到了以下脚本来部署我的网络服务器（[基于这篇文章](http://www.stephenradford.me/blog/tutorials/deploy-via-bitbucket-or-github-service-hooks)）。

```
// Set these dependant on your BB credentials    
$username = 'username';
$password = 'password';

// Grab the data from BB's POST service and decode
$json = stripslashes($_POST['payload']);
$data = json_decode($json);

// Set some parameters to fetch the correct files
$uri   = $data->repository->absolute_url;
$node  = $data->commits[0]->node;
$files = $data->commits[0]->files;

// Foreach through the files and curl them over    
foreach ($files as $file) {
    if ($file->type == "removed") {
        unlink($file->file);
    } else {
        $url  = "https://api.bitbucket.org/1.0/repositories"
            . $uri . "raw/" .$node ."/" . $file->file;
        $path = $file->file;

        $dirname = dirname($path);
        if (!is_dir($dirname)) {
            mkdir($dirname, 0775, true);
        }

        $fp = fopen($path, 'w');

        $ch = curl_init($url);
        curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); 
        curl_setopt($ch, CURLOPT_FILE, $fp);

        $data = curl_exec($ch);

        curl_close($ch);
        fclose($fp);    
    }   
} 
```

问题是，这适用于简单的变更集，例如 5-10 文件更改。但是当我第一次将整个项目（例如 600-700 个文件和文件夹）推送到我的 bitbucket 私人配置文件时，这个脚本不起作用。（只是没有，errors.log 上没有错误）

我错过了什么？

顺便说一句，我可以这样做吗：

正如我们所知，Bitbucket 可以在提交后直接将 POST 信息发送到准确的 url（由用户提供）。因此，当 deploy.php 收到 POST 时，我们可以将整个提交以 zip 或 tar 格式获取，清理当前文件并将新提交解压缩到 webserver。

那可能吗？如果是，那怎么办？还有什么好办法吗？

# 更新

我发现下面的代码用于自动部署 php 项目。问题是`https://bitbucket.org/$username/$reponame/get/tip.zip`这个 url 在 bitbucket private git repo 上不起作用：可能与身份验证有关（我没有在公共 repo 上测试过）我需要的是获取最后一次提交的 zip 文件并在我的项目中解压缩。

```
<?

// your Bitbucket username
$username   = "edifreak";

// your Bitbucket repo name
$reponame   = "canvas-game-demo";

// extract to
$dest       = "./"; // leave ./ for relative destination

////////////////////////////////////////////////////////
// Let's get stuff done!

// set higher script timeout (for large repo's or slow servers)
set_time_limit(380);

// download the repo zip file
$repofile = file_get_contents("https://bitbucket.org/$username/$reponame/get/tip.zip");
file_put_contents('tip.zip', $repofile);
unset($repofile);

// unzip
$zip = new ZipArchive;
$res = $zip->open('tip.zip');
if ($res === TRUE) {
    $zip->extractTo('./');
    $zip->close();
} else {
    die('ZIP not supported on this server!');
}

// delete unnecessary .hg files
@unlink("$username-$reponame-tip/.hgignore");
@unlink("$username-$reponame-tip/.hg_archival.txt");

// function to delete all files in a directory recursively
function rmdir_recursively($dir) { 
    if (is_dir($dir)) { 
        $objects = scandir($dir); 
        foreach ($objects as $object) { 
            if ($object != "." && $object != "..") { 
                if (filetype($dir."/".$object) == "dir") rmdir_recursively($dir."/".$object); else unlink($dir."/".$object); 
            } 
        } 
        reset($objects); 
        rmdir($dir); 
    } 
} 

// function to recursively copy the files
function copy_recursively($src, $dest) {
    if (is_dir($src)) {
        if($dest != "./") rmdir_recursively($dest);
        @mkdir($dest);
        $files = scandir($src);
        foreach ($files as $file)
            if ($file != "." && $file != "..") copy_recursively("$src/$file", "$dest/$file"); 
        }
    else if (file_exists($src)) copy($src, $dest);
    rmdir_recursively($src);
}

// start copying the files from extracted repo and delete the old directory recursively
copy_recursively("$username-$reponame-tip", $dest);

// delete the repo zip file
unlink("tip.zip");

// Yep, we're done :)
echo "We're done!";

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T01:00:59.527

此解决方案不提供身份验证：

```
// download the repo zip file
$repofile = file_get_contents("https://bitbucket.org/$username/$reponame/get/tip.zip");
file_put_contents('tip.zip', $repofile);
unset($repofile); 
```

但是 curl 允许它。因此，可以以与第一个脚本相同的方式从私有存储库下载 zip 存档。

```
$node = ''; // a node from repo, like c366e96f16...

$fp = fopen($path, 'w');

$ch = curl_init("https://bitbucket.org/$username/$reponame/get/$node.zip");
curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); 
curl_setopt($ch, CURLOPT_FILE, $fp);

$data = curl_exec($ch);

curl_close($ch);
fclose($fp); 
```

我已经为我的 bitbucket 帐户测试了它。它工作得很好。

如果需要获取最后一个变更集节点，我们应该使用 bitbucket api[获取变更集列表](https://confluence.atlassian.com/display/BITBUCKET/changesets+Resource#changesetsResource-GETalistofchangesets)：

```
$username = 'login';
$password = 'pass';
$owner = $username; // if user is owner
$repo = 'repo name';

$response = "";
$callback = function($url, $chunk) use (&$response){
    $response .= $chunk;
    return strlen($chunk);
};

$ch = curl_init("https://api.bitbucket.org/1.0/repositories/$owner/$repo/changesets?limit=1");

curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");

curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('User-Agent:Mozilla/5.0'));
curl_setopt($ch, CURLOPT_WRITEFUNCTION, $callback);
curl_exec($ch);
curl_close($ch);

$changesets = json_decode($response, true);
$node = $changesets['changesets'][0]['node'];
$raw_node = $changesets['changesets'][0]['raw_node'];

print($node . PHP_EOL);
print($raw_node . PHP_EOL); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T03:07:25.097

我最近发现了 Capistrano，它是一个很棒的工具。它最初是为 ruby​​ 开发的，但与 php 结合起来也很棒[http://www.davegardner.me.uk/blog/2012/02/13/php-deployment-with-capistrano/](http://www.davegardner.me.uk/blog/2012/02/13/php-deployment-with-capistrano/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T06:01:40.113

根据您的更新，将您的 php 文件内容替换为以下代码：

```
<?php
// Set these dependant on your BB credentials    
$username = '';
$password = '';

// your Bitbucket repo name
$reponame   = "";

// extract to
$dest = "./"; // leave ./ for relative destination
// Grab the data from BB's POST service and decode
$json = stripslashes($_POST['payload']);
$data = json_decode($json);

// set higher script timeout (for large repo's or slow servers)
set_time_limit(5000);

// Set some parameters to fetch the correct files
$uri = $data->repository->absolute_url;
$node = $data->commits[0]->node;
$files = $data->commits[0]->files;

// download the repo zip file
$fp = fopen("tip.zip", 'w');

$ch = curl_init("https://bitbucket.org/$username/$reponame/get/$node.zip");
curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_FILE, $fp);

$data = curl_exec($ch);

curl_close($ch);
fclose($fp);

// unzip
$zip = new ZipArchive;
$res = $zip->open('tip.zip');
if ($res === TRUE) {
    $zip->extractTo('./');
    $zip->close();
} else {
    die('ZIP not supported on this server!');
}

// function to delete all files in a directory recursively
function rmdir_recursively($dir) {
    if (is_dir($dir)) {
        $objects = scandir($dir);
        foreach ($objects as $object) {
            if ($object != "." && $object != "..") {
                if (filetype($dir . "/" . $object) == "dir")
                    rmdir_recursively($dir . "/" . $object); else
                    unlink($dir . "/" . $object);
            }
        }
        reset($objects);
        rmdir($dir);
    }
}

// function to recursively copy the files
function copy_recursively($src, $dest) {
    if (is_dir($src)) {
        if ($dest != "./")
            rmdir_recursively($dest);
        @mkdir($dest);
        $files = scandir($src);
        foreach ($files as $file)
            if ($file != "." && $file != "..")
                copy_recursively("$src/$file", "$dest/$file");
    }
    else if (file_exists($src))
        copy($src, $dest);
    rmdir_recursively($src);
}

// start copying the files from extracted repo and delete the old directory recursively
copy_recursively("$username-$reponame-$node", $dest);

// delete the repo zip file
unlink("tip.zip");
?> 
```

# 更新

这是此脚本的存储库（由我修改）

1.  [GitHub](https://github.com/codearts/BitBucket-Deploy)
2.  [比特桶](https://bitbucket.org/codearts/bitbucket-deploy)

# android - 在 Jelly Bean 上访问其他 Android 应用的资产

> ID：12716607
> 
> 赞同：4
> 
> 时间：2012-10-03T20:44:46.857
> 
> 标签：android, google-play, android-4.2-jelly-bean

我有一对 Android 应用程序。一个是免费的“阅读器”应用程序，另一个是付费的“数据”应用程序，其资产子目录中有一个文本文件。

阅读器应用程序使用以下代码访问数据应用程序的文本文件：

```
Intent myIntent = new Intent("myintent");
List<ResolveInfo> dataPacks = packageManager.queryIntentActivities(myIntent, 0);
String packageName = dataPacks.get(0).activityInfo.packageName
Resources res = packageManager.getResourcesForApplication(packageName);
AssetManager assets = res.getAssets();
String[] dataFiles = assets.list("Data"); 
```

这一直运行良好，但使用 Google Play 下载到 Jelly Bean 的应用程序无法运行（数据文件为空）。如果该应用程序是直接从电子邮件安装的，那很好，所以我怀疑我的问题与 Google Play 最近的安全更改有关。但是，据称这些已被撤消，但我仍然遇到问题。

任何人都可以阐明出了什么问题吗？（不幸的是我没有果冻豆设备）

或者，有人可以建议一种更好的机制来访问数据应用程序的 txt 文件吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T02:54:17.807

JB 设备上的付费应用程序被“前向锁定”。这意味着 APK 分为两部分 - 一部分是公共资源，另一部分是私有资源和代码，其他应用程序无法读取。这里的一些细节：http: [//nelenkov.blogspot.com/2012/07/using-app-encryption-in-jelly-bean.html](http://nelenkov.blogspot.com/2012/07/using-app-encryption-in-jelly-bean.html)

我没有详细研究文件是如何拆分的，但是您看到的问题表明资产是私有 APK 的一部分，这是有道理的，因为您通常将 API 密钥等粘贴在资产中。

因此，您需要使用更间接的方法在两个应用程序之间共享信息，例如 ContentProvider 或远程服务。确保您需要签名权限才能访问它们，以确保只有您自己的应用程序可以使用它们。

# python - pymongo 可以检测集合是否有上限吗？

> ID：12716608
> 
> 赞同：3
> 
> 时间：2012-10-03T20:44:47.763
> 
> 标签：python, mongodb, pymongo

我正在用 Python 编写功能以确保 mongodb 集合的存在、类型和大小。这些收藏中的大多数都有上限。我知道 mongo shell 包括`mycollection.iscapped()`，但 pymongo 似乎不支持此功能。

在 pymongo 的上下文中，判断集合是否为上限集合的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T21:00:46.740

如果它是一个有上限的集合，调用`mycollection.options()`将返回一个 dict 。`'capped': True`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T21:01:44.163

找到了。

```
# Where db is a pymongo database object
>>> db.command('collstats','mycollection')
{u'count': 308291, u'ns': u'mydb.mycollection', u'ok': 1.0, u'lastExtentSize': 83890176, u'avgObjSize': 256.10971452296695, u'max': 2147483647, u'totalIndexSize': 20407296, u'flags': 0, u'capped': 1, u'numExtents': 1, u'nindexes': 1, u'storageSize': 83890176, u'indexSizes': {u'tem_1_tbm_1_ip1_1_ip2_1_p2_1': 20407296}, u'paddingFactor': 1.0, u'size': 78956320} 
```

注意`'capped': 1`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-03T16:05:19.603

要获取我使用的数据库中所有上限集合的列表：

```
def get_capped_collections(db):
    capped_collections = []
    for collcetion in db.collection_names():
        options = db[collection].options()
        if "capped" in options and options["capped"]:
            capped_collections.append(collection)
    return capped_collections 
```

# jquery - 使用 jQuery 的 fadeIn() 方法时 Chrome 中的黄色滚动条

> ID：12716618
> 
> 赞同：1
> 
> 时间：2012-10-03T20:45:29.087
> 
> 标签：jquery, google-chrome, visualization

我正在尝试制作一个模式窗口，该窗口将在单击链接后出现。最初显示一个掩码以填满整个屏幕，然后使用 jQuery 的 fadeIn() 方法显示模态窗口。它在 FF、Opera、Safari 甚至 IE 中运行良好（有一些小评论：）。然而问题在于，在可视化过程中，Chrome 中的滚动条在完全可见之前以不同的颜色出现，例如黄色、红色和黑色。有没有办法避免这种情况发生？

我的html代码是：

```
<a href="#dialog" name="modal">Simple Window Modal</a>

<div id="dialog">
    <div id="file"><div style="height:500px;"></div></div>
</div>

<div id="mask"></div> 
```

jQuery代码：

```
$().ready(function() {

    $('a[name=modal]').click(function(e) {

        e.preventDefault();

        var id = $(this).attr('href');

        var maskHeight = $(document).height();
        var maskWidth = $(window).width();

        $('#mask').css({'width':maskWidth,'height':maskHeight});

        $('#mask').fadeIn(500);
        $('#mask').fadeTo("fast", 0.9);

        $('#mask').show();

        var winH = $(window).height();
        var winW = $(window).width();

        $(id).css('top',  winH/2-$(id).height()/2);
        $(id).css('left', winW/2-$(id).width()/2);

        $(id).fadeIn(500);

    });
}); 
```

结果：

[Google Chrome 中的黑色滚动条 http://www.strangerstudio.net/demo/chrome-scrollbars-1.png](http://www.strangerstudio.net/demo/chrome-scrollbars-1.png)

有一些内容：

[Google Chrome 中的黄色滚动条 http://www.strangerstudio.net/demo/chrome-scrollbars-2.png](http://www.strangerstudio.net/demo/chrome-scrollbars-2.png)

非常感谢！

编辑：当时可能无法避免这种不需​​要的效果，因为即使是 chrome://chrome/settings/ 中带有滚动条的弹出窗口也有它。

# javascript - 在 Chrome 打包应用程序 v2 中如何检查窗口是否最大化？

> ID：12716621
> 
> 赞同：3
> 
> 时间：2012-10-03T20:45:40.803
> 
> 标签：javascript, google-chrome-extension, google-chrome-app

我使用新的 Google Chrome 打包应用程序 v2 创建了一个无框窗口

我创建了最小化、最大化和关闭按钮，并将它们连接到适当的 JavaScript 函数并让它们工作。

我不知道谁来检查窗口是否已经在 J​​avaScript 中最大化，有什么想法吗？

下面的例子展示了如何最小化一个窗口，我花了一些时间来理解它并实现它，它可以工作。 [https://github.com/GoogleChrome/chrome-app-samples/blob/master/frameless-window/style.css](https://github.com/GoogleChrome/chrome-app-samples/blob/master/frameless-window/style.css)

如果最大化，最大化按钮必须恢复窗口，如果你双击窗口标题栏它最大化但我没有得到任何事件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T04:10:12.093

目前这是不可能的。[错误 134068](http://code.google.com/p/chromium/issues/detail?id=134068)用于查询窗口的属性，[错误 134070](http://code.google.com/p/chromium/issues/detail?id=134070)用于在事件发生变化时获取事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T22:55:16.677

现在似乎有可能在过去几周内修复了那些提到的错误。

# bash - Bash 脚本说找不到命令

> ID：12716633
> 
> 赞同：0
> 
> 时间：2012-10-03T20:46:15.753
> 
> 标签：bash, centos

我尝试运行以下 bash 脚本来为用户创建一堆用户、组、主目录以及所有这些的正确权限。操作系统是 CentOS。

当我尝试运行以下，虽然我应该工作，它通过终端运行时返回“找不到命令”。它只涉及创建 /homedirs 目录，仅此而已。我在 bash 脚本方面完全是个菜鸟，所以如果这看起来很难看，请原谅我。

```
mkdir /homedirs; chmod 775 /homedirs;

for iYear in {1..3} do
    sYear = $iYear"ti"
    sYearDir = "/homerirs/"$sYear
    groupadd $sYear; mkdir $sYearDir; chgrp $sYear $sYearDir; chmod 750 $sYearDir

    for sClass in {a,b} do
        sClassDir = $sYearDir/$sClass
        mkdir $sClassDir
        sClassGrp = $sYear$sClass
        groupadd $sClassGrp; chgrp $sClassGrp $sClassDir; chmod 750 $sClassDir

        for iUser in {1..3} do
            sUserName = "i"$iYear$sClass"g"$iUser
            sUserDir = $sClassDir/$sUserName
            useradd -d $sUserDir -g $sClassGrp -G $sYear -m $sUserName
            chown $sUserName $sUserDir; chmod 750 $sUserDir
        done
    done
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:48:34.003

您可能需要设置您的`PATH`并且您确实应该阅读[高级 bash 脚本指南](http://tldp.org/LDP/abs/html/)。另请参阅[此答案](https://stackoverflow.com/questions/12650661/ruby-in-linux-permanently-source-rvm-scripts-rvm/12650667#12650667)。

`#!/bin/bash -vx`我还建议通过将其作为第一行来调试您的脚本。`chmod u+x`你应该至少让它可执行。

也许`groupadd`您的系统上可能不可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T21:02:31.160

错误消息是由等号周围的空格引起的。后面带有空格的记号被解释为命令名；所以你打算作为变量名的东西会导致`Command not found`错误。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-03T21:05:48.727

最好的办法是在可执行文件之前添加完整路径：

将 useradd 更改为 /usr/sbin/useradd

将 groupadd 更改为 /usr/sbin/groupadd

将治愈未找到的命令。

请记住，这些程序可能需要以 root 身份运行才能工作。

# java - Java nio2：在文件系统之间映射 Path 对象而不依赖于 toString

> ID：12716640
> 
> 赞同：0
> 
> 时间：2012-10-03T20:46:55.180
> 
> 标签：java, zipfile, nio2

我正在使用 NIO2 从源目录的内容创建一个 zip 文件。我正在使用[ZipFileSystem](http://docs.oracle.com/javase/7/docs/technotes/guides/io/fsp/zipfilesystemprovider.html)，为此我首先必须获得一个实例，然后生成路径。然后可以使用生成的路径在 zip 文件中使用`Files.createDirectory(pathInZip)`或创建条目`Files.copy(sourcePath, destPathInZip)`。这很好用，但是我想避免一些丑陋的时刻：

```
 // within the SimpleFileVisitor that walks through sourceDirFile
 @Override
 public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) throws IOException {
    Path pathInZip = zipFileSystem.getPath(sourceDirPath.relativize(file).toString()); // <-- ?!
    Files.copy(file, pathInZip);
    return FileVisitResult.CONTINUE;
 } 
```

有没有办法将路径从一个 FileSystemProvider 复制到另一个路径而不依赖于`aPath.toString()`？看起来很丑。我总是可以遍历一条路径，逐步构建另一条路径……但是拥有一个 FileSystem.getPath(Path anotherPath) 似乎很容易，以至于我花时间写这篇文章。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T06:47:03.090

我一直在使用下面的 dirutils lib，我认为它可以满足您的要求。它使用 toPath.resolve()

[https://github.com/bbejeck/Java-7/blob/master/src/main/java/bbejeck/nio/files/visitor/CopyDirVisitor.java](https://github.com/bbejeck/Java-7/blob/master/src/main/java/bbejeck/nio/files/visitor/CopyDirVisitor.java)

编辑：哈哈，既然你这么说，我重新审视了我的代码，发现我只修补了库的那一部分。一个人很容易忘记事情..

```
 @Override
public FileVisitResult preVisitDirectory(Path dir, BasicFileAttributes attrs) throws IOException {

    Path relativizedPath =fromPath.relativize(dir);

    Path targetPath = toPath.resolve(relativizedPath.toString());
    if(!Files.exists(targetPath)){
        Files.createDirectory(targetPath);
    }
    return FileVisitResult.CONTINUE;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:43:29.983

我为此编写了一些实用方法。也许您发现它们很有用（该库是开源的）。

教程：[http ://softsmithy.sourceforge.net/lib/current/docs/tutorial/nio-file/index.html](http://softsmithy.sourceforge.net/lib/current/docs/tutorial/nio-file/index.html)

Javadoc：[http ://softsmithy.sourceforge.net/lib/current/docs/api/softsmithy-lib-core/index.html](http://softsmithy.sourceforge.net/lib/current/docs/api/softsmithy-lib-core/index.html)

马文：

```
<dependency>  
    <groupId>org.softsmithy.lib</groupId>  
    <artifactId>softsmithy-lib-core</artifactId>  
    <version>0.2</version>   
</dependency> 
```

更多信息： http: [//puces-blog.blogspot.ch/2012/07/news-from-software-smithy-version-02.html](http://puces-blog.blogspot.ch/2012/07/news-from-software-smithy-version-02.html)

# mysql - MySQL 一般设置

> ID：12716648
> 
> 赞同：0
> 
> 时间：2012-10-03T20:47:50.947
> 
> 标签：mysql, django

我是 MySQL 新手，遇到了一些一般性问题，感谢您的帮助：

我的操作系统是 MAC SnowLeopard，当我在终端输入“mysql”时，我可以成功进入 mysql 系统，但是，我没有创建数据库的权限：

```
mysql> create database A;
ERROR 1044 (42000): Access denied for user ''@'localhost' to database 'a' 
```

我尝试了命令行'mysql -u root'，得到以下信息：

```
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO) 
```

我在想我可以为数据库设置用户名，这使我无法使用root作为用户名进入mysql？

然后我尝试使用'localhost'作为用户名，我猜或记得我是否设置了它，使用命令'mysql -u localhost'，我可以成功登录到mysql，但仍然无法创建数据库，

```
mysql> create database a;
ERROR 1044 (42000): Access denied for user ''@'localhost' to database 'a' 
```

我不知道：

1.  为什么root不工作；
2.  天气我之前自己设置了用户名和密码......对不起......现在真的不记得了。
3.  如果我之前将用户名设置为'localhost'，我不记得密码，因此我无权创建数据库？
4.  在没有root访问权限的情况下，我应该怎么做才能恢复密码？
5.  如果不可能，如何卸载它？mysql 的 .bash_profile 中的 PATH 是`/usr/local/mysql/bin`

我得到了检查：sudo port list installed | grep mysql

```
mysql5                         @5.1.65         databases/mysql5
mysql5                         @5.1.65         databases/mysql5
py26-mysql                     @1.2.3          python/py-mysql 
```

/usr/local/mysql/bin 中的 mysql 是指这里列出的这个吗？

***编辑*** 运行 ps -ef | 的结果 grep mysql：

```
 0   107     1   0   0:00.01 ??         0:00.02 /bin/sh /usr/local/mysql/bin/mysqld_safe --datadir=/usr/local/mysql/data --pid-file=/usr/local/mysql/data/XXX-MacBook-Pro.local.pid
   74   245   107   0   0:03.51 ??         0:18.35 /usr/local/mysql/bin/mysqld --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data --plugin-dir=/usr/local/mysql/lib/mysql/plugin --user=mysql --log-error=/usr/local/mysql/data/XXX-MacBook-Pro.local.err --pid-file=/usr/local/mysql/data/XXX-MacBook-Pro.local.pid
  501  3790   417   0   0:00.00 ttys000    0:00.00 grep mysql
  501  3337  1271   0   0:00.00 ttys001    0:00.01 mysql -u localhost 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:56:34.463

您需要重置您的根密码。为此，请按照以下简单步骤操作：

*   停止 MySQL：`sudo port unload mysql5-server`
*   使用启动 MySQL`/opt/local/lib/mysql5/bin/mysqld_safe --skip-grant-tables &`
*   连接到 MySQL：`mysql -uroot`
*   重置您的 MySQL 密码：
    *   mysql>使用mysql；
    *   mysql> 更新用户设置密码=PASSWORD("NEW-ROOT-PASSWORD") where User='root';
    *   mysql> 刷新权限；
    *   mysql>退出
*   再次停止 MySQL`sudo killall -9 mysqld_safe`
*   正常重启MySQL`sudo port load mysql5-server`
*   连接到 MySQL：`mysql -uroot -p`

**编辑**

添加了停止/启动 MySQL 的命令。

# javascript - 如何为rails中的:delete操作修改js

> ID：12716652
> 
> 赞同：0
> 
> 时间：2012-10-03T20:47:58.820
> 
> 标签：javascript, ruby-on-rails-3, custom-controls

我有一个帖子模型，它有标题、正文和作者。我想启用一个功能，每当用户尝试删除帖子时，它应该询问帖子的作者姓名，如果指定的作者姓名与此相同，`post.author`那么他/她可以删除帖子，否则它不应该。

请指导我完成我需要遵循的步骤。我试图创建一个`author_destroy`动作，但它失败了，因为它无法在 Post 索引中找到该动作。

注意：我使用`author`字段作为`User`模型的替代品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T21:19:59.613

首先，我建议只向帖子的作者显示删除功能，并为所有其他用户隐藏它，erb 中的内容如下：

```
<% if @user == post.author %>
<%= link_to "delete", post, :method => :delete, :confirm => "You sure?",
                            :title => "Delete #{post.title}" %>
<% endif %> 
```

然后对于 Posts 控制器中的销毁操作：

```
def destroy
  Post.find(params[:id]).destroy if @user == post.author
  redirect_to posts_path
end 
```

# asp.net - 如何检查给定出版物名称的本地出版物是否存在，以及如何删除它以及与之相关的所有内容？

> ID：12716654
> 
> 赞同：0
> 
> 时间：2012-10-03T20:48:04.930
> 
> 标签：asp.net, sql, tsql, replication

我在 ASP .NET 中工作，我需要做几件事：

1.  检查我要创建的出版物是否已经存在。
2.  如果是这样，请将其连同与之相关的所有内容（作业等，包括订阅者方面的任何内容）一起删除。

我从这个开始：

```
public static bool PublicationExists(string server)
        {
            string finalConnString = Properties.Settings.Default.rawConnectionString.Replace("<<DATA_SOURCE>>", server).Replace("<<INITIAL_CATALOG>>", "tempdb");

            using (var conn = new SqlConnection(finalConnString))
            {
                using (var cmd = new SqlCommand("what is the query to check whether a publication exists?", conn))
                {
                    conn.Open();
                    cmd.ExecuteNonQuery();

                    using (var da = new SqlDataAdapter(cmd))
                    {
                        using (var ds = new DataSet())
                        {
                            da.Fill(ds);

                            if (ds.Tables[0].Rows.Count > 0)
                            {
                                return true;
                            }
                            return false;
                        }
                    }
                }
            }
        } 
```

现在...

```
If (PublicationExists(server) == true)
{
    //I want to delete the publication along with everything associated with it.
} 
```

我该怎么做呢？

# php - PHP 变量结果数组

> ID：12716659
> 
> 赞同：0
> 
> 时间：2012-10-03T20:48:43.017
> 
> 标签：php, arrays, variables

我有以下代码：

```
echo"<input  name=\"q". $i. "\" value=\"4\" id=\"q1a1\" type=\"radio\" ";
    if ($results['q1']==4) echo "checked"
    echo";
    />"; 
```

编辑：添加了 echo 语句，这就是`\`原位的原因。

`$results['q1']`我希望`1`的部分`'q1'`是一个变量 - 这似乎没有达到预期的效果：

```
if ($results['q".$i."']==4) echo "checked" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T20:50:28.253

如果将字符串和变量放在*双引号*中，则整个内容将被评估为 1 个变量：

```
if ( $results["q$i"] == 4 ) echo "checked" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:52:11.120

```
if ($results['q'.$i]==4) echo "checked" 
```

这可以防止字符串插值出现问题。在这种情况下，这并不是一个真正的问题，但我感觉最好远离它，因为它使代码对我来说看起来更脏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T20:53:30.963

你想写：

```
if ($results["q".$i]==4) echo "checked" 
```

这 ”。” 运算符将连接 2 个字符串以形成一个字符串，而关联数组则采用一个字符串。此外，'（引号）运算符中的变量不会被解析（这就是 " 和 ' 之间的区别），所以 '$i' 只会给出一个字符串 $i。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T20:54:27.080

你可以

```
 if ( $results["q".$i] == 4 ) echo "checked"; // .(dot) operator concatenates strings/variables. 
```

或者

```
 if ( $results["q$i"] == 4 ) echo "checked"; // double-quotes evaluates variables inside them. 
```

# c - 修复 C 中的边界问题

> ID：12716667
> 
> 赞同：0
> 
> 时间：2012-10-03T20:49:23.967
> 
> 标签：c, matrix, boundary

我正在编写一个使用均值滤波器的图像平滑程序，但我似乎无法解决最后几个边界问题。我使用整数而不是图像。我已经为 1 个左手角返回正确的值，以及中间整数、左侧整数以及顶部和底部整数。目前我被困在导致边界问题的右侧整数集上。

```
void side2(int a[10][20], int c[10][20], int m, int n)
{
    int i,j;
    for (i=1;i<m-1;i++) {
        for (j=0;j<n-1;j++) {
            c[i][j]=(0+0+a[i-1][j]+a[i+1][j]+a[i][j+1])/3;        
        }         
    } 
} 
```

这只是计算右侧的函数，而不是任何一个角。

这是我得到的输出。要求用户为列和行输入一个数字，这会输出一个随机数生成的矩阵，然后是带有均值滤波器结果的平滑图像。如您所见，右侧很古怪，我似乎无法找到正确的边界值。有人可以帮我找到正确的界限，这样我就可以停止获取这些古怪的数字。

```
please enter number of columns and rows
5 5
66  49  74  73  44
47  73  69  27  97
96  63  79  68  35
82  86  28  22  14
59   3  24   5  22
The smoothed image is
48  71  63  482009141880
78  60  60  79764514
64  79  55  28696626048
80  31  41  29  19
42  56  12  222009815 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:53:28.087

您需要在无法进行过滤的边框上写*一些东西。*目前，你没有写任何东西，例如，`c[1][n-1]`所以你只是得到未初始化的垃圾。

# jax-ws - 覆盖 Weblogic 10 使用的 JAX-WS 版本 - 具有内联模式的动态 WSDL

> ID：12716673
> 
> 赞同：9
> 
> 时间：2012-10-03T20:49:52.737
> 
> 标签：jax-ws, weblogic-10.x, java-metro-framework

有没有人成功更新了 Weblogic 10.3.3 使用的 JAX-WS 版本？

几个小时以来，我一直在尝试从[这里接受的答案中描述的事情，但没有运气。](https://stackoverflow.com/questions/1846213/jaxws-2-1-5-on-weblogic-10-3-1-instead-of-pre-installed-jaxws-2-1-1)

我正在使用 Maven 来解决我的依赖关系，并且我尝试在我的 WAR 模块（Web 服务项目）中使用以下库的组合：

```
 <dependency>
        <groupId>javax.xml.ws</groupId>
        <artifactId>jaxws-api</artifactId>
        <version>2.2.8</version>
    </dependency>
    <dependency>
        <groupId>com.sun.xml.ws</groupId>
        <artifactId>jaxws-rt</artifactId>
        <version>2.2.7</version>
    </dependency>
    <dependency>
        <groupId>org.glassfish</groupId>
        <artifactId>javax.jws</artifactId>
        <version>3.1.1</version>
    </dependency>
    <dependency>
        <groupId>org.glassfish.metro</groupId>
        <artifactId>wsit-api</artifactId>
        <version>2.2.1-1</version>
    </dependency>
    <dependency>
        <groupId>org.glassfish.metro</groupId>
        <artifactId>wsit-impl</artifactId>
        <version>2.2.1-1</version>
    </dependency> 
```

这基本上是为我的应用程序提供更新版本的 JAX-WS。

在我的 EAR 模块中，我使用了`weblogic-application.xml`覆盖不同包的文件：

```
 <package-name>javax.jws.*</package-name>
    <package-name>javax.xml.ws.*</package-name>
    <package-name>javax.xml.bind.*</package-name>
    <package-name>javax.xml.soap.*</package-name>
    <package-name>com.sun.xml.*</package-name> 
```

那是为了指示 Weblogic 使用我的类而不是它本身的类。

目前我的 Weblogic 10.3.3 正在使用 JAX-WS 2.1.5，当我部署 Web 服务时，它会动态生成一个 wsdl 文件，生成的 wsdl 正在导入 xsds（模式），我想告诉 Weblogic 使用内联生成 wsdl模式，这就是为什么我试图覆盖使用过的 JAX-WS 版本，希望更新的版本使用内联模式。

另一种选择是在开发期间使用内联模式生成 wsdl，并以某种方式告诉 Weblogic 使用该模式而不是生成动态版本，有人知道该怎么做吗？是否将其放在 WAR 的特定路径中？@WebService 注释上的 wsdlLocation 属性呢？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T11:59:29.390

我能够在 Weblogic 10.3.5 中运行 JaxWs 2.2.6 我知道您正在使用 10.3.3，但这个解决方案也应该可以工作。

我按照 METRO 讨论中的步骤操作： [http ://www.java.net/node/695058#comment-772902](http://www.java.net/node/695058#comment-772902)

并非所有步骤都是真正需要的。所以这里是我所做的描述。

**战争文件的步骤**

1) 将您的 web 服务打包为 war 文件

2）在war文件中你需要WEB-INF目录下的sun-jaxws.xml文件（详细信息看这里`http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/2.0/jaxws/jaxws-war.html`：）

3）将wsdl和xsd文件放在WEB-INF/wsdl下

4）注册`WSServlet`并`WSServletContextListener`在你的`web.xml`
（一些帮助看这里[http://java.dzone.com/articles/jax-ws-deployment-five-minute](http://java.dzone.com/articles/jax-ws-deployment-five-minute)）

```
<listener>
  <listener-class>com.sun.xml.ws.transport.http.servlet.WSServletContextListener</listener-class>
</listener>
<servlet>
  <servlet-name>MyWebService</servlet-name>
  <servlet-class>com.sun.xml.ws.transport.http.servlet.WSServlet</servlet-class>
  <load-on-startup>1</load-on-startup> 
</servlet>

<servlet-mapping>
  <servlet-name>MyWebService</servlet-name>
  <url-pattern>/MyWebService</url-pattern>
</servlet-mapping> 
```

5) 至少放置一个服务文件`WEB-INF/classes/META-INF/services`

我使用`javax.xml.ws.spi.Provider`
和作为文件中的内容（提供程序的 impl 类）：`com.sun.xml.ws.spi.ProviderImpl`
您可以从 jaxws-rt.jar 获取此文件，
也可以在此处放置其他服务文件（例如，对于不同的 XeceresParserFactory）

**原因**：Weblogic 在运行时生成一个名为：`_wl_cls_gen.jar`. 在这里，它首先查找服务文件。当 weblogic 找到一个服务文件时，所有其他文件都是从 jar 文件中加载的。*至少它的行为是这样的*

6）创建一个`weblogic.xml` 设置`<prefer-web-inf-classes>false</prefer-web-inf-classes>`为假

```
<?xml version="1.0" encoding="UTF-8"?>
<weblogic-web-app xmlns="http://xmlns.oracle.com/weblogic/weblogic-web-app" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd      http://xmlns.oracle.com/weblogic/weblogic-web-app http://xmlns.oracle.com/weblogic/weblogic-web-app/1.2/weblogic-web-app.xsd">
  <context-root>/LogisticsWebservice</context-root>
  <container-descriptor>
    <prefer-web-inf-classes>false</prefer-web-inf-classes>        
  </container-descriptor>
</weblogic-web-app> 
```

战争文件结构：

```
WEB-INF
|-> classes
    |-> META-INF
        |-> services
            |-> javax.xml.ws.spi.Provider
|-> lib
    |-> alle projektspezifischen jars außer die Abhängigkeiten für JaxWS
|-> wsdl
    |-> MyWebService.wsdl
    |-> MyObjects.xsd
|-> sun-jaxws.xml
|-> web.xml
|-> weblogic.xml 
```

**耳朵文件的步骤**

1）将你的war文件打包到一个ear文件中

2) 放置一个 JaxWs Service Finder 类，`APP-INF/classes` 您可以使用 JaxWs-rt.jar 中的现有类文件

3) 将jaxws-rt、所有依赖以及xerces-2.9.1和xalan-2.7.1放在下面`APP-INF/lib`

4) 创建`application.xml`文件

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE application PUBLIC "-//Sun Microsystems, Inc.//DTD J2EE Application 1.3//EN" "http://java.sun.com/dtd/application_1_3.dtd">
<application>
  <display-name>MyWebService</display-name>
  <module id="MyWebService">
    <web>
      <web-uri>MyWebService.war</web-uri>
      <context-root>/MyWebService</context-root>
    </web>
  </module>
</application> 
```

5) 创建`weblogic-application.xml`文件

```
<?xml version="1.0" encoding="UTF-8"?>
<weblogic-application xmlns="http://xmlns.oracle.com/weblogic/weblogic-application" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://xmlns.oracle.com/weblogic/weblogic-application http://xmlns.oracle.com/weblogic/weblogic-application/1.2/weblogic-application.xsd">

  <application-param>
    <param-name>webapp.encoding.default</param-name>
    <param-value>UTF-8</param-value>  
  </application-param>

  <prefer-application-packages>
    <package-name>com.ctc.*</package-name>
    <package-name>com.sun.xml.*</package-name>
    <package-name>com.sun.istack.*</package-name>
    <package-name>com.sun.msv.datatype.*</package-name>
    <package-name>com.sun.msv.driver.*</package-name>
    <package-name>com.sun.msv.grammar.*</package-name>
    <package-name>com.sun.msv.reader.*</package-name>
    <package-name>com.sun.msv.relaxns.*</package-name>
    <package-name>com.sun.msv.scanner.*</package-name>
    <package-name>com.sun.msv.util.*</package-name>
    <package-name>com.sun.msv.verifier.*</package-name>
    <package-name>com.sun.msv.writer.*</package-name>
    <package-name>com.sun.org.apache.xml.internal.*</package-name>
    <package-name>com.sun.wsit.*</package-name>
    <package-name>javax.jws.*</package-name>
    <package-name>javax.xml.bind.*</package-name>
    <package-name>javax.xml.soap.*</package-name>
    <package-name>javax.xml.stream.*</package-name>
    <package-name>javax.xml.ws.*</package-name>
    <package-name>javax.xml.activation.*</package-name>
    <package-name>javax.xml.annotation.*</package-name>
    <package-name>javax.xml.mail.*</package-name>
    <package-name>javax.xml.security.*</package-name>
    <package-name>javax.xml.registry.*</package-name>
    <package-name>javax.xml.rpc.*</package-name>
    <package-name>javax.xml.crypto.*</package-name>
    <package-name>org.apache.xerces.*</package-name>
    <package-name>javanet.staxutils.*</package-name>
    <package-name>jp.gr.xml.*</package-name>
    <package-name>org.codehaus.stax2.*</package-name>
    <package-name>org.glassfish.gmbal.*</package-name>
    <package-name>org.iso_relax.*</package-name>
    <package-name>org.jcp.xml.dsig.*</package-name>
    <package-name>org.jvnet.*</package-name>
    <package-name>org.relaxng.*</package-name>

  </prefer-application-packages>

  <prefer-application-resources>
    <resource-name>META-INF/services/*</resource-name>
  </prefer-application-resources>
</weblogic-application> 
```

**注意**：在ear文件下的jar`APP-INF/lib`不应该在war文件下`WEB-INF/lib`

ear文件的结构：

```
|-> APP-INF
    |-> classes
        |-> com
            |-> sun
                |-> xml
                    |-> ws
                        |-> util
                            |-> ServiceFinder.class
                            |-> ServiceFinder$1.class
                            |-> ServiceFinder$ComponentExWrapper.class
                            |-> ServiceFinder$CompositeIterator.class
                            |-> ServiceFinder$LazyIterator.class
    |-> lib
        |-> activation-1.1.jar
        |-> gmbal-api-only-3.1.0-b001.jar
        |-> ha-api-3.1.8.jar
        |-> istack-commons-runtime-2.4.jar
        |-> javax.annotation-3.1.1.jar
        |-> jaxb-api-2.2.4.jar
        |-> jaxb-impl-2.2.5.jar
        |-> jaxws-api-2.2.8.jar
        |-> jaxws-rt-2.2.6.jar
        |-> jsr181-api-1.0-MR1.jar
        |-> management-api-3.0.0-b012.jar
        |-> mimepull-1.8.jar
        |-> policy-2.3.1.jar
        |-> relaxngDatatype-20020414.jar
        |-> resolver-20050927.jar
        |-> saaj-api-1.3.4.jar
        |-> saaj-impl-1.3.18.jar
        |-> serializer-2.7.1.jar
        |-> stax-api-1.0-2.jar
        |-> stax-ex-1.7.jar
        |-> stax2-api-3.1.1.jar
        |-> streambuffer-1.4.jar
        |-> txw2-20110809.jar
        |-> woodstox-core-asl-4.1.2.jar
        |-> xalan-2.7.1.jar
        |-> xercesImpl-2.9.1.jar
        |-> xml-apis-1.3.04.jar
|-> META-INF
    |-> application.xml
    |-> weblogic-application.xml
|-> MyWebService.war 
```

现在将您的 ear 文件部署到 weblogic。

当您打开 wsdl 文件时，`http://localhost:7001/MyWebService/MyWebService?wsdl`您应该会看到以下注释：

```
<!-- Published by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is JAX-WS RI 2.2.6b21  svn-revision#12959\. --> 
```

希望这个方法是/在某种程度上有用。

对于一些调试信息，我将其添加到我的 ServiceImpl 类中：

```
private static String getImplementationInfo(String componentName, @SuppressWarnings("rawtypes") Class componentClass)
{
  CodeSource source = componentClass.getProtectionDomain().getCodeSource();
  return MessageFormat.format(
      "{0} implementation: {1} loaded from: {2}",
      componentName,
      componentClass.getName(),
      source == null ? "Java Runtime" : source.getLocation());
}

public MyWebServiceResponse sayHello(MyWebServiceRequest request) throws MyWebServiceFault
  if (LOG.isDebugEnabled())
  {
    com.sun.xml.ws.util.Version jaxwsVersion = com.sun.xml.ws.util.Version.RUNTIME_VERSION;
    LOG.debug("JaxWS major=" + jaxwsVersion.MAJOR_VERSION + "; buildVersion=" + jaxwsVersion.BUILD_VERSION + "; buildId="
        + jaxwsVersion.BUILD_ID + "; svnRev" + jaxwsVersion.SVN_REVISION);
    LOG.debug(getImplementationInfo("JaxWS", com.sun.xml.ws.util.Version.class));
    LOG.debug(getImplementationInfo("JaxB", com.sun.xml.bind.Util.class));
    LOG.debug(getImplementationInfo("DocumentBuilderFactory", DocumentBuilderFactory.newInstance().getClass()));
    LOG.debug(getImplementationInfo("XPathFactory", XPathFactory.newInstance().getClass()));
    LOG.debug(getImplementationInfo("TransformerFactory", TransformerFactory.newInstance().getClass()));
    LOG.debug(getImplementationInfo("SAXParserFactory", SAXParserFactory.newInstance().getClass()));
  }

  // do something

  return myWebServiceResponse;
} 
```

问候亚历克斯

PS：作为一个新用户我只允许发布2个超链接，请原谅...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-13T13:55:15.997

我使用了这个解决方案并且能够让它工作......但问题是我需要发送正确的客户端证书，所以我创建了一个我分配给绑定的自定义 SSLSocketFactory：bp.getRequestContext().put(JAXWSProperties.SSL_SOCKET_FACTORY , fact.getSSLSocketFactory());

问题是 weblogic 不使用它。它使用自己的 HTTPsConnection 和标准工厂。我试图实现一个 weblogic SSLSocketFactory，但是绑定的 put 正确地抱怨它不是 sun 类。

在浪费了很多时间之后，我创建了一个调用模板（通过独立运行我的代码），然后我使用 XML 替换/更新节点（+ http 标头中的操作）。它工作得很好，我摆脱了所有需要的更改。我知道这有点激进，但老实说，实现一个调用它工作得很好。

# extjs4 - 使用“actioncolumn”（Ext.grid.column.Action）时如何执行 View-Controller 分离

> ID：12716675
> 
> 赞同：6
> 
> 时间：2012-10-03T20:50:00.570
> 
> 标签：extjs4, extjs-mvc

在 ExtJS 4 中，我有一个包含操作列的网格。每当触发该操作时，我都想执行“我的操作”。

如果没有 MVC，这将如下所示：

```
 /* ... */
        {
            xtype: 'gridpanel',
            columns: [
                /* ... */
                {
                    xtype: 'actioncolumn',
                    items: [{
                        handler: function(grid, rowIndex, colIndex) {
                            // my action
                        }
                    }]
                }
            ]
        } 
```

现在我要介绍View-Controller分离。所以我必须将处理程序从视图移动到控制器。

但是控制器如何将其方法注册到操作列？查看[ExtJS 4.1 actioncolumn 文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Action)，我找不到任何可以听的事件。之后我也找不到设置操作列处理程序的方法。

那么如何在使用 actioncolumn 时实现干净的 View-Controller 分离呢？

动作列还没有为 MVC 做好准备吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T07:06:24.593

问题不在于 actioncolumn，而在于其不是 ExtJs 小部件的项目。这些项目是简单的图像。这就是为什么我们不能以这种方式分配[控制的处理程序：](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller-method-control)

```
this.control({
    'mygrid actioncolumn button[type=edit]' : this.onEdit 
```

然而，这种方式将是最好的方式。

不幸的是，这种方式是不可能的。但是还有另一种方法，几乎​​和首选方法一样干净：让 actioncolumn 处理程序触发网格的自定义事件（由您创建）：

```
// view
{
    xtype: 'actioncolumn',
    items: [{
        icon: 'http://cdn.sencha.io/ext-4.1.0-gpl/examples/shared/icons/fam/cog_edit.png',
        tooltip: 'Edit',
        handler: function(grid, rowIndex, colIndex) {
            // fire custom event "itemeditbuttonclick"
            this.up('grid').fireEvent('itemeditbuttonclick', grid, rowIndex, colIndex);
        }}, 
```

```
// controller
init: function() {
    this.control({
        'viewport > testpanel': {
            itemeditbuttonclick: this.onEdit,
            itemdeletebuttonclick: this.onDelete
        }
    });
}, 
```

## 例子

这是[演示](http://jsfiddle.net/molecule/g3prq/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T23:32:22.757

`actioncolumn`如果您的网格中只有一种类型的项目，这篇文章解释了一种比接受的答案更简单的方法：

[http://mitchellsimoens.com/actioncolumn-and-mvc/](http://mitchellsimoens.com/actioncolumn-and-mvc/)

基本上：只需在控制器中监听`actioncolumn`'`click`事件。`actioncolumn`但是，如果您需要区分多种类型，这将不起作用。

# firefox - 将堆栈溢出与 Vim 集成

> ID：12716677
> 
> 赞同：3
> 
> 时间：2012-10-03T20:50:19.620
> 
> 标签：firefox, vim

我最近开始在这里做复习任务（编辑第一篇文章/迟到的答案等）。

*   起初我试图从 Firefox 本身进行编辑
*   然后我开始复制到 Vim 并在那里进行格式化
*   不久我发现它是Firefox 编辑多行文本字段[的所有文本插件](https://addons.mozilla.org/en-US/firefox/addon/its-all-text/)

所以现在我正试图找到下一步，这将消除所有那些鼠标点击（编辑/提交等）以仅在 Vim 上完成这项工作。Firefox 中的当前界面（只需单击一下即可为您提供下一篇第一篇文章）似乎非常有能力集成到 Vim 本身中，所以我想知道是否/如何实现这一点？

如果没有，您有哪些好的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:57:32.900

好吧，这是一种方法：

1.  安装[Vimperator](http://www.vimperator.org/ "蝰蛇")，一个很棒的类似 Vim 的 Firefox 插件
2.  将以下内容添加到 ~/.vimperatorrc

    autocmd LocationChange .* :set editor="xterm -x vim"

浏览器中的 Vim 编辑器由 vim 按键控制，无需鼠标。赢。（替换您选择的 xterm，顺便说一句）

另一种方法是切换到终端并使用 w3m。很容易配置它以使用 vim 作为编辑器。但是，如果没有 JavaScript，使用 stackoverflow 就不是那么容易了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:35:53.207

特别是由于 Stack Overflow 等现代 Web 应用程序的用户界面越来越丰富（以及底层 JavaScript 要求），我建议不要离开浏览器，尤其是因为实现基于 Vim 的客户端（尽管可以使用*curl*、*wget*等工具） ，甚至像[webapi.vim](https://github.com/mattn/webapi-vim)这样的可用库）需要付出很多努力。

我发现使用您提到的 Firefox 附加组件（我已经转移到*Pentadactyl*，一个*Vimperator*分支）和一个单独的 GVIM 实例已经非常有效，特别是如果您简化它。我在一篇[博](http://ingo-karkat.de/blog/2012/05/22/Pentadactyl%20set%20filetype%20in%20external%20Vim%20editor%20based%20on%20URL.html)文中描述了如何自动设置`markdown`Stack Overflow 文本区域的文件类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-11T01:12:41.910

我刚开始尝试 w3m 在终端中浏览。您可以将所有键绑定更改为类似于 vim（对于特定于 web 的内容，我在 Vimium 中复制了绑定），并直接使用 vim 编辑站点上的文本字段。我只用了一天，我还不知道如何处理“你是机器人”的检查......但它似乎很好地缩小了 vim 编码和谷歌搜索 + 复制和将东西粘贴回vim。

我已经设置好了，所以当我在 w3m 中按 v 时，它会在 vim 中打开页面，我设置 vim 以立即将文件另存为 /tmp/w3m_scratch 并退出回 w3m。然后我转到我正在编码的 vim 实例，并使用另一个映射来切换水平分割与 /tmp/w3m_scratch 文件（即我感兴趣的网页）。这让我可以快速将页面上的所有信息获取到我正在编码的同一个 vim 实例中，并且可以使用 vim 的所有功能将来自 stackoverflow（或其他站点）的文本集成到我的工作中：

```
function! WriteW3MToScratch()
    " only if the file matches this highly specific reg exp will we do anything
    "(e.g. a file that looks like: .w3m/w3mtmp7352-3)
    if match(@%, "\.w3m/w3mtmp\\d\\+-\\d") != -1
        :silent! wq! /tmp/w3m_scratch
    endif
endfunction

function! ToggleW3M()
    if bufexists("/tmp/w3m_scratch")
        :bwipe! /tmp/w3m_scratch
    else
        :silent! split /tmp/w3m_scratch
    endif
endfunction

" anytime we read in a buffer, if it came from w3m then write to scratch
autocmd BufReadPost * :call WriteW3MToScratch()

" open/close horizontal split containing w3m_scratch
nnoremap <leader>w :call ToggleW3M()<cr> 
```

我使用[这个 git repo](https://github.com/felipesaa/A-vim-like-firefox-like-configuration-for-w3m)上的键盘映射文件作为基础，这就是我到目前为止所拥有的。我不得不说，这些设置确实让人感觉很 vim。

```
# w3m keymap file with Vim key bindings
# by Felipe Saa (https://github.com/felipesaa/A-vim-like-firefox-like-configuration-for-w3m)
# adapted by Matthew Bennett
#
# Ctrl      : C-, ^
# Escape    : ESC-, M-, ^[
# Space     : SPC, ' '
# Tab       : TAB, ^i, ^I
# Shift+Tab : ^[[Z
# Delete    : DEL, ^?
# Up        : UP, ^[[A
# Down      : DOWN, ^[[B
# Right     : RIGHT, ^[[C
# Left      : LEFT, ^[[D
# Re Pag    : M-[5~
# Av Pag    : M-[6~
# Enter     : C-j  RET(pendant confirm)

#-custom map commands..........................................................
# switch the color of links for light/dark colourscheme
keymap  SPCd    COMMAND         "SET_OPTION  anchor_color=yellow"
keymap  SPCl    COMMAND         "SET_OPTION  anchor_color=blue"
# skip past all the cruft on the stack sites to where the question is asked
keymap  st      COMMAND         "WHEREIS Ask\ Question;  CENTER_V;  NEXT_HALF_PAGE"

#-scrolling....................................................................
keymap  C-y     DOWN
keymap  C-e     UP
keymap  gg      BEGIN
keymap  G       END
keymap  C-d     NEXT_HALF_PAGE
keymap  C-u     PREV_HALF_PAGE
keymap  C-f     COMMAND         "NEXT_HALF_PAGE;  NEXT_HALF_PAGE"
keymap  C-b     COMMAND         "PREV_HALF_PAGE;  PREV_HALF_PAGE"
keymap  zz      CENTER_V
keymap  zt      COMMAND         "CENTER_V;        NEXT_HALF_PAGE"
keymap  zb      COMMAND         "CENTER_V;        PREV_HALF_PAGE"

#-cursor.......................................................................
keymap  l       MOVE_RIGHT1
keymap  h       MOVE_LEFT1
keymap  j       MOVE_DOWN1
keymap  k       MOVE_UP1
keymap  0       LINE_BEGIN
keymap  $       LINE_END
keymap  w       NEXT_WORD
keymap  b       PREV_WORD
keymap  C-o     UNDO            # Undo cursor movement.
# keymap  C-i  REDO             # Undo undone cursor movement (confused with TAB)

#-tab..........................................................................
# Close current tab and save it to be able to restore it.
keymap  x       COMMAND         "EXTERN 'echo %s >> ~/.w3m/RestoreTab.txt' ; CLOSE_TAB"

# new search in new tab (drops right into google search)
keymap  o       COMMAND         "GOTO https://google.com; GOTO_LINE 6; NEXT_LINK; GOTO_LINK"

# new search (drops right into google search)
keymap O        COMMAND         "TAB_GOTO https://google.com; GOTO_LINE 6; NEXT_LINK; GOTO_LINK"

keymap J        PREV_TAB        # Change focus to right tab
keymap K        NEXT_TAB        # Change focus to left tab
keymap gJ       TAB_LEFT        # Move tab to the left
keymap gK       TAB_RIGHT       # Move tab to the right
keymap yt       NEW_TAB         # Duplicate current tab
keymap gt       TAB_MENU        # Tab menu
keymap :t       TAB_MENU        # Tab menu
# keymap X        TAB_GOTO        /usr/lib/w3m/cgi-bin/restore_tab.cgi # Restore last closed tab

#-url operations...............................................................
keymap f        GOTO_LINK       # Follow link in current tab
keymap gf       TAB_LINK        # Follow link in a new foreground tab
keymap F        COMMAND         "TAB_LINK; PREV_TAB" # follow link under cursor in new background tab
keymap gF       MOVE_LIST_MENU  # link list --> move cursor to link
keymap r        RELOAD          # Reload current page.

#-link navigation..............................................................
keymap [        NEXT_LEFT_UP
keymap ]        NEXT_RIGHT_DOWN

#-history navigation...........................................................
keymap L        NEXT            # Go forward in history
keymap H        PREV            # Go back in history
keymap :b       SELECT_MENU     # Recent pages
keymap :B       HISTORY         # Show history

#-bookmarks....................................................................
# keymap C-d      ADD_BOOKMARK  # Add current page to bookmarks
# keymap gb       VIEW_BOOKMARK # Show bookmarks
# keymap :b       VIEW_BOOKMARK # Show bookmarks

#-search.......................................................................
keymap /        ISEARCH         # Enter find mode
keymap ?        ISEARCH_BACK    # Enter find mode backwards (incremental)
keymap n        SEARCH_NEXT     # Find next
keymap N        SEARCH_PREV     # Find previous

#-commands.....................................................................
keymap !        COMMAND         
keymap |        PIPE_BUF        # Send rendered document to pipe

keymap :h       HELP            # View help
keymap :o       OPTIONS         # Option setting panel
keymap :q       QUIT            # Quit w3m with confirmation (q alone works too)
keymap ZZ       EXIT            # Quit w3m without confirmation.

# Reload configuration files.
keymap :s       REINIT

#-info.........................................................................
keymap gC-g     INFO            # current page info
keymap C-g      LINE_INFO       # line under cursor info

#-miscellaneous................................................................
keymap v        EDIT_SCREEN     # Edit current rendered document with sensible-editor

#-unused url operations.......................................................
# keymap        PEEK                        # Show current page url.
# Focus in address bar.
# keymap ef    PEEK_LINK                    # Show link under cursor.
# Execute external browser = open current link in $BROWSER
# tip: number(2-9) + external browser shortcut(M-o) executes executes the
# external browser command linked to the prefix number.
# See "External Program Settings" in "Option Setting Panel"(OPTIONS)
# Open current link with external browser = sensible browser
# keymap M-o   EXTERN
# copy current url and remove newline at the end.
# keymap yy    EXTERN     copy_url.sh
# keymap yy       EXTERN     "echo -n %s | xclip -i -selection clipboard"
# keymap yy       EXTERN     "echo -n %s | xsel -b"
# open link under cursor with external browser = sensible browser
# keymap M-p   EXTERN_LINK
# Copy link under cursor, It does not copy images urls
# keymap yf       EXTERN_LINK 'env printf %s "$0" | xsel -b'
# keymap yf    EXTERN_LINK  copy_url.sh
# follow link in clipboard in the current tab.
# keymap p   GOTO       /usr/lib/w3m/cgi-bin/goto_clipboard.cgi
# follow link in clipboard in new foreground tab.
# keymap P     TAB_GOTO /usr/lib/w3m/cgi-bin/goto_clipboard.cgi

#-............................................................................. 
```

# vb6 - 在richtextbox控件vb6中选择和格式化文本

> ID：12716678
> 
> 赞同：1
> 
> 时间：2012-10-03T20:50:21.697
> 
> 标签：vb6, formatting, rtf

当我将它们添加到richtextbox控件时，我需要加粗一些文本，目前这是我的代码

**编辑**

```
With txtDetails
        If Not IsNullOrEmpty(title) Then
        Dim intStart As Integer
        intStart = Len(.Text)
            .Text = .Text & title '& vbCrLf
            .SelStart = intStart
            .SelLength = Len(title)
            .SelBold = True
            .SelLength = 0
            .SelBold = False
            .Text = .Text & vbNewLine
        End If
        If Not IsNullOrEmpty(value) Then
            .Text = .Text & value & vbNewLine
        End If
        .Text = .Text & vbNewLine
    End With 
```

谁能帮我解决这个问题

我已经对代码进行了更改，但我添加的所有后续测试仍然是粗体的，插入了我感兴趣的测试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T21:20:42.003

设置`.Text`有一些副作用，会阻止你的代码做你想做的事：

1.  它会重置`.SelStart`，因此您需要保存`.Text`first 的长度。
2.  它会重置所有格式，因此会丢失粗体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T21:40:20.117

如果不是“丢失”，您似乎想要附加一个粗体`title`，如果它不是“丢失”，则附加一个非粗体`value`。

```
Option Explicit

Private Function IsNullOrEmpty(ByVal Item As Variant) As Boolean
    If IsNull(Item) Then
        IsNullOrEmpty = True
    ElseIf IsEmpty(Item) Then
        IsNullOrEmpty = True
    ElseIf VarType(Item) = vbString Then
        If Len(Item) = 0 Then
            IsNullOrEmpty = True
        End If
    End If
End Function

Private Sub cmdAppend_Click()
    With rtbDisplay
        .SelStart = &H7FFFFFFF
        If Not IsNullOrEmpty(txtTitle.Text) Then
            .SelBold = True
            .SelText = txtTitle.Text
            txtTitle.Text = ""
            .SelBold = False
            .SelText = vbNewLine
        End If
        If Not IsNullOrEmpty(txtValue.Text) Then
            .SelText = txtValue.Text
            txtValue.Text = ""
            .SelText = vbNewLine
        End If
    End With
    txtTitle.SetFocus
End Sub 
```

在这里，我使用 TextBox 控件作为数据源，但它应该为您提供总体思路。使用两个操作通常比使用字符串连接添加换行符更便宜。

如果内容很大，获取当前 .Text 并使用 Len() 测量它的成本也很高，因此只需将 .SelStart 设置为最大值即可移动到末尾。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-03T21:27:24.287

我不喜欢vb，但我创建了一个项目并对其进行了测试。
试试这个

```
 With txtDetails
        .SelectionStart = 0
        .SelectionLength = txtDetails.TextLength
        .SelectionFont = New Font(txtDetails.Font, FontStyle.Bold)
    End With 
```

# wordpress - 带有 3 个变量的 Wordpress add_rewrite_rule

> ID：12716685
> 
> 赞同：0
> 
> 时间：2012-10-03T20:50:42.833
> 
> 标签：wordpress

我无法让 Wordpress 使用 add_rewrite_rule() 函数为变量分配正确的值。我的目标是有一个如下所示的网址：`www.mywebsite.com/catalog/category1/category2/item-slug`.

这是我在 functions.php 文件中的代码：

```
add_filter( 'query_vars', 'query_vars_new' );
function query_vars_new($query_vars){
    $query_vars[]='category1';
    $query_vars[]='category2';
    $query_vars[]='catalog_item';
    return $query_vars;
}

add_action( 'init', 'rewrite_init' );
function rewrite_init(){
    add_rewrite_rule('catalog(/([^/]+))?(/([^/]+))?/?','index.php?page_id=94&category1=$matches[1]&category2=$matches[2]&catalog_item=$matches[3]','top');
} 
```

所以目标是拥有三个变量`$category1`, `$category2`, 和`$catalog_item`来自相应 url 段的值。但是，当我对此进行测试时，前两个变量设置为相同的值。

例如，`www.mywebsite.com/catalog/clothes/shirts/polo-shirt` **应该返回**：

```
$category1="clothes";
$category2="shirts";
$catalog_item="polo-shirt"; 
```

但相反，我得到：

```
$category1="/clothes";
$category2="clothes";
$catalog_item="/polo-shirt"; 
```

我的 add_rewrite_rule 函数一定有问题，但我想不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:43:19.250

多亏了对这个问题的令人难以置信的反应，我最终只是在没有 Wordpress 变量的帮助下让它工作。我刚刚将 Wordpress 配置为允许 url 中的变量，然后使用 PHP 获取 URL 并获取不同的 URL 段并分析它们。不如 Wordpress 方法漂亮，但至少它有效。

# ios - 为什么当 ScrollView 滚动时我的 UIPageControl 没有更新？

> ID：12716686
> 
> 赞同：2
> 
> 时间：2012-10-03T20:50:44.993
> 
> 标签：ios, xcode, uitableview, uipagecontrol

我正在尝试制作一个表格，其单元格中包含 UIPageControls 和 ScrollViews。ScrollViews 工作并且 PageControls 在那里，但是当滚动发生时，除了底部单元格之外，PageControl 不会更新。这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath: (NSIndexPath *)indexPath
{  
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    cell.contentView.backgroundColor = [UIColor blueColor];
    UIColor *color = [colorsArray objectAtIndex:indexPath.row];
    scrollView = [[UIScrollView alloc] init];
    [scrollView setDelegate:self];
    CGRect screen = [[UIScreen mainScreen] bounds];    
    CGFloat width = CGRectGetWidth(screen);
    CGFloat height = tableView.rowHeight;
    scrollView.frame = CGRectMake(0, 0, width, height/1.25);
    scrollView.contentSize=CGSizeMake(width*3,height/1.25);
    scrollView.pagingEnabled = YES;
    [scrollView setBackgroundColor:color];
    [scrollView setShowsHorizontalScrollIndicator:NO];
    scrollView.clipsToBounds = YES; 
    NSUInteger i;
    int xCoord=width/25;
    int yCoord=width/25;
    int buttonWidth=width/8;
    int buttonHeight=width/8;
    int buffer = width;
    for (i = 1; i <= 4; i++)
    {
        UIButton *aButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        aButton.backgroundColor = [UIColor blackColor];
        aButton.frame     = CGRectMake(xCoord, yCoord,buttonWidth,buttonHeight );
        [aButton addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
        aButton.tag = i;
        UIImage *buttonImage = [picsArray objectAtIndex:indexPath.row];
        [aButton setBackgroundImage:buttonImage forState:UIControlStateNormal];
        [scrollView addSubview:aButton];

        xCoord += buttonHeight + buffer;
    }
    [cell addSubview:scrollView];
    pageControl = [[UIPageControl alloc] initWithFrame:CGRectMake(0, height/1.25, width, height/4)];
    pageControl.numberOfPages = 3;
    pageControl.currentPage = 0;
    pageControl.userInteractionEnabled =YES;
    [pageControl addTarget:self action:@selector(pageAction:) forControlEvents:UIControlEventValueChanged];
    [cell addSubview:pageControl];
    return cell;
}

- (void)scrollViewDidScroll:(UIScrollView *)sender {

    // Update the page when more than 50% of the previous/next page is visible
    CGFloat pageWidth = scrollView.frame.size.width;
    int page = floor((scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
    pageControl.currentPage = page;
}

- (void)pageAction:(UIPageControl *)sender {
    // update the scroll view to the appropriate page
    CGRect frame;
    frame.origin.x = scrollView.frame.size.width * pageControl.currentPage;
    frame.origin.y = 0;
    frame.size = scrollView.frame.size;
[   scrollView scrollRectToVisible:frame animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T02:19:13.650

那是因为您只引用了为最后一个单元格生成的滚动视图和页面控件：

```
 // this references are redefined every time new cell is generated
 scrollView = [[UIScrollView alloc] init];
 pageControl = [[UIPageControl alloc] initWithFrame:CGRectMake(0, height/1.25, width, height/4)]; 
```

您可以尝试`sender`在您的`UIScrollView`委托方法中使用：

```
- (void)scrollViewDidScroll:(UIScrollView *)sender {
    // Update the page when more than 50% of the previous/next page is visible
    CGFloat pageWidth = sender.frame.size.width;
    int page = floor((sender.contentOffset.x - pageWidth / 2) / pageWidth) + 1;

    // !!! but here is another problem. You should find reference to appropriate pageControl
    pageControl.currentPage = page;
} 
```

但是还有一个问题：您应该获得对适当`UIPageControl`对象的引用。您可以为此目的使用标签、数组或其他任何东西。

# java - 如何更改 Emma 的 HTML 报告的编码？

> ID：12716688
> 
> 赞同：3
> 
> 时间：2012-10-03T20:50:59.150
> 
> 标签：java, encoding, utf-8, jenkins, emma

我一直在努力让它工作大约 1.5 小时......

我让 Emma 在 Jenkins 中运行，并让 Jenkins 将 Emma 报告移动到 artifacts 目录，以便可以在 Jenkins 构建中查看它们。除了报告使用 ISO-8859-1 编码外，这一切都很好。当我通过 java -jar jenkins.war 运行 Jenkins 或将 jenkins.war 放入本地 Tomcat 时，它们都显示 Emma 覆盖页面，其中空格在实心菱形中显示为问号。

我将我的 jvm 和本地 Tomcat 设置为 UTF-8，并且不想（不能真的）更改它们。作为一项快速测试，我将其中一个 HTML 文件加载到我的编辑器 (Geany) 中，并将 HTML 的内容类型更改为 UTF-8，并让 Geany 将文件的编码更改为 UTF-8，当我查看它时很好（没有钻石）。我找到了这个页面： [http](http://emma.sourceforge.net/reference/ch03s02.html) ://emma.sourceforge.net/reference/ch03s02.html 上面 写着：

> 属性：report.out.encoding
> 默认值：report.out.encoding 默认为 JRE file.encoding 系统属性，并被 HTML 和 XML 报告类型覆盖：
> report.html.out.encoding：ISO-8859-1
> report.xml .out.encoding: UTF-8

但要么它不起作用，要么我没有偶然发现正确的咒语让它起作用。

我尝试添加到 ANT 文件（在我的 build.xml中的*许多地方）：*

```
<property name="emma.report.html.out.encoding" value="UTF-8" />
<property name="report.html.out.encoding" value="UTF-8" /> 
```

我尝试添加

```
report.html.out.encoding=UTF-8
emma.report.html.out.encoding=UTF-8 
```

到属性文件并更改 emma 运行（在 ant 内）以读取它（我现在手头没有示例 XML，因为它不起作用，我将其删除）。

我添加了

```
<jvmarg value="-Demma.report.html.out.encoding=UTF-8" /> 
```

到我的 build.xml 中另一个 emma 设置下的 ant 构建文件。

我尝试同时运行 Tomcat

```
-Demma.report.html.out.encoding=UTF-8
and
-Dreport.html.out.encoding=UTF-8 
```

最后，我尝试同时运行 jenkins.war 文件

```
java -Demma.report.html.out.encoding=UTF-8 -jar jenkins.war
and
java -Dreport.html.out.encoding=UTF-8 -jar jenkins.war 
```

这些都不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:23:24.107

好吧，我终于成功了……我一次尝试了很多东西，其中一个奏效了。然后我开始一一删除。这是有效的...

在我的 ant 构建文件中，在 emma 任务中（我的以

```
<emma enabled="${emma.enabled}" > 
```

我将此添加为任务的第一行：

```
<property name="report.html.out.encoding" value="UTF-8" /> 
```

That's it. By doing this, the Emma reports served up by the standalone Jenkins server are now encoded in UTF-8 and don't have the nasty diamond question marks for spaces.

# c# - 获取 OleDbDataReader 对象以在从电子表格读取时接受空值

> ID：12716690
> 
> 赞同：0
> 
> 时间：2012-10-03T20:51:02.683
> 
> 标签：c#, datareader

有没有办法让 OleDbDataReader 从 Excel 电子表格读取时接受空值？我们有以下列：

身份证 | 课程代码 | 课时 | 状态 | 生效日期 | 截止日期

有时 CourseHours 列会是空白的。这搞砸了我的代码，因为不是 reader[2] 为空，而是 reader[2] = State。

这是我现在使用的方法，但看起来有点麻烦。

```
OleDbDataReader reader;
using (OleDbConnection connection = new OleDbConnection(connectionString))
{
    OleDbCommand command = new OleDbCommand(queryString, connection);
    connection.Open();
    reader = command.ExecuteReader();

    while (reader.Read())
    {
        string Id = "";
        string courseCode = "";
        string hours = "";
        string state = "";
        string effectiveDate = "";
        string expirationDate = "";
        string method = "";

        //Add manadatory values
        Id = reader[0].ToString();
        courseCode = reader[1].ToString();

        int value = 0;
        if (int.TryParse(reader[2].ToString(), out value))
        {
            hours = value.ToString();
            state = reader[3].ToString();
            effectiveDate = reader[4].ToString();

            //Check for null in expiration date
            if (!DBNull.Value.Equals(reader[5]))
            {
                expirationDate = reader[5].ToString();
            }
        }
        else
        {
            state = reader[2].ToString();
            effectiveDate = reader[3].ToString();

            //Check for null in expiration date
            if (!DBNull.Value.Equals(reader[5]))
            {
                expirationDate = reader[5].ToString();
            }
        } 
```

# linux - 使用Linux wget标签抓取网站

> ID：12716694
> 
> 赞同：0
> 
> 时间：2012-10-03T20:51:23.400
> 
> 标签：linux, wget

有一些网站 - www.elections.am/votersreg，我想知道如何使用 linux wget 标签获取该网站中的全部信息？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:05:12.143

您可以使用`wget -r`或安装一个名为“httrack”的程序，并使用它将 url 镜像到文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-07T06:51:55.820

另一个答案建议“wget -r”可能对你有用。但是，为了最好地“获取本网站中的全部信息”，如您的问题所述，我认为“wget --mirror”和“wget --mirror --convert-links”可能是更强大的解决方案。-r 选项默认为 5 级递归，其中 --mirror 提供无限级递归。--convert-links 选项将根据您的目标转换下载文档中的链接，使其适合本地浏览。

我会小心这里的“无限递归”方面。这可能会失控，因此您可能需要监控下载进度。您还可以使用 --level=depth 选项显式定义递归深度。

# wpf - 当 WPF 控件不引发鼠标事件时，我该怎么办？

> ID：12716701
> 
> 赞同：1
> 
> 时间：2012-10-03T20:51:38.970
> 
> 标签：wpf, wpf-controls

我正在为程序编写自定义控件。除其他外，该控件的模板中有一个 ComboBox。像这样简单的东西可以重现：

```
 <Style TargetType="{x:Type local:CustomControl1}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:CustomControl1}">
                <Border Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                    <ComboBox />
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

如果我右键单击此控件，则会引发 PreviewMouseRightButtonUp 事件，但不会引发 MouseRightButtonUp 事件。我认为这是因为 ComboBox 控件在其自己的 PreviewMouseRightButtonUp 事件中将 e.Handled 设置为 true，从而防止引发其他事件。我之所以猜测是因为如果我将一个 Rectangle 换成 ComboBox，我会得到两个事件，并且如果在我的自定义控件中我在 Preview 事件中将 e.Handled 设置为 true，我只会得到 preview 事件。

我正在为其编写控件的程序期望在发生右键单击时引发这两个事件，我怀疑我能否让它们改变这一点。我是否必须以不吃预览事件的方式重新创建 ComboBox，还是有其他技巧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:07:44.857

您实际上可以接收在[UIElement.Addhandler](http://msdn.microsoft.com/en-us/library/ms598899.aspx)调用中传递 true 的已处理事件。如果它被处理，你可以引发一个新事件？

```
AddHandler(PreviewMouseLeftButtonDownEvent, new MouseButtonEventHandler(OnMouseLeftButtonDow), true); 
```

您可以使用[snoop](http://snoopwpf.codeplex.com/)查看是否设置了 e.Handled=true;

# html - 如何使用“位置：相对”管理多个 div？

> ID：12716704
> 
> 赞同：2
> 
> 时间：2012-10-03T20:51:45.763
> 
> 标签：html, css

我的页面上有一个元素，我想使用“位置：绝对”定位。因此，我在#pagewrap 中添加了“位置：相对”。我现在想对#page 中的其他元素做同样的事情，但是当我还向其中添加“位置：相对”时，将#pagewrap 作为父元素之前的所有元素现在都切换到#page。

我正在谈论的元素是：#copyright-logo

我该怎么做才能避免这种情况？

```
#pagewrap {
width: 1050px;
margin: 0px auto;
background-color: rgb(255,255,255);
overflow: hidden;
-moz-border-radius: 15px;
border-radius: 15px;
position: relative;
}

#page { 
width: 960px;
margin: 0px auto;
background-color: rgb(255,255,255);
overflow: hidden;
 }

#copyright-logo {
position:absolute; bottom: 10px; right: 10px
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:54:01.877

让你`#copyright-logo`的直系孩子`#pagewrap`而不是`#page`

```
<div id="pagewrap">
    <div id="copyright-logo"></div>
    <div id="page"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T20:59:10.800

绝对定位元素相对于最近的封闭定位元素进行定位，该定位元素可以是另一个绝对定位元素，也可以是固定或相对定位元素。

[CSS 位置属性](https://developer.mozilla.org/en-US/docs/CSS/position)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T21:08:17.130

您过度使用相对和绝对定位。

绝对不需要相对定位#pagewrap，只需将其与边距居中，如下所示：

```
#pagewrap { width: 1000px; margin: 0 auto; } 
```

在任何情况下，不要过度使用这些位置，而是使用浮动、填充和边距。

# c# - 带有附加属性的 ControlTemplate 中的命令绑定

> ID：12716706
> 
> 赞同：2
> 
> 时间：2012-10-03T20:51:47.627
> 
> 标签：c#, wpf, xaml, data-binding, attached-properties

我正在尝试建立一个系统，允许我将字符串值附加到 ComboBoxItem 并将其显示在 ComboBoxItem 的内容旁边，而不必在每个单独的 ComboBoxItem 内显式嵌套 StackPanel 或使用自定义控件。

因此，我所做的是创建了一个名为“Header”的 DependencyProperty 并将其附加到 ComboBoxItem，并且我已经覆盖了 ComboBoxItem 模板以包含带有 TextBlock 的堆栈面板，该 TextBlock 将其 Text 绑定到 ComboBoxItem 的附加 Header 属性。

我遇到的问题是，在运行时出现在 TextBlock 中的唯一文本是我在元数据中设置的依赖属性的默认值。此后对 ComboBoxItems 上附加属性的任何更改都不会反映在 TextBlock 中。

这是我的 DependencyProperty 定义：

```
public class AttHeader : DependencyObject
{
    public static readonly DependencyProperty HeaderProperty = DependencyProperty.RegisterAttached("Header", typeof(string), typeof(AttHeader));

    public static void SetHeader(DependencyObject d, string value)
    {
        d.SetValue(HeaderProperty, value);
    }

    public static string GetHeader(DependencyObject d)
    {
        return (string)d.GetValue(HeaderProperty);
    }
} 
```

这是我的风格和模板：

```
<Style TargetType="ComboBoxItem">
    <Setter Property="OverridesDefaultStyle" Value="True"/>
    <Setter Property="SnapsToDevicePixels" Value="True"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ComboBoxItem">
                <StackPanel Orientation="Horizontal">
                    <ContentPresenter />
                    <TextBlock Name="HeaderHost" Text="{Binding Path=(local:AttHeader.Header), RelativeSource={RelativeSource Self}}" />
                </StackPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

这里是我创建一些 ComboBoxItems 的地方：

```
<ComboBox SelectedIndex="0">
    <ComboBoxItem local:AttHeader.Header="Isometric">
        <Image Source="../images/viewTypeIso.png" Stretch="None"/>
    </ComboBoxItem>
    <ComboBoxItem local:AttHeader.Header="Top">
        <Image Source="../images/ViewTypeTop.png" Stretch="None"/>
    </ComboBoxItem>
</ComboBox> 
```

即使在创建这些 ComboBoxItems 时设置它们的附加属性的值，也不会影响其中的 TextBlocks。

我假设绑定是有效的，因为我可以为依赖属性设置一个默认值，并且每个 ComboBoxItem 将始终在其图像旁边显示该值。

我在 SetHeader 中设置了一个断点，并且在构造这些 ComboBoxItems 时确实调用了它。

是我做错了什么还是我不知道绑定有一些限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T22:11:04.277

您的绑定不正确，TextBlock 现在是 ComboBoxItem 尝试绑定到的子项：

```
 <Setter Property="Template">
    <Setter.Value>
        <ControlTemplate TargetType="ComboBoxItem">
            <StackPanel Orientation="Horizontal">
                <ContentPresenter />
                <TextBlock Name="HeaderHost" 
                           Text="{Binding Path=local:AttHeader.Header,
                                  RelativeSource={RelativeSource Mode=FindAncestor
                                  ,AncestorType=ComboBoxItem}}" />
            </StackPanel>
        </ControlTemplate>
    </Setter.Value>
 </Setter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T21:39:20.023

我仍然没有让标题绑定与该实现一起使用，但这是一个超级简单方便的解决方法：使用 HeaderedContentControls 而不是 ComboBoxItems，并指示您的 ComboBox 通过实现以下样式来水平定位标题：

```
<Style TargetType="HeaderedContentControl">
    <Setter Property="OverridesDefaultStyle" Value="True"/>
    <Setter Property="SnapsToDevicePixels" Value="True"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="HeaderedContentControl">
                <StackPanel Orientation="Horizontal">
                    <ContentPresenter />
                    <ContentPresenter ContentSource="Header" />
                </StackPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# jsp - weblogic 10g上的简单web应用程序获取JSP错误

> ID：12716710
> 
> 赞同：2
> 
> 时间：2012-10-03T20:51:49.903
> 
> 标签：jsp, weblogic, weblogic-10.x

我正在WebLogic 10g 上开发一个简单的 Web 应用程序（或者实际上遵循[Java EE 5 教程）。](http://docs.oracle.com/javaee/5/tutorial/doc/bnbnp.html)

该应用程序非常简单，只是它是为 GlassFish 设计的。它由一个连接到 EJB 的简单 JSP 页面（查看上面的链接）组成。但是，我收到以下错误，我无法为项目解析正确的库。

> weblogic.application.WrappedDeploymentException：类文件 javax/servlet/jsp/jstl/core/ConditionalTagSupport 中非本机或抽象方法中的缺失代码属性

我的 Maven pom 文件包含以下依赖项，这些 EJB 的客户端 jar 除外

```
 <dependency>
        <groupId>javax.servlet.jsp.jstl</groupId>
        <artifactId>jstl-api</artifactId>
        <version>1.2</version>
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>

    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>6.0</version>
    </dependency> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:00:32.147

看起来您实际上是在部署这些工件，这是主要问题。

但是，总共有几个问题：

1.  如前所述，它们不应该被部署，因为 WebLogic 10g 已经实现了它们。在 Maven 中，您应该使用提供的范围 ( `<scope>provided</scope>`)
2.  `javaee-api`工件被剥离了所有代码。即使 WebLogic 没有实现该 API，您也无法部署它。这就是为什么您得到的异常表明给定类中没有可用的代码。
3.  前两个依赖项与最后一个依赖项重叠。Java EE 已经包含 Servlet 和 JSP。
4.  WebLogic 10g 是一个 Java EE 5 实现，但是您有一个 Java EE 6 API 作为依赖项，这是一个完全不同的版本。

# sql - Oracle 动态 sql，适用于任何地方，但在客户处

> ID：12716711
> 
> 赞同：0
> 
> 时间：2012-10-03T20:51:51.233
> 
> 标签：sql, oracle, dynamic

我有一个执行一些动态 sql 的存储过程，如下所示。我试图尽可能地减少它，所以忽略任何小错误。

在办公室它工作，每次，在`11.2`，，。在客户处，它失败并显示一条消息：`10.2``10.1`

```
Unexpected Error

Error Message = "Msg:
MyProc
ORA-06550: line 1, column 1:
PLS-00103: Encountered the symbol "" when expecting one of the following:

   begin case declare exit for function goto if loop mod null 
```

如果我捕获客户正在生成的动态 sql 并将其放在如下变量中，在工作机器上运行，它就可以工作，所以并不是生成了狡猾的 sql。通常 sql 来自客户端，所以在这里我将 to_date 引号加倍。

```
mySQL := '
declare 
                pADMINDATE DATE := :1; 
                pEMPLOYEEIDLIKE VARCHAR2(40) := :2; 
                pINCLUDEEMPLOYEE number := :3; 

begin 
BEGIN OTHERPROC.OTHERPROC (1,TO_DATE(''2012-10-03'', ''YYYY-MM-DD''),TO_DATE(''2012-10-03'', ''YYYY-MM-DD''),0); 
END; 
INSERT INTO TP_EMPLOYEES ( 
        ID, 
            EMPLOYEECODE
) 

SELECT ROWNUM, 
       EMPLOYEECODE
FROM ( 

SELECT EMPLOYEECODE
   FROM (SELECT DISTINCT EMPLOYEECODE FROM TP_EEF_TEMP) DISTINCTEMPCODES) A; 
end; ';

EXECUTE IMMEDIATE
    mySQL
    using 
    pADMINDATE,
    pEMPLOYEEIDLIKE,
    pINCLUDEEMPLOYEE; 
```

这不是导致问题的数据库版本，可能是权限吗？它在自身内部调用另一个存储过程，我们经常在非动态 sql 中执行，可能是这样吗？

在这里不知所措

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:33:48.083

我以前发现过“在这台服务器上工作但在该服务器上不起作用”类型的问题。

通常它与隐式日期 <-> varchar 转换有关：由于不同的数据库服务器可以具有不同的默认格式，因此具有隐式转换的语句可能在一个地方工作而在另一个地方失败。

我建议您尝试运行删除`pADMINDATE`日期变量的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:49:36.290

是回车！添加此行解决了问题

```
pQUERY2 := REPLACE(pQUERY, chr(13)); 
```

这里强调了一个类似的问题

[https://forums.oracle.com/forums/thread.jspa?threadID=1117462](https://forums.oracle.com/forums/thread.jspa?threadID=1117462)

无论如何，感谢您的回答，如果有人知道我有兴趣知道什么设置/补丁/什么使 Oracle 对此敏感，即我在 3 个不同版本的 oracle 上尝试过这个，包括客户使用的那个，-但是-我没有不要修补我的 10.2.1 版本。它是在补丁中修复的吗？是设定吗？

# linux - 我正在尝试将图像链接到持续联系

> ID：12716712
> 
> 赞同：1
> 
> 时间：2012-10-03T20:51:53.860
> 
> 标签：linux, url, path, constants, contact

我正在尝试将图像链接到来自我的 linux 服务器的持续联系。图像存储在我的 linux 服务器上的一个文件夹中，就像我之前在我的 windows 服务器上所做的那样。我在 windows 服务器上使用的路径工作正常，但在 linux 服务器上的路径却不行。

我将文件夹添加到驱动器的根目录，并将 jpg 放在文件夹中。这就是在 Windows Server [http://www.mydomainname.com/folder/folder/image_name.jpg](http://www.mydomainname.com/folder/folder/image_name.jpg)上有效的方法。这在 linux 服务器上不起作用。非常感谢您提供的任何帮助。

# java - 尝试安装未签名的远程 .apk 文件时出现不一致的解析错误

> ID：12716715
> 
> 赞同：2
> 
> 时间：2012-10-03T20:52:05.443
> 
> 标签：java, android, android-asynctask, apk

我目前正在开发一个不会出现在 Play 商店中并且需要某种更新程序的应用程序。

我让它工作了，所以当用户按下按钮时，应用程序会下载托管在我们其中一台服务器上的 apk 文件。那部分工作正常。这是有趣的东西...

当我尝试开始安装文件的意图时，我收到以下解析错误：

“解析错误解析包时出现问题”

无论在 android 版本 4.0.3 上发生什么，此错误每次都会发生。这是日志猫：

```
10-03 18:36:05.212: D/asset(567): failed to open Zip archive            '/mnt/sdcard/download/AMWireless.apk'
10-03 18:36:05.272: W/PackageParser(567): Unable to read AndroidManifest.xml of     /mnt/sdcard/download/AMWireless.apk
10-03 18:36:05.272: W/PackageParser(567): java.io.FileNotFoundException:  AndroidManifest.xml
10-03 18:36:05.272: W/PackageParser(567):   at android.content.res.AssetManager.openXmlAssetNative(Native Method)
10-03 18:36:05.272: W/PackageParser(567):   at android.content.res.AssetManager.openXmlBlockAsset(AssetManager.java:487)
10-03 18:36:05.272: W/PackageParser(567):   at android.content.res.AssetManager.openXmlResourceParser(AssetManager.java:455)
10-03 18:36:05.272: W/PackageParser(567):   at android.content.pm.PackageParser.parsePackage(PackageParser.java:425)
10-03 18:36:05.272: W/PackageParser(567):   at com.android.packageinstaller.PackageUtil.getPackageInfo(PackageUtil.java:74)
10-03 18:36:05.272: W/PackageParser(567):   at com.android.packageinstaller.PackageInstallerActivity.onCreate(PackageInstallerActivity.java:277)
10-03 18:36:05.272: W/PackageParser(567):   at android.app.Activity.performCreate(Activity.java:4465)
10-03 18:36:05.272: W/PackageParser(567):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
10-03 18:36:05.272: W/PackageParser(567):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
10-03 18:36:05.272: W/PackageParser(567):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
10-03 18:36:05.272: W/PackageParser(567):   at android.app.ActivityThread.access$600(ActivityThread.java:123)
10-03 18:36:05.272: W/PackageParser(567):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
10-03 18:36:05.272: W/PackageParser(567):   at android.os.Handler.dispatchMessage(Handler.java:99)
10-03 18:36:05.272: W/PackageParser(567):   at android.os.Looper.loop(Looper.java:137)
10-03 18:36:05.272: W/PackageParser(567):   at android.app.ActivityThread.main(ActivityThread.java:4424)
10-03 18:36:05.272: W/PackageParser(567):   at java.lang.reflect.Method.invokeNative(Native Method)
10-03 18:36:05.272: W/PackageParser(567):   at java.lang.reflect.Method.invoke(Method.java:511)
10-03 18:36:05.272: W/PackageParser(567):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-03 18:36:05.272: W/PackageParser(567):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-03 18:36:05.272: W/PackageParser(567):   at dalvik.system.NativeStart.main(Native Method)
10-03 18:36:05.272: W/PackageInstaller(567): Parse error when parsing manifest. Discontinuing installation 
```

然而，我的更新程序适用于运行版本 2.3.5 的 droid x2。安装该应用程序的意图非常好，一旦他们确认它安装的应用程序权限。

我能够在 2.3.5 版上重现解析错误，方法如下：

我通常只是通过 Eclipse 安装应用程序，通过运行它，但如果我在包资源管理器窗口中右键单击包，使用 android 工具导出未签名的 .apk，并尝试手动安装包它不会安装。

如果我使用项目 bin 文件夹中的 .apk，它可以正常安装并在 2.3.5 上正常更新

这是我使用的 asynctask 类：

```
public class UpdateWireless extends AsyncTask<String,Void,String>{
private Context context;
public void setContext(Context contextf){
context = contextf;
}
@Override
protected String doInBackground(String... arg0) {
try {
URL url = new URL(arg0[0]);
HttpURLConnection c = (HttpURLConnection) url.openConnection();
c.setRequestMethod("GET");
c.setDoOutput(true);
c.connect();
String PATH = Environment.getExternalStorageDirectory().getAbsolutePath()+"/download/";
File oldFile = new File(Environment.getExternalStorageDirectory().getAbsolutePath()+"/download/AMWireless.apk");
if(oldFile.exists())
{
oldFile.delete();
}
File file = new File(PATH);
file.mkdirs();
File outputFile = new File(file, "AMWireless.apk");
FileOutputStream fos = new FileOutputStream(outputFile);
InputStream is = c.getInputStream();
byte[] buffer = new byte[1024];
int len1 = 0;
while ((len1 = is.read(buffer)) != -1) {
fos.write(buffer, 0, len1);
}
fos.close();
is.close();
} catch (IOException e){
}
return "File Saved";
}
protected void onPostExecute(String result) {
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(new      File(Environment.getExternalStorageDirectory().getAbsolutePath()+"/download/"+"AMWireless.apk")), "application/vnd.android.package-archive");
startActivity(intent); 
}

} 
```

是的，我需要，但在 catch 块中的一些东西，但我们会到达那里......

这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.wireless.wmaa"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />
    <uses-feature android:name="android.hardware.camera" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />    
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.INSTALL_PACKAGES"/>
    <uses-permission android:name="android.permission.DELETE_PACKAGES"/>
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
                                     >
        <activity
            android:label="@string/app_name"
            android:name=".SelectServer" 
            android:theme="@android:style/Theme.NoTitleBar"
            android:screenOrientation="landscape" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" /> 
             </intent-filter>"
            </activity>
        <activity
            android:name=".UpdateApp"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.NoTitleBar"
            android:screenOrientation="landscape" >  
            <intent-filter>
            </intent-filter>
        </activity>

        <activity
            android:name=".WirelessActivity"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.NoTitleBar"
            android:screenOrientation="landscape" >  
            <intent-filter>
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我从 Eclipse 导出东西错了吗？这是一个明显的问题吗？我这样做对吗？

**编辑 1：** 好吧，将其缩小到 android 4.0.3 上这条线的问题：

```
InputStream is = c.getInputStream(); 
```

此行会引发文件未找到异常，因为它无法在我的服务器上看到该文件，并且它永远不会下载。Android 2.3.5 看到文件没有异常并下载并安装正常...这里有什么问题？

**编辑 2：** 已解决我最初试图将文件托管在由 IIS 提供服务的站点上，而旧版本的 android 不在乎，但新版本不会看到该文件。一旦我将 .apk 移动到运行 apache 的 Web 服务器上，我就没有问题了。所以，IIS 或者我的配置有些问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:37:25.737

回答了我自己的问题。我托管文件的位置有问题。IIS 和 android 不能很好地结合在一起 :( 解决方案：将 .apk 文件移动到 apache 服务器。

# azure - 如何在第二个订阅上创建 Azure 虚拟机？

> ID：12716718
> 
> 赞同：3
> 
> 时间：2012-10-03T20:52:12.990
> 
> 标签：azure, azure-virtual-machine

在 Azure 中创建新虚拟机时，我无法选择第二个订阅。它们都在我的帐户上可见，但创建虚拟机时在下拉列表中除外。

我的 Windows Azure 帐户中有两个订阅。第一个是3个月的试用期。然后我开了一个 Bizspark 帐户。由于虚拟机功能处于预览阶段，技术支持关闭了我的票并让我参考论坛，但我在 Azure 帐户页面上的任何地方都找不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T05:52:19.800

固定的。去了这个页面：

[https://account.windowsazure.com/PreviewFeatures](https://account.windowsazure.com/PreviewFeatures)

并单击“再次注册”到虚拟机。

# sql-server - SQL 一对多还是 NONE 对多？

> ID：12716719
> 
> 赞同：0
> 
> 时间：2012-10-03T20:52:16.163
> 
> 标签：sql-server, tsql

我有一个一对多的加入。完美无瑕地工作，而且速度很快。一对多在 many 表中可能有零条记录。如果是这种情况，我想将它加入到许多表中的所有记录中。

```
USERS
-----
UserID | Name

CATEGORIES
------------------
CategoryID | CategoryName

USER_CATEGORIES
---------------
UserID | CategoryID 
```

如果没有分配给用户的类别，我想加入所有类别。这背后的原因是，一些用户可能管理所有类别。如果添加了一个类别，它会自动分配给这些用户。

```
1 | Michael
2 | Bob

100 | Billing
101 | Email
102 | Technical

1 | 101 
```

我希望结果是：

```
1 | Michael | 101 | Email
2 | Bob | 100 | Billing
2 | Bob | 101 | Email
2 | Bob | 102 | Technical 
```

到目前为止，它的工作方式是：

```
DECLARE @USERS TABLE (UserID INT, UserName VARCHAR(10));
DECLARE @USER_CATEGORIES TABLE (UserID INT, CategoryID INT);
DECLARE @CATEGORIES TABLE (CategoryID INT, CategoryName VARCHAR(10));

INSERT INTO @USERS (UserID, UserName)
(
    SELECT 1, 'Michael' UNION ALL
    SELECT 2, 'Bob'
)

INSERT INTO @CATEGORIES (CategoryID, CategoryName)
(
    SELECT 100, 'Billing' UNION ALL
    SELECT 101, 'Email' UNION ALL
    SELECT 102, 'Technical'
)

INSERT INTO @USER_CATEGORIES (UserID, CategoryID)
(
    SELECT 1, 101
)

SELECT
  U.UserID
  , U.UserName
  , C2.CategoryID
  , C2.CategoryName
FROM
  @USERS U LEFT JOIN
  @USER_CATEGORIES UC ON U.UserID = UC.UserID LEFT JOIN
  @CATEGORIES C ON UC.CategoryID = C.CategoryID LEFT JOIN
  @CATEGORIES C2 ON C.CategoryID = C2.CategoryID OR (C.CategoryID IS NULL) 
```

这是处理这个问题的正确方法吗？当我有很多用户/类别组合时，这似乎有点过多的开销。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T21:02:05.833

您可以删除以下连接之一`@CATEGORIES`：

```
SELECT
  U.UserID
  , U.UserName
  , C2.CategoryID
  , C2.CategoryName
FROM @USERS U
  LEFT JOIN @USER_CATEGORIES UC
  ON U.UserID = UC.UserID

  LEFT JOIN @CATEGORIES C2
  ON UC.CategoryID = C2.CategoryID
  OR (UC.CategoryID IS NULL) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T21:09:14.773

呃，如果你要查询一个类别或一个用户，那么虽然我觉得它在美学上令人反感，好吧。

对于所有用户和类别？不适合我，不

不能说你应该走哪条路。因为我不知道你为什么想要这些数据

但是我要么返回说'ALL'，内部连接的结果为空，或者我只是使用它不为该用户返回任何记录，以触发 select * from categories 如果我需要它并且还没有缓存它。

# ios5 - iOS：以编程方式创建 UIWindow 导致位置错误

> ID：12716725
> 
> 赞同：5
> 
> 时间：2012-10-03T20:52:45.910
> 
> 标签：ios5, ios6, uiwindow, cgrect, uiscreen

在 iOS 5.1.1 中，我发现如果我创建我的 UIWindow（我厌倦了 IB），并将其框架设置为 [UIScreen mainScreen].bounds，窗口就会显示*在状态栏下方*。但是，如果我在 iOS 6 上做同样的事情，它会出现在状态栏下方的正确位置。

```
CGRect r = [[UIScreen mainScreen] bounds];
self.window = [[UIWindow alloc] initWithFrame: r];
self.detailViewController = [[DetailViewController alloc] init];
self.window.rootViewController = self.detailViewController;
[self.window addSubview: detailViewController.view];
[self.window makeKeyAndVisible]; 
```

但是，如果我插入 r.origin.y += 20，将窗口移动到 iOS 5.1.1 的状态栏下方，这并不能解决问题，而且事情只会变得更奇怪。

以编程方式创建 UIWindow 时，在 iOS 中放置 UIWindow 的正确方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:53:54.407

而不是`[[UIScreen mainScreen] bounds]`你会想要使用`[[UIScreen mainScreen] applicationFrame]`. 这将是状态栏下方的屏幕区域（如果可见）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T00:44:43.920

我认为您可能需要这样做：

```
self.window.windowLevel = UIWindowLevelStatusBar + 1; 
```

# mysql - 如何告诉 MySQL 在查询期间只检查最新的 x 条目？

> ID：12716726
> 
> 赞同：2
> 
> 时间：2012-10-03T20:52:47.237
> 
> 标签：mysql, sql

我有一个页面可以选择数据库中的所有用户。只有一千或两个。没什么大不了。

但是，在选择它的同时，它还使用该查询中的 uid 来检查另一个包含大约 25,000 个条目的表。

```
SELECT COUNT(id)
FROM logs
WHERE time+date > {$timeNow} AND uid={$row['id']} 
```

它**为每个用户条目**执行此操作。可以想象，这会占用大量资源。

上述`WHERE`条款仅适用于最后一天的参赛作品，最多可能为 500-1000。然而，它的影响远不止于此。

我在想我可以设置一个 cronjob 来将所有与该子句不匹配的条目`WHERE`每天一次或两次导出到另一个表。我知道这会极大地帮助甚至以某种有效的方式解决问题。但是，我真的不喜欢有两个表用于相同（相对）目的。

有没有更好的方法可以做到这一点？我已经搜索了一段时间，但我找不到任何东西，但我想我会问你们，以防你们遇到同样的问题并找到一种独特的方法来解决它。

**为 Brendan Long编辑**：我的新查询：

```
$SQL = "SELECT u.id, COUNT(l.id) " .
       "FROM users u " .
       "INNER JOIN logs l " .
       "ON l.uid = u.id " .
       "WHERE l.time+l.date > {$timeNow} " .
       "GROUP BY u.id"; 
```

另外，请不要因为缺乏 PDO 而抨击我。我还没有时间转换它。我知道我是一个可怕的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T20:57:05.280

使用[JOIN](https://en.wikipedia.org/wiki/Join_%28SQL%29)以便数据库可以将其作为一个查询为您优化：

```
SELECT u.uid, COUNT(l.id)
FROM Users u -- or whatever your users table is named
LEFT JOIN logs l
ON l.uid = u.uid AND l.time + l.date > $timeNow
GROUP BY u.uid 
```

在英语中，这告诉数据库，“给我一个用户 ID 列表以及与它们相关联的日志数量，`time + date`之后在哪里`$timeNow`”。这显着提高了效率，因为您一次将所有工作交给数据库，因此它可以找出获取*所有*信息的最佳方式，而不是一次抓取一个信息。

## 加入

`LEFT JOIN`告诉数据库通过查找用户表和日志表相同的记录来匹配用户和日志`uid`。`LEFT`in`LEFT JOIN`告诉数据库为用户返回一个结果（连接的左侧**）**，即使他们没有与他们关联的任何日志（连接的右侧）。如果您不想在没有用户日志的情况下看到结果，您可以执行`INNER JOIN`，这将只显示联接两边都匹配的结果（用户和至少一个日志消息）。

## 通过...分组

有必要按用户 ID 对结果进行分组 - 否则您只会获得与*任何*`GROUP BY`用户关联的日志消息的总数，这可能没有帮助，因为您只能.*`SELECT COUNT(*) FROM logs`*

 *我使用表别名来缩短查询，因为它是我一直使用的样式，但您可以轻松地输入表的全名（`logs.uid`等）。您甚至可以不包括表名而逃脱，但是当您在查询中引用存在于多个表中的列时，您的数据库会感到困惑，因此我发现始终明确说明您的列是最简单的再谈。

## 索引

除非您有一个非常大的数据库，否则这个新查询应该会立即完成。如果没有，请接受@charly 的建议并尝试一些索引。不幸的是，您`l.time + l.date`在使用该值之前添加，我认为 MySQL 不会让您在 上创建索引`l.time + l.date`，但您可以通过`l.date`首先过滤（可索引）获得不错的结果：

```
ON l.uid = u.uid AND l.date > $timeNow AND l.time + l.date > $timeNow 
```

这看起来很重复，但它为数据库提供了更多可使用的功能，因为它可以：

1.  **使用 index**获取结果 where `l.date`is 。`$timeNow`
***   用 过滤那组（希望很小的）结果`l.time + l.date > $timeNow`。**

 **代替：

1.  对于**表中的每条记录**，添加`l.time + l.date`.
2.  检查该结果是否在`$timeNow`

## PHP

要在 PHP 中执行此操作，您需要执行以下操作：

```
$sql = // that query above
$result = mysql_query($sql);
while($row = mysql_fetch_array($result)) {
    echo "User " . $row[0] . " posted " . $row[1] . " times.";
} 
```

或者，如果您需要以更复杂的方式使用它，请预先获取所有内容：

```
$counts = array();
$sql = // that query above
$result = mysql_query($sql);
while($row = mysql_fetch_array($result)) {
    $counts[$row[0]] = $row[1];
}

// later
$user = 5; // some user we care about
echo "User " . $user . " posted " . $counts[$user] . " times."; 
```

如果您以“预先获取所有内容”的方式执行此操作，您还可以通过使用`INNER JOIN`查询版本进行一些优化，并且知道任何不在其中的用户`$counts`的计数为 0。

对不起，如果我的语法错误，但我认为这说明了这个想法。

## 安全说明

一个小切线：看起来您将变量直接放入查询中，这[通常是一个坏主意](https://en.wikipedia.org/wiki/SQL_injection)。有许多[非常复杂的解决方案](http://www.php.net/manual/en/mysqli.real-escape-string.php)，但最简单的方法是只[使用参数化查询](http://www.php.net/manual/en/pdo.prepared-statements.php)，并且永远不要将变量直接放入 SQL 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:58:51.180

我真的不确定，但可能会在 uid 列上添加 BTREE 索引。然后您的查询将更加有效，因为它不会扫描所有不属于指定 uid 的日志。

虽然我不是 100% 确定***

# linux - 即使 stdout 和 stderr 被重定向，程序也会显示控制台输出

> ID：12716736
> 
> 赞同：2
> 
> 时间：2012-10-03T20:53:42.010
> 
> 标签：linux, unix, console

即使标准输出和标准错误都被重定向到 /dev/null，vncpasswd 程序如何在控制台上产生输出？

```
$ vncpasswd > /dev/null 2> /dev/null
Password: 
```

编辑：这是部分跟踪：

```
open("/dev/tty", O_RDWR|O_CREAT|O_TRUNC|O_CLOEXEC, 0666) = 3
ioctl(3, SNDCTL_TMR_TIMEBASE or TCGETS, {B38400 opost isig icanon echo ...}) = 0
ioctl(3, SNDCTL_TMR_TIMEBASE or TCGETS, {B38400 opost isig icanon echo ...}) = 0
ioctl(3, SNDCTL_TMR_CONTINUE or TCSETSF, {B38400 opost -isig icanon -echo ...}) = 0
ioctl(3, SNDCTL_TMR_TIMEBASE or TCGETS, {B38400 opost -isig icanon -echo ...}) = 0
fstat(3, {st_mode=S_IFCHR|0666, st_rdev=makedev(5, 0), ...}) = 0
ioctl(3, SNDCTL_TMR_TIMEBASE or TCGETS, {B38400 opost -isig icanon -echo ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7fb7c3eda000
write(3, "Password: ", 10Password: )              = 10
read(3, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T21:03:55.507

它直接打开底层终端（类似于`open("/dev/tty", ...)`）。再多的重定向也无法摆脱这一点。如果您不想看到它，则必须运行它而不连接到 tty（例如通过`cron`或其他方式）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T21:59:51.780

它打开你的终端并在那里写：

```
open("/dev/tty", O_RDWR|O_CREAT|O_TRUNC|O_CLOEXEC, 0666) = 3
...
write(3, "Password: ", 10Password: )              = 10 
```

`setsid`如果你想让它变得不可能，请运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T20:55:35.543

您只是重定向`stderr`到`/dev/null`尝试`vncpasswd &> /dev/null`。

# ios - NSZombie 已启用，但仍然没有调试信息

> ID：12716737
> 
> 赞同：0
> 
> 时间：2012-10-03T20:53:46.887
> 
> 标签：ios, xcode, nszombie

突然之间，我一直在开发的一个应用程序不再向控制台输出调试信息，即使 NSZombie 已正确配置。我在 Xcode 4.5 上并在 iOS 5 和 6 上尝试过这个。任何线索这里可能有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T21:13:52.123

一些提示： - 确保项目处于调试模式：产品 - 编辑方案... => 构建配置 = 调试 - 添加异常断点：切换到断点导航器并添加异常断点 [异常：Objective-C]

# css - : 之前 : 之后和 滚下

> ID：12716742
> 
> 赞同：2
> 
> 时间：2012-10-03T20:54:09.210
> 
> 标签：css, css-content

我希望有人能引导我走向正确的方向。我正在学习如何在 CSS 中使用 :before 和 :after ，所以我尝试创建一个菜单导航，不知怎的，我设法将正确的阴影图像显示为 :before 和 :after 但现在尽快当我翻阅菜单时，它会上升。我试图放置填充和边距，`!important`但没有任何效果。

我的第二个问题是`<li>`我有一个链接`<a>`，但它只会改变*文本*上翻转的颜色。我想更改整个*菜单* `<li>`的颜色，但它不起作用。我的代码在这个 JsFiddle 中：

HTML：

```
<div id="menu"> 
    <ul>
        <li class="proxima_bold"><a href="#">Menu1</a></li>
        <li class="proxima_bold"><a href="#">Menu2</a></li>
        <li class="proxima_bold"><a href="#">Menu3</a></li>
        <li class="proxima_bold"><a href="#">Menu4</a></li>

    </ul>
</div>​ 
```

CSS：

```
#menu {
  text-transform:uppercase;
  position:relative;
}

#menu ul{
    margin: 0; padding: 0;
    float: left;
    margin-top:-10px !important;
    color:#787878;
}
#menu ul li{
    display: inline;
    float: left; 
    padding: 20px 15px 20px 15px;
    color:#787878;
    background: url(http://www.example.com/p7lpz) no-repeat 0 20px;  
}

#menu ul li:hover{ 
  background: url(http://www.example.com/2v4ik) repeat-x; 
  padding:0;
  margin:0; 
  color: #7fc652 !important;
  cursor:pointer;
}

#menu ul li a {  
  color: #787878;
  display:inline-block;
}
#menu ul li a:hover {  
  color: #7fc652;
}

#menu ul li:hover:after, 
#menu ul li:hover:before{
  content: "";
  position:relative;
  top:0;
  width:15px;
  height:55px;
  display:inline-block;
  vertical-align:middle; 
}

#menu ul li:hover:after{ 
  right: -15px;
  background: url(http://www.example.com/9tly4) no-repeat 0 0;  
}

#menu ul li:hover:before{ 
  left: -15px;
  background: url(http://www.example.com/u969z) no-repeat 0 0;  
}

#menu ul li .selected{
    float: left; 
    text-decoration: none;
    font-weight:bold;
    color: white;
    padding: 0 20px 0 20px;
    color:#444;
    background: url(http://www.example.com/p7lpz) no-repeat 0 0; 
} 
```

请让我知道如何解决这个问题。

我自己修好了。谢谢大家的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:04:46.317

这是你想要的吗？我不确定图像应该做什么。

[jsfiddle](http://jsfiddle.net/5LRsV/1/)

# mysql - SQL - 在 UPDATE 语句中给出 AS 关键字

> ID：12716743
> 
> 赞同：1
> 
> 时间：2012-10-03T20:54:23.423
> 
> 标签：mysql, sql

我有以下`UPDATE`声明：

```
update MESSAGES set status=
    (select (CASE 
               WHEN from_id='111111111' 
               THEN (CASE 
                      WHEN status='A' 
                      THEN 'S' 
                  WHEN status='R' 
                      THEN 'D' 
                     END)
               WHEN to_id='111111111' 
               THEN (CASE 
                       WHEN status='A' 
                       THEN 'R' 
                   WHEN status='S' 
                       THEN 'D' 
                     END) 
             END)
    as status_value)
where primary_key='236499681204' 
and status_value not null ; 
```

此查询的问题是，在最后一行，`status_value`无法识别。如果我删除最后一个比较`and status_value not null`，它会起作用。我不希望上面的版本可以工作，但是有人可以告诉我一个可以达到同样效果的替代方案吗？

有没有办法可以`AS`在查询中使用关键字`UPDATE`来定义变量`status_value`？

**编辑**

实际要求不仅是我检查是否`status_value`是`null`，而且如果是，我*不*执行任何更新`null`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T21:03:24.080

尝试添加`ELSE STATUS`和删除`and status_value not null`：

```
 update MESSAGES set status=
    (select (CASE 
               WHEN from_id='111111111' 
               THEN (CASE 
                      WHEN status='A' 
                      THEN 'S' 
                  WHEN status='R' 
                      THEN 'D' 
                     END)
               WHEN to_id='111111111' 
               THEN (CASE 
                       WHEN status='A' 
                       THEN 'R' 
                   WHEN status='S' 
                       THEN 'D' 
                     END) 
             ELSE STATUS 
             END)
    as status_value)
where primary_key='236499681204'; 
```

您也可以尝试使用`view`

```
create view MyView as
select (CASE 
               WHEN from_id='111111111' 
               THEN (CASE 
                      WHEN status='A' 
                      THEN 'S' 
                  WHEN status='R' 
                      THEN 'D' 
                     END)
               WHEN to_id='111111111' 
               THEN (CASE 
                       WHEN status='A' 
                       THEN 'R' 
                   WHEN status='S' 
                       THEN 'D' 
                     END) 
             END)
    as status_value;

update MESSAGES set status= mv.status_value
from MyView mv
where primary_key='236499681204'
and mv.status_value is null 
```

或者你可以使用`case in condition`

```
 update MESSAGES set status=
    (select (CASE 
               WHEN from_id='111111111' 
               THEN (CASE 
                      WHEN status='A' 
                      THEN 'S' 
                  WHEN status='R' 
                      THEN 'D' 
                     END)
               WHEN to_id='111111111' 
               THEN (CASE 
                       WHEN status='A' 
                       THEN 'R' 
                   WHEN status='S' 
                       THEN 'D' 
                     END) 
             END)
    as status_value)
where primary_key='236499681204'
and CASE
     WHEN from_id='111111111' 
      THEN (CASE 
             WHEN status='A' 
             THEN 'S' 
             WHEN status='R' 
             THEN 'D' 
            END)
     WHEN to_id='111111111' 
      THEN (CASE 
             WHEN status='A' 
             THEN 'R' 
             WHEN status='S' 
             THEN 'D' 
            END) 
    END is not null; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T21:04:57.457

在我看来，您正在尝试对 update 语句进行子查询，而我认为这并不是真正必要的。

您可以像这样简化查询：

```
UPDATE MESSAGES
SET status = CASE
         WHEN 
            (from_id='111111111' AND status='A') THEN 'S'
         WHEN 
            (to_id  ='111111111' AND status='A') THEN 'R'
         WHEN 
            (from_id  ='111111111' AND status='R') OR
            (to_id  ='111111111' AND status='S') THEN 'D'

         ELSE status
         END
WHERE priamry_key = '236499681204' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T21:09:10.390

假设你想要的只是摆脱空值，你可以这样做：

```
update MESSAGES set status=
    IFNULL(
    (CASE WHEN from_id='111111111' THEN 
        (CASE WHEN status='A' THEN 'S' 
        WHEN status='R' THEN 'D' END)
    WHEN to_id='111111111' THEN 
        (CASE WHEN status='A' THEN 'R' 
        WHEN status='S' THEN 'D' END) END),
    status)
where primary_key='236499681204' ; 
```

# css - Safari 不会从外部服务器加载 css 文件

> ID：12716747
> 
> 赞同：1
> 
> 时间：2012-10-03T20:54:44.117
> 
> 标签：css, safari, stylesheet, cross-site

我正在开发的网站之一是加载外部样式表：

```
@import url(http://www.othersite.com/stylesheet.css); 
```

这在每个浏览器中都能正常工作，除了 Safari。Safari 甚至不会尝试加载它。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:59:51.337

它可能与这个旧错误有关：[http](http://www.thinkoomph.com/thinking/2011-04/odd-css-bug-in-webkit-and-safari-4/) ://www.thinkoomph.com/thinking/2011-04/odd-css-bug-in-webkit-and-safari-4/ ？

> 解决方案很简单。我的 @import 指令被其他 CSS 指令包围。虽然 IE 可以容忍这一点，但实际的 W3C 规范声明 @import 指令应该出现在任何其他 CSS 指令之前，而 Firefox 尊重这一限制。因此，我的 @import 指令被忽略了。我把它移到文件的顶部，一切都开始工作了。

和

> 至多一个@charset 规则可以出现在外部样式表中——它不能出现在嵌入的样式表中——并且它必须出现在文档的最开始，前面不能有任何字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:54:44.117

```
<link rel="stylesheet" type="text/css" href="http://www.othersite.com/stylesheet.css" /> 
```

我在阅读一篇详细介绍使用 @import 与标签的优缺点的文章时偶然发现了该解决方案。我尝试使用标签而不是@import，无论出于何种原因，这都解决了我的问题。Safari 现在将加载样式表。如果有人对为什么这样做有任何见解，请发表评论:)

# asp.net - 如何在 ASP.NET ASMX Web 服务中生成图像并通过 AJAX 加载它？

> ID：12716750
> 
> 赞同：2
> 
> 时间：2012-10-03T20:54:59.477
> 
> 标签：asp.net, jquery

我目前正在使用 ASP.Net ASMX Web 服务中的函数来生成 System.Drawing.Image。我希望将此图像（在转换为 png 或其他内容后）作为对 AJAX 调用的回复传递给浏览器。（使用 jQuery 的 $.ajax）。我一直在谷歌搜索，但似乎无法找到方法，尽管我很确定这是可能的。我是先以某种方式将其转换为 Data URI，还是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T21:02:22.653

~~我不认为你能做到这一点。为了返回图像，您应该有一个返回 bytearray 的方法，我认为它在 javascript 中没有任何用处。
我的解决方法是将图像保存在某个位置并将图像的地址返回给客户端。~~

**更新**：根据评论，您可以将图像的数据编码为 Base64 字符串并在您的 ajax 回调中处理 DATA URI。
您可以使用 JSON 来表示 base64Encoded 数据，并且在 ajax 回调上，您可以编写如下内容：

```
$("#myImage").attr("src", "data:image/png;base64,RETURNED_DATA_FROM_ASMX"); 
```

这是在 c# 中将图像转换为 base64 的示例代码：

```
public string ImageToBase64(Image image, 
  System.Drawing.Imaging.ImageFormat format)
{
  using (MemoryStream ms = new MemoryStream())
  {
    // Convert Image to byte[]
    image.Save(ms, format);
    byte[] imageBytes = ms.ToArray();

    // Convert byte[] to Base64 String
    string base64String = Convert.ToBase64String(imageBytes);
    return base64String;
  }
} 
```

要了解如何格式化 DATA URI，您可以访问[http://en.wikipedia.org/wiki/Data_URI_scheme#Format](http://en.wikipedia.org/wiki/Data_URI_scheme#Format)。

# r - 如何在ggplot中为独立层缩放颜色？

> ID：12716752
> 
> 赞同：3
> 
> 时间：2012-10-03T20:55:00.973
> 
> 标签：r, scale, ggplot2

我有一个数据集，记录了三座建筑物的能源使用情况。我有一个融化的数据框，可以从钻石组中模仿出来：

```
data <- melt(diamonds[,c('depth','table','cut','color')],id=c('cut','color')) 
```

本质上，我有来自三个不同建筑物（7 个“颜色”因素）的每个月（“切割”）的供暖（“深度”）和制冷（“表格”）数据。我想在每个月的条形图中并排绘制三个建筑物（7 个“颜色”因素）（“剪切”）。

我希望代表冷却（“桌子”）或加热（“深度”）的条形根据建筑物（“颜色”因素）改变它们的阴影，同时保持按月分组（“切割”）。这是可视化钻石数据的一种不好的方法，但对于建筑物来说应该很有效，因为它们的加热和冷却月份通常不会重叠。到目前为止，我有：

```
p <- ggplot(data,
        aes(color,value,group=cut))
p <- p + geom_bar(stat = 'identity',
              position = 'dodge',
              aes(fill = variable))
print(p) 
```

我尝试使用 scale_fill_manual，但想不出一个有效的策略：

```
colours <- c('#0000FF', '#0033FF', '#0066FF', '#FF0000', '#FF3300', '#FF6600')

p <- p + scale_fill_manual(values = colours,
                           group = data$variable) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T21:45:50.307

通过一些技巧，这是可能的。导出基于钻石的数据集非常好，但我想使用较小的数据集

```
set.seed(1234)
data <-
expand.grid(month = month.abb,
            building = c("Building A", "Building B", "Building C"),
            hc = c("Heating", "Cooling"))
data$value <- rnorm(nrow(data), 60, 10) 
```

您希望填充颜色基于变量 ( `hc`) 和建筑物 ( `building`)，因此将其设置为该交互。

```
ggplot(data, aes(building,value,group=month)) + 
  geom_bar(stat = 'identity',
           position = 'dodge',
           aes(fill = interaction(building, hc))) 
```

![在此处输入图像描述](../Images/fba3247c15c5b5bd2254428a1a7b4ac0.png)

我们可以选择代表不同近色度的颜色，使它们更像您想要的。我使用了`RColorBrewer`调色板中间的“蓝调”和“红调”。

```
colours <- c("#FC9272", "#FB6A4A", "#EF3B2C", "#9ECAE1", "#6BAED6", "#4292C6")
# library("RColorBrewer")
# colours <- c(brewer.pal(9,"Reds")[4:6], brewer.pal(9,"Blues")[4:6]) 
```

并用于`scale_fill_manual`分配这些颜色。

```
ggplot(data, aes(building,value,group=month)) + 
  geom_bar(stat = 'identity',
           position = 'dodge',
           aes(fill = interaction(building, hc))) +
  scale_fill_manual(values=colours) 
```

![在此处输入图像描述](../Images/cf6014fe5b62fea2f16e6231db8ae722.png)

真正的诡计在于使传说不那么复杂。我只列出了 2 个级别（以颜色表示的中间建筑）并给它们起不同的名称（以及不同的图例标题）。

```
ggplot(data, aes(building,value,group=month)) + 
  geom_bar(stat = 'identity',
           position = 'dodge',
           aes(fill = interaction(building, hc))) +
  scale_fill_manual("Heating/cooling",
                    values=colours,
                    breaks=c("Building B.Heating", "Building B.Cooling"),
                    labels=c("Heating", "Cooling")) 
```

![在此处输入图像描述](../Images/a710a0b14f2110a5cdef42a4f948a6db.png)

# sql-server - SQL Server 递归 CTE 和数据透视不能一起工作

> ID：12716753
> 
> 赞同：3
> 
> 时间：2012-10-03T20:55:05.143
> 
> 标签：sql-server, tsql, pivot, common-table-expression, recursive-query

为什么这个[SQL Fiddle](http://sqlfiddle.com/#!3/5637b/12/0)不起作用？

复制了完整的脚本：

```
create table tbl (
  id int,
  month varchar(9),
  value float);
insert tbl values
(1,'Jan',0.12),
(1,'Feb',0.36),
(1,'Mar',0.72),
(2,'Mar',0.11),
(2,'Apr',0.12),
(2,'May',0.36);

declare @tbl table (
  id int,
  number int,
  month varchar(9),
  value float);
insert @tbl
select id.id, Months.Number, Months.Name, t.value
from (values(1,'Jan'),
            (2,'Feb'),
            (3,'Mar'),
            (4,'Apr'),
            (5,'May'),
            (6,'Jun')) Months(Number,Name)
cross join (select distinct id from tbl) id
left join tbl t on t.month = Months.name and t.id=id.id;

;with cte as (
  select id,Number,month,isnull(Value,0.0)value
  from @tbl
  where Number=1
  union all
  select cte.id,cte.Number+1,cte.month,isnull(t.value,cte.Value)
  from cte
  join @tbl t on t.id=cte.id and t.number=cte.number+1
)
/*update t
set value=cte.value
from @tbl t
join cte on t.id=cte.id and t.number=cte.number;*/

select id, Jan,Feb,Mar,Apr,May,Jun
from (select id,month,value from /*@tbl*/ cte) p
pivot (max(value) for month in (Jan,Feb,Mar,Apr,May,Jun)) v; 
```

预期结果：

```
ID  JAN FEB MAR APR MAY JUN
1   0.12    0.36    0.72    0.72    0.72    0.72
2   0   0   0.11    0.12    0.36    0.36 
```

实际结果：

```
ID  JAN FEB MAR APR MAY JUN
1   0.72    (null)  (null)  (null)  (null)  (null)
2   0.36    (null)  (null)  (null)  (null)  (null) 
```

如果您取消注释已注释掉的代码，它就可以工作。但是，如果您直接从 CTE 中选择，它会显示与UPDATE 语句之后`SELECT * FROM CTE`相同的值。`@tbl`

前段时间我花时间分析[CTE + ROW_NUMBER()](https://stackoverflow.com/a/5417257/573261)但希望有人能解释一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T21:04:50.583

我没有从我得到的结果中得到相同的`CTE`结果`@tbl`。对于`CTE`所有的月份都是`JAN`。如果你用这个改变你的 CTE 定义：

```
;with cte as (
  select id,Number,month,isnull(Value,0.0)value
  from @tbl
  where Number=1
  union all
  select cte.id,cte.Number+1,t.month /*here there was cte.month*/,
         isnull(t.value,cte.Value) 
  from cte
  join @tbl t on t.id=cte.id and t.number=cte.number+1
) 
```

然后我得到相同的结果。

# authentication - 使用 CAS（中央身份验证服务）进行 Web2py 授权

> ID：12716754
> 
> 赞同：3
> 
> 时间：2012-10-03T20:55:15.097
> 
> 标签：authentication, authorization, web2py, cas

我有几个应用程序，它们都是基于 web2py 的，我希望它们都使用中央身份验证服务，web2py 中的 CAS 可以正常进行身份验证，但是在授权方面，它不起作用！

假设我们有应用程序“提供者”，应用程序“A”和“B”，“A”和“B”使用“提供者”进行身份验证，那么他们想要使用“提供者”中定义的组/成员资格/权限“在他们的应用程序中定义访问权限，它不起作用，不支持？或者我错过了一些东西，最好的方法是什么。

是否可以将身份验证作为中心然后在本地进行授权？例如，我想进行中央身份验证（使用 CAS），然后在定义用户可以访问的记录（授权）时，它是本地的，是否受支持，我不明白 CAS 的意义何在授权不适用于中央应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T22:08:44.643

CAS 本身只处理身份验证而不是用户授权。CAS 的重点是每个应用程序不必单独和显式登录。

开箱即用，应用程序授权取决于客户端应用程序。Unicon 为 CAS 开发了一个附加组件，提供[基于角色的授权](https://github.com/Unicon/cas-addons/wiki/Role-Based-Services-Authorization)。

# uiwebview - 通过透明的 uiwebview 传递点击

> ID：12716755
> 
> 赞同：1
> 
> 时间：2012-10-03T20:55:16.243
> 
> 标签：uiwebview, transparent

我在另一个项目（实际上是一个 unity3d 项目）前面覆盖了一个 uiwebview。

我使 uiwebview 透明。是否有设置通过 uiwebview 将点击传递到 webview 覆盖层下方的按钮？

# html - 如何更新商店中的单个实例？

> ID：12716757
> 
> 赞同：0
> 
> 时间：2012-10-03T20:55:26.263
> 
> 标签：html, model, sencha-touch-2, store

我有一个用于支持列表的商店。当我点击一个列表项时，我会显示一个“详细信息”面板。详细信息面板上的按钮之一启动 POST 请求以启动服务器端操作。这会将服务器端的状态从“空闲”更改为“进行中”。要更新详细信息面板上的 UI，然后我通过调用 Model 类的 load() 来加载此实例的最新数据，例如

```
MyApp.model.Server.load(serverId, 
    success: function(record, operation) {
        // code that updates the current view
    }
}); 
```

但是，这似乎并没有更新底层 Store 中的实例。所以当我回到列表时，我点击的服务器有陈旧的数据（仍然说“空闲”）。

有没有办法可以获取更新的服务器实例并仅更新商店中的该记录？我不想为了更新一条记录的 UI 而重新加载我的整个商店。

我尝试更新商店中的实例，但无济于事：

```
Ext.getStore('Server').getById(serverId).data = record.data; 
```

我在这里错过了什么吗？还是我真的必须重新加载整个商店才能获得一条记录的更新状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:11:40.000

不，您不需要重新加载所有商店并手动设置好更新记录数据。

正确的：

`var record = Ext.getStore('Server').first();`

`record.set(form.getData());`

`record.save();`

# c# - Regex.Match 不适用于查找其他文本 C# 中包含的字符串

> ID：12716768
> 
> 赞同：2
> 
> 时间：2012-10-03T20:55:59.247
> 
> 标签：c#, regex, string, macros, replace

我正在使用以下 C# Regex 调用来查找放置在文本文件中的某些宏的所有实例：

```
MatchCollection matches = Regex.Matches(txt, @"/{macro:(.*?)}/"); 
```

但它每次都没有返回匹配项。txt 字符串看起来像这样：

> 嗨，我的名字是 {macro:name}

关于为什么这不起作用的任何快速观察？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:59:18.180

`@"\{macro:(.*?)\}"`应该管用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T20:59:44.060

尝试转义`{`and `}`。这些是正则表达式中的特殊字符，用于表示特定的重复次数。所以试试这个：

```
@"\{macro:(.*?)\}" 
```

# python - 如何创建计时器？

> ID：12716769
> 
> 赞同：0
> 
> 时间：2012-10-03T20:55:58.873
> 
> 标签：python, timer

我想知道从执行代码启动计时器然后完成计时器需要多长时间。例如，这是我要寻找的东西：

```
import timerlib
import urllib2

timer = timerlib.timer()

print 'Starting download now!'
timer.start()

urllib2.urlopen('http://some.site.com/100mb')

timer.stop()
print 'Downloaded 100mb in ' + str(timer.collectedtime()) + '!' 
```

它会输出如下内容：`Downloaded 100mb in 5m31s!`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:03:30.003

如果您只是为了方便最终用户而打印时间，而不是出于分析目的，那么您不需要任何花哨的东西；[`time.time`](http://docs.python.org/library/time.html#time.time)返回时间戳，您可以对其进行算术运算并打印（实际上，只是浮点秒数）：

```
import time
t0 = time.time()
print 'Starting download now!'
urllib2.urlopen('http://some.site.com/100mb')
t = time.time()
print 'Downloaded 100mb in ' + str(t - t0) + '!' 
```

但是，如果您正在寻找分析，您肯定想使用[`timeit`](http://docs.python.org/library/timeit.html)：

```
import timeit
timeit.timeit("urllib2.urlopen('http://some.site.com/100mb')", 
              setup="import urllib2", 
              number=1) 
```

如您所见，这几乎没有那么干净和简单，也没有那么灵活。但是这个`timeit`库照顾到了新手想不到的各种细节，而有经验的开发者还是会出错。

（当然在现实生活中，你永远不想仅仅基于一次运行来分析任何东西，所以你不应该通过`number=1`。那只是为了展示最接近的等价物。）

# php - PHP上传脚本失败

> ID：12716773
> 
> 赞同：0
> 
> 时间：2012-10-03T20:56:25.687
> 
> 标签：php, upload

我正在使用 BluImp 文件上传器。我永远使用的伟大的小脚本。

现在我已经搜索了那里的论坛并且除了调试之后找不到任何东西，我相信这更多的是权限/限制/设置问题。

上传完成后，将返回错误：

> 错误：SyntaxError：输入意外结束

调试后，它是由写入服务器的任何函数引起的，即 file_put_contents、move_upload_file....

该文件为 1.47 MB

我额外的 ini 改动是

```
max_execution_time = 1600
max_input_time = 1600
post_max_size = 128M
upload_max_filesize = 128M 
```

谁能看到我看不到的东西？

问候

另外我忘了补充一点，并非所有文件都发生这种情况

# c# - 测试资源管理器 > 全部运行：System.Exception：找不到主应用程序程序集

> ID：12716777
> 
> 赞同：4
> 
> 时间：2012-10-03T20:56:40.263
> 
> 标签：c#, .net, unit-testing, visual-studio-2012

当我运行选定的测试时，测试在测试资源管理器中正确运行。但是，当使用`Run All`按钮时，VS2012 会抛出一个`System.Exception`状态

> 找不到主应用程序集...

有没有可以配置测试资源管理器来查找应用程序集的地方？

一个例子将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:42:45.060

This is a *divide and conquer* suggestion in finding the problem.

Place the attribute [IgnoreAttribute] over all of your tests but one. Do run all. Does the same happen? If not remove the ignore over another test and run all again. Keep doing it until failure. Is a specific test in combination failing with another? If so what is that telling you...

If failure occurs immediately or regardless of the tests choosen, check the initialize methods which have [ClassInitialize()] or [TestInitialize()] over them (if you have them) and verify that they are not causing the problem such as an intiailzation happening more than once when it should only be done once by putting a breakpoint in the methods them and seeing if they are called as expected.

# java - 多列结构 Java

> ID：12716779
> 
> 赞同：8
> 
> 时间：2012-10-03T20:56:44.203
> 
> 标签：java, data-structures, hashmap

在 C# 中有 DataTable 类型可用于创建多列结构。在java中我可以使用嵌套的hashmaps，但是即使你有3列，它的结构也太复杂了。核心 java 是否支持任何此类结构而不包含任何外部库？

我可以使用多维数组，但仍然检查任何可能的选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T08:31:16.073

Java 没有直接可用的表格格式。但是，我们可以在这里使用泛型功能来发挥我们的优势。[您可以在此处](http://docs.oracle.com/javase/tutorial/java/generics/)阅读有关它们的信息。实例化看起来像这样

```
Map<String, List<String>> tableMap = new HashMap<String, List<String>>(); 
```

现在，您有一个二维结构，其中每一行都有一个标识符字符串，并且该行的其余部分存储为一个列表。不过，您确实需要为每一行选择唯一标识符，因此如果您打算将其与表映射（就像在 C# 中所做的那样），请确保 HashMap 的键是表的主键。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T21:04:57.120

[Guava](https://code.google.com/p/guava-libraries/)中有二维[`Table`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/index.html?com/google/common/collect/Table.html)，但 JDK 中没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T08:36:08.703

Java 中没有直接的等价物。您可以使用`javax.sql.rowset.WebRowSet`或`java.sql.ResultSet`来构建数据结构。

# hibernate - 如何将一个spring bean复制到另一个

> ID：12716781
> 
> 赞同：1
> 
> 时间：2012-10-03T20:56:49.757
> 
> 标签：hibernate, copy, clone, javabeans

出于与此问题无关的目的，我们使用 Spring 和带注释的休眠 bean 逐行复制从一个数据库到另一个数据库。

在大多数情况下，它只是将一个类的属性复制到另一个类。但是，必须对外键进行一些特殊处理。最简单的复制方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:10:37.067

即使您将 Hibernate 集成到 Spring 项目中，从 hibernate 返回的对象也不是 Spring bean。但是，您可以使用 [org.springframework.beans.BeanUtils.copyProperties(Object, Object, Class, String[])简单地将字段从一个](http://srcrr.com/java/spring/3.1.0/reference/org/springframework/beans/BeanUtils.html#copyProperties%28java.lang.Object,%20java.lang.Object,%20java.lang.String%5B%5D%29)[POJO](http://en.wikipedia.org/wiki/Plain_Old_Java_Object)复制到另一个 POJO

# android - 通知动画，仅在 Galaxy nexus 上

> ID：12716782
> 
> 赞同：1
> 
> 时间：2012-10-03T20:56:57.370
> 
> 标签：android, notifications, galaxy, foreground

我有一个前台服务，通知我每秒更新一次作为计时器。这在我的 android 4.1 模拟器上运行良好。在 Galaxy Nexus 手机上，通知显示为新通知，每次更新时都有动画。这是为什么？相同的 android 版本，但我只在 Galaxy Nexus 上发现了这种行为。

```
private void postNotification(Context context, int notificationId, String title, String text, String ticker, boolean service) {
    Intent intent = new Intent(context, MyActivity.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP|Intent.FLAG_ACTIVITY_SINGLE_TOP);        
    PendingIntent contentIntent = PendingIntent.getActivity(context, notificationId, intent, 0);

    @SuppressWarnings("static-access")
    NotificationManager nm = (NotificationManager) context.getSystemService(context.NOTIFICATION_SERVICE);
    NotificationCompat.Builder builder = new NotificationCompat.Builder(context);
    builder.setContentTitle(title);
    builder.setContentText(text);
    if(ticker.length() > 0)
        builder.setTicker(ticker);      
    builder.setSmallIcon(R.drawable.notification);
    builder.setContentIntent(contentIntent);
    builder.setOngoing(service);

    nm.notify(null, notificationId, builder.getNotification()); 
    startForeground(notificationId, builder.getNotification());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:41:13.937

这是另一个在通知栏中作为服务运行的应用程序，它产生了这种行为。卸载该应用程序后工作。

# java - Java程序下载opencsv后无法运行

> ID：12716784
> 
> 赞同：-1
> 
> 时间：2012-10-03T20:56:59.213
> 
> 标签：java, eclipse, opencsv

我下载了opencsv（来自[http://sourceforge.net/projects/javacsv/files/latest/download](http://sourceforge.net/projects/javacsv/files/latest/download)），从那以后我的所有Java程序都出现了这个错误

```
java.lang.NoClassDefFoundError: HelloWorld
Caused by: java.lang.ClassNotFoundException: HelloWorld
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClassInternal(Unknown Source)
Exception in thread "main" 
```

我怎样才能解决这个问题？我意识到无论如何我都不需要 opencsv ......我怎样才能删除它，以便我的程序可以像往常一样编译和运行？我正在使用 Eclipse 版本：1.4.2.20120213-0813

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:59:53.253

您可以通过转到 Help->About（或 Mac 上的 Eclipse->About）来删除插件，选择安装详细信息，选择要删除的插件，然后选择“卸载”。

# python - 如何将此 Python 脚本的输出或结果保存为文本或 csv 文件？

> ID：12716785
> 
> 赞同：-1
> 
> 时间：2012-10-03T20:57:01.247
> 
> 标签：python, beautifulsoup

这是我的代码：

```
import urllib
from BeautifulSoup import BeautifulSoup

sourceUrl = "/home/me/results.html"

dataPage = urllib.urlopen(sourceUrl)
soup = BeautifulSoup(dataPage)

soup.findAll(attrs={"class" : "description keywords"}) 
```

我正在从我县的公共记录站点复制数据。一些县为公民提供可下载的 csv 文件，但我的县没有。所以，我正在尝试学习 Python 来做到这一点。我已经获取了我需要的所有数据，但我需要一种方法将其保存为 csv 或文本文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T21:04:23.837

您可以轻松地将数据保存到文本文件：

```
with open('textfile.txt', 'w') as handle:
    handle.write('text') 
```

对于 CSV 文件，过程几乎相同：

```
import csv

with open('textfile.txt', 'w') as handle:
    writer = csv.writer(handle)
    writer.writerow(['Test', 'row', 'contents']) 
```

# javascript - 为什么完全在客户端渲染图像占位符是可取的？

> ID：12716787
> 
> 赞同：1
> 
> 时间：2012-10-03T20:57:12.453
> 
> 标签：javascript, html, html5-canvas, placeholder

我不禁注意到最近[Holder.js Github 存储库引起](https://github.com/imsky/holder)了很多关注。

我是新手，所以请多多包涵，但我无法理解为什么完全在客户端渲染图像占位符是一个如此大的胜利。这是否会以某种方式降低开发复杂性？有性能提升吗？

只是试图更好地理解这如何适应宏伟的计划。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T21:05:33.643

> 这是否会以某种方式降低开发复杂性？

是的，因为在设计布局原型时，您不需要任何后端或第三方服务来提供体面的占位符。

> 有性能提升吗？

与使用为小猫或其他服务的第三方服务相比，是的，它会更快。它也将比从后端提供图像更快。

但是，我个人更喜欢使用纯 CSS 代替占位符。

# visual-c++ - 用c ++设置输出窗口中的列数

> ID：12716790
> 
> 赞同：-1
> 
> 时间：2012-10-03T20:57:26.893
> 
> 标签：visual-c++

我创建了一个正确运行的斐波那契程序。但是我无法弄清楚如何按照问题想要的方式格式化输出窗口。行和间距是正确的，但程序应该显示 6 列，因为现在程序输出 9 列，第 9 列被截断。我做错了什么或错过了什么？我正在使用 Visual Studio C++ 编译器。

```
#include <iostream> 
#include <iomanip>
using namespace std;

void main ()
{
int FirstNum = 1;
int SecondNum = 0;
int Count = 1;
int Answer;

do
{

    Answer = FirstNum + SecondNum;
    FirstNum = SecondNum;
    SecondNum = Answer;

cout << FirstNum << setw (10);

Count++;

} while (Count < 40);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:26:12.587

此代码将仅生成 6 列。

```
#include <iostream>
#include <iomanip>
using namespace std;
int main ()
{
int FirstNum = 1;
int SecondNum = 0;
int Count = 1;
int Answer;
do
{
Answer = FirstNum + SecondNum;
FirstNum = SecondNum;
SecondNum = Answer;
cout << setw (10)<< FirstNum ;
Count++;
if(Count%6==0)
cout<<endl;
} while (Count < 40);
return 0;
} 
```

# apache - 山狮中的 httpd.conf

> ID：12716792
> 
> 赞同：2
> 
> 时间：2012-10-03T20:57:53.887
> 
> 标签：apache, osx-mountain-lion, httpd.conf

我正在使用 Mountain Lion，我将网站放在 `/Users/myname/Sites`. 检查 apache 文件夹后，我发现了两个`httpd.conf`，其中之一是：

```
/private/etc/apache2/httpd.conf 
```

另一个是：

```
/private/etc/apache2/users/myname.conf 
```

这两者之间有什么关系？如果我想添加一些重写指令，我可以把它们放进去`myname.conf`吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T21:01:09.437

其中的 httpd.conf`/private/etc/apache2/`是 apache 服务器的全局配置。其中的配置文件`/private/etc/apache2/users/`与用户目录有关。在 OSX 上配置 Apache 的方式会加载一个用户目录，通过`/~myname`.

# java - 设置视图颜色时出现空指针异常

> ID：12716794
> 
> 赞同：0
> 
> 时间：2012-10-03T20:57:54.110
> 
> 标签：java, android, view, nullpointerexception

我正在尝试将视图的背景设置为红色，只是为了尝试一些东西。我在活动布局中添加了一个视图，并给它一个 id，“gradientView”。在我的 Java 代码中，我创建了一个像这样的新视图：

```
 View gradientView = (View) findViewById(R.id.gradientView); 
```

在 onCreate 我这样做：

```
 super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_clean_weather);
    gradientView.setBackgroundColor(Color.RED); 
```

出于某种原因，它在 findViewById 处给了我一个空指针异常。当我将它引用到我的 XML 视图时，我以为我让它“不为空”？！

有谁知道发生了什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T20:59:18.210

你`findviewById`应该追求`setContentView(..)`;

例子：

```
 super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_clean_weather);
    View gradientView = (View) findViewById(R.id.gradientView);
    gradientView.setBackgroundColor(Color.RED); 
```

否则`gradientView`将为 null 并且对`null`引用的任何操作都会导致`NullPointerException`.

# objective-c - Xcode iOS6 编译错误：无架构

> ID：12716796
> 
> 赞同：7
> 
> 时间：2012-10-03T20:58:05.700
> 
> 标签：objective-c, ios, architecture, compiler-errors, ios6

所以我最近刚刚将 Xcode 更新到 4.5，并且能够拿到 iOS6 手机。我在模拟器上进行测试很好（4.3/5.1/6.0），但是当我决定在实际的 iOS 6 手机上进行构建时，它给了我这个错误。

```
No architectures to compile for (ONLY_ACTIVE_ARCH=YES, active arch=armv7s, VALID_ARCHS=armv6 armv7 i386). 
```

我做了一些查找并通过进入构建设置来修复它，以更改有效的架构以包括 armv7s，它完成了它应该做的事情。

但是通过添加我得到了这个错误

```
ld: file is universal (3 slices) but does not contain a(n) armv7s slice: some static library framework for architecture armv7s 
```

经过一番观察，我觉得静态库框架导致了所有问题，因为它不支持 iOS 6，而且我不太乐观地认为它可以轻松修复。但是，由于我无法在网上确定我的确切情况，我希望有人比我更了解这一点并且可以帮助我。谢谢

注意：静态库在代码中无处不在，删除它几乎不是一种选择

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T02:06:12.797

您可以尝试更改“仅构建活动架构”YES --> NO。对我来说效果很好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-03T21:04:59.433

为了构建，应用程序链接的所有静态库必须为所有应用程序的体系结构生成代码。

看起来 Xcode 4.5 已经更新了您的项目以构建 armv7s 代码，但它忽略了将 armv7s 添加到应用程序的活动架构中。

一旦你解决了这个问题，看起来问题是静态库没有生成 armv7s 代码，但你的应用程序正在尝试为 armv7s 构建。

如果这是问题所在，有两种方法可以解决此问题。要么您希望您的应用程序只生成 armv7 代码（消除对 armv7s 代码的需要），您需要将应用程序的目标设置更改为：

![在此处输入图像描述](../Images/b591117abe7682b37388a1642c8f150a.png)

...或者您希望您的应用程序*和所有链接的静态库*具有如下所示的构建设置：

![在此处输入图像描述](../Images/4404ef8d46c921824bcb781b5d2824f9.png)

armv7 代码将在 3gs 以上的任何设备上运行。armv7s 代码只能在 iPhone 5 上运行，并且会稍微快一些。

因此，如果您可以使用 iPhone 5 进行测试，并且您拥有静态库的源代码，那么第二个选项可能是最好的。否则，假设您的库至少生成 armv7 代码，那么只要您的应用程序不尝试构建 armv7s，您也应该没问题。

如果该库仅构建 armv6 代码，而 xCode 4.5 不支持，那么您需要更改其构建设置以至少生成 armv7 代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T22:01:21.030

Xcode 4.5 不再支持 armv6，所以你需要移除这个架构。

正如您已经发现的那样，您使用的库似乎不支持 armv7，这现在是必不可少的。

我认为除了用正确的目标编译库之外别无选择。如果你有源代码，这应该是微不足道的；如果是第三方，则您依赖他们进行更新。然而，他们会知道，如果不更新他们的库，他们的库已经到了生命的尽头。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-30T09:41:12.143

我有类似的问题。通过在目标项目的构建设置中将“仅构建活动架构”更改为“否”来解决此问题。

![在此处输入图像描述](../Images/dd11e6c2283055de062cfd6dc51da5d7.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T21:25:24.977

删除 armv7s 并添加 armv7（和/或 armv6）

# ruby-on-rails - Rails 3、自定义原始SQL插入语句

> ID：12716797
> 
> 赞同：10
> 
> 时间：2012-10-03T20:58:05.930
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个评估模型。评价有很多分数。每当创建新的评估时，都会为需要评估的每个用户创建一个分数记录（请参阅下面我正在使用的当前方法。）因此，例如，可能一次创建 40 个分数记录。然后，评估所有者使用用户的分数更新每个分数记录。

我希望使用原始 SQL，因为每个插入都是它自己的事务并且速度很慢。

我想使用原始 SQL 将以下内容转换为批量插入语句：

```
def build_evaluation_score_items
  self.job.active_employees.each do |employee|
    employee_score = self.scores.build
    employee_score.user_id = employee.id
    employee_score.save
  end
end 
```

关于如何做到这一点的任何想法？我尝试从 Chris Heald 的 Coffee Powered 网站改编代码示例，但没有骰子。

感谢任何愿意提供帮助的人！

编辑 1

我忽略了提及当前方法包含在事务中。

因此，基本上，我试图将其添加到代码块中，以便将所有内容都插入到一个语句中（** 此代码片段来自讨论该主题的 Chris Heald 的 Coffee Powered 网站。我会在那里提出问题，但帖子是 > 3 岁。）：

```
inserts = []
TIMES.times do
  inserts.push "(3.0, '2009-01-23 20:21:13', 2, 1)"
end
sql = "INSERT INTO user_node_scores (`score`, `updated_at`, `node_id`, `user_id`)VALUES #{inserts.join(", ")}" 
```

我很乐意展示我的一些无效尝试中的代码......

再次感谢！

好吧，我拼凑了一些类似于上面代码的东西，但是在 ('evaluation_id' 部分周围出现 SQL 语句无效错误。有什么想法吗？

```
def build_evaluation_score_items
  inserts = []
  self.job.active_employees.each do |employee|
    inserts.push "(#{self.id}, #{employee.id}, #{Time.now}, #{Time.now})"
  end
  sql = "INSERT INTO scores ('evaluation_id', `user_id`, 'created_at', `updated_at`)VALUES #{inserts.join(", ")}"
  ActiveRecord::Base.connection.execute(sql) 
end 
```

关于上述 SQL 代码中的什么导致错误的任何想法？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-03T23:41:27.283

好吧，经过多次试验和错误，这是最终的答案。很酷的是所有记录都是通过一个语句插入的。当然，会跳过验证（因此，如果您需要在创建时进行模型验证，这将不合适）但在我的情况下，这不是必需的，因为我所做的只是为每个员工的评估设置分数记录。当然，当工作负责人更新员工的评估分数时，验证会按预期工作。

```
def build_evaluation_score_items
  inserts = []
  time = Time.now.to_s(:db)
  self.job.active_employees.each do |employee|
    inserts.push "(#{self.id}, #{employee.id}, '#{time}')"
  end
  sql = "INSERT INTO scores (evaluation_id, user_id, created_at) VALUES #{inserts.join(", ")}"
  ActiveRecord::Base.connection.execute(sql) 
end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-04T02:50:40.817

我推荐使用[activerecord-import gem](https://github.com/zdennis/activerecord-import/wiki) ，而不是直接构建 SQL（并让自己面临 SQL 注入和其他问题） 。它可以发出多行`INSERT`命令，以及其他策略。

然后，您可以编写如下内容：

```
def build_evaluation_score_items
  new_scores = job.active_employees.map do |employee|
    scores.build(:user_id => employee.id)
  end
  Score.import new_scores
end 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-03T21:01:22.120

我认为您正在寻找的是：

```
def build_evaluation_score_items
  ActiveRecord::Base.transaction do
    self.job.active_employees.each do |employee|
      employee_score = self.scores.build
      employee_score.user_id = employee.id
      employee_score.save
    end
  end
end 
```

所有子事务都会自动“推送”到父事务。这将防止这么多事务的开销，并应提高性能。

[您可以在此处](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html)阅读有关 ActiveRecord 事务的更多信息。

**更新**

对不起，我误会了。为后代保留上述答案。试试这个：

```
def build_evaluation_score_items
  raw_sql = "INSERT INTO your_table ('user_id', 'something_else') VALUES "
  insert_values = "('%s', '%s'),"
  self.job.active_employees.each do |employee|
    raw_sql += insert_values % employee.id, "something else"
  end
  ActiveRecord::Base.connection.execute raw_sql
end 
```

# winforms - 我可以将richtextbox文本属性绑定到winforms中的列表或数组吗

> ID：12716798
> 
> 赞同：1
> 
> 时间：2012-10-03T20:58:28.103
> 
> 标签：winforms, data-binding, binding, richtextbox

我希望将富文本框的文本属性绑定到自定义对象的数组或列表。这可能吗？我看到很多与 Richtextbox 相关的 WPF 绑定，但我在 winforms 中执行此操作。我对示例文章的搜索还没有找到任何有价值的东西。想我会在这里问。

我的一个数据库调用返回给我一个特定指令列表，我想一次将整个指令列表填充到 Richtextbox 中。text 属性不支持 IEnumerable 类型，所以我不确定我是否可以做我想做的事情。我正在寻找一种方法来填充我的richtextbox，而无需一次循环和插入一个项目。我认为数据绑定是最适合的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:11:41.890

我遇到了同样的问题，并通过创建自定义 ValueConverter 解决了这个问题。它的代码可以在[这里](https://gist.github.com/3905438)找到。

基本上，它需要一个 IEnumerable，然后返回一个带有自定义分隔符的字符串（默认为 NewLine）。

# facebook - 无法从 Heroku 获取我的应用程序源代码

> ID：12716801
> 
> 赞同：0
> 
> 时间：2012-10-03T20:58:48.553
> 
> 标签：facebook, heroku

我想开始开发 Facebook 应用程序，所以我创建了一个，并选择使用 Heroku 来托管我的应用程序。当我尝试获取应用程序的源代码时发生错误，以下屏幕截图显示了错误：

[https://dl.dropbox.com/u/17510525/Heroku_Trouble/Untitled.png](https://dl.dropbox.com/u/17510525/Heroku_Trouble/Untitled.png)

出了什么问题，为什么我无法获取源代码？多谢

编辑：错误说：“ssh：连接到主机 heroku.com 端口 22：错误文件号致命：远程端意外挂断”

# wcf - WCF 服务使用的与 EF 无关的设计问题。

> ID：12716805
> 
> 赞同：0
> 
> 时间：2012-10-03T20:59:01.727
> 
> 标签：wcf, entity-framework, domain-driven-design

我正在尝试设置 EF 以在 WCF 上工作并保持域类模型 EF 不可知。

代码被组织成 3 个项目。（我正在尝试 DDD - 我对它很陌生，但期待学习更多）

```
    项目：QA - 领域层。包含 DataContract 模型/实体。
        参考
            QA.数据

    项目：QA.Data - 数据层。包含上下文和 EDMX（代码生成策略 = "none"）
        参考
            实体框架/System.Data.Entity

    项目：QA.Repository - 数据访问/存储库。包含存储库类
        参考
            QA [领域层]
            QA.Data [数据层]
            实体框架/System.DataEntity

```

我的理解是域层可以引用数据层，但数据层不应该引用域。这提出的问题是我的域模型/类是在域层中定义的，但创建和返回它们的上下文是在数据层中。为了让我的上下文知道返回一个“Widget”对象，它需要一个对定义“Widget”的域层的引用

**我的（失败的）解决方案**：我的解决方案是为每个领域模型创建接口并将它们放置在数据层中。上下文将返回... IdbSet ...这些接口又将由域模型实现，因此使我的数据层无需直接引用我的域（这无论如何都会导致非法循环引用）。域模型最初是使用“ADO.NET DbContext Generator w/WCF Support”T4 模板构建的。此过程导致在小部件类定义的开头包含 [KnownType(typeof(IWidgetPiece))]。（一个 Widget 有一个导航属性 ...ICollection ...）

当我尝试访问服务时出现问题，我收到以下错误

> 无法将“QA.Data.IWidgetPiece”添加到已知类型列表中，因为已经存在具有相同数据协定名称“http://www.w3.org/2001/XMLSchema:anyType”的另一种类型“System.Object”。如果存在特定类型的不同集合 - 例如 List 和 Test[]，则它们不能同时添加为已知类型。考虑仅指定其中一种类型以添加​​到已知类型列表中。

我可以将这些更改为具体的实现... [KnownType(typeof(WidgetPiece))] ...但我继续收到此错误，因为它们所指的导航属性仍在返回它必须执行的 IWidgetPiece 接口类型为了满足接口实现。

我试图弄清楚如何保持适当的划分，并且仍然让上下文返回它应该返回的内容。由于这个和其他原因，返回接口的上下文仍然不能与我“坐在一起”，但我想不出另一种方法来做到这一点，即使这也提出了上述问题。帮助！

一些代码希望能澄清我以前的杂乱无章......

```
namespace QA.Data
{

    public interface IWidgetPiece
    {
        String ID { get; set; }
    }

    public interface IWidget
    {
        String ID { get; set; }
        ICollection<IWidgetPiece> Pieces;    
    }

    public partial class WidgetEntities : DbContext
    {
        IDbSet<IWidget> Widgets { get; set; }
        IDbSet<IWidgetPiece> WidgetPieces { get; set; }
    }

}

namespace QA
{
    [KnownType(typeof(IWidgetPiece))]
//  [KnownType(typeof(WidgetPiece))]
    [DataContract(IsReference = true)]
    public partial class Widget : QA.Data.IWidget
    {
        [DataMember]
        public String ID { get; set; }
        [DataMember]
        public virtual ICollection<IWidgetPiece> Pieces { get; set; }
    }

    [DataContract(IsReference = true)]
    public partial class WidgetPiece : QA.Data.IWidgetPiece
    {
        [DataMember]
        public string ID { get; set; }
    }

}

namespace QA.Repository
{
    public class WidgetRepository
    {
        public List<Widget> GetWidgetbyID(String sId)
        {
            WidgetEntities context = new WidgetEntities();
            List<IWidget> objs = context.Widgets.Where(b => b.ID == "78").ToList();

            List<Widget> widgetList = new List<Widget>();
            foreach (var iwidget in widgetList)
                widgetList((Widget)iwidget);

            return widgetList;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:29:45.937

您真的想要/需要两个独立的模型，即您的数据访问层模型 (edmx) 和您的“真实”域模型吗？像 EF 这样的 ORM 框架的全部意义在于，您可以使用物理（数据库）概念模型之间的映射将域模型映射到数据库表。

从 EF4.1 开始，您可以构建域模型，然后在数据访问层中使用流式 API 直接将其映射到数据库。如果您想快速启动运行，您还可以选择从数据库中对 POCO 域模型进行逆向工程。

创建整个 EF 类模型似乎有点不必要的复杂性，然后必须再次将其映射到另一个类模型（这很可能与 EF 生成的模型相当接近）。

# sql - 如何重新格式化 DateTime 数据类型

> ID：12716813
> 
> 赞同：1
> 
> 时间：2012-10-03T20:59:28.227
> 
> 标签：sql, sql-server

我知道可以使用 select convert 重新格式化当前日期和时间的 DateTime 数据类型。但是，我还没有找到将现有列（DateTime 数据类型）重新格式化为：hh:mm:ss yyyy/mm/dd 的方法。或者更好的是，我想重新格式化它以仅显示时间。我不想简单地转换为时间数据类型，因为我正在使用一个接受日期或日期时间的图表。但我真正想在图表的特定轴上显示的是时间。有没有办法根据我的要求重新格式化 DateTime？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:25:58.730

SQL Server 的`convert`函数可以`style`根据数据类型采用可选参数。这就是如何将日期时间转换为各种格式的字符串的方法。例如，尝试运行：

```
select convert(varchar(30), getdate(), 108) -- returns hh:mi:ss 
```

`getdate()`在此示例中，您也可以用列名替换。

有许多可用的样式，如[文档](http://msdn.microsoft.com/en-us/library/ms187928.aspx)中所示。

请注意，您将返回一个 varchar，因此您可能希望按原始列的数据类型进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T21:09:24.437

您可以使用`SET DATEFORMAT`，但这会更改 SQL Server 上的所有 DateTime。您可以进行一些自定义格式设置，但它会将 DateTime 转换为 VarChar，因此您将无法将其视为 DateTime。

设置日期格式：http: [//msdn.microsoft.com/en-us/library/ms189491.aspx](http://msdn.microsoft.com/en-us/library/ms189491.aspx)

不过，我不确定您是否能够使用您所询问的格式。

# excel - 使用此命名范围进行列表验证有什么问题？

> ID：12716814
> 
> 赞同：0
> 
> 时间：2012-10-03T20:59:31.543
> 
> 标签：excel, validation, worksheet-function

我有一列数据，随着时间的推移，它会添加更多的值。我想将此列的值用于另一个工作表上的列表验证，以便下拉选项反映该列的当前内容。我尝试`ListColumn`使用以下公式创建一个命名范围：

```
=ADDRESS(3,12,1,1,"DataSource")&":"&ADDRESS(COUNTA('DataSource'!$L:$L),12,1,1,"DataSource") 
```

当我尝试为单元格添加验证时，选择允许：“列表”并`=ListColumn`在公式框中输入，我收到以下错误消息：

```
The list source must be a delimited list, or a reference to a single row or column. 
```

我尝试将整个公式包装在一个`INDIRECT()`中，虽然这没有在名称管理器屏幕上生成错误，但当我尝试添加验证时，我收到了以下错误消息：

```
The Source currently evaluates to an error.  Do you want to continue? 
```

我不确定这里有什么问题。两个 ADDRESS() 调用的第二个参数是相同的，因此范围地址应该引用单个列。如何设置我正在寻找的动态列表验证？

编辑：调试这会产生一些奇怪的行为。当我尝试使用 选择 ListColumn 时，我不断收到运行时错误`Range("ListColumn").Select`。消息是“对象 '_Global' 的方法 'Range' 失败。”

输入`=ListColumn`返回：`'DataSource'!$L$3:'DataSource'!$L$65`，这是预期值。

此外，当我输入公式时`=COUNTA(ListColumn)`，它返回“1”，但当我输入公式时`=COUNTA('DataSource'!$L$3:'DataSource'!$L$65)`，它返回正确的值“63”。 `=COUNTA(INDIRECT(ListColumn))`也返回“1”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T00:57:10.453

我认为问题可能是`DataSource`作为文本表名称包含在第二个`ADDRESS`块中。在执行上述步骤时，我得到的行为与您完全相同，但它似乎适用于此：

```
=INDIRECT(ADDRESS(3,12,1,1,"DataSource")&":"&ADDRESS(COUNTA(DataSource!$L:$L),12,1,1)) 
```

然后，您可以完全按照上面所做的操作并在下拉列表中使用它。我最好的假设是，由于您已经在地址的第一部分定义了工作表，因此您不需要在第二部分提供它（如果这样做会导致错误）。如果您从程序的角度考虑它，这是有道理的（我认为:)），因为很难/不可能引用多张纸上的范围，因此语法可能不允许第二张纸是在冒号之后指定（即使相同）。这只是猜测（可能是错误的），所以希望解决方案有效:)

![在此处输入图像描述](../Images/7ff616fd7efc915515c7024c2362f849.png) ![在此处输入图像描述](../Images/18c67d08d8fa2dbb3d224ee336b17c1f.png)

# asp.net-mvc-3 - Asp.net MVC Telerik chart.options.series.push

> ID：12716815
> 
> 赞同：0
> 
> 时间：2012-10-03T20:59:39.787
> 
> 标签：asp.net-mvc-3, telerik-mvc

我的应用程序是 asp.net MVC，使用 Telerik MVC 图表。我正在尝试使用 Javascript 隐藏和显示系列：

这是图表：

```
@(Html.Telerik().Chart<MyVDC.Models.ChartData.PatientGroupData>()
          .Name("Chart")
           .Title(title => title
            .Text("Representative Sales vs. Total Sales"))
            .Series(series =>
            {
                //series.Line(s => s.Diastolic).Name("Diastolic");
                series.Line(s => s.Systolic).Name("Systolic");
                series.Line(s => s.HeartRate).Name("Heart Rate");
            })
             .CategoryAxis(axis => axis
                .Categories(s => s.Day).Labels(labels => labels.Template("${ formatDate(value) }"))
    )
           .DataBinding(dataBinding => dataBinding
                            .Ajax().Select("_PatientGroupChartData", "BP"))

                         ) 
```

这是显示舒张系列的脚本：

```
 function ShowDiastolic() {
        var chart = $("#Chart").data("tChart");
        chart.options.series.push({ color: "red", data: [chart.Diastolic], name: "Diastolic", type: "Line" });
        chart.refresh();
    } 
```

我没有任何运气，我会很感激你的建议。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T03:41:47.883

我发现它应该是这样的：chart.options.series.push({ color: "red", data: [11, 11, 23, 13], name: "Diastolic", type: "Line" });

此外，图表不应该有任何系列开始。

# php - 从相机 iphone 上传网站

> ID：12716822
> 
> 赞同：0
> 
> 时间：2012-10-03T21:00:10.113
> 
> 标签：php, javascript, iphone, html

是否可以在提示（作为选项）从 iPhone 上的默认相机拍照的网站上进行上传？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T21:36:38.193

您可以从图片库上传图片或在 ios 6 上使用相机拍摄。它内置在移动 safari 中。在你的服务器端，像往常一样做正常的事情。

此[链接](http://www.idownloadblog.com/2012/06/13/ios-6-safari-media-uploads/)将解释 iOS 6 中的 Safari 如何处理媒体上传。

这是从在 iOS6 上运行的真实设备截取的屏幕截图。

![在此处输入图像描述](../Images/b6cffd7860f3bb72c385d7daa9ab2364.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T21:02:35.233

iPhone 不允许从浏览器上传到网站，无论是文件还是照片。

最好的选择是第三方应用程序，例如[http://code.google.com/p/iphone-photo-picker/](http://code.google.com/p/iphone-photo-picker/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T21:03:11.860

您必须为此构建一个应用程序，我相信网站目前无法请求该应用程序。

# asp.net - ASP.NET 中的 URL 路由/重写

> ID：12716823
> 
> 赞同：0
> 
> 时间：2012-10-03T21:00:25.013
> 
> 标签：asp.net, url-rewriting, routing

我们想向我们的网站添加更多数据跟踪，并且我们想在 url 的末尾附加一个关键字。

我有这样的东西

[http://www.samplesite.com/t/1/video/123456](http://www.samplesite.com/t/1/video/123456)

[http://www.samplesite.com/t/2/video/123457](http://www.samplesite.com/t/2/video/123457)

[http://www.samplesite.com/t/3/video/123458](http://www.samplesite.com/t/3/video/123458)

我希望它看起来像这样

[http://www.samplesite.com/t/1/video/123456/funny](http://www.samplesite.com/t/1/video/123456/funny)

[http://www.samplesite.com/t/2/video/123457/sports](http://www.samplesite.com/t/2/video/123457/sports)

[http://www.samplesite.com/t/3/video/123458/informative](http://www.samplesite.com/t/3/video/123458/informative)

我一直在互联网上搜索试图弄清楚如何做到这一点，但我还没有真正想出任何东西。我可以将这些 url 粘贴到正确的页面，但我实际上不知道如何让这些页面在加载时具有这些 url。我意识到这个问题是非常开放的，但我基本上是在寻找更多搜索的起点，因为我认为我的措辞并不是最好的。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:04:49.180

如果您使用的是 IIS 7 或 7.5，则可以使用 Microsoft URL Rewriter 模块，否则有一些适用于 IIS6 和 5 的第三方模块。

[http://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)

有几个例子： [http ://www.iis.net/learn/extensions/url-rewrite-module/using-url-rewrite-module-20](http://www.iis.net/learn/extensions/url-rewrite-module/using-url-rewrite-module-20)

那么您是说您转到其中一个 URL 并显示您所期望的，但是 URL 正在更改（因此它没有后缀）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T22:19:08.630

您是否尝试过使用[urlrewriter](http://urlrewriter.net/)？

一些参考资料：

[http://dotnetguts.blogspot.in/2008/07/url-rewriting-with-urlrewriternet.html](http://dotnetguts.blogspot.in/2008/07/url-rewriting-with-urlrewriternet.html)

[http://www.tutorialized.com/tutorial/URL-Rewriting-in-ASP.NET-using-URLRewriter.Net/38861](http://www.tutorialized.com/tutorial/URL-Rewriting-in-ASP.NET-using-URLRewriter.Net/38861)

[http://www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/](http://www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/)

希望这对您有所帮助。

# xcode - Xcode 4.5 没有这样的文件或目录 - libCordova.a

> ID：12716830
> 
> 赞同：28
> 
> 时间：2012-10-03T21:00:41.783
> 
> 标签：xcode, ios6

clang：错误：**没有这样的文件或目录：'/Users/admin/Library/Developer/Xcode/DerivedData/__TESTING__-fzbkvdbnndieeagphtjhdndiyttl/Build/Products/Debug-iphoneos/libCordova.a'**

我如何得到这个丢失的**libCordova.a**？

[![对齐顶部](../Images/ca9fff9ad5c1c6818431b1ead9d77e38.png "工具提示")](https://i.stack.imgur.com/NdAiG.png "工具提示")
[（来源：[kerrydeaf.com](http://www.kerrydeaf.com/libCordova.a.png)）]

更新：对于西蒙·日尔曼。 [![对齐顶部](../Images/ef88fbde4010f72e48d45fdd45ce143c.png "工具提示")](https://i.stack.imgur.com/MZ2GQ.png "工具提示")

更新：对于西蒙·日尔曼。我没有看到“身份和类型”。我可以看到“身份”。我正在使用 xcode 4.5 [（来源：][[kerrydeaf.com](http://www.kerrydeaf.com/id.png)][）][![对齐顶部](../Images/19ed4f37496f81d14d212415d5ed9da5.png "工具提示")](https://i.stack.imgur.com/eYSIe.png "工具提示")

[![对齐顶部](../Images/ef88fbde4010f72e48d45fdd45ce143c.png "工具提示")](https://i.stack.imgur.com/MZ2GQ.png "工具提示")

更新：对于西蒙·日尔曼。我得到了身份。

[![对齐顶部](../Images/bdf1e796ccd65bc5215b14bccc75d62d.png "工具提示")](https://i.stack.imgur.com/sq6HB.png "工具提示")
[（来源：[kerrydeaf.com](http://www.kerrydeaf.com/cor.png)）]

更新：对于塞缪尔

[![对齐顶部](../Images/ff0203e6c3f0a82deba64cde5ee2a5fc.png "工具提示")](https://i.stack.imgur.com/Wefwj.png "工具提示")
[（来源：[kerrydeaf.com](http://www.kerrydeaf.com/armv6.png)）]

更新：对于 Simon Germain - 建筑。

更新：对于 james0n - armv。

[![对齐顶部](../Images/6046d536e8b3587ec3514159a72784ac.png "工具提示")](https://i.stack.imgur.com/57KDa.png "工具提示")
[（来源：[kerrydeaf.com](http://www.kerrydeaf.com/new.png)）]

更新：对于 Simon Germain - 建筑。

更新：对于 james0n - armv。

```
 Undefined symbols for architecture i386:
   "_OBJC_CLASS_$_CDVURLProtocol", referenced from:
       objc-class-ref in AppDelegate.o
   "_OBJC_CLASS_$_CDVViewController", referenced from:
       _OBJC_CLASS_$_MainViewController in MainViewController.o
   "_OBJC_METACLASS_$_CDVViewController", referenced from:
       _OBJC_METACLASS_$_MainViewController in MainViewController.o
 ld: symbol(s) not found for architecture i386
 clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

更新：对于 james0n - 有效架构。

[![对齐顶部](../Images/58762fc5b486ad339ca8f71af26227bf.png "工具提示")](https://i.stack.imgur.com/zW6gB.png "工具提示")
[（来源：[kerrydeaf.com](http://www.kerrydeaf.com/valid.png)）]

更新：现在解决了！！！确保所有用于 ios 6 的 armv7 和 armv7 都在 xcode 中。有效。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-04T08:07:31.397

对于您的项目，将构建设置“仅构建活动架构”设置为是。

（也许还为 CordovaLib 项目将架构构建设置设置为“标准（armv7，armv7s）”。）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-08T08:00:13.797

有（和许多其他人一样）同样的问题，这就是我所做的：

1.  重做 Phonegap 的入门指南（包括再次下载和提取源代码）
2.  HelloWorld 应用也有同样的问题
3.  产品 - 清洁
4.  根据 james0n 的回答更改了 'HelloWorld' 和 'CordovaLib'-**项目（所以不是目标），设置：**

> 架构：标准（armv7、armv7s）
> 
> 仅构建活动架构：是

然后它神奇地起作用了，但我认为步骤 3 和 4 做到了。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-06T20:15:19.673

我和你有同样的问题，很好地部署到模拟器但没有部署到设备上。建议的答案都不适合我。

这对*我*有用：

将部署目标设置为 v4.3，并在项目的项目设置中`CordovaLib`，将其设置`Build Active Architecture Only`为`Yes`. （在您的主要项目中不需要）。
重要的是，做一个产品-> 清理和重建。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-03T22:57:43.217

只需要从 YourProject 和 CordovaLib 中删除**armv6 ：**![从 CordovaLib 中删除 armv6 并对 YourProject 执行相同操作](../Images/e94cbeee70311935065f78d69dfb03d8.png)

这样做的后果是什么？显然，它仍在 iPhone 3GS 上运行，但不是以前的版本。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-03T21:04:30.743

确保 CordovaLib 的产品目标设置为右侧面板上的“相对于已构建产品”，左侧第一个选项卡，在“身份和类型”下。

![在此处输入图像描述](../Images/fdc1be95b550fbda123146aa976d2871.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-09T11:12:51.323

另外-确保您一次打开的PhoneGap Xcode项目不超过一个-我在两者之间遇到了冲突。“工作区已在另一个工作区中打开”类型的循环。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-04T15:58:04.753

你必须运行更新脚本，我知道这样做可能会很痛苦，但这就是它所需要的。

从官方网站下载并打开Phonegap 2.1 包。打开终端窗口，cd 到安装目录

您需要首先创建一个新项目：

`./create [project_folder_path] [package_name] [project_name]`

然后，您需要设置库的路径。

`/update_cordova_subproject [xcodeproj file]`

现在打开您的项目并将部署目标设置为 4.3，您应该可以开始了。希望有帮助

编辑：

这就是我的 CordovaLib 项目配置的样子

![在此处输入图像描述](../Images/8c68ac7584980cbcba7ee6495048300c.png)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-03T21:09:35.187

从此处下载 Cordova 安装程序[http://phonegap.com/download](http://phonegap.com/download)。确保它与您当前使用的版本相同（例如 2.0）。

然后挂载在 ios 目录中找到的 dmg。

然后运行 ​​.pkg 安装程序。

重新启动 Xcode。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-10-24T13:25:42.690

我通过从有效架构设置中删除 armv6 和 i386 架构来解决此问题

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-10-09T17:15:04.283

在花费了很多时间并遇到更多错误之后，这对我有用。基本上结合了上述大部分内容：

1.  从新的 Cordova 副本开始。如果你像我一样一直在弄乱它，它就不再新鲜了。
2.  将 Cordova 文件移出下载目录（我倾向于不时清理该目录......）
3.  按照 Phonegap 文档中的描述创建一个新项目，即将 ios/bin 文件夹拖到终端图标并在终端中运行创建脚本。无需运行 update_cordova_subproject 脚本。
4.  在 XCode 中打开项目。
5.  对于您的产品，将 iOS 部署目标设置为 4.3（我在项目和目标构建设置中都做了 2 次）。
6.  对于 CordovaLib.xcodeproj，在 Project Build Settings 中将 Build for Active Architecture 设置为 Yes。
7.  清洁并运行。

不要在任何架构列表中包含 armv7s，因为它不会为设备构建。

在模拟器和装有 iOS 6 的 iPad 上测试。使用 Phonegap 2.1.0 和 XCode 4.5.1。

**更新：**如果你想支持 iPhone 5，你需要 armv7s。它需要[https://issues.apache.org/jira/browse/CB-1360](https://issues.apache.org/jira/browse/CB-1360)中的修复，该修复将在 Cordova 2.2.0 中。（还没有尝试过，正在做一个 iPad 项目。）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-08-20T20:15:02.187

除了其他一些建议和帖子之外，我发现我只在 AdHoc 构建中遇到了这个问题。请注意，我在调试过程中发现了这一点，因为如果我将 Edit Scheme > Archive build configuration 设置为“release”，它会正常工作，但如果设置为 AdHoc，它会给我一个链接错误，告诉我这个文件不能成立：

/Users/jason/Library/Developer/Xcode/DerivedData/MommyNearest-ceourmykvgxdekbkmzenuvhcfnzk/Build/Intermediates/ArchiveIntermediates/MommyNearest/BuildProductsPath/Adhoc-iphoneos/libCordova.a

这实际上是问题所在的一个很好的线索，即 CordovaLib 子项目不知何故没有 AdHoc 配置（它只有“调试”和“发布”配置）。

因此，在构建 AdHoc 版本（与 Testflight 一起使用）时，它不会为该文件正确创建符号链接。一旦我向 CordovaLib 子项目添加了“AdHoc”配置，它就开始工作了。

![在此处输入图像描述](../Images/cc60102c7af6417628bce0c2f55d8a4d.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-02-19T15:35:25.663

我也有这个问题。我认为这是因为我之前安装了一个旧版本的 phone gap，它在 xcode 中安装了一些东西。我卸载了，然后重新安装了xcode。然后我运行了电话间隙附带的 Uninstall Cordova.applescript。这解决了红色 libCordova.a 的问题

# javascript - 我可以使用 AngularJS 来处理和加载我的对象吗

> ID：12716832
> 
> 赞同：2
> 
> 时间：2012-10-03T21:00:53.420
> 
> 标签：javascript, coffeescript, angularjs

我有一些在我的代码中使用和扩展的 CoffeeScript 类。我怎样才能使用 angularjs 而不必创建通常的模块，比如

```
MyNamespace = MyNamespace || {}
MyNamespace.SuperClass = class 
```

在不同的文件中

```
MyNamespace = MyNamespace || {}
class ChildClass extends MyNamespace.SuperClass
MyNamespace.ChildClass = ChildClass 
```

我可以简单地写

```
angular('MyModule').factory, 'SuperClass', () ->
    class SuperClass
        constructor: (@id) ->
    return SuperClass 
```

并通过该类扩展

```
angular('MyModule').factory, 'ChildClass', ['SuperClass', (SuperClass) ->
    class ChildClass extends SuperClass
        constructor: (id) ->
            super(id)
    return ChildClass
] 
```

我的问题实际上是我使用 CoffeeScript 将所有对象编译成一个文件。现在，如果子类在基类之上，则基类将是未定义的，我会得到一个错误。我正在寻找一种优雅而简单的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T02:39:26.567

使用 Angular，您可以取消将类放在命名空间中，因为您的模块/服务的名称可以被限定并有效地服务于相同的目的。

我认为 Angular 不会帮助确保您的超类代码在您的子类代码之前运行。为此，似乎有大约 8000 种解决问题的方法，但没有一种是标准的——requireJs、coffeetoaster、brunch、grunt、cake......

我使用 grunt，并指定我想连接我的咖啡脚本的顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:58:08.233

如果您使用 Angular 的 DI 系统，它应该确保您的类以正确的顺序实例化，而不管哪个先加载。你的例子真的有问题吗？

# python - scikit 支持在 [0,1] 或 [-1,1] 之间缩放特征

> ID：12716834
> 
> 赞同：3
> 
> 时间：2012-10-03T21:00:57.353
> 
> 标签：python, scikit-learn, svm

scikit-learn 的 SVM 基于 LIBSVM。LIBSVM/SVM 要求对数据进行缩放，建议特征值应在 [0, 1] 或 [-1, 1] 两个范围之一。也就是说，在典型的矩阵中，每一列都是一个特征，并且每列都进行缩放。

LIBSVM FAQ 建议使用简单的缩放来获得 [0, 1] 之间的特征：

```
x'=(x-min)/(Max-min) 
```

scikit-learn 是否支持这种“简单缩放”？是否有其他建议可以扩展功能以与 SVM 和 RBF 内核一起使用。有参考吗？我找到了一篇名为“支持向量分类实用指南”的参考文章，它基于 LIBSVM，他们建议缩放到 [0, 1] 或 [-1, 1]。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T21:17:31.387

是的，包含此功能。您描述的确切公式将在下一个版本中作为`sklearn.preprocessing.MinMaxScaler`. 目前，[`sklearn.preprocessing.Scaler`](http://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.Scaler.html#sklearn.preprocessing.Scaler)（将`StandardScaler`在下一个版本中重命名，但旧名称将保留为向后兼容）中心和缩放特征以具有均值 0 和方差 1，这应该足以将数据传递给 SVM 学习器。

此外，[`sklearn.preprocessing.Normalizer`](http://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.Normalizer.html#sklearn.preprocessing.Normalizer)（以及`TfidfVectorizer`用于文本分类的）将*每个样本*的值标准化为 [0, 1] 范围。这相当于文本分类和信息检索中常见的长度标准化。

您可以使用一个`Pipeline`对象来构造一个居中、缩放的 SVM 分类器：

```
clf = Pipeline([('scale', Scaler()),
                ('svm', SVC())]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T21:15:49.963

我认为您正在寻找[StandardScaler](http://scikit-learn.org/dev/modules/generated/sklearn.preprocessing.StandardScaler.html#sklearn.preprocessing.StandardScaler)，至少对于 [-1,1] 情况。

# drupal-7 - 如何让个人用户在 Drupal 7 中导入他们自己的外部博客提要？

> ID：12716835
> 
> 赞同：1
> 
> 时间：2012-10-03T21:00:57.073
> 
> 标签：drupal-7, drupal-modules, drupal-feeds

因此，我正在尝试在 Drupal 7 中构建一个“博客网关”，让用户可以将来自他们自己的外部站点的提要添加/编辑/删除到一个集体流中，以进行评分、评论等。

该网站应该按照以下方式做一些事情：

1.  让用户通过注册表单为其提要添加 URL
2.  注册时从提要中导入最新的帖子（之后继续）。
3.  为提要中的每个项目创建一个节点，其他用户可以对其进行评分。
4.  从这些节点创建列表。

好的，视图结合 Feeds 模块可以完成大部分工作（导入 feed，为每个项目创建节点并创建列表）。我已经设法允许用户使用 Feeds 模块“手动”导入 Feed。

问题是我找不到限制用户可以导入的提要数量的方法，而且我不知道如何将注册表单中的 URL 作为导入的基础。

我一直在尝试使用规则模块解决这些问题，但没有结果。

我认为类似于 Profile Blog Information 模块的东西可以解决问题，但它仅适用于 Drupal 6，不适用于 Feeds 模块。

关于解决方案或替代方案的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:27:29.920

> 我找不到限制用户可以导入的提要数量的方法

如果您使用 Feed 模块的默认设置，您应该已经拥有“Feed”内容类型。因此，如果您想控制用户可以导入的“提要”数量，我认为[http://drupal.org/project/node_limit应该可以解决问题。](http://drupal.org/project/node_limit)它将帮助您设置用户可以*创建*的“Feed”内容类型的节点数 （应该是同一件事，对吧？）

> 如何将注册表中的 URL 作为导入的基础

现在，我将在这里建议一个自定义模块路由。它应该可以解决问题，但您可能/可能不想添加自定义模块，具体取决于您的项目性质/您对 Drupal 的专业水平。

1.  [将 URL 字段（可能是URL 字段类型](http://drupal.org/project/url)的实例）添加到用户配置文件。检查以允许它显示在注册表中。可以说我们称之为`feed_url`。

2.  实现[hook_user_insert](http://api.drupal.org/api/drupal/modules!user!user.api.php/function/hook_user_insert/7) () 当一个新用户被添加到站点时调用：

    ```
    /**
     * Implements hook_user_insert().
     */
    function MY_MODULE_user_insert(&$edit, $account, $category) {
      if (isset($edit['feed_url'])) {
        $index = array('feed_url', LANGUAGE_NONE, 'value');
        // Get the feed URL from the registration form values.
        $feed_url = drupal_array_get_nested_value($edit, $index);
        if (!empty($feed_url)) {
          // Create a new feed on behalf of the user
          _MY_MODULE_create_feed($feed_url, $account->uid);
        }
      }
    }

    /**
     * Creates a new feed on behalf of a user.
     *
     * @param string $url
     *   Feed URL
     * @param numeric $uid
     *   {users}.uid of the user for whom this feed is being created.
     */
    function _MY_MODULE_create_feed($url, $uid) {
      // @todo Add more validations here
      $node = new stdClass();
      $node->uid = $uid;
      $node->type = 'feed';
      $node->feeds['FeedsHTTPFetcher']['source'] = $url;
      $node->language = language_default('language');
      node_save($node);
    } 
    ```

# regex - Bash 脚本中的严格正则表达式字符串比较

> ID：12716836
> 
> 赞同：2
> 
> 时间：2012-10-03T21:01:01.027
> 
> 标签：regex, bash, registry

我正在尝试编写一个简单的 Bash 脚本来帮助我验证一些 Windows 注册表设置。所有数据都在文件夹（这是计算机的主机名）中，并且位于脚本中指定的路径中。最终目标是根据行尾的注册表项值来验证值设置不正确的主机。

作为脚本的参考，参数一是我要查找的注册表项，参数二是它应该是的值。如果`$control`匹配`$value`'s 字符串末尾的内容，则应输出作为变量的机器名称`$FOLDER`

```
list=$(ls)
regkey=$1
control=$2

for FOLDER in $list
do
value=$($FOLDER/policies/Effective-Security-policy.txt | grep "$regkey")
if [[ "$value" =~ $control ]] ;
    then
        echo $FOLDER
    else
        continue
fi  
done 
```

但是，我无法对其进行严格比较，因为还有一个名为的注册表项`RestrictAnonymousSAM`，它会列出不正确的值。

以下是文本文件中的一些行，我需要能够区分两者，因此返回的值是针对该特定注册表项的：

```
MACHINE\System\CurrentControlSet\Control\Lsa\RestrictAnonymous=4,0
MACHINE\System\CurrentControlSet\Control\Lsa\RestrictAnonymousSAM=4,1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:17:09.253

如果我正确理解你想要做什么，我认为你应该写：

```
regkey="$1"
control="$2"

for FOLDER in * ; do
  file="$FOLDER/policies/Effective-Security-policy.txt"
  if iconv -s -f utf-16 -t utf-8 "$file" \
       | grep -q '^[^=]*\\'"$regkey=$control$"
  then
    echo "$FOLDER"
  fi    
done 
```

`grep -q`在文件中搜索与模式匹配的行，但不*打印*出来。这使得它非常适合在`if`-tests 中使用，因为如果找到匹配项则`grep`返回(success/true)，否则返回(error/false)。`0``1`

（重要提示：以上假设`$regkey`并且`$control`不能包含任何`grep`可能特殊处理的元字符。如果*可以*，那么这将变得更加棘手。）

# php - 有人可以告诉我如何明智地处理此代码面向对象。

> ID：12716837
> 
> 赞同：0
> 
> 时间：2012-10-03T21:01:07.493
> 
> 标签：php

虽然我知道 OOP 的基础知识，但我只是不知道如何让这个普通的 php 代码表现得像 OOP。我写的是一个石头剪刀布的游戏。有人想牺牲一些时间来帮助我吗，我真的很想做得更好。我将感激不尽。

```
<?php

    if(isset($_POST['submit']))
    {

        $array = array('water', 'wood' 'fire');
        $enemy_guess = array_rand(1,3);
        $player_guess = $_POST['picked_skill'];

            switch ($player_guess){

            case 'water':

                if($enemy_guess == 'fire'){
                        echo "you won";
                    }
                }else
                    {
                        echo "you lost";
                    }
            break;

            case 'wood':

                if($enemy_guess == 'water'){
                        echo "you won";
                }
                }else
                    {
                        echo "you lost";
                    }
            break;

            case 'fire':

                if($enemy_guess == 'wood'){
                        echo "you won";
                }
                }else
                    {
                        echo "you lost";
                    }
            break;
        }

    }

    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T21:12:14.997

这是一个例子，考虑到你没有考虑平局场景，所以我也没有。如果您有任何问题，请继续提出：）

```
class Game {

   private $player_guess;
   private $enemy_guess;
   private $rules = array( //basically, water beats fire, fire beats wood and wood beats water, anything else is a lose scenario.
           array("water" => "fire"),
           array("fire" => "wood"),
           array("wood" => "water"));

   private $options = array("water", "wood", "fire");

   public function compGuess() {    
        $this->enemy_guess = array_rand($this->options);
   }
   public function playerGuess($guess) {
        $this->player_guess = $guess;
   }

   public function result() {
        if($this->rules[$this->enemy_guess] == $this->player_guess) {
          echo "You loose";
        } else {
           echo "You WIN!";       
        }

   }
}

//Usage:
$game = new Game();
$game->compGuess();
$game->playerGuess($_POST['picked_skill']);
$game->result(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T21:20:01.840

有很多方法可以做 OOP，这取决于你。这就是我要做的。

```
class Skill
{
    static $skills = array("Wood", "Water", "Fire");
    $skill;

    __construct($skill)
    {
        if is_int($skill)
        {
            $this->skill = $skill;
        }
        else
        {
            $this->skill = array_search($skill, self::$skills);
        }
    }

    function Beats($other)
    {
        $beat_other = $other->skill - 1;
        if($beat_other < 0)
        {
            $beat_other = count(self::$skills) - 1;
        }
        if($beat_other == $this->skill)
        {
            return true;
        }
        return false;
    }
}

$Enemy_Skill = new Skill(rand(0,2));
$My_Skill = new Skill($_POST['picked_skill']);

if($My_Skill->Beats($Enemy_Skill))
{
    echo "You Win";
}
elseif($Enemy_Skill->Beats($My_Skill))
{
    echo "You Lose";
}
else
{
    echo "Draw";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T21:14:21.283

一个粗略的策略是将两个玩家的猜测建模为一个类。将输入验证放入内部以确保不会进行无效猜测。

接下来是一个比较函数，看看谁赢了。您可以像这样将一个猜测与另一个猜测进行比较：

```
$result = $guess->compare($otherGuess); 
```

我会让你在这一点上试试这个...... :)

# ruby-on-rails-3 - 如何使用 select_tag 更新多对多关系

> ID：12716841
> 
> 赞同：1
> 
> 时间：2012-10-03T21:01:22.697
> 
> 标签：ruby-on-rails-3, many-to-many, html-select, multi-select

假设我有一个定义如下的多对多关系：

在我的用户模型中：

```
class User < ActiveRecord::Base
 attr_accessible :userName (...) 
 has_and_belongs_to_many :groups
end 
```

在我的小组模型中：

```
class Group < ActiveRecord::Base
  attr_accessible :groupName (...)
  has_and_belongs_to_many :users
end 
```

我在更新和创建中添加到我的用户控制器：

```
@user.group_ids = Group.find(params[:group_ids]) if params[:group_ids] 
```

用户表单包含一个多选列表，用于为每个用户选择组（以及其他实际工作的标准）：

```
<%= select_tag("group_ids[]", options_for_select(Group.find(:all).collect { |gro| [gro.groupName, gro.id] }, @user.groups.collect { |gro| gro.id}), {:multiple=>true, :size=>15}) %> 
```

当我创建或更新用户时，一切看起来都正常，但无论我在选择列表中做出什么选择，它都会向用户添加错误的组（总是 id=1 的组）。我尝试使用`has_many_through`并迁移了数据库，但也遇到了问题。

你知道如何完成任务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T04:45:26.817

您可以使用 f.select 表单助手代替 select 标记，详见：[Rails 3: Multiple Select with has_many through associations](https://stackoverflow.com/questions/8826407/rails-3-multiple-select-with-has-many-through-associations)

此外，还有可以完美工作的双面多选，如：[与 Rails 3 一起使用的双面多选](https://stackoverflow.com/questions/13202929/two-sided-multi-select-that-works-with-rails-3)

我推荐来自[http://loudev.com/](http://loudev.com/)的那个，你只需要使用：

```
<%= f.select(:country, "country_id", Country.all.collect {|c| [ c.name, c.id ] }, {:include_blank => false}, {:class => "multiselect", :multiple => "multiple"}) %> 
```

并将以下 Javascript 添加到您的视图中：

```
<script>
$(document).ready(function (){
     $('.multiselect').multiSelect(); 
});
</script> 
```

# html - 在 IE 9 中加载嵌入式 mp3 时文本字段失去焦点？

> ID：12716842
> 
> 赞同：3
> 
> 时间：2012-10-03T21:01:24.040
> 
> 标签：html, internet-explorer, audio, mp3, embed

我的网站上的每个页面都包含一个自我刷新的隐藏 iframe。每次刷新时，它都会检查数据库中是否有任何新警报（该网站使用经典 ASP 编码）。如果 iframe 加载并找到新警报，它将有一个 embed 标记来播放 mp3 通知声音。

我的问题是，当 iframe 加载 embed 标记时，如果用户当时正在输入，光标将失去对任何文本字段的关注。

这在 Safari、FireFox 或 Chrome 中似乎不是问题……只有 IE，我正在运行 IE 9。这是我第一次敢在这个网站上添加音频……如果我至少可以使用所有提到的浏览器的最新版本，我会很高兴。

这是我的嵌入标签：

```
<embed hidden="true" autoplay="true" src="/AllInclude/Sounds/Notification_1.mp3" height="0px" style="overflow:hidden"></embed> 
```

这是我的代码，其中包含 iframe：

```
<iframe src="/AllInclude/AlertChecker.asp" style="overflow:hidden;height:0px;position:absolute;top:-1000px" frameborder="no"></iframe> 
```

这是我的 iframe 用来刷新自身的内容：

```
<script type="text/javascript"> 
setTimeout ('ReloadPage()', 15000 ); 
function ReloadPage() { 
window.location = window.location; 
}
</script> 
```

谢谢！

**更新：**

我能够获得 html5 音频标签的工作版本来代替嵌入标签......**但是**，由于音频标签是 html5，我需要在每个页面中添加“DOCTYPE html”标签才能工作IE。这个标签对我的旧 ASP 网站造成了巨大的兼容性问题......所以不幸的是，html5 不是一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T02:11:05.417

你可以使用：

iframe 而不是音频或嵌入标签

```
<iframe id="iframe" src="blank.html" disable="disabled" style="position:absolute;top:-10px;></iframe>
<!--You will need to save a blank html file as blank.html"/-->
<script type="text/javascript'>
/* 
add the condition for audio to load 
*/
document.getElementById("iframe").src="AllInclude/Sounds/Notification_1.mp3"
</script> 
```

不过，我建议将它与上面列出的其他选项结合起来......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:07:45.407

好吧，好吧，在没有找到解决这个问题的好方法后，我决定给 Adob​​e Flash 一个机会，它似乎是目前最好的选择。它不是很漂亮，也不是我想让它工作的方式，但它可以工作（并且大多数人都安装了 Flash）。

无论如何，在这里我找到了一个可以自动启动的免费 Flash 音频播放器：

[http://wpaudioplayer.com/standalone/](http://wpaudioplayer.com/standalone/)

这是我的代码的样子（它只为 IE 实现了 flash 播放器，因为 embed 标记在其他浏览器上工作得很好）：

```
<%
BrowserType = lcase(Request.ServerVariables("HTTP_USER_AGENT"))
if onload <> "" AND InStr(BrowserType,"msie") > 0 then
%>
    <script type="text/javascript" src="/AllInclude/JS/audio-player.js"></script>  
    <script type="text/javascript">AudioPlayer.setup("/AllInclude/Flash/player.swf", {width: 290, autostart: "yes"});</script>
    <p id="audioplayer_1">Alternative content</p>
    <script type="text/javascript">AudioPlayer.embed("audioplayer_1", {soundFile: "/AllInclude/Sounds/Notification_1.mp3"});</script>
<% elseif onload <> "" then %>
    <embed hidden="true" autoplay="true" src="/AllInclude/Sounds/Notification_1.mp3" height="0px" style="overflow:hidden;"></embed>
<% end if %> 
```

# xml - 使用不同属性选择元素时，LINQ to XML Axis 属性返回属性

> ID：12716844
> 
> 赞同：1
> 
> 时间：2012-10-03T21:01:42.247
> 
> 标签：xml, vb.net, linq

代码块四（如下）给了我一个错误，我在修复方面不知所措......

这是我正在使用的 XML 模式：

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>

<!DOCTYPE ctqcfg SYSTEM "cache.dtd">

<cache version="1.0">
    <configuration name="Test">
        <cacheControl>
            <cache name="Customer" mode="off"/>
            <cache name="Vendor" mode="off"/>
            <cache name="Agency" mode="off"/>
            <cache name="Partner" mode="off"/>
        </cacheControl>
    </configuration>

    <configuration name="Production">
        <cacheControl>
            <cache name="Customer" mode="preload"/>
            <cache name="Vendor" mode="dynamic"/>
            <cache name="Agency" mode="dynamic"/>
            <cache name="Partner" mode="dynamic"/>
        </cacheControl>
    </configuration>
</cache> 
```

XML 文件已加载

```
Private XElement As XElement = Nothing

Public Sub Load()
    XElement = XElement.Load(ConfigurationResource)
End Sub 
```

当用户选择要编辑的配置时，将保留对所选配置元素的根的引用

```
Private ConfigurationRoot As System.Collections.Generic.IEnumerable(Of System.Xml.Linq.XElement)

Private ConfigurationName_ As String

Public Property ConfigurationName() As String
    Get
        Return ConfigurationName_
    End Get
    Set(ByVal Value As String)
        ConfigurationName_ = Value
        ConfigurationRoot = From Configuration In XElement.<configuration> Where Configuration.@name = Value
    End Set
End Property 
```

尝试检索与缓存名称对应的缓存模式（在本例中为客户）

```
Public Property CustomerCache() As String
    Get
        Try
            Return From Cache In ConfigurationRoot.<cacheControl>.<cache> Where Cache.@name = "Customer" Select Cache.@mode
        Catch Exception As Exception
            Return Nothing
        End Try
    End Get
    Set(ByVal Value As String)
        'ToDo
    End Set
End Property 
```

我收到以下错误

```
System.InvalidCastException was caught
Message=Unable to cast object of type 'WhereSelectEnumerableIterator`2[System.Xml.Linq.XElement,System.String]' to type 'System.String'. 
```

这是我使用 LINQ 的第一天，我似乎对如何访问该属性有一个基本的误解 - 查询似乎正在返回一个集合，我知道只能找到一个可能的值......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T21:30:49.447

您需要`.First()`或`.Single()`：

```
Return (From Cache In ConfigurationRoot.<cacheControl>.<cache> Where Cache.@name = "Customer" Select Cache.@mode).First() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T20:37:58.423

前三个代码块都实现了相同的结果，但访问属性内容的方法略有不同：

# 1.“加密”属性的第一个（也是唯一一个）实例的直接返回：

```
Return "true" = (From DBConnections In Configurations.<dbConnection> Where "Customization" = DBConnections.@name Select DBConnections.<password>.@encrypted).Single 
```

# 2\. 查询 XElement 集合，然后从第一个 XElement 方法中提取“加密”属性：

```
Dim Element As IEnumerable(Of XElement) = (From DBConnections In Configurations.<dbConnection> Where "Customization" = DBConnections.@name Select DBConnections.<password>).Single
Return "true" = Element(0).@encrypted 
```

前面的示例稍微误导了我们，因为 .Single 引用明确指出将找到一个且只有一个 - 但实际上我们必须处理一个集合（只有一个项目）的结果。与不需要显式处理集合来检索属性值的方法 1 相比，它更加令人困惑。

# 3a。查询集合中的第一个 XElement，然后提取“加密”属性方法：

```
Dim Element As XElement = ((From DBConnections In Configurations.<dbConnection> Where "Customization" = DBConnections.@name Select DBConnections.<password>).Single)(0)
Return "true" = Element.@encrypted 
```

最后一个示例试图通过引用集合中的第一个项目并将其存储在适当的类型中来处理必须处理（一个项目的）集合以尽快检索集合中的项目的误导性部分这样我们就可以不再担心集合，而是处理我们真正感兴趣的对象（在本例中是 XElement 对象）。

# 3b。更改第一个 XElement 对象中的“加密”属性

```
Dim Element As XElement = ((From DBConnections In Configurations.<dbConnection> Where "Customization" = DBConnections.@name Select DBConnections.<password>).Single)(0)
If Value Then
    Element.@encrypted = "true"
Else
    Element.@encrypted = "false"
End If 
```

研究这三种查询方法有助于阐明我关于 LINQ 返回什么的心智模型。此外，我需要了解这里真正发生了什么来修改“加密”属性......

# android - Android 在 Thread 和 Runnable 中更新 TextView

> ID：12716850
> 
> 赞同：35
> 
> 时间：2012-10-03T21:02:22.483
> 
> 标签：android, multithreading, textview, runnable

我想在 Android 中制作一个简单的计时器，每秒更新一个 TextView。它只是像扫雷一样计算秒数。

问题是当我忽略 tvTime.setText(...) 时（使其 //tvTime.setText(...)，在 LogCat 中将每秒打印以下数字。但是当我想将此数字设置为TextView（在另一个线程中创建），程序崩溃。

有谁知道如何轻松解决这个问题？

这是代码（在启动时调用方法）：

```
private void startTimerThread() {
    Thread th = new Thread(new Runnable() {
        private long startTime = System.currentTimeMillis();
        public void run() {
            while (gameState == GameState.Playing) {
                System.out.println((System.currentTimeMillis() - this.startTime) / 1000);
                tvTime.setText("" + ((System.currentTimeMillis() - this.startTime) / 1000));
                try {
                    Thread.sleep(1000);
                }
                catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }
    });
    th.start();
} 
```

编辑：

终于我明白了。这是解决方案，对于那些感兴趣的人。

```
private void startTimerThread() {       
    Thread th = new Thread(new Runnable() {
        private long startTime = System.currentTimeMillis();
        public void run() {
            while (gameState == GameState.Playing) {                
                runOnUiThread(new Runnable() {
                    @Override
                    public void run() {
                        tvTime.setText(""+((System.currentTimeMillis()-startTime)/1000));
                    }
                });
                try {
                    Thread.sleep(1000);
                } 
                catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }
    });
    th.start();
} 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-03T21:21:00.113

UserInterface 只能由 UI 线程更新。您需要一个[Handler](http://developer.android.com/reference/android/os/Handler.html)来发布到 UI 线程：

```
private void startTimerThread() {
    Handler handler = new Handler();
    Runnable runnable = new Runnable() {
        private long startTime = System.currentTimeMillis();
        public void run() {
            while (gameState == GameState.Playing) {  
                try {
                    Thread.sleep(1000);
                }    
                catch (InterruptedException e) {
                    e.printStackTrace();
                }
                handler.post(new Runnable(){
                    public void run() {
                       tvTime.setText("" + ((System.currentTimeMillis() - this.startTime) / 1000));
                }
            });
            }
        }
    };
    new Thread(runnable).start();
} 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-10-03T21:23:50.397

或者，您也可以在您想要更新 UI 元素时在您的线程中执行此操作：

```
runOnUiThread(new Runnable() {
    public void run() {
        // Update UI elements
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-29T23:12:20.760

作为一个选项，使用[runOnUiThread()](https://developer.android.com/reference/android/app/Activity.html#runOnUiThread(java.lang.Runnable))来更改主线程中的视图属性。

```
 runOnUiThread(new Runnable() {
        @Override
        public void run() {       
                textView.setText("Stackoverflow is cool!");
        }
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T21:21:13.910

您不能从非 UI 线程访问 UI 元素。尝试`setText(...)`用另一个包围调用`Runnable`，然后查看[`View.post(Runnable)`](http://developer.android.com/reference/android/view/View.html#post%28java.lang.Runnable%29)方法。

# java - 铸造通用列表

> ID：12716851
> 
> 赞同：0
> 
> 时间：2012-10-03T21:02:25.193
> 
> 标签：java, list, generics, instantiation

```
List<Integer> list0 = new List1<Integer>(); 
```

a）“List”这个词是java中的关键字吗？

b) 创建对象时，类名不应该两边都一样吗？例如：

```
Point x = new Point(1,2) 
```

c) 下面的代码是什么意思？

```
List<Integer> list0 = new List1<Integer>(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T21:06:48.010

a) 不，它不是，它是一个`Interface`

b) 并非总是如此。右侧的类型必须与被分配的类型兼容 - 它必须相同，或者是子类型。在这种情况下`List1`必须实现`List`接口。

c）创建一个新`List1`实例来保存整数（“整数”是错误的 - 它必须是“整数”）；`List1`仅当类实现了`List`接口时，这才是合法的。`<Integer>`是一个[泛型类型](http://docs.oracle.com/javase/tutorial/java/generics/types.html)，它限制了集合（List）可以持有的类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T21:05:06.823

`List1`必须在某处声明为

```
public class List1<T> implements List<T> {
... 
```

`List`是一个接口，因此任何*实现* `List`类的对象都可以分配给类型为 的变量`List`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T21:05:49.277

0) No.`List`是接口的名称。请参阅：[http ://docs.oracle.com/javase/6/docs/api/java/util/List.html](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)

1）不，java有多态，所以你可以通过一个实现的接口或扩展类的名称来调用一个对象

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T21:05:02.597

List 是 java 中的一个接口，您可能希望将其实例化为 ArrayList。

```
List list0 = new ArrayList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T21:10:30.483

*   A. List 是 Java 中的一个接口。
*   B. 左侧不能是右侧对象扩展或实现的任何超类或接口。看看“按合同设计”
*   C. 也许你的意思是

    列表 l = new ArrayList<>();

这是一个只能包含 Integer 类型的列表

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-03T21:12:43.137

[List](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)不是关键字，它是一种类型，特别是 Java 接口。您的示例中的代码无法编译（除非`List1`该类被定义为：）`class List1 implements List { ... }`，但是这样的事情会：

```
List<Integer> ls = new ArrayList<Integer>(); 
```

这将创建一个`ArrayList`可以容纳的对象`Integers`，并将对它的引用分配给`ls`声明为类型的变量`List<Integer>`。 `ls`可能持有对不同类型列表的引用，例如 a `LinkedList`，但您可以保证它`ls`确实指向某种列表（除非它为空），因此您可以使用`List`接口中指定的方法。

变量的类型不需要与赋值右侧的对象的类型相同（尽管经常如此），但对象必须是相同的类型，或者是变量的子类/实现类型。由于所有对象都扩展`Object`，您始终可以执行以下操作：

```
Object obj = new ArrayList<Integer>(); 
```

虽然，像上面一样，您可以访问的唯一方法`obj`是在 中定义的[`Object`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html)，即使被引用的对象实际上是一个`ArrayList`.

# android - 从 Android sqlite 数据库中检索大 blob

> ID：12716859
> 
> 赞同：23
> 
> 时间：2012-10-03T21:03:04.850
> 
> 标签：android, sqlite, blob, protocol-buffers, database-cursor

我在 Android 应用程序的 sqlite 数据库中存储了大块的二进制数据（protobufs），却没有意识到 Android`Cursor`最多只能保存 1MB 的数据。我现在知道我应该将这些二进制 blob 存储在文件中，并且只引用 sqlite 数据库条目中的文件。

我需要升级数据库（该应用程序已经使用了一段时间）才能将这些二进制块移动到文件中。问题是某些用户的数据可能已经超过了 1MB 的限制，我无法从数据库中检索它（访问`Cursor`包含大 blob 的单行的结果会抛出`IllegalStateException: Couldn't read row 0, col 0 from CursorWindow. Make sure the Cursor is initialize before accessing data from it`.

如何检索`Cursor`已存储在 sqlite 数据库中的大于 1MB 限制的二进制 blob？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-04T06:47:58.750

您可以分段读取大块。首先找出哪些需要这种治疗：

```
SELECT id, length(blobcolumn) FROM mytable WHERE length(blobcolumn) > 1000000 
```

然后读取块[`substr`](http://www.sqlite.org/lang_corefunc.html#substr)：

```
SELECT substr(blobcolumn,       1, 1000000) FROM mytable WHERE id = 123
SELECT substr(blobcolumn, 1000001, 1000000) FROM mytable WHERE id = 123
... 
```

* * *

您还可以编译自己的 SQLite 副本并使用 NDK 访问[BLOB 流 I/O](http://www.sqlite.org/c3ref/blob_open.html)函数或 C API 的普通查询函数，但在这种情况下这太复杂了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-17T08:46:53.177

CL。只有blob<5MB才能回答。如果您尝试将它与大于 5 兆字节的 blob 一起使用，您仍然会遇到异常。要获取大型 blob，您需要使用名为[sqlite4java](https://bitbucket.org/almworks/sqlite4java)的库，该库使用对数据库的本机调用而不使用游标。以下是使用此库获取大 blob 的示例：

```
SQLiteConnection sqLiteConnection=null;
SQLiteStatement sqLiteStatement=null;
try
{
    File databaseFile = context.getDatabasePath("database.db");
    sqLiteConnection=new SQLiteConnection(databaseFile);
    sqLiteConnection.open();
    sqLiteStatement=sqLiteConnection.prepare("SELECT blob FROM table WHERE id=?");
    sqLiteStatement.bind(1, id);
    sqLiteStatement.step();
    byte[] blob=sqLiteStatement.columnBlob(0);
}
finally
{
    if(sqLiteStatement!=null)
        sqLiteStatement.dispose();
    if(sqLiteConnection!=null)
        sqLiteConnection.dispose();
} 
```

# machine-learning - 用于将文档集合转换为 LibSVM 格式的实用程序

> ID：12716862
> 
> 赞同：1
> 
> 时间：2012-10-03T21:03:23.860
> 
> 标签：machine-learning, libsvm

我有两个不同的文件夹，一个用于正类，另一个用于负类。每个文件夹都包含一组文档。是否有任何实用程序可以将此训练数据集转换为 LibSVM 格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:13:21.010

您可以使用 scikit-learn 编写一个 python 脚本来执行此操作。您可以使用以下实用程序：

*   [load_files](http://scikit-learn.org/dev/modules/generated/sklearn.datasets.load_files.html)加载文本文件，

*   [TfIdfVectorizer](http://scikit-learn.org/dev/modules/feature_extraction.html#text-feature-extraction)提取文本特征作为`scipy.sparse`内存矩阵，

*   [dump_svmlight](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/datasets/svmlight_format.py#L257)使用 svmlight 格式将生成的稀疏矩阵保存在磁盘上。

# css - CSS 媒体查询执行

> ID：12716871
> 
> 赞同：0
> 
> 时间：2012-10-03T21:04:11.660
> 
> 标签：css, media-queries

我遇到了 CSS 媒体查询的问题，尽管在级联中高于媒体查询，但在媒体查询之后应用了一般样式。

## 例子：

**HTML：**

```
<div id="myblock1">
    <div>Block 1</div>
    <div id="myblock2">Block 2</div>
    <div>Block 3</div>
</div>​ 
```

**CSS：**

```
#myblock1 div {
    display:block;
    background-color:#F00;
}

@media (min-width:600px) {
    #myblock2 {
        display:none;
    }
}​ 
```

**现场演示：[jsFiddle](http://jsfiddle.net/7aWpQ/1/)**

理论上，所有 3 个块都应该在 600px 宽度或更小的窗口中可见，并且当更大时中间块应该消失，但事实并非如此。关于为什么在一般样式之前应用 ID/媒体查询的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T21:09:00.410

那是因为`#myblock1 div`比`#myblock2`（1 ID + 1 元素 vs 1 ID）更具体。

您要么需要更具体，要么添加`!important`您尝试覆盖的规则。

*   更加详细一些：`#myblock1 #myblock2 { display: none; }`
*   使用`!important`：`#myblock2 { display: none !important; }`

* * *

在我看来，最好的解决方案是通过给它一个类名而不是一个 ID 来使外部容器**不那么具体**：

```
<div class="myblock1">
    <div>Block 1</div>
    <div id="myblock2">Block 2</div>
    <div>Block 3</div>
</div>​ 
```

然后，以下将正常工作：

```
.myblock1 div {
    display:block;
    background-color:#F00;
}

@media (min-width:600px) {
    #myblock2 {
        display:none;
    }
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T21:06:49.913

添加`!important`到`display:none;`比它的工作。

```
#myblock1 div {
display:block;
background-color:#F00;
}

@media (min-width:600px) {
    #myblock2 {
        display:none!important;
    }
}​ 
```

**注意：**因为媒体查询不如您的主 css 具体。IE。`#myblock1 #myblock2 { display:none; }`也应该工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T21:10:08.900

您的选择器的特异性不够高，因此它不会覆盖您之前的规则。试试这个：

```
@media (min-width:600px) {
    #myblock1 #myblock2 {
        display: none;
    }
}​ 
```

**演示：http: [//jsfiddle.net/7aWpQ/2/](http://jsfiddle.net/7aWpQ/2/)**

# r - 快速计算邻近矩阵中的平均邻近度

> ID：12716872
> 
> 赞同：0
> 
> 时间：2012-10-03T21:04:12.823
> 
> 标签：r, matrix, similarity, proximity

我有一个所有案例之间的相似矩阵，并且在一个单独的数据框中，这些案例的类别。我想计算来自同一类的案例之间的平均相似度，这是来自 j 类的示例 n 的等式：

![案例之间的平均接近度](../Images/3caa73de0f908a4e0f54cf0ab2732ca1.png)

我们必须计算 n 和与 n 来自同一类的所有案例 k 之间的所有平方接近的总和。链接： http: [//www.stat.berkeley.edu/~breiman/RandomForests/cc_home.htm#outliers](http://www.stat.berkeley.edu/~breiman/RandomForests/cc_home.htm#outliers)

我用 2 个 for 循环实现了它，但它真的很慢。有没有更快的方法在 R 中做这样的事情？

谢谢。

//数据（输入）

带类的数据框：

```
structure(list(class = structure(c(1L, 2L, 2L, 1L, 3L, 3L, 1L, 
                            1L, 2L, 3L), .Label = c("1", "2", "3", "5", "6", "7"), class = "factor")), .Names = "class", row.names = c(NA, 
            -10L), class = "data.frame") 
```

接近矩阵（m行m列对应上面数据框m行中的类）：

```
structure(c(1, 0.60996875, 0.51775, 0.70571875, 0.581375, 0.42578125, 
0.6595, 0.7134375, 0.645375, 0.468875, 0.60996875, 1, 0.77021875, 
0.55171875, 0.540375, 0.53084375, 0.4943125, 0.462625, 0.7910625, 
0.56321875, 0.51775, 0.77021875, 1, 0.451375, 0.60353125, 0.62353125, 
0.5203125, 0.43934375, 0.6909375, 0.57159375, 0.70571875, 0.55171875, 
0.451375, 1, 0.69196875, 0.59390625, 0.660375, 0.76834375, 0.606875, 
0.65834375, 0.581375, 0.540375, 0.60353125, 0.69196875, 1, 0.7194375, 
0.684, 0.68090625, 0.50553125, 0.60234375, 0.42578125, 0.53084375, 
0.62353125, 0.59390625, 0.7194375, 1, 0.53665625, 0.553125, 0.513, 
0.801625, 0.6595, 0.4943125, 0.5203125, 0.660375, 0.684, 0.53665625, 
1, 0.8456875, 0.52878125, 0.65303125, 0.7134375, 0.462625, 0.43934375, 
0.76834375, 0.68090625, 0.553125, 0.8456875, 1, 0.503, 0.6215, 
0.645375, 0.7910625, 0.6909375, 0.606875, 0.50553125, 0.513, 
0.52878125, 0.503, 1, 0.60653125, 0.468875, 0.56321875, 0.57159375, 
0.65834375, 0.60234375, 0.801625, 0.65303125, 0.6215, 0.60653125, 
1), .Dim = c(10L, 10L)) 
```

正确结果：

```
c(2.44197227050781, 2.21901680175781, 2.07063155175781, 2.52448621289062, 
1.88040830957031, 2.16019295703125, 2.58622273828125, 2.81453253222656, 
2.1031745078125, 2.00542063378906) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T21:59:17.037

应该是可以的。您的符号不清楚我们是否会在行或列中找到类似类的成员，所以这个答案假设在列中，但如果它们在行中，明显的修改也会起作用。

```
colSums(mat^2))  # in R this is element-wise application of ^2 rather than matrix multiplication. 
```

由于这两个操作都是矢量化的，因此预计它会比 for 循环快得多。

通过修改并假设矩阵名为“mat”，类数据框名为“cldf”：

```
sapply( 1:nrow(mat) , 
           function(r) sum(mat[r, cldf[['class']][r] ==  cldf[['class']] ]^2)  )
[1] 2.441972 2.219017 2.070632 2.524486 1.880408 2.160193 2.586223 2.814533 2.103175 2.005421 
```

# actionscript-3 - Flex：spark 上的 preventDefault：ListBase 不工作

> ID：12716874
> 
> 赞同：1
> 
> 时间：2012-10-03T21:04:13.523
> 
> 标签：actionscript-3, apache-flex, preventdefault

我试图实现的建议用户体验是这样的：

1.  用户单击菜单项（通过 listBase 子类：例如 ButtonBar 或 TabBar）
2.  防止初始选择
3.  验证用户是否需要解决问题（例如表单上未保存的数据等）
4.  如果有效，则进行选择并将 listBase 设置为该 selectedIndex，否则向用户显示警告并完全取消选择过程

这不像您预期​​的那样工作。利用 IndexChangeEvent.CHANGING 类型和 preventDefault 可以杀死选择，但是在第 4 步，当我以编程方式设置 listBase 的 selectedIndex 时，它会尝试重新调度 CHANGING 事件（尽管 API 文档声称这样做）。

如果您想亲自尝试，这里是一个示例应用程序 src 代码。我期待您的评论和解决方案。

谢谢。Ĵ

[http://snipt.org/vUji3#expand](http://snipt.org/vUji3#expand)

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application minWidth="955" minHeight="600"
           xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:mx="library://ns.adobe.com/flex/mx"
           xmlns:s="library://ns.adobe.com/flex/spark">
<fx:Script>
    <![CDATA[
        import flash.utils.setTimeout;

        import mx.core.mx_internal;

        import spark.events.IndexChangeEvent;

        use namespace mx_internal;

        [Bindable]
        private var doPreventDefault:Boolean;

        [Bindable]
        private var delayMS:uint = 500;

        private function buttonbar_changingHandler( event:IndexChangeEvent ):void
        {
            // TODO Auto-generated method stub
            if ( doPreventDefault )
            {
                event.preventDefault();

                setTimeout( delayedLogic, delayMS, event.newIndex );
            }
        }

        private function delayedLogic( index:int ):void
        {
            //disabling this results in an endless loop of trying to set the selected index
            //              doPreventDefault = false;

            //this should NOT be hitting the changing handler since we're supposed to be dispatching a value commit event instead.
            bb.setSelectedIndex( index, false );
        }
    ]]>
</fx:Script>

<fx:Declarations>

    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>

<s:layout>
    <s:VerticalLayout horizontalAlign="center"/>
</s:layout>

<s:ButtonBar id="bb"
             changing="buttonbar_changingHandler(event)">
    <s:dataProvider>
        <s:ArrayList>
            <fx:String>btn 0</fx:String>
            <fx:String>btn 1</fx:String>
            <fx:String>btn 2</fx:String>
        </s:ArrayList>
    </s:dataProvider>
</s:ButtonBar>

<s:CheckBox label="preventDefault?"
            selected="@{ doPreventDefault }"/>

<s:NumericStepper maximum="5000" minimum="500"
                  stepSize="500" value="@{ delayMS }"/>
</s:Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:40:11.750

查看 SDK，该`IndexChangeEvent.CHANGING`事件实际上是可以预防的——尽管[这里](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/ListBase.html#event:changing)的文档说可取消是错误的，所以我对此不好（尽管 ASDoc 有点侧身），但是事情从这里开始变得有点有趣。

`commitSelection(dispatchEvents:Boolean = true)`在 ListBase @1296 中，这只会从方法中分派。In`ButtonBarBase:dataProvider_changeHandler()`是唯一专门调用不调度事件的地方，但在 中，当有提议的SelectionIndex 时`ListBase`，它会在@939 中调用。`commitProperties`

因此，从上面的代码中，如果您尝试设置选择 - 这将调用 commitSelection，我认为这会导致调用堆栈问题。Timer 延迟只会加剧问题，因为在 500 毫秒时，UI 将至少经历一次失效周期，这意味着 commitSelection 将再次执行，因为最终源自@729的`invalidateProperties`标志被设置`proprosedSelectionIndex``setSelectedIndex`

那么如何解决这个问题。
如果验证失败，我只会考虑进行阻止，否则允许它正常进行。如果确实失败，请调用 prevent、set an`errorString`或等效项，但不要尝试更改选择。

[编辑] 阅读 RiaStar 的评论，我同意相同的“解决方案”。

# android - Android App 2 不同的操作

> ID：12716875
> 
> 赞同：0
> 
> 时间：2012-10-03T21:04:17.200
> 
> 标签：android

我想知道启动应用程序时是否可以进行 2 种不同的操作。
就像当您转到所有程序并选择您的应用程序时，您打开该应用程序，如果您从快速选择中打开该应用程序（我不确定它是否被称为这个，而是这样的屏幕：
![在此处输入图像描述](../Images/62a95b31d86e43ca01aa445615d6be08.png)
然后它运行一些代码并向我显示一个吐司。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T21:41:52.007

是的。

您在 manifest.xml 中向 Android 注册“意图过滤器”。“主要”意图过滤器是启动器使用的，也是启动器唯一使用的，用于启动您的应用程序。因此，如果您通过启动器启动应用程序，它将始终通过与“主要”意图关联的 Activity 启动。

您还可以注册其他意图过滤器，例如发送电子邮件。当用户使用第 3 方应用程序并选择“发送电子邮件”时，如果 Android 从应用程序中注册了一个显示“我可以做到”的意图，它会通过该意图启动。如果多个应用注册了“发送电子邮件”的意图，Android 会显示您在问题中显示的选择器。如果多个应用程序注册了“发送电子邮件”的意图，并且用户已将应用程序设置为该意图的默认应用程序（因此“默认使用”复选框），Android 将通过该意图启动该应用程序。

首先阅读此处的意图过滤器：

[http://developer.android.com/guide/topics/manifest/manifest-intro.html](http://developer.android.com/guide/topics/manifest/manifest-intro.html)

# javascript - 删除内容可编辑 div 中的元素时如何防止插入符号错位

> ID：12716880
> 
> 赞同：0
> 
> 时间：2012-10-03T21:04:39.397
> 
> 标签：javascript, jquery, firefox

当用户在评论框中输入内容时，我的应用程序包含一个预先输入功能。以与 Facebook 和 google+ 类似的方式，它将执行用户查找并即时建议他们作为标签。

当用户选择其中一个提供的标签时，它会作为一个元素输入到输入区域。

我决定为此使用可竞争的 div，但遇到了一些问题。

事实证明，当它们设置为 contenteditable false 时，firefox 不会删除插入的元素，而其他所有主要浏览器都会这样做。

为了解决这个问题，我将插入的“用户”标签设置为 contenteditble=true 并编写了一个快速的 jquery 解决方法来解决这个问题。

除了一个主要问题外，它还可以完美运行。如果该区域中有多个标签，并且其中第一个标签没有任何文本，那么当用户删除最后一个标签时（假设使用退格键从右到左删除），插入符号在最终删除后的位置不正确。

再次键入似乎然后将位置恢复正常。

**此问题仅在 Firefox 中出现**

这是一个显示问题的 jsFiddle：

[http://jsfiddle.net/gordyr/PESky/](http://jsfiddle.net/gordyr/PESky/)

将光标放在最后一个标签的末尾，然后按住退格键直到所有元素都被删除。您将看到光标/插入符号向上移动并移出位置。

这很可能实际上是 Firefox 本身的一个错误，但是我正在寻找某种解决方法，因为没有使用 javascript 自动删除元素，根本不会被删除。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T21:18:23.230

FF 似乎留下了一些污垢，但您可以通过添加以下内容来清理它：

```
if (!$.trim(el.text())) {
    el.empty();
} 
```

这将检查 contenteditable 的 innerText 是否仅包含空格或换行符/换行符。如果是这样，只需清空它。似乎在我的测试中工作：http: [//jsfiddle.net/cBZ7k/](http://jsfiddle.net/cBZ7k/)

**旁注**：您可能应该使用`keydown`而不是`keypress`webkit 支持。此外，`e.which`获取 keyCode 就足够了，jQuery 会为您规范化此事件属性。

# android - Android ADB 测试 SQLite 架构更新

> ID：12716885
> 
> 赞同：1
> 
> 时间：2012-10-03T21:04:49.203
> 
> 标签：android, adb

[更新：解决方案 = 修复了 onUpgrade() 代码，该代码允许使用调试器成功测试数据库架构更改，而不是打包多个 apk]

我正在尝试测试 2 个 apk 以确保在我的应用更新部署到市场时会发生数据库更新。

Test1.apk：包含 sqlite schema_version = 1 Test2.apk：包含 sqlite schema_version = 2

两个 apk 都使用相同的密钥进行数字签名，使用 adb 我可以安装 Test1.apk。当我尝试安装 Test2.apk 时，我收到：

失败 [INSTALL_FAILED_ALREADY_EXISTS]

如何测试我的新架构更改？如果答案来自调试器，那么当调用 onUpgrade() 时，我的数据库始终处于锁定状态。

```
//////////////// This Code Fixed The onUpgrade() Issue /////////////////////

@Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) { 
            //TODO: Write DB Update logic.

            SQLiteDatabase upgradeDB = null;

            if (newVersion > oldVersion){           
                Log.e(TAG, "NEWER VERSION DETECTED, DATABASE UPGRADE REQUIRED!");               

                InputStream inputStream = myContext.getResources().openRawResource(R.raw.dbscript_v2_0_0_0); 
                BufferedReader br2 = new BufferedReader(new InputStreamReader(inputStream), 1016688); //1016688 max 
                String buffer;
                try {

                    db.beginTransaction();

                    //openDataBase();
                    while ((buffer = br2.readLine()) != null) 
                    { 
                            String[] execSql = buffer.split("\n");  
                            execMultipleSQL(db, execSql);

                    } 
                    db.setTransactionSuccessful();      

                    Log.d(TAG, "onCreated sql: CREATED TABLES and INSERTED RECORDS");
                } catch (SQLException e) {
                    Log.e("Error creating tables and debug data", e.toString());
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } finally {
                    db.endTransaction();
                    //db.close();
                }

            }
            else
            {
                Log.e(TAG, "NO DATABASE UPGRADE DETECTED"); 
            }
        }

//////////////////////////////////////////////////////////////////////////// 
```

```
 @Override
                public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) { 
                    //TODO: Write DB Update logic.

                    SQLiteDatabase upgradeDB = null;

                    if (newVersion > oldVersion){           
                        Log.e(TAG, "NEWER VERSION DETECTED, DATABASE UPGRADE REQUIRED!");               

                        InputStream inputStream = myContext.getResources().openRawResource(R.raw.dbscript_v2_0_0_0); 
                        BufferedReader br2 = new BufferedReader(new InputStreamReader(inputStream), 1016688); //1016688 max 
                        String buffer;
                        try {

                            String myPath = DATABASE_PATH + DATABASE_NAME;
                            myDataBase = SQLiteDatabase.openOrCreateDatabase(DATABASE_PATH + DATABASE_NAME, null);
                            myDataBase.beginTransaction();

                            //openDataBase();
                            while ((buffer = br2.readLine()) != null) 
                            { 
                                    String[] execSql = buffer.split("\n");  
                                    execMultipleSQL(myDataBase, execSql);

                            } 
                            myDataBase.setTransactionSuccessful();      
                                //close();                  
                                Log.d(TAG, "onCreated sql: CREATED TABLES and INSERTED RECORDS");
                        } catch (SQLException e) {
                            Log.e("Error creating tables and debug data", e.toString());
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        } finally {
                            myDataBase.endTransaction();
                            myDataBase.close();
                        }

                    }
                    else
                    {
                        Log.e(TAG, "NO DATABASE UPGRADE DETECTED"); 
                    }
                }

     public void openDataBase() throws SQLException {

                try
                {   
                    /* When the database is 1st installed on the device, this helper class creates a blank database using getWritableDatabase().
                     * The actual database is then populated using the SQLiteDatabase.openDatabase(PATH, null, Open_ReadWrite) to exec the sql.
                     * 
                     * PROBLEM - SQLiteDatabase.openDatabase() Does not call onUpgrade() so we're 
                     * unable to update the database for future versions
                     * 
                     * SOLUTION - Check to see if the dbExists, if not use SQLiteDatabase.openDatabase() 
                     * because it will create the DB from scripts, we don't care about onUpgrade();
                     * If the db does exist, call getWritableDatabase() to invoke onUpgrade checks for 
                     * future releases where the SCHEMA_VERSION is greater than the current db SCHEMA_VERSION
                     */
                    boolean dbExist = checkDataBase();
                    if(!dbExist){

                        /* Calls: DOES NOT call onUpgrade()
                         * Errors if db exists and there are db changes (New Columns/Tables), so use the below getWritableDatabase() instead                     */
                        String myPath = DATABASE_PATH + DATABASE_NAME;
                        myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);
                    }
                    else
                    {
                        /* Calls: onUpgrade()
                         * Errors if db does not exist, so use the above instead                     */
                        myDataBase = this.getWritableDatabase();                    
                    }               

                }
                catch (Exception e) {
                    Log.e(TAG, "Error SQLiteFactoryAdapter openDataBase " + e.toString());
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T21:12:58.067

你是怎么打开数据库的？

看起来您正在扩展 SQLiteOpenHelper。构造函数有一个参数*version*，它表示模式的版本。你为什么不在你的测试中改变这个参数来测试你的 onUpgrade() 方法

旁注：您收到错误消息的原因是因为您试图再次部署相同的包。您需要在再次部署之前将其卸载。您可以使用命令执行此操作`adb uninstall packagename.apk`。

# iphone - xcode 4.5 默认情况下如何禁用自动布局？

> ID：12716891
> 
> 赞同：10
> 
> 时间：2012-10-03T21:04:58.830
> 
> 标签：iphone, xcode, ios5, ios6, xcode4.5

这里有一个问题：[Xcode 4.5 破坏 XIBs？](https://stackoverflow.com/questions/11137669/xcode-4-5-corrupting-xibs)说明 xcode 4.5 创建无法在 ios5 上运行的 nib 文件的问题和解决方案。

有没有人有一个解决方案来防止自动布局复选框被默认为打开？我担心在开发过程中，我会忘记取消选中那个框。

![在此处输入图像描述](../Images/85580b267299e772cd8c21161ddae46b.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T21:17:52.317

有一种方法，但它有点复杂，我可能会补充一点，不推荐。

您可以打开位于以下位置的模板文件：

`/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/Templates/File Templates/User Interface/`，在每个目录下，都有.xib文件。它们是 XML 文件，使用文本编辑器打开它们。

替换以下行：

```
<bool key="IBDocument.UseAutolayout">YES</bool> 
```

到

```
<bool key="IBDocument.UseAutolayout">NO</bool> 
```

不过我会重复一遍，**不建议这样做**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T11:06:06.520

有一个项目模板文件夹，您也应该在那里修改 xib 文件。

此外，如果您想禁用情节提要中的自动布局，您应该更改此属性：

```
useAutolayout="YES" 
```

在每个故事板文件中设置为 NO。

# c# - 填充数组以避免索引超出数组错误范围的方法

> ID：12716897
> 
> 赞同：7
> 
> 时间：2012-10-03T21:05:10.973
> 
> 标签：c#, arrays, data-structures, indexoutofboundsexception

当我查询它时，我希望列表中至少有 183 个项目，但有时我的提取结果导致项目计数低于 183。我当前的修复应该在计数小于 183 的情况下填充数组。

```
if (extractArray.Count() < 183) {
    int arraysize= extractArray.Count();
    var tempArr = new String[183 - arraysize];
    List<string> itemsList = extractArray.ToList<string>();
    itemsList.AddRange(tempArr);
    var values = itemsList.ToArray();
    //-- Process the new array that is now at least 183 in length
} 
```

但似乎我的解决方案不是最好的。我将不胜感激任何其他可以帮助确保我在提取时获得至少 183 个项目的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T23:08:20.580

我可能会遵循其他人的建议，并使用一个列表。使用“容量”构造函数来增加性能：

```
var list = new List<string>(183); 
```

然后，每当您获得一个新数组时，请执行此操作（将“”替换为您用于填充数组的任何值）：

```
list.Clear();
list.AddRange(array);
// logically, you can do this without the if, but it saves an object allocation when the array is full
if (array.Length < 183)
    list.AddRange(Enumerable.Repeat(" ", 183 - array.Length)); 
```

这样，列表总是重用相同的内部数组，减少分配和 GC 压力。

或者，您可以使用扩展方法：

```
public static class ArrayExtensions
{
    public static T ElementOrDefault<T>(this T[] array, int index)
    {
        return ElementOrDefault(array, index, default(T));
    }
    public static T ElementOrDefault<T>(this T[] array, int index, T defaultValue)
    {
        return index < array.Length ? array[index] : defaultValue;
    }
} 
```

然后这样的代码：

```
items.Zero = array[0];
items.One = array[1];
//... 
```

变成这样：

```
items.Zero = array.ElementOrDefault(0);
items.One = array.ElementOrDefault(1);
//... 
```

最后，这是我开始编写此答案时使用的相当麻烦的想法：您可以将数组包装在保证具有 183 个索引的 IList 实现中（为简洁起见，我省略了大多数接口成员实现）：

```
class ConstantSizeReadOnlyArrayWrapper<T> : IList<T>
{
    private readonly T[] _array;
    private readonly int _constantSize;
    private readonly T _padValue;

    public ConstantSizeReadOnlyArrayWrapper(T[] array, int constantSize, T padValue)
    {
         //parameter validation omitted for brevity
        _array = array;
        _constantSize = constantSize;
        _padValue = padValue;
    }

    private int MissingItemCount
    {
        get { return _constantSize - _array.Length; }
    }

    public IEnumerator<T> GetEnumerator()
    {
        //maybe you don't need to implement this, or maybe just returning _array.GetEnumerator() would suffice.
        return _array.Concat(Enumerable.Repeat(_padValue, MissingItemCount)).GetEnumerator();
    }

    public int Count
    {
        get { return _constantSize; }
    }

    public bool IsReadOnly
    {
        get { return true; }
    }

    public int IndexOf(T item)
    {
        var arrayIndex = Array.IndexOf(_array, item);
        if (arrayIndex < 0 && item.Equals(_padValue))
            return _array.Length;
        return arrayIndex;
    }

    public T this[int index]
    {
        get
        {
            if (index < 0 || index >= _constantSize)
                throw new IndexOutOfRangeException();
            return index < _array.Length ? _array[index] : _padValue;
        }
        set { throw new NotSupportedException(); }
    }
} 
```

确认。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-03T21:21:11.673

Array 基类实现[Resize](http://msdn.microsoft.com/en-us/library/bb348051.aspx#Y0)方法

```
if(extractArray.Length < 183)
    Array.Resize<string>(ref extractArray, 183); 
```

但是，请记住，调整大小会影响性能，因此此方法仅在您出于某种原因需要数组时才有用。如果您可以切换到列表

而且，我假设你这里有一个一维的字符串数组，所以我使用 Length 属性来检查数组中的有效项数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T21:52:37.110

由于您已声明需要确保有 183 个索引，并且如果没有，则需要填充它，因此我建议使用 List 而不是数组。您可以执行以下操作：

```
while (extractList.Count < 183)
{
     extractList.Add(" "); // just add a space
} 
```

如果你绝对必须回到一个数组，你可以使用类似的东西。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-04T17:43:15.400

我不能说我会推荐这个解决方案，但我不会让它阻止我发布它！不管他们是否愿意承认，每个人都喜欢 linq 解决方案！

使用 linq，给定一个包含 X 元素的数组，您可以生成一个包含恰好 Y（在您的情况下为 183 个）元素的数组，如下所示：

```
 var items183exactly = extractArray.Length == 183 ? extractArray :
                        extractArray.Take(183)
                                    .Concat(Enumerable.Repeat(string.Empty, Math.Max(0, 183 - extractArray.Length)))
                                    .ToArray(); 
```

如果元素少于 183 个，则将使用空字符串填充数组。如果元素超过 183 个，则数组将被截断。如果正好有 183 个元素，则按原样使用数组。

我并不是说这是有效的，也不是说它一定是个好主意。但是，它确实使用了 linq（yippee！），而且很有趣。

# layout - 网站操作系统桌面布局

> ID：12716899
> 
> 赞同：1
> 
> 时间：2012-10-03T21:05:24.150
> 
> 标签：layout, web, operating-system

我将在我工作的公司开发一个应用程序，我被要求创建一个作为 OS 桌面的布局，其中包含应用程序、图标、快捷方式和所有内容。到目前为止，我已经尝试过搜索，但一无所获。我真正的问题是我不知道要搜索什么，我没有定义我需要什么。

要理解黄油，它类似于 AirDroid 或 Glide OS（但不，我没有使用任何闪存）。

谢谢 ：）

**编辑**

如果有人对此感到好奇，我发现了这个库： [http ://www.sencha.com/products/extjs/](http://www.sencha.com/products/extjs/)

它完全符合我的需要。:)

# jquery - ASP.NET MVC 3 - Json 结果行为不一致

> ID：12716903
> 
> 赞同：0
> 
> 时间：2012-10-03T21:05:41.743
> 
> 标签：jquery, json, asp.net-mvc-3

我的 Ajax 调用行为不一致。

控制器...

```
public JsonResult checkWwid(string wwid)
    {
        EMPLOYEE employee = db.EMPLOYEES.SingleOrDefault(e => e.ID == wwid.ToUpper());
        if (employee != null)
        {
            return Json(employee, JsonRequestBehavior.AllowGet);
        }

        employee = new EMPLOYEE();
        employee.ID = "Unknown";
        employee.NAME = "Unknown";
        employee.ORGANIZATION_ID = "Unknown";
        employee.WORK_SITE_ID = "Unknown";

        return Json(employee, JsonRequestBehavior.AllowGet);
    } 
```

当用户输入无法识别的员工 ID 时，我会返回一个员工对象，该对象的所有值都是“未知”。这工作正常。但是，当输入的员工 ID 与数据库中的结果匹配时，由于某种原因，“else”条件未达到——尽管员工 Json 对象已成功返回到视图中。

看法...

```
$('#Wwid').change(function () {

    $("#wwid_alert").hide();

    var selectedWwid = $(this).val();

    $.getJSON('@Url.Action("checkWwid")', { wwid: selectedWwid }, function (employee) {
        alert(employee.NAME);

        if (employee.ID == 'Unknown') {
            alert(employee.NAME);
            $("#wwid_alert").show();
            $("#wwid_alert").text("This WWID is not in the database; you will not be able to sucessfully submit this form.");

        } else { // This is not working even though I am getting a JSON result.

            alert(employee.NAME);
            $("#wwid_alert").show();
            $("#wwid_alert").text(employee.NAME);
        }

    });

}); 
```

通过调试，我知道Json结果正在返回给View。我在另一个应用程序（使用完全相同的数据库）中使用了相同的算法，并且效果很好。我不知道如何解决这个问题。任何建议或建议都将受到极大重视。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T05:18:20.070

嗨，您还可以像下面这样获取您的 json 值

```
 $.ajax({
            url: "/City/State",
            dataType: 'json',
            data: { countryId: countryID },
            success: function (data) {
                alert(data);
                $("#stateID").empty();
                $("#stateID").append("<option value='0'>--Select State--</option>");
                $.each(data, function (index, optiondata) {
                    alert(optiondata.StateName);
                    $("#stateID").append("<option value='" + optiondata.ID + "'>" + optiondata.StateName + "</option>");
                });
            },
            error: function () {
                alert('Faild To Retrieve states.');
            }

        }); 
```

试试这个，我想这会对你有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T02:49:28.167

现在我很尴尬；我还没有完全调试。我认为这是因为控制器已将控制权返回给正在返回 Json 结果的视图。但是，在 Firebug 中调试后，我发现我收到了 Http 500 错误，这可能是由于 ASP.NET 的内置 Json 序列化程序对实体框架对象进行序列化的方式。

我没有将 EF 对象作为 Json 结果发送，而是实例化了一个新对象并仅分配了结果所需的属性。

也许我将来帮助其他人解决了问题。:)

此外，[以下帖子帮助...](https://stackoverflow.com/questions/1153385/a-circular-reference-was-detected-while-serializing-an-object-of-type-subsonic)

# javascript - CommonJS - 如何将 jquery 和 jquery-plugin 组合到 $ 命名空间中

> ID：12716904
> 
> 赞同：6
> 
> 时间：2012-10-03T21:05:41.187
> 
> 标签：javascript, node.js, jquery-plugins, commonjs

我正在尝试做的是调整我的 jQuery 插件以在 Node.js 上与 jQuery 一起使用。

据我了解，CommonJS 最基本的形式需要将库包装在闭包中，并且该闭包应作为“导出”参数的参数提供。这样，代码就整齐地包含在自己的命名空间中（通过命名变量），并且不会污染全局命名空间。

jQuery 本身应该属于 '$' 命名空间。

**翼：**

```
var $ = require(jquery); 
```

但我的插件也应该适合“$”命名空间。

**插件代码：**

```
(function( $ ) {
  // plugin code goes here
})(jquery);

exports.jquery = jquery // will this work? 
```

**前任：**

```
var $ = require(jquery);
$ = require(jquery-csv.js); // will this work? 
```

要在浏览器中工作，所有内容都设置为可从“$”命名空间调用，即使我的模块设置为“$”的子命名空间（即“$.csv”）。

是否有一种标准方法可以在单个命名空间上执行多个要求？如果没有，是否有可行的替代方案（例如对插件代码进行浅拷贝）？

*注意：匿名函数包装器遵循[标准 jquery 指南](http://docs.jquery.com/Plugins/Authoring)。*

*注意：此修复将应用于[jquery-csv](http://code.google.com/p/jquery-csv/)插件。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-10T12:26:48.457

*您应该在*插件中使用jQuery ：

```
var $ = require("jquery"); 
```

这也是[UMD（通用模块定义）](https://github.com/umdjs/umd)中的技术，它是 CommonJS 和 AMD 的标准。

另请参阅[带有 UMD 的 jQuery 插件示例](https://github.com/umdjs/umd/blob/master/jqueryPluginCommonjs.js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T21:21:32.250

我能想到的最简单的方法是执行以下操作：

```
var $ = require("jquery");
require("jquery-csv")($); 
```

这也意味着你可以这样做：

```
module.exports = exports = function (jquery) {
    //You modify the jquery object here.
}; 
```

$ 对象的修改应该按照 jQuery 插件的建议进行。我相信你已经对你所说的有所了解。

我相信有人会想出一个更聪明的方法:) 但这现在应该可行。您也可以只返回一个修改后的 jquery 对象，然后将其分配给您最初包含该模块的范围内的 $ 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T23:03:30.557

**事实证明，答案比我想象的要简单......**

```
var $ = jQuery = require('jquery');
require('./jquery.csv.js'); 
```

调用“require”而不将其分配给变量/命名空间与脚本导入的作用相同（即它可以操作存在于全局命名空间中的对象）。

第一行负责正确初始化 jquery。完成后，jquery-csv 可以像在浏览器中一样修改现有的 '$' 命名空间。

第二个赋值 'jQuery' 是必要的，因为这是 jquery-csv 获取对 'jquery' 实例的引用的地方。这可能会缩短为仅分配给“$”，但“jQuery”是插件指南为引用库指定的值。

# javascript - JQuery将事件添加到锚点并获取url

> ID：12716907
> 
> 赞同：0
> 
> 时间：2012-10-03T21:05:46.310
> 
> 标签：javascript, jquery

我试图通过在运行时将代码添加到链接来让 childBrowser 插件在链接上工作。

通常，如果我手动将代码添加到链接中，它会是这样的：

```
<a href="#" window.plugins.childBrowser.showWebPage('http://www.google.com');>click me</a> 
```

现在，因为我需要在运行时完成，所以我把它放在一起：

```
$('a').on('click', function () {

    window.plugins.childBrowser.showWebPage('http://www.google.com');

}); 
```

但问题是所有链接可能有不同的 url，所以我需要以某种方式使用代码，但使用它附带的链接，而不是上面的硬编码 url。

链接最初如下所示。

```
<a href="http://www.somelink.com">click me</a> 
```

我怎么能这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T21:07:06.013

使用这个.href

```
$('a').on('click', function () {

    window.plugins.childBrowser.showWebPage(this.href);
    return false; 

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T21:07:51.847

尝试这个

```
$('a').on('click', function () {

    window.plugins.childBrowser.showWebPage($(this).attr('href'));

}); 
```

# perl - perl，没有“打开”的子进程

> ID：12716912
> 
> 赞同：2
> 
> 时间：2012-10-03T21:05:51.627
> 
> 标签：perl, process, fork, pid, sigchld

嗨我有这个问题，perl脚本吐回“没有找到子进程”......

我的脚本调用了几种不同类型的 fork，所以我尝试实现 perldoc 的 waitpid() 实现方法，以便能够同时处理 fork & exec & system & qw。

```
 $SIG{CHLD} = sub {
    # don't change $! and $? outside handler
    local ($!, $?);
    my $pid = waitpid(-1, WNOHANG) > 0;
    return if $pid == -1;
    return unless defined $children{$pid};
    delete $children{$pid};
};

    my $pid = fork();
    die "cannot fork" unless defined $pid;
    if ($pid == 0) {
        # ...
        exit 0;
    } else {
        $children{$pid}=1;
        # ...
        exec($command);
   } 
```

这部分代码执行没有问题，但是当我尝试关闭文件句柄的 CLOSE 时出现“未找到子处理器”。有人可以向我解释这是怎么发生的，因为我真的想更深入地了解这个问题。我最终是否会收获由 OPEN 调用分叉的子进程，以便关闭不知道如何处理文件句柄？或者我可以 100% 折扣。任何解决方案将不胜感激

```
open(RESULTS, "-|", "find $dir\/ -maxdepth 1 -name RESULTS -print0 | xargs -0 cat ") or die $!;
while(<RESULTS>){
if($_ =~ /match/){
    print $_;
 }
  }
 close RESULTS; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T21:11:24.980

`close`在打开的句柄 * 上调`waitpid`用以获取由 . 创建的子项`open`。但是，您的信号处理程序之前设法收割了孩子`close`，因此`close`找不到孩子，因此`close`返回了错误。

您可以通过将信号处理程序更改为仅获取您使用`fork`（如下）创建的孩子来解决此问题，或者您可以忽略`close`.

```
$SIG{CHLD} = sub {
   local ($!, $?, $^E);
   for my $pid (keys(%children)) {
      if (waitpid($pid, WNOHANG) > 0) {
         delete $children{$pid};
      }
   }
}; 
```

* * *

* — 正确的术语是“文件*句柄*”。它之所以这样命名，是因为它允许您保留文件。它不是*处理程序*，因为它不执行任何操作。

# google-app-engine - 如何使用谷歌帐户从客户端应用程序登录到谷歌应用引擎服务器？

> ID：12716915
> 
> 赞同：1
> 
> 时间：2012-10-03T21:06:10.743
> 
> 标签：google-app-engine, authentication, google-account

**重要提示**：API 已更改 - 请先阅读： [https ://developers.google.com/accounts/docs/AuthForInstalledApps](https://developers.google.com/accounts/docs/AuthForInstalledApps)

> ClientLogin 已于 2012 年 4 月 20 日正式弃用。它将根据我们的弃用政策继续工作，但我们鼓励您尽快迁移到 OAuth 2.0。

* * *

我想构建两个应用程序客户端（一些 python/java 程序）和服务器（Google App Engine 应用程序），并通过从客户端到服务器的 google 帐户进行身份验证以获取一些秘密信息。

让我解释一下场景：

1.  服务器有地址[https://example.appspot.com](https://example.appspot.com)。
2.  [客户希望从https://example.appspot.com/restricted](https://example.appspot.com/restricted)下载受限信息，因此在 app.yaml 中定义了这个 url 和 login: required。
3.  客户使用某些 Google 帐户 example_login 和 example_password 来获取访问权限。

如何正确地从客户端向 Google App Engine 进行身份验证以访问[https://example.appspot.com/restricted](https://example.appspot.com/restricted)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T22:55:22.970

另一种无需登录的简单方法是使用 HMAC。您可以根据时间戳（使每个请求唯一）和一个秘密 MAC KEY 创建一个 MAC 签名。您的请求包含时间戳和 MAC 签名。服务器可以验证 MAC，因为它也有秘密的 MAC KEY。

此 Python 代码适用于双方（客户端和服务器）`：

```
import hmac, base64, hashlib

new_hmac = hmac.new(key=my_secret_MAC_KEY, msg=timestamp_in_request, digestmod=hashlib.sha256)
signature = base64.b64encode(new_hmac.digest()).decode()
if signature_in_request != signature : raise ValueError('access denied') 
```

这适用于单个用户，因为您必须管理单个密钥。当您有很多用户时，客户端登录是一个更好的选择。

# python - 如何在 python 中先获取一个列表然后是一个 dict 的列表理解

> ID：12716918
> 
> 赞同：0
> 
> 时间：2012-10-03T21:06:17.380
> 
> 标签：python

我有以下字符串，我试图将其解析为 k,v 的字典

> 富=“abc=foo.bazz；defg=6cab；随机=随机；令牌=foobar”

我可以用一些非常丑陋的代码来实现这一点

```
foo_dict = {}
bar = foo.split(';') 
for item in bar:
  x = item.split('=')
foo_dict[x[0]] = x[1] 
```

我更希望这是一个简单的 1 行列表理解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T21:08:17.440

```
dict(part.split("=") for part in foo.split(";")) 
```

我认为可行

```
>>> foo = "abc=foo.bazz; defg=6cab; rando=random; token=foobar"
>>> dict(part.split("=") for part in foo.split(";"))
{' token': 'foobar', 'abc': 'foo.bazz', ' defg': '6cab', ' rando': 'random'}
>>> 
```

如果你这样做`part.strip().split("=")`，它可能会摆脱额外的空间......

```
>>> dict(part.strip().split("=") for part in foo.split(";"))
{'token': 'foobar', 'abc': 'foo.bazz', 'defg': '6cab', 'rando': 'random'} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T21:08:24.763

```
In [107]: foo = "abc=foo.bazz; defg=6cab; rando=random; token=foobar"

In [115]:  dict(map(str.strip,x.split('=')) for x in foo.split(';'))
   .....: 
Out[115]: {'abc': 'foo.bazz', 'defg': '6cab', 'rando': 'random', 'token': 'foobar'} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-03T21:20:23.367

[使用urlparse](http://docs.python.org/library/urlparse.html#urlparse.parse_qs)模块怎么样：

```
In [1] import urlparse
In [2] foo = "abc=foo.bazz; defg=6cab; rando=random; token=foobar"
In [3]: urlparse.parse_qs('abc=foo.bazz; defg=6cab; rando=random; token=foobar')
Out[3]: 
     {' defg': ['6cab'],
      ' rando': ['random'],
      ' token': ['foobar'],
      'abc': ['foo.bazz']}

In [4]: dict(urlparse.parse_qsl('abc=foo.bazz; defg=6cab; rando=random; token=foobar'))
Out[4]: {' defg': '6cab', ' rando': 'random', ' token': 'foobar', 'abc': 'foo.bazz'} 
```

不确定您是否想要键中的那些空白值，但显然很容易清理。

# sql - 如何在 sql 上获取 Ltrim(object,number) 的东西？

> ID：12716922
> 
> 赞同：0
> 
> 时间：2012-10-03T21:06:39.090
> 
> 标签：sql, sql-server, concatenation, trim

我有一个有 2 列的表：

```
select product, quantity from datainformation 
```

该表返回：

```
product quantity
1        10
2        30
4        23
191      10
900       1
1234      5
12345     2 
```

1.  两列是int。
2.  表可以有 N 条记录

我需要为每 50 条记录获取 2 个字符串。我的问题是如何获得这些字符串：

```
stringproducts='1    2    4    191  900  1234 12345'
stringquantity='10   30   23   10   1    5    2    ' 
```

现在我需要每 50 条记录使用这些字符串，例如，如果我有 51 条记录，我需要我的第二个“块”来拥有最后一个产品和最后一个数量。

在我可以使用的另一种语言中`ltrim(cad,5)`。我将如何在 SQL 中执行此操作？

我可以为此使用东西吗？还是我需要一个循环并将它们 1 对 1 连接起来？我相信有了东西可能会更容易（可能是循环内的东西，但每条记录的循环会更容易）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T21:37:01.523

您可以使用`FOR XML PATH`和`STUFF()`：

```
select 
  stuff((
        select ' ' + cast(product as char(10))
        from datainformation
        for XML path('')),1,1,'') as products,
 stuff((
        select ' ' + cast(quantity as char(10))
        from datainformation
        for XML path('')),1,1,'') as quantity 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/db1ed/12)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T21:21:57.653

如果您将其转换为 CHAR(5)，它将有尾随空格来组成一个 5 字符块，用于您格式化的、连接的字符串。

```
declare @t table (product int, quantity int);
insert @t select
1        ,10 union all select
2        ,30 union all select
4        ,23 union all select
191      ,10 union all select
900      , 1 union all select
1234     , 5 union all select
12345    , 2;

declare @products varchar(max);
declare @quantity varchar(max);

select @products = coalesce(@products,'')
                 + cast(product as char(5)),
       @quantity = coalesce(@quantity,'')
                 + cast(quantity as char(5))
from @t
order by product

select @products, @quantity 
```

# java - Java 错误提示音

> ID：12716925
> 
> 赞同：1
> 
> 时间：2012-10-03T21:07:00.057
> 
> 标签：java, awt, beep

我正在开发一个我没有为其编写大部分代码的聊天客户端。它工作正常，但是当有人发送消息时，它会在使用 Java 7 时发出哔声（系统错误哔声）。Java 6 及更低版本没有此哔声。我似乎无法找到导致哔哔声的原因有什么方法可以找到它吗？

我不认为它像我一样发出哔哔声

```
public class nobeep extends sun.awt.windows.WToolkit {
    @Override
      public void beep() {
          System.out.println("tried to beep");
          new Exception().printStackTrace();
  }
} 
```

然后打电话

```
 System.setProperty("awt.toolkit", "nobeep"); 
```

在主要方法中。

使用该方法发送哔声不会发出哔声。只有在正常发送时。有没有一种快速的方法来追踪蜂鸣声的原因？

编辑：

在查看错误数据库后 - 已确认。 [http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7194469](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7194469)

我知道它说没有解决方法，但是有一个（java不是c ++）还是等到更新8？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T22:15:10.087

我找到的解决方案是将 awt 转换为 swing。我无法找到一种方法来超越错误报告中的修复内容。它现在在任一版本中都可以正常工作

错误报告 [http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7194469](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7194469)

修复 [http://hg.openjdk.java.net/jdk8/awt/jdk/rev/b8a1ff892b33](http://hg.openjdk.java.net/jdk8/awt/jdk/rev/b8a1ff892b33)

# iphone - 在 CALayer 上调用 renderInContext 时，UIButton 在 iOS6 中无法正确呈现

> ID：12716929
> 
> 赞同：3
> 
> 时间：2012-10-03T21:07:13.520
> 
> 标签：iphone, ios, uibutton, ios6, cgcontext

我遇到的这个问题似乎只发生在 iOS 6 中。我在视图层上调用 renderInContext。这种观点相当简单。它有几个 UIButtons。我从以下代码返回的 UIImage 似乎已损坏。UIButtons 似乎没有正确绘制。

```
 UIGraphicsBeginImageContextWithOptions(self.view.bounds.size, self.view.opaque, 0.0);
    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewSnapShot = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext(); 
```

此代码生成如下所示的位图：http: [//imgur.com/MyMTX](http://imgur.com/MyMTX)

当我在 iPhone 5.1 模拟器中运行应用程序时，这个问题似乎没有发生。我开始怀疑这是否只是 iOS 6 中的一个错误。

有人遇到类似的问题吗？

# google-maps-api-3 - 如何在地图上绘制 50 条路线，并且仍然能够区分所有 50 条路线？

> ID：12716933
> 
> 赞同：3
> 
> 时间：2012-10-03T21:07:39.277
> 
> 标签：google-maps-api-3

我一直在研究如何在谷歌地图上一次绘制大约 50 条路线。在以前的应用程序中，我通过折线颜色一次确定了大约 10 条不同的路线。我在那一点停下来，因为路线开始相互重叠，你无法通过颜色很好地分辨出区别。

我敢肯定，其他人以前必须解决这个问题。我一直在考虑这个问题，但没有任何好的想法。任何建议或意见，将不胜感激。谢谢。

***根据下面的评论更新

我可以绘制的越多，主要缺点就是能够区分不同的绘制路线。这是我将在未来某个时候为客户开展的项目要求的一部分。基本上，希望能够在路线上一目了然地看到这些路线上的交叉点，这种性质的东西，但如果你能分辨出 10 到 40 多个路线，这对它们并没有多大好处地图。

**另外，不是移动应用程序或视障人士。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:10:23.563

首先，您需要了解您的用户。他们最关心的路线是什么。这很重要，因为这允许您对这些路由进行分组。当您处理大量数据时，分组至关重要，因为它允许用户区分需要什么和不需要什么。一些分组方式可能包括收费路线、前 10 条最快路线、风景路线、高速公路、主要城市路线、快餐连锁店路线。我希望你现在得到照片。

是的，您可以使用 50 种不同的颜色或线条。但是当涉及到大量数据时，它对您或用户来说根本不实用或无用。当用户由于数据过载而无法理解地图时，这也会使应用程序变得丑陋和令人沮丧。

有多种有趣的方法可以处理这个问题。从不同的颜色、alpha（不透明度）到不同类型的线条（虚线、波浪线、粗线、细线），应有尽有。您还可以使用不同的效果来组合路线。

现在到了重要的部分。您可以使您的地图变得漂亮且分类良好。但是，使您的应用程序脱颖而出的是您如何允许用户从多个路由中选择一个路由。如果您曾经使用过 Google 地球/方向，并且可以通过单击道路即时更改路线，如果您问我或者如果您想通过选择滚动路线，那么通过滑动也可以做得很好。

另外，如何更改分类材料？调出菜单？显示对话框？等等。你可以在这里做很多事情。

我希望这有帮助

# android - 具有多个视图的android viewswitcher

> ID：12716937
> 
> 赞同：0
> 
> 时间：2012-10-03T21:08:05.810
> 
> 标签：android, viewswitcher

我在 android 开发中有一个特定的问题，因为我是一个相对的菜鸟。

目前我正在尝试设置各种图像的幻灯片，这是我要开始工作的课程，但 eclipse 告诉我一个错误

“此行有多个标记。无法将视图切换器解析为一种类型”

MyAdapter 类扩展适配器实现 ViewSwitcher.ViewFactory

我无法弄清楚这一点，并且想知道问题的含义-您认为错误是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T14:47:36.587

迟到的答案，`ViewSwitcher`只能生2个孩子。

听起来你需要`ImageSwitcher.`

# json - JSON数据返回，循环拉取一列

> ID：12716939
> 
> 赞同：0
> 
> 时间：2012-10-03T21:08:16.917
> 
> 标签：json, google-maps-api-3

```
var query = 'SELECT GRIDCODE, geometry FROM ' +
'1gTfoIdxkj0MkGMJ1zGSaa__BsYSrgMovo1fbuDo'; 
```

Google API 中的这个查询返回了我正在映射的数据。我希望循环抓住它们。我有以下

```
 var rows = data['rows'];
    for (var i in rows) {
        var newCoordinates = [];
        var newCoordinates = constructNewCoordinates(rows[i][1]['geometry']);
        var whichNode="";
        var whichNode = rows[i][0]['GRIDCODE'];
        etc... 
```

该脚本可以很好地分解几何传入数据中的地理编码，但我似乎无法简单地获取每行附带的 GRIDCODE 编号。我是否误解了新坐标中的语法，因为我正在抓取第 i 行中称为几何的第一列。因此，如果我想知道 GRIDCODE，我将在我称为 GRIDCODE 的行中拉出 0 列？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T22:31:23.240

我更新了这个例子：

[http://www.geocodezip.com/v3_GoogleEx_FusionTables_generic_JSON_linkto.html?lat=39.923549&lng=-86.306907&zoom=10&type=m&tableid=1im8RszWUjZZhZdBnO8C0rfWGvT059O2EKk6TvZs&tablequery=SELECT%20%20geometry,%20GRID_CODE%20geometry,%20GRID_](http://www.geocodezip.com/v3_GoogleEx_FusionTables_generic_JSON_linkto.html?lat=39.923549&lng=-86.306907&zoom=10&type=m&tableid=1im8RszWUjZZhZdBnO8C0rfWGvT059O2EKk6TvZs&tablequery=SELECT%20%20geometry,%20GRID_CODE%20FROM)

将“GRIDCODE”放在信息窗口中。如果您阅读代码，您可以看到我如何访问它。请注意，我在查询中更改了 GRIDCODE 和几何的顺序（我的代码假设几何是第一个，接下来的两列，如果它们存在，则放在信息窗口中）

# python - 读取字符串的第 x 行？

> ID：12716941
> 
> 赞同：1
> 
> 时间：2012-10-03T21:08:21.327
> 
> 标签：python

> **可能重复：**
> [在python中获取第n行字符串](https://stackoverflow.com/questions/11491835/get-nth-line-of-string-in-python)

有没有办法从 Python 中的多行字符串中获取指定的行？例如：

```
>>> someString = 'Hello\nthere\npeople\nof\nEarth'
>>> aNewString = someString.line(1)
>>> print aNewString
there 
```

我想做一个简单的“解释器”风格的脚本，循环遍历它输入的文件的每一行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T21:09:37.237

```
>>> someString = 'Hello\nthere\npeople\nof\nEarth'
>>> someList = someString.splitlines()
>>> aNewString = someList[1]
>>> print aNewString
there 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T21:09:59.240

请记住，我们可以[`split`](http://docs.python.org/library/stdtypes.html#str.split)使用字符串来形成[列表](http://docs.python.org/tutorial/datastructures.html)。在这种情况下，您想使用换行符`\n`作为分隔符进行拆分，因此如下所示：

```
someString = 'Hello\nthere\npeople\nof\nEarth'
print someString.split('\n')[lineindex] 
```

还有一个[`splitlines`](http://docs.python.org/library/stdtypes.html#str.splitlines)函数使用通用换行符作为分隔符：

```
someString = 'Hello\nthere\npeople\nof\nEarth'
print someString.splitlines()[lineindex] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T21:10:29.773

在换行符上拆分字符串：

```
>>> someString = 'Hello\nthere\npeople\nof\nEarth'
>>> someString.split('\n')
['Hello', 'there', 'people', 'of', 'Earth']
>>> someString.split('\n')[1]
'there' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T21:09:38.663

```
In [109]: someString = 'Hello\nthere\npeople\nof\nEarth'

In [110]: someString.split("\n")[1]
Out[110]: 'there'

In [111]: lines=someString.split("\n")

In [112]: lines
Out[112]: ['Hello', 'there', 'people', 'of', 'Earth'] 
```

# c# - Mono / Android 保证金价值差异

> ID：12716942
> 
> 赞同：0
> 
> 时间：2012-10-03T21:08:21.810
> 
> 标签：c#, android, mobile, mono, xamarin.android

我正在尝试根据包含它们的 ViewGroup 的尺寸来计算子布局/视图的宽度和高度。

我正在尝试考虑每个孩子的边际价值，但似乎无法完全正确。

我已经在阳光下尝试了所有转换（dip、sp、px、in、mm），但仍然得出相同的结论，即边距值被转换为比任何其他维度值都小得多的像素值（即宽度和高度）。

我需要这个转换因子。我尝试了很多方法来计算它（Context.Resources.DisplayMetrics - Density、DensityDpi、ScaledDensity），但都没有成功。

我不相信这个转换因子可以从运行时可用的任何值中获取或派生，因此想知道是否有人知道它是什么（或者在哪里可以找到或计算它）。

* * *

为了提供一些背景信息，我正在实现一个自定义日历，其中包含一个 5x7 网格的子布局（LinearLists），其中每个子元素周围都有边距。

最外面的view是RelativeLayout，它的宽高分别是W和H，边距宽度是M。所以，你会认为

```
CELL_WIDTH = W/7 - M*7
CELL_HEIGHT = H/5 - M*5 
```

然而，边距宽度因子 M*7 和 M*5 最终太大了，导致整个网格小于父视图（这是一个问题，我需要填充它）。

我在这里和其他地方的帖子中尝试了很多不同的转换技术，但都没有成功。我确信 android 使用一些转换因子在内部存储边距值（我假设它以像素为单位）。这是我所追求的转换因子（当然，除非有人知道更好/正确的方法来执行我在这里尝试的计算）。

以下是我尝试过的链接，我什至将其中一个 Java 解决方案转换为 C#，并且目前正在使用它（虽然它没有为我解决这个特殊问题，但它有助于阐明它，并且是帮助其他地方）：

[如何解析维度字符串并将其转换为维度值](https://stackoverflow.com/questions/8343971/how-to-parse-a-dimension-string-and-convert-it-to-a-dimension-value/12713624#12713624)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:58:12.473

哦，天哪，我是个白痴！

我已经研究了很长时间，以至于我什至没有认为这个等式是有缺陷的。

对于每个单元格大小，我应该只削减 1 个边距宽度/高度，而不是全部，这是当前等式所做的。

所以，正确的方程是：

```
CELL_WIDTH = W/7 - M 
CELL_HEIGHT = H/5 - M 
```

呃，我觉得很傻。

# powershell - 由变量替换的 powershell 命令的一部分

> ID：12716944
> 
> 赞同：2
> 
> 时间：2012-10-03T21:08:39.220
> 
> 标签：powershell

是否可以在 powershell 中执行以下操作？

```
$condition = "-eq 10"
$a=11

if ($a &$condition) {"yes"} else {"no"} 
```

基本上是在语句之​​外创建部分语句，然后动态使用它？

我知道我可以在变量中创建整个语句，然后使用 Invoke-Expression 或 &$cmd 运行它，但是我有一个非常长且复杂的 if/else 语句并试图即时构建它的一部分。

希望这是有道理的:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T21:14:48.223

是的，如果您可以交换订单，例如：

```
C:\PS> $conditionEq10 = {param($a) $a -eq 10}
C:\PS> $a = 11
C:\PS> if (&$conditionEq10 $a) {'yes'} else {'no'}
no
C:\PS> $a = 10
C:\PS> if (&$conditionEq10 $a) {'yes'} else {'no'}
yes 
```

您可以使用带有 PowerShell 的脚本块进行前缀样式表示法`{code}`，但不能使用中缀或后缀。这是因为 PowerShell 希望参数遵循脚本块（不是之前和之间）。

# objective-c - iOS Objective-C：如何从对象描述中获取有用的信息？

> ID：12716946
> 
> 赞同：1
> 
> 时间：2012-10-03T21:08:43.187
> 
> 标签：objective-c, ios, object, properties

我想我的问题可能很幼稚，因为对象描述通常用于 NSLog 中的调试和输出。我也不得不承认我尝试使用 object.description 的方法可能是错误的。但是，我确实发现，描述中的信息正是我所需要的。如果我可以从描述中轻松取出零件。

好的，这是我的代码，我需要的是用户名（不是用户名）：

```
 self.facebookAccountStore = [[ACAccountStore alloc] init];

    ACAccountType* facebookAccountType = [self.facebookAccountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
    //[self.facebookAccountStore requestAccessToAccountsWithType:facebookAccountType withCompletionHandler:^(BOOL granted, NSError* e) {
    [self.facebookAccountStore requestAccessToAccountsWithType:facebookAccountType options:facebookOptions completion:^(BOOL granted, NSError* e) {
        if (granted) {
            NSArray* accounts = [self.facebookAccountStore accountsWithAccountType:facebookAccountType];
            self.facebookAccount = [accounts lastObject];
            NSLog(@"acct description: %@", self.facebookAccount.description);

            NSLog(@"acct type: %@", self.facebookAccount.accountType);
            NSLog(@"acct credential: %@", self.facebookAccount.credential);
            NSLog(@"acct identifier: %@", self.facebookAccount.identifier);
            NSLog(@"acct username: %@", self.facebookAccount.username);
        } else { //.....
        } 
```

帐户说明给出：

```
 acct description: 
     objectID: x-coredata://F8123001-FB33-48D4-B1A7-EXXXX1243XXXX/Account/p10
     enabledDataclasses: {(
         "com.apple.Dataclass.Contacts",
         "com.apple.Dataclass.Calendars"
     )}
     enableAndSyncableDataclasses: {(
     )}
     properties: {
         fullname = "LOOKAT HERE";
         uid = 100004223213342323;
     }
     parentAccount: (null)
     owningBundleID:(null)

     type:com.apple.facebook
     identifier: EF34399A-8577-459B-BE5E-FD12132SEDSFE
     accountDescription: Facebook
     username: pspped.ok@mailserver.com 
```

看看这部分：属性：{ fullname = "LOOKAT HERE"; uid = 100004223213342323；}

这正是我所需要的。如果我使用它，我不必执行 SLRequest 和 SLRequestMethodGET 等来获取用户名（我还没有弄清楚，这是我尝试使用对象描述的另一个动机）。

我的问题是解析描述并获取全名属性是否错误？如果错了，为什么？以下问题是：错误与否，我怎样才能优雅地获取描述的全名属性（例如将描述转换为使用点和点来获取属性的东西，而不是截断字符串并获取全名部分），因为 account.description。 fullname 或 account.fullname 所以虽然 account.username 有效，但它不起作用。

感谢您的时间/投入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T21:44:09.533

解析是错误的`description`。这是错误的，因为描述没有记录格式。它可以从一个对象实例任意更改为下一个实例，也可以从一个操作系统版本任意更改为下一个版本。所以你的代码很可能会出错。依赖未记录的行为，您也违反了您与 Apple 签订的 iOS 开发者计划协议，该协议赋予他们随时拉取您的应用程序的权利。

此外，如果出于某种原因您绝对不顾一切地使用未记录的 API，那么您不妨使用`[self.facebookAccount.description valueForKey:@"fullName"]`; 它对操作系统更改同样健壮，而无需您尝试再次猜测 Core Data 对象描述是如何输出的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:37:14.130

这不是最有效的方法，但对我来说效果很好：

```
ACAccount *acc = theAccount;
NSArray *parse = [acc.description componentsSeparatedByString:@"uid = "];
parse = [[parse objectAtIndex:1] componentsSeparatedByString:@";"];
NSString *UID = [parse objectAtIndex:0];
parse = [acc.description componentsSeparatedByString:@"fullname = \""];
parse = [[parse objectAtIndex:1] componentsSeparatedByString:@"\";"];
NSString *name = [parse objectAtIndex:0]; 
```

# groovy - 这个 Groovy 闭包标记“->”是否有名称或昵称？

> ID：12716956
> 
> 赞同：4
> 
> 时间：2012-10-03T21:09:15.170
> 
> 标签：groovy, closures

跟进[这个问题](https://stackoverflow.com/questions/2993462/groovy-what-does-mean)。[Groovy.codehaus.org](http://Groovy.codehaus.org)只是将其称为令牌。有没有像“splat”和“bang”这样的非正式绰号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T04:43:35.550

它被非正式地称为“箭头”。我引用[了 2008 年的这篇文章](http://groovy.329449.n5.nabble.com/When-do-I-need-the-arrow-td356227.html)。虽然我不能声称它是一个标准的成语，但我从未听说过它被称为其他任何东西（在谈话中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T21:18:32.447

在[antlr 解析器脚本](https://github.com/groovy/groovy-core/blob/master/src/main/org/codehaus/groovy/antlr/groovy.g#L1708)中，它被称为“可关闭块运算符”

我不知道比“箭头”更活泼的名字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T21:11:10.613

我以前听说过它叫“火箭”。“胖火箭”/“哈希火箭”也是 '=>'

但这更适用于 Ruby 术语。

# django - 在 Django 中获取通用关系的 ContentType id

> ID：12716970
> 
> 赞同：15
> 
> 时间：2012-10-03T21:10:19.093
> 
> 标签：django

我正在使用旧数据库将项目从 Rails 移植到 Django。在 Rails 中，我有一个多态关联，它允许我向数据库中的任何行添加脚注。我正在尝试在 Django 应用程序中实现相同的功能。我找到了有关通用关系的文档，它看起来很完美。不幸的是，我首先需要在我的旧数据库中创建新字段来保存相关模型的 ContentType id。我只使用了与 2 个表的多态关联，所以我只需要来自 Django 应用程序的这两个相应的 id，但我似乎无法在 Django 中找到合适的命令来查找 ContentType id。

任何建议都非常受欢迎。我尝试搜索以前的问题，但似乎找不到我要找的东西。非常感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-03T22:51:47.730

从[文档](https://docs.djangoproject.com/en/3.0/ref/contrib/contenttypes/#django.contrib.contenttypes.generic.GenericForeignKey)

你可以做：

```
>>> b = Bookmark.objects.get(url='https://www.djangoproject.com/')
>>> bookmark_type = ContentType.objects.get_for_model(b)
>>> TaggedItem.objects.filter(content_type__pk=bookmark_type.id,
...                           object_id=b.id) 
```

所以只需实例化模型的一个实例，然后执行`ContentType.objects.get_for_model(<instance>).id`

我认为也有一种方法可以只传递模型名称......让我知道这是否会更好，我会尝试找到它；我过去用过它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-12T09:40:21.757

您也可以在`ContentType`不创建实例的情况下获取 ID，如果您没有并且不需要实例但只想`ContentType`通过模型名称获取 ID，则效率更高。

`ContentType.objects.get(model='bookmark').id`

**注意**：如果您的型号名称为大写，请使用小写进行搜索。例如：`model = 'bookmark'`而不是`'Bookmark'`

# android - People应用程序使用的Jelly Bean listview设计模式叫什么？它是如何建造的？

> ID：12716971
> 
> 赞同：0
> 
> 时间：2012-10-03T21:10:20.263
> 
> 标签：android, listview, contacts, android-4.2-jelly-bean

通过谷歌搜索无法找到任何东西，可能是因为我不知道如何称呼这种 UI 模式。JB people 应用程序在左侧显示联系人，在右侧显示所选联系人的详细信息。右侧的详细信息片段有一个指向所选联系人的三角形。这个 Android UI 模式叫什么？我该如何实现它。

![在此处输入图像描述](../Images/1312f3f10af929e63df387c85bbcee2e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T21:21:09.583

这是一个 MasterDetailFlow 模板，如果您开始一个新项目并选择使用 MasterDetailFlow 模板（如果您有最新的 ADT 更新），您可以获得该模板的代码。

就三角形/箭头部分而言，我不太确定谷歌是如何做到的，但这就是我要解决的问题：

在列表片段中，当一个项目被选中时，它将有一个带有三角形/箭头的 ImageView 作为其与细节片段背景匹配的资源，将其对齐到列表行的右侧并确保没有填充/边距在它和视图的边缘之间。您可以使用 ViewStub ( [http://developer.android.com/reference/android/view/ViewStub.html](http://developer.android.com/reference/android/view/ViewStub.html) )，也可以将 ImageView 的 XML 中的默认可见性设置为不可见。

然后，在被点击的列表项的回调中，简单地膨胀或使列表行中的三角形图像可见。

我希望这有帮助。如果您需要更详细的解释，请告诉我。

免责声明：我确信我所描述的这种方法不是最好的/谷歌这样做的方式，但这就是我开始尝试实现此功能的方式。

# iphone - 如何将 uitextfield 设置为斜体 Xcode 4.5

> ID：12716972
> 
> 赞同：0
> 
> 时间：2012-10-03T21:10:22.590
> 
> 标签：iphone, ios, xcode, italics

我有一个应用程序，用户在几个文本字段中输入信息，然后通过 nsstring 添加到 uitextview 有人知道如何将其中一个文本字段设置为斜体并保持其他文本字段正常

问候

编辑：

这是我的代码，我只想更改一次文本字段（例如 textfbookpublisher）：

```
NSString* combinedString = [NSString stringWithFormat:
                            @"%@,%@.'%@.'%@.%@,%@.", 
                            textfbookpublisher.text,
                            textfbookauthor.text,
                            textfbooktitle.text,
                            textfbookplace.text,
                            nameofuni.text,
                            textfbookyear.text];

DissertationGen*bookg = [[DissertationGen alloc] init];
bookg.message = combinedString;
bookg.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentModalViewController:bookg animated:YES] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T21:14:54.340

快速搜索会给你一个简单的答案。例如，[这篇文章](https://stackoverflow.com/questions/1384181/italic-bold-and-underlined-font-on-iphone/1384206#1384206)。

只需将您想要的 UITextfield 的字体设置为`[UIFont italicSystemFontOfSize:]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T04:47:46.040

试试这个链接看看接受的答案，并检查 TTTAttributedLabel 库

[加粗一个字](https://github.com/mattt/TTTAttributedLabel)

现在你只需要斜体的 textfbookpublisher 然后将它单独传递给下一个 DissertationGen 视图

在 DissertationGen 控制器的 viewdidload 方法中使用以下代码

```
UILabel *lblpubl = [[UILabel alloc] init];
lblpubl.font = [UIFont italicSystemFontOfSize:18.0];
lblpubl.text = your variable which contains textfbookpublisher's text; 
```

现在根据需要使用 lblpubl

# php - 在只与自身交互的 PHP Web 表单中，什么验证是重要的？

> ID：12716973
> 
> 赞同：4
> 
> 时间：2012-10-03T21:10:25.220
> 
> 标签：php, base64, security

我制作了一个简单的 base64 解码器表单，它通过 textarea 接收输入。我假设输入是 base64 编码的。如果不是 base64 输入，并且有 PHP 错误或返回垃圾，我现在不介意 但是，从安全角度来看，我是否需要对此输入进行任何验证或清理？

该页面称为error-decoder.php，它提交给自己，不与数据库或其他任何东西交互。这是整个事情：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>
    </head>
    <body>
        <div id="container" style="width: 80%; margin: 0 auto; font-family: sans-serif;">

            <form name="error-decoder" action="error-decoder.php" method="post">
                <textarea name="error-text-area" style="width: 100%; height: 400px;">
                    <?php if(!empty($_POST['error-text-area'])){ echo $_POST['error-text-area']; } ?>
                </textarea>
                <button type="submit" style="float: right;">Decode</button>
            </form>

            <?php
            if(!empty($_POST['error-text-area'])){
            ?>
                <p>Output:</p>
                <hr>
                <div id="error-output">
                <br />
            <?php
                echo base64_decode($_POST['error-text-area']) . "</div>";
            }
            ?>

        </div>

    </body>
</html> 
```

是否需要做任何事情来确保用户或我的服务器安全？我需要担心是否有重要的 php.ini 设置会影响您的答案？我不关心错误或垃圾，除非它可能会影响安全性。感谢您提供有关此的任何信息！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T21:14:27.620

当您输出到 html 时，您应该使用`htmlspecialchars()`以避免您的数据破坏 html。除非你当然输出 html 本身。

所以：

```
echo htmlspecialchars(base64_decode($_POST['error-text-area'])); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T21:14:18.507

您正在使用 POST，因此无法进行跨站点脚本编写，但可以进行本地 HTML/脚本*注入*。唯一的安全漏洞是用户在脚下开枪：如果他们提交 base64 编码的恶意 HTML/JS，他们最终可能会将自己重定向到恶意页面。因此，清理解码功能的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T21:13:55.200

是的。由于其输出用于 HTML 查看，因此需要将其编码为 HTML。一个简单的通过`htmlentities()`就解决了这个问题。

实际的漏洞是有人可能会`<script>`向您的页面注入标签或类似的危险标签，并影响页面。

# bash - wget 并在 bash 脚本中更改目录

> ID：12716976
> 
> 赞同：0
> 
> 时间：2012-10-03T21:10:29.693
> 
> 标签：bash, wget

如何切换到目录A，`wget`在目录A中运行，然后切换到另一个目录B，`wget`在目录B中运行？

我有以下代码：

```
#!/bin/bash

cd directory_A && wget --spider -i addresses.txt && cd ..;
cd directory_B && wget --spider -i addresses.txt && cd ..; 
```

我的代码在第一个结束时失败`wget`。但是，如果我将 wget 替换为其他命令，例如`touch`or `pwd`，则脚本会按预期工作。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T21:14:07.307

通常，尝试跟踪目录并 cd 回到您所在的位置是一个坏主意。相反，只需在子 shell 中运行：

```
#!/bin/sh

( cd directory_A && wget ... )
( cd directory_B && wget ... ) 
```

第一个 wget 将从 directory_A 内运行，无论发生什么，脚本都将保留在当前目录中，因此 directory_B 的相对路径是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T21:14:38.287

```
a && b 
```

意思是：只有在a成功完成时才执行b。所以，当`wget`失败时，`cd ..`不执行。

也许你想这样做？

```
 cd directory_A; wget --spider -i addresses.txt; cd ..;
 cd directory_B; wget --spider -i addresses.txt; cd ..; 
```

如果您希望我们解决您的`wget`问题，您应该提供一些错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T21:15:08.543

如果您像这样修改代码：

```
#!/bin/bash

cd directory_A && wget --spider -i addresses.txt
cd ..
cd directory_B && wget --spider -i addresses.txt
cd .. 
```

`wget ..`在第一个命令失败后它不会停止

# iphone - MonoTouch.Dialog中的自定义UIPickerView？

> ID：12716989
> 
> 赞同：0
> 
> 时间：2012-10-03T21:11:36.120
> 
> 标签：iphone, ios, xamarin.ios, uipickerview, monotouch.dialog

我尝试为 MonoTouch Dialog 创建自己的 UIPickerView 元素版本，但无济于事。是否已经实现了某种形式，`MonoTouch.Dialog`或者我可以编辑 a`DateTimeElement`以使用我的自定义条目充当 UIPickerView？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:12:59.297

Cheesebaron 已经做到了 - 请参阅[https://github.com/slodge/MvvmCross/pull/25中的代码和讨论](https://github.com/slodge/MvvmCross/pull/25)

此代码的基础确实基于 dateelement 内的 uipickerview

# c++ - 加密和序列化 stl 字符串和其他容器

> ID：12716990
> 
> 赞同：4
> 
> 时间：2012-10-03T21:11:37.697
> 
> 标签：c++, serialization, encryption, stl

我在 stl 容器（向量）中有数据。向量中的每个节点都是一个结构，其中还包含 stl 字符串。

```
struct record
{
string name;
string location;
int salary;
}

vector< record > employees; 
```

我想序列化员工，但我也想在序列化之前对其进行加密。

我的加密功能如下所示：

```
Encode(const char * inBfr, const int in_size, char ** outBfr, int& out_size ) 
```

通过搜索，stl 标准似乎不需要我的结构的内存是连续的，所以我不能只抓取`employees`变量的内存。有没有其他智能方法可以将此编码功能与基于 stl 的结构/容器一起使用？Encode 函数在普通的 char * 缓冲区中工作对我有好处，所以我确切地知道进出的内容，但 stl 结构不是，我正在努力寻找一种好方法，以便我可以将 stl 与此函数一起使用。

如果有帮助，我也愿意使用任何其他 stl 容器。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-03T21:59:11.710

尽管`std::vector<T>`保证中的元素是连续布局的，但这并没有真正的帮助：您拥有的记录可能包括填充，更重要的是，将存储对象`std::string`外部的内容`std::string`（如果小字符串优化是使用时，该值可以嵌入到内部，`std::string`但它也将包含几个不属于`std::string`s 值的字节）。因此，您最好的选择是格式化您的记录并加密格式化的字符串。

格式化很简单，但我个人会将编码函数封装成一个简单的函数`std::streambuf`，以便加密可以通过过滤流缓冲区完成。鉴于您给出的签名，这可能看起来像这样：

```
class encryptbuf
    : public std::streambuf {
    std::streambuf* d_sbuf;
    char            d_buffer[1024];
public:
    encryptbuf(std::streambuf* sbuf)
        : d_sbuf(sbuf) {
        this->setp(this->d_buffer, this->d_buffer + sizeof(this->d_buffer) - 1);
    }
    int overflow(int c) {
        if (c != std::char_traits<char>::eof()) {
            *this->pptr() = std::char_traits<char>::to_char_type(c);
            this->pbump(1);
        }
        return this->pubsync()? std::char_traits<char>::eof(): std::char_traits<char>::not_eof(c);
    }
    int sync() {
        char* out(0);
        int   size(0);
        Encode(this->pbase(), this->pptr() - this->pbase(), &out, size);
        this->d_sbuf->sputn(out, size);
        delete[] out; // dunno: it seems the output buffer is allocated but how?
        this->setp(this->pbase(), this->epptr());
        return this->d_sbuf->pubsync();
    }
};

int main() {
    encryptbuf    sbuf(std::cout.rdbuf());
    std::ostream eout(&sbuf);
    eout << "print something encoded to standard output\n" << std::flush;
} 
```

现在，为您的记录创建一个输出运算符，只需打印到一个`std::ostream`可用于创建一个编码

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-03T21:14:44.980

将您的结构序列化为字符串，然后加密字符串可能是最简单的。例如：

```
std::ostringstream buffer;

buffer << a_record.name << "\n" << a_record.location << "\n" << a_record.salary;

encode(buffer.str().c_str(), buffer.str().length(), /* ... */); 
```

如果是我，我可能会编写`encode`（或至少是它的包装器）以在向量、字符串或流中获取输入（并可能产生输出）。

如果你想变得雄心勃勃，还有其他可能性。首先，@MooingDuck 提出了一个很好的观点，即通常值得`operator<<`为班级重载，而不是一直处理单个项目。这通常是一个类似于上面的小函数：

```
std::ostream &operator<<(std::ostream &os, record const &r) { 
    return os << r.name << "\n" << r.location << "\n" << r.salary;
} 
```

使用它，您只需：

```
std::ostringstream os;
os << a_record;

encode(os.str().c_str(), os.str().length(), /* ... */); 
```

其次，如果你想变得更加雄心勃勃，你可以将加密放入（例如）一个`codecvt`方面，这样你就可以在将所有数据写入流时自动加密，并在读回时对其进行解密。另一种可能性是将加密构建到过滤`streambuf`对象中。`codecvt`方面可能是理论上应该首选的方法，但几乎可以肯定的是`streambuf`更容易实现，涉及的不相关“东西”更少。

# php - 将项目从 Windows 移动到 Linux 时出错“mod_fcgid: stderr: PHP Fatal error: Class 'Public_Controller' not found”

> ID：12716992
> 
> 赞同：1
> 
> 时间：2012-10-03T21:11:56.777
> 
> 标签：php, codeigniter

将我的项目从 Windows 移动到 Linux 后，我得到的只是一个空白页当我查看日志时，我收到此错误：

```
[Wed Oct 03 22:59:14 2012] [warn] [client MY.IP.] mod_fcgid: stderr: PHP Fatal error:  Class 'Public_Controller' not found in /home/clients/client13/web32/web/application/modules/welcome/controllers/welcome.php on line 11 
```

服务器正在运行 Fast-CGI（我也尝试过 Mod-PHP 以防万一）

文件第 10 到 16 行：

```
class Welcome extends Public_Controller
{
function Welcome()
{
parent::__construct();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T03:45:09.067

Linux 在文件命名约定方面是区分大小写的。仔细检查控制器上的外壳。具体来说，确保您的文件被调用`Public_Controller.php`

# watin - Watin元素查找器错误

> ID：12716994
> 
> 赞同：2
> 
> 时间：2012-10-03T21:12:08.093
> 
> 标签：watin, ui-automation

尝试查找元素时出现以下错误。我的查找方法如下。

```
public Element FindMenuItem(string menuItemName)
{
    var menuItem = Element(Find.ByText(menuItemName));
    var cells = ((ElementContainer<Element>)(menuItem)).TableCells;
    return cells.Count > 0 ? cells.First() : menuItem;
} 
```

错误：

> WatiN.Core.Exceptions.WatiNException：无法找到元素，因为没有可用的元素查找器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T21:14:57.797

这是 Watin 的一个已知错误，获取最新版本，它应该被修复。链接到下面的错误。

[http://sourceforge.net/p/watin/bugs/176/](http://sourceforge.net/p/watin/bugs/176/)

# sql - 如何形成一个 SQL 查询，就像在两列中使用“IN”作为对？

> ID：12716996
> 
> 赞同：2
> 
> 时间：2012-10-03T21:12:13.033
> 
> 标签：sql, select

我有两个整数列，我希望选择具有特定值对的行。我可以使用什么 SQL 语法？例如，`IN`如果 IN 支持此语法，则使用它可能看起来像这样：

```
select * 
 from myTable 
 where value1, value2 in ((2,3), (3,4), (2,5), (3,6)) 
```

用 选择那些行 `value1 == 2 and value2 == 3 or value1==3 and value2==4 or 2/5 or 3/6`。

我使用的是专有的 SQL 系统，因此首选基本 SQL。或者，如果没有，在某些标准 SQL 中工作的语句也会很有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T21:15:59.490

```
select yourtable.* 
from yourtable
     inner join 
     (
          select 2 as v1, 3 as v2 
          union select 3,4
          union select 2,5
          union select 3,6
     ) pairs
         on yourtable.value1 = pairs.v1
         and yourtable.value2 = pairs.v2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T21:15:34.433

`IN`不幸的是，在 SQL Server 中你不能使用这种方式。我认为你最好的选择是像你在代码示例下面那样写出来，或者将你的数据加载到 CTE 或其他东西中，然后加入它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T05:37:18.187

同样可以通过使用来实现 `VALUES`

```
select table_name.* 
  from table_name tn, 
       (values(2,3), (3,4), (2,5), (3,6) ) as val(v1,v2) 
  where tn.value1 = val.v1 and tn.value2 = val.v2 
```

# iphone - ios改变视图的深度不透明度过渡

> ID：12716998
> 
> 赞同：0
> 
> 时间：2012-10-03T21:12:17.053
> 
> 标签：iphone, ios, cocoa-touch

我正在做一些需要我循环浏览图像并在它们之间创建某种淡入和淡出过渡的东西。我习惯了 javascript，所以我自然会想要改变将要淡入的图像视图的深度。有没有办法选择哪个视图显示在顶部？还是有更好的方法来做我想要实现的目标？

```
CGRect imageFrame = CGRectMake(0.0, 0.0, 1024.0, 280.0);

UIImageView *image_one = [[UIImageView alloc] initWithFrame:imageFrame];
image_one.image = [UIImage imageNamed:@"image_one.png"];
[self.view addSubview:image_one];

UIImageView *image_two = [[UIImageView alloc] initWithFrame:imageFrame];
image_two.image = [UIImage imageNamed:@"image_two.png"];
[self.view addSubview:image_two]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:14:49.210

`[UIView insertSubview:aboveSubview:]`您可以从视图层次结构中删除视图，然后使用and重新插入它`[UIView insertSubview:belowSubview:]`。