# StackOverflow 问答 13634000-13634999

# java - 正面点击时Android对话框崩溃

> ID：13634000
> 
> 赞同：1
> 
> 时间：2012-11-29T20:18:35.950
> 
> 标签：java, android, dialog, crash

根据此链接中的教程，我刚刚创建了一个 android 对话框，该对话框将结果返回给主机活动（在我的项目中，它是 mainActivity）：http: [//developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

它说为了处理你想在对话框中做的事件，你应该在对话框类中使用接口。然后，在宿主活动中，您应该实现此接口及其方法。但我注意到它只会在点击正面按钮时崩溃。这是我的代码：

```
 public class dialogFragement extends DialogFragment {

public interface NoticeDialogListener {
    public void onDialogPositiveClick(DialogFragment dialog);
    public void onDialogNegativeClick(DialogFragment dialog);
}

 NoticeDialogListener mListener;

@Override
public void onAttach(Activity activity) {

    // TODO Auto-generated method stub
    super.onAttach(activity);

    try {
        // Instantiate the NoticeDialogListener so we can send events to the host
        mListener = (NoticeDialogListener) activity;
    } catch (ClassCastException e) {
        // The activity doesn't implement the interface, throw exception
        throw new ClassCastException(activity.toString()
                + " must implement NoticeDialogListener");
    }
}

public Dialog onCreateDialog(Bundle savedInstanceState) {

    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

    LayoutInflater inflater = getActivity().getLayoutInflater();

    builder.setView(inflater.inflate(R.layout.dialog_layout, null))
    // Add action buttons
           .setPositiveButton("Onayla", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                   mListener.onDialogPositiveClick(dialogFragement.this);
               }
           })
           .setNegativeButton("İptal et", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                   mListener.onDialogNegativeClick(dialogFragement.this);
               }
           });      
    return builder.create();
}

    } 
```

在主要活动中：

```
public void onDialogPositiveClick(DialogFragment dialog) {

EditText et=(EditText)findViewById(R.id.editText1);
dosyaAdi=et.getText().toString();
dosyayaYaz();

 } 
```

LogCat 错误：

```
11-29 23:15:01.689: E/SensorManager(23506): thread start
11-29 23:15:16.684: E/AndroidRuntime(23506): FATAL EXCEPTION: main
11-29 23:15:16.684: E/AndroidRuntime(23506): java.lang.NullPointerException
11-29 23:15:16.684: E/AndroidRuntime(23506):    at          com.example.coordinates.MainActivity.onDialogPositiveClick(MainActivity.java:371)
11-29 23:15:16.684: E/AndroidRuntime(23506):    at  com.example.coordinates.dialogFragement$1.onClick(dialogFragement.java:54)
11-29 23:15:16.684: E/AndroidRuntime(23506):    at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:168)
11-29 23:15:16.684: E/AndroidRuntime(23506):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-29 23:15:16.684: E/AndroidRuntime(23506):    at android.os.Looper.loop(Looper.java:137)
11-29 23:15:16.684: E/AndroidRuntime(23506):    at android.app.ActivityThread.main(ActivityThread.java:4517)
11-29 23:15:16.684: E/AndroidRuntime(23506):    at java.lang.reflect.Method.invokeNative(Native Method)
11-29 23:15:16.684: E/AndroidRuntime(23506):    at java.lang.reflect.Method.invoke(Method.java:511)
11-29 23:15:16.684: E/AndroidRuntime(23506):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
11-29 23:15:16.684: E/AndroidRuntime(23506):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
11-29 23:15:16.684: E/AndroidRuntime(23506):    at dalvik.system.NativeStart.main(Native Method) 
```

dosyayaYaz() 函数：

```
private void dosyayaYaz(){

    sm.unregisterListener(this); // this is the line 213
    File myFile;  
    myFile= new File("sdcard/"+dosyaAdi.toString()+".csv");

        try {
            myFile.createNewFile();
        FileOutputStream fOut = new FileOutputStream(myFile);
        OutputStreamWriter myOutWriter = new OutputStreamWriter(fOut);

        myOutWriter.append("X Koor;Y Koor;Z Koor");
        myOutWriter.append("\n");

        dataReader=db.rawQuery("SELECT * FROM Koordinatlar", null);

        while(dataReader.moveToNext()){

            Float xDeg=(dataReader.getFloat(dataReader.getColumnIndex("xKoor")));
            Float yDeg=(dataReader.getFloat(dataReader.getColumnIndex("yKoor")));
            Float zDeg=(dataReader.getFloat(dataReader.getColumnIndex("zKoor")));

            myOutWriter.append(String.format("%f", xDeg)+";"+String.format("%f", yDeg)+";"+String.format("%f", zDeg));
            myOutWriter.append("\n");

        }

        Toast toast=Toast.makeText(getBaseContext(), "Başarıyla Dosyaya Yazıldı",Toast.LENGTH_SHORT);
        toast.show();
        sm.registerListener(this, myAccelerometer, SensorManager.SENSOR_DELAY_UI);

    } 
    catch(IOException ex){
        Toast toast=Toast.makeText(getBaseContext(), "Dosyaya yazma sırasında bir hata oluştu"+" "+ex.toString(),Toast.LENGTH_LONG);
        toast.show();
    }
} 
```

创建函数：

```
 public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    fm=getFragmentManager();

    b1=(Button)findViewById(R.id.button1);
    b2=(Button)findViewById(R.id.button2);
    b3=(Button)findViewById(R.id.button3);
    x=(TextView)findViewById(R.id.textView4); 
    y=(TextView)findViewById(R.id.textView5); 
    z=(TextView)findViewById(R.id.textView6); 

    sm=(SensorManager)getSystemService(Context.SENSOR_SERVICE);

    myAccelerometer= sm.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);

    sm.registerListener(this, myAccelerometer,SensorManager.SENSOR_DELAY_UI);

    veritabani= new VeriTabani(this);
    db=veritabani.getWritableDatabase();

    valuesX= new ArrayList<Float>();
    valuesY= new ArrayList<Float>();
    valuesZ= new ArrayList<Float>();
    zamanDiyagrami= new ArrayList<Float>();

     b1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            grafikGoruntule();
        }
    });
     b2.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            verileriSil();
        }
    });

     b3.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            DialogFragment dialog = new dialogFragement();
            dialog.show(fm, "MyDialogFragment");
        }
    });

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:04:51.737

来自 LogCat：

```
java.lang.NullPointerException 
    at com.example.coordinates.MainActivity.dosyayaYaz(MainActivity.java:213) 
```

你的代码：

```
sm.unregisterListener(this); // this is the line 213 
```

然后是 null 中的变量`sm`，您需要使用以下命令对其进行初始化：

```
sm = ... 
```

* * *

**补充**
从您到目前为止发布的内容中，我不明白为什么`sm`是`null`. 但是`dosyayaYaz()`你总是可以这样做：

```
if(sm == null)
    sm=(SensorManager)getSystemService(Context.SENSOR_SERVICE);
sm.unregisterListener(this); // this is the line 213 
```

（但最好尝试找出确切的原因`sm`。`null`）

* * *

**添加**
新的 LogCat 错误表明您试图在 MainActivity 中找到一个实际上是 DialogFragment 一部分的视图...也许在里面`doPositiveClick()`您可以使用：

```
public void onDialogPositiveClick(DialogFragment dialog) {
    //         Add this:  vvvvvvvvvvvvvvvvvvv
    EditText et=(EditText)dialog.getDialog().findViewById(R.id.editText1);
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-04T09:24:04.150

为了避免`null`在调用监听器之前总是检查监听器的好习惯，所以你的代码看起来像这样

```
if(mListener != null)
    mListener.onDialogPositiveClick(dialogFragement.this);
// Similarly for negative button 
```

**其他可能**的错误原因是因为您没有在主机活动中实现接口。您必须`NoticeDialogListener`在 Calling 活动中实现。

# .net - 如何提取正则表达式反向引用的值？

> ID：13634001
> 
> 赞同：2
> 
> 时间：2012-11-29T20:18:39.263
> 
> 标签：.net, html, regex, vb.net

所以我多年来一直在使用正则表达式，主要是在 PHP 环境中，但我正在开发一个使用 VB .NET 脚本引擎的小项目（我有 VB 经验，但仅此而已），并且在做一些实际问题一些非常基本的东西。

我有一个加载了 HTML 文件内容的变量，我想提取某个标签的值。

例子：

```
<span id="temp" class="up"><span class="up">76.4</span></span> 
```

在研究了基于 .NET 的正则表达式的变化之后，这就是我想出的（反向引用 1 允许我捕获该数字）：

```
<span id="temp" class="(?:up|down)"><span class="(?:|up|down)">([0-9]+\.[0-9]{1})</span> 
```

但是，我无法让它工作。RegEx Hero 网站似乎验证了正则表达式，所以我猜问题出在我的代码上。我在网上关注了很多例子，但总是遇到某种错误。更糟糕的是，我正在使用记事本开发这个脚本：p

有人可以为我提供一个提取该数字的有效 VB .NET 脚本示例吗？目标是仅用数字替换该 HTML 变量中的所有文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:00:07.477

你的表达似乎是有效的。我唯一要添加的是数字的命名组。尝试这个：

```
Dim input = "<span id=""temp"" class=""up""><span class=""up"">76.4</span></span>"
Dim regex = New Regex("<span id=""temp"" class=""(?:up|down)""><span class=""(?:|up|down)"">(?<number>[0-9]+\.[0-9]{1})</span>")
Dim number = regex.Match(input).Groups("number").Value 
```

它应该得到你`76.4`。

还有一件事 - 在解析 HTML 时[，使用 HTML parser 而不是 regexes](https://stackoverflow.com/a/1732454/102112)总是更好。我建议[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)。

# c++ - boost::thread join 中的 EXC BAD ACCESS

> ID：13634003
> 
> 赞同：1
> 
> 时间：2012-11-29T20:18:47.280
> 
> 标签：c++, multithreading, boost, exc-bad-access

我是 C++ 新手，只是在这段代码中发现我做错了什么：

我的 C++ 类如下所示：

```
#include <boost/thread/thread.hpp>

using namespace std;

struct AClass::AClassImpl
{
    boost::thread m_thread;
};

AClass::AClass(): pimpl (new AClass::AClassImpl) {}

AClass::~AClass() { delete pimpl; }

void AClass::start()
{
    cout << PREFIX << "main() : creating thread, " << endl;
    pimpl->m_thread = boost::thread(boost::bind(&AClass::process, this));
}

void AClass::stop()
{
    pimpl->m_thread.join();
}

void AClass::process()
{
    cout << PREFIX << "Hello World! Thread ID, " << endl;
    boost::this_thread::sleep(boost::posix_time::milliseconds(1000));
    return;
} 
```

在 XCode 中，我还编写了一个 Objective-C 测试用例，用这种方法测试 AClass：

```
- (void) testStart
{
    tested->start();
    tested->stop();
} 
```

问题是我在

```
pimpl->m_thread.join(); 
```

停止方法中的行。

这是我的头文件：

```
class AClass {
public:
    AClass ();
    ~AClass();
    void start();
    void stop();

private:
    struct AClassImpl; //fwd declaration of internal struct
    AClassImpl * pimpl; //opaque pointer
    void process();
}; 
```

谁能给我一个提示我在这里做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:41:01.140

我已经使用

```
int main()
{
  AClass tested;
  tested.start();
  tested.stop();
  return 0;
} 
```

一切都在主干上工作。输出是

```
main() : creating thread, 
Hello World! Thread ID, 
```

不知道你是怎么测试的。你可以试试我的主要吗？

您使用的是哪个版本的 Boost，使用哪个编译器以及在哪个平台上？

# javascript - 如何获取要绑定到对象（模型）的几个单选按钮的选定值？

> ID：13634007
> 
> 赞同：1
> 
> 时间：2012-11-29T20:18:57.077
> 
> 标签：javascript, data-binding, angularjs

我有一组对象，用于使用 ng-repeat 呈现单选按钮列表。我的问题是如何绑定每个问题的选定值并将它们绑定到某种类型的模型。这是我到目前为止的 plunker，[http](http://plnkr.co/edit/oXr6Un?p=preview) ://plnkr.co/edit/oXr6Un?p=preview但代码只是循环通过单选按钮列表并获取选定的值。我真的希望在用户选择答案时绑定该对象并更改其属性。我怎样才能做到这一点？请理解我对 Angularjs 很陌生。谢谢大家，ck

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:41:37.910

就像上面的@Max 所说，您需要在输入上设置 ng-model ......但这并不是您需要做的全部。 [我已经分叉了你的 plunk 并对其进行了更新，以向你展示一些有用的东西](http://plnkr.co/edit/EvTgbb)

需要注意的几点：

*   您不需要“showAnswers”服务，并且在使用 Angular 时，您永远不必通过 JQuery 从输入中获取值。
*   您需要在输入中添加 ng-model，但您需要`$parent.answer`在 ng-model 中使用，因为输入位于`ng-repeat`具有自己的子范围的 an 内部。
*   您不需要`for=""`包装他们正在标记的输入的标签。

重要变化：

```
 <li ng-repeat="answer in question.answers">
      <label>
        <input type="radio" ng-model="$parent.question.selectedAnswer"
         value="{{ answer.answerText }}"  name="quest_{{$parent.$index}}_answers" />{{ answer.answerText }}</label>
    </li> 
```

和

```
$scope.selectedAnswers = function(){
   var answers = [];
   angular.forEach($scope.questions, function(question) {
    answers.push(question.selectedAnswer);
   });
   return answers;
 }; 
```

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T21:05:01.133

您必须在输入（http://docs.angularjs.org/api/ng.directive:input.radio）上设置 ng-model。这样，您将获得两种方式的数据绑定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T19:35:26.627

以下是我将如何编写指令版本：[http ://plnkr.co/edit/Otikw0fX8rwx2gM8DMMl?p=preview](http://plnkr.co/edit/Otikw0fX8rwx2gM8DMMl?p=preview)

我简化了模型。每个问题及其可能的答案如下所示：

```
{ question: "Why is the sky blue?",
  answerChoices: [ "blah blah 1", "Rayleigh scattering", "blah blah 3" ] }, 
```

对于每个这样的对象，我们将通过单选按钮动态添加一个“答案”元素。稍后再谈。

我精简了工厂。它只是返回一个对象数组：

```
.factory('questionFactory', function() {
  return [
   { question: ... 
```

控制器现在可以简单地执行此操作：

```
$scope.questions_and_answers = questionFactory; 
```

现在我们定义了模型。接下来，我想考虑一下我需要哪些指令，以及每个指令的模板和行为是什么。我保留了你的 3 个指令——测验、问题、答案——但我将答案重命名为 possibleAnswer。

作为个人选择，我认为让“测验”指令包含问题和答案的主要结构会更好，因此我将答案的 ng-repeat 从问题指令的模板中移到了测验中指令的模板。我还留下了 quiz 一个元素，但我将 question 和 possibleAnswer 更改为属性，因为我个人喜欢看到更熟悉的标记结构，例如
<li ng-repeat ...> 此处的东西 </li>
而不是不熟悉的
<li answer ng -重复...></li>

```
.directive('quiz', function() {
...
  template:'<ul class="unstyled">' +
    '<li ng-repeat="item in questionsAndAnswers">' + 
      '<span question="{{item.question}}"></span>' +
      '<ul class="unstyled">' + 
        '<li ng-repeat="possibleAnswer in item.answerChoices">' +
          '<span possible-answer="{{possibleAnswer}}" item=item id="{{$parent.$index}}"></span>' +
        '</li>' +
      '</ul>' +
    '</li></ul>' 
```

问题指令模板现在只处理问题：

```
template:'<strong class="question">{{ question }}</strong>' 
```

而 possibleAnswer 指令只处理一个可能的答案（就像你已经拥有的那样）：

```
template: '<label><input type="radio" ng-value="possibleAnswer"' + 
    ' ng-model="item.answer" name="q{{id}}" />{{possibleAnswer}}</label>' 
```

这些模板中发生了很多事情，为了理解我所做的，我们现在需要讨论指令范围继承。我对所有指令都使用了隔离范围——即`scope: { ... }`——因为这通常是可重用组件的最佳选择。（其他选择见[这里](https://stackoverflow.com/questions/12502783/dynamic-directives-in-angularjs/13656516#13656516)）问题和答案选择不会被指令修改，所以我们不需要2路绑定，只需要单路绑定（父作用域->指令作用域），所以'@'是合适的选择：

```
.directive('question', function() {
  ...
  scope: { question: '@' }, 

.directive('possibleAnswer', function() {
  ...
  scope: { possibleAnswer: '@', ... }, 
```

我们需要向指令传递来自父范围的问题和可能答案的评估副本，因此我们使用 {{}} 表示法：

```
<span question="{{item.question}}">
<span possible-answer="{{possibleAnswer}}" ... 
```

现在是棘手的部分。与单个问题关联的单选按钮都需要相同的名称，并且正如@Max 已经提到的，我们需要将所有单选按钮双向绑定回父模型。我通过使用问题 ID 的单向绑定解决了“同名”问题，这实际上是 ng-repeat 问题 $index：

```
<span possible-answer="{{possibleAnswer}}" id="{{$parent.$index}}" ...>

.directive('possibleAnswer', function() {
  ...
  scope: { id: '@', ... },
  ...
  template: '...<input type="radio" ... name="q{{id}}"... 
```

由于我们想要相同的问题 ID/索引（而不是答案选择 ID/索引），我们使用 $parent 查找问题范围并获取其 ng-repeat $index，因此是 $parent.$index。另一种方法是向主模型中的每个对象添加一个“id”属性（如您所见）并将其传递给指令：

```
<span possible-answer="..." id="{{item.id}}" ...> 
```

（实际上，由于您将在下面看到我们将 'item' 传递到指令中，因此这样的 id 属性将免费出现，因此不需要“id='...'”模板。）我更喜欢使模型尽可能简单。由于我们使用的是对象数组，因此数组索引（ng-repeat $index）就足够了，所以我没有在主模型上使用 id 属性。

要获得 2-way 数据绑定，我们需要使用 '='。我们想要绑定到一个新的“答案”属性，我们将动态添加到主模型中的对象（我之前提到过）。所以我们需要一个对模型中适当对象的引用，同时我们正在循环选择答案。然后我们将这个新的动态属性分配给 ng-model：

```
<li ng-repeat="item in questionsAndAnswers">' +   // pass this 'item' to possibleAnswer
   ...
   '<ul ..>' + 
      '<li ng-repeat="possibleAnswer in item.answerChoices">' +
           <span possible-answer="{{possibleAnswer}}" item=item ...">

.directive('possibleAnswer', function() {
  ...
  scope: { item: '=', ... },
  ...
  template: '...<input type="radio" ... ng-model="item.answer" ...'  // new property 
```

[注意：根据输入无线电 API 页面](http://docs.angularjs.org/api/ng.directive:input.radio)上的 Disqus 评论，应使用“ng-value”而不是“value” 。

```
template: '...<input type="radio" ng-value="possibleAnswer" ... 
```

对于 quiz element 指令，我认为如果传入模型，而不是假设某个范围属性存在于父范围中，该组件的可重用性更高，因此：

```
<quiz questions-and-answers=questions_and_answers></quiz> 
```

由于 possibleAnswer 指令需要修改模型，我们也必须在这里使用 2-way binding，因此 '='：

```
.directive('quiz', function() {
  ...
  scope: { questionsAndAnswers: '='}, 
```

最后，控制器：我删除了函数 selectedAnswer() 并稍微修改了 index.html 中的 ng-repeat 以获得相同的功能：

```
<div ng-repeat="item in questions_and_answers">
   A{{$index}}: {{item.answer}} 
```

所以控制器又好又瘦（推荐的最佳实践）——一行代码。

没有使用 jQuery，所以我删除了它。（我也没有看到 bootstrap.js 的任何用途，而且它抛出了一个错误，所以我也将其删除了。）

这对我来说是一个很好的练习，感谢 OP。（对不起，如果这个答案太长了。我被带走了，但把它全部写下来有助于我澄清一些事情。）

# vbscript - 在 VBScript 中删除单引号导出文件名

> ID：13634009
> 
> 赞同：0
> 
> 时间：2012-11-29T20:19:07.470
> 
> 标签：vbscript

使用 VBScript，我在导出文件名中无意中得到了 initPeriod 的单引号，其中包含以下内容

```
initperiod = datepart("YYYY",Date) & strMonth

""Export_File:C:\GrabIt\Test\{Command.idxnum}\{Command.idxnum}_DriverPage_""" & initPeriod & """_YTD.pdf"" 
```

结果是 11_DriverPage_'201210'_YTD.pdf

如何从 initPeriod 中删除单引号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:21:04.920

我假设您想要在整个 exportfile 行周围加上引号。在这种情况下，您似乎在每一端都缺少一个报价。我还猜测您可能不希望在 initPeriod 的值周围加上引号，因为您使用了太多。在这种情况下，它应该是：

```
"""Export_File:C:\GrabIt\Test\{Command.idxnum}\{Command.idxnum}_DriverPage_" & initPeriod & "_YTD.pdf""" 
```

或者，如果您不想在整个事情上加上引号：

```
"Export_File:C:\GrabIt\Test\{Command.idxnum}\{Command.idxnum}_DriverPage_" & initPeriod & "_YTD.pdf" 
```

请记住，字符串中的 "" 意味着引号字符将包含在字符串中。字符串 set = "" 是一个空字符串。

如果不是这样，您需要准确发布您想要达到的结果。

# templates - SMARTY 模板和变量

> ID：13634013
> 
> 赞同：1
> 
> 时间：2012-11-29T20:19:37.067
> 
> 标签：templates, variables, smarty

好的，所以我有这样的东西（我不能使用数组 - 我知道 - UGH）：

```
{assign var="ctaText1" value="Join Now"}
{assign var="ctaText2" value="News"}
{assign var="ctaText3" value="Photos"}
{assign var="ctaText4" value="Blog!"}
{assign var="ctaText5" value="Store"}

{math equation='rand(1,5)'}

<div>{$ctaText}</div> 
```

现在，我真正想要的是：

```
<div>{${$ctaText}{$equation}}</div> 
```

显然，上述方法不起作用 - 我已经尝试过它和一些变体。但我想知道是否有办法做到这一点，所以我得到正确的随机变量并弹出 DIV 的文本值。

有什么想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-04T10:36:53.397

脏得要命，但它有效：

```
{assign var="ctaText1" value="Join Now"}
{assign var="ctaText2" value="News"}
{assign var="ctaText3" value="Photos"}
{assign var="ctaText4" value="Blog!"}
{assign var="ctaText5" value="Store"}

{php}
    echo $this->get_template_vars('ctaText'.rand(1,5));
{/php} 
```

你可能会考虑重构整个变量赋值

# c# - Windows 手机地图不断崩溃

> ID：13634022
> 
> 赞同：2
> 
> 时间：2012-11-29T20:19:57.890
> 
> 标签：c#, multithreading, windows-phone-7, bing-maps, freeze

我正在创建一个电话应用程序，用于映射您的位置以及其他资产。手机通过 WI-FI 以及用户选择的设定时间（通常为 5 秒）获取其他资产位置的更新。手机会在 4 分钟左右冻结的问题。我能做些什么来修复它？

这是我的代码：

```
 public bool CenterOnUser { get; set; }

    public MapView()
    {
        InitializeComponent();
        CenterOnUser = false;
    }

    private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
    {
        _continue = true;

        mapBing.Children.Add(_mapLayer);

        _time = Convert.ToInt32(PhoneApplicationService.Current.State["time"]);

        _thread = new Thread(Update) {Name = "Map Update"};
        _thread.Start();

        foreach (var asset in DataManager.GetPhoneAssetDictionary())
        {
            _averageLatitude += double.Parse(asset.Value.Latitude);
            _averageLongitude += double.Parse(asset.Value.Longitude);
        }

        _averageLatitude /= DataManager.GetPhoneAssetDictionary().Count;
        _averageLongitude /= DataManager.GetPhoneAssetDictionary().Count;

        mapBing.Center = new GeoCoordinate(_averageLatitude, _averageLongitude);
    }

    public void Update()
    {
        while (_thread.IsAlive && _continue)
        {
            _mapLayer.Dispatcher.BeginInvoke(delegate
            {
                foreach (var asset in DataManager.GetPhoneAssetDictionary())
                {
                    _position = new GetPhoneGPS().Positions();

                    //  Find out if we already have a pin on the map for this asset
                    var pin = _mapLayer.Children.Cast<Pushpin>().FirstOrDefault(assetPin => assetPin.Tag.ToString() == asset.Key);

                    if (pin == null) // do we have a pin
                    {
                        //  We don't yet.  Create one
                        pin = new Pushpin {Tag = asset.Key};

                        //  Figure out the name to give the pin
                        if (asset.Key == _position.UniqueId)
                        {
                            pin.Content = "You are here";
                        }
                        else
                        {
                            pin.Content = String.IsNullOrEmpty(asset.Value.Name) ? asset.Key : asset.Value.Name;
                        }

                        //  Add the pin for this asset to the map
                        _mapLayer.Children.Add(pin);
                    }

                    //  Always update the pin location
                    pin.Location = new GeoCoordinate(double.Parse(asset.Value.Latitude), double.Parse(asset.Value.Longitude));
                }
            });
            Thread.Sleep(_time * 1000);
        }
    }

    private void CenterOnUserBtn_Click(object sender, RoutedEventArgs e)
    {
        CenterOnUser = true;
        mapBing.Center = new GeoCoordinate(double.Parse(_position.Latitude), double.Parse(_position.Longitude));
        mapBing.ZoomLevel = 15;
    }

    private void PhoneApplicationPage_Unloaded(object sender, RoutedEventArgs e)
    {
        mapBing.Children.Remove(_mapLayer);
        _continue = false;
        _thread.Join();
    }
} 
```

我是 Threading 的新手，我相信这可能是问题所在。感谢您的任何帮助。

这是getPhone 的代码。

```
 public class GetPhoneGPS : IDisposable
    {
        private static readonly Positions Position = new Positions();
        readonly GeoCoordinateWatcher _watch = new GeoCoordinateWatcher(GeoPositionAccuracy.High);
        private void UpdatePhonePosition()
        {
            _watch.MovementThreshold = 1;
            _watch.Start();
            _watch.PositionChanged += GeoPositionChange;
            var position = _watch.Position;

            //loads phones gps coordinates
            if (!position.Location.IsUnknown)
            {
                Position.Latitude = position.Location.Latitude.ToString(CultureInfo.InvariantCulture);
                Position.Longitude = position.Location.Longitude.ToString(CultureInfo.InvariantCulture);
                Position.Altitude = position.Location.Altitude.ToString(CultureInfo.InvariantCulture);
                Position.Speed = position.Location.Speed.ToString(CultureInfo.InvariantCulture);
            }
            Position.Date = DateTime.Now;
            Position.Name = PhoneApplicationService.Current.State["username"].ToString();
            Position.UniqueId = PhoneApplicationService.Current.State["UniqueId"].ToString();
        }

        private void GeoPositionChange(object sender, GeoPositionChangedEventArgs<GeoCoordinate> e)
        {
            var position = e.Position;

            //loads phones gps coordinates
            if (!position.Location.IsUnknown)
            {
                Position.Latitude = position.Location.Latitude.ToString(CultureInfo.InvariantCulture);
                Position.Longitude = position.Location.Longitude.ToString(CultureInfo.InvariantCulture);
                Position.Altitude = position.Location.Altitude.ToString(CultureInfo.InvariantCulture);
                Position.Speed = position.Location.Speed.ToString(CultureInfo.InvariantCulture);
            }
            Position.Date = DateTime.Now;
        }

        public Positions Positions()
        {
            UpdatePhonePosition();
            return Position;
        }

        public void Dispose()
        {
            _watch.Dispose();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:30:21.647

这是您通过模拟器使用它还是将开发模式下的应用程序发布到手机后？我发现在某些情况下模拟器不喜欢更新，但它们很少而且相差甚远。

看起来一切似乎都很好——只要手机移动了代码就会执行；我对我的应用程序使用几乎相同的逻辑。

# ios - “关闭” UIWindow 后，搜索列表上的光标丢失

> ID：13634024
> 
> 赞同：0
> 
> 时间：2012-11-29T20:20:04.490
> 
> 标签：ios, xamarin.ios, cursor, uiwindow

我创建了一个自定义 UIWindow、UIViewController 和 UIView，以便通过应用程序为各种屏幕呈现全屏覆盖。显示、旋转和消除覆盖效果很好。

但是，问题是在关闭自定义 UIWindow 后，我的一个基础视图上的搜索框没有闪烁的蓝色光标。出现键盘，我可以在搜索框中输入字符，但没有光标。

另一个奇怪的事情是光标在 iOS 模拟器上按预期出现，但在设备上却没有。

有人知道这里发生了什么吗？我已经尝试遍历我的覆盖视图层次结构以确保所有视图 ResignFirstResponder()。任何想法，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T06:24:14.577

弄清楚了。在我试图获取对原始 UIWindow 的引用时，出现了几个额外的 UIWindows。我使用 KeyWindow 属性来尝试访问我的原始窗口。但是，KeyWindow 不是我期望的 UIWindow。我有一个加载微调器处于活动状态，因此窗口的类型为 _UIAlertNormalizingOverlayWindow。所以，现在我调用 Windows 数组的 0 索引，而不是获取我的主应用程序窗口。然后我能够在正确的 UIWindow 上调用 MakeKeyAndVisible。

出于某种原因，在错误的窗口上调用 MakeKeyAndVisible 会导致一些奇怪的现象，似乎隐藏了 UITextEffectsWindow，这是 iOS 用来在文本字段等中显示光标的窗口类型。

所以，我学到的教训是：永远不要假设在访问 KeyWindow 属性时会得到哪个 windows 数组实例。

# asp.net-mvc - Telerik 控件标签条

> ID：13634027
> 
> 赞同：0
> 
> 时间：2012-11-29T20:20:14.253
> 
> 标签：asp.net-mvc, telerik-mvc

我有一个包含许多标签的标签条。我需要为我的子标签前分配一个 ID。我需要在此处将 id 分配给选项卡 Demo。请帮忙

```
 Html.Telerik().TabStrip().Name("Tab1")
       .Items(items =>
       {
           items.Add()
               .Text("Demo").HtmlAttributes(new { onclick = "return  warnOfChanges()" })
               .LoadContentFrom("EDemo", "W2Generation", new {q=Type.Error, cId = Model.C.CId, eId = Model.SelectedE,fYear = Model.Selectedyear });
           items.Add().HtmlAttributes(new { onclick = "return  warnOfChanges()" }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:29:47.640

您可以将 id 添加为 HtmlAttribute。

```
items.Add()
           .Text("Demo").HtmlAttributes(new { onclick = "return  warnOfChanges()", id = "demoTab"})
           .LoadContentFrom("EDemo", "W2Generation", new {q=Type.Error, cId = Model.C.CId, eId = Model.SelectedE,fYear = Model.Selectedyear }); 
```

# git - 我怎样才能让分支只跟踪自己？

> ID：13634030
> 
> 赞同：0
> 
> 时间：2012-11-29T20:20:24.663
> 
> 标签：git

首先，如果我的问题措辞完全错误，我深表歉意，但希望这个扩展可以解决任何问题。

我每天都使用 Git，现在已经使用了大约 18 个月。我对分支、合并、变基等事情越来越有信心了，但其中一个看似更基本的方面已经让我忽略了……</p>

**如何确保我处理的任何分支仅在其自身的远程版本和本地版本之间进行推送和拉取？**

我以为我已经把它钉[在了我的`.gitconfig`](https://github.com/csswizardry/dotfiles/blob/master/.gitconfig#L32-L33).

这似乎很好地尊重了推送......我确实尝试创建相应的 [pull] 设置，但运行以下工作流程给了我旧的“你让我拉而不告诉我你想与哪个分支合并......”错误。我提到的工作流程是：

1.  查看我最新的本地主分支。
2.  `try/responsive`创建一个名为( `git checkout -b try/responsive`)的分支
3.  做一些工作，`git push`（这里没有问题）。
4.  其他人推送到远程`try/responsive`分支。
5.  我运行一个简单的`git pull`，我得到了那个错误。

现在，我知道我可以运行`git pull origin try/responsive`，但我的问题是：

*   Git 默认是如何工作的？什么跟踪什么以及为什么？还有哪些其他选择？
*   如何设置我的全局配置，以便推送和拉取仅在同一分支的本地和远程版本之间工作？

如果我错过了任何信息，并且如果我做的时间超过了我需要的时间，我深表歉意。我真的很感激对此的任何建议:)

谢谢，
哈利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:24:11.517

只需发出带有参数 -u (git push -u) 的 git push 命令。当你这样做时，你的本地分支将被设置为跟踪相应的远程分支。

默认情况下， git pull 仅在您的本地分支设置为跟踪某个远程分支时才有效。例如，如果您发出上述命令，或者如果您基于远程跟踪分支创建本地分支，就会发生这种情况。如果您基于本地分支创建分支，则不会配置跟踪。您还可以跟踪远程上与本地分支名称不同的分支，我不知道有任何限制这一点的可能性。

# android - 自定义 ArrayAdapter：为什么会出现 NullPointerException？

> ID：13634033
> 
> 赞同：2
> 
> 时间：2012-11-29T20:20:29.960
> 
> 标签：android, gallery, adapter, android-arrayadapter, android-gallery

很抱歉打扰了这么精通的人，但我是Android的新手，我正在努力学习......

无论如何，我正在尝试使用自定义适配器构建画廊。

但是，一旦程序尝试调用适配器，我就会得到 NullPointerException。

非常感谢任何帮助！！！！

```
public class MainActivity extends Activity {
    private Gallery gal;
    private List<Elementi> el;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        List<Elementi> el = new ArrayList<Elementi>();
        int[] tabDrawables = new int[] {
                     R.drawable.img1,R.drawable.img2,R.drawable.img3,R.drawable.img1,R.drawable.img4,R.drawable.    img5,R.drawable.img6,R.drawable.img7,R.drawable.img8,R.drawable.img9,R.drawable.img10};

        String[] descrizione =    {"cani","boffo","gigo","belo","fyyfy","bogin","boginetti","zippe","ninne","cestino","cagnin    o","cucciolo",};

        for (int numero =1; numero <= 10;numero++) {

            ImageView imgm = new ImageView(this);
            imgm.setImageResource(tabDrawables[numero]);
            el.add(new Elementi(imgm,descrizione[numero]));

        };

        super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
        Gallery gal=(Gallery)findViewById(R.id.galleria);
        gal.setAdapter(new MyAdapter());

    }
public class MyAdapter extends ArrayAdapter<Elementi> {
    public MyAdapter() {
        super(MainActivity.this, R.layout.row, el);
    }   
    public View getView(int position, View convertView,ViewGroup parent) {
                View row= convertView;  
                TextView txt =(TextView)row.findViewById(R.id.testorow);
                txt.setText(el.get(position).tx) ;
                ImageView ima =(ImageView)row.findViewById(R.id.immagine);
                ima.setImageResource(R.drawable.img1);
                Toast.makeText(getApplicationContext(), Inte    ger.toString(position), Toast.LENGTH_LONG).show();      
                return row;};

}    

public class Elementi { 
public ImageView im;
public String tx; 
public Elementi(ImageView img,String txt){
        ImageView im =img;
        String tx = txt;        

    }

}

} 
```

我的日志猫：

```
11-29 20:26:28.327: E/AndroidRuntime(786): FATAL EXCEPTION: main
11-29 20:26:28.327: E/AndroidRuntime(786): java.lang.RuntimeException: Unable to start     activity ComponentInfo{com.example.gallery/com.example.gallery.MainActivity}:    java.lang.NullPointerException
11-29 20:26:28.327: E/AndroidRuntime(786):  at      android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
11-29 20:26:28.327: E/AndroidRuntime(786):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
11-29 20:26:28.327: E/AndroidRuntime(786):  at android.app.ActivityThread.access$600(ActivityThread.java:141) 
11-29 20:26:28.327: E/AndroidRuntime(786):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
11-29 20:26:28.327: E/AndroidRuntime(786):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-29 20:26:28.327: E/AndroidRuntime(786):  at android.os.Looper.loop(Looper.java:137)
11-29 20:26:28.327: E/AndroidRuntime(786):  at android.app.ActivityThread.main(ActivityThread.java:5039) 
11-29 20:26:28.327: E/AndroidRuntime(786):  at java.lang.reflect.Method.invokeNative(Native Method)
11-29 20:26:28.327: E/AndroidRuntime(786):  at java.lang.reflect.Method.invoke(Method.java:511)
11-29 20:26:28.327: E/AndroidRuntime(786):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
11-29 20:26:28.327: E/AndroidRuntime(786):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
11-29 20:26:28.327: E/AndroidRuntime(786):  at dalvik.system.NativeStart.main(Native Method)
11-29 20:26:28.327: E/AndroidRuntime(786): Caused by: java.lang.NullPointerException
11-29 20:26:28.327: E/AndroidRuntime(786):  at android.widget.ArrayAdapter.getCount(ArrayAdapter.java:330)
11-29 20:26:28.327: E/AndroidRuntime(786):  at android.widget.AbsSpinner.setAdapter(AbsSpinner.java:114)
11-29 20:26:28.327: E/AndroidRuntime(786):  at com.example.gallery.MainActivity.onCreate(MainActivity.java:52)
11-29 20:26:28.327: E/AndroidRuntime(786):  at android.app.Activity.performCreate(Activity.java:5104) 
11-29 20:26:28.327: E/AndroidRuntime(786):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
11-29 20:26:28.327: E/AndroidRuntime(786):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
11-29 20:26:28.327: E/AndroidRuntime(786):  ... 11 more
11-29 20:26:28.547: D/dalvikvm(786): GC_CONCURRENT freed 387K, 17% free 2496K/3000K, paused 13ms+24ms, total 191ms 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T20:27:16.250

您需要检查`if(convertView == null)`何时需要为新视图充气，或者您可以让超类处理此问题：

```
public View getView(int position, View convertView,ViewGroup parent) {
    if(convertView == null)
        convertView = super.getView(position, convertView, parent);
    ...
} 
```

演示文稿：[Turbo Charge Your UI](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)或[World of ListView](http://www.google.com/events/io/2010/sessions/world-of-listview-android.html)由主要的 Android 程序员将帮助您了解如何在`getView()`不降低应用程序速度的情况下使用。

* * *

 **从您的 LogCat 中**添加：****

 **```
Caused by: java.lang.NullPointerException
    at android.widget.ArrayAdapter.getCount(ArrayAdapter.java:330) 
```

这意味着您传递给 ArrayAdapter 的列表是`null`...

这是因为您有*两个*不同的副本`el`：

```
private List<Elementi> el; // This one is null and is what's passed to your adapter
@Override
protected void onCreate(Bundle savedInstanceState) {
    List<Elementi> el = new ArrayList<Elementi>(); // This one only exists in onCreate! 
```

我真的不喜欢 Java 如何让您在没有警告的情况下执行此操作...只需将最后一行更改为：

```
protected void onCreate(Bundle savedInstanceState) {
    el = new ArrayList<Elementi>(); 
```

（但是，如果您不`getView()`按上述方式处理，您将遇到另一个 NullPointerException。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T20:26:39.660

没有看到 logcat，我认为这是你的错误。第一次调用该方法时，该方法的`convertView`参数`getView()`为空。您的工作是在以下情况下膨胀视图`convertView == null`：

```
public View getView(int position, View convertView,ViewGroup parent) {
   View row= convertView;  
   if(row==null){
        LayoutInflater inflater = (LayoutInflater) context.getSystemService( Context.LAYOUT_INFLATER_SERVICE );
        row = inflater.inflate(R.layout.mylayout, parent, false);    
   }

   TextView txt =(TextView)row.findViewById(R.id.testorow);
   //(...) more code
} 
```

再次`getView()`调用时，它将 this`View`用作`convertView`，因此`convertView`可能不会`null`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T20:27:05.660

我认为在您的自定义适配器中`getView()` `View row`是`null`.

因此，此代码行为`txt.setText(el.get(position).tx);`您提供`NullPointerException`.

实际上你必须检查它`convertView`是否**是**。`NULL`

 **如果 `convertView`是，`NULL`那么您必须再次膨胀 XML 布局。

就像是，

```
View row = convertView;  
if(row == null)
{
 LayoutInflater inflater = (LayoutInflater) MainActivity.this.getSystemService( Context.LAYOUT_INFLATER_SERVICE );
 row = inflater.inflate(R.layout.row);    
} 
```****

# javascript - 菜单颜色和菜单问题

> ID：13634035
> 
> 赞同：2
> 
> 时间：2012-11-29T20:20:47.593
> 
> 标签：javascript, jquery, css, menu

所以我有两个问题。一个是，当我在“主页”上时，我可能会将鼠标悬停在“关于”上，这会使关于它的颜色应该是白色，但主页会返回默认的灰色，这是不应该的。我希望我悬停的菜单项是白色文本，周围有一个灰色框，而我当前所在的页面（主页）仅在文本中以白色点亮，周围没有框。此外，当我将鼠标移开（不悬停在任何菜单项上）时，白色会停留在我最后悬停的任何项目上。我希望我所在的当前页面（主页）上的文本是白色的。

我注意到的另一个问题是，当我移动到关于选项卡时，主页和关于按钮的“尺寸”（填充？）与我在主页选项卡上时不同。因为它在 css 文件中，所以它应该适用于所有页面，对吧？

我正在为我的网页设计课程做一个网站，我对此很陌生，但几乎没有复制+粘贴就可以重新创建兰博基尼网站。你会看到我对菜单系统的意思，我希望它看起来一样（将鼠标悬停在菜单项上会使字体变白并在其周围显示一个灰色框，而当前菜单项保持白色（文本）没有盒子）。基本上与兰博基尼主页上的下拉菜单相同（您在菜单项上，子菜单就这样下拉）。

**代码（菜单）CSS：**

```
#dolphincontainer{
    position:relative; 
    color:#E0E0E0;
    background:#000000;
    padding-top:40px;
    width:100%;
    font-family:Helvetica,Arial,Verdana,sans-serif;
}
#dolphinnav {
    position:relative;
    font-size:16px;
    text-transform:uppercase;
    font-weight:bold;
    background:#000000 url(images/dolphin_bg.gif) repeat-x bottom left;
    padding:0 0 0 60px;
}
#dolphinnav ul{
    margin:0;
    padding:0;
    list-style-type:none;
    width:auto;
    float:left;
}
#dolphinnav ul li {
    display:block;
    float:left;
    margin:0 1px;
}
#dolphinnav ul li a{
    display:block;
    float:left;
    color:#3D3D3D;
    text-decoration:none;
    padding:0 10 0 20px;
    height:10px;
}
#dolphinnav ul li a span {
    padding:12px 20px 0 0;
    height:21px;
    float:left;
}
#dolphinnav ul li a:hover {
    background:transparent url(images/dolphin_bg-OVER.gif) repeat-x bottom left;
}
#dolphinnav ul li a:hover span {
    display:block;
    width:auto;
    cursor:pointer;
}
#dolphinnav ul li a.current,#dolphinnav ul li a.current:hover{
    color:#fff;
    background:#000000 url(images/dolphin_left-ON.gif) no-repeat top left;
    line-height:275%;
}
#dolphinnav ul li a.current span {
    display:block;
    padding:0 20px 0 0;width:auto;
    background:#000000 url(images/dolphin_right-ON.gif) no-repeat top right;
    height:33px;
}
#dolphin_inner{
    color: white; 
    padding: 5px; 
    font-size: 80%; 
    height: 1em
}

#dolphin_inner a:link, 
#dolphin_inner a:visited, 
#dolphin_inner a:active{color: white}
#dolphin_inner a:hover{color: yellow}
body {background-color:#000000;} 
.innercontent{display: none;} 
```

**代码（菜单）HTML：**

```
<div id="dolphincontainer">
<div id="dolphinnav">
<ul>
<li><a href="index.html"><span>Home</span></a></li>
<li><a href="about.html"><span>About</span></a></li>
</ul>
</div>
<div id="dolphin_inner">
<div id="about" class="innercontent">   
</div>
</div>
</div>

<script type="text/javascript">

//dolphintabs.init("ID_OF_TAB_MENU_ITSELF", SELECTED_INDEX)
dolphintabs.init("dolphinnav", 0)

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T23:31:34.167

这很容易做到。[JSfiddle HERE](http://jsfiddle.net/tM2Uj/1/) 菜单看起来像这样。

```
<div> <ul>
    <li><a href="#" class="active">Home</a></li>
    <li><a href="#">Heritage</a></li>
    <li><a href="#">Models</a></li>
    <li><a href="#">Dealers</a></li>
    <li><a href="#">Experience</a></li>
    <li><a href="#">Store</a></li> </ul>​ </div> 
```

像这样的CSS。

```
body{
    background: black;
}
li{

    float: left;
    margin-right: 10px;
}
a{
    color: gray;
    text-decoration: none;
    padding: 5px 10px;
}
a:hover{
    color: white;
    background: gray;
}
a.active{
    color: white;
}
.hover{
    color: white;
} 
```

而像这样的JQuery

```
$(function(){
    $('a').hover(function(){
        $('a').removeClass('hover');
        $(this).addClass('hover');
    });
});​
​ 
```

我所做的是，当前页面有一个“活动”类。当它具有“活动”类时，我将其 css 颜色设为白色。使用其他一些 Jquery 代码，您可以检测您所在的页面。我没有在这里包含它......如果你真的想要它，也许稍后会。但最重要的是，当它在该页面上时，您可以将`"<a href='#'>"`一个类“激活”。

好的接下来...

使用 JQuery，我使用了“悬停”。如果您将鼠标悬停在链接上，或者在这种情况下是导航项目，我将其命名为“悬停”类。如果你看一下css“.hover”它有“color：white;”。如果您将鼠标悬停在一个项目上，它会删除“悬停”类，但我现在悬停的项目，我给它一个“悬停”类。

希望它有所帮助。

# c# - 使用 ObjectListView 自定义排序

> ID：13634041
> 
> 赞同：2
> 
> 时间：2012-11-29T20:20:55.597
> 
> 标签：c#, sorting, objectlistview

假设我有一个包含 3 列的 objectListView

```
ArticleNumber | OrderNumber | Status
 8080         | 123.456.789 | Delivered
 80           | 456.789.101 | Pending
 901          | 11.111.111  | Delivered 
```

使用自动排序，较小的文章编号将位于较大的文章编号之下，因此它会排序 8080、80、901 或 901、80、8080，但我希望最小的编号在顶部。

在 OrderNumber 上相同。

并且状态不起作用。开，它只是在我按下 ColumnHeader 时对 ArticleNumber 进行排序，所以我想根据文本对 Status 进行排序。

我想我需要一个 CustomSorter 来完成这项任务，但我找不到如何使用它，也找不到一个很好的例子，OLV 的食谱对我没有帮助。

你有我的例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:12:11.987

使用自定义排序器的示例：

```
MyOlv.CustomSorter = delegate(OLVColumn column, SortOrder order) {
    // check which column is about to be sorted and set your custom comparer
    if (column == ArticleNumber) {
        MyOlv.ListViewItemSorter = new ArticleNumberComparer(order);
    }
};          

class ArticleNumberComparer : IComparer {
    SortOrder _Order;

    public ArticleNumberComparer(SortOrder order) {
        _Order = order;
    }

    public int Compare(object x, object y) {
         // perform you desired comparison depending on the _Order
    }
} 
```

请注意，Compare() 中的 x 和 y 属于 OLVListItem 类型。您可以根据需要访问 RowObject 字段。

# php - 为什么 PHP 总是重定向到同一页面？

> ID：13634043
> 
> 赞同：0
> 
> 时间：2012-11-29T20:21:00.277
> 
> 标签：php, if-statement

我已经编写了这个小的 php 页面，它应该通过 url 中的值重定向用户。但是脚本似乎不起作用。我错过了什么？

```
<?php
if ($choice=="stb")
  $redirect="http://www.webpage1.com/";

    elseif ($choice=="player")
        $redirect="http://www.alternativewebpage.com/"; 

    else
        $redirect="http://www.world-tvpro.com/";

header( 'Location: '.$redirect ) ;
?> 
```

如果页面作为 script.php 保存在我的服务器上，我会像这样执行它：[http://mypage.com/script.php?choice=stb](http://mypage.com/script.php?choice=stb) .. 预期然后将被重定向到 www.webpage1.com，但是无论我写什么，我都会被重定向到[http://www.world-tvpro.com/ 。](http://www.world-tvpro.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:23:36.427

您依赖于一个名为 的功能`register_globals`，这很危险。不要让查询字符串参数在脚本中设置全局变量，而是使用`$_GET`超全局变量：

```
if ( isset($_GET['choice']) && $_GET['choice'] === 'stb' ) { 
```

例如。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:23:11.880

您需要使用`$_GET['choice']`（或`isset($_GET['choice']) ? $_GET['choice'] : null`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T20:23:51.617

这似乎对我有用，有时不在您的陈述周围使用 { } 可能会导致问题。

```
<?php
if ($_GET['choice'] == "stb")
{
    $redirect="http://www.webpage1.com/";
} elseif ($_GET['choice'] == "player") {
    $redirect="http://www.alternativewebpage.com/"; 
} else {
    $redirect="http://www.world-tvpro.com/";
}
header( 'Location: '.$redirect );
?> 
```

此外， $_GET['choice'] 是您从 url 查询字符串中获取变量的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T20:25:50.600

PHP 使用一系列超级全局数组将信息从客户端传递到服务器。它们如下：

```
 $_GET, $_POST, $_COOKIE and $_REQUEST 
```

在您的情况下，由于您将 url 中的值作为查询参数传递，您应该使用 $_GET 检索选择：

```
$choice = $_GET['choice']; 
```

注意：它也可以使用 $_REQUEST 检索，因为 request 是一个超级全局数组，包含 $_GET、$_POST 和 $_COOKIE 的所有值。

您只需使用请求即可执行与上述相同的操作：

```
$choice = $_REQUEST['choice']; 
```

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T20:26:00.747

如果`$choice = isset($_GET['choice']) ? $_GET['choice'] : false;`在整个`IF`语句上方添加：，那么代码应该没问题。

此外，虽然 IF 语句很好，但 case 语句也可以很好地工作：

```
$choice = isset($_GET['choice']) ? $_GET['choice'] : false;
switch($choice){
    case "stb":
        $redirect = 'http://www.webpage1.com/'; break;
    case "player":
        $redirect = 'http://www.alternativewebpage.com/'; break;
    default:
        $redirect = 'http://www.world-tvpro.com/';
}
header("Location: ".$redirect);
exit; 
```

# javascript - uglify js错误意外令牌eof“未定义”

> ID：13634049
> 
> 赞同：7
> 
> 时间：2012-11-29T20:21:19.073
> 
> 标签：javascript, npm, minify, concat, uglifyjs

所以我使用 npm install uglify-js 安装了 npm

我运行一个命令：

```
cat file1.js file2.js .. fileN.js | uglifyjs -o files.min.js 
```

我得到这个错误：

```
WARN: ERROR: Unexpected token eof «undefined», expected punc «,» [-:630,15]

/usr/local/lib/node_modules/uglify-js/lib/parse.js:199
    throw new JS_Parse_Error(message, line, col, pos);
          ^
Error
    at new JS_Parse_Error (/usr/local/lib/node_modules/uglify-js/lib/parse.js:185:18)
    at js_error (/usr/local/lib/node_modules/uglify-js/lib/parse.js:199:11)
    at croak (/usr/local/lib/node_modules/uglify-js/lib/parse.js:630:9)
    at token_error (/usr/local/lib/node_modules/uglify-js/lib/parse.js:638:9)
    at expect_token (/usr/local/lib/node_modules/uglify-js/lib/parse.js:651:9)
    at expect (/usr/local/lib/node_modules/uglify-js/lib/parse.js:654:36)
    at ctor.argnames (/usr/local/lib/node_modules/uglify-js/lib/parse.js:897:52)
    at function_ (/usr/local/lib/node_modules/uglify-js/lib/parse.js:902:15)
    at expr_atom (/usr/local/lib/node_modules/uglify-js/lib/parse.js:1114:24)
    at maybe_unary (/usr/local/lib/node_modules/uglify-js/lib/parse.js:1278:19) 
```

关于这是什么或我应该如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T20:24:16.167

> 错误：意外的标记 eof «undefined»，预期的双关语 «,» [-:630,15]

我相信这意味着您`,`在 JS 代码中缺少某个地方，可能在第 630 行，靠近字符 15。

因此，如果您连接所有 JS 文件的源代码，并查看第 630 行，您可能会发现解析器认为缺少逗号的位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-06-10T18:58:32.537

我用 ember 遇到了同样的错误：

```
Build Error (UglifyWriter)
Unexpected token: eof (undefined) 
```

解决方案是更新`ember-cli-moment-shim`到版本`v3.8.0`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T22:31:23.553

这也可能是因为从标准输入读取时 UglifyJS 中的错误。有关详细信息，请参阅[https://github.com/mishoo/UglifyJS2/issues/85](https://github.com/mishoo/UglifyJS2/issues/85)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-20T13:34:18.710

就我而言，我忘记关闭我的 javascript 中的一些打开的函数。确保您也正确关闭了所有分号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-20T09:58:39.113

也面临同样的问题。但是，就我而言，我可以打开有问题的文件并保存它，然后 uglify 将毫无问题地运行。

记录[在这里](https://github.com/gruntjs/grunt-contrib-uglify/issues/406)

解决方法：我在调用 uglify 之前添加了一个[lineending](https://www.npmjs.com/package/grunt-lineending)任务以显式转换行尾。现在 uglify 运行没有问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-01T17:02:16.423

我也有这个错误。在我的本地机器上成功编译时，我的项目在 docker build 上出现错误。因为节点的版本。我通过将节点依赖项赋予 package.json 文件解决了这个问题。

这个版本解决了我的问题：
“node”：“12.22.3”

# php - 多次执行相同的 php 脚本而不会超时

> ID：13634066
> 
> 赞同：0
> 
> 时间：2012-11-29T20:22:24.533
> 
> 标签：php, mysql, apache, reporting

我正在开发一个应该显示客户报告的系统。这些报告需要在显示实际报告之前进行先前的计算。

由于计算过程有时繁琐且冗长，有时报表使用的数据会被刷新，因此用户必须能够重新计算这些报表。由于这些原因，生成报告的脚本与实际显示报告的脚本是分开的。

简而言之，我有两个脚本，假设它们被称为“generateReport.php”和“showReport.php”。

当用户单击客户端查看其报告时，“showReport.php”会检查它需要的数据是否已经生成，如果已经生成，它将显示该报告。如果数据不存在，它将浏览器转发到“generateReport.php”，完成后，它将浏览器转发到“showReport.php”

当用户单击两个客户端并且它们都需要生成数据时，就会出现问题。

第一个点击的客户端会进入“generateReport.php”，用户会看到一个让他/她了解整个过程的栏。虽然应该生成第二个客户端的页面只是停留在那里，等待。

如果第一个客户端花费的时间太长，那么第二个客户端显然会超时并停留在那里。

我知道，由于我在同一个浏览器的两个选项卡上点击了相同的 php（'generateReport.php'），apache 不会同时处理这两个请求，所以有没有办法避免第二个（可能还有第三个、第四个等）。 ) 窗口不超时？

注意：'generateReport.php' 和 'showReport.php' 有 set_time_limit(0); 只是为了测试，它显然什么都不做。

注意2：我可以在我的托管环境中访问 php.ini

注意3：对于冗长/唯一无聊的文字帖子感到抱歉

提前谢谢！

**编辑1：**

谢谢你的回复。

*   请求由用户单击锚标记由 HTTP GET 生成。
*   header("Location: ...") 用于将用户从 generateReport 带到 showReport。
*   我指的是浏览器选项卡，是的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:36:57.427

谢谢大家！

我们决定在空闲时间运行那些长时间的任务，并在请求时生成数据。

无论如何，Web 响应时间都不应该花那么长的时间，而且 Web 服务器不应该处理那些漫长的过程。

再次感谢大家的支持！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T05:10:11.950

Apache 将多次运行您的脚本；为什么会在乎？

如果生成报告的时间超过 2 分钟，浏览器本身通常会超时并停止等待。

这里的典型技巧是让“生成”进程在单独的线程中运行，这样它就可以在自己的时间内完成。

我不知道为什么第二个用户被阻止，但我认为你的脚本中有一些东西被阻止。

# javascript - 在 Kendo StockChart 中重新加载数据的问题

> ID：13634070
> 
> 赞同：0
> 
> 时间：2012-11-29T20:22:48.263
> 
> 标签：javascript, kendo-ui

我在重新加载剑道股票图表数据时遇到问题。

```
$('#<chartId>').data('kendoStockChart').dataSource.data(<newData>) 
```

使用上述语句重新加载图表数据不起作用，如下面的 JSBin 链接：

[显示问题的 Kendo Stockchart 示例](http://jsbin.com/izuyoz/1/edit)

单击此示例中图表下方的“刷新图表”按钮，并注意顶部图表中的系列消失了。
我在其他图表（饼图/线）上试过这个，重新加载数据工作正常。

有没有其他方法可以重新加载这个有效的图表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:41:57.787

实际上，图表已成功反弹/重绘，但导航限制正在与您开玩笑。

在不使用它们的情况下检查[这个](http://jsbin.com/izuyoz/4/edit)小提琴。

# c# - 通过蓝牙读取原始数据

> ID：13634072
> 
> 赞同：4
> 
> 时间：2012-11-29T20:22:52.737
> 
> 标签：c#, .net, bluetooth, 32feet

我有一个数字人机接口设备，我正在尝试使用 32feet.net 连接它，这样我就可以从中读取输入数据并在我的应用程序中处理输出。我以前从未用蓝牙编程过，我边走边学。

我可以使用 microsoft/broadcom 堆栈将我的设备连接到 Windows 7 没问题。我也可以使用 32feet.net 发现该设备，但是当我尝试连接它时出现错误。我确保使用 BluetoothRadio.IsSupported 支持我的堆栈这是一个代码片段：

```
 var client = new BluetoothClient();
 var dlg = new SelectBluetoothDeviceDialog();
 DialogResult result = dlg.ShowDialog(this);
 if (result != DialogResult.OK)
 {
     return;
 }
 BluetoothDeviceInfo device = dlg.SelectedDevice;
 BluetoothAddress addr = device.DeviceAddress;
 Console.WriteLine(device.DeviceName);
 Guid serviceClass = BluetoothService.HumanInterfaceDevice;
 client.Connect(new BluetoothEndPoint(addr, serviceClass)); 
```

最后一行导致以下错误： System.dll 中发生“System.Net.Sockets.SocketException”类型的第一次机会异常

我也用client.Connect尝试了其他一些方法。我尝试使用 DiscoverDevices 获取 DeviceInfo 数组并手动从该数组中选择设备并连接到它。我尝试将 serviceClass 设置为 Empty，因为这是在我使用 DeviceInfo.ClassOfDevice.Service 时出现的。我已经能够使用 DeviceInfo.SetServiceState(BluetoothService.HumanInterfaceDevice, true) 将设备连接到 Windows，但无法从中获取流。

即使我可以在设备连接到 Windows 后从设备获取数据流，那也没问题。我的目标很简单，就是能够像按下按钮一样读取设备的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:21:55.263

试试这个：

```
var client = new BluetoothClient();
var dlg = new SelectBluetoothDeviceDialog();
DialogResult result = dlg.ShowDialog(this);
if (result != DialogResult.OK)
{
    return;
}
BluetoothDeviceInfo device = dlg.SelectedDevice;
BluetoothAddress addr = device.DeviceAddress;
Console.WriteLine(device.DeviceName);
BluetoothSecurity.PairRequest(addr, "Whatever pin");
device.SetServiceState(BluetoothService.HumanInterfaceDevice, true);
Thread.Sleep(100); // Just in case
if (device.InstalledServices.Length == 0)
{
    // I wouldn't know why it doesn't install the service
}
client.Connect(addr, BluetoothService.HumanInterfaceDevice); 
```

无论如何，我都不是专家，但对我来说：

1.  如果设备未显示在蓝牙设备中，我需要**配对设备。**您只需对通过蓝牙无线电发现的每台新设备执行一次此操作，或者如果您卸载它，我每次都会执行此操作，以防选择了新设备。
2.  **启动服务**，一旦我这样做，设备将显示串行端口（在您的情况下为 HID）在设备属性的“服务”下可用。
3.  **连接**

在每个阶段都需要发生一些事情：

1.  确保设备出现在“控制面板”的“蓝牙设备”中。
2.  在设备“属性”内的“服务”选项卡下，它应该显示“人机界面”或其他内容。
3.  该服务应该打勾。

* * *

另一方面，您得到的异常确实很神秘，但这只是让我想到设备是否尚未连接到某些东西。如果您检查“device.Connected”，它必须返回 false，否则您将永远无法连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T21:08:50.433

阿图罗的回答是正确的。使用**SetServiceState**（或者**BluetoothSecurity.PairRequest**会自动执行）让蓝牙堆栈处理低级 HID 通信并通过 Windows 的 HID API 公开 HID 事件。然后您的代码可以使用该 API。

详细信息：

a) 蓝牙上的 HID 不使用 RFCOMM，而这正是 BluetoothClient 使用的。有关每个配置文件/服务使用的协议的更多信息，请参阅[蓝牙配置文件和 32feet.NET](http://www.alanjmcf.me.uk/comms/bluetooth/Bluetooth%20Profiles%20and%2032feet.NET.html)。没有简单的 L2CAP API 可以与 Microsoft 堆栈一起使用，因此那里没有对 L2CapClient 的支持（还没有？）。

b) 如果（可能）使用 L2CapClient，则需要读取和写入原始 HID 数据并解码和解析 HID 帧。相反，您应该让蓝牙堆栈连接到设备并使用 Windows HID API 来查看按钮按下情况。在我的 32feet.NET 文档中，第 3 点位于[http://32feet.codeplex.com/documentation](http://32feet.codeplex.com/documentation)

c) 这*显然是*一些故障，例如 PS3 蓝牙控制器，这意味着 Windows HID 服务无法使用它。在这种情况下，人们必须直接连接到设备。 **显然...**

# php - PHP - 一次尝试中的许多错误

> ID：13634075
> 
> 赞同：0
> 
> 时间：2012-11-29T20:23:05.923
> 
> 标签：php

我想将通知转换为异常。我将整个网站放在 try-catch 块中 - 每个错误（在 try 块中）都会调用 set_error_handler() 方法，该方法将抛出新的 ErrorException。然后捕获异常，并显示正确的消息。

接下来应该发生的是 - 应该执行 try 块内 E_NOTICE 之后的所有内容。当下一个错误发生时，一切都会以同样的方式再次发生，直到 try 块结束。

但是，在捕获到异常后，try 块似乎会中断。

如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T20:31:46.780

在引发异常的地方，执行在`try`块中停止。如果存在与异常（或所有异常）匹配的捕获，则运行该块。此时，程序在 catch*之后*继续（如果它是程序的结尾，则导致它退出）。它无法在 try 部分中从中断处继续。

抛出异常是不可恢复的，直到它被捕获（如果是）。如果您想从中恢复，您必须在您希望代码恢复的那一点*之前捕获它。*因此，您只需要一次以上的尝试/捕获，而不是整个站点的一次。或者不要在每个 E_NOTICE 上抛出异常。我能问一下为什么您首先希望通知生成异常吗？可能有更好的方法来完成你想要做的事情。

# heroku - 让应用程序确定它是否在 Heroku 上运行

> ID：13634078
> 
> 赞同：1
> 
> 时间：2012-11-29T20:23:13.210
> 
> 标签：heroku, environment-variables

我遇到了一种情况，我正在开发的应用程序需要确定它是在 Heroku 上运行还是在本地运行。（旁注，但 Heroku 上的 Imagemagick 似乎不尊重 -format 选项，因此返回的结果与本地开发人员不同。与问题不完全相关）。

Heroku 上是否有任何本机环境变量可供应用程序使用来确定这一点？

我已经通过 Heroku 的文档进行了相当多的搜索和阅读，但我没有找到任何关于此的信息。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T20:56:53.697

您可以使用任何数量的启发式方法来确定您是否在 Heroku 上以合理的准确度运行，但它们大多是 hack（查看目录结构等）。我不知道系统提供的任何简单的“这是 Heroku”环境变量。

在这种情况下，“正确”的做法是实际确定与您的应用程序相关的功能差异是什么，然后专门针对这些差异进行测试。例如，如果您完全担心 Imagemagick 的工作方式不同，那么您应该找出它工作方式不同的原因并进行测试（是否缺少必需的库？Heroku 是否使用不同的版本？等等）即使您部署到另一个不是 Heroku 但有同样问题的主机，你的应用程序会识别出来。

如果这不是一个选项，您可以随时设置您喜欢使用的任何环境变量`heroku config`。

# php - 如何在不提交表单的情况下获取 html 中选项/文本的值

> ID：13634080
> 
> 赞同：0
> 
> 时间：2012-11-29T20:23:15.500
> 
> 标签：php, javascript, html, mysql, ajax

我想在为查询编写的表单中使用文本框的值。这是我的代码。

```
<form method="post" action="#">
    <label>Subject</label>
    //I can use option also here
    <input type="text" maxlength="30" name="subject" />
    <?php
        $query=mysql_query("SELECT * FROM STUDENT where subject="textbox.text"");
    ?>
</form> 
```

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:25:50.750

实现此目的的唯一方法是使用 AJAX 风格的调用或提交表单。

您的服务器需要下拉列表中的信息才能提供响应。如果 Web 浏览器从不提交另一个请求（通过 AJAX 或表单提交），则服务器无法对其采取行动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T21:23:55.960

你可以投票 document.getElementsByName("subject")[0].value)

```
yourFunction(document.getElementsByName("subject")[0].value); 
```

您的函数可以在其中插入脚本标记、生成 XMLHttpRequest 等...

编辑：对于旧版本的 IE，使用 ActiveXObject("Microsoft.XMLHTTP") 代替 XMLHttpRequest()

# jquery - 使用jquery获取迭代中元素的id

> ID：13634083
> 
> 赞同：2
> 
> 时间：2012-11-29T20:23:24.750
> 
> 标签：jquery, struts2

最好用代码来解释问题。

```
<s:iterator value="collection" status="stat">
...
<input 
  id="sendEmailButton${stat.count}" 
  value="<s:text name="label.send.email"/>" 
  type="button" 
  data-action="sendEmail"/>
...
</s:iterator>

...
<script>
...
$(function(){
  $('#sendEmailButton').unbind('click');
...
  });
</script> 
```

如何在 jquery 中获取该特定按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:32:18.550

试试`attribute starts with selector`..

```
$('[id^="sendEmailButton"]') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T22:04:16.923

从选择器*开始*工作得很好。如果您想要另一种选择，您可以通过您的 data-action 属性进行选择：

```
$('input[data-action=sendEmail]') 
```

# ruby-on-rails - 如何使用货币轨道显示带有符号的价格

> ID：13634084
> 
> 赞同：2
> 
> 时间：2012-11-29T20:23:28.537
> 
> 标签：ruby-on-rails, currency

鉴于这个简单的`Money`对象查询

```
Money.new(1000, "USD").to_s
=> "10.00" 
```

如何使用其符号显示值？我知道我可以打电话`money_object.symbol`，但有些货币将符号放在价值之前和其他人之后。我很确定应该已经有一些简单的方法了吗？通过阅读文档没有找到它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-22T05:09:13.997

如果你正在使用[`money-rails`](https://github.com/RubyMoney/money-rails)，你有很多助手：

*   currency_symbol 辅助方法

    ```
    <%= currency_symbol %> 
    ```

这将渲染一个带有默认货币符号的 span dom 元素。

*   humanized_money 辅助方法

    ```
    <%= humanized_money @money_object %> 
    ```

如果它只包含零（使用 :no_cents_fi_whole 标志），这将呈现一个没有货币符号和没有美分部分的格式化货币值。

*   使用符号助手人性化

    ```
    <%= humanized_money_with_symbol @money_object %> 
    ```

这将呈现一个格式化的货币值，包括货币符号，如果它只包含零，则不包含美分部分。

*   获得没有美分部分的货币价值

    ```
    <%= money_without_cents @money_object %> 
    ```

这将呈现一个没有货币符号和美分部分的格式化货币值。

*   获得没有美分部分并包括货币符号的货币价值

    ```
    <%= money_without_cents_and_with_symbol @money_object %> 
    ```

这将呈现一个包含货币符号但不包含美分部分的格式化货币值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-29T20:29:48.040

[`ActionView::Helpers::NumberHelper`](http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_currency)有`number_to_currency`哪个应该做的伎俩。

# objective-c - Segued 时如何获取我的 UITableViewController 实例？

> ID：13634091
> 
> 赞同：1
> 
> 时间：2012-11-29T20:24:05.033
> 
> 标签：objective-c, ios, ipad, uinavigationcontroller, uitableview

我有个问题。我有一个实现`DatasourceDelegate`for a的类`UITableView`。

我`TableViewController`从一个弹出窗口中分离出来，我已经`UIBarButton`在工具栏中设置了一个。（此工具栏是 a 的一部分`UINavigationController`）。

我现在的问题是我不如何将我的`datasource`对象传递给我的`UITableviewController`. 所以问题是。我怎样才能`UITableviewController`从我的导航控制器的工具栏中获取已被隔离的实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:54:47.317

在前一个 viewController 的 prepareForSeque 方法中可以访问 segue.destinationViewController。然后将其转换为您需要的内容`(UITableViewController *)segue.destinationViewController`，以便您可以访问自定义方法来设置数据对象或设置数据委托

就像是

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
      SomeClasViewController *vc = [segue destinationViewController];
      [vc setDataObject:SomeDataObject];
} 
```

# javascript - 使用 JavaScript 按顺序淡入淡出 div

> ID：13634093
> 
> 赞同：0
> 
> 时间：2012-11-29T20:24:09.740
> 
> 标签：javascript, jquery, html, css, onclick

好的。我仍在努力让我的工具提示在定时转换中淡入淡出。一点帮助我们很棒！

所以我希望我的“推子”div 开始 onClick 一个按钮淡入，持续 5 秒，然后按顺序淡出。就像我的新 UI 的快速定时教程一样。

这是我的代码：

JS

```
function fadeLoop() {

    var counter = 0,
        divs = $('.fader').hide(), // Selecting fader divs instead of each by name.
        dur = 500;

    function showDiv() {
        divs.fadeOut(dur) // hide all divs
            .filter(function(index) {
                return index == counter % divs.length;
            }) // figure out correct div to show
            .delay(dur) // delay until fadeout is finished
            .fadeIn(dur); // and show it
        counter++;
    }; // function to loop through divs and show correct div
    showDiv(); // show first div    
    return setInterval(function() {  // return interval so we can stop the loop
        showDiv(); // show next div
    }, 5 * 1000); // do this every 5 seconds    
};

$(function() {
    var interval;

    $("#start").click(function() {
        if (interval == undefined){
            interval = fadeLoop();
            $(this).val("Stop");
        }
        else{
            clearInterval(interval);
            $(this).val("Start");
            interval = undefined;
        }
    });
}); 
```

HTML

```
<div class="fader">
    <div id="tutorial1" class="tutorial createquestion1">
        <div class="arrow-w" style="font-size:1em;" >
        </div>
        &nbsp;Start by creating a title and selecting a folder for your question to be stored in.
    </div>
</div>
<div class="fader">
    <div id="tutorial2" class="tutorial createquestion2">
        <div class="arrow-w" style="font-size:1em;" >
        </div>
        &nbsp;Categories are key to your reporting effectiveness, be sure to include categories that relate to this question.
    </div>
</div>
<div class="fader">
    <div id="tutorial3" class="tutorial createquestion3">
        <div class="arrow-w" style="font-size:1em;" >
        </div>
        &nbsp;Select your options and/or upload an attachment (file, video or audio).
    </div>
</div>
<div class="fader">
    <div id="tutorial4" class="tutorial createquestion4">
        <div class="arrow-n" style="font-size:1em;" >
        </div><br />
        To create questions easier update your question preferences in your account area options.&nbsp;
    </div>
</div>
<div class="fader">
    <div id="tutorial5" class="tutorial createquestion5">
        <div class="arrow-w" style="font-size:1em;" >
        </div>
        &nbsp;Your rationale can be used to provide feedback to students on this question and you also can use internal comment to track notes on changes, updates, textbook information and more.
    </div>
</div>
<div class="fader">
    <div id="tutorial6" class="tutorial createquestion6">Write your questions, answers and you are ready to go.&nbsp;
        <div class="arrow-e" style="font-size:1em;" >
    </div>
</div>
<input type="button" value="Start" name="Start" /> 
```

CSS

```
.tutorial {
    display: table;
    border: 4px solid #8C3087;
    -webkit-border-radius: 15px;
    -moz-border-radius: 15px;
    border-radius: 15px;
    -moz-box-shadow:1px 1px 3px 2px #ccc;
    -webkit-box-shadow: 1px 1px 3px 2px #ccc;
    box-shadow: 1px 1px 3px 2px #ccc;
    position:absolute;
    padding: 11px;
    font-family: 'Archivo Narrow', sans-serif;
    background-color:#ECA100;
    width:200;
    z-index:2000;
    font-size:12pt; 
    color:#000;
    vertical-align:top;
}

.arrow-n,
.arrow-e,
.arrow-s,
.arrow-w {
  /*
   * In Internet Explorer, The"border-style: dashed" will never be
   * rendered unless "(width * 5) >= border-width" is true.
   * Since "width" is set to "0", the "dashed-border" remains
   * invisible to the user, which renders the border just like how
   * "border-color: transparent" renders.
   */
    border-style: dashed;
    border-color: transparent;
    border-width: 0.53em;
    display: -moz-inline-box;
    display: inline-block;
  /* Use font-size to control the size of the arrow. */
    font-size: 100px;
    height: 0;
    line-height: 0;
    position: relative;
    width: 0;
    text-align:left;
}

.arrow-n {
    border-bottom-width: 1em;
    border-bottom-style: solid;
    border-bottom-color: #8C3087;
    bottom: 0.25em;
}

.arrow-e {
    border-left-width: 1em;
    border-left-style: solid;
    border-left-color: #8C3087;
    left: 0.25em;
}

.arrow-s {
    border-top-width: 1em;
    border-top-style: solid;
    border-top-color: #8C3087;
    top: 0.25em;
}

.arrow-w {
    border-right-width: 1em;
    border-right-style: solid;
    border-right-color: #8C3087;
    right: 0.25em;
}

/* Create Multiple Choice Question */
.createquestion1 {
    top:140px;
    left:320px;
    text-align:left;
}
.createquestion2 {
    top:240px;
    left:320px;
    text-align:left;
}
.createquestion3 {
    top:340px;
    left:320px;
    text-align:left;
}
.createquestion4 {
    top:60px;
    right:10px;
    text-align:right !important; 
}
.createquestion5 {
    top:520px;
    left:320px;
    text-align:left;
}
.createquestion6 {
    top:140px;
    left:100px;
    text-align:right !important;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:39:24.740

如果您希望它工作，您的 html 需要与 javascript 对应。

这是一个工作版本：[jsFiddle](http://jsfiddle.net/NpNXr/6/)

**HTML**

```
<div class="fader tutorial" id="createquestion1">
    <div class="arrow-w" style="font-size:1em;"></div>
    &nbsp;Start by creating a title and selecting a folder for your question to be stored in.
</div>

<div class="fader tutorial" id="createquestion2">
    <div class="arrow-w" style="font-size:1em;"></div>
    &nbsp;Categories are key to your reporting effectiveness, be sure to include categories that relate to this question.
</div>

<div class="fader tutorial" id="createquestion3">
    <div class="arrow-w" style="font-size:1em;"></div>
    &nbsp;Select your options and/or upload an attachment (file, video or audio).
</div>

<div class="fader tutorial" id="createquestion4">
    <div class="arrow-w" style="font-size:1em;"></div>
   To create questions easier update your question preferences in your account area options.&nbsp
</div>

<div class="fader tutorial" id="createquestion5">
    <div class="arrow-w" style="font-size:1em;"></div>
    &nbsp;Your rationale can be used to provide feedback to students on this question and you also can use internal comment to track notes on changes, updates, textbook information and more.
</div>

<div class="fader tutorial" id="createquestion6">
    <div class="arrow-w" style="font-size:1em;"></div>
   Write your questions, answers and you are ready to go.&nbsp;
</div>

<input type="button" value="Start" id="start"/> 
```

​<strong>CSS

```
#start{
    right:1em;
    top:1em;
    padding:1em;
}

.tutorial {
    display: table;
    border: 4px solid #8C3087;
    -webkit-border-radius: 15px;
    -moz-border-radius: 15px;
    border-radius: 15px;
    -moz-box-shadow:1px 1px 3px 2px #ccc;
    -webkit-box-shadow: 1px 1px 3px 2px #ccc;
    box-shadow: 1px 1px 3px 2px #ccc;
    position:absolute;
    padding: 11px;
    font-family: 'Archivo Narrow', sans-serif;
    background-color:#ECA100;
    width:200;
    z-index:2000;
    font-size:12pt; 
    color:#000;
    vertical-align:top;
}

.arrow-n,
.arrow-e,
.arrow-s,
.arrow-w {
  /*
   * In Internet Explorer, The"border-style: dashed" will never be
   * rendered unless "(width * 5) >= border-width" is true.
   * Since "width" is set to "0", the "dashed-border" remains
   * invisible to the user, which renders the border just like how
   * "border-color: transparent" renders.
   */
    border-style: dashed;
    border-color: transparent;
    border-width: 0.53em;
    display: -moz-inline-box;
    display: inline-block;
  /* Use font-size to control the size of the arrow. */
    font-size: 100px;
    height: 0;
    line-height: 0;
    position: relative;
    width: 0;
    text-align:left;
}

.arrow-n {
    border-bottom-width: 1em;
    border-bottom-style: solid;
    border-bottom-color: #8C3087;
    bottom: 0.25em;
}

.arrow-e {
    border-left-width: 1em;
    border-left-style: solid;
    border-left-color: #8C3087;
    left: 0.25em;
}

.arrow-s {
    border-top-width: 1em;
    border-top-style: solid;
    border-top-color: #8C3087;
    top: 0.25em;
}

.arrow-w {
    border-right-width: 1em;
    border-right-style: solid;
    border-right-color: #8C3087;
    right: 0.25em;
}

/* Create Multiple Choice Question */
#createquestion1 {
    top:140px;
    left:320px;
    text-align:left;
}
#createquestion2 {
    top:240px;
    left:320px;
    text-align:left;
}
#createquestion3 {
    top:340px;
    left:320px;
    text-align:left;
}
#createquestion4 {
    top:60px;
    right:10px;
    text-align:right !important; 
}
#createquestion5 {
    top:520px;
    left:320px;
    text-align:left;
}
#createquestion6 {
    top:140px;
    left:100px;
    text-align:right !important;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:36:49.367

您可以首先向您的按钮添加一个 ID，以便 jQuery 单击处理程序注册

```
<input type="button" value="Start" name="Start" id="start" /> 
```

# c# - 将项目添加到 KeyValuePairs 的深层列表

> ID：13634094
> 
> 赞同：4
> 
> 时间：2012-11-29T20:24:14.123
> 
> 标签：c#, .net, list

我写了一个很深的清单：

```
public static List<KeyValuePair<string,List<KeyValuePair<string,List<KeyValuePair<string,bool>>>>>> ListBoxes = new List<KeyValuePair<string,List<KeyValuePair<string,List<KeyValuePair<string,bool>>>>>>(); 
```

有人知道如何将任何项目添加到此列表中吗？
例如： `("A",LIST("B",LIST("C",true)))`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T20:59:39.613

简单的：

```
ListBoxes.Add(
    new KeyValuePair<string, List<KeyValuePair<string, List<KeyValuePair<string, bool>>>>>("A",
        new List<KeyValuePair<string, List<KeyValuePair<string, bool>>>>
        {
            new KeyValuePair<string,List<KeyValuePair<string,bool>>>("B", 
                new List<KeyValuePair<string,bool>>() {
                    new KeyValuePair<string,bool>("C", true)
                }
            )
        }
    )
); 
```

看起来你可以使用一些辅助方法或其他东西。

**编辑**

如果您创建一个简单的扩展方法，那么该任务可能会变得更具可读性。

```
public static List<KeyValuePair<TKey, TValue>> AddKVP<TKey, TValue>(this List<KeyValuePair<TKey, TValue>> self, TKey key, TValue value)
{
    self.Add(
        new KeyValuePair<TKey, TValue>(key, value)
    );

    // return self for "fluent" like syntax
    return self;
}

var c = new List<KeyValuePair<string, bool>>().AddKVP("c", true);
var b = new List<KeyValuePair<string, List<KeyValuePair<string, bool>>>>().AddKVP("b", c);
var a = new List<KeyValuePair<string, List<KeyValuePair<string, List<KeyValuePair<string, bool>>>>>>().AddKVP("a", b); 
```

**编辑#2**

如果您定义一个简单的类型，那么它会有所帮助：

```
public class KVPList<T> : List<KeyValuePair<string, T>> { }

public static KVPList<TValue> AddKVP<TValue>(this KVPList<TValue> self, string key, TValue value)
{
    self.Add(new KeyValuePair<string, TValue>(key, value));
    return self;
}

var ListBoxes = new KVPList<KVPList<KVPList<bool>>>()
   .AddKVP("A", new KVPList<KVPList<bool>>()
       .AddKVP("B", new KVPList<bool>()
           .AddKVP("C", true))); 
```

**编辑#3**

再来一个，我保证我会停下来。如果在类型上定义“添加”，则可以使用隐式初始化：

```
public class KVPList<T> : List<KeyValuePair<string, T>> 
{
    public void Add(string key, T value)
    {
        base.Add(new KeyValuePair<string,T>(key, value));
    }
}

var abc = new KVPList<KVPList<KVPList<bool>>> { 
    { "A", new KVPList<KVPList<bool>> {
        { "B", new KVPList<bool> {
            { "C", true }}
        }}
    }}; 
```

# vb.net - 遍历通用列表：如果字符串包含数字，则添加到列表并对其进行排序

> ID：13634095
> 
> 赞同：0
> 
> 时间：2012-11-29T20:24:13.940
> 
> 标签：vb.net, list

我想获取一个通用列表并提取包含数字的字符串并将其添加到新列表中。我也想整理一下。

```
Sub list()
     Dim tests New List(Of String)
     test.Add("1 car")
     test.Add("8 boat")
     test.ForEach(.............)
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:43:23.910

有一段时间没有做过 VB.NET，也不熟悉它们声明列表的语法，但在 C# 中你可以这样做。可能效率不高，您可以转换以获得一个想法：

```
var a = new List<string> { "2 good morning", "1 hello", "Nope" };
var b = new List<string>();
            int x;
            foreach (string s in a)
            {
                string[] parts = s.Split(' ');
                foreach (string part in parts)
                {
                    if (int.TryParse(part, out x))
                    {
                        b.Add(s); // Adding the Entire word here
                    }
                }
            }
            b.Sort();

            b.ForEach(ele => Console.WriteLine(ele));

            Console.Read();

Will Produce:
1 hello
2 good morning 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T21:26:39.213

根据您的示例，假设可能的数字是第一个字符：

```
 Dim listOne As New List(Of String)({"1cat", "2dog", "monkey", "1mouse", "blah"})

 Dim listTwo = listOne.Where(Function(x) IsNumeric(x.Substring(0, 1))).ToList

 listTwo.Sort() 
```

# c# - C#在未提升的应用程序中确定进程所有者

> ID：13634098
> 
> 赞同：0
> 
> 时间：2012-11-29T20:24:27.000
> 
> 标签：c#, process, owner

我找到了一些可以告诉我进程所有者的代码。我的问题是它只有在应用程序具有管理员权限时才有效。有没有办法做与未提升的过程相同的事情？目前，我从 InvokeMethod 调用中收到“拒绝访问”错误。

```
string query = "Select * from Win32_Process Where Name = \"" + sExeName + "\"";
ManagementObjectSearcher searcher = new ManagementObjectSearcher(query);
ManagementObjectCollection processList = searcher.Get();

foreach (ManagementObject obj in processList)
{
    string[] argList = new string[] { string.Empty, string.Empty };
    int returnVal = Convert.ToInt32(obj.InvokeMethod("GetOwner", argList));
    if (returnVal == 0)
    {
        // return DOMAIN\user
        //string owner = argList[1] + "\\" + argList[0];
        //return owner;
        processUser = argList[1] + "\\" + argList[0];
        if (processUser == currentUser)
            continue;
        else
            break;
    }
} 
```

# javascript - 带有断点的 jQuery UI 可选择的选定事件更改

> ID：13634099
> 
> 赞同：3
> 
> 时间：2012-11-29T20:24:27.783
> 
> 标签：javascript, jquery, jquery-ui

我遇到了包含子 div 的 jQuery UI 可选 div 的问题。特别是在我在选定的处理程序中设置断点之前，子 div 不会被选中。

我在 JS Fiddle 上制作了一个复制品：

[http://jsfiddle.net/PjS3x/9/](http://jsfiddle.net/PjS3x/9/)

查看行为：

1.  单击“单击我”按钮几次。
2.  点击黑色和绿色方块
3.  注意主div的ID（0、1、2等）打印出来了，但是子div（test0、test1等）没有打印出来或者点击绿色的时候打印不一致。
4.  在这一行设置断点`$("#log").append("<span>" + $(ui.s....`
5.  请注意，两个事件被可靠地触发，每个可选事件一次。

我已经查看了[JQuery Selectable 的 API 文档](http://api.jqueryui.com/selectable/)，但我看不到任何会影响此行为的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:33:37.540

我发现只有在单击时鼠标移动时才会选择子 div。

我仍然不确定断点如何影响点击事件。

# java - 动态 h:inputtext 在 jsf [ClassCastException] 中支持 Bean 数组

> ID：13634102
> 
> 赞同：1
> 
> 时间：2012-11-29T20:24:30.483
> 
> 标签：java, jsf

我正在使用 JSF 2.0 我在将 inputTexts 的值设置为双精度表时遇到问题。

我可以做这个 ：

```
<h:inputText value="#{myBean.table[0]}" /> 
```

但是，我想像这样循环执行它：

```
<c:forEach var="i" begin="0" end="#{myBean.inputsNumber}">              
    <h:inputText  value="#{myBean.table[i]}" />     <br/>            
</c:forEach>   
<h:commandButton action="#{myBean.calculate}" value="Calculate" /> 
Result: #{myBean.result} 
```

这是我的支持豆：

```
@ManagedBean
@SessionScoped
public class MyBean {

    private double[] table;
    private double result;

    public MyBean() {
        table = new double[100];
    }

    public void calculate() {
        for (int i = 0; i < table.length; i++) {
            result += table[i];
        }
    }

    public double[] getTable() {
        return table;
    }

    public int getInputsNumber() {
        return table.length;
    }

    public double getResult() {
        return result;
    }

} 
```

我试图将所有组件绑定到一个数组`HtmlInputText`，但我无法解决它。我得到了这个异常：ClassCastException

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T20:37:43.240

有2个问题：

1.  `<c:forEach end>`是包容的。您需要从中减去1，否则`ArrayIndexOutOfBoundsException`在提交时您最终会得到。

    ```
    <c:forEach var="i" begin="0" end="#{myBean.inputsNumber - 1}"> 
    ```

    然而，更好的方法是遍历数组本身并通过`varStatus`.

    ```
    <c:forEach items="#{myBean.table}" varStatus="loop">
        <h:inputText value="#{myBean.table[loop.index]}" />
    </c:forEach> 
    ```

    * * *

2.  EL 中的 double 被视为`Double`，而不是`double`。所以你需要`Double[]`代替，否则你在提交时`double[]`最终会得到。`ClassCastException`

    ```
    private Double[] table; 
    ```

# javascript - 如何使用 jquery 删除特定的 CSS 类？

> ID：13634108
> 
> 赞同：-1
> 
> 时间：2012-11-29T20:24:50.020
> 
> 标签：javascript, jquery

我正在尝试为仅在类名中包含额外参数的项目删除 btn 类，如下所示：

```
<input type="button" class="btn btn-mini btn-success email-user" id="emailid5" value="Email Tester"> 
```

我只想删除任何还包含电子邮件用户的类名的 .btn 类。

我目前的尝试失败了：

```
$('.btn email-user').remove(); 
```

知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T20:27:05.157

[$.fn.removeClass](https://api.jquery.com/removeclass/)应该可以解决问题。您首先选择元素，然后使用`removeClass`方法删除 css 类。

```
var $el = $(".btn.email-user");
$el.removeClass("btn"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T20:28:29.513

使用[removeClass](http://api.jquery.com/removeClass/)

```
$('.btn.email-user').removeClass('btn'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T21:09:16.850

你也可以在没有 jquery 的情况下用普通的 javascript 来做

```
var c=document.getElementsByClassName("email-user")
var pos=-1;
for (i=0;i<c.length;i++){
    pos=c[i].className.indexOf("btn")
    if (pos!=-1){
    alert("old classname is "+c[i].className)
        c[i].setAttribute("class",
            ((pos==0) ? "" : c[i].className.substring(0,pos)) + 
            c[i].className.substring(pos+3,c[i].className.length))
    alert("new classname is "+c[i].className)
    }
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-29T20:26:20.440

```
jQuery('#emailid5').removeClass('btn'); 
```

# java - 用户输入在无输入或非数字输入时中断

> ID：13634114
> 
> 赞同：1
> 
> 时间：2012-11-29T20:25:06.427
> 
> 标签：java, loops, input, arraylist

该程序应该向用户询问一个数字，然后循环直到输入不是数字（如果有数字输入则重复）。到目前为止我的代码：

```
import java.util.*;

public class MataVarden
{
    public static void main(String[] args) throws Exception
    {   
        Scanner sc = new Scanner(System.in);    
        ArrayList<Integer> Values = new ArrayList<Integer>(); 

        System.out.print("Input a number: ");
        Values.add(sc.nextInt()); 

        Collections.sort(Values);
        System.out.println("Values sorted: " + Values);
    }
} 
```

如果输入了非数字，您需要做什么才能中断输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:27:13.103

在这些情况下使用 while 循环。

```
System.out.println("Input a number");
String line = "";
while (sc.hasNextLine() && !(line = sc.nextLine()).equals("")) {
    try {
        int val = Integer.parseInt(line);
        values.add(val);
    } catch (NumberFormatException e) {
        break;
    }

    System.out.println("Input a number");
} 
```

好的，这是对那里发生的事情的解释：-

*   `sc.hasNextLine()`检查是否有要读取的输入。如果是，则继续下一个测试
*   `!(line = sc.nextLine()).equals("")`检查下一个输入是否为 an `empty string`。如果是空字符串，则条件失败，循环结束。
*   由于我们正在使用`nextLine()`方法读取输入，因此我们必须使用将其解析为整数`Integer.parseInt(line);`
*   我们需要将它封装在一个`try-catch`块中来处理像这样的输入`"abc"`，它不会被解析为整数，并且会抛出异常，在这种情况下，我们会`while loop`从`catch block`.
*   请注意，我没有使用过`sc.nextInt()`，因为它不会从输入中读取换行符。因此，没有任何方法可以知道何时终止循环。

* * *

作为旁注，您应该始终遵循代码中的编码约定。您的变量名称应以小写字母开头。

# php - php mysql 分组结果

> ID：13634125
> 
> 赞同：0
> 
> 时间：2012-11-29T20:25:45.603
> 
> 标签：php, mysql

任何人都可以帮助我吗？
我有两个表，它们由 student_id 链接。
我正在寻找一个更简洁/单一的查询，可以输出下面的示例，
尽管我通过
在节和名称的 while 循环查询中插入另一个查询（对于主题使用 group_concat）来实现这一点。

table_students
student_id，部分，名称

table_subjects
student_id，学科

现在我希望输出是这样的。

```
student_id    section    name    subject  
100           A          john    algebra, trigo, geometry  
101           A          peter   trigo, geometry,  
102           B          alice   literature, algebra  
103           B          james   trigo 
```

先感谢您。

顺便说一句，我忘了提供更多细节，在我的主题表中，主题是每行，就像这样

```
student_id    subject  
    100       algebra  
    100       tigo  
    100       geometry  
    101       trigo
    101       geometry
    102       literature
and so on..... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T20:31:43.497

```
SELECT 
stud.section, stud.name, group_concat(subj.subject, '') 
FROM table_students stud 
JOIN table_subjects subj 
ON stud.student_id = subj.student_id 
GROUP BY stud.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:30:49.033

试试这个 MySQL 查询：

```
SELECT stu.section, stu.name, sub.subject 
FROM table_students stu, table_subject sub 
WHERE stu.student_id=sub.student_id 
GROUP BY stu.section 
```

应该做你需要的。在两个表中按 student_id 选择相关数据，然后指定要返回的字段。最后，按部分对它们进行分组。

# mysql - 如果不为空，则使用其他表中的数据更新表？

> ID：13634133
> 
> 赞同：4
> 
> 时间：2012-11-29T20:26:06.400
> 
> 标签：mysql, sql, sql-update

基本上我想要做的是将一个表中的列的值复制到另一个表中的另一列。

我正在使用的查询是：

```
UPDATE t1 
SET product_code = 
(SELECT `value` FROM t2 WHERE t2.variant_id = t1.variant_id AND key_id = 10); 
```

哪个工作正常，但列不匹配，

所以我需要添加一个子句，如果子查询不返回null，它只会对该行进行更新。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T20:33:03.837

您应该像这样在连接中进行更新

```
UPDATE
t1 INNER JOIN t2 ON t1.variant_id = t2.variant_id
SET t1.product_code = t2.value
WHERE t2.key_id = 10
AND t2.value IS NOT NULL 
```

在这种情况下无需担心空值，因为内连接只会选择两个表中都存在 variant_id 的行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T20:27:51.550

如果查询返回，则使用旧值`null`：

```
UPDATE t1 
SET product_code = 
ifnull(
    (SELECT `value` FROM t2 WHERE t2.variant_id = t1.variant_id AND key_id = 10), 
    product_code); 
```

仅供参考，在 mysql 中使用旧值不会以任何方式算作“更新”（受影响的行数或记录的更改）

# asp.net-mvc - MVC4：何时重定向失败的登录

> ID：13634135
> 
> 赞同：1
> 
> 时间：2012-11-29T20:26:06.660
> 
> 标签：asp.net-mvc, asp.net-mvc-4, windows-authentication

我正在将 MVC4 与**Windows 身份验证**一起用于 Intranet 站点。

我的**控制器**基于我的**BaseController**

**BaseController**将调用服务以查看是否允许 Windows 用户使用该站点。如果没有，我想将它们重定向到控制器“未授权”上的“索引”

**我将检查BaseController**的哪个位置，然后如何将请求重定向到 UnAuthorized 控制器？

我试图像这样在**OnAuthorized**中重定向，但没有任何反应：

```
 protected override void OnAuthorization(AuthorizationContext filterContext)
    {
        base.OnAuthorization(filterContext);

        if (!isAuthorized(username))
            RedirectToAction("Index", "UnAuthorized");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:13:58.420

这个答案可能会对你有所帮助

[在 MVC 中重定向未经授权的控制器](https://stackoverflow.com/questions/977071/redirecting-unauthorized-controller-in-asp-net-mvc)

此外，此视频将为您提供一些一般帮助

[ASP.NET MVC 3 中的 Windows 身份验证](http://www.youtube.com/watch?v=x4hzVLZjfLM)

# html - div 和 table 之间的空间

> ID：13634143
> 
> 赞同：-1
> 
> 时间：2012-11-29T20:26:48.803
> 
> 标签：html, css, html-table, spacing

我继承了这个网站，并在 div 标签中完成了这个菜单的编码。以前在一张桌子上。然而，现在，下面的表格（在我创建的容器 div 之外）间隔很大。那里没有任何类型的 HTML 元素导致空间......所以我迷路了。我在我的 div 中添加了 0 个边距，但没有找到任何地方。有什么建议么？见： http: [//www.chinesemirch.com/foodTruck.htm](http://www.chinesemirch.com/foodTruck.htm)

我不是最擅长代码的，所以任何帮助都很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:37:49.087

如果您在谈论菜单与其下方内容块之间的差距，则包含菜单的外部表具有 css`margin-bottom:15px;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:00:23.960

阅读您的代码后，我分析您在表格样式中使用了“margin-bottom：15px”，这是在底部生成额外空间的原因。

> 将来，如果您产生额外的空白，请重新检查您的代码，因为大多数情况下是因为错误使用了“margin”和“padding”。

# bash - 在 AWK 中分配一个 Shell 变量

> ID：13634155
> 
> 赞同：3
> 
> 时间：2012-11-29T20:27:19.683
> 
> 标签：bash, shell, unix, awk

我有这样的字符串

```
/home/rm/home-scripts/originals/audicerttest/incoming/TEST040511.txt
/home/rm/home-scripts/originals/audicerttest2/incoming/TEST040512.txt
/home/rm/home-scripts/originals/audicerttest3/incoming/TEST040513.txt 
```

等等..我想将字符串'audicerttest/incoming'、audicerttest2/incoming'等提取到一个shell变量中，然后在脚本中使用它。我尝试过这样的事情。

```
for file in `find ${ROOT}/* -type f | grep -v -f test.txt`
do
let count++
echo ${count}: ${file}
echo ${file} | eval $(awk '{split($0,a,"/"); print "abc=a[6]/a[7]"}' < /dev/null)
echo abc====$abc
done 
```

但它没有为 abc 提供任何输出。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T20:37:32.037

有许多问题，但让我们隔离问题并一次解决一个问题。

**给定**- 原始字符串：

```
/home/rm/home-scripts/originals/audicerttest/incoming/TEST040511.txt 
```

**所需输出**- 您希望将此部分保存在变量中：

```
audicerttest/incoming 
```

**操作方法**- 这将做到：

```
string="/home/rm/home-scripts/originals/audicerttest/incoming/TEST040511.txt"
parsed=$(awk 'BEGIN{FS=OFS="/"} {print $6, $7}' <<< ${string}) 
```

* * *

一般来说，假设您有一个名为的文件`input_file.txt`：

```
/home/rm/home-scripts/originals/audicerttest/incoming/TEST040511.txt
/home/rm/home-scripts/originals/audicerttest2/incoming/TEST040512.txt
/home/rm/home-scripts/originals/audicerttest3/incoming/TEST040513.txt 
```

你可以做：

```
awk 'BEGIN{FS=OFS="/"} {print $6, $7}' input_file.txt > parsed_vars.txt 
```

并将`parsed_vars.txt`包含：

```
audicerttest/incoming
audicerttest2/incoming
audicerttest3/incoming 
```

* * *

**一些解释：**

*   `parsed=$(...)`- 生成一个子shell并将输出保存到`stdout`该子shell中的变量`parsed`
*   `awk 'BEGIN{FS=OFS="/"}`- 调用`awk`和设置分隔符作为`/`输入和输出。
*   `{print $6, $7}'`- 根据原始字符串的格式，您要打印第 6 个（audicerttest）和第 7 个（传入）字段。
*   `<<< ${string}`是使用[herestring的表示法](http://linux.die.net/abs-guide/x15683.html)
*   `input_file.txt > parsed_vars.txt`- 从指定的输入文件读取，并将输出重定向到输出文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T20:59:02.020

这是一个纯粹的 bash 解决方案，不使用任何矫枉过正`awk`，不使用任何邪恶`eval`，也不使用任何子外壳：

你有这个字符串：

```
string="/home/rm/home-scripts/originals/audicerttest/incoming/TEST040511.txt" 
```

`/`您需要一个字符串，其中包含变量中的第 5 和第 6 个字段（其中分隔为） `parsed`。我们走吧：

```
IFS=/ a=( $string ) printf -v parsed '%s/%s' "${a[@]:5:2}" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T20:35:43.673

```
echo ${file} | eval $(awk '{split($0,a,"/"); print "abc=a[6]/a[7]"}' < /dev/null) 
```

好的，这里有几个问题。

`awk`正在读取`/dev/null`，这没有任何意义，猜你想处理文件名：

```
echo {$file} | awk ... 
```

`"a[6]"`是字符串`a[6]`，不进行替换。

现在评估整个事情：

```
eval $(echo $file | awk '{split($0,a,"/"); print "abc="a[6]"/"a[7]""}') 
```

最后，eval是邪恶的，为什么不直接设置变量呢？

```
abc=$(echo $file | awk '{split($0,a,"/"); print a[6]"/"a[7]}') 
```

就个人而言，我认为这更清楚：

```
 cut -d / --output-delimiter / -f6,7 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T20:59:21.430

仅使用 bash 数组，您可以执行以下操作：

假设：

```
path=/home/rm/home-scripts/originals/audicerttest/incoming/TEST040511.txt 
```

然后：

```
IFS=/ split=(${path})
path_part="${split[5]}/${split[6]}" 
```

`$split`将是一个数组，元素 0 为空，元素一`home`，元素 2`rm`等。这样，您只需连接想要获得您喜欢的部分的元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T01:29:48.230

没有人建议使用简单的[参数扩展](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)来操作字符串。我假设前 4 个目录是不变的

```
while read path; do
    dirname=$(dirname $path)
    abc=${dirname#/home/rm/home-scripts/originals/}
    echo "abc===$abc"
done < filename 
```

# sql - 在更新查询中使用大小写

> ID：13634159
> 
> 赞同：1
> 
> 时间：2012-11-29T20:27:31.647
> 
> 标签：sql, sql-server

我正在尝试在更新查询中使用大小写，它给了我一个错误，即大小写附近的语法不正确。我不知道在哪里？！这是在 SQL 2005 中

我将日期发送到存储过程。如果发送的日期是 '01/01/1905'，它必须保存 null 否则输入的实际日期。我真的不确定这个声明有什么问题。

```
Update Manifest set Notes = @Notes, IsCustom = @IsCustom,
CASE WHEN @ProofSent = CONVERT(datetime, '01/01/1905') THEN NULL ELSE @ProofSent END,
CASE WHEN @ProofApproved = CONVERT(datetime, '02/01/1905') THEN NULL ELSE @ProofApproved END 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:29:04.767

您尚未声明应将其设置为哪一列：

```
Update Manifest set Notes = @Notes, IsCustom = @IsCustom,
    ProofSent = CASE WHEN @ProofSent = CONVERT(datetime, '01/01/1905') THEN NULL ELSE @ProofSent END,
    ProofApproved = CASE WHEN @ProofApproved = CONVERT(datetime, '02/01/1905') THEN NULL ELSE @ProofApproved END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:31:23.567

一定是这样的：

```
Update Manifest set Notes = @Notes, IsCustom = @IsCustom,
Column1 = 
    CASE WHEN @ProofSent = CONVERT(datetime, '01/01/1905') THEN NULL 
    ELSE @ProofSent END,
Column2=
    CASE WHEN @ProofApproved = CONVERT(datetime, '02/01/1905') THEN NULL 
    ELSE @ProofApproved END 
```

# c# - 如何让我制作的 ac# 程序在另一台电脑上工作？

> ID：13634163
> 
> 赞同：0
> 
> 时间：2012-11-29T20:27:42.647
> 
> 标签：c#, visual-studio-2010

我在 Visual Studio 2010 中使用 C# 编写需要在多台计算机上运行的程序。到目前为止，如果 PC 上安装了 VS 2010，我可以在另一台 PC 上运行该程序。如果没有 VS 2010，则程序不会运行。有没有办法让程序运行而无需安装 VS 2010？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T20:35:55.733

如果您右键单击您的项目并进入属性，查看`Application`选项卡，您可以看到目标框架是什么：

![目标框架](../Images/25f1a6437d168502ed9de80b44124444.png)

这表明运行您的应用程序所需的 .NET 框架的最低版本。只要您在另一台计算机上安装了具有该版本或更高版本的 .NET 框架，您的程序就会运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:40:32.930

实际上，您只需要在另一台计算机上安装 .NET 客户端配置文件。只需检查您使用的版本。如果您使用 VS 2010，我认为它是 .NET 4。

[Microsoft .NET Framework 4 客户端配置文件](http://www.microsoft.com/en-ca/download/details.aspx?id=24872)

# jquery - 带有按钮的Jquery提交表单

> ID：13634165
> 
> 赞同：1
> 
> 时间：2012-11-29T20:27:52.613
> 
> 标签：jquery, jquery-ui

我正在尝试向 Shopify 电子商务网站添加一些验证，以便用户在单击“继续结帐”按钮时必须确认他们的国家/地区。它使用普通的 JavaScript`confirm()`对话框完美地工作，但我希望能够在弹出窗口中使用 HTML，所以我正在尝试使用 JQuery UI。

JQuery UI 弹出并停止提交表单（尽管花了一段时间才弄清楚），但我不知道在用户单击确认按钮后如何提交表单。我找到了两种阻止表单前进的方法，使用 e.preventDefault 并使 Proceed 按钮 a`type="button"`而不是 a `type="submit"`。通过这两种方式，表单将不再提交。

**表格标题：**

```
<form action="/cart" method="post" id="cartform" class="clearfix"> 
```

**按钮的 HTML 代码使用`type="submit"`：**

```
<div class="submit-cart">
    <div id="checkout-proceed">
        <input class="btn-reversed btn" type="submit" id="update-cart" name="checkout" value="Proceed to Checkout" />
        {% if additional_checkout_buttons %}
        <div id="additional-checkout-buttons">
          <span id="additional-checkout-buttons-label">Or check out using:</span>
         {{ content_for_additional_checkout_buttons }}
        </div>
        {% endif %}                       
    </div>
</div> 
```

**在使用上述 HTML 提交表单时实际工作的**“普通”JavaScript 代码：****

 **```
$(document).ready(function(){
    $(".submit-cart input[type='submit'],.submit-cart input[type='image']").click(function(event){
        var x=confirm("Please confirm that you are ordering from the USA. \nIf you are ordering from Europe, please use the European store (...).");
        if (x == true) {
            $(".submit-cart input").submit();
        } else {
            return false;
        } 
    });
}); 
```

**我试图使用**JQuery 代码**`type="submit"`来提交表单，并将 HTML 按钮设置为使用`e.preventDefault`以阻止它在单击时提交。**

 **```
$(document).ready(function(){
    $(".submit-cart input[type='submit'],.submit-cart input[type='image']").click(function(event){
        event.preventDefault();
        $( "#dialog-confirm" ).dialog({
            resizable: false,
            height:300,
            width: 400,
            modal: true,
            buttons: {
                "Confirm": function() {
                    return true;
                    $(".submit-cart input").submit();
                },
                Cancel: function() {
                    $(this).dialog("close");
                    return false;
                }
            }
        }); 
    });
}); 
```

将 HTML 按钮更改为**`type="button"`**而不是 后`submit`，这是我尝试用来提交表单的**JQuery 代码。**

```
$(document).ready(function(){
    $(".submit-cart").click(function(){
        $( "#dialog-confirm" ).dialog({
            resizable: false,
            height:300,
            width: 400,
            modal: true,
            buttons: {
                "Confirm": function() {
                    return true;
                    $("#cartform").submit();
                },
                Cancel: function() {
                    $(this).dialog("close");
                    return false;
                }
            }
        }); 
    });
}); 
```

购物车页面上还有一个“使用 PayPal 付款”按钮，允许用户使用 PayPal 付款。这个按钮实际上似乎使用 type="button" 方法正确提交。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:56:42.843

使用提交功能

```
$('#cartform').submit(); 
```****

# css - 我正在尝试用类覆盖 id 中的样式，但它不起作用。我做错了什么？

> ID：13634168
> 
> 赞同：1
> 
> 时间：2012-11-29T20:28:15.830
> 
> 标签：css

我在许多页面上使用标题 ID，但不希望底部边框仅显示在某些页面上。下面的代码为了简单起见，从标题 ID 中删除了一些样式：

```
#header {
width:790px;
min-height:230px;
border-bottom: 1px solid #DADADA;
}

.header-no-line {
border-bottom: none;    
}

<div Id="header" class="header-no-line">
<h1>Title</h1>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:29:52.353

您的问题在于 CSS 特异性：[http ://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

您可以`important`在您的情况下添加关键字来解决此问题：

```
.header-no-line {
    border-bottom: none !important; /* <-----  */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:30:33.427

好吧，您应该阅读有关特异性的信息。[http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)是一篇好文章。

一个好的规则是：

> “从 0 开始，样式属性加 1000，每个 ID 加 100，每个属性、类或伪类加 10，每个元素名称或伪元素加 1。”</p>

在这种情况下，ID 值 100，类值 10，因此 ID 获胜。

此外，任何时候你正在“撤消”CSS，这通常是一个不好的迹象。

解决这个问题的垃圾方法是在`!important`该声明中添加一个，但大多数人会在代码审查中选择它并询问为什么需要它——这很少是做事的方式。

许多人还建议不要对 CSS 使用 ID，而是对所有内容使用类（嗯，除了普通的选择器等），并且只对 Javascript 钩子使用 ID。这是处理事情的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T20:37:13.970

你在css中越具体，你的规则就越重要。

例如：

而不是`.header-no-line`你可以使用

```
#header .header-no-line { border-bottom:none; } 
```

或者

```
body #header .header-no-line { border-bottom:none; } 
```

也正如提到的使用`!important`属性应该可以解决问题。

`#header .header-no-line { border-bottom:none !important; }`

**更新：**我完全错过了那`.header-no-line`不是`#header`......我上面的代码不起作用。但这将：

`body .header-no-line { border-bottom:none !important; }`

# java - Java 使用 beta 分布生成一个从 0 到 1 的随机数

> ID：13634170
> 
> 赞同：3
> 
> 时间：2012-11-29T20:28:16.147
> 
> 标签：java, random, beta

我需要使用 beta 分布 Beta(a, b) 来生成一个从 0 到 1 的随机数。

我找到了 Class BetaDist，它具有构造函数 BetaDist(double alpha, double beta)，它构造一个 BetaDist 对象，参数为 α = alpha 和 β = beta 以及默认域 (0, 1)。

但是，我找不到可以仅使用 alpha 和 beta 来使用 BetaDist 对象返回随机绘制 x (0, 1) 的方法。

我在stackoverflow上阅读了另一篇文章说：从具有没有跳转的cdf的任意分布生成随机数的一般方法是使用cdf的逆函数：G(y)=F^{-1}(y)。如果 u(1), ..., u(n) 是均匀分布在 (0,1) 上的随机数，则 G(u(1)), ..., G(u(n)) 是随机数来自具有 cdf F(x) 的分布的样本。

BetaDist 类确实有 cdf(double x) 方法，但我仍然不知道下一步该做什么。我没有学过统计学，上面的帖子对我来说还是太复杂了。

非常感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:00:50.953

我刚刚遇到了和你一样的问题。您提到的方案是有效的，我刚刚在我的案例中进行了测试。

程序如下：

1.  生成一个 beta 分布——参数为 alpha 和 beta 的 beta；
2.  从均匀分布中生成一个随机数--x；
3.  调用逆cdf来获取beta分布的随机数--b，这里“x”作为函数输入，逆cdf可以返回你想要的随机数。注意：beta 分布应该有一个逆 cdf 来执行此操作，而不仅仅是 cdf。

    ```
    import org.apache.commons.math3.distribution.BetaDistribution;

    public class test {
        /**
         * @param args
         */
        public static void main(String[] args) {
            double x;
            double b;
            BetaDistribution beta = new BetaDistribution(40.0, 40.0);
            for (int i = 0; i < 100; i++) {
                x = Math.random();
                b = beta.inverseCumulativeProbability(x);
                System.out.println(b);
            }
        }
    } 
    ```

# r - 在 R 中进行多个日期计算的更有效方法？

> ID：13634171
> 
> 赞同：0
> 
> 时间：2012-11-29T20:28:20.570
> 
> 标签：r, date

我有一个框架，其中包括一个日期列（确实是 Date 类）和一个数字列（Numeric 类）

```
 first       last       date number
1   Reynalda     Morley 1953-07-03      9
2     Annice     Meador 1954-10-29     38
3       Jude    Pertuit 1956-08-23     49
4    Viviana      Dance 1979-11-07     32
5    Lavonda      Babst 1982-02-06     17
6    Rachele Eisenhower 1985-11-12     27
7     Ericka     Roesch 1987-05-02     22
8   Giovanni      Bemis 1988-06-23     33
9      Ferne       Mone 2005-12-21     36
10 Anjanette   Eppinger 2010-01-03      4 
```

我想遍历每年并获得迄今为止的累计总数和当年的平均值。大致我想最终得到一个结果框架，如：

```
 year    total.to.date   average.this.year
1   2001    128     32
2   2002    128     0
3   2003    145     17
4   2004    227     27.3333333333333
5   2005    267     20 
```

我知道我可以为每个计算使用整个系列的子集，但我也知道如果我更聪明......也许可以轻点？......我可以把它翻出来。我需要添加一个库来处理这样的日期吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:37:26.180

它适用于该`by`功能。

```
dat <- read.table(text="first       last       date number
1   Reynalda     Morley 1953-07-03      9
2     Annice     Meador 1954-10-29     38
3       Jude    Pertuit 1956-08-23     49
4    Viviana      Dance 1979-11-07     32
5    Lavonda      Babst 1982-02-06     17
6    Rachele Eisenhower 1985-11-12     27
7     Ericka     Roesch 1987-05-02     22
8   Giovanni      Bemis 1988-06-23     33
9      Ferne       Mone 2005-12-21     36
10 Anjanette   Eppinger 2010-01-03      4", header = TRUE)

dat$date <- as.Date(dat$date) 
```

这些命令生成数据。`cumsum`使用以下函数计算累计总数：

```
result <- with(dat, by(number, format(date,"%Y"), function(x) c(mean(x),sum(x))))
result <- data.frame(names(result), do.call(rbind, result))
result <- setNames(cbind(result[-3], cumsum(result[3])),
                   c("year", "average.this.year", "total.to.date")) 
```

`result`: _

```
 year average.this.year total.to.date
1  1953                 9             9
2  1954                38            47
3  1956                49            96
4  1979                32           128
5  1982                17           145
6  1985                27           172
7  1987                22           194
8  1988                33           227
9  2005                36           263
10 2010                 4           267 
```

# c# - 传入消息具有意外的消息格式“原始”。该操作的预期消息格式为“Xml”、“Json”。

> ID：13634172
> 
> 赞同：1
> 
> 时间：2012-11-29T20:28:22.477
> 
> 标签：c#, jquery, ajax, wcf

这是我的代码：

```
function DoAddAllCartItems(spaceID, colorID, themeID, width) {
        $.ajax({
            type: 'POST',
            url: 'myservice.svc/AddAllCartItems',
            data: "{spaceID: " + "'" + spaceID + "'" + ", colorID: " + "'" + colorID + "'" + ", themeID: " + "'" + themeID + "'" + ", width: " + "'" + width + "'" + "}",
            contentType: "application/soap+xml; charset=utf-8",
            dataType: "xml",
            error: function () {
                alert("Error");
            },
            success: function (response) {
                alert(response);
            }
        });

    }

    [OperationContract]
    [WebInvoke(Method = "POST",
      BodyStyle = WebMessageBodyStyle.Wrapped,
      ResponseFormat = WebMessageFormat.Json)]
    string AddAllCartItems(int spaceID, int colorID, int themeID, int width); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:39:31.877

您将需要提供更多信息。首先，在 IIS 中托管 Web 服务并连接 Fiddler (http://www.fiddler2.com/fiddler2/) 以查看从 Web 服务返回的内容。

我的第一个猜测是您的 AddAllCartItems 方法正在引发异常。除此之外，可能是字符串化整数参数的问题？

# iphone - iphone模拟器

> ID：13634178
> 
> 赞同：1
> 
> 时间：2012-11-29T20:28:30.223
> 
> 标签：iphone

我正在尝试创建一个 iphone 模拟器，只是为了截取网页并了解如何呈现。

我的第一次尝试是尝试使用集成的 air webkit。

我也尝试过使用 phantomjs，但创建者说这不太适合这种目的。

所以我想知道是否有办法创建一个模拟器来用一些工具截取iphone的截图......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:30:51.493

只需下载[Xcode](https://developer.apple.com/xcode/)，它有一个非常好的 Emulator/Simulator。它将支持所有已知的屏幕尺寸。

你也可以试试这个（它是基于网络的） [http://testiphone.com/](http://testiphone.com/) 不是一个好的，但浏览器可以做到这一切。不需要模拟器；-)

其他可能性是[这样](http://www.iemu.org/index.php/Main_Page)，但我从未尝试过。

# neo4j - 使用带有 Cypher 的 neo4j 中的索引使用“IN”子句进行查询

> ID：13634179
> 
> 赞同：5
> 
> 时间：2012-11-29T20:28:31.787
> 
> 标签：neo4j

我想在 neo4j 中使用我的 auto_index 并传入要匹配的字符串数组。我知道您可以在密码查询的末尾添加一个 IN 子句，但这不使用索引，我假设将对所有记录进行数据库扫描。使用索引查询执行此操作的最佳方法是什么？

例如，假设 facebookId 上有一个 auto_index 并且有 100 万个用户节点，请获取 facebookId 在 ["123", "456", "789"] 中的用户。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T22:36:51.467

我想这是值得发布的答案：

```
START n=node:node_auto_index('facebookId:("123", "456", "789")')
... 
```

示例： [http ://console.neo4j.org/r/3mcvr5](http://console.neo4j.org/r/3mcvr5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:47:13.030

您可以通过显式索引查找来执行此查询，例如

```
start user = node:node_auto_index('facebookId:123 OR facebookId:456') match  ... 
```

[以http://console.neo4j.org/r/nj98lt](http://console.neo4j.org/r/nj98lt)为例。

# nosql - Cassandra 的示例数据模型？

> ID：13634182
> 
> 赞同：3
> 
> 时间：2012-11-29T20:28:50.917
> 
> 标签：nosql, cassandra, data-modeling, sample, datamodel

我找到了很棒的[DatabaseAnswers](http://www.databaseanswers.org/data_models/index.htm)站点，其中包含许多常见用例的示例 SQL 数据模型。（CRM、电子商务、流行网站等）这些模型不是最丰富或架构最完善的，但它们是学习如何创建 SQL 模型和展示最佳实践的一个很好的起点。

我现在开始使用 Cassandra，它显然具有完全不同的数据模型范式。有时，您很难忘记所有这些 SQL 课程，这使得您很难确定对数据进行建模的最佳方式。有谁知道有 Cassandra 示例数据模型的类似网站？例如，我想查看电子邮件或消息传递系统的数据模型，演示如何以最佳方式设置所有 Columns 和 ColumnFamily。更多真实世界类型的示例会很棒。有没有人遇到过这样的资源或教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T22:35:33.613

我想你可能很难在那里找到信息。我相信未来可能会越来越多。您可以在 PlayOrm 的文档等客户端文档中找到一些信息

[https://github.com/deanhiller/playorm/wiki](https://github.com/deanhiller/playorm/wiki)

所以那里有一些信息。我相信会有越来越多的，因为它仍然是一个不断增长的空间。

我们刚刚添加了这个页面，将来也会添加更多，这些适用于一般的 NoSql 以及 PlayOrm...

[https://github.com/deanhiller/playorm/wiki/Patterns-Page](https://github.com/deanhiller/playorm/wiki/Patterns-Page)

# html - 浏览器球演示 - 这是如何完成的

> ID：13634186
> 
> 赞同：0
> 
> 时间：2012-11-29T20:29:10.030
> 
> 标签：html

早在 2009 年，就有一个很酷的演示，叫做[Browser Ball](http://www.chromeexperiments.com/detail/browser-ball/)。

演示的重点是页面打开了几个新的重叠浏览器窗口并显示了一个弹跳球，它在弹跳时在窗口之间平滑过渡。因此页面必须能够以某种方式

1.  获取有关查看器桌面上浏览器窗口配置的信息
2.  窗口之间的通信

可悲的是，现在托管它的站点似乎已关闭。有人知道它是如何工作的吗？windows之间的通信是如何进行的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:01:28.677

窗口之间的通信可以通过[`window.opener`](http://www.w3schools.com/jsref/prop_win_opener.asp).

可以使用以下方法确定浏览器窗口的位置：

*   `window.screenLeft`并`window.screenRight`在 IE 中
*   `window.screenX`以及`window.screenY`其他一切。

有关 JS 中浏览器窗口位置的更多信息，请参阅：

[http://www.w3schools.com/jsref/prop_win_screenx.asp](http://www.w3schools.com/jsref/prop_win_screenx.asp)

# c++ - 构建控制台菜单类层次结构的最佳方法？

> ID：13634189
> 
> 赞同：6
> 
> 时间：2012-11-29T20:29:19.217
> 
> 标签：c++, python, oop, class

我已经在 C++ 和 Python 中创建了一个控制台菜单，但我认为语言在这里的作用并不大，因为我在询问类的结构。

所以我想要实现的是一个类似于 MS-DOS 的菜单，其中我可以有父菜单（文件夹）和操作菜单（文件）。这是它在控制台中的样子，一旦打印出来：

```
[-] Root directory
        Open snakegame
    [-] First sub directory
            Print out stupid messages
        [+] Closed directory in open directory
            Shutdown computer
    [+] These directories are closed
    [+] You can't see the content inside them
        Quit menu 
```

如您所见，我在这里有两种类型的菜单；

1.  目录（MS-DOS 文件夹）菜单，其中包含其他菜单。激活后，它们会打开/关闭。例如：`Root directory`现在已打开，您可以看到其中的所有菜单。如果它被关闭，`[-]`则会变成`[+]`并且您看不到任何其他菜单。
2.  链接到功能的操作（MS-DOS 文件）菜单。激活后，它们会调用它们链接到的函数。例如：`Open snakegame`可以链接到一个函数`startSnakeGame()`，该函数将关闭菜单并启动贪吃蛇游戏。

我已经编写了两个工作实现来获得想要的结果，我只是想知道，我应该使用哪一个？第一种方法是，我只有一个名为 的类`Menu`，它的所有成员变量和方法都编码到一个类中。另一种方法是，我将这两种不同类型的菜单分成两个类，具有一个共同的基类。

* * *

这里有一些成员变量，我现在将它们分成三部分（基类、目录类和动作类），但它们可以合并为一个类。

基本菜单：

*   `parent`= 作为子项保存在列表/向量中的菜单（目录一）`this/self`（见下文）。
*   `label`= 显然是打印菜单时显示的标签。
*   `selected`=布尔值，它告诉当前是否选择了菜单（例如鼠标指向）。

目录菜单：

*   `subMenus`= 包含其他菜单的列表或向量（在 C++ 中）。
*   `open`= 一个布尔值，它告诉菜单是打开还是关闭。

动作菜单：

*   `action`= 指向激活此菜单时调用的函数的指针。

正如您所看到的，只有少数变量与其他类不同，并且可以设置为如果`action == 0`（无操作）则菜单会根据其当前值自动`open`更改`false/true`。这样操作菜单将被终止，唯一的缺点是操作菜单将保留`subMenus`且不`closed`使用。

* * *

这可能是一个人的意见，但我一直在思考这个问题，并没有找到一种优于其他方式的方法，它们都有其优点和缺点，并且都运作良好。所以我在问你的意见，我很想听听是否有人有任何理由选择一个而不是另一个。基本上我是在问原因，我不在乎你的意见。

除了文件夹和文件之外，没有其他菜单类型，因此基类不能用于其他任何事情。

* * *

**编辑：**关于如何使用菜单的简单 Python 和 C++ 示例：

Python 只有一个类：

```
# Using default param. here to set "action = None" or "action = toggleOpen()"
root = Menu(None, "Root directory")
snake = Menu(root, "Open snakegame", startSnakeGame)
sub1 = Menu(root, "First sub directory")
printMsg = Menu(sub1, "Print out stupid messages")
... 
```

具有多个类的 Python：

```
# With multiple classes, action parameter no longer exists
root = DirectoryMenu(None, "Root directory")
snake = ActionMenu(root, "Open snakegame", startSnakeGame)
... 
```

一个类的 C++：

```
Menu* root = new Menu(0, "Root directory");
Menu* snake = new Menu(&root, "Open snakegame", &startSnakeGame);
... 
```

具有多个类的 C++：

```
DirectoryMenu* root = new DirectoryMenu(0, "Root directory");
ActionMenu* snake = new ActionMenu(&root, "Open snakegame", &startSnakeGame);
... 
```

* * *

**第二次编辑：**我只在 Python 中实现了两种方式，在 C++ 中只实现了一种方式。所以我也开始用 C++ 编写多类方式，只是为了好玩和练习，我遇到了一个问题；有一个基类，我不能添加`this`到父类的`subMenus`-vector，因为基类不拥有`subMenus`，并且基类不知道`DirectoryMenu`。

所以我将不得不通过这个破解我的方式，这是一个很大的减号。除非有人能想出一个好的方法来实现它？

```
BaseMenu::BaseMenu(BaseMenu* parent)
: m_parent(parent) // works
{
    m_parent->addSubMenuk(this); // BaseMenu doesn't have Directory's addSubMenu()
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T22:24:09.277

第二种方式更可取（实际上它是[http://sourcemaking.com/design_patterns/composite](http://sourcemaking.com/design_patterns/composite)）。实现与界面分离 - 易于添加新菜单项。此外，这种结构可以很好地与模式访问者[http://sourcemaking.com/design_patterns/visitor配合使用](http://sourcemaking.com/design_patterns/visitor)

您可以添加到此代码跟踪并查看输出：

```
#include <vector>
#include <boost/shared_ptr.hpp>

class ActionMenu;
class SubMenu;
class Menu;

typedef boost::shared_ptr<Menu> MenuPtr;
typedef boost::shared_ptr<SubMenu> SubMenuPtr;
typedef boost::shared_ptr<ActionMenu> ActionMenuPtr;

//visitor
class Action
{
public:
    virtual void visit(ActionMenu* actionMenu) = 0;
    virtual void visit(SubMenu* subMenu) = 0;
};

//element
class Menu
{
public:
    virtual void Accept(Action& action) = 0;
};

//menus
class SubMenu : public Menu
{
public:
    virtual ~SubMenu() 
    {
    }

    unsigned long GetMenuCount()
    {
        return m_menus.size();
    }

    MenuPtr GetMenyByIndex(unsigned long index)
    {
        return m_menus[index];
    }

    void AddMenu(const MenuPtr& menu)
    {
        m_menus.push_back(menu);
    }

    virtual void Accept(Action& action)
    {
        action.visit(this);
    }

    void ShowMenu()
    {
    }

    void ChangeStyle()
    {
    }
private:
    std::vector<MenuPtr> m_menus;
};

class ActionMenu : public Menu
{
public:
    virtual ~ActionMenu() 
    {
    }

    virtual void Accept(Action& action)
    {
        action.visit(this);
    }

    void DoCommand()
    {
    }

    void ChangeImage()
    {
    }
};

//visitors

class StyleAction : public Action
{
public:
    virtual ~StyleAction() 
    {
    }

    virtual void visit(ActionMenu* actionMenu)
    {
        actionMenu->ChangeImage();
    }

    virtual void visit(SubMenu* subMenu)
    {
        subMenu->ChangeStyle();
    }
};

class MenuAction : public Action
{
public:
    virtual ~MenuAction() 
    {
    }

    virtual void visit(ActionMenu*actionMenu)
    {
        actionMenu->DoCommand();
    }

    virtual void visit(SubMenu* subMenu)
    {
        subMenu->ShowMenu();
    }
};

int main(int argc, char* argv[])
{
    SubMenuPtr rootMenu(new SubMenu());
    SubMenuPtr fileMenu(new SubMenu());
    SubMenuPtr userMenu(new SubMenu());
    MenuPtr open(new ActionMenu());
    MenuPtr save(new ActionMenu());
    MenuPtr close(new ActionMenu());
    fileMenu->AddMenu(open);
    fileMenu->AddMenu(save);
    fileMenu->AddMenu(close);
    rootMenu->AddMenu(fileMenu);
    rootMenu->AddMenu(userMenu);

    StyleAction sa;
    MenuAction ma;

    //iterate over root menu
    //recursively can bypass all the menu items, the structure of the tree
    for (unsigned int i = 0; i < rootMenu->GetMenuCount(); ++i)
    {
        rootMenu->GetMenyByIndex(i)->Accept(sa);
        rootMenu->GetMenyByIndex(i)->Accept(ma);
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:56:22.553

这两种方式在性能等方面非常接近，所以很难弄清楚。但是，选择其中之一是有原因的：OOP 中的逻辑和规则。我**不得不**将它分成 3 个类`BaseMenu`：`ActionMenu`和`DirectoryMenu`.

在这里解决“两个班级不能互相认识”的问题可以像`iogane gamba puti fon gu`建议的那样完成。但是，定义抽象方法`addSubMenu()`和`removeSubMenu()`in`BaseMenu`与只有一个类一样违反规则，因此这不是另一种方式的选择。

我最终得到的是使用回调和重载指针（`*`）运算符。它现在返回一个指向另一个类的实例的指针，并根据类型调用它的方法。

# jquery - 将溢出的缩略图移动到另一个容器中

> ID：13634190
> 
> 赞同：0
> 
> 时间：2012-11-29T20:29:25.203
> 
> 标签：jquery

好吧，假设我有 10 个缩略图，并且我有一个高度固定但宽度有弹性的容器。有没有办法将该 div 中溢出的所有缩略图移动到新创建的 div 包装器中？

我希望在另一个包装器中所有溢出的缩略图的原因是因为我想将这些包装器实现到轮播中，因此可以通过单击轮播上的下一步按钮来找到所有溢出的缩略图。

```
<div class="wrapper">
    <a href="#"><img src="" class="thumb" alt="thumbnail" /></a>
    <a href="#"><img src="" class="thumb" alt="thumbnail" /></a>
    <a href="#"><img src="" class="thumb" alt="thumbnail" /></a>
    <a href="#"><img src="" class="thumb" alt="thumbnail" /></a>
    <a href="#"><img src="" class="thumb" alt="thumbnail" /></a>
    <a href="#"><img src="" class="thumb" alt="thumbnail" /></a>
    <a href="#"><img src="" class="thumb" alt="thumbnail" /></a>
    <a href="#"><img src="" class="thumb" alt="thumbnail" /></a>
    <a href="#"><img src="" class="thumb" alt="thumbnail" /></a>
    <a href="#"><img src="" class="thumb" alt="thumbnail" /></a>
</div> 
```

问题是因为这是一个响应式设计，我也需要它在调整窗口大小时工作。因此，如果用户减小窗口的宽度，则第一个包装容器中将出现更少的缩略图，并且随着宽度容器的增加，第一个包装容器中将出现更多的缩略图。

我认为这附近会有一个插件，但我没有遇到任何东西。

谢谢您的帮助。

**编辑**

* * *

我设法让它在页面加载时工作，但是在调整窗口大小时我遇到了问题。我正在使用 JRespond 在特定窗口宽度上触发 wrap_thumbs 函数。看来该功能可能被多次触发导致浏览器基本崩溃。

下载链接： [project_ZIP](http://dev.imagine-that.co.uk/thumb_wrap.zip)

# php - 在查询中调用其中 tinyint 为 0（用作布尔值）的位置

> ID：13634191
> 
> 赞同：0
> 
> 时间：2012-11-29T20:29:29.213
> 
> 标签：php, mysql

我目前正在使用 tinyint 在 mysql 中存储布尔值，并且正在尝试查询数据库但它失败了。我得到的错误是`Warning: mysql_num_rows() expects parameter 1 to be resource, boolean given`，如果我没记错的话，这意味着查询不起作用。在我发布查询之前，让我说我正在使用实际上已弃用的 php 进行查询，但是它不会上线，我只需要它能够真正快速地工作。我知道这些东西都在更新，所以随时分享任何相关材料（我确实需要按原样赶上）但是我正在寻找的解决方案是针对我的老学校查询。查询是：

`$sql = mysql_query("SELECT * FROM contact ORDER BY id ASC WHERE read='0'");`

其中 read 是相关的 tinyint。

我已经尝试`WHERE read=0` 过`WHERE read=false`

这些都不起作用，我提前感谢任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T20:30:41.707

您需要正确构造查询：

```
"SELECT * FROM contact WHERE read=0 ORDER BY id ASC" 
```

WHERE 在 ORDER BY 之前出现。

此外，“mysql_num_rows() 期望参数 1 是资源”正在发生，因为您正在对失败的查询调用方法 - 而不是资源。您可能会在查询本身上遇到正确的错误，例如`mysql_query("SELECT... your query") or die(mysql_error())`但正式我们都建议转移到[PDO](http://php.net/manual/en/book.pdo.php)或[mysqli](http://php.net/manual/en/class.mysqli.php) 并使用它们各自的错误报告实用程序。

# c++ - 链接器错误 LNK2001

> ID：13634193
> 
> 赞同：8
> 
> 时间：2012-11-29T20:29:33.570
> 
> 标签：c++, constructor, linker, visual-studio-2012

当我尝试创建一个对象时，我在 Visual Studio 中收到 LNK2001 错误，我认为这是构造函数的问题，因为更改构造函数会更改错误。

```
Customer bob("Bob", "25 Bob Lane", "01bob82", "M", "bob/bob/bob"); 
```

这一行给出了这个错误：

```
Error   1   error LNK2001: unresolved external symbol "public: __thiscall
Customer::Customer(class std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class 
std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> >)" (??0Customer@@QAE@V?$basic_string@DU?$char_traits@D@std@@V?
$allocator@D@2@@std@@0000@Z)    D:\Dropbox\Work\C++\C++ Assignment\C++ 
Assignment\driver.obj 
```

包含构造函数的客户类：

```
#pragma once
#include "l_list.h"
#include "Account.h"
#include <string>

using namespace std;

class Customer
{
private:
    l_list<Account> accounts;
    string name;
    string address;
    string telNo;
    string sex;
    string dob;

public:
    Customer(string name, string address, string telNo, string sex, string dob)
    {
        Customer::name = name;
        Customer::address = address;
        Customer::telNo = telNo;
        Customer::sex = sex;
        Customer::dob = dob;
    }

    void createAccount()
    {
        cout << "What type of account?";

    }

}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T01:22:27.673

如果你有链接错误，那么你的代码在语法上是可以的，否则你会得到编译器错误。

您应该检查（或添加）的是使用 Customer 类的项目的 Dependencies 属性中的路径。在VS中，您可以找到它“项目属性->配置属性->链接器->输入->附加依赖项”。似乎链接器找不到具有客户实现的外部库。您可以成功编译您的项目，因为所有#include 都是正确的，但您在链接阶段失败只是因为依赖关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T20:42:42.070

那里的东西对我来说看起来不错。检查其他事情，例如确保您的命名空间是正确的，或者没有另一个/冲突的“客户”定义等。尝试注释掉大部分代码或将您的代码缩减为一个小测试用例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-17T15:24:27.413

我遇到了完全相同的问题。这就是我修复的方式：

在文件调用构造函数中使用`#include<string>`而不是。`#include "string.h"``Customer`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-23T08:55:55.243

我有同样的错误。事实证明，一个必要的功能被注释掉了。当我取消注释此功能时，错误消失了。

# iphone - UIProgressView 指示器未以正确的“进度”更新

> ID：13634204
> 
> 赞同：1
> 
> 时间：2012-11-29T20:30:12.320
> 
> 标签：iphone, uiprogressview

我正在异步下载图像并将它们显示在 UITableView 中。下载图像时，UIProgressView 应显示在相应的表格行中。下载完成后，进度视图应替换为实际图像。

在我的表格视图中，我使用了一个名为 ProgressTableViewCell 的自定义单元格，它是 UITableViewCell 的子类。它有一个 UIProgressView IBOutlet。

我从 NSURLConnection 创建了一个 NSOperation 并将它们添加到一个 NSOperationQueue 中。作为代表

接收数据

方法被调用，通知被发布到我的表格视图控制器以更新相应的表格行

reloadRowsAtIndexPaths

表视图的方法。我的 cellForRowAtIndexPath 对重新加载的行执行以下操作：

```
 ProgressTableViewCell *cell = (ProgressTableViewCell*)[tableView dequeueReusableCellWithIdentifier:@"ProgressCell"];

    float received = [[downloadInfo objectForKey:@"receivedBytes"] floatValue];
    float total = [[downloadInfo objectForKey:@"totalFileSize"] floatValue];

    NSNumber* percentage= [NSNumber numberWithFloat:received/total];
    NSMutableDictionary* userInfo = [[NSMutableDictionary alloc] init];
    NSLog(@"percentage %f", percentage.floatValue);
    [userInfo setObject:cell forKey:@"cell"]; 
    [userInfo setObject:percentage forKey:@"percentage"];  

    [self performSelectorOnMainThread:@selector(updateProgressView:) withObject:userInfo waitUntilDone:NO];
    NSLog(@"received: %@", [downloadInfo objectForKey:@"receivedBytes"]);

    NSLog(@"Progress: %f", cell.progressView.progress);
    return cell; 
```

updateProgressView 方法看起来像

```
- (void)updateProgressView :(NSMutableDictionary *)userInfo
{
    ProgressTableViewCell* cell = [userInfo valueForKey:@"cell"];

    NSNumber* progress = [userInfo valueForKey:@"percentage"];

   [cell.progressView setProgress:progress.floatValue ];
    NSLog(@"Progress after update: %f", cell.progressView.progress);
} 
```

我正在更新主线程上的进度视图，我什至尝试将 waitUntilDone 设置为 YES 但无济于事。我的进度视图停留在零点。有时，当我在调试时，我会看到进度指示器发生了一些变化，这让我认为这可能是时间问题。但是如何解决呢？

编辑：这是 NSURLConnection 委托的 didReceiveData 方法：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [_responseData appendData:data];
    NSNumber* bytes = [NSNumber numberWithUnsignedInt:[data length]];

    NSLog(@"received bytes:%d", [bytes intValue] );
    NSMutableDictionary* userInfo = [[NSMutableDictionary alloc] init];
    [userInfo setObject:_responseId forKey:@"responseId"];  
    [userInfo setObject:bytes forKey:@"receivedBytes"];

    [self fireNotification: [NSNotification
                                   notificationWithName:@"DidReceiveData"
                                   object:self userInfo:userInfo]];
}

- (void)fireNotification :(NSNotification *)aNotification
{
    [[NSNotificationCenter defaultCenter] postNotification:aNotification];
} 
```

这是我的视图控制器获取通知的方法：

```
-(void) dataReceived:(NSNotification *)notification {

    NSNumber* responseId = [[notification userInfo] objectForKey:@"responseId"];
    NSNumber*  bytes = [[notification userInfo] objectForKey:@"receivedBytes"];

    NSMutableDictionary* downloadInfo = [self getConnectionInfoForId:responseId];

    NSLog(@"received bytes:%ld for response %@", [bytes longValue], responseId );
    NSNumber* totalBytes = [NSNumber numberWithInt:([bytes longValue] + [[downloadInfo objectForKey:@"receivedBytes"] longValue]) ];
    [downloadInfo setObject:totalBytes forKey:@"receivedBytes"];

    float received = [[downloadInfo objectForKey:@"receivedBytes"] floatValue];
    float total = [[downloadInfo objectForKey:@"totalFileSize"] floatValue];

    [downloadInfo setObject:[NSNumber numberWithFloat:received/total] forKey:@"progress"];

    [self reloadRowForResponse:responseId];

} 
```

我还按照建议在我的 cellForRowAtIndexpath 方法中添加了一个 nil 检查：

```
ProgressTableViewCell *cell = (ProgressTableViewCell*)[tableView dequeueReusableCellWithIdentifier:@"ProgressCell"];
    if (cell == nil)
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"ProgressCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];
    }
    float received = [[downloadInfo objectForKey:@"receivedBytes"] floatValue];
    float total = [[downloadInfo objectForKey:@"totalFileSize"] floatValue];

    NSNumber* percentage= [NSNumber numberWithFloat:received/total];
    NSMutableDictionary* userInfo = [[NSMutableDictionary alloc] init];
    NSLog(@"cell:%@", cell);
    NSLog(@"percentage %f", percentage.floatValue);
    [userInfo setObject:cell forKey:@"cell"];  
    [userInfo setObject:percentage forKey:@"percentage"]; 

    [self performSelectorOnMainThread:@selector(updateProgressView:) withObject:userInfo waitUntilDone:NO];

    return cell; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T19:22:24.247

我认为每次调用委托方法时都重新加载表格单元格，这是一种错误的方法。您可以直接抓取可见单元格并直接更新进度指示器，而不是通过数据源。

我假设您有某种方法可以转换`responseId`为要更新的行的索引路径——假设`indexPathForResponseID:`在您的控制器中调用了它。无需重新加载单元格，您只需抓住单元格（如果它是可见的）并更新其进度指示器：

```
- (void)dataReceived:(NSNotification *)notification {

    ...

    float received = [[downloadInfo objectForKey:@"receivedBytes"] floatValue];
    float total = [[downloadInfo objectForKey:@"totalFileSize"] floatValue];

    NSIndexPath *cellPath = [self indexPathForResponseID:responseId];
    ProgressTableViewCell *cell = (ProgressTableviewCell *)[self.tableView cellForRowAtIndexPath:cellPath];
    if (cell) {
        // make sure you're on the main thread to update UI
        dispatch_async(dispatch_get_main_queue(), ^{ 
            [cell.progressView setProgress: (received / total)];
        }
    }
} 
```

但是，您应该知道，如果您的下载量比可见单元格多，则此解决方案还不够——您还应该将每次下载的进度存储在数据源中的某个位置，以便如果表视图确实需要重新加载单元格（由于滚动），它知道如何设置进度指示器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T22:25:54.837

差不多2个月后回到这个问题，我似乎找到了解决方案。不确定这是否是好的做法，但每次更新进度时创建一个新的 UIProgressView 似乎可以解决我的问题。这是方法：

```
-(void)updateProgressView :(NSMutableDictionary *)userInfo
{
    ProgressTableViewCell* cell = [userInfo objectForKey:@"cell"];
    cell.backgroundColor =[UIColor darkGrayColor];
    NSNumber* progress = [userInfo objectForKey:@"percentage"];
    NSLog(@"Progress before update: %f", cell.progressView.progress);

    UIProgressView *pView = [[UIProgressView alloc] initWithProgressViewStyle:UIProgressViewStyleDefault];
    pView.frame = CGRectMake(150, 200, 150, 9);
    pView.progress = progress.floatValue;

    [cell.contentView addSubview:pView];
} 
```

非常感谢大家的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T21:44:38.837

我发现在很多这样的情况下，您认为自己拥有的单元格并不是正在更新的单元格。当您重新加载时，您的代码会从可重复使用的单元格中弹出一个单元格，这基本上是一个旧单元格。如果您重新加载，该单元格将被另一个单元格替换。（如果可重复使用的单元格返回 nil，您也没有包括分配新单元格）如果您的单元格滚动关闭，它将重新加载，因此您必须确保将进度条放在那里的单元格上，而不是一个曾经在那里。您可能希望 NSLog 记录您开始传输的单元格的地址，然后在每次更新进度时再次记录。您需要使用该索引路径处的当前单元格更新进度条。它可能不是您最初开始该过程的那个。

# javascript - 成功后无法使 jQuery 正确显示有效类

> ID：13634217
> 
> 赞同：2
> 
> 时间：2012-11-29T20:30:54.003
> 
> 标签：javascript, jquery, validation

我在验证表单时遇到了一些问题：

*   当验证返回**error**时，它会显示一个包含交叉图像和消息的 span 元素，这与预期的一样。

*   **但是**，当验证**成功**时，它**会显示多个 span 元素**，**一个**挨一个，包含一个复选标记图像（抱歉，无法上传图像，因为我是这里的新手）。

### 代码：

**jQuery 验证：**

```
$("#signupform").validate({...
    errorClass: "error",
    validClass: "valid",
    errorElement: "span",

    highlight: function(element, errorClass, validClass) {
        $(element).addClass(errorClass).removeClass(validClass);
    },

    unhighlight: function(element, errorClass) {
        $(element).removeClass(errorClass);
    },

    success: function(label) {
        label.addClass('valid').removeClass('error');
    }
});​ 
```

**HTML 表单：**

```
 ...          
<div class="field">
   <label for="email">Email:</label>
   <input type="text" id="email" name="email" />                    
   <span id="email_status"></span>  
</div>
<div class="field">
   <label for="username">Username:</label>
   <input type="text" id="username" name="username" />  
   <span id="username_status"></span>   
</div>
<div class="field">
   <label for="password">Password:</label>
   <input type="text" id="password" name="password" />                      
</div>
<div class="field">
   <label for="confirmPassword">Confirm password:</label>
   <input type="password" id="confirmPassword" name="confirmPassword" />                    
</div>
... 
```

**注意：** “email_status”和“username_status”特定于 ajax 可用性验证。

CSS：

```
#signupform span{  
    width:auto;
    height:16px;
    padding-left:30px;  
    margin-left:10px; 
    display:inline-block;
    vertical-align:text-bottom;
    font-family: Avant Garde, Arial,sans-serif;
    font-size:12px;
    border:1px solid #000;
}

#signupform span.valid  {
  background:url("../images/tick.png") left center no-repeat;
}

#signupform  span.error{
  background:url("../images/error.png") left center no-repeat;
  color:#B94A48; 
} 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:36:16.637

在成功函数中添加检查条件..

```
success: function(label) {
    if(!label.hasClass('valid')){
        label.addClass('valid')
    }
    label.removeClass('error');
} 
```

**更新代码**

```
$("#signupform").validate({
    rules: {
        password: "required"
    },
    messages: {
        password: {
            required: "Este campo es requerido."
        }
    },
    errorClass: "error",
    validClass: "valid",
    errorElement: "span",
    highlight: function(element, errorClass, validClass) {
        $('.field span').remove();
        $(element).addClass(errorClass).removeClass(validClass);
    },
    unhighlight: function(element, errorClass) {
        $(element).removeClass(errorClass);
    },
    success: function(label) {
        $('.field span:gt(0)').remove();
        var $label = $(label);
        if (!$label.hasClass('valid')) {
            $label.addClass('valid');
        }
        $label.removeClass('error');
    }
});​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/DwbcT/3/)**

# html - 在 Chrome/Firefox 中以表格居中对齐表格

> ID：13634220
> 
> 赞同：-1
> 
> 时间：2012-11-29T20:31:10.043
> 
> 标签：html, css, firefox, google-chrome, cross-browser

我的页面上有一个表格和表格，我想居中。通过在右侧和左侧设置宽度为 50% 的空白表格列，我能够在 IE 中将其居中，但这在 Chrome 或 Firefox 中并没有产生相同的结果。我需要表格居中。到目前为止，我得到的是：

```
 table {
       width:580px;
       margin-left: auto;
       margin-right: auto;
       }
 form {
      width:580px;
      margin:0 auto;
      } 
```

现在表格显示为左对齐，但我需要它居中。

附加信息：

```
label {
    padding-right:10px;
    text-align:left;
    {
table   {
    width: 580px;
    margin-left: auto;
    margin-right: auto;
    }

.centerspacer {
    width:50%;
    }

td {
    padding:5px;
    }
.center {
    text-align:center;
    }

form    {
    width: 580px;
    margin: 0 auto;
    }

</style>

</head>
<body>

<form action="https://test.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8" method="POST">

<table>

<tr>
<td class="centerspacer"></td>
<td><label  for="first_name">First Name</label></td>
<td><input  id="first_name" maxlength="40" name="first_name" size="20" type="text" />    </td>
<td class="centerspacer"></td>
</tr>
<tr>

<td class="centerspacer"> </td>
 <td><label  for="last_name">Last Name</label></td>
<td><input  id="last_name" maxlength="80" name="last_name" size="20" type="text" /></td>
<td class="centerspacer"> </td>
</tr>

<tr>
<td class="centerspacer"> </td>
<td><label  for="email">Email</label></td>
<td><input  id="email" maxlength="80" name="email" size="20" type="text" /></td>
<td class="centerspacer"> </td>
</tr>

<tr>
<td class="centerspacer"></td>
<td><label  for="phone">Phone</label></td>
<td><input  id="phone" maxlength="15" name="phone" size="20" type="text" /></td>
<td class="centerspacer"></td>
</tr>

<tr>
<td class="centerspacer"></td>
<td><label  for="company">Company</label></td>
<td><input  id="company" maxlength="40" name="company" size="20" type="text" /></td>
<td class="centerspacer"></td>
</tr>

<tr><td class="centerspacer"></td>
<td>
<label  for="city">City</label></td>
<td><input  id="city" maxlength="40" name="city" size="20" type="text" /></td>
<td class="centerspacer"></td>
</tr>

<tr>
<td class="centerspacer"></td>
<td><label  for="state">State/Province</label></td><td><input  id="state" maxlength="20"     name="state" size="20" type="text" /></td>
<td class="centerspacer"> </td>
</tr> 
```

```
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:08:28.697

你的CSS是问题：

```
label {
  padding-right:10px;
  text-align:left;
{  <-----------------  wrong direction ;-) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:38:59.247

您可以尝试将表格包装在这样的居中 div 中

HTML

```
<div>
    <table>
        <tr>
            <td>foo</td>
            <td>bar</td>
        </tr>    
    </table>
</div>
<form>
    <label><input type="text"/>Label</label>
</form> 
```

​ CSS

```
div {
    width: 580px;
    margin: 0 auto;
}
table {
    background: red;
    width:580px;
    margin-left: auto;
    margin-right: auto;
}
form {
    background: blue;
    width:580px;
    margin:0 auto;
}​ 
```

在这里看小提琴 - [http://jsfiddle.net/DsbMT/1/](http://jsfiddle.net/DsbMT/1/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-29T20:35:15.637

编辑：

试试这个

```
table.inner {
float:right;width:50px
} 
```

来源

[http://www.sitepoint.com/forums/showthread.php?588052-center-align-in-google-chrome-and-fireFox](http://www.sitepoint.com/forums/showthread.php?588052-center-align-in-google-chrome-and-fireFox)

# php - 变量为空时出现的 Div 类。如何删除它们？

> ID：13634231
> 
> 赞同：0
> 
> 时间：2012-11-29T20:31:58.607
> 
> 标签：php, variables, html, if-statement

我有一个图片库，图片下方有一个信息栏和一个带有项目标题和描述的关闭按钮。

但问题是，如果我将标题和描述留空，信息栏和十字仍然会出现。当标题和描述为空时，我希望它们都不存在。我不能将 infobar 和 infobar-close div 类放在 if ($project1title !== '') 等之后，因为那样我必须为每个项目重复它们，然后我将拥有多个 infobar 和 infobar-close div 类。

我该如何解决这个问题？

```
<div class="infobar"><div class="infobar-close"></div>
if ($project1title !== '') if ($project1description !== '') {
echo '<span id="title"></span><span id="description"></span>';
if ($project2title !== '') if ($project2description !== '') {
echo '<span id="title"></span><span id="description"></span>'; 
if ($project3title !== '') if ($project3description !== '') {
echo '<span id="title"></span><span id="description"></span>';
if ($project4title !== '') if ($project4description !== '') {
echo '<span id="title"></span><span id="description"></span>';
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:37:02.783

你需要扭转你的逻辑：

*   首先构建包含您要回显的内容的 html 字符串；
*   如果找到内容，则在途中设置标志；
*   如果设置了标志，则回显您的 html 字符串。

除了 html 中的 ID 需要是唯一的。

一个例子：

```
$html = '<div class="infobar"><div class="infobar-close"></div>';
$content = false;

if ($project1title !== '' && $project1description !== '')
{
  $html .= '<span id="title"></span><span id="description"></span>';
  $content = true;
}
// etc.

$html .= '</div>';

if ($content)
{
  echo $html;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:43:24.230

您需要询问是否设置了任何 projectTitles 并且不为空

或者您将所有标题和描述放入一个数组并执行 foreach ...这可以节省一些代码

```
$infos = array(
1 => array('title' => 'abc', 'description' => 'blablabla'),
2 => array('title' => 'abc', 'description' => 'blablabla'),
....
);

if(is_array($infos) && count($infos) > 0){
    echo '<div class="infobar"><div class="infobar-close"></div>';
    foreach ($infos as $info)
        if(!empty($info['title']) && !empty($info['description']))
            echo '<span id="title"></span><span id="description"></span>';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T20:44:23.490

我建议为您的项目使用数组结构。类似于以下内容：

```
$projects = array();
$projects[0] = array("title"=>"Firstproj", "description"=>"Lorem ipsum");
$projects[1] = array("title"=>"Secondproj", "description"=>"Lorem ipsum"); 
```

这样，您可以简单地遍历数组：

```
foreach($projects as $index => $project){
    if ($project[$index]["title"] !== '' && $project[$index]["description"] !== '') {
        echo '<div class="infobar">
                  <div class="infobar-close"></div>
                  <span id="title">$project[$index]["title"]</span>
                  <span id="description">$project[$index]["description"]</span>
              </div>';
    }
} 
```

# asp.net - asp.net 手动复制到服务器

> ID：13634232
> 
> 赞同：0
> 
> 时间：2012-11-29T20:32:12.413
> 
> 标签：asp.net, html, webpage

所以我刚刚获得了一个托管在 hostasp.net 上的站点。在 VS 中，我使用的是网站而不是 Web 应用程序。在我网站下主机的控制面板中，我有文件夹（数据、日志、wwwroot）。我当前的项目只有 1 个 javascript 文件、1 个 aspx 页面和一个 web.config。我将 Default.aspx & web.config 直接放在 wwwroot 下。在 VS 中，我的 javascript 文件位于名为 Scripts 的子文件夹中，因此我在主机站点上创建了此子文件夹并将我的 javascript 文件放在那里。

当我访问我的站点时，我收到“'/' 应用程序中的服务器错误”。错误。我在这里搞砸了什么？

另外，如果我有一个隐藏文件的代码，我应该把它放在哪里？它应该以某种方式编译吗？当我构建 VS 项目时，它没有给我任何 dll 或任何东西。现在我在后面的代码中没有任何内容，只是想知道以后是否有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T07:01:05.880

如果您使用的是 Visual Studio：

*   您当然可以将文件复制到您的实时服务器。您的“代码隐藏”文件将在运行时编译。
*   您可以`Publish`使用网站或 Web 应用程序，以便您可以选择预编译（到 dll）所有代码（并且将在`/bin`文件夹中）。

如果您想消除您需要“推送”到实时服务器的文件的“猜测”。您可以`publish`到本地文件系统或直接到 FTP。VS 将预编译您的网站或 Web 应用程序，并“收集”构成您的网站/应用程序的所有必要文件，并将其保存在您指定的文件夹/FTP 站点中。

如果您选择发布到文件系统，那么您所要做的就是将/ftp（无论如何）复制到您的实时站点。你可能会问，为什么还要发布到本地（首先）才到 FTP 呢？因此，您可以完全了解所有这些是如何工作的 - 不同的发布选项等本地（这本质上是您的生产站点的确切结构）。

* * *

## 发布网站（VS）：

![发布网站截图](../Images/a194732d2ab99a8fdf7b7667e27dde38.png)

* * *

## 发布 Web 应用程序 (VS)：

![发布网络应用程序](../Images/4ae3db0895a70c01d1faeb53281fc50a.png)

* * *

唯一可能不起作用的情况是您的主机没有您可能拥有的“位”。例如，并非所有主机都可能拥有来自 Microsoft 的最新/最好的，例如 Web API 及其所需的所有程序集。

但同样，该工具可以帮助`Add Deployable Dependencies`......当你发布时，依赖项都是“bin部署”的（意味着它们将在`/bin`文件夹中）：

![添加可部署依赖项截图](../Images/86bdddc1680105e1137a4d3e46749ec3.png)

嗯...

# c - visual studio express 2012 simple c program fatal error LNK1561: entry point must be defined

> ID：13634237
> 
> 赞同：1
> 
> 时间：2012-11-29T20:32:26.437
> 
> 标签：c, visual-studio-2012

在使用 Windows 7 控制台中的 cl.exe test.c 编译和链接以下简单 test.c 时：

```
#include "stdio.h"
#include "stdlib.h"

int main(int argc, char* args[]){
    int i;
    i=0;
    printf("i=%d",i);
    return 0;
} 
```

我得到了 LINK：致命错误 LNK1561：必须定义入口点。它编译没有问题，但链接失败。此外，如果我将文件名更改为 test.cpp，那么它工作正常。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:55:56.997

我复制了您的代码并对其进行了编译，`cl.exe test.c`并且效果很好。我认为你有一个配置问题。

首先，您使用的是 Visual Studio 命令行环境吗？确保通过在命令行上键入：

```
vsvars32 
```

然后尝试使用：

```
cl.exe test.c kernel32.lib 
```

# regex - 如何使用 Vim 中的搜索和替换从乳胶文件中删除命令？

> ID：13634238
> 
> 赞同：3
> 
> 时间：2012-11-29T20:32:31.397
> 
> 标签：regex, vim

我想在乳胶文件中进行搜索和替换，如下所示：

```
:%s/\\todo{.*}/\1/gc 
```

那应该将“”之类的文本转换`abc \todo{def} ghi`为“ `abc def ghi`”。碰巧当`\todo{...}`命令在另一个命令中时，vim 会尝试将第二个（右）括号与外部命令的括号匹配。例如，当它应该是“ ”时，“ `abc \textbf{def \todo{ghi} jkl}`”变成了“ ”。`abc \textbf{def ghi} jkl``abc \textbf{def ghi jkl}`

有没有办法匹配相应的括号？

**编辑：**

很抱歉之前没有指出这一点。如果它可以与对应的括号完全匹配，那就太好了，因为里面可以有命令，也可以在`\todo{...}`命令之外。

**编辑：**

```
"abc \todo{def \textbf{ghi} jkl}" -> "abc def \textbf{ghi} jkl"
"abc \textbf{def \todo{ghi} jkl}" -> "abc \textbf{def ghi jkl}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:47:21.860

**非递归**

告诉它匹配除 {} 之外的任何内容：

```
:%s/\\todo{\([^{}]\+\)}/\1/ 
```

**递归的**

Vim 正则表达式语言不支持以您建议的方式匹配模式所需的[条件正则表达式。](https://stackoverflow.com/questions/2901240/conditional-regex-in-vim/2901319#2901319)

但是，您可以使用 perl 之类的外部语言来执行此操作：

```
:perldo $_ =~ s/\\todo ({( (?: [^{}]*+ | (?1) )* )}) /\2/gx 
```

有关递归正则表达式的更多信息，请查看[此 SO 帖子](https://stackoverflow.com/questions/4840988/the-recognizing-power-of-modern-regexes/4843579#4843579)。我还发现[We's Puzzling Blog](http://weblogs.asp.net/whaggard/archive/2005/02/20/377025.aspx)有助于找出这些正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:35:47.867

你不希望你的正则表达式是贪婪的。查看答案[如何在 vim 中使我的匹配不贪心？](https://stackoverflow.com/questions/1305853/how-can-i-make-my-match-non-greedy)

在您的情况下，这应该可以解决问题：

```
:%s/\v\\todo\{(.{-})\}/\1/gc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T21:42:36.347

[可以使用正则表达式匹配嵌套模式吗？](https://stackoverflow.com/questions/133601/can-regular-expressions-be-used-to-match-nested-patterns)不。

我们可以支持一级嵌套，如下所示：

我们想在`\todo{}`. 所以我们必须尽可能多地`[^{}]`匹配`{[^{}]*}`。

```
:%:s/\\todo{\(\([^{}]\|{[^{}]*}\)*\)}/\1/ 
```

我们添加了一个额外`\(\)`的东西来将整个东西存储在`\1`.

# arrays - Delphi XE3 -> 整数到字节数组

> ID：13634240
> 
> 赞同：6
> 
> 时间：2012-11-29T20:32:41.013
> 
> 标签：arrays, delphi, integer, byte

我有一个数据结构：

```
data = array of integer; 
```

我已经从一个

```
source = array of byte; 
```

和

```
data[x] := Source[offset] or (Source[offset + 1] shl 8) or
    (Source[offset + 2] shl 16) or (Source[offset + 3] shl 24); 
```

处理完这些块后，我必须将它们带回“字节”......

任何的想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T20:34:28.990

你的意思是这样吗？

```
var
  i: integer;
  b1, b2, b3, b4: byte;
begin
  b1 := byte(i);
  b2 := byte(i shr 8);
  b3 := byte(i shr 16);
  b4 := byte(i shr 24); 
```

试一下，例如，

```
procedure TForm1.FormCreate(Sender: TObject);
var
  i: integer;
  b1, b2, b3, b4: byte;
begin
  i := $AABBCCDD;
  b1 := byte(i);
  b2 := byte(i shr 8);
  b3 := byte(i shr 16);
  b4 := byte(i shr 24);
  ShowMessage(IntToHex(b1, 2));
  ShowMessage(IntToHex(b2, 2));
  ShowMessage(IntToHex(b3, 2));
  ShowMessage(IntToHex(b4, 2));
end; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-29T20:46:02.277

您可以使用 Move 在单行中执行此操作。

```
Move(source[0], dest[0], Length(source)*SizeOf(source[0])); 
```

如果您需要执行网络/主机字节顺序转换，则可以在`Move`.

在相反的方向上，您将全部反向进行。

如果您没有字节顺序问题，那么您实际上可能根本不需要转换为字节数组。您可以按原样使用整数数组。请记住，在没有字节顺序问题的情况下，字节数组和整数数组的内存布局是相同的（这就是您能够使用 blit 的原因`Move`）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-29T21:08:51.280

嗯...我看到一个使用 Move 的答案和一个使用 shift 的答案，但是简单的演员阵容呢？：

```
var
  I: Integer;
  B: array[0..3] of Byte;
begin
  // from bytes to integer:
  I := PInteger(@B)^;
  // from integer to bytes:
  PInteger(@B)^ := I; 
```

或者使用您的数组：

```
data[i] := PInteger(@source[offset])^; 
```

反之亦然：

```
// get low byte
source[offset] := PByte(@data[i])^; // or := PByte(@data[i])[0];
// get second byte
secondByte := PByte(@data[i])[1]; // or := (PByte(@data[i]) + 1)^; 
```

或者

```
PInteger(@source[offset])^ := data[i]; 
```

如您所见，您可以通过转换为指针获得很长的路要走。这实际上并不需要指针，编译器足够聪明，可以直接访问这些项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T22:15:13.047

正如所评论的，您无需移动数据即可以字节和整数的形式访问它。

您的原始字节数组可以通过类型转换作为整数数组访问。

```
type
  TArrayInteger = array of Integer;
...
for i := 0 to Pred(Length(source)) div SizeOf(Integer) do
  WriteLn(TArrayInteger(source)[i]); 
```

我经常将这些类型转换隐藏在一个类中。在 XE3 中，可以为简单类型（如字符串、字节、整数等）声明类助手。例如，请参阅 TStringHelper。简单类型的数组也是如此。

下面是一个使用记录助手的例子：

```
type
  TArrayByte = array of Byte;
  TArrayInteger = array of Integer;

  TArrayByteHelper = record helper for TArrayByte
  private
    function GetInteger(index : Integer) : Integer;
    procedure SetInteger(index : Integer; value : Integer);
  public
    property AsInteger[index : Integer] : Integer read GetInteger write SetInteger;
  end;

function TArrayByteHelper.GetInteger(index: Integer): Integer;
begin
  Result := TArrayInteger(Self)[index];
end;

procedure TArrayByteHelper.SetInteger(index: Integer; value: Integer);
begin
  TArrayInteger(Self)[index] := value;
end; 
```

像这样使用它：

```
Var
  source : TArrayByte;
  i : Integer;
begin
  SetLength(source,8);
  for i := 0 to 7 do
    source[i] := i;
  for i := 0 to 1 do
    WriteLn(Format('%8.8X',[source.AsInteger[i]]));
  ReadLn;
end. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-02T08:50:30.087

要将其构建为函数：

```
Type TBytes = array of byte;

function InttoBytes(const int: Integer): TBytes;
begin
  result[0]:= int and $FF;
  result[1]:= (int shr 8) and $FF;
  result[2]:= (int shr 16) and $FF;
end; 
```

# reference - XText：允许无效的交叉引用

> ID：13634242
> 
> 赞同：2
> 
> 时间：2012-11-29T20:32:51.070
> 
> 标签：reference, grammar, xtext, cross-reference

我需要构建一个包含交叉引用的语法，它可能是无效的，即指向一个不存在的目标。包含此类引用的文件不应产生错误，而只会产生警告。生成器会将其作为特殊情况处理。

我怎样才能用 XText 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T18:56:25.973

无法为 EMF 中不存在的目标创建有效的交叉引用。

我建议使用 EAttributes 而不是 EReferences：

*   在 {YourDSL} 语法中通过**feature=ID**更改**feature=[EClass|ID] 。**
***   提供一个范围计算实用程序，就像它在*{YourDSL}ScopeProvider*类的 *scope_EClass_feature(context, reference)* 方法中完成的那样。由于此范围方法仅使用给定参考的 eType，因此重新实现应该很简单。*   *在{YourDSL}ProposalProvider*中使用此范围计算实用程序来为引入的 EAttribute 建议值。*   或者，您可以在验证规则中使用此实用程序来向此 EAttribute 添加警告/信息（如果它不是“有效的”）。*   最后使用生成器中的实用程序根据有效的目标 eObjects 创建输出。**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-12T14:26:11.220

我在创建 DSL 时也遇到了这个问题，以便为转换阶段的非声明语言提供变量声明。这种方法有效，但问问自己是否真的想要那些讨厌的可能引用。

**您只能**在您的 UI 模块中删除自动生成的错误。为此，请提供`ILinkingDiagnosticMessageProvider`并覆盖函数`getUnresolvedProxyMessage`：

```
class DSLLinkingDiagnosticMessageProvider extends LinkingDiagnosticMessageProvider {
    override getUnresolvedProxyMessage(ILinkingDiagnosticContext context) {
        if(context.context instanceof YourReference) {
            // return null so the your error is left out
            null
        } else {
            // use super implementation for others
            super.getUnresolvedProxyMessage(context)
        }
    }
} 
```

`YourReference`将错过所有链接器错误。但请注意，将有一个所有 fealds 为空的虚拟引用对象。特别是名称丢失了，由于`CyclicLinkingException`. 但是您可以创建一个直接设置名称的新方法。

请注意，虚拟对象将具有您在语法中输入的类型。如果它的摘要你可以很容易地检查女巫参考没有链接。**

# xml - 共现约束

> ID：13634243
> 
> 赞同：2
> 
> 时间：2012-11-29T20:32:55.807
> 
> 标签：xml, xsd, xsd-1.1

我在使用 XML Schema 1.1 编写 XSD 时遇到困难。

我有一个名为 PaymentMethod 的元素，它要么是“C”，要么是“F”：如果 PaymentMethod = “C”，那么它就是一张支票。如果 PaymentMethod = "F"，则为资金转帐。

如何将 BankingInfo（BankName、TransitNo、AccountNo、AccountType）设置为支票的可选信息和资金转账的必填信息？

请参阅下面的代码片段。

* * *

```
<xs:element name="PaymentMethod">
  <xs:simpleType>
    <xs:restriction base="xs:string">
      <xs:enumeration value="C" />
      <xs:enumeration value="F" />
    </xs:restriction>
  </xs:simpleType>
</xs:element>

    <xs:complexType name="BankingInfo" minOccurs="0">
      <xs:sequence>
        <xs:element name="TransitNo" type="xs:string" />
        <xs:element name="AccountNo" type="xs:string" />
        <xs:element name="AccountType">
          <xs:simpleType>
            <xs:restriction base="xs:string">
              <xs:enumeration value="CHK" />
              <xs:enumeration value="SAV" />
            </xs:restriction>
          </xs:simpleType>
        </xs:element>
        <xs:element name="BankName" type="xs:string" />
      </xs:sequence>
    </xs:complexType> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T05:54:03.713

您将需要在 BankingInfo 节点的同一级别添加断言，因为断言适用于同一级别或更低级别，但无法向上导航到父级别。断言测试应检查帐户类型的值，并确保您希望“必需”的字段实际上具有值。

任何一个

```
<xs:assert test="/root/PaymentMethod eq 'C' or (/root/PaymentMethod eq 'F' and count(/root/BankingInfo) > 0)"/> 
```

或者，如果您需要一些银行信息，但不是所有字段，您可以执行类似的操作

```
<xs:assert test="/root/PaymentMethod eq 'C' or (/root/PaymentMethod eq 'F' and string-length(/root/BankingInfo/TransitNo) > 0 and string-length(/root/BankingInfo/AccountNo) > 0)"/> 
```

上面两个都假设一些类似于下面的结构（提供的部分不是一个足够完整的例子来将断言放在正确的级别）

```
<?xml version="1.0" encoding="UTF-8"?><xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:vc="http://www.w3.org/2007/XMLSchema-versioning" elementFormDefault="qualified" attributeFormDefault="unqualified" vc:minVersion="1.1">
<xs:element name="root">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="PaymentMethod">
                <xs:simpleType>
                    <xs:restriction base="xs:string">
                        <xs:enumeration value="C"/>
                        <xs:enumeration value="F"/>
                    </xs:restriction>
                </xs:simpleType>
            </xs:element>
            <xs:element name="BankingInfo" minOccurs="0" maxOccurs="1">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element name="TransitNo" type="xs:string"/>
                        <xs:element name="AccountNo" type="xs:string"/>
                        <xs:element name="AccountType">
                            <xs:simpleType>
                                <xs:restriction base="xs:string">
                                    <xs:enumeration value="CHK"/>
                                    <xs:enumeration value="SAV"/>
                                </xs:restriction>
                            </xs:simpleType>
                        </xs:element>
                        <xs:element name="BankName" type="xs:string"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
        <xs:assert test="/root/PaymentMethod eq 'C' or (/root/PaymentMethod eq 'F' and count(/root/BankingInfo) > 0)"/>
    </xs:complexType>
</xs:element> 
```

# mysql - 使用 Case 进行更有效的 group by 查询

> ID：13634244
> 
> 赞同：1
> 
> 时间：2012-11-29T20:32:57.893
> 
> 标签：mysql, performance, group-by

我有以下查询构建一个记录集，该记录集在饼图中用作报告。

它不是特别经常运行，但是当它运行时需要几秒钟，我想知道是否有任何方法可以提高效率。

```
SELECT
  CASE
    WHEN (lastStatus IS NULL)     THEN 'Unused'
    WHEN (attempts > 3 AND callbackAfter IS NULL)   THEN 'Max Attempts Reached'
    WHEN (callbackAfter IS NOT NULL AND callbackAfter >  DATE_ADD(NOW(), INTERVAL 7 DAY)) THEN 'Call Back After 7 Days'
    WHEN (callbackAfter IS NOT NULL AND callbackAfter <= DATE_ADD(NOW(), INTERVAL 7 DAY)) THEN 'Call Back Within 7 Days'
    WHEN (archived = 0)     THEN 'Call Back Within 7 Days'
    ELSE 'Spoke To'
  END AS statusSummary,
  COUNT(leadId) AS total
FROM
  CO_Lead
WHERE
  groupId = 123
  AND
  deleted = 0
GROUP BY
  statusSummary
ORDER BY
  total DESC; 
```

我有一个 ( `groupId, deleted`) 的索引，但我不确定将任何其他字段添加到索引中是否会有所帮助（如果可以，我如何决定哪个应该先行？`callbackAfter`因为它使用得最多？）

该表有大约 500,000 行（但从现在起每年将增加 10 倍。）

我唯一能想到的另一件事是将它分成 6 个查询（将 WHEN 子句移到 WHERE 中），但这会花费 3 倍的时间。

编辑：

这是表定义

```
CREATE TABLE CO_Lead (
  objectId                             int UNSIGNED       NOT NULL AUTO_INCREMENT,
  groupId                              int UNSIGNED       NOT NULL,
  numberToCall                         varchar(20)        NOT NULL,
  firstName                            varchar(100)       NOT NULL,
  lastName                             varchar(100)       NOT NULL,
  attempts                             tinyint            NOT NULL default 0,
  callbackAfter                        datetime           NULL,
  lastStatus                           varchar(30)        NULL,
  createdDate                          datetime           NOT NULL,
  archived                             bool               NOT NULL default 0,
  deleted                              bool               NOT NULL default 0,
  PRIMARY KEY (
    objectId
  )
) ENGINE = InnoDB;
ALTER TABLE CO_Lead ADD CONSTRAINT UQIX_CO_Lead UNIQUE INDEX (
  objectId
);
ALTER TABLE CO_Lead ADD INDEX (
  groupId,
  archived,
  deleted,
  callbackAfter,
  attempts
);
ALTER TABLE CO_Lead ADD INDEX (
  groupId,
  deleted,
  createdDate,
  lastStatus
);
ALTER TABLE CO_Lead ADD INDEX (
  firstName
);
ALTER TABLE CO_Lead ADD INDEX (
  lastName
);
ALTER TABLE CO_Lead ADD INDEX (
  lastStatus
);
ALTER TABLE CO_Lead ADD INDEX (
  createdDate
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:10:31.527

尝试删除索引以查看这是否会提高性能。

在某些数据库中，索引不一定会提高性能。如果您有索引，MySQL 将始终使用它。在这种情况下，这意味着它将读取索引，然后必须从每一页读取数据。页面读取是随机的，而不是顺序的。对于必须读取所有页面的查询，这种随机读取会*降低*性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T02:30:50.047

笔记：

1.  如果`leadId`不能`NULL`，则更`COUNT(leadId)`改为`COUNT(*)`。它们在逻辑上是等价的，但大多数版本的 MySQL 优化器并不那么聪明地识别它。
2.  去掉两个多余的`callbackAfter IS NOT NULL`条件。如果`callbackAfter`满足第二部分，则无论如何它都不能为空。
3.  您可以受益于将查询分成 6 个部分并为每个部分添加适当的索引 - 但取决于条件是否`CASE`重叠，您可能会得到错误或正确的结果。

可能的重写（注意不同的格式并检查它是否返回相同的结果，它可能不会！）

```
SELECT
    cnt1 AS "Unused"
  , cnt2 AS "Max Attempts Reached"
  , cnt3 AS "Call Back After 7 Days"
  , cnt4 AS "Call Back Within 7 Days"
  , cnt5 AS "Call Back Within 7 Days"
  , cnt6 - (cnt1+cnt2+cnt3+cnt4+cnt5) AS "Spoke To"
FROM
  ( SELECT
      ( SELECT COUNT(*)  FROM CO_Lead
        WHERE groupId = 123 AND deleted = 0
          AND lastStatus IS NULL
      ) AS cnt1
    , ( SELECT COUNT(*)  FROM CO_Lead
        WHERE groupId = 123 AND deleted = 0
          AND attempts > 3 AND callbackAfter IS NULL
      ) AS cnt2
    , ( SELECT COUNT(*)  FROM CO_Lead
        WHERE groupId = 123 AND deleted = 0
          AND callbackAfter >  DATE_ADD(NOW(), INTERVAL 7 DAY)
      ) AS cnt3
    , ( SELECT COUNT(*)  FROM CO_Lead
        WHERE groupId = 123 AND deleted = 0
          AND callbackAfter <= DATE_ADD(NOW(), INTERVAL 7 DAY)
      ) AS cnt4
    , ( SELECT COUNT(*)  FROM CO_Lead
        WHERE groupId = 123 AND deleted = 0
          AND archived = 0
      ) AS cnt5
    , ( SELECT COUNT(*)  FROM CO_Lead
        WHERE groupId = 123 AND deleted = 0
      ) AS cnt6
  ) AS tmp ; 
```

如果它确实返回正确的结果，您可以添加要用于每个子查询的索引：

对于子查询 1： `(groupId, deleted, lastStatus)`

对于子查询 2、3、4： `(groupId, deleted, callbackAfter, attempts)`

对于子查询 5： `(groupId, deleted, archived)`

* * *

另一种方法是保留您的查询（只注意上面的注释 1 和 2）并添加一个广泛的覆盖索引：

```
 (groupId, deleted, lastStatus, callbackAfter, attempts, archived) 
```

# mysql - 根据行数执行查询？

> ID：13634245
> 
> 赞同：0
> 
> 时间：2012-11-29T20:32:58.533
> 
> 标签：mysql, sql, database, triggers

我对 MySQL 不太熟悉，但我正在尝试创建一个触发器，以便每当插入一行时，如果表中的总行数大于 10，则删除某个行。

我正在寻找的，没有触发器语法，是这样的：

```
IF (SELECT COUNT(*) FROM table) > 10 THEN
//do some stuff
END IF; 
```

然而，这似乎不是可接受的语法。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:41:38.843

```
DELIMITER &&

CREATE TRIGGER trigger_name AFTER INSERT ON table_name FOR EACH ROW

BEGIN

DECLARE x INT;
SET x = (SELECT count(*) FROM table_name); 

IF x > 10 THEN

    DELETE FROM table_name where condition;

END IF;

END&&

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-29T20:40:37.377

```
select count(1) into @cnt from table;
if (@cnt > 10) then
   // do some stuff
end if; 
```

而不是`@cnt`你可以使用声明的变量

# mysql - mysql错误更新或插入失败

> ID：13634246
> 
> 赞同：0
> 
> 时间：2012-11-29T20:32:59.927
> 
> 标签：mysql, insert, unique

我在这里失明了...似乎无法在此 SQL 中找到错误：

```
INSERT INTO sankt_groups_order (
    parent_group_id, 
    child_group_id, 
    order
) VALUES (?,?,?)
ON DUPLICATE KEY UPDATE 
    order = ?
; 
```

我收到此错误：

```
SQLSTATE[42000]: Syntax error or access violation: 
    1064 You have an error in your SQL syntax; check the manual that 
    corresponds to your MySQL server version for the right syntax to use 
    near 'order ) VALUES ('65',NULL,'3') ON DUPLICATE KEY UPDATE order = '3'' 
```

接下来这个 SQL 会按照我的想法做吗？如果丢失，我需要它插入整行并更新顺序（如果存在）......我有一个索引制作`parent_group_id`和`child_group_id`唯一的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T20:35:08.913

`order`是 mysql 中的[保留字](https://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，您必须对其进行转义：

```
 child_group_id, 
    `order`
    ^--   ^--- backticks to escape
) VALUES (?,?,?) 
```

是的，它应该按照你的想法去做。如果存在唯一/主键违规，您只需更改该`order`字段。

# java - 如何在不丢失字段中输入的数据的情况下转发回 JSP 页面？

> ID：13634248
> 
> 赞同：0
> 
> 时间：2012-11-29T20:33:18.607
> 
> 标签：java, model-view-controller, jsp

我有一个简单的基于 MVC 的 JSP 应用程序。就像是：

`*.jsp -> ControllerServlet -> *Command.java -> *Service.java -> *DAO.java -> Oracle db`

应用程序中的典型链接如下所示：

`myapp/controller?cmd=ShowEditUser&userid=55`

这会导致`ShowEditUserCommand.java`execute() 方法运行并将转发到`editUser.jsp`

在`editUser.jsp`中，他们填写字段，然后单击`Save`哪些帖子`myapp/controller?cmd=ModifyUser`运行`ModifyUserCommand.java`execute() 方法，该方法修改用户数据并转发到`viewUser.jsp`。

一切正常。

问题是，`ModifyUserCommand.execute()`我正在检查用户名是否是唯一的。如果他们尝试输入已经存在的用户名，我将错误值设置为`true`并将 errorMessage 值设置为`Already in use`。

然后由于错误，我转发到原始`editUser.jsp`文件（不是 viewUser.jsp），错误显示在表单上方。

我的问题是（终于！;） - 当用户返回`editUser.jsp`并显示错误消息时，他们在字段中输入的数据全部被空白。我该如何设置它，以便他们在字段中输入的内容仍然存在？

任何建议或意见将不胜感激！

抢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:51:29.013

最简单的方法是在 ModifyUserCommand.execute() 中的转发操作中将表单字段传回您的 editUser.jsp。您可以使用单独的参数来做到这一点，即

```
editUser.jsp?field1=1&field2=2 
```

或者，您可以使用其他方法传递数据 - 即编码的 JSON。

然后，您可以通过页面的请求对象处理您的 editUser.jsp 中的字段，并相应地设置您的表单字段值。

根据您使用的底层框架（如果有），可能还有其他方法可以做到这一点。但这是接近它的基本方法。

# wpf - 如何更改所有 FlowDocumentReader 控件中的字体？

> ID：13634250
> 
> 赞同：0
> 
> 时间：2012-11-29T20:33:29.490
> 
> 标签：wpf, fonts, flowdocumentreader

如何更改 WPF 中所有 FlowDocumentReader 控件的字体？

对于一些选择我做

```
FontFamily f = new FontFamily("Verdana");
flowDR.Selection.ApplyPropertyValue(TextElement.FontFamilyProperty, f); 
```

但是如何更改整个文档的字体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T11:27:45.720

我很惭愧...）

```
FontFamily f = new FontFamily("Calibri_click");
myFlow.FontFamily = f; 
```

myFlow = FlowDocument 在哪里

# php - 递归复制文件和文件夹以及子文件夹

> ID：13634253
> 
> 赞同：0
> 
> 时间：2012-11-29T20:33:45.010
> 
> 标签：php, codeigniter

我正在使用我编写的函数来复制目录和文件。它只复制目录和文件一次。仅当文件不存在时，如何将文件从源文件夹复制到目标文件夹？

这是功能。基本上我想将analyst_uploads 中的文件夹labref 及其内容复制到第二个文件夹store_for_issue。如果文件在同一天上传到源文件夹，则应将文件复制到目标文件夹“store_for_issue”。如果不存在则创建文件夹或更新内容

```
 public  function full_copy(  ) {
      $labref=  $this->uri->segment(3);     
      $source='analyst_uploads/'.date('Y').'/'.date('M').'/'.$labref;
      $newfolder='store_for_issue';
      if(is_dir($newfolder)){
          mkdir($newfolder.'/'.$labref,0777,TRUE);
      }
      $target=$newfolder.'/'.$labref.'/';
      copy( $source, $target );

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:48:55.193

这个怎么样：

```
public  function full_copy(  ) {
      $labref=  $this->uri->segment(3);     
      $source='analyst_uploads/'.date('Y').'/'.date('M').'/'.$labref;
      $newfolder='store_for_issue';
      if(!is_dir($newfolder)){
          mkdir($newfolder.'/'.$labref,0777,TRUE);
      }
      $target=$newfolder.'/'.$labref.'/';
      shell_exec('cp -ur '. $source . ' ' . $target);
} 
```

这使用 linux`cp -ur`并且只会复制目标目录中不存在的文件，或者替换目标目录中比源文件更旧的文件。它将递归运行。

当然，如果您想要一个仅限 PHP 的解决方案，您也许可以使用 a`RecursiveDirectoryIterator`或类似的方法来遍历源目录中的所有文件并逐一比较/复制它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:36:46.150

```
if (!file_exists($target)) {
   copy( $source, $target );
} 
```

# c++ - rdbuf() 读取垃圾

> ID：13634255
> 
> 赞同：1
> 
> 时间：2012-11-29T20:33:51.397
> 
> 标签：c++, file, fstream

使用此代码，我从文件中读取了一个字符串。

```
pbuf = infile.rdbuf();
size = pbuf->pubseekoff(0, ios::end, ios::in);
pbuf->pubseekpos (0,ios::in);
buf = new char[size];
pbuf->sgetn(buf, size);
str.assign(buf, buf+size); 
```

我必须读取临时变量中的数据，`char* buff`因为 sgetn 需要 a `char*`not a `string`。
*因此，在问我的实际问题之前，如果有人知道从可能包含空格字符的文件中读取字符串的更好方法，请告诉我（直到 eof 才循环）。*

文件内容为：
blah blah blah
blah blah in a new line

但是我得到的是：
blah blah blah
blah blah in a new line═</p>

玩弄代码，我注意到随着我添加更多`\n`字符，奇怪字符的数量增加了。似乎当我尝试获取文件大小时，每个`\n`字符占用 2 个字节的空间，但是在字符串中它只占用 1 个字节，因此我的字符串看起来很奇怪。我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T20:45:58.597

在 Windows 上，文本文件中的行尾表示为两个字节：0x0d、0x0a。当您使用文本模式从此类文件中读取时，这两个字节将被转换为单个字符 '\n'。当您使用二进制模式时，您正在读取原始字节，并且它们不会为您翻译。如果您不想要它们，则必须自己进行翻译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:45:34.500

这是由于标准库实现将标准 windows 行结尾`\r\n`转换为标准 c++ 行结尾`\n`。

正如@ipc 所说，您可以使用[此答案](https://stackoverflow.com/a/2602258/603688)来做您想做的事。（注意：根据评论，该问题的公认答案实际上并不是最好的方法。）

或者，您可以通过以二进制模式打开流来禁用行尾转换，如下所示：

```
std::ifstream t(fileName, std::ios_base::in | std::ios_base::binary); 
```

# php - 将 UTF8 字符插入 MySQL 数据库，结果好坏参半

> ID：13634256
> 
> 赞同：0
> 
> 时间：2012-11-29T20:33:53.733
> 
> 标签：php, mysql, utf-8

> **可能重复：**
> [一直到 UTF-8](https://stackoverflow.com/questions/279170/utf-8-all-the-way-through)

这里有一个奇怪的问题，我正在努力解决。

我正在使用 PHP 处理一些 CSV 文件并将数据插入 MySQL。数据由大约 10 种不同的欧洲语言组成，一些值在数据库中显示不正确。奇怪的是，它只是一些字符。

例如，在数据库中，我看到以下内容：

```
ö?eden

ba?lang?ç 
```

您可以看到有些 UTF-8 字符是正确的，有些则不是。

我检查了以下内容：

*   数据库字符集和排序规则是 utf8 / utf8_general_ci
*   表字符集和排序规则是 utf8 / utf8_general_ci
*   PHP 文件是 UTF-8
*   PHP 中的 Db 连接器已将字符集设置为 UTF-8（设置名称等）
*   源数据为 UTF-8
*   在插入数据库时​​（在 PHP 代码中）回显数据正确显示，十六进制值看起来也不错。

我不确定我还能做些什么来解决这个问题。如果问题是上述任何一个，那么正确显示的字符肯定也不起作用吗？

感谢您的任何见解。

# ruby-on-rails - 如何以线程安全的方式使会话数据对我的 ruby gem 可用？

> ID：13634257
> 
> 赞同：0
> 
> 时间：2012-11-29T20:34:05.953
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个 API gem，它是一个公共助手库，它使用法拉第向我的 API 发出资源丰富的请求。我想制作一个中间件来检查会话数据是否存在（以哈希的形式），如果存在，会将这些值合并到法拉第发出的任何请求的参数中。

我最初的尝试涉及在 gem 的顶级类（即 MyGem.global_params）中设置元类 attr_accessor (global_params)。中间件可以检查这个变量以获取必要的数据。这意味着任何可以访问我的库的 ApplicationController 都可以实现一个 before_filter 来设置基于会话数据的 global_params 并且 after_filter 可以清除它。这样 ApplicationController 实例发出的所有法拉第请求都将共享相同的 global_params 设置形式会话数据。

我现在想知道这是否是线程安全的。如果不是，我可以用什么另一种方法来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T22:15:08.343

至于你的另一个问题，全局变量几乎总是*做错*的标志，应该尽可能避免。

你需要的是一个工厂方法，可以根据需要自定义你的上下文。

例如，您可能正在做这样的事情：

```
MyGem.global_arg = :foo
MyGem.new(...) 
```

你可以做的是：

```
factory = MyGem.factory(:global_arg => :foo)

factory.new(...) 
```

或者，为了保持类似的感觉：

```
factory = MyGem.factory do |factory|
  factory.global_arg = :foo
end 
```

不是`mattr_accessor`在 MyGem 中创建一个，而是创建一个作为独立对象，MyGem 可以有一个默认实例。

# android - ListView的state_activated、state_selected、state_pressed、state_focused的解释

> ID：13634259
> 
> 赞同：35
> 
> 时间：2012-11-29T20:34:14.410
> 
> 标签：android, android-listview

任何人都可以解释（或指向解释的链接）ListView 项目的 state_activate、state_selected、state_pressed 和 state_focused 之间的区别吗？它们都是 ListViews 的有效状态吗？使用触摸或键盘是否重要？[此链接](http://developer.android.com/resources/articles/touch-mode.html)似乎不再有效。

非常感谢！

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-11-29T20:36:55.993

*   `state_selected`当使用键盘/dpad/轨迹球/等选择项目时使用。
*   `state_activated`在调用 View.setActivated(true) 时使用。这用于“持久选择”（例如，请参阅平板电脑上的设置）
*   `state_pressed`当用户通过触摸或键盘或鼠标按下项目时使用
*   `state_focused`如果项目被标记为可聚焦并且它通过键盘/dpad/轨迹球/等的用户接收焦点，则使用该项目。或者如果项目在触摸模式下可聚焦

# r - rbind 包含一列字符和数字的数据帧列表

> ID：13634263
> 
> 赞同：1
> 
> 时间：2012-11-29T20:34:30.237
> 
> 标签：r, dataframe, rbind

我有一个列名相同但行数不同的两个数据框的列表，rbind.fill 可以帮助将它们组合成一个大数据框，但问题是 df1 中的第一列是数字数据，并且df2 是字符数据，当它们合并时，字符数据全部变为 1，我已经搜索过，但没有解决问题，任何帮助将不胜感激。一个小例子是：

```
station <- c(1:10)
value <- c(101:110)  
df1 <- data.frame(cbind(station,value)) 
station <- c("a","b")
value <- c(101:102)  
df2 <- data.frame(cbind(station,value)) 
data1 <- rbind.fill(df1,df2) 
```

我希望角色保持原样，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T20:43:01.303

如果将其转换为数字，则不是字符，而是一个因素。用于`str`检查这一点。这会让你继续：

```
df2$station <- as.character(df2$station) 
```

编辑：或在创建数据框时使用 keep R 将字符串转换为因子：

```
df2 <- data.frame(cbind(station,value), stringsAsFactors = FALSE) 
```

控制台输出：

```
> station <- c(1:10)
> value <- c(101:110)  
> df1 <- data.frame(cbind(station,value)) 
> station <- c("a","b")
> value <- c(101:102)  
> df2 <- data.frame(cbind(station,value)) 
> df2$station <- as.character(df2$station)
> 
> library(plyr)
> data1 <- rbind.fill(df1,df2)
> data1
   station value
1        1   101
2        2   102
3        3   103
4        4   104
5        5   105
6        6   106
7        7   107
8        8   108
9        9   109
10      10   110
11       a     1
12       b     2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T20:47:54.020

似乎您不必使用`rbind.fill`，因为您的数据框确实具有相同的列名。试试`rbind`哪个会很好。你声明你正在使用一个列表，所以你可能想知道这个小技巧`do.call`：

```
df1 <- data.frame(station = 1:10, value = 101:110) 
df2 <- data.frame(station = c("a","b"), value = 101:102) 
(data1 <- rbind.fill(df1,df2))
rbind(df1,df2)

dfl <- list(df1,df2)
do.call("rbind",dfl) 
```

请注意，我已经“清理”了您的示例代码。您不必连接所有内容。

# coldfusion - 无法连接到 Google Adwords ColdFusion API

> ID：13634264
> 
> 赞同：1
> 
> 时间：2012-11-29T20:34:34.637
> 
> 标签：coldfusion, coldfusion-9, google-ads-api

有人使用 ColdFusion API for Google Adwords 吗？我很难让它工作，我知道我可能是问题所在。任何建议，指针都会有帮助，因为我已经陷入困境。我欠你一个！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:40:51.263

问题是 2012 年 10 月 25 日 v201109 已日落，无法再使用。Martin Orth 的解决方案仍然调用 v201109，即使您将所有内容更改为 v201209（当前版本），对 API 的更改也足以使 CF 库不再工作。我尝试并尝试联系马丁，但没有回复电子邮件。所以本质上，不要尝试使用 ColdFusion API - 如果没有更改，它将无法工作。如果有人对此有更多信息，请告诉我，但目前没有任何效果。

# email - 如何在电子邮件 Outlook 2010 上设置“过期时间”日期

> ID：13634265
> 
> 赞同：1
> 
> 时间：2012-11-29T20:34:34.957
> 
> 标签：email, outlook

我正在使用 Outlook 2010，并希望设置“属性”对话框的“交付选项”部分中的“过期时间”属性。

事实证明，“ExpiryTime”和“RetentionExpirationDate”实际上不再设置该日期（如果有的话）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-29T15:48:16.167

这就是我现在如何让它工作。_s 显示为“7/29/2013”​​，z 显示为“8/5/2013”​​。这使得过期时间显示为“8/5/2013 12:00 AM”。

```
typelib Outlook {00062FFF-0000-0000-C000-000000000046} 9.4
str foldername="Temp"
Outlook.Application app._getactive
Outlook.MailItem msg=app.ActiveExplorer.Selection.Item(1); err out "no selection"; ret
Outlook.MAPIFolder froot=app.GetNamespace("MAPI").Folders.Item(1)
Outlook.MAPIFolder fdest=froot.Folders.Item(foldername)

_s.timeformat("{D}")
DATE z=_s
z=z+7
msg.UnRead = 0
msg.ExpiryTime=z 
```

# mysql - MYSQL查询省略删除

> ID：13634271
> 
> 赞同：-1
> 
> 时间：2012-11-29T20:35:19.740
> 
> 标签：mysql, skip

我的 MySQL 数据库中有一个列，用于删除的值通常是 0 或 1。通常在进行搜索时，我会通过执行“and `deleted`=”0”之类的操作来省略已删除的内容，但我不知道如何在下面获取此查询以省略我的删除的列。任何想法将不胜感激谢谢！

```
$query = "SELECT Status, COUNT(Status) FROM Assets GROUP BY Status"; 

$result = mysql_query($query) or die(mysql_error());

// Print out result
while($row = mysql_fetch_array($result))
{
   echo "". $row['COUNT(Status)'] ." systems ". $row['Status'];
   echo ", ";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:36:38.837

这应该有效：

```
$query = "SELECT Status, COUNT(Status) FROM Assets WHERE Assets.deleted = 0 GROUP BY Status"; 
```

此外，您应该使用[mysqli](http://ca1.php.net/manual/en/book.mysqli.php)或[PDO](http://ca1.php.net/manual/en/book.pdo.php)而不是 mysql（php mysql 库已过时）。

# c# - 将 IIS 配置为基于内容类型进行缓存？

> ID：13634280
> 
> 赞同：1
> 
> 时间：2012-11-29T20:35:43.880
> 
> 标签：c#, asp.net

上周我们在我们的网站上遇到了一个奇怪的问题，这似乎是一个缓存问题。我们页面的一个版本`Content-Type: text/vnd.wap.wml; charset=utf-8`在标题中设置了缓存。

经过一番研究，我发现 asp .net 在`%SystemRoot%\Microsoft.NET\Framework\versionNumber\CONFIG\Browsers`路径中使用 .browser 文件来确定某些用户代理的首选 MIME 类型。基于上面的内容类型，看起来诺基亚手机是第一个在基于上面的内容类型清除缓存后访问我们页面的应用程序，并且 asp 存储了具有该内容类型的页面的缓存版本，而不是`text/html`. 该内容类型的问题是浏览器无法识别它，并且只会将页面显示为纯文本。

我可以验证上述情况是原因。我从我们的池中取出我们的一台服务器，回收站点的应用程序池并重置 iis，然后使用 fiddler 访问页面并将后续标头作为 GET 传递到我们的主页。

```
Accept: text/html
User-Agent: NokiaN90-1/3.0545.5.1 Series60/2.8 Profile/MIDP-2.0 Configuration/CLDC-1.1 
```

这按预期在响应中返回了以下内容类型：

```
Content-Type: text/vnd.wap.wml; charset=utf-8 
```

现在为了解决这个问题，对于 asp 来说，根据它所服务的内容类型缓存页面的各种风格是有意义的，对吧？有没有办法配置 asp 来做到这一点，或者有更好的方法来处理这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T23:31:25.153

我相信如果您计划为不同的客户提供不同的内容类型，通常您会添加 Vary: User-Agent 标头。例如[http://msdn.microsoft.com/en-us/library/system.web.httpcachevarybyheaders.useragent(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.web.httpcachevarybyheaders.useragent(v=vs.100).aspx)

# xslt - 删除变量中的空标签

> ID：13634288
> 
> 赞同：0
> 
> 时间：2012-11-29T20:36:17.180
> 
> 标签：xslt, xslt-2.0

我的问题与另一张海报关于[两阶段处理](https://stackoverflow.com/questions/3199560/two-phase-processing-do-not-output-empty-tags-from-phase-1-xslt-2-0-processing)的 StackOverflow 问题有关。我不想在不完全理解 mode="#all" 以及它如何影响我的 XSLT 的其余部分的情况下使用它。我认为下面的代码完成了同样的事情，而不会冒着干扰其他模板的风险，但希望得到确认。有点像我处理 $completepolicy 两次而无需这样做。

空标签定义：`<field/> <field></field>`. 标签可以具有属性，但永远不会有具有属性的空标签。也永远不会有`<field> </field>`空白可以代表许多其他事物的节点。

鉴于此 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:template match="/">
        <!-- many other apply-templates here -->
        <xsl:variable name="completepolicy" as="element()">
            <holder>
                <TABLE1 type="global">
                    <col1>Red</col1>
                    <col2/>
                </TABLE1>
                <TABLE2>
                    <field1>Blue</field1>
                    <field2/>
                </TABLE2>
            </holder>
        </xsl:variable>
        <xsl:apply-templates mode="emptytags" select="$completepolicy/*"/>
    </xsl:template>
    <xsl:template match="*[not(node())]" mode="emptytags"/>
    <xsl:template match="node() | @*" mode="emptytags">
        <xsl:copy>
            <xsl:apply-templates select="node() | @*" mode="#current"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

$completepolicy 的输出结果：

```
<TABLE1 type="global">
   <col1>Red</col1>
</TABLE1>
<TABLE2>
   <field1>Blue</field1>
</TABLE2> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:27:13.117

为什么你认为`$completepolicy`变量被处理了两次？这在提供的代码中看不到。

我确认提供的代码对我来说看起来不错。

我建议永远不要使用`mode="#all"`. 这太强大和危险了——这几乎是不需要的。

# r - R脚本错误-将值应用于数据框变量

> ID：13634289
> 
> 赞同：3
> 
> 时间：2012-11-29T20:36:19.223
> 
> 标签：r, dataframe

我在使用 R 脚本时遇到了困难。如果我在命令行中运行此行，它会完美运行

```
dbnasc$ano[which(dbnasc$ano>=1605 & dbnasc$ano<1610)]=1605 
```

但是如果用相同的代码定义一个函数就行不通了

```
#Função recode
xclass1=function(ini,fim,per){
t=seq(ini,fim,by=per)
z=length(t)
i=1
while(i<z){
  a0=t[[i]]
  a1=t[[i+1]]
  dbnasc$ano[which(dbnasc$ano>=a0 & dbnasc$ano<a1)] = a0
  i=i+1
  } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T20:55:57.197

（几乎）所有函数都应该返回一些东西。您的函数不返回任何内容，因此不会修改任何变量（除了那些仅临时存在以执行函数的变量）。

尝试使用该函数在函数末尾返回要保留的变量`return()`，或者您可以省略`return`并只给出变量名称：

```
#Função recode
xclass1=function(dbnasc, ini,fim,per){
  t=seq(ini,fim,by=per)
  z=length(t)
  i=1
  while(i<z){
    a0=t[[i]]
    a1=t[[i+1]]
    dbnasc$ano[which(dbnasc$ano>=a0 & dbnasc$ano<a1)] = a0
    i=i+1
  } 
  dbnasc
  #or `return(dbnasc)`
} 
```

现在，您的函数需要一个名为`dbnasc`input 的变量，然后返回该变量以及在该函数期间所做的修改。您可以使用以下方式调用它：

```
dbnasc <- xclass1(dbnasc, etc, etc) 
```

如果要将结果分配回原始变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T21:12:05.877

如果我理解正确，您正在尝试重新编码一个表示一年的整数变量。所需的转换是将年份间隔变为一年。例如，如果您有年份 c(1988, 1993, 1997, 1999)，将它们按十年分组为 c(1980, 1990, 1990, 1990)。如果这确实是你想要的，有一个更简单的方法：

```
year.recoded <- year - year %% interval 
```

控制台中的示例：

```
> x <- c(1988, 1993, 1997, 1999)
> x - x %% 10
[1] 1980 1990 1990 1990 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T22:57:06.667

检查 Jeff 的解决方案后，我的函数重新编码如下所示：

1.  数据框

    ![数据框](../Images/92dca7c5f16a3bb4833696b1dcb48efc.png)

2.  **xclass11 函数**从 datanasc 重新编码年份，给出**第一个**、**最后一个**和**间隔**。

* * *

```
#Função recode
xclass11=function(ini,fim,per){
t=seq(ini,fim,by=per)
z=length(t)
i=1
ano=as.numeric(format(as.Date(dbnasc$datanasc), "%Y"))
while(i<z){
  a0=t[[i]]
  a1=t[[i+1]]
  ano[which(ano>=a0 & ano<a1)]=a0
  i=i+1
  } 
dbnasc=cbind(dbnasc,ano)
return(dbnasc)
} 
```

使用该功能

dbnasc=xclass11(1600,1900,25)

谢谢杰夫和亚历山大。

# mercurial - 在 Mercurial 中合并两个补丁

> ID：13634291
> 
> 赞同：2
> 
> 时间：2012-11-29T20:36:31.360
> 
> 标签：mercurial, patch

我有两个要合并到 mercurial 中的补丁。可悲的是，我删除了导出这些补丁的分支。你们能建议一种合并两个补丁的方法吗？

我在 ubuntu 12.04 机器上使用 Mercurial 2.0.2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T11:22:04.857

如果您启用了 MQ，并假设您从一个空的补丁队列开始：

```
> hg qimport patch1        # Import & apply the first patch into a patch queue
> hg qimport patch2        # Import & apply the second patch into a patch queue
> hg qpop;                 # Pop the second patch (unapply)
> hg qfold patch2          # Fold the second patch into the first (result is called 'patch1')
> hg qexport > new_merged_patch 
```

然后，您可以：

```
> hg qfinish -a            # Convert the currently applied patches (e.g. patch1) to changesets) 
```

或者：

```
> hg qpop                  # Pop the merged patch
> hg qdel patch1           # Delete it from the queue 
```

老实说，为此使用 MQ 有点矫枉过正，但它是一个有用的扩展。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T02:05:05.687

如果您将补丁作为补丁文件，您可以将它们相互叠加并根据结果生成补丁：

```
$ patch -p0 < patch1
$ patch -p0 < patch2
$ hg diff > cumulative.patch 
```

补丁级别`-p0`可能会有所不同，具体取决于补丁的结构。

# php - 如何在 div 中自动调整图像及其对应的文本

> ID：13634295
> 
> 赞同：0
> 
> 时间：2012-11-29T20:36:47.057
> 
> 标签：php, html, css

我想在 div 部分显示图像。这是我正在使用的 CSS

```
 #imagesection {margin:10px 10px 10px 10px; float:left; border: 5px solid #f0f0f0;}
    #container {width:90%; margin:3% 0px 0px 10%;}
    #full_page {height:auto; width:auto;}
    #name {background-color:#FFF; word-wrap:break-word; word-break:}
    </style> 
```

图像显示良好，但是当我添加文本**($name)**时，它失去了风格。请检查下面的图片![在此处输入图像描述](../Images/1de0357b916ce2b597f965f3d60837d7.png)

```
<div id="full_page">
        <div id="container">
            <div id="Gallery">
                <div id="imagesection">
                    <img src = <?php echo  $picture;?> />
                                    <div id="name">
                    <?php echo $name; ?>
                </div>
                </div>

             </div>

        </div>
</div> 
```

如果超出图像长度，我希望文本在新行中继续。我的意思是文本应该自动调整为与 div 内的图像相对应，不留空格。请建议我应该做些什么来实现这一目标......

**更新快照：** ![在此处输入图像描述](../Images/d56b80fb75e074fbed2d7da2be79395d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:05:06.910

在您的图像标签上应用浮动

例如：

```
css
{

#image
{
float: left;
}

}

<img id="image" src = <?php echo  $picture;?> /> 
```

**更新：** 观看更新后的屏幕截图后。我建议您可以做的是获取图像的宽度，然后将其传递给您的 div，这将自动停止文本溢出 div

这是获取高度和宽度的代码

```
<?php

list($width, $height, $type, $attr) = getimagesize("image_name.jpg");

echo "Image width " .$width;
echo "<BR>";
echo "Image height " .$height;
echo "<BR>";
echo "Image type " .$type;
echo "<BR>";
echo "Attribute " .$attr;

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:45:07.797

始终设置您的 img 宽度、高度、边框和 alt 标签。我还将明确设置图像 div 和文本 div 的宽度。例如，如果将它们三个都设置为 500px，则文本应该换行。

# c# - 双工服务引用将接口类型转换为 system.object 类型

> ID：13634297
> 
> 赞同：0
> 
> 时间：2012-11-29T20:36:50.710
> 
> 标签：c#, wcf

这是我的wcf双工服务回调接口：

```
public interface ICallback
{
    [OperationContract(IsOneWay = true)]
    void SendClientCallback(CallbackMessage callbackMessage);

    [OperationContract]
    void GetTemplateList(ref List<ISpecimenTemplateDescriptor> templateDescriptors, IDrawerLayout drawerLayout);
} 
```

我将服务引用配置为使用 System.Collections.Generic.List 类型。我通过右键单击服务引用、选择配置服务选项并更改集合类型来做到这一点。这将服务引用配置为使用 List 的集合类型，而不是默认的 Array 类型。

当我编译和更新我的服务引用时，我的接口类型“ISpecimenTemplateDescriptor”和“IDrawerLayout”被转换为“System.Object”，如下所示：

```
void GetTemplateList(ref System.Collections.Generic.List<object> templateDescriptors, object drawerLayout); 
```

为什么我的接口对象在服务引用中转换为 System.Object？

这是我的服务合同：

```
[ServiceContract(SessionMode = SessionMode.Required, CallbackContract = typeof(ICallback))]
public interface IWcfService
{
      .....
} 
```

以下是我的服务行为：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, ConcurrencyMode = ConcurrencyMode.Reentrant, UseSynchronizationContext = false)]
public class WcfService : IWcfService
{
    ......
} 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:22:50.410

好吧，我已经搜索了高低。最后，我恢复使用可序列化的具体类，而不是尝试在我的服务参考中使用接口。

# java - 用于在 Java 中编辑 XML 内容的 XML 解析器

> ID：13634300
> 
> 赞同：0
> 
> 时间：2012-11-29T20:37:00.407
> 
> 标签：java, xml-parsing

我是 XML 开发的新手。我想知道这里是否有人知道用于将内容添加到 Java 中的 XML 文档中的最佳 XML 解析器是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:38:38.607

如果您要添加或修改内容，我会查看 DOM 解析器。 [dom4j 浮现](http://dom4j.sourceforge.net/)在脑海中。

# arrays - 阵列图。出于某种原因，我的 2 个图没有绘制相同的图

> ID：13634306
> 
> 赞同：0
> 
> 时间：2012-11-29T20:37:19.977
> 
> 标签：arrays, matlab

为什么这些不绘制相同的图表？

```
plot([10 20 30 40 50 60],[10 20 30 40 50 60].*(1-exp(-2*[10 20 30 40 50 60]*tau)));

hold on;
plot(10,10*(1-exp(-2*10*tau)));
plot(20,20*(1-exp(-2*20*tau)));
plot(30,30*(1-exp(-2*30*tau)));
plot(40,40*(1-exp(-2*40*tau)));
plot(50,50*(1-exp(-2*50*tau)));
plot(60,60*(1-exp(-2*60*tau)));
hold off; 
```

第一条情节线有效，但第二部分的暂停/暂停在图中显示为空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:43:50.823

该图不是空白的，而是绘制了非常小的点。

尝试

```
plot(10,10*(1-exp(-2*10*tau)),'o');
plot(20,20*(1-exp(-2*20*tau)),'o');
   ... 
```

查看原始情节的*放大版本*

我认为获得与原始案例相同的情节的最接近的方法是一次引入一个片段，即您必须引入几个点，例如

```
 plot([10 20],[10*(1-exp(-2*10*tau)),20*(1-exp(-2*20*tau))]);
    .... and so on 
```

当然，这只是为了学习目的。

# magento - 在 Magento 中保存大量属性选项标签的问题

> ID：13634309
> 
> 赞同：12
> 
> 时间：2012-11-29T20:37:31.273
> 
> 标签：magento

我在 Magento 系统中遇到了一个问题，在该系统中保存大量属性要么根本不起作用，要么只能部分起作用。这似乎是一个与 javascript 相关的问题，我希望 Stack Overflow 上的某个人有一些“已知的科学”来处理这种情况，或者可以为我指明正确的方向。

基本问题是，Magento 系统有超过 250 个颜色属性选项标签。如果管理员用户尝试通过执行以下操作来管理这些

*   导航到目录 -> 属性 -> 管理属性
*   选择颜色属性
*   单击管理标签/选项选项卡
*   编辑最后一个标签选项
*   点击“保存并继续编辑”

发生两件事之一。

在 OS X 上的谷歌浏览器中，该按钮停留在“按下”状态，一段时间后谷歌浏览器的“此页面没有响应”终止对话框出现。

在 OS X 上基于 mozilla 的浏览器中，单击按钮会使浏览器“思考”一下，但最终会提交表单。 **但是**，只有部分属性标签列表会发布到管理控制器。这意味着用户只能编辑前 75 - 100 个标签，因为其他标签永远不会提交。

我也有来自 Windows 用户的报告描述了第二种行为（浏览器是非特定的）

显而易见的答案是要么调查表现不佳的 javascript，要么（Grouch Marx 风格）“不要那样做”。在我花时间分析/挖掘该页面上的 javascript 之前，我希望有一些已知的解决方法，或者关于导致问题的具体知识。

Magento CE 1.7.x，如果它很重要。

**更新：** Javascript 性能问题是一个红鲱鱼。它们是由大量输入字段在

```
js/prototype/validation.js 
```

特别是在这个 try catch 块中

```
 try {
        if(this.options.stopOnFirst) {
            result = Form.getElements(this.form).all(function(elm) {
                if (elm.hasClassName('local-validation') && !this.isElementInForm(elm, this.form)) {
                    return true;
                }
                return Validation.validate(elm,{useTitle : useTitles, onElementValidate : callback});
            }, this);
        } else {
            result = Form.getElements(this.form).collect(function(elm) {
                if (elm.hasClassName('local-validation') && !this.isElementInForm(elm, this.form)) {
                    return true;
                }
                return Validation.validate(elm,{useTitle : useTitles, onElementValidate : callback});
            }, this).all();
        }
    } catch (e) {
    } 
```

但是，即使我将其短路并让函数返回 true，不保存所有标签的行为仍然存在。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-29T21:42:44.640

您可以尝试使用变量 max_input_vars（在 PHP 5.3.9 中引入），默认情况下它是 1000，这样就足够了，但您的配置可能使用的数量较少。但我想由于您遇到的主要性能问题，该表格无法通过。

关于选项标签：他们是否有任何更改属性图像的上传者？当我们在一家拥有 300 多个制造商选项的商店安装 GoMage 高级导航扩展时，我们遇到了完全相同的问题（该扩展使用 Magento 的内置 Flash 上传器）。

我们没有该功能的扩展，所以我禁用了上传器，但性能的极端下降肯定是在加载 300 部 Flash 电影时。也许您可以尝试通过插入按钮或链接而不是电影来按选项延迟加载上传器。

希望这会为您指明正确（或准确）的方向。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-05-09T12:46:21.633

**[工作解决方案]**

你好，正如 Alan Storm 提到的，这个问题与 JS 逻辑有关，它处理选项标签输入的验证。我在我的一个客户的项目中遇到了这个问题，我写了一个简单的扩展来解决它。

您可以在此处下载 exntesion：[https ://github.com/Jarlssen/Jarlssen_FasterAttributeOptionEdit](https://github.com/Jarlssen/Jarlssen_FasterAttributeOptionEdit)

基本上，扩展用我的模板替换了原来的选项模板。在我的模板中，我重写了模板底部的大部分 JS 并将表单输入替换为 div 元素（伪输入），因此当管理员单击伪输入时，将其替换为真实输入。通过这种方式，我们避免验证所有输入，我们只验证已编辑和新添加的条目。如果您在块上添加选项，则扩展效果很好，例如每个属性保存 500 个条目。

希望，这有帮助。

附加信息：[http ://www.jarlssen.de/blog/2014/05/07/magento-timeout-saving-attribute-options-type-multiple-select-and-dropdown](http://www.jarlssen.de/blog/2014/05/07/magento-timeout-saving-attribute-options-type-multiple-select-and-dropdown)

快速看一下伪生成代码：

```
<tr class="option-row">
<?php foreach ($this->getStores() as $_store): ?>
    <td>
    <div class="replace-content pseudo-input input-text <?php if($_store->getId()==0): ?> required-option<?php endif; ?>" id="option[value][<?php echo $_value->getId() ?>][<?php echo $_store->getId() ?>]"><?php echo $_value->getData('store' . $_store->getId()) ?></div>
    </td>
    <?php endforeach; ?>
    <td>
        <div class="replace-content pseudo-input" id="option[order][<?php echo $_value->getId() ?>]"><?php echo $_value->getSortOrder() ?></div>
    </td>
    <td class="a-center default-checkbox">
        <div id="option_<?php echo $_value->getId() ?>" class="checkbox-radio-container replace-content">
        <?php if($_value->getChecked()) : ?>
            <input class="input-radio" type="<?php echo $defaultChooserInputType; ?>" name="default[]" value="<?php echo $_value->getId() ?>" checked <?php if ($this->getReadOnly()):?> disabled="disabled"<?php endif;?>/>
        <?php else : ?>
            <?php if('radio' == $defaultChooserInputType) : ?>
                <span class="fake-radio"></span>
            <?php else : ?>
                <span class="fake-checkbox"></span>
            <?php endif; ?>
        <?php endif; ?>
        </div>
    </td>
    <td class="a-left actions-column" id="delete_button_container_<?php echo $_value->getId() ?>">
        <div id="option[delete][<?php echo $_value->getId() ?>]" title="<?php echo $this->__('Delete') ?>" class="scalable left pseudo-delete-option">
        <span class="pseudo-delete-button" option_id="<?php echo $_value->getId(); ?>">
            <span>
                <span><?php echo $this->__('Delete') ?></span>
            </span>
        </span>
        </div>
    </td>
</tr> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-29T20:53:48.593

我确实遇到了这个问题（POST 被截断），它来自一个 POST 限制太少的 suhosin 补丁。（或标准的 PHP post_max_size）

在您的 php.ini 中检查这些值并在需要时增加它们的值（并重新启动 apache）：

```
post_max_size
suhosin.post.max_vars
suhosin.request.max_vars 
```

对于您的第二个问题（JS 性能问题），我帮不了您

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-22T18:56:02.807

对不起！！

我遇到了同样的问题，解决方案如下。

问题的解释

问题

一个客户有一个非常大的轮胎基数，同时也添加了许多汽车，因此要迁移轮胎和车辆之间的系泊点，只有 255 个字符的 ids 属性插入到表中，导致迁移错误。

magento 插入一个字符串，其 id 由 , 分隔

问题出现在值字段中的表“catalog_product_entity_varchar”中，如果我输入文本并解决，默认情况下为 255 个字符。

注意：我知道你修改数据库不好但不幸的是不得不执行这个操作。

示例产品

轮胎 175 / 65R14

-> 品牌（+ - 200 个选项）
-> 型号（+ - 400 万个选项）
-> 系列（+ - 1500 万个选项）
-> 年份 -> ...

阿特，

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-30T16:07:03.523

这里同样的问题。我用 BELVG 模块“属性分页”解决了：http: [//blog.belvg.com/attribute-admin-page-pagination-in-magento.html](http://blog.belvg.com/attribute-admin-page-pagination-in-magento.html)

它工作正常。

希望有帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-19T13:00:12.593

打开服务器的 php.ini，搜索 max_input_vars 并将其值设置为大于 2500 将解决您的问题

```
; How many GET/POST/COOKIE input variables may be accepted
max_input_vars = 5000 
```

# java - Apache Wicket - 未提交表单

> ID：13634314
> 
> 赞同：1
> 
> 时间：2012-11-29T20:38:01.483
> 
> 标签：java, html, forms, apache, wicket

很简单，我单击具有 的输入，`type="submit"`但未提交表单。

我已经搜索了这个问题的解决方案，但他们说我应该检查我是否有嵌套表单，我没有，我只使用一个。他们还说这可能是一些放错位置的标签，但我已经浏览了整个 HTML 并且标签很好。

我在 HTML 中有这个块：

```
<div id="form-options-div" style="margin-top:10px;">
    <input class="btn btn-primary" type="submit" wicket:id="saveClientButton" id="save-client-button" />
    <input class="btn" type="button" id="close-client-button" wicket:id="closeClientButton"/>
</div> 
```

我`AjaxButton`在 java 代码中使用一个来表示`saveClientButton`.

我正在覆盖`onSubmit(AjaxRequestTarget, Form<?>)`. 我会发布整个 java 代码，但我在方法的开头有一个记录器，以查看它是否被调用：

`logger.debug("ON SUBMIT");`

所以它不在方法内部。有趣的是，当我重写 Form`onSubmit()`方法而不是 AjaxButton 方法时，页面实际上会重新加载。但仅此而已，仍然没有调用 onSubmit 方法。

为什么会这样？

编辑：

`private Button saveClientBtn;`

```
saveClientBtn = new AjaxButton(WICKET_ID_SAVE_CLIENT_BUTTON) {

        @Override
        public void onError() {
            logger.debug("Error on submit...");
        }

        @Override
        protected void onSubmit(AjaxRequestTarget target, Form<?> form) {
           //code....
        }
}; 
```

`closeClientButton`会干扰正常行为吗？我不知道，因为按钮类型是`button`，不是`submit`。

`editClientForm = new Form<Client>(WICKET_ID_EDIT_CLIENT_FORM);`

`add(editClientForm);`

`editClientForm.add(saveClientBtn);`

编辑2：

好的，我决定不使用 AjaxButton，而是覆盖 Form`onSubmit()`和`onError()`. 单击按钮时，我看到它`onError()`被调用。现在我需要找出原因。

好的，我放了一个反馈面板。它给了我以下信息：

`'[Page class = EditClientPage, id = 6, render count = 1]' is not a valid EditClientPage.`

此外，错误出现 4 次，如下所示：

`'[Page class = EditClientPage, id = 6, render count = 1]' is not a valid EditClientPage.`

`'[Page class = EditClientPage, id = 6, render count = 1]' is not a valid EditClientPage.`

`'[Page class = EditClientPage, id = 6, render count = 1]' is not a valid EditClientPage.`

`'[Page class = EditClientPage, id = 6, render count = 1]' is not a valid EditClientPage.`

这个错误是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:58:43.340

确保你有一个表单标签。

例如：

```
<html>
  <body>
    <form wicket:id="form">
       <div wicket:id="registration">
          Display the RegistrationInputPanel
       </div>
       <input type=”submit” wicket:id="register" value="Register"/>
    </form>
 </body>
</html> 
```

和java类：

```
public class RegistrationPage extends Page {
    public RegistrationPage(IModel<Registration> regModel) {
        Form<?> form = new Form("form");
        form.add(new RegistrationInputPanel("registration", regModel);
        form.add(new SubmitButton("register") {
            public void onSubmit() {

            }
        });
        add(form);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-01T20:14:52.323

就我而言，似乎我没有在表单中设置“必需”值。

这是通过向表单对象添加“onError”方法来确定的（果然，onError 被调用了，你可以告诉“什么”错误[是](https://stackoverflow.com/a/28982575/32453)什么样的

`String responseTxt = wicketTester.getLastResponse().getDocument();`

并挖掘它以查找错误消息。

在我的情况下，实际设置值是

```
FormTester formTester = wicketTester.newFormTester("formName");
formTester.setValue("requiredElementName", "value"); 
```

然后`onSubmit`，正如预期的那样，该方法开始在测试中被调用。

# java - JAVA EE 6 在有状态 EJB 之间共享实例

> ID：13634318
> 
> 赞同：5
> 
> 时间：2012-11-29T20:38:17.187
> 
> 标签：java, java-ee-6, ejb-3.1

我想我在这里有一个基本的理解问题，我希望有人可以向我解释。

假设我们有一个有状态的 EJB_A 和一个有状态的 EJB_B 和一个 sessionscoped ManagedbeanA：

```
@Stateful
@LocalBean
public class EJB_A {
}

@Stateful
@LocalBean
public class EJB_B {
  @EJB
  EJB_A ejb;
}
@ManagedBean
@SessionScoped
public class ManagedBeanA {
   @EJB
   EJB_A ejb;
} 
```

在 ManagedBeanA 中，创建了 EJB_A。现在，当我使用具有 EJB_A 作为属性的 EJB_B 时，将在 EJB_B 中创建 EJB_A 的新实例。它与之前在 ManagedBeanA 中创建的 EJB_A 实例不同。

我不明白这一点，因为我认为有状态 EJB 的全部意义在于，对于每个客户端，只有一个实例由 EJB 容器创建、共享和管理。有人可以向我解释一下吗？还请解释我如何实现一个 EJB 的同一个实例由多个其他 EJB 共享？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T09:34:42.373

是的，您混淆了不同的概念，以及不同的 API... 我宁愿使用 @Inject 而不是 @EJB 并指定注入实例的范围。

```
@Stateful
@LocalBean
public class EJB_A {
}

@Stateful
@LocalBean
public class EJB_B {
  @Inject @SessionScoped
  EJB_A ejb;
}
@ManagedBean
@SessionScoped
public class ManagedBeanA {
   @Inject @SessionScoped
   EJB_A ejb;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T09:26:54.743

我只是在[这里](http://www.java.net/node/686047)做了一些阅读。

> 原因是 EJB 3.0 有状态会话 bean 远程或本地业务接口的每个 lookup() 都会导致创建新的 bean 身份。从查找返回的每个引用都指向不同的有状态会话 bean。由调用者决定如何管理对该引用的访问。通常，Web 应用程序会将引用存储在 HttpSession 或应用程序范围 (ServletContext) 范围内以供后续访问。

和：

> 不要忘记在您的情况下，我们正在处理两种类型的会话：bean 会话和 Web 会话。前者确保一旦您请求有状态 bean，它的身份在该用户会话中保持不变。但是当您使用后者时，您在 bean 会话之上还有一个 Web 会话。为确保您从 2 个不同的 JSP（或在您进行重新加载时）访问同一个 bean，您需要将 bean 的标识存储到 Web 会话范围中。

所以你实际上是对的。当您想使用您的实例时，您必须使用 ManagedBean 在其他地方检索它，因为 EJB 实例与此会话上下文相关联。因此，如果您想简化它并确保每个会话只存在一次 EJB，请使用 CDI 并使用`@javax.enterprise.context.SessionScoped`;注释 EJB 本身。比你可以肯定的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T08:44:05.217

我想我混淆了两件事——@Sessionscoped 和@Stateful。

@Stateful 注解并不意味着每个客户端只创建一个实例。这只是意味着@Stateful-EJB 只属于一个客户端，而@Stateless-EJB 可以由多个客户端共享。

因此，@Stateful-EJB 具有 N:1 关系（N 个 @Stateful-EJB 恰好属于一个客户端），@Stateless-EJB 具有 N:M 关系（N 个 @Stateless-EJBS 属于 M 个客户端）。这意味着一个 EJB 实例不能被多个其他 EJB 共享，只需使用 @Stateful EJB 的 @EJB-Annotation。

另一方面，@Sessionscoped-Managedbean 似乎每个客户端只创建一次。

我做对了吗？

# iphone - UISearchDisplayController 隐藏阴影

> ID：13634319
> 
> 赞同：4
> 
> 时间：2012-11-29T20:38:20.517
> 
> 标签：iphone, objective-c, ios, uisearchdisplaycontroller

如果您仔细观察`UISearchBar`a的底部`UISearchDisplayController`，您会注意到它有一个微妙的阴影。这个阴影不适合我目前正在开发的应用程序的设计，所以我试图删除/隐藏它。不幸的是，我还没有成功。

在我研究这个阴影的过程中，我发现它*不是*. `UISearchBar`当我从它的超级视图中删除`UISearchDisplayController`'s时，阴影仍然可见。`UISearchBar``- (void)searchDisplayControllerWillBeginSearch:(UISearchDisplayController *)controller`

阴影原来是 的一部分`UISearchDisplayController's` `searchResultsTableView`：当我隐藏 时`searchResultsTableView`，阴影消失了。但是，我无法追踪其图层上有阴影的视图。我尝试递归遍历所有可见视图（从 [[UIApplication sharedApplication] 窗口] 开始），然后隐藏每个视图的投影并将其`clipsToBounds`属性设置为 YES，这也没有产生预期的结果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T13:37:27.087

我终于找到了解决方案。由于设置`clipsToBounds`为 YES 并隐藏层次结构中每个视图的阴影不起作用，很明显阴影是图像。在遍历 的所有子视图`searchResultsTableView`并打印它们的类属性后，我找到了 的一个实例`_UISearchBarShadowView`，这显然是罪魁祸首。所以我现在正在做的是找到`_UISearchBarShadowView`并将其 alpha 设置为 0.0f。

```
- (void)searchDisplayController:(UISearchDisplayController *)controller didShowSearchResultsTableView:(UITableView *)tableView
{
    [self _findAndHideSearchBarShadowInView:tableView];
}

- (void)_findAndHideSearchBarShadowInView:(UIView *)view
{
    NSString *usc = @"_";
    NSString *sb = @"UISearchBar";
    NSString *sv = @"ShadowView";
    NSString *s = [[usc stringByAppendingString:sb] stringByAppendingString:sv];

    for (UIView *v in view.subviews)
    {
       if ([v isKindOfClass:NSClassFromString(s)]) {
            v.alpha = 0.0f;
        }
        [self _findAndHideSearchBarShadowInView:v];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T01:27:13.380

接受的答案使用私有 API，这可能会导致您的应用被拒绝。相反，我只是定位并隐藏任何也是 UIImageView 的自定义子类的子视图，如下所示：

```
- (void)searchDisplayController:(UISearchDisplayController *)controller didShowSearchResultsTableView:(UITableView *)tableView
{
    for (UIView *view in tableView.subviews) {
        if ([view.class isSubclassOfClass:[UIImageView class]]) {
            view.alpha = 0.f;
        }
    }
} 
```

# php - 设置认证用户的关于我/描述/摘要

> ID：13634324
> 
> 赞同：0
> 
> 时间：2012-11-29T20:38:53.943
> 
> 标签：php, youtube-api

我正在使用 PHP 库的“youtube api”，即 zend。

我的目标是设置描述，即当您在右侧的文本框中打开用户频道时看到的内容。

我做了什么。

```
function anmelden_yt($name,$passwort)
{
$yt_source = 'sou'; //name of application (can be anything)  
$yt_api_key = 'ak';
$yt = null;
$authenticationURL= 'https://www.google.com/youtube/accounts/ClientLogin';  
$httpClient = Zend_Gdata_ClientLogin::getHttpClient(  
$username = $name,  
$password = $passwort,  
$service = 'youtube',  
$client = null,  
$source = $yt_source, // a short string identifying your application  
$loginToken = null,  
$loginCaptcha = null,  
$authenticationURL); 
return new Zend_Gdata_YouTube($httpClient, $yt_source, NULL, $yt_api_key); 
}

$yt = anmelden_yt('name','pw');
$yt->setMajorProtocolVersion(2);
$userProfileEntry = $yt->getUserProfile('name');
$userProfileEntry->setAboutMe('test');
$userProfileEntry->setContent('test');
$userProfileEntry->setSummary('test'); 
```

没有改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:29:39.297

这些字段不再通过 API 公开。它们也与您所指的频道描述显示不对应。目前无法通过 API 设置该频道描述。

# css - 如何避免媒体查询重叠？

> ID：13634326
> 
> 赞同：13
> 
> 时间：2012-11-29T20:39:00.883
> 
> 标签：css, responsive-design, media-queries, fluid-layout

级联使 CSS 变得特别而强大。但在媒体查询的情况下，重叠*似乎*有问题。

考虑以下 CSS（[CSS 媒体查询重叠的连续规则](https://stackoverflow.com/questions/13241531/what-are-the-rules-for-css-media-query-overlap-rwd)）：

```
/* Standard - for all screens below 20em */

body { color: black; font-size: 1em; }

/* Query A - slightly wider, mobile viewport */

@media (min-width: 20em) and (max-width: 45em) {
    body { color: red; } /* supposed to be unique for this width */
}

/* Query B - everything else */

@media (min-width: 45em) {
    body { font-size: larger; } /* because viewport is bigger */
} 
```

所以当屏幕正好是 45em 宽时，45em 处的重叠[将](https://stackoverflow.com/a/13611538/1779823)按照标准 CSS 级联处理：

*   `max-width: 45em`将首先应用所有定义，
*   `min-width: 45em`之后将全部应用。

考虑这两个条件：

*   所有文本通常都是`black`，但*查询 A*是唯一的并且具有`color: red`。
*   由于*查询 B*用于更大的视口，因此它的文本具有 CSS `font-size: larger`。

因此，在正好 45em 的宽度处，我们会得到**大而红色的文本**。*避免这种情况的最佳解决方案是什么？*

* * *

我看到两种可能性：

1.  重新声明要`color: black`在*Query B*`color`中具有的文本，但是如果您选择在将来更改，那么您将管理两个声明。（当然，这一行代码没有这样的问题，但想象一下还有很多其他的声明和选择器。）

2.  `max-width: 799px`通过使用和之类的像素值来避免重叠`min-width: 800px`，但是你使用的是像素——我猜它们可能分别是 49.9375em 和 50em。虽然如果默认值不再是 16em 并且某些东西被四舍五入怎么办？而且我们[仍然不确定](https://stackoverflow.com/a/13611538/1779823)在那个间隙会发生什么。（打破时空连续性的黑洞？）

两者都有其缺点......还有其他想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-30T16:21:07.250

`@media`为任何给定的媒体查询创建两个互斥块的唯一可靠方法是`not`在其中一个块中使用它来否定它。`@media`不幸的是，这意味着对每个块重复一次媒体查询。所以，而不是这个，例如：

```
@media (max-width: 49.9375em) {
    body {
        color: red;
    }
}

@media (min-width: 50em) {
    body {
        font-size: larger;
    }
} 
```

你会有这个：

```
/* 
 * Note: Media Queries 4 still requires 'not' to be followed by a
 * media type (e.g. 'all' or 'screen') for reasons I cannot comprehend.
 */
@media not all and (min-width: 50em) {
    body {
        color: red;
    }
}

@media (min-width: 50em) {
    body {
        font-size: larger;
    }
} 
```

[交互式 jsFiddle 演示](http://jsfiddle.net/BoltClock/mhF6V)

这对于缩小与范围媒体功能之间的差距非常有效，`width`因为`height`它基本上将其变成了一个非此即彼的场景。但是，就像您的前两个选项一样，它并不完美：如前所述，您必须重复两次相同的媒体查询，并添加`not`到其中一个。`@media`如[条件规则 3](http://www.w3.org/TR/css3-conditional/#at-media)中所述，没有 if/else 构造。

* * *

尽管我在回答您之前的问题时提到了这一点：

> 从我的实验来看，iOS 上的 Safari 似乎会对所有小数像素值进行四舍五入，以确保`max-width: 799px`和中的任何一个`min-width: 800px`都匹配，即使视口确实是 799.5 像素（显然与前者匹配）。

仍然应该指出的是，在舍入时我注意到了一些怪癖。也就是说，我还没有找到一个可以规避媒体查询并最终无法从任何一组规则中接收样式的小数值*（*顺便说一句，这是可能发生的最糟糕的情况，所以不用担心关于潜在地创造时空裂缝）。这一定意味着浏览器——至少，我测试过的 Safari——做一个合理的工作来确保它们满足媒体查询，即使你有不同的值（正好 1 个 CSS 像素）。

但是，对于可以在桌面浏览器上观察到的具有较大间隙的单元，例如 ems，误差幅度要大得多。例如，一条评论建议使用 49.99999em 而不是比 49.9375em 更任意的东西，但显然存在差异，至少默认字体大小为 16px。

我简化了您的代码，将媒体查询更改为使用十进制值，并将代码放入 jsFiddle：

```
@media (max-width: 49.9375em) {
    body {
        color: red;
    }
}

@media (min-width: 50em) {
    body {
        font-size: larger;
    }
} 
```

如果您将“结果”窗格的大小调整为 800 像素（文本将更新以指导您），您实际上最终会得到不同的结果，具体取决于[`@media (max-width: 49.9375em)`是 used](http://jsfiddle.net/BoltClock/dMtBF)还是[`@media (max-width: 49.99999em)`used](http://jsfiddle.net/BoltClock/dMtBF/1)（我也对此感到惊讶）...

无论哪种方式，您都是对的：选项 2 也有其缺点。老实说，我并不是特别喜欢它，因为我不想在我无法控制的设备和用户代理怪癖上大发雷霆。如果您像我一样，我想最好还是以对您的代码更加警惕为代价（？）重新声明您的规则的不便，因为这至少仍在您作为作者的控制范围内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T22:33:54.713

对我来说，最好的方法是保持 0.01em 的差距：

```
@media (min-width: 20em) and (max-width: 44.99em) {
    body { color: red; } /* supposed to be unique for this width */
}
@media (min-width: 45em) {
    body { font-size: larger; } /* because viewport is bigger */
} 
```

我建议您阅读本文以了解详细信息以及[防止媒体查询重叠的不同解决方案](http://tzi.fr/CSS/Responsive/Prevent-double-breakpoint)的比较。

干杯，托马斯。

# javascript - WebGL 设置不同的纹理

> ID：13634327
> 
> 赞同：1
> 
> 时间：2012-11-29T20:39:02.943
> 
> 标签：javascript, textures, webgl

我正在处理 WebGL 中的现有项目，纹理有问题，我在为正确的对象设置正确的纹理时遇到了一些麻烦，在 khronos.org 论坛上，我有一些屏幕截图和发生的代码。

[http://www.khronos.org/message_boards/viewtopic.php?f=43&t=5203](http://www.khronos.org/message_boards/viewtopic.php?f=43&t=5203)

目前我正在创建一个小盒子，只是为了了解一切是如何运作的，但它从墙壁和地板上获取纹理。

[http://tinypic.com/r/23mr1j8/6](http://tinypic.com/r/23mr1j8/6)

先感谢您。

这是“handleloadedtexture”

```
function handleLoadedTexture(texture, image) {
    gl.bindTexture(gl.TEXTURE_2D, texture);
    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);
    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE,
            texture.image);

    if (isPowerOfTwo(texture.image.width) && isPowerOfTwo(texture.image.height)) {
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
    } else {
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
    }

    gl.bindTexture(gl.TEXTURE_2D, null);

    texturesToLoad--;
} 
```

所有纹理都已加载，如果我在这部分更改某些内容，我可以在它们之间切换：

```
 gl.activeTexture(gl.TEXTURE0);
  gl.bindTexture(gl.TEXTURE_2D, texture0);
  gl.uniform1i(shaderProgram.texture0Uniform, 0);

  gl.activeTexture(gl.TEXTURE0 + 1);
  gl.bindTexture(gl.TEXTURE_2D, texture1);
  gl.uniform1i(shaderProgram.texture1Uniform, 1);

  gl.activeTexture(gl.TEXTURE0 + 2);
  gl.bindTexture(gl.TEXTURE_2D, texture2);
  gl.uniform1i(shaderProgram.texture2Uniform, 2);

  gl.activeTexture(gl.TEXTURE0 + 3);
  gl.bindTexture(gl.TEXTURE_2D, texture3);
  gl.uniform1i(shaderProgram.texture3Uniform, 3); 
```

我的着色器：fs 看起来像这样：

```
 <script id="shader-fs" type="x-shader/x-fragment">
#ifdef GL_ES
precision highp float;
#endif

varying vec2 vTextureCoord;
varying float vTextureID;
varying vec4 vColor;

uniform sampler2D uTexture0;
uniform sampler2D uTexture1;
uniform sampler2D uTexture2;

void main(void) {
    vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
    if (vTextureID < 0.1)
        gl_FragColor = texture2D(uTexture0, vTextureCoord.st);
    else if (vTextureID < 1.1)
        gl_FragColor = texture2D(uTexture1, vTextureCoord.st);
    else if (vTextureID < 2.1)
        gl_FragColor = texture2D(uTexture2, vTextureCoord.st);
    else if (vTextureID < 3.1)
        gl_FragColor = texture2D(uTexture3, vTextureCoord.st); 
```

你能看出它有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T15:31:07.757

```
uniform sampler2D uTexture0;
uniform sampler2D uTexture1;
uniform sampler2D uTexture2; 
```

再添加一行：

“统一 sampler2d uTexture3；”

对于声明

```
"gl_FragColor = texture2D(uTexture3, vTextureCoord.st);" 
```

不过也可能有别的东西……

# java - 从 Apache Derby 迁移到 MySQL

> ID：13634328
> 
> 赞同：1
> 
> 时间：2012-11-29T20:39:10.087
> 
> 标签：java, mysql, sql, migration, derby

我有一个使用 Apache Derby 的 JDBC 应用程序。如何迁移我的整个数据库系统以使用 MySQL？

1.  我有 3 个访问数据库的 Java 程序
2.  我有 3 个表和 2 个视图

我正在使用 Netbeans。我以前从未使用过 MySQL，也不知道从哪里开始。Netbeans 中与 Java 和 MySQL 有很好的集成吗？我怎样才能很好地与 NetBeans 和 MySQL 集成？

非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:35:59.823

看起来这个插件可能会帮助你： http: [//netbeans.org/kb/docs/ide/mysql.html](http://netbeans.org/kb/docs/ide/mysql.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-05T18:26:46.467

我在 Spring 网站上找到了本教程，但我认为这只是部分解决方案。

[教程](https://spring.io/guides/gs/accessing-data-mysql/)

在其中，他们依靠休眠来删除和创建表，我真的不喜欢那样。您必须通过特殊编码来添加静态数据。例如，如果您的应用程序正在跟踪设备，您可能需要一个 device_types 表。至少其中一些设备类型将在数据库中，以及设备、用户等。

我打算做的是使用 Derby，直到我有点稳定为止。从中，我将获取数据库模式并在 mysql 中创建它。似乎可以使用 DB 外观实用程序。[数据库外观](http://db.apache.org/derby/docs/10.10/getstart/tgsrunningdblook.html)

作为增加的安全性，我打算使用无法添加或删除表的 db 用户运行我的 Web 应用程序。如果您使用使行“非活动”的概念，也可以删除删除行的权限因此，您无需删除不再使用的设备类型，而是将“活动”标志设置为 F。因此您的设备类型查询看起来像：

```
select * from device_type where active = 'T' 
```

# c# - 对动态匿名对象中的对象进行计数 (C#)

> ID：13634331
> 
> 赞同：5
> 
> 时间：2012-11-29T20:39:34.650
> 
> 标签：c#, asp.net-mvc, linq, anonymous-types, dynamicobject

我有一个动态对象（它实际上是 json），我将它传递给我的 MVC WebApi 控制器。

json 对象在一个匿名对象中包含多个列表，这些列表通过`client.PostAsJsonAsync("myapiurl", objectGraph)`.

为了在 MVC 端验证对象，我需要做的是获取每个列表中对象的计数。我可以通过动态访问列表`mydynamicobject.mylist`和通过单个项目，`mydynamicobject.mylist[index]`但我似乎无法获得`mydynamicobject.mylist`.

到目前为止我已经尝试过：

*   LINQ 扩展方法 - 不适用于动态
*   `Enumerable.Count(mydynamicobject.mylist)`- 无法推断类型

还有其他想法吗？计数实际上在动态对象中正确可用，`base`但显然不能作为属性访问。帮助！

这现在有效：

```
// This is a MVC/WebApi method
public dynamic Post(dynamic mydynamicobject)

if (((ICollection)mydynamicobject.mylist).Count == 0)
{
// do something
} 
```

发送动态对象的代码（不同的应用程序）：

```
HttpClient client = new HttpClient();  
client.DefaultRequestHeaders.Accept.Add
  (new MediaTypeWithQualityHeaderValue("application/json")); 

var objectGraph = new { mylist = new { Id = 1 }, mylist2 = new { Name = "ABC" } }; 
var r = client.PostAsJsonAsync("api/mycontroller", objectGraph).Result; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T20:42:09.060

如果它们是数组，我相信您正在寻找它们的`Length`属性。

```
mydynamicobject.mylist.Length 
```

或者，我认为您可能能够摆脱投射`mydynamicobject.mylist`到 an`IEnumerable`然后将其交给`IEnueramble.Count`这样的人：

```
IEnumerable.Count((IEnumerable)mydynamicobject.mylist); 
```

你*也*可以像保罗提到的那样做：

```
((ICollection)mydynamicobject.mylist).Count 
```

虽然我不能为那一个功劳。

# javascript - 检查何时创建新元素

> ID：13634335
> 
> 赞同：2
> 
> 时间：2012-11-29T20:39:48.080
> 
> 标签：javascript, html, css

我有`div.scrollContainer`插入一堆物品的地方。当页面加载时，我运行 mCustomScrollbar jQuery 插件，它将获取里面的项目`div.scrollContainer`并将其自己的 classes/css/js 包装在它周围以创建自定义滚动条。

当页面加载时，我会浏览我自己的库，该库会输出更多项目供我注入滚动条。我目前正在将它们定位/附加到 mCustomScrollbar 创建的自定义类中。然而，问题是有时我的库会在 mCustomScrollbar 创建其类之前输出项目。结果，库中的项目永远无法放置在正确的元素中，因为它不存在。

我曾考虑将库中的项目附加到`div.scrollContainer`，但后来我遇到了一个问题，如果 mCustomScrollbar 在附加项目之前创建了它的类会怎样。

总而言之，我想知道是否有一种方法可以检测何时在 DOM 中创建了新元素。我已经查看了建议使用 livequery 插件的其他[线程。](https://stackoverflow.com/a/4780937/1179449)我想知道是否有不需要额外插件的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:31:25.080

您可以`.mCustomScrollbar()`在插入最后一个项目后调用，因此您可以肯定这些项目确实被插入：

```
$(".your-container").append($(".your-items"));
$("div.scrollContainer").mCustomScrollbar(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T09:03:15.523

使用 updateOnContentResize: true 设置，它将每隔几毫秒检查一次新内容。启动插件时，还要在其他设置中添加这些： $(selector).mCustomScrollbar({ advanced:{ updateOnContentResize: true } });

然而！我个人反对每隔几毫秒遍历一次无用的 DOM，我建议你使用它的原生更新方法。找到一种方法来了解何时向滚动条标记添加更多内容，并在需要时运行它： $(selector).mCustomScrollbar("update");

PS阅读它的文档，很多有用的设置/方法。

希望这可以帮助 ：）

# solr - Solr 查询单个字符

> ID：13634336
> 
> 赞同：3
> 
> 时间：2012-11-29T20:39:49.433
> 
> 标签：solr, lucene, solrj

我有一个定义如下的 fieldType。现在，我已经定义了这个字段类型的字段“StatusCode”，它包含一个像 A 或 P 这样的单个字符。我已经使用这个 fieldType 对数据进行了索引，当我运行像 StatusCode:A 这样的查询时，它不会返回任何结果。有人可以解释为什么查询不适用于单字符字段吗？

```
<fieldType name="text_exact_fuzzy" class="solr.TextField" omitNorms="false">
      <analyzer type="index">
          <tokenizer class="solr.StandardTokenizerFactory"/>
          <filter class="solr.StandardFilterFactory"/>
          <filter class="solr.LowerCaseFilterFactory"/>
        </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StandardFilterFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>           
      </analyzer>
    </fieldType> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T21:51:32.467

将 StatusCode 之类的字段定义为 text_exact_fuzzy 并使用这些分析器似乎很奇怪。

使用简单的 StrField 代替，无需执行任何分析（如果需要，只需使用小写过滤器工厂），您应该会获得预期的命中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:36:09.903

首先，我建议你建立一个这样的查询：（对于这个例子，让我们调用你的字段，其中包含你的单个字符 TEST ）

查询 = 测试：p 和测试：a

你有任何结果吗？

# ios - 是否可以使用 Django 评论构建活动提要？

> ID：13634337
> 
> 赞同：0
> 
> 时间：2012-11-29T20:39:51.493
> 
> 标签：ios, django, json, feed, django-comments

亲爱的stackoverflowers，

是否可以使用 Django 评论构建活动提要？

例如，在我的专业摄影 iOS 应用程序的“主页”视图中，我想通过 JSON 填充操作，例如：

User1 评论 User2 的照片：看起来很棒

用户 1 开始关注用户 2 和用户 3

User1 赞了 User2 的照片

User3 赞了 6 张照片

这可能吗？如果是这样，如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:27:00.820

您可以使用以下应用程序：[django-activity-stream](https://github.com/justquick/django-activity-stream/)

# java - Spring 的 @Autowired 没有注入 Map - 我是否正确使用它？

> ID：13634345
> 
> 赞同：1
> 
> 时间：2012-11-29T20:40:48.250
> 
> 标签：java, spring, autowired

我正在尝试将一些 Spring 配置添加到现有的实用程序类中。它似乎不起作用，我不知道为什么（我第一次使用这些 Spring 选项，我什至不确定我做对了）。

有问题的班级

```
@Configurable(autowire=Autowire.BY_NAME, preConstruction=true)
public class DataUtility
{
    private static final DataUtility INSTANCE = new DataUtility();

    @Autowired(required=true) //This is the new field and annotation
    private Map<String,String> dataFileMapping = new HashMap<String, String>();

    public static DataUtility getInstance()
    {
         return INSTANCE;
    }

    private DataUtility()
    {
         //Do a bunch of setup work here
         for (String s : dataFileMapping)
         {
              addDataToCache(dataFileMapping(s))
         }
    } 
```

弹簧配置如下所示：

```
<context:annotation-config/>
<context:spring-configured/>
<bean id="util" class="com.myCompany.DataUtility">
    <property name="dataFileMapping">
        <map>
            <entry key="data1" value="data/file1.dat"/>
            <entry key="data2" value="data/file2.dat"/>
            <entry key="data3" value="data/file3.dat"/>
        </map>
    </property>
</bean> 
```

问题是当我在调试器中单步执行我的代码时，我可以看到它`dataFileMapping`是空的。我什至不确定弹簧配置是否正在运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:50:00.857

您的问题的根源是您似乎正在使用静态引用 INSTANCE 来访问该对象。Spring 正在创建一个名为 'util' 的 bean 并使用您的数据对其进行设置，但这并没有成为 INSTANCE 指向的对象。静态字段的初始化发生在第一次加载类时，早在 spring 有机会创建和注入 bean 之前。

您可以像这样伪造它，但是在 bean 初始化之前尝试访问实例当然会失败：

```
@Configurable(autowire=Autowire.BY_NAME, preConstruction=true)
public class DataUtility
{
    private static final DataUtility INSTANCE = null;

    @Autowired(required=true) //This is the new field and annotation
    private Map<String,String> dataFileMapping = new HashMap<String, String>();

    public static DataUtility getInstance()
    {
         return INSTANCE;
    }

    public postInit()
    {
         INSTANCE = this;
         //Do a bunch of setup work here
         for (String s : dataFileMapping)
         {
              addDataToCache(dataFileMapping(s))
         }
    }

    <bean id="util" class="com.myCompany.DataUtility" init-method="postInit">
        <property name="dataFileMapping">
            <map>
                <entry key="data1" value="data/file1.dat"/>
                <entry key="data2" value="data/file2.dat"/>
                <entry key="data3" value="data/file3.dat"/>
            </map>
        </property>
    </bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:44:17.317

我认为您只需要为 dataFileMapping 添加 getter 和 setter

另外，请记住，您不能在构造函数中遍历映射，在构造函数执行之前，spring 没有机会设置它。

除此之外，您不能将构造函数设为私有并期望 spring 能够实例化它。

# jquery - CSS（或 JQuery）改变颜色动画 onclick

> ID：13634347
> 
> 赞同：1
> 
> 时间：2012-11-29T20:40:51.140
> 
> 标签：jquery, css, animation, colors

```
div
{
width:100px;
height:100px;
background:red;
animation:myfirst 3s;
-moz-animation:myfirst 3s; /* Firefox */
-webkit-animation:myfirst 3s; /* Safari and Chrome */
-webkit-animation-iteration-count: infinite;
-moz-animation-iteration-count: infinite;
}

@-webkit-keyframes myfirst /* Safari and Chrome */
{
0% {background:red;}
50% {background:#800000;}
100% {background:red;}
} 
```

请参阅[我的 jsFiddle](http://jsfiddle.net/KHnBz/)（不适用于**IE 或 OPERA**）。或者查看上面的 CSS。

它是一个简单的彩色动画，从红色变为深红色，然后再变为红色。我需要做到这一点，当单击按钮时，它将来自：

蓝色到#000066，然后回到蓝色。

我知道一种方法是创建一个新的样式表并切换样式表，但是，

(1) 我不太确定该怎么做

和

(2) 在所有这一切的宏伟计划中，我需要用不同的颜色重复大约 15 次，我讨厌有 15 种不同的颜色样式表。是否有 JQuery 或直接的 javascript 方式来执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T20:49:52.853

无需创建新样式表。只需为每种颜色创建一个不同的类，然后使用 jQuery 来[`.addClass()`](http://api.jquery.com/addClass)和[`.removeClass()`](http://api.jquery.com/removeClass)：

```
function blueMe(){
  $('div').removeClass().addClass('blue');
}​ 
```

[http://jsfiddle.net/mblase75/KHnBz/6/](http://jsfiddle.net/mblase75/KHnBz/6/)

As you'll see in the CSS for that fiddle, you'll need to create new keyframes for each class.

# wcf - 如何为消息类型中有句点的服务生成有效的 WCF 代理？

> ID：13634348
> 
> 赞同：3
> 
> 时间：2012-11-29T20:40:55.130
> 
> 标签：wcf, soap, wsdl, rpc, period

我正在与一个我无法控制的 Web 服务进行交互，它具有包含句点 (.) 的消息（输入/输出）和操作

当 svcutil 生成代理时，它包括：

```
[MessageContractAttribute(WrapperName="The.Request",...)]
public partial class TheRequest
{ ... }

[MessageContractAttribute(WrapperName="The.Response",...)]
public partial class TheResponse
{ ... } 
```

哪个模型的 WSDL：

```
<wsdl:message name="The.Request">
    <wsdl:part name="Input" type="tns:InputType" />
</wsdl:message>
<wsdl:message name="The.Response">
    <wsdl:part name="Return" type="tns:Return" />
</wsdl:message> 
```

运行代码时，我收到一条错误消息：

`RPC Message TheRequest in operation DoIt has an invalid body name Input. It must be TheRequest`

堆栈跟踪：

在 System.ServiceModel.Description.XmlSerializerOperationBehavior.Reflector.OperationReflector.EnsureMessageInfos() 在 System.ServiceModel.Description.XmlSerializerOperationBehavior.Reflector.EnsureMessageInfos() 在 System.ServiceModel.Description.XmlSerializerOperationBehavior.Reflector.OperationReflector.get_Request() 在 System.ServiceModel .Description.XmlSerializerOperationBehavior.CreateFormatter() at System.ServiceModel.Description.XmlSerializerOperationBehavior.System.ServiceModel.Description.IOperationBehavior.ApplyClientBehavior(OperationDescription description, ClientOperation proxy) at System.ServiceModel.Description.DispatcherBuilder.BindOperations(ContractDescription contract, ClientRuntime proxy, DispatchRuntime 调度）在 System.ServiceModel.Description.DispatcherBuilder。ApplyClientBehavior(ServiceEndpoint serviceEndpoint, ClientRuntime clientRuntime) at System.ServiceModel.Description.DispatcherBuilder.BuildProxyBehavior(ServiceEndpoint serviceEndpoint, BindingParameterCollection& parameters) at System.ServiceModel.Channels.ServiceChannelFactory.BuildChannelFactory(ServiceEndpoint serviceEndpoint, Boolean useActiveAutoClose) at System.ServiceModel.ChannelFactory.CreateFactory ()

……

我找不到更改验证以接受消息名称的方法。

任何人都可以告诉我该怎么做，或者至少可以为我指明正确的方向吗？

谢谢。

# python - 使用特定列绘制二维 NumPy 数组

> ID：13634349
> 
> 赞同：23
> 
> 时间：2012-11-29T20:41:04.723
> 
> 标签：python, numpy, matplotlib

我有一个像这样创建的 2D numpy 数组：

```
data = np.empty((number_of_elements, 7)) 
```

每行有 7 个（或其他）浮点数代表一个对象的属性。例如，前两个是对象的位置`x`和`y`位置，其他是各种属性，甚至可以用于将颜色信息应用于绘图。

我想从 做一个散点图`data`，这样如果`p = data[i]`，一个对象被绘制为一个点，`p[:2]`其 2D 位置和`p[2:4]`颜色信息（该向量的长度应该确定该点的颜色）。其他列对情节根本不重要。

我该怎么办？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-29T20:59:40.563

设置一个基本的 matplotlib 图形很容易：

```
import matplotlib.pyplot as plt
import numpy as np
fig = plt.figure()
ax = fig.add_subplot(1, 1, 1) 
```

选择,的列`x`，可能看起来像这样：`y``color`

```
N = 100
data = np.random.random((N, 7))
x = data[:,0]
y = data[:,1]
points = data[:,2:4]
# color is the length of each vector in `points`
color = np.sqrt((points**2).sum(axis = 1))/np.sqrt(2.0)
rgb = plt.get_cmap('jet')(color) 
```

最后一行检索`jet`颜色图并将数组中的每个浮点值（介于 0 和 1 之间）映射`color`到 3 元组 RGB 值。[这里](http://scipy-cookbook.readthedocs.org/items/Matplotlib_Show_colormaps.html)有一个颜色图列表可供选择。还有一种方法可以定义自定义颜色图。

制作散点图现在很简单：

```
ax.scatter(x, y, color = rgb)
plt.show()
# plt.savefig('/tmp/out.png')    # to save the figure to a file 
```

![在此处输入图像描述](../Images/3d38e5d37063f255f412fc9ecaf2749c.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-29T20:47:26.597

不确定您在图中要查找的确切内容，但您可以像这样对二维数组进行切片：

```
>>> a
array([[0, 1, 2],
       [3, 4, 5],
       [6, 7, 8]])
>>> a[:,1]
array([1, 4, 7])
>>> a[:,1:3]
array([[1, 2],
       [4, 5],
       [7, 8]]) 
```

然后一些 matplot 来处理绘图。[如果您在Matplotlib Gallery](http://matplotlib.org/gallery.html)中找到您想要的东西，我可以为您提供更多帮助。

# mongodb - iReport 一组字段只返回一个结果

> ID：13634351
> 
> 赞同：0
> 
> 时间：2012-11-29T20:41:21.120
> 
> 标签：mongodb, formatting, jasper-reports, ireport

我想在图表之后显示所有人的评论。
由于某些原因，它只显示最后一个人的评论。
我发现原因可能是因为您放置的位置。
例如，如果我将名称字段放在详细列中，它将重复，但格式如下所示：

```
-----------------------------
 Name          Rating          
Wilshere J.      3.5
Wilshere J.
Comments: He is good. 
          Very nice person.

Alex             3.2
Alex J.
Comments: He is good.

Leah             3.2
Comments: She is nice.

---------------------------- 
```

我想要的报告如下所示：

```
-----------------------------
 Name          Rating          
Wilshere         3.5

Alex             3.2

Leah             3.2

----------------------------
Wilshere J.
Comments: He is good. 
          Very nice person.

Alex J.
Comments: He is good.

Leah C. 
Comments: She is nice. 
```

这个成型问题有什么解决办法吗？
我从 MongoDB 获取数据库。我不认为是查询问题。
非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:43:02.247

您需要使用报告组功能并使用组表达式等于您的破坏规则，我认为这是您的列名称。

**对于 IReport 3.0.0：**

1) 单击报告组按钮

2) 添加新组

3) 为组添加 ID，例如 GROUP_NAME

4) 添加一个 Group 表达式，例如 $F{NAME}

5）将列添加到创建的新报告带

**对于 Ireport 5.0.0**

1）右键单击“报告检查器”上的报告名称

2) 选择添加报告组

3) 为组添加 ID，例如 GROUP_NAME

4) 添加一个 Group 表达式，例如 $F{NAME}

5）将列添加到创建的新报告带

# batch-file - 这段代码实际上做了什么？

> ID：13634355
> 
> 赞同：2
> 
> 时间：2012-11-29T20:41:50.587
> 
> 标签：batch-file

我试图理解这个批处理代码片段，我什至无法想象它到底在做什么。

我对这 3 行感到困惑：

```
echo @prompt set date=$d$_set time=$t$h$h$h > {a}.bat
%comspec% /e:2048 /c {a}.bat > {b}.bat
for %%v in ({b}.bat del) do call %%v {?}.bat 
```

他们在做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:17:00.243

真的，我不知道你在哪里可以找到那个例子，因为对于 Win9x 来说似乎是一个非常古老的 OLD OLD 函数。

第一个 echo 命令在名为“ **{a}.bat** ”的文件中打印所需的命令（打印的命令在操作系统中设置日期和小时）

第二个命令仅执行 CMD（CMD 路径存储在**%comspec%**变量中），环境大小以字节 ( **/E:xxxx ) 为单位，将****{a}.bat**中的打印命令像参数一样传递并打印标准输出在第二个文件中（**{b}.bat**）

第三个 FOR 命令使用第二个标记 ( **del** )，就像带有动态运算符的命令一样**？**至极匹配**0 或 1 个字符**，因此循环执行如下命令循环：

```
del {a}.bat
del {b}.bat 
```

我希望这对你有所帮助。

# python - 在 Python 中从字典中提取值

> ID：13634356
> 
> 赞同：1
> 
> 时间：2012-11-29T20:42:02.447
> 
> 标签：python

为这个潜在的愚蠢问题道歉，我被困住了。我想从列表中的字典中打印出一些值，在另一个名为“匹配”的字典中。字典如下所示，你可以看到它有点雷区。该词典描述了两位球员“Rose”和“Garth Mulroy”在 Betfair 上的高尔夫博彩市场。我要提取的正是这两个字符串。非常感谢任何帮助！

```
match = bot.get_market(matches[0])
from pprint import pprint
pprint(match)

{'bspMarket': 'false',
 'countryISO3': 'ZAF',
 'couponLinks': '',
 'discountAllowed': 'true',
 'eventTypeId': '3',
 'event_ids': ['3', '26909125', '26930851'],
 'interval': '0.0',
 'lastRefresh': '1354218248109',
 'licenceId': '1',
 'marketBaseRate': '5.0',
 'marketDescriptionHasDate': 'true',
 'marketDisplayTime': '2012-11-30T09:10:00.000Z',
 'marketId': '107625660',
 'marketStatus': 'ACTIVE',
 'marketSuspendTime': '2012-11-30T09:10:00.000Z',
 'marketTime': '2012-11-30T09:10:00.000Z',
 'marketType': 'O',
 'marketTypeVariant': 'D',
 'maxUnitValue': '0.0',
 'menuPath': '\\Group B\\Nedbank Challenge 2012\\2nd Round 2 Balls',
 'minUnitValue': '0.0',
 'name': 'Rose',
 'numberOfWinners': '1',
 'parentEventId': '26930851',
 'runners': [{'asian_line_id': '0',
              'handicap': '0.0',
              'name': 'Justin Rose',
              'selection_id': '2078854'},
             {'asian_line_id': '0',
              'handicap': '0.0',
              'name': 'Garth Mulroy',
              'selection_id': '2235937'},
             {'asian_line_id': '0',
              'handicap': '0.0',
              'name': 'Tie',
              'selection_id': '39905'}],
 'runnersMayBeAdded': 'false',
 'timezone': 'RSA',
 'unit': ''} 
```

我的尝试：

```
match = bot.get_market(matches[0])
for runners in match:
    print runners['name'] 
```

产生错误：

```
Traceback (most recent call last):
  File "C:/Python27/bots/test.py", line 31, in <module>
    print runners['name']
TypeError: string indices must be integers, not str 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T20:45:45.537

如果您的原始字典名为`original_dict`，`original_dict[runners]`则给出跑步者列表。

```
runner_list = original_dict["runners"]
for runner in runner_list:
   name_you_are_looking_for = runner["name"] 
```

不过，这很难解析，您可能希望以更容易理解的方式组织数据。无论如何，将来请发布更多代码，以便我们更好地了解您的问题。

# c# - 如何在 Silverlight 中克隆 Binding 对象？

> ID：13634358
> 
> 赞同：0
> 
> 时间：2012-11-29T20:42:04.240
> 
> 标签：c#, silverlight, xaml, data-binding

1.  在 Silverlight 4.0 中制作 Binding 对象的完整单独副本需要什么？
2.  仅仅复制它的每一个可设置属性就足够了吗？

**更新**

据我所知，第二个问题的答案是否定的。因为在绑定上设置属性会触发它的状态，一旦初始化就无法更改。例如，尽管没有什么可以阻止您设置 Source 和 RelativeSource 属性，但您会在运行时遇到异常，因为一旦设置了 Source 属性，您就无法再设置 RelativeSource。与 ElementName 属性相同的是，即使默认情况下它已经拥有 NULL，也不能分配给 NULL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:34:29.247

您是否尝试在 Silverlight 中克隆 POCO 对象？如果是这样，你可以实现这样的事情：

```
public static T Clone<T>(T source)
{

    DataContractSerializer serializer = new DataContractSerializer(typeof(T));
    using (MemoryStream ms = new MemoryStream())
    {
        serializer.WriteObject(ms, source);
        ms.Seek(0, SeekOrigin.Begin);
        return (T)serializer.ReadObject(ms);
    }
} 
```

# c# - 从表中获取重复值

> ID：13634359
> 
> 赞同：0
> 
> 时间：2012-11-29T20:42:06.817
> 
> 标签：c#, sql, sql-server-2008, datatable

我正在使用 VS10 和 MSSQL2008。我有两张桌子。

![Gesellschaft_Sparte_temp](../Images/49d23a4b8b3a89c07b31885486803c1a.png)

***Gesellschaft_Sparte_temp***

![fr_vertrag](../Images/b2292b613449292f4488d050f59153ab.png)

***fr_vertrag***

```
string conS = "Data Source=RIYAD-PC;Initial Catalog=TestDB;Integrated Security=True";
        SqlConnection con = new SqlConnection(conS);

        string qs1 = "Select Distinct Gesellschaft_ID from Gesellschaft_Sparte_temp" ;
        string qs2 = "select distinct gesellschaft_id,gesellschaft from fr_vertrag";
        con.Open();

        DataTable dt1 = new DataTable();
        DataTable dt2 = new DataTable();

        SqlDataAdapter da1 = new SqlDataAdapter(qs1, conS);
        SqlDataAdapter da2 = new SqlDataAdapter(qs2, conS);

        da1.Fill(dt1);
        da2.Fill(dt2); 
```

现在我有两个数据表。我想更新**Gesellscaft_Name** = **fr_vertrag**。**Gesellschaft_Sparte_temp**表中的**gesellscaft_name** ，其中**Gesellschaft_ID** = **fr_vertrag**。**gesellschaft_id**。

 ******但是如果在**fr_vertrag**表中，任何不同的**gesellschaft_id**都有具有不同**gesellschaft**值的重复项，那么这些数据（**gesellschaft_id**，**gesellschaft**）将被放入具有相似列名的数据表中。

在这里我有几个重复。**fr_vertrag**中查询结果的图片：

```
select distinct gesellschaft_id,gesellschaft from fr_vertrag 
```

![在此处输入图像描述](../Images/b57f0c7c9d416b8b2b3009be561aa508.png)

我怎么能得到这些重复的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:53:11.837

我相信你会想要：

```
select distinct gesellschaft_id,gesellschaft from fr_vertrag
GROUP BY gesellschaft_id
HAVING COUNT(*)>1 
```******

# php - Windows 7 下 Wamp 中的多个 PHP 版本

> ID：13634364
> 
> 赞同：9
> 
> 时间：2012-11-29T20:42:25.923
> 
> 标签：php, wamp

我已经在 Windows 7 下使用 php 5.3.8 wamp。我想安装 php5.3.19 和 php.5.4.9 我已经用谷歌搜索了，我发现的唯一说明是这篇[文章](http://absolutemg.com/2010/08/20/manually-install-php-on-wampserver/)

我尝试了这些说明，但对我不起作用。右键单击任务栏 wamp 图标时，我看到了额外的版本，但之后我选择的 php5.3.8 正在运行。

我有一个 phpinfo() 脚本，以确保。

有关如何执行此操作的任何说明？我不想卸载 php 5.3.8 作为我的服务器版本。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T21:05:16.317

是的，这个过程相当简单。转到他们的 WampServer 主页的[下载部分](http://www.wampserver.com/en/#download-wrapper)。在那里您将看到一个插件部分，单击“下载 PHP 插件”按钮。选择您要下载的版本并运行安装程序。

**更新（2014 年 8 月 5 日）：**现在他们在 WampServer 2 - Extensions/PHP/ 下的 Sourceforge 项目中拥有它：http: [//sourceforge.net/projects/wampserver/files/WampServer%202%20-%20Extensions/ php/](http://sourceforge.net/projects/wampserver/files/WampServer%202%20-%20Extensions/PHP/)

# eclipse - Eclipse java代码样式格式化程序配置文件位置

> ID：13634366
> 
> 赞同：9
> 
> 时间：2012-11-29T20:42:40.657
> 
> 标签：eclipse, formatter

我正在尝试找出代码样式格式化程序配置文件的保存位置。我有三个配置文件，但我需要知道它们在我的硬盘上的位置。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-30T02:26:34.527

它们位于这些文件中的工作区中

```
...\.metadata\.plugins\org.eclipse.core.runtime\.settings\org.eclipse.jdt.ui.prefs 
...\.metadata\.plugins\org.eclipse.core.runtime\.settings\org.eclipse.jdt.core.prefs 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-09-30T07:33:39.643

您只需要在导入这些文件之前导出它们。

```
 Eclipse > Window > Preferences > Java > Code Style > Formatter: 
```

*   从列表中选择活动配置文件
*   编辑
*   出口
*   找到要保存它的目录。

![导出 Eclipse 格式化程序配置文件](../Images/e66f8e60c8ee3731826f2a5597004134.png)

# mysql - MySQL Workbench 将结果显示为 BLOB

> ID：13634369
> 
> 赞同：35
> 
> 时间：2012-11-29T20:42:52.277
> 
> 标签：mysql, mysql-workbench

我一直发现 MySQL Workbench 将查询结果显示为`BLOB`. 例如： `SELECT INET_NTOA(167773449)`-->`BLOB`

如果我选择“查看值”，我可以确定文本值是“10.0.5.9”，但是当我选择多行并想看一眼内容时，这很烦人。

有没有办法解决这个问题，还是工具的限制？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-12-18T01:42:56.867

**背景：** 在结果中返回二进制字符串值（BINARY/VARBINARY 类型）时会出现此问题。二进制字符串包含零字节，出于某种原因，显然是安全的，默认情况下没有显示。有关二进制字符串的更多详细信息，请参见[此处](http://dev.mysql.com/doc/refman/5.1/en/binary-varbinary.html)。

即使在报告的示例`SELECT INET_NTOA(167773449)`中，该函数也返回二进制字符串。检查[此](http://dev.mysql.com/doc/refman/5.1/en/miscellaneous-functions.html#function_inet-ntoa)以供参考。

**解决方案：** 自 MySQL Workbench v5.2.22 起，可以通过首选项设置是否显示或隐藏这些值。

1.  在 MySQL Workbench 中，转到：*“Edit -> Preferences... -> **SQL Queries** ”*或*“Edit -> Preferences... -> SQL Editor -> **SQL Execution** ”*（取决于您拥有的 Workbench 版本）。
2.  选中“将 BINARY/VARBINARY 视为非二进制字符串”选项以显示实际值。

**参考：** 原始问题已报告并[在此处](http://bugs.mysql.com/bug.php?id=53920)修复。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2017-05-07T22:36:46.077

您可以做的是将您的 BLOB 类型转换为字符串。这只会让您在浏览您的选择语句时浏览一下您的 BLOB 类型中的内容。

```
SELECT CAST(`blob_column_name` AS CHAR(10000) CHARACTER SET utf8) FROM `table_name`; 
```

# java - 奇数价值的正则表达式

> ID：13634372
> 
> 赞同：0
> 
> 时间：2012-11-29T20:42:58.927
> 
> 标签：java, regex

我有一个包含奇数价值的字符串。字符串是：

`Daily interest charges #901 $ 17.2789 259.18 190.07/day`

奇数值是`$ 17.2789`

我正在尝试创建一个正则表达式，它将得到 is，但没有反向引用。这就是我想出的：

`(?:\\$\\s*?\\d{0,1,2,3}\\.\\d{0,1,2,3,4}\\s*?/?day)?`

然而，这不会编译。里面的一切对我来说似乎都是合理的？知道它可能有什么问题吗？我正在使用 Java

编辑

我已经尝试过 m.buettner 的建议`\\$\\s*\\d*\\.\\d*`。我把它放在下面的第三组中。这几乎可以做到。这是我的完整正则表达式：

`(.*)\s?#(\s?\d{3,4})\s*(?:\$\s*\d*\.\d*)?((?:-|\()?\$?(?:\d{1,3}[ ,]?)*(?:\.\d+)\)?)\s*((?:-|\()?\$?(?:\d{1,3}[ ,]?)*(?:\.\d+)\)?).*`

它拉的组是：

1.  每日利息费用
2.  901
3.  9 259.18
4.  190.07

问题在于第 3 组。它包含一个额外的数字，第一个`9`

编辑 编辑

有一个空间导致了这个问题，它做到了：

`(?:\$\s*\d*\.\d*\s)?`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T20:44:30.957

据我所知`\\d{0,1,2,3...}`是无效的语法。你的意思可能是：

```
(?:\\$\\s*?\\d{0,3}\\.\\d{0,4}\\s*?/?day)? 
```

另外，您是否知道您的整个模式是可选的？这带来了一个问题。`\\d{0,3}\\.\\d{0,4}`只会匹配第一个（奇数）数字。然后你有一个可选的斜杠，但是一个强制性的`day`（如果整个模式没有被删除）。`/day`但是在您的输入字符串中，之前遇到了一些其他数字。因此，即使它编译，它也不会匹配您的价格值。您可能应该`\\s*?/?day`完全省略。并考虑删除 external `?`，也是。正如布赖恩在评论中所说，没有必要使`\\s`重复变得不贪婪，因为它和以下元素无论如何都是互斥的：

```
\\$\\s*\\d{0,3}\\.\\d{0,4} 
```

如果值是“奇数”，你真的必须对位数如此具体吗？

```
\\$\\s*\\d*\\.\\d* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T21:03:27.633

这种模式

`"\\d+\\.\\d{3,}"`

将匹配点后超过 2 个数字的每个数字。

# c# - 将本地数据保存在平板电脑 Windows 应用程序上的最佳方法是什么？

> ID：13634373
> 
> 赞同：1
> 
> 时间：2012-11-29T20:42:58.490
> 
> 标签：c#, .net, local-storage, tablet

我必须编写一个 Windows 窗体应用程序，它将在装有 Windows 7 的平板电脑上运行。

此应用程序将处理与我们的中央 ERP 没有连接的仓库的库存盘点。用户将扫描条形码标签，应用程序必须将数据保存在本地。

在操作结束时，用户将能够通过 LAN 将数据上传到我们的 ERP 表中。

因此我的问题是将扫描的数据保存在本地的最佳方法是什么？

选项 1：简单文本文件（自定义 txt 或 XML）

选项 2：SQL Server 精简版？

选项3：？？？

我不太喜欢文本文件的想法，因为我必须每隔 30-40 秒打开和关闭它们，用户将扫描标签。SQL Compact 是最好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:59:19.743

是的。只需确保在每个可以执行更新的表中存储设备 ID。然后，当它们通过合并复制同步回共享 SQL Server 时，任何条目都不会发生冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T21:07:21.143

If you are only storing something simple like a SKU and quantity, and not modifying/replacing values, a text file will be extremely fast and simple. You can open a text file for append and just add lines on the end, then close the file. You could also use XML and serialization, but if there are just a couple of values then a plain text file format would be simplest and serialization will add development labor and has more potential for performance issues, deserializing, updating, then reserializing the object back to disk over and over.

A DB might be necessary if you want to have relational data, or if somehow multiple users/devices could access simultaneously, or if you need rowset operations for data modification. If you use any db it will also access the file system every time there is a new row, same as using a file.

# elasticsearch - 如何在计算自定义分数之前获取文档的当前分数

> ID：13634377
> 
> 赞同：1
> 
> 时间：2012-11-29T20:43:04.137
> 
> 标签：elasticsearch

我正在用 Java 创建一个自定义脚本来为文档评分。我希望在进入自定义记分器之前尝试获取文档的分数。

在 mvel 中，您似乎可以这样做：“_score * doc['my_numeric_field'].value / pow(param1, param2)”

_score 只会给你分数。我没有看到任何使用 Java API 获得分数的有效方法。

注意：我已经尝试过 doc().getScore() 并且似乎总是给出空指针异常。

奖励：我如何才能获得其他文档字段，例如 _boost 或 _index？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:36:31.150

与“_score * doc['my_numeric_field'].value / pow(param1, param2)”等效的本机脚本将是：

```
@Override
public float runAsFloat() {
    return score() * doc().numeric("my_numeric_field").getFloatValue() / divider;
} 
```

您可以在工厂方法中计算，因为它在执行`pow(param1, param2)`之间不会改变。`runAsFloat()`

如果[启用](http://www.elasticsearch.org/guide/reference/mapping/index-field.html)`_index`了字段，则可以像这样访问它：

```
doc().field("_index").getStringValue() 
```

我建议使用查询时间提升而不是索引时间提升。

# mysql - mysql slave越来越落后但没有负载

> ID：13634379
> 
> 赞同：0
> 
> 时间：2012-11-29T20:43:13.637
> 
> 标签：mysql, database-replication

我们已经有超过 6 个月的主/从设置。复制从来都不是问题。如果 master 宕机，slave 不会被用于“保险单”以外的任何事情。它唯一的活动是在每天早上 2:30 停止从站并完成完整备份，然后重新启动从站。备份通常需要大约 30 分钟，从机在 10 分钟内赶上备份。

从机是一台更强大的机器（24 核对 8 核），我们只是在考虑将其切换为主机并在下周末反转复制。

昨天早上 9 点，奴隶突然开始落后了。主人没有太大的负担。真正不寻常的是从服务器上的平均负载约为 3，大约有 2% 的等待时间（如顶部所示）和大约 1/10% 的 CPU 利用率，但从服务器没有赶上。看起来它几乎处于静止状态。处理 1 秒的复制日志大约需要 10 分钟（从实际时间中减去后面的秒数）。slave IO 线程跟上 master 的 bin 日志，只是 sql 线程在爬取查询。然而，查询正在处理中，对从属状态进行监视会显示 exec 主日志位置的持续更新。

我们已经尝试停止从属 io 线程以查看它是否有帮助，它没有任何影响。好像突然之间每个查询都变得非常昂贵。

我们已经对底层的raid进行了磁盘检查，系统或mysql日志中没有任何内容表明有任何错误。我们已经多次重新启动并重新启动 mysql，清除系统缓存等......

这是在一周内没有任何代码更改并且在此事件之前没有异常操作问题的生产系统上。

我们完全不知道为什么一个没有接近峰值负载的系统似乎无法跟上主系统的速度。

我们还应该研究什么？如果可以帮助某人帮助我们确定什么是“错误”，我将很乐意在此处发布系统统计信息等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T05:04:42.210

我最后一次检查，复制是单线程的，所以我希望你能找到一个阻塞系统的慢查询。我有一个客户端，它的复制还可以，但是落后了 1000 万秒！（哎呀）

SHOW FULL PROCESSLIST 中显示什么查询？它总是相同的查询？如果是这样，那么该查询可能变得更加昂贵。尝试解释它（或变体，如果它是更新等）。

如果您没有立即看到它，请尝试打开慢查询日志，看看您会得到什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-07T21:20:42.527

事实证明，一个 inodb 表已经变得相当大，并且插入其中变得越来越昂贵。我们将表切换到主服务器（实际上是从服务器）和它追上的从服务器上的 myisam。当将其转换为 myisam 的“更改表”归结为奴隶时，它基本上变成了无操作。

# c# - 异步事件处理程序和并发

> ID：13634380
> 
> 赞同：4
> 
> 时间：2012-11-29T20:43:17.967
> 
> 标签：c#, task-parallel-library, async-await

在 C# 控制台应用程序的上下文中，如果我创建一个用于异步接收消息的循环，它会为收到的每条消息引发一个事件，例如：

```
while (true)
{
   var message = await ReceiveMessageAsync();
   ReceivedMessage(new ReceivedMessageEventArgs(message));
} 
```

现在，如果我有多个事件订阅者（为了示例，假设为 3 个订阅者），所有订阅者都使用异步事件处理程序，例如：

```
async void OnReceivedMessageAsync(object sender, ReceivedMessageEventArgs args)
{
   await TreatMessageAsync(args.Message);
} 
```

消息对象是否应该以线程安全的方式编码？我认为是这样，因为来自不同事件处理程序的 TreatMessageAsync 代码可能会为所有订阅者同时运行（当引发事件时，订阅者的三个异步事件处理程序被调用，每个都启动一个异步操作，该操作可能在不同线程上同时运行由任务调度程序）。还是我错了？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T03:02:42.237

您应该以线程安全的方式对其进行编码。最简单的方法是使其不可变。

如果你有一个真实的*事件*，那么它的参数应该是不可变的。如果您将事件处理程序用于不是真正的*事件*（如*命令*或*实现*），那么您可能需要修改您的 API。

可以有并发事件处理程序，因为每个处理程序将按顺序*启动*，但它们可以同时*恢复*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T22:12:48.050

正如斯蒂芬建议的那样，在这种情况下实现线程安全的最简单方法是使用不可变事件参数。

在大多数情况下，甚至 args 仅用于通知观察者，而不需要从可观察方到观察者（即从事件订阅者到事件所有者）的更改。在某些特殊情况下，例如实现责任链设计模式事件参数应该是可变的，但在所有其他情况下它们不应该是可变的。

在这种情况下，不变性不仅可以帮助您轻松实现并发处理程序，而且可以带来更清晰的设计并提高可维护性，因为现在人们可以不正确地使用您的 API。

**结论是**：你应该实现你的方法线程安全，但你应该知道，如果你的事件将从非 UI 线程触发，来自事件处理程序的未处理异常将被吞没。

这是使用 async void 方法的危险：如果此方法将因异常而失败，并且您将在没有同步上下文的环境中调用它（例如来自控制台应用程序的线程池线程），您将获得域未处理的异常您的应用程序将关闭：

```
internal class Program
{
    static Task Boo()
    {
        return Task.Run(() =>
                        {
                            throw new Exception("111");
                        });
    }

    private static async void Foo()
    {
        await Boo();
    }

    static void Main(string[] args)
    {
        // Application will blow with DomainUnhandled excpeption!
        try
        {
            Foo();
        }
        catch (Exception e)
        {
            // Will not catch it here!
            Console.WriteLine(e);
        }

        Console.ReadLine();
    }
} 
```

# javascript - 在 jquery 每个循环中调用对象方法 - 范围问题？

> ID：13634384
> 
> 赞同：1
> 
> 时间：2012-11-29T20:43:40.260
> 
> 标签：javascript, jquery

```
My.Awesome.Obj = function() {
    return {
        // PUBLIC PROPERTIES
        legendObj:  null,

        // PUBLIC METHODS
        init: function() {
            this.assignLegendClick();
        },

        assignLegendClick: function() {
            console.log('*** drawLegend()');
            var checkboxes = this.legendObj.find("input");
            checkboxes.each(function() {
                $(this).click(function() {
                    this.handleLegendClick();
                });
            })
        },

        handleLegendClick: function() {
            console.log('*** handleLegendClick()');
        },

        EOF: null
    };
}(); 
```

所以我收到一个错误说

> 未定义 handleLegendClick

我假设这是一个范围问题，但我不确定如何在循环中引用父对象......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T20:44:53.190

问题在于`this`调用`window`单击事件处理程序的时间。

你可以这样做：

```
My.Awesome.Obj = function() {
    var obj = {
        // PUBLIC PROPERTIES
        legendObj:  null,

        // PUBLIC METHODS
        init: function() {
            obj.assignLegendClick();
        },

        assignLegendClick: function() {
            console.log('*** drawLegend()');
            var checkboxes = obj.legendObj.find("input");
            checkboxes.each(function() {
                $(this).click(function() {
                    obj.handleLegendClick(); // <=== replace this with obj
                });
            })
        },

        handleLegendClick: function() {
            console.log('*** handleLegendClick()');
        },

        EOF: null
    };
    return obj;
}(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T20:46:49.753

是的，这是一个范围界定问题：

```
assignLegendClick: function() {
  console.log('*** drawLegend()');
  var checkboxes = this.legendObj.find("input");
  checkboxes.each(function() {
    $(this).click(function() {
      this.handleLegendClick();
    });
  }) 
```

使用辅助参数来保留范围（通常称为 self 或 _self）

```
assignLegendClick: function() {
  console.log('*** drawLegend()');
  var self = this
    , checkboxes = this.legendObj.find("input");
  checkboxes.each(function() {
    $(this).click(function() {
      self.handleLegendClick();
    });
  }) 
```

# flot - 控制图例显示在流动图上

> ID：13634387
> 
> 赞同：2
> 
> 时间：2012-11-29T20:43:49.997
> 
> 标签：flot

我试图为我的报告工具实现浮动图表（ [http://www.flotcharts.org/ ）。](http://www.flotcharts.org/)我遇到了我无法找到解决方案的情况。有人能帮我吗。

我有一个包含两组数据的多图表系统，比如说

```
[ { 标签：“Foo”，数据：[ [10, 1], [17, -14], [30, 5] ] },
    { 标签：“条形图”，数据：[ [11, 13], [19, 11], [30, -7] ] } ]

```

要求是，我只想显示一个图例。说图例“Foo”，并想隐藏图例“Bar”。但我不想让标签空白。我只想隐藏图例，但保持标签不变。

以前有人做过吗，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:32:59.193

这没有记录 - 尽管它应该是 - 但是如果您提供一个图例 labelFormatter 函数，并且该函数返回 null 而不是字符串，则不会为该系列创建图例条目。

这不是很完美，因为它要求您能够根据标签或数据识别隐藏的系列，但它通常工作得很好。

# java - Java - 我可以在数组的索引中添加多个相同类型的项目吗？

> ID：13634390
> 
> 赞同：0
> 
> 时间：2012-11-29T20:43:56.910
> 
> 标签：java, arrays, arraylist

我可以在java中的数组索引中添加多个相同类型的项目吗？我正在尝试用 java 制作一个双陆棋程序，但我不知道如何创建棋盘。我需要在一个位置存储“检查器”，5 个检查器。我可以在一个索引中存储 5 个项目吗？例如。`array[1] = {a,b,c,d,e}`. 如果我不能用数组做到这一点，有没有其他方法可以做到这一点。

这就是我所拥有的：（我现在没有颜色。只有变量 homeWhite 表示白人，homeBlack 表示黑人）

```
 //other methods omitted

 /**
 *  a method to set the default board design and layout of the game.
 */
private void newBoard()
{

    homeWhite = 0;
    homeBlack = 0;
    barWhite = 0;
    barBlack = 0;
    private int [] stoneCounts = new int[25];

    stoneCounts[0]  = 5*homeWhite;
    stoneCounts[11] = 2*homeWhite;
    stoneCounts[16] = 3*homeWhite;
    stoneCounts[18] = 5*homeWhite;
    stoneCounts[23] = 5*homeBlack;
    stoneCounts[12] = 2*homeBlack;
    stoneCounts[7]  = 5*homeBlack;
    stoneCounts[5]  = 3*homeBlack;
    stoneCounts[24] = barWhite = barBlack;

    System.out.println(stoneCounts[0]+"===="+ stoneCounts[1]+"===="+stoneCounts[2]+"===="+stoneCounts[3]+"===="+ stoneCounts[4]+"===="+stoneCounts[5]+"===="+ 
    stoneCounts[6]+"===="+stoneCounts[7]+"===="+stoneCounts[8]+"===="+stoneCounts[9]+"===="+ stoneCounts[10]+"===="+stoneCounts[11]);
    System.out.println("");
    System.out.println("");
    System.out.println("Bar: "  + stoneCounts[24]);
    System.out.println("");
    System.out.println("");
    System.out.println(stoneCounts[12]+"===="+ stoneCounts[13]+"===="+stoneCounts[14]+"===="+ stoneCounts[15]+"===="+stoneCounts[16]+"===="+ stoneCounts[17]+"===="
    +stoneCounts[18]+"===="+stoneCounts[19]+"===="+stoneCounts[20]+"===="+ stoneCounts[21]+"===="+stoneCounts[22]+"===="+stoneCounts[23]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:48:46.310

由于您有一定数量的空间和每个空间上的可变数量的块，我会推荐一个 ArrayLists 数组：

```
ArrayList<Piece>[] spaces = new ArrayList<Piece>[numSpaces];

for(int i=0; i<numSpaces; i++){
   spaces[i] = new ArrayList<Piece>();
} 
```

这假设您有一个 Piece 类，它可以存储作品的颜色或任何其他信息。然后每当你想添加一块，你可以做空格[i].add(piece); 管他呢。希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:50:39.530

好的，您可以考虑两种方法。首先，您可以创建一个二维数组。从您的问题中我不确定您在数组中究竟想要什么类型的信息，但是例如，如果我们假设您希望创建一个二维整数数组，那么您可以将代码调整为您喜欢的方式，您只需要要做的是将类型 (int) 更改为其他类型，例如 String 或 char。这只是帮助您制作 2​​D 数组并了解其工作原理的一般信息。

```
int[] intArray = new int[5]; 
```

这将为您创建一个整数数组，最多可以接受 5 个不同的值。您将拥有 intArray[0]、intArray[1]、intArray[2]、intArray[3] 和 intArray[4]。您可能希望将其可视化为 5 个空格，如下所示：

```
[]  []  []  []  [] 
```

然而，有帮助的是使这成为二维的。想象一下：

```
[] [] [] [] []
[] [] [] [] []
[] [] [] [] [] 
```

这就是你要找的。这是一个二维数组，您可以像这样制作。int[][] intArray = new int[3][5];

现在，你只需要小心地跟踪你把东西放在哪里。你可以把东西放到数组的这些位置：

```
intArray[0][0]
intArray[0][1]
intArray[0][2]
intArray[0][3]
intArray[0][4] 
```

但是由于它是二维的，您可以这样做：

```
intArray[1][0]
intArray[1][1] 
```

等等。

另一种方法是使用对象并为您的项目创建一个对象，然后创建这些对象的数组。

我希望这有帮助，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T21:02:59.147

我的建议是你做一个更面向对象的方法，扩展 awolfe91 的答案。我建议开设一个课程`Position`，您可以在其中存储有关每个位置有多少棋子以及这些棋子颜色的信息。那么你只需要一个数组`Position`。

例如，在`Position`该类中，您可以具有`canAddChecker(color)`例如可以返回布尔值的方法，如果将该颜色的检查器添加到该位置是有效的。

# python - allauth 是否支持 UserProfile 模型？

> ID：13634391
> 
> 赞同：0
> 
> 时间：2012-11-29T20:44:04.937
> 
> 标签：python, django, django-models, django-authentication, django-allauth

我读到可以使用 allauth 创建一个注册表单，但它是否也支持 Django 文档中描述的 UserProfile 模型？

[https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:54:15.033

您可以自由地建立一个自定义注册表单，询问用户他最喜欢的颜色，并将其存储在您喜欢的项目特定的 UserProfile 中。`allauth`在这一点上不会妨碍标准的 Django 行为。

在这里查看如何设置自定义注册表单：

[使用 django-allauth 时如何自定义用户配置文件](https://stackoverflow.com/questions/12303478/how-to-customize-user-profile-when-using-django-allauth)

# parsing - Pratt 解析器与其他解析器类型相比如何，为什么它们使用得这么少？

> ID：13634393
> 
> 赞同：23
> 
> 时间：2012-11-29T20:44:07.377
> 
> 标签：parsing

我最近从[这篇](http://journal.stuffwithstuff.com/2011/03/19/pratt-parsers-expression-parsing-made-easy/)优秀的文章中了解了 Pratt 解析器，发现 Pratt 解析器比递归下降解析器更简单、更优雅。我试图找到更多关于它们如何与其他解析器类型进行比较的信息，但发现维基百科的文章几乎不是一个存根，而且我能找到的使用它的更大项目的数量等于两个。

为什么 Pratt 解析器很少使用？它们是否有我不知道的严重限制或缺点？它们与其他解析器类型相比究竟如何？什么时候应该和什么时候不应该使用它们？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-30T01:33:49.250

Pratt 解析器和所谓的“调车场”解析器（附有更长的 Wikipedia 文章）之间几乎没有区别；主要区别在于 Pratt 使用递归，因此使用堆栈，而 Djikstra（“分流场”）保留显式堆栈。除此之外，它们执行完全相同的操作序列。我想 Djikstra 对算法的表达由于递归恐惧症而更常见。

使用程序栈有一些好处；其中之一是更容易维护类型安全，因为整个堆栈不必是一种类型。另一方面，许多表达式解析器只有一种类型。

Dragon Book 包含一个算法，该算法将从语法中生成运算符优先级表。正如它所指出的，算法成功的事实并不一定意味着运算符优先级解析器将解析完全相同的语言。那里有更多有趣的信息，我当然已经忘记了；如果您对算法感兴趣，那是您可以查看的地方之一。它包括一个有趣的见解，即 < 和 > 优先关系运算符可以通过查看派生来生成，如果您以明显的方式用 < 和 > 包围产生式的结果。

总的来说，我的经验是，大多数时候当你发现一篇博文说“我的上帝，我刚刚偶然发现了 X，它很棒，为什么没有更多的人知道它？？？？”，答案是“请不要假设你的无知是普遍的。” 但也许我今天只是玩世不恭。

顺便说一句，`Lua`解析器是一个手工构建的递归下降解析器，它使用 Pratt 风格的解析来解析表达式；我认为这是一种非常常见的技术，您可能会在其他地方找到它，尽管您可能必须通过代码筛选才能看到模式。

# jquery - 使用 jquery 获取最初隐藏的文本框的值

> ID：13634395
> 
> 赞同：-1
> 
> 时间：2012-11-29T20:44:08.937
> 
> 标签：jquery, ajax

我正在尝试获取最初**通过css隐藏**并使用简单jquery显示的文本框的值...现在我想获取最初隐藏的文本框的值...代码如下：

```
$("#reply_send").click(function (e) {
    e.preventDefault();
    var name = $('#reply_name').val();
    alert(name);
}); 
```

但这会返回`undefined`。我如何获得该价值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:50:15.687

您可能有一个 HTML 错误，因为这似乎工作正常。假设您的 textarea 的 id 为**reply_name**，那么您将能够使用**$('#reply_name').val();检索该值。**.

看看这个：[小提琴](http://jsfiddle.net/EbhaZ/)

```
$(document).ready(function(){
    $('#show').click(function(){
        $('div').show();        
    });
    $('#reply_send').click(function(){
      var name= $('#reply_name').val();
      alert(name);            
    });
});​ 
```

# python - Python 在零处拆分列表

> ID：13634396
> 
> 赞同：-1
> 
> 时间：2012-11-29T20:44:10.437
> 
> 标签：python

> **可能重复：**
> [从 Python 中的多维列表中删除前导零和尾随零](https://stackoverflow.com/questions/13633901/remove-leading-and-trailing-zeros-from-multidimensional-list-in-python)

如果我有一个列表，例如：

```
my_list = [[1,2,0,1], [1,0,0,1]] 
```

我想将其拆分为零并将它们扔掉，这样我最终会得到类似的结果：

```
my_list = [[[1, 2], [1]], [[1],[1]]] 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:55:24.317

划分一个征服，你可以使用列表推导将其转换为更简单的问题

```
def split_a_list_at_zeros(L):
    ...
    return the_split_list

my_list = [split_a_list_at_zeros(item) for item in my_list] 
```

Akavall 给出了一个很好的提示来拆分列表

```
from itertools import groupby
def split_a_list_at_zeros(L):
    return [list(g) for k, g in groupby(L, key=lambda x:x!=0) if k] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-29T20:55:40.503

将嵌套列表作为输入有点过于具体，但此函数将使用与 string.split() 完全相同的样式基于另一个数字拆分数字列表

```
def nsplit(number_list,key):
    s=''.join(map(chr,number_list))
    return [map(ord,x) for x in s.split(chr(key))]

print nsplit([1,2,0,1],0)

[[1,2],[1]] 
```

# testing - 使 Grails Geb 测试具有事务性

> ID：13634397
> 
> 赞同：2
> 
> 时间：2012-11-29T20:44:11.730
> 
> 标签：testing, grails, spock, geb

我需要我的 Geb 测试是事务性的（在每个测试结束时回滚），我该如何实现呢？

我在类和方法中都尝试了 'static transactional = true' 和 @Transactional 注释，但它不起作用。

PD：我的测试扩展自 GebReportingSpec。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T01:24:45.273

显然这在技术上是不可能的：

[https://jira.codehaus.org/browse/GEB-238](https://jira.codehaus.org/browse/GEB-238)

# version-control - 有没有办法让 Get Latest in TFS 表现得像 Get Specific Version of the latest checkin

> ID：13634401
> 
> 赞同：4
> 
> 时间：2012-11-29T20:44:22.073
> 
> 标签：version-control, visual-studio-2012

每当我`Get Latest`在 Visual Studio 中使用 TFS 2012 时。它并没有真正得到最新的。它所做的是更新解决方案文件，以便我的队友添加的新内容显示为带有警告标记，因此说它不存在。

> FFS 我不只是要求 TFS 帮我拿它！

显然，TFS 通过基于一些我不知道自己要求什么并且会给我它认为正确的奇怪规则做出决定，从而使生活变得过于复杂。

就我而言，自从我上次从服务器获取文件以来，该文件是否已被修改过！它已经改变了。源为什么会

无论如何，我想知道是否有一种方法可以添加会触发`Get Specific Version`最新签入的上下文菜单命令？

它会为我节省一些失败的构建和点击，并且通常会被 TFS 中的源代码控制系统激怒。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T21:19:48.750

当您在解决方案上选择“获取最新*”时*，它将获取最新*的解决方案*。它不会获得添加到服务器解决方案中的新项目。

相反，打开源代码管理资源管理器并在包含解决方案的文件夹上执行 Get Latest。这将获得所有内容，解决方案文件，新文件等。

至于为什么会这样，我只能推测：Visual Studio 解决方案不强制执行严格的文件系统布局，并且可以将项目放在我的文件系统中的任何位置到解决方案中。因此，当您在解决方案上选择“获取最新”时，TFS 提供程序将识别解决方案中也在 TFS 中的每个项目，并在这些路径上执行“获取最新”。通过这样做，新项目将被排除在外（因为它们的路径未在 get 中指定。）

*如果您要对路径本身或包含它们的文件夹执行“获取最新”，则将*包括新项目，但是在您已经完成解决方案文件的获取之前，您无法知道这些新项目在哪里。

因此，如果您的解决方案设置为所有项目都包含在某个单一目录中（当然大多数都包含），那么最简单的方法就是使用源代码管理资源管理器中的“获取最新”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T10:21:01.680

该选项内置于此处：右键单击 -> 高级 -> 获取特定版本

[http://hamidshahid.blogspot.co.uk/2012/12/get-specific-version-in-visual-studio.html](http://hamidshahid.blogspot.co.uk/2012/12/get-specific-version-in-visual-studio.html)的屈膝礼

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-09T10:24:44.280

我知道这个问题已经过时了。但是，获得特定的最新信息可以解决这里的问题。

你应该`Righ Click your sln File` 去`SourceControl` 点击`Get Specific Version`

确保你`select the two check boxes`覆盖一切。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-12-02T21:30:44.850

在 TFS 2012 中，右键单击项目名称，将鼠标悬停在“高级”上，然后单击“获取特定版本...”

这个答案有点晚了，但对彼得来说，命令是不一样的。一个是“获取最新版本”，另一个是“获取特定版本...”。

这里真正的问题是“获取最新版本”没有得到最新版本（奇怪，但真实）。

从软件工程的角度来看，“为什么”很容易。一位项目负责人检查了这两个菜单选项的需求、分析、代码和测试，然后说：“好的！”。

这同样难以理解。这个人是谁？好消息是，我们可以从别人的错误或别人难以理解的错误中吸取教训。

# mapreduce - 使用 mapreduce 全局排序

> ID：13634408
> 
> 赞同：1
> 
> 时间：2012-11-29T20:44:55.203
> 
> 标签：mapreduce

我有 10 个带有数字（整数）的 HDFS 文件。当我使用 mapreduce 对它们进行排序时，每个 reducer 的输出都得到了很好的排序。但是，如果我想对所有数字进行全局排序怎么办？比如：第一个输出文件的数字最大，最后一个输出文件的数字最小......

我想到的选项是：

*   使用单个 reducer，这可能会破坏 mapreduce 的目的
*   下载并在本地合并排序...

有更好的解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T05:48:06.163

看一下 terrasort 示例。在那里，他们首先对数据进行采样以创建一个分区方案，以确保对最终结果进行全局排序。

# sql - 按字段值连接 SQL 表

> ID：13634415
> 
> 赞同：3
> 
> 时间：2012-11-29T20:45:30.980
> 
> 标签：sql, join

我需要连接两个表以根据 Reason_Id 从另一个表中获取多个字段的 Reason_Descriptions。我的问题是我不确定如何比较字段值。

```
Table 1:
  Reason_Id,
  Reason_Description

Table 2:
  Reason1_Id,
  Reason2_Id,
  Reason3_Id 
```

表 2 字段中的值始终与表 1 中的 Reason_Id 字段中的值匹配。我只需要显示描述而不是 ID。任何帮助表示赞赏。我知道如何在一个表字段与另一个表字段匹配的情况下进行简单的连接，但在这种情况下，表 2 中的每个原因 1、2、3 将具有不同的原因 ID 以匹配表 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T20:50:10.703

您必须加入描述表三次，表 2 中的每个字段一次。

例如：

```
SELECT Desc1.Reason_Description AS Reason1_Description, 
       Desc2.Reason_Description AS Reason2_Description, 
       Desc3.Reason_Description AS Reason3_Description 
FROM Table2
JOIN Table1 Desc1 ON Table2.Reason1_Id = Desc1.Reason_Id
JOIN Table1 Desc2 ON Table2.Reason2_Id = Desc2.Reason_Id
JOIN Table1 Desc3 ON Table2.Reason3_Id = Desc3.Reason_Id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:51:18.627

```
select * from t1 inner join t2 
 on t1.Reason_Id = t2.Reason1_Id
    or t1.Reason_Id = t2.Reason2_Id
    or t1.Reason_Id = t2.Reason3_Id 
```

看看这里[http://sqlfiddle.com/#!3/3b9d1/2](http://sqlfiddle.com/#!3/3b9d1/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T20:52:31.357

```
select Reason_Description
from table1 a
Inner join table2 b
  On a.Reason_id = b.Reason1_Id
Union
select Reason_Description
from table1 a
Inner join table2 b
  On a.Reason_id = b.Reason2_Id
Union
select Reason_Description
from table1 a
Inner join table2 b
  On a.Reason_id = b.Reason3_Id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T20:54:59.807

您基本上可以`UNPIVOT`使用第二个表，然后加入这些值。如果您没有`UNPIVOT`功能，则可以使用`UNION ALL`：

```
select t1.reason_description, t2.col
from table1 t1
left join
(
  select reason1_id value, 't2_reason1_id' col
  from table2
  union all
  select reason2_id value, 't2_reason2_id' col
  from table2
  union all
  select reason3_id value, 't2_reason3_id' col
  from table2
) t2
  on t1.reason_id = t2.value 
```

如果你有`UNPIVOT`，那么你可以使用这样的东西：

```
select t1.reason_description
from table1 t1
(
  select value, col
  from table2
  unpivot
  (
    value for col in (reason1_id, reason2_id, reason3_id)
  ) un
) t2
  on t1.reason_id = t2.value 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T21:05:58.617

我们在我的办公室做了很多这样的过程。如果您具有基于安全性和服务器级别的能力，请使用功能。处理器迭代的成本可能更高，但如果您没有庞大的表（我们使用多达数百万条记录进行此操作），则内联标量函数可以生成干净的代码

```
CREATE FUNCTION dbo.fnc_GetReasonDesc (@ReasonId as int) RETURNS varchar(50) AS
  BEGIN
    DECLARE @rDesc as varchar(50)
    SElECT @rDesc = Reason_Description From Table2 WHERE Reason_id = @ReasonId
    RETuRN @rDesc
  END

Select dbo.fnc_GetReasondesc(Reason1_Id), dbo.fnc_GetReasonDesc(Reason2_Id), ... 
```

最大的优势是，无论您必须使用多少个 Id 字段或它们可能位于多少个不同的表中，您始终可以使用相同的函数将 id 转换为 desc。您还可以创建一个枚举表并包含一个“描述类型”，这样如果您有说明原因描述以及问题描述或活动描述等，您可以在“描述”表中添加一个附加字段，例如 descriptionType ，然后将该值包含在您的函数参数中。现在，同一个表和函数可以处理您可能需要的任意数量的不同枚举数。

希望这可以帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-29T21:06:49.657

~~我相信这个版本对于大表应该更有效，因为它只需要通过 Table1 而不是 3：~~

如果它具有学术兴趣，请在此处留下答案，但它的性能比多重连接选项差，所以请不要使用这个：

```
if OBJECT_ID('Table2') is not null drop table Table2
if OBJECT_ID('Table1') is not null drop table Table1

create table Table1
(
  Reason_Id bigint not null identity(1,1) primary key clustered
  , Reason_Description nvarchar(256)
)
create table Table2
(
    Id bigint not null identity(1,1) primary key clustered
  , Reason1_Id bigint foreign key references Table1(Reason_Id)
  , Reason2_Id bigint foreign key references Table1(Reason_Id)
  , Reason3_Id bigint foreign key references Table1(Reason_Id)
)
insert Table1 select 'Desc 1'
insert Table1 select 'Desc 2'
insert Table1 select 'Desc 3'
insert Table1 select 'Desc 4'

insert Table2 select 1, 2, 3
insert Table2 select 4, 4, 4

select a.id 
, max(case when a.Reason1_Id = b.Reason_Id then b.Reason_Description end)
, max(case when a.Reason2_Id = b.Reason_Id then b.Reason_Description end)
, max(case when a.Reason3_Id = b.Reason_Id then b.Reason_Description end)
from Table2 a
left outer join Table1 b --could do an inner join but left outer is safer
on b.Reason_Id in (a.Reason1_Id, a.Reason2_Id, a.Reason3_Id)
group by a.Id 
```

这是一个 SQL Fiddle 链接，将上述内容与多表连接选项进行比较：[http ://sqlfiddle.com/#!3/1f5e6/1](http://sqlfiddle.com/#!3/1f5e6/1)

# mysql - 在连接上使用计数 - MYSQL

> ID：13634416
> 
> 赞同：0
> 
> 时间：2012-11-29T20:45:32.433
> 
> 标签：mysql, join, count

我有两张桌子，一张有一组团队和有关他们的信息。另一张表有关于他们玩过的游戏的信息。我想计算一个特定球队打了多少场比赛。

我在一张名为 team 的表上有 team_number、team_name。我在名为played 的另一张表上有played_team，它是team_number 的外键。

我如何编写一个连接来计算 play_team 的出现次数并使用 team_number 和 team_name 加入它？

我正在使用 MYSQL 5.1，我希望这是有道理的。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:19:10.500

怎么样：

```
select teams.`team_name`, count(matches.`played_team`) 
from teams 
join matches on teams.`team_number` = matches.`played_team` 
group by teams.`team_name` 
```

以下是我使用的表格：

```
CREATE TABLE `teams` (
  `team_number` int(11) NOT NULL AUTO_INCREMENT,
  `team_name` varchar(30) DEFAULT NULL,
  PRIMARY KEY (`team_number`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

INSERT INTO `teams` (`team_number`, `team_name`)
VALUES
    (1,'a'),
    (2,'b'),
    (3,'c'),
    (4,'d');

CREATE TABLE `matches` (
  `played_team` int(11) NOT NULL,
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `match_title` varchar(30) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `played_team` (`played_team`),
  CONSTRAINT `matches_ibfk_1` FOREIGN KEY (`played_team`) REFERENCES `teams` (`team_number`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

INSERT INTO `matches` (`played_team`, `id`, `match_title`)
VALUES
    (1,1,'match_a'),
    (1,2,'match_b'),
    (3,3,'match_c'),
    (4,4,'match_d'); 
```

以下是查询的结果：

```
team_name    count(matches.`played_team`)  
a            2  
c            1  
d            1 
```

# php - 只是上一个/下一个 10 个结果 Php 分页

> ID：13634421
> 
> 赞同：0
> 
> 时间：2012-11-29T20:45:56.257
> 
> 标签：php, pagination

我写了一个分页功能，但一直在努力添加“上一个”和“下一个”按钮。任何帮助或指导将不胜感激，我在网上看过，到目前为止还没有提出一个优雅的解决方案。

```
$result = is database query results.

$per_page = 5;
if($result->num_rows != 0)
{
  $total_results = $result->num_rows;
  $total_pages = ceil($total_results / $per_page);
  if(isset($_GET['page']) && is_numeric($_GET['page']))
  {

    $show_page = $_GET['page'];

    if ($show_page > 0 && $show_page <= $total_pages)
    {
      $start = ($show_page -1) * $per_page;
      $end = $start + $per_page; 
    }
else
{
  $start = 0;
  $end = $per_page; 
}
else
{
 $start = 0;
 $end = $per_page;
}

$pag = '';

for ($i = $start; $i < $end; $i++)
{
// Make sure PHP doesnt show results that do not exist
if ($i == $total_results) { break; }
// Find Specific Row
$result->data_seek($i);
$row = $result->fetch_row();

// label Rows 
$id = $row[0];

    //USE AND DISPLAY RESULTS

    //Pagination
    for ($i = 1; $i <= $total_pages; $i++)
{       
   if($total_pages != 1)
   {
      if(isset($_GET['page']) && $_GET['page'] == $i)
      {
        $pag .= $i ." ";
      }
      else
      {
        $pag .= "<a href='index.php?page=$i'>$i</a>";
      }
   }
    }
}
else
{
 $pag .= 'no results';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T20:55:36.233

您已经知道您所在的页面：

```
$_GET['page'] 
```

总页数：

```
$total_pages 
```

所以你可以用它来获得下一个和上一个。

```
$page = 1;
if(isset($_GET['page']))
    $page = $_GET['page'];

$prev = $page - 1;
if($prev >= 1)
    $pag = "<a href='index.php?page=$prev'>Prev</a>";

for ($i = 1; $i <= $total_pages; $i++)
{       
   if($total_pages != 1)
   {
      if($page == $i)
      {
        $pag .= $i ." ";
      }
      else
      {
        $pag .= "<a href='index.php?page=$i'>$i</a>";
      }
   }
    }
}

$next = $page + 1;
if($next <= $total_pages)
    $pag .= "<a href='index.php?page=$next'>Next</a>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:50:55.037

有点像这样？

```
<a href="index.php?page=<?php echo ($_GET['page'] + 1); ?>">Next</a> 
```

# ios - 在使用包含新文件夹的路径调用 writeToFile 之前，我们是否需要在 Documents 中创建子文件夹？

> ID：13634424
> 
> 赞同：17
> 
> 时间：2012-11-29T20:46:01.940
> 
> 标签：ios, ios6, nsfilemanager

我正在尝试写入以下路径：

```
 NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
        NSString *storePath = [docDir stringByAppendingPathComponent:@"/newfolder/test.jpg"];

        NSData *data = [NSData dataWithData:UIImagePNGRepresentation(image)];
        BOOL saved = [data writeToFile:storePath atomically:NO];
        NSLog(@"%c", saved); 
```

现在，什么都没有打印出来，我在模拟器中看不到文件。是不是因为尚未创建 Documents 主文件夹中的“newfolder”文件夹。如果是这样，如果它还没有，有没有办法创建它？

谢谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-29T20:47:49.000

是的，您必须确保先创建文件夹。使用`NSFileManager createDirectoryAtPath:withIntermediateDirectories:attributes:error:`传递到您要创建的文件夹的路径（而不是您尝试写入的文件）。

```
NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *storePath = [docDir stringByAppendingPathComponent:@"newfolder/test.jpg"];

[[NSFileManager defaultManager] createDirectoryAtPath:[storePath stringByDeletingLastPathComponent] withIntermediateDirectories:YES attributes:nil error:nil];

NSData *data = [NSData dataWithData:UIImagePNGRepresentation(image)]; 
```

您应该检查这些方法的返回值并处理任何失败。

# list - 我怎样才能通过列表 从 REST 组件到 Mule 中的自定义云连接器？

> ID：13634425
> 
> 赞同：3
> 
> 时间：2012-11-29T20:46:07.253
> 
> 标签：list, rest, esb, mule

我有一个自定义云连接器，它带有一个带有列表的函数。将值硬编码到连接器的属性中可以正常工作，但是如何通过 REST 组件、Choice 流控制器和我的云连接器传递带有 ?listitem=item1&listitem=item2&other=other 的 URL。

当我告诉将 #[header:inbound:listitem] 放在连接器“来自消息”字段中时，我得到：

sun.reflect.generics.reflectiveObjects.ParameterizedTypeImpl 不能转换为 java.lang.Class (java.lang.ClassCastException)

我认为它正在寻找一个字符串并且只接受第一个列表项，即使我的 REST 组件将它识别为一个 LIST 并记录两者。任何帮助表示赞赏，谢谢。

编辑：对不起，我匆忙输入了它。云连接器处理器方法是：

```
@Processor
    public void renewSubscriptionMultiple(List<String> uuids, String hours)throws Exception{
        for(String uuid:uuids){
            uuid = URLDecoder.decode(uuid,ENCODING);
        }
        hours = URLDecoder.decode(hours, ENCODING);     
        logger.info("Renewing subscriptions: "+uuids+" for "+hours+" hours");
                renewSubscriptions(uuids,hours);
    } 
```

它只是解码它们并将它们传递给另一个方法。我不认为这是问题所在，因为我能够很好地传递硬编码列表。

我的查询是 myIP:8081/test/subscriptions-renew?uuids=uuids1&uuids=uuids2&hours=24

而骡子版本是3.3.0

# jquery - 删除符号代码

> ID：13634426
> 
> 赞同：1
> 
> 时间：2012-11-29T20:46:16.023
> 
> 标签：jquery, text, replace, title, symbols

我们有一个标题

```
<title>Text &#8211; text</title> 
```

我想用jquery改变它

```
$('title').html($('title').html().replace('Text-text', '')); 
```

但它不起作用...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T20:54:21.933

用于[`.text()`](http://api.jquery.com/text)替换内容：

```
$('title').text('Text-text'); 
```

`.html()`如果里面没有实际的 HTML，那就太过分了。

要仅替换标题中的某些字符，请使用回调函数：

```
$('title').text(function(i,str) {
    return str.replace('replace this','with this');
}); 
```

要替换特殊字符，您需要使用它们的 Unicode 编码，我在[这里](http://www.fileformat.info/info/unicode/char/2013/index.htm)通过谷歌搜索“unicode 8211”找到了它：

```
$('title').text(function(i,str) {
    return str.replace('\u2013','-');
}); 
```

# matlab - 根据matlab中的输入变量名创建唯一的输出变量名

> ID：13634427
> 
> 赞同：4
> 
> 时间：2012-11-29T20:46:18.420
> 
> 标签：matlab, input, unique, octave, output

我正在 matlab 中制作一个程序，用于对我收集的一些生物医学数据进行数据分析。计算非常简单但重复，因此我对编写一个小程序很感兴趣。每位患者我有一个矩阵 (200 x 99)，存储在一个带有患者姓名的变量中。我创建了一个函数，它产生一个输出变量（finalresult），其中包含我需要从这个病人矩阵中得到的一切。

我真的希望这个输出变量带有我的输入变量的名称。这样，我可以简单地分别为每个患者调用该函数，然后在工作区中收集变量列表，而不必在每次函数调用后手动更改输出变量的名称。

我希望你明白我想要达到的目标。这是我的代码的简化示例：

```
function [ finalresult] = total_analysis( patientname)
    first = patientname(:,1)*2;
    second = first;
    finalresult = vertcat(first,second);
end 
```

=> 输出变量名总是**finalresult**

但我希望它是一个**“唯一的其他”输出变量**名，最好是 finalresult_patientname 或 patientname

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:08:57.217

为什么不返回带有结果和患者姓名的结构？

```
function [ finalresult] = total_analysis( patientname)
    first = flexion(:,1)*2;
    second = first;
    finalresult.data = vertcat(first,second);
    finalresult.name = patientname;
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T21:09:02.100

我建议在 matlab 中使用结构数组，将所有数据存储在一个变量中：

```
 s(1).name    = 'Jane';                      % Store patient's name here as a string
    s(1).data    = janesData;                   % Store patient's data
    s(1).result  = total_analysis( s(1).data )  % Store the analyzed data

    s(2).name    = 'John';                      % Store patient's name here as a string
    s(2).data    = johnsData;                   % Store patient's data
    s(2).result  = total_analysis( s(2).data )  % Store the analyze 
```

对于所有患者的数据，依此类推。然后您可以简单地使用 s(i) 来获取与第 i_th 个患者相关的所有变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T07:01:38.183

这显然是糟糕的设计，但您可以使用[evalin](http://www.mathworks.com/help/matlab/ref/evalin.html)函数。类似于以下内容：

```
cmd = sprintf('result_%s = %f', suffix, result);
evalin('caller', cmd); 
```

然后你调用你的函数`myfunc`而不分配它的输出。

同样，这不是一个好主意，因为大多数用户不会期望这种行为。函数应该返回结果，同时让调用者将结果分配给他选择的任何变量。

适合小黑客而不是持久的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T21:46:56.417

除了您的评论，这里是使用 eval 动态命名工作区变量的示例：

```
>> string = 'patient1';
>> eval(strcat(string, '_finalresult = 200'))

patient1_finalresult =

   200 
```

# bash - 在 Linux shell 脚本中，我如何打印数组的最大值和最小值？

> ID：13634429
> 
> 赞同：4
> 
> 时间：2012-11-29T20:46:22.773
> 
> 标签：bash, sh

我不太了解数组，但我需要知道如何查找和打印数组的最大值和最小值。该数组由读取命令预定义，用户将被提示输入 n 个整数。

我如何将读取输入分配给数组并查找并显示数组的最大值和最小值？

有没有办法测试数组元素以查看它们是否都是整数？

```
#!/bin/bash

read -a integers

biggest=${integers[0]}
smallest=${integers[0]}

for i in ${integers[@]}
do
     if [[ $i -gt $biggest ]]
     then
        biggest="$i"
     fi

     if [[ $i -lt $smallest ]]
     then
        smallest="$i"
     fi
done

echo "The largest number is $biggest"
echo "The smallest number is $smallest" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T20:49:43.230

一般的想法是遍历数组一次并跟踪到目前为止在每个步骤中看到`max`的内容。`min`

一些注释和解释（以 为前缀`#`）

```
# This is how to declare / initialize an array:
arrayName=(1 2 3 4 5 6 7)

# Use choose first element of array as initial values for min/max;
# (Defensive programming) - this is a language-agnostic 'gotcha' when
# finding min/max ;)
max=${arrayName[0]}
min=${arrayName[0]}

# Loop through all elements in the array
for i in "${arrayName[@]}"
do
    # Update max if applicable
    if [[ "$i" -gt "$max" ]]; then
        max="$i"
    fi

    # Update min if applicable
    if [[ "$i" -lt "$min" ]]; then
        min="$i"
    fi
done

# Output results:
echo "Max is: $max"
echo "Min is: $min" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-29T20:53:59.510

如果您需要**比较**（有符号或无符号）**INTegers** ，请尝试此操作：

```
#!/bin/bash

arr=( -10 1 2 3 4 5 )

min=0 max=0

for i in ${arr[@]}; do
    (( $i > max || max == 0)) && max=$i
    (( $i < min || min == 0)) && min=$i
done

echo "min=$min
max=$max" 
```

**输出**

```
min=-10
max=5 
```

**解释**

*   `arr=( )`是数组的声明
*   `((...))`是一个算术命令，如果表达式非零，则返回退出状态 0，如果表达式为零，则返回 1。如果需要副作用（分配），也用作“让”的同义词。见[http://mywiki.wooledge.org/ArithmeticExpression](http://mywiki.wooledge.org/ArithmeticExpression)
*   `[[`是一个与命令类似（但比`[`命令更强大）的 bash 关键字。请参阅[http://mywiki.wooledge.org/BashFAQ/031](http://mywiki.wooledge.org/BashFAQ/031)和[http://mywiki.wooledge.org/BashGuide/TestsAndConditionals](http://mywiki.wooledge.org/BashGuide/TestsAndConditionals)除非您正在编写 POSIX sh，否则我们建议`[[`
*   `foo || bar`当 foo 失败时运行 bar：`[[ -d $foo ]] || { echo 'ohNoes!' >&2; exit 1; }`
*   `cmd1 && cmd2`: cmd1 被执行，然后如果其退出状态为 0 (true)，则 cmd2 被执行。请参阅[http://mywiki.wooledge.org/BashGuide/TestsAndConditionals](http://mywiki.wooledge.org/BashGuide/TestsAndConditionals)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-29T21:14:54.103

使用排序的一种有趣方式：

如果您有一个整数数组，您可以使用`sort`它对其进行排序，然后选择第一个和最后一个元素以获得最小和最大元素，如下所示：

```
{ read min; max=$(tail -n1); } < <(printf "%s\n" "${array[@]}" | sort -n) 
```

因此，如果您想提示用户输入 10 个整数，请检查用户是否输入了整数然后对它们进行排序，您可以这样做：

```
#!/bin/bash

n=10
array=()

while ((n));do
   read -p "[$n] Give me an integer: " i
   [[ $i =~ ^[+-]?[[:digit:]]+$ ]] || continue
   array+=($i)
   ((--n))
done

# Sort the array:
{ read min; max=$(tail -n1); } < <(printf "%s\n" "${array[@]}" | sort -n)
# print min and max elements:
echo "min=$min"
echo "max=$max" 
```

# javascript - CSS 浮动 Chrome 与 Firefox

> ID：13634430
> 
> 赞同：2
> 
> 时间：2012-11-29T20:46:25.037
> 
> 标签：javascript, css, firefox, google-chrome

我最近购买了一个 wordpress 主题，但遇到了一个似乎无法解决的 CSS 问题。不幸的是，主题制作者不再提供支持，所以我希望你们中的一个可以在这里帮助我：D

如果您查看此网站：

[demo.shakenandstirredweb.com/shaken-grid/](http://demo.shakenandstirredweb.com/shaken-grid/)

在 Google Chrome 中，您会看到标题向左浮动。好的！

但是，如果您在 Firefox 中查看该站点，您会发现标题不会向左浮动，而是停留在中间位置。我一直在搞乱 id 和 classes 标头、包装和站点信息，但我似乎无法让 Firefox 标头像 Chrome 一样向左浮动。

铬合金

![http://d.pr/i/YbPH](../Images/d31c711350f7fcb843937c3d48125326.png)

标题根据正文中的内容向左浮动。

火狐

![http://d.pr/i/hrTI](../Images/8ffa20e4ae4c99542345154bd437c095.png)

标题仍然在中间。

有什么建议么？

感谢您抽时间阅读！

编辑：好的，我发现这是`div`class `wrap`。在 Firefox 中，最大宽度“卡在”上`1300px`，而 Chrome 会自动扩展宽度。奇怪的是，`.wrap`样式表中的宽度设置为`1010px`，边距自动。有人知道我应该怎么做吗？

编辑：好的，我认为这与javascript有关。我猜这个功能不适用于 Firefox：

```
function centerLayout(){
    if( jQuery(window).width() > mobile_width ){
        jQuery('#header .wrap, #footer .wrap, #filtering-nav, .navigation').css('width', jQuery('.isotope').width() - 10);
    }
} 
```

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:53:13.820

这应该解决它：

将此添加到您的样式表中：

```
#grid {
  margin: auto;
  width: 1050px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:54:11.870

试着做

例如，在此我放置 3 列，但要确保它适用于所有浏览器

```
-moz-column-count:3; /* Firefox */
-webkit-column-count:3; /* Safari and Chrome */
column-count:3; /*normal att*/ 
```

用 -moz- 做一次，用 -webkit- 做一次，没有

某些属性并非所有浏览器都能理解，因此您需要添加浏览器使用的套件名称，例如示例中的多列并不总是受支持，因此我需要添加套件名称

我想使用的属性是“column-count”，我照常编写并确保它在所有其他浏览器中都能完美运行，我在属性名称之前添加了“-kit name-”

希望我这次解释清楚=]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T18:26:27.127

尝试做类似的事情

CSS

```
#header {
  overflow: hidden;
}

#header > .wrap {
  float: left;
  width: 100%;
} 
```

JS

```
function centerLayout(){
  if(jQuery(window).width() > mobile_width ){
    newWidth = jQuery('.isotope').width() - 10;
    jQuery('#header .wrap, #footer .wrap, #filtering-nav, .navigation').css('width',newWidth);
  }
}
jQuery(document).ready(centerLayout); 
```

# translation - Silverstripe 3：如何翻译数据对象？

> ID：13634431
> 
> 赞同：3
> 
> 时间：2012-11-29T20:46:27.350
> 
> 标签：translation, multilingual, silverstripe

是否可以在 Silverstripe 3 中翻译数据对象？

我使用这个模块： [http ://www.silverstripe.org/translatable-module/](http://www.silverstripe.org/translatable-module/)

在我的配置中，如果定义了以下内容：

```
Object::add_extension('SiteTree', 'Translatable');
Object::add_extension('News', 'Translatable'); 
```

第一行是翻译页面的正常扩展，第二行应该使数据对象（在本例中为新闻）可翻译。

我在 ModelAdmin 中将新闻作为数据对象进行管理，我可以在其中添加新闻数据对象。甚至还有一个“翻译”选项卡。当我点击它时，我会看到一个下拉菜单，我可以在其中选择我定义的语言和一个“创建”按钮。唯一的问题是按下“创建”按钮根本没有效果。

任何人的想法？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T23:59:49.023

简短（且无益）的答案是 Translatable 扩展还不能做到这一点。它目前与 SiteTree 紧密耦合。

如果您使用的是 SS 2.4.x，请查看为某些选项[设置多语言站点](http://www.balbuss.com/setting-up-a-multilingual-site/)。

对于非 SiteTree 翻译，请查看[TranslatableDataObject 扩展](https://github.com/unclecheese/TranslatableDataObject)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-09T10:34:48.927

现在可以使用 SS3 转换 DataObjects。检查这个项目[https://github.com/bummzack/translatable-dataobject](https://github.com/bummzack/translatable-dataobject)

# web-applications - 在网站上部署和实施新功能

> ID：13634432
> 
> 赞同：0
> 
> 时间：2012-11-29T20:46:28.273
> 
> 标签：web-applications, deployment

我最近推出了我在过去六个月中一直在努力的第一个严肃网站。我有一些关于网站维护和实施新功能的一般性问题。

例如，假设我想在索引页面上添加一个表单，用户可以在其中向我提交反馈。在开发过程中我会在哪里写这个表格？我的意思是，我无法在当前在线且可供访问者访问的页面上进行开发。我是否应该复制我的整个网站并将其放在我开发的其他地方，然后用我的新网站替换在线版本？是否有为此制定的任何程序，您可以在其中保留站点的版本并进行部署？大型网站如何解决这个问题？

我会提到我使用 PHP，尽管这个问题与任何特定语言无关。如果您知道，请分享使该主题成为焦点的文章和其他信息来源。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:51:44.833

给你一个简短的答案：源代码控制。

大多数软件（不仅仅是网络）专业人员使用某种源代码控制系统（如 Git、SVN 等）来存储他们工作软件的“该”副本，在某种形式的开发环境中进行开发（在本地 Apache 等） - 然后使用从源存储库中签出到他们的“生产”服务器，或者只是将您的工作站点的干净副本通过 FTP 传输/传输到您的 Web 服务器。

（版本控制软件还保留历史记录、版本以及在需要时回滚版本的能力。如果您想要一个免费的游乐场，请在[http://github.com](http://github.com)注册一个帐户）

# sorting - 将 solr 用作有序聚合系统

> ID：13634433
> 
> 赞同：0
> 
> 时间：2012-11-29T20:46:30.410
> 
> 标签：sorting, solr, listings

我需要开发一个显示不同类型“内容块”的系统。首先，我有三个系统提供数据块（其中一个是博客，另一个是事件列表，第三个是自定义的）。这可能会在项目的后期得到扩展。

这个想法是有一个很长的列表，首先在发布日期排序（按时间顺序）。但是，某些类型可能具有更高的优先级，例如，事件在列表中的显示相对高于带有 factor 的博客文章`x`。

然后我需要一些额外的排序，比如博客文章可能是“特色”，所以它们也被赋予了更高的优先级，比如说一个因素`y`。最后一件事是内容块可能被标记为“粘性”，因此它们始终保持在列表的顶部。

由于 solr 和所有查询选项背后的先进技术，我正在考虑使用 solr 作为这个块列表的引擎。这样的事情可能吗，还是另一种技术更适合这个？

我偏爱 solr 也是因为将新内容注入索引相对容易。但是我必须如何定义查询以返回按日期排序的完整（分页）索引，这也是我必须弄清楚的事情。

最后一点：应用程序将是一个 php（Zend Framework 2）项目，因此它必须直接使用 php 或由为 php 编写的客户端（例如，用于 solr 的 SolrClient）工作。将其表述为一个问题：对于上述要求，什么可能是一项好的技术，而 solr 是一个好的技术吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:05:50.650

有一个`string`名为的类型字段`doctype`，它可以接受值`blog`，`event`以及将来的任何内容。

* * *

```
&bq=cat:electronics^5.0
&bq=sponsored:true
&bq=doctype:blog^5.0 
```

这意味着字段`doctype`和价值文档的分数`blog`得到了提升。这`5.0`是增加重量，当一种情况比另一种情况更重要时很有用。改编自此[http://wiki.apache.org/solr/ExtendedDisMax#Examples](http://wiki.apache.org/solr/ExtendedDisMax#Examples)

* * *

并从[http://wiki.apache.org/solr/SolrRelevancyFAQ](http://wiki.apache.org/solr/SolrRelevancyFAQ)看到 11.1 将内容提升到顶部；和 12 用于根据某物的值进行提升。

* * *

如果要进行多个查询以呈现单个页面，请使用异步 HTTP 调用。如果您一个接一个地进行 3 个 333 毫秒的查询，您的页面将需要一秒钟的时间来加载。但是使用 3 个异步查询，它更像是 340 毫秒。但在 PHP 中可能很难！

# java - 上传到 Google 云端硬盘文件未找到异常

> ID：13634434
> 
> 赞同：2
> 
> 时间：2012-11-29T20:46:42.933
> 
> 标签：java, android, file

我想以编程方式访问将包含在我的项目文件夹中的特定 Excel 电子表格并将其上传到 Google Drive。我将电子表格包含在我的 src 文件夹中，并使用以下代码：

```
private void saveFileToDrive() {
        Thread t = new Thread(new Runnable() {
            @Override
            public void run() {
                try {

                    URL fileURL = getClass().getClassLoader().getResource("Untitled spreadsheet.xlsx");
                    String filePath2 = fileURL.getPath();

                    java.io.File fileContent = new java.io.File(filePath2);
                    FileContent mediaContent = new FileContent("application/vnd.ms-excel", fileContent);

                    File body = new File();
                    body.setTitle(fileContent.getName());
                    body.setMimeType("application/vnd.ms-excel");

                    File file = service.files().insert(body, mediaContent).setConvert(true).execute();

                    if (file != null) {
                        showToast("File uploaded: " + file.getTitle());
                    }
                    else
                             ;
                } catch (UserRecoverableAuthIOException e) {

                    startActivityForResult(e.getIntent(), REQUEST_AUTHORIZATION);
                } catch (IOException e) {

                    e.printStackTrace();
                }
            }
        });
        t.start();
    } 
```

但是，我不断收到以下 FileNotFoundException：

```
11-29 14:43:45.189: W/System.err(21133): java.io.FileNotFoundException: /file:/data/app/com.example.drivequickstart-2.apk!/Untitled spreadsheet.xlsx: open failed: ENOENT (No such file or directory) 
```

有谁知道是什么原因造成的？

编辑：我尝试按照以下建议修改我的代码：

```
private void saveFileToDrive() {
            Thread t = new Thread(new Runnable() {
                @Override
                public void run() {
                    try {

                      String mime = "application/vnd.ms-excel";
                     InputStream in = getApplicationContext().getAssets().open("Untitled spreadsheet.xlsx");
                     InputStreamContent content = new InputStreamContent(mime, in);;

                        File body = new File();
                        body.setTitle("Untitled spreadsheet");
                        body.setMimeType("application/vnd.ms-excel");

                        File file = service.files().insert(body, content).setConvert(true).execute();

                        if (file != null) {
                            showToast("File uploaded: " + file.getTitle());
                        }
                        else
                                 ;
                    } catch (UserRecoverableAuthIOException e) {

                        startActivityForResult(e.getIntent(), REQUEST_AUTHORIZATION);
                    } catch (IOException e) {

                        e.printStackTrace();
                    }
                }
            });
            t.start();
        } 
```

但是，这给了我以下错误：

```
11-29 20:31:08.118: E/AndroidRuntime(9833): java.lang.IllegalArgumentException
11-29 20:31:08.118: E/AndroidRuntime(9833):     at com.google.common.base.Preconditions.checkArgument(Preconditions.java:76)
11-29 20:31:08.118: E/AndroidRuntime(9833):     at com.google.api.client.googleapis.media.MediaHttpUploader.getMediaContentLength(MediaHttpUploader.java:328)
11-29 20:31:08.118: E/AndroidRuntime(9833):     at com.google.api.client.googleapis.media.MediaHttpUploader.executeUploadInitiation(MediaHttpUploader.java:347)
11-29 20:31:08.118: E/AndroidRuntime(9833):     at com.google.api.client.googleapis.media.MediaHttpUploader.upload(MediaHttpUploader.java:266)
11-29 20:31:08.118: E/AndroidRuntime(9833):     at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:408)
11-29 20:31:08.118: E/AndroidRuntime(9833):     at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:328)
11-29 20:31:08.118: E/AndroidRuntime(9833):     at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:449)
11-29 20:31:08.118: E/AndroidRuntime(9833):     at com.example.drivequickstart.MainActivity$3.run(MainActivity.java:303)
11-29 20:31:08.118: E/AndroidRuntime(9833):     at java.lang.Thread.run(Thread.java:864) 
```

并指向行： `File file = service.files().insert(body, content).setConvert(true).execute();`仔细检查后，我发现 InputStreamContent 的长度为-1，因此问题可能出在此处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:56:41.223

您使用 Java 习惯用法`ClassLoader.getResource()`从`CLASSPATH`. 但是，这不是我们在 Android 上的做法。

您将把文件放在`assets/`目录或 中`res/raw/`，然后使用[`AssetManager`](http://developer.android.com/reference/android/content/res/AssetManager.html)或 之类的标识符检索它`R.raw.untitled_spreadsheet.xlsx`。

见[官方指南](http://developer.android.com/guide/topics/resources/accessing-resources.html)：

> 虽然不常见，但您可能需要访问原始文件和目录。如果这样做，那么将文件保存在 res/ 中对您不起作用，因为从 res/ 读取资源的唯一方法是使用资源 ID。相反，您可以将资源保存在 assets/ 目录中。
> 
> 保存在 assets/ 目录中的文件没有资源 ID，因此您无法通过 R 类或 XML 资源引用它们。相反，您可以像普通文件系统一样查询 assets/ 目录中的文件，并使用 AssetManager 读取原始数据。
> 
> 但是，如果您只需要读取原始数据（例如视频或音频文件）的能力，则将文件保存在 res/raw/ 目录中并使用 openRawResource() 读取字节流。

用代码说话，如果你把文件放在`assets/sheet.xlsx`：

```
String mime = "application/vnd.ms-excel";
InputStream in = ctx.getAssets().open("sheet.xlsx");
InputStreamContent content = new InputStreamContent(mime, in); 
```

哪里`ctx`是[`Context`](http://developer.android.com/reference/android/content/Context.html)。由于`Activity`是 a `Context`，如果您碰巧`ctx`在.`getAssets()``Activity`

请注意，我没有使用`FileContent`: 而是选择`InputStreamContent`了，因为您实际上并没有`java.io.File`对象，而是[输入流](http://javadoc.google-api-java-client.googlecode.com/hg-history/2fe3287eff6e00294deaa1deffd32a7fa8884c37/apis/drive/v1/com/google/api/services/drive/Drive.Files.html)。

基本上，您是在询问 Drive 客户端：*“从该本地流中读取字节，上传它们并以 $NAME 名称访问它们*。 ” 该名称`$NAME`通过`com.google.api.services.drive.model.File`对象的`title`字段提供给服务，可以是您喜欢的任何内容 - 我认为它也可以包括目录分隔符。

这是指向[Google Drive V2 的 Javadoc的链接](https://google-api-client-libraries.appspot.com/documentation/drive/v2/java/latest/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T21:04:24.440

要解决您的“是什么原因造成的？”的问题，请参阅[此处](http://forum.springsource.org/archive/index.php/t-13711.html)的讨论（围绕评论 #13）。

> 这是一个简单的原因，你没有给它一个有效的文件路径。您正在从类加载器获取资源，并且该资源来自 jar（实际上从未解压缩到文件系统中）。
> 
> 因此，当您使用 url.getPath() 向资源的 URL 询问路径时，您会返回一个（**在您的情况下**）文件：/data/app/com.example.drivequickstart-2.apk!/Untitled spreadsheet.xlsx
> 
> 这不是合法的“文件：”网址字符串！

他还提出了一种非常恰当的方法来解决这个问题：

> 您应该做的只是将 URL.toString() 返回的字符串提供给构造函数。你应该得到的是某种注册的 url 类型，它仍然指向 jar 文件，但你的 VM 中的 url 解析器知道如何处理。

# r - 为什么转换会默默失败？

> ID：13634437
> 
> 赞同：1
> 
> 时间：2012-11-29T20:46:56.390
> 
> 标签：r, transform

假设我有一个带有一列日期的框架：

```
test.frame$alt_dates <- c('2001-01-04', '2001-05-11', '2001-05-14', '2001-07-24', '2003-12-24', '2004-07-21', '2004-10-15', '2004-12-15', '2005-03-17', '2005-07-18') 
```

他们从角色开始。好的：

```
class(test.frame$alt_dates)
[1] "character" 
```

如果我尝试使用转换将这些日期变成日期：

```
transform(test.frame, alt_dates <- as.Date(alt_dates) 
```

R 只是将我的框架打印到控制台。如果我直接转换列，它可以正常工作：

```
test.frame$alt_dates <- as.Date(test.frame$alt_dates)
class(test.frame$alt_dates)
[1] "Date" 
```

我在转换方面做错了什么？

更新：正如一些人所注意到的，我没有将结果分配给任何东西。这样就可以解释打印到屏幕并且不存储任何更改。但即使我确实捕获了结果，它也不起作用：

```
test.frame <- transform(test.frame, more_dates <- as.Date(more_dates))
class(test.frame$more_dates)
[1] "character" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T20:50:43.840

正如@Andrie 和@StephanKolassa 所说，您需要分配结果。但是，您在使用`transform`它时犯了另一个错误，该错误*恰好*在这种情况下起作用，但在几乎任何其他情况下都会咬到您。`<-`并且`=`在这种情况下不可互换。您应该使用`=`with `transform`（在这种情况下，我认为它有效，因为测试数据框只有一列！）

```
test.frame <- data.frame(alt_dates=c('2001-01-04', '2001-05-11', '2001-05-14', 
  '2001-07-24', '2003-12-24', '2004-07-21', '2004-10-15', '2004-12-15', 
  '2005-03-17', '2005-07-18'))
test.frame <- transform(test.frame,alt_dates=as.Date(alt_dates)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:53:40.573

`transform()`不会失败。R 使用[按值调用](http://en.wikipedia.org/wiki/Call_by_value#Call_by_value)，即函数的*参数仅按值*`test.frame$alt.dates`传输 -不传输原始对象。因此，函数的参数不能被函数更改。另一种方法，[按引用调用](http://en.wikipedia.org/wiki/Call_by_reference)，将允许函数在外部范围内修改其参数。在其他编程语言（如 C）中，引用调用是通过将“指针”传递给内存地址来完成的。不在 R 中。

只需将结果分配给`transform()`原始对象。

# javascript - 引用我的视图对象的 `this` 实例而不是 Backbone 中的窗口

> ID：13634438
> 
> 赞同：0
> 
> 时间：2012-11-29T20:46:59.033
> 
> 标签：javascript, backbone.js, backbone-views

我在我的视图对象中将我的 self 方法引用为 this.removeThanksContainer 这通常很好，但是当我在我的 $.post() 回调中时，对的引用`this`成为全局窗口对象而不是我的视图...... .

```
 removeThanksContainer : function() {
        var $thanksContainer = $('#js-review-thanks');

        $thanksContainer.is(':visible') && $thanksContainer.remove();
    },

    getProductInfo : function(evt) {
        // local method
        var removeThanksContainer = this.removeThanksContainer;

        $.post(postURL, { product_id : productId }, function(data) {
            if (data) {
                removeThanksContainer();
            }
        }, 'json');
    } 
```

因此，作为一种解决方法，我将对该方法的引用保存到 getProductInfo 中的局部变量，`var removeThanksContainer = this.removeThanksContainer;`以便在 $.post() 中访问它。这是做到这一点的最佳方法还是有首选/更好的方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:50:17.640

您还可以保留对`this`喜欢的参考

```
var that = this; 
```

并调用回调`that.removeThanksContainer();`。`$.post`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:50:44.180

你可以使用这样的东西

```
function myClass()
{
    var self=this;
    ....
    getProductInfo : function(evt) {
        // local method
        var removeThanksContainer = self.removeThanksContainer;
        // or call it directly without any reference you have kept above
        self.removeThanksContainer();
    }
} 
```

# c# - 使用 XML Serializer 对枚举进行序列化——我保留了名称，但丢失了值。有什么办法可以同时保留吗？

> ID：13634448
> 
> 赞同：2
> 
> 时间：2012-11-29T20:47:50.627
> 
> 标签：c#, xml, serialization, enums

我有一个枚举：

```
public enum ComponentType
{
    None = -1,
    Equipment = 0,
    Cable = 2,
    Port = 4,
    Space = 8,
    Site = 9,
    Building = 10,
    Floor = 11,
    DataCenter = 12,
    Area = 13,
    Rack = 14,
    Conduit = 16,
    Person = 17,
    Pit = 18
} 
```

我想在 WCF 服务的另一端使用这个枚举。因此，我需要序列化它！

我看到序列化程序生成以下内容：

```
/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.233")]
[System.SerializableAttribute()]
[System.Xml.Serialization.XmlTypeAttribute(Namespace="http://www.website.com/api")]
public enum ComponentType {

    /// <remarks/>
    None,

    /// <remarks/>
    Equipment,

    /// <remarks/>
    Cable,

    /// <remarks/>
    Port,

    /// <remarks/>
    Space,

    /// <remarks/>
    Site,

    /// <remarks/>
    Building,

    /// <remarks/>
    Floor,

    /// <remarks/>
    DataCenter,

    /// <remarks/>
    Area,

    /// <remarks/>
    Rack,

    /// <remarks/>
    Conduit,

    /// <remarks/>
    Person,

    /// <remarks/>
    Pit,
} 
```

不幸的是，这不好。以下代码在两端的工作方式不同。

```
int componentId = 123;
int flag = ComponentDao.GetFlagForComponentById(componentId);

ComponentType componentType = ((ComponentType)flag);
//componentType == ComponentType.None (client end of service)
//componentType == ComponentType.Equipment (server end of service) 
```

我环顾了一些属性装饰器，认为我可能会发现一些有用的东西：http: [//msdn.microsoft.com/en-us/library/system.xml.serialization.xmlenumattribute.aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlenumattribute.aspx)。此链接显示如何更改序列化名称，但没有说明任何有关该值的内容。

这是否意味着我无法使用此序列化引擎维护我的枚举值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:02:34.810

这不是序列化程序本身的问题，而是代码生成的问题。生成的代码与您的代码不一致。这可能是代码生成器中的错误，也可能是您的代码在生成代码后被修改。

在第二种情况下，您应该能够通过更新服务引用（或以其他方式重新生成代码）来解决问题。

如果您使用的是 Data Contract Serializer，您可能应该阅读以下内容：http: [//msdn.microsoft.com/en-us/library/aa347875.aspx](http://msdn.microsoft.com/en-us/library/aa347875.aspx)。也许用属性装饰你的枚举会让代码生成器正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:47:05.267

我最终只是添加了对包含枚举的 DLL 的直接引用，并完全避免了序列化。抱歉，这不是一个很好的答案，但我无法完成这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T01:13:21.597

我的解决方案：

*   为每个项目添加一个 XmlEnumAttribute

*   使用反射获取属性值并解析为int

    ```
    public enum myEnum
    {
        [System.Xml.Serialization.XmlEnumAttribute("1")]
        titi,

        [System.Xml.Serialization.XmlEnumAttribute("2")]
        toto
    }
    public static class myEnumExtensions
    {
        public static int toInt(this myEnum value)
        {
            MemberInfo memberInfo = typeof(myEnum).
                GetMember(value.ToString()).FirstOrDefault();

            XmlEnumAttribute attribute = (XmlEnumAttribute) memberInfo.
                GetCustomAttributes(typeof(XmlEnumAttribute), false).FirstOrDefault();

            return int.Parse(attribute.Name);
        }
    }

    class test
    {
        static void Main(string[] args)
        {
            int i = myEnum.titi.toInt();
        }
    } 
    ```

希望这可以帮助

# json - 如何使用 Jackson 反序列化

> ID：13634453
> 
> 赞同：0
> 
> 时间：2012-11-29T20:48:06.307
> 
> 标签：json, spring-mvc, jackson

来自 REST 服务的 json 对象

```
{
   "destination_addresses" : [ "Chicago, IL, USA" ],
   "origin_addresses" : [ "Syracuse, NY, USA" ],
   "rows" : [
      {
         "elements" : [
            {
               "distance" : {
                  "text" : "1,090 km",
                  "value" : 1090383
               },
               "duration" : {
                  "text" : "10 hours 21 mins",
                  "value" : 37242
               },
               "status" : "OK"
            }
         ]
      }
   ],
   "status" : "OK"
} 
```

使用[JacksonInFiveMinutes 中的代码](http://wiki.fasterxml.com/JacksonInFiveMinutes#A.22Raw.22_Data_Binding_Example)

ObjectMapper 映射器 = 新 ObjectMapper(); 映射 userData = mapper.readValue(webResource.queryParams(queryParams).get(String.class);, Map.class);

在哪里：

```
webResource.queryParams(queryParams).get(String.class); 
```

从 REST 服务返回 json

从 Json 我想要 2 个地址属性以及距离属性以及 2 个状态。

我的黑客尝试：

```
ObjectMapper mapper = new ObjectMapper();
JsonNode jnode = mapper.readValue(s, JsonNode.class);
jnode.findValue("distance").findValue("value") // 
```

这让我得到了我正在寻找的价值。

不确定这是否是好方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:46:58.163

对我来说看起来不错，除了不将这两个`findValue()`调用链接在一起会更安全，因为如果 JSON 字符串不包含第一个调用，您可以获得 NPE。来自 JsonNode javadoc：

> `public abstract JsonNode findValue(String fieldName)`
> 
> 在此节点或其子节点中查找具有指定名称的 JSON Object 字段并返回其值的方法。如果在此节点或其后代中未找到匹配字段，则**返回 null**。

所以我会检查第一个`findValue()`结果，如果它不为空，然后执行第二个`findValue()`（如果发生这种情况，记录会通知你）。

# android - Google Play 要求在 AndroidManifest.xml 中将 versionCode 设置为 32 位正整数

> ID：13634458
> 
> 赞同：2
> 
> 时间：2012-11-29T20:48:35.590
> 
> 标签：android, apache-flex, intellij-idea

我正在拼命尝试使用 Intellij IDEA 上传一个使用 Adob​​e Flex SDK 4.6 开发和打包的 Android 应用程序。PKCS#12 是使用 openSSL 创建的（我只想提一下，但我认为这不是问题）。

一切都很好，直到我有将应用程序发布到 Google Play 商店的愚蠢愿望。它用这简单的一句话摧毁了我所有的梦想：

```
Google Play requires versionCode to be set to a positive 32-bit integer in AndroidManifest.xml. 
```

好的，你不能直接从 Flex SDK 定义 Android versionCode 这不是什么秘密。您必须使用我所做的 -Tag。实际上，我尝试了几种不同的组合（当然一次只有一种），例如：

```
<versionNumber>0</versionNumber>
<versionNumber>1</versionNumber>
<versionNumber>2</versionNumber>
<versionNumber>0.0.1</versionNumber>
<versionNumber>1.0.0</versionNumber>
<versionNumber>2.0.1</versionNumber> 
```

...以及您能想象到的任何东西...

但无论我做什么，当我上传 APK 时，状态栏将变为 100% 并开始倒数，好像它在嘲笑我，最后出现上述错误消息。

我从 Adob​​e 社区了解到，在 Android 上，AIR 版本 abc 使用以下公式转换为 Android 版本代码：a*1000000 + b*1000 + c。

好吧，使用这个公式，我所有的 -Tag 值都应该变成 32 位整数。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:03:58.313

这似乎是 Flex 中的一个错误，请尝试 999 等数字。请参阅此线程[http://forums.adobe.com/thread/765086](http://forums.adobe.com/thread/765086)

您还可以拆开 Flex 生成的 apk 并查看清单以了解发生了什么，您甚至可以在手动更改值后将其重新组合在一起查看[如何从 APK 文件查看 AndroidManifest.xml ?](https://stackoverflow.com/questions/4191762/how-to-view-androidmanifest-xml-from-apk-file)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T15:35:04.900

Flex SDK 有一个[在这里](http://forums.adobe.com/thread/765086)列出的错误，因此我必须选择一种解决方法，我想在这里与您分享。

我的解决方案是解压 APK 文件，编辑 AndroidManifest.xml，再次打包 APK 文件并签名。我使用 apktool 和 jarsigner（JDK 的一部分）。

```
java -jar apktool.jar d MyApp.apk // unpack
// edit AndroidManifest.xml
java -jar apktool.jar b MyApp_patched.apk // repack
jarsigner -verbose -sigalg MD5withRSA -digestalg SHA1 -storetype pkcs12 -keystore ../AndroidCertificates.p12 MyApp_fixed.apk "1" // sign 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T20:52:35.847

版本代码是一个增量编号，用于跟踪哪个版本是最新的。

您所说的是versionName，versionName可以是0.0.0.0-SNAPSHOT或其他

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.my.app"
    android:versionCode="23"
    android:versionName="1.2.1" > 
```

versionCode 是一个整数

versionName 是一个字符串

[http://developer.android.com/guide/topics/manifest/manifest-element.html#vcode](http://developer.android.com/guide/topics/manifest/manifest-element.html#vcode)

# inno-setup - Inno Installer - 为什么它会修改 exe 属性以要求管理员权限和 XP 兼容模式

> ID：13634459
> 
> 赞同：1
> 
> 时间：2012-11-29T20:48:37.500
> 
> 标签：inno-setup

使用 Inno 构建的安装工具包会安装两个 EXE 文件。安装后，一个文件只需要普通用户权限。第二个文件标有需要管理员权限和 XP 兼容模式的属性。

原始 EXE 文件没有设置需要管理员权限或 XP 兼容模式的可见属性，并且在正常用户模式下的 Windows 7 机器上运行良好。第二个文件最初是在 XP 系统上编译的 - 但当我将它（没有安装程序）复制到 Windows 7 系统时似乎运行正确。

当安装程序脚本指定“PrivilegesRequired=none”时，我仍然会看到一个带有“需要管理员权限”标记的修改图标和一个为已安装的 EXE 文件设置为“禁用视觉主题”的文件属性。

Inno 版本是 5.5.0(a)

如何让安装程序复制 EXE 文件而不更改其属性？

```
#define InstallRoot "D:\InstallationSource\Tracker\"
#define AppRoot "C:\Tracker\"
......

[Setup]
;directories
SourceDir={#InstallRoot}
DefaultDirName={#AppRoot}
.......

[Files]
Source: "*"; DestDir: "C:\Tracker\"; Flags: recursesubdirs 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:47:27.117

Inno 不会更改这些属性。它们是根据 .exe 文件的文件名在每个用户的基础上设置的，无论它位于哪个目录。因此，如果您为 .exe 文件名选择了过于通用的东西（例如“setup.exe”或“ app.exe") 那么您可能会从其他应用程序获取兼容性设置。

如果您的安装程序名称是通用名称（同样是“setup.exe”），那么 Windows 可能会尝试通过将其继承的兼容性设置复制到它安装的任何应用程序来“提供帮助”。

无论哪种方式，选择唯一的文件名。

# css - Blogger css 下拉菜单仅在 IE 中将子菜单项向右移动

> ID：13634465
> 
> 赞同：0
> 
> 时间：2012-11-29T20:49:01.777
> 
> 标签：css, internet-explorer, drop-down-menu, blogger

我正在尝试在博客中向我的博客添加一个 CSS 下拉菜单。

我正在使用一些我为下拉菜单找到的代码。它在 Firefox 和 Chrome 中完美运行，但在 IE 中不适用。我正在使用 IE9，但有一个元标记来模拟 IE7。在 IE 中，子菜单项向右移动，而不是直接出现在主菜单项下方。（以我的代码为例，当我悬停时，“2010 Interviews”、“2011 Interviews”等不在“Radio Interviews”的正下方。它们向右移动。

我一直在尝试解决此问题 4 天。我对编码不是很好，所以即使我已经为解决方案做了很多研究，但我不明白也无法正确解决。我希望有人可以帮助我，否则我将放弃。

我想保留文档类型和元标记。

这是 html（我已添加到 html/javascript 小工具中）。

```
<div id="nav">
 <ul>
  <li><a href="http://brunomarstester.blogspot.com/">Home</a></li>
  <li><a href="#">Award Shows</a>
  <ul>
   <li><a href="#">AMAs</a></li>
   <li><a href="#">BET Awards</a></li>
   <li><a href="#">Grammys</a></li>
   <li><a href="#">MTV VMAs</a></li>
   <li><a href="#">Other Award Shows</a></li>
  </ul>
  </li>
  <li><a href="#">Hooligan Band</a>
  <ul>
   <li><a href="#">Dwayne Dugger II</a></li>
   <li><a href="#">Eric Hernandez</a></li>
   <li><a href="#">Jamareo Artis</a></li>
   <li><a href="#">James King</a></li>
   <li><a href="#">John Fossitt</a></li>
   <li><a href="#">Kameron Whalum</a></li>
   <li><a href="#">Phredley Brown</a></li>
  </ul>
  </li>
  <li><a href="#">Radio Interviews</a>
  <ul>
   <li><a href="#">2010 Interviews</a></li>
   <li><a href="#">2011 Interviews</a></li>
   <li><a href="#">2012 Interviews</a></li>
   <li><a href="#">2013 Interviews</a></li>
  </ul>
  </li>
  <li><a href="#">TV/Other Interviews</a>
  <ul>
   <li><a href="#">2010 Interviews</a></li>
   <li><a href="#">2011 Interviews</a></li>
   <li><a href="#">2012 Interviews</a></li>
   <li><a href="#">2013 Interviews</a></li>
  </ul>
  </li>
  <li><a href="#">Performances</a>
  <ul>
   <li><a href="#">Award Shows</a></li>
   <li><a href="#">Concerts</a></li>
   <li><a href="#">Night Clubs</a></li>
   <li><a href="#">Radio Stations</a></li>
   <li><a href="#">Special Events</a></li>
   <li><a href="#">Miscellaneous</a></li>
  </ul>
  </li>
  <li><a href="#">TV</a>
  <ul>
   <li><a href="#">Guest Star</a></li>
   <li><a href="#">Miscellaneous</a></li>
  </ul>
  </li>
  <li><a href="#">International</a>
  <ul>
   <li><a href="#">Australia</a></li>
   <li><a href="#">Brazil</a></li>
   <li><a href="#">Canada</a></li>
   <li><a href="#">Philippines</a></li>
   <li><a href="#">UK</a></li>
   <li><a href="#">Other</a></li>
  </ul>
  </li>
 </ul>
</div> 
```

这是模板代码的顶部和头部：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html expr:dir='data:blog.languageDirection' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr'>
<head>
<!--BELOW ADDED BY CW-->
    <meta content='IE=EmulateIE7' http-equiv='X-UA-Compatible'/>
<!--ABOVE ADDED BY CW-->

<title><data:blog.pageTitle/></title>
<b:include data='blog' name='all-head-content'/>
<link href='http://fonts.googleapis.com/css?family=Droid+Sans:regular,bold' rel='stylesheet' type='text/css'/>
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js' type='text/javascript'/>
<b:skin><![CDATA[/*
-----------------------------------------------
Blogger Template Style
Name:        TheStyle      
Author :     http://www.soratemplates.com
Designer:    http://www.elegantthemes.com
Date:        Sep 2012
License:  This free Blogger template is licensed under the Creative Commons Attribution 3.0 License, which permits both personal and commercial use. However, to satisfy the 'attribution' clause of the license, you are required to keep the footer links intact which provides due credit to its authors. For more specific details about the license, you may visit the URL below:
http://creativecommons.org/licenses/by/3.0
----------------------------------------------- */
body#layout #tabbed-area,body#layout #search-form,#navbar,#credit,.date-header,.feed-links,.post-location,.post-share-buttons,.post-icons{display: none !important;}
body,h1,h2,h3,h4,h5,ul,li,a,p,span,img,dd{margin:0;padding:0;list-style:none;text-decoration:none;border:none;outline:none;vertical-align:baseline;}
body#layout #PageList1{float:none}
body#layout #main-wrapper { float: left; width: 70%; }
body#layout #header-wrapper { margin-bottom:0 }
body {
    background-color: #2C2C2C;
    color: #7A7575;
    font-family: 'Droid Sans',Arial,Verdana,sans-serif;
    font-size: 13px;
    line-height: 19px;
}

h1, h2, h3, h4, h5, h6 {
    font-weight: normal;
    letter-spacing: -1px;
    line-height: 1em;
    padding-bottom: 5px;
}

a {color: #00B7F3;}
a:hover {}

#container {
    background: url(https://lh4.googleusercontent.com/-RMDcXHbrWZg/UEsR-ChcvgI/AAAAAAAADjo/VAfyrAnPmWU/s474/container-bg.png) repeat-y scroll 0 0 #323232;
    position: relative;
}

#container2 {
    background: url(https://lh3.googleusercontent.com/-9DPCUMBJJCA/UEsR-Di3HOI/AAAAAAAADjk/DJ6QpA0gozk/s372/container-bg-right.png) repeat-y scroll right top transparent;
    min-height: 300px;
    padding: 0 0 0 3%;
}

#header-wrapper {margin-bottom: 50px;}
#header{}
#header-inner {padding:50px 0 0}
#header,#header a { color: #fff }
#header a:hover {}
#header h1 {font-size:120px;text-transform:uppercase;padding:0}
#header img {max-height:105px}
#header .description {margin-bottom: 10px;padding-left: 10px;}

#PageList1{float: left;}
ul.nav { padding-top: 20px; }
.nav li {float: left;}
ul.nav a { font-size: 24px; color: #ffffff; text-decoration: none; padding-bottom: 58px; text-transform: uppercase; padding: 8px 8px 12px;}
ul.nav a:hover, ul.nav > li.current-menu-item > a,.PageList li.selected a { color: #dcc08e; text-shadow: 1px 1px 0px #000; }

#search-form {float: right; background: url(https://lh6.googleusercontent.com/-XddNEOGCeQk/UEsSBq5Y6GI/AAAAAAAADlU/ykXt8G9jU4M/s191/search-bg.png) no-repeat; width: 191px; height: 33px; margin: 12px 3% 0px 0px;}
input#searchinput { background:none; border: none; font-size: 12px; font-style: italic; color: #595959; text-shadow: 1px 1px 1px #000; margin-top:0px; padding-left:13px; width:146px; float: left; position: relative; top: 5px; }
input#searchsubmit { float:left; margin-top:10px; }

#content { padding-bottom: 25px; position: relative; }
#content .fullwidth {width: 100% !important;}
.entry { position: relative; margin: 0px 0px 24px; background-color: #fff; border: 1px solid #fff; box-shadow: 3px 6px 7px 1px rgba(0, 0, 0, 0.6); -moz-box-shadow:3px 3px 3px rgba(0, 0, 0, 0.6); -webkit-box-shadow: 3px 3px 3px rgba(0, 0, 0, 0.6); }

p.postinfo {
    color: #2C2C2C;
    font-size: 18px;
    margin-top: -2px;
    padding: 0 15px 10px;
    text-transform: uppercase;
}
p { line-height:18px; }
div.category {line-height: 20px;text-align:right;background-color: #9a1d0d; display:block; position: absolute; top: 0px; right: 2px; padding: 7px 8px 0 8px; max-height: 23px; overflow: hidden;}
div.category a {font-size: 22px; color: #ffffff; text-decoration: none; text-transform: uppercase; }
span.month {font-size: 48px; color: #ffffff; text-decoration: none; text-transform: uppercase; position: absolute; top: 40px; right: 0px; padding-right: 8px;}  
span.date {display:block; position: absolute; top: 40px; right: 0px; padding-right: 8px;}

#content-bottom-bg {
    background: url(https://lh3.googleusercontent.com/-xbMeEF1CMmQ/UEsSAIBn7CI/AAAAAAAADkg/uqKXOYFv49E/s4/footer-top.png) repeat-x scroll 0 0 transparent;
    border-bottom: 1px solid #4A4A4A;
    bottom: 0;
    height: 4px;
    left: 0;
    position: absolute;
    width: 100%;
}

h3.post-title a { color: #00b7f3<!--#9A1D0D-->; font-size: 30px; text-transform: uppercase;overflow: hidden;<!--ADDED BY CW-->}
<!--BELOW ADDED BY CW-->
.post-outer {
     overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}
<!--ABOVE ADDED BY CW-->

h1.post-title {
    color: #9A1D0D;
    font-size: 36px;
    padding-bottom: 4px;
    text-transform: uppercase;
    overflow: hidden;<!--ADDED BY CW-->
    text-overflow: ellipsis;<!--ADDED BY CW-->
    white-space: nowrap;<!--ADDED BY CW-->

}
.entry h3 { padding: 0 15px; font-size: 24px;}
.thumbnail img{display:block;width:222px;height:180px;margin: 2px 0 14px 2px}
.entry.big .thumbnail img{width:466px;}
.thumbnail .overlay {background: url(https://lh6.googleusercontent.com/-BW3EslWyQC0/UEsSArpUaaI/AAAAAAAADk4/2pQ8ayc3p4I/s222/overlay.png) no-repeat; display:block; position: absolute; height: 180px; width: 224px; top: 0px; left: 2px;}
.entry.big .overlay {background: url(https://lh4.googleusercontent.com/-gA72kHflMgs/UEsSAv-CUOI/AAAAAAAADk8/h_PKHudGlOw/s466/overlay2.png) no-repeat; display:block; position: absolute; height: 180px; width: 480px; top: 0px; left: 2px;}
.entry-content {
    background: url(https://lh3.googleusercontent.com/-OUfcj2Qk9I4/UEsR-1Fsn-I/AAAAAAAADjw/4EEWnDRU4y0/s9/entry-bottom-bg.png) repeat-x scroll left bottom transparent;
    padding-bottom: 10px;
}
.bottom-bg {
    background: url(https://lh4.googleusercontent.com/-cAmQAE8B1IU/UEsR-_uxihI/AAAAAAAADkE/BhmnlPyrEOU/s6/entry-top-bg.png) repeat-x scroll left top transparent;
    overflow: hidden;
}

.bottom-bg .excerpt { height: 75px; padding: 10px 17px 0; }
.textright { text-align: right; }
.entry a.readmore { font-size: 28px; color: #a5a5a5; margin-top: -5px; display: block;}

p.post-meta, p.post-meta a {
    color: #2C2C2C;
    font-size: 18px;
    text-transform: uppercase;
    padding-bottom: 10px;
}

.hr {
    background: url(https://lh3.googleusercontent.com/-iGut9H4FeFU/UEsSARlKOUI/AAAAAAAADko/JKwCEvDZaSk/hr-bg.png) repeat-x scroll 0 0 transparent;
    height: 1px;
    margin-bottom: 6px;
}

.post blockquote { font: italic 13px georgia; margin: 1em 20px;}

#sidebar-wrapper {
    float: right;
    font-size: 14px;
    margin: 0 3% 0 0;
    text-shadow: 1px 1px 0 #FFFFFF;
    width: 26%;
}

.sidebar {margin-top:15px}
.sidebar .widget,#tabbed .widget {background: #e7e7e7 url(https://lh3.googleusercontent.com/-OUfcj2Qk9I4/UEsR-1Fsn-I/AAAAAAAADjw/4EEWnDRU4y0/s9/entry-bottom-bg.png) repeat-x bottom left; padding-bottom: 10px; border: 1px solid #e7e7e7; margin-bottom: 15px; box-shadow: 3px 6px 7px 1px rgba(0, 0, 0, 0.6); -moz-box-shadow:3px 3px 3px rgba(0, 0, 0, 0.6); -webkit-box-shadow: 3px 3px 3px rgba(0, 0, 0, 0.6); }
.sidebar h2 {color:#9a1d0d; font-size:30px; text-decoration:none; text-transform:uppercase; background: url(https://lh4.googleusercontent.com/-cAmQAE8B1IU/UEsR-_uxihI/AAAAAAAADkE/BhmnlPyrEOU/s6/entry-top-bg.png) repeat-x bottom left; padding: 21px 5px 9px 22px;}
.sidebar .widget-content {padding: 10px 5px 7px 22px;color:#7a7575;}            
.sidebar .widget-content ul { margin: 0px 0px 0px 15px; }
.sidebar .widget-content ul li { background: url(https://lh3.googleusercontent.com/-ca73xQGUkQ0/UEsSCt9xG0I/AAAAAAAADmA/IBvLBqoqbIo/s6/widget-bullet.png) no-repeat 0px 12px; padding:5px 0px 5px 13px; }
.sidebar .widget-content ul li ul { padding:3px 0px 0px 7px; margin: 0px 0px -7px; }            
.sidebar .widget-content a { color: #7a7575; text-decoration: none;}
.sidebar .widget-content a:hover { color: #595656; }

#tabbed-area { background: #d6d6d6 url(https://lh4.googleusercontent.com/-cAmQAE8B1IU/UEsR-_uxihI/AAAAAAAADkE/BhmnlPyrEOU/s6/entry-top-bg.png) repeat-x bottom left; padding-bottom: 1px; }
#tabbed-area li { background:#d6d6d6; float: left; width: 33%; }
#tabbed-area li a { font-size: 30px; color: #9a1d0d; text-shadow: 1px 1px 0px #ffffff; display: block; padding: 19px 8% 7px; background: url(https://lh5.googleusercontent.com/-7v6_A-bd7Hk/UEsSCP2B4bI/AAAAAAAADlk/NntOh4bXlOw/tabbed-right-bg.png) repeat-y top right; text-transform: uppercase; }
#tabbed-area li.last a { background: none; }
#all_tabs a{color: #2b2b2b;}
#tabbed-area li a:hover,#all_tabs a:hover { text-decoration: none; color: #000000; }
#tabbed-area li.ui-state-active a { background-color: #e7e7e7; }
#tabbed .tab ul li { padding: 14px 7% 10px; background:#E7E7E7 url(https://lh4.googleusercontent.com/-cAmQAE8B1IU/UEsR-_uxihI/AAAAAAAADkE/BhmnlPyrEOU/s6/entry-top-bg.png) repeat-x bottom left; }      
#tabbed img.smallthumb { float: left; border: 3px solid #d6d6d6; margin: 0 8px 5px 0px; }
#all_tabs span { color: #a1a1a1; display: block; font: italic 11px Georgia, serif; color: #a1a1a1; padding-top:4px; }
.ui-tabs-hide { display: none; }

#comments{overflow:hidden;margin-left:100px}
#comments h4{display:inline;padding:10px;line-height:40px}
#comments h4,.comments .comment-header,.comments .comment-thread.inline-thread .comment{position:relative}
#comments h4,.comments .user a,.comments .continue a{font-size:16px}
#comments h4,.comments .continue a{font-weight:normal;color:#fff}
#comments h4:after{content:"";position:absolute;bottom:-10px;left:10px;border-right:20px solid transparent;width:0;height:0;line-height:0}
#comments .avatar-image-container img{border:0}
.comment-thread{color:#111}
.comment-thread a{color:#777}
.comment-thread ol{margin:0 0 20px}
.comment-thread .comment-content a,.comments .user a,.comments .comment-thread.inline-thread .user a{color:#9A1D0D}
.comments .avatar-image-container,.comments .avatar-image-container img{width:48px;max-width:48px;height:48px;max-height:48px}
.comments .comment-block,.comments .comments-content .comment-replies,.comments .comment-replybox-single{margin-left:60px}
.comments .comment-block,.comments .comment-thread.inline-thread .comment{border:1px solid #ddd;background:#f9f9f9;padding:10px}
.comments .comments-content .comment{margin:15px 0 0;padding:0;width:100%;line-height:1em}
.comments .comments-content .icon.blog-author{position:absolute;top:-12px;right:-12px;margin:0;background-image: url(https://lh5.googleusercontent.com/-cz1ogKtwNBc/T-xs3x0de-I/AAAAAAAABwI/KlCgXlV7uo0/s36/author);width:36px;height:36px}
.comments .comments-content .inline-thread{padding:0 0 0 20px}
.comments .comments-content .comment-replies{margin-top:0}
.comments .comment-content{padding:5px 0;line-height:1.4em}
.comments .comment-thread.inline-thread{border-left:1px solid #ddd;background:transparent}
.comments .comment-thread.inline-thread .comment{width:auto}
.comments .comment-thread.inline-thread .comment:after{content:"";position:absolute;top:10px;left:-20px;border-top:1px solid #ddd;width:10px;height:0px}
.comments .comment-thread.inline-thread .comment .comment-block{border:0;background:transparent;padding:0}
.comments .comment-thread.inline-thread .comment-block{margin-left:48px}
.comments .comment-thread.inline-thread .user a{font-size:13px}
.comments .comment-thread.inline-thread .avatar-image-container,.comments .comment-thread.inline-thread .avatar-image-container img{width:36px;max-width:36px;height:36px;max-height:36px}
.comments .continue{border-top:0;width:100%}
.comments .continue a{padding:10px 0;text-align:center}
.comment .continue{display:none}
#comment-editor{width:103%!important}
.comment-form{width:100%;max-width:100%}

#blog-pager-newer-link {float: left;}
#blog-pager-older-link {float: right;}
#blog-pager { height: 73px; margin:0; padding:10px 0; clear:both; }
.pagenavi {position: relative;text-align: center;}
.pagenavi a { padding: 5px 7px !important; margin: 2px; text-decoration: none; border: none !important; color: #ffffff !important; background: none !important; font-weight: normal !important; font-size: 36px !important; text-shadow: 1px 1px 1px rgba(0,0,0,0.4); }
.pagenavi span.current,.pagenavi span.extend,.pagenavi a:active,.pagenavi a:hover { padding: 5px 7px !important; margin: 2px; font-weight: normal !important; background: none !important; border: none !important; color:#dcc08e !important; font-size: 36px !important; text-shadow: 1px 1px 1px rgba(0,0,0,0.4); }
.pagenavi .pages {display:none}
.pagenavi span#right-arrow {
    background: url(https://lh5.googleusercontent.com/-66Q_--yBc_M/UEsSBRccq0I/AAAAAAAADlM/zrJcbXcNkgk/s29/right-arrow.png) no-repeat scroll 0 0 transparent;
    display: block;
    height: 29px;
    position: absolute;
    right: 3%;
    top: 1px;
    width: 27px;
}
.pagenavi span#left-arrow {
    background: url(https://lh6.googleusercontent.com/-QeyupBWH9sU/UEsSAWpVU7I/AAAAAAAADkw/cwaKy9vzDTA/s29/left-arrow.png) no-repeat scroll 0 0 transparent;
    display: block;
    height: 29px;
    left: 12px;
    position: absolute;
    top: 1px;
    width: 27px;
}

#footer { background: #2c2c2c url(https://lh4.googleusercontent.com/-9KpLVnuP-U8/UEsR_XHrdOI/AAAAAAAADkM/HCY21tY1qRw/s388/footer-leftbg.png) repeat-y; }
#footer-wrapper { background: url(https://lh3.googleusercontent.com/-jlWcqoo28UI/UEsR_kVd7pI/AAAAAAAADkU/E4TmyTCf7GI/s402/footer-rightbg.png) repeat-y top right; padding: 20px 7% 0px; }
#footer .column { width: 285px; margin: 0px 0px 45px; float: left; color: #d1d1d1; text-shadow: 1px 1px 1px #000; }
#footer .column h2 {color:#dcc08e; font-size: 30px; text-transform: uppercase; margin: 30px 0px 5px 0px; }
#footer .column ul li { margin-bottom: 11px; }
#footer .column ul a { color:#d1d1d1; text-decoration: none; background: url(https://lh5.googleusercontent.com/-z1-aXJmQ_6Q/UEsR_ZX8E8I/AAAAAAAADkc/Mdf9R5fj1qg/s42/footer-bullet.png) no-repeat 0 2px; padding-left:20px; }
#footer .column ul a:hover { background: url(https://lh5.googleusercontent.com/-z1-aXJmQ_6Q/UEsR_ZX8E8I/AAAAAAAADkc/Mdf9R5fj1qg/s42/footer-bullet.png) no-repeat bottom left; color:#fff; }
p#copyright { text-align: right; padding-bottom: 40px; color:#686868; text-shadow: 1px 1px 1px #000; font-size: 12px; }
p#copyright a { font-weight: bold; color:#8c8c8c; }

#random-tabbed img,#recent-tabbed img,#PopularPosts1 img {
    border: 3px solid #D6D6D6;
    float: left; 
    width:38px; 
    height:38px;
    margin: 0 8px 5px 0;
    padding:0
}
#PopularPosts1 li {}
.status-msg-body {position:relative !important}
.CSS_LIGHTBOX { z-index: 9999 !important; }
<!--BELOW ADDED BY CW-->
/* Drop Down Menu By helperblogger.com */
#nav {
 float: left;
 font: bold 12px Arial, Helvetica, Sans-serif;
 border: 1px solid #121314;
 border-top: 1px solid #2b2e30;
 overflow: hidden;
 width: 100%;
 background: #3C4042;
 background: -webkit-gradient( linear, left bottom, left top, color-stop(0.09, rgb(59,63,65)), color-stop(0.55, rgb(72,76,77)), color-stop(0.78, rgb(75,77,77)) );
 background: -moz-linear-gradient( center bottom, rgb(59,63,65) 9%, rgb(72,76,77) 55%, rgb(75,77,77) 78% );
 background: -o-linear-gradient( center bottom, rgb(59,63,65) 9%, rgb(72,76,77) 55%, rgb(75,77,77) 78% );
 box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1) inset, 0 0 5px rgba(0, 0, 0, 0.1) inset;
}

#nav ul {
 margin: 0;
 padding: 0;
 list-style: none;
}

#nav ul li {
 float: left;
}

#nav ul li a {
 float: left;
 color: #d4d4d4;
 padding: 10px 20px;
 text-decoration: none;
 background: #3C4042;
 background: -webkit-gradient( linear, left bottom, left top, color-stop(0.09, rgb(59,63,65)), color-stop(0.55, rgb(72,76,77)), color-stop(0.78, rgb(75,77,77)) );
 background: -moz-linear-gradient( center bottom, rgb(59,63,65) 9%, rgb(72,76,77) 55%, rgb(75,77,77) 78% );
 background: -o-linear-gradient( center bottom, rgb(59,63,65) 9%, rgb(72,76,77) 55%, rgb(75,77,77) 78% );
 box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1) inset, 0 0 5px rgba(0, 0, 0, 0.1) inset;
 border-left: 1px solid rgba(255, 255, 255, 0.05);
 border-right: 1px solid rgba(0,0,0,0.2);
 text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.6);
}
/* Drop Down Menu By helperblogger.com */
#nav ul li a:hover,
#nav ul li:hover > a {
 color: #252525;
 background: #3C4042;
 background: -webkit-gradient( linear, left bottom, left top, color-stop(0.09, rgb(77,79,79)), color-stop(0.55, rgb(67,70,71)), color-stop(0.78, rgb(69,70,71)) );
 background: -moz-linear-gradient( center bottom, rgb(77,79,79) 9%, rgb(67,70,71) 55%, rgb(69,70,71) 78% );
 background: -o-linear-gradient( center bottom, rgb(77,79,79) 9%, rgb(67,70,71) 55%, rgb(69,70,71) 78% );
 text-shadow: 0 1px 0 rgba(255, 255, 255, 0.2), 0 -1px #000;
}

#nav li ul a:hover,
#nav ul li li:hover > a {
 color: #2c2c2c;
 background: #5C9ACD;
 background: -webkit-gradient( linear, left bottom, left top, color-stop(0.17, rgb(61,111,177)), color-stop(0.51, rgb(80,136,199)), color-stop(1, rgb(92,154,205)) );
 background: -moz-linear-gradient( center bottom, rgb(61,111,177) 17%, rgb(80,136,199) 51%, rgb(92,154,205) 100% );
 background: -o-linear-gradient( center bottom, rgb(61,111,177) 17%, rgb(80,136,199) 51%, rgb(92,154,205) 100% );
 border-bottom: 1px solid rgba(0,0,0,0.6);
 border-top: 1px solid #7BAED9;
 text-shadow: 0 1px rgba(255, 255, 255, 0.3);
}
/* Drop Down Menu By helperblogger.com */
#nav li ul {
 background: #3C4042;
 background-image: -webkit-gradient( linear, left bottom, left top, color-stop(0.09, rgb(77,79,79)), color-stop(0.55, rgb(67,70,71)), color-stop(0.78, rgb(69,70,71)) );
 background-image: -moz-linear-gradient( center bottom, rgb(77,79,79) 9%, rgb(67,70,71) 55%, rgb(69,70,71) 78% );
 background-image: -o-linear-gradient( center bottom, rgb(77,79,79) 9%, rgb(67,70,71) 55%, rgb(69,70,71) 78% );
 left: -999em;
 margin: 35px 0 0;
 position: absolute;
 width: 160px;
 z-index: 9999;
 box-shadow: 0 0 15px rgba(0, 0, 0, 0.4) inset;
 -moz-box-shadow: 0 0 15px rgba(0, 0, 0, 0.4) inset;
 -webkit-box-shadow: 0 0 15px rgba(0, 0, 0, 0.4) inset;
 border: 1px solid rgba(0, 0, 0, 0.5);
}

#nav li:hover ul {
 left: auto;
}

#nav li ul a {
 background: none;
 border: 0 none;
 margin-right: 0;
 width: 120px;
 box-shadow: none;
 -moz-box-shadow: none;
 -webkit-box-shadow: none;
 border-bottom: 1px solid transparent;
 border-top: 1px solid transparent;
}

.nav ul li ul {
    position: absolute;
    left: 0;
    display: none;
    visibility: hidden;
}

.nav ul li ul li {
    display: list-item;
    float: none;
}

.nav ul li ul li ul {
    top: 0;
}

.nav ul li ul li a {
    font: normal 13px Verdana;
    width: 160px;
    padding: 5px;
    margin: 0;
    border-top-width: 0;
    border-bottom: 1px solid gray;
}

#nav li li ul {
 margin: -1px 0 0 160px;
 visibility: hidden;
}

#nav li li:hover ul {
 visibility: visible;
}
/* Drop Down Menu By helperblogger.com */

<!--ABOVE ADDED BY CW-->

]]></b:skin>
<style type='text/css'>
<b:if cond='data:blog.pageType == &quot;index&quot;'>
#sidebar-wrapper {display:none}
.entry-inner{position:relative} 
.small { width:226px; }
.big { width:470px; }
<b:else/>
#main-wrapper{margin-left:-3%;float: left;width: 71%;}
.entry { background: #ffffff url(https://lh3.googleusercontent.com/-OUfcj2Qk9I4/UEsR-1Fsn-I/AAAAAAAADjw/4EEWnDRU4y0/s9/entry-bottom-bg.png) repeat-x; border: 1px solid #ffffff; padding: 30px 0px 0px; box-shadow: 3px 6px 7px 1px rgba(0, 0, 0, 0.6); -moz-box-shadow:3px 3px 3px rgba(0, 0, 0, 0.6); -webkit-box-shadow: 3px 3px 3px rgba(0, 0, 0, 0.6); margin-bottom: 15px; }
.entry-inner { background: url(https://lh3.googleusercontent.com/-OUfcj2Qk9I4/UEsR-1Fsn-I/AAAAAAAADjw/4EEWnDRU4y0/s9/entry-bottom-bg.png) repeat-x bottom left; padding: 0px 4% 30px; } 
.info-panel { float: left; margin-right: 3%; width: 29%; }
.post-text img { max-width:420px; }
.info-panel h3.infotitle {
    color: #2C2C2C;
    font-size: 24px;
    padding:0 0 9px;
    text-shadow: none;
    text-transform: uppercase;
}
.info-panel .tags ul li { float: left; }
.info-panel .tags ul li a { display: block; padding: 10px 10px 8px; margin: 0px 3px 3px 0px; background: #efefef; font-size: 11px; color: #6e6e6e; text-transform: uppercase; text-shadow: 1px 1px 0px #ffffff; }
.info-panel .tags ul li a:hover { color: #000000; text-decoration: none; }
.related ul li { background: url(https://lh4.googleusercontent.com/-4A2wStB_txo/UEsSAwwBQWI/AAAAAAAADlE/k9ROBQlzCWE/s5/post-bullet.png) no-repeat scroll 0 7px transparent; padding: 0 0 5px 11px; }
.related ul li a { color: #7A7575; }
.related ul li a:hover { color: #000000; }
.share-panel,.related{margin-top:30px}
.share-panel img {margin: 0 7px 5px 0;}
</b:if>
<b:if cond='data:blog.pageType == &quot;item&quot;'>
.post-text { float: right; width: 68%; }
</b:if>
</style>
<script type='text/javascript'>//<![CDATA[
eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('8 9(s,n){g s.h(/<.*?>/i,\'\').j(/\\s+/).k(0,n-1).l(\' \')}8 b(a){m p=o.q(a),5=\'\',4=p.r(\'4\');t(4.u>=1){5=\'<4 6="\'+4[0].6+\'" />\'}v{5=\'<4 6="w://A.B.C/-D/E-F/G/H-I/J.K" />\'}p.c=\'<2 3="L"><a 7="\'+y+\'">\'+5+\'<d 3="M"></d></a></2>\'+\'<e 3="N-O"><a 7="\'+y+\'">\'+x+\'</a></e>\'+\'<p 3="P">Q R \'+z+\'</p>\'+\'<2 3="S-T"><2 3="U-V"><2 3="W"><p>\'+9(p.c,X)+\'...</p>\'+\'<2 3="Y"><a 3="b" 7="\'+y+\'">&#f;&#f;</a></2>\'+\'</2></2></2>\'}',61,61,'||div|class|img|imgtag|src|href|function|stripTags||readmore|innerHTML|span|h3|187|return|replace|ig|split|slice|join|var||document||getElementById|getElementsByTagName||if|length|else|https||||lh4|googleusercontent|com|G9M2DTCTUwM|Tlh|2pwtc5I|AAAAAAAABKM|kCJg|Kf3W2M|no_image_yet|jpg|thumbnail|overlay|post|title|postinfo|Posted|by|entry|content|bottom|bg|excerpt|40|textright'.split('|'),0,{}))
//]]></script>
</head> 
```

如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T22:48:20.827

好吧，在花了 5 天的时间，没有让它工作，和几个小时的研究之后，我终于找到了一个很棒的教程，解释了如何创建一个 css 下拉菜单，它适用于所有浏览器，包括 IE 7,8 , 和 9\. 所以我使用了该代码并对其进行了修改以适合我的喜好。

感谢@Kraz 的帮助。

如果这可能对其他人有帮助（可能只有像我这样的初学者）这里是链接。有一个包含 z-index 的小修复，因此如果您的菜单下拉菜单被其他元素覆盖，请确保您通读所有评论。我永远不会希望任何人经历我所经历的。[http://designmodo.com/css3-dropdown-menu/](http://designmodo.com/css3-dropdown-menu/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T20:52:48.737

很酷的教程我找到了一个网站，里面有很好的菜单栏和其他你可能喜欢的 CSS 设计。

[http://freebietemplate.com/css-designs/css-designs.html](http://freebietemplate.com/css-designs/css-designs.html)

祝你今天过得愉快

# vbscript - 数组超出范围？

> ID：13634466
> 
> 赞同：0
> 
> 时间：2012-11-29T20:49:03.247
> 
> 标签：vbscript, device

我有一个与设备相关的 vbscript 问题。下面的代码甚至不应该在之后执行，`i = playercount`但确实如此。

```
Do Until i = playercount

    If i = playercount then
        Exit Do
    end if

    Select Case True
        Case i >=1 And i <= 4
            'usb hubs 1-4
            'b = i + 1
             If pluggedindev(4) = False Then

                   msgbox(i)
                   msgbox(playercount)
                   Set ExtHubPort(i) = ExtHub(1).Ports(i)
                   Wscript.Sleep 2000
                   ExtHubPort(i).HotPlug GenericHIDDSFDev(i)
                   WScript.Sleep 10000
                   pluggedindev(i) = True
                   MsgBox("usb device (ports 1-4)")
             'else if playercount <= 4 then
                   'Exit Do
             End If

        Case i >=5 And i <= 8
            'usb hubs 5-8
            Wscript.sleep 2000

            For b = 1 To 4
                 Set ExtHubPort(i) = ExtHub(2).Ports(b)
                 Wscript.sleep 2000
                 ExtHubPort(i).HotPlug GenericHIDDSFDev(i)
                 WScript.Sleep 10000
                 'Log("Usb devices 1 through 4 set")
            Next 

            'usb hubs 9-12
        Case i >=9 And i <= 12
            For b = 1 To 4 
            Set ExtHubPort(i) = ExtHub(3).Ports(b)
                Wscript.sleep 2000
                ExtHubPort(i).HotPlug GenericHIDDSFDev(i)
                WScript.Sleep 10000
            Next 
           'usb hubs 13-16
        Case i >=13 And i <= 16
            For b = 1 To 4 
                Set ExtHubPort(i) = ExtHub(4).Ports(b)
                Wscript.sleep 2000
                ExtHubPort(i).HotPlug GenericHIDDSFDev(i)
                WScript.Sleep 10000
            Next 
         'usb hubs 17-20
        Case i >=17 And i <=20
            For b = 1 To 4 
                Set ExtHubPort(i) = ExtHub(5).Ports(b)
                Wscript.sleep 2000
                ExtHubPort(i).HotPlug GenericHIDDSFDev(i)
                WScript.Sleep 10000
            Next 
    End Select

    i = i + 1

Loop 
```

有人看看，看看为什么？似乎 i 下标超出范围并导致问题，但显然上面的代码应该可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:10:36.650

我的猜测是您从 0（零）的 playercount 开始并将 i 初始化为 1（一）。条件永远不会得到满足，当`i = playercount`它进入原始循环的第二次迭代时会出现错误。

首先，将您的代码缩短为如下所示：

```
' Let ExtHubPort(1 to playercount) reference to
'     ExtHub(1 to playercount/4).Ports(1 to 4)
For i = 0 to playercount - 1
    Set ExtHubPort(i+1) = ExtHub(int(i/4)+1).Ports((i mod 4) + 1)
    Wscript.sleep 2000
    ExtHubPort(i+1).HotPlug GenericHIDDSFDev(i+1)
    WScript.Sleep 10000
Next 
```

现在更容易看出循环的哪一部分出错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:08:16.600

我认为关于 I 或 playercount 值的评论是正确的。我通过将此代码放在循环末尾强制计数器在达到 playercount 之前停止（它停止在 4？）来解决它。变量我只是继续上升，因为我的 if 和其他语句没有正确使用。感谢所有帮助过的人。

```
If i = playercount  then
Exit Do
elseif i < playercount then
i = i + 1
End If 
```

# iphone - 如何在 UITableView 中显示核心数据实体

> ID：13634468
> 
> 赞同：3
> 
> 时间：2012-11-29T20:49:24.380
> 
> 标签：iphone, objective-c, uitableview, core-data, nsmanagedobject

我设法构建了一个看起来像这样的小核心数据数据库：我有一个或多个名为“用户”的实体，具有一些属性，如名字、姓氏、头像图像、生日......

此“用户”的另一个属性是与称为“帐户”的实体的一对多关系。为了显示这些内容，我设置了一个 UIViewController，其中 UITableView 分为两个部分，第一个用于所有一般信息（名字、姓氏），第二个用于 NSSet 帐户（每个帐户一个单元格，只是它们的概述） .

到目前为止，一切都很好 ：）

我现在的问题是：我怎样才能检索第一部分的基本信息，而不必手动将它们添加到字典或数组中，例如，具有构建表视图所必需的“计数”属性。此外，实体的某些属性具有 nil 值必须是合法的。这个表视图只需要显示这个单一的实体，它作为一个属性传递给类（self.userEntity ...）

希望你明白我的意思并有一些想法:)

提前谢谢

达里奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:19:01.563

因此，您有一个数组或一组“帐户”，您有一个与“帐户”有一对多关系的“用户”，并且您希望有效地访问具有任何指定帐户的“用户”集？

键值编码解决方案类似于：

```
NSSet *setOfAccounts = ...whatever...;

// assuming the to-one relationship from 'account' to 'user' is named 'user'
NSSet *setOfUsers = [setOfAccounts valueForKey:@"user"]; 
```

如果您更容易在某处提供它，您也可以使用核心数据查询，尽管我无法提出不涉及子查询的解决方案：

```
// assuming the to-many relationship from 'user' to 'account' is named 'accounts'
[NSPredicate predicateWithFormat:
               @"SUBQUERY(accounts, $x, %@ contains $x).@count > 0", accounts] 
```

这可能比键值编码方法慢。如果性能是一个问题，我建议您使用 KVC 方法获取一组用户，然后`self in ...`在所有相关用户中执行获取请求以排除故障。

子查询的问题是“包含在”`NSPredicate`中`contains`但没有任何内容，因此您不能直接将其翻转为：

```
"any accounts isContainedIn %@", accounts 
```

否则可能会编译为更高效的 SQL。如果您的原始谓词是可适应的，那么将其表述为任何操作肯定会更有效，例如，如果它是：

```
/* accounts where ... */
"accountDate > %@", someDateInThePast 
```

那么用户的最快查询将是：

```
"any accounts.accountDate > %@", someDateInThePast 
```

可悲的是，我认为“任何”没有任何合适的语法可以一次将条件应用于多个字段，因此如果您对帐户的查询不重要，那么如果键值编码不是，则您需要使用 SUBQUERY 方法t 可以接受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T01:45:14.840

如果您有兴趣添加表格视图单元格并编辑/删除它们。你绝对应该看看这个[教程](http://www.youtube.com/watch?v=QBrkavVJsw0)我用了这个教程两次，它让我快速掌握核心数据！他是个好老师！这是一个 4 部分系列，他教你如何在不同的视图等上加载实体！

# css - webkit“haslayout”错误

> ID：13634470
> 
> 赞同：6
> 
> 时间：2012-11-29T20:49:38.610
> 
> 标签：css, google-chrome, safari, webkit, haslayout

我有一个带有标题文本的手风琴类型的东西。当它打开时，它有一个填充，当它关闭时，它有另一个。所有的面板都以它们的开放样式开始，然后通过 JS 将它们关闭。在**Chrome**和**Safari**中，标题文本没有应用封闭填充。

如果我在检查器中查看它，正确的（打开的）填充显示为正在应用，并且当单击检查器中的实际元素时，我可以看到填充*应该*在哪里。

我可以让它应用它或“绘制”它（如果这是正确的术语）的唯一方法是在该标题文本上或该面板内 切换（或添加）*任何样式。*

我还发现，当我通过检查器将填充添加为内联样式时，它也不会被应用并且切换不会改变它。

这似乎与 IE 的“hasLayout”问题非常相似，但我找不到任何引用类似错误的内容。有没有人对进一步测试或如何解决有任何想法？

我似乎无法在更简单的 jsfiddle 中复制这个问题，而且我正在从事的项目非常庞大，所以这里是给我带来问题的代码块：

**CSS**

```
@media only screen and (min-width: 600px) and (max-width: 767px) {
    .checkout-plans .collapsible .title {
        padding-right: 130px;
    }
    .checkout-plans .collapsible.closed .title {
        padding-right: 323px;
    }
} 
```

**HTML**

```
<div class="module checkout-plans">
    <div class="collapsible active">
        <header>
            <div class="title">
                <h3>This text has the correct padding applied</h3>
            </div>
        </header>
    </div>
    <div class="collapsible closed">
        <header>
            <div class="title">
                <h3>This text does not have the correct padding after having the "closed" class applied via JS</h3>
            </div>
        </header>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:38:25.770

因此，尽管这并不能真正解释*为什么*会发生这种情况，但添加

```
-webkit-transform: scale3d(1,1,1); 
```

到`h3`里面`div.title`强迫它去调整。

显然，填充已正确应用，但`h3`没有响应父级的新大小。添加这个特定于 webkit 的样式会强制它重新绘制并根据父级的宽度重新计算它的宽度。

如果有人对*为什么*需要这种额外的样式有任何想法，请添加到这里！

基于这个答案：[Chrome 隐藏后不会重绘 <div>](https://stackoverflow.com/questions/11002195/chrome-does-not-redraw-div-after-it-is-hidden)

# php - 定期从服务器端调用函数？

> ID：13634473
> 
> 赞同：2
> 
> 时间：2012-11-29T20:49:46.720
> 
> 标签：php, javascript, html, asp-classic

有没有办法让服务器调用一些函数来检查我的数据库以查看某个值是否定期（每 10 秒）有效？

所以我不需要实际访问我的身边让javascript完成工作，服务器会每10秒自动调用一个函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T22:04:35.903

有一个非常简单易用的windows任务调度程序。我认为您不会获得 10 秒乘 10 秒的分辨率。您很可能必须每分钟安排一次。

您还可以安排一个任务调度程序（或 cron，对于 linux）项目来运行它，例如每分钟连续运行 3-4 次：

```
for($x = 0; $x < 4; $x++) { 
    yourFunction();
    sleep(10);
} 
```

因此，通过这种方式，您将拥有一个每分钟执行 4 次的脚本，但并非精确地每 10 秒执行一次。请记住，如果您每 10 秒执行 6 次，这将超过 60 秒，因为您的脚本也需要时间来执行，并且您将有重叠。

如果您使用任务调度器方法或上述方法，我会写一个“锁”，以便如果任务调度器正在运行先前启动的检查脚本，辅助将永远不会运行，例如：

```
if(is_readable('is_running')) { 
    die("Already have one running");
}

file_put_contents('is_running', date('r'));

// at the end of the script, remove is_running since it won't be running anymore
unlink('is_running'); 
```

因此`date('r')`，如果有任何问题，您可以通过在文本编辑器中打开锁来查看上次写入锁的时间。再一次，除非您非常精确地执行此操作，否则您最终可能会得到 (1) 一个除了每分钟运行一次的脚本，将会有两个脚本在运行，这可能导致大量进程的缓慢雪崩 (2) 如果你使用锁，它可能每 10 秒运行一次，每隔一分钟运行一次，如果锁持续一眨眼时间超过 60 秒......（3）谁知道还有什么......这就是为什么在我的示例中，我建议每分钟运行 3-4 次，如果您真的需要每分钟运行一次以上，则间隔 10 秒。（如果您的脚本需要相对较长的时间，这仍然会导致问题，所以再一次..）

另一种可能更容易出现问题的方法是在 Windows 服务器上使用长时间运行的 PHP 脚本，该脚本执行以下操作：

```
while(1) { 
    yourFunction();
    sleep(10);
} 
```

但是，这是不可靠的，因为进程偶尔**会**停止（死），您需要确保它在启动时启动，并且还要处理一直在服务器上运行命令行脚本的黑匣子。此外，在长时间运行的进程情况下，您可能还需要一个辅助脚本来检查它是否每分钟左右运行正常。

最后，我在负载很重的服务器上更多地使用了这种方法**......**例如，假设你**知道**你每 10 秒获得超过 1 次点击，你可以在**每个**php 脚本中引入概率（说，包括，使用类似的东西）：

```
if(mt_rand(1,100) < 10) {
    yourFunction();
} 
```

或者我在重负载站点上的首选方法是使用像 apc、redis 或 memcache 这样的内存存储（我已经在使用它了，因为它是一个重负载站点）并简单地存储“上次运行”时间，如果它是10多秒前，立即更新运行时间再运行函数，伪ex：

```
if($yourStore->get('last_garbage_collection') < (time() - 10)) { 
    $yourStore->set('last_garbage_collection', time());
    yourFunction();
} 
```

最后运行时间也可以存储在 mySQL、Sessions（用于每个用户的垃圾收集、检查脚本等）或其他任何东西中。

因此，就 Windows 而言，确实没有什么*好*方法可以做到这一点。毫无疑问，我的建议是任务调度程序/cron 每分钟运行一次（你*真的*需要每 10 秒检查一次吗？），或者最后一个具有垃圾收集时间的方法，如果你*必须*有 10 秒的分辨率，它*是*一个负载很重的站点，每秒有几十个请求，甚至更多，而且*您*知道它可能仍然无法一直运行、中断或更糟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T21:18:11.930

有适用于 Windows 的第三方调度程序可以为您解决问题。这取决于您的 Windows 版本。几年前，我幸运地使用了 Autotask 2000。不确定它是否适用于较新版本的 Windows。

# c# - 瞬态字段上的字段初始化器

> ID：13634476
> 
> 赞同：1
> 
> 时间：2012-11-29T20:49:56.653
> 
> 标签：c#, db4o

我想知道：如果我从 db4o 数据库加载一个对象，是否总是会调用字段初始值设定项？

一个例子可能是一个瞬态字段syncRoot，用于对象锁定，因为线程安全：

```
public class Test
{
    [Transient]
    private object syncRoot = new object();

    [Transient]
    private object syncRoot2;

    public Test()
    {
        this.syncRoot2 = new object();
    }
}
```

db4o 查询类似于：

```
Test mytestObject = (from Test test in session
                     select test).First(); 
```

我不能使用`syncRoot2`，因为在 db4o 查询期间，没有调用对象构造函数，因此该值将为 null。但是呢`syncRoot`？在 db4o 模型对象上使用字段初始化器是否安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:53:33.630

这取决于 ：）

默认情况下没有，因为 db4o 将尝试避免调用 ctor 并且字段初始化程序在 ctor 内执行）（至少使用 VS 2010 附带的 C# 编译器）。

例如，给定以下类定义：

```
public class Item
{
   public object o = new object();
} 
```

C# 编译器将发出类似于以下内容的 IL（用于构造函数）：

```
.class public auto ansi beforefieldinit Item extends [mscorlib]System.Object
{
   .field public object o
   .field public notserialized int32 i

   .method public hidebysig specialname rtspecialname 
                  instance void .ctor () cil managed 
   {
        .maxstack 8

        ldarg.0
        newobj instance void [mscorlib]System.Object::.ctor()  // field initializer
        stfld object Item::o // field initializer
        ldarg.0
        call instance void [mscorlib]System.Object::.ctor()
        ret
   }
} 
```

基本上你有两个选择：

1.  [启用构造函数](http://community.versant.com/documentation/reference/db4o-8.0/java/api/com/db4o/config/ObjectClass.html#callConstructor%28boolean%29)调用
2.  使用[Activated](http://community.versant.com/documentation/reference/db4o-8.0/java/api/com/db4o/events/EventRegistry.html#activated%28%29)事件来初始化瞬态字段。

希望这可以帮助

# database - ZF2 默认数据库会话存储

> ID：13634490
> 
> 赞同：4
> 
> 时间：2012-11-29T20:50:47.410
> 
> 标签：database, session, zend-framework2

我正忙于编写一个 DB Session 模块，以便可以在多个应用程序之间快速安装它。该模块将从自动加载器加载，作为要启动的第一个模块。我想要完成的是将默认会话容器/会话处理程序更改为所有模块的默认会话处理程序，它也应该是数据库托管会话。我一直在努力使用 zf2 会话处理程序，日志中的错误是 0 有意义的。所以这是我到目前为止所拥有的。Module.php 的基本模块包含...

命名空间 DBSession；

```
use Zend\Mvc\ModuleRouteListener;

class Module {

    public function onBootstrap($e) {
        $e->getApplication()->getServiceManager()->get('translator');
        $eventManager = $e->getApplication()->getEventManager();
        $moduleRouteListener = new ModuleRouteListener();
        $moduleRouteListener->attach($eventManager);
        $config = $e->getApplication()->getServiceManager()->get('Config');
        $controller = $e->getTarget();
        $controller->config = $config;
        new \DBSession\Storage\DBStorage();
    }

    public function getConfig() {
        return include __DIR__ . '/config/module.config.php';
    }

    public function getAutoloaderConfig() {
        return array(
            'Zend\Loader\ClassMapAutoloader' => array(
                __DIR__ . '/autoload_classmap.php',
            ),
            'Zend\Loader\StandardAutoloader' => array(
                'namespaces' => array(
                    __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__,
                ),
            ),
        );
    }
} 
```

以及启动 DB 会话处理程序的实际类。

```
namespace DBSession\Storage;

use Zend\Session\SaveHandler\DbTableGateway;
use Zend\Session\SaveHandler\DbTableGatewayOptions;
use Zend\Db\Adapter\Adapter;
use Zend\Session\SessionManager;
use Zend\Session\Container;

class DBStorage {

    public function __construct() {
        $dbAdapter = new Adapter(array(
                    'driver' => 'Mysqli',
                    'host' => 'localhost',
                    'dbname' => 'zf2_session',
                    'username' => 'zf2',
                    'password' => 'testme',
                    'options' => array(
                        'buffer_results' => true,
                    ),
                ));

        $tableGateway = new \Zend\Db\TableGateway\TableGateway('session', $dbAdapter);

        $gwOpts = new DbTableGatewayOptions();
        $gwOpts->setDataColumn('data');
        $gwOpts->setIdColumn('id');
        $gwOpts->setLifetimeColumn('lifetime');
        $gwOpts->setModifiedColumn('modified');
        $gwOpts->setNameColumn('name');

        $saveHandler = new DbTableGateway($tableGateway, $gwOpts);
        $sessionManager = new SessionManager();
        $sessionManager->setSaveHandler($saveHandler);
        return Container::setDefaultManager($sessionManager);
    }

} 
```

尝试创建会话时，我在日志中看到以下内容，我有 0 线索如何修复。这开始让我讨厌魔法......

```
[29-Nov-2012 20:47:28 UTC] PHP Fatal error:  Uncaught exception 'Zend\Db\Sql\Exception\InvalidArgumentException' with message 'Not a valid magic property for this object' in /document_root/vendor/zendframework/zendframework/library/Zend/Db/Sql/Select.php:764
Stack trace:
#0 /document_root/vendor/zendframework/zendframework/library/Zend/Db/Sql/Select.php(163): Zend\Db\Sql\Select->__get('tableReadOnly')
#1 /document_root/vendor/zendframework/zendframework/library/Zend/Db/Sql/Select.php(146): Zend\Db\Sql\Select->from('session')
#2 /document_root/vendor/zendframework/zendframework/library/Zend/Db/Sql/Sql.php(65): Zend\Db\Sql\Select->__construct('session')
#3 /document_root/vendor/zendframework/zendframework/library/Zend/Db/TableGateway/AbstractTableGateway.php(191): Zend\Db\Sql\Sql->select()
#4 /document_root/vendor/zendframework/zendframework/library/Zend/Session/SaveHandler/DbTableGateway.php(134): Zend\Db\TableGateway\AbstractTableGateway->select(Array)
#5 [internal function]: Zend\Session\SaveHandler\DbTableGateway->write(' in /document_root/vendor/zendframework/zendframework/library/Zend/Db/Sql/Select.php on line 764 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T09:59:43.653

**更新 ：**

zend framework >= 2.2，这个问题就没有了。

**旧答案：**

我在将会话存储到数据库时遇到了同样的问题，我在基本模块类中编写了 initDbSession 函数`\module\Application\Module.php`

```
class Module
{
    public function onBootstrap(MvcEvent $e)
    {
        $e->getApplication()->getServiceManager()->get('translator');
        $eventManager        = $e->getApplication()->getEventManager();
        $moduleRouteListener = new ModuleRouteListener();
        $moduleRouteListener->attach($eventManager);

        // session start from here
        $this->initDbSession( $e );

    }

    /** 
     * Store session into database
     * 
     * @param type $e
     */
    private function initDbSession( MvcEvent $e )
    {
        // grab the config array
        $serviceManager     = $e->getApplication()->getServiceManager();
        $config             = $serviceManager->get('config');

        $dbAdapter          = $serviceManager->get('Zend\Db\Adapter\Adapter');

        /* some how this not works for me 
        $sessionOptions = new \Zend\Session\SaveHandler\DbTableGatewayOptions( null );

        $sessionTableGateway = new \Zend\Db\TableGateway\TableGateway('session', $dbAdapter);
        $saveHandler = new \Zend\Session\SaveHandler\DbTableGateway($sessionTableGateway, $sessionOptions);

        */

        /* I written my own save handler , I am using mysql as database */
        $saveHandler   = new \My\Session\SaveHandler\Mysql( $config['db'] );

        $sessionConfig = new \Zend\Session\Config\SessionConfig();
        $sessionConfig->setOptions($config['session']);

        // pass the saveHandler to the sessionManager and start the session
        $sessionManager = new \Zend\Session\SessionManager( $sessionConfig , NULL, $saveHandler );
        $sessionManager->start();

        \Zend\Session\Container::setDefaultManager($sessionManager);

    }    

    // other function goes here ... 
```

这是我的配置文件，位于`\config\autoload\global.php`

```
return array(        
        'db' => array(
            'driver'         => 'Pdo',
            'dsn'            => 'mysql:dbname=zf2;host=localhost',
            'driver_options' => array(
                PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\'',
                'buffer_results' => true
            ),
            'username'       => 'root',
            'password'       => '',
            'host'           => 'localhost',
            'dbname'         => 'zf2',
        ),         
        'session' => array(
              'remember_me_seconds' => 2419200,
              'use_cookies'       => true,
              'cookie_httponly'   => true,
              'cookie_lifetime'   => 2419200,
              'gc_maxlifetime'    => 2419200,

        ),
        'service_manager' => array(
            'factories' => array(                
                'Zend\Db\Adapter\Adapter' => 'Zend\Db\Adapter\AdapterServiceFactory'
            )
        )
); 
```

Mysql表结构是

```
CREATE TABLE `session` (
`id` CHAR(32) NOT NULL DEFAULT '',
`name` VARCHAR(255) NOT NULL,
`modified` INT(11) NULL DEFAULT NULL,
`lifetime` INT(11) NULL DEFAULT NULL,
`data` TEXT NULL,
PRIMARY KEY (`id`)
)COLLATE='utf8_general_ci' ENGINE=InnoDB; 
```

下面给出了自定义 Mysql 保存处理程序类。我写了这门课，因为 new`Zend\Session\SaveHandler\DbTableGateway` 在我的服务器上不起作用。我的自定义 Mysql 会话保存处理程序类写在`\library\My\Session\SaveHandler\Mysql.php`

```
<?php

namespace My\Session\SaveHandler;

use Zend\Session\SaveHandler\SaveHandlerInterface;

/**
 * Description of Mysql
 *
 * @author rab
 */
class Mysql  implements SaveHandlerInterface 
{

    /**
     * Session Save Path
     *
     * @var string
     */
    protected $sessionSavePath;

    /**
     * Session Name
     *
     * @var string
     */
    protected $sessionName;

    /**
     * Lifetime
     * @var int
     */
    protected $lifetime;

    /**
     * Constructor
     *
     */
    public function __construct( $dbConfig )
    {

        $this->dbconn  = mysql_connect(
            $dbConfig['host'],
            $dbConfig['username'], 
            $dbConfig['password']
        );

        if ( $this->dbconn ) {
            return mysql_select_db($dbConfig['dbname'], $this->dbconn);
        }
    }

    /**
     * Open the session
     * 
     * @return bool
     */
    public function open( $savePath, $name )
    {
        $this->sessionSavePath = $savePath;
        $this->sessionName     = $name;
        $this->lifetime        = ini_get('session.gc_maxlifetime');

        return true;

    }

    /**
     * Close the session
     * 
     * @return bool
     */
    public function close() 
    {

        return mysql_close($this->dbconn);
    }

    /**
     * Read the session
     * 
     * @param int session id
     * @return string string of the sessoin
     */
    public function read($id) 
    {

            $id     = mysql_real_escape_string($id);

            $sql    = "SELECT `data` FROM `session` " .
                      "WHERE id = '$id'";

            if ( $result = mysql_query($sql, $this->dbconn)) {
                if ( mysql_num_rows($result) ) {
                    $record = mysql_fetch_assoc($result);
                    return $record['data'];
                }
            }

            return '';
    }

    /**
     * Write the session
     * 
     * @param int session id
     * @param string data of the session
     */
    public function write($id, $data ) 
    {

            $data   = (string) $data ;

            $dbdata = array(
                'modified' => time(),
                'data'     => mysql_real_escape_string( $data  ) ,
            );

            $selectSql = "SELECT * FROM session 
                          WHERE id = '$id' AND name = '{$this->sessionName}' ";

            $rs          = mysql_query( $selectSql, $this->dbconn );

            if ( $rs = mysql_query( $selectSql , $this->dbconn)) {
                if ( mysql_num_rows($rs) ) {

                    $updateSql = "UPDATE `session` SET 
                           `modified`= '".$dbdata['modified'] . "' ,
                           `data`= '".$dbdata['data']. "' 
                            WHERE id= '$id' AND name = '{$this->sessionName}' ";

                    mysql_query( $updateSql ,  $this->dbconn );
                    return true;

                }
            }

            $dbdata['lifetime']  = $this->lifetime;
            $dbdata['id']        = $id;
            $dbdata['name']      = $this->sessionName;

            $insertSql =  "INSERT INTO session (". implode(',' , array_keys($dbdata)) .")"
                           ."VALUES ('" . implode("','" , array_values( $dbdata )). "')";

            return mysql_query( $insertSql, $this->dbconn);

    }

    /**
     * Destoroy the session
     * 
     * @param int session id
     * @return bool
     */
    public function destroy($id) 
    {

            $sql = sprintf("DELETE FROM `session` WHERE `id` = '%s'", $id);
            return mysql_query($sql, $this->dbconn);
    }

    /**
     * Garbage Collector
     * 
     * @param int life time (sec.)
     * @return bool
     */
    public function gc( $maxlifetime ) 
    {

            $sql = sprintf("DELETE FROM `session` WHERE `modified` < '%s'",
                    mysql_real_escape_string(time() - $maxlifetime)
            );

            return mysql_query($sql, $this->dbconn);
    }

} 
```

它将我的会话值保存到 db table 中。有关更多信息，您可以查看[http://php.net/manual/en/function.session-set-save-handler.php](http://php.net/manual/en/function.session-set-save-handler.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T17:48:01.803

在最近对 ZF2 进行了所有修复之后，我的原始解决方案现在无需修改即可工作，但是我为任何想要使用它的人添加了一个新的 composer 模块，它减少了手动完成所有操作的需要。

安装详细信息在自述文件中：[https ://github.com/Nitecon/DBSessionStorage](https://github.com/Nitecon/DBSessionStorage)

如果您有任何问题，请尽情享受并告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T19:38:18.770

这是另一个类似的解决方案： [How to use cookie in Zend Framework 2?](https://stackoverflow.com/questions/12707532/ho-to-use-cookie-in-zend-framework-2)

确保更改此行：

```
Session::setDefaultManager($sessionManager); 
```

有了这个：

```
Container::setDefaultManager($sessionManager); 
```

使用：

```
use Zend\Session\Container; 
```

# perl - 从矩阵中的单元格中删除空格

> ID：13634494
> 
> 赞同：1
> 
> 时间：2012-11-29T20:51:08.110
> 
> 标签：perl, matrix, sed, awk, tr

我有一个数字矩阵（5800 行和 350 列）。每个细胞要么是

```
0 / 0
1 / 1
2 / 2 
```

删除每个单元格中所有空格的最快方法是什么：

```
0/0
1/1
2/2 
```

Sed，R，任何能最快完成它的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:57:28.877

使用 sed：

```
sed "s/ \/ /\//g" input.txt 
```

它的意思是：

> 用一个斜杠 ( )替换字符串`" / "`( ) 并全局执行 ( )。`/ \/ /``/\/``/g`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T21:22:13.740

这是一个`awk`完全一样的替代方案：

```
awk '{gsub(" ",""); print}' input.txt > output.txt 
```

**说明：**

*   `awk '{...}'`: 调用 awk，然后为每一行做用大括号括起来的东西。
*   `gsub(" ","");`：用空字符串替换所有空格字符（单个或多个连续）。
*   `print`：打印整行
*   `input.txt`: 将您的输入文件指定为 awk 的参数
*   `> output.txt`: 将输出重定向到文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T22:27:23.870

如果你想提高效率，你可能应该使用 coreutils tr 来完成这样一个简单的任务：

```
tr -d ' ' < infile 
```

我使用 GNU awk、GNU sed、perl v5.14.2 和 GNU coreutils v8.13 将发布的答案与 300K 文件进行了比较。每个测试运行 30 次，这是平均值：

```
awk  - 1.52s user 0.01s system 99% cpu 1.529 total
sed  - 0.89s user 0.00s system 99% cpu 0.900 total
perl - 0.59s user 0.00s system 98% cpu 0.600 total
tr   - 0.02s user 0.00s system 90% cpu 0.020 total 
```

所有的睾丸都按上述方式运行 ( `cmd < infile`) 并且输出定向到 /dev/null。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T22:29:50.590

perl 解决方案可能如下所示：

```
perl -pwe 'tr/ //d' input.txt > output.txt 
```

您可以添加`-i`开关以进行就地编辑。

# c - C Typedef - 不完整类型

> ID：13634495
> 
> 赞同：10
> 
> 时间：2012-11-29T20:51:12.477
> 
> 标签：c, struct, typedef, header-files, incomplete-type

因此，出乎意料的是，编译器决定当面吐槽：“字段客户的类型不完整”。

以下是相关的代码片段：

### 客户.c

```
#include <stdlib.h>
#include <string.h>

#include "customer.h"

struct CustomerStruct;
typedef struct CustomerStruct
{
    char id[8];
    char name[30];
    char surname[30];
    char address[100];
} Customer ;

/* Functions that deal with this struct here */ 
```

### 客户.h

customer.h 的头文件

```
#include <stdlib.h>
#include <string.h>

#ifndef CUSTOMER_H
#define CUSTOMER_H

    typedef struct CustomerStruct Customer;

    /* Function prototypes here */

#endif 
```

这就是我的问题所在：

### customer_list.c

```
#include <stdlib.h>
#include <string.h>

#include "customer.h"
#include "customer_list.h"

#include "..\utils\utils.h"

struct CustomerNodeStruct;
typedef struct CustomerNodeStruct
{
    Customer customer; /* Error Here*/
    struct CustomerNodeStruct *next;
}CustomerNode;

struct CustomerListStruct;
typedef struct CustomerListStruct
{
    CustomerNode *first;
    CustomerNode *last;
}CustomerList;

/* Functions that deal with the CustomerList struct here */ 
```

这个源文件有一个头文件 customer_list.h ，但我认为它不相关。

### 我的问题

在 customer_list.c 中，在注释行中`/* Error Here */`，编译器抱怨`field customer has incomplete type.`

我整天都在谷歌上搜索这个问题，现在我要拔出我的眼球并将它们与草莓混合。

这个错误的根源是什么？

提前致谢 ：）

[PS如果我忘了提什么，请告诉我。正如你所言，这对我来说是压力很大的一天]

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-29T20:53:25.427

将结构声明移动到标题：

```
customer.h
typedef struct CustomerStruct
{
...
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-29T20:55:30.407

在 C 中，编译器需要能够计算出直接引用的任何对象的大小。`sizeof(CustomerNode)`可以计算的唯一方法是编译器在构建时可以使用 Customer 的定义`customer_list.c`。

解决方案是将结构的定义从 移动`customer.c`到`customer.h`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-29T20:54:17.840

你所拥有的是`Customer`你试图实例化的结构的前向声明。这实际上是不允许的，因为编译器不知道结构布局，除非它看到它的定义。所以你要做的就是把你的定义从源文件移到头文件中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-04T15:51:08.757

似乎是这样的

```
typedef struct foo bar; 
```

没有标题中的定义将无法工作。但是像

```
typedef struct foo *baz; 
```

只要您不需要`baz->xxx`在标题中使用，就可以使用。

# ssis - SSIS 日期到字符串转换错误

> ID：13634497
> 
> 赞同：3
> 
> 时间：2012-11-29T20:51:15.190
> 
> 标签：ssis, type-conversion

我对 SSIS 很陌生，我遇到了一个问题，我在 OLE DB 源步骤中使用 sql 语句来提取我的数据，并且该数据包含 5 个需要转换的 DATETIME 字段和所有数据正在进入一个平面文件。

我正在像这样在 sql 中进行转换：

`REPLACE(CONVERT(VARCHAR(10), birthdate, 101), '/', '') AS 'Date of Birth (MMDDYYYY)`

在 SSIS 平面文件连接管理器中，我的 DataType 是字符串 [DT_STR]，我的 OutputColumnWidth 是 8。这在 SSIS 中工作而无需截断，因为上述转换创建了一个 8 个字符的 varchar。如果我尝试转换为 varchar(8)，它会截断 sql server management studio 中的数据。

我的问题是我的下一次转换尝试失败了。这是sql代码：

```
REPLACE(CONVERT(VARCHAR(10), exp_date, 103), '/', '') AS 'Expiration Date 
```

我收到以下错误：“由于可能丢失数据，无法转换该值”，即使所有内容都已使用相同的设置进行了复制。此转换将日期转换为 ' `DDMMYYYY`' 格式。

我从研究中知道这是一个数据转换错误，但我不知道如何解决它，尤其是在第一次转换正常工作的情况下。

有趣的是，当我将出错的行重定向到不同的平面文件时，日期被提取并转换，完全没有问题。

我在这里不知所措，希望该小组提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:56:45.937

我弄清楚为什么它不起作用。当我第一次创建包时，只转换了生日，因为我的注意力集中在不同的日期格式上。在我运行它并验证所有数据都被提取后，我意识到我还需要转换其他 4 个日期。问题是，即使我在 sql 和平面文件连接管理器中进行了更改，元数据仍然设置为这 4 个字段的原始设置。我重新创建了这一步，一切都正确转换了。感谢您花时间回复

# java - 自定义 FocusTraversalPolicy 类 Java Swing

> ID：13634502
> 
> 赞同：1
> 
> 时间：2012-11-29T20:51:34.133
> 
> 标签：java, tabs, focus, awt, jpanel

我正在为一个应用程序中的多个面板设置新的选项卡顺序。我想创建一个新类，它允许我以与不推荐使用的 setNextFocusableComponent 方法相同的方式处理排序。我正在创建一个扩展 DefaultTreversalPolicyClass 并重载 getComponentBefore 和 getComponentAfter 方法的类。在面板本身上，我希望实现与创建一个新的自定义类（我将其称为 CustomizedTabOrderPolicy）一样简单，然后添加我要为其指定 Tab 键顺序的组件。我通过 CustomizedTabOrderPolicy 类上的一种便捷方法来执行此操作，该方法允许我将要为其指定 Tab 键顺序“链接”的组件添加到 Hashtable，然后创建键和值在其中切换的 hastable 的副本。

以下是我的自定义类：

```
import java.awt.Component;
import java.awt.Container;
import java.awt.DefaultFocusTraversalPolicy;
import java.util.Hashtable;

public class CustomizedTabOrderPolicy extends DefaultFocusTraversalPolicy {

    private Hashtable<Component, Component> exceptionsMap = new Hashtable<Component, Component>();
    private Hashtable<Component, Component> excpetionsMapReflection = new Hashtable<Component, Component>();
    private Component defaultComponent;
    private Component firstComponent;
    private Component lastComponent;

    public CustomizedTabOrderPolicy() {
    }

    @Override
    public Component getComponentAfter(Container container, Component component) {
        java.awt.Toolkit.getDefaultToolkit().beep();
        if (exceptionsMap.containsKey(component)) {
            return exceptionsMap.get(component);
        } else {
            return super.getComponentAfter(container, component);
        }
    }

    @Override
    public Component getComponentBefore(Container container, Component component) {
        if (exceptionsMap.containsValue(component)) {
            return excpetionsMapReflection.get(component);
        } else {
            return super.getComponentBefore(container, component);
        }
    }

    @Override
    public Component getDefaultComponent(Container container) {
        if (this.defaultComponent != null) {
            return this.defaultComponent;
        }
        return super.getDefaultComponent(container);
    }

    @Override
    public Component getFirstComponent(Container container) {
        if (this.firstComponent != null) {
            return this.firstComponent;
        }
        return super.getFirstComponent(container);
    }

    @Override
    public Component getLastComponent(Container container) {
        if (this.lastComponent != null) {
            return this.lastComponent;
        }
        return super.getLastComponent(container);
    }

    public void addNewException(Component origin, Component destination) {
        exceptionsMap.put(origin, destination);
        excpetionsMapReflection.put(destination, origin);
    }
    public void setDefaultComponent(Component defaultComponent) {
        this.defaultComponent = defaultComponent;
    }

    public void setLastComponent(Component lastComponent) {
        this.lastComponent = lastComponent;
    }

    public void setFirstComponent(Component firstComponent) {
        this.firstComponent = firstComponent;
    }
} 
```

为了实现这一点，我在我的 JPanel 上使用以下内容：

```
CustomizedTabOrderPolicy customPolicy = new CustomizedTabOrderPolicy();

customPolicy.addNewException(<component1>, <component2>);
customPolicy.addNewException(<component3>, <component4>);
customPolicy.addNewException(<component5>, <component6>);

this.setFocusTraversalPolicy(customPolicy); 
```

我没有收到任何编译器或运行时错误，但 JPanel 似乎根本没有使用我的 CustomTabOrderPolicy。当我在 getComponentBefore 和 getComponentAfter 方法中插入断点时，它们永远不会被触发。我对使用焦点遍历策略非常陌生，所以我想知道我在这里缺少什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:38:48.890

好的，所以我应该做的是继承 FocusTraversalPolicy 而不是 DefaultFocusTraversalPolicy 并传入原始策略的副本以在没有“异常”时恢复。我还需要在面板上将 FocusCycleRoot 设置为 true，以便它使用我的 FocusTraversalPolicy。我现在已经设置好了，这样我就有了我的 AbstractJPanel 基类上的 CustomizedTabOrderPolicy 实例，所以我需要在面板初始化中调用是这样的：

```
 this.setTabOrderEnabled(true);
    this.getCustomTabOrder().addNewException(component1, component2);
    this.getCustomTabOrder().addNewException(component2, component3);
    this.getCustomTabOrder().addNewException(component3, component4); 
```

我还对课程本身进行了一些更改以使其更有效。

```
public class CustomizedTabOrderPolicy extends FocusTraversalPolicy {

    private FocusTraversalPolicy oldPolicy;
    private Hashtable<Component, Component> exceptionsMap = new Hashtable<Component, Component>();
    private Hashtable<Component, Component> exceptionsMapReflection = new Hashtable<Component, Component>();
    private Component defaultComponent;
    private Component firstComponent;
    private Component lastComponent;

    public CustomizedTabOrderPolicy(FocusTraversalPolicy oldPolicy) {
        this.oldPolicy = oldPolicy;
    }

    public Component getComponentAfter(Container container, Component component) {
        if (component == this.getLastComponent(container)) {
            if (isValid(this.getFirstComponent(container))) {
                return this.getFirstComponent(container);
            } else {
                return this.getComponentAfter(container, this.getFirstComponent(container));
            }
        }
        if (exceptionsMap.containsKey(component) && isValid(exceptionsMap.get(component))) {
            return exceptionsMap.get(component);
        } else {
            return oldPolicy.getComponentAfter(container, component);
        }
    }

    public Component getComponentBefore(Container container, Component component) {
        if (component == this.getFirstComponent(container)) {
            if (isValid(this.getLastComponent(container))) {
                return this.getLastComponent(container);
            } else {
                return this.getComponentBefore(container, this.getLastComponent(container));
            }
        }
        if (exceptionsMapReflection.containsKey(component) && isValid(exceptionsMapReflection.get(component))) {
            return exceptionsMapReflection.get(component);
        } else {
            return oldPolicy.getComponentBefore(container, component);
        }
    }

    public boolean isValid(Component component) {
        if (component.isEnabled() && component.isVisible() && component.isFocusable()) {
            return true;
        } else {
            return false;
        }
    }
    public Component getDefaultComponent(Container container) {
        if (this.defaultComponent != null) {
            return this.defaultComponent;
        }
        return oldPolicy.getDefaultComponent(container);
    }

    public Component getFirstComponent(Container container) {
        if (this.firstComponent != null) {
            return this.firstComponent;
        }
        return oldPolicy.getFirstComponent(container);
    }

    public Component getLastComponent(Container container) {
        if (this.lastComponent != null) {
            return this.lastComponent;
        } else {
            return oldPolicy.getLastComponent(container);
        }
    }

    public void addNewException(Component origin, Component destination) {
        exceptionsMap.put(origin, destination);
        exceptionsMapReflection.put(destination, origin);
    }
    public void setDefaultComponent(Component defaultComponent) {
        this.defaultComponent = defaultComponent;
    }

    public void setLastComponent(Component lastComponent) {
        this.lastComponent = lastComponent;
    }

    public void setFirstComponent(Component firstComponent) {
        this.firstComponent = firstComponent;
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-11T11:14:21.137

高效的！我使用它稍作修改，让它在不是 isValid() 时继续遍历（当然它应该在您的面板中至少有一个 isValid() 组件）：

```
public Component getComponentAfter(Container container, Component component) {
    if (component == this.getLastComponent(container)) {
        if (isValid(this.getFirstComponent(container))) return this.getFirstComponent(container);
        else                                            return this.getComponentAfter(container, this.getFirstComponent(container));
    }
    if( exceptionsMap.containsKey(component) ) {
        component = exceptionsMap.get(component);
        if( isValid(component) ) return component;
        return this.getComponentAfter(container, component);
    }
    return oldPolicy.getComponentAfter(container, component);
}
public Component getComponentBefore(Container container, Component component) {
    if (component == this.getFirstComponent(container)) {
        if (isValid(this.getLastComponent(container))) return this.getLastComponent(container);
        else                                           return this.getComponentBefore(container, this.getLastComponent(container));
    }
    if( exceptionsMapReflection.containsKey(component) ) {
        component = exceptionsMapReflection.get(component);
        if( isValid(component) ) return component;
        return this.getComponentBefore(container, component);
    }
    return oldPolicy.getComponentBefore(container, component);
} 
```

# c++ - 将 std::vector 分配给 std::valarray

> ID：13634504
> 
> 赞同：9
> 
> 时间：2012-11-29T20:51:41.900
> 
> 标签：c++, c++11, variable-assignment, std, valarray

我有一个`vector<vector<double>`, 所以一个值的表（矩阵）。列包含行星的位置和速度，因此行存储同一行星的数据。我想在 a 中转换一行，`valarray`因为我需要数学运算。然后我想将 valarrays（行星）存储在一个向量中。我试过这样：

```
vector<vector<double>> corps_tmp=configFile.get_corps(); // The function returns a vector<vector<double>>

    valarray<double> corpX;
    for (int i(0); i < corps_tmp.size(); i++) {
        corpX = corps_tmp[i]; // I want to save the first row of the vector<vector<double>> on the valarray
        corps.push_back(corpX); // I want to ''add'' the valarray to a vector.
        corpX = 0;
    } 
```

此代码不起作用，并且我在将向量分配给 valarray 时遇到错误（显然不允许）。

有什么方法可以以简单的方式实现我尝试做的事情吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-29T21:28:14.547

要从向量创建 valarray：

```
std::valarray<double> corpX(corps_tmp[i].data(), corps_tmp[i].size()); 
```

要将数据写回向量：

```
corps_tmp[i].assign(std::begin(corpX), std::end(corpX)); 
```

# twitter-bootstrap - 是否有人实现了仅在给定 div 中有效的 twitter-bootstrap 词缀？

> ID：13634508
> 
> 赞同：5
> 
> 时间：2012-11-29T20:52:11.710
> 
> 标签：twitter-bootstrap

我正在尝试整合一些代码并尽量减少我们当前使用的自定义 javascript 和 jquery 插件的数量。

我们目前拥有的一个页面有一个类似于这样的网格：

```
+--------------------+
|                    |
+--------------+-----+
|              | [A] |
|              |     |
|              |     |
|              |     |
+---------+----+-----+
|         |          |
+---------+----------+ 
```

我们需要 div [A] 在它通过后“附加”到屏幕顶部 - 但永远不要超过它的容器 div。这种行为在粘性侧边栏上似乎相当普遍。

在我去尝试重新发明轮子之前 - 我想我会在这里问是否有人已经用 Bootstrap 实现了这个。有一些 jQuery 插件可以做到这一点——但我已经加载了 Bootstrap，我希望我只是最小化加载时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T19:04:08.733

我放弃了 twitter-bootstrap 解决方案，并使用了我能找到的最小 + 最强大的 jquery 插件。

jQuery ScrollToFixed = 3,941 字节时缩小[https://github.com/bigspotteddog/ScrollToFixed](https://github.com/bigspotteddog/ScrollToFixed)

我的实现如下：

缓存到站点 .js 文件中：

```
function scrollwithin( scroller , marginTop ) {
    marginTop = typeof marginTop !== 'undefined' ? marginTop : 10;
    var scrollmax = $( '#' + scroller.attr('data-scrollmax') );
    scroller.scrollToFixed({
        marginTop: marginTop  ,
        limit: ( ( scrollmax.offset().top + scrollmax.outerHeight() ) - scroller.outerHeight() )
    });
}; 
```

根据需要我打电话：

```
<div>
   <div id="a">
       <div id="a-scrollwithin">Long Column</div>
       <div id="a-scroller" data-scrollwithin="a-scrollwithin">Scrolling element</div>
   </div>
</div>
<script>
    $(document).ready(function() {
        scrollwithin($('#a-scroller'),10);
    }
<script> 
```

# javascript - 如何使用按钮重新加载 YUI ScrollView 的内容？

> ID：13634510
> 
> 赞同：1
> 
> 时间：2012-11-29T20:52:33.187
> 
> 标签：javascript, scrollview, yui

我想以类似于如何通过重新加载 YUI DataTable 的方式重新加载 YUI ScrollView 的内容

```
myDataTable.showTableMessage("Loading...");
myDataTable.getDataSource().sendRequest('', { success:  myDataTable.onDataReturnInitializeTable, scope: myDataTable }); 
```

（摘自[How can I refresh a YUI dataTable with a button?](https://stackoverflow.com/questions/612585/how-can-i-refresh-a-yui-datatable-with-a-button)）

是否有类似的机制来重新加载 YUI ScrollView？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:07:30.770

Not directly, however you could use the node io plugin to reload the contents of the scroll view based on a timer or a user action. Something like this.

```
Y.one('content-node-selector').load('url', 'selector', function(){
//do something if needed
scrollView.syncUI();
}); 
```

Or you could just get the contentBox attribute and set the content that way (calling syncUI and handling any scroll changes you may need to make

Info on [load](http://yuilibrary.com/yui/docs/api/classes/Node.html#method_load) Info on contentBox [inherited from widget](http://yuilibrary.com/yui/docs/api/classes/Widget.html#attr_contentBox)

# php - PHPMailer 不发送电子邮件 - 我错过了一些简单的东西吗？

> ID：13634513
> 
> 赞同：0
> 
> 时间：2012-11-29T20:52:40.737
> 
> 标签：php, html-email, phpmailer, ob-start

我正在使用[PHPMailer](http://phpmailer.worxware.com/index.php?pg=phpmailer)发送 HTML 电子邮件。在第一次调用`ob_start`.

这是我的代码：

```
<?php

ob_start();
?>

..... a bunch of VALID HTML

<?
$body = ob_get_contents();

require_once('class.phpmailer.php');

// Send to Me
$mail = new PHPMailer(true); // the true param means it will throw exceptions on errors, which we need to catch
$mail->IsSendmail(); // telling the class to use SendMail transport

try {
    $mail->AddReplyTo('info@example.com', 'Company Name');
    $mail->AddAddress('me@example.com', 'My Name');
    $mail->SetFrom('info@example.com', 'Company Name');
    $mail->Subject  =  "Contact Form Confirmation";
    $mail->AltBody    = "This is a contact form submitted through the main website.";
    $mail->WordWrap   =  50; // set word wrap   
    $mail->Body = $body;
    $mail->IsHTML(true); // send as HTML

    $mail->Send(); // Try to send email

    } catch (phpmailerException $e) {
        echo $e->errorMessage(); //Pretty error messages from PHPMailer
    } catch (Exception $e) {
        echo $e->getMessage(); //Boring error messages from anything else!
}
// end try 
```

出于某种原因，这一行：

```
$mail->Body = $body; 
```

导致电子邮件无法发送。如果我将其替换为：

```
$mail->Body = "This is a test email."; 
```

电子邮件发送完美。

如果我包含的 HTML`$body`只是一个有效的 HTML 页面，头部带有 CSS，没有 Javascript 或任何东西，为什么电子邮件不会发送？

还有另一种方法可以做到这一点吗？请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:07:26.397

事实证明，由于某种原因，如果电子邮件包含传真号码，则不会发送。完全奇怪。我测试了我的整个标记，只删除了一个 10 位数的电话号码后，电子邮件终于通过了。我不是新手 - 从字面上看，这是我删除的唯一文本并且电子邮件发送良好。

有没有人见过这个？？

# python - Python 2.7.3 内存错误

> ID：13634521
> 
> 赞同：2
> 
> 时间：2012-11-29T20:53:15.267
> 
> 标签：python

我有一个使用 python 代码的特定案例。每次我运行代码时，RAM 内存都会增加，直到达到 1.8 GB 并崩溃。

```
import itertools
import csv
import pokersleuth

cards = ['2s',  '3s',   '4s',   '5s',   '6s',   '7s',   '8s',   '9s',   'Ts',   'Js',   'Qs',   'Ks',   'As',   '2h',   '3h',   '4h',   '5h',   '6h',   '7h',   '8h',   '9h',   'Th',   'Jh',   'Qh',   'Kh',   'Ah',   '2c',   '3c',   '4c',   '5c',   '6c',   '7c',   '8c',   '9c',   'Tc',   'Jc',   'Qc',   'Kc',   'Ac',   '2d',   '3d',   '4d',   '5d',   '6d',   '7d',   '8d',   '9d',   'Td',   'Jd',   'Qd',   'Kd',   'Ad']
flop = itertools.combinations(cards,3)

a1 = 'Ks' ; a2 = 'Qs'
b1 = 'Jc' ; b2 = 'Jd'

cards1 = a1+a2
cards2 = b1+b2

number = 0
n=0
m=0

for row1 in flop:
    if (row1[0] <> a1 and row1[0] <>a2 and row1[0] <>b1 and row1[0] <>b2) and (row1[1] <> a1 and row1[1] <>a2 and row1[1] <>b1 and row1[1] <>b2) and (row1[2] <> a1 and row1[2] <> a2 and row1[2] <> b1 and row1[2] <> b2):
        for row2 in cards:
            if (row2 <> a1 and row2 <> a2 and row2 <> b1 and row2 <> b2 and row2 <> row1[0] and row2 <> row1[1] and row2 <> row1[2]):
                s = pokersleuth.compute_equity(row1[0]+row1[1]+row1[2]+row2, (cards1, cards2))
                if s[0]>=0.5:
                    number +=1
                    del s[:]
                del s[:]

        print number/45.0
        number = 0
        n+=1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T04:55:01.913

我发生内存泄漏的测试尚无定论，但假设它没有发生在 montecarlo.dll 中，我想我会尝试`multiprocessing.Pool()`将工作分成更小的块，然后将它们加载到一些我可以在之前终止的进程中他们开始使用过多的内存：

```
from itertools import combinations, product, islice
from multiprocessing import Pool
from pokersleuth import compute_equity

num_procs = 4
num_jobs = 256
chunk_size = num_procs * num_jobs

join = ''.join

drawn = a1, a2, b1, b2 = 'Ks', 'Qs', 'Jc', 'Jd'
pairs = (a1 + a2, b1 + b2)

deck = (join(reversed(c)) for c in product('shcd', '23456789TJQKA'))
deck = [card for card in deck if card not in drawn]

def compute_chances(cards):
    return sum(compute_equity(cards + card, pairs)[0] >= 0.5
               for card in deck if card not in cards) / 45.0

if __name__ == '__main__':
    combis = (join(each) for each in combinations(deck, 3))
    i = 0
    while True:
        pool = Pool(processes=num_procs)
        chunk = list(islice(combis, chunk_size))
        for i, chances in enumerate(pool.imap(compute_chances, chunk), i + 1):
            print i, chances
        pool.terminate()
        if len(chunk) < chunk_size:
            break 
```

结果与您的程序中的结果相同。

`chunk_size`以下是任务管理器关于 17 的最后 7 个循环（17296 与1024的组合）的内存消耗的说明：

![10 个循环](../Images/cc0156853d8037af39baa42063b3cd23.png)

每个循环使用大约 400 MB，处理所有组合需要 34 分钟。

我没有手动输入一整副卡片，而是让计算机为我创建它。我拒绝做电脑能做的事情。

为了使传递给每个进程的数据量尽可能少，我只将三张卡的每个组合发送到`compute_chances()`并在那里计算其他所有内容。

如果 montecarlo.dll 是可重入的，我不确定，但结果似乎表明它是可重入的。

`num_procs`我的代码中的和的值`num_jobs`在我的机器上运行良好。您应该与他们一起玩，以找到适合您的最佳设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T21:00:31.533

您在~~Linux 上运行（对吗？），并且您正在达到系统上的最大进程映像大小，因为 linux 上的进程无法减小其内存大小。~~视窗。

您的选择是将其拆分，以便它可以在达到内存限制、编译具有更高进程大小限制的内核~~或在 windows 上运行~~后恢复。

# background-image - 如何做一个在css中生成网格的.less mixin？

> ID：13634523
> 
> 赞同：1
> 
> 时间：2012-11-29T20:53:23.633
> 
> 标签：background-image, less, background-position

我想以 .cX.rY 选择器的形式为 10 x 10 之类的网格生成一个 css 选择器矩阵。但我不知道如何才能少做这件事（我对 .less 很陌生） . 我也在使用 DotLess，所以也许有一些内置的限制；在这方面我不确定。

```
@col-width: -24px;
@row-width: -24px;

.img-pos(@col, @row) {
    background-position:
       (((@col - 1) * @col-width) - 1)
       (((@row - 1) * @row-width) - 1);
}

.c2.r1 { .img-pos(2, 1); }
.c2.r2 { .img-pos(2, 2); }
.c2.r3 { .img-pos(2, 3); }
.c2.r4 { .img-pos(2, 4); }
.c2.r5 { .img-pos(2, 5); }
.c2.r6 { .img-pos(2, 6); }
.c2.r7 { .img-pos(2, 7); }
...

...
.cX.rY { .img-pos(2, 7); } 
```

这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:33:05.590

这是一些代码，允许您设置最大列和行，以及可选地设置起始列和行号（默认值：1），并可选地为它们设置类指示符（默认为“c”和“r”） . 它使用 LESS 中的循环技术来自动生成代码。

**更少的代码**

```
@col-width: -24px;
@row-width: -24px;

.img-pos(@col, @row) {
    background-position:
       (((@col - 1) * @col-width) - 1)
       (((@row - 1) * @row-width) - 1);
}

.generateGridSelectors(@maxCols, @maxRows, @colStart: 1, @rowStart: 1, @colSel: "c", @rowSel: "r") when (@maxCols > 0) and (@colStart < @maxCols) and (@maxRows > 0) and (@rowStart < @maxRows) {

   @colStop: @maxCols + 1;
   @rowStop: @maxRows + 1;

   .makeGrid(@c: @colStart) when (@c < (@maxCols + 1)) {

     .setRow(@r: @rowStart) when (@r < (@maxRows + 1)) {     

     //generate selector and position
     (~".@{colSel}@{c}.@{rowSel}@{r}") {
     .img-pos(@c, @r);
     }

     //interate next row
     .setRow(@r + 1);
   }
     //end row loop
     .setRow(@rowStop) {}

     //start row loop
     .setRow();

     //iterate next column
     .makeGrid(@c + 1);

   }
   //end column loop
   .makeGrid(@colStop) {}

   //start grid loops
   .makeGrid();
} //end generateGridSelectors

//call your build (not sure how well it will handle real large numbers)
.generateGridSelectors(10, 10); 
```

**CSS 输出**

```
.c1.r1 {
  background-position: -1px -1px;
}
.c1.r2 {
  background-position: -1px -25px;
}
.c1.r3 {
  background-position: -1px -49px;
}
...
...
.c10.r8 {
  background-position: -217px -169px;
}
.c10.r9 {
  background-position: -217px -193px;
}
.c10.r10 {
  background-position: -217px -217px;
} 
```

# html - Firefox Webm 视频仅在搜索时播放

> ID：13634531
> 
> 赞同：0
> 
> 时间：2012-11-29T20:53:54.350
> 
> 标签：html, firefox, webm

Firefox 的奇怪之处。该视频仅在约 6 秒后被搜索时才会播放

[http://www.wealthplanning.tv/media/videos/introduction.webm](http://www.wealthplanning.tv/media/videos/introduction.webm)

html 链接也在这里 [http://wealthplanning.tv/media/videos/test.html](http://wealthplanning.tv/media/videos/test.html)

在 Chrome 中运行良好，甚至在视频标签内运行。

有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:20:04.863

似乎这是一个编码问题。最初使用 Miro，但尝试使用 XMedia Recode 代替并解决了它。

# yui - 如何将仪表板修改为自动刷新？

> ID：13634534
> 
> 赞同：2
> 
> 时间：2012-11-29T20:54:15.873
> 
> 标签：yui, alfresco, alfresco-share, dashlet

有没有一种简单的方法来修改 dashlet 以定期自动重新加载自身？

我特别想到了“我的任务”dashlet - 我们正在使用汇总审核工作流程，因此任务可能会在创建然后被声明时一直来来去去。

用户可能会感到沮丧，因为他们一直点击结果已经被认领的任务 - 或者不得不记住不断重新加载他们的仪表板页面。我更希望仪表板按时间间隔刷新，因此它始终是最新的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T20:04:33.587

为此，您需要向文件中的客户端类`Alfresco.dashlet.MyTasks`（[文档](http://sharextras.org/jsdoc/share/community-4.2.b/symbols/Alfresco.dashlet.MyTasks.html)、[源代码](http://sharextras.org/jsdoc/share/community-4.2.b/symbols/src/components_dashlets_my-tasks.js.html)）添加新功能`components/dashlets/my-tasks.get.js`。首先，您需要向指定为 中的第二个参数的原型扩展添加一个新方法`YAHOO.lang.augmentObject() call`，例如

```
 ...
      }, // end of last OOTB function - add a comment here

      // begin changes
      reloadData: function MyTasks_onReady()
      {
         this.widgets.alfrescoDataTable.loadDataTable(
            this.options.filters[this.widgets.filterMenuButton.value]
         );
      }
      // end changes
   });
})(); 
```

这不是理想的开发环境，您可以直接在 Share webapp 中修改 JS 文件，尽管您还需要更新相应的`-min.js`文件。

完成此操作后，通过在浏览器的 JavaScript 控制台中运行以下行来检查它是否有效

```
Alfresco.util.ComponentManager.findFirst("Alfresco.dashlet.MyTasks").reloadData(); 
```

如果可行，那么您可以在 dashlet Web 脚本中将您的新方法连接到标题栏操作（有关更多背景信息，请参阅我的[DevCon 演示文稿）。](https://devcon.alfresco.com/sanjose/sessions/develop-great-dashlets)该方法取决于您使用的是 v4.2 还是以前的版本，但如果是后者，则需要在 dashlet 的 Freemarker 文件中添加一些代码`my-tasks.get.html.ftl`（在 下`WEB-INF/classes/alfresco/site-webscripts/org/alfresco/components/dashlets`）。

在该文件中，您应该会在标签中看到一些 JavaScript 代码`<script>`，这会设置客户端类和一些实用程序类的实例，您可以将其内容**替换**为以下内容，以添加您的自定义标题栏操作。

```
(function()
{
   var dashlet = new Alfresco.dashlet.MyTasks("${jsid}").setOptions(
   {
      hiddenTaskTypes: [<#list hiddenTaskTypes as type>"${type}"<#if type_has_next>, </#if></#list>],
      maxItems: ${maxItems!"50"},
      filters:
      {<#list filters as filter>
         "${filter.type?js_string}": "${filter.parameters?js_string}"<#if filter_has_next>,</#if>
      </#list>}
   }).setMessages(${messages});
   new Alfresco.widget.DashletResizer("${id}", "${instance.object.id}");
   var refreshDashletEvent = new YAHOO.util.CustomEvent("onDashletRefresh");
   refreshDashletEvent.subscribe(dashlet.reloadData, dashlet, true);
   new Alfresco.widget.DashletTitleBarActions("${args.htmlid}").setOptions(
   {
      actions:
      [
         {
            cssClass: "refresh",
            eventOnClick: refreshDashletEvent,
            tooltip: "${msg("dashlet.refresh.tooltip")?js_string}"
         },
         {
            cssClass: "help",
            bubbleOnClick:
            {
               message: "${msg("dashlet.help")?js_string}"
            },
            tooltip: "${msg("dashlet.help.tooltip")?js_string}"
         }
      ]
   });
})(); 
```

您需要为指定的类名添加一些样式，在 dashlet 的 CSS 文件`my-tasks.css`中，例如以下

```
.my-tasks .titleBarActions .refresh
{
    display: none;
    background-image: url('refresh-icon.png');
} 
```

图标文件（[这里是](http://share-extras.googlecode.com/svn/trunk/Train%20Times%20Dashlet/source/web/components/dashlets/warning-icon.png)您可以重复使用的）必须与 CSS 文件位于同一目录中。

最后，您需要定义`dashlet.refresh.tooltop`用于标题栏操作工具提示的标签。您可以在 dashlet Web 脚本的`.properties`文件中执行此操作。

对于类似的示例，请查看我的[Train Times dashlet](http://code.google.com/p/share-extras/wiki/TrainTimesDashlet)的源代码，它具有刷新标题栏操作。

在某些方面，实际上定义自己的 dashlet 比扩展 Alfresco 提供的 dashlet 更容易，但如果您可以选择使用 4.2.x，新方法允许您扩展现有组件而无需复制任何代码，这显然使升级更容易。

# video - 如何在不使用其他 libav 库的情况下使用 libavformat？

> ID：13634539
> 
> 赞同：4
> 
> 时间：2012-11-29T20:54:41.357
> 
> 标签：video, ffmpeg, libavformat, muxer

我想要一个简单的工作示例，仅使用 libavformat 来复用视频。有很好的示例（[doc/examples/muxing.c](http://ffmpeg.org/doxygen/trunk/muxing_8c-source.html)）显示了使用 libavcodec 进行编码、使用 libavformat 进行复用以及使用 libavio 保存数据。但是，我所知道的没有一个例子是单独使用 libavformat，在缓冲区中输入编码数据并在缓冲区中获取混合数据。

困难有两方面：一是添加流 with`avformat_new_stream(AVFormatContext *s, const AVCodec *c)`需要对编解码器的引用；第二，muxing 的输出被传递给`AVFormatContext->pb`which 是一个`AVIOContext*`. 因此，似乎没有（明显的）方法可以将 libavformat 从其他 libav 库中解脱出来。

另请参阅：这个问题提到了一种不使用 libavio 的方法：[Get TS packet into buffer from libavformat](https://stackoverflow.com/questions/10579719/get-ts-packets-into-buffer-from-libavformat)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T09:36:04.360

您可以避免对 libavcodec 库的依赖，但您需要头文件（例如，avcodec.h）。

方案如下：

```
AVOutputFormat * oFmt= ::av_guess_format("mp4", NULL, NULL);
AVFormatContext *oFmtCtx = NULL;
::avformat_alloc_output_context2(&oFmtCtx, oFmt, NULL, NULL);
AVStream * oStrm = ::avformat_new_stream(oFmtCtx, NULL);
AVCodecContext * strmCodec = oFmtCtx->streams[0]->codec;

// Fill the required properties for codec context.
// *from the documentation:
// *The user sets codec information, the muxer writes it to the output.
// *Mandatory fields as specified in AVCodecContext
// *documentation must be set even if this AVCodecContext is
// *not actually used for encoding.
my_tune_codec(strmCodec); 

if (oFmtCtx->oformat->flags & AVFMT_NOFILE)
{
  ::avio_open2(&oFmtCtx->pb, fileName, AVIO_FLAG_WRITE, NULL, NULL);
}
::avformat_write_header(oFmtCtx, NULL);
// .....
// writing loop
// .....
::av_write_trailer(oFmtCtx);
::avio_close(oFmtCtx->pb);
::avformat_free_context(oFmtCtx); 
```

要获得输出，您始终必须使用`AVIOContext`. 您可以避免使用内置协议。为此，您需要创建自己的`AVIOContext`( `::avio_alloc_context`)。

**UPD** 要创建你自己的`AVIOContext`，你必须做这样的事情

```
#include <stdio.h>
extern "C" {
#include <libavformat/avio.h>
#include <libavformat/avformat.h>
}

static const int kBufferSize = 32768;

class my_iocontext_private
{
public:
    my_iocontext_private(FILE * f) : buffer_size_(kBufferSize),
        buffer_(static_cast<unsigned char*>(::av_malloc(buffer_size_))), f_(f) {
        ctx_ = ::avio_alloc_context(buffer_, buffer_size_, AVIO_FLAG_WRITE, this, 
            &my_iocontext_private::read, &my_iocontext_private::write, &my_iocontext_private::seek);
    }

    ~my_iocontext_private()    { av_free(buffer_); }

    static int read(void *opaque, unsigned char *buf, int buf_size) {
        my_iocontext_private* h = static_cast<my_iocontext_private*>(opaque);
        return fread(buf, 1, buf_size, h->f_);
    }

    static int write(void *opaque, unsigned char *buf, int buf_size) {
        my_iocontext_private* h = static_cast<my_iocontext_private*>(opaque);
        return fwrite(buf, 1, buf_size, h->f_);
    }

    static int64_t seek(void *opaque, int64_t offset, int whence) {
        my_iocontext_private* h = static_cast<my_iocontext_private*>(opaque);

        // use lseeki64 instead of fseek
        return fseek(h->f_, static_cast<long>(offset), whence);        
    }
    ::AVIOContext *get_avio() { return ctx_; }

private:
    int buffer_size_;
    unsigned char * buffer_;  
    FILE * f_;
    ::AVIOContext * ctx_;
};

int main(int argc, char* argv[])
{
    FILE * f = fopen("myfile.dmp", "wb");    
    my_iocontext_private priv_ctx(f); 

    AVFormatContext * ctx = ::avformat_alloc_context();
    ctx->pb = priv_ctx.get_avio();

    /// using ctx

    fclose(f); 
    return 0;
} 
```

# bash - 在 WinSCP 中显示日期

> ID：13634541
> 
> 赞同：2
> 
> 时间：2012-11-29T20:54:49.407
> 
> 标签：bash, date, winscp

我正在寻找一种在 WinSCP 控制台中打印客户端或服务器日期的方法。
( `C:\Program Files (x86)\WinSCP\WinSCP.com`)

这是行不通的。

```
winscp> echo $date 
```

有什么办法可以格式化日期？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-13T18:06:54.897

您可以使用[WinSCP`%TIMESTAMP%`语法](https://winscp.net/eng/docs/scripting#timestamp)来打印当前的*本地*日期/时间：

```
echo %TIMESTAMP#yyyy-dd-mm hh:nn:ss% 
```

以上将为您提供：

```
2017-30-05 11:41:28 
```

* * *

使用 SCP（以及通过回调到 SCP 的 SFTP），您可以使用[WinSCP`call`命令](https://winscp.net/eng/docs/scriptcommand_call)在服务器上执行`date`命令以打印*远程*时间：

```
call date 
```

显然，这假设远程系统理解`date`命令（大多数人会这样做）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T01:18:46.513

假设你得到类似 FTP 的命令（当你在控制台输入“帮助”时你会得到什么），我猜想：

```
!date 
```

# ruby-on-rails - Rails：未定义的方法映射，在模型中使用映射

> ID：13634542
> 
> 赞同：0
> 
> 时间：2012-11-29T20:54:52.880
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试制作一组​​项目以`options_for_select`在我的模型中使用地图：

```
 def get_products
    Product.all.map { |product| [product.description,product.id] }
  end 
```

但是rails给出了错误：

> :get_products:Symbol 的未定义方法“map”

不能在模型内使用地图吗？

中的代码`view`是：

```
<%= f.select_tag :product_id, options_for_select(:get_products) %> 
```

**更新**

将视图中的代码更改为`get_products`而不是`:get_products`给出错误：

> #<#:0xb189c770> 的未定义局部变量或方法“get_products”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T21:06:19.210

`options_for_select`期望传入一个集合而不是一个符号。我相当确定您的错误来自 Rails 代码内部，而不是您的模型。

改为`#get_products`类方法：

```
def self.get_products
  Product.all.map { |product| [product.description,product.id] }
end 
```

然后在视图中（假设`#get_products`生活在一个名为 的模型中`Product`）：

```
<%= f.select :product_id, options_for_select(Product.get_products) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T21:06:58.347

它应该是这样的

`<%= f.select_tag :product_id, options_for_select(Product.get_products) %>`

# c - 没有 malloc 的内存泄漏

> ID：13634545
> 
> 赞同：-7
> 
> 时间：2012-11-29T20:55:09.020
> 
> 标签：c, linux, memory-management, memory-leaks

我写了一个程序，但是我发现它有内存泄漏，经过几次迭代后，它出现了段错误。我不明白这个内存泄漏在哪里。

下面是整个代码片段。我知道代码存在常规错误，例如全局分配和制作比需要大得多的缓冲区。我只是看不到泄漏的来源。

提前致谢。

```
#include <stdlib.h>
#include <stdio.h>

#define DATA 1000
#define TRUE 1
#define FALSE 0
const int16_t TIME = 600; // Time in seconds.
const int8_t DEBUG = 0;
// Globals Because I'm lazy!
long int cpua[5];
long int cpub[5];
long int mema[2];
long int nets[2];
long int netr[2];
int k=0;
char ch[150];
FILE *file_read;
char buffer[DATA];

void CPUread(void){
    file_read = popen("cat /proc/stat | grep \"cpu \"","r");
    fgets(buffer, DATA, file_read);
    sscanf(buffer,"%s %ld %ld %ld %ld %ld",&ch[0],&cpua[0],&cpua[1],&cpua[2],&cpua[3],&cpua[4]);

    // Time to read the network..
    file_read = popen("ifconfig | grep -m 1 \"RX bytes:\" | awk -F \"[^0-9]*\" '{ print $2 }'","r");
    fgets(buffer, DATA, file_read);
    sscanf(buffer,"%ld",&netr[0]);
    file_read = popen("ifconfig | grep -m 1 \"RX bytes:\" | awk -F \"[^0-9]*\" '{ print $5 }'","r");
    fgets(buffer, DATA, file_read);
    sscanf(buffer,"%ld",&nets[0]);

    // Time to read memory
    file_read = popen("cat /proc/meminfo | grep -m 1 \"MemFree\" | awk -F \"[^0-9]*\" '{ print $2 }'","r");
    fgets(buffer, DATA, file_read);
    sscanf(buffer,"%ld",&mema[0]);

    file_read = popen("cat /proc/meminfo | grep -m 1 \"MemTotal\" | awk -F \"[^0-9]*\" '{ print $2 }'","r");
    fgets(buffer, DATA, file_read);
    sscanf(buffer,"%ld",&mema[1]);
}

void main(void){
    FILE *file_write, *fp;
    int i;
    long int total=0, ptotal=0;
    int valid = FALSE;
    char charbuf[100];
    file_write=popen("echo -n \"/var/www/dir/`date +%Y-%b-%d`.csv\"","r");
    fgets(charbuf,100, file_write);
    while(1){
        // Open up the status file container and read from the system.
        if(valid == FALSE ){

            CPUread();
            // Need to make a new file here.... With Date code.
            fp=fopen(charbuf,"a");
            if ( fp == NULL){
                perror("Dummy Spit In initial File create!\n");
                exit(-1);
            }
            fprintf(fp,"CPU,IOwait,Memory,KB_up,KB_down\n");
            if(DEBUG) printf("CPU,IOwait,Memory,KB_up,KB_down\n");
            valid = TRUE;
            fclose(fp);
        }else{
            for(i=0;i<5;i++) cpub[i] = cpua[i];
            nets[1]=nets[0];
            netr[1]=netr[0];
            CPUread();

            total = 0;
            for(i=0;i<5;i++){
                cpub[i]=cpua[i]-cpub[i];
                total+=cpub[i];
            }
            // Time to find the CPU useage and IO waits...
            fp=fopen(charbuf,"a");
            if ( fp == NULL){
                perror("Dummy Spit Trying to open file\n");
                exit(-1);
            }
            fprintf(fp,"%0.2f,%0.2f,%0.2f,%ld,%ld\n",(((float)cpub[0])/total)*100,(((float)cpub[4]/total)*100),((((float)mema[1]-(float)mema[0])/(float)mema[1]))*100,(nets[0]-nets[1])/1024,(netr[0]-netr[1])/1024);
            if(DEBUG) printf("%0.2f,%0.2f,%0.2f,%ld,%ld\n",(((float)cpub[0])/total)*100,(((float)cpub[4]/total)*100),((((float)mema[1]-(float)mema[0])/(float)mema[1]))*100,(nets[0]-nets[1])/1024,(netr[0]-netr[1])/1024);
            fclose(fp);
        }
    sleep(TIME);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T20:57:53.020

我相信您需要在 CPUread() 函数中对从 popen() 返回的描述符调用 pclose() 。

请参阅此处的 popen() 文档：

[die.net 上的 popen() 手册页](http://linux.die.net/man/3/popen)

我不确定这是否直接导致您的问题，但这绝对是资源泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:59:14.203

我看到很多 popen() 但没有 pclose() ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T21:08:23.090

除了您需要使用 pclose() 之外，请确保使用 valgrind 运行您的程序，以便您知道问题已解决。

# c# - 简单的线程问题

> ID：13634547
> 
> 赞同：1
> 
> 时间：2012-11-29T20:55:19.213
> 
> 标签：c#, multithreading, visual-studio-2010, service

我复制了以下示例[Microsoft Thread 示例](http://support.microsoft.com/kb/815804)

它给出了下面的代码，但我在“this.progressBar1.Value = newval;”行出现错误 声明“跨线程操作无效：控件'progressBar1'从创建它的线程以外的线程访问。”

可能是什么问题？谢谢达摩

**C# 代码**

```
public partial class Form1 : Form
{         
    public Form1()
    {
        InitializeComponent();
    }
    private void Form1_Load(object sender, EventArgs e)
    {
        Thread trd = new Thread(new ThreadStart(this.ThreadTask));
        trd.IsBackground = true;
        trd.Start();
    }
    private void ThreadTask()
    {
        int stp;
        int newval;
        Random rnd = new Random();
        while (true)
        {
            stp = this.progressBar1.Step * rnd.Next(-1, 2);
            newval = this.progressBar1.Value + stp;
            if (newval > this.progressBar1.Maximum)
                newval = this.progressBar1.Maximum;
            else if (newval < this.progressBar1.Minimum)
                newval = this.progressBar1.Minimum;
            this.progressBar1.Value = newval;
            Thread.Sleep(100);
        }
    }
    private void button1_Click(object sender, EventArgs e)
    {
        MessageBox.Show("This is the main thread");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:13:58.183

首先，我强烈建议使用一些更高级别的技术，例如[任务](http://msdn.microsoft.com/en-us/library/dd460717.aspx)，而不是`Thread`直接使用类。任务类不仅更易于使用，而且更有效、更易于编写并且更容易避免您最近遇到的此类问题。

您尝试从非 UI 线程更新 UI 对象的代码的主要问题。UI 技术（如 Windows 窗体或 WPF）要求只有创建 UI 对象的线程才能访问它们的属性。

要解决此问题，您应该将控制从非 UI 线程编组到 UI 线程。并且有很多选项可以做到这一点（但所有这些都只是一个围绕名为[SynchronizationContext](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.aspx)的概念的语法糖）：

1.  直接使用同步上下文：

.

```
// storing SynchronizationContext in the private field of your form
private SynchronizationContext _syncContext = SyncrhonizationContext.Current;

private void MethodFromTheSeparateThread()
{
  // Marshaling control to UI thread
  _syncContext.Post(d =>
            {
                // Put all your code that access UI elements here
            }, null);
} 
```

1.  使用`InvokeRequired`/`Invoke`作为 Gregor 已经提到的

2.  使用 TaskScheduler.FromSynchronizationContext

.

```
private void ImplementLongRunningOperation()
{
  int id;
  string name;
  Task.Factory.StartNew(() =>
  {
    // our long-runing part. Getting id and name
    id = 42;
    name = "Jonh Doe";
  }).ContinueWith(t =>
    {
       // Handling results from the previous task.
       // This callback would be called in UI thread!
       label1.Text = id.ToString();
       label2.Text = name;
    }, TaskScheduler.FromSynchronizationContext);
} 
```

正如我所提到的，`Tasks`如果您正在使用 .NET 4.0+，则最后一种方法（使用 ）是一种更可取的方法。这不仅使您免于一些低级的类，而且还导致更清晰的设计，因为您可以清楚地分离单独的步骤，例如获取数据和处理它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T21:03:02.850

您必须调用新委托：

```
 delegate void ThreadTaskDelegate();
    private void ThreadTask()
    {
        if (this.InvokeRequired)
        {
            ThreadTaskDelegate del = new ThreadTaskDelegate(ThreadTask);
            this.Invoke(del, null);
        }
        else
        {
            int stp;
            int newval;
            Random rnd = new Random();
            while (true)
            {
                stp = this.progressBar1.Step * rnd.Next(-1, 2);
                newval = this.progressBar1.Value + stp;

                if (newval > this.progressBar1.Maximum)
                    newval = this.progressBar1.Maximum;
                else if (newval < this.progressBar1.Minimum)
                    newval = this.progressBar1.Minimum;

                this.progressBar1.Value = newval;

                Thread.Sleep(100);
            }
        }

    } 
```

快乐编码！:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T21:04:22.767

这个例子是一个可怜的例子。您必须访问创建它们的线程中的控件。这几乎总是主 UI 线程。（可以为不同的表单设置单独的 UI 线程，每个表单都有自己的消息泵。但现在不要担心。）

后台线程必须使用[Control.Invoke(Delegate)](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)切换到主 UI 线程才能访问 Controls。然后，当 UI 工作完成后，尽快退出 UI 线程。

例如：

```
private void ThreadTask()
{
    // This code runs in the background thread.
    while (true)
    {
        if (this.InvokeRequired)
        {
            // In order to access the UI controls, we must Invoke back to the UI thread
            this.Invoke(new ThreadStart(SetRandomProgress));
        }
        else
        {
            // We are already in the UI thread, so we don't have to Invoke
            SetRandomProgress();
        }

        // Wait briefly.  This wait happens in the background thread.
        // During this time, the UI is still responsive, because it is not blocked.
        // You can verify this by tweaking the duration to something longer (say, 5000 ms).
        Thread.Sleep(100);
    }
}

private void SetRandomProgress()
{
    Random rnd = new Random();
    int stp = this.progressBar1.Step * rnd.Next(-1, 2);
    int newval = this.progressBar1.Value + stp;
    if (newval > this.progressBar1.Maximum)
        newval = this.progressBar1.Maximum;
    else if (newval < this.progressBar1.Minimum)
        newval = this.progressBar1.Minimum;

    this.progressBar1.Value = newval;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T21:17:48.553

您可以像这样重写您的代码，您`progressBar`将在 UI 线程中更新，调用一个可以访问`progressBar`直通委托的方法。检查代码：

```
private void Form1_Load(object sender, EventArgs e)
        {
            Thread trd = new Thread(new ThreadStart(this.ThreadTask));
            trd.IsBackground = true;
            trd.Start();
        }
        private void ThreadTask()
        {
            Random rnd = new Random();
            while (true)
            {
                int randValue = rnd.Next(-1, 2);
                progressBar1.Invoke(new updater(UpdateProgressBar), new object[] {randValue});
                Thread.Sleep(100);
            }
        }
        private delegate void updater(int value);
        private void UpdateProgressBar(int randValue)
        {
            int stp = this.progressBar1.Step * randValue;
            int newval = this.progressBar1.Value + stp;
            if (newval > this.progressBar1.Maximum)
                newval = this.progressBar1.Maximum;
            else if (newval < this.progressBar1.Minimum)
                newval = this.progressBar1.Minimum;
            this.progressBar1.Value = newval;

        } 
```

# c++ - &= 必须始终被解释为运算符吗？

> ID：13634548
> 
> 赞同：12
> 
> 时间：2012-11-29T20:55:20.693
> 
> 标签：c++, reference, language-lawyer, lexical-analysis

我在编码时不小心在常量引用和它的默认值之间留了一个空格。我惊讶地发现它在 Intellisense 中作为错误出现，所以我编译了它，果然，它在 GCC 4.3.4、4.5.1 或 4.7.2 中不起作用，并且在Visual Studio 2012，或者。

这是一个演示错误的等效示例：

```
struct S {
    S(const int &= 5){}    
};

int main(){} 
```

这会在 GCC 中产生以下错误，在 MSVC 中产生类似错误：

> 错误：在 '&=' 标记之前应有 ',' 或 '...'

我认为这是因为`&=`被视为运算符，但我不确切知道在标准中搜索什么以查找有关此案例的更多信息。&= 只是提供特定于操作员的信息。

出于好奇，我决定将其换成右值参考：

```
S(int &&= 5){} 
```

奇怪的是，这在 GCC 4.7.2 和 MSVC 上都编译得很好，这意味着 &= 并不总是作为运算符在词法上配对。

为什么它适用于右值引用，而不适用于左值引用，标准对此事有什么看法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-29T21:03:31.710

这通常被称为“最长匹配原则”或[“最大咀嚼”](http://en.wikipedia.org/wiki/Maximal_munch)。因为`&&`是一个有效的记号而`&&=`不是（没有复合赋值符号），所以以 ;开头`&&`的最长记号是; 删除之后，就没有机会被视为单个令牌。`&&=``&&``&=`

这个原则对许多语言来说是共同的，尽管它经常有例外。例如，在 C++11 中，`>>`将在.`>``>``std::vector<std::vector<int>>`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-29T21:01:20.927

解析器只是从左到右工作，不管关联性如何，所以在第一个示例中，它找到的第一个完整标记是`&=`. （此时，解析器还没有检查更大的结构，所以它只知道那里有那个标记。）

在第二个示例中，它找到的令牌是`&&`。因为`&&=`不是令牌！

# android - 下载的图片不适合 ImageView，虽然大小应该没问题（novoda）

> ID：13634556
> 
> 赞同：0
> 
> 时间：2012-11-29T20:55:45.447
> 
> 标签：android, android-imageview, support-image-loader

我从 Google Maps Static API 下载静态地图。当我在浏览器中下载图像时，大小还可以（728x224）。您可以从下面检查网址。

但是当我尝试在我的 android 应用程序中查看它时，它太小了（540x166）。当然，我可以用“centerCrop”显示它，但这不是理想的解决方案。据我所知，这两种尺寸都以像素为单位，因此应该非常合适。我这样记录：

```
 Log.i(TAG, "view size: "+mapPicture.getWidth()+"/"+mapPicture.getHeight());
 Log.i(TAG, "pic size: "+mapPicture.getDrawable().getIntrinsicWidth()+"/"+mapPicture.getDrawable().getIntrinsicHeight()); 
```

logcat 看起来像这样：

```
11-29 21:41:37.547: I/DetailsFragment(18064): view size: 728/224
11-29 21:41:37.547: I/DetailsFragment(18064): http://maps.google.com/maps/api/staticmap?center=0,0&zoom=3&size=364x112&scale=2&sensor=false
11-29 21:41:37.547: I/DetailsFragment(18064): pic size: 540/166 
```

[我使用ImageManager](https://github.com/novoda/ImageLoader)下载图像并在 hdpi 设备上进行测试。

**那么为什么下载的图片有不同的大小呢？**

**编辑：** 当我下载两倍大的图像时，里面的drawable`ImageView`几乎和以前一样大小：`pic size: 540/189`

[http://maps.google.com/maps/api/staticmap?center=52.2396,21.0174&zoom=14&size=729x225&scale=2&sensor=false](http://maps.google.com/maps/api/staticmap?center=52.2396,21.0174&zoom=14&size=729x225&scale=2&sensor=false)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:11:44.707

你从[这里](http://developer.android.com/reference/android/content/res/Resources.html#getDrawable%28int%29)读过这个吗？

> **注意**：在**JELLY_BEAN**之前，当此处传递的资源 ID 是另一个 Drawable 资源的别名时，此函数将无法正确检索最终配置密度。这意味着如果别名资源的密度配置与实际资源不同，则返回的 Drawable 的密度将不正确，从而导致缩放不良。要解决此问题，您可以改为通过 TypedArray.getDrawable 检索 Drawable。将 Context.obtainStyledAttributes 与包含感兴趣的资源 ID 的数组一起使用来创建 TypedArray

# vb.net - FormName.ButtonName.Visible = True - 不工作（vb.net）

> ID：13634561
> 
> 赞同：0
> 
> 时间：2012-11-29T20:56:05.127
> 
> 标签：vb.net, winforms, multithreading

我将首先给出一个我正在处理的简化示例

我有一个 Windows 窗体 - 让我们称之为“formA”，在 formA 上我有一个按钮，在按钮的属性中我设置为可见 = false。我有一个名为 MainLoop 的不同类

```
Public class MainLoop

 sub new()
 end sub

 public sub run()
       If someCondition then
           formA.ButtonName.Visible = True
       End if

 end sub
 end class 
```

我在这个应用程序中运行了不止一个线程，一个线程只是通过这个“公共子运行”循环运行，直到满足某些条件。通过调试和单步执行应用程序，我确信它正在运行设置可见性 = true 的行。但是按钮只是没有出现在我的表单上。我已经确认这不是一个简单的拼写错误或任何东西——我似乎在这里遗漏了一个基本的逻辑。

我试过做

```
dim TempForm as new formA 
```

然后在我尝试的 IF 语句中

```
 TempForm.ButtonName.Visible = true 
```

但这是创建表单的一个新实例 - 它实际上并没有设置我正在使用的当前表单的按钮。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T20:58:41.507

如果您在 UI 线程以外的线程上设置可见性，则必须调用它才能使其可见。您不能从另一个线程触摸 UI 线程上的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:08:05.607

对于任何想知道答案的人最终是，

Control.Invoke 方法（委托，Object()）

教程可以在[这里找到](http://msdn.microsoft.com/en-us/library/a1hetckb%28v=vs.100%29.aspx)

# reporting-services - 如何在 SSRS 2008 中打印多个重复的“命名”报告副本？例如，“原件”、“客户副本”等

> ID：13634565
> 
> 赞同：1
> 
> 时间：2012-11-29T20:56:13.503
> 
> 标签：reporting-services, ssrs-2008

我希望能够拥有一个名为 CopyTypes 的多值参数，其中包含以下值：

```
{ "ORIGINAL", "CUSTOMER COPY", "PACKING LIST" } 
```

我希望报表为我的参数数组中的每个值创建一个相同的页面，只更改每个页面页脚中的一个文本变量。

我曾想过只使用一个值参数并为每个参数调用一次代码中的报告，但这种解决方案并不理想。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:31:56.870

这是一个可能适合您的设置：

*   为“单页”创建一个固定高度的子报表
*   在子报表中，创建一个参数“FooterText”
*   *在页面底部*显示参数（子报表的页脚不显示）
*   创建父报表，该子报表在列表中
*   创建一个数据集，为参数中的每个选定值生成一行
*   将该数据集的值作为参数传递给子报表

请参阅[我对另一个问题的回答](https://stackoverflow.com/a/12461136/419956)，了解如何将所选值转换为数据集。

底线是，您无法真正将报表页眉/页脚中的内容与页面内容相关联：在这方面它们是相当“静态的”。*对于页脚*（以及我上面的建议）来说，这尤其是一个问题，因为如果您“伪造”报告正文中的页脚，如果正文内容增长，它可能会被“推离”页面。如果这是一个问题，可能值得考虑一种解决方法，并将文本放在（“假”）标题中，例如在子报告的顶部。

# css - 网站本地化（或本地化）

> ID：13634566
> 
> 赞同：1
> 
> 时间：2012-11-29T20:56:20.487
> 
> 标签：css, html, localization, web

我最近一直在考虑本地化我的网站，但对 Google 搜索有点空白。我一直在寻找如何本地化应用程序，但不是网站或 GeoLocation，这有点太具体了。

我希望能够主要使用纯 HTML(5) 和 CSS(3) 进行本地化。我希望能够本地化页面中的部分，而不是为每个国家/地区设置单独的 URL。

对此的任何帮助都会非常有用，因此在此先感谢。

编辑：如果没有纯 HTML(5) 或 CSS(3) 方式来执行此操作，则任何服务器端、js 或其他语言的示例都会很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:07:31.627

This solution is one I use in an ajax application with almost no html (everything is generated from the data client side).

The first part ensures you can specify the language in the url (by adding `&lang=it` for example) and that it is stored in local storage (permanent user preferences in the browser) :

```
myapp.available_langs = ['en', 'fr', 'it']; // the first one is the default language
// Exemples :
//   {en:'hi', fr:'Bonjour'}
//   {fr:'Bonjour'}
myapp.loc = function(map) {
    if (map[myapp.lang]) return map[myapp.lang];
    for (var i=0; i<myapp.available_langs.length; i++) {
        if (map[myapp.available_langs[i]]) return map[myapp.available_langs[i]];
    }
    return "-label not found-";
};

myapp.getUrlParameter = function(name, defaultValue) {
    name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
    var results = new RegExp( "[\\?&]"+name+"=([^&#]*)" )
         .exec( document.location.href );
    if( results == null ) return defaultValue;
    else return decodeURIComponent(results[1]);
};

myapp = {};
myapp.lang = localStorage['lang'] = myapp.getUrlParameter('lang', localStorage['lang']||myapp.available_langs[0]); 
```

And it is used like this at some other place :

```
$('body').append('<div product id=product_header>\
    ...
        <tr>\
            <td> '+myapp.loc({en:'cut',fr:'date'})+': <span id=product_cutdate>?</span></td>\
            <td> '+myapp.loc({en:'grade',fr:'qualité'})+': <span id=product_grade>?</span></td>\
            <td> '+myapp.loc({en:'length',fr:'longueur'})+': <span id=product_length>?</span> m</td>\
            <td> '+myapp.loc({en:'thickness',fr:'épaisseur'})+': <span id=product_thickness>?</span> mm</td>\
            <td> '+myapp.loc({en:'width',fr:'largeur'})+': <span id=product_width>?</span> m</td>\
        </tr>\ 
```

You might choose to use also the user agent but in real corporate use I find it about useless. Note that i18n solutions can be very various. I don't advocate to use this, this is simply a pattern I like. Many people prefer to extract the strings in external properties files but in my experience it leads to more bad translations and is harder to manage (as long as only one team speak all the involved languages and that you don't have 10 of them).

# wpf - WPF DatePicker 输入中断日期，防止恢复旧值

> ID：13634567
> 
> 赞同：2
> 
> 时间：2012-11-29T20:56:23.640
> 
> 标签：wpf, datepicker, wpftoolkit

当我将 WPF 4.0 DatePicker 与中断日期（或最小/最大值）一起使用时，并且用户通过键入它来输入一个被涂黑的日期时，DatePicker 将恢复为原始值。

此行为不是输入日期的最佳方式。如果您输入错误的年份并标记出来，它会恢复为旧值。

我希望能够处理代码中的错误，而不是仅仅恢复到旧值。

# windows-8 - 启动浮出控件时的事件（Windows 8 Metro 应用程序）

> ID：13634568
> 
> 赞同：0
> 
> 时间：2012-11-29T20:56:28.977
> 
> 标签：windows-8

我有一个问题，我的弹出窗口（在设置魅力中）隐藏在我的应用程序中的广告后面。现在我想通过在选择 fylout 时隐藏广告来解决这个问题。

但是我怎么能在我的页面代码中注意到浮出控件被选中？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:00:42.797

最好的方法是为事件创建一个事件侦听器`onbeforeshow`（请参阅此处的文档：http: [//msdn.microsoft.com/en-us/library/windows/apps/br211723.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br211723.aspx)。）您设置的功能因为听众可以隐藏广告。

查看 WinJS.UI.Flyout 对象本身的官方文档，了解您可以订阅的更多事件：http: [//msdn.microsoft.com/en-us/library/windows/apps/br211726.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br211726.aspx)

# eclipse - 在eclipse上设置输出目录

> ID：13634571
> 
> 赞同：0
> 
> 时间：2012-11-29T20:56:33.343
> 
> 标签：eclipse, gwt, maven

我在 linux 上的 eclipse 上使用 GWT Maven 插件，我有这个错误：

```
The output directory for the project should be set to /MyGWTMavenExampleApp/src/main/webapp/WEB-INF/classes 
```

我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-12T07:22:35.810

转到项目 -> 属性 -> Google -> Web 应用程序。取消选中复选框 Launch and deploy from this directory

# nginx - 如何让 nginx 监听 server_name:port

> ID：13634574
> 
> 赞同：54
> 
> 时间：2012-11-29T20:56:52.447
> 
> 标签：nginx, config

在我的 nginx conf 文件中，我有：

```
 listen       80;
    server_name  $hostname; 
```

但是，如果我做 netstat 我看到它正在监听 0.0.0.0:80

我想要发生的事情，是 nginx 听 $hostname:80 ，有没有办法配置它来做到这一点？

到目前为止，我尝试了不同的设置但没有成功。感谢你的帮助。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-11-30T10:46:56.013

`server_name`^([docs](http://nginx.org/en/docs/http/server_names.html))指令用于识别虚拟主机，它们不用于设置绑定。

`netstat`告诉你 nginx 监听`0.0.0.0:80`这意味着它将接受来自任何 IP 的连接。

如果要更改 nginx 绑定的 IP，则必须更改`listen`^([docs](http://nginx.org/en/docs/http/ngx_http_core_module.html#listen))规则。
因此，如果您想将 nginx 设置为 bind to `localhost`，您可以将其更改为：

```
listen 127.0.0.1:80; 
```

这样，不是来自 localhost 的请求将被丢弃（它们甚至不会命中 nginx）。

# java - JavaFX FileChooser：如何设置文件过滤器？

> ID：13634576
> 
> 赞同：37
> 
> 时间：2012-11-29T20:56:56.673
> 
> 标签：java, user-interface, javafx-2, filechooser

我想在 JavaFX FileChooser 中设置文件过滤器，但找不到方法。

我的代码：

```
 FileChooser fc = new FileChooser();
  fc.setTitle("My File Chooser");
  File f = fc.showOpenDialog(primaryStage);
  System.out.println(f); 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-11-29T21:01:42.267

你可以这样做：

```
FileChooser.ExtensionFilter extFilter = new FileChooser.ExtensionFilter("TXT files (*.txt)", "*.txt");
chooser.getExtensionFilters().add(extFilter); 
```

这是一个简单的例子：

```
public class ExtensionFilterExample extends Application {

    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(final Stage primaryStage) {
        primaryStage.setTitle("Extension Filter Example");

        final Label fileLabel = new Label();

        Button btn = new Button("Open FileChooser");
        btn.setOnAction(new EventHandler<ActionEvent>() {

            @Override
            public void handle(ActionEvent event) {
                FileChooser fileChooser = new FileChooser();

                // Set extension filter
                FileChooser.ExtensionFilter extFilter = 
                        new FileChooser.ExtensionFilter("TEXT files (*.txt)", "*.txt");
                fileChooser.getExtensionFilters().add(extFilter);

                // Show open file dialog
                File file = fileChooser.showOpenDialog(primaryStage);
                if (file != null) {
                    fileLabel.setText(file.getPath());
                }
            }
        });

        VBox vBox = new VBox(30);
        vBox.getChildren().addAll(fileLabel, btn);
        vBox.setAlignment(Pos.BASELINE_CENTER);

        StackPane root = new StackPane();
        root.getChildren().add(vBox);
        primaryStage.setScene(new Scene(root, 300, 250));
        primaryStage.show();
    }
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-06-26T17:39:44.480

JavaFX 更新加上多个扩展过滤器：

```
FileChooser fc = new FileChooser();

FileChooser.ExtensionFilter fileExtensions = 
  new FileChooser.ExtensionFilter(
    "Web pages", "*.tpl", "*.html", "*.htm");

fc.getExtensionFilters().add(fileExtensions); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-01-08T15:03:02.673

这就是你如何做到的。

```
FileChooser fc=new FileChooser();
FileChooser.ExtensionFilter fileExtensions =new FileChooser.ExtensionFilter("music files","*.mp3", "*.mp4");
fc.getExtensionFilters().add(fileExtensions);
List<File> selectedFiles=fc.showOpenMultipleDialog(null);       
if(selectedFiles!=null){
     for(int i=0;i<selectedFiles.size();i++){
           System.out.println(selectedFiles.get(i).toString());
     }
} 
```

# jms - 如何使用 Apache Camel 来适应这种消息传递逻辑？

> ID：13634577
> 
> 赞同：0
> 
> 时间：2012-11-29T20:56:56.897
> 
> 标签：jms, activemq, apache-camel

我正在使用 Apache Camel DSL 并试图弄清楚如何路由消息，就像这样。这是逻辑，没有任何 Camel DSL。

*   消息进入队列
*   叫豆
*   如果 bean 没有异常
    *   使用原始消息调用另一个 bean

我的问题是我不确定如何使用原始消息进入步骤 3.a。对 bean 的调用会更改消息。我可以使用多播、两个管道和标头变量，但据我所知，这些标头变量在管道的范围内。

任何想法表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:07:19.997

您可以在序列模式下使用多播 eip

```
<from uri="somewhere"/>
<multicast>
  <to uri="bean:beanA"/>
  <to uri="bean:beanB"/>
</multicast> 
```

多播默认以顺序模式运行，所以首先调用beanA。如果成功，它会调用 beanB，但会使用原始消息（我们调用 beanA 时使用的同一消息的副本）。

您可以在此处阅读有关多播 EIP：http: [//camel.apache.org/multicast.html](http://camel.apache.org/multicast.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T22:29:05.050

从你的第二个 bean，只需调用`exchange.getUnitOfWork().getOriginalInMessage()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T01:01:22.783

我最终将消息的内容存储在一个变量中，并在更改后将消息设置回该内容，就像这样......

```
<!-- store original content in header variable -->
<camel:setHeader headerName="marc"><camel:simple>${body}</camel:simple></camel:setHeader>
<!-- run some logic, output gets saved as another header variable, message as this point is now that output -->
<camel:bean ref="getPidsForUpdate"/>
<camel:setHeader headerName="pids"><camel:simple>${body}</camel:simple></camel:setHeader> 
```

....根据该输出设置一堆变量，然后

```
<!-- get original message to run some more logic-->
<camel:setBody><camel:simple>${headers.marc}</camel:simple></camel:setBody> 
```

# .net - .NET SignalR 客户端无法订阅服务器事件

> ID：13634578
> 
> 赞同：2
> 
> 时间：2012-11-29T20:57:14.100
> 
> 标签：.net, signalr.client

我正在尝试在 .NET 客户端中使用 SignalR。我能够成功连接，但是当我尝试订阅事件时没有任何反应。我无法接收从服务器发送的消息。我对这个领域很陌生，所以我不确定我的代码是否遗漏了什么或有什么问题。

```
 var hubConnection = new HubConnection(<url>);

        // Hub name from dev code
        var proxy = hubConnection.CreateHubProxy("pidHub");

        // Subscribing to all the events
        proxy.On("SendTransactionUpdate", () => Logger.LogInformation("SendTransactionUpdate ************************"));
        proxy.On("SendMessage", () => Logger.LogInformation("SendMessage ************************"));
        proxy.On("UpdateStatus", () => Logger.LogInformation("UpdateStatus ************************"));
        proxy.On("TransactionUpdate", () => Logger.LogInformation("TransactionUpdate ************************"));

        // This block executes fine
        hubConnection.Start().ContinueWith(task =>
        {
            if (task.IsFaulted)
            {
                Logger.LogInformation("There was an error opening the connection: {0}" + task.Exception.GetBaseException());
            }
            else
            {
                Logger.LogInformation("Connected. *********");
            }
        }).Wait();

        // Call Provision GUID API and returns a valid GUID
        <call API>

        // Downloads EXE on machine
        <download EXE code>

        // Run EXE with -d option
        // EXE uploads results back to the server and server returns some messages through SignalR
        // I want to capture these messages
        <execute EXE on machine> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:55:34.460

1.  当任务没有出现故障时，您可能希望订阅任务继续的事件。
2.  如果您已成功连接到服务器，您可能希望使用 fiddler 来跟踪服务器消息。
3.  确保您的事件处理程序包含参数（如果有），用于从服务器发送的参数。您的应用程序可能会收到消息但处理错误。

# objective-c - 将默认值设置为浮动变量

> ID：13634584
> 
> 赞同：2
> 
> 时间：2012-11-29T20:57:48.207
> 
> 标签：objective-c, ios

我正在开发一个基于位置的应用程序，我正在使用以下代码（完美运行）来检索用户的位置。但是，我想为经度和纬度设置一个默认值，以防用户关闭位置服务。

我试过 self.latitude = 0; 但应用程序崩溃。纬度和经度是浮点类型的变量。理想情况下，我想将它们设置为默认值（0,0）。

所以基本上：如何为类型变量设置默认值`float`？

谢谢你的帮助。

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation    *)newLocation fromLocation:(CLLocation *)oldLocation
{
    self.latitude = newLocation.coordinate.latitude;
    self.longitude = newLocation.coordinate.longitude;
    SVGeocoder *geocodeRequest = [[SVGeocoder alloc] initWithCoordinate:newLocation.coordinate];
    [geocodeRequest setDelegate:self];
    [geocodeRequest startAsynchronous];
    //   NSLog(@"lat:%f,long:%f",self.latitude,self.longitude);

    [self.locationMgr stopUpdatingLocation];
} 
```

# c# - 间歇性“无法连接到远程服务器”错误

> ID：13634586
> 
> 赞同：2
> 
> 时间：2012-11-29T20:57:57.153
> 
> 标签：c#, .net, windows-services, connectivity

我正在运行一个 Windows 服务，它使用以下代码下载 RSS 提要：

```
XmlReaderSettings settings = new XmlReaderSettings() { DtdProcessing = DtdProcessing.Ignore };

string feedXml = XDocument.Load(XmlReader.Create(url, settings)); 
```

该服务不在 IIS 下运行，而是作为独立服务运行。

突然之间（我怀疑是基础设施问题）我们开始每 10-20 分钟收到“无法连接到远程服务器”。代码本身没有改变，我正在寻找可能的原因。

为了解决这个问题，我将服务移到了另一台机器上，但问题仍然存在。

很想得到任何想法。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T14:11:20.470

原因是完全相同的服务安装在同一环境中的不同机器上，导致两个不同的 IP 连接到 RSS 提要。根据时间间隔，有时它还可以，有时它被 RSS 提供程序阻止。

# magento - Magento - 无法运行重新索引，数据库中缺少列

> ID：13634587
> 
> 赞同：0
> 
> 时间：2012-11-29T20:58:03.467
> 
> 标签：magento

我正在使用分层导航的扩展程序运行，在我尝试将其更新为从未版本之前效果很好。我无法再次重新索引扩展，这就是我从中得到的：

```
2012-11-29T21:35:30+01:00 DEBUG (7): Exception message: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'target.default_mask1' in 'field list'
Trace: #0 /var/www/site.com/public_html/lib/Varien/Db/Statement/Pdo/Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array)
#1 /var/www/site.com/public_html/lib/Zend/Db/Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
#2 /var/www/site.com/public_html/lib/Zend/Db/Adapter/Abstract.php(479): Zend_Db_Statement->execute(Array)
#3 /var/www/site.com/public_html/lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('SELECT DISTINCT...', Array)
#4 /var/www/site.com/public_html/lib/Varien/Db/Adapter/Pdo/Mysql.php(389): Zend_Db_Adapter_Pdo_Abstract->query('SELECT DISTINCT...', Array)
#5 /var/www/site.com/public_html/lib/Zend/Db/Adapter/Abstract.php(734): Varien_Db_Adapter_Pdo_Mysql->query(Object(Varien_Db_Select), Array)
#6 /var/www/site.com/public_html/app/code/local/Mana/Db/Helper/Data.php(146): Zend_Db_Adapter_Abstract->fetchAll(Object(Varien_Db_Select))
#7 /var/www/site.com/public_html/app/code/local/Mana/Db/Model/Indexer.php(36): Mana_Db_Helper_Data->replicate()
#8 /var/www/site.com/public_html/app/code/core/Mage/Index/Model/Process.php(207): Mana_Db_Model_Indexer->reindexAll()
#9 /var/www/site.com/public_html/app/code/core/Mage/Index/Model/Process.php(253): Mage_Index_Model_Process->reindexAll()
#10 /var/www/site.com/public_html/app/code/core/Mage/Index/controllers/Adminhtml/ProcessController.php(124): Mage_Index_Model_Process->reindexEverything()
#11 /var/www/site.com/public_html/app/code/local/Mage/Core/Controller/Varien/Action.php(420): Mage_Index_Adminhtml_ProcessController->reindexProcessAction()
#12 /var/www/site.com/public_html/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('reindexProcess')
#13 /var/www/site.com/public_html/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#14 /var/www/site.com/public_html/app/code/local/Mage/Core/Model/App.php(348): Mage_Core_Controller_Varien_Front->dispatch()
#15 /var/www/site.com/public_html/app/Mage.php(640): Mage_Core_Model_App->run(Array)
#16 /var/www/site.com/public_html/index.php(82): Mage::run('', 'store') 
```

这是复制品：

```
2012-11-29T21:49:20+01:00 DEBUG (7): UPDATE: SELECT DISTINCT 'target'.'id', 'target'.'code', 'target'.'type', 'target'.'default_mask0', 'target'.'default_mask1', 'eav_attribute_additional'.'is_filterable' AS 'is_enabled', 'eav_attribute'.'frontend_label' AS 'name', 'eav_attribute_additional'.'is_filterable_in_search' AS 'is_enabled_in_search', 'eav_attribute_additional'.'position' FROM 'eav_attribute'
INNER JOIN 'catalog_eav_attribute' AS 'eav_attribute_additional' ON eav_attribute.attribute_id = eav_attribute_additional.attribute_id
INNER JOIN 'eav_entity_type' ON eav_attribute.entity_type_id = eav_entity_type.entity_type_id
INNER JOIN 'm_filter2' AS 'target' ON target.code = eav_attribute.attribute_code WHERE (eav_entity_type.entity_type_code = 'catalog_product') AND (eav_attribute_additional.is_filterable <> 0) 
```

但是，如果我删除了 'target','default_mask1' 部分，我就能找到属性。我还在 eav_attribute 中找到了 default_mask，但不幸的是，我无法弄清楚问题到底出在哪里。任何帮助，将不胜感激！

（扩展是 Manapro seo 分层导航）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:08:18.517

问题是“升级”由于网站上的访问者而中断。我放下网站，删除 /includes/ 文件夹，在 sql 中运行开发人员的脚本，重新缓存，一切都再次成为魅力！所以给自己一个教训，在升级扩展之前总是放下网站！

# javascript - 如何使用JS从右到左显示面包屑？

> ID：13634588
> 
> 赞同：-1
> 
> 时间：2012-11-29T20:58:04.790
> 
> 标签：javascript, html, menu, breadcrumbs, right-to-left

如何从右到左显示面包屑导航菜单？

例如：

> document.title « [myPage](http://www.google.com) «[首页](http://stackoverflow.com)

我正在使用下面从左到右显示的脚本，但我无法弄清楚如何正确操作它。

```
<script language="JavaScript">
<!-- 
  function breadcrumbs(){
    sURL = new String;
    bits = new Object;
    var x = 0;
    var stop = 0;
    var output = "<div class=topnav><A HREF=/>Hyperdisc</A> &raquo; ";

    sURL = location.href;
    sURL = sURL.slice(8,sURL.length);
    chunkStart = sURL.indexOf("/");
    sURL = sURL.slice(chunkStart+1,sURL.length)

    while(!stop){
      chunkStart = sURL.indexOf("/");
      if (chunkStart != -1){
        bits[x] = sURL.slice(0,chunkStart)
        sURL = sURL.slice(chunkStart+1,sURL.length);
      }else{
        stop = 1;
      }
      x++;
    }

    for(var i in bits){
      output += "<A HREF=\"";
      for(y=1;y<x-i;y++){
        output += "../";
      }
      output += bits[i] + "/\">" + bits[i] + "</A> &raquo; ";
    }
    document.write(output + document.title);
    document.write("</div>");
  }
 // -->
</script> 
```

其中显示：

> [主页](http://www.google.com)» [myPage](http://stackoverflow.com) » document.title

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:14:36.867

你不需要 JS。你需要的是`direction`CSS 属性。这是测试用例[http://jsbin.com/welcome/55152/edit](http://jsbin.com/welcome/55152/edit)。[对方向属性的支持很好](http://reference.sitepoint.com/css/direction)

要点是：

```
ul {
  direction: rtl;
}
li { display: inline; }
a { display: inline-block; } 
```

**更新**如果您绝对必须为此使用 JS，这里是简单的代码段：

```
var list = document.getElementById('nav'),
    lis = document.querySelectorAll('li'),
    l = lis.length - 1,
    i,
    newList = document.createElement('ul');

for(i = l; i >= 0; i--) {
  newList.appendChild(lis[i]);
}
list.parentNode.replaceChild(newList, list); 
```

该片段假定标记如下：

```
<ul id="nav">
  <li><a href="#">Home</a></li>
  <li><a href="#">myPage</a></li>
  <li>Document</li>
</ul> 
```

测试用例在这里[——http://jsbin.com/welcome/55163/edit](http://jsbin.com/welcome/55163/edit)

**已更新实际代码段**

当涉及到问题中的实际代码时，您可能希望用此代码段替换最后一个 for() 循环中的所有内容：

```
document.write(output + document.title);
for(var i = bits.length - 1; i >= 0; i--){
  output += "&laquo; <A HREF=\"";
  for(y=1;y<x-i;y++){
    output += "../";
  }
  output += bits[i] + "/\">" + bits[i] + "</A>";
}
document.write("</div>"); 
```

# html - 有条件地针对 Outlook 2007/2010/2013，但不是 Outlook.com

> ID：13634589
> 
> 赞同：6
> 
> 时间：2012-11-29T20:58:08.613
> 
> 标签：html, email, outlook, outlook.com

我知道我们可以有条件地定位 Outlook '07-'13，但 Outlook.com 似乎也符合我的条件。

```
<!--[if !mso]><!--><br /><!--<![endif]--> 
```

此语句是否有更好的代码与 Outlook.com 不匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T20:10:09.897

就在这里。为什么要发布带有“我不知道”的答案？

无论如何，Outlook.com 都会在您的所有类前面加上 ecx。我喜欢做的是使 td 高度为 0（`height="0" style="font-size:0px; line-height:0px;"`），添加你的类`class="outlookthing"`，并在你的`<style>`正确的 0 高度中添加一个`td[class="ecxoutlookthing]{font-size:XXpx; line-height:XXpx; height:XXpx;}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-24T10:19:02.723

关于什么

```
 <xsl:comment>
                    <![CDATA[[if  mso 12]>Contents for 2007<![endif]]]>
                </xsl:comment>
                <xsl:comment>
                    <![CDATA[[if  mso 14]>Contents for 2010<![endif]]]>
                </xsl:comment>
                <xsl:comment>
                    <![CDATA[[if  mso 15]>Contents for 2013<![endif]]]>
                </xsl:comment> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T09:38:30.680

没有真正的方法可以做到这一点。可能需要查看 HTML 以找出导致此问题的原因以及另一种方法。

对不起，我帮不上什么忙。

# java - 某些 HTTP 请求不会出现在 Fiddler

> ID：13634593
> 
> 赞同：2
> 
> 时间：2012-11-29T20:58:32.373
> 
> 标签：java, asp-classic, fiddler

我正在将用于从 Java 访问 Web 商店的 API 的示例代码重写为经典 ASP。Java 代码工作，它发送请求并返回正确的结果。ASP 代码的作用完全相同，但它所做的只是返回一个错误，表明授权有问题。我检查了 hmac 签名字符串 (sha256, base64) 但这给出了与 Java 代码相同的结果。

因此，我决定检查 HTTP 请求的实际外观，并将它们相互比较。Fiddler 似乎是一个不错的选择，但由于某种原因，两个 HTTP 请求都没有出现。

关于这个主题已经写了很多，我尝试了几件事，但到目前为止还没有运气。它们都描述了通过 Fiddler 代理路由请求，即 localhost:8888。

我在 ASP 代码中使用这个对象：

```
Set httpRequest = Server.CreateObject("MSXML2.ServerXMLHTTP.6.0") 
```

对于 IIS 7（在 Windows 7 上），可以像这样在 DOS 中设置代理：

```
netsh winhttp set proxy localhost:8888 
```

在这样的代码中（这可能不适用于 v6 以外的其他版本的“MSXML2.ServerXMLHTTP”）：

```
httpRequest.setProxy 2, "http=localhost:8888", "" 
```

Java 代码使用 Apache HttpClient，根据[手册](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html#d5e571)，代理可以这样设置：

```
DefaultHttpClient httpclient = new DefaultHttpClient();
HttpHost proxy = new HttpHost("localhost", 8888);
httpclient.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, proxy); 
```

我在 main() 方法的开头添加了这段代码。代码在 Eclipse (Juno) 中运行。

我还在浏览器中打开了代理地址 (http://localhost:8888/)，它显示了“Fiddler Echo Service”页面。Fiddler 设置为显示“所有进程”。

尽管如此，两个 HTTP 请求都没有出现。唯一显示的是我运行的 ASP 页面 (http://localhost:8082/test.asp)，它执行 HTTP 请求。当我使用浏览器时，Fiddler 上会显示其他内容，所以我知道它正在工作。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:33:22.000

我最初认为，因为这两个程序都没有出现在 Fiddler 上，所以 Fiddler 出了点问题。

但是这两个程序都有问题。对于 ASP 代码，setProxy 必须像这样调用：

```
xmlhttp.setProxy 2, "http://127.0.0.1:8888", "" 
```

所以“::/”而不是“=”

在 Fiddler 中显示 Java 代码中的 Apache HttpClient 请求非常复杂，因为请求是使用 https 协议发送的。尽管我尝试了几种建议的解决方案，但我无法让它发挥作用。

最后我发现添加

```
-Djavax.net.debug=all 
```

作为 VM 的参数，向我展示了我需要的内容，即正在发送的标头。

# c# - 输入空格时文本框的奇怪行为

> ID：13634598
> 
> 赞同：1
> 
> 时间：2012-11-29T20:59:01.560
> 
> 标签：c#, validation, textbox, silverlight-5.0, inotifydataerrorinfo

我正在使用 Silverlight 5 和 C#。我的模型 ( `CustomerModel`) 实现`INotifyDataErrorInfo`了验证用户输入的接口。其`TextBox`Text 属性绑定到模型中的某个属性，该属性在每次击键时都经过验证（我已设置`UpdateSourceTrigge=PropertyChanged`），其行为很奇怪 - 当我输入空格时，光标移动到`TextBox`. 很烦人。

```
<TextBox x:Name="txtDebtorName" Grid.Row="2" Grid.Column="1"
           Text="{Binding SelectedItem.Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnNotifyDataErrors=True, ValidatesOnExceptions=True, NotifyOnValidationError=True}"
           IsReadOnly="{Binding IsReadonly}" >
</TextBox> 
```

任何想法是什么导致了这种行为，以及如何解决它？

模型中的属性：

```
public string Name
{
    get { return _Name; }
    set
    {
        const string propertyName = "Name";
        ValidateRequiredString(propertyName, value, Utility.GetTranslation("RequiredFieldDebtorName"));

        _Name = value;
        RaisePropertyChanged(propertyName);
    }
} 
```

该`ValidateRequiredString()`方法采用`PropertyName`、正在设置的值和错误消息。

# c++ - 转换为向量<2f>

> ID：13634600
> 
> 赞同：1
> 
> 时间：2012-11-29T20:59:05.437
> 
> 标签：c++, opencv

我正在使用 OpenCV 的 highgui include 来获取图像上的鼠标点击位置。我已经定义了一个 vector<2f> 我想存储已点击的点，但不幸的是，我认为我做错了什么：

```
void on_mouse(int mouseEvent, int x, int y, int flags, void* param)
{
    if( mouseEvent == CV_EVENT_LBUTTONDOWN) {

        printf("Clicked image at (%d,%d)\n", x, y);

        (vector<Point2f>*)param.push_back(Point2f(x,y));

    }
} 
```

我的编译器在**参数**上给了我一个错误并说错误：表达式必须具有类类型。谁能建议如何将其转换为矢量结构？或者我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T21:01:46.993

```
 (vector<Point2f>*)param.push_back(Point2f(x,y)); 
```

应该：

```
 reinterpret_cast<vector<Point2f>*>(param)->push_back(Point2f(x,y)); 
```

# sql - 通用 MERGE 的存储过程

> ID：13634601
> 
> 赞同：2
> 
> 时间：2012-11-29T20:59:09.630
> 
> 标签：sql, tsql, stored-procedures, merge, sql-server-2008-r2

我在数据库中有一组 10 个表 ( `DB1`)。并且在同一台 SQL Server 2008 R2 数据库服务器机器上的另一个数据库 ( `DB2`) 中有 10 个具有完全相同架构的表。

中的 10 个表`DB1`经常用数据更新。

我打算编写一个每天运行一次的存储过程，用于`DB1`同步`DB2`. 存储过程将使用该`MERGE`语句。

现在，我的目标是使其尽可能通用和参数化。也就是说，容纳更多的表......并容纳不同的源和目标数据库名称。绝对没有硬编码的意图。

到目前为止，这是我的算法：

1.  将数据库名称作为参数
2.  在存储过程中进行第一个查询...导致从查找表中给出 10 个表的名称（可以是 10、20 或其他）
3.  有一个通用`MERGE`语句对上述每组表进行同步（基于主键？）

这是我需要更多输入的地方。

实现此存储过程的最佳方法是什么？SQL 语法会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T23:02:00.207

我必须做类似的事情，为此我使用带有“骨架”的字符串作为合并语句，然后我通过对 sys 视图的简单查询来检索列列表和 pks。

你可以做一些类似的事情来构建你的合并语句，这是我现在写的一个草图作为一个例子（我知道这很可怕，但我不会在这个时候写一些像样的东西，无论如何它应该给你一个提示：P）

[SQLFiddle](http://sqlfiddle.com/#!6/19383/10)

那么你只需要顺便用通常的`sp_executesql`存储过程执行它，在这种方式构建命令字符串时总是要注意，它不是那么安全

# c# - 查询字典中的值 使用 LINQ？

> ID：13634602
> 
> 赞同：1
> 
> 时间：2012-11-29T20:59:09.120
> 
> 标签：c#, .net, linq, mongodb, mongodb-.net-driver

考虑以下学生和教师的简单示例；

```
// person
public class Person
{
    public ObjectId Id { get; set; }
    public string Name { get; set; }
    public Person() {
        Id = ObjectId.GenerateNewId(DateTime.Now);
    }
}

// student has a Classroom
public class Student : Person
{
    public string Classroom { get; set; }
}

// teacher has a Dictionary<ObjectId, Student> Students
public class Teacher : Person
{
    [BsonDictionaryOptions(DictionaryRepresentation.ArrayOfDocuments)]
    public Dictionary<ObjectId, Student> Students { get; set; }
    public Teacher() {
        Students = new Dictionary<ObjectId, Student>();
    }
}

class Program
{
    static void Main(string[] args)
    {

        var server = MongoServer.Create("mongodb://localhost/database?safe=true");
        var database = server.GetDatabase("sandbox");
        var collection = database.GetCollection<Teacher>("teachers");
        collection.Drop();

        // create students
        var s1 = new Student() { Name = "s1", Classroom = "foo" };
        var s2 = new Student() { Name = "s2", Classroom = "foo" };
        var s3 = new Student() { Name = "s3", Classroom = "baz" };
        var s4 = new Student() { Name = "s4", Classroom = "foo" };

        // teacher 1
        var t1 = new Teacher() { Name = "t1" };
        t1.Students.Add(s1.Id, s1);
        t1.Students.Add(s2.Id, s2);
        collection.Insert(t1);

        // teacher 2
        var t2 = new Teacher {Name = "t2"};
        t2.Students.Add(s3.Id, s3);
        collection.Insert(t2);

        // add teacher 3 
        var t3 = new Teacher() {Name = "t3"};
        t3.Students.Add(s4.Id, s4);
        collection.Insert(t3);

        // select via key
        var onlyt1 = collection.AsQueryable().Where(t => t.Students.ContainsKey(s1.Id)).ToList();

        Console.WriteLine("onlyt1 : {0}", onlyt1.ToJson());
        Console.ReadLine();
    }
} 
```

我可以通过键（如上所示）进行选择，但是我如何找到所有有“foo”教室的学生的老师？我想写一些类似的东西；

```
// select via value
var shouldBeJustT1andT3 = collection.AsQueryable().Where(t => t.Students.Values.Where(s => s.Classroom == "foo")).ToList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T22:43:30.380

您可以使用*Any*来获取在给定教室“foo”中有学生的任何老师：

```
List<Teacher> shouldBeJustT1andT3 = collection.Where(
    teacher => teacher.Students.Any(student => student.Classroom == "foo")
).ToList(); 
```

* * *

**编辑**

由于 Mongo 的 IQueryable 默认不支持*Any*，也许你可以使用`Where`and`Count`而不是`Any`：

```
List<Teacher> shouldBeJustT1andT3 = collection.Where(
    teacher => teacher.Students.Where(student => student.Classroom == "foo").Count() > 0
).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T22:44:08.973

你不能有`Students`类型`ICollection<Person>`吗？

那么你不需要查询字典的值，而是平面对象的列表，即`where s.ID == x && s.Classroom == "blah"`.

字典仅通过键查找对象才有意义，即`t.Students[studentId]`.

* * *

找老师：*看dbaseman的回答，他是对的。*

# graph-theory - 生成无向图的所有独立集的算法？

> ID：13634606
> 
> 赞同：1
> 
> 时间：2012-11-29T20:59:28.160
> 
> 标签：graph-theory, independent-set

我们需要一种算法来生成无向图的所有独立集。

例如：

![在此处输入图像描述](../Images/d83b26b3f98210be2e9b1da6271ee25b.png)

我们尝试使用[“Bron-Kerbosch”](http://www.mathworks.com/matlabcentral/fileexchange/24591)算法，但不明白如何解释结果。

**输入：**

A = [1 2; 1 5; 2 3; 2 5; 3 4; 4 5; 4 6]

**期望的输出：**

B = [1 3 6; 1 4; 2 4; 2 6; 3 5 6]

如何解释结果？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:16:17.893

才知道怎么解决....

**输入：**

A = [1 2; 2 3; 3 4; 4 5; 4 6]

转换为邻接矩阵：

```
 0     1     0     0     1     0
 1     0     1     0     1     0
 0     1     0     1     0     0
 0     0     1     0     1     1
 1     1     0     1     0     0
 0     0     0     1     0     0 
```

**BK_MaxIS 输出：**

```
 1     1     0     0     0
 0     0     1     1     0
 1     0     0     0     1
 0     1     1     0     0
 0     0     0     0     1
 1     0     0     1     1 
```

当第 j 列的第 i 行为 1 时，顶点 i 参与由第 j 列索引的最大独立集。

**这意味着：**

B = [1 3 6; 1 4; 2 4; 2 6; 3 5 6]

# objective-c - Cocoa - 内存问题 - NSTableView

> ID：13634610
> 
> 赞同：0
> 
> 时间：2012-11-29T20:59:38.320
> 
> 标签：objective-c, cocoa, memory, nstableview

我编写的当前代码在内存方面存在一个小问题，我是 cocoa 和使用面向对象语言编程的新手，所以目前 Xcode 为我完成了所有内存管理工作，但是现在这对我没有帮助。

目前的问题是我正在创建一个 NSTableView 并且它在每个单元格中都有图片以 0.5 秒的间隔更新，这很好，但是每次加载图像时都会创建一个新的 NSImageView 对象（这是我认为内存问题是，如果我错了，请纠正我），我如何缺乏解决这个问题的方法。这导致内存使用量每 0.5 秒增加约 5MB，因此在 10 分钟左右后，应用程序将占用我计算机内存的很大一部分。不知道创建的 NSImageView 对象没用后怎么去掉，又不会导致图片在显示过程中出现延迟...

这是当前代码：

```
-(void)play_view:(NSInteger)view{
     valid_times_counter = valid_times_counter + 1;
     if(valid_times_counter == ([valid_times count]-2)){
         valid_times_counter = 1;
     }
     [self performSelector:@selector(reload_table_data) withObject:self afterDelay:0.5];
}

-(void)reload_table_data{
    [view_table removeFromSuperview];
    [self addSubview:view_table];
    [view_table reloadData];
    [self play_view:valid_times_counter];
}

- (void)drawRect:(NSRect)dirtyRect
{
NSLog(@"drawing"); //Table being drawn, probably not relevant but just in case ;)

[[NSColor colorWithCalibratedRed:0.01f green:0.40f blue:0.69f alpha:1.00f]setFill];
NSRect bg = NSMakeRect(0, 0, self.frame.size.width, self.frame.size.height);
NSRectFill(bg);

if(level == 1){
    NSLog(@"draw_table Level 1");
    [view_table removeFromSuperview];
    [self setFrameSize:NSMakeSize(2048, 1024)];
    view_table = [[NSTableView alloc]initWithFrame:NSMakeRect(0, self.frame.size.height-1024, 2048, 1024)];
    for(int c = 0; c<4;c++){
        NSTableColumn *column = [[NSTableColumn alloc] initWithIdentifier:[NSString stringWithFormat:@"%i",c]];
        [[column headerCell] setStringValue:[NSString stringWithFormat:@"%i",c]];
        [column setWidth:512.0];
        [view_table addTableColumn:column];
    }
    [view_table setRowHeight:512];
    [view_table setDelegate:(id)self];
    [view_table setDataSource:(id)self];
    [view_table setIntercellSpacing:NSMakeSize(0, 0)];
    [view_table setIdentifier:@"view_table"];
    [view_table reloadData];

    [self addSubview:view_table];

}
else if(level == 2){
    NSLog(@"draw_table Level 2");
    [view_table removeFromSuperview];
    [self setFrameSize:NSMakeSize(4096, 2048)];
    view_table = [[NSTableView alloc]initWithFrame:NSMakeRect(0, self.frame.size.height-2048, 4096, 2048)];
    for(int c = 0; c<8;c++){
        NSTableColumn *column = [[NSTableColumn alloc] initWithIdentifier:[NSString stringWithFormat:@"%i",c]];
        [[column headerCell] setStringValue:[NSString stringWithFormat:@"%i",c]];
        [column setWidth:512.0];
        [view_table addTableColumn:column];
    }
    [view_table setRowHeight:512];
    [view_table setDelegate:(id)self];
    [view_table setDataSource:(id)self];
    [view_table setIntercellSpacing:NSMakeSize(0, 0)];
    [view_table setIdentifier:@"view_table"];
    [view_table reloadData];

    [self addSubview:view_table];
}
else if(level == 3){
    NSLog(@"draw_table Level 3");
    [view_table removeFromSuperview];
    [self setFrameSize:NSMakeSize(8192, 4096)];
    view_table = [[NSTableView alloc]initWithFrame:NSMakeRect(0, self.frame.size.height-4096, 8192, 4096)];
    for(int c = 0; c<16;c++){
        NSTableColumn *column = [[NSTableColumn alloc] initWithIdentifier:[NSString stringWithFormat:@"%i",c]];
        [[column headerCell] setStringValue:[NSString stringWithFormat:@"%i",c]];
        [column setWidth:512.0];
        [view_table addTableColumn:column];
    }
    [view_table setRowHeight:512];
    [view_table setBackgroundColor:[NSColor clearColor]];
    [view_table setDelegate:(id)self];
    [view_table setDataSource:(id)self];
    [view_table setIntercellSpacing:NSMakeSize(0, 0)];
    [view_table setIdentifier:@"view_table"];
    [view_table reloadData];

    [self addSubview:view_table];
}
else if(level == 4){
    NSLog(@"draw_table Level 4");
    [view_table removeFromSuperview];
    [self setFrameSize:NSMakeSize(16384, 8192)];
    view_table = [[NSTableView alloc]initWithFrame:NSMakeRect(0, self.frame.size.height-8192, 16384, 8192)];
    for(int c = 0; c<32;c++){
        NSTableColumn *column = [[NSTableColumn alloc] initWithIdentifier:[NSString stringWithFormat:@"%i",c]];
        [[column headerCell] setStringValue:[NSString stringWithFormat:@"%i",c]];
        [column setWidth:512.0];
        [view_table addTableColumn:column];
    }
    [view_table setRowHeight:512];
    [view_table setDelegate:(id)self];
    [view_table setDataSource:(id)self];
    [view_table setIntercellSpacing:NSMakeSize(0, 0)];
    [view_table setIdentifier:@"view_table"];
    [view_table reloadData];

    [self addSubview:view_table];
}
else if(level == 5){
    NSLog(@"draw_table Level 5");
    [view_table removeFromSuperview];
    [self setFrameSize:NSMakeSize(32768, 16384)];
    view_table = [[NSTableView alloc]initWithFrame:NSMakeRect(0, self.frame.size.height-16384, 32768, 16384)];
    for(int c = 0; c<64;c++){
        NSTableColumn *column = [[NSTableColumn alloc] initWithIdentifier:[NSString stringWithFormat:@"%i",c]];
        [[column headerCell] setStringValue:[NSString stringWithFormat:@"%i",c]];
        [column setWidth:512.0];
        [view_table addTableColumn:column];
    }
    [view_table setRowHeight:512];
    [view_table setBackgroundColor:[NSColor clearColor]];
    [view_table setDelegate:(id)self];
    [view_table setDataSource:(id)self];
    [view_table setIntercellSpacing:NSMakeSize(0, 0)];
    [view_table setIdentifier:@"view_table"];
    [view_table reloadData];

    [self addSubview:view_table];
}

//Problem section
-(NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row{

if([tableView.identifier isEqualToString: @"view_table"]){
    NSLog(@"---------VIEW---------");
    NSView *view = [tableView makeViewWithIdentifier:@"MyView2" owner:self];
    [tableView setSelectionHighlightStyle:NSTableViewSelectionHighlightStyleNone];

    if (view == nil) {
        view = [[NSView alloc]initWithFrame:NSMakeRect(0, 0, 512, 512)];
        NSString *table_id;
        if([tableColumn.identifier integerValue]<10){
            table_id = [NSString stringWithFormat:@"000%@",tableColumn.identifier];
        }
        else if([tableColumn.identifier integerValue]<100){
            table_id = [NSString stringWithFormat:@"00%@",tableColumn.identifier];
        }
        else if([tableColumn.identifier integerValue]<1000){
            table_id = [NSString stringWithFormat:@"0%@",tableColumn.identifier];
        }
        NSString *row_id;
        if(row < 10){
            row_id = [NSString stringWithFormat:@"000%li",row];
        }
        else if(row < 100){
            row_id = [NSString stringWithFormat:@"00%li",row];
        }
        else if(row < 1000){
            row_id = [NSString stringWithFormat:@"0%li",row];
        }

        if([valid_times count]>1){
            image_view2 = [[NSImageView alloc] initWithFrame:NSMakeRect(0, 0, 512, 512)]; //This gets repeated every 0.5s, and this is what is causing the problem I think...
            NSString *url_str = [self get_url:(valid_times_counter):table_id:row_id];
            NSLog(@"Loading Image from: %@", url_str);
            NSImage *map_tile2 = [[NSImage alloc] initWithContentsOfFile:url_str];
            [image_view2 setImage:map_tile2];
            [view addSubview:image_view2];
        }
        else{
            //No Views found
            NSLog(@"ERROR, NO IMAGES FOUND 348.map_view.h-tableView.viewForTableColumn:row For data %@", [valid_times objectAtIndex:0]);
        }
    }
    return view; 
```

我已经在代码中评论了我认为问题所在的部分，有没有人知道解决方案，我想只是更改单元格的内容而不是每次都重新加载表格数据，但我真的不知道如何去做。

如果您需要更多详细信息，请询问，我会很乐意提供任何想法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:13:52.460

你必须在 image_view2 上调用 alloc/init 吗？由于您每次都对尺寸进行硬编码，因此您似乎可以设置新图像？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T21:18:10.767

在每一行上，您似乎都在重新分配您的表格视图。

```
view_table = [[NSTableView alloc]initWithFrame:NSMakeRect(0, self.frame.size.height-4096, 8192, 4096)]; 
```

撇开帧大小的奇数数字不谈，您不应该重新创建表格视图。如果要重新加载数据，只需调用`-reloadData`，但不要一直删除和添加表格视图。我不知道您是否使用 ARC，但很可能您的问题是您没有释放表视图占用的旧内存，而是为旧 ivar 分配了一个新实例。旧实例仍在某处，但您无法访问它，因为您重新分配了指针。

你也在做所有这些奇怪的重新加载的东西，`-drawRect:`其中有很多原因是可怕的。

# android - 如何让我的服务开始一项活动？

> ID：13634614
> 
> 赞同：0
> 
> 时间：2012-11-29T20:59:41.357
> 
> 标签：android, android-intent, service, android-activity

我有我的服务工作，但由于某种原因它不会开始我的活动。它也不会在 logcat 中显示错误。我希望我的服务开始另一个活动。那可能吗？我检查以确保我的 if 语句是正确的。它确实打印出你好。

服务代码如下：

```
package com.example.textsmslock;
import java.util.Iterator;
import java.util.List;
import android.app.ActivityManager;
import android.app.Service;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.os.IBinder;
import android.util.Log;
public class Logs extends Service
{
    @Override
    public IBinder onBind(Intent arg0){
         // TODO Auto-generated method stub
        return null;
    }
     @Override
        public void onStart(Intent intent, int startId) {
            // TODO Auto-generated method stub
            super.onStart(intent, startId);
            System.out.println("LOGS STARTED");
            ActivityManager am = (ActivityManager)this.getSystemService(ACTIVITY_SERVICE);
            List l = am.getRunningAppProcesses();
            Iterator i = l.iterator();
            PackageManager pm = this.getPackageManager();
            while(i.hasNext()) 
            {
                ActivityManager.RunningAppProcessInfo info = (ActivityManager.RunningAppProcessInfo)(i.next());
                try 
                {
                    CharSequence c = pm.getApplicationLabel(pm.getApplicationInfo(info.processName, PackageManager.GET_META_DATA));
                    Log.w("LABEL", c.toString());
                    //System.out.println("this is the charsequence: " + c);
                    //System.out.println("this is the log: " + Log.w("LABEL", c.toString()));
                    if(c.equals("Messaging"))
                    {
                        System.out.println("HELLO \n");

                        startActivity(new intent(("com.example.textsmslock.Enable"));

                    }
                }
                catch(Exception e) 
                {
                    //Name Not FOund Exception
                }
        }
       @Override
        public void onDestroy() {
            // TODO Auto-generated method stub
            super.onDestroy();
            System.out.println("LOGS STOPPED"); 
       }
} 
```

安卓清单

```
<activity
        android:name=".Enable"
        android:label="@string/title_activity_enable" >
        <intent-filter>
            <action android:name="com.example.textsmslock.Enable" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
<service android:name=".Logs" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </service> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:02:57.963

您必须将标志[Intent.FLAG_ACTIVITY_NEW_TASK](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NEW_TASK)添加到活动意图中。

这条线

```
startActivity(new intent(("com.example.textsmslock.Enable")); 
```

现在应该是

```
Intent i = new Intent( this, YourActivity.class );
i.setFlags( Intent.FLAG_ACTIVITY_NEW_TASK );
startActivity( i ); 
```

# java - 在此示例案例中了解 Java 泛型的最佳使用

> ID：13634616
> 
> 赞同：0
> 
> 时间：2012-11-29T20:59:51.407
> 
> 标签：java, generics

假设我有一个制造调度系统，它由四个部分组成：

*   有些工厂可以生产某种类型的产品并知道他们是否忙：

    ```
    interface Factory<ProductType> {
        void buildProduct(ProductType product);
        boolean isBusy();
    } 
    ```

*   有一组不同的产品，它们（除其他外）知道它们是在哪个工厂建造的：

    ```
    interface Product<ActualProductType extends Product<ActualProductType>> {
        Factory<ActualProductType> getFactory();
    } 
    ```

*   然后是一个订购系统，可以生成对要构建的产品的请求：

    ```
    interface OrderSystem {
        Product<?> getNextProduct();
    } 
    ```

*   最后，有一个调度程序可以获取订单并为每个工厂维护一个工作队列：

    ```
    class Dispatcher {
        Map<Factory<?>, Queue<Product<?>>> workQueues
                          = new HashMap<Factory<?>, Queue<Product<?>>>();

        public void addNextOrder(OrderSystem orderSystem) {
            Product<?> nextProduct = orderSystem.getNextProduct();
            workQueues.get(nextProduct.getFactory()).add(nextProduct);
        }

        public void assignWork() {
            for (Factory<?> factory: workQueues.keySet())
                if (!factory.isBusy())
                    factory.buildProduct(workQueues.get(factory).poll());
        }
    } 
    ```

*免责声明：此代码只是一个示例，并且有几个错误（检查工厂是否存在作为 workQueues 中的键丢失，...）并且非常非最优（可以迭代 entryset 而不是 keyset，...）*

**现在的问题：**

Dispatcher ( ) 中的最后一行`factory.buildProduct(workqueues.get(factory).poll());`抛出了这个编译错误：

```
The method buildProduct(capture#5-of ?) in the type Factory<capture#5-of ?> is not applicable for the arguments (Product<capture#7-of ?>) 
```

我一直在绞尽脑汁思考如何以一种类型安全的方式解决这个问题，但是我的泛型技能在这里让我失望了......

例如，将其更改为以下内容也无济于事：

```
public void assignWork() {
    for (Factory<?> factory: workQueues.keySet())
        if (!factory.isBusy()) {
            Product<?> product = workQueues.get(factory).poll();
            product.getFactory().buildProduct(product);
        }
} 
```

即使在这种情况下，应该清楚这没关系......

我想我可以为每个调用的 Product 添加一个“buildMe()”函数`factory.buildProduct(this)`，但我很难相信这应该是我最优雅的解决方案。

有任何想法吗？

**编辑：**

Product 和 Factory 实现的简单示例：

```
class Widget implements Product<Widget> {
    public String color;

    @Override
        public Factory<Widget> getFactory() {
            return WidgetFactory.INSTANCE;
    }
}

class WidgetFactory implements Factory<Widget> {
    static final INSTANCE = new WidgetFactory();

    @Override
    public void buildProduct(Widget product) {
        // Build the widget of the given color (product.color)
    }

    @Override
    public boolean isBusy() {
        return false; // It's really quick to make this widget
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:16:58.800

你的代码很奇怪。
您的问题是您将 A 传递`Product<?>`给一个期望 a`ProductType`实际上是的方法`T`。
我也不知道是什么`Product`，因为你没有在 OP 中提到它的定义。
你需要通过a`Product<?>`才能工作。我不知道你会从哪里得到它，因为我不明白你想用你的代码做什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T21:18:33.090

```
Map<Factory<?>, Queue<Product<?>>> workQueues = new HashMap<Factory<?>, Queue<Product<?>>>();

// factory has the type "Factory of ?"
for (Factory<?> factory: workqueues.keySet())       
    // the queue is of type "Queue of Product of ?"
    Queue<Product<?>> q = workqueues.get(factory);

    // thus you put a "Product of ?" into a method that expects a "?"
    // the compiler can't do anything with that.
    factory.buildProduct(q.poll());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T01:16:28.267

知道了！感谢 Meriton 回答了这个版本的问题：

[如何用编译时泛型验证替换运行时 instanceof 检查](https://stackoverflow.com/questions/13636312/how-to-replace-run-time-instanceof-check-with-compile-time-generics-validation)

我需要通过`product.getFactory().buildProduct(product)`在单独的通用函数中执行此操作来逐步通过 -part 编译器。以下是我需要对代码进行的更改以使其正常工作（真是一团糟）：

*   更具体地了解 OrderSystem：

    ```
    interface OrderSystem {
        <ProductType extends Product<ProductType>> ProductType getNextProduct();
    } 
    ```

*   定义我自己的更强类型的队列来保存产品：

    ```
    @SuppressWarnings("serial")
    class MyQueue<T extends Product<T>> extends LinkedList<T> {}; 
    ```

*   最后，将 Dispatcher 更改为这个野兽：

    ```
    class Dispatcher {
        Map<Factory<?>, MyQueue<?>> workQueues = new HashMap<Factory<?>, MyQueue<?>>();

        @SuppressWarnings("unchecked")
        public <ProductType extends Product<ProductType>> void addNextOrder(OrderSystem orderSystem) {
            ProductType nextProduct = orderSystem.getNextProduct();
            MyQueue<ProductType> myQueue = (MyQueue<ProductType>) workQueues.get(nextProduct.getFactory());
            myQueue.add(nextProduct);
        }       

        public void assignWork() {
            for (Factory<?> factory: workQueues.keySet())
                if (!factory.isBusy())
                    buildProduct(workQueues.get(factory).poll());
        }

        public <ProductType extends Product<ProductType>> void buildProduct(ProductType product) {
            product.getFactory().buildProduct(product);
        }
    } 
    ```

注意所有的通用函数，尤其是最后一个。另请注意，我不能像在原始问题中那样将此函数内联回我的 for 循环。

另请注意，队列的类型转换需要函数`@SuppressWarnings("unchecked")`上的注释，而不是某些 Product 对象。`addNextOrder()`因为我只在这个队列上调用“add”，在编译和类型擦除之后，它会将所有元素简单地存储为对象，这不应该导致任何运行时转换异常。（如有错误请指正！）

# r - 将 3D 数据压缩为 R 中的矩阵

> ID：13634620
> 
> 赞同：1
> 
> 时间：2012-11-29T21:00:19.910
> 
> 标签：r, matrix, reshape, multidimensional-array

因此，我以 130X130 的降序方式一次对矩阵进行排序，并且我想创建一个行名称相同的新矩阵，但每个排序的行列名称是数据所在的位置和括号中的数据在相应的列名称旁边。它有点像创建一个尺寸为 130x130x2 的 psuedo3D 数组，然后将其压缩成一个没有列名的 130x130 矩阵。这是一个较小的例子。

> 例子

```
 A   B   C   D   
    A   14  82  18  50
    B   39  95  27  19
    C   60  40  32  15
    D   70  31  69  31 
```

这就是我要的

```
 A   B(82)   D(50)   C(18)   A(14)
    B   B(95)   A(39)   C(27)   D(19)
    C   A(60)   B(40)   C(32)   D(15)
    D   A(70)   C(69)   B(31)   D(31) 
```

我希望这是有道理的！

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T21:32:45.670

干得好：

首先，重新创建您的数据：

```
x <- read.table(text="
        A   B   C   D   
    A   14  82  18  50
    B   39  95  27  19
    C   60  40  32  15
    D   70  31  69  31", header=TRUE) 
```

* * *

两个`apply()`s, a`paste()`和 a `matrix()`，剩下的就是细节：

```
o <- apply(x, 1, order, decreasing=TRUE)
v <- apply(x, 1, sort, decreasing=TRUE)

matrix(paste(names(x)[o], t(v)), ncol=4, byrow=TRUE)

     [,1]   [,2]   [,3]   [,4]  
[1,] "B 82" "D 50" "C 18" "A 14"
[2,] "B 95" "A 39" "C 27" "D 19"
[3,] "A 60" "B 40" "C 32" "D 15"
[4,] "A 70" "C 69" "B 31" "D 31" 
```

* * *

**编辑：**根据 Jeff Allen 的评论，这可以进一步简化为：

```
t(apply(x, 1, function(x){s <- order(x, decreasing=TRUE); paste(names(x)[s], x[s])}))

  [,1]   [,2]   [,3]   [,4]  
A "B 82" "D 50" "C 18" "A 14"
B "B 95" "A 39" "C 27" "D 19"
C "A 60" "B 40" "C 32" "D 15"
D "A 70" "C 69" "B 31" "D 31" 
```

（由于它只有一个`apply`，它应该更快。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T21:19:15.210

我希望有人会提出一个矢量化的解决方案，但这里有一个选择：

```
sortTab <- function(tab){
    for (i in 1:nrow(tab)){
        #Get the order of the elements in the current row
        ord <- order(tab[i,], decreasing=TRUE)

        #get the associated column names and values with this ordering      
        res <- paste(colnames(tab)[ord], "(", tab[i,ord], ")", sep="")

        #assign back to the data.frame
        tab[i,] <- res

    }
    tab
} 
```

并使用您的数据进行测试：

```
txt <- textConnection("        A   B   C   D   
    A   14  82  18  50
    B   39  95  27  19
    C   60  40  32  15
    D   70  31  69  31")
tab <- read.table(txt)

> sortTab(tab)
      A     B     C     D
A B(82) D(50) C(18) A(14)
B B(95) A(39) C(27) D(19)
C A(60) B(40) C(32) D(15)
D A(70) C(69) B(31) D(31) 
```

# asp.net - ScriptResource.axd 调用的参数是如何生成的？

> ID：13634621
> 
> 赞同：2
> 
> 时间：2012-11-29T21:00:25.693
> 
> 标签：asp.net, iis, iis-6, infragistics

客户在其网站周围有自定义防火墙规则，以防止任何数量的攻击。自定义规则之一阻止所有请求（GET 或 POST），包括双连字符，以防止 SQL 注入。昨晚更新他们的网站时，我们遇到了一个问题，在每个页面上，对 ScriptResource.axd 的调用之一都包含一个双连字符 (--)，导致对脚本的访问被拒绝。

我们之前看到过这个问题，并认为我们已经通过使用 ScriptReferenceProfiler 来解决这个问题，以便生成我们需要组合的脚本列表，以便删除如此多的脚本引用。这一直有效，直到昨晚问题再次发生时更新。（有趣的是，我重新运行了 ScriptReferenceProfiler，它识别的所有脚本都已经包含在 CompositeScript 列表中，所以我不知道这个文件来自哪里。）

我终于创建了一个新的 IIS 虚拟目录，其中没有出现双破折号的问题，尽管指向与以前的虚拟目录相同的目录和代码库。（我将初始虚拟目录设置为重定向到新目录，这样用户就不必担心更新链接或书签。）我可以从[这篇文章](https://stackoverflow.com/questions/2740679/how-does-asp-net-generate-a-scriptresource-axd-url)中看到，第一个参数是通过加密程序集名称和生成的resourcename，它解释了两个虚拟目录之间的值的差异。

但显然，我想在未来避免这种情况。有人对如何防止双破折号出现在 ScriptResource 请求中有任何想法吗？

作为参考，这发生在在 IIS 6/Windows Server 2003 上以 .NET 4.0 运行的 VB.Net 网站中。此外，被拒绝的脚本文件是用于某种 Infragistics 控件。（我暂时关闭了防火墙规则以获取文件，然后重新启用它。不过，我无法从脚本中看出它对 Infragistics 的作用。）

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T19:47:51.397

第一个参数 (d) 是程序集和资源。对于程序集，如果程序集是强命名的，则这包括名称和版本以及公钥标记。如果其中任何一个发生更改，则资源的字符串也将更改。

第二个参数 (t) 仅用于时间戳，如果在更新包含嵌入式资源的程序集而不更改程序集名称或版本的情况下，即使在站点上启用了缓存，这也允许资源更改。

第一个参数的加密基于 MachineKey，因此您可以更改 MachineKey 以更改加密产生的字符串。即使您不控制您使用的所有程序集的名称和版本，这也可以帮助您在问题出现时有一个简单的解决方法。

您可能感兴趣的相关阅读：

*   [machineKey 元素（ASP.NET 设置架构）](http://msdn.microsoft.com/en-us/library/vstudio/w8h3skw9%28v=vs.100%29.aspx)
*   [如何：在 ASP.NET 2.0 中配置 MachineKey](http://msdn.microsoft.com/en-us/library/ff649308.aspx#paght000007_webfarmdeploymentconsiderations)
*   [调试 ASP.NET 2.0 Web 资源：解密 URL 并获取资源名称](http://blogs.telerik.com/hristodeshev/posts/07-03-27/debugging-asp-net-2-0-web-resources-decrypting-the-url-and-getting-the-resource-name.aspx)

# testing - 在不打开浏览器的情况下使用 chromeDriver 运行 Geb 测试

> ID：13634624
> 
> 赞同：0
> 
> 时间：2012-11-29T21:00:35.870
> 
> 标签：testing, grails, geb, selenium-chromedriver

我想用 chrome 驱动程序运行我的 Geb 规格，而不必在浏览器上观看测试？可以这样做吗？

PD：我知道我可以使用 HtmlUnitDriver，但是这个驱动程序有时会给出我的错误（主要由超时引起），而 chrome 驱动程序不会。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T04:01:33.650

目前无法使用 Chrome、Safari、Opera 或 FireFox 执行此操作，但是您可以执行多个选项。首先是将“窗口”通过管道传输到虚拟帧缓冲区（如果您使用的是 Linux）。这个过程会弹出打开浏览器，只在内存中。我在 maven 预集成阶段的博客文章 ( [http://www.ensor.cc/2011/05/maven-javascript-unit-test-using.html ) 中谈到了这一点](http://www.ensor.cc/2011/05/maven-javascript-unit-test-using.html)

另一种选择是使用全新的 GhostDriver。GhostDriver 是 PhantomJS 的 WebDriver 实现，它是一个无头 WebKit。这比 HtmlUnit 好得多，但仍有一些功能正在构建中。GhostDriver 目前不在 Maven Central 中，因此您需要手动将其添加到公共存储库中。然后，您可以将其用作 WebDriver。这对我来说取得了一定的成功（我 90% 的测试用例无需任何更改即可投入使用）。

先阅读这个：http: [//blog.ivandemarino.me/2012/12/04/Finally-GhostDriver-1-0-0](http://blog.ivandemarino.me/2012/12/04/Finally-GhostDriver-1-0-0) 然后参考GitHub README和代码：[https ://github.com/detro/ghostdriver](https://github.com/detro/ghostdriver)

# python - 在 Python 字符串中查找 UTF-8 字符的索引

> ID：13634627
> 
> 赞同：2
> 
> 时间：2012-11-29T21:00:42.070
> 
> 标签：python, string, unicode, utf-8

我试图`UTF-8`在外语的编码字符串中找到某个字符的索引（或索引）（例如字符：）`ش`。

我试过`unicode.find('ش')`,`word.find(u'ش')`和`word.find(u'\\uش')`正则表达式：`re.compile(u'\\uش)`无济于事。有趣的是，在调试模式下的 Visual Studio（我使用 IronPython 的 IDE）中，`word.find(u'\\uش')`在变量监视窗口中返回正确的索引，但在实际代码中却没有（返回`index=-1`）。

我正在使用以下命令从文件中读取字符串：

```
file= codecs.open(file,'r','utf-8') 
```

有什么我想念的吗？还是有另一种方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:26:07.373

一旦你`codecs`用来读取文件，它就不再是 UTF-8，它是一个内部 Unicode 字符串表示。这应该与程序中的 Unicode 文字完全兼容。

```
>>> line=u'abcش'
>>> line.find(u'ش')
3 
```

**编辑：**我之前的测试可能具有误导性，因为这两个字符串都是通过 IDE 输入的。这是一个更好的例子：

```
>>> f = codecs.open(r'c:\temp\temp.txt', 'r', 'utf-8-sig')
>>> line = f.readline()
>>> print line
This is a test.ش

>>> line.find(u'\u0634')
15 
```

# javascript - 更新不同表格时如何从特定用户那里获取性别？Azure 移动服务

> ID：13634630
> 
> 赞同：3
> 
> 时间：2012-11-29T21:00:48.277
> 
> 标签：javascript, azure, azure-storage, azure-mobile-services

我有一个名为 Subscription 的表和另一个名为 Client 的表，我每次进行更新时都需要拥有订阅的客户的性别。这是我的更新脚本：

```
 function update(item, user, request) {
    var subscriptionId = item.id;
    var subscriptionActivitiesTable = tables.getTable("SubscriptionActivity");
    var userTable = tables.getTable("User");
    var activityTable = tables.getTable("Activity");
    var userGender = userTable.where({id: item.UserId}).select('Gender').take(1).read();
    console.log(userGender);
    activityTable.where({PlanId:item.PlanId, Difficulty: item.Difficulty}).read({
         success: function(results){
             var startDate = item.StartDate;
             results.forEach(function(activity)
             {
                var testDate = new Date(startDate.getFullYear(),startDate.getMonth(), startDate.getDate());
                testDate.setDate(testDate.getDate() + activity.Sequence + (activity.Week*7));
                subscriptionActivitiesTable.insert({SubscriptionId: subscriptionId, 
                ActivityId: activity.id, ShowDate: new Date(testDate.getFullYear(), 
                    testDate.getMonth(), testDate.getDate()), CreationDate: new Date()});

             })
         }
     });

     var planWeeks = 12;//VER DE DONDE SACAMOS ESTE NUMERO
     var idealWeight = 0;
     if (userGender === "Male")
     {
        idealWeight = (21.7 * Math.pow(parseInt(item.Height)/100,2));    
     }
     else
     {
         idealWeight = (23 * Math.pow(parseInt(item.Height)/100,2));  
     }

     var metabolismoBasal = idealWeight * 0.95 * 24;
     var ADE = 0.1 * metabolismoBasal;
     var activityFactor;
     if (item.Difficulty === "Easy")
     {
         activityFactor = 1.25;
     }
     else if(item.Difficulty === "Medium")
     {
         activityFactor = 1.5;
     }
     else
     {
         activityFactor = 1.75;
     }
     var caloricRequirement = ((metabolismoBasal + ADE)*activityFactor);
     activityTable.where(function(item, caloricRequirement){
         return this.PlanId === item.PlanId && this.Type != "Sport" && 
         this.CaloricRequirementMin <= caloricRequirement && 
         this.CaloricRequirementMax >= caloricRequirement;}, item, caloricRequirement).read({
         success: function(results)
         {
             var startDate = item.StartDate;
             results.forEach(function(activity)
             {
                for (var i=0;i<planWeeks;i++)
                {
                     var testDate = new Date(startDate.getFullYear(),startDate.getMonth(), startDate.getDate());
                     testDate.setDate(testDate.getDate() + activity.Sequence + (i*7));
                     subscriptionActivitiesTable.insert({SubscriptionId: subscriptionId, 
                     ActivityId: activity.id, ShowDate: new Date(testDate.getFullYear(), 
                     testDate.getMonth(), testDate.getDate()), CreationDate: new Date()});
                }
             })
         }
     })
     request.execute();
} 
```

我试过上面的代码，clientGender 是未定义的。如您所见，我想使用性别来设置理想体重。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T05:36:03.153

该`read()`方法期望在`success`参数上传递一个函数 - 它不会像您想象的那样返回查询结果。

尝试这样的事情：

```
function update(item, user, request) {
    var clientTable = tables.getTable("Client");
    var clientGender = 'DEFAULT';
    clientTable.where({id: item.ClientId}).select('Gender').take(1).read({
        success: function(clients) {
            if (clients.length == 0) {
                console.error('Unable to find client for id ' + item.ClientId);
            } else {
                var client = client[0];
                clientGender = client.Gender;

                // since we're inside the success function, we can continue to 
                // use the clientGender as it will reflect the correct value
                // as retrieved from the database
                console.log('INSIDE: ' + clientGender);
            }
        }
    });

    // this is going to get called while the clientTable query above is
    // still running and will most likely show a value of DEFAULT 
    console.log('OUTSIDE: ' + clientGender);

} 
```

在这个示例中，客户端表查询被启动，`success`参数中提供了一个回调函数。查询完成后，调用回调函数，并将结果数据显示到日志中。同时——在查询还在运行的时候，也就是——运行流畅代码之后的下一条`where`语句，执行另一条`take`语句，显示函数外的clientGender字段的值。此代码将在语句仍在数据库上等待时运行。您的输出在 WAMS 日志中应如下所示：`select``read``console.log``read``read`

```
* INSIDE: Male
* OUTSIDE: Default 
```

由于日志在底部显示最旧的条目，因此您可以看到 OUTSIDE 日志条目是在 INSIDE 日志之前的某个时间写入的。

如果您不习惯异步或函数式编程，这可能看起来很奇怪，但据我发现，这现在是节点工作。嵌套在函数中的函数可能会有点吓人，但如果你提前计划，它可能不会太糟糕:-)

# java - 将某些模式的字符串替换为某些模式

> ID：13634631
> 
> 赞同：0
> 
> 时间：2012-11-29T21:00:51.173
> 
> 标签：java

我有一个巨大的字符串需要替换

```
Pattern A to pattern B
Pattern C to Pattern D
pattern E to pattern F 
```

像 5 或 6 次我必须替换字符串的某些部分。

如果我做一个直接的字符串操作来一个一个地替换它们，它会占用巨大的堆空间。

喜欢`replaceAll().replaceAll().replaceALL`

pattern.compile("(模式 a|patternc)"); 他不会是因为我们只能用 1 parrten x 替换这种类型的模式。

什么可能是一种内存有效的方式来进行这种替换。

正则表达式有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:05:25.497

我通常信任 apache，他们有你需要的东西，但我不能评论他们实现多个字符串替换的内存效率

[Apache StringUtils.ReplaceEachRepeatedly](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#replaceEachRepeatedly%28java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String%5B%5D%29)

从查看源代码来看，它似乎使用带有递归调用的 StringBuffer 操作，所以它应该有点内存效率（我不认为你会用完堆栈空间）

[链接到 Apache 的 ReplaceEach 的源代码](http://commons.apache.org/lang/api-2.5/src-html/org/apache/commons/lang/StringUtils.html#line.3901)

编辑：Apache Commons Lang 版本 3 实际上使用 StringBuilder 并试图在字符串替换期间最小化内存使用量。我强烈建议您查看源代码或直接使用该库。

# javascript - 删除预定义字符串后的字符串

> ID：13634633
> 
> 赞同：20
> 
> 时间：2012-11-29T21:01:07.283
> 
> 标签：javascript, replace

在使用 jquery 格式化和编辑返回的 rss 提要（字符串）之前，我正在从 RSS 提要中提取内容。我`replace`用来替换字符串和字符，如下所示：

```
var spanish = $("#wod a").text();
var newspan = spanish.replace("=","-");
$("#wod a").text(newspan); 
```

这很好用。我也试图在某个点之后删除所有文本。与截断类似，我想隐藏以“示例”开头的所有文本。

在这个特定的 RSS 提要中，每个提要中都有单词示例。我想隐藏`"example"`，所有文字都跟在那个词后面。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-29T21:04:02.720

虽然没有足够的 jQuery，但您甚至不需要它来删除给定字符串中某个单词之后的所有内容。第一种方法是使用`substring`：

```
var new_str = str.substring(0, str.indexOf("Example")); 
```

第二个是一个技巧`split`：

```
var new_str = str.split("Example")[0]; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-18T19:38:40.287

如果您还想保留“示例”并删除该特定单词*之后的所有内容，您可以执行以下操作：*

```
var str = "aaaa1111?bbb&222:Example=123456",
    newStr = str.substring(0, str.indexOf('Example') + 'Example'.length);

// will output: aaaa1111?bbb&222:Example 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-29T21:03:01.153

jQuery 不适用于字符串操作，您应该使用[Vanilla JS](http://vanilla-js.com/)：

```
newspan = newspan.replace(/example.*$/i, ""); 
```

该[`.replace()`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)接受正则表达式，因此在这种情况下，我使用`/example.*$/i`了它对单词“example”进行不区分大小写的匹配，后跟零个或多个任何其他字符到字符串的末尾，并将它们替换为空字符串.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-11T20:54:31.833

> 我想隐藏以“示例”一词开头的所有文本

一种使用更简单的替换 WITH 反向引用的解决方案，以便“隐藏”以单词 Example 开头的所有内容，但保留前面的内容。

```
var str = "my house example is bad"
str.replace(/(.*?) example.*/i, "$1")     // returns "my house"
// case insensitive. also note the space before example because you 
// probably want to throw that out. 
```

# knockout.js - 敲除映射 + 计算的子元素 + “映射重新加载”失败

> ID：13634638
> 
> 赞同：0
> 
> 时间：2012-11-29T21:01:10.817
> 
> 标签：knockout.js, knockout-mapping-plugin

我希望使用 Knockout 映射来生成 ViewModel。

```
var viewModel = ko.mapping.fromJS(data); 
```

创建 ViewModel 后，我想添加计算文本元素。

```
for (var i = 0; i < viewModel.Packages().length; i++) {
    var pack = viewModel.Packages()[i];
    pack.packageClass = ko.computed(function() {
        return this.Height() * this.Depth() * this.Width()
    }, pack);
} 
```

绑定页面。

```
ko.applyBindings(viewModel); 
```

页面在这种状态下工作正常......

但现在用户想“保存”和“重新加载”页面。这将使用映射功能来完成，该功能使用新数据更新 ViewModel。

```
data = ko.mapping.toJSON(viewModel); 
```

但是在重新绑定页面之前不可能再次添加那些计算字段。而且我会得到错误，即找不到计算元素（不再）。

```
ko.mapping.fromJS(data, viewModel); 
```

**我做错了什么吗？**

没有计算字段或没有重新加载 ViewModel 一切正常...

**更新：小提琴更新为像在解决方案中一样工作。**

[小提琴样本](http://jsfiddle.net/pylenius/yukAa/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:24:18.147

创建显式 ViewModel

```
PackageViewModel = function(data) {
    ko.mapping.fromJS(data, {}, this);

    this.packageClass = ko.computed(function() {
        return this.Height() * this.Depth() * this.Width()
    }, this);
}; 
```

然后使用这样的 mappign 选项

```
var mapping = {
   Packages: {
      create: function(options) {
         return new PackageViewModel(options.data);
      }
   }
};

ko.applyBindings(ko.mapping.fromJS(data, mapping)); 
```

# php - Jquery Uploader 调用未定义的方法 UploadHandler::query()

> ID：13634639
> 
> 赞同：0
> 
> 时间：2012-11-29T21:01:15.933
> 
> 标签：php, jquery, file-upload

我正在尝试设置 Jquery 上传器，以便在完成文件上传时将文件名添加到 mysql 数据库中。 [https://github.com/blueimp/jQuery-File-Upload/wiki/Working-with-databases](https://github.com/blueimp/jQuery-File-Upload/wiki/Working-with-databases)

在 uploadhandler.php 中，我添加了以下内容：

```
 $file->upload_to_db = $this->add_img($file->name); 
```

并且

```
///////////////////////////////////////
function add_img($whichimg)
{
$add_to_db = $this->query("INSERT INTO u5b0y_chronoforms_data_submitusedequipment     (photo) VALUES ('".$whichimg."')") or die(mysql_error());
return $add_to_db;
 } 
```

////////////////////////////////////

正如文档指示........但是当我上传文件时，文件已正确上传，我在 Firebug 中收到以下错误，但数据库表未使用文件名更新。

```
<b>Fatal error</b>:  Call to undefined method UploadHandler::query() in 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:48:31.857

您的 UploadHandler 中有方法 query() 吗？我认为没有。在文档中，我找到了下一个：

> 因此，现在您必须为 SQL Query 编写一个函数，例如在 handle_file_upload 函数之后复制并粘贴以下代码：

```
function query($query) {

         $database = $this->options['database'];
         $host = $this->options['host'];
         $username = $this->options['username'];
         $password = $this->options['password'];
         $link = mysql_connect($host,$username,$password);

     if (!$link) {

         die(mysql_error());

         }

         $db_selected = mysql_select_db($database);

    if (!$db_selected) {

         die(mysql_error());
         }

         $result = mysql_query($query);
         mysql_close($link);
         return $result;

} 
```

搜索这一行 - > **$this->options = array(**

在下一行添加以下代码：

```
// mysql connection settings
 'database' => '**YOUR DATABASE**',
 'host' => '**localhost**',
 'username' => '**YOUR USERNAME**',
 'password' => '**YOUR PASSWORD**',
 // end 
```

这是你做的吗？

# jquery - 动态加载内容而不重新加载

> ID：13634642
> 
> 赞同：-1
> 
> 时间：2012-11-29T21:01:20.810
> 
> 标签：jquery, html

我想加载内容而不重新加载整个页面。

这段代码有什么问题？

另外，如何在这些页面之间进行转换？

如果我从主页单击服务，我希望创建淡入/淡出效果。

我对 jQuery 完全陌生。

这是我的代码

```
 <!DOCTYPE HTML>
     <html>
     <head>
     <meta charset="utf-8">
     <title>Untitled Document</title>
     <link rel="stylesheet" href="css/main.css" type="text/css" media="screen">
     <!--[if lt IE 9]>
     <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
     <![endif]-->
     <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js'></script>
     <script type="text/javascript">
       function updateContainer( url ){
         dynamicCon = '#content';    
         ObjTag = $( dynamicCon );
         ObjTag.load( url );
       }
       $( document ).ready( function() {
         $( 'a[rel="dynamicLoad"]' ).bind( "click", function( event ) {
           url = $( this ).attr( 'href' );
           alert(url);
           updateContainer( url );
           event.preventDefault();
           event.stopPropagation();
         });
       });
     </script>
     </head> 
```

这是正文内容：

![在此处输入图像描述](../Images/af60f6a67f2eda095f95c2bc34b9051b.png)

stackoverflow 正在解析它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:30:00.637

该`.load()`功能在chrome中不起作用..它在firefox / ie中工作正常。

# c - 对 4 个整数大小的数组进行 SSE 操作

> ID：13634644
> 
> 赞同：2
> 
> 时间：2012-11-29T21:01:41.993
> 
> 标签：c, assembly, sse, simd, intrinsics

抱歉之前的非描述性问题。请允许我再次改述这个问题：

设置：

我需要使用 SSE 同时对 4 个数组中的 4 个 32 位值进行 ADD 和一些位操作。这 4 个数组中的所有元素都是整数大小（32 位）。结果进入第 5 个数组。

所以我的问题是：

1.  我需要包含哪些头文件和编译器标志才能使用 C 运行 SSE？
2.  Paul 提供的示例代码是否仍然有效？

另一个问题，如果我需要从整数 A 中读取最后一位，从整数 B 中读取第一位，并用我刚刚读取的值替换整数 C 中的最后一位和第一位，我可以在这里使用 SSE 吗？或者有什么快速的方法吗？而不是正常情况下的 3 次访问？

保罗提供的代码

```
#include <stdint.h>
#include <emmintrin.h>

const size_t N = 4096;  // size of input/output arrays

int32_t array0[N];      // 4 x input arrays
int32_t array1[N];
int32_t array2[N];
int32_t array3[N];
int32_t array_sum[N];   // output array

for (size_t i = 0; i < N; i += 4)
{
    __m128i v0 = _mm_load_si128(&array0[i]); // load 4 x vectors of 4 x int
    __m128i v1 = _mm_load_si128(&array1[i]);
    __m128i v2 = _mm_load_si128(&array2[i]);
    __m128i v3 = _mm_load_si128(&array3[i]);
    __m128i vsum = _mm_add_epi32(v0, v1);    // sum vectors
    __m128i vsum = _mm_add_epi32(vsum, v2);
    __m128i vsum = _mm_add_epi32(vsum, v3);
    _mm_store_si128(&array_out[i], vsum);    // store sum
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T07:40:29.197

您拥有的代码确实可以工作，只需稍作改动。

```
#include <stdint.h>
#include <emmintrin.h>

const size_t N = 4096;  // size of input/output arrays

__declspec(align(16)) int32_t array0[N];      // 4 x input arrays
__declspec(align(16)) int32_t array1[N];
__declspec(align(16)) int32_t array2[N];
__declspec(align(16)) int32_t array3[N];
__declspec(align(16)) int32_t array_sum[N];   // output array

for (size_t i = 0; i < N; i += 4)
{
    __m128i v0 = _mm_load_si128(&array0[i]); // load 4 x vectors of 4 x int
    __m128i v1 = _mm_load_si128(&array1[i]);
    __m128i v2 = _mm_load_si128(&array2[i]);
    __m128i v3 = _mm_load_si128(&array3[i]);
    __m128i vsum = _mm_add_epi32(v0, v1);    // sum vectors
    __m128i vsum = _mm_add_epi32(vsum, v2);
    __m128i vsum = _mm_add_epi32(vsum, v3);
    _mm_store_si128(&array_sum[i], vsum);    // store sum
} 
```

在使用内在函数时，我喜欢包含`<immintrin.h>`和编译`gcc -march=native`. 这可以访问当前硬件上实际可用的所有指令集扩展。

在另一个问题上，是的，你当然可以这样做，但只有在整数数组 A、B 和 C 上这样做才有效。

例子：

```
__declspec(align(16)) int32_t A[N]; // input arrays
__declspec(align(16)) int32_t B[N];
__declspec(align(16)) int32_t C[N];
__declspec(align(16)) int32_t R[N]; // output array

__m128i* As = (__m128i*)A; // cast them to SSE type, avoids separate load/store calls later
__m128i* Bs = (__m128i*)B;
__m128i* Cs = (__m128i*)C;
__m128i* Rs = (__m128i*)R;

__m128i A_mask = _mm_set1_epi32(1<<31); // select these bits from A, B, and C
__m128i B_mask = _mm_set1_epi32(1);
__m128i C_mask = _mm_set1_epi32(0xffffffff ^ ( 1<<31 | 1 ));

for (size_t i = 0; i < N / 4; i ++)
{
    __m128i a = _mm_and_si128(A_mask, As[i]);
    __m128i b = _mm_and_si128(B_mask, Bs[i]);
    __m128i c = _mm_and_si128(C_mask, Cs[i]);
    Rs[i] = _mm_or_si128( _mm_or_si128(a, b), c );
} 
```

像我在上面所做的那样将 int32_t 数组别名为 __m128i 效率并不高，如果编译器不错，它应该编译成完全相同的代码，但它会产生更少冗长的代码。受到推崇的 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T21:07:08.863

要使用 gcc 编译 SSE 代码，您只需要该`-msse2`标志，例如

```
$ gcc -Wall -O3 -msse2 foo.c -o foo 
```

至于其他要求，如果您可以发布您想要矢量化的工作（标量）示例代码，这可能是最好的，因为从上面的描述中不是很清楚。

# java - Java Slick使字符旋转到选定的度数

> ID：13634648
> 
> 赞同：0
> 
> 时间：2012-11-29T21:01:48.850
> 
> 标签：java, rotation, lwjgl, slick2d, game-ai

我在编写游戏时遇到了问题。我正在使用 Slick 库和轻量级 Java 游戏库。我试图让我的玩家（飞机）去地图上的某个区域。例如，如果我将目标坐标设置为 (50,50)，我的飞机将在 X 上转到 50，然后在 Y 上转到 50。但我被困在旋转中。我试图让我的飞机旋转到 90 度，就像玩家控制它时那样，所以我不想只设置我希望它以正常速率（0.2*delta）旋转的旋转，直到它达到 90 度。

下面的代码仅在飞机当前向左旋转时才有效。

这是我当前的代码。

```
if(AIToggle){
 AIStatus = "ON";

 if(TargetX < x){
 if(plane.getRotation() < 0 ){

 if(plane.getRotation()<=-270 ){
 plane.rotate(-0.2f * delta);
      }

   }

  } 
} 
```

它目前的作用：如果飞机向左旋转超过 90 度并且 AI 开启，那么它将慢慢将其旋转到 0 度。这是我不明白的。

我试图让它做的事情：如果飞机向左旋转超过 90 度，则将飞机旋转到 -90 度然后停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T23:20:24.530

这可以通过改变来解决

`plane.getRotation()<=-270`

至

`plane.getRotation()>=270`

（由于原始海报无法这样做，因此作为答案发布）

# iphone - 在 iOS 上的 iCloud 上添加日历

> ID：13634650
> 
> 赞同：0
> 
> 时间：2012-11-29T21:01:54.467
> 
> 标签：iphone, ios, icloud, ekeventstore

我正在尝试将日历添加到 iCloud EKSource，我正在尝试以这种方式查找 iCloud 日历：

```
EKSource *theSource = nil;
for (EKSource *source in eventStore.sources) {
if (source.sourceType == EKSourceTypeCalDAV && [source.title isEqualToString:@"iCloud"]) {
    theSource = source;
    break;
}
} 
```

但是找不到我的任何 EKSource，我如何在 icloud 上添加日历并查看 icloud 中有多少日历？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:19:57.890

也许这样的事情会帮助你..

```
- (void)saveEventToiCloud {

    EKEventStore *eventDB = [[EKEventStore alloc] init];
    NSArray *calender = [[eventDB calendars] retain];

    NSString * typeString = @"";
    EKCalendar *iCloud;
    for (EKCalendar *thisCalendar in calenders) 
    {
        EKCalendarType type = thisCalendar.type;
        if (type == EKCalendarTypeCalDAV)
        {
                NSString *calName=[NSString stringWithFormat:@"%@", thisCalendar.title];
                NSRange range = [calName rangeOfString:@"iCloud"];  //Couldn't find better way, if there is, then tell me too. :)
                if(range.length!=0)
                {
                        //icloud
                        iCloud = thisCalendar;
                        break;
                }
                else
                {
                        //any other email account     
                }
        }
    }
    if(iCloud){
        NSError *error = nil;
        EKEvent *thisEvent = [[EKEvent eventWithEventStore:eventDB] retain];
        thisEvent.title = @"Title";
        thisEvent.startDate = [NSDate date];
        thisEvent.endDate = [NSDate date]; 
        thisEvent.calendar = iCloud ;
        BOOL saved = [eventDB saveEvent:thisEvent span:EKSpanThisEvent error:&error];
        NSLog(@"Saved calendar event = %@\n", (saved ? @"YES" : @"NO"));
        [thisEvent release];
        thisEvent=nil;
    }
    [events release];
    [eventDB release];
} 
```

# iphone - 想知道ios5和ios6通知中心的状态是“ON”还是“OFF”

> ID：13634651
> 
> 赞同：1
> 
> 时间：2012-11-29T21:01:57.237
> 
> 标签：iphone, objective-c, ios5, ios6

我想知道通知中心的状态是处于“ON”还是“OFF”状态。

据我所知，每个人都说通过使用

```
UIRemoteNotificationType types = [[UIApplication sharedApplication] enabledRemoteNotificationTypes]; 
```

但是我需要获得“ON”或“OFF”状态。

![在此处输入图像描述](../Images/94ae5e489877fdcb870f9653a0278271.png)

我搜索谷歌结果是：

```
UIRemoteNotificationType types = [[UIApplication sharedApplication] enabledRemoteNotificationTypes];
if (types == UIRemoteNotificationTypeNone)
{
} 
```

和

```
if (launchOptions != nil)
    {
        NSDictionary* dictionary = [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];
        if (dictionary != nil)
        {
            NSLog(@"Launched from push notification: %@", dictionary);

            [self clearNotifications];
        }
    } 
```

和

```
if (notificationTypes == UIRemoteNotificationTypeNone) {
    // Do what ever you need to here when notifications are disabled
} else if (notificationTypes == UIRemoteNotificationTypeBadge) {
    // Badge only
} else if (notificationTypes == UIRemoteNotificationTypeAlert) {
    // Alert only
} else if (notificationTypes == UIRemoteNotificationTypeSound) {
    // Sound only
} else if (notificationTypes == (UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeAlert)) {
    // Badge & Alert
} else if (notificationTypes == (UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound)) {
    // Badge & Sound        
} else if (notificationTypes == (UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeSound)) {
    // Alert & Sound
} else if (notificationTypes == (UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeSound)) {
    // Badge, Alert & Sound     
} 
```

但我没有得到 ios5 和 ios6 的结果

请指导我

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T21:36:35.810

您可以结合两件事来确保您始终知道用户何时没有以特定方式启用通知。

您必须在 AppDelegate 中同时处理 didRegisterForRemoteNotificationsWithDeviceToken 和 didFailToRegisterForRemoteNotificationsWithError。

例子

```
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken {
    if (!([[UIApplication sharedApplication] enabledRemoteNotificationTypes] & UIRemoteNotificationTypeAlert) || !([[UIApplication sharedApplication] enabledRemoteNotificationTypes] & UIRemoteNotificationTypeBadge)) {
        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Notice" message:@"You do not have the recommended notification settings enabled for this app."   delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
    }
}

- (void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error {
        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Notice" message:@"Your device does not currently have notifications enabled."   delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
} 
```

仅供参考：这将始终在模拟器中触发，因此您可能需要将其注释掉，直到您在设备上进行测试，因为它变得烦人。

# css - 具有悬停效果的导航按钮

> ID：13634653
> 
> 赞同：0
> 
> 时间：2012-11-29T21:02:05.530
> 
> 标签：css, button, navigation

我想复制此页面[http://oakespavers.com/](http://oakespavers.com/)（左侧）上的按钮样式，并具有相同的悬停效果。每次我尝试时，只有框中的文本受到影响。我希望整个 div 在鼠标悬停时更改颜色并保持代码非常简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:14:13.060

这可能会做到：

HTML：

```
<a href="#">Home</a>
<a href="#">Our Blog</a>
<a href="#">Contact US</a>
​ 
```

CSS：

```
a {
    border-radius: 5px;
    font-weight: 600;
    text-align: left;
    font-family: "Verdana", "Geneva", "sans-serif";
    text-transform: none;
    letter-spacing: 0px;
    font-weight: bold;
    font-size: 12px;
    display: block;
    padding: 10px 20px;
    color: #666;
    background-color: #E1E1E1;
    text-decoration: none;
    width: 225px;
    margin: 5px;
}
a:hover {
    color: white;
    background-color: #75D039;
} 
```

这是一个例子 的[小提琴​​</p>](http://jsfiddle.net/QYtA8/)

# c# - 如何查询这种结构的xml？

> ID：13634654
> 
> 赞同：1
> 
> 时间：2012-11-29T21:02:05.863
> 
> 标签：c#, xml

```
 <root>
    <level1>
        <item id="1" date="" name="" >
        <item id="2" date="" name="" >
        <item id="3" date="" name="" >
        <item id="4" date="" name="" >
        <item id="5" date="" name="" >
    </level1>
 </root> 
```

我有一个像上面那样的 xml 结构。

我用了

```
XmlNodeList xnList = xmlDoc.SelectNodes("/level1"); 
```

如果我如上所述使用 xmlnodelist，我怎样才能专门只获取 id="3" 的元素？

如果我可以将所有元素作为元素存储在 xnlist 中，或者更有用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:13:32.453

除了来自@LB 的出色回答外，我还使用 Linq，我个人认为它更具可读性：

```
xdoc.Element("level1")
    .Descendants("item")
    .Where(x => x.Attribute("id").Value == "3").First(); 
```

但这一切都取决于你的风格；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T21:03:22.650

```
XmlNodeList xnList = xmlDoc.SelectNodes("//level1/item[@id='3']"); 
```

如果你想使用[Linq To Xml](http://msdn.microsoft.com/en-us/library/bb387061.aspx)

```
var xDoc = XDocument.Parse(xmlstring); // XDocument.Load(filename)
var items = xDoc.Descendants("level1")
                .First()
                .Elements("item")
                .Select(item => new { 
                                    ID = item.Attribute("id").Value, 
                                    Name = item.Attribute("name").Value 
                                })
                .ToList(); 
```

你甚至可以结合 XPath 和 Linq2Xml

```
var item2 = xDoc.XPathSelectElements("//level1/item")
                .Select(item => new { 
                                    ID = item.Attribute("id").Value, 
                                    Name = item.Attribute("name").Value 
                                })
                .ToList(); 
```

# vb.net - 遍历 VB.net 中的字典列表

> ID：13634656
> 
> 赞同：0
> 
> 时间：2012-11-29T21:02:12.893
> 
> 标签：vb.net

我正在尝试遍历并从字典中获取值，该字典是通过使用 ListServiceUtility.GetListItemData 方法调用 sharepoint 填充的。我的代码如下所示

```
actualList = ListServiceUtility.GetListItemData(Test_Sharepointsite_url, myCred, Test_List_Name, Nothing, fieldNames, <Query/>, isRecursive, pagingSize)

For Each Entry As Dictionary(Of String, String) In actualList

            Debug.WriteLine(cnt)
            cnt += 1

            For Each pair In Entry
                Debug.WriteLine(innerCnt)
                innerCnt += 1
                Debug.WriteLine("Key:" & pair.Key & " Value:" & pair.Value)
            Next
        Next 
```

cnt 上升到 4，正如我预期的那样，因为我的共享点列表中有 4 个条目，但是，innerCnt 根本不增加，并且每个块的最后一个完全被传递。

我没有收到任何错误，所以这是一个逻辑问题，而不是语法问题。希望我在这里提供了一些足够的信息来提供帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:07:30.327

由于未正确创建 feildname 变量，字典为空。感谢大家的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T02:50:33.903

我同意这些评论，看来内部循环没有被访问 - 你可以通过调试器中的代码进行检查吗？

此外，在 VB 中，循环中的变量不会重置为 0，因此 innerCnt 将包含循环的总次数，而不是每个条目的通过次数。如果这不是您想要的，您将需要 innerCnt=0 在内部循环之前。

注意：这是设计使然，但它与 C# 的行为相反。

# javascript - 序列化 JavaScript 对象

> ID：13634657
> 
> 赞同：0
> 
> 时间：2012-11-29T21:02:14.047
> 
> 标签：javascript, json

我正在尝试将 JavaScript 对象序列化为 json，以便稍后反序列化回其原始形式。

困难的部分是我需要序列化的不仅仅是原语。例如：

```
function Foo() {
    this.bar = "Hello World";
}

Foo.prototype.baz = function() {
    alert(this.bar);
}

var qux = new Foo(); 
```

我将如何序列化`qux`？如果我只是`JSON.stringify`那么`JSON.parse`它，我将无法调用`qux.baz()`。

是否有任何标准或工具或技术可以做到这一点？有什么提示可以为我指明正确的方向吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T02:53:28.587

> JavaScript 对象到**JSON**

不幸的是，您无法将完整的对象序列化为 JSON，因为 JSON 规范不允许序列化函数。

但是，您可以创建自己的序列化标准。您可以将其称为 Javascript Frozen Object (JSFO)，这是一个好名字，因为在其他语言中您尝试做的通常称为“冻结”。或者，如果您想要一个类似于 JSON 的名称，您可以将其称为 Javascript Frozen（或 Full？）Object Notation (JSFON)。

实现相当简单。您可以从任何实现它的库（如 jQuery 或 YUI）复制 JSON 代码。或者，您可以从[json.org](http://json.org)下载任何参考实现并将其修改为字符串化函数。

要对函数进行字符串化，您基本上需要执行以下操作：

```
if (typeof obj == 'function') {
    return '"' + key + '":' + obj.toString();
} 
```

将类似的东西插入任何 JSON 字符串化库。

但请不要将其称为 JSON，因为 JSON 是一种具有已发布规范的非常特定的数据格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T21:07:04.357

I'd start looking at the [JSON documentation on MDN](https://developer.mozilla.org/en-US/docs/JSON), specifically [JSON.stringify](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify).

# mysql - MySQL复杂的关系SELECT

> ID：13634660
> 
> 赞同：1
> 
> 时间：2012-11-29T21:02:25.123
> 
> 标签：mysql, sql

我有一个包含*id*、*parent*和*name*字段的**类别**表。*父*字段允许一个类别成为另一个类别的子类别。

 ***示例**类别**表，其中有两个主要类别（WIDGETS 和 THINGAMABOBS），并且 WIDGETS 有 3 个子类别：

*   *id* 1，*父* **null**，*名称*“WIDGETS”
*   *id* 2，*父* **1**，*名称*“GADGETS”
*   *id* 3，*父* **1**，*名称*“DOOHICKEYS”
*   *id* 4，*父* **1**，*名称*“GIZMOS”
*   *id* 5, *parent* **null** , *name* "THINGAMABOBS

我有一个带有*类别*字段的**产品**表

 *产品链接到“GIZMOS”类别的示例**产品记录：**

*   *id* 1，*类别*4，*名称*Contraption 5000

我希望能够在 SELECT 语句中提供类别名称并取回该类别中的所有**产品**。但我不仅想在“GIZMOS”上找到上面的记录，而且我还希望能够通过名称“WIDGET”找到它，因为MEDIUM WIDGET是WIDGET的一个子项。这应该适用于无限数量的级别（即：子子子类别）

为了使这更加复杂，我希望能够将产品分配给多个类别。也许他们会用逗号分隔？即：如果我希望Contraption 5000 存在于Doohickeys 和Thingamabobs 类别中，我会将3,5 放在*类别*字段中。

我的要求是否可以通过单个 select 语句实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:06:59.407

Do this in your application code! It will be much simpler and easier to maintain.

See also [this similar post](https://stackoverflow.com/questions/5689635/need-help-with-hierarchical-mysql-query) (actually [there are many posts on this topic](https://stackoverflow.com/questions/tagged/hierarchical-data+mysql))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T21:11:26.967

我将从你的问题的结尾开始：

> 为了使这更加复杂，我希望能够将产品分配给多个类别。也许他们会用逗号分隔？即：如果我希望Contraption 5000 存在于Doohickeys 和Thingamabobs 类别中，我会将3,5 放在类别字段中。

通过这样做，您将创建一个多对多关系，在这种情况下，您将需要一个名为的第三个表`products_categories`，该表包含两列：`product_id`和`category_id`; 您`category`将从您的产品表中删除该列。

如果您希望 id=1 的产品属于类别 3 和 5，您将在 products_categories 中创建两行：

```
product_id | category_id
------------------------
1          | 3
1          | 5 
```

现在到你问题的第一部分......

您需要做的是创建一个递归查询，我知道可以在 SQL Server 中完成，但老实说，我不确定是否可以在 MySQL 中完成。如果可以的话，我相信其他人会为您提供适当的答案。****

# objective-c - DISABLE ARC 仍然出现错误

> ID：13634664
> 
> 赞同：0
> 
> 时间：2012-11-29T21:02:37.090
> 
> 标签：objective-c, ios, automatic-ref-counting

我正在一些 Facebook 课程中尝试禁用 ARC，但仍然出现错误。

我的步骤是这样的：

```
1) Build Settings:

      i Activated ARC=YES.

      Other linker flags = -ObjC -all_load
2) Build Settings>Compile Sources:

-fno-obj-arc  for All clases i want to disable ARC. 
```

**毕竟，对于我的项目中的所有“发布”，我仍然会得到一个错误构建。为什么？：/**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T21:05:22.000

这是`-fno-objc-arc`禁用 ARC，而不是`-fno-obj-arc`. 我确定您不需要它，但请参阅*Transitioning to ARC Release Notes*中的[Use Compiler Flags to Enable and Disable ARC 。](http://developer.apple.com/library/mac/releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226-CH1-SW15)

 *如果可以的话，我还鼓励您查看最新的[Facebook SDK](http://developers.facebook.com/ios/)，它与 ARC 兼容。*

# xslt - 如何使一个元素的值成为根的新属性？

> ID：13634670
> 
> 赞同：0
> 
> 时间：2012-11-29T21:03:00.950
> 
> 标签：xslt

我想将标记转换`<root><a><c>CA</c></a></root>`为`<root juris="CA"><a><c>CA</c></a></root>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:27:57.477

如果您可以指定更多有关允许的模式的信息，则可以编写更具体的内容。有了给定的东西，这样的东西应该可以工作：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:template match="/root">
        <xsl:copy>
            <xsl:attribute name="juris"><xsl:value-of select="./a/c"/></xsl:attribute>
            <xsl:copy-of select="*"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

就目前而言，如果这导致更复杂的输入出现问题，我不会感到惊讶。

# google-tv - 谷歌电视画中画

> ID：13634673
> 
> 赞同：0
> 
> 时间：2012-11-29T21:03:17.950
> 
> 标签：google-tv

我知道 Live TV 是唯一可以在 PiP（画中画）模式下运行的 gTV 应用程序。我的问题是无论如何我可以对我的应用程序进行编程，当被调用时，它总是以 LiveTV 作为内部框架运行？

我需要确保我的应用程序始终以 LiveTv 作为内部框架运行！

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:14:36.533

没有官方方式 - 未来将不支持非官方方式。

# macros - Visual Studio 2012：如何执行有条件的构建后事件

> ID：13634676
> 
> 赞同：10
> 
> 时间：2012-11-29T21:03:23.640
> 
> 标签：macros, visual-studio-2012, post-build-event, visual-studio-macros

如何执行有条件的构建后事件？具体来说，我只想为调试版本执行构建后事件命令行，而不是为发布版本执行。

我在项目属性的“构建事件”页面中没有看到任何方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T21:15:27.810

您只需要对 $ConfigurationName 属性进行一些检查。

这篇 SO 帖子有很多示例：
[How to run Visual Studio post-build events for debug build only](https://stackoverflow.com/questions/150053/how-to-run-visual-studio-post-build-events-for-debug-build-only)

# jakarta-mail - 从javamail中的文件夹中删除邮件

> ID：13634678
> 
> 赞同：5
> 
> 时间：2012-11-29T21:03:28.663
> 
> 标签：jakarta-mail

我正在尝试从 Java 邮件中的文件夹中删除/删除一条消息（在我将其复制到另一个文件夹之后）这是我的代码：

```
Flags deleted = new Flags("DELETED");  
folder.setFlags(messages, deleted, true);  
folder.expunge(); 
```

消息不受影响。有人可以告诉我正确的方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T21:54:48.913

```
Flags deleted = new Flags(Flags.Flag.DELETED);
folder.setFlags(messages, deleted, true);
folder.expunge(); // or folder.close(true); 
```

# php - php - 在一个数组中省略列，在另一个数组中

> ID：13634680
> 
> 赞同：0
> 
> 时间：2012-11-29T21:03:34.763
> 
> 标签：php, mysql, arrays, joomla

这是一个有趣的。

我有一个从 mySQL 生成数组的函数……或者更好的是，它生成一个数组数组。跟随？

我已经想出了如何深入研究数组以将它们显示到工作表中。如此：

```
<table id="list_table" cellpadding="1" cellspacing="1">

<?php
    $array = $this->disparray;

    foreach($array as $key => $value)
        {
            echo '<tr>';
            foreach($value as $key => $value)
                {
                    echo '<td>' .  $value . '</td>';
                }
            echo '</tr>';
        }

?> 
</table> 
```

但是，我只想调用特定`<td>`的，这意味着我必须调用对特定列索引的引用。我试过`$value['1']`了，但它只是做了一些疯狂的事情。所以，我卡住的地方是我不知道在哪里调用我想要的特定列索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:05:45.193

您正在嵌套/覆盖您的 $key 和 $value 变量。这很可能完全把事情搞砸了。

尝试：

```
<?php
$array = $this->disparray;

foreach($array as $key => $value)
    {
        echo '<tr>';
        foreach($value as $k => $v)
            {
                echo '<td>' .  $v . '</td>';
            }
        echo '</tr>';
    }

?> 
```

这可能会帮助您解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T22:00:27.243

您说“我必须调用对特定列索引的引用”和“我只需要知道如何指定要使用的列。（或要显示的索引/键）”。

我怀疑您的问题实际上比这更复杂，但该问题的答案是使用多维数组的标准语法。例如，$array['index1']['index2']。

有关 PHP 数组语法的更多信息在[这里](http://us2.php.net/manual/en/language.types.array.php)。如果您需要更多信息，请澄清您的问题。

# apache - 重写路径以获取参数

> ID：13634682
> 
> 赞同：1
> 
> 时间：2012-11-29T21:03:37.323
> 
> 标签：apache, mod-rewrite

我需要将任何对 html 文件的调用更改为 php，并且应该将完整路径和文件作为 get 参数传递。

例如

```
http://www.domain.com/any/path/file.html 
```

应该成为

```
http://www.domain.com/index.php?path=any-path-file.html 
```

我想通过 php 文件将每个调用路由到 html 文件。重写应忽略任何其他文件。

另外：是否可以再次添加其他参数？

```
/file.html?foo=bar
becomes
/index.php?path=file.html&foo=bar 
```

提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:29:06.317

我认为不可能**完全按照**您的意愿去做，但我认为我们可以如此接近，这并不重要。

以下重写

```
RewriteCond %{REQUEST_URI} \.html$
RewriteRule (.*) /index.php?path=$1&%{QUERY_STRING} [L] 
```

将接受任何以 .html 结尾的请求并将其重写为 index.php，将完整路径添加为查询字符串。它还将原始请求上的任何现有查询字符串附加到新请求。这并不完全符合您的要求，因为路径变量看起来像 path=any/path/file.html，而不是您要求的 path=any-path-file.html。但这不是不能在 index.php 的前几行中整理出来的

```
 if( isset($_GET['path']) ) {
        $_GET['path'] = str_replace("/","-",$_GET['path']);
    } 
```

# java - DroidText 好用吗？

> ID：13634691
> 
> 赞同：-1
> 
> 时间：2012-11-29T21:04:20.950
> 
> 标签：java, android, itext

那里有很多关于其 LGPL 许可证和法律内容的信息，但它*真的*有什么好处吗？

`iText 2.1.7`有（引用 iText 的销售人员的话）一个`"few technical and also legal problems"`.

我知道他是一名销售人员，他可能想推迟我，以便我购买商业许可证（我绝对不会责怪他这样做，不要误会我的意思），但任何人都可以给我一个使用 DroidText 的流行且评价良好的应用程序的示例？

DroidText 真的好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:31:50.880

我没有足够的信誉发表评论。这可能不是您想要的，但我在一家（非盈利）公司工作，该公司正在开发一款供执法部门使用的平板电脑应用程序。我们正在使用 DroidText 将屏幕上的表单和活动转换为 pdf。虽然它不会成为公众使用的应用程序，但迄今为止警方的反应非常积极。

所以是的，DroidText 是“好”的

# linux - 转发 X 连接时，OpenSSH 客户端在注销时挂起

> ID：13634697
> 
> 赞同：19
> 
> 时间：2012-11-29T21:04:29.083
> 
> 标签：linux, ubuntu, openssh

我设置 Ubuntu Linux 来运行 OpenSSH 服务器。我的 DSL 路由器正在端口转发 SSH 连接。当我使用

```
ssh -X myhost 
```

然后打开一些GUI程序，然后关闭GUI应用程序并退出，然后SSH注销挂起。`<Ctrl>-c`似乎有效，但每次都必须按下它很烦人。如果我不打开 GUI，注销将不会挂起。

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-29T21:07:20.797

This is because the process you start opens a stream (stdout/stderr) and doesn't close it. Have a look [here](http://www.snailbook.com/faq/background-jobs.auto.html) for a more in-depth explanation and possible solutions.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-04-30T20:40:23.070

我知道这是一个老问题，但我遇到了同样的问题，经过一番挖掘后，我找到了一个有用的解决方案。现在我用`~.`“终止连接（和任何多路复用会话）”关闭 SSH 连接，这对我有用。转义字符需要在新行上键入，在我的情况下，转义字符不会显示在屏幕上（我最终转义了转义字符，即`~~`）。仅供参考，您可以使用 SSH 会话查看转发的连接`~#`。

`~?`在 SSH 会话中输入完整的转义序列列表。

支持的转义序列：

*   `~.` - 终止连接（和任何多路复用会话）
*   `~B` - 向远程系统发送 BREAK
*   `~C` - 打开命令行
*   `~R` - 请求重新生成密钥（仅限 SSH 协议 2）
*   `~^Z`- 暂停 ssh
*   `~#` - 列出转发的连接
*   `~&` - 后台 ssh（等待连接终止时）
*   `~?` - 这条信息
*   `~~` - 通过键入两次发送转义字符

（请注意，转义仅在换行符后立即被识别。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-01T17:09:34.577

您可以在启动远程 GUI 应用程序后自动将 SSH 发送到后台：

```
ssh -X -f remote.host.name 'name_of_gui_application' 
```

这仍然会要求输入密码，然后运行应用程序并立即将 SSH 置于后台。

它还将从 重定向 STDIN `/dev/null`，因此您的会话在关闭应用程序后不会“挂起”（不是您所知道的，因为它无论如何都在后台运行）。

以下是 SSH 的手册页对此的说明：

> 在远程站点启动 X11 程序的推荐方法是使用类似`ssh -f host xterm`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-22T13:49:48.733

我知道这绝不是直接回答 OP。但是，如果您正在寻找替代解决方案，请尝试`exit`. [更多可以在这里找到！](https://superuser.com/questions/467398/how-do-i-exit-an-ssh-connection)

# c# - 在 IIS7 下使用 Skype4Com

> ID：13634698
> 
> 赞同：1
> 
> 时间：2012-11-29T21:04:30.047
> 
> 标签：c#, asp.net, iis, skype4com

我在 IIS7 下使用 Skype4Com 时遇到问题。代码很简单：

```
Skype skype = new Skype();
skype.Attach();

Command cmd = new Command();
cmd.Command = "CHATMESSAGE #chatname/someid test";
skype.SendCommand(cmd); 
```

如果作为控制台应用程序或从 IISExpress 下的 aspx 页面执行，它可以工作，但如果页面在正常 IIS 7 下运行，则它不起作用。

我将**启用 32 位应用程序**设置为 true，我将池的**身份**设置为我当前的用户帐户。我什至使用了**WindowsImpersonationContext**并在上下文中执行了代码，但没有任何帮助：

称呼

```
skype.Attach(); 
```

因错误而失败

> 等待超时

我在网上看到了一些类似的问题，但没有找到解决方案。有没有人遇到同样的问题？

提前致谢

# java - 用百万条目填充数据库

> ID：13634701
> 
> 赞同：0
> 
> 时间：2012-11-29T21:04:53.623
> 
> 标签：java, mysql

我想用数百万个条目填充 MySQL 数据库，

我尝试使用数据生成器，但我只能获得 200 个条目，尽管我给出了 1000 个作为输入，这需要大量时间来填充。

还尝试使用 .txt 文件 LOAD FILE LOCAL INFILE 方法进行填充，但尽管该文件存在于我的本地目录中（ERRCODE：2 和 ERRCODE：22），但仍会收到错误为 FILE NOT FOUND。

我在想有没有更好的方法来为数据库填充数百万个条目以提高性能，如果是这样，有人可以建议我解决我的查询的想法吗？？？？？

**如何用百万值填充我的数据库**？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:23:05.093

试试[数据生成器](http://www.generatedata.com/#generator)。它允许您精确生成所需的数据（您可以选择列等...）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T21:47:21.190

查看[generate-dummy-test-data-for-mysql-using-routines](http://kedar.nitty-witty.com/blog/generate-dummy-test-data-for-mysql-using-routines) 或generate-dummy [-data-for-my-web-application-looking-for-dictionaries](https://stackoverflow.com/questions/7187931/generating-dummy-data-for-my-web-application-looking-for-dictionaries)

# java - 压缩和解压缩字符串

> ID：13634705
> 
> 赞同：2
> 
> 时间：2012-11-29T21:05:11.267
> 
> 标签：java, c, string

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:06:17.607

至少，一个简单的反向扫描确实为编码部分提供了一个（看似）好的解决方案。我正在从右到左进行一次扫描，并用出现计数覆盖字符串的部分。

```
char * enc(char * ip)
{
    int r,op;
    int l=strlen(ip);
    r=l-1;
    char curr;
    op=r;
    int curr_count=1,mod_curr_count;
    while(r>=0)
    {
        curr=ip[r];

        while(ip[--r]==curr)
        {

            curr_count++;
        }
        if(curr_count!=1)
        {
            while(curr_count)
            {
            mod_curr_count=curr_count%10;
            ip[op--]=(char)(mod_curr_count+48);
            curr_count/=10;
            }
            ip[op--]=curr;
            curr_count=1;

        }
        else
        {
        ip[op--]=curr;
        }
    }

    ip=ip+op+1;
    return ip;
} 
```

**输入：** aaaaaaaaaaabbbfffffffffffffffqqqqqqqqqqqqqqqqqccccpoii

**输出：** a12b3f15q18c4poi2

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T21:30:09.880

To do an in-place encoding, the encoded string must never be longer than the original string. Suppose we assume the following encoding rules:

*   No numeric digits in the original string (so no count delimiter characters are needed)
*   A run length of 1 is never explicitly coded (so `abc` remains `abc`)

I believe that with these assumptions, a run-length encoding is not ambiguous and will never be longer than the string itself. Then the following algorithm (pseudocode) should do the job of encoding in place:

```
currentChar ← string[0]
nextOutputPos ← 1
nextReadPos ← 1
count ← 1
while (nextReadPos < length of string) {
    nextChar ← string[nextReadPos++];
    if (nextChar == currentChar) {
        count++;
    } else {
        if (count > 1) {
            write (count as a string) to string at position nextOutputPos
            nextOutputPos ← nextOutputPos + (length of count as a string)
        }
        string[nextOutputPos++] ← currentChar ← nextChar;
    }
} 
```

At the end, the encoded string is contained in the half-open range [0, `nextOutputPos`) of `string`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T21:40:27.690

这是 Java 中使用正则表达式的一种可能性：

```
String str = "aaabbbc";  // string to be encoded

StringBuilder sb = new StringBuilder();  // to hold encoded string

for (String s : str.split("(?<=(.))(?!\\1)")) {
    sb.append(s.charAt(0));
    if (s.length() > 1) // only append length if it's > 1
        sb.append(s.length());
}

System.out.println(sb.toString()); 
```

```
a3b3c

```

# ios - 向 UITableViewController 添加可点击和固定的子视图？

> ID：13634707
> 
> 赞同：3
> 
> 时间：2012-11-29T21:05:21.030
> 
> 标签：ios, static, uitableview, subview, adbannerview

我想将 ADBannerView 对象静态放置到我的 UITableView 屏幕上，这意味着我希望它始终保持在我的工具栏（self.navigationController.toolbar）上方，即使用户正在滚动 tableview。我通过将 ADBannerView 作为子视图添加到我的工具栏并为框架原点赋予负值来解决了这个问题：

```
[self setBannerViewSize];
[self.navigationController.toolbar addSubview:bannerView]; 
```

唯一的问题是：我无法以这种方式点击并打开 iAd - 我可以看到横幅，但是当我点击它时没有任何反应。

由于我也在使用 refreshControl，因此使用 UIViewController 代替 UITableViewController 并手动添加 tableView 的选项对我不起作用。有没有其他方法可以让我的 ADBannerView 静态显示在我的表格视图控制器中并且仍然可以点击？

谢谢指教！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T21:42:33.597

耶！！毕竟，我自己（以及大量阅读）成功地解决了这个（非常烦人的）问题！

首先，我发现了这个真正[改变世界的帖子](http://www.herrray.com/uitableviewcontroller-and-fixed-sub-views/)。基本上这篇文章处理 UITableViewController 使用 self.view 作为其 tableView 属性的主题，因此覆盖 tableView 属性（或手动合成它）加上给 self.view 一个新视图（来自应用程序）并添加 tableView 作为它的子视图可以到达tableView的*真正*superview。

但这仍然没有解决我的问题，尽管我确信它会，因为这一切都是有道理的。我的bannerView 出现在正确的位置（并且已修复），但单击时它仍然没有执行任何操作。但是还有第二件我不知道的小事：

正如我在[这篇文章](http://iphonedevsdk.com/forum/iphone-sdk-development/75193-iad-click-not-working.html)中所读到的，子视图的超级视图不仅必须是 userInteractionEnabled，而且还必须具有不透明的背景颜色。因为我的 superviews 背景颜色设置为 [UIColor clearColor] ，所以这一切都不起作用 - 但是将其 backGroundColor 设置为例如 blackColor 解决了整个问题：bannerView 终于可以点击了！:)

所以，我的代码现在看起来像这样：

```
@synthesize tableView;

- (void)viewDidLoad
{
    [super viewDidLoad];

    if (!tableView && [self.view isKindOfClass:[UITableView class]]) {
        tableView = (UITableView *)self.view;
    }

    self.view = [[UIView alloc] initWithFrame:[UIScreen mainScreen].applicationFrame];
    self.tableView.frame = self.view.bounds;
    [self.view addSubview:self.tableView];

    [self resizeTableToFitBanner];
    self.view.backgroundColor = [UIColor whiteColor];
    [self.view addSubview:bannerView];

    // some other code
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-03T22:56:08.403

Apple 的 iAdSuite 示例代码中的 BannerViewController 非常优雅地解决了这个问题：

[https://developer.apple.com/library/ios/samplecode/iAdSuite/Introduction/Intro.html](https://developer.apple.com/library/ios/samplecode/iAdSuite/Introduction/Intro.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T21:27:23.887

我认为您应该使用容器视图，并在 IB 中进行设置。您可以在导航控制器的根视图控制器的视图底部添加工具栏和 ADBannerView。用容器视图填充其余空间 - 这将自动为您提供嵌入式视图控制器。您应该删除这个，然后拖入一个 tableViewController 并控制从容器视图拖动到 tableViewController 以连接嵌入 segue。

# ruby-on-rails - 登录成功后重定向，但浏览器地址栏中仍然显示原始URL

> ID：13634709
> 
> 赞同：0
> 
> 时间：2012-11-29T21:05:22.627
> 
> 标签：ruby-on-rails, devise

我正在使用设计开发用户身份验证。登录页面类似于 localhost:3000/users/sign_in。登录成功后（一个 Post 请求），用户被重定向到主页（localhost:3000/）。这是意料之中的，我确实看到浏览器中加载了主页内容。

但是浏览器地址栏依然显示原来的请求url为localhost:3000/users/sign_in

知道为什么会这样吗？是设计配置还是 Rails 服务器？我在这里没有太多自己的代码，几乎只是与我的用户模型的默认设计选项挂钩。

以下是我的部分路线：

```
new_user_session GET  /users/sign_in(.:format)  devise/sessions#new
user_session     POST /users/sign_in(.:format)  devise/sessions#create
root                  /                         home#index 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:19:47.227

这是来自最新设计版本的代码块

文件：`../gems/devise-2.1.2/app/controllers/devise/sessions_controller.rb`

```
# POST /resource/sign_in
def create
  resource = warden.authenticate!(auth_options)
  set_flash_message(:notice, :signed_in) if is_navigational_format?
  sign_in(resource_name, resource)
  respond_with resource, :location => after_sign_in_path_for(resource)
end

def after_sign_in_path_for(resource_or_scope)
  stored_location_for(resource_or_scope) || signed_in_root_path(resource_or_scope)
end

def signed_in_root_path(resource_or_scope)
  scope = Devise::Mapping.find_scope!(resource_or_scope)
  home_path = "#{scope}_root_path"
  if respond_to?(home_path, true)
    send(home_path)
  elsif respond_to?(:root_path)
    root_path
  else
    "/"
  end
end 
```

例如，如果您将 root 配置为 Home#Index，并且`before_filter :authenticate_user!`在输入用户名和密码后受到保护，则 url 必须是您的域名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:52:34.423

原来它有某事。与我的 jquery mobile 包含有关。这里的这个链接解决了我的问题：

[rubyrails 使用 jquery mobile，重定向不更改 url](https://stackoverflow.com/questions/10425000/rubyrails-using-jquery-mobile-redirect-not-change-url)

# c# - 文本块文本选择

> ID：13634711
> 
> 赞同：2
> 
> 时间：2012-11-29T21:05:26.213
> 
> 标签：c#, wpf, xaml, textblock

我有一个聊天窗口，其中每条消息都是`TextBlock`. 我希望能够选择我的`TextBlocks`. 谷歌说改用 a `TextBox`，我不能这样做，因为它们不支持运行，我用它在我的消息中创建超链接。我有什么选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:16:28.683

查看`RichTextBox`WPF 的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T04:15:43.367

如何使用 TextBox（具有选择样式）和其中的链接制作 CustomContentControl 并根据内容使用可见性。就像是

```
<myControls:CustomContentControl>
        <Grid>
            // play with visibilty depending on content.
            <CustomLink/>
            <TextBox Style="{StaticResource SelectionStyle}"/>
        </Grid>
</myControls:ContentControl> 
```

# php - php类中的私有静态变量

> ID：13634712
> 
> 赞同：9
> 
> 时间：2012-11-29T21:05:29.960
> 
> 标签：php, codeigniter, static, private-members

我有几个经常通过`var_dump`或运行的课程`print_r`。

在这些类中，我有一些变量是对其他相当大的对象的引用，每个对象只有一个实例，并且仅在类内部使用（类外部对这些类有自己的引用）我不希望这些类打印在输出中，所以我已经声明它们`private static`工作正常。

`Member has private access`但是当我通过访问它们时，我的 IDE (PHPstorm) 会弹出一个错误级别的警报`self::$ci->...`

我想知道这是否是 IDE 中的一个错误，突出显示是因为它可能是一个错误（又名它是静态的，但类外没有任何东西可以访问它，你为什么要这样做？），或者因为实际上存在语法错误用它？

作为示例，这里是类的一部分，注意`=& get_instance();`返回对[Code Igniter 超级对象的引用](https://stackoverflow.com/questions/2703151/what-is-super-object-in-codeigniter)

```
private static $ci = null;

public function __construct(){
    self::$ci = self::$ci =& get_instance();
}

public function product() {
    if ($this->product == null) {
        self::$ci->products->around($this->relative_date);
        $this->product = self::$ci->products->get($this->product_id);
    }
    return $this->product;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T21:30:42.990

In your `product()` method you're trying to access the private member `self::$ci`. Your IDE thinks that this method can be accessed anywhere, and detects a conflict with the private static member `$ci`.

# javascript - 无法从 Flash AS2 调用 javascript

> ID：13634716
> 
> 赞同：1
> 
> 时间：2012-11-29T21:05:49.757
> 
> 标签：javascript, flash, actionscript-2

首先，我是 Flash 中的一个完整的菜鸟，我真的不知道我在做什么：/（这是对朋友的帮助）。

我正在使用 CS6 并使用动作脚本 2。

所以我看到很多人建议使用

```
getURL("javascript:myFunction();"); 
```

或者

```
import flash.external.ExternalInterface;

ExternalInterface.call("myFunction()"); 
```

用于调用我在我的 html 文件（在头部）中拥有的方法 myFunction。但是，由于某种原因，该方法没有被调用。除此之外，我在我的帧代码中只是停止了结束的 Flash 电影（我尝试在 js 调用之前和之后放置它）

```
stop(); 
```

我的 html 下也有`<object>`：

```
<param name="allowScriptAccess" value="always" /> 
```

并再次嵌套在`<!--[if !IE]>-->`.

（如果需要，我也可以添加 html 文件。）谁能解释我做错了什么？删除 stop(); 似乎也没有改变任何东西（除了正在重播的电影。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:59:47.943

好的，所以这个问题是一件相当愚蠢的事情，但我决定把它写下来，以防将来有人偶然发现同样的奇怪行为。发生的事情是我在同一天安装了 Flash CS6 并且没有重新启动我的机器。重新启动后，调用很`getURL("javascript:myFunction();");`简单——只要记住`<param name="allowScriptAccess" value="always" />`在你的 html 上也有 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T22:48:57.887

我从来没有使用过第一种方法，但有第二种方法。不带括号试试：

```
ExternalInterface.call("myFunction"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-14T03:03:21.087

```
flash.external.ExternalInterface.call("function (without brackets)","Value or Variable(Without quotes)"); 
```

# php - php后退导航问题

> ID：13634717
> 
> 赞同：0
> 
> 时间：2012-11-29T21:05:53.197
> 
> 标签：php, navigation

我正在构建一个 php web 应用程序，但导航遇到了一些问题。似乎用户必须回击两次才能越过我明显的陷阱之一。. .

考虑这种情况。用户想要上传一个带有描述的文件，所以他点击了上传并被定向到 upload.php 页面。他填写表格并将表格提交给uploader.php。Uploader.php 将他重定向回 upload.php?yay=true。从这里开始，他需要回击两次才能回到他点击上传按钮的页面。有没有一种聪明的方法来跟踪他最初来自哪个页面（这种情况下，向后 2 页）或者我是否需要将他的导航故事保留在会话变量中？

我也可以只重定向到用户点击上传按钮的页面，但这意味着后退按钮会将他带到 fileupload.php 页面，而不是之前有上传按钮的页面。

任何帮助appriciated！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:20:50.830

上传东西后很简单，只需将他重定向到原始页面

```
// do the upload stuff
header('location:the_page_name.php');//the page where user originaly came from 
```

# objective-c - AuthorizationCreate() 显示的更改授权对话框

> ID：13634719
> 
> 赞同：11
> 
> 时间：2012-11-29T21:06:06.883
> 
> 标签：objective-c, macos, cocoa, security

浏览 Apples BetterAuthorizationSample 和其他衍生产品（[http://www.stevestreeting.com/2011/11/25/escalating-privileges-on-mac-os-x-securely-and-without-using-deprecated-methods/](http://www.stevestreeting.com/2011/11/25/escalating-privileges-on-mac-os-x-securely-and-without-using-deprecated-methods/)）我我正在尝试对应用程序进行小改动，并更好地了解整个安全和服务管理框架。因此，我继续添加一个按钮，该按钮通过 SMJobBless - SMJobRemove() 的反面删除已安装的作业。然而，AuthorizationCreate() 调用直接显示一个对话框，声明并请求安装帮助程序而不是删除它的权限。

这就是我得到的对话框（通过使用`kSMRightModifySystemDaemons`）。如您所见，它说我的应用程序试图添加一个新的帮助工具。这会让我的用户感到困惑，因为该应用程序实际上试图删除已安装的帮助工具。

![在此处输入图像描述](../Images/1f9c67885c625ff2ddea9b90163695aa.png)

我正在寻找有关如何更改此对话框以反映我的实际操作（作业删除）的知识，还有其他几个似乎完全自定义对话框的应用程序 - 显示他们自己的自定义标签和按钮..

```
BOOL doRemoveSystemTool(NSString* label, NSError** error)
{
BOOL result = NO;

AuthorizationItem authItem      = { kSMRightModifySystemDaemons, 0, NULL, 0 };
AuthorizationRights authRights  = { 1, &authItem };
AuthorizationFlags flags        =   kAuthorizationFlagDefaults              |
kAuthorizationFlagInteractionAllowed    |
kAuthorizationFlagPreAuthorize          |
kAuthorizationFlagExtendRights;

AuthorizationRef authRef = NULL;
//Obtain authorization
OSStatus status = AuthorizationCreate(&authRights, kAuthorizationEmptyEnvironment, flags, &authRef);
if (status != errAuthorizationSuccess)
{
    NSLog(@"Failed to create AuthorizationRef, return code %ld", (long)status);
} else
{
    //We have authorization so proceed with removing the Job via SMJobRemove
    result = SMJobRemove(kSMDomainSystemLaunchd, (CFStringRef)label, authRef, YES, (CFErrorRef *)error);
}
AuthorizationFree(authRef, kAuthorizationFlagDefaults);
return result;
} 
```

我已经尝试将 authItem 从 kSMRightBlessPrivilegedHelper 更改为 kSMRightModifySystemDaemons 但这所做的只是将对话框更改为显示“添加”而不是“安装”

非常感谢这里的一些帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T22:22:27.860

我以前没有用过这个，但发现你的问题很有趣，所以我读了一点苹果的文档，基于此，我想知道用 a 设置环境是否能满足`kAuthorizationEnvironmentPrompt`你的要求？

```
From AuthorizationTags.h:
  The name of the AuthorizationItem that should be passed into the environment 
when specifying a invocation specific additional text.  The value should be a 
localized UTF8 string. 
```

您将使用 this 创建一个 AuthorizationItem，然后创建一个包含它的 AuthorizationItemSet，然后将该集合传递给参数的`AuthorizationCreate`调用。`environment:`

我会试试的。

我阅读文档的另一个想法是拥有一个命令行工具，它可以删除并授权执行命令行工具（“SomethingSomethingHelper”），这可能不会让用户感到困惑（所以使用`AuthorizationExecuteWithPrivileges`或`kAuthorizationRightExecute`其他）。

# java - JSON 对象表示

> ID：13634721
> 
> 赞同：0
> 
> 时间：2012-11-29T21:06:07.627
> 
> 标签：java, json

我是 JSON 新手。所以请帮助我....

我正在尝试编写一个返回 Person 对象的 Rest 服务，如下所示：

```
PersonJSONAdapter implements JsonSerializer<Person>, JsonDeserializer<Person>
{
    public JsonElement serialize(final Person src, final Type typeOfSrc, final      JsonSerializationContext context)
    {
        if (src == null)
            return null;

        final JsonObject retVal = new JsonObject();

        retVal.addProperty("firstname", src.getFirstname());
        retVal.addProperty("lastname", src.getLastname());

        return retVal;
} 
```

因此 JSON 的输出如下所示： { "firstname" : "XXX", "lastname" : "YYY" }

我怎样才能让这个看起来像“人”{“名字”：“XXX”，“姓氏”：“YYY”}

谢谢你看...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:33:09.620

那不是有效的 JSON。JSON 只是一种数据表示，对类型信息等元数据一无所知。

您可以获得的最接近的方法是将类型显式添加为额外属性，例如：

`{ "@type":"Person", "firstname":"XXX", "lastname":"YYY" }`

然而，这意味着您在反序列化时必须选择正确的类。您可能想查看一些库，但我认为它们要么要求您自己指定类，要么向可序列化类添加自定义注释。

# c# - BinaryReader.Dispose(bool disposing) 创建对流的本地引用。为什么？

> ID：13634722
> 
> 赞同：5
> 
> 时间：2012-11-29T21:06:12.357
> 
> 标签：c#, reference, stream, garbage-collection

我在 FCL 代码中发现了一个不寻常的示例。

这是 System.IO.BinaryReader 中的方法：

```
 protected virtual void Dispose(bool disposing) { 
        if (disposing) { 
            Stream copyOfStream = m_stream;
            m_stream = null; 
            if (copyOfStream != null && !m_leaveOpen)
                copyOfStream.Close();
        }
        m_stream = null; 
        m_buffer = null;
        m_decoder = null; 
        m_charBytes = null; 
        m_singleChar = null;
        m_charBuffer = null; 
    } 
```

“copyOfStream”对执行逻辑有什么影响？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T21:10:07.553

这样做是为了即使`Stream.Close()`抛出异常， m_stream 也会被设置为 null。

**回应评论**

> Stream.Close() 可以引发什么样的异常

当您关闭一个流时，任何缓冲的输出都会被刷新，这可能会引发异常，例如由于网络故障。

> 我不确定这是一个基本原理。通常我们在 using 块中调用 Dispose，这意味着该变量无论如何都不会使用

在上面，如果 Stream.Close() 抛出，那么 m_stream 将已经为空。使用以下替代方法，如果 Stream.Close() 抛出，m_stream 将不会设置为 null：

```
m_stream.Close(); // <== throws
m_stream = null;  // <== not executed if Close() throws 
```

> 但是在这种情况下，如果我们谈论的是异常安全，有人可以重试调用 Dispose 方法，并且将面临 NullReferenceException

它不会抛出 NullReferenceException，因为它会测试 null：

```
if (copyOfStream != null && !m_leaveOpen)
        copyOfStream.Close(); 
```

# python - 从 Python 调用 Perl 脚本不断返回值

> ID：13634723
> 
> 赞同：4
> 
> 时间：2012-11-29T21:06:15.637
> 
> 标签：python, perl, return, continuous

我在这个网站上发现了一个问题，它向我展示了如何从[Python调用](http://en.wikipedia.org/wiki/Python_%28programming_language%29)[Perl](http://en.wikipedia.org/wiki/Perl)脚本。我目前正在使用以下代码行来实现这一点：

```
pipe = subprocess.Popen(["perl", "./Perl_Script.pl", param], stdout=subprocess.PIPE)
result = pipe.stdout.read() 
```

这很完美，但唯一的问题是 Perl 脚本需要几分钟才能运行。在 Perl 脚本的末尾，我使用一个简单的*print*语句来打印我需要返回给 Python 的值，该值被设置为 Python 中的*结果*变量。

有没有一种方法可以每隔几秒钟在我的 Perl 脚本中包含更多的打印语句，这些语句可以连续返回到 Python（而不是等待几分钟并在最后返回一个长列表）？

最终，我正在做的是使用 Perl 脚本获取数据点，然后我将这些数据点发送回 Python 以绘制眼图。当 Perl 脚本运行完毕后，我不想等待几分钟来绘制眼图，而是希望将数据片段连续返回给 Python，让我的绘图每隔几秒钟更新一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:27:33.763

默认的 UNIX 标准输出缓冲区至少为 8k。如果您写入的内容少于 8k，您最终将等到程序结束后再刷新缓冲区。

告诉 Perl 程序停止缓冲输出，并可能告诉 python 不要缓冲通过管道的输入。

`$| = 1;`

在您的 Perl 程序中取消缓冲 STDOUT。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T21:29:41.360

pipe.stdout.read() 尝试读取整个流，因此它将阻塞直到 perl 完成。尝试这个：

```
line=' '
while line:
    line = pipe.stdout.readline()
    print line, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T22:48:33.587

您需要两部分：在 Python 空间中一次读取一行，并从 Perl 一次发出一行。第一个可以通过像这样的循环来完成

```
while True:
  result = pipe.stdout.readline()
  if not result:
    break
  # do something with result 
```

阻塞直到从附加进程接收`readline`到一行文本（或`EOF`），然后为您提供它读取的数据。只要每个数据块都在自己的行上，那应该可以。

但是，如果您在不修改 Perl 脚本的情况下运行此代码，那么很长一段时间内您都不会得到任何输出，可能要等到 Perl 脚本执行完毕。这是因为默认情况下 Perl 块缓冲区输出到管道。您可以通过更改要打印的范围内的全局变量来告诉它更频繁地刷新缓冲区：

```
use English qw(-no_match_vars);
local $OUTPUT_AUTOFLUSH = 1;
print ...; 
```

请参阅[http://perl.plover.com/FAQs/Buffering.html](http://perl.plover.com/FAQs/Buffering.html)和[http://perldoc.perl.org/perlvar.html](http://perldoc.perl.org/perlvar.html)。

# system.reactive - Rx 主题中的观察者计数

> ID：13634725
> 
> 赞同：5
> 
> 时间：2012-11-29T21:06:24.233
> 
> 标签：system.reactive

使用 Rx，获取 Subject 中当前观察者数量的最佳方法是什么？

我有一个场景，我想发布一条消息，但前提是有观察者。如果没有观察者，我需要做其他事情。

为了解决这个问题，我所做的是创建自己的 ISubject 实现并公开内部 IObserver 集合的计数。我确信必须有一种开箱即用的方式来做到这一点，我只是不完全熟悉 Rx 所提供的功能。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-09-09T03:44:14.737

使用该`Subject<T>.HasObservers`物业。

[源代码](https://rx.codeplex.com/SourceControl/latest#Rx.NET/Source/System.Reactive.Linq/Reactive/Subjects/Subject.cs)

我不记得它是什么时候引入的，但我很确定它并不总是在那里。它可能是在 Rx 2.0 中添加的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-30T00:52:06.477

您应该尽可能避免实现自己的可观察（或主题）实现。

您当然可以尝试编写一个包装类来提供帮助。

尝试这个：

```
public class Countable
{
    private int _count;
    public int Count { get { return _count; } }
    public IObservable<T> GetCountable<T>(IObservable<T> source)
    {
        return Observable.Create<T>(o =>
        {
            Interlocked.Increment(ref _count);
            var subscription = source.Subscribe(o);
            var decrement = Disposable.Create(() =>
            {
                Interlocked.Decrement(ref _count);
            });
            return new CompositeDisposable(subscription, decrement);
        });
    }
} 
```

然后，您可以编写如下代码：

```
var xs = new Subject<int>();
var countable = new Countable();
var ys = countable.GetCountable(xs);
Console.WriteLine(countable.Count);
var s1 = ys.Subscribe(y => { });
Console.WriteLine(countable.Count);
var s2 = ys.Subscribe(y => { });
Console.WriteLine(countable.Count);
s1.Dispose();
Console.WriteLine(countable.Count);
s2.Dispose();
Console.WriteLine(countable.Count); 
```

我的运行结果是：

```
0
1
2
1
0 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-06T08:39:36.037

使用 `subject.observers.length`，例如：

```
import {Subject} from 'rxjs'

let subject = new Subject()
let s1 = subject.subscribe(v => console.log('observerA: ' + v))

subject.next(1) // observerA: 1
console.log(subject.observers.length) // 1

let s2 = subject.subscribe(v => {
    console.log('observerB: ' + v)
    if(v===3) s2.unsubscribe()
})

subject.next(2) // observerA: 2
console.log(subject.observers.length) // 2

subject.next(3) // observerA: 3
console.log(subject.observers.length) // 1 
```

# android - 服务广播到以对话框形式启动新 Activity 的 Activity - 如何返回到第一个 Activity？

> ID：13634726
> 
> 赞同：0
> 
> 时间：2012-11-29T21:06:28.253
> 
> 标签：android, android-activity, android-dialog

我有一个以 StartupActivity 开头的应用程序。

该 StartupActivity 启动服务，如下所示：

```
startService(new Intent(StartupActivity.this, SamcomService.class)); 
```

在某个时候，Service 决定广播一个 Intent，StartupActivity 会对此做出反应。Activity 在收到 INtent 时会执行以下操作：

```
Intent intent2 = new Intent(StartupActivity.this, DialogActivity.class); 
intent2.putExtra("Centrals", list); // list is defined elsewhere
startActivity(intent2); 
```

如您所见，启动了一个新的 Activity，并且该 Activity 恰好有 Theme.Dialog 作为 Theme。对话框显示一个列表，用户应该在其中选择一些东西。此时，它们应该返回到第一个 Activity，即 StartupActivity。如果按 BACK，它们也应该返回到第一个 Activity。

这是 DialogActivity 的 onCreate 代码：

```
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    final ArrayList<tWorks.Samcom.SICJsonProtocol.Objects.Central> list = (ArrayList<tWorks.Samcom.SICJsonProtocol.Objects.Central>)this.getIntent().getSerializableExtra("Centrals");

    // Some more stuff not necessary for this question...
    // ....
    // ....

    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Choose");
    builder.setItems(items2, new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) 
        {
                        // Do some stuff depending on choice
            finish();
        }
    });
    builder.create().show();
} 
```

问题是整个应用程序，即所有活动等都消失了，我返回到主屏幕。

如果我不调用“finish()”，那么我会在 StartupActivity 顶部留下一个“覆盖”，并且不能再做任何事情。如果我按 BACK，我将返回主屏幕。

那么，当从列表中选择某些内容或按回时，如何使 DialogActivity 消失/消失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:46:06.543

那么它应该在后面打开你的启动屏幕。检查你的清单。并在清单中检查启动活动是否有任何 android.nohistry=true。只需将其删除。

# mysql - 确定数据库中登录用户数量的有效方法

> ID：13634728
> 
> 赞同：1
> 
> 时间：2012-11-29T21:06:35.823
> 
> 标签：mysql, sql, database

我们的 MySQL 数据库有一个`users`表，`logged_in, BOOL`其中有一列在检测到用户登录或注销时设置。

`SELECT COUNT(*) FROM users WHERE logged_in = 1`在我们的网站上，我们会显示“用户登录到应用程序”，但出于性能原因，我很谨慎。

我们预计 users 表可能有几千行，但任何时候只有少数（比如 20 个）用户会登录。

有没有办法确保这个查询可以在 MySQL 中优化，可能涉及 KEY 或 VIEW？或者我是否需要像`logged_in_users`旁边的用户一样创建一个辅助表并更新它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:11:58.640

1.  如果上面有索引，`logged_in`则应该是一个非常快速的查询，因为登录的人数将非常少，与整个用户表相匹配（但是，logged_in = 0 可能不是很有效:)）这是其中之一仅具有 2 个可能值的列上的索引可以对其中一个值进行超高效查询的情况。
2.  不做`count(*)`，做`count(your_primary_key)`。这样，如果您已为 logged_in 编制索引，则将覆盖整个查询以获得最佳性能。

# c# - 将 ComboBox 的项目从一种形式更改为具有相同数据库的另一种形式

> ID：13634729
> 
> 赞同：0
> 
> 时间：2012-11-29T21:06:39.267
> 
> 标签：c#, windows, forms, combobox

我有一些问题。

我将菜单构建为使用 tabcontrol 和使用表单的 tab

我有第一种形式：

![在此处输入图像描述](../Images/1197c75222591d7454c5e97148e89b30.png)

有一些动作 - 更新，删除......

* * *

还有其他形式

![在此处输入图像描述](../Images/750e13875cd9458a582e9daeeab640f9.png)

我在第一个表单之后尝试了第二个表单，当我传递到第二个选项卡/表单时，不同的操作会立即更新编写电影代码的组合框，但它没有做任何事情

对不起我的英语不好，谢谢，

爱丽儿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T18:16:10.700

您可以在表格 2 中编写新的公共函数

以form2为例

```
public void updateForm()
{
      // readCombo box data from db

} 
```

并在更新或删除后从表格 1 调用，例如在 delete_click 或 update_click 事件中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T22:18:14.267

您如何尝试更新组合框？看看这个问题 -[组合框：向项目添加文本和值（无绑定源）](https://stackoverflow.com/questions/3063320/combobox-adding-text-and-value-to-an-item-no-binding-source) 看起来您首先需要覆盖组合框，以便您可以修改它。然后你需要这样的东西来做`Form2`（伪代码）；

```
 Form2_EventHandeler()
   {
          Form1.ComboBox.Add(Form2.TextBoxWithNewInput.Text);
   } 
```

# mysql - 没有正确获取最新的 25 个 ORDER BY LIMIT

> ID：13634735
> 
> 赞同：-1
> 
> 时间：2012-11-29T21:07:04.167
> 
> 标签：mysql, mysqli

目前我正在使用

```
select text, tid from notifications where user = '".$_SESSION['id']."' ORDER BY id asc 
```

但如果我使用：

```
select text, tid from notifications where user = '".$_SESSION['id']."' ORDER BY id asc LIMIT 0,25 
```

它只查看前 25 个。它必须是最新的 25 个。我该怎么做？

认为我解决了这个问题？

```
$total = mysql_query("select id from notifications where user = '".$_SESSION['id']."'");
$total = mysql_num_rows($total)-25;

$l = mysql_query("select text, tid from notifications where user = '".$_SESSION['id']."' ORDER BY id asc limit $total,25") or die ( mysql_error()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:09:22.340

`ORDER BY id desc`代替`ORDER BY id asc`

`mysql_query("select text, tid from notifications where user = '".$_SESSION['id']."' ORDER BY id DESC LIMIT 0,25") or die ( mysql_error() );`

应该不需要您在最新编辑中提到的额外查询。正如我所提到的，只需调整显示数据的循环，使其首先显示最后一项，然后再下线。

例如（仅以标准数组为例，因为我不知道您的数据库返回什么）：

```
$items = array(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25); // Here you would use mysql_fetch_array or equivalent to get your array of items

$count = count($items); // Here you would use mysql_num_rows($items);

// Then, run through each item, starting with 25 (the last) and going backwards until 0.
do {
    echo $items[$count] . "<br/>";
    $count--;
}
while($count >= 0); 
```

# sql - 此场景中的 Sql 查询 - C#

> ID：13634737
> 
> 赞同：0
> 
> 时间：2012-11-29T21:07:16.413
> 
> 标签：sql, c#-4.0

我有名称表：

```
ID           Name 
1            Ken
2            John
3            Tom 
```

...

我在 c# 代码中有以下变量： `var names`; //这是一些名字的列表，比如“ken，Tom”

我需要一个通过 Names 表并获取不在 names 变量中的所有名称的查询。

因此，在上述情况下，如果我运行查询结果应该是 John。

我不确定如何在这个问题中编写查询我正在遍历名称并一次又一次地运行查询，我认为这确实是一个糟糕的方法。有人可以建议什么是最有效的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:13:18.520

如果您需要在 T-SQL 中执行此操作，您可以执行以下操作：

```
SELECT *
FROM table
WHERE Name NOT IN (<<comma separated list of values here>>) 
```

这可以内联或在存储过程中完成。

如果您可以使用实体框架（您指出.Net 4.0，所以您应该能够），那么您可以使用类似于此答案的内容：

[Linq-to-sql 不包含或不在？](https://stackoverflow.com/questions/3739246/linq-to-sql-not-contains-or-not-in)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T21:13:48.880

尝试使用[表值参数](http://orionseven.com/blog/2009/09/30/using-table-valued-parameters-in-sql-server-2008-and-c/)发送数据。此时，您可以正常比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T21:16:22.593

如果表格像您展示的那样简单，那么我无法想象它有超过几千条记录。既然如此，表扫描应该是一个可以接受的解决方案。

```
select Name
  from tbl
 where ', ' + @names + ', ' not like '%, ' + name + ', %'; 
```

参数化@names 变量。

# mysql - Autorefresh mysql table after making selection with dropdown

> ID：13634741
> 
> 赞同：1
> 
> 时间：2012-11-29T21:07:20.783
> 
> 标签：mysql, ajax, drop-down-menu

I'm trying to make my table autofresh with ajax after having selected an item from a dropdown list. I'm able to make a selection from mysqldb with a dropdown list in combination with autorefresh. However after autorefresh my selection gets lost so no rows are shown anymore. Obviously i'm doing something wrong. I need some help. Here's part of my code:

making dropdown list + placing div:

```
<body>
<script src="ajax_aktueel.js"></script>
<script type="text/javascript"><!--
refreshdiv();
// --></script>
<?php
$link1=mysql_connect('pc','user','password');
mysql_select_db('sensordata',$link1);
$query1="select devicemacid, deviceomschrijving from device order by deviceomschrijving asc";
$result1=mysql_query($query1);
echo "<option>Selecteer een device: </option>";
echo "<select name=\"device\" onchange=\"refreshdiv(this.value)\">";
while ($row = mysql_fetch_array($result1))
{
echo "<option value=\"" . $row['devicemacid']  . "\">" . $row['deviceomschrijving']  . "</option>";
}
echo "</select>";
?>
<br />
<br />
<div id="content"></div>
</body> 
```

content of file ajax_aktueel.js:

```
var seconds = 1;
var divid = "content";
var url = "file.php";

function refreshdiv(str){

if (str=="")
{
document.getElementById(divid).innerHTML="";
return;
} 
var xmlHttp;
try{
xmlHttp=new XMLHttpRequest(); // Firefox, Opera 8.0+, Safari
}
catch (e){
try{
xmlHttp=new ActiveXObject("Msxml2.XMLHTTP"); // Internet Explorer
}
catch (e){
try{
xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
}
catch (e){
alert("Your browser does not support AJAX.");
return false;
}
}
}

// Timestamp for preventing IE caching the GET request

fetch_unix_timestamp = function()
{
return parseInt(new Date().getTime().toString().substring(0, 10))
}

var timestamp = fetch_unix_timestamp();
var nocacheurl = url+"?idmac="+str+"&t="+timestamp;

xmlHttp.onreadystatechange=function(){
if(xmlHttp.readyState==4){
document.getElementById(divid).innerHTML=xmlHttp.responseText;
setTimeout('refreshdiv()',seconds*1000);
}
}
xmlHttp.open("GET",nocacheurl,true);
xmlHttp.send(null);
}

// Start the refreshing process

var seconds;
window.onload = function startrefresh(){
setTimeout('refreshdiv()',seconds*1000);
} 
```

# vb.net - Visual Basic - Select Random Excel Sheet and Random Cell

> ID：13634746
> 
> 赞同：0
> 
> 时间：2012-11-29T21:07:43.433
> 
> 标签：vb.net, excel, random, cell, worksheet

It has been a while since I've coded in Visual Basic, so I forgot much of what I knew when working with MS Excel. I am actually coding within the developer tab of MS Excel 2007.

I have an existing workbook that contains a sheet called "MySheet". In this sheet is a range of cells with text values, and the cells rangefrom A1:A10\. I would like to click a button and select the text from any random cell within this range. The text would then be displayed in a message box. Here is what I have so far. This definitely doesn't work though. Any help please? Thanks!

```
Private Sub myButton_Click()
Dim xl As New Excel.Application
Dim xlsheet As Excel.Worksheet
Dim xlwbook As Excel.Workbook
Dim myCell As Range
Dim rndText As String
Dim rndIndex as Integer

rndIndex = **random number...not sure how**
rndText = ""

xlsheet = xl.Workbook.Sheets("MySheet")
myCell = xlsheet.Cells(rndIndex, 1)
rndText = myCell.Value
MsgBox (rndText)

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:35:05.813

你肯定在正确的轨道上。要在 .NET 中获取随机数，方法如下：

```
Dim rand = new Random()
rndIndex = rand.Next()

'Or you can do this and set a minimum and maximum value for the random number
rndIndex = rand.Next(0, 100) 
```

# iphone - Host Git Repo on my Mac for Xcode project

> ID：13634748
> 
> 赞同：-1
> 
> 时间：2012-11-29T21:07:59.860
> 
> 标签：iphone, xcode, macos, git

For work all my code must be hosted locally, which rules out using something nice like GitHub. However, I really want to be able to use XCodes Git functionality.

Is it possible to host the repository locally and have multiple computers push and pull from it? I have a server available but it runs Windows 08 so I'm not real keen to making that work

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:37:17.273

任何运行 SSH 服务器的 *nix 机器都可以轻松地托管具有推/拉访问权限的 Git 存储库。所有人需要做的就是登录并访问文件，然后他们可以克隆和拉取文件。写权限，他们可以推送。（但是，如果您希望它接受推送，您将需要一个裸仓库。否则，事情会变得各种各样。不太容易出错的是为人们请求您从他们的仓库中提取的方法提供一种方式，但是这要求每个人都托管一个 Git 存储库。如果这不是一个真正的选择，那么下一个最好的办法是让每个人都推送到一个裸存储库。）

Git 也可以通过 HTTP 工作，据说很容易设置 Apache 来托管一个 repo。不过，我实际上在 SSH 方面取得了很大的成功。对我来说似乎更容易设置；所有服务器需要的是一个 sshd、（几乎可以肯定）Git 和适当的用户帐户。

另请注意，如果您不需要共享，那么 Git 已经离线完成了您需要的一切。以上所有内容仅适用于您希望其他人能够从您那里拉（并可能推向）您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T21:34:59.293

你可以在你的机器上运行 git 或 svn。只需设置一个本地存储库。请注意，mac os x 在引擎盖下具有 unix。

# python - Python urllib and firewall: "connection was forcibly closed"

> ID：13634749
> 
> 赞同：1
> 
> 时间：2012-11-29T21:08:09.767
> 
> 标签：python, web-scraping, firewall

I'm working my way through The Programming Historian 2, a self-tutorial in coding for historians focusing on HTML and Python. I am attempting to complete the lesson Working with Files and Web Pages but am stuck on the Opening URLs with Python unit. I am running the following program:

```
# open-webpage.py

import urllib2

url = 'http://www.oldbaileyonline.org/print.jsp?div=t17800628-33'

response = urllib2.urlopen(url)
webContent = response.read()

print webContent[0:300] 
```

Every time I run the program Komodo Edit 7 returns the following error message:

```
Traceback (most recent call last):  
  File "open-webpage.py", line 7, in <module>  
    response = urllib2.urlopen(url)  
  File "C:\Python27\lib\urllib2.py", line 126, in urlopen  
    return _opener.open(url, data, timeout)  
  File "C:\Python27\lib\urllib2.py", line 400, in open  
    response = self._open(req, data)  
  File "C:\Python27\lib\urllib2.py", line 418, in _open  
    '_open', req)  
  File "C:\Python27\lib\urllib2.py", line 378, in _call_chain  
    result = func(*args)  
  File "C:\Python27\lib\urllib2.py", line 1207, in http_open  
    return self.do_open(httplib.HTTPConnection, req)  
  File "C:\Python27\lib\urllib2.py", line 1180, in do_open  
    r = h.getresponse(buffering=True)  
  File "C:\Python27\lib\httplib.py", line 1030, in getresponse  
    response.begin()  
  File "C:\Python27\lib\httplib.py", line 407, in begin  
    version, status, reason = self._read_status()  
  File "C:\Python27\lib\httplib.py", line 365, in _read_status  
    line = self.fp.readline()  
  File "C:\Python27\lib\socket.py", line 447, in readline  
    data = self._sock.recv(self._rbufsize)  
socket.error: [Errno 10054] An existing connection was forcibly closed by the remote host 
```

I have attempted the program with a number of different urls, always with the same result. The guys at Komodo think the problem is to do with my university's firewall, because I access the internet through my university's proxy. The tech people here told me to change my default browser from RockMelt (chromium) to IE, because only IE is fully supported. I did so with no change and they have no other suggestions.

Can anyone suggest an alternate explanation for the error or a way to address the firewall problem? Thanks.

# ruby-on-rails - call form rails with bootstrap twitter

> ID：13634754
> 
> 赞同：0
> 
> 时间：2012-11-29T21:08:25.040
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery, twitter-bootstrap

Someone has used to the modal of twitterboostrap calling to _form.html.erb ?

This is my try.

first I add the next line in the form (this is other form)

```
<%= simple_form_for(@terreno, html: {class: "form-horizontal"}, remote: :true) do |f| %>
  <% if @terreno.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@terreno.errors.count, "error") %> prohibited this terreno from being saved:</h2>

      <ul>
      <% @terreno.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <%= f.input :titulo %>
  <%= f.input :direccion %>
  <%= f.input :region %>
  <%= f.input :metrocuadrado %>
  <%= f.input :precio %>
  <%= f.input :votos %>
  <%= link_to "Add image", new_image_path, id: "new_image", class: 'btn', remote: :true %>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %> 
```

The next step has been create the view for image. in this Case the view is view/images/new.js.erb

In this file I add the next code:

```
$('#new_image').hide().after('<%= j render("form") %>') 
```

When I clicked the button "Add image" no show the form, but when I show the console(firebug), this show me the content of the _form.html.erb (remember this form belongs to image controller).

Any idea ?

Pdt: My english is very bad, sorry.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:29:48.747

这可能归结为 HTML 转义字符。尝试：

```
$('#new_image').hide().after('<%= escape_javascript(raw render :partial => "form").html_safe %>'); 
```

# javascript - Is it bad practice to use hidden fields?

> ID：13634755
> 
> 赞同：22
> 
> 时间：2012-11-29T21:08:25.977
> 
> 标签：javascript, html, hidden-field

A fellow programmer told me it was 'bad practice' to use hidden fields in my HTML code. Essentially I have a unordered list that a user selects an item based on a category they selected (the categories are pictures). It then calls javascript to set a hidden field to the value the user selected so I can send it along when the form submitted. Is this truly bad practice, is there another way I should be doing this?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T21:19:53.620

隐藏字段存在，因此可以在不显示输入的情况下在表单中设置值，我不明白使用它们是一种不好的做法。如果您需要创建自定义小部件并通过表单发送它的值，这是最简单的方法，您仍然可以使用带有动态选择列表的选择按钮，但您必须做一些丑陋的黑客来使界面看起来漂亮。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T21:19:46.243

这是一种非常普遍的做法。在您的情况下，我能想到的唯一问题是，如果您的访问者禁用了 JavaScript，它会中断，因此您可能需要回退。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-29T21:23:54.430

如果你想提交一个表单并且需要传递一些不包含在可见表单字段中的简单值，那么隐藏字段可能是最古老、最可靠和最干净的方式。

考虑替代方案：

1.  无用：不要传递任何隐藏的东西。

2.  差：抽象，例如 ASP.Net 视图状态，它无论如何都使用隐藏字段但会污染请求模型（并且可以添加一堆不需要的数据，除非你小心 - 大多数人都没有）。

3.  BAD：传递查询字符串上的所有表单值。这通常是非 RESTful 的，并且可能是完全有害的（用户为执行意外操作的查询字符串添加书签）。

4.  也许：使用 AJAX 手动 POST 值。假设您只想执行异步操作，这可能是一个非常有效的实现。

5.  Maybe：服务器处理更改的完整往返（可能是在没有 JavaScript 的情况下支持用户的唯一方法）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-29T21:26:25.743

对必须安全的信息使用隐藏字段是不好的做法。当没有安全问题时，使用隐藏字段通常没问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-29T21:15:14.907

在 HTML DOM 中存储 javascript 值通常是一种不好的做法。您应该尝试创建一个存储在您的 javascript 环境中的列表。

```
window.myList = new Array(); 
```

当你有很多东西时，我建议你使用像[Underscore.js](http://underscorejs.org/)甚至[Backbone.js这样的东西。](http://backbonejs.org/)

如果您只在提交时使用这些数据，那么您的案例似乎是合法的。

# c# - 在循环中使用 FindControl 获取以编程方式添加的 TextBox 的值

> ID：13634758
> 
> 赞同：2
> 
> 时间：2012-11-29T21:08:29.957
> 
> 标签：c#, asp.net, gridview, textbox, findcontrol

我有一个绑定到 DropDownList 的 GridView。当 DropDownList 的索引更改时，GridView 由 SQL 查询更新。GridView 的单元格中的值被转换为标签，并以编程方式添加一个文本框。按钮的 OnClick 会循环遍历 Labels 和 TextBoxes 的值，然后提交到购物车。

我无法将 TextBoxes 的值放入我的循环中。FindControl找不到TextBox的ID？我认为这与以编程方式添加 TextBox 有关吗？

原谅我的无知和编码方法......我只进入 ASP 一年。

```
protected void Page_Load(object sender, EventArgs e) {
    NPBasePage _bp = (NPBasePage) Page;
    string myUserID = _bp.UserID;
    UserIDLabel.Text = myUserID;
    if (Page.IsPostBack) {} else {}
}

protected void RapidOrderEntry_RowDataBound(object sender, GridViewRowEventArgs e) {
    if (e.Row.RowType == DataControlRowType.DataRow) {
        foreach(TableCell c in e.Row.Cells) {
            TextBox l = new TextBox();
            l.ID = "QuantityTextBox";
            l.Text = "0";
            l.CssClass = "QuantityTextBox";
            Label b = new Label();
            b.ID = "PartNumberLabel";
            b.CssClass = "labelNone";
            Label x = new Label();
            x.Text = "&nbsp;";
            x.CssClass = "null";
            b.Text = c.Text;
            if (c.Text == "&nbsp;") {
                c.Controls.Add(x);
            } else {
                c.Controls.Add(l);
                c.Controls.Add(b);
            }
        }
    }
}

protected void AddTheseItemsToMyShoppingBagButton_Click(object sender, EventArgs e) {
    NPBasePage _bp = (NPBasePage) Page;
    NPOrder order = new NPOrder(_bp.UserID, _bp.SessionID);
    if (!order.Initialized) {
        order.CreateDefaultOrder(_bp.UserID, _bp.AccountID, _bp.SessionID);
    }
    for (int x = 0; x < RapidOrderEntry.Rows.Count; x++) {
        for (int y = 0; y < RapidOrderEntry.Rows[x].Cells.Count; y++) {
            NPOrderDetail newdet = order.AddPart((RapidOrderEntry.Rows[x].Cells[y].Text), Int32.Parse(((TextBox)RapidOrderEntry.Rows[x].Cells[y].FindControl("QuantityTextBox")).Text), _bp.CatalogCode, "", _bp.PriceList, 0, NPConnection.GetConfigDB("Commerce", "CalculationUoM"));
        }
    }
    Response.Redirect("/commerce/cart.aspx");
} 
```

我确信问题在于这个和我的循环：

```
Int32.Parse(((TextBox)RapidOrderEntry.Rows[x].Cells[y].FindControl("QuantityTextBox")).Text) 
```

重新调整的错误是“对象引用未设置为对象的实例”。如果我像这样手动将整数设置为 1：

```
NPOrderDetail newdet = order.AddPart((RapidOrderEntry.Rows[x].Cells[y].Text), 1, _bp.CatalogCode, "", _bp.PriceList, 0, NPConnection.GetConfigDB("Commerce", "CalculationUoM")); 
```

它就像一个魅力。但是客户需要能够输入自己的数量。

# 编辑

这是我的完整代码——希望这会有所帮助。

```
<%@ Import Namespace="System.Data" %>
<%@ Import Namespace="System.Data.SqlClient" %>
<%@ Import Namespace="System.Collections.Generic" %>
<%@ Import Namespace="netpoint.api" %>
<%@ Import Namespace="netpoint.api.catalog" %>
<%@ Import Namespace="netpoint.api.commerce" %>
<%@ Import Namespace="netpoint.classes" %>
<%@ Import Namespace="netpoint.api.data" %>

<%@ Page language="c#" Inherits="netpoint.classes.NPBasePage" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<link rel="Shortcut Icon" href="/favicon.ico">
<title>Rapid Order Entry</title>
<link href="../../assets/common/themes/2011/css/partner.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="../../assets/common/themes/2011/js/common.js"></script>

<style>
h2 {
    font-size: 15px;
    color: #2D210B;
    font-weight: bolder;
    margin-bottom: 0px;
    padding-bottom: 0px;
}
p {
    font-family: Arial, Verdana, Helvetica, sans-serif;
    font-size: 11px;
    line-height: 14px;
}
.red {
    background-color: #F66;
    color: #333;
}
.yellow {
    background-color: #FFDC78;
    color: #333;
}
.green {
    background-color: #B4DCB4;
    color: #333;
}
.null {
    background-color: #CCC;
}
#RapidOrderEntry th {
    width: 35px;
    height: 35px;
}
.color {
    font-weight: bold;
    width: 67px;
}
.labelNone {
    display: none;
}
.QuantityTextBox {
    width: 20px;
    height: 20px;
    text-align: center;
}
</style>

<script runat="server">

    protected void Page_Load(object sender, EventArgs e) {
        NPBasePage _bp = (NPBasePage) Page;
        string myUserID = _bp.UserID;
        UserIDLabel.Text = myUserID;

        if (Page.IsPostBack) {} 
        else {}
    }

    protected void RapidOrderEntry_RowCreated(object sender, GridViewRowEventArgs e) {
          if (e.Row.RowType == DataControlRowType.DataRow)
        {
            int cellIndex = 0;
            foreach (TableCell c in e.Row.Cells)
            {
                TextBox l = new TextBox();
                l.ID = string.Format("QuantityTextBox_{0}_{1}", e.Row.RowIndex, cellIndex);
                l.Text = "0";
                l.CssClass = "QuantityTextBox";
                Label b = new Label();
                b.ID = string.Format("PartNumberLabel_{0}_{1}", e.Row.RowIndex, cellIndex);
                b.CssClass = "labelNone";
                Label x = new Label();
                x.Text = "&nbsp;";
                x.CssClass = "null";
                b.Text = c.Text;
                if (c.Text == "&nbsp;")
                {
                    c.Controls.Add(x);
                }
                else
                {
                    c.Controls.Add(l);
                    c.Controls.Add(b);
                }

                cellIndex++;
            }
        }
    }

    protected void AddTheseItemsToMyShoppingBagButton_Click(object sender, EventArgs e) {

        NPBasePage _bp = (NPBasePage) Page;
        NPOrder order = new NPOrder(_bp.UserID, _bp.SessionID);
        if (!order.Initialized) {
            order.CreateDefaultOrder(_bp.UserID, _bp.AccountID, _bp.SessionID);
        }
        for (int x = 0; x < RapidOrderEntry.Rows.Count; x++) {
            for (int y = 0; y < RapidOrderEntry.Rows[x].Cells.Count; y++) {

            TextBox tb = (TextBox)RapidOrderEntry.Rows[x].Cells[y].FindControl(string.Format("QuantityTextBox_{0}_{1}", x, y));
            int t = Int32.Parse((tb).Text);
            NPOrderDetail newdet = order.AddPart((RapidOrderEntry.Rows[x].Cells[y].Text), t, _bp.CatalogCode, "", _bp.PriceList, 0, NPConnection.GetConfigDB("Commerce", "CalculationUoM"));    
            }
        }
        Response.Redirect("/commerce/cart.aspx");
    }

    protected void PLMDropDownAlpha_SelectedIndexChanged(object sender, EventArgs e) {
        RapidOrderEntryDS.SelectParameters.Clear();
        PLMDropDownNum.SelectedIndex = 0;
        string PartNo = PLMDropDownAlpha.SelectedValue;
        RapidOrderEntryDS.SelectCommand = "SELECT Color, [1] [XS], [2] [S], [3] [M], [4] [L], [5] [XL], [6] [2XL], [7] [3XL], [8] [4XL], [9] [5XL], [10] [6XL], [11] [LT], [12] [XLT], [13] [2XLT], [14] [3XLT], [15] [4XLT], [16] [5XLT], [17] [6XLT], [18] [OSFM], [19] [ADJ] FROM (SELECT CASE SUBSTRING(PartsMaster.PartNo, CHARINDEX('-', PartsMaster.PartNo) + 1, CHARINDEX('-', PartsMaster.PartNo, CHARINDEX('-', PartsMaster.PartNo) + 1) - (CHARINDEX('-', PartsMaster.PartNo) + 1)) WHEN 'SDL' THEN 'Saddle' WHEN 'TBC' THEN 'Tobacco' WHEN 'APN' THEN 'Aspen' WHEN 'ASP' THEN 'Asphalt' WHEN 'BLK' THEN 'Black' WHEN 'FKH' THEN 'FldKhaki' WHEN 'GVL' THEN 'Gravel' WHEN 'GRV' THEN 'Gravel' WHEN 'MOS' THEN 'Moss' WHEN 'NVY' THEN 'Navy' WHEN 'SAW' THEN 'Sawdust' WHEN 'OS' THEN 'OSFM' WHEN 'BAR' THEN 'Barley' WHEN 'SGE' THEN 'Sage' WHEN 'STN' THEN 'Stone' WHEN 'MOC' THEN 'Mocha' WHEN 'DSK' THEN 'Dusk' WHEN 'ROS' THEN 'Rose' WHEN 'APL' THEN 'Apple' WHEN 'PER' THEN 'Persimon' WHEN 'SND' THEN 'Sand' WHEN 'MUS' THEN 'Mustard' WHEN 'GRN' THEN 'Green' WHEN 'BRN' THEN 'Brown' WHEN '0HD' THEN 'CamoHD' WHEN 'WHE' THEN 'Wheat' WHEN '0M4' THEN 'CamoMax4' WHEN 'OLV' THEN 'Olive' WHEN '0HG' THEN 'CamoHDG' WHEN 'CHR' THEN 'Charcoal' WHEN 'CAN' THEN 'Canyon' WHEN 'GRY' THEN 'Gray' WHEN 'RED' THEN 'Red' WHEN 'BLZ' THEN 'Blaze' WHEN 'MAR' THEN 'Maroon' WHEN 'WLD' THEN 'PPK' WHEN 'PPK' THEN 'OSFM' WHEN 'NGT' THEN 'Night' WHEN 'SLR' THEN 'Solar' WHEN 'WDF' THEN 'Wildfire' WHEN '0AP' THEN 'CamoAP' WHEN 'DOX' THEN 'DrkOxford' WHEN 'SUN' THEN 'Sunset' WHEN 'MDN' THEN 'Midnight' WHEN 'SHD' THEN 'Shadow' WHEN 'PTL' THEN 'Petal' WHEN 'LTN' THEN 'LtTan' WHEN 'CHC' THEN 'Chocolate' WHEN 'SMK' THEN 'Smoke' WHEN 'FTG' THEN 'Fatigue' WHEN 'CAC' THEN 'Cactus' WHEN 'ROP' THEN 'Rope' WHEN 'STL' THEN 'Steel' WHEN 'CLY' THEN 'Clay' WHEN 'KHA' THEN 'Khaki' WHEN 'CHA' THEN 'Charcoal' WHEN 'ERH' THEN 'Earth' WHEN 'MAZ' THEN 'Maize' WHEN 'PNK' THEN 'Pink' WHEN 'CSN' THEN 'Chestnut' WHEN 'FTG' THEN 'Fatigue' WHEN 'INK' THEN 'Ink' WHEN 'PTY' THEN 'Putty' WHEN 'BRK' THEN 'Bark' WHEN 'DWD' THEN 'Driftwood' WHEN 'EVG' THEN 'Evergreen' WHEN 'RWD' THEN 'Redwood' WHEN 'TWN' THEN 'Tawny' WHEN 'SLT' THEN 'Slate' WHEN 'TPE' THEN 'Taupe' WHEN 'TAN' THEN 'Tan' WHEN 'CHL' THEN 'Chili' WHEN 'ELM' THEN 'Elm' WHEN 'LAK' THEN 'Lake' WHEN 'DUN' THEN 'Dune' WHEN 'LDN' THEN 'Loden' WHEN 'STR' THEN 'Stream' WHEN 'SNS' THEN 'Sandston' WHEN 'DNM' THEN 'Denim' WHEN 'PEP' THEN 'Pepper' WHEN 'DBR' THEN 'DKBrown' WHEN 'MUD' THEN 'Mud' WHEN 'BRZ' THEN 'Bronze' WHEN 'GPH' THEN 'Graphite' WHEN 'WHT' THEN 'White' WHEN 'SPC' THEN 'Spice' WHEN 'DGR' THEN 'Dark Green' WHEN '0PA' THEN 'Pink Camo AP' WHEN 'PNE' THEN 'Pine' WHEN 'LGN' THEN 'Lagoon' WHEN 'OPA' THEN 'CamoPnkAP' WHEN '0AB' THEN 'CamoAPBlk' WHEN '0AE' THEN 'CamoAPEvg' WHEN 'CBL' THEN 'Colbalt' ELSE substring(PartsMaster.PartNo, 6, 3) END [Color], CASE WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = 'XS' THEN 1 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = 'S' THEN 2 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = 'M' THEN 3 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = 'L' THEN 4 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = 'XL' THEN 5 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = '2XL' THEN 6 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = '3L' THEN 7 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = '4XL' THEN 8 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = '5XL' THEN 9 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = '6XL' THEN 10 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = 'LT' THEN 11 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = 'XLT' THEN 12 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = '2XLT' THEN 13 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = '3XLT' THEN 14 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = '4XLT' THEN 15 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = '5XLT' THEN 16 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = '6XLT' THEN 17 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = 'OSFM' THEN 18 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = 'ADJ' THEN 19 ELSE '20' END [size], CASE WHEN PartsInventory.OnHand > 0 THEN PartsMaster.PartNo ELSE NULL END [stock_value] FROM PartsAttribute INNER JOIN PartsMaster ON PartsAttribute.PartNo = PartsMaster.PartNo LEFT OUTER JOIN PartsInventory ON PartsMaster.PartNo = PartsInventory.PartNo WHERE (LEN(PartsMaster.PartNo) > 9) AND (PartsMaster.ProductLinePartNo LIKE '" + PartNo + "') AND ((PartsAttribute.AttributeCode = N'size' OR PartsAttribute.AttributeCode = N'color')) AND PartsInventory.WarehouseCode IN ('01') AND (PartsAttribute.PartNo = PartsMaster.PartNo) AND (PartsMaster.PartNo = PartsInventory.PartNo) AND (PartsAttribute.PartNo = PartsInventory.PartNo) AND (PartsInventory.OnHand IS NOT NULL OR PartsAttribute.AttributeCode IS NOT NULL OR PartsMaster.PartNo IS NOT NULL OR PartsAttribute.Dimension1 IS NOT NULL)) AS source PIVOT (min(stock_value) FOR [Size] IN ([1], [2], [3], [4], [5], [6], [7], [8], [9], [10], [11], [12], [13], [14], [15], [16], [17], [18], [19])) AS pivoted";
        RapidOrderEntry.DataBind();
    }
    protected void PLMDropDownNum_SelectedIndexChanged(object sender, EventArgs e) {
        RapidOrderEntryDS.SelectParameters.Clear();
        PLMDropDownAlpha.SelectedIndex = 0;
        string PartNo = PLMDropDownNum.SelectedValue;
        RapidOrderEntryDS.SelectCommand = "SELECT Color, [1] [XS], [2] [S], [3] [M], [4] [L], [5] [XL], [6] [2XL], [7] [3XL], [8] [4XL], [9] [5XL], [10] [6XL], [11] [LT], [12] [XLT], [13] [2XLT], [14] [3XLT], [15] [4XLT], [16] [5XLT], [17] [6XLT], [18] [OSFM], [19] [ADJ] FROM (SELECT CASE SUBSTRING(PartsMaster.PartNo, CHARINDEX('-', PartsMaster.PartNo) + 1, CHARINDEX('-', PartsMaster.PartNo, CHARINDEX('-', PartsMaster.PartNo) + 1) - (CHARINDEX('-', PartsMaster.PartNo) + 1)) WHEN 'SDL' THEN 'Saddle' WHEN 'TBC' THEN 'Tobacco' WHEN 'APN' THEN 'Aspen' WHEN 'ASP' THEN 'Asphalt' WHEN 'BLK' THEN 'Black' WHEN 'FKH' THEN 'FldKhaki' WHEN 'GVL' THEN 'Gravel' WHEN 'GRV' THEN 'Gravel' WHEN 'MOS' THEN 'Moss' WHEN 'NVY' THEN 'Navy' WHEN 'SAW' THEN 'Sawdust' WHEN 'OS' THEN 'OSFM' WHEN 'BAR' THEN 'Barley' WHEN 'SGE' THEN 'Sage' WHEN 'STN' THEN 'Stone' WHEN 'MOC' THEN 'Mocha' WHEN 'DSK' THEN 'Dusk' WHEN 'ROS' THEN 'Rose' WHEN 'APL' THEN 'Apple' WHEN 'PER' THEN 'Persimon' WHEN 'SND' THEN 'Sand' WHEN 'MUS' THEN 'Mustard' WHEN 'GRN' THEN 'Green' WHEN 'BRN' THEN 'Brown' WHEN '0HD' THEN 'CamoHD' WHEN 'WHE' THEN 'Wheat' WHEN '0M4' THEN 'CamoMax4' WHEN 'OLV' THEN 'Olive' WHEN '0HG' THEN 'CamoHDG' WHEN 'CHR' THEN 'Charcoal' WHEN 'CAN' THEN 'Canyon' WHEN 'GRY' THEN 'Gray' WHEN 'RED' THEN 'Red' WHEN 'BLZ' THEN 'Blaze' WHEN 'MAR' THEN 'Maroon' WHEN 'WLD' THEN 'PPK' WHEN 'PPK' THEN 'OSFM' WHEN 'NGT' THEN 'Night' WHEN 'SLR' THEN 'Solar' WHEN 'WDF' THEN 'Wildfire' WHEN '0AP' THEN 'CamoAP' WHEN 'DOX' THEN 'DrkOxford' WHEN 'SUN' THEN 'Sunset' WHEN 'MDN' THEN 'Midnight' WHEN 'SHD' THEN 'Shadow' WHEN 'PTL' THEN 'Petal' WHEN 'LTN' THEN 'LtTan' WHEN 'CHC' THEN 'Chocolate' WHEN 'SMK' THEN 'Smoke' WHEN 'FTG' THEN 'Fatigue' WHEN 'CAC' THEN 'Cactus' WHEN 'ROP' THEN 'Rope' WHEN 'STL' THEN 'Steel' WHEN 'CLY' THEN 'Clay' WHEN 'KHA' THEN 'Khaki' WHEN 'CHA' THEN 'Charcoal' WHEN 'ERH' THEN 'Earth' WHEN 'MAZ' THEN 'Maize' WHEN 'PNK' THEN 'Pink' WHEN 'CSN' THEN 'Chestnut' WHEN 'FTG' THEN 'Fatigue' WHEN 'INK' THEN 'Ink' WHEN 'PTY' THEN 'Putty' WHEN 'BRK' THEN 'Bark' WHEN 'DWD' THEN 'Driftwood' WHEN 'EVG' THEN 'Evergreen' WHEN 'RWD' THEN 'Redwood' WHEN 'TWN' THEN 'Tawny' WHEN 'SLT' THEN 'Slate' WHEN 'TPE' THEN 'Taupe' WHEN 'TAN' THEN 'Tan' WHEN 'CHL' THEN 'Chili' WHEN 'ELM' THEN 'Elm' WHEN 'LAK' THEN 'Lake' WHEN 'DUN' THEN 'Dune' WHEN 'LDN' THEN 'Loden' WHEN 'STR' THEN 'Stream' WHEN 'SNS' THEN 'Sandston' WHEN 'DNM' THEN 'Denim' WHEN 'PEP' THEN 'Pepper' WHEN 'DBR' THEN 'DKBrown' WHEN 'MUD' THEN 'Mud' WHEN 'BRZ' THEN 'Bronze' WHEN 'GPH' THEN 'Graphite' WHEN 'WHT' THEN 'White' WHEN 'SPC' THEN 'Spice' WHEN 'DGR' THEN 'Dark Green' WHEN '0PA' THEN 'Pink Camo AP' WHEN 'PNE' THEN 'Pine' WHEN 'LGN' THEN 'Lagoon' WHEN 'OPA' THEN 'CamoPnkAP' WHEN '0AB' THEN 'CamoAPBlk' WHEN '0AE' THEN 'CamoAPEvg' WHEN 'CBL' THEN 'Colbalt' ELSE substring(PartsMaster.PartNo, 6, 3) END [Color], CASE WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = 'XS' THEN 1 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = 'S' THEN 2 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = 'M' THEN 3 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = 'L' THEN 4 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = 'XL' THEN 5 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = '2XL' THEN 6 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = '3L' THEN 7 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = '4XL' THEN 8 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = '5XL' THEN 9 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = '6XL' THEN 10 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = 'LT' THEN 11 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = 'XLT' THEN 12 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = '2XLT' THEN 13 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = '3XLT' THEN 14 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = '4XLT' THEN 15 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = '5XLT' THEN 16 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = '6XLT' THEN 17 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = 'OSFM' THEN 18 WHEN PartsAttribute.AttributeCode = 'size' AND PartsAttribute.Dimension1 = 'ADJ' THEN 19 ELSE '20' END [size], CASE WHEN PartsInventory.OnHand > 0 THEN PartsMaster.PartNo ELSE NULL END [stock_value] FROM PartsAttribute INNER JOIN PartsMaster ON PartsAttribute.PartNo = PartsMaster.PartNo LEFT OUTER JOIN PartsInventory ON PartsMaster.PartNo = PartsInventory.PartNo WHERE (LEN(PartsMaster.PartNo) > 9) AND (PartsMaster.ProductLinePartNo LIKE '" + PartNo + "') AND ((PartsAttribute.AttributeCode = N'size' OR PartsAttribute.AttributeCode = N'color')) AND PartsInventory.WarehouseCode IN ('01') AND (PartsAttribute.PartNo = PartsMaster.PartNo) AND (PartsMaster.PartNo = PartsInventory.PartNo) AND (PartsAttribute.PartNo = PartsInventory.PartNo) AND (PartsInventory.OnHand IS NOT NULL OR PartsAttribute.AttributeCode IS NOT NULL OR PartsMaster.PartNo IS NOT NULL OR PartsAttribute.Dimension1 IS NOT NULL)) AS source PIVOT (min(stock_value) FOR [Size] IN ([1], [2], [3], [4], [5], [6], [7], [8], [9], [10], [11], [12], [13], [14], [15], [16], [17], [18], [19])) AS pivoted";
        RapidOrderEntry.DataBind();
    }
    protected void ViewShoppingBag_Click(object sender, EventArgs e) {
        Response.Redirect("/commerce/cart.aspx/");
    }
</script>

</head>
<body>
<form id="form1" runat="server">

<div align="center" style="font-family: Arial, Helvetica, sans-serif;"> 

<p>You can use these dropdown lists to quickly jump to all of one product's sizes and colors.</p>

        <asp:DropDownList ID="PLMDropDownAlpha" runat="server" AutoPostBack="True" 
            DataSourceID="ListByPLMDSAlpha" DataTextField="PartName" 
        DataValueField="PartNo" 
        onselectedindexchanged="PLMDropDownAlpha_SelectedIndexChanged" Width="225px" >
        </asp:DropDownList>

&nbsp;&nbsp;

        <asp:DropDownList ID="PLMDropDownNum" runat="server" AutoPostBack="True" 
            DataSourceID="ListByPLMDSNum" DataTextField="PartName" 
        DataValueField="PartNo" 
        onselectedindexchanged="PLMDropDownNum_SelectedIndexChanged" Width="225px" >
        </asp:DropDownList>

<asp:SqlDataSource ID="ListByPLMDSNum" runat="server" 
    ConnectionString="<%$ ConnectionStrings:connString %>" 
    SelectCommand="
        SELECT 'disabled' AS PartNo, ' Products by Part Number ' AS PartName, NULL AS PartCode
        UNION ALL
        SELECT PartNo, CASE
            WHEN PartNo LIKE '%-OD-%' THEN left(PartCode,4) + ' - '  + PartName + ' ' + 'Camo'
            WHEN PartNo LIKE '%-AP-%' THEN left(PartCode,4) + ' - ' + PartName + ' ' + 'Camo'
            WHEN PartNo LIKE '%-0HD-%' THEN left(PartCode,4) + ' - ' + PartName + ' ' + 'Camo'
            WHEN PartNo LIKE '%-0M4-%' THEN left(PartCode,4) + ' - ' + PartName + ' ' + 'Camo'
            ELSE left(PartCode,4) + ' - ' + PartName END PartName, PartCode
        FROM PartsMaster
        WHERE (ProductLineFlag = 'Y') AND (StaticThumbnail <> '')
        ORDER BY PartCode
    ">
</asp:SqlDataSource>

<asp:SqlDataSource ID="ListByPLMDSAlpha" runat="server" 
    ConnectionString="<%$ ConnectionStrings:connString %>" 
    SelectCommand="
        SELECT 'disabled' AS PartNo, ' Products by Part Name ' AS PartName
        UNION ALL
        SELECT PartNo, CASE 
            WHEN PartNO LIKE '%-OD-%' THEN PartName + ' ' + 'Camo'
            WHEN PartNO LIKE '%-AP-%' THEN PartName + ' ' + 'Camo'
            WHEN PartNO LIKE '%-0HD-%' THEN PartName + ' ' + 'Camo'
            WHEN PartNO LIKE '%-0M4-%' THEN PartName + ' ' + 'Camo'
            ELSE PartName END
        FROM PartsMaster
        WHERE (ProductLineFlag = 'Y') AND (StaticThumbnail <> '')
        ORDER BY PartName
    ">
</asp:SqlDataSource>

  <br />
  <br />
  <br />

  </asp:SqlDataSource>
  <asp:GridView ID="RapidOrderEntry" runat="server" datasourceid="RapidOrderEntryDS" OnRowCreated="RapidOrderEntry_RowCreated" autogeneratecolumns="False" style="width:790px;margin:0 auto;text-align:center;">
    <Columns>
        <asp:BoundField DataField="Color" HeaderText="" itemstyle-cssclass="color" />
        <asp:BoundField DataField="XS" HeaderText="XS" />
        <asp:BoundField DataField="S" HeaderText="S" />
        <asp:BoundField DataField="M" HeaderText="M" />
        <asp:BoundField DataField="L" HeaderText="L" />
        <asp:BoundField DataField="XL" HeaderText="XL" />
        <asp:BoundField DataField="2XL" HeaderText="2XL" />
        <asp:BoundField DataField="3XL" HeaderText="3XL" />
        <asp:BoundField DataField="4XL" HeaderText="4XL" />
        <asp:BoundField DataField="5XL" HeaderText="5XL" />
        <asp:BoundField DataField="6XL" HeaderText="6XL" />
        <asp:BoundField DataField="LT" HeaderText="LT" />
        <asp:BoundField DataField="XLT" HeaderText="XLT" />
        <asp:BoundField DataField="2XLT" HeaderText="2XLT" />
        <asp:BoundField DataField="3XLT" HeaderText="3XLT" />
        <asp:BoundField DataField="4XLT" HeaderText="4XLT" />
        <asp:BoundField DataField="5XLT" HeaderText="5XLT" />
        <asp:BoundField DataField="6XLT" HeaderText="6XLT" />
        <asp:BoundField DataField="OSFM" HeaderText="OSFM" />
        <asp:BoundField DataField="ADJ" HeaderText="ADJ" />
    </Columns>
    <EmptyDataTemplate>
      <div style="height:200px;" align="center"> 
            <h2 ID="EmptyDataTemplateOn" style="font-weight:normal;position:relative;top:80px;color:#999;display:none;">The Inventory Matrix for this item is currently unavailable due to insufficient stock information.<br />Item inventories are updated frequently.  Please try again later.</h2>
            <h2 ID="EmptyDataTemplateOff" style="font-weight:normal;position:relative;top:85px;color:#999;">Please choose an item.</h2>
      </div>
    </EmptyDataTemplate>
  </asp:GridView>
  <asp:SqlDataSource ID="RapidOrderEntryDS" runat="server" ConnectionString="<%$ ConnectionStrings:connString %>" />
        <SelectParameters>
                <asp:Parameter Name="PartNo" Type="String" />
            </SelectParameters>
  </asp:SqlDataSource>

    <br />
    <asp:Button ID="AddTheseItemsToMyShoppingBagButton" runat="server" Text="Add These Items to My Order" onclick="AddTheseItemsToMyShoppingBagButton_Click" />

<asp:Label ID="UserIDLabel" runat="server" Visible="false"></asp:Label>

</div>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:52:58.347

我认为 [使用 TemplateFields 生成 TextBox 字段或标签是一个更好的主意。](https://stackoverflow.com/questions/10527859/how-to-add-dynamic-texbox-in-gridview-at-runtime)

# 编辑

您可以在 RowCreated 事件处理程序中创建控件，并使用唯一名称命名控件：

```
protected void RapidOrderEntry_RowCreated(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            int cellIndex = 0;
            foreach (TableCell c in e.Row.Cells)
            {
                TextBox l = new TextBox();
                l.ID = string.Format("QuantityTextBox_{0}_{1}", e.Row.RowIndex, cellIndex);
                l.Text = "0";
                l.CssClass = "QuantityTextBox";
                Label b = new Label();
                b.ID = string.Format("PartNumberLabel_{0}_{1}", e.Row.RowIndex, cellIndex);
                b.CssClass = "labelNone";
                Label x = new Label();
                x.Text = "&nbsp;";
                x.CssClass = "null";
                b.Text = c.Text;
                if (c.Text == "&nbsp;")
                {
                    c.Controls.Add(x);
                }
                else
                {
                    c.Controls.Add(l);
                    c.Controls.Add(b);
                }

                cellIndex++;
            }
        }
    } 
```

然后您可以像这样检索控件：

```
 protected void AddTheseItemsToMyShoppingBagButton_Click(object sender, EventArgs e)
 {
        for (int x = 0; x < RapidOrderEntry.Rows.Count; x++)
        {
            for (int y = 0; y < RapidOrderEntry.Rows[x].Cells.Count; y++)
            {
                TextBox tb = (TextBox)RapidOrderEntry.Rows[x].Cells[y].FindControl(string.Format("QuantityTextBox_{0}_{1}", x, y));
                int t = Int32.Parse((tb).Text);
            }
        }
 } 
```

# xaml - 从哪里开始平铺视图

> ID：13634759
> 
> 赞同：0
> 
> 时间：2012-11-29T21:08:33.077
> 
> 标签：xaml, winrt-xaml, windows-store-apps

我想要一个精确的 windows 8 起始页（或 windows phone，如果你喜欢）作为我的 WinRT 应用程序中的控件。

就像 silverlight [telerik](http://demos.telerik.com/silverlight/#TileView/FirstLook)中的这个，但不是 WinRT

必须是可点击的（容易的部分）和可拖动的（最难的部分）

我一直在寻找例子，但找不到任何好的..有没有人有一个好的起点或提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:07:18.397

你应该试试[Telerik HubTile](http://www.telerik.com/products/windows-8/controls/hubtile.aspx)。

Telerik 提供不同类型的瓷砖类型

# Windows 8 风格瓷砖

![Windows 8 风格瓷砖](../Images/b84cec42ac0f3a60968eb0ed44342ebd.png)

# 旋转和滑动瓷砖

![旋转或滑动任何内容](../Images/0e925dc752a6a4849bd8cc804df8fb5f.png)

# 其他瓷砖类型

![其他瓷砖](../Images/deaa797764d70f1321c5617b58234133.png)

# clojure - 使用 Clojure 的 Overhand Shuffle - 几乎

> ID：13634761
> 
> 赞同：2
> 
> 时间：2012-11-29T21:08:34.383
> 
> 标签：clojure, functional-programming, lisp, shuffle

我正在尝试在 Clojure 中实现[Overhand Shuffle](http://en.wikipedia.org/wiki/Shuffling#Stripping_or_overhand)作为一个学习练习

所以我有这个代码......

```
(defn overhand [cards]
    (let [ card_count (count cards)
          _new_cards '()
         _rand_ceiling (if (> card_count 4) (int (* 0.2 card_count)) 1)]
      (take card_count
            (reduce into (mapcat
                           (fn [c]
                             (-> (inc (rand-int _rand_ceiling))
                                 (take cards)
                                 (cons _new_cards)))
                           cards))))) 
```

它非常接近于做我想做的事，但它反复从前面拿走第一个（随机）N张卡片，但我希望它在列表中前进......

称为

```
(overhand [1 2 3 4 5 6 7 8 9]) 
```

而不是以

```
(1 2 3 1 2 1 2 3 4) 
```

我想结束

```
(7 8 9 5 6 1 2 3 4) 
```

另外，作为一个旁注，这感觉像是一种非常丑陋的缩进/组织这个函数的方式，有没有更明显的方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T22:31:09.023

这个函数正在创建一个列表列表，转换每个列表，并将它们重新组合在一起。问题在于它每次都从同一事物中提取并附加到固定值。本质上它每次都在运行相同的操作，因此它会重复输出而没有通过列表进行。如果您以不同的方式分解问题并将随机大小的块的创建与将它们串在一起分开，则更容易了解如何使其正常工作。

拆分序列的一些方法：

```
(defn random-partitions [cards]
  (let [card_count (count cards)
        rand_ceiling (if (> card_count 4) (inc (int (* 0.2 card_count))) 1)]
   (partition-by (ƒ [_](= 0 (rand-int rand_ceiling))) cards))) 
```

保持分区小于四

```
(defn random-partitions [cards]
  (let [[h t] (split-at (inc (rand-int 4)) cards)]
    (when (not-empty h) (lazy-seq (cons h (random-partition t)))))) 
```

或将分区保持在原始问题中的大小

```
(defn random-partitions [cards]
  (let [card_count (count cards)
        rand_ceiling (if (> card_count 4) (inc (int (* 0.2 card_count))) 1)
        [h t] (split-at (inc (rand-int rand_ceiling)) cards)]
    (when (not-empty h) (lazy-seq (cons h (random-partition t))))))

(random-partitions [1 2 3 4 5 6 7 8 9 10])
((1 2 3 4) (5) (6 7 8 9) (10)) 
```

这也可以在不直接使用lazy-seq的情况下编写：

```
(defn random-partitions [cards]
  (->> [[] cards]
       (iterate
        (ƒ [[h t]]
          (split-at (inc (rand-int 4)) t)))
       rest ;iterate returns its input as the first argument, drop it.
       (map first)
       (take-while not-empty))) 
```

然后可以将其简化为单个序列：

```
(reduce  into (random-partitions [1 2 3 4 5 6 7 8 9 10]))
(10 9 8 7 6 5 4 3 1 2) 
```

如果您将参数反转为 into 它看起来像一个更好的洗牌

```
 (reduce #(into %2 %1) (random-partitions [1 2 3 4 5 6 7 8 9 10]))
(8 7 1 2 3 4 5 6 9 10) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:50:16.347

回答您的缩进问题，您可以重构您的功能。例如，从 mapcat 中提取 lambda 表达式，定义它，然后在对 mapcat 的调用中使用它的名称。您不仅可以帮助缩进，而且您的 mapcat 会更清晰。

例如，这是您的原始程序，经过重构。请注意，您的程序的问题尚未得到纠正，我只是展示了一个重构以改进布局的示例：

```
(defn overhand [cards]
    (let [ card_count (count cards)
          _new_cards '()
         _rand_ceiling (if (> card_count 4) (int (* 0.2 card_count)) 1)]

        (defn f [c]
            (-> (inc (rand-int _rand_ceiling))
                (take cards)
                (cons _new_cards)))

        (take card_count (reduce into (mapcat f cards))))) 
```

您可以将这些原则应用于您的固定代码。

很多缩进问题可以通过简单地分解出复杂的表达式来解决。它还有助于总体上的可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-03T18:37:52.373

组织函数的更好方法是将洗牌动作与驱动它的分裂点的随机选择分开。然后我们可以用可预测的分离器测试洗牌器。

洗牌动作可以表示为

```
(defn shuffle [deck splitter]
  (if (empty? deck)
    ()
    (let [[taken left] (split-at (splitter (count deck)) deck)]
      (concat (shuffle left splitter) taken)))) 
```

在哪里

*   `deck`是要洗牌的序列
*   `splitter``deck`是一个在给定大小的情况下选择拆分位置的函数。

我们可以测试`shuffle`一些简单`splitter`的s：

```
=> (shuffle (range 10) (constantly 3))
(9 6 7 8 3 4 5 0 1 2)
=> (shuffle (range 10) (constantly 2))
(8 9 6 7 4 5 2 3 0 1)
=> (shuffle (range 10) (constantly 1))
(9 8 7 6 5 4 3 2 1 0) 
```

有用。

现在让我们看看你选择分裂点的方式。我们可以说明您的选择`_rand_ceiling`：

```
=> (map
     (fn [card_count] (if (> card_count 4) (int (* 0.2 card_count)) 1))
     (range 20))
(1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 3 3 3 3 3) 
```

这意味着您将从任何少于十张的牌组中只拿一张或两张牌。顺便说一下，表达函数的更简单的方法是

```
(fn [card_count] (max (quot card_count 5) 1)) 
```

所以我们可以将您的拆分器功能表示为

```
(fn [card_count] (inc (rand-int (max (quot card_count 5) 1)))) 
```

所以我们想要的洗牌器是

```
(defn overhand [deck]
  (let [splitter (fn [card_count] (inc (rand-int (max (quot card_count 5) 1))))]
    (shuffle deck splitter))) 
```

# android - 三星设备上的android Horizo ntalScrollView

> ID：13634762
> 
> 赞同：2
> 
> 时间：2012-11-29T21:08:36.493
> 
> 标签：android, horizontalscrollview

我有一个带有 Horizo​​ntalScrollView 和 Horizo​​ntal-LinearLayout 的简单布局，如下所示：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <HorizontalScrollView
        android:layout_width="match_parent"
        android:layout_height="100dp"
        android:scrollbars="horizontal"
        android:fadingEdge="none">

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:orientation="horizontal">

            <TextView
                android:layout_width="100dp"
                android:layout_height="wrap_content"
                android:text="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras sed velit sed nisl pharetra consequat"/>
            <TextView
                android:layout_width="100dp"
                android:layout_height="wrap_content"
                android:text="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras sed velit sed nisl pharetra consequat"/>
            <TextView ... (same text view repeated several times) />

        </LinearLayout>

    </HorizontalScrollView>

</RelativeLayout> 
```

当我在模拟器上进行测试时，水平投掷效果很好。但是在三星 Galaxy S2 上进行测试，fling 的行为很奇怪：

当手指*向侧*向上移动时，滚动视图开始正常滚动，但在停止之前，它会弹回并向后移动，尽管它还**没有**到达终点。就像滚动视图在任何滚动级别弹跳一样。

如果我只是滚动（将手指移动*到侧面停止和向上*），滚动就可以了。

有没有人经历过这个？三星实施中是否有任何错误？

有想法该怎么解决这个吗？

我的应用程序针对的是 android 2.2。Galaxy S2 拥有三星官方安卓 4.0.3。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:14:36.070

经过大量测试后，我得出结论，这是三星固件（Galaxy S2 4.0.3）上的一个错误，位于 Horizo​​ntalScrollView 上。

似乎正在向相反的方向做出甩动手势：例如，如果我按下并向左移动，然后松开屏幕，则甩动效果（继续移动并减速）完成到... 正确的！

所以我的解决方案是继承Horizo​​ntalScrollView，并添加一个补丁以确保如果向右滚动，则向右移动，反之亦然。

```
public class PatchedHorizontalScrollView extends HorizontalScrollView {
    public PatchedHorizontalScrollView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }
    public PatchedHorizontalScrollView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }
    public PatchedHorizontalScrollView(Context context) {
        super(context);
    }

    // store most recent scroll X positions
    int olderScrollX = 0;
    int lastScrollX = 0;

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        // keep track of most recent scroll positions
        olderScrollX = lastScrollX;
        lastScrollX = getScrollX();

        return super.onTouchEvent(ev);
    }

    @Override
    public void fling(int velocityX) {
        // ensure velocityX has the right sign
        if (lastScrollX > olderScrollX) {
            // to the right: velocity must be positive
            if (velocityX < 0) {
                velocityX = -velocityX;
            }
        } else if (lastScrollX < olderScrollX) {
            // to the left: velocity must be negative
            if (velocityX > 0) {
                velocityX = -velocityX;
            }
        }

        super.fling(velocityX);
    }
} 
```

# optimization - 在加载时处理数据

> ID：13634763
> 
> 赞同：0
> 
> 时间：2012-11-29T21:08:37.130
> 
> 标签：optimization

我们有一个从某些光学媒体加载数据的工具，一旦将其全部复制到硬盘驱动器，它就会通过第三方工具运行以进行处理。我想优化这个过程，以便在读入每个文件时对其进行处理。问题是，第三方工具（我自然无法更改）有 12 秒的启动开销。在尽快完成整个过程方面，我能处理这个问题的最佳方法是什么？我可以在每次运行中将任意数量的文件传递给处理工具，因此我需要能够准确地确定何时运行该工具以获得最快的整体结果。被复制的数据可以是从一个大文件（在完全复制之前无法处理）到数百个小文件的任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:45:47.790

最简单的方法是创建并运行 2 个线程，一个用于运行工具，一个用于加载数据。启动 12 秒计时器并触发两个线程。在每个文件加载完成时检查经过的时间。如果 12 秒过去了，则将数据提取到运行该工具的线程中。重新开始加载数据以并行处理先前的批量。一旦先前的批量处理完成，重新启动 12 秒计时器并在每次文件加载完成时继续检查它。重复直到没有更多数据。

为了获得更好的结果，可能需要更复杂的解决方案。您可以进行一些基准测试来评估平均数据加载时间。由于小文件和大文件可能不同，因此可能需要对不同类别的文件（根据大小）进行多次评估。最佳资源利用将以新数据到达的相同速率处理数据。处理时间包括 12 秒的启动时间。基准测试应该为您提供处理线程数与读取线程数的比率（您还可以根据传入的文件大小减少/增加活动读取线程的数量）。实际上，这是多个生产者和消费者的[生产者消费者问题的变体。](http://en.wikipedia.org/wiki/Producer-consumer_problem)

# c# - 有状态对象的方法中的参数是否添加了责任？

> ID：13634764
> 
> 赞同：0
> 
> 时间：2012-11-29T21:08:37.090
> 
> 标签：c#, design-patterns, solid-principles

我有一个负责发送电子邮件的对象，所以我创建了一个`EmailSender`，然后告诉它`SendEmail`，传入一些`EmailDetails`：

```
string diagnostics;    

EmailSender sender = new EmailSender();
try
{
    sender.SendEmail(details);
    //sender.SendEmail(details, out diagnostics);
}
catch(Exception e)
{
    logger.log(sender.CurrentError);
}

diagnostics = sender.Diagnostics; 
```

如果我向 中添加一个 out 参数`SendEmail`，这是否会增加 SOLID 设计原则方面的业务责任，因为我现在说：“您必须尝试发送电子邮件，并且您还负责初始化和填充诊断数据”

也许责任不是正确的词，但是一种模式比另一种更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:04:49.823

您没有违反单一职责原则 - SRP 并不意味着对象不应该知道如何与其合作者交谈。这是其合同的一部分，这是一种自然的责任。如果`EmailSender`不负责报告有关邮件传递的诊断，谁会负责？

您唯一需要确保的是`Diagnostics`保持在与`EmailSender`. `EmailSender`不依赖于它的消费者，消费者依赖于`EmailSender`，所以`EmailSender`不应该采用消费者的形式主义，而是将自己的语义强加于他们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T21:17:21.280

您没有违反任何 SOLID 原则，而是违反了所谓的[Samurai 原则](http://c2.com/cgi/wiki?SamuraiPrinciple)：

> 每个操作都应该完成他们的合同并返回一个有效的结果，或者抛出一个异常。

如果您想提供一些有关失败的附加诊断信息，而不是添加自定义异常。如果您与客户之间的合同中包含某些内容，则可以通过输出参数返回此信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T21:28:34.233

查看您的代码示例，我想知道 AOP 设计是否合适。您可以使用 Policy Injection 来包装对您的 EmailSender（和其他组件）的调用。

您使用 Policy Injection 注入调用的包装器可以负责捕获和记录抛出的异常，因此此代码调用`SendEmail`不必执行此操作。

包装器还可以负责监控时间、写入跟踪信息等。我只是在推测，但也许这类信息与您使用`Diagnostics`属性的目的一致。

这样，调用者不必负责处理/记录异常，也不必负责处理诊断信息。此外，EmailSender 不必负责监控自己的性能或通过`Diagnostics`属性公开该信息。

此外，该`CurrentError`属性似乎很奇怪。`CurrentError`您已经在捕获异常，因此捕获包含属性具有的任何信息的特定类型的异常似乎更合适。

# java - Java中垃圾收集的合格变量

> ID：13634766
> 
> 赞同：6
> 
> 时间：2012-11-29T21:08:50.643
> 
> 标签：java, garbage-collection, ocpjp

我正在准备[OCPJP](https://en.wikipedia.org/wiki/Oracle_Certification_Program)，但遇到了以下模拟考试问题：

鉴于：

```
3\. interface Animal { void makeNoise(); }

4\. class Horse implements Animal {
5\.     Long weight = 1200L;
6\.     public void makeNoise() { System.out.println("whinny"); }
7\. }

8\. public class Icelandic extends Horse {
9\.     public void makeNoise() { System.out.println("vinny"); }

10\.    public static void main(String[] args) {
11\.        Icelandic i1 = new Icelandic();
12\.        Icelandic i2 = new Icelandic();
12\.        Icelandic i3 = new Icelandic();
13\.        i3 = i1; i1 = i2; i2 = null; i3 = i1;
14\.    }
15\. } 
```

当到达第 14 行时，有多少对象符合垃圾收集器的条件？

A. 0

B. 1

C. 2

D. 3

E. 4

F. 6

他们的正确答案是 E，即四个物体，但我不知道为什么。从我的角度来看，i2 及其权重将有资格进行垃圾收集。也许我错过了一些东西，请指教。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T21:13:52.050

让我们`Icelandic()`在第 11`IceA`行、第 12行等上调用`IceB`。

创建后

```
i1 = IceA
i2 = IceB
i3 = IceC 
```

后`i3 = i1`

```
i1 = IceA
i2 = IceB
i3 = IceA 
```

后`i1 = i2`

```
i1 = IceB
i2 = IceB
i3 = IceA 
```

后`i2 = null`

```
i1 = IceB
i2 = null
i3 = IceA 
```

后`i3 = i1`

```
i1 = IceB
i2 = null
i3 = IceB 
```

所以只剩`Icelandic()`下第 12 行创建的。现在，每个`Icelandic()`都有一个`Long weight`, so`IceA`并且`IceC`现在没有被引用，这意味着 4 个对象 ( `IceA`, `IceA.weight`, `IceC`, `IceC.weight`) 可用于 GC。

* * *

## 其他问题：

1.  `args`仍然是`args`，他们没有计算超出这个问题的范围
2.  `Long weight`不是静态声明的，所以类的每个实例都有一个`weight`对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T21:23:35.637

我们将创建的第一个冰岛对象称为“A”，第二个称为“B”，第三个称为“C”。在第 12 行之后，它们分别被 i1、i2 和 i3 引用。

现在，我们这样做：

```
i3 = i1; // object "C" is no longer referenced, object "A" is now referenced by i1 and i3
i1 = i2; // object "A" is just referenced by i3, object "B" is referenced by i1 and i2
i2 = null; // object "B" is just referenced by i1 now
i3 = i1; // object "B" is referenced by i1 and i3, object "A" is no longer referenced 
```

因此，对象“A”和“C”不再被引用，它们连同它们的“权重”都符合垃圾回收的条件，所以总共有四个对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T21:22:04.530

您将在系统中有 4 个对象、3 个`Icelandic`实例和 1 个`Long`实例。

当您将常量对象分配给某个变量时，编译器使用一种由所有实例`private static final Long long1200 = Long.valueOf(1200L);`共享的对象。`weight`

原始类型包装器是不可变的，因此进行这种优化是安全的。

编辑：可能我错了，因为如果我们在这里多次引用相同的常量，这将起作用，但事实并非如此

# javascript - 如何使用 Javascript 在 HTML 文档中放置随机元素？

> ID：13634768
> 
> 赞同：-1
> 
> 时间：2012-11-29T21:08:52.560
> 
> 标签：javascript, html, appendchild

我正在开发一个 Javascript 游戏，我必须在 HTML 文档中放置随机硬币。到目前为止，我已经使用了这段代码：

```
 createCoin() {
    section=document.createElement("div");
    section.innerHTML='<img src="./img/coin.png"/>';
    document.body.appendChild(section);
 } 
```

此代码只是将一个图像硬币放置在文档的坐标 (0,0) 中。我想要做的是访问最近创建的“div”并给它一个我在另一个函数中生成的随机坐标，所以如果我多次调用 createCoin，它会在文档中创建几个硬币。我不能使用 jQuery。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:30:28.180

after create div element with id='coin' , to give the random position to div, use this:

```
<div id="coin" style="position:absolute">coin image</div>

<script language="javascript" type="text/javascript">
function newPos(){
    var x=Math.random()*1000;
    x=Math.round(x);
    var y=Math.random()*500;
    y=Math.round(y);
    document.getElementById("coin").style.left=x+'px';
    document.getElementById("coin").style.top=y+'px';
}
newPos();
</script> 
```

we consider that createCoin() function execute once, on the onload() event. and then the newPos() function must be run.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T21:11:07.533

已`createCoin`返回 div 然后使用它。

```
createCoin() {
    section=document.createElement("div");
    section.innerHTML='<img src="./img/coin.png"/>';
    document.body.appendChild(section);

    section.style.position = 'absolute';
    section.style.left = '0px'; // units ('px')  are unnecessary for 0 but added for clarification
    section.style.top = '0px';

    return section;
 } 
```

例如：`var coin = createCoin(); coin.style.left = ???; coin.style.top = ???;`

# javascript - navigator.notification.alert 单元测试javascript

> ID：13634774
> 
> 赞同：0
> 
> 时间：2012-11-29T21:09:05.947
> 
> 标签：javascript, notifications, qunit

这是我的代码...

```
navigator = {
    notification: function(text, function() {}, title, buttonName){
        alert("Cleared!");
    }
}; 
```

我在功能上遇到错误。我也尝试过空引号和空引号。似乎没有一个工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T22:04:54.270

```
navigator = {
    notification: function(text, title, buttonName){
        alert("Cleared!");
    }
}; 
```

上面的代码应该会更好。在您的函数定义中，您必须在左括号和右括号之间列出变量名称。在您的代码示例中，您改用了函数文字。

我还建议使用开发人员工具栏，例如 Chrome 开发人员工具来帮助您调试 JavaScript。

好运，

# jquery - mvc4 捆绑和缩小 - 使用标准缩小的 jquery 库

> ID：13634777
> 
> 赞同：1
> 
> 时间：2012-11-29T21:09:16.073
> 
> 标签：jquery, .net, asp.net-mvc-4, cdn, bundling-and-minification

我了解使用 mvc4 捆绑和缩小背后的原理，但我想将基本的预缩小库用于 jquery 和其他大型常见库等项目。

因此，在我的生产版本中，而不是像这样引用一个包：

```
bundles/jquerymobile?v=N1H63GRw6_-3057BORWSW60RX5rLWde08XZf8PiKQaE1 
```

我更喜欢使用标准的 jquery min 版本，如下所示：

```
jquery-1.8.2.min.js 
```

然后我的下一步将是允许用 CDN 托管的库替换这些标准化库，例如谷歌和其他大型 CDN 提供的库。

所以：这个问题的两个部分：

-我如何指示捆绑器直接包含预先缩小的文件，与其他人不捆绑？

-如何创建指向此文件的 CDN 托管版本的链接，而不是引用本地文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:18:59.350

### 我更喜欢使用标准的 jquery min 版本，如下所示：jquery-1.8.2.min.js

为什么？如果您将它与您的其余脚本捆绑在一起，它仍然会被缩小，并且它会减少一个 HTTP 请求。如果将此脚本与其他脚本捆绑在一起，则没有功能差异。捆绑它只是减少了 HTTP 请求（这可能比缩小更重要）。

### 我如何指示捆绑器直接包含预先缩小的文件，与其他人不捆绑？

你没有，你像往常一样在页面上包含脚本。如果您只想将捆绑器用于缩小脚本的目的，请仅使用该脚本创建一个单独的捆绑包。

### 如何创建指向此文件的 CDN 托管版本的链接，而不是引用本地文件？

```
public static void RegisterBundles(BundleCollection bundles)
{
    //bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
    //            "~/Scripts/jquery-{version}.js"));

    bundles.UseCdn = true;   //enable CDN support

    //add link to jquery on the CDN
    var jqueryCdnPath = "http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.1.min.js";

    bundles.Add(new ScriptBundle("~/bundles/jquery",
                jqueryCdnPath).Include(
                "~/Scripts/jquery-{version}.js"));

    // Code removed for clarity.
} 
```

# visual-studio - 异步功能单元测试中的 Assert.ThrowsException？

> ID：13634779
> 
> 赞同：6
> 
> 时间：2012-11-29T21:09:20.063
> 
> 标签：visual-studio, unit-testing, assert

我尝试制作一个测试方法来测试一些简单的数据下载。我做了一个测试用例，其中下载应该失败并出现 HttpRequestException。在测试它的非异步版本时，测试效果很好并且通过了，但是在测试它的异步版本时，它失败了。

在异步/等待方法的情况下使用 Assert.ThrowsException 有什么技巧？

```
[TestMethod]
    public void FooAsync_Test()
    {
        Assert.ThrowsException<System.Net.Http.HttpRequestException>
(async () => await _dataFetcher.GetDataAsync());
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T02:57:11.917

AFAICT，微软只是忘记包含它。它当然应该在 IMO 那里（如果您同意，请[对 UserVoice 投票](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3401331-add-an-async-compatible-assert-throwsexception)）。

同时，您可以使用以下方法。它来自[我的 AsyncEx 库](http://nitoasyncex.codeplex.com/)`AsyncAssert`中的类。我计划在不久的将来作为 NuGet 库发布，但现在你可以把它放在你的测试类中：`AsyncAssert`

```
public static async Task ThrowsAsync<TException>(Func<Task> action, bool allowDerivedTypes = true)
{
    try
    {
        await action();
        Assert.Fail("Delegate did not throw expected exception " + typeof(TException).Name + ".");
    }
    catch (Exception ex)
    {
        if (allowDerivedTypes && !(ex is TException))
            Assert.Fail("Delegate threw exception of type " + ex.GetType().Name + ", but " + typeof(TException).Name + " or a derived type was expected.");
        if (!allowDerivedTypes && ex.GetType() != typeof(TException))
            Assert.Fail("Delegate threw exception of type " + ex.GetType().Name + ", but " + typeof(TException).Name + " was expected.");
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-07-03T15:18:28.860

**上下文：**根据您的描述，您的测试失败。

**解决方案：**解决此问题的另一种选择（@quango 也提到）是：

```
[TestMethod]
public void FooAsync_Test() {
    await Assert.ThrowsExceptionAsync<HttpRequestException>
    (async () => await _dataFetcher.GetDataAsync());
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2020-11-23T08:01:38.253

以下对我来说很好：

```
Assert.ThrowsException<Exception>(() => class.AsyncMethod(args).GetAwaiter().GetResult()); 
```

# php - 在PHP中的一次调用中附加/连接多个字符串？

> ID：13634784
> 
> 赞同：4
> 
> 时间：2012-11-29T21:09:46.383
> 
> 标签：php, shortcuts

我知道您可以在一次调用中分配多个变量，如下所示：

```
$varOne = $varTwo = "some value"; 
```

但是有没有办法在一次调用中附加到多个变量（字符串）？

显然这是不正确的语法，但我在想这样的事情：

```
$varOne = "he's ";
$varTwo = "she's ";
$varOne, $varTwo .= "insane";

echo $varOne; // Outputs "he's insane"
echo $varTwo; // Outputs "she's insane" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:17:02.177

除了创建自己的函数并调用它之外，没有办法在 php 中像这样连接“一次调用”。附加运算符仅对一个变量起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T21:16:27.653

不可能，不是真的。充其量，您可以像这样使用[可变变量](http://php.net/manual/en/language.variables.variable.php)：

```
 foreach (array('varOne', 'varTwo') as $var) {
     $$var .= 'insane';
 } 
```

变量变量是一个令人头疼的维护问题，而维护头疼是指每次使用该构造时都会杀死一只小猫，所以要小心。

# python - 是否有一个内置的 twisted 用于将延迟的结果分支到另一个不影响初始延迟结果的延迟链？

> ID：13634785
> 
> 赞同：3
> 
> 时间：2012-11-29T21:09:54.857
> 
> 标签：python, api, twisted, deferred

我有一个延迟触发结果。我想将此结果提供给使用它的几个函数。执行此操作的简单方法是将回调添加到 deferred。但是，如果其中一个函数碰巧没有返回相同的结果，那么稍后添加的函数将得到不同的结果，这是我不想要的。为了解决这个问题，我必须执行以下操作：

```
def branchDeferred(d):
    #return a deferred which returns d's results without affecting them
    branchD = defer.Deferred()
    def success(result):
        branchD.callback(result)
        return result
    def failure(fail):
        branchD.errback(fail)
        return fail
    d.addCallbacks(success, failure)
    return branchD 
```

观察区别：

```
>>> resultD = defer.Deferred()
>>> resultD.addCallback(printCallback)
<Deferred at 0x2a3bcb0>
>>> resultD.addCallback(printCallback)
<Deferred at 0x2a3bcb0>
>>> resultD.callback("lovely")
Result: lovely
Result: None 
```

与：

```
>>> resultD = defer.Deferred()
>>> branchDeferred(resultD).addCallback(printCallback)
<Deferred at 0x2a2ada0>
>>> branchDeferred(resultD).addCallback(printCallback)
<Deferred at 0x2b658a0>
>>> resultD.callback("lovely")
Result: lovely
Result: lovely 
```

有没有更好的方法来使用内置的扭曲成语来做到这一点，即我对延迟有什么不明白的地方吗？或者这是唯一的方法吗？

如果您想知道，这是因为我使用的是使用`defer.inlineCallbacks`产生的延迟而不是传播它的结果。

编辑：这段代码演示了我在说什么：

```
>>> class Baz:
        def __init__(self):
            self.resultD = defer.Deferred()

        @defer.inlineCallbacks
        def fooMe(self, name):
            result = yield self.resultD
            print "fooMe(%s) got: %s" % (name, result,)
            defer.returnValue(result)

>>> b = Baz()
>>> d1 = b.fooMe("one")
>>> d2 = b.fooMe("two")
>>> b.resultD.callback("SHINIES")
fooMe(one) got: SHINIES
fooMe(two) got: None 
```

中的这段代码`_inlineCallbacks()`是`twisted/internet/defer.py`罪魁祸首：

```
 def gotResult(r):
            if waiting[0]:
                waiting[0] = False
                waiting[1] = r
            else:
                _inlineCallbacks(r, g, deferred)

        result.addBoth(gotResult) 
```

`gotResult`最后没有`return r`。由于我不想修补扭曲的安装以使其正常工作，因此我想知道是否有更清洁的方法来解决此问题。

# android - 未从广播接收器调用新活动

> ID：13634787
> 
> 赞同：0
> 
> 时间：2012-11-29T21:10:12.767
> 
> 标签：android, dialog, android-fragments, broadcastreceiver

新的对话框框架类没有被调用是这样的..？？它烤消息以及异常中的烤面包

```
public class AlarmReceiver extends BroadcastReceiver {

 @Override
 public void onReceive(Context context, Intent intent) {
   try {
     Bundle bundle = intent.getExtras();
     String message = bundle.getString("alarm_message");
     Toast.makeText(context, message, Toast.LENGTH_SHORT).show();
     Intent newIntent = new Intent(context, FireMissilesDialogFragment.class);
    newIntent.putExtra("alarm_message", message);
     newIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
  //   Toast.makeText(context, "1"+message, Toast.LENGTH_SHORT).show();

     context.startActivity(newIntent);
   //  Toast.makeText(context, "2"+message, Toast.LENGTH_SHORT).show();

    } catch (Exception e) {
     Toast.makeText(context, "There was an error somewhere, but we still received an alarm", Toast.LENGTH_SHORT).show();
     e.printStackTrace();

    }
 }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:20:28.087

您不能通过意图启动片段 - 您需要启动活动

# c# - S/MIME 封装消息 C#

> ID：13634788
> 
> 赞同：1
> 
> 时间：2012-11-29T21:10:15.620
> 
> 标签：c#, cryptography, bouncycastle, smime

我是 BouncyCastle Crypto 和密码学的新手。我下载了代码并希望使用 C# 创建 S/MIME 加密的信封消息。我在网上搜索，发现有很多使用 Java 的示例，但没有看到任何使用 C# 的示例。您能否让我知道是否有任何文档或示例的链接？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T07:33:00.677

不幸的是，C# 版本没有实现 S/MIME，尽管它实现了许多底层 CMS 格式。至少在大多数是从 Java 移植过来的时候，原因是没有任何与 .NET 的 JavaMail API 等效的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-31T20:41:30.033

只是为了更新这一点，但我已经开始与 Peter Dettman 和 BouncyCastle .NET 项目合作，现在情况发生了变化。

我编写了一个名为[MimeKit](https://github.com/jstedfast/MimeKit)的开源 (MIT) 库，它是一个完整的 MIME 解析器（和生成器）库，它使用 BouncyCastle 来支持 S/MIME 和 PGP。

它完全支持所有 S/MIME v3.2 功能，包括`application/pkcs7-mime; smime-type=compressed-data`其他任何库都不支持的功能。

对于 S/MIME 数字签名，发送`application/pkcs7-mime; smime-type=signed-data`和`multipart/signed`接收都支持 和 。

我还在 MimeKit 之上构建了一个名为[MailKit](https://github.com/jstedfast/MailKit)的开源 (MIT) 库，它实现了 SMTP、POP3 和 IMAP 支持。

# php - 将文件和图像上传到android中的php服务器

> ID：13634793
> 
> 赞同：0
> 
> 时间：2012-11-29T21:10:42.463
> 
> 标签：php, android, file-upload

我在 java 中使用以下代码通过网络在 php 服务器中上传图像。

```
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;

import android.util.Log;

public class UploadFiles {

    public void upload(String selectedPath) throws IOException {
        HttpURLConnection conn = null;
        DataOutputStream dos = null;
        DataInputStream inStream = null;
        String lineEnd = "\r\n";
        String twoHyphens = "--";
        String boundary = "AaB03x87yxdkjnxvi7";
        int bytesRead, bytesAvailable, bufferSize;
        byte[] buffer;
        int maxBufferSize = 1 * 1024 * 1024;
        String urlString = "http://android.1mohammadi.ir/nightly/upload_files.php";
        try {
            // ------------------ CLIENT REQUEST
            FileInputStream fileInputStream = new FileInputStream(new File(
                    selectedPath));
            // open a URL connection to the Servlet
            URL url = new URL(urlString);
            // Open a HTTP connection to the URL
            conn = (HttpURLConnection) url.openConnection();
            // Allow Inputs
            conn.setDoInput(true);
            // Allow Outputs
            conn.setDoOutput(true);
            // Don't use a cached copy.
            conn.setUseCaches(false);
            // Use a post method.
            conn.setRequestMethod("POST");
            conn.setRequestProperty("Connection", "Keep-Alive");
            conn.setRequestProperty("ENCTYPE", "multipart/form-data");
            conn.setRequestProperty("Content-Type",
                    "multipart/form-data;boundary=" + boundary);
            conn.setRequestProperty("uploaded_file", selectedPath);
            dos = new DataOutputStream(conn.getOutputStream());

            dos.writeBytes(twoHyphens + boundary + lineEnd);
            dos.writeBytes("Content-Disposition: form-data; name=\"uploaded_file\";filename=\""
                    + selectedPath + "\"" + lineEnd);
            dos.writeBytes(lineEnd);
            dos.writeBytes(lineEnd);
            // create a buffer of maximum size
            bytesAvailable = fileInputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            buffer = new byte[bufferSize];
            // read file and <span id="IL_AD4" class="IL_AD">write</span> it
            // into form...
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            while (bytesRead > 0) {
                dos.write(buffer, 0, bufferSize);
                bytesAvailable = fileInputStream.available();
                bufferSize = Math.min(bytesAvailable, maxBufferSize);
                bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            }
            // send multipart form data necesssary after file data...
            dos.writeBytes(lineEnd);
            dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
            // close <span id="IL_AD3" class="IL_AD">streams</span>
            Log.e("Debug", "File is written");
            fileInputStream.close();
            dos.flush();
            dos.close();
        } catch (MalformedURLException ex) {
            Log.e("Debug", "error: " + ex.getMessage(), ex);
        } catch (IOException ioe) {
            Log.e("Debug", "error: " + ioe.getMessage(), ioe);
        }
        // ------------------ read the SERVER RESPONSE
        try {
            inStream = new DataInputStream(conn.getInputStream());
            String str;

            while ((str = inStream.readLine()) != null) {
                Log.e("Debug", "Server Response " + str);
            }
            inStream.close();

        } catch (IOException ioex) {
            Log.e("Debug", "error: " + ioex.getMessage(), ioex);
        }
    }
} 
```

在 php 服务器中使用这个：

```
<?php
// Where the file is going to be placed
$target_path = "/uploads/";

/* Add the original filename to our target path.
Result is "uploads/filename.<span id="IL_AD5" class="IL_AD">extension</span>" */
$target_path = $target_path . basename($_FILES['uploadedfile']['name']);

error_log("Upload File >>" . $target_path . "\r\n", 3, "Log.log");

if (move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    echo "The file " . basename($_FILES['uploadedfile']['name']) .
        " has been uploaded";
} else {
    echo "There was an error uploading the file, please try again!";
    echo "filename: " . basename($_FILES['uploadedfile']['name']);
    echo "target_path: " . $target_path;
}
?> 
```

在android代码中不会发生任何错误，在php代码中也是如此。当文件上传无法移动文件时。我该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-15T05:35:47.397

我在服务器中使用此代码：

```
<?php
$target_path = "./uploads/";
$target_path = $target_path . basename($_FILES['uploadedfile']['name']);

error_log("Upload File >>" . $target_path . $_FILES['error'] . " \r\n", 3,
    "Log.log");

error_log("Upload File >>" . basename($_FILES['uploadedfile']['name']) . " \r\n",
    3, "Log.log");

if (move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    echo "The file " . basename($_FILES['uploadedfile']['name']) .
        " has been uploaded";
} else {
    echo "There was an error uploading the file, please try again!";
}
?> 
```

并在 android 中使用此代码：

```
package ir.mohammadi.android.nightly.tools;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.net.HttpURLConnection;
import java.net.URL;

public class UploadFiles {

    public void upload(String selectedPath) throws IOException {

        HttpURLConnection connection = null;
        DataOutputStream outputStream = null;
        DataInputStream inputStream = null;

        String pathToOurFile = selectedPath;
        String urlServer = "http://android.1mohammadi.ir/nightly/upload_files.php";
        String lineEnd = "\r\n";
        String twoHyphens = "--";
        String boundary = "*****";

        int bytesRead, bytesAvailable, bufferSize;
        byte[] buffer;
        int maxBufferSize = 1 * 1024 * 1024;

        try {
            FileInputStream fileInputStream = new FileInputStream(new File(
                    pathToOurFile));

            URL url = new URL(urlServer);
            connection = (HttpURLConnection) url.openConnection();

            connection.setDoInput(true);
            connection.setDoOutput(true);
            connection.setUseCaches(false);

            connection.setRequestMethod("POST");

            connection.setRequestProperty("Connection", "Keep-Alive");
            connection.setRequestProperty("Content-Type",
                    "multipart/form-data;boundary=" + boundary);

            outputStream = new DataOutputStream(connection.getOutputStream());
            outputStream.writeBytes(twoHyphens + boundary + lineEnd);
            outputStream
                    .writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\""
                            + pathToOurFile + "\"" + lineEnd);
            outputStream.writeBytes(lineEnd);

            bytesAvailable = fileInputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            buffer = new byte[bufferSize];

            bytesRead = fileInputStream.read(buffer, 0, bufferSize);

            while (bytesRead > 0) {
                outputStream.write(buffer, 0, bufferSize);
                bytesAvailable = fileInputStream.available();
                bufferSize = Math.min(bytesAvailable, maxBufferSize);
                bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            }

            outputStream.writeBytes(lineEnd);
            outputStream.writeBytes(twoHyphens + boundary + twoHyphens
                    + lineEnd);

            int serverResponseCode = connection.getResponseCode();
            String serverResponseMessage = connection.getResponseMessage();

            fileInputStream.close();
            outputStream.flush();
            outputStream.close();
        } catch (Exception ex) {
        }
    }
} 
```

欲了解更多信息，请访问此[链接](http://1mohammadi.ir/androidos/upload-file-in-php-server-by-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T21:21:57.420

这可能是写入上传目录的问题。确保该`/uploads/`目录存在并且可以被 Web 服务器写入。

您还可以[使用 curl](https://www.google.com.au/search?q=curl+post+file)来测试您的服务器代码。一旦成功，您就可以继续让客户工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T18:16:17.103

1mohammadi.ir 回答得很好。我只是想在他的代码上添加一些东西。

要调用上传功能，您需要在另一个线程（不是主线程）中调用。通过这样做，请点击此链接。[如何修复 android.os.NetworkOnMainThreadException？](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-14T18:56:57.757

```
private void postFile() {
    try {

        // Url to upload file to. Mine points to my folder in xampp
        String postReceiverUrl = "http://ipv4_address/webinterface/UploadToServer.php";
        Log.v("Some message", "postURL: " + postReceiverUrl);

        // new HttpClient
        HttpClient httpClient = new DefaultHttpClient();

        // post header
        HttpPost httpPost = new HttpPost(postReceiverUrl);

        // Gets the image from my drawable folder and compresses it
        Bitmap bm = BitmapFactory.decodeResource(getResources(),
                R.drawable.goku);
        File file = new File(getExternalCacheDir().toString(), "goku.jpg");
        FileOutputStream outStream = new FileOutputStream(file);
        bm.compress(Bitmap.CompressFormat.JPEG, 100, outStream);
        outStream.flush();
        outStream.close();

        // Uri.fromFile(file);

        // File file = new
        // File(Environment.getExternalStorageDirectory(),"goku.jpg");
        // file.getAbsolutePath();
        FileBody fileBody = new FileBody(file);

        MultipartEntity reqEntity = new MultipartEntity(
                HttpMultipartMode.BROWSER_COMPATIBLE);
        reqEntity.addPart("file", fileBody);
        httpPost.setEntity(reqEntity);

        // execute HTTP post request
        HttpResponse response = httpClient.execute(httpPost);
        HttpEntity resEntity = response.getEntity();

        if (resEntity != null) {

            String responseStr = EntityUtils.toString(resEntity).trim();
            Log.v("Some message", "Response: " + responseStr);
        }

    } catch (NullPointerException e) {
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

# mysql - 如何创建命名数据库主机

> ID：13634796
> 
> 赞同：0
> 
> 时间：2012-11-29T21:11:10.500
> 
> 标签：mysql, replication, host, createuser

我正在尝试`mysql` `replication`在网络上的两个系统上设置多主机。两个独立的数据库服务器在 运行`mysql`，`localhost`我如何为它们创建一个`replication`用户，`hosts`因为它们共享相同的名称。

我可以这样做，但这似乎不是正确的做法。

```
CREATE USER 'repl_user1'@'localhost' IDENTIFIED BY 'password1';  // Server1
CREATE USER 'repl_user2'@'localhost' IDENTIFIED BY 'password2';  // Server2 
```

我认为这样的事情应该做

```
CREATE USER 'repl_user1'@'server1.com' IDENTIFIED BY 'password1';  // Server1
CREATE USER 'repl_user2'@'server2.com' IDENTIFIED BY 'password2';  // Server2 
```

但我不知道如何给主机起名字。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:55:36.630

您可以使用 IP，例如：

```
CREATE USER 'repl_user1'@'192.168.1.101' IDENTIFIED BY 'password1';  // Server1
CREATE USER 'repl_user2'@'192.168.1.102' IDENTIFIED BY 'password2';  // Server2 
```

如果您真的想使用主机名（并且您还没有使用 DNS 为您的服务器设置一些），只需将它们添加到您的主机文件并引用它们。前任。：

/etc/hosts (server1)

```
127.0.0.1         localhost server1.local
192.168.1.101     server1.local
192.168.1.102     server2.local 
```

/etc/hosts (server2)

```
127.0.0.1         localhost server2.local
192.168.1.101     server1.local
192.168.1.102     server2.local 
```

然后设置用户：

```
CREATE USER 'repl_user1'@'server1.local' IDENTIFIED BY 'password1';  // Server1
CREATE USER 'repl_user2'@'server2.local' IDENTIFIED BY 'password2';  // Server2 
```

这应该可以工作，因此两台服务器都从自己的主机和另一台主机接收连接，并将其映射到正确的用户。

# python - 将静态图片上传到应用引擎

> ID：13634800
> 
> 赞同：1
> 
> 时间：2012-11-29T21:11:35.277
> 
> 标签：python, google-app-engine

我在将静态文件上传到我的应用引擎站点时遇到问题。我已经尝试了 yaml 文件中的所有各种选项组合，但没有成功。更奇怪的是，当我上传所有图像时，它们似乎都存在了几分钟然后消失了。我什至可以从日志中看到他们暂时在那里。在本地一切正常。

YAML 如下：

```
application: socialsamplrsite
version: 1
runtime: python27
api_version: 1
threadsafe: false

libraries:
- name: django
  version: "1.3"

builtins:
- django_wsgi: on

handlers:

- url: /img
  static_dir: img

- url: /css/bootstrap.min.css
  static_files: css/bootstrap.min.css
  upload: css/bootstrap.min.css

- url: /js
  static_dir: js

- url: .*
  script: django_bootstrap.py 
```

提前感谢您的任何帮助。

这是图像确实存在时的日志条目：

```
2012-11-30 01:07:34.199 /img/Social-Sampler-Master-Logo-for-web.png 200 24ms 43kb Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.91 Safari/537.11
203.79.108.219 - - [29/Nov/2012:04:07:34 -0800] "GET /img/Social-Sampler-Master-Logo-for-web.png HTTP/1.1" 200 43692 "http://socialsamplrsite.appspot.com/" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.91 Safari/537.11" "socialsamplrsite.appspot.com" ms=24 cpu_ms=0 
```

然后不久之后：

```
2012-11-30 01:08:51.822 /img/Social-Sampler-Master-Logo-for-web.png 404 146ms 0kb Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.91 Safari/537.11
203.79.108.219 - - [29/Nov/2012:04:08:51 -0800] "GET /img/Social-Sampler-Master-Logo-for-web.png HTTP/1.1" 404 0 - "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.91 Safari/537.11" "socialsamplrsite.appspot.com" ms=147 cpu_ms=0 
```

W 2012-11-30 01:08:51.820 找不到处理程序引用的静态文件：/img/Social-Sampler-Master-Logo-for-web.png

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T06:54:39.640

检查 HTML 文件。Web 应用程序中的命名约定或 jinja2 模板代码通常会导致此类错误。祝你好运！

# ruby - 每次在linux的目录中创建新文件时运行一个进程

> ID：13634805
> 
> 赞同：0
> 
> 时间：2012-11-29T21:11:48.637
> 
> 标签：ruby, linux, inotify

我正在开发一个应用程序。我使用的操作系统是linux。如果可能，我需要在目录中创建的文件上运行 ruby​​ 脚本。我需要让这个脚本始终运行。我首先想到的是inotify：

> inotify API 提供了一种监控文件系统事件的机制。Inotify 可用于监视单个文件或监视目录。

这正是我所需要的，然后我找到了“rb-inotify”，一个包装器 fir inotify。

你认为有比使用 inotify 更好的方法来做我需要的事情吗？另外，我真的不明白我必须使用 rb-inotify 的方式。

例如，我只是创建了一个 rb 文件，其中包含：

```
notifier = INotify::Notifier.new
notifier.watch("directory/to/check",:create) do |event|
    #do task with event.name file
end

notifier.run 
```

然后我只是`ruby myRBNotifier.rb`，它将永远保持循环。我该如何阻止它？任何的想法？这是一个好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T05:19:30.347

我建议看[上帝](http://godrb.com)。它是为此类任务而设计的，并且可以很容易地为后台和守护程序应用程序构建监控系统。

至于主要代码本身，inotify 不是跨平台的，所以如果您有可能需要在 Windows 或 Mac OS 上运行，那么您将需要一个不同的解决方案。编写一小段代码来定期检查目标目录是否有更改并不难。如果您需要知道发生了什么变化，请读取并缓存目录条目，然后在下次运行代码时进行比较。在运行之间使用`sleep`以在循环之前等待一段时间。

做类似事情的老派方法是使用 cron 定期启动工作。该作业可以是您的脚本，通过将文件列表与缓存版本进行比较来检查文件列表是否发生更改，然后在出现不同时根据需要执行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T23:25:07.820

只需在后台运行您的脚本

```
ruby myRBNotifier.rb & 
```

当您需要停止它时，找到进程 ID 并对其使用 kill ：

```
ps ux
kill [whatever pid your process gets from the OS] 
```

这是否回答你的问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T15:26:44.633

如果您在 mac/unix 机器上运行，请查看`launchctl` [手册页](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/launchctl.1.html)。您可以设置一个进程以在文件更改时运行和执行 ruby​​ 脚本。它是高度可配置的。

# sql - 访问 ODBC 不导入参照完整性

> ID：13634806
> 
> 赞同：0
> 
> 时间：2012-11-29T21:11:51.767
> 
> 标签：sql, sql-server, ms-access, odbc, referential-integrity

我使用 ODBC 表从 SQL 服务器导入，但这些表失去了所有 PK 和 FK 完整性。当我在访问中设计视图时不再需要我的 PK？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:30:37.507

Importing your table schema + data won't fully transfer your database.

Remember that `Indexes`, `FK Constraints`, `Stored Procedures` and so on are independent objects such as `Tables`. These objects' definitions should be translated between the two databases when you are willing to do such migration.

# java - 为什么我不能在 main 方法中调用私有变量？

> ID：13634808
> 
> 赞同：1
> 
> 时间：2012-11-29T21:11:53.590
> 
> 标签：java, variables, object, main

此代码应该在输入对话框中接收全名字符串示例“Billy Bob Smith”，并在消息对话框中将首字母作为字母组合示例“BBS”​​输出。但由于某种原因，主要方法不会让我访问 fullName 变量。

```
import javax.swing.*;

public class HardMonogram {
     //---------- ATTRIBUTES ----------//
     private String fullName;
     private String monogram;
     private String first;
     private String middle;
     private String last;

     //---------- METHODS ----------//
     public String getInitial(String seperateName) {
           return seperateName.substring(0, 1);
     }

     public void getSeperateName(String fullName) {
           first  = fullName.substring(0, fullName.indexOf(" "));
           middle = fullName.substring(fullName.indexOf(" ") + 1, fullName.length());
           last   = middle.substring(middle.indexOf(" ") + 1, middle.length());
           middle = middle.substring(0, middle.indexOf(" "));
     }

    public void setMonogram() {
          monogram = getInitial(first)  +
                     getInitial(middle) +
                     getInitial(last);

    JOptionPane.showMessageDialog(null, monogram);
    }

    public static void main(String[] args) {
           myMono.fullName = JOptionPane.showInputDialog(null, "Type in you full name");

           HardMonogram myMono = new HardMonogram();
           myMono.getSeperateName(myMono.fullName);
           myMono.setMonogram();

    }

} 
```

给了我这个构建错误

```
/Users/aaron/School/Fall 2012/CSCI-C 201/Labs/LB08/HardMonogram.java:33: error: cannot find symbol
    myMono.fullName = JOptionPane.showInputDialog(null, "Type in you full name");
    ^
symbol:   variable myMono
location: class HardMonogram
1 error
[Finished in 1.2s with exit code 1] 
```

这是我对 java 类的介绍，但我不知道为什么我不能访问该变量。我显然忽略了一些东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T21:12:41.937

更新：

再次阅读问题后，您只需要在创建实例后移动 main 方法中的第一行。

```
 HardMonogram myMono = new HardMonogram();
       myMono.fullName = JOptionPane.showInputDialog(null, "Type in you full name");
       myMono.getSeperateName(myMono.fullName);
       myMono.setMonogram(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T21:16:47.417

简单地放在`myMono.fullName = JOptionPane.showInputDialog(null, "Type in you full name");`对象声明（`HardMonogram myMono = new HardMonogram();`）之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T21:18:38.023

MyMono 尚未在您的 main 方法的第一行中声明。将其添加到开头。

```
public static void main(String[] args) {
      HardMonogram myMono = new HardMonogram();
      myMono.fullName = JOptionPane.showInputDialog(null, "Type in you full name");
      myMono.getSeperateName(myMono.fullName);
      myMono.setMonogram();

} 
```

# python - 如何为管理站点设置不同的 LANGUAGE_CODE？

> ID：13634809
> 
> 赞同：0
> 
> 时间：2012-11-29T21:11:54.350
> 
> 标签：python, django

我怎么能在我的 settings.py 中这么说：

```
if *IN ADMIN*
    LANGUAGE_CODE = 'en-us'
else
    LANGUAGE_CODE = 'fr-ca' 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:16:54.713

在此链接上，您可以找到解决方案 - 中间件类：http: [//source.mihelac.org/2009/11/12/django-set-language-for-admin/](http://source.mihelac.org/2009/11/12/django-set-language-for-admin/)

# javascript - JavaScript：四舍五入到最接近的值

> ID：13634813
> 
> 赞同：5
> 
> 时间：2012-11-29T21:12:06.703
> 
> 标签：javascript, math

假设我有一个在已知最小值和最大值之间有 10 个值的刻度。如何在最小值和最大值之间获得最接近的值。例子：

```
min = 0, max = 10, value = 2.75 -> expected: value = 3
min = 5, max = 6, value = 5.12 -> expected: value = 5.1
min = 0, max = 1, value = 0.06 -> expected: value = 0.1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T21:54:10.907

你可以使用这样的东西

```
function nearest(value, min, max, steps) {
  var zerone = Math.round((value - min) * steps / (max - min)) / steps; // bring to 0-1 range    
  zerone = Math.min(Math.max(zerone, 0), 1) // keep in range in case value is off limits
  return zerone * (max - min) + min;
}

console.log(nearest(2.75, 0, 10, 10)); // 3
console.log(nearest(5.12, 5, 6, 10)); // 5.1
console.log(nearest(0.06, 0, 1, 10)); // 0.1
```

演示在[http://jsfiddle.net/gaby/4RN37/1/](http://jsfiddle.net/gaby/4RN37/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T21:15:22.580

你的场景对我来说没有多大意义。为什么 .06 舍入到 1 而不是 .1 而是 5.12 舍入到 5.1 具有相同的比例（1 个整数）？这很令人困惑。

无论哪种方式，如果您想四舍五入到精确的小数位数，请查看： [http ://www.javascriptkit.com/javatutors/round.shtml](http://www.javascriptkit.com/javatutors/round.shtml)

```
var original=28.453

1) //round "original" to two decimals
var result=Math.round(original*100)/100  //returns 28.45

2) // round "original" to 1 decimal
var result=Math.round(original*10)/10  //returns 28.5

3) //round 8.111111 to 3 decimals
var result=Math.round(8.111111*1000)/1000  //returns 8.111 
```

通过本教程，您应该能够完全按照您的意愿行事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T21:20:20.203

也许更容易理解：

```
var numberOfSteps = 10;
var step = (max - min) / numberOfSteps;
var difference = start - min;
var stepsToDifference = Math.round(difference / step);
var answer = min + step * stepsToDifference; 
```

这也允许您更改序列中的步数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T21:21:22.233

我建议这样的事情：

```
var step = (max - min) / 10;
return Math.round(value / step) * step; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-12T19:19:40.503

例如，我遇到了问题，`5.7999997`而不是断奶`5.8`。这是我的第一个修复（对于 java ......）。

```
public static float nearest(float val, float min, float max, int steps) {
    float step = (max - min) / steps;
    float diff = val - min;
    float steps_to_diff = round(diff / step);
    float answer = min + step * steps_to_diff;
    answer = ((int) (answer * steps)) / (float) steps;
    return answer;
} 
```

但是，使用它`nearest(6.5098, 0, 10, 1000)`我会得到`6.509`而不是想要的`6.51`. 这为我解决了这个问题（当值非常大时请注意溢出）：

```
public static float nearest(float val, float min, float max, int steps) {
    val *= steps;
    min *= steps;
    max *= steps;
    float step = (max - min) / steps;
    float diff = val - min;
    float steps_to_diff = round(diff / step);
    float answer = min + step * steps_to_diff;
    return answer / (float) steps;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-04-17T09:22:36.037

```
var step = 10;
return Math.ceil(x / step) * step; 
```

# awk - 使用 awk 将列转置为行

> ID：13634816
> 
> 赞同：5
> 
> 时间：2012-11-29T21:12:22.990
> 
> 标签：awk

我有一个输入数据文件：

```
anim   gent
FZ543     1
FZ543     2
FZ543     3
FZ543     1
FZ547     4
FZ547     3
FZ547     3
FZ547     1 
```

我想将这些数据转换为：-

```
anim     gent
FZ543     1 2 3 1
FZ547     4 3 3 1 
```

换句话说，我想将元素从垂直转置到水平。我可以使用 AWK 命令

感谢您的关注。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T21:15:51.877

```
awk 'NR==1{print} NR>1{a[$1]=a[$1]" "$2}END{for (i in a){print i " " a[i]}}' file 
```

**输出**

```
anim   gent
FZ543  1 2 3 1
FZ547  4 3 3 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T21:29:37.697

```
$ awk '$1 != prev{printf "%s%s",ors,$1; ors=ORS; ofs="\t"} {printf "%s%s",ofs,$2; ofs=OFS; prev=$1} END{print ""}' file
anim    gent
FZ543   1 2 3 1
FZ547   4 3 3 1 
```

# ruby - 提取具有“foo：XXXX”的单行字符串

> ID：13634817
> 
> 赞同：0
> 
> 时间：2012-11-29T21:12:37.227
> 
> 标签：ruby

我有一个包含一个或多个 key:value 行的文件，如果 key=foo，我想拉出一个 key:value。我怎样才能做到这一点？

我可以做到这一点：

```
if File.exist?('/file_name')
  content = open('/file_name').grep(/foo:??/) 
```

我不确定 grep 部分，而且一旦我得到内容，如何提取值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T05:02:17.210

人们喜欢将文件放入内存中，如果文件总是很小，这是一个合理的解决方案。但是，slurping 是不可扩展的，并且这种做法会导致 CPU 和 I/O 在读取内容时等待过多。

相反，因为您可能在一个文件中有多个匹配项，并且您正在逐行比较内容，所以逐行读取它。线路 I/O 非常快并且避免了可扩展性问题。红宝石[`File.foreach`](http://www.ruby-doc.org/core-1.9.3/IO.html#method-c-foreach)是要走的路：

```
File.foreach('path/to/file') do |li|
  puts $1 if li[/foo:\s*(\w+)/]
end 
```

因为没有实际的键/值对样本，我们在黑暗中寻找有效的正则表达式模式，但这是我解决问题的基础。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T21:28:38.397

尝试这个：

```
IO.readlines('key_values.txt').find_all{|line| line.match('key1')} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T21:26:24.467

我建议将文件读入数组并仅选择您需要的行：

```
regex = /\A\s?key\s?:/
results = File.readlines('file').inject([]) do |f,l|
  l =~ regex ? f << "key = %s" % l.sub(regex, '') : f
end 
```

这将检测以开头的行`key:`并将它们添加到结果中，例如`key = value`，后面的部分在
哪里`value``key:`

所以如果你有这样的文件：

```
key:1
foo
key:2
bar
key:3 
```

你会得到这样的结果：

```
key = 1
key = 2
key = 3 
```

说得通？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T22:44:49.427

```
File.read('file_name')[/foo: (.*)/, 1]
#=> XXXX 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T21:49:53.187

```
value = File.open('/file_name').read.match("key:(.*)").captures[0] rescue nil 
```

# c# - EntitySet System.InvalidOperationException - “实体类型不是当前上下文模型的一部分”

> ID：13634819
> 
> 赞同：6
> 
> 时间：2012-11-29T21:12:41.633
> 
> 标签：c#, entity-framework, dbcontext, ef-model-first, csdl

### 类似问题

[实体类型 <classname> 不是当前上下文模型的一部分](https://stackoverflow.com/questions/4983108/the-entity-type-classname-is-not-part-of-the-model-for-the-current-context)- 和 - [EF 4.1 Code First 错误 - 实体类型 SomeType 不是当前上下文模型的一部分](https://stackoverflow.com/questions/5634392/ef-4-1-code-first-error-the-entity-type-sometype-is-not-part-of-the-model-for)是类似的问题，但它们是“代码优先”的观点仅使用更简单的数据模型，并解决连接字符串和映射问题。请仔细看看这个。

### 症状

```
// HomeController.cs
public ActionResult Index()
{
    var _db = new MealsContext();

    var m = _db.Meals.ToList();
    var d = _db.Drinks.ToList();

    return View();
} 
```

`Drinks`检索集合时引发异常：

```
The entity type Drink is not part of the model for the current context. 
```

### 代码

```
// Meal.cs
public class Meal
{
    public int Id { get; set; }
    public string Stuff { get; set; }
    public virtual ICollection<Meat> Meats { get; set; }
    public virtual ICollection<Vegetable> Vegetables { get; set; }
}

// Meat.cs
public class Meat
{
    public int Id { get; set; }
    public string Name { get; set; }
    public int MealId { get; set; }
}

// Vegetable.cs
public class Vegetable 
{
    public int Id { get; set; }
    public string Name { get; set; }
    public int MealId { get; set; }
}

// Drink.cs
public class Drink
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

*是的，我知道在现实世界中，肉类和蔬菜与膳食之间的关系可能是多对多的，但不要在这里纠结。*

```
// MealsContext.cs
public class MealsContext: DbContext
{               
    public MealsContext() : base("ConnectionString")

    public DbSet<Meal> Meals{ get; set; }
    public DbSet<Meat> Meats{ get; set; }
    public DbSet<Vegetable> Vegetables { get; set; }
    public DbSet<Drink> Drinks{ get; set; }
} 
```

我的经验是使用 Model First 方法。EDMX 文件是在 POCO 之后构建的。

连接字符串中是映射到已解析 EDMX 资源 ( `metadata=res://*/Models.MealsModels.csdl|res://*/Models.MealsModels.ssdl|res://*/Models.MealsModels.msl;`) 的元数据部分。

我检查了 EDMX 文件的底层 XML，显示了概念模型和存储模型中存在的所有实体，并且所有实体都已完全映射。怎么回事？

### 故障排除

第一次尝试是完全摆脱存储和映射 EDMX 数据（`SSDL`和`MSL`部分）。开火，现在有两个例外：

1.  检索`Meals`投掷`MSL, error 2062 No mapping specified for instance of the EntitySet and AssociationSet in the EntityContainer`。

2.  检索`Drinks`继续抛出`The entity type Drinkis not part of the model for the current context`。

引发的错误`Meals`是意料之中的，我对映射和存储模型进行了核对 - 检查`_db`表明`Meals`-> `InternalSet`->`EntitySet`属性是正确的，只是没有映射。

引发的错误`Drinks`是我卡住的地方。仔细检查`_db`我发现`Drinks`-> `InternalSet`->`EntitySet`抛出`SystemInvalidOperation`异常，指出实体不在模型上下文中。

以下是 EDMX 的 CSDL 在 XML 格式中的样子：

```
<edmx:ConceptualModels>
  <Schema ...>
    <EntityContainer Name="MealsContext" annotation:LazyLoadingEnabled="true">
      <EntitySet Name="Meals" EntityType="Models.Meal" />
      <EntitySet Name="Meats" EntityType="Models.Meat" />
      <EntitySet Name="Vegetables" EntityType="Models.Vegetable" />
      <EntitySet Name="Drinks" EntityType="Models.Drink" />
      <!-- AssociationSets here for the FKs -->
    </EntityContainer>
    <!-- All are present, but here's the culprit Drink -->
    <EntityType Name="Drink">
      <Key>
        <PropertyRef Name="Id" />
      </Key>
      <Property Type="Int32" Name="Id" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
      <Property Type="String" Name="Name" Nullable="false" MaxLength="200" FixedLength="false" Unicode="true" />
    </EntityType>
    <!-- Associations here -->
  </Schema>
</edmx:ConceptualModels> 
```

## 问题

如果`DbContext`具有所有`DbSet`属性并且正在使用一个连接字符串，其中包含一个模型的元数据，该模型的 CSDL 正确定义了实体类型`Drink`，***为什么它不是上下文的一部分？***

我能看到的唯一不同`Drink`的是它与任何其他实体都没有关系，也没有关联......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T20:14:53.697

解决了。

上半场是我的疏忽。下半场……好吧，我不知道出了什么问题。这并不是真正的错误或不兼容，而是非常不方便、断断续续且难以弄清楚的事情。首先是一个摘要，然后是对那些关心的人的长度解释：

### 尽管有错误消息建议，但这不是概念模型 (CSDL) 的问题，而是间歇性地重新创建自身的列映射问题。

概念模型是使用 来构建的，`EdmxWriter`以解析`DbContext`其及其基础部分。

然后使用该模型生成 SQL 脚本以将模式推送到新数据库。诀窍是，数据库是Oracle。

Oracle 是个婴儿，不接受长列名。因此，必须修改生成的 EDMX 和 SQL 脚本，以构建概念模型的一部分并将其映射到截断的列名。

没什么大不了的。它工作正常。那么事情哪里出错了呢？

Oracle 不支持“代码优先”。即使它是手动完成的，`EdmxWriter`在 Oracle 眼中，使用 构成代码优先的方法。因此，当解析第一个 EDMX 模式时，它对布尔映射感到不满。解决方案是暂时从我的 C# 模型中删除布尔值，手动将它们添加到 EDMX 并制作 Oracle 建议的 web.config 映射（映射`bool`到`NUMBER(1,0)`）。

一切又变得时髦起来。但是为什么会不断重复呢？

**在整个开发过程中的不同时间，协议的某些末端（C#、EDMX 或 Oracle）会发生变化。每次，似乎这些列都会自动重新映射，而我却不知道。如果从 Oracle 刷新 EDMX 模型，则映射指向不存在的 C# 属性（短列名称）。如果模型是从 C# 代码刷新的，则不会保留映射，它们会尝试映射到 Oracle 中没有的长列名。**

这种方法（*混合代码优先和模型优先*）的遗憾是，如果我想继续管理我自己的模型并处理 Oracle 小宝贝态度所必需的定制，我必须非常小心并监控 EDMX 文件的地狱.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T22:40:23.383

您需要为您的实体指定映射：

```
public class MealsContext: DbContext
{               
    public MealsContext() : base("ConnectionString")

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        // mappings 
    }    

    public DbSet<Meal> Meals{ get; set; }
    public DbSet<Meat> Meats{ get; set; }
    public DbSet<Vegetable> Vegetables { get; set; }
    public DbSet<Drink> Drinks{ get; set; }
} 
```

在我开始使用[Entity Framework Power Tools之前，我遇到了同样的问题](https://www.google.by/search?q=entity%20framework%20power%20tools&aq=f&oq=entity%20fram&sugexp=chrome,mod=6&sourceid=chrome&ie=UTF-8)

使用它，您可以生成清晰的实体，如业务对象和映射类。帮助我创建惊人的数据访问层的好文章：[逆向工程师代码优先](http://romiller.com/2012/05/09/customizing-reverse-engineer-code-first-in-the-ef-power-tools/)

# vim - 用 vim 格式化文本

> ID：13634820
> 
> 赞同：1
> 
> 时间：2012-11-29T21:12:50.237
> 
> 标签：vim, formatting

我有一个包含 275 行代码的文件。这些行是 ceg 中的常量声明

```
 71 #define LM_HOST_ALLOWED             3100 //Boolean. 
```

我的问题是它有很多重复的行，因为我通过从其他文件复制和粘贴创建了该文件，并且这些行不是 100%

例如

```
 71 #define LM_HOST_ALLOWED             3100 //Boolean.
      72 #define LM_HOST_ALLOWED               3100 //Boolean. 
```

vim 中有没有办法找到这些行并只保留其中一个。或者有没有办法格式化所有行以使数字（在我们的例子中为 3100）因子处于某个水平？例如6个标签或什么？我开始手动操作，但进入和离开编辑模式很痛苦。请帮忙！如果这个问题没有意义，请帮助我改进它。

**编辑：** 我找到了一个关于格式化文本的解决方案：在 vim 的正常模式下我输入：

`qa0f f 50i <esc>38|dwjq274@a` 它完成了这项工作。我真的很高兴我发现了这个（也在这个论坛中），现在的问题是该`uniq`命令没有做我正在阅读它应该做的事情。在 vim 中我输入 :!uniq 但并非所有重复的行都被删除。我认为这可能是因为某些地方的制表符而不是空格。有什么相关信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:38:05.763

您可以使用[tabular.vim](http://www.vim.org/scripts/script.php?script_id=3464)来排列数字，使用如下内容：

```
:Tabularize / [0-9]\{4\}/l2c1 
```

这将以这种方式将所有数字与 4 位数字（`3100`在本例中）对齐：

```
71 #define LM_HOST_ALLOWED  3100 //Boolean.
72 #define LM_HOST_ALLOWED  3100 //Boolean. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:11:45.167

如果保持顺序不重要，可以使用

```
:%sort u 
```

对内容进行排序并仅保留每行的一个实例。*（假设您首先使用Align*或*Tabularize*规范了行格式。）

* * *

如果您需要维护订单，我的[SearchPosition 插件](http://www.vim.org/scripts/script.php?script_id=2634)可能会很方便。通过其`Alt`+`M`映射，它显示缓冲区中当前单词的出现次数。您可以遍历每一行以检查重复项。

* * *

如果您经常这样做（并且无法解决问题的根本原因，即重复项的条目），您可以编写一个自定义命令，用`getline()`and解析所有行`split()`，然后跳转到它找到的第一个重复行；它可能只是几行 Vimscript。

# python - 如何让 python 服务器将 recvline 转换为字符串？

> ID：13634821
> 
> 赞同：1
> 
> 时间：2012-11-29T21:12:49.713
> 
> 标签：python, c, string, client

如何将来自客户端的输入从服务器转换为字符串或其他数据类型。我的服务器可以从客户端打印 recvline 但不将其识别为常见数据类型...

```
void timing()
{
   for (long i = 0; i < 200000000; i ++){
      printf("");
   }
}

int main(int argc, char **argv){
  int   i;
  int sockfd;
  struct sockaddr_in    servaddr;
  char sendline[MAXLINE];
  char recvline[MAXLINE];

  time_t start, finish, final;
  start = clock();
  timing(); // a function that takes a differential time based on the client
  finish = clock();
  final = (finish - start) /  CLOCKS_PER_SEC;
  printf("timing: %ld\n", final);

  if (argc != 2){
      perror("usage: tcpcli <IPaddress>");
      exit(-1);
  }

  sockfd = socket(AF_INET, SOCK_STREAM, 0);

  bzero(&servaddr, sizeof(servaddr));
  servaddr.sin_family = AF_INET;
  servaddr.sin_port = htons(SERV_PORT);
  inet_pton(AF_INET, argv[1], &servaddr.sin_addr);

  connect(sockfd, (struct sockaddr *) &servaddr, sizeof(servaddr));

  char ** temp = NULL;
  char * timing = NULL;
  strtol(timing, temp, final); //***Problem here
  write(sockfd, timing, 5);
  bzero(recvline, MAXLINE);
  if (read(sockfd, recvline, MAXLINE) == 0){ //reads from server
          perror("Server terminated!");
          exit(-1);
      }

  fputs(recvline, stdout); 
```

# vim - 在状态行中显示函数名称

> ID：13634826
> 
> 赞同：40
> 
> 时间：2012-11-29T21:13:24.003
> 
> 标签：vim

我编辑了一个大的 C、C++ 或 Java 文件，比如大约 15000 行，其中包含相当长的函数定义，比如大约 400 行。当光标位于函数定义的中间时，在 Vim 状态行中看到函数名会很酷。

当我们`:set ls=2`在 Vim 中设置时，我们可以获得文件路径（相对于当前目录）、行号等。如果我们也能看到函数名，那就太好了。任何想法如何得到它？

目前我`[[`用来开始函数并`Ctrl`-`O`回到我正在编辑的行。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-04-24T04:23:40.317

**要在C 程序** 中显示当前函数名，[请在 vimrc 中添加以下内容：](http://vim.wikia.com/wiki/Show_current_function_name_in_C_programs)

```
fun! ShowFuncName()
  let lnum = line(".")
  let col = col(".")
  echohl ModeMsg
  echo getline(search("^[^ \t#/]\\{2}.*[^:]\s*$", 'bW'))
  echohl None
  call search("\\%" . lnum . "l" . "\\%" . col . "c")
endfun
map f :call ShowFuncName() <CR> 
```

或者，如果您需要“f”键，只需将功能映射到您喜欢的任何内容。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-29T22:28:03.400

您可以为此使用[ctags.vim](http://www.vim.org/scripts/script.php?script_id=610)，它会在标题或状态栏中显示当前函数名称。

来源：[https ://superuser.com/questions/279651/how-can-i-make-vim-show-the-current-class-and-method-im-editing](https://superuser.com/questions/279651/how-can-i-make-vim-show-the-current-class-and-method-im-editing)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-01-19T16:40:50.180

基于@manav mn 的回答

'n' 标志`search()`不会移动光标，因此具有相同功能的较短版本将是：

```
fun! ShowFuncName()
  echohl ModeMsg
  echo getline(search("^[^ \t#/]\\{2}.*[^:]\s*$", 'bWn'))
  echohl None
endfun
map f :call ShowFuncName() <CR> 
```

参考：运行`:help search()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T08:17:20.657

有几个用于状态行或按需映射的插件，例如：

*   [http://www.vim.org/scripts/script.php?script_id=1094](http://www.vim.org/scripts/script.php?script_id=1094)
*   [http://www.vim.org/scripts/script.php?script_id=2805](http://www.vim.org/scripts/script.php?script_id=2805)
*   [http://www.vim.org/scripts/script.php?script_id=1553](http://www.vim.org/scripts/script.php?script_id=1553)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-11T18:06:34.880

我的解决方案如下：

```
set stl=%f%h%m%r\ %{Options()}%=%l,%c-%v\ %{line('$')}
fu! PlusOpt(opt)
  let option = a:opt
  if option
    return "+"
  else
    return "-"
  endif
endf

fu! Options()
  let opt="ic".PlusOpt(&ic)
  let opt=opt." ".&ff
  let opt=opt." ".&ft
  if &ft==?"cpp" || &ft==?"perl"
    let text = " {" . FindCurrentFunction() . "}"
    let opt= opt.text
  endif
  return opt

fu! FindCurrentFunction()
  let text =''

  let save_cursor = getpos(".")

  let opening_brace = searchpair('{','','}','bWr', '', '', 100)
  if opening_brace > 0
    let oldmagic = &magic
    let &magic = 1

    let operators='operator\s*\%((\s*)\|\[]\|[+*/%^&|~!=<>-]=\?\|[<>&|+-]\{2}\|>>=\|<<=\|->\*\|,\|->\|(\s*)\)\s*'
    let class_func_string = '\(\([[:alpha:]_]\w*\)\s*::\s*\)*\s*\%(\~\2\|'.operators
    let class_func_string = class_func_string . '\|[[:alpha:]_]\w*\)\ze\s*('

    let searchstring = '\_^\S.\{-}\%('.operators
    let searchstring = searchstring.'\|[[:alpha:]_]\w*\)\s*(.*\n\%(\_^\s.*\n\)*\_^{'

    let l = search(searchstring, 'bW', line(".")-20 )

    if l != 0
      let line_text = getline(l)
      let matched_text = matchstr(line_text, class_func_string)
      let matched_text = substitute(matched_text, '\s', '', 'g')
      let text = matched_text
    endif

    call setpos('.', save_cursor)

    let &magic = oldmagic
  endif

  return text
endfunction 
```

我实际上是在尝试匹配 C/C++/Java 允许的函数名称。这通常对我有用（包括重载运算符），但假设开头 { 本身位于一行的第 0 列。

我今天刚刚注意到，如果包含在命名空间 {} 中，它会失败，即使按预期格式化也是如此。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-12T10:33:23.643

我为此使用[https://github.com/mgedmin/chelper.vim 。](https://github.com/mgedmin/chelper.vim)它不需要标签文件，而是动态解析源代码。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-06-02T00:14:30.947

在研究了这个和公认的解决方案后，我相信最简单的解决方案是：

1.  安装通用 Ctags [https://ctags.io/](https://ctags.io/)

2.  安装标签栏[https://github.com/preservim/tagbar](https://github.com/preservim/tagbar)

3.  在设置状态行时调用`tagbar#currenttag()`，例如在 .vimrc 中：

    `:set statusline=%<%f\ %h%m%r%=%{tagbar#currenttag('%s\ ','','f')}%-.(%l,%c%V%)\ %P`

注意：

*   空格必须在您传递给的字符串中进行斜杠转义`currenttag()`......而且在 vim 中运行命令和将其放入 .vimrc 之间甚至有所不同？无论如何，空格可能很奇怪，并且它们可能是您在输出函数名称时想要的东西。

*   我花了一些时间进行挖掘，但默认状态行是

    `:set statusline=%<%f\ %h%m%r%=%-14.(%l,%c%V%)\ %P`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-29T14:37:38.320

基于@solidak 解决方案（已经基于另一个解决方案：）

我想始终在终端底部显示函数名称。但是我遇到了一些非常大的功能问题，我通过这种方式解决了：

```
fun! ShowFuncName()
  echohl ModeMsg
  echo getline(search("^[^ \t#/]\\{2}.*[^:]\s*$", 'bWn'))[:winwidth('%')-3]
  echohl None
endfun

augroup show_funcname
  autocmd CursorMoved * :call ShowFuncName()
augroup end 
```

# phpstorm - php Storm 自定义文档块

> ID：13634827
> 
> 赞同：0
> 
> 时间：2012-11-29T21:13:26.873
> 
> 标签：phpstorm, docblocks

有没有办法自定义 phpstorm 生成 docblocks 的方式？

默认情况下，我希望将未知类型的变量视为字符串。

这是生成docblock的默认方式（使用phpstorm 4.01）

```
/**
 * @param $name
 */
private function test($name){

} 
```

如果可能的话，我想要这个：

```
/**
 * @param string $name
 */
private function test($name){

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T21:43:24.917

**不**，您不能为生成的@param 提供默认类型。

只要可以从函数声明中检测到，PhpStorm 就会提供正确的类型。在您的示例中，这是不可能的（可以是任何东西）。

而且我*个人*看不出它需要*默认*为字符串（或任何其他类型）的真正原因。Unknown/missing type 告诉我我需要完成编辑这个 PHPDoc 块，以便它反映实际/正确的参数类型。已经输入了默认类型，这样的检查是不可能的（如果类型应该是某个类（例如 Person）或数组呢？）

**PS** 有点相关（至少与实际主题相关）：

*这是可编辑 PHPDoc 模板*的功能请求票（可以定义应使用的 @tags 和顺序）：http: [//youtrack.jetbrains.com/issue/WI-11111](http://youtrack.jetbrains.com/issue/WI-11111)

# c++ - c ++在FindWindow中将字符串转换为LPCWSTR

> ID：13634829
> 
> 赞同：0
> 
> 时间：2012-11-29T21:13:32.420
> 
> 标签：c++, string, winapi

我正在尝试从 txt 文件中读取窗口标题

我将使用 GetTitleWidnow 使用字符串获取窗口标题

我试过了，但它没有在应用程序中显示菜单

```
 ostringstream GetTitleWidnow;
    GetTitleWidnow << "MainSvrt on port 51752";
    LPCWSTR LMainSvrtTitle;
std::string SMainSvrtTitle = GetTitleWidnow.str();
LMainSvrtTitle = (LPCWSTR)SMainSvrtTitle.c_str();

HWND hWnd = FindWindow(NULL,LMainSvrtTitle);
HMENU hCurrent = GetMenu(hWnd);
HMENU hNew = CreateMenu();
AppendMenu(hCurrent, MF_STRING | MF_POPUP, (unsigned int)hNew, TEXT("Menu"));
AppendMenu(hNew, MF_STRING, MYMENU_Reload, TEXT("Reload Config"));
AppendMenu(hNew, MF_STRING, MYMENU_Credits, TEXT("Credits"));
DrawMenuBar(hWnd); 
```

但是当我尝试

```
 HWND hWnd = FindWindow(NULL,TEXT("MainSvrt on port 51752")); 
```

我让它工作正常，它在应用程序中显示菜单

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:18:15.373

您应该使用 Microsoft 的 CString 自动在宽字符和窄字符之间进行转换，或者使用该`MultiByteToWideChar`函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:25:21.000

如果你能用ATL，请试试CA2W，CW2A，好用。

# xamarin.android - Monodroid 屏幕尺寸

> ID：13634835
> 
> 赞同：2
> 
> 时间：2012-11-29T21:13:49.717
> 
> 标签：xamarin.android

我正在尝试引用 WindowManger，以便获得默认屏幕的尺寸，但似乎找不到对它的引用。（这是 API 8，froyo 2.2）。我什至尝试过：

```
dynamic wm = Android.App.Application.Context.GetSystemService(Android.Content.Context.WindowService);
Display display = wm.getDefaultDisplay(); 
```

但是得到一个错误，表明`Object`没有响应`getDefaultDisplay`。

我也试过：

```
var wm = (IWindowManager)Android.App.Application.Context.GetSystemService(Android.Content.Context.WindowService);
Display display = wm.DefaultDisplay; 
```

但我得到一个无效的演员表异常。

看到[了这个帖子](https://stackoverflow.com/questions/7204326/how-to-get-screen-dimensions-in-monoandroid)，解决不了`WindowManager`。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T21:58:01.263

`WindowManager`是[IWindowManager](http://androidapi.xamarin.com/?link=T%3aAndroid.Views.IWindowManager)接口。尝试使用[.JavaCast<T>()](http://androidapi.xamarin.com/?link=M%3aAndroid.Runtime.Extensions.JavaCast%3CTResult%3E)扩展方法，而不是强制转换：

```
var wm = context.GetSystemService(Android.Content.Context.WindowService)
    .JavaCast<IWindowManager>();
var d  = wm.DefaultDisplay; 
```

您还可以查看[AccelerometerPlay 示例](https://github.com/xamarin/monodroid-samples/blob/master/AccelerometerPlay/AccelerometerActivity.cs#L52)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T11:06:32.910

另一种更简单的方法是

显示显示 = this.WindowManager.DefaultDisplay;

您可以从显示对象中获取 Width 和 Height 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-15T20:12:42.107

```
using Android.Runtime; //for JavaCast

var windowManager = Android.App.Application.Context.GetSystemService(Android.Content.Context.WindowService).JavaCast<IWindowManager>(); 
```

# java - 将字段添加到枚举

> ID：13634838
> 
> 赞同：1
> 
> 时间：2012-11-29T21:13:53.557
> 
> 标签：java, testing, automated-tests, integration-testing

我必须为一个项目编写验收测试。在这个项目中有一个公共的最终枚举，其中包含另一个带有方法的枚举。我应该在运行时添加新值，但我不知道如何实现这个结果。我使用的语言是 Java。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:28:17.400

您不能在 java 中的 Enum 中动态创建条目。我建议使用地图来做这样的事情，但它不会是一个枚举。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T22:13:26.663

为什么不创建一个列表（例如 LinkedList 等）并使用枚举的 values() 方法将初始值（枚举的值）放入列表中。然后您可以在运行时将新值添加到列表中，例如：

要遍历枚举的值，只需使用 values(); 示例假定正确声明公共枚举月 {...}：

```
1\. for (Month month : Month.values()) {  
2\.  //do something  
3\. } 
```

这是一个 URL，其中包含有关使用带有枚举的 values() 的信息：

```
http://www.coderanch.com/t/410234/java/java/Iteration-Enum 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T21:33:58.020

让您的枚举实现一个接口，该接口声明 getter 方法以访问您要扩展的枚举上的字段。在客户端代码中，更改将枚举带到接口的所有方法。通过这种设计，您可以轻松地为您的测试添加新值。

# jquery - 如何在 jQueryMobile 中删除只读列表中的元素

> ID：13634840
> 
> 赞同：0
> 
> 时间：2012-11-29T21:13:56.530
> 
> 标签：jquery, jquery-mobile

我有一个关于 jquery mobile 的问题。我有一个包含一些元素的 readonlylistview。

现在我想添加一个功能，用户可以在列表中保存一个项目，然后例如编辑或。删除它。

我不需要知道如何从列表中删除一个项目我需要一个功能来实现保持操作，然后如何确定哪个项目被保持。

如果我不仅可以使用简单的点击/链接，那就太好了

# ruby - URI 响应代码

> ID：13634845
> 
> 赞同：8
> 
> 时间：2012-11-29T21:14:27.060
> 
> 标签：ruby, url, open-uri

我想使用 Ruby 的[OpenURI](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open-uri/rdoc/OpenURI.html)来检查 URL 是否可以正确访问。所以我想检查它的响应代码（4xx 或 5xx 表示错误等）是否有可能找到？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-29T21:31:20.820

You can use the [`status`](http://ruby-doc.org/stdlib-2.5.0/libdoc/open-uri/rdoc/OpenURI/Meta.html) method to return an array that contains the status code and message.

```
require "open-uri" 

open("http://www.example.org") do |f|
  puts f.base_uri  #=> http://www.example.org
  puts f.status    #=> ["200", "OK"]
end 
```

# database - 以低成本方式托管大型表并保持性能可扩展？

> ID：13634847
> 
> 赞同：1
> 
> 时间：2012-11-29T21:14:30.333
> 
> 标签：database, performance, postgresql, database-design, bigdata

我有一个不断增长的存储时间序列数据的表，现在有 5 亿个条目，每天有 20 万条新记录。目前总大小约为 15GB。

我的客户主要通过 PHP 脚本查询表，结果集的大小约为 10K 记录（不是很大）。

```
select * from T where timestamp > X and timestamp < Y and additionFilters 
```

我希望这个手术便宜。

目前我的表在 Postgres 7 中托管，在一个 16G 内存盒上，我很想看到一些好的建议让我以低成本托管它，并允许我在需要时扩展性能。该表服务：
1.查询：90%
2.插入：9.9%
2.更新：0.1% <--非常罕见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:41:37.207

PostgreSQL 9.2 支持分区和部分索引。如果有几个热分区，并且您可以将这些分区或其索引放在固态磁盘上，您应该能够围绕当前配置运行环。

可能有也可能没有低成本、可扩展的选项。这取决于*低成本*和*可扩展性*对您意味着什么。

# android - android vitamio player 获取曲目信息

> ID：13634849
> 
> 赞同：0
> 
> 时间：2012-11-29T21:14:30.593
> 
> 标签：android, streaming

我在我的 android 应用程序中使用了 vitamio 插件来播放广播流（在 rtmp、m3u8 和 rtsp 协议中）。现在我还想显示当前的播放信息，那么我怎样才能做到这一点呢？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:24:57.720

Vitamio 似乎不支持这一点。您只能找到有关该曲目的基本信息。此时您必须通过其他自定义对象来维护此信息。

# ios - MapView 注释在应用程序启动时未指向正确的位置

> ID：13634851
> 
> 赞同：0
> 
> 时间：2012-11-29T21:14:39.453
> 
> 标签：ios, ipad, location, mkmapview

我有一个在运行时创建的 mkmapview。首先我必须告诉我，我的实际问题是在 ipad 上，而不是在模拟器上。在视图确实加载我正在调用两个函数。fillValues 和 setDraggable 点。

```
CLLocationManager *locManager = [[CLLocationManager alloc]init];
[locManager startUpdatingLocation];

CLLocationCoordinate2D currCoordinates = locManager.location.coordinate;
NSLog(@"the latitude is %f",currCoordinates.latitude);
NSLog(@"the longitude is %f",currCoordinates.longitude);
[self fillLatitudeAndLongitudeTextFields:currCoordinates.latitude longitudeValue:currCoordinates.longitude];

[self setDraggablePinOnMap:currCoordinates]; 
```

ON SIMULATOR：记录坐标和填充文本字段并在地图上设置可拖动点。setDraggablePinOnMap 方法创建地图并设置红色注释。因此，当应用程序在模拟器上加载时，它会在我的位置周围显示蓝点，并在同一位置显示红色图钉（按预期工作）。我移动图钉并获取该位置的坐标并更新文本字段。

在设备 iPAD 上我第一次加载应用程序时，它会加载我当前的位置，并带有一个蓝点。但是红色注释没有显示在我当前的位置，而是显示在赤道地球中心的 0,0,0 和 0,0,0 处。它没有按预期进行。红色和蓝色都应该在同一点相交。有趣的一点是在这个屏幕的第二次加载（基本上我回到屏幕 A 并回到这个屏幕。让我们说地图作为屏幕 B 的屏幕）它加载了蓝色和红色点相交的地图。它不能只在第一次时做到这一点。就像它在第一次加载时无法确定位置，但之后可以做到。我怎样才能让它在第一次加载时显示？我有意义吗？如果您需要更多信息，请询问我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:53:15.227

第一次无法做到这一点，因为您没有等待位置管理器对您的位置进行适当的修复。您需要让您对位置管理器的[委托](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html)进行分类并等待`didUpdateLocations`回调。获得位置后，您可以使用它来设置红色图钉，然后阻止位置管理器向您发送更新，或者如果图钉已经放置，则忽略它们。

# windows-8 - Page.Frame.Navigate 覆盖旧页面

> ID：13634853
> 
> 赞同：0
> 
> 时间：2012-11-29T21:14:52.247
> 
> 标签：windows-8

当我调用 Page.Frame.Navigate 时，我是否可以导航到小于屏幕尺寸的页面并使其覆盖我刚刚以任何简单方式导航的页面？理想的解决方案不会涉及大型框架和重写大部分应用程序的需要。我正在寻找这种效果：[Windows 8 Music App](http://winsupersite.com/site-files/winsupersite.com/files/archive/winsupersite.com/content/content/143266/music_06.jpg)

我想我可以通过将导航页面的快照传递到新页面并将其用作背景来进行破解，但我更喜欢更清洁的解决方案。我想我也可以从新页面访问导航堆栈并呈现旧页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:35:24.670

正如 William Melani 所说，您可以使用 Popup 元素。这是一个例子：

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
  <Grid.RowDefinitions>
      <RowDefinition Height="1*"></RowDefinition>
      <RowDefinition Height="2*"></RowDefinition>
  </Grid.RowDefinitions>
  <Button x:Name="btnPopup" Content="Open Popup" Click="btnPopup_Click_1" Grid.Row="0"></Button>
  <Popup IsLightDismissEnabled="True" x:Name="popup1" Grid.Row="1" HorizontalAlignment="Center">
      <StackPanel Background="Black">
          <Border Background="Blue"  BorderThickness="2">
              <StackPanel>
                  <StackPanel Orientation="Vertical" Margin="10">
                      <TextBlock Text="User:" VerticalAlignment="Center" Margin="0,0,10,0" FontSize="20" />
                      <TextBox Height="40" Width="250" FontSize="20" />
                      <TextBlock Text="Mail:" VerticalAlignment="Center" Margin="0,0,10,0" FontSize="20" />
                      <TextBox Height="40" Width="250" FontSize="20" />
                  </StackPanel>
                  <Button HorizontalAlignment="Right"  Margin="10">Accept</Button>
              </StackPanel>
          </Border>
      </StackPanel>
  </Popup> 
```

和按钮事件：

```
private void btnPopup_Click_1(object sender, RoutedEventArgs e)
 {
     popup1.IsOpen = true;
 } 
```

设计真的不是我的事。

# python - 在python中的一行中替换和搜索十六进制

> ID：13634854
> 
> 赞同：0
> 
> 时间：2012-11-29T21:14:52.613
> 
> 标签：python, search, replace, hex

问题如下：
我正在做一个 file.read(100) 并得到如下行：

```
line='1\x01\x1e17=00000000\x1e54=80300A00\x1e50=1\x1e56=2008080106010414\x1c\x1e247=CD\x1e6=In\x1e5=Boot\x1e180=0.445\x1e179=0.380\x1e55=AAA\x1e57=2008080100000000\x1e212=5000\x1e213=20000\x1e115=500\x1d\x1e29=5T2lqZHNAwg=\x01\x1e17=00000000' 
```

我想要做的是在这一行中搜索十六进制数字并将它们转换为输出新操作的行。
所以基本上我想做：

```
t=re.findall(r'[\x80-\xff]', line) #Somehow get the positions    
for i in t: ord(i) #Something to this effect to replace all the hexadecimals it finds 
```

使用我为 t 提供的代码，我找不到行中的所有字符，更不用说它们的位置了。
我想知道是否有人对如何最好地解决这个问题有任何想法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:37:38.713

`\x`是一个转义的 x，这是一个无效的转义。您的问题不是正则表达式，而是您的编码-您`line`不是文字字符串。尝试`print`ing `line`，您应该看到以下内容：

```
117=0000000054=80300A0050=156=2008080106010414247=CD6=In5=Boot180=0.445179=0.38055=AAA57=2008080100000000212=5000213=20000115=50029=5T2lqZHNAwg=17=00000000 
```

很可能，这就是您所需要的。简而言之，十六进制值就像它们一样很好。

如果在此之后，您仍想获取十六进制值，则必须`r`在字符串的开头添加一个，如下所示：

```
line=r'1\x01\x1e17=00000000\x1e54=80300A00\x1e50=1\x1e56=2008080106010414\x1c\x1e247=CD\x1e6=In\x1e5=Boot\x1e180=0.445\x1e179=0.380\x1e55=AAA\x1e57=2008080100000000\x1e212=5000\x1e213=20000\x1e115=500\x1d\x1e29=5T2lqZHNAwg=\x01\x1e17=00000000' 
```

使其成为字符串文字。正则表达式应该像任何其他字符串一样处理文字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T21:20:41.157

您可以找到字符的所有索引`\x`（以及 [0] 和 [len(t) - 1]，然后遍历该列表并成对地切片，如`ord(t[i:i+1])`for i in len(t)

# android-ndk - Android：如何从 AsyncTask 调用调用 ndk 函数？

> ID：13634856
> 
> 赞同：2
> 
> 时间：2012-11-29T21:14:57.887
> 
> 标签：android-ndk, android-asynctask

我的 Android 项目中有很多 jni 调用，它们的工作原理很吸引人，但这个我无法正确处理：尝试从 Android 中的 AsyncTask 调用 jni 函数时，我收到以下错误消息：

```
11-30 10:07:20.130: W/dalvikvm(16555): No implementation found for native Lcom/company/MainView$MyAsyncTask;.MyFunction (Ljava/lang/String;)Z 
```

通常 jni 函数声明的工作方式如下：

```
JNIEXPORT jboolean JNICALL Java_com_company_MainView_myFunction()... 
```

从 AscnyTask 调用时我将如何声明它？我在谷歌上没有找到答案，我没有成功尝试过：

```
JNIEXPORT jboolean JNICALL Java_com_company_MainView$MyAsyncTask_myFunction() 
```

和

```
JNIEXPORT jboolean JNICALL Java_com_company_MainView_MyAsyncTask_myFunction() 
```

或者这根本不可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:02:48.660

一般来说，您可以运行`javah`工具来为您在 Java 代码中声明的本机方法生成 C/C++ 声明。在您的具体情况下，

```
javah -classpath bin/classes com/company/MainView$MyAsyncTask 
```

将产生以下标题：

```
JNIEXPPORT jboolean JNICALL Java_com_company_MainView_00024MyAsyncTask_MyFunction(JNIRnv *, jobject, jstring); 
```

关于线程问题，AsyncTask 可能每次都从不同的线程调用你的函数，但每次调用都会提供正确`env`的作为第一个参数，你不需要，`AttachCurrentThread()`因为你没有在本机代码中创建这个线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T21:26:06.470

这里真正的问题是如何在内部类中定义 JNI 函数，并在 C/C++ 代码中设置适当的声明。我不知道该怎么做，也无法在网上找到任何关于此的内容。相反，我会将功能移动到另一个类（不是内部类），然后从 AsyncTask 调用该函数。如果您的 AsyncTask 不是内部类，从技术上讲，您应该能够做到这一点。

# ruby-on-rails-3 - 导轨载波宝石错误

> ID：13634860
> 
> 赞同：0
> 
> 时间：2012-11-29T21:15:20.693
> 
> 标签：ruby-on-rails-3, carrierwave

我已经成功地使用 gem 设置了图像上传`carrierwave`。

但是当我尝试像这样添加一个可选的在线网址时：

```
 <%= form_for @rating, :html => {:multipart=>true} do |f| %>

    <div class="field">
       <%= f.file_field :pic_url %>
    </div>

    <div class="field">
      <%= f.label :remote_pic_url_url, 'or image url' %>
      <br/>
      <%= f.text_field :remote_pic_url_url %>
    </div>

    <div class="actions">
      <%= f.submit 'Upload Picture', :class => 'btn btn-primary' %>
    </div>
<% end %> 
```

然后我得到这个错误：

```
Can't mass-assign protected attributes: 
```

我的模型是

```
class Rating < ActiveRecord::Base
  attr_accessible :pic_url, :rating

  mount_uploader :pic_url , ImageUploader
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:19:17.997

您需要能够批量分配`remote_pic_url_url`属性：

```
class Rating < ActiveRecord::Base
  attr_accessible :pic_url, :remote_pic_url_url, :rating

  mount_uploader :pic_url , ImageUploader
end 
```

# javascript - TypeError：无法调用 null 的方法“每个”-Joomla ChronoForms 中的 Javascript 类型错误

> ID：13634864
> 
> 赞同：0
> 
> 时间：2012-11-29T21:15:29.197
> 
> 标签：javascript, jquery, ajax, joomla

我正在尝试使用 Joomla ChronoForms 进行“双重”下拉，但是当我从第一个下拉列表中选择某些内容时，页面上出现了 Javascript 错误，这是我的代码：

```
<select id="recipe" name="recipe">
    <optgroup label="test" id="ch_1">
        <option value="blabla">something here</option>
        <option value="blabla">something here</option>
    </optgroup>

    <optgroup label="test244" id="ch_2">
        <option value="blabla">something here</option>
        <option value="blabla">something here</option>
    </optgroup>

    <optgroup label="testtt" id="ch_3">
        <option value="blabla">something here</option>
        <option value="blabla">something here</option>
    </optgroup>

    <optgroup label="testt23521" id="ch_4">
        <option value="blabla">something here</option>
        <option value="blabla">something here</option>
    </optgroup>

    <optgroup label="teeesstt" id="ch_5">
        <option value="blabla">something here</option>
        <option value="blabla">something here</option>
    </optgroup>
</select> 
```

JS代码是：

```
window.addEvent('load', function() {
    var num_groups = 5;
    var groups = new Array;

    for ( var i = 1; i <= num_groups; i++ ) {
        groups[i] = $('ch_'+i);
        $('ch_'+i).remove();
    }
    $('chapter').value = '';

    $('chapter').addEvent('change', function() {
        var group_no = $('chapter').value;
        if ( !group_no ) {
            return;
        }

        $('#recipe optgroup').each(function(el) {el.remove()});
        $('recipe').appendChild(groups[group_no]);
    });
}); 
```

我收到的 JS 错误是：**TypeError: Cannot call method 'each' of null**

你能帮我解决这个问题吗？谢谢

这是论坛中与此[链接](http://www.chronoengine.com/forums/viewtopic.php?f=5&t=21267&p=303456#p303456)或[链接2](http://greyhead.net/chronoforms/creating-a-double-drop-down)相关的主题，也许它可以帮助某人找到问题，我已经尽我所能.. :(请有人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T22:14:28.560

好的，如果是 joomla 很可能是 MooTools，但不确定是什么版本，尝试更改选择器

> $('#recipe optgroup').each(function(el) {el.remove()});

到

> $$('#recipe optgroup').each(function(el) {el.remove()});

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T21:23:35.077

```
$('chapter') 
```

如果它不是一个元素，它应该是

`$('#chapter') ID`或者 `$('.chapter') Class`

`$('recipe')` 应该是`$('#recipe')`

另外，如果你认为这条线是**jQuery**

```
$('chapter').addEvent('change', function() { 
```

它应该是

```
 $('#chapter').on('change', function() { 
```

我从没听说过`.addEvent`javascript

应该是`attachEvent` 或者`eventListener`在香草javascript中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T21:26:10.363

试试这个：`$('#recipe').find('optgroup').each` 你确定在每个方法调用已经在 dom 中创建的组合框时？尝试使用 setTimeout 函数

```
setTimeout(function(){
    $('#recipe').find('optgroup').each.....
}, 1000); 
```

# 3d - 编程 3d 粒子碰撞

> ID：13634866
> 
> 赞同：0
> 
> 时间：2012-11-29T21:15:47.163
> 
> 标签：3d, simulation, collision, particles

我的代码中有两个粒子在弹性碰撞中发生碰撞。我知道这两个粒子的质量和半径。我知道两个粒子碰撞时的中心点。我知道两个粒子的速度（包括方向）。我想弄清楚碰撞后两个粒子的速度（包括方向），我想以一种有效的方式计算它。我知道这更像是一个物理问题，而不是计算机编程问题，但程序员似乎总是更善于找到最有效的做事方式。我正在用 C++ 编程。我会很感激我能得到的任何帮助，即使只是指出我正确的方向。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-19T04:00:09.223

精确解可以通过数学软件（Mathematica、sagemath..等）求解。这里我使用了python包sympy。该算法使用 Gröbner 基和 Buchberger 算法，可以求解多项式方程组。

弹性碰撞方程是 1) 动量守恒，每个一维 2) 能量守恒。3) 碰撞后第一个粒子的速度在指定单位向量的方向

方程看起来像这样：

uij：碰撞前第 i 个粒子的速度的第 j 个分量。
vij：碰撞后第 i 个粒子的速度的第 j 个分量。
n : 指向碰撞后第一个粒子速度方向的单位向量
t : 碰撞后第一个粒子速度的大小
m : 质量

```
from sympy import *

u11,u12,u13 = symbols('u11 u12 u13')
u21,u22,u23 = symbols('u21 u22 u23')
v11,v12,v13 = symbols('v11 v12 v13')
v21,v22,v23 = symbols('v21 v22 v23')
n1,n2,n3,t= symbols('n1 n2 n3 t')
m1,m2 = symbols('m1 m2')

p1 = m1*u11 +m2*u21 - m1*v11 -m2*v21
p2 = m1*u12 +m2*u22 - m1*v12 -m2*v22
p3 = m1*u13 +m2*u23 - m1*v13 -m2*v23

e = m1*(u11**2+ u12**2 +u13**2) + m2*(u21**2+ u22**2+ u23**2) \
-( m1*(v11**2+ v12**2 +v13**2) + m2*(v21**2+ v22**2+ v23**2 ))

d1 =v11 - t*n1
d2 =v12 - t*n2
d3 =v13 - t*n3

s = solve([p1,p2,p3,e,d1,d2,d3], v11,v12,v13,v21,v22,v23,t, set=True) 
```

解决方案是：[t, v11, v12, v13, v21, v22, v23]

```
2*sqrt(-m1**2*n1**2*u12**2 - m1**2*n1**2*u13**2 + 2*m1**2*n1*n2*u11*u12 + 2*m1**2*n1*n3*u11*u13 - m1**2*n2**2*u11**2 - m1**2*n2**2*u13**2 + 2*m1**2*n2*n3*u12*u13 - m1**2*n3**2*u11**2 - m1**2*n3**2*u12**2 - 2*m1*m2*n1**2*u12*u22 - 2*m1*m2*n1**2*u13*u23 + 2*m1*m2*n1*n2*u11*u22 + 2*m1*m2*n1*n2*u12*u21 + 2*m1*m2*n1*n3*u11*u23 + 2*m1*m2*n1*n3*u13*u21 - 2*m1*m2*n2**2*u11*u21 - 2*m1*m2*n2**2*u13*u23 + 2*m1*m2*n2*n3*u12*u23 + 2*m1*m2*n2*n3*u13*u22 - 2*m1*m2*n3**2*u11*u21 - 2*m1*m2*n3**2*u12*u22 + m2**2*n1**2*u11**2 - 2*m2**2*n1**2*u11*u21 + m2**2*n1**2*u12**2 - 2*m2**2*n1**2*u12*u22 + m2**2*n1**2*u13**2 - 2*m2**2*n1**2*u13*u23 + m2**2*n1**2*u21**2 + 2*m2**2*n1*n2*u21*u22 + 2*m2**2*n1*n3*u21*u23 + m2**2*n2**2*u11**2 - 2*m2**2*n2**2*u11*u21 + m2**2*n2**2*u12**2 - 2*m2**2*n2**2*u12*u22 + m2**2*n2**2*u13**2 - 2*m2**2*n2**2*u13*u23 + m2**2*n2**2*u22**2 + 2*m2**2*n2*n3*u22*u23 + m2**2*n3**2*u11**2 - 2*m2**2*n3**2*u11*u21 + m2**2*n3**2*u12**2 - 2*m2**2*n3**2*u12*u22 + m2**2*n3**2*u13**2 - 2*m2**2*n3**2*u13*u23 + m2**2*n3**2*u23**2)/(2*m1*n1**2 + 2*m1*n2**2 + 2*m1*n3**2 + 2*m2*n1**2 + 2*m2*n2**2 + 2*m2*n3**2) + (m1*n1*u11 + m1*n2*u12 + m1*n3*u13 + m2*n1*u21 + m2*n2*u22 + m2*n3*u23)/((m1 + m2)*(n1**2 + n2**2 + n3**2)) 

n1*(m1*n1*u11 + m1*n2*u12 + m1*n3*u13 + m2*n1*u21 + m2*n2*u22 + m2*n3*u23 + sqrt(-m1**2*n1**2*u12**2 - m1**2*n1**2*u13**2 + 2*m1**2*n1*n2*u11*u12 + 2*m1**2*n1*n3*u11*u13 - m1**2*n2**2*u11**2 - m1**2*n2**2*u13**2 + 2*m1**2*n2*n3*u12*u13 - m1**2*n3**2*u11**2 - m1**2*n3**2*u12**2 - 2*m1*m2*n1**2*u12*u22 - 2*m1*m2*n1**2*u13*u23 + 2*m1*m2*n1*n2*u11*u22 + 2*m1*m2*n1*n2*u12*u21 + 2*m1*m2*n1*n3*u11*u23 + 2*m1*m2*n1*n3*u13*u21 - 2*m1*m2*n2**2*u11*u21 - 2*m1*m2*n2**2*u13*u23 + 2*m1*m2*n2*n3*u12*u23 + 2*m1*m2*n2*n3*u13*u22 - 2*m1*m2*n3**2*u11*u21 - 2*m1*m2*n3**2*u12*u22 + m2**2*n1**2*u11**2 - 2*m2**2*n1**2*u11*u21 + m2**2*n1**2*u12**2 - 2*m2**2*n1**2*u12*u22 + m2**2*n1**2*u13**2 - 2*m2**2*n1**2*u13*u23 + m2**2*n1**2*u21**2 + 2*m2**2*n1*n2*u21*u22 + 2*m2**2*n1*n3*u21*u23 + m2**2*n2**2*u11**2 - 2*m2**2*n2**2*u11*u21 + m2**2*n2**2*u12**2 - 2*m2**2*n2**2*u12*u22 + m2**2*n2**2*u13**2 - 2*m2**2*n2**2*u13*u23 + m2**2*n2**2*u22**2 + 2*m2**2*n2*n3*u22*u23 + m2**2*n3**2*u11**2 - 2*m2**2*n3**2*u11*u21 + m2**2*n3**2*u12**2 - 2*m2**2*n3**2*u12*u22 + m2**2*n3**2*u13**2 - 2*m2**2*n3**2*u13*u23 + m2**2*n3**2*u23**2))/(m1*n1**2 + m1*n2**2 + m1*n3**2 + m2*n1**2 + m2*n2**2 + m2*n3**2)

n2*(m1*n1*u11 + m1*n2*u12 + m1*n3*u13 + m2*n1*u21 + m2*n2*u22 + m2*n3*u23 + sqrt(-m1**2*n1**2*u12**2 - m1**2*n1**2*u13**2 + 2*m1**2*n1*n2*u11*u12 + 2*m1**2*n1*n3*u11*u13 - m1**2*n2**2*u11**2 - m1**2*n2**2*u13**2 + 2*m1**2*n2*n3*u12*u13 - m1**2*n3**2*u11**2 - m1**2*n3**2*u12**2 - 2*m1*m2*n1**2*u12*u22 - 2*m1*m2*n1**2*u13*u23 + 2*m1*m2*n1*n2*u11*u22 + 2*m1*m2*n1*n2*u12*u21 + 2*m1*m2*n1*n3*u11*u23 + 2*m1*m2*n1*n3*u13*u21 - 2*m1*m2*n2**2*u11*u21 - 2*m1*m2*n2**2*u13*u23 + 2*m1*m2*n2*n3*u12*u23 + 2*m1*m2*n2*n3*u13*u22 - 2*m1*m2*n3**2*u11*u21 - 2*m1*m2*n3**2*u12*u22 + m2**2*n1**2*u11**2 - 2*m2**2*n1**2*u11*u21 + m2**2*n1**2*u12**2 - 2*m2**2*n1**2*u12*u22 + m2**2*n1**2*u13**2 - 2*m2**2*n1**2*u13*u23 + m2**2*n1**2*u21**2 + 2*m2**2*n1*n2*u21*u22 + 2*m2**2*n1*n3*u21*u23 + m2**2*n2**2*u11**2 - 2*m2**2*n2**2*u11*u21 + m2**2*n2**2*u12**2 - 2*m2**2*n2**2*u12*u22 + m2**2*n2**2*u13**2 - 2*m2**2*n2**2*u13*u23 + m2**2*n2**2*u22**2 + 2*m2**2*n2*n3*u22*u23 + m2**2*n3**2*u11**2 - 2*m2**2*n3**2*u11*u21 + m2**2*n3**2*u12**2 - 2*m2**2*n3**2*u12*u22 + m2**2*n3**2*u13**2 - 2*m2**2*n3**2*u13*u23 + m2**2*n3**2*u23**2))/(m1*n1**2 + m1*n2**2 + m1*n3**2 + m2*n1**2 + m2*n2**2 + m2*n3**2)

n3*(m1*n1*u11 + m1*n2*u12 + m1*n3*u13 + m2*n1*u21 + m2*n2*u22 + m2*n3*u23 + sqrt(-m1**2*n1**2*u12**2 - m1**2*n1**2*u13**2 + 2*m1**2*n1*n2*u11*u12 + 2*m1**2*n1*n3*u11*u13 - m1**2*n2**2*u11**2 - m1**2*n2**2*u13**2 + 2*m1**2*n2*n3*u12*u13 - m1**2*n3**2*u11**2 - m1**2*n3**2*u12**2 - 2*m1*m2*n1**2*u12*u22 - 2*m1*m2*n1**2*u13*u23 + 2*m1*m2*n1*n2*u11*u22 + 2*m1*m2*n1*n2*u12*u21 + 2*m1*m2*n1*n3*u11*u23 + 2*m1*m2*n1*n3*u13*u21 - 2*m1*m2*n2**2*u11*u21 - 2*m1*m2*n2**2*u13*u23 + 2*m1*m2*n2*n3*u12*u23 + 2*m1*m2*n2*n3*u13*u22 - 2*m1*m2*n3**2*u11*u21 - 2*m1*m2*n3**2*u12*u22 + m2**2*n1**2*u11**2 - 2*m2**2*n1**2*u11*u21 + m2**2*n1**2*u12**2 - 2*m2**2*n1**2*u12*u22 + m2**2*n1**2*u13**2 - 2*m2**2*n1**2*u13*u23 + m2**2*n1**2*u21**2 + 2*m2**2*n1*n2*u21*u22 + 2*m2**2*n1*n3*u21*u23 + m2**2*n2**2*u11**2 - 2*m2**2*n2**2*u11*u21 + m2**2*n2**2*u12**2 - 2*m2**2*n2**2*u12*u22 + m2**2*n2**2*u13**2 - 2*m2**2*n2**2*u13*u23 + m2**2*n2**2*u22**2 + 2*m2**2*n2*n3*u22*u23 + m2**2*n3**2*u11**2 - 2*m2**2*n3**2*u11*u21 + m2**2*n3**2*u12**2 - 2*m2**2*n3**2*u12*u22 + m2**2*n3**2*u13**2 - 2*m2**2*n3**2*u13*u23 + m2**2*n3**2*u23**2))/(m1*n1**2 + m1*n2**2 + m1*n3**2 + m2*n1**2 + m2*n2**2 + m2*n3**2)

(-m1**2*n1*n2*u12 - m1**2*n1*n3*u13 + m1**2*n2**2*u11 + m1**2*n3**2*u11 + m1*m2*n1**2*u11 - m1*m2*n1*n2*u22 - m1*m2*n1*n3*u23 + m1*m2*n2**2*u11 + m1*m2*n2**2*u21 + m1*m2*n3**2*u11 + m1*m2*n3**2*u21 - m1*n1*sqrt(-m1**2*n1**2*u12**2 - m1**2*n1**2*u13**2 + 2*m1**2*n1*n2*u11*u12 + 2*m1**2*n1*n3*u11*u13 - m1**2*n2**2*u11**2 - m1**2*n2**2*u13**2 + 2*m1**2*n2*n3*u12*u13 - m1**2*n3**2*u11**2 - m1**2*n3**2*u12**2 - 2*m1*m2*n1**2*u12*u22 - 2*m1*m2*n1**2*u13*u23 + 2*m1*m2*n1*n2*u11*u22 + 2*m1*m2*n1*n2*u12*u21 + 2*m1*m2*n1*n3*u11*u23 + 2*m1*m2*n1*n3*u13*u21 - 2*m1*m2*n2**2*u11*u21 - 2*m1*m2*n2**2*u13*u23 + 2*m1*m2*n2*n3*u12*u23 + 2*m1*m2*n2*n3*u13*u22 - 2*m1*m2*n3**2*u11*u21 - 2*m1*m2*n3**2*u12*u22 + m2**2*n1**2*u11**2 - 2*m2**2*n1**2*u11*u21 + m2**2*n1**2*u12**2 - 2*m2**2*n1**2*u12*u22 + m2**2*n1**2*u13**2 - 2*m2**2*n1**2*u13*u23 + m2**2*n1**2*u21**2 + 2*m2**2*n1*n2*u21*u22 + 2*m2**2*n1*n3*u21*u23 + m2**2*n2**2*u11**2 - 2*m2**2*n2**2*u11*u21 + m2**2*n2**2*u12**2 - 2*m2**2*n2**2*u12*u22 + m2**2*n2**2*u13**2 - 2*m2**2*n2**2*u13*u23 + m2**2*n2**2*u22**2 + 2*m2**2*n2*n3*u22*u23 + m2**2*n3**2*u11**2 - 2*m2**2*n3**2*u11*u21 + m2**2*n3**2*u12**2 - 2*m2**2*n3**2*u12*u22 + m2**2*n3**2*u13**2 - 2*m2**2*n3**2*u13*u23 + m2**2*n3**2*u23**2) + m2**2*n1**2*u21 + m2**2*n2**2*u21 + m2**2*n3**2*u21)/(m2*(m1*n1**2 + m1*n2**2 + m1*n3**2 + m2*n1**2 + m2*n2**2 + m2*n3**2))

(m1**2*n1**2*u12 - m1**2*n1*n2*u11 - m1**2*n2*n3*u13 + m1**2*n3**2*u12 + m1*m2*n1**2*u12 + m1*m2*n1**2*u22 - m1*m2*n1*n2*u21 + m1*m2*n2**2*u12 - m1*m2*n2*n3*u23 + m1*m2*n3**2*u12 + m1*m2*n3**2*u22 - m1*n2*sqrt(-m1**2*n1**2*u12**2 - m1**2*n1**2*u13**2 + 2*m1**2*n1*n2*u11*u12 + 2*m1**2*n1*n3*u11*u13 - m1**2*n2**2*u11**2 - m1**2*n2**2*u13**2 + 2*m1**2*n2*n3*u12*u13 - m1**2*n3**2*u11**2 - m1**2*n3**2*u12**2 - 2*m1*m2*n1**2*u12*u22 - 2*m1*m2*n1**2*u13*u23 + 2*m1*m2*n1*n2*u11*u22 + 2*m1*m2*n1*n2*u12*u21 + 2*m1*m2*n1*n3*u11*u23 + 2*m1*m2*n1*n3*u13*u21 - 2*m1*m2*n2**2*u11*u21 - 2*m1*m2*n2**2*u13*u23 + 2*m1*m2*n2*n3*u12*u23 + 2*m1*m2*n2*n3*u13*u22 - 2*m1*m2*n3**2*u11*u21 - 2*m1*m2*n3**2*u12*u22 + m2**2*n1**2*u11**2 - 2*m2**2*n1**2*u11*u21 + m2**2*n1**2*u12**2 - 2*m2**2*n1**2*u12*u22 + m2**2*n1**2*u13**2 - 2*m2**2*n1**2*u13*u23 + m2**2*n1**2*u21**2 + 2*m2**2*n1*n2*u21*u22 + 2*m2**2*n1*n3*u21*u23 + m2**2*n2**2*u11**2 - 2*m2**2*n2**2*u11*u21 + m2**2*n2**2*u12**2 - 2*m2**2*n2**2*u12*u22 + m2**2*n2**2*u13**2 - 2*m2**2*n2**2*u13*u23 + m2**2*n2**2*u22**2 + 2*m2**2*n2*n3*u22*u23 + m2**2*n3**2*u11**2 - 2*m2**2*n3**2*u11*u21 + m2**2*n3**2*u12**2 - 2*m2**2*n3**2*u12*u22 + m2**2*n3**2*u13**2 - 2*m2**2*n3**2*u13*u23 + m2**2*n3**2*u23**2) + m2**2*n1**2*u22 + m2**2*n2**2*u22 + m2**2*n3**2*u22)/(m2*(m1*n1**2 + m1*n2**2 + m1*n3**2 + m2*n1**2 + m2*n2**2 + m2*n3**2))

(m1**2*n1**2*u13 - m1**2*n1*n3*u11 + m1**2*n2**2*u13 - m1**2*n2*n3*u12 + m1*m2*n1**2*u13 + m1*m2*n1**2*u23 - m1*m2*n1*n3*u21 + m1*m2*n2**2*u13 + m1*m2*n2**2*u23 - m1*m2*n2*n3*u22 + m1*m2*n3**2*u13 - m1*n3*sqrt(-m1**2*n1**2*u12**2 - m1**2*n1**2*u13**2 + 2*m1**2*n1*n2*u11*u12 + 2*m1**2*n1*n3*u11*u13 - m1**2*n2**2*u11**2 - m1**2*n2**2*u13**2 + 2*m1**2*n2*n3*u12*u13 - m1**2*n3**2*u11**2 - m1**2*n3**2*u12**2 - 2*m1*m2*n1**2*u12*u22 - 2*m1*m2*n1**2*u13*u23 + 2*m1*m2*n1*n2*u11*u22 + 2*m1*m2*n1*n2*u12*u21 + 2*m1*m2*n1*n3*u11*u23 + 2*m1*m2*n1*n3*u13*u21 - 2*m1*m2*n2**2*u11*u21 - 2*m1*m2*n2**2*u13*u23 + 2*m1*m2*n2*n3*u12*u23 + 2*m1*m2*n2*n3*u13*u22 - 2*m1*m2*n3**2*u11*u21 - 2*m1*m2*n3**2*u12*u22 + m2**2*n1**2*u11**2 - 2*m2**2*n1**2*u11*u21 + m2**2*n1**2*u12**2 - 2*m2**2*n1**2*u12*u22 + m2**2*n1**2*u13**2 - 2*m2**2*n1**2*u13*u23 + m2**2*n1**2*u21**2 + 2*m2**2*n1*n2*u21*u22 + 2*m2**2*n1*n3*u21*u23 + m2**2*n2**2*u11**2 - 2*m2**2*n2**2*u11*u21 + m2**2*n2**2*u12**2 - 2*m2**2*n2**2*u12*u22 + m2**2*n2**2*u13**2 - 2*m2**2*n2**2*u13*u23 + m2**2*n2**2*u22**2 + 2*m2**2*n2*n3*u22*u23 + m2**2*n3**2*u11**2 - 2*m2**2*n3**2*u11*u21 + m2**2*n3**2*u12**2 - 2*m2**2*n3**2*u12*u22 + m2**2*n3**2*u13**2 - 2*m2**2*n3**2*u13*u23 + m2**2*n3**2*u23**2) + m2**2*n1**2*u23 + m2**2*n2**2*u23 + m2**2*n3**2*u23)/(m2*(m1*n1**2 + m1*n2**2 + m1*n3**2 + m2*n1**2 + m2*n2**2 + m2*n3**2)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T21:23:25.947

我向您推荐皮克斯出版的这篇[论文。](https://encrypted.google.com/url?sa=t&rct=j&q=body%20movement%20simlation%20pixar&source=web&cd=1&ved=0CDcQFjAA&url=http://graphics.cs.cmu.edu/courses/15-869-F08/lec/14/notesg.pdf&ei=vNG3UNq7AqeE4gS__oCABg&usg=AFQjCNGFVLTG39dxDJsc0Oxyg5hcqkHxTg&sig2=g8Ozig5Y_0dd_IiuFgxbww)它是关于刚体的模拟，并包含一些代码，因此您可以试一试！:-)

[在这里](http://gafferongames.com/game-physics/physics-in-3d/)，您还可以下载一些处理 3D 运动的 C++ 代码。

# c# - 获取默认网关

> ID：13634868
> 
> 赞同：27
> 
> 时间：2012-11-29T21:15:50.877
> 
> 标签：c#, network-programming, network-protocols

我正在编写一个程序，向用户显示他们的 IP 地址、子网掩码和默认网关。我可以得到前两个，但对于最后一个，这是我出现的：

```
GatewayIPAddressInformationCollection gwc = 
    System.Net.NetworkInformation.NetworkInterface.GetAllNetworkInterfaces()[0].GetIPProperties().GatewayAddresses; 
```

当然，这会返回一个`GatewayIPAddressInformation`. 那么，如果一台计算机有多个网关，我如何确定哪个是*默认*网关呢？

在实践中，我只见过这个集合包含一个条目，但由于它是作为一个集合实现的，因此某些计算机包含多个网关是理所当然的，这些网关都没有标记为“默认”。那么有没有办法确定*默认值*还是只是猜测？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-29T21:26:52.287

它*可能*是第一个启用的网络接口的第一个有效且启用的网关地址：

```
public static IPAddress GetDefaultGateway()
{
    return NetworkInterface
        .GetAllNetworkInterfaces()
        .Where(n => n.OperationalStatus == OperationalStatus.Up)
        .Where(n => n.NetworkInterfaceType != NetworkInterfaceType.Loopback)
        .SelectMany(n => n.GetIPProperties()?.GatewayAddresses)
        .Select(g => g?.Address)
        .Where(a => a != null)
         // .Where(a => a.AddressFamily == AddressFamily.InterNetwork)
         // .Where(a => Array.FindIndex(a.GetAddressBytes(), b => b != 0) >= 0)
        .FirstOrDefault();
} 
```

我还添加了一些进一步的注释检查，其他人在这里指出这些检查很有用。您可以检查其中`AddressFamily`一项以区分 IPv4 和 IPv6。后一种可用于过滤掉 0.0.0.0 个地址。

上述解决方案将为您提供一个有效/连接的接口，并且足以满足 99% 的情况。也就是说，如果您有多个可以路由流量的有效接口，并且您需要 100% 准确，那么执行此操作的方法就是[`GetBestInterface`](https://msdn.microsoft.com/en-us/library/windows/desktop/aa365920%28v=vs.85%29.aspx)找到用于路由到特定 IP 地址的接口。这还可以处理您可能通过不同的适配器路由特定地址范围的情况（例如`10.*.*.*`，通过 VPN，其他所有内容都通过您的路由器）

```
[DllImport("iphlpapi.dll", CharSet = CharSet.Auto)]
private static extern int GetBestInterface(UInt32 destAddr, out UInt32 bestIfIndex);

public static IPAddress GetGatewayForDestination(IPAddress destinationAddress)
{
    UInt32 destaddr = BitConverter.ToUInt32(destinationAddress.GetAddressBytes(), 0);

    uint interfaceIndex;
    int result = GetBestInterface(destaddr, out interfaceIndex);
    if (result != 0)
        throw new Win32Exception(result);

    foreach (var ni in NetworkInterface.GetAllNetworkInterfaces())
    {
        var niprops = ni.GetIPProperties();
        if (niprops == null)
            continue;

        var gateway = niprops.GatewayAddresses?.FirstOrDefault()?.Address;
        if (gateway == null)
            continue;

        if (ni.Supports(NetworkInterfaceComponent.IPv4))
        {
            var v4props = niprops.GetIPv4Properties();
            if (v4props == null)
                continue;

            if (v4props.Index == interfaceIndex)
                return gateway;
        }

        if (ni.Supports(NetworkInterfaceComponent.IPv6))
        {
            var v6props = niprops.GetIPv6Properties();
            if (v6props == null)
                continue;

            if (v6props.Index == interfaceIndex)
                return gateway;
        }
    }

    return null;
} 
```

这两个示例可以封装到一个辅助类中并在适当的情况下使用：您有，或者您还没有记住目标地址。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-07T14:34:51.003

命令返回的第一个 IP 地址`traceroute`将是网关。您可以使用这个事实来获取网关。可以`tracerout`在这里找到一个很好的实现： [TraceRoute and Ping in C#](https://stackoverflow.com/questions/142614/traceroute-and-ping-in-c-sharp)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-16T16:35:30.307

我知道这是一个稍微老一点的问题，但是我刚刚发现需要检索本地网关的 IPV4 地址。当涉及到我自己的系统时，接受的答案并不完全符合要求，因此，我将其修改为套件，我相信其他人也将能够使用此解决方案。

由于我还没有足够的代表发表评论，我不得不将其添加为“问题”：

```
public static IPAddress GetDefaultGateway()
    {
        IPAddress result = null;
        var cards = NetworkInterface.GetAllNetworkInterfaces().ToList();
        if (cards.Any())
        {
            foreach (var card in cards)
            {
                var props = card.GetIPProperties();
                if (props == null)
                    continue;

                var gateways = props.GatewayAddresses;
                if (!gateways.Any())
                    continue;

                var gateway =
                    gateways.FirstOrDefault(g => g.Address.AddressFamily.ToString() == "InterNetwork");
                if (gateway == null)
                    continue;

                result = gateway.Address;
                break;
            };
        }

        return result;
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-22T08:41:36.020

根据@midspace 对@caesay 答案的评论，这是一个更好的答案：

```
public static IPAddress GetDefaultGateway()
{
    var gateway_address = NetworkInterface.GetAllNetworkInterfaces()
        .Where(e => e.OperationalStatus == OperationalStatus.Up)
        .SelectMany(e => e.GetIPProperties().GatewayAddresses)
        .FirstOrDefault();
    if (gateway_address == null) return null;
    return gateway_address.Address;
} 
```

我警告这不是一个完整的解决方案，如果您正在寻找负责互联网访问的主接口，您应该结合其他方法，例如使用 win32 API [GetBestInterface](https://msdn.microsoft.com/en-us/library/windows/desktop/aa365920%28v=vs.85%29.aspx)来找到连接到目标地址的最佳接口。

你可以在这里找到示例用法：[http ://www.pinvoke.net/default.aspx/iphlpapi.getbestinterface](http://www.pinvoke.net/default.aspx/iphlpapi.getbestinterface)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-12T02:03:36.070

一直在寻找一种奇怪的技巧来确定本地 IP 地址吗？然而，与早期的方法相比，它做得非常稳健吗？

[对@caesay 的回复见结尾]

这可能是您正在寻找的。

```
using (var s = new System.Net.Sockets.Socket(AddressFamily.InterNetwork, SocketType.Dgram,ProtocolType.Udp))
{
    s.Bind( new System.Net.IPEndPoint(System.Net.IPAddress.Any,0));
    s.Connect("google.com",0);

    var ipaddr = s.LocalEndPoint as System.Net.IPEndPoint;
    var addr = ipaddr.Address.ToString();
    Console.WriteLine(addr);
} 
```

这将创建一个 UDP 套接字，但不会在其上发送数据。然后，您可以查看套接字绑定到的本地接口和地址。您必须提供我使用 google.com 的 IP 地址或主机名，操作系统将使用它来确定套接字将绑定到哪个接口，以及使用此方法可以找到哪个 IP 地址。对于您使用的 99% 以上的 IP 地址或主机名，您将获得用于通过默认路由进行流量的接口+地址。

虽然这有点迟钝，但我怀疑它比上面人们使用 PInvoke 调用并扫描结构以查看他们是否可以找到接口的方法更可靠。

我当然发现它在我的 3x 双接口系统上比使用启发式扫描 NetworkInterface.GetAllNetworkInterfaces() 的结果来尝试找出默认接口地址更强大。

[更新/回复@caesay 2/6/2019] @caesay 在这里提出了一个很好的观点，所以我将示例从使用 UdpClient 切换到了 Socket，并在 Bind() 之后显式调用了 Socket.Connect()。我还查看了 Connect() 和 LocalEndPoint 的框架源代码，它们都立即调用了它们相应的 Win32 操作系统系统调用，而不会推迟或懒惰地调用操作系统。Win32绑定页面说“应用程序可以在调用bind后使用getsockname来学习地址和已分配给套接字的端口。如果Internet地址等于INADDR_ANY或in6addr_any，getsockname不一定提供地址，直到套接字被连接的”。现在已经明确解决了这种情况，并且在查看了框架源之后，IP 地址在 Connect() 调用之后应该始终可用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-14T02:25:49.287

```
NetworkInterface[] allNICs = NetworkInterface.GetAllNetworkInterfaces();
foreach (var nic in allNICs)
{
    var ipProp = nic.GetIPProperties();
    var gwAddresses = ipProp.GatewayAddresses;
    if (gwAddresses.Count > 0 &&
        gwAddresses.FirstOrDefault(g => g.Address.AddressFamily == AddressFamily.InterNetwork) != null)
    {
        localIP = ipProp.UnicastAddresses.First(d => d.Address.AddressFamily == AddressFamily.InterNetwork).Address;
    }
}
Debug.Print(localIP.ToString()); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-02-03T11:34:15.817

我刚刚遇到这个问题，将使用以下代码 - 基本上它会查找不是环回且已启动且具有网关和单播地址的接口。然后我从界面获得一个非瞬态 IPV4 地址。

```
public static class NetworkInterfaces
{
    public static NetworkInterface GetDefaultInterface()
    {
        var interfaces = System.Net.NetworkInformation.NetworkInterface.GetAllNetworkInterfaces();
        foreach (var intf in interfaces)
        {
            if (intf.OperationalStatus != OperationalStatus.Up)
            {
                continue;
            }
            if (intf.NetworkInterfaceType == NetworkInterfaceType.Loopback)
            {
                continue;
            }

            var properties = intf.GetIPProperties();
            if (properties == null)
            {
                continue;
            }
            var gateways = properties.GatewayAddresses;
            if ((gateways == null) || (gateways.Count == 0))
            {
                continue;
            }
            var addresses = properties.UnicastAddresses;
            if ((addresses == null) || (addresses.Count == 0))
            {
                continue;
            }
            return intf;
        }
        return null;
    }

    public static IPAddress GetDefaultIPV4Address(NetworkInterface intf)
    {
        if (intf == null)
        {
            return null;
        }
        foreach (var address in intf.GetIPProperties().UnicastAddresses)
        {
            if (address.Address.AddressFamily != AddressFamily.InterNetwork)
            {
                continue;
            }
            if (address.IsTransient)
            {
                continue;
            }
            return address.Address;
        }
        return null;
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-05-31T23:56:51.527

（就在发布之后，我注意到一个较早的答案，其中提到了使用 traceroute 的想法。如果我看到了，我可能不会做出回应。但我已经包含了完整/紧凑的代码。）

这是另一种使用 traceroute 类型方法查找默认网关的方法。ping 一个 TTL 为 1 的 Internet（或您想访问的其他网络）上的地址，让 ping 告诉您第一跳 IP 地址是什么。那应该是您正在寻找的网关。

我想如果网关配置为不回复 ping，这可能会出错，但我认为我从未听说过以这种方式设置的网络。

注意：如果您向它传递一个 IPV6 地址，这种例程甚至可以工作。潜在的问题是它似乎返回了一个具有全局范围的 IPV6 地址，而不是链接本地范围。我没有足够的使用 IPV6 的经验来知道这是好是坏。但我知道 Windows ipconfig 命令显示接口网关的链路本地 IPV6 地址。

```
using System.Net
using System.Net.NetworkInformation

// ping internet address with ttl=1 and return address of host where ttl expired
public static IPAddress FindDefaultGateway(IPAddress netaddr = null)
{
    // user can provide an ip address that exists on the network they want to connect to, 
    // or this routine will default to 1.1.1.1 (IP of a popular internet dns provider)
    if (netaddr is null)
        netaddr = IPAddress.Parse("1.1.1.1"); 

    PingReply reply = default;  
    using var ping = new Ping();
    var options = new PingOptions(1, true); // ttl=1, dont fragment=true
    try { 
        // I arbitrarily used a 200ms timeout; tune as you see fit.
        reply = ping.Send(netaddr, 200, new byte[0], options); 
    }
    catch (PingException) {
        System.Diagnostics.Debug.WriteLine("Gateway not available");
        return default;
    }
    if (reply.Status != IPStatus.TtlExpired) {
        System.Diagnostics.Debug.WriteLine("Gateway not available");
        return default;
    }
    return reply.Address;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-29T21:45:10.317

我认为你应该遍历这个集合并显示所有网关，因为如果有很多网关到一个适配器，它们都被认为是该适配器的默认值

# ajax - django 处理表单提交而不返回响应

> ID：13634876
> 
> 赞同：0
> 
> 时间：2012-11-29T21:16:18.387
> 
> 标签：ajax, django, jquery

我在[这里](https://stackoverflow.com/questions/11647715/how-to-submit-form-without-refreshing-page-using-django-ajax-jquery)尝试了所有东西，但我一定遗漏了一些东西，因为我在 Django 的 ajax 帖子没有返回任何东西。在这一点上，我已经把它归结为赤裸裸的骨头，只是试图让它发挥作用，没有快乐。

我的观点：

```
def saveProjectEntry(request):
    form = ProjectEntryUpdateForm(request.POST)

    if form.is_valid():
        msg = json.dumps({'msg':'success'})
        return HttpResponse(msg, mimetype='application/json')
    else:
        msg = json.dumps({'msg':'failed'})
        return HttpResponse(msg, mimetype='application/json') 
```

我的 url.py 条目：

```
 url(r'^chargeback/savepe/$','chargeback.views.saveProjectEntry'), 
```

我的 jQuery：

```
 $('#peUpdateForm').submit(function() {
         $.ajax({
          url:'/chargeback/savepe/',
          data: $("#peUpdateForm").serialize(),
          type: "POST",
          success: function(e) {
              alert("success");
          },
          error: function(e) {
              alert("failed");
          }
        });
         return false;
     }); 
```

我还尝试了 jQuery post 方法：

```
$('#peUpdateForm').submit(function(e){
    $.post('/chargeback/savepe/', $('#peUpdateForm').serialize(), function(data){ 
       alert("success");
    });
    e.preventDefault();
}); 
```

我什么也得不到。没有收到我的任何警报。没有从视图中得到任何错误（如果我只是直接导航到视图，我会在浏览器中显示预期的 {'msg':'failed'}，所以 json 响应很好。url 调用正确的视图。唯一我能想到的是我的jQuery代码是错误的，但我无法弄清楚在哪里，并且控制台中没有错误。我已经在控制台中测试过，

```
$('#peUpdateForm').serialize() 
```

我得到了预期值。把我的头发拉出来……谢谢。

编辑：当我在此处放置断点时，甚至不会调用将 HTML 添加为我的 post 方法，因此我的提交设置方式可能有问题。

```
<div class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable ui-resizable ui-dialog-buttons" style="outline: 0px; z-index: 1002; position: absolute; height: auto; width: 376px; top: 75px; left: 408px; display: block;" tabindex="-1" role="dialog" aria-labelledby="ui-id-8"><div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix">
<span id="ui-id-8" class="ui-dialog-title">Project Entry Update</span><a href="#" class="ui-dialog-titlebar-close ui-corner-all" role="button"><span class="ui-icon ui-icon-closethick">close</span></a></div>
<div id="addPEForm" style="width: auto; min-height: 0px; height: 365px;" class="ui-dialog-content ui-widget-content" scrolltop="0" scrollleft="0">
    <form method="post" id="peUpdateForm" action="">
    <div style="display:none">
        <input type="hidden" name="csrfmiddlewaretoken" value="wvzwSBl87vC1tbkbdfxsD82GnjtvJCSz"></div>

    <p><label for="id_departmentid">Department:</label>
    <select id="id_departmentid" class="projEntryControl" name="departmentid">
        <option value="" selected="selected">Choose a Department</option>
        <option value="1">ABND</option>
        <option value="2">ATT</option>
        <option value="3">AVI</option>
        <option value="4">CCS</option>
        <option value="5">PBW</option>
    </select></p>
    <p><label for="id_projectid">Project:</label>
    <select id="id_projectid" class="projEntryControl" name="projectid">
         <option value="-1">Choose a Project</option>
         <option value="undefined">Bexar Street</option>
         <option value="undefined">Chalk Hill</option>
         <option value="undefined">Crown Road</option>
    </select>
    </p>
    <p><label for="id_progNumId">Program Number:</label>
    <select id="id_progNumId" class="projEntryControl" name="progNumId">
        <option value="" selected="selected">Choose a Program Number</option>
        <option value="1">31664</option>
        <option value="2">DD-7081</option>
    </select></p>
    <p><label for="id_hoursWorked">Hours Worked:</label>
    <input name="hoursWorked" value="0.0" class="projEntryControl" maxlength="5" type="text" id="id_hoursWorked"></p>
    <p><label for="id_notes">Notes:</label>
    <textarea id="id_notes" rows="10" cols="40" name="notes"></textarea></p>
</form>
</div> 
```

...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:56:13.210

AFAIK，如果您想将按钮保留在外面，这是正确的方法：

```
 $('#button').on('click', function(){
      $.ajax({
             data: $('#form').serialize(),
             ...});
 }); 
```

这是因为 `$('#form').submit() 仅当您将提交按钮保留在表单标签内时才会被调用。

# vb.net - 将 datagridview 绑定到不同的数据表

> ID：13634879
> 
> 赞同：1
> 
> 时间：2012-11-29T21:16:24.687
> 
> 标签：vb.net, datagridview, datatable

我有一个绑定到数据表的 datagridview，效果很好。但是，当我尝试以编程方式将数据源属性更改为不同的现有表时，我得到一个没有单元格的空白数据网格视图。虽然我已经尝试了很多代码来解决这个问题，但这是我认为应该解决问题的代码：

```
dgvThresholds.DataSource = SquirrelDataSet.Tables("Threshold market 12")
ThresholdMarketTableListTableAdapter.Update(SquirrelDataSet.Tables("Threshold market 12"))
dgvThresholds.DataSource = ThresholdMarketDefaultBindingSource
dgvThresholds.Refresh() 
```

关于如何让这个东西工作的任何建议？看似简单...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:59:10.717

尝试这个：

```
dgvThresholds.DataSource = SquirrelDataSet.Tables("Threshold market 12")
ThresholdMarketTableListTableAdapter.Update(SquirrelDataSet.Tables("Threshold market 12"))
dgvThresholds.Columns.Clear()
dgvThresholds.DataSource = ThresholdMarketDefaultBindingSource
dgvThresholds.AutoGenerateColumns = True
dgvThresholds.Refresh() 
```

# grails - 参数作为 Groovy 字符串而不是对象返回

> ID：13634881
> 
> 赞同：2
> 
> 时间：2012-11-29T21:16:25.680
> 
> 标签：grails, gsp, grails-2.0

我有一个自定义标签库。我将把 taglib 的结果传递给 g:render taglib。其中一个参数是 Asset 对象。如果我自己调用标签库，它工作正常。该参数实际上是一个资产对象。

例子：

```
templateFinder template="_displayMain" findByFactory="asset" findByObject="${params.asset}" 
```

正确地将 params.asset 呈现为 templateFinder taglib 中的资产。

但是，一旦我将它添加到 g:render taglib 中，它就会变成 Asset 对象的 toString 表示。

例子：

```
 render template="${g.templateFinder(template:'_displayMain', findByFactory:'asset', findByObject:"${params.asset}")}" ..../> 
```

这会导致我的 Asset 类出现 Class Cast 错误，其中包含 class 'org.codehaus.groovy.runtime.GStringImpl'。

我很困惑为什么这在第一个示例中呈现为对象，而在第二个示例中呈现为 Gstring。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:48:43.267

您通过将资产包含在`"${...}"`. 试试这个：

```
<g:render template="${g.templateFinder(template:'_displayMain', 
    findByFactory:'asset', findByObject: params.asset)}" ..../> 
```

# java - 可以取消 Google 云端硬盘上传吗？

> ID：13634894
> 
> 赞同：11
> 
> 时间：2012-11-29T21:17:15.010
> 
> 标签：java, android, android-asynctask, google-drive-api, google-api-java-client

我已经使用官方 API 编写了一个应用程序来上传到 Google 驱动器，这非常有效。但是我无论如何都找不到取消上传。我在 ASyncTask 中运行它，到目前为止，我已经尝试使驱动器对象、文件路径、令牌和其他一些变量都没有。我也尝试过使令牌无效，但似乎这只是将其从缓存中删除，实际上并没有使其服务器端无效。我已经在 ASyncTask 上调用了取消，但是如果在上传开始后取消它，似乎没有办法停止它。

我的问题是，如果用户开始上传一个 100mb 的文件，除了打开和关闭他们的互联网连接之外，他们没有办法取消它，这是不切实际的。这是我的上传代码：

```
 java.io.File jFile = new java.io.File(path); //Does not get file just info
                File body = setBody(jFile, mimeType);
                try
                {
                  java.io.File mediaFile = new java.io.File(path);
                  InputStreamContent mediaContent =
                      new InputStreamContent(mimeType,
                          new BufferedInputStream(new FileInputStream(mediaFile)));
                  mediaContent.setLength(mediaFile.length());
                  request = drive.files().insert(body, mediaContent);
                  request.getMediaHttpUploader().setProgressListener(new CustomProgressListener());
                  File file = request.execute(); 
```

肯定有办法取消上传吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T16:08:45.103

好问题！我提交了取消媒体上传请求的功能请求：

[https://code.google.com/p/google-api-java-client/issues/detail?id=671](https://code.google.com/p/google-api-java-client/issues/detail?id=671)

但是，根据该库的当前设计，这可能是一个难以实现的功能。

另一个要考虑的选项是不使用 AsyncTask，而是自己实现多线程并中止正在运行的线程。不愉快，但可能是您现在这样做的唯一选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T11:29:20.343

在评论中，我说过将请求放入线程并调用中断不起作用。所以我正在寻找另一种方法。

终于找到了，一个丑陋的：关闭上传文件的InputStream！

我初始化：

```
mediaContent = new InputStreamContent(NOTE_MIME_TYPE,new BufferedInputStream(new FileInputStream(fileContent)));
mediaContent.setLength(fileContent.length()); 
```

在停止侦听器中，我有：

```
IOUtils.closeQuietly(mediaContent.getInputStream()); 
```

当然，应该有可能以更好的方式做到这一点！

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-22T16:07:02.520

我也找了很久的答案。以下是我能想到的最好的。

将`Future`对象存储在您想要的任何位置（使用`Object`或`Void`）：

```
Future<Object> future; 
```

调用此代码（Java 8）：

```
try
{
    ExecutorService executor = Executors.newSingleThreadExecutor();

    future = (Future<Object>) executor.submit(() ->
    {
       // start uploading process here
    });

    future.get();            // run the thread (blocks)
    executor.shutdown();
}
catch (CancellationException | ExecutionException | InterruptedException e)
{} 
```

要取消，请致电：

```
future.cancel(true); 
```

到目前为止，该解决方案没有产生任何令人讨厌的副作用，这与停止线程（已弃用）不同，并且与中断不同，它保证了取消。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-03-20T15:47:45.173

我找到了一个讨厌的方法来做到这一点。我正在开发一个 android 应用程序，但我认为类似的逻辑可以应用于其他平台

我为上传请求设置了一个progressListener：

```
uploader.setProgressListener(new MediaHttpUploaderProgressListener() {
    @Override
    public void progressChanged(MediaHttpUploader uploader) throws IOException {
        if (cancelUpload) {
            //This was the only way I found to abort the download
            throw new GoogleDriveUploadServiceCancelException("Upload canceled");
        }
            reportProgress(uploader);
    }
}); 
```

如您所见，当我需要中止上传时，我使用了从外部设置的布尔成员。如果这个布尔值设置为true，那么在下一次更新上传进度时我会崩溃，导致请求中止。

再次，非常丑陋，但这是我发现让它工作的唯一方法

# javascript - 强制 XMLSerializer 不折叠空标签？

> ID：13634896
> 
> 赞同：5
> 
> 时间：2012-11-29T21:17:17.993
> 
> 标签：javascript, xmlhttprequest, internet-explorer-11, xmlserializer

是否可以通过任何配置选项告诉 JavaScript`XMLSerializer`不要将空标签折叠成自动关闭标签？我将一个 xml 字符串输入到 xml 解析器中，然后在对树进行修改后重新序列化它，但是我在输入中有一个明确的结束标记，这在输出中被折叠为一个自闭标记，这会导致问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-26T05:38:43.633

如果您没有可用的 jquery 并且只想通过 xmlserialzer 方式，您也可以使用**npm package 'xmldom'**。

```
var serializer = require('xmldom').XMLSerializer;
var str = serializer.serializeToString('your node'); 
```

它负责自我关闭标签（例如脚本标签）。 [NPM xmldom](https://www.npmjs.com/package/xmldom) 在 IE11 中运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T15:35:53.557

Well couldn't find anything but since I was using JQuery I used this :

```
$('<div>').append( $(mynode).clone() ).html(); 
```

instead of

```
new XMLSerializer().serializeToString(mynode); 
```

JQuery version didn't go with self-closing tags.

Note : My problem was only with IE11 so I used :

```
if (Object.hasOwnProperty.call(window, "ActiveXObject") && !window.ActiveXObject && window.jQuery) {
  // is IE11 && Jquery
  $('<div>').append( $(newnode).clone() ).html();
} else {
  oldnode.outerHTML = new XMLSerializer().serializeToString(newnode);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-28T13:22:45.150

我面临类似的问题。要仅在根元素中解决它（没有**xmldom**或**jquery**） - 只需检查 xmlstring 是否以自闭标签结尾并替换它：

```
 //let roottagname = 'script'
    ...
    const serializer = new XMLSerializer();
    let xmlStr = serializer.serializeToString(d);
    if (xmlStr.endsWith('/>')) xmlStr = xmlStr.slice(0, -2) + '></' + roottagname + '>'; 
```

# ruby-on-rails - Rails 3.2：在 after_initialize 中使用预先加载的关系

> ID：13634902
> 
> 赞同：0
> 
> 时间：2012-11-29T21:17:31.620
> 
> 标签：ruby-on-rails, relation

`includes`如果关系已经被急切地加载（例如 via ），我想对关系进行一些操作。具体来说，我有一个`Thread`包含 n`Message`的数据结构。我想在急切加载消息时创建消息树。我尝试如下：

```
class Thread
  has_many :messages

  after_initialize do
    gen_tree if messages.loaded?
  end
end 
```

我的问题是在加载关系之前执行了钩子。与 相同`after_find`。

有没有办法实现我想要的？

问候，CK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:50:40.473

我发现的一种解决方案是重命名现有的关系方法并实现您自己的：

```
class Thread
  has_many :messages

  alias_method :messages_orig, :messages
  def messages
    ret = messages_orig

    unless @generated
      @generated = true
      gen_tree
      sort_tree
    end

    ret
  end
end 
```

据我测试，它没有负面影响。

LG、CK

# stream - 比特流的压缩算法

> ID：13634903
> 
> 赞同：7
> 
> 时间：2012-11-29T21:17:32.623
> 
> 标签：stream, compression, bit

我正在寻找一种好的比特流压缩算法（数据包有效载荷压缩）。我想避免基于符号概率的算法。我已经尝试过 LZ 系列算法，发现它们都没有用，即使使用 BWT。

我正在尝试实现 30% 的最小压缩百分比，但使用 RLE 仅管理 3-5%。

什么是压缩率超过 30% 的好算法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T09:14:19.783

如果您对输入数据一无所知，则很难实现良好的压缩（就像通用压缩器一样）。

但至少你可以尝试一些基于上下文的模型。使用几个前缀位作为上下文并预测下一位的概率，然后将概率传递给范围编码器。

可以使用没有字节对齐的上下文混合模型来实现进一步的压缩。见[http://mattmahoney.net/dc/dce.html#Section_43](http://mattmahoney.net/dc/dce.html#Section_43)。

# email - SMTP 服务器发送速率指南

> ID：13634911
> 
> 赞同：0
> 
> 时间：2012-11-29T21:18:17.430
> 
> 标签：email, smtp

我正在构建一个工具来启动与域的 SMTP 事务，以查看 (a) 该域是否可以接收电子邮件以及 (b) 该域上是否存在所需的地址。我将批量处理大量电子邮件地址（一次超过 10,000 个），但我不想轰炸服务器并被列入黑名单。是否有关于与 SMTP 服务器通信的安全频率的准则？

我知道该`VRFY`命令，但并未全面实施。我打算尝试使用 VRFY 命令并回退到使用，

```
MAIL From:<user@example.com>
RCPT To:<first.last@example.org>
QUIT 
```

查看消息是否可以送达。同样，是否有关于我可以在域上多久启动一次这样的 SMTP 事务的指南？

**编辑：** 这样做的目的是创建一个工具，我的组织可以使用它来（a）从几个基本上不活动的列表中清除一些不良电子邮件，这样我们就不必支付我们的电子邮件传递系统来发送可能会退回的数千封电子邮件，以及 (b) 在用户订阅列表时检查电子邮件，以便我们拒绝像 aoghuifdgsiuvb@gmail.com 这样的电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:51:29.383

我认为可以提供的唯一通用准则是“不要这样做”。如果您表现得像垃圾邮件发送者，您将被视为垃圾邮件发送者。在乐观的情况下，网站已经有了控制，默默地扼杀或阻止你。在不太理想的情况下，他们会在（合理的）假设您正在为垃圾邮件列表收集地址的情况下对您采取行动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T20:05:56.857

首先，垃圾邮件是不好的。始终询问用户她是否想接收时事通讯。

1.  按域“取消排序”邮件地址，使同域的电子邮件地址之间的“距离”尽可能大。

2.  I think it's not the programmer's decision. There should be a config value which tells a minimum amount of time between two mail sending to the same domain. You should set up a limit also for that config value, avoid setting it to zero or low value.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T13:46:13.700

更好的解决方案是实际跟踪整个 SMTP 会话，向用户发送一封带有验证码/链接的电子邮件。这样做的好处是表明用户实际上可以控制相关地址，并且可以防止您看起来像垃圾邮件机器人。

数量与声誉相比不是问题。让用户知道您将在您的网络流中向他们发送电子邮件。这意味着他们不太可能将其标记为垃圾邮件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T14:48:46.530

some hosts have clear and defined guidelines as to how many emails can be sent per hour. So i guess this would depned onyour hostng service provider, UNLESS your hosting your own mail server off course.

# android - Eclipse 插件在更新后停止工作

> ID：13634913
> 
> 赞同：1
> 
> 时间：2012-11-29T21:18:35.640
> 
> 标签：android, eclipse, eclipse-plugin, updates

我更新了 Eclipse 插件（帮助 - 检查更新）。由于安装后重新启动，插件不再工作。它们仍然在“安装详细信息”中列出，但没有 Android 首选项、没有 Android 菜单条目、没有编辑器（“无法打开编辑器：没有 id com.android.ide.eclipse.editors.manifest 的编辑器描述符。清单编辑器”），等等。我试图卸载并重新安装插件，但没有成功。我在 Ubuntu 上使用 Eclipse Helileo。知道如何让我的 Android IDE 再次工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:30:14.517

您是否还更新了 SDK 工具？即点击带有箭头图标的小Android，让它检查更新，然后安装更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:27:25.390

问题来自插件版本和jdk/sdk版本的兼容性如果你有最后一个插件，你必须有最后一个版本的jdk/sdk尝试下载sdk android的最新版本，最后一个jdk java并再次启动日食。

祝你好运，我的朋友

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T20:41:59.953

我曾多次遇到同样的问题。可悲的是，我找到的唯一可靠的解决方案是删除 ~/.eclipse 并重新安装 Android Eclipse 插件（[http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)）。有人说它可以通过修改 bundles.info 文件（[http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=587657](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=587657)）来修复，但我从来没有设法让它以这种方式工作。

# wcf - JQuery AJAX 调用失败，而对 WCF 服务的其他调用成功

> ID：13634920
> 
> 赞同：1
> 
> 时间：2012-11-29T21:19:16.357
> 
> 标签：wcf, jquery

我正在尝试设置一个简单的 WCF REST 服务，我们将能够从 jquery 调用该服务。当我在浏览器中访问 URL 时，我会收到回复。当我尝试直接发送 HTTPRequest（使用 Firefox 插件 RESTClient）时，我得到了回复。这些响应在我看来是正确的，包含标头和 JSON 字符串，显然没有别的。

但是，当我通过 jquery.get() 或 jquery.post() 调用调用相同的服务时，什么也没有发生。使用 jquery.ajax() 调用显示错误回调被调用，但对我来说，提供给错误回调的数据并没有给我关于为什么这不起作用的线索。

```
<a id="thelink" href="javascript:void(0)">GO</a>
<script type="text/javascript">
    function doAjax() {
        $.ajax({type: "POST",
                dataType: "json", // see note below
                url: "http://localhost:54459/MySimpleService.svc/json/24",
                success: function(jqXHR, textStatus) {
                             alert("success");
                         },
                error: function(jqXHR, textStatus, errorThrown) {
                             alert("error");
                         }
               });
        }
    $('#thelink').click(doAjax);
</script> 
```

注意：对于 dataType 参数，我已经尝试了所有的“text”、“json”、“jsonp”并将参数关闭。同样，我尝试过使用 GET 和 POST（修改 Web 服务以分别响应 GET 或 POST）。

在该端点调用的方法不会做任何应该失败的壮观事情——它只是将字符串连接到一个常量并返回（只是在这一点上进行测试，它显然会在未来做更多有趣的事情）

当我单击链接时，Firefox 显示返回 200 OK。

WCF 服务正在耗尽我的 Visual Studio 2010 调试环境。它会命中放置在响应此服务方法的方法中的断点。

我尝试从本地机器（端口 80）上的文件访问上面发布的 html，并将其托管在其他地方，结果相同。这可能是一个安全问题吗？

传递给错误回调的值似乎没有太大帮助：

*   jqXHR - readyState：0，状态：0，statusText：错误
*   文本状态-“错误”
*   错误抛出 - “”

那么，为什么当我在浏览器或 RESTClient 中调用 url 时，对于 GET 或 POST，我的服务似乎可以工作，但当我尝试从 jquery.ajax() 调用它时却失败了？

**编辑**：根据我收到的评论进行更多测试后，我尝试在与 Web 服务相同的端口上使用 javascript 托管页面，这表明成功。在我的真实世界场景中，我无法在同一个域/端口上托管客户端代码和 Web 服务。我假设这是一个安全模型问题——我在哪里允许这种访问（将域/端口列入白名单或其他）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:39:20.623

问题似乎出在我的 web.config 中；正如我们在评论中得出的那样，问题是跨域安全性之一。我已经在端点上使用了 webHttpBinding，但没有意识到需要对其进行配置：

```
<system.serviceModel>
    <bindings>
        <webHttpBinding>
            <binding name="webHttpBindingWithJsonP" crossDomainScriptAccessEnabled="true"/>
        </webHttpBinding>
    </bindings>
    ...
</system.serviceModel> 
```

设置`crossDomainScriptAccessEnabled="true"`似乎已经成功了。请注意，我已经将`<serviceMetadata httpGetEnabled="true"/>`其作为我的服务行为的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T21:29:21.113

确保您已将服务配置为从脚本客户端调用：在服务的 web.config 中添加几个元素：

```
<behaviors>
 <endpointBehaviors>
  <behavior name="webScriptEnablingBehavior">
  <enableWebScript/>
 </behavior>
</endpointBehaviors> 
```

更多信息在这里：http: [//msdn.microsoft.com/en-us/library/bb763177 (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/bb763177(v=vs.90).aspx)

希望能帮助到你，

# objective-c - 由于 addObject 不访问 setter，如何检查分配？

> ID：13634929
> 
> 赞同：2
> 
> 时间：2012-11-29T21:19:50.817
> 
> 标签：objective-c, cocoa-touch, cocoa, setter, getter-setter

我刚刚注意到调用`addObject:`NSMutableArray 不会访问该数组的设置器。

例如，对于 NSMutableArray `self.myArray`，`[self.myArray addObject:object]`不`[self setMyArray:array]`用于添加对象。

以前我一直在使用自定义 setter 和 getter 在分配之前检查分配；例如，如果我想要一个只接受 class 对象的数组`MyClass`，我会执行以下操作：

```
- (void)setMyArray:(NSMutableArray *)myArray
{
    for (id object in myArray)
    {
        if (![object isKindOfClass:[MyClass class]]) return;
    }
    _myArray = myArray;
}

- (NSMutableArray *)myArray
{
    if (!_myArray) _myArray = [[NSMutableArray alloc] init];
    _myArray = myArray;
} 
```

`addObject:`通过,`removeObject:`和其他可能绕过 setter 的类似功能更改数组时，如何实现相同的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T21:32:37.597

通常这种问题是为什么`NSMutableArray`通常优先避免的原因`NSArray`。

这是简单的解决方案，使用 NSArray 而不是 NSMutableArray：

```
self.myArray = [self.myArray arrayByAddingObject:foo]; 
```

但是，如果数组真的很大，就会导致性能问题。那么你有两个选择：

*   您可以在课堂上拥有自己的`addObjectToMyArray:`方法并始终使用它
*   您可以创建一个`NSArrayController`并使用它来访问您的阵列。它将实现键值观察和绑定以及所有这些东西。

`NSMutableArray`被设计为`addObject:`使用尽可能少的 CPU 指令执行，因此没有证明有任何方法可以通知外部代码添加了对象。你必须有一些其他的类围绕它。

不要尝试子类`NSMutableArray`化，因为它是一个“类集群”，使得子类变得极其复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:57:19.150

如果您要做的是确保数组中的对象属于特定类，那么[这个](https://stackoverflow.com/questions/5197446/nsmutablearray-force-the-array-to-hold-specific-object-type-only/5198040#5198040)对“NSMutableArray - 强制数组仅保存特定对象类型”问题的回答提供了执行此操作的代码。

如果您希望对分配进行其他检查，则可以使用该答案中的代码作为起点。

# forms - 从 Dart WebComponent 中的表单获取数据

> ID：13634931
> 
> 赞同：2
> 
> 时间：2012-11-29T21:19:56.540
> 
> 标签：forms, dart, web-component

我正在尝试从 Dart webComponent 中的表单获取数据。定义了以下 LoginComponent。单击提交按钮时不会调用 doLogin 函数。尝试在提交按钮上放置点击处理程序，但这也不起作用。

```
<html><body>
<element name="x-login" constructor="LoginComponent" extends="div">
<template >
    <form id='loginForm' on-submit='doLogin()'>
        <div>
            <h1>Login :</h1>
            <label for="loginName">Login name</label>
            <input type="text" required="required" data-bind="value:loginId" />
            <label>Password</label>
            <input type="password" required="required" data-bind="value:pwd" />
            <input type='submit' value="Login" />
            <input type='button' data-action="click:doCancel" value="Cancel" />               
            <span>{{errorMessage}}</span></div>
        </div>
    </form>      
</template>

<script type="application/dart">
  import 'package:web_components/web_components.dart';      
  import 'ouremr.dart';  
  import 'dart:html';

  class LoginComponent extends WebComponent {
  String errorMessage=""; 
  String loginId='';
  String pwd='';                     
  }                               

    void doLogin(e) {
    print("in do login");
      e.preventDefault();          
      print(loginId);
      print(pwd);

      }  

    void doCancel(e) {
    e.preventDefault();
      errorMessage=' ';         
      style.display='none';
    }                       
  }           
</script>
</element>
</body></html> 
```

提交表单时不会调用 doLogin 函数。尝试以下但也不起作用：

```
<input type='submit' value="Login" on-click='onLogin()'/> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T22:59:12.840

谢谢你的提问！看到你在玩 Dart 的 Web UI 库真的很酷。

我清理了您的代码，并进行了一些调整，它可以工作！

*   将 doLogin 等处理程序放入 LoginComponent 类
*   `</div>`在您的模板中有一个额外的
*   添加`$event`到您的点击表达式

代码见这里：

```
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <title>login_page</title>
    <link rel="components" href="login_form.html">
  </head>
  <body>
    <h1>login_page</h1>

    <x-login></x-login>

    <script type="application/dart">main() {}</script>
    <script type="text/javascript" src="https://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js"></script>
  </body>
</html> 
```

和

```
<!DOCTYPE html>
<html><body>
<element name="x-login" constructor="LoginComponent" extends="div">
<template >
    <form id='loginForm' on-submit='doLogin($event)'>
        <div>
            <h1>Login :</h1>
            <label for="loginName">Login name</label>
            <input type="text" required="required" data-bind="value:loginId" />
            <label>Password</label>
            <input type="password" required="required" data-bind="value:pwd" />
            <input type='submit' value="Login" />
            <input type='button' on-click="doCancel($event)" value="Cancel" />               
            <span>{{errorMessage}}</span>
        </div>
    </form>      
</template>

<script type="application/dart">
  import 'package:web_components/web_components.dart'; 
  import 'dart:html';

  class LoginComponent extends WebComponent {
   String errorMessage=""; 
   String loginId='';
   String pwd=''; 

    void doLogin(Event e) {
      print("in do login");
      e.preventDefault();          
      print(loginId);
      print(pwd);
    }  

    void doCancel(Event e) {
      e.preventDefault();
      errorMessage=' ';         
      style.display='none';
    }                       
  }          
</script>
</element>
</body></html> 
```

希望有帮助！

（注意，上面的代码适用于 0.2.7 版本的 dart_web_components）

# c - 多个控制台命令使代码崩溃

> ID：13634934
> 
> 赞同：0
> 
> 时间：2012-11-29T21:20:03.293
> 
> 标签：c, console, windows-console

嗨，我正在尝试让我的 C 控制台程序在不同颜色之间闪烁，以向用户表示警告。但是每次我启动程序时，下一个 fgets 都会使整个程序崩溃。

```
char vitesseOverdrive[5];
int vitesse = 0;
system("cls");
    printf("\n\n------------------------- Warning ! ------------------------\n");
    for (i=0;i<5;i++)
    {
        system("color 0c");
        Sleep(300);
        system("color 0a");
        Sleep(300);
    }
vitesse = SaisieNombre(vitesseOverdrive,sizeof(vitesseOverdrive)/sizeof(char)); 
```

什么可能导致程序崩溃？有没有更好的方法或者可以绕过它？

信息：只要我将这些行放在评论中，程序就可以正常工作

谢谢 ！

编辑：这里是 fgets() 函数

```
int SaisieNombre(char *chaine,int a)
{
    int i;
    int j;
    int nombre = 0;
    int work = 0;
    int marche = 0;
    int reussi = 0;
    char *endptr = NULL;
    char *place = NULL;

    do
    {
        work = 0;
        reussi = 1;
        marche = 1;
        for (i=0;i<a;i++)
        {
            chaine[i] = 0;
        }
        if (fgets(chaine,a,stdin) != NULL)
        {
            if (strchr(chaine,'\n') != NULL)
            {
                place = strchr(chaine,'\n');
                *place = '\0';
                for (j=0;j<a;j++)
                {
                    if (isdigit(chaine[j]) != 0 || chaine[j] == '\0' )
                    {

                    }
                    else
                    {
                        reussi = 0;
                    }
                }
            }
            else
            {
                printf("\nLe nombre est trop long\n");
                printf("\nVeuillez entrer un nombre : ");
                marche = 0;
                viderBuffer();
            }
        }
        else
        {
            viderBuffer();
            Sleep(2000);
            exit(0);
        }
        if (reussi != 1)
        {
            printf("\nLa donnee n'est pas un nombre\n\n");
            printf("Veuillez entrer un nombre : ");
        }

        nombre = strtol(chaine,&endptr,10);

        if (*endptr == '\0')
        {
            work = 1;
        }
        else
        {
            work = 0;
        }
    }while (work != 1 || reussi != 1 || marche != 1);
    return nombre;
} 
```

# c++ - 链表错误

> ID：13634935
> 
> 赞同：2
> 
> 时间：2012-11-29T21:20:05.430
> 
> 标签：c++, linked-list

我正在使用 C++ 编写一个程序，我应该在 hangman 中与计算机对战，并且我应该将特定的 .cpp 文件从使用向量转换为使用链接列表。虽然我似乎快要完成了，但我不断收到这个奇怪的错误，每次计算机错误地猜测一个字母时，我的程序都会崩溃。我通过调试器运行程序，然后在调用堆栈中弹出一条消息，上面写着“程序收到 SIGSEGV，分段错误”以及以下信息：

```
libstdc++6!_ZNSsC1ERKSs()
Guesser::guessACharacter(this=0x28feac) Line 56
main(argc=1, argv=0x7725a8)             Line 30 
```

崩溃似乎导致我的 Guesser::guessACharacter 函数的第 9 行出现问题，我尝试将来自当前节点的信息放入临时变量中。它看起来像这样：

```
string word = current->data; 
```

这是完整的代码：

```
#include "guesser.h"
#include "game.h"

#include <iostream>
#include <fstream>

using namespace std;

const std::string Guesser::alphabet = "abcdefghijklmnopqrstuvwxyz";

// Initialize the guesser for a game wit hthe indicated wordlength,
// using words from an indicated file.
Guesser::Guesser (int wordLength, const char* wordListFilename)
{
    for (int i = 0; i < 26; ++i)
        charactersTried[i] = false;

    string word;
    ifstream in (wordListFilename);
    while (in >> word)
    {
        if (word.size() == wordLength)
        {
            // word is of desired length
            if (word.find_first_not_of(alphabet) == string::npos) {
                // word contains only lowercse alphabetics
                //cerr<<"data before possible soln.:/n"<<possibleSolutions->data<<endl;
                possibleSolutions->data = word;
                //cerr<<"data after possible soln.:/n"<<possibleSolutions->data<<endl;
                possibleSolutions = possibleSolutions -> next;
            }
        }
    }
    in.close();

}

/**
 * Scan the words that are possible solutions so far, counting, for
 * each letter not already tried, the number of words with that letter.
 * Guess the letter that occurs in the most words.
 */
char Guesser::guessACharacter()
{
    int counts[26];
    for (int i = 0; i < 26; ++i)
        counts[i] = 0;

    // Count the number of words in which each letter can be found
    for(ListNode* current = possibleSolutions; current != NULL; current = current-> next)
    {
        //cerr<<"data before possible soln.:/n"<<possibleSolutions->data<<endl;
        string word = current->data;
        //cerr<<"data in word:/n"<<word<<endl;
        for (char c = 'a'; c <= 'z'; ++c)
        {
            if (!charactersTried[c- 'a'])
            {
                // Character c has not been tried yet
                if (word.find(c) != string::npos)
                    // c is in this word
                    ++counts[c - 'a'];
            }
        }
    }

    // Find the character that occurs in the most words
    char guess = ' ';
    int maxSoFar = -1;
    for (char c = 'a'; c <= 'z'; ++c)
    {
        if (counts[c - 'a'] > maxSoFar)
        {
            guess = c;
            maxSoFar = counts[c - 'a'];
        }
    }

    if (maxSoFar <= 0)
    {
        guess = 'a';
        while (charactersTried[guess-'a'])
            ++guess;
    }

    charactersTried[guess-'a'] = true;
    return guess;
}

/**
 * Following a successful guess of a letter in the word, make a pass through
 * the possibleSolutions, removing all words that do not contain the
 * guess character in the positions indicated in wordSoFar.
 */
void Guesser::characterIsInWord (char guess, const string& wordSoFar)
{
    ListNode* remainingSolutions = 0;
    for(ListNode* current = possibleSolutions; current != NULL; current = current-> next)
    {
        string wd = current-> data;
        bool OK = true;
        for (int k = 0; OK && k < wordSoFar.size(); ++k)
        {
            if (wordSoFar[k] == guess)
            {
                if (wd[k] != guess)
                {
                    OK = false;
                }
            }
        }
        if (OK)
        {
            //cerr << "Keeping " << wd << endl;
            remainingSolutions->data = wd;
            //possibleSolutions->next = remainingSolutions;
        }
    }
    possibleSolutions = remainingSolutions;

}

/**
 * Following a mistaken guess of a letter in the word, make a pass through
 * the possibleSolutions, removing all words that contain the
 * guess character.
 */
void Guesser::characterIsNotInWord (char guess)
{
    ListNode* remainingSolutions;
    for(ListNode* current = possibleSolutions; current != NULL; current = current-> next)
    {
        string wd = current->data;
        if (wd.find(guess) == string::npos)
        {

            remainingSolutions = new ListNode(wd, remainingSolutions);
        }
    }
    possibleSolutions = remainingSolutions;

}

/**
 * Guesser has lost the game. Look at the provider's actual word
 * and gripe a bit about losing.
 */
void Guesser::admitToLoss (std::string actualWord, const string& wordSoFar)
{
    bool match = actualWord.size() == wordSoFar.size();
    for (int i = 0; match && i < actualWord.size(); ++i)
    {
        match = wordSoFar[i] == Game::FILL_CHARACTER ||
        wordSoFar[i] == actualWord[i];
    }
    if (!match)
    {
        cout << "Ummm...your word '" << actualWord
        << "' does not match the patterh '"
        << wordSoFar <<"'.\nDid you make a mistake somewhere?"
        << endl;
    }
    else
    {
        for (int i = 0; match && i < actualWord.size(); ++i)
        {
            if (wordSoFar[i] == Game::FILL_CHARACTER
                && charactersTried[actualWord[i]-'a'])
            {
                cout << "Did you forget to mention the '"
                << actualWord[i]
                << "' in position " << i+1 << "?"
                << endl;
                return;
            }
        }

        for (ListNode* current = possibleSolutions;(!match) && current !=
             NULL; current = current-> next)
        {
            match = (actualWord == current->data);
            current = current->next;
            match = match && (current != 0);
        }
        //match = match && (current != 0);
        if (match)
        {
            cout << "OK, I might have guessed that eventually." << endl;
        }
        else
        {
            cout << "Interesting, I don't know that word. Are you sure you\n"
            << "spelled it correctly?." << endl;
        }

    }
} 
```

我觉得这个问题的答案就在我眼前，但我就是想不通。我想知道其他人是否可以很容易地发现我在这里做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T23:17:09.970

在以下代码片段中

```
ListNode* remainingSolutions = 0;
for(ListNode* current = possibleSolutions; current != NULL; current = current-> next)
{
        ....
        if (wordSoFar[k] == guess)
        {
            if (wd[k] != guess)
            {
                OK = false;
            }
        }
    }
    if (OK)
    {
        remainingSolutions->data = wd;
    }
}
possibleSolutions = remainingSolutions; 
```

`remainingSolutions`如果访问，将为 0 或 NULL，这可能是原因之一。

最后它也会将NULL分配给`possibleSolutions`（我假设它是链表的头部），所以下次你访问它时，也许通过调用`guessACharacter()`，它会导致分段错误。

# haskell - 简单的 Data.Serialize “字节太少”

> ID：13634938
> 
> 赞同：0
> 
> 时间：2012-11-29T21:20:16.150
> 
> 标签：haskell

不知道这个运行时错误的原因是什么：

```
hdr or err: too few bytes
From:   demandInput 
```

从以下：

```
module Main (main) where

import GHC.Word
import qualified Data.ByteString as BS
import Data.Serialize
import Data.Serialize.Get
import Data.Serialize.Put

data Header =
  Header { ty      :: Word8
         , len     :: Word16
         } deriving (Show)

instance Serialize Header where
  put (Header ty len) = do
    putWord8 ty
    putWord16be len
  get = do
    ty  <- getWord8    >>= return . fromIntegral
    len <- getWord16be >>= return . fromIntegral
    return (Header ty len)

main :: IO ()
main = do
  let bs = encode (Header 1 2)
  let str = case (runGet get bs) of
        Left err -> err
        Right fr -> fr
  putStrLn $ "hdr or err: " ++ str 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T21:47:04.527

```
let str = case (runGet get bs) of
        Left err -> err
        Right fr -> fr 
```

这里推断的类型`fr`是`String`，因为这是 的类型，`err`并且 case 表达式的替代项必须具有相同的类型。因此，它使用`Serialize`实例`String`来解码结果，这显然不是您想要的。

要解决此问题，首先添加`show`将解码结果转换为字符串，而不是将其强制为字符串本身。然后，添加一个类型注释来解决现在模棱两可的`fr`.

```
let str = case (runGet get bs) of
        Left err -> err
        Right fr -> show (fr :: Header) 
```

# python - 在 Python 中保留 str.replace 函数中的引号短语字符串

> ID：13634942
> 
> 赞同：1
> 
> 时间：2012-11-29T21:20:37.137
> 
> 标签：python, python-2.7

换句话说，我只想替换段落中不在引号内的单词：

```
import sys, os.path, win32com.client 
app = win32com.client.Dispatch('Word.Application') 

doc = app.Documents.Open(input_fil1) 
incontent = doc.Content.Text app.Quit() 

# want to replace what's is not inside the quote. 
otcontent = incontent.replace('No', 'Yes') 

print "New content:" print otcontent 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:47:25.980

根据引号分隔符对文本进行切片，并仅处理位置为 pair 的子字符串。

```
string = '''Even though "lorem ipsum" may arouse curiosity because of its resemblance to classical Latin, it is not intended to have meaning. If text is comprehensible in a document, people tend to focus on the textual content rather than upon overall presentation. Therefore publishers use lorem ipsum when displaying a typeface or design elements and page layout in order to direct the focus to the publication style and not the meaning of the text. In spite of its basis in Latin, the use of lorem ipsum is often referred to as greeking, from the phrase "it's all Greek to me", which indicates that something is not meant to be readable text (although greeking can also mean somewhat different things; see the article for details)'''

l = string.split('"')
new_l = []
for position,substring in list(enumerate(l)):
    if position%2 == 0:
        s = substring.replace('lorem','STACK OVERFLOW')
        new_l.append(s)
    else:
        new_l.append(substring)

new_string = '"'.join(new_l)

print new_string 
```

输出 ：

```
Even though "lorem ipsum" may arouse curiosity because of its resemblance to classical Latin, it is not intended to have meaning. If text is comprehensible in a document, people tend to focus on the textual content rather than upon overall presentation. Therefore publishers use STACK OVERFLOW ipsum when displaying a typeface or design elements and page layout in order to direct the focus to the publication style and not the meaning of the text. In spite of its basis in Latin, the use of STACK OVERFLOW ipsum is often referred to as greeking, from the phrase "it's all Greek to me", which indicates that something is not meant to be readable text (although greeking can also mean somewhat different things; see the article for details) 
```

第一个“lorem”被忽略，因为它在引用中。

# entity-framework - 流畅的 API 映射

> ID：13634944
> 
> 赞同：2
> 
> 时间：2012-11-29T21:20:48.240
> 
> 标签：entity-framework, entity-framework-5, fluent-interface

我有一个数据库，其中包含三个结构如下的表：

```
Table 1: Product
Columns: ProductID, PK
         SKU,       PK
         Name

Table 2: ProductImages
Columns: ImageID    PK
         SKU

Table 3: Images
Columns: ImageID    PK
         ImageContent 
```

暂时忽略该表`ProductImages`看起来处于多对多关系，除了唯一 PK 约束强制为一对一，因此是不必要的一对多对一表（它是一个现有的数据库）。

我想要以下`POCO`实体类：

```
public class Product
{
    public int ProductId { get; set; }
    public string SKU { get; set; }
    public virtual Image Image { get; set; }
} 
```

假设`Image`也是我的实体模型中的一个实体。

我`Entity Framework 5.0`首先使用代码，`Fluent API`并且我正在疯狂地试图弄清楚如何编写`ProductMap`类（它派生自`EntityTypeConfiguration<Product>`）。特别是关系映射。

呈现的 SQL 应类似于以下实体框架的版本：

```
select p.SKU, p.Name, p.ProductID, I.ImageID, I.ImageContent
from Products p
inner join ProductImages si on p.SKU = si.SKU
inner join Images i on i.ImageId = si.ImageId 
```

任何人能提供的任何帮助都会得到衷心的感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T22:09:28.587

在我开始使用[Entity Framework Power Tools之前，我遇到了同样的问题](https://www.google.by/search?q=entity%20framework%20power%20tools&aq=f&oq=entity%20fram&sugexp=chrome,mod=6&sourceid=chrome&ie=UTF-8)

使用它，您可以生成清晰的实体，如业务对象和映射类。帮助我创建惊人的数据访问层的好文章：[逆向工程师代码优先](http://romiller.com/2012/05/09/customizing-reverse-engineer-code-first-in-the-ef-power-tools/)

我认为映射应该如下所示：

```
public class ProductMap : EntityTypeConfiguration<Product>
{
    public ProductMap ()
    {
        // Primary Key
        this.HasKey(t => t.ProductId);

        // Properties
        this.Property(t => t.Name)
            .IsRequired()
            .HasMaxLength(256);

        // Table & Column Mappings
        this.ToTable("Product");
        this.Property(t => t.ProductId).HasColumnName("ProductID");
        this.Property(t => t.Name).HasColumnName("Name");

        // Relationships
        this.HasMany(t => t.Products)
            .WithMany(t => t.Images)
            .Map(m =>
            {
                m.ToTable("ProductImages");
                m.MapLeftKey("ProductID");
                m.MapRightKey("ImageID");
            });
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:26:50.230

我想到了。数据库结构和我的实体模型之间存在逻辑脱节。

productImages 表支持 *-1 映射，因此 Products POCO 类需要具有 ProductImages 的集合。那么实体需要配置如下：

```
public class ProductImagesMap : EntityTypeConfiguration<ProductImage>
{
        //Other field and key configuration...

        this.HasRequired(t=>t.Image).WithRequiredDependent();

        this.HasRequired(t => t.Product)
        .WithMany(t => t.ProductImage)
        .HasForeignKey(d => d.SKU);
}

public class ProductImage
{
    public int ImageId { get; set; }
    public string SKU{ get; set; }
    public virtual Image Image { get; set; }
    public virtual Product Product { get; set; }
}

public class Product
{
    public Product()
    {
        this.Features = new List<Feature>();
    }

    public int ProductId { get; set; }
    public string Name { get; set; }
    public string SKU{ get; set; }
    public virtual Brand Brand { get; set; }
    public virtual ICollection<ProductImage> ProductImages { get; set; }
} 
```

我努力尝试在 ProductMap 类中配置这种关系（作为父/母表中的产品），直到从 ProductImages 类中配置它才起作用，所以我的两个未解决的问题是：

1) 哪些规则决定了哪个实体驱动关系配置？

2）有没有办法可以将 Products POCO 类配置为具有 ICollection Images 属性并完全绕过 ProductImage 实体，因为 ProductImage 仅用作产品和图像之间的链接表？

# css - 在 Rails 3 中显示模型中的数据

> ID：13634946
> 
> 赞同：0
> 
> 时间：2012-11-29T21:20:51.813
> 
> 标签：css, ruby-on-rails-3, jquery

我很欣赏这个问题的答案可能很复杂，并且包括其他语言，如 jquery、css 等，但我只是想在正确的方向上获得一些指示，因为这是我第一次尝试这么复杂的东西

我正在构建一个小型食谱应用程序，并希望例如返回一个食谱的链接，然后单击将我带到该食谱的专用页面，但对于每个食谱，因此每个食谱都将显示在自己的页面上。这是一个非常基本的示例，但我可以例如在列表中返回结果

```
<% @desserts.each do |r| %>
<p><%= link_to r.dish_name %></p>
<ul>
<li>Country of Origin&nbsp;<% if r.country %><%= r.country.name %><br></li><% end %>
<li>Category <%= r.category %></li>
<li>Difficulty<%= r.difficulty %></li>
<li>Prep Time<%= r.preperation_time %></li>
<li>Ingredient List<%= ingredient_names(r.ingredients) %></li>
<li>How to prepare<%= preperation_steps(r.preperations) %></li>
<li><%= image_tag r.avatar.url(:thumb)%></li>
</ul> 
```

有没有人有任何可以帮助我的资源，或者我可以寻找例子的地方。指针将不胜感激，只是为了让我开始..

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:35:10.187

启动一个新的 rails 应用程序，只是为了学习一些技巧：

```
rails new playground .
cd playground 
```

为示例配方模型生成一个脚手架（不要担心这些字段与您的真实应用程序不完全匹配 - 仅用于学习）：

```
rails g scaffold Recipe dish_name:string country:string category:string difficulty:integer preparation_time:integer 
```

记下它生成的文件。您将希望能够很快再次找到模型、视图和控制器文件。

现在，迁移数据库并运行应用程序：

```
rake db:migrate
rails s 
```

如果您单击并添加一些虚拟食谱，您应该会看到行为与您所要求的相似。有一个包含食谱列表的表格，单击链接可以访问该对象的详细视图和/或编辑器。

因此，您现在可以遵循示例代码。查看简单交互recipe.rb 模型文件、recipes_controller.rb 文件和views/ 下的recipes/ 目录。`rake routes`如果您不确定哪个控制器操作或视图模板对应于任何给定的 url 路径，请运行。

这是非常基础的东西，所以如果你在那一点上仍然感到困惑，你需要花一些时间阅读一本关于 Rails 3 的书，并实际研究它的示例。

# c++ - 字符串类 = 运算符

> ID：13634947
> 
> 赞同：0
> 
> 时间：2012-11-29T21:20:54.510
> 
> 标签：c++, string, substring

我正在构建自己的字符串类，但在子字符串方面遇到了一些问题

```
// Substring operator
// reutns a substring from a given point
String String::Substring(int startPosition, int length) const{
    if(length==0)
        length = GetLength()+1; //Takes care of null terminator, im not worried about if length is imputed yet
    char* result = new char[length-startPosition]; // Assume it's not negative for the sake of just getting it to work, It would only be negative if it's user error
    for(int i=startPosition; i<length; i++)
        result[i] = Text[i]; //Since it will always  go from a given point to the end, the null terminator will transfer in the for loop.

    return result;
} 
```

Text 是字符串类的数据成员。我得到一个未处理的异常，访问冲突读取位置。

当我调试时，它正在经历这些过程

```
// Init-constructor for initializing this string with a C-string
String::String(const char* text){
    *this = text;
} 
```

和

```
// Assigns C-string to this String
String& String::operator = (const char* text){
    // Delete the existing string first
    delete[] Text;

    // +1 accounts for null terminator
    int trueLength = GetLength(text)+1;

    // Allocate new memory
    Text = new char[trueLength];

    // Copy all characters from source into Text
    for ( int i = 0; i < trueLength; i++)
        Text[i] = text[i];

    return *this;
} 
```

我无法弄清楚我做错了什么，感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:23:49.700

当您分配时，`length-startPosition`您很可能使用负数。

只用长度做新的：

```
char* result = new char[length]; 
```

编辑：

开始复制`i=0`并将最后一个复制字符之后的字节设置为空：

```
for(int i=0; i<length; i++)
    result[i] = Text[i+startPosition];

result[i] = '\0'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T21:26:29.473

`char*`考虑使用构造函数创建 String 对象时会发生什么：

```
String::String(const char* text){
  *this = text;
} 
```

尚未初始化任何成员，您调用`operator=`：

```
String& String::operator = (const char* text){
  // Delete the existing string first
  delete[] Text; 
```

你删除了 member `Text`，即使你还没有初始化它。删除未初始化的指针会产生未定义的行为。在这种情况下，该行为是一个例外。

`Text`在调用之前在构造函数中初始化为 null `operator=`，或者在构造函数中完成所有工作，而不是在赋值运算符中完成。

# java - 获得衍生测试以正确报告结果

> ID：13634948
> 
> 赞同：0
> 
> 时间：2012-11-29T21:21:04.953
> 
> 标签：java, junit, intellij-idea

我创建了一个自定义的 JUnit 4 运行器（扩展 BlockJUnit4Runner），其目的是运行其他测试在运行这些测试之前有效所必需的测试。例如，如果您正在测试某个文件 IO，则读/写测试将需要打开/关闭测试才能正常工作。

这可以使用任意数量的要求正确运行测试，并且对于不需要其他任何东西的测试返回正常报告，但是当我运行一个确实需要另一个测试时，我得到“完成：1 of 2”，并且事件日志说“测试通过：1 通过”。即使要求的测试（第二个运行）失败也是如此。

```
@Override
protected void runChild(FrameworkMethod method, RunNotifier notifier) {
    if (!alreadyRunMethods.containsKey(method.getName())) {
        boolean requiredMethodsPassed = true;
        for (Annotation anno : method.getAnnotations()) {
            if (anno instanceof Requires) {
                requiredMethodsPassed = runRequiredMethods((Requires) anno, notifier, method);
                break;
            }
        }
        if (requiredMethodsPassed) {
            super.runChild(method, notifier);
        }else{
            notifier.fireTestAssumptionFailed(new Failure(describeChild(method), new AssumptionViolatedException("Required methods failed.")));
        }
    }
}

private boolean runRequiredMethods(Requires req, RunNotifier notifier, FrameworkMethod parentMethod) {
    boolean passed = true;
    for (String methodName : req.value()) {
        FrameworkMethod method = methodByName.get(methodName);
        if (method == null) {
            throw new RuntimeException(String.format("Required test method '%s' on test method '%s' does not exist.", methodName, parentMethod.getName()));
        }
        runChild(method, notifier);
        Boolean methodPassed = alreadyRunMethods.get(method.getName());
        methodPassed = methodPassed == null ? false : methodPassed;
        passed &= methodPassed;
    }
    return passed;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:26:02.887

您的自定义运行器应该预先定义`org.junit.runners.ParentRunner#getDescription`，然后 IDEA 将正确显示树。

# android - Android 对视口元标记属性的支持？

> ID：13634951
> 
> 赞同：1
> 
> 时间：2012-11-29T21:21:14.967
> 
> 标签：android, meta-tags, viewport

对于快速和肮脏的移动开发，我们经常建议主要为现在想要支持平板电脑体验的手持设备设计的 html5 应用程序将平板电脑的视口放大一点。

用户体验的论点是，该应用程序已经为手持设备提供了一个简化的流线型界面，因此不需要为平板电脑重新安排页面。

对于 iOS，我们添加它来处理它：

```
<meta name="viewport" content="width=device-width*.75, initial-scale=1.5, minimum-scale=1.5, maximum-scale=1.5, user-scalable=no"> 
```

所以，相同的代码库，但在 iPad 上，界面放大了 150%。

相同的逻辑是否应该在 Android 设备上正常工作？

我们的原型设计还很早，所以最终会直接对其进行测试，但目前我无法使用真正的安卓平板电脑。然而，我们收到了一些二手报告，称人们没有在他们的安卓平板电脑上看到放大的界面。

# linq - 如何在实体列表转换为视图模型之前对其应用过滤/分页，以避免在内存中实现整个列表？

> ID：13634952
> 
> 赞同：1
> 
> 时间：2012-11-29T21:21:19.820
> 
> 标签：linq, asp.net-mvc-4, asp.net-web-api, odata

我正在创建一个供移动应用程序以及我们的 ASP.NET MVC4 webapp 使用的 WebAPI。我们正在使用一个庞大的数据库，因此我们需要尽可能避免实体化实体列表。我们的 WebAPI 返回 JSON。

情况很简单...收到了对许可证列表的请求，但必须对其进行分页，因为有 500,000 条记录可以返回。在将实体列表转换为返回的视图模型列表之前，如何将分页/过滤应用于实体列表？

这是我正在使用的一些测试代码...

```
 // Get the list of licenses, but page them.
    // GET api/<controller>
    //[Queryable] 
    public IQueryable<LicenseViewModel> Get()
    {
        Mapper.CreateMap<LicenseEntity, LicenseViewModel>();
        Mapper.AssertConfigurationIsValid();

        List<LicenseViewModel> vms = new List<LicenseViewModel>();
        using (var repo = new LicenseRepository())
        {
            // Get the IQueryable<LicenseEntity> list...
            // IS THERE SOME WAY TO APPY PAGING/FILTERING HERE?
            var entities = repo.List();

            // Convert them to viewmodels.  ARGGG! This will materialize the huge list
            // if we cannot applyfiltering/paging in the previous step.
            foreach (var item in entities)
            {
                var vm = Mapper.Map<LicenseEntity, LicenseViewModel>(item);
                list.Add(vm);
            }
        }

        return vms.AsQueryable();
    } 
```

我尝试了以下操作，但是当我尝试展开列表并查看结果时收到“无法评估儿童”错误。

```
 using (var repo = new LicenseRepository())
            {
                // Get the list of entities...
                var list = repo
                    .List()
                    .Select(x => Mapper.Map(x, new LicenseViewModel()));

                return list;
            } 
```

感谢您的时间和建议，

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:55:47.210

// 获取 LicenseEntity 对象的 IQueryable 列表。var entityList = LicenseRepository.List(适配器);

// 将列表转换为 // LicenseViewModel 对象的 IQueryable 列表。var vmList = entityList.Select(x => AutoMapper.Mapper.Map(x, new LicenseViewModel()));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T07:17:04.880

我找到了将域实体投影到视图模型的解决方案。如果您遇到与我相同的问题，请查看以下链接：

[http://lostechies.com/jimmybogard/2011/02/09/autoprojecting-linq-queries/](http://lostechies.com/jimmybogard/2011/02/09/autoprojecting-linq-queries/) http://www.devtrends.co.uk/blog/stop-using-automapper-in-your-data-access-代码

顺便说一句，在一个我的域实体中，我有一个带有一些“计算”属性的部分类......其值是从数据库记录中的其他字段生成的属性。这些不能在域实体中，因为它们会干扰上述解决方案。我将它们移至我的 ViewModel 类，这是真正需要它们的地方，一切都很好。

希望这些信息能帮助...

麦克风

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T22:24:43.043

不确定这如何映射到 Web API，但主体是相同的。

使用 WCF Dataservices 本质上是相同的，但我相信目前有一些额外的功能，您可以将页面大小设置如下：

```
 public static void InitializeService(DataServiceConfiguration config)
 {
        config.SetEntitySetPageSize("*", 20);
 } 
```

其中“*”是插入您的实体集名称。

通过设置此项，Feed 将包含一个继续令牌，客户端可以使用该令牌请求下一页。

在您的存储库中，您可能需要根据您的数据源手动处理 Take 和 Skip 函数。

如果 URL 包含 ?$top=10&$skip=0 那么您可以将其添加到来自数据源的请求中，请参见下面的示例。

```
using (var repo = new LicenseRepository())
{
     // Get the list of entities...
     var list = repo                        
     .Select(x => Mapper.Map(x, new LicenseViewModel()))
     .Skip(0)
     .Take(10);
     return list;
} 
```

显然，根据 URL 的 $top 和 $skip 元素中的内容更改 skip/take 值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T03:14:15.047

对于分页，您可以使用我们最近添加的 ResultLimit 功能。你可以说，

```
[Queryable(ResultLimit=10)] 
```

一次只退回 10 件商品。

而且，最酷的部分是我们还计算了下一页链接。下一页链接是客户端获取下一页应遵循的链接。如果您使用的是 ODataFormatter，则下一页链接默认包含在响应中。如果您使用不同的格式化程序，我们只计算链接但不将其放入响应正文中，因为我们不知道它的格式。您可以编写消息处理程序或操作过滤器来检索链接

```
Request.Properties['MS_NextPageLink'] 
```

并将其写入响应正文或响应标头或客户期望的任何位置。

# algorithm - Radixsort的解释

> ID：13634958
> 
> 赞同：1
> 
> 时间：2012-11-29T21:21:54.097
> 
> 标签：algorithm, sorting, radix-sort

您好我想了解基数排序的逻辑，我指的是维基百科的代码。这是接收数组的排序的排序函数，以及元素的数量。虽然代码运行得很好，但我无法理解代码的逻辑。在 while 循环中，我们首先初始化一个 10 位的桶数组，其中包含 1 的数量，以及数组的第一个和第二个索引的 2。但在那之后，很难理解它想要做什么。

```
static void sort(int a[],int n)
{
int i=0;
int m =a[0];
int b[]=new int[n];
int exp=1;

      for (i = 0; i < n; i++)
      {
        if (a[i] > m)
          m = a[i]; 
      }

      while (m / exp > 0)
      {
        int bucket[] =new int[10];
        for (i = 0; i < n; i++)
          bucket[a[i] / exp % 10]++;

        for (i = 1; i < 10; i++)
          bucket[i] += bucket[i - 1];
        for (i = n - 1; i >= 0; i--)
          b[--bucket[a[i] / exp % 10]] = a[i];
        for (i = 0; i < n; i++)
          a[i] = b[i];
        exp *= 10;

          System.out.println("\nPASS   : ");
          for(int c:a){
        System.out.print(c+",");
    }
          System.out.println();
      }

} 
```

谁能帮我这个？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:57:00.427

即使您知道基数排序的工作原理，这段代码也需要花费一些精力来理解。首先理解基数排序的抽象描述比尝试从这段代码中对其进行逆向工程更容易。

关于代码的一些技术观察：

*   外部循环控制`exp`从 1,10,100... 到 10 的连续幂，并确定我们当前排序的数字的哪个十进制数字。
*   实际排序到桶中是两次。第一个内部循环计算每个桶的计数，第三个将数字分布到各个桶中（`a[]`在每个桶中和每个桶内从 n 到 1。）
*   存储桶表示为辅助`b[]`数组中的间隔（其偏移量在第二个内部循环中根据第一个内部循环的存储桶计数预先计算）
*   在第二个循环之后`bucket[d]`是区间上端（不包括）的索引，该区间将存储活动数字（我们排序的数字）为 的数字`d`。桶间隔从该端向下填充。

# php - magento 扩展的许可证密钥

> ID：13634961
> 
> 赞同：0
> 
> 时间：2012-11-29T21:22:13.140
> 
> 标签：php, magento, license-key

> **可能重复：**
> [许可和保护 php 脚本](https://stackoverflow.com/questions/1157425/license-and-protect-php-script)

我有一个自定义的 Magento 扩展，我想为它创建一个许可证密钥（如 Windows 密钥）。

我将使用`include`远程服务器的方法来检查许可证密钥（我不确定这是最佳选择）。

当我必须使用包含方法来检查许可证密钥时，我想如果我每次使用扩展时都这样做，网站加载会很慢。

你能给我一些想法我该怎么做，或者可以给我另一个决定的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T23:06:38.887

对此没有很好的解决方案。Windows 许可证密钥有效，因为 Windows 是二进制可执行文件。查看 Window 的机器代码并提取许可证密钥的规则并非易事。

正如您所提到的，由于网络延迟问题，电话回家解决方案将无法工作。除此之外，从分机中剥离电话回家检查将非常容易。

您可以查看 Ion Cube 或 Zend Guard Loader 等应用程序，它们允许您使用类似二进制的机器代码保护某些 PHP 文件。这些方法的问题是您需要您的客户安装一个额外的 PHP 扩展来使用您的代码。除了帮助客户安装这些扩展的麻烦之外，这些扩展还带来了性能开销。

你最好的方法？如果您要出售扩展程序，请设定一个公平但较高的价格。相信你的客户，也许在一些安装程序中添加一个微不足道的许可证密钥，并将正在进行的扩展升级与许可证注册联系起来。此外，如果它与您正在解决的问题相关，则放弃添加人们需要付费的云组件的扩展是另一种选择。

如果您真的想销售与许可证密钥 ala-windows、Indie Mac 开发等紧密相关的软件，那么 PHP 不是合适的目标平台。

# algorithm - 缩短 14 位以上的大数字

> ID：13634963
> 
> 赞同：0
> 
> 时间：2012-11-29T21:22:16.863
> 
> 标签：algorithm, math, optimization, base64

我正在为一个项目使用一种奇怪的专有脚本语言。我需要为用户提供一个大（14+ 位）数字，他们将不得不重新输入另一个系统（用于以后的数据关联）。让用户（手动）输入一个没有错误的大数字几乎是不可能的，而且无疑会剥夺用户的权利。

我一直在尝试提出一个解决方案来使用 base64 缩短该数字，但我发现的所有代码对于这种脚本语言来说都是复杂的。是否有一个简单的数学算法（无损压缩）我可以用来使大量更小？结果是字母数字很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:31:58.427

我认为你有更多的用户体验问题而不是数学问题。为什么不将要记住的数字分成2。一般人能够用他们的短期记忆记住和背诵7个数字。当然，它是基于旧的研究并取决于年龄和心智能力。

[http://en.wikipedia.org/wiki/The_Magical_Number_Seven,_Plus_or_Minus_Two](http://en.wikipedia.org/wiki/The_Magical_Number_Seven,_Plus_or_Minus_Two)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T19:30:00.030

谢谢大家的精彩讨论。我最终结合了你的许多建议。

我结束了使用base36（十六进制）对其进行编码并将字符串分隔成更小的块。

biziclop - 如果您提交了与评论相反的答案，我会接受它。你的 js 代码让我想到了正确的方向......谢谢！

# ruby - 系统方法的任意数量的参数

> ID：13634964
> 
> 赞同：1
> 
> 时间：2012-11-29T21:22:17.573
> 
> 标签：ruby, command

我想将命令传递`wget`给 Ruby 的[`system`](http://ruby-doc.org/core-1.9.3/Kernel.html#method-i-system)方法（第二个版本，它不会将命令传递给 shell。）但是，参数的数量（要下载的网站）取决于用户想要什么。有没有办法做类似的事情，将一个带有任意数量参数的参数数组传递`[site1 site2 ...]`给这个方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T23:02:29.870

`*`调用方法（包括方法）时，可以在数组前面使用splat 运算符来扩展它`system`。

```
sites = %w< site1 site2 ... >
system 'wget', *sites 
```

# c# - 根据存储在数据库中的状态，在 Telerik 网格列中显示图像

> ID：13634966
> 
> 赞同：0
> 
> 时间：2012-11-29T21:22:26.333
> 
> 标签：c#, asp.net-mvc, telerik-grid, telerik-mvc

我有一个强类型视图，我在 Telerik 网格的一列中显示带有删除图像的顾问。如果顾问处于活动状态或处于非活动状态，我会在其中存储一个“状态”列。我想要做的是，如果顾问具有“活动”状态，则显示灰色删除图像（禁用，无法删除顾问，因为他/她处于活动状态），否则显示红色删除图像（启用，可以删除顾问因为他/她不活跃）。我在下面的设计可以做到这一点吗？

控制器动作：

```
public ActionResult Index()
{
    ViewData.Model = db.Consultants.OrderBy(p => p.ConsultantName);
    return View();
} 
```

看法：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<IEnumerable<UI.Models.Consultants>>" %>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

                <table>
                    <tr>
                        <td><% Html.GridFor("Consultants", "Consultants", "Consultants", GridOptions.EnableSelecting, Model).Columns(column =>
                                {
                                    column.Bound(o => o.Code).Title("Code");
                                    column.Bound(o => o.Description).Title("Description");                                  
                                 column.Template(o =>
            {
                %>
                <img src="/Content/img/delete.png" alt="consultant" title="consultant" onclick="javascript:deleteConsultant(<%= o.consultantKey %>)" />
                <%
            }).Title("").ClientTemplate(
                      "<img src=\"/Content/img/delete.png\" alt=\"consultant\" title=\"consultant\" onclick=\"javascript:deleteConsultant(<#= ProjectKey #>)\"/>");
            column.Bound(o => o.consultantKey).Hidden();
        }).Render();            
                            %>
                        </td>
                    </tr>
                </table>
</asp:Content> 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:29:34.187

是的，有可能。您可以在模板中包含条件逻辑。这是一个例子：

```
columns.Template(o => 
{
     if (o.Foo)
     {
       %> 
           <img src="img1.gif" />
       <%
     }
     else
     {
       %>
           <img src="img2.gif" />
       <%
     }
}).ClientTemplate("<# if (Foo) { #> <img src='img1.gif'/> <# } else { #> <img src='img2.gif' /> <# } #>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T22:14:54.330

可能是这样的：

```
<%
String clientTempate;

if(Model.Active.Equals("Active"){
  clientTemplate = "<img src=\"/Content/img/delete.png\" alt=\"consultant\" title=\"consultant\" onclick=\"javascript:deleteConsultant(<#= ProjectKey #>)\"/>"
}
else{
  clientTemplate = "<img src=\"/Content/img/grayedout-delete.png\" alt=\"consultant\" title=\"consultant\" />"

}
%>

<% Html.GridFor("Consultants", "Consultants", "Consultants", GridOptions.EnableSelecting, Model).Columns(column =>
                                        {
                                            column.Bound(o => o.Code).Title("Code");
                                            column.Bound(o => o.Description).Title("Description");                                  
                                         column.Bound(o => o.consultantKey).Title("").ClientTemplate(clientTemplate);
                    column.Bound(o => o.consultantKey).Hidden();
                }).Render();            
                                    %> 
```

# c++ - C++ 中的动态类创建

> ID：13634973
> 
> 赞同：0
> 
> 时间：2012-11-29T21:23:13.000
> 
> 标签：c++, class, dynamic, creation

我有这个小程序，我需要动态创建 Class 对象。请参阅下面的评论。

```
#include <conio.h>

#include "student.h"
#include "teacher.h"

int main() {
  short choose;

  do {

    std::cout << "\n1 - Insert student";
    std::cout << "\n2 - Insert teacher";
    std::cout << "\n3 - Show students";
    std::cout << "\n4 - Show teachers";
    std::cout << "\n5 - Exit";
    std::cout << "\n--> ";
    std::cin  >> choose;

    Student *students;

    switch (choose) {
    case 1 :
      // When user choose option 1, I would like to create
      // a new object "Student", so...
      students = new Student();
      // But if user choose 1 another time, how I create
      // another object "Student" ?
      // Could I do something like this?
      //  students = new Student[student_counter];
      break;
    }

  } while (choose != 5);

  system("pause");
  return 0;
} 
```

学生类有一个构造函数。谢谢你。如果需要什么就告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:25:03.100

只需使用`std::vector<Student>`. 根本不需要动态分配：

```
std::vector<Student> students;

do {
  switch (choose) {
    case 1 :
      students.push_back(Student());
      break;
  }
}while(...) 
```

如果您**需要**使用动态分配，因为它是分配的一部分，只需使用 a`std::vector<Student*>`和`students.push_back(new Student)`。之后您必须手动释放内存。

# perl - TCP端口随着perl LWP在循环中不断变化

> ID：13634976
> 
> 赞同：1
> 
> 时间：2012-11-29T21:23:21.310
> 
> 标签：perl, port-number

我正在使用 HTTP 分析器循环分析一个小型 LWP 用户代理，我注意到每次访问我的端口的 URL 都在不断变化。

虽然我在 VB.Net 中也制作了一个小脚本，`httpwebrequest`并且在访问 URL 10 次时并没有改变我的端口号。

使用 perl 时是否可以保留静态 ip:port？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:49:12.580

对于 HTTP 客户端：

```
use LWP::Protocol::http qw( );

@LWP::Protocol::http::EXTRA_SOCK_OPTS = (
    LocalPort => $port,
); 
```

如果您还想使用特定的界面，

```
@LWP::Protocol::http::EXTRA_SOCK_OPTS = (
    LocalAddr => $ip,
    LocalPort => $port,
); 
```

当然，如果端口已在使用中，您可能会遇到问题，如果您只是将其用于另一个连接，则很可能会出现这种情况。

```
use LWP::Protocol::http qw( );
use LWP::UserAgent      qw( );

my $port = 12456;
@LWP::Protocol::http::EXTRA_SOCK_OPTS = (
    LocalPort => 12456,
);

my $ua = LWP::UserAgent->new();
print $ua->get('http://www.example.com/show_port')->content for 1..2; 
```

输出：

```
>script.pl
12456
Can't connect to www.example.com:80 (10048)

LWP::Protocol::http::Socket: connect: 10048 at .../LWP/Protocol/http.pm line 51.

>perl -E"say $^E=10048"
Only one usage of each socket address (protocol/network address/port) is normally permitted 
```

更有可能的是，端口没有被重用，连接被重用。`keep_alive => 1`您还可以尝试通过传递给 LWP::UserAgent 构造函数来重用连接。

```
use LWP::UserAgent qw( );

my $ua = LWP::UserAgent->new( keep_alive => 1 );
print $ua->get('http://www.example.com/show_port')->content for 1..2; 
```

输出：

```
57842
57842 
```

# java - 为什么对存储过程的 JDBC 调用将调用包装在大括号中？

> ID：13634983
> 
> 赞同：4
> 
> 时间：2012-11-29T21:23:38.227
> 
> 标签：java, jdbc

在 Java 中，我们会做类似的事情： `stmt.execute("SELECT * FROM users");` 但是对于像这样的存储过程： `stmt.execute("{CALL createUser(?,?,?,?)}");`

为什么我们需要`{`以及`}`在普通 SQL 中不需要的时候？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T21:42:28.477

JDBC 是从 ODBC 派生的。实际上，第一个 jdbc 驱动程序是 jdbc 到 odbc 的桥接器。所以使用 ODBC 语法是有意义的。大括号本身表示函数调用，存储过程基本上是用户定义的函数，因此它们用大括号包裹。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T21:28:36.280

花括号是存储过程的转义语法。当 JDBC 驱动程序遇到 时`{call createUser(?,?,?,?)}`，它会将这种转义语法翻译成数据库用来调用存储过程的原生 SQL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-27T16:58:15.920

这是有关 JDBC 转义语法的官方文档： [https ://docs.oracle.com/cd/E13157_01/wlevs/docs30/jdbc_drivers/sqlescape.html](https://docs.oracle.com/cd/E13157_01/wlevs/docs30/jdbc_drivers/sqlescape.html)

以及一些特定于供应商的描述：

*   [甲骨文](https://docs.oracle.com/cd/B19306_01/java.102/b14355/apxref.htm#i1005144)
*   [微软 SQL 服务器](https://docs.microsoft.com/en-us/sql/connect/jdbc/using-sql-escape-sequences)
*   [PostgreSQL](https://jdbc.postgresql.org/documentation/head/escapes.html)
*   [德比](https://docs.oracle.com/javadb/10.8.3.0/ref/rrefjdbc1020262.html)

# c++ - wxWidgets - wxListbook 列表的宽度

> ID：13634986
> 
> 赞同：1
> 
> 时间：2012-11-29T21:23:45.357
> 
> 标签：c++, list, user-interface, width, wxwidgets

我设置了 wxListbook，我想为显示页面标题的左侧列表设置静态宽度。目前，当没有添加页面时，它没有任何宽度，当添加页面时，宽度变为最长标题间距。

空的：![在此处输入图像描述](../Images/65bead3245407ef349897854334d8f30.png)

新增页面：![在此处输入图像描述](../Images/253a33208eb48d9b0f1559d4ca2edd2b.png)

我尝试了几件事，但没有运气。

首先，我尝试设置列宽，但没有发现任何区别：

```
listBook = new wxListbook( this, ID_LISTBOOK, wxDefaultPosition, wxDefaultSize, wxLB_LEFT );

wxListView* listBookListView1 = listBook->GetListView();
listBookListView1->SetColumnWidth(0,400); //tried 0,1,-1 for the first parameter 
```

然后，我尝试了 SetMinSize，但同样没有区别：

```
listBook = new wxListbook( this, ID_LISTBOOK, wxDefaultPosition, wxDefaultSize, wxLB_LEFT );
    listBook->SetMinSize(wxSize(400,500)); 
```

我也试过 SetSize，但没有区别：

```
listBook = new wxListbook( this, ID_LISTBOOK, wxDefaultPosition, wxDefaultSize, wxLB_LEFT );
listBook->SetSize(wxSize(200,200)); 
```

这样做的正确方法是什么？帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:48:04.640

在 wxTreebook 上遇到了类似的问题，甚至为此准备了补丁，但它被拒绝了，因为可能会破坏自定义书籍控件的功能。默认情况下，所有自定义书籍控件都有与内部选择器控件（wxListView、wxTreeCtrl 等）布局相关的奇怪行为。如果你愿意，我可以尝试找到 wxTreebook 的代码并将其发送给你。也许你会发现那里有一些有用的东西。

您可以尝试解决的可能解决方案：

*   将包含多个空格的假项目添加到列表簿中，然后显示框架，然后删除该项目（快速而肮脏，但我几乎可以肯定这会起作用，并且列表视图的宽度将不为零）
*   自己打补丁wxListbook的源代码（wxWidgets是开源的，你可以很方便地修改源代码，然后创建补丁并在升级到新版本的wxWidgets后重新使用）
*   显示框架并调用 Layout() 后尝试更改内部 wxListView 的 MinSize

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T00:28:10.240

当前`wxListbook`始终使列表适合其内容。就我个人而言，我真的想知道为什么这会是一个问题，特别是为什么你想要一个`wxListbook`没有任何页面的页面以及它有什么用处。但是，原则上，设置列表控件的最小尺寸应该可以工作，如果你可以改变 wxWidgets 来做到这一点，我们很乐意应用一个[补丁](http://trac.wxwidgets.org/wiki/HowToSubmitPatches)来做到这一点。

但是现在没有办法做到这一点，对不起。

# java - 使用哨兵控制循环

> ID：13634992
> 
> 赞同：1
> 
> 时间：2012-11-29T21:23:58.603
> 
> 标签：java, while-loop, sentinel

我在要求用户提示名称并将该名称回显到屏幕上直到用户输入哨兵值的练习时遇到问题。我知道这是一个哨兵控制的循环，但我坚持这样一个事实，即我正在处理输入名称而不是整数。我试图遵循我书中的一个程序，它只解释了如何使用整数而不是字符串“名称”的哨兵值。我尝试查找此答案并看到类似 name.equals("stop") 的内容，如果它甚至适用于此。并在 API 上查找它，但仍然没有发现它有帮助。我想看看它是如何作为一个整体应用的。
注意：这是我到目前为止所做的，我想知道我离我有多远。

```
import java.util.*;

public class SentinelControlledLoop {

    static Scanner console = new Scanner(System.in);
    static final int SENTINEL = #;

    public static void main (String[] args) {

        String name;
        System.out.println("Enter a name " + "ending with " + SENTINEL); 
        String name = reader.next();

        while (!name.equals(“stop”)) {
            name = reader.next();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T22:28:21.037

```
do {
    name = reader.next();
} while (name.lastIndexOf(SENTINEL) == -1); 
```

我假设名称中不能包含哨兵。在其他情况下，更改`== -1`为

```
!= length(name) - 1 
```

PS。你声明`String name`了两次。

PS2。更好的条件：

```
while (!name.endsWith(String.valueOf(SENTINEL)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-26T08:05:14.463

**哨兵for循环的使用：**

> 在哨兵控制的循环中，更改部分取决于来自用户的数据。在 for 语句中这样做很尴尬。因此，for 语句中省略了更改部分，并将其放在方便的位置。

```
import java.util.Scanner;

class EvalSqrt
{
  public static void main (String[] args )
  {
    Scanner scan = new Scanner( System.in );
    double x;

    System.out.print("Enter a value for x or -1 to exit: ")  ;
    x = scan.nextDouble();

    for (    ; x >= 0.0 ;   )  
    {
      System.out.println( "Square root of " + x + " is " + Math.sqrt( x ) ); 

      System.out.print("Enter a value for x or -1 to exit: ")  ;
      x =  scan.nextDouble();
    }
  }
} 
```

更多详情：[https ://chortle.ccsu.edu/java5/Notes/chap41/ch41_13.html](https://chortle.ccsu.edu/java5/Notes/chap41/ch41_13.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-26T20:27:00.260

> 要求用户提示一个名称并将该名称回显到屏幕上的练习，直到用户输入一个标记值。

我希望看到更多类似的东西：

```
 public static void main(String[] args) {
    Scanner reader = new Scanner(System.in);
    String SENTINEL = "stop";
    String name;
    do { 
      System.out.print("Enter a name ('" + SENTINEL + "' to quit): "); 
      name = reader.nextLine();
      if (!name.equals(SENTINEL)) {
        System.out.println(name);
      }
    } while (!name.equals(SENTINEL));
    System.out.println("Goodbye!");
  } 
```

# jsf - 无法将请求范围 bean 作为会话范围 bean 的托管属性注入

> ID：13634994
> 
> 赞同：1
> 
> 时间：2012-11-29T21:24:04.823
> 
> 标签：jsf, jsf-2

我在尝试进行多个 bean 注入时遇到 JSF 2 问题，我收到此错误：

```
GRAVE: JSF ne pourra pas créé le bean géré contact_ lorsqu'il sera demandé.  
Les problèmes suivants ont été détectés :
 - Erreur inattendue lors du traitement du bean géré organisme_
 29 nov. 2012 20:56:23 com.sun.faces.application.view.FaceletViewHandlingStrategy handleRenderException
GRAVE: Error Rendering View[/index.xhtml]
com.sun.faces.mgbean.ManagedBeanCreationException: Impossible de créer le bean géré contact_.  Les problèmes suivants ont été détectés :
 - Erreur inattendue lors du traitement du bean géré organisme_ 
```

这是豆类代码：

```
@ManagedBean (name="organisme_")    
@SessionScoped    
public class Organisme_  implements java.io.Serializable  {    
private static final long serialVersionUID = 4579411552477526993L;    
    private int idOrganisme;    
    @ManagedProperty(value="#{adresse_}")    
    private Adresse_ adresses_organisme;    
private String nomOrganisme;    
     private String telephone;    
     private String fax;    
     private Integer effectif;    
     private String message;    
     private String web;    
//getter and setter 
```

和

```
@ManagedBean(name="contact_")    
@RequestScoped    
public class Contact_  implements java.io.Serializable {    
private static final long serialVersionUID = 493917875769565440L;    
    private int idContact;    
     @ManagedProperty(value="#{organisme_}")    
     private Organisme_ organisme;    
 @ManagedProperty(value="#{adresse_}")    
     private Adresse_ adresses;    
     private String nomContact;    
     private String prenomContact;    
     private String email;    
     private String password;    
//getter and setter    
public String Connexion() {return "success";
} 
```

和

```
@ManagedBean(name="adresse_")    
@RequestScoped    
public class Adresse_  implements java.io.Serializable {    
private int idAdresse;    
    private String pays;    
//getter and setter 
```

索引页包含：

```
commandLink action="#{contact_.Connexion()}"  style=" cursor: pointer; text-decoration: none;" </blink> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T21:28:08.070

`addresse_`是一个`RequestScoped`豆子。您不能在`RequestScoped`bean 中注入`SessionScoped`bean（您将有很多请求及其相关 bean，只有一个会话及其 bean，注入一个`addresse_`忽略所有其他实例的特定实例是没有意义的）。

# backbone.js - 如何在高图中放置 div / 文本

> ID：13634997
> 
> 赞同：0
> 
> 时间：2012-11-29T21:24:08.820
> 
> 标签：backbone.js, highcharts

我正在使用高图表.. 根据人们在图表上所做的选择，我想在图表中显示不同的文本。我怎样才能做到这一点？

![在此处输入图像描述](../Images/41814c3ec37c9cfbfeb3551164b573f8.png)

```
handleRefresh : function(ChartModel) {
        var chartOptions = new ChartTheme();
.......
.......
var chart = new Highcharts.Chart(chartOptions.options);
}

updateColumnSelection : function(index){
  var data = this.model.getData(index);
  _.each(data.messages, function(msg) {
    //display message
    //pool: yes
    var dataPlacement = $("#messages");
dataPlacement .html('');
    dataPlacement.append(msg);

 }
} 
```

最好的方法是，我不知道是否可能，但我希望在图表中有一个 div （占位符），并在每次选择时更新它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:29:13.073

您应该看一下参考资料，[在这里](http://api.highcharts.com/highstock#object-Element)您可以看到如何向图表添加新元素。使用 来创建元素`id`，以便您可以使用 来获取它`jQuery`。
然后您可以使用该`selection`事件来更新号码。

```
{
    chart: {
        renderTo: #element,
        events: {
            selection: function() {
                // @todo Update message
            }
        }
    }
} 
```