# StackOverflow 问答 13498000-13498999

# ajax - 通过 AJAX 刷新传递 php 变量

> ID：13498004
> 
> 赞同：1
> 
> 时间：2012-11-21T16:45:13.960
> 
> 标签：ajax, refresh

我只是解释我的“问题”。我对JS和AJAX一无所知。但我会做一个简单的 AJAX 函数：

*   我的菜单“项目”显示用户参与的最后 5 个项目
*   当您单击其中一个项目时，会出现一个小的下拉列表，您可以选择“任务”、“演示文稿”、“讨论”等。
*   例如，当您单击“任务”时，通过显示项目任务来更新网站的右侧部分。

不刷新整个页面，只是右侧的一个div。

我必须将我想查看任务的项目的 ID 传递给正确的 div（它只是加载 tasks.php），以便它显示我选择的项目任务！

通过询问一些人，我被建议通过将项目的 ID 放在项目 div 的“rel”中来传递项目的 ID，我会在 tasks.php 之后恢复，只是我不知道如何放置它付诸实践，尽可能简单！

如果你能帮助我，那将非常有帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:51:38.830

似乎您只需要为您的 php 页面构建一个 url。类似的东西`tasks.php?projectId=[project id goes here]`。当用户单击其中一个项目时，将构建此 url。

对于请求本身，我建议您使用 jQuery 的`$.get()`函数（[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)）。

在 PHP 中，您可以使用 $_GET["projectId"] 来检索值，并采取相应的行动。至于如何在两者之间传输数据，我建议将您的 PHP 响应编码为 json（使用正确的内容编码，一组简单的标头指令就可以了），显然您需要将 JSON 格式化为类似：

`{tasks: [{id: 'task1', name: 'My task', ...}, {id: 'task2', name: 'my other task', ...}]}`

这回答了你的问题了吗？

# ios - iOS 应用内购买：在不提交给 Apple 的情况下测试真实购买

> ID：13498005
> 
> 赞同：24
> 
> 时间：2012-11-21T16:45:15.007
> 
> 标签：ios, sandbox, ad-hoc-distribution, in-app-purchase, adhoc

我在我的 iOS 应用程序中实现了应用程序购买，我想在将此新版本提交给 Apple 之前进行真正的测试（不是沙盒）当然，应用程序的当前版本（在 App Store 中）已经过产品验证所以，我使用 Ad Hoc 分发配置文件存档了该应用程序，并为 Ad Hoc 部署生成了一个 IPA 文件。但是当我通过 Testflight 在我的设备上安装该应用程序时，我发现该应用程序处于沙盒环境中！有没有办法在将应用程序提交到 App Store 之前进行“真正的”购买？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-22T00:48:22.063

您实际上可以在沙盒环境中测试应用内购买，基本上您需要在 iTunesConnect 中设置一个测试用户帐户。

在此处查看苹果文档：http: [//developer.apple.com/library/ios/#technotes/tn2259/_index.html](http://developer.apple.com/library/ios/#technotes/tn2259/_index.html)

您将能够找到与应用内购买相关的所有信息，包括沙盒测试。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-02-06T16:56:30.973

简短的回答：你不能测试真正的购买（也就是花真钱）。这是不可能的。

稍微长一点的答案：除非它是苹果签名的发布版本，否则您将自动进入沙盒环境。甚至临时签名的构建也会进入沙盒。

要测试新的 IAP：创建您的 IAP（它将处于“需要批准模式”，直到与最终构建一起提交并针对沙箱进行测试 - 这很好）。如果您的购买对沙盒有效，那么它也应该对使用真钱的 prod 有效。用真钱进行试运行会很棒，但是在 IAP 获得批准并且您从应用商店获得该应用的生产签名版本之前，这是不可能的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-10T04:47:12.057

只需在 iTunes Connect 上创建一个测试帐户。然后从设备注销并从 Xcode 运行您的应用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T16:56:05.747

要访问购买，您需要苹果签名，因为您正在连接苹果服务器。

我假设您的应用程序没有该签名，因此您的请求进入沙箱。

# vb.net - 变量在赋值之前使用？

> ID：13498009
> 
> 赞同：-2
> 
> 时间：2012-11-21T16:45:30.467
> 
> 标签：vb.net, variables

有人可以解释为什么我会收到这个错误，因为我没有想法

![未使用变量](../Images/857b0dc709c4b0ea80eab9b8187d2170.png)

Srry 图像现在很好，请解释我为什么会收到此错误

大声笑我无法解释这就是为什么我使用图像请保存到桌面并打开而不是我认为它很奇怪所以我使用图像如果你没有看到奇怪的错误 ok 希望其他人会

Tanx for -4 Rep 你没有读过我的评论，所以我不能在这里给任何人一个 + 因为你们只看错误我想要解释 wy 值是 elseif 中的东西，如果我没有要求解决方案但没有任何内容但解释关于它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:51:08.700

这意味着`endhours1`和其他一些变量没有被赋值，你试图调用`.Replace`它

要使用任何局部变量，您必须首先为其分配一个值/默认值。`.Replace`当变量中没有值时将替换什么？

这是[您的问题的副本，在这里得到了很好的回答](https://stackoverflow.com/questions/13219462/use-of-unassigned-local-variable/13219477#13219477)

如果没有使用这些变量，编译器不会抱怨。

在你有的线上

```
Dim regel, onderwerp, body, reminder... etc 
```

给他们一个初始/默认值或使用 Nullable 类型

```
Dim regel As Integer = 0
Dim onderwerp As String = ""
Dim body As String = "" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T16:54:13.007

即使它实际上永远不会发生，编译器也无法确定变量总是被赋值。

在开始的时候给变量赋值，这样编译器就不会认为它们是未赋值的。

（在更高版本的 VB 中，当您使用可能未分配的变量时，编译器会警告您。早期版本只是为所有变量分配了一个零/无值，并没有警告您。）

# javascript - JQuery 幻灯片 Onclick

> ID：13498012
> 
> 赞同：1
> 
> 时间：2012-11-21T16:46:40.763
> 
> 标签：javascript, jquery, jquery-ui

我正在使用示例[http://www.faridesign.net/2012/05/create-a-awesome-vertical-tabbed-content-area-using-css3-jquery/](http://www.faridesign.net/2012/05/create-a-awesome-vertical-tabbed-content-area-using-css3-jquery/)中的代码我正在尝试滑动 div 标签一个按钮单击列表，以便当前选项卡内容将滑入，而刚刚单击的选项卡将滑出。我目前有一个可以在 div 之间切换的工作示例，但我需要在 div 之间滑入和滑出。是否有任何脚本可以使用当前代码执行此操作。使用 .slide 或 .effect 而不是 .show() 看起来会同时显示两个 div。我不确定我做错了什么。

```
<div id="v-nav">
<ul>
    <li tab="tab1" class="first current">Main Screen</li>
    <li tab="tab2">Div 1</li>
    <li tab="tab3">Div 2</li>
    <li tab="tab4">Div 3</li>
    <li tab="tab5">Div 4</li>
    <li tab="tab6">Div 5</li>
    <li tab="tab7">Div 6</li>
    <li tab="tab8" class="last">Div 7</li>
</ul>
<div class="tab-content">
   <h4>Main Screen</h4>
</div>
<div class="tab-content">
    <h4>Div 1</h4>
</div>
<div class="tab-content">
    <h4>Div 2</h4>
</div>
<div class="tab-content">
    <h4>Div 3</h4>    
</div>
<div class="tab-content">
    <h4>Div 4</h4>                   
</div>
<div class="tab-content">
    <h4>Div 5</h4>                   
</div>
<div class="tab-content">
    <h4>Div 6</h4>                   
</div>
    <div class="tab-content">
    <h4>Div 7</h4>  
</div> 
```

我的脚本看起来像

```
$(function () {
var items = $('#v-nav>ul>li').each(function () {
    $(this).click(function () {
        //remove previous class and add it to clicked tab
        items.removeClass('current');
        $(this).addClass('current');

        //hide all content divs and show current one
        //$('#v-nav>div.tab-content').hide().eq(items.index($(this))).show();

        //$('#v-nav>div.tab-content').hide().eq(items.index($(this))).fadeIn(100);    

        $('#v-nav>div.tab-content').hide().eq(items.index($(this))).slideToggle();
        window.location.hash = $(this).attr('tab');
    });
});

if (location.hash) {
    showTab(location.hash);
}
else {
    showTab("tab1");
}

function showTab(tab) {
    $("#v-nav ul li:[tab*=" + tab + "]").click();
}

// Bind the event hashchange, using jquery-hashchange-plugin
$(window).hashchange(function () {
    showTab(location.hash.replace("#", ""));
})

// Trigger the event hashchange on page load, using jquery-hashchange-plugin
$(window).hashchange();

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:53:05.897

试试[垂直 jQuery UI 选项卡](http://jqueryui.com/tabs/#vertical)。你可能需要重新设计一点，但我认为效果是你想要的。您应该能够将来自[http://api.jqueryui.com/slide-effect/](http://api.jqueryui.com/slide-effect/)的幻灯片效果添加到更改选项卡事件中。

# java - OpenJPA Mysql 总是得到 id null

> ID：13498018
> 
> 赞同：2
> 
> 时间：2012-11-21T16:47:03.977
> 
> 标签：java, mysql, database, jpa, openjpa

我正在尝试运行一个简单的示例，它只是与表的映射并打印存储在其中的所有值。除了我的身份证，我的所有领域都做得很好。

这是我对它进行导出时的表

```
CREATE TABLE `adress` ( 
`id` int(11) NOT NULL AUTO_INCREMENT, 
`streetNumber` tinyint(4) DEFAULT NULL, 
`street` varchar(45) DEFAULT NULL, 
`city` varchar(45) DEFAULT NULL, 
`zipCode` int(11) DEFAULT NULL, 
`state` varchar(45) DEFAULT NULL, 
PRIMARY KEY (`id`) 
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=latin1; 

LOCK TABLES `adress` WRITE; 
INSERT INTO `adress` VALUES (1,12,'Canada street','LOS ANGELES',441233,'California'),(2,54,'5th avenue','NEW YORK CITY',884769,'New York'); 
UNLOCK TABLES; 
```

我的实体类：

```
@Entity 
@Table(name = "adress") 
@XmlRootElement 
public class Adress implements Serializable { 

   @Id 
   @GeneratedValue(strategy = GenerationType.IDENTITY) 
   @Basic(optional = false) 
   @Column(name = "id") 
   private Integer id; 

   @Column(name = "streetNumber") 
   private Short streetNumber; 

... 
```

如果我执行“findAll()”，我可以从数据库中获取所有数据。但是 id 为空，所有其他字段都有它们的值

我已经尝试了几种东西，但我不会到处去。

如果有人可以看到我的错误在哪里或关于什么，我将非常感谢您的帮助。

提前致谢

# css - Firefox 只打印第一页并剪切右边的页面

> ID：13498022
> 
> 赞同：15
> 
> 时间：2012-11-21T16:46:12.383
> 
> 标签：css, firefox, printing, overflow

从 Firefox 打印时我遇到了很大的麻烦（任何版本，我的是 16.0.2，但即使是 Aurora 开发版本也是如此）。打印页面时，缩小以适应打印预览不起作用。唯一的方法是，如何使页面适合纸张是在同一个对话框中选择缩放 70%。其他问题：它只打印第一页。该怎么办？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-21T16:46:12.383

我需要调整 CSS 文件以进行打印，所以我做了一个。它可以在任何地方完美运行，但不能在 Firefox 中运行。出了什么问题？

首先，我尝试在 print.css 文件中为 BODY 和 HTML 指定宽度和高度。比边距等

后来我发现了问题所在：标准 CSS 文件中包含以下内容：

```
body {
 ...
 overflow-x: hidden;
 overflow-y: scroll;
} 
```

所以我在 print.css 文件中添加了以下内容：

```
body {
 overflow-x: visible;
 overflow-y: visible;
} 
```

我猜，如果你只在 CSS 中指定了溢出，而不是 -x 和 -y，那么你只需要在 print.css 文件中指定溢出：可见。

从 Firefox 打印现在可以正常工作了。我只是想，这可能会对在 Firefox 中发生奇怪打印行为的人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-09T04:39:20.493

除了 Kokesh 的回答，有些时候属性

```
display: table 
```

也会产生这个问题。因此，您需要将其更改为“阻止”或其他适合您要求的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-17T08:14:30.307

我尝试了其他答案中建议的修复程序，但他们并没有为我解决问题。经过大量的研究和反复试验，我发现[这篇文章](https://alistapart.com/article/goingtoprint)被 A list 分开。我很怀疑，因为它太旧了，但它指出：

> 如果浮动元素超出了打印页面的底部，则浮动的其余部分将有效地消失，因为它不会在下一页上打印。

因为我有一个大的浮动容器，我想我会试一试。所以，我从其他答案和这篇文章中混合起来，想出了这个：

```
body { 
    overflow: visible !important; 
    overflow-x: visible !important; 
    overflow-y: visible !important; 
}

/*this is because I use angular and have this particular layout*/
body > .fade-ng-cloak { 
    height: 100%; 
    display: block;
    flex: none;
    float: none;
}
.l-content,
.l-sidebar {
    float: none;
} 
```

所以基本上：

1.  将身体设置为`overflow: visible`
2.  将充当包装器的元素设置为`display: block`，消除所有`flex`样式并在必要时重置高度
3.  消除`float`长容器

这种混合对我有用！我很高兴我想我会分享:)

# android - 我怎么知道系统栏是否可见？

> ID：13498029
> 
> 赞同：0
> 
> 时间：2012-11-21T16:46:29.950
> 
> 标签：android

如果系统栏可见（状态栏、导航栏和系统/组合栏），我会尝试在每台设备（平板电脑和带或不带物理按钮的手机）上了解。

我怎么能这样做？？？

弗朗索瓦

编辑：我的应用程序中的 android:minSdkVersion=11

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:15:33.683

> 我需要知道 dp 中纵向模式下页面的高度。

`View`然后测量代表您的“页面”的高度。

# jquery - 无法迭代超过四个 JSON 对象

> ID：13498030
> 
> 赞同：0
> 
> 时间：2012-11-21T16:47:36.363
> 
> 标签：jquery, json, jquery-mobile

我正在浏览一堆 JSON 对象，首先创建一个“名称”列表，然后使用名称搜索 JSON 文件并从“名称”对象下方抓取各种对象。

我遇到的问题是，当 JSON 文件中有四个以上的对象时，脚本会严重崩溃（浏览器挂起，然后给我一个“警告：脚本无响应”错误）。

访问前四个对象很好，但是单击生成的链接转到第五个对象时，一切都会出错。

示例 JSON 如下...</p>

```
{"glass":[
  {
     "name":"Drink Name 1",
     "ingredients":{
        "liquids":["Gin", "Tonic"],
        "amounts":[60, 180],
        "colours":["ffffff", "51c98c"],
        "garnish":["Cucumber slice"],
        "ice":["cubes"]
     },
     "method":["Add plenty of ice into glass", "Pour gin over ice", "Top up with tonic", "Stir"],
     "finished":["FAFFFE"]
  },
  {
     "name":"Drink Name 2",
     "ingredients":{
        "liquids":["Gin", "Tonic"],
        "amounts":[60, 180],
        "colours":["ffffff", "51c98c"],
        "garnish":["Cucumber slice"],
        "ice":["cubes"]
     },
     "method":["Add plenty of ice into glass", "Pour gin over ice", "Top up with tonic", "Stir"],
     "finished":["FAFFFE"]
  },      
  {
     "name":"Drink Name 3",
     "ingredients":{
        "liquids":["Gin", "Tonic"],
        "amounts":[60, 180],
        "colours":["ffffff", "51c98c"],
        "garnish":["Cucumber slice"],
        "ice":["cubes"]
     },
     "method":["Add plenty of ice into glass", "Pour gin over ice", "Top up with tonic", "Stir"],
     "finished":["FAFFFE"]
  },
  {
     "name":"Drink Name 4",
     "ingredients":{
        "liquids":["Gin", "Tonic"],
        "amounts":[60, 180],
        "colours":["ffffff", "51c98c"],
        "garnish":["Cucumber slice"],
        "ice":["cubes"]
     },
     "method":["Add plenty of ice into glass", "Pour gin over ice", "Top up with tonic", "Stir"],
     "finished":["FAFFFE"]
  },
  {
     "name":"Drink Name 5",
     "ingredients":{
        "liquids":["Gin", "Tonic"],
        "amounts":[60, 180],
        "colours":["ffffff", "51c98c"],
        "garnish":["Cucumber slice"],
        "ice":["cubes"]
     },
     "method":["Add plenty of ice into glass", "Pour gin over ice", "Top up with tonic", "Stir"],
     "finished":["FAFFFE"]
  }
]
} 
```

我的代码（其中的一部分）目前看起来像这样……</p>

```
//Get the JSON list and search through it for a match to the recipe name
$.getJSON(url, function(data) {
cache:false;
      for (var i=0;i<data.glass.length;i++){
      var glass = data.glass[i]

      //Matching the recipe to the cocktail name
      if (glass.name == recipe){

       // Saving the liquids array as a variable
      liquidIng = (data.glass[i].ingredients.liquids)
      console.log(liquidIng);

      //Saving the amounts as a variable
      liquidAmounts = (data.glass[i].ingredients.amounts)
      var total = 0
           for (var i = 0; i < liquidAmounts.length; i++) {
            total += parseInt(liquidAmounts[i]);
            }

      //Divide the total by 100 to get onePercent
      var onePercent
      onePercent = total /100;

      //Write and multiply the amounts by the onePercent
      var outputAmounts="<div style=\"height:100%\">";
      for (var i in liquidAmounts) {
      outputAmounts+="<div style=\"height:" + liquidAmounts[i] / onePercent + "%; background-color:#" + glass.ingredients.colours[i] + "\">" + glass.ingredients.liquids[i] + "</div>";
      }
      outputAmounts+="</div>";

      document.getElementById("ingredientsAmounts").innerHTML=outputAmounts;        

      //Write the list of ingredients
      var outputIngredients="<ul>";
      for (var i in liquidIng) {
      outputIngredients+="<li>" + glass.ingredients.liquids[i] + "</li>";
      }
      outputIngredients+="</ul>";
      outputIngredients+="<p>" + glass.ingredients.garnish[0] + "</p>";

      document.getElementById("ingredientsList").innerHTML=outputIngredients;

      //Writing the Method
      var outputMethod="<ul>";
      for (var i in glass.method) {
      outputMethod+="<li>" + glass.method[i] + "</li>";
      }
      outputMethod+="</ul>";

      document.getElementById("methodList").innerHTML=outputMethod;

      }//Matching cocktail ends
      }//Get Recipe function ends
}); 
```

该脚本会输出它应该输出的 HTML，但在它经过六秒钟的思考之前不会输出。然后一切都停止了。

我能理解的最接近调试消息的内容是显示为…</p>

```
 var glass = data.glass[i] 
```

我对 JQuery 很陌生，所以请尽量忽略我的无知——我真的很难过。任何帮助将不胜感激。（另外，为发布大量 JSON 代码道歉）

谢谢，马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:12:14.957

我不知道您的问题的答案，但我可以建议一些检查事项和有用的技巧。

*   首先，如果您还没有这样做，并假设您的实际数据与示例不同，请确保它实际上是列表中的位置而不是内容的情况。打乱数据顺序并检查它是否仍然在 #5 上死掉
*   接下来，添加调试语句 - 易于感知的单行命令（输出到屏幕通常对此有所帮助，但在您的情况下可能不太有用。如果您可以做任何事情，将提供您可以事先感知的输出到崩溃，那么您可以使用它来追踪究竟是哪条线路导致了问题，并且可以使用它来获取有关崩溃前立即状态的信息 - 两者都非常有用。如果没有别的，你应该能够提前人为地终止函数，将数据输出到某个地方的 html - 这会使跟踪特定位置变得更加烦人，因为您每次运行只能进行一次检查，但它仍然应该有助于公平少量。
*   此外，尝试不同的浏览器/计算机，如果这样做相对容易的话。如果它是特定于浏览器的错误，您很可能可以使用它来查找遇到相同​​问题的其他人和/或更仔细地确定问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T01:11:18.710

这是更新后的代码，似乎您错误地使用了内部 for 循环。我删除了 if 条件以检查收据，但您可以将其放回...

至少现在您的代码不会陷入循环。但是您可能仍然需要修复要显示的值，因为我对逻辑不太确定。

```
for (var i = 0; i < data.glass.length; i++) {
      var glass = data.glass[i];

       // Saving the liquids array as a variable
      liquidIng = (data.glass[i].ingredients.liquids);
      console.log("Liquid: " + liquidIng);

      //Saving the amounts as a variable
      liquidAmounts = (data.glass[i].ingredients.amounts)
      var total = 0

      for (var j = 0; j < liquidAmounts.length; j++) {
            total += parseInt(liquidAmounts[j]);
      }

      //Divide the total by 100 to get onePercent
      var onePercent
      onePercent = total /100;

      //Write and multiply the amounts by the onePercent
      var outputAmounts="<div style=\"height:100%\">";
      for (var p in liquidAmounts) {
          outputAmounts+="<div style=\"height:" + p / onePercent + "%; background-color:#" + glass.ingredients.colours[i] + "\">" + glass.ingredients.liquids[i] + "</div>";
      }
      outputAmounts+="</div>";

      document.getElementById("ingredientsAmounts").innerHTML=outputAmounts;        

      //Write the list of ingredients
      var outputIngredients="<ul>";
      for (var p in liquidIng) {
          outputIngredients+="<li>" + p + "</li>";
      }
      outputIngredients+="</ul>";
      outputIngredients+="<p>" + glass.ingredients.garnish[0] + "</p>";

      document.getElementById("ingredientsList").innerHTML=outputIngredients;

      //Writing the Method
      var outputMethod="<ul>";
      for (var p in glass.method) {
          outputMethod+="<li>" + p + "</li>";
      }
      outputMethod+="</ul>";

      document.getElementById("methodList").innerHTML=outputMethod;

}//Get Recipe function ends 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T07:48:42.327

正如@Tomalak 所注意到的，我在同一个函数中多次重用了“i”变量。我已经将它们全部分开并将步骤分开不同的功能，这似乎已经成功了。

感谢您的评论和帮助。一如既往地受到高度赞赏。

# c# - 如何在datagridview中为多个用户“锁定”记录

> ID：13498036
> 
> 赞同：1
> 
> 时间：2012-11-21T16:46:48.153
> 
> 标签：c#, sql, winforms

我的公司最近从 2 人变成了 4 人，我不得不添加用户跟踪等。话虽如此，我现在正试图解决一种让人们看到其他人何时进入记录的方法。我有一个作为案例选择器的 datagridview，当有人双击它时，它会打开该案例的主表单。我需要能够跨用户显示或在列表中阻止他们进入该记录。我绝对不知道如何在 winforms 中执行此操作，并希望有人可以帮助我修改我已经必须执行的操作。

用于打开表单的代码如下：

```
 private void caseSelectorDataGridView_CellDoubleClick(object sender, DataGridViewCellEventArgs e)
    {
        System.Data.DataRowView SelectedRowView;
        //newCityCollectionDataSet.PropertyInformationRow SelectedRow;
        newCityCollectionDataSet.CaseSelectorRow SelectedRow;

        SelectedRowView = (System.Data.DataRowView)caseSelectorBindingSource.Current;
        SelectedRow = (newCityCollectionDataSet.CaseSelectorRow)SelectedRowView.Row;

        frmSummary SummaryForm = new frmSummary(this);
        SummaryForm.LoadCaseNumberKey(SelectedRow.CaseNumberKey, true, null);
        SummaryForm.LoadBRTNumberKey(SelectedRow.BRTNumber, null);
        SummaryForm.LoadWaterByAdd(SelectedRow.Num, SelectedRow.Direction, SelectedRow.Name, null);
        SummaryForm.Show();

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:00:10.773

您可以使用他们当前正在修改的用户 ID 和案例编号创建一个活动表，然后检查它以查看是否有任何其他用户正在修改相同的案例。

# java - Thread.getStackTrace() 是线程安全的吗？

> ID：13498041
> 
> 赞同：3
> 
> 时间：2012-11-21T16:47:09.650
> 
> 标签：java, multithreading, thread-safety

有点不正统的情况 - 基本上我有线程 A 监视线程 B。如果线程 A 检测到线程 B 负责的周期性任务之一（线程 B 不是 a 的一部分`ThreadPoolExecutor`，它是 MINA 的线程之一）已经过时，线程 A报告一个错误。所以我收到了这些错误，想知道线程 B 卡在哪里。所以线程 A 调用线程 B`getStackTrace()`并打印堆栈似乎很聪明，这样我就可以看到 B 卡在什么愚蠢的活动上。

在实践中，我会稍微适应一下，因为如果任务没有运行，线程 B 的堆栈很可能因为 B 被阻塞而在相当长的一段时间内没有改变。但在理论上，有时在实践中，当线程 A 尝试获取其堆栈跟踪时，线程 B 的堆栈会发生变化。所以我想知道这是否是线程安全操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T16:53:56.187

查看它的源代码`Thread`似乎`getStackTrace()`使用了一种`private static native dumpThreads()`方法。[Thread.getAllStackTraces()](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#getAllStackTraces%28%29)使用相同的方法，根据其 javadoc，它是线程安全的：

> 调用此方法时线程可能正在执行。每个线程的堆栈跟踪仅代表一个快照，并且每个堆栈跟踪可能在不同的时间获得。如果虚拟机没有关于线程的堆栈跟踪信息，则将在映射值中返回一个长度为零的数组。

# racket - 扩展 backus-naur-forms 的球拍语法

> ID：13498044
> 
> 赞同：1
> 
> 时间：2012-11-21T16:48:15.437
> 
> 标签：racket, bnf

我有一套在球拍中实施的推导规则。我们可以假设没有任何 optional ，这意味着没有包含管道的规则（在 BNF 中）： ::= |

在球拍中，我有这样的东西：

```
(define *rules*
  '((S . ("b" "a"))
    (B . ("a"))
    (C . (S B)))) 
```

请注意，终端符号以球拍字符串的形式实现，非终端符号以球拍符号的形式实现。现在，我想从另一个包含 backus naur 语法规则的球拍文件中导入此规则：

```
S ::= ba
B ::= a
C ::= SB 
```

（大写字母 = 非终结符）

因此，我需要扩展球拍语法。我不知道如何处理。你能帮助我吗？它不应该有那么多代码......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T23:35:11.843

我认为您正在寻找解析使用 BNF 语法编写的文件，并生成一个 s 表达式版本；是对的吗？

如果是这样，那应该不难。特别是，您的问题所暗示的格式是每一行的形式

```
<NT> :: = [<NT>|<T>]* 
```

...你可以像这样拆开：

```
#lang racket

;; COPYRIGHT 2012 John B. Clements (clements@brinckerhoff.org)
;; Licensed under the Apache License, version 2.
;; (You're free to use it, but your source code has to include
;; my authorship.)

(require rackunit)

(define example
  (list "S ::= ba"
        "B ::= a"
        "C ::= SB"))

;; parse a single line:
;; string -> (list/c symbol? (listof (or/c string? symbol?)))
(define (parse-line l)
  (match (regexp-match #px"^([A-Z]) ::= ([A-Za-z]*)$")
    [(list _ lhs rhses)
     (list lhs (map parse-char (string->list rhses)))]))

;; parse a single char:
;; char -> (or/c symbol? string?)
(define (parse-char ch)
  .. oops! out of time. You'll have to write this part yourself... )

(check-expect (map parse-line example)
              '((S ("b" "a"))
                (B ("a"))
                (C (S B)))) 
```

哎呀！我看到那里有一个错误。没问题，你会想办法的。得跑了……

# excel - 如何自动填充列直到达到新值，然后使用该值自动填充

> ID：13498047
> 
> 赞同：4
> 
> 时间：2012-11-21T16:48:25.007
> 
> 标签：excel, unix, autofill

我想知道如何用某个值自动填充一列，直到它在同一列中达到一个新值，然后用它自动填充？

我尝试使用 Excel，但我不知道如何。如果有这样做的方法，我也可以使用 unix 命令（我只是想不出一个）。

示例 - 我怎样才能打开这个：

```
12345   83492   A
28397   18723
20983   39847   
98237   28394   B
09477   34566   
03940   76382   C
39348   38495 
```

进入这个：

```
12345   83492   A
28397   18723   A
20983   39847   A
98237   28394   B
09477   34566   B
03940   76382   C
39348   38495   C 
```

任何帮助将不胜感激！

编辑 - 如果你有办法在 MySQL 中这样做，我也可以这样做

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T17:25:43.277

我知道的最简单的方法是通过右侧列中的公式来完成。

因此，例如，您将拥有：

```
COL A:  COL B:   COL C:    COL D:
12345   83492    A         =C1
28397   18723              =IF(C2="",D1,C2)
20983   39847   
98237   28394    B
09477   34566   
03940   76382    C
39348   38495 
```

然后将D2中的公式一直向下拖动，然后您可以复制/粘贴值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-30T11:28:22.290

如果您对 VBA / 公式不感兴趣。然后，您可以尝试以下简单步骤：

1.  选择范围。例如，`C1:C7`
2.  按键盘功能键`F5`。出现一个对话框（转到）
3.  单击“特殊”按钮
4.  从看到的选项（单选按钮）中选择“空白”并单击“确定”
5.  按键盘键`=`（等号）并按`Arrow-Up`一次键。
6.  然后，同时按键盘键`CTRL+Enter`查看结果

# python - Python凯撒破解

> ID：13498049
> 
> 赞同：-3
> 
> 时间：2012-11-21T16:48:30.843
> 
> 标签：python, python-3.x, decoding, encryption

我们将为 26 个可能的密钥中的每一个生成解密字母。

我完成了那部分，但我无法打印出字典中的单词。例如：我只想打印 'ebv' 嘿

我如何将它与字典中的单词匹配，而不是打印出所有 26 个可能的键。

这是字典： http: [//www.ics.uci.edu/~kay/wordlist.txt](http://www.ics.uci.edu/~kay/wordlist.txt)

```
Alphabet = 'abcdefghijklmnopqrstuvwxyz'  

def rotated_alphabet(key:int) -> str:
    '''produces a rotated alphabet based on key and adds those letters to the end of alphabet'''
    if key > 26:
        key = key % 26
    new_alphabet = ''
    w = Alphabet[0:key]
    x = Alphabet.replace(Alphabet[0:key], new_alphabet)
    return (x + w)

def Caesar_break(cipher:str) ->str:
    infile = open('wordlist.txt', 'r')
    wordlist = []
    possible = []
    decode = []
    words = []
    for str in infile:
        t = str
    for i in range(0, 26):
        p = rotated_alphabet(i).split()
        possible+=p
    for y in possible:
        decrypt = str.maketrans(y, Alphabet)
        decode.append(cipher.translate(decrypt))
    for str in decode:
        s = str
        words.append(s)
    print(words)

Caesar_break('eby') 
```

它打印出来：

```
['ebv', 'dau', 'czt', 'bys', 'axr', 'zwq', 'yvp', 'xuo', 'wtn', 'vsm', 'url', 'tqk', 'spj', 'roi', 'qnh', 'pmg', 'olf', 'nke', 'mjd', 'lic', 'khb', 'jga', 'ifz', 'hey', 'gdx', 'fcw'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:29:23.047

解决这个问题的规范方法是：

1.  从单词列表中读取所有行并将它们插入字典`dict`
2.  通过以下方式尝试各种凯撒旋转`translate`
3.  如果旋转从字典 ( `decrypt in dictionary`) 中产生一个单词，则输出它

对于较长的文本，您可能需要检查是否在字典中找到了至少一半的单词。注意小写/大写问题和*换行符*等！- 尝试使用`strip`！

更高级的方法是进行字符统计，并根据该统计信息猜测适当的旋转。

# ios6 - initialLayoutAttributesForAppearingItemAtIndexPath 为所有可见单元格触发，而不仅仅是插入的单元格

> ID：13498052
> 
> 赞同：19
> 
> 时间：2012-11-21T16:47:40.413
> 
> 标签：ios6, uicollectionview

有没有人看到这个问题的体面答案？

`initialLayoutAttributesForAppearingItemAtIndexPath`似乎正在为所有可见的单元格调用，而不仅仅是插入的单元格。根据[Apple自己的文档](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionViewLayout_class/Reference/Reference.html)：

> 对于移动的项目，集合视图使用标准方法来检索项目的更新布局属性。对于插入或删除的项目，集合视图会调用一些不同的方法，您应该重写这些方法以提供适当的布局信息

这听起来不像正在发生的事情......其他单元格没有被插入，它们正在被移动，但它也要求`initialLayoutAttributesForAppearingItemAtIndexPath`那些**被移动**的单元格。

我已经看到使用`prepareForCollectionViewUpdates:`来跟踪哪些 indexPaths 正在更新并且只更改那些的变通方法，但这似乎有点奇怪，因为它会再次出现在他们自己的文档中。有没有其他人找到解决这个问题的更好方法？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-19T19:49:51.267

我发现[Mark Pospesel](https://mpospese.com/2012/10/25/fixing-circlelayout/)的这篇博文很有帮助。
作者还修复了 WWDC`CircleLayout`示例并将[其发布在 Github 上](https://github.com/mpospese/CircleLayout/blob/master/CircleLayout/CircleLayout.m)。

感兴趣的方法：

```
- (void)prepareForCollectionViewUpdates:(NSArray *)updateItems
{
    // Keep track of insert and delete index paths
    [super prepareForCollectionViewUpdates:updateItems];

    self.deleteIndexPaths = [NSMutableArray array];
    self.insertIndexPaths = [NSMutableArray array];

    for (UICollectionViewUpdateItem *update in updateItems)
    {
        if (update.updateAction == UICollectionUpdateActionDelete)
        {
            [self.deleteIndexPaths addObject:update.indexPathBeforeUpdate];
        }
        else if (update.updateAction == UICollectionUpdateActionInsert)
        {
            [self.insertIndexPaths addObject:update.indexPathAfterUpdate];
        }
    }
}

- (void)finalizeCollectionViewUpdates
{
    [super finalizeCollectionViewUpdates];
    // release the insert and delete index paths
    self.deleteIndexPaths = nil;
    self.insertIndexPaths = nil;
}

// Note: name of method changed
// Also this gets called for all visible cells (not just the inserted ones) and
// even gets called when deleting cells!
- (UICollectionViewLayoutAttributes *)initialLayoutAttributesForAppearingItemAtIndexPath:(NSIndexPath *)itemIndexPath
{
    // Must call super
    UICollectionViewLayoutAttributes *attributes = [super initialLayoutAttributesForAppearingItemAtIndexPath:itemIndexPath];

    if ([self.insertIndexPaths containsObject:itemIndexPath])
    {
        // only change attributes on inserted cells
        if (!attributes)
            attributes = [self layoutAttributesForItemAtIndexPath:itemIndexPath];

        // Configure attributes ...
        attributes.alpha = 0.0;
        attributes.center = CGPointMake(_center.x, _center.y);
    }

    return attributes;
}

// Note: name of method changed
// Also this gets called for all visible cells (not just the deleted ones) and
// even gets called when inserting cells!
- (UICollectionViewLayoutAttributes *)finalLayoutAttributesForDisappearingItemAtIndexPath:(NSIndexPath *)itemIndexPath
{
    // So far, calling super hasn't been strictly necessary here, but leaving it in
    // for good measure
    UICollectionViewLayoutAttributes *attributes = [super finalLayoutAttributesForDisappearingItemAtIndexPath:itemIndexPath];

    if ([self.deleteIndexPaths containsObject:itemIndexPath])
    {
        // only change attributes on deleted cells
        if (!attributes)
            attributes = [self layoutAttributesForItemAtIndexPath:itemIndexPath];

        // Configure attributes ...
        attributes.alpha = 0.0;
        attributes.center = CGPointMake(_center.x, _center.y);
        attributes.transform3D = CATransform3DMakeScale(0.1, 0.1, 1.0);
    }

    return attributes;
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-19T21:45:42.627

你不是一个人。UICollectionViewLayout 头文件注释让事情变得更清晰一些。

> 对于失效前屏幕上的每个元素，将调用 finalLayoutAttributesForDisappearingXXX 并设置从屏幕上的内容到最终属性的动画。
> 
> 对于失效后屏幕上的每个元素，initialLayoutAttributesForAppearingXXX 将被称为从这些初始属性到最终出现在屏幕上的动画设置。

基本上`finalLayoutAttributesForDisappearingItemAtIndexPath`在动画块开始之前为屏幕上的每个项目`initialLayoutAttributesForAppearingItemAtIndexPath`调用，并在动画块结束后为每个项目调用。缓存`UICollectionViewUpdateItem`发送的对象数组由您决定，`prepareForCollectionViewUpdates`以便您知道如何设置初始属性和最终属性。在我的例子中，我缓存了以前的布局矩形，`prepareLayout`所以我知道要使用的正确初始位置。

让我难过一阵子的一件事是你应该使用 super 的实现`initialLayoutAttributesForAppearingItemAtIndexPath`并修改它返回的属性。我只是`layoutAttributesForItemAtIndexPath`在我的实现中调用，动画不起作用，因为布局位置不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-30T23:03:04.417

如果你有子类`UICollectionViewFlowLayout`化，你可以调用`super`实现。一旦你得到了默认的初始布局，你可以检查一个`.alpha`of `0`。如果`alpha`不是`0`，则单元格正在被移动，如果它`0`正在被插入。

有点hack，我知道，但它有效。

Swift 2.0 实现如下：

```
override func initialLayoutAttributesForAppearingItemAtIndexPath(itemIndexPath: NSIndexPath) -> UICollectionViewLayoutAttributes? {

    guard let attributes = super.initialLayoutAttributesForAppearingItemAtIndexPath(itemIndexPath) where attributes.alpha == 0 else {
        return nil
    }

    // modify attributes for insertion here

    return attributes

} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-01-04T17:01:57.907

确保您在 Swift 3 中使用新方法签名。自动更正不适用于此方法：

```
func initialLayoutAttributesForAppearingItem(at itemIndexPath: IndexPath) -> UICollectionViewLayoutAttributes? 
```

# php - 在drupal中覆盖内容页面的更好方法

> ID：13498053
> 
> 赞同：3
> 
> 时间：2012-11-21T16:48:42.720
> 
> 标签：php, drupal, drupal-7, drupal-theming

我正在模板文件中使用此功能创建自定义内容页面

```
function myTheme_preprocess_page(&$var, $hook) {
  if (isset($var['node']->type)) {
    $var['theme_hook_suggestions'][] = 'page__' . $var['node']->type;
  }
} 
```

然后我正在为我的内容创建一个自定义页面——“content_name”.tpl.php 文件。但是，这也会覆盖该内容的编辑、审核、跟踪页面。我只希望它覆盖主要内容页面。是否有捷径可寻。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T17:17:44.717

将您的代码更改为：

```
function myTheme_preprocess_page(&$var, $hook) {
  if (isset($var['node']->type) && is_null(arg(2))) { // the edited line
    $var['theme_hook_suggestions'][] = 'page__' . $var['node']->type;
  }
} 
```

# ios - 自定义 UIViewController 未收到有关设备旋转的方向更改通知

> ID：13498054
> 
> 赞同：1
> 
> 时间：2012-11-21T16:48:45.230
> 
> 标签：ios, uiviewcontroller, xamarin.ios

所以，我有一个自定义 UIWindow、一个自定义 UIViewController 和一个自定义 UIImageView。

```
private class CoachingWindow : UIWindow
{
    public CoachingWindow(...)
    {
        RootViewController = new CoachingOverlayViewController(...);
    }

    private class CoachingOverlayViewController : UIViewController
    {
        public CoachingOverlayViewController(...)
        {
            View = new CoachingOverlayView(...);
        }

        public override void DidRotate (UIInterfaceOrientation fromInterfaceOrientation)
        {
            ...
        }

        public override bool ShouldAutorotate()
        {
            return true;
        }

        private class CoachingOverlayView : UIImageView
        {
            public CoachingOverlayView(...)
            {
                ...
            }
        }
    }
} 
```

窗口、视图控制器和视图都在第一次调用时正确显示：自定义 UIWindow 显示为覆盖在现有 UIWindows 的其余部分上，视图控制器被正确分配为 RootViewController，视图被分配给视图控制器。所以，这一切都正确呈现。

但是，当我物理旋转设备或模拟器时，永远不会调用重写的 DidRotate() 和 ShouldAutorotate() 方法。

我认为这可能与我使用自定义 UIWindow 的事实有关。也许窗口没有收到来自 iOS 的方向更改通知？还是 iOS 将这些通知直接发送到视图控制器？也许我必须以某种方式让视图控制器订阅这些事件，因为它是一个自定义视图控制器？？？

我正在使用 MonoTouch 和 iOS 6。

任何建议都会很棒。我在这里用头撞墙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:23:23.303

在 iOS 6 中，您可以使用

```
 public override UIInterfaceOrientationMask GetSupportedInterfaceOrientations()
    { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:35:58.577

弄清楚了。我已经覆盖了 ShouldAutorotateToInterfaceOrientation (UIInterfaceOrientation toInterfaceOrientation) 而不是 ShouldAutorotate()。但这实际上在 iOS6 中已被弃用。仍然必须弄清楚如何以 iOS6 的方式进行操作，但现在就可以了。

```
public override bool ShouldAutorotateToInterfaceOrientation (UIInterfaceOrientation toInterfaceOrientation)
{
     ...
} 
```

# php - 使用 PDO 并获取“在非对象上调用成员函数 query()”

> ID：13498055
> 
> 赞同：0
> 
> 时间：2012-11-21T16:48:46.480
> 
> 标签：php, mysql

我基本上使用在另一个脚本中工作的相同代码进入这个新类，但不知何故不起作用。我真的不明白为什么现在不工作。

我不断收到错误“调用非对象上的成员函数查询（）”

谁能告诉我我做错了什么？

```
<?php
class ldcStepOne {
    public $JSON;
    private $db;

    public function __contruct () {
        $this->JSON = $JSON;
        $this->db = new PDO ('mysql:host=localhost;dbname=X','X','X');
    }

    public function stepOne ( $JSON ) {
        $sql = 'SELECT * FROM ldc_user_details WHERE uID=101';
        $result = $this->db->query($sql)->fetch(PDO::FETCH_ASSOC);
        return $result;
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-21T16:52:09.933

您键入`__contruct`而不是`__construct`. 所以它`$db`永远不会被初始化。

# javascript - 名称中带有方括号的 Javascript 对象

> ID：13498060
> 
> 赞同：1
> 
> 时间：2012-11-21T16:48:52.493
> 
> 标签：javascript, json, spring, spring-mvc

我正在尝试构建一个 javascript 对象来提交表单。一个属性必须是一组 id，见下文：

```
var customPostData = {
    lecturer:$("#modulesessform").serializeArray()[0].value,
    topic:$("#topic").val(),
    sessionType:$("#sessionType").val(),
    sessionDate:$("#sessionDate").val(),
    startTime:$("#startTime").val(),
    endTime:$("#endTime").val(),
    sessionStatus:$("#sessstatus").val(),
    attendedstudents:studentsattended.toSource()                                                                           
}; 
```

这是帖子数据中的样子。

```
attendedstudents    ["7348", "6472", "7392", "7235", "7399", "6943"]
endTime 8:30 PM
lecturer    5582
sessionDate Tuesday, October 02, 2012
sessionStatus   Completed
sessionType 1
startTime   5:30 PM
topic   bla 
```

问题是最后一个字段。我想能够说`attendedstudents[]:studentsattended.toSource`。你看我正在使用spring MVC，为了告诉它这个参数是某种集合，我需要它`[ ]`作为名称-值对的一部分。这是一个小片段：

```
public @ResponseBody String ajaxcreate( @PathVariable("si") Long si,
                                        @RequestParam("sessionDate") @org.springframework.format.annotation.DateTimeFormat(pattern = "EEEE, MMMM dd, yyyy") java.util.Calendar sessionDate,
                                        @RequestParam("startTime") @org.springframework.format.annotation.DateTimeFormat(pattern = "hh:mm a") java.util.Calendar startTime,
                                        @RequestParam("endTime") @org.springframework.format.annotation.DateTimeFormat(pattern = "hh:mm a") java.util.Calendar endTime,
                                        @RequestParam("attendedstudents[]") ArrayList<Long> attendedstudents,
                                        Model uiModel, HttpServletRequest httpServletRequest) {//bla bla bla} 
```

见最后`@RequestParam`。我在春天尝试了不带方括号的方法，但这会引发错误。我还尝试使用字符串数组并将字符串解析为长字符串，见下文。

```
 @RequestParam("attendedstudents") String[] attendedstudents 
```

这产生了这个异常。显然，它试图将方括号解析为字符串的一部分。

> 对于输入字符串："["7348"" java.lang.NumberFormatException.forInputString(NumberFormatException.java:48) java.lang.Long.parseLong(Long.java:410) java.lang.Long.valueOf(Long.java:第525章）**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T16:50:31.110

方括号在键名中有效，您只需将它们用作字符串文字的一部分。

```
customPostData["attendedstudents[]"]=studentsattended.toSource(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T16:51:50.993

**用引号**括起来

 **```
'attendedstudents[]' : 
```**

# c# - jquery数据表编辑器插件在asp.net（c＃）中不起作用

> ID：13498062
> 
> 赞同：1
> 
> 时间：2012-11-21T16:47:58.887
> 
> 标签：c#, jquery, asp.net, jquery-datatables-editor

我正在使用数据表编辑器插件将行插入数据表，但它不起作用。请在下面查看我的代码。

```
// Create the form
editor = new $.fn.dataTable.Editor({
    "ajaxUrl": {
        "create": 'Default.aspx/InsertNewuser'
    },
    "domTable": "#tbl",
    "fields": [{
            "label": "FirstName:",
            "name": "FirstName"
        },
        {
            "label": "LastName:",
            "name": "LastName"
        }]
}); 
```

新行代码：

```
// New record
$('a.editor_create').on('click', function (e) {
  e.preventDefault();
  editor.create(
    'Create new record', {
      "label": "Add",
      "fn": function () {
        editor.submit();
      }
    });
}) 
```

以及来自 Default.aspx.cs 的 c# 代码：

```
[WebMethod]
public static int InsertNewuser(string FirstName, string LastName)
{
    DataClasses1DataContext db = new DataClasses1DataContext();
    student1 table = new student1();

    table.FirstName = FirstName;
    table.LastName = LastName;

    db.student1s.InsertOnSubmit(table);
    db.SubmitChanges();
    return table.Std_ID;
} 
```

# java - 如何在 OpenXava 中创建一个复选框？

> ID：13498070
> 
> 赞同：0
> 
> 时间：2012-11-21T16:48:37.527
> 
> 标签：java, frameworks, openxava

我正在评估 OpenXava。是否可以使用 OpenXava 创建复选框？我怎么能做到？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:56:05.977

您只需要在实体模块中定义一个布尔属性（持久性或瞬态），OpenXava 将默认为包含该属性的视图中的该属性绘制一个 CheckBox（当然）。

然后，如果您想对该 CheckBox 的更改做出反应，您可以为此属性使用 @OnChange() 注释并将事件链接到您的自定义“更改操作”。

请阅读或测试可用的多个示例。

尝试将布尔属性添加到[快速星指南的](http://openxava.wikispaces.com/quick-start_en)某些实体中，您将看到（如果属性不是瞬态的，请记住更新 DB 模式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:57:45.037

您可以编辑`.jsp`并添加您需要的内容。

对于复选框，您可以将其添加到您的`.jsp`

```
<input type="checkbox" name="name" value="val" /> 
```

# mysql - 在 Amazon EC2 上使用 ssh 和在 Amazon RDS 上使用 MySQL-workbench 冻结连接

> ID：13498072
> 
> 赞同：1
> 
> 时间：2012-11-21T16:49:41.900
> 
> 标签：mysql, ubuntu, ssh, amazon-ec2, amazon-rds

我正在使用以下亚马逊服务：

*   带有 Ubuntu 10.04 的 Ec2
*   RDS 与 MySQL 5.5.27-log

我在我的机器上使用 kubuntu 11.10。问题如下（我不知道他们是否有关系）：

1.  当我通过 ssh 与我的服务器 EC2 连接时，如果我在 3-5 分钟内不使用 shell，则 ssh 被冻结，锁定。我什么也不能做，我不能打字，我不能注销。我必须杀死 ssh 并打开一个新会话。
    1.  当我通过 Amazon RDS 连接到我的 MySQL 数据库时，我的客户端在 5 分钟不活动或执行 5-10 次选择时被阻止/冻结/僵尸。

我用来连接到 MySQL MySQL-workbench 和 MySQL-client。我也有同样的问题。

拜托，有谁知道我该如何解决这些问题？

# jquery - jquery - 在多个ul中的每一个中计算li并返回值

> ID：13498076
> 
> 赞同：5
> 
> 时间：2012-11-21T16:49:54.400
> 
> 标签：jquery, html, dom

使用 jQuery，我如何遍历每个嵌套的 ul.item，计算 LI 的数量，并在该页面上的父 span.someClass 中返回该大小/长度？

```
<ul>
  <li><span class="someClass">3</span>
    <ul class="item" style="display:none">
      <li>count me</li>
      <li>count me</li>
      <li>count me</li>
    </ul>
  </li>
  <li><span class="someClass">1</span>
    <ul class="item" style="display:none">
      <li>count me</li>
    </ul>
  </li>
  <li><span class="someClass">2</span>
    <ul class="item" style="display:none">
      <li>count me</li>
      <li>count me</li>
    </ul>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T16:54:05.247

```
$("ul.item").each(function() {
    // reusabilty
    var context = $(this);
    // count and populate
    context.prev(".someClass").text(context.children().length);
}); 
```

如果这些元素总是紧接**在**您的元素之前`.someClass`，则省略调用。在那种情况下，过滤是不必要的，也是多余的。`prev()``span`**`ul``prev`**

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T16:51:50.510

尝试这个，

**[现场演示](http://jsfiddle.net/rajaadil/7kZQv/)**

```
 $('.someClass').each(function(){    
     $(this).text($(this).next('ul').find('li').length);
 })​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T16:54:50.617

您可以使用`text`方法：

```
$('.someClass').text(function(){
   return $(this).next().find('li').length
}) 
```

[http://jsfiddle.net/EEsRR/](http://jsfiddle.net/EEsRR/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T17:05:01.717

```
<html>
<head>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript">
         $(function() { 
            var count = 0;
            $('ul').each(function(){
                if(count != 0){

                    var len = $(this).find('li').length;

                    $(this).parent().find('.someClass').html(len);
                }
                count++;

            })  
         });

    </script>
</head>
<body>
<ul>
  <li><span class="someClass"></span>
    <ul class="item" style="display:none">
      <li>count me</li>
      <li>count me</li>
      <li>count me</li>
    </ul>
  </li>
  <li><span class="someClass"></span>
    <ul class="item" style="display:none">
      <li>count me</li>
    </ul>
  </li>
  <li><span class="someClass"></span>
    <ul class="item" style="display:none">
      <li>count me</li>
      <li>count me</li>
    </ul>
  </li>
</ul>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T16:58:32.123

```
​$("ul.item").each(function() {
    var _c = $(this);
    _c.siblings("span.someClass").html(_c.children("li").length);
});​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-21T17:04:11.907

`<li>`使用 jQuery循环遍历每个：

```
$(document).ready(function(){

  var howMany;
  // loop through every span.someClass
  $('.someClass').each(function(){
    // loop through every <li> within that span.someClass
    $('li').each(function(){
      // .index() is the current index of the $(this) object, it starts at 0, therefore .index()+1
      howMany = $(this).index()+1;
    });
    // Write your counted <li> in your <span> with .text(), manipulate the text within the <span> tags
    $(this).text(howMany);
  });
}); 
```

它奏效了吗？

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-04-02T09:39:08.680

```
$('#yourelementid > li').length; 
```

这将为您工作，而不是使用任何循环**

# android - 使用错误的 Canvas 调用 View.onDraw

> ID：13498079
> 
> 赞同：0
> 
> 时间：2012-11-21T16:50:04.480
> 
> 标签：android, graphics, android-2.3-gingerbread

我的应用支持 API 级别 10（姜饼）以上。其中一个活动绘制了一个可以在更高版本上完美运行的图表，但是在运行 10 级模拟器时，我会使用错误的画布 ID 额外调用 View.onDraw，这会导致屏幕变为空白。（不仅仅是模拟器 - 有人在他们的 Gingerbread 手机上运行报告了这个问题。）

正常操作是调用两次 onDraw - 第一次来自框架，我从中获取画布 ID，第二次来自我调用 invalidate()，它传递相同的画布 ID。这两个调用发生在 10 级仿真器中，但随后有第三个调用具有不同的画布 ID - 即不属于视图，这会将其空白。

该活动是从 SherlockActivity 派生的，以提供一个操作栏，我相信这就是导致问题的原因。

我的活动课程中的相关代码：

```
public class Chart extends SherlockActivity implements OnGestureListener, OnDoubleTapListener, OnScaleGestureListener
{
    public static boolean   mDataSet = false;

    private ChartView              mView;
    private Menu                   mMenu;
    private GestureDetector        mDetector;
    private ScaleGestureDetector   mScaleDetector;
    private ActionBar              mActionBar;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        mDataSet = false;

        mActionBar = getSupportActionBar();
        mActionBar.setHomeButtonEnabled(true);
        mActionBar.setDisplayHomeAsUpEnabled(true);
        mActionBar.setDisplayOptions(0, ActionBar.DISPLAY_SHOW_TITLE);

        mView = new ChartView(this, mCentreLat, mCentreLong, mRadius);
        setContentView(mView);
        setTitle("");

        Context context = getApplicationContext();

        mDetector   = new GestureDetector(context, this);
        mScaleDetector = new ScaleGestureDetector(context, this);
    }

    @Override
    public void onConfigurationChanged(Configuration config)
    {
        super.onConfigurationChanged(config);
        mDataSet = false;
    }

    // Menu handling
    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        mMenu = menu;
        MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.chart_menu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item)
    {
        boolean handled = true;

        switch (item.getItemId())
        {
        case android.R.id.home:
        finish();
        break;

        case R.id.viewOptions:
            mDataSet = false;
            Intent i = new Intent(getBaseContext(), ChartSettings.class);
            startActivity(i);
            break;

        // Other menu options here...

        default:
            handled = false;
        }
        return handled;
    } 
```

我的 View 类的相关代码：

```
public class ChartView extends View
{

    public ChartView(Context context, float centreLat, float centreLong, float radius)
    {
        super(context);
        mContext    = context;
        mCentreLat  = centreLat;
        mCentreLong = centreLong;
        mRadius = radius;
    }

    @Override
    protected void onDraw(Canvas canvas)
    {
        // First time
        // (We pick up the canvas id mCanvas from the parameter.)
        // (Nothing much else relevant here, except this is where stuff
        // gets initialized, then in setDataInfo(), mDataSet is set true
        // and invalidate() is called at the end.)
        if (!Chart.mDataSet)
        {
            setBackgroundColor(Color.WHITE);
            mCanvas = canvas;
            initPaint();
            setDataInfo();      // invalidate() called at end
        }
        else
        {
            // Second call to onDraw() with same canvas id comes here,
            // then an unwanted third call with a different canvas id, only
            // with the Level 10 (Gingerbread) emulator.

            // This is where the various lines and shapes are plotted
            // on the canvas (mCanvas)
            plotLinesAndShapes();
        } 
```

请任何人都可以解释为什么姜饼模拟器（或电话）会发生第三次通话？效果是屏幕空白（全白）。

当它到达这个函数的时候已经太晚了，调用不能被忽略——当调用堆栈展开时屏幕变成空白。

有一个解决方法 - 如果用户从菜单中选择视图选项，然后立即返回图表，它会重新绘制并从那时起正常运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T17:32:00.210

问题是您保留对作为参数接收的 Canvas 的引用。无法保证此 Canvas 实例在当前帧完成后仍然有效。例如，您可以在每一帧上接收不同的 Canvas 实例。当视图被渲染为位图时，您通常会收到不同的画布（例如，View.setDrawingCacheEnabled()。）

无需在 mCanvas 中保留引用，只需将收到的画布传递给 plotLinesAndShapes()。

# eclipse - Eclipse Juno 中的全屏编辑器

> ID：13498086
> 
> 赞同：6
> 
> 时间：2012-11-21T16:50:32.960
> 
> 标签：eclipse, plugins, fullscreen, eclipse-juno

有一些插件允许在 Eclipse 中进行全屏编辑，但我找不到可以在 Juno 上安装的任何插件。有谁知道这样的事情是否存在？

例如，当我在市场上搜索“全屏”时，会显示几个示例，但没有一个是可安装的。（为什么市场显示无法安装的插件，我不知道。）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:03:26.293

检查这个插件： [http](http://marketplace.eclipse.org/content/fullscreen-mode) ://marketplace.eclipse.org/content/fullscreen-mode 它适用于 eclipse juno。安装后选择窗口菜单->全屏进入全屏

# scheme - 比较列表中的元素

> ID：13498089
> 
> 赞同：1
> 
> 时间：2012-11-21T16:50:32.790
> 
> 标签：scheme

我需要比较列表中的每个第二个元素，但我不知道如何。这是一个例子：

```
(compare? '(1 x 2 x 3 x 4)) -> #t
(compare? '(1 x 2 x 3 o)) -> #f 
```

我只能比较第二个和第四个元素：

```
(define compare?
  (lambda (list)
    (equal? (cadr list) (cadddr list)))) 
```

我需要第 6、第 8、第 10 等......我不知道列表的长度。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:41:15.710

试试这个答案，填空：

```
(define (compare? lst)
  (if <???> ; if the list has at most two elements
      #t    ; then return true
      (let ((elt (cadr lst)))        ; grab the first element to be compared
        (let loop ((lst (cddr lst))) ; step on the second group of elements
          (cond (<???> #t)           ; if there's only one or zero elements left
                (<???> #f)           ; if the second element is not equal to `elt`
                (else (loop (cddr lst)))))))) ; otherwise continue iterating 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:18:12.003

让我们看一下 的例子`(compare? '(1 x 2 x 3 x 4))`。

您要确保这`(compare? '(2 x 3 x 4))`是真的，并且`1 x`之前的也匹配。

这意味着您要确保它`(compare? '(3 x 4))`是正确的（根据定义，它是真实的），并且`2 x`之前的也匹配。

注意我们每次是如何处理越来越小的列表的。我们可以这样做，因为列表具有结构归纳。由于结构归纳，您实际上不必知道列表的长度。该算法仅适用于越来越小的子列表，直到达到基本情况。

* * *

骨骼解决方案示例（`<???>`用合适的代码填写）：

```
(define (compare? lst)
  (if (or (null? lst) (null? (cdr lst)))
      #t
      (let ((item (cadr lst))
            (next (compare? (cddr lst))))
        (case next
          ((#f) <???>)
          ((#t) <???>)
          (else (and <???> <???>)))))) 
```

（从技术上讲，该`#f`子句不是必需的，但它可能会让您更清楚解决方法应该是什么。）

`#t`只有当列表中匹配的插槽不是或时，此解决方案才能正常工作`#f`。由于您在示例中使用了符号，因此它将正常工作。

# java - Mockito - 深度存根

> ID：13498094
> 
> 赞同：3
> 
> 时间：2012-11-21T16:50:49.517
> 
> 标签：java, junit, mockito

我正在使用 Mockito 来测试我的课程。我正在尝试使用深度存根，因为我没有办法将 Mock 注入 Mockito 中的另一个模拟对象中。

```
class MyService{

    @Resource
    SomeHelper somehelper;

    public void create()
    {
        //....
        somehelper.invokeMeth(t);
    }
}

class SomeHelper{
    @Resource
    private WebServiceTemplate webServiceTemplate;

    public void invokeMeth(T t)
    {
        try{
            //...
            webServiceTemplate.marshalSendAndReceive(t);
        }catch (final WebServiceIOException e) {
            throw new MyAppException("Service not running");
        }
    }
} 
```

现在我正在尝试对 MyService 类的 create() 方法进行单元测试。我为 SomeHelper 注入了一个模拟如下

```
@Mock(answer = Answers.RETURNS_DEEP_STUBS)
SomeHelper somehelper; 
```

我现在想要的是，当在模拟的 somehelper 对象上调用 invokeMeth() 方法时，它在这种情况下调用真正的方法。

```
when(somehelper.invokeMeth(isA(RequestObject.class)))
    .thenCallRealMethod(); 
```

在这种情况下，我期望 webServiceTemplate 不为空。

但是，当代码尝试执行该行时，我得到一个 Nullpointer 异常

```
webServiceTemplate.marshalSendAndReceive(t); 
```

任何线索我如何可以访问一个深度模拟对象（即模拟中的模拟 - 在这种情况下是 somehelper 模拟中的 webserviceTemplete 模拟）然后应用一个 when 条件来抛出一个 WebserviceIOException ？我想要这个，以便我可以测试 MyService.create() 以检查当 WebServiceIOException 被抛出代码时它的行为是否正确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T19:07:41.147

是的，当然，您正在混合*真实对象*和模拟。加上`thenCallRealMethod`像部分模拟一样使用lloks，这里感觉不对，难怪[这个方法的javadoc也](http://docs.mockito.googlecode.com/hg/latest/org/mockito/stubbing/OngoingStubbing.html#thenCallRealMethod%28%29)谈到了这一点。

我肯定应该强调你，而不是设计明智的，有一个返回模拟的模拟通常是一种气味。更准确地说，您违反**了得墨忒耳定律**，或者没有遵循“**告诉，不问”**的原则。

任何看你的代码我都不知道为什么代码需要 mock `WebServiceTemplate`。你想进行单元测试`MyService`，我看不出与`WebServiceTemplate`. 相反，您应该只关注与您的助手的交互。`SomeHelper` **并单独**进行单元测试，您将能够检查 和 之间的`SomeHelper`交互`WebServiceTemplate`。

这是我如何看待这件事的一个小例子：

```
public void ensure_helper_is_used_to_invoke_a_RequestObject() {
  // given a service that has an helper collaborator
  ... other fixture if necessary

  // when
  myService.behaviorToTest();

  // then
  verify(someHelperMock).invokeMeth(isA(RequestObject.class));
} 
```

那些寻找你真正用例的人怎么样？

希望有帮助

# php - Symfony2 和拖放功能

> ID：13498096
> 
> 赞同：0
> 
> 时间：2012-11-21T16:51:00.937
> 
> 标签：php, jquery, symfony, drag-and-drop

我有一个 Symfony 2 项目，在我的观点中，我有一些作者的列表。我想要的是让用户可以从列表中删除作者并更改他们在列表中的位置

我知道这可以通过 jquery 实现，但是是否有任何 Symfony2 内置函数。

我已经阅读了有关 symfony 1 的 draggable_element() 助手的信息，但没有太多关于：[http ://symfony.com/legacy/doc/book/1_0/en/11-Ajax-Integration#chapter_11_sub_drag_and_drop](http://symfony.com/legacy/doc/book/1_0/en/11-Ajax-Integration#chapter_11_sub_drag_and_drop)

你有我怎么做这个的例子吗？有教程会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:59:11.460

您可能应该从关于[创建表单集合](http://symfony.com/doc/2.0/cookbook/form/form_collections.html)的食谱文章开始。但是，您可能需要为拖放创建自己的 JavaScript。

另外，请查看[KNP Bundles](http://knpbundles.com/)，这是一组 Symfony 捆绑包的精彩列表，它们可能有助于您的项目的此功能或其他功能。

# ios - iOS 中的布尔值转换

> ID：13498097
> 
> 赞同：-1
> 
> 时间：2012-11-21T16:50:04.807
> 
> 标签：ios, ios6

当我尝试使用`performSelectorOnMainThread`此方法更改按钮的隐藏值时：

```
[pictureButton performSelectorOnMainThread:@selector(setHidden:) withObject:NO waitUntilDone:YES]; 
```

但是这个：

```
[pictureButton performSelectorOnMainThread:@selector(setHidden:) withObject:YES waitUntilDone:YES]; 
```

给出这个错误：

```
Cannot initialize a parameter of type 'id' with an rvalue of type 'signed char' 
```

会发生什么样的内部转换来创建此错误？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T16:56:07.943

该参数名为`withObject:`。BOOL 不是对象，但`nil`可以传入，并且`NO`等价于它，因此您的第一个示例有效（偶然）。

您有几个选择，但最简单的可能是使用 GCD 并在主线程的块中执行 setHidden: 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T17:18:07.870

在 performSelector 方法中，您必须传递一个对象，如 jrturton 回答中所述。但是...... BOOL 类型不是原始类型

这里有关 BOOL 的更多信息：[http ://weblog.bignerdranch.com/564-bools-sharp-corners/](http://weblog.bignerdranch.com/564-bools-sharp-corners/)

你可以使用这个技巧

```
[pictureButton performSelectorOnMainThread:@selector(setHidden:) withObject:nil waitUntilDone:YES];  // this is a setHidden:NO

[pictureButton performSelectorOnMainThread:@selector(setHidden:) withObject:self waitUntilDone:YES];  // this is a setHidden:YES 
```

我使用了 self，但你可以使用任何现有的对象。这将是真的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T17:17:54.267

如果你做这个测试：

```
NSArray *array = [NSArray arrayWithObjects:@"a", NO, @"b", nil];
NSLog("%@", array); 
```

你会发现数组中只有一个对象“a”，这意味着布尔值`NO`等于`nil`。所以实际上你的工作代码确实是这样的

```
[pictureButton performSelectorOnMainThread:@selector(setHidden:) withObject:nil waitUntilDone:YES]; 
```

这是可以接受的。

实际上，如果你做这个测试：

```
NSArray *array = [NSArray arrayWithObjects:@"a", [NSNumber numberWithBool:NO], @"b", nil];
NSLog("%@", array); 
```

你会发现数组中有三个对象：“a”“0”和“b”。所以在你的代码中，你应该这样调用：

```
[pictureButton performSelectorOnMainThread:@selector(setHidden:) withObject:[NSNumber numberWithBool:YES/NO] waitUntilDone:YES]; 
```

希望有帮助！

# jpa - 使用 Hbase 的 Datanuclues 无法通过 JPA 处理集合

> ID：13498103
> 
> 赞同：-2
> 
> 时间：2012-11-21T16:51:13.897
> 
> 标签：jpa, hbase, datanucleus

有没有人通过 JPA 使用 Datanucleus 使用 HBase。我正在努力让 Datanucleus 从数据存储区为我获取集合。任何指针将不胜感激！

依赖： [https ://github.com/ravindranathakila/www.ilikeplaces.com/blob/master/pom.xml](https://github.com/ravindranathakila/www.ilikeplaces.com/blob/master/pom.xml)

持久性.xml： [https ://github.com/ravindranathakila/www.ilikeplaces.com/blob/master/src/main/resources/META-INF/persistence.xml](https://github.com/ravindranathakila/www.ilikeplaces.com/blob/master/src/main/resources/META-INF/persistence.xml)

orm.xml：（有或没有虽然没有区别） [https://github.com/ravindranathakila/www.ilikeplaces.com/blob/master/src/main/resources/META-INF/orm.xml](https://github.com/ravindranathakila/www.ilikeplaces.com/blob/master/src/main/resources/META-INF/orm.xml)

该代码适用于 OpenJPA 和 Apache Derby 数据库，所以我应该说 JPA 没有大的缺陷。

再次感谢一些帮助或失败案例！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:51:53.680

如果您使用 maven 在 datanucleus 上构建，最好的方法是[下载](http://sourceforge.net/projects/datanucleus/files/datanucleus-accessplatform/)捆绑的库并为它们提供系统路径（去 HBase 完整包和发布版本）。这将节省您解决冲突和丢失 jar 的大量时间。

接下来是加强课程。这可以按照[这里](http://www.datanucleus.org/products/datanucleus/enhancer.html)提到的来完成。如果您一直遇到依赖问题，请尝试那里提到的不同方法（理论上，您不应该这样做，因为您正在使用下载的库，除非与同一文件的不同版本或 HBase-Zookeeper 版本存在版本冲突）

虽然这不能解决上述问题，但我赞同这个答案的问题，以帮助其他人在缩小与此相关的问题范围内向前迈进。

# excel - Excel 的 FALSE 是否像无穷大？

> ID：13498107
> 
> 赞同：4
> 
> 时间：2012-11-21T16:50:31.763
> 
> 标签：excel

为什么`=FALSE<10000000000`评估为`FALSE`和`=FALSE>10000000000`评估为`TRUE`？我尝试了一些不同的数字，这似乎总是如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T20:57:33.060

这是设计使然。搜索“排序疑难解答”的帮助以查看默认排序顺序。

> 在升序排序中，Microsoft Excel 使用以下顺序。
> 
> 数字：数字从最小的负数到最大的正数排序。
> 
> 字母数字排序：当您对字母数字文本进行排序时，Excel 会从左到右逐个字符地排序。例如，如果单元格包含文本“A100”，Excel 会将单元格放置在包含条目“A1”的单元格之后和包含条目“A11”的单元格之前。
> 
> 包含数字的文本和文本按以下顺序排序：
> 
> 0 1 2 3 4 5 6 7 8 9（空格）！" # $ % & ( ) * , . / : ; ? @ [ \ ] ^ _ ` { | } ~ + < = > ABCDEFGHIJKLMNOPQRSTU VWXYZ
> 
> 撇号 (') 和连字符 (-) 将被忽略，但有一个例外：如果两个文本字符串除连字符外相同，则带有连字符的文本排在最后。
> 
> 逻辑值：在逻辑值中，FALSE 放在 TRUE 之前。
> 
> 错误值：所有错误值都相等。
> 
> 空白：空白总是放在最后。

默认排序顺序很重要，因为这就是 Excel 设计用于比较不同数据类型的方式。逻辑值总是在文本和数字之后。错误值总是在那之后。空白总是最后的。当您使用比较运算符（<、<=、= 等）时，它使用与排序相同的比较算法（或者更可能的是，排序算法使用比较运算符代码，这使得它们相同）。

`TRUE<>1`根据排序顺序，但是`--TRUE=1`. 公式解析器识别出您正在尝试否定某些内容。如果它是布尔值，则将其转换为 0 或 1。布尔值没有 0-ish 或 1-ish，它只是内部类型强制函数的结果。如果你键入`--"SomeString"`它会做同样的事情。它将字符串发送到类型强制函数，该函数返回“无法强制”并以 #VALUE 结尾！在细胞中。

这就是“为什么它会这样”的答案。我不知道“他们为什么要这样设计”的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T17:37:58.210

显然，布尔值 TRUE/FALSE 是与数字不同的数据类型。检查此（[http://msdn.microsoft.com/en-us/library/office/bb687869.aspx](http://msdn.microsoft.com/en-us/library/office/bb687869.aspx)）以查看布尔变量存储在 2 字节中（或对于特定体系结构的任何短整数）。然而，这是存储数据的内存，因为 excel 实际上有一个用于布尔变量的特殊数据类。具体来说：xltypeNum 用于数字，xltypeStr 用于字符串，xltypeBool 用于我们讨论的内容。

相同类型之间的关系很清楚，现在 TRUE<1000 做了什么？可能没有什么有意义的有用的。

克服这个问题的方法：

```
=ABS(BOOLEAN_VAR), i.e.  =ABS(FALSE) --> 0 and =ABS(TRUE)  --> 1 
```

或者

```
=INT(BOOLEAN_VAR), i.e.  =INT(FALSE) --> 0 and =INT(TRUE)  --> 1 
```

或者

```
=BOOLEAN_VAR*1,  i.e.  =FALSE*1 --> 0 and =TRUE*1  --> 1 
```

或者

```
=+BOOLEAN_VAR,  i.e.  =+FALSE --> 0 and =+TRUE  --> 1 
```

正如您在这些方式中看到的那样，您可以通过将布尔值提供给函数或在表达式中使用布尔变量来强制 excel 输出数字类型的数据。

# c# - 仅将唯一项目添加到列表

> ID：13498111
> 
> 赞同：98
> 
> 时间：2012-11-21T16:51:43.787
> 
> 标签：c#, .net, c#-4.0

我正在将远程设备添加到列表中，因为它们通过网络宣布自己。如果之前没有添加过，我只想将设备添加到列表中。

通知来自异步套接字侦听器，因此添加设备的代码可以在多个线程上运行。我不确定我做错了什么，但无论我尝试什么，最终都会出现重复。这是我目前拥有的......

```
lock (_remoteDevicesLock)
{
    RemoteDevice rDevice = (from d in _remoteDevices
                            where d.UUID.Trim().Equals(notifyMessage.UUID.Trim(), StringComparison.OrdinalIgnoreCase)
                            select d).FirstOrDefault();
     if (rDevice != null)
     {
         //Update Device.....
     }
     else
     {
         //Create A New Remote Device
         rDevice = new RemoteDevice(notifyMessage.UUID);
         _remoteDevices.Add(rDevice);
     }
} 
```

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2012-11-21T16:55:05.233

如果您的要求是没有重复，您应该使用[HashSet](http://msdn.microsoft.com/en-us/library/bb359438.aspx)。

[当项目已经存在时， HashSet.Add](http://msdn.microsoft.com/en-us/library/bb353005.aspx)将返回**false**（如果这对您来说很重要）。

您可以使用@pstrjds 链接到下面（或[此处](http://msdn.microsoft.com/en-us/library/bb359100%28v=vs.100%29.aspx)）的构造函数来定义相等运算符，或者您需要在`RemoteDevice`( `GetHashCode`& `Equals`) 中实现相等方法。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-11-07T13:51:22.167

```
//HashSet allows only the unique values to the list
HashSet<int> uniqueList = new HashSet<int>();

var a = uniqueList.Add(1);
var b = uniqueList.Add(2);
var c = uniqueList.Add(3);
var d = uniqueList.Add(2); // should not be added to the list but will not crash the app

//Dictionary allows only the unique Keys to the list, Values can be repeated
Dictionary<int, string> dict = new Dictionary<int, string>();

dict.Add(1,"Happy");
dict.Add(2, "Smile");
dict.Add(3, "Happy");
dict.Add(2, "Sad"); // should be failed // Run time error "An item with the same key has already been added." App will crash

//Dictionary allows only the unique Keys to the list, Values can be repeated
Dictionary<string, int> dictRev = new Dictionary<string, int>();

dictRev.Add("Happy", 1);
dictRev.Add("Smile", 2);
dictRev.Add("Happy", 3); // should be failed // Run time error "An item with the same key has already been added." App will crash
dictRev.Add("Sad", 2); 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2016-03-16T21:17:16.550

就像接受的答案说 HashSet 没有订单一样。如果顺序很重要，您可以继续使用列表并在添加之前检查它是否包含该项目。

```
if (_remoteDevices.Contains(rDevice))
    _remoteDevices.Add(rDevice); 
```

在自定义类/对象上执行 List.Contains() 需要`IEquatable<T>`在自定义类上实现或覆盖`Equals`. `GetHashCode`在类中实现也是一个好主意。这是根据[https://msdn.microsoft.com/en-us/library/ms224763.aspx上的文档](https://msdn.microsoft.com/en-us/library/ms224763.aspx)

```
public class RemoteDevice: IEquatable<RemoteDevice>
{
    private readonly int id;
    public RemoteDevice(int uuid)
    {
        id = id
    }
    public int GetId
    {
        get { return id; }
    }

    // ...

    public bool Equals(RemoteDevice other)
    {
        if (this.GetId == other.GetId)
            return true;
        else
            return false;
    }
    public override int GetHashCode()
    {
        return id;
    }
} 
```

# iphone - 如何使用 xcodebuild 归档 iOS 构建？

> ID：13498116
> 
> 赞同：1
> 
> 时间：2012-11-21T16:50:51.750
> 
> 标签：iphone, ios, build-automation, xcodebuild

我正在尝试创建一个脚本来构建和归档我的 iOS 项目。我的目标是拥有一个创建 AdHoc 和 Distribution ipa 的脚本。

我尝试过这样的事情：

```
xcodebuild -scheme MyApp -configuration AdHoc archive 
```

当我在终端中执行此命令时它可以工作。但是当我把它放在一个 shell 脚本文件中然后从终端运行它时：

```
sudo sh /Users/user/somepath/buildscript.sh 
```

我收到以下错误：

```
Provisioning profile 'XXX-XXX-XXX-XXX-XXX' can't be found 
```

你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:55:16.920

脚本的`sudo`调用找不到它需要的内容，因为所需的证书和配置文件将存储在您帐户的钥匙串和 Xcode 库目录中。`sudo`将以看不到这些的管理员身份运行。

无论如何，您都不需要使用`sudo`。构建过程的哪一部分需要 root 权限？如果您想以某种方式隔离此命令，请创建一个专门用于构建的新用户，但在用户的钥匙串中安装适当的证书，并在以该用户身份登录时将配置文件拖到 Xcode 中。

# c++ - 声明语法错误

> ID：13498117
> 
> 赞同：0
> 
> 时间：2012-11-21T16:51:57.113
> 
> 标签：c++, console-application

这个有什么问题？编译器说：声明语法错误。

源文件：

```
#include<iostream>
using namespace std;
int main(int argc, char **argv) {
    void printBinary(const unsigned char val) {
        //printBinary() func. outputs byte in binary
        for(int i=7;i>=0;i--)
            if(val & (1<<i))  //generates a single bit with offset position
                std::cout<<"1";
            else
                std::cout<<"0"
    }
    return 0;
}///:~ 
```

头文件：

```
void printBinary(const unsigned char val);
///:~ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T16:54:13.537

您试图在另一个函数中定义一个函数。这是非法的。你为什么把 的 定义`printBinary`放到 的 正文中`main`？

除了 C++11 中的 lambda 函数，C++ 没有局部函数这样的特性。所有函数都“存在”在命名空间范围内。

此规则的唯一解决方法是本地类的内联成员函数定义，尽管它也不产生本地函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T16:54:25.843

您不能在另一个函数（在本例中为`main`）的主体中定义一个函数。

//编辑：当然，除非它是 lambda。

# php - if (!empty($thing)) 与 if($thing)

> ID：13498118
> 
> 赞同：5
> 
> 时间：2012-11-21T16:50:57.053
> 
> 标签：php, conditional-statements

这两个语句的执行是否相同，`$thing`可以是任何类型？

```
if (!empty($thing)) {
    // do stuff
}

if ($thing) {
    // do stuff
} 
```

我知道我可以尝试一下，但我不确定我会抓住所有边缘情况......我担心在某些情况下它们会以相同的方式执行，但不是全部。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T16:55:46.050

如果`$thing`未定义，`if ($thing)`则将抛出（非致命）错误，同时`if (!empty($thing))`返回 false。

请参阅PHP 文档中的[empty()](http://php.net/manual/en/function.empty.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T17:02:29.800

`if (empty($foo))`是 的负数，在[类型比较表](http://php.net/manual/en/types.comparisons.php)`if ($foo)`中很容易看出，这意味着在最低级别：

```
if (!empty($foo)) 
```

在逻辑上与

```
if ($foo) 
```

*但是*，对于未定义的变量或数组索引，`if ($foo)`and`if ($foo['bar'])`会导致 an`E_WARNING`发生，while`if (!empty($foo))`和`if (!empty($foo['bar']))`will**不会**。

为此，您应该更喜欢`empty`and`!empty`在变量或索引可能不存在的情况下，例如 with`$_GET`或`$_POST`。在变量或索引*应该*存在的情况下，您应该更喜欢`$var`并且`!$var`特别是跟踪引发的警告，因为它们可能是由于错误造成的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T17:04:19.263

相关手册页正在[转换为布尔值](http://www.php.net/manual/en/language.types.boolean.php#language.types.boolean.casting)，当然还有[empty()](http://php.net/empty)。因为`empty()`我们有这个：

> 如果一个变量不存在或者它的值等于`FALSE`

所以它们是完全等价的，除非在变量不存在的情况下。在这种情况下：

```
var_dump( empty($not_exists), (bool)$not_exists ); 
```

...我们得到：

```
bool(true)
bool(false) 
```

...（在相应的 中`notice`）因为：

> 考虑以下值`FALSE`： [...] 未设置的变量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T17:11:03.060

根据手册有一些差异，例如：

```
$object = new stdclass;
if ($object) {} // false in PHP 4, true in PHP 5+ 
```

此外，您只能将变量传递给`empty`，这将引发错误：

```
if (empty(time()) {}
// Fatal error: Can't use function return value in write context

if (time()) {} // OK 
```

当然，`if ($var)`对一个未初始化的变量会产生一个通知。

`if ($var)`是一个隐式的布尔转换。有关详细信息，请参阅手册。

> [http://php.net/manual/en/language.types.boolean.php](http://php.net/manual/en/language.types.boolean.php)
> 
> 转换为布尔值时，以下值被视为 FALSE：
> 
> *   布尔值 FALSE 本身
> *   整数 0（零）
> *   浮点数 0.0（零）
> *   空字符串和字符串“0”
> *   一个元素为零的数组
> *   具有零成员变量的对象（仅限 PHP 4）
> *   特殊类型 NULL（包括未设置的变量）
> *   从空标签创建的 SimpleXML 对象
> 
> 其他所有值都被视为 TRUE（包括任何资源）。

相比于`empty`

> [http://php.net/manual/en/function.empty.php](http://php.net/manual/en/function.empty.php)
> 
> 以下内容被认为是空的：
> 
> *   ""（一个空字符串）
> *   0（0 为整数）
> *   0.0（0 作为浮点数）
> *   "0" (0 作为字符串)
> *   空值
> *   错误的
> *   array() （一个空数组）
> *   $var; （声明的变量，但没有值）

所以它们基本相同，但有一些非常细微的区别。谨慎使用两者，并尽可能进行类型检查。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T17:11:13.403

在某些情况下，空可能会爆炸，其中最大的是`0`价值

```
php > $x = 0;
php > var_dump(empty($x));
bool(true)
php > $x = false;
php > var_dump(empty($x));
bool(true); 
```

只要您不需要 0/false 值通过，那么 empty() 效果很好。

# c# - 我应该如何异步使用 Directory.EnumerateFileSystemEntries()？

> ID：13498121
> 
> 赞同：1
> 
> 时间：2012-11-21T16:52:05.850
> 
> 标签：c#, async-await

我正在使用 C# 和 .Net 4.5 在 VS 2012 中创建一个项目。我需要遍历目录树，但我想异步进行。我想我必须对 Task 类做点什么，但我不确定。我还需要能够报告该过程的进展。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T16:59:00.093

只需将整个函数包装进去`Task.Run(()=>{ ... });`，它将在线程池线程中异步运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:14:38.547

你可以使用[`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx). 它非常有用，因为它可以实现`RunWorkerProgress`事件`RunWorkerCompleted`处理程序，您可以使用它们来报告进度并找出它何时完成处理。关于进度，您将无法估计仅使用方法完成的工作部分`Directory.EnumerateFileSystemEntries()`（因为您不知道会有多少目录/文件），但您将能够向用户展示您处理了多少条路径（或类似路径）。

# django-views - AngularJs - 如何防止预加载内容的路由更改

> ID：13498123
> 
> 赞同：1
> 
> 时间：2012-11-21T16:52:11.897
> 
> 标签：django-views, angularjs

我正在为 django 应用程序编写一个简单的 angularJS 层。在初始页面加载时，视图内容已填充到 ng-view 节点中。当我“手动”执行路由更改（通过 ng-click 回调）时，我向服务器发出请求以获取 chromeless html 内容并覆盖 ng-view 节点的内容。

我的问题是，在初始页面加载时，会执行路由更改，因此会再次调用服务器以获取预先填充在 ng-view 节点中的相同内容。

我不确定这是否只是 Angular 的工作方式，还是 django 使用斜杠而 angular 没有，因此认为这是一条不同的路线？

有没有办法防止这种情况发生？也许取消 $routeChangeStart 事件的更改？

谢谢！很长时间的读者，第一次海报。

# android - Android base adapter on item click 我要检索包名 属于下一个活动中的应用程序标签

> ID：13498124
> 
> 赞同：1
> 
> 时间：2012-11-21T16:51:15.023
> 
> 标签：android

我正在尝试使用基本适配器在活动 1 中的列表中显示应用程序名称和图标，如下所示。

```
public class MainActivity extends Activity {
    private static final String TAG_Name = "name";
    private static final String TAG_Logo = "logo";

    @SuppressLint("NewApi")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        TextView i = (TextView) findViewById(R.id.textView1);

        ListAdapter mAdapter = ListAdapter.getInstance();

        mAdapter.setAdapterData(this.getApplicationContext());
        final ListView listView = (ListView) findViewById(R.id.my_list);
        listView.setAdapter(mAdapter);
        mAdapter.notifyDataSetChanged();
        i.setText(String.valueOf(ListAdapter.getInstance().getCount()));

        listView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // TODO Auto-generated method stub

                 String a = ((TextView)
                 view.findViewById(R.id.text)).getText()
                 .toString();
                 int n = position;
                 Bitmap bitmap = ((BitmapDrawable)((ImageView)
                 view.findViewById(R.id.image))
                 .getDrawable()).getBitmap();

                 // Starting new intent
                 Intent in = new Intent(getApplicationContext(),
                 Application_Perm.class);

                 in.putExtra(TAG_Name, a);
                 in.putExtra(TAG_Logo, bitmap);
                 in.putExtra("TAG", n);
                 startActivity(in);

            }
        });
    }
} 
```

但我不知道的是，当我想在活动 2 中显示包名称时，我传递了选择应用程序名称和图标。**在这里我想显示所选应用程序名称的包名称。**

```
public class Application_Perm extends Activity {

    private static final String TAG_Name = "name";
    private static final String TAG_Logo = "logo";
    String name;
    TextView pack;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.perm);

        ImageView image = (ImageView) findViewById(R.id.logo);
        TextView app = (TextView) findViewById(R.id.textpermapp);
        pack = (TextView) findViewById(R.id.pa_info);

        Intent intent = getIntent();
        name = intent.getStringExtra(TAG_Name);
        Bitmap bitmap = (Bitmap) this.getIntent().getParcelableExtra(TAG_Logo);

        app.setText(name);
        image.setImageBitmap(bitmap);

    }

} 
```

**基本适配器**

```
public class ListAdapter extends BaseAdapter {

    private static ListAdapter self = null;
    private Context context = null;
    private List<MyAppInfo> list = null;
    private LayoutInflater mInflater = null;

    private ListAdapter() {

    }

    public static ListAdapter getInstance() {
        if (self == null) {
            self = new ListAdapter();
        }

        return self;
    }

    public synchronized void setAdapterData(Context context) {
        this.context = context;
        mInflater = LayoutInflater.from(this.context);
        list = new ArrayList<MyAppInfo>();
        generate();

    }

    private void generate() {
        PackageManager pm = context.getPackageManager();
        List<ApplicationInfo> packages = pm
                .getInstalledApplications(PackageManager.GET_META_DATA);

        for (ApplicationInfo applicationInfo : packages) {
            if ((applicationInfo.flags & ApplicationInfo.FLAG_SYSTEM) != 1) {

                list.add(new MyAppInfo("" + applicationInfo.loadLabel(pm),
                        applicationInfo.loadIcon(pm)));
            }
        }

    }

    public synchronized int getCount() {
        return list.size();
    }

    @Override
    public Object getItem(int position) {
        return list.get(position);

    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.list_item, parent, false);
        }
        MyAppInfo info = list.get(position);

        TextView text = (TextView) convertView.findViewById(R.id.text);
        ImageView image = (ImageView) convertView.findViewById(R.id.image);

        text.setText(info.appName);
        image.setImageDrawable(info.icon);

        return convertView;
    }
} 
```

# eclipse-rcp - 如何更新视图标题

> ID：13498126
> 
> 赞同：4
> 
> 时间：2012-11-21T16:52:19.403
> 
> 标签：eclipse-rcp, rcp

我正在尝试以编程方式更新视图的标题（即：选项卡中显示的文本）。

当我这样做时：

```
view.setPartName(newTitle); 
```

视图名称更新得很好，但 UI 没有。那么我该怎么做呢？

先感谢您！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T02:43:58.503

您需要确保在正确的 init 方法中设置 partName 并且在像这样设置部件名称之前调用 super 。我知道这个例子是从我的应用程序中粘贴的。

```
@Override
public void init(IViewSite site) throws PartInitException {
    super.init(site);
    String scannerName = site.getSecondaryId();
    setPartName("MyName");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T17:09:07.600

我正在毫无问题地更新视图的标题...您何时调用 setPartName 方法？

在我的扩展类中`ViewPart`，我在`setPartName`方法中调用`init`方法。

# regex - 非字母、数字、换行符或 | 字符的正则表达式

> ID：13498127
> 
> 赞同：-1
> 
> 时间：2012-11-21T16:52:23.160
> 
> 标签：regex

任何人都可以提供正则表达式来查找任何不是字母、数字换行符或 | 的字符吗？垂直线（我不知道它的名字）

我有很多这样的文本行

```
929|10|10|1||S|N|||||||N|N| 
```

我想找到奇怪的字符

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T16:57:04.440

您在说的是“字符类”。

字符类类似于`[a-f]`表示字母`a`或。`b``c`

把 a`^`放在开头就是对它的否定。

所以你想要`[^\da-zA-Z\n|]`.

垂直线称为“管道”或“垂直条”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T16:52:31.590

> 非字母、数字、换行符或 | 字符的正则表达式

```
[^a-zA-Z\d\n|] 
```

> 我想找到不符合条件的角色

使用`[^a-zA-Z\d\n|]`并遍历您找到的匹配项直到最后..

> 我想找到奇怪的字符

`.(.)`

`$1`包含奇数字符..继续迭代所有其他奇数字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T16:56:48.550

单个字符，而不是数字、管道或换行符。

```
[^\da-zA-Z|\n] 
```

# javascript - 分配的属性显示为未定义

> ID：13498132
> 
> 赞同：1
> 
> 时间：2012-11-21T16:52:34.617
> 
> 标签：javascript, properties

我正在做ajax。在某个时刻，我分配`someproperty`给由 id 选择的 DOM 对象（假设它是`12345`），并且我确认该值已通过使用分配`alert()`：

```
window.document.getElementById('12345').someproperty = true;
alert(window.document.getElementById('12345').someproperty); 
```

此时，警报正确显示`true`。然后，在稍后的某个时间点，我调用了一个 javascript 命令来查找`someproperty`对象的值：

```
alert(window.document.getElementById('12345').someproperty); 
```

而这一次，它显示`undefined`。为什么没有定义值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:02:25.777

我有一种感觉，您在`.innerHTML`查找`.someproperty`.

分配给`.innerHTML`会破坏当前的 DOM，并将其替换为通过解析您提供的 HTML 字符串获得的新 DOM。所以我猜你正在破坏整个部分，并用几乎相同的新部分替换它。这自然会清除原始 DOM 中的状态信息。

您应该修改需要更新的单个 DOM 元素，而不是使用`.innerHTML`.

# database - 使用依赖类型来提供编译类型证明某个整数是数据库中的有效行 ID？

> ID：13498141
> 
> 赞同：6
> 
> 时间：2012-11-21T16:52:17.407
> 
> 标签：database, dependent-type

在我对依赖型土地永无止境的奇迹中，一个奇怪的想法出现在我的脑海中。我做了很多数据库编程，如果我能摆脱所有那些健全性检查和有效性检查，那就太好了。一个特别烦人的情况是那些接受 Integer 并期望它是某个特定表的有效行 ID 的函数。一个非常愚蠢的例子是：

```
function loadStudent(studentId: Integer) : Student 
```

假设我选择的语言完全支持依赖类型，是否可以利用类型系统`loadStudent`只接受有效值`studentId`：

```
function loadStudent(studentId : ValidRowId("students_table") ) : Student 
```

如果是，我如何为`ValidRowId`类型编写数据构造函数？到目前为止，我看到的所有示例都是纯的（不涉及 IO）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T15:42:28.200

也许我误解了这个问题，但我不明白不做 IO 怎么可能。如果不搜索数据库以查看是否存在具有该 id 的记录，您如何知道该 id 是有效的？

我想您可以在程序启动时将所有当前 ID 读入内存中的表中，然后对此进行检查。但是您必须以某种方式知道其他用户在您创建表后是否添加或删除了记录。

好的，您可以让访问数据库的所有计算机上的所有线程与某个中央服务器通信，该服务器保留此主列表，以便它始终是最新的。但是我们已经有一个中心位置来跟踪数据库中当前使用的所有 ID：它被称为“数据库”。做一大堆工作来维护数据库上数据子集的副本有什么好处？您不太可能获得很大的性能提升，并且您可能会创建代码中的错误、不良连接等导致数据不同步的可能性。

# model-view-controller - 从 ArrayController 显示 HTML

> ID：13498142
> 
> 赞同：0
> 
> 时间：2012-11-21T16:53:21.690
> 
> 标签：model-view-controller, ember.js

我正在尝试将控制器中的一些信息显示到我的视图中，但未显示该信息。

到目前为止，我有一个小提琴来演示我的代码：

[小提琴](http://jsfiddle.net/mbodmer/hKPQy/26/)

如果我在控制台中检查 MovieTracker.movi​​eController.content，就会显示 2 个对象。但是，HTML 没有正确显示。可能是什么问题呢？

这是我的观点：

```
<script type="text/x-handlebars">
{{#each MovieTracker.movieController}}
    <h2>{{title}}</h2>
    <h3>{{rating}}</h3>
{{/each}} 
```

​</p>

还有我的 Ember 应用程序 + 控制器：

```
// Create our Application
MovieTracker = Ember.Application.create();

// Inherit outlet Support
MovieTracker.ApplicationController = Ember.Controller.extend();

// ArrayController to create some new Movies
MovieTracker.movieController = Ember.ArrayController.create({
content: [], 
init: function(){
    var kidsMovie = MovieTracker.Movie.create({
        title: 'Toy Story',
        rating: 4
    });
    this.pushObject(kidsMovie);

    var avengers = MovieTracker.Movie.create({
        title: 'The Avengers',
        rating: 5
    });
    this.pushObject(avengers);
}
});

// Start our Ember Application
MovieTracker.initialize();​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:22:51.450

我已经更新了您的小提琴（请参见此处：http: [//jsfiddle.net/schawaska/hKPQy/24/](http://jsfiddle.net/schawaska/hKPQy/24/)）以将“电影”视图绑定到您的控制器实例，并且还添加了一个与控制器内容绑定的内容属性。还添加了对最新版本 ember 和车把的引用。

现在你有几个模板：

```
<script type="text/x-handlebars" data-template-name="application">
    <h1>Movie Tracker</h1>
    {{view MovieTracker.MovieTrackerView }}
</script>

<script type="text/x-handlebars" data-template-name="movie-tracker">
    Movies:<br />
    {{#each movie in content}}
        <h2>{{movie.title}}</h2>
        <h3>{{movie.rating}}</h3>
    {{/each}}
</script> 
```

现在，您的`each`助手将遍历一个集合，将每个值分配给`movie`，这是您的模型（也缺少，所以我创建了一个）及其属性。

您的控制器和视图如下所示：

```
MovieTracker.moviesController = Ember.ArrayController.create({
    content: [], 
    init: function(){
        // you missed the call to _super()
        this._super();

        var list = [
            MovieTracker.MovieModel.create({
                title: 'Toy Story',
                rating: 4
            }),
            MovieTracker.MovieModel.create({
                title: 'The Avengers',
                rating: 5
            })];

        // also, it's a good idea to use .set whenever you can
        this.set('content', list);
    }
});

MovieTracker.MovieTrackerView = Em.View.extend({
    templateName: 'movie-tracker',
    controllerBinding: 'MovieTracker.moviesController',
    contentBinding: 'controller.content'
}); 
```

# objective-c - 用户接受后，iRate 会自动停止征求评论吗？

> ID：13498145
> 
> 赞同：0
> 
> 时间：2012-11-21T16:52:27.470
> 
> 标签：objective-c, ios, xcode, cocoa, irate

我即将发布我的第一个愤怒的应用程序，出于好奇，我想知道如果用户对其进行评价，它是否会自行停止弹出消息，或者我需要输入某种特殊代码。请仅在您处理 iRate for iPhone 应用程序时回答。 [https://github.com/nicklockwood/iRate](https://github.com/nicklockwood/iRate)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-23T12:35:17.603

我用过 iRate，它是这样工作的。

如果用户对某个版本进行评分，则不会针对该特定版本显示对应用程序评分的消息。假设有新的更新出现，那么 Rate 消息将再次开始显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:05:40.927

iRate 弹出窗口仅显示一次。如果您按下“稍后提醒我”按钮，它将再次出现，否则用户将不会再次看到它。

# oracle - Oracle查询优化帮助（涉及TRUNC）

> ID：13498146
> 
> 赞同：0
> 
> 时间：2012-11-21T16:53:29.760
> 
> 标签：oracle, date, query-optimization

这是查询。closed_ts 是一个时间戳列。我想做的是，找出今天、本月、今年和本周有多少“关闭”。有一个更好的方法吗？

```
select table_id,
  case
    when trunc(closed_ts) = trunc(SYSDATE, 'DD') then 1
    else 0
  end as day_count,
  case
    when trunc(closed_ts) >= trunc(SYSDATE, 'MM') then 1
    else 0
  end as month_count,
 case
   when trunc(closed_ts) >= trunc(sysdate, 'YYYY') then 1
   else 0
 end as year_count,
 case
   when trunc(closed_ts) >= TRUNC(sysdate, 'IW') then 1
   else 0
 end as week_count
from myTable 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:20:48.693

似乎您希望在每个案例语句周围使用 sum() 聚合值并按 table_id 分组，但是既然您询问了查询优化...

如果 closed_ts 上有索引，您将无法使用它，因为您正在截断它。截断 closed_ts 日期是不必要的，因为您正在检查它是否严格大于日、周、月、年，所以这个查询肯定会导致全表扫描。

无论在 closed_ts 上是否有索引，我都可能会在没有 trunc 的情况下重写它：

```
select table_id
      ,sum(case when closed_ts >= trunc(sysdate) then 1 else 0 end) as day_count
      ,sum(case when closed_ts >= trunc(sysdate,'MM') then 1 else 0 end) as month_count
      ,sum(case when closed_ts >= trunc(sysdate,'YYYY') then 1 else 0 end) as year_count
      ,sum(case when closed_ts >= trunc(sysdate,'IW') then 1 else 0 end) as week_count
 from myTable
group by table_id 
```

顺便说一句：table_id 听起来像是主键或代理键 - 您确定要在结果中使用它吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T21:20:09.827

在 (closed_ts,table_id) 上弹出一个索引，并在 closed_ts 上应用一个谓词，如下所示...

```
 select
   table_id,
   sum(case when closed_ts >= trunc(SYSDATE,'DD'  ) then 1 end) day_count,
   sum(case when closed_ts >= trunc(SYSDATE,'MM'  ) then 1 end) month_count,
   sum(case when closed_ts >= trunc(SYSDATE,'YYYY') then 1 end) year_count,
   sum(case when closed_ts >= trunc(SYSDATE,'IW'  ) then 1 end) week_count,
 from
   myTable
 where
   closed_ts >= least(trunc(SYSDATE,'YYYY'),trunc(SYSDATE,'IW'))
 group by
   table_id 
```

正如 user1842757 提到的，在 closed_ts 上丢失 trunc。您也可以在 case 语句中丢失 ELSE 0

# python - Python双下划线修饰

> ID：13498151
> 
> 赞同：7
> 
> 时间：2012-11-21T16:52:49.577
> 
> 标签：python, attributes, python-3.x, private-methods, double-underscore

我对这种行为有点困惑（使用 python 3.2）：

```
class Bar:
    pass

bar = Bar()
bar.__cache = None
print(vars(bar))        # {'__cache': None}

class Foo:
    def __init__(self):
        self.__cache = None

foo = Foo()
print(vars(foo))        # {'_Foo__cache': None} 
```

我已经阅读了一些关于双下划线如何导致属性名称“损坏”的内容，但我希望在上述两种情况下都会出现相同的名称损坏。

[对象名称前的单下划线和双下划线是什么意思？](https://stackoverflow.com/questions/1301346/the-meaning-of-a-single-and-a-double-underscore-before-an-object-name-in-python)

有什么想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-21T16:57:35.433

名称修改发生在`class`语句的评估期间。在 的情况下`Bar`，`__cache`属性没有被定义为类的一部分，而是在事后添加到特定对象中。

（实际上，这可能不完全正确。在评估`__new__`方法期间可能会发生名称修改；我不知道。但无论如何，您`__cache`是显式添加到单个对象中的，而不是由类代码添加的。）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-21T16:56:24.193

从[文档](https://docs.python.org/3.5/reference/expressions.html?highlight=mangling#index-5)

> 私有名称修饰：*当文本出现在类定义中的标识符*以两个或多个下划线字符开头并且不以两个或多个下划线结尾时，它被认为是该类的私有名称。在为私有名称生成代码之前，私有名称会转换为更长的形式。转换在名称前面插入类名，删除前导下划线，并在类名前面插入一个下划线。例如，`__spam`出现在名为 Ham 的类中的标识符将被转换为`_Ham__spam`. 此转换与使用标识符的语法上下文无关。如果转换后的名称非常长（超过 255 个字符），则可能会发生实现定义的截断。如果类名仅包含下划线，则不进行任何转换。

您在定义类后分配您的属性

# javascript - JavaScript 多维数组

> ID：13498154
> 
> 赞同：0
> 
> 时间：2012-11-21T16:53:57.560
> 
> 标签：javascript, arrays, multidimensional-array

我有一个学生，他参加了很多课程，每门课程都有很多模块。

到目前为止，我得到了：

```
var myStudent = new MySchool.Student("Bart", "Simpson", "0800 Reverse", "Some Street", "Springfield");

myStudent.addCourse(new MySchool.Course("S1000", "Skateboarding"));
myStudent.addCourse(new MySchool.Course("Q1111", "Driving"));
myStudent.addCourse(new MySchool.Course("D999", "Avoiding Detention")); 
```

学生.JS

```
MyStudent.Student = function (firstName, lastName, tel, address1, address2) {
    this._firstName = firstName;
    this._lastName = lastName;
    this._tel = tel;
    this._address1 = address1;
    this._address2 = address2;
    this._courses = new Array();

};

//Add course:
addCourse: function (course) {
    this._courses.push(course);
}, 
```

这工作正常。但是，我想为此添加模块。因此，每门课程都有多个模块。

我尝试过执行多维数组，但没有成功。

有人可以建议吗？有替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:02:30.753

不完全确定您的意思，但据我了解，您可以这样做：

```
MyStudent.Student = function (firstName, lastName, tel, address1, address2) {
    this._firstName = firstName;
    this._lastName = lastName;
    this._tel = tel;
    this._address1 = address1;
    this._address2 = address2;
    this._courses = [];

    this.addCourse =  function (course) {
        this._courses.push(new Course(course));
    };
};

//Add course:

MySchool.Module = function(name){
    this.name = name;
}

MySchool.Course = function(name) {

    this.name = name;
    this.modules = [];

    this.addModule = function(name) {
        this.mmodules.push(new MySchool.Module(name));
    }
} 
```

这样，您可以创建一个具有函数 addCourse 的学生。然后你添加你想要的任何课程，并且对于每门课程，你都有一个 addModule 函数来用模块填充它们。

您可以做一些更复杂的事情，例如创建一个学生，该学生将课程/模块数组作为参数，如下所示：

```
courses = [
    "poney" : [
        "ride",
        "jump"
    ],
    "english" : [
        "oral",
        "grammar",
        "written"
    ]
] 
```

然后创建一个循环遍历数组的函数，并使用 addCourse 和 addModule 函数为您的学生填充他的课程/模块。但是当您开始使用 JS 时，也许您更喜欢简单的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:00:17.600

这样做的 OO 方法是`modules`在你的课程中有一个数组，因为模块属于课程。然后您可以直接将模块添加到课程中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T17:06:54.353

这是快速和肮脏的：

```
addCourse: function (course) {
    course.modules = [];
    course.addModule = function(module){
        this.modules.push(module);
    }
    this._courses.push(course);
    return course;
} 
```

可以这样使用：

```
myStudent.addCourse(new MySchool.Course("S1000", "Skateboarding")).addModule(...); 
```

当然，最好的方法是在`Course`构造函数中处理所有这些，您还没有向我们展示。

# android - 从 Android 应用程序中锁定用户

> ID：13498156
> 
> 赞同：0
> 
> 时间：2012-11-21T16:54:08.843
> 
> 标签：android

我正在研究阻止用户进一步使用我的应用程序的能力。假设您的应用程序将运行一段时间，并且在某些事件（时间到期、应用程序启动次数等）之后，您想要锁定应用程序，或以某种方式将应用程序变砖以使其无法再使用

我考虑过将一段数据存储为内部文件或共享首选项值，以跟踪事件何时发生。我认为这里的问题是用户可以进入操作系统并简单地清除数据，这将消除锁定事件的进展。

社区是否有任何建议能够锁定无法绕过的用户，并且不需要根电话/唯一的 ROM 映像？如有必要，我的目标是 Android 4.0+，但目前最小 SDK 为 11，目标 SDK 为 15

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T16:56:32.683

我在早期测试版中通过检查日期来做到这一点，然后在特定日期之后，显示一条消息说它已经过期并执行除以 0 错误。

在他们安装后的特定时间内，您将不得不使用在线服务，或尝试隐藏 SD 卡上的文件（根本不能保证工作）。

# php - 检查 GPG/PGP 公钥是否有效

> ID：13498165
> 
> 赞同：1
> 
> 时间：2012-11-21T16:53:42.300
> 
> 标签：php, gnupg, pgp

通过网络界面，我试图检查给定的公钥是否有效。bash 命令根据给定的密钥`gpg --import key.pub`返回`import successful/failed`，但我不想`$data = system("/usr/bin/gpg --import $key)`用于我自己的安全问题。有替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:58:50.277

好的，我做了一些调试，这就是我发现的：

nginx 守护进程正在运行`nginx:nginx`，没有主目录，nologin shell

当我执行`sudo -u nginx php -r "echo system("gpg -k");"`

我有`/home/nginx/.gnupg: directory does not exist!`

所以我执行了以下操作：

`mkdir -p /home/nginx/.gnupg; chown -R nginx:nginx /home/nginx/`

然后，测试是否有效：

`sudo -u nginx php -r "echo system("gpg --homedir /home/nginx/.gnupg --dry-run --batch --import key.pub");`

我有输出！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T16:51:11.363

安装扩展是您的选择吗？因为您可以使用[PECL/gnupg](http://pecl.php.net/package/gnupg)扩展中的[gnupg_import()](http://docs.php.net/gnupg_import)和[gnupg_keyinfo()](http://docs.php.net/gnupg_keyinfo)函数的组合。

`gnupg_keyinfo()`返回属性数组，并且在这种情况下有各种有用的键。见：[http ://svn.php.net/viewvc/pecl/gnupg/trunk/gnupg.c?revision=330955&view=markup#l662](http://svn.php.net/viewvc/pecl/gnupg/trunk/gnupg.c?revision=330955&view=markup#l662)

# ruby-on-rails-3 - force_ssl 从 http://example.com 重定向到 https://secure.example.com

> ID：13498168
> 
> 赞同：0
> 
> 时间：2012-11-21T16:54:47.820
> 
> 标签：ruby-on-rails-3, heroku, https, ssl-certificate

我有 SSL 在 Heroku 上工作。除了我设置它以便 SSL 仅与[https://secure.example.com](https://secure.example.com)一起使用。

在我的 Rails 应用程序和 DNS 管理器（Go Daddy）中，如何确保所有访问（`www.domain.com/`, `domain.com/`, `https://domain.com`）都转发到`https://secure.domain.com`？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:24:05.473

在您的应用程序控制器中，使用以下方法制作一个前置过滤器：

```
def redirect_secure
  redirect_to subdomain: "secure", protocol: "https" if request.protocol == "http"
end 
```

# c - C - 如何抑制子函数的输出？

> ID：13498169
> 
> 赞同：14
> 
> 时间：2012-11-21T16:53:46.843
> 
> 标签：c, terminal, output, suppress

我想调用`bar()`，`foo()`会`bar()`改变一些全局变量的值（这是我想要的），但同时产生一些输出（我不想要任何输出）；

```
void foo() 
{
    //I have tried:
    //system("1>&/dev/null") and of course this won't work
    bar();
} 
```

我能做些什么来抑制`bar()`的输出？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-21T16:58:23.937

可以先保存全局变量，`stdout`然后`bar();`设置为`/dev/null`，再恢复。代码示例；

```
#include <stdio.h>

int main() {
    int old_stdout = dup(1);

    freopen ("/dev/null", "w", stdout); // or "nul" instead of "/dev/null"
    printf("asd1");
    fclose(stdout);

    stdout = fdopen(old_stdout, "w"); 
    printf("asd2");
    return 0;
} 
```

在 OS X 上测试，不确定 Windows。

**编辑：**您可以在 Windows 上替换`/dev/null`为。`nul`至于在 Windows`fdopen()`下`dup()`工作 - 根据我的`man`页面，它们是 POSIX.1 标准的一部分，但我还没有测试过。

**编辑 2：**正如评论中所建议的，如果该解决方案不适用于 Windows，则[此 SO answer](https://stackoverflow.com/a/7664951/1071136)中还有另一个建议。

**编辑 3：**执行此操作的更长但符合标准且跨平台的方法如下。（代码改编自提到的 SO 问题和 Microsoft 的 _dup 文档）

```
#include <stdio.h>

#ifdef _WIN32
#include <io.h>
char * const nulFileName = "NUL";
#define CROSS_DUP(fd) _dup(fd)
#define CROSS_DUP2(fd, newfd) _dup2(fd, newfd)
#else
#include <unistd.h>
char * const nulFileName = "/dev/null";
#define CROSS_DUP(fd) dup(fd)
#define CROSS_DUP2(fd, newfd) dup2(fd, newfd)
#endif

int main() {
    int stdoutBackupFd;
    FILE *nullOut;
    /* duplicate stdout */
    stdoutBackupFd = CROSS_DUP(STDOUT_FILENO);

    fflush(stdout);
    nullOut = fopen(nulFileName, "w");
    CROSS_DUP2(fileno(nullOut), STDOUT_FILENO);

    printf("asd1\n");
    fflush(stdout);
    fclose(nullOut);

    // Restore stdout
    CROSS_DUP2(stdoutBackupFd, STDOUT_FILENO);
    close(stdoutBackupFd);

    printf("asd2\n");

    return 0;
} 
```

需要刷新以确保（1）在切换标准输出之前打印的任何内容确实打印到屏幕上，以及（2）在将标准输出切换回控制台（或管道）之前打印的任何内容都不会打印。

# matplotlib - matplotlib 极坐标 2d 直方图

> ID：13498172
> 
> 赞同：3
> 
> 时间：2012-11-21T16:54:56.373
> 
> 标签：matplotlib, histogram

我正在尝试在极轴上绘制一些直方图数据，但它似乎无法正常工作。下面是一个示例，我使用自定义投影找到 [如何使 matplotlib 极坐标图中的角度顺时针旋转，顶部为 0°？](https://stackoverflow.com/questions/2417794/how-to-make-the-angles-in-a-matplotlib-polar-plot-go-clockwise-with-0-at-the-to)它适用于散点图，所以我认为我的问题在于直方图函数。这让我整天发疯，有谁知道我做错了什么............

```
import random
import numpy as np
import matplotlib.pyplot as plt

baz = np.zeros((20))
freq = np.zeros((20))
pwr = np.zeros((20))
for x in range(20): 
    baz[x] = random.randint(20,25)*10
    freq[x] = random.randint(1,10)*10
    pwr[x] = random.randint(-10,-1)*10
baz = baz*np.pi/180\.  

abins = np.linspace(0,2*np.pi,360)      # 0 to 360 in steps of 360/N.
sbins = np.linspace(1, 100) 
H, xedges, yedges = np.histogram2d(baz, freq, bins=(abins,sbins), weights=pwr)

plt.figure(figsize=(14,14))
plt.subplot(1, 1, 1, projection='northpolar')
#plt.scatter(baz, freq)
plt.pcolormesh(H)
plt.show() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T08:04:24.017

如果您将 mgrid（具有与您的 a bin 和 sbin 相似的特征）明确传递给 pcolormesh 命令，则您的代码可以工作。

以下是受您的代码启发的示例：

```
import matplotlib.pyplot as plt
import numpy as np

#Generate the data
size = 200

baz = 10*np.random.randint(20, 25, size)*np.pi/180.
freq = 10*np.random.randint(1, 10, size)
pwr = 10*np.random.randint(-10, -1, size)

abins = np.linspace(0, 2*np.pi, 360)      # 0 to 360 in steps of 360/N.
sbins = np.linspace(1, 100, 50) 
H, xedges, yedges = np.histogram2d(baz, freq, bins=(abins,sbins), weights=pwr)

#Grid to plot your data on using pcolormesh
theta, r = np.mgrid[0:2*np.pi:360j, 1:100:50j]

fig, ax = plt.subplots(figsize=(14,14), subplot_kw=dict(projection='northpolar'))
ax.pcolormesh(theta, r, H)

ax.set_yticklabels([]) #remove yticklabels

plt.show() 
```

![极性](../Images/7cb13c42fd0ad6e31ff9d6f0c52a429d.png)

# r - R：在条件下替换数据框中的值

> ID：13498174
> 
> 赞同：1
> 
> 时间：2012-11-21T16:53:58.153
> 
> 标签：r, function, dataframe, mean, substitution

我有一个由三列组成的数据框（参见代码中的示例）。第一列包含类别 (a)，第二列包含观察次数 (b)，第三列包含这些观察的平均值 (c)。

```
 #create a test df
    a<-factor(c("aaa","aaa","aaa","ddd","eee","ddd","aaa","ddd"))
    b<-c(3,4,1,3,5,7,3,2)
    c<-c(1,2,NA,4,5,6,7,NA)
    df.abc<-data.frame(a=a,b=b,c=c)
    df.abc 
```

如果观察数为 1 或 2，则将条目标记为缺失值 (NA)。

所以我的函数的目的是用每个类别的平均值替换这些缺失值。

我带了我一段时间，但我得到了一个函数，它将所有缺失值替换为一个类别（如果观察结果为 1）。它看起来像这样：

```
 #function to substitue the missing values in row c by their means 
    #according to their categories
    function.abc<-function(x){
        ifelse(
            (df.abc[,1]==x)&(df.abc[,2]==1),
            mean(df.abc$c[df.abc$a ==x],na.rm=TRUE),
            df.abc[,3]
        )
    } 
```

测试这个功能：

```
 #test the function for the category "ccc"
    function.abc("aaa") 
```

它工作得很好（但只是平均值而不是平均平均值）输出是：

[1] 1.000000 2.000000 3.333333 4.000000 5.000000 6.000000 7.000000 不适用

现在我的问题是，我有很多类别（n = 32），我试图将此函数应用于包含我的类别的向量。在这种情况下，一个简单的例子是：

```
 #test the function for a testvector
    test.vector<-c("aaa","ddd")
    function.abc(test.vector) 
```

输出是：

[1] 1.0 2.0 4.5 4.0 5.0 6.0 7.0 不适用

所以显然这不会奏效......

有人可以帮我重新安排功能吗？我对编程很陌生，设计短而好的功能对我来说仍然是一个很大的挑战......

**编辑：**

我希望输出为： [1] 1.000000 2.000000 3.20000 4.000000 5.000000 6.000000 7.000000 5.000000

所以 aaa 组 (3.20000) 的平均值替换 aaa 中的 NA 值，ddd 组 (5.0000000) 的平均值替换 ddd 中的 NA ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:50:56.803

为了在一个类别中一次处理多个列，您需要使用拆分数据框然后处理组件的东西。范式对此`lapply( split(df, fac), function(x) {...})`很有效。或者你可以使用`transform`或`plyr`包。

```
> lapply( split( df.abc, df.abc$a), 
               function(dfrm) { dfrm[is.na(dfrm$c), "c"] <- 
                  weighted.mean(dfrm[!is.na(dfrm$c) , "c"], dfrm[!is.na(dfrm$c), "b"])
                         dfrm} )  
                # need to evaluate dfrm in order to return the full value.
$aaa
    a b   c
1 aaa 3 1.0
2 aaa 4 2.0
3 aaa 1 3.2
7 aaa 3 7.0

$ddd
    a b   c
4 ddd 3 4.0
6 ddd 7 6.0
8 ddd 2 5.4

$eee
    a b c
5 eee 5 5 
```

然后你可以`rbind`使用`do.call：

```
 do.call( rbind, lapply( split( df.abc, df.abc$a), 
          function(dfrm) { dfrm[is.na(dfrm$c), "c"] <-
                 weighted.mean(dfrm[!is.na(dfrm$c) , "c"], dfrm[!is.na(dfrm$c), "b"])
                   dfrm} ) )
        a b   c
aaa.1 aaa 3 1.0
aaa.2 aaa 4 2.0
aaa.3 aaa 1 3.2
aaa.7 aaa 3 7.0
ddd.4 ddd 3 4.0
ddd.6 ddd 7 6.0
ddd.8 ddd 2 5.4
eee   eee 5 5.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:17:49.327

我不太清楚你的意思，但如果你的意思是包括所有这样的行，你可以使用 %in%。

```
function.abc<-function(x){
  ifelse(
    (df.abc[,1] %in% x)&(df.abc[,2]==1),
    mean(df.abc$c[df.abc$a %in% x],na.rm=TRUE),
    df.abc[,3]
  )
}

> function.abc("aaa")
[1] 1.000000 2.000000 3.333333 4.000000 5.000000 6.000000 7.000000       NA

> test.vector<-c("aaa","ddd")
> function.abc(test.vector)
[1]  1  2  4  4  5  6  7 NA 
```

最后一个元素是 NA，因为列 'b' 不是 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T17:22:24.557

`CatMeans <- tapply(df.abc$c, df.abc$a, function(x) mean(x, na.rm==T))`将按类别为您提供信息。

```
 aaa      ddd      eee 
3.333333 5.000000 5.000000 
```

所以为所有人做这件事：

```
> CatMeans <- tapply(df.abc$c, df.abc$a, function(x) mean(x, na.rm==T))
> ifelse(is.na(df.abc$c), CatMeans[df.abc$a], df.abc$c)
[1] 1.000000 2.000000 3.333333 4.000000 5.000000 6.000000 7.000000 5.000000 
```

我敢肯定，你可以把它变成一个函数。如果你只想要`"aaa"`and `"ddd"`，那么你可以有`ifelse(is.na(df.abc$c) & df.abc$a %in% c("aaa","ddd"),...`

# java - System.out.println(object) 的输出

> ID：13498179
> 
> 赞同：8
> 
> 时间：2012-11-21T16:54:18.010
> 
> 标签：java, object

当我执行以下操作时，我想知道输出到底是什么。

```
class Data {
  int a = 5;
}

class Main {
  public static void main(String[] args) {
    data dObj = new data();
    System.out.println(dObj);
  }
} 
```

我知道它给出了与对象相关的东西，因为在我的例子中输出是*data@1ae73783*。我猜*1ae73783*是一个十六进制数。我也做了一些工作并打印了

```
System.out.println(dObj.hashCode()); 
```

我得到了号码*415360643*。我得到一个整数值。我不知道`hashCode()`返回什么，仍然出于好奇，当我将*1ae73783*转换为十进制时，我得到了*415360643*！

这就是为什么我很好奇这个数字到底是什么。这是Java沙箱的某个内存位置还是其他东西？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-21T16:56:21.397

发生的事情是你的类的默认[`toString()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#toString%28%29)方法正在被使用。该方法定义如下：

> class的`toString`方法`Object`返回一个字符串，该字符串由对象作为实例的类的名称、at 符号字符“@”和对象的哈希码的无符号十六进制表示形式组成。换句话说，此方法返回一个等于以下值的字符串：
> 
> ```
> getClass().getName() + '@' + Integer.toHexString(hashCode()) 
> ```

[`hashCode()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)默认方法返回的值是特定于实现的：

> 在合理可行的情况下，`hashCode`类定义的方法`Object`确实为不同的对象返回不同的整数。（这通常通过将对象的内部地址转换为整数来实现，但 JavaTM 编程语言不需要这种实现技术。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T16:57:38.820

当您打印类的实例时，它不会覆盖该`toString`方法，然后使用类的`toString`方法`Object`。它以以下形式打印输出：-

```
data@1ae73783 
```

*   第一部分`output`显示对象的类型。

*   第二部分是`hashCode` 对象的十六进制表示。

这是方法的源代码`Object.toString()`，您可以在您的安装目录`jdk`下的`src`文件夹中找到：-

```
public String toString() {
    return getClass().getName() + "@" + Integer.toHexString(hashCode());
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-21T16:59:01.567

[类中hashCode()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#hashCode%28%29)和[toString()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#toString%28%29)的Javadoc`Object`应该能够为您阐明这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-21T16:58:55.863

该代码调用该类的默认`toString()`实现`Object`，即：

```
public String toString() {
    return getClass().getName() + "@" + Integer.toHexString(hashCode());
} 
```

# jquery - 如何在黄瓜上测试具有向下滚动功能的按钮？

> ID：13498180
> 
> 赞同：2
> 
> 时间：2012-11-21T16:55:18.387
> 
> 标签：jquery, web, cucumber, slidedown

我正在为一个网站编写黄瓜测试，而我完全被困在了这个网站上。在网站的结帐程序上，有一个按钮可以触发滑入结帐程序的下一部分（在同一页面上）。按钮在 jQuery 中定义如下：

```
 $("#next1").click(function(event){
    $('#step1').slideUp(500);
    $('#step1top').css('color','#036070');
    $('#step1top').removeClass('active');
    $('#step2top').css('color','#fff');
    $('#step2').slideDown(500);
    $('#step2top').addClass('active');
 }); 
```

还有其他几个这样的，当您检查站点上的元素时，显示的 HTML 如下：

`< img id="next1" src="/images/next.png" style="float:right;" >`

我试图编写单击内部元素的步骤。例如：

```
When /^I click "([^"]*)" inside element "([^"]*)"$/ do |button, element_name| 
  begin
    evaluate_script("$('#{element_name}').trigger('mouseover')")
  rescue Capybara::NotSupportedByDriverError
  end
end 
```

但是，我尝试过的任何方法似乎都不起作用。有人有建议吗？

# php - 将 URL 中的图像动态加载到 div 中

> ID：13498181
> 
> 赞同：1
> 
> 时间：2012-11-21T16:55:19.970
> 
> 标签：php, javascript, html

所以，

基本上我有这个图片库 > [http://sensemilia.com/#/pages/necklaces.php](http://sensemillia.com/#/pages/necklaces.php) 一旦用户点击其中一张图片，他就会进入 item.php > [http://sensemilia.com/#/pages /item.php](http://sensemillia.com/#/pages/item.php)

正如您在框的左侧看到的那样，有一个图像，而在右侧，有文本。

我想做的是告诉 item.php 根据 url 动态加载内容。

此外，例如，如果用户单击图库中的第一张图片，则 url 应如下所示 > ...item.php?id=01 ，然后框的内容应在左侧列加载 image01.jpg , 和右边的 div01。

我为此搜索了很多，但我发现的只是复杂的 asp 或 .net 答案。有简单的方法吗？

非常感谢您提前。任何帮助将不胜感激。

* * *

**回答**

```
<?php $actual_link = "$_SERVER[REQUEST_URI]"; 
if ($actual_link == "/pages/item.php?id=11") {
print ("<img src='../Sensemillia/sousou.jpg' id='jack' width='392' 
height='475' alt='Daisy on the Ohoopee'/>");    
}
else if ($actual_link == '/pages/item.php?id=12') {
print ("<img src='../Sensemillia/second.jpg' id='jack' width='392'
height='475' alt='Daisy on the Ohoopee'/>");    
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:59:24.433

您可以使用会话变量或使用 POST 在页面之间发送数据并从数据库中获取数据

[如何在 PHP 中的页面之间传递数据？](https://stackoverflow.com/questions/1179559/how-do-i-pass-data-between-pages-in-php)

[PHP 将变量传递到下一页](https://stackoverflow.com/questions/871858/php-pass-variable-to-next-page)

编辑：也许你会想从这里开始：http: [//www.homeandlearn.co.uk/php/php.html](http://www.homeandlearn.co.uk/php/php.html)

它将让您对 php 有基本的了解，并允许您在您的网站上实现该功能。

此外，当您对 mysql 查询感到满意时，您会希望用 PDO 替换它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:05:09.530

好的，让我重复一遍：你有一个图像。当您单击图像时，将调用一个 javascript，它使用 ajax 在哈希后面加载页面？

为什么不简单地添加`?id=123`到哈希后面的链接，让 PHP 根据给定的 ID 从数据库返回值？

顺便提一句。我强烈建议不要执行页面 1:1 的加载，因为这可能会导致安全问题。这看起来有点像 XSS。

# android - 编辑 android VideoView 帧

> ID：13498184
> 
> 赞同：7
> 
> 时间：2012-11-21T16:54:38.870
> 
> 标签：android, android-videoview, android-source, android-4.2-jelly-bean, motion-detection

# 环境：

**Nexus 7 果冻豆 4.1.2**

# 问题：

我正在尝试使用 VideoView 制作与 RTSP 一起使用的运动检测应用程序。

我希望有类似 onNewFrameListener 的东西

```
videoView.onNewFrame(Frame frame) 
```

我试图通过 VideoView 访问 RTSP 流的原始帧，但在 Android SDK 中找不到任何支持。

我发现 VideoView 封装了 Android 的 MediaPlayer 类。

所以我潜入`media_jni`库试图找到一种访问原始帧的方法，但找不到字节缓冲区或任何代表帧的东西。

# 问题：

任何人都知道我在哪里或如何找到这个缓冲区并访问它？

或者在 VideoView 上实现运动检测的任何其他想法？

**即使我需要重新编译 AOSP。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T08:15:15.447

您可以扩展`VideoView`并覆盖其`draw(Canvas canvas)`方法。

*   将您的位图设置为通过`draw`.
*   调用`super.draw()`它将把框架绘制到您的位图上。
*   从位图中访问帧像素。

    ```
    class MotionDetectorVideoView extends VideoView {
    public Bitmap mFrameBitmap;
    ...
        @Override
        public void draw(Canvas canvas) {
            // set your own member bitmap to canvas..
            canvas.setBitmap(mFrameBitmap);
            super.draw(canvas);
            // do whatever you want with mFrameBitmap. It now contains the frame.
            ...
            // Allocate `buffer` big enough to hold the whole frame.
            mFrameBitmap.copyPixelsToBuffer(buffer);
            ...
        }
    } 
    ```

我不知道这是否会奏效。避免在 中进行繁重的计算，在`draw`那里启动一个线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:10:21.133

在您的情况下，如果您使用的是实时运动，而不是录制的视频，我会使用相机预览而不是 VideoView。您可以使用相机预览回调来捕捉相机捕获的每一帧。此回调实现：

```
onPreviewFrame(byte[] data, Camera camera)
Called as preview frames are displayed. 
```

我认为它可能对你有用。

[http://developer.android.com/reference/android/hardware/Camera.PreviewCallback.html](http://developer.android.com/reference/android/hardware/Camera.PreviewCallback.html)

告诉你这是否是你正在寻找的东西。

祝你好运。

# java - 如何设置 maven 3 本地插件存储库

> ID：13498186
> 
> 赞同：13
> 
> 时间：2012-11-21T16:54:48.583
> 
> 标签：java, maven, build-automation, maven-3

由于一些限制，我需要一个完全离线的 Maven 存储库。根据[http://cwiki.apache.org/confluence/display/MAVEN/PluginResolutionException](http://cwiki.apache.org/confluence/display/MAVEN/PluginResolutionException)，只`<pluginRepositories>`搜索插件。所以我想知道如何配置 maven 在本地文件系统中查找插件。我尝试在设置时使用“file://”前缀，`<url>`但它不起作用。

```
DEBUG] Verifying availability of /home/dsun/.m2/repository/org/apache/karaf/tooling/features-maven-plugin/2.3.0/features-maven-plugin-2.3.0.jar from [central (http://repo1.maven.org/maven2, releases=true, snapshots=false, managed=false)]
[ERROR] Plugin org.apache.karaf.tooling:features-maven-plugin:2.3.0 or one of its dependencies could not be resolved: The repository system is offline but the artifact org.apache.karaf.tooling:features-maven-plugin:jar:2.3.0 is not available in the local repository. -> [Help 1]
org.apache.maven.plugin.PluginResolutionException: Plugin org.apache.karaf.tooling:features-maven-plugin:2.3.0 or one of its dependencies could not be resolved: The repository system is offline but the artifact org.apache.karaf.tooling:features-maven-plugin:jar:2.3.0 is not available in the local repository.

dsun@localhost:> ls /home/dsun/.m2/repository/org/apache/karaf/tooling/features-maven-plugin/2.3.0/features-maven-plugin-2.3.0.jar
/home/dsun/.m2/repository/org/apache/karaf/tooling/features-maven-plugin/2.3.0/features-maven-plugin-2.3.0.jar 
```

设置.xml

```
<settings>      
<offline>true</offline>
  <profiles>
  <profile>
    <id>local</id>
    <pluginRepositories>
      <pluginRepository>
      <id>central</id>
      <url>file://${env.HOME}/.m2/repository</url>
      <releases>
        <enabled>true</enabled>
      </releases>
      <snapshots>
        <enabled>true</enabled>
      </snapshots>
    </pluginRepository>
  </pluginRepositories>
   </profile>
 </profiles>
<activeProfiles>
  <activeProfile>local</activeProfile>
</activeProfiles>

<localRepository>${env.HOME}/.m2/repository</localRepository> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T02:03:02.107

最后，我发现了问题，在插件目录下有个叫_maven.repositories的文件，我删除这个文件后，一切正常！

更多详情，请参阅以下链接：

*   [http://maven.40175.n5.nabble.com/Maven-3-maven-repositories-and-lastUpdated-td4927537.html](http://maven.40175.n5.nabble.com/Maven-3-maven-repositories-and-lastUpdated-td4927537.html)

*   [http://jira.codehaus.org/browse/MNG-5181](http://jira.codehaus.org/browse/MNG-5181)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-06T21:07:22.360

从 Maven 3.1-alpha-1 开始，命令行选项`-llr/--legacy-local-repository` 或系统属性`-Dmaven.legacyLocalRepo=true` 应该会有所帮助

有关使用 maven 离线工作的一般答案，请参见[此处](https://stackoverflow.com/q/43661755/1767316)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-09T14:46:58.617

这个问题让我非常恼火，以至于我将 war 插件修补为具有 disableOverlaying 参数。您可以在这里找到它 - 从原始版本中分叉：[https ://github.com/crowdcode-de/maven-war-plugin](https://github.com/crowdcode-de/maven-war-plugin)

# sql - 如何在 SQL ORACLE 中汇总表的行数？

> ID：13498206
> 
> 赞同：0
> 
> 时间：2012-11-21T16:55:43.950
> 
> 标签：sql, oracle, count, group-by, where

我对 SQL ORACLE 有以下说明：

```
SELECT COUNT(FE_DAY)
FROM TI_DATE
WHERE (FE_MO = 02 AND FE_YEAR in ('2011', '2012'))
GROUP BY FE_DAY 
```

在这个指令中有效地获得像 SQL Answer 一个他们 sum=10 的数字列表。但是我怎么能不显示行。我只需要显示行的 sum=10

我也尝试应用以下 SQL 指令：

```
SELECT SUM(COUNT(FE_DAY))
FROM TI_DATE
WHERE (FE_MO = 02 AND FE_YEAR in ('2011', '2012'))
GROUP BY FE_DAY 
```

但答案是 57，与我需要的行数不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T17:01:06.353

如果我正确理解您想要什么，您实际上不需要该`GROUP BY`子句；你可以写：

```
SELECT COUNT(1)
  FROM ti_date
 WHERE fe_mo = 2
   AND fe_year IN ('2011', '2012')
; 
```

# list - Maple - 将一维列表转换为二维数组

> ID：13498212
> 
> 赞同：0
> 
> 时间：2012-11-21T16:56:08.157
> 
> 标签：list, multidimensional-array, converter, maple

这是 Maple 中的一个问题。我在 java 方面理解我想要一个计数和一个增量，但我的逻辑并没有简单地转换为 maple 代码。

我有一个很长的数字列表（196），我希望将其转换为 14x14 数组，但使用 convert(LIST,Array) 只会给我一个一维数组。

在 Maple 代码中，这将给我我的第一列。

```
j:=1; 
for i from 1 to 14 do
B[i,j]:=Longlistvalue[i]; 
end do; 
```

很明显，我的第二列来自 t=2 和 s 从 15 到 24，但我正在努力将其放入循环中。

当然，我可以使用一个循环，或者一个 maple 命令将前 14 个放入第一行（或列），然后将下一个 14 个放入下一行/列等？

我最近的尝试让我

```
B:=Array(1..14,1..14):
n:=1;
m:=14;
for j from 1 to 14 do
  for i from n to m do
     B[i,j]:=Longlistvalue[i];
  end do;
  n:=n+14;
  m:=m+14;
end do; 
```

但并不是说我的数组超出范围（因为 B[i,j] 中的 s 必须小于 15）。

有没有办法通过更有效的循环来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:14:45.893

Array（或 Matrix）构造函数可用于直接执行此操作，使用运算符分配条目。

您可以按列或按行将列表条目放入数组中。调整示例以适合 m=14 和 n=14 的情况。

```
m,n := 3,4:

L:=[seq(i,i=1..m*n)]; # you got your list in another way

             L := [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]

Array(1..m,1..n,(i,j)->L[(j-1)*m+i]);

                          [1    4    7    10]
                          [                 ]
                          [2    5    8    11]
                          [                 ]
                          [3    6    9    12]

Array(1..m,1..n,(i,j)->L[(i-1)*n+j]);

                         [1     2     3     4]
                         [                   ]
                         [5     6     7     8]
                         [                   ]
                         [9    10    11    12] 
```

您也可以使用嵌套循环。

```
Longlistvalue:=[seq(i,i=1..14^2)]: # your values will differ, of course

B:=Array(1..14,1..14):
n:=14;
m:=14;
for j from 1 to m do
   for i from 1 to n do
      B[i,j]:=Longlistvalue[(j-1)*m+i];
   end do;
end do:

# so we can see the contents, displayed in full
interface(rtablesize=infinity):

B; 
```

# algorithm - 快速排序算法稳定性

> ID：13498213
> 
> 赞同：32
> 
> 时间：2012-11-21T16:56:55.717
> 
> 标签：algorithm, quicksort

> 快速排序不稳定，因为它交换不相邻的元素。

请帮助我理解这句话。

我知道分区是如何工作的，以及稳定性是什么。但我无法弄清楚是什么原因导致上述情况不稳定？然后我相信归并排序也可以这样说——尽管它被引用为一种稳定的算法。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-11-21T17:15:52.873

考虑以下对数组的分区期间发生的情况，其中比较器使用整数（仅）。字符串就在那里，所以我们有两个元素，它们比较好像相等，但实际上是可区分的。

```
(4, "first"), (2, ""), (3, ""), (4, "second"), (1, "") 
```

根据定义，如果在排序之后，比较为相等的两个元素（两个s）以与之前相同的顺序出现，则排序是*稳定的。*`4`

假设我们选择`3`作为支点。这两个`4`元素将在它之后和之前结束`1`（`2`还有更多的东西，我忽略了移动枢轴，因为它已经在正确的位置，但你说你理解分区）。

一般来说，快速排序不会给出任何特定的保证*，*在分区之后两个`4`s 将在哪里，我认为大多数实现都会反转它们。例如，如果我们使用[Hoare 的经典分区算法](https://en.wikipedia.org/wiki/Quicksort#Hoare_partition_scheme)，则数组分区如下：

```
(1, ""), (2, ""), (3, ""), (4, "second"), (4, "first") 
```

这违反了排序的稳定性。

由于每个分区都不稳定，所以整体排序不太可能。

正如 Steve314 在评论中指出的那样，合并排序是稳定的，前提是在合并时，如果您遇到相同的元素，您总是首先输出来自您要合并在一起的两半的“较低”的元素。也就是说，每个合并都必须看起来像这样，其中“左”是来自原始数组中较低的一侧。

```
while (left not empty and right not empty):
    if first_item_on_left <= first_item_on_right:
       move one item from left to output
    else:
       move one item from right to output
move everything from left to output
move everything from right to output 
```

如果是`<=`，`<`那么合并将不稳定。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-14T10:02:26.803

就像用户有一个排序数组，并按另一列排序，排序算法是否总是保留与前一个排序键不同但在新排序键中具有相同值的元素的相对顺序？因此，在始终保留元素顺序（在新的排序键中没有区别）的排序算法称为“稳定排序”。

![请看示例](../Images/e0cb15e81b1974329f118c2c469c4163.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-18T11:48:19.127

考虑以下对数组：

`{(4,'first');(2,'');(1,'');(4,'second');(3,'')}`

将 3 视为支点。在运行快速排序期间，数组会发生以下变化：

1.  `{(4,'first');(2,'');(1,'');(4,'second');(3,'')}`
2.  `{(2,'');(4,'first');(1,'');(4,'second');(3,'')}`
3.  `{(2,'');(1,'');(4,'first');(4,'second');(3,'')}`
4.  `{(2,'');(1,'');(3,'');(4,'second');(4,'first')}`
5.  `{(1,'');(2,'');(3,'');(4,'second');(4,'first')}`

从上面可以清楚地看出，相对顺序发生了变化。这就是为什么说快速排序“不能确保稳定性”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-05T01:56:43.637

如果等价项的顺序保持不变，则称该排序是稳定的。快速排序的稳定性取决于分区策略。“快速排序不稳定，因为它交换不相邻的元素。” 此语句依赖于使用 Hoare 分区的先决条件。这是来自 Berkeley CS61b 的 Hoare Partitioning 演示， [Hoare Partitioning](https://docs.google.com/presentation/d/1DOnWS59PJOa-LaBfttPRseIpwLGefZkn450TMSSUiQY/pub?start=false&loop=false&delayms=3000&slide=id.g463de7561_042)

你应该知道“它交换不相邻的元素”是什么意思。

# jquery - 清除输入字段更改幻灯片和按钮输入

> ID：13498214
> 
> 赞同：0
> 
> 时间：2012-11-21T16:56:57.453
> 
> 标签：jquery, html, css

我有多张幻灯片，可以容纳多种表格。我想在更改幻灯片或提交时清除无线电输入字段。在我看来，我的方法不起作用。有什么建议吗？

这是我到目前为止的代码

```
<style>
.yesDisplay, .noDisplay, .yesSub{
display:none;
}
.myc { display:none; }
</style>

<script type='text/javascript'>

$(function () {
    var $myc= $('.myc');
    var cp = 0;

    $('#pauseB').click (function () {

       $myc.hide().eq(cp++).show();       
       if (cp == $myc.length) cp = 0;  
    });

// check the radio input for Yes
function checkYes(){
    if($('.yes').attr('checked')){
            $('.yesDisplay').show();
        }else{
            $('.yesDisplay').hide();
        }
}
// check the radio input for No
function checkNo(){
    if($('.no').attr('checked')){
            $('yesDisplay').show();
        }else{
            $('.noDisplay').hide();
        }
}

    $('.cases').change(function(){
        checkYes();
        checkNo();
    });

});

</script>

<div id="pauseB">Pause</div> 
<div id="one" class="myc">1<br>
    <form class="cases">
        <input type="radio" class="yes" name="first"/>yes
        <input type="radio" class="no" name="first"/>no
    </form>
    <div class="display">
        <div class="yesDisplay">Secondary Question
            <form class="cases">
                <input type="radio" class="yes1" name="first"/>yes
                <input type="radio" class="no1" name="first"/>no
            </form>
        </div>
        <div class="noDisplay"><input type="button" value="test"/></div>
        <div class="yesSub">1.1</div>
    </div>
</div> 
<div id="two" class="myc">2<br>
    <form class="cases">
        <input type="radio" class="yes" name="first"/>yes
        <input type="radio" class="no" name="first"/>no
    </form>
    <div class="display">
        <div class="yesDisplay">Secondary Question
            <form class="cases">
                <input type="radio" class="yes1" name="first"/>yes
                <input type="radio" class="no1" name="first"/>no
            </form>
        </div>
        <div class="noDisplay">no</div>
        <div class="yesSub">1.1</div>
    </div>
</div> 
<div id="three" class="myc">3</div> 
```

# c# - 将行为附加到 Silverlight 中的所有文本框

> ID：13498216
> 
> 赞同：6
> 
> 时间：2012-11-21T16:56:21.817
> 
> 标签：c#, silverlight, silverlight-4.0, attachedbehaviors

是否可以将行为附加到 Silverlight 应用程序中的所有文本框？

我需要为所有文本框添加简单的功能。（选择焦点事件的所有文本）

```
 void Target_GotFocus(object sender, System.Windows.RoutedEventArgs e)
    {
        Target.SelectAll();
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T17:04:46.543

您可以覆盖应用程序中文本框的默认样式。然后在这种风格中，您可以使用某种方法通过 setter 应用行为（通常使用附加属性）。

它会是这样的：

```
<Application.Resources>
    <Style TargetType="TextBox">
        <Setter Property="local:TextBoxEx.SelectAllOnFocus" Value="True"/>
    </Style>
</Application.Resources> 
```

行为实现：

```
public class TextBoxSelectAllOnFocusBehavior : Behavior<TextBox>
{
    protected override void OnAttached()
    {
        base.OnAttached();

        this.AssociatedObject.GotMouseCapture += this.OnGotFocus;
        this.AssociatedObject.GotKeyboardFocus += this.OnGotFocus;
    }

    protected override void OnDetaching()
    {
        base.OnDetaching();

        this.AssociatedObject.GotMouseCapture -= this.OnGotFocus;
        this.AssociatedObject.GotKeyboardFocus -= this.OnGotFocus;
    }

    public void OnGotFocus(object sender, EventArgs args)
    {
        this.AssociatedObject.SelectAll();
    }
} 
```

以及帮助我​​们应用行为的附加属性：

```
public static class TextBoxEx
{
    public static bool GetSelectAllOnFocus(DependencyObject obj)
    {
        return (bool)obj.GetValue(SelectAllOnFocusProperty);
    }
    public static void SetSelectAllOnFocus(DependencyObject obj, bool value)
    {
        obj.SetValue(SelectAllOnFocusProperty, value);
    }
    public static readonly DependencyProperty SelectAllOnFocusProperty =
        DependencyProperty.RegisterAttached("SelectAllOnFocus", typeof(bool), typeof(TextBoxSelectAllOnFocusBehaviorExtension), new PropertyMetadata(false, OnSelectAllOnFocusChanged));

    private static void OnSelectAllOnFocusChanged(DependencyObject sender, DependencyPropertyChangedEventArgs args)
    {
        var behaviors = Interaction.GetBehaviors(sender);

        // Remove the existing behavior instances
        foreach (var old in behaviors.OfType<TextBoxSelectAllOnFocusBehavior>().ToArray())
            behaviors.Remove(old);

        if ((bool)args.NewValue)
        {
            // Creates a new behavior and attaches to the target
            var behavior = new TextBoxSelectAllOnFocusBehavior();

            // Apply the behavior
            behaviors.Add(behavior);
        }
    }
} 
```

# javascript - 使用 jQuery 的 load 方法将内容加载到 div 中

> ID：13498217
> 
> 赞同：0
> 
> 时间：2012-11-21T16:57:03.273
> 
> 标签：javascript, jquery, ajax

我正在尝试使用该方法`rightcontent`从外部将内容加载到一个名为我的页面的 div 中。最初，我的 div 中没有内容，当用户单击一些链接时，文本会自动加载到该 div 中。`html files``jQuery's load``rightcontent`

看看这些片段：

* * *

*在我的网页中：*

```
<div id="rightcontent">
</div> 
```

* * *

*同一网页还包含如下链接：*

```
 <a class="myajaxreq" href="pages/abc.html">Link I</a><br>
 <a class="myajaxreq" href="pages/pqr.html">Link II</a> 
```

* * *

*外部 javascript 文件包含以下代码：*

```
$('.myajaxreq').click(function() {
var myhref=$(this).attr('href');
$('#rightcontent').load(myhref);

return false;
}); 
```

* * *

当我检查我的javascript调用是否正确使用`alert(myhref)`时，它可以正常工作。但是，不会将任何内容加载到 div 中。帮帮我吧！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:20:38.867

您是在本地还是在服务器上测试代码？AJAX 请求不会在本地工作。

将它上传到服务器（并将所有内容放在正确的子目录中），它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:02:04.790

采用

```
$('#rightcontent').text(myhref); 
```

代替

```
$('#rightcontent').load(myhref); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T17:16:11.587

尝试使用

```
$(".myajaxreq").click(function(){

    $.get( $(this).attr("href"), function(page){

        $("#rightcontent").html(page);

    })
    return false;
}) 
```

# ruby - 在单行条件中分配未定义的变量

> ID：13498219
> 
> 赞同：1
> 
> 时间：2012-11-21T16:57:08.743
> 
> 标签：ruby

在 Ruby 中，为什么你可以这样写：

```
# b is not defined yet.
#
if b = true
  a = b
end
# => a = true 
```

但不是单线：

```
a = b if b = true
# => NameError: undefined local variable or method `b' for main:Object 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T17:00:45.807

因为 Ruby 解释器在看到赋值时会“创建”一个局部变量。

在第二种情况下，它还没有看到赋值，所以在解析表达式时变量不存在。

更准确地说，一个方法首先被解析成一个内部表示，然后，也许代码最终会被调用并实际执行。

在该解析过程中“创建”变量。这实际上更像是一个声明的问题，它只是意味着解释器会意识到它们。在有人调用周围的方法之前，它们不会在被赋予空间或值的意义上被创建。

# html - 两个 div 之间的 div 按需使用

> ID：13498221
> 
> 赞同：0
> 
> 时间：2012-11-21T16:56:11.783
> 
> 标签：html, css, web

我有3个div如下

```
<div>
    <div id='left' style='background:red;float:left;height:150px;width:150px;'>
    </div>
    <div id='right' style='background:green;float:right;height:150px;'>
        <p>Hallo</p>
    </div>
    <div id='center' style='background:blue;height:150px;'>
        <p>Hallo</p>
    </div>
</div> 
```

中心 div 仅在需要时才应填充空间。
并且尽可能多地显示一个水平滚动条
，最后一个 div 不应该被换行到下一行！
就像我在上面的例子中得到的一样，即使不需要，它也会一直填充所有内容。
但我需要，正确的 div 尽可能靠近中心 div。

```
<div>
    <div id='left' style='background:red;float:left;height:150px;width:150px;'>
    </div>
    <div id='center' style='background:blue;float:left;white-space: nowrap;overflow-x:auto;overflow-y:hidden;'>
        <p>Hallo</p>
        <p>Hallo</p>
        <p>Hallo</p>
        <p>Hallo</p>
        <p>Hallo</p>
        <p>Hallo</p>
        <p>Hallo</p>
    </div>
    <div id='right' style='background:green;height:150px;'>
        <p>Hallo</p>
    </div>
</div> 
```

此示例显示了我想要的内容，但在这种情况下，如果我在中心 div 中添加一些字符，它会将右 div 包装到新行，如下所示：

```
 <div>
    <div id='left' style='background:red;float:left;height:150px;width:150px;'>
    </div>
    <div id='center' style='background:blue;float:left;white-space: nowrap;overflow-x:auto;overflow-y:hidden;'>
        <p>Hallo aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
        <p>Hallo</p>
        <p>Hallo</p>
        <p>Hallo</p>
        <p>Hallo</p>
        <p>Hallo</p>
        <p>Hallo</p>
    </div>
    <div id='right' style='background:green;height:150px;'>
        <p>Hallo</p>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:33:39.957

您的问题需要使用 JS 来计算您正在使用的 div 的宽度（因为如果未设置宽度，溢出将不起作用）然后设置正确的百分比宽度以使其流动。

请注意，当您调整浏览器大小时，此答案将不起作用（懒得做）......

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script type="text/javascript">
 $(document).ready(function() {
    var wrapperWidth = $('#wrapper').width(); // get width of main wrapper
    var wrapperRight = $('#right').width(); // get width of right
    var wrapperRight = (wrapperRight/wrapperWidth)*100; //get percentage width of right
    var wrapperLeft = (150/wrapperWidth)*100; //get percentage width of left
    var wrapperCenter = 100 - (wrapperLeft + wrapperRight); // get percentage width of center
    $('#left').css('width',wrapperLeft+'%'); // add inline css for width
    $('#center').css('width',wrapperCenter+'%'); // add inline css for width
    $('#right').css('width',wrapperRight+'%'); // add inline css for width
 });
</script>
<div id='wrapper' style='width: 100%;'>
    <div id='left' style='background:red;float:left;height:150px;width:150px;'>
    </div>
    <div id='center' style='background:blue;float:left; overflow-x: scroll; overflow-y: hidden;'>
        <p>Hallo aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
        <p>Hallo</p>
        <p>Hallo</p>
        <p>Hallo</p>
        <p>Hallo</p>
        <p>Hallo</p>
        <p>Hallo</p>
    </div>
    <div id='right' style='background:green;height:150px; float: left;'>
        <p>Hallo</p>
    </div>
</div> 
```

# ios - 如何使用 ARC 从不同的类将对象添加到 CCArray

> ID：13498223
> 
> 赞同：0
> 
> 时间：2012-11-21T16:57:16.440
> 
> 标签：ios, cocos2d-iphone, automatic-ref-counting

我需要将我的代码转换为 ARC。我有一个用于绘制路径的 CCArray。我填充来自不同类的 CCArray 值的对象。

问题是转换为 ARC 后，CCArray 总是返回`null`

我看不出我做错了什么。

瓢虫.h

```
@interface Ladybug : CCSprite <CCTargetedTouchDelegate>{

    CCArray *linePathPosition;
}
@property (nonatomic, strong) CCArray *linePathPosition;

@end 
```

瓢虫.m

```
@synthesize linePathPosition;

-(id) init
{
    if( (self=[super init] )) {
        self.linePathPosition = [[CCArray alloc] init];

    }
    return self;
}
-(void) updatePosition:(CGPoint) position
{
    [self.linePathPosition addObject:[NSValue valueWithCGPoint:position]];
    NSLog(@"line path %@",linePathPosition);
}
-(void) breakMoveLadyBug
{
    [self.linePathPosition removeAllObjects];
} 
```

在主.m

```
- (void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event
{
    Ladybug *ladybug1 = (Ladybug *)[self getChildByTag:99];
    CCMotionStreak* streak = (CCMotionStreak *)[self getChildByTag:999];
    CGPoint touchLocation = [touch locationInView: [touch view]];
    CGPoint curPosition = [[CCDirector sharedDirector] convertToGL:touchLocation];

    if (ladybug1.isSelected) {

        streak.position = curPosition;
        [ladybug1 updatePosition:curPosition];
                NSLog(@"Cur position %@",NSStringFromCGPoint(curPosition));

        if (!ladybug1.isMoving) {

            [ladybug1 startMoveLadyBug];
        }
    }
} 
```

日志：

```
 Cur position {331, 110}
 line path (null) 
```

我究竟做错了什么？使用 ARC 定义和初始化 CCArray 的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T21:54:50.693

这不是 ARC 或 CCArray 的问题。问题在于您对objective-c的理解。

为了解决你的问题，无论你在哪里做这条线`[self addChild:ladybug1 z:999 tag:99]`。改为这样做：

```
Ladybug *ladybug1 = [[Ladybug alloc] init];
[self addChild:ladybug1 z:0 tag:99]; 
```

注意：这是在`ccTouchMoved`函数之外完成的，在某些将瓢虫对象添加到场景/图层的函数中。

然后你的`ccTouchMoved`函数将有一个分配的瓢虫对象来使用。

问题是，如果你从不调用瓢虫对象的 init 函数，CCArray 将永远不会被分配，所以一切都将为空。然后，您将尝试将点添加到空数组，这将无济于事。你可以做你想做的所有这些标签的事情（我个人不知道你为什么这样做），但是你需要为瓢虫对象指定标签。所以将它添加到 CCLayer/CCScene（你正在使用的 w/e）中，并设置它的标签。然后就可以使用该`getChildByTag`功能了。

# java - 有什么方法可以将 ajax 与 jstl customtags 一起使用，而无需在 javascript 中复制标签？

> ID：13498230
> 
> 赞同：4
> 
> 时间：2012-11-21T16:57:44.000
> 
> 标签：java, javascript, ajax, jstl, jsp-tags

我正在处理部分内容正常加载并使用 jsps 呈现页面的页面。该页面上生成的产品图像和链接是由自定义 jstl 标签生成的。

当用户滚动时，服务器会在 JSON 响应中请求更多产品，然后使用 UnderscoreJS 模板将它们呈现并添加到页面底部。有什么方法可以在 Javascript 中使用 JSTL 标记，而无需使用 javascript 函数重新创建它们（不可能在 javascript 中重新创建所有标记）。

处理这种情况的最佳方法是什么？我想我可以为 ajax 调用返回一个呈现的 html 响应，但这意味着我有一些使用 json 的 ajax 请求和一些使用呈现的 html...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T04:18:29.810

您不能在 JavaScript 中重复使用 JSTL 标记，因为它们是 Java，而不是 JavaScript，并且因为它们是在呈现页面时在服务器端执行的，而不是在客户端上执行的。

然而，既然你的 JavaScript 已经可以获取和渲染数据，为什么不直接用 JSTL 来渲染第一部分，而在 JavaScript/Ajax/UnderscoreJS 中完成整个事情呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T04:51:34.783

解决此问题的一种方法是使`AJAX`方法返回`HTML`而不是普通对象。

您可以编写一个 jsp 页面，该页面将为新记录创建 html 并将 html 作为可以附加到先前内容的响应发送。

前任

假设你的页面是这样的

```
<div class="container">
    <div class="record rec-1">
        //some html code
    </div>
    <div class="record rec-2">
        //some html code
    </div>

    .....
    .....

    <div class="record rec-n">
        //some html code
    </div>
</div> 
```

然后，当您想加载更多内容并进行 ajax 调用时，让服务器返回一个已处理的 html 响应，例如

```
 <div class="record rec-n+1">
        //some html code
    </div>
    <div class="record rec-n+2">
        //some html code
    </div>

    .....
    .....

    <div class="record rec-n+k">
        //some html code
    </div> 
```

您可以轻松地将其应用到`container`. 您可以使用 jsp 页面来生成 html。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T22:31:42.797

在相同的情况下，我至少使用了两种（或多或少相似）解决方案。

1.  使用包含的 JSP。第一个请求（包含产品图像和链接列表的页面）应该返回整个页面的 JSP，例如

    ```
    <%@page contentType="text/html; charset=UTF-8"%>
    <!DOCTYPE html>
    <html>
    ... skipped ...
    <c:forEach items="${products}" var="product">
      <%@include file="productInfo.jsp"%>
    </c:forEach>
    ... skipped ...
    </html> 
    ```

    第二个请求（列表延续的 AJAX 请求）应返回带有请求的列表部分的 JSP：

    ```
    <c:forEach items="${products}" var="product">
      <%@include file="productInfo.jsp"%>
    </c:forEach> 
    ```

    其内容可以通过浏览器中的 AJAX 响应处理程序插入到 DOM 中，无需任何额外处理。请注意，两个响应都包含相同的 JSP 以呈现有关单个产品的信息。

2.  `<%@include file="..."%>`您可以使用[JSP 标签](http://docs.oracle.com/javaee/5/tutorial/doc/bnama.html)代替。其余的看起来类似：JSP for the entire page

    ```
    <%@page contentType="text/html; charset=UTF-8"%>
    <!DOCTYPE html>
    <html>
    ... skipped ...
    <c:forEach items="${products}" var="product">
      <tag:productInfo product="${product}" />
    </c:forEach>
    ... skipped ...
    </html> 
    ```

    具有请求的列表部分的 JSP：

    ```
    <c:forEach items="${products}" var="product">
      <tag:productInfo product="${product}" />
    </c:forEach> 
    ```

通过这种方式，您可以为两种响应（AJAX 和非 AJAX）重用单一视图 (JSP)，并消除 AJAX 的第二种呈现机制（JSON + 从 JavaScript 手动创建 DOM 片段）。

# c - C语言读写大文件的有效方法

> ID：13498233
> 
> 赞同：0
> 
> 时间：2012-11-21T16:57:50.150
> 
> 标签：c, file

我正在编写一个处理非常大的用户生成的输入文件的应用程序。该程序将复制大约 95% 的文件，有效地复制它并在副本中切换一些单词和值，然后将副本（以块的形式）附加到原始文件中，这样每个块（由 10 到 50行）在原始块之后是复制和修改的块，然后是下一个原始块，依此类推。用户生成的输入符合某种格式，原始文件中的任何行都不太可能超过 100 个字符。

哪种方法更好？

1.  使用一个文件指针并使用变量来保存已读取的当前位置和写入位置，来回寻找文件指针以进行读取和写入；或者

2.  要使用多个文件指针，一个用于读取，一个用于写入。

我最关心程序的效率，因为输入文件将达到 25,000 行，每行大约 50 个字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T17:52:10.407

如果您有内存限制，或者您想要一种通用方法，请从一个文件指针将字节读入缓冲区，进行更改，然后在缓冲区已满时将缓冲区写出到第二个文件指针。如果您在第一个指针上到达 EOF，请进行更改并将缓冲区中的任何内容刷新到输出指针。如果您打算替换原始文件，请将输出文件复制到输入文件并删除输出文件。这种“原子”方法可让您在删除任何内容之前检查复制操作是否正确进行。

例如，要处理一般复制任意数量的字节，比如一次 1 MiB：

```
#define COPY_BUFFER_MAXSIZE 1048576

/* ... */

unsigned char *buffer = NULL;
buffer = malloc(COPY_BUFFER_MAXSIZE);
if (!buffer)
    exit(-1);

FILE *inFp = fopen(inFilename, "r");
fseek(inFp, 0, SEEK_END);
uint64_t fileSize = ftell(inFp);
rewind(inFp);

FILE *outFp = stdout; /* change this if you don't want to write to standard output */

uint64_t outFileSizeCounter = fileSize; 

/* we fread() bytes from inFp in COPY_BUFFER_MAXSIZE increments, until there is nothing left to fread() */

do {
    if (outFileSizeCounter > COPY_BUFFER_MAXSIZE) {
        fread(buffer, 1, (size_t) COPY_BUFFER_MAXSIZE, inFp);
        /* -- make changes to buffer contents at this stage
           -- if you resize the buffer, then copy the buffer and 
              change the following statement to fwrite() the number of 
              bytes in the copy of the buffer */
        fwrite(buffer, 1, (size_t) COPY_BUFFER_MAXSIZE, outFp);
        outFileSizeCounter -= COPY_BUFFER_MAXSIZE;
    }
    else {
        fread(buffer, 1, (size_t) outFileSizeCounter, inFp);
        /* -- make changes to buffer contents at this stage
           -- again, make a copy of buffer if it needs resizing, 
              and adjust the fwrite() statement to change the number 
              of bytes that need writing */
        fwrite(buffer, 1, (size_t) outFileSizeCounter, outFp);
        outFileSizeCounter = 0ULL;
    }
} while (outFileSizeCounter > 0);

free(buffer); 
```

处理调整大小的缓冲区的一种有效方法是保留第二个指针，例如，如果需要，`unsigned char *copyBuffer`它会被`realloc()`-ed 到两倍大小，以处理累积的编辑。这样，您就可以将昂贵`realloc()`的通话费用降至最低。

不知道为什么这被否决了，但它是一种非常可靠的方法，可以处理大量数据。无论如何，希望这对遇到这个问题的人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T17:03:40.403

25000 行 * 100 个字符 = 2.5MB，这并不是一个真正的大文件。最快的可能是读取内存中的整个文件并将结果写入新文件并用该文件替换原始文件。

# php - PHP：从数据文件中提取电子邮件和名称

> ID：13498234
> 
> 赞同：1
> 
> 时间：2012-11-21T16:57:52.257
> 
> 标签：php, regex

我需要从一个数据文件中提取姓名和电子邮件。该文件包含超过 500 行，我想提取这两个信息几乎所有的数据。我想使用 preg_match_all，但我的功能不起作用......

```
 $chaine =
"  -----------------
11/21/12 16:06:54 tcp static-qvn-qvt-127041
MAIL toto1@web.com
NAME tata1
 -----------------
11/21/12 16:06:54 tcp static-qvn-qvt-127041
MAIL toto2@web.com
NAME tata2
 *  -----------------
11/21/12 16:06:54 tcp static-qvn-qvt-127041
MAIL toto3@web.com
NAME tata3
";

//$chaine =" #76:50#89:1#86:50#49:1#84:22";
$motif="/MAIL([a-z]{2,4}+)NAME([a-z]{2,4}+)/";
preg_match_all($motif,$chaine,$out);
$nb=count($out[0]);
for($i=0;$i<$nb;$i++)
{
    echo $out[0][$i].'<br/>';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:16:40.153

我觉得正则表达式可能对你正在做的事情有点矫枉过正。

为什么不简单地逐行阅读，用空格作为分隔符展开（[此处](http://ca1.php.net/explode)的文档），然后检查第一项是否为“MAIL”，或者是否为“NAME”，然后使用第二项，否则丢弃线？

这是一个示例代码：

```
foreach(preg_split("/((\r?\n)|(\r\n?))/", $chaine) as $line)
{
    $segments = explode(' ', $line);
    if($segments[0] === "MAIL")
        echo "Found mail " . $segments[1] . "\n";
    elseif($segments[0] === "NAME")
        echo "Found name " . $segments[1] . "\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T17:16:27.437

"s" 修饰符添加对多行的支持。

您的正则表达式将如下所示：

```
$motif="/MAIL\s*([a-z]{2,4}).*?NAME\s*([a-z]{2,4})/s"; 
```

# c# - 处理重复插入

> ID：13498235
> 
> 赞同：0
> 
> 时间：2012-11-21T16:57:23.850
> 
> 标签：c#, linq, entity-framework-4.1

所以我有这段代码，逻辑上应该可以工作，但实体框架的行为出乎意料。

这里：

```
foreach (SomeClass someobject in allObjects)
{
    Supplier supplier = new Supplier();

    supplier.primary_key = someobject.id;
    supplier.name = someobject.displayname;

    try
    {
       sm.Add(supplier);
       ro.Created++;
    }
    catch (Exception ex)
    {
       ro.Error++;
    }
} 
```

这是我在 sm.Add() 中的内容

```
 public Supplier Add(Supplier supplier)
    {
        try
        {
            _ctx.AddToSupplier(supplier);
            _ctx.SaveChanges();
             return supplier;
        }
        catch (Exception ex)
        {
            throw;
        }
    } 
```

我可以在**allObjects**中拥有相同 id 的记录。我的一段代码需要支持这一点，然后继续下一段并尝试插入它，我认为这应该可以工作。

如果发生这种情况，则会抛出异常，表示无法插入具有欺骗 PK 的记录（当然）。异常提到了 PK 的值，例如**1000**。

一切都很好，一个新的**供应商**被传递给**sm.Add()**包含一个以前从未使用过的 PK。( **1001** )

奇怪的是，在执行 SaveChanges() 时，EF 会抱怨无法插入带有欺骗 PK 的记录。即使**供应商**在**primary_key**中包含**1001** ，异常仍然提到**1000**。

 ******我觉得这是我没有正确使用**_ctx**。我需要调用别的东西来同步它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:29:54.513

找到它，不得不在 Add() 方法中改变一些东西：

```
public Supplier Add(Supplier supplier)
{
    try
    {
        _ctx.AddToSupplier(supplier);
        _ctx.SaveChanges();
         return supplier;
    }
    catch (Exception ex)
    {
        _ctx.Supplier.Detach(supplier);
        throw;
    }
} 
```******

# google-maps-api-3 - 移除折线

> ID：13498242
> 
> 赞同：0
> 
> 时间：2012-11-21T16:58:14.723
> 
> 标签：google-maps-api-3, google-polyline

我有下一个代码，它使用折线显示路径。我怎样才能删除它？

```
downloadUrl("myfile.asp", function(data) {
var xml = xmlParse(data);
var markers = xml.documentElement.getElementsByTagName("marker");
var path = [];
for (var i = 0; i < markers.length; i++) {
  var lat = parseFloat(markers[i].getAttribute("lat"));
  var lng = parseFloat(markers[i].getAttribute("lng"));
  var point = new google.maps.LatLng(lat,lng);
  path.push(point);
}//finish loop

var polyline = new google.maps.Polyline({
  path: path,
  strokeColor: "#FF0000",
  strokeOpacity: 1.0,
  strokeWeight: 2
});
polyline.setMap(map);

}); //end download url 
```

我已经尝试使用下一个功能，但我无法使其工作。

```
 function removePath() {
 polyline.setMap(null) 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:10:06.243

我认为问题是变量“折线”的位置。

```
var polyline = null;
downloadUrl("myfile.asp", function(data) {
   ...

   polyline = new google.maps.Polyline({
      path: path,
      strokeColor: "#FF0000",
      strokeOpacity: 1.0,
      strokeWeight: 2
   });
   polyline.setMap(map);

}); //end download url

function removePath() {
  polyline.setMap(null)
} 
```

# ios - EXC_BAD_ACCESS 错误仅在 iPad 中，不在 iPhone 和模拟器中

> ID：13498244
> 
> 赞同：1
> 
> 时间：2012-11-21T16:58:48.887
> 
> 标签：ios, ios6

我在 iOS 应用程序中遇到 EXC_BAD_ACCESS 错误。在模拟器和 iPhone 4S 设备上一切正常，但在 iPad2 设备上出现此错误。我在 iPhone 和 iPad2 设备上都安装了 iOS 6.0。

这是功能：我在背景图像（UIImageView）上有一个圣诞树（UIImageView）。我在圣诞树顶部有很多装饰品（UIImageViews），当用户摇动设备时它们都会掉下来。现在我们可以将装饰品从地板上拖下来，然后将它们装饰在树上。我注意到它仅在我离开/释放装饰物部分接触树时才会崩溃（我的意思是当装饰物接触树的边缘并且仍在背景 UIImageView 上并且我释放/放下装饰物时）

错误来自方法`CGFloat red = (rawData[byteIndex] * 1.0) / 255.0;`内部的代码`-(NSArray*)getRGBAsFromImage:(UIImage*)image atX:(int)xx andY:(int)yy count:(int)count`。下面是代码...

我尝试了各种方法来解决它，但没有用。如果有人能指导我正确的方向，将不胜感激。

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    //[Audio1 pause];
    NSLog(@"touchesEnded:withEvent:");
    UITouch *touch = [touches anyObject];
    CGPoint currentPosition = [touch locationInView:self.view];

    if (pageNum == 9) //ROCKEFELLER CHRISTMAS TREE
    {
        NSLog(@"touchesEnded:withEvent: if (pageNum == 9)");
        float trans_y,drop_second;
        UIImageView *temp_view;
        //        UITouch *touch=[touches anyObject];
        CGPoint _location=currentPosition;

        //for (int i=601; i<636; i++) {
        for (int i=921; i<956; i++) {
            if ([touch view] ==[self.view viewWithTag:i]) {
                press_ornament=YES;
                //invalidate the transform scale.
                temp_view=(UIImageView *)[self.view viewWithTag:i];
                temp_view.transform=CGAffineTransformIdentity;

                //detect the position are inside tree, or outside
                color_array= [self getRGBAsFromImage:tree.image atX:_location.x andY:_location.y count:1];
                color = color_array[0];

                //Call getRed:green:blue:alpha: and pass in pointers to floats to take the answer.
                [color getRed: &red_color green: &green_color blue: &blue_color alpha: &alpha_value];

                NSLog(@"red = %f. Green = %f. Blue = %f. Alpha = %f",red_color,green_color,blue_color,alpha_value);

                // Using alpha, decide inside the tree inside the tree view domain
                if ((alpha_value == 1) && (tree.frame.origin.x < _location.x) &&(_location.x <tree.frame.origin.x +tree.frame.size.width) && (tree.frame.origin.y < _location.y) && (_location.y< tree.frame.origin.y + tree.frame.size.height)) {

                    [touch view].center=CGPointMake(_location.x, _location.y);

                }
                //outside the tree fall the ornament
                else{
                    if ([[UIDevice currentDevice]userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
                        trans_y=280-[touch view].frame.origin.y;
                        drop_second =trans_y/150;
                        temp_view=(UIImageView *)[self.view viewWithTag:i];

                        // Move the image
                        [self moveImage:temp_view duration:drop_second curve:UIViewAnimationCurveLinear x:temp_view.frame.origin.x y:280];
                    }
                    else{
                        trans_y=730-[touch view].frame.origin.y;
                        drop_second =trans_y/300;
                        temp_view=(UIImageView *)[self.view viewWithTag:i];

                        // Move the image
                        [self moveImage:temp_view duration:drop_second curve:UIViewAnimationCurveLinear x:temp_view.frame.origin.x y:730];
                    }
                }
            }
        }
    }

    }

//This is the function that get point color.
-(NSArray*)getRGBAsFromImage:(UIImage*)image atX:(int)xx andY:(int)yy count:(int)count
{
    NSMutableArray *result = [NSMutableArray arrayWithCapacity:count];

    // First get the image into your data buffer
    CGImageRef imageRef = [image CGImage];
    //    NSUInteger width = CGImageGetWidth(imageRef);
    //    NSUInteger height = CGImageGetHeight(imageRef);
    NSInteger width=tree.frame.size.width;
    NSInteger height=tree.frame.size.height;

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    unsigned char *rawData = (unsigned char*) calloc(height * width * 4, sizeof(unsigned char));
    NSUInteger bytesPerPixel = 4;
    NSUInteger bytesPerRow = bytesPerPixel * width;
    NSUInteger bitsPerComponent = 8;
    CGContextRef context = CGBitmapContextCreate(rawData, width, height,
                                                 bitsPerComponent, bytesPerRow, colorSpace,
                                                 kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
    CGColorSpaceRelease(colorSpace);

    CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);
    CGContextRelease(context);

    // Now your rawData contains the image data in the RGBA8888 pixel format.
    int byteIndex = (bytesPerRow * yy) + xx * bytesPerPixel;
    for (int ii = 0 ; ii < count ; ++ii)
    {
        CGFloat red   = (rawData[byteIndex]     * 1.0) / 255.0;
        CGFloat green = (rawData[byteIndex + 1] * 1.0) / 255.0;
        CGFloat blue  = (rawData[byteIndex + 2] * 1.0) / 255.0;
        CGFloat alpha = (rawData[byteIndex + 3] * 1.0) / 255.0;
        byteIndex += 4;

        UIColor *acolor = [UIColor colorWithRed:red green:green blue:blue alpha:alpha];
        [result addObject:acolor];
    }

    free(rawData);

    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:21:31.763

我怀疑您没有得到`xx,yy`您期望的结果，因此您超出了分配的块。尝试 NSLog 或调试`xx,yy`并查看`byteindex`最终结果。

或者如果您超出范围，请插入断言以捕获。

```
NSAssert( bytesPerRow * width  * yy + xx * bytesPerPixel 
  < height * width * 4, 
  @"outside range!" ); 
```

我还建议您缩短函数并将 tmp 变量移动到使用它们的块中。它使代码更易于阅读。

# drupal - Drupal提供模块和drush？

> ID：13498246
> 
> 赞同：0
> 
> 时间：2012-11-21T16:57:54.650
> 
> 标签：drupal, module, drush

我正在尝试自动使用 Provision drush 扩展。大多数情况下效果很好，但我不能让自定义 drush 扩展执行配置安装命令，除非我手动使用 proc_open 直接再次调用 drush。

为了保持我的代码一致，并尽可能多地使用 drush 的 API，我想避免任何直接产生新进程。

所以：我想要工作的是我用于其他 drush 命令的调用，即 drush_backend_process('@sitealias', 'provision-install', array());"

1) 为什么这适用于使用@aliases 的其他命令，而不是配置安装？2) 在 drush 的 API 中，我可以使它工作得如何？（以免直接使用proc_open）

本期更多信息：[https ://drupal.org/node/1844038](https://drupal.org/node/1844038)

# java - Java Sudoku 求解器抛出除以零 ArithmeticException

> ID：13498252
> 
> 赞同：3
> 
> 时间：2012-11-21T16:59:03.297
> 
> 标签：java, sudoku

我在 Java 中做这个数独求解器，由于某种原因，我的代码中有一个错误，我无法修复。我的代码有一个`guess`函数，它可以在每个框中猜测 1-9 的数字，同时检查该数字是否已经写过。

错误在该行中：

```
 else if (board[r + (i % 3)][c + (i / 3)] == num) 
```

由于某种原因我得到一个`ArithmeticException`（除以0）我不明白为什么。希望你能帮忙

我的代码：

```
public class SudokuSolver
{
final int size = 9;
private int box_size;

private int[][] board;

// Create an empty board
public SudokuSolver()
{
  board = new int[size][size];
  this.box_size = size / 3;

}

// initialize a given board
public SudokuSolver(int[][] board)
{
  this.board = board;
}

public void setCell(int num, int row, int col)
{
  board[row][col] = num;
}

public int getCell(int row, int col)
{
  return board[row][col];
}

private boolean check(int num, int row, int col)
{
  int r = (row / 3) * 3;
  int c = (col / 3) * 3;

  for (int i = 0; i < size; i++)
  {
     if (board[row][i] == num)
        return false;

     else if (board[i][col] == num)
        return false;

     else if (board[r + (i % box_size)][c + (i / box_size)] == num)
        return false;
  }
  return true;
  }

  public boolean guess(int row, int col)
  {
  int nextCol = (col + 1) % size;
  int nextRow = (nextCol == 0) ? row + 1 : row;

  try
  {
     if (board[row][col] != 0)
        return guess(nextRow, nextCol);
  }
  catch (ArrayIndexOutOfBoundsException e)
  {
     return true;
  }

  for (int i = 1; i <= size; i++)
  {
     if (check(i, row, col))
     {
        board[row][col] = i;
        if (guess(nextRow, nextCol))
        {
           return true;
        }
     }
  }
  board[row][col] = 0;
  return false;
  }

  public void printBoard()
  {
  for (int row = 0; row < size; row++)
  {
     for (int col = 0; col < size; col++)
     {
        System.out.print(board[row][col] + "  ");
     }
     System.out.println();
   }

  }

  public static void main(String[] args)
  {

  int[][] board = { { 0, 6, 0, 1, 0, 4, 0, 5, 0 },
        { 0, 0, 8, 3, 0, 5, 6, 0, 0 }, { 2, 0, 0, 0, 0, 0, 0, 0, 1 },
        { 8, 0, 0, 4, 0, 7, 0, 0, 6 }, { 0, 0, 6, 0, 0, 0, 3, 0, 0 },
        { 7, 0, 0, 9, 0, 1, 0, 0, 4 }, { 5, 0, 0, 0, 0, 0, 0, 0, 2 },
        { 0, 0, 7, 2, 0, 6, 9, 0, 0 }, { 0, 4, 0, 5, 0, 8, 0, 7, 0 } };

  SudokuSolver ss = new SudokuSolver(board);
  ss.printBoard();
  System.out.println();
  System.out.println();
  if(ss.guess(0, 0))
     ss.printBoard();

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T18:06:23.003

在遇到错误之前打印`box_size`将显示它实际上是`0`. 您永远不会在此构造函数中初始化它，因此它保留其默认值`0`：

```
public SudokuSolver(int[][] board) {
    this.board = board;
} 
```

您可能打算包含类似`this.box_size = board.length / 3`.

* * *

***PS***导致错误的*真正*行是

```
else if (board[r + (i % box_size)][c + (i / box_size)] == num) 
```

您可能不应该`box_size`在您的问题中替换您期望的内容。

# php - exec（）资源管理器文件夹未运行

> ID：13498253
> 
> 赞同：-1
> 
> 时间：2012-11-21T16:59:04.470
> 
> 标签：php

我写了一个 PHP 脚本，它正在创建一些文件。

完成后，我希望它打开一个文件夹，存储创建的文件。

```
exec("explorer C:\\test"); 
```

不幸的是，它根本没有打开文件夹。

我在 cmd 中检查它以及它在哪里工作。

我也试过这个：

```
shell_exec("explorer C:\\test"); 
```

任何提示或建议都非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-26T06:32:54.587

如果您的本地主机在装有 Windows 操作系统的计算机上（我使用 xampp），则可以这样做。任何 cmd 命令都可以使用 exec(); 所以对于你的问题：

```
$path = "C:\your path";
exec('start "" "'.$path.'"'); 
```

将在 Windows 中打开您的文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:04:04.210

为什么不使用 PHP 的目录函数？

[http://php.net/manual/en/function.dir.php](http://php.net/manual/en/function.dir.php)

[http://php.net/manual/en/function.readdir.php](http://php.net/manual/en/function.readdir.php)

我猜测 PHP 无法打开 GUI 程序，例如资源管理器，因为它可能无法访问用户的显示。反正只是我的理论。您可以使用 PHP 和上述功能构建文件夹 GUI。

# json - 使用 JSON/Jackson 时如何处理消息包装器

> ID：13498254
> 
> 赞同：3
> 
> 时间：2012-11-21T16:59:08.930
> 
> 标签：json, spring, jackson

我正在尝试使用基于 JSON 的服务，该服务在其响应周围使用包装器。包装器看起来像这样：

```
{
    "errors": [
        {
            "message": "some message",
            "code": "possibly some error code"
        }
    ],
    "result": [],
    "metadata": {
        "limit": 100,
        "offset": 0,
        "total": 5
    }
} 
```

“结果”可能包含一个对象或对象数组。例如，如果我调用“苹果”服务，我会在结果中得到一个苹果对象或苹果对象数组。同样，如果我调用“橙色”服务，我会在结果中得到一个橙色对象或橙色对象数组。

问题是，如何使用 Jackson 反序列化？

谢谢，

乔

# sql - Facebook 粉丝页面 ID 不适用于开放图形 sql 查询

> ID：13498267
> 
> 赞同：0
> 
> 时间：2012-11-21T16:58:27.377
> 
> 标签：sql, facebook-graph-api, facebook-page

所以我有一些代码可以通过图表显示粉丝页面专辑，但它不适用于我的粉丝页面 ID。我已经尝试过其他粉丝页面 ID，它们可以工作。我还去了开发者网站并使用了他们的开放图示例，将位置栏中的专辑 ID 和页面 ID 替换为我的。这仍然行不通。

我的粉丝页面 ID 似乎不再与我的实际“粉丝页面”相关联。如果可能的话，我想知道如何纠正这个问题！有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:48:26.300

经过长时间的搜索，我终于找到了答案。地理限制阻止我提取粉丝页面数据。这是解决方案的链接。

[访问公共 Facebook 页面的 Graph API 返回“假”或“不支持的获取请求”](https://stackoverflow.com/questions/6843796/graph-api-returns-false-on-fan-page-details)

# javascript - 通过单选设置文本字段

> ID：13498268
> 
> 赞同：0
> 
> 时间：2012-11-21T16:58:27.767
> 
> 标签：javascript, radio-button, textfield

这是我第一次真正尝试编写 JS 函数。我想根据一对单选按钮的选择来设置文本字段的值。

```
<script type='text/javascript'>

function setInputValue(){

if(document.getElementById('choice_8_0').checked) {

       document.getElementById('input_6_18').value = '1';

    }else if(document.getElementById('choice_8_1').checked) {

     document.getElementById('input_6_18').value = '0';
}}

</script> 
```

谁能帮我解决我哪里出错了？我什至不确定如何真正命名该函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T11:37:58.603

你可以使用：

```
 document.getElementById('elementId').checked = true; 
```

或者

```
document.getElementById('elementId').checked = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:13:41.507

要选择单选按钮，可以使用单选按钮的`checked`属性：

```
 document.getElementById('input_6_18').checked = true/false; 
```

编辑：好像你想设置输入类型文本的文本？

比您的代码正确，属性是`value`. 那么问题是什么？

# javascript - Javascript 不适用于 FireFox

> ID：13498270
> 
> 赞同：0
> 
> 时间：2012-11-21T16:58:30.247
> 
> 标签：javascript, firefox

> **可能重复：**
> [“innerText”在 IE 中有效，但在 Firefox 中无效](https://stackoverflow.com/questions/1359469/innertext-works-in-ie-but-not-in-firefox)

```
function stopped() {
    var this_row =  document.getElementById("row_1");
    var cells = this_row.getElementsByTagName("td");

    $('#starttime').html(cells[0].innerText);     
} 
```

我上面有一个javascript函数。它使用单元格 [0] 中的值填充表单。它适用于 IE 和 Chrome。但它不能与 FireFox 浏览器一起使用。我想知道我的代码是否有任何问题。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:06:27.680

## 问题是`innerText`

您的代码的问题是（正如[莫勒博士](https://stackoverflow.com/a/13498358/75642)也指出的那样）使用了`innerText`Firefox 无法理解的属性，这可以在[QuirksMode 页面](http://www.quirksmode.org/dom/w3c_html.html#t04)上看到。

Firefox 反而理解`textContent`属性。

## 解决方案

重写你的函数以包含 jQuery，它应该可以跨浏览器工作，因为 jQuery 被编写为一个跨浏览器库（通过单独的浏览器怪癖让我们的生活更轻松）：

```
function stopped() {
    $("#starttime").html($("#row_1 td:first-child").text());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T17:05:11.213

采用

```
$(cells[0]).text(); 
```

代替

```
cells[0].innerText 
```

innerText 是 IE 引入的属性，不是 w3c 标准（firefox 不支持）。

# transactions - Sybase 锁定策略

> ID：13498271
> 
> 赞同：4
> 
> 时间：2012-11-21T16:59:34.293
> 
> 标签：transactions, locking, sap-ase

Adaptive Server 提供以下锁定方案：

*   Allpages locking，即锁定数据页和索引页
*   数据页锁定，仅锁定数据页
*   数据行锁定，仅锁定数据行

我的问题是，如果锁的数量取决于锁定策略。有人说很多锁是应用程序实现不好或类似情况的标志。我的意思是，数据行策略将需要比例如数据页更多的锁，因为数据页在一个锁下覆盖了许多行。我不完全确定我的假设。

我目前有 200k，但这还不够。

最近将我的表上的锁定策略更改为数据行以提高性能，从那时起我一直在增加锁定。

Sybase 文档说范围在 1000–2147483647 之间。

为什么不直接将其设置为 2147483647？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-25T19:36:30.880

当有很多进程访问数据库时，数据页和数据行锁定会更好，并且有相当多的 WRITE/UPDATE 操作需要独占锁定。使用所有页面锁定，更多页面被一个操作锁定（比受写操作影响的页面更多），因此可以阻止想要访问不受写操作影响的数据的进程。

但是，如果该表具有数据页或数据行锁定，则相同的写入过程将仅锁定受影响的数据，从而锁定较少量的数据，从而提供更好的并发性。但是这个写入进程持有的锁数更多，因此需要更多的内存。

例如，一个页面有 10 行，写入过程影响 5 行。如果进程锁定页面，它只需要一个锁并阻止任何想要读取其余五行中的任何一个的进程。

如果该表具有数据行锁定，则写入进程将获取五个锁（这意味着更多内存）并将其余五行留在页面上以供任何其他进程读取/写入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:36:16.077

Locks use memory, so setting to the maximum value could cause your ASE instance to run out of available memory. SAP Sybase has some [performance and tuning documentation](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.dc20021_1251/html/locking/title.htm) that may help you figure out how to better tune your application, and server.

# php - jquery自动标签不起作用

> ID：13498273
> 
> 赞同：-1
> 
> 时间：2012-11-21T16:59:35.450
> 
> 标签：php, javascript, jquery, html

我想将此源代码用于我的：

```
<textarea id="textarea" class="example" rows="1"></textarea>

<div style="margin-top: 20px">
    <input type="text" id="tagname" placeholder="tag name" />
    <button id="addtag" class="btn">Click to add tag</button>
</div>

<script type="text/javascript">
    $('#textarea').textext({ plugins: 'tags' });

    $('#addtag').bind('click', function(e)
    {
        $('#textarea').textext()[0].tags().addTags([ $('#tagname').val() ]);
        $('#tagname').val('');
    });
</script> 
```

此外，我还向我的头添加了带有此标签的 jquery 和标签脚本：

```
<script charset="utf-8" type="text/javascript" src="/lib/jq.js"></script>
<script charset="utf-8" type="text/javascript" src="/lib/tagm.js"> </script> 
```

我想使用这个源代码：[http ://textextjs.com/manual/examples/tags-adding.html](http://textextjs.com/manual/examples/tags-adding.html)

我在 php 上运行 Localhost 。

它不工作，我的问题在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:08:07.200

您需要添加对 TextText JS 的引用。将此添加到您的页面：

```
<script src="http://bundlejs.com/alexgorbatchev/products/textext/1.3.1?compress=true&bundles=core,ajax,arrow,autocomplete,filter,focus,prompt,suggestions,tags" type="text/javascript" charset="utf-8"></script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T17:27:21.273

我发现了我的问题：

我必须将 src="/lib/jq.js" 更改为 src="lib/jq.js" 和 sec 相同：D

# jquery - Fancybox iframe 表单操作 - 使用 ajax

> ID：13498274
> 
> 赞同：0
> 
> 时间：2012-11-21T16:59:41.690
> 
> 标签：jquery, ajax, fancybox

我创建了一个表单弹出窗口，它在页面的鼠标离开时带有隐藏的触发器。这样，我对输入的值进行了全面检查，然后使用 ajax 数据转到 php 以发送电子邮件。到那时一切都很好。现在我需要从 index.html 中删除 html 内容并从外部文件（例如 form.html）中添加它。我决定使用 iframe，所以我设法使表单显示为一个很好的弹出窗口，但表单提交或输入值检查现在失败。我使用的是旧的 fancybox 版本而不是 2 号版本。使用 jQuery 选择器等保存的所有控件，现在甚至无法识别按钮“提交”单击。然后我想到了 on() 函数，所以我写了

```
$("#submit").on('click', function() { ... }); 
```

但没有同样的问题。有任何想法吗？也许我不必使用 iframe 而是使用 ajax 来加载内容然后 on()。我也尝试过，但我遇到了无法正确显示的弹出内容表单的问题。

这是我到目前为止所做的所有进展。

```
$(document).ready(function(){
'use strict';

//Bring form.html content with ajax into the page
$('body').append('<a id="trigger" href="#form_id"></a>');

//Check for mobile device, if jQuery.browser.mobile is false then we have a desktop or a laptop
if(!jQuery.browser.mobile)
{

    //Popup is triggered when mouseleave effect happens
    $(document).mouseleave(function() {

        'use strict';
        //Check if cookie popup already exists
        var popupCookie = COOKIE.getCookie('popup');

        //If it is then popup doesn't show
        if(!popupCookie)
        {//Popup appears but a popup cookie is set with duration set to 24 hours from now

            //Set expiration limit in 24 hours
            var expire = new Date();
            var time = expire.getTime();
            time += 24 * 3600 * 1000;//Exactly 24 hours from now
            expire.setTime(time);

            //Set a popup cookie
            COOKIE.setCookie('popup', 'popup', expire);

            $("#trigger").fancybox();
            //Triggers popup
            $("#trigger").trigger('click');

$.ajax({
  url: "form.html",
  success: function(data){
   $('body').append(data);
  }
});

            //Reset values
            $('input:text').val('');
            $('textarea').val('');
            $('#fancybox-content').css('background-color','#fff');          

            //Popup form function
            $("#trigger").fancybox({
                'scrolling'         : 'no',
                'hideOnOverlayClick': false,
                'onClosed'          : function() {
                                        $('input:text').val('');
                                        $('textarea').val('');
                                    },
                'autoDimensions'    : true,
                'padding'           : 5,
                'transitionIn'      : 'elastic',
                'onStart'           : function(){
                                        $('#fancybox-content').css('background-color','#fff');                  
                                    }
            }); 

    $("#submit").on('click', function() { ... });
   }
  });
}); 
```

# java - JDK 中是否定义了 HTTP 和 HTTPS 默认端口号？

> ID：13498275
> 
> 赞同：6
> 
> 时间：2012-11-21T16:59:44.457
> 
> 标签：java, http

我四处寻找是否端口 80 和端口 443 被定义为任何地方的公共常量。这些是否存在于 JDK 中（或者可能存在于 Apache HttpClient 等通用库中）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T17:18:10.413

查看 Javadoc 的 URL：[http ://docs.oracle.com/javase/8/docs/api/java/net/URL.html#getDefaultPort--](http://docs.oracle.com/javase/8/docs/api/java/net/URL.html#getDefaultPort--)

`getDefaultPort()`返回给定协议的端口

```
URL url = new URL("http://blah.com");
int defaultPort = url.getDefaultPort(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-17T06:54:04.830

Apache HttpClient 确实将它们作为整数常量：

*   [http://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/HttpURL.html#DEFAULT_PORT](http://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/HttpURL.html#DEFAULT_PORT)
*   [http://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/HttpsURL.html#DEFAULT_PORT](http://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/HttpsURL.html#DEFAULT_PORT)

# jquery - jQuery UI 自动完成类别不显示

> ID：13498278
> 
> 赞同：0
> 
> 时间：2012-11-21T16:59:43.510
> 
> 标签：jquery, json, jquery-ui, autocomplete, jquery-ui-autocomplete

任何想法为什么类别返回`undefined`？

我得到的项目，但不是类别？

```
 $.widget( "custom.catcomplete", $.ui.autocomplete, {
        _renderMenu: function( ul, items ) {
            var that = this,
                currentCategory = "";
            $.each( items, function( index, item ) {
                if ( item.category != currentCategory ) {
                    ul.append( "<li class='ui-autocomplete-category'>" + item.category + "</li>" );
                    currentCategory = item.category;
                }
                that._renderItemData( ul, item );
            });
        }
   });

    function split( val ) {
            return val.split( /,\s*/ );
        }
        function extractLast( term ) {
            return split( term ).pop();
        }

    $("#people_q:not(.ui-autocomplete-input)").live("keyup", function (event) {
        $(this).catcomplete({
            source: function (request, response) {
                $.ajax({
                    url: "/json/people_search.asp",
                    dataType: "json",
                    data: {
                        q:extractLast( request.term )
                    },
                    success: function (data) {
                        response($.map(data.results.result, function (item) {
                            return {
                                label: item.sresult,
                                value: item.sresult
                            };
                        }));
                    }
                });
            },
            minLength: 2,
            open: function () {
                $(this).removeClass("ui-corner-all").addClass("ui-corner-top");
            },
            close: function () {
                $(this).removeClass("ui-corner-top").addClass("ui-corner-all");
            },
                focus: function() {
                    // prevent value inserted on focus
                    return false;
                },
                select: function( event, ui ) {
                    var terms = split( this.value );
                    // remove the current input
                    terms.pop();
                    // add the selected item
                    terms.push( ui.item.value );
                    // add placeholder to get the comma-and-space at the end
                    terms.push( "" );
                    this.value = terms.join( ", " );
                    return false;
                }
        });
    }); 
```

这是我用来提供自动完成功能的已检查有效 Json。

```
{
    "results": {
        "count": "8",
        "result": [
            {
                "id": 0,
                "sresult": "web development",
                "category": "tag"
            },
            {
                "id": 1,
                "sresult": "entrepreneur",
                "category": "tag"
            },
            {
                "id": 2,
                "sresult": "Talks / Presentations",
                "category": "tag"
            },
            {
                "id": 3,
                "sresult": "music management",
                "category": "tag"
            },
            {
                "id": 4,
                "sresult": "User Experience Design",
                "category": "tag"
            },
            {
                "id": 5,
                "sresult": "English",
                "category": "tag"
            },
            {
                "id": 6,
                "sresult": "French",
                "category": "tag"
            },
            {
                "id": 7,
                "sresult": "entier Associates Ltd",
                "category": "company"
            }
        ]
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:32:18.227

您提供`response`回调的数据不包括`category`每个项目的 a。您应该能够`success`像这样更改回调：

```
success: function (data) {
    response($.map(data.results.result, function (item) {
        return {
            label: item.sresult,
            value: item.sresult,
            category: item.category // <-----
        };
    }));
} 
```

# ruby-on-rails - 如何知道在 after_update 中发起请求的控制器

> ID：13498280
> 
> 赞同：0
> 
> 时间：2012-11-21T17:00:14.123
> 
> 标签：ruby-on-rails, ruby

在我的应用程序中，有多个控制器/动作可以修改同一个模型。我需要记录进行了更新，还需要记录哪个动作/控制器发起了请求。是否可以在 after_update 中而不是在每个进行更新的操作中这样做？
我正在使用 Rails 2.3.8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:07:39.010

不，`after_update`属于模型级别，它无权访问控制器。

至少您可以使用`after_update`在日志中写入：当您想查看它发生在哪个控制器上时，您可以浏览日志以在上面的行中找到控制器。

# c# - 如何启用/禁用按钮？

> ID：13498287
> 
> 赞同：0
> 
> 时间：2012-11-21T17:00:44.463
> 
> 标签：c#, wpf, mvvm, controls

虽然我已经找到了这个问题的几个答案，但我还是不明白。所以请原谅我问。

我有一个遵循 MVVM 模式的 WPF 应用程序。它包含一个绑定到视图模型中的命令的按钮：

`<button Content="Login" Command="{Binding ProjectLoginCommand}"/>`

命令正在使用`RelayCommand`. 现在我想做以下事情：

*   用户点击按钮，执行相应的命令。这行得通。
*   在该命令中，另一个按钮将被禁用，即它不能被点击。

我发现这应该是可能的，`CanExecute`但说实话：我根本不明白。我可以将按钮设置为启用/禁用吗？

这是`RelayCommand.cs`：

```
namespace MyApp.Helpers {
    class RelayCommand : ICommand {

    readonly Action<object> execute;
    readonly Predicate<object> canExecute;

    public RelayCommand(Action<object> execute) : this(execute, null) {
    }

    public RelayCommand(Action<object> execute, Predicate<object> canExecute)
    {
      if (execute == null)
          throw new ArgumentNullException("execute");

      this.execute = execute;
      this.canExecute = canExecute;           
    }

    public bool CanExecute(object parameter)
    {
      return canExecute == null ? true : canExecute(parameter);
    }

  public event EventHandler CanExecuteChanged
  {
      add { CommandManager.RequerySuggested += value; }
      remove { CommandManager.RequerySuggested -= value; }
  }

  public void Execute(object parameter)
  {
      execute(parameter);
  }
 }
} 
```

这就是我调用命令的方式：

```
RelayCommand getProjectListCommand;

public ICommand GetProjectListCommand {
    get {
        if (getProjectListCommand == null) {
            getProjectListCommand = new RelayCommand(param => this.ProjectLogin());
        }
        return getProjectListCommand;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T17:12:36.483

创建 RelayCommand 对象时，您必须传递一个 can Predicate，它可以是（除其他外）具有以下签名的方法：

布尔方法名称（对象参数）。

如果您不需要该参数，请使用例如 bool MethodName()，但将其传递给 RelayCommand 构造函数，如下所示：(o) => MethodName()。

在这种方法中，您应该执行您的逻辑并返回一个指示该命令是否可以执行的值。其余的应由 WPF 命令基础结构处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T17:30:15.853

如果您在使用 canExecute 回调时遇到问题，您可能会发现使用更简单的 RelayCommand 版本更容易：

```
class RelayCommand : ICommand 
{
    readonly Action execute;
    private bool canExecute;

    public RelayCommand(Action execute) 
    {
        this.execute = execute;
        this.canExecute = true;
    }

    public bool CanExecute(object parameter)
    {
        return canExecute;
    }

    public void SetCanExecute(bool canExecute)
    {
        this.canExecute = canExecute;
        var handler = CanExecuteChanged;
        if (handler != null) handler(this, EventArgs.Empty);
    }

    public event EventHandler CanExecuteChanged;

    public void Execute(object parameter)
    {
        execute();
    }
} 
```

使用这种方法，您可以保存对您创建的 RelayCommand 对象的引用，从而允许您禁用如下命令：

```
getProjectListCommand.SetCanExecute(false); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T17:14:56.597

当您使用 RelayCommand 时，您可以指定两种方法。第一种方法是调用命令时要运行的主要方法。您用于添加检查（如验证）的第二种方法，这应该返回一个布尔值。如果它返回 false，那么 main 方法将不会运行。

它如何影响您绑定命令的按钮，它是否会持续运行布尔方法，并且当它返回 false 时，命令绑定到的按钮将被禁用。

所以在你的命令属性中：

```
public ICommand GetProjectListCommand {
get {
    if (getProjectListCommand == null) {
        getProjectListCommand = new RelayCommand(param => this.ProjectLogin(), CanProjectLogin());
    }
    return getProjectListCommand;
} 
```

添加新方法：

```
public bool CanProjectLogin()
{
    //here check some properties to make sure everything is set that you'd want to use in your ProjectLogin() method
} 
```

如果您在 bool 方法中放置一个断点，您可以看到 CanExecute 是如何工作的。

# php - 如何在另一个网站上保持 facebook 连接

> ID：13498295
> 
> 赞同：0
> 
> 时间：2012-11-21T17:01:15.313
> 
> 标签：php, facebook

我正在做一个允许用户邀请他们的 Facebook 朋友的网站，当他们的朋友在我们的网站上注册为用户时，我可以知道如何自动保持他们和他们的朋友之间的联系吗？例如，John、Jerry 和 Kay 是 Facebook 的好友，John 是 abc.com 的成员，同时他还邀请 Jerry 和 Kay 加入 abc.com，Jerry 加入但 Kay 没有。所以在 abc.com 中，John 和 Jerry 自动成为朋友。我可以知道这里的逻辑是什么吗？谢谢大家，如果你们愿意向我解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:33:42.920

您可以使用 facebook api 来获取用户的朋友。然后将该列表与数据库中的成员交叉引用。我假设您已经在使用问题中的 facebook api。这只是存储和交叉引用数据的问题。

但是，如果您不需要它真正互动，您可以使用`facepile` [社交插件](http://developers.facebook.com/plugins)来模拟这种关系。它将显示所有喜欢同一对象的用户朋友的照片。

# r - 您如何管理在 R 中生成大数据表？（不在大桌子上阅读）

> ID：13498297
> 
> 赞同：3
> 
> 时间：2012-11-21T17:01:20.173
> 
> 标签：r, data.table, bigdata

我一直在寻找解决方案，但似乎找不到任何东西。

基本上，我有一段代码希望扩展到大数据，代码的示例摘录如下：

```
num_train <- 100
num_test <- 100

train <- data.table(k = rep(1,num_train), ID_train = 1:num_train, b_train = rnorm(num_train), c_train = rnorm(num_train), cat = sample(c("A", "B", "C", "D"), num_train, replace = TRUE))
test <- data.table(k = rep(1,num_test), ID_test = 1:num_test, b_test = rnorm(num_test), c_test = rnorm(num_test))

df <- merge(test,train, by="k") 
```

当我在更大的数据上使用它时，它完全按照我想要的方式运行并且速度非常快。（可能与 num_train * num_test = 2,000,000,000 一样大......）

然而问题是生成的数据表增长了 num_train*num_test 行，所以很快就太大了，R 无法处理。

```
num_train <- 1000
num_test <- 10000

train <- data.table(k = rep(1,num_train), ID_train = 1:num_train, b_train = rnorm(num_train), c_train = rnorm(num_train), cat = sample(c("A", "B", "C", "D"), num_train, replace = TRUE))
test <- data.table(k = rep(1,num_test), ID_test = 1:num_test, b_test = rnorm(num_test), c_test = rnorm(num_test))

df <- merge(test,train, by="k")

>Error: cannot allocate vector of size 76.3 Mb 
```

我知道 R 和包的所有内存限制，例如 filehash、ff 和 bigmemory（不太熟悉，已经使用了一些）。这些似乎允许您将大文件设置为数据库并有效地从中读取数据。

但基本上我想知道的是，有没有办法管理从已经在内存中的表*创建*一个大表，比如在创建时将它的一部分写入硬盘？这些软件包中的任何一个都可以为此工作吗？还有其他解决方案吗？

还是这份工作不适合 R？

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:12:38.777

您可以为此使用包 ff 和 ffbase。它不需要像 data.table 那样将您的数据存储在 RAM 中。以下脚本将生成您的 10Mio 行 x 10 列 data.frame。

```
num_train <- 1000
num_test <- 10000
train <- data.table(k = rep(1,num_train), ID_train = 1:num_train, b_train =     rnorm(num_train), c_train = rnorm(num_train), cat = sample(c("A", "B", "C", "D"), num_train,     replace = TRUE))
test <- data.table(k = rep(1,num_test), ID_test = 1:num_test, b_test = rnorm(num_test),     c_test = rnorm(num_test))

train <- data.frame(unclass(train), stringsAsFactors=TRUE)
test <- data.frame(unclass(test), stringsAsFactors=TRUE)
require(ffbase)
train$id <- seq_len(nrow(train))
test$id <- seq_len(nrow(test))
train <- as.ffdf(data.frame(train, stringsAsFactors=TRUE))
test <- as.ffdf(data.frame(test, stringsAsFactors=TRUE))
x <- expand.ffgrid(train$id, test$id)
dim(x)
names(x) <- c("train.id", "test.id")
x <- merge(x, train, by.x="train.id", by.y="id", all.x=TRUE, all.y=FALSE)
x <- merge(x, test, by.x="test.id", by.y="id", all.x=TRUE, all.y=FALSE)
dim(x)
x[1:5, ] 
```

# oop - Symfony2 - Validation.yml 与类和扩展类

> ID：13498299
> 
> 赞同：4
> 
> 时间：2012-11-21T17:01:31.740
> 
> 标签：oop, validation, symfony

我有一个“addressClass”和一个“shippingAddressClass”。'ShippingAdress' 扩展了 'Address' 并且它们都验证相同，除非在检测到邮政信箱时'shippingAddress' 无效。虽然邮政信箱是一个完全有效的帐单地址，但 UPS 不会向他们发货。

### `Bird`假设，验证哪个的 SF2 最佳实践是`extends` `Animal`什么？

我们应该复制我们用来验证的 .yml`Animal`吗？基本上给了我们两个完全相同的部分（见下文）。在这种情况下，与to`getters`略有不同，但需要完全相同的验证规则。`Animal``Bird``properties`

```
Acme\BlogBundle\Entity\Animal:
        properties:
            name:
                - NotBlank: ~
        getters:
            isAnimal:
                - "True"

Acme\BlogBundle\Entity\Bird:
        properties:
            name:
                - NotBlank: ~
        getters:
            isAnimal:
                - "True"
            isBird
                - "True" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:15:54.017

[Validator Service](http://symfony.com/doc/current/book/validation.html)很智能，可以根据原始类的约束进行验证。所以在我`Animal`的`Bird`例子中，我们只需要：

```
Acme\BlogBundle\Entity\Animal:
        properties:
            name:
                - NotBlank: ~
        getters:
            isAnimal:
                - "True"

Acme\BlogBundle\Entity\Bird:
        getters:
            isBird
                - "True" 
```

# performance - 如何提高 SyncReplicaFromAllServers (ActiveDirectory) 的性能

> ID：13498301
> 
> 赞同：0
> 
> 时间：2012-11-21T17:01:35.217
> 
> 标签：performance, active-directory, replication

我正在打电话`SyncReplicaFromAllServers`，即使 DC 位于同一站点，该方法也需要 30 到 60 秒才能完成。

是否有任何设置可用于改善所需时间？

我目前正在这样做，同时针对`SyncFromAllServersCallback`拾取异常进行注册：

```
controller.SyncReplicaFromAllServers(partition, SyncFromAllServersOptions.AbortIfServerUnavailable | SyncFromAllServersOptions.SkipInitialCheck); 
```

# unit-testing - 如何在 Visual Studio 2012 Professional 中连续运行单元测试？

> ID：13498302
> 
> 赞同：24
> 
> 时间：2012-11-21T17:01:45.843
> 
> 标签：unit-testing, ide, visual-studio-2012, test-runner

Visual Studio 2012[在单元测试资源管理器中添加了“构建后运行测试”按钮](http://intellitect.com/turning-on-continuous-testing-in-visual-studio-11/)，但似乎该选项在专业版中不可用。事实上，我的“单元测试资源管理器”只是称为“测试资源管理器”，根本没有那个按钮：

![测试资源管理器窗口的屏幕截图](../Images/be58d30f70ea465d23f042a5c82c84a5.png)

是否有任何扩展可以取代这个缺失的功能？与现有测试资源管理器 UI 集成的东西将是理想的。（免费选项也是首选，因为如果我能说服我的公司霸主为 VS Ultimate/Premium 买单，这无论如何都不是问题）

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-07-15T12:42:05.440

我将 F6 键重新映射到 TestExplorer.RunAllTests 而不是默认的 Build.BuildSolution

执行此操作时，Build.BuildSolution 会重新映射到 Ctrl-Shift-B。

它运行良好，因为现在我的 F6 reflex RunAllTests 可以保存所有修改过的文件、构建我的解决方案并运行我的单元测试。

我唯一需要更改的是我的窗口布局，以便我可以看到测试资源管理器窗口，这样我就知道是否有任何测试失败。

使用我写的关于此的[博客](http://jason.learmouth.ca/2013/07/how-to-run-tests-after-build-in-visual.html)的链接更新答案

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-21T21:39:57.857

Visual Studio 2012 的高级版和终极版中提供了“生成后运行测试”和“配置文件测试”功能。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-22T06:30:17.983

[NCrunch](http://www.ncrunch.net)不是免费的，但它物有所值，并且优于 Visual Studio 中的任何和所有测试运行功能，无论版本如何。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-01-17T23:30:07.073

您还可以查看[http://www.continuoustests.com/](http://www.continuoustests.com/) aka Mighty Moose。

它不像 NCrunch 那样流畅，但它*是*免费的。

# asp.net-mvc - 单独程序集中的部分视图和视图模型问题

> ID：13498303
> 
> 赞同：1
> 
> 时间：2012-11-21T17:01:43.163
> 
> 标签：asp.net-mvc, viewmodel, asp.net-mvc-partialview, html.renderpartial

我正在开发一个 MVC 解决方案，我想为我正在创建的一些局部视图提供一个插件选项。我对每个插件都有单独的程序集，其中包含作为嵌入式资源的 PartialView 和它引用的 viewmodel 类。我使用虚拟文件提供程序来查找所需的 PartialView，这很好用……直到我尝试将 ViewModel 用于局部视图。

为了呈现局部视图，我在模型中有两个属性在运行时根据选择的选项进行设置......所以我使用以下内容：

```
 Html.RenderPartial(Model.PartialViewName, Model.PartialViewModel) 
```

其中 Model.PartialViewModel 是单独程序集中的所有视图模型实现的接口。

渲染局部视图时出现以下错误：错误 CS1061“对象”不包含“{PropertyName}”的定义，并且找不到接受“对象”类型的第一个参数的扩展方法“{PropertyName}”。 ..”我尝试访问的部分视图模型上的任何属性都会发生此错误。

但是，在调试模式下，我可以看到已传递给局部视图的视图模型并且它是正确的，并且所有属性都在那里并已填充。我什至已经删除了插件，只引用了命名的类和类型（而不是接口），我仍然得到这个错误。

有任何想法吗？任何人都能够将部分视图及其视图模型放在单独的程序集中并让它工作吗？谢谢你。

# android - android 运行时错误无法实例化应用程序。类未发现异常

> ID：13498306
> 
> 赞同：-1
> 
> 时间：2012-11-21T17:02:02.233
> 
> 标签：android, classnotfoundexception

我有一个使用 ZXing 库的应用程序。Java 编译器设置为某个级别，我不记得是什么，抱歉。我尝试使用 switch 语句并且 eclipse 抱怨编译器级别不正确。我点击了快速修复，现在 Eclipse 给出了以下错误。

```
11-21 16:38:56.090: E/AndroidRuntime(20001): FATAL EXCEPTION: main
11-21 16:38:56.090: E/AndroidRuntime(20001): java.lang.RuntimeException: Unable to instantiate application com.carefreegroup.NfcScannerApplication: java.lang.ClassNotFoundException: com.carefreegroup.NfcScannerApplication
11-21 16:38:56.090: E/AndroidRuntime(20001):    at android.app.LoadedApk.makeApplication(LoadedApk.java:529)
11-21 16:38:56.090: E/AndroidRuntime(20001):    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4532)
11-21 16:38:56.090: E/AndroidRuntime(20001):    at android.app.ActivityThread.access$1300(ActivityThread.java:139)
11-21 16:38:56.090: E/AndroidRuntime(20001):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1321)
11-21 16:38:56.090: E/AndroidRuntime(20001):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-21 16:38:56.090: E/AndroidRuntime(20001):    at android.os.Looper.loop(Looper.java:156)
11-21 16:38:56.090: E/AndroidRuntime(20001):    at android.app.ActivityThread.main(ActivityThread.java:5045)
11-21 16:38:56.090: E/AndroidRuntime(20001):    at java.lang.reflect.Method.invokeNative(Native Method)
11-21 16:38:56.090: E/AndroidRuntime(20001):    at java.lang.reflect.Method.invoke(Method.java:511)
11-21 16:38:56.090: E/AndroidRuntime(20001):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-21 16:38:56.090: E/AndroidRuntime(20001):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-21 16:38:56.090: E/AndroidRuntime(20001):    at dalvik.system.NativeStart.main(Native Method)
11-21 16:38:56.090: E/AndroidRuntime(20001): Caused by: java.lang.ClassNotFoundException: com.carefreegroup.NfcScannerApplication
11-21 16:38:56.090: E/AndroidRuntime(20001):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
11-21 16:38:56.090: E/AndroidRuntime(20001):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
11-21 16:38:56.090: E/AndroidRuntime(20001):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
11-21 16:38:56.090: E/AndroidRuntime(20001):    at android.app.Instrumentation.newApplication(Instrumentation.java:948)
11-21 16:38:56.090: E/AndroidRuntime(20001):    at android.app.LoadedApk.makeApplication(LoadedApk.java:520)
11-21 16:38:56.090: E/AndroidRuntime(20001):    ... 11 more 
```

我的应用程序称为 nfcscannerappliction，我似乎得到了 ClassNotFoundException。任何想法如何让我的应用程序再次编译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:54:00.500

[解决了]

我必须进入构建路径并单击 java 编译器按钮，将编译器合规级别设置回 1.6。该项目必须重新构建并且现在运行良好。

谢谢

# c++ - 我是否过度设计了每个线程的信号阻塞？

> ID：13498309
> 
> 赞同：9
> 
> 时间：2012-11-21T17:01:12.207
> 
> 标签：c++, pthreads, boost-thread

在我的应用程序中，我通常希望拦截`SIGINT`和`SIGTERM`发出信号以便优雅地关闭。

为了防止工作线程“窃取”信号，我在每个入口点执行此操作：

```
// Block signals in this thread
sigset_t signal_set;
sigaddset(&signal_set, SIGINT);
sigaddset(&signal_set, SIGTERM);
sigaddset(&signal_set, SIGHUP);
sigaddset(&signal_set, SIGPIPE);
pthread_sigmask(SIG_BLOCK, &signal_set, NULL); 
```

如果我不这样做，当我执行`Ctrl`+时`C`，有时（未指定哪个线程将获得信号）我在基线程中的处理程序不会被调用 - 相反，信号只是从内部终止进程工作线程。这显然不酷。

所以我有一个信号处理线程并在其他任何地方阻塞信号。

但是，我没有注意到其他人这样做，很容易忘记这样做，而且它也不是完全可移植的。我还缺少一些更简单的技巧吗？

* * *

参考：

*   [POSIX 线程和信号](https://stackoverflow.com/questions/2575106/posix-threads-and-signals)
*   [http://www.linuxprogrammingblog.com/all-about-linux-signals?page=11](http://www.linuxprogrammingblog.com/all-about-linux-signals?page=11)
*   [http://www.unixguide.net/network/socketfaq/2.19.shtml](http://www.unixguide.net/network/socketfaq/2.19.shtml)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T22:28:36.093

我觉得这是一件非常合理的事情。

`main`您可以在生成任何其他线程之前阻止 中的信号。生成的线程将继承创建者线程信号掩码，您只能在信号处理线程中取消阻塞信号（仅当该线程也生成其他线程时要小心）。

或者你可以让信号在任何地方都被阻塞，`sigwait`并在信号处理线程中通过和朋友明确地处理它们。

# android - android：使用 Jlayer 将 mp3 转换为 wav

> ID：13498310
> 
> 赞同：0
> 
> 时间：2012-11-21T17:02:19.847
> 
> 标签：android, mp3, wav

我需要在android中将mp3转换为wav，我发现可以使用Jlayer。为此，我在下面编写了代码，它看起来工作了很长时间，大约 30 秒没有错误，但是 wav 文件还没有在任何地方创建。你能给我建议吗？

> 转换器转换器 = 新转换器（）；转换器.转换（源名称，目标名称）；

附言。souceName 路径是 /mnt/sdcard/mp3/xxx.mp3，destinationName 路径是 /mnt/sdcard/mp3/xxx.wav

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T04:16:41.117

您是否在 AndroidManifest 中添加权限？<使用权限android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T01:27:25.060

这可能是各种各样的事情。

您可能有权限问题：确保您有

`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>` `<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>`

在您的 Android 清单中。

或者它可能是您正在测试的设备。“/mnt/sdcard”不保证存在于 Android 文件系统中。它存在于大多数设备上，但您不应该依赖它。您应该使用的是 `Environment.getExternalStorageDirectory()` 它将正确的路径返回到外部存储。

或者你可能正在吃 JLayer 抛出的任何错误。如果输入路径不正确，或者文件实际上不是 MP3 文件，它会崩溃。

我猜这是权限错误。

编辑：您还应该删除 JLayer 标记，它指的是 Swing 窗口装饰器，而不是 JavaZoom 中的 MP3 库：/

# python - Python无法将项目复制到列表

> ID：13498312
> 
> 赞同：2
> 
> 时间：2012-11-21T17:02:21.240
> 
> 标签：python, list, append

我正在尝试将项目复制到列表中，但它总是只添加链接。

这是我尝试过的：

1：

```
list1 = []
list2 = [1]
list1.append(list2) 
```

2.

```
list1 = []
list2 = [1]
list1 += [list2] 
```

3.

```
list1 = []
list2 = [1]
list1 = list1 + [list2] 
```

之后我修改 list2 时， list1 也总是会改变。

Python 版本：sys.version_info(major=2, minor=7, micro=3, releaselevel='final', serial=0)

如何在不附加参考的情况下附加到列表。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T17:04:08.443

你想要`list1.extend(list2)`。有关更多信息，请参阅文档：http: [//docs.python.org/2/tutorial/datastructures.html](http://docs.python.org/2/tutorial/datastructures.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T17:04:11.747

答案取决于您期望的结果。

1.  如果您希望将整个列表附加为单个元素，则需要使用`list2[:]`来制作（浅）副本，例如：

    `list1 += [list2[:]]`

2.  另一方面，如果您希望将`list2`的*元素*附加到`list1`，那么您正在寻找

    `list1.extend(list2)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T17:15:15.133

这可能不是最好的方法，因为它会创建一个新列表，但它确实有效：

```
list1 = list1 + list2 
```

# c++ - 为什么这不起作用？libcurl & c++

> ID：13498313
> 
> 赞同：1
> 
> 时间：2012-11-21T17:01:39.570
> 
> 标签：c++, libcurl

我是 libcurl 的新手，我正在尝试使用 ftp 从服务器获取文件列表，通过这里的示例和其他一些帖子，我想出了以下代码。但是当我运行它时，它会返回错误消息：

> 写作主体失败 (4294967295 != 129)

在 CURLOPT_ERRORBUFFER 设置的错误字符串中。`curl_easy_strerror( res )`回报：

> 将接收到的数据写入磁盘/应用程序失败

```
struct FtpFile 
{
    const char *filename;
    FILE *stream;
};

static size_t fileWrite( void *buffer, size_t size, size_t nmemb, void *stream )
{
    struct FtpFile *out=(struct FtpFile *)stream;
    if(out && !out->stream) 
    {
        out->stream=fopen(out->filename, "wb");
        if(!out->stream)
        {
            cout << out->filename << " open failure [fileWrite] " << endl;
            return -1;
        }
    }

    size_t written = fwrite(buffer, size, nmemb, out->stream);    
    cout << written << endl;
    if(written <= 0)
        cout << "Nothing written : " << written;

    return written;
}

void getFileList( const char* url, const char* fname )
{
    CURL *curl;
    CURLcode res;
    FILE *ftpfile;
    const char *errmsg;

    ftpfile = fopen(fname, "wb"); 
    if ( ftpfile == NULL )
    {
        cout << fname << " open failure [getFileList] " << endl ;
        return;
    } 

    curl = curl_easy_init();
    if(curl) 
    {
        curl_easy_setopt(curl, CURLOPT_URL, url);
        curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, fileWrite);
        curl_easy_setopt(curl, CURLOPT_WRITEDATA, ftpfile);         
        curl_easy_setopt(curl, CURLOPT_ERRORBUFFER, errmsg);            
        curl_easy_setopt(curl, CURLOPT_USERNAME, "username");
        curl_easy_setopt(curl, CURLOPT_PASSWORD, "password");
        curl_easy_setopt(curl, CURLOPT_FTPLISTONLY,TRUE);
        res = curl_easy_perform(curl);
        if(res != CURLE_OK)
        {
            fprintf( stderr, "curl_easy_perform() failed: %s\nError Message: %s\n", curl_easy_strerror( res ), errmsg );
        }

        curl_easy_cleanup(curl);
    }

    fclose(ftpfile);
}

int main(int argc, char *argv[])
{
    getFileList( "ftp://ftp.example.com/public/somefolder/", "file-list.txt" );

    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:14:11.107

4294967295 是 -1 的 32 位无符号版本，这可能是您的回调返回的内容，因此 libcurl 认为这是一个错误并停止了一切。

-> 文件名在哪里分配？

您将 FILE * 传递给 CURLOPT_WRITEDATA ，但您的回调将其读取为 struct FtpFile *...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:07:58.403

首先，您的`fileWrite`函数应该返回写入的*字节数。*`fwrite`返回写入的*对象数。*所以你必须`return written * size;`

然后，正如 Daniel Stenberg 指出的那样，您将 a 传递`FILE *`给`fileWrite`但将其用作`struct FtpFile *`. 试试这个：

```
static size_t fileWrite( void *buffer, size_t size, size_t nmemb, void *stream )
{
  size_t written = fwrite(buffer, size, nmemb, (FILE*)stream);
  std::cout << written * size << std::endl;
  if(written <= 0)
    std::cout << "Nothing written : " << written;
  return written * size;
} 
```

# c++ - opencv namedWindow 泄漏（c++ 和 opencv）

> ID：13498314
> 
> 赞同：6
> 
> 时间：2012-11-21T17:01:42.143
> 
> 标签：c++, opencv

运行 valgrind，我在 opencv 中发现大量内存泄漏，尤其是使用 namedWindow 的功能。

总的来说，我有一个图像 CSImg 和 PGImg：

```
std::string cs = "Computer Science Students";
std::string pg = "Politics and Government Students";
CSImg.displayImage(cs);
cv::destroyWindow(cs);
PGImg.displayImage(pg);
cv::destroyWindow(pg); 
```

显示图像功能是：

```
void ImageHandler::displayImage(std::string& windowname){
namedWindow(windowname);
imshow(windowname, m_image);
waitKey(7000);

} 
```

当我做 displayImage 时，Valgrind 给我带来了巨大的内存泄漏。例如：

```
==6561== 2,359,544 bytes in 1 blocks are possibly lost in loss record 3,421 of 3,421
==6561==    at 0x4C2B3F8: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==6561==    by 0x4F6C94C: cv::fastMalloc(unsigned long) (in /usr/lib/libopencv_core.so.2.3.1)
==6561==    by 0x4F53650: cvCreateData (in /usr/lib/libopencv_core.so.2.3.1)
==6561==    by 0x4F540F0: cvCreateMat (in /usr/lib/libopencv_core.so.2.3.1)
==6561==    by 0x56435AF: cvImageWidgetSetImage(_CvImageWidget*, void const*) (in /usr/lib/libopencv_highgui.so.2.3.1)
==6561==    by 0x5644C14: cvShowImage (in /usr/lib/libopencv_highgui.so.2.3.1)
==6561==    by 0x5642AF7: cv::imshow(std::string const&, cv::_InputArray const&) (in /usr/lib/libopencv_highgui.so.2.3.1)
==6561==    by 0x40CED7: ImageHandler::displayImage(std::string&) (imagehandler.cpp:33)
==6561==    by 0x408CF5: main (randomU.cpp:601) 
```

imagehandler.cpp，第 33 行是：

```
imshow(windowname, m_image); //the full function is written above ^ 
```

randomU.cpp 第 601 行是：

```
CSImg.displayImage(cs); 
```

任何帮助表示赞赏。询问您需要的任何进一步信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T12:26:59.333

抱歉，严峻的现实看起来像 OpenCV 泄漏。根据 Leaks Instrument（XCode 工具），由于自引用，它也会从其 Qt 界面的一侧泄漏。

其他证明这不仅仅是误报：在我的 Mac 上，Opencv 2.4.3 在处理网络摄像头输入时在内存中不断增长（根据活动监视器）。（我没有使用任何指针或数据存储，所以理论上我的 OpenCV 程序应该保持恒定大小。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:58:05.133

其实你不需要再打电话`namedWindow`了。你只是叫一个“裸体” `cv::imshow(windowname,m_image)`。即使你覆盖它也能正常工作。

备注：
`waitKey`有两种用法：
1\. 永远等待，然后`waitKey(0);`
2\. 稍等片刻，可能是因为您正在显示来自网络摄像头的输入。然后执行`waitKey(30);`（或更少，取决于您正在播放的内容的 fps。对于电影，30。）

# java - [Java]Android Videoview 仅适用于本地文件

> ID：13498315
> 
> 赞同：3
> 
> 时间：2012-11-21T17:02:43.883
> 
> 标签：java, android, android-videoview

我尝试从 url 播放视频，但只有本地视频在我的代码中有效。如果我尝试从 url 打开视频，我的 nexus 7 显示无法播放此视频。这是播放本地文件的代码，它工作正常（都是相同的视频）

```
package com.sample.prog;

import java.io.File;

import android.app.Activity;
import android.os.Bundle;
import android.os.Environment;
import android.widget.VideoView;
import android.net.Uri;

public class MainActivity extends Activity {

    static private final String pathToFile = "bigbuck.mp4";
    private VideoView videoPlayer;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        File root = Environment.getExternalStorageDirectory(); 

        videoPlayer = (VideoView) findViewById(R.id.videoPlayer);   
        videoPlayer.setKeepScreenOn(true);    
        videoPlayer.setVideoPath(root + "/" + pathToFile);
        videoPlayer.start();
    }
} 
```

这是从 url 播放视频的代码，但它不起作用

```
package com.sample.prog;

import java.io.File;

import android.app.Activity;
import android.os.Bundle;
import android.os.Environment;
import android.widget.VideoView;
import android.net.Uri;

public class MainActivity extends Activity {

    static private final String pathToFile = "http://www.myanimesource.de/bigbuck.mp4";
    private VideoView videoPlayer;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        //File root = Environment.getExternalStorageDirectory(); 

        videoPlayer = (VideoView) findViewById(R.id.videoPlayer);   
        videoPlayer.setKeepScreenOn(true);    
        videoPlayer.setVideoPath(URI.parse(pathToFile));
        videoPlayer.start();
    }
} 
```

希望你能帮我解决我的问题，

问候基督徒

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T17:09:25.147

确保您拥有正确的互联网访问权限；将以下行放入您的 AndroidManifest.xml：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

# java - 找出来自 Java 的 dll 是 32 位还是 64 位

> ID：13498317
> 
> 赞同：2
> 
> 时间：2012-11-21T17:02:50.590
> 
> 标签：java, java-native-interface, 64-bit, 32-bit

在我的 Java 应用程序中，我希望在尝试加载之前确定用户定义的 dll 是 32 位还是 64 位。

我知道（以编程方式）运行我的应用程序的 JVM 是 32 位还是 64 位。我也知道（以编程方式）主机是 Windows 还是 Linux。

在调用“System.loadLibrary()”方法之前，如何以编程方式确定 dll 是 32 位还是 64 位？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:10:48.480

在 Windows 上，这需要像这样的管道

```
dumpbin /headers lib.dll | findstr /i "machine magic" 
```

这是使用`dumpbin`通常随 Visual Studio 安装的实用程序，`findstr`是一个系统实用程序，我不知道是否有可重新分发的`dumpbin`.

只需从 java 执行此命令并对结果应用一些基本的比较检查。

# java - 无法让while循环工作，输入两次？

> ID：13498318
> 
> 赞同：0
> 
> 时间：2012-11-21T17:02:52.563
> 
> 标签：java, loops, while-loop

```
import java.util.Scanner;
public class InputLoop
{
    public static void main(String[] args)
    {
        System.out.println("Enter an integer to continue or a non-integer to finish");
        Scanner scan = new Scanner(System.in);
        int input = scan.nextInt();
        while(scan.hasNextInt())
        {
            System.out.println("Enter an integer to continue or a non-integer to finish");
            scan.next();
        }

    }
} 
```

这是我编写的第一个while循环，当它运行时，我必须输入一个数字两次才能继续打印“输入一个整数以继续......”感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:07:32.417

根据文档 -[`Scanner#hasNextInt`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#hasNextInt%28%29)

> 如果此扫描器输入中的下一个标记可以使用 nextInt() 方法解释为默认基数中的 int 值，则返回 true。扫描仪不会超过任何输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T17:06:20.253

作为一个 do ...while 循环，这会好得多。本质上，它是相同的，只是您在完成后检查条件。

```
 do
    {
        System.out.println("Enter an integer to continue or a non-integer to finish");
        scan.next();
    } while(scan.hasNextInt()); 
```

虽然如果你做了一段时间，你可以添加一个虚拟变量来确保你至少经历一次。

```
Boolean firstTime=true;
while(firstTime==true || scan.hasNextInt())
    {
        firstTime=true;
        System.out.println("Enter an integer to continue or a non-integer to finish");
        scan.next();
    }; 
```

# mysql - MySQL UPDATE 与 JOIN、SELECT 和 GROUP BY？

> ID：13498319
> 
> 赞同：0
> 
> 时间：2012-11-21T17:03:00.130
> 
> 标签：mysql, asterisk

借口：

我目前正在尝试为我们的客户创建详细且正确的呼叫统计信息。以前，Asterisk 将呼叫详细信息存储在每个呼叫的一行中。一行不足以存储呼叫中可能发生的所有事情，并且数据通常会产生误导或错误。他们现在有一种新的表格格式，可以在调用中为每个事件存储一行。该表将很容易包含我们大客户的数百万条记录。

我们尝试在只有 20 万条记录的测试服务器上直接从该表中进行选择，但更高级的查询最终会花费很长时间。我们决定创建一个汇总表（因此我们每次调用都返回一行，但现在有更多详细信息可用）。我想用这些数据做很多事情，但如果我能解决这个“简单”的问题，我相信我也会解决所有其他问题。

问题：

一次调用中的所有行的linkedid 字段都是相同的。对于一个linkedid，字段 eventtype 可以有零次、一次或多次发生相同事件。

我用一些数据填充汇总表：

```
INSERT INTO astcel_summary
(linkedid, starttime, endtime, callfrom, callto, direction)
SELECT 
linkedid, MIN(eventtime), MAX(eventtime), cid_num, exten, IF ((context = 'from-extension'), 1, 0)
FROM astcel
GROUP BY linkedid; 
```

BRIDGE_START 事件特别重要，因为它表明有人接听了电话。呼叫可以无人接听、接听甚至多次接听（转接、会议）。我想用每个调用的**第一个（如果有的话）BRIDGE_START 事件中的****几个**字段来更新我的汇总表。

 **我已经能够像这样一次更新一个字段：

```
UPDATE astcel_summary, astcel
SET astcel_summary.answertime = 
(
SELECT eventtime
FROM astcel
WHERE astcel.linkedid = astcel_summary.linkedid
AND astcel.eventtype = 'BRIDGE_START'
GROUP BY astcel.linkedid
)
WHERE astcel.linkedid = astcel_summary.linkedid
AND astcel.eventtype = 'BRIDGE_START'; 
```

我尝试了许多具有不同连接和子查询的变体来更新多个字段，但无法使其工作。如果这个操作也能以某种方式与原始插入合并，那将是惊人的。

更好的选择是不使用汇总表且不花费太长时间的方式，例如：在上个月的工作时间内，呼叫者在被接听之前等待的平均时间（加上其他几个类似的数据），按数字分组叫。**

# sqlite - sqlite 查询 - 如何从按范围过滤的单行中获取多个结果？

> ID：13498320
> 
> 赞同：2
> 
> 时间：2012-11-21T17:02:07.837
> 
> 标签：sqlite, callback

我是编程新手，并且渴望使用 cocos2dx 和 sqlite 制作游戏。但是我遇到了这个问题，我找不到一个例子或如何做到这一点。

我要做的第一件事是从已按范围过滤的表中随机选择一行。例如，有一个有 100 行的表。如果我在 D 列的值 1 ~ 10 之间进行过滤，则会产生 20 行。我想从这 20 个中随机选择一个。

其次，对于随机选择的行，我想收集 5 个不同的值，但到目前为止，我无法找到关于如何收集它们的工作示例。

这是我尝试提出但不起作用的代码：

*   询问

> ```
> int MinColumnD = 1;
> int Max ColumnD = 10;
> int Dice =  ( rand() % 19 ) + 1;
> char sql_query[100];
> sprintf(sql_query, "SELECT A, B, C, D, E FROM SQList WHERE (ColumnD BETWEEN %d AND %d) ORDER BY RANDOM() LIMIT 1", MinColumnD, MaxColumnD);
> std::list<INFO> details;
> sqlite3_exec(DB, sql_query, CallBack, &details, &errorMessage); 
> ```

*感谢 CL 的评论，我更新了上述查询以包含 order by random() Limit 1。但是，当我运行它并进入该部分时，我在 xcode 上收到此错误：

> ```
>  Thread 1
>  0 sqlite3_exec
>  0x54cbd8: movl 60(%ebx), %eax   < Thread 1: EXC_BAD_ACCESS (code=1, address=0x444e418e) 
> ```

这似乎只发生在我将“ORDER BY RANDOM()”作为查询的一部分时

*   打回来

> ```
> int CallBack( void * pOutCount, int argc, char ** argv, char **azColName ){
> 
> std::list<Class::INFO> *pList = (std::list<Class::INFO >*)pOutCount;
> Class::INFO items;
> items._A = argv[0];
> items._B = atoi(argv[1]);
> items._C = atoi(argv[2]);
> items._D = atoi(argv[3]);
> items._E = atoi(argv[4]);
> pList->push_back( items );
> return 0;
> 
> } 
> ```

*   结构

> ```
> struct Class::INFO {
> 
> std::string _A;
> int _B;
> int _C;
> int _D;
> int _E;
> 
> }; 
> ```

*也许是因为 sqlite 查询不完整，所以我没有正确得到结果，但我不确定我如何能够从 std::list 中获取返回的值列表。认为在查询之后我可以调用列表中的组件来获取如下值是否正确：

> ```
> std::string A = details._A;
> int B = details._B;
> int C = details._C;
> int D = details._D;
> int E = details._E; 
> ```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:41:39.110

您不知道哪些`rowid`s 最终会出现在过滤结果中，因此您不能使用它们。

要从过滤结果中获取一些随机记录，首先对其进行[随机](http://www.sqlite.org/lang_corefunc.html#random)排序，然后[获取其中的第一](http://www.sqlite.org/lang_select.html#orderby)条记录：

```
SELECT A, B, C, D, E
FROM SQList
WHERE ColumnD BETWEEN ? AND ?
ORDER BY RANDOM()
LIMIT 1 
```

# r - R-用其组的平均值替换矩阵中的值？

> ID：13498322
> 
> 赞同：1
> 
> 时间：2012-11-21T16:25:52.423
> 
> 标签：r, plyr

我是 R 的新手，并且有一个足够简单的问题来回答；任何帮助将不胜感激。

情况是我有一个制表符分隔的数据矩阵（data matrix.txt），如下所示，最后一列包含组信息。

```
 sampleA    sampleB     sampleC   Group
    obs11        23.2      52.5       -86.3      1
    obs12       -86.3      32.5       -84.7      1
    obs41       -76.2      35.8       -16.3      2 
    obs74       23.2       32.5       -86.8      2
    obs82       -86.2      52.8       -83.2      3
    obs38       -36.2      59.5       -74.3      3 
```

我想用该组的平均值替换每个组的值

如何在 R 中计算组平均值而不是行或列平均值？

以及如何使用此值替换原始值？replace() 函数在这种情况下是否可用，还是仅用于替换两个已知值？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:47:25.647

包 ddply 应该可以解决问题。

```
dat <- as.data.frame(matrix(runif(80),ncol=4))
dat$group <- sample(letters[1:4],size=20,replace=T)
head(dat)

library(plyr)
ddply(.data = dat, .variables =.(group), colwise(mean)) 
```

结果

```
 group        V1        V2        V3        V4
1     a 0.4741673 0.7669612 0.5043857 0.5039938
2     b 0.3648794 0.5776748 0.4033758 0.5748613
3     c 0.1450466 0.5399372 0.2440170 0.5124578
4     d 0.4249183 0.3252093 0.5467726 0.4416924 
```

# c# - 访问被拒绝 HRESULT: 0x80070005 (E_ACCESSDENIED)) 在 SetInputToDefaultAudioDevice();

> ID：13498328
> 
> 赞同：0
> 
> 时间：2012-11-21T17:03:32.127
> 
> 标签：c#, .net, error-handling, speech-recognition

我试图编写一些语音识别应用程序，我发现了这段代码：

```
SpeechRecognitionEngine recognitionEngine = new SpeechRecognitionEngine();

recognitionEngine.SetInputToDefaultAudioDevice();    
recognitionEngine.LoadGrammar(new DictationGrammar());    

RecognitionResult result = recognitionEngine.Recognize(new TimeSpan(0, 0,20));    
foreach (RecognizedWordUnit word in result.Words)     
{     
     Console.Write(word.Text);     
} 
```

但是当我想调试它时，它在命令上显示错误访问被拒绝 HRESULT: 0x80070005 (E_ACCESSDENIED))：**recognitionEngine.SetInputToDefaultAudioDevice();**

（对 System.Speech 的引用已设置）。我已经浏览了很多线程，但我找不到答案。我应该在某个地方设置对麦克风的访问权限还是如何解决这个问题？

感谢你的回答 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-29T06:32:30.143

您需要在 Windows 上安装语音识别和文本到语音功能。如果您使用的是 Windows 10，请转到开始菜单并在那里写入设置。

打开设置页面。

开放时间和语言。

打开区域和语言选项卡。

如果英语不存在，请将其添加为语言。

点击英文。然后点击选项。

然后在语音选项卡下，单击下载。

然后windows将下载所需的包。

全部完成后，重新启动系统。

# javascript - 是否有支持 Javascript 对象自动生存的库？

> ID：13498330
> 
> 赞同：7
> 
> 时间：2012-11-21T17:02:40.300
> 
> 标签：javascript, object, autovivification

无论如何，无论是本机还是通过库，都可以在 Javascript 对象上使用 autovivification 吗？

IE，假设`foo`是一个没有属性的对象，能够做`foo.bar.baz = 5`而不是需要`foo.bar = {}; foo.bar.baz = 5`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T04:38:10.433

你不能完全用你想要的语法来做。但像往常一样，在 JS 中你可以编写自己的函数：

```
function set (obj,keys,val) {
    for (var i=0;i<keys.length;i++) {
        var k = keys[i];
        if (typeof obj[k] == 'undefined') {
            obj[k] = {};
        }
        obj = obj[k];
    }
    obj = val;
} 
```

所以现在你可以这样做：

```
// as per you example:
set(foo,['bar','baz'],5); 
```

不用担心是否`bar`或被`baz`定义。如果您不喜欢`[..]`函数调用中的 ，您可以随时迭代`arguments`对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T18:37:24.227

纯属原生，我不这么认为。`undefined`不可扩展或不可更改，这是我可以想象的唯一方法，无需通过函数传递它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-12T07:28:54.823

我有这样做的愿望，所以我写[了一个包来处理它](https://www.npmjs.com/package/autovivify)。

```
% npm install autovivify
% node
> Av = require('autovivify')
> foo = new Av()
{}
> foo.bar.baz = 5
5
> foo
{ bar: { baz: 5 } }
> 
```

它甚至会用数字下标做数组：

```
> foo = new Av()
> foo.bar.baz[0] = 'hum'
> foo
{ bar: { baz: [ 'hum' ] } } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-22T22:17:36.983

或者，您可以使用基于 eval 的解决方案。很丑，不推荐。

```
function av(xpr) {

    var res = "";
    var pos = 0;
    while (true) {

        var pos = xpr.indexOf("[",pos);
        if (pos == -1) break;
        var frag = xpr.substr(0,pos);
        pos++;

        res += "if (typeof(" + frag + ") != 'object') " + frag + " = {};\n";
    } // while

    return res + xpr;
} // av()

function main() {

    var a = {};
    a["keep"] = "yep";
    eval(av('a[1][1]["xx"] = "a11xx";   '));
    eval(av('a[1][2]["xx"] = "a12xx";   '));

    console.log(a);
} // main() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-15T04:49:05.003

@slebetman 的代码似乎不起作用。最后一个键不应该被分配一个空对象，而应该是`val`. 此代码有效：

```
function autoviv(obj,keys,val) {
  for (var i=0; i < keys.length; i++) {
    var k = keys[i];
    if (typeof obj[k] === 'undefined') {
      if(i === keys.length-1) {
        obj[k] = val;
        return;
      }
      obj[k] = {};
    }
    obj = obj[k];
  }
}

foo = {}
autoviv(foo,['bar','baz'],5);
console.log(foo.bar.baz);
5 
```

# c++ - OpenAL：定位 freealut 或修复此代码

> ID：13498332
> 
> 赞同：1
> 
> 时间：2012-11-21T17:03:47.987
> 
> 标签：c++, openal

我正在为游戏引擎编写一个新框架，但我遇到了一个问题，OpenAL。

我通常为此使用freealut，但我无法在任何地方找到它，唯一托管它的站点是离线的，而且我没有它的任何副本。我什至不得不剖析其他一些人的项目才能找到 openal32.lib。要么我的 google fu 变弱了，要么浩瀚的互联网真的没有它的任何副本。

我发现了一些示例代码，展示了如何在没有 freealut 框架的情况下使用 openAL，但我无法将它加载到多个文件中，所以我要么必须找出它为什么不工作，要么以某种方式找到 freealut，我在其中找到了一些资源github，但目前，从源代码构建 freealut 是不可能的。

我使用visual express c++ 2010作为ide。

# 我将找到的代码修改为：

基本上它的三个命令来加载、播放和删除声音文件。它适用于一个声音文件，但是当我尝试加载更多时，它停止工作。

```
#include "AudioLib.h"
#include <iostream>
#include <cstdlib>
#include <Windows.h>
#include <map>
#include <vector>

#include <AL\al.h>
#include <AL\alc.h>

using namespace std;
typedef map <const char *, ALuint > MapType;
MapType soundsbuffer;
MapType soundssource;

int endWithError(char* msg, int error=0)
{
//Display error message in console
cout << msg << "\n";
//system("PAUSE");
return error;
}

vector<const char *> soundslist;

ALCdevice *device;                                                      
ALCcontext *context;   

int loadSound(const char * input) {

FILE *fp;

unsigned char* buf;

    ALuint source;                                                          
ALuint buffer;  

fp = NULL;
fp = fopen(input,"rb");

char type[4];
DWORD size,chunkSize;
short formatType,channels;
DWORD sampleRate, avgBytesPerSec;
short bytesPerSample, bitsPerSample;
DWORD dataSize;

//Check that the WAVE file is OK
fread(type,sizeof(char),4,fp);                                              //Reads the first bytes in the file
if(type[0]!='R' || type[1]!='I' || type[2]!='F' || type[3]!='F')            //Should be "RIFF"
return endWithError ("No RIFF");                                            //Not RIFF

fread(&size, sizeof(DWORD),1,fp);                                           //Continue to read the file
fread(type, sizeof(char),4,fp);                                             //Continue to read the file
if (type[0]!='W' || type[1]!='A' || type[2]!='V' || type[3]!='E')           //This part should be "WAVE"
return endWithError("not WAVE");                                            //Not WAVE

fread(type,sizeof(char),4,fp);                                              //Continue to read the file
if (type[0]!='f' || type[1]!='m' || type[2]!='t' || type[3]!=' ')           //This part should be "fmt "
return endWithError("not fmt ");                                            //Not fmt 

//Now we know that the file is a acceptable WAVE file
//Info about the WAVE data is now read and stored
fread(&chunkSize,sizeof(DWORD),1,fp);
fread(&formatType,sizeof(short),1,fp);
fread(&channels,sizeof(short),1,fp);
fread(&sampleRate,sizeof(DWORD),1,fp);
fread(&avgBytesPerSec,sizeof(DWORD),1,fp);
fread(&bytesPerSample,sizeof(short),1,fp);
fread(&bitsPerSample,sizeof(short),1,fp);

fread(type,sizeof(char),4,fp);
if (type[0]!='d' || type[1]!='a' || type[2]!='t' || type[3]!='a')           //This part should be "data"
return endWithError("Missing DATA");                                        //not data

fread(&dataSize,sizeof(DWORD),1,fp);                                        //The size of the sound data is read

//Display the info about the WAVE file
cout << "Chunk Size: " << chunkSize << "\n";
cout << "Format Type: " << formatType << "\n";
cout << "Channels: " << channels << "\n";
cout << "Sample Rate: " << sampleRate << "\n";
cout << "Average Bytes Per Second: " << avgBytesPerSec << "\n";
cout << "Bytes Per Sample: " << bytesPerSample << "\n";
cout << "Bits Per Sample: " << bitsPerSample << "\n";
cout << "Data Size: " << dataSize << "\n";

buf= new unsigned char[dataSize];                            //Allocate memory for the sound data
cout << fread(buf,sizeof(BYTE),dataSize,fp) << " bytes loaded\n";           //Read the sound data and display the 
                                                                            //number of bytes loaded.
                                                                            //Should be the same as the Data Size if OK

//Now OpenAL needs to be initialized 
                                                 //And an OpenAL Context
device = alcOpenDevice(NULL);                                               //Open the device
if(!device) return endWithError("no sound device");                         //Error during device oening
context = alcCreateContext(device, NULL);                                   //Give the device a context
alcMakeContextCurrent(context);                                             //Make the context the current
if(!context) return endWithError("no sound context");                       //Error during context handeling

                                                     //Stores the sound data
ALuint frequency=sampleRate;;                                              //The Sample Rate of the WAVE file
ALenum format=0;                                                            //The audio format (bits per sample, number of channels)

alGenBuffers(1, &buffer);                                                    //Generate one OpenAL Buffer and link to "buffer"
alGenSources(1, &source);                                                   //Generate one OpenAL Source and link to "source"
if(alGetError() != AL_NO_ERROR) return endWithError("Error GenSource");     //Error during buffer/source generation

//Figure out the format of the WAVE file
if(bitsPerSample == 8)
{
    if(channels == 1)
        format = AL_FORMAT_MONO8;
    else if(channels == 2)
        format = AL_FORMAT_STEREO8;
}
else if(bitsPerSample == 16)
{
    if(channels == 1)
        format = AL_FORMAT_MONO16;
    else if(channels == 2)
        format = AL_FORMAT_STEREO16;
}
if(!format) return endWithError("Wrong BitPerSample");                      //Not valid format

alBufferData(buffer, format, buf, dataSize, frequency);                    //Store the sound data in the OpenAL Buffer
soundsbuffer[input] = buffer;
soundssource[input] = source;
soundslist.push_back(input);

if(alGetError() != AL_NO_ERROR) {
return endWithError("Error loading ALBuffer");                              //Error during buffer loading
}
              fclose(fp); 
       delete[] buf;    

}

int playSound(const char * input) {
    //Sound setting variables
ALfloat SourcePos[] = { 0.0, 0.0, 0.0 };                                    //Position of the source sound
ALfloat SourceVel[] = { 0.0, 0.0, 0.0 };                                    //Velocity of the source sound
ALfloat ListenerPos[] = { 0.0, 0.0, 0.0 };                                  //Position of the listener
ALfloat ListenerVel[] = { 0.0, 0.0, 0.0 };                                  //Velocity of the listener
ALfloat ListenerOri[] = { 0.0, 0.0, -1.0,  0.0, 1.0, 0.0 };                 //Orientation of the listener
                                                                            //First direction vector, then vector pointing up) 
//Listener                                                                               
alListenerfv(AL_POSITION,    ListenerPos);                                  //Set position of the listener
alListenerfv(AL_VELOCITY,    ListenerVel);                                  //Set velocity of the listener
alListenerfv(AL_ORIENTATION, ListenerOri);                                  //Set orientation of the listener

ALuint source = soundssource[input];
ALuint buffer = soundsbuffer[input];

//Source
alSourcei (source, AL_BUFFER,   buffer);                                 //Link the buffer to the source
alSourcef (source, AL_PITCH,    1.0f     );                                 //Set the pitch of the source
alSourcef (source, AL_GAIN,     1.0f     );                                 //Set the gain of the source
alSourcefv(source, AL_POSITION, SourcePos);                                 //Set the position of the source
alSourcefv(source, AL_VELOCITY, SourceVel);                                 //Set the velocity of the source
alSourcei (source, AL_LOOPING,  AL_FALSE );                                 //Set if source is looping sound

//PLAY 
alSourcePlay(source);                                                       //Play the sound buffer linked to the source
if(alGetError() != AL_NO_ERROR) return endWithError("Error playing sound"); //Error when playing sound
//system("PAUSE");                                                            //Pause to let the sound play

}

void deleteSound() {
    //Clean-up
                                                            //Close the WAVE file
                                                              //Delete the sound data buffer

for(int i = 0; i < soundslist.size(); i++) {
    const char * out = soundslist[i];

alDeleteSources(1, &soundssource[out]);                                                //Delete the OpenAL Source
alDeleteBuffers(1, &soundsbuffer[out]);   
}        
//Delete the OpenAL Buffer
soundslist.clear();

alcMakeContextCurrent(NULL);                                                //Make no context current
alcDestroyContext(context);                                                 //Destroy the OpenAL Context
alcCloseDevice(device);      

} 
```

所以我要求的是：我需要 freealut 文件，或者需要一些代码帮助。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:53:02.913

好的，开放站点似乎已部分恢复在线。

对于需要该链接的任何人：[http ://connect.creativelabs.com/openal/Downloads/Forms/AllItems.aspx?RootFolder=http%3a%2f%2fconnect%2ecreativelabs%2ecom%2fopenal%2fDownloads%2fALUT&FolderCTID=0x01200073059C4C04B4D14B80686126F6C1A2E](http://connect.creativelabs.com/openal/Downloads/Forms/AllItems.aspx?RootFolder=http%3a%2f%2fconnect%2ecreativelabs%2ecom%2fopenal%2fDownloads%2fALUT&FolderCTID=0x01200073059C4C04B4D14B80686126F6C1A2E8)

# c++ - 我在哪里可以看到来自 Visual Studio 2012 中未处理的 std::exception 的 what() 消息？

> ID：13498348
> 
> 赞同：18
> 
> 时间：2012-11-21T17:04:55.300
> 
> 标签：c++, debugging, exception, visual-studio-2012

有没有办法从未处理的异常中查看解释性字符串？我正在使用 Visual Studio 2012 Express，但似乎找不到查看它的方法。

当我运行以下代码时：

```
#include <stdexcept>

int main(int argc, char* argv[])
{
    throw std::runtime_error("warp core breach");
    return 0;
} 
```

我在输出窗口中得到的只是：

```
First-chance exception at 0x7652C41F in vstest.exe: Microsoft C++ exception: std::runtime_error at memory location 0x0015F6A4.
Unhandled exception at at 0x7652C41F in vstest.exe: Microsoft C++ exception: std::runtime_error at memory location 0x0015F6A4. 
```

我本来希望在那里打印“经线核心破坏”消息。我将 Debugging->Output Window->General Output Settings 下的所有选项都设置为 On。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-21T17:43:45.777

当抛出异常时，您将获得一个窗口，其中包含中断/继续/忽略选项。复制并粘贴此对话框报告的十六进制地址，然后单击`break`按钮。现在在监视窗口中，输入如下内容：`(std::runtime_error*)(0x002cfbc8)`到第一列的单元格中。

![观察窗口](../Images/fb3247e801053c989bf0c7c77dea0a4b.png)

# java - json转换

> ID：13498349
> 
> 赞同：1
> 
> 时间：2012-11-21T17:03:58.957
> 
> 标签：java, android, json

我想创建一个这样的 Json

```
 [{"sID":"221","mID":"0"},
     {"sID":"222","mID":"11"},
     {"sID":"223","mID":"11"}] 
```

我试过下面的代码，但只为一行创建 Json

```
 JSONObject json = new JSONObject();
    JSONObject manJson = new JSONObject();
    manJson.put("sID", "23");
    manJson.put("mID", "111");
    json.put("",manJson); 
```

上面的代码像这样创建Json

```
 {"":{"sID":"23","mID":"111"}} 
```

请让我知道该 Java 代码中所需的更改，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:10:24.877

将您的代码更改为：

```
JSONArray jsonArray = new JSONArray();

//Add 1st JSONObject to JSONArray
JSONObject jsonObjone = new JSONObject();    
jsonObjone.put("sID", "221");
jsonObjone.put("mID","0");
jsonArray.put(jsonObjone.toString();

//Add 2nd JSONObject to JSONArray
JSONObject jsonObjtwo = new JSONObject();    
jsonObjtwo.put("sID", "222");
jsonObjtwo.put("mID","11");
jsonArray.put(jsonObjtwo.toString());

//Add 3rd JSONObject to JSONArray
JSONObject jsonObjthrd = new JSONObject();    
jsonObjthrd.put("sID", "223");
jsonObjthrd.put("mID","11");
jsonArray.put(jsonObjthrd.toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:09:19.727

在 上使用`toJSONArray()`方法`manjson`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T17:32:14.410

我推荐[杰克逊库](http://jackson.codehaus.org/)，它使事情变得非常容易。要使用它，您将拥有这样的对象...

```
class Ids {

     private int Sid;
     private int Mid;

     public setSid(int Sid) {
         this.Sid = Sid;
     }

     public setMid(int Mid) {
         this.Mid = Mid;
     }

     public getSid() {
         return Sid;
     }

     public getMid() {
         return Mid;
     }
} 
```

然后，您可以使用库中的 objectMapper 从内存中的数组转到 json 字符串，如下所示

```
 Ids[] idsArray = new Ids[2];
      //add ids object to array
      String jsonString = objectMapper.writeValueAsString(idsArray); 
```

当然，这样做取决于你的 id 的存储方式，但对我来说，它通常会使我的代码更干净，而且杰克逊库的性能非常好。

# twitter-bootstrap - 如果我将所有引导样式仅应用于特定的 div，则模式不起作用

> ID：13498353
> 
> 赞同：1
> 
> 时间：2012-11-21T17:05:02.823
> 
> 标签：twitter-bootstrap, less

因此，我尝试在自定义 SharePoint 应用程序页面上使用引导样式（BTW 很棒）。为此，我修改了 bootstrap.less 文件，在所有选择器前面加上我选择的 id。基本上，我遵循了这篇文章的建议：[在 less 中为 twitter bootstrap 的所有选择器添加前缀](https://stackoverflow.com/questions/11149266/prefixing-all-selectors-for-twitter-bootstrap-in-less?answertab=active#tab-top)。

这很好用......引导样式仅应用于具有我选择的 ID 的容器 div。但是，当我这样做时，我注意到模态停止工作。我通过切换回原始 bootstrap.css 文件对此进行了测试。模态再次正常工作。我不能使用默认的 bootstrap.css 文件，因为它弄乱了页面其余部分的一些 SharePoint 样式。在所有引导样式元素上使用自定义前缀选择器时，我需要做什么才能使模式正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:23:25.700

弄清楚了。在 bootstrap-modal.js 文件中，背景属性的回调默认附加到文档正文。由于我添加了一个自定义前缀来应用所有引导样式，因此我必须将其更改为附加到具有该类的父 div。修复如下图。

原始 bootstrap-modal.js：

```
 this.$backdrop = $('<div class="modal-backdrop ' + animate + '" />')
    .appendTo(document.body) 
```

我的修复（我的自定义选择器是'.bootstrap'）：

```
 this.$backdrop = $('<div class="modal-backdrop ' + animate + '" />')
    .appendTo($('.bootstrap')[0]) 
```

# sip - 在 SIP 注册消息中，From 标头是否应该包含可解析的 host.domain？

> ID：13498356
> 
> 赞同：1
> 
> 时间：2012-11-21T17:05:03.057
> 
> 标签：sip, voip, kamailio

我有这个问题：在 kamailio 中，我为多个域提供服务，这些域实际上并不是真正的 Internet 域。一个特定的 pbx，在注册时，有一个配置，要求注册用户的主机和域，并将其与用户名一起放在 From 标头中：

`From: <sip:username@host.domain>`

但问题是它首先尝试解析 hostname.domain，如果无法解析，它甚至不会尝试注册。这种行为是否符合 SIP 标准？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T02:01:05.140

不，如果它正在查找 From 标头主机名，则它不符合要求。来自[RFC](http://www.ietf.org/rfc/rfc3261.txt)（第 8.1.1.3 节）：

> ...非常重要的是，发件人 URI 不包含 IP 地址或运行 UA 的主机的 FQDN，因为这些不是逻辑名称。

此外，SIP RFC 提供了一个有效 From 标头的示例，即 sip:thisis@anonymous.invalid，其中主机名甚至不是有效的 DNS 主机名。

在大多数情况下，From 标头 URI 用于将发出请求的人标识为 SIP 质询响应身份验证的一部分。在某些情况下，SIP 服务器将忽略 From URI 的主机名部分，假设身份验证领域是某个默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:40:36.460

这将取决于 SIP 服务器的实现。

在 /etc/hosts 中添加“host.domain”

# vim - 指定要折叠的函数

> ID：13498364
> 
> 赞同：1
> 
> 时间：2012-11-21T17:05:46.703
> 
> 标签：vim, folding

是否可以指定 vim 自动折叠哪些函数。

在 Netbeans 中，有类似的东西

```
// <editor-fold defaultstate="collapsed" desc="user-description">
  ...any code...
// </editor-fold> 
```

你知道我可以在 vim 中使用类似的东西吗？当我关闭 vim 时，如果我再次打开文件，我希望再次折叠折叠的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:11:46.630

这实际上与您所要求的有点不同，因为它不处理*语义折叠*，而 NetBeans 和其他 IDE 会这样做。但是，存储一组折叠通常是使用`:mkview`命令完成的，您可以自动执行此命令和`:loadview`命令以使其对您透明。详细信息在[这个 Vim wiki 页面](http://vim.wikia.com/wiki/Make_views_automatic)中。我在我的 vimrc 中使用了一个更简单的版本，而不是插件，但两者都应该可以满足你的需要。

# android - 在一个查询中比较两个表

> ID：13498373
> 
> 赞同：2
> 
> 时间：2012-11-21T17:06:11.893
> 
> 标签：android, sql

我正在制作一个小游戏，它可以获得最佳关卡和你完成的关卡数量，超过一半的问题是正确的。我有一个检查这个的查询，但我不知道如何整合问题表的问题。如果用户没有尝试回答问题，则不会在答案表中写入任何行。所以它现在实际上与每个级别的答案表中的行数进行比较。关于如何整合它的任何想法？(count(*)/2) 实际上

```
Cursor c = myDataBase
                .rawQuery(
                        "select level, (select count(*) from ( select level from answers group by level having sum (answercorrect) >= (count(*)/2) ) answers ) completedlevels, "
                                + "from answers "
                                + "group by level "
                                + "order by sum (score) desc ", null); 
```

我试过了，但没有用：

```
Cursor c = myDataBase
                .rawQuery(
                        "select level, (select count(*) from ( select level from questions group by level having sum (answercorrect) >= ((select count(*)/2 from questions group by level) ) answers ) completedlevels, "
                                + "from answers "
                                + "group by level "
                                + "order by sum (score) desc ", null); 
```

***编辑*** 表结构是：

```
questions table
id    level   question
1      1      question1level1
2      1      question2level1
...  
30     1      question30level1
31     2      question1level2
32     2      question2level2
...  
70     2      question40level2
71
... 
```

//注意：每个级别可以有不同数量的问题

答案表

```
id   question_id   player   answercorrect   score   attempts  
1     5             1        1              1000     1
2     10            1        1              900      1
3     7             2        0              700      3
4     10            2        0              500      3
5     13            2        1              100      1
6     8             1        1              800      2 
```

...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:38:33.037

您需要的是所谓的 SQL Join。可以在[此处](http://en.wikipedia.org/wiki/Join_%28SQL%29)找到简单的 SQL 连接示例。

假设您的表中有以下数据，

```
Employee Table:
LastName    DepartmentID
Rafferty      31
Jones         33
Steinberg     33
Robinson      34
Smith         34
John          NULL 
```

.

```
Department table:
DepartmentID    DepartmentName
31              Sales
33              Engineering
34              Clerical
35              Marketing 
```

如果您使用以下查询...

```
SELECT
FROM employee, department
WHERE employee.DepartmentID = department.DepartmentID; 
```

子句中的语句`WHERE`称为连接条件，这是一个`Equi-Join`. 它会给你这个，你会得到，

```
LastName   DepartmentID    DepartmentName
Rafferty      31           Sales
Jones         33           Engineering
Steinberg     33           Engineering
Robinson      34           Clerical
Smith         34           Clerical 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T17:16:20.887

SQL 连接用于根据这些表中某些列之间的关系从两个或多个表中查询数据。你可以参考这个 url ，[sql_join](http://www.w3schools.com/sql/sql_join.asp)了解更多细节

例如

```
select level from question q
inner join answer a on (a.questionID = q.questionID) 
```

它将问题表中的级别列数据插入到具有相同问题 ID 的答案表中。

您可以与 JOIN 关键字建立关系。

你也可以参考这个[a-visual-explanation-of-sql-joins](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

**我认为你的表结构是错误的，它不是关系的。我建议你使用下面的结构。**

![在此处输入图像描述](../Images/0eda147290e8eaf31f34a7bc2b00c369.png)

**通过以下查询，您可以找到有多少用户正确地回答了问题，之后您可以自定义您想要的查询。**

```
SELECT     *
FROM       tbl_question 
INNER JOIN tbl_userAnswers ON tbl_question.id = tbl_userAnswers.userChoiceID
INNER JOIN tbl_correctAnswers ON tbl_question.id = tbl_correctAnswers.QuestionId and tbl_userAnswers.userChoiceID = tbl_correctAnswers.correctChoiceId 
```

![在此处输入图像描述](../Images/df2ef5c48f315eb98107613c614b19b9.png)

# c# - 是否可以遍历枚举中的每个选择？

> ID：13498375
> 
> 赞同：4
> 
> 时间：2012-11-21T17:06:24.813
> 
> 标签：c#, .net, unit-testing, enums

> **可能重复：**
> [如何枚举枚举？](https://stackoverflow.com/questions/105372/how-to-enumerate-an-enum)

所以我有一些这样的代码：

```
enum Decision
{
  DecisionA,
  DecisionB,
  ...
}

public void DoStuff(Decision d)
{
  switch(d)
  {
    case Decision.DecisionA:
    ....
    ...
  }
} 
```

基本上`DoStuff`，无论做出什么决定，都会做同样的事情，但该决定用于使其所做的事情更优化（更快或其他）。

现在，我想为 DoStuff 实施单元测试。通过有一个类似的数组来测试所有决策是否正常工作是相当容易的，`new Decision[]{DecisionA, DecisionB, ...};`但是，如果我添加一个决策，我必须返回并手动将其添加到单元测试中。

是否可以只访问由 a 指定的所有可能选项`enum`？例如，像这样：

```
foreach(var d in Decision.Options)
{
  //d will be DecisionA, and then DecisionB, etc etc
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-21T17:07:46.570

您可以使用[`Enum.GetValues`](http://msdn.microsoft.com/en-us/library/system.enum.getvalues.aspx)，但我个人不是它的忠实拥护者。您需要进行强制转换（例如，通过指定迭代变量类型），并通过以下方式提供类型`typeof`：

```
foreach (Decision decision in Enum.GetValues(typeof(Decision)))
{
} 
```

我更喜欢我在[Unconstrained Melody](http://code.google.com/p/unconstrained-melody/)中提供的选项——一个提供枚举和委托扩展方法的小库：

```
foreach (var decision in Enums.GetValues<Decision>())
{
} 
```

这是：

*   返回类型中的类型安全（它返回一个`IList<T>`）
*   类型参数中的类型安全（类型必须是枚举）
*   更高效，因为它为所有调用重用相同的只读列表

当然，这确实意味着要使用一个额外的库……仅仅一次调用可能对您来说不值得，但是如果您使用枚举做很多事情，您可能会发现其他功能很有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T17:07:49.697

您可以使用[System.Enum.GetValues](http://msdn.microsoft.com/en-us/library/system.enum.getvalues.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T17:18:01.620

乔恩的回答给了你枚举，这里有一些更随机的东西......

对于测试，它可能是更好的方法 - 确保值列表 ( `Enum.GetValues`) 与测试中的硬编码列表匹配。当您添加新值时使测试失败，然后更新测试以对新值做一些有意义的事情（如果针对不同情况的测试实际上需要不同，则很有用）。

另一种看待它`switch`的方式 - 链`if`并不是控制代码流的最佳构造。您可以使用多态性或简单字典对其进行重构，使其更具可测试性/可扩展性（几个问题，例如 [如何重构这个巨大的 switch 语句？](https://stackoverflow.com/questions/12926518/how-to-refactor-this-huge-switch-statement)）。

# ios - 如何使用情节提要在界面构建器中连接自定义 UIView？

> ID：13498378
> 
> 赞同：1
> 
> 时间：2012-11-21T17:06:27.777
> 
> 标签：ios, xcode, interface-builder, storyboard, custom-view

我想在我的 iOS 应用程序中使用`F3BarGauge`( [http://www.cocoacontrols.com/controls/f3bargauge](http://www.cocoacontrols.com/controls/f3bargauge) )，并且我想在我的 UI 设计中使用 .storyboard。

我设法通过将代码写入视图控制器的`loadView:`方法以编程方式实现了这一点，该方法创建了 的实例`F3BarGauge`并通过`[self.view addSubview:myBarGauge];`.

但是，现在我`F3BarGauge`在 Interface Builder 的预览中根本看不到 ，因此我也无法`F3BarGauge`从那里调整大小或位置。我只能在代码中做到这一点。此外，我认为如果我通过 .storyboard 自动创建部分 UI 元素并在我自己的代码中创建部分 UI 元素，我的同事会感到困惑。

我想找到解决这两个缺点的方法。`F3BarGauge`在 Interface Builder中查看实际自定义 UI 元素的内容（在本例中为 ）对我来说并不重要。如果 ' 区域的框架`F3BarGauge`显示在 Interface Builder 中并且我可以移动和调整它的大小，那么我对解决方案感到满意。

我没有这种方法的示例，因为作者的示例`F3BarGauge`使用 .xib 文件而不是 .storyboard。

我对 iOS 编程和 Xcode / Interface Builder 比较陌生。也许有比我想象的解决方案更好的方法来实现我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:14:15.707

我认为没有办法在 IB 中查看 F3BarGauge，但您可以添加 UIView 作为 IB 中主视图的子视图，根据需要调整大小和位置，然后在代码中将 F3BarGauge 添加到子视图。

编辑后：其实看了作者的demo工程后，在IB中就可以看到。只需将他的视图从演示项目复制并粘贴到视图控制器中（先删除默认视图后）。

# google-provisioning-api - GADS EntityExists 错误

> ID：13498379
> 
> 赞同：0
> 
> 时间：2012-11-21T17:05:31.400
> 
> 标签：google-provisioning-api

我们同时使用 Java API 和 GADS。在过去的几周里，几乎每次运行时，GADS 都有一个不同的“EntityExists(1300) - EntityExists(1300):”错误列表（这是正确的）。

关于发生了什么变化，我们需要改变什么，或者修复什么时候到来的任何消息？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:14:44.860

我建议管理员做的一件事是刷新 GADS 缓存，看看他是否仍然收到 1300 错误。您可以通过简单地删除缓存文件夹（同步状态）来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:19:40.013

您应该查看您的 GADS 配置并尝试确定 GADS 为何要创建 Google 中已经存在的用户。大多数情况下，这是因为用户在 Google 配置下被排除在外，因此 GADS 无法看到它们并想要创建它们。

周杰伦

# javascript - 如何使用带有 Chrome 语音输入的 jQuery UI 自动完成

> ID：13498382
> 
> 赞同：4
> 
> 时间：2012-11-21T17:06:35.363
> 
> 标签：javascript, jquery, google-chrome, webkit, jquery-ui-autocomplete

我最近刚刚开始使用 Chrome 中的一个漂亮功能，它允许您将任何输入字段转换为用户可以口述的语音输入。[更多信息在这里](http://www.sitepoint.com/html5-speech-input-fields/)。

在 Chrome 中添加此功能本身非常简单：

```
<input type="text" x-webkit-speech="x-webkit-speech" /> <!-- you're all set --> 
```

我想在我的网站的主搜索框中实现此功能，它大量利用 jQuery UI 的自动完成小部件......但是在将口述文本插入输入字段后，我无法启动自动完成小部件。

我已经尝试过以下变体：

```
<input id="search-input-box" type="search" x-webkit-speech="x-webkit-speech" onwebkitspeechchange="$('.search-input-box').trigger('autocompleteopen')"> 
```

如何在语音输入更改事件发生后触发自动完成“打开”事件？

**更新：**已解决 -[此处的解决方案 jsFiddle](http://jsfiddle.net/adamb/Tdym3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T17:26:34.133

只需将其绑定到`webkitspeechchange`事件，例如：

```
$('#tags').on('webkitspeechchange', function() {
    $('#tags').trigger('autocompleteopen');
}); 
```

[jsFiddle](http://jsfiddle.net/Tdym3/1/)

# java - GWT 不支持类 java.beans.PropertyChangeListener

> ID：13498384
> 
> 赞同：0
> 
> 时间：2012-11-21T17:05:53.133
> 
> 标签：java, gwt, javabeans

我正在将 GWT 应用程序从 GWT-Ext 移植到 SmartGWT。以前，它使用`java.beans.PropertyChangeEvent`和`java.beans.PropertyChangeListener`。我们最近升级到了 GWT2.4。我错过了图书馆吗？在 Netbeans 中，它带有黄色下划线，并且提示说

> GWT 不支持类 java.beans.PropertyChangeListener

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:14:06.213

GWTx svn 表示它最后一次更改是在 2009 年。

您最好的办法是通过从[http://gwtx.googlecode.com/svn/trunk/](http://gwtx.googlecode.com/svn/trunk/)签出源代码来尝试使用 GWT 2.4 或 2.5 重新编译 GWTx 源代码 （这将有助于验证该 jar 是否兼容最新的 GWT建筑学）。

# jenkins - Jenkins 是如何知道测试历史的

> ID：13498386
> 
> 赞同：0
> 
> 时间：2012-11-21T17:06:53.803
> 
> 标签：jenkins

当测试失败时，Jenkins 会写出类似“过去 4 次构建失败（自 #12 起）”之类的内容。詹金斯如何知道测试历史 - 是通过将类/测试名称与以前的结果匹配的字符串吗？如果类名更改是否意味着其测试的所有历史上下文也丢失了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T18:46:57.387

是的，詹金斯似乎对测试名称进行了基于字符串的匹配，所以如果一个测试由于某种原因没有在某个版本中运行，或者被重命名，这个测试的所有历史记录也会丢失（至少对于我提到的用例）

# maple - 需要一个 Maple 程序，

> ID：13498387
> 
> 赞同：0
> 
> 时间：2012-11-21T17:06:55.090
> 
> 标签：maple

我是 Maple 的新手，听说这个数学软件在符号计算方面很强大。S 假设我们有一组元素，例如

A:={a, aab, b, aba, abbb, abab...}

使得#A=20，此外，我们知道其中一些元素满足一个方程，例如对于一些正整数k，a^k=(ab)^2。我写了一些循环，包括 for 和 if 并假设 A 是一组数字，但我已经筋疲力尽了。我明白了，我无法将这些功能正确排列和链接在一起。请问有人提示我，maple 如何帮助我找到 k 的值，例如在满足上述关系的有限范围 [1..10] 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:36:47.617

我这个你可以做这样的事情：

```
restart:
A:={a,b,1000*a+111*b,101*b+1010*a,110*a+b};
        A := {a, b, 110 a + b, 1000 a + 111 b, 101 b + 1010 a}

 for i from 1 to 9 do
    for j from 1 to 9 do
       As:=subs(a=i,b=j,A);
       for e in As do
           for ee in As do
              if((ee<>e) and (e<=ee^2)) then
                 for k from 1 to 10 while (e^k<ee^2) do
                 od;
                 if(e^k=ee^2) then 
                    print(e,"^",k,"=",ee,"^2");
                 fi;
              fi;
           od;
       od;
    od;
 od; 
```

只需填写您的集合的元素并让它计算。如果你先对你的集合进行排序（所以你有 A=[1,6,16,61]）并计算所有平方数，你可能会稍微快一点。然后遍历条目，但只查看更大的条目（但这可能不是您要查找的内容）

# ruby-on-rails - 将块传递给部分

> ID：13498391
> 
> 赞同：0
> 
> 时间：2012-11-21T17:07:01.623
> 
> 标签：ruby-on-rails, partial-views

我想根据条件将部分渲染到视图中。起初我有这个渲染得很好的观点

```
<%= simple_form_for [@customer, @reading], :html => { :class => 'form-horizontal' } do |f|             %>
<%= f.input :customer_id, :editable => false, :value => @customer.id %>
<%= f.input :date_of_reading, :as => :date %>
<%= render 'readings/single_phase', f: f %>
<% end %> 
```

我现在想根据条件将部分渲染到视图中。所以我在 application.rb 中创建了一个辅助方法来进行条件检查

```
module ApplicationHelper
 def render_readings_conditionally
  if @customer.phase_type == 'Single Phase'
  render :partial => 'readings/single_phase'
else
  render :partial => 'readings/three_phase'
end 
end
end 
```

在我看来，我修复了那里的方法

```
<%= simple_form_for [@customer, @reading], :html => { :class => 'form-horizontal' } do    |f| %>
<%= f.input :customer_id, :editable => false, :value => @customer.id %>
<%= f.input :date_of_reading, :as => :date %>
<%= render_readings_conditionally %>
 <% end %> 
```

但是，这不起作用，因为我没有将之前的 block 参数传递给我的部分。

我怎样才能将它传递给我的部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:09:55.523

只需这样重写：

```
def render_readings_conditionally(form)
  if @customer.phase_type == 'Single Phase'
    render 'readings/single_phase', f: form
  else
    render 'readings/three_phase', f: form
  end 
end 
```

在您看来：

```
<%= render_readings_conditionally(f) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:14:58.407

看看局部局部变量 :: [http://guides.rubyonrails.org/layouts_and_rendering.html#passing-local-variables](http://guides.rubyonrails.org/layouts_and_rendering.html#passing-local-variables)

您可以使用局部变量传递任意数量的变量。

上面的答案是传递视图局部变量，尽管它们被定义为简写形式（未明确）。

您可以像这样重新编写代码，这样可以更清楚地将哪些变量传递给您的视图部分。然后，您可以在部分 :: 中访问“form_obj”对象

```
 module ApplicationHelper
    def render_readings_conditionally
      if @customer.phase_type == 'Single Phase'
        render :partial => 'readings/single_phase', :locals => { :form_obj => form }
      else
        render :partial => 'readings/three_phase', :locals => { :form_obj => form }
      end

  end 
```

# php - 从 ID 数组中获取子项？

> ID：13498392
> 
> 赞同：0
> 
> 时间：2012-11-21T17:07:01.687
> 
> 标签：php, wordpress, taxonomy

我正在使用此代码发布我的分类的所有子术语列表，称为“位置”

```
<?php
$termID = 10;
$taxonomyName = "location";
$termchildren = get_term_children( $termID, $taxonomyName );

echo '<ul>';
foreach ($termchildren as $child) {
$term = get_term_by( 'id', $child, $taxonomyName );
echo '<li><a href="' . get_term_link( $term->name, $taxonomyName ) . '">' . $term->name . '</a></li>';
}
echo '</ul>';
?> 
```

目前，代码正在使用术语 id`10`并为此获取子项并显示在列表中。

但是，我想添加多个术语 id 并显示我添加的 id 的所有子项的列表。

我的 id 是 4,6,8,10,14,18,22

寻找一些帮助来弄清楚如何做到这一点？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:04:48.680

我想出了自己问题的答案。using`get_terms`将返回所有条款，因此无需指定我的条款的个人 ID。

我的代码是

```
<?php
$args = array( 'taxonomy' => 'location' );

$terms = get_terms('location', $args);

$count = count($terms); $i=0;
if ($count > 0) {
    $cape_list = '<p class="location-archive">';

    foreach ($terms as $term) {
        $i++;
        $term_list .= '<li><span class="feature"><a href="/location/' . $term->slug . '" title="' . sprintf(__('View all post filed under %s', 'my_localization_domain'), $term->name) . '">' . $term->name . '</a></li>';
        if ($count != $i) $term_list .= ' &middot; '; else $term_list .= '</p>';
    }
    echo '<ul class="list">';
    echo $term_list;
    echo '</ul>';

}
?> 
```

# html - 在ie8中居中div不起作用

> ID：13498393
> 
> 赞同：-1
> 
> 时间：2012-11-21T17:07:05.057
> 
> 标签：html, css, internet-explorer-8

> **可能重复：**
> [使用“margin: 0 auto;” 在 Internet Explorer 8 中](https://stackoverflow.com/questions/662341/using-margin-0-auto-in-internet-explorer-8)

我正在尝试使用`margin: 0 auto;`我也明确地给它一个高度来居中一个 div，但在我的特定情况下，它不起作用。它适用于其他浏览器。有人可以告诉我为什么它在我的特定情况下不起作用吗？这是一个jsbin链接

[http://jsbin.com/afukif/43/edit](http://jsbin.com/afukif/43/edit)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:55:57.020

`margin: 0 auto`是相对于元素的父级的。如果父级与您的目标宽度相同，则`margin: 0 auto;`什么也不做。在这种情况下，看起来父元素是`body`. 在 CSS 中设置：

```
body, html {
    width: 100%;
} 
```

在 IE 8 中测试：

[http://jsbin.com/afukif/61/edit](http://jsbin.com/afukif/61/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T22:12:45.587

在 Internet Explorer 中，您通常必须设置父元素，`text-align:center;`然后将内部元素对齐设置为左对齐。我不得不这样做几次，因为 IE 并不总是能识别`margin: 0 auto;`. 还要确保如果您使用`margin: 0 auto;`的是为您尝试居中的元素设置宽度。否则它不知道如何计算边距。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-21T17:08:51.627

尝试

左边距：自动；边距右：自动；

# mysql - 左连接字符+链接值

> ID：13498395
> 
> 赞同：2
> 
> 时间：2012-11-21T17:07:17.453
> 
> 标签：mysql

我会保持这个简单。我需要加入 2 个表，Master 和 Child 都带有 PartNum 字段。字段的值如下所示：

```
Master
-----
1003
1004
1005
...

Child
-----
1003
C1003
K1003
pp1003
cc1003
1004
... 
```

我只想加入以单个“C”开头的子记录，

所以...

1003 只会返回 C1003

对此 MySql 新手的任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:16:41.750

尝试这样的事情：

```
SELECT c.prod
FROM master m 
LEFT JOIN child c ON c.prod = CONCAT('C', CAST(m.prod AS CHAR)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:10:05.980

```
select *
from master m
left join child c on concat('C', m.PartNum) = c.PartNum 
```

# java - 值更改事件的所有文本框所需的解决方案 - 通用方式

> ID：13498397
> 
> 赞同：0
> 
> 时间：2012-11-21T17:07:27.660
> 
> 标签：java, gwt, uibinder, gwt2, solution

在我的应用程序中，我们使用 1\. 使用 UIBinder 设计屏幕，并使用视图类进行绑定 2\. Presenter 作为控制器和模型。3\. 我们确实有 Base Presenter（抽象，很少有通用实现） 4\. 我们有很多这样的屏幕，所有屏幕都将有文本框，所有屏幕演示器都将扩展 Base Presenter。

-- 我的要求是在用户更改任何屏幕中的任何文本框时触发并捕获通用事件。- 我不想为每个屏幕中可用的每个文本框定义事件。-- 我想在通用的值更改（ValueChangeHandler）事件上注册所有文本框。

无论如何我们可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:08:37.227

据我了解，您希望为出现在一组屏幕中的每个文本框添加一个值更改处理程序，而无需添加到每个单独的文本框。

您可以扩展文本框并在构造函数中添加值更改处理程序，并提供一个挂钩来执行任何操作。

```
public class MyTextBox extends TextBox
{
     public MyTextBox()
     {
           super();
           addValueChangeHandler( new ValueChangeHandler<String>()
           {

                @Override
                public void onValueChange( ValueChangeEvent<String> event )
               {
                    // TODO Auto-generated method stub

              }
           } );
      }
} 
```

# xslt - 为什么我必须将此节点分配给样式表中的变量？

> ID：13498399
> 
> 赞同：2
> 
> 时间：2012-11-21T17:07:26.140
> 
> 标签：xslt

我正在研究 XSLT 样式表。我有一个节点（节点 A）和一堆孩子，我正在循环另一个节点（节点 B）的孩子。每次节点 B 的子节点也是节点 A 的子节点时，我都在尝试做一些事情，所以我有以下代码：

```
<xsl:if test="$prodbins/bin[./text()=/root/Line[1]/Element[6]/text()]"> 
```

但这不起作用（测试失败；表达式返回 false），即使表达式的左侧和右侧在单独评估时相等。

但是当我这样做时：

```
<xsl:variable name="curbin" select="/root/Line[1]/Element[6]/text()"/>
<xsl:if test="$prodbins/bin[./text()=$curbin]"> 
```

该表达式的计算结果为真。为什么我必须使用 $curbin 变量来获得我期望的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:58:16.637

你能试试吗`<xsl:if test="$prodbins/bin[./text()=current()/root/Line[1]/Element[6]/text()]">`（注意 current() 函数）。它在您的原始表达式中不起作用的原因是因为您查询一个变量并`/`查找变量内容的根节点，而不是您正在转换的源文档。current() 应该返回您所在模板的上下文元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:32:08.240

**我的猜测是，这`$prodbins/bin`是一个属于不同文档的节点（-set），而不是包含被比较的节点的文档**。

在表达式中：

```
 $prodbins/bin[./text()=/root/Line[1]/Element[6]/text()] 
```

子表达式

```
 /root/Line[1]/Element[6]/text() 
```

从与从中选择节点的文档*相同的文档中进行选择。*`$prodbins/bin`

**成功指定所需比较的一种方法是**：

```
<xsl:variable name="vDoc" select="/"/>

<xsl:if test="$prodbins/bin[./text()=$vDoc/root/Line[1]/Element[6]/text()]"> 
```

# node.js - npm - 为不同文件夹中的包安装依赖项？

> ID：13498403
> 
> 赞同：168
> 
> 时间：2012-11-21T17:07:45.497
> 
> 标签：node.js, npm

我有以下目录结构：

```
/some_project
    source.js
    package.json 
```

我想为 some_project 安装依赖项。我知道我可以 cd 进入 some_project 然后运行 ​​npm install

但我想知道是否可以不更改目录？就像是

```
npm install some_project/package.json 
```

* * *

## 回答 #1

> 赞同：400
> 
> 时间：2013-01-16T23:51:52.257

您可以将`npm install <folder>`变体与`--prefix`选项一起使用。在您的场景中，文件夹和前缀将是相同的：

```
npm --prefix ./some_project install ./some_project 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-11-21T21:34:40.340

**更新：**由于该`--prefix`选项存在，我现在投票支持@coudy 对此问题的回答。原答案如下：

不，`npm`将始终安装在当前目录中，或者使用`-g`，安装在系统范围的 node_modules 中。不过，您可以使用子shell 来完成此操作，这不会影响您的当前目录：

```
(cd some_project && npm install) 
```

括号使它在[subshel](http://tldp.org/LDP/abs/html/subshells.html) ​​l 中运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-05T18:23:47.567

在使用 powershell 的 Windows 10 上，唯一对我有用的东西没有[这篇博](https://nerdymishka.com/blog/run-npm-install-in-a-different-directory/)文中提到的所有问题和边缘情况是这个

```
Start-Process -Wait -FilePath "npm" -ArgumentList "install" -WorkingDirectory $web_dir 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-10T09:43:55.027

在 Windows 10 上我无法开始`--prefix`工作，所以我不得不`cd`执行它。

```
cd PATH_TO_FOLDER && npm install 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-05T02:51:41.137

在根目录下创建一个 package.json，内容如下：

```
{
    "dependencies": {
        "helloworldprojectname": "file:hello\\world"
    }
} 
```

然后调用它来安装：

```
npm install --prefix ./hello/world 
```

它`./hello/world/node_modules`使用`./hello/world/package.json`.

（Windows 10、节点 v10.16.0、npm 7.6.1）

# spring-security - Spring Security - 注销时获取用户名

> ID：13498404
> 
> 赞同：1
> 
> 时间：2012-11-21T17:06:45.797
> 
> 标签：spring-security, logout

如何获取用户名或`UserDetail`对象`logout-success-url`？下面是我的配置：

```
<form-login default-target-url="/security/loginSuccess.action" 
            always-use-default-target="false" 
            authentication-failure-url="/security/loginFailed.action"
            login-page="/security/restrictUser.action"/>    

<logout invalidate-session="true" logout-success-url="/security/logoutUser.action" />

<session-management 
  session-authentication-strategy-ref="customMsgAwareConcurrentSessionControlStartegy" 
  invalid-session-url="/security/logoutUser.action"/> 
```

我想在其中获取请求注销的用户名`logout-success-url`（对我来说这是一个 Struts 2 操作方法）。我已经检查过了，但是当控件到达我的操作方法时`SecurityContextHolder`，它似乎被清除了。`SecurityContextHolder``logout-success-url`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T09:20:31.160

为此使用自定义`LogoutSuccessHandler`。在您的配置中定义 bean 并使用标签`success-handler-ref`的属性。`<logout>`

```
<logout success-handler-ref="customLogoutSuccessHandler" />
<beans:bean id="customLogoutSuccessHandler" class="..." /> 
```

里面`CustomLogoutSuccessHandler`有`onLogoutSuccess`有参数的方法`Authentication`。

```
public class CustomLogoutSuccessHandler extends
    AbstractAuthenticationTargetUrlRequestHandler implements
    LogoutSuccessHandler {

    public void onLogoutSuccess(HttpServletRequest request,
        HttpServletResponse response, Authentication authentication)
        throws IOException, ServletException {
         // use authentication to get user name
    }
} 
```

# iphone - iphone 5 底部显示白色条

> ID：13498406
> 
> 赞同：0
> 
> 时间：2012-11-21T17:07:49.473
> 
> 标签：iphone, objective-c, xcode, iphone-5

我的应用程序在 iphone 4 中运行良好，但我的 iphone 5 在白色条带下方显示了这个。我也添加了
Default-568h.png，但问题仍然存在。我应该怎么办？

![在此处输入代码](../Images/6d456a70f2c56254440f18ef4172771d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:28:42.710

看起来您需要为视图设置调整大小的蒙版。确保在 Interface builder 的尺寸检查器的 Autosizing 部分中将其设置为按高度拉伸。如果您不使用界面生成器，或者在代码中适当地设置掩码。

编辑 - -

**在代码中：** 请参阅 autoResizingMask：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)

**界面构建器：**

Autosizing 部分是您想要的。

确保为视图设置蒙版。您还需要为任何控件设置外栏。例如，单击底部栏将告诉按钮粘在视图的底部。

![在此处输入图像描述](../Images/2070bc0f9add126eb331af0e7d1891d3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:53:46.957

试试这个：

```
yourView.autoresizingMask =  UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleTopMargin ; 
```

# mediaelement.js - 如何让 Popcorn.js 在 iPad 上与 Video.js 一起工作

> ID：13498408
> 
> 赞同：2
> 
> 时间：2012-11-21T17:07:54.237
> 
> 标签：mediaelement.js, video.js, popcornjs

我不能在 iPad 上使用本机视频播放器，因为它会窃取所有触摸事件，并且我需要在视频上显示交互式元素。使用[Video.js](http://videojs.com/)可以达到这个目的，但奇怪的是，它会阻止[Popcorn.js](http://popcornjs.org/)事件在 iPad 上触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:07:54.237

这并不完全是一个解决方案，但我发现[MediaElement.js](http://mediaelementjs.com/)是 Video.js 的一个很好的替代品，并且可以很好地与 Popcorn 配合使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T11:44:28.680

问题不在于特定的视频库。当您为视频播放器启用控件时，您无法对视频顶部的任何 HTML 元素进行任何交互。

我有同样的问题，我通过这样做解决了它

```
p.controls(false); //where p is the object of popcorn js player 
```

当在视频顶部显示任何交互式元素（例如 BUTTON）时，当我在视频顶部不再需要我的按钮时，我这样做了，我再次启用了控件。

```
p.controls(true); 
```

它就像一个魅力！

# javascript - 从 JSON 构建 URL

> ID：13498417
> 
> 赞同：2
> 
> 时间：2012-11-21T17:08:27.227
> 
> 标签：javascript, url, uri

我创建了一个可以像这样构建嵌套 url 的函数。我想知道是否存在一个更主流的库来构建这样的 urls / uris。我宁愿使用标准。

```
utility.urlConstruct({
    "scheme": "https://",
    "domain": "domain.com",
    "path": "/login",
    "query":{
        "user":"thomasreggi",
        "from":utility.urlConstruct({
            "scheme": "https://",
            "domain": "redirect.com",
            "path": "/funstuff",
        }),
    }
}); 
```

吐出来

> [https://domain.com/login?user=thomasreggi&from=https%3A%2F%2Fredirect.com%2Ffunstuff](https://domain.com/login?user=thomasreggi&from=https%3A%2F%2Fredirect.com%2Ffunstuff)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:53:05.637

正确答案是节点内置的[URL 库](http://nodejs.org/api/url.html)。

具体来说

```
url.format(urlObj) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:10:47.380

jQuery 在内部为其 AJAX 调用执行此操作。也许有一种方法可以访问内部功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T17:13:03.913

至少有标准约定：

*   该方案（或协议）不包括 //
*   您的域称为主机（并且可以包括子域或端口）
*   路径称为路径名
*   查询是参数列表
*   你可能还需要一个哈希

然后它非常简单，因此不需要图书馆。您会在那里找到一些库，例如[jsuri](http://code.google.com/p/jsuri/)，但它们的目的更多的是帮助解析而不是构造（例如，解决跨浏览器与路径名的不一致问题）。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-22T07:36:04.207

[![点击这里，SCHEME.js](../Images/38de211d0f0c007d456a4b583c7c1dcd.png)](https://github.com/reggi/schemejs)

我构建了 Scheme.js 来通过 javascript 对象构建 url，请随时提供任何改进。

# perl - 对大文本文件进行分页

> ID：13498418
> 
> 赞同：1
> 
> 时间：2012-11-21T17:08:27.500
> 
> 标签：perl, unix

我有一个大文本文件。文件中的每一行都是一条记录。而且我需要解析文本文件并一次只在 HTML 表中显示 20 条记录。我也必须支持排序。

我目前正在做的是根据查询字符串中提供的参数 start、stop 和 page_size 逐行读取文件。在我必须对记录进行排序之前，它似乎工作正常，因为为了排序，我需要处理文本文件中的每一行。

那么是否有一个 Unix 命令可以让我逐行提取并排序？我尝试了 grep 但我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T17:54:32.920

看一下[pr](http://www.manpagez.com/man/1/pr/)命令。这是我们一直用来对大文件进行分页的方法。可以设置页长、页眉、页脚、开启行号等。

甚至可能有一种方法可以将输出转换为 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:11:41.060

文件有多大？

```
man sort 
```

[这里](http://unixhelp.ed.ac.uk/CGI/man-cgi?sort)

# c# - 0 或多个项目的 LINQ Single() 异常

> ID：13498419
> 
> 赞同：24
> 
> 时间：2012-11-21T17:08:30.570
> 
> 标签：c#, linq, ienumerable

我有一些`IEnumberable`物品收藏。我用来`.Single()`在集合中查找特定对象。

我选择使用`Single()`是因为应该只有一个特定的项目。但是，如果一个不存在，那么我需要创建它并将其添加到集合中。

我的问题是，`Single()`如果没有与谓词匹配的项目或有多个项目，则会引发相同的错误。我的想法是将`Single()`调用放在 try 中并捕获异常，添加项目，然后继续。但是，由于这两种情况都会抛出`InvalidOperationException`，我如何判断它是由于没有项目还是由于多个项目？

我知道我可以使用`First()`，但这并不能强制认为应该只有一个（无需做额外的工作）。

我也可以`Count()`在`Single()`通话前使用，但这似乎破坏了`Single()`

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-21T17:10:09.553

你想要的是`SingleOrDefault()`

“或默认值”实际上意味着它返回 null （对于引用类型）或非引用类型的默认值。你需要新建一个对象来代替它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T17:10:49.957

我不建议在这种情况下使用 try/catch，因为使用异常来做出逻辑决策会耗费资源。

我建议使用`SingleOrDefault()`, 并检查结果是否为空。如果是。做你的创作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-09T12:43:08.253

当集合中有多个项目时，SingleOrDefault 将引发异常。您必须事先手动检查尺寸。

```
var singleItem = list.Count() == 1 ? list.Single() : null; 
```

也许最好只制作自己的扩展功能。

# objective-c - NSNotificationService 仅在我将通知设为全局时才有效

> ID：13498423
> 
> 赞同：1
> 
> 时间：2012-11-21T17:08:43.967
> 
> 标签：objective-c, ios, nsnotificationcenter

我有一个简单的设置。

我有一个“TripService”和一个“TripViewController”。当旅行服务发生变化时，例如距离，它应该触发通知，以便通知任何感兴趣的人，在这种情况下是视图控制器。

当我触发绑定到对象的通知时会发生问题，所以我输入：

```
[NSNotification notificationWithName:TRIPSERVICEDISTANCECHANGE 
                              object:self 
                            userInfo:distanceInfo]; 
```

并用

```
[notificationCenter addObserver:self
                       selector:@selector(distanceChanged:)
                           name:TRIPSERVICEDISTANCECHANGE
                         object:self.tripRecorder]; 
```

在这种情况下，我触发了它，但没有任何 distanceChanged 永远不会被触发。

如果我用 nil 替换两个“对象”值，那么这有效。

奇怪的是，如果我在调试模式下运行应用程序并单步执行代码，这可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T00:56:20.827

在代码中：

```
[notificationCenter addObserver:self
                   selector:@selector(distanceChanged:)
                       name:TRIPSERVICEDISTANCECHANGE
                     object:self.tripRecorder]; 
```

参数： `object:self.tripRecorder`告诉通知中心仅将`TRIPSERVICEDISTANCECHANGE`通知`self`发送到从`self.tripRecorder`. 如果在`object:`设置为时发送通知`nil`，这告诉我`self.tripRecorder`可能不是发送通知的对象。但是，您还说如果您使用调试器单步执行程序，则代码可以工作。这听起来像是一个对象生命周期问题（通知对象在通知中心可以处理/传递通知之前被销毁）。`notificationWithName:`返回一个自动释放的对象，这个对象是否有可能在创建它的方法结束时被释放？

# javascript - AngularJS + PhoneGap

> ID：13498432
> 
> 赞同：10
> 
> 时间：2012-11-21T17:09:20.473
> 
> 标签：javascript, cordova, angularjs

我希望这个问题已经得到解决。PhoneGap 可以与 AngularJS 一起使用吗？一起使用它们有什么限制吗？好处/陷阱？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T15:21:41.173

是的。

我已经使用 PhoneGap 和 AngularJS 制作了多个应用程序。它没有魔法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T17:12:21.197

PhoneGap 只是在本机设备浏览器中运行您的应用程序，因此如果您的目标平台支持 AngularJS，它应该可以与 PhoneGap 一起使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-18T13:12:47.123

我无法让 angularjs 在带有 phonegap 的 windows phone 7 上工作。简单的僵硬作品，但只要我尝试添加页面路由......

[编辑]

行。所以我在windows phone 7/8上发现了这个问题。

在 angular.js (1.0.3) 的函数 matchUrl(url,obj) 中，有一个正则表达式失败，因为 Windows Phone 使用了不寻常的前缀或命名空间或任何它被调用的东西（可能是出于安全目的）。

发生的事情是 Angular 期待一个像“http://localhost/www/index.html”这样的 url，但在 Windows 手机中它看起来像：“x-wmapp0:www/index.html”。

我尝试修复正则表达式，但即便如此，我后来还是从 XHR 收到了一个错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-18T09:06:34.753

我发现 brian t ford 文章（每个人都引用）并没有真正解释如何获取配置文件（其中包括指向 index.html 文件和其他几个资产的指针），这将其标记为一点过时了。如果能得到一个很好的更新，那就太好了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-18T06:03:49.253

我目前正在使用 Phonegap 和 AngularJS 开发一个项目。我推荐以下阅读。将帮助您在一小时内确定它是否是您想要的。

[http://briantford.com/blog/angular-phonegap.html](http://briantford.com/blog/angular-phonegap.html)

AngularJs 将让您拥有网站的功能和结构，但它有一个小缺陷，就是它有点慢，我是根据经验说的，有时模型需要一段时间才能冷却下来。

同样，我建议您看一下 Yeomen，我目前正在开发一个生成器 angularJS phonegap，并希望在本周末拥有它。

问候

@gartox

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-12T18:19:28.217

来自PhoneGap的博客： http:
[//phonegap.com/blog/2013/07/31/phonegap-30-faq/](http://phonegap.com/blog/2013/07/31/phonegap-30-faq/)

> 问：PhoneGap 是否与 angular.js 配合得很好？还是其他框架？
> 
> 答：确实如此。PhoneGap 并不规定如何使用 HTML、CSS 和 JavaScript 编写应用程序。我们可以很好地使用所有框架，最近，许多框架都是用 Angular 编写的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-10T17:21:30.330

是的。[http://ionicframework.com](http://ionicframework.com)是一个集成了 Cordova 和 AngularJS 的框架。它将为您节省大量时间来尝试设置所有内容。

要安装框架：

```
npm install -g cordova ionic 
```

创建新的空：

```
ionic start myApp blank 
```

phonegap 中可用的所有选项在 Ionic 中也可用。例如，您可以键入

```
ionic serve 
```

并且您的移动应用程序将直接在浏览器中打开，并在对文件进行新更改时自动更新，就像在 Phonegap 中一样。

# java - 通过单链表在堆栈中的 peekBottom 方法

> ID：13498434
> 
> 赞同：0
> 
> 时间：2012-11-21T17:09:27.213
> 
> 标签：java

我已经完成了 peekTop，这是常规的 peek 功能？窥视底部有什么区别？

我如何获得最后一个元素？

```
public E PeekTop() {
    if (isEmpty()) 
    System.out.print("stack is empty ");
    return top.getElement(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:16:45.657

正如[jtahlborn](https://stackoverflow.com/users/552759/jtahlborn)所指出的，如果您的堆栈是通过单链表实现的，则您需要遍历整个链表才能检索堆栈底部的项目 - 即：

```
public E PeekBottom() {
    if (isEmpty()) {
        System.err.println("Stack is empty - no bottom");
        return null;
    }
    E stackItem = top;
    while (stackItem.hasNext())
        stackItem = stackItem.next();
    return stackItem.getElement();
} 
```

# c++ - 通过 Python 脚本调用 C++ 函数

> ID：13498445
> 
> 赞同：7
> 
> 时间：2012-11-21T17:10:14.370
> 
> 标签：c++, python, qt, boost-python, word-wrap

我有一个场景，我在 C++ 类中有一些函数，我希望能够使用 python 脚本调用它们。假设我有一个功能

```
void greet(_msg);
    std::cout >> _msg >> std::endl; 
```

我希望能够通过自定义 Python 调用来调用它并将参数传递给它，例如使用

```
saySomething("Hello") 
```

作为一个 .py 文件，我希望它调用 greet 函数并将“Hello”作为参数传递。

我知道这是一个已经被彻底讨论过的主题，并且我已经对在 C++ 中嵌入 python 进行了一些研究，我已经设法使用标准 Python/C API 从 python 脚本中读取值并在 Python 中运行一个函数来自 C++ 并将参数传递给它，但我似乎无法理解如何实现这一特定结果。

我已经查看了 ctypes 和各种 wrappin 库，例如 boost:python 或 swig，但我似乎无法理解它们可以在多大程度上帮助我实现我想要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T17:55:18.390

根据您感兴趣的 Python 版本（2.x 或 3.x），通读 2.x 或 3.x 的[扩展](http://docs.python.org/2/extending/)和[嵌入](http://docs.python.org/3/extending/)**Python 解释器**一章。您只对**扩展**Python 感兴趣，因此第**1 节。使用 C 或 C++ 扩展 Python**将为您提供完整的解释，以便能够从 Python 脚本调用用 C++ 实现的函数。

 ****当然，有许多库和生成器允许您为 Python 包装 C/C++ API（例如[Boost.Python](http://www.boost.org/libs/python/)或[SWIG](http://swig.org/)），但您的情况听起来很简单，为了学习，IMO 最好熟悉 Python C API。即使您使用这些工具，您也经常不得不深入了解 Python C API，或者至少了解它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T19:17:25.017

我最近需要做这件事。Boost.Python 做了我们正在寻找的东西（以及更多），但就个人而言（尽管我很喜欢 Boost），我发现不得不将 Boost 库的一半拖入以获得一个功能有点过头了。SWIG 对我来说也不是一个真正的选择，因为当类结构发生变化时，代码生成总是变得难以维护（不要误会我的意思，这些是出色的解决方案！，只是不是我想要的）。

所以，留给我的唯一一件事就是从第一原则（Python/C API）实现它。Hense，“ECS：Python”诞生了。ECS:Python（Embedded C++ Scripting with Python）是我专门为 C++ 开发人员设计的一个简单的 C++ Python 包装库。它允许您将 C++ 应用程序中的对象公开给嵌入式 Python 解释器以进行交互式脚本，而且它非常轻量级且易于使用。

它的免费（BSD）和开源。如果您对这里感兴趣，请访问：http: [//sourceforge.net/projects/ecspython](http://sourceforge.net/projects/ecspython)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-21T17:44:01.000

您可以使用 scipy 包中的 weave.inline() 函数来编译和执行 C/C++ 文件并从 Python 脚本中获取它们的输出。****

# java - Struts2 文本值显示在不正确的位置

> ID：13498448
> 
> 赞同：2
> 
> 时间：2012-11-21T17:10:26.460
> 
> 标签：java, struts2, struts-validation

我创建了一个 struts2 登录页面，其中包含登录所需的所有基本组件。我正在使用 struts2 文本标签作为标签。下面是我的登录页面代码片段。

```
 <body>
        <h2>Demo - Login</h2>
        <s:actionerror />
        <s:form action="login.action" method="post">
            <s:textfield name="username" key="label_username" size="20" />
            <s:password name="password" key="label_password" size="20" />
            <s:submit name="signIn" key="label_login" align="center" />
            <s:text name="name_msg"/>
            <s:submit name="signUp" key="label_signUp"></s:submit>
        </s:form>
    </body> 
```

我总是看到标题后显示文本（New to Demo？），如下图所示。从 MessageBundle 中读取文本。尽管引用了资源包，但我尝试给出一些直接的文本值，即使结果相同。我错在哪里。

![在此处输入图像描述](../Images/db17fc1d14c61721913a7ca3cb2e165c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:24:48.850

`<s:text>`标签显示没有“装饰”的文本。

默认的“xhtml”主题的表单标签会发出表格标记。

这意味着您当前正在生成无效的 HTML，因此文本将根据浏览器处理表格行之间显示的内容的方式显示在基本上任意的位置。

查看源代码会立即回答这个问题。

您需要将文本放入表格行中，就像表单标签中的其他所有内容一样，或者使用“简单”主题并自己完成所有布局、错误消息等。

# python - 更改一个 dict 值会更改所有值

> ID：13498453
> 
> 赞同：3
> 
> 时间：2012-11-21T17:10:37.333
> 
> 标签：python, list, dictionary

我在 Python 字典中看到一些不寻常的行为：

```
import numpy as np
td =[np.Inf, 2, 3]
a = {}
# First initialize contents of dictionary to a list of values
for k in range(10):
    a[k] = td

# now I want to access the contents to modify them based on certain criteria 
for k in range(10):
    c = a[k]
    c[0] = k
    a[k] = c 
```

由此，我希望每个字典键值的列表的每个第一项都基于 ( `c[0] = k`) 进行更改，但是，我最后得到的是字典的*所有*值都更新为 的最后一个值`k`，如下所示：

```
{0: [9, 2, 3], 1: [9, 2, 3], 2: [9, 2, 3], 3: [9, 2, 3], 
 4: [9, 2, 3], 5: [9, 2, 3], 6: [9, 2, 3], 7: [9, 2, 3], 
 8: [9, 2, 3], 9: [9, 2, 3]} 
```

我错过了什么，还是字典定义有问题？

我可以以不同的方式解决这个问题，让我的代码运行，但我对字典类为什么会这样表现感兴趣。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T17:13:32.997

因为每个键都获得**相同的列表**...要制作列表的浅表副本，请使用以下语法：

```
for k in range(10):
    a[k] = td[:] 
```

演示：

```
>>> d = {}
>>> el = [1, 2, 3]
>>> d[0] = el
>>> d[1] = el
>>> map(id, d.values())
[28358416, 28358416] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T17:15:30.860

发生这种情况是因为当您将值插入 时`dict`，您并没有插入一个全新的列表。您实际上是在插入对同一个旧列表的引用。因此，当您更改一个值时，您实际上是在更改该值指向的列表，因此也更改了所有值指向的列表。

如果您真的想要为每个值单独列出列表，那么最好在插入时制作列表的浅表副本，如下所示：

```
td =[np.Inf, 2, 3]
for k in range(10):
    a[k] = td[:] #making a new list out of the old one 
```

现在，这将按您期望的方式工作

```
for k in range(10):
    c = a[k]
    c[0] = k
    a[k] = c 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T17:14:21.207

当您`td`在 line中引用时`a[k] = td`，您实际上是在将引用附加到原始列表。该列表的任何修改在任何地方都是可见的。您需要使用[copy 模块](http://docs.python.org/2/library/copy.html)来创建一个新列表（或在循环本身中为每个条目构建一个新列表）：

```
for k in range(10):
    a[k] = [np.Inf, 2, 3] 
```

# android - 安卓数据库异常

> ID：13498454
> 
> 赞同：3
> 
> 时间：2012-11-21T17:09:39.177
> 
> 标签：android, sqlite

我正在尝试在 android 上创建一个数据库，当我运行时引发异常：

```
Database - Failure 1 (near "integer" : syntax error) on 0x1ac028 when preparing 'create table list1 (id integer Primary key autoincrement, task text not null, check integer not null)' 
```

我不明白为什么会这样。这是我的代码：

```
String dbName="projectDatabase";
    String tableName="List1";
    String TableStructure="create table " + tableName +" (id integer Primary key autoincrement, task text not null, check integer not null)";
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button cb = (Button) findViewById(R.id.creatbutton);
        cb.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                try{
                    SQLiteDatabase ldb = openOrCreateDatabase(dbName, Context.MODE_PRIVATE, null);
                    ldb.execSQL(TableStructure);}catch(Exception e){
                        Toast.makeText(DsTest2Activity.this, "Failed", Toast.LENGTH_LONG).show();
                    }
                Intent list = new Intent(DsTest2Activity.this,List.class);
                startActivity(list);
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T17:17:18.777

`check`是一个 SQLite 关键字。您不能将其用作表名或列名。

将您的列名更改为其他名称，您的错误就会消失。

```
String TableStructure="create table " + tableName +" (id integer Primary key autoincrement, task text not null, checknum integer not null)"; 
```

有关当前 SQLite 关键字的完整列表，请查看[此处](http://www.sqlite.org/lang_keywords.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T17:44:51.447

To use a keyword directly as a column name, quote it:

```
..., "check" integer not null) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-21T17:32:19.507

下午好，输入你的代码`_id integer primary key autoincrement, ...`，例如：

`CREATE TABLE tabela(_id integer primary key autoincrement, task text not null, check integer not null);`

# ios - 如何显示带有可用共享选项的默认 iOS 6 共享操作表？

> ID：13498459
> 
> 赞同：99
> 
> 时间：2012-11-21T17:10:50.820
> 
> 标签：ios, social-framework

一些应用程序在 iOS 6 中显示带有共享选项的默认操作表。

[Social Framework](https://developer.apple.com/documentation/social)只有两个类，一个是作曲类，一个是请求类。

我发现虽然是关于使用 SLComposeViewController 为特定服务编写内容，但在显示此内容之前，我必须手动查询该服务是否可用。然后我还必须使用自己的图标创建自己的操作表。

这些应用程序如何在 iOS 6 中显示此默认共享选项操作表？还是他们使用开源框架？

* * *

## 回答 #1

> 赞同：224
> 
> 时间：2012-11-21T17:54:47.733

另一个答案中所述的[UIActivityViewController](https://developer.apple.com/documentation/uikit/uiactivityviewcontroller)使这变得微不足道。您所要做的就是指定要共享的文本/图像/URL，并以模态方式呈现活动视图控制器，iOS 将自动显示所有适用的共享服务。例子：

# Objective-C

```
- (void)shareText:(NSString *)text andImage:(UIImage *)image andUrl:(URL *)url
{
    NSMutableArray *sharingItems = [NSMutableArray new];

    if (text) {
        [sharingItems addObject:text];
    }
    if (image) {
        [sharingItems addObject:image];
    }
    if (url) {
        [sharingItems addObject:url];
    }

    UIActivityViewController *activityController = [[UIActivityViewController alloc] initWithActivityItems:sharingItems applicationActivities:nil];
    [self presentViewController:activityController animated:YES completion:nil];
} 
```

# 迅速

```
func share(sharingText: String?, sharingImage: UIImage?, sharingURL: URL?) {
    let sharingItems:[AnyObject?] = [
                                        sharingText as AnyObject,
                                        sharingImage as AnyObject,
                                        sharingURL as AnyObject
                                    ] 
    let activityViewController = UIActivityViewController(activityItems: sharingItems.compactMap({$0}), applicationActivities: nil)
    if UIDevice.current.userInterfaceIdiom == .pad {
        activityViewController.popoverPresentationController?.sourceView = view
    }
    present(activityViewController, animated: true, completion: nil)
} 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-03-08T15:24:36.053

添加这个以使用`UIActivityViewController`.

```
-(IBAction)shareButtonPressed:(id)sender {

    NSLog(@"shareButton pressed");

    NSString *texttoshare = _txt; //this is your text string to share
    UIImage *imagetoshare = _img; //this is your image to share
    NSArray *activityItems = @[texttoshare, imagetoshare];    
    UIActivityViewController *activityVC = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:nil];
    activityVC.excludedActivityTypes = @[UIActivityTypeAssignToContact, UIActivityTypePrint];
    [self presentViewController:activityVC animated:TRUE completion:nil];
} 
```

# c# - 访问键列表对以查找键并返回值

> ID：13498470
> 
> 赞同：-1
> 
> 时间：2012-11-21T17:11:48.087
> 
> 标签：c#, sql, list, parameters

```
 List<KeyValuePair<int, string>> descr = proplist(); 
```

获得此列表后，我如何访问它并从中查找值。例如稍后列表的 int 将等于 data.propval 并且列表的字符串部分将用作 cmd 参数。

```
 {
                using (DB2Connection conn = new DB2Connection())
                {
                    try
                    {
                        if (conn.State != ConnectionState.Open) 

                        foreach (CollyUp data in DataUps)
                        {
                            if (data.PropVal== **int from list**)
                            {

                                DB2Command cmdtx = new DB2Command();

                                string insert = @"blah...."

                                cmdtx.Parameters.Add("@MemberNbr", data.nvr);
                                cmdtx.Parameters.Add("@LoanNbr", data.Ln);
                                cmdtx.Parameters.Add("@PropVal", data.PropValue);
                                cmdtx.Parameters.Add("@ValueDescrip", **string.Value from list**); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:15:21.860

我认为你会使用 a`Dictionary<int, string>`而不是`List<KeyValuePair<int, string>>`. 然后您可以使用该`.Item`属性或该`.TryGetValue`方法进行查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:25:02.030

您可以简单地使用`Dictionary<int, string>`它的`Add()`,`Remove()`方法来添加/删除项目，`ContainsKey(int_key)`检查它是否持有*int 键*并`dictionary[int_key]`获取它的*字符串值*：

```
Dictionary<int, string> dictProps = new Dictionary<int, string>();
...
dictProps.ContainsKey(int_key)
...
string val = dictProps[int_key]; 
```

# sql - 案例选择语句

> ID：13498474
> 
> 赞同：0
> 
> 时间：2012-11-21T17:11:59.267
> 
> 标签：sql, sql-server, case, inner-join, subtraction

我正在尝试从商品的总价中创建折扣，这一切都有效，但是当我到达“折扣后”时，我收到以下错误“无法将 char 值转换为金钱。char 值的语法不正确。

```
select ma.materialname,
mi.LeadTime,
su.SuppliersName,
'Discount' = CASE WHEN mi.price > 40.000 then (mi.Price / 100) * 10 END,
mi.Price as 'Before Discount',
'After Discount' = Case when 'discount' IS not null then (mi.Price - 'discount') END
from MaterialItem mi
inner join Material ma on mi.MaterialItemID = ma.MaterialID
inner join SupplierDetails sd on mi.SupplierID = sd.SuppliersID
inner join Suppliers su on sd.SuppliersID = su.SuppliersID 
```

我试图从 mi.price 列中减去“折扣”列，我们将不胜感激

**编辑：**

折扣和折扣后不是我表中的列，我动态创建这些以计算原始价格的折扣

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:16:59.213

您对查询有一些问题：

首先，您在别名周围使用单引号，这些被解释为字符串而不是列名。

其次，您在`CASE`语句中引用了别名，您不能这样做。如果要在 中引用列别名，`CASE`则需要再次使用公式或将查询放在另一个`SELECT`类似于此的内部：

```
select materialname,
  LeadTime,
  SuppliersName,
  Discount,
  BeforeDiscount,
  Case when discount IS not null then (BeforeDiscount - discount) END AfterDiscount
from 
(
  select ma.materialname,
    mi.LeadTime,
    su.SuppliersName,
    CASE WHEN mi.price > 40.000 then (mi.Price / 100) * 10 END as Discount,
    mi.Price as BeforeDiscount
  from MaterialItem mi
  inner join Material ma 
    on mi.MaterialItemID = ma.MaterialID
  inner join SupplierDetails sd 
    on mi.SupplierID = sd.SuppliersID
  inner join Suppliers su 
    on sd.SuppliersID = su.SuppliersID
) src 
```

# ews-managed-api - EWS API 使用服务 ResolveName

> ID：13498475
> 
> 赞同：2
> 
> 时间：2012-11-21T17:12:00.777
> 
> 标签：ews-managed-api

我正在尝试使用 ExchangeService::ResolveName API 解析名称

但问题是 Contact ItemId 始终为空，尽管有匹配项

```
NameResolutionCollection matchingnames = service.ResolveName("X@X.com",     ResolveNameSearchLocation.DirectoryOnly, true);
        foreach (NameResolution item in matchingnames)
        {
            Contact contact = item.Contact;
            contact.ItemId // This is always NULL irrespective 

        } 
```

我是不是做错了什么我怎样才能挖掘出联系方式……就像个人资料图片一样，我不能这样做，因为联系人的 ItemId 始终为 NULL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:40:34.977

我还在我的环境中观察到`null`，每个`NameResolutionCollection`项目的“联系人”始终设置为“”，但邮箱属性已填充。

所以你可以试试这个：

```
EmailAddress address = item.Mailbox;
String Name = address.Name.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-24T23:32:07.680

我认为您必须包含 PropertySet 参数才能包含一流的属性， [此处概述](https://docs.microsoft.com/en-us/dotnet/api/microsoft.exchange.webservices.data.exchangeservice.resolvename?view=exchange-ews-api#Microsoft_Exchange_WebServices_Data_ExchangeService_ResolveName_System_String_Microsoft_Exchange_WebServices_Data_ResolveNameSearchLocation_System_Boolean_Microsoft_Exchange_WebServices_Data_PropertySet_)...[有关 PropertySet 的更多信息](https://docs.microsoft.com/en-us/exchange/client-developer/exchange-web-services/email-properties-and-elements-in-ews-in-exchange#first-class-properties-and-elements-for-email-messages)。

```
NameResolutionCollection matchingnames = service.ResolveName("X@X.com", ResolveNameSearchLocation.DirectoryOnly, true, PropertySet.FirstClassProperties); 
```

# java - 如何在java中的类的派生类中查找字段？

> ID：13498477
> 
> 赞同：1
> 
> 时间：2012-11-21T17:12:11.683
> 
> 标签：java, reflection

我问这个问题是因为我很好奇。我不想真正遍历一个类的派生类。我知道我在这里介绍的方法很草率，这只是一个测试。

所以假设我有一个类（抽象与否）：

```
 public class SomeClass {
        // snip....
    } 
```

我可以轻松地编写一个方法来遍历类层次结构并找到一个`Field`示例：

```
 private Field extractField(Class<?> type, String fieldName) {
        Field ret = null;
        try {
            ret = type.getDeclaredField(fieldName);
        } catch (NoSuchFieldException e) {
            Class<?> superclass = type.getSuperclass();
            if (superclass == null) {
                throw new IllegalArgumentException("Missing field detected.", e);
            } else {
                ret = extractField(superclass, fieldName);
            }
        }
        return ret;
    } 
```

现在，如果我想`Field`在 的派生类中搜索 a，我该怎么办`type`？我在 java 反射包中没有发现任何有用的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T17:15:56.273

没有简单的方法可以遍历派生类，因为您不知道哪些类是从基类派生的。您可以使用[Reflections](http://code.google.com/p/reflections/)库来查找派生类。这通过检查类路径中类的字节码来工作，可选地限于包或预索引。

> 现在，如果我想在类型的派生类中搜索字段，我该怎么办？

一旦你找到了派生类，你可以用同样的方式检查它们。

# html - 在表内但在 td 之外有一个元素

> ID：13498479
> 
> 赞同：0
> 
> 时间：2012-11-21T17:12:14.707
> 
> 标签：html, css

在表格标签内但在单元格之外有一个元素是不好的做法还是出于任何原因不合理？

例如：

```
<table>
    <tbody>
        <td>Hello,</td>
        <td>Help me I'm a table cell.</td>
        <td>I'm just happy to be here.</td>
    </tbody>
    <a>close button</a>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:13:34.413

是的，把它放在桌子外面或单元格内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T17:22:38.873

如果您想检查有效的 HTML [http://validator.w3.org/check](http://validator.w3.org/check) ，请使用它。它将显示以下错误：

```
The element named above was found in a context where it is not allowed. This could mean that you have incorrectly nested elements -- such as a "style" element in the "body" section instead of inside "head" -- or two elements that overlap (which is not allowed).

One common cause for this error is the use of XHTML syntax in HTML documents. Due to HTML's rules of implicitly closed elements, this error can create cascading effects. For instance, using XHTML's "self-closing" tags for "meta" and "link" in the "head" section of a HTML document may cause the parser to infer the end of the "head" section and the beginning of the "body" section (where "link" and "meta" are not allowed; hence the reported error). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T17:29:14.247

是的，它会提供一个验证错误，因为 A 元素无法在不允许的上下文中找到，例如在 TABLE 元素中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T17:15:15.493

是的。`<a>`不允许直接在 a 内`<table>`。将其放在单元格（`<td>`或`<th>`）内或表格外。您也可以使用`<caption>`.

# sql - SQL Server 自联接存在问题

> ID：13498481
> 
> 赞同：0
> 
> 时间：2012-11-21T17:12:21.620
> 
> 标签：sql, sql-server, join, sql-server-2000, rank

我有以下内容：

```
 USE xxx
 GO

 SET ANSI_NULLS ON
  GO

  SET QUOTED_IDENTIFIER ON
  GO

 SET ANSI_PADDING ON
 GO

 CREATE TABLE [dbo].[branches](
     [branchNumber] [int] NULL,
     [isSub] [char](1) NULL,
     [masterBranch] [int] NULL
 ) ON [PRIMARY]

 GO

SET ANSI_PADDING OFF
GO

insert into branches 
values ( 115, 'Y', 900 ) 

insert into branches 
values ( 123, 'Y', 900 ) 

insert into branches 
values ( 150, 'Y', 900 ) 

insert into branches 
values ( 900, 'N', null ) 

insert into branches 
values ( 901, 'N', null ) 
 go 
```

我需要检查 a) 115 a isSub = Y 吗？如果是，那么我完成返回 115。 b) 900 是 IsSub = Y 吗？如果不是，我需要返回：115、123、150、900。c) 是 901 a isSub = Y？如果没有，我需要返回 901。

自从我查看 rank() 函数以来已经有一段时间了，所以我现在有点卡住了。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:50:42.627

所以你想知道的第一部分（A点和C点在这里相同）是“这个节点是别的东西的下属吗？” 这部分很简单，因为您已经在 DDL 中定义了它。

```
SELECT isSub FROM Branches WHERE branchNumber = @branchNumber 
```

第二部分是“得到本的所有下属”。

如果您有 SQL 2005+ 这将涉及[递归公用表表达式](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.90%29.aspx)(CTE)。这使您可以处理您在此处列出的父/子关系类型。如果您可以忽略 JOINS，这些示例应该可以正确地指导您（与您不太复杂的需求相比，它们是额外的噪音）。

当您使用 SQL 2000 时，您将面临一个不太优雅的解决方案（其中有几个）。

*   [这个](http://vyaskn.tripod.com/hierarchies_in_sql_server_databases.htm)使用 SProc 递归但仅限于 32 级。
*   [这个](https://stackoverflow.com/a/1781729/16391)以类似方式使用 UDF
*   [这个](http://support.microsoft.com/default.aspx?scid=kb;en-us;q248915)使用邪恶的 RBAR
*   ...如果您搜索“SQL 2000 递归查询”，还有许多其他人

如果第一部分为真，则执行第二部分并获取结果。

我建议您进行这些单独的存储过程或 SQL 调用。存储过程的返回值具有多种结构变化可能难以维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:53:01.580

一个简单的工会似乎工作。

```
select distinct branchNumber as num from dbo.branches
where branchNumber = 900
union
select branchNumber as num from dbo.branches
where masterBranch = 900 
```

# python - 将文本转换为具有特定键和值的字典

> ID：13498484
> 
> 赞同：0
> 
> 时间：2012-11-21T17:12:32.383
> 
> 标签：python, dictionary, quickdraw

> **可能重复：**
> [如何将文本文件提取到字典中](https://stackoverflow.com/questions/13486203/how-to-extract-a-text-file-into-a-dictionary)

我有一个文本文件，我想将其更改为 python 中的字典。文本文件如下。我想将键设置为“太阳”、“地球”和“月亮”，然后设置轨道半径、周期等值，以便我可以将动画太阳系实现为快速绘图。

```
RootObject: Sun

Object: Sun
Satellites: Mercury,Venus,Earth,Mars,Jupiter,Saturn,Uranus,Neptune,Ceres,Pluto,Haumea,Makemake,Eris
Radius: 20890260
Orbital Radius: 0

Object: Earth
Orbital Radius: 77098290
Period: 365.256363004
Radius: 6371000.0
Satellites: Moon

Object: Moon
Orbital Radius: 18128500
Radius: 1737000.10
Period: 27.321582 
```

到目前为止我的代码是

```
def file():
    file = open('smallsolar.txt', 'r')
    answer = {}
    text = file.readlines() 
    print(text)

text = file() 
print (text) 
```

我不确定现在做什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T17:18:46.793

```
answer = {} # initialize an empty dict
with open('path/to/file') as infile: # open the file for reading. Opening returns a "file" object, which we will call "infile"

    # iterate over the lines of the file ("for each line in the file")
    for line in infile:

        # "line" is a python string. Look up the documentation for str.strip(). 
        # It trims away the leading and trailing whitespaces
        line = line.strip()

        # if the line starts with "Object"
        if line.startswith('Object'):

            # we want the thing after the ":" 
            # so that we can use it as a key in "answer" later on
            obj = line.partition(":")[-1].strip()

        # if the line does not start with "Object" 
        # but the line starts with "Orbital Radius"
        elif line.startswith('Orbital Radius'):

            # get the thing after the ":". 
            # This is the orbital radius of the planetary body. 
            # We want to store that as an integer. So let's call int() on it
            rad = int(line.partition(":")[-1].strip())

            # now, add the orbital radius as the value of the planetary body in "answer"
            answer[obj] = rad 
```

希望这可以帮助

`3.14`有时，如果您的文件（等）中有一个十进制数（python-speak 中的“浮点数” ），则调用`int`它会失败。在这种情况下，使用`float()`代替`int()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T17:20:17.857

用一个字符串而不是 readlines() 读取文件，然后在 "\n\n" 上拆分，这样您将拥有一个项目列表，每个项目都描述您的对象。

然后您可能想要创建一个执行以下操作的类：

```
class SpaceObject:
  def __init__(self,string):
    #code here to parse the string

    self.name = name
    self.radius = radius
    #and so on... 
```

然后你可以创建一个这样的对象列表

```
#items is the list containing the list of strings describing the various items
l = map(lambda x: SpaceObject(x),items). 
```

然后只需执行以下操作

```
d= {}
for i in l:
  d[i.name] = i 
```

# jquery - datatables tabletools -> 仅导出选定的行

> ID：13498489
> 
> 赞同：1
> 
> 时间：2012-11-21T17:13:00.840
> 
> 标签：jquery, tabletools

我在通过 ajax 请求填充的大表上使用带有 tabletools 的数据表。

当用户选择多行时，它会将它们显示为在表中选择的。

我如何告诉 csv/xls 导出只导出选定的行？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T17:18:06.437

愚蠢的我...

刚收到：

```
 {
                "sExtends": "csv",
                "bSelectedOnly": true
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-09T09:23:37.083

如果对于像我这样的人`bSelectedOnly`不起作用（例如，当只选择某些行时，总是复制所有行），在你哭泣之前，只需检查你的运行`2.2.3`版本是否`dataTables.tableTools.js`因为此版本中已纠正错误：[https ://github.com /DataTables/TableTools/commit/a9afb46cb00417db6d0fd6d7697e5d28830bc959](https://github.com/DataTables/TableTools/commit/a9afb46cb00417db6d0fd6d7697e5d28830bc959)

```
Fix #48: `bSelectedOnly` option was not working in 1.10.
* Fix is to use the new `fnGetSelectedIndexes` which gives the
  information required for `bSelectedOnly` when needed. 
```

# phing - Phing：获取不带扩展名的文件名

> ID：13498492
> 
> 赞同：0
> 
> 时间：2012-11-21T17:13:12.597
> 
> 标签：phing

给定这样的 Phing 循环

```
<target name="lessc">
  <exec command="lessc ${absolute-filename}" logoutput="false" output="${project.basedir}/public/assets/css/libraries/${filename}" />
</target>

<target name="build-in-loop">
  <foreach param="filename" absparam="absolute-filename" target="lessc">
    <fileset dir="${project.basedir}/assets/less/libraries/">
      <include name="*.less"/>
    </fileset>
  </foreach>
</target> 
```

在目标lessc中，如何从变量中提取不带扩展名的文件名`absolute-filename`？在上面的示例中，该`output`文件将具有扩展名`.less`- 显然不是我需要的。

我知道有一个任务少，我可以扩展 Phing 以支持这个特定的操作，但我想首先知道 Phing 是否允许对变量进行简单的字符串操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:26:51.440

找到了答案，不确定它是否是最好的解决方案，但对我有用：

只需要使用映射器标签

```
 <mapper type="glob" from="*.less" to="*"/> 
```

在`foreach`循环中，像这样：

```
<target name="build-in-loop">
  <foreach param="filename" absparam="absolute-filename" target="lessc">
    <fileset dir="${project.basedir}/assets/less/libraries/">
      <include name="*.less"/>
    </fileset>
  </foreach>
</target> 
```

此时，任务中的变量`${filename}`中将`target`出现不带扩展名的文件名。

# c# - RedisMqServer/RedisMqHost 是否应该为每个应用程序配置一次？

> ID：13498493
> 
> 赞同：1
> 
> 时间：2012-11-21T17:13:20.367
> 
> 标签：c#, .net, ninject, servicestack

我有一个 Web 应用程序和一个处理来自 Redis 的消息的后台服务。但是，我不确定是否`RedisMqServer`应该将 Web 应用程序配置为单例（我使用 Ninject 作为我的 IoC 容器）。出现的每个请求都需要将消息发送到后台服务（单向），但我不确定它是否应该按请求或每个应用程序实例化。

我在想容器会这样配置：

```
var clientManager = new PooledRedisClientManager();
var mqHost = new RedisMqHost(clientManager);

Bind<IMessageProducer>()
    .ToMethod(_ => mqHost.MessageFactory.CreateMessageProducer())
    .InRequestScope(); 
```

或者，`RedisMqHost/RedisMqServer`当消息是单向的时，可能没有必要？因此，将配置简化为：

```
var clientManager = new PooledRedisClientManager();

Bind<IMessageProducer>()
    .ToMethod(_ => new RedisMessageProducer(clientManager))
    .InRequestScope(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:11:04.573

`IMessageService`如果您的服务不需要直接访问主机，您实际上不需要注册。但是，如果您最终使用它，那么是的，它应该注册为单例。

唯一需要注册的是`IMessageFactory`. 在这种情况下**RequestScope**与 Ninject 的默认**TransientScope**相同，因为如果正在使用它，它只会在您的 Service 类中为每个请求解析一次。

`IMessageFactory`用于在基础服务[中](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Service.cs#L81)延迟加载，`IMessageProducer`以便您可以在服务中发布消息：

```
base.MessageProducer.Publish(new RequestDto()); 
```

注意：您正在使用在**单个**后台线程上`RedisMqHost`处理**所有**消息的代码。更改为使用将为每种消息类型创建一个后台线程，从而允许并行处理不同的消息。**`RedisMqServer`**

# c++ - MALLOC_CHECK_ 未报告违规行为

> ID：13498497
> 
> 赞同：3
> 
> 时间：2012-11-21T17:13:27.127
> 
> 标签：c++, malloc, new-operator

我已`MALLOC_CHECK_`通过将其设置为 1 启用（也尝试使用 2 和 3）但我没有看到它报告以下 c++ 程序的任何问题：

```
 int n = atoi(argv[1]);
  std::cout<<"n = "<<n<<std::endl;
  char *buf = new char[n];

  for (int i = 0;i < n*n; i++)
  {
    buf++;
    *buf = 'x';
  }

std::cout<<"done"<<std::endl; 
```

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T06:50:27.583

最后尝试调用“删除”。对我来说，gcc 只有在最后调用“free”时才开始标记错误。也许是一个实现细节。

# java - 在java中使用字符串输入退出do-while循环

> ID：13498502
> 
> 赞同：2
> 
> 时间：2012-11-21T17:13:34.257
> 
> 标签：java

我试图编写以下代码以允许在输入 E 时连续抛硬币并退出。不确定 do-while 循环是否是连续执行此操作的正确方法，或者我应该使用另一种方法。

```
do {
    guess = sc.next();
    tossGenerator(guess);
    }while(!guess.equals("E")||!guess.equals("e")); 
```

那么，我是不是因为无法跳出 do 循环或应该使用不同的方法而错误地对代码进行了表述。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T17:15:10.277

更改`&&`为`||`：

```
} while (!guess.equals("E") && !guess.equals("e")); 
```

或者像这样重新排列它：

```
} while (!(guess.equals("E") || guess.equals("e"))); 
```

或者，您可以使用[`String.equalsIgnoreCase()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equalsIgnoreCase%28java.lang.String%29)和消除[连词](http://en.wikipedia.org/wiki/Logical_conjunction)：

```
} while (!guess.equalsIgnoreCase("e")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T17:16:04.223

将其更改为

```
while(!guess.equalsIgnoreCase("E") ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T17:15:42.617

退出条件应使用 AND 运算符：

```
!guess.equals("E") && !guess.equals("e") 
```

否则任何`"E"`or`"e"`都会使至少其中一个变得微不足道，因为如果它是“e”，那么它就不是“E”，反之亦然。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T17:17:06.343

您的代码的一个问题是，`tossGenerator(guess)`即使`guess`是“e”，它也会调用。另一个是它`guess`总是不是“e”或不是“E”（不能同时是两者）。我会这样写：

```
guess = sc.next();
while (!"e".equalsIgnoreCase(guess)) {
    tossGenerator(guess);
    guess = sc.next();
} 
```

或者，使用`for`循环：

```
for (guess = sc.next(); !"e".equalsIgnoreCase(guess); guess = sc.next()) {
    tossGenerator(guess);
} 
```

# batch-file - 为目录中具有特定扩展名的多个文件创建的日期时间前缀文件

> ID：13498503
> 
> 赞同：2
> 
> 时间：2012-11-21T17:13:48.873
> 
> 标签：batch-file, command-prompt, file-rename

我想重命名目录中的所有 sql 文件，方法是在它们前面加上文件的创建日期和时间。

我是命令提示符的新手，从我阅读的内容中得出以下代码，但它不起作用。

```
for /f "delims=*" %%I in ('dir *.sql /b /s') do (    
set dt=%%~tI     
for /f "delims=/: " %%a in ('%dt%') do (set mydate=%%a)     
for /f "delims=/: " %%b in ('%dt%') do (set mytime=%%b)     
ren %%~nI.sql %mydate%%mytime%_%%~nI.sql) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T04:43:42.063

如果批处理文件与 sql 文件位于同一目录中，则这样的事情应该可以工作：

```
@echo off
SETLOCAL ENABLEDELAYEDEXPANSION
for /f "tokens=*" %%f in ('dir /b *.sql') do (
  set createtime=%%~tf
  set createtime=!createtime:/=!
  set createtime=!createtime::=!
  rename "%%f" "!createtime! %%f"
) 
```

第 2 行和第 3`set createtime`行分别用 null 替换`/`和`:`（分别），因为它们是文件名的无效字符。`-`如果您愿意，您可以通过将此值插入`=`字符的右侧，将它们替换为其他内容（例如）。

请注意，`%%~t`此处（以及您的示例中）使用的修饰符实际上获取文件的*修改*时间，而不是*创建*时间。如果您的 sql 文件在创建后被修改，这只会引起注意。

此外，如果脚本多次执行，这里没有什么可以阻止它为相同的文件添加额外的时间戳，因此请记住这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T05:10:44.600

ren "%file" "%date:~0,2%.%date:~3,2%.%date:~6,4%-%time-somename.sql"

# javascript - 防止退格按钮在 Sharepoint 2010 和 IE 中导航回来

> ID：13498504
> 
> 赞同：2
> 
> 时间：2012-11-21T17:13:50.090
> 
> 标签：javascript, internet-explorer, sharepoint-2010

作为用户要求，我必须禁用退格按钮在历史记录中导航。我做了以下代码

```
 //Bind back nutton to prevent escaping the page with backspace
$j(document).unbind('keydown').bind('keydown', function (event) {
  var doPrevent = false;

  if (event.keyCode === 8) 
  {
      if(event.target == document.body){
          if(event.preventDefault()){ event.preventDefault(); }
          event.stopEvent();
          event.returnValue = false;
      }
  }
}); 
```

这在除 IE7 和 IE8 之外的所有浏览器中都能完美运行。我无法将输入类型绑定为异常，因为 SharePoint 中的内容编辑器允许修改元素 div、段落等中的文本。该解决方案在 IE8 中不起作用，因为 event.target 返回鼠标悬停时存在的元素没有具有焦点的控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T17:01:52.880

自己解决，结案。

编辑：2012 年使用 SharePoint 2010 和 jquery 1.x，不确定今天。

```
//Bind back button to prevent escaping the page with backspace
$(document).unbind('keydown').bind('keydown', function (event) {
    if (event.keyCode === 8) 
    {
     var doPrevent = true;
     //Chrome, FF, Safari
     if(event.target == document.body){
      doPrevent = true;
     }
     //IE
     else
     {
      var nodeName = event.target.nodeName.toLowerCase();
      if((nodeName == "input" && event.target.type == "text") || nodeName == "textarea")
      {
       doPrevent = false;
      }
      var SPEditTabInstance = $(document).find("li[id='Ribbon.EditingTools']");
      if(SPEditTabInstance != "undefined" && SPEditTabInstance != null && $(SPEditTabInstance).children().length > 0){
       doPrevent = false;
      }
     }

     if(doPrevent)
     {
      //Chrome, FF, Safari
      if(event.preventDefault()){ event.preventDefault(); }
      //IE
      else
      {
       event.returnValue = false;
      }
     }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-17T23:52:48.660

我建议对 Machinegon 的修复进行调整。如果用户在文本类型的只读输入控件中单击退格键，该代码还应防止默认行为。

```
if ((nodeName === "input" && event.target.type === "text") || 
     nodeName === "textarea") {
     doPrevent = event.target.readOnly;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T00:42:54.963

尝试向创建需求的人推回，从可用性的角度来看，打破*所有*浏览器无处不在且重要的功能并不是一个特别好的想法。这样做的成本（包括向用户解释为什么他们的浏览器“不再工作”的时间）将大大超过让后退按钮偶尔有点烦人的成本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-31T09:14:22.023

Machinegon 的答案效果很好，我只是添加它来处理另一个案例。

如果输入框是`readonly`或`disabled`，并且您在它们上按退格键，则它会转到上一页。因此，以下代码将用于处理这种情况：

```
//Bind back button to prevent escaping the page with backspace
$(document).unbind('keydown').bind('keydown', function(event) {
    if (event.keyCode === 8) {
        var doPrevent = true;
        //Chrome, FF, Safari
        if (event.target == document.body) {
            doPrevent = true;
        }
        //IE
        else {
            var nodeName = event.target.nodeName.toLowerCase();
            if (((nodeName == "input" && event.target.type == "text") || nodeName == "textarea") 
              && !event.target.disabled && !event.target.readOnly) {
                doPrevent = false;
            }
        }

        if (doPrevent) {
            //Chrome, FF, Safari
            if (event.preventDefault()) {
                event.preventDefault();
            }
            //IE
            else {
                event.returnValue = false;
            }
        }
    }
}); 
```

# php - 过滤 PHP 数组并考虑日期范围

> ID：13498508
> 
> 赞同：2
> 
> 时间：2012-11-21T17:14:02.217
> 
> 标签：php, arrays, date, filter, merge

我有以下数组：

```
Array
(
    [0] => Array
    (
        [date] => 2012-01-10        
    )
    [1] => Array
    (
        [date] => 2012-01-11
    )
    [2] => Array
    (
        [date] => 2012-01-12
    )
    [3] => Array
    (
        [date] => 2012-01-15
    )
    [4] => Array
    (
        [date] => 2012-01-18
    )
    [5] => Array
    (
        [date] => 2012-01-19
    )
) 
```

我想按他的范围结合日期。最后我需要类似下面的东西

```
Array
(
    [0] => Array
    (
        [from] => 2012-01-10
        [till] => 2012-01-12
    )
    [1] => Array
    (
        [from] => 2012-01-15
        [till] => 2012-01-15
    )
    [2] => Array
    (
        [from] => 2012-01-18
        [till] => 2012-01-19
    )
) 
```

但它也应该支持广泛的范围。2012-01-22 到 2012-05-14 之类的东西。任何人的想法或提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-07T20:29:26.903

您的输出与上例中的输入不包含相同的日期。起止日期是如何决定的？我们是否只是简单地遍历数组并在从到之间交替？

```
function from_till($dates = array()){
  $sorted = array();
  for($i=0; $i<count($dates)-2; $i+=2){
    $sorted[] = array('from' => $dates[$i], 'till' => $dates[$i+1];
  }
  return $sorted;
} 
```

输入：

```
$input = Array
(
    [0] => Array
    (
        [date] => 2012-01-10        
    )
    [1] => Array
    (
        [date] => 2012-01-11
    )
    [2] => Array
    (
        [date] => 2012-01-12
    )
    [3] => Array
    (
        [date] => 2012-01-15
    )
    [4] => Array
    (
        [date] => 2012-01-18
    )
    [5] => Array
    (
        [date] => 2012-01-19
    )
); 
```

输出：

```
 $output = from_till($input);
  print_r($output); 
```

print_r 的输出

```
Array
(
    [0] => Array
    (
        [from] => 2012-01-10
        [till] => 2012-01-11
    )
    [1] => Array
    (
        [from] => 2012-01-12
        [till] => 2012-01-15
    )
    [2] => Array
    (
        [from] => 2012-01-18
        [till] => 2012-01-19
    )
); 
```

# php - json_encode 函数的奇怪行为

> ID：13498511
> 
> 赞同：0
> 
> 时间：2012-11-21T17:14:16.130
> 
> 标签：php

我有这个正常的数组名称 $arr.. 并尝试使用 array_push() 函数在数组上推送一些东西.. 就像`array_push( $arr['alerts_data'], 999 );` 它产生这个输出一样：

```
Array
(
    [alerts_data] => Array
        (
            [0] => 169
            [1] => 175
            [2] => 111
            [3] => 48
            [4] => 999
        )

) 
```

当我使用 json_encode 我得到：

```
{"alerts_data":[169,175,111,48,111,999]} 
```

但是，当我尝试从 $arr 中取消设置（）时，例如：

```
unset( $arr['alerts_data'][4] );// will remove removes the 999 
```

然后再次使用 json_encode，我得到了这个 json 对象

```
{"alerts_data":{"0":169,"1":175,"2":111,"3":48}} 
```

这里有什么问题？你能告诉？我想通过使用 unset() 函数来实现上面第一个编码的 json。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T17:16:57.733

是的，这是因为数组键不再是连续的，所以它被当作一个关联数组来处理，而 PHP 的关联数组变成了 JavaScript 对象，因为 JavaScript 没有关联数组。

用于**[`array_splice()`](http://php.net/manual/en/function.array-splice.php)**从数组中干净地删除元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T17:21:48.133

您的键中有一个间隙（从 3 到 5），因此*必须*创建一个对象才能使其有效。两种可能的解决方案：

```
array_splice($arr['alerts_data'], 4, 1);

unset($arr['alerts_data'][4]);
$arr['alerts_data'] = array_values($arr['alerts_data']); 
```

# javascript - 使用 JavaScript 显示/隐藏 div 内容

> ID：13498512
> 
> 赞同：2
> 
> 时间：2012-11-21T17:14:17.867
> 
> 标签：javascript, html, asp.net, html-table

我需要一点帮助。我正在尝试在选择跳转菜单时显示/隐藏 div 内容。我似乎无法让代码工作。这是我的代码：

```
JS:

function toggleOther(chosen){
if (chosen == 'cat') {
  document.getElementById('categories').style.visibility = 'visible';
} else {
  document.getElementById('categories').style.visibility = 'hidden';
  document.myform.other.value = '';
}

And my page:

<td class="formlabel" nowrap="nowrap"><form name="Users">Users:</td>
<td nowrap="nowrap" class="formlabel"><select name="fieldname" size="1" onchange="toggleOther( document.myform.values.options[document.myform.values.selectedIndex ].value );" class="select" >
   <option selected="selected">Choose</option>
   <option>All Users</option>
   <option value="cat">User 1</option>
   <option value="cat">User 2</option>
   <option value="cat">User 3</option>
   <option value="cat">User 4</option>
   <option value="cat">User 5</option>
     </select></td>
<div style="opacity: 0.3; background: #fff; display:none">
<td width="380" valign="top" class="center">
<table width="360" class="imagetable" cellpadding="0" cellspacing="0" id="categories">
   <tr>
     <th colspan="2" nowrap="nowrap" class="reportname">Categories</th>
   </tr>
   <tr>
     <td class="formlabel" nowrap="nowrap"><form name="Exams">Exams</td>
     <td nowrap="nowrap" class="formlabel"><select name="fieldname" size="1" class="select">
         <option value="#" selected="selected" target="_blank">Choose</option>
         <option value="">All Exams</option>
         <option value="">Exam 1</option>
         <option value="">Exam 2</option>
         <option value="">Exam 3</option>
         <option value="">Exam 4</option>
         <option value="">Exam 5</option>
        </select></td>
       </tr>
   </form>
       <tr>
        <td nowrap="nowrap" class="formlabel">Include Categories</td>
        <td nowrap="nowrap" class="formlabel"><input type="text" name="textfield2" id="textfield2" class="fields" size="4" />or more items assigned</td>
       </tr>
       <tr>
         <td class="formlabel" nowrap="nowrap">Display Categories</td>
         <td nowrap="nowrap" class="formlabel">that appear 
           <input type="text" name="textfield3" id="textfield3" class="fields" size="4" />or more exams</td>
        </tr>
      </table> 
```

这里有什么帮助吗？我似乎无法让它工作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:17:42.450

隐藏：

```
document.getElementById('categories').style.display="none" 
```

以显示：

```
document.getElementById('categories').style.display="" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T17:23:30.927

最好使用 jquery 的 .toggle() 方法。您可以节省时间并且更好，因为您可以制作效果

[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

你可以做

```
$(#categories).toggle(); //to show or hide the id = "categories" 
```

# python - 按钮的单按钮事件处理程序

> ID：13498513
> 
> 赞同：4
> 
> 时间：2012-11-21T17:14:19.740
> 
> 标签：python, qt, button, pyqt4, signals-slots

我想创建一个带有一些按钮的 GUI 应用程序，并希望以相同的方式处理按钮按下事件（即所有按键的单个事件句柄）。但我不明白 button_hanlder 如何理解按下了哪个按钮。

这是代码

```
from PyQt4 import QtCore, QtGui

try:
    _fromUtf8 = QtCore.QString.fromUtf8
except AttributeError:
    _fromUtf8 = lambda s: s

class Ui_MainWindow(object):
    def setupUi(self, MainWindow):
        MainWindow.setObjectName(_fromUtf8("MainWindow"))
        MainWindow.resize(800, 600)
        self.centralwidget = QtGui.QWidget(MainWindow)
        self.centralwidget.setObjectName(_fromUtf8("centralwidget"))
        self.pushButton = QtGui.QPushButton(self.centralwidget)
        self.pushButton.setGeometry(QtCore.QRect(350, 190, 98, 27))
        self.pushButton.setObjectName(_fromUtf8("pushButton"))
        self.pushButton_2 = QtGui.QPushButton(self.centralwidget)
        self.pushButton_2.setGeometry(QtCore.QRect(240, 220, 98, 27))
        self.pushButton_2.setObjectName(_fromUtf8("pushButton_2"))
        self.pushButton_3 = QtGui.QPushButton(self.centralwidget)
        self.pushButton_3.setGeometry(QtCore.QRect(350, 250, 98, 27))
        self.pushButton_3.setObjectName(_fromUtf8("pushButton_3"))
        self.pushButton_4 = QtGui.QPushButton(self.centralwidget)
        self.pushButton_4.setGeometry(QtCore.QRect(460, 220, 98, 27))
        self.pushButton_4.setObjectName(_fromUtf8("pushButton_4"))
        MainWindow.setCentralWidget(self.centralwidget)
        self.menubar = QtGui.QMenuBar(MainWindow)
        self.menubar.setGeometry(QtCore.QRect(0, 0, 800, 25))
        self.menubar.setObjectName(_fromUtf8("menubar"))
        self.menuFile = QtGui.QMenu(self.menubar)
        self.menuFile.setObjectName(_fromUtf8("menuFile"))
        MainWindow.setMenuBar(self.menubar)
        self.statusbar = QtGui.QStatusBar(MainWindow)
        self.statusbar.setObjectName(_fromUtf8("statusbar"))
        MainWindow.setStatusBar(self.statusbar)
        self.menubar.addAction(self.menuFile.menuAction())

        self.retranslateUi(MainWindow)
        QtCore.QObject.connect(self.pushButton_2, QtCore.SIGNAL(_fromUtf8("pressed()")), self.button_handler)
        QtCore.QObject.connect(self.pushButton, QtCore.SIGNAL(_fromUtf8("pressed()")), self.button_handler)
        QtCore.QObject.connect(self.pushButton_4, QtCore.SIGNAL(_fromUtf8("pressed()")), self.button_handler)
        QtCore.QObject.connect(self.pushButton_3, QtCore.SIGNAL(_fromUtf8("pressed()")), self.button_handler)
        QtCore.QMetaObject.connectSlotsByName(MainWindow)

    def retranslateUi(self, MainWindow):
        MainWindow.setWindowTitle(QtGui.QApplication.translate("MainWindow", "MainWindow", None, QtGui.QApplication.UnicodeUTF8))
        self.pushButton.setText(QtGui.QApplication.translate("MainWindow", "Up", None, QtGui.QApplication.UnicodeUTF8))
        self.pushButton_2.setText(QtGui.QApplication.translate("MainWindow", "Right", None, QtGui.QApplication.UnicodeUTF8))
        self.pushButton_3.setText(QtGui.QApplication.translate("MainWindow", "Down", None, QtGui.QApplication.UnicodeUTF8))
        self.pushButton_4.setText(QtGui.QApplication.translate("MainWindow", "Left", None, QtGui.QApplication.UnicodeUTF8))
        self.menuFile.setTitle(QtGui.QApplication.translate("MainWindow", "File", None, QtGui.QApplication.UnicodeUTF8))

    def button_handler(self):
        # Which button was pressed?

if __name__ == "__main__":
    import sys
    app = QtGui.QApplication(sys.argv)
    MainWindow = QtGui.QMainWindow()
    ui = Ui_MainWindow()
    ui.setupUi(MainWindow)
    MainWindow.show()
    sys.exit(app.exec_()) 
```

我想在 button_handler 中确定按下了哪个按钮，例如通过按钮标题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T18:26:47.600

[QButtonGroup](http://qt-project.org/doc/qt-4.8/qbuttongroup.html)就是为此而设计的。它适用于任何类型的继承按钮`QAbstractButton`，例如`QPushButton`, `QRadioButton`,`QCheckBox`等。

[只需使用addButton](http://qt-project.org/doc/qt-4.8/qbuttongroup.html#addButton)将所有按钮添加到按钮组，然后将[buttonClicked](http://qt-project.org/doc/qt-4.8/qbuttongroup.html#buttonClicked)信号连接到处理程序。

注意：将所有按钮放在容器小部件中可能是个好主意，例如 a `QGroupBox`，`QFrame`或者只是一个普通的`QWidget`。这将允许您遍历容器的子项并自动将所有按钮添加到按钮组。

示例代码：

*`btngroup.py`*：

```
from PyQt4 import QtGui, QtCore
from btngroup_ui import Ui_ButtonGroup

class Window(QtGui.QWidget, Ui_ButtonGroup):
    def __init__(self):
        QtGui.QWidget.__init__(self)
        self.setupUi(self)
        self.buttonGroup = QtGui.QButtonGroup(self)
        for button in self.buttonBox.findChildren(QtGui.QAbstractButton):
            self.buttonGroup.addButton(button)
        self.buttonGroup.buttonClicked.connect(self.handleButtonClicked)

    def handleButtonClicked(self, button):
        print('"%s" was clicked' % button.text())

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.show()
    sys.exit(app.exec_()) 
```

*`btngroup_ui.py`*：

```
# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'btngroup.ui'
#
# Created: Wed Nov 21 17:50:42 2012
#      by: PyQt4 UI code generator 4.9.5
#
# WARNING! All changes made in this file will be lost!

from PyQt4 import QtCore, QtGui

try:
    _fromUtf8 = QtCore.QString.fromUtf8
except AttributeError:
    _fromUtf8 = lambda s: s

class Ui_ButtonGroup(object):
    def setupUi(self, ButtonGroup):
        ButtonGroup.setObjectName(_fromUtf8("ButtonGroup"))
        ButtonGroup.resize(240, 167)
        self.horizontalLayout = QtGui.QHBoxLayout(ButtonGroup)
        self.horizontalLayout.setObjectName(_fromUtf8("horizontalLayout"))
        self.buttonBox = QtGui.QWidget(ButtonGroup)
        self.buttonBox.setObjectName(_fromUtf8("buttonBox"))
        self.verticalLayout = QtGui.QVBoxLayout(self.buttonBox)
        self.verticalLayout.setMargin(0)
        self.verticalLayout.setObjectName(_fromUtf8("verticalLayout"))
        self.buttonA = QtGui.QPushButton(self.buttonBox)
        self.buttonA.setObjectName(_fromUtf8("buttonA"))
        self.verticalLayout.addWidget(self.buttonA)
        self.buttonB = QtGui.QPushButton(self.buttonBox)
        self.buttonB.setObjectName(_fromUtf8("buttonB"))
        self.verticalLayout.addWidget(self.buttonB)
        self.buttonC = QtGui.QPushButton(self.buttonBox)
        self.buttonC.setObjectName(_fromUtf8("buttonC"))
        self.verticalLayout.addWidget(self.buttonC)
        self.buttonD = QtGui.QPushButton(self.buttonBox)
        self.buttonD.setObjectName(_fromUtf8("buttonD"))
        self.verticalLayout.addWidget(self.buttonD)
        self.horizontalLayout.addWidget(self.buttonBox)

        self.retranslateUi(ButtonGroup)
        QtCore.QMetaObject.connectSlotsByName(ButtonGroup)

    def retranslateUi(self, ButtonGroup):
        ButtonGroup.setWindowTitle(QtGui.QApplication.translate("ButtonGroup", "Button Group", None, QtGui.QApplication.UnicodeUTF8))
        self.buttonA.setText(QtGui.QApplication.translate("ButtonGroup", "Button A", None, QtGui.QApplication.UnicodeUTF8))
        self.buttonB.setText(QtGui.QApplication.translate("ButtonGroup", "Button B", None, QtGui.QApplication.UnicodeUTF8))
        self.buttonC.setText(QtGui.QApplication.translate("ButtonGroup", "Button C", None, QtGui.QApplication.UnicodeUTF8))
        self.buttonD.setText(QtGui.QApplication.translate("ButtonGroup", "Button D", None, QtGui.QApplication.UnicodeUTF8)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:20:05.040

您可能想要使用`QtCore.QSignalMapper`.

有关详细说明，请参阅[http://srinikom.github.com/pyside-docs/PySide/QtCore/QSignalMapper.html](http://srinikom.github.com/pyside-docs/PySide/QtCore/QSignalMapper.html)。

基本上，它允许您将字符串值关联到按钮和插槽之间的每个连接，因此您可以通过分析信号的字符串参数的内容来检查单击来自哪个按钮。

# php - 如何要求作曲家的叉子？

> ID：13498519
> 
> 赞同：197
> 
> 时间：2012-11-21T17:14:40.627
> 
> 标签：php, composer-php

这是我的`composer.json`，我想在 Github 上使用 Nodge 的 lessphp 项目的 fork

```
 "repositories": [{
    "type": "package",
    "package": {
        "version": "dev-master",
        "name": "nodge/lessphp",
        "source": {
            "url": "https://github.com/Nodge/lessphp.git",
            "type": "git",
            "reference": "master"
        },
        "autoload": {
            "classmap": ["lessc.inc.php"]
        }
    }
}],
"require": {
    "php": ">=5.3.3",
    "nodge/lessphp": "dev-master"
}, 
```

但是当我运行时出现此错误`composer update`：

> nodge/lessphp dev-master -> 找不到匹配的包。

我不知道如何正确地要求这个叉子。

* * *

## 回答 #1

> 赞同：264
> 
> 时间：2012-11-21T19:29:34.520

最常见（也是最简单）的方法是使用 VCS 存储库。

> 您所要做的就是将您的 fork 添加为存储库并更新版本约束以指向您的自定义分支。您的自定义分支名称**必须**以**`dev-`**.

假设您分叉了**monolog/monolog**并创建了一个名为**bugfix**的分支，您将像这样更新您的 composer.json：

```
{
    "repositories": [
        {
            "type": "vcs",
            "url": "https://github.com/igorw/monolog"
        }
    ],
    "require": {
        "monolog/monolog": "dev-bugfix"
    }
} 
```

请注意，除了指定错误修复分支外，您不会更改 require 语句。您仍然引用上游包 ( `monolog/monolog`)，*而不是*您的个人 fork ( `igorw/monolog`)，并且分支名称带有前缀`dev-`。[您可以在文档](http://getcomposer.org/doc/05-repositories.md#vcs)中阅读详细信息

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-11-22T08:49:56.193

使用 VCS 工作：

```
"name": "test/test",
"repositories": [{
    "type": "vcs",
    "url": "http://github.com/Nodge/lessphp"
}],
"require": {
    "leafo/lessphp": "dev-master"
}, 
```

但是如果我需要一个具有 this 的模块`composer.json`，它就不起作用。它安装原始项目，而不是 fork。

## 例子

```
"name": "example/example",
"require": {
    "test/test": "dev-master"
}, 
```

我应该再次提到存储库。这正常吗？

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2015-02-12T14:39:07.963

如果您无法让@Neilime 回答为您工作，请确保您的 fork 使用不同的分支。

例如，将您的更改推送到分支上名为 的分支`my-bugfix`，不要`dev-`在分支名称中添加前缀，但在您的 composer.json 中您必须添加它。您的作曲家文件将如下所示：

```
"repositories":
[
    {
        "type": "vcs",
        "url": "http://github.com/yourname/packageName"
    }
],
"require": {
    "owner/packageName": "dev-my-bugfix"
}, 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2018-05-13T14:38:53.570

我尝试了很多选择，但在我收到这篇文章后，我看到了光线，而且效果很好。

这是你必须做的：

1- 分叉存储库

2-创建一个分支并进行所需的修改。

3-将存储库标签添加到您的 composer.json

```
"repositories": [

        {
            "type": "vcs",
            "url": "https://github.com/user/yourforkname"
        }
    ] 
```

4-在项目内的命令行中，需要你的 fork，如下所示：

```
composer require vendor/packagename:dev-branchname 
```

瞧！

你有你的叉子版本工作

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-01-15T13:26:59.493

根据 Composer 文档 [http://getcomposer.org/doc/05-repositories.md#vcs](http://getcomposer.org/doc/05-repositories.md#vcs)`require` ，在（在您的情况下为“nodge/lessphp” ）中指定原始存储库（而不是 fork）就足够了。Composer 然后将安装您的 fork（查看供应商中的代码）

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-08-08T07:50:05.983

所以，现在是 2019 年，这里的大部分答案已经是正确的。

但是，如果您发现自己需要 fork 的**特定分支**（您创建的），请先让 composer 列出可用的版本/标签。这为我节省了很多时间。

一个完整的`spatie/laravel-backup`包示例。

首先，将`repositories`key 添加到 composer.json。使用你的 fork 的 url

```
"repositories": [{
   "type": "vcs",
   "url": "https://github.com/holymp2006/laravel-backup"
 }] 
```

获取可用的版本/标签

```
composer show "spatie/laravel-backup" --all 
```

在终端输出中选择您想要的版本`versions`，然后要求该版本

```
composer require spatie/laravel-backup:v5.x-dev 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-02-20T12:10:18.923

我通常在包定义中添加一个“dist”节点。以这种方式使用它我从来没有遇到过问题。

不过，我不记得我是从哪里得到这个技巧的，以便进一步解释。

```
{
    "repositories": [
        {
            "type": "package",
            "package": {
                "version": "dev-master",
                "name": "nodge/lessphp",
                "source": {
                    "url": "https://github.com/Nodge/lessphp.git",
                    "type": "git",
                    "reference": "master"
                },
                "autoload": {
                    "classmap": ["lessc.inc.php"]
                },
                "dist": {
                    "url": "https://github.com/Nodge/lessphp/archive/master.zip",
                    "type": "zip"
                }
            }
        }
    ],
    "require": {
        "nodge/lessphp": "*"
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-14T01:46:44.543

当我有前任时，接受的答案和澄清的答案对我来说都很好。一个**应用程序**，它需要我已经分叉和修改的依赖项。在这种情况下，我仍然会使用公认的答案。

然而，当我有一个**包**时，我想在 Packagist 上分发自己，该包还包含一个分叉和修改的依赖项，这种方法不再有效。

如果有人尝试使用此配置进行安装，他们仍然会收到相同的 `-> no matching package found.`错误消息。

[这个答案](https://stackoverflow.com/questions/28567656/composer-no-matching-package-found)和[链接的 Composer 文档](https://getcomposer.org/doc/faqs/why-can%27t-composer-load-repositories-recursively.md)表明 repo 设置必须是顶级的`composer.json`。这意味着，安装此软件包的人也必须将该配置添加到他们的`composer.json`文件中——这给安装过程增加了很多不必要的混乱。

相反，我将我的 fork 发布到了 Packagist。我的理解是，虽然叉子不受欢迎，但这将被认为是一个维护的叉子，因为我将它用于这个新包。

希望这对任何对他们想要分发的包或库有此问题的人有所帮助。

# forms - Spring中指向单个路径的多个Form元素

> ID：13498522
> 
> 赞同：2
> 
> 时间：2012-11-21T17:14:45.910
> 
> 标签：forms, spring

我做了一些搜索，似乎没有提出这个特定的问题（如果我弄错了，我道歉）。

我正在处理的应用程序处理一组数据的报告，报告按客户端和报告类别分开。

我遇到的问题是每个作业的客户和类别的数量各不相同，因此我需要根据每个作业的要求动态生成以下表单元素。

```
<!-- CLIENT NAME -->
Inclusion Client Name:
    <form:errors path="clientName"  cssClass="error"/><br />
    <form:input path="clientName" />       
<br /><br />

<!-- REPORTING CCATEGORIES -->
Reporting Categories:
    <form:errors path="reportingCategories"  cssClass="error"/><br />
    <form:input path="reportingCategories" />       
<br /><br />
<!-- comma separated list of categories --> 
```

在测试一些理论的过程中，我了解到可以将多个表单元素指向同一个路径，Spring 会将这些值连接成一个逗号分隔的列表。我唯一关心的是这些表单元素的读取顺序。

```
<!-- CLIENT NAME A -->
Inclusion Client Name:
    <form:errors path="clientName"  cssClass="error"/><br />
    <form:input path="clientName" />       
<br /><br />

<!-- REPORTING CATEGORIES A -->
Reporting Categories:
    <form:errors path="reportingCategories"  cssClass="error"/><br />
    <form:input path="reportingCategories" />       
<br /><br />
<!-- comma separated list of categories -->

<!-- CLIENT NAME B -->
Inclusion Client Name:
    <form:errors path="clientName"  cssClass="error"/><br />
    <form:input path="clientName" />       
<br /><br />

<!-- REPORTING CATEGORIES B -->
Reporting Categories:
    <form:errors path="reportingCategories"  cssClass="error"/><br />
    <form:input path="reportingCategories" />       
<br /><br />
<!-- comma separated list of categories --> 
```

在上面的第二个代码片段中，我的测试用例在 CLIENT NAME B 之前读取了 CLIENT NAME A（基本上是从上到下向下处理页面）。会一直这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:43:13.823

是的，顺序将始终是表单中定义表单字段的顺序。

当定义具有相同路径的多个字段时，您还可以在请求方法中将它们绑定为数组，例如：

```
@Controller
public class YourController {
    @RequestMapping(....)
    public String foo(@RequestParam String clientName[], @RequestParam String reportingCategories[], BindingResult result) {
        ...
    }
} 
```

# jquery - jQuery分页下一个和上一个

> ID：13498523
> 
> 赞同：1
> 
> 时间：2012-11-21T17:14:47.290
> 
> 标签：jquery, pagination, next

我想实现一个典型的分页行为，所以当我单击**下**一个时，会向左和向右滚动**。**

目前有效，但不会移动到下一个数字。

希望下面的PNG更有意义

![在此处输入图像描述](../Images/d31050e05d7907e21755bfe4751b7950.png) 我的演示很清楚，但我不能做更多的事情。

[http://jsfiddle.net/B5zCu/99/](http://jsfiddle.net/B5zCu/99/)

**我的jQuery**

```
$('ol > li').each(function() {
    $(this).prepend("<a>" + ($(this).index() +1) +  "</a>");

    $('ol > li').eq(0).addClass('first-page');
    $('ol > li').last().addClass('last-page');
    $('ol > li').eq(-2).addClass('space').children('a').text('...');
    $('ol > li').eq(1).css('margin-left', '40px');
    $('ol > li').eq(6).addClass('seven').css('margin-right', '100px');  

});

$('.pagination li').on('click', function(event) {
  event.preventDefault();
  var $this = $(this),
      $pagination = $this.parent(),
      $pages = $pagination.children(),
      $active = $pagination.find('.active');

  if($this.hasClass('a.prev')) {
    if ($pages.index($active) > 0) {
      $active.removeClass('active').prev().addClass('active');
    }
  } else if($this.hasClass('a.next')) {
    if ($pages.index($active) < $pages.length - 1) {
      $active.removeClass('active').next().addClass('active');
    }
  } else {
    $this.addClass('active').siblings().removeClass('active');
  }

  $active = $pagination.find('.active');

  $('a.prev')[$pages.index($active) == 0 ? 'addClass' : 'removeClass']('disabled');
  $('a.next')[$pages.index($active) == $pages.length - 1 ? 'addClass' : 'removeClass']('disabled');

});

$('.pagination li:eq(0)').trigger('click'); 
```

# windows-runtime - 当 TextBlock 的文本发生更改时如何通知我

> ID：13498527
> 
> 赞同：0
> 
> 时间：2012-11-21T17:13:54.347
> 
> 标签：windows-runtime

在 WinRT 中，有没有办法在 TextBlock 的文本发生更改时得到通知？

我没有看到 TextChanged 事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:00:06.373

TextBlocks 不可编辑（只读）。因此，没有像 TextBox 那样的 TextChanged 事件。如果您需要知道文本何时更改，则需要将侦听器连接到数据源（例如可能通过 PropertyChanged）。

# php - 要使用哪些型号？MVC，Joomla

> ID：13498537
> 
> 赞同：0
> 
> 时间：2012-11-21T17:15:17.543
> 
> 标签：php, joomla, joomla2.5, directory-structure

我有一个 Joomla 组件。

***后端文件结构***

![在此处输入图像描述](../Images/3130c4129e9e8eafbcd926a836fa1e89.png)

***前端文件结构***

![在此处输入图像描述](../Images/eb23180dc954174b2a829dc1f51dd9fc.png)

在 Joomla 的前端组件中，我们可以使用后端模型而不是前端模型。据我所知，逻辑保留在模型中。因此，如果我们使用单独的前端和后端模型，并且如果我们遇到逻辑更改，我们必须更改两个地方而不是一个。但是，如果我们也将后端模型用于前端，我们只需在一处更改逻辑。它更容易维护。

哪个更好的方法更好？为前端创建单独的模型或使用现有的后端模型？

Joomla 的标准是什么？行业标准是什么？我应该使用哪种方法，为什么？优缺点都有什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:14:35.697

这是一个很好的问题。您正在上升的问题是发生的代码重复问题。

如果模型完全相同并且代码可以重用，请查看问题 [Joomla 2.5 ― using administrator components controllers in frontend part of component](https://stackoverflow.com/questions/13442052/joomla-2-5-using-administrator-components-controllers-in-frontent-part-of-comp/13450106#13450106)。

我认为确实是代码维护的问题。如果我在某个地方修复了一个我应该永远记住我也需要在另一个地方修复的错误，我会发现它总是很烦人。

# compression - 霍夫曼解压缩

> ID：13498540
> 
> 赞同：0
> 
> 时间：2012-11-21T17:15:27.313
> 
> 标签：compression, huffman-code

好吧，我正在尝试实现将决定是否将树匹配到压缩文件的功能，好吧，“尝试”是一点“误传”，我只是不知道如何实现这样的功能。我无法弄清楚，因为有时压缩文件的字节可以与其他文件中的树匹配，欢迎任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T04:03:00.257

我不明白你想问什么。

我建议阅读霍夫曼压缩——也许是维基百科：[霍夫曼编码](http://en.wikipedia.org/wiki/Huffman_coding)和它链接到的一些页面。然后编辑您的问题以描述您想要理解的内容。你能用一个实际的问号吗？

霍夫曼压缩算法通常会生成压缩文件，其中包含一个“标题”，其中包含重建树所需的所有信息，以及一个包含压缩比特流的“主体”。

如果你将一个压缩文件的“头”与其他压缩文件的“正文”拼接起来，解压器将无法判断出任何问题——解压器会很高兴地产生“解压后的”乱码。

每个可能的 Huffman 树都可以“解码”每个可能的位序列。但是某些压缩比特流的*正确*原始文件只能由一棵*正确*的霍夫曼树产生。

仅给定“主体”压缩比特流和“标头”（或从该标头重构的完整霍夫曼树），通常无法确定它们是否是来自单个真实压缩文件的真实主体和真实标头，或者一个来自一个压缩文件，另一个来自另一个压缩文件。

# scala - 在 heroku 上部署 Play2.1-RC1 会出错

> ID：13498542
> 
> 赞同：1
> 
> 时间：2012-11-21T17:15:33.240
> 
> 标签：scala, heroku, playframework-2.0, scala-2.10, playframework-2.1

将基于 Play2.1-RC1 的应用程序部署到 Heroku 时遇到此错误

```
[info] 'compiler-interface' not yet compiled for Scala 2.10.0-RC1\. Compiling...
       sbt appears to be exiting abnormally.
         The log file for this session is at /tmp/sbt6398446576215517800.log
       java.lang.OutOfMemoryError: PermGen space
        at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
        at java.util.concurrent.FutureTask.get(FutureTask.java:111)
        at sbt.ConcurrentRestrictions$$anon$4.take(ConcurrentRestrictions.scala:195)
        at sbt.Execute.next$1(Execute.scala:85)
        at sbt.Execute.processAll(Execute.scala:88)
        ...

            ...
     Error during sbt execution: java.lang.OutOfMemoryError: PermGen space  !  
     Failed to build app with sbt  !     
     Heroku push rejected, failed to compile Play 2.0 - scala app 
```

build.properties

```
sbt.version=0.12.1 
```

plugins.sbt 文件

```
// Comment to get more information during initialization
logLevel := Level.Warn

// The Typesafe repository 
resolvers += "Typesafe repository" at "http://repo.typesafe.com/typesafe/releases/"

// Use the Play sbt plugin for Play projects
addSbtPlugin("play" % "sbt-plugin" % "2.1-RC1") 
```

Build.scala

导入 sbt._ 导入 PlayProject._

```
object ApplicationBuild extends Build {

  val appName = "myappname"
  val appVersion = "1.0-SNAPSHOT"

  val appDependencies = Seq(
    // Add your project dependencies here,
    jdbc,filters,
    "org.squeryl" % "squeryl_2.10.0-RC2" % "0.9.5-4",
    "postgresql" % "postgresql" % "9.1-901-1.jdbc4"
  )

  val main = play.Project(appName, appVersion, appDependencies).settings(
    // Add your own project settings here
  )

} 
```

**更新** 将 JAVA_OPTS 和 SBT_OPTS 从更改 `-Xmx384m -Xss512k -XX:+UseCompressedOops` 为 `-Xmx1024m -Xss512k -XX:+UseCompressedOops`

但再次出现同样的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T18:04:50.067

这是一个 PermGen 错误，请尝试添加：

```
-XX:PermSize=256m 
```

这是一个已知问题，请查看[https://github.com/heroku/heroku-buildpack-scala/pull/26](https://github.com/heroku/heroku-buildpack-scala/pull/26)和[https://github.com/heroku/heroku-buildpack-scala/tree/perm-创](https://github.com/heroku/heroku-buildpack-scala/tree/perm-gen)

**更新：**

正如@ryanbrainard 指出的，perm-gen 问题已在默认的 scala-buildpack 上得到解决，因此无需使用上述特定的 buildpack。

# unit-testing - 测试驱动开发成本节约

> ID：13498546
> 
> 赞同：3
> 
> 时间：2012-11-21T17:14:48.383
> 
> 标签：unit-testing, testing, tdd

TDD 的最大好处之一是可以在开发周期的早期检测到缺陷，从长远来看，这将大大节省开发成本。

我想知道是否有人遇到过一项研究，该研究显示了开发过程不同阶段的缺陷成本？这当然可以是假设成本还是实际成本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T01:35:14.420

我看到的大多数图表都很直观，但却是轶事。如果您正在与想要硬数字的人交谈，请参阅图表

[https://agileelements.wordpress.com/2008/04/22/cost-of-software-defects/](https://agileelements.wordpress.com/2008/04/22/cost-of-software-defects/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T17:21:31.203

这是我发现的一篇博客文章，其中包含有关应用程序开发生命周期不同阶段的错误修复成本的一些数据[http://blog.programeter.com/post/1550840010/cost-of-bug-fixing-at-different -sdlc 的阶段](http://blog.programeter.com/post/1550840010/cost-of-bug-fixing-at-different-stages-of-sdlc)

要记住的一件事是，这些成本可能很大程度上取决于软件的类型，例如，将错误修复部署到 Web 应用程序的成本将比固件更新低得多

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T21:15:25.340

我总是参考 Scott Ambler 关于该主题的精彩图表。

[http://www.agilemodeling.com/essays/costOfChange.htm](http://www.agilemodeling.com/essays/costOfChange.htm)

“反馈周期长度”显示了每种做法对变更成本曲线的影响。很容易看出，产生最快反馈的做法是那些带来最大好处的做法。

# ruby-on-rails - 如何在迁移脚本中指定整数的大小

> ID：13498556
> 
> 赞同：4
> 
> 时间：2012-11-21T17:16:05.237
> 
> 标签：ruby-on-rails

我们有两列需要声明为`t.integer size(1) and size(2).` 最大大小为 1（即最多 9）和最大大小为 2（即最多 99）。我应该如何在我的迁移脚本中声明这一点。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-21T17:24:27.370

您的意思是该列中的值应限制在 1-99 范围内吗？

创建整数列后，您可以向模型添加 ActiveRecord 验证：

```
validates_numericality_of :field_name, :in => 1..99 
```

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2012-11-21T17:21:24.027

您应该能够在迁移记录上设置 :limit。在这里查看文档——http: [//api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/TableDefinition.html#method-i-column](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/TableDefinition.html#method-i-column)

例如：add_column :my_tbl, :myint, :integer, :limit => 9

这将设置一个列长度——换句话说，它只允许长度不超过 9 位的整数。

如果要限制此列的数据输入，则需要在模型中进行验证。看看[http://guides.rubyonrails.org/active_record_validations_callbacks.html#length](http://guides.rubyonrails.org/active_record_validations_callbacks.html#length)

# dataset - MS ReportViewer TableAdapter 不工作

> ID：13498563
> 
> 赞同：0
> 
> 时间：2012-11-21T17:16:29.343
> 
> 标签：dataset, rdlc, reportviewer2008

我在为 MS ReportViewer 本地报告创建数据集时遇到问题。

我看到的问题是我有一个执行动态 SQL 字符串的存储过程。DataSet 可以看到参数，但是由于结果是通过字符串传递的，所以它当然可以看到字段。

是否可以让数据集查看此存储过程并能够绑定到报表？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:41:36.813

服务器没有必要的 MS ReportViewer DLL

# javascript - javascript - 我似乎无法将文件名传递给 var 并让它加载

> ID：13498564
> 
> 赞同：0
> 
> 时间：2012-11-21T17:16:30.230
> 
> 标签：javascript, html

我现在已经编辑了这个问题以反映我的新代码有效但它在 IE 中不起作用，只有 Mozilla，有人可以帮忙吗？

JS：

```
function loadXML(url) {
  var xhr = new XMLHttpRequest();
  xhr.open("GET", url, false);
  xhr.send(null);
  return xhr.responseXML;
}

   function loadTest(filename){

    var stylesheetTest = loadXML("stylesheet.xsl");
    var fileTest = loadXML(filename);

    if (typeof (XSLTProcessor) != "undefined") {
    var processor = new XSLTProcessor();
    processor.importStylesheet(stylesheetTest);
    var result = processor.transformToFragment(fileTest, document);
    document.getElementById("results").appendChild(result);
  } else
    document.write(xmlDoc.transformNode(stylesheet));   
} 
```

HTML：

```
<form name="form1">
<table>
<tr>
  <td>Enter a filename:</td>
</tr>
<tr>
  <td></td>
  <td><input type="text" name="value1" /></td>
</tr>
<tr>
  <td><input type="button" value="fileName" onclick="loadTest(this.form.value1.value);" /></td>
</tr>
</table>
</form>

<div id="results">
</div> 
```

非常感谢任何帮助或提示！感谢 Asad 提供的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:19:49.773

您还需要重新加载文档：

```
function changeFileNme(x){
    xmlDocValue = new String(x);
    xmlDoc = loadXML(xmlDocValue);
} 
```

# ios - Xcode 无法更新团队配置文件

> ID：13498569
> 
> 赞同：6
> 
> 时间：2012-11-21T17:16:42.897
> 
> 标签：ios, xcode, provisioning-profile, ios-provisioning

在 Organizer 中续订时，我收到以下错误消息：

您无权执行此操作。请与您的团队管理员联系，或者，如果您需要进一步的帮助，请联系 Apple 开发者计划支持。 [http://developer.apple.com/support](http://developer.apple.com/support)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T17:16:42.897

对我来说，问题是我的 Apple 身份仍然是我过去的一个客户的开发者帐户的子用户（而且似乎没有生成团队配置文件的权限）。在他们删除我在其帐户中的子用户角色后，我可以毫无问题地续订团队配置文件。

# c# - 使用 1Bpp 图像时出现 RotateFlip 错误。C# 我能做什么？

> ID：13498575
> 
> 赞同：1
> 
> 时间：2012-11-21T17:16:56.813
> 
> 标签：c#, bitmap

我正在尝试使用 1Bpp PixelIndex 旋转位图，但我发现它有问题。当您尝试进行一些旋转时，图像左侧会出现一条黑线。做了一些研究，我发现这是一个错误，但可能不会被修复。

我尝试了另一种旋转位图的方法（我包含了代码）：

```
Bitmap returnBitmap = new Bitmap(lBitmap.Width, lBitmap.Height);
                Graphics g = Graphics.FromImage(returnBitmap);
g.TranslateTransform((float)lBitmap.Width / 2, (float)lBitmap.Height / 2);
                        g.RotateTransform(180);
                        g.TranslateTransform(-(float)lBitmap.Width / 2, -(float)lBitmap.Height / 2);
                        g.DrawImage(lBitmap, new Point(0, 0));
                        mIsRotated = true; 
```

但我的问题是图像在旋转 180º 时会失去清晰度。

有没有其他的旋转方式？

如果我不够清楚，我很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:52:25.333

如果有人在这里遇到同样的问题，我找到了解决方案。我无法使用 Bitmap.RotateFlip，因为它生成了一条黑线，所以我尝试使用上面的代码。使用 180º 我的图像失去了一些清晰度，但使用 -180º 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-10T22:52:22.247

我在从图标和光标中提取单色位图时遇到了这个问题。

翻转不是旋转。这会更好：

```
Bitmap returnBitmap = new Bitmap(lBitmap.Width, lBitmap.Height);
Graphics g = Graphics.FromImage(returnBitmap);
g.TranslateTransform((float)lBitmap.Width / 2, (float)lBitmap.Height / 2);
// Mirror instead of rotate
g.ScaleTransform(1,-1);
g.TranslateTransform(-(float)lBitmap.Width / 2, -(float)lBitmap.Height / 2);
g.DrawImage(lBitmap, new Point(0, 0));
mIsRotated = true; 
```

但是生成的位图不会是 1bpp

此函数利用行是 32 位对齐的事实来就地翻转单色位图：

```
/// <summary>
/// Vertically flips a monochrome bitmap in-place
/// </summary>
/// <param name="bmp">Monochrome bitmap to flip</param>
public static void RotateNoneFlipYMono(Bitmap bmp)
{
    if (bmp == null || bmp.PixelFormat != PixelFormat.Format1bppIndexed)
        throw new InvalidValueException();

    var height = bmp.Height;
    var width = bmp.Width;
    // width in dwords
    var stride = (width + 31) >> 5;
    // total image size
    var size = stride * height;
    // alloc storage for pixels
    var bytes = new int[size];

    // get image pixels
    var rect = new Rectangle(Point.Empty, bmp.Size);            
    var bd = bmp.LockBits(rect, ImageLockMode.WriteOnly, PixelFormat.Format1bppIndexed);            
    Marshal.Copy(bd.Scan0, bytes, 0, size);

    // flip by swapping dwords
    int halfSize = size >> 1;
    for (int y1 = 0, y2 = size - stride; y1 < halfSize; y1 += stride, y2 -= stride)
    {
        int end = y1 + stride;
        for (int x1 = y1, x2 = y2; x1 < end; x1++, x2++)
        {
            bytes[x1] ^= bytes[x2];
            bytes[x2] ^= bytes[x1];
            bytes[x1] ^= bytes[x2];
        }
    }

    // copy pixels back
    Marshal.Copy(bytes, 0, bd.Scan0, size);
    bmp.UnlockBits(bd);
} 
```

# php - 从多个 JOINS 中获取所有数据

> ID：13498578
> 
> 赞同：0
> 
> 时间：2012-11-21T17:17:02.427
> 
> 标签：php, mysql, relational-database, foreign-key-relationship

我在这里要做的是通过选择工作然后选择要搜索的标签来获取所有已申请某项工作或已被标记为某项工作的申请人。这是我正在使用的 sql 语句。

```
SELECT ap.user_id, ap.job_id as jobId, date(app_date) AS appDate, count(*) AS `count`   ,jt.name AS title, a.*, ap.app_id
FROM applications ap
LEFT JOIN jobs j ON ap.job_id = j.job_id
LEFT JOIN job_titles jt ON jt.name = j.title
LEFT JOIN applicants a ON a.applicant_id = ap.user_id
LEFT JOIN applicant_tags at ON at.applicant_id = ap.user_id
LEFT JOIN tags t ON t.id = at.tag_id
WHERE ap.favorite = 1
AND LOWER(jt.name) = LOWER('fisherman')
AND (LOWER(t.name) = LOWER('confident')
OR LOWER(t.name) = LOWER('hard worker'))
GROUP BY ap.app_id
HAVING `count` = '2'
ORDER BY jt.name 
```

我的问题是，我只收到申请该工作的申请人，而不是那些被标记为该类型工作的申请人。职位名称本身不存储为标签，而是通过申请人标签表链接到每个申请人，如下所示：

```
applicant_id | tag_id | job_id
34                0        4
34                4        0
34                0        5
32                7        0 
```

申请人id 通过应用程序user_id 链接到应用程序，tag_id 通过标签id 链接到应用程序，job_id 通过job_titles id 链接到应用程序。tags 表和 job_titles 表中只有一个 id 和 name。

这是标签表：

```
id | tag_id 
```

job_titles 表：

```
id | name 
```

申请人拥有申请人的所有个人信息（电子邮件、电话号码）以及用作外键的申请人id。

应用程序和作业有太多信息无法列出，实际上只有几列被使用。

应用程序表

```
app_id | user_id | job_id | app_date | favorites ..... 
```

工作表

```
job_id | title | location | jobtype ..... 
```

如果申请人有 job_id，则 tag_id 为 0，反之亦然。标签名称和职位名称不存储为逗号分隔值，而是存储为一行中的单个值，该值通过其申请者 ID 链接到每个申请者。jobs中的job_id是申请的职位id，不是职位名称。每个申请人可以有多个与之关联的标签和多个与其关联的职位名称。标签语句 LOWER(t.name) = LOWER(tag name) 是根据搜索中使用的标签数量添加的。我从申请人那里得到所有信息，因为这些信息和申请中调用的内容将显示在页面上。

应用程序 ap 通过 ap.job_id 链接到工作，通过 ap.applicant_id = at.applicant_id 链接到申请者标签，通过 ap.applicant_id = a.applicant_id 链接申请者。

job_titles jt 通过 jt.name = j.title 链接到工作 j 并通过 j.id = at.job_id 链接到 application_tags at

标签 t 通过 t.id = at.tag_id 链接到申请者标签

我也不能使用聚合表。

那么，我如何才能获取链接到职位名称的应用程序，而不是从作业表到 job_titles 表，而是从申请人标签表到 job_titles 表？

-编辑

在重构我的 sql 语句后，我可以将它显示到它显示所有申请人但不显示任何标签的位置，如果我尝试搜索任何标签，它不会返回任何结果。

```
SELECT ap.user_id, jt.id as jobId, date(app_date) AS appDate, jt.name AS title,   count(*) AS `count`, at.*, a.*, ap.app_id, t.*    
FROM applications ap                                 
INNER JOIN applicants a ON ap.user_id = a.applicant_id
LEFT JOIN applicant_tags at ON at.applicant_id = a.applicant_id
LEFT JOIN tags t ON at.tag_id = t.id
LEFT JOIN job_titles jt ON at.job_id = jt.id
WHERE ap.favorite = '1'
AND LOWER(jt.name) = LOWER('fisherman')
GROUP BY ap.app_id
HAVING `count` = '1'
ORDER BY jt.name 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:56:35.267

我发现了如何做到这一点。我不得不使用带有 IN 子句的子查询：

```
SELECT ap.user_id, jt.id as jobId, date(app_date) AS appDate, jt.name AS title, count(*) AS `count`, at.*, a.*,ap.app_id
FROM applications ap
LEFT JOIN jobs j ON ap.job_id = j.job_id
LEFT JOIN job_titles jt ON jt.name = j.title
LEFT JOIN applicants a ON a.applicant_id = ap.user_id
LEFT JOIN applicant_tags at ON at.applicant_id = ap.user_id
LEFT JOIN tags t ON t.id = at.tag_id
WHERE ap.favorite = 1
AND (
    LOWER(jt.name) = LOWER('fisherman') OR 'fisherman' IN(SELECT jt.name FROM applicant_tags at 
    LEFT JOIN job_titles jt ON at.job_id = jt.id 
    WHERE at.applicant_id = a.applicant_id))
AND (LOWER(t.name) = LOWER('confident')
    OR LOWER(t.name) = LOWER('hard worker'))
GROUP BY ap.app_id
HAVING `count` = '2'
ORDER BY jt.name 
```

不过还是谢谢大家的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:34:47.550

我会看看嵌套查询，在另一个说明中......这可以在下面找到...... [http://www.felixgers.de/teaching/sql/sql_nested_queries.html](http://www.felixgers.de/teaching/sql/sql_nested_queries.html)

对于这个查询，如果您将所有申请人信息包装到一个单一的聚合表中会更容易。然后将作业 id 的东西加入另一个表，或使用原始表，适当地添加索引，这样它就不会超时，并且繁荣......更容易。

```
SELECT ap.user_id, ap.job_id as jobId, date(app_date) AS appDate, count(*) AS `count` ,jt.name AS title, `a.*` -- a.* is this necessary? It would help if you were explicit
FROM applications ap
LEFT JOIN jobs j ON ap.job_id = j.job_id --take all items from applications and puta  jobid to them
LEFT JOIN job_titles jt ON jt.name = j.title -- now you are trying to add a title to job from ANOTHER table while retaining all records from applications
LEFT JOIN applicants a ON a.applicant_id = ap.user_id --then you want the applicant that matches the criteria to each application record
LEFT JOIN applicant_tags at ON at.applicant_id = ap.user_id
LEFT JOIN tags t ON t.id = at.tag_id
WHERE ap.favorite = 1
AND LOWER(jt.name) = LOWER('fisherman')
AND (LOWER(t.name) = LOWER('confident')
OR LOWER(t.name) = LOWER('hard worker')) 
GROUP BY ap.app_id -- how are you grouping by something that is not being called?
HAVING `count` = '2' -- They need to have two records, does not matter if they are the same
ORDER BY jt.name -- This is fine 
```

好吧，除了我的评论，这实际上是合法的。但是，我会创建一个申请人信息的聚合表，然后在该表上进行一次连接，以使事情变得更容易

看起来您正在使用的表是：

应用程序加入标准的申请人

内连接这些表

Applys_tags 将标签加入到 sample_tags 标签作业中 - 将其与 job_titles 加入作业表

# android - 如何最大限度地减少唤醒警报的运行时间开销？

> ID：13498580
> 
> 赞同：1
> 
> 时间：2012-11-21T17:17:05.580
> 
> 标签：android, alarmmanager, wakeup

我的代码逻辑就像

1.  设置重复唤醒警报。

alarmManager.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, SystemClock.elapsedRealtime(), 60000, pIntent);

1.  在接收器的 onReceive() 期间。做一些非常快的事情，最多可能只需要 100 毫秒。该操作将每分钟重复一次，并且会以某种方式增加电池负担（因为我们希望后台服务尽可能长时间运行）。

现在，根据我们的电源监控工具，即使我们只是登录 onReceive()。仍然需要大约 1.5 秒。

我做了一些研究，我推测这可能与android增强linux内核的alarm_suspend等待有关。但是，我不确定。看起来 android 没有理由需要让闹钟运行时间保持那么长，所以我想问是否有人在设置闹钟方面有一些好的经验并使开销尽可能小？

谢谢。

# ios - iOS 上的 OpenCV ZXing 不兼容

> ID：13498581
> 
> 赞同：3
> 
> 时间：2012-11-21T17:17:06.093
> 
> 标签：ios, opencv, xcode4.5, zxing

我正在尝试在同一个项目中使用 ZXing 和 OpenCV。你不会认为这会是这样罕见的事情，但我想它是。我在两者之间遇到了一些严重的兼容性问题。我只能进口一个而没有另一个。

我从 OpenCV 开始，一切正常。程序按预期运行。然后我添加 ZXing，我得到大约 27 个编译器错误。这里有一个 stackoverflow 问题可以解决这个[问题](https://stackoverflow.com/questions/12968369/undefined-symbols-for-architecture-armv7-when-using-zxing-library-in-xcode-4-5)。所以我更改了我的 C++ 编译器设置以匹配这个问题的建议，它修复了 ZXing 问题，但随后打开了一组全新的错误。这些错误现在与 OpenCV 有关（见下文）。

编辑：
似乎取决于 C++ 编译器，它是一种或多种类型的交易。事实上，如果您将 c++ 标准库从 libc++ 更改为 libstdc++，您将得到一个工作而不是另一个工作。我无法同时获得两者 ![在此处输入图像描述](../Images/a381394f57d047c79caf2c005fbbb3f7.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T19:05:35.287

我找到了我的问题的解决方案。这最适用于在同一项目中使用 zxing 和 opencv 的任何人。

1.  转到项目设置 -> 目标 -> 搜索 c++ a. 将 c++ 语言方言切换到编译器默认值 b。将 C++ 标准库切换到 libc++
2.  转到 ZXingWidget.xcodeproj -> ZXingWidget -> 搜索 C++ a. 将 c++ 语言方言切换到编译器默认值 b。将 C++ 标准库切换到 libc++
3.  会出现编译器错误，提示 ZXing 无法编译为 libc++，因为它当前设置为支持 iOS 4.3。再次进入 ZXing 小部件，并将部署目标更改为 5.0（对不起所有试图仍然支持 < 5 的人）

这解决了我的问题。基本上发生的事情是 zxing 和 open cv 在不同版本的 c++ 上编译，这导致了一些奇怪的问题

编辑：作为参考，我使用的是 ZXing 2.1 和 OpenCV 2.4.3（问题时的最新版本）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T07:52:33.320

实际上，我使用您的解决方案，但略有不同。在第2步，我将两者都更改为Complier Default，因为如果我使用您的建议，错误仍然存​​在。所以我检查了ZXingWidget.xcodeproj中的设置，发现它设置了两个Complier Default，所以我将我的项目设置更改为与ZXingWidget相同.xcodeproj。但是感谢您的提示并帮助了我很多！

# css - 用于修复标题下方导航栏的 CSS 解决方案

> ID：13498582
> 
> 赞同：1
> 
> 时间：2012-11-21T17:17:07.000
> 
> 标签：css, position, css-position

是否有一种仅限 CSS 的方法来修复标题下方的导航栏（或任何真正的元素），但在滚动经过标题时位于页面顶部？

我知道如何用 js 来做，我只是好奇是否有一种聪明的方法可以用 CSS 来做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:19:36.040

不，您不能根据页面的滚动值有条件地设置元素的样式，这仅仅是因为 CSS 不关心，也不测量该参数。然而，JavaScript 可以。因此，您的解决方案必须涉及 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:21:27.817

我认为纯 CSS 无法解决问题。

如果`:target`不点击任何元素就可以工作，也许可以。但我认为不是。

# android - 触发从 AccountManagerFuture 收到的 Intent 时无法捕获活动结果

> ID：13498584
> 
> 赞同：0
> 
> 时间：2012-11-21T17:17:15.283
> 
> 标签：android, android-intent, android-activity, oauth, accountmanager

我正在尝试遵循[Authenticating to OAuth2 Services](http://developer.android.com/training/id-auth/authenticate.html/ "对 OAuth2 服务进行身份验证")并实现在 AccountManagerFuture#getResult() 调用提供的 Bundle 中包含 Intent 的部分。

问题是，即使文档说使用 Activity#startActivityForResult(...)，我被告知要触发的 Intent 显然是在它自己的任务中开始的，导致 onActivityResult 被立即调用。

我不确定我是否正确执行的另一部分是我启动此 Intent 的方式。因为调用 AccountManager#getAuthToken(...) 的代码隐藏在无法访问当前 Activity 的工作线程中，所以我正在启动一个名为“CredentialsActivity”的新 Activity，然后使用 startActivityForResult 启动操作系统提供的 Intent。

我就是这样做的：

```
 final AccountManagerFuture<Bundle> future = AccountManager.getAuthToken(...);

      // Now that we have the Future, we extract the Bundle
      Bundle bundle = null;
      try {
        bundle = future.getResult();
      } catch (Exception e) {
        log.warn(e, "Got an Exception");
      }

      if (bundle == null) {
        log.info("Unable to get auth token");
        return;
      }

      // Check if the user needs to enter credentials.
      final Intent askForPassword = (Intent) bundle.get(AccountManager.KEY_INTENT);
      if (askForPassword != null) {
        log.dev("Need to prompt for credentials, firing Intent...");
        CredentialsActivity.promptForCredentials(context, askForPassword);
      } 
```

这些是 CredentialsActivity 的相关部分：

```
 private static final int REQUEST_CODE_LAUNCH_CREDENTIALS_INTENT = 0;

      private static Intent newCredentialsActivityIntent(Context context) {
        final Intent intent = new Intent(context, CredentialsActivity.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        return intent;
      }

      public static void promptForCredentials(Context context, Intent credentialsIntent) {
        final Intent intent = newCredentialsActivityIntent(context);
        intent.putExtra(Intent.EXTRA_INTENT, credentialsIntent);

        context.startActivity(intent);
      } 
```

我在 onResume 中触发 Intent：

```
 @Override
  protected void onResume() {
    super.onResume();
    final Intent intent = getIntent();
    final Intent credentialsIntent = (Intent) intent.getParcelableExtra(Intent.EXTRA_INTENT);
    if (credentialsIntent != null) {
      startActivityForResult(credentialsIntent, REQUEST_CODE_LAUNCH_CREDENTIALS_INTENT);
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:04:43.900

好的，所以我想我想出了这个 - 我会发布答案，以防万一：

问题是系统为 Intent 提供了 NEW_TASK 标志集。我需要清除它以使这项工作适合我：

```
final Intent credentialsIntent = (Intent) intent.getParcelableExtra(Intent.EXTRA_INTENT);
if (credentialsIntent != null) {
  credentialsIntent.setFlags(0);
  startActivityForResult(credentialsIntent, REQUEST_CODE_LAUNCH_CREDENTIALS_INTENT);
} 
```

# sqlite - SQLite3 日期范围不起作用

> ID：13498586
> 
> 赞同：1
> 
> 时间：2012-11-21T17:16:19.783
> 
> 标签：sqlite

我无法让日期范围在使用 SQLite3 Create And Populate Table 的查询中正常工作：

```
create table dates(myDate DATE);
insert into dates values('2012-10-1');
insert into dates values('2012-10-2');
insert into dates values('2012-10-3');
insert into dates values('2012-10-4');
insert into dates values('2012-10-5');
insert into dates values('2012-10-6');
insert into dates values('2012-10-7');
insert into dates values('2012-10-8');
insert into dates values('2012-10-9');
insert into dates values('2012-10-10'); 
```

询问：

```
select * from dates where myDate >= '2012-10-1' and myDate < '2012-10-31'; 
```

结果：

```
2012-10-1
2012-10-2
2012-10-3
2012-10-10 
```

10-4 - 10-9 在哪里？

如果我在以下之间使用，我会得到相同的结果：

```
select * from dates where myDate BETWEEN '2012-10-1' AND '2012-10-30'; 
```

如果我将任一查询更改为使用“2012-11-1”作为结束日期，它们将正常工作。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:56:53.800

日期值必须采用`yyyy-mm-dd`具有固定宽度字段的格式。

这是必需的，因为 SQLite 没有原生日期格式；要正确比较日期字符串，具有相同含义的字段必须始终位于字符串中的相同位置。

# php - 为什么此函数中未设置登录名和会话 ID？

> ID：13498588
> 
> 赞同：0
> 
> 时间：2012-11-21T17:17:37.450
> 
> 标签：php, mysql, sessionid

我正在尝试登录并设置会话 id。下面的代码没有成功验证登录，也没有设置会话 id。请帮忙。

```
 public $userid;

  function login()
    {
        $pwdHasher = new PasswordHash(8, FALSE);

        if(isset($_POST['logging'])  AND  !empty($_POST['logging'])){

            $email=mysqli_real_escape_string($this->db->connection ,$_POST['email']);
            $pass=mysqli_real_escape_string($this->db->connection ,$_POST['pass']);
            $sql=mysqli_query($this->db->connection,"SELECT * FROM user where email='$email' AND password='$pass'");
            $numrows=mysqli_num_rows($sql);
            $resid=mysqli_fetch_array($sql);
            $checked = $pwdHasher->CheckPassword($pass,$numrows);
            if($checked){
                $this->userid=$_SESSION['id']=$resid['id'];

                $this->login=TRUE;

                echo "u r logedin.Plz click here to go  to main area<a href='main.php'>main</a>";
            }
            else{
                echo "username r password is wrong";
                $this->login=FALSE;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:22:14.117

您需要`session_start()`在使用 $_SESSION 数组之前启动会话

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:47:06.253

您可能会错过`session_start()`PHP 脚本开头的 。如果您有一个包含在每个文件中的通用文件，那么只需添加`session_start()`到开头即可。

如果您没有公共文件并且添加一个文件太难，您可以修改该`php.ini`文件以必须`session.auto_start`为您启动会话。

如果您无法访问该`php.ini`文件并且您正在使用 apache 作为 Web 服务器，那么您可以通过添加以下内容来修改/添加该`.htaccess`文件到您的根目录`DOCUMENT_ROOT`：`php_flag session.auto_start 1`

查看这些链接，它们可能会帮助您更好地理解会话并找出它不起作用的原因

*   [http://php.net/manual/en/function.session-start.php](http://php.net/manual/en/function.session-start.php)
*   [http://www.php.net/manual/en/session.configuration.php#ini.session.auto-start](http://www.php.net/manual/en/session.configuration.php#ini.session.auto-start)

# android - 如何在我的库项目中添加 jar 文件？

> ID：13498593
> 
> 赞同：0
> 
> 时间：2012-11-21T17:17:44.810
> 
> 标签：android, jar, numberpicker

我的应用程序我想使用这个 NumberPicker：

[https://github.com/SimonVT/android-numberpicker](https://github.com/SimonVT/android-numberpicker)

我已经从这个项目中复制了 .jar 文件，在 Eclipse 中构建了路径，并将其导入到我的 MainActivity 类中。

我的 xml 文件有以下代码：

```
<net.simonvt.widget.NumberPicker
    android:id="@+id/numberPicker"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

但我在 LogCat 收到此错误：

```
11-21 15:12:41.486: E/AndroidRuntime(6315): java.lang.RuntimeException: Unable to start activity ComponentInfo{xxxxxxxx.MainActivity}: android.view.InflateException: Binary XML file line #138: Error inflating class net.simonvt.widget.NumberPicker
11-21 15:12:41.486: E/AndroidRuntime(6315): Caused by: android.view.InflateException: Binary XML file line #138: Error inflating class net.simonvt.widget.NumberPicker
11-21 15:12:41.486: E/AndroidRuntime(6315):     at net.simonvt.widget.NumberPicker.<init>(NumberPicker.java:532) 
```

怎么了？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:19:33.800

您必须添加您的 lib 表单 java 构建路径。只需右键单击属性，然后找到 java 构建路径来添加您的 jar。

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:custom="http://schemas.android.com/apk/res/net.simonvt.widget.NumberPicker"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical" >
 <net.simonvt.widget.NumberPicker
  android:id="@+id/numberPicker"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content" />
 </LinearLayout 
```

尝试这个。

# linux - 在 ssh 上更改端口

> ID：13498594
> 
> 赞同：0
> 
> 时间：2012-11-21T17:17:47.467
> 
> 标签：linux, ubuntu, ssh

任何人都知道我是否可以设置 ssh 以在多个端口上进行通信，或者将默认端口更改为其他端口。

有没有我可以在 Linux 上使用的配置文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:22:39.437

您可以通过编辑 sshd_config 文件来做到这一点。您可以查看本教程以获取更多信息：http: [//iserialized.com/changeing-default-ssh-port-on-ubuntu/](http://iserialized.com/changing-default-ssh-port-on-ubuntu/)

一个解释清楚的教程。

# iphone - 从 GCD 后台队列添加到 UIManagedDocument？

> ID：13498596
> 
> 赞同：4
> 
> 时间：2012-11-21T17:17:48.513
> 
> 标签：iphone, objective-c, cocoa-touch, grand-central-dispatch, uimanageddocument

我正在从后台队列创建许多托管对象并将其添加到 Core Data。我的理解是我无法从后台线程访问上下文，因此我使用 performBlock 来安排将 Core Data 添加回创建上下文的同一队列中。这工作得很好......

我的问题是在测试期间我注意到通过删除`[moc performBlock:^{ ... }];`应用程序仍然可以按预期执行（甚至可能快几分之一秒）我需要`performBlock`吗？我会假设我这样做并且它只是以非线程安全的方式工作（目前:)，我只是想检查以确保我的理解没有缺陷。

```
dispatch_queue_t backgroundQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0);
dispatch_async(backgroundQueue, ^{ 
    // GET DATA
    // PROCESS DATA
    NSManagedObjectContext *context = [[self managedDocument] managedObjectContext];
    [moc performBlock:^{
          // ADD TO CORE DATA
          [Core createRodInContext:context withDictionary:fuelRodDictionary];
     }];

}); 
```

**编辑：**为 createRodInContext 添加了实现 ...

```
+ (Rod *)createRodInContext:(NSManagedObjectContext *)context withDictionary:(NSDictionary *)dictionary {

    // CREATE
    Rod *rod = [NSEntityDescription insertNewObjectForEntityForName:@"Rod" inManagedObjectContext:context];

    // POPULATE
    [neo setDataCode:[dictionary objectForKey:@"dataCode"]];
    [neo setDataName:[dictionary objectForKey:@"dataName"]];
    [neo setDataReference:[dictionary objectForKey:@"dataReference"]];
    ...
    return rod;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T18:36:20.537

在后台线程中，您*必须使用* `[moc performBlock:^{ ... }]`在主托管对象上下文中插入（和填充）托管对象。

省略`performBlock`意味着您也在不同的线程（与后台队列相关联）中使用托管对象上下文（在主线程上创建）。

这可能*是偶然的*，但是一旦主线程与您的后台线程在同一时刻访问 MOC，结果是不可预测的，因为（正如您已经说过的），MOC 不是线程安全的。

另请参阅*OS X v10.7 和 iOS 5.0* 的核心数据发行说明中[对托管对象上下文的并发支持](http://developer.apple.com/library/mac/#releasenotes/DataManagement/RN-CoreData/_index.html#//apple_ref/doc/uid/TP40010637-CH1-DontLinkElementID_1)：

 *> **限制（NSConfinementConcurrencyType）。**
> 
> 这是默认设置。您保证上下文不会被除您创建它的线程之外的任何线程使用。

但是对于其他并发类型（私有队列、主队列），除非您的代码已经在与 MOC 关联的队列上执行，否则您始终必须使用`performBlock`(或)。`performBlockAndWait`*

# r - ggplot2 对不同的图层使用不同的调色板

> ID：13498603
> 
> 赞同：1
> 
> 时间：2012-11-21T17:18:04.800
> 
> 标签：r, ggplot2

我目前正在尝试将箱线图放在抖动下方，并希望将框着色为较浅的阴影。

因此，与这篇文章[https://stackoverflow.com/a/9236205/1842673](https://stackoverflow.com/a/9236205/1842673)相反，我可以在该行中添加一个“+”而不是“-”

```
cols_dk <- rgb2hsv(col2rgb(colour)) - c(0, 0, 0.2) 
```

但是，由于该页面上的最后一个答案中提到“proto”已停止使用，因此我似乎无法使其正常工作。是否有另一种（新）方法可以达到这一点？

我也尝试添加

```
+scale_color_hue(l=80) 
```

然而，在层定义之后，这将应用于整个绘图（也适用于抖动层。

在此请求中[https://github.com/hadley/ggplot2/issues/723](https://github.com/hadley/ggplot2/issues/723)已要求提供更通用的解决方案，因此，如果这里有人可以提供帮助，那也是一件好事。 .

有什么建议么？

# android - 如何使用简单的 xml 解析这个 xml

> ID：13498608
> 
> 赞同：3
> 
> 时间：2012-11-21T17:18:10.497
> 
> 标签：android, xml-parsing

```
<folder
    id="-1"
    name="BaseFolder" >
    <folder
        id="1047"
        name="Folder1" >
        <folder
            id="1050"
            name="Folder1.1" />
    </folder>
    <folder
        id="1048"
        name="Folder2" >
        <folder
            id="1053"
            name="Folder2.1" />
        <folder
            id="1054"
            name="Folder2.2" />
    </folder>
    <folder
        id="1049"
        name="Folder3" >
        <folder
            id="1051"
            name="Folder3.1" />
        <folder
            id="1052"
            name="Folder3.2" />
    </folder>
</folder> 
```

这些是我使用的类

```
 @Root
public class Response extends BaseResponse {

    private static final long serialVersionUID = 1L;

    @ElementList(entry="folder", inline=true)
    public ArrayList<Folder> folderList;

    public String getSuccess() {
        return success;
    }

    public void setSuccess(String success) {
        this.success = success;
    }

    @Attribute
    private String success;

    } 
```

文件夹类

```
@Root
public class Folder extends BaseResponse {

    private static final long serialVersionUID = 1L;

    @Attribute
    private String id;

    @Attribute
    private String name;

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

} 
```

如何访问内部文件夹标签？在我打电话的活动中

```
List <Folder>folders=new ArrayList<Folder>();
    Response response = new Response();
response = directoryService.getResponses();
folders=    response.folderList;

    for(int i=0;i<folders.size();i++)
            {
                Log.e("Contents of folders are ",folders.get(i).getName());

            } 
```

我能够打印 BaseFolder。但是如何访问内部标签以及如何将它们放在列表中以便我可以在某些列表视图中显示它们。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:20:28.167

我将文件夹对象更改为

```
@Root
public class Folder extends BaseResponse {

    private static final long serialVersionUID = 1L;

    @ElementList(entry="folder", inline=true,name="name",required=false)
    public ArrayList<Folder> llfolder;

    public ArrayList<Folder> getLlfolder() {
        return llfolder;
    }

    public void setLlfolder(ArrayList<Folder> llfolder) {
        this.llfolder = llfolder;
    }

    @Attribute(required=false)
    private String id;

    @Attribute(required=false)
    private String name;

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

} 
```

# c# - 拆分；然后在 =，使用 String.Split 时遇到问题，需要正则表达式

> ID：13498610
> 
> 赞同：1
> 
> 时间：2012-11-21T17:18:21.177
> 
> 标签：c#, regex

```
"key1"="value1 http://www.example.com?a=1";"key2"="value2 http://www.example.com?a=2"; 
```

我需要将上面的行拆分 2 次，第一次是逗号字符；第二次在 = 符号上。

它不能正常工作，因为值部分也有 = 符号。

我的代码不起作用，因为它假设值部分没有“=”符号，并且它不是简单地使用正则表达式 String.Split('=')。

有人可以帮助解决所需的正则表达式吗，我在键/值周围添加了双引号，以帮助将事情分开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T17:24:16.323

我没有使用正则表达式，但您可以执行以下操作：

```
 string test =@"""key1""=""value1 http://www.example.com?a=1"";""key2""=""value2 http://www.example.com?a=2""";

        string[] arr = test.Split(';');

        foreach (string s in arr)
        {
            int index = s.IndexOf('=');
            string key = s.Substring(0, index);

            string value = s.Substring(index+1, s.Length - index);
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T17:38:32.220

使用`String.Split(char[], int)`重载 (http://msdn.microsoft.com/en-us/library/c1bs0eda.aspx)。第二个参数将限制要返回的子字符串的数量。如果你知道你的字符串总是至少有 1 个等号（键/值对），那么将第二个参数设置为 2。

```
string x = "key1=value1 http://www.example.com?a=1;key2=value2 http://www.example.com?a=2;";
char[] equal = new char[1] { '=' };
char[] semi = new char[1] { ';' };
string[] list = x.Split(semi, StringSplitOptions.RemoveEmptyEntries);
foreach (string s in list)
{
    string[] kvp = s.Split(equal, 2);
    Console.WriteLine("Key: {0}, Value: {1}", kvp[0], kvp[1]);
} 
```

- 结果：

```
Key: key1, Value: value1 http://www.example.com?a=1
Key: key2, Value: value2 http://www.example.com?a=2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T17:52:00.617

您需要匹配而不是拆分文本

```
var keys= Regex.Matches(yourString,"""(.*?)""=.*?(http.*?)"";").Cast<Match>().Select(x=>
    new
    {
        key=x.Groups[1].Value,
        value=x.Groups[2].Value
    }
);

foreach(key in keys)
{
    key.key;//the key value
    key.value;//the value
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T17:22:47.460

那么你能做什么，是你可以`IndexOf`用来获取第一个索引`=`

```
int i = myStr.IndexOf('='); 
```

然后您可以使用`String.Substring`获取键和值

```
string key = myStr.Substring(0, i)

string value = myStr.SubString(i+1); 
```

[以下是有关字符串类的一些文档，您可能会发现它们很有用](http://msdn.microsoft.com/en-us/library/7wtc81z6.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T17:37:04.930

使用`String.Split`with`StringSplitOptions.RemoveEmptyEntries`和带有分隔符的字符串数组

```
string s = "\"key1\"=\"value1 http://www.example.com?a=1\";\"key2\"=\"value2 http://www.example.com?a=2\"";

string[] result = s.Split(new string[] { "\";\"", "\"=\"", "\"" },
                           StringSplitOptions.RemoveEmptyEntries); 
```

* * *

```
结果 = {字符串[4]}
    [0]：“key1”
    [1]: "value1 http://www.example.com?a=1"
    [2]：“key2”
    [3]: "value2 http://www.example.com?a=2"
```

* * *

我使用以下分隔符（包括双引号）：

`";"`
`"="`
`"`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-21T17:24:48.507

你的正则表达式应该是这样的。

```
"(.+?)"="(.+?)" 
```

可悲的是，我不知道`C#`，但这应该适用于每种语言。要获得结果，您必须为每场比赛选择：

```
group(1) as keys
group(2) as values 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-21T17:42:57.880

您也可以尝试在此处使用带有多个标记的 Split 方法，这将为您提供一个包含多个值的字符串 []，这些值根据您的标记进行拆分

如果您想删除空条目，您也可以执行这样的代码

```
string strValue = @"""key1""=""value1 http://www.example.com?a=1"";""key2""=""value2 http://www.example.com?a=2""";
string[] strSplit = strValue.Split(new string[] { "\";\"", "\"=\"", "\"" }, StringSplitOptions.RemoveEmptyEntries); 
```

结果

```
strSplit    {string[4]} string[]
[0] "key1"  
[1] "value1 http://www.example.com?a=1"
[2] "key2"  
[3] "value2 http://www.example.com?a=2" 
```

# javascript - jQuery修复了溢出时随内容移动的侧边栏

> ID：13498611
> 
> 赞同：0
> 
> 时间：2012-11-21T17:18:37.073
> 
> 标签：javascript, jquery

我有以下小提琴：http: [//jsfiddle.net/yFjtt/1/](http://jsfiddle.net/yFjtt/1/)

这个想法是用户可以滚动 PAST 标题以使侧边栏“粘”在适当的位置，同时他们进一步向下滚动页面。

当它们靠近页面底部时，它应该计算出剩余多少空间以及侧边栏需要多少空间，并添加一些负边距以在保持固定位置的同时向上移动侧边栏。

到这里为止一切正常。

下一个问题是确保侧边栏只向上移动到它需要的距离，并且应该保持距离底部大约 10 像素。这样，侧边栏将被固定，直到它需要向上移动以显示其内容，然后一旦全部显示出来，它就会再次卡住距离底部约 10 个像素。

这是我试图实现这一目标的地方（完整代码参见小提琴）：

```
if( $(window).scrollTop() > (documentHeight - sidebarHeight) ) {

        if( offsetBottom < 10) {

        }
        else {
            $('div.sidebar').stop(true,false);
            $('div.sidebar').animate({'margin-top':offset}, 300);
        }

    } else {
        $('div.sidebar').stop(true,true);
        $('div.sidebar').css({'margin-top':'0'});
    } 
```

但是侧边栏仍然在页面上移动得太远了......有人可以帮忙吗？我敢肯定，从底部计算偏移量只是一个简单的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:01:47.450

我认为您进行了一次很好的尝试，但我不确定这些动画在那里做什么。基本上你需要 3 次检查，首先检查使用是否在标题之上，其次检查它们是否在标题和侧边栏的最低限制之间，最后检查它们是否低于该点。然后只需交换和更改类并根据需要修改最高值。

[jsFiddle](http://jsfiddle.net/yFjtt/19/)

```
var sidebarHeight = $('div.sidebar').height();
var documentHeight = $(document).height();
var headerHeight = $('div.header').height();

$(window).scroll(function() {
    var margin = 10;

    var sidebar_offset = documentHeight - sidebarHeight - (margin * 2); // double margin to account for top and bottom margins

    if ($(window).scrollTop() > headerHeight && $(window).scrollTop() < sidebar_offset ) {
        // below header, but above the sidebar offset limit
        $('div.sidebar').addClass('fixed');  
        $('div.sidebar').css('top', '');    
    }
    else if ( $(window).scrollTop() <= headerHeight ) {
        // above header
        $('div.sidebar').removeClass('fixed');
        $('div.sidebar').css('top', ''); 
    }
    else {
        // past the sidebar offset limit
        $('div.sidebar').removeClass('fixed');
        $('div.sidebar').css('top', documentHeight - sidebarHeight - margin);
    }
});​ 
```

# iphone - iPhone 在通用应用程序中显示 iPad xib，每个应用程序都有单独的 xib

> ID：13498619
> 
> 赞同：1
> 
> 时间：2012-11-21T17:17:58.203
> 
> 标签：iphone, ios, ipad, xib

好的，这个很奇怪。一年多前我写了一个应用程序，它已经在 App Store 中，并且运行良好，没有任何实际问题。这是一个通用应用程序，我有一个适用于 iPhone 的 xib 和一个适用于 iPad 的 xib。

今天我收到一封来自用户的电子邮件，说 UI 不好，所以我要求截屏。屏幕截图显示了 iPad xib 与我的 iPhone 选项卡栏控制器一起显示。哦，我以前从未见过这种情况，我们有成千上万的用户正在使用该应用程序。iPhone 用户看到 iPhone xib，iPad 用户看到 iPad xib。

这里到底发生了什么？我已经要求她删除并重新安装该应用程序，因为这是我唯一能想到的……但是当其他所有人的应用程序都运行良好时，怎么会发生这种情况？

这是她所看到的：

![在此处输入图像描述](../Images/813077d98aa7b129708e589129a99cc7.png)

这是她应该在 iPhone 界面上看到的内容：

![在此处输入图像描述](../Images/2e1a1a27d1ae6d00028eada3fb23db5f.png)

这是卡在 iPhone ui 中的 iPad 界面：

![在此处输入图像描述](../Images/592300db6371016b1002c6aa7662ad19.png)

# database - 直接连接到云数据库还是通过服务？

> ID：13498621
> 
> 赞同：0
> 
> 时间：2012-11-21T17:19:13.447
> 
> 标签：database, architecture, azure, cloud

这可能是一个简单的问题，但由于我在谷歌上找不到最佳答案，我想知道你的想法。

我正在考虑更改我在 WPF 中制作的软件，将其数据从本地服务器访问到云服务器（可能是 Azure）。

最好的方法是直接连接到数据库或通过云中的服务访问（我猜这必须由我开发）。

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:29:52.713

一般来说，我会防止通过客户端应用程序直接访问托管在云中的数据库。您将通过公共互联网公开您的数据库端点，从而提供重要的攻击媒介。

通过使用服务，您可以限制该攻击向量。服务本身也是“公开的”，但可以通过 OAuth、AD 等身份验证/授权协议锁定（通常更有效/更容易）。并且服务本身只会公开客户端应用程序所需的操作，而不是访问完整的数据库模式（当数据库在开放的互联网上时，如果有人破解密码）。

您没有提到您是否计划在 IaaS 中使用 Windows Azure SQL Azure 或您自己的数据库。当然，您可以通过防火墙等在 Windows Azure 中托管的 VM 上实现自己的安全性，但这是您需要适应的另一项基础设施任务，如果您的客户端 IP 发生变化等，那么管理它并不是微不足道的.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:37:54.797

我认为无论您是否在 Azure 上，这个问题的答案都是一样的。

服务在应用程序和数据库之间添加了一个抽象层，这可能有助于长期维护，但它确实有与之相关的成本（就初始工作而言）和一些潜在的性能损失（尽管这没有很重要）所以最后你必须根据应用程序对其进行加权。

我真的不认为有一个万能的答案。

# objective-c - 按字母顺序对 NSMutableArrays 进行排序

> ID：13498624
> 
> 赞同：2
> 
> 时间：2012-11-21T17:19:18.730
> 
> 标签：objective-c, ios

我有一个 NSMutableArray，称为类别，其中包含一个名为 CategoryItem 的对象。CategoryItem 有一个 NSString 属性，*text。现在我将如何根据元素的 text 属性对该数组进行排序？对不起，如果这没有意义，我对这一切都是新手。

我试过这个：

```
[categories sortUsingSelector:@selector(localizedCaseInsensitiveCompare:)]; 
```

但它失败了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-21T17:23:53.993

那是因为您试图根据每个对象而不是它包含的字符串对数组进行排序。

您需要使用 NSSortDescriptor 的实例来对数组进行排序。您可以像这样创建一个：

```
NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"text" ascending:YES]; 
```

然后：

```
[categories sortUsingDescriptors:[NSArray arrayWithObject:descriptor]]; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-21T17:24:42.440

试试这个：

```
[categories sortedArrayUsingComparator:^NSComparisonResult(id obj1, id obj2) {
    CategoryItem object1 = (CategoryItem)obj1;
    CategoryItem object2 = (CategoryItem)obj2;
    return [object1.text compare:object2.text];
}]; 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-21T17:26:34.227

它失败了，因为您没有为 CategoryItem 实现本地化CaseInsensitiveCompare。

如果您想这样做，请为 CategoryItem 实现该功能，例如

```
- (NSComparisonResult)localizedCaseInsensitiveCompare:(CategoryItem *)anItem
{
    return [anItem.stringProperty localizedCaseInsensitiveCompare:self.stringProperty];
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-21T17:26:44.927

你做得对。

问题是您正在尝试对字符串进行排序，但您没有字符串，您有 CategoryItems。为了保持相同的代码，您只需`localizedCaseInsensitiveCompare:`为 CategoryItem 实现。在该函数中，比较文本值并返回正确的`NSComparisonResult`. 大概是这样的

```
-(NSComparisonResult)localizedCaseInsensitiveCompare:(CategoryItem *)item2 {
    return [text localizedCaseInsensitiveCompare:[item2 text]];
} 
```

# ios - 如何将触摸手势添加到地图但忽略对引脚和注释的触摸？

> ID：13498636
> 
> 赞同：9
> 
> 时间：2012-11-21T17:18:52.663
> 
> 标签：ios, mapkit, uigesturerecognizer, geometry

我有一个使用`MKCircle`s 显示某些用户操作的半径信息的地图视图。

我想要做的是允许用户`MKCircle`在触摸地图时关闭。但是，如果用户触摸任何其他引脚或本身，我希望`MKCircle`不要关闭。`MKCircle`

有任何想法吗？

这是我当前的代码，它会`MKCircle`在触摸地图的任何部分时关闭：

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(deactivateAllRadars)];
[tap setCancelsTouchesInView:NO];
[_mapView addGestureRecognizer:tap]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T20:06:54.430

在该`deactivateAllRadars`方法中，您可以使用`hitTest:withEvent:`来判断一个是否`MKAnnotationView`已被点击。

[我如何在 MapView 上点击然后将其传递给默认手势识别](https://stackoverflow.com/questions/9700413/how-can-i-catch-tap-on-mapview-and-then-pass-it-to-default-gesture-recognizers)器中显示了一个示例？（这是第二个代码示例）。

如果已点击*注释*，这将使您避免删除圆圈。

如果尚未点击注释，则可以`MKCircle`通过获取触摸的坐标来检查是否被点击（请参阅[如何在 MKMapView 上捕获点击手势](https://stackoverflow.com/questions/4317810/how-to-capture-tap-gesture-on-mkmapview)）并查看从触摸到圆心的距离是否更大比它的半径。

请注意，`deactivateAllRadars`应该将其更改为，`deactivateAllRadars:(UITapGestureRecognizer *)tgr`因为它需要来自相关手势识别器的信息。还要确保在您 alloc+init 的方法选择器的末尾添加一个冒号`tap`。

例如：

```
-(void)deactivateAllRadars:(UITapGestureRecognizer *)tgr
{
    CGPoint p = [tgr locationInView:mapView];

    UIView *v = [mapView hitTest:p withEvent:nil];

    id<MKAnnotation> ann = nil;

    if ([v isKindOfClass:[MKAnnotationView class]])
    {
        //annotation view was tapped, select it...
        ann = ((MKAnnotationView *)v).annotation;
        [mapView selectAnnotation:ann animated:YES];
    }
    else
    {
        //annotation view was not tapped, deselect if some ann is selected...
        if (mapView.selectedAnnotations.count != 0)
        {
            ann = [mapView.selectedAnnotations objectAtIndex:0];
            [mapView deselectAnnotation:ann animated:YES];
        }

        //remove circle overlay if it was not tapped...        
        if (mapView.overlays.count > 0)
        {
            CGPoint touchPoint = [tgr locationInView:mapView];

            CLLocationCoordinate2D touchMapCoordinate 
              = [mapView convertPoint:touchPoint toCoordinateFromView:mapView];

            CLLocation *touchLocation = [[CLLocation alloc] 
              initWithLatitude:touchMapCoordinate.latitude 
              longitude:touchMapCoordinate.longitude];

            CLLocation *circleLocation = [[CLLocation alloc] 
              initWithLatitude:circleCenterLatitude 
              longitude:circleCenterLongitude];

            CLLocationDistance distFromCircleCenter 
              = [touchLocation distanceFromLocation:circleLocation];

            if (distFromCircleCenter > circleRadius)
            {
                //tap was outside the circle, call removeOverlay...
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-21T13:57:00.033

这是我的**Swift 2.1**兼容版本：

```
func didTapOnMap(recognizer: UITapGestureRecognizer) {
    let tapLocation = recognizer.locationInView(self)
    if let subview = self.hitTest(tapLocation, withEvent: nil) {
        if subview.isKindOfClass(NSClassFromString("MKNewAnnotationContainerView")!) {
            print("Tapped out")
        }
    }
} 
```

*MKNewAnnotationContainerView*是一个私有内部类，所以你**不能**像这样直接比较：

```
if subview is MKNewAnnotationContainerView {
} 
```

# mysql - 有没有办法设置自动递增列的主键

> ID：13498637
> 
> 赞同：0
> 
> 时间：2012-11-21T17:20:00.957
> 
> 标签：mysql

```
create table foo (id PK, value integer)

insert into foo (1, 1)
insert into foo (2, 2)
insert into foo (3, 3) 
```

如果我删除所有插入的值并重新插入语句

1.  这些值不是以 1 开头的，即使我的脚本说 1。我该如何控制它？
2.  如果我错误地插入了主键，有没有办法单独更新主键。

IE

```
insert into foo (4, 4)
insert into foo (6, 6) 
```

我想将 key=6 更新为 key=5。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:24:20.170

对于您的第一部分，您可以使用以下命令设置自动增量值：

```
ALTER TABLE tableName AUTO_INCREMENT=1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T17:22:13.023

```
ALTER TABLE Table_name AUTO_INCREMENT = 1;

ALTER TABLE Table_name AUTO_INCREMENT = 99; -- whatever

alter table Table_name drop primary key; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T17:22:12.247

`UPDATE`如果表中不存在所需的值，则可以使用语句。

# asp.net - AJAX Control Tookit Sep 发布 Anti XSS

> ID：13498639
> 
> 赞同：0
> 
> 时间：2012-11-21T17:20:05.043
> 
> 标签：asp.net, ajaxcontroltoolkit

[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/HTMLEditorExtender/HTMLEditorExtender.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/HTMLEditorExtender/HTMLEditorExtender.aspx)

根据上面的链接，据说下载附带的 3 个 DLL 需要引用。

> AntiXSS Sanitizer Provider 包含在 Ajax Control Toolkit 的 CodePlex 版本的 SanitizerProviders 文件夹中。您需要添加对文件夹中包含的所有三个程序集的引用：SanitizerProviders.dll、AntiXSSLibrary.dll 和 HtmlSanitizationLibrary.dll。

但是，从[http://ajaxcontroltoolkit.codeplex.com/](http://ajaxcontroltoolkit.codeplex.com/)下载库后，我在 SanitizerProviders 文件夹中只看到 2 个 DLL：

*   HtmlAgilityPack.dll
*   SanitizerProviders.dll

AntiXSS DLL 在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:15:40.850

AntiXSS 是一个独立的库，您可以从 MS 站点下载

[http://www.microsoft.com/en-us/download/details.aspx?id=28589](http://www.microsoft.com/en-us/download/details.aspx?id=28589)

相对：[如何在没有 Visual Studio 的 ASP.Net 2.0 中包含 Anti-XSS](https://stackoverflow.com/questions/9182253/how-to-include-anti-xss-in-asp-net-2-0-without-visual-studio)

# amazon-web-services - 如何在我的 AWS RDS 上使用数据存储？

> ID：13498641
> 
> 赞同：34
> 
> 时间：2012-11-21T17:19:09.607
> 
> 标签：amazon-web-services

我正在使用 AWS RDS。首先，我从 10 GB 的存储开始。我需要将更多数据导入我的 MySQL。需要知道有多少可用空间！我怎样才能做到这一点 ？它不是我可以在其上运行 df linux 命令的 EC2 实例。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-21T17:40:30.860

看看`FreeStorageSpace`指标。

它可以在**Cloudwatch中的****RDS**指标下找到。

![Cloudwatch 中的指标](../Images/bb35a7d8317b93ba9fbedd49aecce5b0.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-05-01T21:49:30.747

在 RDS Instances 控制台中，您可以选择一个实例并单击“显示监控”。“可用空间”图表是相同的信息。点击图表了解更多详情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-19T04:57:32.573

采用：

```
aws cloudwatch get-metric-statistics  --start-time $(TZ=PST+1 date +%FT%T) --end-time $(TZ=PST date +%FT%T) --period 3600 --namespace AWS/RDS --statistics Maximum --dimensions Name=DBInstanceIdentifier,Value=${yourRDSname} --metric-name FreeStorageSpace 
```

我是如何得到 --dimensions 名称的：

```
aws rds describe-db-instances --output json | less 
```

我如何获得指标名称：

```
http://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/rds-metricscollected.html 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-22T06:56:29.600

转到 RDS 实例

*   点击配置，记下存储（总计）
*   单击监控，检查矩阵“可用存储空间”并记下可用存储空间。
*   做简单的减法：总计 - 免费存储 = 您的答案（使用中的存储）

不要忘记将 GB 转换为 MB :D

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-07-20T10:43:53.590

1.  [在https://console.aws.amazon.com/cloudwatch/](https://console.aws.amazon.com/cloudwatch/)打开 CloudWatch 控制台。

2.  如有必要，更改 AWS 区域。从导航栏中，选择您的 AWS 资源所在的 AWS 区域。有关更多信息，请参阅区域和端点。

3.  在导航窗格中，选择指标。选择 RDS 指标命名空间。

4.  选择一个度量维度，数据库类。

5.  从列表中选择可释放内存

[![可用内存的图像](../Images/66564c7c728c95fc6c77273d9ac3d207.png)](https://i.stack.imgur.com/GMvYw.png)

# javascript - 我的方法总是提醒 Object [Object object]

> ID：13498645
> 
> 赞同：0
> 
> 时间：2012-11-21T17:20:16.823
> 
> 标签：javascript, arrays, object, return

我不知道为什么这些方法总是返回 [Object object]。我的代码在这里：

```
function SetDataDB(){
    alert(new DatabasePlugin.get_account_profiles('settings_account'));
}

var DatabasePlugin = {
    insert_account_profiles : function(array, parameter){
        window.localStorage.setItem(parameter, array);
    },

    get_account_profiles: function(parameter){
        return "Hola";
    }
}; 
```

它总是返回一个对象，但没有指定。我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:25:57.187

尝试这个：

```
function SetDataDB(){
    alert((new DatabasePlugin).get_account_profiles('settings_account'));
} 
```

我假设`get_account_profiles`一个`DatabasePlugin`实例返回一个字符串。

编辑：根据您的编辑，您需要在访问其属性之前定义对象。确保`DatabasePlugin`在您调用的范围内可访问`SetDataDB`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T17:25:09.577

你忘记父母了吗？

```
new DatabasePlugin().get_account_profiles('settings_account') 
```

# jsf-2 - f:ajax 不重新渲染目标 DOM 元素（JBoss 错误？）

> ID：13498646
> 
> 赞同：1
> 
> 时间：2012-11-21T17:20:18.163
> 
> 标签：jsf-2, jboss7.x, seam2

我正在使用默认的 JSF 2.1 运行 JBoss 7.1.0.Final 。

我在让 af:ajax 的渲染属性工作时遇到问题

这是我的代码

```
 <h:form> 
       <h:panelGrid> 
          <h:inputText value="#{bean.text}" > 
             <f:ajax event="keyup" render="text"/> 
          </h:inputText> 
          <h:outputText id="text" value="#{bean.text}" /> 
       </h:panelGrid> 
    </h:form> 
```

用一个豆子：

```
@ManagedBean(name = "bean") 
public class Bean 
{ 
      private String text; 

public String getText()
{
    return text;
}

public void setText(String text)
{
    this.text = text;
}
 } 
```

页面呈现，但在 inputtext 中输入的值不会呈现为 outputtext。

我得到的似乎确实与服务器进行了一些交互

JBAS010152：应用程序错误：事务在请求中仍处于活动状态，状态为 0

发生在每个 keyup 事件上？

请注意，我在 Seam 2.3 中运行它

# php - 使用 codeigniter 的 cron 作业，它不起作用

> ID：13498647
> 
> 赞同：1
> 
> 时间：2012-11-21T17:20:24.640
> 
> 标签：php, codeigniter, codeigniter-routing

我无法使用 codeigniter 运行 cron 作业 ..

我在看谷歌和stackoverflow ..等

但我无法运行它

所有这些命令我都对其进行了测试但不起作用

控制器是：管理方法是：短信

```
php /management/index.php management sms    
wget http://saudi-hotels.info/management/sms    
saudi-hotels.info/index.php/management/sms  
/saudihot/bin/curl http://www.saudi-hotels.info/management/sms  
php /http://saudi-hotels.info/index.php management sms  
saudi-hotels/index.php/management/sms   
php /path/to/index.php management sms >> /dev/null  
/home/saudihot/public_html/index.php management sms 
php /home/saudihot/public_html/index.php "management sms" 
```

这是 cron 工作

这是一个链接[http://saudi-hotels.info/management/sms](http://saudi-hotels.info/management/sms)

我想每分钟运行一次这个链接..

但它不起作用

我不知道命令行中的问题出在哪里或什么？

![在此处输入图像描述](../Images/2de2653a3dc3077c0c3a1c0e698a3335.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:01:59.770

首先检查向 url 发出 HTTP 请求是否真的有效。我怀疑没有得到所需的输出与代码有关。尝试运行

[http://www.saudi-hotels.info/management/sms](http://www.saudi-hotels.info/management/sms)

在网络浏览器中。如果有效，请尝试`wget -q http://www.saudi-hotels.info/management/sms`

或者你可以使用

`PATH_TO_PHP/php PATH_TO_INDEX.PHP/index.php management sms`

更新：

* * *

我试图通过浏览器[访问 http://www.saudi-hotels.info/management/sms](http://www.saudi-hotels.info/management/sms)它把我重定向到主页。似乎有一些路由问题。检查 config 文件夹中的 .htaccess 和 routes.php

# regex - 从 csv 文件中的整数字段中删除文本

> ID：13498648
> 
> 赞同：2
> 
> 时间：2012-11-21T17:20:26.350
> 
> 标签：regex, text, csv, sed, integer

我有一个看起来像这样的大 .csv 文件

```
19186;1964;F;001;;;;19000101;21000101;20110630
19187;1972;M;001;MMag. Dr.;;;19000101;21000101;20110630
19190;1936;F;999;3;;;19000101;21000101;20110630 
```

每次第 5 个值*不是小于 10（不是 0-9）的整数*时，都应将其删除。所以结果应该是这样的

```
19186;1964;F;001;;;;19000101;21000101;20110630
19187;1972;M;001;;;;19000101;21000101;20110630
19190;1936;F;999;3;;;19000101;21000101;20110630 
```

如何做到这一点`sed`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T17:37:08.463

您可以在 sed 中执行此操作，但使用 awk 更简单：

```
awk 'BEGIN{FS=OFS=";"} $5!~/^[0-9]$/{$5=""} 1' file 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T17:26:00.687

如果您可以改用，我认为`awk`这比解决方案更容易阅读：`sed`

```
#!/bin/bash

awk 'BEGIN{FS=OFS=";"}
     {if (($5 >= 10) || ($5 < 0) || ($5 % 1 != 0)) {$5=""} print}' in_file 
```

*输入：*

```
19186;1964;F;001;;;;19000101;21000101;20110630
19187;1972;M;001;MMag. Dr.;;;19000101;21000101;20110630
19190;1936;F;999;3;;;19000101;21000101;20110630
19190;1936;F;999;-3;;;19000101;21000101;20110630
19190;1936;F;999;3.5;;;19000101;21000101;20110630
19190;1936;F;999;10;;;19000101;21000101;20110630 
```

*输出：*

```
19186;1964;F;001;;;;19000101;21000101;20110630
19187;1972;M;001;;;;19000101;21000101;20110630
19190;1936;F;999;3;;;19000101;21000101;20110630
19190;1936;F;999;;;;19000101;21000101;20110630
19190;1936;F;999;;;;19000101;21000101;20110630
19190;1936;F;999;;;;19000101;21000101;20110630 
```

**解释：**

*   `awk`: 调用 awk 命令
*   `'...'`: 在单引号内提供 awk 的说明
*   `BEGIN{FS=OFS=";"}`：在读取输入之前，告诉`awk`它`;`用作输入和输出的分隔符​​（FS 代表字段分隔符，OFS 代表输出字段分隔符）
*   `{if (($5 >= 10) || ($5 < 0) || ($5 % 1 != 0)) {$5=""}`：如果第 5 个字段不在 之间`0-9`，或者不是整数，则将该字段设置为空字符串。
*   `print`：打印（可能）修改的行。
*   `in_file``awk`：指定“in_file”作为脚本的输入文件
*   （可选）添加`> out_file`到上述脚本的末尾以将输出重定向到文件而不是`stdout`

**或者：**对于更清洁和更强大的解决方案，请参阅 Ed 的回答。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T22:08:31.947

这可能对您有用（GNU sed）：

```
sed -r 's/^(([^;]*;){4})[^;0-9]+/\1/' file 
```

# sql-server - SQL Server：sp_send_dbmail 在调用存储过程时从不将电子邮件排队

> ID：13498650
> 
> 赞同：0
> 
> 时间：2012-11-21T17:20:33.383
> 
> 标签：sql-server, tsql, sp-send-dbmail

我有一个 SQL 作业，它设置为运行`sp_send_dbmail`并将存储过程的结果作为 csv 文件附加到电子邮件中。这项工作一直持续到一个半星期前。

完全披露：我在那个时候对存储过程进行了更改。存储过程以前查看一个链接服务器中的表，现在查看另一个链接服务器中的表。

我能够从工作中取出代码并在查询窗口中成功运行它，我还能够在没有`sp_send_dbmail`调用的情况下在查询窗口中成功执行存储过程。此外，作业按计划执行并报告成功，并且我在作业历史记录中没有看到任何错误消息。我在作业中包含了运行该过程并在下面发送邮件的代码：

```
USE msdb
GO
EXEC msdb.dbo.sp_send_dbmail
    @profile_name = 'SMail',
    @recipients = 'xxxx@example.com',
    @query = 'EXEC [REP01].[Mktg_Reporting].[dbo].DailyC2C',
    @subject = 'Daily Call History',
    @query_result_separator=',',
    @query_result_no_padding=1,
    @query_result_header=0,
    @attach_query_result_as_file = 1,
    @exclude_query_output=1,
    @query_attachment_filename='Calls.csv'; 
```

自创建作业以来，我没有更改任何此代码，我只是在存储过程中进行了更改，以便它查看不同的链接数据源。任何形式的帮助表示赞赏。

编辑：我还检查了`sysmail_mailitems`表格，每次手动运行作业时都没有发现当天排队的消息，想确保我包含了该详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:31:40.607

我只是对此进行了更深入的研究，Pondlife 在权限问题上走在了正确的轨道上。在我最初回复他后，我看了更深一点，并意识到 NT AUTHORITY\SYSTEM 用户没有设置为正确访问链接服务器。我已经解决了这个问题。

# jms - 骆驼、JMS、CLIENT_ACKNOWLEDGE 模式

> ID：13498652
> 
> 赞同：11
> 
> 时间：2012-11-21T17:19:36.093
> 
> 标签：jms, apache-camel

我知道 Camel 的 JMS 组件，用于接收消息，使用 Springs DefaultMessageListenerContainer。它可以配置为使用 CLIENT_ACKNOWLEDGE 模式来确认消息。我的问题是，何时调用 message.acknowledge() 方法？它是由 Spring 的侦听器容器在内部调用的吗？

或者我可以按自己的意愿以某种方式确认消息吗？

我想避免消息丢失的情况，因为我的应用程序在处理这些消息的过程中崩溃了，并且使其事务性对我来说似乎有点太重了

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-21T21:36:34.840

好的。经过一些调试和扫描源代码后，我发现 Camel 使用 Spring MessageListenerContainers。在 CLIENT_AKNOWLEDGE 模式下，AbstractMessageListenerContainer 调用确认消息的comitIfNecessary 方法。仅在注册 MessageListener 成功处理消息后才会发生这种情况（无例外）

Camel 使用 EndpointMessageListener ，它最终调用下一个处理器（或生产者）的过程方法。由于这是典型的责任链，如果沿途的任何处理器抛出异常或在 Exchange 上设置异常，EndpointMessageListener 将重新抛出异常，从而阻止 AbstractMessageListener 确认消息。

# java - 如何在 PIG 中转置列和行

> ID：13498657
> 
> 赞同：0
> 
> 时间：2012-11-21T17:20:47.490
> 
> 标签：java, apache-pig

我不确定这是否可以使用内置的 PIG 脚本来完成，或者我需要编写一个 UDF。但我基本上有一个表，我只是想转置数据。

简单地说，给定：

```
(1, 2, 3, 4, 5)
(6, 7, 8, 9, 10)
(11, 12, 13, 14, 15)
 ... 300 plus more tuples 
```

我最终会得到：

```
(1,6,11,...) -> goes on for a few hundred more
(2,7,12,...)
(3,8,13,...)
(4,9,14,...)
(5,10,15,...) 
```

关于我如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:32:24.157

这对 Pig 来说是不可能的，也没有多大意义。请记住，关系是一个元组包，根据定义，一个包不能保证其元组具有任何特定顺序。你可以从

```
(1, 2, 3, 4, 5)
(6, 7, 8, 9, 10)
(11, 12, 13, 14, 15) 
```

但从 Pig 的角度来看，这与

```
(11, 12, 13, 14, 15)
(1, 2, 3, 4, 5)
(6, 7, 8, 9, 10) 
```

这意味着“转置”定义不明确。这样看——如果你转置两次，你最终应该得到相同的数据结构，但是因为元组可以在此过程中重新排序，所以不能保证会发生这种情况。

最后，如果你真的必须做矩阵运算，你最好使用一个尊重行和列排序的工具。

也就是说，你想要完成什么？

# objective-c - 跟踪 iCloud 文件的上传进度

> ID：13498658
> 
> 赞同：1
> 
> 时间：2012-11-21T17:20:51.300
> 
> 标签：objective-c, ios, cocoa, icloud

我正在编写一个使用 iCloud 的 Unity 插件。

现在我目前用于将文件移动到 iCloud 的方式是使用以下代码：

```
 [byteDocument saveToURL:savePathURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success)
     {
         if (ubiquitousContainerURL != nil)
         {
             NSURL *ubiquityDocumentDirectory = [ubiquitousContainerURL
                                                 URLByAppendingPathComponent:@"Documents"
                                                 isDirectory:YES];

             ubiquityDocumentDirectory = [ubiquityDocumentDirectory URLByAppendingPathComponent:[NSString stringWithFormat:@"%@%@", filename, extension]];

             NSFileManager* fm = [NSFileManager defaultManager];

             dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

                 NSError* error = nil;

                 if (![fm fileExistsAtPath:ubiquityDocumentDirectory.path])
                 {
                     NSLog(@"Attemping to move to cloud");
                     didMoveToCloud = [fm setUbiquitous:YES itemAtURL:savePathURL destinationURL:ubiquityDocumentDirectory error:nil];
                 }
                 else
                 {
                     NSLog(@"Attemping to replace in cloud");
                     didMoveToCloud = [fm replaceItemAtURL:ubiquityDocumentDirectory withItemAtURL:savePathURL backupItemName:nil options:0 resultingItemURL:nil error:&error];
                 }

                 if (didMoveToCloud)
                 {
                     NSLog(@"Did move text document successfully to cloud");
                     //UnitySendMessage("GameObject", "DidSaveFile", [savePathURL.path cStringUsingEncoding:NSASCIIStringEncoding]);
                 }
                 else
                 {
                     NSLog(@"Failed to move text document to cloud");
                     //UnitySendMessage("GameObject", "DidSaveFile", [savePathURL.path cStringUsingEncoding:NSASCIIStringEncoding]);
                 }

                 if (error != nil)
                 {
                     NSLog(@"Error saving text document to cloud: %@", error.description);
                     //UnitySendMessage("GameObject", "DidSaveFile", [savePathURL.path cStringUsingEncoding:NSASCIIStringEncoding]);
                 }
             });
         }
     }]; 
```

基本上我只是使用一个简单的*UIDocument*继承类，称为*CloudByteDocument*。我首先将其保存在本地设备上，然后将其移至 iCloud。

现在的问题是使用***SetUbiquituos***似乎没有提供任何跟踪上传进度的方法？我已经连接到两个*MSMetaDataQuery*观察者，即：

```
 // Listen for the second phase live-updating
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(queryDidReceiveNotification:) name:NSMetadataQueryDidUpdateNotification object:nil];

// Listen for the first phase gathering
[[NSNotificationCenter defaultCenter] addObserver:self
                                      selector:@selector(queryIsDoneGathering:) name:NSMetadataQueryDidFinishGatheringNotification
                                           object:nil]; 
```

而且我还意识到您可以在*NSMetadataQueryDidUpdateNotification*期间获得上传和下载进度等信息，但是这种更新方法似乎并不总是提供非常可靠的结果。

我想知道是否有任何方法可以在文件上传到 iCloud 时使用实际的回调方法通知您？或者*NSMetadataQueryDidUpdateNotification*方法是这样做的标准方法吗？

任何提示和帮助都会得到帮助:)

感谢您的时间 ：）

# java - 我可以在现有正在运行的 jvm 中实例化类并与活动对象交互吗？

> ID：13498659
> 
> 赞同：0
> 
> 时间：2012-11-21T17:20:54.853
> 
> 标签：java, jvm

这不是关于两个 JVM 相互通信，而是关于“加入”现有的正在运行的 JVM，防止创建额外的进程。

我们正在部署一个具有数据收集组件、GUI 操作员界面和数据记录组件（在 java 中）的控制系统。

数据记录组件和 GUI 都使用数据收集组件。通常不会有问题，它们都生活在同一个虚拟机中，并且可以通过事件或观察者模式获取更新。问题是数据记录器必须在机器启动时运行（linux），但 GUI 仅在用户登录时运行。如果创建了数据收集组件的两个实例（即在两个 JVM 中），则会导致我们的通讯出现问题监控超出了这个问题的范围，但我们只是说要求只能运行数据收集组件的一个实例。

有什么方法可以在现有的、正在运行的 VM 中实例化一个类？此类对象能否与 VM 中的活动对象进行交互？我想做的是将数据记录器作为守护进程运行，创建一个 JVM，然后当用户登录到操作系统时，在正在运行的 VM 中实例化 GUI 类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:41:03.997

> 有什么方法可以在现有的、正在运行的 VM 中实例化一个类？

RMI、JMS、JMX、套接字、数据报。

> 此类对象能否与 VM 中的活动对象进行交互？

是的。

> 我想做的是将数据记录器作为守护进程运行，创建一个 JVM，然后当用户登录到操作系统时，在正在运行的 VM 中实例化 GUI 类。

操作系统可能会阻止您这样做，除非该进程在用户登录时运行。即一个用户无法在另一个用户使用的屏幕上显示 GUI。如果操作系统允许，则没有问题。

当然，您通常会运行两个 JVM，一个与另一个通信（解决任何安全问题），因为只有一个 JVM 几乎没有优势。

# google-app-engine - 每次部署到 Appengine 时都会编译 GWT

> ID：13498661
> 
> 赞同：2
> 
> 时间：2012-11-21T17:20:57.837
> 
> 标签：google-app-engine, gwt

每次我将项目部署到 appengine 时，GWT 模块都会重新编译（这需要几分钟）。即使代码没有更改并且我只是更新服务器代码，也会发生这种情况。我怎样才能阻止这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T21:48:19.093

帕特里克，如果您不进行任何更改，我不确定您为什么要部署到应用程序引擎。无论如何，您可以执行以下操作：

右键单击您的项目->导出->作为战争

创建战争时，它不会编译，然后您可以使用 appcfg 工具手动将 .war 上传到 App Engine。

**编辑：**不需要使用 eclipe 导出，您需要做的就是使用 appcfg 工具并从 eclipse 构建。

查看[此](https://developers.google.com/appengine/docs/java/tools/uploadinganapp#Uploading_the_App)内容以获取有关使用 appcfg 进行部署的更多信息。

# grid - Web Grid服务器分页在更改页面时触发多个控制器调用

> ID：13498665
> 
> 赞同：3
> 
> 时间：2012-11-21T17:21:22.830
> 
> 标签：grid, kendo-ui

当我在“au”我的网络网格上进行服务器过滤并更改页面时，对控制器的多次调用完成：

1.  第一个用 0 过滤，
2.  第二个用“a”过滤，
3.  第三个带有“au”过滤。

我的表加载了大量数据，因此第一次调用比其他调用更长。我看到网格首先显示第三个调用结果，然后是第二个，最后是第一个调用（由于 filter 参数，此顺序对应于我的控制器的响应时间）

为什么要进行所有控制器调用？不能只用我的总过滤器“au”调用一次我的控制器吗？我应该怎么办 ？

这是我的网格：

```
$("#" + gridId).kendoGrid({
            selectable: "row",
            pageable: true,
            filterable:true,
            scrollable : true,
            //scrollable: {
            //    virtual: true //false // Bug : Génère un affichage multiple...
            //},
            navigatable: true,
            groupable: true,
            sortable: {
                mode: "multiple", // enables multi-column sorting
                allowUnsort: true
            },
            dataSource: {
                type: "json",
                serverPaging: true,
                serverSorting: true,
                serverFiltering: true,
                serverGrouping:false, // Ne fonctionne pas...
                pageSize: '@ViewBag.Pagination',
                transport: {
                    read: {
                        url: Procvalue + "/LOV",
                        type: "POST",
                        dataType: "json",
                        contentType: "application/json; charset=utf-8"
                    },
                    parameterMap: function (options, type) {
                        // Mise à jour du format d'envoi des paramètres 
                        // pour qu'ils puissent être correctement interprétés côté serveur.
                        // Construction du paramètre sort : 
                        if (options.sort != null) {
                            var sort = options.sort;
                            var sort2 = "";
                            for (i = 0; i < sort.length; i++) {
                                sort2 = sort2 + sort[i].field + '-' + sort[i].dir + '~';
                            }
                            options.sort = sort2;
                        }
                        if (options.group != null) {
                            var group = options.group;
                            var group2 = "";
                            for (i = 0; i < group.length; i++) {
                                group2 = group2 + group[i].field + '-' + group[i].dir + '~';
                            }
                            options.group = group2;
                        }
                        if (options.filter != null) {
                            var filter = options.filter.filters;
                            var filter2 = "";
                            for (i = 0; i < filter.length; i++) {
                                // Vérification si type colonne == string.
                                // Parcours des colonnes pour trouver celle qui a le même nom de champ.
                                var type = "";
                                for (j = 0 ; j < colonnes.length ; j++) {
                                    if (colonnes[j].champ == filter[i].field) {
                                        type = colonnes[j].type;
                                        break;
                                    }
                                }

                                if (filter2.length == 0) {
                                    if (type == "string") { // Avec '' autour de la valeur.
                                        filter2 = filter2 + filter[i].field + '~' + filter[i].operator + "~'" + filter[i].value + "'";
                                    } else { // Sans '' autour de la valeur.
                                        filter2 = filter2 + filter[i].field + '~' + filter[i].operator + "~" + filter[i].value;
                                    }
                                } else {
                                    if (type == "string") { // Avec '' autour de la valeur.
                                        filter2 = filter2 + '~' + options.filter.logic + '~' + filter[i].field + '~' + filter[i].operator + "~'" + filter[i].value + "'";
                                    }else{
                                        filter2 = filter2 + '~' + options.filter.logic + '~' + filter[i].field + '~' + filter[i].operator + "~" + filter[i].value;
                                    }
                                }
                            }
                            options.filter = filter2;
                        }
                        var json = JSON.stringify(options);
                        return json;
                    }
                },
                schema: {
                    data: function (data) {
                        return eval(data.data.Data);
                    },
                    total: function (data) {
                        return eval(data.data.Total);
                    }
                },
                filter: {
                    logic: "or",
                    filters:filtre(valeur)
                }
            },
            columns: getColonnes(colonnes)
        }); 
```

这是我的控制器：

```
[HttpPost]
    public ActionResult LOV([DataSourceRequest] DataSourceRequest request)
    {
        return Json(CProduitsManager.GetProduits().ToDataSourceResult(request));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T22:57:34.873

3 对应于初始负载（无过滤）和以下在您输入过滤条件时的负载，类似`kendoAutocomplete`但`kendoAutocomplete`有几个选项（时间和最小长度）控制何时发送请求（我不能'在网格中找不到类似的东西）。

如果您的问题是加载大量数据，我建议限制`pageSize`在`DataSource`定义中使用的传输数据的大小。但是，显然，如果执行查询需要很长时间，这不是一个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:38:02.103

在这种情况下，建议创建一个打字延迟，从而在用户停止打字时执行请求（除非他的打字速度比常规打字慢）。

为了造成延迟，我可以建议您执行以下操作：

```
 <script type="text/javascript">        
    var globalTimeout = null;
    $('#searchInput').keyup(function () {
        if (globalTimeout != null) clearTimeout(globalTimeout);
        globalTimeout = setTimeout(SearchFunc, 500);
    });   

    function SearchFunc(){  
        globalTimeout = null;
        $('#yourGridName').data('kendoGrid').dataSource.filter({ field:"theField",operator:"startswith",value:$('#searchInput').val() })
    }
    </script> 
```

# php - osTicket 使用新票上传文件

> ID：13498673
> 
> 赞同：0
> 
> 时间：2012-11-21T17:21:33.573
> 
> 标签：php, upload

我正在尝试在客户端表单中添加一个新字段以获取新票（员工端不是必需的，但如果都是一样的......），以便用户可以上传文件。我在管理面板中看到了“允许上传功能”设置，所以我相信这是可能的。我是 osTicket 的新手，所以如果这很明显，请原谅我。

我应该编辑哪个文件？你们能给我一个线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T19:21:22.627

```
There are settings in backend of osticket just enable those ones
 step1- login to backend of osticket with admin privileges
 step2- click on tab settings(next to dashboard).
 step3- within settings click on tab tickets.
 step4- There is Attachment section on this page.enable checkbox in front of 
        **Allow Attachments,online web attachments** etc.
 step5- change other settings as per requirement also you can specify the required file   types like .jpg,.png along with .doc and .pdf.
step6- Save the changes.

 If you want more customization you can edit file here osticket/include/client/open.inc.php 
```

# vb.net - 使用手机从 vb.net 应用程序发送短信

> ID：13498676
> 
> 赞同：2
> 
> 时间：2012-11-21T17:22:00.543
> 
> 标签：vb.net, sms, send, mobile-phones, cellular-network

我正在开发一个在 VB.Net 中为客户生成账单的软件。我在 Windows 7 上使用 vs2010 并将我的 PC 连接到 Android 手机。我想通过手机从我的应用程序向所有客户发送短信。手机当然有SIM卡可以打电话和发短信。我需要完成这项工作的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:08:43.993

如果您的 PC 是 XP 或 Vista，您需要将 AT 命令发送到连接手机的调制解调器端口。如果是 Win 7 或 8，您可以使用 Windows Mobile Broadband API 发送 SMS。如果您在以前称为 Metro 的接口中进行开发，则还有另一个等效于 MB API 的 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:52:54.397

Have you considered integrating with [Twilio](http://twilio.com)? They even have some [handy .NET libraries](http://www.twilio.com/docs/libraries) making this dropdead easy.

# java - 在 CardLayout 中的类之间传递数据

> ID：13498678
> 
> 赞同：4
> 
> 时间：2012-11-21T17:22:07.317
> 
> 标签：java, swing, methods, cardlayout

请看下面的代码

**向导面板.java**

```
package wizardGUI;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class WizardPanel extends JDialog
{
    private JPanel cardPanel, buttonPanel;
    private JButton next,previous;
    private CardLayout c1;

    private FileSelector fileSelector;
    private DelemeterSelector delemeterSelector;

    private int count = 1;

    public WizardPanel()
    {
        //Intializing instance variables
        fileSelector = FileSelector.getInstance();
        delemeterSelector = DelemeterSelector.getInstance();

        cardPanel = new JPanel();
        c1 = new CardLayout();
        cardPanel.setLayout(c1);

        cardPanel.add(fileSelector,"1");
        cardPanel.add(delemeterSelector,"2");

        c1.show(cardPanel, "1");;

        buttonPanel = new JPanel();
        buttonPanel.setLayout(new FlowLayout(FlowLayout.RIGHT));

        next = new JButton("Next");
        next.addActionListener(new NextButtonAction());
        previous = new JButton("Previous");

        buttonPanel.add(next);
        buttonPanel.add(previous);

        //Creating the GUI
        this.setLayout(new BorderLayout());
        this.add(cardPanel,"Center");
        this.add(buttonPanel,"South");

        this.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        this.setResizable(true);
        this.pack();
        this.setVisible(true);

    }

    private class NextButtonAction implements ActionListener
    {
        public void actionPerformed(ActionEvent ae)
        {

                c1.show(cardPanel, "2");

        }
    }
} 
```

**文件选择器.java**

```
package wizardGUI;

/*This is the first panel is wazard GUI. Using this window user can select the correct file
  which contains the data required to create the table
 */

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class FileSelector extends JPanel
{
    private JLabel fileName, description;
    private JTextField fileTxt;
    private JButton browse;

    private GridBagLayout gbl;
    private GridBagConstraints gbc;

    private static FileSelector instance = null;

    private FileSelector()
    {
        //Intializing instance variables
        fileName = new JLabel("File Name: ");
        description = new JLabel("Specify the source of the data");

        fileTxt = new JTextField(10);

        browse = new JButton("Browse");

        gbl = new GridBagLayout();
        gbc = new GridBagConstraints();

        //Creating GUI
        this.setLayout(gbl);

        gbc.gridx = 1;
        gbc.gridy = 1;
        gbc.weightx = 0.0;
        gbc.weighty = 0.0;
        gbc.fill = GridBagConstraints.BOTH;
        this.add(description,gbc);

        gbc.gridx = 1;
        gbc.gridy = 2;
        gbc.weightx = 1.0;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(0,10,0,0);
        this.add(locationPanel(),gbc);

        this.setBorder(BorderFactory.createEmptyBorder());
    }

    private JPanel locationPanel()
    {
        JPanel panel = new JPanel();
        panel.setLayout(new FlowLayout());

        panel.add(fileName);
        panel.add(fileTxt);
        panel.add(browse);

        return panel;
    }

    public static FileSelector getInstance()
    {
        if(instance==null)
        {
            instance = new FileSelector();
        }

        return instance;
    }
} 
```

**删除选择器.java**

```
/*This is the second windows in wizard
This class is designed to let the user to select the delemeter to break information */

package wizardGUI;

import java.awt.event.*;
import java.awt.*;
import javax.swing.*;

public class DelemeterSelector extends JPanel
{
    private JLabel description;
    private JRadioButton tabBtn, semicolanBtn, commaBtn, spaceBtn;
    private JTextArea txtArea;
    private JScrollPane scroll;
    private ButtonGroup btnGroup;

    private GridBagLayout gbl;
    private GridBagConstraints gbc;

    private static DelemeterSelector instance = null;

    private DelemeterSelector()
    {
        //Initializing instance variables
        description = new JLabel("What delemeter separates your fields? Select the appropreiate delemeter");

        tabBtn = new JRadioButton("Tab");
        semicolanBtn = new JRadioButton("Semicolan");
        commaBtn = new JRadioButton("Comma");
        spaceBtn = new JRadioButton("Space");

        btnGroup = new ButtonGroup();
        btnGroup.add(tabBtn);
        btnGroup.add(semicolanBtn);
        btnGroup.add(commaBtn);
        btnGroup.add(spaceBtn);

        txtArea = new JTextArea(20,70);

        scroll = new JScrollPane(txtArea);

        gbl = new GridBagLayout();
        gbc = new GridBagConstraints();

        this.setLayout(gbl);

        //Creating the GUI
        gbc.gridx = 1;
        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(20,0,0,0);
        this.add(description,gbc);

        gbc.gridx = 1;
        gbc.gridy = 2;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(20,0,0,0);
        this.add(radioPanel(),gbc);

        gbc.gridx = 1;
        gbc.gridy = 3;
        gbc.insets = new Insets(10,0,0,0);
        gbc.fill = GridBagConstraints.BOTH;
        this.add(scroll,gbc);
    }

    private JPanel radioPanel()
    {
        JPanel panel = new JPanel();
        panel.setLayout(new FlowLayout());

        panel.add(tabBtn);
        panel.add(semicolanBtn);
        panel.add(commaBtn);
        panel.add(spaceBtn);

        panel.setBorder(BorderFactory.createTitledBorder("Choose the Delimeter that seperates your fields"));

        return panel;
    }

    public static DelemeterSelector getInstance()
    {
        if(instance == null)
        {
            instance = new DelemeterSelector();
        }

        return instance;
    }
} 
```

**主.java**

```
package wizardGUI

    import java.awt.event.*;
    import java.awt.*;
    import javax.swing.*;

    public class Main extends JFrame
    {
        public Main()
        {
            new WizardPanel().setVisible(true);
        }

        public static void main(String[]args)
        {
            try
            {
                UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                new Main();
            }
            catch(Exception e)
            {
                e.printStackTrace();
            }
        }
    } 
```

在这里，我们只有两个按钮“Next”和“Previous”，它们对所有 JPanel 都是通用的，因为它出现在“WizardPanel”的“South”，而其他 JPanel 位于中心。

现在，让我们来看看“FileSelector”。猜猜我使用浏览按钮选择了一个文件。

现在我怎样才能将此信息发送到下一个面板？这意味着“DelemeterSelector”？我只有 2 个“常见”按钮“下一个”和“上一个”，它们位于另一个类中。我不认为在“下一个”或“上一个”按钮的 actionListener 中编写业务逻辑（从“FileSelector”获取选定的文件并将其发送到“DelemeterSelector”）是一个好主意。因为，我必须访问另一个类，获取数据并将其发送到下一个 JPanel（下一个类）。会有更多的 JPanel，所以这将非常困难并且肯定会失败。

我想为每个 JPanel 添加“下一个”和“上一个”按钮，而不是常见的按钮。但是问题是从一个面板转移到另一个面板，因为缺少对 CardLayout 的引用。

请帮助我在此向导中找到一种正确有效的方式将数据从一个类传递到另一个类。谢谢。

PS：

我不想在“下一步”按钮操作类中进行条件检查并让它保存所有操作。有关示例，请参见以下示例代码片段

```
//NON TESTED, NON COMPILED EXAMPLE CODE.
private class NextButtonAction implements ActionListener
{
         public void actionPerformed(ActionEvent ae)
         {

              if(fileSelector.isVisible(true))
              {
                  //Access FileSelector
                  // Get the Data
                  // send data into delemeter class
               }
               else if(delemeterSelector.isVisible(true))
               {
                  //Access delemeterSelector
                  // Get the Data
                  // send data into other class
               }
                else if(SOME_OTHER_CLASS.isVisible(true))
               {
                  //Access delemeterSelector
                  // Get the Data
                  // send data into other class
               }
       }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T18:03:39.187

午休结束了，所以我有时间发布示例代码，但我会尽量在一天结束之前回来解释它：

```
import java.awt.*;
import java.awt.event.*;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;

import javax.swing.*;
import javax.swing.event.SwingPropertyChangeSupport;

public class MainGui {
   public MainGui() {
      new WizardPanel().setVisible(true);
   }

   public static void main(String[] args) {
      try {
         UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
         new MainGui();
      } catch (Exception e) {
         e.printStackTrace();
      }
   }
}

class WizardPanel extends JDialog {
   private JPanel cardPanel, buttonPanel;
   private JButton next, previous;
   private CardLayout c1;
   private SimpleModel simpleModel = new SimpleModel();

   private FileSelector fileSelector;
   private DelemeterSelector delemeterSelector;

   private int count = 1;

   public WizardPanel() {
      fileSelector = FileSelector.getInstance();
      delemeterSelector = DelemeterSelector.getInstance();

      fileSelector.setModel(simpleModel); //!!
      delemeterSelector.setModel(simpleModel); //!!

      cardPanel = new JPanel();
      c1 = new CardLayout();
      cardPanel.setLayout(c1);

      cardPanel.add(fileSelector, "1");
      cardPanel.add(delemeterSelector, "2");

      c1.show(cardPanel, "1");

      buttonPanel = new JPanel();
      buttonPanel.setLayout(new FlowLayout(FlowLayout.RIGHT));

      next = new JButton("Next");
      next.addActionListener(new NextButtonAction());
      previous = new JButton("Previous");

      buttonPanel.add(next);
      buttonPanel.add(previous);

      // Creating the GUI
      this.setLayout(new BorderLayout());
      this.add(cardPanel, "Center");
      this.add(buttonPanel, "South");

      this.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
      this.setResizable(true);
      this.pack();
      this.setVisible(true);

   }

   private class NextButtonAction implements ActionListener {
      public void actionPerformed(ActionEvent ae) {

         // c1.show(cardPanel, "2");
         c1.next(cardPanel); //!!

      }
   }
}

class FileSelector extends JPanel {
   private JLabel fileName, description;
   private JTextField fileTxt;
   private JButton browse;

   private GridBagLayout gbl;
   private GridBagConstraints gbc;
   private SimpleModel simpleModel;

   private static FileSelector instance = null;

   private FileSelector() {
      // Intializing instance variables
      fileName = new JLabel("File Name: ");
      description = new JLabel("Specify the source of the data");

      fileTxt = new JTextField(10);

      browse = new JButton("Browse");
      browse.addActionListener(new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent e) {
            if (simpleModel != null) {
               simpleModel.setFileText(fileTxt.getText());
            }
         }
      });

      gbl = new GridBagLayout();
      gbc = new GridBagConstraints();

      // Creating GUI
      this.setLayout(gbl);

      gbc.gridx = 1;
      gbc.gridy = 1;
      gbc.weightx = 0.0;
      gbc.weighty = 0.0;
      gbc.fill = GridBagConstraints.BOTH;
      this.add(description, gbc);

      gbc.gridx = 1;
      gbc.gridy = 2;
      gbc.weightx = 1.0;
      gbc.fill = GridBagConstraints.BOTH;
      gbc.insets = new Insets(0, 10, 0, 0);
      this.add(locationPanel(), gbc);

      this.setBorder(BorderFactory.createEmptyBorder());
   }

   public void setModel(SimpleModel simpleModel) {
      this.simpleModel = simpleModel;
   }

   private JPanel locationPanel() {
      JPanel panel = new JPanel();
      panel.setLayout(new FlowLayout());

      panel.add(fileName);
      panel.add(fileTxt);
      panel.add(browse);

      return panel;
   }

   public static FileSelector getInstance() {
      if (instance == null) {
         instance = new FileSelector();
      }

      return instance;
   }
}

class DelemeterSelector extends JPanel {
   private JLabel description;
   private JRadioButton tabBtn, semicolanBtn, commaBtn, spaceBtn;
   private JTextArea txtArea;
   private JScrollPane scroll;
   private ButtonGroup btnGroup;

   private GridBagLayout gbl;
   private GridBagConstraints gbc;
   private SimpleModel simpleModel;

   private static DelemeterSelector instance = null;

   private DelemeterSelector() {
      description = new JLabel(
            "What delemeter separates your fields? Select the appropreiate delemeter");

      tabBtn = new JRadioButton("Tab");
      semicolanBtn = new JRadioButton("Semicolan");
      commaBtn = new JRadioButton("Comma");
      spaceBtn = new JRadioButton("Space");

      btnGroup = new ButtonGroup();
      btnGroup.add(tabBtn);
      btnGroup.add(semicolanBtn);
      btnGroup.add(commaBtn);
      btnGroup.add(spaceBtn);

      txtArea = new JTextArea(20, 70);

      scroll = new JScrollPane(txtArea);

      gbl = new GridBagLayout();
      gbc = new GridBagConstraints();

      this.setLayout(gbl);

      // Creating the GUI
      gbc.gridx = 1;
      gbc.gridy = 1;
      gbc.fill = GridBagConstraints.BOTH;
      gbc.insets = new Insets(20, 0, 0, 0);
      this.add(description, gbc);

      gbc.gridx = 1;
      gbc.gridy = 2;
      gbc.fill = GridBagConstraints.BOTH;
      gbc.insets = new Insets(20, 0, 0, 0);
      this.add(radioPanel(), gbc);

      gbc.gridx = 1;
      gbc.gridy = 3;
      gbc.insets = new Insets(10, 0, 0, 0);
      gbc.fill = GridBagConstraints.BOTH;
      this.add(scroll, gbc);
   }

   private JPanel radioPanel() {
      JPanel panel = new JPanel();
      panel.setLayout(new FlowLayout());

      panel.add(tabBtn);
      panel.add(semicolanBtn);
      panel.add(commaBtn);
      panel.add(spaceBtn);

      panel.setBorder(BorderFactory
            .createTitledBorder("Choose the Delimeter that seperates your fields"));

      return panel;
   }

   //!!
   public void setModel(final SimpleModel simpleModel) {
      this.simpleModel = simpleModel;
      simpleModel.addPropertyChangeListener(new PropertyChangeListener() {

         @Override
         public void propertyChange(PropertyChangeEvent evt) {
            if (SimpleModel.FILE_TEXT.equals(evt.getPropertyName())) {
               txtArea.append("File Text: " + simpleModel.getFileText() + "\n");
            }         
         }
      });
   }

   public static DelemeterSelector getInstance() {
      if (instance == null) {
         instance = new DelemeterSelector();
      }

      return instance;
   }
}

class SimpleModel {
   public static final String FILE_TEXT = "file text";
   private SwingPropertyChangeSupport pcSupport = 
      new SwingPropertyChangeSupport(this);
   private String fileText;

   public void addPropertyChangeListener(PropertyChangeListener listener) {
      pcSupport.addPropertyChangeListener(listener);
   }

   public void removePropertyChangeListener(PropertyChangeListener listener) {
      pcSupport.removePropertyChangeListener(listener);
   }

   public void setFileText(String fileText) {
      String oldValue = this.fileText;
      String newValue = fileText;
      this.fileText = fileText;
      pcSupport.firePropertyChange(FILE_TEXT, oldValue , newValue);

   }

   public String getFileText() {
      return fileText;
   }

} 
```

**编辑**代码说明：

这是对模型-视图-控制器或**MVC设计模式的****粗略**简化，因为它只不过是模型和视图**。**模型包含 GUI 使用的数据和逻辑，本质上是程序的“大脑”，而 GUI 只不过是信息的愚蠢显示。

 ****这里的模型非常简单，只包含一个名为 fileText 的 String 字段。它有这个字段的 setter 和 getter，最有趣的是 setter 是连线的，所以它会通知任何想知道这个字段是否改变过的侦听器。这个使用 PropertyChangeSupport 和允许 PropertyChangeListeners 的过程意味着 fileText 字段是一个[“绑定”属性](http://en.wikipedia.org/wiki/Bound_property)。

您的两个 JPanel 都有字段来保存对同一个 SimpleModel 对象的引用，并且此模型是通过 setter 方法 setModel(...) 设置的。

```
 fileSelector.setModel(simpleModel); // !!
  delemeterSelector.setModel(simpleModel); // !! 
```

如果按下 JButton，我让 FileSelector 对象设置 fileText 字段：

```
 browse.addActionListener(new ActionListener() {

     @Override
     public void actionPerformed(ActionEvent e) {
        if (simpleModel != null) {
           simpleModel.setFileText(fileTxt.getText());
        }
     }
  }); 
```

我让 DelemeterSelector 类将 PropertyChangeListener 添加到模型中，以便在更改 fileText 字段的值时通知它，并且可以在它认为合适的时候对其进行响应：

```
public void setModel(final SimpleModel simpleModel) {
  this.simpleModel = simpleModel;
  simpleModel.addPropertyChangeListener(new PropertyChangeListener() {

     @Override
     public void propertyChange(PropertyChangeEvent evt) {
        if (SimpleModel.FILE_TEXT.equals(evt.getPropertyName())) {
           txtArea.append("File Text: " + simpleModel.getFileText() + "\n");
        }
     }
  });
} 
```

请注意，模型类不知道 GUI 对它所拥有的信息做了什么，这是一件好事，因为这意味着“耦合”是相当松散的。****

# powershell - 如何使用 Powershell 和 WASP 检索对话框文本？

> ID：13498683
> 
> 赞同：2
> 
> 时间：2012-11-21T17:22:17.377
> 
> 标签：powershell

使用 Powershell 和 WASP，我正在尝试自动删除和重新安装服务。

如果未安装该服务，我会看到“Windows Installer”对话框、“此操作仅对当前安装的产品有效”和“确定”按钮。

Powershell 和 WASP 可以检测到“Windows Installer”标题栏和“确定”按钮：

```
$intCountdownSeconds=5
do {
    start-sleep -s 1
    $intCountdownSeconds--
} until ((select-window -title $strWindowsInstallerTitlebar | select-control -title "ok*" -recurse) -or ($intCountdownSeconds -le 0)) 
```

是否可以使用 GetWindowText() 函数检测对话框的“此操作仅有效...”部分？这与我到目前为止所获得的一样接近：

```
select-window -title "windows installer" | select-control | get-member

TypeName: Huddled.Wasp.Control

Name             MemberType Definition
----             ---------- ----------
...
GetWindowText    Method     string GetWindowText()
... 
```

# ruby - Pig-Latin方法翻译

> ID：13498688
> 
> 赞同：2
> 
> 时间：2012-11-21T17:22:36.677
> 
> 标签：ruby, methods

尝试用 ruby​​ 编写 Method 来翻译 pig-latin 中的字符串，规则： 规则 1：如果单词以元音开头，则在单词末尾添加“ay”音。

规则2：如果单词以辅音开头，将其移至单词末尾，然后在单词末尾添加“ay”声音，并且当单词以2个辅音开头时，将两者都移到末尾单词并添加一个“ay”

作为一个新手，我的问题是第二条规则，当单词只以一个辅音开头时它可以工作，但是对于多个辅音，我很难让它工作，有人可以看看代码，让我知道我如何编码那不同，可能是我的错误，可能代码需要重构。谢谢，到目前为止我想出了这个代码：

```
def translate (str)
  str1="aeiou"
  str2=(/\A[aeiou]/)
  vowel = str1.scan(/\w/)
  alpha =('a'..'z').to_a
  con = (alpha - vowel).join
  word = str.scan(/\w/)  
  if  #first rule 
    str =~ str2
    str + "ay" 
  elsif # second rule 
    str != str2 
    s = str.slice!(/^./)
    str + s + "ay"
  elsif 
    word[0.1]=~(/\A[con]/)
    s = str.slice!(/^../)
    str + s + "ay"
  else
    word[0..2]=~(/\A[con]/) 
    s = str.slice!(/^.../)
    str + s + "ay" 
  end
end 
```

translate("apple") 应该 == "appleay"

翻译（“樱桃”）应该==“errychay”

translate("three") 应该 == "eethray"

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T17:42:48.290

不需要所有那些花哨的正则表达式。把事情简单化。

```
def translate str
  alpha = ('a'..'z').to_a
  vowels = %w[a e i o u]
  consonants = alpha - vowels

  if vowels.include?(str[0])
    str + 'ay'
  elsif consonants.include?(str[0]) && consonants.include?(str[1])
    str[2..-1] + str[0..1] + 'ay'
  elsif consonants.include?(str[0])
    str[1..-1] + str[0] + 'ay'
  else
    str # return unchanged
  end
end

translate 'apple' # => "appleay"
translate 'cherry' # => "errychay"
translate 'dog' # => "ogday" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-01T17:06:27.827

这将处理多个单词、标点符号和诸如 'queer' = 'eerquay' 和 'school' = 'oolschay' 之类的单词。

```
def translate (sent)
    vowels = %w{a e i o u}
    sent.gsub(/(\A|\s)\w+/) do |str|
            str.strip!
        while not vowels.include? str[0] or (str[0] == 'u' and str[-1] == 'q')
            str += str[0]
            str = str[1..-1]
        end
        str  = ' ' + str + 'ay'
    end.strip
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-14T18:36:37.067

好吧，这是一个史诗般的猪拉丁语翻译器，我确信可以使用一些重构，但通过了测试

```
def translate(sent)
    sent = sent.downcase
    vowels = ['a', 'e', 'i', 'o', 'u']
    words = sent.split(' ')
    result = []

words.each_with_index do |word, i|
    translation = ''
    qu = false
    if vowels.include? word[0]
        translation = word + 'ay'
        result.push(translation)
    else
        word = word.split('')
        count = 0
        word.each_with_index do |char, index|
            if vowels.include? char
                # handle words that start with 'qu'
                if char == 'u' and translation[-1] == 'q'
                    qu = true
                    translation = words[i][count + 1..words[i].length] + translation + 'uay'
                    result.push(translation)
                    next
                end
                break
            else
                # handle words with 'qu' in middle
                if char == 'q' and word[i+1] == 'u'
                    qu = true
                    translation = words[i][count + 2..words[i].length] + 'quay'
                    result.push(translation)
                    next
                else
                    translation += char
                end
                count += 1
            end
        end
        # translation of consonant words without qu
        if not qu
            translation = words[i][count..words[i].length] + translation + 'ay'
            result.push(translation)
        end
    end

end
result.join(' ')
end 
```

所以这将给出以下内容：

```
puts translate('apple')                # "appleay"
puts translate("quiet")                # "ietquay"
puts translate("square")               # "aresquay"
puts translate("the quick brown fox")  # "ethay ickquay ownbray oxfay" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-02T23:24:05.383

```
def translate(sentence)
  sentence.split(" ").map do |word|
    word = word.gsub("qu", " ")
    word.gsub!(/^([^aeiou]*)(.*)/,'\2\1ay')
    word = word.gsub(" ", "qu")
  end
end 
```

那很有趣！我不喜欢 qu 的 hack，但我找不到这样做的好方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-19T23:00:04.850

因此，对于这个猪拉丁语，我显然跳过了和 \an\in 以及像 a\I 等奇异的东西。我知道这不是主要问题，但如果它不适合您的用例，您可以忽略该逻辑。如果你想用一个或两个辅音保留它，这也适用于三重辅音，然后将表达式从 {1,3} 更改为 {1,2}

所有猪拉丁语都是相似的，因此只需根据您的用例进行更改。`MatchData`这是使用对象的好机会。也是`vowel?(first_letter=word[0].downcase)`一种风格选择，以提高识字率，因此我不必记住 word[0] 是第一个字母。

我的回答最初是基于 Sergio Tulentsev 在这个帖子中的回答。

* * *

```
 def to_pig_latin(sentence)
    sentence.gsub('.','').split(' ').collect do |word|
      translate word
    end.compact.join(' ')
  end

  def translate(word)
    if word.length > 1
      if word == 'and' || word == 'an' || word == 'in'
        word
      elsif capture = consonant_expression.match(word)
        capture.post_match.to_s + capture.to_s + 'ay'
      elsif vowel?(first_letter=word[0].downcase)
        word + 'ay'
      elsif vowel?(last_letter=word[-1].downcase)
        move_last_letter(word) + 'ay'
      end
    else
      word
    end
  end

  # Move last letter to beginning of word
  def move_last_letter(word)
    word[-1] +  word[0..-2]
  end

  private
  def consonant_expression
    # at the beginning of a String
    # capture anything not a vowel (consonants)
    # capture 1, 2 or 3 occurences
    # ignore case and whitespace
    /^ [^aeiou] {1,3}/ix
  end

  def vowel?(letter)
    vowels.include?(letter)
  end

  def vowels
    %w[a e i o u]
  end 
```

* * *

也只是为了它，我将包括我从一个 pry 会话中的转储，这样你们都可以看到如何使用 MatchData。明斯旺。正是这样的东西让红宝石变得很棒。

* * *

```
pry > def consonant_expression
pry *   /^ [^aeiou] {1,3}/ix
pry * end    
=> :consonant_expression
pry > consonant_expression.match('Stream')
=> #<MatchData "Str">
pry > capture = _
=> #<MatchData "Str">
pry > ls capture
MatchData#methods:
  ==  begin     end   hash     length  offset      pre_match     regexp  string  to_s     
  []  captures  eql?  inspect  names   post_match  pretty_print  size    to_a    values_at
pry >
pry > capture.post_match
=> "eam"
pry > capture
=> #<MatchData "Str">
pry > capture.to_s
=> "Str"
pry > capture.post_match.to_s
=> "eam"
pry > capture.post_match.to_s + capture.to_s + 'ay'
=> "eamStray"
pry > 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-21T17:41:33.163

如果我正确理解了您的问题，您可以直接检查一个字符是元音还是辅音，然后使用数组范围来获取您想要的字符串部分。

```
vowels = ['a', 'e', 'i', 'o', 'u']
consonants = ('a'..'z').to_a - vowels
return str + "ay" if vowels.include?(str[0])
if consonants.include?(str[0])
   return str[2..-1] + str[0..1] + "ay" if consonants.include?(str[1])
   return str[1..-1] + str[0] + "ay"
end
str 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-24T20:16:08.250

这是一个处理“qu”音素以及其他不规则字符的解决方案。将单个单词放回具有适当间距的字符串中有点麻烦。任何反馈将不胜感激！

```
def translate(str)
vowels = ["a", "e", "i", "o", "u"]
new_word = ""
str.split.each do |word|
    vowel_idx = 0

    if vowels.include? word[0]
        vowel_idx = 0
    elsif word.include? "qu"
        until word[vowel_idx-2]+word[vowel_idx-1] == "qu"
            vowel_idx += 1
        end
    else
        until vowels.include? word[vowel_idx]
        vowel_idx += 1
        end
    end

    idx_right = vowel_idx
    while idx_right < word.length
        new_word += word[idx_right]
        idx_right += 1
    end

    idx_left = 0
    while idx_left < vowel_idx
        new_word += word[idx_left]
        idx_left += 1
    end
    new_word += "ay "
end

new_word.chomp(" ")
end 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-12T01:58:43.757

我也做了一个

```
 def translate(string)
  vowels = %w{a e i o u}
  phrase = string.split(" ")
  phrase.map! do |word|
    letters = word.split("")
    find_vowel = letters.index do |letter|
      vowels.include?(letter)
    end
    #turn "square" into "aresquay"
    if letters[find_vowel] == "u"
      find_vowel += 1
    end
    letters.rotate!(find_vowel)
    letters.push("ay")
    letters.join

   end

return phrase.join(" ")
end 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-09T23:33:30.247

```
def piglatinize(word)
    vowels = %w{a e i o u}
    word.each_char do |chr|
    index = word.index(chr)
    if index != 0 && vowels.include?(chr.downcase)
      consonants = word.slice!(0..index-1)
      return word + consonants + "ay"
    elsif index == 0 && vowels.include?(chr.downcase)
      return word + "ay"
    end
  end
end

def to_pig_latin(sentence)
  sentence.split(" ").collect { |word| piglatinize(word) }.join(" ")
end 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-08-10T12:55:29.260

这似乎处理了我扔给它的所有内容，包括“qu”音素规则......

```
def translate str
  letters = ('a'..'z').to_a

  vowels = %w[a e i o u]

  consonants = letters - vowels

  str2 = str.gsub(/\w+/) do|word|
      if vowels.include?(word.downcase[0])
        word+'ay'
      elsif (word.include? 'qu')
        idx = word.index(/[aeio]/)
        word = word[idx, word.length-idx] + word[0,idx]+ 'ay'
      else
        idx = word.index(/[aeiou]/)
        word = word[idx, word.length-idx] + word[0,idx]+'ay'
      end
  end
end 
```

我正在用“qu”音素抓取单词，然后检查所有其他元音 [不包括 u]。

然后我按第一个元音的索引（或在“qu”情况下不带“u”的元音）的索引拆分单词，并将该索引之前的单词部分放到单词的后面。并添加'ay'ftw。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-05-16T18:56:35.930

这里的许多示例都相当长。这是我想出的一些相对较短的代码。它处理所有情况，包括“qu”问题！反馈总是很感激（我对编码很陌生）。

```
$vowels = "aeiou"

#First, I define a method that handle's a word starting with a consonant
def consonant(s)
  n = 0
     while n < s.length
        if $vowels.include?(s[n]) && s[n-1..n] != "qu"
           return "#{s[n..-1]}#{s[0..n-1]}ay"
        else
           n += 1
        end
     end
  end
#Then, I write the main translate method that decides how to approach the word. 
def translate(s)
    s.split.map{ |s| $vowels.include?(s[0]) ? "#{s}ay" : consonant(s) }.join(" ")
end 
```

# mysql - 如何从 MySQL 表中获取相同 id 的最新时间戳记录？

> ID：13498693
> 
> 赞同：1
> 
> 时间：2012-11-21T17:22:50.370
> 
> 标签：mysql, join, greatest-n-per-group, audit-tables

> **可能重复：**
> [获取列的最大值所在的行](https://stackoverflow.com/questions/121387/fetch-the-row-which-has-the-max-value-for-a-column)

我有一个人的审计表以及他们在特定时间戳拥有的股份数量。如何获取给定 ID 的最新记录？

**mysql审计表**

```
id name shares  dateadded 
1  Abc  12      2012-10-06 12:18:21
2  Klm  23      2012-10-06 12:18:21
3  Jim  45      2012-10-06 12:18:21
1  Abc  35      2012-11-06 12:18:21
1  Abc  65      2012-11-17 12:18:21
2  Klm  13      2012-11-06 12:18:21 
```

**我想要的输出：**

```
id name shares  dateadded 
1  Abc  65      2012-11-17 12:18:21
2  Klm  13      2012-11-06 12:18:21
3  Jim  45      2012-10-06 12:18:21 
```

我可以做这样的事情：

```
select a.* from audittable a join audittable b 
on a.id = b.id
where a.dateadded > b.dateadded; 
```

但这只会给我那些重复的最新记录。在这种情况下，ID 为 1,2 而不是 3。如何在没有子查询或临时表的情况下获取所有 ID 的最新记录列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T17:26:28.060

您将需要一个子查询，但不需要子选择（对性能有非常负面的影响）。

`JOIN`针对返回`id`和`MAX(dateadded)`聚合的子查询。需要子查询连接才能匹配包含最新时间戳的行中的所有其他列值。

```
SELECT
  audittable.id,
  name,
  shares,
  audittable.dateadded
FROM
  audittable
  /* Subquery returns id dateadded grouped by id */
  JOIN (
    SELECT id, MAX(dateadded) AS dateadded FROM audittable GROUP BY id
    /* JOIN condition is on both id and dateadded between the two tables */
  ) maxtimestamp ON audittable.id = maxtimestamp.id AND audittable.dateadded = maxtimestamp.dateadded 
```

### [这是关于 SQLfiddle 的演示](http://sqlfiddle.com/#!2/5aa01/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T17:24:58.750

没有子查询，您仅限于此

```
SELECT id, MAX(dateAdded)
FROM audittable
GROUP BY id 
```

如果您想要其他列，则需要像 Michael Berkowski's answer 这样的子查询

# java - 如何从spring资源中获取文件

> ID：13498694
> 
> 赞同：2
> 
> 时间：2012-11-21T17:22:53.723
> 
> 标签：java, spring

我有一个资源对象（org.springframework.core.io.ClassPathResource）。我需要获取 File 对象，但是`resource.getFile(`) 抛出异常 File not Found。但在调用后`resource.getURI()`我有一个结果

```
jar:file:/D: .... file.jar!/com//test/0be14958-3778-40bf-bd3e-ee605fcdd3f0/verify 
```

目录位于 jar 文件中。是否可以解决 ClassPathResource 的限制并创建 File 对象？

我尝试了一个新的 File(resource.getURI()) 但它因 java.lang.IllegalArgumentException 失败：URI 不是分层的

我的错是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T17:50:23.037

我认为不可能从 JAR 中的内容中获取 java.io.File （因为它实际上不是文件）。来自 ClassPathResource JavaDoc：

> 支持解析，就`java.io.File`好像类路径资源驻留在文件系统中一样，但不支持 JAR 中的资源。

您没有提到为什么需要它作为 java.io.File，但也许您可以重构代码以使用 ClassPathResource.getInputStream 方法（这使您能够读取资源）？

或者您也可以使用 ClassPathResource.getInputStream 将您想要的文件复制到文件系统上的临时文件，然后您可以将其用作直接的 java.io.File。

```
File temp = File.createTempFile("temp", ".tmp");
org.apache.commons.io.IOUtils.copy(resource.getInputStream(), new FileOutputStream(temp)); 
```

# google-chrome - ReportViewer 在 Chrome 中显示损坏的图像

> ID：13498696
> 
> 赞同：7
> 
> 时间：2012-11-21T17:23:04.393
> 
> 标签：google-chrome, reporting-services, report, reportviewer, viewer

我正在使用`ReportViewer`10.0\. 在 Google Chrome 中，这些线条带有一个名为`blank.gif`. 但 IE 和 Firefox 运行良好。

这是一个带有圆圈图像的示例：

![截图](../Images/3575fdd1440d18c33a815d21f4741623.png)

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-17T12:20:11.650

只需从 SQL Reporting Services 中添加以下 CSS [- Viewer 在非 IE 浏览器中损坏](http://coffeestain-it.blogspot.com/2011/08/sql-reporting-services-viewer-broken-in.html)：

```
body:nth-of-type(1) img[src*="Blank.gif"]{
    display:none;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-01T16:56:23.830

当前的解决方案将掩盖问题，但不会解决根本问题，即当 IE 以外的浏览器正在编写 gif 请求（SSRS 仅用于替换填充）时，他们不知道包含`IterationId`查询字符串参数。

正如[在非 IE 浏览器中损坏的 SQL Reporting Services 查看器](http://coffeestain-it.blogspot.com/2011/08/sql-reporting-services-viewer-broken-in.html)所指出的，如果您使用的是 ReportViewer，则可以在应用程序路由中修复此问题，`Application_BeginRequest`如下所示：

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    // Original fix credit to Stefan Mohr
    // Bug fix for MS SSRS Blank.gif 500 server error missing parameter IterationId
    // https://connect.microsoft.com/VisualStudio/feedback/details/556989/
    HttpRequest req = HttpContext.Current.Request;
    if (req.Url.PathAndQuery.StartsWith("/Reserved.ReportViewerWebControl.axd") &&
        !req.Url.ToString().ToLower().Contains("iteration") &&
        !String.IsNullOrEmpty(req.QueryString["ResourceStreamID"]) &&
        req.QueryString["ResourceStreamID"].ToLower().Equals("blank.gif"))
    {
        Context.RewritePath(String.Concat(req.Url.PathAndQuery, "&IterationId=0"));
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-15T23:36:05.497

解决方法：使用矩形/文本框/tablix 单元格，并且只显示其中一个边框。适用于铬。对于 OP，他可以在数据列之间添加额外的列作为分隔符，并跳过显示这些列的边框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-23T19:45:10.950

我在 Reportviewer 版本 10 中遇到了同样的错误，所以我更新到版本 14，它解决了问题并获得了一些增强功能，[此处提供指南](https://docs.microsoft.com/en-us/sql/reporting-services/application-integration/integrating-reporting-services-using-reportviewer-controls-get-started)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-02-16T16:26:09.570

在我的情况下，它的响应在测试模式（本地主机）下不起作用，但我更正了，现在它起作用了，而不是放“StartsWith”，而是放“包含”。这是代码：

```
Protected Sub Application_BeginRequest(sender As Object, e As EventArgs)
        ' Original fix credit to Stefan Mohr
        ' Bug fix for MS SSRS Blank.gif 500 server error missing parameter IterationId
        ' https://connect.microsoft.com/VisualStudio/feedback/details/556989/
        Dim req As HttpRequest = HttpContext.Current.Request
        If req.Url.PathAndQuery.Contains("/Reserved.ReportViewerWebControl.axd") AndAlso Not req.Url.ToString().ToLower().Contains("iteration") AndAlso Not [String].IsNullOrEmpty(req.QueryString("ResourceStreamID")) AndAlso req.QueryString("ResourceStreamID").ToLower().Equals("blank.gif") Then
            Context.RewritePath([String].Concat(req.Url.PathAndQuery, "&IterationId=0"))
        End If
    End Sub 
```

希望你帮忙，

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-12-20T17:06:20.020

作为其他答案，我解决了这个问题，将以下代码添加到我的 Global.asax 文件中：

```
void Application_BeginRequest(object sender, EventArgs e)
{
    //The following code is a hack for stopping a broken image from magically appearing on SSRS reports in chrome
    //where ever a line is used in the report.
    Uri u = HttpContext.Current.Request.Url;

    //If the request is from a Chrome browser 
    //AND a report is being generated 
    //AND there is no QSP entry named "IterationId"
    if (HttpContext.Current.Request.Browser.Browser.ToLower().Contains("chrome") &&
     u.AbsolutePath.ToLower().Contains("reserved.reportviewerwebcontrol.axd") &&
     !u.Query.ToLower().Contains("iterationid"))
        HttpContext.Current.RewritePath(u.PathAndQuery + "&IterationId=0");
} 
```

但是，也许你错过了或没有 Global.asax 文件，就像我一样。因此，选择您的解决方案并转到：

```
File > New > File > Web > C#/VB.Net > Global Application Class 
```

将其另存为 Global.asax，粘贴代码，它将解决您的问题。

# java - 在 Java 中使用正则表达式验证 csv 文件

> ID：13498701
> 
> 赞同：0
> 
> 时间：2012-11-21T17:22:36.930
> 
> 标签：java, regex, csv

文件结构如下：

```
"group","type","scope","name","attribute","value"
"c","","Probes Count","Counter","value","35"
"b","ProbeInformation","Probes Count","Gauge","value","0" 
```

总是使用引号。还有一个尾随换行符。

这是我所拥有的：

```
^(\"[^,\"]*\")(,(\"[^,\"]*\"))*(.(\"[^,\"]*\")(,(\"[^,\"]*\")))*.$ 
```

那是不正确匹配。我正在使用 String.matches(regexp);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:40:13.710

免责声明：我什至没有尝试编译我的代码，但这种模式之前已经奏效了。

当我一眼看不到正则表达式的作用时，我会将其分成几行，以便更容易弄清楚发生了什么。不匹配的括号更明显，您甚至可以为其添加注释。另外，让我们在它周围添加 Java 代码，这样可以清楚地避免奇怪的东西。

```
^(\"[^,\"]*\")(,(\"[^,\"]*\"))*(.(\"[^,\"]*\")(,(\"[^,\"]*\")))*.$ 
```

变成

```
String regex = "^" +
               "(\"[^,\"]*\")" +
               "(," +
                 "(\"[^,\"]*\")" +
               ")*" +
               "(." +
                 "(\"[^,\"]*\")" +
                 "(," +
                    "(\"[^,\"]*\")" +
                 ")" +
               ")*" +
               ".$"; 
```

好多了。现在开始做生意：我看到的第一件事是引用值的正则表达式。它不允许在字符串中使用逗号——这可能不是你想要的——所以让我们解决这个问题。让我们也把它放在它自己的变量中，这样我们就不会在某些时候输入错误。最后，让我们添加注释，这样我们就可以验证正则表达式在做什么。

```
final String QUOTED_VALUE = "\"[^\"]*\""; // A double quote character, zero or more non-double quote characters, and another double quote
String regex = "^" +                           // The beginning of the string
               "(" + QUOTED_VALUE + ")" +      // Capture the first value
               "(," +                          // Start a group, a comma
                 "(" + QUOTED_VALUE + ")" +    // Capture the next value
               ")*" +                          // Close the group.  Allow zero or more of these
               "(." +                          // Start a group, any character
                 "(" + QUOTED_VALUE + ")" +      // Capture another value
                 "(," +                            // Started a nested group, a comma
                    "(" + QUOTED_VALUE + ")" +     // Capture the next value
                 ")" +                             // Close the nested group
               ")*" +                            // Close the group.  Allow zero or more
               ".$";                           // Any character, the end of the input 
```

事情变得更加清晰。我在这里看到两件大事：

1）（我认为）您正在尝试匹配输入字符串中的换行符。我会一起玩，但是在换行符上拆分输入比你正在做的更干净、更容易（不过，这是一个你可以自己做的练习）。您还需要注意不同操作系统具有的不同换行约定（[阅读此内容](http://en.wikipedia.org/wiki/Newline)）。

2）你捕捉的太多了。您想使用非捕获组或解析您的输出将变得困难且容易出错（[阅读此内容](http://www.regular-expressions.info/refadv.html)）。

```
final String QUOTED_VALUE = "\"[^\"]*\""; // A double quote character, zero or more non-double quote characters, and another double quote
final String NEWLINE = "(\n|\n\r|\r\n)";  // A newline for (almost) any OS: Windows, *NIX or Mac
String regex = "^" +                           // The beginning of the string
               "(" + QUOTED_VALUE + ")" +   // Capture the first value
               "(?:," +                       // Start a group, a comma
                 "(" + QUOTED_VALUE + ")" + // Capture the next value
               ")*" +                       // Close the group.  Allow zero or more of these
               "(?:" + NEWLINE +            // Start a group, any character
                 "(" + QUOTED_VALUE + ")" +   // Capture another value
                 "(?:," +                       // Started a nested group, a comma
                    "(" + QUOTED_VALUE + ")" +  // Capture the next value
                 ")" +                          // Close the nested group
               ")*" +                         // Close the group.  Allow zero or more
               NEWLINE + "$";                 // A trailing newline, the end of the input 
```

从这里，我看到你再次重复工作。让我们解决这个问题。这也修复了原始正则表达式中缺少的 *。看看你能不能找到它。

```
final String QUOTED_VALUE = "\"[^\"]*\""; // A double quote character, zero or more non-double quote characters, and another double quote
final String NEWLINE = "(\n|\n\r|\r\n)";  // A newline for (almost) any OS: Windows, *NIX or Mac
final String LINE = "(" + QUOTED_VALUE + ")" +   // Capture the first value
                    "(?:," +                       // Start a group, a comma
                      "(" + QUOTED_VALUE + ")" + // Capture the next value
                    ")*";                        // Close the group.  Allow zero or more of these
String regex = "^" +             // The beginning of the string
               LINE +            // Read the first line, capture its values
               "(?:" + NEWLINE + // Start a group for the remaining lines
                 LINE +            // Read more lines, capture their values
               ")*" +            // Close the group.  Allow zero or more
               NEWLINE + "$";    // A trailing newline, the end of the input 
```

这更容易阅读，不是吗？现在，如果它不起作用，您可以分段测试您的大讨厌的正则表达式。

您现在可以编译正则表达式、获取匹配器并从中获取组。但是，您仍然有一些问题：

1）我之前说过，换行会更容易中断。一个原因是：你如何确定每行有多少个值？硬编码它会起作用，但一旦你的输入发生变化，它就会中断。也许这对您来说不是问题，但这仍然是不好的做法。另一个原因：正则表达式仍然太复杂，我不喜欢。你真的可以在 LINE 停下来。

2) CSV 文件允许这样的行：

```
"some text","123",456,"some more text" 
```

要处理这个问题，您可能需要添加另一个获取引用值或数字列表的迷你正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:38:56.973

这个问题：[CSV Parsing in Java](https://stackoverflow.com/questions/843997/csv-parsing-in-java-working-example)指向一个[用于解析 CSV 的 Apache 库](http://commons.apache.org/csv/)。

如果您的格式确实是 CSV，那么正则表达式将很难将数据解析为记录。

我知道这并不能直接回答您的问题，通过使用 CSV 库，您可能会以更少的努力获得更大的成功。

# wordpress - 破解 Wordpress 插件“谷歌日历事件”

> ID：13498703
> 
> 赞同：1
> 
> 时间：2012-11-21T17:22:44.603
> 
> 标签：wordpress, plugins

我目前正在使用插件[Google Calendar Events](http://wordpress.org/extend/plugins/google-calendar-events/)。我想添加让用户选择（通过选择下拉菜单）他们正在查看的提要的功能，然后让日历自动显示所选提要。有谁知道如何做到这一点？

我知道您可以使用简码来选择要显示的提要，但我不想为每个提要创建单独的页面，然后有指向它们的链接（有 10 多个提要，并且会定期添加和删除一个提要，因此为每个单独的提要手动创建日历是不可行的）。

我已将此代码添加到插件中的 gce-script.js 文件中：

```
 function changeFeeds(){
    var values = jQuery("#gce-view-feed").val();
    jQuery("#result").replaceWith(values);
}

jQuery("option").click(function(){
    location.reload();
});

jQuery("select").change(changeFeeds);
changeFeeds(); 
```

... id "gce-view-feed" 是选择菜单的 id，id "result" 是我显示结果的地方。这很好用，除了我如何将该结果传递给插件以便它使用它？

Feed id 由 PHP 变量 $feed_ids 定义。我认为编辑变量的最佳位置是 google-calendar-events.php 文件中的这行代码：

```
//Check that any feeds have been added
        if ( is_array( $options ) && ! empty( $options ) ) {
            extract( shortcode_atts( array(
                'id' => '',
                'type' => 'grid',
                'title' => null,
                'max' => 0,
                'order' => 'asc'
            ), $atts ) );

            $no_feeds_exist = true;
            $feed_ids = array();

            if ( '' != $id ) {
                //Break comma delimited list of feed ids into array
                $feed_ids = explode( ',', str_replace( ' ', '', $id ) );

                //Check each id is an integer, if not, remove it from the array
                foreach ( $feed_ids as $key => $feed_id ) {
                    if ( 0 == absint( $feed_id ) )
                        unset( $feed_ids[$key] );
                }

                //If at least one of the feed ids entered exists, set no_feeds_exist to false
                foreach ( $feed_ids as $feed_id ) {
                    if ( isset($options[$feed_id] ) )
                        $no_feeds_exist = false;
                }
            } else {
                foreach ( $options as $feed ) {
                    $feed_ids[] = $feed['id'];
                }

                $no_feeds_exist = false;
            } 
```

但我不知道如何将 jQuery 值传递给 $feed_ids 变量。有没有办法做到这一点？如果没有，是否有另一种方法来动态选择一个选项，然后将其传递给 PHP 变量？

# mysql - MySQL 左连接的双重计数

> ID：13498706
> 
> 赞同：7
> 
> 时间：2012-11-21T17:23:49.910
> 
> 标签：mysql, sql, count, left-join

## 数据库结构

```
CREATE TABLE installs(
    id INT, PRIMARY KEY(id), 
    created DATETIME)

CREATE TABLE uninstalls(
    id INT, PRIMARY KEY(id),
    created DATETIME,
    install_id INT) 
```

## 查询（“我与 MySQL”）

```
SELECT DATE(installs.created),
  COUNT(installs.id),
  COUNT(uninstall.id)
FROM installs
LEFT JOIN uninstalls ON uninstalls.install_id = installs.id
GROUP BY DATE(installs.created) 
```

## “预期”输出

```
DATE(installs.created) | COUNT(installs.id) | COUNT(uninstalls.id) 
  2012-11-20           | *installs on date* | *uninstalls on date* 
```

所以 - 我每天都在查看当天发生的安装/卸载次数。

## 问题

每天的“安装”数据都是正确的。但遗憾的是，每天“卸载”的数据不正确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T23:19:44.217

Count the installs and the uninstall separately, adding a column (of zeroes) for the other count to each of them. Then combine the two with `UNION`, group by date once again and take the max for each date (to eliminate the added zeroes):

```
SELECT created as date, max(installs) as installs, max(uninstalls) as uninstalls
FROM
  (SELECT created, count(*) AS installs, 0 AS uninstalls
   FROM installs
   GROUP BY created
  UNION ALL
   SELECT created, 0 AS installs, count(*) AS uninstalls
   FROM uninstalls
   GROUP BY created) c
GROUP BY created
ORDER BY created 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:52:59.957

发生此问题是因为您正在链接安装和卸载。也就是说，您显示的是给定日期的安装，以及*这些安装*的卸载，而不是安装日期。

如果您想查看给定日期的每个事件的计数，您需要在*date*加入，而不是安装 ID。如果它是一个大型数据集，它会非常慢（当您根据该字段上的函数分组或连接时，优化器不能在该字段上使用索引）。

```
SELECT DATE(installs.created),
  COUNT(installs.id),
  COUNT(uninstall.id)
FROM installs 
LEFT JOIN uninstalls ON DATE(uninstalls.created) = DATE(installs.created)
GROUP BY DATE(installs.created) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T20:43:20.683

创建一个包含所有安装和卸载日期的 CTE，然后分别加入安装和卸载表。

```
; WITH Dates AS
(
    SELECT DATE(created) AS created
    FROM
    (
        SELECT created
        FROM installs

            UNION ALL

        SELECT created
        FROM uninstalls
    ) a
    GROUP BY DATE(created)
)
, InstallCTE AS
(
    SELECT DATE(created) AS created
        , COUNT(*) AS c
    FROM installs
    GROUP BY DATE(created)
)
, UninstallCTE AS
(
    SELECT DATE(created) AS created
        , COUNT(*) AS c
    FROM uninstalls
    GROUP BY DATE(created)
)
SELECT d.created AS [date]
    , i.c AS install_count
    , u.c AS uninstall_count
FROM Dates d
LEFT JOIN InstallCTE i
    ON d.created = i.created
LEFT JOIN UninstallCTE u
    ON d.created = u.created 
```

# iphone - 删除 NSMutablearray 中的最后一个对象

> ID：13498707
> 
> 赞同：6
> 
> 时间：2012-11-21T17:23:54.503
> 
> 标签：iphone, arrays, object, nsmutablearray

为什么要删除 NSMutablearray 中的最后一个对象而不导致应用程序崩溃？:D

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-21T17:25:39.037

当然：将消息发送到一个不为空`removeLastObject`的有效对象。`NSMutableArray`

# apache - Apache Cordova Windows Phone 8 App ajax 调用请求状态返回 0

> ID：13498708
> 
> 赞同：4
> 
> 时间：2012-11-21T17:23:57.263
> 
> 标签：apache, frameworks, cordova

我使用 Apache Cordova Windows Phone 8 框架开发了一个应用程序。我正在使用模拟器。

我的第一页对 WCF 服务进行了 ajax 调用，以根据用户输入显示员工列表。我已经在我的页面上显示了 Ajax 调用返回的数据。在此之前一切正常。

当我单击模拟器的后退按钮时，问题就开始了。后退按钮带我启动模拟器，我们可以在其中看到所有应用程序图标。

当我点击我的应用程序图标时，它会打开 index.html，这是我的主页。当我输入搜索条件并按下搜索按钮时，ajax 调用会返回请求状态 0。

我无法弄清楚为什么会发生这种情况，并且在互联网搜索中找不到任何有用的东西。我的ajax调用是这样的

```
 // Require cross-site scripting so enable it here (calling different website)
    $.support.cors = true;

    var jsonData = { 'searchCriteria': 'Raj'};
    $.ajax({
        type: "POST",
        url: "http://hqit116/EmployeeWCFService/EmployeeWCFServices.svc/GetEmployeeData",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        data: JSON.stringify(jsonData),
        processData: true,
        success: onSuccess,
        error: OnFailure
    }); 
```

有人可以帮我解决这个问题。这真的阻碍了我下一步工作的进展。

# sql-server - 使用 where 子句选择多列

> ID：13498713
> 
> 赞同：-1
> 
> 时间：2012-11-21T17:24:30.753
> 
> 标签：sql-server, sql-server-2008

```
select
    CustomerName,City,State, MatchId,ServingSize, Fruit, DarkGreen, 
    [Red/Orange], Legumes, Starchy, Other, [Grains (oz)], 
    [Whole51%orgreater?], [Meat / Meat Alt], [Fluid Milk (cups)], Calories, 
    [Sodium (MG)], [Saturated Fat (grams)], [Trans Fat (grams)],
    MeetsAllianceForAHealthierGenerationGuidelines, OtherNotes, Name, 
    WebsiteLinkToSource, Date
from
    #FinalTempTable
Where 
    (
        MatchId,ServingSize, Fruit, DarkGreen, [Red/Orange], Legumes, Starchy, 
        Other, [Grains (oz)], [Whole51%orgreater?], [Meat / Meat Alt], [Fluid Milk (cups)],
        Calories, [Sodium (MG)], [Saturated Fat (grams)], [Trans Fat (grams)],
        MeetsAllianceForAHealthierGenerationGuidelines, OtherNotes, Name,
        WebsiteLinkToSource, Date
    )
    IN 
    (
        Select
            MatchId,ServingSize, Fruit, DarkGreen, [Red/Orange], Legumes, 
            Starchy, Other, [Grains (oz)], [Whole51%orgreater?], [Meat / Meat Alt], 
            [Fluid Milk (cups)],Calories, [Sodium (MG)], [Saturated Fat (grams)], 
            [Trans Fat (grams)], MeetsAllianceForAHealthierGenerationGuidelines, 
            OtherNotes, Name, WebsiteLinkToSource, Date
        From
            MealContributions 
        Where
            MatchId IN (Select distinct MatchId from #FinalTempTable)
    ) 
```

我正在使用这个查询，但它给出了以下错误：

> 消息 4145，级别 15，状态 1，第 10 行 在预期条件的上下文中指定的非布尔类型表达式，靠近“，”。

我想要#finaltemptable 中的所有列，并且只有那些MatchId 与#finaltemptable matchid 相同的mealcontributions 列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:34:36.897

表格

```
Where 
        (MatchId,ServingSize, Fruit, ... other columns .... ) 
IN 
        (... subquery with columns ...) 
```

适用于 MySQL，但不适用于 SQL Server。

您必须使用列出的所有匹配列组成一个 EXISTS 子句。

```
 select CustomerName, City, State, MatchId, ServingSize, Fruit, DarkGreen, 
        [Red/Orange], Legumes, Starchy, Other, [Grains (oz)], 
        [Whole51%orgreater?], [Meat / Meat Alt], [Fluid Milk (cups)], Calories, 
        [Sodium (MG)], [Saturated Fat (grams)], [Trans Fat (grams)],
        MeetsAllianceForAHealthierGenerationGuidelines, OtherNotes, Name, 
        WebsiteLinkToSource, Date
   from #FinalTempTable f
  where exists (
        select *
          from MealContributions m
         where f.matchid = m.matchid AND
               f.ServingSize = m.ServingSize AND
               .... all the columns! ...) 
```

最后一个条件

```
Where MatchId IN (Select distinct MatchId from #FinalTempTable)) 
```

是多余的，因为你已经匹配了`f.matchid = m.matchid`。

# asp.net - IIS 7.5 上的 ASP.NET Web 应用程序无法将文件写入应用程序文件夹

> ID：13498718
> 
> 赞同：1
> 
> 时间：2012-11-21T17:23:39.877
> 
> 标签：asp.net, iis-7.5

我知道已经提出并回答了这个问题，但是我似乎无法让我的实例正常工作。

我有一个 Web 应用程序，它需要创建一个（.pdf）文件并将其保存到本地目录（称为“pub”）。我相信这是一个权限问题，而不是代码问题，因为我的应用程序在我的开发箱（Vista - IIS 7）上写的文件很好。当我在我的生产服务器（2008 R2 - IIS 7.5）上执行时，应用程序正常失败，没有错误，但没有写入文件。

该应用程序在其自己的 AppPool（称为 MyAppPool）中运行。

我已将匿名身份验证设置为“应用程序池标识”。

.NET 信任级别设置为“完全”。

最初我在 pub 目录上设置了允许 IIS_IUSR RW 权限的权限（仍然设置）。当那不起作用时，研究告诉我使用 ICACLS 在 pub 上设置 'IIS AppPool/MyAppPool' 以获得 RW 权限，我有，但仍然不行。

我到底会错过什么？

# rake - 由于 ruby rake 错误，无法构建 apache thrift

> ID：13498721
> 
> 赞同：6
> 
> 时间：2012-11-21T17:24:46.557
> 
> 标签：rake, thrift

我正在尝试从源代码压缩包（https://dist.apache.org/repos/dist/release/thrift/0.9.0/thrift-0.9.0.tar.gz）构建节俭，但它失败并出现以下错误：

```
Making all in rb
make[3]: Entering directory `/home/akonsu/a/thrift-0.9.0/lib/rb'
/usr/local/bin/rake 
rake aborted!
cannot load such file -- rspec/core/rake_task 
```

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-21T17:49:40.030

这有助于：

```
gem install rspec 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-22T11:58:30.307

如果您一开始对 Ruby 不感兴趣，那么配置 Thrift 也有帮助。

```
$ ./configure --without-ruby 
```

就是这样`--without-ruby`，而不是`--without-rb`像其他一些消息来源所暗示的那样。

然后运行`make`和`sudo make install`。

显然这是一个已知的错误。我在这里找到了这个：[https ://issues.apache.org/jira/browse/THRIFT-1367](https://issues.apache.org/jira/browse/THRIFT-1367)

（我在 Mac OS X 10.7.5 上，顺便说一句。我不知道任何其他版本/平台......）

# regex - 如何检查字符串是否属于正则表达式的范围？

> ID：13498723
> 
> 赞同：0
> 
> 时间：2012-11-21T17:24:49.350
> 
> 标签：regex, r

如果 'A*B*C*D*' 是正则表达式，并且

```
string <- c("AB"), 
```

有没有办法检查字符串是否被正则表达式接受？答案是肯定或否定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:30:42.427

听起来您正在寻找[`grep`](http://stat.ethz.ch/R-manual/R-devel/library/base/html/grep.html)：

```
> length(grep("^A*B*C*D*$", string)) > 0
[1] TRUE
> length(grep("^A*B*C*D$", string)) > 0
[1] FALSE 
```

我添加了`^`and`$`以确保只能匹配整个字符串。如果您不想这样做，只需删除它们即可。

# php - 用于静态原型设计的简单多合一 mod_rewrite

> ID：13498727
> 
> 赞同：1
> 
> 时间：2012-11-21T17:24:58.380
> 
> 标签：php, mod-rewrite, static

我将提供一些我的问题的背景。我正在为 PHP CMS 开发静态 HTML5/CSS3 原型。我想要的一件事是拥有干净的 URL。一开始我有这样的东西：

`localhost:8888/file.php`

并希望它：

`localhost:8888/file`或没有斜线`localhost:8888/file`

我在 Stackoverflow 上进行了快速搜索，发现了几个关于这件事的结果，我很乐意用这个来完成这项工作：

```
RewriteEngine On

RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^(.*?)/?$
RewriteCond %{DOCUMENT_ROOT}/%1.php -f
RewriteRule ^(.*?)/?$ $1.php
RewriteRule ^(.*?)/?$ $1.php 
```

这种方法的问题是当我想在我的 CMS 结构上设置深层级别时，比如站点/帖子。如果没有 mod_rewrite，我需要创建文件夹并对代码进行重大更改，以使事情像 ../images/ 到 ../../images/ 等那样工作，所以对该解决方案嗤之以鼻。我需要使用 mod_rewrite 才能使其工作。

此外，该 mod_rewrite 代码块也不适用于文件夹内容，因此我在这里开始搜索以找到解决方案，以便我可以执行`/level1_level2_levelx.php`to`/level1/level2/level3/`或`/level1/level2/level3`. 我确实在很多方面进行了搜索，但我没有找到正确的答案。

谢谢你们，

PD：我正在使用 MAMP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:25:33.643

在重写方面，我猜测以下内容应该满足您的要求：

内部重写输入的 URL：

```
 http://localhost:8888/file  
  OR:
  http://localhost:8888/file/ 
```

**至：**

```
 http://localhost:8888/file.php 
```

**规则：**

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-s
RewriteCond %{REQUEST_FILENAME} !\.php$
RewriteCond %{REQUEST_FILENAME} ^(.*)/?$
RewriteCond %1\.php             -f
RewriteRule ^(.*)/?$  $1.php  [L] 
```

但听起来你真的想要一个在 Apache 中配置的自定义 404 处理程序，例如

```
<FilesMatch "\.(css|js|jpg|png|gif)$">
    ErrorDocument 404 "File not found."
</FilesMatch>

<Files favicon.ico>
    ErrorDocument 404 "-"
</Files>

ErrorDocument 404 /404-handler-script.php 
```

并添加了一个关联的**404-handler-script.php**以在内部进行您想要的任何映射，例如

[http://www.phpriot.com/articles/search-engine-urls/4](http://www.phpriot.com/articles/search-engine-urls/4)

注意：此脚本将浏览器重定向到目标脚本，而不是自己提供服务。

# php - 链接中的奇怪字符 CakePHP

> ID：13498730
> 
> 赞同：0
> 
> 时间：2012-11-21T17:25:05.010
> 
> 标签：php, cakephp-2.2

我正在使用 PHP 5.4、CakePHP 2.2.3 开发一个应用程序。问题是，在我的本地服务器（XAMPP）中，这个错误不会发生（PHP 5.4）。

但在我的在线服务器中，它确实如此（PHP 5.3）。

错误是链接中的那个奇怪的小字符：

![在此处输入图像描述](../Images/45747392ebdf68864055a1c2136d7f1f.png)

这里：`sgc/noticias/�avascript:void(0)`

大多数奇怪的字符是通过数据库获取的数据。

这仅在我`link`使用`HtmlHelper`. 可以说，如果我回应这个：

```
echo $this->Html->link('Click me', '/pages/home', array('class' => 'button', 'target' => '_blank')); 
```

我明白了：

![在此处输入图像描述](../Images/e1dc5f4eb6debb1f2252e5e28d36e8ba.png)

如图所示：`/sgc/index/�pages/home`

如果我回应这个：

```
<a href="/sgc/index/pages/home" >Click me</a> 
```

我明白了：`/sgc/index/pages/home`

如果我回应这个：

```
echo $this->Html->link('Click me',array('controller'=>'pages', 'action' => 'view'), array('class' => 'button', 'target' => '_blank')); 
```

我明白了：`/sgc/pages/view`

我读到这个问题可能类似于编码问题，但我几乎 100% 确定我的所有文件都以 UTF8 编码（没有 BOM）。

看起来这是字符：%EF%BB%BF。

此外，查看错误日志会显示：

`2012-11-21 15:37:05 Error: [MissingActionException] Action IndexController::ï¿½index() could not be found.`

我不认为这个问题可能与 CakePHP 版本或 CakePHP lib 中的某个文件有关，因为我刚刚上传了一个新的 CakePHP 应用程序而没有修改任何东西（只是一个简单的 CakePHP 应用程序），并且在我的在线服务器上一切正常。

错误必须在我的某些文件中，而不是在 CakePHP 中。

## 更新

我遵循[这个答案](https://stackoverflow.com/a/7478330/1446827)并使用 Total Commander 在我的项目中搜索 UTF BOM 文件。但结果是，只有图像在搜索“EF BB BF”时返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:22:57.130

`"\xEF\xBB\xBF"`是一个 UTF-8 字节顺序标记，毫无疑问。

因为它总是在`link`争论的开始，所以我想到了一些可能性：

1.  无论您在何处配置了基本路径（例如`/sgc/index`、`/sgc/noticias`），您都有一个杂散的尾随 BOM。
2.  `link()`助手本身将提供的输入编码为 utf-8（例如，）`'/pages/home'`并错误地包含 BOM。

我会直接进入`HTML::link()`代码并跟踪它，寻找对`iconv`函数`mb_*`的调用。这些库很可能是在幕后使用的，并且以某种方式错误地配置为发出 BOM，就像您在编写文件时一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:00:34.247

冲突的编码似乎确实是一个问题。检查**app/config/core.php**中是否有以下内容，它应该存在，因为它是默认值：

```
Configure::write('App.encoding', 'UTF-8'); 
```

然后在您的视图中指定`charset`如下`<head>`：

```
<head>
    <?php echo $html->charset(); ?>
</head> 
```

* * *

**编辑**

该[`link()`](https://github.com/cakephp/cakephp/blob/master/lib/Cake/View/Helper/HtmlHelper.php#L332)方法`URL`在生成链接之前对其接收到的内容进行一些处理：

```
$url = $this->url($url); // Line 335 
```

然后该[`url()`](https://github.com/cakephp/cakephp/blob/master/lib/Cake/View/Helper.php#L241)方法使用[`Router::url()`](https://github.com/cakephp/cakephp/blob/master/lib/Cake/Routing/Router.php#L745)静态方法和全局[`h()`](https://github.com/cakephp/cakephp/blob/master/lib/Cake/basics.php#L165)函数：

```
return h(Router::url($url, $full)); 
```

该`Router::url()`方法似乎没有做任何与编码相关的事情，该`h()`函数只使用 PHP 的`htmlspecialchars()`：

```
return htmlspecialchars($text, ENT_QUOTES, ($charset) ? $charset : $defaultCharset, $double); 
```

我在这里不知所措，但也许这些尾随可能有助于某人追查角色的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T20:19:59.737

我才发现问题！非常感谢你们帮助我思考。

直截了当，给我那些奇怪字符的代码是这样的：

```
public function url($url = null, $full = false) {

    if(!isset($url['plugin'])) {
        $url['plugin'] = null;
    }

    return parent::url($url, $full);
} 
```

那是在课堂`AppHelper`上。但为什么？

我的应用程序分为模块，这意味着一个模块=插件。我的应用程序中有很多插件。有时，当我在插件页面（如新闻或博客）中时，我想链接到一个控制器，该控制器是应用程序的一部分而不是插件的一部分，我总是必须设置`plugin => ""`以便 CakePHP 知道我想要一个不属于插件的控制器；

示例：当我使用`HtmlHelper::link`或什至`HtmlHelper::url`：

```
echo $this->Html->link('All users', array('plugin' => '', 'controller' => 'users', 'action' => 'index')); 
```

这将回显正确的链接，该链接将指向`Users controller`and `index action`。

但是，如果我使用这个（没有设置`plugin => ""`）：

```
echo $this->Html->link('All users', array('controller' => 'users', 'action' => 'index')); 
```

它指向我的`Users controller`插件内部。

我不想每次都`plugin => ""`声明它（`AppHelper::url``plugin => ""``$url``plugin`

但这导致我在使用`HtmlHelper::url`or构造的所有 URLS 中出现了这个奇怪的字符`HtmlHelper::link`。

我现在将此功能更改为：

```
public function url($url = null, $full = false) {

    if (is_array($url)) {
        if(!isset($url['plugin'])) {
            $url['plugin'] = "";
        }    
    }
    return parent::url($url, $full);
} 
```

一切正常。

# ajax - Kendo UI：使用自定义架构时无法将节点添加到树视图

> ID：13498734
> 
> 赞同：2
> 
> 时间：2012-11-21T17:25:25.617
> 
> 标签：ajax, kendo-ui, kendo-treeview

我有一个使用以下数据源初始化的剑道树：

```
var dataSource = new kendo.data.HierarchicalDataSource({
            transport: {
                read: {
                url: '/Quota/Home/GetTemplateHierarchy',
                dataType: 'json',
                data: { hierarchyID: hierarchyID, quotaSetID: quotaSetID, batchSize: 10 }
            }
            },
            schema: {
                model: {
                    id: 'id',
                    hasChildren: 'hasChildren',
                    children: 'items',
                    fields: {
                        text: 'text'
                    }
                }
            }
        }); 
```

有谁知道如何为此数据源添加和创建新节点？我试过通用的 treeview.append({ text: "Boo"}) 但它什么也没做。我已成功删除节点，但似乎无法添加任何节点。该文档不清楚如何在使用自定义模式时添加任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T22:39:38.377

不确定要显示的节点文本是什么。所以我猜你想显示模式中唯一的元素`nodelevel`

这种情况下的数据应该是： { nodelevel : 99 }

按照一个完整的示例，我有一个初始节点，然后我将子节点附加到所选节点。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>Tree View</title>
    <!-- Kendo UI Web styles-->
    <link href="styles/kendo.common.min.css" rel="stylesheet" type="text/css"/>
    <link href="styles/kendo.default.css" rel="stylesheet" type="text/css"/>

    <!-- Kendo UI Web scripts-->
    <script src="js/jquery.min.js" type="text/javascript"></script>
    <script src="js/kendo.web.min.js" type="text/javascript"></script>

    <script>
        $(document).ready(function () {
            var count = 0;
            var data = [
                { nodelevel: count++ }
            ];

            var dataSource = new kendo.data.HierarchicalDataSource({
                data  :data,
                schema:{
                    model:{
                        id         :'id',
                        hasChildren:'hasChildren',
                        children   :'items',
                        fields     :{
                            nodelevel:{
                                type    :'number',
                                editable:true,
                                nullable:false
                            }
                        }
                    }
                }
            });
            var tree = $("#tree").kendoTreeView({
                dataSource   :dataSource,
                dataTextField:"nodelevel"
            }).data("kendoTreeView");

            $("#add").click(function () {
                var selected = tree.select();
                if (selected.length > 0) {
                    tree.append({ nodelevel: count++ }, selected);
                }
            });
        });
    </script>

</head>
<body>
<a href="#" id="add">Add to selected</a>

<div id="tree"></div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:49:23.270

如果您没有指定要附加的注释，则**treeview.append**应该可以工作并将新节点附加到根级别。

您也可以使用数据源。[插入](http://docs.kendoui.com/api/framework/datasource#insert)({text:"foo"}) 或**dataSource.add**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T23:04:37.203

保罗，我想提出另一个解决方案...

```
 <!-- Kendo UI Web styles-->
    <link href="../styles/kendo.common.min.css" rel="stylesheet" type="text/css"/>
    <link href="../styles/kendo.default.min.css" rel="stylesheet" type="text/css"/>

    <!-- Kendo UI Web scripts-->
    <script src="../js/jquery.min.js" type="text/javascript"></script>
    <script src="../js/kendo.web.min.js" type="text/javascript"></script>

    <!-- Local Styles -->
    <style type="text/css">
    </style>

    <!-- Initialize Form Elements -->
    <script type="text/javascript">
        $(document).ready(function () {
            function loadMore() {
                var uid = $(this).data("uid");
                var node = tree.findByUid(uid);
                tree.insertBefore(content, node);
                tree.remove(node);
                addLoadMore(".k-i-pencil");
            }

            function addLoadMore(clss) {
                $(clss, tree.element).closest(".k-item").on("click", loadMore);
            }

            var content = [
                {
                    text :"node1",
                    items:[
                        { text:"node1.1" },
                        { text:"node1.2" },
                        { text:"node1.3", spriteCssClass:"k-icon k-i-pencil" },
                        { text:"node1.4" }
                    ]
                }
            ];

            var tree = $("#tree").kendoTreeView({
                dataSource:content
            }).data("kendoTreeView");
            addLoadMore(".k-i-pencil");
        });
    </script>

</head>
<body>
<div id="tree"></div>
</body>
</html> 
```

在这里，我创建了一个从 JSON 加载的内容的树（它应该被替换为你的`ajaxAntiForgery`）。树中有一个带有图标（ki-pencil）的节点。然后我调用一个函数`addLoadMore`，用 ki-pencil 拦截节点上的点击并将新内容添加到该节点 -`insertBefore`用于在内容之前插入新内容`k-i-pencil`，然后删除旧节点）。我认为这个示例与您使用按钮所做的非常相似。所以，看一下`loadMore`函数，看看我是如何检测到`node`与我点击的位置相对应的（我提取并使用`uid`它找到节点）。最后，我删除了原始节点（调用）并再次为新节点设置拦截器`uid``tree.findByUid``tree.remove``k-i-pencil`. 希望这与您所拥有的非常接近。

# ruby - 在 Padrino 上模拟 current_account 以进行 rspec 测试

> ID：13498740
> 
> 赞同：5
> 
> 时间：2012-11-21T17:25:45.680
> 
> 标签：ruby, rspec, padrino

我正在尝试测试一个依赖于由 Padrino::Admin::AccessControl 提供的 current_account 的 padrino 控制器

为此，我需要模拟 current_account。

代码类似于：

```
App.controller :post do
  post :create, map => '/create' do
    Post.create :user => current_account
  end
end 
```

和 rspec：

```
describe "Post creation" do
  it 'should create' do
    account = Account.create :name => 'someone'
    loggin_as account #to mock current_account
    post '/create'
    Post.first.user.should == account
  end
end 
```

如何实现“loggin_as”或如何编写此测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:02:26.120

我找到了一种简单的测试方法：

```
App.any_instance.stub(:current_account).and_return(account) 
```

所以，测试代码应该是：

```
describe "Post creation" do
  it 'should create' do
    account = Account.create :name => 'someone'
    App.any_instance.stub(:current_account).and_return(account)
    post '/create'
    Post.first.user.should == account
  end
end 
```

但我仍然喜欢构建“loggin_as”助手。那么，如何动态获取 App 类呢？（我应该为这个问题创建另一个线程吗？）

# java - 定义自定义系统类加载器

> ID：13498741
> 
> 赞同：1
> 
> 时间：2012-11-21T17:24:46.520
> 
> 标签：java, classloader

我试图告诉 JVM 使用我的自定义 ClassLoader 作为默认 ClassLoader

这是我用来挑选班级的 VM 参数：

```
-Djava.system.class.loader=JarClassLoader 
```

这是我得到的错误

```
Error occurred during initialization of VM
java.lang.Error: java.lang.NoSuchMethodException: JarClassLoader.<init>(java.lang.ClassLoader)
    at java.lang.ClassLoader.initSystemClassLoader(Unknown Source)
    at java.lang.ClassLoader.getSystemClassLoader(Unknown Source)
Caused by: java.lang.NoSuchMethodException: JarClassLoader.<init>(java.lang.ClassLoader)
    at java.lang.Class.getConstructor0(Unknown Source)
    at java.lang.Class.getDeclaredConstructor(Unknown Source)
    at java.lang.SystemClassLoaderAction.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.lang.ClassLoader.initSystemClassLoader(Unknown Source)
    at java.lang.ClassLoader.getSystemClassLoader(Unknown Source) 
```

我必须定义一个特定的方法还是我使用了错误的参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:40:46.077

自定义类加载器

```
public class CustomClassLoader extends ClassLoader{

    public CustomClassLoader(ClassLoader classLoader) {
        super(classLoader);
    }

    @Override
    public Class<?> loadClass(String name) throws ClassNotFoundException {
        System.out.println("Loading class :" + name);
        return super.loadClass(name);
    }
} 
```

主班

```
public class Main {

    public static void main(String[] args) {
        System.out.println("Starting main");
    }
} 
```

虚拟机参数：`-Djava.system.class.loader=CustomClassLoader`

所有类都在默认包中，并且成功执行。

*输出：*
**加载类 :Main
启动 main**

# sql-server-2008 - SSRS 多列报告 - 分栏后重复组标题

> ID：13498746
> 
> 赞同：0
> 
> 时间：2012-11-21T17:24:59.437
> 
> 标签：sql-server-2008, reporting-services

我想要一份包含数据列表的报告，并且我想要两列中的这些数据。其中一些数据将跨越 60 多页。此数据中有组，并且每个分组级别都有一个标题。

我希望标题出现在每列的顶部，而不仅仅是在此处详述的新页面上： [http ://technet.microsoft.com/en-us/library/cc627566(v=sql.100).aspx](http://technet.microsoft.com/en-us/library/cc627566(v=sql.100).aspx)

“在每列顶部重复组标题”的设置在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:32:51.543

如果您右键单击标题文本行和“在上方插入行”，您应该能够看到每个组重复的标题。如果您选择了行和“插入行 - 外部组”，则值标题将仅显示一次。

# php - Uncaught SyntaxError: Unexpected token < jsUpload.js:97 xhr.onload

> ID：13498748
> 
> 赞同：0
> 
> 时间：2012-11-21T17:26:08.987
> 
> 标签：php, javascript, html, google-chrome

很抱歉重新发布此问题，但是在搜索了几天互联网并查看了 stackoverflow 和许多其他网站之后，我仍然没有更接近解决这个问题。当谈到 JavaScript 时，我是一个大菜鸟，我似乎一直被困在这上面。

以下代码似乎存在问题。我不断收到错误消息： Uncaught SyntaxError: Unexpected token < xhr.onload

```
 function getFile(fileId){
    log('Checking whether to resume upload');
    var fileData = localStorage[fileId];
    if (fileData){
        var  fileParts = fileData.split("|");
        log ('Resuming upload from package '+(parseInt(fileParts[2])+1));
        setDetails({
            fileId:fileParts[0],
            token:fileParts[1],
            currentPackage:fileParts[2]
        });
    }else{
        log ('No upload to resume, informing server to initialize a new upload');
        // submit file information to server
        var formData = new FormData();
        formData.append('totalSize', self.totalSize);
        formData.append('type', self.type);
        formData.append('fileName', self.fileName);
            //error lies from here on
        var xhr = new XMLHttpRequest();
        xhr.open('POST', self.url, true);
        xhr.onload = function(e) {

            var response = JSON.parse(xhr.responseText);
            if (response.action=="new_upload"){
                log ('New upload initialized with ID '+response.fileid+' and token '+response.token);
                setDetails(setFile(fileId,response.fileid,response.token));
            }
        }; 
```

我一生都无法弄清楚我哪里出了问题。任何将我指向适当方向的帮助都会很棒。到目前为止，我已经尝试删除所有 < 字符，但仍然没有运气。我什至在 Jsonlint.com 上尝试验证，但仍然没有这样的运气。

```
//managed to track the error dow to this through JSONlint:
    {
    responseText="<br><table border='1' c.../div></td></tr></table>",
    mozResponseArrayBuffer=ArrayBuffer,
    more...
    }

//with the error output as:
    Parse error on line 1:
    {    responseText="<br><t
    -----^
    Expecting 'STRING', '}' 
```

我在哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:39:14.223

我修复了它，因为它试图解析整个网页。在使用 Mozilla Firebug 进一步追踪我的错误后，现在已修复。

# iphone - 如何使用 addSkipBackupAttributeToItemAtURL API？

> ID：13498752
> 
> 赞同：7
> 
> 时间：2012-11-21T17:26:15.660
> 
> 标签：iphone, objective-c, ios, xcode, ipad

由于这个问题，我的申请被拒绝：

[http://i.imgur.com/yajQh.png](http://i.imgur.com/yajQh.png)

我的应用程序是一个使用 SQL DB 的字典，带有书签等...

所以我从 appDelegate.m 的 Apple 文档中复制了这段代码：

```
- (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL
{
    assert([[NSFileManager defaultManager] fileExistsAtPath: [URL path]]);

    NSError *error = nil;
    BOOL success = [URL setResourceValue: [NSNumber numberWithBool: YES]
                                  forKey: NSURLIsExcludedFromBackupKey error: &error];
    if(!success){
        NSLog(@"Error excluding %@ from backup %@", [URL lastPathComponent], error);
    }
    return success;
} 
```

但像这样使用：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    [self addSkipBackupAttributeToItemAtURL:[NSURL URLWithString:@"<myApplication>/Library/Caches"]];
} 
```

但由于这个原因崩溃：

> 断言失败：([[NSFileManager defaultManager] fileExistsAtPath: [URL path]])，函数 -[AppDelegate addSkipBackupAttributeToItemAtURL:]，文件 /iData/Development 2011/My iPhone Project/APPNAME/APPNAME/AppDelegate.m，第 27 行。

根据那张照片，这是我唯一拒绝的问题吗？因为这是我第一次使用数据库。

谢谢 。～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

编辑：

```
- (NSString *) getDBPath
{
    NSInteger kValue = [[[NSUserDefaults standardUserDefaults] stringForKey:@"Bv"] intValue];

    NSString *documentsDir = [[NSString alloc] init];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory , NSUserDomainMask, YES);
    documentsDir = [paths objectAtIndex:0];

    switch (kValue) {

            case 0:
            documentsDir = [NSString stringWithFormat:@"%@/eng-per.sqlite", documentsDir];
            break;
        case 1:
            documentsDir = [NSString stringWithFormat:@"%@/eng-per.sqlite", documentsDir];
            break;

        case 2:
            documentsDir = [NSString stringWithFormat:@"%@/per-eng.sqlite", documentsDir];
            break;
}

return documentsDir 
```

}

然后在 app delegate.m 中改为：

```
[self addSkipBackupAttributeToItemAtURL:[NSURL fileURLWithPath:dbClass.getDBPath]]; 
```

现在应用程序午餐很好，没有崩溃

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T17:38:08.250

您的应用程序正在“崩溃”，因为您正在在线点击该断言：

```
assert([[NSFileManager defaultManager] fileExistsAtPath: [URL path]]); 
```

而且我怀疑您的问题实际上在于您如何设置 URL：

```
[NSURL URLWithString:@"<myApplication>/Library/Caches"]; 
```

您如何获得“ `<myApplication>`”的路径？

您需要获取应用程序的真正缓存文件夹，您可以通过以下方式完成：

[`[NSFileManager defaultManager] URLsForDirectory:NSCachesDirectory inDomains:NSUserDomainMask];`](https://developer.apple.com/library/ios/documentation/cocoa/reference/foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/URLForDirectory%3ainDomain%3aappropriateForURL%3acreate%3aerror%3a)（对于通过文件 URL 传回的位置）

或者

[`NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);`](http://developer.apple.com/library/ios/documentation/cocoa/reference/foundation/Miscellaneous/Foundation_Functions/Reference/reference.html#//apple_ref/c/func/NSSearchPathForDirectoriesInDomains)（对于 NSString 形式的路径）

因此，最终，您需要做的***不是***断言是否已将密钥设置为默认值，并且您需要为要保存的文件正确设置文件 URL。

使用以下内容创建您的 URL（准确地说是文件 URL）：

```
NSArray * arrayOfURLs = [[NSFileManager defaultManager] URLsForDirectory:NSCachesDirectory inDomains:NSUserDomainMask];
// make certain there's at least one file url returned by the above call
if([arrayOfURLs count] > 0)
{
    // and this would just be the URL to the cache directory...
    NSURL * cacheDirectoryPath = [arrayOfURLs objectAtIndex: 0];

    // ... to create a file url to your actual dictionary, you'd need to add a
    // filename or path component.

    // Assuming you save this as a property within your object
    self.cacheFileURL = [cacheDirectoryPath URLByAppendingPathComponent: @"myDatabase.db"];
} 
```

# c# - 通过 WPF (C#) 应用程序自动部署 Reporting Services 报表 (SQL Express 2008 R2)

> ID：13498753
> 
> 赞同：0
> 
> 时间：2012-11-21T17:26:24.870
> 
> 标签：c#, asp.net, wpf, reporting-services, ssrs-2008

我正在开发一个项目，该项目要求我使用 WPF 和 ClickOnce 创建一个安装程序应用程序，以在远程用户笔记本电脑上安装我的网站和所需的先决条件。作为此安装程序的一部分，我需要自动为远程用户 Reporting Services (SQL Express 2008 R2) 部署/更新报告、数据集和数据源；我发现以下线程[Publish rdl Reports Programmatically with c#](https://stackoverflow.com/questions/2323593/is-there-a-way-to-publish-rdl-reports-programmatically-with-c)但答案没有解释如何实现这一点，只是指向 API。

预先感谢您的协助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:11:17.707

您可能想查看 codeplex (http://rsbuild.codeplex.com/) 上的 RSBuild 项目。它很旧，但仍然指出了 SSRS 任务自动化的各个方面。

# iphone - 没有将整个 xml 数据放入 tableview

> ID：13498757
> 
> 赞同：0
> 
> 时间：2012-11-21T17:26:37.377
> 
> 标签：iphone, xcode, uitableview, xml-parsing

我正在将 xml 数据解析为表格视图，这里我正在检索**问题**和**答案**标签，问题标签中出现**问题**仅显示一个问题剩余问题未显示，这是 Web 服务[http://www.cmellc.com/DesktopModules/CaseChallenge/ quiz.xml](http://www.cmellc.com/DesktopModules/CaseChallenge/quiz.xml)
这是我写的代码

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
currentTag = elementName;

if ([currentTag isEqualToString:@"question"])
{
    model = [[ModelDataView alloc]init];
}

if([currentTag isEqualToString:@"answer"])
{
    model_2=[[Model2 alloc]init];
}  
}
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if([elementName isEqualToString:@"question"])
{
    [dataControllerArray addObject:model];
}

if ([elementName isEqualToString:@"answer"])
{
    [dataControllerArray2 addObject:model_2];
    model_2 = nil;
}

currentTag = nil;

}  
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
if ([currentTag isEqualToString:@"result"])
{
    model_2.result = string;
}

if ([currentTag isEqualToString:@"notes"])
{
    model_2.notes = string;
}

if ([currentTag isEqualToString:@"question"]) 
{
    model.question = string;
}

} 
```

这是表格视图方法的代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath   
{
    static NSString *cellIdentifier = @"cell";
   static NSString *cellIdentifier2 = @"cell2";
    UITableViewCell *cell;
if(tableView.tag==2)
  {
cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
if (cell == nil)
{
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];
}
Model2 *obj=[modelController.dataControllerArray2 objectAtIndex:indexPath.row];
NSString *res=obj.result;
   cell.textLabel.text=res;
  return cell;
  }
     else   if(tableView.tag==1)
{
    cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier2];
    if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier2] autorelease];
    }

    ModelDataView *obj=[modelController.dataControllerArray objectAtIndex:indexPath.row];
    NSString *res=obj.question;
UIWebView *_webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 190)];
[self.view addSubview:_webView];
        CGRect frame = _webView.frame;
    frame.size.height = 190;
        _webView.frame = frame;
  [_webView loadHTMLString:res baseURL:[NSURL URLWithString:res]];
  return cell;
    }
} 
```

感谢你们对我的帮助

# symfony - 使用 Twig 渲染条件模板

> ID：13498759
> 
> 赞同：1
> 
> 时间：2012-11-21T17:26:41.060
> 
> 标签：symfony, twig

我有一个带有左侧边栏的布局模板，其中我将位置传递的实体的信息显示为一个数组。

同样在这个模板中，我展示了一个包含所有这些位置的对象地图。

我想单击侧边栏的位置，然后在同一模板上显示另一个对象地图，用该位置的信息替换之前的地图。将信息保留在侧边栏上，而不是对数据库进行新的查询。

如何做到这一点？

阿贾克斯？条件布局？

我读了这篇文章，但我不明白如何解决我的问题：[http ://twig.sensiolabs.org/doc/recipes.html#overriding-a-template-that-also-extends-itself](http://twig.sensiolabs.org/doc/recipes.html#overriding-a-template-that-also-extends-itself)

PD：我正在使用 Twig 模板和 Symfony2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:40:23.593

您可以有一个单独的模板来打印对象映射，并且正如您所猜测的那样，这必须使用`AJAX`. 您将传递要在地图上显示的数据（不是 id，因为您不想再次查询数据库）并且控制器将返回格式化的 HTML。

然而，这在我看来有点矫枉过正。我总是会考虑做`JS`（使用可选框架）以便将侧边栏的内容与`Map`对象交换。

**这实际上取决于您使用哪个地图 API**。如果它可以通过控制，`JS`我不会再看了。它不能，那么，`AJAX`是你的自然选择....

## 更新：

好的，您应该做的是创建稍后将修改的初始 Map 对象：

```
var theMap = null;

function initializeMap(){
    var mapOptions = {
    center: new google.maps.LatLng(some_latitude, some_longitude),
        zoom: 8, // goes from 0 to 18
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    theMap = new google.maps.Map(document.getElementById("map_canvas"),mapOptions);
    // you must have some element with ID = 'map_canvas'
} 
```

`some_latitude`并且`some_longitude`相当不重要，因为您很可能会在几分钟内设置新坐标。

现在假设（但根本不重要）您使用一些`JS`框架（我更喜欢`jQuery`），您可以将点击事件绑定到这些位置链接：

```
var onlyMarker = null;
$('.location').click(function(){
    var $t = $(this);
    var newLatLang = new google.maps.LatLng($t.attr('data-lat') ,$t.attr('data-lng'));

    if ( onlyMarker  == null ) {
        onlyMarker = new google.maps.Marker({
            position: newLatLang
            map: theMap,
            title:  $t.attr('title')
        });
     }else{
        onlyMarker.setPosition(newLatLang);
     }
}); 
```

现在，依赖 HTML5 的 'data-*' 属性并不是一个好主意，特别是如果您使用任何其他更低的版本，您很可能会以无效标记告终。解决方法是让链接 ( `<a>`) 携带 id/key 到`LatLng`对象，例如：

```
// initially generated from `AJAX` or in `Twig` loop
var allLatlangs = [ 
    new google.maps.LatLngf(some_latitude, some_longitude),
    new google.maps.LatLngf(some_latitude, some_longitude),
    new google.maps.LatLngf(some_latitude, some_longitude),
];

$('.location').click(function(){
    var id = $(this).attr('id');
     var newLatLang = allLatLang(id);
     //....
     // everything else is the same 
     // ....
}); 
```

不要忘记使用正确的 API 密钥包含 Maps API：

```
https://maps.googleapis.com/maps/api/js?key=API_KEY_HERE&sensor=true 
```

为了获得有效的 API 密钥，请点击此链接：[API KEY HOW-TO](https://developers.google.com/maps/documentation/javascript/tutorial?hl=sr#api_key)

该链接基本上涵盖了我在此处描述的关键步骤，因此请研究它，它应该很好地结合在一起。

此外，如果您不确定如何从地图中检索某些内容，您应该查阅参考资料： [REFERENCE](https://developers.google.com/maps/documentation/javascript/reference)，其中每个方法调用都描述得很好

请记住，在加载所有内容之前不要执行任何此代码。

希望这会有所帮助:)

# url - FB、TWITTER、G+分享网址和固定预览图

> ID：13498763
> 
> 赞同：5
> 
> 时间：2012-11-21T17:26:52.693
> 
> 标签：url, twitter, google-plus, sharing, facebook-sharer

我有这些简单的社交分享链接：

```
FB share link
     <a href="#" class="share-fb" onclick='window.open( "https://www.facebook.com/sharer/sharer.php?u=http://mysite.org", "myWindow", 
                  "status = 1, height = 300, width = 600, resizable = 0" )'></a>

TWITTER share link
<a href="#" class="share-tw" onclick='window.open( "https://twitter.com/intent/tweet?url=http://mysite.org", "myWindow", 
              "status = 1, height = 300, width = 600, resizable = 0" )'></a>
GOOGLE PLUS
 <a href="#" class="share-g" onclick='window.open( "https://plus.google.com/share?url=http://mysite.org", "myWindow", 
              "status = 1, height = 300, width = 600, resizable = 0" )'>
             </a> 
```

这些链接会打开一个共享页面链接的弹出窗口。

我想要的是`add a fixed site image preview`用户要分享的每个链接。

如何添加它们的预览图像、固定、foreach（FB、TWITTER、G+）？

注意：预览图片是指这张照片中显示的图片（链接 www.google.it 旁边）：

![在此处输入图像描述](../Images/bfa40b5fe04c3b6c3b5f140e2a28ef15.png)

对于我试过的 FB 分享者：`<meta property="og:image" content="URL of your image" />`

但它似乎不起作用

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-21T18:30:14.197

为了使 sharer.php 工作，您应该填写更多的 Open Graph Tags。看看这个网站： http: [//ogp.me/](http://ogp.me/)

您可以随时在 Facebook 调试器中测试您的网站：[https](https://developers.facebook.com/tools/debug) ://developers.facebook.com/tools/debug 调试器还显示警告/错误，因此非常适合测试。

Twitter 没有图片。好吧，那是不正确的，您必须为您的页面创建一个“Twitter Card”。这在这里解释：[https ://dev.twitter.com/docs/cards](https://dev.twitter.com/docs/cards)

关于 Google+，这应该有效：

```
<meta itemprop="image" content="http://www....."> 
```

（在这里比较：[http](http://www.google.com/intl/en/webmasters/+1/button/index.html) ://www.google.com/intl/en/webmasters/+1/button/index.html ）

另请查看此线程：[Google +1 Generated Thumbmail in Profile](https://stackoverflow.com/questions/6628201/google-1-generated-thumbmail-in-profile)

# html - 使用 CSS 将宽度设置为父宽度

> ID：13498764
> 
> 赞同：0
> 
> 时间：2012-11-21T17:26:55.663
> 
> 标签：html, css

我需要将 child 设置`<ul>`为与其 parent 相同的宽度`<li>`。parent`<li>`的宽度都是不同的，所以我不能将其设置为可靠的东西。有没有办法通过 CSS 做到这一点？这就是我的意思：

这是什么：

![](../Images/6859c3526dee9c4aea804d142003cc60.png)

它应该是什么：

![](../Images/c08f70ab61f51f555be1fa968b51ac38.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:29:15.970

你试过`width:100%`吗？

```
<ul>
 <li>
   <ul style="width:100%">
   </ul>
 </li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:32:49.397

您需要首先为该 UL 定义盒子模型。

UL 元素默认具有边距和填充值。将 UL 设置为边距：0；而 padding: 0 将占据父 LI 的 100%。

```
ul li {
 ul {
  margin: 0;
  padding: 0;
 }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-21T17:34:13.527

我只是为每个 LI 设置了固定宽度。不理想，但可以使用。不过，感谢您的帮助。

# ruby - 在没有任何框架的情况下使用 Capybara 时的“未定义方法”

> ID：13498765
> 
> 赞同：1
> 
> 时间：2012-11-21T17:26:56.500
> 
> 标签：ruby, capybara

我想在没有 Rails、Cucumber、Rspec、Test::Unit 等的普通 Ruby 中使用 Capybara 进行调试。我按照[此处所示](https://stackoverflow.com/a/4172889/841064)进行了配置，但在使用 Capybara API 时仍然存在异常。

```
require 'rspec'
require 'capybara'
require 'capybara/dsl'
require 'rspec/expectations'

Capybara.app_host = "http://somedomain.com"
Capybara.run_server = false
Capybara.current_driver = :selenium

include Capybara::DSL

visit '/'
page.should have_xpath "//span[@class='my_class']" 
```

`visit`方法工作正常。但我有例外`undefined method 'have_xpath' for main:Object`。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:38:39.383

您使用 RSpec 匹配器而不包括它们：

```
include RSpec::Matchers 
```

# c# - 编程逻辑 IF Then

> ID：13498770
> 
> 赞同：0
> 
> 时间：2012-11-21T17:27:08.453
> 
> 标签：c#, if-statement, logic

我一直在处理这类问题，想知道您是否有任何巧妙优雅的解决方法：

```
if(myObject != null && myObject.myProperty != myValue){
//do something
}else{
//do something else
} 
```

如果我运行这个逻辑，我会在 myObject 为空时得到空引用，所以我最终会这样做：

```
if(myObject != null){
    if(myObject.myProperty != myValue){
        //do something
    }else{
        //do something else
    }
}else{
    //do something else
} 
```

所以我最终在我的“做别的事情”上有多余的代码你们如何处理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:30:58.587

第一次检查`null`意味着如果不满足第二个条件，则不会评估第二个条件 - 使用逻辑 AND ( `&&`) 时 - 所以我建议您的空引用异常来自其他地方，而不是后一个条件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T17:31:27.463

没有“优雅”的方式来处理这个问题 - 共享“做其他事情”的代码的两种方式实际上是不同程度的不优雅：

*   您可以将“做其他事情”代码放入函数中，或者
*   在输入之前定义一个标志`if`来说明是否需要额外的处理，并在退出`if`语句时对标志进行操作。

第一个解决方案是不言自明的；第二个解决方案如下所示：

```
var processed = false;
if(myObject != null) {
    if(myObject.myProperty != myValue){
        //do something
        processed = true;
    }
    // do more stuff knowing that myObject is not null
}
if (!processed) {
    // do something else
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-21T17:29:14.850

你的第一个陈述是完全有效的。

```
if(myObject != null && myObject.MyProperty != myValue) 
```

这会做的是它会`myObject != null`首先评估，因为它`&&`的右边有一个，如果它是假的，它甚至不需要评估另一个子句。

如果只是复制粘贴这里粘贴的代码，我想你会发现它运行成功了

# ajax - Ajax 图像编辑器在 Chrome 中不起作用

> ID：13498771
> 
> 赞同：1
> 
> 时间：2012-11-21T17:27:10.883
> 
> 标签：ajax, image, google-chrome, editor

[我正在使用来自http://www.flash-image-editor.com/opensource,index](http://www.flash-image-editor.com/opensource,index)的开源 Ajax 图像编辑器

对于他们的现场测试[http://www.flash-image-editor.com/ajax-image-editor/](http://www.flash-image-editor.com/ajax-image-editor/)

它在 Firefox、Opera 和 IE 中运行良好。但是，Chrome (v23.0.1271.64 m) 似乎很特别。

在我从历史窗口单击图像后，它只会在中心显示编辑的图像。

我试图强制重新显示图像。不工作。

我查找了 1 个错误和 1 个警告的原因：

> 未捕获的类型错误：无法调用 null 的方法“焦点”
> 
> 资源解释为图像，但使用 MIME 类型 text/html 传输

试图寻找导致他们无济于事的原因。

谁能告诉我为什么 Chrome 不会自己显示图像？

# facebook - Facebook 粉丝点击后会被提示“点赞”

> ID：13498772
> 
> 赞同：1
> 
> 时间：2012-11-21T17:27:12.720
> 
> 标签：facebook, facebook-like, click-through

我想知道这是否不仅仅是这些人的 cookie 或浏览器设置的问题，但问题在于：

我正在为一个举办比赛的网站管理一个 Facebook 业务页面（需要点击该网站），在数千个成功的条目中，我们只有少数用户抱怨他们点击了我们的比赛条目页面和网站提示他们在他们已经登录时登录 Facebook - 或要求他们“喜欢”该页面，同时显示在声明他们已经拥有的图像下方。

我不知道该告诉他们什么，但我不想忽略这个问题。有什么我可以做或建议他们做的吗？

***更新*** 有人告诉我，可能是这些配置文件的应用程序权限设置不正确，他们可能会删除该应用程序并重试。听起来对吗？

# r - apply 中的 if 语句如何影响运行时

> ID：13498779
> 
> 赞同：0
> 
> 时间：2012-11-21T17:27:32.947
> 
> 标签：r, apply

如果我有条件，将其放在应用函数内部/外部是否会显着影响运行时间，例如：

```
names = c("Joe", "Jen", "Bob")

if("Joe" %in% names){
     lapply(1:1000000, function(y){
        #Do something computationally intensive
     })
}
if("Jen" %in% names){
    lapply(1:1000000, function(y){
        #Do something computationally intensive
    })
} 
```

相对：

```
lapply(1:1000000, function(y){
    if("Joe" %in% names){
        #Do something computationally intensive
    }
    if("Jen" %in% names){
        #Do something computationally intensive
    }
}) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:40:22.547

在`if`循环中非常昂贵。

使用 rbenchmark 来查看。将第一个写为函数“a”，第二个写为“b”，给出：

```
> benchmark(a(), b(), replications=1)
  test replications elapsed relative user.self sys.self user.child sys.child
1  a()            1   0.595     1.00     0.593    0.000          0         0
2  b()            1   4.141     6.96     4.121    0.001          0         0 
```

建议将“Joe”和“Jen”都放入名称中。结果大致相同。

```
> benchmark(a(), b(), replications=1)
  test replications elapsed relative user.self sys.self user.child sys.child
1  a()            1   0.600    1.000     0.597        0          0         0
2  b()            1   4.036    6.727     4.016        0          0         0 
```

编辑：请注意，您给出的表达式`benchmark`是在计时循环内评估的，因此必须提供函数括号。

# eclipse - 在 Eclipse 编辑器中打开一个文件并将焦点设置在该编辑器上

> ID：13498780
> 
> 赞同：2
> 
> 时间：2012-11-21T17:27:39.090
> 
> 标签：eclipse, editor, focus

我有一个奇怪的问题让我感到困惑。我使用以下代码在 Eclipse 的编辑器中打开一个文件：

```
 final IWorkbench wb = PlatformUI.getWorkbench();
    IWorkbenchWindow window = wb.getActiveWorkbenchWindow();
    final IWorkbenchPage page = window.getActivePage();

    wb.getProgressService().runInUI( window, new IRunnableWithProgress() {

        @Override
        public void run( IProgressMonitor monitor ) throws InvocationTargetException, InterruptedException {

            if( null == monitor ) {
                monitor = new NullProgressMonitor();
            }

            try {
                monitor.beginTask( "Append to file", 2 );

                ITextEditor editor = (ITextEditor) IDE.openEditor( page, file );

                monitor.worked( 1 );

                // TODO Bug: Editor is active, it has the focus but doesn't process keypress events :-(
            } catch( Exception e ) {
                throw new InvocationTargetException( e, "Error appending to file " + file );
            } finally {
                monitor.done();
            }
        }
    }, null ); 
```

我从互联网上的几个来源收集了一些零碎的东西。

奇怪的问题是编辑器似乎有焦点（标签突出显示，我看到它周围的蓝色边框）

但是在编辑器中没有可见的光标，当我输入一些东西时，什么也没有发生（在工作台的其他地方也没有发生任何事情）。

我也尝试过`ITextEditor editor = (ITextEditor) IDE.openEditor( page, file, true );`，但结果相同。

当我单击选项卡时，会出现光标，我可以使用编辑器。但是，按下`F12`没有效果。

和想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-25T09:57:26.313

尝试`page.activate(editor);`（即使它应该已经处于活动状态）。

# javascript - 在 AJAX 调用时将 jQuery 对象转换为字符串

> ID：13498781
> 
> 赞同：0
> 
> 时间：2012-11-21T17:27:02.287
> 
> 标签：javascript, jquery, html, ajax

假设我提交了一个表单，其中`user_input`包含“我是自由的”之类的任何内容。我通过 AJAX 提交它，它作为字符串返回给我。好的，现在它是一个对象......我如何将它变成一个字符串？

谢谢，

```
<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="content-type" content="text/html" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>

    <title>Sin título 3</title>
</head>

<body>

<div id="result_target" style="display:none;"></div>
<form id="form_to_post" action="#" method="post">
<input type="hidden" name="url" value="example.php" />
<input type="text" name="user_input" />
<input type="submit" value="Submit"  />
</form>

<script>
$(document).ready(function() {

$("#form_to_post").submit(function() {

var hiddenURL = $("input[name=url]");
var userInputForm = $("input[name=user_input]");

//var dataString = "userInput="+inputForm;

$.ajax({
type: "POST",
url: hiddenURL;
data: {userInput: userInputForm},
success: function(return_contents) {
//returns jquery object...
var output =//
$("#result_target").html(output);
}
});

});

});
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:30:42.760

使用[val()](http://api.jquery.com/val/)从输入中获取值

```
data: {userInput: userInputForm.val()}, 
```

# python - 如何找到最小的 N

> ID：13498784
> 
> 赞同：0
> 
> 时间：2012-11-21T17:27:27.317
> 
> 标签：python, python-2.7

在这种情况下，我有一个代码可以从名称列表中确定幸存者以走木板，列表中的最后一个人幸存下来，我为此拥有的代码是：

```
names =  ["Andrew", "Brenda", "Craig", "Deidre", "Edward", "Felicity", "Greg", "Harriet"]
def survivor(names, step):
    Next = step - 1
    while len(names) > 1:
        names.pop(Next)
        Next = Next + step
        Next = (Next - 1) % len(names)
        print names

    return names[0] 
```

这可以根据步骤中的内容返回幸存者，但我还需要为一个人的生存计算出最小的 N 步，例如 3 用于 greg 和 2 用于 Andrew。

我为此尝试过的代码是：

```
assert name in names
for step in survivor(names, step):
    if survivor == name:
        return step 
```

但它一直说未定义分配或全局步骤之前引用的局部变量步骤。

和

```
assert name in names
for step in itertools.count(1):
    if survivor(names, step) == name:
        return step 
```

但这会返回

[“布伦达”、“克雷格”、“迪德”、“爱德华”、“费利西蒂”、“格雷格”、“哈里特”]

['Craig'、'Deidre'、'Edward'、'Felicity'、'Greg'、'Harriet']

['Deidre'、'Edward'、'Felicity'、'Greg'、'Harriet']

['爱德华'，'费利西蒂'，'格雷格'，'哈里特']

['幸福'，'格雷格'，'哈里特']

['格雷格'，'哈里特']

['哈里特']

这不是我想要的

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:59:28.513

这个循环不符合您的预期。你想要的应该是这样的：

```
def shortest(name):
    assert name in names
    for step in range(1, len(names)+1):
        #Go through all possible steps, from 1 to number of items (the +1 is to include the last item too)
        if survivor(names[:], step) == name: # Check that this item matches
            return step # Break out of the loop when you get to it 
```

可以，`itertools.count(1)`但是您也可以使用 a `while True`，并且步长大于名称列表的长度是没有意义的。

您的问题可能是名称数组在名字之后变为空。因为您正在`pop`删除所有元素，并修改`names`全局范围内的列表（在函数之外定义）。所以你必须复制它（使用一个`names[:]`或`list(names)`两个都可以达到相同的目的）。

这是我做的测试：

```
for n in names:
    print n, shortest(n) 
```

和输出：

```
Andrew 2
Brenda None
Craig 5
Deidre 7
Edward None
Felicity 4
Greg 3
Harriet 1 
```

**注意：**我不知道为什么里面有`None`s ......但你给出的例子确实匹配！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T17:33:23.047

```
for step in survivor(names, step): 
```

注意你是如何在`step`这里使用两次的。Python 应该如何在将`survivor`其从该函数中取出之前将其传递给该函数？

我*想*你想要的是[`range`功能](http://docs.python.org/2/library/functions.html#range)。这将遍历`step`从 1 到名称列表长度的每个值：

```
for step in range(1, len(names)): 
```

你的`itertools.count`版本也应该可以工作，现在我考虑了一下。你是在检查这个函数的返回值还是只看它打印出来的内容？输出看起来像是来自这一行：

```
print names 
```

另一件事是您的函数每次运行时都会更改原始列表，因为您更改`names`了并且没有制作副本。也许您想在更改之前制作一个副本：

```
def survivor(names, step):
    names = names[:]
    # etc 
```

请参阅[此问题](https://stackoverflow.com/questions/509211/good-primer-for-python-slice-notation)，了解为什么要`names[:]`创建列表的副本。

# tsql - 如果单词之间有空格，则在 SSRS 中拆分字符串

> ID：13498786
> 
> 赞同：2
> 
> 时间：2012-11-21T17:28:40.700
> 
> 标签：tsql, reporting-services, expression, business-intelligence

我有一个包含多个单词的字段。我想将单词分隔到不同的行上，而不是用空格分隔。

例如“Not Great”，我想在第一行写“Not”，在第二行写“Great”，如下所示：

```
Not
Great 
```

中间可能有带有“/”字符的单词，即“Great / Good”，我想将所有内容放在第二行的第一个单词之后，并将所有内容放在第三行的“/”之后，即

```
Great 
/
Good 
```

基本上，只要有空间，我就想将该字符串分成多行。我如何在 SSRS 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:06:55.370

好的，您希望将字符串分成不同的行。您是指在同一个 tablix 单元格中的不同行上吗？

这很直接，请参阅 [http://www.kodyaz.com/articles/reporting-services-add-line-break-between-words-custom-code.aspx](http://www.kodyaz.com/articles/reporting-services-add-line-break-between-words-custom-code.aspx)

如果您的意思是拆分字符串，以便单词位于不同的 Tablix 单元格上，一种方法是在列表中使用子报表。

将列表数据集设置为包含多个单词字符串的原始数据集，将该字符串作为参数传递给子报表。在子报告中，将参数传递给将字符串拆分为单独行的数据集。在这里失去了关于如何做到这一点的建议 [将逗号分隔的字符串转换为单独的行](https://stackoverflow.com/questions/5493510/turning-a-comma-separated-string-into-individual-rows)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T00:32:35.920

只需用回车和换行替换空格：

```
=Replace(Fields!SomeWords.Value, " ", vbCrLf) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T19:05:32.213

=Fields!SomeFields.Value.Replace(Space(1), vbCrLf)

# android - Service.startActivity(intent) 抛出空指针异常

> ID：13498788
> 
> 赞同：2
> 
> 时间：2012-11-21T17:28:46.447
> 
> 标签：android, service, nullpointerexception

我有一个奇怪的问题，我无法解决。我正在尝试从我自己制作的服务中打开一个 ListActivity。ListActivity 接收来自服务的照片路径，该路径必须显示在列表中。这是服务的代码：

```
public void onStart(Intent intent, int startId) {
    // TODO Auto-generated method stub
    super.onStart(intent, startId);
    Toast to=Toast.makeText(this, "entrando en servicio", 1000);
    to.show();
    accederFotosFolder();
    crearArrayFotos();      
    Intent i=new Intent(this.getBaseContext(),Lista.class);
    Bundle b=new Bundle();
    b.putStringArrayList("imagenes",imagenes);
    i.putExtras(b);
    Toast t=Toast.makeText(this, ""+i, 1000);
    t.show();
    i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    i.setFlags(Intent.FLAG_FROM_BACKGROUND);
    startActivity(i);
} 
```

当我运行它时，我总是有一个空指针异常。

我检查了，没有什么是空的，不是捆绑包，不是 imagenes（这是一个`ArrayList<String>`由 accederFotosFolder()+crearArrayFotos() 生成的 2 个元素）。意图也不是。如果我评论 startActivity(i) 一切正常，那么该行肯定是。我首先想到的是 mi ListActivity 出了点问题，但它从未进入它的代码，它只是停在 startActivity(i) 行。

有什么建议么？它快把我逼疯了。

更新

```
 **That's the logcat output**

11-21 19:02:32.214: E/AndroidRuntime(28980): FATAL EXCEPTION: main
11-21 19:02:32.214: E/AndroidRuntime(28980): java.lang.RuntimeException: Unable to      start service com.example.serviciofotos.Servicio@4166f550 with Intent { cmp=com.example.serviciofotos/.Servicio }: android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
11-21 19:02:32.214: E/AndroidRuntime(28980):    at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2518)
11-21 19:02:32.214: E/AndroidRuntime(28980):    at android.app.ActivityThread.access$1900(ActivityThread.java:134)
11-21 19:02:32.214: E/AndroidRuntime(28980):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1310)
11-21 19:02:32.214: E/AndroidRuntime(28980):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-21 19:02:32.214: E/AndroidRuntime(28980):    at android.os.Looper.loop(Looper.java:154)
11-21 19:02:32.214: E/AndroidRuntime(28980):    at android.app.ActivityThread.main(ActivityThread.java:4624)
11-21 19:02:32.214: E/AndroidRuntime(28980):    at java.lang.reflect.Method.invokeNative(Native Method)
11-21 19:02:32.214: E/AndroidRuntime(28980):    at java.lang.reflect.Method.invoke(Method.java:511)
11-21 19:02:32.214: E/AndroidRuntime(28980):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:809)    
11-21 19:02:32.214: E/AndroidRuntime(28980):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:576)
11-21 19:02:32.214: E/AndroidRuntime(28980):    at dalvik.system.NativeStart.main(Native Method)
11-21 19:02:32.214: E/AndroidRuntime(28980): Caused by: android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
11-21 19:02:32.214: E/AndroidRuntime(28980):    at android.app.ContextImpl.startActivity(ContextImpl.java:871)
11-21 19:02:32.214: E/AndroidRuntime(28980):    at android.content.ContextWrapper.startActivity(ContextWrapper.java:276)
11-21 19:02:32.214: E/AndroidRuntime(28980):    at com.example.serviciofotos.Servicio.onStart(Servicio.java:53)
11-21 19:02:32.214: E/AndroidRuntime(28980):    at android.app.Service.onStartCommand(Service.java:438)
11-21 19:02:32.214: E/AndroidRuntime(28980):    at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2501)
11-21 19:02:32.214: E/AndroidRuntime(28980):    ... 10 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T17:31:22.783

使用当前服务上下文或`getApplicationContext()`代替`getBaseContext()`从服务启动 ListActivity：

```
Intent i=new Intent(Your_Service_Name.this,Lista.class);
Bundle b=new Bundle();
b.putStringArrayList("imagenes",imagenes);
i.putExtras(b);
Toast t=Toast.makeText(this, ""+i, 1000);
t.show();
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
i.setFlags(Intent.FLAG_FROM_BACKGROUND);

startActivity(i); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T10:20:27.300

解决方案！！！！！

最后！！！好的，有2个错误。第一个是我的行 i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 在错误的地方，它必须在意图声明之后。

第二个问题是我正在向我的 ListActivity 发送一个 ArrayList 并尝试接收一个字符串（错误的捆绑方法）。就是这样了。

感谢所有需要帮助的人。这里是服务的正确代码：

```
 public void onStart(Intent intent, int startId) {
    // TODO Auto-generated method stub
    super.onStart(intent, startId);
    Toast to=Toast.makeText(this, "entrando en servicio", 1000);
    to.show();
    accederFotosFolder();
    crearArrayFotos();

    Intent i=new Intent(Servicio.this.getBaseContext(),Lista.class);
    i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    Bundle b=new Bundle();
    b.putStringArrayList("imagenes",imagenes);
    i.putExtras(b);
    getApplication().startActivity(i);
} 
```

和 ListActivity

```
 public class Lista extends ListActivity {
private Bundle recogerDatos=new Bundle();
private ArrayList<String> imagenes;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    recogerDatos=this.getIntent().getExtras();

    imagenes=recogerDatos.getStringArrayList("imagenes");
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, imagenes);
    setListAdapter(adapter);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T17:32:24.220

您正在运行它`onStart()`，这意味着它将作为 Context`this.getBaseContext()`返回，直到它才被创建。`null``onCreate()`

要么使用：

```
Intent i=new Intent(this.getApplicationContext(),Lista.class); 
```

或将代码移入`onCreate()`.

# forms - 重新查询 MS Access 表单导致未应用过滤器

> ID：13498789
> 
> 赞同：0
> 
> 时间：2012-11-21T17:29:01.977
> 
> 标签：forms, ms-access, filtering

最近，我开始注意到我的一种连续形式的奇怪行为。它在标题中包含可用于过滤列表的文本框。出于某种原因，每当请求此表单时，例如在另一个表单中编辑或添加记录时，此表单将恢复为未过滤状态。

我逐步浏览了代码并在即时窗口中使用了一些变量。过滤器仍然存在，只是没有被应用。设置 Me.FilterOn = True 什么都不做，因为它已经是真的了。解决方法很简单，我可以设置 Me.Filter = Me.Filter，但我想首先找出导致这种行为的原因。

我还有其他可以完全正常工作的连续形式；重新查询它们不会对过滤器做任何事情。我假设我更改了有问题的表单上的一些设置，但我不知道是什么。我在属性窗口中比较了两个表单之间的所有设置，一无所获。有谁知道是什么导致了这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:57:32.903

好吧，我知道出了什么问题。我意识到表单所基于的查询是传递查询。一旦我将其更改为正常的访问查询，问题就消失了。

不幸的是，出于某种原因，我将其作为传递查询。Mircosoft Access 不喜欢我的加入。有时它会给我一个不支持连接的错误，有时它只会给我搞砸的结果......看起来我必须重新考虑这个查询。

# tridion - 从自定义 URL 中删除最后一个值时出错

> ID：13498791
> 
> 赞同：4
> 
> 时间：2012-11-21T17:29:05.993
> 
> 标签：tridion, tridion-2011

我目前正在创建一个通过自定义 url 功能访问的页面。

我正在尝试删除多值字段中的所有组件。删除最后一个`Cannot delete a value`时出现错误。

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script type="text/javascript" language="javascript" src="/WebUI/Core/Controls/Popup/PopupInit.js"></script>
    <script type="text/javascript" language="javascript">
    function removeAllValues() {

        var fields = window.dialogArguments.getFields();

        if (fields != null) {
            for (var i = 0; i < fields.length; i++) {
                window.dialogArguments.container.deleteField(fields[i]);
            }
        }
    }
    </script>
</head>
<body>
    <form id="form1" runat="server">
        <div>
            <input type="button" onclick="removeAllValues();" value="Delete All" />
        </div>
    </form>
</body>
</html> 
```

除了 LiveContent 网站上的两个简短页面之外，还有其他文档吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T20:49:39.840

您还可以稍微更改您的函数以删除除最后一个以外的所有字段，然后将最后一个字段的值设置为空：

```
function removeAllValues() {

    var fields = window.dialogArguments.getFields();

    if (fields != null) {
        var lastFieldIndex = fields.length - 1;

        for (var i = 0; i < lastFieldIndex; i++) {
            window.dialogArguments.container.deleteField(fields[i]);
        }

        fields[lastFieldIndex].setValues([]);
    }
} 
```

# entity-framework - 没有外键的实体框架代码第一次映射

> ID：13498795
> 
> 赞同：7
> 
> 时间：2012-11-21T17:29:16.780
> 
> 标签：entity-framework, mapping, code-first

我有两张桌子：

要求

*   ID（整数）PK
*   客户 ID（整数）
*   工作编号（整数）

评论

*   ID（整数）PK
*   Job_ID (int)
*   注释（varchar）

这些表没有外键，也不可能添加任何外键。我正在尝试将它们映射到 EF 中。我有每个类，我试图在流利的代码中定义关系，以将 Comment.Job_ID 映射到 Requirement.JobNumber。一个需求可以有很多评论。Requirement 有一个 Comments 列表，Comment 有一个 Requirement 属性。

我有这个映射设置：

```
modelBuilder.Entity<Comment>().HasRequired(c => c.Requirement)
                    .WithMany(s => s.Comments)
                    .HasForeignKey(f => f.Job_ID); 
```

我一直试图让 Comment.Job_ID 映射到 Requirement.JobNumber。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T20:35:59.350

这是不可能的。使用实体框架，`Comment.Requirement`导航属性所引用的实体通常由 中的（主）键属性标识`Requirement`，即`ID`。没有映射选项来定义目标属性是键属性以外的任何东西——比如`JobNumber`或另一个非键属性。

我只能想象你可以“伪造”模型中的主键属性`JobNumber`而不是`ID`（假设它`JobNumber`在表中是唯一的`Requirement`）：

```
modelBuilder.Entity<Requirement>().HasKey(r => r.JobNumber); 
```

我不知道这是否会产生其他不希望的副作用。`JobNumber`（如果不是唯一的，它肯定不起作用，*因为*EF 不允许将多个具有相同键的实体附加到上下文，并且更新/删除等不会在数据库中找到正确的记录。 ) 这对我来说是错误的和骇人听闻的。老实说，我什至不会尝试，接受这样一个事实，即您在数据库中没有真正的外键关系，忘记导航属性`Requirement.Comments`并在 LINQ 中`Comment.Requirement`使用 manual`join`来关联我需要的表数据/实体在给定的情况下。

# soap - 对尝试使用 ColdFusion 使用 SOAP API 感到困惑

> ID：13498801
> 
> 赞同：3
> 
> 时间：2012-11-21T17:29:31.813
> 
> 标签：soap, coldfusion

我正在使用一个 API，该 API 对于特定类型的函数有两个不同的 URL。第一个是支持 JSON 或 SOAP 请求的事务 API。我已经使用专门的 JSON 调用在这个 API 中调用了我需要的所有函数，并且一切似乎都运行良好。

第二个是用于查找和/或下载报告的报告 API。此 API 专门用于 SOAP。我无法让这个 API 中的任何功能正常工作。我试图联系公司的支持小组，但他们没有任何人可以帮助我在 ColdFusion 中调用 API。我尝试了两种不同的方式来与这个 API 交互并访问这些函数，但结果都是空的。以下是我的示例以及我可以提供的尽可能多的信息；我们的服务提供商的 API 和相关文档是保密的，但我可以回答一些与我的代码有关的具体问题。

方式1：创建一个webservice对象。

我尝试创建此 SOAP 调用的第一种方法是通过 web 服务对象。使用元数据交换点 URL，我将它传递给 createObject 函数，如下所示：

```
<cfset argStruct = structNew() />
<cfset argStruct['username'] = 'myusername' />
<cfset argStruct['password'] = 'mypassword' />
<cfset testSvc = createObject('webservice','https://brandnameapi.sandbox.serviceprovider.com/vernum/ReportingAPI.svc/mex',argStruct) /> 
```

当我运行此代码时，我收到以下错误消息：

> 无法为 Web 服务调用生成存根对象。名称：[https](https://brandnameapi.sandbox.serviceprovider.com/vernum/ReportingAPI.svc/mex) ://brandnameapi.sandbox.serviceprovider.com/vernum/ReportingAPI.svc/mex 。WSDL：[https](https://brandnameapi.sandbox.serviceprovider.com/vernum/ReportingAPI.svc/mex) ://brandnameapi.sandbox.serviceprovider.com/vernum/ReportingAPI.svc/mex 。javax.wsdl.WSDLException: WSDLException (at /wsdl:definitions/wsdl:import): faultCode=OTHER_ERROR: Unable to resolve import document at 'https://brandnameapi.sandbox.serviceprovider.com/vernum/ReportingAPI.svc/mex? wsdl=wsdl1'，相对于 'brandnameapi.sandbox.serviceprovider.com/vernum/ReportingAPI.svc/'：java.io.IOException：服务器返回 HTTP 响应代码：401 对于 URL：[https://brandnameapi.sandbox.serviceprovider。 com/vernum/ReportingAPI.svc/mex?wsdl=wsdl1](https://brandnameapi.sandbox.serviceprovider.com/vernum/ReportingAPI.svc/mex?wsdl=wsdl1)

由于 401 错误通常是错误的授权，因此我通过直接在浏览器中调用 URL 来仔细检查地址，并在浏览器中提示我使用 UN/PW。我输入了我的值，并被允许访问 URL，并收到此 XML 作为回报：

```
<?xml version="1.0" encoding="utf-8"?>
<wsdl:definitions name="ReportingAPI" targetNamespace="https://https://brandnameapi.serviceprovider.com/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:wsa10="http://www.w3.org/2005/08/addressing" xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy" xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:tns="https://https://brandnameapi.serviceprovider.com" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:i0="https://https://brandnameapi.serviceprovider.com/ReportingAPI/soapBinding" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">
<wsdl:import namespace="https://https://brandnameapi.serviceprovider.com/ReportingAPI/soapBinding" location="https://https://brandnameapi.sandbox.serviceprovider.com/vernum/ReportingAPI.svc/mex?wsdl=wsdl1"/>
<wsdl:types/>
<wsdl:service name="ReportingAPI">
    <wsdl:port name="BasicHttpBinding_IReportingAPI" binding="i0:BasicHttpBinding_IReportingAPI">
        <soap:address location="https://https://brandnameapi.sandbox.serviceprovider.com/vernum/ReportingAPI.svc/soap"/>
    </wsdl:port>
</wsdl:service> 
```

这大约是我所得到的。当我用浏览器调用 URL 并传递身份验证信息时，我就可以访问 XML。当我尝试使用 ColdFusion 执行此操作时，我收到 401 错误。

方式2：cfhttp请求调用

当我切换到使用 cfhttp 时，我似乎走得更远了。当我使用这个时：

```
<cfhttp url="https://brandnameapi.sandbox.serviceprovider.com/vernum/ReportingAPI.svc/mex"
username="myusername" password="mypassword" method="get" result="httpResponse" 
timeout="300">
</cfhttp> 
```

httpResponse 返回适当的页面信息，并且 httpResponse.filecontent 返回我在浏览器中直接调用它时收到的相同 XML。

更进一步，我使用 SOAP URL 并尝试调用 API 中的函数，该函数返回可用报告文件的列表。我使用了与事务 API 中所有 JSON 调用相同的已知工作流程：

```
<cfhttp url="https://brandnameapi.sandbox.serviceprovider.com/vernum/ReportingAPI.svc/soap/queryAvailableReportFiles"
username="myusername" password="mypassword" method="post" 
result="httpResponse" timeout="300">
<cfhttpparam type="formfield" name="typeOfReport" value="DailyCSVFile" />
</cfhttp> 
```

当我运行此代码时，我收到状态代码 415 和错误“无法处理消息，因为内容类型 'application/x-www-form-urlencoded' 不是预期的类型 'multipart/related; 类型="应用程序/xop+xml"'

当我在我的 cfhttps 之间添加这一行时：

```
<cfhttpparam type="header" name="Content-Type" value='multipart/related; type="application/xop+xml"' /> 
```

我得到与上面相同的错误，但状态代码更改为 400。我没有包括我尝试做的所有事情，只包括我现在所在的位置。我将尽可能多地回答问题，并将按照指示重新执行步骤以找到解决此问题的方法。

**更新：**根据要求，我已更改 cfhttp 调用以尝试传递 XML 而不是表单字段。我的 XML 代码是直接从 API 文档中提取的，该文档有一个原始数据示例，用于从 API 请求不同功能的原始数据：

```
<cfsavecontent variable="soapBody">
<cfoutput>
    <s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
        <s:Body>
            <queryAvailableReportFiles
xmlns="https://brandnameapi.sandbox.serviceprovider.com/contract">
                <fileName>DailyCSVFile</fileName>
            </queryAvailableReportFiles>
        </s:Body>
    </s:Envelope>
</cfoutput>
</cfsavecontent>

<cfhttp url="https://prismproapi.sandbox.koretelematics.com/4/ReportingAPI.svc/soap/queryAvailableReportFiles" username="vfapi" password="bPzqQyK3" method="post" result="httpResponse" timeout="300">
<cfhttpparam type="xml" value="#trim(soapBody)#" />
</cfhttp> 
```

公平地说，我不知道我是否做得对。从它返回的错误消息是，“由于 EndpointDispatcher 的 AddressFilter 不匹配，接收方无法处理带有 To [https://prismproapi.sandbox.koretelematics.com/4/ReportingAPI.svc/soap/queryAvailableReportFiles](https://prismproapi.sandbox.koretelematics.com/4/ReportingAPI.svc/soap/queryAvailableReportFiles)的消息. 检查发送方和接收方的 EndpointAddresses 是否一致。” 我也收到 500 错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T18:37:42.317

这是我通常如何编写和执行 SOAP 请求的示例。请注意，您需要修改 SOAP 主体以适应您的 API 需求。希望这将帮助您朝着正确的方向前进。

顺便说一句，Ben Nadel 非常擅长[使用 ColdFusion 和 CFHTTP 发出 SOAP Web 服务请求](http://www.bennadel.com/blog/1809-Making-SOAP-Web-Service-Requests-With-ColdFusion-And-CFHTTP.htm)

这是我的示例代码：

```
<!--- Compose SOAP message to send to Web Service --->
<cfsavecontent variable="soapRequest">
    <?xml version="1.0" encoding="UTF-8" ?> 
    <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:example="http://www.domain.com/soap/example/">
        <soapenv:Header/>
        <soapenv:Body>
          <example:ReportAPI>
             <typeOfReport>DailyCSVFile</typeOfReport>
          </example:ReportAPI>
        </soapenv:Body>
    </soapenv:Envelope>
</cfsavecontent>

<!--- Send SOAP request to the Web Service --->
<cfhttp url="https://brandnameapi.sandbox.serviceprovider.com/vernum/ReportingAPI.svc/soap/queryAvailableReportFiles" username="myusername" password="mypassword" method="post" result="httpResponse" timeout="300">
    <cfhttpparam type="header" name="content-type" value="text/xml" />
    <cfhttpparam type="header" name="content-length" value="#Len(Trim(soapRequest))#" />
    <cfhttpparam type="header" name="charset" value="utf-8" />
    <cfhttpparam type="xml" name="message" value="#Trim(soapRequest)#" />
</cfhttp> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:42:28.387

他们的 API 有问题。没有代码更改可以解决此问题。

# css - 绝对定位的元素没有高度。这是什么意思？

> ID：13498802
> 
> 赞同：0
> 
> 时间：2012-11-21T17:28:53.473
> 
> 标签：css, css-position

嗨，

我在网上看到绝对定位的元素没有高度。有人可以用简单的方式解释这一点，并可能用一个例子来说明它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:37:36.977

我觉得你有点困惑。您可能听说过**仅包含绝对定位元素的元素没有高度**。这更有意义。

与任何元素一样，绝对定位的元素将具有其内容的高度，除非使用`height`or另有指定`min-height`。

仅包含绝对（或浮动）定位元素的元素没有高度，因为它们的内容（也称为定位元素）是从文档流中取出的。这意味着，它们不会沿着文档的渲染树渲染，其中内联元素水平堆叠，块元素垂直堆叠，而是在相对于最近定位的祖先的绝对位置上渲染。因此，它们的大小不计入父母的身高。

# jquery - jQuery解析JSON数据

> ID：13498804
> 
> 赞同：1
> 
> 时间：2012-11-21T17:29:50.680
> 
> 标签：jquery, json

我已经从我的网络服务返回了这个 JSON 数据。

我怎样才能遍历每一行并附加到一个`<ul>`？

我有下面的代码，但它似乎并不完全有效。谢谢。

```
<script type="text/javascript">
        $(document).ready(function() {
            $('a#pop-video-link').click( function(e){
                // window.alert("test");
                var htm = "";
                // htm = $('ul.ad-thumb-list').html(htm);
                $("ul.ad-thumb-list li").remove();
                e.preventDefault();
                var src = $(this).attr('title');
                getResults(src);

             function getResults(str) {
               $.ajax({
                        type: "POST",
                        async: false,
                        contentType: "application/x-www-form-urlencoded",
                        dataType: "json",
                        data: 'data=' + str,
                        url: '/base/MyApi/MyPostFunction',
                        success: function(data){
                        var myData = JSON.parse(jsonString2);
                        var $grouplist = $('#groups');
                         $.each(myData, function() {
                          $('<li><a href="'+ this.url +'"/><img src="'+ this.src + '" class="image0"/></li>').appendTo($grouplist);
                         });
                        }
               });
                      }
             });
            }); 
             </script> 
```

尝试解析的 JSON 数据：

```
<value>[{"url":"/media/22.jpg","src":"/media/429.jpg"},{"url":"/media/44.jpg","src":"/media/55.jpg"},{"url":"/media/22.jpg","src":"/media/33.jpg"}]</value> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:32:40.770

你有`single dimensional array of objects so data[0].id would have id`第一个对象，你还需要在它上面使用长度而不是计数。

```
for (var i = 0; i < data.length; i++) {
         var n = data[i];
         $('ul.ad-thumb-list').append('<li><a href="'+n.url+'"/><img src="'n.src+'" class="image0"/></li>');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:44:58.113

You can iterate through all your objects from data[0] with `$.each`

```
$.each(data[0], function(key, val) {
   $('<li><a href="'+ key +'"/><img src="'+ val +'" class="image0"/></li>')
        .appendTo('ul.ad-thumb-list');
}); 
```

see if this solves your problem.

# exception-handling - 在 Mathematica 中捕获异常而无需运行两次计算

> ID：13498805
> 
> 赞同：0
> 
> 时间：2012-11-21T17:29:52.887
> 
> 标签：exception-handling, wolfram-mathematica

我必须`NMinimize`在各种实例上运行许多命令。其中一些运行未能收敛。

我想确定哪些未能收敛**并**获得 Mathematica 找到的当前解决方案。

搜索建议使用的其他帖子`Check[]`，但一旦出现错误，它不会返回结果。

所以目前，我的实现效率低下，如下所示：

```
allfit1 = ConstantArray[0,16];
For[i = 1, i <= 16, i++, (
allfit1[[i]] = Check[
                    {0, NMinimize[f[x,data[[i]]], x]}, 
                    {1, NMinimize[f[x,data[[i]]], x]}
                    ] 
)] 
```

如您所见，我必须执行`NMinimize`两次，这既浪费又耗时。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:48:31.960

作为一个小改动：您可以将结果存储在一个变量中：

```
Block[{res}, 
      Check[{0, res = NMinimize[...]}, {1, res}]
] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:09:50.933

你可以做

```
Table[Reap@Quiet@Check[Sow@NMinimize[f[x, d], x]; 1, 0]~
  Extract~{{1}, {2, 1, 1}}, {d, data}] 
```

# c# - Visual Studio，F11，只对特定线程在做什么感兴趣？

> ID：13498810
> 
> 赞同：4
> 
> 时间：2012-11-21T17:30:08.070
> 
> 标签：c#, multithreading, visual-studio-2010, c#-4.0

我只是想知道是否有人知道是否可以设置`F11`只对单个线程感兴趣的调试器？我有两个线程在运行 atm，但我只对其中一个感兴趣。因此，我不希望屏幕继续跳到页面上以向我展示第一个线程在做什么。我想将其设置为仅显示第二个线程在做什么。

任何指针将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T17:36:17.547

一种方法是冻结您不感兴趣的线程。

在 Visual Studio 中，显示“线程”窗口，可从“调试”->“Windows”菜单获得。

然后，当您使用 进行跟踪时`F11`，如果调试器在您不感兴趣的线程中中断，请在线程窗口中找到该线程，右键单击它并在上下文菜单中选择“冻结”选项。

现在，当您继续使用`F10`or进行跟踪时`F11`，您将永远不会在冻结的线程中遇到断点。

请注意，冻结的线程根本不会执行，因此如果您在调试时确实需要它做一些工作，您可能需要不时解冻并再次冻结它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:41:52.883

如果您打开调试器的“线程”窗口，您会看到每个线程都有一个“仅我的代码”标志。我发现，如果您只为正在单步执行的当前线程设置标志，“Step into”（`F11`）和“Step over”（`F10`）函数似乎只针对该线程。虽然这针对本机线程，但它同样适用于使用线程的托管代码。

但是，如果您不小心，该功能可能会非常脆弱 - 任何线程的断点仍然会中断（除非断点被过滤为仅用于感兴趣的线程）。如果在您设置此标志之前另一个线程正在被单步执行，那么当您尝试单步执行当前线程时，该线程可能仍与调试器“交互”。因此，您需要在使用此功能时仔细管理您的断点。

然而，总而言之，它似乎工作得很好。

请注意，我认为该术语非常令人困惑，因为“仅我的代码”还用于描述托管调试器功能，用于将调试器设置为不打扰进入“非用户”代码（由方法上的属性控制）。本机线程“只是我的代码”有所不同，实际上我在文档中找不到太多内容（[如何：标记和取消标记线程](http://msdn.microsoft.com/en-us/library/bb385628.aspx)）。似乎没有提到这种针对单线程进行步进的特殊行为 - 我偶然发现了它。

# java - 对象的隐式与显式传递

> ID：13498811
> 
> 赞同：1
> 
> 时间：2012-11-21T17:30:08.943
> 
> 标签：java, parameter-passing

C 函数和 java 方法之间的区别之一是对象在 C 中显式传递，而在 Java 中隐式传递，任何人都可以提供一个示例来说明隐式和显式传递是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T17:39:31.710

我不确定你的意思是什么，但也许你正在寻找如何在 C 中实现面向对象的风格。

Java 是一种真正的面向对象的语言。这意味着它有类和对象。当您编写需要访问调用它的对象的方法时，可以使用`this`关键字，它指的是有问题的对象：

```
int getSomething()
{
    return this._something;
} 
```

因此，关键字的实际值`this`取决于对象 - 然后将其视为参数的隐式参数。

但是，在 C 中，没有真正的类或对象。如果你想实现 OO 风格的代码，你必须将对应于 Java 的参数`this`（即，你在其上调用“方法”的“对象”）*显式地*传递给函数。例如在 cURL 网络库中：

```
CURL *hndl = curl_easy_init();
curl_easy_setopt(hndl, CURLOPT_URL, "http://example.com");
curl_easy_perform(hndl); 
```

大致相当于一些像这样的OO代码：

```
CURL hndl = new CURL;
hndl->setopt(CURLOPT_URL, "http://example.com");
hndl->perform(); 
```

请注意，在 C 中，以这种风格编写代码时，“对象”通常称为“上下文”或“句柄”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T17:36:17.337

至少在 Java 中，如果它是通过引用传递的，那么被传递的引用，我记得它在 C 中调用的指针，是原始指针的副本，而不是原始指针本身。

因此，有一个存储区域，其中包含有关对象的信息。然后有一个指向该内存区域的指针。当 Java 通过引用传递时，它首先复制指向内存区域的指针，然后将指针的复制作为参数传递。

这一切都完全独立于其他传递引用和传递值的区别。

# c# - C# VM 与 JVM 有何不同？

> ID：13498813
> 
> 赞同：3
> 
> 时间：2012-11-21T17:30:17.433
> 
> 标签：c#, java

我是一名 Java 开发人员，最近开始研究 C# 和 .Net

C# VM 与 JVM 有何不同。不同部门是好是坏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:41:37.317

一个为 C# 运行 CIL，另一个为 Java 运行 CIL。这才是真正重要的区别。

# python - Heroku Node.js + Python

> ID：13498828
> 
> 赞同：3
> 
> 时间：2012-11-21T17:31:10.277
> 
> 标签：python, node.js, heroku, cedar

我正在尝试构建一个同时具有 Python 部分和 Node.js 部分的网络应用程序。Python 部分是一个 RESTful API 服务器，Node.js 将使用 sockets.io 并充当推送服务器。两者都需要访问同一个数据库实例（在我的例子中是 Heroku Postgres）。Python 部分需要与 Node.js 部分通信，以便发送推送消息以传递给客户端。

我已经构建和部署了 Python 和 DB 部分，在“网络”测功机下运行。我不确定如何构建 Node 部分——尤其是 Python 部分如何与 Node.js 部分对话。

我假设 Node.js 需要成为一个新的 Heroku 应用程序，以便它也可以在“网络”测功机上运行，​​这样它就可以从 HTTP 路由堆栈中受益，并且客户端可以连接到它。在这种情况下，我的 Python dyno 会像普通客户端一样使用它来访问它吗？

有哪些替代方案？这通常是怎么做的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T07:16:12.407

在玩了一点之后，也做了一些阅读，似乎需要这个的 Heroku 应用程序有两个主要选项：

1）使用某种后端，两个应用程序都可以与之交谈。例如 DB、Redis、0mq 等。

2）使用我上面的建议。我实际上继续实施它，并且它有效。

只是想我会分享我的发现。

# preferences - 我可以使用 Apache Mahout Taste 进行用户偏好匹配吗？

> ID：13498829
> 
> 赞同：0
> 
> 时间：2012-11-21T17:31:11.957
> 
> 标签：preferences, mahout, recommendation-engine, mahout-recommender

我正在尝试根据预定义的用户偏好匹配对象。一个简单的例子是寻找最匹配的车辆。

假设用户“汤姆”根据他的预定义偏好提供了一辆出租车辆用于旅行。在这种情况下，预定义的用户首选项将是 -

** Tom 的预定义用户偏好：

```
PreferredVehicle (Make='ANY', Type='3-wheeler/4-wheeler',
Category='Sedan/Hatchback', AC/Non-AC='AC') 
```

** 而 10 辆可用的车辆是 -

```
Vechile1(Make='Toyota', Type='4-wheeler', Category='Hatchback', AC/Non-AC='AC')
Vechile2(Make='Tata', Type='3-wheeler', Category='Transport', AC/Non-AC='Non-AC')
Vechile3(Make='Honda', Type='4-wheeler', Category='Sedan', AC/Non-AC='AC')
;
;
and so on upto 'Vehicle10' 
```

我要做的就是 - 为汤姆选择最符合他的喜好的车辆，并且也可能按顺序给他选择，即最佳匹配优先。

我的问题：

1.  这可以用 Mahout Taste 完成吗？
2.  如果是的话，有人可以指点我一些可以快速开始的示例代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T19:26:44.597

由于某些原因，推荐人可能不是这里工作的最佳工具。首先，我不希望最好的答案在这个领域都是个人的。如果我想要一辆福特福克斯，那么对于大多数用户来说，你拥有的最佳选择可能都差不多。其次，这里没有太多的发现问题。我正在寻找满足某些需求的车辆；我并不特别想要或不需要寻找新的和未知的车辆，就像我想找音乐一样。最后，每个用户没有太多数据；我假设大多数用户以前从未租过，很少有人租过 3 次以上。

你能把这些数据扔给推荐人吗？当然，试试 Mahout Taste（我是作者）。如果您有 Mahout in Action 这本书，它将引导您完成它。由于它是非评级数据，我还可以推荐后续项目 Myrrix (http://myrrix.com)，因为它更易于设置和运行。您至少可以评估结果，看看它是否有用。

无论哪种方式，您的工作只是从您的数据中创建一个包含“userID,vehicleID”对的 CSV 文件并将其输入。然后它将为您提供车辆 ID 作为任何用户 ID 的建议。

但是，我想你会更好地分析人们在汽车不可用时选择了什么，看看差异，了解他们最有可能和最不可能牺牲的属性，并学习以这种方式为替代方案评分. 这是完全可行的，因为这个数据集很小，而且你有丰富的项目属性数据。

# database - 在VB中将日期选择器与数据库集成

> ID：13498832
> 
> 赞同：1
> 
> 时间：2012-11-21T17:30:50.053
> 
> 标签：database, vb.net, linq, datepicker

我正在尝试在我的 VB 网站中实现一个日期选择器。我也在使用使用 LINQ 的数据库。我有以下代码来调用日期选择器。

```
<td>Start Date:</td>
<td>    
  <div>
    <asp:Calendar ID="Calendar1" runat="server" Visible="False"></asp:Calendar>
    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    <asp:LinkButton ID="LinkButton1" runat="server">LinkButton</asp:LinkButton>
  </div>
</td> 
```

数据库中的表有以下字段：

*   项目 ID（整数）
*   项目名称 (vchar)
*   说明 (vchar)
*   开始日期（日期时间）

关于如何放入日期选择器并将其链接到`StartDate`数据库中的字段的任何建议。对不起，如果这不清楚。我才刚开始。欢迎所有建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:16:28.660

在我看来，您在这里有 3 种可能性。最简单的方法是将其绑定到您从数据源获取数据的位置，并将日历控件的 SelectedDate 属性分配给来自数据源的数据：

```
Dim tomorrow As Date = Date.Today.AddDays(1)
Calendar1.TodaysDate = tomorrow
Calendar1.SelectedDate = Calendar1.TodaysDate 
```

第二个是基于使用 DayRender 事件，你可以在[这里找到关于这个方法的一个很好的解释](http://msdn.microsoft.com/en-us/library/ms228044%28v=vs.85%29.aspx)

最后一个在[Dino Esposito 的](http://www.devproconnections.com/article/aspnet2/bind-data-to-your-calendar)DevPro 文章中进行了描述，可用于在许多页面中需要此类控制的情况。因此，他解释了如何使用标准属性（如 DataSource、DataSourceID 和 DataBind 方法）创建可重用的用户控件。

# java - 在 Android 中处理 HttpURLConnection 的服务器端代码

> ID：13498834
> 
> 赞同：-1
> 
> 时间：2012-11-21T17:31:31.350
> 
> 标签：java, javascript, android, file-upload, httpurlconnection

我正在使用 HttpURLConnection 类将文本文件上传到我的 Apache 服务器。对于服务器端代码，我使用 php 来处理 POST 请求。我想知道，除了 PHP 之外，如何做同样的事情，或者 PHP 是在服务器端处理文件上传的最佳方式？..而且我在服务器端找不到任何 jsp 或 java 代码来处理 http post 请求。 .任何除PHP之外做同样事情的代码片段都会非常有帮助..因为我认为java或jsp更容易编码..谢谢

Android 代码上传文件：

```
 public void upLoad()
{

     String exsistingFileName = path+"//"+"test.txt";

     String lineEnd = "\r\n";
     String twoHyphens = "--";
     String boundary = "*****";
     try {
         // ------------------ CLIENT REQUEST

         Log.e(Tag, "Inside second Method");

         FileInputStream fileInputStream = new FileInputStream(new File(
                 exsistingFileName));

         // open a URL connection to the Servlet

         URL url = new URL(urlString);

         // Open a HTTP connection to the URL

         conn = (HttpURLConnection) url.openConnection();

         // Allow Inputs
         conn.setDoInput(true);

         // Allow Outputs
         conn.setDoOutput(true);

         // Don't use a cached copy.
         conn.setUseCaches(false);

         // Use a post method.
         conn.setRequestMethod("POST");

         conn.setRequestProperty("Connection", "Keep-Alive");

         conn.setRequestProperty("Content-Type",
                 "multipart/form-data;boundary=" + boundary);

         DataOutputStream dos = new DataOutputStream(conn.getOutputStream());

         dos.writeBytes(twoHyphens + boundary + lineEnd);
         dos.writeBytes("Content-Disposition: post-data; name=uploadedfile;filename="
                         + exsistingFileName + "" + lineEnd);
         dos.writeBytes(lineEnd);

         Log.e(Tag, "Headers are written");

         // create a buffer of maximum size

         int bytesAvailable = fileInputStream.available();
         int maxBufferSize = 1000;
         // int bufferSize = Math.min(bytesAvailable, maxBufferSize);
         byte[] buffer = new byte[bytesAvailable];

         // read file and write it into form...

         int bytesRead = fileInputStream.read(buffer, 0, bytesAvailable);

         while (bytesRead > 0) {
             dos.write(buffer, 0, bytesAvailable);
             bytesAvailable = fileInputStream.available();
             bytesAvailable = Math.min(bytesAvailable, maxBufferSize);
             bytesRead = fileInputStream.read(buffer, 0, bytesAvailable);
         }

         // send multipart form data necesssary after file data...

         dos.writeBytes(lineEnd);
         dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

         // close streams
         Log.e(Tag, "File is written");
         fileInputStream.close();
         dos.flush();
         dos.close();

     } catch (MalformedURLException ex) {
         Log.e(Tag, "error: " + ex.getMessage(), ex);
     }

     catch (IOException ioe) {
         Log.e(Tag, "error: " + ioe.getMessage(), ioe);
     }

     try {
         BufferedReader rd = new BufferedReader(new InputStreamReader(conn
                 .getInputStream()));
         String line;
         while ((line = rd.readLine()) != null) {
             Log.e("Dialoge Box", "Message: " + line);
         }
         rd.close();

     } catch (IOException ioex) {
         Log.e("MediaPlayer", "error: " + ioex.getMessage(), ioex);
     }
} 
```

服务器端的php代码：

```
 <?php
 $target_path  = "./upload/";
 $target_path = $target_path . basename( $_FILES['uploadedfile']['name']);
 if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
 echo "The file ".  basename( $_FILES['uploadedfile']['name']).
" has been uploaded";
} else{
 echo "There was an error uploading the file, please try again!";
 }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:43:23.617

我认为这个问题没有正确的答案，PHP 可以像 JSP 甚至 ASP 一样好。取决于您的平台偏好，或者您是否计划拥有一个 tomcat vs apache 服务器，甚至是一个 microsoft iis 服务器。我个人认为 PHP/Apache 是一个不错的选择。

# javascript - 带有列视图的 JavaScript 文件管理器

> ID：13498836
> 
> 赞同：1
> 
> 时间：2012-11-21T17:31:38.027
> 
> 标签：javascript

我想在我的主页上以列视图共享文档，所以感觉就像在 Marlin 或 Finder 中浏览一样。我将如何开始使用 JavaScript 执行此操作？可能有任何 JS 库吗？尽管服务器支持 PHP5，但我无权访问任何服务器端编码。

![马林文件管理器](../Images/676b85ee9bc5a54f0e653f909ab40981.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:46:00.747

You can use UI library. Alternatives with similar UI controls are [Sencha](http://sencha.com), [jQWidgets](http://jqwidgets.com), [KendoUI](http://kendoui.com), [Wijmo](http://wijmo.com).

For example you can use the jqxMenu by jQWidgets.

The file browsing can be done using the [File API](https://developer.mozilla.org/en-US/docs/DOM/FileReader) but probably you'll need already defined list of files (the use of the File API will be for extra file information).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:38:56.203

sencha 的人制作了一个可以模仿 Finder 风格/外观的破解库，在[http://docs.sencha.com/ext-js/4-1/#!/example](http://docs.sencha.com/ext-js/4-1/#!/example)上查看他们的一些示例，但会需要一些服务器端编码来返回您希望显示的文件数据...

# java - 从我的应用程序层访问 GUI（分层系统）

> ID：13498837
> 
> 赞同：0
> 
> 时间：2012-11-21T17:31:03.403
> 
> 标签：java, swing

说在我的主要方法中，我调用我的 appLayer 和 GUI，如下所示：

```
 ApplicationLayer appLayer = new ApplicationLayer(dataLayer);
    GUI gui = new GUI(appLayer); 
```

在我的 GUI 中，我有按钮，然后在单击时调用 appLayer，然后使用数据层执行逻辑（上面未显示）。

获得数据后，我想再次访问 GUI 以使用我收集的数据更新字段。有没有一种简单的方法可以从应用程序层做到这一点，或者我必须将数据传递到 GUI 并从那里更新。

希望这很清楚！

# regex - 正则表达式在括号之间挑选一些文本

> ID：13498843
> 
> 赞同：10
> 
> 时间：2012-11-21T17:32:04.937
> 
> 标签：regex, r

> **可能重复：**
> [在 R 中的所有括号内提取信息（正则表达式）](https://stackoverflow.com/questions/8613237/extract-info-inside-all-parenthesis-in-r-regex)

我有一个字符串

df

```
Peoplesoft(id-1290) 
```

例如，我喜欢捕捉双亲之间的字符。我喜欢从上面的例子中得到 id-1290。

我用这个：

```
x <- regexpr("\\((.*)\\)", df) 
```

这给了我这样的数字

```
[1] 10 
```

有没有一种简单的方法可以在 R 中使用正则表达式在括号之间抓取文本？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-21T17:36:41.203

我更喜欢用`gsub()`这个：

```
gsub(".*\\((.*)\\).*", "\\1", df)
[1] "id-1290" 
```

* * *

正则表达式的工作方式如下：

*   在括号内查找文本 - 不是你真正的括号，而是我额外的一组括号，即`(.*)`
*   将此作为反向引用返回，`\\1`

换句话说，用反向引用替换字符串中的所有文本

* * *

如果您想使用`regexp`而不是`gsub`，请执行以下操作：

```
x <- regexpr("\\((.*)\\)", df)
x

[1] 11
attr(,"match.length")
[1] 9
attr(,"useBytes")
[1] TRUE 
```

这将返回值 11，即找到的表达式的起始位置。并注意`match.length`指示匹配了多少个字符的属性。

您可以使用以下方法提取它`attr`：

```
attr(x, "match.length")
[1] 9 
```

然后用于`substring`提取字符：

```
substring(df, x+1, x+attr(x, "match.length")-2)
[1] "id-1290" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T18:19:26.403

这是一种稍微不同的方式，使用lookbehind/ahead：

```
df <- "Peoplesoft(id-1290)"
regmatches(df,gregexpr("(?<=\\().*?(?=\\))", df, perl=TRUE)) 
```

与安德烈的回答不同的是，这也适用于在括号中提取多个字符串。例如：

```
df <- "Peoplesoft(id-1290) blabla (foo)"
regmatches(df,gregexpr("(?<=\\().*?(?=\\))", df, perl=TRUE)) 
```

给出：

```
[[1]]
[1] "id-1290" "foo" 
```

# visual-studio-2010 - 用于 JsRender 的 Visual Studio 2010 语法突出显示

> ID：13498860
> 
> 赞同：1
> 
> 时间：2012-11-21T17:33:11.177
> 
> 标签：visual-studio-2010, syntax-highlighting, jsrender

有没有办法在 Visual Studio 2010 中让 HTML 语法突出显示适用于 JsRender 模板（作为 aspx 文件的一部分）？

我的 aspx 文件通常如下所示：

```
<%@ Page Title="Home Page" Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="Test._Default" %>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <script type="text/javascript" src="Scripts/jquery-1.4.1.js"></script>
    <script type="text/javascript" src="Scripts/jsrender.js"></script>
    <script type="text/javascript" src="Scripts/Default.js">
</head>
<body>
    <script id="defaultTemplate" type="text/x-jsrender">
        <div>
            <table>
                <thead>
                    <tr>
                        <th>Customername</th>
                        <th>Contact</th>
                        <th>Url</th>
                        <th>Details</th>
                        <th>Delete</th>
                    </tr>
                </thead>
                <tbody>
                    {{for CustomerData}}
                        <tr>
                            <td>{{>Name}}</td>
                            <td>{{>Contact}}</td>
                            <td>{{>Url}}</td>
                            <td>Click</td>
                            <td>Click</td>
                        </tr>
                    {{/for}}
                </tbody>
            </table>
            <div id="navContainer">Next</div>
        </div>
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:42:47.647

VS 2010 不支持 JsRender 语法高亮，但如果你有 VS 2012，有一个 Web Essentials 插件，它在脚本块（文本/javascript 以外的类型）中添加语法高亮。它还为 {{foo }} 标签提供高亮显示。

在未来的版本中，它可能会内置...

Web Essentials 插件下载在[这里](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)

更新：VS 2012 和 VS 2013 现在包括 JsRender 模板的语法高亮。

# windows-runtime - 如何设置 WebRequest 的引用者

> ID：13498867
> 
> 赞同：0
> 
> 时间：2012-11-21T17:33:25.513
> 
> 标签：windows-runtime

我尝试了以下方法：

```
HttpWebRequest request = ...
request.Headears["Referer"] = "http:....."; 
```

但我收到以下错误：

```
The 'Referer' header must be modified using the appropriate property or method. 
```

合适的属性或方法是什么？

HttpWebRequest 没有Referer 属性。

# r - 循环错误 - 尚未调用 plot.new

> ID：13498869
> 
> 赞同：1
> 
> 时间：2012-11-21T17:33:53.643
> 
> 标签：r, plot

我想模拟股票路径。我用 22 个交易日（1 个起始值）模拟了 1000 条路径。现在我想将它包含在我的演示文稿中，但是是动画的，所以我需要 png 文件。

我想创建 1000 个 png 文件，从第一个库存路径开始，然后是第二个，依此类推。

所以我从第一个路径开始，在图中添加第二个，添加第三个等等，所以最后我有一个包含 1000 个模拟的图，这是我的代码：

```
for(i in 1:1000){
#jpeg(paste("1000s",i,".png",sep=""))
plot(c(1:23),matrix[,1],type="l",ylim=c(17,24))
lines(c(1:23),matrix[,i],type="l",col=i)
#dev.off()
} 
```

这是问题所在，当循环到达下一个值时，每个附加部分都会消失，所以我尝试了：

```
plot(0,0 , xlim=c(1,23),ylim=c(17,24),xlab="",ylab="")
for(i in 1:1000){
jpeg(paste("1000s",i,".png",sep=""))
lines(c(1:23),matrix[,i],type="l",col=i)
dev.off()
} 
```

（我知道这不是一个可行的示例，但我的问题只是循环的逻辑问题）我在最后一个代码时收到以下错误消息：尚未调用 plot.new。

该矩阵有 1000 列和 23 行条目，这应该是 22 个交易日的 1000 次股票路径模拟。

如何更改该错误不再出现？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:07:59.177

使用两个`for`循环。外部循环将创建每个 png/jpeg。内部的将建立每个单独的情节。

```
for(i in 1:1000) {
  jpeg(paste("1000s", i, ".png", sep=""))
  plot(0, 0, xlim=c(1,23), ylim=c(17,24), xlab="", ylab="")

  for(j in 1:i) {
    lines(c(1:23), matrix[, j], col=j)
  } 
  dev.off()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:02:52.310

`jpeg`并且`plot`都制作了新的图表。`lines`如果您希望动画构建而不是擦除，您只需要在循环中调用。一件事，`lines`不需要`type = 'l'`。这是默认设置，命令的重点是默认设置。如果你想用它来绘制点，你可能会改变论点，否则就把它排除在外。

# java - c3p0 默认连接测试器 - 如何处理错误？

> ID：13498870
> 
> 赞同：1
> 
> 时间：2012-11-21T17:34:04.000
> 
> 标签：java, jdbc, c3p0

如果连接无效，则会引发异常，但是我无法确定从何处处理此异常`DefaultConnectionTester.java`。这个异常会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T23:08:29.323

c3p0 ConnectionTesters 应在测试期间通过返回 ConnectionTester.CONNECTION_IS_INVALID 来处理任何异常。这就是 c3p0 的 DefaultConnectionTester 所做的。它不会抛出异常，它会捕获它并通过报告连接错误并且应该从池中过期来处理它。

（对于其发生意味着所有池连接都可能错误的异常，将报告 DATABASE_IS_INVALID。）

如果您想查看测试期间发生的异常，请将 com.mchange.v2.c3p0.impl.DefaultConnectionTester 的日志级别设置为 FINE（或 log4j 中的 DEBUG）。

# java - 在单个 JAR 中导出 jTDS 和我的项目？

> ID：13498875
> 
> 赞同：0
> 
> 时间：2012-11-21T17:34:14.373
> 
> 标签：java, sql, sql-server-2008, jar, jtds

我试图让我的应用程序与 jTDS (MS SQL Server 2008) 一起工作。所以我做了以下事情：

*   下载了最新的jTDS驱动（1.3.0）
*   将驱动程序粘贴到项目文件夹中
*   通过添加 jar 和
*   在`Order and Export`选项卡中，我选择了所有条目

然后我导出了罐子。由于它不是一个可运行的 jar，我后来对其进行了测试，它似乎找不到我的驱动程序（`java.lang.ClassNotFoundException: net.sourceforge.jtds.jdbc.Driver`）。

当我在 Eclipse 中仅执行以下操作对其进行测试时：

```
public static void main(String[] args) {}
    String classForName = "net.sourceforge.jtds.jdbc.Driver";

    try
    {
        // embedding driver for sql connection
        Class.forName(classForName);

        con = java.sql.DriverManager.getConnection(getConnectionUrl(), user, pass);
        if (con != null)
        {
            JOptionPane.showMessageDialog(null, "Connection Successful!");
        }

    }
    catch (Exception e)
    {
        Log.writeStackTrace(e);
    }
} 
```

..然后它就像一个魅力。所以在我看来，问题似乎在于包括我的 jTDS jar。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:23:44.330

该死的，我只是有点晚了！

标准 Java 类加载器不支持在 JAR 中嵌套 JAR。您可以将您的 JAR 组合在一起（就像您所做的那样！），或者您可以使用更复杂的类加载器，例如 One-Jar (http://one-jar.sourceforge.net/)。

# c# - 从可为空的日期时间获取日期？

> ID：13498876
> 
> 赞同：7
> 
> 时间：2012-11-21T17:34:15.603
> 
> 标签：c#, linq

我已将模型中的一个字段声明为可以为空的日期时间，如下所示

```
public DateTime? CallNextDate {get;set;} 
```

在我后面的 aspx 代码中，我正在使用这样的 linq：

```
q = q.AsQueryable()
    .Where(c => c.CallNextDate.Date < DateTime.Now.Date )
    .ToList(); 
```

但 `c.CallNextDate.Date`不可用。请建议如何解决它

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-21T17:36:38.600

好吧，如果你已经知道它是非空的，你可以使用它[`Value`](http://msdn.microsoft.com/en-us/library/ydkbatt6.aspx)来获取底层的不可空值：

```
q = q.AsQueryable()
     .Where(c => c.CallNextDate.Value.Date < DateTime.Now.Date)
     .ToList(); 
```

或者，如果您也想对此进行过滤：

```
q = q.AsQueryable()
     .Where(c => c.CallNextDate.Value != null &&
                 c.CallNextDate.Value.Date < DateTime.Now.Date)
     .ToList(); 
```

我*强烈*建议您获取今天的日期*一次*，并将其重用于整个查询：

```
var today = DateTime.Today;
q = q.AsQueryable()
     .Where(c => c.CallNextDate.Value != null &&
                 c.CallNextDate.Value.Date < today)
     .ToList(); 
```

这会给你更多的一致性。顺便说一下，你真的应该考虑你是否肯定想要*系统本地日期*。

（顺便说一句，你肯定需要使用`AsQueryable`吗？这是比较少见的。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T17:37:33.420

可空类型有一个表示底层类型的 Value 属性：

```
q = q.AsQueryable()
    .Where(c => c.CallNextDate.Value.Date < DateTime.Now.Date )
    .ToList(); 
```

但是您需要检查以确保类型具有值。

```
q = q.AsQueryable()
    .Where(c => c.CallNextDate.HasValue && c.CallNextDate.Value.Date < DateTime.Now.Date )
    .ToList(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-08-27T01:08:11.723

要获得您可以使用的值：

```
 GetValueOrDefault() 
```

**例子：**

item.DOB 是可为空的日期时间。

```
item.DOB.GetValueOrDefault().Year 
```

# drupal-6 - 视图中的自定义查询问题

> ID：13498877
> 
> 赞同：3
> 
> 时间：2012-11-21T17:34:19.877
> 
> 标签：drupal-6, drupal-views

我在 drupal 6 视图中定义了这个自定义查询

```
 function purchase_views_pre_execute(&$view) {
    global $user;
    if($view->name == 'user_accounts') {
      $view->build_info['query'] = "SELECT DISTINCT(content_type_account.field_account_number_value) AS my_account_numbers, content_type_account.nid AS my_account_nids FROM content_type_account INNER JOIN content_field_account ON content_field_account.field_account_nid = content_type_account.nid  INNER JOIN content_type_user_account_map ON content_field_account.nid = content_type_user_account_map.nid WHERE content_type_user_account_map.field_user_uid = $user->uid";
    }
  } 
```

当我在 mysql 控制台中运行它时，查询会给出结果。但在视图本身中它没有。为什么会这样？我是否需要在某处显式添加查询中选择的字段？

![在此处输入图像描述](../Images/003ec4fe7cc3ab8c338b6d4f3d0d36df.png)

![在此处输入图像描述](../Images/0172d12ea2daf6ba8ca96c283e63f755.png)

我错过了什么吗？

我附上了显示这两个结果的屏幕截图。您可以在视图中看到它没有向我显示字段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:42:47.743

用户在浏览器上运行时发出查询的用户是否与您用来运行查询的用户相同？

这可能是一个权限问题，可能是视图，或者视图正在使用的表在它作为 web 运行时未授予正在使用它的用户。

# javascript - 加载我的脚本时出错（Google Chrome 扩展程序）

> ID：13498879
> 
> 赞同：1
> 
> 时间：2012-11-21T17:34:26.477
> 
> 标签：javascript, html, google-chrome, google-chrome-extension, video-game-consoles

我制作了一个可在 Google Chrome 扩展程序中运行的脚本。我连忙解释道：有一款网游叫《龙界》。脚本所做的是计算你必须向对手射击的力量。好的，我试图在外部服务器上容纳我的脚本，并且显然已加载但未执行（“加载”）。我认为错误可能出在代码中（我使用了视频游戏的 javascript 来创建我的脚本）。代理原始代码、json 和调用外部脚本的 js：

[Codeviewer 中的主要 Javascript](http://codeviewer.org/view/code:2c1d)

清单.json

```
{
  "name": "DragonBound Aimbot 2.0",
  "version": "2.0.0",
  "manifest_version": 2,
  "description": "DragonBound Aimbot Hack - HTML5",
   "browser_action": {
    "default_popup": "popup.html",
    "default_icon": "icon.png"
  },
   "permissions": ["tabs", "notifications", "http://*.dropbox.com/u/91461506/*", "https://*.dropbox.com/u/91461506/*"],
   "background": { "page": "background.html", "persistent" : false },
"content_scripts": [
    {
      "matches": ["http://*.dragonbound.net/*","http://*.dropbox.com/u/91461506/*"],
      "js": ["jquery2.js","DragonBoundAimbot.js"],
      "run_at": "document_end"
    }
  ],
  "icons": {"16": "16.png", "48": "48.png", "128": "128.png"},
  "web_accessible_resources": [
    "ranks/*","48.png"
  ],
  "homepage_url" : "http://www.dropbox.com"
} 
```

-Code 调用外部脚本：

```
chrome.extension.sendRequest({type:"init"},function(response){

    if(response.ingame){
        chrome.extension.sendRequest({id:"loading",type:"notification2",text:["Loading","Loading scripts from dropbox.com..."]}, function(response) {});
        chrome.extension.sendRequest({type:"loadscript",url:'http://dl.dropbox.com/u/91461506/prueba2.js',cache:false}, function(response) {
            if(response.type == 1){
                eval(response.scriptcontent);

            }else if(response.type == 0){
                chrome.extension.sendRequest({id:"loading",type:"closenotification2"}, function(response) {})
                chrome.extension.sendRequest({id:"errorloading",time:0,type:"notification2",text:["Error","Failed to load the script, try again later"]}, function(response) {});
            }
        });
    }else{
        chrome.extension.sendRequest({type:"loadscript",url:'http://dl.dropbox.com/u/91461506/page.js',cache:false}, function(response) {
            if(response.type == 1){
                eval(response.scriptcontent);
                PAGEDBA.init();
            }else if(response.type == 0){

            }
        });
    }
}); 
```

我已经上传了谷歌浏览器的扩展和未压缩的
[扩展：Chrome .CRX的扩展](http://dl.dropbox.com/u/91461506/Testing.crx)

[Estension 未压缩的 .ZIP](http://dl.dropbox.com/u/91461506/Testing.zip)

![预习](../Images/a74a2ffa4e5d9cd0ccd64521d1ece16e.png) ![预览 2](../Images/1c296caeca3f03e5ece886238dd34990.png)

游戏网页链接为[DragonBound.net](http://dragonbound.net)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:44:41.293

You use `eval()`, but `eval()` is disabled in chrome-extensions.

[http://developer.chrome.com/apps/sandboxingEval.html](http://developer.chrome.com/apps/sandboxingEval.html)

# javascript - 如何基于另一个属性定义一个属性

> ID：13498880
> 
> 赞同：2
> 
> 时间：2012-11-21T17:34:31.983
> 
> 标签：javascript

我想根据另一个属性为某个命名空间定义一个属性。以下是我尝试分配`someNameSpace.x2`的依据`someNameSpace.x1`：

```
someNameSpace = {
  x1: 100,
  x2: x1 * 0.5,
}; 
```

但它失败了。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T17:37:46.927

您不能这样做，因为`x1`尚未在范围内定义。

```
someNameSpace = { x1 : 100 };
someNameSpace.x2 = someNameSpace.x1 * 0.5; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T17:47:22.917

```
someNameSpace = {
  x1: 100,
  get x2(){return this.x1 * 0.5},
};
someNameSpace.x2; // 50
someNameSpace.x1 = 5;
someNameSpace.x2; // 2.5 
```

使用吸气剂而不是像所有其他傻瓜一样作弊。财产的价值`x2`现在真正取决于`x1`：P

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T17:37:51.377

您不能在定义自身的对象文字中引用该对象。

```
var something = { x: 3 }; 
something.x2 = something.x * 2; 
```

你可以声明它；然后在声明后添加您想要的任何属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T17:37:32.970

这是一个使用自执行函数的技巧：

```
var someNameSpace = (function(){
    var x1 = 100;
    return {
        x1: x1,
        x2: x1 * 0.5
    };
})(); 
```

[http://jsfiddle.net/T2kyZ/](http://jsfiddle.net/T2kyZ/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T17:40:44.103

您可以定义一个返回值的函数

```
var NS = {
  x1: 100,
  computeX2: function(){
     return this.x1 * 0.5;
  }
} 
```

一些 javascript 框架（如 ember.js）允许您以这种方式定义所谓的“计算属性”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-21T17:38:07.127

你可以这样做：

```
someNameSpace = {
    x1: 100
}
someNameSpace.x2 = x1 * 0.5; 
```

# python - 使用python将字母转换为数字

> ID：13498882
> 
> 赞同：2
> 
> 时间：2012-11-21T17:34:36.763
> 
> 标签：python, list, dictionary, decoding

我有的：

```
s='areyo uanap ppple' 
```

我想要的是：

```
s='12345 12324 11123' 
```

`i`我应该使用字典并翻译每个`s.split(' ')`吗？还是有更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:44:41.507

```
s='areyo uanap ppple'
incr=1
out=''
dict={}
for x in s:
    if ' ' in x:
        incr=1
        dict={}
        out+=' '
        continue;
    if x in dict.keys():
        out+=str(dict[x])
        continue;

    out+=str(incr)
    dict[x]=incr
    incr=incr+1

print out //12345 12324 11123 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T17:44:27.597

if i understand the OP correctly, this might be a solution:

```
s='areyo uanap ppple'
def trans(word):
    d = {}
    for char in word:
        if char not in d.keys():
            d[char] = len(d.keys()) + 1
        yield str(d[char])
o = ' '.join([  ''.join(trans(word)) for word in s.split(' ')])
print repr(o) 
```

which results in:

```
'12345 12324 11123' 
```

building on the `unique` of unutbu answer, this would also be possible:

```
' '.join([''.join([ { a:str(i+1) for i,a in enumerate(unique(word)) }[char] for char in word]) for word in s.split(' ') ]) 
```

here is another one, i think i got a little carried away :)

```
' '.join([ w.translate(maketrans(*[ ''.join(x) for x in zip(*[ (a,str(i+1)) for i,a in enumerate(unique(w)) ]) ])) for w in s.split(' ') ]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T17:48:30.230

您可以使用[unicode.translate](http://docs.python.org/2/library/stdtypes.html#str.translate)：

```
import string

def unique(seq): 
    # http://www.peterbe.com/plog/uniqifiers-benchmark (Dave Kirby)
    # Order preserving
    seen = set()
    return [x for x in seq if x not in seen and not seen.add(x)]

def word2num(word):
    uniqs = unique(word)
    assert len(uniqs) < 10
    d = dict(zip(map(ord,uniqs),
                 map(unicode,string.digits[1:])))
    return word.translate(d)

s = u'areyo uanap ppple'
for word in s.split():
    print(word2num(word)) 
```

产量

```
12345
12324
11123 
```

请注意，如果一个单词中有超过 9 个唯一字母，则不清楚您想要发生什么。如果传了这样一个词，我就用 an`assert`来抱怨。`word2num`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T17:50:22.300

使用`unique_everseen()`来自[itertools 的食谱](http://docs.python.org/2/library/itertools.html#recipes)：

```
In [5]: def func(s):
    for x in s.split():
            dic={}
            for i,y in enumerate(unique_everseen(x)):
                     dic[y]=dic.get(y,i+1)
            yield "".join(str(dic[k]) for k in x)    
            dic={}
   ...:             

In [6]: " ".join(x for x in func('areyo uanap ppple'))
Out[6]: '12345 12324 11123'

In [7]: " ".join(x for x in func('abcde fghij ffabc'))
Out[7]: '12345 12345 11234' 
```

# wcf - 服务引用返回值大小问题

> ID：13498888
> 
> 赞同：3
> 
> 时间：2012-11-21T17:34:41.750
> 
> 标签：wcf, web-services, reflection

我有一个返回对象列表的 Web 服务方法`List<T>`

当列表的长度为 9000 个对象左右时，服务会很好地返回此列表，但是当长度为 12000 个或更多对象时，服务会返回错误：

基础连接已关闭：连接意外关闭。

`System.Reflection.TargetInvocationException：调用的目标已抛出异常。---> Microsoft.FSharp.Core.FailureException：System.Net.WebException：底层连接已关闭：连接意外关闭。在 System.Net.HttpWebRequest.GetResponse() 在 .$Type.httprequest.webRespBase@162@162(DelegatingHttpReq x@162, Unit _unit) 在 .$Type.httprequest.webRespBase@162@162(DelegatingHttpReq x@162, Unit _unit) 在 Storm.Types.WebHttp.DelegatingHttpReq.GetResponse() 在 System.Web.Services.Protocols.WebClientProtocol.GetWebResponse(WebRequest request) 在 System.Web.Services.Protocols.HttpWebClientProtocol.GetWebResponse(WebRequest request) 在 System.Web .Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters) 在 ServiceLogic。

--- 内部异常堆栈跟踪结束 ---

在 System.RuntimeMethodHandle._InvokeMethodFast（对象目标，Object[] 参数，SignatureStruct& sig，MethodAttributes methodAttributes，RuntimeTypeHandle typeOwner）在 System.Reflection.RuntimeMethodInfo.Invoke（Object obj，BindingFlags invokeAttr，Binder binder，Object[] 参数，CultureInfo 文化， Boolean skipVisibilityChecks) at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfoculture) at Storm.UI.Forms.FormMainOps.clo@651.Invoke(Object[] methodParams@41 ) at .$Type.bgworker.run@51@57_2.Invoke(DoWorkEventArgs dArgs) at .$Type.bgworker.run@51@57_1.Invoke(Object sender, DoWorkEventArgs e) at System.ComponentModel.BackgroundWorker.WorkerThreadStart(Object论据）`

我已经尝试`maxBufferSize` `maxBufferPoolSize` `maxReceivedMessageSize` `maxStringContentLength` `maxArrayLength`在 Web.config 的绑定配置中更改 etc，但它仍然无法正常工作。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:34:08.663

我已经在这篇文章中找到了解决方案 [底层连接已关闭：连接已意外关闭](https://stackoverflow.com/questions/285345/the-underlying-connection-was-closed-the-connection-was-closed-unexpectedly)

# svn - anksvn 禁止异常。访问 // 禁止

> ID：13498898
> 
> 赞同：1
> 
> 时间：2012-11-21T17:35:26.053
> 
> 标签：svn, visual-studio-2008, c#-3.0, ankhsvn

当我尝试将 C# 2008 应用程序代码检查到最新版本的 anksvn 时出现以下错误。

```
error message:
SharpSvn.SvnReposito​ryIOForbiddenExcepti​on: Commit failed (details follow): ---> SharpSvn.SvnReposito​ryIOForbiddenExcepti​on: Access to '/svn/city/!svn/me' forbidden
   --- End of inner exception stack trace ---
   at SharpSvn.SvnClientAr​gs.HandleResult(SvnC​lientContext client, SvnException error, Object targets)
   at SharpSvn.SvnClientAr​gs.HandleResult(SvnC​lientContext client, svn_error_t* error, Object targets)
   at SharpSvn.SvnClient.C​ommit(ICollection`1 paths, SvnCommitArgs args, SvnCommitResult& result)
   at Ankh.Services.Pendin​gChanges.PendingChan​geHandler.<>c_​_DisplayClass1b.<​Commit_CommitToRepos​itory>b__19(Objec​t sender, ProgressWorkerArgs e)
   at Ankh.ProgressRunnerS​ervice.ProgressRunne​r.Run(Object arg 
```

我希望你能建议我能做些什么来解决这个问题。
可能你能给我指向一个可以解决问题的链接和/或告诉我如何解决这个问题吗？

我不知道这个位置在哪里。我可以从 anksvn 中检出代码，但我无法将代码检入 subversion。

这是我第二次与 anksvn 合作。

有人告诉我，我可以访问我需要访问的所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:00:45.337

您可以签出代码，但不能签入您的更改？

你可以使用 Subversion 命令行吗？从那里检查目录，进行更改，然后查看是否可以提交代码。

错误是说您没有权限。也许从命令行尝试这个会让你更好地了解错误可能是什么。

# google-app-engine - 内存缓存限制应用引擎

> ID：13498899
> 
> 赞同：1
> 
> 时间：2012-11-21T17:35:36.850
> 
> 标签：google-app-engine, memcached

我有类别（无限可能的级别，但肯定会保持在 1000 以下），我想知道在以下实例中内存缓存的限制是什么（通常在单个键上缓存时）：

```
all_categories = Categories.all().fetch(1000)
memcache.set('categories', serialize_entities(all_categories)) 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:42:23.977

从[限制](https://developers.google.com/appengine/docs/python/memcache/overview#Limits)：

> 缓存值的最大大小：1 兆字节

因此，如果`all_categories`大小小于 1 兆字节，您将符合限制。

# java - 初学者 Java 开发人员 Netbeans/Eclipse IDE 问题

> ID：13498904
> 
> 赞同：0
> 
> 时间：2012-11-21T17:36:04.500
> 
> 标签：java, eclipse, netbeans

[我正在使用 Emotiv Epoc Neuroheadset， http](http://emotiv.com/index.php) ://emotiv.com/index.php 在 windows vista 中构建一个 java 应用程序。

我是 Java 新手，入门非常困难。我有一些我尝试在 eclipse 或 netbeans 中运行的耳机附带的示例（此时我真的没有偏好，建议？）

用户手册给出了这些指导：

*2。包内容：Jna.rar、Edk.java、EmoState.java、EDkErrorCode.java
示例一：EEGLog 示例二：EmoStateLog

1.  开发人员指南：第 1 步：将 JNA 库添加到您的项目中。第 2 步：将 Edk.java、EmoState.java、EdkErrorCode.java 添加到您的项目中。这些文件中的类包含使用 JNA 库从 Edk.dll 调用 API 的方法。您可以在 JNA 的主页上找到有关数据类型之间转换的更多信息。*

这对我来说都是中国人！有人可以准确地向我解释如何执行这些步骤（以一种以前从未使用过 eclipse 或 netbeans 的小孩可以理解的方式！）来自 Emotiv Epoc 论坛的人也给了我这些指示：

*要了解 Java 包装器示例如何工作，您应该安装 Eclipse 并打开、编译它们。在运行它们之前，您将 edk_utils.dll 和 edk.dll 放入 System32 或每个示例的相同根目录中，如 EmoStateLog、CognitivExample...。*

我的问题是我对运行这些示例的 IDE 了解不足。我应该创建一个新项目然后添加这些文件吗？还是我打开其中一个示例，然后添加 .dll 文件和 JNA 库？如何将库添加到项目中？我在哪里放置 .dll 文件？

提前致谢！我知道这是相当简单的东西，但它似乎总是最难弄清楚的简单东西！-埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:00:39.473

完全基于你在这里所说的......

> 开发人员指南：第 1 步：将 JNA 库添加到您的项目中。第 2 步：将 Edk.java、EmoState.java、EdkErrorCode.java 添加到您的项目中。这些文件中的类包含使用 JNA 库从 Edk.dll 调用 API 的方法。您可以在 JNA 的主页上找到有关数据类型之间转换的更多信息。*

1.  在 Eclipse 中创建一个新项目。

2.  将 Edk.java、Emostate.java、EdkErrorCode.java 添加到 src 文件夹中

3.  将 JNA 库添加到 libs 文件夹中。（确保库在项目路径中，否则 Eclipse 不会检测到它。）

它是否会编译取决于它们是否是唯一的支持文件。

# r - 带有 Zelig 回归输出的 stargazer()

> ID：13498905
> 
> 赞同：2
> 
> 时间：2012-11-21T17:36:13.590
> 
> 标签：r, latex, r-zelig

我正在使用 R 包 stargazer()。我有一个 zelig 模型，我无法让 stargazer 为其创建 Latex 代码。

```
logit9.1 <- zelig(winner ~ treatment + count_parties + resp_OECD24 + DirExp + IndExp,
    data = outcome, model = "logit" ,robust = TRUE)
stargazer(logit9.1)
Error in if (zelig.object$family$family == "gaussian") { : 
  argument is of length zero 
```

如果我更改 model="normal"，我会收到相同的错误消息。model="gaussian" 不是 zelig() 中支持的模型。stargazer 文档说它适用于 zelig 对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T03:48:45.053

Stargazer v. 2.0 现在可在 CRAN 上使用。该软件包已更新以反映对 Zelig 对象所做的更改，并具有许多其他新功能。Zelig 在它创建的对象的向后兼容性方面并不总是完美的，所以旧版本的 stargazer() 可能有问题。也许您应该尝试使用最新版本运行您的代码，看看它是否有效。

# php - PHP SFTP 简单文件上传

> ID：13498910
> 
> 赞同：3
> 
> 时间：2012-11-21T17:36:26.497
> 
> 标签：php, sftp, phpseclib

我正在使用 phpseclib - SFTP 类，并试图上传这样的文件 -

```
$sftp = new Net_SFTP('mydomain.com');
if (!$sftp->login('user', 'password')) {
    exit('Login Failed');
}
$sftp->put('/some-dir/',$fileTempName); 
```

然而，该文件并没有被上传到里面`some-dir`，而是在之前上传了一个目录（到起始目录，假设它是根目录）。这让我发疯，我想我已经尝试了`some-dir/`or `/some-dir`or的所有组合`/some-dir/`，但文件不会上传到那里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T17:46:20.340

我不认为你的看跌期权正在做你认为它正在做的事情。根据文档，您需要`Net_SFTP::chdir('/some-dir/')`切换到要将文件发送到的目录，然后`put($remote_file, $data)`，其中`remote_file`是文件名，`$data`是实际文件数据。

示例代码：

```
<?php
include('Net/SFTP.php');

$sftp = new Net_SFTP('www.domain.tld');
if (!$sftp->login('username', 'password')) {
    exit('Login Failed');
}

echo $sftp->pwd() . "\r\n";
$sftp->put('filename.ext', 'hello, world!');
print_r($sftp->nlist());
?> 
```

# java - c3p0 setIdleConnectionTestPeriod 单位

> ID：13498912
> 
> 赞同：3
> 
> 时间：2012-11-21T17:36:37.587
> 
> 标签：java, jdbc, c3p0

这是一个非常简单的问题，但是文档并没有让我清楚这个函数接受什么单位。我假设几秒钟，但我试图确认这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T17:41:49.630

[c3p0 连接池配置页面](http://www.mchange.com/projects/c3p0/#configuration)包含大量可用选项的详细信息。属性的默认度量单位`idleConnectionTestPeriod`是秒。

# asynchronous - 最简单的 tornado.gen 示例

> ID：13498916
> 
> 赞同：1
> 
> 时间：2012-11-21T17:36:44.657
> 
> 标签：asynchronous, tornado

我正在尝试使用[Tornado 的同步样式“gen”工具](http://www.tornadoweb.org/documentation/gen.html)以非阻塞样式运行简单的 echo 函数：

```
import tornado.web
import tornado.gen
import logging

def echo(message):
    return message

@tornado.gen.engine
def runme():
    response = yield tornado.gen.Task(echo, 'this is a message')
    logging.warn(response)

runme() 
```

据我所知，此代码与文档中的演示代码没有显着不同，减去不必要的请求处理程序的东西 - 我没有处理任何 HTTP 请求，AFAICT 与异步运行某些东西是正交的。然而，这总是失败：

```
Traceback (most recent call last):
  File "./server.py", line 46, in <module>
runme()
TypeError: wrapper() takes at least 1 argument (0 given) 
```

我到底在哪里错过了论点？如何让 Tornado 异步运行这个函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:42:21.180

任务实际上并没有为正在运行的函数进行回调，并在函数返回时启动回调，正如我最初所想的那样。

我需要在自己运行的任务中创建一个回调，并调用它，即：

```
import tornado.web
import tornado.gen
import logging

def echo(message, callback=None):
    callback(message)

@tornado.gen.engine
def runme():
    response = yield tornado.gen.Task(echo, 'this is a message')
    logging.warn(response)

runme() 
```

# javascript - How do I Listen for change in the text of an object using MutationObserver?

> ID：13498921
> 
> 赞同：3
> 
> 时间：2012-11-21T17:37:08.557
> 
> 标签：javascript, google-chrome, dom

Let's say I have a span such as this

```
<span id="theSpan"></span> 
```

Using WebKitMutationObserver (I'm developing an extension for chrome, so no worries about cross-browser issues), how do i listen for changes within the span (innerText)? ie. the event should fire when i do this:
Javascript

```
$("#theSpan").text('hello world'); 
```

HTML

```
<span id="theSpan">Hello World</span> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T18:43:13.800

You'll need to create `WebKitMutationObserver` instance, and then simply attach it to your `<span>` using `observe` method. The code will look like this:

```
// find element and create an observer instance
var target = $('#theSpan');
var observer = new WebKitMutationObserver(function(mutations) {
    $('#log').text('input text changed: "' + target.text() + '"');
});
observer.observe(target[0], { childList: true});
//observer.disconnect(); - call this to stop observing

// test case
setInterval(function(){
    target.text('hello world ' + Math.random() + '!!!');
},1000);
​ 
```

Don't forget to pass real DOM object to observer, not jQuery object. Working fiddle available [here](http://jsfiddle.net/hZKP2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-03T21:04:18.683

Try this:

```
var target = document.querySelector('#in1');
var display = document.querySelector('#dsp');
var MO = MutationObserver || WebKitMutationObserver || MozMutationObserver; 
var observer = new MO(function(mutations) {
  var _this = this;
  mutations.forEach(function(mutation) {
    dsp.innerHTML = _this._root.innerText || _this._root.textContent;
  });    
});

var config = { 	//attributes: true, 
								//childList: true, 
                characterData: true, 
                subtree: true 
                };

observer.observe(target, config);
observer._root = target;

setInterval(function(){},250);
```

```
div{
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  border-radius: 5px;
  margin: 0 0 0.75rem 0;
  padding: 0.1rem 0.25rem 0.1rem 0.25rem;
  font-family: sans-serif;
  color: gray;
}

.input{
  border: 1px solid lightblue;
  min-height: 1.25rem;
}
.display{
  border: 1px solid gray;
  background-color: white;
  min-height: 5rem;
}
```

```
<div id="in1" class="input" contenteditable="true"></div>
<div id="dsp" class="display"></div>
```

I think the code is a self-explanatory. Maybe one thing to note - the empty SetInterval. This is because of MAC OS Safari in which, I do not know why, MutationObserver do not work as expected w/o SetInterval. You can play with the interval value, lower value means more responsive MO. In other browsers (Chrome and Firefox - on MAC OS) it works well even w/o SetInterval.

# jquery - 使用jquery显示图片的图像缩放窗口

> ID：13498923
> 
> 赞同：1
> 
> 时间：2012-11-21T17:37:13.683
> 
> 标签：jquery, image, svg, zooming, effect

我在页面上有 SVG 图像。当您将鼠标悬停在 SVG 上时，我希望看到我悬停的区域的放大图。我不希望缩放效果窗口相对于我的光标放置。我的导航中有一个框，我希望将放大的图像放入其中。我正在研究一堆缩放插件，但找不到任何可以让我将缩放放置在页面上的自定义位置的工具。

任何帮助将不胜感激，谢谢。

# linux - ubuntu中的makefile在意外令牌附近给出bash语法错误`（

> ID：13498924
> 
> 赞同：0
> 
> 时间：2012-11-21T17:37:06.703
> 
> 标签：linux, bash, shell, sh

我正在尝试使用 make 在 ubuntu 12.04 64bit 上编译程序。编译时出现错误

> /bin/bash: -c: line 0: 意外标记附近的语法错误`(

这是在我将符号链接更改`/bin/sh`为`/bin/bash`而不是破折号之后。（我这样做是因为我之前遇到过同样的错误，然后环顾互联网，我发现脚本可能会调用 sh/dash 中不可用的 bash 函数。）

我也试过把`SHELL = /bin/bash`我的makefile放在顶部，但仍然没有用......

任何帮助将非常感激。

编辑

```
SHELL = /bin/bash
CC = gcc
CFLAGS= -std=gnu99 -L/ATLAS/lib/ubuntu12.04 -lflint -lgsl -lcblas -latlas  -lm -lmpfr -lmpir -lrt -Wall -fopenmp
default: GPVSignature
GPVSignature: GPVSignature.o  Keygeneration.o chol_parallel.o Sampling2.o  sha1.o     sha2.o timing.o
    $(CC) $(CFLAGS) -o GPVSignature GPVSignature.o  Keygeneration.o   chol_parallel.o Sampling2.o  sha1.o sha2.o timing.o

clean: 
        rm -f GPVSignature *.o

SSH_AGENT_PID=2065
GPG_AGENT_INFO=/tmp/keyring-alBJt6/gpg:0:1
TERM=xterm
SHELL=/bin/bash
XDG_SESSION_COOKIE=ff0e3de12be325b4ae6276d100000009-1353535027.801191-1696704263
WINDOWID=56623110
GNOME_KEYRING_CONTROL=/tmp/keyring-alBJt6
NO_PROXY=localhost,127.0.0.0/8
USER=salman
http_proxy=http:(---)
LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;  33;01:or=40;31;01:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lz=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.axa=00;36:*.oga=00;36:*.spx=00;36:*.xspf=00;36:
XDG_SESSION_PATH=/org/freedesktop/DisplayManager/Session0
XDG_SEAT_PATH=/org/freedesktop/DisplayManager/Seat0
SSH_AUTH_SOCK=/tmp/keyring-alBJt6/ssh
SESSION_MANAGER=local/ubuntu:@/tmp/.ICE-unix/2026,unix/ubuntu:/tmp/.ICE-unix/2026
DEFAULTS_PATH=/usr/share/gconf/ubuntu.default.path
XDG_CONFIG_DIRS=/etc/xdg/xdg-ubuntu:/etc/xdg
PATH=/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:  /bin:/usr/games
DESKTOP_SESSION=ubuntu
PWD=/home/salman/
GNOME_KEYRING_PID=2015
LANG=en_US.UTF-8
MANDATORY_PATH=/usr/share/gconf/ubuntu.mandatory.path
UBUNTU_MENUPROXY=libappmenu.so
COMPIZ_CONFIG_PROFILE=ubuntu
GDMSESSION=ubuntu
HOME=/home/salman
SHLVL=1
GNOME_DESKTOP_SESSION_ID=this-is-deprecated
no_proxy=localhost,127.0.0.0/8
LOGNAME=salman
BUS_SESSION_BUS_ADDRESS=unix:abstract=/tmp/dbus-RUfHXImIYm,guid=c49ca476a7f4b008964105c90000004e
LESSOPEN=| /usr/bin/lesspipe %s
DISPLAY=:0
XDG_CURRENT_DESKTOP=Unity
LESSCLOSE=/usr/bin/lesspipe %s %s
COLORTERM=gnome-terminal
XAUTHORITY=/home/salman/.Xauthority
_=/usr/bin/env
OLDPWD=/home/salman/Desktop 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:48:32.407

How about this?:

```
SHELL:=/bin/bash
CC:=gcc
CFLAGS:=-std=gnu99 -L/ATLAS/lib/ubuntu12.04 -lflint -lgsl -lcblas -latlas  -lm -lmpfr -lmpir -lrt -Wall -fopenmp

default: GPVSignature
GPVSignature: GPVSignature.c  Keygeneration.c chol_parallel.c Sampling2.c  sha1.c     sha2.c timing.c

clean: 
    rm -f GPVSignature *.o 
```

The indentation under the `clean:` line (before the `rm`) is a TAB character! This is important. My guess is that you don't have the indentation correct on the recipe lines (under `GPVSignature:` and under `clean:`). Also, you don't need to give an explicit recipe, because GNU make comes with a number of recipes of its own.

**Note:** I am assuming the file extensions are `.c` here, because it is customary and you use `gcc`, not `g++`. If that's not the case you need to introduce a pattern rule to tell GNU make how to create `.o` files from whatever extension you are using for your source files.

Even assuming your original recipe, I'd suggest the following more succinct line:

```
$(CC) $(CFLAGS) -o $@ $^ 
```

... also indented by a single tab character (unless you tell GNU make to use a different character, which you obviously don't).

* * *

Two more things.

1.  Is the `Makefile`/`GNUmakefile` a simple ASCII text file or a UTF-8 file with BOM? Execute `file Makefile` and post the output, please.
2.  Check the following screenshots. This (second screenshot) is how it should look correctly indented with tabs in Vim (assuming you have the syntax file installed) ... specifically note the colors of the recipe for `GPVSignature`. The first screenshot is wrong, the second is

![Wrong indentation of make file, notice the white/gray text for the recipe line](../Images/b32698caa26d51e5fd3d3d9be60c2242.png)

![Correct indentation](../Images/c464b4fd0f0473bcd105544161409ed0.png)

Other than that I am out of ideas. And there would have to be something you aren't mentioning.

# http-status-code-403 - urlopen(url) 403 禁止错误

> ID：13498926
> 
> 赞同：1
> 
> 时间：2012-11-21T17:37:20.623
> 
> 标签：http-status-code-403

我正在使用 python 打开带有以下代码的 URL，有时我会收到此错误：

从 urllib 导入 urlopen url = "http://www.gutenberg.org/files/2554/2554.txt" 原始 = urlopen(url).read()

错误：'\n\n403 禁止\n\n

# 禁止的

\n

您无权访问 /files/2554/2554.txt\non 此服务器。

\n

* * *

\nApache 服务器位于 www.gutenberg.org 端口 80\n\n'

这是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:58:26.937

This is the web page blocking Python access as it is making requests with the header 'User-Agent'.

To get around this, download the 'urllib2' module and use this code:

```
req = urllib2.Request(url, headers ={'User-Agent':'Chrome'})
raw = urllib2.urlopen(req).read() 
```

You are know accessing the site with the header 'Chrome' and should no longer be forbidden (I tried it myself and it worked).

Hope this helps.

# ruby - 安装 gem melomel 时找不到 gem 'tenderlove-frex'。我在哪里可以找到这颗宝石？

> ID：13498927
> 
> 赞同：0
> 
> 时间：2012-11-21T17:37:10.640
> 
> 标签：ruby, gem, bundler

我正在尝试安装 gem melomel 以在 actionscript 中进行测试。当我在我的 gemfile 和包更新中需要它时，我收到一条错误消息，指出它无法找到 gemtenderlove-frex 并输出此消息：

`Could not find gem 'tenderlove-frex (>= 0) ruby', which is required by gem 'spree (>= 0) ruby', in any of the sources.Bundler could not find compatible versions for gem "nokogiri": In Gemfile: spree (>= 0) ruby depends on nokogiri (~> 1.5.0) ruby spree (>= 0) ruby depends on nokogiri (1.0.0)`

当我从我的 gemfile 中删除 melomel 时，捆绑更新很好。我在网上到处查看，似乎每个托管它的位置都删除了宝石。

我在哪里可以得到这个宝石？我正在使用红宝石 1.9.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T00:45:47.233

`frex`gem 不托管在典型的 Gemcutter 上。

要获取它，请将 GitHub 添加到您的 gem 源中：

```
gem sources -a http://gems.github.com 
```

然后像往常一样尝试安装 gem：

```
gem install tenderlove-frex 
```

如果它有帮助：tenderlove 是顶级 Ruby 开发人员之一 Aaron Patterson 的句柄，据我所知，他已经取代了 frex，并且可能有更好的解决方案可供您使用。例如，您可以将您的 Nokogiri gem 更新到当前版本，并将您的 Spree gem 更新到当前版本吗？这应该消除对frex的需要。

要查看您的版本：

```
$ gem list melomel
melomel (0.6.6)

$ gem list spree
spree (1.2.2)
spree_api (1.2.2)
spree_cmd (1.2.2)
spree_core (1.2.2)
spree_dash (1.2.2)
spree_promo (1.2.2)
spree_sample (1.2.2) 
```

更新：

```
$ bundle update 
```

要查看 Nokogiri 的依赖项列表：

```
$ gem dependency nokogiri 
```

# php - gmail忽略来自php联系表的电子邮件

> ID：13498930
> 
> 赞同：0
> 
> 时间：2012-11-21T17:37:28.710
> 
> 标签：php, forms, email, gmail, html-email

我们在网站上使用 php 电子邮件表单，它在向其他电子邮件程序发送电子邮件时工作正常，只是不是 gmail，我检查了垃圾邮件和收件箱，但我什么也没收到，好像 gmail 不信任电子邮件并完全忽略它. 我们怎样才能让他们通过？

我用于表单的代码是：

```
<div id="contact-form">
<form id="commentForm" action="assets/php/mail.php" method="POST">
<input type="text" name="name" class="required" placeholder="Name..">

<input type="text" name="email" class="required email" placeholder="Email..">

<input type="text" name="phone" class="required" placeholder="Phone..">

<textarea name="message" placeholder="Message.." class="required"></textarea><br />

<input class="subm" type="submit" value="Submit..">
</form>
</div> 
```

而php是

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Contact Form Confirmation</title>

<meta http-equiv="refresh" content="4; url=http://www.domain.co.uk">
</head>

<body>

<?php $name = $_POST['name'];
$email = $_POST['email'];
$phone = $_POST['phone'];
$message = $_POST['message'];
$formcontent="
<h1>From :</h1> $name \n
<h1>Email :</h1> $email \n
<h1>Phone :</h1> $phone \n 
<h1>Message :</h1> $message
";

$recipient = "studio@domain.co.uk";
$subject = "Contact Form";
$mailheader = "MIME-Version: 1.0" . "\r\n";
$mailheader .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
$mailheader .= "From: $email \r\n";
mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");

echo("<p>Thanks for getting in touch, we'll get back to you shortly..</p>");
?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T17:43:36.993

GMail 不是唯一会忽略 sendmail 电子邮件的邮件服务。

可能的原因是您的 From: 标头与您的邮件服务器主机名不匹配。如果您使用的是第 3 方托管，您应该找出主机名（例如“myhost.com”）并在 From: 标头中使用它。然后在“回复”标题中使用正确的电子邮件地址。

```
$mailheader .= "Reply-To: Some One <someone@mydomain.com>\r\n"; 
$mailheader .= "Return-Path: Some One <someone@mydomain.com>\r\n"; 
$mailheader .= "From: Some One <mydomain@myhost.com>\r\n"; 
$mailheader .= "Organization: My Organization\r\n"; 
$mailheader .= "Content-Type: text/plain\r\n"; 
```

为了提高传送能力，您应该使用 SMTP 通过实际的电子邮件帐户发送邮件。

为了绝对最大化可交付性，您应该使用 ESP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T17:47:04.873

另一种（更简单）的可能性......尝试使用 -f 选项：

```
mail($recipient, $subject, $formcontent, $mailheader, "-f {$email}") or die("Error!"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T03:46:35.443

我刚刚在这里回答了一个类似的问题：

[使用 PHP 从联系表中通过电子邮件发送信息](https://stackoverflow.com/questions/14679901/sending-via-email-info-from-a-contact-form-with-php/14680042#14680042)

只需检查一下，我相信它具有解决问题所需的所有代码，至少如果您不期望大量电子邮件。

# python - POST 数据不会填充 Django 表单字段

> ID：13498933
> 
> 赞同：2
> 
> 时间：2012-11-21T17:37:31.497
> 
> 标签：python, django, forms, post

我有一个带有自定义构造函数的模型表单。它检查是否需要文件，如果为假，则删除文件字段。它还有两个隐藏字段，我在视图中对其进行了初始化。表单类如下：

```
class SubmitTask(forms.ModelForm):
    task = forms.ModelChoiceField(queryset=Task.objects.all(), widget=forms.HiddenInput())
    student = forms.ModelChoiceField(queryset=UserProfile.objects.all(), widget=forms.HiddenInput())    

    def __init__(self, file_required=False, *args, **kwargs):
            super(SubmitTask, self).__init__(*args, **kwargs)
            if file_required is True:
                    file = forms.FileField(
                            label='Select a file',
                            help_text='max: 2.5 MB'
                    )
            else:
                    del self.fields['file']

    class Meta:
            model = Submission
            exclude = ('date_submitted',) 
```

我的问题是在我初始化表单时填充了隐藏字段（我已经确认它的值确实是通过查看 HTML 代码初始化的）。但是，在 POST 请求期间不会填充隐藏字段的值。我在 POST 请求期间确认表单确实已绑定，并且我还在 Firebug 上确认 POST 还包含`task`and`student`值。这是我的相关方法`views.py`

```
def view_task(request, id):
    task = Task.objects.get(pk=id)
    profile = request.user.get_profile()

    data = {}
    data['classroom'] = task.get_classroom()
    data['description'] = task.get_description()

    teacher_classrooms = Classroom.objects.filter(teacher=profile)
    teacher_tasks = Task.objects.filter(classroom__in=teacher_classrooms)

    if not submission and task not in teacher_tasks:
        form = SubmitTask(file_required=task.file_required, initial={'task':task.pk, 'student':profile.pk})

        data['form'] = form
        if request.method == 'POST':
            form = SubmitTask(request.POST, request.FILES)

            if form.is_valid():
                form.save()

    return render_to_response('classrooms/view_task.html',
        data, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:45:42.407

您的视图功能对我来说看起来不正确：

提交变量来自哪里，在初始化发布的表单时，您缺少 file_required 参数，并且表单处理可能应该重新组织为：

```
if request.method == 'POST':
    form = SubmitTask(task.file_required, request.POST, request.FILES)
    ...
else:
    form = SubmitTask(task.file_required, ...)

data['form'] = form 
```

# asp.net - 回发后如何在列表框中保留选项？

> ID：13498939
> 
> 赞同：0
> 
> 时间：2012-11-21T17:37:54.210
> 
> 标签：asp.net, vb.net, listbox, postback

我有（1）下拉列表，（2）列表框，（1）页面上的按钮。

列表框一开始是空的，但通过下拉列表更改时的 jquery/ajax 填充。

当我单击该按钮时，它会导致回发，并且每次执行时都会删除列表框中的内容（选项）。

问题：1）为什么会发生这种情况？2）我如何保持列表框的内容不被删除？没有选择列表框中的选项

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T17:40:20.913

由`content/state of form controls are stored in view state`asp.net 引擎在服务器端创建的。在客户端添加的元素将无法在服务器端访问。**您可以将内容数据放在 javascript 的隐藏字段中，然后从隐藏字段将数据返回到服务器端**并分配给列表框、下拉列表等控件。`This is how asp.net also works.`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T17:40:21.630

之所以会发生这种情况，是因为您使用 AJAX 添加值后，它们不会添加到 ViewState 中，而这是 asp.net 用来保持表单状态的。您最好的选择可能是使用 AJAX 来避免回发或仅在回发时才加载页面加载事件中的值。

# c++ - 在 Visual Studio 2012 中使用 Log4cxx

> ID：13498942
> 
> 赞同：1
> 
> 时间：2012-11-21T17:37:58.957
> 
> 标签：c++, visual-c++, linker, visual-studio-2012, log4cxx

我尝试为视觉 2012 构建 log4cxx，在解决错误 4 小时后，构建成功（我不确定:)）。

作为第二步，我尝试创建一个 vs 项目来测试日志记录。我用[了这个例子](http://www.dreamcubes.com/b2/software-development/10/log4cxx-tutorial-in-visual-c/)，但它一直告诉我

> mainapp.cpp(2)：致命错误 C1083：无法打开包含文件：'log4cxx\logger.h'：没有这样的文件或目录

我已经在链接器中指定了附加库目录中的目录调试路径，并添加了“log4cxx.lib”附加依赖项。

我很困惑，我不知道如何使它工作

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:39:55.593

您还需要添加目录，log4cxx 的标头所在的位置。这不是用于链接阶段，而是用于编译器阶段。

这可以通过 Project Properties -> Compiler -> Preprocessor 来完成（我想，我现在没有打开 VS）

**您不包括 .lib。该文件用于链接。**

您需要添加到包含目录，其中包含目录`log4cxx`，并且（log4cxx）目录必须包含`logger.h`！

# android - 对于 PieChartView 类型未定义 getIntent()

> ID：13498948
> 
> 赞同：0
> 
> 时间：2012-11-21T17:38:23.670
> 
> 标签：android, jfreechart

我正在使用该`afreechart`库在我的应用程序中显示一些图表。问题是该类扩展了 DemoView 类，而 getIntent() 来自 Activity 类。我必须在图表应用程序中传递一些额外内容才能进行图表处理。我能做些什么？请问有什么建议吗？非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:44:59.827

在您的内部，您`View`可以投射`getContext()`到`Activity`包含您的内容`View`，因此您可以从中访问任何内容`Activity`。

```
class MyActivity {
...

private MyView mMyView;

public void onCreate(Bundle savedState) {
     mMyView = (MyView)findViewById(R.id.myid);
}

public int getImportantInt() { return 0; }

}

class MyView extends View {

....

private doSomethingWithImportantInt() {

    MyActivity parent = (MyActivity)getContext(); // I meant this line

    int myImportantInt = parent.getImportantInt();

....

}
} 
```

# clips - 在 CLIPS 程序上使用小于

> ID：13498951
> 
> 赞同：0
> 
> 时间：2012-11-21T17:38:40.440
> 
> 标签：clips

如果用户输入某个范围内的值，我会尝试返回一条消息。这在 CLIPS 上可行吗？此外，系统应该只接受以 10 为增量的值。

```
If the user types in a number less or equal to 10 it should say "A"
If the user types in a number greater than 10 and less than 40 it should say "B" 
- so it should only accept values 10,20,30,40 
```

这是我到目前为止的代码：

```
(defrule b-a1
(b-a "a")
=>
(bind ?reply (get-text-from-user "How many points did you achieve?"))
(assert (b-a1 ?reply )))

(defrule b-a2
(b-a1 <= 10)
=>
(assert (conclusion "A")))

(defrule b-a2
(10 < b-a1 < 40)
=>
(assert (conclusion "B"))) 
```

关于如何让这个工作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T18:46:32.643

```
CLIPS> 
(defrule b-a1
   (b-a "a")
   =>
   (printout t "How many points did you achieve? ")
   (bind ?reply (read))
   (assert (b-a1 ?reply )))
CLIPS> 
(defrule b-a2
   (b-a1 ?v&:(<= ?v 10))
   =>
   (assert (conclusion "A")))
CLIPS> 
(defrule b-a2
   (b-a1 ?v&:(< 10 ?v)&:(< ?v 40))
   =>
   (assert (conclusion "B")))
CLIPS> (assert (b-a "a"))
<Fact-1>
CLIPS> (run)
How many points did you achieve? 24
CLIPS> (facts)
f-0     (initial-fact)
f-1     (b-a "a")
f-2     (b-a1 24)
f-3     (conclusion "B")
For a total of 4 facts.
CLIPS> 
```

# asp.net-mvc - MVC4 区域问题（已经在路由集合中）

> ID：13498953
> 
> 赞同：1
> 
> 时间：2012-11-21T17:38:49.373
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

名为“Home_default2”的路由已在路由集合中。路由名称必须是唯一的。

```
 {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        AreaRegistration.RegisterAllAreas();
        routes.MapRoute(
            name: "Default",
            url: "area/{controller}/{action}/{id}",
            defaults: new {area="Home_Default", controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    }

        public override string AreaName
    {
        get
        {
            return "Home";
        }
    }

    public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
            "Home_default2",
            "Home/{controller}/{action}/{id}",
            new { action = "Index", id = UrlParameter.Optional }
        );
    }
} 
```

自动生成的代码有问题，我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-21T08:26:10.920

要解决此问题，只需删除`.dll files`bin 文件夹中的所有内容，然后再次构建解决方案。这应该可以为您解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T14:59:18.680

问题是重复的 `AreaRegistration.RegisterAllAreas(); 在路线和 global.asax 上

所以只需要这个：

```
 routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional } 
```

将 Home_Default 更改为 Home。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-28T12:50:57.890

就我而言，我创建了一个区域并在 Route.config 中添加了这一行。

```
AreaRegistration.RegisterAllAreas(); 
```

但是这个语句已经存在于 global.asax 的 Application_start 中。因此得到了错误。

因此将其从 route.config 中删除。我没有为它更改任何路线名称。一个路由名称是默认的（在 RouteConfig 文件中），另一个是 areaname_default（在 AreaRegistration.cs 文件中）。

# sql-server-2008-r2 - 如何加密用户输入的数据？

> ID：13498958
> 
> 赞同：0
> 
> 时间：2012-11-21T17:39:13.380
> 
> 标签：sql-server-2008-r2

作为我工作的一部分，假设我有一张桌子

```
create table bank(accountnumber int, accountholdername varchar(50),
                  amount decimal(10,2),lastdrawn varchar(5)) 
```

现在我的要求是所有表数据都是机密的，因此在插入时，只有数据必须以加密格式输入表中。

如果我们想看到加密的数据，那么我们必须解密它。

但最后，表中的数据始终应采用加密格式。

现在我可以解决这个问题吗？任何人都可以帮助逐步解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:30:58.127

在插入数据库之前，您可以使用多种加密算法来加密数据：

1.  MD5加密[http://bloggingabout.net/blogs/rick/archive/2005/05/18/4118.aspx](http://bloggingabout.net/blogs/rick/archive/2005/05/18/4118.aspx)

2.  BASE 64 加密 [http://bytes.com/topic/asp-net/answers/529500-base64-decoding](http://bytes.com/topic/asp-net/answers/529500-base64-decoding)

3.  SHA 或 DES 加密。[http://www.codeproject.com/Articles/10154/NET-Encryption-Simplified](http://www.codeproject.com/Articles/10154/NET-Encryption-Simplified)

# php - 如何在 WordPress 简码中使用 AJAX？

> ID：13498959
> 
> 赞同：73
> 
> 时间：2012-11-21T17:39:16.080
> 
> 标签：php, ajax, wordpress, shortcode

我有一个显示随机报价的代码。一个人编写了一个函数来实现所有这些。但是由于某种原因通过 AJAX 更新数据不起作用。当您按下“新报价”按钮时，没有任何反应。也许有人知道为什么？以下代码中需要修复什么，以便在单击“新报价”时加载新报价？

## PHP的

`/wp-content/themes/%your_theme%/js/ajax-load-quote.php`

```
 <?php
 /* uncomment the below, if you want to use native WP functions in this file */
// require_once('../../../../wp-load.php');

 $array = file( $_POST['file_path'] ); // file path in $_POST, as from the js
 $r = rand( 0, count($array) - 1 );

 return '<p>' . $array[$r] . '</p>';
 ?> 
```

## HTML 结构

在页面内容、小部件或模板文件中：

```
<div id="randomquotes">
    <p>I would rather have my ignorance than another man’s knowledge,
       because I have so much more of it.<br />
       -- Mark Twain, American author & Playwright</p>
</div>
<a id="newquote" class="button" href="#" title="Gimme a new one!">New Quote</a> 
```

这显然可以根据自己的喜好进行调整，但是为了这个示例，这就是我们要使用的。
稍后我们将通过简码生成上述内容。

## jQuery

`/wp-content/themes/%your_theme%/js/ajax-load-quote.js`

```
function ajaxQuote() {
    var theQuote = jQuery.ajax({
        type: 'POST',
        url: ajaxParams.themeURI+'js/ajax-load-quote.php',
        /* supplying the file path to the ajax loaded php as a $_POST variable */
        data: { file_path: ajaxParams.filePath },
        beforeSend: function() {
            ajaxLoadingScreen(true,'#randomquotes');
        },
        success: function(data) {
            jQuery('#randomquotes').find('p').remove();
            jQuery('#randomquotes').prepend(data);
        },
        complete: function() {
            ajaxLoadingScreen(false,'#randomquotes');
        }
    });
    return theQuote;
}
/* Loading screen to be displayed during the process, optional */
function ajaxLoadingScreen(switchOn,element) {
    /* show loading screen */
    if (switchOn) {
        jQuery(''+element).css({
            'position': 'relative'
        });
        var appendHTML = '<div class="ajax-loading-screen appended">
            <img src="'+ajaxParams.themeURI+'images/ajax-loader.gif"
                alt="Loading ..." width="16" height="16" /></div>';
        if( jQuery(''+element).children('.ajax-loading-screen').length === 0 ) {
            jQuery(''+element).append(appendHTML);
        }
        jQuery(''+element).children('.ajax-loading-screen').first().css({
            'display': 'block',
            'visibility': 'visible',
            'filter': 'alpha(opacity=100)',
            '-ms-filter': '"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)"',
            'opacity': '1'
        });
    } else {
        /* hide the loading screen */
        jQuery(''+element).children('.ajax-loading-screen').css({
            'display': '',
            'visibility': '',
            'filter': '',
            '-ms-filter': '',
            'opacity': ''
        });
        jQuery(''+element).css({
            'position': ''
        });
    }
}
/* triggering the above via the click event */
jQuery('#newquotes').click( function() {
    var theQuote = ajaxQuote();
    return false;
}); 
```

## 函数.php

`/wp-content/themes/%your_theme%/functions.php`

```
function random_quote( $atts ) {
    /* extracts the value of shortcode argument path */
    extract( shortcode_atts( array(
        'path' => get_template_directory_uri() . '/quotes.txt' // default, if not set
    ), $atts ) );
    $array = file( $path );
    $r = rand( 0, count($array) - 1 );
    $output = '<div id="randomquotes">' .
            '<p>' . $array[$r] . '</p>' .
        '</div>' .
        '<a id="newquote" class="button" href="#" title="Gimme a new one!">New Quote</a>';
    /* enqueue the below registered script, if needed */
    wp_enqueue_script( 'ajax-quote' );
    /* supplying the file path to the script */
    wp_localize_script(
        'ajax-quote',
        'ajaxParams',
        array(
            'filePath' => $path,
            'themeURI' => get_template_directory_uri() . '/'
        )
    );
    return $output;
}
add_shortcode( 'randomquotes', 'random_quote');
/* register the js */
function wpse72974_load_scripts() {
    if ( ! is_admin() ) {
        wp_register_script(
           'ajax-quote', 
            get_template_directory_uri() . '/js/ajax-load-quote.js',
            array( 'jquery' ),
            '1.0',
            true
        );
    }
}
add_action ( 'init', 'wpse72974_load_scripts' ); 
```

如何在 WordPress 中使用 AJAX 更新页面上的内容？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-11-28T20:59:24.267

好问题！

但是，由于您的代码以一种不好的做法开始 - `require_once('wp-load.php');`-，我决定选择我的一个工作片段并对其进行调整。

***观察***：

*   **与您的代码不同**，没有外部`quotes.txt`被抓取，这里使用 Post Type 作为源（`post`），在方法中`get_random_post`
*   **给定页面中只能有一个短代码实例**，因为它基于特定元素 ID（`#newpost-shortcode`和`#randomposts`）
*   像往常一样，[**最好为此创建一个插件**](https://wordpress.stackexchange.com/a/72183/12615)。按照代码注释。

## /wp-content/plugins/so-ajax-shortcode/so-ajax-shortcode.php

```
<?php
/**
 * Plugin Name: (SO) Ajax Shortcode
 * Description: Demonstration of WordPress Ajax working as a shortcode.
 * Plugin URI:  http://stackoverflow.com/a/13614297/1287812
 * Version:     2013.10.25
 * Author:      Rodolfo Buaiz
 * Author URI:  https://wordpress.stackexchange.com/users/12615/brasofilo
 * License:     GPLv3
 */

add_action(
    'plugins_loaded',
    array ( B5F_SO_13498959::get_instance(), 'plugin_setup' )
);

class B5F_SO_13498959
{
    private $cpt = 'post'; # Adjust the CPT
    protected static $instance = NULL;
    public $plugin_url = '';
    public function __construct() {}

    public static function get_instance()
    {
        NULL === self::$instance and self::$instance = new self;
        return self::$instance;
    }

    /**
     * Regular plugin work
     */
    public function plugin_setup()
    {
        $this->plugin_url = plugins_url( '/', __FILE__ );
        add_shortcode( 'randomposts', array( $this, 'shortcode') );
        add_action( 'wp_enqueue_scripts', array( $this, 'enqueue' ) );
        add_action( 'wp_ajax_query_rand_post', array( $this, 'query_rand_post' ) );
        add_action( 'wp_ajax_nopriv_query_rand_post', array( $this, 'query_rand_post' ) );
    }

    /**
     * SHORTCODE output
     */
    public function shortcode( $atts ) 
    {
        # First post
        if( ! $random_post = $this->get_random_post() )
            $random_post = __( 'Could not retrieve a post.' );
        # Prepare output
        $output = sprintf(
            '<div id="randomposts">%s</div>
             <button id="newpost-shortcode" type="button" title="%s">%s</button>',
            $random_post,
            __( 'Gimme a new one!' ),
            __( 'New random post' )
        );
        return $output;
    }

    /**
     * ACTION Enqueue scripts
     */
    public function enqueue() 
    {
        # jQuery will be loaded as a dependency
        ## DO NOT use other version than the one bundled with WP
        ### Things will BREAK if you do so
        wp_enqueue_script( 
             'ajax-random-post',
             "{$this->plugin_url}ajax.js",
             array( 'jquery' )
        );
        # Here we send PHP values to JS
        wp_localize_script( 
             'ajax-random-post',
             'wp_ajax',
             array( 
                 'ajaxurl'      => admin_url( 'admin-ajax.php' ),
                 'ajaxnonce'   => wp_create_nonce( 'ajax_post_validation' ),
                 'loading'    => 'http://i.stack.imgur.com/drgpu.gif'
            ) 
        );
    }

    /**
     * AJAX query random post
     * 
     * Check for security and send proper responses back
     */
    public function query_rand_post()
    {
        check_ajax_referer( 'ajax_post_validation', 'security' );
        $random_post = $this->get_random_post();
        if( !isset( $random_post ) )
            wp_send_json_error( array( 'error' => __( 'Could not retrieve a post.' ) ) );
        else
            wp_send_json_success( $random_post );
    }

    /**
     * AUX FUNCTION 
     * Search a random Post Type and return the post_content
     */
    public function get_random_post()
    {
        $array = get_posts( 
            array( 
                  'post_type' => $this->cpt,
                  'numberposts' => -1 
            ) 
        );
        if( empty( $array ) )
            return false;

        # Select a random post index number from the current array
        $r = rand( 0, count($array) - 1 );
        return $array[$r]->post_content;
    }
} 
```

## /wp-content/plugins/so-ajax-shortcode/ajax.js

```
/* 
 * @plugin SO Ajax Shortcode
 */

jQuery( document ).ready( function( $ ) 
{ 
     var data = {
         action: 'query_rand_post',
         security: wp_ajax.ajaxnonce
     };
     var image = '<img src="' + wp_ajax.loading + '" alt="Loading ..." width="16" height="16" />';

    $( '#newpost-shortcode' ).click( function(e) 
    {
        e.preventDefault();
        $( '#randomposts' ).html( image );
        $.post( 
            wp_ajax.ajaxurl, 
            data,                   
            function( response )
            {
                // ERROR HANDLING
                if( !response.success )
                {
                    // No data came back, maybe a security error
                    if( !response.data )
                        $( '#randomposts' ).html( 'AJAX ERROR: no response' );
                    else
                        $( '#randomposts' ).html( response.data.error );
                }
                else
                    $( '#randomposts' ).html( response.data );
            }
        ); 
    }); // end click
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-25T19:26:02.757

这里的示例插件作为问题的答案。在前端使用 ajaxurl。

*so-random-quotes.php*

```
<?php
/*
Plugin Name: SO Random Quotes
Plugin URI: http://azzrael.ru
Description: Reference to http://stackoverflow.com/questions/13498959/how-to-use-ajax-in-a-wordpress-shortcode
Version: 1.0.0
Author: Azzrael
Author URI: http://azzrael.ru
*/

new SoRandomQuotes();

/**
 * Class SoRandomQuotes
 */
class SoRandomQuotes{

    const SHORTCODE_KEY = 'randomquotes'; // usage [randomquotes path='/path/to/file/another.quotes.csv']
    const AJAX_ACTION = 'so_getnewquote'; // ajax action
    const DOM_TARGET =  'randomquotes'; // dom element to put the quotes

    /**
     * SoRandomQuotes constructor.
     * init actions
     */
    function __construct() {
        // adding shortcode
        add_shortcode('randomquotes', array($this, 'addShortcode'));

        // adding ajax callbacks
        add_action( 'wp_ajax_'.self::AJAX_ACTION, array($this, 'getQuoteAjax')); // admin
        add_action( 'wp_ajax_nopriv_'.self::AJAX_ACTION, array($this, 'getQuoteAjax')); // front
    }

    /**
     * Shortcode callback
     * @param $atts
     * @return string
     */
    public function addShortcode($atts){

        // getting path value from shortcode atts
        $got =shortcode_atts( array(
            'path'    => plugin_dir_path( __FILE__ ).'quotes.txt',
        ), $atts );

        // shortcode replacement
        $out = sprintf(
                    '<div id="%s">%s</div><a id="newquote" class="button" href="#" title="Gimme a new one!">New Quote</a>',
                    self::DOM_TARGET,
                    $this->getQuote($got['path'])
               );

        // loading js
        // jquery depends
        wp_enqueue_script('sorandquo-js', plugin_dir_url( __FILE__ ).'quote-loader.js', array('jquery'));
        // passing to js needed vars
        wp_localize_script( 'sorandquo-js', 'ajaxParams',
            array(
                'path'      => $got['path'], // path to qoutes file
                'targetDom' => '#'.self::DOM_TARGET, // dom path to put resulting qoute
                'ajaxurl'   => admin_url( 'admin-ajax.php'), // for frontend ( not admin )
                'action'    => self::AJAX_ACTION, //
            )
        );

        // render shortcode replacement
        return $out;
    }

    /**
     * Ajax Callback
     */
    public function getQuoteAjax(){
        echo $this->getQuote($_POST['path']);
        die();
    }

    /**
     * Getting random Qoute from the file
     * @param $path
     * @return mixed
     */
    public function getQuote($path){
        $quotesFile = is_file($path) ? file_get_contents($path):"File {$path} not found";
        $quotesArr = $quotesFile ? explode("\n", $quotesFile):['Quotes File is empty'];
        return $quotesArr[array_rand($quotesArr)];
    }

} 
```

*报价加载器.js*

```
jQuery.noConflict();
jQuery(document).ready(function($) {
    $(document).on('click', '#newquote', function (e) {
        e.preventDefault();

        $.post(ajaxParams.ajaxurl, {
            'action':ajaxParams.action,
            'path'  :ajaxParams.path
        }, function (ret) {
            $(ajaxParams.targetDom).html(ret);
        }, 'html');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-13T07:40:07.987

Wordpress 短代码与您提供参数的函数相同，

要创建 ajax 请求，您可以在带有`add_action wp_head`钩子的标头或函数文件中使用 jQuery.ajax 或 xmlhttp。

您应该在主题文件夹中创建 ajax.php，并在文件顶部包含 wp-load.php。并以适当的方式放置所有 ajax 函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-28T15:03:15.993

触发器中使用的选择器与按钮 ID 不匹配。

更改`jQuery('#newquotes')`为`jQuery('#newquote')`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-07-11T12:15:33.007

在function.php中添加这个函数：

```
 <?php
    add_action('wp_head','ajaxurl');
    function ajaxurl()
    {
    ?>
        <script type="text/javascript">
        var ajaxurl = '<?php echo admin_url('admin-ajax.php'); ?>';
        </script>
    <?php
    }?> 
```

# android - 应用程序的类文件未打包在 APK 中

> ID：13498961
> 
> 赞同：6
> 
> 时间：2012-11-21T17:39:31.537
> 
> 标签：android, eclipse, actionbarsherlock

不知何故，android 打包程序不再（不再）将我的应用程序中的类文件包含在 APK 中。

从将我的设置与示例项目进行比较到重新安装 Eclipse，我已经尝试了所有想到的方法。但是，当我打包应用程序时，无论是通过“导出（未）签名的应用程序包”还是仅通过在调试设备/模拟器上运行它，**除了我自己的以外，所有内容都包括在内（jar 库、android 库项目（例如 ActionBarSherlock））代码**。:-(

这是仍然产生问题的最小配置...感谢您的任何提示或帮助！

安卓清单：

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.kawak.bla.android"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="17" />

        <application
            android:allowBackup="true"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <activity
                android:name=".activity.MainActivity"
                android:theme="@android:style/Theme.NoTitleBar" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
        </application>
    </manifest> 
```

类路径：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <classpath>
        <classpathentry kind="con" path="com.android.ide.eclipse.adt.ANDROID_FRAMEWORK"/>
        <classpathentry kind="con" path="com.android.ide.eclipse.adt.LIBRARIES"/>
        <classpathentry kind="lib" path="libs/json-simple-1.1.1.jar"/>
        <classpathentry kind="lib" path="libs/zbar.jar"/>
        <classpathentry combineaccessrules="false" kind="src" path="/SherlockActionBar"/>
        <classpathentry kind="src" path="src"/>
        <classpathentry kind="src" path="gen"/>
        <classpathentry kind="output" path="bin/classes"/>
    </classpath> 
```

Eclipse项目配置：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <projectDescription>
        <name>bla-android</name>
        <comment></comment>
        <projects>
        </projects>
        <buildSpec>
            <buildCommand>
                <name>com.android.ide.eclipse.adt.ResourceManagerBuilder</name>
                <arguments>
                </arguments>
            </buildCommand>
            <buildCommand>
                <name>com.android.ide.eclipse.adt.PreCompilerBuilder</name>
                <arguments>
                </arguments>
            </buildCommand>
            <buildCommand>
                <name>org.eclipse.jdt.core.javabuilder</name>
                <arguments>
                </arguments>
            </buildCommand>
            <buildCommand>
                <name>com.android.ide.eclipse.adt.ApkBuilder</name>
                <arguments>
                </arguments>
            </buildCommand>
        </buildSpec>
        <natures>
            <nature>com.android.ide.eclipse.adt.AndroidNature</nature>
            <nature>org.eclipse.jdt.core.javanature</nature>
        </natures>
    </projectDescription> 
```

**更新：** 我的问题实际上是 ActionBarSherlock 是针对 Android 4.2 构建的，它以某种方式把它搞砸了，没有一个像样的错误消息。幸运的是，常见问题解答中提到您*必须*针对 4.0 构建它......接受罗伯特的回答，因为他是最接近的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:22:07.903

你怎么做 最有可能你有一个构建错误，并且该过程无法完成它的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:37:13.837

1.  重启 Eclipse
2.  删除 gen 文件夹
3.  项目 -> 清洁
4.  Android 工具 -> 修复项目属性
5.  运行方式 -> Android 应用程序

# rest - 是否有一种 RESTful 方式来描述过滤集合的 URL？

> ID：13498963
> 
> 赞同：0
> 
> 时间：2012-11-21T17:39:34.270
> 
> 标签：rest

如果我有一个代表集合的 URL，是否有描述过滤器的好方法？

```
e.g. http://example.com/comic_books?after=2001-01-01&before=2002-03-09 
```

如果我将这些过滤器作为服务合同的一部分，我是不是违反了超媒体作为应用程序状态引擎的想法？

我是否需要其他资源链接到我的收藏并描述过滤器，例如通过 HTML 表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:49:56.490

您可以将 HTML 表单视为代表您的资源和过滤器的 URL 模板，这没有什么问题，我们每天都这样做 (google.com?s=query)。有些人认为您不需要表单来表示 URL 模板，仅文档就足够了，因此对于许多人来说，表单本身是可选的。

超媒体方面主要与链接本身的存在有关。记录服务不是“带外”考虑。您想要的是将链接选项呈现为客户可以遵循的超媒体的一部分。表格可以很好，但不是必需的。您可以为过滤器使用（甚至需要）相同的链接和查询参数，而无需将它们明确列为有效负载的一部分。

将 HAL 视为 HTML 的替代品，它没有表单的概念，但被许多人认为是一种很好的超媒体兼容媒体类型。

# c++ - 为 VS2010 安装 Qt

> ID：13498964
> 
> 赞同：0
> 
> 时间：2012-11-21T17:39:38.400
> 
> 标签：c++, qt, installation

在发现使用 WIN32API 编写 GUI 应用程序太难之后，我今天要去学习 Qt。所以我按如下方式安装了qt。

首先我安装了 VS 2010 express。没关系。

然后`Qt libraries 4.8.3 for Windows (VS 2010, 235 MB)`从[http://qt-project.org/downloads](http://qt-project.org/downloads)下载并将其作为普通软件安装。（在 C:\Qt\4.8.3 中）它自动安装了助手、设计器...等。

然后`Qt Creator 2.6.0 for Windows (51 MB)`从[http://qt-project.org/downloads](http://qt-project.org/downloads)下载并将其安装为普通程序。

现在在 qt creater 中，当我尝试创建一个 Qt 项目时，它说没有找到验证工具包。

这是我面临的问题的一些截图。

![在此处输入图像描述](../Images/667319f1af0330e87e859081027c819f.png) ![在此处输入图像描述](../Images/c5c7ff4b7272a366b1dfc9abfee7b368.png) ![在此处输入图像描述](../Images/b67fd43798b4aff6407fe391952c65dd.png) 我现在应该怎么做才能启动 qt。请我需要有人帮助来处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:11:51.217

你不需要 QtCreator 和视觉工作室。
QtCreator 是 Qt 自己的 IDE，使用 g++/mingw 作为编译器（包含在下载中）。

Qt 包括 QtDesigner - 可以与 Visual Studio 或 QtCreator 一起使用的图形 UI 设计器。

如果您想使用 VS，请安装[qt-vs-addin](http://qt-project.org/faq/answer/what_is_the_qt_visual_studio_add-in)并下载 Qt 库的 VS 构建。
如果您想使用 QtCreator，请下载 Qt 的 mingw 构建。

或者在这两种情况下，您都可以下载源代码并使用 wither QtCreator 或 VS 从头开始​​构建它。

编辑：您可以让 QtCreator 使用 VS 编译器后端 - 在这种情况下，您应该下载 Qt 的 VS 版本。就我个人而言，我从来没有这样做过——如果你使用的是 VS，那么你也可以使用 VS ide。

编辑 2：VS 的免费快递版本不能使用插件 - 所以与 Qt 一起使用有点痛苦。在这种情况下，您可能应该使用 QtCreator。

# c++ - BSTR 中是否有 Unicode 符号？

> ID：13498966
> 
> 赞同：0
> 
> 时间：2012-11-21T17:39:38.823
> 
> 标签：c++, winapi

是否有一个 WinAPI 函数可以判断 BSTR 中是否存在非拉丁字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:03:31.053

我假设您的问题实际上是关于字符串中是否有字符需要 Unicode 来表示，而不是 ASCII。有许多拉丁字符无法用 ASCII 表示。

没有这样的功能，但编写自己的功能很简单。只需逐个字符地检查字符串并确保每个值都小于 128。如果您发现任何大于或等于 128 的值，则这些是 Unicode 字符。

# php - 以下代码如何确保每个浏览器只创建一个到数据库的连接？

> ID：13498969
> 
> 赞同：2
> 
> 时间：2012-11-21T17:39:37.067
> 
> 标签：php, oop, architecture, pdo

我遇到了这段代码，它应该确保每个浏览器只创建一个数据库连接，以便应用程序看到由于对数据库的调用次数减少而提高的性能。

我相信我确实理解如何确保这一点的逻辑，但我只需要确认我对此的理解是正确和完整的。所以，请帮我解释细节。

在进行数据库连接/调用时还有比这更好的做法吗？

```
class Database {
    private static $dsn = 'mysql:host=localhost;dbname=mydatabase';
    private static $username = 'dbuser';
    private static $password = 'dbpass';
    private static $db;

    private function __construct() {}

    public static function getDB ()
    {
        if (!isset(self::$db)) {
            try {
                self::$db = new PDO(self::$dsn,
                                 self::$username,
                                 self::$password);
            } catch (PDOException $e) {
                $error_message = $e->getMessage();
                include('../errors/database_error.php');
                exit();
            }
        }
        return self::$db;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T17:54:35.597

正如@raina77ow 在评论中指出的那样，这称为[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)。这里有一些解释：

成为 Singleton 的重点是没有调用代码可以创建多个`$db`. 并提供从代码中任何地方对创建的`$db`.

静态类变量作为每个类的一个实例存在。`$db`因此，即使您可以将此类实例化为对象，也无法创建多个连接。

由于没有将类实例化为对象的目的（仅当类具有每个对象实例都存在的非静态变量时才有用），因此不需要类构造函数。为了防止调用代码被诱惑调用`new`，构造函数被设为私有。（严格来说，这样做并没有什么坏处，因为无论如何唯一的类变量都是静态的。）

请注意，您的实现缺少魔法`__clone`和`__wakeup`方法。没有这些，你的 Singleton 仍然可以被克隆和反序列化。所以从技术上讲，你的 Singleton 没有正确执行奇异性。

以下是一些额外的想法：

*   众所周知，单例类（或任何具有静态用法的类）难以集成到自动化测试中。由于它们是静态的，因此您可以将它们初始化一次，并且它们会在您的测试套件期间保持其状态。如果您使用非静态类，则可以在每次`new`用于实例化新对象时重新初始化它们。

*   另一种设计是使用[注册表模式](http://martinfowler.com/eaaCatalog/registry.html)，以及为您的应用程序创建一个非静态数据库实例并将其存储在注册表中的某种引导程序。

*   如果您确实使用 Singleton，有时建议声明 Singleton 类[`final`](http://php.net/manual/en/language.oop5.final.php)，以便没有子类可以覆盖行为或访问私有数据。

*   您的数据库凭据在类定义中被硬编码为私有数据。我不会那样做的。如果您的 Apache PHP 处理程序配置错误，用户可以看到您的 PHP 源代码，然后他们将获得您的数据库密码。将数据库连接参数放入配置文件中，并将配置文件存储在 Apache 文档根目录之外。

*   逐字输出数据库连接错误消息可以向用户透露信息。记录 PDO 错误消息，但向用户发出友好消息，例如“我们遇到问题，请通知站点管理员”。

*   您不需要`?>`在类定义文件中终止 PHP 块。它增加了关闭后可能有空格或换行符的风险，这将成为应用程序中的空白并破坏布局。这些类型的错误令人抓狂。

# jquery - Jquery使用map对数组求和

> ID：13498970
> 
> 赞同：0
> 
> 时间：2012-11-21T17:39:48.917
> 
> 标签：jquery, html

我的值数组以 [100,200,300,500] 的形式正确返回我只想总结这些值，我做错了什么？

## jQuery

```
$('select').focus(function () {
    previous = parseInt($(this).val());
}).change(function() {

    var item_cost = parseInt($(this).attr('cost'));

    values = $.map($('select[name="cookies"]'), function (e) {

        return $(e).val()* item_cost;

        for (var i = 0; i < values.length; i++) {
            total += parseInt(values[i]);
            console.log(total);                              
        }
    });

    alert(values); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:44:48.033

Your code needs formatting. You missed a closing `});` You need to declare `var total = 0;` as well. I'm not sure if that is elsewhere in your code.

```
$('select').focus(function() {
    previous = parseInt($(this).val());
}).change(function() {
    var item_cost = parseInt($(this).attr('cost'));

    values = $.map($('select[name="cookies"]'), function(e) {
        return $(e).val() * item_cost;
    }); // <-- RIGHT THERE

    for (var i = 0; i < values.length; i++) {
        total += parseInt(values[i]);
        console.log(total);
    }
});
alert(values);​ 
```

# c++ - 数组中的 C++ 结构

> ID：13498974
> 
> 赞同：-1
> 
> 时间：2012-11-21T17:40:12.207
> 
> 标签：c++, map, struct

我这样做对吗，我想要一个以 Integer 作为键，以 struct 作为值的映射。什么是最简单的方法，比如说我想要`1`. 如何检索 的值`isIncluded`？代码中的最后两行，我试过这样做，但后来我意识到我真的不知道在编号的 Map 数组中检索结构值的方法是什么。

我是否需要调用`cells.get(1)`并将其分配给一个新的临时结构以获取其值？

```
/** set ups cells map. with initial state of all cells and their info*/
void setExcludedCells (int dimension)
{
    // Sets initial state for cells
    cellInfo getCellInfo;
    getCellInfo.isIncluded = false;
    getCellInfo.north = 0;
    getCellInfo.south = 0;
    getCellInfo.west = 0;
    getCellInfo.east = 0;

    for (int i = 1; i <= (pow(dimension, 2)); i++)
    {
        cells.put(i, getCellInfo);
    }
    cout << "Cells map initialized. Set [" << + cells.size() << "] cells to excluded: " << endl;
    cells.get(getCellInfo.isIncluded);
    cells.get(1);
} 
```

Map 被声明为私有实例变量，如下所示：

```
struct cellInfo {
    bool isIncluded;
    int north;  // If value is 0, that direction is not applicable (border of grid).
    int south;
    int west;
    int east;
};
Map<int, cellInfo> cells;       // Keeps track over included /excluded cells 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:49:12.997

从[Map 的文档中](http://www.stanford.edu/class/cs106b/materials/cppdoc/Map-class.html)，它似乎`.get()`返回了一个`ValueType`.

你会这样使用它：

```
// Display item #1
std::cout << cells.get(1).isIncluded << "\n";
std::cout << cells.get(1).north << "\n"; 
```

或者，由于查找相对昂贵，您可以将其复制到局部变量：

```
// Display item #1 via initialized local variable
cellInfo ci = cells.get(1);
std::cout << ci.isIncluded << " " << ci.north << "\n";

// Display item #2 via assigned-to local variable
ci = cells.get(2);
std::cout << ci.isIncluded << " " << ci.north << "\n"; 
```

* * *

我最好的建议是改用标准库的`std::map`数据结构：

```
// Expensive way with multiple lookups:
std::cout << cells[1].isIncluded << " " << cells[1].north << "\n";

// Cheap way with one lookup and no copies
const cellinfo& ci(maps[1]);
std::cout << ci.isIncluded << " " << ci.north << "\n"; 
```

# haskell - 仅从全屏浮动窗口中删除边框（XMonad 配置）

> ID：13498979
> 
> 赞同：15
> 
> 时间：2012-11-21T17:40:26.623
> 
> 标签：haskell, window-managers, xmonad

我想

1.  （仅）从覆盖全屏的浮动窗口（如 mplayer）中删除边框，以及
2.  当工作区中只有一个窗口时，使用不同的边框颜色 (normalBorderColor)。

目前，我正在使用 XMonad.Layout.NoBorders 中的 smartBorders 从 mplayer 中删除边框，并在该窗口是工作区中唯一的窗口时删除该窗口的边框。但是，当我在两个都有一个非浮动窗口（无论模式（高/镜像/全））的两个工作区之间切换时，我会看到窗口（在我正在更改的工作区中）“跳跃”了一下，当它的边框被绘制时，然后在稍后的片刻中移除（如果你将borderWidth设置为一个大数字，效果会更明显）。

下面给出了我的 ~/.xmonad/xmonad.hs 的相关部分。

```
import XMonad.Hooks.ManageDocks
import XMonad.Layout.NoBorders
myLayout = tiled ||| Mirror tiled ||| Full
  where
    tiled   = Tall 1 (3/100) (3/5)                                 
main = xmonad $ defaultConfig 
                 { layoutHook = avoidStruts $ smartBorders $ myLayout 
                 , borderWidth = 4
                 , normalBorderColor  = "#000000" -- black
                 , focusedBorderColor = "#ff3f3f" -- reddish
                 } 
```

你们知道我是如何达到这个效果的吗？（第 2 部分。甚至可能吗？）非常感谢对实现类似效果的扩展和/或现有配置的建议和指针。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T14:50:12.573

我解决了pt。1 使用来自 XMonad.Layout.NoBorders 的名为 OnlyFloat 的歧义构造函数。

```
import XMonad.Hooks.ManageDocks
import XMonad.Layout.NoBorders
myLayout = tiled ||| Mirror tiled ||| Full
  where
    tiled   = Tall 1 (3/100) (3/5)                                 
main = xmonad $ defaultConfig 
                 { layoutHook = lessBorders OnlyFloat $ avoidStruts $ myLayout 
                 , borderWidth = 4
                 , normalBorderColor  = "#000000" -- black
                 , focusedBorderColor = "#ff3f3f" -- reddish
                 } 
```

我还没有提到pt。2.此外，当我切换到工作区时，聚焦窗口的边框颜色“闪烁”，因为最初，窗口没有聚焦（因此它的边框根据 normalBorderColor 着色），然后窗口变得聚焦（因此它的边框获得颜色focusedBorderColor）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-02T23:46:18.130

关于第 2 部分：xmonad-contrib 包的 0.17.0 版引入了新的[XMonad.Layout.VoidBorders](https://hackage.haskell.org/package/xmonad-contrib-0.17.0/docs/XMonad-Layout-VoidBorders.html)布局修改器，它像 XMonad.Layout.NoBorders 一样删除边框，但有点永久（窗口将保留其零宽度边框即使移出 VoidBorders 控制的工作区）。这种副作用可能会或可能不会破坏交易，但它解决了切换工作区时的“跳跃”窗口问题。

# ruby-on-rails - 向路由添加新操作

> ID：13498981
> 
> 赞同：15
> 
> 时间：2012-11-21T17:40:33.487
> 
> 标签：ruby-on-rails, ruby, routes

我在用户控制器中得到了这些操作

```
class UsersController < ApplicationController
  def index #default action
    ...
  end

  def new #default action
    ...
  end

  def another_new
    ...
  end

  def create
    ...
  end

  def another_create
    ...
  end
end 
```

我希望能够 `/users/another_new`从某种链接`:method => :another_create` 调用`/users/another_new`

我得到了以下 config/routes.rb

```
get '/users/another_new' :to => 'users#another_new'
resources :users 
```

我的问题是这是否是添加的正确方法`get`以及如何添加 another_create 方法。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-21T17:53:18.960

在您的 config/routes.rb 文件中执行此操作

```
resources :users do
  collection do
    get 'another_new'
    post 'another_create'
  end
end 
```

还可以查看[这里](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)以清楚地理解概念。

希望这可以帮助你伙计:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T17:43:20.310

在 routes.rb 中试试这个

```
match "/users/another_new " => "users#another_new", :as => 'another_new' 
```

那么你可以做

```
link_to "MyUrl", another_new_path 
```

这应该有效。祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T18:11:23.330

另请注意，您不应该拥有`:method => :another_new`. 您的选项`:method`是`:get`、`:put`、`:post`和`:delete`，并且您使用的选项应该与您在路由中定义操作的方式相匹配。

# java - Tomcat 服务在取消部署时停止

> ID：13498984
> 
> 赞同：0
> 
> 时间：2012-11-21T17:40:58.093
> 
> 标签：java, multithreading, sockets, tomcat

我有一个 Web 应用程序，它在内部启动一个服务器套接字并监听传入的消息。当我取消部署我的 Web 应用程序时，它也会停止 tomcat 服务器。

我可以知道我需要更新任何设置来处理这种情况吗？

我的环境：目前我正在使用来自安装的默认设置。我的 tomcat 版本是“Apache Tomcat/7.0.10”，JVM 版本是“1.6.0_24-b24”，我使用的操作系统是“Linux”

**服务器日志中的错误显示**：

严重：Web 应用程序 [/sampleApp] 似乎已经启动了一个名为 [Thread-4] 的线程，但未能停止它。这很可能造成内存泄漏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:56:31.907

不知道为什么取消部署应用程序会导致 Tomcat 本身停止，也许更多地查看日志并增加日志级别会有所启发。但是，您在 Tomcat 中创建服务器套接字的方法非常奇怪（我质疑如果它实现自己的套接字协议而不是 HTTP，为什么它首先需要在 webapp 中）。

Servlet API 明确建议不要在处理 HTTP servlet 请求时创建新线程。Tomcat 跟踪与每个 webapp 关联的线程池和资源，当你创建一个新的线程时，你实际上已经脱离了它的模型，这就是造成`SEVERE:`错误的原因。这很可能发生在您`ServerSocket`获得新的客户端连接并且您初始化一个新的连接`Thread`来处理它时。

如果您需要实现任何多线程，它应该在 a 中[`ContextListener`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)，它在加载 webapp 时被初始化。如果 servlet 需要将任何工作卸载到其他线程，则它们会与它通信。永远不要直接从`Servlet`. 您也可以[将](http://jetty.codehaus.org/jetty/)`ServerSocket`.`ContextListener`

# python-2.7 - 使用 python 脚本删除 .xls 中的行

> ID：13498987
> 
> 赞同：0
> 
> 时间：2012-11-21T17:41:17.213
> 
> 标签：python-2.7

我是 python 新手，但我现在想做的是删除我的 excel 文件中扩展名为 .xls 的几行。Excel 版本是 2007 。我知道我们可以使用 xlrd xlwt 包，但我不知道删除行或列需要执行哪些函数调用。我只删除那些包含具有特定文件的特定列的行。

我知道`open_workbook`并读取行和列，但在删除 Excel 文件中的行时遇到问题。同时我也想知道我是否也可以创建一个新的excel文件，如果可以的话怎么办？有关上述特定功能的文档链接会很有帮助，但我找不到讨论通过 python 脚本删除行或列的链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:46:06.373

Check out [this website](http://www.python-excel.org/) here you'll have documentation,tutorials and etc for the xlrd xlwt packages and some others

Edit: From what i know you need to read the original file and copy what you need to a second file, discarding what you don't need

# android - 如果之前通过手动下载 APK 安装了应用程序，Google Play 将不会显示更新按钮

> ID：13498988
> 
> 赞同：3
> 
> 时间：2012-11-21T17:41:18.827
> 
> 标签：android, google-play

Google Play 不会显示更新按钮。我怀疑这与该应用程序先前是通过从站点手动下载 APK 文件来安装的事实有关。

有没有人可以确认这种行为和/或知道如何处理这个问题？我们为客户开发 Android 应用程序，并希望他们在将应用程序发布到 Google Play 之前试用该应用程序——因此我们必须应对这种过渡。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T17:47:55.050

我认为不可能允许用户更新他们从非市场来源安装的应用程序。这是因为当您购买应用程序时，Google 会将该应用程序与您的 gmail 帐户相关联，从而允许您在多个设备上安装该应用程序。

他们不允许用户为从非市场来源安装的应用程序安装更新的原因之一是盗版，因为这将允许尚未购买应用程序的用户获得免费更新。

另外，这个问题有点离题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T17:53:07.930

如果您安装的版本与 Google Play 上的版本相同或更高，Google Play 将不会为您提供更新。

如果您想从 Google Play 更新以前手动安装的应用程序，请确保这些应用程序具有相同的证书和包名称。

# android - 无法同时使用模拟器和手机登录 Facebook

> ID：13498989
> 
> 赞同：1
> 
> 时间：2012-11-21T17:41:19.630
> 
> 标签：android, android-emulator, facebook-android-sdk

我无法同时使用模拟器和手机登录 Facebook。手机确实给了我 Facebook 的登录屏幕，但是在我输入用户名和密码后，按钮图像没有改变 + 我收到错误消息“无法找到 com.facebook.katana.provider.AttributionIdProvider 的提供商信息”。尝试从我的手机登录时，FB 登录页面会打开大约 2 秒钟，然后立即关闭回到我的布局。

怎么了？

```
package com.test.facebookapp;

import java.io.IOException;
import java.net.MalformedURLException;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageView;
import android.widget.Toast;

import com.facebook.android.DialogError;
import com.facebook.android.Facebook;
import com.facebook.android.Facebook.DialogListener;
import com.facebook.android.FacebookError;

public class StartingPlace extends Activity implements OnClickListener{

    Facebook fb;
    ImageView pic,button;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        String APP_ID = getString(R.string.APP_ID);
        button = (ImageView)findViewById(R.id.login);
        pic = (ImageView)findViewById(R.id.picture_pic);
        button.setOnClickListener(this);
        fb = new Facebook(APP_ID);
        updateButtonImage();

    } 
    private void updateButtonImage() {
        // TODO Auto-generated method stub
        if (fb.isSessionValid()){
            button.setImageResource(R.drawable.logout_button);
        }
        else{
            button.setImageResource(R.drawable.login_button);
        }
    }
    @Override
    public void onClick(View v) {
        if (fb.isSessionValid()){
            //button will close session - logout
            try {
                fb.logout(getApplicationContext());
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            updateButtonImage();
        }
        else{
            //login to facebook
            fb.authorize(StartingPlace.this, new DialogListener() {

                @Override
                public void onFacebookError(FacebookError e) {
                    // TODO Auto-generated method stub
                    Toast.makeText(StartingPlace.this, "fbError", Toast.LENGTH_SHORT).show();
                }

                @Override
                public void onError(DialogError e) {
                    // TODO Auto-generated method stub
                    Toast.makeText(StartingPlace.this, "DialogError", Toast.LENGTH_SHORT).show();

                }

                @Override
                public void onComplete(Bundle values) {
                    // TODO Auto-generated method stub
                    updateButtonImage();
                }

                @Override
                public void onCancel() {
                    // TODO Auto-generated method stub
                    Toast.makeText(StartingPlace.this, "onCancel", Toast.LENGTH_SHORT).show();
                }
            });

        }
        // TODO Auto-generated method stub

    }

}

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.test.facebookapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.INTERNET"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.test.facebookapp.StartingPlace"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="com.facebook.LoginActivity"></activity>
    </application>

</manifest> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:46:41.317

you must export a signed apk and install it to the mobile.

fb dos not work on debugging unless you use a debug fb Key

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:48:47.053

好吧，事实证明我的 Facebook 设置出了点问题。我删除了我的应用程序，更加小心地重新创建了它，它现在可以正常登录和注销。:) 非常感谢你们。这些技巧应该会派上用场。

# websphere-7 - 在 WAS 7 上运行时 JAXB 解组失败（在独立测试中成功）

> ID：13498990
> 
> 赞同：3
> 
> 时间：2012-11-21T17:41:26.050
> 
> 标签：websphere-7, jaxb2

运行时 JAXB 解组失败`WAS 7` （在独立测试中成功）

```
[21/11/12 16:47:55:690 CET] 00000025 DefaultMessag W org.springframework.jms.listener.AbstractMessageListenerContainer invokeErrorHandler Execution of JMS message listener failed, and no ErrorHandler has been set.
                                 java.lang.VerifyError: javax/xml/bind/JAXBElement.<init>(Ljavax/xml/namespace/QName;Ljava/lang/Class;Ljava/lang/Class;Ljava/lang/Object;)V
    at com.ca.cib.zba.message.mt101.ObjectFactory.createMatherUnmarshaller(ObjectFactory.java:23)
    at com.ibm.xml.xlxp2.jaxb.unmarshal.JAXB_Deserialization_Root_Stub.write(com.ibm.xml.xlxp2.jaxb.unmarshal.JAXB_Deserialization_Root_Stub.java)
    at com.ibm.xml.xlxp2.jaxb.unmarshal.impl.DeserializationStub.end(DeserializationStub.java:151)
    at com.ibm.xml.xlxp2.jaxb.unmarshal.impl.DeserializationContext.endComplexType(DeserializationContext.java:673)
    at com.ibm.xml.xlxp2.jaxb.unmarshal.impl.DeserializationContext.handleEndElementEvent(DeserializationContext.java:384)
    at com.ibm.xml.xlxp2.jaxb.unmarshal.impl.JAXBDocumentScanner.produceEndElementEvent(JAXBDocumentScanner.java:234)
    at com.ibm.xml.xlxp2.scan.DocumentScanner.scanEndElement(DocumentScanner.java:2590)
    at com.ibm.xml.xlxp2.scan.DocumentScanner.nextEvent(DocumentScanner.java:1289)
    at com.ibm.xml.xlxp2.scan.DocumentScanner.parseDocumentEntity(DocumentScanner.java:1168)
    at com.ibm.xml.xlxp2.jaxb.unmarshal.impl.JAXBDocumentScanner.unmarshal(JAXBDocumentScanner.java:147)
    at com.ibm.xml.xlxp2.jaxb.unmarshal.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:158)
    at com.ca.cib.zba.message.mt101.ZBAProcessingResultXMLTool.getZBAProcessingResult(ZBAProcessingResultXMLTool.java:52)
    at com.ca.cib.zba.message.mt101.listener.ListenerMT101.processMessage(ListenerMT101.java:80)
    at com.ca.cib.zba.message.mt101.listener.ListenerMT101.onMessage(ListenerMT101.java:65)
    at org.springframework.jms.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:562)
    at org.springframework.jms.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:500)
    at org.springframework.jms.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:468)
    at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.doReceiveAndExecute(AbstractPollingMessageListenerContainer.java:326)
    at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:264)
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:1071)
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.executeOngoingLoop(DefaultMessageListenerContainer.java:1063)
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:960)
    at java.lang.Thread.run(Thread.java:735) 
```

它是`ObjectFactory.createMatherUnmarshaller`在 Websphere 应用程序服务器上运行时失败，而在独立测试中运行良好

```
@XmlElementDecl(namespace = "", name = "ZBAProcessingResult")
public JAXBElement<ZBAProcessingResult> createMatherUnmarshaller(ZBAProcessingResult zbaProcessingResult){
        return new JAXBElement<ZBAProcessingResult>(ZBAProcessingResult_QNAME, ZBAProcessingResult.class,null,zbaProcessingResult); 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:14:37.460

找到的解决方案我使用了 ObjectFactory.java，它显然是邪恶的起源（在 Websphere Application Server 的世界中）。所以我切换到使用包含我的序列化类名称的 jaxb.in​​dex。我将代码更改为不使用 JAXBElement ：

# batch-file - 根据变量的当前值创建一个文本文件，创建一个文本文件，其内容为同一变量的先前值

> ID：13498992
> 
> 赞同：1
> 
> 时间：2012-11-21T17:41:26.090
> 
> 标签：batch-file

代码如下，

```
@echo off 
if not exist c:\Locker (
    cd/
    md Locker
    cd windows\system32
    echo Set the password for your locker:-
    set /p pass=
    echo %pass%>text.txt
) else (
    echo Folder is created
) 
```

在这里，假设我设置 pass = 12345，文本文件不包含任何这样的值如果我再次运行我的程序并设置 pass=abcde，那么文本文件将值显示为“1234”。请告诉我这背后的原因以及如何避免这种情况？提前致谢.........

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:20:06.403

[您需要 SETLOCAL ENABLEDELAYEDEXPANSION 因为您在括号上下文](http://ss64.org/viewtopic.php?id=1460)中使用变量集：

```
@echo off 
SETLOCAL ENABLEDELAYEDEXPANSION
if not exist c:\Locker (
    cd/
    md Locker
    cd windows\system32
    echo Set the password for your locker:-
    set /p pass=
    echo !pass!>text.txt
) else (
    echo Folder is created
)
ENDLOCAL 
```

# python - Python正则表达式：搜索.txt文件字符串

> ID：13498993
> 
> 赞同：1
> 
> 时间：2012-11-21T17:41:31.127
> 
> 标签：python, regex

我有一个看起来像这样的文本文件

```
other stuff
set fmri(custom11) "/home/this/is/a/sample_path/to_some/arbitarily/named_11/file-with-othercharacters/file.txt"
other stuff 
```

我想使用 Python 来搜索该文件

*   所有行`".txt"`
*   在行上替换`"11"`为，但仅在文件路径中，而不是在字符串中。`"12"``".txt"``"custom11"`
*   我省略了循环逻辑，只是为了专注于re.search和re.sub的使用。

```
if re.search('.txt', line):
   print(re.sub("11", "12", line), end='') 
```

不知何故，在 re.search 中找不到 .txt。如果我使用：

```
if re.search('xt', line): 
```

我得到了大部分包含文本文件的行，还有其他东西。如何正确找到`'.txt'`文件行？

此外，在测试时，将`re.sub`替换`11`为`12`，还会导致`"custom11"`更改为`"custom12"`。有没有办法改变行中的子字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:45:05.580

In regular expression, a `.` signifies any single character. Use `\.`.

```
if re.search('\.txt', line):
   print(re.sub("11", "12", line), end='') 
```

# powershell - 根据路径从 csv 中删除目录文件

> ID：13498999
> 
> 赞同：-1
> 
> 时间：2012-11-21T17:41:53.590
> 
> 标签：powershell

我有一个包含文件路径和文件名（以及其他一些字段）的 csv。如何使用文件中的路径删除目录中的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:21:46.083

您需要导入文件并使用`Remove-Item`cmdlet。假设您有一个名为“Path”的列，其中包含文件的完整路径：

```
Import-Csv .\files.Csv | Foreach-Object{
   Remove-Item -LiteralPath $_.Path -Force
} 
```