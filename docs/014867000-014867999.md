# StackOverflow 问答 14867000-14867999

# extjs - Sencha touch 2 event listener on text change for an input type=text html field

> ID：14867002
> 
> 赞同：0
> 
> 时间：2013-02-14T02:46:56.560
> 
> 标签：extjs, sencha-touch-2

我有一个看法。我正在尝试`onchange`为输入字段附加一个侦听器。我知道如何使用文本字段来做到这一点，但我有一个非常具体的设置，我需要使用 html 字段。我怎样才能让下面的监听器工作，所以如果我更改字段中的文本，我会在我的控制台中得到一些输出。

```
Ext.define('A.view.Viewa', {
    xtype: 'Viewa',

    extend: 'Ext.Panel',

    config: {
        title: 'Title',
        layout: {
            type: 'fit'
        },

        items: [

            {
                styleHtmlContent: true,
                scrollable: true,
                items: [

                ],
                html: [
                    "<input type='text' value='changeme' id='changetext'/>"
                ].join("")
            }
        ],

        listeners  :  {
                       change : {
                            fn: function() {
                                console.log("Yes it works!!");

                            },
                            delegate : '#changetext',
                            element : 'element'
                       }              
        } 
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T06:14:10.543

我和你的`change`听众一起试过了，但这不起作用。`keyup`听众似乎工作正常。

```
Ext.define('A.view.Viewa', {
    extend: 'Ext.Panel',
    xtype: 'Viewa',

    config: {
        html: '<input type="text" value="changeme" id="changetext"/>',
        styleHtmlContent: true,
        scrollable: true,
        layout: {
            type: 'fit'
        },
        listeners: {
            keyup: {
                fn: function() {
                    console.log("Yes it works!!");
                },
                delegate: '#changetext',
                element: 'element'
            }
        },
        items: [
            {
                xtype: 'titlebar',
                docked: 'top',
                title: 'Title'
            }
        ]
    }

}); 
```

# javascript - 关于范围、node.js 和 express 的问题

> ID：14867004
> 
> 赞同：1
> 
> 时间：2013-02-14T02:47:06.487
> 
> 标签：javascript, node.js, inheritance, express, scopes

我真的很不擅长理解几乎所有语言中的范围和其他类似性质的东西。现在我正在构建一个快速应用程序，它接受用户输入，然后查询任意 api，然后将其提供给控制台。为了处理其余的 api，我使用了 shred。我知道我可以使用 get 请求中内置的节点，但由于某种原因，我永远无法让它工作。用户向我的应用程序 /query?query= 发出以下获取请求。这就是我现在所拥有的。我无法真正描述我在做什么，所以请阅读代码注释。

```
var http = require('http');
var Shred = require("shred");
var assert = require("assert"); 

exports.query = function(req, res){
    //thequery is the string that is requested
    var thequery = req.query.query;
    var shred = new Shred();

    console.log("user searched" + " " + thequery);
    console.log();

    //The if statement detects if the user searched a url or something else
    if (thequery.indexOf("somearbitratyrestapi.com") !== -1){
        console.log("a url was searched");
        //find info on the url

        var thedata = shred.get({
          url: "http://somearbitratyrestapi.com/bla/v2" + thequery,
          headers: {
            Accept: "application/json"
          },
          on: {
            // You can use response codes as events
            200: function(response) {
              // Shred will automatically JSON-decode response bodies that have a
              // JSON Content-Type

              //This is the returned json
                  //I want to get this json Data outside the scope of this object
              console(response.content.body);

            },

            // Any other response means something's wrong
            response: function(response) {
             console.log("ohknowz");
            }
          }
        });

            //I want to be able to see that json over here. How do?

    }else{
        console.log("another thing was searched");
    }
/*

    res.render('search-results', { 
        result: 'you gave me a url',
        title: 'you gave me a url' 
    });
 */
}; 
```

我试着这样做

```
var http = require('http');
var Shred = require("shred");
var assert = require("assert"); 

exports.query = function(req, res){
    //thequery is the string that is requested
    var thequery = req.query.query;
    var shred = new Shred();
    //I created a variable outside of the object
    var myjson;

    console.log("user searched" + " " + thequery);
    console.log();

    //The if statement detects if the user searched a url or something else
    if (thequery.indexOf("somearbitratyrestapi.com") !== -1){
        console.log("a url was searched");
        //find info on the url

        var thedata = shred.get({
          url: "http://somearbitratyrestapi.com/bla/v2" + thequery,
          headers: {
            Accept: "application/json"
          },
          on: {
            // You can use response codes as events
            200: function(response) {
              // Shred will automatically JSON-decode response bodies that have a
              // JSON Content-Type

              //This is the returned json
                  //I set myjson to the returned json
              myjson = response.content.body

            },

            // Any other response means something's wrong
            response: function(response) {
             console.log("ohknowz");
            }
          }
        });

            //Then I try to output the json and get nothing
            console.log(myjson);

    }else{
        console.log("another thing was searched");
    }
/*

    res.render('search-results', { 
        result: 'you gave me a url',
        title: 'you gave me a url' 
    });
 */
}; 
```

很抱歉对我的问题的解释不好。有人可以帮忙或解释发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:54:17.973

因此，您认为您需要将数据移出嵌套范围，但事实恰恰相反。在您可以访问上游 JSON 响应的嵌套范围内，您需要访问该`res`对象并发送它：

```
myjson = response.content.body
res.send(myjson); 
```

但是，从长远来看，您需要做更多的节点教程，并专注于如何使用回调来避免深度嵌套的函数范围。

# android - Android TextView 不在 ListView 中进行换行（多行文本）

> ID：14867013
> 
> 赞同：2
> 
> 时间：2013-02-14T02:48:17.397
> 
> 标签：android, listview, textview, expandablelistview, multiline

我创建了一个 3 级 ExpandableListView 并且有一个问题，即如果内容太长，用于第 2 级和第 3 级的 TextView 不支持换行符。如果需要，它应该动态超过一行。第一级TextView（自动）做得很好，实际上我在xml中对所有三个TextView都有相同的设置。接下来是布局xmls，带有id groupname 的一个TextView 用于第二级（例如下图中的第一个红色X），带有id childname 的一个用于第三级（例如第二个和第三个红色X 在下图）。这一切都应该像图中的绿色钩子一样。

“singleLine=false”似乎不起作用。还尝试了其他 SO 帖子中的一些不同选项，但我测试的内容对我没有用。像 ellipsize、scroll Horizo​​ntale、不同的 layout_width 等等。唯一有效的是在 x 百 dp 上设置一个固定的 layout_width，但这不是动态的，对吗？

如果有人可以帮助我，那就太好了。非常感谢！

这是一个屏幕截图：

![在此处输入图像描述](../Images/44ab4fd7a9b0a30ff61b3e9677fd90c6.png)

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/childname"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginRight="60dp"
    android:layout_marginLeft="60dp"
    android:textColor="#AAAAAA"
    android:singleLine="false"
    android:text=""
    android:gravity="center_vertical"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/groupname"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="45dp"
    android:layout_marginRight="60dp"
    android:textColor="#555555"
    android:singleLine="false"
    android:gravity="center_vertical"
    android:text=""
    android:textAppearance="?android:attr/textAppearanceMedium" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T03:08:46.333

在您的 xml 中添加这一行

```
android:inputType="textMultiLine" 
```

或者

使用这样的编码添加文本，您可以使用 '\n' 添加换行符（但在这里您必须手动在需要的位置添加换行符）

```
TextView txt1 = (TextView) findViewById(R.id.childname);
txt1.setText("Hi \nHello \nHow are You"); 
```

结果将是

**嗨**
**你好**
**你好吗**

编辑接受的答案 - 删除行 'android:layout_alignParentLeft="true"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T04:33:28.333

尝试使用*LinearLayout*而不是*RelativeLayout*作为*TextView的父级*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-25T09:25:34.173

我已将此属性添加到 ListView 内的 TextView 中，并使其正确换行。

```
android:maxWidth="xxxdp" 
```

FYR

# iphone - 根据 frame.origin.y 对 TextField 的 IBOutletCollection 数组进行排序

> ID：14867014
> 
> 赞同：2
> 
> 时间：2013-02-14T02:48:29.087
> 
> 标签：iphone, uitextfield, bubble-sort

我正在尝试根据 对数组进行`textFields`排序`frame.origin.y`。但是当我运行模拟器时它卡住了。任何的想法？

```
IBOutletCollection(UITextField) NSArray *textFields 
```

我的代码：

```
-(NSMutableArray *)bubbleSort:(NSMutableArray *) unsortedArray{
 NSInteger i,j;
 //NSLog(@"%@",unsortedArray);
 for(i=0;i<unsortedArray.count;i++)
  {
    for(j=0;j<i;j++)
    {
        if(((UITextField *)[unsortedArray objectAtIndex:i]).frame.origin.y > ((UITextField *)[unsortedArray objectAtIndex:j]).frame.origin.y)
        {

            UITextField *temp=[unsortedArray objectAtIndex:i]; 
            [unsortedArray insertObject:[unsortedArray objectAtIndex:j] atIndex:i];
            [unsortedArray insertObject:temp atIndex:j];
        }
    }
  }
  //NSLog(@"%@",unsortedArray);
  return unsortedArray;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T03:16:34.420

看起来这将继续在数组中插入对象。所以 unsortedArray.count 会不断增加。在我看来，您需要先删除对象，然后根据算法将其插入到上层或下层。

请参阅 NSMutableArray 插入对象函数的文档。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T03:38:25.977

就像 Learner 说的那样，你只是继续在你的数组中插入对象，所以你永远不会离开你的外部 for 循环。要交换两个元素，您可以使用

```
- (void)exchangeObjectAtIndex:(NSUInteger)idx1 withObjectAtIndex:(NSUInteger)idx2 
```

所以在你的情况下，在你的内部`if`，你可以简单地写

```
[unsortedArray exchangeObjectAtIndex:i withObjectAtIndex:j]; 
```

[参考](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html#//apple_ref/doc/uid/20000138-BCIJIGDB)

# jquery - 如何防止jQuery中目标元素内的嵌套元素中的事件处理程序？

> ID：14867020
> 
> 赞同：1
> 
> 时间：2013-02-14T02:48:59.113
> 
> 标签：jquery, dom, javascript-events

```
<tr>
  <td>
    <a></a>
  </td>
</tr> 
```

好的，`<tr>`节点有事件监听器`$('tr').click(handler1)`。但我不希望`<a>`节点具有与 has 相同的行为。

无论如何我可以在没有jQuery的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T02:53:55.783

也向 a 添加一个事件处理程序并防止默认

```
$(function(){
  $("tr a").click(function(e){
       e.preventDefault();
   });
}); 
```

## 更新：

如果您希望链接继续执行默认操作但不希望事件冒泡到 tr 则将其更改`e.stopPropagation();`为`e.preventDefault();`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T03:35:27.103

您可以查看类似这样的内容作为使用 jQuery 的替代方法

```
document.getElementById('x').addEventListener('click', function(e){
    if(e.target.tagName == 'A'){
        alert('Clicked A')
    }else{
        alert('clicked tr')
    }
    }, false); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/f9gGx/)

使用 jQuery：

```
$('tr').on('click', function(e){
    if($(e.target).is('a')){
        alert('clicked a')
    } else {
        alert('clicked tr')
    }
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/f9gGx/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T02:57:22.203

```
$('tr').click(function(e){
    e.preventDefault();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T03:14:05.013

```
$('tr').click(function(e){    
     if($(e.target).is('#youranchorelementid')){ //you can use class also if you have many elements
    e.preventDefault();
    }

}); 
```

# axis2 - WSO2 Proxy Service URL not working with SOAPUI

> ID：14867021
> 
> 赞同：1
> 
> 时间：2013-02-14T02:49:03.707
> 
> 标签：axis2, wso2, soapui, wso2esb

We have CXF based SOAP web services and we are hitting these services from SOAP UI with no problem. With one of these services, I setup a ProxyService on barebone WSO2 ESB 4.6.0\. The proxy service seems to be working with the "Try It" option from the admin console. When I try to access it from SOAPUI, the WSO2 ESB starts complaining that

"The endpoint reference (EPR) for the Operation not found is /services/HelloWorldProxyService and the WSA Action = . If this EPR was previously reachable, please contact the server administrator."

Now, when I change the endpoint URL in SOAPUI as http:// hostname:8280/services/service-name.port-name/operation-name things start to work.

Does anyone know how to fix this issue? Are there configuration options on the WSO2 ESB which will let us use traditional SOAPUI with WSO2 ESB?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:48:07.943

您可以在soapui中指向代理服务url（您可以通过特定代理的服务仪表板查看），对于“动作”，在代理的顺序中定义一个属性调用；. 标题名称=“行动”价值=“肥皂行动”

这是可用属性的指南

[http://wso2.org/project/esb/java/3.0.0/docs/properties_guide.html](http://wso2.org/project/esb/java/3.0.0/docs/properties_guide.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:28:33.260

尝试更改（原始）WSDL 并将soapAction 放在那里：

您可以将其定义为绑定部分中[http://schemas.xmlsoap.org/wsdl/soap/:operation元素的属性，例如](http://schemas.xmlsoap.org/wsdl/soap/:operation)

```
<wsdl:binding name="healthcheck-1.0.0SOAP" type="tns:HealthCheck100PortType">
  <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="doHealthCheck">
      <soap:operation soapAction="http://www.xyz.ch/healthcheck-1.0.0/doHealthCheck"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T22:57:39.993

如果我把它放在（[http://somedomain.com/WebServiceProxyName/operation1](http://somedomain.com/WebServiceProxyName/operation1)`operation1` ）的末尾，我也会遇到同样的问题，但是发布一个带有另一个操作（operation2,3,4,5...）的构造的 SOAP 消息体作品！！！`WS URI`

**样本**

```
POST http://somedomain.com/..../operation1 HTTP/1.1
....
....
<soap:Envelope ...>
<soap:Header/>
  <soap:Body>
     <ws:operation2>

     </ws:operation2>
  </soap:Body>
</soap:Envelope> 
```

# c - Duplicated memory management symbols in libc.so and ld-linux.so

> ID：14867024
> 
> 赞同：6
> 
> 时间：2013-02-14T02:49:27.337
> 
> 标签：c, linux, linker, gdb, glibc

## Some preamble

It seems that malloc, calloc, realloc and free are all replicated in `ld-linux.so` and `libc.so` . As I understand it, that is done by the dynamic loader to take care of memory management within `ld-linux.so` before `libc.so` is loaded and makes its memory management functions aviable. However, I have some questions about those duplicated symbols:

Here's a very simple C program calling malloc and exiting:

```
#include <stdlib.h>

int main()
{
  void *p = malloc(8);
  return 0;
} 
```

I compile it with gcc in an x86_64 linux box and make some debugging with gdb:

```
$ gcc -g -o main main.c
$ gdb ./main
(gdb) start
Temporary breakpoint 1 at 0x4004f8
Starting program: main 

Temporary breakpoint 1, 0x00000000004004f8 in main ()
(gdb) info symbol malloc
malloc in section .text of /lib64/ld-linux-x86-64.so.2
(gdb) b malloc
Breakpoint 2 at 0x7ffff7df0930: malloc. (2 locations)
(gdb) info breakpoints
Num     Type           Disp Enb Address            What
2       breakpoint     keep y   <MULTIPLE>         
2.1                         y     0x00007ffff7df0930 in malloc at dl-minimal.c:95
2.2                         y     0x00007ffff7a9f9d0 in __GI___libc_malloc at malloc.c:2910 
```

nm in libc.so and ld.so reveals the following:

```
$ nm -D /lib/x86_64-linux-gnu/libc.so.6 | grep malloc
00000000000829d0 T __libc_malloc
00000000003b6700 V __malloc_hook
00000000003b8b00 V __malloc_initialize_hook
00000000000829d0 T malloc
0000000000082db0 W malloc_get_state
00000000000847c0 T malloc_info
0000000000082480 W malloc_set_state
00000000000844f0 W malloc_stats
0000000000084160 W malloc_trim
00000000000844b0 W malloc_usable_size

$ nm -D /lib64/ld-linux-x86-64.so.2 | grep malloc
0000000000016930 W malloc 
```

## Questions

1.  `malloc` is replicated in `libc.so` and `ld-linux.so` but in the case of `ld-linux.so` it is a weak symbol, so they should both resolve to the same address. Additionally, as I understand it, the dynamic loader's symbol resolution table is global and resolves only one address per symbol (correct me if I'm wrong).

    However, gdb clearly shows otherwise (two different addresses). Why is that?

2.  gdb effectively breaks at two different addresses when typing `break malloc` but only shows information of a symbol in ld.so when typing `info symbol malloc`. Why is that?

3.  Although I am breaking at malloc and `libc.so` defines a `malloc` symbol of its own (as shown by nm), gdb breaks at symbol `__GI___libc_malloc` . Why is that?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:21:33.717

1.  我怀疑 GDB 只是在它可以找到的所有符号上放置断点`malloc`，“以防万一”可以这么说。GDB 使用它的内部符号表，而不是动态加载器的。这样，如果您有调试符号，它可以在未导出的符号上中断。命令反馈只列出一个地址，可能是为了在匹配太多的情况下减少噪音。它仍然提到“2 个位置”，因此您可以自己检查它`info breakpoints`。
2.  我的猜测是`info symbol`实施者只是没有预见到这种情况，所以它只打印第一场比赛
3.  `__GI___libc_malloc`是`malloc`libc.so内部的实际实现的名称。由于您还获得了 source line info `"at malloc.c:2910"`，我猜它来自调试符号，而不是来自 ELF 的符号表。同样，一个位置可以有多个名称（参见`__libc_malloc`符号列表），因此 GDB 只选择一个。

顺便说一句，当 libc.so 被加载时`malloc`，ld.so 的 GOT 中的 ' 指针确实被 libc 的`malloc`地址替换（最初它指向内部实现）。因此，当到达进程入口点时，您确实会获得相同的地址，并且`malloc`不再使用 ld.so 的地址。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T03:35:20.073

`ld.so`不是库，它是动态链接器（通过在程序启动时将可执行文件与共享库链接，隐式调用以在内存中创建可运行映像）。

# macos - Mac OS X 中的麦克风和扬声器是哪些 /dev/...（设备）？

> ID：14867033
> 
> 赞同：10
> 
> 时间：2013-02-14T02:50:43.380
> 
> 标签：macos, audio, device, capture, microphone

我有一台 MacBook Alluminium，我想以 RAW 格式捕获麦克风并以**标准**方式通过扬声器输出 RAW 音频，即使用带有**标准**Unix 命令的终端并使用**标准**/dev/??? 设备。

所以，问题/ s：

*   哪些设备是麦克风和扬声器？两者都应该以 /dev/... 开头

*   如果它们是内置的还是外部的，它们有什么不同吗？哪个？（他们也必须从 /dev/... 开始）

如果您还知道用于打印麦克风输入和为扬声器编写输出的 unix 命令，那将是加分项！:)（我想从麦克风中捕获它，修改它-我知道了-，然后将修改后的内容发送到扬声器）

如果您还知道 OSX 的组装说明，那就完美了！**但主要问题是项目符号列表中的哪些问题。**

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T03:14:30.163

他们都没有。并非所有设备都有`/dev`Mac OS X 上的节点，音频设备也不在其中。我不知道仅使用“标准”终端命令来访问音频设备。[如果你安装了sox](http://sox.sourceforge.net/)就可以使用它，但它没有随 Mac OS X 一起提供。

在 Mac OS X 上访问音频设备的主要支持 API 是[Core Audio](https://developer.apple.com/library/mac/#documentation/MusicAudio/Conceptual/CoreAudioOverview/Introduction/Introduction.html)。第三方库（例如[libao](http://www.xiph.org/ao/)）也可用，它们可以向 Core Audio 公开一个更简单、独立于平台的接口。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-14T04:18:17.330

`/dev`正如@duskwuff 所说，尝试使用OS X 上的设备访问声音设备可能不会有任何乐趣。

如果，正如您在上面的评论中所说，您的目标是跨平台可移植性，那么[PortAudio](http://www.portaudio.com)可能是一个解决方案。

从他们的主页：

> PortAudio 是一个免费、跨平台、开源的音频 I/O 库。它让您可以使用“C”或 C++ 编写简单的音频程序，这些程序可以在许多平台上编译和运行，包括 Windows、Macintosh OS X 和 Unix (OSS/ALSA)。它旨在促进不同平台上的开发者之间的音频软件交流。许多应用程序将 PortAudio 用于音频 I/O。

在 OS XI 上他们使用 Core Audio，在 Linux 上他们使用 OSS/ALSA。

# c++ - Sublime color highlighter breaks after raw string literal

> ID：14867037
> 
> 赞同：1
> 
> 时间：2013-02-14T02:51:20.990
> 
> 标签：c++, c++11, sublimetext2

I'm trying out some C++11 features in sublime 2\. I notice the the highlighter is broken after a raw string literal (probably because the unmatching quotations):

```
 string ss = R"STR(a\
        b\ test()"
        )STR";
    cout << ss <<endl; 
```

Is there a setting or plugin to make it smarter?

# java - How to create a KeyEvent

> ID：14867040
> 
> 赞同：3
> 
> 时间：2013-02-14T02:51:47.390
> 
> 标签：java, jtextfield, keylistener, keyevent

When i create the `KeyListener`, it requires the following fields:

```
public void keyPressed(KeyEvent e) 
{

}
public void keyReleased(KeyEvent e) 
{

}
public void keyTyped(KeyEvent e) 
{

} 
```

When i put `System.out.println(e)` into the `keyPressed` method, though, it returns this when i press the enter key:

```
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=10,keyText=?,keyChar=?,keyLocation=KEY_LOCATION_STANDARD,rawCode=0,primaryLevelUnicode=0,scancode=0] on javax.swing.JButton[,1,1,100x100,alignmentX=0.0,alignmentY=0.5,border=com.apple.laf.AquaButtonBorder$Dynamic@13b33a0e,flags=288,maximumSize=,minimumSize=,preferredSize=,defaultIcon=,disabledIcon=,disabledSelectedIcon=,margin=javax.swing.plaf.InsetsUIResource[top=0,left=2,bottom=0,right=2],paintBorder=true,paintFocus=true,pressedIcon=,rolloverEnabled=false,rolloverIcon=,rolloverSelectedIcon=,selectedIcon=,text=HI,defaultCapable=true] 
```

This is obviously not a KeyEvent, so I cannot use it to call the `keyPressed(KeyEvent e)`. What I want to be able to do is simulate the pressing of a key, specifically the enter key, in a way that would activate the `keyListener` and would output that text into a JTextArea.

Note: I looked at the accepted answer for [How can I perfectly simulate KeyEvents?](https://stackoverflow.com/questions/14572270/how-can-i-perfectly-simulate-keyevents), and understood little of how it actually works, and i want code i understand. I also looked here [How to simulate keyboard presses in java?](https://stackoverflow.com/questions/7745959/how-to-simulate-keyboard-presses-in-java), but not i could not get the robot to work; nothing happened when a key was supposed to be pressed.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T02:56:19.700

e 是按键事件。

如果你想查看 e 值，那么你可以试试这个

```
System.out.println(e.getKeyChar()); 
```

创建 KeyEvent ：

```
KeyEvent e = new KeyEvent(Component source, int id, long when, int modifiers, int keyCode, char keyChar, int keyLocation); 
```

示例（不知道这是否是正确的方法，但它会产生正确的输出）：

```
Button a = new Button("click");
    KeyEvent e;
    e = new KeyEvent(a, 1, 20, 1, 10, 'a');
    System.out.println(""+e.getKeyChar());
    System.out.println(""+e.getKeyCode()); 
```

这是所有类型的 KeyEvent 参数

```
java.​awt.​event.​KeyEvent
@Deprecated public KeyEvent(Component source, int id, long when, int modifiers, int keyCode)
Deprecated. as of JDK1.1 
```

===

```
java.​awt.​event.​KeyEvent
public KeyEvent(Component source, int id, long when, int modifiers, int keyCode, char keyChar)
Constructs a KeyEvent object.
Note that passing in an invalid id results in unspecified behavior. This method throws an IllegalArgumentException if source is null.
Parameters:
source - the Component that originated the event id - an integer identifying the type of event when - a long integer that specifies the time the event occurred modifiers - the modifier keys down during event (shift, ctrl, alt, meta) Either extended _DOWN_MASK or old _MASK modifiers should be used, but both models should not be mixed in one event. Use of the extended modifiers is preferred. keyCode - the integer code for an actual key, or VK_UNDEFINED (for a key-typed event) keyChar - the Unicode character generated by this event, or CHAR_UNDEFINED (for key-pressed and key-released events which do not map to a valid Unicode character) 
Throws:
IllegalArgumentException - if id is KEY_TYPED and keyChar is CHAR_UNDEFINED; or if id is KEY_TYPED and keyCode is not VK_UNDEFINED IllegalArgumentException - if source is null 
```

===

```
java.​awt.​event.​KeyEvent
public KeyEvent(Component source, int id, long when, int modifiers, int keyCode, char keyChar, int keyLocation) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T03:23:14.197

使用机器人时，首先获取要添加 KeyListener 的组件的焦点。然后你可以使用机器人来模拟按键。作为替代方案，您可以在添加了侦听器的组件上使用 dispatchEvent。

```
KeyEvent key = new KeyEvent(inputField, KeyEvent.KEY_TYPED, System.currentTimeMillis(), 0, KeyEvent.VK_UNDEFINED, 'Z');
inputField.dispatchEvent(key); 
```

前提是您有：

```
JInputField InputField = new JInputField(); 
```

您也可以如上所述创建 KeyEvent 并将其传递给侦听器的 keyTyped 方法。至于keyPrssed，你也可以这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T03:19:24.867

You state:

> I believe it would make part of my code more efficient. When certain conditions are met (I am doing hang man, and this is a "cheat" that is a joke with my teacher) the computer will press the correct keys to "guess" the answer. and then there is the simple, i wonder if i can? part of it. that got started when i saw JButton.doClick() and wondered if it had one for JTextFields

As I suspected, you are going about this all wrong. If you want your program to press keys for you, there's no need to create KeyEvents. If the "keys" are JButtons, then simply calling `doClick()` on the button will do. If you are desiring to fill text into a JTextField, then simply setting the text is all that is needed. i.e.,

For instance if you called the bit of text below in a Swing Timer (to slow it down so that you see the text being added:

```
String myText = myTextField.getText();
myText += nextBitOfText;
myTextField.setText(myText); 
```

You would likely get the effect you desire.

For example:

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Random;

import javax.swing.*;

@SuppressWarnings("serial")
public class AddTextToTextField extends JPanel {
   public static final String[] POSSIBLE_TEXTS = {"Monday", "Tuesday", "Wednesday", "Thursday", "Friday"};
   public static final int TIMER_DELAY = 500;
   private JTextField myTextField = new JTextField(20);
   private JButton myButton = new JButton(new BtnAction("Press Me"));
   private Random random = new Random();

   public AddTextToTextField() {
      add(myTextField);
      add(myButton);
   }

   private class BtnAction extends AbstractAction {
      public BtnAction(String text) {
         super(text);
      }

      @Override
      public void actionPerformed(ActionEvent arg0) {
         setEnabled(false);
         myTextField.setText("");
         myTextField.setFocusable(false);
         String randomText = POSSIBLE_TEXTS[random.nextInt(POSSIBLE_TEXTS.length)];
         new Timer(TIMER_DELAY, new TimerAction(this, randomText)).start();
      }
   }

   private class TimerAction implements ActionListener {
      private AbstractAction btnAction;
      private String text;
      private int count = 0;

      public TimerAction(AbstractAction btnAction, String text) {
         this.btnAction = btnAction;
         this.text = text;
      }

      @Override
      public void actionPerformed(ActionEvent e) {
         if (count <= text.length()) {
            myTextField.setText(text.substring(0, count));
            count++;
         } else {
            ((Timer)e.getSource()).stop();
            btnAction.setEnabled(true);
            myTextField.setFocusable(true);
         }
      }
   }

   private static void createAndShowGui() {
      AddTextToTextField mainPanel = new AddTextToTextField();

      JFrame frame = new JFrame("AddTextToTextField");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T02:58:23.270

您可以使用它来调度虚拟事件：

```
textArea.dispatchEvent(new KeyEvent(jFrame,
        KeyEvent.KEY_TYPED, System.currentTimeMillis(),
        0,
        KeyEvent.VK_ENTER)); 
```

试试看，应该可以，但那是凭记忆的

# mahout - Errors in Training while running Mahout Naive Byes Algorithm on EMR

> ID：14867042
> 
> 赞同：1
> 
> 时间：2013-02-14T02:52:01.040
> 
> 标签：mahout

I tried to run naive byes algorithm using 1 master(small) and 1 slave(small) node on EMR. I successfully completed steps using seqdirectory, seq2sparse and split commands. But during training phase I got errors. I used following command to train the algorithm:

```
./elastic-mapreduce --jar s3n://<bucket name>/mahout/mahout-examples-0.7-job.jar \
    --main-class org.apache.mahout.driver.MahoutDriver \
    --logs \
    --arg trainnb \
    --arg -i --arg /<folder name>/mahout/review-train-vectors/ --arg -el\
    --arg -o --arg /<folder name>/mahout/model/ \
    --arg -li --arg /<folder name>/mahout/labelindex/ \
    --arg -ow \
    -j <job-name> 
```

Here's the log of the job step:

```
java.lang.IllegalArgumentException
at com.google.common.base.Preconditions.checkArgument(Preconditions.java:76)
at org.apache.mahout.classifier.naivebayes.training.WeightsMapper.setup(WeightsMapper.java:42)
at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:142)
at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:771)
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:375)
at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:396)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1132)
at org.apache.hadoop.mapred.Child.main(Child.java:249)

attempt_201302130846_0035_m_000000_0: SLF4J: Class path contains multiple SLF4J bindings.
attempt_201302130846_0035_m_000000_0: SLF4J: Found binding in [jar:file:/home/hadoop  /lib/slf4j-log4j12-1.6.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]
attempt_201302130846_0035_m_000000_0: SLF4J: Found binding in [jar:file:/mnt/var/lib/hadoop/mapred/taskTracker/hadoop/jobcache/job_201302130846_0035/jars/job.jar!/org/slf4j/impl/StaticLoggerBinder.class]
attempt_201302130846_0035_m_000000_0: SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
java.lang.IllegalArgumentException
at com.google.common.base.Preconditions.checkArgument(Preconditions.java:76)
at org.apache.mahout.classifier.naivebayes.training.WeightsMapper.setup(WeightsMapper.java:42)
at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:142)
at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:771)
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:375)
at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:396)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1132)
at org.apache.hadoop.mapred.Child.main(Child.java:249)

attempt_201302130846_0035_m_000000_1: SLF4J: Class path contains multiple SLF4J bindings.
attempt_201302130846_0035_m_000000_1: SLF4J: Found binding in [jar:file:/home/hadoop  /lib/slf4j-log4j12-1.6.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]
attempt_201302130846_0035_m_000000_1: SLF4J: Found binding in [jar:file:/mnt/var/lib/hadoop/mapred/taskTracker/hadoop/jobcache/job_201302130846_0035/jars/job.jar!/org/slf4j/impl/StaticLoggerBinder.class]
attempt_201302130846_0035_m_000000_1: SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
java.lang.IllegalArgumentException
at com.google.common.base.Preconditions.checkArgument(Preconditions.java:76)
at org.apache.mahout.classifier.naivebayes.training.WeightsMapper.setup(WeightsMapper.java:42)
at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:142)
at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:771)
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:375)
at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:396)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1132)
at org.apache.hadoop.mapred.Child.main(Child.java:249)

attempt_201302130846_0035_m_000000_2: SLF4J: Class path contains multiple SLF4J bindings.
attempt_201302130846_0035_m_000000_2: SLF4J: Found binding in [jar:file:/home/hadoop/lib/slf4j-log4j12-1.6.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]
attempt_201302130846_0035_m_000000_2: SLF4J: Found binding in [jar:file:/mnt/var/lib/hadoop/mapred/taskTracker/hadoop/jobcache/job_201302130846_0035/jars/job.jar!/org/slf4j/impl/StaticLoggerBinder.class]
attempt_201302130846_0035_m_000000_2: SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation. 
```

Anyone tried this thing before? Please help me to resolve this issue. I also have same issue when I run this algorithm using hadoop pseudo-distributed mode on my local system. This algorithm works only with MAHOUT_LOCAL=True environment variable.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:57:37.190

命令的参数有问题。看起来您复制和粘贴命令而不根据您的环境进行调整：

```
 --jar s3n://<bucket name>/mahout/mahout-examples-0.7-job.jar 
```

什么是存储桶名称？

```
 --arg -i --arg /<folder name>/mahout/review-train-vectors/ 
```

`<folder name>`看起来像一个变量，您应该根据自己的情况进行更改

```
-j <job-name> 
```

同类型的错误。看来您不是经验丰富的 linux 用户，请注意`\`应跳过每行末尾的字符（很可能在您执行命令的网页上有。该页面可读性更好（您确定它是一个命令-多行命令不多）:)）

# c# - calling a managed c++ dll function from c#

> ID：14867045
> 
> 赞同：-1
> 
> 时间：2013-02-14T02:52:27.497
> 
> 标签：c#, c++

Here is my c# main

```
class Program
{
    static void Main(string[] args)
    {
        int i;
        unsafe
        {
        hdf_call_vars_t ret_vals;

        //IntPtr a ;
        //Marshal.PtrToStructure(a,ret_vals);

        ret_vals.fetch_nav = 1;
        string str = "C:\\DoAT\\a.h5";
        byte[] bytes = Encoding.ASCII.GetBytes(str);

            fixed (byte* p = bytes)
            {
                sbyte* sp = (sbyte*)p;
                //SP is now what you want
                DoAT.atrClass1 cl = new DoAT.atrClass1();

                cl.read_hdf5_file(sp,  ret_vals); 
```

where the struct in c# is

```
[StructLayout(LayoutKind.Sequential, Pack = 1)]
/* Returned values from read_hdf5_file */
unsafe struct hdf_call_vars_t {
    public channel_vars p_vars; 
    public channel_vars s_vars; 
    FILE_VERSION file_vers; /* Set in top level sub. used in lower */
    public int fetch_nav; /* Boolean flag */
    public s_line_header_t * n_addr; /* malloc'd address of n data */
    public UInt32 n_lines;
    csdt_file_header_t hdr; 
}; 
```

this does not compile, says 'cl' needs as input a pointer to the hdf_call_vars_t.

In my c++ managed dll I have

```
int atrClass1::read_hdf5_file
    (const char * file_path, /* Path to  file */
     hdf_call_vars_t & ret_vals) 
```

and also

```
struct hdf_call_vars {
    struct channel_vars p_vars; 
    struct channel_vars s_vars; 
    enum FILE_VERSION file_vers; /* Set in top level sub. used in lower */
    int fetch_n;     
    s_line_header_t * n_addr; /* malloc'd address of  data */
    unsigned int n_lines;
    csdt_file_header_t hdr; 
};
typedef struct hdf_call_vars hdf_call_vars_t; 
```

Why does c# think a pointer needs to be sent into C++? If it is so, how do I make a pointer of the struct in the c# world?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:51:15.277

如果您的 C++ DLL 是托管的，为什么不将 atrClass1 标记为托管并避免所有 P/Invoke 混乱？

```
public ref class atrClass1
{
public:
    int read_hdf5_file(String^ file_path, hdf_call_vars^% ret_vals)
    {
        ...
    }
}; 
```

然后你可以直接从 C# 中使用它。

当然，您还需要 hdf_call_vars 的托管版本。您还应该使代码更加面向对象（避免使用当前 hdf_call_vars 等 POD 类型）。

# log4j - How to truncate org.jasig.cas.authentication.handler.BadCredentialsAuthenticationException Stack trace in log file?

> ID：14867046
> 
> 赞同：0
> 
> 时间：2013-02-14T02:52:36.483
> 
> 标签：log4j, cas

I'm using CAS for single signon solution, My log(log4j version 1.2.15) file completely fills with the Exception(org.jasig.cas.authentication.handler.BadCredentialsAuthenticationException) Stack trace when User enters invalid login credentials.

Is there a solution to trim the Stack trace in CAS or Java?

I can't use log4j EnhancePatternLayout to achieve this as it requires log4j version 1.2.16

Any suggestions around this problem would be appreciated.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:32:50.383

问题是 CAS 正在将异常对象传递给 Log4j，所以我确实在我的覆盖类中注释了该行。BindLdapAuthenticationHandler.java

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T03:07:35.863

我没有用过CAS。但是，我过去解决类似问题的方法是抑制来自违规类的日志消息。例如，如果您使用的是 log4j.properties 文件，请插入以下行：

```
log4j.logger.com.jasig.cas.WhateverClassLogsTheException=OFF 
```

请注意，您需要抑制来自引发异常的类的消息，而不是异常类本身。此外，您还可以使用 FATAL 或其他值来确保仅记录处于或高于给定级别的日志消息。有关更多信息，请参阅[Log4J 文档](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PropertyConfigurator.html)。

请注意，这将抑制来自该类的*所有*消息，而不仅仅是产生该异常的特定日志消息。

# php - Using 'post_type' => 'product' in woocommerce

> ID：14867047
> 
> 赞同：0
> 
> 时间：2013-02-14T02:52:36.440
> 
> 标签：php, wordpress, woocommerce

i have a woocomemce site and the products have a "manufacturer" attribute.

when i get the terms for a single product :

```
 $terms= get_the_terms($product->id,"pa_manufacturer"); 
```

i get :

```
Array ( [230] => stdClass Object ( [term_id] => 230 [name] => Dadawan [slug] => dadawan       [term_group] => 0 [term_taxonomy_id] => 230 [taxonomy] => pa_manufacturer [description] => [parent] => 0 [count] => 4 [object_id] => 2905 ) ) 
```

Can i do a loop WP_query only with that term_id to get products with the same manufacturer? How can i get only the products with that specific term_id?

here is my test, but not working...

```
$args = array(
'post_type' => 'product',
'term_id'       => 230 ,
'posts_per_page' => 2,
'orderby' => $orderby   
);

$loop = new WP_Query( $args );

// Do stuff here to display your products 
```

Any help appreciated, thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T00:42:57.290

您的问题出在您的查询中。Term_id 不是 WP_Query 的可用参数。这是可用参数的列表。我从[http://phporlando.com/wp_query-argument-list/获得了列表](http://phporlando.com/wp_query-argument-list/)

```
附件
附件ID
作者
作者姓名
猫
类别__和
类别__in
类别__not_in
分类名称
评论弹出窗口
天
错误
喂养
小时
分钟
月数
姓名
命令
订购
page_id
页
分页的
页面名称
发帖
post__not_in
post_status
post_type
预习
机器人
句子
第二
静止的
子帖
subpost_id
标记和
标签__in
标签__not_in
tag_id
tag_slug__and
tag_slug__in
标签
分类法 -（3.1 之前）
结核病
术语 -（3.1 之前）
w
带评论
没有评论
年

WP 3.1 之前

元密钥
元值

自 WP 3.1 起

字段
元查询
tax_query

```

# jquery - jquery ajax form validation

> ID：14867051
> 
> 赞同：0
> 
> 时间：2013-02-14T02:53:01.197
> 
> 标签：jquery, ajax, jquery-validate

I have a form where I first do a validation, then submit it via ajax, where some of the fields are checked, such as a user name, which might already exist in the database. I want to display either of these error conditions right after the element in question. The form elements look like this:

```
 <span class="inputRow">
    <span class="formLabel">
        <label for="user_name">User Name</label>
    </span>
    <span class="formInput">
        <input id="user_name" name="user_name" class="inputText required" title="User Name" tabindex="3" type="text" value="<?= $user_name ?>" >
        <span class="formError"><span id="user_msg"></span></span>
    </span>
  </span> 
```

I have a typical validation / errorPlacement code like this:

```
 errorPlacement: function(error, element) 
  {
    if (element.attr("name") == "user_name" )
        error.insertBefore("#user_msg");
    else
        error.insertAfter(element);
  },
}); 
```

To submit the form, I have a submit handler that looks like this:

```
submitHandler: function(form) {

  $.ajax({
    type:'POST', 
    url: 'add_user.php', 
    data:$('#reg_form').serialize(), 
    success: function(response) {
      if (response.status == "error") {
        if (!response.hasOwnProperty('user_name'))
          $("#user_msg").text("");
        else if (response.user_name.length > 0)
          $("#user_msg").text(response.user_name);
      }
    }
  });
}, 
```

The response returned is a JSON array, and I can get the error message out just fine. This all works great the first time I submit the form. If I have a duplicate user name, that is displayed properly, or if no user name is input, that is displayed properly too. The problem comes when I submit the form and get a response about a duplicate user name on file. Then if I clear the user_name field and try to submit the form again, the duplicate user name message stays there, and the message saying that a user name is required is displayed also.

To me, it seems as there is a conflict in how these are displayed because the errorPlacement function uses error.insertBefore("#user_msg"), but the return from ajax function uses $("#user_msg").text(). So the insertBefore() does not remove the previous text() values, but I haven't found any other way to display the text from errorPlacement. Can we just get the text value from the error object? If so, how? Or is there a better way to make both of these work more in the same way?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:26:33.820

我没有得到你的问题到底是什么。

如果您在发生错误时显示这样的错误时遇到问题并且您修复了它，错误仍然存​​在，这是因为您根本没有清空错误放置。在您发送新请求之前，解决方案就在这里，让您的错误位置为空。

您可以使用 jquery Dialog 以替代方法显示错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T04:03:56.940

> **引用：** “我们可以从错误对象中获取文本值吗？如果可以，如何？”

`error`您可以通过以下方式从对象中获取文本：

```
error.text() 
```

根据您使用它的方式，您可能需要像这样格式化它：

```
$(error).text() 
```

# c# - Control click through transparency c#

> ID：14867053
> 
> 赞同：0
> 
> 时间：2013-02-14T02:53:20.823
> 
> 标签：c#, wpf, transparent

I am making a form that is transparent. However, I would like to sometimes be able to click "through" the form. What I mean is that I need to be able to control whether clicks go through the form or not. I am using Windows 8, which I heard makes a difference in this case as well. How can I do this?

Thanks!

EDIT: Refining my question: I am making a form which is transparent and maximized. When a user clicks, the form catches the click then moves it from the previous location which was clicked, and clicks "through" the form at the new location. I've got most of it working in C# and WPF, but I cannot simulate clicks "through" the form. How would I do this?

# vim - 安装 spf13-vim 后出现的问题

> ID：14867057
> 
> 赞同：1
> 
> 时间：2013-02-14T02:53:41.323
> 
> 标签：vim

我刚刚安装了 spf13-vim。这是一个带有精选插件和资源的 vim 发行版，我对其中的大部分内容都非常满意。尽管如此，在我安装之后，每当我从命令行运行 vim 时，我都会得到`CSApprox needs gui support - not loading. See :help |csapprox-+gui| for possible workarounds.`

进入 vim 后，键入`:help |csapprox-+gui|`ex 命令不起作用。我被困住了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T02:54:58.127

我想到了。我不得不打字`:help csapprox-+gui`。没有管道...

# matlab - 二值图像中的主方向

> ID：14867063
> 
> 赞同：0
> 
> 时间：2013-02-14T02:54:03.020
> 
> 标签：matlab, angle, pca

如图所示，有一个二进制多边形图像。我想找到图像中相对于 X 轴的主要方向。我用蓝线显示了主要方向和 X 轴。这可以使用 PCA 完成，但我的问题是这样一个小矩形将有大约 1000 个像素，我必须找到大约 100 个多边形的主要方向（多边形可以是任意形状）。

我想到的一种方法是：将该矩形投影到一条直线上，该直线以 5 度的间隔（比如）度数定向。具有最大方差的投影是所需的投影轴，因此这是所需的角度。但这也属于贪婪的方法，因此需要时间。有更聪明的方法吗？

此外，如果有人可以解释使用 PCA 执行此操作的确切程序，那将很有帮助。我知道步骤： 1.取协方差矩阵。2\. 获取对应于最大特征值的顶部特征向量 -> 这将是主要方向。

但是我对以下我经常在各处阅读的声明感到困惑：

列向量：`[0.5 0.5]`是第一个主成分，它给出了最大方差的方向。所以我可以准确计算我应该旋转数据的角度，使其平行于 X 轴。

![在此处输入图像描述](../Images/72fbc51897c22d04eed788c234ccdf5e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T04:58:00.763

计算与最高特征值相关的特征向量。称之为 v. Normalize v. v = v/norm(v);

计算它与水平方向之间的角度：angle=acos(sum(v.*[1,0]))

旋转 -angle，变换矩阵 T = [cos(-angle) -sin(-angle); sin(-angle) cos(-angle)]，将所有点乘以该矩阵。对所有多边形都这样做。

# testing - 如何测试 MVVMCross 上的错误消息？

> ID：14867065
> 
> 赞同：0
> 
> 时间：2013-02-14T02:54:27.160
> 
> 标签：testing, message, mvvmcross

如何测试 MVVMCross 上的错误消息？

我在可移植类库项目的这个示例中使用 ReportError 方法：http: [//slodge.blogspot.com.br/2012/05/one-pattern-for-error-handling-in.html](http://slodge.blogspot.com.br/2012/05/one-pattern-for-error-handling-in.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T07:31:08.083

您实际上要测试什么？

如果您希望对侦听和重新发布错误的“集线器”进行单元测试，那么您应该能够轻松地做到这一点 - 只需创建一个 nunit 测试和一个或多个模拟订阅者 - 然后您可以测试发送一条或多条消息。

如果您正在寻找测试您的某些服务或查看模型以检查它们是否正确报告错误，则使用模拟错误条件的模拟为它们创建单元测试 - 在测试中，断言错误已正确报告。

如果您只是想在开发过程中手动触发 ui，那么要么找到某种方法来可靠地触发错误（例如，提供不正确的密码或将手机切换到飞行模式），要么考虑使用按钮向您的应用程序添加调试 ui触发模拟错误。

如果您正在寻找集成或验收级别测试，那么要么编写手动测试步骤来触发错误，要么考虑使用自动化解决方案，如 Frank、Calabash、Telerik ui 测试或出色的 Windows Phone 测试框架 ( [http://m.youtube.com ) /watch?v=2JkJfHZDd2g](http://m.youtube.com/watch?v=2JkJfHZDd2g) ) - 虽然我可能对最后一个有偏见

* * *

作为对错误报告机制本身的更新，我现在已将我的一些应用程序移至用于此类报告的更通用的信使插件。但其他应用程序仍然使用旧机制。

# iphone - 什么可能会覆盖 viewDidLoad 中的 UIButton 属性？

> ID：14867068
> 
> 赞同：0
> 
> 时间：2013-02-14T02:55:02.697
> 
> 标签：iphone, ios, objective-c, uibutton, viewdidload

`UIButton`我在我的`viewDidLoad`方法中加载了一些默认值并设置了自定义项。默认加载正常。但是，`UIButtons`他们没有得到他们的定制。

当我将完全相同的`UIButton`代码放在操作按钮中以触发自定义时 - 效果很好。我在 .xib 中将按钮更改为“自定义”。

我觉得发生了一些不正常的事情，这就是为什么按钮没有随他们的模组一起启动的原因。

```
- (void)viewDidLoad {

    lifeTotal.text = [[NSUserDefaults standardUserDefaults] objectForKey:@"bankKey"];
    floatTot = [[NSUserDefaults standardUserDefaults] floatForKey:@"floatKey"];
    dollaInt = [[NSUserDefaults standardUserDefaults] integerForKey:@"intKey"];
    hourlyRate.text = [[NSUserDefaults standardUserDefaults] objectForKey:@"rateKey"];
    rate = [[NSUserDefaults standardUserDefaults] integerForKey:@"rateInt"];

    NSArray *buttons = [NSArray arrayWithObjects: self.start, self.stop, self.fbButton, self.clearLifeTotal,nil];

    for(UIButton *btn in buttons)
    {
        // Set the button Text Color
        [btn setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
        [btn setTitleColor:[UIColor redColor] forState:UIControlStateHighlighted];

        // Set default backgrond color
        [btn setBackgroundColor:[UIColor blackColor]];

        // Round button corners
        CALayer *btnLayer = [btn layer];
        [btnLayer setMasksToBounds:YES];
        [btnLayer setCornerRadius:5.0f];

        // Apply a 1 pixel, black border around Buy Button
        [btnLayer setBorderWidth:1.0f];
        [btnLayer setBorderColor:[[UIColor blackColor] CGColor]];

    }
    [super viewDidLoad];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T20:32:07.993

很抱歉，快速查看`UIButton.h`显示 viewDidLoad 未在 UIButton 上公开。因此，它没有被调用。

您正在寻找`-(id)initWithFrame:(CGRect)frame`或`-(id)initWithCoder:(NSCoder *)aDecoder`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T03:00:17.823

您是否尝试将 [super viewDidLoad] 放在方法的顶部，在您的代码之前？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T04:08:59.827

尝试用这个替换你的 for 循环并检查：

```
 for (UIButton *btn in self.view.subviews)
    {
        if (btn == self.start || btn == self.stop || btn == self.fbButton || btn == self.clearLifeTotal)
        {
            // Set the button Text Color
            [btn setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
            [btn setTitleColor:[UIColor redColor] forState:UIControlStateHighlighted];

            // Set default backgrond color
            [btn setBackgroundColor:[UIColor blackColor]];

            // Round button corners
            CALayer *btnLayer = [btn layer];
            [btnLayer setMasksToBounds:YES];
            [btnLayer setCornerRadius:5.0f];

            // Apply a 1 pixel, black border around Buy Button
            [btnLayer setBorderWidth:1.0f];
            [btnLayer setBorderColor:[[UIColor blackColor] CGColor]];
        }
    } 
```

# php - PHP：__call 无法正常工作

> ID：14867069
> 
> 赞同：0
> 
> 时间：2013-02-14T02:55:03.253
> 
> 标签：php, wordpress, callback, naming, magic-methods

我`API_Widgets`在使用魔法`__call`函数创建在 WordPress 中调用的类时遇到问题。如果我简单地将文件重命名为`derp.php`并将类重命名为，`API_Derp`那么它可以正常工作。

下面的例子已经去掉了对这个问题不重要的所有东西（所以如果除了第三个代码块中指定的特定致命错误之外还有任何错误，请忽略它）。

请记住，我知道`core.php`or`API`类的`__call`工作，因为重命名`widgets.php`或调用另一个类就可以了。

核心.php：

```
class API {

    function __call( $method, $args ) {

        $rmethod = "API_{$method}";
        if ( !class_exists( $rmethod ) ) {

            $lmethod = strtolower( $method );
            require_once( "{$lmethod}.php" );

        }

        return new $rmethod( $args );

    }

} 
```

小部件.php：

```
class API_Widgets {

    private $widgets = array();

    function Add( $widgets ) {

        if ( is_array( $widgets ) ) {

            foreach ( $widgets as $widget ) {

                if ( !in_array( $widget, $this->widgets ) )
                    $this->widgets[] = $widget;

            }

        } else
            $this->widgets[] = $widgets;

    }

} 
```

api.php：

```
$api = new API();
$widgets = $api->Widgets(); // Fatal error: Class 'API_Widgets' not found in /home4/goldencr/public_html/wp-content/plugins/minecraft-api/api/core.php on line 25
//$widgets->Add( 'some_widget' ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:12:53.580

从评论扩展：

虽然没有暗示您的问题，但似乎您实际上可能没有包含`widgets.php`. 尝试使用绝对路径来解决这个问题：

```
require_once( __DIR__.DIRECTORY_SEPARATOR.$lmethod.".php" ); 
```

# maven - 如何以原子方式运行 mvn 测试（无需重建源代码）？

> ID：14867073
> 
> 赞同：44
> 
> 时间：2013-02-14T02:56:18.357
> 
> 标签：maven, testing, lifecycle

我想以单元测试开始和结束运行一个 Maven 项目生命周期。

如何跳过重新编译和重新解析依赖项而只运行测试阶段？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-14T14:31:21.007

如果您通过调用一个阶段来启动 Maven，它将执行所有生命周期阶段，直到您调用的那个阶段。例如，当调用

```
mvn test 
```

测试生命周期阶段之前的所有阶段也将执行：项目将被验证，源和资源将生成和处理，源将被编译，测试源和资源也会发生同样的情况，最后将运行单元测试。

但是您也可以调用绑定到生命周期阶段的插件目标。在测试阶段的情况下，绑定目标是surefire的测试魔力。所以你可以打电话

```
mvn surefire:test 
```

并且不会执行其他生命周期阶段。[您可以在此处](http://books.sonatype.com/mvnref-book/reference/lifecycle-sect-package-specific.html)根据包类型找到绑定到每个阶段的目标。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-14T14:35:21.993

您可以运行：

```
mvn surefire:test 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T02:59:33.283

[构建你自己的生命周期](http://www.sonatype.com/books/mvnref-book/reference/writing-plugins-sect-plugins-lifecycle.html#writing-plugins-sect-custom-lifecycle)，或者使用 Maven 之外的东西运行测试（Ant、Gradle、你的 IDE、命令行 JUnit 运行器，...）。这就是您在使用 Maven 时所承受的那种限制。

# javascript - 从 JSON 创建 jQuery 数组

> ID：14867077
> 
> 赞同：1
> 
> 时间：2013-02-14T02:56:48.563
> 
> 标签：javascript, jquery, arrays, associative-array

我想使用 JSON 对象中返回的值在 jQuery 中创建一个关联数组。JSON 对象是动态创建的：

```
[{"name":"key1","value":"value1"},{"name":"key2","value":"value2"},{"name":"key3","value":"value3"},{"name":"key4","value":"value4"}] 
```

我想使用 JSON 中返回的值创建这种格式的关联数组：

```
aResult = {key1 : 'value1', key2 : 'value2', key3 : 'value3', key4 : 'value4'}; 
```

目前，当我遍历 JSON 对象时，我可以在控制台中看到所需的数组结构

```
$.each(jData, function(k, v) {
    if (v.name.toLowerCase().indexOf("answer") >= 0) {
        name = v.name;
        value = v.value;
        console.log(name + ' : ' + value); //returns the structure I wish
    };

}); 
```

但是当我在循环中添加这段代码来创建数组时

```
var aResult = {name:value} 
```

它返回`[object Object]`

我错过了什么？我应该如何前进？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T03:03:31.530

这应该这样做

```
var obj = {};
$.each(data, function(i, v){
       obj[v.name] = v.value
   });
console.log(obj) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/ygqaa/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T03:00:22.843

jQuery.parseJSON() 命令将 JSON 转换为 Object。

[http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T03:05:41.820

首先，您需要使用解析 json

```
$.parseJSON(); 
```

需要将 JSON 转换为对象之后尝试使用

```
$.each(data, function(n, val) {
    console.log(name + ': name = ' +val.name + ' value = ' + val.value);
  }); 
```

# java - 在 WebSphere 8 上调用异步 servlet 会导致 AsyncIllegalStateException

> ID：14867086
> 
> 赞同：5
> 
> 时间：2013-02-14T02:58:47.960
> 
> 标签：java, asynchronous, servlet-3.0, websphere-8

调用 servlet 时出现以下异常：

```
com.ibm.ws.webcontainer.async.AsyncIllegalStateException: SRVE8010E: The current request does not support asynchronous servlet processing. 
```

servlet 如下所示：

```
public class AsyncServlet extends HttpServlet {

  @Override
  protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

      try {
          AsyncContext async = req.startAsync();
          async.start(new Runnable(){
              @Override
              public void run() {
                System.out.println("Bazinga");
              }
          });
      } catch (Exception e) {
        e.printStackTrace();
      }

  }
} 
```

我尝试使用注释将其设置为异步：

```
@WebServlet(urlPatterns = "/asyncServlet", asyncSupported = true) 
```

在阅读论坛中的帖子后也在 web.xml 中：

```
<servlet>
    <display-name>AsyncServlet</display-name>
    <servlet-name>AsyncServlet</servlet-name>
    <servlet-class>com.lala.lala.AsyncServlet</servlet-class>
    <init-param>
        <param-name>com.ibm.ws.webcontainer.async-supported</param-name>
        <param-value>true</param-value>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>AsyncServlet</servlet-name>
    <url-pattern>/asyncServlet</url-pattern>
</servlet-mapping> 
```

仍然收到 AsyncIllegalStateException。您是如何让异步 servlet 在 WAS8 上运行的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:24:49.063

我在其中一个论坛上发现了类似的东西，也许它会有所帮助：

```
import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.AsyncContext;
import javax.servlet.ServletException;
import javax.servlet.ServletResponse;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet(urlPatterns = "/AsyncServlet", asyncSupported = true)
public class AsyncServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

protected void doGet(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {

    // Record the servlet's thread
    PrintWriter out = response.getWriter();
    out.printf("<h3>Servlet's thread: %s</h3>", Thread.currentThread());
    out.flush();

    // Put the request into asynchronous mode
    request.startAsync();

    // Run an asynchronous task via servlet 3.0's abstractions
    AsyncContext asyncCtx = request.getAsyncContext();
    MyTask mt = new MyTask(asyncCtx);
    asyncCtx.start(mt);

    // Run another asynchronous task via java's abstractions
    MyTask mt02 = new MyTask(asyncCtx);
    new Thread(mt02).start();

    out.printf("<h3>Servlet finishes its job</h3>");
}

public class MyTask implements Runnable {

    AsyncContext asyncContext;

    public MyTask(AsyncContext asyncContext) {
        this.asyncContext = asyncContext;
    }

    @Override
    public void run() {
        ServletResponse response = asyncContext.getResponse();
        try {
            // do the time-consuming job
            PrintWriter out = response.getWriter();
            for (int i = 0; i < 5; i++) {
                out.printf("<h2>Hello from thread: %s (%d)</h2>", Thread.currentThread(), i);
                out.flush();
                Thread.sleep(1 /* secs */ * 1000);
            }
        } catch (IOException e) {
            e.printStackTrace();
        } catch (InterruptedException e) {
            e.printStackTrace();
        } finally {
            asyncContext.complete();
        }
    }
}
} 
```

[在这里找到](http://jlaskowski.blogspot.co.uk/2012/05/watki-podczas-obsugi-asynchronicznego.html)

# linq - 如何将可重用的 linq 表达式应用于 EF 导航属性

> ID：14867090
> 
> 赞同：2
> 
> 时间：2013-02-14T02:59:39.367
> 
> 标签：linq, entity-framework

我有以下表达式（简化）：

`from p in Providers select new { p.Name, p.Accounts.Count(a => a.State == 2) };`

这很好用，但现在我想创建一个可重用的表达式，如下所示：

`Expression<Func<Account, bool>> MyPredicate() { return a => a.State == 2; }`

并像这样使用它：

`from p in Providers select new { p.Name, p.Accounts.Count(MyPredicate()) }`

不幸的是，这不起作用，因为导航属性（帐户）是 EF 中的 IList 或 ICollection。这里的模式是什么？很高兴能稍微改变一下，但请注意，我并不追求动态表达式，只是可重用的表达式。

# javascript - How can I dynamically create a div, while referencing it to a class?

> ID：14867098
> 
> 赞同：0
> 
> 时间：2013-02-14T03:00:53.667
> 
> 标签：javascript, html, css, forms, posting

Searched far and wide here, but can't seem to find the answer! This is homework! So I do not expect anyone to write anything for me, just to help me :)

I am attempting to have a HTML message box with a post button. When the post button is clicked, the message, along with the date is posted into a div bellow. This can be done many times, with the newest ones being published under the oldest ones. The way I am trying, is to create a new div every time, and assign them all to the same class that is in my CSS document. The message and date must be in separate 'p' tags with their own class assigned. If anyone knows a better approach, I'm all ears. Although, my Javascript document must be external.

I currently have this code:

```
function createComment(){
var message = "";
var divTag = document.createElement("div");
divTag.className = "commentDiv";
divTag.innerHTML = Date();
message=document.getElementById("textBox").value;
document.getElementById("comments").innerHTML=message;
} 
```

I am attempting to create the div, then give it an ID of 'commentDiv', since that is the div ID in my CSS document that is already styled. I then post the date in the inner HTML, and save the value from the text box into a variable, named 'message'. I then try to attempt to print the message into a paragraph tag with the ID of 'comments'. I am VERY new to web Javascript. So honestly, I don't really know what I'm doing haha. All help is greatly appreciated. Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T03:18:12.700

I think what you are looking for is something like

```
var ct = document.getElementById('comments')

function create(){
    var divTag = document.createElement('div');
    divTag.className = 'comment';

    var p1 = document.createElement('p');
    p1.className = 'date';
    p1.innerHTML = new Date();
    divTag.appendChild(p1)

    var p2 = document.createElement('p');
    p2.className = 'message';
    p2.innerHTML = 'nop';
    divTag.appendChild(p2);

    ct.appendChild(divTag);
} 
```

Demo: [Fiddle](http://jsfiddle.net/arunpjohny/Bnqyb/).

The [appendChild()](http://www.w3schools.com/dom/met_element_appendchild.asp) can be used to append child element to a node.

# python - 我可以使用层次聚类来获取集群的特征吗 - numpy

> ID：14867099
> 
> 赞同：0
> 
> 时间：2013-02-14T03:01:04.810
> 
> 标签：python, numpy, cluster-analysis, data-mining, hierarchical

我正在尝试对 m*n 数组进行层次聚类。

1.  输入数组：500 * 1000（1000 个特征，500 个观测值）
2.  使用自定义的 pdist 函数计算距离矩阵
3.  将此距离矩阵提供给链接函数： clusters = sch.linkage(distanceMatrix,'single')
4.  形成扁平集群：fc = sch.fcluster(clusters,cutoff,'distance')

这给了我一些集群（大约 80 个，使用 6.0 的截止值）。现在，无论如何，我也可以获得与每个集群对应的 1000 个特征吗？（就像我们使用 K-means 聚类获得质心的特征一样）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:10:32.333

层次聚类中的聚类（或几乎任何东西，除了 k-means 和高斯混合 EM 仅限于“球形” - 实际上：凸 - 聚类）**不一定具有合理的均值**。

因为它们允许非球形集群。这实际上是一个功能...

[https://en.wikipedia.org/wiki/Cluster_analysis#Connectivity_based_clustering_.28hierarchical_clustering.29](https://en.wikipedia.org/wiki/Cluster_analysis#Connectivity_based_clustering_.28hierarchical_clustering.29)

查看标题为“链接聚类示例”的右图。在这个“香蕉”示例中，集群有什么好处？**质心甚至可能不在集群中！**

请注意，如果需要，您仍然可以*自己计算质心。*由于聚类算法不需要质心，显然它不会自动为您计算它。

# ruby-on-rails - Rails：如何将值存储在一个地方并在其他地方引用它

> ID：14867100
> 
> 赞同：1
> 
> 时间：2013-02-14T03:01:11.783
> 
> 标签：ruby-on-rails, ruby-on-rails-3, constants

我想在一个地方存储一个值，比如我的应用程序的名称（如常量），然后在整个应用程序中引用它。因此，如果我需要进行全局更改，我可以在一个地方进行并更新在我的应用程序中。这是我如何使它工作的一个想法：

**在常量文件中**
`APPLICATION_NAME = "FuzzyOnions"`

**在任何视图中，我现在都可以这样引用它：**
您会喜欢使用该`<%= Constants::APPLICATION_NAME %>`应用程序。

我遇到的问题是当我尝试在以下位置引用它时：`<% @page_title = "<%= Constants::APPLICATION_NAME %> / About" %>`rails throws an error。如果我尝试在链接中引用常量，它也会引发错误，例如`%= link_to 'Contact Us <%= Constants::APPLICATION_NAME %>', page_path("contact-us") %>`

是否有另一种方法来引用不会在这些实例中引发错误的常量？有没有更好的方法来完成我想要做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T04:26:20.923

```
<% @page_title = "<%= Constants<::APPLICATION_NAME %> / About" %> 
```

应该

```
<% @page_title = Constants::APPLICATION_NAME + " / About" %> 
```

* * *

和：

```
<%= link_to 'Contact Us <%= Constants::APPLICATION_NAME %>', page_path("contact-us") %> 
```

应该

```
<%= link_to 'Contact Us '+ Constants::APPLICATION_NAME, page_path("contact-us") %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T04:20:17.533

您在 application.rb 中有一个名为 YourAppName （无论是什么）的模块这可以工作：

```
module YourAppName
  class << self
      def [] s
      constants[s]
    end
    def constants
      # you could read this in as a yaml file, cache in a class var, etc.
      {application_name: 'Fuzzy Onions',
       url: 'fuzzy-onions.com'} 
    end

 YourAppName[:application_name]
 => "Fuzzy Onions"  

 AbServ[:url]
 => "fuzzy-onions.com" 
```

# ios - MagicalRecords 在后台线程中持续获取图像？

> ID：14867102
> 
> 赞同：5
> 
> 时间：2013-02-14T03:01:29.753
> 
> 标签：ios, objective-c, core-data, magicalrecord

我有以下代码：

```
dispatch_async(dispatch_get_main_queue(), ^{
    NSManagedObjectContext *localContext = [NSManagedObjectContext contextForCurrentThread];

    Item *newItem = [Item createInContext:localContext];
    newItem.title = NULL_TO_NIL([itemJson valueForKey:@"title"]);
    newItem.image_url = NULL_TO_NIL([itemJson valueForKey:@"image_url"]);
    newItem.order_id = @([[self largestOrderId] intValue] + 1);

    NSURL *url = [NSURL URLWithString:newItem.image_url];
    NSData *data = [[NSData alloc] initWithContentsOfURL: url];
    if (data == nil) {
        NSLog(@"Image data is nil from %@", url);
    } else {
        NSLog(@"Image fetched in saveItemFromJson for cid:%@ order_id:%@", newItem.cid, newItem.order_id);
        newItem.image = [UIImage imageWithData:data];
    }

    if (![localContext hasChanges]) {
        NSLog(@"No local change detected. Quitting");
        return;
    }

    [localContext saveToPersistentStoreWithCompletion:^(BOOL success, NSError *error) {
        if (!success)
            NSLog(@"Error: %@", [error localizedDescription]);
        else
            NSLog(@"Item persisted for cid:%@ order_id:%@", newItem.cid, newItem.order_id);
    }];
}); 
```

我似乎得到了很多以下内容：

```
2013-02-13 18:55:47.404 Giordano.iPhone[13956:c07] -[NSManagedObjectContext(MagicalSaves) MR_saveWithOptions:completion:](0x8386a90) → Saving <NSManagedObjectContext (0x8386a90): *** DEFAULT ***> on *** MAIN THREAD ***
2013-02-13 18:55:47.404 Giordano.iPhone[13956:c07] -[NSManagedObjectContext(MagicalSaves) MR_saveWithOptions:completion:](0x8386a90) → Save Parents? 1
2013-02-13 18:55:47.404 Giordano.iPhone[13956:c07] -[NSManagedObjectContext(MagicalSaves) MR_saveWithOptions:completion:](0x8386a90) → Save Synchronously? 0
2013-02-13 18:55:47.497 Giordano.iPhone[13956:c07] Image fetched in saveItemFromJson for cid:7218 order_id:10
2013-02-13 18:55:47.497 Giordano.iPhone[13956:c07] -[NSManagedObjectContext(MagicalSaves) MR_saveWithOptions:completion:](0x8386a90) → Saving <NSManagedObjectContext (0x8386a90): *** DEFAULT ***> on *** MAIN THREAD ***
2013-02-13 18:55:47.498 Giordano.iPhone[13956:c07] -[NSManagedObjectContext(MagicalSaves) MR_saveWithOptions:completion:](0x8386a90) → Save Parents? 1
2013-02-13 18:55:47.498 Giordano.iPhone[13956:c07] -[NSManagedObjectContext(MagicalSaves) MR_saveWithOptions:completion:](0x8386a90) → Save Synchronously? 0
2013-02-13 18:55:47.499 Giordano.iPhone[13956:c07] -[NSManagedObjectContext(MagicalRecord) MR_contextWillSave:](0x8386a90) Context DEFAULT is about to save. Obtaining permanent IDs for new 10 inserted objects
2013-02-13 18:55:47.501 Giordano.iPhone[13956:c07] -[NSManagedObjectContext(MagicalSaves) MR_saveWithOptions:completion:](0x8385aa0) → Saving <NSManagedObjectContext (0x8385aa0): *** BACKGROUND SAVING (ROOT) ***> on *** MAIN THREAD ***
2013-02-13 18:55:47.502 Giordano.iPhone[13956:c07] -[NSManagedObjectContext(MagicalSaves) MR_saveWithOptions:completion:](0x8385aa0) → Save Parents? 0
2013-02-13 18:55:47.502 Giordano.iPhone[13956:c07] -[NSManagedObjectContext(MagicalSaves) MR_saveWithOptions:completion:](0x8385aa0) → Save Synchronously? 1
2013-02-13 18:55:47.502 Giordano.iPhone[13956:c07] -[NSManagedObjectContext(MagicalRecord) MR_contextWillSave:](0x8385aa0) Context BACKGROUND SAVING (ROOT) is about to save. Obtaining permanent IDs for new 10 inserted objects
2013-02-13 18:55:47.505 Giordano.iPhone[13956:c07] __70-[NSManagedObjectContext(MagicalSaves) MR_saveWithOptions:completion:]_block_invoke21(0x8385aa0) → Finished saving: <NSManagedObjectContext (0x8385aa0): *** BACKGROUND SAVING (ROOT) ***> on *** MAIN THREAD ***
2013-02-13 18:55:47.505 Giordano.iPhone[13956:c07] -[NSManagedObjectContext(MagicalSaves) MR_saveWithOptions:completion:](0x8385aa0) NO CHANGES IN ** BACKGROUND SAVING (ROOT) ** CONTEXT - NOT SAVING 
```

带有以下错误消息：

```
2013-02-13 18:55:47.511 Giordano.iPhone[13956:c07] -[NSManagedObjectContext(MagicalSaves) MR_saveWithOptions:completion:](0x8385aa0) NO CHANGES IN ** BACKGROUND SAVING (ROOT) ** CONTEXT - NOT SAVING
2013-02-13 18:55:47.512 Giordano.iPhone[13956:c07] -[NSManagedObjectContext(MagicalSaves) MR_saveWithOptions:completion:](0x8385aa0) NO CHANGES IN ** BACKGROUND SAVING (ROOT) ** CONTEXT - NOT SAVING
2013-02-13 18:55:47.512 Giordano.iPhone[13956:c07] -[NSManagedObjectContext(MagicalSaves) MR_saveWithOptions:completion:](0x8385aa0) NO CHANGES IN ** BACKGROUND SAVING (ROOT) ** CONTEXT - NOT SAVING
2013-02-13 18:55:47.512 Giordano.iPhone[13956:c07] -[NSManagedObjectContext(MagicalSaves) MR_saveWithOptions:completion:](0x8385aa0) NO CHANGES IN ** BACKGROUND SAVING (ROOT) ** CONTEXT - NOT SAVING
2013-02-13 18:55:47.513 Giordano.iPhone[13956:c07] -[NSManagedObjectContext(MagicalSaves) MR_saveWithOptions:completion:](0x8385aa0) NO CHANGES IN ** BACKGROUND SAVING (ROOT) ** CONTEXT - NOT SAVING

2013-02-13 18:55:47.515 Giordano.iPhone[13956:c07] Error: (null)
2013-02-13 18:55:47.515 Giordano.iPhone[13956:c07] Error: (null)
2013-02-13 18:55:47.515 Giordano.iPhone[13956:c07] Error: (null) 
```

我避免使用它，`saveInBackgroundWithBlock`因为它已被弃用（文档需要更新？）

关于我的代码有什么问题的任何想法？

**更新**

我的团队认为现在 MagicalRecord 的 bug 太多了。我们已经将我们的代码从 MR 完全迁移回 CoreData。感谢您的关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:13:20.210

我遇到过同样的问题！仅当我在没有 MR 的情况下手动保存上下文时才修复它。

这是我的解决方案：

NSManagedObject+MyCategory.h

```
+ (void)saveDataInBackgroundWithBlock:(void(^)(NSManagedObjectContext *localContext))saveBlock
                           completion:(void(^)(void))completion;

+ (NSManagedObjectContext *)newMergableBackgroundThreadContext;

- (void)saveWithCompletion:(void(^)(void))completion; 
```

.m

```
+ (NSManagedObjectContext *)newMergableBackgroundThreadContext {
    NSManagedObjectContext *context = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    context.parentContext = [self mainThreadContext];
    [context.userInfo setObject:[NSNumber numberWithInteger:VKCoreDataManagedObjectContextIDTempBackground]
                         forKey:@"contextID"];
    [context.userInfo setObject:kVKCoreDataManagedObjectContextBackgroundTemp
                         forKey:@"contextDebugName"];
    VKDLog(@"* New mergable backround context created! *");
    return context;
}

+ (void)saveDataInBackgroundWithBlock:(void (^)(NSManagedObjectContext *))saveBlock completion:(void (^)(void))completion {
    NSManagedObjectContext *tempContext = [self newMergableBackgroundThreadContext];
    [tempContext performBlock:^{

        if (saveBlock) {
            saveBlock(tempContext);
        }

        if ([tempContext hasChanges]) {
            [tempContext saveWithCompletion:completion];
        } else {
            dispatch_async(dispatch_get_main_queue(), ^{
                if (completion) {
                    completion();
                }
            });
        }
    }];
}

- (void)saveWithCompletion:(void(^)(void))completion {
    [self performBlock:^{
        NSError *error = nil;
        if ([self save:&error]) {
            NSNumber *contextID = [self.userInfo objectForKey:@"contextID"];
            if (contextID.integerValue == VKCoreDataManagedObjectContextIDMainThread) {
                dispatch_async(dispatch_get_main_queue(), ^{
                    if (completion) {
                        completion();
                    }
                });
            }
            [[self class] logContextSaved:self];
            if (self.parentContext) {
                [self.parentContext saveWithCompletion:completion];
            }
        } else {
            [VKCoreData handleError:error];
            dispatch_async(dispatch_get_main_queue(), ^{
                if (completion) {
                    completion();
                }
            });
        }
    }];
} 
```

这是使用示例：

```
[NSManagedObjectContext saveDataInBackgroundWithBlock:^(NSManagedObjectContext *localContext){
// do your stuff with local context
} completion:^{
// handle completion, update UI or something
}]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T18:53:40.633

几周前我在使用 MR 时遇到了类似的问题。最后我决定放弃它，自己做所有事情。不是真正解决您的问题，但我放弃它背后的理由是合理的。您可能需要查看 MR 的实际来源。很大一部分文档是不正确的，相当多的库只能通过阅读源代码来学习。尝试使用 MR 进行后台处理很可能存在问题。

如果您的代码适用于 iOS6+，那么您应该只使用[Master-Main-Child](http://www.cocoanetics.com/2012/07/multi-context-coredata/) Context 设置。使用 dispatch_async 也可能是一个问题。让 Core Data 使用 [NSManagedContext performBlock:] 方法来管理你的线程可能更安全。

如果您使用的是 iOS5 或更低版本，则 Child 上下文和 performBlock: 代码不起作用。最简单的解决方案是将 Core Data 排除在线程之外。在进入新线程/块之前从核心数据中提取任何需要的信息。将该数据传递到您的块中并执行任何必要的处理。然后将它返回到某种字典/对象中的主线程，并在那里执行您的核心数据保存。

另外一个附注，我遇到这个问题是因为下载图像并将它们保存到核心数据，你可能想看看我在过去几周提出/解决的与此相关的这些问题。以后可能会节省你拉一些头发的时间：

[我可以访问 Core Data 中用于外部二进制存储的文件吗？](https://stackoverflow.com/questions/10222632/can-i-access-the-files-used-for-external-binary-storage-in-core-data/13497992#13497992)

这最终导致我使用自己的存储机制而不是 Core Data 来存储文件，并最终导致我遇到这个问题/解决方案：

[将应用程序更新到最新版本后文件不再可读](https://stackoverflow.com/questions/14821638/files-are-no-longer-readable-after-updating-application-to-newest-version)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T14:26:49.893

你试过`MR_saveOnlySelfWithCompletion:`吗？

# python - 圆形计算器无法正常工作

> ID：14867103
> 
> 赞同：2
> 
> 时间：2013-02-14T03:01:32.703
> 
> 标签：python, if-statement

该代码是用**python 3.3**编写的，仅适用于第一个 if 语句，即使 if 语句错误，也不承认其他 elif 语句。

```
calccircle() 
```

你知道哪些数据？半径

```
Enter Diameter def calccircle():
      x = input("What data do you know? ")
      if x == "Diameter" or "diameter":
          a = int(input("Enter Diameter "))
          print("Circumference is", a * math.pi)
          print("Area is", math.pi * math.pow(a/2,2))
          print("Radius is:",a/2)
      elif x == "Radius" or "radius":
          b = input("Enter radius: ")
          print("Circumference is", b * 2 * math.pi)
          print("Area is", math.pi * math.pow(b,2))
          print("Diameter is", b * 2)
      elif x == "area" or "Area":
          c = input("Enter area: ")
          print("Circumference is", ((math.sqrt(c))/math.pi) * b * 2 * math.pi)
          print("Diameter is", math.sqrt(c) * math.pi * 2)
          print("Radius is", math.sqrt(c) * math.pi)
      elif x == "circumference" or "Circumference":
          d = input("Enter Circumference: ")
          print("Area is", math.pi * math.pow(d/math.pi,2))
          print("Diameter is", d/math.pi * 2)
          print("Radius is", d/math.pi) 
```

它显示输入（“输入直径：”）并且不注意我写的内容或 if 语句。

> calccircle() 你知道什么数据？**半径** 输入**直径**

注意我写了半径，输入（“输入半径：”）应该运行，但它没有。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T23:21:59.613

你的问题是这样的：

```
 if x == "Diameter" or "diameter": 
```

看起来像python：

```
 if (x == "Diameter") or "diameter": 
```

其中，当 时`x != "Diameter"`，就像：

```
if "diameter": 
```

这将永远通过。

Python 将`False, None, "", [], {}, ...`等视为语句`False`的上下文`if`（或者如果您调用`bool`它们，或在其他各种地方），并且大多数其他内容都视为`True`. 这通常很方便，但可能会加上对`or`语句的轻微混淆，使很多不习惯 Python 的人犯这个错误。

相反，请执行以下操作之一：

```
if x == "Diameter" or x == "diameter":  # most direct translation
if x in {"Diameter", "diameter"}:  # very slightly faster, a little less typing
if x.lower() == "diameter":  # also allows DIAmeter, etc 
```

* * *

还值得注意的是，如果你写了类似的东西

```
if x == ("Diameter" or "diameter"): 
```

这将与

```
if x == "Diameter": 
```

因为`"Diameter" or "diameter"`看到那`"Diameter"`是`True`ish，所以返回。

# android - 从 BroadcastReceiver 调用方法

> ID：14867104
> 
> 赞同：1
> 
> 时间：2013-02-14T03:01:36.557
> 
> 标签：android

我有一个广播接收器，它响应重复的 Alarmanager 广播。广播接收器的对象是在另一个类中创建的，但我需要广播接收器的 Onreceive 方法来调用创建对象的类中的方法。

因此，尝试使这一点更清楚。B 类是广播接收器。在 A 类内部，我实例化了 B 类的一个对象。但是 OnRecieve 方法需要对 A 类的公共方法进行分类。

顺便说一句，A 类是 Mainactivity 类。

我正在考虑尝试在 B 类的设置中将 Runnable 对象作为参数传递，但我不完全确定如何实现它。

```
public class TimerBroadcastReceiver extends BroadcastReceiver{

    @Override
    public void onReceive(Context arg0, Intent arg1) {
        CalcDisplay(true);      
    }

    public void setTimer(Context context)
    {
        AlarmManager am = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
        Intent intent = new Intent(context, MainActivity.class);
        PendingIntent pi = PendingIntent.getBroadcast(context, 0, intent, 0);
        am.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), 1000 * 60, pi);
    }

    public void cancelTimer(Context context)
    {
        Intent intent = new Intent(context, MainActivity.class);
        PendingIntent Sender = PendingIntent.getBroadcast(context, 0, intent, 0);
        AlarmManager am = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
        am.cancel(Sender);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:21:39.597

将您的接收器（B 类）嵌套在您的 Activity（A 类）中。像这样：

```
public class A extends Activity {

    B receiver = new B();

    ...*Some stuff*

    public class B extends BroadCastReceiver {

        @Override
        public void onReceive() {
            *call method from class A*
        }

    }
} 
```

现在 B 类将可以访问 A 类的方法。

# java - 使用 arraycopy 的 Java 方法不起作用

> ID：14867105
> 
> 赞同：0
> 
> 时间：2013-02-14T03:01:39.577
> 
> 标签：java, sorting, arrays

我有以下代码：

```
public void add (int value)
{
    if (numElements == list.length)
        System.out.println("Can't add, list is full");
    else
    {
        int hold=0;

        for (int j = 0; j < numElements; j++)   
        {
            int temp = list[j];
            if (temp <= value)
            {
                hold = j;  
            }
        }

        System.arraycopy(list,hold, list, hold+1 ,numElements-hold);
        list[hold] = value;
        for (int i = 0; i< list.length; i++)
            System.out.print(list[i] + ", ");
        System.out.println();

        numElements++;
    }
} 
```

目的是将整数放入数组中从最小到最大的正确位置（插入排序）。

当我运行以下测试代码时：

```
myList.add(100);
myList.add(50);
myList.add(200);
myList.add(25); 
```

结果数组是：`[25,50,200,100]`

当我在每次调用该方法后调试它时，数组是：

[100, 0, 0, 0, 0, 0, 0, 0, 0, 0]

[50, 100, 0, 0, 0, 0, 0, 0, 0, 0]

[50, 200, 100, 0, 0, 0, 0, 0, 0, 0]

[25, 50, 200, 100, 0, 0, 0, 0, 0, 0]

如您所见，当尝试放入 200 时，错误正在发生。

我需要一些帮助来解决这个问题...谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:25:49.880

`arraycopy()`通话没问题。问题是，如果正确的插入点位于列表中的所有元素之后，您的循环将无法确定这一点。

您可以尝试以下方法：

```
for(hold = 0; hold < numElements; ++hold) {
   if(list[hold] > value) break;
} 
```

# open-source - 使学校项目开源的问题？

> ID：14867107
> 
> 赞同：0
> 
> 时间：2013-02-14T03:01:41.390
> 
> 标签：open-source, licensing, project

不久前，我开始将我所有的学校项目作为开源项目放在 GitHub ( [https://github.com/victoraldecoa?tab=repositories](https://github.com/victoraldecoa?tab=repositories) ) 上，因为我相信我正在做的工作不仅对学习有用，而且也可以对其他人（或未来的我）有用，而不是复制，而是将这些项目用作示例，甚至作为其他更有用项目的基础。

最近一位老师发现了，让我把它删掉，只是因为他不想为明年的课程换作业。我当然想避免这种情况。

我对法律一无所知。我在拒绝删除这些项目时会遇到任何法律问题吗？当然，我必须处理这门课程中的含义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:11:27.527

1.  这可能违反行为准则，可能会让你被开除，这很糟糕。也可能违反合同，因此是民事案件。
2.  我认识的那个人在他被开除的*辅导*下，在他的物理课上发布了解决方案。盗窃知识产权存在法律指控的威胁。

如果你真的坚持让这些代码开源，你应该删除对原始作业的所有引用。

# c# - 无法在动态创建的文本框上设置焦点

> ID：14867114
> 
> 赞同：0
> 
> 时间：2013-02-14T03:03:15.343
> 
> 标签：c#, asp.net

我正在动态生成文本框。表格行也是动态创建的，这些文本框被添加到那些动态创建的行单元格中，并使用以下代码添加到表格中

```
protected override void OnInit(EventArgs e)
{
    PopulateTextBoxes();
    SetFocus();
    base.OnInit(e);
}
protected void PopulateTextBoxes()
{
    int quantityRequired = 0;
    quantityRequired =GetQuantity();
    for (int j = 0; j < quantityRequired; j++)
    {
        TableRow row = new TableRow();
        TableCell cell1 = new TableCell();
        TextBox tb = new TextBox();
        tb.ID = j.ToString() +"_RowTbx"
        tb.AutoPostBack = true;
        tb.TextChanged += new EventHandler(tb_TextChanged);
        cell1.Controls.Add(tb);
        row.Cells.Add(cell1);
        TableCell cell2 = new TableCell();
        CheckBox chBox = new CheckBox();
        chBox.CheckedChanged += new EventHandler(chBox_CheckedChanged);
        chBox.AutoPostBack = true;
        cell2.Controls.Add(chBox);
        row.Cells.Add(cell2);
        TableCell cell3 = new TableCell();
        Image img = new Image();
        img.Width = Unit.Pixel(25);
        img.Height = Unit.Pixel(25);
        img.ImageUrl = "HttpRuntime.AppDomainAppVirtualPath" + "/Images/" +"img.jpeg";
        cell3.Controls.Add(img);
        row.Cells.Add(cell3);
        tbl_Serial.Rows.Add(row);
    }
    LoadDataIfExists();
}

private void tb_TextChanged(object sender, EventArgs e)
{
  //I have implemented code to validate the text entered in the text box.
}

protected void SetFocus()
{
    int emptytbxRow = 0;
    TextBox tbx = new TextBox();
    for (int i = 0; i < tbl_Serial.Rows.Count; i++)
    {
        string tbxId = i.ToString() + "_RowTbx";
        string text = ((TextBox)tbl_Serial.Rows[i].Cells[0].FindControl(tbxId))).Text;
        if (text == null || text==string.Empty)
        {
            tbx=((TextBox)(tbl_Serial.Rows[i].Cells[0].FindControl(tbxId)));
            if (tbx != null)
                tbx.Focus();
        }
    }
  protected void LoadDataIfExists()
  {
     List<string> lstData=Service.GetData(int someNum)
     for (int j = 0; j < lstData.Count; j++)
        {
            string tbxID = j.ToString() + "_RowTbx";
            TextBox tbx = (TextBox)tbl_Serial.Rows[j].Cells[0].FindControl(tbxID);
            tbx.Text = lstData[j];

        }

   } 
```

当我调试时，tbx.focus 似乎正确命中，但我没有看到光标在我的 UI 中的文本框上闪烁。我不知道我是否遗漏了一些小鬼。谢谢你。

编辑：对不起，我不清楚。页面加载时，文本框可能包含数据，但并非所有文本框都包含数据。因此，每当页面加载时，都会有一些带有数据的文本框，并且有一些空的。我希望光标位于第一个空框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:19:14.600

鉴于您知道哪个文本框是您的第一个空文本框，您还想了解页面生命周期。OnInit 在页面生命周期的早期发生，因为页面仍在初始化并且对象尚未呈现到表单。在呈现表单之前尝试 OnLoad 或使用 PreRender 将焦点设置到您的项目。

下面的链接将向您展示您可以在周期中使用的所有可用方法。

[ASP 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx#lifecycle_events)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T22:15:02.223

由于某些未知原因，具有与以下相同逻辑的 C#code 不起作用，而 javascript 起作用。希望以下内容对将来的人有所帮助。感谢 Liqua 提供开始。

```
 window.onload = function () {
                                      FindWhichTextBoxIsEmpty();
                                    }
    function FindWhichTextBoxIsEmpty() {
        var tableSerial = document.getElementById('tbl_Serial');

        for (var i = 0; i < tableSerial.rows.length-1; i++) {

            var ID = i.toString() + "_RowTbx";
            if (document.getElementById(ID).value!="") {
                var tb = document.getElementById(ID).value;
                if (tb != "") {
                              if (i + 1 < tableSerial.rows.length-1) {
                             var nextID = (i + 1).toString() + "_RowTbx";
                             document.getElementById(nextID).focus();
                    }
                }
            }
        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T06:56:06.410

没有清楚地知道你的问题，我得到的是你动态创建了一个文本框，并试图在运行时集中它。这可能是你尝试创建 tb += getFocus 事件的工作，或者尝试 tb.Focus();

# casting - 如何将指针转换为 Qt4 表单

> ID：14867115
> 
> 赞同：0
> 
> 时间：2013-02-14T03:03:25.400
> 
> 标签：casting, qt4, qt-designer

我有其他表单需要的 Qt4 from(WorkersList) 来传回一些值，这些表单将调用 WorkersList，然后 WorkersList 将根据进行调用的表单传回值。为了将值从 WorkersList 传回给调用者，我必须为每个表单实现一个方法，如下所示：

*伪代码：*

```
class WorkersList : public QDialog
{
    Q_OBJECT

public:
    explicit WorkersList(QWidget *parent = 0);
    void getWorkersList();
    void setWorkerForm(Ui::WorkerMod *workerMod); // The method to pass back to the caller 1
    void setWorkerForm2(Ui::WorkerDel *workerDel); // The method to pass back to the caller 2
    void setSuspendForm(Ui::WorkerSuspend *worker); // The method to pass back to the caller 3
    void setResumeForm(Ui::WorkerResume *worker); // The method to pass back to the caller 4
    ~WorkersList();

private:
    Ui::WorkersList *ui;
    Ui::WorkerMod *workerForm;
    Ui::WorkerDel *workerForm2;
    Ui::WorkerSuspend *workerSuspendForm;
    Ui::WorkerResume *workerResumeForm;
    QStringList infoWorker;
}; 
```

有没有一种方法可以让我只需要实现一个方法，将调用者作为参数传递，然后从我向调用者进行强制转换的方法，如下所示：

```
class WorkersList : public QDialog
{
    Q_OBJECT

public:
    explicit WorkersList(QWidget *parent = 0);
    void getWorkersList();
    void setForm(void *from, int caller); 
    ~WorkersList();

private:
    Ui::WorkersList *ui;
    Ui::WorkerMod *workerForm;
    Ui::WorkerDel *workerForm2;
    Ui::WorkerSuspend *workerSuspendForm;
    Ui::WorkerResume *workerResumeForm;
    QStringList infoWorker;
};

...

void WorkersList::setForm(void *form, int caller)
{
    if(caller == 0)
        workerForm = (Ui::WorkerMod *)form;
    else if(caller == 1)
        workerForm2 = (Ui::WorkerDel *)form;
    else if(caller == 2)
        workerSuspendForm = (Ui::WorkerSuspend *)form;
    else if(caller == 3)
        workerResumeForm = (Ui::WorkerResume *)form;

} 
```

**更新**

我试过这个：

```
void WorkersList::setForm(QObject *obj, int form)
{
    if(form == 0)
    {
        this->workerAbsenceForm = qobject_cast<Ui::AbsenceAdd *>(obj);
    }
    if(form == 1)
    {
        this->workerAbsenceForm3 = qobject_cast<Ui::AbsenceMod >(obj);
    }
} 
```

编译器产生此错误：

```
/usr/local/include/qt4/QtCore/qobject.h: In function 'T qobject_cast(QObject*) [with T = Ui::AbsenceAdd*]':
workerslist.cpp:259:   instantiated from here
/usr/local/include/qt4/QtCore/qobject.h:378: error: 'class Ui::AbsenceAdd' has no member named 'qt_check_for_QOBJECT_macro'
/usr/local/include/qt4/QtCore/qobject.h:380: error: 'class Ui::AbsenceAdd' has no member named 'staticMetaObject' 
```

我试过的另一个提示是：

```
void WorkersList::setForm(void *obj, int form)
{
    if(form == 0)
    {
        this->workerAbsenceForm = (Ui::AbsenceAdd *)obj;
    }
    if(form == 1)
    {
        this->workerAbsenceForm3 = (Ui::AbsenceMod *)obj;
    }
} 
```

它确实可以编译，但 GUI 从未出现过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:11:01.740

如果所有这些表单都继承 QWidget，您可以使用传递给 setForm() 方法的参数的元对象信息。

```
void WorkerList::setForm(QWidget* form)
{
  if (!form)
    return;

  const QString name = form->metaObject()->className();

  if (QString::fromUtf8("WorkerMod") == name)
    workerForm = qobject_cast<WorkerMod*>(form);   

  ...
} 
```

# batch-file - 我无法在批处理文件中自动回答是

> ID：14867122
> 
> 赞同：1
> 
> 时间：2013-02-14T03:04:23.697
> 
> 标签：batch-file, command-line, windows-7

我在**Windows7**中创建这样的批处理文件，但它不能删除文件。

```
echo y | DEL autorun.inf
echo y | DEL autorun.ini 
```

当我运行此代码时，它显示如下但不删除任何文件。

> N:>回声 y | DEL autorun.inf N:\autorun.inf*，您确定 (Y/N) 吗？是的
> 
> N:>回声 y | DEL autorun.ini N:\autorun.ini*，您确定 (Y/N) 吗？是的

似乎输入是但不输入

如何在批处理文件中自动回答是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T03:07:07.893

使用`/f`标志强制删除只读文件，`/q`标志为安静模式（无删除确认）

```
echo DEL /f /q autorun.inf
echo DEL /f /q autorun.ini 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T03:06:59.277

```
echo y | DEL autorun.inf /Q 
```

/Q 不会要求确认

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-13T07:51:59.423

```
echo Y | del "C:\Packages_Auto_Download\EIR\17\IB01" /Q 
```

上面的命令将在正确删除的情况下正常工作。

# asp.net - 实现计算器历史

> ID：14867124
> 
> 赞同：0
> 
> 时间：2013-02-14T03:04:40.000
> 
> 标签：asp.net

下面的代码是一个功能齐全的 ASP.NET 计算器。即使用户关闭浏览器，如何保留输入的所有计算的历史记录？例如，如果用户输入 5+10，我需要它在我关闭并再次打开程序后显示 15。

另外，有没有办法显示过去 10 分钟内所有计算的历史记录？

```
<script runat="server">

sub getvalue0(s as Object, e as EventArgs)

txtinput.Text=txtinput.Text & btn0.Text

end sub

sub getvalue1(s as Object, e as EventArgs)

txtinput.Text=txtinput.Text & btn1.Text

end sub

sub getvalue2(s as Object, e as EventArgs)

txtinput.Text=txtinput.Text & btn2.Text

end sub

sub getvalue3(s as Object, e as EventArgs)

txtinput.Text=txtinput.Text & btn3.Text

end sub

sub getvalue4(s as Object, e as EventArgs)

txtinput.Text=txtinput.Text & btn4.Text

end sub

sub getvalue5(s as Object, e as EventArgs)

txtinput.Text=txtinput.Text & btn5.Text

end sub

sub getvalue6(s as Object, e as EventArgs)

txtinput.Text=txtinput.Text & btn6.Text

end sub

sub getvalue7(s as Object, e as EventArgs)

txtinput.Text=txtinput.Text & btn7.Text

end sub

sub getvalue8(s as Object, e as EventArgs)

txtinput.Text=txtinput.Text & btn8.Text

end sub

sub getvalue9(s as Object, e as EventArgs)

txtinput.Text=txtinput.Text & btn9.Text

end sub

sub check(s as Object, e as EventArgs)

val1.Text=txtinput.Text

txtinput.Text=""

end sub

sub sum(s as Object, E as EventArgs)

val2.Text=txtinput.Text

dim result=cInt(val1.Text)+cInt(val2.Text)

txtinput.Text=result

end sub

sub clear(s as Object, e as EventArgs)

txtinput.Text=""

val1.Text=""

val2.Text=""

end sub

</script>

<html>

<title> Basic Calculator</title>

<body>

<form id="Form1" runat="server">

<h1>Basic Calculator</h1>

<asp:TextBox id="txtinput" runat="server" />

<table style="background:#00ffff">

<tr>

<td><asp:Button id="btn0" Text="0" runat="server" OnClick="getvalue0" /></rd>

<td><asp:Button id="btn1" Text="1" runat="server" OnClick="getvalue1" /></rd>

<td><asp:Button id="btn2" Text="2" runat="server" OnClick="getvalue2"/></rd>

<td><asp:Button id="btnsum" Text="+" runat="server" OnClick="check"/></rd>

</tr>

<td><asp:Button id="btn3" Text="3" runat="server" OnClick="getvalue3" /></rd>

<td><asp:Button id="btn4" Text="4" runat="server" OnClick="getvalue4"/></rd>

<td><asp:Button id="btn5" Text="5" runat="server" OnClick="getvalue5"/></rd>

<td><asp:Button id="btnequal" Text="=" runat="server" OnClick="sum" /></rd>

</tr>

<td><asp:Button id="btn6" Text="6" runat="server" OnClick="getvalue6"/></rd>

<td><asp:Button id="btn7" Text="7" runat="server" OnClick="getvalue7"/></rd>

<td><asp:Button id="btn8" Text="8" runat="server" OnClick="getvalue8"/></rd>

<td><asp:Button id="btnclear" Text="Clear" runat="server" OnClick="clear"/></rd>

</tr>

<tr><td><asp:Button id="btn9" Text="9" runat="server" OnClick="getvalue9"/></td></tr>

</table>

<asp:Textbox id="val1" Visible="false" runat="server"/>

<asp:Textbox id="val2" visible="false" runat="server"/>

</form>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:38:08.883

我将创建一个名为 SetText 之类的新函数。您将从具有要设置的值的所有其他事件处理程序中调用此方法。

```
sub setText(s as String)

  Dim myCookie As New HttpCookie("calculatorValue")
  myCookie.Value = s
  myCookie.Expires = DateTime.Now.AddMinutes(30)
  Response.Cookies.Add(myCookie)

  txtinput.Text= s

end sub 
```

然后，在您页面的 pageload 事件中。如有必要，您可以设置文本框

```
sub PageLoad()

    Dim cookie As HttpCookie = Request.Cookies.Get("calculatorValue")
    if (txtimput.Text == "" && cookie != null && cookie.Value != "")
    {
         txtinput.Text = cookie.Value;

         //Clear out cookie
    } 
```

这可能不是 100%，因为我没有测试，但应该非常接近。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T03:23:39.597

如果您希望在关闭浏览器后保留它，您需要将数据保留在数据库或文件之类的地方。

您可以尝试存储在会话中，但取决于您的站点设置方式，这无法保证它将存在多长时间（有关更多信息，请参阅不同类型的会话模式）。

# unordered-set - 如何在 OCL 中获取有序集？

> ID：14867126
> 
> 赞同：0
> 
> 时间：2013-02-14T03:04:46.970
> 
> 标签：unordered-set, ocl

当我有 type 的结果时**`Set(Integer)`**，数字没有排序。我们有一个可用于集合的操作，称为**`sortedBy ( expr : OclExpression ) : Sequence(T)`**，但是当这个集合中只有整数时，要使用什么表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:41:35.400

您可以只使用 asOrderedSet 操作（如果您的集合在变量 X 中，那么就是 X->asOrderedSet()）

来自 OCL 标准 asOrderedSet() ： OrderedSet(T) 一个 OrderedSet，包含来自 self 的所有元素，删除了重复项，其顺序取决于特定的具体集合类型。

# facebook - facebook like button 评论框不会在提交时关闭，也不会发布任何内容

> ID：14867127
> 
> 赞同：3
> 
> 时间：2013-02-14T03:05:08.377
> 
> 标签：facebook, facebook-social-plugins

尝试将 facebook 社交按钮插件与评论框集成。喜欢/不喜欢功能工作正常，它正确反映在我在 Facebook 上的活动日志中。但是，一旦我在评论框中输入评论并单击“发布到 facebook”，什么也没有发生！我提交时评论框不会关闭，并且不会在时间轴上发布任何内容。

我可以在 Firefox 调试器中看到发布请求。Facebook 调试器不会在页面上报告任何错误，并提取元标记。

请参阅下面的代码：我做错了什么或遗漏了什么？

```
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"
  xmlns:og="http://ogp.me/ns#"
  xmlns:fb="https://www.facebook.com/2008/fbml">
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# website: http://ogp.me/ns/website#">

    <meta property="og:title" content="mytitle" />
    <meta property="og:description" content="mydescription" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="<?php echo $this->baseUrl(); ?>/welcome"/>
    <meta property="og:image" content="<?php echo $this->baseUrl(); ?>/images/screen_shot_general.jpg" />
    <meta property="og:site_name" content="myname" />
    <meta property="fb:app_id" content="xxxxxxxxx" />

</head>
<body>
    <div id="fb-root"></div>
    <script>
           window.fbAsyncInit = function() {
            FB.init({
            appId      : 'xxxxxx', // App ID
            channelUrl : '<?php echo $this->baseUrl(); ?>/channel.html', // Channel File
            status     : true, // check login status
            cookie     : true, // enable cookies to allow the server to access the session
            xfbml      : true  // parse XFBML
            });

            // Additional initialization code here

        };

        // Load the SDK Asynchronously

        (function(d){
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
        }(document));                

   </script>    

<div class="fb-like" data-href="<?php echo $this->baseUrl(); ?>" data-send="false" data-layout="button_count" data-width="90" data-show-faces="false" data-font="lucida grande"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:19:03.863

这可能只是一个 Facebook 插件错误，影响插件的不是您的代码，因为它是在 iframe 中加载的。你还在解决这个问题吗？如果是，最好[向 Facebook 报告错误](https://developers.facebook.com/bugs/)或查看是否存在与该问题相关的现有错误。

# c - 使用 gdbserver 进行调试

> ID：14867129
> 
> 赞同：1
> 
> 时间：2013-02-14T03:05:27.410
> 
> 标签：c, netbeans, gdbserver

我正在使用 Netbeans 中的 gdbserver 插件尝试附加到远程调试会话。但是我收到一个错误：“设备的 ioctl 不合适。” 我可以通过从终端启动 gdb 来进行远程调试，但我希望能够使用 Netbeans 进行调试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-28T10:29:57.590

我也有这个问题。我可以通过在我的项目上运行“调试器”“使用 GDB 调试器”来修复它。它失败了，因为我的项目没有在这台机器上运行。但是在这样做之后，我能够成功运行“调试器”“gdbserver”。

# java - 所有java程序都以main开头吗？

> ID：14867130
> 
> 赞同：0
> 
> 时间：2013-02-14T03:05:28.627
> 
> 标签：java

1.  Web 服务器，例如：Apache Tomcat。
2.  应用服务器，例如：Weblogic。
3.  EJB 容器。
4.  安卓java容器。5>所有其他java实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:18:50.677

Usually yes. But no, it is not required ... as eloquently pointed out by this answer ... [https://stackoverflow.com/a/2897323/1481262](https://stackoverflow.com/a/2897323/1481262)

Also, while instrumenting the code of applications (using the `java.lang.instrument` package), the execution starts with the `premain` method before the `main` is executed. - [1] [2].

[1] [http://docs.oracle.com/javase/6/docs/api/java/lang/instrument/package-summary.html](http://docs.oracle.com/javase/6/docs/api/java/lang/instrument/package-summary.html)
[2] [http://dhruba.name/2010/02/07/creation-dynamic-loading-and-instrumentation-with-javaagents/](http://dhruba.name/2010/02/07/creation-dynamic-loading-and-instrumentation-with-javaagents/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T03:56:34.683

Theoretically, you can write a custom launcher instead of java.exe, like here [http://www.codeproject.com/Articles/17352/JVM-Launcher](http://www.codeproject.com/Articles/17352/JVM-Launcher). Take a look at how they invoke `main`:

```
//Find the class
jclass    jcJclass = psJNIEnv->FindClass(mainClassName);

//Find the main method id
jmethodID jmMainMethod = 
    psJNIEnv-> GetStaticMethodID(jcJclass, "main", "([Ljava/lang/String;)V");

//Call the main method.
psJNIEnv->CallStaticVoidMethod(jcJclass, jmMainMethod, joApplicationArgs); 
```

that is, it could be any method

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T03:08:09.467

是的。`main`当您启动一个 java 程序时，您指定要使用的类，并使用命令行参数调用它的静态方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T03:09:25.750

是的，所有的 java 程序都以 main 开头，尽管每个类都没有必要拥有它自己的 main 函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T03:12:07.060

是的，所有程序都应该以 开头`main`，这有点像 JDK 和 JRE 之间的合同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-14T03:17:13.653

JRE[总是从一个`main()`方法](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html#jvms-5.2)开始。但是，可以启动 JRE 并使用它来运行多个独立*程序*。例如，浏览器通常会[在同一个 JRE 中](http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/applet/applet_execution.html)运行它的所有小程序。

# d3.js - D3.js 是 Neo4j Graph DB 数据实时可视化的正确选择吗

> ID：14867132
> 
> 赞同：20
> 
> 时间：2013-02-14T03:06:09.980
> 
> 标签：d3.js, visualization, neo4j, graph-databases, graph-visualization

我是 UW 的一名 CS 研究学生，我的团队正试图实时可视化放入 neo4j 图形数据库的特定网络流量。

我已经阅读了许多不同的工具，例如 gephi、cytoscape、rickshaw（基于 D3.js）、其他一些工具和 D3.js。

到目前为止，我们正在推进 D3.js，但希望获得社区的意见。由于 neo4j，我们不能使用 cytoscape，并且觉得 D3.js 在快速实时环境中处理半大数据时效果最好。

建议？

也许还有另一个问题，但也可以随意输入：实现neo4j的最佳方式？Java、Ruby、node.js？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-05-07T16:08:45.200

对于这类问题，没有灵丹妙药的解决方案，主要取决于您的想法、团队和您拥有的预算（金钱和时间）。

我不会推荐你 D3，除非你必须满足以下条件之一：

*   您想创建一种全新的方式来可视化您的数据
*   您的团队中有技术娴熟的人 - 可以是您 - 使用 D3
*   您已经有其他 D3 小部件/即要集成

如果您没有遇到上述任何条目，我会将 D3 放在一边，并告诉您看一下：

*   [SigmaJS](http://sigmajs.org/)，开源和免费的 Javascript 库。
*   [KeyLines](http://keylines.com/)，商业 Javascript 工具包。
*   [VivaGraphJS](https://github.com/anvaka/VivaGraphJS)，开源和免费的 JS 库。

**免责声明**：我是 KeyLines 开发人员之一。

根据您拥有的数据大小，库的选择可能会发生变化：如果您计划在图表上不超过 3/400 个节点并且不需要特定的样式/动画，那么我认为 SigmaJS 非常好；如果您正在寻找更高级的样式或动画，我会推荐 KeyLines，因为它旨在处理这种情况（提供增量布局）并且它可以毫无问题地扩展到 2000 个节点 - 尽管我可能会建议在这种尺寸的一侧有一个过滤器。

我将 VivaGraph 命名为最后的手段：SigmaJS 也有一个 WebGL 渲染器，并提供更好的渲染恕我直言。
VivaGraphJS 将很快被[ngraph](https://github.com/anvaka/ngraph)取代，它将使用不可知论的方法进行渲染：你可以使用 PIXI、Fabric 或任何你想要的......

当您加载一次资产并一直重复使用它们时，使用 WebGL 渲染器是有意义的：如果您在实时场景中设置图表元素的样式，恕我直言，Canvas 没有优势。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-14T17:21:18.357

My understanding: Gephi doesn't do well with real-time updates; it's usually used on static data.

One major consideration - what is the visualization you wish to present? Is it a directed graph? Cyclic? Weighted? Additional labels?

Some toolkits are 'fixed' in what they can display, but make it easy to present a graph. Others (like d3) are very extensible, so you could create just about anything.

For the purposes of the StackOverflow format, you might get better answers if you can pin down the limitations and needs of your system (actual data rate, thin/thick client, type of viz, etc)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-20T08:04:45.737

查看 vivagraph，它使用 webgl 进行渲染，并且对于更大的网络也可以很好地缩放。他们有一些非常大的例子（FB，亚马逊）。

[http://github.com/anvaka/VivaGraphJS](http://github.com/anvaka/VivaGraphJS)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-14T16:43:47.350

我认为 D3 很棒，但是，最近，在 FOSDEM 上有一个关于 Sigma.js 的演讲，解释说它可以更好地扩展更大的图。另请参阅[http://thewhyaxis.info/hairball/](http://thewhyaxis.info/hairball/)

# vba - 如何将数据添加到excel中的特定行

> ID：14867133
> 
> 赞同：1
> 
> 时间：2013-02-14T03:06:26.720
> 
> 标签：vba, excel

我想问一下如何使用`Userform`.

当我将新产品 A 添加到工作表时，我希望新数据位于产品 A 的最后一行下方，其他产品 B 和 C 也是如此。

当我将新数据输入到现有表中时，有什么方法可以准确地对数据进行排序？

我下面的代码逐行添加数据，无论我输入什么产品，都使表格未排序并显得分散。

```
Private Sub CommandButton1_Click()
    Dim LastRow As Object

    Set LastRow = Sheet1.Range("a65536").End(xlUp)

    LastRow.Offset(1, 0).Value = TextBox1.Text
    LastRow.Offset(1, 1).Value = TextBox2.Text
    LastRow.Offset(1, 2).Value = TextBox3.Text

    MsgBox "One record written to Sheet1"

    If MsgBox("Do you want to continue entering data?", vbYesNo + vbCritical, "Caution") = vbYes Then
        TextBox1.Text = ""
        TextBox2.Text = ""
        TextBox3.Text = ""
    Else
        End
        TextBox1.SetFocus
        Unload Me
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T06:16:48.230

您可以将数据添加到最后一行，然后对数据进行排序。

**1）**要获得最后一行，请参阅此[链接](https://stackoverflow.com/questions/11169445/error-finding-last-used-cell-in-vba)

**2）**要对数据进行排序，您可以使用这个简单的代码。下面的示例代码将对具有标题的 Col A 进行排序

```
With Sheets("Sheet1")
    .Columns("A:A").Sort Key1:=.Range("A1"), Order1:=xlAscending, Header:=xlYes, _
    OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, _
    DataOption1:=xlSortNormal
End With 
```

**3)**关于使用的一个提示：请参阅[此](https://stackoverflow.com/questions/11288798/application-defined-or-object-defined-error-1004)线程`End`中的第 6 点。

**4）**因此，如果我将两个代码结合起来，那么您的代码将如下所示

```
Option Explicit

Private Sub CommandButton1_Click()
    Dim LastRow As Long

    '~~> Change this to the releavnt sheet name
    With Sheets("Sheet1")
        LastRow = .Range("A" & .Rows.Count).End(xlUp).Row + 1

        .Range("A" & LastRow) = TextBox1.Text
        .Range("B" & LastRow) = TextBox2.Text
        .Range("C" & LastRow) = TextBox3.Text

        '~~> Sort the Data. I am assuming that Row 1 has Headers
        .Columns("A:C").Sort Key1:=.Range("A2"), Order1:=xlAscending, Header:=xlYes, _
        OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, _
        DataOption1:=xlSortNormal
    End With

    If MsgBox("One record written to Sheet1\. Do you want to continue entering data?", vbYesNo + vbCritical, "Caution") = vbYes Then
        TextBox1.Text = ""
        TextBox2.Text = ""
        TextBox3.Text = ""
        TextBox1.SetFocus
    Else
      Unload Me
    End If
End Sub 
```

# php - 将mysql数组动态填充到下拉菜单中

> ID：14867134
> 
> 赞同：1
> 
> 时间：2013-02-14T03:06:32.443
> 
> 标签：php, html, mysql

我有一个数据库，我想将数据放到网站上。它包含按名称和 ID 列出的状态。按 id、namne 和 state 列出的县，其中包含他们的 ID，然后是存在的俱乐部，并引用了他们所在的县 id 及其实际数据的列。

我有什么：

使用状态 ID 和名称填充自身的下拉菜单。

我想完成的事情：

在选择 state 时，假设 ny ，取它的 id 并使用它来为县下拉列表收集另一个 mysql 数组。我希望它在选择 state 时动态发生，甚至可能在下拉列表旁边给出结果计数。

```
$resstate = mysql_query("SELECT * FROM state ORDER by longstate;") or die("Note: " . mysql_error());
State:
   <select name="State" size=1>
     <?
        while( $rs = mysql_fetch_array( $resstate ) ) {
            echo "<option value=" .$rs['id'] . ">" . $rs['longstate'] . "</option>";
        }
   echo "</select>";
?> 
```

我知道我可以在第一个下拉菜单中使用 JavaScript `onChange="this.form.submit()"`，但据我了解，那时我会创建一个新页面并且不知道我是否可以保留状态下拉菜单的功能，如果你想去纽约的时候不小心选择了新罕布什尔州。

这是填充下拉列表的当前数组的示例：

[http://snowmobileamerica.com/countytest.php](http://snowmobileamerica.com/countytest.php)

- - 编辑 - -

使用 Dagons Advice ，我研究了 Ajax。

我制作了一个 php 文件，它应该根据对 getcounty.php?q= 的引用来查询数据库

该文件创建如下：

```
<?php
$q=$_GET["q"];

$cn=mysql_connect("localhost","user","password") or die("Note: " . mysql_error());

mysql_select_db("snowusa_clubs", $cn);

$sql="SELECT * FROM county WHERE state_id = '".$q."' ORDER by name";

$result = mysql_query($sql);

echo "<select name="County" size=1>";

while($rc = mysql_fetch_array($result))
{
echo "<option value=" .$rc['id'] . ">" . $rc['name'] . "</option>";
 }

 echo "</select>";

mysql_close($cn);
 ?> 
```

如果我尝试手动运行它 [http://www.snowmobileamerica.com/getcounty.php?q=33](http://www.snowmobileamerica.com/getcounty.php?q=33)我收到 500 内部服务器错误...

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:37:05.553

尝试向元素添加 id，然后使用 jquery 对处理程序进行 ajax 调用：

```
$("#State").change(function() {
$.post("path/to/request handler/" , { "State" : $(this).val() },
function(data){
    if (data == "OK"){
        //add some elements here
    } else {
        //handle an error here
    }
}); 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T04:35:34.747

还不能发表评论。但对于第二个问题，请尝试：

```
<?php
$q=$_GET["q"];

$cn=mysql_connect("localhost","user","password") or die("Note: " . mysql_error());
echo "Conn ok<br>";
mysql_select_db("snowusa_clubs", $cn);
echo " Database opened<br>"; 
$sql="SELECT * FROM county WHERE state_id = '$q' ORDER by name";

$result = mysql_query($sql);
echo " Database queried <br>";

echo "<select name='County' size=1>";

while($rc = mysql_fetch_array($result))
{
echo "<option value='" .$rc['id'] . "'>" . $rc['name'] . "</option>";//added single quotes in the value
 }
echo "</select> ";

mysql_close($cn);
?> 
```

# xcode - 存档后从 xcode 在设备上运行

> ID：14867141
> 
> 赞同：1
> 
> 时间：2013-02-14T03:07:01.497
> 
> 标签：xcode

我在 Xcode 4.5.2 中有一个项目。我能够从 Xcode 将项目运行到设备上，直到我使用“存档”功能构建了一个临时版本。（更改代码签名后）。

现在，当设备插入时，我收到错误“CodeSign 错误：SDK 'iOS 6.0' 中的产品类型'Application' 需要代码签名”。

我已经检查了在构建设置中的“代码签名”下选择了哪些配置文件，尝试了通用的“*”配置文件和我用来构建临时版本的配置文件（对于调试和发布版本）。

让我困惑的是我可以构建项目并通过 iTunes 将其安装到设备上而不会出现问题。在使用现在连接的设备进行构建时，它现在似乎正在运行“发布”版本而不是“调试”版本。然而，该设备在配置文件中，所以它不应该以任何一种方式工作吗？

我试过了

*   重新启动xcode，
*   删除派生数据（来自查找器，而不是通过组织者），
*   删除并重新安装配置文件。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T06:01:36.353

创建配置文件时，请确保它是一个分发配置文件，上面有您的设备 UDID。

我使用一个名为 www.testflightapp.com 的网站，它也将帮助您自动执行此过程。希望有帮助

# c# - 填充多个 ListBox 时创建响应式 WPF UI 的技巧是什么？

> ID：14867148
> 
> 赞同：6
> 
> 时间：2013-02-14T03:07:57.957
> 
> 标签：c#, wpf, multithreading, backgroundworker, dispatcher

我正在开发一种支持工具，该工具`TabItem`在`TabControl`. 每个`TabItem`代表一个员工，在每个员工`Tab`s 中都有另一个`TabControl`包含额外`TabItem`的 s。这些`TabItem`s 代表该员工的 Outlook 文件夹（如“正在工作”、“已完成”等）。这些文件夹`TabItem`中的每一个都包含一个`ListBox`绑定到`ObservableCollection`属于`MailItem`该 Outlook 文件夹的一个。这些不是庞大的收藏品——每个`ListBox`. 尽管总的来说，在所有`TabItem`s 中可能有 100 个左右的项目。

我目前构建应用程序的方式是启动应用程序并使用适当的员工选项卡和子选项卡填充屏幕。这个过程相当快，我很高兴。我创建了一个静态`Global.System.Timer`，所有文件夹`TabItem`的代码隐藏都与之同步。因此，应用程序每 5 分钟将清除所有`ObserverableCollection`s 并重新扫描 Outlook 文件夹。

问题是扫描过程会使应用程序停止。我曾尝试使用 a`BackgroundWorker`从 Outlook 收集邮件作为后台进程，然后将一个`List<MailItem>`对象传递给一个`RunWorkerCompleted`方法，该方法然后运行一个`this.Dispatcher.BeginInvoke`清除相应的进程的进程，`ObservableCollection`然后将项目从`List<MailItem>`后面添加到`ObservableCollection`. 我什至将其设置`Dispatcher`为较低的优先级。

尽管如此，该应用程序在扫描/填充`ListBox`过程中感觉非常笨重。我不清楚如何更好地设计它，我承认我对此有些陌生。我意识到清除每个`ObservableCollection`s 效率低下，但 Outlook 文件夹更改事件并不是特别可靠，所以我需要每隔一段时间进行一次强力重新扫描以确保所有`MailItem`s 都被表示。

下面是我的 WPF 控件代码，其中包含`ListBox`. 请记住，`ListBox`一次大约有 10 个这些控件处于活动状态。

```
// This entire UserControl is essentially a ListBox control
public partial class TicketListView : UserControl
    {
        private TicketList _ticketList; //this is the ObservableCollection object
        private Folder _folder;         // Outlook Folder

        public TicketListView(Folder folder)
        {
            InitializeComponent();

            _ticketList = this.FindResource("TicketList") as TicketList; 
            _folder = folder; 

            GlobalStatics.Timer.Elapsed += new System.Timers.ElapsedEventHandler(Timer_Elapsed);
        }

        private void Timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
        {
            Refresh();
        }

        private void Refresh()
        {
            BackgroundWorker worker = new BackgroundWorker();

            worker.DoWork += new DoWorkEventHandler(worker_DoWork);
            worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(worker_RunWorkerCompleted);
            worker.RunWorkerAsync();
        }

        private void worker_DoWork(object sender, DoWorkEventArgs e)
        {
            List<MailItem> tickets = new List<MailItem>();
            string filter = TicketMonitorStatics.TicketFilter(14);
            Items items = _folder.Items.Restrict(filter);

            try
            {
                foreach (MailItem mi in items.OfType<MailItem>())
                {
                    tickets.Add(mi);
                }
            }
            catch (System.Exception) { }

            e.Result = tickets;
        }

        private void worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            List<MailItem> tickets = e.Result as List<MailItem>;

            this.Dispatcher.BeginInvoke(new System.Action(delegate
                {
                    _ticketList.Clear();
                    PopulateList(tickets);
                }));

            BackgroundWorker worker = sender as BackgroundWorker;
            worker.Dispose();
        }

        private void PopulateList(List<MailItem> ticketList)
        {
            foreach (MailItem mi in ticketList)
            {
                this.Dispatcher.BeginInvoke(new System.Action(delegate
                    {
                        _ticketList.Add(mi);
                    }), System.Windows.Threading.DispatcherPriority.SystemIdle);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:21:05.497

根据您的要求，特别是在 WPF 中，您不应该使用计时器或后台工作人员来保持视图响应。相反，您应该使用 MVVM 模式设计您的应用程序。MVVM是Model、View和View Model，这里如果model有变化，model更新View Model，view model更新view。这是通过继承“INotifyPropertyChanged”接口来完成的。

这是一个简单的例子

Xaml 部分：

```
<Window x:Class="SimpleMVVM.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="259" Width="445">
    <Grid Margin="0,0,2,-3">
        <Button x:Name="button" Content="Button" HorizontalAlignment="Left" Margin="10,33,0,0" VerticalAlignment="Top" Width="75"/>
        <Label x:Name="label" Content="{Binding Name}" HorizontalAlignment="Left" Margin="103,23,0,0" VerticalAlignment="Top" Width="220" BorderBrush="Black" BorderThickness="1" Height="32" Padding="0"/>

    </Grid>
</Window> 
```

还有 .cs 部分

```
using System.ComponentModel;
using System.Windows;

namespace SimpleMVVM
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        private AnimalViewModel _animal= new AnimalViewModel ();

        public MainWindow()
        {
            InitializeComponent();

            DataContext = _animal;
            button.Click += (sender, e) => _animal.Name = "Taylor" ;
        }
    }

    public class AnimalViewModel : AnimalModel 
    {
        public AnimalViewModel ()
        {
        }        
    }

    public class AnimalModel : INotifyPropertyChanged
    {
        private string _name;

        public event PropertyChangedEventHandler PropertyChanged;

        public string Name
        {
            get { return _name; }
            set
            {
                if (_name != value)
                {
                    _name = value;
                    OnPropertyChanged("Name");
                }
            }
        }

        private void OnPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChangedEventArgs args = new PropertyChangedEventArgs(propertyName);
                PropertyChanged(this, args);
            }
        }
    }

} 
```

无法想象按钮单击是由调度程序触发的更新，您首先更新模型，触发属性更改事件来更新视图。

使用这种模式，您的代码将更加可靠。

我希望这有帮助。

问候杰根

# objective-c - 如何将 UIImage 添加到 NSMutableArray

> ID：14867154
> 
> 赞同：1
> 
> 时间：2013-02-14T03:08:23.400
> 
> 标签：objective-c, xcode, uiimage, nsmutablearray

我正在尝试`UIImage`使用以下代码将我的 web 服务添加到我的 NSMutableArray：

```
for (int i=0; i<[totalRowCountString intValue]; i++)
{    
    NSString *criticsRatingString = [[JSON valueForKeyPath:@"movies.ratings.critics_rating"] componentsJoinedByString:@" "];
    NSLog(@"criticsRatingString: %@", criticsRatingString);

    if ([criticsRatingString isEqualToString:@"Certified Fresh"])
    {
        self.ratingImage = [UIImage imageNamed:@"rt_certified_fresh.png"];
    }
    else if ([criticsRatingString isEqualToString:@"Fresh"])
    {
        self.ratingImage = [UIImage imageNamed:@"rt_fresh.png"];
    }
    else if ([criticsRatingString isEqualToString:@"Rotten"])
    {
        self.ratingImage = [UIImage imageNamed:@"rt_rotten.png"];
    }
    else if ([criticsRatingString isEqualToString:@"Spilled"])
    {
        self.ratingImage = [UIImage imageNamed:@"rt_spilled.png"];
    }
    else if ([criticsRatingString isEqualToString:@"Upright"])
    {
        self.ratingImage = [UIImage imageNamed:@"rt_upright.png"];
    }

    [tomatorRatingImages addObject:self.ratingImage];
    NSLog(@"tomatoRatingImages: %@", tomatorRatingImages);
} 
```

但是我的tomatoRatingImages 的NSLog 返回NULL。任何想法为什么它返回NULL？

更新：我的 NSMutableArray 已经在我的 viewWillAppear 方法中初始化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T03:09:38.327

您必须在向其添加对象之前初始化该数组。

```
NSMutableArray *tomatorRatingImages = [[NSMutableArray alloc] init]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T07:35:57.980

```
NSMutableArray * tomatorRatingImages =[[NSMutableArray alloc]init];

[tomatorRatingImages  addObject:[UIImage imageNamed:@"rt_spilled.png"]];

[tomatorRatingImages  addObject:[UIImage imageNamed:@"rt_spilled1.png"]];

[tomatorRatingImages  addObject:[UIImage imageNamed:@"rt_spilled2.png"]]; 
```

您可以在 NSMutableArray 中输入多个图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T09:30:41.777

如果您有 NSMutableArray 实例的属性，最好编写 getter 来初始化它。它只负责初始化变量，并且仅在需要时才加载它。

```
 -(NSMutableArray *) tomatorRatingImages {
         if(_tomatorRatingImages == nil) {
               _tomatorRatingImages = [NSMutableArray alloc] init];
         }
         return _tomatorRatingImages;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T06:51:54.830

像这样初始化

```
NSMutableArray * tomatorRatingImages =[[NSMutableArray alloc]initWithCapacity:3]; 
```

# c++ - C++ 成员变量混淆

> ID：14867156
> 
> 赞同：0
> 
> 时间：2013-02-14T03:08:34.377
> 
> 标签：c++

我正在学习 C++（来自 Java），这让我很烦，说我有......

```
class Foo {

public:

    Bar &x; // <- This is a ref, Bar is not instantiated (this is just a placeholder)
    Bar *y; // <- This is a pointer, Bar is not instantiated (this is just another placeholder)
    Bar z;  // <- What is this???

};

class Bar {

public:

    Bar(int bunchOfCrap, int thatNeedsToBeHere, double toMakeABar);

}; 
```

在此示例中，Bar 有一个构造函数，该构造函数需要指定一堆字段才能创建“Bar”。x 和 y 都没有创建 Bar，我知道 x 创建了一个可以指向 Bar 的引用，而 y 创建了一个也可以表示 Bar 的指针。

我不明白的是 z 到底是什么。

*   是酒吧吗？如果是这样，如何给它 Bar 的唯一构造函数？

*   它是属于可以初始化为 Bar 的 Foo 实例的 Bar 大小的内存块吗？

*   或者是别的什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T03:17:36.960

出于教学原因，让我们尝试编译这段代码：

```
class Bar {
public:
    Bar(int bunchOfCrap, int thatNeedsToBeHere, double toMakeABar);
};

class Foo {
public:
    Bar &x; // <- This is a ref, Bar is not instantiated (this is just a placeholder)
    Bar *y; // <- This is a pointer, Bar is not instantiated (this is just a *safer* placeholder)
    Bar z;  // <- What is this???
};

int main() {
    Foo foo;
} 
```

输出：

```
c++     uuu.cpp   -o uuu
uuu.cpp:10:7: error: implicit default constructor for 'Foo' must explicitly initialize the reference member 'x'
class Foo {
      ^
uuu.cpp:14:10: note: declared here
    Bar &x; // <- This is a ref, Bar is not instantiated (this is just a placeholder)
         ^
uuu.cpp:10:7: error: implicit default constructor for 'Foo' must explicitly initialize the member 'z' which does not
      have a default constructor
class Foo {
      ^
uuu.cpp:16:9: note: member is declared here
    Bar z;  // <- What is this???
        ^
uuu.cpp:2:7: note: 'Bar' declared here
class Bar {
      ^
uuu.cpp:21:9: note: implicit default constructor for 'Foo' first required here
    Foo foo;
        ^
2 errors generated.
make: *** [uuu] Error 1 
```

正如它所说，您*必须*同时初始化成员引用`Bar &x`和成员变量`Bar z;`，因为`Bar`没有默认构造函数。`y`不必初始化，默认为`NULL`.

两者`x`和`y`间接地指代对象。您无法更改`x`所指的内容（因此必须在实例化时对其进行初始化`Foo`）。您可以更改`y`所指的内容。`z`是一个`Bar`大小的内存块，位于内部`Foo`；为了让你像这样合法地声明一个成员变量，你必须把`Bar`before的完整定义放好，`Foo`以便编译器知道有多大`Bar`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T03:12:49.773

`z`是 的一个实例`Bar`，并且必须在 is 时构造`Foo`，因此：

```
class Foo {
public:
    Foo(…)
        : x(<instance of or reference to Bar>),
          y(<pointer to Bar>), // optional
          z(<Bar ctor params>)
    { … } 
```

请注意，两者`x`和都`z`必须在构造过程中进行初始化，而省略`y`的初始化是合法的（尽管有问题）。

`z`占用与父实例相同的内存`Foo`，但它是 的一个实例`Bar`，而不仅仅是一块`Bar`大小的内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T03:13:07.323

1.  是的，它是一个 bar:`z`是 type 的**值**标识符`Bar`。如果您没有定义默认构造函数，这将生成编译器错误（编译器通常会这样做，但如果您已经定义了至少一个构造 -> 则不会）。
2.  是的，它是 Bar 大小的内存块，在分配时`Foo`分配。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T03:14:19.430

> 是酒吧吗？如果是这样，如何给它 Bar 的唯一构造函数？

是的，z 是条形。如果`Bar`没有默认构造函数，则必须`Bar`在 Foo中初始化`member initializers list`。下面的示例忽略 x, y 初始化：

```
Foo::Foo(int param1, int param2, int param3)
: z(param1, param2, param3)
{
} 
```

> 它是属于可以初始化为 Bar 的 Foo 实例的 Bar 大小的内存块吗？

是的，Bar 对象在 Foo 对象内对齐

# c - 如何检查文件是否在 C 中被禁止？

> ID：14867163
> 
> 赞同：0
> 
> 时间：2013-02-14T03:09:48.387
> 
> 标签：c, file, http, io

基本上我正在处理一个 html 服务器分配，部分分配给出了“错误 403 FORBIDDEN”消息，虽然我知道如何检查文件是否存在，但我如何检查它是否被禁止。

我正在做的是打开文件。

```
File* filein = fopen(pathname,"r"); 
```

让我知道我可以做些什么来检查文件是否被禁止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:22:40.953

我认为禁止的文件是无法访问的（例如 chmod 440 设置为未运行服务器的用户），因此当您由于缺少权限而无法打开文件时，您可以通知用户，例如 c 中的代码：

```
#include <stdio.h>

int main()
{
    FILE *file = fopen("file.txt", "r");
    if (file == NULL)
        perror("Error");
    fclose(file);
    return 0;
} 
```

记得让文件无法访问 - 例如`chmod 000 file.txt`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T03:38:55.633

`fopen()`如果失败则返回一个空指针。根据库的实现，`errno`可以设置全局变量来指示失败的原因。

通常，无效的文件权限会导致`EACCES`错误，因此在 failed 之后`fopen()`，检查是否`errno`等于`EACCES`（记住`#include <errno.h>`）。如果不是，它可能由于与文件权限无关的其他错误而无法打开。

[这](http://pubs.opengroup.org/onlinepubs/009604599/basedefs/errno.h.html)是一个页面，其中包含您可以检查的其他一些错误常量。

# php - 从 Ebay 上抓取图像

> ID：14867166
> 
> 赞同：0
> 
> 时间：2013-02-14T03:10:19.387
> 
> 标签：php, xpath, curl, xquery

我正在尝试从 ebay 上删除产品列表。我可以获得除图像源之外的所有信息。我的查询检索图像的所有信息，即 alt、高度等，但不检索源。

```
One of the product link I am trying to scrape.
http://www.ebay.com.au/itm/REAR-RAISED-KING-SPRINGS-2-03-ON-TOYOTA-L-CRUISER-PRADO-120-150-GX-KTPR-102-/170945971135?pt=AU_Car_Parts_Accessories&hash=item27cd2c83bf

Query I used
$query1=".//*[@id='i_vv4-35']";

Test to chek if attribute exist  returns nothing.
$element1->hasAttribute('src')

Get attribute method.
 $element1->getAttribute('src') 
```

问候阿布纳布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:13:52.430

那是因为 eBay，可能是为了阻止你和其他人做你想做的事情，实际上并没有使用`<img>`元素。图像是`<a>`一个背景设置为图像的元素：

```
background: url(http://q.ebaystatic.com/aw/pics/s.gif) no-repeat 0 0; 
```

您需要解析 css 并从您要查找的元素的声明中提取背景属性。

# objective-c - 使用协议与继承的优缺点是什么？

> ID：14867172
> 
> 赞同：5
> 
> 时间：2013-02-14T03:11:06.890
> 
> 标签：objective-c, inheritance

在objective-c中？

我做了一堂课，然后我决定要另一堂课，就像第一堂课一样。我应该使用协议并确保两个类都支持该协议，还是应该创建一个父类并决定这两个类从那个类继承？

笔记：

这些类是：Business、Catalog、AddressAnnotation（目前仅适用于企业）和 AddressAnnotationView（目前仅适用于企业）。我希望在目录上也能做同样的事情。还有 BGGoogleMapCacheForAllAnnotations 管理注释何时聚集在一起（现在应该能够处理目录和业务的 AddressAnnotation。还有我想变成父类的 BGGoogleMap 视图控制器。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T04:37:07.593

如果使用协议，则必须定义两种类类型共享的方法两次。协议通常是为特定模式保留的，例如委托模式，以增加安全性并让您更难犯错误，或者当已经嵌入类层次结构中的多个类需要共享公共方法并将这种共享记录在某种方式。如果一个类可以表示为另一个类的更专业的版本，则应该继承。

例如，假设您`Vehicle`的游戏中有一个类知道如何做各种事情，例如四处走动。如果你想创建一个`Car`类，你可能会继承这个`Vehicle`类，这样你就可以继承它的所有方法实现；要么批发使用它们，要么实现你自己的方法版本，可能在调用超类的实现之前执行一些特定于子类的任务。*子类化是为了当你想继承你的超类的特征和行为，同时以某种方式修改它。*当必须将其他数据（例如实例变量）添加到类时尤其如此，因为您不能对类别执行此操作（尽管您可以使用`Class Extension`，通常被视为一种私有接口）。通常，子类因此比它们的超类具有更专门的用途。

协议就是这样，协议。它们的存在是为了防止你搞砸或忘记某些东西，并确保每个对象都按照它应该做的事情，当类的行为不像他们应该做的那样时触发编译器警告。这对于委托等模式很重要，因为它是确保委托实现您需要的方法的唯一方法，而不仅仅是打破封装并知道您的委托是什么类型的对象。例如，看看下面的代码，来自我的一个项目。

```
//SGSprite.h
@protocol SGSpriteDelegate
    - (BOOL) animation:(int)animationIndex willCompleteFrameNumber:(int)frame forSprite:(id)sender;
@end

@interface SGSprite : NSObject
@property (nonatomic, assign) id<SGSpriteDelegate> delegate;
@end

//SGViewController.h
@interface SGViewController : UIViewController <SGSpriteDelegate>
    //...dreadfully boring stuff
@end 
```

许多课程利用我的`SGSprite`课程来渲染带纹理的 2D 四边形。有时，他们需要知道精灵何时到达动画的某个帧，因此`SGSprite`实例需要在其委托上调用一个方法来让他们知道何时到达某些帧。确保此类实例的委托实现此方法的唯一方法是使用协议，如果有人试图分配不作为委托的对象，确实会警告我。您会注意到，如果我简单地将委托设置为普通委托，那么`id`每当我在委托上调用此方法时都会收到警告，因为找不到它的实现，而如果我导入委托的标头/静态类型委托，则该类不再被很好地封装。

在大多数情况下，您在技术上不需要协议；您可以在通常遵守所述协议的所有类中定义所有没有协议的方法，并且一切都会正常工作。但是，这些常用方法不再记录在案。因此，除了知道某些类或匿名对象实现您需要它们实现的方法的安全性之外，您还可以快速判断什么做什么以及如何做。*协议适用于您需要确保类或类的实例实现某些方法时，尤其是当不应该知道对象的类型以保持类被封装时。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T04:33:06.213

有很多因素会影响这个决定。一方面，当你说另一个班级“像头等舱”时，这是什么意思？这是否意味着他们会以完全相同的方式做 90% 的相同事情？这是否意味着他们会做很多相同类型的事情，但每件事的方式都略有不同？

如果第一类中的许多现有方法将按原样工作或在第二类中几乎没有修改，那么子类化可以让您“免费”获得所有这些方法，这样您就可以专注于差异。但是，如果您需要重写大部分代码，并且只想将这两个类定义为执行类似的操作，那么协议可能更有意义。

我个人专门使用子类化，主要是因为我没有遇到协议在我的代码中对我有意义的情况——当然，一段时间后它更多的是出于习惯而不是有意识的决定。当我开始将我的应用程序转换为使用 Core Data 时，子类化非常适合，因为 Core Data 提供了创建具有继承属性和关系的子实体的能力。这使得从概念上更容易掌握。

如果您考虑当前的代码，您已经在子类化（NSObject、视图控制器等）并且可能使用协议（NSCoding、视图委托等）。想想你如何使用那些现有的类和协议，以及这些用例如何应用于你自己的类。

# python - Python 处理程序中的 SyntaxError

> ID：14867180
> 
> 赞同：-2
> 
> 时间：2013-02-14T03:11:51.650
> 
> 标签：python, google-app-engine

我正在使用 Google App Engine 提供的 urlfetch 来获取 URL 内容。但我收到 500 内部服务器错误。

这是我正在使用的完整应用程序代码：-

**比较-hatke.py**

```
import urllib2
from google.appengine.api import urlfetch
from google.appengine.ext import webapp
from google.appengine.ext.webapp.util import run_wsgi_app
import datetime

class MainPage(webapp.RequestHandler):
    def curlTry:
        url = "http://www.google.com/"
        result = urlfetch.fetch(url)
        if result.status_code == 200:
            print(result.content)

application = webapp.WSGIApplication([('/', MainPage)],debug=True)

def main():
    run_wsgi_app(application)

if __name__ == '__main__':
    main() 
```

**应用程序.yaml**

```
application: compare-hatke
version: 3
runtime: python27
api_version: 1
threadsafe: false

handlers:
- url: /.*
  script: compare-hatke.app 
```

这是**错误日志**。我无法理解他们提到的语法错误

```
 Traceback (most recent call last):
  File "/python27_runtime/python27_lib/versions/1/google/appengine/runtime/wsgi.py", line 196, in Handle
    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
  File "/python27_runtime/python27_lib/versions/1/google/appengine/runtime/wsgi.py", line 269, in _LoadHandler
    raise ImportError('%s has no attribute %s' % (handler, name))
ImportError: <module 'compare-hatke' from '/base/data/home/apps/s~compare-hatke/3.365290288779373200/compare-hatke.pyc'> has no attribute app 
```

请告诉我我在哪里失踪。谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T03:20:21.873

类中的 Python 方法需要引用函数定义中的 self 参数才能识别它所属的实例。这是您的基本语法错误。

更正这一点，您仍然需要设置一个路由，以便您的 MainPage 类可以处理 GET 请求。这很容易通过在 GAE 中使用 get 方法来完成。一旦你有这个工作，文档就会向你展示其他方法。

试试这个：

```
class MainPage(webapp.RequestHandler):
    def get(self): # responds to http GET, and adds self parameter
        url = "http://www.google.com/"
        result = urlfetch.fetch(url)
        if result.status_code == 200:
            print(result.content) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T05:49:08.997

您正在使用带有 main() 方法的 python2.5 样式应用程序定义。

您需要重新访问 2.7 教程[https://developers.google.com/appengine/docs/python/gettingstartedpython27/helloworld](https://developers.google.com/appengine/docs/python/gettingstartedpython27/helloworld)，您会看到您的应用程序应该看起来像

```
import urllib2
from google.appengine.api import urlfetch
from google.appengine.ext import webapp2

import datetime

class MainPage(webapp2.RequestHandler):
    def curlTry(self):
        url = "http://www.google.com/"
        result = urlfetch.fetch(url)
        if result.status_code == 200:
           self.response.write(result.content)

app = webapp2.WSGIApplication([('/', MainPage)],debug=True) 
```

以匹配您的 app.yaml 定义。您的 app.yaml 指的是`compare-hatke.app`在某处定义的`compare-hatke.py`需求`app`，（根据我的示例）

此外，您应该将 webapp2 与 2.7 一起使用，并且不确定您的 curlTry 类方法将如何被调用，但这是您的问题的一个单独问题。

我建议您从头开始并完成 2.7 教程，因为您在这里缺少一些内容。

我已经修改了代码以反映应该使用 response.write，并使处理程序成为实例方法而不是类方法。但是，您当前的 app.yaml 不会根据您发布的 app.yaml 和当前代码将 GET/POST 请求映射到 curlTry。再看看我在这里链接的教程。

吨

# ruby-on-rails - 在属性读取器方法上设置 Rails activerecord 脏标志

> ID：14867183
> 
> 赞同：0
> 
> 时间：2013-02-14T03:12:13.690
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rails-activerecord

我试图避免让我的模型在保存时设置 updated_at 属性而不进行任何更改。通过调试过程，我注意到“已更改”数组列出了一个属性，我知道该属性实际上并未从表单中更改。然而，该属性确实有一个 reader 方法。该方法给出的结果与其当前状态不同。有没有办法在阅读器方法中手动清除该属性上的“已更改”标志？

**Wine.rb**

```
before_save :check_for_changes

def blends
    if read_attribute(:blends).nil?
    "100% #{ name.split(" ").map { |w| varietals.include?(w.downcase) ? w : nil }.compact.join(" ") }"
    else
    read_attribute(:blends)
    end
end

def check_for_changes
    return changed?
end 
```

如果没有列出任何混合百分比，基本上“混合”方法会发出“100% [品种名称]”。这显然会干扰“已更改”标志...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:37:38.980

我避免覆盖字段读取器，因为这使我无法直接访问存储在数据库中的值（即无需调用 read_attribute）以获取其他逻辑。当您需要检查数据库中是否确实存储了一个值或遇到存储了一个值但它也是“100% some-varietal”格式的情况时，这很麻烦，我想如果你有为此的表单字段。

我通常添加这样的东西：

```
def blends_description
  if blends.nil?
    "100% #{ name.split(" ").map { |w| varietals.include?(w.downcase) ? w : nil }.compact.join(" ") }"
  else
    blends
  end
end 
```

# windows - 如何强制退出 Git Bash？

> ID：14867184
> 
> 赞同：4
> 
> 时间：2013-02-14T03:12:20.710
> 
> 标签：windows, git, bash

我通过 git bash 在我的服务器上通过 ssh 在 Nano 中。而我什么也做不了。我可以上下滚动，但不知何故我把它搞砸了。

我该如何戒掉它？我试图找到进程，但 windows 无法告诉我

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T04:19:51.637

使用 PowerShell

```
kill -n bash 
```

[停止进程](http://ss64.com/ps/stop-process.html)

# python - Twisted / Starpy FastAgi 应用程序仅正确处理一个呼叫

> ID：14867186
> 
> 赞同：3
> 
> 时间：2013-02-14T03:12:40.383
> 
> 标签：python, twisted, asterisk, fastagi

我正在使用 Starpy 和 Twisted 为 Asterisk IVR 实现开发一个 FastAgi 应用程序。到目前为止，该应用程序在只有一个电话呼叫时运行良好。

在建立第二个呼叫后，来自 Asterisk 的所有连续响应都将发送到第二个呼叫：属于第一个呼叫的流音频在第二个呼叫中听到，Hangup() 断开第二个呼叫（第​​一个保持连接直到手动断开与软电话的连接）

我正在使用带有 Elastix 发行版的 X-lite 软件电话。我的 FastAgi 服务器在 Windows 笔记本电脑上。在 Extensions_custom.conf 我有这些条目来路由呼叫：

扩展 => 2000,1,AGI(agi://10.0.0.7:4573) 扩展 => 2000,n,Hangup()

这是在服务器上设置协议的方式：

```
logging.basicConfig()
fastagi.log.setLevel( logging.DEBUG )
f = fastagi.FastAGIFactory(MyIVRApplication())
reactor.listenTCP(4573, f, 50, '10.0.0.167') 
reactor.run() 
```

我使用 starpy 提供的示例之一构建了我的应用程序，即 DialPlan() 应用程序，它只播放应用程序被访问的次数。即使那个应用程序在运行而不是我的应用程序时也有同样的问题，只能正确处理一个调用。

我使用的是无线网络，但使用电缆时也会发生同样的情况。我尝试了带有星号的虚拟机（在 virtualbox 中）和物理机。一样。在 Android 手机上安装了不同的软件电话。一样。使用物理IP电话。一样。我唯一还没有尝试过的是将我的 FastAgi 服务器移动到 linux 机器上，而不是使用我的 windows 笔记本电脑。

任何帮助将不胜感激。

提前致谢。

赫克托

编辑：

我正在从 Asterisk 添加 AGI 调试日志。如您所见，在第二个呼叫建立后，所有的 Tx 和 Rx 命令都从第二个通道发送/接收。Asterisk 不再与保持连接的第一个通道对话。

```
== Using SIP RTP TOS bits 184
== Using SIP RTP CoS mark 5
-- Executing [2000@from-internal:1] AGI("SIP/4001-00000006", "agi://10.0.0.167") in new stack
AGI Tx >> agi_network: yes
<SIP/4001-00000006>AGI Tx >> agi_request: agi://10.0.0.167
<SIP/4001-00000006>AGI Tx >> agi_channel: SIP/4001-00000006
<SIP/4001-00000006>AGI Tx >> agi_language: en
<SIP/4001-00000006>AGI Tx >> agi_type: SIP
<SIP/4001-00000006>AGI Tx >> agi_uniqueid: 1360854557.6
<SIP/4001-00000006>AGI Tx >> agi_version: 1.8.11.0
<SIP/4001-00000006>AGI Tx >> agi_callerid: 4001
<SIP/4001-00000006>AGI Tx >> agi_calleridname: device
<SIP/4001-00000006>AGI Tx >> agi_callingpres: 0
<SIP/4001-00000006>AGI Tx >> agi_callingani2: 0
<SIP/4001-00000006>AGI Tx >> agi_callington: 0
<SIP/4001-00000006>AGI Tx >> agi_callingtns: 0
<SIP/4001-00000006>AGI Tx >> agi_dnid: 2000
<SIP/4001-00000006>AGI Tx >> agi_rdnis: unknown
<SIP/4001-00000006>AGI Tx >> agi_context: from-internal
<SIP/4001-00000006>AGI Tx >> agi_extension: 2000
<SIP/4001-00000006>AGI Tx >> agi_priority: 1
<SIP/4001-00000006>AGI Tx >> agi_enhanced: 0.0
<SIP/4001-00000006>AGI Tx >> agi_accountcode:
<SIP/4001-00000006>AGI Tx >> agi_threadid: -1219851376
<SIP/4001-00000006>AGI Tx >>
<SIP/4001-00000006>AGI Rx << ANSWER
<SIP/4001-00000006>AGI Tx >> 200 result=0
<SIP/4001-00000006>AGI Rx << STREAM FILE "custom/bienvenida" '' 0
    -- Playing 'custom/bienvenida' (escape_digits='') (sample_offset 0)
<SIP/4001-00000006>AGI Tx >> 200 result=0 endpos=24402
<SIP/4001-00000006>AGI Rx << GET DATA "custom/cuando_este_listo" 5000.0 1
    -- <SIP/4001-00000006> Playing 'custom/cuando_este_listo.slin' (language 'en')
<SIP/4001-00000006>AGI Tx >> 200 result=
<SIP/4001-00000006>AGI Rx << STREAM FILE "custom/14" '' 0
    -- Playing 'custom/14' (escape_digits='') (sample_offset 0)
<SIP/4001-00000006>AGI Tx >> 200 result=0 endpos=7028
<SIP/4001-00000006>AGI Rx << STREAM FILE "custom/menos" '' 0
    -- Playing 'custom/menos' (escape_digits='') (sample_offset 0)
<SIP/4001-00000006>AGI Tx >> 200 result=0 endpos=6762
<SIP/4001-00000006>AGI Rx << STREAM FILE "custom/9" '' 0
    -- Playing 'custom/9' (escape_digits='') (sample_offset 0)
<SIP/4001-00000006>AGI Tx >> 200 result=0 endpos=5666
<SIP/4001-00000006>AGI Rx << GET DATA "" 5000.0 2
  == Using SIP RTP TOS bits 184
  == Using SIP RTP CoS mark 5
    -- Executing [2000@from-internal:1] AGI("SIP/4002-00000007", "agi://10.0.0.167") in new stack
AGI Tx >> agi_network: yes
<SIP/4002-00000007>AGI Tx >> agi_request: agi://10.0.0.167
<SIP/4002-00000007>AGI Tx >> agi_channel: SIP/4002-00000007
<SIP/4002-00000007>AGI Tx >> agi_language: en
<SIP/4002-00000007>AGI Tx >> agi_type: SIP
<SIP/4002-00000007>AGI Tx >> agi_uniqueid: 1360854568.7
<SIP/4002-00000007>AGI Tx >> agi_version: 1.8.11.0
<SIP/4002-00000007>AGI Tx >> agi_callerid: 4002
<SIP/4002-00000007>AGI Tx >> agi_calleridname: device
<SIP/4002-00000007>AGI Tx >> agi_callingpres: 0
<SIP/4002-00000007>AGI Tx >> agi_callingani2: 0
<SIP/4002-00000007>AGI Tx >> agi_callington: 0
<SIP/4002-00000007>AGI Tx >> agi_callingtns: 0
<SIP/4002-00000007>AGI Tx >> agi_dnid: 2000
<SIP/4002-00000007>AGI Tx >> agi_rdnis: unknown
<SIP/4002-00000007>AGI Tx >> agi_context: from-internal
<SIP/4002-00000007>AGI Tx >> agi_extension: 2000
<SIP/4002-00000007>AGI Tx >> agi_priority: 1
<SIP/4002-00000007>AGI Tx >> agi_enhanced: 0.0
<SIP/4002-00000007>AGI Tx >> agi_accountcode:
<SIP/4002-00000007>AGI Tx >> agi_threadid: -1220097136
<SIP/4002-00000007>AGI Tx >>
<SIP/4002-00000007>AGI Rx << ANSWER
<SIP/4002-00000007>AGI Tx >> 200 result=0
<SIP/4002-00000007>AGI Rx << STREAM FILE "custom/bienvenida" '' 0
    -- Playing 'custom/bienvenida' (escape_digits='') (sample_offset 0)
<SIP/4001-00000006>AGI Tx >> 200 result= (timeout)
<SIP/4002-00000007>AGI Rx << STREAM FILE "custom/respuesta_incorrecta" '' 0
    -- Playing 'custom/respuesta_incorrecta' (escape_digits='') (sample_offset 0)
<SIP/4002-00000007>AGI Tx >> 200 result=0 endpos=14260
<SIP/4002-00000007>AGI Rx << GET DATA "custom/cuando_este_listo" 5000.0 1
    -- <SIP/4002-00000007> Playing 'custom/cuando_este_listo.slin' (language 'en')
<SIP/4002-00000007>AGI Tx >> 200 result=
    -- <SIP/4002-00000007>AGI Script agi://10.0.0.167 completed, returning 0
<SIP/4002-00000007>AGI Tx >> HANGUP
    -- Executing [2000@from-internal:2] Hangup("SIP/4002-00000007", "") in new stack
  == Spawn extension (from-internal, 2000, 2) exited non-zero on 'SIP/4002-00000007'
    -- Executing [h@from-internal:1] Macro("SIP/4002-00000007", "hangupcall") in new stack
    -- Executing [s@macro-hangupcall:1] GotoIf("SIP/4002-00000007", "1?endmixmoncheck") in new stack
    -- Goto (macro-hangupcall,s,9)
    -- Executing [s@macro-hangupcall:9] NoOp("SIP/4002-00000007", "End of MIXMON check") in new stack
    -- Executing [s@macro-hangupcall:10] GotoIf("SIP/4002-00000007", "1?nomeetmemon") in new stack
    -- Goto (macro-hangupcall,s,15)
    -- Executing [s@macro-hangupcall:15] NoOp("SIP/4002-00000007", "MEETME_RECORDINGFILE=") in new stack
    -- Executing [s@macro-hangupcall:16] GotoIf("SIP/4002-00000007", "1?noautomon") in new stack
    -- Goto (macro-hangupcall,s,18)
    -- Executing [s@macro-hangupcall:18] NoOp("SIP/4002-00000007", "TOUCH_MONITOR_OUTPUT=") in new stack
    -- Executing [s@macro-hangupcall:19] GotoIf("SIP/4002-00000007", "1?noautomon2") in new stack
    -- Goto (macro-hangupcall,s,25)
    -- Executing [s@macro-hangupcall:25] NoOp("SIP/4002-00000007", "MONITOR_FILENAME=") in new stack
    -- Executing [s@macro-hangupcall:26] GotoIf("SIP/4002-00000007", "1?skiprg") in new stack
    -- Goto (macro-hangupcall,s,29)
    -- Executing [s@macro-hangupcall:29] GotoIf("SIP/4002-00000007", "1?skipblkvm") in new stack
    -- Goto (macro-hangupcall,s,32)
    -- Executing [s@macro-hangupcall:32] GotoIf("SIP/4002-00000007", "1?theend") in new stack
    -- Goto (macro-hangupcall,s,34)
    -- Executing [s@macro-hangupcall:34] Hangup("SIP/4002-00000007", "") in new stack
  == Spawn extension (macro-hangupcall, s, 34) exited non-zero on 'SIP/4002-00000007' in macro 'hangupcall'
  == Spawn extension (from-internal, h, 1) exited non-zero on 'SIP/4002-00000007'
localhost*CLI> 
```

编辑：

这是我用作指南的代码。它是 Starpy 库中作为示例提供的应用程序。当我把这个应用程序我得到相同的结果。我放这个是因为我的有点太大了。

```
#! /usr/bin/env python
"""Read digits from the user in various ways..."""
from twisted.internet import reactor, defer
from starpy import fastagi, error
import logging, time

log = logging.getLogger( 'hellofastagi' )

class DialPlan( object ):
    """Stupid little application to report how many times it's been accessed"""
    def __init__( self ):
        self.count = 0
    def __call__( self, agi ):
        """Store the AGI instance for later usage, kick off our operations"""
        self.agi = agi 
        return self.start()
    def start( self ):
        """Begin the dial-plan-like operations"""
        return self.agi.answer().addCallbacks( self.onAnswered, self.answerFailure )
    def answerFailure( self, reason ):
        """Deal with a failure to answer"""
        log.warn( 
            """Unable to answer channel %r: %s""", 
            self.agi.variables['agi_channel'], reason.getTraceback(),
        )
        self.agi.finish()
    def onAnswered( self, resultLine ):
        """We've managed to answer the channel, yay!"""
        self.count += 1
        return self.agi.wait( 2.0 ).addCallback( self.onWaited )
    def onWaited( self, result ):
        """We've finished waiting, tell the user the number"""
        return self.agi.sayNumber( self.count, '*' ).addErrback(
            self.onNumberFailed,
        ).addCallbacks(
            self.onFinished, self.onFinished,
        )
    def onFinished( self, resultLine ):
        """We said the number correctly, hang up on the user"""
        return self.agi.finish()
    def onNumberFailed( self, reason ):
        """We were unable to read the number to the user"""
        log.warn( 
            """Unable to read number to user on channel %r: %s""",
            self.agi.variables['agi_channel'], reason.getTraceback(),
        )

    def onHangupFailure( self, reason ):
        """Failed trying to hang up"""
        log.warn( 
            """Unable to hang up channel %r: %s""", 
            self.agi.variables['agi_channel'], reason.getTraceback(),
        )

if __name__ == "__main__":
    logging.basicConfig()
    fastagi.log.setLevel( logging.DEBUG )
    f = fastagi.FastAGIFactory(DialPlan())
    reactor.listenTCP(4573, f, 50, '10.0.0.167') # only binding on local interface
    reactor.run() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T07:39:14.323

感谢您提供完整信息：

现在，您所拥有的设置的明显缺陷如下： Dialplan() 在最初传递给 FastAGIFactory 时被启动。从那里开始 - 你总是一遍又一遍地访问同一个类的实例。现在 - 每当有新调用进入时，都会调用`Dialplan().__call__()`方法并且`Dialplan().agi`参数会被最后一次调用覆盖。查看您使用的示例，我建议尝试以下方法，然后从那里获取：

```
#! /usr/bin/env python
"""Read digits from the user in various ways..."""
from twisted.internet import reactor, defer
from starpy import fastagi, error
import logging, time

log = logging.getLogger( 'hellofastagi' )

class DialPlan( object ):
    """Stupid little application to report how many times it's been accessed"""
    def __init__( self,application, agi ):
        self.application = application
        self.agi = agi
    def start( self ):
        """Begin the dial-plan-like operations"""
        return self.agi.answer().addCallbacks( self.onAnswered, self.answerFailure )
    def answerFailure( self, reason ):
        """Deal with a failure to answer"""
        log.warn( 
            """Unable to answer channel %r: %s""", 
            self.agi.variables['agi_channel'], reason.getTraceback(),
        )
        self.agi.finish()
    def onAnswered( self, resultLine ):
        """We've managed to answer the channel, yay!"""
        return self.agi.wait( 2.0 ).addCallback( self.onWaited )
    def onWaited( self, result ):
        """We've finished waiting, tell the user the number"""
        return self.agi.sayNumber( self.application.count, '*' ).addErrback(
            self.onNumberFailed,
        ).addCallbacks(
            self.onFinished, self.onFinished,
        )
    def onFinished( self, resultLine ):
        """We said the number correctly, hang up on the user"""
        return self.agi.finish()
    def onNumberFailed( self, reason ):
        """We were unable to read the number to the user"""
        log.warn( 
            """Unable to read number to user on channel %r: %s""",
            self.agi.variables['agi_channel'], reason.getTraceback(),
        )

    def onHangupFailure( self, reason ):
        """Failed trying to hang up"""
        log.warn( 
            """Unable to hang up channel %r: %s""", 
            self.agi.variables['agi_channel'], reason.getTraceback(),
        )

class CallCounterApplication(object):
    def __init__( self ):
        self.count = 0

    def __call__(self,agi):
        self.count = self.count+1
        dp = Dialplan(self,agi)
        return dp.start()

if __name__ == "__main__":
    logging.basicConfig()
    fastagi.log.setLevel( logging.DEBUG )
    f = fastagi.FastAGIFactory(CallCounterApplication())
    reactor.listenTCP(4573, f, 50, '10.0.0.167') # only binding on local interface
    reactor.run() 
```

我在这里所做的是创建一个应用程序容器，它将在每次成功调用时创建一个新的 Dialplan() 实例。

编辑：请注意 - 因为我没有可用的星号框，所以没有经过测试，并且在 1:1 复制粘贴时可能无法运行。但是原理还是一样的

# c++ - 扣除算法

> ID：14867193
> 
> 赞同：3
> 
> 时间：2013-02-14T03:13:19.290
> 
> 标签：c++, python, c, algorithm

这是问题所在。

如果我们有两个陈述 `p=>q`and `q=>r`，它也暗示着`p=>r`。

给定一组陈述，我需要找出给定陈述是否`true`可以`false`从给定陈述中得出。

示例：
给定语句`p=>q, p=>r, q=>s`

*   如果输入是`p=>s`我应该得到输出`true`

*   如果输入是`p=>t`我应该得到输出`Cannot be concluded`

*   如果输入是`p=> ~p`我应该得到输出`false`

在这里，我的问题是实现这一点的最佳数据结构是什么以及要使用的算法是什么。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:15:20.960

很多人多年来一直研究这个问题。你需要的是一个[SAT Solver](http://en.wikipedia.org/wiki/SAT_solver#Algorithms_for_solving_SAT)。Lookup [Chaff](http://www.princeton.edu/~chaff/software.html)或[zChaff](http://www.princeton.edu/~chaff/zchaff.html)或任何其他常用的 SAT Solver。您想使用 (p->q && q->r) -> (p -> r) 之类的子句并否定它们并确定是否可以满足。如果否定不能满足，那么你就有一个定理，它总是正确的。如果原分句可满足，而分句的否定可满足，则应返回“不能成立”。如果原始条款不可满足，那么您就有了错误的东西。

这实际上是一个很好研究的问题。有很好的算法，但是你可以处理多少命题变量是有硬性限制的。SAT 是 NP 难题的核心。一类不知道有效算法的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T08:00:14.237

我认为鉴于您的问题很简单，您可以使用简单的`map`. 与存在相比的主要优势`vector`在于更快的查找。

```
// For "p":  { name: "p", positive: "true" }
// For "~q": { name: "q", positive: "false" }
struct Predicate {
    std::string _name;
    bool _positive;
};

using PredicateSetType = std::unordered_set<Predicate>;
using PredicateMapType = std::unordered_map<Predicate, PredicateSetType>; 
```

您以下列方式使用映射：当给定 时`p => q`，您插入`{ "q", true }`与 关联的谓词集中`{ "p", true }`。

请注意，这实际上对有向图进行了编码，因此在证明陈述时适用探索图的典型方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T03:31:48.590

所以，我仍然不完全清楚你想要做什么。冒着被否决的风险，我将把它踢出去，看看人们怎么想。

我可能会从构建图表开始。每个实体（p、q 等）都有自己的节点。“暗示”意味着你在两个节点之间画一条线。那么，任何输入只是看你是否能找到一种遍历图的方法——所以在你的例子中，a => b，b => c，图有三个节点，a 连接到 b，b连接到 c。在 a 和 c 之间存在路径这一事实意味着 a 蕴含 c。

我没有进一步审查这个想法，但这似乎是一个有趣的前景。特别是因为图论很酷，而且很多人都对它感兴趣（例如，Facebook 高管）。并且 Python 中有很好的模块用于分析图形。（我认为 C++ 也是如此。您始终可以使用 Gephi 手动指定它：[https](https://gephi.org/) ://gephi.org/ ）

# c++ - enable_if + type 模板，没有 SFINAE（没有 boost 的 enable_if_c ？）

> ID：14867194
> 
> 赞同：1
> 
> 时间：2013-02-14T03:13:24.453
> 
> 标签：c++, c++11, g++, sfinae, enable-if

我通过阅读各种帖子了解到以下内容不应该编译。

```
#include <type_traits>
#include <iostream>

template <bool is_constant> struct A {
  // Need to fix this for g++-4.7.2
  // implicit conversion to int iff is_constant == true statically
  template <class = typename std::enable_if<is_constant>::type>
  constexpr operator int() const {
    return 10;
  }                                             
};

int main()
{
  A<true> a;
  int i = 2 + a;   
  std::cout << i << "\n";

  A<false> b;
  // int i = 2 + a;   // compilation error
} 
```

尽管如此，clang 3.2 还是接受了这个代码版本并且运行良好。我的理解是它在后台使用了 enable_if_c 的内部版本。现在我想在不接受它的 gcc 下进行编译。我知道拥有一个实际类型并按照其他帖子使用 SFINAE 会很好。

就我而言：

*   我正在尝试定义一个运算符，因此我不能对具有某些默认类型/值的额外参数大惊小怪-> 似乎我不能使用 SFINAE。
*   我也不能使用继承，因为我必须保留一切 constexpr。
*   由于项目要求，我不能在我的代码 (enable_if_c) 中使用任何增强功能

我有出路吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:32:37.183

为什么不使用专业化？

```
#include <iostream>

template <bool is_constant>
struct A {};

template <>
struct A<true> {
    constexpr operator int() const {
        return 10;
    }
};

int main()
{
    A<true> a;
    int i = 2 + a;
    std::cout << i << "\n";

    A<false> b;
    // int ii = 2 + b;   // compilation error
} 
```

这是非常直接的交叉编译器方法......

# awk - 使用 awk 从返回值中去除值

> ID：14867195
> 
> 赞同：2
> 
> 时间：2013-02-14T03:13:27.980
> 
> 标签：awk, grep, iptables

我不知道如何从这些行中删除“DST =”。这是我的命令（它返回它应该返回的内容），如果有更有效的方法或更好的方法，请随时批评。

```
awk '{print $10}' iptables.log |sort -u

DST=96.7.49.64
DST=96.7.49.65
DST=96.7.50.64
DST=98.27.88.26
DST=98.27.88.28
DST=98.27.88.45
DST=98.27.88.50 
```

如您所见，我需要从 iptable 日志中获取唯一的 ip。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T03:36:18.883

如果您不介意未排序的输出，这里有一个更好的使用方法`awk`：

```
awk '!a[$10]++ { sub(/DST=/,"",$10); print $10 }' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T03:19:57.647

您可以通过 sed 管道输出结果以从每一行中删除 DST=：

```
awk '{print $10}' iptables.log | sed 's/^DST=//' | sort -u 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T03:22:30.467

或者您可以将其全部保存在一个进程中，并使用 awk 的等效`sub()`功能，即

```
awk '{sub(/DST=/,"",$10); print $10}' iptables.log |sort -u 
```

**更新：**

> 不管它是在 10 号还是 11 号空间，有没有只在 DST= 上键入？

```
awk '$10~/^DST=/{sub(/DST=/,"",$10); print $10};$11~/^DST=/{sub(/DST=/,"",$11); print $11}' iptables.log | sort -u 
```

或者

```
awk '{for (i=9;i<13;i++) {
 if ($i ~ /^DST=/) { sub(/DST=/, "", $i); print $i}
 }
}' iptables.log | sort -u 
```

请注意，在这里，您可以更改要检查和打印的字段范围，例如，我正在测试字段 9-12。awk 中的变量 like`$i`引用`i'th'`当前行中的元素，如 $1、$9、$87 等。

由于我没有要测试的 iptables.log，因此我无法对其进行测试，除非确认 awk 语法没有失败。如果这不起作用，请发布 2-4 行简化数据示例。

IHTH

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T12:17:06.760

```
awk '{split($10,a,"=");b[a[2]];next}END{for(i in b)print i}' iptables.log 
```

# java - HttpClient 与 Spring Rest 模板？

> ID：14867199
> 
> 赞同：15
> 
> 时间：2013-02-14T03:14:04.093
> 
> 标签：java, spring, rest, httpclient

进行 REST 调用的最佳方式是什么？

我应该使用`Apache Http Client`还是应该使用`Spring Rest Template`.

在什么基础上我可以决定我应该去哪一个？

我需要拨打这个网址-

`http://localhost:8080/service/Service/v1/get/USERID=10000/profile.ACCOUNT.SERVICE"`

在得到响应后，我只需要查看该响应是否包含任何特定的字符串。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-14T07:55:02.637

Spring`RestTemplate`遵循核心 Spring 框架和各种子框架中的所有 *Template 类的模式：`JdbcTemplate`、`HibernateTemplate`等`WebServiceTemplate`。

所有这些模板类的想法是减少样板代码（异常处理、重复的东西并专注于您的业务逻辑）。我肯定会使用它而不是简单的`HttpClient`.

要获得课程，您需要[spring-web](http://mvnrepository.com/artifact/org.springframework/spring-web/3.2.1.RELEASE)依赖项。

# biztalk - 使用平面文件批处理行项目数据

> ID：14867204
> 
> 赞同：0
> 
> 时间：2013-02-14T03:14:42.287
> 
> 标签：biztalk, flat-file

我必须解析一个仅包含行项目数据的 CSV 平面文件，没有可识别的标题记录，有点像这样：

```
930001,14-02-2013,100.00,1,Line 1,2,10.00,20.00
930001,14-02-2013,100.00,2,Line 2,2,20.00,40.00
930001,14-02-2013,100.00,3,Line 3,1,40.00,40.00
930002,13-02-2013,200.00,1,Line 1,10,10.00,100.00
930002,13-02-2013,200.00,2,Line 2,5,20.00,100.00
930003,14-02-2013,100.00,1,Line 1,3,20.00,60.00
930003,14-02-2013,100.00,2,Line 2,2,20.00,40.00 
```

字段在哪里，按顺序：

```
Order No,Order Date,Order Amt,Line No,Line Desc,Line Qty,Unit Price,Line Price 
```

我想使用 BizTalk 平面文件接收管道将其转换为分层架构，在第一个字段上分组，订单号：

```
Order_Batch
  + Order
    + OrderLine 
```

有没有办法通过平面文件接收执行分组操作，这样，在上面的例子中，前 3 行（订单号 = 930001）

```
<OrderBatch>
  <Order>
    <OrderLine>
      <OrderNo>930001</OrderNo>
      <other_fields />
      <LineNo>1</LineNo>
      <other_fields_etc />
    </OrderLine>
    <OrderLine>
      <OrderNo>930001</OrderNo>
      <other_fields />
      <LineNo>2</LineNo>
      <other_fields_etc />
    </OrderLine>
    <OrderLine>
      <OrderNo>930001</OrderNo>
      <other_fields />
      <LineNo>2</LineNo>
      <other_fields_etc />
    </OrderLine>
  </Order>
  <Order> ... Details of Order 930002 ... </Order>
  <Order> ... Details of Order 930003 ... </Order>
</OrderBatch> 
```

我目前看到的唯一可用选项是接受整个文件作为一组 OrderLine 记录，未批处理，然后在另一个 Orchestration 中使用 Gather 模式执行批处理。我宁愿保持简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:55:20.583

使用地图从平面转换为分层：

1.  使用平面文件架构向导为您的平面文件创建架构
2.  使用管道和平面文件反汇编器获取输入消息
3.  为所需的输出 xml 创建架构
4.  创建一个映射以将平面文件消息转换为所需的输出消息

我相信你可以在地图中使用 xsl 你可以进行[分组](https://stackoverflow.com/questions/2146648/how-to-apply-group-by-on-xslt-elements)

# c++ - 什么是线程

> ID：14867208
> 
> 赞同：2
> 
> 时间：2013-02-14T03:14:59.100
> 
> 标签：c++, objective-c, multithreading

我一直在网上查看线程是什么，但我不觉得我理解它。有人可以对此有所了解吗？就与 C++ 相关的编程语言而言，objective-C 会很好。

在objective-c中，我遇到了

```
@property(nonatomic, strong) NSString *name; 
```

对非原子的解释是，它意味着不必担心多个线程同时尝试访问对象，并且objective-c 不必合成线程安全代码。那么这到底意味着什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T03:22:07.290

一个进程可以由多个执行线程组成，从逻辑上讲，这些线程可以被认为是同时运行的。每个线程独立运行，但共享相同的内存和进程状态。*单个线程可以“做一件事”：执行计算、与网络交互、更新 UI、解码视频等。但是，如果没有程序员的大量*额外工作，单个线程无法同时完成所有这些工作. 在一个进程中拥有多个线程使程序员能够轻松地使应用程序同时执行多项操作（多任务处理）。

不过，使用多线程确实会带来一些新的挑战。例如，如果您有两个线程访问同一个变量，您最终可能会遇到并发风险，其中一个线程可能在另一个线程访问它之前没有完全更新该变量，从而导致程序失败。Objective-C 默认会生成线程安全的代码，以避免这种情况。`nonatomic`告诉编译器您永远不会同时从多个线程访问它，因此编译器可以跳过线程安全代码并生成更快的代码。无论如何，如果您要提供自己的同步（例如，保持一组属性同步，Objective-C 本身无法帮助您），这将很有用。

如果您违反核心`nonatomic`假设并同时`nonatomic`从多个线程访问一个变量，那么所有的地狱都会崩溃。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T03:59:59.830

> explanation for nonatomic was it means to not be worried about multiple threads trying to access the object at the same time, and objective-c does not have to synthesize thread safe code. So what does that exactly mean as well.

Imagine you are asked to write your name on a piece of paper. You're given a list of instructions someone thought would work just fine:

*   you find a line that's current empty,
*   move your pen over it,
*   write your name.

All good.

Now imagine you're given a new piece of paper, but both you and someone else are asked to write your names *on the same piece of paper*, and you're given the old instructions, perhaps:

1) You both look at the paper and determine to write on the first line. 2) You put your pens down (maybe you can both do it comfortably enough - one left / one right handed). 3) You start to write an I but the other person is writing a J and it comes out looking like a U. 4) gets worse from here....

But equally, it might be that you're paying more attention, and finish writing your name before they start looking for an empty line, or vice versa.

Threading is a lot like this... in the above example, each thread/person is keeping track of how they're progressing at the task, following their instructions very literally. Notice that if you complete only step 1, then the other person does step 1, you've already set yourselves up to write over each others' name regardless of the ordering or concurrency of the remaining steps.

In all this, you don't even have to be doing things at the same instant in time, it's just that the tracking of your tasks is independent - you're independent people with your own memory of where you are in your task. Same with threads - they're ways of tracking what to do independently, and it's optional whether they actually do things in your program at the same instant (which is possible with multi-core CPUs and multi-CPU systems).

"atomic" is used in the sense of indivisible (think: you can't cut an atom of gold in half and still have gold). Similarly, if you say write your name atomically, it means any observer is guaranteed to either witness the instant before - when no name is there - or the instant after - when your name is completely written - but they'll never see just half your name. An atomic update on a string variable is like that.

Atomic string updates don't solve the problem above... you might still clash in finding "an empty line" (in a computing context - say finding the next empty position in a container). If that process of finding an empty line is atomic, and the line is somehow marked "used" even before you've written anything on it yourself, then it means you'll never get the same line as someone else. At that stage, multiple people writing their names won't clash on the same line, but only when both the line finding and the name writing are atomic can people looking at the paper know that they're seeing completely written non-clashing names.

Making these kind of guarantees is very useful but expensive. It means that threads must communicate and coordinate amongst themselves, agreeing "who" will go first with others waiting as necessary.

# php - PHP 会话标头不会更改 URL

> ID：14867210
> 
> 赞同：0
> 
> 时间：2013-02-14T03:14:59.680
> 
> 标签：php, redirect, header

让标头正常工作有点麻烦。

我只是在重新学习 PHP，以前从未使用过会话或标头。

我有一个带有表单的 login.php，该表单发布到该文件：

**检查登录.php**

```
<?php
ob_start();
$host="localhost"; // Host name 
$username="db"; // Mysql username 
$password="dbpass"; // Mysql password 
$db_name="db"; // Database name 
$tbl_name="users"; // Table name 

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// Define $myusername and $mypassword 
$myusername=$_POST['username']; 
$mypassword=$_POST['password']; 

// To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);
$sql="SELECT * FROM $tbl_name WHERE userName='$myusername' and userPass='$mypassword'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){
          session_start();
          $_SESSION['logon'] = true;

// Register $myusername, $mypassword and redirect to file "login_success.php"
session_register("myusername");
session_register("mypassword");
header("location: app.php");
exit();
}
else {
header("location: login.php");
exit();
}
ob_end_flush();
?> 
```

本质上，这执行了这项工作，app.php 文件被加载到浏览器窗口中，但是 URL 在浏览器窗口中没有改变。URL 仍为[http://mysite.com/checklogin.php](http://mysite.com/checklogin.php)。

这等同于我在 app.php 中的任何相对链接（例如 app.php#page1）都没有，因为浏览器窗口中的 URL 仍列为 /checklogin.php

我在这里搜索了几十个问题，但都是空的。

我尝试使用整个 URL，指定 TRUE 并在标题中使用 302 和 303，没有什么能让我摆脱 URL。

另请注意，我知道 jack squat 关于 ob_start 的作用——这是示例代码——我现在只知道如果我删除 ob_start 并且它最后的关闭它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:32:44.600

在 header() 调用中使用 Location 而不是 location。

也尝试将@放在 session_start(); 前面 . 有时您的会话可能已经启动，并且尝试再次启动它，将导致通知/警告取决于您主机上的 php 设置，如果您没有输出缓冲，这会使以后的 header() 调用无效. 将 @ 放在它前面会使通知/警告静音，因此 header() 将再次起作用。

如果可行（@session_start），您将不需要 ob_start() 和 ob_end_flush() 调用，这只会导致警告/通知的缓冲。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:25:34.947

正如@JohnCode 所指出的，代码需要完全重写才能达到 PHP 5.4 的速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-22T13:08:01.727

改变

```
header("location: abc.php"); 
```

至

```
header("Location: abc.php"); 
```

注意大写 L。

也更好用

```
$_SESSION['myusername']=$myusername;
$_SESSION['mypassword']=$mypassword; 
```

比

```
session_register("myusername");
session_register("mypassword"); 
```

因为它在 PHP 5.3 中已弃用并在 PHP 5.4 中删除 [http://www.php.net/manual/en/function.session-register.php](http://www.php.net/manual/en/function.session-register.php)

# python - Python 将字典值转换为列表和附加项目

> ID：14867211
> 
> 赞同：1
> 
> 时间：2013-02-14T03:15:10.070
> 
> 标签：python, python-2.7

我有一本名为 dictdict 的字典，它看起来像：

```
dictdict = { 'key1': {'subkey1': 4, 'subkey2': 7}, 
             'key2': {'subkey1': 6, 'subkey2': 8} } 
```

...等等。`dictdict`有几十个键，每个键有几十个子键，每个子键对应一个整数值。

我想在每个单独的值上附加一个列表，将已经存在的值作为我的新值列表中的第一项。因此，所需的结果将具有与以前相同的字典结构，除了对应于单个整数的子键，它们将对应于包含整数和字符串的列表（因此包含我的原始值的列表作为第一项通过各种整数和字符串）。

我想最终得到看起来像这样的东西：

```
dictdict = { 'key1': {'subkey1': [4, 'apple', 37], 
                      'subkey2': [7, 'orange', 19]}, 
             'key2': {'subkey1': [6, 'kiwi', 76], 
                      'subkey2': [8, 'banana', 29]} } 
```

当我尝试这个...

```
#convert each nested value into a one item list
for key in dictdict:
    for subkey in dictdict[key]:
        dictdict[key][subkey] = [dictdict[key][subkey]] 

#now that our values are lists, append some items to the list
dictdict["key1"]["subkey1"].append('a1', a2) 
```

...它几乎可以工作，因为我可以为每个值附加一个列表（万岁！）但是每个列表中的第一项（我的原始值）现在是它自己的一个项目列表（哎呀！）。

所以我最终得到

```
dictdict[key1][subkey1] 
```

对应于此

```
[[4], 'a1', a2] 
```

但我希望它与此相对应

```
[4, 'a1', a2] 
```

此外，它可能没有说，但我是一个新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T03:48:05.183

```
>>> dictdict = { 'key1': {'subkey1': 4, 'subkey2': 7}, 'key2': {'subkey1': 6, 'subkey2': 8} }
>>> dictdict["key1"]["subkey1"]
4
>>> for v1 in dictdict.values():
...     v1.update((k,[v]) for k,v in v1.iteritems())
... 
>>> dictdict["key1"]["subkey1"] += ['a1', 'a2']
>>> dictdict["key1"]["subkey1"]
[4, 'a1', 'a2']
>>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T03:39:52.983

您可以使用 dict 理解，如下所示：

```
dictdict = {k:{kk:[vv] for (kk, vv) in v.iteritems()} for (k, v) in dictdict.iteritems()} 
```

例如，如果这是您的初始字典：

```
>>> dictdict
{'a': {'mm': 4}, 'b': {'qq': 6}} 
```

那么结果将是：

```
>>> dictdict = {k:{kk:[vv] for (kk, vv) in v.iteritems()} for (k, v) in dictdict.iteritems()}
>>> dictdict
{'a': {'mm': [4]}, 'b': {'qq': [6]}} 
```

这使您可以将项目附加到嵌套列表中。如果您要附加另一个列表，或者`+=`一次附加一个元素，您可以这样做。`extend()``append()`

# c - strtok 是否适用于字符串（作为分隔符）？

> ID：14867213
> 
> 赞同：-2
> 
> 时间：2013-02-14T03:15:15.170
> 
> 标签：c, strtok

例如：

友好。

我不喜欢词尾的“ly”。我可以用“ly”标记这个字符串吗

someCharVariable = strtok("friendly", "ly")?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T03:24:02.597

答案是不。您的“ly”示例将界定任何出现的“l”或“y”或“yl”或“ly”

delimiter 参数是一个字符数组，每个字符都用作分隔符。

这是您要求的示例：

```
char *iterate(char *p, const char *d, const size_t len)
{   
   while(p!=NULL && *p && memcmp(p, d, len)==0)
   {
      memset(p, 0x0, len);
      p+=len;    
   }
   return p;
}

char **
tokenize( char **result, char *working, const char *src, const char *delim)
{
     int i=0;
     char *p=NULL;
     size_t len=strlen(delim);     
     strcpy(working, src);
     p=working;
     for(result[i]=NULL, p=iterate(p, delim, len); p!=NULL && *p; p=iterate(p, delim, len) )
     {
         result[i++]=p;
         result[i]=NULL;
         p=strstr(p, delim);
     }
     return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T03:24:55.320

strtok 返回字符 *。所以你需要使用 somechar*var 而不是 somecharvariable。

您的代码将返回指向字符串“friend”的指针，并且“l”将被替换为“/0”。

# php - SEO 友好的 URL 和查询数据库 php

> ID：14867222
> 
> 赞同：0
> 
> 时间：2013-02-14T03:16:43.643
> 
> 标签：php, url, mod-rewrite, url-rewriting, slug

我已经搜索了这个问题的答案，并找到了一篇与之相关的文章，但它没有给出确切的答案。可以在这里找到：[PHP - 如何用空格替换破折号？](https://stackoverflow.com/questions/8034788/php-how-can-i-replace-dashes-with-spaces)

我正在使用此功能将我的博客标题转换为 SEO 友好的 URL 字符串：

```
//SEO Friendly URLS
public static function Seo($input){
    $input = str_replace(array("'", "-"), "", $input); 
    $input = mb_convert_case($input, MB_CASE_LOWER, "UTF-8"); 
    $input = preg_replace("#[^a-zA-Z0-9]+#", "-", $input); 
    $input = preg_replace("#(-){2,}#", "$1", $input); 
    $input = trim($input, "-"); 
    return $input; 
} 
```

这会将诸如“我的博客标题”之类的标题转换为“我的博客标题”，这很好。但是我通常在 URL 中传递博客 ID 以从数据库中获取博客，但我试图保持非常友好的 url。

我知道我可以将博客 ID 作为标题末尾的第二个查询字符串传递，例如 mysite.com/page.php?post=my-blog-post&id=1 但这看起来仍然很糟糕。我将使用 .htaccess 删除 .php 和 '?' 来自 URL，但我不确定如何在传递 ID 的同时保持漂亮的 URL。

如何在使用博客标题作为 URL 查询时查询数据库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T04:52:01.373

URL 友好版本的标题通常被称为 slug。如果您将 slug 存储在数据库表中，您可以使用它来检索文章。最好还是保存 slug，这样一旦创建了 slug，它就永远不会改变。

例如，假设您发现并修复了 SEO 功能中的错误，它可能会更改您的 URL，这显然是糟糕的 SEO。将 slug 存储在数据库中可以避免该问题。

如果您存储 slug，您可能还需要每个博客类别的 slug。这样，您就可以更接近地模仿文件系统，并且不再需要确保每个 slug 都是完全独一无二的。虽然您不太可能在不同的目录中拥有相同标题的文章，但在您构建网站时需要考虑这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-11T05:48:53.643

您可以使用`mod_rewrite`Apache 的模块。这是最常见的做法。

使用`.htaccess`重写规则

`RewriteRule ^([^?]*) index.php?route=$1 [L,QSA]`

URL将被“重写”并作为 GET 参数`http://example.com/en/my-life/first-impression` 传递。`index.php``route`

用破折号在 PHP 中分解它。

`$parts = explode('/', $_GET['route']);`

这就是您将如何获取 url 的所有部分并相应地制作您的 PHP 逻辑的方式，

```
$parts[0] => language code
$parts[1] => category
$parts[2] => post SEO title 
```

# javascript - 点击图像而不是点击按钮？

> ID：14867226
> 
> 赞同：4
> 
> 时间：2013-02-14T03:17:07.053
> 
> 标签：javascript, html, image, button

我有一个通过 onclick 执行的脚本，但是当我使用图像时它不起作用，只有一个按钮起作用。[您可以在http://thomaswd.com/maze](http://thomaswd.com/maze)查看示例。单击“左”按钮，然后单击向下按钮，它们都可以工作。但出于某种原因，右箭头不起作用。请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T03:32:36.737

奇怪，我不明白为什么`right()`不工作，但如果我将函数重命名为不同的名称就可以工作。

演示：http: [//jsfiddle.net/5b3Ez/](http://jsfiddle.net/5b3Ez/)

将函数重命名`right()`为不同的名称，希望对现在有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T03:33:03.047

将 id 从“正确”更改为其他内容。我不完全确定为什么会失败，但显然在 html 中，因为 'right' 是 id，它隐藏了`right()`函数。

在 Chrome 调试器中，我将 id 更改为 'r' 并且按钮可以工作，尽管它很大，因为 css 不再匹配:)

正如其他人所指出的，“向上”和“向下”按钮起作用，这是因为它们的 ID 是“顶部”和“底部”。

编辑：

这是一个[解释](https://stackoverflow.com/questions/9158238/why-js-function-name-conflicts-with-element-id)，非常奇怪的问题:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T03:23:38.600

我有点困惑，为什么在相同情况下`right`不工作`up`，但似乎你可以通过 JavaScript 绑定（无论如何你应该这样做）而不是使用`onclick`.

```
$("#right").on('click', right); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T03:58:57.770

而不是`right()`，只需使用`window.right()`.

在这种情况下，我尝试了：

```
console.log(this.right===right, this.right===window.right, right===window.right); 
```

它显示`true false false`，但在其他箭头的情况下，它是`false false true`。Paul Hoenecke 指出的解释指向了这个问题。

# javascript - 如何在我的drawimage上重叠画布圈并设置坐标和事件

> ID：14867229
> 
> 赞同：0
> 
> 时间：2013-02-14T03:17:31.080
> 
> 标签：javascript, html, canvas, html5-canvas

当我将鼠标悬停在一个城市上时，我正试图在我的丹麦地图上设置信息。我尝试画一个圆圈，但它不会出现在我的地图上（它出现在下方，而不是上方），我不确定您是否可以为其设置事件。这是我第一次使用画布。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>

    <script type="text/javascript">
        function startCanvas() {
            var c = document.getElementById("myCanvas");
            var ctx = c.getContext("2d");

            //draw a circle
            ctx.beginPath();
            ctx.arc(75, 75, 10, 0, Math.PI * 2, true);
            ctx.closePath();
            ctx.fill();

            var image = new Image();

            image.onload = function () {
                ctx.drawImage(image, 69, 50);
            };

            image.src = 'denmark.jpg';                 
        }
    </script>
</head>
<body onload="startCanvas()">
    <canvas id="myCanvas" width="600" height="600";">
    Your browser does not support the HTML5 canvas tag.</canvas>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T05:33:58.687

这是德里克的意思：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>

<script type="text/javascript">
    function startCanvas() {
        var c = document.getElementById("myCanvas");
        var ctx = c.getContext("2d");

        var image = new Image();

        image.onload = function () {
            ctx.drawImage(image, 69, 50);
            //draw a circle
            ctx.beginPath();
            ctx.arc(75, 75, 10, 0, Math.PI * 2, true);
            ctx.closePath();
            ctx.fill();
        };

        image.src = 'denmark.jpg';                 
    }
</script>
</head>
<body onload="startCanvas()">
<canvas id="myCanvas" width="600" height="600";">
Your browser does not support the HTML5 canvas tag.</canvas>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T03:56:48.523

正如你所说，它似乎没有结束。如果你想要它在顶部，你必须在绘制图像之后填充圆圈。想想这些函数对像素数据做了什么（替换像素）。您可以在同一个事件中绘制圆圈，为图像加载，只需在 drawImage 调用之后绘制它。

# git - 推送分支和标签时，出现错误：无法生成 git：没有这样的文件或目录

> ID：14867232
> 
> 赞同：6
> 
> 时间：2013-02-14T03:18:00.127
> 
> 标签：git, msysgit, git-bare

我有一个现有的、裸露的 Git 存储库，它是通过从 CVS 导入我们的源代码和历史记录而创建的。我制作了一面镜子，使用：

```
git clone --mirror git://aserver.adomain.com/myrepo 
```

然后，我想将所有分支和标签推送到我们内部的 Git 存储库主机，~~但推送似乎没有将裸存储库视为 Git 存储库~~.

我尝试了以下方法：

```
git clone --mirror git://aserver.adomain.com/myrepo
git remote set-url origin http://user@anotherserver.adomain.com/project/myrepo.git
git push origin 
```

这导致：

```
$ git push origin
Password for 'xxxx':
error: cannot spawn git: No such file or directory 
```

或者我尝试：

```
$ git remote rm origin
Note: Some branches outside the refs/remotes/ hierarchy were not removed;
to delete them, use:
  ...a whole lot of branches...

user@SOMEMACHINE /some/path/myrepo.git (BARE:master)
$ ls
HEAD  config  description  hooks  info  objects  packed-refs  refs

user@SOMEMACHINE /some/path/myrepo.git (BARE:master)
$ git branch -a
  ...a whole lot of local branches...

user@SOMEMACHINE /some/path/myrepo.git (BARE:master)
$ git remote add mygithost http://user@anotherserver.adomain.com/project/myrepo.git

user@SOMEMACHINE /some/path/myrepo.git (BARE:master)
$ git push --all mygithost
Password for 'xxxx':
error: cannot spawn git: No such file or directory 
```

“无法生成 git”是什么意思？

如何将包含所有分支的裸仓库推送到现有的空仓库？

我搜索了几种可能性并查看了几个 SO 问题，但我没有看到解决此问题的方法。显然，我对这个过程的理解是有缺陷的。

## 更新

我想我的理解没有缺陷。该错误以某种方式误导我认为裸存储库有问题，因为我可以从“常规”克隆中克隆并逐个分支推送。

事实证明，这是 MSysGit 中的一个错误。我搬到 Linux 是因为保留所有历史记录是我的要求。我不能简单地删除分支和标签，因为它们需要被推送到空的远程仓库。因此，以下确实有效：

```
$ git remote rm origin
$ git clone --mirror git://aserver.adomain.com/myrepo
$ cd /some/path/myrepo.git
$ git remote add mygithost http://user@anotherserver.adomain.com/project/myrepo.git
$ git push --all mygithost
$ git push --tags mygithost 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T22:28:00.657

由于此评论导致了解决方案（请参阅问题末尾的编辑），因此将其重新发布为答案：

你在使用 MSysGit 吗？众所周知，如果您有大量标签，就会发生这种情况。见[这篇文章](http://groups.google.com/forum/#!msg/msysgit/6bFAPUQDQLI/USrCnnZ4x5QJ)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-05T18:51:26.823

根据[这篇文章](https://groups.google.com/forum/#!msg/msysgit/6bFAPUQDQLI/USrCnnZ4x5QJ)，根本问题是如果将 git 安装到路径中有空格的目录中，则会出现行为异常。这与我遇到错误的环境以及报告的错误消息一致。

鉴于 git 最初是由 Linux 的作者编写的，我想这种行为并不令人意外。典型的解决方法似乎是使用对路径名中的空格不利的操作系统。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-15T13:25:03.620

由于在 Windows 上使用 git 时标签过多，我也遇到了这个问题。我通过制作一个批处理脚本来解决它，该脚本一次推送一些标签，直到标签数量略低于 500。然后我能够制作一个`git push`需要一些时间才能完成的脚本，但可以工作。

因此，您几乎只需打开记事本，`git push origin <yourtagname>`为要推送的每个标签写一个，每行一个，将其保存为 blabla.bat 在您的 git 存储库文件夹中并运行它。如果您只是从标签文件夹中复制所有文件名，并在每个文件名前面`.git\refs\tags`添加一些替换魔法，那就更容易了。`git push origin`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-27T09:42:59.353

当我尝试在 stash/bitbucket git 服务器上推送一些从 TFS 导出的大型项目（在本地 pc git 文件夹上）时，我遇到了同样的问题（无法生成 git：没有这样的文件或目录）。有一个分支和很多标签（3K+ 标签）。推送所有标签命令时出现问题，而推送单个标签可以正常工作。我正在使用 GitExtensions（基于 msysgit）并且与远程的连接是 http。

**解决方案**突然出现：我重新配置了我的 git 以**使用 SSH 连接远程而不是 http**，这奇迹般地解决了问题：推送所有标签都成功了。

# c# - 单击ASP日历日期时如何显示弹出窗口？

> ID：14867235
> 
> 赞同：1
> 
> 时间：2013-02-14T03:18:27.347
> 
> 标签：c#, javascript, asp.net

我正在使用 ASP 日历。我想在用户单击日期时显示一个弹出窗口，我还想在弹出窗口中显示选定的日期。我使用[了这个链接](http://www.ericmmartin.com/projects/simplemodal-demos/)。

这是我的asp日历

```
<div id='basic-modal'>                    
   <asp:Calendar ID="cal" Width="700" OnDayRender="DayRender"  BackColor="white"   runat="server" OnSelectionChanged="cal_SelectionChanged"   >
       <SelectedDayStyle BackColor="#C00000" />
       <DayStyle CssClass="basic" />
   </asp:Calendar> 
```

这是我的弹出表单。

```
<div id="basic-modal-content">
<table>
<tr><td>Date:</td><td>
    <asp:Label ID="lblSelectDate" runat="server" Text=""></asp:Label></td>

</tr>
<tr><td>Message : </td><td>
<textarea id="txtMessage" cols="20" rows="2" ></textarea>
</td>

</tr>
<tr><td></td><td><input type="submit" value="Submit"   /></td></tr>

</table>
</div> 
```

当我单击显示弹出窗口的日期时，它不会调用“cal_SelectionChanged”函数。

```
protected void cal_SelectionChanged(object sender, EventArgs e)
{
   lblSelectDate.Text = e.ToString();
} 
```

所以我的问题是如何将选定的日期传递给弹出窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T06:50:20.537

这是一个工作代码..

```
 protected void cal_SelectionChanged(object sender, EventArgs e)
    {

        lblSelectDate.Text = cal.SelectedDate.ToString();
    } 
```

# javascript - mongodb 在嵌套容器中找不到我的模式方法

> ID：14867239
> 
> 赞同：0
> 
> 时间：2013-02-14T03:18:40.723
> 
> 标签：javascript, node.js, mongodb, mongoose

我正在尝试访问存储在混合容器中的模式的方法。情况如下：我有一些案例模型可以是许多不同的东西，所以我有一个存储在“caseContent”混合属性中的每一个东西的模式。

```
var CaseSchema = mongoose.Schema({
    caseContent : {},
    object : {type:String, default : "null"},
    collision : {type : Boolean, default : false}
}); 
```

然后用我的一种模式的模型填充 caseContent 属性，例如这个：

```
var TreeSchema = new mongoose.Schema({
    appleCount : {type : Number, default : 3}
});
TreeSchema.methods.doStuff = function (data) {
    console.log('Hey, listen');
    return true;
}; 
```

然后，我想使用原始容器中的架构方法：

```
CaseSchema.methods.doStuff = function (data) {
    if (this.caseContent.doStuff !== undefined) {
        this.caseContent.doStuff();
                    console.log('it worked');
    } else {
        console.log('doStuff is undefined');
        console.log(this.caseContent.doStuff);
    }
}; 
```

第一次（当所有内容都添加到数据库中时）它可以工作。然后， caseContent.doStuff 似乎总是未定义（console.log('doStuff is undefined'); 每次出现）。

所以我认为有一些东西让我无法调用该方法，可能是因为容器的混合类型......有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T03:55:57.040

您可以尝试使用此架构类型`Schema.Types.Mixed`

```
var CaseSchema = mongoose.Schema({
    caseContent : Schema.Types.Mixed,
    object : {type:String, default : "null"},
    collision : {type : Boolean, default : false}
}); 
```

# salesforce - First error: INVALID_CROSS_REFERENCE_KEY, Assigned To ID: owner cannot be blank: [OwnerId]

> ID：14867242
> 
> 赞同：2
> 
> 时间：2013-02-14T03:18:54.373
> 
> 标签：salesforce, apex-code, apex, soql

I am writing a test for my controller. For that I have to insert an event in the test database.

My test method is:

```
static TestMethod void Test1_TestInsertWithValue()
{
    Meeting_Master__c master = new Meeting_Master__c();
    Event event = new Event();
    Profile p = [SELECT Id From Profile WHERE Name='Standard User'];
    User u2 = new User(Alias = 'newUser', Email = 'newuser@testorg.com', EmailEncodingKey = 'UTF-8', LastName = 'Testing',
    LanguageLocaleKey = 'en_US', LocaleSidKey='America/Los_Angeles', UserName='newuser@testorg.com', ProfileId=p.Id);

    event.OwnerId = u2.Id;
    event.StartDateTime = datetime.newInstance(2008, 12, 1);
    event.EndDateTime = datetime.newInstance(2008, 12, 30);
    event.subject = 'call';
    event.WhatId = master.Id;
    insert master;
    insert event;
    ...........
} 
```

When the insert event occurs, I am facing this error:

> System.DmlException: Insert failed. First exception on row 0; first error: INVALID_CROSS_REFERENCE_KEY, Assigned To ID: owner cannot be blank: [OwnerId]

How do I rectify this error?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T04:29:08.590

您忘记`u2`在该行之前插入`event.OwnerId =u2.Id;`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T04:50:58.897

作为第一个选项，您可以插入测试用户：

```
 @isTest
 private class test{

     static TestMethod void Test1_TestInsertWithValue() {
         Meeting_Master__c master=new Meeting_Master__c();
         Event event =new Event();
         Profile p=[SELECT Id From Profile WHERE Name='Standard User'];
         User u2 =new User( Alias = 'newUser1' ,
                            Email ='newuser123@testorg.com',
                            EmailEncodingKey = 'UTF-8',
                            LastName = 'Testing',
                            LanguageLocaleKey='en_US',
                            LocaleSidKey='en_US', // changed for to avoid: INVALID_OR_NULL_FOR_RESTRICTED_PICKLIST, Locale: bad value for restricted picklist field: America/Los_Angeles
                            UserName='newuser123@testorg.com',
                            ProfileId=p.Id,
                            TimeZoneSidKey    = 'America/Los_Angeles');
         insert u2;

         event.OwnerId = u2.Id;
         event.StartDateTime = datetime.newInstance(2008, 12, 1);
         event.EndDateTime = datetime.newInstance(2008,12,10); // changed to 10-12-2008 for to avoid: FIELD_INTEGRITY_EXCEPTION, Event duration can not be longer than 14 days
         event.subject='call';
         event.WhatId=master.Id;
         Insert master;
         insert event;
     }

 } 
```

第二个选项是尝试使用`System.runAs()` [http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_testing_tools_runas.htm](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_testing_tools_runas.htm)

```
 @isTest
 private class test{

     static TestMethod void Test1_TestInsertWithValue() {
         Meeting_Master__c master=new Meeting_Master__c();
         Event event =new Event();
         Profile p=[SELECT Id From Profile WHERE Name='Standard User'];
         User u2 =new User( Alias = 'newUser1' ,
                            Email ='newuser123@testorg.com',
                            EmailEncodingKey = 'UTF-8',
                            LastName = 'Testing',
                            LanguageLocaleKey='en_US',
                            LocaleSidKey='en_US', 
                            UserName='newuser123@testorg.com',
                            ProfileId=p.Id,
                            TimeZoneSidKey    = 'America/Los_Angeles');

         Insert master;

         System.runAs(u2) {
            event.StartDateTime = datetime.newInstance(2008, 12, 1);
            event.EndDateTime = datetime.newInstance(2008,12,10);
            event.subject='call';
            event.WhatId=master.Id;

            insert event;
         }
     }

 } 
```

# java - Reading from a txt file into a single array - Java

> ID：14867245
> 
> 赞同：0
> 
> 时间：2013-02-14T03:19:18.783
> 
> 标签：java, arrays, file-io

I have a txt file that contains 40 names. Each name is on its own line. This method should take each name and place it into an array of 4 elements and then take that array and write those files to another txt file with use of another method.

My issue is every forth name in the list somehow ends up being null and my output txt file ends up with 10 rows and a null as the forth element in each row.

I have provided code and sample I/O below. Thanks in advance!

Sample Input

```
Emily
Reba
Emma
Abigail
Jeannie
Isabella
Hannah
Samantha 
```

My method

```
public static void fillArray(String[] player ,String[] team, BufferedReader br) throws IOException{
  String line;
  int count = 0;

  while((line = br.readLine()) != null){
    if(count < 3){
       player[count] = line;
       count++;
    }
    else{
       count = 0;
       writeFile(player);
    }
  }
  br.close(); 
```

}

Sample Output

```
Emily Reba Emma null 
Jeannie Isabella Hannah null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T03:23:59.900

你的逻辑不正确。`player[3]`永远不会设置，并且下一个循环最终会读取一行而不将其存储到数组中。用这个：

```
public static void fillArray(String[] player ,String[] team, BufferedReader br) throws IOException{
  String line;
  int count = 0;

  while((line = br.readLine()) != null){
    player[count] = line;
    count++;
    if (count == 4) {
       count = 0;
       writeFile(player);
    }
  } 
```

# .net - Httpwebrequest fails with Not Found error : windows phone 8

> ID：14867247
> 
> 赞同：0
> 
> 时间：2013-02-14T03:19:28.240
> 
> 标签：.net, windows-phone-7, c#-4.0, windows-phone-8

i am trying to post a httpwebrequest to a Rest service from windows phone 8 , with the http headers :User-agent =@"Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0;Trident/6.0; IEMobile/10.0; ARM; Touch; Microsoft; Virtual)" And the post post body :payload=testvalue&item1=value;

the same request does returns a response when posted from a REST client

and below is the exception occured in windows phone 8 code

```
System.Net.WebException was caught
HResult=-2146233079
Message=The remote server returned an error: NotFound.
Source=System.Windows
InnerException: System.Net.WebException
HResult=-2146233079
Message=The remote server returned an error: NotFound.
Source=System.Windows
InnerException: 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T05:39:49.073

这是有趣的部分 - NotFound 是一个非常通用的错误，它可以告诉您请求内部失败或 Web 服务拒绝了您的请求。

为了更好地了解正在发生的事情，请将其包装在`try`/`catch`块中（对于 a `WebException`）并阅读响应：

```
try
{
    HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(respResult);
    using (StreamReader reader = new StreamReader(response.GetResponseStream()))
    {
        Debug.WriteLine(reader.ReadToEnd());
    }
}
catch (WebException ex)
{
    using (StreamReader reader = new StreamReader(ex.Response.GetResponseStream()))
    {
        Debug.WriteLine(reader.ReadToEnd());
    }
} 
```

报告结果，我将能够为您提供更多帮助。

# java - Java：在此示例中防止死锁

> ID：14867251
> 
> 赞同：1
> 
> 时间：2013-02-14T03:20:14.137
> 
> 标签：java, multithreading, concurrency, synchronization

试图锻炼我对 Java 并发性的理解，问题是：可以有多个线程运行方法 A，而只有一个线程运行方法 B（假设 A() 运行了 10 次。所以在第 10 次，那个线程将运行方法 B。发生这种情况时，它必须阻止线程运行 A，并允许已经运行 A 的线程在运行 B 的其余部分之前完成。此外，A 中的线程不应等待自身。

编辑：所有线程首先在 A 上启动，有一个外部方法检查何时运行 B。

到目前为止，我的尝试看起来像这样：

```
volatile Boolean lock = false; //false = threads in method A allowed to run, thread in method B otherwise
volatile Integer countOfA = 0;

void A(){
    boolean continue = false;
    synchronized(lock){
    if(lock == true){ //there is a thread in B, block threads in A
        lock.wait();

        increaseCountOfA();
        //do work
        decreaseCountOfA();

        if(countOfA == 0){ //this was the last thread that ran with lock
            lock = true;
            lock.notify(); //only the thread in B should be waiting on this
        }
      }else{
        continue = true;
      }
    }

    if(continue){
        increaseCountOfA();
        //do work;
        decreaseCountOfA();
    }
}

void B(){
  synchronized(lock){
    if(lock == false){
        lock.wait();
        if(countOfA > 0){
            countOfA.wait();
        }
        //do work;
        lock = false;
        lock.notifyAll();
    }
  }
}

void increaseCountOfA(){
  synchronized(countOfA){
    countOfA++;
  }
}

void decreaseCountOfA(){
  synchronized(countOfA){
    countOfA--;
  }
} 
```

当它运行时，它挂起。我怀疑是死锁，我也不知道这个问题需要多少级同步。这可以只用一个级别来完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:52:56.120

当您这样做时，`synchronized(lock)`您正在同步 引用的对象`lock`，而不是变量。您可能想要一个独立的锁定对象，其值不会更改。或者，您可以考虑使用更高级别的并发类，例如`Semaphore`.

在这种情况下，您有一个线程正在等待`Boolean.TRUE`，另一个线程在 上发布通知`Boolean.FALSE`。

# java - BigInteger 的问题

> ID：14867253
> 
> 赞同：1
> 
> 时间：2013-02-14T03:20:23.780
> 
> 标签：java, biginteger

出于某种原因，BigInteger 没有按我的意愿工作。我正在做 BigVariable.add(BigVariable)，但它不会添加。结果始终是它初始化的值。有人知道我错过了什么吗？提前致谢

该代码适用于项目 euler 48

```
import java.math.BigInteger;

public class tuna {
public static void main(String[] args) {
    BigInteger result = BigInteger.ZERO;
    for(int i= 1; i <= 1000; i++)
        result.add( bigPow(BigInteger.valueOf(i), i) );
    System.out.println(result);
}
public static BigInteger bigPow(BigInteger number, int pow){
    if(pow < 1)
        throw new RuntimeException("bigPow can't handle exponents lower than 1");
    if (pow == 1)
        return number;
    return number.multiply( bigPow(number, pow-1) );
}

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T03:22:23.950

尝试：

```
result = result.add( bigPow(BigInteger.valueOf(i), i) ); 
```

代替：

```
result.add( bigPow(BigInteger.valueOf(i), i) ); 
```

您需要这样做，因为 BigInteger 是不可变的（[不可变的任意精度整数](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html)）。所以你需要重新分配结果。

**添加**

> 公共 BigInteger 添加（BigInteger val）
> 
> 返回值为 (this + val) 的 BigInteger。参数： val - 要添加到此 BigInteger 的值。返回：this + val

# javascript - 淘汰赛数据未呈现

> ID：14867257
> 
> 赞同：0
> 
> 时间：2013-02-14T03:20:40.340
> 
> 标签：javascript, knockout.js, sinatra

我正在使用 sinatra 和 knockout.js 构建一个简单的 Web 应用程序。我的基本结构是后端的模型，它只返回 json，并使用敲除渲染所有客户端。但是我的数据没有呈现，即使我预先填充了数组。

这是 app.rb 的一部分：

```
 get "/" do
        content_type 'html'
        erb :index
    end
    get "/topics" do
        @topics = Topic.all
        @topics.to_json
    end
    get "/topics/:id" do
        @topic = Topic.find(params[:id])
        @topic.to_json
    end
    post "/topics/new" do
        @topic = Topic.new(name: params[:name],
                           description: params[:description])
        @topic.created_at = DateTime.now

    end 
```

还有我的数据库：

```
 APP_ROOT = File.expand_path(File.dirname(__FILE__))
    DataMapper.setup(:default, "sqlite:///#{APP_ROOT}/db.sqlite3")
    class Topic
        include DataMapper::Resource
        property :id, Serial
        property :name, Text
        property :description, Text
        property :created_at,        DateTime
        property :updated_at,        DateTime
    end
    DataMapper.auto_upgrade! 
```

我的 Javascript 文件：

```
function Topic(data){
    this.name = ko.observable(data.name);
    this.description = ko.observable(data.description);
    this.created_at = ko.observable(data.created_at);
    this.updated_at = ko.observable(data.updated_at);
    this.id = ko.observable(data.id);
}
function TopicViewModel(){
    var that = this;
    that.topics = ko.observableArray([{name: "hello",description: "hi"}]);
    $.getJSON("/topics",function(raw){
        var topics = $.map(raw, function(item){return new Topic(item)});
        that.topics(topics);
    });
    that.newTopic = ko.observable();
        that.addTopic = function(){
            var newTopic = new Topic({name: "", description: ""});
            $.getJSON("date", function(data){
                newTopic.created_at(data.date);
                newTopic.updated_at(data.date);
                that.topics.push(newTopic);
                that.saveTopic(newTopic);
            });
        };
    that.saveTopic = function(topic){
        var t= ko.toJS(topic);
        $.ajax({
            url: "http://localhost:4567/topics/new",
            type: "POST",
            data: t
        }).done(function(data){
            topic.id(data.topic.id);
        });
    }
}
ko.applyBindings(new TopicViewModel()); 
```

最后，我的html：

```
 <!DOCTYPE html>
    <html>
    <head>
    <link href="style.css">
    <title>Topics</title>
    </head>
    <body>
        <div id="container">
            <section id="create">
                <h2>New Topic</h2>
                <form id="addTopic" data-bind="submit: addTopic">
                    <input data-bind="value: name"/>
                    <input data-bind="value: description"/>
                    <button type="submit">Create Topic</button>
                </form>
            </section>
            <section id="topics">
                <!-- ko foreach: topics -->
                   <td data-bind="text: name"></td>
                   <td data-bind="text: description"></td>
                   <td data-bind="text: created_at"></td>
                   <td data-bind="text: updated_at"></td>
                <!-- /ko -->
            </section>
            <script src="scripts/jquery.js"></script>
            <script src="scripts/knockout.js"></script>
            <script src="scripts/app.js"></script>

    </body>
    </html> 
```

为什么没有这个渲染？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:34:46.003

您的问题是您的 html 无效。您正在尝试`td`在`section`...

将您的更改`td`为`span`（或`div`），它应该可以正常工作：

```
<section id="topics">
  <!-- ko foreach: topics -->
    <span data-bind="text: name"></span>
    <span data-bind="text: description"></span>
    <span data-bind="text: created_at"></span>
    <span data-bind="text: updated_at"></span>
   <!-- /ko -->
</section> 
```

或者构建一个正确的`table`（Knockout 无法确定您想要一个表格并神奇地为您呈现它）

```
<table>
    <thead>
        <tr>
            <th>name</th>
            <th>description</th>
            <th>created_at</th>
            <th>updated_at</th>
        </tr>
    </thead>
    <tbody>
        <!-- ko foreach: topics -->
        <tr>
            <td data-bind="text: name"></td>
            <td data-bind="text: description"></td>
            <td data-bind="text: created_at"></td>
            <td data-bind="text: updated_at"></td>
        </tr>
        <!-- /ko -->
    </tbody> 
 </table> 
```

# c++ - OSX 是否有 CoreBluetooth 的替代品

> ID：14867263
> 
> 赞同：6
> 
> 时间：2013-02-14T03:21:30.470
> 
> 标签：c++, objective-c, osx-mountain-lion, core-bluetooth, bluetooth-lowenergy

只是检查是否有人看到使用 CoreBluetooth 进行蓝牙经典和蓝牙 LE 连接的替代方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:56:20.440

`CoreBluetooth.framework`仅适用于蓝牙低功耗。 `ExternalAccessory.framework`（iOS），以及它在 Mac OSX 中的挂件`IOBluetooth`（我认为就是那个）用于经典蓝牙。由于它们是两种不同的思维方式和工作方式，因此您无法使用一种方式与蓝牙之王进行通信。您必须将低功耗蓝牙理解为经典蓝牙的一个分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T03:27:23.280

你也有[BTstack](http://code.google.com/p/btstack/)。但这仅适用于越狱设备。

# calendar - 将日期值从一个时区更改为另一个时区

> ID：14867265
> 
> 赞同：0
> 
> 时间：2013-02-14T03:21:35.757
> 
> 标签：calendar, timezone, java, simpledateformat

我的情况是我有一个 Date obj，里面的日期是 UTC 时间。但是我希望将其更改为日本时间。

```
 Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone("Japan"));
    calendar.setTime(someExistingDateObj);
     System.out.println(String.valueOf(calendar.get(Calendar.HOUR_OF_DAY)) + ":" + calendar.get(Calendar.MINUTE)); 
```

existingDateObj 是从 db 映射的，db 值为 2013-02-14 03:37:00.733

04:37

似乎时区不起作用？

谢谢你的时间....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:27:17.127

sdf2 和 sdf3 是同等初始化的，所以不需要它们中的两个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T03:31:32.777

你的问题可能是你看错了。A`Date`没有时区。它代表一个离散的时刻，[“旨在反映协调的世界时间”](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)。日历和日期格式化程序是获取时区信息的内容。您使用 Calendar 和 TimeZone 实例的第二个示例似乎工作正常。现在，这段代码：

```
public static void main(String[] args) {
    Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone("Japan"));
    System.out.println(String.valueOf(calendar.get(Calendar.HOUR)) + ":" + calendar.get(Calendar.MINUTE));
} 
```

报告：

```
0:32 
```

这对我来说似乎是正确的。你觉得它有什么问题？

**更新：**哦，也许你期待`12:32`上面的代码？你会想要使用[Calendar.HOUR_OF_DAY](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#HOUR_OF_DAY)而不是[Calendar.HOUR](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#HOUR)，或者做一些小时数学。Calendar.HOUR 使用 0 来表示中午和午夜。

**更新 2：**这是我试图解决这个问题的最后一次尝试。试试这个代码：

```
public static void main(String[] args) {
    Calendar calendar = Calendar.getInstance();
    SimpleDateFormat format = new SimpleDateFormat("H:mm a Z");
    List<TimeZone> zones = Arrays.asList(
            TimeZone.getTimeZone("CST"),
            TimeZone.getTimeZone("UTC"),
            TimeZone.getTimeZone("Asia/Shanghai"),
            TimeZone.getTimeZone("Japan"));
    for (TimeZone zone : zones) {
        calendar.setTimeZone(zone);
        format.setTimeZone(zone);
        System.out.println(
                calendar.get(Calendar.HOUR_OF_DAY) + ":"
                + calendar.get(Calendar.MINUTE) + " "
                + (calendar.get(Calendar.AM_PM) == 0 ? "AM " : "PM ")
                + (calendar.get(Calendar.ZONE_OFFSET) / 1000 / 60 / 60));
        System.out.println(format.format(calendar.getTime()));
    }
} 
```

请注意，它创建了一个 Calendar 对象，表示“现在”。然后，它使用 Calendar.get() 方法和 SimpleDateFormat 打印出该日历在四个不同时区表示的时间，以表明两种方式都获得了相同的结果。现在的输出是：

```
22:59 PM -6
22:59 PM -0600
4:59 AM 0
4:59 AM +0000
12:59 PM 8
12:59 PM +0800
13:59 PM 9
13:59 PM +0900 
```

如果您使用 Calendar.HOUR 而不是 Calendar.HOUR_OF_DAY，那么您会看到：

```
10:59 PM -6
22:59 PM -0600
4:59 AM 0
4:59 AM +0000
0:59 PM 8
12:59 PM +0800
1:59 PM 9
13:59 PM +0900 
```

它分别以中央标准时间（我的时区）、UTC、上海时间和日本时间正确显示当前时间，以及它们的时区偏移量。您可以看到它们都排成一行并具有正确的偏移量。

# android - 基于父宽度的动态 VideoView 高度

> ID：14867269
> 
> 赞同：0
> 
> 时间：2013-02-14T03:21:54.770
> 
> 标签：android, android-layout, android-widget

我正在尝试将 a`VideoView`调整为父容器宽度，然后设置高度以保持 4:3 的纵横比。我已经看到一些建议扩展`VideoView`类和覆盖的答案`onMeasure`，但我不明白我得到的参数或如何使用它们：

```
package com.example;

import android.content.Context;
import android.util.AttributeSet;
import android.util.Log;
import android.widget.VideoView;

public class MyVideoView extends VideoView {

    public MyVideoView(Context context) {
        super(context);
    }

    public MyVideoView (Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public MyVideoView (Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onMeasure (int widthMeasureSpec, int heightMeasureSpec) {
        Log.i("MyVideoView", "width="+widthMeasureSpec);
        Log.i("MyVideoView", "height="+heightMeasureSpec);
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    }
} 
```

结果（在 Nexus 7 平板电脑上）：

```
02-13 21:33:42.515: I/MyVideoView(12667): width=1073742463
02-13 21:33:42.515: I/MyVideoView(12667): height=1073742303 
```

我正在尝试实现以下布局：

平板电脑（纵向）：

*   VideoView 宽度 - 全屏或几乎全屏。
*   VideoView 高度 - 在给定宽度的情况下保持 4:3 纵横比
*   ListView - 出现在 VideoView 下方以选择要播放的视频。

平板电脑（横向）：

*   ListView - 出现在屏幕左侧，用于选择要播放的视频。
*   VideoView - 出现在屏幕右侧，应填充剩余宽度和设置的高度以保持 4:3 的纵横比。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:06:38.167

尝试这个：

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    int width = getDefaultSize(mVideoWidth, widthMeasureSpec);
    int height = getDefaultSize(mVideoHeight, heightMeasureSpec);

            /**Adjust according to your desired ratio*/
    if (mVideoWidth > 0 && mVideoHeight > 0) {
        if (mVideoWidth * height > width * mVideoHeight) {
            // Log.i("@@@", "image too tall, correcting");
            height = (width * mVideoHeight / mVideoWidth);
        } else if (mVideoWidth * height < width * mVideoHeight) {
            // Log.i("@@@", "image too wide, correcting");
            width = (height * mVideoWidth / mVideoHeight);
        } else {
            // Log.i("@@@", "aspect ratio is correct: " +
            // width+"/"+height+"="+
            // mVideoWidth+"/"+mVideoHeight);
        }
    }

    setMeasuredDimension(width, height);

} 
```

其中 mVideoWidth 和 mVideoHeight 是视频的当前尺寸。希望有帮助。:)

# php - asp的json_encode

> ID：14867271
> 
> 赞同：1
> 
> 时间：2013-02-14T03:22:02.120
> 
> 标签：php, jquery, json, asp-classic

我需要将 json 返回从 php 转换为 asp 经典。我怎样才能做到这一点？

在 index.php 中

```
<script>
function (){
    $.ajax({
       url: ajax.php,
       dataType: "json",
       data: {
       ROWID : rowid
       },
       success: function(data){
         alert(data[0]);
       }                    
       });
}
</script> 
```

在 ajax.php

```
echo json_encode(array(
    "TRUE"
));
return; 
```

我将收到一个 java 警报消息“TRUE”

asp里面应该有什么？

```
 Response.Write json_encode(array(
        "TRUE"
    )); 
```

不起作用。找不到完整的解决方案。任何想法我将如何在 asp 经典中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T03:43:30.730

有一种方法可以使用[http://code.google.com/p/aspjson/转换为 json](http://code.google.com/p/aspjson/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:18:53.167

[AX](http://zend.lojcomm.com.br/goodies/asp-xtreme-evolution/) (ASP Xtreme Evolution) 有一些 JSON 库可以满足您的需要。

[在此处](http://zend.lojcomm.com.br/entries/classic-asp-json-revisited/)查看示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T04:29:27.973

如果您想像 PHP 那样使用 .NET 管理 JSON，则必须使用库来执行此操作（或编写自己的解析，但这不是一个好主意）。

您可以搜索有关此的更多信息：Newtonsoft.json

Thi 是一个很好的库，它允许您将 json 解析为对象，并将对象解析为 json。

[Newtonsoft.Json 的链接](http://www.nuget.org/packages/Newtonsoft.Json)

# android - Android 应用显示来自 URL 的图像

> ID：14867278
> 
> 赞同：8
> 
> 时间：2013-02-14T03:22:30.087
> 
> 标签：android, url, imageview

我正在寻找一个非常基本的功能。我正在尝试设计一个应用程序，我想要它做的就是从 URL 加载图像。我发现了一些问题和网站，但它们似乎都较旧且过时，但我认为我遇到的问题是将代码链接到 ImageView 的活动 main.xml。

您有任何建议或链接，我将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-14T03:28:36.610

在这里，这就是我在图像视图中显示来自 url 的图像的方式
**，您必须从主线程以外的线程调用此代码**

```
ImageView img = (ImageView) findViewById(R.id.imageView1);
try {
        URL url = new URL("Your URL");
        //try this url = "http://0.tqn.com/d/webclipart/1/0/5/l/4/floral-icon-5.jpg"
        HttpGet httpRequest = null;

        httpRequest = new HttpGet(url.toURI());

        HttpClient httpclient = new DefaultHttpClient();
        HttpResponse response = (HttpResponse) httpclient
                .execute(httpRequest);

        HttpEntity entity = response.getEntity();
        BufferedHttpEntity b_entity = new BufferedHttpEntity(entity);
        InputStream input = b_entity.getContent();

        Bitmap bitmap = BitmapFactory.decodeStream(input);

        img.setImageBitmap(bitmap);

    } catch (Exception ex) {

    } 
```

小心不要忘记用 try catch 包围代码（我已经在这段代码中这样做了）

或者您可以使用 webview 从 url 加载图像

```
WebView web = (WebView) findViewById(R.id.webView1);
web.loadUrl("Your Url"); 
```

如果您尝试从资产文件夹加载图像，则 URL 将像这样“file:///android_asset/yourimage.jpg”开始，
否则正常的 Internet url 像这样“ [http://0.tqn.com/d/webclipart/1 /0/5/l/4/floral-icon-5.jpg](http://0.tqn.com/d/webclipart/1/0/5/l/4/floral-icon-5.jpg) "

希望这对你有用祝你好运

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T03:28:39.050

有一个名为 imageloader 的开源库。应用广泛，可以直接使用，也可以编写类似的代码。

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T05:03:25.923

You can take the image and on your php side convert it into a base64 and then on Android side decode it into a image.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-05T10:49:30.347

下载图像的最佳做法是在后台线程上完成，这样它就不会中断您的主线程，然后根据需要更新用户界面。

公共类 MainActivity 扩展 AppCompatActivity {

```
FrameLayout frameLayout;
ImageView imageView;
ProgressBar progressBar;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    frameLayout= (FrameLayout) findViewById(R.id.containerlayout);
    imageView= (ImageView) findViewById(R.id.imageView);
    progressBar= (ProgressBar) findViewById(R.id.progressBar);

    String url="http://www.flat-e.com/flate5/wp-content/uploads/cover-960x857.jpg";
    MyTask myTask= new MyTask();
    myTask.execute(url);
}
class MyTask extends AsyncTask<String, Void, Bitmap> {

    @Override
    protected void onPreExecute() {
        progressBar.setVisibility(View.VISIBLE);
    }

    @Override
    protected Bitmap doInBackground(String... voids) {

        Bitmap bitmap=null;
        try {
            URL url =new URL(voids[0]);
            HttpURLConnection connection= (HttpURLConnection) url.openConnection();
            InputStream inputStream= connection.getInputStream();
            bitmap = BitmapFactory.decodeStream(inputStream);
        } catch (IOException e) {
            e.printStackTrace();
        }
        return bitmap;
    }

    @Override
    protected void onPostExecute(Bitmap bitmap) {
        progressBar.setVisibility(View.GONE);
        imageView.setImageBitmap(bitmap);

    }
} 
```

}

在这里，在这个例子中，我创建了一个内部类 MyTask，它扩展了我完成所有网络操作的 AsyncTask。确保在您的清单文件中添加使用权限。

希望这对你也有效。

# java - 在清单文件中指定编码

> ID：14867281
> 
> 赞同：1
> 
> 时间：2013-02-14T03:22:46.157
> 
> 标签：java, utf-8, jar, manifest, manifest.mf

我使用 Eclipse 中的导出功能创建了一个 jar，当我尝试按以下方式执行它时，它失败了

```
java -jar Code.jar 
```

但是它可以正常工作

```
java -Dfile.encoding=UTF-8 -jar Code.jar 
```

当前清单文件

```
Manifest-Version: 1.0
Main-Class: test.Reader
Class-Path: . 
```

如何在清单文件中提及编码？这样我就不必在运行 jar 文件时明确提及它了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:40:04.273

这表明您的代码有问题。您的代码当前取决于默认平台编码，如果该编码不是“UTF-8”，则该编码不起作用。因此，您应该更改代码中依赖于默认平台编码的位置，以明确使用“UTF-8”编码。

而且，不，您不能在清单中指定它。

# c - 字符数组打印额外的垃圾内存

> ID：14867283
> 
> 赞同：0
> 
> 时间：2013-02-14T03:23:15.193
> 
> 标签：c

该程序应该输出`VYGHBUTMDE`，但它在末尾附加了一些垃圾字符。为什么是这样？

```
#include <stdio.h>
#include <string.h>

int
encrpypt(char ciphertext_buffer[], char plaintext[], char key[]) {
  int i;
  for (i=0; i<strlen(plaintext); i++) {
    ciphertext_buffer[i] = (char) ( ( ((int)plaintext[i] - 65 + (int)key[i%(strlen(key))] - 65) % 26 ) + 65 );
  }
  return 0;
}

int
main() {
  char ciphertext_buffer[10];
  encrpypt(ciphertext_buffer, "THISISCOOL", "CRYPT");
  printf("%s\n", ciphertext_buffer);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T03:27:09.653

由于您只为 10 字节字符串分配 10 字节数组，因此终止空字符“无处可去”。考虑将缓冲区大小增加到至少比“可见”字符中的字符串长度大一个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T03:36:07.233

您不是 null 终止字符串。这是一个稍微修改的版本：（虽然还是有问题）

```
#include <stdio.h>
#include <string.h>

int
encrpypt(char ciphertext_buffer[], char plaintext[], char key[]) {
  int i;
  for (i=0; i<strlen(plaintext); i++) {
    ciphertext_buffer[i] = (char) ( ( ((int)plaintext[i] - 65 + (int)key[i%(strlen(key))] - 65) % 26 ) + 65 );
  }
  ciphertext_buffer[i] = 0;
  return 0;
}

int
main() {
  char ciphertext_buffer[11];
  encrpypt(ciphertext_buffer, "THISISCOOL", "CRYPT");
  printf("%s\n", ciphertext_buffer);
  return 0;
} 
```

一个更大的问题是您没有进行任何边界检查。这是一个更好的版本：

```
#include <stdio.h>
#include <string.h>

int
encrpypt(char ciphertext_buffer[], char plaintext[], char key[], int size) {
  int i;
  for (i=0; i<strlen(plaintext); i++) {
    if (i > size - 1) break;
    ciphertext_buffer[i] = (char) ( ( ((int)plaintext[i] - 65 + (int)key[i%(strlen(key))] - 65) % 26 ) + 65 );
  }
  ciphertext_buffer[i] = 0;
  return 0;
}

int
main() {
  char ciphertext_buffer[11];
  encrpypt(ciphertext_buffer, "THISISCOOL", "CRYPT", sizeof(ciphertext_buffer));
  printf("%s\n", ciphertext_buffer);
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T03:39:40.860

字符数组必须以'/0' 结束。因此，您总是需要将 char 数组分配为最大字符串大小 + 1。

尝试以下更正。

```
#include <stdio.h>
#include <string.h>

int encrpypt(char ciphertext_buffer[], char plaintext[], char key[]) {
  int i;
  for (i=0; i<strlen(plaintext); i++) {
    ciphertext_buffer[i] = (char) ( ( ((int)plaintext[i] - 65 + (int)key[i%(strlen(key))] - 65) % 26 ) + 65 );
  }
 ciphertext_buffer[i] = '\0';
  return 0;
}

int
main() {
  char ciphertext_buffer[11];
  encrpypt(ciphertext_buffer, "THISISCOOL", "CRYPT");
  printf("%s\n", ciphertext_buffer);
  return 0;
} 
```

# c# - 慢速串行端口写入

> ID：14867284
> 
> 赞同：0
> 
> 时间：2013-02-14T03:23:21.000
> 
> 标签：c#, .net, serial-port

旧版应用程序需要 200-400 毫秒才能将单个字节写入 SerialPort！我希望它几乎是瞬间的。

该应用程序接收字符串，处理它们并发送回并确认

```
mySP.Write("\x6"); 
```

我已经排除了物理因素。它使用 XP 和 .net 2.0。波特率为 9600。

什么可能导致这种缓慢的性能？锁定？

# php - 用于 DOM 操作的 PHP 正则表达式

> ID：14867289
> 
> 赞同：0
> 
> 时间：2013-02-14T03:23:49.623
> 
> 标签：php, html, regex, dom

我正在尝试从 URL 获取文本。谁能帮我。

```
$news1 = "http://www.espncricinfo.com/icc-womens-world-cup-2013/content/story/604808.html";     
$a=preg_match_all("/\<p class\=['\"]news-body['\"]\>(.*?)\<\/p\>/",$news1,$b);
echo $a;
print_r($b[1]); 
```

它返回 0 Array()。如果有人可以提供帮助，将不胜感激。

下面的一些HTML：

```
<p class="news-body">
New Zealand captain, Suzie Bates, also spoke of how the sides had played a competitive         game but said intensity levels weren't the same after the dispiriting news came in. Bates felt    it would have been better to have not known the result of the other match. 
</p>
<p class="news-body">
It was a particularly shattering end for the holders England, who went out of the            tournament without having had a single really poor game. Their defeats to Sri Lanka and Australia were by one wicket - off the last ball - and two runs. Edwards, however, refused to offer any excuses and said England had paid for their "slow start" to the tournament, beginning with the shock loss to Sri Lanka.
</p>
<p class="news-body">
"We had come here to win this tournament and we haven't. We haven't even got to the final," Edwards said. "That is disappointing for us as a group of players. We were very inconsistent in the first phase of the tournament and are probably now playing our best cricket, which is too late. We prepared well. We have no excuses. We didn't play well. We didn't hold our catches against Sri Lanka."
</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T03:30:51.410

```
// Fetch the content
$html = file_get_contents('http://www.espncricinfo.com/icc-womens-world-cup-2013/content/story/604808.html');

// Load the HTML into DOM
$libxml_use_internal_errors = libxml_use_internal_errors(true);
$dom = new DOMDocument;
$dom->loadHTML($html);
libxml_use_internal_errors($libxml_use_internal_errors); // note this may ruin any custom error handlers

// Load the DOM into SimpleXML
$simple = simplexml_import_dom($dom);

// Xpath the document
$news = $simple->xpath('//p[@class="news-body"]');

// Echo the results
foreach($news as $p)
{
  echo "<p>$p</p>";
} 
```

# java - 我的 oracle servlet 出现空白屏幕

> ID：14867290
> 
> 赞同：1
> 
> 时间：2013-02-14T03:23:53.480
> 
> 标签：java, oracle, servlets

这是我创建的 servlet，当我运行它时它只给我一个空白屏幕：

```
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;
import java.sql.*;
import java.util.*;

public class salesWOBriensrv extends HttpServlet {

/**
 *
 * @param request
 * @param response
 * @throws ServletException
 * @throws IOException
 */

protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {

    PrintWriter out = response.getWriter();
    response.setContentType("text/html");
    Connection connection = null;

    try{

        Class.forName("oracle.jdbc.driver.OracleDriver");

        connection = DriverManager.getConnection("jdbc:oracle:thin:@xxxx.xxxx.xxxx:1521:xxxx","xxxx","xxxxx");

        Statement stmt = connection.createStatement();

        ResultSet rs = stmt.executeQuery("SELECT * FROM sales ORDER BY sale_amount, sale_date");

        out.println("<html>");
        out.println("<head>");
        out.println("<title>Step 2 - Java Servlet for SALES Data/title>");
        out.println("</head>");
        out.println("<body>");
        out.println("<h1>Step 2 - Java Servlet for SALES Data</h1>");
        out.println("<table border='1'>");
        out.println("<b><th><tr><td>Sales ID</td>" +
                               "<td>Home ID</td>" +
                               "<td>Customer ID</td>" +
                               "<td>Agent ID</td>" +
                               "<td>Sale Date</td>" +
                               "<td>Sale Amount</td>" +
                               "<td></td>Contract ID</tr></th></b>");
        while (rs.next()) {

           // Get the columns from the current row of the result set
           String saleID = rs.getString(1);
           String homeID = rs.getString(2);
           String customerID = rs.getString(3);
           String agentID = rs.getString(4);
           String saleDate = rs.getString(5);
           String saleAmnt = rs.getString(6);
           String contractID = rs.getString(7);

           out.println("<tr><td>" + saleID + "</td>" +
                           "<td>" + homeID + "</td>" +
                           "<td>" + customerID + "</td>" +
                           "<td>" + agentID + "</td>" +
                           "<td>" + saleDate + "</td>" +
                           "<td>" + saleAmnt + "</td>" +
                           "<td>" + contractID + "</td></tr>");
        }

        out.println("</table>");
        out.println("</body>");
        out.println("</html>");

     }

    catch (Exception e){
     out.println("<html>");   
     out.println("<body>"); 
     out.println("Error");  
     out.println("</body>");   
    }

}

/**
 * Handles the HTTP
 * <code>POST</code> method.
 *
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */

protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {

   doGet (request, response);

}

} 
```

我用 x 替换了我的连接字符串，但我知道我所拥有的是正确的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:31:12.470

我猜 PrintWriter 没有刷新内容。你能试试这个

```
out.flush(); 
```

在您的代码末尾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T04:51:03.237

在您的 servlet 代码中尝试此顺序以创建`PrintWriter`对象

```
response.setContentType("text/html");
PrintWriter out = response.getWriter(); 
```

# javascript - 为数组赋值的性能

> ID：14867295
> 
> 赞同：5
> 
> 时间：2013-02-14T03:24:24.370
> 
> 标签：javascript, arrays, optimization

代码优化在 SO 中说，分析是优化 javascript 的第一步，建议的引擎是 Chrome 和 Firefox 的分析器。问题在于它们以某种奇怪的方式告诉每个函数执行的时间，但我对它们没有很好的理解。最有用的方法是分析器会告诉，每行执行了多少次，如果可能的话，还有每行花费的时间。这样就可以严格地看到瓶颈。但在实施/找到此类工具之前，我们有两个选择：

1）制作自己的计算器，计算特定代码块或行执行的时间和次数 2）学会理解哪些是慢速方法，哪些不是

对于选项 2 ， [jsperf.com](http://jsperf.com)有很大帮助。我尝试学习优化数组并在[JSPERF.COM](http://jsperf.com/pre-filled-array)中进行了速度测试。下图显示了在 5 个主要浏览器中的结果，发现了一些我之前不知道的瓶颈。

![速度测试](../Images/a0c1e6e6cc421f1f5fe8cb226eaeafac.png)

**主要发现是：**

1) 给数组赋值比给普通变量赋值要慢得多，尽管使用了哪种方法进行赋值。

2) 在性能关键循环之前预初始化和/或预填充数组可以显着提高速度

3）与将值推入数组相比，数学三角函数并没有那么慢（！）

以下是每个测试的解释：

* * *

**1\. 非数组（100%）：**

变量以这种方式被赋予一个预定义的值：

```
var non_array_0=0;
var non_array_1=0;
var non_array_2=0;
... 
```

在定时区域中，它们被这样称呼：

```
non_array_0=0;
non_array_1=1;
non_array_2=2;
non_array_3=3;
non_array_4=4;
non_array_5=5;
non_array_6=6;
non_array_7=7;
non_array_8=8;
non_array_9=9; 
```

以上是一个类似数组的变量，但似乎没有办法迭代或以其他方式引用这些变量作为与数组相反的方式。或者有吗？

**在这个测试中，没有什么比给变量赋值更快的了。**

* * *

**2\. non_array_non_pre (83.78%)**

与测试 1 完全相同，但变量未预初始化或预填充。速度是测试 1 速度的 83.78%。在每个测试的浏览器中，预填充变量的速度都比未预填充的快。**因此，在任何速度关键循环之外初始化（并可能预填充）变量。**

测试代码在这里：

```
var non_array_non_pre_0=0;
var non_array_non_pre_1=0;
var non_array_non_pre_2=0;
var non_array_non_pre_3=0;
var non_array_non_pre_4=0;
var non_array_non_pre_5=0;
var non_array_non_pre_6=0;
var non_array_non_pre_7=0;
var non_array_non_pre_8=0;
var non_array_non_pre_9=0; 
```

* * *

**3\. pre_filled_array (19.96 %):**

**数组是邪恶的！**当我们丢弃正常变量（test1 和 test2）并将数组放入图片中时，速度会显着降低。**尽管我们进行了所有优化（预初始化和预填充数组），然后直接赋值而不循环或推送，但速度下降到 19.96%。**这非常可悲，我真的不明白为什么会发生这种情况。这是这次测试中对我的主要冲击之一。数组是如此重要，我还没有找到一种方法来制作没有数组的许多东西。

测试数据在这里：

```
pre_filled_array[0]=0;
pre_filled_array[1]=1;
pre_filled_array[2]=2;
pre_filled_array[3]=3;
pre_filled_array[4]=4;
pre_filled_array[5]=5;
pre_filled_array[6]=6;
pre_filled_array[7]=7;
pre_filled_array[8]=8;
pre_filled_array[9]=9; 
```

* * *

**4\. non_pre_filled_array (8.34%)：**

这是与 3 相同的测试，但数组成员没有预初始化也没有预填充，唯一的优化是预先初始化数组：`var non_pre_filled_array=[];`

与预初始化测试 3 相比，速度降低了 58.23%。**因此，预初始化和/或预填充阵列使速度加倍。**

测试代码在这里：

```
non_pre_filled_array[0]=0;
non_pre_filled_array[1]=1;
non_pre_filled_array[2]=2;
non_pre_filled_array[3]=3;
non_pre_filled_array[4]=4;
non_pre_filled_array[5]=5;
non_pre_filled_array[6]=6;
non_pre_filled_array[7]=7;
non_pre_filled_array[8]=8;
non_pre_filled_array[9]=9; 
```

* * *

**5\. pre_filled_array[i] (7.10%):**

然后到循环。此测试中最快的循环方法。阵列已预初始化和预填充。

与内联版本（测试 3）相比，速度下降了 64.44 %。这是如此显着的差异，我会说，如果不需要，不要循环。如果数组大小很小（不知道有多小，必须单独测试），使用内联赋值而不是循环更明智。

而且由于速度下降如此之大，我们确实需要循环，因此找到[更好的循环方法](https://stackoverflow.com/a/12592908/1691517)（例如。`while(i--)`）是明智的。

测试代码在这里：

```
for(var i=0;i<10;i++)
{
  pre_filled_array[i]=i;
} 
```

* * *

**6\. non_pre_filled_array[i] (5.26%)：**

如果我们不预初始化和预填充数组，速度会降低 25,96 %。同样，在速度关键循环之前预初始化和/或预填充是明智的。

代码在这里：

```
for(var i=0;i<10;i++) 
{
  non_pre_filled_array[i]=i;
} 
```

* * *

**7、数学计算（1.17%）：**

每个测试都必须是一些参考点。数学函数被认为很慢。测试由十个“重”数学计算组成，但现在另一个让我印象深刻的事情来了。看看 8 和 9 的速度，我们在循环中将十个整数推送到数组中。计算这 10 个数学函数比在循环中将十个整数推入数组快 30% 以上。因此，将一些数组推送转换为预初始化的非数组并保留这些三角函数可能更容易。当然，如果每帧有成百上千的计算，那么使用例如是明智的。sqrt 代替 sin/cos/tan 并使用出租车距离进行距离比较，使用[菱形角（t-弧度）进行角度比较](https://stackoverflow.com/a/14675998)，但主要瓶颈仍然可能在其他地方：循环比内联慢，推送比使用预初始化和/或预填充的直接分配慢，代码逻辑、绘图算法和 DOM 访问可能很慢。一切都无法在 Javascript 中进行优化（我们必须在屏幕上看到一些东西！）但我们可以做的所有简单而有意义的事情都是明智的。SO这里有人说代码是为人类服务的，可读的代码比快速的代码更重要，因为维护成本是最大的成本。这是经济的观点，但我发现代码优化可以兼得：优雅、可读性和性能。并且如果实现了 5% 的性能提升，代码也更加简洁，给人一种很好的感觉！

代码在这里：

```
non_array_0=Math.sqrt(10435.4557);
non_array_1=Math.atan2(12345,24869);
non_array_2=Math.sin(35.345262356547);
non_array_3=Math.cos(232.43575432);
non_array_4=Math.tan(325);
non_array_5=Math.asin(3459.35498534536);
non_array_6=Math.acos(3452.35);
non_array_7=Math.atan(34.346);
non_array_8=Math.pow(234,222);
non_array_9=9374.34524/342734.255; 
```

* * *

**8\. pre_filled_array.push(i) (0.8%):**

**推是邪恶的！**推结合循环是恶毒的！由于某种原因，这是将值分配到数组中的非常慢的方法。测试 5（循环中的直接赋值）比此方法快近 9 倍，并且两种方法的作用完全相同：将整数 0-9 分配到预初始化和预填充的数组中。我还没有测试过这种按循环的邪恶是否是由于推动或循环或两者的组合或循环计数。在 JSPERF.COM 中还有其他示例给出了相互矛盾的结果。仅使用实际数据进行测试并做出决策是更明智的做法。此测试可能与所用数据以外的其他数据不兼容。

这是代码：

```
for(var i=0;i<10;i++)
{
  pre_filled_array.push(i);
} 
```

* * *

**9\. non_pre_filled_array.push(i) (0.74%):**

此测试中最后一个也是最慢的方法与测试 8 相同，但未预填充数组。比 9 慢一点，但差异不显着（7.23%）。但是让我们举个例子，比较一下这个最慢的方法和最快的方法。**这种方法的速度是方法1速度的0.74%，也就是说方法1比这个快135倍。**因此，请仔细考虑，如果在特定用例中完全需要数组。如果只是一次或几次推送，总的速度差异并不明显，但另一方面，如果只有少量推送，则将它们转换为非数组变量非常简单优雅。

这是代码：

```
for(var i=0;i<10;i++)
{
  non_pre_filled_array.push(i);
} 
```

* * *

最后是强制性的 SO 问题：

**因为根据这个测试，non-array-variable-assignments 和 array-assignments 之间的速度差异似乎很大，有没有什么方法可以得到 non-array-variable-assignments 的速度和数组的动态？**

我不能`var variable_$i = 1`在循环中使用，以便将 $i 转换为某个整数。我必须使用`var variable[i] = 1`它比`var variable1 = 1`测试证明的要慢得多。仅当存在大型阵列并且在许多情况下确实如此时，这才可能至关重要。

* * *

编辑：我做了一个新的测试来确认数组访问的速度并试图找到更快的方法：

[http://jsperf.com/read-write-array-vs-variable](http://jsperf.com/read-write-array-vs-variable)

数组读取和/或数组写入比使用普通变量慢得多。如果对数组成员进行了一些操作，最好将数组成员的值存储到临时变量中，对临时变量进行这些操作，最后将值存储到数组成员中。尽管代码变得更大，但将这些操作内联比循环内要快得多。

**结论：**数组与普通变量类似于磁盘与内存。通常内存访问比磁盘访问快，普通变量访问比数组访问快。并且可能连接操作也比使用中间变量更快，但这使得代码有点不可读。

* * *

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-27T23:23:18.343

> 给数组赋值比给普通变量赋值要慢得多。数组是邪恶的！这非常可悲，我真的不明白为什么会发生这种情况。数组太重要了！

这是因为普通变量是静态范围的，可以（并且）很容易优化。编译器/解释器将学习它们的类型，甚至可能避免重复分配相同的值。

这些优化也将针对数组进行，但它们并不那么容易，需要更长的时间才能生效。解析属性引用时会有额外的开销，并且由于 JavaScript 数组是自动增长的列表，因此还需要检查长度。

预填充阵列将有助于避免因容量更改而重新分配，但对于您的小阵列 ( `length`=10)，它不应该有太大的区别。

> 有什么方法可以获得非数组变量分配的速度和数组的动态？

不。动态确实需要成本，但它们是值得的——循环也是如此。

你几乎不会需要这样的微优化，[不要尝试](http://en.wikipedia.org/wiki/Premature_optimisation)。我唯一能想到的是在处理时固定大小的循环（n <= 4）`ImageData`，内联是适用的。

> 推是邪恶的！

不，只有你的测试有缺陷。jsperf 片段在一个定时循环中执行，没有撕裂和向下，只有在那里你才重新设置大小。您重复的`push`es 一直在生成长度为十万的数组，并且需要相应的内存（重新）分配。[请参阅http://jsperf.com/pre-filled-array/11](http://jsperf.com/pre-filled-array/11)上的控制台。

实际上`push`和属性分配一样快。好的测量是罕见的，但那些正确完成的测量会在不同的浏览器引擎版本中显示出不同的结果——变化迅速且出乎意料。请参阅[如何将某些内容附加到数组？](https://stackoverflow.com/q/351409/1048572),[为什么array.push 有时比array[n] = value 快？](https://stackoverflow.com/q/614126/1048572)JavaScript开发[人员不使用 Array.push() 是否有原因？](https://stackoverflow.com/q/15649899/1048572)- 结论是您应该使用最易读/最适合您的用例的内容，而不是您认为可能更快的内容。

# c# - C#：如何判断对象是自定义类还是本机类型/.NET 类？

> ID：14867297
> 
> 赞同：12
> 
> 时间：2013-02-14T03:24:32.633
> 
> 标签：c#, .net, class, types

我有这门课

```
public class MyViewModel {
  public MyClass Thing { get; set; }
  public int Id { get { return Thing.Id; } }
  public string Name { get { return Thing.Name; } }
} 
```

我注意到当我将它绑定到 ASP.NET GridView 时，它会自动省略`Thing`，并且有充分的理由（即，否则它只会在所有行中显示无意义的“MyNamespace.MyClass”）

我正在尝试用这种方法做类似的事情。

```
public static string ConvertToCsv<T>(IEnumerable<T> items)
{
  foreach (T item in items)
  {
    if(item is not a native/.NET class) // <-- How do you do this?
      continue;
    else // If it is a string/int/bool/DateTime or something meaningful
    {
      ...
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-14T03:28:38.337

不确定性能，但你可以使用类似的东西

```
if(item.GetType().Namespace.StartsWith("System")) 
{
   // do stuff
} 
```

或者在循环之前过滤

```
public static string ConvertToCsv<T>(IEnumerable<T> items)
{
    foreach (T item in items.Where(i => i.GetType().Namespace.StartsWith("System")))
    {

    }
} 
```

**编辑：**经过快速测试，上述方法存在一些缺陷，如果您的对象可以为空（MyViewModel？），它将在此检查（`System.Nullable<MyViewModel>`）中被选中。

所以也许你可以使用：

```
public static string ConvertToCsv<T>(IEnumerable<T> items)
{
    foreach (T item in items.Where(i => i.GetType().Module.ScopeName.Equals("CommonLanguageRuntimeLibrary")))
    {

    }
} 
```

**另一个编辑：** 最后一种方法似乎也存在一些问题，但下面的这个是迄今为止最快和最可靠的，我们只是从程序集中创建一个 System.Objects 列表，并检查您的项目对象是否在那个清单。

```
private List<Type> _systemTypes;
public List<Type> SystemTypes
{
    get
    {
        if (_systemTypes == null)
        {
            _systemTypes = Assembly.GetExecutingAssembly().GetType().Module.Assembly.GetExportedTypes().ToList();
        }
        return _systemTypes;
    }
}

public static string ConvertToCsv<T>(IEnumerable<T> items)
{
    foreach (T item in items.Where(i => SystemTypes.Contains(i.GetType())))
    {
         // is system type
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T03:29:06.640

您必须在预定义的哈希表或字典中查找它……例如，通过枚举所有属于 .NET Framework SDK 的程序集并将完全限定名称存储在字典中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-11T19:33:07.053

我知道这很旧，但我认为您正在寻找方法。

```
Type type = result.GetType();
PropertyInfo[] properties = type.GetProperties();
foreach (PropertyInfo property in properties)
{
    string prs = property.GetMethod.ToString();
    if(!prs.StartsWith("System"))
    {
        //IS CLass
    } else {
       Console.WriteLine(property.Name + ":::" + property.Value);
    }
} 
```

# parsing - 如何在 Scala 解析器中将位置与文件一起使用？

> ID：14867299
> 
> 赞同：0
> 
> 时间：2013-02-14T03:25:07.230
> 
> 标签：parsing, scala

我想使用位置解析器和位置特征来获取位置信息。我想读取我解析为字符串的文件（或者我可以转换为字符串的东西），然后在保留位置信息的同时解析它。这是我在“位置”上发现的：

[https://wiki.scala-lang.org/display/SW/Parsing](https://wiki.scala-lang.org/display/SW/Parsing)

...其中不经意地提到了 StreamReader 和 CharArrayReader。还有其他选择吗？将我的文件读入可以与 CharArrayReader 一起使用的东西可能是我需要的。如果是这样，它是如何工作的？如果没有，我该怎么*办*？

（仅供参考，StreamReader 退出是因为我想在解析文件之前很长时间读取并保留文件，而不是因为我想浪费内存。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:41:56.627

将您最喜欢的浏览器定向到[ScalaDoc HTML](http://www.scala-lang.org/api/current/index.html)并导航到`scala.util.parsing.input`可以找到可用定位阅读器的包：

*   `CharArrayReader`
*   `CharSequenceReader`
*   `PagedSeqReader`
*   `StreamReader`

**附录**

创建这些阅读器之一`CharArrayReader`，例如，很简单：

```
val car = new CharArrayReader("sample input") 
```

现在你可以`Reader`提供你的解析器了。

# objective-c - Web 视图不保存 HTML5 本地存储设置

> ID：14867303
> 
> 赞同：-2
> 
> 时间：2013-02-14T03:25:53.543
> 
> 标签：objective-c, xcode, webview

我有一个在 Safari 中运行良好的网络应用程序（它使用本地存储并保存设置并恢复它们）。

我在 Xcode 4.5.2 中创建了一个加载我的网络应用程序的网络视图。我知道默认情况下 Web 视图不支持本地存储，所以我添加了代码来启用它，但现在该应用程序根本无法运行。

我在 AppDelegate.m 中的代码：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {

    WebPreferences *prefs = [WebView preferences];.
    [prefs _setLocalStorageDatabasePath:@"~/Library/TestApp/LocalStorage"];

    NSString *path = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"html"];
    NSURL* fileURL = [NSURL fileURLWithPath:path];
    NSURLRequest* request = [NSURLRequest requestWithURL:fileURL];
    [self.webView.mainFrame loadRequest:request];
}

@end 
```

这部分是我为启用本地存储而添加的：

```
 WebPreferences *prefs = [WebView preferences];.
    [prefs _setLocalStorageDatabasePath:@"~/Library/TestApp/LocalStorage"]; 
```

我收到以下错误：“预期表达式”-“选择器‘首选项’没有已知的类方法”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T07:09:59.613

`-preferences`是 上的实例方法`WebView`，而不是类方法。您需要`WebPreferences *prefs = [self.webView preferences]`检索您的`WebView`. 除了调用之外`-[WebPreferences _setLocalStorageDatabasePath:]`，我相信您还需要调用`-[WebPreferences setLocalStorageEnabled:]`以确保启用本地存储。

# java - Java if else 部分匹配

> ID：14867308
> 
> 赞同：0
> 
> 时间：2013-02-14T03:26:02.943
> 
> 标签：java, selenium

我已经进入 Selenium WebDriver，但仍然发现最令人困惑的例子。

我需要能够读取一个字符串（成功）运行一个询问是否存在特定文本的条件。

为了这篇文章。

```
String oneoff = "Jeff is old" 
```

我需要在 Jeff 上进行匹配，见下面的代码，只要 Jeff 存在于字符串中，我想返回 true。如果 Jeff 不存在，那么我会检查 50-75 个其他名字。但是，字符串可能包含它们的名称和无法控制的附加文本。所以我必须进行部分匹配。

问题 1\. 我是不是搞砸了，必须以我所看到的那种疯狂的格式构建每个正则表达式，还是我遗漏了一些明显的东西？

问题 2\. 是否有人为我的理智请告诉我匹配 Jeff 的正确方法，文本可能出现在 Jeff 的名字之前和之后。

谢谢！

```
String oneoff = driver.findElement(By.id("id_one_off_byline"))
        .getAttribute("value");
System.out.println("One Off is:" + oneoff);
if (oneoff.matches("Jeff")) {
    System.out.println("It is Jeff");
} else {
    System.out.println("it is not jeff");
} 
```

这只是代码的功能部分，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T03:32:51.410

> 由于 Jeff 存在于字符串中，我想返回 true

那么你可能应该用

```
if (oneoff.contains("Jeff")) 
```

因为`matches`使用正则表达式作为参数，所以`if (oneoff.matches("Jeff"))`只有在`oneoff = "Jeff"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T03:32:41.010

对于您提供的代码，您不需要使用 match()。而是使用 oneoff.equals("String") 进行字符串匹配。Match() 更适用于正则表达式。即使字符串仅作为目标字符串的子集存在，如果要返回 true，也可以使用 oneoff.contains("String")。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T03:41:21.507

```
if (oneoff.contains("Jeff")) {
    System.out.println("It is Jeff");
} else if (!oneoff.contains("Jeff")) {
    System.out.println("it is not jeff");
} 
```

我认为您应该将代码改进为这样，因为如果包含其他“jeff”可能是“JEef”或“JEEF”甚至可能是“Jeef”，java 可能无法识别 else 字符串

我希望它有效，我曾经发现过和你一样的错误，我尝试用这种方法来克服它。

# javascript - 知道页面是否被 iframed

> ID：14867313
> 
> 赞同：0
> 
> 时间：2013-02-14T03:26:38.810
> 
> 标签：javascript, jquery

有没有办法知道页面是否被 iframed 了？

我在想类似的东西`if (window.parent)`，但这显然是不对的。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T03:29:34.547

```
if (window!=window.top) { /* I'm in a frame! */ } 
```

# ruby-on-rails - Ruby on Rails - 为所有路由添加 ID 参数

> ID：14867314
> 
> 赞同：4
> 
> 时间：2013-02-14T03:26:54.383
> 
> 标签：ruby-on-rails, routing

我想知道在 Rails 路由中实现以下功能的最佳方法是什么：

场景：用户注册账号的网站=>accountID（账号）成为网站内的主要实体。

示例：[https](https://basecamp.com/:ID/) ://basecamp.com/:ID/ - 将授权用户带到 Basecamp 仪表板。从这里所有的 URL 都包含 :accountID，如[https://basecamp.com/:ID/projects](https://basecamp.com/:ID/projects) - 列出该帐户下的所有项目。

提前谢谢了！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T03:54:39.410

使用**路由前缀**：

```
scope ":account_id" do
  resources :projects
  ...
end 
```

这将始终在范围内定义的每个资源控制器上为您提供 params[:account_id]。

在这里阅读更多：http: [//guides.rubyonrails.org/routing.html#prefixing-the-named-route-helpers](http://guides.rubyonrails.org/routing.html#prefixing-the-named-route-helpers)

**更新：**这是一个完整的示例，包括您的“仪表板”默认路由

```
scope ":account_id" do
  root :to => "dashboard#index"  # http://example.com/12323/
  resources :projects            # http://example.com/12323/projects
  resources :todos               # http://example.com/12323/todos
  ...
end 
```

# c# - Linq GroupBy 使用什么算法？

> ID：14867315
> 
> 赞同：1
> 
> 时间：2013-02-14T03:26:55.307
> 
> 标签：c#, algorithm

Linq GroupBy 似乎性能超级好，所以我想知道它在幕后使用了什么样的算法。

# android - 更新数据库sqlite后更新listview

> ID：14867324
> 
> 赞同：3
> 
> 时间：2013-02-14T03:27:37.190
> 
> 标签：android

更新数据库 sqlite 上的行后如何更新列表视图中的项目。我放了 notifyDataSetChanged() 但没有成功，没有错误，但没有刷新行中的数据。如果我单击菜单返回并再次打开列表，数据将发生变化。所以我想在更新数据后更新行中的数据。下面是我的代码的结构，谢谢。

```
CustomBaseAdapter adapter;
ListView cListView; 
```

在 onCreate 中：

```
cListView = (ListView) findViewById(R.id.list_category);
List<ItemsArtikel> rowItems = (List<ItemsArtikel>) db.getAllCategory(katname);
adapter = new CustomBaseAdapter(this, rowItems);
cListView.setAdapter(adapter); 
```

查询列表类别：

```
public List<ItemsArtikel> getAllCategory(String cat) {
    SQLiteDatabase db = this.getWritableDatabase();
    List<ItemsArtikel> cList = new ArrayList<ItemsArtikel>();
    String selectQuery = "SELECT  * FROM " + TABLE_CAT + " WHERE "
            + COLOM_KAT + "=\"" + cat + "\"";
    Cursor c = db.rawQuery(selectQuery, null);
    c.moveToFirst();
    if (c.getCount() > 0) {
        do {
            ItemsArtikel kat = new ItemsArtikel();
            kat.setID(c.getLong(c.getColumnIndex(COLOM_ID)));
            kat.setName(c.getString(c.getColumnIndex(COLOM_NAME)));
            kat.setLink(c.getString(c.getColumnIndex(COLOM_LINK)));
            kat.setImage(c.getString(c.getColumnIndex(COLOM_IMAGE)));
            kategoriList.add(kat);
        } while (c.moveToNext());
    }
    return cList;
} 
```

在我使用列表视图`for`下载图像并在下载图像时使用 AsyncTask 更新数据库的每一行之后。图像成功下载并且行也成功更新，只是不在列表视图中刷新。

这是下载图像时 onPostExecute 的代码：

```
@Override
protected void onPostExecute(HashMap<String, Object> result) {
    String id = (String) result.get("id");
    String path = (String) result.get("image");

    // update row in database
    db.updateRowCategory(id, path);

    cListView.setAdapter(adapter);
    adapter.notifyDataSetChanged();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T03:43:42.660

在调用[notifyDataSetChanged()](http://developer.android.com/reference/android/widget/ArrayAdapter.html#notifyDataSetChanged%28%29)时，它只会通知注册视图更新内容以反映更改。

在您的情况下，您正在更新**数据库**中的数据，而不是适配器数据模型中的数据。要反映`ListView`您需要更新数据模型的更改`Adapter's`，然后调用 notifyDataSetChanged();

或者

如果您直接从数据库渲染数据，请使用[CursorAdapter](http://developer.android.com/reference/android/widget/CursorAdapter.html#onContentChanged%28%29)并实现`onContentChanged ()`更新 ListView

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T05:46:57.980

在添加适配器之前使用以下行。

```
@Override
protected void onPostExecute(HashMap<String, Object> result) {
    String id = (String) result.get("id");
    String path = (String) result.get("image");

    // update row in database
    db.updateRowCategory(id, path);
    cListView.Invalidate();
    cListView.setAdapter(adapter);
    cListView.Invalidate();
    adapter.notifyDataSetChanged();
} 
```

# javascript - 难以将变量插入到 jquery 属性识别中

> ID：14867326
> 
> 赞同：0
> 
> 时间：2013-02-14T03:27:54.340
> 
> 标签：javascript, jquery, checkbox

我正在尝试使用 jquery 来检测是否检查了同一组中的另一个文本框。下面的代码显示了我在选中高级框时如何尝试检索组名，并使用它来查看是否选中了随附的基本框。问题是“basicTrue”总是被分配“未定义”，无论基本复选框的条件如何。

```
<div id="boxes">
<input style="text-align:center;" type="checkbox" name="group1" value="Basic">
<input style="text-align:center;" type="checkbox" name="group1" value="Advanced">
<input style="text-align:center;" type="checkbox" name="group2" value="Basic">
<input style="text-align:center;" type="checkbox" name="group2" value="Advanced">
</div>

$("#boxes").contents().find(":checkbox").bind('change', function(){        
val = this.checked;
var $obj = $(this);    
if($obj.val()=="Advanced"){
var group = $obj.attr("name");
var basicTrue = $('input[name=group][value="Basic"]').prop("checked");
if(basicTrue)
{
    //Do stuff
}
else
{
    $obj.attr('checked', false);
}
} 
```

此代码是我用来证明以这种方式格式化的代码有效的概念证明，它确实返回“group1”中“基本”复选框的状态。

```
var basicTrue = $('input[name="group1"][value="Basic"]').prop("checked"); 
```

我知道变量“group”被赋予了正确的名称：例如 group1。有没有理由在代码中使用这个变量不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:38:36.313

这些是变量，它们需要集中到选择器中的字符串中，如下所示：

```
$('input[name="' + group + '"][value="Basic"]').prop("checked"); 
```

简化版：

```
$("#boxes input[type='checkbox']").on('change', function(){        
   var bT = $('input[name="'+ this.name +'"][value="Basic"]').prop("checked");

    if( this.value == "Advanced" && bT) {
        //Do stuff
    } else {
        $(this).prop('checked', false);
    }
}); 
```

# java - Array.toString(boolean) 值

> ID：14867328
> 
> 赞同：1
> 
> 时间：2013-02-14T03:28:23.963
> 
> 标签：java, html, google-app-engine, servlets

在 java servlet 中，

```
boolean[] arrBool = new boolean[6]; 
```

我正在展示`resp.getWriter.println(Arrays.toString(arrBool))`。

所以输出就像`[false, true, true, false, false, true]`.

我随机生成这些布尔值。有什么办法可以用不同的颜色、样式或其他东西来区分真实值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:32:42.947

尝试用它包围它`span`

```
resp.getWriter().println(
        Arrays.toString(arrBool).replace(
                "true","<span style=\"color:#0000FF\">true</span>")); 
```

您也可以简单地遍历数组，如果发现`true`将其打印为`<span style=\"color:#0000FF\">true</span>`

# sql - 如何在多对多关系中使用主键连接 SQLITE 表

> ID：14867330
> 
> 赞同：0
> 
> 时间：2013-02-14T03:28:27.600
> 
> 标签：sql, database, sqlite, save

我有一个名为“assessment.db”的数据库

在这个设置中，我有一个名为“用户”的表（firstName VARCHAR PRIMARY KEY）

和一本名为“具有此设置的书籍（pairBookName VARCHAR UNIQUE，activity1 VARCHAR，activity2 VARCHAR，activity3 VARCHAR）

用户输入他们的姓名，该姓名存储在“用户”表中，我现在可以正常工作。现在我想做的是设置一个清单来跟踪用户在活动中的进度。

例如：'Ryan' 输入他的名字，然后进入 Book1 并完成 Activity1 和 Activity2。

我试图弄清楚如何匹配 Users 表和 Books 表，这似乎不是一个简单的 JOIN

我查看了以前的问题，似乎找不到任何具有相同数据库设置/问题的人。

谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T04:34:34.367

首先，我建议您获取有关数据库设计的介绍性书籍（或网站）。您的架构有许多问题：

1.  您如何处理名为“Jim”的 2 个不同用户
2.  您如何处理两本名为“数据库设计简介”的不同书籍？
3.  每本书是否正好有 3 个活动？也就是说，没有人有 2，也没有人有 4？

对于您的具体问题，这是一个简单的多对多关系；一个用户可能有很多书，而一本书可能有很多用户。这是使用第三张表来处理的，其中用户的 PK 和书籍的 PK 作为其复合 PK（这些都应该是 varchar！）。

对于您的问题，这可能是您存储活动的表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T04:47:05.667

听起来您正在寻找一个允许存在多对多关系的中间连接表。我可能会建议这样的表模式：

```
CREATE TABLE User
(
    UniqueID uniqueidentifier NOT NULL Primary Key default newid(),
    FirstName nvarchar(100) NOT NULL,
    etc..
)

CREATE TABLE Book
(
    UniqueID uniqueidentifier NOT NULL Primary Key default newid(),
     Title nvarchar(100) NOT NULL,
     etc..
)

CREATE TABLE Activity
(
    UniqueID uniqueidentifier NOT NULL Primary Key default newid(),
    Description nvarchar(100) NOT NULL,
    etc...
)

CREATE TABLE UserActivity
(
    UserID uniqueidentifier NOT NULL,
    BookID uniqueidentifier NOT NULL,
    ActivityID uniqueidentifier NOT NULL,
    CONSTRAINT PK_UserActivity PRIMARY KEY CLUSTERED 
    (
        UserID ASC,
        BookID ASC,
        ActivityID ASC
    )
) 
```

这样，许多用户可以对许多书籍进行许多活动。数据库设计的最佳实践建议不要使用 FirstName 作为主键，因为许多人可能有相同的名字。你会想要一些更独特的东西，比如 int 字段或 uniqueidentifier。

Book 和 Activity 是相似的——它们存储不同的书籍（“Book 1”、“Book 2”）和可以执行的不同类型的活动（“Completes Activity 1”、“Completes Activity 2”）。

每次用户完成一本书的活动时，都会将一条记录插入到 UserActivity 中，该记录描述了用户、书籍和执行的活动。

尽管这在这一点上看起来确实有点过头了，但如果您决定在以后的某个时候添加功能，您不会后悔的——比如添加一种新类型的活动，或者一本没有所有功能的新书。与其他书籍相同类型的活动。一个设计良好的数据库应该可以很容易地为您的软件添加新内容。快乐编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T05:31:42.230

感谢您的输入，我似乎以错误的方式处理这一切。

当输入用户名时，我最终使用代码即时创建表：

```
 var form = document.getElementById("userName");
   localStorage.name = form.elements.firstName.value;
   var user = localStorage.name;

   db.execute("CREATE TABLE IF NOT EXISTS "+user+"(bookName TEXT, activity1 TEXT, activity2 TEXT, activity3 TEXT, activity4 TEXT, activity5 TEXT, activity6 TEXT, activity7 TEXT, activity8 TEXT, activity9 TEXT)"); 
```

这样我可以将用户保留在 localStorage.name 中并稍后调用它以更新进度。

# c - linux中汇编和C的混合编程

> ID：14867331
> 
> 赞同：3
> 
> 时间：2013-02-14T03:28:33.683
> 
> 标签：c, linux, gcc, assembly, nasm

只有两个文件，`main.c`和`kernel.asm`，我尝试使用 NASM 和 GCC 与它们一起制作程序。内容如下：

***主程序***

```
#include <stdio.h>

void Print_String() {
    printf("Hello World!\n");
} 
```

***内核文件***

```
extern Print_String

[section .text]
global _start
_start:
    call Print_String 
```

***编译和链接：***

```
nasm -f elf -o kernel.o kernel.asm
gcc -c -o main.o main.c
ld -s -lc -o final kernel.o main.o 
```

然后我`final`用命令运行文件：`./final`，但结果令人沮丧：

```
bash: ./final: No such file or directory 
```

但是，当前目录确实有文件`final`，对于命令`ls`，它显示：

```
final  kernel.asm  kernel.o  main.c  main.o 
```

那么为什么它找不到文件`final`呢？有什么问题吗？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T04:47:43.403

它本身并不是找不到它。错误消息有些误导。动态链接器无法解析其依赖关系，因此您的程序映像不可加载（并且不可执行）

问题是您在没有任何其他工具的情况下动态链接 libc 以使动态链接真正起作用。因此，您将得到一个无法加载的二进制图像。

您可能会发现静态链接 libc 更容易。这可以按如下方式完成：

```
ld -Bstatic -o final kernel.o main.o -lc 
```

请注意，您必须在使用它的代码模块 main.o 之后移动“-lc”位。

如果你试试这个，你会得到一大堆未解析的符号。那是因为您还需要链接 libgcc 和 libgcc_eh。

以下让我非常接近（抱歉，在这里使用 64 位系统）：

```
ld -L/usr/lib/gcc/x86_64-linux-gnu/4.4.3/32/ -melf_i386 -Bstatic -lc -o final kernel.o main.o -lc -lgcc -lgcc_eh 
```

这对我来说失败了

```
/usr/lib/gcc/x86_64-linux-gnu/4.4.3/32//libgcc_eh.a(unwind-dw2-fde-glibc.o): In function `_Unwind_Find_FDE':
(.text+0x193b): undefined reference to `dl_iterate_phdr' 
```

这没有多大意义。在 32 位系统上链接 32 位可能会更幸运。

**更新**

为上面的闲聊道歉。我再次考虑了这一点，当然，可以使动态链接工作。缺少的部分是指定动态链接器：

就我而言，这是：

```
ld -dynamic-linker /lib32/ld-linux.so.2 -melf_i386 -o final kernel.o main.o -lc 
```

所以对你来说，以下应该工作：

```
ld -dynamic-linker /lib/ld-linux.so.2 -o final kernel.o main.o -lc 
```

**再次更新**

作为对 markzar 评论的回应 - 您必须进行系统调用才能干净地退出。这具有在 C 中执行类似于 exit(0) 的效果：

```
mov eax,1  ; Syscall #1       
mov ebx,0  ; Return code 0 = success
int 80H 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T05:26:55.587

尝试这个。首先更改 kernel.asm 如下：

```
extern Print_String

[section .text]
global main
main:
    call Print_String 
```

然后使用以下命令创建可执行文件（而不是链接器）。

```
nasm -f elf -o kernel.o kernel.asm
gcc -c -o main.o main.c
gcc -o final kernel.o main.o 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T17:00:17.813

非常简单：程序中没有`main()`可调用的内容……因此，无论您做什么，C 程序启动机制都不会得到控制。

# nsis - 如何在 nsis 中压缩我的设置文件？

> ID：14867337
> 
> 赞同：0
> 
> 时间：2013-02-14T03:28:49.760
> 
> 标签：nsis

我想在 nsis 脚本中压缩我的设置文件。我的原始文件将使用 nsis 捆绑，大小为 160mb。我目前正在使用 lzma/solid 压缩，所以我得到一个 58mb 的设置文件。还有其他方法吗压缩更多。我想要一个 30 mb 的安装文件。有可能吗。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T06:30:25.810

虽然 NSIS 确实有一些压缩器选项（`SetCompressorDictSize`用于 lzma），但您可能不会从 58 到 30。

你能用 7zip/lzma2 或 WinRar 做吗？

# matlab - 尝试在 MATLAB 中编写一个函数来播放给定音符（频率）和长度向量的歌曲

> ID：14867339
> 
> 赞同：2
> 
> 时间：2013-02-14T03:29:08.607
> 
> 标签：matlab, audio

我希望能够将两个向量作为 MATLAB 函数的输入，以便第一个具有我想要播放的所有频率，第二个具有每个音符的相应持续时间。到目前为止，我所拥有的是：

```
%% Initialize
clear; format short e;

%% Possible Notes
octave = [55 110 220 440 880];
for k = 1:length(octave)
    pause = 0;
    A(k) = octave(k);
    As(k) = octave(k).*2^(1/12);
    B(k) = octave(k).*2^(2/12);
    C(k) = octave(k).*2^(3/12);
    Cs(k) = octave(k).*2^(4/12);
    D(k) = octave(k).*2^(5/12);
    Ds(k) = octave(k).*2^(6/12);
    E(k) = octave(k).*2^(7/12);
    F(k) = octave(k).*2^(8/12);
    Fs(k) = octave(k).*2^(9/12);
    G(k) = octave(k).*2^(10/12);
    Gs(k) = octave(k).*2^(11/12);
end

%% Notes and Durations
Notes = [D(2) D(3) D(2) D(2) C(3) D(2) D(2) A(3) A(2) ...
         A(2) G(2) A(2) A(2) F(3) Fs(3) D(2)];
Times = [1/4  1/4  1/5  1/5  1/4  1/5   1/5 1/4  1/5 ...
         1/5  1/4  1/5  1/5  1/4  1/8   1/4];

%% Play the Song
playSong(Notes, Times); 
```

我的“playSong”功能中有以下内容：

```
function [song] = playSong(freqs, times)
fs = 44600;
makeNote = @(freq, time) cos(2*pi*[1:time]/fs * freq);
song = []

%% For Loop
for k = 1:length(freqs)
    % make the song somehow
end

sound(song, fs)
end 
```

我一直在研究如何创建要播放的声音矢量，但似乎不知道该怎么做。有谁知道我会怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T06:10:24.660

(a) 您可以使用[`sound`](http://www.mathworks.com/help/matlab/ref/sound.html)或[`soundsc`](http://www.mathworks.com/help/matlab/ref/soundsc.html)将信号数据的矢量\矩阵转换为声音。

(b) 如果您想使用声卡生成音频，**并且**您有 32 位版本的 MATLAB 和 Data Acquisition Toolbox，请参阅[此处](http://www.mathworks.com/help/daq/examples/generation-of-audio-using-the-sound-card.html)的示例如何使用它。

(c) 您可以使用 将音频录制到音频对象[`audiorecorder`](http://www.mathworks.com/help/matlab/ref/audiorecorder.html)，然后使用[“audioplayer”播放](http://www.mathworks.com/help/matlab/ref/audioplayer.html)

在所有这些选项中，您都有几个关于如何实施和演奏音符的示例。

# javascript - javascript：如何重复调用函数本身？

> ID：14867343
> 
> 赞同：2
> 
> 时间：2013-02-14T03:29:54.743
> 
> 标签：javascript

我想重复计算时间并每分钟更新一次当前时间。我的代码不起作用。Firebug 控制台说最后一行函数`getStatus()`没有定义。如何重复调用这个函数？

```
jQuery(document).ready(function($){

    $(function() {   
     getStatus();
    });

    function getStatus() {
      var post_id = $('#post_id').val();
      var nonce = $('#_wpnonce').val();
      jQuery.ajax({
        url : ajaxurl,
        data : {action: "update_edit_lock", post_id : post_id, nonce: nonce },
        success: function(response) {
          if(response == "false") {
            alert("failed")
          }
          else {
            $("#message").html(response)
          }
        }
        });
      setTimeout("getStatus()",60000);
    }
    },(jQuery)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T03:32:26.380

您的问题是 getStatus 包含在另一个回调中。要么做`window.getStatus = function(){}`，要么把你的代码变成这样：

```
jQuery(document).ready(function($){
    var getStatus = function() {
      var post_id = $('#post_id').val();
      var nonce = $('#_wpnonce').val();
      jQuery.ajax({
        url : ajaxurl,
        data : {action: "update_edit_lock", post_id : post_id, nonce: nonce },
        success: function(response) {
          if(response == "false") {
            alert("failed")
          }
          else {
            $("#message").html(response)
          }
        }
        });
      setTimeout(getStatus,60000);
    };

    $(function() {   
     getStatus();
    });

},(jQuery)); 
```

将字符串传递给`setTimeout`将使其成为`eval`字符串，您应该避免这种情况，并且通常不需要您的代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T03:32:19.490

您`setInterval(getStatus, 60000)`也许可以改用，否则您应该使用`setTimeout(getStatus, 60000)`. 不要使用字符串作为函数回调，而是使用命名函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T03:47:30.760

采用`setInterval(function, milliseconds)`

```
jQuery(document).ready(function ($) {
    var getStatus = function() {
        var post_id = $('#post_id').val();
        var nonce = $('#_wpnonce').val();
        jQuery.ajax({
            url: ajaxurl,
            data: {
                action: "update_edit_lock",
                post_id: post_id,
                nonce: nonce
            },
            success: function (response) {
                if (response == "false") {
                    alert("failed")
                } else {
                    $("#message").html(response)
                }
            }
        });
    }
    setInterval(getStatus, 1000);
}, (jQuery)); 
```

# r - 根据优先级列表选择数据框中的值

> ID：14867346
> 
> 赞同：2
> 
> 时间：2013-02-14T03:30:03.743
> 
> 标签：r

我是 R 的新手，所以我仍然对它的工作方式有所了解。我的问题如下，我有一个数据框和一个列的优先列表（`pl`），我需要：

1.  `pl`从每一行的列中找到最大值并使用该值创建一个新列 ( `df$max`)
2.  使用优先级列表，从优先级值中减去这个最大值，忽略 NA 并返回绝对差

举个例子可能更好：我的优先级列表是

```
pl <- c("E","D","A","B") 
```

数据框是：

```
 A   B   C   D   E   F   G   
1   15  5   20  9   NA  6   1   
2   3   2   NA  5   1   3   2   
3   NA  NA  3   NA  NA  NA  NA  
4   0   1   0   7   8   NA  6
5   1   2   3   NA  NA  1   6 
```

因此，对于第一行，最大值来自 A 列（15），优先级值来自 D 列（9），因为 E 是 NA。我想要的答案应该是这样的。

```
 A   B   C   D   E   F   G   MAX MAX-PR
1   15  5   20  9   NA  6   1   15  6
2   3   2   NA  5   1   3   2   5   4
3   NA  NA  3   NA  NA  NA  NA  NA  NA
4   0   1   0   7   8   NA  6   8   0
5   1   2   3   NA  NA  1   6   2   1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T03:47:57.500

这个怎么样？

```
df$MAX <- apply(df[,pl], 1, max, na.rm = T)
df$MAX_PR <- df$MAX - apply(df[,pl], 1, function(x) x[!is.na(x)][1])
df$MAX[is.infinite(df$MAX)] <- NA
> df

#    A  B  C  D  E  F  G MAX MAX_PR
# 1 15  5 20  9 NA  6  1  15      6
# 2  3  2 NA  5  1  3  2   5      4
# 3 NA NA  3 NA NA NA NA  NA     NA
# 4  0  1  0  7  8 NA  6   8      0
# 5  1  2  3 NA NA  1  6   2      1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T03:54:11.723

例子：

```
df <- data.frame(A=c(1,NA,2,5,3,1),B=c(3,5,NA,6,NA,10),C=c(NA,3,4,5,1,4))
pl <- c("B","A","C")
#now we find the maximum per row, ignoring NAs
max.per.row <- apply(df,1,max,na.rm=T)
#and the first element according to the priority list, ignoring NAs
#(there may be a more efficient way to do this)
first.per.row <- apply(df[,pl],1, function(x) as.vector(na.omit(x))[1])
#and finally compute the difference
max.less.first.per.row <- max.per.row - first.per.row 
```

请注意，此代码将中断所有为 NA 的任何行。对此没有任何检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T04:31:24.493

这里是一个简单的版本。首先，我只取 pl 列，对于我删除 na 的每一行，然后我计算最大值。

```
 df <- dat[,pl]
 cbind(dat, t(apply(df, 1, function(x) {
                      x <- na.omit(x)
                      c(max(x),max(x)-x[1])
                    }
                )
              )
       )

   A  B  C  D  E  F  G    1  2
1 15  5 20  9 NA  6  1   15  6
2  3  2 NA  5  1  3  2    5  4
3 NA NA  3 NA NA NA NA -Inf NA
4  0  1  0  7  8 NA  6    8  0
5  1  2  3 NA NA  1  6    2  1 
```

# vb.net - 如何使用 MDI 父窗体制作 mdi 子窗体？

> ID：14867357
> 
> 赞同：-2
> 
> 时间：2013-02-14T03:31:52.943
> 
> 标签：vb.net

我在我的项目中制作了 15 个表格，之后我通过赋予属性 isMDIparent true 将家庭表格作为父 MDI。现在我想将所有表格作为家庭表格的子表格，但我没有办法这样做。所以请建议我代码分配所有表单以制作 parentMDI 主表单的子表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:55:51.730

您需要将子窗体的[MdiParent 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.mdiparent.aspx)设置为您的 MdiContainer。此示例假定有两个表单，一个名为 Form1，另一个名为 Form2。所有属性都以编程方式设置。

```
Public Class Form1

    Public Sub New()

        InitializeComponent()
        Me.IsMdiContainer = True
        Dim frm2 As Form2 = New Form2
        frm2.Owner = Me
        frm2.MdiParent = Me
        frm2.Show()

    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-08T15:42:45.080

这是直接来自微软的答案：

```
Protected Sub MDIChildNew_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MenuItem2.Click
   Dim NewMDIChild As New Form2()
   'Set the Parent Form of the Child window.
   NewMDIChild.MdiParent = Me
   'Display the new form.
   NewMDIChild.Show()
End Sub 
```

[http://msdn.microsoft.com/en-us/library/vstudio/7aw8zc76(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/7aw8zc76(v=vs.100).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-25T08:21:24.727

我想 Mark Hall 先生错过了 1 个属性..，试试这个........

```
Public Class Form1

Public Sub New()

    InitializeComponent()
    Me.IsMdiContainer = True
    Dim frm2 As Form2 = New Form2
    frm2.Owner = Me
    frm2.MdiParent = Me.MdiParent
    frm2.Show()

End Sub

End Class 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-12T08:10:59.710

```
Private Sub HomeToolStripMenuItem_Click(sender As Object, e As EventArgs)
   Dim homechild As New login
   homechild.MdiParent = Me
   homechild.Dock = DockStyle.Fill
   homechild.Show()
End Sub 
```

试试这个家伙..这是在 vb.net 中为 MDI 父级打开表单作为 MDI 子级的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-24T19:36:23.307

实际上是这样的：

```
Private sub new()

Dim c as form1 = new form1
c.owner = Me
c.MdiParent = Me
c.show

End sub 
```

`InitializeComponent()`正如它所说的那样，它初始化一个组件。它不适合`Mdichild`.

# java - 如何在javascript函数上携带行ID？

> ID：14867359
> 
> 赞同：1
> 
> 时间：2013-02-14T03:32:12.173
> 
> 标签：java, javascript, ajax

我是这方面的初学者，我已经根据其他示例进行了编码。我想根据两个下拉列表制作动态下拉列表，即当第一个被选中时，第二个将根据第一个下拉列表进行过滤。但问题是当多行时，代码不是函数，因为它不携带行 id，我不知道如何在该函数上携带行 id

以下是我制作的代码

财务数据列表.jsp

```
<script language="JavaScript" type="text/JavaScript">

function addRowToTable()
{
    var tbl = document.getElementById('data');
    var lastRow = tbl.rows.length;
    var iteration = lastRow-1;                
    var row = tbl.insertRow(lastRow);
    row.vAlign = "top";

    var cnt = iteration+1

    //cell 1                
    var cell1 = row.insertCell(0);
    var elem1 = document.createElement('select');
    elem1.setAttribute("id","typeCode"+iteration);
    var option = document.createElement('option');
    option.value='';
    option.textContent='-Select-';
    elem1.name = 'typeCod'; 
    //alert("[ "+this.value+" , "+elem1+" , "+option+" , "+elem1.value+" ]");
    elem1.setAttribute("onchange","showAcct(this.value, 'acctCode"+iteration+"')"); 
    elem1.appendChild(option);
    cell1.appendChild(elem1); 

    // generate list of typeCod option value for select 
    var finTypeLOV = document.forms[0].finTypeLOV.value; 
    var tFinTypeLOV = finTypeLOV.split("|");

    for (i = 0; i < tFinTypeLOV.length; i++){
        if (tFinTypeLOV[i] != '') {
            var tFinTypeValue = tFinTypeLOV[i].split("=");
            appendOptionLast("typeCode"+iteration, tFinTypeValue[0], tFinTypeValue[1]);
        }
    } 

    //cell 2                                
    var cell2 = row.insertCell(1);
    var elem2 = document.createElement('select');
    elem2.setAttribute("id","acctCode"+iteration); 
    var option = document.createElement('option');
    option.value=''; 
    option.textContent='-Select-';
    elem2.name = 'acctCod'; 
    elem2.appendChild(option);
    cell2.appendChild(elem2);
}

var xmlHttp  
function showAcct(typeCod,id){ 
    xmlHttp=GetXmlHttpObject();
    if (xmlHttp==null)
    {
        alert ("Browser does not support HTTP Request")
        return
    }
    var url="financialDataDropdown.jsp";
    url +="?typeCod=" +typeCod+ "&id=" +id; 
    xmlHttp.onreadystatechange = acctChange;
    xmlHttp.open("GET", url, true);
    xmlHttp.send(null);
}

function acctChange(){ 
    frm = document.forms['form1']; 
    var tbl = document.getElementById('data'); 
    var lastRow = tbl.rows.length; 
    var iteration = lastRow-2; 
    if (xmlHttp.readyState==4 || xmlHttp.readyState=="complete"){ 
        if(frm.typeCod.size != 0 || frm.acctCod.id != "acctCode"){ 
            var id2 = "acctCode"+iteration; //nilainyer acctCode2
            document.getElementById(id2).innerHTML=xmlHttp.responseText;
        } else {
            document.getElementById("acctCode").innerHTML = xmlHttp.responseText; 
        }
    }   
}

function GetXmlHttpObject()
{
    var xmlHttp=null;
    try
    {
        // Firefox, Opera 8.0+, Safari
        xmlHttp=new XMLHttpRequest();
    }
    catch (e)
    {
        //Internet Explorer
        try
        {
            xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");
        }
        catch (e)
        {
            xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
    }
    return xmlHttp;
}
</script>
<!--.........some code not show here..........-->
<table>
    <tr>
        <td>
            <select id="typeCode" name='typeCod' onchange="showAcct(this.value, 'acctCode')">  
            <%
                opt = fin.optionRefFinType(false, typeCod, typeCod);
                for (int i = 0; i < opt.size(); i++) {
            %>
            <%=opt.elementAt(i)%>
            <% }%>
            </select>
        </td>
        <td> 
            <select id='acctCode' name='acctCod' >  
                <option value='-1'>-Select-</option>  
            </select>  
        </td>
    </tr>
</table> 
```

以上是我制作的 javascript，我使用函数 addRowToTable() 在默认行上添加具有相同功能的多行。

我在第一个下拉菜单中调用`showAcct()`函数。`onchange`

# php - $_FILES 中的子数组

> ID：14867363
> 
> 赞同：-2
> 
> 时间：2013-02-14T03:32:31.993
> 
> 标签：php, file

我在 $_Files 中有 2 个关联数组，无法弄清楚如何遍历它们。以下是 print_r($_FILES) 结果：

```
Array
(
    [userfile] => Array
        (
            [name] => Lilly-Pond-Leo-Kenney.jpg
            [type] => image/jpeg
            [tmp_name] => C:\wamp\tmp\php189.tmp
            [error] => 0
            [size] => 429950
        )

    [userfile1] => Array
        (
            [name] => LK-3-women.jpg
            [type] => image/jpeg
            [tmp_name] => C:\wamp\tmp\php18A.tmp
            [error] => 0
            [size] => 79391
        )

) 
```

我无法弄清楚如何从 [userfile] 循环到 [userfile1]。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T07:46:32.493

```
foreach($_FILES as $file)
{
  //use this loop and remove print_r();
  print_r($file);
} 
```

# fluent-nhibernate - 流畅的休眠 Transformers.AliasToBean 没有按预期工作

> ID：14867364
> 
> 赞同：0
> 
> 时间：2013-02-14T03:32:36.353
> 
> 标签：fluent-nhibernate, queryover

我有三张桌子。一个是主表：TableA。一个表被称为 ReferencedTable 的 TableA 引用，最后一个由 ReferencedTable 引用的查找表。

我有这个查询，它返回十个最近的对象：

```
TableADTO TableAlias = null;
LookupTableDTO LookupTableAlias = null;
ReferencedDTO ReferencedAlias = null;

dtos = session.QueryOver(() => TableAlias)
          .JoinAlias(() => TableAlias.Object, () =>ReferencedAlias)
          .JoinAlias(() => ReferencedAlias.ObjectType, () => LookupTableAlias)
          .Where(() => ReferencedAlias.PersonId == user.Id &&
                       (LookupTableAlias.Id != INVOICE_ID ||
                        LookupTableAlias.Id != FINANCIAL_ID) &&
                       TableAlias.Status == NEW_STATUS_FLAG &&
                       ReferencedAlias.ReceivedDate < DateTime.Now)
          .Take(10)
          .List()
          .Select(dto=>
          new AbreviatedDTO
          {
              Id = dto.Referenced.Id,
              Field1 = dto.Field1,
              Priority = dto.Referenced.Priority,
              ReceivedDate = dto.Referenced.ReceivedDate,
              Field1 = dto.Referenced.Field1,
              Type = dto.Referenced.Lookup.TypeCode,
              Status = dto.Status
          }).ToList(); 
```

这按预期工作。但是，我认为下面的转换也可以。它确实带来了 10 个对象，但这些对象具有所有默认值且未填充（例如 AbreviatedDTO.ReceivedDate = DateTime.Minimum）。我在 QueryOver 上做错了吗？

任何帮助，将不胜感激。比尔 N

```
TableDTO TableAlias = null;
LookupTableDTO LookupTableAlias = null;
ReferencedDTO ReferencedAlias = null;

dtos = session.QueryOver(() => TableAlias)
          .JoinAlias(() => TableAlias.Object, () =>ReferencedAlias)
          .JoinAlias(() => ReferencedAlias.ObjectType, () => LookupTableAlias)
          .Where(() => ReferencedAlias.PersonId == user.Id &&
                       (LookupTableAlias.Id != INVOICE_ID ||
                        LookupTableAlias.Id != FINANCIAL_ID) &&
                       TableAlias.Status == NEW_STATUS_FLAG &&
                       ReferencedAlias.ReceivedDate < DateTime.Now)
 .SelectList(list => list
                        .Select(x => TableAlias.Field1)
                        .Select(x => ReferencedAlias.Id)
                        .Select(x => ReferencedAlias.Field1)
                        .Select(x => ReferencedAlias.ReceivedDate)
                        .Select(x => ReferencedAlias.Priority)
                        .Select(x => LookupTableAlias.TypeCode))
.TransformUsing(Transformers.AliasToBean<AbreviatedDTO>())
          .Take(10)
  .List<AbreviatedDTO>() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:55:37.527

您需要为每个选定字段定义一个别名，该别名与生成的 dto 中的属性名相同

```
AbreviatedDTO alias = null;

// in query
    .SelectList(list => list
        .Select(() => TableAlias.Field1).WithAlias(() => alias.Field1) 
```

# linux - 让 bash 区分 Ctrl- 和 Ctrl-Shift-

> ID：14867368
> 
> 赞同：3
> 
> 时间：2013-02-14T03:32:42.477
> 
> 标签：linux, bash

我想知道是否有任何方法可以让 bash 为包含 shift 键的组合键发送不同的代码？例如，（`Ctrl`+`V`告诉我）+ 和 ++`Ctrl`被`N`解释`Ctrl`为相同的（^N）。或者是否有一个可以有所作为的终端？或者可以抨击我修改它吗？`Shift``N`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T14:07:05.210

终端不直接与您的键盘交互；它与接收到的字节流交互，这些字节流通常（但不一定）由键盘生成。对于可打印的 ASCII 值，该值与键盘上的键（或组合）之间存在明显的对应关系。ASCII 97 是`a`，ASCII 65 是`Shift``a`，依此类推。

但是，从 ASCII 0 到 ASCII 31 有 32 个非打印*控制*字符，之所以这样称呼，是因为它们旨在*控制*终端。为了输入它们，`Control`添加了 以允许您结合其他键生成这些代码。使用了一个简单的方案。按*-x*`Control`将生成对应于从*x*中减去 64 的控制代码。由于生成 ASCII 64，因此生成 ASCII 0。相同的映射适用于直通（请参阅您最喜欢的 ASCII 参考以查看其余对应关系）。**`@``Control``@``A``_`**

 **但是，是否需要 shift 键来生成 ASCII 64 到 ASCII 95 取决于您的键盘。在我的美国键盘布局上，只有`[`并且`]`可以在没有 shift 键的情况下键入。（请记住，我们在这里使用的是*大写字母 ASCII 范围，而不是小写字母。）所以为了简化，我怀疑在确定使用**-x*发送`Shift`哪个键码时会忽略它。（请注意，如果由于某种原因，您的键盘有两个由键/Shift 键生成的介于 64 和 95 之间的字符，则您的终端需要为关联的控制字符定义备用映射。）`Control`

 *所有这些都只是（？）解释为什么`Control``Shift`- *x*和`Control`- *x*通常是相同的。显然，您的现代操作系统可以区分各种键盘组合。但是在无数种可能性中，只有 256 个可以向终端发送唯一值；其余的必须重复一个或多个其他的。为了有用，它们需要配置为向终端发送一些多字节序列，通常以 ASCII 27 (ESC) 开头。当终端接收到该字节时，它们会暂停片刻以查看是否有任何其他字节随后出现。功能键、箭头键等键具有它们发送的相当标准的序列，终端以各种方式对其进行解释。其他键（如`Control``Shift``n`在您的示例中）没有商定的含义，因此您的终端仿真器必须分配一个。大多数仿真器应该允许您这样做，但显然，它们如何做到这一点是特定于程序的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T03:35:01.987

这里有两篇关于 bash 中键盘快捷键自定义的精彩文章：

[Bash：使用自定义键盘快捷键调用脚本？](https://stackoverflow.com/questions/4119991/bash-call-script-with-customized-keyboard-shortcuts)

[在 bash 中，如何将功能键绑定到命令？](https://stackoverflow.com/questions/4200800/in-bash-how-do-i-bind-a-function-key-to-a-command)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-17T19:30:03.080

iTerm2 允许您将 ++ `Control`（应该表示）之类的组合键映射到转义序列。默认情况下，Emacs 将某些转义序列转换为预期的键序列。因此，通过将 iTerm 中所需的组合键重新映射到适当的转义序列，您可以获得所需的行为。有关详细信息，请参阅[此响应](https://superuser.com/a/1502869/1113420)。`Shift``,``C-<`***

# java - 让 SwingWorker 等待变量更新

> ID：14867371
> 
> 赞同：-1
> 
> 时间：2013-02-14T03:32:58.313
> 
> 标签：java, swing, swingworker

有没有办法让 SwingWorker（在 doInBackground 方法中）到达代码的某个点，停在那里，监视某个变量，然后在变量更改为可接受的值时恢复？

我知道我可以这样做：

```
do {
    Thread.sleep(500);
} while (variable == false); 
```

但这是一种非常丑陋的做法......

有什么建议么？

编辑：所以等待并通知它......但是，我绝对不知道如何实现它，即使在阅读了几个教程之后......

所以这是我目前的情况：

我有一个在 doInBackground 方法中执行某些操作的 SwingWorker：

```
doInBackground()
{
    doSomething();
    //BLOCK (PAUSE) HERE
    doSomethingElse();
} 
```

另一方面，我有一个附加了监听器的对象，它在 doSomething(); 时触发。被执行。

doSomethingElse() 访问和更改与侦听器类似的事物，因此它们相互干扰。

所以我的目标是在监听器中添加一行代码，这将解除 doInBackground() 代码的块。下面是带有监听器的类的样子：

```
public class myClass extends JPanel()
{
    addComponentListener(new ComponentAdapter()
    {
        @Override
        public void componentResized(ComponentEvent arg0)
        {   
            doThings();
            //LIFT BLOCK AND LET THE SWINGWORKER CODE CONTINUE
        }
    }
} 
```

所以，操作顺序应该是：

```
doSomething();
doThings();
doSomethingElse(); 
```

此外，我可以从 SwingWorker 访问侦听器，但不能以其他方式访问（但我可能能够使其工作）；

最后一件事：Listener 不仅仅由 SwingWorker 调用，它可以从其他来源（例如用户）调用，而 SwingWorker 甚至不必被实例化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T03:35:40.250

您可以使用并发库中的一种工具，例如 CountDownLatch。

# c# - 在 C# 中的 for 循环中加载 URL

> ID：14867373
> 
> 赞同：0
> 
> 时间：2013-02-14T03:33:17.463
> 
> 标签：c#

我正在向多个电话号码发送消息。手机号码存储在一个数组中。

```
string phNums =  "91999999999,9199999998....";.
string[] phNos = phNums.Split(','); 
```

但是消息并没有到达所有的收件人，主要是到达数组末尾附近的数字。消息通过 SMS 服务提供商提供的 URL 发送，其中嵌入了电话号码和消息。

```
 for (int i = 0; i < phNos.Length; i++)
  {
    url = @"http://aaa.bbb.ccc.dd/HTTPMTAPI?User=abc&Password=pqr&FromAddr=xyzSMS&DestNo=" + phNos[i] + "&msg=" + message;
    Uri targetUri1 = new Uri(url);
    System.Net.HttpWebRequest hwb1;
    hwb1 = (System.Net.HttpWebRequest)System.Net.HttpWebRequest.Create(targetUri1);
    hwb1.GetResponse();
  } 
```

作为替代，我也使用了 Webclient() 但仍然不能保证成功的消息传递。

```
 for (int i = 0; i < phNos.Length; i++)
  {
    WebClient cli= new WebClient();
  url = @"http://aaa.bbb.ccc.dd/HTTPMTAPI?User=abc&Password=pqr&FromAddr=xyzSMS&DestNo=" + phNos[i] + "&msg=" + message;
    cli.DownloadString(url);
  } 
```

如何确保不跳过消息传递。就像只有在下载 URL 时收到成功响应一样，循环应该继续到下一个手机号码，依此类推。如果还有其他可能的机制，请提出建议。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T05:04:29.560

I think this is what you want to do:

```
for (int i = 0; i < phNos.Length; i++)
{
    url = @"http://aaa.bbb.ccc.dd/HTTPMTAPI?User=abc&Password=pqr&FromAddr=xyzSMS&DestNo=" + phNos[i] + "&msg=" + message;
    Uri targetUri1 = new Uri(url);
    System.Net.HttpWebRequest hwb1;
    hwb1 = (System.Net.HttpWebRequest)System.Net.HttpWebRequest.Create(targetUri1);
    System.Net.HttpWebResponse response = hwb1.GetResponse();
    if (response != null)
        {
            int status = (int)response.StatusCode; // this changes the status 
                                                   // from text response to the
                                                   // number, like 404
            if (status == 404//or anything else you want to test//)
               {
                    // put your retry logic here, make sure you add a way to break 
                    // so you dont infinitely loop if the service is down or something
               }
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T03:37:11.193

URL 有长度限制。您可能会达到此限制，因此您会丢失尾随的电话号码。您最好的选择是将您的请求分成一定大小的多个请求。

根据以下 SO，最好限制您的请求，以使 url 不超过 2000 个字符。
[不同浏览器中 URL 的最大长度是多少？](https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url)

# sql - SQLite 中的左连接 SQL 遇到问题

> ID：14867374
> 
> 赞同：1
> 
> 时间：2013-02-14T03:33:28.573
> 
> 标签：sql, sqlite

简短背景：我有一个 SQLite 数据库，大小为几 GB，并且还在增长。它包含一堆非常简单的表格。每个表由一个 64 位整数主索引字段 (TStamp) 和一个值字段 (Val) 组成。字段 TStamp 实际上是日期时间的长整数表示。这些表具有广泛不同的行数和有些可变的内容类型，但这无关紧要。主表 (tbIndDate) 包含完整的日期范围，具有与其他表相同的主索引 (TStamp)，并在其 Val 字段中保存人类可读的日期时间。例如，

名为 tbIndDate 的主索引表：

```
TStamp              Val
634082688000000000  5/1/2010 0:00:00
634082691000000000  5/1/2010 0:05:00
634082694000000000  5/1/2010 0:10:00
634082697000000000  5/1/2010 0:15:00
etc                 etc 
```

自动化标签 6FI1.PV 的示例表，名为 tb6FI1%PV：

```
TStamp              Val
634085793000000000  41.7 
634085796000000000  42.83 
634085799000000000  41.44 
634085802000000000  40.43 
634085805000000000  39.78 
etc                 etc 
```

将数据输入表由一个小的 vb.net 程序处理，当一个新的自动化标签添加到捕获列表时，程序使用自动化标签名称创建一个新表，并开始填充它。这一切都很顺利。

好的。我已经开始构建一个从数据库中获取数据的工具。它适用于内部连接：

```
SELECT [tbIndDate].[Val] AS 'Timestamp',[tb6FI1%PV].[Val] AS '6FI1.PV',
[tb6FI34%PV].[Val] AS '6FI34.PV',[tb6AI32%PV].[Val] AS '6AI32.PV' 
FROM [tbIndDate],[tb6FI1%PV],[tb6FI34%PV],[tb6AI32%PV] 
WHERE [tbIndDate].[TStamp]=[tb6FI1%PV].[TStamp] 
AND [tbIndDate].[TStamp]=[tb6FI34%PV].[TStamp] 
AND [tbIndDate].[TStamp]=[tb6AI32%PV].[TStamp]; 
```

这将返回：

```
Timestamp          6FI1.PV   6FI34.PV   6AI32.PV
1/1/2013 0:00:00   42.4679   1.499      0.8439
1/1/2013 0:05:00   40.3628   1.5048     0.8435
1/1/2013 0:10:00   38.2652   1.5028     0.8436
1/1/2013 0:15:00   37.8582   1.5029     0.8436 
```

耶！:)

我也得到了一些平均和时间间隔查询的工作。

但是，由于标签数据并非对所有日期都可用，我想创建一个选项来列出主索引中的所有日期，即使某些标签表没有匹配的数据。

换句话说，带有左外连接的 SELECT 查询。每个人都知道这一点。数据可能如下所示：

```
Timestamp          6FI1.PV   6FI34.PV   6AI32.PV
1/1/2013 0:00:00   42.4679   1.499      NULL
1/1/2013 0:05:00   40.3628   1.5048     NULL
1/1/2013 0:10:00   38.2652   NULL       NULL
1/1/2013 0:15:00   37.8582   NULL       0.8436 
```

麻烦的是，我尝试过的 SQL 都没有奏效。这是一个没有去的：

```
SELECT [tbIndDate].[Val] AS 'Timestamp',[tb6FI1%PV].[Val] AS '6FI1.PV',
[tb6FI34%PV].[Val] AS '6FI34.PV' 
FROM [tbIndDate],[tb6FI1%PV],[tb6FI34%PV] 
LEFT JOIN [tbIndDate] ON [tbIndDate].[TStamp]=[tb6FI1%PV].[TStamp] 
LEFT JOIN [tbIndDate] ON [tbIndDate].[TStamp]=[tb6FI34%PV].[TStamp]; 
```

错误是“SQL 错误或缺少数据库，列名不明确：tbIndDate.Val”

我尝试从几个示例中复制语法，但没有一个完全相同，我的尝试失败了。

我做错别名了吗？用于容纳表名中特殊字符的方括号？我是一个完整的 SQL 初学者，所以不要拒绝建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:39:43.260

看起来问题在于您尝试加入`[tbIndDate]`多次。尝试这个：

```
SELECT [tbIndDate].[Val] AS 'Timestamp',[tb6FI1%PV].[Val] AS '6FI1.PV',
    [tb6FI34%PV].[Val] AS '6FI34.PV' 
FROM [tbIndDate]
LEFT JOIN [tb6FI1%PV] ON [tbIndDate].[TStamp]=[tb6FI1%PV].[TStamp] 
LEFT JOIN [tb6FI34%PV] ON [tbIndDate].[TStamp]=[tb6FI34%PV].[TStamp]; 
```

# jsf-2 - 会话无效时会话被破坏

> ID：14867379
> 
> 赞同：0
> 
> 时间：2013-02-14T03:34:17.657
> 
> 标签：jsf-2, cdi, invalidation, httpsession, conversation-scope

我有一个实现**HttpSessionListener的****SessionManager**。在**SessionManager**中，我有一个所有活动会话的静态哈希表。我正在尝试创建一个强制会话无效的函数。它看起来像：

 ****```
HttpSession session = sessionRegistry.get(key);
session.invalidate(); 
```

这绝对是我想要做的，那就是破坏目标会话。但是，它似乎对我的**@ConversationScoped**托管 bean 有副作用。

在我的**ConversationBean**中，我有一个拥有一些价值的属性。我刚刚注意到，在**sessionRegistry**中的会话无效后，存储在 ConversationBean 上的值被破坏。

*   我正在使另一个会话无效（来自**sessionRegistry**而不是当前会话）
*   我在会话无效之前和之后打印了来自**ConversationBean的值，它仍然存在。**只有当我离开显示活动会话列表的**@ViewScoped**页面时，它才会被销毁。**（使用@PreDestroy**捕获它）
*   此外，在**@ViewScoped bean 的****@PreDestroy**注释方法上，我尝试打印对话 ID，但它已经无效。是的，**ConversationBean的哈希码也不同，这意味着它与我调用****session.invalidate**之前的实例不同。

 ********- - 编辑 - - -**

这个例子展示了我想要实现的目标：

假设我有一个应用程序范围的哈希表**sessionRegistry**，具有以下值：

```
Key | Value
---------------------
1   | HttpSession1 
2   | HttpSession2 
3   | HttpSession3 
```

我以管理员身份登录。现在我相信我有一个不同的会话，比如说 HttpSession4。我想尝试从应用程序范围的哈希表中启动一些会话，我这样做：

```
HttpSession session = sessionRegistry.get(1);
session.invalidate(); 
```

我在登录**HttpSession4**时 销毁了**HttpSession1**。在我的理解中，HttpSession1 的会话应该被销毁，而不是当前会话，它应该与 HttpSession4 相关联。

我的问题是，这真的是**@ConversationScoped**托管 bean 的正常行为吗？它似乎与我无效的会话相关联。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:35:46.673

引用[官方文档](http://docs.oracle.com/javaee/6/api/javax/enterprise/context/ConversationScoped.html)：

> 当 HTTP servlet 会话无效时，在 servlet service() 方法完成后，在当前会话期间创建的所有长时间运行的会话上下文都将被销毁。**********

# c# - 创建在线高分表

> ID：14867380
> 
> 赞同：0
> 
> 时间：2013-02-14T03:34:37.710
> 
> 标签：c#, windows-8, microsoft-metro, windows-phone-8

`C#`我想为我最近在 Windows 8（和`XAML`）中开发的游戏创建一个非常简单的在线高分表。

最简单快捷的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T04:21:21.090

**毫无疑问， [WINDOWS AZURE MOBILE SERVICES](http://www.windowsazure.com/en-us/home/scenarios/mobile-services/)**，是的，我在喊:)

您需要的所有基础设施都在云中提供，并且您会获得一个客户端 SDK，它使记录分数实际上是一条线。[看看我的博客文章](http://blogs.msdn.com/b/jimoneil/archive/2012/09/19/adding-notifications-to-your-windows-8-game.aspx)就是这样做的（以及合并推送通知）。这篇文章涵盖了一个 HTML 5/JavaScript 游戏，但我认为您可以轻松地将其转换为 C#/XAML。

Windows Azure 移动服务是免费的*，您可以通过[Windows Azure 3 个月试用](http://aka.ms/8in30)优惠获得访问权限，并且在到期后您的服务仍然免费（尽管您需要为数据付费，在您的情况下可能每月 5 美元）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T03:37:49.183

我将使用 HttpClient 和简单的 PHP 脚本，它们将使用 post 方法接收分数，而第二个脚本将显示这些分数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T03:45:39.723

您需要的第一件事是始终处于运行状态并能够处理流量的服务器。我使用 Godaddy 托管。它便宜又优质的服务，而且很容易通过 ftp 访问。

接下来你需要一个php页面。

php 页面应该从 URL 中获取关于分数和用户信息的 GET 数据

有几种方法可以实现分数记录。1\. 您可以让接收 php 页面更改并排序包含用户 ID 和得分列表的主文件 2\. 您可以让接收 php 页面为每个玩家 ID 保存一个唯一的 txt 文件，并将他们的得分粘贴在其中。然后，当您的应用程序调用分数时，它可以提取所有 txt 文件并在手机上对其进行排序。

我个人更喜欢方式一。

最后，您需要一个可以指向您的应用程序的域名。您将需要一个用于发送信息的目录和一个用于接收的目录。

我掩盖了很多东西。一个有经验的开发人员可以在一天内完成这项工作。调试它虽然需要一些时间。祝你好运

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T03:48:15.830

如果您习惯 C#，请构建一个 ASP.NET MVC Web 应用程序。您可以在本地开发和测试它而无需上线。MVC 可能有一个艰难的学习曲线，但它是一个很棒的框架，并且使用您作为 C# 编码器可能已经熟悉的技术，例如 Linq。您需要一个数据库，Visual Studio 应该可以帮助您开始使用所有这些。

您想要一个帖子或获取控制器操作，其 URL 类似于[http://server.com/scores/player1](http://server.com/scores/player1)。该 url 上的 HTTP GET 可以返回分数视图，而该 url 的帖子带有参数，例如，难度 = 容易和分数 = 1100。

您的游戏客户端可以使用[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)（更简单）或[HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)进行更精细的控制。构建一个封装评分交互的类，一个方法可以获取所有的高分，另一个方法是通过args playername和score向评分服务器发送一个新的分数。

在本地主机上进行演示，然后考虑如何限制玩家发布自己的分数，例如让游戏客户端通过服务器进行身份验证。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T08:42:27.260

使用 service 或 httpclient 来更新分数

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-14T20:50:35.267

Xbox Live 服务支持排行榜。既然你有一个 Win8 游戏，你应该看看这个来自 //build 2012 : [Building Cross-Device Xbox Games](http://channel9.msdn.com/Events/Build/2012/3-054)的视频，他们在视频的 30 分钟左右进入了有用的细节。

# javascript - 如何创建“计算”按钮？

> ID：14867385
> 
> 赞同：-1
> 
> 时间：2013-02-14T03:35:13.290
> 
> 标签：javascript, button, delay

我有一个网页，它使用了一些需要几秒钟才能计算出来的变量。我想创建一个文本字段，可以在其中显示这两个变量的总和，但问题是该文本字段必须延迟一点（1-2 秒）。我已经尝试在特定函数中使用“document.write(var1 + var2)”，但是当总和准备好时，页面消失，它只显示结果（我希望结果出现在同一页面中）。我也试过“setTimeout”，我得到了相同的结果（只有总和出现在新页面上）

我也可以使用一个按钮，使延迟和工作正常（我知道怎么做，但我不知道如何显示它），我希望结果显示在同一页面上的文本字段中，或任何文本. 我已经看到再次按下 bue 时将自身转换为结果的按钮我不知道该怎么做有人可以帮助我吗？谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T03:43:48.497

假设您的文本字段如下所示：

```
<span id='outputfield'>the result should appear here</span> 
```

...然后，使用以下 javascript 代码在 2 秒后更新它：

```
setTimeout(function(){
    document.getElementById('outputfield').innerHTML="Your result";
}, 2000); 
```

如果您使用的是 jQuery，上面的内行可能会缩短为：

```
$('#outputfield').html("Your result"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T03:47:22.710

如果这是您的文本字段。

```
<input type="text" id ="myinput"> 
```

使用 this 将值插入其中

```
document.getElementById("myinput").value=11233; 
```

类似地，在任何文本字段中插入文本添加一个 id 并使用插入 `getElementById`

# javascript - jQuery Accordion 知道面板何时完成打开

> ID：14867395
> 
> 赞同：2
> 
> 时间：2013-02-14T03:36:26.317
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-accordion

我正在使用`jQuery Accordion`并且需要知道面板何时完成加载。我知道我需要绑定`accordionchange`事件，但是从那里我真的很困惑如何知道面板何时打开。

如果我只是`alert()`在函数内部放置一个，它会在面板打开后显示，但它也会在面板关闭后显示：

```
$("#campaigns").accordion({ 
    event: 'click',
    active: false,
    collapsible: true,
    autoHeight: false,
    heightStyle: "content"
}).bind("accordionchange", function(event, ui) {
    alert('Panel opened and closed');
}); 
```

**我怎样才能知道面板何时完成打开？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T03:39:03.117

[http://api.jqueryui.com/accordion/#event-activate](http://api.jqueryui.com/accordion/#event-activate) - 查看事件 - 当面板被激活（打开）时触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T02:40:02.667

Finally got it working how I wanted. Here is how I know when opening a panel:

```
$("#campaigns").accordion({ 
    event: 'click',
    active: false,
    collapsible: true,
    autoHeight: false,
    heightStyle: "content",
    change: function(event, ui) {

        // See if we are opening a panel
        var allOpen = ui.oldHeader.length == 1 && ui.newHeader.length == 1 && ui.oldContent.length == 1 && ui.newContent.length == 1;
        var newOpen = ui.newHeader.length == 1 && ui.newContent.length == 1;
        if (allOpen || newOpen) {

            // Do something here each time the panel is opened

        }//end if

    }//end change
}); 
```

Strangely, `change` seems to not be documented...

# salesforce - （Apex）输入完成后弹出一条消息，然后单击保存

> ID：14867398
> 
> 赞同：0
> 
> 时间：2013-02-14T03:36:54.840
> 
> 标签：salesforce, apex-code, visualforce

```
<apex:page controller="MyController" sidebar="false">
<apex:form >
    <apex:inputText size="36" value="{!Str}"/>
    <apex:commandButton onClick="alert('{!Str}');" value="Alert"/>
</apex:form> 
```

该代码只是弹出一个警报窗口以显示输入。但是，Salesforce apex 似乎不可能这样做，因为它是一种服务器端语言。我对么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T04:46:05.713

您可以通过 javaScript 或 jQuery 选择 str 的新值。

顶点：inputText styleClass="str" value="{!Str}"

'警报($('.str').value())'

# xml - Peoplesoft Web 服务 API/存储库

> ID：14867401
> 
> 赞同：1
> 
> 时间：2013-02-14T03:37:08.677
> 
> 标签：xml, web-services, oracle, soa, peoplesoft

试图找到 PeopleSoft Web 服务的 XML 消息和服务结构，类似于 SAP 的[ESWorkplace](http://esworkplace.sap.com/socoview%28bD1lbiZjPTAwMSZkPW1pbg==%29/render.asp?sap-unique=042646&sap-params=aWQ9RjZDRkMwRUEzRUYxNEJDOTg0MUM1MjgyNzJFRTg1ODMmcGFja2FnZWlkPURFMDQyNkREOUIwMjQ5RjE5NTE1MDAxQTY0RDNGNDYyJm1vZGU9 "ES 工作场所")。这篇[博](http://www.oracle.com/technetwork/topics/ofm-psft-blog-postings-094500.html)文似乎表明它被称为集成服务存储库 (ISR)，但是[提供的链接](http://www.peoplesoft.com/psp/portprd/CUSTOMER/ISR/c/PTIS_INTEGRATION.PTIS_QUERY_INTG.GBL)不起作用。oracle 网站和论坛上的任何搜索查询都不会返回任何内容。

那么甲骨文还公开发布 PeopleSoft 集成点吗？如果有，在哪里？如果不是，人们如何访问这些信息？

提供一些背景信息，我是 SOA 集成团队的一员，并且无权访问任何 PeopleSoft 实施的资源。

**编辑：**进一步搜索后，这可能是[PeopleSoft 中可用的标准 Web 服务 API 的重复项？](https://stackoverflow.com/questions/4315697/standard-web-services-api-available-in-peoplesoft)，希望在 2 年多的时间里，尽管情况发生了变化！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-09T06:22:57.893

您可以在以下导航中找到 PeopleSoft Web 服务。 **导航：主菜单 > PeopleTools > 集成代理 > 集成设置 > 服务。** 默认情况下，它将列出 SOAP Web 服务，如果您正在寻找 REST API，您可以启用 REST 服务复选框。

**消息结构：** 搜索您的 Web 服务并向下钻取，您可以在底部找到现有操作网格，其中我们有**操作选项卡- 保存与此服务和****消息链接选项卡**相关的服务操作列表 - 保存这些操作的相应消息服务运营。

**有效负载：** 如果您想查看事务的有效负载，请按照以下**导航 - 主菜单 > PeopleTools > 集成代理 > 服务操作监视器 > 监控 > 同步服务（或异步服务）。** 使用您的服务操作名称进行搜索，然后单击列出的交易中出现的链接。它将打开同步详细信息页面的新选项卡。在日志类型中，您可以选择请求 - 原始、请求 - 转换、响应 - 原始、响应 - 转换并查看事务的有效负载。您还可以找到错误消息（如果有）。

问候， Vivekanandhan [PeopleSoft Web 服务](https://i.stack.imgur.com/qpIfr.jpg)

# linq - 在 LINQ / EF 中处理复杂右外连接的好策略是什么

> ID：14867402
> 
> 赞同：0
> 
> 时间：2013-02-14T03:37:09.117
> 
> 标签：linq, entity-framework, entity-framework-4, linq-to-entities

我有这个模型

![在此处输入图像描述](../Images/efc2e28a113a4fc9008e5efdedb9f593.png)

我的目标是检索用户的所有资源，但与该用户共享受限角色的资源除外。

这在直接 SQL 中并不太难（6BA60C09-2873-46A5-BAFB-5996A6C6482B 是用户 ID）

```
SELECT distinct r.Name
FROM  dbo.Resources xr 
INNER JOIN [dbo].[x_Resource_RestrictedRole] rr ON  xr.Id = rr.ResourceId
INNER JOIN [dbo].[aspnet_UsersInRoles] ur ON ur.RoleId = rr.RoleId  
    AND ur.UserId = '6BA60C09-2873-46A5-BAFB-5996A6C6482B'
RIGHT JOIN dbo.Resources r on r.id = xr.id 
WHERE xr.id IS NULL 
```

我无法为此找出一个好的策略，`EF`因为我无权访问关联表。

这可以在 LINQ 或 lambda 表达式中完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T05:05:24.330

你有一些问题，但我会试着回答你的`query`

```
var y = (from xr in context.Resources
         join rr in context.x_Resource_RestrictedRole on xr.Id equals rr.ResourceId
         join ur in context.aspnet_UsersInRoles on rr.RoleId  equals ur.RoleId
         join r in context.Resources on xr.id equals r.id into rJoin
         from r2 in rJoin.DefaultIfEmpty()
         where xr.id == null && ur.UserId = "6BA60C09-2873-46A5-BAFB-5996A6C6482B"
         select new { r.Name }).Distinct(c => c.Name).ToList(); 
```

# visual-studio-2010 - curl_easy_escape 不适用于 C++ dll

> ID：14867404
> 
> 赞同：1
> 
> 时间：2013-02-14T03:37:25.890
> 
> 标签：visual-studio-2010, dll, curl, libcurl

我在使用`curl_easy_escape`C++ dll 中的函数时遇到问题。如果我创建一个控制台应用程序，`curl_easy_escape`则按预期工作。

cURL curl-7.28.1-devel-mingw32
Visual Studio 2010

**控制台应用程序（按预期工作）**

```
int _tmain(int argc, _TCHAR* argv[])
{
    CURL *curl;
    char *data1;
    char *data2;
    int data2len;

    curl = curl_easy_init();
    if (curl)
    {
        data1 = curl_easy_escape(curl, "this is a string with spaces", 0);
        printf("\r\ndata1 = %s\r\n", data1);
        data2 = curl_easy_unescape(curl, data1, 0, &data2len);
        printf("\r\ndata2 = %s\r\n", data2);
        curl_easy_cleanup(curl);
    }
    printf(“\r\nPress any key to continue\r\n”);
    return 0; 
```

**输出**

```
data1 = this%20is%20a%20string%20with%20spaces
data2 = this is a string with spaces
Press any key to continue 
```

**C++ 动态链接库**

Visual C++ > Win32 > Win32 Project
Application type = DLL (所有其他选项默认)
Linker > Input > Additional Dependencies, 添加 libcurl.lib

```
extern "C"
{
    __declspec(dllexport) int * curl_test(char *sBuf)
    {
        CURL *curl;
        curl = curl_easy_init();
        if (curl)
        {
            // The following line does not work
            //strcpy(sBuf, curl_easy_escape(curl, "this is a string with spaces", 0));

            // This line does work
            strcpy(sBuf, "this is a string with spaces");

            curl_easy_cleanup(curl);
        }
        return 0;

    }
} 
```

dll 在 C 程序中使用并`curl_test`使用`char ptr[256]`. `curl_easy_escape`就位后，调用`LoadLibrary`失败：

```
Error: C interpreter run time error: Error -- File error : LoadLibrary(mydll.dll) failed : The specified procedure could not be found. 
```

请注意，这是在 上`LoadLibrary`，因此`curl_test`尚未调用该函数。

我想我可以找到一些 URL 编码/解码功能，但更愿意使用 cURL 已经提供的功能。我的功能也有同样的问题`curl_easy_strerror`。

会不会是'const char *'？

**更新**

理想情况下我想使用`curl_easy_escape/curl_easy_unescape`，但作为一种解决方法，我决定在 C 中实现我自己的 URL 编码/解码。我在[http://www.geekhideout.com/urlcode.shtml找到了高效、编写良好的编码/解码函数](http://www.geekhideout.com/urlcode.shtml)

# php - php ini_set() 更改不会在安全模式关闭的情况下进行

> ID：14867407
> 
> 赞同：4
> 
> 时间：2013-02-14T03:38:00.987
> 
> 标签：php, output-buffering, ini-set

我想关闭输出缓冲。目前它显示`no value`为本地和主。我跑了`ini_set('output_buffering',4092);`，没有变化`phpinfo()`。安全模式已关闭。

接下来要检查什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-14T03:47:07.613

`output_buffering`只能通过`PHP_INI_PERDIR`which 根据[文档](http://www.php.net/manual/en/configuration.changes.modes.php)进行设置：

> 可以在 php.ini、.htaccess、httpd.conf 或 .user.ini 中设置条目（自 PHP 5.3 起）

仅允许在 PHP 文件中设置指令`PHP_INI_ALL`。`PHP_INI_USER`

# python - 如何使用 python 解析 XML 层次结构？

> ID：14867410
> 
> 赞同：0
> 
> 时间：2013-02-14T03:38:12.943
> 
> 标签：python, xml, parsing, csv

我是 python 新手，一直在承担各种项目以跟上进度。目前，我正在制定一个例程，该例程将通读联邦法规，并为每一段打印该段的组织层次结构。例如，CFR 的 XML 方案的简化版本如下所示：

```
<CHAPTER>
<HD SOURCE="HED">PART 229—NONDISCRIMINATION ON THE BASIS OF SEX IN EDUCATION PROGRAMS OR ACTIVITIES RECEIVING FEDERAL FINANCIAL ASSISTANCE</HD>
     <SECTION>
        <SECTNO>### 229.120</SECTNO>
        <SUBJECT>Transfers of property.</SUBJECT>
        <P>If a recipient sells or otherwise transfers property (…) subject to the provisions of ### 229.205 through 229.235(a).</P>
     </SECTION> 
```

我希望能够将其打印到 CSV，以便我可以运行文本分析：

第 22 卷，第 2 卷，第 229 部分，第 228.120 节，如果接收者根据 ### 229.205 至 229.235(a) 的规定出售或以其他方式转让财产（……）。

请注意，我没有从 XML 中获取标题和卷号，因为它们实际上以更加标准化的格式包含在文件名中。

因为我是一个 Python 新手，所以代码主要基于 Udacity 计算机科学课程中的搜索引擎代码。这是迄今为止我编写/改编的 Python：

```
import os
import urllib2
from xml.dom.minidom import parseString
file_path = '/Users/owner1/Downloads/CFR-2012/title-22/CFR-2012-title22-vol1.xml'
file_name = os.path.basename(file_path) #Gets the filename from the path.
doc = open(file_path)
page = doc.read()

def clean_title(file_name): #Gets the title number from the filename.
    start_title = file_name.find('title')
    end_title = file_name.find("-", start_title+1)
    title = file_name[start_title+5:end_title]
    return title

def clean_volume(file_name): #Gets the volume number from the filename.
    start_volume = file_name.find('vol')
    end_volume = file_name.find('.xml', start_volume)
    volume = file_name[start_volume+3:end_volume]
    return volume

def get_next_section(page): #Gets all of the text between <SECTION> tags.
    start_section = page.find('<SECTION')
    if start_section == -1:
        return None, 0
    start_text = page.find('>', start_section)
    end_quote = page.find('</SECTION>', start_text + 1)
    section = page[start_text + 1:end_quote]
    return section, end_quote

def get_section_number(section): #Within the <SECTION> tag, find the section number based on the <SECTNO> tag.
    start_section_number = section.find('<SECTNO>###')
    if start_section_number == -1:
        return None, 0
    end_section_number = section.find('</SECTNO>', start_section_number)
    section_number = section[start_section_number+11:end_section_number]
    return section_number, end_section_number

def get_paragraph(section): #Within the <SECTION> tag, finds <P> paragraphs.
    start_paragraph = section.find('<P>')
    if start_paragraph == -1:
        return None, 0
    end_paragraph = section.find('</P>', start_paragraph)
    paragraph = section[start_paragraph+3:end_paragraph]
    return start_paragraph, paragraph, end_paragraph

def print_all_paragraphs(page): #This is the section that I would *like* to have print each paragraph and the citation hierarchy.
    section, endpos = get_next_section(page)
    for pragraph in section:
        title = clean_title(file_name)
        volume = clean_volume(file_name)
        section, endpos = get_next_section(page)
        section_number, end_section_number = get_section_number(section)
        start_paragraph, paragraph, end_paragraph = get_paragraph(section)
        if paragraph:
            print "Title: "+ title + " Volume: "+ volume +" Section Number: "+ section_number + " Text: "+ paragraph
            page = page[end_paragraph:]
        else:
            break

print print_all_paragraphs(page)
doc.close() 
```

目前，此代码存在以下问题（示例输出如下）：

1.  它会多次打印第一段。我如何打印每个

    标签带有自己的标题号，卷号等？

2.  CFR 有“保留”的空白部分。这些部分没有

    标签，所以 if 循环中断。我尝试过实现 for/while 循环，但由于某种原因，当我这样做时，代码只会打印它重复找到的第一段。

这是一个输出示例：

```
Title: 22 Volume: 1 Section Number:  9.10 Text: All requests to the Department by a member 

of the public, a government employee, or an agency to declassify and release information shall result in a prompt declassification review of the information in accordance with procedures set forth in 22 CFR 171.20-25\. Mandatory declassification review requests should be directed to the Information and Privacy Coordinator, U.S. Department of State, SA-2, 515 22nd St., NW., Washington, DC 20522-6001.
Title: 22 Volume: 1 Section Number:  9.10 Text: All requests to the Department by a member of the public, a government employee, or an agency to declassify and release information shall result in a prompt declassification review of the information in accordance with procedures set forth in 22 CFR 171.20-25\. Mandatory declassification review requests should be directed to the Information and Privacy Coordinator, U.S. Department of State, SA-2, 515 22nd St., NW., Washington, DC 20522-6001.
Title: 22 Volume: 1 Section Number:  9.10 Text: All requests to the Department by a member of the public, a government employee, or an agency to declassify and release information shall result in a prompt declassification review of the information in accordance with procedures set forth in 22 CFR 171.20-25\. Mandatory declassification review requests should be directed to the Information and Privacy Coordinator, U.S. Department of State, SA-2, 515 22nd St., NW., Washington, DC 20522-6001.
Title: 22 Volume: 1 Section Number:  9.11 Text: The Information and Privacy Coordinator shall be responsible for conducting a program for systematic declassification review of historically valuable records that were exempted from the automatic declassification provisions of section 3.3 of the Executive Order. The Information and Privacy Coordinator shall prioritize such review on the basis of researcher interest and the likelihood of declassification upon review.
Title: 22 Volume: 1 Section Number:  9.12 Text: For Department procedures regarding the access to classified information by historical researchers and certain former government personnel, see Sec. 171.24 of this Title.
Title: 22 Volume: 1 Section Number:  9.13 Text: Specific controls on the use, processing, storage, reproduction, and transmittal of classified information within the Department to provide protection for such information and to prevent access by unauthorized persons are contained in Volume 12 of the Department's Foreign Affairs Manual.
Title: 22 Volume: 1 Section Number:  9a.1 Text: These regulations implement Executive Order 11932 dated August 4, 1976 (41 FR 32691, August 5, 1976) entitled ‚ÄúClassification of Certain Information and Material Obtained from Advisory Bodies Created to Implement the International Energy Program.‚Äù
Title: 22 Volume: 1 Section Number:  9a.1 Text: These regulations implement Executive Order 11932 dated August 4, 1976 (41 FR 32691, August 5, 1976) entitled ‚ÄúClassification of Certain Information and Material Obtained from Advisory Bodies Created to Implement the International Energy Program.‚Äù
None 
```

理想情况下，引文信息之后的每个条目都会有所不同。

我应该运行什么样的循环才能正确打印？是否有一种更“pythonic”的方式来进行这种文本提取？

我知道我是一个完全的新手，我面临的主要问题之一是我根本没有词汇或主题知识来真正找到有关解析具有这种详细程度的 XML 的详细答案。任何推荐阅读也将受到欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:29:19.773

我喜欢用 XPATH 或 XSLT 解决这样的问题。您可以在 lxml 中找到一个很好的实现（不在标准发行版中，需要安装）。例如，XPATH //CHAPTER/HD/SECTION[SECTNO] 选择所有包含数据的部分。您使用相对 XPATH 语句从那里获取您想要的值。多个嵌套的 for 循环消失。XPATH 有一些学习曲线，但有很多例子。

# c# - 如何让我的 c# messenger 不仅在本地网络上也能在互联网上工作？

> ID：14867416
> 
> 赞同：1
> 
> 时间：2013-02-14T03:38:59.833
> 
> 标签：c#, networking

我正在开发一个简单的 c# messenger，它只在本地网络上工作。有人知道我应该怎么做才能让它在互联网上运行吗？

该解决方案包含侦听某个端口的服务器项目，以及一个使用该端口连接到服务器的客户端项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T04:16:28.807

您的客户端需要能够与服务器通信，这意味着：

1.  您需要在直接连接到 Internet 的计算机上托管服务器应用程序。

2.  您需要在控制网络访问互联网的路由器上设置端口转发。

在任何一种情况下，客户端都需要知道要连接的 IP 地址，并且需要考虑任何防火墙交互。这也可能包括 ISP 防火墙，因为某些 ISP 将入站连接限制为订阅者连接。

我不会详细介绍在路由器上设置端口转发的细节......有很多例子，每个路由器都是不同的。如有必要，Google 会帮助您。

理想情况下，您应该为此使用静态 IP 地址，或者使用某种方法让客户端找到托管服务器的 IP 地址。如果您必须从动态 IP 地址运行（例如某些 ISP 仍用于订阅者），那么动态 DNS 选项之一可能适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T03:43:04.220

为了使其在 Internet 上工作，一个简单的答案是您需要启用用于通信的端口。出于安全原因，通常这些端口会被公司防火墙阻止。因此请联系您的 IT 部门以启用该端口。或者使用 80 等常用端口。

# javascript - 用变量缩短函数名称

> ID：14867417
> 
> 赞同：1
> 
> 时间：2013-02-14T03:39:01.100
> 
> 标签：javascript

我想通过较短的别名调用一些函数以最小化代码大小。

```
(function(){
    var t = document.getElementById;
    t('element-id');
})(); 
```

这段代码给出了`Error: Could not convert JavaScript argument`. 为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T03:40:24.477

当您将函数分配给不同的变量时，它的`this`值会发生变化。由于`getElementById`期望`this`是一个元素，因此您会遇到错误。

如果您在可以使用的环境中，请[`bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)使用它：

```
(function(){
    var t = document.getElementById.bind(document);
    t('element-id');
})(); 
```

这将确保`t`'`this`将保留`document`对象。

* * *

如果不能使用`bind`，则必须创建一个中间函数：

```
(function() {
    function t (id) {
        document.getElementById(id);
    }
    t('element-id');
})(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T03:41:22.577

正如约瑟夫所说，`this`价值发生了变化，它破坏了功能。尝试以下操作：

```
var t = function(i) {return document.getElementById(i);}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-20T04:17:18.060

所以在这种情况下，你可以做

```
let t = (id) => document.getElementById(id);
t(“myElement”) 
```

这意味着使用返回对象的箭头函数，就像 document.getElementById(“”) 一样。

# php - 如何使用ajax将值插入数据库？

> ID：14867424
> 
> 赞同：0
> 
> 时间：2013-02-14T03:39:43.723
> 
> 标签：php, javascript

在这里，我使用 javascript 获取计数器值。我想将这些计数器值插入到我的数据库中。我该怎么做？请给我建议。

```
<script language="JavaScript">
var counter = 1;

function moreFields() {
    counter++;
    var newFields = document.getElementById('readroot').cloneNode(true);
    newFields.id = '';
    newFields.style.display = 'block';
    var newField = newFields.childNodes;
    for (var i = 0; i < newField.length; i++) {
        var theName = newField[i].name
        if (theName)
            newField[i].name = theName + counter;
    }
    var insertHere = document.getElementById('writeroot');
    insertHere.parentNode.insertBefore(newFields,insertHere);
}

window.onload = moreFields;
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T07:41:42.063

请阅读[W3school ajax 教程](http://www.w3schools.com/ajax/ajax_xmlhttprequest_send.asp)并单击“自己尝试”按钮，我相信您会很容易地得到它：）

# c++ - 在 Netbeans 中配置 C++11

> ID：14867428
> 
> 赞同：17
> 
> 时间：2013-02-14T03:40:05.277
> 
> 标签：c++, c++11, netbeans-7

我正在使用 Netbeans 7.2，并且我已经使用 Cygwin 安装程序下载了 GCC 4.7。我还将这些目录添加到了我的 PATH 中，并且我相信在 NetBeans 中适当地配置了这些设置。无论我做什么，我都会收到错误：-std=c++11 notrecognized。

来自我需要使用的源代码的这一行特别引起了问题：

```
using size_type = long unsigned int; 
```

这是特定于 c++11 语法的吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-14T04:15:36.890

使用 GCC 4.7.2，如果您使用 -std=c++11 它会编译

```
C:\Users\ferenc>type using_test.cpp
#include <iostream>

using size_type = long unsigned int;

int main(int argc,char* argv[])
{
        std::cout<<sizeof(size_type)<<std::endl;
        return 0;
}

C:\Users\ferenc>g++ -std=c++11 using_test.cpp

C:\Users\ferenc>a.exe
4

C:\Users\ferenc> 
```

1.  确保您已将 NetBeans 指向正确的 MinGW 版本。为此，请转到`Project Properties` **>** `Build` **>** `Tool Collection` **>** `...` **>** `Tool Collection Manager`，然后您可以将路径设置为正确的 g++ 版本。

2.  确保您设置了正确的编译器选项：

    `Project Properties` **>** `Build` **>** `C++ Compiler` **>**

    `Compilation Line` **>** `Additional Options`

    将其设置为：`-std=c++11`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-05-06T09:42:28.427

更简单的步骤：

1.  打开项目
2.  文件菜单 > 项目属性
3.  在构建 > C++ 编译器 > C++ 标准 > C++14/C++11 下

# java - 在 NetBeans 中将面板添加到 JFrame 时出错

> ID：14867432
> 
> 赞同：2
> 
> 时间：2013-02-14T03:40:25.867
> 
> 标签：java, swing, user-interface, netbeans

因此，我使用 NetBeans 中的设计函数制作了 JPanel 和 JFrame，当我尝试将面板拖到 JFrame 上时，出现错误“无法实例化组件。请确保它是 JavaBeans 组件。”

我所做的是创建一个空框架，然后创建面板并使用面板、按钮和文本字段将它们放在一起。我没有修改源代码或任何东西。是否需要将某种代码添加到面板中以使其与 JFrame 一起使用？或者我错过了设计选项卡中的一步？我附上了一张图片，它准确地显示了我所做的。

[面板](http://i50.tinypic.com/swy9hu.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T07:33:24.167

清理并构建项目（以及需要的子项目）。

如果您使用的是 Netbeans 7+，您可以检查`messages.log`找到`C:/Users/{username}/AppData/Roaming/NetBeans/{Netbeans version}/var/log`并检查导致问题的异常。

我认为新的 7.2 测试版现在（谢天谢地）向用户报告了问题。

# php - 类中的 PHP 自动加载助手

> ID：14867434
> 
> 赞同：0
> 
> 时间：2013-02-14T03:40:29.003
> 
> 标签：php, oop, class

我目前有一个手动方法将助手注册到我的基本连接类中，大致如下：

```
class db_con
{
    // define the usual suspect properties..

    public $helpers; // helper objects will get registered here..

    public function __construct()
    {
        // fire up the connection or die trying

        $this->helpers = (object) array();
    }

    public function __destruct()
    {
        $this->helpers = null;
        $this->connection = null;
    }

    // $name = desired handle for the helper
    // $helper = name of class to be registered
    public function register_helper($name, $helper)
    {
        if(!isset($this->helpers->$name, $helper))
        {
            // tack on a helper..
            $this->helpers->$name = new $helper($this);
        }
    }

    // generic DB interaction methods follow..
} 
```

然后是一个助手类，例如..

```
class user_auth
{
    public function __construct($connection){ }

    public function __destruct(){ }

    public function user_method($somevars)
    {
        // do something with user details
    }
} 
```

所以在创建`$connection`对象之后，我会像这样手动注册一个助手：

```
$connection->register_helper('users', 'user_auth'); 
```

现在我的问题是，我能否以某种方式在基本连接类中自动加载帮助程序类？（在`register_helper()`方法或类似方法内）或者我是否仅限于手动加载它们或通过某种形式的外部自动加载器？

如果这个问题已在其他地方得到解答，我深表歉意，但我还没有找到它（不是因为缺乏尝试），而且我还没有任何真正的自动加载任何东西的经验。

非常感谢任何帮助或指示，在此先感谢！:)

**编辑：**根据 Vic 的建议，这是我为 register 方法提出的工作解决方案..

```
public function register_handlers()
{
    $handler_dir = 'path/to/database/handlers/';
    foreach (glob($handler_dir . '*.class.php') as $handler_file)
    {
        $handler_bits = explode('.', basename($handler_file));
        $handler = $handler_bits[0];
        if(!class_exists($handler, false))
        {
            include_once $handler_file;

            if(!isset($this->handle->$handler, $handler))
            {
                $this->handle->$handler = new $handler($this);
            }
        }
    }
} 
```

这似乎包括和注册对象现在绝对没问题，这个解决方案是否是一个“好”的解决方案，如果没有更多的输入或测试，我无法知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:59:45.270

代码可能如下所示，但你为什么需要这个？

```
 public function register_helper($name, $helper)
 {
      if(!isset($this->helpers->$name, $helper))
      {
           $this->load_class($helper);
           // tack on a helper..
           $this->helpers->$name = new $helper($this);
      }
 }

 private function load_class($class) 
 {
     if( !class_exists($class, false) ) {
          $class_file = PATH_SOME_WHERE . $class . '.php';
          require $class_file;
     }
 } 
```

# svg - WinRT 将矢量图像用于徽标

> ID：14867435
> 
> 赞同：0
> 
> 时间：2013-02-14T03:40:52.553
> 
> 标签：svg, windows-runtime, graphical-logo

虽然我在 Microsoft 指南中阅读了我们应该更喜欢 SVG 图像而不是光栅图像，但我似乎无法在任何地方找到如何将它们用于清单中的徽标。有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T05:30:00.407

正如 Hans 已经提到的，仅支持 PNG 和 JPEG 图像。[这](http://msdn.microsoft.com/en-us/library/windows/apps/hh846296.aspx)是有关此问题的官方文档，其中还包含有关图像大小的完整信息。

# javascript - 标记未显示在 googlemap 中 - 奇怪的错误

> ID：14867444
> 
> 赞同：0
> 
> 时间：2013-02-14T03:42:00.610
> 
> 标签：javascript, google-maps, maps, google-api

我正在尝试使用 google api 让标记显示在样式化的 googlemap 中。

如果我这样尝试：

```
 function initialize() {
    var mapOptions = {
      zoom: 8,
      center: new google.maps.LatLng(51.49079, -0.10746),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new GMaps({
                div: "#map1",
                lat: 41.895465,
                lng: 12.482324,
                zoom: 1, 
                zoomControl : true,
                zoomControlOpt: {
                    style : "SMALL",
                    position: "TOP_LEFT"
                },
                panControl : true,
                streetViewControl : false,
                mapTypeControl: false,
                overviewMapControl: false
            });

    var styles = [
                    {
                    featureType: "road",
                    stylers: [
                          { "hue": "#ff0000" },
                          { "lightness": -11 },
                          { "saturation": -5 }
                  ]
                }, {
                    featureType: "road",
                        stylers: [
                         { "saturation": -26 }
                  ]
                }
            ];

    map.addStyle({
                styledMapName:"Styled Map",
                styles: styles,
                mapTypeId: "map_style"  
            });
    map.setStyle("map_style");

    // Add 5 markers to the map at random locations
    var southWest = new google.maps.LatLng(-31.203405, 125.244141);
    var northEast = new google.maps.LatLng(-25.363882, 131.044922);

    //var bounds = new google.maps.LatLngBounds(southWest, northEast);
    //map.fitBounds(bounds);

    var cities = [
    {
      name: 'London',
      position: new google.maps.LatLng(51.49079,-0.10746),
      info: 'Bewohner: 7,556,900'
    },
    {
      name: 'Paris',
      position: new google.maps.LatLng(48.856667,2.350987),
      info: 'Bewohner: 2,193,031'
    },
    {
      name: 'Berlin',
      position: new google.maps.LatLng(52.523405,13.4114),
      info: 'Bewohner: 3,439,100'
    }        
  ];

  cities.forEach(function(element, index, array) {

    var marker = new google.maps.Marker({
      position: element.position,
      map: map[0],
      title: element.name
    });    

    var infoWindow = new google.maps.InfoWindow({
      content: element.info
    });

    google.maps.event.addListener(marker, 'click', function() {
      infoWindow.open(map, marker);
    });
  });

  }

  google.maps.event.addDomListener(window, 'load', initialize); 
```

我在萤火虫中没有错误，但没有出现任何标记。

如果我改变这个：

```
var marker = new google.maps.Marker({
      position: element.position,
      map: map[0], 
```

至

```
map: map, 
```

我收到一条错误消息，指出属性映射的值无效。

我的代码中的错误在哪里？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:04:22.817

代替 GMaps 使用 google.maps.Map 创建地图试试这个链接。这可能会对您有所帮助。

[https://developers.google.com/maps/documentation/javascript/overlays?hl=en#Markers](https://developers.google.com/maps/documentation/javascript/overlays?hl=en#Markers)

编辑了你的代码

```
var marker;
  var map;
  function initialize() {
    var mapOptions = {
                      zoom: 4,
                      center: new google.maps.LatLng(51.49079, -0.10746),
                      mapTypeId: google.maps.MapTypeId.ROADMAP
                    };
    map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);

    var styles = [
                {
                featureType: "road",
                stylers: [
                      { "hue": "#ff0000" },
                      { "lightness": -11 },
                      { "saturation": -5 }
              ]
            }, {
                featureType: "road",
                    stylers: [
                     { "saturation": -26 }
              ]
            }
        ];
    map.setOptions({styles: styles});

    var cities = [
                {
                  name: 'London',
                  position: new google.maps.LatLng(51.49079,-0.10746),
                  info: 'Bewohner: 7,556,900'
                },
                {
                  name: 'Paris',
                  position: new google.maps.LatLng(48.856667,2.350987),
                  info: 'Bewohner: 2,193,031'
                },
                {
                  name: 'Berlin',
                  position: new google.maps.LatLng(52.523405,13.4114),
                  info: 'Bewohner: 3,439,100'
                }        
              ];

    for(var i=0;i<cities.length;i++)
    {
        var element=cities[i];
        var marker = new google.maps.Marker({
          position: element.position,
          map: map,
          title: element.name
        });    

        var infoWindow = new google.maps.InfoWindow({
          content: element.info
        });

        google.maps.event.addListener(marker, 'click', function() {
          infoWindow.open(map, marker);
        });
    }

  } 
```

# nagios - 在 nagios 上设置被动检查

> ID：14867445
> 
> 赞同：0
> 
> 时间：2013-02-14T03:42:02.257
> 
> 标签：nagios

你好板这个问题可能有点干净和绿色但是，

我一直在尝试设置 Nagios NSCA 以在本地 ubuntu 盒子上作为原型进行被动检查。

对于知情人士，我的 nsca 监听 5667 和 send_nsca 位于同一台 ubuntu 计算机 (localhost 127.0.0.1) 上。我一直在阅读和测试对象定义和服务模板，但是当我在修改后尝试访问 nagios Web 时遇到配置错误。

我希望获得关于如何创建服务（目录/配置）以在 Nagio3 中为 ubuntu 处理被动检查的更清晰的说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T17:38:42.643

有几件事情需要考虑，首先 localhost 被定义为主机，其次检查实际上存在，就像任何其他检查一样，但是使用实际上不做任何事情的命令，例如..我已经创建一个passiveservices.cfg 文件，其服务定义如下：

```
define service{
    use                     generic-service,service-pnp
    host_name               Server1,Server2
    service_description     Uptime
    active_checks_enabled   1
    passive_checks_enabled  1
    check_command           check_null
    check_freshness         1
    check_period            none
    }

define service{
    use                     generic-service,service-pnp
    host_name               Server1,Server2
    service_description     Drive space
    active_checks_enabled   1
    passive_checks_enabled  1
    check_command           check_null
    check_freshness         1
    check_period            none 
```

请注意，检查命令是 check_null，它实际上并没有做任何事情.. 而passive_checks_enabled 是 1。

Nagios.cfg 中有两行需要启用：

接受被动主机检查接受被动服务检查

启用以下两行也是一个好主意

check_service_freshness check_host_freshness

如果服务器在设定的时间后没有轮询，它将触发一个脚本（我在我的配置中触发了一封电子邮件）

最后，启用以下两行：

log_external_commands log_passive_checks

如果这不起作用，他们将帮助调试。它在 Ubuntu 上写入 /var/log/syslog （嗯，它在我的）..

# java - Java入门：从列表中找出最大的数

> ID：14867446
> 
> 赞同：3
> 
> 时间：2013-02-14T03:42:01.983
> 
> 标签：java

我正在尝试编写一个提示用户输入三个数字的代码，并且程序应该说哪个数字是最大的。我不想在 if 和 else if 语句中做一堆“System.out.print”。根据调试器的错误是“greatest”和“greatest1”尚未初始化。

```
import java.util.Scanner;

public class number1
{

    public static void main(String[] args)
    {

        double a, b, c;
        double greatest, greatest1;

        Scanner keyboard = new Scanner(System.in);
        System.out.print("Enter one number :");
        a  = keyboard.nextDouble();
        System.out.print("Enter another number :"); 
        b  = keyboard.nextDouble();
        System.out.print("Enter a third number :");
        c  = keyboard.nextDouble();

        if(a > b && a > c) {
            greatest = a;
        } //end of if statement

        else if(b > a && b > c){   
            greatest = b;
        }

        else if(c > a && c > b) { 
            greatest = c;
        }
        else if(a==b && c < a) {
            greatest = a;
            greatest1 = b;

        }

        else if(a==c && b < a) {
            greatest = a;
            greatest1 = c;
        }

        else if(b==c && a < b) {
            greatest = b;
            greatest1 = c;
        }

        else {
            System.out.print("All of the numbers are greatest");
        }
        System.out.print("The greatest number is: " +greatest+ "and" +greatest1);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T03:50:34.437

因为，其他人已经指出了问题所在。我要指出的是，您可以通过以下方式找到三个数字中的最大数字：

```
biggest = Math.max(a, Math.max(b,c)); 
```

您可以替换代码中的所有条件。

想象一下，您想要一组整数的最大值（*例如，*一个整数数组）。您可以执行以下操作：

```
biggest = array[0]; // initialize max to the first number of the set 
```

遍历集合并检查最大值：

```
for(int i = 1; i < array.size; i++) 
   biggest = Math.max(biggest,array[i]); 
```

或使用 Java 流：

```
Arrays.stream(array).max().getAsDouble() 
```

您还可以制作自己的 max 函数，因为您的情况可以如下：

```
public double maxDouble (double a, double b){
       if(a > b) return a;
       else return b;
} 
```

您可以[在此处](https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html)阅读有关 Math 类及其方法的更多详细信息（例如[public static double max(double a,double b)](https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#max-double-double-)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T03:45:14.937

要解决此问题，您需要确保`greatest`并`greatest1`始终分配给一个值。如果它进入这个代码块会发生什么：

```
if (a > b && a > c) {
    greatest = a;
} //end of if statement 
```

`greatest1`不会被分配，所以当它在最后一条语句中打印出来时

```
System.out.print("The greatest number is: " + greatest + "and" + greatest1); 
```

它给你一个错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T04:10:29.440

从键盘输入并创建一个双数组，然后尝试下面的代码。

```
double dblArray[] = {24.0,40.2,38.9};
Arrays.sort(dblArray);

System.out.print("The greatest number is: " +dblArray[dblArray.length-1]+ " and " +dblArray[dblArray.length-2]); 
```

您可以打印 n 个最大的数字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T03:53:45.730

另一个提示：如果`enter`在输入每个数字后按，则应`\n`在阅读每个数字后阅读换行符。

例如

```
a  = keyboard.nextDouble(); 
```

应改为

```
a  = keyboard.nextDouble();
keyboard.nextLine(); 
```

等等

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T03:45:21.573

作为一般提示：初始化为 0：

```
double greatest = 0;
double greatest1 = 0; 
```

但请注意，在您的情况下，这表明您的代码逻辑存在错误。修正该逻辑，否则结果将为 0，这可能是错误的。

# javascript - jQuery动画marginRight不起作用，但marginLeft工作得很好

> ID：14867447
> 
> 赞同：7
> 
> 时间：2013-02-14T03:42:14.853
> 
> 标签：javascript, jquery, html, css

我想使用通过单击链接激活的动画 marginRight 属性使背景图像向左滚动，但它不起作用。奇怪的是，当我使用 marginLeft 它工作时，它只是倒退。这是我的[测试站点](http://k7.io-web.com/home.aspx)，这是我的非工作 jQuery 代码：（我再次尝试让背景图像向左滚动）另外请告诉我是否可以发布其他任何内容以使您更轻松。

```
<script type="text/javascript">
jQuery(document).ready(
function(){
    jQuery('#homelink').click(
        function(){
            jQuery('#SiteBackground').animate({
                marginRight : "1000px"
            },10000);
        });
});
</script> 
```

和我的html：（#SiteBackground 是我想向左移动的，#homelink 是激活器）

```
<img id="SiteBackground" src="/jscottsavage/media/Main/Backdrop.jpg" style="position: absolute; left: 0px; top: 0px; z-index: -1; height: 384px;">

<div id="homelink">Home</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T04:06:28.607

我想出了一个办法来做到这一点。我不确定它是否正确/正确，但它适用于 Firefox、Chrome 和 IE 7+，所以我将使用它，直到找到更好的方法。基本上你所做的就是将“marginRight”更改为“marginLeft”，并在数字前面添加一个 - 符号，如下所示。

```
<script type="text/javascript">
jQuery(document).ready(
     function(){
        jQuery('#homelink').click(
    function(){
        jQuery('#SiteBackground').animate({
            marginLeft : "-1000px"
        },10000);
    });
});
</script> 
```

# jpa - JPA（使用 EclipseLink）性能问题

> ID：14867448
> 
> 赞同：0
> 
> 时间：2013-02-14T03:42:40.480
> 
> 标签：jpa, jpa-2.0, eclipselink

我刚刚开始使用 JPA（使用 EclipseLink 实现）。我有一个非常简单的选择查询，比如

(1) entityManager.find(SomeEntity.class, SomeEntityPK); (2) entityManager.createQuery("Select x from SomeEntity x where x.isDefault = true").getResultList();

SomeEntity 表中的记录数约为 50（非常小的表）。

查询 (1) 最初需要 3 秒，但随后的命中只需 200 毫秒。显然缓存在起作用。然而，Query (2) 的所有调用都需要 2 秒——想知道为什么不使用缓存。我了解查询（那些不使用 Id 或索引的）总是命中数据库，并且从缓存中使用实体关系。

有什么方法可以提高性能吗？一个简单的 JDBC 选择只需 <300 毫秒即可获取 Query (2) 的数据。

[更新] 我想我已经解决了这个问题。表“SomeEntity”中的列之一是 Oracle XMLType。由于某些问题，我不得不删除此字段，而是使用 CLOB 字段来存储 xml 数据。瞧，JPA 突然开始缓存查询结果。虽然我不知道 JPA 不缓存 XMLType 的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:01:43.387

EclipseLink has a number of caches at different levels that can be used. I think the query cache is what you might be looking for described here [http://docs.oracle.com/cd/E25054_01/core.1111/e10108/toplink.htm#BCGEGHGE](http://docs.oracle.com/cd/E25054_01/core.1111/e10108/toplink.htm#BCGEGHGE) And explained a bit here [http://wiki.eclipse.org/Introduction_to_EclipseLink_Queries_%28ELUG%29#How_to_Cache_Query_Results_in_the_Query_Cache](http://wiki.eclipse.org/Introduction_to_EclipseLink_Queries_%28ELUG%29#How_to_Cache_Query_Results_in_the_Query_Cache)

# django - Django 错误“渲染时捕获 SyntaxError：无效语法”

> ID：14867450
> 
> 赞同：0
> 
> 时间：2013-02-14T03:42:59.713
> 
> 标签：django, syntax

我正在通过本教程创建一个 django 应用程序 [https://docs.djangoproject.com/en/dev/intro/tutorial04/](https://docs.djangoproject.com/en/dev/intro/tutorial04/) 我正在尝试访问管理页面，但它显示了这个我不知道如何修复的错误.

```
TemplateSyntaxError at /admin/
Caught SyntaxError while rendering: invalid syntax (views.py, line 34)Request Method: GET 
Request URL: http://cat.pythonanywhere.com/admin/ 
Django Version: 1.3.5 
Exception Type: TemplateSyntaxError 
Exception Value: Caught SyntaxError while rendering: invalid syntax (views.py, line 34) 
Exception Location: /home/cat/mysite/myapp/urls.py in <module>, line 2 
Python Executable: /usr/local/bin/uwsgi 
 Python Version: 2.7.3 
Python Path: ['/var/www', 
```

我的views.py是：

```
from django.http import HttpResponse ,HttpResponseRedirect
from mysite.myapp.models import Poll
from django.http import Http404
from django.template import Context, loader
from django.shortcuts import render, get_object_or_404
from django.core.urlresolvers import reverse
from polls.models import Choice, Poll

def index(request):
    return HttpResponse("Hello, world. You're at the poll index.")

def detail(request, poll_id):
    return HttpResponse("You're looking at poll %s." % poll_id)

def results(request, poll_id):
    return HttpResponse("You're looking at the results of poll %s." % poll_id)

def vote(request, poll_id):
    p = get_object_or_404(Poll, pk=poll_id)
    try:
        selected_choice = p.choice_set.get(pk=request.POST['choice'])
    except (KeyError, Choice.DoesNotExist):
        # Redisplay the poll voting form.
        return render(request, 'myapp/detail.html', {
            'poll': p,
            'error_message': "You didn't select a choice.",
        })
    else:
        selected_choice.votes += 1
        selected_choice.save()
        # Always return an HttpResponseRedirect after successfully dealing
        # with POST data. This prevents data from being posted twice if a
        # user hits the Back button.
        return HttpResponseRedirect(reverse('myapp:results', args=(p.id,))))

def index(request):
    latest_poll_list = Poll.objects.order_by('-pub_date')[:5]
    template = loader.get_template('myapp/index.html')
    context = Context({
    'latest_poll_list': latest_poll_list,
    })
    return HttpResponse(template.render(context))

def detail(request, poll_id):
    poll = get_object_or_404(Poll, pk=poll_id)
    return render(request, 'myapp/detail.html', {'poll': poll})
def results(request, poll_id):
    poll = get_object_or_404(Poll, pk=poll_id)
    return render(request, 'myapp/results.html', {'poll': poll}) 
```

第 34 行在这里

```
 return HttpResponseRedirect(reverse('myapp:results', args=(p.id,)))) 
```

你能帮我么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:46:53.687

```
 return HttpResponseRedirect(reverse('results', args=p.id)) 
```

# go - 什么是布局 Go 项目的明智方法

> ID：14867452
> 
> 赞同：120
> 
> 时间：2013-02-14T03:43:08.640
> 
> 标签：go, project

我有一个开始变得更加复杂的 go 项目，并希望以一种减少痛苦的方式布置文件系统。

有没有一些很好的例子说明什么是有意义的？

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2013-02-14T08:32:40.560

2013 年 5 月更新：官方文档位于“[代码组织](http://golang.org/doc/code.html#Organization)”部分

> Go 代码必须保存在**工作区**中。
> 工作区是一个目录层次结构，其根目录有三个目录：

*   `src`包含组织成包的 Go 源文件（每个目录一个包），
*   `pkg`包含包对象，并且
*   `bin`包含可执行命令。

> 构建源包并将生成的`go tool`二进制文件安装到`pkg`和`bin`目录。
> 
> 该`src`子目录通常包含多个版本控制存储库（例如 Git 或 Mercurial），用于跟踪一个或多个源包的开发。

```
bin/
    streak                         # command executable
    todo                           # command executable
pkg/
    linux_amd64/
        code.google.com/p/goauth2/
            oauth.a                # package object
        github.com/nf/todo/
            task.a                 # package object
src/
    code.google.com/p/goauth2/
        .hg/                       # mercurial repository metadata
        oauth/
            oauth.go               # package source
            oauth_test.go          # test source 
```

* * *

2014 年 7 月更新：参见[Ben Johnson的“](https://medium.com/@benbjohnson) [**Structuring Applications in Go**](https://medium.com/@benbjohnson/structuring-applications-in-go-3b04be4ff091) ”

该文章包括以下提示：

### 将二进制文件与应用程序分开

> 将`main.go`文件和我的应用程序逻辑组合在同一个包中会产生两个后果：
> 
> *   它使我的应用程序无法用作库。
> *   我只能拥有一个应用程序二进制文件。
> 
> 我发现解决此问题的最佳方法是在我的项目中简单地使用“<code>cmd”目录，其中每个子目录都是应用程序二进制文件。

```
camlistore/
  cmd/
    camget/
      main.go
    cammount/
      main.go
    camput/
      main.go
    camtool/
      main.go 
```

### 图书馆驱动开发

> 将`main.go`文件移出根目录允许您从库的角度构建应用程序。您的应用程序二进制文件只是应用程序库的客户端。
> 
> 有时您可能希望用户以多种方式进行交互，因此您创建了多个二进制文件。
> 例如，如果您有一个“<code>adder”包，可以让用户将数字相加，您可能希望发布命令行版本和 Web 版本。
> 您可以通过像这样组织项目来轻松做到这一点：

```
adder/
  adder.go
  cmd/
    adder/
      main.go
    adder-server/
      main.go 
```

> 用户可以使用省略号通过“go get”安装您的“adder”应用程序二进制文件：

```
$ go get github.com/benbjohnson/adder/... 
```

> 瞧，您的用户安装了“<code>adder”和“<code>adder-server”！

### 不要对子包发疯

> 通常我的项目类型都非常相关，因此从可用性和 API 的角度来看它更适合。
> 这些类型还可以利用它们之间的未导出调用，从而保持 API 小而清晰。
> 
> 1.  在每个文件中将相关类型和代码组合在一起。如果您的类型和功能组织良好，那么我发现文件往往在 200 到 500 SLOC 之间。这听起来可能很多，但我发现它很容易导航。1000 SLOC 通常是我单个文件的上限。
> 2.  在文件顶部组织最重要的类型，并在文件底部添加重要性递减的类型。
> 3.  一旦你的应用程序开始超过 10,000 SLOC，你应该认真评估它是否可以分解成更小的项目。

注意：最后的做法并不总是好的：

> 抱歉，我不能同意这种做法。
> 将类型与文件分离有助于代码管理、可读性、可维护性和可测试性。
> 它还可以确保单一责任和遵循开放/封闭原则......<br> 不允许循环依赖的规则是强制我们有一个清晰的包结构。

* * *

（2013 年 2 月的替代方案，`src`仅关于）您可以在“ [GitHub 代码布局](http://code.google.com/p/jmcvetta-contrib/wiki/GithubCodeLayout)
” 中找到说明的经典布局：

> 该应用程序和两个库都位于 Github 上，每个库都位于自己的存储库中。
> `$GOPATH`是项目的根目录 - 您的每个 Github 存储库都将在下面的几个文件夹中检出`$GOPATH`。
> 
> 您的代码布局如下所示：

```
$GOPATH/
    src/
        github.com/
            jmcvetta/
                useless/
                    .git/
                    useless.go
                    useless_test.go
                    README.md
                uselessd/
                    .git/
                    uselessd.go
                    uselessd_test.go
                    README.md 
```

> 下的每个文件夹`src/github.com/jmcvetta/`都是单独 git checkout 的根目录。

不过，在这个[reddit 页面](http://www.reddit.com/r/golang/comments/18awol/go_project_organization/)中，这引起了一些批评：

> 我强烈建议不要按照你的方式构建 repo，它会破坏“ `go get`”，这是 Go 中最有用的东西之一。
> 为知道 Go 的人编写代码要好得多，因为他们最有可能是编译它的人。
> 而对于那些不知道的人，他们至少会对这种语言有所了解。
> 
> 将主包放在 repo 的根目录中。
> 将资产放在子目录中（以保持整洁）。
> 将代码的主体保留在一个子包中（以防有人想在您的二进制文件之外重用它）。
> 在 repo 的根目录中包含一个安装脚本，以便于查找。
> 
> 下载、构建、安装和设置仍然只有两步过程：
> 
> *   " `go get <your repo path>`": 下载并安装 go 代码，带有资产的子目录
> *   `$GOPATH/<your repo path>/setup.sh`：将资产分配到正确的位置并安装服务

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-14T06:36:22.937

我假设对于“项目”，您的意思不是 Go 包，而是您开发的软件。[否则，您可以在这里](http://golang.org/doc/code.html)和[这里](https://stackoverflow.com/questions/9985559/organizing-a-multiple-file-go-project)获得帮助。然而，为 Go 编写包并没有太大的不同：使用包，为每个包创建一个文件夹并将这些包组合到您的应用程序中。

要建立自己的观点，您可以查看 github 上的热门 Go 存储库：[https](https://github.com/trending/go) ://github.com/trending/go 。著名的例子是[cayley](https://github.com/cayleygraph/cayley) 和[zeus](https://github.com/burke/zeus)。

最流行的方案可能是在自己的目录中拥有一个主 Go 文件和许多模块和子模块。如果您有许多元文件（文档、许可证、模板等），您可能希望将源代码放入子目录中。这就是我到目前为止所做的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-29T18:54:56.720

[Golang 的作者推荐了一种方法](http://golang.org/doc/code.html#Organization)，它定义了如何布局代码以最好地使用 go 工具并支持源代码控制系统

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-11T07:40:25.653

您可能还应该看看这个 repo。它展示了很多如何构建 Go 应用程序的想法：[https ://github.com/golang-standards/project-layout](https://github.com/golang-standards/project-layout)

# java - Android - 刷新选项菜单而不调用 invalidateOptionsMenu()

> ID：14867458
> 
> 赞同：18
> 
> 时间：2013-02-14T03:44:20.023
> 
> 标签：java, android, options-menu

您好 Android 开发者，

我看到很多关于选项菜单更新的问题。但是，每个答案都说我必须打电话`invalidateOptionsMenu()`。

我的问题是，有没有其他方法可以在不调用该方法的情况下更新选项菜单`invalidateOptionsMenu()`？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-14T10:37:17.347

```
@Override
    public boolean onPrepareOptionsMenu(Menu menu) {

        menu.clear(); // Clear the menu first

            /* Add the menu items */

        return super.onPrepareOptionsMenu(menu);
    } 
```

这解决了更新 OptionsMenu 而不调用`invalidateOptionsMenu()`

# c# - 如何比较linq中的可为空变量？

> ID：14867459
> 
> 赞同：0
> 
> 时间：2013-02-14T03:44:33.650
> 
> 标签：c#, linq

我尝试通过 linq 选择一些数据，但系统显示此错误

> “System.DateTime”类型的表达式不能用于“Boolean Equals(System.Object)”方法的“System.Object”类型参数

我的 WorkingResults.EffectiveDate 是 DateTime？但我的日期变量是 DateTime。如何更改我的代码来解决这个问题？

```
 WorkingResult workingResultObj = (from workingResult in this.DataWorkspace.ApplicationData.WorkingResults
where workingResult.EmployeeCode == employeeCode  && workingResult.EffectiveDate.Equals(date)                                         
select workingResult).FirstOrDefault(); 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T03:51:03.783

好吧，有几个解决方法。首先，您可以将其设为 DateTime：

```
workingResult.EffectiveDate.GetValueOrDefault(DateTime.MinValue).Equals(date) 
```

我不知道什么是有效日期。或者，您可以使用 Object.Equals：

```
Object.Equals(workingResult.EffectiveDate, date) 
```

这可能不会给你预期的结果。如果您始终知道生效日期是有价值的，那么您可以使用@spajce 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T03:49:45.830

您可以使用[.HasValue](http://msdn.microsoft.com/en-us/library/sksw8094.aspx)和它必须喜欢

```
...
where workingResult.EmployeeCode == employeeCode && 
(workingResult.EffectiveDate.HasValue && 
 workingResult.EffectiveDate.Value.Date == date.Date).FirstOrDefault(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T03:54:29.067

```
 WorkingResult workingResultObj = 
  (
      from workingResult 
      in this.DataWorkspace.ApplicationData.WorkingResults
      where 
            workingResult.EffectiveDate.HasValue
            && workingResult.EmployeeCode == employeeCode  
            && workingResult.EffectiveDate.Value == date                                         
      select workingResult
  ).FirstOrDefault(); 
```

# twitter-bootstrap - Twitter Bootstrap：多个响应式可折叠导航？

> ID：14867460
> 
> 赞同：4
> 
> 时间：2013-02-14T03:44:38.267
> 
> 标签：twitter-bootstrap, navigation, responsive-design

我正在使用 Twitter 引导程序。我希望有两个（或更多）导航，当在移动设备上查看时，它们会折叠成一个下拉列表。

这可以在页面上轻松完成一次，但我无法弄清楚如何拥有多个响应式/可折叠导航。

此代码用于创建一个在移动设备上折叠的导航：

```
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">groups</a>

<div class="nav-collapse">
  <ul class="nav">
    <li><a href="#">Nav Link</a></li>
    <li><a href="#">Nav Link</a></li>
    <li><a href="#">Nav Link</a></li>
    <li><a href="#">Nav Link</a></li>
  </ul>
</div> 
```

但是我怎样才能进行第二次导航呢？

我尝试复制此代码并更改`data-target=".nav-collapse"`为，`data-target=".nav-collapse2"`但这不起作用。

Twitter Bootstrap 是否提供在页面上拥有 2 个或更多响应式导航的能力？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T05:04:17.417

You're on the right track.

`.nav-collapse` is used internally by bootstrap to actually make the navigation collapse responsively. Instead of using `.nav-collapse2` as a `data-target`, use your own class/id (in addition to using `.nav-collapse`)

Here's an example:

```
<a class="btn btn-navbar" data-toggle="collapse" data-target=".col1">groups</a>
<a class="btn btn-navbar" data-toggle="collapse" data-target=".col2">groups2</a>

<div class="nav-collapse col1">
    <ul class="nav">
        <li><a href="#">Nav Link</a></li>
        <li><a href="#">Nav Link</a></li>
    </ul>
</div>
<div class="nav-collapse col2">
    <ul class="nav">
        <li><a href="#">Nav Link2</a></li>
        <li><a href="#">Nav Link2</a></li>
   </ul>
</div> 
```

Here's a [fiddle](http://jsfiddle.net/rz85X/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T14:37:57.390

我一开始和@gurch101 说的一样，然后用它来隐藏另一个菜单。

```
// Only show one navigation at a time
jQuery(function($){
  $('.col1').on('show.bs.collapse', function(){
    var otherNav = $('.col2');
    if (otherNav.is(':visible')) {
      otherNav.collapse('hide');
    }
  });
  $('.col2').on('show.bs.collapse', function(){
    var otherNav = $('.col1');
    if (otherNav.is(':visible')) {
      otherNav.collapse('hide');
    }
  });
}); 
```

# php - Magento 检索客户 ID

> ID：14867462
> 
> 赞同：0
> 
> 时间：2013-02-14T03:45:04.160
> 
> 标签：php, magento

我尝试了各种方法来获取 customerID，但变量中存储了一个空值。请指教 ：）

下面是我尝试过的事情的残余。该文件位于根目录中。

```
require_once '/home/ab71714/public_html/app/Mage.php';
//Mage::app("default");

Mage::app()->setCurrentStore(Mage_Core_Model_App::ADMIN_STORE_ID);

/* if(Mage::getSingleton('customer/session')->isLoggedIn()) {
     $customerData = Mage::getSingleton('customer/session')->getCustomer();
      echo $customerData->getId();
 } */

 if(Mage::getSingleton('customer/session')->isLoggedIn()) {
    $customerId = Mage::getModel('customer/session')->getCustomer()->getId();
} else {
    echo 'Not logged In';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T04:58:47.140

```
require "/home/ab71714/public_html/app/Mage.php";
umask(0);
Mage::app();

$session = Mage::getSingleton('customer/session');
if($session->isLoggedIn()) {
    print_r($session);
    $customerId = $session->getCustomer()->getId();
} else {
    echo 'Not logged In';
} 
```

了解更多信息：

[http://ka.lpe.sh/2011/06/19/magento-get-customer-details-customer-id-name-email/](http://ka.lpe.sh/2011/06/19/magento-get-customer-details-customer-id-name-email/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-03T06:49:18.667

```
if(Mage::getSingleton('customer/session')->isLoggedIn()) {
    $customerData = Mage::getSingleton('customer/session')->getCustomer();
    echo $customerData->getId();
} 
```

# android - 数据库值无法在 ListView 中显示

> ID：14867463
> 
> 赞同：0
> 
> 时间：2013-02-14T03:45:13.210
> 
> 标签：android, sqlite, listview

我正在创建简单的数据库和我显示给 ListView 的数据库值，但我的 ListView 无法显示我的数据库值

这是我创建数据库的代码

```
public class MyDb extends SQLiteOpenHelper {
    private static final String DATABASE_NAME = "MyDb.db";
       private SQLiteDatabase myDataBase; 
    public MyDb(Context context) {
        super(context, DATABASE_NAME, null, 1);
    }

    public void createTable(SQLiteDatabase db){
        db.execSQL("DROP TABLE IF EXISTS users");
        db.execSQL("CREATE TABLE if not exists users (id_user INTEGER PRIMARY KEY AUTOINCREMENT, username VARCHAR);");

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
    }
    public ArrayList<ArrayList<Object>> getAllRows(SQLiteDatabase db) {
        ArrayList<ArrayList<Object>> dataArray = new ArrayList<ArrayList<Object>>();
        Cursor cur;

        final String ROW_ID = "id_user";
        final String ROW_NAME = "username";
        try {
            cur = db.query("users", new String[] { ROW_ID, ROW_NAME }, null, null, null, null, null);
            cur.moveToFirst();
            if (!cur.isAfterLast()) {
                do {
                    ArrayList<Object> dataList = new ArrayList<Object>();
                    dataList.add(cur.getString(0));
                    dataList.add(cur.getString(1));

                    dataArray.add(dataList);

                } while (cur.moveToNext());

            }

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            Log.e("DEBE ERROR", e.toString());
        }
        return dataArray;

    }
     public void insert(String table, ContentValues values) throws SQLException {
            myDataBase.insert(table, null, values);
        }

} 
```

这是我向 ListView 显示数据库值的代码

```
public class DbScriptActivity extends Activity {

    private MyDb dbHelper;
    SQLiteDatabase db;
    Cursor customAdapter;
    ListView list;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_db_script);
        dbHelper = new MyDb (this);
        db = dbHelper.getWritableDatabase();
        dbHelper.createTable(db);
        //dbHelper.openDataBase();
        //ListView list = (ListView)findViewById(R.id.list);
        list= (ListView)findViewById(R.id.list);
        getData();

        Button btn = (Button)findViewById(R.id.button1);
        btn.setOnClickListener(new View.OnClickListener() {

            ContentValues values = new ContentValues();
            public void onClick(View v) {
                LayoutInflater inflater = DbScriptActivity.this.getLayoutInflater();
                final View v1 =inflater.inflate(R.layout.dialog , null) ;

                new AlertDialog.Builder(DbScriptActivity.this)
                    .setTitle("input your name:")
                    .setView(v1)
                    .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dlg, int sumthin) {
                            EditText name= (EditText)v1.findViewById(R.id.name);

                            String yourname = name.getText().toString();
                            values.put("username",yourname);

                           Log.v("aaaa", yourname);

                            db.insert("users",null,values);
                        }
                    })
                    .show();

            }
        }); 
    }

    private void getData() {

        String[] name = { "" };
        ArrayList<ArrayList<Object>> data = dbHelper.getAllRows(db) ;
        name = new String[data.size()];
        for (int i = 0; i < data.size(); i++) {

            ArrayList<Object> row = data.get(i);
            name[i] = row.get(1).toString();

        }
        ArrayAdapter<String> aname = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, name);
        list.setAdapter(aname);

    }
} 
```

这是我的 xml 文件，用于在我的 ListView 中查看数据库值

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".DbScriptActivity" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:text="Register Name" />

    <ListView
        android:id="@+id/list"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/button1" >
    </ListView>

</RelativeLayout> 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:36:57.713

您可以使用 SimpleCursorAdapter 将数据加载到 ListView 中。这是很好的教程。

[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

# c++ - 使用 swap 按字母顺序排列字符串数组

> ID：14867470
> 
> 赞同：0
> 
> 时间：2013-02-14T03:46:05.223
> 
> 标签：c++

我正在为我的编程课做一个作业：实施课堂上讨论的平均成绩程序。成绩信息将在一个输入文件中，其中每个学生的信息分布在两行中：第一行是格式为 Firstname Middlename Lastname 的学生姓名，第二行是学生的成绩，它们是整数。（一个学生可能没有中间名。）最多有 20 名学生，每个学生有 10 个年级。程序应向用户请求输入文件的名称。对于每个学生，计算他们的总体平均分（假设每个作业的分数相同）。将信息输出到屏幕上，每个学生一行，每行是他们的“姓名”（姓氏、名字中间名首字母、10 个成绩和平均值，按姓氏排序。平均值应保留小数点后两位并显示（即 3.1 将输出为 3.10）。正如所讨论的那样，您应该使用三个数组来解决这个问题，并使用一组合理的函数。这就是我到目前为止所拥有的。

```
#include <iostream>
#include <string>
#include <fstream>
#include <climits>
#include <iomanip>

using namespace std;

const int NGrades= 10;
const int maxStudents=20;

string reformat(string& s);

int main(){

int num_of_students = 0;
string fullName;
double sum=0;

string names[maxStudents];
int grades[maxStudents][NGrades];
double average[maxStudents];

string fileName;
ifstream inputFile;

cout<< "Please type the file name including extension(such as .txt)."<<endl;
cout<< "If your file is in a different directory please specify the path:"; //asking          user for file name. seperated into two cout statments for readibility
getline(cin,fileName);
inputFile.open(fileName.c_str());

if (!inputFile){                                   //produce an error if the file name is invalid
 cout<<"Cannot open "<<fileName<<"."<<endl;
 return 1;
}

while(getline(inputFile, fullName)){
    names[num_of_students]=reformat(fullName);
    cout << setw(20)<< names[num_of_students]<<" "<< setw(20);
    for (int i = 0; i < NGrades; ++i){
        inputFile >> grades[num_of_students][i];
        cout <<setw(4)<<grades[num_of_students][i];
        sum = sum + grades[num_of_students][i];
    }
    average[num_of_students]= sum/NGrades;
    sum=0;
    cout <<setw(15);
    cout<< fixed << showpoint;
    cout << setprecision(2);
    cout <<average[num_of_students]<< endl;
    inputFile.ignore(INT_MAX, '\n');
    ++num_of_students;
 }

 inputFile.close();

 return 0;
 }
 string reformat(string& s){
    int pos, posTwo;
    string first_Middle;
    string lastname;
    string finished;
    pos = s.find_first_of(' ');
    first_Middle=s.substr(0,pos+2);
    posTwo=s.find_first_of(' ', pos+1);
    lastname=s.substr(posTwo+1);
    finished=lastname+ ", "+first_Middle;
    return finished;
 } 
```

我现在需要做的是使用交换按姓氏的字母顺序排列名称。我不允许使用结构或类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T07:28:12.533

首先阅读： [http ://en.wikipedia.org/wiki/Selection_sort](http://en.wikipedia.org/wiki/Selection_sort)

您应该将所有数据存储在三个数组容器中；然后，使用排序算法，您的程序应该正确打印输出。

提出更具体的问题，例如如何比较字符串。如果有人重写您的代码，您将无法获得知识。

# python - 在 C 中复制 python 字符串行为

> ID：14867472
> 
> 赞同：2
> 
> 时间：2013-02-14T03:46:13.713
> 
> 标签：python, c, arrays, string, char

我正在尝试学习 C，我认为这样做的一个好方法是重新处理我在 python 中所做的一些编程实践问题。我目前正在研究[这个](http://programmingpraxis.com/2013/01/01/happy-new-year/)。

我的解决方案：

```
def main():
    nums = ["10", "9", "8", "7", "6", "5", "4", "3", "2", "1"]
    ops = ["+", "-", "*", "/", ""]

    recursive(nums, ops, "", 0)

def recursive(nums, ops, current_str, num_ind):
    if num_ind == len(nums)-1:
        # print current_str + nums[num_ind]
        if eval(current_str + nums[num_ind]) == 2013:
            print current_str + nums[num_ind]
        return 0
    else: 
        current_str = current_str + nums[num_ind]
        num_ind += 1
        for i in range(len(ops)):
            recursive(nums, ops, current_str+ops[i], num_ind) 
```

Python 在执行递归函数调用时会执行一些巫术，它会为每个函数调用创建一个新字符串，即 "" 导致 "10" 导致 "10+"、"10-"、"10*"、"10/"、"对于每个排列，10" 依此类推。如果您取消注释该打印语句的示例：

```
10+9+8+7+6+5+4+3+2+1
10+9+8+7+6+5+4+3+2-1
10+9+8+7+6+5+4+3+2*1
10+9+8+7+6+5+4+3+2/1
10+9+8+7+6+5+4+3+21 
```

看看你必须如何处理 C 中的内存分配和字符串，是否有可能做 python 在 C 中表现出的那种“分叉”行为？

**更新：**

弄清楚了，

```
int recursive(char** nums, char** ops, char* current_str, int num_ind){
    int i, ret;
    char new_str[100];

    num_ind++;
    if(num_ind == 9){
        //printf("%s\n", strcat(current_str,nums[num_ind]));
        ret = eval(strcat(current_str, nums[num_ind]));
        if(ret == 2013){
            printf("%s\n", current_str);
        }
        return 0;
    }
    for(i=0; i<5; i++){
        strcpy(new_str, current_str);
        strcat(new_str, nums[num_ind]);
        recursive(nums, ops, strcat(new_str, ops[i]), num_ind);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T05:11:03.183

当然可以。使用`malloc`and`free`为每次调用分配内存。一些非常复杂的处理文本的程序，比如编译器，是用 C 语言编写的。与 Python 相比，它们非常痛苦。或者你可以使用 C++，它有一个字符串类，这样你就可以更容易地做一些基本的事情，比如字符串连接。

# iphone - ios - UICollectionView 在水平分页时更改默认偏移量

> ID：14867473
> 
> 赞同：7
> 
> 时间：2013-02-14T03:46:13.070
> 
> 标签：iphone, ios, ios6, uicollectionview

我正在尝试使用 UICollectionView 在屏幕居中的当前视图的左侧和右侧显示视图。

我有这个正确显示，但水平分页没有以后续视图为中心，因为它默认为框架的宽度，即 320.0。

UICollectionView 在哪里计算剪切到下一页时使用的默认偏移值？

我想改变这个值。有一个更好的方法吗？本质上，我正在尝试重新创建在 iphone 上的应用商店搜索结果中使用的体验。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-14T23:02:25.700

事实证明，我必须设置`pagingEnabled = NO`和覆盖`(void)scrollViewWillBeginDecelerating:(UIScrollView *)scrollView`以下内容：

```
- (void)scrollViewWillBeginDecelerating:(UIScrollView *)scrollView
{
  if (self.lastQuestionOffset > scrollView.contentOffset.x)
    self.currentPage = MAX(self.currentPage - 1, 0);
  else if (self.lastQuestionOffset < scrollView.contentOffset.x)
    self.currentPage = MIN(self.currentPage + 1, 2);

  float questionOffset = 290.0 * self.currentPage;
  self.lastQuestionOffset = questionOffset;
  [self.collectionView setContentOffset:CGPointMake(questionOffset, 0) animated:YES];
} 
```

这个答案有帮助： [Paging UIScrollView with different page widths](https://stackoverflow.com/questions/5089510/paging-uiscrollview-with-different-page-widths)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-27T18:24:01.747

我认为最好的解决方案是添加一个自定义 UICollectionViewFlowLayout 子类并覆盖

```
- (CGPoint)targetContentOffsetForProposedContentOffset:(CGPoint)contentOffset  
                                 withScrollingVelocity:(CGPoint)velocity 
```

我在这里写了一个例子：[https ://gist.github.com/mmick66/9812223](https://gist.github.com/mmick66/9812223)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-21T06:02:12.850

尝试在**viewDidLayoutSubviews中设置 contentOffset**

```
- (void)viewDidLayoutSubviews {
    [super viewDidLayoutSubviews];
    if (viewDidLayoutSubviewsForTheFirstTime) {
        _collectionView.contentOffset = CGPointMake(...);
    }
} 
```

# php - 带有两个 SELECT 语句的 INSERT

> ID：14867474
> 
> 赞同：3
> 
> 时间：2013-02-14T03:46:16.453
> 
> 标签：php, mysql

这是我目前正在尝试的，但我收到了一个 mySQL 错误：

```
mysql_query ("INSERT INTO profile_tag (profile_id, tag_id) 
(SELECT profile_id FROM profile WHERE username = '$username'), 
(SELECT tag_id FROM  tag WHERE  tag = '$music' OR tag = '$sports' OR tag = '$tech')"); 
```

但是，我可以`INSERT`使用单个`SELECT`语句完成一个，而不是两个。

我收到的错误：

> 查询无效：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以`'(SELECT tag_id FROM tag WHERE tag = '' OR tag = 'sports' OR tag = '')'`在第 1 行附近使用正确的语法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T03:58:23.550

Much like the error says, the syntax is incorrect. The values of the insert has to match the number of values in the column definition.

```
INSERT INTO profile_tag (profile_id, tag_id)
SELECT
    profile_id, tag_id
FROM
    profile
    CROSS JOIN tag
WHERE
    username = ?
    AND tag IN (?, ?, ?) 
```

Note that this will insert *multiple* rows if a `tag` value is found for each of the inputs, but I believe that is what you want.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T03:58:30.413

You can use `VALUES` clause

```
insert into profile_tag(user_id, tag_id) values
((select id from users where username = 'alice'),
 (select id from tags where tag = 'music')); 
```

[http://sqlfiddle.com/#!2/76439/1/0](http://sqlfiddle.com/#!2/76439/1/0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T04:03:17.997

```
mysql_query ("INSERT INTO profile_tag (profile_id, tag_id) 
(SELECT profile.profile_id, tag.tag_id FROM profile LEFT JOIN tag ON 1 WHERE profile.username = '$username' AND tag.tag IN ('$music', '$sports', '$tech'))"); 
```

# php - PHP RegEx：在电子邮件验证模式中查找漏洞

> ID：14867475
> 
> 赞同：-1
> 
> 时间：2013-02-14T03:46:22.210
> 
> 标签：php, regex, email-validation

以下正则表达式模式（用于 PHP）旨在验证任何电子邮件地址：

```
^[\w.-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,6}$ 
```

它说：“匹配**至少一个（或多个）大写和/或小写字母，和/或句点，下划线和/或破折号，**后跟**一个且仅一个@**，后跟**至少一个（或多个）大写和/或小写字母，和/或句点，和/或下划线**后跟**一个且只有一个句**点，后跟**两到六个大写和/或小写字母**。

这似乎与我能想到的任何电子邮件地址相匹配。尽管如此，这种正确的感觉可能具有欺骗性。有知识的人能否指出我不知道的这种模式中的一个明显或不那么明显的漏洞，这会使其无法按照预期的方式执行电子邮件验证？

（为了预见可能的响应，我知道 filter_var() 函数提供了更强大的解决方案，但在这种情况下我对正则表达式特别感兴趣。）

**注意：**这是一个关于正则表达式的 PHP 风格的理论问题，而不是关于验证电子邮件的实际问题。在这种情况下，我只想确定正则表达式合理可行的限制。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:55:36.713

使用正则表达式验证电子邮件很棘手

尝试以下电子邮件作为您的正则表达式的输入，即：`^[\w.-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,6}$`

`abc@b...com`

[您可以在http://www.regular-expressions.info/email.html](http://www.regular-expressions.info/email.html)阅读有关电子邮件正则表达式验证的更多信息

如果您正在为应用程序执行此操作，请通过向提供的地址发送电子邮件来使用电子邮件验证，而不是使用非常复杂的正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T03:55:37.917

电子邮件地址规范非常疯狂。那里有可以对其进行全面验证的正则表达式，但它们有数千个字符长。自己解析可能会更好，但是 PHP 有一个内置的电子邮件地址验证器：

```
filter_var($email, FILTER_VALIDATE_EMAIL); 
```

编辑：

在回答您的电子邮件地址将失败的具体问题时，任何在引号中包含电子邮件名称的人都将因为您根本不考虑它们：

```
"explosion-pills"@aysites.com 
```

# javascript - 我怎样才能在一个? JavaScript sort()?

I've seen a few sites now that alphabetize what ever you put in their textarea I was wondering what I would have to do in order to add a button to mine that would produce that

> ID：14867479
> 
> 赞同：5
> 
> 时间：2013-02-14T03:46:52.380
> 
> 标签：javascript, alphabetized

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-14T03:48:03.033

[`split`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)将字符串放入数组中，对其[进行排序](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)，然后[`join`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)将其重新组合在一起：

```
var textarea = document.getElementById("theTextareaId"); // or whatever...
textarea.value = textarea.value.split("\n").sort().join("\n"); 
```

# c++ - 使用 boost::asio 和 c++11 lambda 的简单回调控制

> ID：14867484
> 
> 赞同：3
> 
> 时间：2013-02-14T03:47:31.780
> 
> 标签：c++, multithreading, c++11, lambda, boost-asio

我正在使用`boost::asio`并考虑 io-service-per-cpu 模型（每个 io_service 有一个线程）来实现简单的服务器。

我想要做的是，让 io_service 向另一个 io_service 请求一些工作（类似于消息传递）。

我认为`boost::asio::io_service::post`可以帮助我。

有两个`io_service`, `ios1`, `ios2`,

和一个工作（功能）`bool func(arg *)`，

和一个完成处理程序`void callback(bool)`。

所以我想`ios1`请求一份工作，`ios2`运行它并通知`ios1`完成，最后`ios2`运行处理程序。

```
ios2.post( 
 [&ios1, arg_ptr, callback, func]
 {
    bool result = func(arg_ptr);
    ios1.post( []{ callback(result) } );
 } ); 
```

这段代码有效吗？有没有更聪明、更简单的方法？

**编辑：**

我发现里面的第二个 lamda`ios1.post()`无法到达函数指针`callback`。它超出了范围......所以我正在尝试另一种使用`boost::bind()`.

```
ios2.post(
 [&ios1, arg_ptr, callback, func]
 {
    ios1.post(  boost::bind( callback, func(arg_ptr) )  );
 } ); 
```

我删除了一个堆栈变量 bool ，它似乎更好。

但是使用 c++11 lambda 并`boost::bind`一起使用看起来并不那么酷。

没有我怎么能做到这一点`boost::bind`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:33:35.417

> 我发现 ios1.post() 中的第二个 lamda 无法到达函数指针回调。超出了范围

我不认为这是问题所在。

您正在尝试捕获`callback`，但这不是函数指针，而是函数。你不需要捕获一个函数，你可以调用它！这同样适用于`func`，不要捕获它只是调用它。最后，您的内部 lambda 指的是`result`没有捕获它。

如果您解决这些问题，它将起作用：

```
ios2.post(
        [&ios1, arg_ptr]
        {
            bool result = func(arg_ptr);
            ios1.post( [result]{ callback(result); } );
        }
    ); 
```

你的第二个版本不太一样，因为`func(arg_ptr)`会在`ios1`not的线程中运行`ios2`，我不确定这两个版本是否符合你的描述：

> 所以我想`ios1`请求一份工作，`ios2`运行它并通知`ios1`完成，最后`ios2`运行处理程序。

在您的两个代码示例中`ios1`运行`callback`处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:41:42.207

```
#include <boost/asio/io_service.hpp>
#include <boost/function.hpp>
typedef int arg;
int main()
{
    arg * arg_ptr;
    boost::function<void(bool)> callback;
    boost::function<bool(arg *)> func;
    boost::asio::io_service ios1, ios2;
    ios2.post( 
     [&ios1, arg_ptr, callback, func]
     {
            bool result = func(arg_ptr);
            auto callback1 = callback;
            ios1.post( [=]{ callback1(result); } );
     } );
} 
```

# php - 包括即时通话功能

> ID：14867491
> 
> 赞同：1
> 
> 时间：2013-02-14T03:48:55.490
> 
> 标签：php, include

我是一名学习 php 课程的学生，我被分配创建一个函数，该函数根据给定的一组参数创建一个正方形并打印它，但我必须使用包含语句来打印所有正方形。

我的功能如下所示：

```
function squareFunction ($size, $r, $g, $b, $backR, $backG, $backB, $posX, $posY, $length, $height) {

//create an empty image background
$imgur = imagecreatetruecolor($size, $size) or die('Cannot initialize new GD image stream');

//define the foreground and background colour
$fgcolour = imagecolorallocate($imgur, $r, $g, $b);
$bgcolour = imagecolorallocate($imgur, $backR, $backG, $backB);

//fill the image with the background colour
imagefill($imgur, 0, 0, $bgcolour);

//draw the rectangle using coordinates defined by the functions paramters
imagefilledrectangle($imgur, $posX, $posY, ($posX + $length), ($posY - $height), $fgcolour);

//output the header to tell browser this is a png
header ('Content-type: image/png');

//Write the image to be a png out
imagepng($imgur);
imagedestroy($imgur);
} 
```

并且位于名为 square.php 的文件中

但是，当我尝试使用包含“square.php”时；例如在一个单独的 php 文件中：

```
<?php 

include '../../../square.php';

echo squareFunction(400,0,0,0,100,100,100,0,50,50,50);

?> 
```

我只是得到一个损坏的图像链接。

然后我尝试在我的 square.php 文件的顶部包含一个函数调用，但是当我使用 include 语句时，它只会在读取 include 后立即打印正方形，并且在我的文件中没有其他语句。

很抱歉这篇冗长的帖子，但我整个星期都在研究这个问题，找不到任何关于为什么会发生这种情况的信息，提前谢谢大家。

# python - 在 Python 中更新和创建多维字典

> ID：14867496
> 
> 赞同：9
> 
> 时间：2013-02-14T03:49:45.627
> 
> 标签：python, dictionary, multidimensional-array

我正在解析存储各种代码片段的 JSON，我首先构建这些片段使用的语言字典：

```
snippets = {'python': {}, 'text': {}, 'php': {}, 'js': {}} 
```

然后，当循环遍历 JSON 时，我希望将有关片段的信息添加到它自己的字典中到上面列出的字典中。例如，如果我有一个 JS 片段 - 最终结果将是：

```
snippets = {'js': 
                 {"title":"Script 1","code":"code here", "id":"123456"}
                 {"title":"Script 2","code":"code here", "id":"123457"}
} 
```

不要混淆水域 - 但在 PHP 中处理多维数组时，我只需执行以下操作（我正在寻找类似的东西）：

```
snippets['js'][] = array here 
```

我知道我看到一两个人在谈论如何创建多维字典 - 但似乎无法追踪在 python 中将字典添加到字典中。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-14T03:59:25.743

这称为[自动生存](http://en.wikipedia.org/wiki/Autovivification)：

你可以这样做`defaultdict`

```
def tree():
    return collections.defaultdict(tree)

d = tree()
d['js']['title'] = 'Script1' 
```

如果这个想法是有列表，你可以这样做：

```
d = collections.defaultdict(list)
d['js'].append({'foo': 'bar'})
d['js'].append({'other': 'thing'}) 
```

defaultdict 的想法是在访问键时自动创建元素。顺便说一句，对于这种简单的情况，您可以简单地执行以下操作：

```
d = {}
d['js'] = [{'foo': 'bar'}, {'other': 'thing'}] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-14T03:59:11.360

从

```
snippets = {'js': 
                 {"title":"Script 1","code":"code here", "id":"123456"}
                 {"title":"Script 2","code":"code here", "id":"123457"}
} 
```

在我看来，您想要一个字典列表。这是一些 python 代码，希望能产生你想要的结果

```
snippets = {'python': [], 'text': [], 'php': [], 'js': []}
snippets['js'].append({"title":"Script 1","code":"code here", "id":"123456"})
snippets['js'].append({"title":"Script 1","code":"code here", "id":"123457"})
print(snippets['js']) #[{'code': 'code here', 'id': '123456', 'title': 'Script 1'}, {'code': 'code here', 'id': '123457', 'title': 'Script 1'}] 
```

这说明清楚了吗？

# javascript - 使用 javascript 计算器提高速度和数据效率。

> ID：14867500
> 
> 赞同：0
> 
> 时间：2013-02-14T03:50:09.163
> 
> 标签：javascript, jquery, jquery-mobile, performance

我正在构建一个 javascript 计算器（使用 jquery mobile）来简化显微镜中的常规计算。我正在寻求创建更高效​​的代码，并希望有任何输入......我不希望任何人深入了解整个事情，但这里是该程序的链接以供参考：[http ://www.iscopecalc.com](http://www.iscopecalc.com)

（计算器的 javascript 位于[http://www.iscopecalc.com/js/calc.js](http://www.iscopecalc.com/js/calc.js)）

计算器基本上由用户可以设置的大约 12 个输入组成。使用从这些输入接收到的值，计算器生成大约 15 个不同参数的值，并在显示屏上输出结果。目前，每当输入的状态发生变化时，我都会将该更改事件绑定到一个快速函数，该函数将该输入的值写入 cookie。但程序的核心是“updateCalc()”函数，它从所有输入（从存储的 cookie）中读取值，然后重新计算每个要显示的参数并输出它们。为了便于访问，我在这里仅处理了该功能：

```
function updateCalc(){

readValues();       //load current calculator state into cookies
var data = $.cookie();  //puts all cookie data into object

var fluorData = fluoroTable[data['fluorophore']];  //fluorophore data taken from table at the end of the file depending on chosen fluorophore
    var fluorem = fluorData['fluorem'];
    var fluorex = fluorData['fluorex'];
var cameraData = cameraTable[data['camera']];   //camera data taken from table at the end of the file depending on chosen camera
    var campix = cameraData['campix'];
    var chipWidth = cameraData['chipWidth'];
    var chipHeight = cameraData['chipHeight'];
    var chipHpix = cameraData['chipHpix'];
    var chipVpix = cameraData['chipVpix'];

var RefInd = data['media'];         //simple variables taken directly from calculator inputs
var NA = data['NAslider'];
var obj = data['objective'];
var cammag = data['cameraRelay'];
var CSUmag = data['CSUrelay'];
var bin = data['binning'];

var pinholeRad;
var FOVlimit;
var mode;

if (data['modality']=='widefield'){     //FOVlimit, pinholeRad, and CSU mag will all depend on which modality is chosen
    FOVlimit = 28;
    pinholeRad = NaN;
    mode = 'Widefield';
    CSUmag = 1;
}
else if (data['modality']=='confocal'){
    if (data['CSUmodel']=='X1'){
        pinholeRad = 25;
        if(data['borealis']=='true'){
            mode = "Borealis CSU-X1";
            FOVlimit = 9;
        }
        else {
            mode = "Yokogawa CSU-X1";
            FOVlimit = 7;
            CSUmag = 1;
        }
    }
    else if (data['CSUmodel']=='W1'){
        mode = "Yokogawa CSU-W1";
        FOVlimit = 16;
        pinholeRad = data['W1-disk']/2;
        CSUmag = 1;
    }
}

//These are main outputs and they depend on the input variables above

var latRes = 0.61 * fluorem / NA;
var axRes = 1.4 * fluorem * RefInd / (NA*NA);
var BPpinhole = 1000 * pinholeRad / (obj * CSUmag);
var AU = BPpinhole / latRes;
var totalMag = obj * cammag * CSUmag;
var BPpixel = 1000 * campix * bin / totalMag;
var samples = latRes / BPpixel;
var pixperpin = BPpinhole * 2 / BPpixel;
var sampLit = 1000 * FOVlimit / (obj * CSUmag);
var coverage = FOVlimit * cammag / chipHeight;
if (coverage < 1) {
            chipUsed = coverage;
            FOV = sampLit;
        }   
        else {
            chipUsed = 1;
            FOV = sampLit * chipHeight / (FOVlimit * cammag);   
        }
var sampWaste = 1 - FOV / sampLit;
var imgpix = 1000 * FOV / (chipVpix / bin);

//function goes on to update display with calculated values...
} 
```

它工作正常，我通常对结果感到满意，但这是我想要的建议：

每个输入变量只真正影响少数输出（例如，输入 #3 的变化只会真正改变少数输出的计算……而不是全部 15 个），但是，我的函数重新计算所有输出每次更改任何输入时，无论相关性如何……我都考虑过制作一个巨大的 If-Then 函数，该函数将选择性地仅更新根据更改的输入而更改的输出。这显然需要更多的代码，但我想知道（一旦加载）代码在使用计算器时是否会更快，是否只是浪费我的时间并弄乱我的代码。

我还想知道将输入存储在 cookie 中并从 cookie 中读取值是否是一种合理的做事方式，以及我是否应该创建一个全局变量来存储计算器的状态。（cookie 具有存储用户计算器状态以供以后访问的额外好处）。

我对这些东西很陌生，所以任何和所有关于如何提高我的代码效率的评论都将不胜感激（请随意链接到我应该阅读的页面，或者我应该使用的方法实例...）

如果你已经做到了这一步，谢谢你的时间！！

# sas - 在使用 PROC EXPORT 时如何为列分配值？

> ID：14867502
> 
> 赞同：0
> 
> 时间：2013-02-14T03:50:19.653
> 
> 标签：sas

```
%if %sysfunc(exist(working.__extra_nos__)) %then %do;
    proc export data=working.__extra_nos__
        dbms=oracle replace;
        password="&password.";
        tablename="sch.no_selection_&env_type.";
        url="&dburl.";
        username="&user.";
    run; 
```

sch.no_selection_&env_type 还有一个名为 identifier 的列，它不在，`__extra_nos__`所以我想在导出时将它设置为 &identifier。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:27:28.800

通过 LIBNAME 而不是 PROC EXPORT 访问数据库 DBMS 要容易得多。 [http://support.sas.com/documentation/cdl/en/acreldb/63647/HTML/default/viewer.htm#a003113591.htm](http://support.sas.com/documentation/cdl/en/acreldb/63647/HTML/default/viewer.htm#a003113591.htm)

```
libname mydblib oracle user=testuser password=testpass path=hrdept_002; 
```

[调整您的 oracle 安装细节]

然后，您只需使用普通语言（SQL 或数据步骤）创建或修改表，而不是导出...

```
proc sql;
create table mydblib.sch.no_selection_&env_type. as
  select *, "&identifier" as identifier from work.tempextras;
quit; 
```

或者

```
data mydblib.sch.no_selection_&env_type.;
set work.tempextras;
identifier="&identifier";
run; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T03:57:54.303

从您的数据集创建一个数据集，`__extra_nos__`然后将标识符放入。然后导出该数据集。

```

数据工作.tempextras;
    设置工作.__extra_nos__;
    标识符 = &标识符。;
跑;

%if %sysfunc(exist(working.__extra_nos__)) %then %do;
    proc 导出数据=work.tempextras;
        dbms=oracle 替换；
        密码="&密码。";
        tablename="sch.no_selection_&env_type.";
        url="&dburl.";
        用户名="&user.";
    跑;

proc数据集库=工作；/*删除临时数据集*/
    删除模板；
跑;

```

# dynamic - 创建单个页面还是动态创建页面？

> ID：14867503
> 
> 赞同：0
> 
> 时间：2013-02-14T03:50:19.273
> 
> 标签：dynamic, content-management-system, web-standards

我不确定在这里做什么我想问一下我应该使用什么流程或者完成此操作的网络标准是什么。

设想：

用户输入信息（例如分类广告帖子）。我应该如何生成用户帖子的页面？我应该使用用户提供的信息创建一个新页面，还是应该只创建一个随请求的内容动态变化的页面？

一般来说，我应该采取什么过程？

我听到很多关于使用 cms 的讨论，但我认为我可以创建自己的简单“cms”来满足我的需求。但我需要知道我应该使用哪个方向。创建新页面还是创建单个动态页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T02:22:46.573

我同意您应该能够创建自己的“CMS”来满足您的需求。如果我理解您的问题，我肯定会创建一个从数据库动态加载的页面。想想如果您为每个条目创建一个新页面，您可以创建的服务器负载。我建议我为其开发网站的每个客户的一件事是考虑他们希望他们的网站在 3 年内为他们的业务做些什么。我建议您考虑一下相同的问题，我相信您会明白我为什么建议使用动态页面。祝你的网站好运。

# ios - UITableView 不会在 iPad 弹出窗口中保持向上滚动

> ID：14867507
> 
> 赞同：0
> 
> 时间：2013-02-14T03:50:48.917
> 
> 标签：ios, uitableview, uiscrollview

我在 iPad 应用程序的弹出窗口中使用 UITableView 来请求用户输入，就像 iPhone 上的联系人应用程序一样。它有 3 个部分，每个部分有多个行。单击一行会弹出一个键盘。单击底部的底行时，键盘会隐藏该行，当我向上滚动表格时，它会向下弹回而不是向上滚动。在 iPhone 联系人应用程序上，表格保持向上滚动，这就是我想要的行为。任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:00:40.223

这可能是因为当键盘出现时您没有调整表格视图的大小。你应该看看这里[http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)。

“**移动位于键盘下方的内容**”部分就是您要查找的内容。

供您参考，当在线编辑文本字段时，UITableViewController 会自动调整其表格视图的大小。如果可能的话，您可以将您的类更改为 UITableViewController，而不必担心调整大小。

# python - 熊猫时间序列使用时间相对于开始

> ID：14867512
> 
> 赞同：2
> 
> 时间：2013-02-14T03:51:21.967
> 
> 标签：python, pandas

我正在从文件中读取一些 csv 日志数据，并使用日期、时间字段作为帧的索引。当我绘制时间序列时，绝对时间显示在 X 轴上。我想在 x 轴上显示相对于开始时间的时间。这个怎么做？

例如：这是一个示例 x 轴：

```
 23:59:57--------+23:59:58----------23:59:59--------+00:00:00--------------+ 
```

我想要这样：

```
 0---------00:00:01----------00:00:02--------+00:00:03--------------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T09:44:34.013

一个简单的解决方案是从索引中减去第一个索引项。它可以通过使用列表理解来完成，如果您的数据框非常大，这可能不是最佳（最快）选项。

```
begin = pd.datetime(2013,1,5,5,53)
end = pd.datetime(2013,1,7,7,16)

rng = pd.DatetimeIndex(start=begin, end=end, freq=pd.datetools.Minute(15))
df = pd.DataFrame(np.random.randn(rng.size), index=rng)

fig, axs = plt.subplots(2,1, figsize=(15,6))
fig.subplots_adjust(hspace=.5)

df.plot(ax=axs[0])
axs[0].set_title('Original')

df.index = [idx - df.index[0] for idx in df.index]
df.plot(ax=axs[1])
axs[1].set_title('Normalized') 
```

![在此处输入图像描述](../Images/612cf979683b567f84ed5ec675a60989.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T20:18:17.717

![这是我进行相对时间归一化后的输出](../Images/9e143213be2e28f0aa6f7219ea826b82.png)

由于索引的数据类型从 DatetimeIndex 更改为对象，因此每行都打印在单独的存储桶中。

# jsf - 创建一个调用 jsf 方法的简单链接

> ID：14867513
> 
> 赞同：0
> 
> 时间：2013-02-14T03:51:23.173
> 
> 标签：jsf

我正在制作一个注销链接，这是注销 bean 的代码。

```
public void doLogout() {
    try {
        FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("user_info", null);
        FacesContext.getCurrentInstance().getExternalContext().redirect("../index.xhtml");
    } catch (Exception e) {
    }
} 
```

在我的 xhtml 页面中，我有

```
 <ul class="dropdown-menu">
        <li><h:outputLink value="#{logout.doLogout()}">Logout</h:outputLink></li>
    </ul> 
```

我的问题是当我进入页面时，页面会自动将我注销，它会调用 logout.doLogout() 方法，而无需我单击链接本身。

我尝试擦除 doLogout() 中的代码并将其更改为简单的 Sysout，它确实调用了该方法，而无需我单击链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:04:11.167

哦，我真愚蠢..`<h:commandLink action="logout.doLogout()">Logout</h:commandLink>`做这项工作。

# ios - iOS-Arduino 通信：有什么便宜的解决方案吗？

> ID：14867514
> 
> 赞同：1
> 
> 时间：2013-02-14T03:51:28.913
> 
> 标签：ios, bluetooth, arduino, communication

我想让 iPhone 和基于 Arduino 的设备相互通信。以下是要求：

1.  我想完全依赖 iPhone 的内置组件而不需要任何外围设备（例如[HiJack](http://web.eecs.umich.edu/~prabal/projects/hijack/)）。
2.  两者可以通信之前的配置越少越好。这意味着基于 WiFi 是不可取的，因为我们需要事先为 Arduino 设置 Wi-Fi 凭据。
3.  比特率并不重要。只交换了几个字节。
4.  尽可能便宜。

我看到[蓝牙](http://en.wikipedia.org/wiki/Bluetooth)4.0 LE（例如 Stack Overflow question *[iPhone - Any examples of communication with an Arduino board using Bluetooth?](https://stackoverflow.com/questions/11782221/iphone-any-examples-of-communicating-with-an-arduino-board-using-bluetooth)*）符合我的要求，但有更便宜的解决方案吗？

我想到的一件事是健全的[——Chirp过去在两个](http://chirp.io)[iOS](http://en.wikipedia.org/wiki/IOS_%28Apple%29)设备之间共享数据的方式，但我不知道在 Arduino 上是否可行，如果可行，它会是多少。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:20:03.823

我能想到几个选择：

1.  蓝牙，你可以从[eBay](http://en.wikipedia.org/wiki/EBay)买到便宜的，大约 10 美元

2.  [使用Electric Imp](https://www.sparkfun.com/products/11395)的 Wi-Fi （成本约为 30 美元），使用出色的`BlinkUp`技术很容易设置。请参阅 ElectricImp 项目，例如*[通过 iPhone 控制中央供暖。](http://forums.electricimp.com/discussion/364/1st-project-electricimp-2-servos-iphone-to-control-central-heating/p1)*

3.  啁啾也是一个绝妙的主意。从硬件的角度来看，我认为在 Arduino 中是可行的；你只需要一个[麦克风电路](https://www.sparkfun.com/products/9964)（8 美元）和扬声器。

然而，真正的挑战是软件方面，即用于将数据编码为声音的算法，反之亦然。如果此类算法需要大量计算，您可能无法在 Arduino 中完成，您可以考虑使用基于[ARM](http://en.wikipedia.org/wiki/ARM_architecture)的微控制器。

# javascript - 事件监听 jQuery

> ID：14867517
> 
> 赞同：0
> 
> 时间：2013-02-14T03:51:41.783
> 
> 标签：javascript, jquery, events

在 iframed 的页面中，我有这个代码

```
window.parent.trigger('swipeForward'); 
```

现在我需要在父母中听这个事件

```
jQuery(document).ready(function () {

 //how do i listen here for the swipeForward event

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:53:11.220

就像您对任何其他事件一样：

```
$(window).on('swipeForward', function () {
    // code goes here...
}); 
```

不要忘记包装`window.parent`在 jQuery 中：

```
$(window.parent).trigger('swipeForward'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T04:14:04.480

工作代码

* * *

```
jQuery(function() {          

 if (window!=window.top) { 
 parent.window.jQuery(window.parent).trigger('swipeForward');
 }
}); 
```

* * *

父页面中的代码

```
jQuery(window).on('swipeForward', function () {

alert("swiped");
}); 
```

# php - get_the_title() 的一些帖子并使用它的价值

> ID：14867519
> 
> 赞同：1
> 
> 时间：2013-02-14T03:51:49.823
> 
> 标签：php, jquery, wordpress

我有一个标准循环：

```
 <article class="somepost">  
       <?php       $a = get_the_title();   echo $a; ?>  
    </article> 
```

当我点击某篇文章（class="somepost"）时，我如何获得某篇文章标题的价值

```
 $('.somempost').click(function(){ ??? }); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:59:29.453

First, I would set the title to the articles data attribute:

```
<?php $a = get_the_title(); ?>
<article class="somepost" data-title="<?php echo $a; ?>">
    <?php echo $a; ?>
</article> 
```

Then in your jQuery, set the title to a variable like so:

```
$('.somepost').click(function(){
    var the_title = $(this).data('title');
}); 
```

# blackberry - 在 BlackBerry 地图中的两点之间绘制直线

> ID：14867520
> 
> 赞同：1
> 
> 时间：2013-02-14T03:51:50.180
> 
> 标签：blackberry, maps

如何在 BlackBerry 地图中的 2 点之间绘制直线？我找到了如何在 2 点之间绘制路线。我想画一条如下图所示的线，其中使用了 4 个点。

![在此处输入图像描述](../Images/9c709e99ce64e933b7bc77f984f055df.png)

# c - 带有过时 OpenGL 代码的 C/C++ 代码的静态分析工具

> ID：14867530
> 
> 赞同：0
> 
> 时间：2013-02-14T03:53:52.830
> 
> 标签：c, opengl

是否有静态分析工具可以帮助我升级过时的 OpenGL 代码库？比如帮我排序哪些函数不应该用，哪些函数改用，还有哪些方法要改。

# php - 亲自将 PHP 版本从 5.2.x 升级到 5.3.x

> ID：14867532
> 
> 赞同：1
> 
> 时间：2013-02-14T03:54:12.263
> 
> 标签：php, shared-hosting

我目前的本地托管公司不愿意将我的 PHP 版本升级到 5.3.x，因为他们担心这可能会给其他客户带来问题。

我在网上看到我们可以自己升级它。一个建议是使用我们可以访问的 WHM，`domain.com:2087`但不幸的是，托管公司没有让他们的客户访问这个。

还有其他选择吗？他们给我的唯一访问权限是位于`domain.com:2083`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:02:58.013

如果您没有对该框的 root 访问权限，则无法升级 PHP。唯一的方法是在家中获得自己的盒子，在数据中心托管，或租用 VPS/小型专用服务器。

# ruby-on-rails - 我的 heroku 应用程序生成的文件

> ID：14867535
> 
> 赞同：0
> 
> 时间：2013-02-14T03:54:40.087
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, ruby-on-rails-3.1, activeadmin

我有一个部署到 Heroku 的 rails 应用程序，我不知道为什么，但我无法在 localhost 上查看应用程序，也无法访问由`heroku run rails generate []`. 这种情况下的 gem 是 activeadmin 但我想知道如何获取从此命令生成的文件。

我在运行时遇到的错误`rails generate active_admin:install`

```
/Users/michaelscaria/.rvm/gems/ruby-1.9.3-p385/gems/activerecord- 3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:1208:in `initialize': FATAL:  database "crowdery_development" does not exist (PG::Error) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T07:43:11.603

您需要在 gemfile 中添加 gem 'pg'。

```
group :production do
  gem "pg"
end 
```

在捆绑安装之前，您需要使用命令安装“postgresql”

```
sudo apt-get install postgresql 
```

之后做

```
bundle install --without production 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T00:13:22.740

事实证明，我没有使用与创建应用程序相同的数据库名称。

# java - “构造函数调用必须是构造函数中的第一条语句”错误

> ID：14867536
> 
> 赞同：0
> 
> 时间：2013-02-14T03:54:55.157
> 
> 标签：java

我正在尝试制作一个接受字符串并构造日期对象的构造函数。到目前为止，这是我的解决方案，但我收到此错误：

> 构造函数调用必须是构造函数中的第一条语句

```
private int m;
private int d;
private int y;
private String[] dateStrings;

public Date(int month, int day, int year) {
          m = month;
          d = day;
          y = year;  
  }

public Date(String s) {
      dateStrings = s.split("/");
      this(Integer.parseInt(dateStrings[0]), Integer.parseInt(dateStrings[1]), Integer.parseInt(dateStrings[2]));
  } 
```

我意识到我首先需要`this(...)`一切，但是当我需要先填充 dateStrings 时，我该怎么做？我怎样才能避免这个错误？注意：要使用字符串构造日期，格式为“月/日/年”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T03:58:20.503

`this()`需要先调用。

而是将分配移动到私有方法。

```
private void assginValues (int month, int day, int year){
          m = month;
          d = day;
          y = year;  
} 
```

如果您还需要`dateStrings`填充，您也可以使用此方法构建它。

然后从两个构造函数中调用该方法。确保接受 String 的构造函数不会调用`this()`，因为共享方法负责分配值。

您也可以在一行中完成所有操作，但是您`split()`多次调用这很***浪费***：

```
this(Integer.parseInt(s.split("/")[0]), Integer.parseInt(s.split("/")[1]), Integer.parseInt(s.split("/")[2])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T03:59:45.863

我发现避免它的最好方法是使用静态工厂

```
public static Date MakeDate(String s) {
  dateStrings = s.split("/");
  return new Date(Integer.parseInt(dateStrings[0]), Integer.parseInt(dateStrings[1]),  
     Integer.parseInt(dateStrings[2]));
 } 
```

并且出于一致的考虑，我可能会重载它，并避免拥有一个工厂和一个构造函数的整个怪异。

```
 private Date(int month, int day, int year) {
      m = month;
      d = day;
      y = year;  
  }

 public static MakeDate(int mont, int day, int year){
      //You can figure this part out
 } 
```

这样做的一个好处是您可以对这些工厂进行不同的命名，以明确它们的意图。在这种情况下可能没有必要，但它是一个不错的选择，尤其是对于更复杂的类。

# algorithm - 将一组时间戳分解为具有均匀时间间隔的子集的算法

> ID：14867537
> 
> 赞同：0
> 
> 时间：2013-02-14T03:55:00.690
> 
> 标签：algorithm

我有一个包含 > 100,000 条记录的数据集，其中每条记录都有一个时间戳。

该数据集是从几个“控制器”节点聚合而成的，每个“控制器”节点都从一组子节点收集数据。每个控制器定期收集这些记录（例如，每 5 分钟一次或每 10 分钟一次），并将时间戳应用于记录的 是*控制器。*

* * *

**例如：**

控制器一可能有 20 条记录的时间戳`t`，23 条记录的时间戳`t + 5 minutes`，33 条记录`t + 10 minutes`。

控制器 2 可能有 30 条记录的时间戳记`(t + 2 minutes) + 10 minutes`，32 条记录的时间戳记`(t + 2 minutes) + 20 minutes`，41 条记录的时间戳记`(t + 2 minutes) + 30 minutes`等等。

* * *

现在假设您拥有的唯一信息是所有时间戳的集合以及每个时间戳出现的记录数。也就是说，你不知道`i)`哪个控制器产生了哪些记录`ii)`集，每个控制器的收集间隔或控制器`ii)`的总数。是否有一种算法可以将所有时间戳的集合分解为单独的子集，使得每个给定子集的连续（有序）元素之间的差异差异非常接近 0，而将任何元素从一个子集添加`i`到另一个子`j`集会增加这个方差？请记住，对于这个数据集，单个控制器的“周期性”可能会因 CPU 计时/网络延迟等原因波动 +/- 几秒。

我在这里的最终目标是确定`a)`有多少个控制器以及`b)`每个控制器的采样间隔。到目前为止，我一直在考虑周期函数方面的问题，所以也许该领域的一些分解方法可能有用。

另外一点是我不需要知道每个记录来自*哪个控制器，我只需要知道每个控制器的采样间隔。*因此，例如，如果有两个控制器都在 time 开始采样`u`，一个以 5 分钟间隔采样，另一个以 50 分钟间隔采样，则很难在 50 分钟标记处将两者分开，因为 5 是一个因素50。这没关系，只要我能获得足够的信息来计算每个控制器的间隔，尽管这些偶尔重叠。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:09:14.643

一种基本方法是对数据集执行 FFT 分解（或者，如果您喜欢，可以使用周期图）并在结果频谱中寻找峰值。这将为您提供控制器周期的粗略近似值，甚至可以为您提供其数量的估计值（通过查看峰值的高度，它可以告诉您记录了多少条记录）。

# php - 用于选择最高值以进行版本控制的 SQL 语句

> ID：14867538
> 
> 赞同：0
> 
> 时间：2013-02-14T03:55:14.950
> 
> 标签：php, mysql

我在表“项目”中有以下记录：

```
company_name version
COY1         1
COY1         2
COY2         1 
```

如果公司名称与此相同，我只想选择最高版本：

```
company_name version
COY1         2
COY2         1 
```

我试过这个查询，但它似乎失败了......

```
$sql = "SELECT company_name from projects P1 where version=(select max(version) FROM projects P2 WHERE P1.company_name=P2.company_name)"; 
```

执行 select 语句的错误或正确方法是什么？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:10:23.880

[http://sqlfiddle.com/#!2/e51472/4](http://sqlfiddle.com/#!2/e51472/4)

```
SELECT company_name,max(version)as`Version` from projects
group by company_name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T04:03:51.823

不是最有效的解决方案。但它有效

```
select company_name, 
       (
          select max(version) 
          from company where company_name = p1.company_name
       )

from (
       select company_name, 
              count(*)
       from company 
       group by company_name
     ) p1; 
```

[http://sqlfiddle.com/#!2/25d32/2](http://sqlfiddle.com/#!2/25d32/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T04:14:16.283

```
select max(version),company_name from projects group by company_name 
```

# jakarta-ee - 如何获取 Jersey 中传入 URL 的路径值？

> ID：14867539
> 
> 赞同：0
> 
> 时间：2013-02-14T03:55:20.617
> 
> 标签：jakarta-ee, jersey

假设我设置了以下 Jersey 资源：

```
@Path("/blah")
public class BlahResource {
    @GET
    @Path("/")
    public String printRelativeUrlPath()
    {
        System.out.println("I want to print the relative path that lands us in this method");
        System.out.println("For Ex: /do/1/then/2");
        System.out.println("For Ex: /wait/3/then/4");
        System.out.println("For Ex: /done/5/done/6");
    }
} 
```

我希望能够打印出到达此方法的相对 url 路径，例如：

*   GET`http://somehost/blah/do/1/then/2`应该打印`/do/1/then/2`
*   GET`http://somehost/blah/wait/3/then/4`应该打印`/wait/3/then/4`
*   GET`http://somehost/blah/done/5/done/6`应该打印`/done/5/done/6`

使用泽西岛时如何获取此信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T06:07:48.253

使用@Context HttpServletRequest 请求获取HttpServletRequest，如此处所述 [http://jersey.576304.n2.nabble.com/Access-to-Servlet-Request-td5538642.html](http://jersey.576304.n2.nabble.com/Access-to-Servlet-Request-td5538642.html)

然后使用 HttpServletRequest 中的方法来获取 URL。例如：方法 getPathTranslated()

[http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)

# c# - datagridview 不显示来自 MS Access 的数字

> ID：14867540
> 
> 赞同：1
> 
> 时间：2013-02-14T03:55:33.747
> 
> 标签：c#, winforms, datagridview, oledb

我有一个数据网格视图，它的数据源是 MS Access（它有一个数据类型、货币、日期/时间和数字），它显示数据库中的数据但不显示其他数据类型，只有单词或任何字符串，这里是我添加行的代码

```
string[] rowData = new string[columnCount];
            while (dr.Read())
            {
                for (int k = 0; k < columnCount; k++)
                {
                    if (dr.GetFieldType(k).ToString() == "System.int32")
                    {
                        rowData[k] = dr.GetInt32(k).ToString();
                    }

                    if (dr.GetFieldType(k).ToString() == "System.String")
                    {
                        rowData[k] = dr.GetString(k);
                    }
                }
                dataGridView1.Rows.Add(rowData);
            } 
```

你能帮我解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:28:57.817

我没有使用上面的代码，而是使用了这段代码，它可以工作

```
private void Form6_Load(object sender, EventArgs e)
        {
            loadData();
        }

private void loadData()
            {
                str = new OleDbConnectionStringBuilder();
                str.Provider = "Microsoft.ace.Oledb.12.0";
                str.DataSource = @"\\sisc-erelim\4_Printing\VTDB\DB\VirginiTEADB2.accdb";
                con = new OleDbConnection(str.ConnectionString);
                dataGridView1.DataSource = fillTable("Select* from Accountstbl");
                dataGridView1.Columns["Password"].Visible = false;
                dataGridView1.Columns["Picture"].Visible = false;
            }

        private DataTable fillTable(string sql)
        {
            DataTable datatable = new DataTable();
            using (OleDbDataAdapter da = new OleDbDataAdapter(sql, con))
            {
                da.Fill(datatable);
            }

            return datatable;
        } 
```

# c++ - C++ print contents of array of string vectors?

> ID：14867543
> 
> 赞同：0
> 
> 时间：2013-02-14T03:55:41.600
> 
> 标签：c++, arrays, vector

I don't know C++, but need to make some adjustments to some code I have inherited. One part of the code has:

```
 array<vector<string>, 2> names; 
```

I am now trying to print the contents of each vector in this array. How do I go about doing that?

I know I can iterate over one vector like this:

```
 for (unsigned int p=0; p<vector.size(); p++)
      cout << vector.at(p) << endl; 
```

I can not figure out how to adjust this to print the contents of each vector in the array though.

Thank you for any help you can provide. I'm out of my element here.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T04:07:58.200

在 C++11 中，你可以很容易地遍历它。

```
for(auto& i : names) {
    for(auto& k : i) {
        std::cout << k << std::endl;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T04:00:15.133

Using iterators:

```
array<vector<string>,2> names;

for (array<vector<string>,2>::iterator i=names.begin();i!=names.end();i++)
{
  for (vector<string>::iterator j=i->begin();j!=i->end();j++)
  {
    cout << *j << endl;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T04:13:09.833

单行解决方案（在这种情况下不一定可取，因为`for`在 Rapptz 的答案中手动迭代更容易阅读，但仍然很高兴知道）：

```
std::for_each(names.begin(), names.end(), [](vector<string>& v){
              std::copy(v.begin(),v.end(),
                        std::ostream_iterator<string>(std::cout,"\n")}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T03:59:15.430

Just like iterate through vector, you need to iterate through array:

```
for (int i=0; i<2; i++)
 {
   for (unsigned int p=0; p<names[i].size(); p++)
   {
        cout << names[i].at(p) << endl;
   }
 } 
```

Or

```
for (auto it = std::begin(names); it != std::end(names); ++it)
 {
   for (unsigned int p=0; p<(*it).size(); p++)
   {
        cout << (*it).at(p) << endl;
   }
 } 
```

# javascript - How to change text color using javascript for loop?

> ID：14867544
> 
> 赞同：0
> 
> 时间：2013-02-14T03:55:45.790
> 
> 标签：javascript

**When someone click on the text it change to red color and click on the other text return to black color. I have make an example like below but how to make it shorter using for loop?**

```
 <html>
    <head>
    <title>My little test page</title>
    </head>
    <body id="body">
        <div id="myid">Hello Here !!</div><br>
        <div id="myid2">Hello There !!</div><br>
        <div id="myid3">Hello !!</div><br>
        ......many div......
    </body>
    </html>

    <script language="javascript">
    function changeColor1() {
    document.getElementById("myid").className = "red";
    document.getElementById("myid2").className = "";
    document.getElementById("myid3").className = "";
    }

    function changeColor2() {
    document.getElementById("myid").className = "";
    document.getElementById("myid2").className = "red";
    document.getElementById("myid3").className = "";
    }

    function changeColor3() {
    document.getElementById("myid").className = "";
    document.getElementById("myid2").className = "";
    document.getElementById("myid3").className = "red";
    }

    function init() {
    document.getElementById("myid").onclick = changeColor1;
    document.getElementById("myid2").onclick = changeColor2;
    document.getElementById("myid3").onclick = changeColor3;
    }

    window.onload = init();
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:12:49.527

给所有的 div 添加一个属性名，像这样

```
<div id='myid' name='colorchangingdiv[]'>Hello</div>
<div id='myid2' name='colorchangingdiv[]'>Hello</div>
.... 
```

现在在你的初始化函数中

```
function init() {
var allDivs = document.getElementsByName('colorchangingdivs[]');

    for( var i =0; i < allDivs.length; ++i )
    {
       allDivs[i].onClick = changeColor(this);
    }
} 
```

在您的更改颜色功能中

```
function changeColor( obj )
{
    var allDivs = document.getElementsByName('colorchangingdivs[]');

    for( var i =0; i < allDivs.length; ++i )
    {
       allDivs[i].style.color = '';
    }

    // Now set the color to the obj passed
    obj.style.color = 'red';
 } 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T04:05:34.330

试试这个。

```
 <html>
        <head>
        <title>My little test page</title>
        </head>

 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
      <script language="javascript">
     $(".divid").click(function(e){
         $(".divid").css('color', '');
         $(this).css('color', 'red');

       });
       </script>
 <body id="body">
 <div id="myid" class="divid">Hello Here !!</div><br>
 <div id="myid2" class="divid">Hello There !!</div><br>
 <div id="myid3" class="divid">Hello !!</div><br>
 ......many div......
 </body>
 </html> 
```

示例[jsfiddle](http://jsfiddle.net/JG2eU/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T04:13:49.790

```
<html>
<head>
<style>
  .red{
  color:red;
 }
</style>
<title>My little test page</title>
<script type="text/javascript" src="jquery.js">
<script language="javascript">
  //use jquery for change your color
  $(document).ready(function(){
   $(".myclass").click(function(){
    $(".myclass").removeClass("red");
    $(this).addClass("red");
   });
  });
</script>
</head>
<body id="body">
    <div class="myclass">Hello Here !!</div><br>
    <div class="myclass">Hello There !!</div><br>
    <div class="myclass">Hello !!</div><br>
    ......many div......
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T04:30:11.063

为方便起见，使用类来代替或补充上述 div 标记的 id 属性：

```
<!DOCTYPE html>
<html>
   <head>
      <title>My little test page</title>
   </head>
   <body id="body">
      <div class="mytext">Hello Here !!</div><br>
      <div class="mytext">Hello There !!</div><br>
      <div class="mytext">Hello !!</div><br>

      <script>
        var myselector = 'div.mytext';
        function changeColor( e ){
          var x=document.querySelectorAll(myselector);
          for(i=0;i<x.length;i++){
            x[i].style.color = '';
          }
          e.target.style.color = 'red';
        }      
        function init(){
          var x=document.querySelectorAll(myselector);
          for(i=0;i<x.length;i++){
            x[i].addEventListener("click", function(e){
              changeColor(e);
            });
          }
        }
        window.onload = init();
      </script>
   </body>
</html> 
```

# facebook-graph-api - how to change background colour of fb likebox?

> ID：14867545
> 
> 赞同：0
> 
> 时间：2013-02-14T03:55:47.117
> 
> 标签：facebook-graph-api, facebook-like, facebook-javascript-sdk

in my blog I add a fb like box. but I would like to change the background colour from transparente to white. can anybody help me?

this is the java script

```
<div id="fb-root"></div><script>(function(d, s, id) {var js, fjs = d.getElementsByTagName(s)[0];if (d.getElementById(id)) return;js = d.createElement(s); js.id = id;js.src = "//connect.facebook.net/de_DE/all.js#xfbml=1";fjs.parentNode.insertBefore(js, fjs);}(document, 'script', 'facebook-jssdk'));</script> 
```

and this is the code for plug in

```
<div class="fb-like-box" data-href="http://www.facebook.com/paritambo" data-width="292" data-show-faces="true" data-stream="false" data-header="true"></div> 
```

thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-21T19:03:02.143

尽管这是一个老问题，但我想我可以解释一下，其他人可能会觉得它很有用。

当您从 Facebook 开发人员那里获得 Facebook like box 代码时，它已经被包装在一个带有类名的 div 元素中`"fb-like-box"`。

现在，只需修改您的样式表以自定义此 div。

您可以像任何其他 div 一样修改其背景颜色和大小，但不能修改其内部内容。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T17:12:35.487

你的 FB likebox 是透明的。您可以用 div 包装它并为包装 div 指定颜色，它将改变背景的颜色

# matlab - Creating a path on coordinate system without repeating values (Matlab)

> ID：14867548
> 
> 赞同：1
> 
> 时间：2013-02-14T03:56:01.680
> 
> 标签：matlab, coordinate

I'm trying to create a random "path" on a coordinate system on Matlab. I am doing this by creating a for loop where for each iteration it fills in a new value on a matrix that has initial values of zeros.

For example, I have 5 points so I have an initial matrix `a=[0 0 0 0 0; 0 0 0 0 0]` (row1 = x values, row2 = y values).

The path can move right/left or up/down (no diagonals). In my for loop, I call `randi(4)` and say something like "if `randi(4)`=1, then move 1 point to the left (x-1). if `randi(4)`=2, then move to the right (x+1), etc."

The problem is that you cannot visit a specific point more than once. For example, the path can start at (0,0), then go to (0,1), then (1,1), then (1,0), and then it CANNOT go back to (0,0).. in my current code I don't have this restriction so I was hoping I could get some suggestions..

Since in this example the matrix would look something like `a=[0 0 1 1 0; 0 1 1 0 0]`.

I was thinking of maybe subtracting each new coordinate (here (0,0)) from each column on the matrix a and if any of the columns give me values of zero for both rows (since it's the same coordinate subtracted from itself), then go back one step and let `randi(4)` run again.. but

1.  How could I tell it to "go back one step" (or two or three)?
2.  How do you compare one column against each column of the already established matrix?
3.  This was just an idea.. are there any functions in Matlab that would let me do this? or maybe compare if two columns are the same within a matrix?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:22:39.403

对你的问题。

1.  回去 - 我想这意味着只是扔掉矩阵中最右边的列。

2.  查找它是否存在，您可以使用`ismember`

不幸的是，它只需要行，所以你需要转置。片段：

```
a = [1:10; repmat(1:2,1,5)]'
test = ismember(a,[3,2],'rows')
any(test) % not found
test = ismember(a,[3,1],'rows')
any(test) % found 
```

当然你的想法也行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T04:21:52.877

我可以回答这个：

> 您如何将一列与已建立矩阵的每一列进行比较？

使用两个不同的矩阵。使用 setdiff() 函数比较它们：http: [//www.mathworks.com/help/matlab/ref/setdiff.html](http://www.mathworks.com/help/matlab/ref/setdiff.html)

# less - LESS Preprocessing and null arguments?

> ID：14867549
> 
> 赞同：3
> 
> 时间：2013-02-14T03:56:03.390
> 
> 标签：less

This might be difficult to explain. Is there a way to have less not write out the @child argument without overloading the mix-in? I really don't want two mix-ins. If I use "" double quotes are outputted. I would like the LESS compiler to leave it blank.

**LESS CODE**

```
.build-on(size, @child) 
{
    &--1-1 @{child}
    {             
        width: 100%;
    }

    &--1-2 @{child}
    {
        width: 50.0%;
    }

    &--1-3 @{child}
    {
        width: 33.3%;
    }

    &--1-4 @{child}
    {
        width: 25.0%;
    }

    &--1-5 @{child}
    {
        width: 20.0%;
    }
}

// I might need to provide a child element

.data-table
{
    .build-on(size, table);
}

// I might not

.grid
{
    .build-on(size, "");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:03:48.417

像这样传递它：

```
.yourClass
{
    .build-on(size, ~'');
} 
```

**或者更好……**

定义一个默认值：`.build-on(size, @child: ~'') { ... }`那么不需要第二个：

```
.yourClass
{
    .build-on(size);
} 
```

# jquery - Unexpected behavior from bind

> ID：14867551
> 
> 赞同：2
> 
> 时间：2013-02-14T03:56:11.953
> 
> 标签：jquery

Rather than getting a click bind, I'm getting a list of console messages, as though Javascript is executing the bind's action right away instead of creating a bind:

```
var biomes = new Array("glacier","desert","forest","grassland","hills","jungle","mountains","ocean","plains","swamp","tundra");

function changeTerrain(biome){
  console.log(biome);
}

$(document).ready(function(){
  // fill in terrain guide
    $.each(biomes,function(x,biome){
      $('div#terrainGuide').append("<div class='tile "+biome+"'></div>");
      $('div#terrainGuide:last-child').bind({
        click: changeTerrain(biome)
      });
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T04:07:02.000

当您只需要绑定一次时，您似乎将相同的事件处理程序绑定到要附加的*所有*元素。

```
$.each(biomes,function(x,biome){
  $('div#terrainGuide').append("<div class='tile "+biome+"'></div>");
});

$('div#terrainGuide:last-child').bind({
    click: function(){
       changeTerrain(biome);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T04:02:55.960

You have to use an anonymous function in the bind call, i.e.:

```
 click: changeTerrain(biome) 
```

should become

```
 click: function(){ changeTerrain(biome); } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T04:21:39.497

我认为您可以通过以下方式获得所需的行为：

```
var biomes = new Array("glacier","desert","forest","grassland","hills","jungle","mountains","ocean","plains","swamp","tundra");

function changeTerrain(e){
  //gets the clicked child by calling e.target, and an small hack to get the child's biome
  console.log($(e.target).attr('class').split(' ')[1]);
}

$(document).ready(function(){
  // fill in terrain guide
    $.each(biomes,function(x,biome){
      $('div#terrainGuide').append("<div class='tile "+biome+"'>"+biome+"</div>");
    });
   //remove the bind from the loop and binds the click event to all .tile elements, which are #terrainGuide children
   $("div.tile").click(changeTerrain);
}); 
```

# vba - Word macro to go to a particular word count position?

> ID：14867553
> 
> 赞同：1
> 
> 时间：2013-02-14T03:56:29.240
> 
> 标签：vba, ms-word, word-count

I'm looking for a macro solution that will search for a particular word in the word count. Say I'm up to word 23,050 in a document (I work with book-length manuscripts) I would like to be able to go to that word. The normal go-to command will go to a line or a page but not a word. Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:15:23.037

尝试这个：

```
Option Explicit

Sub GoToWord(lWord As Long)
    ThisDocument.Words(lWord).Select
    Selection.Collapse
End Sub 
```

第一个命令将在文档中选择所需的单词，第二个命令将光标放在该单词的开头。请注意，`Words`使用的集合包括标点符号。

# iphone - Why isn't my iPhone 5 showing 60+ fps even on a completely bare UITableView scroll?

> ID：14867555
> 
> 赞同：6
> 
> 时间：2013-02-14T03:56:33.980
> 
> 标签：iphone, ios, uitableview, scroll

In my application, I've been working to get my fps above 60 in the core animation tool while scrolling my table views on an iPhone 5\. My GPU isn't tapping out, and I couldn't really identify anything that sped it up (by commenting things out or deleting views in a nib).

After hours, I finally got curious and started a fresh junk application with nothing but a UITableViewController that just spits out the same cell over and over. I profiled this with 1000 rows while scrolling, and STILL only got in the high 50's.

What am I missing here? There's no way that's correct. It doesn't get any simpler than this straight up table displaying:

![Table View](../Images/ef05279b5dfa2606191e0233d578f26f.png)

I uploaded a barebones app [here](https://www.dropbox.com/s/hboamc9vn1gwot9/Junk%20Test.zip).

Can someone confirm I'm not crazy?

## Update

Is 60fps the max you can get on an iPhone? Will core animation ever go faster than that?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T07:13:11.350

几个想法：

1.  我对此非常敏感，但在我看来，高 50 岁非常好。

2.  当我使用代码（比 Instruments 更准确）对此进行基准测试时，iPhone 5 上的纯文本表格视图被锁定在 60.0 fps，所以我对你的“50 年代高”数字持怀疑态度。如果出现以下情况，您的表现可能会下降：

    *   如果您通过仪器测量它；

    *   您是否使用调试版本进行了测试；或者

    *   从 Xcode 启动应用程序，而不是从设备本身启动它。

3.  为了对不同帧速率的 UX 有一些定性的感觉，我通过在我的表格视图的后台加载图像来慢慢降低性能，然后通过在前台执行这个计算成本高昂的过程进一步降低性能。我不会告诉你血腥的细节，但在我看来，50 年代中期及以上的帧速率都非常平滑，我开始注意到（但并不可怕）帧速率下降到 30 -40 fps，随着帧速率下降到 5-15 fps，UX 变得完全不可接受。您应该自己进行实验，但如果设计良好，应该能够保持在 50 年代的高位，但低至 50 年代中期可能就可以了。

4.  仪器可能无法为您提供最准确的测量结果。我可能会用代码来衡量它。我在我的屏幕上放了`fpsLabel`一个备用位置，它每秒更新一次`CADisplayLink`（或者如果你有自定义绘制例程，你可以在那里进行自己的 fps 计算）：

    ```
    @interface ViewController () <UITableViewDataSource>

    @property (nonatomic) CFTimeInterval previousTimestamp;
    @property (nonatomic) NSInteger frameCount;

    @end

    @implementation ViewController

    - (void)viewDidLoad
    {
        [super viewDidLoad];

        self.previousTimestamp = CFAbsoluteTimeGetCurrent();

        CADisplayLink *displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(handleDisplayLink:)];
        [displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];
    }

    - (void)handleDisplayLink:(CADisplayLink *)displayLink;
    {
        CFTimeInterval now = CFAbsoluteTimeGetCurrent();
        CFTimeInterval elapsed = now - self.previousTimestamp;
        self.frameCount++;

        if (elapsed > 1.0)
        {
            CGFloat fps = self.frameCount / elapsed;
            dispatch_async(dispatch_get_main_queue(), ^{
                self.fpsLabel.text = [NSString stringWithFormat:@"%.1f fps", fps];
            });
            self.previousTimestamp = now;
            self.frameCount = 0;
        }
    } 
    ```

底线，在发布构建条件（即未链接到计算机，运行非调试构建）中更准确的测量（通过代码）的组合，我想你会发现 iPhone 5 上的表格视图性能非常好，锁定在 60 fps。但即使你的 UI 下降到 50 秒 fps，我个人认为这仍然没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T07:10:50.127

所以我认为这里的答案是我的期望是错误的。

我读到的所有内容似乎都在说你想让你的应用程序达到 60 fps。我没有意识到这实际上是最高 fps，而且你基本上永远不会获得稳定的 60fps。

在分析了仪器中的一堆其他应用程序（我没有意识到我可以在应用程序商店中的其他人的应用程序上做这些）之后，似乎大多数应用程序（大多数构建良好的应用程序）表视图在 50 的低到高徘徊时滚动。Path 是迄今为止我发现的一个例外，它几乎锁定在 59 或 60，这对于他们渲染的所有东西来说都是不可思议的。

所以看起来我实际上应该对 50+ fps 感到非常满意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T06:01:29.443

高于 60Hz 的动画只会浪费电池。屏幕刷新速度不会比这快，而且您的眼睛无法区分 60Hz 以上的运动。

# javascript - HTML 标记要同时添加 href 和 onclick 工作

> ID：14867558
> 
> 赞同：150
> 
> 时间：2013-02-14T03:56:41.327
> 
> 标签：javascript, html, tags, onclick, href

* * *

## 回答 #1

> 赞同：267
> 
> 时间：2013-02-14T04:01:44.973

你已经有了你需要的东西，只需要稍微改变一下语法：

```
<a href="www.mysite.com" onclick="return theFunction();">Item</a>

<script type="text/javascript">
    function theFunction () {
        // return true or false, depending on whether you want to allow the `href` property to follow through or not
    }
</script> 
```

`<a>`标签`onclick`和属性的默认行为`href`是执行`onclick`，然后`href`只要`onclick`不返回`false`，就取消事件（或事件未被阻止）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-14T04:01:46.253

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-07-01T20:01:39.910

要实现这一点，请使用以下 html：

```
<a href="www.mysite.com" onclick="make(event)">Item</a>

<script>
    function make(e) {
        // ...  your function code
        // e.preventDefault();   // use this to NOT go to href site
    }
</script> 
```

这是[工作示例](https://jsfiddle.net/qe9g8s5h/14/)。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-03-19T16:52:58.187

不需要 jQuery。

[有人说使用`onclick`是不好的做法...](https://stackoverflow.com/questions/5871640/why-is-using-onclick-in-html-a-bad-practice)

此示例使用纯浏览器 javascript。默认情况下，单击处理程序似乎会在导航之前进行评估，因此您可以取消导航并根据需要自行处理。

```
<a id="myButton" href="http://google.com">Click me!</a>
<script>
    window.addEventListener("load", () => {
        document.querySelector("#myButton").addEventListener("click", e => {
            alert("Clicked!");
            // Can also cancel the event and manually navigate
            // e.preventDefault();
            // window.location = e.target.href;
        });
    });
</script> 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2018-10-21T01:24:55.713

`ng-click`代替`onclick`. _ 就这么简单：

```
<a href="www.mysite.com" ng-click="return theFunction();">Item</a>

<script type="text/javascript">
function theFunction () {
    // return true or false, depending on whether you want to allow 
    // the`href` property to follow through or not
 }
</script> 
```

# php - Retrieving records from the table with reference

> ID：14867560
> 
> 赞同：0
> 
> 时间：2013-02-14T03:56:48.457
> 
> 标签：php, mysql, phpmyadmin

i have this code of Pagination, actually it will retrieve all the records in my table student, what i want is to retrieve records with a reference by year level. here is the code:

thanks for your help!

```
<?php

if (!isset($_POST['level'])) {
    $_POST['level'] = "undefine";
}
$level = $_POST['level'];

mysql_connect("localhost", "root", "") or die(mysql_error());

mysql_select_db("kp_and_harang") or die(mysql_error());

if (!(isset($_GET['pagenum']))) {
    $pagenum = 1;
} else {
    $pagenum = $_GET['pagenum'];
}
$data = mysql_query("SELECT id,surname,firstname,middlename,level FROM students") or die(mysql_error());

$rows = mysql_num_rows($data);
$page_rows = 2;
$last = ceil($rows / $page_rows);

if ($pagenum < 1) {
    $pagenum = 1;
} elseif ($pagenum > $last) {
    $pagenum = $last;
}

$max = 'limit ' . ($pagenum - 1) * $page_rows . ',' . $page_rows;
$data_p = mysql_query("SELECT *,LPAD(id,4,'0') as id FROM students $max ") or die(mysql_error());

while ($info = mysql_fetch_array($data_p)) {
    echo "<tr class='tr1'>";
    echo "<center>";
    echo "<td class='1'>" . $info['id'] . "</td>";
    echo "<td class='1'>" . $info['surname'] . ", " . $info['firstname'] . " " . $info['middlename'] . "</td>";
    echo "<td class='1'>" . $info['level'] . "</td>";
    echo "</center>";
    echo "</tr>";

    echo "<br>";
}
echo "<p>";
echo " --Page $pagenum of $last-- <p>";
if ($pagenum == 1) {

} else {
    echo " <a href='{$_SERVER['PHP_SELF']}?pagenum=1'> <<-First</a> ";
    echo "----";
    $previous = $pagenum - 1;
    echo " <a href='{$_SERVER['PHP_SELF']}?pagenum=$previous'> <-Previous</a> ";
}

echo " ---- ";

if ($pagenum == $last) {

} else {
    $next = $pagenum + 1;
    echo " <a href='{$_SERVER['PHP_SELF']}?pagenum=$next'>Next -></a> ";
    echo "----";
    echo " <a href='{$_SERVER['PHP_SELF']}?pagenum=$last'>Last ->></a> ";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:42:20.480

我已经重写了您的代码以使用 mysqli。

同样，您只需要在 sql 查询中添加一个“where”。

```
<?php

if (!isset($_POST['level'])) {
    $_POST['level'] = "undefined";
}

$mysqli = new mysqli("localhost", "user", "password", "database");

$level = $mysqli->real_escape_string($_POST['level']);

if (!(isset($_GET['pagenum']))) {
    $pagenum = 1;
} else {
    $pagenum = $_GET['pagenum'];
}
$query = "SELECT id,surname,firstname,middlename,level FROM students";
$result = $mysqli->query($query) or die($mysqli->error.__LINE__);

$rows = $result->num_rows;
$page_rows = 2;
$last = ceil($rows / $page_rows);

if ($pagenum < 1) {
    $pagenum = 1;
} elseif ($pagenum > $last) {
    $pagenum = $last;
}

$max = 'limit ' . ($pagenum - 1) * $page_rows . ',' . $page_rows;
if ($level == "undefined"){
$query = "SELECT *,LPAD(id,4,'0') as id FROM students $max" ORDER BY level;}
else{
$query = "SELECT *,LPAD(id,4,'0') as id FROM students $max where level = '$level' ORDER BY level";}
$result = $mysqli->query($query) or die($mysqli->error.__LINE__);
while ($info = $result->fetch_array(MYSQLI_BOTH)) {
    echo "<tr class='tr1'>";
    echo "<center>";
    echo "<td class='1'>" . $info['id'] . "</td>";
    echo "<td class='1'>" . $info['surname'] . ", " . $info['firstname'] . " " . $info['middlename'] . "</td>";
    echo "<td class='1'>" . $info['level'] . "</td>";
    echo "</center>";
    echo "</tr>";

    echo "<br>";
}
echo "<p>";
echo " --Page $pagenum of $last-- <p>";
if ($pagenum == 1) {

} else {
    echo " <a href='{$_SERVER['PHP_SELF']}?pagenum=1'> <<-First</a> ";
    echo "----";
    $previous = $pagenum - 1;
    echo " <a href='{$_SERVER['PHP_SELF']}?pagenum=$previous'> <-Previous</a> ";
}

echo " ---- ";

if ($pagenum == $last) {

} else {
    $next = $pagenum + 1;
    echo " <a href='{$_SERVER['PHP_SELF']}?pagenum=$next'>Next -></a> ";
    echo "----";
    echo " <a href='{$_SERVER['PHP_SELF']}?pagenum=$last'>Last ->></a> ";
}
?> 
```

同样，此代码旨在尽可能接近地匹配您的代码，但是......更好的方法是将 level 设置为 int 值，以及使用默认为 line 的案例`$query = "SELECT *,LPAD(id,4,'0') as id FROM students $max";`。

# javascript - Check an array of x y grid co-ordinates for duplicates and remove

> ID：14867563
> 
> 赞同：0
> 
> 时间：2013-02-14T03:57:32.653
> 
> 标签：javascript, jquery, arrays, duplicate-removal

I have a grid based game 8 squares by 8 squares giving 64 pieces in total, these pieces are stored in an array. I'm having a problem where certain grid squares are being populated twice so I need to check the array for duplicate co-ordinates.

Below code gives the x, y grid co-ordinates of each piece - testX and testY, I'm not sure how I would go about running through this array to remove duplicates. If there are duplicates pieces I need to keep the first encountered and remove any subsequent duplicates. I'm using jQuery if that helps.

```
function checkGrid() {

    var x;

    for (x = 0; x < grid.length; x++) {

    var testY= grid[x].getY();
    var testX = grid[x].getX();

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:08:57.807

您可以考虑使用对象而不是数组：

```
var grid = {};

function setGridValue(x,y, value){
    var key = x + '-' + y;
    grid[key] = value;
}

function getGridValue(x,y){
    var key = x + '-' + y;
    return grid[key];
} 
```

像这样的东西。然后，如果您更改网格位置的值，则无需检查重复项。

编辑。

由于您无法更改为对象，因此您应该在插入它们时找到现有项目。您没有发布将项目添加到网格的代码，但是您可以执行以下操作：

```
function setItem(x, y, value){
   var item;
   // check for existing item in array
   for(var i = 0; i < grid.length; i++){
       if(grid[i].getX() === x && grid[i].getY() === y){
           item = grid[i];
           break;
       }
   }
   // if no existing item, create new one
   if(!item){
      item = new GridItem(x,y,value);  // dont know what is in the grid...
      grid.push(item);
   } else {
      // update existing item here...
   }
} 
```

# html - Body background takes a while to load landing on the side .. how could I fix it?

> ID：14867564
> 
> 赞同：-1
> 
> 时间：2013-02-14T03:57:41.360
> 
> 标签：html, css, xhtml

So the whole body background of my website has been manually inserted in my CSS code below , but occasionally , sometimes the background takes many seconds to load and I'll first see the DEFAULT while background and I think that would not look good at all .. Users need to see the whole intended background right away .. How can I fix that ? Below is the part of the CSS code handling that.

```
body
    {
    background-image:url('/images/background.png');
        background-size:100%;
    width:100%;
    height:100%;
    margin:0 auto;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T05:43:28.677

尽管在主页上提供大图像被认为是不好的做法（特别是考虑到 html5 提供的强大的客户端渲染选项，例如*svg/矢量图形渲染*（您可以在 adobe illustrator 上创建的任何东西都可以以微不足道的成本提供）和*画布*以及随附的强大[库](http://www.flotcharts.org/)）有一些选项可以帮助您：

1.  **首次使用的用户：**使用在边缘位置缓存静态内容的 CDN（内容交付网络），**即**像亚马逊的[云前端](http://aws.amazon.com/cloudfront/#common-use-cases)这样的托管服务会在世界各地的服务器场中缓存您的图像副本。当首次使用的用户访问您的站点时。 . 它从离他们最近的服务器场向他们发送静态内容以减少延迟。

2.  **重复用户**：您可以使用[HTML 5 缓存](http://www.html5rocks.com/en/tutorials/appcache/beginner/)。尽管默认情况下浏览器应该缓存像您的图像这样的静态内容。它是不可靠且不可预测的。使用 html 5 缓存，在用户访问您的网站后，html5 将缓存该图像，以便他们下次访问时几乎立即提供该图像。

# zend-framework2 - How To Create Custom Form Elements That Extend Doctrine Entity Select Elements

> ID：14867567
> 
> 赞同：1
> 
> 时间：2013-02-14T03:58:11.967
> 
> 标签：zend-framework2

I am trying to create a custom element where I can pre-set an entity namespace say -- `Application\Entity\User` and easily add that element to any form. I have an issue with injecting the doctrine em in form elements -- I found this post about the `form_elements` key in configuration but it doesnt work -- so I figured maybe just setup the element and pass it the objectmanager from the form.

**I want to do something like this.**

```
$this->add(
    array(
        'name' => 'user_id',
        'type' => 'Application\Form\Element\UserSelect',
        'options' => array(
            'label'          => 'User',
            'object_manager' => $this->getObjectManager(),
        ),
    ),
); 
```

**Or even better just this**

```
$this->add(
    array(
        'name'  => 'user_id',
        'type'  => 'Application\Form\Element\UserSelect',
        'label' => 'User',
    ),
); 
```

* * *

*module.config.php*

```
'service_manager' => array(
    'aliases' => array(
        'doctrine_service' => 'doctrine.entitymanager.orm_default',
    ),
    'initializers' => array(
        function ($instance, $sm) {
            if ($instance instanceof DoctrineModule\Persistence\ObjectManagerAwareInterface) {
                $instance->setObjectManager(
                    $sm->get('doctrine_service')
                );
            }
            if ($instance instanceof Application\Form\AbstractForm) {
                $instance->init();
            }
        },
    ),
), 
```

*AbstractForm.php*

```
namespace Application\Form;

use Doctrine\Common\Persistence\ObjectManager;
use DoctrineModule\Persistence\ObjectManagerAwareInterface;
use Zend\Form\Form as ZendForm;

abstract class AbstractForm extends ZendForm implements ObjectManagerAwareInterface
{
    protected $objectManager;
    public function setObjectManager(ObjectManager $objectManager)
    {
        $this->objectManager = $objectManager;
    }
    public function getObjectManager()
    {
        return $this->objectManager;
    }
} 
```

*TestForm.php*

```
namespace Users\Form;

use Application\Form\AbstractForm;

class Login extends AbstractForm
{
    public function init()
    {
        $this->add(
            array(
                'name' => 'user_id',
                'type' => 'DoctrineORMModule\Form\Element\DoctrineEntity',
                'options' => array(
                    'label'          => 'User',
                    'object_manager' => $this->getObjectManager(),
                    'target_class'   => 'Application\Entity\User',
                    'property'       => 'name',
                    'find_method' => array(
                        'name'   => 'findBy',
                        'params' => array(
                            'criteria' => array('is_deleted' => 0),
                            'orderBy'  => array('name' => 'ASC'),
                        ),
                    ),
                ),
            ),
        );
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:00:41.040

将*初始化程序*和*可调用*对象添加到Module.php的**getFormElementConfig方法中：**

```
use DoctrineModule\Persistence\ObjectManagerAwareInterface;
...
public function getFormElementConfig()
{
    return array(
    'invokables' => array(
    'MyForm' => 'Application\Form\MyForm',
        ),
        'initializers' => array(
            'ObjectManagerInitializer' => function ($element, $formElements) {
                if ($element instanceof ObjectManagerAwareInterface) {
                    $services      = $formElements->getServiceLocator();
                    $entityManager = $services->get('Doctrine\ORM\EntityManager');

                    $element->setObjectManager($entityManager);
                }
            },
        ),
    );
} 
```

然后使用**FormElementManager**获取表单：

```
$forms = $this->getServiceLocator()->get('FormElementManager');
$myForm = $forms->get('MyForm'); 
```

**最后在init**方法中添加你的元素- 而不是构造函数，因为他永远不会知道**objectManager**：

```
public function init()
{
    $this->add(
        array(
            'name' => 'user_id',
            'type' => 'DoctrineORMModule\Form\Element\DoctrineEntity',
            'options' => array(
                'label'          => 'User',
                'object_manager' => $this->getObjectManager(),
                'target_class'   => 'Application\Entity\User',
                'property'       => 'name',
                'find_method' => array(
                    'name'   => 'findBy',
                    'params' => array(
                        'criteria' => array('is_deleted' => 0),
                        'orderBy'  => array('name' => 'ASC'),
                    ),
                ),
            ),
        ),
    );
} 
```

[在此处查看有关此设置的讨论。](https://github.com/doctrine/DoctrineModule/issues/175#issuecomment-14289636)

# java - Scan trough .txt file with multiple values on one line. Find right Value

> ID：14867573
> 
> 赞同：-1
> 
> 时间：2013-02-14T03:58:45.447
> 
> 标签：java, android

I got a .txt file wich i load into a string with Buffered string reader. The data in the String is in this format.

```
20 000  5 000
50 000  6 000
60 000  7 000
80 000  8 000
90 000  9 000 
```

I need to go trough these numbers and find the right one. I have a int variable with a number. Lets say the int variable is "24000". Then the right answer from the list would be 20 000\. As this is the closest match. I Then need to extract the number after 20 000 (5 000) and write it to a separate int. I cannot change the format of the numbers, because there are like a million of them formated in a .txt file like this.

Summary : UserNumber -> Find closest match from the left side -> Store right side number to an int. Any ideas on how i can manage this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T07:17:28.593

这为您提供了每行的数字：

```
String[] parts = null;
Long first = null;
Long second = null;

// loop begins
parts = line.split("\\s{1,2}");
first = Long.parseLong(parts[0] + parts[1]);
second = Long.parseLong(parts[2] + parts[3]);

// logic

// loop ends 
```

请注意，括号组之间有一个空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T05:21:26.917

如果分隔符的数量始终保持不变并且列表始终是排序的，则可以使用 String.split() 它将返回长度为 5 的 String[]。将 [0] 和 [1] 值解析为 Integer 会有所帮助您在比较数字并找到最接近的匹配项。[3] 和 [4] 值会为您提供所需的输出。

我写了两种方法。阅读该行后，将字符串相应地传递给这些方法

```
//to get the first part of the string as number
private static int checkedVal(String readString) {
    String[] splitString = readString.split(" ");
    return Integer.parseInt(splitString[0] + splitString[1]);
}
//to get the last part of the string as number
private static int correspondingVal(String readString) {
    String[] splitString = readString.split(" ");
    return Integer.parseInt(splitString[3] + splitString[4]);
} 
```

这里的问题是错误的行/分隔符模式导致程序有缺陷。但如果你确定这不会发生，瞧！

# javascript - 检测是否应该从 UIWebview 下载文件

> ID：14867582
> 
> 赞同：3
> 
> 时间：2013-02-14T03:59:37.770
> 
> 标签：javascript, iphone, html, ios, objective-c

我的目标是通过单击 UIWebview 中的链接来检测音频文件（mp3、mp4、m4a 和 wav）。我有代表电话

```
-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

实现并检查 url 扩展是否以上述扩展之一结尾。问题是当我尝试从 mail.google.com 和 mail.yahoo.com 等网站以及其他不使用直接链接的网站下载文件时。

是否有一种通用的方法可以通过单击任何链接来获取文件类型，或者您是否必须在每个站点的基础上进行。当谈到 html/javascript 编码时，我是个菜鸟。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:30:34.307

抱歉，我没有先看到此链接，但它具有解决此问题所需的一切。

[? 在 webView:shouldStartLoadWithRequest:naviagiontType... 等待时检查响应？](https://stackoverflow.com/questions/1176936/examine-a-response-while-webviewshouldstartloadwithrequestnaviagionttype-w?rq=1)

# twitter-bootstrap - 拆分下拉按钮大小不同

> ID：14867587
> 
> 赞同：9
> 
> 时间：2013-02-14T04:00:04.073
> 
> 标签：twitter-bootstrap

我遇到了有史以来最奇怪的错误！我从 twitter 引导组件页面逐行使用代码作为下拉菜单，但我没有得到相同的结果。这是我的下拉菜单的样子。

![在此处输入图像描述](../Images/194e0016647cea4c9a102cb7eb614b80.png)

我**没有**覆盖任何引导 css。我什至删除了所有样式表并只使用了按钮，我仍然得到相同的结果。

PS：我正在使用 rails will-paginate-bootstrap 插件..我假设它具有所有必要的引导文件

**这是我的 HTML 输出**

```
<div class="btn-group">
  <a class="btn btn-primary" href="/user/profile/test_user">
    <i class="icon-user icon-white"></i>
     test_user
  </a>
  <a class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu">

  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-14T05:18:38.463

我很确定您没有使用 HTML5 文档类型 ( `<!DOCTYPE html>`)。

来自[Bootstrap 的文档](http://twitter.github.com/bootstrap/scaffolding.html#global)：

> Bootstrap 使用需要使用 HTML5 文档类型的某些 HTML 元素和 CSS 属性。将它包含在所有项目的开头。

# asp.net-mvc-3 - Correct way to use multiple item in the ActionLink?

> ID：14867588
> 
> 赞同：0
> 
> 时间：2013-02-14T04:00:11.890
> 
> 标签：asp.net-mvc-3, razor

This is a part of my question which I deleted because its too broad
I created a ActionLink for my blog Archive but I'm having trouble with it because I'm calling multiple items inside it.

This is my codes which return an error message **No overload for method ActionLink takes 7 arguments**

```
@model IEnumerable <Project.Models.ArchiveListModel>

@foreach (var item in Model)
{
<br />
@Html.ActionLink(item.AchiveMonth, item.AchiveYear, item.PostCount, "ArchiveBrowse", "Post", 
new { AchiveYear =  item.AchiveMonth, ArchiveMonth = item.AchiveYear, PostCount = item.PostCount }, null) 

} 
```

This is my original codes but doesn't have a link it only gives a list

```
@foreach (var item in Model)
{
<br />
<li> @System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(item.AchiveMonth) @item.AchiveYear (@item.PostCount) </li>   
} 
</fieldset><br/> 
```

output:

```
January 2013 (1)
February 2013 (1)
December 2012 (4) 
```

Here's how I do it in my controller but I know its not working. T_T

```
 public ActionResult Archive()
        {
            var archivelst = repository.AchiveList().ToList();
            return View(archivelst);
        }

  //this one below is not working
  public ActionResult ArchiveBrowse(string archive)
    {
        var achivemodel = db.Posts.Include("Posts").Single(a => a.Title == archive);
        return View(achivemodel);
    }
            return View(achivemodel); 
```

My ArchiveRepository

```
 public IQueryable<ArchiveListModel> AchiveList()
        {

            var ac = from Post in db.Posts
                     group Post by new { Post.DateTime.Year, Post.DateTime.Month }
                     into dategroup
                     select new ArchiveListModel()
                      {

                         AchiveYear = dategroup.Key.Year,
                         AchiveMonth = dategroup.Key.Month,
                         PostCount = dategroup.Count()

                       };

            return ac;
        } 
```

What's the correct way to call multiple items in the view?

What I'm trying here is to view the list of Posts under a specific month and year or something like Blog Archives.

**Latest Update(working)**
Finally I was able to make it work this is now a working one

**Updated ArchiveRepository**

```
 public IQueryable<ArchiveListModel> AchiveList()
        {

            var ac = from Post in db.Posts
                     group Post by new { Post.DateTime.Year, Post.DateTime.Month }
                     into dategroup
                     select new ArchiveListModel()
                      {

                         AchiveYear = dategroup.Key.Year,
                         AchiveMonth = dategroup.Key.Month,
                         PostCount = dategroup.Count()

                       };

            return ac;
        } 
```

**Updated Controller**

```
public ActionResult ArchiveBrowse(int AchiveYear, int AchiveMonth, int PostCount)
        {
            var archivemodel = (from a in db.Posts
                                where a.DateTime.Year == AchiveYear &&
                                      a.DateTime.Month == AchiveMonth
                                select a).ToList();

            return View(archivemodel);
        } 
```

**Updated View**

```
@foreach (var item in Model)
{
@Html.ActionLink(System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(item.AchiveMonth) + "" + item.AchiveYear + " (" + item.PostCount + ")",
  "ArchiveBrowse", "Post", new
  {
      AchiveYear = item.AchiveYear,
      AchiveMonth = item.AchiveMonth,
      PostCount = item.PostCount
  }, null) 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T12:19:17.940

当您说“调用多个项目”时，我仍然不清楚，所以这是我的答案，假设您想将列表`months years (postcount)`添加到链接中。要在下面获得此输出

```
January 2013 (1)
February 2013 (1)
December 2012 (4) 
```

您可以连接字符串`item.AchiveMonth`，`item.AchiveYear`并且`item.PostCount`：

```
@Html.ActionLink(item.AchiveMonth + " " + item.AchiveYear + " ("+ item.PostCount + ")",
"ArchiveBrowse", 
"Post", 
    new { 
          AchiveYear =  item.AchiveYear, 
          ArchiveMonth = item.AchiveMonth, 
          PostCount = item.PostCount },
 null) 
```

然后在 中`ArchiveBrowse`，确保您的参数正确排列：

```
public ActionResult ArchiveBrowse(string AchiveYear, string ArchiveMonth, string PostCount)
{
     //Not sure if you want to display posts in the clicked month/year
} 
```

# php - Check if a folder/directory exists then display html1, if not display html2

> ID：14867590
> 
> 赞同：2
> 
> 时间：2013-02-14T04:00:24.517
> 
> 标签：php, directory

I am trying to add custom html to a 404 page in wordpress.

```
<?php           
$filename = "/find";
if (!file_exists($filename))
echo $filename, " display html2 ";
elseif (!is_dir($filename))
echo $filename, " display html1 ";
?> 
```

If someone visits [http://www.demosite.com/about/whatever](http://www.demosite.com/about/whatever) = Display HTML 1

If someone visits [http://www.demosite.com/find/whatever](http://www.demosite.com/find/whatever) = Display HTML 2

Is this even possible with PHP and HTML?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:30:17.980

```
<?php           
$filename = "/find";
if (is_dir($filename)){
echo $filename, " display html1 ";
include('html1.html');
}
else{
echo $filename, " display html2 ";
include('html1.html');
}
?> 
```

此代码检查文件夹“find”是否存在，如果存在则显示 html1，否则显示 html2。

**我想对你来说更好的选择是：**

`browse http://yourdomain/about/whatever`当用户显示内容时使用 htaccess`http://yourdomain/page.php?p=about&var=whatever`

并使用 获取页面中 p 的值`$_GET['p']`，并相应地显示 html

```
if($_GET['p'] == "find"){
   include('html1.html');
}else{
   include('html2.html');
} 
```

# solr - Solr DIH regexTransformer seems to only know about one capturing parentheses group

> ID：14867592
> 
> 赞同：0
> 
> 时间：2013-02-14T04:00:42.523
> 
> 标签：solr, dataimporthandler

I am importing data using the DIH and have a need to parse a string, capture two numbers, then populate a field of type=location (which accepts a "lat,long" coordinate pair). The logical thing to do is:

```
 <field column="latLong" 
         regex="Latitude is ([-\d.]+)\s+ Longitude is ([-\d.]+)\s+" 
         replaceWith="$1,$2" /> 
```

It seems the DIH only knows about a single capture group. So $2 is never used.

Has anyone ever used more than one capture with the regexTransformer? Searching the documentation didn't provide any examples of $2 or $3\. What gives, O ye priests of Solr?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T04:02:17.740

Solr DIH 不理解`$2`,`$3`等是不正确的，

我刚试过这个。在 DIH data-config.xml 中添加了这个：

```
<entity name="foo" 
        transformer="RegexTransformer" 
        query="SELECT list_id FROM lists WHERE list_id = ${Lists.id}">
    <field column="firstLastNum" 
           regex="^(\d).*?(\d)$" 
           replaceWith="$1:$2" 
           sourceColName="list_id"/>
</entity> 
```

然后在我的 schema.xml 中添加该字段

```
<field name="firstLastNum" type="string" indexed="true" stored="true"/> 
```

当我用 list_id = 390 索引一个文档时，firstLastNum 是 3:0，这确实是正确的。

我怀疑这个问题可能是因为不正确的正则表达式只匹配第一部分而不是第二部分。也许试试这个正则表达式：

```
regex="Latitude is ([-\d.]+)\s*Longitude is ([-\d.]+)" 
```

另一个原因可能是 latLong 是`location`类型并且`$1,$2`是字符串类型，但我不确定。

# html - Strange TABLE margin behaviour inside LI element

> ID：14867595
> 
> 赞同：1
> 
> 时间：2013-02-14T04:00:57.020
> 
> 标签：html, css, html-table, html-lists, margin

I found a very strange margin behaviour for table when it's inside LI element. Inside LI the TABLE has additional margin at the top which cannot be cancelled by using "margin" or "padding" CSS styles. The only way to cancel this -- is to set "display: block" for LI (by default it's "display: list-item"). Here is the code:

```
<!DOCTYPE html>
<html>
  <head>
      <title>Strange table margin behaviour</title>
  </head>
  <body>
    <ul>
      <li style="border: 1px solid #009; margin: 0; padding: 0;"><table style="border: 1px solid #ccc; margin: 0; padding: 0;"><tr><td>test</td></tr></table></li>
      <li style="border: 1px solid #009; margin: 0; padding: 0;"><table style="border: 1px solid #ccc; margin: 0; padding: 0;"><tr><td>test</td></tr></table></li>
      <li style="border: 1px solid #009; margin: 0; padding: 0;"><table style="border: 1px solid #ccc; margin: 0; padding: 0;"><tr><td>test</td></tr></table></li>
    </ul>
  </body>
</html> 
```

This renders in Google Chrome as:

[screenshot #1](http://img856.imageshack.us/img856/3917/tablemargin.png)

I expect:

[screenshot #2](http://img5.imageshack.us/img5/7669/tablemargin2.png)

I really not understand why this margin happens? LI itself does not have any paddings, TABLE does not have any margins, but together...

UPD. This margin appears only in Google Chrome (24.0.1312.68). In Mozilla Firefox (18.0.2) there is no margin, and page looks as expected (screenshot #2).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T06:01:41.877

虽然我认为更好的实现是在*li*标签内使用浮动 div 来容纳您的表单，但您在 HTML 设置中看到的间距问题的解决方案是在*表格标签中添加**display: inline-table*样式。（下面复制的代码；请注意，我将 CSS 移动到标题而不是内联在标签中。）

 *请注意：IE 7 及更低版本根本不支持 inline-table 属性，您需要注意 IE 8 中的 doctype。这在 FF、Chrome 和 IE 9 中应该可以正常工作。

见：[http ://www.w3schools.com/cssref/pr_class_display.asp](http://www.w3schools.com/cssref/pr_class_display.asp)

```
 <!DOCTYPE html>
    <html>
      <head>
          <title>Strange table margin behaviour</title>
          <style type="text/css">
            li { border: 1px solid #000099; margin: 0; padding: 0; }
            table { border: 1px solid #ccc; display: inline-table; margin: 0; padding: 0; }
          </style>
      </head>
      <body>
        <ul>
          <li><table><tr><td>test</td></tr></table></li>
          <li><table><tr><td>test</td></tr></table></li>
          <li><table><tr><td>test</td></tr></table></li>
        </ul>
      </body>
    </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T04:24:10.503

那个渲染看起来对我来说是正确的。如果您指的是左侧的大空间，那是 UL 的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T04:42:33.050

正如像素所提到的，渲染看起来不错。您指的额外保证金是多少？

一种更简洁的方法是省略列表标签，只自行定位表格元素。或者将它们包装在一个 div 中以获得更大的灵活性。我创建了一个 jsFiddle 作为示例.. [http://jsfiddle.net/Lz9fu/2/](http://jsfiddle.net/Lz9fu/2/)

```
<div id="table_c">
      <table><tr><td>test</td></tr></table>
      <table><tr><td>test</td></tr></table>
      <table><tr><td>test</td></tr></table>
</div> 
```*

# css - 以 */html 开头的 css 类定义

> ID：14867596
> 
> 赞同：1
> 
> 时间：2013-02-14T04:01:02.817
> 
> 标签：css, internet-explorer

我有以下CSS代码

```
 * html .Wrapper {
    margin-bottom: 45px;
    margin-top: 0;
    width: 100%;
    height: 100%;
  } 
```

上面的css代码中*和html的作用是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T04:09:12.630

让您的 CSS 与 IE6 浏览器兼容是一种技巧。

您可以从此处参考各种 IE 版本的更多 hack 技术：http: [//css-tricks.com/how-to-create-an-ie-only-stylesheet/](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)

# java - Parsing a text file of network packets in Java

> ID：14867598
> 
> 赞同：0
> 
> 时间：2013-02-14T04:01:28.457
> 
> 标签：java, arrays, parsing, network-programming, packet

I am having quite the difficult time parsing this .dat file using Java. The format of the .dat file which I am trying to parse is shown below. These are actually packets for a packet generator program I am working on. Each packet is delineated with a new line between each block. I want each byte in the packet to be stored in a single byte []. I have been using the BufferedReader readline() method to go line by line but still have had little success in storing an entire packet. Thanks in advance for any help you can provide.

```
00 04 75 8d 49 c7 00 01 03 cd 50 3c 08 00 45 00 
00 30 08 0d 40 00 80 06 00 00 c0 a8 ec 20 c0 a8 
ec 1e 04 16 00 50 b8 63 45 fd 00 00 00 00 70 02 
fa f0 2b d7 00 00 02 04 05 b4 01 01 04 02 

00 01 03 cd 50 3c 00 01 03 dd 4c 2d 08 00 45 00 
00 30 00 00 40 00 40 06 e1 37 c0 a8 ec 1e c0 a8 
ec 20 00 50 04 16 e9 bb 68 bf b8 63 45 fe 70 12 
16 d0 bd 6b 00 00 02 04 05 b4 01 01 04 02 

00 04 75 8d 49 c7 00 01 03 cd 50 3c 08 00 45 00 
00 28 08 0f 40 00 80 06 00 00 c0 a8 ec 20 c0 a8 
ec 1e 04 16 00 50 b8 63 45 fe e9 bb 68 c0 50 10 
fa f0 59 ab 00 00 

00 04 75 8d 49 c7 00 01 03 cd 50 3c 08 00 45 00 
00 ed 08 10 40 00 80 06 00 00 c0 a8 ec 20 c0 a8 
ec 1e 04 16 00 50 b8 63 45 fe e9 bb 68 c0 50 18 
fa f0 5a 70 00 00 47 45 54 20 2f 20 48 54 54 50 
2f 31 2e 31 0d 0a 41 63 63 65 70 74 3a 20 2a 2f 
2a 0d 0a 41 63 63 65 70 74 2d 4c 61 6e 67 75 61 
67 65 3a 20 65 6e 2d 75 73 0d 0a 41 63 63 65 70 
74 2d 45 6e 63 6f 64 69 6e 67 3a 20 67 7a 69 70 
2c 20 64 65 66 6c 61 74 65 0d 0a 55 73 65 72 2d 
41 67 65 6e 74 3a 20 4d 6f 7a 69 6c 6c 61 2f 34 
2e 30 20 28 63 6f 6d 70 61 74 69 62 6c 65 3b 20 
4d 53 49 45 20 36 2e 30 3b 20 57 69 6e 64 6f 77 
73 20 4e 54 20 35 2e 30 29 0d 0a 48 6f 73 74 3a 
20 31 39 32 2e 31 36 38 2e 32 33 36 2e 33 30 0d 
0a 43 6f 6e 6e 65 63 74 69 6f 6e 3a 20 4b 65 65 
70 2d 41 6c 69 76 65 0d 0a 0d 0a 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:46:45.953

数组是固定长度的，看起来你不知道你将拥有多少字节，直到你遇到一个空行，你不知道你将拥有多少个数据包。

我建议使用 an`ArrayList<ArrayList<Byte>>`来保存所有数据包 - 这将根据需要增长。

创建一个初始`ArrayList<Byte>`然后这是一个简单的循环：

*   虽然`readline()`不为空
*   检查空行
*   如果不是空白
    *   解析`String`成`String[]`使用`String.split()`
    *   遍历`String[]`并将每个十六进制对转换为 a`byte`并添加到`ArrayList<Btye>`
*   如果为空
    *   添加`ArrayList<Byte>`到`ArrayList<ArrayList<Byte>>`
    *   创建新的`ArrayList<Byte>`

`readline()`返回时`null`循环退出并且您`ArrayList<ArrayList<Byte>>`包含所有数据包。

# google-apps-script - Google API to retrieve Google Sites in Google App account

> ID：14867600
> 
> 赞同：0
> 
> 时间：2013-02-14T04:01:31.880
> 
> 标签：google-apps-script, google-api, google-apps

Is there any way of using Google App Scripts to retrieve all the google sites owned by my google app users? Been looking through Google App Scripts and application APIs, but will be good to tap on some expertise in this area. Many thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:32:21.930

你读过文档吗？ [https://developers.google.com/apps-script/class_sitesapp](https://developers.google.com/apps-script/class_sitesapp)

例如：

```
SitesApp.getSites("yourdomain.com"); 
```

# ruby-on-rails-3 - ActionMailer does nothing, is set up correctly

> ID：14867602
> 
> 赞同：0
> 
> 时间：2013-02-14T04:01:43.740
> 
> 标签：ruby-on-rails-3, actionmailer

In `development.rb` I have these ActionMailer settings:

```
config.action_mailer.default_url_options = { :host => 'localhost:3000' }
config.action_mailer.delivery_method = :smtp
config.action_mailer.perform_deliveries = true
config.action_mailer.raise_delivery_errors = true
config.action_mailer.default :charset => "utf-8"
config.action_mailer.smtp_settings = {
  address: "smtp.gmail.com",
  port: 587,
  domain: "gmail.com",
  authentication: "plain",
  enable_starttls_auto: true,
  user_name: "username@gmail.com",
  password: "password"
} 
```

In `notifier.rb` (my mailer) I have these definitions:

```
def user_email(user)
  @user = User.find(user)
  mail(:to => user.email, :subject => "Welcome to me.")
end

def test_email
  mail(:to => "here@there.com", :subject => "Test mail", :body => "Ain't I shapely?")
end 
```

And running `Notifier.test_email.deliver` in the console gives me this: `wrong number of arguments (0 for 1)`.

And running `Notifier.user_email(2).deliver` in the console gives me this: `undefined method 'user_email' for Notifier:Class`.

Am I missing something totally obvious here? The Gmail settings are all correct, but obviously the issue is before that.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T02:21:35.780

重新启动服务器修复它。废话。

# hibernate - Do we need to close EntityManager resources on a select call

> ID：14867605
> 
> 赞同：0
> 
> 时间：2013-02-14T04:01:47.597
> 
> 标签：hibernate, jpa

1.  Select call leaking connections

> ```
> EntityManagerFactory emf = Persistence.createEntityManagerFactory("foo");
> EntityManager em = emf.createEntityManager();
> Query query = em.createQuery("select bar from Bar); 
> ```

Do we need to close EntityManager resources on a select call, will this leak a connection otherwise.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T13:17:26.780

如果您使用 EMF 创建自己的 EntityManager 实例，则需要关闭它们。

如果您在托管容器（例如 JBoss AS 或任何其他 EJB 容器）中运行，那么您可以将 EntityManger 注入到您的 bean 中，然后您不必担心关闭它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-28T03:52:25.043

我有类似的连接泄漏。根本原因是 select 语句隐式地启动了一个事务。当调用 EntityManager.close() 时，该事务仍然处于活动状态，并且由于某种原因保持连接打开。

更糟糕的是，我们的连接池永远不会回收卡在这种状态的连接。

我的解决方法是在关闭任何 entityManager 之前明确检查活动事务。我为此写了一个小辅助函数：

```
public static void rollbackAndClose(EntityManager mgr) {
    if (mgr != null) {
        EntityTransaction transaction = mgr.getTransaction();
        if (transaction.isActive()) {
            transaction.rollback();
        }
        mgr.close();
    }
} 
```

（我习惯于在从 Oracle 或 SQLServer 断开 SQL 客户端时自动回滚事务，因此 EntityManager 的行为对我来说是违反直觉的。不确定 JPA 是否规定了这种行为，或者它是否特定于 Hibernate 或 MySQL。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T06:44:58.653

当然，总是关闭你的 EntityManagers。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T07:42:33.253

从您显示的代码段来看，您的应用程序似乎是一个独立的应用程序，而不是在 JBoss AS 等 Java EE 容器中运行的托管应用程序或使用 Spring（为了论证起见，可以将其视为 Java EE 容器）。根据以下[Wiki](http://wiki.eclipse.org/Introduction_to_Java_Persistence_API_%28ELUG%29#Application-Managed_Entity_Manager)，您正在应用程序管理的实体管理器中运行。所以需要显式关闭实体管理器和工厂。

我想澄清一下，您需要在事务边界关闭 EntityManager。如果您将查看休眠会话的代码（EntityManagerImpl.close() 实际委托给会话关闭）。您会注意到它关闭了事务并清除了持久性上下文。关闭 EntityManagerFactory 更多的是在应用程序级别，因此您可以重用它并在销毁应用程序时关闭它。

这么说，并关注您对连接泄漏的关注，请注意连接不是由休眠直接管理的。Hibernate 有一个插件架构，允许与连接池集成。Hibernate（我认为是从 3.3 版开始，不确定）带有默认的连接池机制，不建议用于生产。如果您使用的是默认连接，则可能是连接泄漏的原因（请参阅以下[帖子](http://www.coderanch.com/t/526549/ORM/databases/Hibernate-Connection-Pool)）。

与hibernate一起使用的最常见的连接池是C3P0（我不确定它是不是最好的......）。在非托管环境中，您需要验证连接池的配置（例如 hibernate.c3p0.* 相关的休眠属性）

# asp.net - ADFS 2.0 time out and relation between Freshness Value,TokenLifetime and WebSSOLifetime parameters

> ID：14867613
> 
> 赞同：5
> 
> 时间：2013-02-14T04:02:44.003
> 
> 标签：asp.net, .net, wif, claims-based-identity, adfs2.0

I am interested to know the relation between Freshness Value,TokenLifetime and WebSSOLifetime parameters in ADFS 2.0 time out scenario. I have already [did](https://stackoverflow.com/q/14742255/1371639) my bit of analysis on this and I am yet to get a clear picture.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T20:30:18.980

我通过几个来源收集了以下关于 ADFS 超时的详细信息。

ADFS 配置涉及两个主要的超时：

1.  WebSSOLifetime – 服务器范围的超时参数 – 默认值 = 480 分钟
2.  TokenLifetime – 这是为每个依赖方配置的 – 默认值 = 10 小时

**WebSSO生命周期：**

这是适用于所有 RP（依赖方）的服务器范围设置。每当用户向给定 RP 请求令牌时，他必须首先对 ADFS 服务进行身份验证。在与 ADFS 服务通信后，他将收到两个令牌，一个证明他是谁的令牌（我们称之为 ADFS 令牌）和一个用于 RP 的令牌（假设为 RP 令牌）。现在，WebSSOLifetime 超时决定了 ADFS 令牌可用于请求新 RP 令牌而无需重新进行身份验证的时间。换句话说，用户可以为此 RP 或其他 RP 请求新令牌，并且在 WebSSOLifetime 使 ADFS 令牌到期之前，他不必证明自己是谁。

**令牌生命周期：**

这是适用于特定 RP 的 RP 级别设置。它不会影响在 ADFS 服务器中配置的其他 RP。每当用户收到 RP 令牌时，它都会在某个时间过期。届时，用户将不得不再次访问 ADFS 服务器并请求新的 RP 令牌。根据 ADFS 令牌是否仍然有效，他不必重新进行身份验证。

降低 TokenLifetime 的一个论点可能是您希望更快地更新声明。在默认情况下，每当修改某些属性存储信息时，此更改可能需要 10 小时才能到达其声明中的用户。我们可以使用以下过程通过 Shell 脚本设置 TokenLifetime：

• 以管理员模式启动 PowerShell 并发出命令

```
 “Add-PSSnapin Microsoft.Adfs.Powershell” 
```

• 使用以下命令获取应用程序的配置详细信息：

> Get-ADFSRelyingPartyTrust -Name “您的应用在 ADFS 依赖方信任中的显示名称”</p>

• 使用以下命令将 ADFS 设置中的 TokenLifeTime 值更改为所需值：

> set-ADFSRelyingPartyTrust -Targetname“您的应用在 ADFS 信赖方信任中的显示名称”-TokenLifetime“分钟值”

这将使 RP 令牌在指定的时间段后失效。

> 通过上述设置，为了提示用户重新认证，我们要求 WebSSOLifetime 低于 TokenLifetime。
> 
> > 想象一个场景，不同的 RP 有不同的重新认证超时要求——假设一个 RP 希望它的用户在 10 分钟后重新认证（TokenLifetime 设置为 10），而其他 RP 的服务器级别 WebSSOLifetime 设置为 50 分钟。在这种情况下，用户不会被重定向到 ADFS 身份验证页面。相反，用户将被创建一个没有任何身份验证的新会话。这是因为尽管 RP 级别令牌已过期，但 WebSSO 令牌仍然有效。

**新鲜度值：**

为了摆脱这个循环，我们可以使用一个名为 Freshness Value (OASIS - [wfresh](http://docs.oasis-open.org/wsfed/federation/v1.2/os/ws-federation-1.2-spec-os.html#_Toc223175013) ) 的设置。当包含在 web.config 的 federatedAuthentication 部分中时，此参数（设置为 freshness="0"）将提示 IDP 根据 WCT 参数中的当前时间检查令牌的新鲜度值。

**新鲜度值的 OASIS 描述 - wfresh：**

> “这个可选参数表示新鲜度要求。如果指定，这表示以分钟为单位指定的所需最大身份验证年龄。IP/STS 不应该发布具有更长生命周期的令牌。如果指定为“0”，则表示请求 IP/STS 在颁发令牌之前重新提示用户进行身份验证。”</p>

**影响超时的其他因素：**

在不使用 ADFS 代理服务器的地方通过 ISA 或 TMG 反向代理发布 ADFS 时，我们还需要考虑以下因素 - 通常称为声明不知道反向代理。

MSISSignOut 跟踪 ADFS（在此会话中）发出的所有令牌，因此注销请求可以使 ADFS 已验证的所有依赖方会话无效，而不仅仅是注销发起请求的应用程序。这就是所谓的单点注销或单点注销。但是，ISA/TMG 在设计时并未考虑 SAML 声明，因此在启动超时/注销过程时它们无法正确响应。

当我们面临以下任何一种情况时，不知道声明的反向代理令牌生命周期就会出现：

• 用户与请求的 Web 应用程序的会话已过期，他们需要使用 ADFS 重新进行身份验证，或者

• 如上所述启动注销。

> 在反向代理会话的生命周期内，用户可以在不提示输入凭据的情况下重新向 ADFS 进行身份验证，因为代理在会话期间会将已收集的凭据传递到 ADFS。

这与 ADFS 没有任何关系。这就是反向代理上的会话的配置方式。这是限制此侦听器的反向代理会话生存期的一个强有力的理由。因此，即使 ADFS 会话超时，使用活动的反向代理会话也可以重新对 ADFS 进行身份验证。有关 TMG – ADFS 设置的更多详细信息，请阅读[此](http://tristanwatkins.com/office-365-single-sign-out-isa-tmg-adfs-proxy/) 博客文章。

我保持这个问题开放以获得关于这个主题的更多信息。

# javascript - How to make HTML/CSS slideshow background fade?

> ID：14867614
> 
> 赞同：6
> 
> 时间：2013-02-14T04:02:47.373
> 
> 标签：javascript, html, css, background, slideshow

I was wondering how you make a background slideshow fade into other photos like a regular slideshow. I've tried many codes and have yet to be successful.

Now, I have a code to make the background change to different photos which works well, but it doesn't fade. Is there anyway to add this?

Here is the code

```
<html>
<head>

<style>

body{
/*Remove below line to make bgimage NOT fixed*/
background-attachment:fixed;
background-repeat: no-repeat;
background-size: cover;
/*Use center center in place of 300 200 to center bg image*/
background-position: 0 0; background-
}
</style>

<script language="JavaScript1.2">

//Background Image Slideshow- © Dynamic Drive (www.dynamicdrive.com)
//For full source code, 100's more DHTML scripts, and TOS,
//visit http://www.dynamicdrive.com

//Specify background images to slide
var bgslides=new Array()
bgslides[0]="http://i892.photobucket.c…

bgslides[1]="http://i892.photobucket.c…

bgslides[2]="http://i892.photobucket.c…

//Specify interval between slide (in miliseconds)
var speed=2000

//preload images
var processed=new Array()
for (i=0;i<bgslides.length;i++){
processed[i]=new Image()
processed[i].src=bgslides[i]
}

var inc=-1

function slideback(){
if (inc<bgslides.length-1)
inc++
else
inc=0
document.body.background=processed[inc…
}

if (document.all||document.getElementById)
window.onload=new Function('setInterval("slideback()",spee…

</script>

</head>

</html> 
```

If you have any suggestions please let me know. Also, I am not the greatest at coding and don't have a clue about JavaScript, so please explain what to do.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-14T04:06:44.350

[jsFiddle 上的工作示例。](http://jsfiddle.net/htmled/2kkHH/)

请改用此代码：（请注意，您需要加载[jQuery](http://jquery.com/)才能使此代码正常工作）

HTML

```
<div class="fadein">
    <img src="http://farm9.staticflickr.com/8359/8450229021_9d660578b4_n.jpg">
    <img src="http://farm9.staticflickr.com/8510/8452880627_0e673b24d8_n.jpg">
    <img src="http://farm9.staticflickr.com/8108/8456552856_a843b7a5e1_n.jpg">
    <img src="http://farm9.staticflickr.com/8230/8457936603_f2c8f48691_n.jpg">
    <img src="http://farm9.staticflickr.com/8329/8447290659_02c4765928_n.jpg">
</div> 
```

CSS

```
.fadein {
    position:relative;
    height:320px;
    width:320px;
}

.fadein img {
    position:absolute;
    left:0;
    top:0;
} 
```

JavaScript

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
$(function() {
$('.fadein img:gt(0)').hide();

setInterval(function () {
    $('.fadein :first-child').fadeOut()
                             .next('img')
                             .fadeIn()
                             .end()
                             .appendTo('.fadein');
}, 4000); // 4 seconds
});
</script> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-05-05T20:44:57.860

CSS内部：

宽度：100%；高度：100%；位置：固定；

# c - execvp() 不接受用户输入

> ID：14867621
> 
> 赞同：0
> 
> 时间：2013-02-14T04:03:24.570
> 
> 标签：c, strtok, execvp

我有以下代码：

```
int main(void) {
    char in[100];
    printf("> ");
    fgets(in, sizeof(in), stdin);
    int pid;
    char *f[100];
    char *v;
    int i = 1;
    v = strtok(in, " ");
    f[0] = v;
    while (v = strtok(NULL, " ")){
        f[i] = v;
        i++;
    }
    f[i] = NULL;
    execvp(f[0], f);
    perror("FAILED");
    exit(1);
} 
```

出于某种原因，每当我输入“ls -l”或“日期”之类的内容时，它都会告诉我没有这样的文件或目录。当我在代码中写道：

```
f[0] = "ls";
f[1] = "-l";
f[2] = NULL; 
```

它工作得很好。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T04:31:00.543

您的代码中有一个小错误。这是关于 fgets 函数的使用。当您使用 fgets 时，将整个给定的输入连同换行符一起带入字符串 v。只需在 fgets 函数后添加以下两行，您的代码就可以正常工作。

```
int size = strlen(in);
in[size-1] = '\0'; 
```

这只是为了从字符串中删除换行符。

因此，当您按 ls -l[ENTER] 时。ls 在第一个单词 f[0] 中使用，-l'\n' 在 f[1] 中使用，execvp 无法使用 ls -l'\n' 找到和执行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-17T01:24:38.223

尝试：

```
char* str;
str = strtok(inputBuffer," \n"); 
```

# ios - 如何在滚动视图中放大和缩小 ImageViews

> ID：14867629
> 
> 赞同：0
> 
> 时间：2013-02-14T04:04:15.267
> 
> 标签：ios, ios6, uiscrollview, uitapgesturerecognizer, uipinchgesturerecognizer

我有一个滚动视图，其中显示了 imageArray 中的所有 imageViews，并且我已经启用了分页。现在我想放大和缩小滚动视图中的图像。有人可以告诉我最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T04:41:06.280

您不能放大和缩小为分页构建的滚动视图，您只能在页面之间滑动......您需要在为缩放构建的第一个“分页”滚动视图中嵌套另一个 UIScrollView（即分页被禁用和多- 触摸和缩放已启用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T05:16:50.750

There's a [WWDC 2010](https://developer.apple.com/itunes/?destination=adc.apple.com.4092349126.04109539109.4144345585?i=1699219987) video which have very nice tutorial for UIScrollView.This tutorial have very efficent techniques to do paging with zoom enable.Check [this](https://stackoverflow.com/questions/3412758/how-can-i-provide-zoomin-zoomout-paging-functionality-in-to-uiscrollview) also

# breeze - Breeze Web API 控制器方法名称约定

> ID：14867636
> 
> 赞同：0
> 
> 时间：2013-02-14T04:05:46.600
> 
> 标签：breeze

在有关微风和 Web API 控制器的[官方文档](http://www.breezejs.com/documentation/web-api-controller)中，我们看到了 Web Api 控制器上方法名称的某种命名约定。例如，对于 Todo 实体类型，有一个 Todos() 方法。

假设我有一个实体类型“客户”。然后我在 apiController 上创建一个方法：

```
[HttpGet]
public IQueryable<Customer> GetCustomers() { ... } 
```

在我的客户端 javascript 应用程序中，我像这样运行 EntityQueries：

```
//api method: GetCustomers
//type name: Customer    

var query = EntityQuery.from("GetCustomers"); 
manager.execute(query); //works

manager.fetchEntityByKey("Customer", 53) //doesn't works! 
```

它失败了，我收到以下错误：

```
No HTTP resource was found that matches the request URI  
'http://localhost:4119/api/SomeController/Customers?$filter=Id eq 53' 
```

那么，我是否被迫将我的 GetCustomers 方法重命名为 Customers() 或者我错过了什么？

# mysql - 如何知道远程 MySQL AWS RDS 机器上打开的连接列表

> ID：14867637
> 
> 赞同：10
> 
> 时间：2013-02-14T04:05:46.580
> 
> 标签：mysql, rds

在哪里可以找到远程 MySQL AWS RDS 机器上打开的连接列表

```
netstat -n |grep 3306|grep ESTABLISHED|wc -l 
```

我这样做是为了查找在本地建立的连接，我该如何为远程实例执行此操作。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-14T04:14:18.973

连接到 MySQL AWS RDS 实例并运行命令

```
SHOW PROCESSLIST 
```

这将列出与该 MySQL 实例的每个连接，包括主机和端口。它还将显示他们当前正在执行的命令。如果您想查看完整的命令，请运行

```
SHOW FULL PROCESSLIST 
```

[MySQL SHOW PROCESSLIST 参考页](http://dev.mysql.com/doc/refman/5.6/en/show-processlist.html)

# android - Android viewflipper：如何自动翻转、播放文字转语音和翻转

> ID：14867639
> 
> 赞同：0
> 
> 时间：2013-02-14T04:06:18.013
> 
> 标签：android, text-to-speech, viewflipper

我在 viewflipper 和 tts 上有一些麻烦。我想要做的是使用viewflipper显示一系列单词并逐个播放tts。首先，我为 viewflipper 设置了 AnimiationListener 并在 onAnimationEnd() 中播放 TTS。其次，我为 TTS 设置了 setOnUtteranceProgressListener() 并尝试在 onDone() 事件中调用 viewflipper.showNext()。但我收到以下错误。在 TTS 中似乎无法访问 viewflipper 实例。任何人都可以给我提示来解决这个问题或任何其他方式可以做同样的事情？

错误信息

```
02-14 12:00:44.934: E/JavaBinder(3321): *** Uncaught remote exception!  (Exceptions are not yet supported across processes.)
02-14 12:00:44.934: E/JavaBinder(3321): android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
02-14 12:00:44.934: E/JavaBinder(3321):     at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4746)
02-14 12:00:44.934: E/JavaBinder(3321):     at android.view.ViewRootImpl.focusableViewAvailable(ViewRootImpl.java:2588)
02-14 12:00:44.934: E/JavaBinder(3321):     at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:608)
02-14 12:00:44.934: E/JavaBinder(3321):     at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:608)
02-14 12:00:44.934: E/JavaBinder(3321):     at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:608)
02-14 12:00:44.934: E/JavaBinder(3321):     at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:608)
02-14 12:00:44.934: E/JavaBinder(3321):     at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:608)
02-14 12:00:44.934: E/JavaBinder(3321):     at android.view.View.setFlags(View.java:8429)
02-14 12:00:44.934: E/JavaBinder(3321):     at android.view.View.setVisibility(View.java:5714)
02-14 12:00:44.934: E/JavaBinder(3321):     at android.widget.ViewAnimator.showOnly(ViewAnimator.java:159)
02-14 12:00:44.934: E/JavaBinder(3321):     at android.widget.ViewAnimator.showOnly(ViewAnimator.java:179)
02-14 12:00:44.934: E/JavaBinder(3321):     at android.widget.ViewAnimator.setDisplayedChild(ViewAnimator.java:111)
02-14 12:00:44.934: E/JavaBinder(3321):     at android.widget.ViewAnimator.showNext(ViewAnimator.java:130)
02-14 12:00:44.934: E/JavaBinder(3321):     at com.example.reading.TTS_Play$3.onDone(TTS_Play.java:305)
02-14 12:00:44.934: E/JavaBinder(3321):     at android.speech.tts.TextToSpeech$Connection$1.onDone(TextToSpeech.java:1264)
02-14 12:00:44.934: E/JavaBinder(3321):     at android.speech.tts.ITextToSpeechCallback$Stub.onTransact(ITextToSpeechCallback.java:63)
02-14 12:00:44.934: E/JavaBinder(3321):     at android.os.Binder.execTransact(Binder.java:351)
02-14 12:00:44.934: E/JavaBinder(3321):     at dalvik.system.NativeStart.run(Native Method) 
```

viewflipper 动画结束时触发 TTS

```
@Override
public void onAnimationEnd(Animation animation) {
    flipper.stopFlipping();
    String utteranceID = "some messages";  
    playTTS(utteranceID); // play tts
} 
```

初始化 TTS 并在 viewflipper 上显示第一个视图

```
@Override
public void onInit(int status) {
    setTtsListener(tts); // set TTS listener
    flipper.stopFlipping(); // stop viewflipper to auto flip
    String utteranceID = "some messages";  
    playTTS(utteranceID); // play tts
} 
```

播放 TTS

```
private void playTTS(String utteranceID) {
    View v = flipper.getCurrentView();
    TextView tv_tts = (TextView) v.findViewById(R.id.tv_tts);       
    HashMap<String, String> ttsHashMap = new HashMap<String, String>();
    ttsHashMap.put(TextToSpeech.Engine.KEY_PARAM_UTTERANCE_ID, utteranceID);    
    tts.speak(tv_tts.getText().toString(), TextToSpeech.QUEUE_FLUSH, ttsHashMap);
} 
```

TTS 监听器

```
@SuppressLint("NewApi") @SuppressWarnings("deprecation")
private void setTtsListener(TextToSpeech tts) {
    this.tts = tts;
    if (Build.VERSION.SDK_INT >= 15) {
        int listenerResult = this.tts.setOnUtteranceProgressListener(
            new UtteranceProgressListener() {
                @Override
                public void onDone(String utteranceId) {
//                      this.onDone(utteranceId);
                    flipper.showNext(); // <-- throws errors here
                }

                @Override
                public void onError(String utteranceId) {
                }

                @Override
                public void onStart(String utteranceId) {
                }
            });

        if (listenerResult != TextToSpeech.SUCCESS) {
            Log.d(LOG_TAG, "failed to add utterance progress listener");
        }
    } else {
        int listenerResult = tts.setOnUtteranceCompletedListener(
            new OnUtteranceCompletedListener() {
            @Override
            public void onUtteranceCompleted(String utteranceId) {
//                  this.onDone(utteranceId);
                flipper.showNext();
            }
        });

        if (listenerResult != TextToSpeech.SUCCESS) {
            Log.d(LOG_TAG, "failed to add utterance completed listener");
        }
    }
} 
```

# assembly - 打印注册表信息以获取堆栈位置 GDB

> ID：14867644
> 
> 赞同：0
> 
> 时间：2013-02-14T04:06:33.707
> 
> 标签：assembly, gdb, stack-trace

在 GDB 中检查 C 二进制文件时，如何一次打印出堆栈上的多个值？我想要类似于以下的输出：

```
0xbfc3ff70:     0xb7f4bff4      0xb7f89ce0      0x00000000      0xbfc3ff98
0xbfc3ff80:     0xb7e4c943      0xb7f4c4e0      0x08048930      0xbfc3ffa4
0xbfc3ff90:     0xbfc3ffa4      0xb7f4bff4      0xbfc3ffb8      0x08048625
0xbfc3ffa0:     0x08048930      0xb7f81660      0x00000000      0xbfc45318 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:56:57.917

您可以使用 $sp 来引用堆栈寄存器，使用 printf 来打印堆栈中的值（就像在 C 中那样），然后只需将参数转换为 printf：

```
db $ printf "[%08X] 0x%08X 0x%08X 0x%08X 0x%08X\n", \
    $sp,                        \
    *(unsigned int *) $sp,      \
    *(unsigned int *)($sp + 4), \
    *(unsigned int *)($sp + 8), \
    *(unsigned int *)($sp +12)
[FFFFE080] 0x00000000 0x00000000 0xF7A3C76D 0x00000000
db $ 
```

您当然应该将其包装在一个函数中。例如

```
define stackdump
    printf... # show bytes 0-15
    printf... # show bytes 15-31
    printf... # show bytes 32-47
end 
```

...并将其粘贴到您的 ~/.gdbinit 中，以便每次运行 gdb 时都可以使用它。

# firebase - 如果我在一个应用中有 10 个 firefeed，我需要 10 个 firebase 吗？

> ID：14867646
> 
> 赞同：0
> 
> 时间：2013-02-14T04:06:39.350
> 
> 标签：firebase

如果我在一个应用程序中有 10 个 firefeed（每页一个），我需要 10 个 firebase 还是可以嵌套在一个下？是否可以在 1 个 firebase 帐户下设置 1000 多个 firefeed？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:55:13.210

我不完全理解你的问题。我们的[firefeed 演示应用程序](http://firefeed.io/about.html)允许无限数量的用户注册，并且他们每个人都有自己的 feed。例如，[这是我的](http://www.firefeed.io/?profile=29201436)。它的所有数据都存储在一个 Firebase 中。

如果您正在谈论在一个 Firebase 下拥有完全独立的 firefeed 实例（每个实例都有一组不同的用户和帖子等），您也可以这样做。由于[Firebase 的数据结构](https://www.firebase.com/docs/data-structure.html)允许嵌套子级，您可以将每个实例嵌套在 Firebase 中它自己的位置下。例如 /firefeed/1、/firefeed/2 等。您需要更新安全规则以了解这种额外的嵌套级别，但应该不会太糟糕。

# typescript - 在 Typescript 中向数组添加属性

> ID：14867649
> 
> 赞同：5
> 
> 时间：2013-02-14T04:06:58.560
> 
> 标签：typescript

我正在尝试向 Typescript 中的 Array 对象添加一个方法。我已经在 SO 上找到了其他解决方案，但这些都不适合我。

我的代码如下所示：

```
interface Array {
    average(): () => number;
}

Array.prototype.average = () => {
    var sum: number = 0

    for (var i = 0; i < this.length; i++)
        sum += this[i]

    if (this.length)
        return sum / this.length

    return 0
} 
```

我得到了错误：`The property 'average' does not exist on value of type 'Array'`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T04:45:31.877

你只是在 Visual Studio 中得到一个错误吗？由于扩展内置接口中的错误，预计会有这么多。如果您只是调用 tsc.exe，这应该可以工作。

相关地，您的代码有点偏离 - 您的声明`average`描述了一个函数，该函数返回一个返回数字的函数，而不是返回一个数字（您只想写`average(): number`在该行上）。此外，因为您使用`=>`而不是`function() {`在实现中，您将`this`在运行时绑定到错误的值。希望有帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-11-06T19:04:27.877

这是非常简单的解决方案（使用 typescript 1.6 测试）：

1）用数组类型定义方法：

```
interface Array<T> {
    average():number;
} 
```

2）实现方法：

```
Array.prototype['average'] = function () {
    return this.reduce(function (a, b) {
        if(typeof a !== "number" || typeof b !== "number"){
            throw new Error("avg method applies only on numeric arrays.");
        }
        return a + b;
    }, 0) / this.length;
}; 
```

呈现的代码应该是：

```
Array.prototype.average = function()........ 
```

现在您可以将其称为：

```
var arr:number[] = [1, 2, 3, 4, 5, 6];
arr.average() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-04-18T23:47:19.287

Vukasin 的回答是正确的，除了因为 Array 和 Number 一样是本机类型，您需要通过全局命名空间访问它来扩充它。所以你需要这样做......

```
declare global {
  interface Array<T> {
    average():number;
  }
} 
```

那么你可以这样做： -

```
if(!Array.prototype.average )
{
  Array.prototype.average = function () {
    return this.reduce(function (a, b) {
        if(typeof a !== "number" || typeof b !== "number"){
            throw new Error("avg method applies only on numeric arrays.");
        }
        return a + b;
    }, 0) / this.length;
  }
} 
```

# xpages - xpages 视图交替行颜色

> ID：14867653
> 
> 赞同：0
> 
> 时间：2013-02-14T04:07:11.843
> 
> 标签：xpages, xpages-extlib

我正在尝试在 dynamicViewControl 中添加交替的行颜色。我找到了 Mark Hughes 的这篇文章[http://dominoextnd.blogspot.com/2009/10/xpages-alternate-view-row-colors-made.html](http://dominoextnd.blogspot.com/2009/10/xpages-alternate-view-row-colors-made.html)但是当我尝试在 rowClasses 中输入 rowEven, rowOdd 时出现错误关于无效字符（逗号）的消息我尝试了各种不同的方法但没有成功。我究竟做错了什么。我在示例中看到过，但我无法重现

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T10:07:27.467

你可以尝试使用css：

```
.someClass tr:nth-child(even) {
    background-color: yellow;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:44:56.433

Naveen 的解决方案效果很好。我只需要更多地养成使用源代码而不是 GUI 来处理很多事情的习惯。谢谢！

# java - Eclipse中的自定义编译时类加载？

> ID：14867657
> 
> 赞同：1
> 
> 时间：2013-02-14T04:07:41.860
> 
> 标签：java, eclipse, compiler-construction, classloader

有没有办法在编译 Java 源文件时挂钩到 Eclipse 编译器以指定自定义类读取/解析/加载逻辑？我不确定正确的术语是什么，但本质上是在运行时发生的“类加载”的编译时等价物。

例如，假设我有 Java 源代码：

```
package foo;

import bar.Bar;

public final class Foo {
  // getQux() returns type: qux.Qux
  private final Bar bar = baz.Baz.getQux().getBar();

  [...]
} 
```

编译器应在编译源文件时要求读取 3 个类`foo/Foo.java`：

*   `bar.Bar`- 它被指定为导入。
*   `baz.Baz`- 它以其完全限定的形式 ( `... = baz.Baz.getQux()...`) 使用。
*   `qux.Qux`- 它是一种“间接”依赖（它由对 的调用返回`baz.Baz.getQux()`，而后者又用于`bar.Bar`通过调用其`getBar()`方法来访问 a）。

我希望能够拦截这些“类请求”中的每一个，以便我可以提供自定义逻辑来获取相关类（也许它存在于数据库中，也许它由某处的某个服务器提供服务等）。

此外，如果在 Eclipse 项目中没有尝试编译任何源文件，直到用户明确打开它们，我也希望这样做。因此，在上面的示例中，直到用户实际打开源文件才发出3 个类请求（`bar.Bar`、`baz.Baz`、 ） 。理想情况下，项目中的源文件列表不必是文件系统上的实际文件（也许它们也存在于数据库中等），并且仅在用户打开/加载源文件时才进行编译尝试。`qux.Qux``foo/Foo.java`

我意识到，如果可能的话，这有一些缺点。例如，如果我编辑源文件`foo/Foo.java`以使类“包私有”，这将默默地破坏任何依赖的类，`foo.Foo`直到项目的“完整”编译完成。现在，这对我的目的来说很好（我以后可以做一些事情来解决这个问题）。

有什么想法/建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:28:30.873

可能不会，这将属于 JDT 的 Java 构建路径部分，我认为它没有那种级别的定制。似乎没有记录在案的扩展点。要获得明确的答案，您需要查看来源。您可能会添加此功能，这意味着您需要使用 JDT 的替代版本，这可能很困难或不可能。

# java - 使用 BeanUtils 设置 setter 值

> ID：14867658
> 
> 赞同：3
> 
> 时间：2013-02-14T04:07:55.823
> 
> 标签：java, reflection, apache-commons-beanutils

我尝试使用 setter 设置值，但出现了 null。请帮我解决这个问题，如果还有其他更好的方法可以做。

```
import org.apache.commons.beanutils.BeanUtils;

public class TestSetter {

    public static void main(String args[]) throws Exception
    {
        Test t = new Test();
        BeanUtils.setProperty(t,"te","teval");
        System.out.println("tevalue :"+t.getTe());
    }
}
class Test
{
    String te;

    public String getTe() {
        return te;
    }

    public void setTe(String te) {
        this.te = te;
    }

} 
```

**例外 ：**

```
Exception in thread "main" java.lang.reflect.InvocationTargetException: Cannot set te
    at org.apache.commons.beanutils.BeanUtilsBean.setProperty(BeanUtilsBean.java:1025)
    at org.apache.commons.beanutils.BeanUtils.setProperty(BeanUtils.java:313)
    at test.reflection.TestSetter.main(TestSetter.java:10)
Caused by: java.lang.NoSuchMethodException: Property 'te' has no setter method
    at org.apache.commons.beanutils.PropertyUtilsBean.setSimpleProperty(PropertyUtilsBean.java:1746)
    at org.apache.commons.beanutils.PropertyUtilsBean.setNestedProperty(PropertyUtilsBean.java:1648)
    at org.apache.commons.beanutils.PropertyUtilsBean.setProperty(PropertyUtilsBean.java:1677)
    at org.apache.commons.beanutils.BeanUtilsBean.setProperty(BeanUtilsBean.java:1022)
    ... 2 more 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-14T04:17:27.263

您的课程`Test`应该是**公共**课程，移动`Test`到自己的文件，将其公开并重新运行您的代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-14T04:10:36.030

将其设置为字段的名称：

```
BeanUtils.setProperty(t,"te","teval"); 
```

[文档](http://commons.apache.org/beanutils/api/org/apache/commons/beanutils/BeanUtils.html#setProperty%28java.lang.Object,%20java.lang.String,%20java.lang.Object%29)在这里

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T04:14:58.947

方法签名`setProperty()`

```
public static void setProperty(Object bean,
                               String name,
                               Object value)
                        throws IllegalAccessException,
                               InvocationTargetException

    Parameters:
        bean - Bean on which setting is to be performed
        name - Property name (can be nested/indexed/mapped/combo)
        value - Value to be set 
```

**名称是属性名称“te”而不是“setTe”。**

BeanUtils.setProperty(t,"te","teval");

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-02T08:45:37.663

> 该类必须是**public**，并提供一个不接受任何参数的公共构造函数。这允许工具和应用程序动态创建 bean 的新实例，而不必提前知道将使用什么 Java 类名，如下所示：

```
 String className = ...;
     Class beanClass = Class.forName(className);
     Object beanInstance = beanClass.newInstance(); 
```

从[http://commons.apache.org/proper/commons-beanutils/javadocs/v1.9.2/apidocs/org/apache/commons/beanutils/package-summary.html#FAQ.property获取](http://commons.apache.org/proper/commons-beanutils/javadocs/v1.9.2/apidocs/org/apache/commons/beanutils/package-summary.html#FAQ.property)

# apache - 在 Windows 7 命令提示符下验证 Apache2.4 安装

> ID：14867661
> 
> 赞同：0
> 
> 时间：2013-02-14T04:08:03.637
> 
> 标签：apache, installation-package

我在运行 Windows 7 专业版的台式计算机上停止了 Apache2.4.3 和 PHP 5.4.11。我想知道我应该在命令提示符下运行什么命令来检查 Apache 服务器是否已正确安装。

1.  在我的 C 驱动器上，名为**Apache24**的 Apache 文件夹和名为 php 的 Php 文件夹
2.  我运行一个 test.php 文件，其中包含一个 phpinfo 函数。它显示 PHP 和 Apache 版本信息为 Apache/2.4.3 (Win32) PHP/5.4.11

3.  当我在命令提示符中键入 httpd.exe 时，系统显示以下消息

    c:\Apache24\bin>httpd.exe AH00558: httpd.exe: 使用 fe80::bcbd:7ef2:4d92:6a9 无法可靠地确定服务器的完全限定的主名称。全局设置“ServerName”指令以禁止显示此消息

请告诉我上面的消息是什么意思。这是否表明 Apache 未正确安装？

1.  我在 http.conf 文件中添加了 3 行 LoadModule php5_module "c:/php/php5apache2_4.dll" AddHandler application/x-httpd-php .php PHPIniDir "c:/php"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T18:03:56.743

我在网上做了一些研究。这是我为解决我的问题所做的。

**将 Apache 安装为窗口服务。**

*   1a。您应该以管理员身份运行命令提示符（DOS 提示符），否则窗口系统会提示您不是管理员的错误消息。
*   1b。要以管理员身份运行命令，请单击窗口启动菜单图标，找到命令提示符图标，右键单击它，然后选择以“管理员身份运行”
*   1c。在 Dos 提示符下，导航到 c:\apach24\bin\ 文件夹，然后键入 httpd -k install。这会将 Apache 安装为窗口服务。

我希望这有帮助。谢谢！

# javascript - 使用 querySelectorAll 获取元素

> ID：14867662
> 
> 赞同：1
> 
> 时间：2013-02-14T04:08:23.553
> 
> 标签：javascript, html, selectors-api

我有html标签，

```
<div data-id='test'></div> 
```

我需要使用这个元素

```
document.querySelectorAll('[data-id="test"]'); 
```

但是上面的代码总是返回空数组。请帮助我使用 querySelectorAll() 获取元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T04:12:14.670

您的 ID 不应该有任何双引号

```
document.querySelectorAll('[data-id=test]'); 
```

或者

```
document.querySelectorAll('div[data-id=test]'); 
```

并确保将其放置在内部`onload`或将 JavaScript 标记设置为`defer="defer"`

# azure - 我无法在 Macintosh 中下载 .publishsettings

> ID：14867665
> 
> 赞同：-2
> 
> 时间：2013-02-14T04:08:43.457
> 
> 标签：azure

现在，我使用的是免费体验版的Windows Azure。我想下载 .publishsettings 以使用命令行工具，但无法下载。我在任何浏览器上都尝试过，但我不能......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:06:16.903

命令行工具中的“azure account download”应该允许您下载 publishsettings 文件。如果不是，您看到的问题是什么？

# android - 具有 alpha 效果的渐变按钮 android

> ID：14867666
> 
> 赞同：2
> 
> 时间：2013-02-14T04:08:47.540
> 
> 标签：android, gradient, android-button, android-selector

我正在尝试在 android 中创建一个具有渐变 + alpha 效果的按钮，但没有得到我想要做的。

这是我想要获得的按钮的图像：-

![在此处输入图像描述](../Images/0e2ec665c3c82734b29f6850d2c0334f.png)

我正在使用以下选择器作为我的按钮样式和效果：-

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true"><shape>
            <gradient android:angle="180" android:centerColor="#657377" android:endColor="#AFFFFFFF" android:startColor="#FFFFFFFF" android:type="linear"/>

            <corners android:radius="10dp" />
        </shape></item>

</selector> 
```

如果有人有任何想法，请帮助我。谢谢

# php - PHP 未定义索引

> ID：14867671
> 
> 赞同：0
> 
> 时间：2013-02-14T04:09:20.387
> 
> 标签：php

我正在创建一个 PHP 表单，用于计算找零的总金额，例如便士、25 美分、硬币和镍币。代码似乎可以正常工作，直到我在第 29-32 行收到未定义索引错误。有人可以帮我解决这个问题并告诉我我做错了什么吗？

```
<head> 
<title>Fill in the form and I will show the greeting. </title>
<style type="text/css">
h1 {font-family:'Times New Roman'; }
</style>

<body bgcolor="orange">  
<form action="Lab6-1.php" method="post" >
<h1>Please enter your coin count and denominations.</h1>
<p>
<h1>Pennies (1 cent):
   <input type="text" size="16" maxlength="20" name="pennies" value="<?php echo $_POST['pennies']?>"/></h1>

<h1>Nickels (5 cents):
    <input type="text" size="16" maxlength="20" name="nickels" value="<?php echo $_POST['nickels']?>"/></h1> 

<h1>Dimes (10 cents):  
    <input type="text" size="16" maxlength="20" name= "dimes" value="<?php echo $_POST['dimes']?>"/></h1>
<h1> Quarters (25 cents):
    <input type="text" size="16" maxlength="20" name= "quarters" value="<?php echo $_POST['quarters']?>"/></h1>
<br /><br />
<input type="submit" value="Calculate Coins" />
<input type="reset" value ="Clear Form" />

<?php
   $pennies = $_POST['pennies']*.01;
   $nickels = $_POST['nickels']*.05;
   $dimes = $_POST['dimes']*.10;
   $quarters = $_POST['quarters']*.25;

   $total = $pennies + $nickels + $dimes + $quarters;

   $money = array ( "Quarters" => $quarters, "Dimes"=> $dimes, "Nickels" => $nickels, "Pennies" => $pennies, "Total" => $total);

   echo "<table border = \"1\" >";

 foreach ( $money as $key => $value ) {
 print("<tr><td> $key </td><td> $value</td> </tr>");  
  } 
 echo "</table>";
?>

</p>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:17:11.507

这是因为即使在您提交表单之前，它最初也在寻找变量 `$_POST['pennies']`, `$_POST['nickels']`, `$_POST['dimes']`，`$_POST['quarters']`而那时它们并不存在。所以你得到

> 未定义的索引错误

您可以通过将表单提交代码包装在条件中来避免这种情况

喜欢

```
if(isset($_POST['btnSubmit'])) }{

   // code goes here

} 
```

并将提交按钮命名为

```
<input type="submit" name="btnSubmit" value="Calculate Coins" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T04:13:09.673

`Undefined index`表示您的`$_POST`数组项之一不存在。例如，它可能是`$_POST['quarters']`.

您应该首先检查变量是否存在，如下所示：

```
$quarters = $_POST['quarters'] ? $_POST['quarters']*.25 : 0; 
```

# ruby - Ruby 多线程生产者-消费者

> ID：14867672
> 
> 赞同：0
> 
> 时间：2013-02-14T04:09:34.603
> 
> 标签：ruby, multithreading, producer-consumer

不到一周前，我开始使用 Ruby，但已经开始欣赏这种语言的力量。我正在尝试解决一个经典的生产者-消费者问题，以橙树的形式实现（参见 [http://pine.fm/LearnToProgram/?Chapter=09](http://pine.fm/LearnToProgram/?Chapter=09)）。橘子树每年都在生长，直到它死去，并且每年生产随机数量的橘子（生产者）。只要树上有橙子就可以采摘（消费者）。

我这里有两个问题：

1.  以下代码给了我以下异常（无法附加，没有选项）：

    ```
    /Users/Abhijit/Workspace/eclipse/ruby/learn_to_program/orange_tree.rb:84：
    警告：实例变量@orange_tree 未初始化
    /Users/Abhijit/Workspace/eclipse/ruby/learn_to_program/orange_tree.rb:84:in `':

    nil:NilClass (NoMethodError) 的未定义方法‘age’来自
    /Users/Abhijit/Workspace/eclipse/ruby/learn_to_program/orange_tree.rb:45:in `'

    ```

2.  我不确定多线程部分是否正确编码。

我自己有几本书，包括“Programming Ruby”和“The Ruby Programming Language”，但没有一本包含真正的“生产者-消费者问题”。

PS：为了充分披露，我也在 Ruby 论坛上发布了这个问题。但是，我在这里看到了出色的答案和/或建议，并希望我也能得到其中的一些。

```
require 'thread'

class OrangeTree
GROWTH_PER_YEAR = 1
AGE_TO_START_PRODUCING_ORANGE = 3
AGE_TO_DIE = 7
ORANGE_COUNT_RELATIVE_TO_AGE = 50
def initialize
  @height = 0
  @age = 0
  @orange_count = 0
end

def height
  return @height
end

def age
  return @age
end

def count_the_oranges
  return @orange_count
end

def one_year_passes
  @age += 1
  @height += GROWTH_PER_YEAR
  @orange_count = Math.rand(@age..AGE_TO_DIE) * Math.log(@age) * ORANGE_COUNT_RELATIVE_TO_AGE
end

def pick_an_orange
  if (@age == AGE_TO_DIE)
    puts "Sorry, the Orange tree is dead"
  elsif (@orange_count > 0)
    @orange_count -= 1
    puts "The Orange is delicious"
  else
    puts "Sorry, no Oranges to pick"
  end
end

end

class Worker
  def initialize(mutex, cv, orange_tree)
  @mutex = mutex
  @cv = cv
  @orange_tree = orange_tree
end

def do_some_work
  Thread.new do
    until (@orange_tree.age == OrangeTree.AGE_TO_DIE)
      @mutex.synchronize do
        sleep_time = rand(0..5)
        puts "Orange picker going to sleep for #{sleep_time}"
        sleep(sleep_time)
        puts "Orange picker woke up after sleeping for #{sleep_time}"
        @orange_tree.pick_an_orange
        puts "Orange picker waiting patiently..."
        @cv.wait(@mutex)
      end
    end
  end

  Thread.new do
    until (@orange_tree.age == OrangeTree.AGE_TO_DIE)
      @mutex.synchronize do
        sleep_time = rand(0..5)
        puts "Age increaser going to sleep for #{sleep_time}"
        sleep(sleep_time)
        puts "Age increaser woke up after sleeping for #{sleep_time}"
        @orange_tree.one_year_passes
        puts "Age increaser increased the age"
        @cv.signal
      end
    end
  end
end

Worker.new(Mutex.new, ConditionVariable.new, OrangeTree.new).do_some_work
until (@orange_tree.age == OrangeTree.AGE_TO_DIE)
  # wait for the Threads to finish
end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T06:43:18.207

`@orange_tree`是 Worker 对象的实例变量，只能从对象内部访问。您正在尝试从“直到”条件下的全局范围访问它，但它不存在。有几种方法可以解决它，但这种方法需要的更改最少：

```
...

orange_tree = OrangeTree.new
Worker.new(Mutex.new, ConditionVariable.new, orange_tree).do_some_work
until (orange_tree.age == OrangeTree::AGE_TO_DIE)
... 
```

您还应该查看`Thread#join`：[http](http://www.ruby-doc.org/core-1.9.3/Thread.html#method-i-join) ://www.ruby-doc.org/core-1.9.3/Thread.html#method-i-join 。它会照顾你的等待。多线程代码的其余部分在技术上看起来是正确的。我相信您知道，如果这不仅仅是一个练习，您会希望使互斥锁更加细化。因为它们现在是两个线程将几乎相互排他地执行，这违背了线程的要点。

另外，查找`attr_accessor`或`attr_reader`。它们将使您不必手动定义`OrangeTree#height`,`age`等。

**多连接示例**

```
threads = []

threads << Thread.new do
  ...
end

threads << Threads.new do
  ...
end

threads.each { |thread| thread.join } 
```

# ruby-on-rails - CanCan 角色、has_and_belongs_to_many 和约束异常

> ID：14867674
> 
> 赞同：0
> 
> 时间：2013-02-14T04:10:09.313
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, cancan, rails-activerecord

我们使用 CanCan 并管理数据库中的角色，使用[https://github.com/ryanb/cancan/wiki/Separate-Role-Model](https://github.com/ryanb/cancan/wiki/Separate-Role-Model)上的说明，除了我们使用 has_and_belongs_to_many 而不是“has_many :through”

我们的架构中有以下内容：

```
create_table "roles", :force => true do |t|
  t.string   "name",        :null => false
  t.datetime "created_at",  :null => false
  t.datetime "updated_at",  :null => false
end

create_table "members_roles", :force => true do |t|
  t.integer  "member_id"
  t.integer  "role_id"
  t.datetime "created_at", :null => false
  t.datetime "updated_at", :null => false
end 
```

在我们的模型中，我们有：

```
class Member < ActiveRecord::Base
  has_and_belongs_to_many :roles
end

class Role < ActiveRecord::Base
  has_and_belongs_to_many :members
end 
```

现在，当我尝试给一个成员一个新角色时，它就死了。例如，在控制台中：

```
1.9.3p194 :001 > m = Member.find('test1')
  Member Load (0.3ms)  SELECT "members".* FROM "members" WHERE "members"."slug" = 'test1' LIMIT 1
 => #<Member id: 1, email: "test1@example.com", encrypted_password: "$2a$10$4VWJX07qwB9Lu5vtGAoQgOcCCRD9i8cgcxN8KGHBMaNL...", reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: 0, current_sign_in_at: nil, last_sign_in_at: nil, current_sign_in_ip: nil, last_sign_in_ip: nil, confirmation_token: nil, confirmed_at: "2013-02-14 03:58:24", confirmation_sent_at: "2013-02-14 03:58:23", unconfirmed_email: nil, failed_attempts: 0, unlock_token: nil, locked_at: nil, created_at: "2013-02-14 03:58:23", updated_at: "2013-02-14 03:58:24", login_name: "test1", slug: "test1", tos_agreement: nil, show_email: nil, location: nil, latitude: nil, longitude: nil> 
1.9.3p194 :002 > Role.all
  Role Load (0.1ms)  SELECT "roles".* FROM "roles" 
 => [] 
1.9.3p194 :003 > r = Role.create(:name => 'foo')
   (0.1ms)  begin transaction
  SQL (6.5ms)  INSERT INTO "roles" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Thu, 14 Feb 2013 04:01:29 UTC +00:00], ["description", nil], ["name", "foo"], ["updated_at", Thu, 14 Feb 2013 04:01:29 UTC +00:00]]
   (746.2ms)  commit transaction
 => #<Role id: 1, name: "foo", description: nil, created_at: "2013-02-14 04:01:29", updated_at: "2013-02-14 04:01:29"> 
1.9.3p194 :004 > m.roles << r
   (0.1ms)  begin transaction 
   (0.3ms)  INSERT INTO "members_roles" ("member_id", "role_id") VALUES (1, 1)
   (0.1ms)  rollback transaction
ActiveRecord::StatementInvalid: SQLite3::ConstraintException: constraint failed: INSERT INTO "members_roles" ("member_id", "role_id") VALUES (1, 1) 
```

（然后是一大堆追溯，除非有人要求，否则我不会费心重现。）

为什么我们会得到这个 ConstraintException？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T04:55:21.823

我相信您需要通过在迁移中的方法中指定来创建`members_roles`没有主键的表才能使用关联。`has_and_belongs_to_many``:id => false``create_table`

在 Rails 文档中有一个如何执行此操作的示例：http: [//api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_and_belongs_to_many](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_and_belongs_to_many)

# c++ - Bison / Flex 以相反的顺序处理令牌

> ID：14867679
> 
> 赞同：2
> 
> 时间：2013-02-14T04:10:35.007
> 
> 标签：c++, bison, flex-lexer, lex

所以我试图了解 Bison 和 Flex（以及两者如何结合）。我给出的示例语法很简单，

```
e → e plus t
e → t 
t → t TIMES f
t → f
f → LPAREN e RPAREN
f → ID 
```

我的测试输入只是“x”，我期望输出是：

```
"(e (t (f (ID x))))" 
```

我得到的实际输出是：

```
ID x f t 
```

我想知道为什么我的输出是向后的（我还没有添加括号）。这是我的 flex 和 bison 文件。

野牛：

```
%{
#include "expr-parse-defs.h"
#include <iostream>

    std::string AST;
%}

%union {
  char *sval;
}

%token <sval> ID PLUS TIMES LPAREN RPAREN

%%

e :  
    | e PLUS t          { AST += std::string("e ") + $2 + "t "; }
    | t                 { AST += "t "; }
    ;

t : 
    | t TIMES f         { AST += std::string("t ") + $2 + "f "; }  
    | f                 { AST += "f "; } 
    ;

f : 
    | LPAREN e RPAREN   { AST += $1 + std::string("e ") + $3; }
    | ID                { AST += std::string("ID ") + $1 + " " ; }
    ;

%%

int main() {
    yyparse();
    std::cout << AST;
    return 0;
} 
```

柔性：

```
%{
#include <cstring>
#include <string>
#include <sstream>
#include <cstdlib>
#include <iostream>
#include "expr-parse.tab.h"
#include "expr-parse-defs.h"

  using namespace std;
  int tokenpos = 0;

    char * process_token(const char* token){
        // we have to copy because we can't rely on yytext not changing underneath us:
        char *res = new char[strlen(yytext) + 3]; 
        strcpy(res, yytext);
        yylval.sval = res;
    }

%}

ID [a-zA-Z][a-zA-Z0-9_]*

%%
"+"   { yylval.sval = process_token("PLUS"); return PLUS; }
"*"   { yylval.sval = process_token("TIMES"); return TIMES; }
"("   { yylval.sval = process_token("LPAREN"); return LPAREN; }
")"   { yylval.sval = process_token("RPAREN"); return RPAREN; }
{ID}  { yylval.sval = process_token("ID"); return ID; } 
[\n]    

%%

int yyerror(const char *s) {
    cerr << "this is a bad error message and needs to be changed eventually" << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T07:14:32.857

Bison 生成一个[自底向上的](http://en.wikipedia.org/wiki/Bottom-up_parsing) [LALR(1)](http://en.wikipedia.org/wiki/LALR)解析器。你可以想象它的工作原理是这样的：

1.  它从词法分析器中读取一个标记，即一个`ID`.
2.  它看到没有零终结符后面跟着 的情况`ID`，所以它知道它可以简单地**移动**这个标记。现在它`ID`的堆栈上有那个终端。
3.  移动令牌后，它会再读取一个令牌，在您的情况下，这将是输入标记的结尾。
4.  与 an 唯一有效的事情`ID`是**将**其简化为`f`. 所以它适用`f → ID`，现在`f`它的堆栈上有一个。
5.  接下来它**减少**使用`t → f`以获得`t`.
6.  由于前瞻不是`TIMES`，因此该规则`t → t TIMES f`将不适用，因此它**减少了**使用`e → t`来获取`e`。
7.  由于前瞻也不`PLUS`是，所以这里也没有什么可以改变的。
8.  就像`e`根符号一样，前瞻是文件结束标记，你就完成了。

这种自下而上的操作对您来说可能看起来很奇怪，但通常比自上而下的解析更强大，并且还会导致更多描述性的错误消息。您可以看到它在什么时候使用前瞻来决定下一步。您还可以想象，如果您有实际数字并正在实现一些玩具计算器，这种自下而上的方法将允许您在解析整个表达式之前评估表达式的一部分。该手册有[关于算法的详细信息](http://www.gnu.org/software/bison/manual/html_node/Algorithm.html)。

> 我期望输出是：`"(e (t (f (ID x))))"`

然后这样写。举个例子：

```
%{
#include "expr-parse-defs.h"
#include <iostream>

#define YYSTYPE std::string;
%}

%token ID PLUS TIMES LPAREN RPAREN

%%

e :  
    | e PLUS t          { $$ = std::string("(e ") + $1 + " " + $3 + ")"; }
    | t                 { $$ = std::string("(e ") + $1 + ")"; }
    ;

[…] 
```

这使用字符串作为非终结符的语义值。请注意，您[不能将 C++ 与非 POD 类型](http://www.gnu.org/software/bison/manual/html_node/C_002b_002b-Semantic-Values.html#C_002b_002b-Semantic-Values)（如`std::string`. 现在，当解析器执行其规则时，您期望的形式的表达式被“从里到外”组装起来。使用单个`AST`变量的方法适用于您的简单示例，但是具有两个非终端子项的规则`e → e plus t`必须组合两个字符串。最好为此使用语义值。您可以定义自己的 C++ 类型来保存各种信息，例如术语的文本表示、数值和定义它的源中的位置。

# android - 使用拖放时系统崩溃并重新启动

> ID：14867682
> 
> 赞同：0
> 
> 时间：2013-02-14T04:10:48.587
> 
> 标签：android, android-imageview, ontouchlistener

我有一个布局，其中有 4 个图像视图。3图像视图将有球，猫和苹果图像的图像。我需要拖动 3 个中的任何 1 个并放入第 4 个图像视图。

**问题：** 当我开始拖动 3 个图像中的任何一个时，系统崩溃并重新启动。你能指导我解决这个问题吗？

## Java代码：

```
package com.example.draganddrop;

import android.os.Bundle;
import android.annotation.TargetApi;
import android.app.Activity;
import android.content.ClipData; 
import android.util.Log;
import android.view.DragEvent;
import android.view.MotionEvent;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.view.View.DragShadowBuilder;
import android.view.View.OnDragListener;
import android.view.View.OnTouchListener;
import android.widget.ImageView; 
import android.widget.Toast;

@TargetApi(11)
public class DragDropActivity extends Activity {

//text views being dragged and dropped onto
private ImageView option1, option2, option3, choice1;
String type;

@TargetApi(11)
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView(R.layout.activity_drag_drop);

    //get both sets of text views

    //views to drag
    option1 = (ImageView)findViewById(R.id.option_1);
    option2 = (ImageView)findViewById(R.id.option_2);
    option3 = (ImageView)findViewById(R.id.option_3);

    //views to drop onto
    choice1 = (ImageView)findViewById(R.id.choice_1); 

    //set touch listeners
    option1.setOnTouchListener(new ChoiceTouchListener( "ball"));
    option2.setOnTouchListener(new ChoiceTouchListener( "cat"));
    option3.setOnTouchListener(new ChoiceTouchListener( "apple" ));

    //set drag listeners
    choice1.setOnDragListener(new ChoiceDragListener(type)); 
}

/**
 * ChoiceTouchListener will handle touch events on draggable views
 *
 */
private final class ChoiceTouchListener implements OnTouchListener {
    ChoiceTouchListener(String typePassed){
        type = typePassed;
    }
    public boolean onTouch(View view, MotionEvent motionEvent) {
        if (motionEvent.getAction() == MotionEvent.ACTION_DOWN) { 

            switch (view.getId()){
            case R.id.option_1: 
                Log.i("DragDropActivity"," 1\. constructor dragging " + "ball" ); 
                break;  

            case R.id.option_2:  
                Log.i("DragDropActivity"," 2\. constructor dragging " + "cat" );  
                break; 
            case R.id.option_3:  
                Log.i("DragDropActivity"," 3\. constructor dragging " + "apple" );  
                break; 
            }

            ClipData data = ClipData.newPlainText("", "");
            DragShadowBuilder shadowBuilder = new View.DragShadowBuilder(view); 
            view.startDrag(data, shadowBuilder, view, 0);
            return true;
        } else {
            return false;
        }
    }
} 

/**
 * DragListener will handle dragged views being dropped on the drop area
 * - only the drop action will have processing added to it as we are not
 * - amending the default behavior for other parts of the drag process
 *
 */
private class ChoiceDragListener implements OnDragListener {

    ChoiceDragListener(String type){ 
        Log.i("DragDropActivity"," constructor dragging " + type );  
    }

    @Override
    public boolean onDrag(View v, DragEvent event) {
        View view = (View) event.getLocalState(); 
        switch (event.getAction()) { 
        case DragEvent.ACTION_DRAG_STARTED: 
            break;
        case DragEvent.ACTION_DRAG_ENTERED: 
            break;
        case DragEvent.ACTION_DRAG_EXITED:    
            break;
        case DragEvent.ACTION_DROP: 
            Log.i("DragDropActivity"," Image is : dropped   " );  

            break;
        case DragEvent.ACTION_DRAG_ENDED:  
            break;
        default:

            break;
        }

        return true;
    }
} 
    } 
```

## 我的设备的 LogCat

```
02-14 11:05:35.329: W/WindowManager(272): Drag is in progress but there is no drag window handle.
02-14 11:05:35.449: I/DragDropActivity(1259):  1\. constructor dragging ball
02-14 11:05:35.469: I/DragDropActivity(1259):  dragging apple
02-14 11:05:35.469: I/DragDropActivity(1259):  Image started dragging 
02-14 11:05:35.579: I/DragDropActivity(1259):  Image is : dropped   
02-14 11:05:35.579: I/ViewRootImpl(1259): Reporting drop result: true
02-14 11:05:35.579: W/WindowManager(272): Drag is in progress but there is no drag window handle.
02-14 11:05:35.689: I/DragDropActivity(1259):  1\. constructor dragging ball
02-14 11:05:35.709: I/DragDropActivity(1259):  dragging apple
02-14 11:05:35.709: I/DragDropActivity(1259):  Image started dragging 
02-14 11:05:35.819: I/DragDropActivity(1259):  Image is : dropped   
02-14 11:05:35.819: I/ViewRootImpl(1259): Reporting drop result: true
02-14 11:05:37.969: D/dalvikvm(658): GC_CONCURRENT freed 316K, 10% free 6751K/7495K, paused 2ms+2ms
02-14 11:05:38.069: D/dalvikvm(658): GC_FOR_ALLOC freed 391K, 11% free 6712K/7495K, paused 16ms
02-14 11:05:41.689: D/lights(272): set_light_buttons: brightness=0
02-14 11:05:45.249: D/dalvikvm(658): GC_CONCURRENT freed 493K, 12% free 6669K/7495K, paused 5ms+3ms
02-14 11:05:52.509: D/dalvikvm(658): GC_CONCURRENT freed 470K, 11% free 6693K/7495K, paused 5ms+3ms
02-14 11:05:59.729: D/dalvikvm(658): GC_CONCURRENT freed 310K, 9% free 6870K/7495K, paused 2ms+2ms
02-14 11:05:59.809: D/dalvikvm(658): GC_FOR_ALLOC freed 384K, 11% free 6712K/7495K, paused 15ms
02-14 11:06:06.989: D/dalvikvm(658): GC_CONCURRENT freed 487K, 12% free 6653K/7495K, paused 1ms+2ms
02-14 11:06:07.149: D/dalvikvm(489): GC_FOR_ALLOC freed 750K, 12% free 9190K/10439K, paused 22ms
02-14 11:06:07.229: D/dalvikvm(658): GC_CONCURRENT freed 354K, 11% free 6701K/7495K, paused 2ms+3ms
02-14 11:06:10.009: W/ActivityManager(272): Timeout of broadcast BroadcastRecord{2bff8c10 android.intent.action.TIME_TICK} - receiver=android.app.LoadedApk$ReceiverDispatcher$InnerReceiver@2bfb0bb8, started 10008ms ago
02-14 11:06:10.009: W/ActivityManager(272): Receiver during timeout: BroadcastFilter{2bfb0dc0 ReceiverList{2bfb0d48 272 system/1000 local:2bfb0bb8}}
02-14 11:06:15.380: I/3gw.Service(1245): Mobile Network not connected - not roaming
02-14 11:06:19.159: I/Process(272): Sending signal. PID: 272 SIG: 3
02-14 11:06:19.159: I/dalvikvm(272): threadid=3: reacting to signal 3
02-14 11:06:19.199: I/dalvikvm(272): Wrote stack traces to '/data/anr/traces.txt'
02-14 11:06:20.019: W/ActivityManager(272): Timeout of broadcast BroadcastRecord{2bff8c10 android.intent.action.TIME_TICK} - receiver=android.app.LoadedApk$ReceiverDispatcher$InnerReceiver@2bf1fbd0, started 10008ms ago
02-14 11:06:20.019: W/ActivityManager(272): Receiver during timeout: BroadcastFilter{2bf33818 ReceiverList{2bf42f58 272 system/1000 local:2bf1fbd0}}
02-14 11:06:21.479: D/dalvikvm(658): GC_CONCURRENT freed 414K, 11% free 6725K/7495K, paused 2ms+4ms
02-14 11:06:21.589: D/dalvikvm(658): GC_CONCURRENT freed 394K, 11% free 6720K/7495K, paused 2ms+3ms 
02-14 11:06:28.799: D/lights(272): set_light_backlight: brightness=102
02-14 11:06:28.799: D/dalvikvm(658): GC_CONCURRENT freed 497K, 11% free 6673K/7495K, paused 2ms+3ms
02-14 11:06:28.819: D/lights(272): set_light_backlight: brightness=96
02-14 11:06:29.039: D/lights(272): set_light_backlight: brightness=26
02-14 11:06:29.059: D/lights(272): set_light_backlight: brightness=20
02-14 11:06:35.931: D/lights(272): set_light_backlight: brightness=0
02-14 11:06:35.931: I/power(272): *** set_screen_state 0
02-14 11:06:35.939: D/DASH - select(272): sensors_select_callback: select canceled by request
02-14 11:06:35.939: D/DASH - select(272): sensors_select_callback: select canceled by request
02-14 11:06:35.939: D/DASH-bma250_input(272): bma250_input_config_delay: rate:66667000
02-14 11:06:35.949: D/kernel(135): [  255.657379] request_suspend_state: sleep (0->3) at 251806856750 (2013-02-14 05:36:35.936248755 UTC)
02-14 11:06:35.949: D/kernel(135): [  255.657470] as3676 0-0040: as3676_early_suspend
02-14 11:06:35.949: D/kernel(135): [  255.661346] cyttsp-spi spi0.0: cyttsp_suspend: Enter
02-14 11:06:35.969: D/SurfaceFlinger(126): About to give-up screen, flinger = 0xfc48
02-14 11:06:36.089: D/dalvikvm(658): GC_CONCURRENT freed 472K, 11% free 6698K/7495K, paused 6ms+3ms
02-14 11:06:36.389: D/kernel(135): [  256.102478] active wake lock PowerManagerService
02-14 11:06:36.389: D/kernel(135): [  256.102539] active wake lock usb_bus_active
02-14 11:06:36.389: D/kernel(135): [  256.102569] active wake lock msm_otg
02-14 11:06:36.389: D/kernel(135): [  256.102600] active wake lock bq24185_watchdog_lock
02-14 11:06:36.389: D/kernel(135): [  256.102661] wake lock mmc_delayed_work, expired
02-14 11:06:49.205: W/Watchdog(272): WATCHDOG PROBLEM IN SYSTEM SERVER: com.android.server.wm.WindowManagerService
02-14 11:06:49.209: I/Process(272): Sending signal. PID: 272 SIG: 3
02-14 11:06:49.209: I/dalvikvm(272): threadid=3: reacting to signal 3
02-14 11:06:49.249: I/dalvikvm(272): Wrote stack traces to '/data/anr/traces.txt'
02-14 11:06:49.249: I/Process(272): Sending signal. PID: 459 SIG: 3
02-14 11:06:49.249: I/dalvikvm(459): threadid=3: reacting to signal 3
02-14 11:06:49.259: I/dalvikvm(459): Wrote stack traces to '/data/anr/traces.txt'
02-14 11:06:51.265: I/Watchdog_N(272): dumpKernelStacks
02-14 11:06:51.265: E/Watchdog_N(272): Unable to open stack of tid 272 : 13 (Permission denied)
02-14 11:06:51.265: E/Watchdog_N(272): Unable to open stack of tid 274 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 277 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 278 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 279 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 280 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 281 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 282 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 283 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 288 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 289 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 291 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 292 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 293 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 294 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 296 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 297 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 298 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 299 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 300 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 302 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 303 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 304 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 305 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 306 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 307 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 308 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 309 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 310 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 312 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 313 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 314 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 316 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 317 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 318 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 327 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 328 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 329 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 330 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 331 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 332 : 13 (Permission denied)
02-14 11:06:51.269: E/Watchdog_N(272): Unable to open stack of tid 333 : 13 (Permission denied)
02-14 11:06:51.279: E/Watchdog_N(272): Unable to open stack of tid 334 : 13 (Permission denied)
02-14 11:06:51.279: E/Watchdog_N(272): Unable to open stack of tid 335 : 13 (Permission denied)
02-14 11:06:51.279: E/Watchdog_N(272): Unable to open stack of tid 336 : 13 (Permission denied)
02-14 11:06:51.279: E/Watchdog_N(272): Unable to open stack of tid 337 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 338 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 339 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 340 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 341 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 342 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 343 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 352 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 353 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 359 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 362 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 363 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 415 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 417 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 430 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 450 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 452 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 455 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 457 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 475 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 488 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 490 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 494 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 511 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 547 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 588 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 590 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 592 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 597 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 598 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 623 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 624 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 767 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 881 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 882 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 883 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 884 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 969 : 13 (Permission denied)
02-14 11:06:51.289: E/Watchdog_N(272): Unable to open stack of tid 1352 : 13 (Permission denied)
02-14 11:06:51.369: D/dalvikvm(272): GC_FOR_ALLOC freed 1407K, 17% free 12077K/14471K, paused 70ms
02-14 11:06:53.297: I/Process(272): Sending signal. PID: 272 SIG: 9
02-14 11:06:53.297: W/Watchdog(272): *** WATCHDOG KILLING SYSTEM PROCESS: com.android.server.wm.WindowManagerService
02-14 11:06:53.319: E/ViewRootImpl(1259): Unable to report drop result
02-14 11:06:53.319: I/ServiceManager(121): service 'content' died
02-14 11:06:53.319: I/ServiceManager(121): service 'netpolicy' died
02-14 11:06:53.319: I/ServiceManager(121): service 'power' died
02-14 11:06:53.319: I/ServiceManager(121): service 'bluetooth_a2dp' died
02-14 11:06:53.319: I/ServiceManager(121): service 'entropy' died
02-14 11:06:53.319: I/ServiceManager(121): service 'telephony.registry' died
02-14 11:06:53.319: I/ServiceManager(121): service 'cpuinfo' died
02-14 11:06:53.319: I/ServiceManager(121): service 'gfxinfo' died
02-14 11:06:53.319: I/ServiceManager(121): service 'account' died
02-14 11:06:53.319: I/ServiceManager(121): service 'textservices' died
02-14 11:06:53.319: I/ServiceManager(121): service 'statusbar' died
02-14 11:06:53.319: I/ServiceManager(121): service 'input_method' died
02-14 11:06:53.319: I/ServiceManager(121): service 'notification' died
02-14 11:06:53.319: I/ServiceManager(121): service 'devicestoragemonitor' died
02-14 11:06:53.319: I/ServiceManager(121): service 'accessibility' died
02-14 11:06:53.319: I/ServiceManager(121): service 'activity' died
02-14 11:06:53.319: I/ServiceManager(121): service 'permission' died
02-14 11:06:53.319: I/ServiceManager(121): service 'meminfo' died
02-14 11:06:53.319: I/ServiceManager(121): service 'network_management' died
02-14 11:06:53.319: I/ServiceManager(121): service 'netstats' died
02-14 11:06:53.319: I/ServiceManager(121): service 'clipboard' died
02-14 11:06:53.319: I/ServiceManager(121): service 'connectivity' died
02-14 11:06:53.319: I/ServiceManager(121): service 'wifi' died
02-14 11:06:53.319: I/ServiceManager(121): service 'mount' died
02-14 11:06:53.319: I/ServiceManager(121): service 'throttle' died
02-14 11:06:53.319: I/ServiceManager(121): service 'batteryinfo' died
02-14 11:06:53.319: I/ServiceManager(121): service 'usagestats' died
02-14 11:06:53.319: I/ServiceManager(121): service 'sensorservice' died
02-14 11:06:53.319: I/ServiceManager(121): service 'wifip2p' died
02-14 11:06:53.319: I/ServiceManager(121): service 'package' died
02-14 11:06:53.319: I/ServiceManager(121): service 'bluetooth' died
02-14 11:06:53.319: I/ServiceManager(121): service 'audio' died
02-14 11:06:53.319: I/ServiceManager(121): service 'usb' died
02-14 11:06:53.319: I/ServiceManager(121): service 'uimode' died
02-14 11:06:53.319: I/ServiceManager(121): service 'backup' died
02-14 11:06:53.319: I/ServiceManager(121): service 'appwidget' died
02-14 11:06:53.319: I/ServiceManager(121): service 'diskstats' died
02-14 11:06:53.319: I/ServiceManager(121): service 'samplingprofiler' died
02-14 11:06:53.319: I/ServiceManager(121): service 'search' died
02-14 11:06:53.319: I/ServiceManager(121): service 'dropbox' died
02-14 11:06:53.319: I/ServiceManager(121): service 'wallpaper' died
02-14 11:06:53.319: I/ServiceManager(121): service 'location' died
02-14 11:06:53.319: I/ServiceManager(121): service 'country_detector' died
02-14 11:06:53.319: I/ServiceManager(121): service 'hardware' died
02-14 11:06:53.319: I/ServiceManager(121): service 'vibrator' died
02-14 11:06:53.319: I/ServiceManager(121): service 'battery' died
02-14 11:06:53.319: I/ServiceManager(121): service 'alarm' died
02-14 11:06:53.319: I/ServiceManager(121): service 'device_policy' died
02-14 11:06:53.319: I/ServiceManager(121): service 'window' died
02-14 11:06:53.319: W/AudioFlinger(143): power manager service died !!!
02-14 11:06:53.319: W/Sensors(1168): sensorservice died [0x165178]
02-14 11:06:53.319: W/Sensors(489): sensorservice died [0x204e88]
02-14 11:06:53.319: W/Sensors(459): sensorservice died [0x184328]
02-14 11:06:53.319: I/ActivityThread(1562): Removing dead content provider: settings
02-14 11:06:53.319: I/ActivityThread(1543): Removing dead content provider: settings
02-14 11:06:53.319: I/ActivityThread(1522): Removing dead content provider: settings
02-14 11:06:53.319: I/ActivityThread(1449): Removing dead content provider: settings
02-14 11:06:53.319: I/ActivityThread(1168): Removing dead content provider: settings
02-14 11:06:53.319: I/ActivityThread(1245): Removing dead content provider: settings
02-14 11:06:53.319: I/ActivityThread(489): Removing dead content provider: settings
02-14 11:06:53.319: I/ActivityThread(1099): Removing dead content provider: settings
02-14 11:06:53.319: I/ActivityThread(658): Removing dead content provider: settings
02-14 11:06:53.319: I/ActivityThread(418): Removing dead content provider: settings
02-14 11:06:53.319: I/ActivityThread(459): Removing dead content provider: settings
02-14 11:06:53.319: I/ActivityThread(443): Removing dead content provider: settings
02-14 11:06:53.329: D/kernel(135): [  273.043487] binder: release 272:283 transaction 34753 in, still active
02-14 11:06:53.329: D/kernel(135): [  273.043518] binder: send failed reply for transaction 34753 to 658:1079
02-14 11:06:53.329: D/kernel(135): [  273.043548] binder: release 272:884 transaction 34264 in, still active
02-14 11:06:53.329: D/kernel(135): [  273.043548] binder: send failed reply for transaction 34264 to 1259:1259
02-14 11:06:53.329: I/ActivityThread(349): Removing dead content provider: settings
02-14 11:06:53.389: E/installd(130): eof
02-14 11:06:53.389: E/installd(130): failed to read size
02-14 11:06:53.389: I/installd(130): closing connection
02-14 11:06:53.419: D/kernel(135): [  273.138488] binder: 658:1079 transaction failed 29189, size 64-0
02-14 11:06:53.429: D/kernel(135): [  273.145935] alarm_release: clear alarm, pending 0
02-14 11:06:53.429: D/kernel(135): [  273.145965] alarm_release: clear alarm, pending 0
02-14 11:06:53.429: D/kernel(135): [  273.145965] alarm_release: clear alarm, pending 0
02-14 11:06:53.429: D/kernel(135): [  273.145965] alarm_release: clear alarm, pending 0
02-14 11:06:53.449: W/Display(658): Unable to get display size
02-14 11:06:53.449: W/Display(658): android.os.DeadObjectException
02-14 11:06:53.449: W/Display(658): 
02-14 11:06:53.449: W/Display(658): 
02-14 11:06:53.449: W/Display(658): 
02-14 11:06:53.449: W/Display(658): 
02-14 11:06:53.449: W/Display(658): 
02-14 11:06:53.449: W/Display(658): 
02-14 11:06:53.449: W/Display(658): 
02-14 11:06:53.449: W/Display(658): 
02-14 11:06:53.449: D/libEGL(1741): loaded /system/lib/egl/libGLES_android.so
02-14 11:06:53.459: D/libEGL(1741): loaded /system/lib/egl/libEGL_adreno200.so
02-14 11:06:53.459: D/libEGL(1741): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
02-14 11:06:53.459: D/libEGL(1741): loaded /system/lib/egl/libGLESv2_adreno200.so
02-14 11:06:53.469: W/Display(658): Unable to get display size
02-14 11:06:53.469: W/Display(658): android.os.DeadObjectException
02-14 11:06:53.469: W/Display(658): 
02-14 11:06:53.469: W/Display(658): 
02-14 11:06:53.469: W/Display(658): 
02-14 11:06:53.469: W/Display(658): 
02-14 11:06:53.469: W/Display(658): 
02-14 11:06:53.469: W/Display(658): 
02-14 11:06:53.469: W/Display(658): 
02-14 11:06:53.469: W/Display(658): 
02-14 11:06:53.469: W/Display(658): 
02-14 11:06:53.499: W/dalvikvm(658): threadid=11: thread exiting with uncaught exception (group=0x2b542210)
02-14 11:06:53.519: E/InputQueue-JNI(489): channel '2bf9eb68 com.sonyericsson.home/com.sonyericsson.home.HomeActivity (client)' ~ Publisher closed input channel or an error occurred.  events=0x8
02-14 11:06:53.529: D/kernel(135): [  273.240631] device rmnet0 left promiscuous mode
02-14 11:06:53.539: E/InputQueue-JNI(349): channel '2bf685c0 com.android.systemui.ImageWallpaper (client)' ~ Publisher closed input channel or an error occurred.  events=0x8
02-14 11:06:53.549: E/InputQueue-JNI(349): channel '2c070728 StatusBar (client)' ~ Publisher closed input channel or an error occurred.  events=0x8
02-14 11:06:53.559: E/AndroidRuntime(658): FATAL EXCEPTION: Thread-55
02-14 11:06:53.559: E/AndroidRuntime(658): java.lang.NullPointerException
02-14 11:06:53.559: E/AndroidRuntime(658): 
02-14 11:06:53.559: E/AndroidRuntime(658): 
02-14 11:06:53.559: E/AndroidRuntime(658): 
02-14 11:06:53.559: E/AndroidRuntime(658): 
02-14 11:06:53.559: E/AndroidRuntime(658): 
02-14 11:06:53.559: E/AndroidRuntime(658): 
02-14 11:06:53.559: E/AndroidRuntime(658): 
02-14 11:06:53.559: E/AndroidRuntime(658): 
02-14 11:06:53.559: D/BootAnimation(1741): persist.sys.boot.sound.volume:26
02-14 11:06:53.559: I/BootAnimation(1741): mp3 is null
02-14 11:06:53.599: E/InputQueue-JNI(349): channel '2c0aaec8 StatusBarExpanded (client)' ~ Publisher closed input channel or an error occurred.  events=0x8
02-14 11:06:53.599: E/InputQueue-JNI(349): channel '2bfbbce8 TrackingView (client)' ~ Publisher closed input channel or an error occurred.  events=0x8
02-14 11:06:53.599: E/InputQueue-JNI(1259): channel '2c0182b0 com.example.draganddrop/com.example.draganddrop.DragDropActivity (client)' ~ Publisher closed input channel or an error occurred.  events=0x8
02-14 11:06:53.609: E/InputQueue-JNI(349): channel '2bfee2d0 RecentsPanel (client)' ~ Publisher closed input channel or an error occurred.  events=0x8
02-14 11:06:53.609: E/InputQueue-JNI(459): channel '2c0ae360 com.android.phone/com.android.phone.SemcInCallScreen (client)' ~ Publisher closed input channel or an error occurred.  events=0x8
02-14 11:06:53.609: I/Zygote(127): Exit zygote because system server (272) has terminated
02-14 11:06:53.609: E/AndroidRuntime(658): Error reporting crash
02-14 11:06:53.609: E/AndroidRuntime(658): android.os.DeadObjectException
02-14 11:06:53.609: E/AndroidRuntime(658): 
02-14 11:06:53.609: E/AndroidRuntime(658): 
02-14 11:06:53.609: E/AndroidRuntime(658): 
02-14 11:06:53.609: E/AndroidRuntime(658): 
02-14 11:06:53.609: E/AndroidRuntime(658): 
02-14 11:06:53.619: I/Process(658): Sending signal. PID: 658 SIG: 9
: E/(): Device disconnected 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:10:47.857

原因是：你的屏幕上传action_move太懒了。

在正常情况下，即使您的手指不在屏幕上移动，动作动作也会非常频繁地上传。但有些手机屏幕不是那么敏感。

您可以修改手机的阈值。它需要内核支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:24:01.753

这发生在 action_drop 之后

当拖放发生时，windowmanager 将取消注册在拖动开始时注册的输入通道。

错误是 unregisterInputChannel 无法获得锁定并挂起。这是一个僵局。

大约 30 秒后，看门狗将杀死 system_server 以重新启动 android java world。

# asynchronous - 如何使用消息队列构建多步骤流程？

> ID：14867683
> 
> 赞同：5
> 
> 时间：2013-02-14T04:10:53.197
> 
> 标签：asynchronous, rabbitmq, message-queue, amqp

假设我有一个具有以下限制的多步骤异步过程：

1.  任何工人都可以执行各个步骤
2.  步骤必须按顺序执行

我正在考虑的方法：

1.  插入代表整个过程的 db 行，并带有“已完成的步骤”列以跟踪进度。
2.  订阅将在整个过程完成后接收消息的队列。
3.  完成每个步骤后，更新数据库行并将流程中的下一步排队。
4.  最后一步完成后，将“进程完成”消息排队。
5.  删除数据库行。

想法？陷阱？更聪明的方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T06:41:18.473

我已经构建了一个与您在大型任务密集型文档处理系统中描述的系统非常相似的系统，并且在过去的 7 年中不得不忍受优缺点。您的方法可靠且可行，但我看到了一些缺点：

*   可能容易受到状态变化的影响（即，如果在所有步骤排队之前流程输入发生变化，那么后面的步骤可能与前面的步骤有不一致的输入）

*   比您想要的更多的基础设施，涉及数据库和队列=更多的故障点，更难设置，需要更多的文档=感觉不太对

*   你如何防止多个工人同时在同一个步骤上行动？换句话说，DB 行说 4 个步骤已完成，工作进程如何知道它是否可以执行 #5？它不需要知道另一个进程是否已经在处理这个问题吗？您需要以一种或另一种方式（DB 或 MQ）包括用于锁定的附加状态。

*   您的示例对失败具有鲁棒性，但没有解决并发问题。当您添加状态来解决并发问题时，故障处理就会成为一个严重的问题。例如，一个进程执行第 5 步，然后将 DB 行置于“工作”状态。然后，当该过程失败时，第 5 步将停留在“工作”状态。

*   您的协调器有点重，因为它正在执行大量同步数据库操作，我担心它可能无法像架构的其余部分那样扩展，因为只能有其中一个......这取决于与数据库事务相比，您的步骤运行时间有多长——这可能只会成为一个非常大规模的问题。

如果让我重来一遍，我肯定会将更多的编排工作推到工作进程上。因此，编排代码很常见，可以被任何工作进程调用，但我会尽可能保持中央控制进程的轻量级。我也将只使用消息队列而不是任何数据库来保持架构简单且同步性较低。

我将创建一个包含 2 个队列的交换：IN 和 WIP（正在进行中）

中央进程负责订阅进程请求，并检查 WIP 队列中的超时步骤。

1）当中央进程收到一个给定处理（X）的请求时，它调用编排代码，并将第一个任务（X1）加载到IN队列中

2) 第一个可用的工作进程 (P1) 以事务方式将 X1 出列，并将其加入 WIP 队列，并使用保守的生存时间 (TTL) 超时值。这种出队是原子的，在 IN 中没有其他 X 任务，因此没有第二个进程可以处理 X 任务。

3）如果P1突然终止，除了超时，地球上没有架构可以保存这个过程。在超时时间结束时，中央进程将在 WIP 中找到超时的 X1，并将事务性地从 WIP 中将 X1 出列并将其重新入队，并提供适当的通知。

4) 如果 P1 异常但优雅地终止，则工作进程将以事务方式将 X1 从 WIP 中出列并将其重新入队，并提供适当的通知。根据异常情况，工作进程还可以选择重置 TTL 并重试该步骤。

5) 如果 P1 无限期挂起，或超过其 TTL，则结果与 #3 相同。中央进程处理它，并且可能工作进程将在某个时候被回收——或者规则可以是在超时时回收工作进程。

6) 如果 P1 成功，那么工作进程将决定下一步，是 X2 还是 X-done。如果下一步是 X2，那么工作进程将以事务方式将 X1 从 WIP 中出列，并将 X2 入队到 IN。如果下一步是 X-done，则处理完成，可以采取适当的操作，也许这会将 X-done 排入 IN 以供编排器进行后续处理。

我建议的方法的好处是：

*   指定工作进程之间的争用

*   处理所有可能的失败场景（崩溃、异常、挂起和成功）

*   简单的架构可以完全用RabbitMQ实现，无需数据库，扩展性更强

*   由于工作人员处理下一步的确定和排队，因此有一个更轻量级的编排器，从而产生一个更具可扩展性的系统

唯一真正的缺点是它可能容易受到状态变化的影响，但这通常不会引起关注。只有您可以知道这是否会成为您系统中的问题。

我对此的最终想法是：您应该有充分的理由进行这种编排。毕竟，如果进程 P1 完成了任务 X1，现在是某个进程处理下一个任务 X2 的时候了，看起来 P1 将是一个非常好的候选者，因为它刚刚完成了 X1 并且现在可用。按照这种逻辑，一个流程应该只完成所有步骤直到完成——如果任务需要按顺序完成，为什么要混合和匹配流程呢？唯一的异步边界实际上是在客户端和工作进程之间。但我会假设您有充分的理由这样做，例如，进程可以在不同的和/或资源专用的机器上运行。

# coq - 抽象导致术语错误类型...但类型良好

> ID：14867685
> 
> 赞同：1
> 
> 时间：2013-02-14T04:11:19.357
> 
> 标签：coq

我被一个问题困住了一段时间，为此我得出了一个较小的独立示例：

```
Axiom f : nat -> Set.

Goal forall (n : nat) (e : n = n) (x : f n),
  match e in _ = _n return f _n -> Prop with
  | Logic.eq_refl => fun v : f n => v = x
  end x. 
```

现在，如果您尝试`destruct e`，您会收到以下错误消息：

```
Error: Abstracting over the terms "n0" and "e" leads to a term
"fun (n0 : nat) (e : n0 = n0) =>
 forall x : f n0,
 match e in (_ = _n) return (f _n -> Prop) with
 | Logic.eq_refl => fun v : f n0 => v = x
 end x" which is ill-typed. 
```

在挠了一阵头之后，我无法弄清楚那个术语中的错误类型......所以我尝试了这个：

```
Definition illt :=
  fun (n : nat) (e : n = n) =>
  forall x : f n,
  match e in _ = _n return f _n -> Prop with
  | Logic.eq_refl => fun v : f n => v = x
  end x. 
```

Coq 接受它，在 type `forall n : nat, n = n -> Prop`。

那么，此错误消息有什么问题，我该如何解决/调整我的初始目标？

* * *

顺便说一句，这都是coq8.3。如果这是 8.4 中修复的问题，请告诉我，我很抱歉！:)

* * *

编辑：为了解决 Robin Green 的评论，这里是`Set Printing All`错误消息的版本：

```
Error: Abstracting over the terms "n0" and "e" leads to a term
"fun (n0 : nat) (e : @eq nat n0 n0) =>
 forall x : f n0,
 match e in (@eq _ _ _n) return (f _n -> Prop) with
 | eq_refl => fun v : f n0 => @eq (f n0) v x
 end x" which is ill-typed. 
```

这是一个类型良好的术语，没有什么是隐含的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T18:14:19.193

这是该问题的可能解释。也可以使用定理来描述构造模式匹配构造时发生的情况。这是我对您案例中使用的定理的看法。

```
Check eq_rect.

eq_rect
 : forall (A : Type) (x : A) (P : A -> Type),
   P x -> forall y : A, x = y -> P y 
```

因此，当对等式进行模式匹配时，您必须提供一个公式 P 参数化**任何** `y`恰好可证明等于 的值`x`。直观地说，你应该可以用 替换你的模式匹配表达式`apply eq_rect`，但是应该出现的属性 P 超出了 Coq 可以猜测的范围，因为`x`公式中的每次出现都必然是类型`f n`，不能只输入类型`f m`where `m = n`。错误消息没有说，这可能是一个错误。

为了执行您的证明，我建议使用相等的证明在某些类型的类型中是唯一的并且`nat`属于此类的事实。这在文件 Eqdep_dec 中处理。

```
Require Eqdep_dec Arith. 
```

现在你的证明很容易通过。

```
Goal forall n (x : f n) (e : n = n),
  match e in _ = _n return f _n -> Prop with
  | Logic.eq_refl => fun v : f n => v = x
  end x.
intros n x e; replace e with (eq_refl n).
  reflexivity.
apply Eqdep_dec.UIP_dec, eq_nat_dec.
Qed. 
```

现在，这个解决方案可能会让人感到不满意。这`UIP_dec`是从哪里来的？UIP 代表*身份证明的唯一性，*不幸的是，不能保证所有任意类型的此属性。对于可以确定相等性（如 表示`UIP_dec`）的所有类型，例如 ，它都得到保证`nat`。

# php - PHP/Mysql 比较上传的文件，确保没有多余的数据

> ID：14867686
> 
> 赞同：0
> 
> 时间：2013-02-14T04:11:24.567
> 
> 标签：php, mysql

所以我将上传的文件存储在 mysql 数据库中。为了确保数据库中没有重复文件，我创建了一个非常文件的 md5 哈希并将其存储起来。

在文件上传时，我得到新文件的哈希值并检查它是否已经存在于数据库中。

**数据库表**

id、file_name、file_binary、file_hash

现在，由于我发现存在哈希冲突的可能性，我想逐字节比较文件。

使用 PHP/Mysql 执行此操作的最佳和最快方法是什么，或者确保文件不上传两次（以节省存储空间）的最佳方法是什么。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T08:55:57.180

降低已经很小的冲突风险的一种方法是使用不同的算法（如 SHA1）创建另一个散列。

**数据库表**

> id、file_name、file_binary、file_hash_md5、file_hash_sha1

检查查询可能如下所示：

```
SELECT id FROM files_table WHERE file_hash_md5 = '78b7d929110959d1de58a32e9d331512' AND file_hash_sha1 = 'cc73882a1395af392b6cb005c45d19869bfa485a' 
```

# html - jquery中许多列表项的滑动事件

> ID：14867688
> 
> 赞同：0
> 
> 时间：2013-02-14T04:11:48.330
> 
> 标签：html, jquery-mobile, jquery

在我的 Phonegap Android 应用程序中，我有一个项目列表，我为列表中的每个项目设置了滑动事件。我已经为列表中的每个项目分配了一个唯一的 ID，但是如何使用 Jquery 获取刷过项目的 ID。下面是我写的代码。

```
for (var i = 0; i < (TotalNoOfCity); i++)
{
        $('#CityList').append('<a href="CityList.html" id="swipe' + ListOfCities[i][0] + '" onclick="CityID=' + ListOfCities[i][0] + ';CityName=' + '\'' + ListOfCities[i][1] + '\';">\
            <div class="listbox">\
                    <div class="listboxtext">' + ListOfCities[i][1] + '</div>\
                    <div class="listboxIcon" class="ui-btn-right" class="ui-btn-right">\
                    </div>\
                    <div class="clear"></div>\
            </div>\
            </a>\
            <div class="clear"></div>');
$('#swipe'+ ListOfCities[i][0]).live('swiperight', function() {

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:32:35.913

在触发滑动事件时调用的处理函数中，$(this) 表示嵌入元素的 jQuery 对象。此外，您忘记将 swipeEvent 作为处理程序函数的参数（取决于您在做什么，它可能很有用）。

# c# - 用于选择和转换 XML 编码的文件系统观察程序

> ID：14867689
> 
> 赞同：0
> 
> 时间：2013-02-14T04:12:02.253
> 
> 标签：c#, xml

我正在使用文件系统观察程序来选择和转换文件的编码，文件在目的地被复制但没有转换。我之前使用过以下代码：

```
 string xml = File.ReadAllText(FileName,ansi);
        XDocument xmlDoc = XDocument.Parse(xml);
             Console.WriteLine("1st");
              File.WriteAllText(
                 FileName,
                  @"<?xml version=""1.0"" encoding=""utf-8""?>" +  xml.ToString(),
                   utf8
               );

             if (File.Exists(destinationFile))
                    File.Delete(destinationFile);
                File.Copy(FileName, destinationFile,true);
                Console.WriteLine("File Copied" + "  " + DateTime.Now.ToString("HH:mm:ss tt")); // for troubleshoooting only
                Console.WriteLine("Press \'q\' to quit."); 
                Console.Write(CrL); 
```

但这现在不起作用，因为我现在得到的 xml 文件包含以下标头：

```
 <?xml version="1.0" encoding="WINDOWS-1256"?> 
```

之前有人建议我使用以下代码：

```
var doc = new XmlDocument();
doc.Load(FileName);

XmlWriterSettings settings = new XmlWriterSettings { Encoding = Encoding.UTF8, Indent=true };

 using (var fileStream = File.OpenWrite(destinationFile))
{
 using (var writer = XmlWriter.Create(fileStream, settings))
 {

    doc.Save(writer);
  }
} 
```

但这根本没有进行转换。目的地。文件仍然是ansi。它没有转换为 utf8。我在这里做错了吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:14:38.567

`XmlWriter`您正在通过以下代码用原​​始文件重写输出文件（由 写入的文件）：

```
if (File.Exists(destinationFile))
    File.Delete(destinationFile);
File.Copy(fileName, destinationFile, true); 
```

只需删除这些代码行。

# 更新

使用 Windows-1256 编码编写 XML 文档：

```
var settings = new XmlWriterSettings
    {
        Encoding = Encoding.GetEncoding("windows-1256"),
        Indent = true
    }; 
```

# android - Android 无法设置特定日期来启动功能

> ID：14867692
> 
> 赞同：1
> 
> 时间：2013-02-14T04:12:29.480
> 
> 标签：android

如果我将函数“scheduleAtFixedRate”中的参数从 0 更改为 date，它将每毫秒执行一次函数 updateProfile，例如 2013/02/13 11:55:0001 ...0002...0003...

但我想要的是 updateProfile 只会在日期“2013/02/13 11:55:00”之后执行一次。该函数将每 5 秒执行一次。

为什么更改会导致该事件？

*ps updateProfile 函数在后台执行 ini 一个新线程。

```
 try {
        date = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss", Locale.ENGLISH).parse("2013/02/13 11:55:00");

        TimerTask updateProfile = new Controller(context);
                    //timer.scheduleAtFixedRate(updateProfile, 0, 5000);
        timer.scheduleAtFixedRate(updateProfile, date, 5000);

    } catch (ParseException e) {
        e.printStackTrace();
    } 
```

# c++ - this 指针和构造函数

> ID：14867693
> 
> 赞同：0
> 
> 时间：2013-02-14T04:12:43.443
> 
> 标签：c++

我可以在构造函数完成之前安全地在类外部使用这个指针吗（我不是说从构造函数调用虚函数）？

我的意思是这样的：

```
#include <iostream>

class Bar;

class Foo
{
public:
   Foo(Bar* bar);
};

class Bar
{
public:
   Bar() : instance(this) {}
   void foo()
   {
      std::cout << "Bar::foo() \n";
   }

private:
   Foo instance;
};

Foo::Foo(Bar* bar)
{
   bar->foo(); // UB or not
}

int main()
{
   Bar instance;
} 
```

当我尝试在 MSVC-11.0 中编译此代码时，我收到以下警告

> 警告 C4355：“this”：在基本成员初始化列表中使用

那么这样的代码呢？

```
#include <iostream>

class Foo;

void bar(Foo* instance);

class Foo
{
public:
   Foo()
   {
      bar(this);
   }

   void foo()
   {
      std::cout << "Foo::foo() \n";
   }
};

void bar(Foo* instance)
{
   instance->foo(); // UB or not
}

int main()
{
   Foo instance;
} 
```

我找不到任何来自标准的报价。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:19:14.710

`Foo`当第二个示例中的ctor 或`bar`函数**不**调用引用**仍然未初始化**的`Bar`/成员的 smth时，这将起作用`Foo`。我会稍微改变你的第一个例子来演示：

```
class Bar
{
public:
    Bar() : instance(this),zzz(123) {}
    void foo()
    {
        std::cout << "Bar::foo(): garbage in zzz=" << zzz << "\n";
    }

private:
    Foo instance;
    int zzz;
}; 
```

# jquery - jQuery：隐藏隐藏元素

> ID：14867694
> 
> 赞同：0
> 
> 时间：2013-02-14T04:12:46.480
> 
> 标签：jquery, html

也许是一个奇怪的问题 -

我设计了一个非常简单的幻灯片。部分幻灯片包括一些文本，当您将鼠标悬停在幻灯片 div 上时会出现这些文本。当您将鼠标移出幻灯片 div 时，此文本应该会消失 - 它会在当前显示的幻灯片上消失。但是在旋转时，人们发现之前隐藏文本的幻灯片仍在显示（可能是因为无法隐藏其父元素已经隐藏的元素）。所以...

在隐藏父元素的同时，我是否可以隐藏这些子元素？

这是一些代码，我可以提供更多。

```
$("#banner").hoverIntent(function(){
    $(".bannercontrols, .bannerblurb").show('slow');
    clearTimeout(timer);
},function(){
    $(".bannercontrols, .bannerblurb").hide('slow');
    timer = setTimeout(function(){ beginRotation(); },slidetime);
}); 
```

谢谢你的帮助。下面的 HTML - 很长，但让您了解设置 - 所有各个部分都是预先编写的，然后根据需要隐藏/显示。

```
<div id="banner" style="position:relative; width:595px; height:254px; background-color:#000; margin:0 0 7px 30px; font-family:'Trebuchet MS', Arial, Helvetica, sans-serif;">

        <div style="position:absolute; width:595px; height:254px;">
                            <img class="bannerimg" 
                     src="williams-ftr.jpg" />
                            <img class="bannerimg" 
                     src="ftr.jpg" />
                            <img class="bannerimg" 
                     src="cassin-ftr.jpg" />
                            <img class="bannerimg" 
                     src="what-do-we-do-feature.jpg" />
                    </div>

        <div id="banner-prev" class="bannercontrols" style="position:absolute; z-index:999; top:100px; left:5px; cursor:pointer;">
            <img width="25" src="/images/banner-prev.png" />
        </div>

        <div id="banner-next" class="bannercontrols" style="position:absolute; z-index:999; top:100px; right:5px; cursor:pointer;">
            <img width="25" src="/images/banner-next.png" />
        </div>

        <div style="position:absolute; text-align:right; padding:3px 5px; color:#FFF; width:585px; left:0; top:0; background-image:url(/images/black-55.png)">

            <div style="font-size:10px;">
                <em>Wednesday, February 13th, 2013</em>
            </div>

        </div>

        <div class="textblock" style="position:absolute; padding:5px 10px 12px 5px; color:#FFF; width:580px; height:auto; left:0; bottom:0; background-image:url(/images/black-55.png);">
                            <div class="bannertext" style="display:none">
                    <a class="banner" href="/">
                        <div class="bannertitle">
                            TITLE
                        </div>
                        <div class="bannerblurb" 
                             style="display:none; font-size:12px; font-family:Georgia, 'Times New Roman', Times, serif">
                           blurb blurb blurb                      </div>
                    </a>        
                </div>
                            <div class="bannertext" style="display:none">
                    <a class="banner" href="/">
                        <div class="bannertitle">
                            TITLE
                        </div>
                        <div class="bannerblurb" 
                             style="display:none; font-size:12px; font-family:Georgia, 'Times New Roman', Times, serif">
                            blurb blurb blurb </div>
                    </a>        
                </div>
                            <div class="bannertext" style="display:none">
                    <a class="banner" href="/">
                        <div class="bannertitle">
                            TITLE
                            </span>
                        </div>
                        <div class="bannerblurb" 
                             style="display:none; font-size:12px; font-family:Georgia, 'Times New Roman', Times, serif">
                            blurb blurb blurb </div>
                    </a>        
                </div>
                            <div class="bannertext" style="display:none">
                    <a class="banner" href="/">
                        <div class="bannertitle">
                            <span style="font-size:22px;"><span style="font-size: 80%;">TITLE
                            </span>
                        </div>
                        <div class="bannerblurb" 
                             style="display:none; font-size:12px; font-family:Georgia, 'Times New Roman', Times, serif">
                           blurb blurb blurb </div>
                    </a>        
                </div>

        </div>

        <div style="position:absolute; width:595px; height:8px; left:0; bottom:0; background-image:url(/images/black-55.png)">

            <table class="fullbannerblock" width="100%" cellpadding="0" cellspacing="0">
                <tr>
                                    <td>
                        <div index="0" class="bannerblock"></div>
                    </td>
                                    <td>
                        <div index="1" class="bannerblock"></div>
                    </td>
                                    <td>
                        <div index="2" class="bannerblock"></div>
                    </td>
                                    <td>
                        <div index="3" class="bannerblock"></div>
                    </td>

                </tr>
            </table>

        </div>    
    </div><!-- /banner --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:25:14.013

子元素可以隐藏，无论其父元素是否隐藏。我猜这个问题是由其他一些错误引起的。

# node.js - 猫鼬全系列扫描

> ID：14867697
> 
> 赞同：10
> 
> 时间：2013-02-14T04:12:54.743
> 
> 标签：node.js, mongodb, mapreduce, mongoose

我想扫描整个 mongo 集合并计算`custom`聚合。我正在使用带有猫鼬的节点。为了扫描我正在使用的整个表`MyModel.find({}, callback);`

当我运行代码时，我发现 mongoose 执行查询并将所需的记录收集到一个数组中，然后简单地将整个数组传递给回调。现在在完整的集合扫描中需要大量时间。

是不是我得到了一个游标对象，我可以从中迭代不断地将所需记录映射到某个回调，而不是等待一大堆被收集到数组中。（这是我观察到的，如果我错了请纠正）。

另外，有人可以建议对自定义聚合进行完整的集合扫描是否正确，或者我应该研究`map-reduce`或类似的替代方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-14T05:02:30.023

Your first option should be to use the [`aggregate`](http://mongoosejs.com/docs/api.html#model_Model.aggregate) method instead of `find` to do whatever aggregation you're looking to do. If that doesn't do what you need, look into [`mapReduce`](http://mongoosejs.com/docs/api.html#model_Model.mapReduce), like you mentioned.

However, if you find that you do need to iterate over a large collection, you should use Mongoose's support for [streaming](http://mongoosejs.com/docs/api.html#querystream_QueryStream) the result of the query rather than getting it in one big array.

```
var stream = MyModel.find().stream();

stream.on('data', function (doc) {
  // do something with the mongoose document
}).on('error', function (err) {
  // handle the error
}).on('close', function () {
  // the stream is closed
}); 
```

# meteor - 通过安装流星部署到虚拟机

> ID：14867703
> 
> 赞同：0
> 
> 时间：2013-02-14T04:13:51.477
> 
> 标签：meteor

我想知道，如果我将 Meteor 应用程序部署到 VM，为什么我不能在 vm 上安装 Meteor，然后使用 meteor run 命令运行我的应用程序？文档的部署部分说要创建一个 tarball 包并将其部署到具有 Node 和 MongoDB 的服务器，但我不能只在服务器上安装 Meteor 吗？然后设置我的 DNS 条目来监听 3000 端口……为什么这个想法行不通？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:47:16.893

你的想法会很好。但是，我只是建议，如果您要使用它，最好在更“生产”类型的环境中运行。它很容易设置。

在高层次上，您将需要：

1.  需要安装Node 0.8.x
2.  需要安装MongoDB
3.  按照[此处](https://docs.meteor.com/#deploying)的说明进行部署。这些刚刚针对 Meteor 0.5.5 进行了更新，所以请注意这一点。
4.  需要永远安装 node.js 包

为了让我的生活更轻松，我创建了一个脚本来处理启动/停止我的流星应用程序。它将设置一切以使用完整的 MongoDB：

```
#!/bin/bash

SUCCESS=0
FAILURE=1

if [ $# -ne 1 ]
then
  echo "Usage: start|stop|restart"
  exit $FAILURE
fi

case "$1" in
    start )
        export MONGO_URL=mongodb://localhost:27017/<name of the database>
        export PORT=3000
        export ROOT_URL=http://yourhostname.com:3000
        forever start bundle/main.js 
        ;;

    stop )
        forever stop bundle/main.js
        ;;

    restart )
        forever restart bundle/main.js
        ;;

esac 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T07:17:22.043

您*可以*在常规安装的 Meteor 上在 VM 中运行部署。

可以将其想象为使用内置开发服务器运行 rails 应用程序。就 Meteor 而言，捆绑版本应该与开发版本没有什么不同。您创建的捆绑包确保所有必要的依赖项也与其捆绑在一起。

来自[流星文档的](http://docs.meteor.com/#deploying)关于*流星捆绑*的引用：

> 此命令将以 tarball 的形式生成一个完全包含的 Node.js 应用程序。要运行此应用程序，您需要提供 Node.js 0.8 和 MongoDB 服务器。然后，您可以通过调用节点、指定应用程序要侦听的 HTTP 端口和 MongoDB 端点来运行应用程序。如果您还没有 MongoDB 服务器，我们可以向 MongoHQ 的朋友推荐。
> 
> $ PORT=3000 MONGO_URL=mongodb://localhost:27017/myapp 节点包/main.js
> 
> 其他包可能需要其他环境变量（例如，电子邮件包需要 MAIL_URL 环境变量）。

好吧，我从未将底层数据库更改为具有开发版本的专用 MongoDB 服务器，但我认为这应该可以通过设置上述环境变量来实现。

PS：

你写了：

> 然后设置我的 DNS 条目来监听 3000 端口...

您将很难设置带有 DNS 条目的端口...

# node.js - GeddyJs (NodeJs framework) deploying to heroku cedar stack crashes

> ID：14867708
> 
> 赞同：1
> 
> 时间：2013-02-14T04:14:39.760
> 
> 标签：node.js, heroku, geddy

I have a geddyJs app that is crashing when starting..

the crash log is:

```
2013-02-14T04:04:19+00:00 heroku[run.4236]: Starting process with command `geddy -e production`
2013-02-14T04:04:19+00:00 app[web.1]: 
2013-02-14T04:04:19+00:00 app[web.1]: module.js:340
2013-02-14T04:04:19+00:00 app[web.1]:     throw err;
2013-02-14T04:04:19+00:00 app[web.1]:           ^
2013-02-14T04:04:19+00:00 app[web.1]: Error: Cannot find module '/app/config/true'
2013-02-14T04:04:19+00:00 app[web.1]:     at Function.Module._resolveFilename (module.js:338:15)
2013-02-14T04:04:19+00:00 app[web.1]:     at Function.Module._load (module.js:280:25)
2013-02-14T04:04:19+00:00 app[web.1]:     at Module.require (module.js:362:17)
2013-02-14T04:04:19+00:00 app[web.1]:     at require (module.js:378:17)
2013-02-14T04:04:19+00:00 app[web.1]:     at config.readConfig (/app/node_modules/geddy/lib/config.js:49:24)
2013-02-14T04:04:19+00:00 app[web.1]:     at _readConfig (/app/node_modules/geddy/lib/cluster/master.js:36:30)
2013-02-14T04:04:19+00:00 app[web.1]:     at async.AsyncBase.runItem (/app/node_modules/geddy/node_modules/utilities/lib/async.js:108:10)
2013-02-14T04:04:19+00:00 app[web.1]:     at async.AsyncBase.next (/app/node_modules/geddy/node_modules/utilities/lib/async.js:113:12)
2013-02-14T04:04:19+00:00 app[web.1]:     at Master.start (/app/node_modules/geddy/lib/cluster/master.js:257:11)
2013-02-14T04:04:19+00:00 app[web.1]:     at Object.utils.mixin.startCluster (/app/node_modules/geddy/lib/geddy.js:64:9)
2013-02-14T04:04:19+00:00 heroku[run.4236]: State changed from starting to up
2013-02-14T04:04:20+00:00 heroku[web.1]: Process exited with status 1
2013-02-14T04:04:20+00:00 heroku[web.1]: State changed from starting to crashed 
```

My Procfile is:

```
web: geddy -e $NODE_ENV 
```

My Package.json file is:

```
{
        "name": "new-gorelative",
        "version": "0.0.1",
        "auther": "Mike DeVita <mike@gorelative.com>",
        "dependencies": {
            "geddy": "0.6.x",
            "handlebars": "*"
        },
      "engines": {
        "node": "0.8.x",
        "npm": "1.1.x"
      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:18:00.257

The deployment documentation has been updated to reflect the current steps needed to deploy to heroku (amongs others). New changes will/should be updated there.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T18:29:50.867

i figured it out.

Edit the `config/production.js` file and delete/comment the following lines(port, hostname)

```
var config = {
  //port: '3000',
  // hostname: '0.0.0.0'
}; 
```

Add a `app.js` javascript file to your app's root directory, the configs set in this will override production.js

```
var geddy = require('geddy');

geddy.startCluster({
  hostname: process.env.IP || '127.0.0.1',
  port: process.env.PORT || '3000',
  // you can manually set this to production, or set an environment variable via heroku..
  environment: 'production'
  // just uncomment the below line, and delete the above line.
  // you will need to set an environment variable in heroku by running
  // heroku config:set NODE_ENV=production
  //environment: process.env.NODE_ENV || 'development'
}); 
```

Add a `Procfile` text file to your app's root directory

```
web: node app.js 
```

remove the line for `config\secrets.json` in your `.gitignore` file - **note:** This is insecure, on public repo's as it exposes your cookie's secret hash.

# java - 如何使用 Java 的 3D 库？

> ID：14867710
> 
> 赞同：0
> 
> 时间：2013-02-14T04:14:50.957
> 
> 标签：java, 3d, drawing

我的问题有两个部分。首先，我如何从开发的角度使用 Java 的 3D 库？

我是否只使用 Java 的 3D API 进行编程？我需要任何其他 API/库吗？

[http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-java-client-419417.html#java3d-1.4.0_01-oth-JPR](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-java-client-419417.html#java3d-1.4.0_01-oth-JPR)

其次，最终用户如何运行我的 Java 3D 应用程序？他们只是安装 Java 3D 库吗？

[http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-java-client-419417.html#java3d-1.5.1-oth-JPR](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-java-client-419417.html#java3d-1.5.1-oth-JPR)

他们还需要其他图书馆吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:35:07.397

Java3D 只是 Java 的众多竞争 3D 框架之一。我认为最流行的可能是 JOGL，它是 OpenGL 的一个非常薄的包装器，因此具有以下优点：如果您熟悉 OpenGL，则无需学习太多新东西即可在 Java 中做同样的事情。对于游戏，LWJGL 也很受欢迎。

所有各种 3D 库都可以与您的应用程序一起分发，或者可以将库的安装程序与您的安装程序一起打包。

# ruby-on-rails - rails 2.3.15 版中的 ruby on rails 未定义方法“_delete”适用于 2.3.5

> ID：14867714
> 
> 赞同：3
> 
> 时间：2013-02-14T04:15:07.543
> 
> 标签：ruby-on-rails, linux, hosting

rails 2.3.15 版中的 ruby​​ on rails 未定义方法“_delete”适用于 2.3.5

```
ActionView::TemplateError (undefined method `_delete' for #<Exam:0x709f33664f48>) on line #105 of app/views/exam/_exam_marks_form.erb:
102:         <td class="col-1">
103:           <div class="label-field-pair2">
104:             <div class="text-input-bg2">
105:               <%= exam_form.check_box :_delete %>
106:             </div>
107:           </div>
108:         </td> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-03T04:05:50.430

Rails 在 2.3.8 时间范围内改变了这一点。将 :_delete 更改为 :_destroy ，你应该会很好。

# android - 我们可以通过imei号码检测手机的类型（android/symbian等）吗？

> ID：14867715
> 
> 赞同：2
> 
> 时间：2013-02-14T04:15:12.770
> 
> 标签：android, operating-system, symbian, imei

我们正在做应用程序，我们需要通过该手机的 IMEI 号码来识别移动类型，即基于 android 或 symbian 等。这可能吗！如果有请指导

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:20:14.303

看看这篇文章：

[http://en.wikipedia.org/wiki/International_Mobile_Station_Equipment_Identity](http://en.wikipedia.org/wiki/International_Mobile_Station_Equipment_Identity)

特别是类型分配代码：

[http://en.wikipedia.org/wiki/Type_Allocation_Code](http://en.wikipedia.org/wiki/Type_Allocation_Code)

[http://www.mulliner.org/tacdb/](http://www.mulliner.org/tacdb/)

所以，我相信这是可能的（至少部分）。

# mysql - MySQL CASE 和 RPAD 问题

> ID：14867718
> 
> 赞同：2
> 
> 时间：2013-02-14T04:15:23.583
> 
> 标签：mysql

我在下面有这个查询，它运行良好。我只是不知道如何在 val_4 上使用 RPAD 功能。我尝试在 CASE 中使用 RPAD，但失败了。

```
SELECT RPAD(val_1,1,' '), RPAD(val_2,9,' '), RPAD(val_3,6,' '),
    (CASE val_4
        WHEN 'abc' THEN 'USEABLE'
        WHEN 'abcd' THEN 'USEABLE'
        WHEN 'abcde' THEN 'USEABLE'
        ELSE 'UNUSABLE'
    END)
FROM lists
INTO OUTFILE '/path/to/file'
FIELDS TERMINATED BY ''
LINES TERMINATED BY '\n'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T04:22:37.293

包装整个案例：

```
SELECT RPAD(val_1,1,' '), RPAD(val_2,9,' '), RPAD(val_3,6,' '),
    RPAD(CASE val_4
        WHEN 'abc' THEN 'USEABLE'
        WHEN 'abcd' THEN 'USEABLE'
        WHEN 'abcde' THEN 'USABLE'
        ELSE 'abcdef'
    END, 6, ' ')
FROM lists
INTO OUTFILE '/path/to/file'
FIELDS TERMINATED BY ''
LINES TERMINATED BY '\n'; 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!2/f4b6b/1)

* * *

或者，仅包装 的值`val_4`：

```
SELECT RPAD(val_1,1,' '), RPAD(val_2,9,' '), RPAD(val_3,6,' '),
    CASE RPAD(val_4,4,' ')
        WHEN 'abc' THEN 'USEABLE'
        WHEN 'abcd' THEN 'USEABLE'
        WHEN 'abcde' THEN 'USABLE'
        ELSE 'abcdef'
    END
FROM lists
INTO OUTFILE '/path/to/file'
FIELDS TERMINATED BY ''
LINES TERMINATED BY '\n'; 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!2/f4b6b/3)

# c# - <%# %> 和 UserControls 上的 DataBind

> ID：14867725
> 
> 赞同：1
> 
> 时间：2013-02-14T04:16:31.033
> 
> 标签：c#, asp.net, data-binding

我有一个`System.UI.Web.Page`包含一个`user control`.

我想从`page to the user control`.

据我所知，我必须使用`<%# variable %>`and `DataBind()`，显然。

但我找不到任何明确的例子来说明这是如何完成的。

通常，当我使用用户控件时，它看起来像：

```
<UI:YouTube VideoId="XXXXXXXX" runat="server" /> 
```

但是，对于此示例，它将如下所示：

```
<UI:YouTube VideoId="<%# sYouTubeCode %>" runat="server" /> 
```

sYouTubeCode 是`public string property`页面后面的代码。

`aspx page`引用后面的`AutoEventWireup="false"`代码时，如果相关的话。

我什么时候做这个`databinding`？
在页面或用户控件中，它是什么样的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T06:03:35.617

这是一个简单的示例，我认为它说明了您要完成的工作。请注意，`<script runat="server">`标签中的所有内容都可以放在代码隐藏中，我只是将它们全部放在一个文件中，以便于阅读。

由于您已`AutoEventWireup`设置为`false`，因此您需要覆盖该`OnInit`方法并连接`Load`事件处理程序。在该`Page_Load`方法中，您可以将属性的值设置为您想要的任何值（我使用了该`MyText`属性），然后只需调用`DataBind`服务器控件（在本例中我使用了一个`Literal`控件）。

```
<%@ Page Language="C#" AutoEventWireup="false" %>
<html>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:Literal ID="litText" Text="<%# MyText %>" runat="server" />
    </div>
    </form>
</body>
</html>
<script runat="server">
    public string MyText { get; set; }

    private void Page_Load(object sender, EventArgs e)
    {
        if(!Page.IsPostBack)
        {
            MyText = "some text to databind!";
            litText.DataBind();        
        }
    }

    protected override void OnInit(EventArgs e)
    {
        Load += Page_Load;
        base.OnInit(e);
    }
</script> 
```

FWIW，虽然上面的代码工作正常，但我认为只在`Page_Load`方法中设置属性，然后放弃`<%# %>`在首页中更简洁。我觉得在代码隐藏中设置属性是更常见的方法，但显然选择取决于您。

此外，如果您有兴趣，`AutoEventWireup="false"`可以[在 MSDN](http://support.microsoft.com/kb/324151)上找到更多信息。查找标题为“当 AutoEventWireup 属性的值为 false”的部分。

**编辑**

静态属性也可以正常工作。这是一个示例，`Page.DataBind()`按照@nunespascal 的建议使用（它也适用于`litText.DataBind()`）。

```
<%@ Page Language="C#" AutoEventWireup="false" %>
<html>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:Literal ID="litText" Text="<%# MyClass.StaticProp %>" runat="server" />
    </div>
    </form>
</body>
</html>
<script runat="server">
    private void Page_Load(object sender, EventArgs e)
    {
        if(!Page.IsPostBack)
            Page.DataBind();
    }

    protected override void OnInit(EventArgs e)
    {
        Load += Page_Load;
        base.OnInit(e);
    }

    public class MyClass
    {
        public static string StaticProp { get { return "Static Property"; } }
    }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T06:18:25.590

只要您`DataBind`在页面上调用，就可以随意将值传递给您的用户控件，例如`VideoId="<%# sYouTubeCode %>"`.

你应该收到你的价值观就好了。

请注意，DataBinding 确实发生在生命周期的后期。就在预渲染之前。

在页面上调用`DataBind`将调用它为页面上的调用控件。在 Page_Load 上调用它应该很好。

# django - 渲染时出现 django 错误 NoReverseMatch

> ID：14867728
> 
> 赞同：0
> 
> 时间：2013-02-14T04:17:41.043
> 
> 标签：django

我正在使用本教程[https://docs.djangoproject.com/en/dev/intro/tutorial04/](https://docs.djangoproject.com/en/dev/intro/tutorial04/)创建我的第一个 django 应用程序。我完成了最后的任务，现在我遇到了这个我不知道的错误如何修复。我将向您展示我的整个程序，并尝试指出我认为我在进行此投票时出错的地方。这个应用程序就像投票一样。它显示民意调查和一些选择，您必须对其进行投票。

这是我的错误

```
TemplateSyntaxError at /polls/1/
Caught NoReverseMatch while rendering: u'myapp' is not a registered namespaceRequest Method: GET 
Request URL: http://cat.pythonanywhere.com/polls/1/ 
Django Version: 1.3.5 
Exception Type: TemplateSyntaxError 
Exception Value: Caught NoReverseMatch while rendering: u'myapp' is not a registered namespace 
Exception Location: /usr/local/lib/python2.7/site-packages/django/template/defaulttags.py in render, line 450 
Python Executable: /usr/local/bin/uwsgi 

Template error
In template /home/cat/mysite/myapp/templates/myapp/detail.html, error at line 5

Caught NoReverseMatch while rendering: u'myapp' is not a registered namespace
1 <h1>{{ poll.question }}</h1>

2  
3 {% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}

4  
5 <form action="{% url myapp:vote poll.id %}" method="post">

6 {% csrf_token %}

7 {% for choice in poll.choice_set.all %}

8     <input type="radio" name="choice" id="choice{{ forloop.counter }}" value="{{ choice.id }}" />

9     <label for="choice{{ forloop.counter }}">{{ choice.choice_text }}</label><br />

10 {% endfor %}

11 <input type="submit" value="Vote" />

12 </form> 
```

我认为错误隐藏在我的 detail.html 中

```
<h1>{{ poll.question }}</h1>

{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}

<form action="{% url myapp:vote poll.id %}" method="post">
{% csrf_token %}
{% for choice in poll.choice_set.all %}
    <input type="radio" name="choice" id="choice{{ forloop.counter }}" value="{{ choice.id }}" />
    <label for="choice{{ forloop.counter }}">{{ choice.choice_text }}</label><br />
{% endfor %}
<input type="submit" value="Vote" />
</form> 
```

我的网址.py

```
from django.conf.urls.defaults import *
from mysite.myapp import views

urlpatterns = patterns('',

    url(r'^$', views.index, name='index'),
    url(r'^(?P<poll_id>\d+)/$', views.detail, name='detail'),
    url(r'^(?P<poll_id>\d+)/results/$', views.results, name='results'),
    url(r'^(?P<poll_id>\d+)/vote/$', views.vote, name='vote'),
) 
```

我希望有人可以帮助我，因为我不知道如何解决这个错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T04:53:59.493

在您保存管理员 url 的主 url 中，您的主 urlconf 投票必须像这样才能注册该命名空间：

主要**网址.py**

```
 url (r'^poll/', include('poll.urls', namespace='poll')), 
```

然后在子**urls.py**

```
urlpatterns = patterns('poll.views',
    url(r'^$', index, name='index'),
    url(r'^(?P<poll_id>\d+)/$', 'detail', name='detail'),
    url(r'^(?P<poll_id>\d+)/results/$', 'results', name='results'),
    url(r'^(?P<poll_id>\d+)/vote/$', 'vote', name='vote'),
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T04:50:33.623

尝试在您的模板中更改`{% url myapp:vote poll.id %}`为`{% url vote poll.id %}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-08T18:05:04.813

如果您的主要 urls.py 包含

```
url (r'^poll/', include('poll.urls')) 
```

然后更改为

```
url (r'^poll/', include('poll.urls', namespace='poll')) 
```

这对我有用。

# excel - 将工作表数据复制到数组中时出错

> ID：14867729
> 
> 赞同：0
> 
> 时间：2013-02-14T04:17:49.323
> 
> 标签：excel, vba

我需要将数据从 Excel 范围复制到数组中。我正在使用以下代码，但它显示错误“预期数组”。

```
 Dim filename As String
  Dim arraysize As Integer

  arraysize = 50
  I = 1
  Do Until ThisWorkbook.Sheets("sheet1").Cells(I, 1).Value = ""   
     filename(arraysize) = ThisWorkbook.Sheets("sheet1").Cells(I, 1).Value    
     I = I + 1
  Loop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:50:30.960

尝试这个

```
Sub Demo()
    Dim filename As Variant
    Dim arraysize As Long
    Dim rng As Range
    Dim i As Long

    i = 1
    With ThisWorkbook.Sheets("sheet1")
        Set rng = .Range(.Cells(i, 1), .Cells(i, 1).End(xlDown))
    End With

    ' load as two dimensional array
    filename = rng.Value

    ' transform into 1 dimensional array
    filename = Application.Transpose(filename)

    arraysize = UBound(filename)
End Sub 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T04:29:58.883

你还没有声明数组。我想不出脑海中的代码，但这应该为您指明正确的方向。

```
Dim Filename(50)

Do
    Filename(I)= excel.row
Loop 
```

# string - 递归+回溯。要返回什么？

> ID：14867731
> 
> 赞同：1
> 
> 时间：2013-02-14T04:18:10.040
> 
> 标签：string, algorithm, recursion, backtracking

我遇到了一些这样的问题，但从来没有真正知道处理它的最佳方法。如果我正在编写一个递归函数并建立一个答案，但发现当前答案不起作用，我应该返回什么。

例如，如果答案应该是一个 ArrayList，我不能返回 false 说它不起作用。- 我应该返回一个像 null 或 -1 这样的标记值并在递归调用中检查它吗？- 或者该函数是否应该只返回 void 并且仅当我确定有答案时才添加到函数外部的变量中 - 或者我应该存储一个额外的参数来保存该值，如果它不起作用则忽略它（I'我不确定如何在我当前的示例中执行此操作） - 或者我应该首先有一个函数来检查它是否有效，然后执行操作

我目前试图弄清楚的问题类似于计算字符串中的所有排列。不同之处在于排列中连续的两个字符的排列在字母表中不能连续，并且顺序相同。例如，“bc”是不允许的。“cb”没问题。不确定这是否是我的问题的一个很好的例子，但如果不是，我的问题仍然存在，因为我总是对处理回溯递归感到不舒服。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:20:31.143

是的，通常的方法是返回一个预定义的值（例如 -1，或者一些您无法从函数的正常操作中获得的常量）。或者，您可以引发异常，然后也可以在递归调用中捕获它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:21:20.893

根据您的问题，我假设您有这样的行为：

```
struct my_object *rec_foo(int param /* ... */)
{
    my_object *tmp = NULL;
    int x;
    /*
     * Do something
     */

    /*
     * Here you don't know how to handle
     * the case where rec_foo() fails
     */
    tmp = rec_foo(x /* ... */);
    /*
     * Other work
     */
    return tmp;
} 
```

一种常见的模式是使用返回指针来携带错误代码。这是在 Linux 内核中进行的，从 -1 到 -1000 的所有数字都可以作为错误转换为指针。您可以定义自己的代码并检查返回的指针。

另一种是返回一个包含错误的枚举值，同时函数更新参数指针指向的数据。因此，您的函数原型将变为

```
enum rec_foo_error {
    REC_FOO_NO_ERROR,
    REC_FOO_ERROR_1,
    REF_FOO_ERROR_LAST /* Just to retrieve quickly
                      the number of available errors */
};
// You could simply use an int instead, but this is elegant
enum rec_foo_error rec_foo(struct my_object *obj, int x /*, ... */); 
```

# grails - Grails：“套接字写入错误”将视频/mp4 文件流式传输到浏览器

> ID：14867735
> 
> 赞同：1
> 
> 时间：2013-02-14T04:18:27.923
> 
> 标签：grails, video, groovy, mp4

在 Grails 2.1.1 控制器中，我试图将视频 (mp4) 文件流式传输到浏览器。

以下代码有效。但是，由于我没有指定内容类型，浏览器将直接保存文件。

```
 OutputStream os = response.outputStream
    ByteArrayInputStream is = new ByteArrayInputStream(videoInstance.data)

    response.contentLength = videoInstance.data.length
    os << is 
```

如果我尝试更改它以指定内容类型...

```
 OutputStream os = response.outputStream
    ByteArrayInputStream is = new ByteArrayInputStream(videoInstance.data)

    response.contentType = videoInstance.contentType
    response.contentLength = videoInstance.data.length
    os << is 
```

...突然我得到了例外。

```
Software caused connection abort: socket write error. Stacktrace follows:
Message: Software caused connection abort: socket write error 
```

然后

```
ERROR errors.GrailsExceptionResolver  - IllegalStateException occurred when processing    request: getOutputStream() has already been called for this response. 
```

我尝试添加 .os.flush() 和 os.close() 均无济于事。有什么想法可能导致这种情况吗？

# html - 图像无法在浏览器中正确显示

> ID：14867738
> 
> 赞同：0
> 
> 时间：2013-02-14T04:19:02.763
> 
> 标签：html, image, background

我在这个[网站](http://thomaswd.com/maze)上有一张图片。它出现在每个浏览器上，但它在 Firefox 中的位置错误。我还有另一张图片，在同一个网站上，在迷宫中，当你在 safari 中打开它时，它是一个灰色的盒子。我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:37:02.530

您可以通过从图像中删除以下属性来实现此目的

```
position:absolute; 
```

如果需要“绝对”，请尝试在您的 CSS 中添加它

```
.finish {
 display: block;
 position: relative;
} 
```

希望它能帮助您对齐“完成”图像

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T04:40:52.557

这是因为`position: relative`在 Firefox 渲染引擎中未定义。因此，您的绝对定位图像会跳转到下一个具有定位的父元素（`section`元素）。

[在此处查看更多详细信息](https://stackoverflow.com/a/6079254/911140)

如果您只是删除图像上的绝对定位，它看起来无论如何都在正确的位置。

# jquery - 使用 jQuery 设置选择框的简单方法

> ID：14867742
> 
> 赞同：1
> 
> 时间：2013-02-14T04:19:40.030
> 
> 标签：jquery, css, select

是否有任何简单的方法可以在`form`使用 jQuery 时向选择框添加样式？

```
<select>
  <option>sample</option>
  <option>sample1</option>
</select> 
```

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-02T08:58:26.533

您也可以使用[jQuery.SimpleSelect](http://pioul.fr/jquery-simpleselect)，它是一个非常简单和轻量级（1.75kb gzipped）的插件，可以将您的`<select>`元素转换成一堆 div，您可以使用 CSS 随意设置样式。

就这么简单：

**HTML**

```
<select>
    <option>Option 1</option>
    <option>Option 2</option>
    <option>Option 3</option>
</select>​ 
```

**JavaScript**

```
$("select").simpleselect(); 
```

并且（使用您显然可以自定义的默认样式），它为您提供：

![在此处输入图像描述](../Images/831e77c4b301db29a5fd4e063adeb071.png)

[**文档**](http://pioul.fr/jquery-simpleselect)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-14T04:26:33.093

查看[Select2](http://ivaynberg.github.com/select2/)。它将设置一个选择框的样式，并且还可以使用 Ajax 即时获取数据。

```
$(selector).select2(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T11:08:50.207

使用 jquery 尝试简单的样式选择框

```
 <select class="selectboxdiv">

      <option>choose preset...</option>
      <option>two</option>
      <option>something</option>
      <option>4</option>
      <option>5</option>

  </select>

  <div class="out"></div> 
```

[http://fiddle.jshell.net/9Wt89/](http://fiddle.jshell.net/9Wt89/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T04:21:37.727

您无法设置`<select>`节点的样式，但您可以直观地表示样式`<ul>`节点，它是一个下拉菜单。`<ul>`就在页面加载时隐藏原始下拉菜单并通过按标签形成列表来创建一个。当用户单击`<li>`节点时，也会更改`<select>`标签的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T04:25:15.843

一般来说，没有*简单的方法*来设置表单元素的样式以在浏览器中保持一致。但是你可以选择像[Uniform这样的插件](http://uniformjs.com/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-14T04:25:55.333

您无法设置`<select>`标签的样式。尝试用一些 HTML 包装它们，您可以根据需要对 HTML 进行样式/脚本。

你可以做这样的事情（在 jQuery 中），`<select>`用一些标记包装你的，

```
<div class="selectBox">
    <ul>
        <li></li>
        <li></li>
    </ul>
    <select>
        <option></option>
        <option></option>
    </ul>
</div> 
```

然后将`<li>`更改映射到`<option>`脚本中的更改。

# c - 一旦我编写并创建它，随机字符有时会出现在我的文件中

> ID：14867743
> 
> 赞同：-2
> 
> 时间：2013-02-14T04:19:43.717
> 
> 标签：c

有时仅使用系统调用 write，当我写文件时，我在文本文件中看到这样的垃圾。可能是什么原因？程序太大，无法共享。

^D^H ª^D^H^A ^D^H ª^D^H^A 你好吗

尽管我写的只是你好，你好吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:40:10.683

这些是我要检查的一些事情：

*   当文件中已经有一些垃圾文本时，也许您正在以附加模式打开文件？
*   也许您正在写入的缓冲区尚未正确初始化？

如果您至少不提供一些您正在做的事情的伪代码，那么没有人可以真正给您任何可靠的答案。

# c++ - 二维数组末尾的括号

> ID：14867748
> 
> 赞同：0
> 
> 时间：2013-02-14T04:20:23.057
> 
> 标签：c++, arrays, multidimensional-array, cout

我在这里打印一个二维数组，但我想将其格式化为这样打印。

```
[1 2 3
 4 5 6
 7 8 9] 
```

我的问题是打印括号。

```
 cout<< "[";
    for(int i = 0; i<numrows(); i++)
    {
        for(int j = 0; j < numcols(); j++)
            cout << GetData(i,j) << " ";

        cout << endl;
    }
    cout << "]" <<endl; 
```

但它是这样打印的。

```
[1 2 3
 4 5 6
 7 8 9
 ] 
```

我是否应该做一个 if 语句来说明它是否是最后一个打印它？这是什么好方法。也许我只是让我昏昏欲睡。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T04:25:49.917

仅当后面有另一行时才打印换行符：

```
if (i != numrows() - 1) { cout << endl; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T04:26:06.930

只是不要输出`endl`最后一行：

```
cout<< "[";
for(int i = 0; i<numrows(); i++)
{
    for(int j = 0; j < numcols(); j++)
    {
        cout << GetData(i,j);
        if (j < numcols() -1)
        {
            cout << " ";
        }
    }

    if (i < numrows() -1)
    {
        cout << endl;
    }
}
cout << "]" <<endl; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T04:35:45.863

尝试这个：

```
 cout << "[";
      for (int nRow = 0; nRow < 3; nRow++){
        for (int nCol = 0; nCol < 3; nCol++)
        {
            if(nRow!=0)
            cout <<" "<<GetData(i,j) <<" ";
            else
            cout<<GetData(i,j) <<"  ";
        }
        if(nRow!=2)
        cout<<endl;
    }

cout << "\b]" <<endl;  // backspacing so that there is no space b/w 9 and ] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-07T12:44:20.167

尝试这个。
输出
| 1 2 3 |
| 3 4 5 |
| 3 4 2 |
| 2 3 1 |

```
int main()
{
    int arr[4][3];
    for(int i=0; i<4; i++)
    {
        for(int j=0; j<3; j++)
        {
            cout<<"Enter Value:";
            cin>>arr[i][j];
        }
    }

    cout<<"The Values you entered are..."<<endl<<endl<<endl;
    cout<<"|  ";
    for(int i=0; i<4; i++)
    {
        for(int j=0; j<3; j++)
        {
            cout<<arr[i][j]<<"  ";
        }
        cout<<"|";
        cout<<endl<<"|  ";
    }
    cout<<"\b\b\b\b ";
    getch();
} 
```

# c - C 输入作业

> ID：14867751
> 
> 赞同：2
> 
> 时间：2013-02-14T04:20:37.893
> 
> 标签：c, input, scanf

我对 C 非常陌生，并且正在解决家庭作业问题。我们需要编写一个程序，从用户那里接收 10 个数字，然后输出平均数、最高数和最低数。我有看起来像正确的代码，但输出就差很多了。这是我到目前为止所拥有的

```
#include <stdio.h>

int main() {
    int num1, num2, num3, num4, num5, num6, num7, num8, num9, num10;

    printf("Enter 10 grades sperated by commas, then press enter: ");
    scanf("%d,%d,%d,%d,%d,%d,%d,%d,%d,%d",num1,num2,num3,num4,num5,num6,num7,num8,&num9,&num10);getchar();

    int numbers[] = {num1,num2,num3,num4,num5,num6,num7,num8,num9,num10};

    int avg = (num1+num2+num3+num4+num5+num6+num7+num8+num9+num10)/10;

    printf("The average is: %d",avg);

    int high  = num1;
    for(int i=0; i<10; i++) {
        if (numbers[i] > high) {
            high = numbers[i];
        }
    }
    printf("The highest grade is: %d",high);

    int low = num1;
    for(int i=0; i<10; i++) {
        if (numbers[i] < low) {
            low = numbers[i];
        }
    }
    printf("The lowest number is: %d",low);

    return 0;
} 
```

如果有人可以让我了解我做错了什么，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T04:26:17.153

在您致电 时`scanf`，您不会**获取**每个`numX`. 当您将它们全部传递`num9`给. `num10``scanf`

你想要的是：

```
scanf("%d,%d,%d,%d,%d,%d,%d,%d,%d,%d",&num1,&num2,&num3,&num4,&num5,&num6,&num7,&num8,&num9,&num10); 
```

在 C 中，`&`运算符为您提供变量的地址（也称为指针）。该`scanf`函数希望您将*指针*传递给变量，因此它可以修改实际变量。

此外，为了使您的代码不那么笨拙，您可能需要考虑摆脱所有这些`numX`变量并直接读取输入数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T04:33:15.570

请阅读[本手册](http://pubs.opengroup.org/onlinepubs/000095399/functions/fscanf.html)并回答：

1.  scanf 期望什么类型的值与“%d”格式说明符对应？
2.  `int x;`x的类型是什么？&x 呢？
3.  如果系统提示我输入 10 个值，而我只输入 9 个值，然后是“糟糕！”，scanf 会返回什么？
4.  从那个场景开始，你期望 getchar() 返回什么？getchar() 需要返回哪种类型的字符才能`scanf("%d", &num10);`成功读取值？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T04:18:40.180

首先，我将专注于关注点分离。创建一个读取输入的函数，另一个返回最小值的函数，另一个返回最大值的函数，然后是一个返回平均值的函数。此外，我可能会考虑使用数组来收集您尝试存储的所有数据，而不是声明一个巨大的变量池，从而避免所有输入。所以让我们原型化这个数组函数：

**原型：**

```
int* get_numbers(int* size); // should return a pointer to that array 
```

**执行：**

```
int* get_numbers(int* size)
{
    int* numbers = NULL;

    // collect data...

    return numbers;
} 
```

# java - Java：组合函数产生十进制数

> ID：14867752
> 
> 赞同：0
> 
> 时间：2013-02-14T04:21:03.087
> 
> 标签：java, double, combinations

我试图实现一个简单的组合功能

```
private int combination(int n, int k)
{
    if(n>>1 < k)
        k = n - k;
    double mul = 1;
    for(int i=n+1-k;i<n+1;i++)
        mul *= i;
    for(int i=k;i>0;i--)
        mul /= i;
    return (int)mul;
} 
```

当我输入参数时`combination(33,17)`，它给了我**1166803109**，尽管正确的数字应该是**1166803110**。所以我在截断为 int 之前打印了`mul`变量，它给了我一个十进制数：**1.1668031099999998E9**，这让我很困惑。根据定义，它应该是一个完美的除法，为什么它给我一个小数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T04:32:34.590

`float`当涉及到or之类的浮点类型`double`时，很少有完美的除法（完美的意思是浮点结果是一个整数）。这是因为值在内部表示的方式；执行计算时会损失一些精度。（这类似于为什么`2/3`计算机会将除法呈现为`0.666667`。）不要使用`double`，而是坚持使用 or 之类的整数类型，`int`或者如果您的计算可能达到大于 a可以容纳的值，请`long`使用or 类似的类型。`BigInteger``long`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T04:26:00.760

由于它们的 [内部表示](http://en.wikipedia.org/wiki/Floating_point_number#Internal_representation)，浮点运算并不完全准确。

由于您只对结果的整数表示感兴趣，因此您可以舍入双精度而不是截断，`Math.round()`

你的方法应该变成这样：

```
private int combination(int n, int k)
{
    if(n>>1 < k)
        k = n - k;
    double mul = 1;
    for(int i=n+1-k;i<n+1;i++)
        mul *= i;
    for(int i=k;i>0;i--)
        mul /= i;
    return (int) Math.round(mul);
} 
```

输出：

```
System.out.println(combination(33,17));

1166803110 
```

# cocos2d-iphone - cocos2d-x中的卷曲页面效果

> ID：14867755
> 
> 赞同：0
> 
> 时间：2013-02-14T04:21:24.613
> 
> 标签：cocos2d-iphone, cocos2d-x, page-curl

我的隐藏对象游戏有一个菜单卡之类的东西。我想在其中添加我们在某些 pdf 查看器中看到的页面卷曲效果。每当用户触摸它时，它就会启动该效果，并在某个时间点翻转页面。

我应该如何在 cocos2dx 中继续进行？

是否有任何前置功能可以执行相同的操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:04:13.243

你看过 CCTransitionPageTurn 场景转换了吗？这可能会奏效。您可能会在用户触摸屏幕时显示“页面卷曲”精灵，然后在他释放触摸时执行实际的翻页转换。

类参考： http: [//www.cocos2d-x.org/reference/native-cpp/d6/ddb/classcocos2d_1_1_c_c_transition_page_turn.html](http://www.cocos2d-x.org/reference/native-cpp/d6/ddb/classcocos2d_1_1_c_c_transition_page_turn.html)

# high-level - 我可以编译任何用于 eeprom 的高级语言吗？

> ID：14867757
> 
> 赞同：0
> 
> 时间：2013-02-14T04:21:38.670
> 
> 标签：high-level, eeprom

我需要知道是否可以编译任何高级编程语言以用于 eeprom。我知道可以从已编译的二进制文件中删除标头，但我不确定地址将如何受到影响。

请不要将此标记为“不是问题”。我在这个网站上从那些无法区分愚蠢问题和非问题问题的人那里得到了很多废话。

**我可以编译任何用于 eeprom 的高级语言吗？**

（编辑）我的视线中有一个*Winbond 27C512 EEPROM*。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:29:58.533

如果您有用于相关处理器的 C 编译器，那么您没有理由不能编译 C 代码以便将其放入 EEPROM 中（不过，与嵌入式编程一样，您不能使用任何 libc 函数，所以你必须自己实现很多）。C 还可以与汇编代码很好地互操作，因此您可以在转换到用 C 编写的更高级别代码之前在汇编中编写引导例程。

可以编写一个典型的 C 链接器（例如 GNU ldd），以便它生成与您的 EEPROM 兼容的地址；这是嵌入式开发和其他“裸机”应用程序的常见要求。您可以使用`objcopy`几种不同的格式来格式化编译的二进制文件。使用 GNU 工具链，您可能还可以使用受限的 C++ 子集来实现这一目标。

但是，您不太可能使用许多其他流行的高级语言来做到这一点，因为很少有语言支持嵌入式开发所需的低级构造（例如直接指针寻址）。

# c - 如何找到不止一次出现并使用 str 替换？

> ID：14867765
> 
> 赞同：0
> 
> 时间：2013-02-14T04:22:22.133
> 
> 标签：c, strstr

我的家庭作业是读取一个文件，存储目标词（用# 分隔）和替换词（也用# 分隔）和原始字符串（它们没有#）。

我也不能假设最大 str 长度或最大单词数。

例如：

```
#uic#e# // uic = target string   e = replacement string
juice  // find substring "uic"  and replace it with 'e' resulting in "jee"
quicken  // qeken
quiche   // qehe
uicuicuick // eeek
#pp##   // pp = target string   nothing = replacement string
apples  //ales
copper  // coer
bopped  //boed
#t#tttttt#  // t = target string   tttttt = replacement string
tut tut // ttttttutttttt ttttttutttttt
tttttttttttttttttttttttttttttttttttttttttttttttttttt // last string = 
                                                 //# of t's * 6 
```

* * *

除了弄清楚如何使用带有替换字符串的目标字符串之外，我已经完成了一切。有可能做到`strstr`吗？我知道它指向第一次出现，但是否可以让它指向字符串中的每一次出现？请告诉我使用伪代码。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T05:04:12.473

Using strstr() to find the address of the first occurrence, call it `address`, then you could use strstr() again on `address + strlen(target_string)` to find the occurrences in the rest of the string.

# xna - XNA 用鼠标旋转播放器而不移动鼠标指针

> ID：14867768
> 
> 赞同：0
> 
> 时间：2013-02-14T04:23:25.210
> 
> 标签：xna

我希望能够使用鼠标旋转我的播放器。我尝试了以下方法：

```
playerYaw = (float)(-currentMouseState.X * 0.005); 
```

我的播放器按照我想要的方式旋转，但我只能旋转到鼠标指针的位置。我希望能够根据需要顺时针或逆时针旋转我的播放器多次。我怎么能不考虑鼠标指针而仍然得到我正在寻找的结果。另外，有没有办法隐藏鼠标指针？在窗口模式下玩游戏时，我不应该看到它在我的显示器周围移动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T05:23:06.150

您可能只需增加乘数即可提高旋转速度。

要在窗口模式下隐藏光标，如果您希望光标完全离开游戏窗口，则必须将系统的光标图标更改为不可见，但这需要转到控制面板，这可能是不可取的。

或者，您可以通过设置每帧的鼠标坐标来将光标的坐标锁定在游戏窗口内。

我建议在游戏窗口周围使用带有黑色边框的窗口全屏，这样您就可以随时按`alt`+`tab`而不会最小化游戏窗口，并且在技术上仍然在窗口模式下玩。

# jquery - jQuery SubMenu 机会

> ID：14867770
> 
> 赞同：1
> 
> 时间：2013-02-14T04:23:57.913
> 
> 标签：jquery, hover, submenu

我整晚都在为此工作，但无济于事。典型的 SubMenu 问题，我在这里阅读了很多类似的问题，但找不到解决方法。

我有一个菜单，它是一个无序列表。我也有一个相同的子菜单。我的菜单位置很好等问题是，当我的子菜单出现在我的常规菜单的一侧时，当我从菜单 1 悬停到菜单 2 时，它就会消失。我确定它很简单，但有人可以看看吗？

```
<script>
$(document).ready(function() {
$('.nav').hover(function(e) {
    if(!$('.nav2').is(':visible'))
    {
        $('.nav2').fadeIn('slow');
    }
},function(){
    if(!$('.nav2').is(':hover'))
    {
        $('.nav2').fadeOut('slow');
    }
});

$('.nav2').mouseout(function(){
    if(!$('.nav').is(':hover'))
    {
        $('.nav2').fadeOut('slow');
    }
});
});
</script> 
```

我的清单是：

```
<div id="col1">

<ul class="nav">
<li><a href="http://www.alan.com">Home</a></li>
<li><a href="http://www.alan.com">About</a></li>
<li><a href="http://www.alan.com">New Listings</a></li>
<li><a href="http://www.alan.com">Featured Home</a></li>
<li><a href="http://www.alan.com">Town Facts</a></li>
<li><a href="http://www.alan.com">Contact Me</a></li>
</ul>

<ul class="nav2">
  <li><a href="http://www.alan.com">Bio</a></li>
  <li><a href="http://www.alan.com">Credentials</a></li>
  <li><a href="http://www.alan.com">Education</a></li>
  </ul>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:30:32.747

将子菜单嵌套到`li`主菜单上。就像是：

```
<div id="col1">
    <ul class="nav">
        <li><a href="http://www.alan.com">Home</a></li>
        <li><a href="http://www.alan.com">About</a>
            <ul class="nav2">
                <li><a href="http://www.alan.com">Bio</a></li>
                <li><a href="http://www.alan.com">Credentials</a></li>
                <li><a href="http://www.alan.com">Education</a></li>
            </ul>
        </li>
        <li><a href="http://www.alan.com">New Listings</a></li>
        <li><a href="http://www.alan.com">Featured Home</a></li>
        <li><a href="http://www.alan.com">Town Facts</a></li>
        <li><a href="http://www.alan.com">Contact Me</a></li>
    </ul>
</div> 
```

**编辑：** 这应该给你一些想法。- [jsFiddle 演示](http://jsfiddle.net/FloydPink/LHcUt/)

# search - AngularJS 搜索更改事件

> ID：14867772
> 
> 赞同：4
> 
> 时间：2013-02-14T04:24:13.920
> 
> 标签：search, angularjs

我需要一个类似于`$routeChangeSuccess`$location.search() 变量的事件。我正在调用 $location.search('newview')，并且需要一种方法来知道它何时发生变化。

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-14T05:51:22.703

你应该使用`$scope.$watch`：

```
$scope.$watch(function(){ return $location.search() }, function(){
  // reaction
}); 
```

`$watch`在 Angular[文档](http://docs.angularjs.org/api/ng.$rootScope.Scope)中查看更多信息。

如果您只是想在查询字符串中添加“newview”，则上述代码将起作用。

> 即从`http://server/page`到`http://server/page?newvalue`

但是，如果您正在寻找“newview”中的更改，则上述代码将不起作用。

> 即从`http://server/page?newvalue=a`到`http://server/page?newvalue=b`

您将需要使用“objectEquality”参数来调用 $watch。这会导致 $watch 使用值相等，而不是对象引用相等。

```
$scope.$watch(function(){ return $location.search() }, function(){
  // reaction
}, true); 
```

注意添加了第三个参数（true）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-22T06:13:21.333

您可以在控制器中侦听 $routeUpdate 事件：

```
$scope.$on('$routeUpdate', function(){
   $scope.sort = $location.search().sort;
   $scope.order = $location.search().order;
   $scope.offset = $location.search().offset;
}); 
```

# php - 获取项目列表的更好方法：缓存的序列化数据与数据库查询或其他？

> ID：14867774
> 
> 赞同：8
> 
> 时间：2013-02-14T04:25:10.097
> 
> 标签：php, mysql, caching

我已经对文件中的缓存数据（[序列化/反序列化与 json_encode/decode](https://stackoverflow.com/questions/804045/preferred-method-to-store-php-arrays-json-encode-vs-serialize)、[var_export](http://techblog.procurios.nl/k/618/news/view/34972/14863/Cache-a-large-array-JSON-serialize-or-var_export.html)、[igbonary](https://github.com/phadej/igbinary)）和 mysql 查询（优化、[存储过程](http://www.mysqltutorial.org/mysql-stored-procedure-tutorial.aspx)、[查询缓存](http://dev.mysql.com/doc/refman/5.1/en/query-cache.html)）进行了很多搜索，但此刻，我想知道什么是更好的方法优化如下的具体案例。

*提前抱歉：我想这是一个很长的话题，但有必要了解这个项目。请原谅我糟糕的英语，这不是我的第一语言。*

让我们假设我们有这个数据库关系。 ![在此处输入图像描述](../Images/5330c195e98f8592a5203617c7baa7b7.png)

数据库描述（括号中的估计记录数）：

*   **MODULE** (10) : 是Item的类型，可以是文章、论坛主题、广告、新闻...
*   **ITEM** (millions) : 任何带有标题和一些文本的类型
*   **CATEGORY** (50) ：物品类别（动物、政治、汽车、计算机...）
*   **TAG**（数十万）：类别的标签（例如政治：国际，法国，巴拉克奥巴马......）
*   **ITEM_TAG** (outch) : 项目和标签关联

所以我们有几个关系，每个都是 ITEM 创建/更新时的记录器。

我已经使用以下示例将 ITEM 数据缓存在文件夹和文件中：

```
public function cacheItem()
{
    $req=mysql_query("SELECT id, title, content, id_mod, id_cat
            FROM ITEM
            WHERE ITEM.id='".$this->id."'")or die(mysql_error());
    if(mysql_num_rows($req)==1)
    {
        $this->itemData=mysql_fetch_array($req);
        $this->folder=floor($this->id/1000);//1000 items max per folder
        $this->itemUrl=$this->folder."/".$this->id.".txt";                      
        if(!file_exists($this->itemUrl))
        {
            touch($this->itemUrl);
        }
        file_put_contents($this->itemUrl,serialize($this->itemData),LOCK_EX);
    }
} 
```

我得到了它们`unserialize(file_get_contents($url))`，这部分就像一个魅力！

**现在我希望优化项目列表以通过几个选项**（例如）显示它们，foreach 显示每个分页限制为 100：

*   所有项目
*   模块的项目
*   类别的项目
*   类别和模块的项目
*   TAG的项目
*   TAG 和 CATEGORY 的项目
*   TAG 和 CATEGORY 和 MODULE 的项目

我已经知道如何在 SQL 中执行此操作并将结果放入缓存树中。

对于这些缓存文件，我的问题是，当创建/更新新项目时，可能必须非常严格地刷新列表。

**第一个问题：**

那么如果同时创建/更新 ITEM（这些列表也是如此）会发生什么？

`LOCK_EX`将在从 获取文件时完成他的`file_put_contents();`工作吗`file_get_contents();`？

**第二个问题**

我知道更多的 PHP 会起作用，更少的 mySQL 会起作用（否则），但是用分页来做这些列表的更好（显示更快）方法是什么，它将每秒或更长时间显示，并且只能通过添加/修改更新一个新项目？

*   我的缓存系统（我不这么认为......）
*   mySQL 中的存储过程
*   多个数据库服务器和/或多个文件服务器
*   其他

任何想法，示例，链接都非常感谢。

PS：只是为了好玩，我可能会问“Facebook 怎么样”和“stackoverflow 怎么样”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T22:57:26.950

**第一个问题**：

你的操作应该没问题`LOCK_EX`。如果同时访问文件可能会被锁定，这肯定会减慢速度，但所有操作都应该正确完成。然而，这是一个很好的例子，为什么你不应该实现自己的缓存系统。

**第二个问题**：

MySQL 肯定会比你的缓存系统更快（除非你做了一些认真的 wicket 编码而不是 PHP）。MySQL 等数据库在优化性能方面做了大量工作。

我不相信 MySQL 中的存储过程会在上面提供的示例中为您提供任何真正的好处，而不是普通的旧`SELECT`查询。

如果您在服务器集群上使用分片，使用像 MongoDB 这样的 NoSQL 方法可以帮助您。这更难编写，更多的服务器花费更多的钱。此外，您的问题还不清楚是否可以选择迁移到不同的数据库系统。

如果您坚持使用 MySQL，实现负载平衡应用程序服务器可能比数据库服务器集群更容易。考虑到这一点，PHP 完成的更多工作优于 MySQL 中的更多工作。不过，我不会采用这种方法，因为你放弃了很多，只是为了一点点好处。

简而言之，我建议您坚持使用简单的`SELECT`查询来获得所需的内容。在单独的服务器上运行您的应用程序和数据库，并为您的数据库服务器使用更强大的服务器。

PS。Facebook 为 PHP 编写了一个预编译器，以使他们的代码运行得更快。在我看来，PHP 不是一种非常快的语言，您可以从 Python 或 Node.js 获得更好的结果。

Stackoverflow 使用 ASP.NET MVC 和 MS SQL Server。他们有一个强大的数据库服务器，显然更愿意在可能的地方使用数据库查询。他们还使用与其数据库服务器分开的负载平衡应用程序服务器。

# php - 使用 PHP 下载 Jasper 报告

> ID：14867775
> 
> 赞同：0
> 
> 时间：2013-02-14T04:25:10.440
> 
> 标签：php, jasper-reports

[http://localhost:8080/jasperserver/flow.html?_flowId=viewReportFlow&reportUnit=/reports/Custom/Jobs_Report&j_username=imtiaz&j_password=imtiaz&viewAsDashboardFrame=true&output=pdf] 这个 url 生成 PDF 文件。现在我想用 PHP 制作一个应用程序，它可以下载生成的 PDF 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:44:04.907

```
$url = 'http://localhost:8080/jasperserver/flow.html?_flowId=viewReportFlow&reportUnit=/reports/Custom/Jobs_Report&j_username=imtiaz&j_password=imtiaz&viewAsDashboardFrame=true&output=pdf';
$pdf_data = file_get_contents($url);
file_put_contents(uniqid().'_download.pdf',$pdf_data); 
```

已编辑：如果您需要下载弹出对话框，则需要添加 pdf 标题

```
header("Content-type:application/pdf");
header("Content-Disposition:attachment;filename='downloaded.pdf'"); 
```

# caching - revved 文件名引用是数据库

> ID：14867778
> 
> 赞同：0
> 
> 时间：2013-02-14T04:25:24.923
> 
> 标签：caching, yeoman

我目前在我的项目中使用 yeoman 来执行构建和脚手架等。当您使用 yeoman 构建时，它使用 usemin 为文件名添加哈希前缀以帮助缓存。我喜欢这个功能，因为有时我们会稍微更改图像并希望它们在不等待缓存清除的情况下更新。

我遇到的问题是，其中一些图像文件也从我们的数据库中引用。例如，对于产品 X，我们在数据库的图像字段中有 productx.jpg。从数据库中获取此信息时，显然存在问题，因为 productx.jpg 现在称为 30341d.productx.jpg。

有没有办法解决这个问题？可能与 .htaccess 文件有关？每次构建项目时都必须编写新的重写条件吗？即使是 20-30 和每周或每两周构建一次，这也可能会令人讨厌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:52:17.707

你可以编辑你的 gruntfile 找到这个：

`rev: { js: 'scripts/**/*.js', css: 'styles/**/*.css', img: 'images/**' },`

并更改为

`img: ''`

防止 yeoman 将版本前缀添加到图像文件夹内的图像文件中。

但是您也应该严格区分属于项目布局部分的图像数据和属于内容数据部分的数据。所有布局关键图像都应位于 images/ 文件夹中，并且只能从 css 或在某些情况下从 html 模板（但不能从数据库）引用。您的内容数据文件位于单独的文件夹（或数据库或 cdn）中，这样这些文件不会获得任何版本号。

# struts2 - 在 struts 2 jquery 网格的 rowselect 上，我的 rowselect 值不正确

> ID：14867779
> 
> 赞同：1
> 
> 时间：2013-02-14T04:25:37.120
> 
> 标签：struts2, struts2-jquery, struts2-jquery-grid

当我单击网格行时，它给出了正确的值（如 cadio，101），但我单击下一行它给出的值（如 cadio，101）是错误的，正确的值将是（二头肌，101）。解释-我正在获取这样的行值：cadio，101 Biceps，101

```
 <s:url id="exerDetailsGridUrl" action="exerDetailsGrid" />
 <sjg:grid id="exerDetailsGrid"
  href="%{exerDetailsGridUrl}"
  pager="false"
  gridModel="exList"
  formIds="FilterListForm"
  height="500"
  width="580"
  rowNum="10000"
  footerrow="true"
  onSelectRowTopics="getExInfoOnRowSelect"
  reloadTopics="reloadExerDetailsGrid"
    >
    <sjg:gridColumn name="exerId" index="exerId" title="Exercise Id" hidden="true" key="true" />
    <sjg:gridColumn name="exGroupName" index="exGroupName" title="Group Name"   cssStyle="padding-left:100px" />
    <sjg:gridColumn name="exerName" index="exerName" title="Exercise Name"   />
  </sjg:grid> 
```

行选择事件

```
 $.subscribe('getExInfoOnRowSelect', function(event, data) {
            $("#exerId").val(event.originalEvent.id);
            alert(event.originalEvent.id);
            var grid = event.originalEvent.grid;
            var sel_id = grid.jqGrid('getGridParam', 'selrow');
            var myCellData = grid.jqGrid('getCell', sel_id, 'exGroupName');
            alert(myCellData); //THIS PRINTS THE VALUE i NEED!!!

        }); 
```

# javascript - 停止发送ajax请求而不刷新页面

> ID：14867780
> 
> 赞同：5
> 
> 时间：2013-02-14T04:25:44.047
> 
> 标签：javascript, jquery

我创建了 ajax 请求，在按钮单击事件时将一些数据发送到 php 文件。现在提交数据后，我想限制 ajax 请求不要通过单击按钮一次又一次地发送数据。它仅在页面刷新时发送数据（意味着在页面加载时发送一次数据）。我怎样才能停止这样的请求。我的ajax代码如下：

```
$(".button").click(function (e) {
    e.preventDefault();
    $.ajax({
        type: 'post',
        cache: false,
        url: 'my/ajaxrequest.php',
        data: {
            result: 'hi test data'
        },
        success: function (resp) {
            $("#result").html(resp);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T04:28:58.667

只需替换`.click()`为[`.one()`](http://api.jquery.com/one/)

这将防止多次点击`$.ajax()`再次运行。

```
$(".button").one('click', function(e) {
  e.preventDefault();
  $.ajax({ ... });
} 
```

如果您只需要在页面加载时执行发布，您可以简单地将`$.ajax()`调用从点击处理程序移动到文档就绪函数中：

```
$(function() {
    $.ajax({
        type:  'post', 
        cache:  false ,
        url:  'my/ajaxrequest.php',
        data:  { result : 'hi test data' },
        success: function(resp) {
            $("#result").html(resp);
        } 
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T04:29:10.553

更深入的分析可以将 ajax 调用限制为一个成功的响应（即状态 200 && 它是否返回了您正在寻找的结果？如果是这样，您可以将此代码放在`success`XHR 函数的函数中：`requestLog.sendStatus = true;`如果您只想允许ajax请求初始化一次，然后将 this ( )放在`requestLog.sendStatus = true;`后面。`e.preventDefault``requestLog.sendStatus = true``success`

```
var requestLog = {};
    requestLog.sendStatus = false;

$(".button").click(function(e) {
   e.preventDefault();
   if(requestLog.sendStatus) return;  
   /* requestLog.sendStatus = true; */
   $.ajax({
      type:  'post', 
      cache:  false ,
       url:  'my/ajaxrequest.php',
       data:  { result : 'hi test data' },
       success: function(resp) {
          $("#result").html(resp);
          requestLog.sendStatus = true;
      } 
     });
}); 
```

您只想在页面加载时运行一次？试试这个：

```
(function() {
  $.ajax({
     type:  'post', 
     cache:  false ,
     url:  'my/ajaxrequest.php',
     data:  { result : 'hi test data' },
     success: function(resp) {
          $("#result").html(resp);
     } 
  });
}()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T04:29:06.243

`click eventHandler`成功的 Ajax 响应后，您需要从按钮中删除。

**例子**

`$("#Btn").unbind("click");`

**或者**

`$.off("click", "input:button", foo);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T04:29:58.660

只需像这样修改：

```
$(".button").click(function(e) {
      e.preventDefault();
$(".button").unbind('click'); //unbind the bound event after one click
    $.ajax({
        type:  'post', 
       cache:  false ,
        url:  'my/ajaxrequest.php',
        data:  { result : 'hi test data' },
        success: function(resp) {
      $("#result").html(resp);

        } 

      });

    }); 
```

# c# - 枚举作为它自己的自定义属性构造函数的参数

> ID：14867793
> 
> 赞同：5
> 
> 时间：2013-02-14T04:27:24.637
> 
> 标签：c#, enums, custom-attributes

在这里，我花了一些时间来了解更多关于 C# 的信息，所以我决定研究自定义属性，我发现它们在分配给 Enums 时非常有用。

所以我为 Enum 编写了一些扩展方法来很容易地检索这些属性，例如：`DemoEnum.Value1.GetAttribute<EnumNote>()`.

过了一会儿，我想如果每个自定义属性都有一个对它分配的枚举的引用，那将是一个好主意。我认为这不是一个坏主意，所以我继续这样做：

首先，我为自定义属性编写了一个基类`EnumAttribute`，它当然继承了`System.Attribute`该类。这个基类只是第一个草图，我打算扩展它以特别适合它将接收的每种 Enum 类型，但到目前为止这已经足够了。

```
public class EnumAttribute : Attribute
{
    public EnumInfo Enum { get; internal set; }

    public EnumAttribute(Enum Enum)
    {
        this.Enum = new EnumInfo(Enum);
    }

    public class EnumInfo
    {
        private Enum _value;
        private Type _type;
        private FieldInfo _details;

        public Enum Value { get { return _value; } }
        public Type Type { get { return _type; } }
        public FieldInfo Details { get { return _details; } }

        public EnumInfo(Enum value)
        {
        _value = value;
        _type = value.GetType();
        _details = _type.GetField(System.Enum.GetName(_type, value));
        }
    }
} 
```

现在每个自定义属性都必须从这个类继承`EnumAttribute`。导致例如在一个类中`EnumNote`：

```
public class EnumNote : EnumAttribute
{
    private string _note = string.Empty;

    public string Note { get { return _note; } }

    public EnumNote(Enum Enum, string Note)
        : base(Enum)
    {
        _note = Note;
    }
} 
```

到目前为止一切都很好，Visual Studio 代码分析和编译器没有任何报告。

但是当我定义一个枚举时，例如：

```
public enum DemoEnum
{
    [EnumNote(DemoEnum.Value1, "Some special note about Enum Value1.")]
    Value1 = 1,

    [EnumNote(DemoEnum.Value2, "Some other special note about Enum Value2.")]
    Value2 = 2
} 
```

当我尝试编译它时，VS 报告每个`EnumNote`构造函数的第一个参数如下：

> 属性参数必须是属性参数类型的常量表达式、typeof 表达式或数组创建表达式。

基本上是说 DemoEnum.Value1 和 DemoEnum.Value2 不保持恒定值。我说的对吗？

无论如何，这个错误让我感到困惑，因为这个 Enum 是硬编码的，正如你所看到的，编译器甚至不必为每个 enum 分配一个值，因为我已经自己做了。

这当然会带来一个问题，我遗漏了什么或误解了什么，以及我应该如何实现提供对每个`EnumNote`被分配到的枚举的引用的目标？

谢谢你。

**更新：**

在重新审视它之后，我明白为什么 VS 报告枚举不是一个常量表达式，那是因为我指的是一些东西：`DemoEnum.Value1`在某个点上，他还没有完成第一个`DemoEnum`定义`Value1`地方。然而，没有关于如何继续我的这个想法的想法。

**更新 2：**

在编译后重构 Enum 怎么样，它可能不应该给出任何错误，除非它不能应用于枚举（不记得重构是否适用于枚举），但如果它可以应用它会可能会做的很乱而且很慢，对吧？

**更新 3：**属性包含对分配给它们的枚举的引用的原因。

实际上这是一个非常简单的原因，假设以下情况。假设我有一个自定义属性的集合，出于某种原因，我有时需要知道给定属性属于哪个枚举。

与其编写新代码来确定这一点，不如简单地在属性本身中引用给定的枚举？这是内存消耗的微小妥协，而在未来它将节省宝贵的时间来运行任何所需的进程来确定每个属性（甚至只是一个）的给定枚举。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-14T05:27:47.983

> > 属性参数必须是属性参数类型的常量表达式、typeof 表达式或数组创建表达式。
> 
> 基本上是说 DemoEnum.Value1 和 DemoEnum.Value2 不保持恒定值。我说的对吗？

不完全的。

实际问题似乎是使用`Enum`. 虽然它*主要*用作概念类层次结构的基类，但它的处理似乎有点技巧。出于所有意图和目的，它是一个运行时伪类，而不是一个真正的类。

属性在编译时处理。没有在运行时用属性装饰对象的机制。因此，引入一些运行时技巧来处理`Enum`伪类似乎与 Attributes 函数的方式不兼容。

试试这个：

```
public class EnumTest : Attribute
{
    public int Value;
    public object Obj;
}

public enum DemoEnum
{
    [EnumTest(Value = (int)DemoEnum.Value1, Obj = DemoEnum.Value1)]
    Value1 = 1,

    [EnumTest(Value = (int)DemoEnum.Value2)]
    Value2 = 2
} 
```

这编译得很好（VS2010 中的 .NET 4.0），并且 Attribute 属性设置正确。我可以检查`Obj`Attribute 的属性并获得我期望的那种数据。

~~<意见>
就是说...不太确定这会有多大用处。您已经拥有一个正在装饰的值的实例，因此将值本身存储在 Attribute 中似乎有点多余。
</意见>~~

**编辑：一个可能的解决方案...**

在让它渗透一点之后（我在睡着时做了一些我最好的思考），我意识到由于问题出在实际*参数*类型上（如该问题的答案中所述[）](https://stackoverflow.com/questions/1799370/getting-attributes-of-enums-value)，我们可以稍微解决这个问题的拳击。

```
public class EnumTest : Attribute
{
    public Enum enum;

    public EnumTest(object e)
    {
        enum = e as Enum;
    }
} 
```

通过这种方式，您可以从一个对象初始化 Attribute，C# 和 CLR 似乎很容易做到这一点。您失去了使用 Enum 初始化时固有的类型检查，但我相信它可以实现所述目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T04:50:59.793

您不能在编译时值中传递给属性构造函数非常量。这是对属性的限制。所以你只能

```
[EnumNote(1,"Some special note")]
Value1=1, 
```

但是您的目的打破了在 c# 中混合面向方面编程的属性的想法。所以不要用属性来做。

关于属性和面向方面的编程你可以阅读 [这篇文章](http://www.codeproject.com/Articles/11387/Aspect-oriented-programming-in-NET-Part-II)

# css - Aptana 保存 css 不会自动刷新“显示预览编辑器”

> ID：14867795
> 
> 赞同：3
> 
> 时间：2013-02-14T04:27:44.343
> 
> 标签：css, refresh, aptana, live, preview

您好，我刚刚使用了 Aptana Studio 3.0 3 天 ako 并且我喜欢它是免费的，并且只需保存即可预览我的 html/php 代码。虽然这不仅仅是一个非常大的问题，但我希望“显示预览编辑器”选项卡在保存 css 代码时刷新，就像保存 html/php 代码一样。

我的 css 在我的默认 Web 文件夹（mywebsite/css/style.css）的一个文件夹中

tldr：

我想要一种方法让“显示预览编辑器”页面在 CSS 保存时被动刷新，而不是通过主动单击刷新按钮。

# assembly - 从键盘输入一个数字，并在汇编代码中将其显示回屏幕

> ID：14867796
> 
> 赞同：1
> 
> 时间：2013-02-14T04:27:45.557
> 
> 标签：assembly, input

我参加了一个汇编语言课程，但教学方法只是将示例代码交给我们自学，但我仍然很挣扎。我想编写这个示例程序只是为了更好地了解 I/O，但它总是崩溃，谁能解释一下为什么？

这是我的 .asm

```
extern printf
extern scanf

segment .data

    prompt db "Enter a number: ",0

    stringdata db "%s",0
    inputdata db "%Lf",0

segment .bss

    x:  resq 1

segment .text
global ints

ints:

;=========== Back up the base pointer =============================================================

       push       rbp                           ;Save a copy of the stack base pointer

;=========== Save registers ======================================================================

       push       rdi
       push       rsi

;===============prompt user for a number====
    mov rax, 0
    mov rdi, stringdata
    mov rsi, prompt
    call printf

    finit

;==================grab input from keyboard
    mov rax,0
    mov rdi, inputdata
    push qword 0
    push qword 0
    mov rsi, rsp
    call scanf

    fld tword [rsp]     ;store into st0

    fld st0         ;place another copy into the stack
    fmul st0        ;multiply st0 and st1
    fstp qword [x]      ;store st0 into x

    mov rax,    0
    mov rdi,    inputdata
    push qword 0
    push qword 0

    mov rsi, x
    call printf

;============ Restore all registers =================================================================================================

       pop       rsi                                        ;Restore the original value to rsi
       pop       rdi                                        ;Restore the original value to rdi
       pop       rbp                                        ;Restore the base pointer

       mov qword rax, 0                                     ;Return 0 to the caller.  0 indicates successful termination.
       ret                                                  ;ret pops the stack taking away 8 bytes; all addresses contain 8 bytes 
```

这是C文件，虽然不多..

```
#include <stdio.h>
#include <stdint.h>

extern unsigned long int ints();

int main()
{
        unsigned long int result = -999;
        result = ints();

        return result;

} 
```

# php - 使用 UNIX_TIMESTAMP() 会减慢我的 INSERT 查询

> ID：14867799
> 
> 赞同：3
> 
> 时间：2013-02-14T04:28:24.283
> 
> 标签：php, mysql, unix-timestamp

我必须一次完成 20 多个插入语句。我正在使用`UNIX_TIMESTAMP()`那里在我的时间列中插入自纪元以来的秒数。

我的 php 时区是`UTC`

所以我应该使用`$time = time()`插入值还是`UNIX_TIMESTAMP()`很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:34:23.283

[时间（）](http://us3.php.net/time)

> time - 返回当前的 Unix 时间戳

[UNIX_TIMESTAMP()](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)

> 如果不带参数调用，则返回 Unix 时间戳（自 '1970-01-01 00:00:00' UTC 以来的秒数）作为无符号整数。

在我看来，它们是一样的。所以我非常怀疑是否会有足够明显的差异来保证选择一个而不是另一个只是为了优化。我的建议是选择使您的代码更易于阅读和理解的那个。MySQL 可以一次处理大量的操作，因此获取时间戳等微不足道的操作几乎是瞬间完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T04:39:17.347

无论您做什么，**都要根据功能而不是效率来决定**；即使有 100 个插入语句，您也可能不会感觉到差异。

选择哪个选项应取决于您的功能要求：

1.  如果您必须绝对确定每个语句的值是相同的，您应该“缓存”的值`time()`并使用它来执行插入；顺便说一句，这可以在 MySQL 或 PHP 中完成（见下文）。

2.  对于所有其他，选择你喜欢的任何东西。

如果您要插入多条记录，我希望您会考虑准备好的语句；这样做实际上可能会以更显着的方式加速插入语句，这主要归功于在代码和数据库之间传输的数据量较少。例如：

```
SET @time = UNIX_TIMESTAMP();
PREPARE stmt FROM 'INSERT INTO mytable VALUES (@time)';
EXECUTE stmt;
EXECUTE stmt;
EXECUTE stmt;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T06:44:28.987

如果您要插入十亿行并且要花一整天的时间来插入它，并且您真的很想避免时间戳成为问题，请询问数据的来源是否可以插入所有数据具有相同时间戳的行。然后使用单代时间戳，将其放入变量中，并将其用于所有插入语句作为值。这样您每次插入时运行的代码更少。但这取决于数据属于谁，如果他们对此感到满意:)

# c# - 如何向 Soap 标头添加附加参数

> ID：14867800
> 
> 赞同：0
> 
> 时间：2013-02-14T04:28:24.930
> 
> 标签：c#, .net, winforms, web-services, asmx

我有一个连接到服务的应用程序。我想在 Soap Header 中添加一个额外的参数，我应该将它添加到哪里？

```
 protected override WebRequest GetWebRequest(Uri uri)
    {
        //apptoken name to be sent instead of caller app name - 10.1
        this.RequestSoapContext.Addressing.From = new Uri(ServiceConfiguration.APPTOKEN, UriKind.Relative);

        WebRequest req = base.GetWebRequest(uri);

        req.Headers.Add(ServiceConfiguration.HEADER_COOKIE_NAME_C, ServiceConfiguration.HEADER_COOKIE_VALUE);
        req.Method = ServiceConfiguration.REQUEST_METHOD;
        req.ContentType = ServiceConfiguration.REQUEST_CONTENT_TYPE;

        string smsession = GetSMSessionCookie();
        if (smsession != "")
        {
            req.Headers.Add(ServiceConfiguration.HEADER_COOKIE_NAME_C, smsession);
        }

        m_webRequest = req;
        return req;

    } 
```

我在其中一个 Web 服务类中有这个。但我觉得这似乎是一个 Http Header。

我在另一个类中也有这个，我指定了常量。

```
 public const string REQUEST_METHOD = "POST";
    public const string REQUEST_CONTENT_TYPE = "text/xml";

    public const string HEADER_SOAP_ACTION_NAME = "SOAPAction";
    public const string HEADER_SOAP_ACTION_VALUE = "/";

    public const string HEADER_COOKIE_VALUE = "SMCHALLENGE=YES";

    public const string HEADER_APPLICATION_NAME = "APPLICATION_NAME";
    public const string HEADER_APPLICATION_VALUE = "XLS";

    public const string COOKIE_SMSESSION = "SMSESSION=";
    public const string HEADER_COOKIE_NAME_C = "Cookie";
    public const string HEADER_COOKIE_NAME_SETC = "Set-Cookie";
    public const string HEADER_COOKIE_SEPARATOR = ";"; 
```

有人可以帮我如何在 SOAP REQUEST Header 中添加我自己的附加参数吗？

我正在使用 winforms .net 4.0 c#。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-14T11:33:29.180

我不确定我的问题是否正确，但您可以通过键入 **req.Headers.Add("customheadername","value");添加自定义标题**

# python - OSX 上的 python 和 echo -n

> ID：14867810
> 
> 赞同：2
> 
> 时间：2013-02-14T04:29:11.363
> 
> 标签：python, ruby, bash, unix, zsh

上下文：我在我的 Mac 上运行了[这个片段](http://paste.ubuntu.com/536356/)，并注意到字符串`-n`散布在乱码输出中。答案是`sh`在 Ubuntu 上理解`-n`标志，而`sh`在我的 Mac 上则不理解。

![在此处输入图像描述](../Images/ff95371b26b33e28ae3c0637773e6d41.png)

如您所见，python 将字符串发送到标准输出，`"-n abc\n"`而不是预期的`"abc"`.

通话是否`os.system`无法分离`-n`和`abc`？zsh（倒数`%`是 zsh 表示 EOF 的方式）和 bash 都会发生，但如果我没记错的话，python 调用不应该调用任何 shell（不是因为我读过任何这样说的东西，而是基于我的常识）（编辑：原来我完全错了，系统运行一个子shell）

看看 ruby​​ 是如何做的：

![在此处输入图像描述](../Images/0561942a110cd7b511fcbceffa79a503.png)

还有一些测试：

![在此处输入图像描述](../Images/e1ca2fb57735408b23261f24d1e3d5cd.png) 看起来脚本已发送到，`sh`但此时 shell 的环境变量仍然是`zsh`. 说得通。我没有做任何清理环境的事情......也许`sh`没有自动设置`$SHELL`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T04:33:13.077

[Python 文档](http://docs.python.org/2/library/os.html#os.system)状态：

> [ `os.system`] 通过调用标准 C 函数 system() 来实现

按照[C 的手册页进行`system`](http://linux.die.net/man/3/system)操作：

> **system() 通过调用 /bin/sh -c command 执行 command 中指定的命令**，并在命令完成后返回。在命令执行过程中，SIGCHLD 将被阻塞，而 SIGINT 和 SIGQUIT 将被忽略。

重点是我的。

[echo 的手册页对此进行](http://www.unix.com/man-page/FreeBSD/1/echo/)了解释：

> 某些 shell 可能提供与此实用程序类似或相同的内置 echo 命令。最值得注意的是，sh(1) 中的内置 echo 不接受 -n 选项。请参阅内置（1）手册页。

您可以自己确认这一点：

```
$ sh -c "echo -n hello"
-n hello
$ bash -c "echo -n hello"
hello 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T04:38:14.997

如[文档中所述](http://docs.python.org/2/library/os.html#os.system)，`os.system`在子 shell 中执行命令。根据您的系统，它可能使用`echo`不理解的 shell whos 命令`-n`。

如果您想确保它使用您选择的 shell，请使用`subprocess.call`and`shell=True`选项`executable='<shell>'`而不是`os.system`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T04:42:11.353

那这个呢？
`python -c 'import subprocess; subprocess.call(["echo", "-n", "abc"])'`
在osx上测试并正常工作

# c - c编程中的二分法

> ID：14867815
> 
> 赞同：0
> 
> 时间：2013-02-14T04:29:40.413
> 
> 标签：c, methods, bisection

我正在尝试编写一个算法来找到 f(x) = x^4 -4x +1 的根我应该得到这个函数的 4 个根 2 个实数和虚数。我用c写了这个算法。但是，如果它写得很好以及我应该为 a 和 b 输入什么样的初始猜测，请不要这样做，因为每次我运行程序它都会给我不同的数字这是我的代码，感谢您的帮助：

```
#include<stdio.h>
#include<math.h>
int computeroots(double, double, double, double);
int main()
{
    double a ,b, soln;
    double  epsilon = pow(10, -8);
    int MaxIter;
    printf("please enter an initial guess for a: \n");
    scanf("%ld",&a);
    printf("please enter a second guess for b: \n");
    scanf("%ld", &b);
    printf("please enter the maximum number of iteration: \n");
    scanf("%d", &MaxIter);
    soln = computeroots(a, b, epsilon, MaxIter);
    printf("Here is the solution: %d \n", soln);
    return 0;
}

int computeroots(double a, double b, double epsilon, double MaxIter)
{
    float FA = pow(a,4) - 4*a + 1;
    float FB = pow(b,4) - 4*b +1;
    float FP;
    int i =1;
    float p;
    if(FA * FB < 0)
    {
            while(i<MaxIter)
            {
                    p = a + (b-a)/2;
                    FP = pow(p,4) - 4*p +1;
                    if(FP == 0 || (b-a)/2 < epsilon)
                    {
                            return p;
                            break;
                    }
                    i++;
                    if(FA*FP > 0)
                    {
                            a = p;
                            FA = FP;
                    }
                    else
                    {
                            b = p;
                    }

            }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T07:58:35.933

我认为你必须找到这两种猜测，使得一种猜测给你一个否定的结果，另一个给你肯定的结果。维基百科有一个例子。根据精度和初始猜测，迭代次数可能会有很大差异。也不要将变量从 double 降级到 float 你会失去精度。

# c++ - [C++]如何使用std::stack来处理文件/目录层次结构？

> ID：14867821
> 
> 赞同：0
> 
> 时间：2013-02-14T04:30:01.733
> 
> 标签：c++, stack, composite

我有 3 个类，Root、CFile、SubDirectory。Root 是一个抽象类。CFile 和 SubDirectory 是从 Root 派生的。CFile 具有属性：name:string、size:int、level:int。SubDirectory 有属性：name:string, size:int, level:int, 一个vector，包含文件和目录，还有一个函数void add() 将文件或目录推入vector。如果一个文件在目录中，文件的级别比目录的高一级。定义了所有的 setter 和 getter。

现在，我有一个名为 DirRead.h 的文件，它可以构造当前目录（计算机文件夹）中的所有条目。每个条目都有一个文件名、大小、级别和类型（文件或目录）。在主函数中，我被要求使用来自 DirRead 的信息作为输入来构建文件系统的层次结构（使用 CFile 和 SubDirectory）。DirRead.h 进行预购遍历。这种情况下不接受递归（我试过了，DirRead.h 报错）。我被要求使用堆栈来处理输入，但我不知道如何。显然水平在这里真的很重要。我试图创建一个堆栈并将所有文件和目录推入堆栈，然后比较级别以形成层次结构。但是 Root 没有 Add 功能，没有办法将 CFile 添加到 SubDirectory 中，因为它们都是 Root*。任何人都知道如何做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:45:37.730

您使用堆栈来跟踪您尚未探索的目录。您可以使用以下算法：

1.  将根目录压入堆栈。

2.  从堆栈中弹出顶部条目。如果堆栈为空，请停止，您就完成了。

3.  遍历您从堆栈中提取的目录。将其中的每个文件和目录添加到您的数据结构中。此外，将您找到的每个目录都推送到您的堆栈中。

4.  转到第 2 步。

# vim - vim：使用常规键作为修饰符

> ID：14867827
> 
> 赞同：1
> 
> 时间：2013-02-14T04:30:36.650
> 
> 标签：vim

我想`<Space>`用作修饰符，就像`Ctrl`,`Alt`或`Shift`.

例如，`hjkl`当按下空格键时，键可以跳 10 次而不是一次。就像是：

```
nnoremap <Space-h> 10h
nnoremap <Space-j> 10j
nnoremap <Space-k> 10k
nnoremap <Space-l> 10l 
```

这几乎有效：

```
nnoremap <Space>j 10j 
```

但我需要释放`<Space>`并再次按下它以重复自定义动作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T04:47:58.883

[arpeggio](http://www.vim.org/scripts/script.php?script_id=2425)是一个 Vim 插件，可让您定义同时键到其他键的键映射，例如`j`，`k`同时具有与`<Esc>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T07:41:16.963

`<Space>`不是修饰键，你不能欺骗 Vim 认为它是修饰键。除非你做一些系统方面的事情，比如交换`Ctrl`和`Space`.

寻找适合您操作系统的键绑定解决方案。

# javascript - 如何将我的 javascript 代码输出到 HTML？

> ID：14867828
> 
> 赞同：1
> 
> 时间：2013-02-14T04:30:58.933
> 
> 标签：javascript, jquery, html, eval

我正在完成编写一个 javascript 组件，我想提供一堆示例来说明配置属性、事件、方法等......

我目前有以下 HTML 来记录单个属性：

```
 <div class="conf">
        <div class="opt-name">allowFreeEntries</div>
        <code>boolean</code>
        <div style="clear:both;"></div>
        <div class="opt-desc">Restricts or allows the user to validate typed entries.<br/>Defaults to <em>true</em>
            <a class="opt-ex">View an example</a>
            <span class="hidden">{"allowFreeEntries": false}</span>
        </div>
      </div> 
```

单击“查看示例”链接时，我会弹出另一个 div，其中包含我的组件，其默认配置与隐藏跨度中给出的自定义配置混合在一起：

```
$('.conf .opt-ex').click(function(){
    var raw = $(this).next().html();
    var rawCfg = JSON.parse(raw);
    var exId = 'example-' + $('div[id^="example-"]').length + 1;
    var cfg = $.extend({
        renderTo: $('#' + exId),
        width: 590
    }, rawCfg);
    $('<div/>',{id: exId}).insertBefore(this);
    new MyComponent(cfg);
}); 
```

这一切都很顺利......这是棘手的部分。我想将完整的评估代码输出为组件上方的原始 HTML。我想向用户显示的是：

```
 <code><pre>
        new MagicSuggest({
            renderTo: $('#example-1'),
            width: 590,
            allowFreeEntries: false                    
        });
        </pre></code> 
```

我做了一些实验，但它们都显得笨拙。有什么建议么？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:49:01.900

据我了解，您正在尝试在新的 MagicSuggest 字符串中打印对象的值。AFAIK 你只需要使用字符串追加来追加它。要打印对象本身，您可以使用

```
 var printObj = typeof JSON != "undefined" ? JSON.stringify : function(obj) {
     var arr = [];
     $.each(obj, function(key, val) {
     var next = key + ": ";
     next += $.isPlainObject(val) ? printObj(val) : val;
     arr.push( next );
     });
     return "{ " +  arr.join(", ") + " }";
   }; 
```

参考：[http ://api.jquery.com/jQuery.extend/](http://api.jquery.com/jQuery.extend/)

# css - ajax更新后HTML选择下拉列表文本换行停止工作

> ID：14867831
> 
> 赞同：1
> 
> 时间：2013-02-14T04:31:26.463
> 
> 标签：css, select, drupal-7, html-select

我有一个 html 选择地址的下拉列表。有些地址很长，超出了父 div 的边界。

我做了功课，发现css规则解决了这个问题：

```
select, option { width: __; } 
```

此下拉列表是启用 ajax 的表单的一部分。当用户在其他时代发生变化时，地址字段的选项会发生变化。

现在我发现只要选项相同，css 规则就可以正常工作。一旦我做了一些导致选择选项被 ajax 更改的事情，css 规则就会失去它的控制权。选择选项字段恢复到原来的单行形式，突破了边界。

我检查了选项更改前后的 html 标记，以检查选择结构和 ID 是否完整。发现元素结构相同，select元素id没有变化。

那么，为什么CSS规则在更改选项时会丢失它？

该行为发生在 IE、Firefox 和 Chrome 中。

我正在使用 Drupal 7，它的形式是 ajax 框架。

更新：代码

我使用的是 Drupal 7，所以我实际上并没有编写 JS 代码。我只能在这里展示 PHP 和 CSS：

形式：

```
$form['shipping_address']['ship_to'] = array(
   '#type' => 'select',
   '#title' => 'Ship To',
   '#options' => $to_options,
   '#required' => true,
   '#default_value' => $selected, 
    '#ajax' => array(
      'callback' => 'ship_to_callback',
      'wrapper' => 'ship_to_address_replace',
    ),  
 );

  $ship_to_address_options = get_ship_to_address_options($selected);
  $form['shipping_address']['ship_to_address'] = array(
   '#type' => 'select',
   '#title' => $to_options[$selected],
   '#options' => $ship_to_address_options,
   '#prefix' => '<div id="ship_to_address_replace">',
   '#default_value' => isset($form_state['values']['ship_to_address']) ? $form_state['values']['ship_to_address'] : '',
   ); 
```

“ship_to”控制“ship_to_address”可用的选项。

CSS：

```
select#edit-ship-to-address, select#edit-bill-to-address {
  width: 60%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:43:27.707

CSS 规则丢失可能是因为选择器在 AJAX 更新后无效。如果有多个具有相同名称的元素，则 Drupal 中的表单元素 ID 将具有自动递增的数字后缀。检查标记并尝试调整您的 CSS 规则。您甚至可以通过添加以下内容为这些元素设置自己的类名：

```
$form['shipping_address']['ship_to_address']['#attributes']['class'][] = 'my-own-class-to-target-with-css'; 
```

此外，粘贴的代码不包括`#suffix`带有 close 的属性，这也可能导致其他问题。

# dart - 在 Dart 中，你可以让 web_ui 像 web_ui 库本身那样构建静态 html 文件吗？

> ID：14867834
> 
> 赞同：1
> 
> 时间：2013-02-14T04:31:36.960
> 
> 标签：dart, dart-webui

好的，这个问题可能听起来有点令人困惑，这就是我想要做的：

我想使用 web_ui 的 web 模板功能来生成 html 输出，（将进入“out”文件夹）。

也许一个更基本的问题是，你如何使用 Dart 的构建功能，比如 web_ui 库正在做什么（将东西构建到“out”文件夹中）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T05:26:15.290

我正在开发构建工具，它托管构建任务正是为了这种类型的目的。在 github 上查看：[https ://github.com/dart-lang/buildtool/](https://github.com/dart-lang/buildtool/)

现在 buildtool 支持 Web UI 编译器和 dart2js，编写自己的任务相当容易。我们设想了更多任务，例如生成文档、修复 HTML 中的 URL 以进行部署、生成 AppCache 清单文件等。

至于生成 HTML，buildtool 本身不会这样做，但任务可以。Web UI 不会在服务器上生成静态 HTML，但有一些模板库可能有用。

具体需要做什么事情？

# javascript - 使用javascript获取两个字符之间的子字符串

> ID：14867835
> 
> 赞同：283
> 
> 时间：2013-02-14T04:31:42.077
> 
> 标签：javascript, regex, string, substring

我正在尝试从一个较大的字符串中提取一个字符串，它会在 a`:`和 a之间获取所有内容`;`

当前的

```
Str = 'MyLongString:StringIWant;' 
```

期望的输出

```
newStr = 'StringIWant' 
```

* * *

## 回答 #1

> 赞同：571
> 
> 时间：2013-02-14T04:39:03.717

你可以试试这个

```
var mySubString = str.substring(
    str.indexOf(":") + 1, 
    str.lastIndexOf(";")
); 
```

* * *

## 回答 #2

> 赞同：173
> 
> 时间：2014-12-17T09:46:53.080

你也可以试试这个：

```
var str = 'one:two;three';    
str.split(':').pop().split(';')[0]; // returns 'two' 
```

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2013-02-14T04:35:45.977

采用`split()`

```
var s = 'MyLongString:StringIWant;';
var arrStr = s.split(/[:;]/);
alert(arrStr); 
```

`arrStr``:`将包含由or分隔的所有字符串，`;`
因此通过`for-loop`

```
for(var i=0; i<arrStr.length; i++)
    alert(arrStr[i]); 
```

* * *

## 回答 #4

> 赞同：45
> 
> 时间：2016-08-11T01:22:50.550

@Babasaheb Gosavi 如果您出现一次子字符串（“：”和“；”），那么答案是完美的。但是一旦出现多次，它可能会变得有点棘手。

* * *

我想出的处理多个项目的最佳解决方案是在一个对象内使用四种方法。

*   **第一种方法：**实际上是从两个字符串之间获取一个子字符串（但是它只会找到一个结果）。
*   **第二种方法：**将删除（可能是）最近找到的结果及其前后的子字符串。
*   **第三种方法：**将对字符串递归执行上述两种方法。
*   **第四种方法：**将应用第三种方法并返回结果。

* * *

## 代码

说了这么多，让我们看看代码：

```
var getFromBetween = {
    results:[],
    string:"",
    getFromBetween:function (sub1,sub2) {
        if(this.string.indexOf(sub1) < 0 || this.string.indexOf(sub2) < 0) return false;
        var SP = this.string.indexOf(sub1)+sub1.length;
        var string1 = this.string.substr(0,SP);
        var string2 = this.string.substr(SP);
        var TP = string1.length + string2.indexOf(sub2);
        return this.string.substring(SP,TP);
    },
    removeFromBetween:function (sub1,sub2) {
        if(this.string.indexOf(sub1) < 0 || this.string.indexOf(sub2) < 0) return false;
        var removal = sub1+this.getFromBetween(sub1,sub2)+sub2;
        this.string = this.string.replace(removal,"");
    },
    getAllResults:function (sub1,sub2) {
        // first check to see if we do have both substrings
        if(this.string.indexOf(sub1) < 0 || this.string.indexOf(sub2) < 0) return;

        // find one result
        var result = this.getFromBetween(sub1,sub2);
        // push it to the results array
        this.results.push(result);
        // remove the most recently found one from the string
        this.removeFromBetween(sub1,sub2);

        // if there's more substrings
        if(this.string.indexOf(sub1) > -1 && this.string.indexOf(sub2) > -1) {
            this.getAllResults(sub1,sub2);
        }
        else return;
    },
    get:function (string,sub1,sub2) {
        this.results = [];
        this.string = string;
        this.getAllResults(sub1,sub2);
        return this.results;
    }
}; 
```

* * *

## 如何使用？

### 例子：

```
var str = 'this is the haystack {{{0}}} {{{1}}} {{{2}}} {{{3}}} {{{4}}} some text {{{5}}} end of haystack';
var result = getFromBetween.get(str,"{{{","}}}");
console.log(result);
// returns: [0,1,2,3,4,5] 
```

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2013-02-14T04:35:00.593

```
var s = 'MyLongString:StringIWant;';
/:([^;]+);/.exec(s)[1]; // StringIWant 
```

* * *

## 回答 #6

> 赞同：24
> 
> 时间：2016-05-17T21:04:42.957

我喜欢这种方法：

```
var str = 'MyLongString:StringIWant;';
var tmpStr  = str.match(":(.*);");
var newStr = tmpStr[1];
//newStr now contains 'StringIWant' 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2019-10-21T17:01:05.310

您可以使用更高阶的函数来返回提取器的“编译”版本，这样会更快。

使用正则表达式，并在闭包中编译一次正则表达式，Javascript 的匹配将返回所有匹配项。

这使我们只需要删除我们用作标记的内容（即：）`{{`，我们可以将字符串长度与切片一起使用。

```
function extract([beg, end]) {
    const matcher = new RegExp(`${beg}(.*?)${end}`,'gm');
    const normalise = (str) => str.slice(beg.length,end.length*-1);
    return function(str) {
        return str.match(matcher).map(normalise);
    }
} 
```

编译一次，多次使用...

```
const stringExtractor = extract(['{','}']);
const stuffIneed = stringExtractor('this {is} some {text} that can be {extracted} with a {reusable} function');
// Outputs: [ 'is', 'text', 'extracted', 'reusable' ] 
```

或者一次性使用...

```
const stuffIneed = extract(['{','}'])('this {is} some {text} that can be {extracted} with a {reusable} function');
// Outputs: [ 'is', 'text', 'extracted', 'reusable' ] 
```

还要查看 Javascript 的`replace`函数，但使用一个函数作为替换参数（例如，如果你正在做一个迷你模板引擎（字符串插值），你会这样做...... lodash.get 也可能有助于获取你想要的值用。。。来代替 ？ ...

我的答案太长了，但它可能对某人有帮助！

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2020-01-08T07:21:00.413

```
function substringBetween(s, a, b) {
    var p = s.indexOf(a) + a.length;
    return s.substring(p, s.indexOf(b, p));
}

// substringBetween('MyLongString:StringIWant;', ':', ';') -> StringIWant
// substringBetween('MyLongString:StringIWant;;', ':', ';') -> StringIWant
// substringBetween('MyLongString:StringIWant;:StringIDontWant;', ':', ';') -> StringIWant 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2018-03-12T20:24:32.797

我使用了@tsds 方式，但只使用了 split 函数。

```
var str = 'one:two;three';    
str.split(':')[1].split(';')[0] // returns 'two' 
```

注意：如果字符串中没有“：”，则访问数组的 '1' 索引将引发错误！str.split(':')[1]

因此，如果存在不确定性，@tsds 方式会更安全

```
str.split(':').pop().split(';')[0] 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-06-01T13:47:00.320

你也可以用这个...

```
function extractText(str,delimiter){
  if (str && delimiter){
    var firstIndex = str.indexOf(delimiter)+1;
    var lastIndex = str.lastIndexOf(delimiter);
    str = str.substring(firstIndex,lastIndex);
  }
  return str;
}

var quotes = document.getElementById("quotes");

// &#34 - represents quotation mark in HTML
```

```
<div>

  <div>

    <span id="at">
      My string is @between@ the "at" sign
    </span>
    <button onclick="document.getElementById('at').innerText = extractText(document.getElementById('at').innerText,'@')">Click</button>

  </div>

  <div>
    <span id="quotes">
      My string is "between" quotes chars
    </span>
    <button onclick="document.getElementById('quotes').innerText = extractText(document.getElementById('quotes').innerText,'&#34')">Click</button>

  </div>

</div>
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-05-26T14:53:36.127

使用“get_between”实用功能：

```
get_between <- function(str, first_character, last_character) {
    new_str = str.match(first_character + "(.*)" + last_character)[1].trim()
    return(new_str)
    } 
```

**细绳**

```
my_string = 'and the thing that ! on the @ with the ^^ goes now' 
```

**用法**：

```
get_between(my_string, 'that', 'now') 
```

**结果**：

```
"! on the @ with the ^^ goes 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-09-03T07:43:00.890

这可能是可能的解决方案

```
var str = 'RACK NO:Stock;PRODUCT TYPE:Stock Sale;PART N0:0035719061;INDEX NO:21A627 042;PART NAME:SPRING;';  
var newstr = str.split(':')[1].split(';')[0]; // return value as 'Stock'

console.log('stringvalue',newstr) 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-09-19T10:28:16.533

获取两个子字符串之间的字符串（包含超过 1 个字符）

```
function substrInBetween(whole_str, str1, str2){
   if (whole_str.indexOf(str1) === -1 || whole_str.indexOf(str2) === -1) {
       return undefined; // or ""
  }
  strlength1 = str1.length;
  return whole_str.substring(
                whole_str.indexOf(str1) + strlength1, 
                whole_str.indexOf(str2)
               );

   } 
```

注意我使用`indexOf()`而不是`lastIndexOf()`所以它会检查这些字符串的第一次出现

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-04-18T10:44:31.643

试试这个使用javascript获取两个字符之间的子字符串。

```
 $("button").click(function(){
            var myStr = "MyLongString:StringIWant;";
            var subStr = myStr.match(":(.*);");
            alert(subStr[1]);
        }); 
```

取自@[用jQuery查找两个字符之间的子字符串](http://www.jquerypot.com/how-to-find-substring-between-the-two-characters-with-jquery/)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-07-04T15:14:11.280

我制作的一个小函数可以抓取中间的字符串，并且可以（可选地）跳过一些匹配的单词来抓取特定的索引。

此外，设置`start`为`false`将使用字符串的开头，设置`end`为`false`将使用字符串的结尾。

设置为要使用`pos1`的文本的位置，将使用第一次出现的`start``1``start`

`pos2`做与 , 相同的事情`pos1`，但对于`end`, 并且`1`将使用`end`仅 after的第一次出现`start`，`end`before的出现`start`被忽略。

```
function getStringBetween(str, start=false, end=false, pos1=1, pos2=1){
  var newPos1 = 0;
  var newPos2 = str.length;

  if(start){
    var loops = pos1;
    var i = 0;
    while(loops > 0){
      if(i > str.length){
        break;
      }else if(str[i] == start[0]){
        var found = 0;
        for(var p = 0; p < start.length; p++){
          if(str[i+p] == start[p]){
            found++;
          }
        }
        if(found >= start.length){
          newPos1 = i + start.length;
          loops--;
        }
      }
      i++;
    }
  }

  if(end){
    var loops = pos2;
    var i = newPos1;
    while(loops > 0){
      if(i > str.length){
        break;
      }else if(str[i] == end[0]){
        var found = 0;
        for(var p = 0; p < end.length; p++){
          if(str[i+p] == end[p]){
            found++;
          }
        }
        if(found >= end.length){
          newPos2 = i;
          loops--;
        }
      }
      i++;
    }
  }

  var result = '';
  for(var i = newPos1; i < newPos2; i++){
    result += str[i];
  }
  return result;
} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2021-01-13T17:23:20.453

获取所有子字符串。

```
var out = []; 'MyLongString:StringIWant;'
.replace(/(:)\w+(;)+/g, (e) => {
    out.push(e.replace(':', '').replace(';', ''))
    return e;
});
console.log(out[0]) 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-05-10T19:17:13.627

上面的代码适用于简单的示例，但可以帮助...使用 Typescript。

## 参数

*   `sentence`: 你想要获取的字符串
*   `first`: 开始字符（对于最初的例子，它是`:`）
*   `last`：你的角色的最后一个字符（对于最初的例子，它是`;`）

## 输出

字符串数组 ( `string[]`)。`[]`如果 中没有好的部分，则返回`sentence`。

## 代码

```
function getParts(sentence: string, first: string, last: string): string[] { 
  let goodParts: string[] = [];

  const allParts = sentence.split(first);

  allParts.forEach((part: string) => {
    if (part.indexOf(last) > -1) {
            const goodOne = (part.split(last))[0];
      goodParts = goodParts.concat(goodOne);
    }
  });

  return goodParts;
} 
```

## 例子

```
const origin = "wrongString1:rightString1;wrongString2:rightString2;wrongString3:rightString3;wrongString4:rightString4;";

const result = getParts(origin, ':', ';');

console.log(result);
// ["rightString1", "rightString2", "rightString3", "rightString4"] 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2022-01-19T04:34:05.410

通用且简单：

```
function betweenMarkers(text, begin, end) {
  var firstChar = text.indexOf(begin) + begin.length;
  var lastChar = text.indexOf(end);
  var newText = text.substring(firstChar, lastChar);
  return newText;
}

console.log(betweenMarkers("MyLongString:StringIWant;",":",";"));
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-10-20T19:34:52.813

如果要从字符串中提取出现在两个分隔符（不同或相同）之间的所有子字符串，可以使用此函数。它返回一个包含所有找到的子字符串的数组：

```
function get_substrings_between(str, startDelimiter, endDelimiter) 
{
    var contents = [];
    var startDelimiterLength = startDelimiter.length;
    var endDelimiterLength = endDelimiter.length;
    var startFrom = contentStart = contentEnd = 0;

    while(false !== (contentStart = strpos(str, startDelimiter, startFrom))) 
    {
        contentStart += startDelimiterLength;
        contentEnd = strpos(str, endDelimiter, contentStart);
        if(false === contentEnd) 
        {
            break;
        }
        contents.push( str.substr(contentStart, contentEnd - contentStart) );
        startFrom = contentEnd + endDelimiterLength;
    }

    return contents;
}

// https://stackoverflow.com/a/3978237/1066234
function strpos(haystack, needle, offset) 
{
    var i = (haystack+'').indexOf(needle, (offset || 0));
    return i === -1 ? false : i;
}

// Example usage
var string = "We want to extract all infos (essential ones) from within the brackets (this should be fun).";
var extracted = get_substrings_between(string, '(', ')');
console.log(extracted); 
// output: (2) ["essential ones", "this should be fun"] 
```

最初来自[raina77ow](https://stackoverflow.com/a/27078384/1066234)的 PHP ，移植到 Javascript。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-12-24T12:58:43.813

```
var str = '[basic_salary]+100/[basic_salary]';
var arr = str.split('');
var myArr = [];
for(var i=0;i<arr.length;i++){
    if(arr[i] == '['){
        var a = '';
        for(var j=i+1;j<arr.length;j++){
            if(arr[j] == ']'){
                var i = j-1;
                break;
            }else{
                a += arr[j];
            }
        }
        myArr.push(a);
    }
    var operatorsArr = ['+','-','*','/','%'];
    if(operatorsArr.includes(arr[i])){
        myArr.push(arr[i]);
    }
    var numbArr = ['0','1','2','3','4','5','6','7','8','9'];
    if(numbArr.includes(arr[i])){
        var a = '';
        for(var j=i;j<arr.length;j++){
            if(numbArr.includes(arr[j])){
                a += arr[j];
            }else{
                var i = j-1;
                break;
            }
        }
        myArr.push(a);
    }
}
myArr = ["basic_salary", "+", "100", "/", "basic_salary"] 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-08-06T01:41:36.597

您可以使用此功能-

```
function getStringInBetween(string, start , end) {
    // start and end will be excluded
    var indexOfStart = string.indexOf(start)
    indexOfStart = indexOfStart + start.length;
    var newString = string.slice(indexOfStart)
    var indexOfEnd = newString.indexOf(end)
    return newString.slice(0, indexOfEnd)
} 
```

对于前 -

```
let string = "<div class = 'mice'> I know how to code </div>"
let start = "<div class = 'mice'> "
let end = " </div>"
//then, getStringInBetween(string, start, end) returns "I know how to code" 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-08-16T13:31:22.797

这是我刚做的东西。

请注意，该函数将在`start`if `end`is not found after 之后返回所有内容`start`。它还期望只出现一次 start 和 end，如果有多个 - 它只会考虑第一个。

许可证：公共领域

```
/**
 * Extracts a string from `source` that is placed between `start` and `end`. The function
 * considers only one instance of start and before, or the first instance and does not support
 * multiple occurences otherwise. If end string is not found, it will return everything after
 * `start` to the end of the string.
 */
export function stringBetween(source, start, end) {
  if (source.indexOf(start) === -1) {
    return null;
  }

  const sourceSplitByStartString = source.split(start);

  // Note: If start string is the very first occurence in source string, the result will be an
  // array where the first item is an empty string and the next item is of interest.

  if (
    sourceSplitByStartString.length === 1
    || sourceSplitByStartString[1] === ''
  ) {
    // It means that start is either the entire string or is at the very end of the string, so there
    // is not anything between
    return '';
  }

  const afterStart = sourceSplitByStartString[1];

  // If the after separator is not found, return everything after the start separator to the end
  // of the string
  if (afterStart.indexOf(end) === -1) {
    return afterStart;
  }

  const afterStartSplitByEnd = afterStart.split(end);

  if (afterStartSplitByEnd[0] === '') {
    return '';
  }

  return afterStartSplitByEnd[0];
} 
```

测试：

```
import { stringBetween } from './string';

describe('string utlities', () => {
  describe('stringBetween', () => {
    it('Extracts a substring between 2 other substrings', () => {
      const sample1 = stringBetween('Black cat climbed the tree fast.', 'cat ', ' the tree');
      expect(sample1).toBe('climbed');

      const sample2 = stringBetween('Black cat climbed the tree fast.', 'Black ', ' fast.');
      expect(sample2).toBe('cat climbed the tree');
    });

    it('extracts everything after start if end is not found', () => {
      const sample2 = stringBetween('Black cat climbed the tree fast.', 'Black ', 'not-there');
      expect(sample2).toBe('cat climbed the tree fast.');
    });

    it('returns empty string if start string occurs at the end', () => {
      const sample = stringBetween('Black cat climbed the tree fast.', 'fast.', 'climbed');
      expect(sample).toBe('');
    });

    it('returns empty string if start string is the entire string', () => {
      const sample = stringBetween('Black cat', 'Black cat', 'climbed');
      expect(sample).toBe('');
    });

    it('returns empty string if there is not anything between start and end', () => {
      const sample = stringBetween('Black cat climbed the tree fast.', 'climbed ', 'the tree');
      expect(sample).toBe('');
    });

    it('returns null if start string does not exist in the source string', () => {
      const sample = stringBetween('Black cat climbed the tree fast.', 'not-there ', 'the tree');
      expect(sample).toBe(null);
    });
  });
}); 
```

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2021-08-08T11:47:30.973

以下函数获得第一个匹配项

```
 function getStringBetween(x: string, start: string, end: string) {
  const regex = new RegExp(`${start}(.*?)${end}`)

  if (regex.test(x)) {
    return regex.exec(x)![1]
  } else return undefined
} 
```

笑话测试

```
 test("getStringBetween", () => {
  const result = getStringBetween("<em> Jai Ram</em>", "<em>", "</em>")
  expect(result).toEqual(" Jai Ram")
  const result1 = getStringBetween(
    "hare Jai Ram hare hare hare",
    "hare",
    "hare"
  )
  expect(result1).toEqual(" Jai Ram ")
}) 
```

# matlab - 活动轮廓算法

> ID：14867836
> 
> 赞同：3
> 
> 时间：2013-02-14T04:32:01.610
> 
> 标签：matlab

有人可以为我提供在 matlab 中实现活动轮廓（蛇）的分步算法吗？网上资料对我来说很难理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T13:30:20.857

我遇到了和你一样的问题，我搜索了一些分步实现，最后我得到了它，这里是链接：

[用 MATLAB 实现 Snake](http://www.cb.uu.se/~cris/blog/index.php/archives/217/comment-page-1#comment-2267)

祝你成功..

# c++ - 如何改进编译器对我的 SSE 内在函数的处理？

> ID：14867841
> 
> 赞同：3
> 
> 时间：2013-02-14T04:32:35.427
> 
> 标签：c++, visual-studio-2010, assembly, sse

在阅读[了这篇关于在不同 C++ 编译器中对 SSE 代码进行内在引导优化的结果的有趣文章后，](http://www.liranuna.com/sse-intrinsics-optimizations-in-popular-compilers/)我决定自己做一个测试，特别是因为这篇文章已经有几年了。我使用了 MSVC，它在帖子作者执行的测试中表现非常糟糕（尽管在 VS 2010 版本中）并决定坚持一个非常基本的场景：将一些值打包到 XMM 寄存器中并执行简单的操作，如加法. 在文章中，_mm_set_ps 翻译成一个奇怪的标量移动和解包指令序列，所以让我们看看：

```
int _tmain(int argc, _TCHAR* argv[])
{
    __m128 foo = _mm_set_ps(1.0f, 2.0f, 3.0f, 4.0f);
    __m128 bar = _mm_set_ps(5.0f, 6.0f, 7.0f, 8.0f);
    __m128 ret = _mm_add_ps(foo, bar);

    // need to do something so vars won't be optimized out in Release
    float *f = (float *)(&ret);
    for (int i = 0; i < 4; i++) 
    {
        cout << "f[" << i << "] = " << f[i] << endl;
    }
} 
```

接下来，我在调试器中编译并运行它，查看反汇编：

**调试：**

> __m128 foo = _mm_set_ps(1.0f, 2.0f, 3.0f, 4.0f);
> 00B814F0 movaps xmm0,xm​​mword ptr ds:[0B87840h]
> 00B814F7 movaps xmmword ptr [ebp-190h],xmm0
> 00B814FE movaps xmm0,xm​​mword ptr [ebp-190h]
> 00B81505 movaps xmmword ptr [08],xmm0
> _psm.2 6.0f、7.0f、8.0f）；
> 00B81509 movaps xmm0,xm​​mword ptr ds:[0B87850h]
> 00B81510 movaps xmmword ptr [ebp-170h],xmm0
> 00B81517 movaps xmm0,xm​​mword ptr [ebp-170h]
> 00B8151E movaps xmmword ptr,bar],_
> mm_add_ps1( );
> 00B81522 movaps xmm0,xm​​mword ptr [bar]
> 00B81526 movaps xmm1,xmmword ptr [foo]
> 00B8152A addps xmm1,xmm0
> 00B8152D movaps xmmword ptr [ebp-150h],xmm1
> 00B81534 movaps xmm0,xm​​mword ptr [ebp-150h]
> 00B8153B movaps xmmword ptr [ret],xmm0

完全糊涂；为什么将 xmmword 放入 __m128 需要四个 MOVAPS？首先，它将数据放入 xmm0 （我假设它是存储在某处的四个浮点值的文字，不知道如何查看它），然后将 xmm0 复制到 ebp 指向的某处和一个偏移量，然后再将其复制回来到 xmm0 (?)，最后到应该存储它的变量的位置。为什么要做这么多工作？

**发布：** 这次我希望编译器完全避免将 xmmword 存储在内存中，只需将一个放在 xmm0 中，另一个放在 xmm1 中，执行 ADDPS，将结果放在内存中并完成它。相反，我得到了：

> __m128 foo = _mm_set_ps(1.0f, 2.0f, 3.0f, 4.0f);
> __m128 bar = _mm_set_ps(5.0f, 6.0f, 7.0f, 8.0f);
> __m128 ret = _mm_add_ps(foo, bar);
> 003E1009 movaps xmm0,xm​​mword ptr ds:[3E2130h]
> 003E1010 push esi
> 003E1011 movaps xmmword ptr [esp+10h],xmm0

显然，不需要 ADDPS。我猜编译器注意到这两个 xmmwords 是编译时常量，所以它只是添加了它们，将结果作为文字放入代码中？奇怪的推动可能与随后的 for 循环有关，因为据我所知， esi 在那里用作循环计数器。不过，为什么要将数据段中预先计算的文字放入 xmm0 中，然后放入局部变量（esp+10h），为什么不直接使用文字呢？

总而言之，Debug 版本比我预期的更愚蠢（或者我可能没有得到什么），而 Release 版本却出人意料地聪明。任何解释此行为的评论将不胜感激。谢谢。

**编辑：**答案非常有启发性，但我仍然想知道**我**是否可以做些什么来改进编译器输出，这就是为什么我将问题从要求对此进行解释更改为当前形式。

例如，是否有可能以某种方式引导编译器不将*foo*和*bar*存储在内存中（因为添加后我不需要它们），只需将它们加载到 xmmN 寄存器并将它们保留在那里？也有可能*退*吗？引用文章的作者说，MSVC 只是“完全按照它的指示行事”。有什么方法可以在不显式编写 __asm 块的情况下变得更好（阅读：避免内存传输）代码？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T05:16:20.913

这只是代码生成器工作方式的正常副作用。_mm_set_ps() 有**两个**不同的工作要做。它首先必须从 4 个参数中建立 __m128 值。你选择了简单的方法，它变得更加复杂：

```
float x = 1.0f;
__m128 foo = _mm_set_ps(x, 2.0f, 3.0f, 4.0f); 
```

使用截然不同的代码生成：

```
00C513DD  movss       xmm0,dword ptr ds:[0C5585Ch]  
00C513E5  movss       xmm1,dword ptr [x]  
00C513EA  movaps      xmm2,xmmword ptr ds:[0C55860h]  
00C513F1  unpcklps    xmm0,xmm1  
00C513F4  unpcklps    xmm2,xmm0  
00C513F7  movaps      xmmword ptr [ebp-100h],xmm2 
```

第二个工作是把它移到 __m128 变量中，这很容易

```
00C513FE  movaps      xmm0,xmmword ptr [ebp-100h]  
00C51405  movaps      xmmword ptr [foo],xmm0 
```

这还没有优化仅仅是因为优化器在 Debug 构建中被关闭。代码生成器不会尝试优化，这不是它的工作。

当然，优化器能够在编译时计算结果。这甚至适用于复杂的示例，您已经看到了：

```
00EE1284  movaps      xmm0,xmmword ptr ds:[0EE3260h] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T04:41:39.887

您对发布版本的编译时优化是正确的（`ds:[3E2130h]`在您的目标文件中查找，您会在那里找到添加的值）。

是的，调试版本似乎做了不必要的工作，但只有 2 倍，而不是 4 倍。人们实际上会期望

```
 movaps xmmword ptr [foo],xmmword ptr ds:[0B87840h] 
```

存在，但它不存在，`MOVAPS`有两种变体，并且都不允许从内存移动到内存（这是 x86 中的常见情况）：

```
MOVAPS xmm1,xmm2/mem128       ; 0F 28 /r        [KATMAI,SSE]
MOVAPS xmm1/mem128,xmm2       ; 0F 29 /r        [KATMAI,SSE] 
```

`ds:[0B87840h]`调试程序集所做的是从目标文件的`.data`部分（很可能是只读的）中读取 xmmword ，并将其放入堆栈`[ebp-190h]`中的`foo`.

作为比较，gcc 4.7 展示了类似的模式：

```
movaps  xmm0, XMMWORD PTR .LC0[rip] # D.5374,
movaps  XMMWORD PTR [rbp-64], xmm0  # foo, D.5353
movaps  xmm0, XMMWORD PTR .LC1[rip] # D.5381,
movaps  XMMWORD PTR [rbp-48], xmm0  # bar, D.5354
movaps  xmm0, XMMWORD PTR [rbp-64]  # tmp79, foo
movaps  XMMWORD PTR [rbp-32], xmm0  # __A, tmp79
movaps  xmm0, XMMWORD PTR [rbp-48]  # tmp80, bar
movaps  XMMWORD PTR [rbp-16], xmm0  # __B, tmp80
movaps  xmm0, XMMWORD PTR [rbp-16]  # tmp81, __B
movaps  xmm1, XMMWORD PTR [rbp-32]  # tmp82, __A
addps   xmm0, xmm1  # D.5386, tmp82 
```

我认为这与内置内在函数的实现方式有关。例如，`_mm_add_ps`使用在`__m128`调用时可能位于寄存器、堆栈或其他地方的参数。因此，如果您正在为 gcc/VC++ 编写内部代码，则必须首先生成将加载这些值的代码。当优化器运行时，它会立即注意到有不必要的数据推送（但优化器不会在调试版本中运行）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T04:52:21.330

这确实是一个关于 MSVC 内部的问题。要获得明确的答案，您必须询问 Microsoft。

有人可能会推测 Release 构建将 ret 放入局部变量的原因是您获取了它的地址。获取变量的地址意味着编译器突然不得不处理*内存*而不是寄存器。内存对于编译器来说要困难得多，因为程序中的其他地方可能有指向优化器必须考虑的指针。

# c# - C# 中的 ContextMenu 设计器应用程序

> ID：14867846
> 
> 赞同：1
> 
> 时间：2013-02-14T04:32:43.123
> 
> 标签：c#, winforms, contextmenu

是否有任何简单的可能性来创建应用程序，我可以在其中创建任何 ContextMenu，就像在 Visual Studio 中一样简单（下图）？我的意思是是否有任何组件或已经使用源代码完成了任何应用程序可以做到这一点？我只是希望能够像在 VisualStudio 中一样在应用程序中创建一些带有文本和图标的 ContextMenu 项目。

![上下文菜单设计器](../Images/82c39e5617560f11f6ee67f33901216a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T03:03:36.710

有几种方法可以完成，我对您的建议是设置一个根**ToolStripMenuItem**并从那里构建一个子菜单操作。

您还需要有一个对话框来*配置*您希望操作如何进行相应的行为。

我正在使用**Process.Start**允许用户在单击子菜单时执行他们想要启动应用程序的特定操作。

这是代码片段

```
 ToolStripMenuItem menu;

    private void InitContextMenus()
    {
      menu = new ToolStripMenuItem(">> Create Menu <<");
      menu.Click += menu_Click;
      ctMenu.Items.Add(menu);
    }

    void menu_Click(object sender, EventArgs e)
    {
      frmCreateMenu objCreateMenu = new frmCreateMenu();
      objCreateMenu.ShowDialog(this);
      if (objCreateMenu.DialogResult == System.Windows.Forms.DialogResult.OK)
      {
        ToolStripMenuItem subMenu = new ToolStripMenuItem();
        subMenu.Text = objCreateMenu.txtName.Text;
        subMenu.Click += (subSender, subEventArgs) =>
        {
          Process.Start(objCreateMenu.txtStart.Text);
        };

        menu.DropDownItems.Add(subMenu);
      }
} 
```

# javascript - 需要在页面重新加载后保留输入文件字段，通过服务器也可以

> ID：14867848
> 
> 赞同：2
> 
> 时间：2013-02-14T04:33:01.127
> 
> 标签：javascript, html

我有一个包含文件输入字段的表单。在这里，用户上传了一张图片。进行 Ajax 调用并验证图像。

如果图像有效，我们可以移动到下一页（页面重新加载后），那里有更多的字段要填写。用户填写表单后，我们需要提交整个表单以及在前一个屏幕上选择的图像。

我不确定如何在浏览器中处理文件输入。我可以在页面之间保留一些信息，例如文件路径等，方法是在页面重新加载时将其发送到服务器，并在第二页中使用路径创建隐藏文件字段。但这行得通吗？浏览器会有任何安全限制吗？究竟什么需要持久化到下一页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:43:20.833

我不认为你能做到这一点。如果您可以预设文件值，那么您可以访问用户的文件。这是一个很大的安全问题。对此还有另一个讨论。

[使用默认文本填充 FILE 字段](https://stackoverflow.com/questions/2862357/populate-file-field-with-default-text)

详细点，推荐

1.  在下一页了解更多信息，不要通过显示文件名再次询问文件（使用临时上传的文件名，在服务器中）

2.  逐步收集信息后您仍然可以提交整个表单，但不能提交文件字段。如果您希望文件与表单一起传递多个页面，请将服务器端文件名作为隐藏字段传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T04:43:34.530

当用户选择图像并重定向到其他页面时，您可以上传图像，如果用户没有填写其他页面上的表格，则删除该图像。通过增加：

```
$(window).on("beforeunload", function() {
    $.ajax({ 
       // delete the images by AJAX request to the server
    });
}); 
```

# mysql - mysql 组返回所有行

> ID：14867852
> 
> 赞同：1
> 
> 时间：2013-02-14T04:33:16.647
> 
> 标签：mysql, group-by

我这里有个问题..

假设我有这张桌子......

```
waktu               |   tglTransaksiJual   | nominal   | ongkir    | STATUS    | idUser
---------------------------------------------------------------------------------------
2013-02-01 00:00:00 | 2013-01-29 15:00:00  | 10000     | 10000     | APPROVED  | 1
0000-00-00 00:00:00 | 2013-02-02 15:00:00  | 20000     | 0         | DONE      | 2
0000-00-00 00:00:00 | 2013-02-02 15:00:00  | 10000     | 5000      | DONE      | 2
2013-02-03 00:00:00 | 2013-02-01 15:00:00  | 20000     | 0         | APPROVED  | 3 
```

并且我使用这个查询

```
SELECT DISTINCT(date(IF(waktu = '0000-00-00 00:00:00', tglTransaksiJual, waktu))) AS thedate, SUM( nominal+ongkir ) AS total
        FROM transaksijual
        WHERE IF(waktu = '0000-00-00 00:00:00', tglTransaksiJual, waktu) BETWEEN '2013-02-01' AND '2013-02-05' AND status LIKE 'DONE%' AND idUser LIKE '2%'    
        GROUP BY thedate
        ORDER BY thedate ASC 
```

但我得到的结果是

```
thedate    | total
-------------------
2013-02-01 | 30000 
```

我想要的是这样的

```
thedate    | total
------------------
2013-02-01 | 0
2013-02-02 | 35000
2013-02-03 | 0 
```

我怎样才能做到这一点？？那可能吗？？所以结论是..当没有数据时，我想获取 0 值并获取行...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:51:07.340

删除`WHERE`条件并将`SUM`列更新为仅在满足条件时求和：

```
SUM(IF(status = 'DONE' AND idUser = '2', nominal + ongkir, 0)) 
```

# c++ - 链表中的运算符重载

> ID：14867858
> 
> 赞同：0
> 
> 时间：2013-02-14T04:33:52.933
> 
> 标签：c++, linked-list

我从另一个职位搬到这里。但是这次我能够获得某种类型的输出。但我似乎无法遍历我的节点并让它们单独打印出来，就像它在输出中的外观一样。这是我到目前为止所拥有的，也是程序应该输出的屏幕截图。

![在此处输入图像描述](../Images/71931e7d02a74dcd19c2002d6745ba3e.png)

LList.h

```
#ifndef LList_h
#define LList_h

#include <iostream>
#include "node.h"

class LList
{
    public:
        LList(void);            //constructor
        LList(const LList &);   //copy constructor
        ~LList();               //destructor
        LList *next;            //points to next node
        void push_back(const string &str);
        void push_front(const string &str);
        friend ostream& operator<<(ostream& out, const LList& llist);
        LList &operator=(const LList &l);       

    private:
        Node *_head;
        Node *_tail;
        LList *front;       //points to front of the list
};

inline LList::LList(void)
{
    cerr << "head = tail = 0 at 0024f8d0\n";

    _head = 0;
    _tail = 0;
    front = 0;
}

inline void LList::push_back(const string &str)
{
    Node *p = new Node(str);
    if (_tail == 0)
    {
        _head = _tail = p;
    }
    else
    {
        _tail ->next(p);
        _tail = p;
    }

    if (_head == 0)
    {
        _head = _tail = p;
    }
    else
    {
        _head ->next(p);
        _head = p;
    }
}

inline void LList::push_front(const string &str)
{
    Node *p = new Node(str);
    if (_tail == 0)
    {
        _head = _tail = p;
    }
    else
    {
        _tail ->next(p);
        _tail = p;
    }

    if (_head == 0)
    {
        _head = _tail = p;
    }
    else
    {
        _head ->next(p);
        _head = p;
    }
}

LList & LList::operator=(const LList &l)
{
    _head = l._head;
    _tail = l._tail;
    front = l.front;
    return *this;
}

inline LList::~LList()
{
}

#endif 
```

maind.cpp

```
#include "LList.h"
#include <iostream>

using namespace std;

ostream& operator<<(ostream& out, const LList& llist);

int main( )
{
    LList a;

    a.push_back(  "30" );
    a.push_front( "20" );
    a.push_back(  "40" );
    a.push_front( "10" );
    a.push_back(  "50" );

    cout << "list a:\n" << a << '\n';
    return 0;
}

ostream &operator <<( ostream &out, const LList & llist )
{
    for( LList *p = llist.front; p != 0; p = p -> next )
        out << p -> next;

    return out;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:44:06.917

```
out << p -> next; 
```

此行将跳过您的第一个元素并在您的最后一个元素上导致未定义的行为（可能是段错误）。这应该是`out<<p`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T04:46:04.353

您`operator<<`将不会打印任何内容，因为`LList::front`从未分配给。它始终为空。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T04:50:10.800

您的推送算法毫无意义。要将某些内容推到列表的后面，您只想`head`在列表为空时进行修改，但您有：

```
if (_head == 0)
{
    _head = _tail = p;
}
else
{
    _head ->next(p);
    _head = p;
} 
```

如果列表中已经有条目，为什么要设置`_head`为？`p`您的代码有许多类似的错误——逻辑不正确。

结局大概应该是：

```
if (_head == 0)
    _head = p; 
```

如果头部已经有一个节点，那么在后面添加一个条目根本不会影响头部。

# dns - DNS 设置：我可以在不同的服务器上托管不同的文件吗？

> ID：14867863
> 
> 赞同：2
> 
> 时间：2013-02-14T04:34:48.457
> 
> 标签：dns

假设这是我的域：[http://www.example.com](http://www.example.com)。

我有两台服务器可用，一台来自godaddy，一台来自heroku。

现在我想设置 DNS，以便我可以在 godaddy 中托管所有图像和 xml 文件（不支持 SSL），并且 heroku 中的 PHP 和 HTML 将能够使用它们（通过 HTTPS，这样就不会是这个警告：*页面包含其他不安全的资源。*）。

是否可以？我应该如何配置 DNS？

我对 DNS 和使用服务器不是很有经验，所以如果有人能教我如何做到这一点，那就太好了，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:43:12.800

我不认为一个域可以映射到 2 个不同的服务器（IP），你可以做的是你可以在 godady 上创建一个像 files.example.com 这样的子域并在那里上传所有图像和 xml 文件并设置heroku 的主域 example.com。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T04:51:36.670

1.  一条 DNS 记录**不能同时**指向两台不同的服务器。
2.  由于您希望为内容托管使用两个不同的服务器，因此我建议您使用和之类的**子域**。`images.example.com``XML.example.com`
3.  您只需从名称服务器的控制面板为您的子域添加额外**的 A 记录。**

更新：

*   浏览器尝试使用 CA 数字证书验证您的 SSL 证书上的证书颁发机构 (egverisign) 的数字签名。
*   如果您尚未从受信任的证书颁发机构 (CA) 获得 SSL 证书，浏览器将抛出错误。如果你真的想使用 HTTPS 你需要有一个真实的数字证书。

# vb.net - 如何以“选择项目”作为第一项绑定组合框

> ID：14867865
> 
> 赞同：1
> 
> 时间：2013-02-14T04:35:03.493
> 
> 标签：vb.net, combobox, vb.net-2010

我有以下代码来绑定数据库表中的组合框：

```
Public Sub FillComboBox(ByVal cboCombo As ComboBox, ByVal sSQL As String, ByVal strTable As String, ByVal strDisplayMember As String, ByVal strValueMember As String)
    Dim CN As New OleDbConnection

    Try
        With CN
            If .State = ConnectionState.Open Then .Close()

            .ConnectionString = cnString
            .Open()
        End With

        Dim da As OleDbDataAdapter = New OleDbDataAdapter(sSQL, CN)
        Dim dt As New DataSet

        da.Fill(dt, strTable)

        cboCombo.DataSource = dt.Tables(strTable).DefaultView
        cboCombo.DisplayMember = strDisplayMember
        cboCombo.ValueMember = strValueMember
    Catch ex As Exception
        MessageBox.Show(ex.Message)
        Debug.Print(ex.Message)
    Finally
        CN.Close()
    End Try
End Sub 
```

由于“选择项目”值不是表中记录的一部分，我如何将它添加到组合框中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T06:27:54.380

我认为您可以从中添加一个额外的 Datarow，就像这样。

```
 Dim da As OleDbDataAdapter = New OleDbDataAdapter(sSQL, CN)
    Dim dt As New DataSet

    da.Fill(dt, strTable)

    cboCombo.DataSource = dt.Tables(strTable).DefaultView
    cboCombo.DisplayMember = strDisplayMember
    cboCombo.ValueMember = strValueMember

    Dim dr As DataRow = dt.Tables(strTable).NewRow()
       dr(0) = "-1"
       dr(1) = "Select Item"
       dt.Tables(strTable).Rows.InsertAt(dr, 0)
       cboCombo.DataBindings.Add("DataSource", dt, dt.Tables(strTable).TableName)
       cboCombo.DataBindings.Clear() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T05:39:52.050

您可以设置组合框文本。

```
 cboCombo.DataSource = dt.Tables(strTable).DefaultView
    cboCombo.DisplayMember = strDisplayMember
    cboCombo.ValueMember = strValueMember
    cboCombo.Text = "(select an item)" 
```

另一种方法是`datatable`在绑定到`combobox`.

据说有一种使用反射的[方法](http://www.codeproject.com/Articles/15857/Add-Item-to-Binded-Combo-Box)，但我无法让它工作。

# nhibernate - 保存 Fluent/NHibernate 投影

> ID：14867877
> 
> 赞同：0
> 
> 时间：2013-02-14T04:36:28.877
> 
> 标签：nhibernate, automapper, fluent

我正在使用 Fluent 自动映射器来映射我的类，我目前有一个包含个人摘要信息的基类和一个包含其完整信息的派生类：

```
interface IPersonSummary
{
    string Name { get; set; }
    DateTime? DOB { get; set; }
}

interface IPerson : IPersonSummary
{
    string Address { get; set; }
    string HairColor { get; set; }
}

public class PersonSummary : IPersonSummary
{
    public string Name { get; set; }
    public DateTime? DOB { get; set; }
}

public class Person : PersonSummary, IPerson
{
    public string Address { get; set; }
    public string HairColor { get; set; }
} 
```

我知道可以使用投影从数据库中仅加载填充 PersonSummary 所需的字段，但它需要明确声明要映射的每个字段，这首先破坏了使用自动映射器的全部意义。我也无法找到如何使用投影在数据库中创建新条目，并将额外的字段（即地址和头发颜色）设置为默认值。我尝试提供覆盖以将 Person 和 PersonSummary 设置为使用同一个表，但正如预期的那样，Fluent 抱怨它。

我应该如何将这些类映射到同一张表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:46:46.180

在使用鉴别器列的 AutomappingConfiguration 中使用每个层次结构继承映射的表

更新：从自动映射中排除它们并使用下面的类映射或将这个想法合并到自动映射中

```
class SharedMap<T> : ClassMap<T> where T : IPersonSummary
{
    public SharedMap()
    {
        Id(x => x.Id);
        Map(x => x.Name);
        Map(x => x.DOB);
    }
}

class PersonSummaryMap : SharedMap<PersonSummary>
{
    public PersonSummaryMap()
    {
        SchemaAction.None();
    }
}

class PersonMap : SharedMap<Person>
{
    public PersonMap()
    {
        Map(x => x.Address).Default("nowhere");
        Map(x => x.HairColor).Default("black");
    }
} 
```

# javascript - 仿射变换矩阵偏移

> ID：14867878
> 
> 赞同：7
> 
> 时间：2013-02-14T04:36:37.970
> 
> 标签：javascript, graphics, matrix, html5-canvas, affinetransform

在过去的几天里，这一直在杀死我。甚至不是开玩笑，但我一直在努力解决这个问题。

我目前正在尝试使用仿射变换矩阵在 HTML5 中创建等距投影。我收到一块旋转 45 度的正方形瓷砖（基本上是方形画布上的方形菱形）。然后，我根据 x 或 y 方向是否存在增量来缩放轴之一。然后我将轴倾斜一个因子以适应。然后，我通过将初始旋转向后旋转 -45 度来否定初始旋转。

目前，我的仿射矩阵是：

```
 // note: the difference in z is about 10 in this example,
      //       so, xDiff is usually 40
      var xDiff  = 4 * (center.z   - map[x+1][y].land.z);
      var yDiff  = 4 * (center.z   - map[x][y+1].land.z);

      var matrix = multiplyAll(
        // Rotation
        [COS45,  SIN45,
         -SIN45, COS45],

        // Scale in each respective axis
        [(44+yDiff)/44, 0,
         0, (44+xDiff)/44],

        // Skew each axis
        [1,  -yDiff/(44+yDiff),
         -xDiff/(44+xDiff), 1],

        // Negate the rotation
        [NCOS45, NSIN45,
        -NSIN45, NCOS45]
      ); 
```

然后我使用以下方法绘制它：

```
 // the map has its own x & y values which directions are determined by the red x & y arrows in the picture
      // pX & pY are the point relative to the canvas origin
      var pX = x * 22 - y * 22 + 22;
      var pY = y * 22 + x * 22 - 22 - (center.z * 4);
      context.setTransform(matrix[0], matrix[1],
                           matrix[2], matrix[3],

                           300, 100);

      //m_Context.drawImage(image, pX, pY);
      drawDiamond(pX, pY, true); // draws a 44x44 diamond 
```

![投影测试](../Images/744e48b6ce74c26a812d6c6df22e064a.png)

![变换平面](../Images/4e7835ec80ec4b73a0a2c4d465db57a5.png)

如您所见，转换后的矩阵是相对于转换后的 x 轴绘制的（我认为“新”x 轴的斜率为 yDiff/44）。我不确定如何绘制形状，以便转换后的结果位于正确的位置。使用`pY = x * 22 - (yDiff/10);`似乎更接近了这一点，但我通过插入随机数几乎猜到了。

**tl;博士：**

*   我进行了一次转型
*   我有一个瓷砖应该在哪里的坐标（如果它没有被转换）
*   如何计算所需的偏移量，以便转换后的图块的坐标与未转换时应位于的位置相同？

PS：现在可以忽略底部奇怪的菱形，因为一旦我知道如何计算偏移量，它们就可以[正确创建。](https://gamedev.stackexchange.com/questions/48423/basic-isometric-projection-in-javascript/48571#48571)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T18:29:32.023

仿射变换矩阵 ([abcdef]) 表示两个方程

```
x' = ax + cy + e
y' = bx + dy + f 
```

因此，您可以使用偏移量*e*和*f*绕过缩放和倾斜部分（嵌入在 2x3 或 3x3 矩阵中的 4x4 线性变换）。

这在 postscript 编程中被大量使用，其中用于绘制对象的坐标是相对于*本地*原点的。如果您要连接矩阵，请在缩放和倾斜*之前进行平移，并且**e*和*f*值将保持不变。

# mysql - MySQL 在 < xx > 分钟之间从 * 中选择

> ID：14867886
> 
> 赞同：2
> 
> 时间：2013-02-14T04:37:30.153
> 
> 标签：mysql, select, time, between

我需要帮助从两个值之间的 MySql 表中选择日期时间戳。像：

```
SELECT * FROM tabel WHERE time >= NOW() - 60 MINUTES AND <= NOW() + 120 MINUTES 
```

我不能选对。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T04:39:25.870

您可以使用`DATE_SUB`和`DATE_ADD`

```
SELECT * FROM t1 WHERE time BETWEEN DATE_SUB(NOW(), INTERVAL 60 MINUTE)
    AND DATE_ADD(NOW(), INTERVAL 120 MINUTE) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T04:44:45.190

您可以使用[addtime](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_addtime)和[subtime](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_subtime)

```
SELECT * FROM table WHERE time BETWEEN 
SUBTIME(NOW(),'0 1:0:0') AND ADDTIME(NOW(), '0 2:0:0') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T04:48:05.157

你也可以用这个

```
SELECT * FROM tabel WHERE time >= SUBTIME(now(),'1:0') AND <= ADDTIME(now(),'2:0'); 
```

请参阅此处获取手动[链接](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_subtime)

# php - Composer 假定文件在错误的目录中

> ID：14867889
> 
> 赞同：1
> 
> 时间：2013-02-14T04:37:52.017
> 
> 标签：php, zend-framework, symfony, composer-php

我想将 pdf 包安装到我的 symfony 2.1 系统（[https://packagist.org/packages/psliwa/pdf-bundle](https://packagist.org/packages/psliwa/pdf-bundle)）因为它需要一些 Zend 库，composer 也会安装它们，但以后找不到安装的文件：

实际文件位置：

```
vendors/zendframework/zend-sdtlib/Zend/Stdlib/compatibility/autoload.php 
```

假定文件位置：

```
vendor/zendframework/zend-stdlib/compatibility/autoload.php 
```

这会导致作曲家失败（不仅对于标准库）。有人有想法或建议该怎么做吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T06:15:07.480

这似乎是组件中[最近修复的错误](https://github.com/zendframework/Component_ZendStdlib/commit/dad5cf28ec6ffbdbdd13990611d8f4407bf426a7)。`composer.json``zendframework/zend-stdlib`

我不知道 packagist 多久从相关的 GitHub 存储库中更新一次。在此之前，您可以使用以下命令将您自己的组件`composer.json`文件指向 github 托管的文件：

```
{
    "repositories" : [
        {
            "type" : "vcs",
            "url"  : "https://github.com/zendframework/Component_ZendStdlib.git"
        }
    ],
    "require": {
        "zendframework/Component_ZendStdlib" : "dev-master"
    }
} 
```

**更新**

从[Packagist“关于”页面](https://packagist.org/about)：

> 没有自动更新（GitHub 挂钩）的现有包将每天抓取一次以进行更新。启用 GitHub 挂钩后，每当您推送时都会抓取包，或者至少每周一次以防抓取失败。

所以，不知道为什么更新还没有打到 Packagist。可能想向 ZF 的人提出一些问题。

# c# - 如何在条件下使用count而不在sql中使用group by？

> ID：14867901
> 
> 赞同：-1
> 
> 时间：2013-02-14T04:39:25.067
> 
> 标签：c#, sql, sql-server-2008

```
select   bcd from bcd22 where bcd=@bcd1 group by bcd  having count(bcd)%2=0

cmd22.Parameters.Add("@bcd1", SqlDbType.NChar, 20, "bcd").Value = textBox1.Text; 
```

* * *

**输入集：**
1000,1001,1003,1000

* * *

对应**的输出：**

```
1001
1003
1000
1000 
```

* * *

而我希望输出为

```
1000
1001
1003
1000 
```

**不分组**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T05:10:24.743

在我看来，你得到的输出和你想要的输出是一样的，除了顺序，并且没有像你发布的查询那样的保证顺序。

如果你想要一个特定的顺序，你可以通过添加一个`ORDER BY`子句来实现，但是如果没有更多信息，很难提供很多具体的帮助。例如，看起来您希望输出与输入的顺序相同，但我不太清楚这些输入值的来源。我所看到的只是您查询中的一个参数。

# javascript - 数据绑定中的 KnockoutJS 值切换

> ID：14867906
> 
> 赞同：20
> 
> 时间：2013-02-14T04:40:12.803
> 
> 标签：javascript, knockout.js

我有一点javascript：

```
function ViewModel() {
    var self = this;
    self.highlight = ko.observable(true);   
}

ko.applyBindings(new ViewModel()); 
```

以及补充它的html：

```
<div data-bind="css: { highlighted: highlight }, click: highlight( !highlight() )">
    random string
</div> 
```

我想要达到的目标：

1.  仅当 var highlight 为 true 时才激活 css 类“突出显示”
2.  点击 div 将切换 var highlight 的 bool 值
3.  想要的结果：单击 div 以激活/停用其 css 类

我得到了什么：

1.  highlight 的初始值为`true`，但 css 类开始停用（如果我将初始值更改为`false`，则 css 类被激活：当我还没有点击任何东西时，似乎我以某种方式触发了点击绑定）
2.  div 的 css 类不会在点击时切换

我宁愿不在 ViewModel 中创建新的相应点击功能。如果可能的话，我正在寻找一些我可以在数据绑定中单独放置的代码。

这是 JSFiddle 上的代码：http: [//jsfiddle.net/4wt4x/1/](http://jsfiddle.net/4wt4x/1/)

谁能解释发生了什么以及我做错了什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2014-05-13T15:13:45.447

我知道这是一个老问题，但也许可以帮助某人。如果您需要在很多地方使用切换，也许一些自定义绑定糖可以帮助您：

**捆绑：**

```
ko.bindingHandlers.toggleClick = {
    init: function (element, valueAccessor) {
        var value = valueAccessor();

        ko.utils.registerEventHandler(element, "click", function () {
            value(!value());
        });
    }
}; 
```

**用法：**

```
<div data-bind="css: { highlighted: highlight }, toggleClick: highlight">
    random string
</div> 
```

**例子：**

[http://jsfiddle.net/A28UD/1/](http://jsfiddle.net/A28UD/1/)

这种方法使我的一些观点非常清晰。希望能帮助到你。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-14T04:43:28.150

你`click: highlight( !highlight() )`的不正确。Click 将尝试执行一个函数，并且在初始化绑定时， highlight 将返回其值，这就是 click 将尝试执行的（`true`或`false`在您的情况下）。你需要做这样的事情：

在您的 javascript 中，放置在您的模型中：

```
self.toggleHighlight = function () { self.highlight(!self.highlight()) }; 
```

然后改变绑定说`click: toggleHighlight`

像这样：http: [//jsfiddle.net/KDypD/1/](http://jsfiddle.net/KDypD/1/)

您可能还需要调整突出显示的初始值，以反映您希望页面最初显示的方式。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-02-06T20:53:14.700

另一种选择是使用可重用的自定义函数扩展（使用自定义函数而不是扩展器，因为没有参数并且看起来更干净）：

```
ko.observable.fn.toggleable = function () {
    var self = this;
    self.toggle = function () {
        self(!self());
    };

    return self;
}; 
```

用法

```
self.highlight = ko.observable(true).toggleable(); 
```

html

```
<div data-bind="css: { highlighted: highlight }, click: highlight.toggle">
    random string
</div> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-12-26T20:30:27.023

如果你真的想内联：

```
<div data-bind="click: highlight.bind($root, !highlight()), css: { highlighted: highlight } ">
    random string
</div> 
```

其中 highlight 是 boolean observable。

# sql-server-2008 - 避免在不需要时查看多个表查询所有表

> ID：14867907
> 
> 赞同：0
> 
> 时间：2013-02-14T04:40:41.057
> 
> 标签：sql-server-2008, tsql, views

我们正在做这样的事情

```
create view v1 
as 
select 'tab1' as table_name , * from table1
union All
select 'tab2' as table_name , * from table2
union All
select 'tab3' as table_name , * from table3 
```

然后在一个SP中，

```
declare @var = function_gettablename()
    select * from v1 where table_name = @var and datetoload = <ActualDate>

function_gettablename() = gives the table name based on parameters 
```

datetoload = 在所有表上互斥的非聚集索引列。即一个日期将仅在一张表中可用

现在的问题是在执行计划中：使用@var 使视图查询所有三个表，而不是所需的一个。

有没有办法应用过滤器然后应用联合所有，而不是运行联合所有然后应用过滤器。

谢谢 AB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T07:20:19.483

请检查这个-：

```
DECLARE @Var VARCHAR(MAX)
SET @Var = function_gettablename()
DECLARE @Sql VARCHAR(MAX)
DECLARE @ActualDate DATETIME
SET @ActualDate ='2013/2/14'

SET @sql = 'SELECT tab1 as '+@Var+' , * FROM table1 
            WHERE dateload ='+@ActualDate+ ' UNION ALL
            SELECT tab2 as '+@Var+' , * FROM table1 
            WHERE dateload ='+@ActualDate+' UNION ALL
            SELECT tab3 as '+@Var+',* FROM table1 
            WHERE dateload ='+@ActualDate

Exec(@Sql) 
```

# mysql - 用于获取与多个表中的其他映射条目相关的列计数的 sql 查询

> ID：14867910
> 
> 赞同：-1
> 
> 时间：2013-02-14T04:40:59.730
> 
> 标签：mysql, sql, database

我在mysql表中有下表

a_ad_display

```
╔═══════╦══════════╗
║ ADVID ║ ADTYPEID ║
╠═══════╬══════════╣
║     1 ║        1 ║
║     2 ║        1 ║
║     3 ║        4 ║
║     3 ║        3 ║
║     2 ║        2 ║
║     1 ║        4 ║
║     1 ║        3 ║
║     4 ║        1 ║
║     4 ║        1 ║
╚═══════╩══════════╝ 
```

a_mediatype

```
╔═════════╦═══════════╗
║ MEDIAID ║ MEDIANAME ║
╠═════════╬═══════════╣
║       1 ║ Animation ║
║       2 ║ video     ║
║       3 ║ Image     ║
╚═════════╩═══════════╝ 
```

a_ad_type

```
╔══════════╦════════╗
║ ADTYPEID ║ ADTYPE ║
╠══════════╬════════╣
║        1 ║ e Ad   ║
║        2 ║ b Ad   ║
║        3 ║ c Ad   ║
║        4 ║ d Ad   ║
╚══════════╩════════╝ 
```

a_advertise

```
╔═══════╦═════════╗
║ ADVID ║ MEDIAID ║
╠═══════╬═════════╣
║     1 ║       1 ║
║     2 ║       1 ║
║     3 ║       2 ║
║     4 ║       3 ║
╚═══════╩═════════╝ 
```

现在我要获取的内容如下...

```
adType  | Image | video  | Animation
eAd     |    0  |    2   |    2 ...
b Ad    |...
c Ad    |...
d Ad    |..... 
```

并且对于我想要数据的所有广告类型都是明智的......任何人都可以指导我......

这就是我尝试过的...

```
SELECT Distinct
at.adtype,
COUNT(IF(am.medianame = 'Animation',1,0)) AS Animation,
COUNT(IF(am.medianame = 'Video',1,0)) AS Video,
COUNT(IF(am.medianame = 'Image',1,0)) AS Image
FROM a_ad_type as at
LEFT JOIN a_ad_display as ad ON at.adtypeId = ad.adtypeId
LEFT JOIN a_advertise as adv ON adv.advertiseId = ad.advId
LEFT JOIN a_mediatype as am ON am.mediaId = adv.mediaTypeId
GROUP BY at.adtype 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T05:32:34.827

```
SELECT  a.adtype,
        SUM(CASE WHEN d.medianame = 'Image' THEN  1 ELSE 0 END) `Image`,
        SUM(CASE WHEN d.medianame = 'video' THEN  1 ELSE 0 END) `video`,
        SUM(CASE WHEN d.medianame = 'Animation' THEN  1 ELSE 0 END) `Animation`
FROM    a_ad_type a
        LEFT JOIN a_ad_display b
            ON a.adtypeId = b.adtypeId
        LEFT JOIN  a_advertise c
            ON b.advId = c.advId
        LEFT JOIN a_mediatype d
            ON c.mediaId = d.mediaId
GROUP   BY a.adtype 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/759dc/6)

**更新 1**

如果您有多个值`medianame`并且您不希望它一一指定。您可以为此创建 *Dynamic SQL8，

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'SUM(CASE WHEN d.medianame = ''',
      medianame,
      ''' then 1 ELSE 0 end) AS `',medianame,'`'
    )
  ) INTO @sql
FROM a_mediatype;

SET @sql = CONCAT('SELECT   a.adtype, ', @sql, ' 
                  FROM  a_ad_type a
                          LEFT JOIN a_ad_display b
                              ON a.adtypeId = b.adtypeId
                          LEFT JOIN  a_advertise c
                              ON b.advId = c.advId
                          LEFT JOIN a_mediatype d
                              ON c.mediaId = d.mediaId
                  GROUP   BY a.adtype');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/759dc/10)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T05:33:18.520

```
 SELECT Distinct
at.adtype,

COUNT(CASE am.mediaId WHEN 1 THEN at.adtypeId END) As Animation,
COUNT(CASE am.mediaId WHEN 2 THEN at.adtypeId END) As Video,
COUNT(CASE am.mediaId WHEN 3 THEN at.adtypeId END) As Image
FROM a_ad_type as at
LEFT JOIN a_ad_display as ad ON at.adtypeId = ad.adtypeId
LEFT JOIN a_advertise as adv ON adv.advertiseId = ad.advId
LEFT JOIN a_mediatype as am ON am.mediaId = adv.mediaTypeId
GROUP BY at.adtype 
```

这就是我解决问题的方法..如果有人发现它错了，请纠正我..谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T04:52:50.647

您需要使用常见的列连接您的表，例如

```
SELECT ad.adtype
      ,am.medianame
FROM   a_ad_type ad
       INNER JOIN
       a_ad_display add ON ad.adTypeId=add.adTypeId
       INNER JOIN
       a_advertise a ON add.advId=a.advId
       INNER JOIN
       a_mediatype am ON am.mediaId=a.mediaId 
```

那么您需要旋转此查询的结果。透视是数据库特定的语法，我不熟悉如何在 mysql 中执行它（我总是需要在 SQL Server 中查找它！）但是如果你搜索它，我相信你会找到它。

# c - C - 将可变数量的命令行参数传递给具有可变数量参数的方法

> ID：14867923
> 
> 赞同：3
> 
> 时间：2013-02-14T04:42:02.077
> 
> 标签：c, command-line-arguments, variadic-functions

我正在编写一个 C 程序，它将采用可变数量的命令行参数。然后我需要获取这些参数并将它们传递给一个函数，该函数将可变数量的文件名作为单独的参数（使用 va_arg 获取函数内部的参数），原型为：

```
void FindFile(char *filename1, ...); 
```

我对 FindFile 的实现很好。我的问题是，如何在 main 方法的 'char *argv[]' 中获取可变数量的参数，并在调用 FindFile 时将它们用作参数？

这是一个类的赋值，所以 FindFile 原型不能改变。我一直在寻找使这项工作的方法，只找到一个答案，说这是不可能的。真的是这样吗？这是我的教授给出的确切规范，所以我认为它可能会以某种方式实现，但确切的方法并没有在课堂上讨论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T05:21:12.283

我在[我的 postscript 解释器](http://code.google.com/p/xpost/downloads/detail?name=xpost2g.zip)中做了类似的事情。

这是来自我的操作员处理程序功能。它使用 switch 语句通过函数指针进行*可变参数调用。*

```
call: /* pass args bottom-up */
    tos = siq; /* pop the stack to the 'stack in question' */
    /* room for output? */
    if (tos-os + op.sig[i].out > OSSIZE) error(st,stackoverflow);
    switch (op.sig[i].n) {
        case 0: op.sig[i].fp(st); break;
        case 1: op.sig[i].fp(st, siq[0]); break;
        case 2: op.sig[i].fp(st, siq[0], siq[1]); break;
        case 3: op.sig[i].fp(st, siq[0], siq[1], siq[2]); break;
        case 4: op.sig[i].fp(st, siq[0], siq[1], siq[2], siq[3]); break;
        case 5: op.sig[i].fp(st, siq[0], siq[1], siq[2], siq[3], siq[4]); break;
        case 6: op.sig[i].fp(st, siq[0], siq[1], siq[2], siq[3], siq[4], siq[5]); break;
        default: error(st,unregistered);
    } 
```

[我从Goswell 解释器（AKA Rutherford 解释器，AKA RALpage）](http://ftp.x.org/R5contrib/ralpage.tar.Z)那里借用了这种技术。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T04:51:44.617

不可能*做*的事情（至少在 K&R、ansi-c 和 c99 中以及除非实现依赖技巧）是在运行时将选定的命令行参数附加到某种参数列表并将其传递给您的函数。太糟糕了，因为这是首先想到的。

这使您的问题之一是弄清楚您*可以*做什么。`FindFile(fname, argc, argv);`例如，您可以每次调用（给定的 varidac 函数） 。编写这样的代码而不是仅仅给出`FindFile`一个固定的签名会很愚蠢（真的，非常，非常愚蠢），但是`FindFile`可以编写给定的可变参数版本来管理它就好了。

如果您只想传递一些命令行参数，您将创建一个`char*[]`只包含您想要的参数并将其传递的新参数。

# objective-c - KVO + 托管对象 - 收到太多通知

> ID：14867924
> 
> 赞同：2
> 
> 时间：2013-02-14T04:42:09.810
> 
> 标签：objective-c, core-data, key-value-observing

我有兴趣为模型对象属性上的 KVO 通知注册我的视图控制器。

视图控制器的“成员”属性是一个 NSManagedObject 子类，并使用 Core Data 提供的访问器方法（通过`@dynamic`）。它有四个属性：firstName、lastName、nickname 和 bio，它们都是 NSString。

*这是 KVO 的注册和注销：*

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    [self.member addObserver:self
                  forKeyPath:@"firstName"
                     options:NSKeyValueObservingOptionNew
                     context:kFHMemberDetailContext];

    [self.member addObserver:self
                  forKeyPath:@"lastName"
                     options:NSKeyValueObservingOptionNew
                     context:kMemberDetailContext];

    [self.member addObserver:self
                  forKeyPath:@"nickname"
                     options:NSKeyValueObservingOptionNew
                     context:kMemberDetailContext];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];

    [self.member removeObserver:self forKeyPath:@"firstName" context:kMemberDetailContext];
    [self.member removeObserver:self forKeyPath:@"lastName"  context:kMemberDetailContext];
    [self.member removeObserver:self forKeyPath:@"nickname"  context:kMemberDetailContext];
} 
```

*回调方法的实现*

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if (context != kFHMemberDetailContext) {
        [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];
        return;
    }

    self.kvoCount++;

    if ([keyPath isEqualToString:@"firstName"]) {
       NSLog(@"firstName KVO'd");
    }
    else if ([keyPath isEqualToString:@"lastName"]) {
       NSLog(@"lastName KVO'd");
    }
    else if ([keyPath isEqualToString:@"nickname"]) {
       NSLog(@"nickname KVO'd");
    }
} 
```

当我从单元测试驱动此代码时，我在修改“bio”属性时收到三个通知，在修改 firstName、lastName 或昵称时收到四个通知。这始终是三个太多的通知！

我做错了似乎很简单，但我无法弄清楚是什么导致了无关的通知。如果我更改字典，则 NSKeyValueChangeKindKey 始终为 NSKeyValueChangeSetting，但对于不需要的通知，NSKeyValueChangeNewKey 为 NULL。

*驱动这段代码的测试：*

```
- (void)setUp
{
    NSManagedObjectModel *mom = [NSManagedObjectModel mergedModelFromBundles:@[[NSBundle mainBundle]]];
    NSPersistentStoreCoordinator *psc = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:mom];
    [psc addPersistentStoreWithType:NSInMemoryStoreType
                      configuration:nil
                                URL:nil
                            options:nil
                              error:NULL];
    NSManagedObjectContext *managedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
    [managedObjectContext setPersistentStoreCoordinator:psc];
    member = [NSEntityDescription insertNewObjectForEntityForName:@"Member" inManagedObjectContext:managedObjectContext];

    UIStoryboard *sb = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:[NSBundle mainBundle]];
    memberDetailVC = [sb instantiateViewControllerWithIdentifier:kFHMemberDetailTableViewControllerIdentifier];
    [memberDetailVC setMember:member];
}

- (void)tearDown
{
    [memberDetailVC viewWillDisappear:NO];
}

- (void)testChangesToMemberFirstNamePropertyCausesKVO
{
    [memberDetailVC viewWillAppear:NO];

    [member setFirstName:@"Unit Test"];

    STAssertTrue(memberDetailVC.kvoCount, (NSInteger)1, @"View controller should have received a single KVO notification");
} 
```

就像我说的，这在收到 4 个通知时失败（每个属性一个，新值为 null，最后是预期的通知）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:39:19.453

所以我的问题的答案是我的单元测试的问题。在我的设置方法中，我正在创建托管对象上下文，将托管对象插入其中，然后在我的`-setUp`方法结束时上下文将被释放。

如果我在测试套件中将 MOC 作为 ivar 保留，则通知会按预期出现。

这引发了所有其他问题，但我将把这些留到其他时间。现在看来我应该关掉电脑去喝一两杯威士忌……三杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:09:23.930

您正在此上下文中注册：`kFHMemberDetailContext`。
您正在检查此上下文的不等式：`kFHMemberDetailTableViewControllerContext`.
当然，这些是常数，它们也可能是相同的。

因此，您可能总是调用`super`实现。也许这就是导致您的额外通知的原因。

作为一个实用的解决方案，检查新密钥，如果它为空，则简单地提前返回。

# html - jsp页面输出错误

> ID：14867930
> 
> 赞同：0
> 
> 时间：2013-02-14T04:43:03.953
> 
> 标签：html, jsp

我在下面给出了一个jsp页面

```
<%@page import="newpack.SendMailJavaToXsl07022013"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml" >
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
        <script language="javascript">
            <!--
            // <![CDATA[
            function Button1_onclick() {
            <%
                SendMailJavaToXsl07022013 oaa = new SendMailJavaToXsl07022013();
                oaa.mainClass();
                out.print("Sdasd");
                System.out.println( "In getDate() method" );
            %>
                }
                // ]]>
        </script>
</head>
<body>        
        <%=request.getParameter("key")%><br/>
        <input name="send mail" id="Button1" type="button" value="button" onclick="return Button1_onclick()" onfocus="dfgdgf"/>
</body>
    </html> 
```

我希望函数 Button1_onclick() 仅在单击按钮后执行。但是它在页面加载时执行，并且在按钮单击时从不执行。这段代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:28:04.783

如果你`page source`在执行 your`jsp page`之后检查你的，你会发现你的方法没有`JAVA CODE`.

**页面源代码段**

```
<script language="javascript">
    <!--
    // <![CDATA[
    function Button1_onclick() {

        }
        // ]]>
</script> 
```

所以我建议你不要在客户端机器上运行你的代码，而是从客户端向服务器发送请求，然后`java code`在服务器上执行，然后将响应发送回客户端......我希望这会对你有所帮助......

# javascript - HTML li ul 下拉菜单层次结构

> ID：14867939
> 
> 赞同：0
> 
> 时间：2013-02-14T04:43:38.853
> 
> 标签：javascript, jquery, html, css

我创建了一个下拉菜单，我正在尝试使用 jquery 显示它的子菜单。到目前为止，我已经设法显示子菜单，但只能按 ID 名称显示。

你如何只显示被点击的 li 项目的子菜单？我试过： $(this).children("ul)".addclass("expand").show(); 但不行。

```
<html>
<head>
    <script type="text/javascript" src="includes/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="includes/menu.js"></script></script>
    <link type="text/css" href="includes/menu.css" rel="stylesheet" />
</head>
<body>
    <div style="z-index:100;width:100%;position:fixed;top:0;left: 0;min-width:1000px;">
        <div id="menuJQ">
            <ul class="menuJQ">
                <li><span style="padding-top:9px;padding-left:5px;"><img src='includes/css/images/bblogo.png' onClick="window.location = 'index.php';">&nbsp;&nbsp;&nbsp;</span></li>
                <li class="parent"><a href="#"><span>Home</span></a></li>
                <li><a class="parent" href="#"><span>Product View</span></a>    
                    <div>
                        <ul>
                            <li><a href="#"><span>DevTask Search</span></a></li>
                            <li><a href="#"><span>Active Machines</span></a></li>
                        </ul>
                    </div>
                </li>
                <li class="parent"><a href="#"><span>Request Tool</span></a></li>   
                <li><a href="#" class="parent"><span>Search</span></a>
                    <div>
                        <ul id="sub1">
                            <li><a href="#"><span>DevTask Search</span></a></li>
                            <li><a href="#"><span>Active Machines</span></a></li>
                            <li><a href="#"><span>Integrity Query</span></a></li>
                            <li><a href="#"><span>Internal DevTasks</span></a></li>
                            <li><a href="#" class="parent"><span>3Results</span></a>
                                <div>
                                    <ul id="sub2">
                                        <li><a href="#" target='_blank'><span>Latest Smoke Results</span></a></li>
                                        <li><a href="#" target='_blank'><span>Latest Smoke Results</span></a></li>
                                    </ul>
                                </div>
                            </li>
                            <li><a href="3"><span>Issues for Stability Team</span></a></li>
                        </ul>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</body>
</html>

$(document).ready(function(){
    $('a.parent').click(function() {
        $("#sub1").addClass("expand").toggle("fast");
        var submenu_active = false;
    });

    var submenu_active = false;
     $('div#menuJQ ul ul').mouseenter(function() {
        submenu_active = true;      
     });

    $('div#menuJQ ul ul').mouseleave(function() {
        submenu_active = false;
        setTimeout(function() { 
            if (submenu_active === false) $('div#menuJQ ul ul').hide("fast");});
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T05:07:16.540

## 试试这个：http: [//jsfiddle.net/sefbT/](http://jsfiddle.net/sefbT/)

您必须将脚本放入`head`或`body`不在`html`：

```
$(function() {
    $('#menuJQ > ul li').click(function(e) {
          e.preventDefault();
          $('ul:first', this).show();
    });
}); 
```

## CSS：

```
ul ul {
    display:none;
} 
```

## 这个html：

```
<!DOCTYPE html> 
```

```
<head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script>
        $(function() {
            $('#menuJQ > ul li').click(function(e) {
                e.preventDefault();
                $('ul:first', this).show();
            });
        });
    </script>
</head>

<body>
    <div style="z-index:100;width:100%;position:fixed;top:0;left: 0;min-width:1000px;">
        <div id="menuJQ">
            <ul class="menuJQ">
                <li>123</li>
                <li class="parent"><a href="#"><span>Home</span></a>

                </li>
                <li><a class="parent" href="#"><span>Product View</span></a> 
                    <div>
                        <ul style='padding:0 0 0 50px;'>
                            <li><a href="#"><span>DevTask Search</span></a>

                            </li>
                            <li><a href="#"><span>Active Machines</span></a>

                            </li>
                        </ul>
                    </div>
                </li>
                <li class="parent"><a href="#"><span>Request Tool</span></a>

                </li>
                <li><a href="#" class="parent"><span>Search</span></a>

                    <div>
                        <ul id="sub1" style='padding:0 0 0 50px;'>
                            <li><a href="#"><span>DevTask Search</span></a>

                            </li>
                            <li><a href="#"><span>Active Machines</span></a>

                            </li>
                            <li><a href="#"><span>Integrity Query</span></a>

                            </li>
                            <li><a href="#"><span>Internal DevTasks</span></a>

                            </li>
                            <li><a href="#" class="parent"><span>3Results</span></a>

                                <div>
                                    <ul id="sub2" style='padding:0 0 0 50px;'>
                                        <li><a href="#" target='_blank'><span>Latest Smoke Results</span></a>

                                        </li>
                                        <li><a href="#" target='_blank'><span>Latest Smoke Results</span></a>

                                        </li>
                                    </ul>
                                </div>
                            </li>
                            <li><a href="3"><span>Issues for Stability Team</span></a>

                            </li>
                        </ul>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</body>
</html> 
```

# c# - 从 XML 中选择特定节点值

> ID：14867942
> 
> 赞同：1
> 
> 时间：2013-02-14T04:44:05.563
> 
> 标签：c#, xml, xmldocument

我有以下 XML 文档：

```
 <?xml version="1.0" encoding="utf-8" ?> 
  <appSettings>
  <Path> blahblahblah </Path> 
  <PathValue> blahblahblah </PathValue> 
  <domainName> blahblahblah </domainName> 
  <SuperUserEmail> blahblahblah </SuperUserEmail> 
  <SuperUserName> blahblahblah </SuperUserName> 
  <UserName> blahblahblah </UserName> 
  <Password> blahblahblah </Password>       
  <connectionstring>Data Source=ABC\SQLEXPRESS;Initial Catalog=mail;User ID=sa;Password=sa@</connectionstring> 
  </appSettings> 
```

`connectionstring`现在我必须从节点中提取整个路径。我尝试使用以下代码：

```
XmlNodeList xnList = xml.SelectNodes("/appSettings/connectionstring"); 
```

但它似乎不起作用。知道如何使它工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T05:01:59.097

尝试

```
XmlNode node = xml.DocumentElement.SelectSingleNode("/appSettings/connectionstring");

string nodeval=node.InnerText; 
```

# c++ - 如何从文件中读取第一行？

> ID：14867944
> 
> 赞同：9
> 
> 时间：2013-02-14T04:44:07.807
> 
> 标签：c++

```
ifstream infile;

string read_file_name("test.txt");

infile.open(read_file_name);

string sLine;

    while (!infile.eof())
    {
        getline(infile, sLine);         
        cout << sLine.data() << endl;
    }

    infile.close(); 
```

该程序打印文件中的所有行，但我只想打印第一行。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-14T04:52:39.197

`while (!infile.eof())`没有按您的预期工作，[eof](http://en.cppreference.com/w/cpp/io/basic_ios/eof)看到一个有用的[链接](https://stackoverflow.com/questions/5837639/eof-bad-practice/5837668#5837668)

对您的代码进行小幅修复，应该可以：

```
 ifstream infile("test.txt");

  if (infile.good())
  {
    string sLine;
    getline(infile, sLine);
    cout << sLine << endl;
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T04:52:00.897

你可以试试这个：

```
ifstream infile;

string read_file_name("test.txt");

infile.open(read_file_name);

string sLine;

while (!infile.eof())
{
    infile >> sLine;
    cout << sLine.data() << endl;

}

infile.close(); 
```

这应该逐行打印文件中的所有行。

# python - Google AppEngine 的 Python 脚本处理程序

> ID：14867945
> 
> 赞同：0
> 
> 时间：2013-02-14T04:44:15.093
> 
> 标签：python, google-app-engine, urlfetch, app.yaml

我正在编写一个应用程序引擎应用程序来使用谷歌应用程序引擎中可用的 urlfetch 获取 url 内容。

但是在 app.yaml 文件中，我对脚本句柄有疑问

我发现有些人使用脚本名称作为 myScript.py 而有些教程使用 myScript.app

两种用途有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T05:43:48.080

myScript.py 用于 2.5 运行时，使用 2.7 运行时调用应用程序的模型通常使用 myScript.app 方法。看看教程的年代以及他们在 app.yaml 中配置的 Python 运行时。

# javascript - 为什么 Array.prototype.reduce 没有 thisObject 参数？

> ID：14867946
> 
> 赞同：17
> 
> 时间：2013-02-14T04:44:24.610
> 
> 标签：javascript, ecmascript-5

Javascript Array 方法，例如`forEach`有一个`thisArg`参数，用作调用回调的上下文：

```
array.forEach(callback[, thisArg]) 
```

和`every`,`some`和一样。但是，并没有这样的参数。有什么特别的原因，还是没有必要的原因？`filter``map``reduce``reduceRight`

例如，考虑以下使用 的功能组合实现`reduceRight`：

```
function compose () {
    var fns = [].slice.call(arguments,0);
    return function result() {
        return fns.reduceRight(
            function (prev,cur){
                return [cur.apply(this,prev)];
            },
            arguments
        )[0];
    };
} 
```

我想让它成为“this-aware”，因此正在组合的函数在调用返回的函数的上下文中`compose`调用。目前，它们似乎是在全局对象的上下文中调用的。我可以`var self=this;`在 function 的顶部做 old `result`，并将其用作`cur.apply`调用的第一个参数，我目前有，但如果带一个参数`this`，那将是不必要的。`reduce``thisArg`

我是否在这里遗漏了一些东西，是否有一些东西`reduce`使这变得不必要或无用？

**更新**

@kangax 是的，这发生在我身上。我绝不会批评 API 的设计，但 for 的签名对`reduce`我来说似乎有点奇怪。第二个可选参数的功能与普通可选参数不同，后者通常只有一个默认值；相反，它的存在或不存在会改变行为，本质上是基于签名（参数计数）重载函数。当第二个参数不存在时，数组的第一个元素成为起始值，第一次调用回调是针对第二个值。在我看来，这种行为可以很容易地通过简单地调用来模拟

```
array.slice(1).reduce(fn,array[0]) 
```

而不是为省略第二个参数的情况建立特殊规则，如果你的假设是正确的，这反过来也使得基本上不可能弄清楚在哪里指定`thisArg`参数。再说一次，我确信在规范制定时已经对此类问题进行了辩论，并且可能有充分的理由采用这种方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-03-21T13:18:33.667

您始终可以使用此方法：

```
array.reduce(callback.bind(context), initialValue); 
```

...为了将特定的上下文附加到回调函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-16T17:37:08.713

由于`reduce`( `Right`) 已经涵盖了两个功能（参见[Wikipedia](http://en.wikipedia.org/wiki/Fold_%28higher-order_function%29#Special_folds_for_non-empty_lists)），因此两个可选参数会变得混乱，这在纯语言中是有区别的（例如，命名`foldl`和`foldl1`在 Haskell 中）。引用[Brendan Eich 的话](http://thread.gmane.org/gmane.comp.lang.javascript.ecmascript4.general/4769/focus=4773)：

> 所以这意味着 reduce 接受一个回调参数和两个可选参数：thisObject 和 init。哪个应该先来？更常见的可能是 init，但随后将回调 arg 与“thisObject”arg 分开，这可能没问题。多个可选参数这样有点乱......
> 
> 或者，我们可以消除额外的“thisObject”参数，因为人们总是可以*[使用绑定]*。

我认为这不是一个大问题，因为无论如何这些功能性高阶函数大多与~~lamdba~~ -function-expressions 一起使用（就像在您的示例中一样）。当然有一点不一致，但我们可以忍受。图像替代：

```
 array.reduce(callback[, initialValue[, thisArg]]) 
```

不能真正使用，我们无法真正确定“[*是否提供了 initialValue*](http://es5.github.com/#x15.4.4.21) ”，因为这意味着- 我们也可以按字面意思`arguments.length < 2`传递。`undefined`所以这意味着

```
 array.reduce(callback[, thisArg[, initialValue]]) 
```

这很丑陋，因为如果我们只想要一个初始值，我们总是需要传递`null`或传递一些东西。`thisArg`

您已经注意到，在您对 Kangax 的评论中（“*第二个可选参数的功能与普通可选参数不同，[...] 它的存在或不存在会改变行为*”），但我不能支持您的说法

> 只需调用即可轻松模拟此行为`array.slice(1).reduce(fn,array[0])`

因为那将 a) 不能使用复杂的（链式）表达式而不是`array`变量，并且 b) 很麻烦。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-16T15:03:12.500

在 Es-discuss 邮件列表中，您可以在回答 [http://article.gmane.org/gmane.comp.lang.javascript.ecmascript4.general/4770中找到](http://article.gmane.org/gmane.comp.lang.javascript.ecmascript4.general/4770)

> 其他带有回调的方法采用 'thisArg' 不是因为它是必需的，甚至是有用的，而是为了兼容性，因为它们已经在提供这些函数的现有实现中这样做了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-13T16:11:15.567

不需要 thisObject 参数，因为您可以在累加器中添加一种 thisObject 并使用初始值传递 thisObject。

例子：

```
thisObj = { some data }  // kind of this arg to be used in the reducer
const { view, used, totals } = sheetConfig.reduce(reducer, {
  view: [],    // initial  
  used: [],    // another initial
  totals: [],  // and one more initial
  thisObj      // and ...
}); 
```

# python - 样式表未从 django 中的相对路径加载

> ID：14867947
> 
> 赞同：2
> 
> 时间：2013-02-14T04:44:24.893
> 
> 标签：python, html, css, django, twitter-bootstrap

目前在 django 中设置了一个文件夹结构：

> {应用程序名称}\模板\
> 
> {appname}\templates\assets\css\

但是当我尝试`<link rel="stylesheet" href="assets/css/bootstrap.css" />`在我的模板中包含类似的内容时`{appname}\templates\`，无论出于何种原因，它都不会加载；我可以直接从 twitter 加载，但如果可能的话，我更愿意保留相对路径。

为什么这不起作用？如果有任何线索，PyCharm 中的子文件夹显示为浅灰色，也不知道为什么会这样。

* * *

**编辑**：好的，所以我在[这里](https://docs.djangoproject.com/en/dev/howto/static-files/)阅读了有关如何设置静态文件的信息，并`static`在我的主项目文件夹下设置了一个目录，并在该目录下设置了一个`css`文件夹。

我更新了 settings.py 以包括：

```
# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = ''

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
import os.path

STATICFILES_DIRS = (
    os.path.dirname(__file__).replace('\\','/'),
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
) 
```

然后尝试添加

`<link rel="stylesheet" href="{{ STATIC_URL }}css/bootstrap.css" />`

到我的 html 文件，但它没有加载 - 我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T06:39:29.350

您希望将 CSS 保存在应用程序根目录中名为 static 的文件夹中。然后确保您已`django.contrib.staticfiles`包含在`INSTALLED_APPS`（在您的 settings.py 中）。现在，当您运行时`python manage.py runserver`，您的静态文件将在 localhost:8000/static/ 中可用（这是由`STATIC_URL`设置定义的 - 默认为`static/`）。

您需要确保在视图中使用[RequestContext](https://docs.djangoproject.com/en/1.4/ref/templates/api/#django.template.RequestContext)对象。这确保来自 settings.py 的变量（例如 STATIC_URL）在模板中可用 -

```
def your_view(request):
    #...
    return render_to_response('page.html', context_data, context_instance=RequestContext(request)) 
```

（如果您使用新的[render()](https://docs.djangoproject.com/en/1.4/topics/http/shortcuts/#render)快捷方式而不是[render_to_response](https://docs.djangoproject.com/en/1.4/topics/http/shortcuts/#django.shortcuts.render_to_response) ，则会为您处理）

如果您在生产环境中提供文件，那么您可以使用该`python manage.py collectstatic`命令将所有静态文件（即`static/`应用程序根目录中名为的文件夹中的任何内容，`STATICFILES_DIR`以及`STATIC_ROOT`. 然后让您的网络服务器提供这些文件`STATIC_URL`（这不是由 django 处理的，实际上 django 文档似乎建议您甚至不使用为 django 应用程序提供服务的同一网络服务器）。

你可以把你的静态文件放在你想要的任何地方，并让 django 管理它们，只需在 STATICFILES_DIR 元组中包含目录的位置。

查看有关提供静态文件的[文档。](https://docs.djangoproject.com/en/1.4/howto/static-files/)（我假设您使用的是 django 1.4）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T06:05:37.487

您不应将媒体文件放在模板目录中。每个应用程序使用一个媒体目录（在这种情况下是静态的），以便您的设置文件可以找到它，请参阅[Django 目录结构？](https://stackoverflow.com/questions/11216829/django-directory-structure/11222631)

另请参阅[Django 管理、静态和媒体文件中的混淆](https://stackoverflow.com/questions/10460028/confusion-in-django-admin-static-and-media-files/10460116)

# php - 如何从巨大的 csv 文件中提取数据到 php？

> ID：14867948
> 
> 赞同：0
> 
> 时间：2013-02-14T04:44:27.620
> 
> 标签：php, csv

我有一个非常长的 csv 文件，其中包含数十列和数千行。我需要使用 php 仅从该 csv 获取有关特定数据的信息。

csv 文件位于：[http](http://www.ezmedia2u.com/software/hworiginal.csv) ://www.ezmedia2u.com/software/hworiginal.csv 。

我想要获取的数据样本是从第 1203 行到第 1275 行，“整个页面”，我需要以表格格式显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T05:03:41.473

if you want to fetch data from csv file try this.

```
<?php
     $fp = fopen('test.csv','r') or die("can't open file");
     print "<table>\n";
     while($csv_line = fgetcsv($fp,1024)) {
       print '<tr>';
       for ($i = 0, $j = count($csv_line); $i < $j; $i++) {
         print '<td>'.$csv_line[$i].'</td>';
       }
       print "</tr>\n";
     }
     print '</table>\n';
     fclose($fp) or die("can't close file");
?> 
```

# python - Python Intra-Package Imports - 如何让常用函数/类分布在我的包中？

> ID：14867952
> 
> 赞同：2
> 
> 时间：2013-02-14T04:45:21.117
> 
> 标签：python

我有一组这样组织的python脚本：

```
PythonScripts/
     TypeAScripts/
        TypeASet1Scripts/
            example.py
        TypeASet2Scripts/
     TypeBScripts/
        TypeBSet1Scripts/
        TypeBSet2Scripts/
     TypeCScripts/
        TypeCSet1Scripts/
        TypeCSet2Scripts/
     CommonFunctions/
        CommonFunctions.py 
```

在`init.py`每个文件夹中。`example.py`我想要的是能够`example.py`从`CommonFunctions`. 我希望文件夹 A、B 和 C 中的脚本执行相同的操作。

要使用绝对进口做到这一点，你会放

```
 import PythonScripts.CommonFunctions.CommonFunctions 
```

但是，这仅`PythonScripts`在您的 python 路径中有效。如果您只是`example.py`在该文件夹中运行，则不会出现这种情况。您可以添加它`sys.append()`，但这似乎是一种尴尬的方式。有没有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T05:32:24.710

Python 支持相对导入，但根据我的经验，它们很挑剔，不会做你期望它们做的事情。[您可以在PEP 328](http://www.python.org/dev/peps/pep-0328/)中找到有关它们的更多信息。

我建议正确打包您的模块并编写一个`setup.py`文件以将它们安装到全局站点包目录中。这将允许您使用绝对导入从系统上的任何位置引用您的模块，并且还为您提供了将它们注册到[Python 包索引 (PyPi)](http://pypi.python.org/pypi)以分发给第三方的选项。关于如何做到这一点的一个很好的教程是[“The Hitchhiker's Guide to Packaging 1.0”](http://guide.python-distribute.org/quickstart.html#lay-out-your-project)。

此外，如果您担心会破坏全局站点包目录，我建议您在[Python 虚拟环境](http://www.python.org/dev/peps/pep-0405/)中进行测试安装。该[`virtualenv`](http://pypi.python.org/pypi/virtualenv)工具尤其使虚拟环境的工作变得简单。

# iphone - 我想从 1 个选项卡的模态视图中显示 TABBAR 控制器

> ID：14867954
> 
> 赞同：0
> 
> 时间：2013-02-14T04:45:29.053
> 
> 标签：iphone, xcode, show, tabbar

我制作了一个带有 5 个选项卡的基于选项卡的控制器，在第一个选项卡上，有一个按钮可以调用模态视图。

但是当一个模态视图出现时，它上面没有标签栏。

如何在显示的模态视图中显示标签栏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:55:53.650

例如，如果 FirstViewController 是您的第一个标签栏的第一个 viewController，您应该这样做：

[FirstViewController.view addSubview:theViewYouWantToShow];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T05:04:04.030

If you'll call a `viewController` using `presentModelViewController`, it'll hide the tabbar of the application. You can use either of 2 way:

1.  Set `navigationController` in first `tab` and `push` `anotherViewController` (without animation if you don't wanna show push effect)
2.  Or as Sumit suggested add `anotherViewController.view` as subView on `firstViewController`

# sql - 将成本从一张表更新到另一张表

> ID：14867957
> 
> 赞同：1
> 
> 时间：2013-02-14T04:45:37.727
> 
> 标签：sql

我需要一个脚本来更新`VENINV`成本`STOCK`

```
STOCK 
Stk_Invno=sku
Stk_cost=cost

VENINV
Vin_Invno=sku
Vin_cost=cost 
```

我需要将成本更新`VENINV`为`STOCK` 我需要成本是为 sku 找到的最高成本，`VENINV`以更新库存中所有匹配 sku 记录的成本 如何加入和更新？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T05:19:54.967

If I understand correctly what you want to accomplish you can try

```
UPDATE Stock
SET Stk_cost = 
(SELECT MAX(Vin_cost) 
   FROM VENINV 
  WHERE Vin_Invno = Stk_Invno) 
```

Here is [sqlfiddle](http://sqlfiddle.com/#!3/89547/1) SQLServer

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T05:32:46.957

试试这个查询：

```
update STOCK 
set Stk_cost = isnull((select top (1) v.Vin_cost from VENINV v 
where v.Vin_Invno = Stk_Invno),Stk_cost) 
```

我已经检查过了，这工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T04:52:56.717

你在找这样的东西吗？我理解正确吗？

```
update T1
set T1.Field = T2.Field
from Table1 T1
inner join Table2 T2 on T1.SomeId = T2.SomeJoiningId 
```

或者在你的情况下，它应该是：

```
UPDATE STOCK
SET STOCK.Stk_Cost = VENINV.Vin_Cost
FROM STOCK
INNER JOIN VENINV.Vin_Invno = STOCK.Stk_Invno 
```

# javascript - 我如何将我的 drawImage 与我的 fillRect 重叠

> ID：14867958
> 
> 赞同：1
> 
> 时间：2013-02-14T04:45:45.937
> 
> 标签：javascript, html, canvas, html5-canvas

当我将鼠标悬停在一个城市上时，我正试图在我的丹麦地图上设置信息。我试图弄清楚如何在我的drawimage上设置我的fillRect，因为它在它后面，以及如何在将鼠标悬停在它上面之后设置事件。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

        <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
            <title></title>

              <script type="text/javascript">
                      // add map to div               
                      function startCanvas() {
                      var c = document.getElementById("myCanvas"); //get element by id
                      var ctx = c.getContext("2d");

                      //add new image to canavas
                      var image = new Image();

                      image.onload = function () {

                          // draw image
                          ctx.drawImage(image, 69, 50); 

                      };

                      // the image file, want this image to be set to back
                      image.src = 'denmark.jpg';

                           // draw rectangle, want this to be st to front
                      ctx.fillStyle = "#FF0000";
                      ctx.fillRect(0, 0, 150, 75);

                  }

          </script>

        </head>
        <body onload="startCanvas()">

    //canvas
        <canvas id="myCanvas" width="600" height="600";">
        Your browser does not support the HTML5 canvas tag.</canvas>

        </body>
        </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T05:30:34.697

如果您希望它位于前面，则需要在图像之后绘制矩形。试试这个：

```
 <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title></title>

          <script type="text/javascript">
                  // add map to div               
                  function startCanvas() {
                  var c = document.getElementById("myCanvas"); //get element by id
                  var ctx = c.getContext("2d");

                  //add new image to canavas
                  var image = new Image();

                  image.onload = function () {

                      // draw image
                      ctx.drawImage(image, 69, 50); 
                       // draw rectangle, want this to be st to front
                      ctx.fillStyle = "#FF0000";
                      ctx.fillRect(0, 0, 150, 75);

                  };

                  // the image file, want this image to be set to back
                  image.src = 'denmark.jpg';

              }

      </script>

    </head>
    <body onload="startCanvas()">

//canvas
    <canvas id="myCanvas" width="600" height="600";">
    Your browser does not support the HTML5 canvas tag.</canvas>

    </body>
    </html> 
```

# javascript - JavaScript 预加载图像

> ID：14867964
> 
> 赞同：6
> 
> 时间：2013-02-14T04:46:14.203
> 
> 标签：javascript, jquery, preload

我正在尝试预加载图像，以下代码有效：

```
$(document).ready(function(){
    $(".member-photos img").each(function(){
        var id = $(this).attr("data-id");
        var file = $(this).attr("data-file");
        var img = new Image();
        img.src = "/user-data/images/image.php?id="+id+"&file="+file+"&width=600&crop=false";
    });
}); 
```

但我想解决的问题是 Chrome 在选项卡中显示旋转的“正在加载”图标。有没有办法我可以做到这一点，所以它在图像加载之前不会持续旋转？我希望加载页面和缩略图，然后开始在后台加载较大的图像，而不在选项卡中使用旋转图标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T05:13:59.030

还没有测试我的想法。

我认为当文档准备好时您正在同步加载图像文件，因此 Chrome 会告诉用户加载尚未完成。

不显示旋转图像，您应该使用 ajax 调用服务器来接收图像，您可以将其添加到文档或什么都不做（因为它已经被缓存）

```
$.ajax({ url : <<image_url>>, cache: true, processData : false, })
.success(function(){ 
  $(document).append( $("<img/>").attr("src", <<image_url>>).hide() );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:59:24.250

使用 bighostkim 答案的 ajax 部分和`load()`事件，我得到了我想要的

为了达到预期的结果，每个循环都需要在`load()`事件内。将其放置在`ready()`事件中会导致图像在页面图像之前开始加载，从而导致页面图像在队列中挂起并在预加载的图像之后加载。大多数浏览器只允许同时从同一主机加载几个项目，其他浏览器必须等到一个点打开（除非它来自不同的主机）。

```
$(window).load(function(){
    $(".member-photos img").each(function(){
        var id = $(this).attr("data-id");
        var file = $(this).attr("data-file");
        $.ajax({ url : "/user-data/images/image.php?id="+id+"&file="+file+"&width=600&crop=false", cache: true, processData : false });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T05:10:32.453

制作了一些东西并添加了图像 10 张图像。他们装载没有任何喧嚣。我只是在我的互联网上尝试过它是慢龟。

我认为浏览器会等到您功能的所有图像都像您一样完成`$(document).ready( function() { });`。

[**小提琴**](http://jsfiddle.net/Q2jj3/1/)

```
var i = 1;
$(document).ready(function(){
    $(window).stop();
    $("img").hide();
    $("img").each(function(){
        var source = $(this).attr("src");
        var img = new Image();
        img.className = i;
        img.src = source;
        $('body').append(img);
        $("."+i).hide().fadeIn();
        i++;
    });
}); 
```

# c# - 关于 Mutex 类型的 WaitOne() 方法

> ID：14867968
> 
> 赞同：1
> 
> 时间：2013-02-14T04:46:31.207
> 
> 标签：c#, mutex, waitone

我写了一小段代码。像下面的东西

```
 public static void SetLicence1()
    {
            Console.WriteLine("Setting Aspose Licence in Thread1 ");
            Console.WriteLine(SetAsposeLicense());
    }

    public static void SetLicence2()
    {
        Console.WriteLine("Setting Aspose Licence in Thread2 ");
        Console.WriteLine(SetAsposeLicense());
    }

    public static bool SetAsposeLicense()
    {
        try
        {
            //Declare Mutex variable:            
            using (Mutex mutex = new System.Threading.Mutex(false, "Test"))
            {
                    mutex.WaitOne(TimeSpan.FromSeconds(5));
                    var objLic = new License();
                    objLic.SetLicense(@"C:\Nivedita\License\Aspose.Cells.lic");
                    mutex.ReleaseMutex();
            }
            return true;
        }
        catch(Exception ex)
        {
               Console.WriteLine(ex.StackTrace);               
               return false;
        }
    }       
}

public class TestClass
{
    public static void Main()
    {
        Thread tid1 = new Thread(new ThreadStart(ThreadClass.SetLicence1));
        Thread tid2 = new Thread(new ThreadStart(ThreadClass.SetLicence2));

        tid1.Start();
        tid2.Start();

        Console.Read();
    }
} 
```

这段代码运行良好。但在这里我的问题是，WaitOne() 方法是否有可能卡在进程中或跨进程而互斥对象没有被释放？虽然我使用了 mutex.ReleaseMutex()。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T01:01:56.667

首先，您的意图不是很清楚。如果你只是想确保两个线程不能同时设置许可证，你需要这样的东西：

```
static object s_lock = new object();

public static bool SetAsposeLicense()
{
    try
    {
        lock (s_lock)
        {
            var objLic = new License();
            objLic.SetLicense(@"C:\Nivedita\License\Aspose.Cells.lic");

        }
        return true;
    }
    catch(Exception ex)
    {
           Console.WriteLine(ex.StackTrace);               
           return false;
    }
} 
```

您注意到这里没有 5 秒超时。如果您想等待 5 秒并设置许可证，*而不管*其他线程是否已完成（基本上是问题中的代码所做的），而不是弄乱互斥锁，您最好这样做（但我很难理解，为什么你想要这个吗）：

```
private static object s_lock = new object();

public static bool SetAsposeLicense()
{
    if (Monitor.TryEnter(s_lock, TimeSpan.FromSeconds(5)))
    {
        try 
        {
            return SetLicenseInternal(); 
        }
        finally 
        {
            Monitor.Exit(s_lock);
        }
    }
    return SetLicenseInternal(); 
}

public static bool SetLicenseInternal()
{
    try
    {
        var objLic = new License();
        objLic.SetLicense(@"C:\Nivedita\License\Aspose.Cells.lic");
        return true;
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex.StackTrace);
        return false;
    }
} 
```

使用 Monitor 对象比使用互斥锁更“原生”方法，它更适合这里，因为您不需要跨进程。

就 Mutex 而言，它是针对.NET的[系统 Mutex 对象的包装器。](http://msdn.microsoft.com/en-nz/library/windows/desktop/ms684266%28v=vs.85%29.aspx)命名互斥体是系统范围的并且跨进程可见。当您创建 .NET Mutex 对象并提供名称时，如果具有此名称的系统 Mutex 不存在，则会创建并包装到您获得的 .NET 对象中。如果之前已经创建了具有此名称的系统 Mutex，则此现有 Mutex 将被包装并作为新的 .NET Mutex 对象返回。

我认为您不应该在您的场景中使用互斥锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T01:08:20.740

如果持有它的进程在没有释放它的情况下退出，[WaitOne](http://msdn.microsoft.com/en-us/library/58195swd.aspx)将抛出[AbandondMutexException 。](http://msdn.microsoft.com/en-us/library/system.threading.abandonedmutexexception.aspx)即使使用 try/finally 块，如果您在 Visual Studio 中的错误位置停止调试或使用任务管理器结束进程，仍然可能发生这种情况，因此您应该重新锁定互斥锁或退出应用程序来处理这种情况。请注意，如果由于抛出的异常而未获取锁，则对 release 的调用也将抛出。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-14T22:32:32.757

**编辑：**我已经知道这个答案是不正确的。 [佳沛](https://stackoverflow.com/questions/14867968/regarding-waitone-method-of-mutex-type-in-c-sharp/14885309#comment20875279_14885309)解释如下。

* * *

没有机会`mutex`不被释放，因为它在`using`块结束时就被处理掉了。没有其他东西可以看到`mutex`，因为它的范围是方法。意识到这里有两个独立`Mutex`的对象，一个在 Thread1 中，一个在 Thread2 中。这只是不正确的用法`Mutex`。

如果你需要一个`Mutex`，试试这个：

```
private static Mutex mutex = new Mutex(false, "Test");

public static bool SetAsposeLicense()
{
    try
    {
        if (!mutex.WaitOne(TimeSpan.FromSeconds(5))
        {
            throw new TimeoutException("Aspose license registration timed out.");
        }
        try
        {
            var objLic = new License();
            objLic.SetLicense(@"C:\Nivedita\License\Aspose.Cells.lic");
            return true;
        }
        finally
        {
            mutex.ReleaseMutex();
        }
    }
    catch(Exception ex)
    {
        Console.WriteLine(ex.StackTrace);
        return false;
    }
} 
```

变化：

*   创建一个类成员，`mutex`以便所有线程都可以看到相同的`Mutex`.

*   检查是否`mutex`被释放，或者是否超时。

*   添加嵌套`try/finally`块以确保`mutex`在设置许可证引发异常时释放。嵌套是必需的，因为`ReleaseMetux()`只能由成功调用的线程调用`WaitOne()`。

# ember.js - 在 Ember 中使用自己的独特数据嵌套视图？

> ID：14867969
> 
> 赞同：0
> 
> 时间：2013-02-14T04:46:33.610
> 
> 标签：ember.js, ember-data

我正在尝试使用 Ember 构建锦标赛支架，但遇到了一些麻烦。这是疯狂三月，所以这是一场 64 支球队的锦标赛，分为 4 个不同的地区（每个地区有 16 支球队）。本质上，HTML 将如下所示：

```
<div id="bracket">
  <div id="reg_1" class="region">
    <ul class="rounds">
      <li class="round round_1"> <!-- 8 games -->
        <div class="game"></div>
        <div class="game"></div>
        <div class="game"></div>
        <div class="game"></div>
        <div class="game"></div>
        <div class="game"></div>
        <div class="game"></div>
        <div class="game"></div>
      <li>
      <li class="round round_2"> <!-- 4 games -->
        <div class="game"></div>
        <div class="game"></div>
        <div class="game"></div>
        <div class="game"></div>
      <li>
      <li class="round round_3"> <!-- 2 games -->
        <div class="game"></div>
        <div class="game"></div>
      <li>
      <li class="round round_4"> <!-- final game of the region -->
        <div class="game"></div>
      <li>
    </ul>
  </div>
  <div id="reg_2" class="region">ditto</div>
  <div id="reg_3" class="region">ditto</div>
  <div id="reg_4" class="region">ditto</div>
</div> 
```

希望这是有道理的。基于这种结构，有几个可重复的元素：四个区域，以及区域内的游戏。因此，理论上，我应该能够使用以下内容构建它：

*   2个控制器：`BracketController`和`RegionController`
*   3 次观看：`BracketView`, `RegionView`,`GameView`
*   3 个模板：`bracket`, `region`,`game`

例如，在`BracketController`我有四个方法，每个方法都返回代表一个区域的游戏的不同子集（`regionOneGames`、`regionTwoGames`等）。我`RegionController`有四种方法，每种方法都返回代表一轮的不同游戏子集。我的模板看起来像这样：

```
# bracket.handlebars

<div id="bracket">
  <div id="reg_1" class="region">{{view App.RegionView regionOneGames}}</div>
  <div id="reg_2" class="region">{{view App.RegionView regionTwoGames}}</div>
  <div id="reg_3" class="region">{{view App.RegionView regionThreeGames}}</div>
  <div id="reg_4" class="region">{{view App.RegionView regionFourGames}}</div>
</div> 
```

^-- 这会产生错误，因为您不能将参数传递给视图。

```
# region.handlebars

<li class="round round_1">
  {{#each roundOneGames}}{{view App.GameView}}{{/each}}
</li>
<li class="round round_2">
  {{#each roundTwoGames}}{{view App.GameView}}{{/each}}
</li>
<li class="round round_3">
  {{#each roundThreeGames}}{{view App.GameView}}{{/each}}
</li>
<li class="round round_4">
  {{#each roundFourGames}}{{view App.GameView}}{{/each}}
</li> 
```

^-- 我认为这个模板可以正常工作，但我无法做到这一点。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T05:42:26.830

这类似于我在这里提出的一个问题：[Re-usable components/views for EmberJS](https://stackoverflow.com/questions/14457217/re-usable-components-views-for-emberjs)

我已经修改了 @TommyKey 创建的 jsfiddle，以展示如何绑定到 ember 对象或数组，然后在视图中使用它。 [http://jsfiddle.net/ianpetzer/Tppmv/](http://jsfiddle.net/ianpetzer/Tppmv/)

基本上，您可以按如下方式插入视图：

```
{{view App.RegionView regionGamesBinding="regionOneGames"}} 
```

在 App.RegionView 的模板中：

```
{{#each game in view.regionGames}}
   {{game}}
{{/each}} 
```

# javascript - javascript 闪现消息

> ID：14867971
> 
> 赞同：0
> 
> 时间：2013-02-14T04:46:40.693
> 
> 标签：javascript, backbone.js

我有一个主干应用程序可以将公告呈现到 dom 中，但是，我希望公告在几秒钟后消失。我猜想，在显示公告之后，我应该只调用一个删除它的函数，但是有没有办法延迟它的执行，或者在我显示模板后创建一个回调。对不起，如果这是一个简单的问题。

```
 $(this.el).html(this.template({ announcement: announcement}));

     this.removeAnnouncement(); 
  },

  removeAnnounce: function(){
    this.$el.remove();
  }, 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T04:48:34.157

您可以使用 setTimeout：

```
window.setTimeout(_.bind(this.removeAnnounce, this), 2000); 
```

这将`this.removeAnnounce`在`2000`毫秒（或 2 秒）后调用。请注意，不要在后面添加，`()`因为`this.removeAnnounce`您实际上是在传递函数引用。超时将在时间过去后调用该函数。

编辑：该`_.bind`部分确保在`this`超时调用函数时正确分配了 in 范围。谢谢@PaulHoenecke

# ios5 - 如何在 iOS5 中显示英镑符号

> ID：14867975
> 
> 赞同：0
> 
> 时间：2013-02-14T04:46:56.737
> 
> 标签：ios5

我有程序，我必须在其中显示货币。我需要知道如何在视图上显示英镑和欧元符号。我需要一个逐步的过程来做到这一点。请帮忙。谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T06:07:03.180

很简单，只需添加一个标签，然后从**编辑 > 特殊字符..**将符号添加到它的文本属性中，然后从弹出窗口中选择包含所有货币符号的货币符号。

这适用于 xib 文件和 .m（即编码）文件。

![在此处输入图像描述](../Images/39b5a3ed03977405583e02249af60bfd.png)

![在此处输入图像描述](../Images/bfa8dd1484a28ead4025d5edc3cc2442.png)

如果还需要更多帮助，请寻求帮助 :)

# jquery - ipad/iphone 上的 Fancybox 覆盖问题

> ID：14867977
> 
> 赞同：10
> 
> 时间：2013-02-14T04:47:16.507
> 
> 标签：jquery, fancybox, jwplayer, fancybox-2

在ipad / iphone上，覆盖出现在fancybox媒体的顶部，即整个页面都被覆盖了fancybox的内容。有什么想法可以解决这个问题吗？

另外，我有 jwplayer 在使用 html5 而不是 Flash 播放视频的 fancybox 中工作，但问题是出现在视频顶部的叠加层，所以当我触摸播放按钮时，fancybox 消失了......

请参阅我之前关于我在fancybox for ios 中实现jwplayer 在fancybox 中的jwplayer 中的问题，[而不是在ipad/iphone 上播放](https://stackoverflow.com/questions/14846926/jwplayer-in-fancybox-not-playing-on-ipad-iphone)

**编辑：**

有趣的是，如果我注释掉这段 css，我可以点击 ipad 上的 fancybox 视频，而它不会消失并播放视频：

```
.fancybox-overlay {
    position: absolute;
    top: 0;
    left: 0;
    overflow: hidden;
    display: none;
    z-index: 9999;
background: url('fancybox_overlay.png');
} 
```

虽然 fancybox 在 iPhone 和 iPad 上运行良好，但桌面设备的 fancybox 显示效果却不尽如人意……

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-14T06:19:56.783

这可能是由于 z-index 问题。尝试在 CSS 文件的最后添加这些行：

```
.fancybox-overlay{z-index:9999 !important}
.fancybox-wrap{z-index:99999 !important} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-14T08:47:18.393

如果我将 jquery.fancybox.css 中的 css 更改为以下内容，则在桌面和 ios 设备上一切正常：

```
.fancybox-overlay {
    position: relative;
    top: 0;
    left: 0;
    overflow: hidden;
    display: none;
/*    z-index: 9999;*/
background: url('fancybox_overlay.png');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-20T20:05:50.123

我通过更改非常简单地解决了这个问题

```
.fancybox-inner {
    overflow: hidden;
} 
```

和

```
.fancybox-inner {
    overflow: hidden;
    zoom:1;
} 
```

zoom : 1 是一个 css 技巧，它强制元素始终保持焦点和顶部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-14T04:49:54.697

这似乎不是每个人都能解决的问题。fancybox 在移动设备上似乎发生的事情是 div 排列不正确。这可以通过添加一些平板电脑检测来解决：

```
var MOBILE = $('html').hasClass('touch');
var TABLET = (MOBILE && screen.width >= 768); 
```

然后，如果您检测到平板电脑，您可以移动容器：

```
if (TABLET) {
    $( '.fancybox-overlay'  ).insertBefore( $( '.fancybox-wrap' ) );
} 
```

这似乎为我解决了这个问题。希望这对其他人有帮助！

# perl - 具有默认值的相互递归方法

> ID：14867979
> 
> 赞同：0
> 
> 时间：2013-02-14T04:47:32.660
> 
> 标签：perl, oop

假设我有一个具有以下方法的类（这有点傻，我知道，实际上它更多地与默认目录有关）：

```
sub getOne { my $self = shift; return $self->getZero() + 1; }
sub getZero { my $self = shift; return $self->getOne() - 1; } 
```

我想允许用户覆盖这些方法中的一个、两个或一个都不覆盖。在覆盖其中一种方法的情况下，另一种当然采用默认值，因此设置`getOne`为将`7`导致. 用户也可以覆盖两者。但用户也可以完全覆盖 none，在这种情况下，结果应该是显而易见的and 。这是上面代码失败的情况，在这种情况下它进入了一个无限循环。`getZero``6``1``0`

我知道我可以：

```
sub getOneOverride { undef; }
sub getZeroOverride { undef; }

sub getOne  
{ 
  my $self = shift; 
  return $self->getOneOverride() or 
    ($self->getZeroOverride() ? $self->getZeroOverride() + 1 : 1); 
}

sub getZero 
{
  my $self = shift; 
  return $self->getZeroOverride() or 
    ($self->getOneOverride() ? $self->getOneOverride() - 1 : 0); 
} 
```

但这需要单独的覆盖和读取方法，我觉得这有点混乱。

有什么方法可以在没有单独的“覆盖”方法的情况下实现上述目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T05:02:16.077

Answering my own question here, I've just solved this by breaking the loop with an optional parameter, i.e.

```
sub getOne  { my $self = shift; return $self->getZero(1) + 1; }

sub getZero 
{
  my ($self, $default_call) = @_;
  return $default_call ? 0 : $self->getOne() - 1;  
} 
```

# php - 在ajax x-editable之后使用条件更新php中的sql表

> ID：14867980
> 
> 赞同：0
> 
> 时间：2013-02-14T04:47:32.647
> 
> 标签：php, jquery, mysql, ajax, phpmyadmin

我需要你的帮助。

我编写了一个代码，该代码使用 ajax jquery 在表中动态创建新行。

```
var nouvelle_ligne = $('<tr><td class="thtime">'+hours+'h'+minutes+'</td><td>Modification de l\'équipe de Quart : <b class="textepersocdq">'+chefdequart+'</b> prend la fonction de Chef de Quart et <b class="textepersoadj">'+adjoint+'</b> prend celle d\'adjoint.</td><td class="button"><button class="editperso"><i class="icon-pencil"></i></button></td><td class="button"><button class="trashperso"><i class="icon-trash"></i></button></td></tr>').fadeIn('fast');
$('#tablemc').append(nouvelle_ligne); 
```

在这个新行中，我有一个按钮可以使用 x-editable 库进行编辑。

```
$(document).on("click", ".editperso", function(g){
g.stopPropagation();
  var $CellParent = $(this).closest('td').prev().children('b');
  editperso2($CellParent); });

function editperso2(bCellToEdit) {
bCellToEdit.editable({
  mode: 'inline',
  inputclass: 'input-medium texteperso',
  type: 'text',
  success: function() {
    var cmsperso = $('.textepersocms').next('span').children('div').children('form').children('div').children('div').children('div').children('input.texteperso').val();
    var chefdequart = $('.textepersocdq').next('span').children('div').children('form').children('div').children('div').children('div').children('input.texteperso').val();
    var adjoint = $('.textepersoadj').next('span').children('div').children('form').children('div').children('div').children('div').children('input.texteperso').val();
    var cmsperso2 = $(this).closest('td').children('.textepersocms').html();
    var chefdequart2 = $(this).closest('td').children('.textepersocdq').html();
    var adjoint2 = $(this).closest('td').children('.textepersoadj').html();

    console.log(cmsperso);
    console.log(chefdequart);
    console.log(adjoint);
    console.log(cmsperso2);
    console.log(chefdequart2);
    console.log(adjoint2);

    $.ajax({
      type: "POST",
      url: "form/update/updateperso.php",
      async: false,
      data: { cmsperso: cmsperso, cmsperso2: cmsperso2, chefdequart: chefdequart, chefdequart2: chefdequart2, adjoint: adjoint, adjoint2: adjoint2 }
    });
  }
});} 
```

此代码将输入转换为变量（adjoint、chefdequart 和 cmsperso 是新值，adjoint2、chefdequart2 和 cmsperso2 是更改前的值）。

最后我有更新 mysql 表的 php 文件，但它不起作用。

```
elseif (empty($_POST['cmsperso']) && !empty($_POST['chefdequart']) && !empty($_POST['adjoint'])) {

    if (isset($_POST['chefdequart']) && isset($_POST['chefdequart2']) && isset($_POST['adjoint']) && isset($_POST['adjoint2'])) {

        $chefdequart = $_POST['chefdequart'];
        $chefdequart2 = $_POST['chefdequart2'];
        $adjoint = $_POST['adjoint'];
        $adjoint2 = $_POST['adjoint2'];

        $pos1 = strcasecmp($adjoint, $adjoint2);
        $pos2 = strcasecmp($chefdequart, $chefdequart2);

        if ($pos1===0 && $pos2!==0) { 

            $updateperso4 = "UPDATE `Operations` SET `chefdequart`=\"$chefdequart\" WHERE `cmsperso`='' AND `chefdequart`=\"$chefdequart2\" AND `adjoint`=\"$adjoint2\"";

            if($updateperso4) {
                echo json_encode(array("status"=>"ok"));
            }
            else {
                echo json_encode(array("status"=>"error", "error"=>"une erreur est survenue..."));
            }

            mysql_query($updateperso4, $cnx) or die(mysql_error());
            mysql_close();

        }

        elseif ($pos1!==0 && $pos2===0) {

            $updateperso5 = "UPDATE `Operations n°` SET `adjoint`=\"$adjoint\" WHERE `cmsperso`='' AND `chefdequart`=\"$chefdequart2\" AND `adjoint`=\"$adjoint2\"";

            if($updateperso5) {
                echo json_encode(array("status"=>"ok"));
            }
            else {
                echo json_encode(array("status"=>"error", "error"=>"une erreur est survenue..."));
            }

            mysql_query($updateperso5, $cnx) or die(mysql_error());
            mysql_close();

        }

        else { 
            echo "Ouppsss !"; 
        }

    }
} 
```

当我将更新之一放入 phpmyadmin 时，更新工作并且值会改变，但在我的代码中，值不会改变。

当我在插入chefdequart和adjoint后尝试chefdequart时，萤火虫没有返回错误，并且： ![萤火虫](../Images/b70efa2d152333d9495cfb7c73fd4027.png)

和数据在视觉上发生变化，但 phpmyadmin 没有变化。

我希望你能理解我。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T07:44:18.677

用这个解决了问题

```
 if(cmsperso === undefined) { var cmsperso = $(this).closest('td').children('.textepersocms').html(); }
 if(chefdequart === undefined) { var chefdequart = $(this).closest('td').children('.textepersocdq').html(); }
 if(adjoint === undefined) { var adjoint = $(this).closest('td').children('.textepersoadj').html(); } 
```

我测试我的变量是否未定义，我输入我需要的值，然后 ajax 返回值

这是魔法。感谢您的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T05:21:38.090

您的 UPDATE 查询未按原样执行`elseif`-

```
elseif (empty($_POST['cmsperso']) && !empty($_POST['chefdequart']) && !empty($_POST['adjoint'])) { 
```

而你的`if`是——

```
if (isset($_POST['chefdequart']) && isset($_POST['chefdequart2']) && isset($_POST['adjoint']) && isset($_POST['adjoint2'])) { 
```

这两个都需要`$_POST['adjoint']`，但是查看您的 Firebug 屏幕截图，您只是在发布`chefdequart`、`chefdequart2`和`adjoint2`

您需要查看您的 $.ajax`data:`作为您发布的内容，您应该有 6 个参数（包括`cmsperso`& `cmsperso2`），但 Firebug 只显示 3 个。

# ruby-on-rails - 如何在一个表中添加对同一模型的多个引用的迁移？红宝石/导轨

> ID：14867981
> 
> 赞同：34
> 
> 时间：2013-02-14T04:47:40.000
> 
> 标签：ruby-on-rails, ruby, rails-activerecord, rails-migrations

如何使用引用同一个表的两个字段创建迁移？我有表 A 和图像。A.image1_id 将引用图像，A.image2_id 也将引用图像。只有2张图片，不多。如果我使用

```
class AddFields < ActiveRecord::Migration
   def change
    change_table(:ticket) do |t|
        t.references :image1_id
        t.references :image2_id
    end
  end
end 
```

我认为这不会起作用，因为它会在末尾添加另一个 _id 并且可能不知道使用“图像”模型。我也想过

```
change_table(:ticket) do |t|
    t.references :image 
```

但是，我该如何添加其中的两个呢？我也想过加

```
create_table :images do |t|
  t.belongs_to :ticket
  t.string :file 
```

但是我只想要 2 个，而不是很多，而且这似乎不允许从票证中获取图像，例如`ticket.image1`or `ticket.image2`。

根据我能找到的所有文档[http://apidock.com/rails/v3.2.8/ActiveRecord/ConnectionAdapters/SchemaStatements/change_table，t.references](http://apidock.com/rails/v3.2.8/ActiveRecord/ConnectionAdapters/SchemaStatements/change_table)似乎也没有接受任何参数。

```
change_table(:suppliers) do |t|
  t.references :company
end 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-14T05:18:27.437

You can do this simply with the `add_column` method in your migrations and set up the proper associations in your classes:

```
class AddFields < ActiveRecord::Migration
  def change
    add_column :tickets, :image_1_id, :integer
    add_column :tickets, :image_2_id, :integer
  end
end

class Ticket < ActiveRecord::Base
  belongs_to :image_1, :class_name => "Image"
  belongs_to :image_2, :class_name => "Image"
end

class Image < ActiveRecord::Base
  has_many :primary_tickets, :class_name => "Ticket", :foreign_key => "image_1_id"
  has_many :secondary_tickets, :class_name => "Ticket", :foreign_key => "image_2_id"
end 
```

This blog post, [Creating Multiple Associations with the Same Table](http://www.spacevatican.org/2008/5/6/creating-multiple-associations-with-the-same-table/), goes into more detail.

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2019-08-02T08:02:57.780

在 Rails 5.1 或更高版本中，您可以这样做：

## 移民

```
class AddFields < ActiveRecord::Migration
   def change
    change_table(:tickets) do |t|
        t.references :image1, foreign_key: { to_table: 'images' }
        t.references :image2, foreign_key: { to_table: 'images' }
    end
  end
end 
```

这将创建字段`image1_id`，并对表`image2_id`进行数据库级引用`images`

## 楷模

就像[罗斯塔的回答一样](https://stackoverflow.com/a/14868254/2871922)

```
class Ticket < ActiveRecord::Base
  belongs_to :image_1, class_name: "Image"
  belongs_to :image_2, class_name: "Image"
end

class Image < ActiveRecord::Base
  has_many :primary_tickets, class_name: "Ticket", foreign_key: "image_1_id"
  has_many :secondary_tickets, class_name: "Ticket", foreign_key: "image_2_id"
end 
```

## 工厂机器人

如果您使用 FactoryBot，那么您的工厂可能看起来像这样：

```
FactoryBot.define do
  factory :ticket do
    association :image1, factory: :image
    association :image2, factory: :image
  end
end 
```

# php - 动态确定基于 PHP 的 CMS 与服务器的兼容性？

> ID：14867984
> 
> 赞同：0
> 
> 时间：2013-02-14T04:47:47.723
> 
> 标签：php, apache, content-management-system

我正在为我的基于 php 的 CMS 开发安装向导。

目前，我正在检查 php 版本，它必须 >= 5.4 以及 apache_get_modules 是否可用，如果是，请检查 mod_rewrite 是否启用。

有3种可能的结果。成功、警告和错误。

成功和错误应该是不言自明的。

警告是安装向导无法弄清楚某些事情，所以我们不知道它是否有效。

它看起来像这样： ![](../Images/b9df52b26b953bf7c2ae605c3d8099cd.png)

所以，问题是。我还能检查什么？

我想我可以测试一些扩展，比如 GD Imagelibrary。

非常感谢任何帮助，在此先感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T02:16:40.127

您没有提及您要安装的 CMS，但我的建议是访问该 CMS 的网站并找到他们的要求页面。它应该告诉您服务器的要求是什么。将这些要求与您的虚拟主机提供的内容进行比较，看看缺少什么。您可能需要创建一个简单的 phpinfo 文件，该文件将告诉您托管服务器安装了哪些模块。如果您在那里没有看到问题，请检查与 CMS 关联的不同目录上的权限冲突。

# jquery - Jquery BBQ，调用函数而不是 hide() 或 show() 以获得更好的效果？

> ID：14867986
> 
> 赞同：0
> 
> 时间：2013-02-14T04:47:51.437
> 
> 标签：jquery, ajax, jquery-bbq

我试图弄清楚如何扩展 BBQ 库以支持一些基本功能，但我发现目前无法做到。我正在创建一个 AJAX 加载投资组合站点，并遵循此示例[http://benalman.com/code/projects/jquery-bbq/examples/fragment-basic/](http://benalman.com/code/projects/jquery-bbq/examples/fragment-basic/)

我有一个同位素网格布局，当单击一个项目时，我希望网格淡出并且 AJAX 内容淡入。我正在使用 CSS3 过渡来实现硬件加速，所以不合时宜盒子示例并没有完全按照 id 的方式进行操作。

```
$(window).bind( 'hashchange', function(e) {

var url = $.param.fragment();

$( 'a.bbq-current' ).removeClass( 'bbq-current' );

// Hide any visible ajax content.            
$( '.site-container' ).children( ':visible').hide();

if ( cache[ url ] ) {
// Since the element is already in the cache, it doesn't need to be
// created, so instead of creating it again, let's just show it!
cache[ url ].show();

} else {
  // Show "loading" content while AJAX content loads.
  $( '#load' ).show();

  // Create container for this url's content and store a reference to it in
  // the cache.
  cache[ url ] = $( '<div class="ajax-item"/>' )

  // Append the content container to the parent container.
  .appendTo( '.site-container' )

  // Load external content via AJAX. Note that in order to keep this
    // example streamlined, only the content in .infobox is shown. You'll
    // want to change this based on your needs.

  .load(url+' .work-detail', function(){
      // Content loaded, hide "loading" content.
      $( '#load' ).hide();
      $('.work-detail').addClass('work-detail-show');
    });
   }
   })

   // Since the event is only triggered when the hash changes, we need to trigger
   // the event now, to handle the hash the page may have loaded with.
$(window).trigger( 'hashchange' );

}); 
```

理想情况下，我想这样做是为了隐藏/显示

```
 $( '.site-container' ).children( ':visible').runSomeFunction();
    cache[ url ].runSomeOtherFunction,''(); 
```

这些功能类似于

```
 function runSomeFunction() {
    $(this).addClass('fadeOut');//Adds class which changes scale and opacity
    setTimeout(function(){$(this).hide();}, 700);//Removes div
}); 
```

目前，我在尝试执行上述示例时收到“runSomeFunction 不是函数”错误。

# sql - SQL查询以获取定期付款日期

> ID：14867990
> 
> 赞同：0
> 
> 时间：2013-02-14T04:48:02.643
> 
> 标签：sql, oracle

我正在尝试编写一个 SQL 查询来获取哪些客户定期支付账单而哪些没有。该表在 ORACLE 中。

```
CUSTOMERS table.
customers_id   customers_name   bill_value    payment_date
----------------------------------------------------------
001            ary              30000         1/14/2012
001            ary              30000         2/14/2012
001            ary              30000         3/14/2012
001            ary              30000         4/14/2012
002            budhy            25000         1/21/2012
002            budhy            25000         2/25/2012
002            budhy            25000         3/21/2012
002            budhy            25000         4/23/2012
003            chanadh          51000         1/17/2012
003            chanadh          51000         2/17/2012
003            chanadh          51000         3/17/2012
003            chanadh          51000         4/17/2012 
```

问题是..

首先，我想显示**定期支付账单的客户**，我期望的结果是这样的..

```
customers_id   customers_name   bill_value    payment_date
----------------------------------------------------------
001            ary              30000         1/14/2012
001            ary              30000         2/14/2012
001            ary              30000         3/14/2012
001            ary              30000         4/14/2012
003            chanadh          51000         1/17/2012
003            chanadh          51000         2/17/2012
003            chanadh          51000         3/17/2012
003            chanadh          51000         4/17/2012 
```

其次，我想展示**没有定期支付账单的客户**，我期望的结果是这样的..

```
customers_id   customers_name   bill_value    payment_date
----------------------------------------------------------
002            budhy            25000         1/21/2012
002            budhy            25000         2/25/2012
002            budhy            25000         3/21/2012
002            budhy            25000         4/23/2012 
```

现在我仍然坚持查询，我不知道该怎么做，有人可以帮忙吗？

对不起我的英语不好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T05:05:36.453

尝试这个

**定期支付账单的客户**

```
WITH CTE AS
(
  SELECT A.*,COUNT(DISTINCT EXTRACT(day from to_date(payment_date,'mm/dd/yyyy'))) 
              OVER (PARTITION BY customers_id) cnt
  FROM TEST A
)
SELECT * FROM CTE WHERE CNT = 1; 
```

**没有定期支付账单的客户**

```
WITH CTE AS
(
  SELECT A.*,COUNT(DISTINCT EXTRACT(day from to_date(payment_date,'mm/dd/yyyy'))) 
              OVER (PARTITION BY customers_id) cnt
  FROM TEST A
)
SELECT * FROM CTE WHERE CNT > 1; 
```

[SQL 演示](http://sqlfiddle.com/#!4/b6e2b/9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T05:17:58.700

Please try:

```
SELECT
  y.*, 
  (CASE WHEN PD=CN THEN 'Regular' ELSE 'Irregular' END) Status
FROM (
    SELECT
      x.*,
      count(*) over (partition by CUSTOMERS_ID, EXTRACT(day FROM payment_date)) PD,
      count(*) over (partition by CUSTOMERS_ID) CN
    FROM CUSTOMERS x
)y; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T05:05:20.643

```
select this.*, next.payment_date next_payment_date
from CUSTOMERS this
join CUSTOMERS next on next.customers_id = this.customers_id 
and next.payment_date = (select min(payment_date) from CUSTOMERS where customers_id = this.customers_id and payment_date>this.payment_date)
where trunc(add_months(this.payment_date,1)) < trunc(next.payment_date) 
```

SQLFiddle：[http ://sqlfiddle.com/#!4/007e0/4](http://sqlfiddle.com/#!4/007e0/4)

# php - Yii RBAC 获取所有附加到指定角色的操作？

> ID：14867991
> 
> 赞同：1
> 
> 时间：2013-02-14T04:48:04.010
> 
> 标签：php, yii, yii-extensions

我正在使用 Yii 框架来开发 Web 应用程序。在尝试获取与特定角色相关的所有操作时，我遇到了困难。

例如，假设有一个用户被分配为管理员，该用户具有一些附加到管理员的操作。此管理员角色继承主持人和用户角色。主持人和用户角色都有一些不同的操作。那么我们如何检索来自管理员、主持人和用户角色的所有用户操作？

我一直在查看所有这些类引用，没有人说这是（不）可能的。任何想法，。？

谢谢，。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:25:24.313

应该可以使用调用的递归函数`getItemChildren()`，请参阅[http://www.yiiframework.com/doc/api/1.1/IAuthManager#getItemChildren-detail](http://www.yiiframework.com/doc/api/1.1/IAuthManager#getItemChildren-detail)

正如 Örs 所提到的，除了 yii-user-management 之外，还有一些带有 GUI 的扩展，还有 yii-rights 和 auth。

# ejb-3.0 - 如何在 EJB 3 XML 中使用拦截器

> ID：14867993
> 
> 赞同：0
> 
> 时间：2013-02-14T04:48:16.520
> 
> 标签：ejb-3.0

如何在 EJB 3 XML 文件中配置拦截器。

我想使用拦截器来调用使用 XML 的 EJb 生命周期方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T07:23:00.400

您可以尝试部署描述符文件中的以下配置。

```
<interceptor-binding>
      <ejb-name>SomeBean</ejb-name>
      <interceptor-class>com.interceptor.DefaultInterceptor</interceptor-class>
      <method>
      <method-name>businessMethod</method-name>
      </method>
   </interceptor-binding> 
```

# file-upload - Kendo UI Upload 控件需要额外的选项卡...有解决方法吗？

> ID：14867996
> 
> 赞同：0
> 
> 时间：2013-02-14T04:48:41.867
> 
> 标签：file-upload, focus, kendo-ui, tab-ordering

当包含在具有附加输入的表单中时，上传控件“选择...”按钮在 2 个选项卡的持续时间内保持焦点。

最终的输出结构就是这样，除了 input[type=file] 元素之外不包含任何其他表单元素

```
<div class="k-widget k-upload">
<div class="k-dropzone">
<div class="k-button k-upload-button">
<input name="photos" id="photos" type="file" data-role="upload" autocomplete="off" class="">
<span>Select...</span>
</div>
<em>drop files here to upload</em>
</div>
</div> 
```

这是什么原因 没有考虑到按钮是主要焦点的选项卡式界面的需要 不允许在所述按钮上实现“焦点”

请指教...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:44:06.203

因此，经过半冗长的讨论和数小时的有趣选择器变通尝试来解决这个问题，我得出了一个结论。这不是一个普通的结论，因为它已经通过了敏捷系统的行列并被接受了......

没有勺子。不得不说……但是真的没有办法。input[type=file] 元素仅在 IE 中设计不佳。*“绝对”*没有办法诱使浏览器登陆元素的伪“按钮”部分并具有与所有其他元素相同的效果。

在 Chrome 和 Firefox 等浏览器中完全没有问题。甚至不需要尝试编写脚本来解释不当行为。

# ruby-on-rails - 如何删除字符串前面和结尾的空格

> ID：14867997
> 
> 赞同：-3
> 
> 时间：2013-02-14T04:48:48.973
> 
> 标签：ruby-on-rails, string

如何去除字符串前面和结尾的空格。

例如“你好”或“你好”会像这样“你好”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T04:50:00.913

它被称为`String#strip`:)

```
'Hello  '.strip # => "Hello"
'   Hello'.strip # => "Hello" 
```

# istringstream - sscanf 到 istringstream 混淆 C++

> ID：14867998
> 
> 赞同：0
> 
> 时间：2013-02-14T04:49:00.940
> 
> 标签：istringstream

我想使用 istringstream 将以下 C 代码转换为 C++：

```
void test(char *s) {
   int i;
   sscanf(s, "%*s%d", &i);
} 
```

到目前为止，我所拥有的是：

```
void test(char *s) {
   int i;
   istringstream iss(s);
   iss >> s >> i;
} 
```

它会出现错误。我对 istringstream 太陌生了，不知道该怎么做才能解决它。我希望对我的错误有所了解。s 应该是没有空格的字符串和整数（例如 Good123），我想删除整数并将其放入 i。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T05:11:56.820

对于初学者，您应该使用不同的变量来存储解析后的字符串。

```
void test(char *s) {
   int i;
   string s1;
   istringstream iss(s);
   iss >> s1 >> i;
} 
```