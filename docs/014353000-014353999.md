# StackOverflow 问答 14353000-14353999

# file - htaccess 删除文件扩展名并更改文件夹

> ID：14353000
> 
> 赞同：0
> 
> 时间：2013-01-16T07:08:04.640
> 
> 标签：file, .htaccess, directory

例如，当人们访问 mysite 时`mysite.com/folder1/i-love-stackoverflow`，我希望`/home/myaccount/public_html/mysite.com/folder1/folder2/i-love-stackoverflow.html`显示该文件

我当前的`.htaccess`文件`/home/myaccount/public_html/mysite.com/folder1/.htaccess`是这样的：

```
RewriteEngine On
RewriteBase /folder1/
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteCond %{REQUEST_URI} !/$
RewriteRule (.*) $1\.html [L] 
```

但是这个htaccess文件只能去掉html扩展名。它仅在文件`i-love-stackoverflow.html`位于`folder1`

谁能帮我解决这个问题？我对 htaccess 不是很熟悉。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:54:15.573

我注册了新主机，现在没有文件夹2。.htaccess 文件在`/home/myaccount/public_html/`. `/home/myaccount/public_html/folder1`以下代码中的 Html 文件对我来说效果很好

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{DOCUMENT_ROOT}/folder1/$1\.html -f
RewriteRule ^(.*)$ /folder1/$1\.html [L] 
```

# google-apps-script - 如何使用谷歌应用脚 本（谷歌表格）打开未转换的谷歌电子表格

> ID：14353004
> 
> 赞同：0
> 
> 时间：2013-01-16T07:08:16.653
> 
> 标签：google-apps-script, google-sheets, google-drive-api

我有当前的代码来打开一个谷歌电子表格

var spreadSheet = SpreadsheetApp.openById(docId);

这适用于转换后的谷歌电子表格。

但是如何使用谷歌表格应用打开未转换的 xls 文件？（当我像上面提到的那样做时，它默认使用谷歌驱动器查看器）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:01:28.657

从[另一个提出类似问题的帖子](https://stackoverflow.com/questions/11681873/converting-xls-to-google-spreadsheet-in-google-apps-script)开始，我认为目前不可能。有一个未解决的问题（[问题 1019](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1019)）要求能够以编程方式转换文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-29T19:48:13.103

可以通过**Google 应用脚本** [https://code.google.com/p/google-apps-script-issues/issues/detail?id=1019#c15](https://code.google.com/p/google-apps-script-issues/issues/detail?id=1019#c15)

奇怪的是，Google Drive 将允许将其他应用程序设置为某些类型文件的默认设置。但不会让您将 gsheets 或 doc 本身设置为这些文件类型的默认值。

有点奇怪的是，一个产品创新者，它的产品包含了很棒的键盘快捷键，会让你别无选择，只能点复选框，点击打开方式并选择要打开的应用程序。

# php - 在 symfony 2 中生成多个条形码图像时的 Mopabarcode 问题

> ID：14353006
> 
> 赞同：1
> 
> 时间：2013-01-16T07:08:35.153
> 
> 标签：php, symfony, zend-framework2

我正在尝试通过循环在 symfony 中生成多个条形码图像文件。这里循环开始......

```
$barcodeService = $this->container->get('mopa_barcode.barcode_service');
$filename = $barcode . ".png";
$barcodeService->saveAs('code128', $barcode, $filename); 
```

循环到此结束.....

对于一个项目，它工作正常，但是在循环中尝试它时给了我一个例外

> ErrorException: 警告: imagesy(): 57 is not a valid Image resource in `/vendor/Zend/library/Zend/Barcode/Renderer/Image.php`line 267

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:18:31.843

看来你不是唯一一个遇到这个问题的人：[https ://github.com/phiamo/MopaBarcodeBundle/issues/9](https://github.com/phiamo/MopaBarcodeBundle/issues/9)

正如人们建议的那样，如果您不使用最后一个，请尝试升级您的 ZF2。和/或[检查](https://github.com/calumbrodie/zend-barcode/tree/mopa_compatible)来自 calumbrodie 的 Bundle 的分叉版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:45:56.077

正如 j0k 建议更新 ZF 一样，您也需要这样做。

我在[MopaBarcodeBundle 问题列表](https://github.com/phiamo/MopaBarcodeBundle/issues/9)中创建了问题。我将我的 ZF 版本更新到最新版本并解决了这个问题。我试图找出问题所在。它与使用注册表（单例）模式管理对象有关。

请查看[Mopa 兼容代码](https://github.com/calumbrodie/zend-barcode/tree/mopa_compatible)

祝你好运

# javascript - javascript 或 jquery 中的动态字段验证

> ID：14353007
> 
> 赞同：-2
> 
> 时间：2013-01-16T07:08:35.003
> 
> 标签：javascript, jquery, html

这是我的 HTML 表单，我通过它创建表单和动态字段

```
<div style="margin:10px 0;color:#574F44;margin-left:160px;">
    <form name="frmsignup3" method="post" action="new_user2.php" style="margin-top:0px; line-height:60px;" enctype="multipart/form-data" onsubmit="return validateForm2()" >
        <input type="hidden" name="user_name" value="<?php echo $_POST['user_name']?>" />
        <input type="hidden" name="user_email" value="<?php echo $_POST['user_email']?>" />
        <input type="hidden" name="user_pass" value="<?php echo $_POST['user_pass']?>" />
        <input type="hidden" name="user_gen" value="<?php echo $_POST['user_gen']?>" />
        <input type="hidden" name="user_dob_m" value="<?php echo $_POST['user_dob_m']?>" />
        <input type="hidden" name="user_dob_d" value="<?php echo $_POST['user_dob_d']?>" />
        <input type="hidden" name="user_dob_y" value="<?php echo $_POST['user_dob_y']?>" />
        <input type="hidden" name="user_ili" value="<?php echo $_POST['user_ili']?>" />
        <input type="hidden" name="user_pc" value="<?php echo $_POST['user_pc']?>" />
        <input type="hidden" name="user_prof" value="<?php echo $_POST['user_prof']?>" />

        <label id="l" style="width:80px;">Specialities:</label>
        <input id="l" type="text" size="37" onblur="" value="" style="width:auto;" name="user[]"/>
        <!---------Dyanmic Fields  for specialities---------->
        <div id="add_user" style="display: none;"><label id="l" style="width:80px;">&nbsp;</label><input id="l"  class="l"type="text" size="37" style="width:auto;" name="user[]" value="" /></div>
        <input type="button" id="add_user()" onclick="add_user('add_user')" value="Add More!" /><br>
        <br class="clear"/>
        <!---------Dyanmic Fields ---------->

        <label id="l" style="width:120px;">Employment History:</label>
        <br class="clear"/>
        <label id="l" style="width:80px;">Role:</label>
        <input id="l" type="text" size="37" onblur="" value="" style="width:auto;" name="user_role[]"/>
        <br class="clear"/>
        <label id="l" style="width:80px;">Company:</label>
        <input id="l" type="text" size="37" onblur="" value="" style="width:auto;" name="user_com[]"/>
        <br class="clear"/>
        <label id="l" style="width:80px;">From:</label>
        <input id="datepicker"  class="l" type="text" size="37" onblur="" value="" style="width:auto;" name="user_from[]"/>
        <br class="clear"/>
        <label id="l" style="width:80px;">To:</label>
        <input id="datepicker1" class="l" type="text" size="37" onblur="" value="" style="width:auto;" name="user_to[]"/>
        <br class="clear"/>

        <!---------Dyanmic Fields for employment history---------->
        <div id="add_user1" style="display: none;" >
        <label id="l" style="width:80px;">Role:</label><input id="l" type="text" size="37" style="width:auto;" name="user_role[]" value="" /><br class="clear"/>
        <label id="l" style="width:80px;">Company:</label><input id="l" type="text" size="37" style="width:auto;" name="user_com[]" value="" /><br class="clear"/>
        <label id="l" style="width:80px;">From:</label><input class="datepicker"  type="text" size="37" onblur="" value="" style=":Arial;font-weight:normal;font-size:11px;color:#7c7b77;outline: none;border: 1px solid #c7c7c7;margin:3px 5px;padding:8px 0;padding-left:5px;-moz-box-shadow: 0 0 5px #c7c7c7;-webkit-box-shadow: 0 0 5px #c7c7c7;box-shadow: 0 0 5px #c7c7c7;float:left;border-radius: 5px;" name="user_from[]" /><br class="clear"/>
        <label id="l" style="width:80px;">To:</label><input class="datepicker" type="text" size="37" onblur="" value="" style=":Arial;font-weight:normal;font-size:11px;color:#7c7b77;outline: none;border: 1px solid #c7c7c7;margin:3px 5px;padding:8px 0;padding-left:5px;-moz-box-shadow: 0 0 5px #c7c7c7;-webkit-box-shadow: 0 0 5px #c7c7c7;box-shadow: 0 0 5px #c7c7c7;float:left;border-radius: 5px;" name="user_to[]"/><br class="clear"/></div>
        <input type="button" id="add_user1()" onclick="add_user1('add_user1')" name="btn" value="Add More!" /><br>
        <br class="clear"/>
        <!---------Dyanmic Fields ---------->

        <label id="l" style="width:80px;">Qualification:</label>
        <br class="clear"/>
        <label id="l" style="width:80px;">Degree:</label>
        <input id="l" type="text" size="37" onblur="" value="" style="width:auto;" name="user_quli[]"/>
        <br class="clear"/>
        <label id="l" style="width:80px;">Institute:</label>
        <input id="l" type="text" size="37" onblur="" value="" style="width:auto;" name="user_ins[]"/>
        <br class="clear"/>
        <label id="l" style="width:80px;">From:</label>
        <input id="datepicker2" class="l" type="text" size="37" onblur="" value="" style="width:auto;" name="user_qfrom[]"/>
        <br class="clear"/>
        <label id="l" style="width:80px;">To:</label>
        <input id="datepicker3" class="l" type="text" size="37" onblur="" value="" style="width:auto;" name="user_qto[]"/>
        <br class="clear"/>

        <!---------Dyanmic Fields for education---------->
        <div id="add_user2" style="display: none;">
        <label id="l" style="width:80px;">Degree:</label><input id="l" type="text" size="37" style="width:auto;" name="user_quli[]" value="" /><br class="clear"/>
        <label id="l" style="width:80px;">Institute:</label><input id="l" type="text" size="37" style="width:auto;" name="user_ins[]" value="" /><br class="clear"/>
        <label id="l" style="width:80px;">From:</label><input  class="datepicker"  type="text" size="37" onblur="" value="" style=":Arial;font-weight:normal;font-size:11px;color:#7c7b77;outline: none;border: 1px solid #c7c7c7;margin:3px 5px;padding:8px 0;padding-left:5px;-moz-box-shadow: 0 0 5px #c7c7c7;-webkit-box-shadow: 0 0 5px #c7c7c7;box-shadow: 0 0 5px #c7c7c7;float:left;border-radius: 5px;" name="user_qfrom[]" /><br class="clear"/>
        <label id="l" style="width:80px;">To:</label><input class="datepicker"  type="text" size="37" onblur="" value="" style=":Arial;font-weight:normal;font-size:11px;color:#7c7b77;outline: none;border: 1px solid #c7c7c7;margin:3px 5px;padding:8px 0;padding-left:5px;-moz-box-shadow: 0 0 5px #c7c7c7;-webkit-box-shadow: 0 0 5px #c7c7c7;box-shadow: 0 0 5px #c7c7c7;float:left;border-radius: 5px;" name="user_qto[]"/><br class="clear"/></div>
        <input type="button" id="add_user2()" onclick="add_user2('add_user2')" value="Add More!" /><br>
        <br class="clear"/> 
        <!---------Dyanmic Fields ---------->
        <!--Error Div-->
        <div  id="errorcv" style="display: none"> 

        </div>  
        <!--Error Div-->               
        <label id="l" style="width:80px;">Upload CV:</label>
        <input id="l" type="file" size="37"  style="width:auto;" name="user_cv" onblur="return checkcv('user_cv')" accept="application/msword"/>
        <br class="clear"/>
        <!--Error Div-->
        <div  id="errorimg" style="display: none"> 
        </div>  
        <!--Error Div-->
        <label id="l" style="width:80px;">Upload Image:</label>
        <input id="l" type="file" size="37"  style="width:auto;" name="user_img" onblur="return checkPhoto('user_img')" accept="image/*"/>
        <br class="clear"/>
        <label id="l" style="width:80px; margin-left:90px; margin-right:15px;"><a href="" >Skip this step</a></label>
        <input type="image" src="<?php echo DIR_PATH?>images/btn_next.gif" alt=""/>
        <br class="clear"/>
    </form> 
```

这是我生成动态字段的javascript。现在我想验证动态生成的字段

```
var counter = 0;
function add_user(FieldName) {
    counter++;
    var newFields = document.getElementById(FieldName).cloneNode(true);
    newFields.id = '';
    newFields.style.display = 'block';
    var newField = newFields.childNodes;
    for (var i=0;i<newField.length;i++) {
        var theName = newField[i].name
        if (theName)
            newField[i].name = theName + counter;
    }

    var insertHere = document.getElementById(FieldName);
    insertHere.parentNode.insertBefore(newFields,insertHere);
}

var counter = 0;
function add_user1(FieldName) {
    counter++;
    var newFields = document.getElementById(FieldName).cloneNode(true);
    newFields.id = '';
    newFields.style.display = 'block';
    var newField = newFields.childNodes;
    for (var i=0;i<newField.length;i++) {
        var theName = newField[i].name
        if (theName)
            newField[i].name = theName + counter;
    }
    var insertHere = document.getElementById(FieldName);
    insertHere.parentNode.insertBefore(newFields,insertHere);
    $(newFields).find('.datepicker').datepicker();

}

var counter = 0;
function add_user2(FieldName) {
    counter++;
    var newFields = document.getElementById(FieldName).cloneNode(true);
    newFields.id = '';
    newFields.style.display = 'block';
    var newField = newFields.childNodes;
    for (var i=0;i<newField.length;i++) {
        var theName = newField[i].name
        if (theName)
            newField[i].name = theName + counter;
    }
    var insertHere = document.getElementById(FieldName);
    insertHere.parentNode.insertBefore(newFields,insertHere);
    $(newFields).find('.datepicker').datepicker();
} 
```

我想验证动态创建的文本字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:20:55.570

我假设您有不同的类型字段。因此，当您添加新字段时，会为每种不同的类型添加相同的类。然后，您可以在发布到 chekc 之前轻松设置验证器功能，如下所示：

```
function your_validator() {
var passed = true;
$('.Specialities').each(function(){
 var current = $.trim($(this).val());
 if (your_false_condition) passed = false;//chekc specialiti value if its not ok
});

if (passed == false) {
alert('error');
return false;
}
return true;
} 
```

# java - 带有西里尔字母的文件路径无效

> ID：14353010
> 
> 赞同：-1
> 
> 时间：2013-01-16T07:08:40.963
> 
> 标签：java, linux

有一个测试程序

```
 public class Path {
  public static void main(String[] args) {
    System.out.println("user.dir=" + System.getProperty("user.dir"));
    System.out.println(Path.class.getResource(Path.class.getSimpleName() + ".class").toString());
  }
} 
```

输出：

```
user.dir=/home/stas/ява
file:/home/stas/%d1%8f%d0%b2%d0%b0/Path.class 
```

如何正确使用第二种方式读取文件路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:19:46.060

尝试

```
System.out.println(java.net.URLDecoder.decode(Path.class.getResource(Path.class.getSimpleName() + ".class").toString(), "UTF-8"); 
```

# ms-word - 文字处理ML。如何为文本分配背景颜色？

> ID：14353013
> 
> 赞同：1
> 
> 时间：2013-01-16T07:08:52.487
> 
> 标签：ms-word, ms-office, office-automation, wordprocessingml

我有代码可以创建包含多个段落的文档，这些段落对于某些单词具有不同的文本颜色。就像是：

```
using (var doc = WordprocessingDocument.Create("some-file-name", WordprocessingDocumentType.Document))
{
    // Add a new main document part. 
    var mainPart = doc.AddMainDocumentPart();                                
    mainPart.Document = new Document();
    var body = new Body();

    var paragraph = new Paragraph();
    var run = new Run();
    ...
    // append bold text 
    run.AppendChild(new RunProperties {Bold = new Bold(), });
    run.AppendChild(new Text("some-text"));
    ...
    // append red text 
    run.AppendChild(new RunProperties
             { Color = new Color {Val = "FF0000"}});
    run.AppendChild(new Text("some-text")); 
```

但是我还没有找到如何添加带有彩色背景的文本的方法。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-14T20:38:43.140

我发现我需要在运行属性中设置[w:shd](http://msdn.microsoft.com/en-us/library/documentformat.openxml.wordprocessing.shading%28v=office.14%29.aspx)属性。我使用的是 docx4j，但主体是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T07:37:46.600

让我自己回答：

背景是**突出显示**属性：

```
// yellow background sample 
run.AppendChild(new RunProperties { Highlight = new Highlight { Val = HighlightColorValues.Yellow } });
run.AppendChild(new Text("some-text")); 
```

# java - JAVA HttpPost enctype = "多形式/数据"

> ID：14353014
> 
> 赞同：-1
> 
> 时间：2013-01-16T07:08:53.717
> 
> 标签：java, http, http-headers, httpclient

我正在尝试使用 HttpPost 模拟表单提交请求`HttpClient 4.2.3`

形式类似于

```
<form action="localhost/xyz.aspx" method = "post" enctype="multipart/form-data">
     <input type="text" name="name">
     <input type="text" name="age">
     <input type="text" name="submit">
</form> 
```

当我尝试使用 java 代码时，

```
 List<NameValuePair> formparams1 = new ArrayList<NameValuePair>();
 formparams1.add(new BasicNameValuePair("name","john"));
 formparams1.add(new BasicNameValuePair("age", "10"));
 UrlEncodedFormEntity entity = new UrlEncodedFormEntity(formparams1);
 entity.setContentEncoding("multipart/form-data");
 entity.setContentType("multipart/form-data;boundary=--asd123"); 
```

我收到 **HTTP 状态 400 - java.lang.RuntimeException: could find no Content-Disposition header within part**

我也搜索了一段时间并尝试了另一种方法，

```
MultipartEntity entity = new MultipartEntity();
entity.addPart("name",new StringBody("john",Charset.forName("UTF-8")));
entity.addPart("age", new StringBody("10",Charset.forName("UTF-8"))); 
```

我仍然收到类似**HTTP 415 HTTP 400的错误**

任何人都可以帮助我模拟这样的请求。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:30:03.497

您发送的多部分实体需要设置两个对象`FileBody`和`StringBody`. 您设置的只是`StringBody`.

简而言之，Multipart 请求通常由文件组成。服务器需要文件名（使用设置`StringBody`）和文件内容（使用设置`FileBody`）。

例如。

```
FileBody name = new FileBody(new File(fileName));
StringBody content = new StringBody("Filename: " + fileName);

MultipartEntity reqEntity = new MultipartEntity();
reqEntity.addPart("name", bin);
reqEntity.addPart("content", content);
httppost.setEntity(reqEntity); 
```

在您的情况下，您似乎没有发送任何多部分内容。我不确定是否使用该编码类型！

# ssrs-2008 - 从 SSRS 2008 中的矩阵中检索特定值

> ID：14353018
> 
> 赞同：1
> 
> 时间：2013-01-16T07:09:21.790
> 
> 标签：ssrs-2008

我在矩阵中按月（4 个月）显示了 5 个类别的值，如下所示：

```
CategoryA 1 2 3 4

CategoryB 4 5 8 0

CategoryC 2 4 6 7

CategoryD 9 5 4 5

CategoryE 5 4 8 5 
```

现在我在右侧添加了 1 列（外部组），以显示总行数。我要问的是，我想添加一行（组外）以显示百分比**（类别 D / 类别 A * 100）**每月（针对所有 4 列和“总计”列）

请建议......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:40:24.277

您可以尝试以下步骤：

1.  假设`CategoryDValue`在数据集中创建一个计算列并使用此表达式`=IIF(Fields!Category.Value=” Category D”,Fields!MonthData.Value,0)`

2.  现在在外部组列单元格中使用此表达式`=(SUM(Fields! CategoryDValue.Value) / SUM(Fields!MonthData.Value)) * 100`

# ruby-on-rails - 渴望加载有限制？

> ID：14353023
> 
> 赞同：0
> 
> 时间：2013-01-16T07:09:52.873
> 
> 标签：ruby-on-rails, rails-activerecord

如何将 a 添加`limit`到此范围？

```
scope :with_comments, include: {comments: :user} 
```

我这样使用它：

```
Event.with_comments.find(params[:id]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:56:52.410

```
scope :with_comments, include(comments: :user).limit(5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:52:32.550

```
default_scope includes(:comments :user).limit(5) 
```

将其添加到默认范围

```
Event.find(params[:id]) 
```

# javascript - @JavascriptInterface 无法解析

> ID：14353026
> 
> 赞同：19
> 
> 时间：2013-01-16T07:10:03.090
> 
> 标签：javascript, android, webview, android-4.2-jelly-bean

我正在使用 Android 使网页与我的应用程序交互。因此，我浏览了文档和教程并最终创建了[这个站点](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDUQFjAA&url=http://developer.android.com/guide/webapps/webview.html&ei=LlH2UKC8FomgqgG4r4HADA&usg=AFQjCNH8Xkqt0eXYVwXwtcD2P-sfM9CUtA&sig2=Vbpk0MlJuRXNgsL3gKK3bQ&bvm=bv.41018144,d.aWM)。在其中，开发人员列出了您应该`@JavascriptInterface`在您希望 WebView 可以访问的任何功能之前包含的列表，如果没有它，Jelly Bean 将无法识别该功能。

我的问题是，当我把它放进去时，我收到一条错误消息：

> @JavascriptInterface 无法解析为类型

没有它，我的代码可以编译并正常工作，但我希望 Jelly Bean 兼容。我目前正在以 Android 1.6 为基础，所以它没有`@JavascriptInterface`吗？那是果冻豆特有的东西吗，这意味着我必须专门为果冻豆制作一个程序？任何帮助将不胜感激。这是我完整的接口类：

```
import android.content.Context;

public class WebAppInterface{

    Context mContext;

    /** Instantiate the interface and set the context */
    WebAppInterface(Context c) {
        mContext = c;
    }

    /** Show a toast from the web page */
    //needed for jelly bean
    @JavascriptInterface
    public void turnOff() {
        MyAlarmPopup.turnOff();
    }

} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-02T00:59:27.130

`@JavascriptInterface`在 JellyBean 中引入。

您需要将项目构建目标设置为 API 级别 17

在 Eclipse IDE 中，转到 `Project->Properties`. 选择Android并设置目标

该 APK 将适用于旧版本的 android。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-21T06:13:54.353

你需要添加这个：

```
import android.webkit.JavascriptInterface; 
```

[在此处查看示例：](https://github.com/apache/cordova-android/blob/master/framework/src/org/apache/cordova/ExposedJsApi.java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-18T07:43:59.153

Android Studio 用户的步骤：

1.  检查 build.gradle 中的 minSdkVersion 是否为 17 或更高
2.  添加`import android.webkit.JavascriptInterface;`

# c# - 基本平台游戏基于矩形的碰撞问题

> ID：14353036
> 
> 赞同：2
> 
> 时间：2013-01-16T07:10:52.350
> 
> 标签：c#, xna

**背景：**我最近在xna做了很多学习。我一直在完善我的游戏结构并为普通游戏创建基本类，阅读了几篇文章，观看了许多视频，并阅读了我手头的一本书。所以，在创建了一个好的游戏结构之后，我转向了真正的游戏，一个平台游戏。我目前有普通的方块，还有一个播放器——问题出在播放器内部。

**问题/问题：**与块碰撞通常没问题，但有时碰撞行为很奇怪。IE：一些玩家在方块中的情况（通常是一个像素），这是一个大问题，因为这可能导致玩家被推到地图的某个位置。

**玩家游戏逻辑：**玩家的移动是基于状态的。状态是“地面、跳跃和坠落”的枚举器。现在，问题似乎在下降状态内部。有时碰撞是正确的，有时玩家会在方块内结束一个像素 - 这意味着如果玩家跳跃，他将立即被推到玩家上方的第一个方块 - 无论多远。

**碰撞逻辑：**在坠落状态下，玩家被重力推向地板。每帧都会增加重力。在改变位置之前，在检查其运动范围内的任何块之间是否存在碰撞时调用碰撞方法。现在，由于这是一个下降状态，玩家正在向下移动，所以当它发生碰撞时，while 循环每帧将玩家向下推 1 个像素，直到它遇到块。就像备份一样，有一个循环将玩家推出街区。然后它将当前状态设置为接地。跳跃状态遵循同样的理论。

**Falling State Script：**阅读上文以了解此代码的说明。

```
case PlayerState.Fall:
    // falling sprite
        mySpriteManager.mySpriteCurrent = mySpriteManager.mySpriteIndex["PlayerSprites/player_fall"];
    // fall velocity change
        myVelocity.Y += myDforce;

    if ( Collision( otObjectList.wallIndex, myPosition.X + 1, myPosition.Y, myPosition.X + myWidth - 1, myPosition.Y + myHeight + myVelocity.Y) )
    {
        while( !Collision( otObjectList.wallIndex, myPosition.X + 1, myPosition.Y, myPosition.X + myWidth - 1, myPosition.Y + myHeight) )
            myPosition.Y += 1;
        while ( Collision(otObjectList.wallIndex, myPosition.X + 1, myPosition.Y, myPosition.X + myWidth - 1, myPosition.Y + myHeight))
            myPosition.Y -= 1;
        myVelocity.Y = 0;
        myCurrentState = PlayerState.Ground;
    }
    else
    {
            myPosition.Y += myVelocity.Y;
    }
break; 
```

**碰撞脚本：**这会遍历所有实体对象，直到发生碰撞，如果存在则返回 true。

```
private bool Collision( List<ObjWall> otWalls, float x1, float y1, float x2, float y2)
{
    myBoundingBox.X = (int)Math.Ceiling(x1);
    myBoundingBox.Y = (int)Math.Ceiling(y1);
    myBoundingBox.Width = (int)Math.Ceiling(Math.Abs( x2 - x1));
    myBoundingBox.Height = (int)Math.Ceiling(Math.Abs( y2 - y1));
    foreach (ObjWall wall in otWalls)
    {
        if ( Box.Intersects( wall.Box ) )
        {
            return true;
        }
    }
    return false;
} 
```

**变量解释：**

**myBoundingBox** - 每个普通对象都建立在这个抽象类之上。因此，每个对象都有一个边界矩形。

**Box** - 是来自抽象对象类的特征，它只返回边界矩形。

**myVelocity** - 是玩家的速度，这是一个 Vector2，因为浮动提供了更清晰的重力。

**myDforce** - 是一个以正向力改变 yvelocity 的浮点数。我相信我应该让它成为一个常数。

**ObjectList** - 这是一个运行所有普通对象逻辑的类，并包含一个房间中所有可能的对象的列表。

**myPosition** - 这是另一个由抽象类提供的受保护变量，普通对象从中驱动。这是一个向量 2，所以它可以使用浮点数。

有关代码中的更多解释，请询问！ *在此先感谢您的时间和帮助。* 礁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:25:18.607

您对 current 的第二次调用`Collision`仅检查当前位置，然后将 Player 向下移动，无论该操作是否会导致碰撞。

我可以看到您应该通过第三次调用 Collision 并将播放器向后移动来处理这个问题，但是为了从代码中移除一些复杂性（稍微），您可以简单地让第二次碰撞调用来检查位置 + 1 并且不移动玩家如果为真。

这消除了对第 3 次调用的需要`Collision`，与您在第一次调用碰撞时使用的大部分下落的逻辑相匹配（即通过重力移动但如果移动会与墙壁碰撞则不会）并减少您的错误的位置可以发生。

# actionscript-3 - 如何在 Flash 游戏中隐藏我的通讯密钥？

> ID：14353038
> 
> 赞同：0
> 
> 时间：2013-01-16T07:10:54.733
> 
> 标签：actionscript-3, flash

我将开发一个具有服务器/客户端模式的游戏。客户端和服务器通过 TCP 套接字进行通信。为了服务器的数据安全，我们用一些密钥加密了我们的数据流。

但问题是，actionscript 代码很容易用工具反编译。因此，即使经过混淆，密钥也不安全。如果您想花更多时间，您仍然可以恢复它。

我还检查了 FlashCC 项目，但在结合 stage3d 时会花费我们。

那么有什么办法可以隐藏我的钥匙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:50:42.853

在套接字上使用非对称加密 TLS 或 SSL。虽然 flash player 11 有原生 SecureSocket 但它有一些问题，所以我推荐你使用 as3cryptolib 的[TLSSocket](http://code.google.com/p/as3crypto/)（[这里](https://github.com/fsbmain/as3public/tree/master/as3crypto_patched)是官方 as3crypto lib 的最新版本的分支，其中包含[问题](http://code.google.com/p/as3crypto/issues/list)列表中的一些关键修复）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:31:50.803

我得出的结论是，您不可能拥有 100% 牢不可破的 swf。您唯一能做的就是增加障碍以阻止黑客。

正如评论中所说，最安全的方法是将整个游戏逻辑放在服务器上，让服务器自己计算分数（或其他敏感数据）。但是根据游戏的类型，这可能是一个非常愚蠢的想法。

# wordpress - add_menu_page() add_submenu_page() | 传递带有被调用函数的 $variable

> ID：14353041
> 
> 赞同：2
> 
> 时间：2013-01-16T07:11:19.097
> 
> 标签：wordpress

我在我的 WordPress 后端添加了一个菜单页面，其中包含一些子菜单项。我使用的代码片段是：

```
// Add to admin_menu function
add_menu_page(__('New Menu'), __('New Menu Title'), 'edit_themes', 'new_menu_item', 'functiontocallonclick', '', 3.5);
// Add to secondlevel menu
add_submenu_page('new_menu_item', __('New |Sub Menu item'), __('New Menu Title item'), 'edit_themes', 'new_menu_sub_item', 'subfunctiontocallonclick','); 
```

正如您在上面看到的，当您转到后端的 New 菜单项时，它正在调用函数 functiontocallonclick。

我现在想知道的是：我想用函数传递一个变量。

```
functiontocallonclick($value); 
```

当然不能那样做，那有什么好的方法呢？

我用这个：

```
switch($_GET['page']){
    case 'suppliers': $type='c';
        break;
    case 'contractors': $type='s';
        break;
    default: $type='';
        break;
} 
```

但我试图找到一些更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-05-26T20:03:34.523

这个答案可能看起来迟了，但我会分享我是如何解决这个问题的，因为看起来很多人正在寻找这个问题的答案。

我的答案是将变量传递给基于类的上下文中的嵌套函数，因此如果您使用的是函数式编程，那么请忽略 $this.

* * *

主要钩子动作：

```
function mainSetup(){
   add_action('admin_menu', array($this, 'mainMenuSetup'));
   add_action('admin_menu', array($this, 'subMenuSetup'));
} 
```

* * *

菜单设置：

```
function mainMenuSetup(){
        add_menu_page('DashBoard',
                    'DashBoard',
                    'manage_options',
                    '[yoursitesname]-admin-menu',
                    function(){ $this->pageSelect("admin"); },
                    '',
                    200
                    );  
} 
```

在主菜单导航选项的示例中，我们在嵌套函数中传递了一个字符串，该字符串将作为参数传递给方法（函数）“pageSelect”，但该字符串是硬编码的，不能轻易更改。我们将在设置子菜单时解决这个问题。

TODO：您应该替换 [yoursitename]。

* * *

子菜单设置：

对于子菜单，假设我们希望更轻松地返回并添加新的子菜单并更改谁可以访问哪些子菜单。为此，我将创建一个名为“subMenuObjects”的关联数组，其中数组的键是子菜单对象，它们的值是页面的权限。

```
function subMenuSetup(){

    $subMenuObjects = array(
                    'Settings' => 'manage_options',
                    'Services' => 'manage_options'
    );

    foreach ($subMenuObjects as $subMenu => $value) {

        add_submenu_page('[yoursitesname]-admin-menu',
            $subMenu . 'Page',
            $subMenu,
            $value, 
            '[yoursitesname]' . strtolower($subMenu) . '-menu', 
            function() use ($subMenu){ $this->pageSelect($subMenu); }
        );
    }
} 
```

在这里，我们使用 'use' 将 $subMenu 传递给嵌套函数。

* * *

页面选择：

```
function pageSelect($page){

        switch ($page) {
            case 'admin':
                echo '<div>Welcome to the Admin page</div>';
                break;
            case 'Settings':
                echo '<div>Welcome to the Settings page</div>';
                break;
            case 'Services':
                echo '<div>Welcome to the Service page</div>';
                break;

            default:
                echo '<div>something happened, contact dev</div>';
                break;
        }

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-06T15:38:08.737

是的，你这样做的方式就是 WordPress 自己的方式。要重用管理屏幕，您必须在 URL 中传递一些查询变量，然后根据该变量显示/隐藏元素。

您还可以创建不可见的管理屏幕：[如何在 WordPress 自定义插件中启用附加页面？](https://stackoverflow.com/q/18933965). 这也可能有用：[Redirect from add_menu_page](https://stackoverflow.com/q/11419028)

# c - 传输端点未连接 bluez

> ID：14353046
> 
> 赞同：1
> 
> 时间：2013-01-16T07:11:37.947
> 
> 标签：c, endpoint, rfcomm, transport, bluez

传输端点未连接

```
#include <stdio.h>
#include <unistd.h>
#include <sys/socket.h>
#include <bluetooth/bluetooth.h>
#include <bluetooth/rfcomm.h>

int main(int argc, char **argv)
{
struct sockaddr_rc addr = { 0 };
int s, i, status;
char dest[18] = "88:53:2E:10:BB:B0";
FILE *ptr1;
char c;
char str[1024];
// allocate a socket
s = socket(AF_BLUETOOTH, SOCK_STREAM, BTPROTO_RFCOMM);

// set the connection parameters (who to connect to)
addr.rc_family = AF_BLUETOOTH;
addr.rc_channel = (uint8_t) 1;
str2ba( dest, &addr.rc_bdaddr );

// connect to server
status = connect(s, (struct sockaddr *)&addr, sizeof(addr));

// send a message
if( status == 0 ) {
ptr1=fopen("//home//aathreya//Desktop//Bluetooth//imudata_acm0.dat","r"); //open file to be read
i=0;
while((c=fgetc(ptr1))!= EOF) //copy 1024 bytes at a time to a string
    {
    str[i]=c;
    i++;
    if (i==1024)
        {
        i=0;
        status = write(s, str, 1024);
        }
    }
status = write(s, str, 1024);
status = write(s, "stop", 4); //flag to stop reading at client
fclose(ptr1);
}

if( status < 0 ) perror("uh oh");

close(s);
return 0;
} 
```

我使用了来自[http://people.csail.mit.edu/albert/bluez-intro/x502.html](http://people.csail.mit.edu/albert/bluez-intro/x502.html)的代码。我将其修改为使用 c 的文件函数通过蓝牙传输一个 8 mb 的大文件。我收到错误“传输端点未连接”怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-29T04:30:11.567

在代码中，您将通道号指定为 1 addr.rc_channel = (uint8_t) 1; 但是通道号 1 代表不能用于文件传输的 SDP 如果您的远程设备是移动设备或任何其他设备，并且如果它支持 OPP，那么您可以将通道号指定为 9 addr.rc_channel = (uint8_t) 9; 可以看到文件传输成功。

# html - 如何在 SWI-Prolog 中处理 POST 请求？

> ID：14353053
> 
> 赞同：1
> 
> 时间：2013-01-16T07:12:35.763
> 
> 标签：html, forms, post, prolog, swi-prolog

我有一个像这样的 HTML 表单：

```
<form action="test" method="post">
  <input name="first_name" type="text"/>
  <input name="last_name" type="text" />
  <input name="age" type="text" />
  <input type="submit" value="Send"/>
</form> 
```

我如何获取输入字段的值并将它们打印在屏幕上，就像在任何其他过程编程语言（如 PHP、ASP 或 JSP）中一样？

我尝试通过以下方式解决问题：

```
:- use_module(library(http/thread_httpd)).
:- use_module(library(http/http_dispatch)).

:- http_handler(root(test), reply, []).
:- http_handler('test', reply, []).

server(Port) :-
        http_server(http_dispatch, [port(Port)]).

reply(Request) :-
        member(method(post), Request), !,
        http_read_data(Request, Data, []),
        format('application/x-www-form-urlencoded', []),
        format(Data). 
```

这给我带来的不过是`500`代码错误（内部服务器错误）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:24:01.913

您应该使用`http/http_client`库 ( `:- use_module(library(http/http_client))`)。

此外，我不确定有两个测试处理程序将如何工作。最后，我认为 format(Data) 可能不起作用，特别是因为它预计会返回一个 html 文档。

顺便说一句，要检索字段的值，您可以执行以下操作：

```
http_read_data(Request, [first_name=FN, last_name=LN, age=A|_], []). 
```

我对http prolog lib很陌生，我建议检查[http://www.pathwayslms.com/swipltuts/html/](http://www.pathwayslms.com/swipltuts/html/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T23:56:29.403

本质上，您将像平常一样处理请求，检查请求中的方法（方法）术语是否是方法（帖子）。

http_read_data 将读取请求正文。正文将像 URI 查询字符串一样编码，因此 uri_query_components/2 会将其转换为 Key=Value 术语的列表

?- uri_query_components('a=b&c=d%2Bw&n=VU%20Amsterdam', Q)。Q = [a=b, c='d+w', n='VU Amsterdam']。

对于寻找类似信息的其他人 - 如果您的响应是 json，您可以使用 read_json_dict 将数据作为 dict 获取。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T10:48:55.920

我用`library(http/http_parameters)`. 有了这个，我可以做到

```
load_graph(Request) :-
    http_parameters(Request,
            [path(Path, [atom]),
             aperture(Aperture, [integer])]), 
```

其中 load_graph 是表单的处理程序

```
...
html(form([action(Ref)],
      dl([dt('Root Path'), dd(input([name=path, type=text, value=Default])),
          dt('Aperture'), dd(select([name=aperture], Aplist)),
          dt('Go!'), dd(input([type=submit, value='Load!']))
      ]))). 
```

# spring - 如何使用 JSTL 获取 jsp 中列表的元素？

> ID：14353054
> 
> 赞同：15
> 
> 时间：2013-01-16T07:12:38.677
> 
> 标签：spring, jsp, spring-mvc, jstl

我的 Spring MVC java 控制器类中有这样的代码：

```
@RequestMapping(value = "jobs", method = { RequestMethod.GET })
public String jobList(@PathVariable("username") String username, Model model) {
    JobInfo[] jobInfo;
    JobStatistics js;
    LinkedList<JobStatistics> jobStats = new LinkedList<JobStatistics>();
    try {
        jobInfo = uiClient.getJobs(username);
           for (int i = 0; i < jobInfo.length; i++) {
             js = uiClient.getJobStatistics(jobInfo[i].getJobId());
             jobStats.add(js);
           }
        model.addAttribute("jobs", jobInfo);
        model.addAttribute("jobStats", jobStats);
    } 
```

哪个 uiClient 将使用 RMI 从数据库中获取一些数据......现在我想使用 JSTL 在我的 JSP 文件中显示作业和相关统计信息：

```
<c:set var="stats" value="${jobStats}" />
        <c:forEach var="jobs" items="${jobs}">
           <c:set var="jobID" value="${jobs.JobId}"/>
          <table>
            <tr class="tr1">
                <td>${jobs.Topic}</td>
                <td>${stats.get(i).No}</td>
            </tr>
          </table>
        </c:forEach> 
```

如何`LinkedList`使用 JSTL 在我的 JSP 中获取模型的元素？对于我来说，可能没有任何计数器`i`。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-16T11:45:47.867

在我看来，正确的答案是你得到的两个答案的组合：

> 使用 c:foreach 标签的 varStatus 属性

但：

> “get”不是 jstl 函数。

```
<c:forEach var="jobs" items="${jobs}" varStatus="i">
   <c:set var="jobID" value="${jobs.jobId}"/>
  <table>
    <tr class="tr1">
        <td>${jobs.topic}</td>
        <td>${stats[i.index].no}</td>
    </tr>
  </table>
</c:forEach> 
```

编辑：这是问题作者最终使用的代码：

```
<c:set var="stats" value="${jobStats}" />
<c:forEach items="${jobs}" varStatus="i">
   <c:set var="jobID" value="${jobs[i.index].jobId}"/>
  <table>
    <tr class="tr1">
        <td>${jobs[i.index].topic}</td>
        <td>${stats[i.index].no}</td>
        <td>${jobID}</td>
    </tr>
  </table>
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-16T10:50:18.853

`get`不是一个jstl函数。

```
<td>${stats[i.index].No}</td> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T07:18:21.310

使用 标签`varStatus`的属性`c:foreach`

```
<c:forEach var="jobs" items="${jobs}" varStatus="i">
   <c:set var="jobID" value="${jobs.JobId}"/>
  <table>
    <tr class="tr1">
        <td>${jobs.Topic}</td>
        <td>${stats.get(i.index).No}</td>
    </tr>
  </table>
</c:forEach> 
```

# asp.net - 在 new MailMessage() 上引发 CryptographicException

> ID：14353057
> 
> 赞同：0
> 
> 时间：2013-01-16T07:12:55.370
> 
> 标签：asp.net

我在 ASP.NET 站点中有以下代码

```
using (MailMessage mailMessage = new MailMessage())
{
    ...
} 
```

抛出 System.Security.Cryptography.CryptographicException：句柄无效。例外。

我的 web.config 文件中的 SMTP 设置是：

```
<system.net>
<mailSettings>
  <smtp deliveryMethod="Network" from="myaccount@gmail.com">
    <network host="smtp.gmail.com" defaultCredentials="false" enableSsl="true" port="587" userName="myaccount@gmail.com" password="mypass" />
  </smtp>
</mailSettings> 
```

这是昨天的工作。今天开始抛出异常 - 在我升级到 VS 2012 之后。

有人见过这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:38:02.213

正如在[类似问题中发现的那样](https://stackoverflow.com/questions/9610424/new-mailmessage-throws-the-handle-is-invalid)

我为“修复”所做的只是重新启动我的计算机，然后一切又开始工作了。

# android - 上下文菜单在菜单项单击时消失

> ID：14353062
> 
> 赞同：0
> 
> 时间：2013-01-16T07:13:15.883
> 
> 标签：android, contextmenu

我正在`context menu`为我的 textview 使用 a。我将每个菜单项的 setCheckable() 属性设为 true。当我单击第一个菜单项时，它被选中，但菜单正在消失。是否可以在上下文菜单中检查多个项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:48:54.760

上下文菜单被构建为根据标准 UX 模式在点击时关闭。您可以尝试使用带有复选框和确定/取消按钮的对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:26:50.443

你试过这个吗。。

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    menu.setHeaderTitle(R.string.menu_title);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.context_menu, menu);

    // loop for menu items
    for (int i = 0; i < menu.size(); ++i) {
        MenuItem mi = menu.getItem(i);
        // check the Id as you wish
        if (mi.getItemId() == R.id.item2) {
            mi.setChecked(true); 
        }
    }
}

        MenuItem mi = menu.findItem(R.id.item2) 
```

# ios - 如何在 iOS 中进行设置查看

> ID：14353063
> 
> 赞同：-1
> 
> 时间：2013-01-16T07:13:23.427
> 
> 标签：ios

这可能是一个新手问题，但它可能对其他人有所帮助。

我已经为我的设置制作了一个带有主 ViewController、导航控制器和第二个视图控制器的 iOS 应用程序。

当我点击主视图上的按钮时，它会转到第二个（设置）视图（segue push）。但是当我回到主视图时，主视图是空的，因为它被重新加载了。

有没有一种简单的方法可以让主视图保持在加载设置之前的状态，或者这是正常行为，我们无能为力？

是否有用于制作设置视图的特定组件？（某种带有开/关选择器或滑块的表格视图）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:16:38.987

要在您的应用程序中创建设置，请检查此[**链接**](http://inappsettingskit.com/)。

> 但是当我回到主视图时，主视图是空的，因为它被重新加载了。

这在正常情况下不会发生。`viewWillAppear`我认为您正在主视图或`viewDidAppear`方法中做某事。

请检查一下。

# c - 使用管道数据的最佳方式是什么？

> ID：14353064
> 
> 赞同：0
> 
> 时间：2013-01-16T07:13:24.143
> 
> 标签：c, unix, pipe

我对从管道中使用数据的更便携但最快的方式感兴趣。

例如，在 linux 中，我能想到的最快方法如下：

```
#define _GNU_SOURCE
/* ... */
int fd;
int pipefd[2];

pipe(pipefd);

/* ... */
fd = open("/dev/null", O_WRONLY);
splice(pipefd[0], NULL, fd, NULL, INT_MAX, SPLICE_F_MOVE); 
```

...但它不是便携式的。

**更新 1：**

如果我关闭整个管道并在每次需要时创建一个会怎样？

```
/*consume*/
close(pipefd[0]);
close(pipefd[1]); 
```

它会比使用其他方法（即 read()/write()）更快吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T03:33:49.793

您确定此操作对您的程序的性能至关重要吗？如果没有，只需使用最简单的东西，可能是类似的东西`cat the_pipe > /dev/null`或它在 C 中的等价物，循环读取（2）数据块（比如 4KiB，或者可能获得“最佳”大小，在当前 Linux 上）管道中的最大数据为 64KiB；看看 pipe(7))。也许让数据的生产者闭嘴比把它扔掉更容易？在性能方面，这是无法击败的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:40:00.163

使用该`read`功能。请参阅此处的手册页 - [http://linux.die.net/man/3/read](http://linux.die.net/man/3/read)

# php - 在MYSQL中放置数组的值

> ID：14353065
> 
> 赞同：1
> 
> 时间：2013-01-16T07:13:26.963
> 
> 标签：php, mysql

我有一个名为的 PHP 数组变量

```
for($i=0;$i<sizeof($PhotoCatIdArray);$i++){
        $msg[$i]=$PhotoCatIdArray[$i];
} 
```

上面的数组具有像 1,3,5 这样的 int 值，我想将其放在 mysql SQL 查询中。

```
SELECT * FROM photoCategories WHERE `ID` NOT IN ('1','3','5') 
```

我正在尝试将这些数组值放在查询 Not In ('1','3','5') 条件中。我怎么能把它，任何人有想法去做！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T07:17:20.707

您可以使用内爆功能：

[PHP内爆](http://php.net/manual/en/function.implode.php)

```
$msgArr=implode(',',$msg);

$query="SELECT * FROM photoCategories WHERE `ID` NOT IN ($msgArr)"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T07:14:49.580

```
for($i=0;$i<sizeof($PhotoCatIdArray);$i++){
        $msg[$i]=$PhotoCatIdArray[$i];
}

//for details about implode function, http://php.net/manual/en/function.implode.php
$str=implode(',',$msg);

$query="SELECT * FROM photoCategories WHERE `ID` NOT IN ($str)"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T07:19:07.430

```
$query = "SELECT * FROM photoCategories WHERE `ID` NOT IN (".join(",",$msg).")"; 
```

# c# - 如何实现类的泛型和非泛型版本？

> ID：14353066
> 
> 赞同：12
> 
> 时间：2013-01-16T07:13:30.743
> 
> 标签：c#, generics

我想实现我的泛型类的非泛型版本。像这样。

```
public class ServerSentEvent : ServerSentEvent<NoAdditionalClientInformation>

public class ServerSentEvent<ClientInfo> : IServerSentEvent 
```

为了解决这个问题，我必须创建一个虚拟/空类 - NoAdditionalClientInformation。

如果没有空类，还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T07:24:26.673

通常你会反过来做：

```
public class ServerSentEvent : IServerSentEvent
{}

public class ServerSentEvent<ClientInfo> : ServerSentEvent
{} 
```

这样，泛型版本是非泛型版本的更指定的子类型，允许您在其中放入更多信息，但可以在需要非泛型类型的任何地方使用泛型类型。

如果您按照建议进行操作，则需要指定一些*默认*类型；如果您想不出默认的，则可能是错误的顺序，但总的来说可能取决于具体情况。

# java - Java 3d 对象的 Java 序列化错误

> ID：14353071
> 
> 赞同：0
> 
> 时间：2013-01-16T07:13:56.490
> 
> 标签：java, serialization, java-3d

我已经搜索了几个帖子，但我无法让我的程序正常工作。所以这是问题----我有一个显示颜色立方体和保存按钮的类，保存按钮用于将java3d对象（此处为colorcube）保存到目标文件以供以后使用。

目标文件已创建，但除了 2-3 行外，它似乎是空的。请看一看 - -

```
public class Rotation extends Applet implements ActionListener {

//---- Attribute -----------------------
private SimpleUniverse universe;
private Canvas3D canvas3D;
private static Frame frame;
BranchGroup szene = new BranchGroup(); 
TransformGroup objDreh = new TransformGroup();
ColorCube cube = new ColorCube(0.4);

public Rotation() 
{}

public void init() {
setLayout(new BorderLayout());
JPanel panel = new JPanel();
JButton btn = new JButton("Save");
btn.addActionListener(this);
panel.add(btn);
GraphicsConfiguration config = SimpleUniverse.getPreferredConfiguration();
canvas3D = new Canvas3D(config);
add(canvas3D, BorderLayout.CENTER);
add(panel, BorderLayout.SOUTH);
szene = macheSzene();
szene.compile();
universe = new SimpleUniverse(canvas3D);
universe.getViewingPlatform().setNominalViewingTransform();
universe.addBranchGraph(szene);
}

/**
 * Erstellt den Szenegraphen
 * 
 * @return BranchGroup
 */
public BranchGroup macheSzene() {
BranchGroup objWurzel = new BranchGroup();
// Transformation, 2 Rotationen:
Transform3D drehung = new Transform3D();
Transform3D drehung2 = new Transform3D();
drehung.rotX(Math.PI / 4.0d);
drehung2.rotY(Math.PI / 5.0d);
drehung.mul(drehung2);
objDreh = new TransformGroup(drehung);
TransformGroup spin = new TransformGroup();
spin.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
spin.addChild(cube);
objDreh.addChild(spin);
objWurzel.addChild(objDreh);

// Drehung
Alpha spinAlpha = new Alpha(-1, 5000);
RotationInterpolator dreher = new RotationInterpolator(spinAlpha, spin);
BoundingSphere zone = new BoundingSphere();
dreher.setSchedulingBounds(zone);
spin.addChild(dreher);

return objWurzel;
}

/**
* gibt speicher frei
*/
public void destroy() {
universe.removeAllLocales();
}

@Override
public void actionPerformed(ActionEvent e) 
{
    try {
        writeIntoFile();
    } catch (FileNotFoundException ex) {
        Logger.getLogger(Rotation.class.getName()).log(Level.SEVERE, null, ex);
    }

}

public void writeIntoFile() throws FileNotFoundException
{
    //throw new UnsupportedOperationException("Not supported yet.");
    SerializeObject obj = new SerializeObject(cube);
    try {
        FileOutputStream out = new FileOutputStream("e://j3dObjects.xml");
        try {
            ObjectOutputStream sout = new ObjectOutputStream(out);
            sout.writeObject(obj);
            sout.close();
        } catch (Exception err)
            { err.printStackTrace(); }
    }  catch(Exception err)
    { err.printStackTrace(); }     
}

public static void main(String[] args) {
frame = new MainFrame(new Rotation(), 500, 500);
frame.setTitle("Rotation");
}

} 
```

和可序列化的类--------

```
public class SerializeObject extends ColorCube implements Serializable {

ColorCube cb;

SerializeObject(ColorCube brn)
{
    this.cb = brn;
}   
} 
```

请看一下，让我知道我在哪里做错了。还有一件事是可以将转换组写入目标文件吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:19:38.800

要序列化一个对象，它的所有字段都必须是可序列化的（这里`Colorcube`）或者它们应该被声明`transient`。请确保它`ColorCube`是可序列化的（即它实现了`Serializable`接口）以使您的代码正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:31:10.783

在对对象进行序列化时，您必须决定如何处理每个属性。这里有两个主要选项：

1）你序列化它：如果这个属性的类实现了可序列化（或者它是一个原始类型）就可以了，否则你必须编写如何序列化它的代码（实现可序列化）。

2）不要序列化这个属性，如果你不想序列化这个属性，因为它是一个临时缓存或其他什么（它不代表这个对象的状态）你可以将它标记为`transient`并且这个属性不会被序列化。在这种情况下，您不必担心如何序列化此属性，并且其类不必实现可序列化。

# perl - 无法在 Perl 中打开文本文件

> ID：14353074
> 
> 赞同：1
> 
> 时间：2013-01-16T07:14:17.007
> 
> 标签：perl, file-io

我正在从另一台服务器获取一些日志文件（txt 格式）并尝试使用我的 Perl 脚本解析它们。正确获取日志之后，我将日志目录的权限设置为 777。

在此之后，我尝试通过我的 Perl 脚本一个一个地打开日志文件进行解析。现在，奇怪的事情和发生的*问题*是，我的脚本有时能够打开文件，有时却不能。简单来说就是有时无法打开日志文件进行解析。

此外，我已经 cronned 这个 perl 脚本，当它通过 cron 而不是手动运行时，文件打开失败的可能性更大，尽管它们以前在这两种情况下都成功运行。我不明白问题出在哪里。

这是我用来打开文件的代码，

```
$inputDir = "/path/to/dir";
@inputFiles = <$inputDir/*>;

# inputFiles array is list of files in the log directory
foreach my $logFile(@inputFiles)
{
    # just to ensure file name is text
    $logFile = $logFile."";

    # process file only if filename contains "NOK"
    if(index($logFile,"NOK") > -1)
    {
        # opens the file
        open($ifile, '<', $logFile) or die "Error: Unable to open file for processing.";

        # file parsing takes place
    }
}

close($ifile); 
```

我想重申一下这段代码已经成功运行并且我没有改变它的任何部分。然而，它并非每次都运行无误，因为它有时无法打开日志文件。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T07:18:28.863

您应该在字符串中包含错误消息`$!`和文件名，以查看打开失败的*原因*以及针对哪个文件。`$logFile``die`

 *```
open($ifile, '<', $logFile) or die "Error: Unable to open $logFile: $!"; 
```

另外，这一行：

```
$logFile = $logFile.""; 
```

...是相当多余的。如果需要转换，perl 会处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:57:23.890

举个例子，你的代码应该是这样的。你可能想试试这个版本

```
use strict;
use warnings;

my $inputDir = '/path/to/dir';
my @inputFiles = <$inputDir/*>;

foreach my $logFile (grep /NOK/, @inputFiles) {
  open my $ifile, '<', $logFile or die qq(Unable to open "$logFile": $!);
  # Process data from <$ifile>;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-16T08:53:50.220

可能打开某些文件失败，因为您的程序打开的文件太多。您的程序打开*所有*文件`$inputDir`并在循环中处理它们。之后，它关闭最后打开的文件。

**编辑**：在阅读 TLP 的评论和阅读之后`perldoc -f close`，`perldoc -f open`我发现 TLP 是正确的，并且文件句柄`$ifile`被后续的`open($ifile,'<',$logFile)`. 但是，如果主题创建者未显示的文件解析代码创建对文件句柄的另一个引用，`$ifile`则该文件句柄将保持打开状态。

将调用移动`close`到`if`块中应该可以解决您的问题：

```
$inputDir = "/path/to/dir";
@inputFiles = <$inputDir/*>;

# inputFiles array is list of files in the log directory
foreach my $logFile(@inputFiles)
{

    # process file only if filename contains "NOK"
    if(index($logFile,"NOK") > -1)
    {
        # opens the file
        # added my to $ifile to keep local to this scope
        open(my $ifile, '<', $logFile) or die "Error: Unable to open file for processing.";

        # file parsing takes place

        # close current file
        close($ifile);
    }
} 
```*

# ios5 - 使用 userInfo (null) 发送到不可变对象的变异方法

> ID：14353080
> 
> 赞同：0
> 
> 时间：2013-01-16T07:14:44.760
> 
> 标签：ios5, core-data

我想通过获取所有记录来清除所有数据并一一删除：

```
- (void) clear{
    for (Program *program in [self getAllProgram]){
        [managedObjectContext deleteObject:program];
    }        
    if (![managedObjectContext save:&error])
    {
        NSLog(@"Problem deleting program: %@", [error localizedDescription]);
    }
}

- (NSArray *)getAllProgram{
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Program"inManagedObjectContext:managedObjectContext];
    [request setEntity:entity];
    NSPredicate *predicate = [NSPredicate predicateWithFormat: @"freq = %@", self.freq];
    [request setPredicate:predicate];
    // Order the events by creation date, most recent first.
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"sid" ascending:YES];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
    [request setSortDescriptors:sortDescriptors];
    [sortDescriptor release];
    [sortDescriptors release];

    NSError *error = nil;
    return [[managedObjectContext executeFetchRequest:request error:&error] mutableCopy];

} 
```

错误是

> CoreData：错误：严重的应用程序错误。在核心数据更改处理期间捕获到异常。这通常是 NSManagedObjectContextObjectsDidChangeNotification 观察者中的一个错误。-[__NSCFSet removeAllObjects]：使用 userInfo (null) 将变异方法发送到不可变对象

谁能告诉我原因或告诉我一个好的做法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:56:35.737

我想你在某处有一个获取的结果控制器。在删除期间将该控制器设置`delegate`为。`nil`我通常实际上将整个 FRC 设置为`nil`并在大数据更改后更新我的整个数据显示。

如果这不可行，请在通知处理程序中处理这种情况，例如

```
if (!userInfo) return; 
```

# svn - svn; 检测不同分支之间的缺失修订

> ID：14353085
> 
> 赞同：0
> 
> 时间：2013-01-16T07:14:55.463
> 
> 标签：svn, branch, relationship, detect, revision

有没有办法设置 SVN 分支之间的关系，以便我们可以检测是否有任何缺失的修订？

我们有多个开发人员在不同的分支（A、B、C）上工作，并且在其中一些分支（例如 A）中所做的修复需要合并/重新应用到其他分支（例如 B、C）中。在某些情况下，某个开发人员忘记在其他分支（例如 B、C）中重​​新应用修复程序，从而导致其他分支中的构建/测试失败。

试图找到一种方法（可能是实用程序、脚本）来关联各个分支，并在分支 B 或 C 中缺少应用在分支 A 中的修订时获得通知。

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:23:41.437

我参与了一个涉及非常相似的项目：根据某个参考点（通常是主干）确定分支是否缺少合并。

我不知道有什么工具可以做到这一点，但是创建一个小命令行工具应该相当容易，它可以读取`svn:mergeinfo`并比较两个分支之间的修订，以确定一个是否需要从另一个合并。在 C# 中，我会使用[SharpSvn](http://sharpsvn.open.collab.net/)库。

我不知道您的分支或合并方法是什么，但如果我需要从 合并更改`branch A`，我总是将它（和任何其他分支）分支出来`trunk`，将其更改合并回`trunk`，然后合并`trunk`到其他分支（`branch B`和`branch C`）。因此，`trunk`成为用于确定是否需要合并的参考点。如果可能的话，我会避免跨分支合并。

希望这可以帮助。

# c# - C#多态的概念

> ID：14353088
> 
> 赞同：0
> 
> 时间：2013-01-16T07:14:59.710
> 
> 标签：c#, polymorphism

下面的代码：

```
 public class Program
    {
        static void Main(string[] args)
        {
            father f = new son(); Console.WriteLine(f.GetType());
            f.show();
         }
    }

    public class father
    {
      virtual public void show()
        {
            Console.WriteLine("father");
        }
    }

    public class son : father
    {
        public override void  show()
        {
            Console.WriteLine("son");
        }
    } 
```

结果是“儿子”。
如果我将''修改为`public override void show()`' `public new void show()`'，结果是'父亲'。

所以我总结以下“规则”：

*   使用“覆盖”，将在运行时确定调用哪个函数。程序会根据当前对象的真实类型选择合适的函数。（如上，f的运行时类型是son，所以调用了son的show。）
*   使用'new'修饰符，在编译时决定调用哪个函数。程序会选择对象的声明类型来调用它的函数。（如上，f的声明类型是father，所以使用'new'修饰符使输出以显示“父亲”。

以上就是我对多态的理解。有什么误解和错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T07:25:47.450

> 使用'new'修饰符，在编译时决定调用哪个函数。程序会选择对象的声明类型来调用它的函数。（如上，f的声明类型是father，所以使用'new'修饰符使输出以显示“父亲”。

并不真地。仍然在执行时做出决定，但该`new`方法不会*覆盖*基类中的虚拟方法。通过稍微扩展您的示例可以最容易地显示这一点：

```
using System;

class Base
{
    public virtual void Foo()
    {
        Console.WriteLine("Base.Foo");
    }
}

class Derived : Base
{
    public override void Foo()
    {
        Console.WriteLine("Derived.Foo");
    }
}

class MoreDerived : Derived
{
    public new void Foo()
    {
        Console.WriteLine("MoreDerived.Foo");
    }
}

class Test
{
    static void Main()
    {
        Base x = new MoreDerived();
        x.Foo(); // Prints Derived.Foo
    }
} 
```

在这里，在*编译时*决定调用最被覆盖的实现`Base.Foo`- 例如，如果有多个`Foo`签名，将决定使用哪个签名。当然，在这一点上，哪个实现将是“最被覆盖的”是未知的。

在*执行时*，CLR 将根据目标对象的实际类型（即`MoreDerived`. 但是`MoreDerived.Foo`不会覆盖`Base.Foo`......而`Derived.Foo`确实如此，因此实现`Derived`是实际执行的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T07:17:23.077

是的，它只是这样工作......你的理解是正确的......

但是对于第二种情况，当您使用`new` intad`override`时隐藏实际实现，即父类实现

由于使用 new 关键字定义此方法，因此不调用派生类方法，而是调用基类方法。

来自 MSDN 的示例

```
// Define the base class
class Car
{
    public virtual void DescribeCar()
    {
        System.Console.WriteLine("Four wheels and an engine.");
    }
}

// Define the derived classes
class ConvertibleCar : Car
{
    public new virtual void DescribeCar()
    {
        base.DescribeCar();
        System.Console.WriteLine("A roof that opens up.");
    }
}

class Minivan : Car
{
    public override void DescribeCar()
    {
        base.DescribeCar();
        System.Console.WriteLine("Carries seven people.");
    }
} 
```

打电话给班级

```
Car[] cars = new Car[3];
cars[0] = new Car();
cars[1] = new ConvertibleCar();
cars[2] = new Minivan(); 
```

输出

```
Car object: YourApplication.Car
Four wheels and an engine.
----------
Car object: YourApplication.ConvertibleCar
Four wheels and an engine.
----------
Car object: YourApplication.Minivan
Four wheels and an engine.
Carries seven people.
---------- 
```

MSDN 有很好的例子：[**Knowing When to Use Override and New Keywords (C# Programming Guide)**](http://msdn.microsoft.com/en-us/library/ms173153%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T07:18:32.330

> 使用'new'修饰符，在编译时决定调用哪个函数。程序会选择对象的声明类型来调用它的函数。（如上，f的声明类型是father，所以使用'new'修饰符使输出以显示“父亲”。

这有点不对。Using`new`意味着这个函数不会覆盖基类的任何函数。函数调度仍然发生在运行时，但不考虑这个函数。如果您有 Grandson 或 Daughter 课程来测试更多，差异会更明显。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T07:25:28.863

普通方法由类的类型调用，虚拟方法由分配给对象的内存内容调用。现在关键字`new`隐藏了多态的概念，只关心它的类型。

# android - 在 Android 上过滤目录中的文件

> ID：14353090
> 
> 赞同：2
> 
> 时间：2013-01-16T07:15:12.597
> 
> 标签：android

在我的应用程序中，我从图库中的文件夹中获取图像并将其保存到数组列表中。现在我只想提取扩展名为 .jpg 的文件。我该怎么做

保存到数组列表的代码是

```
 private List<String> ReadSDCard()
    {
     //It have to be matched with the directory in SDCard
     File f = new File("sdcard/data/crak");

     File[] files=f.listFiles();

     for(int i=0; i<files.length; i++)
     {
      File file = files[i];
      /*It's assumed that all file in the path are in supported type*/
      tFileList.add(file.getPath());
     }
     return tFileList;
    } 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-16T07:24:02.597

您可以使用[FilenameFilter](http://developer.android.com/reference/java/io/FilenameFilter.html)接口来过滤文件。

更改您的代码行

```
File[] files=f.listFiles(); 
```

如下：

```
File[] jpgfiles = f.listFiles(new FileFilter() {
            @Override
            public boolean accept(File file)
            {
                return (file.getPath().endsWith(".jpg")||file.getPath().endsWith(".jpeg"));
            }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T07:16:55.730

使用**Java String 类**`.endsWith()`中的方法从文件路径检查文件扩展名。

 ****方法：**

```
public boolean endsWith(String suffix) 
```

您的代码类似于，

```
private List<String> ReadSDCard()
{
     //It have to be matched with the directory in SDCard
     File f = new File("sdcard/data/crak");

     File[] files=f.listFiles();

     for(int i=0; i<files.length; i++)
     {
      File file = files[i];
      /*It's assumed that all file in the path are in supported type*/
      String filePath = file.getPath();
      if(filePath.endsWith(".jpg")) // Condition to check .jpg file extension
      tFileList.add(filePath);
     }
 return tFileList;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T07:17:27.320

```
private List<String> ReadSDCard()
{

    String extension = "";
    File f = new File("sdcard/data/crak");

    File[] files=f.listFiles();

     for(int i=0; i<files.length; i++)
     {

         File file = files[i];
         int ind = files[i].getPath().lastIndexOf('.');
         if (ind > 0) {
             extension = files[i].getPath().substring(i+1);// this is the extension
             if(extension.equals("jpg"))
             {
                 tFileList.add(file.getPath());
             }
         }
     }
 return tFileList;
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-16T07:28:15.883

在您的代码中添加以下内容：

```
 String filePath = file.getPath();
          if(filePath.endsWith(".jpg")) 
          tFileList.add(filePath); 
```**

# exchange-server - 如何使用 C# 从 Microsoft Exchange 服务器获取 .msg 格式的电子邮件

> ID：14353092
> 
> 赞同：0
> 
> 时间：2013-01-16T07:15:16.433
> 
> 标签：exchange-server

我有一个要求，我需要从交换服务器的公用文件夹之一中提取“.msg”文件并将它们保存在网络路径中。

我阅读了很多关于 Exchange Web Services Managed API 的内容，但我认为没有直接的方法来获取“.msg”文件。我们可以检索“.eml”文件或分别读取主题、正文、收件人并生成“ .msg”文件。但这两个选项都不是直截了当的。

谁能建议我使用 C# 使用 .net 代码实现此目的的最佳方法。

谢谢斯里查兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:20:44.160

不确定实际文件，但您可以使用`Exchange Web API`来获取消息的文本。

[http://msdn.microsoft.com/en-us/library/exchange/dd637749(v=exchg.80).aspx](http://msdn.microsoft.com/en-us/library/exchange/dd637749(v=exchg.80).aspx)

# javascript - 在javascript中查找子项计数的递归函数

> ID：14353093
> 
> 赞同：3
> 
> 时间：2013-01-16T07:15:23.950
> 
> 标签：javascript

如何找出 JSON 对象中每个根节点 P 的子节点总数。*这不是 DOM 结构。*考虑 P2 的孩子也是 P1 的孩子，因为 P2 是 P1 的孩子。

```
P1-|-C1            (P1 children count 3)
   |-C2
   |-P2-|-C1       (P2 children count 5)
        |-C2
        |-P3-|-C1  (P3 children count 2)
             |-C2
        |-C3
        |-C4
        |-P4-|-C1   (P4 children count 2)
             |-C2 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T07:23:07.860

没有任何库或自定义代码，它相当简单。

```
//Or whatever way you want to grab a reference to the DOM node
var p1 = document.getElementById('P1');

p1.getElementsByTagName('*').length 
```

也许我误解了这个问题。这是你想要的吗？：

```
p1.childNodes.length 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T07:23:25.263

以下是使用递归[深度优先搜索的](http://en.wikipedia.org/wiki/Depth-first_search)方法：

```
function dfs(current, result) {
  var children = current.getChildren(),
      forEach = Array.prototype.forEach;
  result = result || {};
  result[current.id] = result[current.id] || 0;
  forEach.call(children, function (c) {
    result[current.id] += 1;
    dfs(c, result);
  });
  return result;
}
var result = dfs(document.getElementById('p1'));

console.log(result); 
```

该脚本使用纯 JavaScript。

示例 HTML：

```
<div id="p1">
  <div id="p2">
    <div id="p5"></div>
    <div id="p6"></div>
  </div>
  <div id="p3">
    <div id="p7"></div>
    <div id="p8"></div>
    <div id="p9"></div>
    <div id="p10">
        <div id="p11"></div>
    </div>
  </div>
  <div id="p4"></div>
</div> 
```

`result`包含：

```
p1: 3
p2: 2
p3: 4
p4: 0
p5: 0
p6: 0
p7: 0
p8: 0
p9: 0
p10: 1
p11: 0 
```

请注意，您必须拥有`id`每个元素，否则您将得到如下结果：

```
undefined: 15
p1: 5
... 
```

这是[jsfiddle](http://jsfiddle.net/CkxB3/1/)中的一个示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T08:21:51.077

这是一个小递归函数，虽然我不知道......

```
function recChildCount(node, level)
{
    level = (level || 0)++;
    var tree = {},
    i = 0;
    tree['level' + level] = {count: node.childNodes.length,
                             children: []};
    if (node.hasChildNodes() === false)
    {//dead end
        return tree;
    }
    for (i; i < node.childNodes.length; i++)
    {
        tree['level' + level].children.push(recChildCount(node.childNodes[i],level));
    }
    return tree;
} 
```

这*应该*按照以下方式返回一个对象：

```
{level1: {count: 123,
          level2: { count: 12,
                    children: [level3: { count: 16,
                                        children:[{level4:{count: 0,
                                                          children:[]},
                                                  {level4: {count: 0,
                                                            children:[]}]
                                        }
                               ]
                   }
           }
 } 
```

或者类似的东西，当然，你可以`delete tree.children;`在没有孩子的时候添加一个。
再说一次，这只是我的想法，所以这段代码可能需要一些微调，但我希望它足以帮助你

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-16T07:20:12.043

使用`jquery`插件

您可以`.length`只使用后代选择器，如下所示：

如果你必须使用`.children()`，那么它是这样的：

```
var count = $("#yourId").children().length; 
```

你只想要第一级，所以使用

```
$('#yourId > *').children().length; 
```

# iphone - 根据单元格数设置 UITableView 框架

> ID：14353095
> 
> 赞同：1
> 
> 时间：2013-01-16T07:15:29.547
> 
> 标签：iphone, uitableview

我正在从 Web 服务获取数据列表。我希望我的表格只显示包含数据的行数而不是其余的（空行）。下面提到的方法我曾经这样做，但它并不有效，它只会为非空单元格着色。任何人都可以为此指导我。

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
cell.backgroundColor = [UIColor grayColor]; 
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:47:45.537

尝试这个：

```
- (UIView *)tableView:(UITableView*)tableView viewForFooterInSection:(NSInteger*)section
{
    UIView *view=[[UIView alloc]init];
    return view;
} 
```

这不会改变框架，但会隐藏空单元格之间的线。我想你想要那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:21:24.760

尝试使用这个

-(NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section

{

```
 return array.count;

} 
```

其中数组将是您从 Web 服务获取的列表数据数组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T10:50:05.920

怎么样

```
if(arrayServ.count > 6)
{
    tableService.frame = CGRectMake(5, 20, 310, 6 * 45);
}
else
{
    tableService.frame = CGRectMake(5, 20, 310, arrayServ.count * 45);
} 
```

而不是分别处理每个案例？

此外，如果有人阅读您的问题，他可能会认为您可能想要隐藏空单元格而不是您想要调整 uitableview 的帧大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T10:09:18.220

最后我得到了解决方案，

```
-(CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section
{    
//return 172;
if([arrayServ count] == 1)
{
    tableService.frame = CGRectMake(5, 20, 310, 40);
}

if([arrayServ count] == 2)
{
    tableService.frame = CGRectMake(5, 20, 310, 85);
}

if([arrayServ count] == 3)
{
   // return 172;
    tableService.frame = CGRectMake(5, 20, 310, 130);
}

if([arrayServ count] == 4)
{
    tableService.frame = CGRectMake(5, 20, 310, 175);
}

if([arrayServ count] == 5)
{
    tableService.frame = CGRectMake(5, 20, 310, 220);
}

if([arrayServ count] == 6)
{
    tableService.frame = CGRectMake(5, 20, 310, 265);
}

if([arrayServ count] == 7)
{
    tableService.frame = CGRectMake(5, 20, 310, 310);
}

if([arrayServ count] > 7)
{
    tableService.scrollEnabled = TRUE;
}
return 0;
} 
```

# database-design - 是采用简单的数据库表方法还是考虑未来可能的需求

> ID：14353096
> 
> 赞同：3
> 
> 时间：2013-01-16T07:15:45.760
> 
> 标签：database-design, many-to-many, one-to-many, many-to-one

这是一个数据库设计问题。

有一个用户表和一个团队表

`User { ID, UserName, FirstName }`

`Team { ID, TeamName }` 现在决定，该用户只能属于一个团队，但我们的 dba 认为该用户可能属于多个团队（可能的未来需求），因此他创建了一个 UserTeam 表，希望我们对编码？

`UserTeam { User_ID, Team_ID }`

我觉得这在编码时产​​生了不必要的问题，并且数据库表不受当前要求的限制，我们应该删除桥表并在 User 表中包含一个 teamID，并担心用户以后会成为多个团队的一部分。

`User { ID, UserName, FirstName, TeamID }`

如果需求真的来自客户，您认为我的论点是否有意义并在以后更改设计？

还是坚持一般的未来主义设计并将用户限制在代码中的多个团队中是否很好？

如果它符合要求，我的论点是保持简单。* 约束内置于 db 表中。* 将来如果需要改变，我们以后会担心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:24:37.173

[雅格尼](http://c2.com/cgi/wiki?YouArentGonnaNeedIt)。除非您有令人信服的理由认为您可能需要这种灵活性，否则不要打扰。

这是试金石：从现在开始，您是否真诚地**致力于**将其打造为一流的功能？你会建立你的用户界面、表单、验证器和管理功能来假设一个用户可以在多个团队中吗？还是您打算半途而废，只是将功能放入数据库中，但让代码假装它不存在？我一直处于这个位置，你可能会做后者，在这种情况下，你并没有真正为自己节省任何时间——而且可能会浪费更多时间，如果你真的*需要*这个功能并且忘记了它有多少存在。

这只是代码。你总是可以写更多——但前提是你绝对必须这样做。

但是关于[那个“名字”列](http://www.kalzumeus.com/2010/06/17/falsehoods-programmers-believe-about-names/)......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T13:05:59.860

我既是 SQL 数据库设计师又是应用程序程序员。

现在你有这样的东西。

```
create table users (
  user_id integer primary key,
  user_name varchar(35) not null unique
);

create table teams (
  team_id integer primary key,
  team_name varchar(35) not null unique
); 
```

下表实现了每个用户最多可以是一个团队的成员的当前要求。（我假设某些用户可能不是任何团队的成员，可能只是在他们被雇用和他们报告工作的时间之间。）

```
create table team_members (
  user_id integer primary key references users (user_id),
  team_id integer not null references teams (team_id)
); 
```

当该要求发生变化时，您需要允许用户成为多个团队的成员，您只需将主键从 {user_id} 更改为 {user_id, team_id}。应用程序代码根本不必更改。（但请参阅下面的“记录分歧”。）

*您*想像这样实现团队成员资格。

```
create table users (
  user_id integer primary key,
  user_name varchar(35) not null unique,
  team_id integer null references teams (team_id)
); 
```

如果这样做，您仍应*实现*团队成员视图，并且应用程序代码应使用该视图。根据您的应用程序，您可能需要将此视图设为可更新视图。

```
create view team_members as 
select user_id, team_id 
from users; 
```

这是因为将团队成员身份放入用户表会破坏该表的谓词。它不再是一张用户表；这是一个用户表和他们的团队成员。所以“用户”这个名字是不准确的；它需要一个像“users_and_team_membership”这样的名字。（在数据的关系模型和 SQL 中，表名是变量的名称，默认情况下它们是数据库公共 API 的一部分。这里的工作原则是“不要评论坏代码。重写它。 ")

但是，无论您是修复表名还是将其保留为具有误导性的名称“users”，您都只是将一团糟变成了两团。“二”，因为 1) 一个表存储两种不同类型的数据，并且因为 2) 您要么使用准确的名称而丢失表“users”，要么使用具有误导性的名称并保留表“users”。

**记录分歧**

您还应该通过记录这种分歧来防止您的应用程序程序员做错事。像“假设用户只是一个团队的成员是未经检查的运行时错误”这样的语句就足够了。

YAGNI 在数据库设计和开发中的含义与它在应用程序开发中的含义并不完全相同。应用程序开发人员查看他们的代码并查看一个数据库。数据库设计人员查看他们的数据库，发现数十年来用数十种不同语言编写的数百个程序，他们计算了编写糟糕的公共 API 的成本。修复一个糟糕的公共 API 可能需要对数百个程序进行更改。这是*很多*钱。很多*钱*。

# iphone - 具有自定义单元格样式的 UITableView

> ID：14353100
> 
> 赞同：-3
> 
> 时间：2013-01-16T07:15:57.423
> 
> 标签：iphone, ios, uitableview

我怎样才能创建一个`UITablveVIew`这样的？

![在此处输入图像描述](../Images/c172e2cd198f6bb20b4fe66a42b05682.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:20:22.747

1.  您需要创建一个自定义`UITableViewCell`
2.  加载您需要使用的所有控件。例如在这种情况`UIButton`下`UILable`等
3.  在您的 cellForRowAtIndexPath 中，您需要根据您所在的行设置条件。
4.  对于您需要的控件，将 alpha 设置为 1。并将不需要显示的控件的 alpha 设置为 0。而且，您还可以更改它们的属性，例如更改字体`UILable`或更改图像`UIButton`

注意：要实现这种方式，`UITableView`重要的是要知道单元格的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:27:01.220

你子类`UITableViewCell`。我自己做了，这里有一些关于这个主题的很棒的链接：

[实现自定义、可重用 UITableViewCells 的最佳方式](http://blog.giorgiocalderolla.com/2011/04/16/customizing-uitableviewcells-a-better-way/)

[使用 IB 自定义 UITableViewCell](http://iphone.galloway.me.uk/iphone-sdktutorials/custom-uitableviewcell/)

IB方法非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T08:03:28.563

尝试使用自定义单元格进行此设计，并使用表格视图编辑样式在表格中添加新行。

在此处查看示例项目

[表视图示例 1](http://www.edumobile.org/iphone/iphone-programming-tutorials/how-to-add-delete-data-from-tableview-in-iphone/) [表视图示例 2](http://learn-iphone-app-development.com/2011/01/31/tables-part-iii-%E2%80%94-re-ordering-moving-cells-and-swipe-to-delete/)

希望这会帮助你

# c - 是否可以将代码块作为宏参数传递？

> ID：14353104
> 
> 赞同：7
> 
> 时间：2013-01-16T07:16:17.493
> 
> 标签：c

我想用一些样板代码包装一些代码行，所以我应该通过将多行代码作为宏参数传递来做到这一点，如下所示：

```
#define safeRun(x) if (ValidationOK()) {x} 

int main(int argc, char **argv) {
    safeRun(
        foo();
        bar();
    )
} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T07:24:58.840

如所写，您的代码将与逗号运算符发生冲突（但如前所述，函数参数列表中的逗号不会）。

假设您使用 C99，您甚至可以在宏中使用可变参数来规避这个问题：

```
#define safeRun(...) if (ValidationOK()) {__VA_ARGS__}

int main(int argc, char **argv) {
    safeRun(
        foo(a, b),
        bar(c, d);
    )
} 
```

现在，就预处理器而言，宏有 2 个参数，用逗号分隔，但可以根据需要处理它们。这是`gcc -E`输出：

```
# 1 "x3.c"
# 1 "<command-line>"
# 1 "x3.c"

int main(int argc, char **argv) {
    if (ValidationOK()) {foo(a, b), bar(c, d);}

} 
```

您提出的建议是否是一个好主意是一个单独的讨论；这些机制或多或少会使其发挥作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T07:36:14.700

正如@Potatoswatter 所说，您可以使用反斜杠：

```
#define safeRun(x) \
  [Validation code]; \
  if (ValidationOK()) \
      {x} \
  [Finishing code]; \ 
```

但是，如果您以这种方式使用它，这可能是一个问题：

```
if (x)
  safeRun(y);
else
  ... 
```

要解决问题：

```
#define safeRun(x) \
  do { \
      [Validation code]; \
      if (ValidationOK()) \
          {x} \
      [Finishing code]; \
  } while(0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T07:20:25.367

使用该`\`字符在宏定义中“转义”换行符。使用可变参数宏参数来支持包含代码行的参数内的逗号。（此功能是 C99 的一部分，但也存在于许多不兼容的编译器中。）

```
#define safeRun(...) \
[Validation code]; \
if (ValidationOK()) \
    {__VA_ARGS__} \
[Finishing code]; \
/* bumper line to support last backslash, leave empty! */ 
```

请注意，反斜杠和换行符之间不能有空格。

标准警告：宏是最泄漏的封装形式；如果可能，请使用任何其他构造。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T07:30:21.467

由于多种原因，类似函数的宏非常糟糕。解决这个问题的更好方法是使用实​​函数。

```
start_safe();
  foo();
  bar();
stop_safe(); 
```

# windows - 在 Windows 7 32 位上设置 Teradata 数据库

> ID：14353105
> 
> 赞同：0
> 
> 时间：2013-01-16T07:16:32.493
> 
> 标签：windows, installation, teradata

我想开始使用 Teradata 数据库，为此我需要在我的系统上进行设置。经过大量搜索后，我没有找到任何可用于在 Windows 机器上安装它的设置。我找到的唯一链接是[http://www.teradata.com/teradata-express-13-0-windows/](http://www.teradata.com/teradata-express-13-0-windows/)这个链接，但此页面上没有下载链接。我还在此链接[http://downloads.teradata.com/download/database/teradata-express/vmware](http://downloads.teradata.com/download/database/teradata-express/vmware)上找到了在 64 位 Windows 上使用 Teradata 的 VMware 版本，但我不知道如何在下载后使用 VMware 安装它设置。

请提供一些关于使用 VmWare 在 32 个窗口或 64 个窗口上安装 Teradata 的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:21:46.863

您是否阅读过有关 Teradata 开发人员交流的这篇文章？它应该涵盖启动和运行 VMware 环境的基础知识。

[http://developer.teradata.com/database/articles/introduction-to-teradata-express-for-vmware-player](http://developer.teradata.com/database/articles/introduction-to-teradata-express-for-vmware-player)

您可能希望更改 SLES 的运行级别以引导到命令行而不是 Gnome 桌面，以减少 VM 的内存占用。您还需要将 4GB 的 RAM 专用于 VM。

# java - 以另一种形式使用 Java DB 连接

> ID：14353107
> 
> 赞同：0
> 
> 时间：2013-01-16T07:16:40.373
> 
> 标签：java, sqlite, sqlitejdbc

我在 Java 中创建了一个简单的 Java 连接脚本来连接到如下所示的数据库。

```
import java.sql.*;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;

public class dbconn {

public static void main(String[] args) throws ClassNotFoundException
{

Class.forName("org.sqlite.JDBC");

Connection connection = null;  
try
{
  // create a database connection
  connection = DriverManager.getConnection("jdbc:sqlite:C:/Program Files (x86)/Spiceworks/db/spiceworks_prod.db");
  Statement statement = connection.createStatement();
  statement.setQueryTimeout(30);  // set timeout to 30 sec.                  
}
catch(SQLException e)
{
  // if the error message is "out of memory", 
  // it probably means no database file is found
  System.err.println(e.getMessage());
}
finally
{
  try
  {
    if(connection != null)
        connection.close();

  }
  catch(SQLException e)
  {
    // connection close failed.
    System.err.println(e);
  }
}
}
} 
```

现在我已经通过 dbconn 脚本中的一些 SQL 查询测试了这个连接，它可以工作。

但是我的问题是，我如何将这个数据库实例调用到同一个项目中的另一个表单中来执行相同的 SQL 查询，这些查询是：

```
 ResultSet resultSet = null;  

  resultSet = statement.executeQuery("SELECT * FROM users");  
     while (resultSet.next()) 
     {  
         System.out.println("EMPLOYEE Email: " + resultSet.getString("email"));  
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T07:27:28.177

您可以保留和重用`Connection`，可能将其保存在某个静态字段中。如果你从多个线程访问它，SQLite 必须在[Serialized 模式下](http://www.sqlite.org/threadsafe.html)工作。如果由于某种原因丢失了连接，您必须在某处有代码才能重新建立连接。

如果使用`Connection`不重，也可以有一些方法，在不再需要时打开并关闭，最好在`finally`块内。

# windows-phone-8 - Windows phone 8 性能进度条

> ID：14353113
> 
> 赞同：7
> 
> 时间：2013-01-16T07:17:11.790
> 
> 标签：windows-phone-8

我需要在 windows phone 8 中使用性能进度条吗？在我的 windows phone 7/7.5 应用程序中，我使用了工具包附带的进度条（性能进度条）。是否有必要在 windows phone 8 中使用相同的或简单的进度条就足够了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T10:25:50.090

WP8 SDK 现在包含改进的进度条。所以只用这个。TK 版本在 WP8 上无法正常工作。

在此处查看 SDK 的更改，包括关于进度条的一句话：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/jj206940%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206940%28v=vs.105%29.aspx)

在此处查看有关该主题的讨论：http: [//social.msdn.microsoft.com/Forums/en-GB/wpdevelop/thread/dd457734-a11a-48e2-8443-ba8f5e3f67ac](http://social.msdn.microsoft.com/Forums/en-GB/wpdevelop/thread/dd457734-a11a-48e2-8443-ba8f5e3f67ac)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T22:24:44.167

使用 WP8 SDK 的进度条，但不要忘记在收起进度条后设置 IsIndeterminate = false。即使它崩溃了，它也会在后台运行并使用电池和 UI 线程周期！:(

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-12T09:46:26.173

我认为在使用链接文件定位 WP7 和 WP8 时，你应该使用这样的东西：

```
#if WP8
    public class MyPerformanceProgressBar : ProgressBar
    {

    }
#else
    public class MyPerformanceProgressBar : Microsoft.Phone.Controls.PerformanceProgressBar
    {

    }
#endif 
```

并在您的 XAML 代码中使用该类`MyPerformanceProgressBar`（在 WP7 和 WP8 项目中链接）。

# spring - 如何正确获取 src/groovy 中的“messageSource”？

> ID：14353119
> 
> 赞同：2
> 
> 时间：2013-01-16T07:17:22.107
> 
> 标签：spring, grails, internationalization

我需要`messageSource`在`src\groovy`. 这个类在 中使用`UrlMappings.groovy`，在我使用这个类的阶段，应用程序还没有完全启动。

目前我正在使用以下内容并且它有效：

```
MessageSource messageSource = ApplicationHolder.application.mainContext.getBean('messageSource')
String message = messageSource.getMessage("code", null, "default", locale) 
```

但是`ApplicationHolder`不推荐使用，有没有办法在不使用的情况下实现相同的目标`ApplicationHolder`？

//我使用的是 Grails 2.0.1

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-06T21:56:08.663

根据我有限的经验，我发现获得`messageSource`POGO 的最简单方法很简单：

```
Holders.applicationContext.getBean("messageSource") 
```

我尝试过的其他方法（实现`MessageSourceAware`或添加`@Component`/`@Autowired`注释）导致了其他并发症。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T08:08:06.250

尝试这个：

```
grails.util.GrailsWebUtil.currentApplication().mainContext.messageSource 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T14:05:55.067

推荐的方式似乎是[http://burtbeckwith.com/blog/?p=1017](http://burtbeckwith.com/blog/?p=1017)

即创建一个单例bean，在`src/groovy`其中实现`ApplicationContextAware`，然后配置它的`factoryMethod`属性`grails-app/conf/spring/resources.groovy`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-04-25T16:28:38.133

我从不喜欢使用 Holders、GrailsWebUtil 等正在做的 Singletons。相反，您可以通过执行以下操作将 grailsApplication 注入您的服务：

```
class SomeService {
   def grailsApplication
   ...
} 
```

然后使用它来获取呈现的消息：

```
String message = grailsApplication.mainContext.getMessage(err, Locale.getDefault()). 
```

Viola 获取任何 FieldError、ObjectError 或代码并从中呈现消息。

# xml - 使用 libxml2 在 XML 根元素中查找子节点的数量

> ID：14353124
> 
> 赞同：0
> 
> 时间：2013-01-16T07:17:30.997
> 
> 标签：xml, xml-parsing, libxml2

给定一个 XML

```
<root>
<node1></node1>
<node1></node1>
<node1></node1>
<node1></node1>
<node1></node1>
</root> 
```

我想使用 libxml2 查找具有标签名称 node1 的孩子的数量

```
xmlNode  *root = NULL;
root = xmlDocGetRootElement(doc); 
```

我不想迭代每个子节点并计算节点数直到 NULL

我想知道是否有任何可用的函数可以应用于 root 以查找具有名称标签 node1 的子节点的数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:28:36.583

您可以使用 XPath API

[http://www.xmlsoft.org/tutorial/ar01s05.html](http://www.xmlsoft.org/tutorial/ar01s05.html)

评估 XPath`count(/root/node1)`

# assembly - 一个 8086 汇编语言程序，用于计算任意 n 个数字之和的平均值

> ID：14353129
> 
> 赞同：1
> 
> 时间：2013-01-16T07:17:47.833
> 
> 标签：assembly, masm

如何编写 8086 汇编语言程序来计算任何`n`数字的平均值？我写了两个程序。一个使用`mov ah,01 int 21h`输入函数，因此它只接受一个数字。出于这个原因，我不能输入像 10 这样的数字。

我从另一个缓冲区中读取。它可以接受很多数字，但问题是它不断循环。

这是第一个程序：

```
.MODEL SMALL
.DATA
        VAL1    DB      ?
        NL1     DB      0AH,0DH,'ENTER HOW MANY NO U WANT:','$'
        NL2     DB      0AH,0DH,'ENTER NO:','$'
        NL3     DB      0AH,0DH,'AVEARGE:','$'
.CODE
MAIN    PROC
        MOV AX,@DATA
        MOV DS,AX

        LEA DX,NL1
        MOV AH,09H
        INT 21H

        MOV AH,01H
        INT 21H
        SUB AL,30H

        MOV CL,AL
        MOV BL,AL
        MOV AL,00
        MOV VAL1,AL

LBL1:
        LEA DX,NL2
        MOV AH,09H
        INT 21H

        MOV AH,01H
        INT 21H
        SUB AL,30H

        ADD AL,VAL1
        MOV VAL1,AL
        LOOP LBL1

LBL2:
        LEA DX,NL3
        MOV AH,09H
        INT 21H

        MOV AX,00
        MOV AL,VAL1
        DIV BL
        ADD AX,3030H
        MOV DX,AX
        MOV AH,02H
        INT 21H

        MOV AH,4CH
        INT 21H

MAIN    ENDP
        END     MAIN 
```

这是第二个：

```
TITLE "THIS PROGRAM CALCULATES ANY N NUMBER OF STUDENT AVERAGE SCORES"

.MODEL SMALL
.DATA
        VAL1         DB      ?
        DISPLAY1     DB      0AH,0DH,'HOW MANY NUMBER OF STUDENT SCORES DO YOU WANT TO INPUT? :','$'
        DISPLAY2         DB      0AH,0DH,'ENTER NO:','$'
        DISPLAY3         DB      0AH,0DH,'AVEARGE:','$'
    BUFFER       DB      3,4 DUP(?)
.CODE
MAIN    PROC

.STARTUP

        LEA DX,DISPLAY1 ; loads the message in the variable display 1
        MOV AH,09H  ; interrupt function to display the message
        INT 21H

        MOV AH,0AH  ; Read into buffer
    INT 21H
    SUB AL,30H

    MOV CL,AL
    MOV BL,AL   ; moves the content of al to bl register
        MOV AL,00   ; sets the value of al to zero, the value of al is now in bl register
        MOV VAL1,AL ; stores al in val1 NB: al is still zero.

LBL1:
        LEA DX,DISPLAY2 ; displays message in display 2
        MOV AH,09H
        INT 21H

        MOV AH,0AH  ;Read into buffer
    LEA DX,BUFFER
    INT 21H
    SUB AL,30H

        ADD AL,VAL1 ; add val1 to al i.e, it now adds the previous value to the new one.
        MOV VAL1,AL ; saves the added value to val 1.
        LOOP LBL1   ; continues too add.

LBL2:
        LEA DX,DISPLAY3 ; displays character in display 3
        MOV AH,09H
        INT 21H

        MOV AX,00   ; sets ax value back to 00
        MOV AL,VAL1 ; moves the total value back to al
        DIV BL      ; divides the total value with the inputed number of values tht was stored in bl
        ADD AX,3030H    ;  convert to ASCII
        MOV DX,AX   ; now moves the content of ax register to data register
        MOV AH,09H  ; this displays the result
        INT 21H

.EXIT

MAIN    ENDP
        END     MAIN 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:14:42.780

您似乎对`int 21h/0Ah`. 第一次这样做时，您没有设置`dx`任何合理的缓冲区。您的输入将在您的提示下乱写（可能不会造成太大伤害）。在循环内部，您确实设置`dx`了正确的缓冲区。但是当`int 21h/0Ah`返回时，你使用`al`它就好像它很有用（两次）。我已经很久没有做dos了，但我记得那`al`将是输入的最后一个字符——几乎可以肯定是“输入”键——我认为是13或0Dh。

返回时`int 21h/0Ah`，缓冲区 ( `buffer + 1`) 中的第二个字节将是输入的字符数。我记得，这将包括“输入”键。您可能希望检查此值以查看需要多少个字符才能“转换”为数字。输入的字符（1 或 2）将从 开始`buffer + 2`。这些是您要转换为数字的字符 - 第一个字符 -'0' 乘以 10 + 第二个字符 -'0'。如果只有一个，或者只是字符 -'0'。

当您尝试打印结果时，您可以通过`add ax, 3030h`. 然后将此值移动到`dx`. `int 21h/9`需要一个指向 . 中以 $ 结尾的字符串的指针`dx`。这不是你所拥有的！要么将这两个字符移动到缓冲区并用'$'终止它，要么一次打印一个......我曾经喜欢那个 hokey `int 29h`，但你最好使用可以打印的东西标准输出（`int 29h`进入屏幕，无法重定向）。也许像...

 `````
...
add ax, 3030h
mov dx, ax
mov ah, 2
xchg dl, dh ; print dh first, then dl
int 21h
xchg dl, dh
int 21h ; I think ah is still okay here...
... 
```` 

`在进入你的循环之前`LBL1:`，你设置`cl`为......某事（我认为这是不对的）。`ch`“可能”是 xero，但我会确定！`

 `这一切都未经测试，“来自记忆”......我可能记错了，但它应该让你更接近一点（我希望）......

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2019-09-24T08:19:30.143

```
DATA SEGMENT 
  ONENO DW 04h
  SECONDNO DW 08h
  SUM DB 00h
  AVG DB 00h
ENDS    
CODE SEGMENT
ASSUME DS:DATA CS:CODE
    START:
        MOV AX,DATA
        MOV DS,AX
        MOV AX,00
        MOV AX,ONENO
        ADD AX,SECONDNO
        MOV SUM,AL
        MOV BL,02
        DIV BL
        MOV AVG,AL
     CODE ENDS
END START 
`````

# php - php 标头位置与 php_redirect

> ID：14353130
> 
> 赞同：5
> 
> 时间：2013-01-16T07:18:03.963
> 
> 标签：php, function, redirect, location

`"HTTP_redirect"`函数和`"header location"`PHP有什么区别？

我什么时候必须使用该功能`"HTTP_redirect"`？

我什么时候必须使用该功能`"header location"`？

看看： [https://php.net/manual/en/function.http-redirect.php](https://php.net/manual/en/function.http-redirect.php) --> HTTP_redirect 手册 [https://php.net/manual/en/function.header.php](https://php.net/manual/en/function.header.php) --> 手册函数头

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T07:28:47.787

`http_redirect`基本上是一个辅助函数，`header location`通过允许您为 GET 数据传递数组来使其更易于使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T07:34:47.350

1.  [PHP 中的标头](https://php.net/manual/en/function.header.php)

header() 函数将原始 HTTP 标头发送到客户端。

```
<?php
header("HTTP/1.0 404 Not Found");
?> 
```

以上（取自 PHP 文档）将 404 标头发送回客户端。

2.  [HTTP 重定向](https://php.net/manual/en/function.http-redirect.php)

重定向到给定的 url。

```
<?php
http_redirect("relpath", array("name" => "value"), true, HTTP_REDIRECT_PERM);
?> 
```

以上（取自PHP文档）：输出

```
HTTP/1.1 301 Moved Permanently
X-Powered-By: PHP/5.2.2
Content-Type: text/html
Location: http://www.example.com/curdir/relpath?name=value&PHPSESSID=abc

Redirecting to <a href="http://www.example.com/curdir/relpath?name=value&PHPSESSID=abc">http://www.example.com/curdir/relpath?name=value&PHPSESSID=abc</a>. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T07:27:17.823

Header 将用户转发到一个新页面，因此 PHP 重新初始化，这就像 HTML 元重定向，但速度更快。

# c++ - Boost 无法打开文件“libboost_filesystem-vc100-mt-gd-1_47.lib”

> ID：14353137
> 
> 赞同：4
> 
> 时间：2013-01-16T07:18:21.187
> 
> 标签：c++, boost, boost-filesystem

我已经连续几个小时在谷歌上搜索了这个错误，但在任何地方都没有得到太多。我已经在我的 Visual Studios（2010 和 2012）项目中链接了该项目，因为这似乎解决了其他所有人的类似问题。但是，我仍然无法从 boost 的网站上获取我的示例代码并继续出现该错误。文件 libboost_filesystem-vc100-mt-gd-1_47.lib 在我的 C:\Program Files (x86)\boost\boost_1_47\lib 路径中。这是我正在尝试测试并启动和运行的代码。

```
#include <iostream> 
#include <boost/filesystem.hpp>
using namespace boost::filesystem;

int main(int argc, char* argv[])
{
   if (argc < 2)
   {
      std::cout << "Usage: tut1 path\n";
      return 1;
   }
   std::cout << argv[1] << " " << file_size(argv[1]) << '\n';
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-25T10:08:41.097

进入：

```
[boost_path]\stage\lib 
```

在设置`Linker->General->Additional Library`目录下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-16T16:26:27.973

我有同样的错误，我跟着[SourceForge](http://sourceforge.net/projects/boost/files/boost-binaries/1.47.0/)。该链接将带您到压缩 lib 和 dll 文件的文件夹以获取 boost 版本。您可以下载并解压缩相关库，当将其复制到相关位置时，一切都会好起来的；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T07:51:18.313

正如 SChepurin 所提到的，可能是您没有将 boost 的路径添加到 Linker->Additional Library Directories。

也可能是您尝试针对 x64 目标进行编译，而鉴于您的 boost 库的安装路径，您的系统上只安装了 32 位 boost 库，因此应该切换到 x86 目标或获得 64 位boost 库，如果你可以使用比 1.47 更近的版本，你可以从 Boost 1.50 中找到二进制版本，否则你必须自己编译它们（有关更多信息，请参阅 boost 官方文档）

最好的

# c# - 防止在卸载过程中删除文件夹

> ID：14353139
> 
> 赞同：0
> 
> 时间：2013-01-16T07:18:21.780
> 
> 标签：c#, winforms, installation, windows-installer

是否有任何可能的方法来防止文件夹中的文件在重新安装期间被删除或覆盖？我有一个文件夹，其中存储了一些用于发送用户可以编辑的邮件的模板。我在我的设置中添加了基本模板，因此在重新安装期间它会删除用户可能已经编辑过的模板并放置模板的新副本.如何防止这种情况发生？我应该使用`installer class`还是有任何可以使用的属性？请指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:16:24.930

看：

[文件版本控制规则 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368599%28v=vs.85%29.aspx)

尤其：

[两个文件都没有版本 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370531%28v=vs.85%29.aspx)

您正在使用一种工具，该工具使每个文件都成为其自身组件的关键文件。因此，您应该已经获得了这种默认行为。如果您设置永久，它们不应该被删除。你说使用“可以”修改这些文件。行为是，如果他们没有修改文件，他们将被覆盖，如果他们修改了文件，他们不会。

但是，IMO，更好的模式是拥有一个覆盖目录，用户可以将模板复制到并修改。您可能会因以下冲突而导致升级出现不良行为：1）我的新版本修复了一些问题，2）我无法安装它，因为旧的东西有用户数据。对于像 XML 文件这样的东西尤其如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:56:15.387

![在此处输入图像描述](../Images/60eda94aa8ddcd361abf4fe9cff019aa.png)

这可以通过选择文件属性并将permanent 的值设置为true 来完成。

# api - Google 地图 API 无法在我的网站上运行

> ID：14353145
> 
> 赞同：0
> 
> 时间：2013-01-16T07:18:36.937
> 
> 标签：api, google-maps

```
 <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=MYKEYHERE&sensor=false">
    </script>
    <script type="text/javascript">

var simplerweb = new google.maps.LatLng(55.977046,-3.197118);
var marker;
var map;

      function initialize() {
        var myOptions = {
          center: new google.maps.LatLng(55.977046,-3.197118),  
          disableDefaultUI: true,
          zoom: 15,
           scrollwheel: false,
    navigationControl: false,
    mapTypeControl: false,
    scaleControl: false, 
    draggable: false,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            myOptions);
  marker = new google.maps.Marker({
    map:map,
    draggable:true,
    animation: google.maps.Animation.DROP,
    position: andrewmorris,
    icon: 'http://www.andrewsmorris.co.uk/images/point.png' 
  });
  google.maps.event.addListener(marker, 'click', toggleBounce);
}

function toggleBounce() {

  if (marker.getAnimation() != null) {
    marker.setAnimation(null);
  } else {
    marker.setAnimation(google.maps.Animation.BOUNCE);
  }
}

    </script> 
```

所以我不明白为什么这在我的新网站上不起作用，在我的旧网站上运行良好。

我倾倒在一个名为 map_canvas 的 div 中

它应该有效，对吧？谷歌地图 API 设置为允许来自该 URL 的引荐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:34:11.150

只要您拥有正确的密钥，它就应该可以正常工作。

您是否仔细检查过您是否在 html 正文中调用了**initialize() ，例如**

```
<body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
</body> 
```

您的标记图像的链接也已失效。

# ruby-on-rails - 如何循环rails变量？

> ID：14353148
> 
> 赞同：2
> 
> 时间：2013-01-16T07:18:50.257
> 
> 标签：ruby-on-rails

我在导轨上总共有九个按钮。我已经通过手动输入`@button_1.save`函数将数据输入数据库。

**我的问题是：**

我怎样才能在 Rails 中使用 @button_i.save 功能？我已经完成了for循环中的东西，剩下的就是按钮保存功能。

非常感谢！

```
 button_number = params[:button_number]

      for i in (1..button_number)
         instance_variable_set("@button#{i}", 
                               Button.new(:title => params["button_title_#{i}".to_sym], 
                               :order => i, 
                               :icon_url => params["button_icon_#{i}".to_sym], 
                               :navigation_id => @navigation.id, 
                               :next_navigation => params["selected_navigation_#{i}".to_sym].to_i, 
                               :next_page => params["selected_page_#{i}".to_sym].to_i))
         instance_variable_set("@button#{i}")
      end

      @button1.save
      @button2.save
      @button3.save
      @button4.save
      @button5.save
      @button6.save 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:41:00.293

`instance_variable_set`is的反面`instance_variable_get`，我认为这会引导你找到正确的答案：

```
1.upto(params[:button_number].to_i) do |i|
  instance_variable_set("@button#{i}", 
    Button.new(
      :title => params["button_title_#{i}".to_sym], 
      :order => i, 
      :icon_url => params["button_icon_#{i}".to_sym], 
      :navigation_id => @navigation.id, 
      :next_navigation => params["selected_navigation_#{i}".to_sym].to_i, 
      :next_page => params["selected_page_#{i}".to_sym].to_i
    )
  )
  instance_variable_get("@button#{i}").save
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T07:41:09.183

```
for i in ...
  eval("@button#{i}.save")
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T07:27:12.930

尝试使用`constantize`ruby​​ 函数，因为我认为您的函数调用语句是字符串。

```
button_number = params[:button_number]

      for i in (1..button_number)
         instance_variable_set("@button#{i}", 
                               Button.new(:title => params["button_title_#{i}".to_sym], 
                               :order => i, 
                               :icon_url => params["button_icon_#{i}".to_sym], 
                               :navigation_id => @navigation.id, 
                               :next_navigation => params["selected_navigation_#{i}".to_sym].to_i, 
                               :next_page => params["selected_page_#{i}".to_sym].to_i))
        "@button#{i}".constantize.save();
      end 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-16T07:30:58.340

可能是你想要的——

```
button_number = params[:button_number].to_i

for i in (1..button_number)
             instance_variable_set("@button#{i}", 
                                   Button.new(:title => params["button_title_#{i}".to_sym], 
                                   :order => i, 
                                   :icon_url => params["button_icon_#{i}".to_sym], 
                                   :navigation_id => @navigation.id, 
                                   :next_navigation => params["selected_navigation_#{i}".to_sym].to_i, 
                                   :next_page => params["selected_page_#{i}".to_sym].to_i))
             instance_variable_set("@button#{i}")

      "@button#{i}".save

      end 
```

# php - 删除查询应在会话自动销毁后执行

> ID：14353152
> 
> 赞同：2
> 
> 时间：2013-01-16T07:19:13.720
> 
> 标签：php, mysql, session

我在会话销毁方面遇到问题。我正在该文件中运行一个名为 logout.php 的脚本，我正在破坏用户会话，我正在执行一个查询，该查询将删除我的购物袋。这工作正常，但是当我关闭浏览器或会话在某个时间后自动销毁时，那时我必须删除我的购物袋，当然在这种情况下 logout.php 不会调用。那么我怎样才能做到这一点。

注销.php :-

```
<?php
include_once('functions/config.php');
session_start();

$sql = "DELETE FROM baskets WHERE member_id = '".$_SESSION['memid']."' ";

mysql_query($sql);

session_destroy();   

header('location:index.php')

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:25:35.237

没有办法编写可以安全地假设它在会话被销毁时调用的代码。

做你想做的最简单的方法是在你的购物篮上设置一个“最后访问”的时间戳，你每次访问都会更新，然后每隔一小时左右运行一个 cron 作业（计划的作业），以删除所有尚未访问的购物篮比方说，6 小时或更长时间。这不会在会话超时的同时将其删除，但从长远来看会将旧篮子保留在数据库之外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T09:29:20.940

对于这个问题，我有两个答案：1）您可以使用 javascript 事件 window.onbeforeunload 示例清除您的购物袋：

```
 window.onbeforeunload= function(){
        // your ajax call to clear shopping bag
     } 
```

2）我会推荐这个选项：您可以在他登录时清除用户购物袋。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T07:25:11.703

您确定要在（例如）用户浏览器关闭时清理购物袋吗？您可以发出警告，例如“您上次没有正确注销，您想继续购物还是重新开始？” ，类似的东西。

HTTP 是一种无状态协议，因此您无法判断浏览器何时真正关闭。在我看来，您需要处理会话超时，以便在经过一段时间后，购物袋无论如何都会被清除，除非仍有用户活动。

希望有帮助。

# java - 如何使用java同步对文件夹的访问？

> ID：14353153
> 
> 赞同：3
> 
> 时间：2013-01-16T07:19:27.690
> 
> 标签：java, multithreading

情况如下在我的应用程序中我有 2 个并行运行的线程，其中一个线程的目的是捕获屏幕截图，第二个线程的目的是重命名第一个线程保存在特定文件夹中的屏幕截图线程-应用程序的代码如下-：

***CapturingAndRenamingSimultaneously.java***

```
/**
 * Created with IntelliJ IDEA.
 * User: AnkitSablok
 * Date: 15/1/13
 * Time: 1:03 PM
 * To change this template use File | Settings | File Templates.
 */

package com.tian.screenshotcapture;

import java.io.File;
import java.io.IOException;
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.LinkedBlockingQueue;

public class CapturingAndRenamingSimultaneously {
    public static void main(String[] args) {

        // we use the linked blocking queue here to resolve the concurrency issues
        final BlockingQueue<File> queue = new LinkedBlockingQueue<File>(1024);

        new Thread(new Runnable() {
            @Override
            public synchronized void run() {
                try {
                    System.out.println("In the capture thread now");
                    CaptureScreenshots.captureScreenshots(queue);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }).start();

        new Thread(new Runnable() {
            @Override
            public synchronized void run() {
                try {
                    while (true) {
                        System.out.println("In the rename thread now");
                        RenameScreenShots.renameScreenshots(queue);
                        Thread.sleep(5000);
                    }

                } catch (IOException e) {
                    e.printStackTrace();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }).start();
    }
} 
```

***CaptureScreenshots.java***

```
/**
 * Created with IntelliJ IDEA.
 * User: AnkitSablok
 * Date: 15/1/13
 * Time: 12:35 PM
 * To change this template use File | Settings | File Templates.
 */

// this code is used to capture the screenshots

package com.tian.screenshotcapture;

import java.awt.Dimension;
import java.awt.Rectangle;
import java.awt.Robot;
import java.awt.Toolkit;
import java.awt.image.BufferedImage;
import javax.imageio.ImageIO;
import java.io.File;
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.LinkedBlockingQueue;

public class CaptureScreenshots {

    // this code is used to capture the screen shots
    public static void captureScreenshots(BlockingQueue<File> queue) throws Exception {

        String fileName = "C:\\Users\\ankitsablok\\Desktop\\Screenshots";
        int index = 0;

        for (; ; ) {
            ++index;
            Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
            Rectangle screenRectangle = new Rectangle(screenSize);
            Robot robot = new Robot();
            BufferedImage image = robot.createScreenCapture(screenRectangle);
            ImageIO.write(image, "jpg", new File(fileName + "\\i" + index + ".jpg"));
            queue.put(new File(fileName + "\\i" + index + ".jpg"));

            Thread.sleep(1000);
        }
    }

} 
```

***重命名屏幕截图.java***

```
/**
 * Created with IntelliJ IDEA.
 * User: AnkitSablok
 * Date: 15/1/13
 * Time: 12:49 PM
 * To change this template use File | Settings | File Templates.
 */

package com.tian.screenshotcapture;

import java.io.*;
import java.util.concurrent.BlockingQueue;

public class RenameScreenShots {
    public static void renameScreenshots(BlockingQueue<File> queue) throws IOException, InterruptedException {

        for (int i = 0; i < queue.size(); ++i) {

            File sourceFile = queue.take();
            System.out.println("The filename is : " + sourceFile.getName());

            if (sourceFile.getName().contains("sent")) {
            } else {
                System.out.println("The modified name of the source file is :" + sourceFile.getName().substring(0,
                        sourceFile.getName().indexOf('.'))
                        + "sent" + ".jpg");

                File newFile = new File(sourceFile.getParent() + "/" + sourceFile.getName().substring(0,
                        sourceFile.getName().indexOf('.'))
                        + "sent" + ".jpg");

                byte[] buffer = new byte[1024];

                FileInputStream fis = new FileInputStream(sourceFile);
                FileOutputStream fos = new FileOutputStream(newFile);

                int length;

                while ((length = fis.read(buffer)) > 0) {
                    fos.write(buffer, 0, length);
                }

                System.out.println("The file was deleted successfully : " + sourceFile.delete());

                fis.close();
                fos.close();
            }
        }
    }

} 
```

我希望同步对文件夹的访问，即当一个进程将图像写入文件夹之后，另一个进程应该能够重命名文件夹中的图像。但是我无法同步对写入和读取屏幕截图的文件夹的访问，在某些时候使用上面的代码会给出 FileNotFoundException 错误，其他进程正在使用该文件。我该如何解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:29:56.400

在两个线程之间创建一个共享队列`LinkedBlockingQueue`。

从`CaptureScreenshots`放入此队列的线程中新创建的`File`对象。

`RenameScreenShots`从该队列中顺序读取准备好的`File`对象并处理它们的线程。

**UPD：**如果你担心数十亿的图像文件会被它们的描述符占用大量内存`File`，你可以应用这样的算法增强：

1.  在包含您的图像文件的文件夹中创建子文件夹，并将图像文件放入该子文件夹中。

2.  用整数名称命名这些子文件夹：`1`, `2`, `3`, ... , `89`.

3.  人为地限制每个子文件夹中的文件数量。当文件数量达到限制时，只需增加子文件夹的名称编号，创建一个新的并继续。

4.  与其将`File`每个图像文件的描述符`LinkedBlockingQueue`放到 中，不如将其放入`Integer`对象中，其中每个对象将对应于具有相同名称的填充子文件夹。

5.  在`RenameScreenShots`取新元素 from`LinkedBlockingQueue`中，将此元素视为子文件夹名称并处理此子文件夹中的所有文件。

**UPD-2**我中介绍的方案`UPD-1`可以更容易地使用`synchornized`某个整数值的共享 getter 来实现，这将对应于已处理子文件夹的最后一个数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T07:39:21.997

也许您可以尝试文件锁定。每个文件都可以是一个文件锁。

```
RandomAccessFile file = new RandomAccessFile(some_file, "rw");
FileChannel fc = file.getChannel();
FileLock lock = fc.tryLock();
....
lock.release() 
```

当您将 screanshot 写入 A.shot 等文件时，您会创建文件 A.shot，并持有 A.shot 的文件锁，然后将数据写入其中。文件完成后，释放文件锁。

重命名过程应该首先尝试获取文件锁，如果成功，然后进行重命名工作。如果无法获得文件锁（因为写线程尚未释放锁），则等待。

希望它有用。:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T07:22:15.020

如果动作是同步的，也就是说它们是连续运行的，那么你真的不应该有两个单独的线程。

在同一个线程中按顺序写入和重命名，并消除同步的需要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T07:23:38.180

为什么你没有[Mutex](https://stackoverflow.com/questions/771347/what-is-mutex-and-semaphore-in-java-what-is-the-main-difference)并基于 Mutex 控制访问文件夹的线程的行为？

# jquery-ui - 将子元素排除在 jQuery 可选之外？

> ID：14353155
> 
> 赞同：0
> 
> 时间：2013-01-16T07:19:34.023
> 
> 标签：jquery-ui

是否可以排除某些子元素被选中？现在，当我将某些内容标记为可选时，它会使所有内容都嵌套在 a 之下，`selectee`这有点烦人。我当然可以看到解决方法，但这是相当多的工作，如果可能的话，我会尽量避免它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T02:12:47.440

初始化时需要使用过滤器选项。例如，如果选择对象是 li 元素，则使用以下内容：

```
$( ".selector" ).selectable({ filter: "li" }); 
```

# objective-c - RestKit：JSON 映射不起作用 Objective-c

> ID：14353160
> 
> 赞同：0
> 
> 时间：2013-01-16T07:19:51.970
> 
> 标签：objective-c, web-services, restkit

我使用 RestKit 框架连接到一个 REST Web 服务。如果我想要 resultlistEntries，映射应该是什么样子。我有这样的 JSON 响应：

```
{
"resultlist.resultlist": {
    "paging": {
        "numberOfHits": 69978,
        "numberOfPages": 3499,
        "pageNumber": 1,
        "pageSize": 20
    },
    "resultlistEntries": [
        {
            "@numberOfHits": "69978",
            "@realEstateType": "7",
            "resultlistEntry": [
                {
                    "@creation": "2013-01-15T16:36:00.000+01:00",
                    "resultlist.realEstate": {
                        "@id": "68014527",
                        "@xsi.type": "search:Office",
                        "calculatedPrice": {
                            "currency": "EUR",
                            "marketingType": "RENT_PER_SQM",
                            "priceIntervalType": "MONTH",
                            "value": 4.5
                        },
                        "commercializationType": "RENT",
                        "courtage": {
                            "hasCourtage": "YES"
                        },
                        "floorplan": "false",
                        "netFloorSpace": 155,
                        "price": {
                            "currency": "EUR",
                            "marketingType": "RENT",
                            "priceIntervalType": "MONTH",
                            "value": 697.5
                        },
                        "totalFloorSpace": 155
                    }
                }
            ]
        }
    ]
} 
```

}

和以下 RestKit 代码

```
NSString *pathPattern = @"resultlist.resultEntries";
NSString *keyPath = @"resultEntry";

RKResponseDescriptor *responseDescriptor = 
    [RKResponseDescriptor responseDescriptorWithMapping:mapping 
                                            pathPattern:pathPattern 
                                                keyPath:keyPath   
                                            statusCodes:statusCodes]; 
```

结果如下：

```
2013-01-15 16:49:00.102 RestKit_final[31840:c07] 
Failed with error: No response descriptors match the response loaded. 
```

怎么了 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:07:27.337

`pathPattern`用于指定将使用响应描述符的端点。例如，`@"/hotels/premium"`作为 pathPattern 将意味着如果您调用响应描述符将不适用`@"/hotels/cheap"`。您可以将其设置为`nil`，但我总是希望我的响应描述符尽可能具体。

`keypath`JSON 响应中的数组`resultlistEntry`在技术上是`resultlist.resultlist.resultlistEntries`，但您可能对此部分有一些问题`resultlist.resultlist`。我建议将您的 API 更改为简单地返回，`resultList`然后您所需的密钥路径将是`resultlist.resultlistEntries`.

# ruby-on-rails - Spree - 在同一页面上将多个变体添加到购物车

> ID：14353161
> 
> 赞同：1
> 
> 时间：2013-01-16T07:19:53.763
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, e-commerce, spree

我在电子商务网站上使用 Spree，每个将要出售的产品都有多种颜色，大多数客户都希望购买同一产品的不同颜色（例如变体）。我希望允许客户在同一页面上添加同一产品的多个变体，我目前有一个带有单选按钮的变体列表，允许选择要购买的变体和数量。相反，我只想要一些默认为零的数量框，这样客户就可以简单地将他们想要的数量添加到每个变体中，然后单击添加到购物车。在查看了订单控制器后，我想出了这个

```
 <% has_checked = false
                  @product.variants.active.each_with_index do |v,index|
                    next if v.option_values.empty? || (!v.in_stock && !Spree::Config[:show_zero_stock_products])
                    checked = !has_checked && (v.in_stock || Spree::Config[:allow_backorders])
                    has_checked = true if checked %>
                    <li>

                      <label for="<%= ['products', @product.id, v.id].join('_') %>">
                        <span class="variant-description">
                          <%= variant_options v %> <%= text_field_tag (@product.has_variants? ? :quantity : "variants[#{@product.master.id}]"),1, :class => "title", :size => 3 %>
                        </span>
                        <% if variant_price_diff v %>
                          <span class="price diff"><%= variant_price_diff v %></span>
                        <% end %>
                      </label>
                    </li>
                  <% end%> 
```

从某种意义上说，它显示了我想要的东西，变体和数量框列表，但是每当我添加数量并将它们添加到购物车时，它只是默认为列表中的最后一项和最后一个数量框中的数量。我已经尝试了一些东西，但没有一个是正确的，有谁知道我会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T01:34:23.337

Neeeeeeeevermind，阅读了 order_populate 的模型，没有意识到它使用了来自产品/变体的两种不同的哈希模型，我试图传递哈希产品，这导致了错误，因为它不期望产品哈希的哈希，而是使用变体哈希，使用代码

```
<%= text_field_tag "variants[#{v.id}]",0, :class => "title", :size => 3, :disabled => !v.in_stock && !Spree::Config[:allow_backorders] %> 
```

希望这对其他人有帮助！

# mysql - mysql 查询：选择 group_id 但如果所述组中的任何 client_id 为 = X 则不要选择

> ID：14353173
> 
> 赞同：0
> 
> 时间：2013-01-16T07:20:31.300
> 
> 标签：mysql

Sqlfiddle 是[http://sqlfiddle.com/#!2/7df50/4](http://sqlfiddle.com/#!2/7df50/4)

基本上，我有 3 个表：组、成员资格、客户。

```
tbl.client = client_id (PK, AI), industry_id (FK), status
tbl.membership = membership_id (PK, AI), Client_id (FK to tbl.client), 
    group_id (FK to group), status
tbl.group = group_id (PK, AI), target_market_id (FK), geography_id (FK) 
```

基本上，我想通过加入所有 3 个表来选择一个 group_id，其中没有一个客户端可以有一个等于给定输入 ($client_industry_id) 的 client.industry_id。

到目前为止，我的查询是：

```
"select g.group_id from `group` g join membership m on m.group_id=g.group_id ".
"join client c on c.client_id=m.client_id ".
"where g.status=1 and m.status=1 and c.status=1 and ".
"g.geography_id=$target_geography and ".
"g.target_market_id=$target_market ".
"c.industry_id <> $client_industry_id"; 
```

查询的问题是它仍然会从组中选择一个 group_id，因为所有客户端都不能有一个 client_id = $client_industry_id 才能触发 <>。我希望这是有道理的？

我会通过分组来解决这个问题吗？如果声明？

编辑：

```
insert into client (email, industry_id, status) VALUES ('email1@gmail.com', '1', '1')
insert into client (email, industry_id, status) VALUES ('email2@gmail.com', '2', '1')
insert into client (email, industry_id, status) VALUES ('email3@gmail.com', '2', '1')

insert into membership (client_id, group_id) VALUES (1, 1)
insert into membership (client_id, group_id) VALUES (2, 1)
insert into membership (client_id, group_id) VALUES (3, 2)

insert into group (geography_id, target_market_id) VALUES (1, 1)
insert into group (geography_id, target_market_id) VALUES (1, 1)

#psuedo code
"select group_id from group join membership on group_id, join client on client_id where 
    all status=1 and group.geography_id=1 and group.target_market_id=1 and 
    NONE of the clients have client.industry_id=1

-- query should result in group_id=2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:46:56.813

你和@Strawberry 是对的，之前的代码是行不通的。对于那个很抱歉。下面是您可能想要尝试的快速破解：

```
select g.group_id from groupp g 
join membership m on m.group_id=g.group_id and m.status=1 //to consider check on status
join client c on c.client_id=m.client_id and c.status=1 //to consider check on status
where g.group_id not in (select mm.group_id from membership mm join client cc on mm.client_id=cc.client_id and cc.industry_id = $client_industry_id) and //to exclude groups with clients that have industry
g.status=1 and
g.geography_id=$target_geography and
g.target_market_id=$target_market; 
```

# ruby-on-rails - RSpec：从另一个模型中的方法调用一个模型中的方法时“模式不存在”

> ID：14353176
> 
> 赞同：0
> 
> 时间：2013-01-16T07:20:42.303
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, rspec2, rspec-rails

试图遵循 demeter 法则，我正在重构代码。目标是让每个模型都有方法，作为其他模型提取数据的 API。

组织有一个实例方法#suppliers_for_purchaser，它返回一个采购员的所有供应商。此方法已在 organization_spec.rb 中成功测试。

Price 有一个类方法 .latest_prices_for_purchaser。此类方法采用一个参数（Organization 的实例）并使用此参数调用 Organization#suppliers_for_purchaser。这会导致RSpec**中不存在**错误架构：

```
Failures:

1) Price.latest_prices_for_purchaser returns latest prices for purchaser
 Failure/Error: Price.latest_prices_for_purchaser(purchaser).should have(2).prices
 ActiveRecord::StatementInvalid:
   PG::Error: ERROR:  schema "organization" does not exist
   : SELECT COUNT(*) FROM "organizations" INNER JOIN "partnerships" ON "organizations"."id" = "partnerships"."partner_id" WHERE "partnerships"."organization_id" = 1 AND (organization.organization_role.name = 'supplier')
 # ./spec/models/price_spec.rb:24:in `block (3 levels) in <top (required)>' 
```

模型（简化）

```
class Organization < ActiveRecord::Base
  # self referencing n:n table
  has_many :partners, :through => :partnerships
  # some more associations, all tested

  # successfully tested in an RSpec unit test for this model
  def suppliers_for_purchaser    
    partners.where('organization.organization_role.name = ?', "supplier")
  end
end

class Price < ActiveRecord::Base
  def self.latest_prices_for_purchaser(purchaser)
    suppliers = purchaser.suppliers_for_purchaser
    # some more code that doesn't get executed because it crashes on the line above
  end
end 
```

price_spec.rb（简化版）

```
describe Price do
  describe ".latest_prices_for_purchaser" do

    # passes
    it "responds" do
      Price.should respond_to(:latest_prices_for_purchaser)
    end

    it "returns latest prices for purchaser" do
      purchaser = create(:organization_purchaser)
      supplier = create(:organization_supplier)
  partnership = create(:partnership, organization: purchaser, partner: supplier) 
      2.times do
        price = create(:price, created_at: 10.hours.ago, supplier: supplier, purchaser: purchaser)
      end
      Price.latest_prices_for_purchaser(purchaser).should have(2).prices                  
    end

  end
end 
```

**更新**

[cheeseweasel](https://stackoverflow.com/users/946270/cheeseweasel)找到了解决方案。单元测试 Price.latest_prices_for_purchaser 仅在将 Organization#suppliers_for_purchaser 更改为：

```
partners.joins(:organization_role).where('organization_roles.name = ?', "supplier") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:11:18.190

问题在于suppliers_for_purchaser 方法 - 在构造查询时，您需要显式定义与相关表的任何连接，因此如下：

```
partners.where('organization.organization_role.name = ?', "supplier") 
```

需要定义组织角色加入：

```
partners.joins(:organization_role).where('organization_roles.name = ?', "supplier") 
```

# iphone - iOS 5 中的 NSAttributedString 设置文本字体和背景

> ID：14353178
> 
> 赞同：3
> 
> 时间：2013-01-16T07:20:54.520
> 
> 标签：iphone, ios, objective-c, ipad

> **可能重复：**
> [如何在 iOS 的 NSAttributedString 中设置属性？](https://stackoverflow.com/questions/11441934/how-to-set-attributes-in-nsattributedstring-in-ios)

我有以下代码：

```
 comment = [[NSMutableAttributedString alloc] initWithString:self.highlightItem_.comment];
            [comment addAttribute:NSFontAttributeName value:[UIFont fontWithName:kProximaNovaBold size:15] range:nameRange];
            [comment addAttribute:NSForegroundColorAttributeName value:[UIColor colorWithRed:128/255.f green:203/255.f blue:255/255.f alpha:1.0] range:nameRange];

            [comment addAttribute:NSFontAttributeName value:[UIFont fontWithName:kProximaNova size:15] range:commentRange];
            [comment addAttribute:NSForegroundColorAttributeName value:[UIColor colorWithWhite:153/255.f alpha:1.0] range:commentRange]; 
```

然而，这是一个 iOS 6 代码，如果我想在 iOS 5 中做同样的事情怎么办。我必须为此使用第三方库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:23:37.913

您可以下拉到 iOS 5 的 Core Text。Core Text 比 Core Text 更强大，`NSAttributedString`但它的文档也较少，工程师也不太容易访问。

# jquery - 获取绝对父窗口 - 浏览器安全

> ID：14353181
> 
> 赞同：0
> 
> 时间：2013-01-16T07:21:05.977
> 
> 标签：jquery, cross-browser

我正在开发一个以前只在 Internet Explorer 中工作的 C#/JavaScript 驱动的系统。我的工作是让它与浏览器无关。它使用我正在努力解决的弹出引擎。

代码如下：

```
function GetBaseIndexDocument() {
    var doc = window;
    var i = 0;
    while (doc.document.getElementById("22411178-0AB6-42AF-8209-FC753F8B58E2") == null && i < 5) {
        i++;
        doc = doc.parent;
    }
    return doc;
}

var _doc = GetBaseIndexDocument(window).document;
var jQ = _doc.parentWindow.$; 
```

在 Chrome 中，最后一行代码出现以下错误：

> 未捕获的类型错误：无法读取未定义的属性“$”

而这个在 Firefox 中：

> 错误：TypeError：_doc.parentWindow 未定义

我猜想这些（可能还有其他几个）浏览器中都不存在“parentWindow”属性。我不确定用什么替换它。

谁能指出我正确的方向？您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:10:04.290

我在网上发现除了 IE 8 及更低版本之外的所有浏览器都可以使用“defaultView”而不是“parentWindow”。

# php - 如何嵌套 PHP 代码块

> ID：14353182
> 
> 赞同：3
> 
> 时间：2013-01-16T07:21:10.077
> 
> 标签：php

此代码已损坏，因为我正在嵌套 php 代码块。这样做的正确方法是什么？

```
<?php
        if ($prev_ID > $totalRows_totalBoogerRows)
        {
            echo "";
        }
        else
        {
            echo <<<_END
                <div class='paging_button_left paging_button_left_episode'>
                    <a href='episode.php?post_ID=<?php echo $prev_ID; ?>'>
                        <h4 style='text-align: right;'>Ep. <?php echo $prev_ID; ?>
                        </h4>
                    </a>
                </div>"
                _END;
        }
    ?> 
```

我在第 11 行中断，因为我的结束 PHP 标记关闭了第一行的第一个 PHP 开始标记（我希望它只关闭第 11 行的开始 PHP 标记）。另外，我可能使用 <<<_END 错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T07:28:48.270

那你为什么不用这个？

```
<?php if(something): ?>
   HTML
<?php else: ?>
   HTML
<?php endif ?> 
```

所以：

```
<?php if ( $prev_ID <= $totalRows_totalBoogerRows ): ?>
    <div class='paging_button_left paging_button_left_episode'>
       <a href='episode.php?post_ID=<?php echo $prev_ID ?>'>
          <h4 style='text-align: right;'>Ep. <?php echo $prev_ID ?></h4>
       </a>
    </div>
<?php endif ?> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T07:24:34.443

当您回显需要插入 php 变量的字符串时，不要打开和关闭 php 标签，而是使用字符串连接：

```
<?php
    if ($prev_ID > $totalRows_totalBoogerRows)
    {
        echo "";
    }
    else
    {
        echo "
            <div class='paging_button_left paging_button_left_episode'>
                <a href='episode.php?post_ID=".$prev_ID."'>
                    <h4 style='text-align: right;'>Ep. ".$prev_ID."</h4>
                </a>
            </div>";
    }
?> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-16T07:27:56.387

**您的[heredoc](http://php.net/heredoc)终止令牌`_END`在错误的位置**。在它之前不能有任何空白。

请参阅 PHP.NET 手册^([String.Syntax.Heredoc](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc))中的警告。

> 需要注意的是，带有结束标识符的行不能包含其他字符，可能除了分号 (;)。这尤其意味着标识符可能不会缩进，并且分号之前或之后可能没有任何空格或制表符。同样重要的是要认识到结束标识符之前的第一个字符必须是本地操作系统定义的换行符。这是在 UNIX 系统上的 \n，包括 Mac OS X。结束分隔符（可能后跟分号）还必须后跟换行符。

此外，当您使用 heredoc 时，字符串被评估为双引号字符串。所以你可以像这样在里面使用变量。

```
 echo <<<_END
                <div class='paging_button_left paging_button_left_episode'>
                    <a href='episode.php?post_ID=$prev_ID'>
                        <h4 style='text-align: right;'>Ep. $prev_ID
                        </h4>
                    </a>
                </div>  
_END; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-16T07:29:58.080

只需关闭并重新打开 PHP 标签

```
<?php
        if ($prev_ID > $totalRows_totalBoogerRows)
        {
            echo "";
        }
        else
        {?>
                <div class='paging_button_left paging_button_left_episode'>
                    <a href='episode.php?post_ID=<?php echo $prev_ID; ?>'>
                        <h4 style='text-align: right;'>Ep. <?php echo $prev_ID; ?>
                        </h4>
                    </a>
                </div>
        <?php}
    ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T07:25:00.150

试试这个 ，

```
<?php
                if ($prev_ID > $totalRows_totalBoogerRows)
                {
                    echo "";
                }
                else
                {
                    echo <<<_END
                        <div class='paging_button_left paging_button_left_episode'>
                            <a href='episode.php?post_ID='.echo $prev_ID;'>
                                <h4 style='text-align: right;'>Ep. echo $prev_ID;
                                </h4>
                            </a>
                        </div>"
                        _END;
                }
            ?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T07:31:00.147

试试这个 ：

```
if ($prev_ID > $totalRows_totalBoogerRows)
    {
        echo "";
    }
    else
    {
        echo "                
               <div class='paging_button_left paging_button_left_episode'>
                  <a href='episode.php?post_ID=\"$prev_ID\"'>
                     <h4 style='text-align: right;'>Ep. \"$prev_ID\"
                     </h4>
                  </a>
                </div>
             ";
    } 
```

# visual-c++ - 为设置为 x64 的平台构建时 atlcom.h 构建错误

> ID：14353184
> 
> 赞同：3
> 
> 时间：2013-01-16T07:21:22.453
> 
> 标签：visual-c++, 64-bit, atl

我正在将现有的 c++ 项目从 32 位版本转换为 64 位版本。该项目在 32 位版本中构建良好，在配置管理器中转换为 x64 平台构建后，我收到以下构建错误，是否有任何特定的我必须为 64 位版本继承或者我缺少任何东西。

**错误 C2259：“ATL::CComObject”：无法实例化抽象类 C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\atlmfc\include\atlcom.h**

以下是构建项目时输出的错误。

```
C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\atlmfc\include\atlcom.h(2000): error C2259: 'ATL::CComObject<Base>' : cannot instantiate abstract class
          with
          [
              Base=NAlertBand
          ]
          due to following members:
         'HRESULT IContextMenu::GetCommandString(UINT_PTR,UINT,UINT *,CHAR *,UINT)' : is abstract
          C:\Program Files (x86)\Windows Kits\8.0\Include\um\shobjidl.h(2732) : see declaration of 'IContextMenu::GetCommandString'
          C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\atlmfc\include\atlcom.h(1989) : while compiling class template member function 'HRESULT ATL::CComCreator<T1>::CreateInstance(void *,const IID &,LPVOID *)'
          with
          [
              T1=ATL::CComObject<NAlertBand>
          ]
          C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\atlmfc\include\atlcom.h(2096) : see reference to function template instantiation 'HRESULT ATL::CComCreator<T1>::CreateInstance(void *,const IID &,LPVOID *)' being compiled
          with
          [
              T1=ATL::CComObject<NAlertBand>
          ]
          C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\atlmfc\include\atlcom.h(2095) : see reference to class template instantiation 'ATL::CComCreator<T1>' being compiled
          with
          [
              T1=ATL::CComObject<NAlertBand>
          ]
          C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\atlmfc\include\atlcom.h(2091) : while compiling class template member function 'HRESULT ATL::CComCreator2<T1,T2>::CreateInstance(void *,const IID &,LPVOID *)'
          with
          [
              T1=ATL::CComCreator<ATL::CComObject<NAlertBand>>,
              T2=ATL::CComFailCreator<-2147221232>
          ]
          NAlerts.cxx(44) : see reference to function template instantiation 'HRESULT ATL::CComCreator2<T1,T2>::CreateInstance(void *,const IID &,LPVOID *)' being compiled
          with
          [
              T1=ATL::CComCreator<ATL::CComObject<NAlertBand>>,
              T2=ATL::CComFailCreator<-2147221232>
          ]
          NAlerts.cxx(44) : see reference to class template instantiation 'ATL::CComCreator2<T1,T2>' being compiled
          with
          [
              T1=ATL::CComCreator<ATL::CComObject<NAlertBand>>,
              T2=ATL::CComFailCreator<-2147221232>
          ]
  QMessage.cxx 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:36:47.107

这是一个类似的线程 - [http://social.msdn.microsoft.com/Forums/en-US/vclanguage/thread/d6144eaa-fa37-4133-87a0-75a06633209b](http://social.msdn.microsoft.com/Forums/en-US/vclanguage/thread/d6144eaa-fa37-4133-87a0-75a06633209b)

请同时发布其余的错误。

# cassandra - Cassandra 数据完整性

> ID：14353186
> 
> 赞同：3
> 
> 时间：2013-01-16T07:21:24.650
> 
> 标签：cassandra

在 cassandra 中维护数据完整性的最佳方法是什么？我使用 cassandra 作为电子商务应用程序的主要数据存储。非规范化后数据分散在多个列族中。例如，如果我有一个“项目”CF：

```
CF: Items
------------------------------------------------
       | itemName |  price  |  rating  |
ItemId |----------|---------|----------|  ...
       |   value  |  value  |   value  |
------------------------------------------------ 
```

我可以有另一个列族来满足查询以获取“所有评分为 5 的项目”。查询列族可以包含有关特定项目的附加信息。

```
CF: ItemsByRating
----------------------------------------------------------------
         |   itemId1     |   itemId2     |   itemId3     |
5 rating |---------------|---------------|---------------| ...
         | item1 details | item2 details | item3 details |
----------------------------------------------------------------- 
```

我有一个正在运行的守护程序，它会收到有关“Items”CF 详细信息更改的通知，并对“ItemsByRating”CF 中的 value 字段进行必要的更新。当有很多 CF 为项目提供查询时，这会变得复杂。有没有最好的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:26:26.417

对于这种特殊情况（查询具有指定评级的项目），最好在CF中的`rating`列上使用二级索引。`Items`Cassandra 将负责索引更新，它比任何外部守护进程都要快得多。在 cassandra 中实现提供完整性保证的守护进程非常困难，因为它需要实现整个故障转移层。

至于一般问题（Cassandra 上的电子商务网站），我建议在Cassandra**之外**保留一致的数据，例如在 SQL 数据库中。

即使是一个大型的电子商务网站，目录中的商品也几乎没有超过一百万，每天处理的交易超过几百万。具有主/从复制功能的 MySQL 可以轻松处理这么多数据。可以设计一个完全基于 cassandra 以一致地处理事务的电子商务系统，但它需要各种技巧，例如分布式行锁或使用 Zookeeper 或 Hazelcast 的外部锁。在这样的数据量（数百万行）上，SQL 数据库将更快、更简单、更稳定。是的，它会有单点故障。但是，宕机的电子商务应用程序比执行随机交易的应用程序要好。

为了构建一个真正可扩展的系统，Cassandra 可能用于处理不需要强一致性的数据，例如页面浏览量：如果单个页面浏览事件丢失也不是问题，数据仍然足以用于数据挖掘、机器学习， ETC。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-17T11:50:37.253

Cassandra 中有可配置的一致性：docs.datastax.com/en/cassandra/2.0/cassandra/dml/dml_config_consistency_c.html

但它与 ACID 中提到的一致性不同：mighty-titan.blogspot.com/2012/06/understanding-cassandras-consistency.html

Cassandra 的主要问题：没有交易。这特别意味着“没有回滚”。Cassandra 的理论是：大多数用例不会覆盖相同的数据，当它们覆盖时，大多数时候您不需要完全回滚： [http ://docs.datastax.com/en/cassandra/2.0/ cassandra/dml/dml_ltwt_transaction_c.html](http://docs.datastax.com/en/cassandra/2.0/cassandra/dml/dml_ltwt_transaction_c.html)

# java - 排序列表时出现 ArrayIndexOutOfBoundsException

> ID：14353189
> 
> 赞同：-3
> 
> 时间：2013-01-16T07:21:36.167
> 
> 标签：java

我在排序中面临 ArrayIndexOutOfBoundsException 。我的代码在这里：

```
Collections.sort(mutualFriends, new Comparator<FriendInfo>() {
   public int compare(FriendInfo s1, FriendInfo s2) {
       return s1.name.compareToIgnoreCase(s2.name);
   }
}); 
```

日志在这里：

```
 STACK_TRACE=java.lang.ArrayIndexOutOfBoundsException
    at java.util.Collections.sort(Collections.java:1970)
    at com.platinumapps.fragments.Mutual_Friends_Fragment$1.onComplete(Mutual_Friends_Fragment.java:138) 
    at com.platinumapps.facedroid.AsyncRequestListener.onComplete(AsyncRequestListener.java:59) 
    at com.facebook.android.AsyncFacebookRunner$2.run(AsyncFacebookRunner.java:328) 
```

我的共同好友列表如下：

```
private List<FriendInfo> mutualFriends = new ArrayList<FriendInfo>(); 
```

任何想法来解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T07:39:55.213

您很可能在这里进行*数据竞赛*。

其他一些线程在排序（或访问）时尝试修改列表 - 你会得到一个竞争条件，这在你的情况下会导致`IndexOutOfBoundsException`.

很难知道问题到底出在哪里，但一些通用的解决方法是：

1.  确保您的代码是线程安全的。可以通过 在使用它的任何地方 对对象进行[`synchronized`ing来轻松完成 -](http://docs.oracle.com/javase/tutorial/essential/concurrency/sync.html)`ArrayList`
2.  使用专为线程安全而设计的类。

在您的情况下可能存在问题的一个常见错误是产生线程，而不是在排序之前等待它们完成工作。这可以通过[`join()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#join%28%29)在假设它们完成之前简单地调用所有线程来解决 - 这可以确保您在所有线程完成之前不会继续。

# python - 如何在 PyGTK 中的 gtk.CellRendererPixbuf 上实现 activate() 函数？

> ID：14353199
> 
> 赞同：1
> 
> 时间：2013-01-16T07:22:40.750
> 
> 标签：python, gtk, pygtk, gtk2

据我所知，只有`gtk.CellRendererToggle`和`gtk.CellRendererText`可以激活。我有一个`gtk.CellRendererPixbuf`我`gtk.TreeView`想让它在单击时发出信号。

我读到该`activate()`功能可以完成这项工作，但我不知道如何实现它。

`def activate(event, widget, path, background_area, cell_area, flags)`

这些参数中的每一个是什么意思，我如何设置/获取它们？任何例子都会非常有帮助。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:21:24.663

我自己之前没有尝试过，但是之前有人问过你的问题，也许这对你有一些帮助：

[gtk treeview：将图像按钮放在行上](https://stackoverflow.com/questions/4940351/gtk-treeview-place-image-buttons-on-rows)

# tridion - PowerTools 项目以禁用模式显示

> ID：14353201
> 
> 赞同：2
> 
> 时间：2013-01-16T07:23:03.147
> 
> 标签：tridion, tridion-2011

我已经在 SDL Tridion 2011 中成功安装了 PowerTools。但是所有 PowerTools 菜单项都被禁用。我想使用 Image Uploader 工具。

谁能帮帮我吗？我是否缺少任何设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T22:29:03.020

刷新浏览器缓存。此外，在 powertools 文件夹上授予网络服务权限。让我知道它是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:52:00.810

电动工具是基于您正在工作的“区域”类型的上下文。例如，**图像上传**仅在**文件夹**区域中可用。您能否确认您正在尝试按预期使用电动工具，因为我以前从未在任何人的环境中看到过这种情况。

# javascript - 提示上传图片的宽高

> ID：14353202
> 
> 赞同：0
> 
> 时间：2013-01-16T07:23:04.767
> 
> 标签：javascript, jquery, asp.net, file-upload

我正在寻找一些方法来提示使用asp文件上传控件上传的图像的宽度和高度。以下是我用来提示文件大小消息的代码。我只想添加使用该上传控件上传的图像的宽度和高度。请注意，我不能在这里使用 javascript DOM，`img.clientWidth`因为没有这样的 html 对象来调用它。

这是JS代码

```
$(document).ready(function () {
    $("#<%= fupNewImage.ClientID %>").bind("change", function () {
        var fSize = ((this.files[0].size) / 1024).toFixed(2);
        if (fSize <= 200) {
            $("#fupSize").html('Good file size: ' + fSize + " kb  Width=? and Height=?" ); // ? denotes the actual value to be put.
        }
        //---------More cases
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:42:26.127

解决了！！

感谢@Esailija

经过大量搜索，我终于找到了锻炼@REF [https://stackoverflow.com/a/8904008/1584140](https://stackoverflow.com/a/8904008/1584140)

```
var _URL = window.URL || window.webkitURL;
    $("#<%= fupNewImage.ClientID %>").bind("change", function () {
        //================Changed Code===================
        var file, img;
        if ((file = this.files[0])) {
            img = new Image();
            img.onload = function () {
                var fSize = ((file.size) / 1024).toFixed(2);
                var WH = " Widht: " + this.width + "px & Height: " + this.height + "px";

                if (fSize <= 200) {
                    $("#fupSize").html('Good file size: ' + fSize + " kb" + WH);
                }
            };
            img.onerror = function () {
                alert("not a valid file: " + file.type);
            };
            img.src = _URL.createObjectURL(file);
        }
        //====================================
    });
}); 
```

# java - 基于文本的战舰游戏打印两个相同的网格 - Java

> ID：14353208
> 
> 赞同：-1
> 
> 时间：2013-01-16T07:23:34.587
> 
> 标签：java, text

我不知道为什么，但是每当您或计算机在我的游戏中受到打击时，网格都会更新。播放器和计算机网格是“-”字符的多维数组，当您受到打击时，它会变为“x”。在游戏循环中，它们是玩家网格和计算机网格，我在不同的时间分别更新它们，但是当它们被打印时，它们都是相同的。有人可以帮忙吗？对不起，我是编程新手

```
public class Game{
  public static void main(String[] args){
    Grid grid = new Grid();
    Computer computer = new Computer();
    Player player = new Player();
    String playerGuess;
    player.setPlayerShips();
    computer.setComputerShips();
    char[][] playerGrid= Grid.gridArray;
    char[][] computerGrid = Grid.gridArray;

    System.out.println("Welcome to BATTLESHIP");
    System.out.println("You are to sink your opponents 3 ships, each 3 units in length.");
    System.out.println("The ships can be both vertical and horizontal.");
    System.out.println("Enter your coordinate guess in the form A1, B5, F6, etc.");
    System.out.println("Since the grid is 7x7, coordinates go from A1-G7.");
    System.out.println("Letters are vertical, numbers are horizontal.");
    System.out.println("You will also have 3 ships placed randomly, which the computer will also try to guess.");
    System.out.println("During the game, enter exit if you would like to quit.");
    System.out.println();
    while(true){
      System.out.println("Your Grid");
      grid.printGrid(playerGrid);
      System.out.println("Opponent's Grid");
      grid.printGrid(computerGrid);
      System.out.println();
      playerGuess=player.getGuess();
      if(playerGuess.equals("exit")){
        break;
      }else{
        playerGuess=grid.convert(playerGuess);
      }
      player.setFirstCo(playerGuess);
      player.setSecondCo(playerGuess);
      System.out.println();
       if(player.isHit(player.firstCo, player.secondCo)){
        player.addHits(player.firstCo, player.secondCo);
        System.out.println("Hit!");
        System.out.println();
        computerGrid=Grid.newGrid(computerGrid,player.firstCo,player.secondCo);
       }else{
        System.out.println("Miss.");
        System.out.println();
      }
       if(player.hasWon()){
        System.out.println("Congratulations, you have sunk all your opponents ships!");
        break;
        }

      computer.guess=computer.getGuess();
      computer.lastGuess=computer.guess;
      if(computer.isHit(computer.guess[0],computer.guess[1])){
        computer.addHits(computer.guess[0],computer.guess[1]);
        System.out.println("Computer has hit!");
        System.out.println();
        playerGrid=grid.newGrid(playerGrid,  computer.guess[0], computer.guess[1]);
        if(computer.hasWon()){
          System.out.println("Computer has sunk all your ships! You lose.");
          break;
        }
      }else{
        System.out.println("Computer has missed.");
        System.out.println();
      }
}
}
} 
```

我让网格分开打印，但我的地方船方法有问题。有人可以看看吗？假设选择随机 x,y 坐标（每艘船 3 个点）并为 3 艘船执行此操作。它有时会连续放置 4 个点，没有其他船只（我认为船只只是重叠，但我试图修复）。无论如何，如果您能提供帮助，请提前致谢。

```
//set player ships coordinates, can be numbers from 0-6
  public static void setPlayerShips(){
      int randX, randY;
      int direction; //will be random int 0-1, determines direction ship will extend(up/down, left/right)

      randX=(int)(Math.random()*7);
      randY=(int)(Math.random()*7);
      direction=(int)(Math.random()*2);

      playerShip1[0]=randX;
      playerShip1[1]=randY;
      if(direction==0){//extend upwards or downwards 2 units(y values change, x stays the same)
          playerShip1[2]=randX;
          playerShip1[4]=randX;
          if(randY>3){//if y value is greater than 3, has to extend down or it wont fit
              playerShip1[3]=randY-1;
              playerShip1[5]=randY-2;
          }else if(randY<2){//if y value is less than 2, has to extend up or it wont fit
              playerShip1[3]=randY+1;
              playerShip1[5]=randY+2;
          }else{//if direction doesnt matter, just extend upwards
              playerShip1[3]=randY+1;
              playerShip1[5]=randY+2;
          }
      }else if(direction==1){//extends left or right 2 units(y values stay the same, x changes)
          playerShip1[3]=randY;
          playerShip1[5]=randY;
          if(randX>3){//if x is greater than 3, must extend left or it wont fit
              playerShip1[2]=randX-1;
              playerShip1[4]=randX-2;
          }else if(randX<2){//if x is less than 2, must extend right or it wont fit
              playerShip1[2]=randX+1;
              playerShip1[4]=randX+2;
          }else{//if direction doesnt matter, just extend right
              playerShip1[2]=randX+1;
              playerShip1[4]=randX+2;
          }
      }
      //do same for both other ships, do quick checks to make sure original coordinates arent the same
      do{
          randX=(int)(Math.random()*7);
          randY=(int)(Math.random()*7);
      }while(randX==playerShip1[0] && randY==playerShip1[1]);  
      direction=(int)(Math.random()*2);

      playerShip2[0]=randX;
      playerShip2[1]=randY;
      if(direction==0){
          playerShip2[2]=randX;
          playerShip2[4]=randX;
          if(randY>3){
              playerShip2[3]=randY-1;
              playerShip2[5]=randY-2;
          }else if(randY<2){
              playerShip2[3]=randY+1;
              playerShip2[5]=randY+2;
          }else{
              playerShip2[3]=randY+1;
              playerShip2[5]=randY+2;
          }
      }else if(direction==1){
          playerShip2[3]=randY;
          playerShip2[5]=randY;
          if(randX>3){
              playerShip2[2]=randX-1;
              playerShip2[4]=randX-2;
          }else if(randX<2){
              playerShip2[2]=randX+1;
              playerShip2[4]=randX+2;
          }else{
              playerShip2[2]=randX+1;
              playerShip2[4]=randX+2;
          }
      }
      do{
          randX=(int)(Math.random()*7);
          randY=(int)(Math.random()*7);
      }while((randX==playerShip1[0]&& randY==playerShip1[1])&&(randX==playerShip2[0] && randY==playerShip2[1]));
      direction=(int)(Math.random()*2);

      playerShip3[0]=randX;
      playerShip3[1]=randY;
      if(direction==0){
          playerShip3[2]=randX;
          playerShip3[4]=randX;
          if(randY>3){
              playerShip3[3]=randY-1;
              playerShip3[5]=randY-2;
          }else if(randY<2){
              playerShip3[3]=randY+1;
              playerShip3[5]=randY+2;
          }else{
              playerShip3[3]=randY+1;
              playerShip3[5]=randY+2;
          }
      }else if(direction==1){
          playerShip3[3]=randY;
          playerShip3[5]=randY;
          if(randX>3){
              playerShip3[2]=randX-1;
              playerShip3[4]=randX-2;
          }else if(randX<2){
              playerShip3[2]=randX+1;
              playerShip3[4]=randX+2;
          }else{
              playerShip3[2]=randX+1;
              playerShip3[4]=randX+2;
          }
      }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:27:30.223

这就是问题：

```
char[][] playerGrid= Grid.gridArray;
char[][] computerGrid = Grid.gridArray; 
```

你*实际上*只有一个`char[][]`对象。两个变量都引用同一个对象......对该对象所做的任何更新都将通过这两个变量可见。

*看起来*`Grid.gridArray`实际上是一个静态*变量*，这是另一个问题。你几乎肯定想让它成为一个*实例*变量......然后创建*两个*实例`Grid`而不是一个实例。

基本上，我会退后一步，弄清楚实例的`Grid`含义是什么。你真的需要公开`gridArray`变量吗？为什么网格不能打印自己？

# java - http://displaytag.sf.net 无法在 web.xml 或 jar 文件中解析

> ID：14353216
> 
> 赞同：2
> 
> 时间：2013-01-16T07:24:20.513
> 
> 标签：java, eclipse, jar, jsp-tags

在尝试从数据库加载时，我在 eclipse 中收到以下错误。

```
org.apache.jasper.JasperException: The absolute uri: http://displaytag.sf.net cannot be resolved in either web.xml or the jar files 
```

在此处完成堆栈跟踪：

```
SEVERE: Servlet.service() for servlet jsp threw exception
org.apache.jasper.JasperException: The absolute uri: http://displaytag.sf.net cannot be resolved in either web.xml or the jar files deployed with this application
    at org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:51)
    at org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:409)
    at org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:116)
    at org.apache.jasper.compiler.TagLibraryInfoImpl.generateTLDLocation(TagLibraryInfoImpl.java:316)
    at org.apache.jasper.compiler.TagLibraryInfoImpl.<init>(TagLibraryInfoImpl.java:149)
    at org.apache.jasper.compiler.Parser.parseTaglibDirective(Parser.java:386)
    at org.apache.jasper.compiler.Parser.parseDirective(Parser.java:450)
    at org.apache.jasper.compiler.Parser.parseElements(Parser.java:1397)
    at org.apache.jasper.compiler.Parser.parse(Parser.java:130)
    at org.apache.jasper.compiler.ParserController.doParse(ParserController.java:255)
    at org.apache.jasper.compiler.ParserController.parse(ParserController.java:103)
    at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:185)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:354)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:334)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:321)
    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:592)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:328)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source) 
```

请在此处找到 web.xml。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">
    <display-name>SpringAndHibernate</display-name>
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>*.htm</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

并查看页面：

```
<%@ taglib uri="http://displaytag.sf.net" prefix="display"%>
<html>
<h2>Welcome</h2>
<a href="indexpage.htm">Click here for Home</a>

<h2 align="center">View Information</h2>
<body></body><center>
<display:table cellpadding="2" cellspacing="20" id="employee" name="employee" pagesize="10"
    export="false" requestURI="displayEmployee.htm">
    <display:column property="emp_id" title="Employee Id" sortable="true" />
    <display:column property="name" title="Employee Name"
        href="editdata.htm" paramId="id" paramProperty="emp_id"
        sortable="true" />
    <display:column property="address" title="Address" sortable="true" />
    <display:column property="salary" title="Salary" sortable="true" />
    <display:column value="Delete" href="deletedata.htm" paramId="id"
        paramProperty="emp_id" title="Delete" sortable="true" />
    <display:setProperty name="paging.banner.placement" value="bottom" />
</display:table>
</center>
</body>
</html> 
```

我需要`<%@ taglib uri="http://displaytag.sf.net" prefix="display"%>`用 web.xml 声明吗？

我已经通过 [显示标签：绝对 uri：http://displaytag.sf.net 无法](https://stackoverflow.com/questions/5122944/display-tag-the-absolute-uri-http-displaytag-sf-net-cannot-be) 但无法解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:37:40.483

您必须确保 displaytag jar 在您的类路径中！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-10T11:30:09.157

将其添加到类路径后得到相同的错误仍然出现错误

```
org.apache.jasper.JasperException: The absolute uri: http://displaytag.sf.net cannot be resolved in either web.xml or the jar files deployed with this application 
```

当我们将它添加到部署程序集错误得到解决

# jquery - JQuery UI sortable 不能有效地对大图像进行排序？

> ID：14353227
> 
> 赞同：1
> 
> 时间：2013-01-16T07:25:07.090
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我一直在使用 JQUery UI sortbale，其中有可排序列表中的图像。当列表变长时，排序的效率会变慢。有时占位符不会出现在我打算放置它的地方，或者只是需要很长时间才能出现。

我不知道这是一个性能错误还是我可能没有看过的东西。

我在 stackoverflow 中搜索了一个解决方案，但是当它们连接到其他可排序对象时，我找到了可排序性能问题的解决方案。我可以找到有关自分类大图像的性能问题的解决方案。

这是我的基本代码。

```
$(function() {
      $( "#sortable" ).sortable({
           placeholder: "marker",
           axis: "y",
           opacity: 0.1,
           scrollSpeed: 100
      });
});

<ul id="sortable" class="connectedSortable">
        <li class="ui-state-default"><img src="http://farm9.staticflickr.com/8050/8384821879_4a38e7b49c.jpg"/></li>
        <li class="ui-state-default"><img src="http://farm9.staticflickr.com/8233/8383743110_1d54957f9d.jpg"/></li>
        <li class="ui-state-default"><img src="http://farm9.staticflickr.com/8515/8383743936_436f8a683c.jpg"/></li>
        <li class="ui-state-default"><img src="http://farm9.staticflickr.com/8237/8367576814_f70d6c92e6.jpg"/></li>
        <li class="ui-state-default"><img src="http://farm9.staticflickr.com/8042/7984956055_ea5992fd01.jpg"/></li>
        <li class="ui-state-default"><img src="http://farm9.staticflickr.com/8045/8385132987_07a624ff4d.jpg"/></li>
        <li class="ui-state-default"><img src="http://farm9.staticflickr.com/8055/8386232790_837708cc32.jpg"/></li>
        <li class="ui-state-default"><img src="http://farm9.staticflickr.com/8192/8385130425_b0706a57cd.jpg"/></li>
        <li class="ui-state-default"><img src="http://farm9.staticflickr.com/8048/8379388943_9c84fab1ec.jpg"/></li>
        <li class="ui-state-default"><img src="http://farm9.staticflickr.com/8092/8386229678_14b72aac69.jpg"/></li>
      </ul> 
```

工作演示小提琴来说明问题。[http://jsfiddle.net/CJ9tN/1/](http://jsfiddle.net/CJ9tN/1/)

# tfs - 直接在sql数据库上查询工作项以防wiql

> ID：14353229
> 
> 赞同：1
> 
> 时间：2013-01-16T07:25:07.843
> 
> 标签：tfs, wiql

因为从 wiql 获取工作项非常低。我想直接从数据库中获取它们，但我不知道应该从哪个表中获取它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T07:27:07.833

有 9 个视图用于在 TFS 2012 中创建报告：

```
CurrentWorkItemView
WorkItemHistoryView
BuildChangesetView
BuildCoverageView
BuildDetailsView
BuildProjectView
CodeChurnView
RunCoverageView
TestResultView 
```

[请在http://blogs.msdn.com/b/granth/archive/2010/05/09/tfs2010-how-to-query-work-items-using-sql-on-the-relational-warehouse](http://blogs.msdn.com/b/granth/archive/2010/05/09/tfs2010-how-to-query-work-items-using-sql-on-the-relational-warehouse.aspx)找到更多信息[.aspx](http://blogs.msdn.com/b/granth/archive/2010/05/09/tfs2010-how-to-query-work-items-using-sql-on-the-relational-warehouse.aspx)

# android - 如何将 gstreamer-plugins 放入它的 Android SDK？

> ID：14353230
> 
> 赞同：2
> 
> 时间：2013-01-16T07:25:11.607
> 
> 标签：android, android-ndk, gstreamer

我需要 gstreamer 来解码 rtp 上的 H.264 视频，所以我使用了来自 gstreamer.com 的 SDK。但是我发现没有包含我需要的东西，例如264depay，x264dec等。我在[http://cgit.freedesktop.org/gstreamer/gst-plugins-good/](http://cgit.freedesktop.org/gstreamer/gst-plugins-good/)上找到了gst-plugins ，我想我需要编译成Android形式，里面有Android.mk。我应该怎么处理？尝试执行 ndk-build，但失败。

非常感谢。

# c# - N' 在 SQL 脚本中代表什么？（插入脚本中字符之前使用的那个）

> ID：14353238
> 
> 赞同：34
> 
> 时间：2013-01-16T07:25:55.757
> 
> 标签：c#, asp.net, database

我生成了一个这样的sql脚本，

```
INSERT [dbo].[TableName] ([Sno], [Name], [EmployeeId], [ProjectId], [Experience]) 
VALUES (1, N'Dave', N'ESD157', N'FD080', 7) 
```

我想知道 N' 到底是什么意思，它在这里的目的是什么。

**注意**：通过搜索我能得到的答案是 N' 是国家语言标准的前缀，它用于使用 unicode 数据。但老实说，我无法清楚地了解 N' 这里的确切操作。感谢您的帮助，请以更**易于理解**的方式进行。提前致谢。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-16T07:28:46.743

`N`用于指定 unicode 字符串。

这是一个很好的讨论：[为什么有些 SQL 字符串有一个 'N' 前缀？](https://web.archive.org/web/20150208024547/http://databases.aspfaq.com/general/why-do-some-sql-strings-have-an-n-prefix.html "http://databases.aspfaq.com/general/why-do-some-sql-strings-have-an-n-prefix.html 的存档")

在您的示例`N`中，不需要前缀，因为 ASCII 字符（值小于 128）直接映射到 unicode。但是，如果您想插入一个非 ASCII 名称，则`N`需要前缀。

```
INSERT [dbo].[TableName] ([Sno], [Name], [EmployeeId], [ProjectId], [Experience]) 
VALUES (1, N'Wāhi', 'ESD157', 'FD080', 7) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-16T07:27:43.320

前缀代表 SQL-92 标准中的`"N"`National Language，用于表示 unicode 字符。

每次将 Unicode 数据传递给 SQL Server 时，都必须在 Unicode 字符串前面加上`N`.

当类型为 from或`NVARCHAR`时使用。`NCHAR``NTEXT`

有关更多信息，请参阅：[为什么某些 SQL 字符串具有“N”前缀？](https://web.archive.org/web/20150208024547/http://databases.aspfaq.com/general/why-do-some-sql-strings-have-an-n-prefix.html "http://databases.aspfaq.com/general/why-do-some-sql-strings-have-an-n-prefix.html 的存档")

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-16T07:30:37.823

`'abcd'`是`[var]char`字符串的文字（或者可能是`text`，但`varchar(max)`现在更常见） - 占用 4 字节内存，并使用 SQL 服务器配置的任何代码页。`N'abcd'`是`n[var]char`字符串的文字（或者可能`ntext`，但`nvarchar(max)`更可取），使用 UTF-16 占用 8 个字节的内存。这允许完全国际使用，坦率地说`n[var]char`应该是大多数系统的默认设置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T07:28:29.173

这表示后面的字符串在`Unicode`（*N 实际上代表国家语言字符集*）。

这意味着您传递的是`NCHAR`, `NVARCHAR`or`NTEXT`值，而不是`CHAR`, `VARCHAR`or `TEXT`。

*   [来源](http://databases.aspfaq.com/general/why-do-some-sql-strings-have-an-n-prefix.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-16T07:26:59.477

N 是指定它是一个字符串类型的值。

[[N]'tsql_string'](http://msdn.microsoft.com/en-us/library/ms188332.aspx)

> 是一个常量字符串。tsql_string 可以是任何 nvarchar 或 varchar 数据类型。如果包含 N，则**字符串被解释为 nvarchar** 数据类型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-02T10:19:53.397

每个国家/地区都有自己特定的字母和符号，因此为美国英语建立的数据库将无法识别英国英国数据库会识别的英镑符号，西班牙语、法语、德语也是如此

其他语言，如中文、日语、希伯来语、阿拉伯语也不使用任何拉丁字符。

所以任何人试图输入任何不包含在本地字符集中的数据都会失败或遭受数据损坏，如果你使用的是 varchar，所以如果你的数据库甚至有可能需要支持多个本地字符集，那么你必须使用国家化语言字符集 aka unicode aka NChar，它允许字符集国籍与字符一起记录。提供国际文本支持

同样，将 N 前缀添加到字符串会指示数据库包含国家代码以及字符代码

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2020-10-19T16:21:48.373

```
DECLARE

   TYPE name_salary_rt IS RECORD (

      table_names     VARCHAR2 (1000),

      counts  NUMBER

   );

VSQL varchar2(2000);

   TYPE name_salary_aat IS TABLE OF name_salary_rt

      INDEX BY PLS_INTEGER;

   l_employees   name_salary_aat;

BEGIN

   EXECUTE IMMEDIATE

      q'[select table_name ,count(*) CountF

           from all_tab_columns  where rownum<100

         group by table_name]'

      BULK COLLECT INTO l_employees;

   FOR indx IN 1 .. l_employees.COUNT

   LOOP

VSQL:=VSQL||'  select '''||l_employees (indx).table_names||''','''|| l_employees (indx).counts ||''' from dual ';

if indx<l_employees.COUNT then

VSQL:=VSQL|| ' union all ';

else

VSQL:=VSQL||';';

end if;

  --    DBMS_OUTPUT.put_line (l_employees (indx).table_names||','|| l_employees (indx).counts);

    --    DBMS_OUTPUT.put_line (l_employees (indx).countf);

   END LOOP;

DBMS_OUTPUT.put_line (VSQL);

-- execute immediate  VSQL; 

END; 
```

# ruby-on-rails - 旧应用程序中的 Rails Engines 3.2？

> ID：14353239
> 
> 赞同：1
> 
> 时间：2013-01-16T07:25:57.693
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

这可能是一个非常简单的问题，但我正在编写我的第一个 Rails 引擎（Rails 3.2），这一切都很新。

我的引擎旨在为我的一些旧 Rails 应用程序（3.0.11、2.3.15、2.3.14）进行电子邮件传递（发送和记录消息）。我以为我可以创建这个应用程序并将其安装到旧应用程序中。

简而言之，在能够使用新版本编写的引擎之前，我必须升级旧应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:03:46.643

我在 irc 上继续#rubyonrails 并获得了更多信息。

“你应该能够在旧应用程序中使用新引擎，只要你不使用任何不在新版本中的 API 就可以了。”

和

如果引擎需要与您的应用程序不同的 gem 版本：“您必须手动解决这些问题”

这应该让我开始......

# c# - c# 使用 Web 服务传输大量数据

> ID：14353242
> 
> 赞同：1
> 
> 时间：2013-01-16T07:26:19.850
> 
> 标签：c#, web-services

我需要使用网络服务传输**1 GB 。**我认为使用 msmq 分段传输。也许有一种方法可以轻松一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:38:04.023

如果您可以将数据分成更小的块，那么就这样做。Web 服务的设计目的不是一次性传输那么多数据，所以即使有可能，也将是一段坎坷的旅程。

但是这个世界并没有以一种有效的方式运作，所以这就是你要做的：

将数据以二进制形式写入本地文件。2\. 创建一个流写入器，它使用流读取器从文件中读取数据并写入您的 Web 服务。3\. 如果发生任何事情，捕获异常并尝试从文件指针所在的位置恢复。4\. 如果您可以修改 web 服务，让它读取数据并写入二进制文件，捕获任何错误并尝试在当前指针处将恢复时的任何新数据写入文件。

诀窍是弄清楚如何告诉服务您正在尝试恢复中断的请求。

如果不清楚，我会尝试扩展更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:31:41.600

> 我需要使用网络服务传输 1 GB。我认为使用 msmq 分段传输。

我想用汽车运送人。我想用飞机​​。

得到它？Web 服务或 MSMQ。它们不会神奇地混合。

那说：Web 服务，alrge 数据 = 坏主意。甚至 JSON 也有开销。流媒体，非流媒体？这是很多开放变量，在大多数情况下，这里的 Web 服务意义不大。

向上（发送到服务）还是向下（发送到服务）？更多问题 - 我真的不希望将 1gb 上传到网络服务。

如果必须，拼接数据并制作一个 api 来询问所有“部分”，然后逐部分获取 - 这也允许显示进度条。由于运输过程中可能发生的故障，您的软件必须处理对零件的重新请求。

如果数据是二进制的并且只使用 REST api，我会认真考虑不在这里使用 Web 服务，至少用于下载。也可能用于上传。很多事情取决于你甚至不知道如何要求或懒得描述的所有东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T07:35:36.440

您可以使一些服务首先在目标下一个拆分数据中创建缓冲区并通过服务发送它，然后完成它。

# jquery - ASP.NET MVC：如何“模型绑定”非 html-helper 元素

> ID：14353245
> 
> 赞同：15
> 
> 时间：2013-01-16T07:26:33.167
> 
> 标签：jquery, asp.net-mvc, entity-framework, razor, model-binding

你能告诉我一种方法，我可以将**模型**属性绑定到 html 元素，而不使用 html 助手创建吗？

换句话说，对于一个普通的 html 元素，例如：`<input type="text" />`

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-16T07:50:22.057

如果您指的是[Model Binding](http://msdn.microsoft.com/en-us/magazine/hh781022.aspx)，它不需要帮助程序，而是需要命名约定。助手只是让创建 HTML 标记变得简单而简洁。

您可以创建纯 HTML 输入并`name`正确设置属性。默认命名约定只是基于点，省略父级实体的名称，但从那里限定它。

考虑这个控制器：

```
public class MyControllerController : Controller
{
     public ActionResult Submit()
     {
         return View(new MyViewModel());
     }

     [HttpPost]
     public ActionResult Submit(MyViewModel model)
     {
            // model should be not null, with properties properly initialized from form values
            return View(model);
     }
} 
```

而这个模型：

```
public class MyNestedViewModel
{
    public string AnotherProperty { get; set; }
}

public class MyViewModel
{
    public MyViewModel()
    {
         Nested = new MyNestedViewModel();
    }

    public string SomeProperty { get; set; }

    public MyNestedViewModel Nested  { get; set; }
} 
```

您可以纯粹在 HTML 中创建以下表单：

```
<form method="POST" action="MyController/Submit">
    <div><label>Some property</label><input type="text" name="SomeProperty" /></div>
    <div><label>Another property</label><input type="text" name="Nested.AnotherProperty" /></div>
    <button type="submit">Submit</button>
</form> 
```

如果要显示发布的值（在第二个`Submit`重载中），则必须修改 HTML 以呈现模型属性。您可以将其放置在视图中，在本例中使用 Razor 语法并调用`Submit.cshtml`：

```
@model MyViewModel
<form method="POST" action="MyController/Submit">
    <div><label>Some property</label><input type="text" name="SomeProperty" value="@Model.SomeProperty" /></div>
    <div><label>Another property</label><input type="text" name="Nested.AnotherProperty" value="@Model.Nested.SomeProperty" /></div>
    <button type="submit">Submit</button>
</form> 
```

因此，这可以在没有助手的情况下完成，但您希望尽可能多地使用它们。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-16T07:49:45.507

只需给它一个名字：

```
<input type="text" name="foo" /> 
```

然后在你的控制器动作中简单地有一个同名的参数：

```
public ActionResult Process(string foo)
{
    // The foo argument will contain the value entered in the 
    // corresponding input field
} 
```

# spring-mvc - 如何使用 Spring MVC 3.0 实现前端控制器

> ID：14353246
> 
> 赞同：0
> 
> 时间：2013-01-16T07:26:47.593
> 
> 标签：spring-mvc

我曾经使用 javax.servlet.Filter 来处理一些过程，例如身份验证和字符编码。Spring MVC 3.0 中是否有类似过滤器的东西，在其他控制器处理请求之前处理请求。（前端控制器）而且，它能够通过构造函数或设置器注入依赖项。例如，

```
@Controller
public class HomeController {

    @RequestMapping("/home")
    public String getHomePage() {
        return "home";
    }
}

public class Authentication {

    private Foo foo;

    public void setFoo(Foo foo) {
        this.foo = foo;
    }

    // filter the url "/home"
    public String authenticate() {
        if (foo.authenticated()) {
            return toHomeController;
        }
        return toErrorController;
    }
} 
```

在处理来自 /home 或其他 url 的请求之前，应该授权用户。如果没有，他应该被重定向到其他 url，例如 /error。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:06:16.610

> 我曾经使用 javax.servlet.Filter 来处理一些过程，例如身份验证和字符编码。

所有这些在 Spring 中已经存在：

*   使用[Spring Security](http://static.springsource.org/spring-security/site/)进行身份验证/授权
*   使用[CharacterEncodingFilte](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/filter/CharacterEncodingFilter.html)进行字符编码

> Spring MVC 3.0 中是否有类似过滤器的东西，在其他控制器处理请求之前处理请求。（前端控制器）

是的，Spring 有[DispatcherServlet](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/DispatcherServlet.html)正是这样做的。

> 而且，它可以通过构造函数或设置器注入依赖项。

是的，春天会为你做的。

您可以从[Spring Reference](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/)开始：

*   阅读有关[Spring IoC的信息](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/)
*   阅读有关[Web MVC 框架的信息](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html)

# java - 访问静态成员字段导致空指针异常

> ID：14353248
> 
> 赞同：-2
> 
> 时间：2013-01-16T07:26:49.960
> 
> 标签：java, oop

我从配置加载器类访问静态字段“缓存”的方式有问题吗？仅供参考，`CacheEngine`是一个为 memcached 实现缓存客户端的接口。

```
public class Test {
     ...
     getCache(){
       ...
       try{
        cacheData =  ConfigLoader.cache.get(key); // Accessing the static 'cache' memeber returns Null Pointer Exception  
        ...
       }
     }
}

//ConfigLoader Class
public class ConfigLoader{
    public static CacheEngine cache;
    ...
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T07:29:20.487

这是一个糟糕的设计，但你访问它的方式是正确的。你的问题是，它`cache`没有初始化。您需要在某处这样做：

```
public static CacheEngine cache = new CacheEngine(...); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T07:33:08.047

我想你可能没有初始化要初始化在构造函数中`static CacherEngine cache;`
添加以下代码：`static``ConfigLoader class`

```
static{
cache=new CacheEngine(...);} 
```

这是一种替代方式，但不建议这样做。在您的声明中添加： `public static CacheEngine cache=new CacheEngine`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T07:31:39.340

在访问缓存之前做

```
if (cache==null) cache = new CacheEngine(...); 
```

只需在访问它之前对其进行初始化。同样在一个好的 OOP 设计中，你会创建一个静态的 init 方法。

# php - 从 zend 框架 url 中删除 index.php

> ID：14353252
> 
> 赞同：1
> 
> 时间：2013-01-16T07:27:10.397
> 
> 标签：php, .htaccess, zend-framework, indexing

我正在使用 zend 框架开发一个模块，并且我已经使用 zf create project 命令创建了一个项目

当我尝试使用`ip/folder/controller/action`它访问 url 时出现错误未找到错误当我尝试使用`ip/folder/index.php/controller/action`我能够访问但我无法在这两种情况下包含 js、css 文件并且我的 htaccess 是

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

index.php 是

```
<?php

   // Define path to application directory
   defined('APPLICATION_PATH')
   || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/application'));

   // Define application environment
    defined('APPLICATION_ENV')
    || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') 
       ? getenv('APPLICATION_ENV') : 'production'));

   // Ensure library/ is on include_path
     set_include_path(implode(PATH_SEPARATOR, 
     array(realpath(APPLICATION_PATH . '/library'), get_include_path(),
)));

/** Zend_Application */
require_once 'Zend/Application.php';    

// Create application, bootstrap, and run
$application = new Zend_Application(
    APPLICATION_ENV,
    APPLICATION_PATH . '/configs/application.ini'
);
$application->bootstrap()->run(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:59:45.543

尝试将此添加到您的 .htaccess 中：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9} /([^/]+/)*index.php 
RewriteRule ^index.php(.*)$ /path/to/your/installation$1 [R=301,L] 
```

将 /path/to/your/installation 替换为正确的路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:06:55.893

我只是将它添加到 index.php 的顶部：

```
$_SERVER["REQUEST_URI"] = str_replace('index.php', '', $_SERVER["REQUEST_URI"]); 
```

这是[Akrabat.com 的 Rob Allen建议的另一种方法](http://akrabat.com/zend-framework/remove-index-php-from-your-url/)

# devexpress - Devexpress MessageBox 正在自动关闭

> ID：14353262
> 
> 赞同：0
> 
> 时间：2013-01-16T07:27:40.863
> 
> 标签：devexpress, progress-bar, messagebox

我有一个带有进度条和消息框的 Devexpress 表单。当我单击表单上的搜索按钮时，进度条显示百分比，然后网格将与记录绑定。当它没有返回记录时，进度条后会出现消息框，如“未找到记录”

但在显示未找到记录后，它会自动关闭，无需单击消息框上的确定或取消按钮

进度条代码

```
namespace DMS
{
public partial class ProgressBar : WaitForm
{
    public ProgressBar()
    {
        InitializeComponent();
    }

    #region Overrides
    public override void SetCaption(string caption)
    {
        base.SetCaption(caption);
        this.progressPanel1.Caption = caption;
    }
    public override void SetDescription(string description)
    {
        base.SetDescription(description);
        this.progressPanel1.Description = description;
    }
    public override void ProcessCommand(Enum cmd, object arg)
    {
        base.ProcessCommand(cmd, arg);
    }
    #endregion

    private void progressBarControl1_EditValueChanged(object sender, EventArgs e)
    {
        try
        {
            int i = int.Parse(Math.Floor(double.Parse(this.progressBarControl1.EditValue.ToString())).ToString());                
            if (i.ToString().EndsWith("0"))
            {
                //satya
                //i += 5;
                i += 0;
            }
            this.Opacity = 100;
            SetCaption("Please Wait...");
            SetDescription(i.ToString() + "% Completed...");
            Application.DoEvents();
        }
        catch (Exception ex)
        {
            XtraMessageBox.Show(ex.Message.ToString() + " " + ex.Source.ToString());
        }
    }
} 
```

}

显示消息框的代码

```
private void btnshow_Click(object sender, EventArgs e)
    {
        try
        {
            if (dtstartdate.DateTime.Date > dtEnddate.DateTime.Date)
            {
                XtraMessageBox.Show("Start date should be less than End date", Program.MessageBoxTitle, MessageBoxButtons.OK, MessageBoxIcon.Error);
                dtstartdate.Focus();
                return;
            }
            string CommandText = "select * from DMS_View_Payments where v_Paymentdate between '" + General.DateToDatabase(this.dtstartdate.DateTime.ToShortDateString())
                + "' and '" + General.DateToDatabase(this.dtEnddate.DateTime.ToShortDateString()) + "'";
            if (ccbeForClient.EditValue.ToString() != string.Empty)
            {
                CommandText += " and v_clientid in (" + this.ccbeForClient.EditValue.ToString() + ")";
            }
            else if (Logs.UserLimitedClients != "0")
            {
                CommandText += " and v_clientid in (" + Logs.UserLimitedClients + ")";
            }
            if (ccbeForBatch.Text.Trim() != "" && ccbeForBatch.Text.Trim() != "--")
            {
                string selected_client_list = "";
                if (ccbeForBatch.Text.Trim() != "" && ccbeForBatch.Text.Trim() != "--")
                {
                    //selected_client_list = ccbe_client_list.Text.Replace(" ", "").Replace(",", "','");
                    string source = ccbeForBatch.Text;
                    string[] split = source.Split(',');
                    string changed = "";
                    for (int i = 0; i < split.Length; i++)
                    {
                        changed += "," + split[i].Trim();
                    }
                    //string output = changed.Trim(',').Replace(",", "','");
                    selected_client_list = changed.Trim(',').Replace(",", "','");
                }
                else
                {
                    selected_client_list = "";
                }
                CommandText += " and v_Batch in ('" + selected_client_list + "') ";
            }
            if (ccbeForBranch.EditValue.ToString() != string.Empty)
            {
                CommandText += " and v_BRANCH_ID in (" + ccbeForBranch.EditValue.ToString() + ")";
            }
            if (ccbeForCollector.EditValue.ToString() != string.Empty)
            {
                CommandText += " and V_CollectorId in (" + ccbeForCollector.EditValue.ToString() + ")";
            }
            else if (DevXCharts.EmpIdsForHierarchey != "")
            {
                CommandText += " and V_CollectorId in (" + DevXCharts.EmpIdsForHierarchey.ToString() + ")";
            }
            if (ccbeForAccountType.Text.Trim() != "" && ccbeForAccountType.Text.Trim() != "--")
            {
                string selected_client_list = "";
                if (ccbeForAccountType.Text.Trim() != "" && ccbeForAccountType.Text.Trim() != "--")
                {
                    //selected_client_list = ccbe_client_list.Text.Replace(" ", "").Replace(",", "','");
                    string source = ccbeForAccountType.Text;
                    string[] split = source.Split(',');
                    string changed = "";
                    for (int i = 0; i < split.Length; i++)
                    {
                        changed += "," + split[i].Trim();
                    }
                    //string output = changed.Trim(',').Replace(",", "','");
                    selected_client_list = changed.Trim(',').Replace(",", "','");
                }
                else
                {
                    selected_client_list = "";
                }
                CommandText += " and v_AccountType in ('" + selected_client_list + "') ";
            }
            if (radioPayment.SelectedIndex == 0)
            {
                CommandText += " and v_Confirmed='Y'";
            }
            else if (radioPayment.SelectedIndex == 1)
            {
                CommandText += " and v_Confirmed='N'";
            }
            if (radioCases.SelectedIndex == 0)
            {
                CommandText += " and v_flagabort='0'";
            }
            else if (radioCases.SelectedIndex == 1)
            {
                CommandText += " and v_flagabort='1'";
            }
            CommandText += " order by v_debtorname";
            Application.DoEvents();
            if (objPB != null)
            {
                objPB.Close();
                objPB = null;
            }
            objPB = new ProgressBar();
            objPB.StartPosition = FormStartPosition.CenterScreen;
            objPB.progressBarControl1.EditValue = 20;
            objPB.TopMost = true;
            objPB.ShowInTaskbar = false;
            Application.DoEvents();
            objPB.Show();
            Application.DoEvents();
            SqlDataAdapter sql_for_debtors = new SqlDataAdapter(CommandText, DBConString.ConnectionString());
            DataSet ds_for_rhb = new DataSet();
            sql_for_debtors.SelectCommand.CommandTimeout = 0;
            sql_for_debtors.Fill(ds_for_rhb, "DMS_View_Payments");
            sql_for_debtors.Dispose();
            Application.DoEvents();
            objPB.progressBarControl1.EditValue = 40;
            Application.DoEvents();
            if (ds_for_rhb.Tables["DMS_View_Payments"].Rows.Count > 0)
            {
                XrtPaymentsDevx obj_report = new XrtPaymentsDevx();
                obj_report.xrlReportHeader.Text = "Payments From " + this.dtstartdate.DateTime.ToString("dd/MM/yyyy") + " To " + this.dtEnddate.DateTime.ToString("dd/MM/yyyy");
                string SelectionCriteria = "";
                if (this.ccbeForClient.Text != "" && this.ccbeForClient.Text != "--")
                {
                    SelectionCriteria += " Client: " + this.ccbeForClient.Text + " , ";
                }
                if (this.ccbeForBatch.Text != "" && this.ccbeForBatch.Text != "--")
                {
                    SelectionCriteria += " Batch: " + this.ccbeForBatch.Text + " , ";
                }
                if (this.ccbeForBranch.Text != "" && this.ccbeForBranch.Text != "--")
                {
                    SelectionCriteria += " Branch: " + this.ccbeForBranch.Text + " , ";
                }
                if (this.ccbeForCollector.Text != "" && this.ccbeForCollector.Text != "--")
                {
                    SelectionCriteria += " Collector: " + this.ccbeForCollector.Text + " , ";
                }
                if (this.ccbeForAccountType.Text != "" && this.ccbeForAccountType.Text != "--")
                {
                    SelectionCriteria += " AccType: " + this.ccbeForAccountType.Text + " , ";
                }
                if (radioPayment.SelectedIndex == 0)
                {
                    SelectionCriteria += " Payment Confirmed='Y'" + " , ";
                }
                else if (radioPayment.SelectedIndex == 1)
                {
                    SelectionCriteria += " Payment Confirmed='N'" + " , ";
                }
                else if (radioPayment.SelectedIndex == 2)
                {
                    SelectionCriteria += " Payment Confirmed='Y' And 'N'" + " , ";
                }
                if (radioCases.SelectedIndex == 1)
                {
                    SelectionCriteria += " Abort Cases" + " , ";
                }
                else if (radioCases.SelectedIndex == 0)
                {
                    SelectionCriteria += " Active Cases" + " , ";
                }
                else if (radioCases.SelectedIndex == 2)
                {
                    SelectionCriteria += " Both Active And Abort Cases" + " , ";
                }
                obj_report.xrlSelectionCriteria.Text = SelectionCriteria;
                obj_report.DataSource = ds_for_rhb;
                obj_report.DataMember = "DMS_View_Payments";
                Application.DoEvents();
                objPB.progressBarControl1.EditValue = 60;
                Application.DoEvents();
                obj_report.CreateDataBindings();
                Application.DoEvents();
                objPB.progressBarControl1.EditValue = 80;
                Application.DoEvents();
                //obj_report.bind_data();
                obj_report.ShowPreview();
                Application.DoEvents();
                objPB.progressBarControl1.EditValue = 90;
                Application.DoEvents();
                Application.DoEvents();
                objPB.progressBarControl1.EditValue = 100;
                Application.DoEvents();
                objPB.Close();
                Application.DoEvents();
            }
            else
            {
                XtraMessageBox.Show("No Records(s) Found", Program.MessageBoxTitle, MessageBoxButtons.OK, MessageBoxIcon.Information);
                objPB.progressBarControl1.EditValue = 100;                    
                //objPB.progressBarControl1.EditValue = 100;
                Application.DoEvents();
                objPB.Close();

                //Application.DoEvents();

                //objPB.progressBarControl1.EditValue = 100;                    
                //Application.DoEvents();
                //objPB.Close();                    
                //XtraMessageBox.Show("No Records(s) Found", Program.MessageBoxTitle, MessageBoxButtons.OK, MessageBoxIcon.Information);

            }
        }
        catch (Exception ex)
        {
            XtraMessageBox.Show(ex.Message.ToString() + " " + ex.Source.ToString(), Program.MessageBoxTitle, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:01:34.753

问题的**原因是 WaitForm**实例的错误使用。
您不应该直接显示/隐藏 WaitForm，而是使用[SplashScreenManager API](http://help.devexpress.com/#WindowsForms/CustomDocument10824)显示/隐藏 WaitForm 并与之交互。
在这里，我将尝试为您提供正确的方法：

首先，运行搜索操作并显示 WaitForm 的代码应如下所示：

```
void OnRunSearchOperation_ButtonClick(object sender, EventArgs e) {
    bool success = false;
    SplashScreenManager.ShowForm(this, typeof(ProgressWaitForm), false, false); 
    try {
        // here you can run some long time operations
        success = SearchOperation();
    }
    finally { SplashScreenManager.CloseForm(); }
    if(!success) {
        XtraMessageBox.Show(this, "No entries found");
    }
}
bool SearchOperation() {
    // THIS IS SEARCH OPERATION IMITATION 
    const int count = 70000000;
    int stepThreshold = count / 100;
    decimal dec = 1.41M;
    for(int i = 0; i < count; i++) {
        dec /= 2;
        if((i % stepThreshold) == 0) 
            SplashScreenManager.Default.SendCommand(WaitFormCommand.PerformStep, null);
    }
    return false; // result
} 
```

以下是`WaitFormCommand`“ProgressWaitForm”实现：

```
public enum WaitFormCommand {
    PerformStep
}
public partial class ProgressWaitForm : WaitForm {
    public ProgressWaitForm() {
        InitializeComponent();
    }
    #region Overrides
    public override void ProcessCommand(Enum cmd, object arg) {
        base.ProcessCommand(cmd, arg);
        WaitFormCommand wfCmd = (WaitFormCommand)cmd;
        if(wfCmd == WaitFormCommand.PerformStep) 
            progressBarControl1.PerformStep();
    }
    #endregion
} 
```

# c# - 没有人持有锁，但仍有线程等待

> ID：14353268
> 
> 赞同：2
> 
> 时间：2013-01-16T07:28:13.623
> 
> 标签：c#, .net, debugging, windbg, visual-studio-debugging

我有一个特殊情况，我的应用程序 UI 冻结，当我进行进程转储时，我可以看到 UI 线程正在获取锁并等待

```
OS Thread Id: 0x27f4 (0)
Child SP         IP               Call Site
000000000027b470 0000000076de177a [GCFrame: 000000000027b470] 
000000000027b5a8 0000000076de177a [GCFrame: 000000000027b5a8] 
000000000027b558 0000000076de177a [HelperMethodFrame: 000000000027b558] System.Threading.Monitor.Enter(System.Object) 
```

但同时 !syncblk 显示只有等待者但没有人持有锁（MonitorHeld 为 2）

```
Index         SyncBlock MonitorHeld Recursion Owning Thread Info          SyncBlock Owner
 2888 00000000200adbc8            2         0 0000000000000000     none    0000000003c167d0 System.Collections.Hashtable 
```

我看到的问题是遗留代码正在获取哈希表上的锁并更新自身，但我不明白当没有人持有锁时我们如何等待？

进程转储是在 64 位机器上进行的，进程是 64 位进程，我的开发盒也是 64 位机器和 64 位 windbg

**[更新]** 当我使用 !mlocks（sosex 扩展）时，我看到它显示完全不同的锁，这是一个 TCP 连接。

# c - 此语句中使用了无意义的三元运算符

> ID：14353271
> 
> 赞同：2
> 
> 时间：2013-01-16T07:28:40.830
> 
> 标签：c

```
gcc 4.7.2
c89 
```

你好，

我有这个函数，它将一个指针分配给另一个指针，该指针是字符串结构的一个元素。

这个字符串结构的目的是获取和设置实际字符串的长度。

但是，我不明白他们为什么使用三元运算符。这对我来说没有意义。除了 之外似乎没有任何条件`str->len = src`。它只分配而不比较任何东西。

```
typedef struct tag_str_t str_t;
struct tag_str_t {
    char *buf;
    size_t len;
};

static void string_set(str_t *str, const char *src)
{
    str->buf = (char*)src;
    str->len = src ? strlen(src) : 0;
} 
```

这样做会不会同样简单且更具可读性？

```
str->len = strlen(src); 
```

非常感谢您的任何建议，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T07:32:11.963

调用`strlen(NULL)`将生成一个段错误，该代码仅说明如果 src 字符串为 NULL，则长度为零，如果不计算长度，则使用`strlen`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T07:34:52.953

编码：

```
str->len = src ? strlen(src) : 0; 
```

相当于：

```
str->len = ((src != 0) ? strlen(src) : 0); 
```

我添加了括号和额外的表达式来指示表达式的组成部分在哪里。您的评论似乎表明您认为`str->len = src`是三元运算符中的条件，但这是错误的；分配的优先级很低。

正如[Jesus Ramos](https://stackoverflow.com/users/392046/jesus-ramos)还[解释](https://stackoverflow.com/a/14353333/15168)的那样，测试的目的是确保`strlen()`不会使用 NULL 指针调用它，这会导致崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T07:40:08.627

三元运算符在那里不是用来比较而是检查`src`. 假设如果您传递`NULL`as `src`，那么代码将调用`Undefined Behavior`. 因此，三元运算符检查为：

```
if( src != NULL )
    str->len = strlen(src) ; 
else
    str->len = 0 ; 
```

# javascript - JavaScript - XMLHttpRequest 响应状态 0

> ID：14353272
> 
> 赞同：2
> 
> 时间：2013-01-16T07:28:43.420
> 
> 标签：javascript, xmlhttprequest

我想从 XML 文件中获取数据到 JS 变量（我想使用纯 JS，没有 jQuery）。但是我在下载文件时总是出错：

```
var url = "http://www.w3schools.com/xml/note.xml";

var xmlhttp = new XMLHttpRequest();
xmlhttp.open("GET", url, true);
xmlhttp.onreadystatechange = function(event){ processRequest(event,xmlhttp); };
xmlhttp.send();

function processRequest(event,xmlhttp) {
    if(xmlhttp.readyState != 4) return;
    alert("status: " +xmlhttp.status);
} 
```

响应 xml 始终为空 - 响应状态为 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:33:37.593

尝试本地网址。[您的代码与同源政策](http://www.w3.org/Security/wiki/Same_Origin_Policy)不匹配

ps w3schools 不是你想学习的地方，mdn 和 dochub.io ;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T07:34:18.713

这是因为它违反了**同源政策。**

做：

1.  转到 w3School 网站。
2.  打开开发者控制台。
3.  粘贴并运行您的代码，您将得到结果

# c - 应用程序崩溃，但未生成核心转储

> ID：14353274
> 
> 赞同：7
> 
> 时间：2013-01-16T07:28:45.667
> 
> 标签：c, linux, gdb, opensuse, suse

我有一个问题，我的应用程序在几天/几周后继续转储核心，但不幸的是，没有生成核心转储。

我们尝试设置`ulimit -c unlimited`但没有成功，因此我们`setrlimit`在代码本身中加入了功能，但这种方法也没有运气。而且，除此之外，我们还添加了 MALLOC_CHECK_。

有趣的是，当我们尝试启动手动核心转储（使用`kill -ABRT <pid>`）时，它确实生成了核心转储。

我可以看到以下消息`/var/log/message`

> 内核：[2302077.396021] myapp [22140]：段错误在 54552e42 ip 00000000f773f36f sp 00000000fffdc48c 错误 4 in ld-2.11.3.so [f7727000+1f000]

环境：sles11

关于如何使应用程序更可靠地生成核心转储的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T03:24:44.697

许多当前系统都配置为不会留下核心转储（普通用户不知道如何处理它们）。

*   确保启动可以转储核心的进程（可写目录，足够的空间；我不确定进程中的目录更改是否会干扰这里）
*   确保在启动进程的同一个 shell 中提供“ulimit -c unlimited”
*   如果程序是 SUID 或 SGID，出于安全原因，内核将拒绝使其转储内核，请查看[此问题](https://unix.stackexchange.com/questions/15531/how-come-no-core-dump-is-create-when-an-application-has-suid-set)以获取指导

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:12:06.060

我刚刚在 SLES 11 上遇到了同样的问题。除了给出的建议之外，特别是设置“ulimit -c unlimited”，您还需要做一些事情：

1.  修改 /etc/security/limits.conf 以添加以下行。然后注销并再次登录以确保安全。

    ```
    *               soft    core            unlimited 
    ```

2.  默认内核核心模式是“/var/log/cores/%e/%p-%s-%t.core”。（参见 core(5)。）如果目录部分不存在，Linux 将不会创建核心文件。因此，您需要创建“%e”位，这是您的二进制文件的名称，或者您可以更改模式。

# iphone - 当 TableView 滚动比值更改时

> ID：14353280
> 
> 赞同：2
> 
> 时间：2013-01-16T07:28:51.640
> 
> 标签：iphone, ios, uitableview

我已经创建了一个表格视图，它显示来自数组的数据。但是现在当我滚动表格视图时，我的数据会发生不可接受的变化。

那么，如何在创建表视图时第一次滚动和设置所有数据时防止表视图刷新。

这是我的代码：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
ExampleAppDataObject* theDataObject = [self theAppDataObject];    // Return the number of sections.
    return theDataObject.vendorTableAry.count;  //this is return value of array and it will be more than 2 which help to create section
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return 4;   // i want only 4 row in each section
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    ExampleAppDataObject* theDataObject = [self theAppDataObject]; 

    static NSString *SimpleTableIdentifier = @"SimpleTableIdentifier";

    UITableViewCell * cell = [tableView
                              dequeueReusableCellWithIdentifier: SimpleTableIdentifier];

    if(cell == nil) {

        cell = [[UITableViewCell alloc]
                 initWithStyle:UITableViewCellStyleDefault
                 reuseIdentifier:SimpleTableIdentifier];

        /*cell = [[[UITableViewCell alloc]
         initWithStyle:UITableViewCellStyleSubtitle
         reuseIdentifier:SimpleTableIdentifier] autorelease];
         */

        if (indexPath.row==0) {
            UILabel * vendorLbl = [[UILabel alloc] initWithFrame:CGRectMake(10, 2, 60, 39)];
            [[vendorLbl layer] setCornerRadius:5.0f];
            //[vendorLbl setFont:[UIFont fontWithName:@"Helvetica-Bold" size:13.0]];
            vendorLbl.backgroundColor = [UIColor clearColor];

            [vendorLbl setText:@"vender"];

            [cell.contentView addSubview:vendorLbl];

            UILabel * columnLbl = [[UILabel alloc] initWithFrame:CGRectMake(80, 2, 10, 39)];

            columnLbl.backgroundColor = [UIColor clearColor];

            [columnLbl setText:@":"];

            [cell.contentView addSubview:columnLbl];

            UILabel * vendorValueLbl = [[UILabel alloc] initWithFrame:CGRectMake(98, 2, 195, 39)];

            [[vendorValueLbl layer] setCornerRadius:5.0f];
            //[vendorLbl setFont:[UIFont fontWithName:@"Helvetica-Bold" size:13.0]];
            vendorValueLbl.backgroundColor = [UIColor clearColor];

            [vendorValueLbl setText:[theDataObject.vendorTableAry objectAtIndex:indexPath.section]];

            [cell.contentView addSubview:vendorValueLbl];
        }
        if (indexPath.row==1) {
            UILabel * vendorLbl = [[UILabel alloc] initWithFrame:CGRectMake(10, 2, 60, 39)];
            [[vendorLbl layer] setCornerRadius:5.0f];
            //[vendorLbl setFont:[UIFont fontWithName:@"Helvetica-Bold" size:13.0]];
            vendorLbl.backgroundColor = [UIColor clearColor];

            [vendorLbl setText:@"Gallons"];

            [cell.contentView addSubview:vendorLbl];

            UILabel * columnLbl = [[UILabel alloc] initWithFrame:CGRectMake(80, 2, 10, 39)];

            columnLbl.backgroundColor = [UIColor clearColor];

            [columnLbl setText:@":"];

            [cell.contentView addSubview:columnLbl];

            UILabel * vendorValueLbl = [[UILabel alloc] initWithFrame:CGRectMake(98, 2, 195, 39)];

            [[vendorValueLbl layer] setCornerRadius:5.0f];
            //[vendorLbl setFont:[UIFont fontWithName:@"Helvetica-Bold" size:13.0]];
            vendorValueLbl.backgroundColor = [UIColor clearColor];

            [vendorValueLbl setText:[theDataObject.gallonsTableAry objectAtIndex:indexPath.section]];

            [cell.contentView addSubview:vendorValueLbl];
        }
        if (indexPath.row==2) {
            UILabel * vendorLbl = [[UILabel alloc] initWithFrame:CGRectMake(10, 2, 60, 39)];
            [[vendorLbl layer] setCornerRadius:5.0f];
            //[vendorLbl setFont:[UIFont fontWithName:@"Helvetica-Bold" size:13.0]];
            vendorLbl.backgroundColor = [UIColor clearColor];

            [vendorLbl setText:@"Route"];

            [cell.contentView addSubview:vendorLbl];

            UILabel * columnLbl = [[UILabel alloc] initWithFrame:CGRectMake(80, 2, 10, 39)];

            columnLbl.backgroundColor = [UIColor clearColor];

            [columnLbl setText:@":"];

            [cell.contentView addSubview:columnLbl];

            UILabel * vendorValueLbl = [[UILabel alloc] initWithFrame:CGRectMake(98, 2, 195, 39)];

            [[vendorValueLbl layer] setCornerRadius:5.0f];
            //[vendorLbl setFont:[UIFont fontWithName:@"Helvetica-Bold" size:13.0]];
            vendorValueLbl.backgroundColor = [UIColor clearColor];

            [vendorValueLbl setText:[theDataObject.routeTableAry objectAtIndex:indexPath.section]];

            [cell.contentView addSubview:vendorValueLbl];
        }
        if (indexPath.row==3) {
            UILabel * vendorLbl = [[UILabel alloc] initWithFrame:CGRectMake(10, 2, 60, 39)];
            [[vendorLbl layer] setCornerRadius:5.0f];
            //[vendorLbl setFont:[UIFont fontWithName:@"Helvetica-Bold" size:13.0]];
            vendorLbl.backgroundColor = [UIColor clearColor];

            [vendorLbl setText:@"Date"];

            [cell.contentView addSubview:vendorLbl];

            UILabel * columnLbl = [[UILabel alloc] initWithFrame:CGRectMake(80, 2, 10, 39)];

            columnLbl.backgroundColor = [UIColor clearColor];

            [columnLbl setText:@":"];

            [cell.contentView addSubview:columnLbl];

            UILabel * vendorValueLbl = [[UILabel alloc] initWithFrame:CGRectMake(98, 2, 195, 39)];

            [[vendorValueLbl layer] setCornerRadius:5.0f];
            //[vendorLbl setFont:[UIFont fontWithName:@"Helvetica-Bold" size:13.0]];
            vendorValueLbl.backgroundColor = [UIColor clearColor];

            [vendorValueLbl setText:[theDataObject.dateTableAry objectAtIndex:indexPath.section]];

            [cell.contentView addSubview:vendorValueLbl];
        }

    }
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T07:30:07.817

只需设置`dequeueReusableCellWithIdentifier`如下`nil`..

```
UITableViewCell * cell = [tableView dequeueReusableCellWithIdentifier: nil]; 
```

# java - Quartz Scheduler：将不同作业的日志输出记录到不同的日志文件

> ID：14353285
> 
> 赞同：1
> 
> 时间：2013-01-16T07:29:11.810
> 
> 标签：java, logging, log4j, quartz-scheduler

假设我有 2 个使用 Quartz-Scheduler 安排的作业

*   工作1
*   工作2

到目前为止，这两个作业的日志输出都转储在同一个日志文件中。我想将这两个作业的输出记录到两个不同的文件中

*   日志文件-job1.txt
*   日志文件-job2.txt

如此有效地在一天结束时，我想要 3 个不同的日志文件

1.  Quartz-Scheduler（主线程日志文件，单独）
2.  jogfile-job1.txt（单独的日志文件）
3.  jogfile-job2.txt（单独的日志文件）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T19:26:32.103

如果切换到[logback](/questions/tagged/logback "显示标记为“logback”的问题")是一个选项，那么您只需要内置：[MDC](http://logback.qos.ch/manual/mdc.html)和[sifting appenders](http://logback.qos.ch/manual/appenders.html#SiftingAppender)。首先将此 try-finally 子句添加到您的每个作业中（您可以使用作业侦听器来避免重复）：

```
public void execute(JobExecutionContext context) {
    MDC.put("jobId", "job1");
    try {
        //do all the work here
    } finally {
        MDC.remove("jobId");
    }
} 
```

将所有代码放在里面很重要`try`，而不是之前或之后。准备好工作后，将其放入`logback.xml`：

```
<appender name="SIFT" class="ch.qos.logback.classic.sift.SiftingAppender">
    <discriminator>
      <key>jobId</key>
      <defaultValue>unknown</defaultValue>
    </discriminator>
    <sift>
      <appender name="FILE-${jobId}" class="ch.qos.logback.core.FileAppender">
        <file>logfile-${jobId}.log</file>
        <layout class="ch.qos.logback.classic.PatternLayout">
          <pattern>%d [%thread] %level %mdc %logger{35} - %msg%n</pattern>
        </layout>
      </appender>
    </sift>
</appender> 
```

它会“正常工作”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:00:46.933

您可以有两个 log4j 属性文件并像这样配置

```
public class Job1 {
    static Logger log = Logger.getLogger(Job1.class);
    Job1() {
        PropertyConfigurator.configure("log4j.properties");
        log.info("Job1 initilized");
    }
}

public class Job2 {
    static Logger log = Logger.getLogger(Job2.class);
    Job2() {
        PropertyConfigurator.configure("log4j1.properties");
        log.info("Job2 initilized");
    }
} 
```

在 log4j.properties 中指定`log4j.appender.R.File=logfile-job1.log`和 log4j1.properties 指定`log4j.appender.R.File=logfile-job2.log`就是这样。

# android - CalendarView 安卓小部件

> ID：14353290
> 
> 赞同：0
> 
> 时间：2013-01-16T07:29:29.580
> 
> 标签：android, calendarview

我想访问 CalendarView 小部件上的一些日期并更改这些特定日期的文本颜色。我可以通过创建一个对象来访问 CalendarView。我怎样才能进一步访问它的子元素（即，特别是日期，我猜这些只是列表视图中的文本视图）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:34:09.133

看看这个[例子](http://code.google.com/p/android-calendar-view/)，肯定对你有帮助。

# c# - linq 查询中的聚合对

> ID：14353293
> 
> 赞同：1
> 
> 时间：2013-01-16T07:29:36.717
> 
> 标签：c#, linq, linq-to-entities

我在框架 4.0 上。这是一个 WPF 应用程序，在 sql server CE 上，有点限制。我有一个看起来像这样的实体：

```
 public class TimeEvent
    {
       public int Id
       {get; set;}
       public DateTime EventDate
       {get; set;}
       public bool CheckIn
       {get; set;}
    } 
```

我有两种类型的事件，一种用于签入（`CheckIn`为真），一种用于结帐（`CheckIn`为假）。每个事件每天发生一次。我想要使​​用 linq to entity 做的是最终得到一组像这样的对象：

```
public class Diff
{
   public DateTime Date //The date of both events
   {get; set;}
   public DateTime CheckInTime //Time of first event
   {get; set;}
   public DateTime CheckOutTime //Time of second event
   {get; set;}
   public int Hours //Difference in hours.
   { get { return (CheckOutTime - CheckInTime).Hours;} 
} 
```

有适当的验证规则，因此一天内每种类型的事件不会超过一个。我尝试使用聚合函数，但我真的一无所获。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:38:42.073

`EventDate`按日期部分对您的时间事件进行分组。为此，您需要使用`EntityFunctions.TruncateTime`方法（简单`EventDate.Date`不适用于实体框架）。

```
var query = from t in db.TimeEvents
            group t by EntityFunctions.TruncateTime(t.EventDate) into g
            let checkIn = g.Min(x => x.EventDate)
            let checkOut = g.Max(x => x.EventDate)           
            select new Diff {
                Date = g.Key,
                CheckInTime = checkIn,
                CheckOutTime = checkOut                    
            }; 
```

您也可以在服务器端使用`EntityFunctions.DiffHours(checkOut, checkIn)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:46:09.370

我想你有一个`TimeEvent`s( `List<TimeEvent>`) 的列表，我会认为它是`timeEvents`.

我所有的代码都在下面给出。

```
 List<TimeEvent> timeEvents = new List<TimeEvent>();

                    //dummy values.
                    DateTime now = DateTime.Now;
                    for (int i = 0; i < 8; i++)
                    {
                        timeEvents.Add(new TimeEvent() { Id = i, EventDate = now, CheckIn = false });
                        now = now.Add(TimeSpan.Parse("3:1"));
                        timeEvents.Add(new TimeEvent() { Id = i, EventDate = now, CheckIn = true });
                        now = now + TimeSpan.Parse("1");
                    }

                    //group by 
                    var dataSet = timeEvents.GroupBy(a => a.EventDate.Date);
                    List<Diff> diffs = new List<Diff>();
                    foreach (var x in dataSet) 
                    {
                        if (!(x.Count() == 1))
                        {
                            diffs.Add(new Diff() { Date = x.ElementAt(0).EventDate.Date, CheckInTime = (x.ElementAt(0).CheckIn == true) ? x.ElementAt(0).EventDate : x.ElementAt(1).EventDate, CheckOutTime = (x.ElementAt(0).CheckIn == false) ? x.ElementAt(0).EventDate : x.ElementAt(1).EventDate });

                        }

                    }

                    //diffs list is full. now you can use the diffs as you like :) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T10:36:34.297

无论您创建什么聚合委托，EF 都需要将其转换为 SQL。即使您的数据非常干净且有序，这也将是一个挑战。为什么不直接使用这个。

```
static IEnumerable<Diff> GetDiffs(YourContext context)
{
    bool? checkedIn;
    DateTime lastDate;
    foreach (var event in context.TimeEvents.OrderBy(te => te.EventDate))
    {
        if ((checkedIn.HasValue && checkedIn.Value = !event.CheckIn) ||
                (!checkedIn.HasValue && event.CheckIn))
        {
            if (checkedIn.HasValue && !event.CheckIn)
            {
                yield return new Diff
                    {
                        CheckInTime = lastDate;
                        CheckOutTime = event.EventDate;
                    };
            }                    

            checkedIn = event.CheckIn;
            lastDate = event.EventDate;
        }
    }
} 
```

这样，您的数据从哪里开始或它是否正确触发都无关紧要。我也忽略了你的虚假`Diff.Date`财产。它不处理签入期间桥接日边界。

# python - 如何在没有短名称的情况下调用全局函数？

> ID：14353297
> 
> 赞同：0
> 
> 时间：2013-01-16T07:29:58.240
> 
> 标签：python, python-2.7

我有两个函数组织在两个文件中。例如

文件 a.py

```
import b

def a():
    print "a"

if __name__ == "__main__":
    b.b() 
```

文件 b.py

```
import a           # this is what I want to eliminate

def b():
    a.a()          # could I invoke a from a.py with simply a()? 
```

是否可以`a`直接从 b.py 调用而无需导入`a`，只需使用简单名称`a()`而不是完全限定名称？

谢谢和最好的问候！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T07:43:56.690

这两个文件在一个模块中吗？如果是这样，您可以使用`__init__.py`从以下位置导入您的函数`a`：

`mymodule`/ `__init__.py`:

```
 from a import afunc 
```

`mymodule`/ `a.py`:

```
 def afunc(): 
        print "afunc" 
```

然后在`mymodule`/ `b.py`：

```
 from mymodule import afunc
    afunc() 
```

这样，将来如果您更改 的名称`a.py`，您只需在您的`__init__.py`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T07:33:59.260

不，Python 怎么知道`a`应该在哪里？您的系统上可能有数千个 Python 文件，并且意味着其中的任何一个。

正如您所说，您将代码*组织*在两个文件中。让整个系统上的每个文件中的每个功能始终可用并不是很有条理。

但是你可以这样做：

```
# b.py
from a import a

def b():
    a() 
```

这会从您的模块中提取一个函数，因此您无需使用模块名称来调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T07:33:34.180

你需要导入——但你可以做到`from a import a`。然后，您可以将其用作`a()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T07:58:34.317

如果你*真的*想这样做（你*真的*不想这样做），你总是可以从外部`a`注入。`b`

一个.py：

```
import b

def a():
    print "a"

b.a = a

if __name__ == "__main__":
    b.b() 
```

b.py：

```
"""NOTE: Before you can use this module, you must set `b.a` to a function of
   no arguments that does ____!"""

def b():
    a() 
```

* * *

有一个`set_a`函数可能会更干净：

一个.py：

```
import b

def a():
    print "a"

b.set_a(a)

if __name__ == "__main__":
    b.b() 
```

b.py：

```
a = None

def set_a(func):
    a = func

def b():
    if not a:
        raise Exception('You must call b.set_a before you can call b.b!')
    a() 
```

这种模式的版本有时确实会出现*。*有时，用户`b`不需要考虑`b.B`对象，所以有一些使用单例对象的便利函数——比如在[`random`](http://docs.python.org/2/library/random.html). 现在，如果`B`有任何需要接受函数的函数（例如，处理程序、回调、替代套接字工厂……），您可能会有一个`b.set_a`类型函数。

* * *

无论如何，正如我在评论中解释的那样，我认为正确的答案是重构`a.py`为一个模块和一个调用它`a.py`的单独脚本。`main.py`然后`b.py`可以依赖`a`而不依赖于你的主要，这是你试图避免的。

一个.py：

```
def a():
    print "a" 
```

b.py：

```
import a

def b():
    a.a() 
```

主要.py：

```
import b
if __name__ == '__main__':
    b.b() 
```

很好很简单。真的，在这种情况下你甚至不需要那个`if __name__`位，因为没有人会`import main`。

# java - 在 Java 中显示图像

> ID：14353302
> 
> 赞同：19
> 
> 时间：2013-01-16T07:30:14.087
> 
> 标签：java, image-processing

我想显示图像但不知道该怎么做。我是否必须安装一些库文件或者只是可以完成我不知道。其实我想做图像处理，但首先我必须把图像输入和显示图像，然后我才能得到图像处理的效果作为输出，并决定它（算法）是否正确。我只安装了eclipse。我也在谷歌上搜索过，但无论他们建议什么都不好用。要么我必须安装一些东西。

我尝试了以下代码：

```
public class ImageTest {
    public static void main(String[] args){
        EventQueue.invokeLater(new Runnable() {
            public void run(){
                ImageFrame frame = new ImageFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setVisible(true);
            }
        }
        );
    }
}

class ImageFrame extends JFrame{
    public ImageFrame(){
        setTitle("ImageTest");
        setSize(DEFAULT_WIDTH, DEFAULT_HEIGHT);

        ImageComponent component = new ImageComponent();
        add(component);
        getContentPane().validate();
        getContentPane().repaint();
    }

    public static final int DEFAULT_WIDTH = 300;
    public static final int DEFAULT_HEIGHT = 200;
}

class ImageComponent extends JComponent{
    private static final long serialVersionUID = 1L;
    private Image image;
    public ImageComponent(){
        try{
            File image2 = new File("bishnu.jpg");
            image = ImageIO.read(image2);
        } catch (IOException e){
            e.printStackTrace();
        }
    }
    public void paintComponent (Graphics g){
        if(image == null) return;
        int imageWidth = image.getWidth(this);
        int imageHeight = image.getHeight(this);

        g.drawImage(image, 50, 50, this);

        for (int i = 0; i*imageWidth <= getWidth(); i++)
            for(int j = 0; j*imageHeight <= getHeight();j++)
                if(i+j>0) g.copyArea(0, 0, imageWidth, imageHeight, i*imageWidth, j*imageHeight);
    }
} 
```

它只是显示一个图形窗口，但不能显示图像“bishnu.jpg”

我应该在eclipse中安装任何东西吗？但我认为不需要安装任何东西。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-09-18T14:15:56.867

```
import java.awt.FlowLayout;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

public class DisplayImage {

    public static void main(String avg[]) throws IOException
    {
        DisplayImage abc=new DisplayImage();
    }

    public DisplayImage() throws IOException
    {
        BufferedImage img=ImageIO.read(new File("f://images.jpg"));
        ImageIcon icon=new ImageIcon(img);
        JFrame frame=new JFrame();
        frame.setLayout(new FlowLayout());
        frame.setSize(200,300);
        JLabel lbl=new JLabel();
        lbl.setIcon(icon);
        frame.add(lbl);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-16T09:12:42.143

调整路径后，运行您的代码会为我显示图像。您能否验证您的图像路径是否正确，例如尝试绝对路径？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-30T12:19:27.810

如果您想加载/处理/显示图像，我建议您使用图像处理框架。例如，使用[Marvin](http://marvinproject.sourceforge.net/)，您只需几行源代码即可轻松完成此操作。

**源代码：**

```
public class Example extends JFrame{

    MarvinImagePlugin prewitt           = MarvinPluginLoader.loadImagePlugin("org.marvinproject.image.edge.prewitt");
    MarvinImagePlugin errorDiffusion    = MarvinPluginLoader.loadImagePlugin("org.marvinproject.image.halftone.errorDiffusion");
    MarvinImagePlugin emboss            = MarvinPluginLoader.loadImagePlugin("org.marvinproject.image.color.emboss");

    public Example(){
        super("Example");

        // Layout
        setLayout(new GridLayout(2,2));

        // Load images
        MarvinImage img1 = MarvinImageIO.loadImage("./res/car.jpg");
        MarvinImage img2 = new MarvinImage(img1.getWidth(), img1.getHeight());
        MarvinImage img3 = new MarvinImage(img1.getWidth(), img1.getHeight());
        MarvinImage img4 = new MarvinImage(img1.getWidth(), img1.getHeight());

        // Image Processing plug-ins
        errorDiffusion.process(img1, img2);
        prewitt.process(img1, img3);
        emboss.process(img1, img4);

        // Set panels
        addPanel(img1);
        addPanel(img2);
        addPanel(img3);
        addPanel(img4);

        setSize(560,380);
        setVisible(true);
    }

    public void addPanel(MarvinImage image){
        MarvinImagePanel imagePanel = new MarvinImagePanel();
        imagePanel.setImage(image);
        add(imagePanel);
    }

    public static void main(String[] args) {
        new Example().setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

**输出：**

![在此处输入图像描述](../Images/d8b7f410293a377a51c695951abbdf9f.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-23T03:40:31.817

作为初学者，我发现很容易看到您绘制的图片：

**源代码**

```
public class CheckCodeTest  {

    private int width = 100, height = 50;
    private BufferedImage image = new BufferedImage(width, height,
                                      BufferedImage.TYPE_INT_RGB);

    @Test
    public void drawGraphicsTest() throws IOException {

        Graphics graphics = image.createGraphics();

        // draw an orange rectangle
        graphics.setColor(Color.orange);
        graphics.fillRect(0,0,width,height);

        // layout the picture right now!
        graphics.drawImage(image,0,0,null);
        ImageIO.write(image, "png", new File("checkcode.png"));
    }
} 
```

**输出**

它会在您的项目内容下生成一个图片文件。

[输出图片](https://i.stack.imgur.com/N3Ns5.png)

然后可以看到在小窗口中添加绘制代码后有什么变化，比关闭一个跳出的Frame/Label窗口更方便：

[输出编辑器中的图片](https://i.stack.imgur.com/DRwjx.png)

希望能帮助到你。

# semantic-web - OWL 中的 DL 查询没有推论 - API

> ID：14353303
> 
> 赞同：0
> 
> 时间：2013-01-16T07:30:17.320
> 
> 标签：semantic-web, ontology, owl, protege, dlquery

我正在尝试编写查询

> Hospitals 和 hasNameWithWords 值“中心”^^string

此查询返回我在 Protege 4.2 中使用 FACT++ 推理器和 Hermit 推理器的医院名称中包含“中心”的实例

[但是当我在网站http://sourceforge.net/p/owlapi/code/ci/aef6981535f07a2d0d44c394b9f4d5415f36025a/tree/contract/src/test/java/org/](http://sourceforge.net/p/owlapi/code/ci/aef6981535f07a2d0d44c394b9f4d5415f36025a/tree/contract/src/test/java/org/coode/owlapi/examples/DLQueryExample.java)中提供的 OWL-API 的 DL 查询示例中输入相同的查询时 [代码/owlapi/examples/DLQueryExample.java](http://sourceforge.net/p/owlapi/code/ci/aef6981535f07a2d0d44c394b9f4d5415f36025a/tree/contract/src/test/java/org/coode/owlapi/examples/DLQueryExample.java)

我没有得到任何结果。

但是当我编写简单的查询时，它给了我结果，例如

> 医院

是不是因为代码中的推理器无法进行推理？

还有什么推理机更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:24:05.147

您用作示例的类 ( `DLQueryExample.java`) 依赖于 OWL-API 内置的*结构推理*器( `OWLReasonerFactory reasonerFactory = new StructuralReasonerFactory();`)。

这种类型的推理器相当简单，不适合像您这样的复杂查询。但是，它可以提供有关类层次结构的答案：这就是为什么您可以通过简单的查询获得一些结果的原因`Hospitals`。

您需要做的是将您的代码设置为使用 Hermit 或 FACT++。我以[Hermit](http://hermit-reasoner.com/)为例：

*   [下载](http://hermit-reasoner.com/)HermiT jar 文件并将其添加到项目的类路径中。
*   在您的班级中，将行替换为`OWLReasonerFactory reasonerFactory = new StructuralReasonerFactory();`：`OWLReasonerFactory reasonerFactory = new Reasoner.ReasonerFactory();`。您应该必须导入`org.semanticweb.HermiT.Reasoner`才能使其正常工作。
*   我们刚刚用 HermiT 替换了默认的推理器。其余代码应该保持不变，您的查询现在应该可以工作了。
*   您可以尝试[FaCT++](http://code.google.com/p/factplusplus/)和[Pellet](http://clarkparsia.com/pellet)并比较速度等...

# extjs3 - 如何在 extjs 3 checkboxselectionmodel 中使用 shift 键进行多行选择，同时保持默认控制功能？

> ID：14353306
> 
> 赞同：0
> 
> 时间：2013-01-16T07:30:23.370
> 
> 标签：extjs3

如何在 extjs 3 checkboxselectionmodel 中使用 shift 键进行多行选择，同时保持默认控制功能？请指导我，这对我来说真的很紧急，因为我正在做 POC。我尝试了很多，甚至尝试了使用 jquery 多选网格的选项。但无法在 checkboxselectionmodel 上调用 jquery 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:17:21.743

```
checkOnly : true, 
```

是**checkboxselectionmodel**中的配置选项，它只允许用户单击复选框列进行检查，并且在单击行时它不会选择复选框，它只会选择行。

# vim - Vim 的运行时路径上是否有 maxlength，如果有，我该如何提高它？

> ID：14353307
> 
> 赞同：2
> 
> 时间：2013-01-16T07:30:26.120
> 
> 标签：vim

我通过 vundle 添加了很多捆绑包，并且`runtimepath`在 1024 个字符之后似乎被切断了。

我通过显示路径`set runtimepath`并打印出一个似乎在 1024 个字符后被切断的字符串。

为简洁起见，我将仅显示结尾`runtimepath`。

```
~/.vim/bundle/nginx-vim-syntax,~/.vim/bundle/ultisnips,~/.vim/bundle/ultisnip-snippets,~/.vim,/usr 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T08:26:27.797

以下来自[`:help options`](http://vimdoc.sourceforge.net/htmldoc/options.html#%24HOME)：

```
Note the maximum length of an expanded option is limited.  How much depends on
the system, mostly it is something like 256 or 1024 characters. 
```

我不相信有可能改变这个最大值。但是，如果您执行`:echo &rtp`，则会打印整个值，因此限制似乎仅适用于`:set rtp`。

# java - MyBatis 3 是否需要公共设置器？

> ID：14353318
> 
> 赞同：2
> 
> 时间：2013-01-16T07:31:01.497
> 
> 标签：java, sql, persistence, mybatis

MyBatis 3 在将 SQL 映射到/从的类中是否需要公共 setter（或 getter）？是否可以强制它使用反射？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T16:10:24.417

我不久前尝试过，我认为它确实有效。那是在ibatis中。

mybatis 支持（并记录在案）的是构造函数注入。通过在 resultMap 中使用构造函数标签，您可以指定参数。您确实需要一个匹配的构造函数，这可能很烦人，但它允许您构建不可变对象并避免设置器。

[http://www.mybatis.org/core/sqlmap-xml.html](http://www.mybatis.org/core/sqlmap-xml.html)

# php - 如何在 yii 框架中创建主题？

> ID：14353319
> 
> 赞同：7
> 
> 时间：2013-01-16T07:31:05.587
> 
> 标签：php, drupal, yii, drupal-theming

我是 Yii 框架的新手。我之前在研究 drupal，drupal 制作网站的主题并不难管理。但我只想知道如何使用 Yii 框架为网站创建主题。

我浏览了很多网站，但仍然不知道从哪里开始。例如，我检查了[http://www.yiiframework.com/doc/guide/1.1/en/topics.theming](http://www.yiiframework.com/doc/guide/1.1/en/topics.theming)。

现在我的疑问是：

1.  从哪里开始创建 Yii 主题？假设我想将 drupal 主题更改为 Yii，我该怎么做？
2.  是否可以为不同的页面设置不同的主题？就像在 drupal 中使用 themekey 模块一样，我们可以为不同的页面设置多个主题。

如果有人能一步一步地解释它会很好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T07:38:43.767

您可以编辑布局（*protected/views/layouts/..*）。这些是围绕使用 渲染的单个视图呈现的包装视图`render()`，例如，*站点/索引*调用索引视图（位于*protected/views/index.php*）使用：
`$this->render("index");`

您可以使用以下方法更改每个操作的布局：
`$this->layout = "differentlayout";`

您可以使用以下方法为 Controller 中的所有操作设置布局：
`public $layout='//layouts/differentlayout';`

显然每个布局都可以有一个自定义结构并加载不同的 CSS 和 JS 文件。我知道这不是使用主题和[主题](http://www.yiiframework.com/doc/guide/1.1/en/topics.theming)，但它是迄今为止自定义 Yii 项目外观和感觉的最常见方式

以下是一些关于 YII 主题开发的有用链接：

*   [http://www.yiiframework.com/doc/guide/1.1/en/basics.view](http://www.yiiframework.com/doc/guide/1.1/en/basics.view)
*   [http://www.yiiframework.com/wiki/249/understanding-the-view-rendering-flow/](http://www.yiiframework.com/wiki/249/understanding-the-view-rendering-flow/)
*   [http://mushfiq.me/2011/05/30/creating-a-yii-application-theme-from-a-html-template/](http://mushfiq.me/2011/05/30/creating-a-yii-application-theme-from-a-html-template/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T20:00:15.953

你可以随时下载一些更简单的[Yii 主题](http://yii.themefactory.net/)，看看它们是如何工作的。

- 我是

# .htaccess - .htaccess 规则，哪个是正确的？

> ID：14353321
> 
> 赞同：0
> 
> 时间：2013-01-16T07:31:11.897
> 
> 标签：.htaccess, rewrite

请检查以下两条规则：

```
RewriteRule ^([^/]*).html$ index.php?s=$1 [QSA,L]
RewriteRule ^([^/]*)\.html$ index.php?s=$1 [QSA,L] 
```

你能回答哪个更好用吗？为什么？显然似乎两者都在工作。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:18:06.153

好的，我从 shashank kadne 那里学到了一件我以前没想到的新东西。因此，基本上点 (.) 在正则表达式中具有其自身的意义，它的意思是“任何东西”。要使其仅作为点指示，应将其转义为“。” .

第一条规则是错误的。例如，它将允许 file.dhtml 作为有效规则，但实际上并非如此。

# node.js - 在 Node.js 中将 gzip 压缩的 http 请求正文解压缩为 json

> ID：14353322
> 
> 赞同：4
> 
> 时间：2013-01-16T07:31:20.233
> 
> 标签：node.js, gzip, windows-store-apps

我有一个 Windows 8 应用程序连接到用 Node.js 编写的 Web 服务。在 Windows 8 端，我将请求正文压缩为 gzip。但在 Node.js 方面，我发现我的 req.body 类型是`Object`.

我不能`zlib`用来解压身体，因为它不是`stream`.

我可以`zlib`用来解压缩请求，但我不知道如何`req.body`从解压缩的流中检索内容并以 JSON 格式解析正文。

顺便说一句，我通过 Fiddler 查看了我的请求，它告诉我请求正文已压缩，解压缩后我可以通过 Fiddler 看到我的原始正文，因此请求应该是正确的。

**更新** 如下是我的 Node.js 应用程序

```
（功能 （） {
    var express = require("express");
    var zlib = 要求（“zlib”）；

    var app = express();
    变量端口 = 12345；

    应用程序配置（功能（）{
        app.use(express.compress());
        app.use(express.bodyParser());
    });

    app.post("/test", function (req, res) {
        var request = req.body;
        req.pipe(zlib.createGunzip());

        变量响应 = {
            状态：0，
            值：“确定”
        };
        res.send(200, 响应);
    });

    console.log("从端口 %d 开始", port);
    app.listen（端口）；
})();

```

以下是我的 Windows 商店应用程序代码（部分）

```
        私有异步无效按钮1_Click_1（对象发送者，RoutedEventArgs e）
        {
            var 消息 = 新
            {
                名称=“肖恩”，
                值 = "12345678901234567890123456789012345678901234567890"
            };
            var json = 等待 JsonConvert.SerializeObjectAsync(消息, Formatting.Indented);
            var bytes = Encoding.UTF8.GetBytes(json);

            var client = new HttpClient();
            client.BaseAddress = new Uri("http://192.168.56.1:12345/");
            client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
            client.DefaultRequestHeaders.ExpectContinue = false;
            var jsonContent = new JsonContent(message);
            var gzipContent = new GZipContent3(jsonContent);
            var res = await client.PostAsync("test", gzipContent);

            var dialog = new Windows.UI.Popups.MessageDialog(":)", "完成");
            等待对话框.ShowAsync();
        }

        内部类 GZipContent3 : ByteArrayContent
        {
            公共 GZipContent3（HttpContent 内容）
                ：基础（加载GZipBytes（内容））
            {
                //base.Headers.ContentType = content.Headers.ContentType;
                base.Headers.ContentType = new MediaTypeHeaderValue("x-application/x-gzip");
                base.Headers.ContentEncoding.Add("gzip");
            }

            私有静态字节[] LoadGZipBytes(HttpContent 内容)
            {
                var source = content.ReadAsByteArrayAsync().Result;
                字节[] 缓冲区；
                使用 (var outStream = new MemoryStream())
                {
                    使用 (var gzip = new GZipStream(outStream, CompressionMode.Compress, true))
                    {
                        gzip.Write(source, 0, source.Length);
                    }
                    缓冲区 = outStream.ToArray();
                }
                返回缓冲区；
            }
        }

        内部类 JsonContent : StringContent
        {
            私有常量字符串 defaultMediaType = "application/json";

            公共 JsonContent（字符串 json）
                ：基础（json）
            {
                var mediaTypeHeaderValue = new MediaTypeHeaderValue(defaultMediaType);
                mediaTypeHeaderValue.CharSet = Encoding.UTF8.WebName;
                base.Headers.ContentType = mediaTypeHeaderValue;
            }

            公共 JsonContent（对象内容）
                ：这个（GetJson（内容））
            {
            }

            私有静态字符串 GetJson（对象内容）
            {
                如果（内容 == 空）
                {
                    抛出新的 ArgumentNullException（“内容”）；
                }
                var json = JsonConvert.SerializeObject(内容, Formatting.Indented);
                返回 json；
            }
        }

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:43:27.517

[http://www.senchalabs.org/connect/json.html](http://www.senchalabs.org/connect/json.html)。基本上，您需要基于`connect.json()`该管道通过解压缩流编写自己的中间件，`connect.compress()`但方向相反：[http ://www.senchalabs.org/connect/compress.html](http://www.senchalabs.org/connect/compress.html)

此外，请确保您`Content-Encoding`在请求中发送正确的标头。

如果你告诉我你到目前为止有什么，我可以进一步帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-15T20:04:18.410

我正在做类似的事情并最终登陆

```
function getGZipped(req, callback) {
    var gunzip = zlib.createGunzip();
    req.pipe(gunzip);

    var buffer  = [];
    gunzip.on('data', function (data) {
        // decompression chunk ready, add it to the buffer
        buffer.push(data);
    }).on('end', function () {
        //response and decompression complete, join the buffer and return
        callback(null, JSON.parse(buffer));
    }).on('error', function (e) {
        callback(e);
    });
} 
```

# dll - DB2 生成 DLL 错误

> ID：14353326
> 
> 赞同：1
> 
> 时间：2013-01-16T07:31:34.050
> 
> 标签：dll, db2

今天早上早些时候，我尝试为我的 DB2 数据库创建 DLL，但它不断给出以下消息：

DB2 管理服务器遇到脚本错误。脚本错误代码“1”。

解释：

DB2 管理服务器执行脚本时遇到脚本错误。脚本以错误代码“”退出。

用户反应：

验证脚本是否正确。

如果您在尝试建议的响应后继续收到此错误消息，请参阅 DB2 管理服务器的第一个故障数据捕获日志以获取更多信息或联系 IBM 支持。

谁可以帮我这个事？我的用户是 ROOT，模式是 SQLJ 命令是 db2look -d OBDB -z SQLJ -u ROOT -e -l -x -c ；错误代码是 SQL22220。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:41:11.613

我曾经也有这个问题。可能是您尝试一次为 30 多个表生成 dll。减少数量 表，看看这是否有效。虽然为我工作，但错误也可能是由于其他原因，请让我知道.... :)

# html - 这如何以及为什么起作用？

> ID：14353327
> 
> 赞同：4
> 
> 时间：2013-01-16T07:31:34.637
> 
> 标签：html, css, hide, show, show-hide

这个来自印度的 Motyar 来自网站：[http](http://motyar.blogspot.no/2011/02/handling-onclick-event-with-css.html) ://motyar.blogspot.no/2011/02/handling-onclick-event-with-css.html 展示了一种非常好的纯 css 方法来隐藏和显示 div。但是我似乎无法理解它。这是代码，请向我解释一下，给新手。

HTML（不是我的代码）：

```
<div id="lightbox">

              <a href="#">Hide me</a><br />
              Hi!! <br />

              i am the lighbox

</div>

<a href="#lightbox" >Show the lighbox</a> 
```

CSS（不是我的代码）：

```
#lightbox {
        display:none;
    }

 /* works with IE8+, Firefox 2+, Safari, Chrome, Opera 10+ */

 #lightbox:target {
         display:block;
      } 
```

请向我全面解释一下。谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:36:32.983

例如，在 CSS 中，`:target`放置在 CSS 标记之后`#lightbox`意味着`#lightbox:target`当且仅当您的页面的 URL 附加了`#lightbox`诸如`http://www.stackoverflow.com/#lightbox`. 在这种情况下，浏览器将评估以下代码：

```
#lightbox:target { display:block; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T07:36:13.340

从 [W3 选择器 3 级建议](http://www.w3.org/TR/css3-selectors/#target-pseudo)开始：

> 例子：
> 
> p.note：目标
> 
> 此选择器表示类注释的 ap 元素，它是引用 URI 的目标元素。

因此，当您单击 时`#lightbox`，`lightbox`-Element 将成为您的 URI 的**目标**。

伪选择器可以识别这一点并应用正确的样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T07:36:06.190

关键是`:target`伪选择器。它有资格成为活动锚（`#lightbox`在这种情况下）。

您可以在此处阅读有关此内容的更多信息：http: [//css-tricks.com/on-target/](http://css-tricks.com/on-target/)

# android - 找不到 EOCD，不是 Zip，安装 apk 时显示错误

> ID：14353332
> 
> 赞同：2
> 
> 时间：2013-01-16T07:31:58.233
> 
> 标签：android, apk, adb

当我尝试通过命令提示符安装 apk 时，它会显示如下错误

```
daemon not running. starting it now on port 5037
daemon started successfully
EOCD not found, not Zip
file 'com.directv.dvrscheduler_v2.1.1.apk' is not a valid zip file
rm failed for /data/local/tmp/com.directv.dvrscheduler_v2.1.1.apk, No such file
or directory 
```

帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T06:24:20.553

下载apk出现问题时会出现此问题。您可以静态传输apk或存储设备，然后重试，希望对您有所帮助。我遇到了这个问题，在Skype上传输apk后，我解决了我的问题。

# javascript - 日期时间日历：在单个输入字段中选择日期范围

> ID：14353337
> 
> 赞同：7
> 
> 时间：2013-01-16T07:32:32.610
> 
> 标签：javascript, jquery, html, datepicker, jquery-ui-datepicker

是否有一个 javascript datetimepicker 可以在单个输入字段中选择 2 个日期。喜欢：（ ![在此处输入图像描述](../Images/33196742faff5e90726ab66e72026831.png) 截图取自谷歌分析）

目前我们需要使用 2 个表单输入字段来选择日期范围。

是否有提供此功能的免费日期时间选择器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-02T11:42:25.563

这就是你要找的东西：[https ://github.com/dangrossman/bootstrap-daterangepicker](https://github.com/dangrossman/bootstrap-daterangepicker)

# reporting-services - SSRS 2008R2 如何从一个报表自动刷新到另一个报表

> ID：14353339
> 
> 赞同：-1
> 
> 时间：2013-01-16T07:32:57.217
> 
> 标签：reporting-services, ssrs-2008

我在 SSRS 2008 R2 中创建了一个报告，我希望我的报告每 30 秒后自动刷新一次，但它必须显示不同的报告。我知道如何进行自动刷新，但是每次报告刷新时如何显示不同的报告

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:13:09.003

大师，定义应该显示什么报告的逻辑必须在RS内部/外部的某个组件中。我看到了两种方法来实现这一点：

1.  构建一个包含 n 个子报表的主报表，并根据当前时间将每个子报表变为可见/不可见，创建一个其值随时间变化的隐藏参数。

2.  构建一个 ASP.NET 页面/控件，带有 n 个 ReportViewer，每个子报表一个，并使用计时器控制要显示的一个。

# perl - 在 Perl 中使用引用指向滑动窗口数组

> ID：14353341
> 
> 赞同：3
> 
> 时间：2013-01-16T07:33:09.473
> 
> 标签：perl, reference, character-arrays, slice

这是我的问题：我有 2 个数组。一个是字符数组，代表一个滑动窗口。字符从一开始就被转移并在最后被推动。我想使用第二个数组来存储对在字符移动时“跟随”字符的数组切片的引用。例子：

```
my @char_array = ('h','e','l','l','o','w','o','r','l','d');
my $char_arr_ref=[@char_array[1..$#char_array]]; 
print @$char_arr_ref, "\n"; # slice contains 'elloworld';
shift(@char_array);
push(@char_array), 'x';
print @$char_arr_ref, "\n"; # slice still contains 'elloworld', not 'lloworldx' as I need; 
```

换句话说，我希望能够使用引用数组切片的第二个数组（例如，我会使用 C 中的指针数组）。

在 Perl 中有没有一种惯用的方法来做到这一点？

更新：这是进行快速文本搜索的大型程序的一部分。我打算使用引用哈希（例如，而不是非常缓慢的“索引”函数。我需要在 Perl 中执行此操作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T08:43:52.807

在 C 中，您的窗口可能使用指针算法来实现。

```
const char* s = str+1;
const char* e = str+len;
for (const char* p=s; p!=e; ++p) putc(*p); 
```

除了指针算法不允许您调整缓冲区 ( `push @char_array, 'x';`) 的大小。即使在 C 中，您也必须使用偏移量。

```
size_t si = 1;
size_t ei = len;
for (size_t i=si; i!=e1; ++i) putc(str[i]); 
```

这是幸运的，因为 Perl 没有指针，更不用说指针运算了。但是抵消？没问题！

```
my @char_array = split //, 'helloworld';
my ($s, $e) = (1, $#char_array);
say @char_array[$s..$e];    # elloworld
shift @char_array;
push @char_array, 'x';
say @char_array[$s..$e];    # lloworldx 
```

如果我们实际上是在谈论字符，那么字符串会更有效。

```
my $char_array = 'helloworld';
my ($s, $e) = (1, length($char_array));
say substr($char_array, $s, $e-$s+1);    # elloworld
$char_array =~ s/^.//s;
$char_array .= 'x';
say substr($char_array, $s, $e-$s+1);    # lloworldx 
```

事实上，如果我们真的在谈论字符，我们很幸运，因为我们可以使用左值 substr 并让 Perl 为我们处理偏移量！

```
my $char_array = 'helloworld';
my $substr_ref = \substr($char_array, 1, length($char_array)-1);
say $$substr_ref;        # elloworld
$char_array =~ s/^.//s;
$char_array .= 'x';
say $$substr_ref;        # lloworldx 
```

比 C 更容易，或多或少都有相同的好处！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T08:26:46.970

我不确定你在做什么，我怀疑它是否适合“快速文本搜索”程序。但是，您可以通过使用简单的子例程而不是引用来完成您想要的：

```
#!usr/bin/perl
use strict;
use warnings;

my @char_array = ('h','e','l','l','o','w','o','r','l','d');
sub char_arr_slice { return @char_array[1..$#char_array] };

print char_arr_slice, "\n"; 

shift(@char_array);
push(@char_array, 'x');

print char_arr_slice, "\n"; 
```

**注意：**为什么我有我的怀疑？因为字符数组很少是在 Perl 中处理字符串的正确方法。与使用 Perl 的内置字符串处理工具（尤其是正则表达式）相比，这种方法可能效率较低且笨拙得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T08:42:37.857

这是一个使用重载对象的实现：

```
#!/usr/bin/perl
use strict; use warnings; use feature 'say';

my @array = qw( H e l l o W o r l d );
my $window = SlidingWindow->new(\@array, 1, -1);
say "@$window";
shift @array;
push @array, "x";
say "@$window";

{
    package SlidingWindow;
    use overload '@{}' => sub {
        my ($self) = @_;
        # manage negative indices
        my $min = $self->{min} >= 0 ? $self->{min}
                                    : $#{ $self->{array} } + 1 + $self->{min};
        my $max = $self->{max} >= 0 ? $self->{max}
                                    : $#{ $self->{array} } + 1 + $self->{max};
        return +[ @{ $self->{array} }[$min .. $max] ];
    };
    sub new {
        my ($class, $arrayref, $min, $max) = @_;
        return bless +{
            array => $arrayref,
            min => $min,
            max => $max,
        } => $class;
    }
} 
```

输出：

```
e l l o W o r l d
l l o W o r l d x 
```

当然，您有方法调用的开销，但 Perl 根本没有指针。如果你抱怨`index`太慢（不能更快），你只能改进你的算法，而不是你的实现。

### 更新

池上指出，这`substr`可能是一个可行的选择。以下解决方案没有实际使用数组的美感，而是我们使用*字符串*而不是字符数组。这在 Perl 中是不一样的：字符串的效率要高*得多。*

```
my $charray = "HelloWorld";
say substr($charray, 1);
substr($charray, 0, 1) = "";
$charray .= "x";
say substr($charray, 1); 
```

输出：

```
elloWorld
lloWorldx 
```

# java - 在 OpenShift JBoss AS 7 中更改 URIEncoding

> ID：14353342
> 
> 赞同：2
> 
> 时间：2013-01-16T07:33:20.843
> 
> 标签：java, openid, jboss7.x, openshift

我正在使用 OpenId 模块构建一个带有 Spring Security 的测试应用程序。我还使用[jQuery OpenId 插件](http://jvance.com/pages/JQueryOpenIDPlugin.xhtml)来支持一些提供程序。

我正在使用 Tomcat（版本 7）测试该应用程序，经过一些故障排除后，我发现我需要为服务器指定 URI 编码，以支持其凭据包含波浪字母和元音的用户，例如 Peñasco、Ángel 等。

在 Tomcat 中，我只需将其设置为`tomcat-server.xml`文件：

```
<Connector URIEncoding="UTF-8" SSLEnabled="true" .../> 
```

但是该应用程序被部署在 OpenShift PaaS 上的 JBoss AS 7 盒式磁带中。

在这种情况下如何放置模拟配置？

编辑：

我添加了`.openshift / action_hooks / pre_start_jbossas-7`包含以下内容的文件：

```
#!/bin/bash

# Need to set URI encoding to UTF-8 because of Spring Security OpenID module needs it for tilded letters e.g. ñ, Á

export JAVA_OPTS=" -Dorg.apache.catalina.connector.URI_ENCODING=\"UTF-8\" -Dorg.apache.catalina.connector.USE_BODY_ENCODING_FOR_QUERY_STRING=true" 
```

但它不能远程工作，我在本地服务器上使用了相同的选项，但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-19T23:36:25.670

对我来说，添加

```
URIEncoding="UTF-8" 
```

进入 .openshift\config\server.xml 中

```
<Connector address="${OPENSHIFT_JBOSSEWS_IP}"
           port="${OPENSHIFT_JBOSSEWS_HTTP_PORT}"
           protocol="HTTP/1.1"
           URIEncoding="UTF-8"
           connectionTimeout="20000"
           redirectPort="8443"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T18:57:23.440

在 JBoss AS7 中，您可以使用系统属性配置此功能：

```
-Dorg.apache.catalina.connector.URI_ENCODING="UTF-8"
-Dorg.apache.catalina.connector.USE_BODY_ENCODING_FOR_QUERY_STRING="true" 
```

参考见：[https ://community.jboss.org/message/643825#643825](https://community.jboss.org/message/643825#643825)

您也可以在 的`<system-properties>`部分中设置这些`standalone.xml`，但在 OpenShift 上，此文件不受您的应用程序控制。对于 OpenShift 应用程序，您需要通过在应用程序的预启动挂钩中设置 JAVA_OPTS 来使用这些选项启动 JBoss。为此，请将以下内容添加到`.openshift/action-hooks/pre_start_jbossas-7`文件中：

```
export JAVA_OPTS="$JAVA_OPTS -Dorg.apache.catalina.connector.URI_ENCODING=\"UTF-8\" \
                  -Dorg.apache.catalina.connector.USE_BODY_ENCODING_FOR_QUERY_STRING=\"true\"" 
```

希望这可以帮助。如果您遇到问题，请发表评论。

# asp.net - JQuery-Mobile 和 ASP.Net - AJAX 还是回发？

> ID：14353343
> 
> 赞同：9
> 
> 时间：2013-01-16T07:33:26.897
> 
> 标签：asp.net, jquery-mobile

我过去一直在开发 ASP.Net，直到最近才遇到一个移动项目。Jquery-Mobile 作为一个框架似乎很完美，所以我只是深入研究了它。

目前我正在使用 ASP.Net 方法将服务器控件放在页面上，然后使用 jqm 来增强这些控件以使它们看起来可移动。我实际上是通过回发来收集表单数据并在代码隐藏中处理它们。为了避免整页刷新，我也不得不将它们与 updatepanel 混合使用。不知何故，我让他们工作，但在内心深处，我只是觉得这不是正确的方式（或有效的方式）。

将事情混合起来以使它们正确存在太多的复杂性，所以我想也许我应该避免回发并在纯 AJAX 请求中做所有其他事情？

```
$.ajax({
 type: 'POST',
  url: "/GetName",
  data: "{}",
  contentType: "application/json; charset=utf-8"

})
.success(function (response) {
  alert(response);
}); 
```

代码隐藏：

```
[WebMethod ()] 
public String GetName()
{ return "Jack"; } 
```

问题：

*   这行得通，但这是与 jQuery-Mobile 网站一起使用的更好方法，还是这只是另一个不好的例子？

*   对于这种情况，UpdatePanel 和回发是一个坏主意吗？（我知道他们工作）

*   如果首选 AJAX，我该如何在页面加载时填充下拉列表（不是服务器控件）？发送 AJAX 请求以填充 $(document).ready() 上的下拉列表对我来说似乎很愚蠢

我正在寻找的是开发移动网站的经验法则，我不想偏离应该做的事情太远。非常感谢您的意见。谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T13:57:22.663

asp.net Web Forms 和 jQuery Mobile 确实不能一起工作。回发模型打破了 jQuery Mobile ajax 的工作方式，当您拥有多个页面或表单时，它就会崩溃。具体来说，Web 表单需要一个`<form>`包含所有服务器端控件的标记，并且您不能引入额外的“内部”表单。jQuery Mobile 在 ajax 模型和`<div data-role="page">`DOM 中包含的一个或多个“页面”（更新面板最终会造成混乱。

一种方法是简单地关闭 jQuery Mobile ajax 加载。你可以这样做：

```
//note that the order of script loading here is critical.
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script>
    $(document).bind(“mobileinit”, function() {
        $.mobile.ajaxEnabled = false;
    });
</script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js">
</script> 
```

但最终，您不会拥有一个高效的网站。如果您的站点在本地无线网络上运行，那可能就足够了。

我在主要是 Web 表单环境中工作，需要一个基于 Web 表单的 jQuery Mobile 应用程序，并将 5 个左右的“页面”编码为单个静态 html 文件。然后我依靠 JavaScript 和 jQuery ajax 加载到 ASMX Web 服务端点。我还广泛使用了 KnockoutJS，但我当然可以仅依靠 JavaScript 和 jQuery ajax 来提取数据（在我的情况下，该应用程序具有报告性质，没有数据更新。）如果您要保存数据，您可以使用相同的技术。

`<form>`更好的方法是使用 asp.net MVC，它消除了强制回发模型并允许对标签放置位置进行细粒度控制。

我在一个更大的移动网站上工作，并在后端使用 MVC 并充分利用 Razor 视图，但最后，我依赖客户端 ajax 调用所有数据，并依赖 KnockoutJS 来处理几乎所有动态标记。最后，我的客户端应用程序在 Web 窗体和 MVC 之间并没有什么不同。基于 MVC 的控制器更容易用于 ajax 端点，并且解决方案更简洁。

一般来说，我会将这两种解决方案归为“单页应用程序”，即 SPA 方法。还有其他方法可能适用于 Web 表单，但在我有限的探索中，这是最好的选择。

# blackberry - 黑莓解密 - BadPaddingException

> ID：14353346
> 
> 赞同：1
> 
> 时间：2013-01-16T07:33:34.627
> 
> 标签：blackberry, java-me, padding, encryption

我已经成功地以 AES 格式加密了 BlackBerry 中的数据。为了验证我的结果，我尝试使用以下方法在 BlackBerry 中实现解密：

```
 private static byte[] decrypt( byte[] keyData, byte[] ciphertext )throws CryptoException, IOException
{
   // First, create the AESKey again.
   AESKey key = new AESKey( keyData );

   // Now, create the decryptor engine.
   AESDecryptorEngine engine = new AESDecryptorEngine( key );
   // Since we cannot guarantee that the data will be of an equal block length
   // we want to use a padding engine (PKCS5 in this case).
   PKCS5UnformatterEngine uengine = new PKCS5UnformatterEngine( engine );

   // Create the BlockDecryptor to hide the decryption details away.
   ByteArrayInputStream input = new ByteArrayInputStream( ciphertext );
   BlockDecryptor decryptor = new BlockDecryptor( uengine, input );

   // Now, read in the data. Remember that the last 20 bytes represent
   // the SHA1 hash of the decrypted data.
   byte[] temp = new byte[ 100 ];
   DataBuffer buffer = new DataBuffer();

   for( ;; ) {
       int bytesRead = decryptor.read( temp );
       buffer.write( temp, 0, bytesRead );

       if( bytesRead < 100 ) {
           // We ran out of data.
           break;
       }
   }

   byte[] plaintextAndHash = buffer.getArray();
   int plaintextLength = plaintextAndHash.length - SHA1Digest.DIGEST_LENGTH;
   byte[] plaintext = new byte[ plaintextLength ];
   byte[] hash = new byte[ SHA1Digest.DIGEST_LENGTH ];

   System.arraycopy( plaintextAndHash, 0, plaintext, 0, plaintextLength );
   System.arraycopy( plaintextAndHash, plaintextLength, hash, 0,
       SHA1Digest.DIGEST_LENGTH );

   // Now, hash the plaintext and compare against the hash
   // that we found in the decrypted data.
   SHA1Digest digest = new SHA1Digest();
   digest.update( plaintext );
   byte[] hash2 = digest.getDigest();

   if( !Arrays.equals( hash, hash2 )) {
       throw new RuntimeException();
   }

   return plaintext;
} 
```

我在以下行抛出异常“BadPaddingException”

```
int bytesRead = decryptor.read( temp ); 
```

任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:22:43.793

我认为问题可能出在这个块中：

```
 for( ;; ) {
       int bytesRead = decryptor.read( temp );
       buffer.write( temp, 0, bytesRead );

       if( bytesRead < 100 ) {
           // We ran out of data.
           break;
       }
   } 
```

当`read`返回 -1 时，您也将其写入缓冲区。而且退出条件也是错误的。将其与 CryptoDemo 示例项目中的块进行比较：

```
 for( ;; ) {
        int bytesRead = decryptor.read( temp );

        if( bytesRead <= 0 )
        {
            // We have run out of information to read, bail out of loop
            break;
        }

        db.write(temp, 0, bytesRead);
     } 
```

还有一些你应该小心的点，即使它们没有导致错误：

```
 AESDecryptorEngine engine = new AESDecryptorEngine( key ); 
```

如果您阅读[此构造函数的文档](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/crypto/AESEncryptorEngine.html#AESEncryptorEngine%28net.rim.device.api.crypto.AESKey%29)，它会说：

> *“给定 AES 密钥，默认块长度为 16 字节，创建 AESEncryptorEngine 类的实例。”*

但是在上一行中，当您创建密钥时，您正在执行以下操作：

```
 AESKey key = new AESKey( keyData ); 
```

根据[文档](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/crypto/AESKey.html#AESKey%28byte%5b%5d%29)，它*“从现有数据中创建可能的最长密钥”。*, 但仅*“使用数组的前 128 位”*。所以不管你的长度是多少`keyData`，你总是会使用 128 位的密钥长度，这是 3 种可用尺寸（128、192、256）中最短的。

相反，您可以显式选择算法~~块~~密钥长度。例如，要使用 AES-256：

```
AESKey key = new AESKey(keyData, 0, 256); //key length in BITS
AESDecryptorEngine engine = new AESDecryptorEngine(key, 32); //key lenth IN BYTES 
```

最后，即使你得到这个工作，你应该知道直接从密码（可能是任意大小）派生密钥是不安全的。您可以使用[PKCS5KDF2PseudoRandomSource](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/crypto/PKCS5KDF2PseudoRandomSource.html)从密钥材料（密码）派生出更强的密钥，而不仅仅是使用 PKCS5 进行填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T08:57:41.837

您的加密数据应正确填充到块大小（16 字节）。尝试在没有填充的情况下解密数据，并查看尾部字节是否对应于 PKCS#5 填充（例如，如果需要 5 个字节的填充，则应附加 0x05 0x05 0x05 0x05 0x05 字节）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T00:34:16.583

问题是任何具有正确块大小的数据都会解密。问题在于它可能会解密为随机的垃圾。看起来随机的垃圾通常与 PKCS#7 填充方案不兼容，因此例外。

我说问题是因为如果关键数据无效，如果使用了错误的填充或块模式，或者如果输入数据在此过程中出现乱码，则可能会引发此异常。最好的调试方法是确保 100% 的算法匹配，并且*二进制*输入参数（包括 API 的默认参数）在两边都精确匹配。

# jquery - 如何获得新注入标记的顶部偏移量

> ID：14353349
> 
> 赞同：0
> 
> 时间：2013-01-16T07:33:39.200
> 
> 标签：jquery, scroll

我必须滚动到元素位置，`scrollTop`它适用于页面上存在的元素。

但是当我尝试使用注入的代码时，同样的事情它不起作用。它抛出一个错误，说“**无法读取 null 的属性 'top'** ”

我需要委托才能获得补偿吗？我知道绑定我必须绑定的任何事件。如果是这样那怎么办。我在网上没有得到任何解决方案。

**编辑 1 :: 添加代码**

```
var element = $('#teacher-recipe-form').find('.clsError').not('label, hidden').first();
if( element.is('input:hidden') ) {
    element = element.parent();
}
var top = element.offset().top - 5;
$('html, body').animate({
    scrollTop: top
}, 500, function(){
    if( element.is('input') || element.is('textarea') ) { element.focus(); }
}); 
```

它适用于已经存在的元素，但不适用于 Injected 元素。

# api - 使用 GoogleCL 上传 Youtube 视频

> ID：14353350
> 
> 赞同：1
> 
> 时间：2013-01-16T07:33:40.563
> 
> 标签：api, upload, youtube, cmd, googlecl

使用 googlecl 将带有描述和标签的多个视频上传到 youtube 的正确命令行是什么？

```
youtube post sample1.wmv sample2.wmv 
```

上面的代码可以很好地上传两个视频，但我想添加摘要和标签，但不知道在哪里适当地放置 --summary 和 --tags。还是批处理命令文件是多个视频的更好选择？如果是这样，这种批处理文件的结构是什么，因为 googlecl 不响应正常的 .bat 文件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T05:30:08.440

一个更完整的示例，它避免了“公共”访问默认值：

```
youtube post foo1.wmv --title "my cool video" --summary "your summary here" --tags "tag1, note tags separated by commas, third tag" --access unlisted --category Travel 
```

[在https://code.google.com/p/googlecl/wiki/ExampleScripts#Youtube](https://code.google.com/p/googlecl/wiki/ExampleScripts#Youtube)上查看更多信息

# varnish - 清漆多个后端不起作用

> ID：14353354
> 
> 赞同：1
> 
> 时间：2013-01-16T07:34:01.637
> 
> 标签：varnish

我的 Varnish 配置中有 2 个后端：一台动态服务器和一台静态服务器。

后端的配置如下：

```
backend default { 
  .host = "127.0.0.1";
  .port = "8484";
  .probe = {
   .interval = 5s;
   .timeout = 1s;
   .window = 5;
   .threshold = 3;
  }
}
backend default_1 { 
  .host = "127.0.0.1";
  .port = "8181";
  .probe = {
   .interval = 5s;
   .timeout = 1s;
   .window = 5;
   .threshold = 3;
  }
} 
```

当我尝试重新启动 Varnish 服务器时，它无法重新启动。

可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T20:20:35.017

如果你声明一个后端，你需要使用它：这就是 Varnish 的作用。

无论如何，你有几个解决你的问题的方法。首选的方法可能是仍然在 VCL 中声明未使用的后端，运行 Varnish，同时通过添加参数将错误转换为警告`-p vcc_err_unref=off`

# c# - 使用 WinDbg 转储时，大对象堆的“空闲”块是什么意思

> ID：14353360
> 
> 赞同：7
> 
> 时间：2013-01-16T07:34:47.057
> 
> 标签：c#, memory-leaks, windbg

我正在调查 PerfMon 和 WinDbg 的内存泄漏问题。我注意到“大内存堆”计数器从 10MB 增加到 37MB。强制 GC 后，它只能减少到 28MB。 ![在此处输入图像描述](../Images/07606890b17268f1d73f81a8edf7cf50.png)

（无论我重复多少次操作（创建/销毁），在 GC 之后，大对象堆稳定在 28MB）。

我想知道哪些对象会导致泄漏问题，所以我使用 '!Dumpheap -min 85000' 命令运行 WinDbg。捕获了两张快照，第一张是在内存泄漏之前完成的；第二个是内存泄漏之后：

**前：**

```
 MT    Count    TotalSize Class Name
 6f39fb08        1        89024 System.String
 6f3a4aa0        1       107336 System.Byte[]
 6f356d84        2       262176 System.Object[]
 00360e4c        1       350392 System.Collections.Generic.Dictionary`2+Entry[Int64,Int32][]
 6f3a2a94        3       592584 System.Int32[]
 00360c24        1       727072 System.Collections.Generic.Dictionary`2+Entry[String,Int64][]
 0bc78b34        4      2754488 System.Collections.Generic.Dictionary`2+Entry[Int64, AccountNode][]
 00730260       10      5375572      Free 
```

**后：**

```
 MT    Count    TotalSize Class Name
 6f39fb08        1        89024 System.String
 6f3a4aa0        1       107336 System.Byte[]
 6f3a55d8        2       202080 System.Collections.Hashtable+bucket[]
 6f356d84        2       262176 System.Object[]
 00360e4c        1       350392 System.Collections.Generic.Dictionary`2+Entry[Int64,Int32][]
 00360c24        1       727072 System.Collections.Generic.Dictionary`2+Entry[String,Int64][]
 6f3a2a94        4       738008 System.Int32[]
 6cf02838        1       872488 System.Collections.Generic.Dictionary`2+Entry[[MS.Internal.ComponentModel.PropertyKey, WindowsBase],[MS.Internal.ComponentModel.DependencyPropertyKind, WindowsBase]][]
 0bc78b34        4      2754488 System.Collections.Generic.Dictionary`2+Entry[Int64, AccountNode][]
 00730260       14     21881328      Free
 Total 31 objects 
```

Camparing 这两个快照，最大的区别是“免费”的大小。它的大小增加了近 16MB。谁能告诉我“免费”是什么意思，是免费空间吗？增加是由碎片引起的吗？

根据[这篇文章](http://www.simple-talk.com/dotnet/.net-framework/the-dangers-of-the-large-object-heap/)，“大对象堆大小”性能计数器似乎包括可用空间。所以在我的情况下，大对象堆上没有太多的内存泄漏，只有 2MB (= 28 - 10 -16)，对吧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T15:09:04.423

FREE 表示堆上的一块未使用的内存。LOH 上的空闲块是预期的，因为 LOH 永远不会被压缩。相反，为 LOH 保留了一个可用空间列表。正常 GC 堆上的 FREE 块，除了少数例外，表示由于对象固定导致的碎片。当 GC 遇到 pinned 对象时，段的压缩将停止，未使用对象消耗的内存被标记为 FREE。您在 LOH 上看到的内容是正常的。请记住，LOH 永远不会被压缩，并且为 LOH 分配的内存段永远不会被释放，因此 LOH 永远不会收缩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:41:10.280

大对象堆的含义在[这里解释得很好](http://msdn.microsoft.com/en-us/magazine/cc534993.aspx)。

大对象是大小大于 85kb 的对象，存储在该区域中，并且仅在第 2 代将被回收时才被收集。

# jquery - 如何让 jQuery 输出不同的 DIV 类？

> ID：14353363
> 
> 赞同：0
> 
> 时间：2013-01-16T07:34:52.997
> 
> 标签：jquery, html, json

我在 jQuery 中有一个脚本，可以从[http://pi.codele.se/php/debatt.php（json](http://pi.codele.se/php/debatt.php)格式）检索数据。它在[http://pi.codele.se/debatt.html?page=1](http://pi.codele.se/debatt.html?page=1)`<div id="output">`内部返回。正如您在**fetch/fetch.js**中看到的那样，它在. 但我希望代码在五个 DIV 类之间随机化。**`<div class = "box w-25 h-70 ">`**

 **前任。

```
<div class="box w-25 h-70">
<div class="box 2">
<div class="box 3">
<div class="box 4">
<div class="box 5"> 
```

获取/获取.js

```
$(document).ready(function(){
    var output = $('#output');

    $.ajax({
        url: 'http://pi.codele.se/php/debatt.php',
        dataType: 'jsonp',
        jsonp: 'jsoncallback',
        timeout: 5000,
        success: function(data, status){
            $.each(data, function(i,item){ 
                var content = '<div class="box w-25 h-70"><h3>'+item.rubrik+'<span>Publicerad '+ item.datum+'</span></h3>'
                + '<p>'+item.innehall+'<br></div></div>';       
                output.append(content);
            });
        },
        error: function(){
            output.text('Kolla din anslutning.')
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:41:06.150

像这样的东西？

```
$(document).ready(function(){
    var output = $('#output');
    var classes = ['box w-25 h-70', 'box2', ...]

    $.ajax({
        url: 'http://pi.codele.se/php/debatt.php',
        dataType: 'jsonp',
        jsonp: 'jsoncallback',
        timeout: 5000,
        success: function(data, status){
            $.each(data, function(i,item){ 

                var arr_idx = Math.floor(Math.random()*classes.length);
                var content = '<div class="' + classes[arr_idx] + '"><h3>'+item.rubrik+'<span>Publicerad '+ item.datum+'</span></h3>'
                + '<p>'+item.innehall+'<br></div></div>';       
                output.append(content);
            });
        },
        error: function(){
            output.text('Kolla din anslutning.')
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:10:29.603

```
$(document).ready(function(){
    var output = $('#output');

    $.ajax({
        url: 'http://pi.codele.se/php/debatt.php',
        dataType: 'jsonp',
        jsonp: 'jsoncallback',
        timeout: 5000,
        success: function(data, status){
            $.each(data, function(i,item){ 
                var content = '<div class="box w-'+i+'h-'+i+1+'"><h3>'+item.rubrik+'<span>Publicerad '+ item.datum+'</span></h3>'
                + '<p>'+item.innehall+'<br></div></div>';       
                output.append(content);
            });
        },
        error: function(){
            output.text('Kolla din anslutning.')
        }
    });
}); 
```**

# mysql - mss-2.0.0.FINAL-jboss-as-7.1.2.Final java.lang.ClassNotFoundException: com.mysql.jdbc.Driver

> ID：14353364
> 
> 赞同：0
> 
> 时间：2013-01-16T07:35:00.170
> 
> 标签：mysql, jboss

我在**Jboss**中有一个使用 .war 文件的新应用程序我试图在启动时连接到 MySQL DB（初始化方法），我修改了**standalone-sip.xml**并添加了我的驱动程序如下： [https://zorq。 net/b/2011/07/12/adding-a-mysql-datasource-to-jboss-as-7/](https://zorq.net/b/2011/07/12/adding-a-mysql-datasource-to-jboss-as-7/)

在启动日志中，我可以看到驱动程序和数据源正在正确加载：

```
23:19:30,565 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 28) JBAS010404: **Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver** (version 5.1)
23:19:30,748 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015876: Starting deployment of "mysql-connector-java-5.1.22-bin.jar"
23:19:30,750 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-3) JBAS010400: **Bound data source [java:jboss/datasources/opencall]**
23:19:30,933 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-4) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
23:19:30,954 INFO  [org.jboss.as.osgi] (MSC service thread 1-1) JBAS011907: Register module: Module "deployment.mysql-connector-java-5.1.22-bin.jar:main" from Service Module Loader 
```

但我看到：

```
23:18:50,959 ERROR [stderr] (MSC service thread 1-5) java.lang.ClassNotFoundException: com.mysql.jdbc.Driver from [Module "deployment.opencall-2.1.0-SNAPSHOT.war:main" from Service Module Loader]
23:18:50,959 ERROR [stderr] (MSC service thread 1-5)    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190) 
```

之后我看到：

```
23:18:51,700 INFO  [org.jboss.as.server] (Controller Boot Thread) JBAS018559: Deployed "mysql-connector-java-5.1.22-bin.jar" 
```

我相信问题是我的应用程序在加载 mysql 驱动程序之前启动。但不确定如何在部署之前强制我的应用程序在启动期间使用 mysql 驱动程序。这是我的代码：当我在没有 Jboss 的情况下运行它时，它工作正常，只有当我部署 war 文件失败时。

```
try {

    Class.forName(dbClass).newInstance();

} catch (InstantiationException e) {
    logger.error("InstantiationException() Exception");
    e.printStackTrace();
} catch (IllegalAccessException e) {
    logger.error("IllegalAccessException() Exception");
    e.printStackTrace();
}
        if (dbPassword.equals(null))
    dbPassword="";
    Connection dbConnection = DriverManager.getConnection (dbUrl,dbUserName,dbPassword);
    dbConnection.close(); 
```

发现这个：这是一个类似的问题： [http ://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T09:24:00.570

```
<!-- mysql dependencies -->
    <dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>5.1.23</version>
    </dependency> 
```

在我的 maven 依赖项 (pom.xml) 中添加了 mysql，然后重新构建

# ios - 更改方向后如何更改选择器视图的位置

> ID：14353366
> 
> 赞同：1
> 
> 时间：2013-01-16T07:35:04.213
> 
> 标签：ios, objective-c, layout

我的应用程序中有两个带有选择器视图的按钮。在纵向模式下，这些按钮位于左侧，当我将设备的方向更改为横向时，按钮会移至屏幕右侧，但选择器视图仅保留在左侧。我需要选择器改变它的位置并移动到右侧。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:45:08.500

我已经对我的代码进行了以下更改，并且我得到了所需的结果....

```
-(void) didReceivedRotaionChanged
{
    if([popoverController isPopoverVisible])
    {
        if ([popoverController.contentViewController isKindOfClass:[UINavigationController class]])
        {
            UINavigationController * navController = (UINavigationController*)popoverController.contentViewController;
            NSArray *array = navController.viewControllers;
            if ([array count] > 0)
            {
                if([[array objectAtIndex:0] isEqual:self.nsJobRolePickerViewController])
               {
                    [popoverController dismissPopoverAnimated:NO];
                    [self onClickIJobRoleButton:self.btnJobRole];

                }
                else if([[array objectAtIndex:0] isEqual:self.nsLocationPickerViewController])
                {
                    [popoverController dismissPopoverAnimated:NO];
                    [self onClickILocationButton:self.btnLocation];

                }
            .
            .
            ...... 
```

ETC..

嗯，它有点冗长......但它会帮助像我这样的初学者......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:00:38.767

制作您的pickerView的对象。为它设置@property 和@synthesixe。在您的 .xib 中建立连接！然后在您的 viewDidLoad() 中编写以下代码！

```
pickerViewObject.autoresizingMask= UIViewAutoresizingFlexibleRightMargin; 
```

如果您想添加多个自动调整大小的蒙版，请使用 | 操作员。！！

```
pickerViewObject.autoresizingMask= UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleRightMargin; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T07:42:57.233

您必须取消选中 .xib 中的 Utilities -> File Inspector 中可用的“AutoLayout”选项！

# java - 如何在 Eclipse 的类中查找和删除所有出现的函数？

> ID：14353367
> 
> 赞同：2
> 
> 时间：2013-01-16T07:35:07.633
> 
> 标签：java, eclipse

我一直在重写代码库，并且一直在尝试在 Eclipse 中删除所有出现的函数及其可能具有的任何参数/参数。

我不追求聪明的正则表达式解决方案或类似的东西，我确定功能会在 Eclipse 中，只是不确定在哪里？:)

非常感谢

只是为了澄清：

这是一个例子......

函数的类 myFoo 不再存在。因为在我到达之前它已经被错误地重构了。因此，我想搜索代码库（通过 Eclipse 工具）并从 myFoo 类中删除任何使用 foo(String string) 方法的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:39:00.090

突出显示对象（方法或变量），然后选择菜单“搜索/引用”或“搜索/声明”。手动进行更改，一次一个，这样您就可以查看每个更改。由于意外后果的可能性很高，我永远不会使用脚本进行广泛的代码更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:41:37.803

我会使用编辑菜单中的替换

```
replace='function name' to '// TODO:' 
```

这将在排水沟上突出显示它们。选择该行并按`Ctrl`+`D`删除该行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T07:43:10.017

可以选择删除函数本身的主体，然后通过`Refactor->Inline`?内联它

如果需要，您当然可以保存函数的代码，然后再插入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T07:43:51.277

我不知道 JDT 中有这样的功能。但这是您可以使用的自动化解决方案：

使用[MoDisco](http://www.eclipse.org/MoDisco/)，您可以创建 Java 项目的模型。然后，您可以使用[ATL](http://www.eclipse.org/atl/)精炼转换来删除该模型中对该方法的所有调用。如果您想替换功能，您甚至可以用其他一些表达式替换调用。

如果您的代码库足够大，那么仔细查看这些 Eclipse 项目可能是个好主意。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T07:44:35.320

只需在方法名称的开头/中间/结尾键入“MUST_BE_DELETED”或类似的内容（不要使用重命名功能），然后 Eclipse 将在问题窗口中突出显示所有调用它的地方。解决所有问题后，您可以删除该方法。

如果您在 jsp 页面中有代码，那么您将不得不手动搜索这些代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T07:45:12.850

这就是我以前做的：

将光标放在方法名称上，然后按 Control+Shift+g（在 Windows 中），或者您可以执行 Search -> Reference -> Workspace。

这将在工作区中搜索对此方法的所有引用，并手动删除引用

* * *

（复制自我的评论）

如果您坚持自动完成“删除”，还有另一种解决方法（可能并不总是有效，取决于情况）：

*   使您的方法主体为空，
*   然后使用 Refactor -> Inline (你甚至可以选择删除方法声明)

但我相信在某些情况下这种方法不起作用。值得一试，看看它是否适合你的情况

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-01-16T13:49:18.027

使用 ctrl+F 快捷方式打开查找/替换对话框。在“查找”文本框前面的空格中写下您的方法名称。不要在“替换为”文本框中写任何内容。然后按“全部替换”按钮。

这是最快捷的方法。请享用 ：）

# c# - 尝试连接到两个不同远程机器的两个线程的顺序给出不同的结果

> ID：14353369
> 
> 赞同：0
> 
> 时间：2013-01-16T07:35:14.277
> 
> 标签：c#, .net, remote-access

我有一个 .NET 应用程序，它尝试在不同的远程机器上启动不同的安装。在实际安装发生之前，应用程序连接到这些远程机器并通过为每台远程机器生成不同的线程（每个线程负责获取特定安装的现有版本）来获取这些安装的现有版本。

在特定情况下，有两个调用将现有版本获取到两台不同的机器，其中一个调用需要更长的时间，而另一个需要更少的时间。现在的问题是应用程序产生线程的顺序正在产生影响。如果我生成需要更多时间首先获取版本的线程，则第二个线程（需要更少时间）无法获得正确的版本，因为它无法连接到远程机器。如果我生成的线程需要更少的时间来获取版本，那么两个线程都会返回正确的版本。我觉得有一些资源的竞赛。有什么线索吗？提前致谢。

一些代码片段

```
class RemoteInstallable
{
//...other functions...
public override bool GetExistingVersion()
   {
            try
            {
                base.ExistingVersion = RemoteInstaller.GetExistingVersion(base.InstallInfo.VersionPath);
                return true;
            } 
   }
//....others..
};

GetAllVersions()
{
 foreach ( R as remoteinstallabe in ListofAllRemoteInstallables)
  {
    Thread T =  new Thread();
    //Use T to get version of R 
  }
} 
```

# mysql - 有没有办法在 mysql 表中混合（更改顺序）行？

> ID：14353371
> 
> 赞同：0
> 
> 时间：2013-01-16T07:35:24.757
> 
> 标签：mysql, phpmyadmin

我有**3 张**彼此不相同的桌子。根据我的一个要求，我必须将所有这些表记录复制到另一个表中。那部分没问题。我的问题是我插入的记录现在是有序的。喜欢

```
first 100 records from table1
second 100 records from table2
third 100 records from table3 
```

我想做的是`change/mix`记录位置。就像我选择前 100 条记录一样，**应该**有来自**所有三个**表的记录。

从中选择数据`ORDER BY Rand()`不是我想要的。我只需要选择数据并显示这些数据。有什么办法可以解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:42:28.080

处理多种情况的出色帖子，从简单到间隙，再到带有间隙的不均匀。

[http://jan.kneschke.de/projects/mysql/order-by-rand/](http://jan.kneschke.de/projects/mysql/order-by-rand/)

对于大多数一般情况，您可以这样做：

```
SELECT name
FROM random AS r1 JOIN
   (SELECT (RAND() *
                 (SELECT MAX(id)
                    FROM random)) AS id)
    AS r2
WHERE r1.id >= r2.id
ORDER BY r1.id ASC
LIMIT 1 
```

这假设 id 的分布是相等的，并且 id 列表中可能存在间隙。有关更高级的示例，请参阅文章

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:42:59.227

如果您不想稍后查询，`rand()`您可以通过首先从 union select 中插入来创建表`rand()`：

```
INSERT INTO merged (a, b)
SELECT a, b FROM (
  SELECT a, b, rand() AS r FROM t1
  UNION ALL
  SELECT a, b, rand() AS r FROM t2
) ORDER BY r 
```

但是，也请考虑一下我刚刚遇到的这篇文章：[INSERT INTO SELECT 奇怪的顺序使用 UNION](https://stackoverflow.com/questions/12359652/insert-into-select-strange-order-using-union)，也许有人可以发表评论。

# objective-c - 如何创建另一个码头

> ID：14353375
> 
> 赞同：-1
> 
> 时间：2013-01-16T07:35:57.130
> 
> 标签：objective-c, cocoa

我想创建一个包含一些应用程序图标的停靠栏，并且在运行时用户可以通过将应用程序拖动到停靠栏来将应用程序添加到该停靠栏。当用户单击该扩展坞中存在的任何应用程序图标时，该应用程序应该午餐

野兔我不想更换系统底座，或者我不想在应用程序中创建底座。这只是系统中的另一个坞站。

所以任何人都可以告诉我如何设置这个停靠应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:05:04.813

只需创建一个 NSWindow，并设置正确的级别`-[NSWindow setLevel:NSDockWindowLevel];`
您还可以设置一个窗口，使其不具有带按钮的顶栏并具有透明的 contentView。
然后你应该处理应用程序的拖放。

# android - 使用数字键盘的活动

> ID：14353376
> 
> 赞同：2
> 
> 时间：2013-01-16T07:35:57.740
> 
> 标签：android, android-layout, android-keypad

如何使用数字键盘设置活动，我知道我们可以像这样为每个控件指定数字键盘

```
 <EditText a:layout_width="0dip" a:id="@+id/priceTextBox"
              a:layout_height="40dip"
              a:layout_weight="20" a:singleLine="true"
              a:focusable="true"
              a:inputType="number" a:numeric="integer"

            /> 
```

但要求是活动本身需要数字键盘而不是每个控件。如何指定这样的？请协助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:44:17.710

您可以使用[KeyboardView](http://developer.android.com/reference/android/inputmethodservice/KeyboardView.html)：[https](https://stackoverflow.com/a/11923742/1970317)
://stackoverflow.com/a/11923742/1970317希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:49:47.300

一个activity不能自己处理输入，那么你想实现什么？不太动态的屏幕布局？

无论哪种方式，您都可能想了解[InputMethodManager](http://developer.android.com/reference/android/view/inputmethod/InputMethodManager.html)，它允许您强制键盘打开，例如通过调用`showSoftInput(View view, int flags, ResultReceiver resultReceiver)`它还允许您为输入指定一个接收者。不过，您需要一个视图。我会尝试为仅数字输入设置一个视图并将其隐藏。

# asp.net - 从 sql server 2000 迁移到 sql server 2012 API 端

> ID：14353383
> 
> 赞同：0
> 
> 时间：2013-01-16T07:36:20.957
> 
> 标签：asp.net, database, api, iis, migration

在我的公司，我们需要升级，所以我们决定升级我们的系统。我们现在有一个 SQL Server 2000 IIS 5.0 和 .Net 版本 2。

我也有 asp.net api，它也是用 vs 2000 和连接到服务器的 .net 版本 2 编写的。api非常简单，对服务器没有复杂的查询。我们将进行的升级会将我们的系统转移到服务器 2012 IIS 8，因为我们还将升级我们的 vs（2010？2012？什么更好？）.net 框架也将更新。数据库之间的迁移本身将执行 dba（我知道他需要先将数据库转移到 2005/2008，然后再转移到 2012）我的工作是确保 API 能够正常工作。

您能说出升级前我应该在 api 方面处理的所有事情吗（如果缺少信息，请询问，我会告诉）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:58:39.203

以下是您可能想要了解的一些主题：

MSDN：SQL Server 2012 中数据库引擎功能的重大更改、SQL Server 2012 中停止的数据库引擎功能、SQL Server 2012 中 SQL Server 功能的行为更改

如果您的应用程序使用任何已更改的功能，您将需要进行必要的更改以使其在新环境中顺利运行。

另请查看以下链接：

[戴尔的迁移指南](http://www.google.com/url?sa=t&rct=j&q=sql%20server%202000%20database%20application%20migration&source=web&cd=1&ved=0CEgQFjAA&url=http://www.dell.com/downloads/global/solutions/public/white_papers/SQL_2000_SQL_2008_Migration_Guide.pdf&ei=odYZUdz7Eo79qAHruICgBA&usg=AFQjCNF0-J6gEOkhVE64bWyxErL869-jiQ&bvm=bv.42261806,d.b2U)

# django - Google App 引擎、django、userena、数据库设置

> ID：14353387
> 
> 赞同：0
> 
> 时间：2013-01-16T07:36:46.840
> 
> 标签：django, google-app-engine, django-models, django-users

我正在尝试使用 GAE、Django 构建一个 Web 应用程序。用户注册将是 userena。我已经使用 django-nonrel 和所有设置来使第一部分正常工作，我正在尝试为 userena 同步数据库。我不断收到这个错误，你能帮我解决这个问题吗？

```
BB8265:epapyri-django$ sudo django-admin.py syncdb
Password:
Traceback (most recent call last):
  File "/usr/local/bin/django-admin.py", line 5, in <module>
    management.execute_from_command_line()
  File "/Library/Python/2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/Library/Python/2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Library/Python/2.7/site-packages/django/core/management/__init__.py", line 261, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File "/Library/Python/2.7/site-packages/django/core/management/__init__.py", line 69, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File "/Library/Python/2.7/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/Library/Python/2.7/site-packages/django/core/management/commands/syncdb.py", line 8, in <module>
    from django.core.management.sql import custom_sql_for_model, emit_post_sync_signal
  File "/Library/Python/2.7/site-packages/django/core/management/sql.py", line 6, in <module>
    from django.db import models
  File "/Library/Python/2.7/site-packages/django/db/__init__.py", line 11, in <module>
    if DEFAULT_DB_ALIAS not in settings.DATABASES:
  File "/Library/Python/2.7/site-packages/django/utils/functional.py", line 184, in inner
    self._setup()
  File "/Library/Python/2.7/site-packages/django/conf/__init__.py", line 40, in _setup
    raise ImportError("Settings cannot be imported, because environment variable %s is undefined." % ENVIRONMENT_VARIABLE)
ImportError: Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined. 
```

settings.py 和 manage.py 在同一个目录中，在添加这个插件之前我没有这个问题。

数据库部分的 settings.py 如下：

```
# Activate django-dbindexer for the default database
DATABASES['native'] = DATABASES['default']
DATABASES['default'] = {'ENGINE': 'dbindexer', 'TARGET': 'native'}
AUTOLOAD_SITECONF = 'indexes'

INSTALLED_APPS = (
#    'django.contrib.admin',
    'django.contrib.contenttypes',
    'django.contrib.auth',
    'django.contrib.sessions',
    'djangotoolbox',
    'autoload',
    'dbindexer',
    # social_auth
    'httplib2',
    'openid',
    'oauth2',
    'social_auth',
    #userena
    'userena',
    'guardian',
    'easy_thumbnails',
    'accounts',
    # djangoappengine should come last, so it can override a few manage.py commands
    'djangoappengine',
) 
```

这是我一次运行服务器

```
BB8265:epapyri-django$ sudo django-admin.py runserver
Traceback (most recent call last):
  File "/usr/local/bin/django-admin.py", line 5, in <module>
    management.execute_from_command_line()
  File "/Library/Python/2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/Library/Python/2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Library/Python/2.7/site-packages/django/core/management/__init__.py", line 261, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File "/Library/Python/2.7/site-packages/django/core/management/__init__.py", line 69, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File "/Library/Python/2.7/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/Library/Python/2.7/site-packages/django/core/management/commands/runserver.py", line 8, in <module>
    from django.core.servers.basehttp import AdminMediaHandler, run, WSGIServerException, get_internal_wsgi_application
  File "/Library/Python/2.7/site-packages/django/core/servers/basehttp.py", line 26, in <module>
    from django.views import static
  File "/Library/Python/2.7/site-packages/django/views/static.py", line 95, in <module>
    template_translatable = ugettext_noop(u"Index of %(directory)s")
  File "/Library/Python/2.7/site-packages/django/utils/translation/__init__.py", line 75, in gettext_noop
    return _trans.gettext_noop(message)
  File "/Library/Python/2.7/site-packages/django/utils/translation/__init__.py", line 48, in __getattr__
    if settings.USE_I18N:
  File "/Library/Python/2.7/site-packages/django/utils/functional.py", line 184, in inner
    self._setup()
  File "/Library/Python/2.7/site-packages/django/conf/__init__.py", line 40, in _setup
    raise ImportError("Settings cannot be imported, because environment variable %s is undefined." % ENVIRONMENT_VARIABLE)
ImportError: Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined. 
```

[编辑]

我从 INSTALL_APP 中删除了非 django 项目，将 django.models 导入到我的帐户/MyProfile 和 .datastore 上的 chmod 777，因为它不应该在每次修改它时都请求许可。

{ `File "/git/ePapyri/epapyri-django/djangoappengine/db/base.py", line 160, in _value_for_db raise DatabaseError("Only strings and positive integers " django.db.utils.DatabaseError: Only strings and positive integers may be used as keys on GAE.`}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:38:08.177

你为什么`django-admin.py`要运行syncdb和runserver？你应该使用`manage.py`.

你绝对不应该`sudo`用来运行其中任何一个。

（另请注意，您的 INSTALLED_APPS 似乎是无稽之谈：它包含大量普通的 Python 库，例如 httplib2 和 oauth2，它们根本不存在任何业务。）

**已编辑**

首先，您应该编辑您的问题以添加回溯。

其次，报错信息很明确：你还没有`django.db.models`在你的accounts/models.py文件中导入。

第三，在 INSTALLED_APPS 中包含非 Django 库仍然是无稽之谈。根本没有必要这样做。并且您的数据存储不应该首先使用 sudo 创建 - 要么删除并重新创建它，要么用于`chmod`使其可供普通用户访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T06:50:01.067

我发现问题是通过向 GAE 中的库添加 PIL 来解决的，而 yaml 文件会解决问题，因为它抱怨 python 中的图像库。django 支持的所有库的链接是[https://developers.google.com/appengine/docs/python/tools/libraries27](https://developers.google.com/appengine/docs/python/tools/libraries27)，因此将所有需要的库添加到 .yaml 文件和 INSTALL_APP。

# php - 过滤多维数组 PHP/Codeigniter 中的可能性

> ID：14353389
> 
> 赞同：3
> 
> 时间：2013-01-16T07:36:55.977
> 
> 标签：php, codeigniter, recursion

在工作了将近一整天之后，我的大脑陷入了如何解决这个问题的想法中。一个例子。

1.  1、
2.  X，
3.  2、
4.  1x,
5.  1、
6.  2、
7.  X，
8.  1、
9.  2、
10.  1、
11.  X，
12.  X，
13.  1..

那是一张优惠券，我希望在组合的可能性之后对其进行排序假设这张优惠券有两种可能性：1x2112x121xx1, 1x2x12x121xx1..第四场比赛是不同的比赛..

所以......我的问题是应该如何以编程方式完成。

我从数据库中获取数据，它看起来像这样。

```
array(
    "gameNumber" => "1", 
    "bets" => array(
        [0] => "1"
    ), 
    "gameNumber" => "2", 
    "bets" =>  array(
        [0] = "x"
    ), 
    "gameNumber" => "3", 
    "bets" => array(
        [0] = "2"
    ), 
    "gameNumber" => "4", 
    "bets" => array(
        [0] = "1", 
        [1] = "x"
    )
); 
```

我不确定这会对您有所帮助，但这就是它的外观。

在最后一个答案的帮助下，我已经将它全部放入一个递归数组中： [如何构建递归函数来列出多级数组的所有组合？](https://stackoverflow.com/questions/1183127/how-to-build-recursive-function-to-list-all-combinations-of-a-multi-level-array).

所以我的新递归函数如下所示：

```
public function _combine_bets($array)
{
    $cur = array_shift($array);
    $result = array();

    if(!count($array)) {
        foreach($cur['bets'] as $option) {
            $result[] = $cur['matchNumber']."-".$option;
        }
        return $result;
    }
    foreach($cur['bets'] as $bet) {
        $result[$cur['matchNumber'].'-'.$bet] = $this->_combine_bets($array);
    }
    return $result;
} 
```

这样我就得到了这个数组： http: [//pastie.org/5692408](http://pastie.org/5692408)

Soo.....回到我的问题，我想让这看起来只是赌注的价值......假设它应该看起来像这样：1x2112x121xx1、1x2x12x121xx1。而不是一个大数组。我需要为所有可能的情况做这个，这是一张只有 2 种不同可能性的优惠券，但是.. 它可以更多。

用户可以在比赛中选择 1,x,2,1x,12,x2,1x2 我的意思是用户在 13 种不同游戏中的所有选项，

如果您需要更多信息，请告诉我，我会更新这个..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:25:01.813

主要问题是为什么你想要一个递归函数？这是一个没有递归的解决方案。

```
public function _combine_bets($array) {

    $result = '';
    foreach($array['bets'] as $bet) {
        $result .= $bet;
    }
// returns string
return $result;
} 
```

你想退货什么？为什么需要递归函数？

我不明白这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:03:06.670

我把不可能的事情变成了可能，别问我是怎么做到的！

```
function _combine_bets($array, $curBet = null, $currentRow = null)
{
    $cur = array_shift($array);
    $result = array();

    if(!isset($currentRow))
        $currentRow = $curBet;
    else 
        $currentRow .= $curBet;

    if(!count($array)) {
        foreach($cur['bets'] as $bet) {
            $currentRow .= $bet;
            if(strlen($currentRow) == 13)
                $this->m_couponRows[] = $currentRow;
            $currentRow = null;
        }
        return $this->m_couponRows;
    }

    foreach($cur['bets'] as $bet) {
        $result[$bet] = $this->_combine_bets($array, $bet, $currentRow);
    }
    return $this->m_couponRows;
} 
```

# jdbc - 在类路径中找不到 hive-site.xml

> ID：14353394
> 
> 赞同：4
> 
> 时间：2013-01-16T07:37:22.260
> 
> 标签：jdbc, hadoop, jar, hive

在运行 giraph hiverunner 时，我收到有关与 hive-site.xml 相关的类路径的以下错误，我已经设置了 hive-env.sh 和 bash.bashrc，但错误仍然存​​在。如何设置类路径和解决此错误的任何帮助..?? 还有什么我需要修改的..？？

我已经尝试过 hivejdbc ex 它的执行没有任何错误..但是在使用 jars 的 hadoop 时会出错..

任何帮助都会很棒..

```
13/01/16 11:58:23 WARN conf.HiveConf: hive-site.xml not found on CLASSPATH
Exception in thread "main" java.lang.NullPointerException
    at org.apache.giraph.io.hcatalog.HiveGiraphRunner.adjustConfigurationForHive(HiveGiraphRunner.java:212)
    at org.apache.giraph.io.hcatalog.HiveGiraphRunner.run(HiveGiraphRunner.java:164)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)
    at org.apache.giraph.io.hcatalog.HiveGiraphRunner.main(HiveGiraphRunner.java:147)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:197) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T08:33:36.533

您是否也设置了 Hadoops 类路径？在`hadoop-env.sh`里面作为线`export HADOOP_CLASSPATH=`。取消注释并添加 Hives`conf`和`lib`文件夹。这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-07T13:10:04.617

在 bash_rc 或 bash_profile 中添加 export HADOOP_CLASSPATH= $HIVE_HOME/conf:$HIVE_HOME/lib

# multithreading - 如何使用 wxpython 线程来防止阻塞主循环

> ID：14353402
> 
> 赞同：2
> 
> 时间：2013-01-16T07:37:47.020
> 
> 标签：multithreading, wxpython, media-player, media, blocking

我正在做一个学校项目，在 python 平台上开发一个定制的媒体播放器。问题是当我使用 time.sleep(duration) 时，它会阻止我的 GUI 的主循环，从而阻止它更新。我咨询了我的主管，并被告知要使用多线程，但我不知道如何使用线程。有人会建议我如何在下面的场景中实现线程吗？

* * *

# 代码：

```
def load_playlist(self, event):
    playlist = ["D:\Videos\test1.mp4", "D:\Videos\test2.avi"]
    for path in playlist:
        #calculate each media file duration
        ffmpeg_command = ['C:\\MPlayer-rtm-svn-31170\\ffmpeg.exe', '-i' , path]

        pipe = subprocess.Popen(ffmpeg_command, shell=True, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
        results = pipe.communicate()

        #Regular expression to get the duration
        length_regexp = 'Duration: (\d{2}):(\d{2}):(\d{2})\.\d+,'
        re_length = re.compile(length_regexp)

        # find the matches using the regexp that to compare with the buffer/string
        matches = re_length.search(str(results))
        #print matches

        hour = matches.group(1)
        minute = matches.group(2)
        second = matches.group(3)

        #Converting to second
        hour_to_second = int(hour) * 60 * 60
        minute_to_second = int(minute) * 60
        second_to_second = int(second)

        num_second = hour_to_second + minute_to_second + second_to_second
        print num_second

        #Play the media file
        trackPath = '"%s"' % path.replace("\\", "/")
        self.mplayer.Loadfile(trackPath)

        #Sleep for the duration of second(s) for the video before jumping to another video
        time.sleep(num_second) #THIS IS THE PROBLEM# 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T14:35:57.763

你可能想看看 wxPython wiki，它有几个使用线程、队列和其他有趣的东西的例子：

*   [http://wiki.wxpython.org/LongRunningTasks](http://wiki.wxpython.org/LongRunningTasks)
*   [http://wiki.wxpython.org/Non-Blocking%20Gui](http://wiki.wxpython.org/Non-Blocking%20Gui)

我还在这里写了一个关于这个主题的教程：http: [//www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/](http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/)

要记住的主要事情是，当您使用线程时，您不能直接调用您的 wx 方法（即 myWidget.SetValue 等）。相反，您需要使用 wxPython 线程安全方法之一：wx.CallAfter、wx.CallLater 或 wx.PostEvent

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T07:56:58.173

您将像任何其他多线程示例一样启动一个新线程：

```
from threading import Thread

# in caller code, start a new thread
Thread(target=load_playlist).start() 
```

但是，您必须确保对 wx 的调用必须处理线程间通信。你不能只从这个新线程调用 wx-code。会出现段错误。所以，使用`wx.CallAfter`：

```
# in load_playlist, you have to synchronize your wx calls
wx.CallAfter(self.mplayer.Loadfile, trackPath) 
```

# c# - 用户控件中的日期时间字符串格式

> ID：14353408
> 
> 赞同：1
> 
> 时间：2013-01-16T07:38:05.823
> 
> 标签：c#, asp.net

我想在用户控件中格式化日期字段。

```
<asp:Repeater ID="rptList" runat="server">
    <ItemTemplate>
        <asp:Label ID="lblDate" runat="server" Text='<%# ((DateTime)Eval("Date")).ToString("MMM dd")  %>'></
    </ItemTemplate>
    <FooterTemplate>
    </FooterTemplate>
</asp:Repeater> 
```

这个输出是这样的；`Jan 15`,`Oct 23` 但我想设置土耳其文化这些。所以想把结果土耳其郎相反。

这该怎么做？最好的祝福...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:38:32.850

试试这个：

更改显示指令：

```
Text='<%# ((DateTime)Eval("Date")).ToString("dd MMM", CultureInfo.CurrentUICulture)  %>' 
```

在您的`Web.config`文件中，在节点下添加以下内容`<system.web>`（这将为所有页面设置文化）：

```
<globalization culture="tr-TR" uiCulture="tr-TR"/> 
```

或者，在指令中设置`Culture`and`UICulture`属性`@Page`（这将只为指定页面设置文化），如下所示：

```
<%@ Page UICulture="tr-TR" Culture="tr-TR" %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:33:26.033

您必须像这样在页面上设置文化：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" Culture = "tr-TR" %> 
```

或者您可以通过编程[msdn设置文化](http://msdn.microsoft.com/en-us/library/bz9tc508%28v=vs.100%29.aspx)

# php - 根据第二个表的列数比较两个表结果

> ID：14353410
> 
> 赞同：1
> 
> 时间：2013-01-16T07:38:13.953
> 
> 标签：php, mysql, sql

我正在使用mysql数据库。
我有两张桌子，一张是`user_songs`，第二张是`user_like`

领域`user_song`：

```
id(auto incement)
song_id
user_id
song_name
song_file 
```

领域`user_like`：

```
id(auto incement)
song_id
uder_id
like 
```

在`user_like` 我保存任何用户喜欢歌曲的数据时，每一行都包含如下数据：

```
1 1 1 1 
```

请注意，喜欢会为不喜欢保存 0 或 1.0，为喜欢保存 1。

现在我需要从中找出前 20 首最喜欢的歌曲并`id`从中获取`user_like`所有数据。`user_songs``user_songs`

这该怎么做？
提前感谢您花费宝贵的时间来解决此查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:43:12.073

```
SELECT  a.*, b.totalLike
FROM    user_song a
        INNER JOIN
        (
            SELECT  song_id, COUNT(*) totalLike
            FROM    user_like
            GROUP   song_id
        ) b ON a.song_id = b.song_ID
ORDER BY totalLike DESC
LIMIT 20 
```

注意：上面的查询不处理`totaluserLike`结果的绑定值。它只会在结果列表中显示 20 条记录。

# ruby - Sinatra 如何知道使用哪个环境？

> ID：14353411
> 
> 赞同：1
> 
> 时间：2013-01-16T07:38:15.740
> 
> 标签：ruby, heroku, sinatra

我将 Sinatra 应用程序上传到服务器（heroku）。但似乎该应用程序的行为就像它在本地主机上一样，不像我的另一个 Rails 应用程序在那里运行良好。

那么如何检查我的 Sinatra 应用程序是否使用正确的环境？Sinatra 如何知道使用哪个环境？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:23:49.013

Heroku本质上会负责设置环境。默认情况下，它是“生产”。如果您对不同的用例有不同的配置/行为，则必须先对其进行编码。

例如

```
if ENV=="production"
  # do something
elsif ENV=="staging"
  # do something else
end 
```

我不确定您为什么要将环境明确设置为“生产”或其他内容。这应该由托管环境自行决定。

**更新**

[有关Heroku 文档](https://devcenter.heroku.com/articles/multiple-environments)的更多信息

**进一步更新**

```
 heroku run printenv 
```

上面应该列出环境变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T13:51:54.240

我向所有 heroku 实例添加了一个环境变量：

```
heroku config:add APP_NAME=<myappname> 
```

然后，对于 Sinatra，我在 config.ru 中有以下内容：

```
# detect environments and setup some passwords
case ENV['APP_NAME'] 
  when 'prod-damon'
    # whatever for production
  when 'dev-damon'
    # whatever for development on Heroku
  else
    # whatever for local
end 
```

# javascript - 使必填字段？可能重复：我可以将 required 属性应用于 HTML5 中的 <select>字段吗？我正在使用此处的 html5 联系表格，但在尝试使</select> 字段成为必需时遇到问题。其他一切都很好，只是遇到了麻烦，当我询问该领域时，开发人员没有回应。这就是我所拥有的 <select name="package" id="package" title="请选择一个包" class="required"><option value="</h1">ID：14353412 赞同：6 时间：2013-01-16T07:38:27.177 标签：javascript, jquery, ajax, html 回答 #1 赞同：17 时间：2013-01-16T07:42:40.280 我相信这个问题的最佳答案就是你要找的。去引用， 这对我有用 - 让第一个值为空 - 需要对空值起作用。 <select required> <option value="">Please select</option> <option value="one">One</option> </select> 回答 #2 赞同：0 时间：2013-01-16T07:45:35.337 如果你有更好的浏览器，你可以试试这个（就像在this线程中一样）： <select required> <option value=""></option> <option value="basic">Basic</option> <option value="plus">Plus</option> <option value="premium">Premium</option> </select> ，但您仍然应该使用 JavaScript，因为没有多少人拥有支持 HTML5required属性的浏览器。IE 和 Safari 不支持。 回答 #3 赞同：0 时间：2013-01-16T07:49:21.780 检查这个：http ://www.w3.org/TR/html-markup/select.html 全局属性 全局允许的任何属性。 名称 = 字符串 用于表单提交的与此元素关联的名称/值对的名称部分。 disabled = "disabled" 或 "" (空字符串) 或空 指定该元素表示一个禁用的控件。 表格 = ID 参考 新 与元素关联的表单上的 id 属性的值。 大小 = 正整数 向用户显示的选项数量。 multiple = "multiple" or "" (空字符串) or empty 如果存在，则表示其选择元素表示用于从选项列表中选择零个或多个选项的控件。如果不存在，则表示其选择元素表示用于从选项列表中选择单个选项的控件。 autofocus = "autofocus" 或 "" （空字符串）或空 指定该元素表示一个控件，一旦加载文档，UA 将为其提供焦点。 required = "required" or ""（空字符串）或空 指定该元素是表单提交的必需部分。 所以你需要一个required = "required"属性<select></option></select>

# windows - Windows 7 IIS 无法开启

> ID：14353418
> 
> 赞同：0
> 
> 时间：2013-01-16T07:38:53.103
> 
> 标签：windows, iis, windows-7

我正在尝试在安装了 64 位 Windows 7 Ultimate 的笔记本上打开 IIS 服务器。但是，当我尝试通过***打开和关闭 Windows 功能 ***来打开它时，进度条会一直填充到最后，并且计算机刚刚被锁定。我只能用电源按钮重新启动计算机。当然，它没有启用。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:21:57.010

[http://www.iis.net/learn/troubleshoot/installation-issues/troubleshooting-iis-7x-installation-issues](http://www.iis.net/learn/troubleshoot/installation-issues/troubleshooting-iis-7x-installation-issues)

请按照 Microsoft 的文章进行一些故障排除。我认为这台机器上的 CBS 缓存坏了，这篇文章展示了如何识别问题并修复它。

# sql - 游标与 30000 条记录或创建 30000 条更新语句之间的性能考虑

> ID：14353422
> 
> 赞同：0
> 
> 时间：2013-01-16T07:39:20.597
> 
> 标签：sql, sql-server, performance, sql-server-2008, cursor

哪个更好？

1)一个游标，循环30000条记录，一一更新

2)创建一个包含30000条更新命令的脚本

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:56:00.370

两者应该花费大约相同的时间，主要取决于 CURSOR 的声明方式。

原因？您有 30,000 个单独的更新，这通常是主要因素

请注意，由于批量大小和编译时间，一批中的 30,000 个单独的更新可能会失败......

SQL 是一种基于集合的语言，您很可能只需执行一次 UPDATE 即可一次更新所有行。如果你不能，那是因为2个原因

1.  您需要“每行”逻辑：这通常可以通过 CASE 表达式、UDF 等来实现
2.  你不懂集合和 SQL

有了更多信息（SQL 和逻辑），我们可以为您提供更多帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:44:24.543

有一个非常简单的方法来判断：做它并测量时间。

除此之外，当你只有 10 行时，拥有 30000 行并没有多大意义。

出于数据迁移或维护以外的原因以这种方式进行更新听起来也不明智，在这些情况下，性能不是问题 - 但维护和易读性始终是问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T07:59:01.633

你知道，这取决于上下文。

不过，它有助于学习。以 SQL 为例。您处于低水平，看不到这里可能的真正优化。SQL 不仅仅是更新、插入和简单的选择语句。

> 1)一个游标，循环30000条记录，一一更新

线性逐步处理。无法并行化，因为 SQL 本身没有可供用户使用的线程机制；优化是一项一项的——即查询优化器一次只查看一条语句。

> 2)创建一个包含30000条更新命令的脚本

假设脚本是外部的，它可以拆分工作并在多个连接上并发运行，即运行多个并行。

但还有更多：

*   制作一个计算新值的脚本。
*   使用 buld copy API 将它们批量导入临时表
*   发出一条更新语句，将临时表中的更新值带到最后一个。

也许有一个脚本可以为多重更新发出合并语句？如果您对 SQL api 的了解不仅仅是“更新、打开游标、简单选择”，那么这里有很多变化。

我这样做 - 尽管有更多数据（50.000 批，有时同时 4-6 批）。问题是 sql 批量复制有一些开销。但我以这种方式每秒管理 75.000 次插入。

很大程度上取决于业务问题和逻辑的复杂性——如果是简单的更新，那么问题是：计算还是外部驱动？多个值乘以 2 = 计算，更新地址 = 数据驱动（即您需要来自某个地方的新数据）。

# java - 递归函数改变原始数组？

> ID：14353424
> 
> 赞同：0
> 
> 时间：2013-01-16T07:39:22.823
> 
> 标签：java, arrays, recursion

我有一个递归函数，它需要创建一个由特殊对象组成的数组......

我的自定义对象是从此类填充的：

```
public class CategoryItem {

boolean hasSubCategories = false;
ArrayList<CategoryItem> subs;
ArrayList<Integer> positions;
String categoryName, categoryId;

// They have setter and getter methods

} 
```

这是我的递归函数：

```
public ArrayList<CategoryItem> GetLists(ArrayList<Integer> positions, int to) {

    ArrayList<CategoryItem> items = new ArrayList<CategoryItem>();
    for(int i = 0; i < to; i++) {
        CategoryItem item = new CategoryItem();
        item.setHasSubCategories(RandomBool());
        item.setCategoryName("Category " + i);
        item.setCategoryId(RandomId());
        ArrayList<Integer> pos = positions;
        pos.add(i);
            Log.d(LOG, "positions: " + positions);
        Log.d(LOG, "pos: " + pos);
        item.setPositions(pos);
        if(item.isHasSubCategories()) {
            item.setSubs(GetLists(item.getPositions(), i));
        }
        items.add(item);
    }
    return items;

} 
```

在这个函数中，RandomBool() 方法随机返回真/假……而 RandomId() 也不重要……

问题出在“位置”数组上。我想让每个项目都有特定的位置数组，例如：

第一步，每个项目需要有：[0]、[1]、[2]、[3] ...

对于下一步，假设我们选择了位置 3：[3,0], [3,1], [3,2]

但是我发现，当我将一个项目添加到 pos 数组时，我暂时分配它以不更改递归函数上的原始项目，它也被添加到原来的位置数组中。所以第一步的结果就像：每个项目的 [0,1,2,3]。

日志就像：

```
positions: []
pos: []
positions: [0]
pos: [0]
positions: [0, 1]
pos: [0, 1]
positions: [0, 1, 2]
pos: [0, 1, 2]
positions: [0, 1, 2, 0]
pos: [0, 1, 2, 0]
positions: [0, 1, 2, 0, 1]
pos: [0, 1, 2, 0, 1] 
```

如何防止这种情况并使其发挥作用？问题出在哪里？任何帮助表示赞赏。谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:43:30.517

> 我暂时指定它不要更改递归函数的原始函数

你有 C/C++ 背景吗？

```
A = B 
```

不在java中制作副本。它们都将指向同一个对象。这有点像所有变量都只是 C 指针。

您应该使用[复制构造函数](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#ArrayList%28java.util.Collection%29)来制作列表的副本。

```
ArrayList<Integer> pos = new ArrayList<Integer>(positions); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T07:49:21.410

您可以认为这`ArrayList<Integer> pos = positions;`就像您将指针分配给`ArrayList`（在 C/C++ 世界中），这意味着您将修改函数内的原始列表。要在本地列表上工作，您必须创建新列表并使用它：

```
ArrayLis<Integer> copiedList = new ArrayList<Integer>(ooriginalList); 
```

# three.js - 在场景中定位子对象（汽车 <-> 车轮层次结构）

> ID：14353427
> 
> 赞同：2
> 
> 时间：2013-01-16T07:39:38.190
> 
> 标签：three.js, webgl, blender

我需要将汽车模型添加到场景中，并将车轮作为分离的物体，以允许它们轻松旋转和可能的更换。问题是车轮定位——它们需要位于与车身相关的准确位置。如何以正确的方式完成？在 WebGL 演示和 TriggerRally 中存在现有的车轮位置——它们是为 3D 场景预定义的——但是如何？这些位置可以以某种方式映射到 Blender 模型坐标吗？

我尝试将一个轮子与身体分开，将枢轴点设置为其中心，保存坐标并将轮子网格添加到应用 Blender 位置（当然缩放）的三个.js 场景 - 但比例似乎不匹配。

我找到了带有层次结构导入的 OBJLoader，但它是非核心的 three.js 功能，所以我决定坚持使用 JSONLoader（我需要手动进行分组/层次结构）。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T21:38:22.037

您可以尝试将所有汽车元素放置在不同的位置，`THREE.Object3D`如下所示：

1.  汽车模型

2.  左前轮

3.  右前轮

4.  左后轮

5.  左后轮

通过将每个元素添加到新元素，`THREE.Object3D`您将为每个元素获得一个新的枢轴点（它将简化进一步的移动和旋转命令）。您必须记住根据其父元素（`THREE.Object3D`）设置元素的正确位置。

然后你只需添加`2-5`到`1`.

# c - 有没有办法拆分 gcc 宏参数？

> ID：14353428
> 
> 赞同：2
> 
> 时间：2013-01-16T07:39:46.783
> 
> 标签：c, gcc, macros

我编写可以在 GPU 或 CPU 上运行的代码。如果存在 CUDA 存在包装器，请尝试在 GPU 上运行函数。如果出现错误（例如没有内存），它会尝试在 CPU 上运行它。如果再次出错，则返回 0，否则返回 1。在 CUDA 缺少包装器的情况下，仅尝试在 CPU 上运行函数。

这是我的宏：

```
#ifdef CUDA_FOUND
#define SET_F(FNARGS, FNSTRIP) int FNARGS{  \
    if(!Only_CPU) if(CU ## FNSTRIP) return 1;\
    if(CPU ## FNSTRIP) return 1;            \
    return 0;                               \
}
#else
#define SET_F(FNARGS, FNSTRIP) int FNARGS{  \
    if(CPU ## FNSTRIP) return 1;            \
    return 0;                               \
}
#endif // CUDA_FOUND 
```

为了定义新函数，我这样称呼它：

```
SET_F(fillrandarr(size_t sz, char *arr), fillrandarr(sz, arr)) 
```

**问题**：有没有办法简化这个宏拆分参数的`FNARGS`组合`FNSTRIP`？即将上述定义缩短为

```
SET_F(fillrandarr(size_t sz, char *arr)) 
```

?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T12:27:55.580

正如 nm 在他的评论中所写：

> Boost 预处理器库可能可以做到这一点。
> Boost 通常是 C++，但预处理器库只是一组宏，没有（据我所知）C++ 特定的部分。

所以这是一个提升的解决方案：

```
#define BOOST_PP_VARIADICS 1

#include <boost/preprocessor.hpp>

#define FOO(...) FOO2(BOOST_PP_VARIADIC_TO_SEQ(__VA_ARGS__))
#define FOO2(seq) FOO3(BOOST_PP_SEQ_HEAD(seq),BOOST_PP_SEQ_TAIL(seq))
#define FOO3(name, args) FOO6(name,                                \
                              BOOST_PP_SEQ_FOR_EACH_I(FOO4,,args), \
                              BOOST_PP_SEQ_FOR_EACH_I(FOO5,,args))
#define FOO4(rep, data, index, type) (type BOOST_PP_CAT(arg,index))
#define FOO5(rep, data, index, type) (BOOST_PP_CAT(arg,index))
#define FOO6(name, dargs, cargs)                                   \
  FOO8(name, FOO7(dargs, void), FOO7(cargs, ))
#define FOO7(seq, empty)                                           \
  BOOST_PP_IF(BOOST_PP_SEQ_SIZE(seq),                              \
              BOOST_PP_SEQ_TO_TUPLE(seq), (empty))
#define FOO8(name, dargs, cargs)                                   \
  int name dargs {                                                 \
    if (BOOST_PP_CAT(CPU_, name)cargs)                             \
      return 1;                                                    \
    return 0;                                                      \
  }

FOO(fillrandarr, size_t, char*)
FOO(fun1, int, double)
FOO(fun2) 
```

它生成这样的代码（我添加的格式）：

```
int fillrandarr (size_t arg0, char* arg1) {
  if (CPU_fillrandarr(arg0, arg1))
    return 1;
  return 0;
}

int fun1 (int arg0, double arg1) {
  if (CPU_fun1(arg0, arg1))
    return 1;
  return 0;
}

int fun2 (void) {
  if (CPU_fun2())
    return 1;
  return 0;
} 
```

我省略了宏调用中的参数名称，因为它们实际上并不重要。已特别注意处理最后一种情况，即在同一框架中正确处理没有参数的函数。

以下是不同的步骤：

1.  由于可变参数宏显然无法区分零参数和一个空参数，因此始终包含函数名称的第一个宏必须将可变参数转换为更易于处理的数据结构，在这种情况下是一系列带括号的表达式。
2.  接下来，我们将该序列拆分为函数名称和参数类型。
3.  我们将参数类型序列转换为两个序列，一个用于函数定义，另一个用于函数调用。
4.  对于函数定义，我们在每个参数名称前加上其类型。
5.  对于函数调用，我们忽略类型，只写编号的参数名称。
6.  接下来我们必须确保正确处理空序列。对于调用，我们可以简单地编写`()`，但对于函数定义，我们必须改为编写`(void)`。
7.  因此，我们检查序列是否具有非零大小。如果是这样，我们将其转换为元组，即元素之间的逗号和括号。否则我们使用提供的默认值。
8.  现在我们按照您要求的方式组合所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T17:22:40.940

您可以围绕使用不同数量参数的函数声明包装宏：

```
#define SET_F_2(fname, \
  vtype1, vname1, \
  vtype2, vname2 \
) \
  SET_F( \
    fname( \
      vtype1 vname1, \
      vtype2 vname2 \
    ), \
    fname( \
      vname1, \
      vname2 \
    ) \
)

#define SET_F_3(fname, \
  vtype1, vname1, \
  vtype2, vname2, \
  vtype3, vname3 \
) \
  SET_F( \
    fname( \
      vtype1 vname1, \
      vtype2 vname2, \
      vtype3 vname3 \
    ), \
    fname( \
      vname1, \
      vname2, \
      vname3 \
    ) \
)

... and so on 
```

像这样使用它：

```
SET_F_2(x, short, s, int, i);
SET_F_3(y, int, i, short, s, float, f); 
```

[*使用slartibartfast*](https://stackoverflow.com/users/289766/slartibartfast) [提议](https://stackoverflow.com/a/14354274/694576)来计算 a`#define`的参数数量，这种方法肯定会针对更少的冗余进行优化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T13:04:23.107

毕竟我做了接下来的事情（最多 10 个参数）：

```
#define Fn1(A,B) A(x1)
#define Df1(A,B) A(B x1)
#define Fn2(A,B,C) A(x1, x2)
#define Df2(A,B,C) A(B x1, C x2)
#define Fn3(A,B,C,D) A(x1, x2, x3)
#define Df3(A,B,C,D) A(B x1, C x2, D x3)
#define Fn4(A,B,C,D,E) A(x1, x2, x3, x4)
#define Df4(A,B,C,D,E) A(B x1, C x2, D x3, E x4)
#define Fn5(A,B,C,D,E,F) A(x1, x2, x3, x4, x5)
#define Df5(A,B,C,D,E,F) A(B x1, C x2, D x3, E x4, F x5)
#define Fn6(A,B,C,D,E,F,G) A(x1, x2, x3, x4, x5, x6)
#define Df6(A,B,C,D,E,F,G) A(B x1, C x2, D x3, E x4, F x5, G x6)
#define Fn7(A,B,C,D,E,F,G,H) A(x1, x2, x3, x4, x5, x6, x7)
#define Df7(A,B,C,D,E,F,G,H) A(B x1, C x2, D x3, E x4, F x5, G x6, H x7)
#define Fn8(A,B,C,D,E,F,G,H,I) A(x1, x2, x3, x4, x5, x6, x7, x8)
#define Df8(A,B,C,D,E,F,G,H,I) A(B x1, C x2, D x3, E x4, F x5, G x6, H x7, I x8)
#define Fn9(A,B,C,D,E,F,G,H,I,J) A(x1, x2, x3, x4, x5, x6, x7, x8, x9)
#define Df9(A,B,C,D,E,F,G,H,I,J) A(B x1, C x2, D x3, E x4, F x5, G x6, H x7, I x8, J x9)
#define Fn10(A,B,C,D,E,F,G,H,I,J,K) A(x1, x2, x3, x4, x5, x6, x7, x8, x9, x10)
#define Df10(A,B,C,D,E,F,G,H,I,J,K) A(B x1, C x2, D x3, E x4, F x5, G x6, H x7, I x8, J x9, K x10)

#define DEF(N, ...) int Df ## N(__VA_ARGS__)
#define CONCAT(A, B) A ## B
#define FN(N, ...) Fn ## N(__VA_ARGS__)
#define DF(N, ...) Df ## N(__VA_ARGS__)
#define XFUNC(T, X) CONCAT(T, X)
#define FUNC(T, ...) XFUNC(T, FN(__VA_ARGS__))
#define DFUNC(T,...) EXTERN int XFUNC(T, DF(__VA_ARGS__))

#ifdef WRAPPER_C
// even when using cuda in case of fail CUDA init use CPU
static int Only_CPU =
#ifdef CUDA_FOUND
    0
#else
    1
#endif
;
#ifdef CUDA_FOUND
#define SET_F(...) DEF(__VA_ARGS__){                    \
    if(!Only_CPU) if(FUNC(CU, __VA_ARGS__)) return 1;   \
    if(FUNC(CPU, __VA_ARGS__)) return 1;                \
    return 0;                                           \
}
#else
#define SET_F(...) DEF(__VA_ARGS__){                    \
    if(FUNC(CPU, __VA_ARGS__)) return 1;                \
    return 0;                                           \
}
#endif // CUDA_FOUND
#else
    #define SET_F(...)
#endif // WRAPPER_C

#ifdef CPU_C // file included from CPU.c
    #define BOTH(...) DFUNC(CPU, __VA_ARGS__);
    //#pragma message "CPUC"
#elif defined CUDA_CU //file included from CUDA.cu
    #define BOTH(...) DFUNC(CU, __VA_ARGS__);
#elif defined WRAPPER_C // wrapper.c needs names of both wariants
    #ifndef CUDA_FOUND
        #define BOTH(...) DFUNC(CPU, __VA_ARGS__);
    #else
        #define BOTH(...) DFUNC(CU, __VA_ARGS__); DFUNC(CPU, __VA_ARGS__);
    #endif // CUDA_FOUND
#else // file included from something else - just define a function
    #define BOTH(...) DFUNC(, __VA_ARGS__);
#endif

#define DFN(...) BOTH(__VA_ARGS__) SET_F(__VA_ARGS__) 
```

此代码位于文件 wrapper.h 中。wrapper.c 仅包含代码的公共部分。

要定义我在 wrapper.h 中编写的函数，例如：

```
DFN(2, fillrandarr, size_t, float *)
DFN(6, bicubic_interp, float *, float *, size_t, size_t, size_t, size_t) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T08:44:57.650

你不能用预处理器拆开预处理符号，你只能将它们组合起来。这意味着“fillrandarr(sz,arr)”是预处理器的一个原子单元，因此不适合您的需要。您必须传递在参数列表中分隔的符号，例如

```
#define SET_F(f_name,p1_type,p1_name,p2_type,p2_name) ... 
```

对于进入函数的可变数量的参数，请使用

```
#define CNT_ARGS(...) CNT_ARGS_(__VA_ARGS__,8,7,6,5,4,3,2,1)
#define CNT_ARGS_(_1,_2,_3,_4,_5,_6,_7,_8,n) n

#define DROP_TYPE(...) DROP_TYPE_(CNT_ARGS(__VA_ARGS__),__VA_ARGS__)
#define DROP_TYPE_(n,...) DROP_TYPE__(n,__VA_ARGS__)
#define DROP_TYPE__(n,...) DROP_TYPE_##n(__VA_ARGS__)
#define DROP_TYPE_2(ptype,pname,...) pname
#define DROP_TYPE_4(ptype,pname,...) pname, DROP_TYPE_2(__VA_ARGS__)
#define DROP_TYPE_6(ptype,pname,...) pname, DROP_TYPE_4(__VA_ARGS__)
#define DROP_TYPE_8(ptype,pname,...) pname, DROP_TYPE_6(__VA_ARGS__)

#define FOO(fname,...)  fname(DROP_TYPE(__VA_ARGS__))

    FOO(my_func,t1,p1,t2,p2,t3,p3,t4,p4)  -> my_func(p1,p2,p3,p4)
    FOO(other_func,t1,p1,t2,p2)           -> other_func(p1,p2) 
```

# c# - C# 挂钩或注入任何浏览器

> ID：14353432
> 
> 赞同：2
> 
> 时间：2013-01-16T07:39:59.037
> 
> 标签：c#, javascript, browser, hook, code-injection

我正在编写 ac# WPF 应用程序，想知道是否可以在任何浏览器（如 Chrome、Safari、FF 甚至 Opera）上创建挂钩。我想要做的是手动重新加载活动选项卡或注入类似 live.js 的 JavaScript，它的作用完全相同（如果我正确理解 live.js）。

唯一不希望用户做的就是为他的浏览器安装一个额外的扩展。

我还考虑过是否可以更改浏览器进程加载到本地内存的资源或其他东西，但我根本不知道如何去做。

# c# - 在 2 个日期之间选择数据

> ID：14353434
> 
> 赞同：-1
> 
> 时间：2013-01-16T07:40:05.830
> 
> 标签：c#, asp.net, .net, sql-server

我在 ASP.NET 和 SqlServer 中工作。

**我的应用程序中有两个带有日历扩展器**的文本框，用户将在其中选择两个日期。我想从 sqlserver 获取这两个日期之间的数据，其中该特定字段的数据类型是**DateTime**。请告诉我如何继续这个......我写了一个查询，但那不起作用..

我的查询：

```
 SqlCommand cmd = new SqlCommand("select top 1 OrderNumber from tblOrderMaster where OrderedDate>='" + txtfromcal.Text + "' and OrderedDate<='" + txttocal.Text + "' ", conn); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T07:48:52.150

要做的事情

*   参数化查询以防止sql注入
*   使用`using`语句正确处理对象
*   使用`try-catch`块来处理异常

例如，

```
string query = @"select top 1 OrderNumber 
                from tblOrderMaster 
                where OrderedDate BETWEEN @startDate AND @endDate";
using(SqlConnection conn = new SqlConnection("connectionString here"))
{
    using(SqlCommand cmd = new SqlCommand())
    {
        cmd.Connection = conn;
        cmd.CommandText = query;
        cmd.Parameters.AddWithValue("@startDate", txtfromcal.Text);
        cmd.Parameters.AddWithValue("@endDate", txttocal.Text);
        try
        {
            conn.Open();
            // other codes
            // to fetch the record
        }
        catch(SqlException e)
        {
            // do something with 
            // e.ToString()
        }
    }
} 
```

来源

*   [AddWithValue 方法](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue%28v=vs.110%29.aspx)
*   [添加（*推荐使用的方法*）](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.add.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T09:21:19.673

使用此代码：

```
Sqlcommand cmd=new sql command ("Select data from tablename 
                                where date>=startdate 
                                and date<=enddate",connection) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-07T13:47:11.950

试试这个

SELECT * FROM YourTableName WHERE sqlDateColumnName BETWEEN '" + textbox1.Text + "' AND '" + textbox2.Text + "'

# php - 嵌套数组的条件检查

> ID：14353438
> 
> 赞同：0
> 
> 时间：2013-01-16T07:40:27.930
> 
> 标签：php, arrays

我有以下片段可以在屏幕上转储一些信息：

```
for ($i=0; $i < 60; $i++) {
  echo 'output: '.$array[$i]['options'][0]."<br />";
  echo 'output: '.$array[$i]['options'][4]."<br />";
} 
```

输出以下内容：

```
output: Lorem ipsum
output: 1
output: dolor sit amet
output: 1
output: consectetur adipiscing elit
output: 0 
```

如何将 echo 语句包装在条件中，所以只有当`['options'][4] == '1'`它运行时？

```
if ($array[$i]['options'][4] == '1') {
...
} 
```

不起作用并且不返回任何内容，请将其设置为`== '0'`，您将得到一切。我尝试先将其分配给变量，然后尝试先转换为整数，但它们似乎都返回 0，而 echo 显示该值。

使用 获得夜间创意`foreach loops`，试图深入研究项目，但结果却丢失了仍能正确读取值的键。它可能很简单，但自从我涉足 php 和数组以来，它已经很久了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:42:16.670

用一个简单的`if`. 但为什么要使用`txt`？你不应该使用`options`吗？

```
if(isset($array[$i]['options'][4]) and $array[$i]['options'][4]==1){
  echo 'output: '.$array[$i]['options'][0]."<br />";
  echo 'output: '.$array[$i]['options'][4]."<br />";
} 
```

# iphone - 如何解决 Apple LLVM 编译器 4.1 错误？

> ID：14353439
> 
> 赞同：0
> 
> 时间：2013-01-16T07:40:31.337
> 
> 标签：iphone, objective-c, ios6, instagram

我是 iPhone 开发的初学者。我想将 Instagram 集成到我的应用程序中，为此我从 Github 下载了 Instagram 的 api，但它给出了 Apple LLVM compiler 4.1 error Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr 的错误/bin/clang 失败，退出代码为 1

请给出如何解决此错误的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:49:19.327

我发现这是在我的 iOS 应用程序中集成 instagram 的最简单的分步教程

[**如何使用 Web 服务后端创建像 Instagram 这样的应用程序 - 第 1/2 部分**](http://www.raywenderlich.com/13511/how-to-create-an-app-like-instagram-with-a-web-service-backend-part-12)

我有同样的 ARC 问题，但如果你遵循这个，你会很容易和很有帮助

顺便说一句*，您刚刚在 word 下方查看错误*，在该页面中看到您需要在 Xcode for Libs 中进行一些更改，您将使其正常工作。

**-fno-objc-弧**

感谢 raywenderlich :)

# ios - iOS：如何在实际屏幕绘制之前调用 CADisplayLink 的事件？

> ID：14353442
> 
> 赞同：0
> 
> 时间：2013-01-16T07:40:50.457
> 
> 标签：ios, xamarin.ios, cadisplaylink

我正在使用 UIKit 构建一个跨平台 UI 库的 iOS 实现，该库的主要功能之一是允许用户自由更改子控件的大小，并且父控件的大小会自动适应。

由于每次更改孩子的大小时都刷新父级的大小是低效且不必要的，因此我设计了 UI 系统以在实际设备绘制/渲染发生之前刷新所有“脏”控件的位置、大小和很多事情。在 iOS 上，我使用 CADisplayLink 调用刷新方法，然后我发现在所有内容都显示在屏幕上之后调用了该事件，这导致了以下问题：

1.  用户将首先看到“崩溃”的布局。（渲染首先发生）
2.  短时间后（CADisplayLink 的事件触发），一切都会恢复正常。

一开始我以为我使用CADisplayLink的方式是错误的，但是在任何地方都找不到解决方案，所以我现在很绝望（我要上吊了！！）

或者也许我根本不应该使用 CADisplayLink？

请帮我！

PS。由于我正在构建一个跨平台的东西，我实际上使用的是 MonoTouch，但我相信基本概念是相同的。

PS2。而且由于我使用的是C#的MonoTouch，所以上面的描述可能不适合Objective-C的世界（比如“事件”这个词，我认为与Obj-C相关的是选择器，或者什么^_^）

PS3。另外请原谅我的英语不好，如果我的描述不够清楚，请随时问我。

这里的代码：

```
CADisplayLink _displayLink = CADisplayLink.Create(Update);  //Update is my refresh method
_displayLink.AddToRunLoop(NSRunLoop.Current, NSRunLoop.NSDefaultRunLoopMode); 
```

应该很容易理解^_^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T06:49:26.873

从我能收集到的所有信息来看，基本上没有办法做到这一点。所以我修改了我的布局代码，现在在设置值后立即应用属性。仍然需要一些优化，但不再需要依赖 CADisplayLink。

不管怎么说，还是要谢谢你！

# ios - IOS 应用代理

> ID：14353445
> 
> 赞同：0
> 
> 时间：2013-01-16T07:40:58.797
> 
> 标签：ios, appdelegate

我将不胜感激您对如今使用以下代码访问全局变量、在 IOS 5 及更高版本中创建应用程序的看法

```
ProjectAppDelegate *appDelegate = (ProjectAppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

以上是否被视为面向对象编程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T08:35:54.063

我不会问它是否被认为是面向对象的编程。面向对象编程是关于使用具有属性和方法的交互对象的单独主题。这与您的问题无关 - 这是在 AppDelegate 中访问全局变量的使用。

我认为您真正要问的是，将全局变量放在 AppDelegate 中然后使用代码行访问程序中任何位置的变量（例如不同的视图控制器）是否是一种好的编程风格

```
ProjectAppDelegate *appDelegate = (ProjectAppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

AppDelegate 实际上只是一个“监听器”类。该类具有在应用程序更改状态时调用的委托方法，例如在启动、进入后台、终止等期间。您的应用程序有机会响应这些应用程序状态的更改，并且应该以这种方式使用。

将全局变量放在 AppDelegate 中的原因可能看起来很有用，因为 AppDelegate 实际上是一个共享类（单例），可以在应用程序的任何位置访问。但是，这仍然不能使它打算保存全局变量。

这实际上仅取决于您的应用程序架构以及您如何遵循模型-视图-控制器范式。这是一个示例：如果您要在 AppDelegate 中实现 CoreLocation 以获取用户的位置，那么您可以从项目中的任何其他类访问用户位置数据。但是，您可以轻松地拥有一个单独的位置管理器类，然后使用 NSNotification 通知其他类已找到新位置。第三种可能性是使位置管理器类成为共享单例，然后访问全局数据。最后，这三者都有效，这取决于你如何构建你的应用程序。

但是，我会尽我所能保持 AppDelegate 特定于响应应用程序状态的变化。我会避免在 AppDelegate 中放置太多全局变量，因为这不是 AppDelegate 的用途。

# c# - 我可以在列表中使用匿名类型吗 而不是助手类？

> ID：14353447
> 
> 赞同：1
> 
> 时间：2013-01-16T07:41:01.307
> 
> 标签：c#, generics, anonymous-types

我需要一个包含一些计算对象的列表。

我当前的代码看起来像这样

```
private class HelperClass
{
    public DateTime TheDate {get;set;}
    public TimeSpan TheDuration {get;set;}
    public bool Enabled {get;set;}
}

private TimeSpan TheMethod()
{
    // create entries for every date
    var items = new List<HelperClass>();
    foreach(DateTime d in GetAllDatesOrdered())
    {
        items.Add(new HelperClass { TheDate = d, Enabled = GetEnabled(d), });
    }

    // calculate the duration for every entry
    for (int i = 0; i < items.Count; i++)
    {
        var item = items[i];
        if (i == items.Count -1) // the last one
            item.TheDuration = DateTime.Now - item.TheDate;
        else
            item.TheDuration = items[i+1].TheDate - item.TheDate;
    }

    // calculate the total duration and return the result
    var result = TimeSpan.Zero;
    foreach(var item in items.Where(x => x.Enabled))
        result = result.Add(item.TheDuration);
    return result;
} 
```

现在我觉得为我的计算引入一个类型（HelperClass）有点难看。我的第一种方法是`Tuple<DateTime, TimeSpan, bool>`像我通常那样使用，但是因为我需要在创建实例后修改 TimeSpan，所以我不能使用 Tuple，因为`Tuple.ItemX`它是只读的。

我想过一个匿名类型，但我不知道如何初始化我的列表

```
var item1 = new { TheDate = DateTime.Now,
                  TheDuration = TimeSpan.Zero, Enabled = true };

var items = new List<?>(); // How to declare this ???
items.Add(item1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:44:03.863

您**可以**使用 LINQ 来做到这一点，例如：

```
var itemsWithoutDuration = GetAllDatesOrdered()
    .Select(d => new { TheDate = d, Enabled = GetEnabled(d) })
    .ToList();
var items = itemsWithoutDuration
    .Select((it, k) => new { TheDate = it.d, Enabled = it.Enabled, 
         TheDuration = (k == (itemsWithoutDuration.Count - 1) ? DateTime.Now : itemsWithoutDuration[k+1].TheDate) - it.TheDate })
    .ToList(); 
```

但到那时，`Tuple`它既更具可读性，也更简洁！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T07:44:58.233

使用投影对我来说似乎是前进的方向 - 但您可以通过将您的收藏与自身“压缩”来计算持续时间，偏移一。然后，您可以在一个查询中执行*整个方法：*

```
// Materialize the result to avoid computing possibly different sequences
var allDatesAndNow = GetDatesOrdered().Concat(new[] { DateTime.Now })
                                      .ToList();

return allDatesNow.Zip(allDatesNow.Skip(1),
                       (x, y) => new { Enabled = GetEnabled(x),
                                       Duration = y - x })
                  .Where(x => x.Enabled)
                  .Aggregate(TimeSpan.Zero, (t, pair) => t + pair.Duration); 
```

该`Zip`调用将每个日期与其后续日期配对，将每对值转换为持续时间和启用标志。该`Where`调用过滤掉禁用的对。该`Aggregate`调用将结果对的持续时间相加。

# java - 不幸的是，在 AVD 中，PruebaNumero3 已停止工作

> ID：14353457
> 
> 赞同：0
> 
> 时间：2013-01-16T07:41:37.550
> 
> 标签：java, android, eclipse

我已经在寻找其他问题的答案，但我没有找到或没有看到它，我很感激任何帮助谢谢。

**这些是 Log Cat 中显示的错误**

```
E/Trace(1417): error opening trace file: No such file or directory (2)

 E/AndroidRuntime(1417): java.lang.RuntimeException: Unable to start activity ComponentInfo{gabrielrojas.com/gabrielrojas.com.primeraventana}: android.view.InflateException: Binary XML file line #7: Error inflating class textview

 E/AndroidRuntime(1417): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class textview 
```

**机器人清单**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
android:minSdkVersion="8"
android:targetSdkVersion="15" />

<application
android:icon="@drawable/ic_launcher"
android:label="@string/app_name"
android:theme="@style/AppTheme" >
<activity
android:name=".PruebaNumero3"
android:label="@string/title_activity_prueba_numero3" >
<intent-filter>
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
</activity>
<activity android:name=".primeraventana"/>
<activity android:name=".segundaventana" />
</application>
</manifest> 
```

**PruebaNumero3.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_centerHorizontal="true"
android:layout_centerVertical="true"
android:text="@string/hello_world"
tools:context=".PruebaNumero3" />
<Button android:id="@+id/boton1"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="@string/Primera_Ventana"/>

<Button
android:id="@+id/boton2"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_alignParentLeft="true"
android:layout_alignParentTop="true"
android:layout_marginTop="60dp"
android:text="@string/Segunda_Ventana" />

</RelativeLayout> 
```

**PruebaNumero3.java**

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_prueba_numero3);
// Visualizamos Los botones
Button boton1 = (Button) findViewById(R.id.boton1);
Button boton2 = (Button) findViewById(R.id.boton2);

// Fijamos los eventos que haran ir a las otras actividades

boton1.setOnClickListener(new OnClickListener() {
public void onClick(View v) {
Intent intent = new Intent(PruebaNumero3.this, primeraventana.class);
startActivity(intent);
}} );

boton2.setOnClickListener(new OnClickListener() {
public void onClick(View v) {
Intent intent = new Intent(PruebaNumero3.this, segundaventana.class);
startActivity(intent); 
}} );} 

@Override
public boolean onCreateOptionsMenu(Menu menu) {
getMenuInflater().inflate(R.menu.activity_prueba_numero3, menu);
return true;
} } ; 
```

**初级冒险.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<textview android:id="@+id/textview1"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="@string/Escala_Uno"/>

<Button android:id="@+id/boton3"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="@string/Menú_Principal"/>

</LinearLayout> 
```

**初级冒险.java**

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.primeraventana);

TextView text = (TextView) findViewById(R.id.textview1);
Button boton3 = (Button) findViewById(R.id.boton3);

text.setText(R.string.Escala_Uno);

boton3.setText(R.string.MenÃº_Principal);

boton3.setOnClickListener(new OnClickListener() {
public void onClick(View v) {
finish(); 
```

**segundaventana.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<textview android:id="@+id/textview2"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="@string/Escala_Dos"/>

<Button android:id="@+id/boton4"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="@string/Menú_Principal"/>
</LinearLayout> 
```

**segundaventana.java**

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.primeraventana);

TextView text = (TextView) findViewById(R.id.textview2);
Button boton4 = (Button) findViewById(R.id.boton4);

text.setText(R.string.Escala_Dos);
boton4.setText(R.string.MenÃº_Principal);

boton4.setOnClickListener(new OnClickListener() {
public void onClick(View v) {
finish (); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:49:19.510

检查您的`primeraventana.xml`布局文件。您`TextView`使用不存在的 textview 打开了标签。如下更改

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView android:id="@+id/textview1"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="@string/Escala_Uno"/>

<Button android:id="@+id/boton3"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="@string/Menú_Principal"/>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T08:00:11.977

我不知道到底是什么问题，但我确实有一些你可以尝试的方法：

1) 在primeraventana.xml 中，您的TextView 应该大写。像这样：

```
<TextView android:id="@+id/textview1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/Escala_Uno"/> 
```

2) 在 segundaventana.java 中，字符串名称只能是英文字母和数字。删除“Ãº”：

```
boton4.setText(R.string.MenÃº_Principal); 
```

最后，我像这样声明 OnClickListeners()：

```
button.setOnClickListener(new View.OnClickLister() {
    public void onClick(View v) {
        // You code here.
    }
} 
```

我不知道天气对没有 View 有什么影响。它只是看起来更好。:)

# android - 安卓软键盘问题

> ID：14353458
> 
> 赞同：2
> 
> 时间：2013-01-16T07:41:39.300
> 
> 标签：android, keyboard

嗨朋友们，

我正在开发一个安卓应用程序。我对 android 软键盘有一个小问题。我有一个`editText`，当我点击它时，它会显示安卓软键盘。在软键盘的顶部，有一个文本区域，显示我使用软键盘输入的所有文本。它显示我使用键盘输入的所有文本。是否可以选择隐藏键盘上的文本区域。

请在这个问题上帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:48:56.417

我认为您在谈论自动建议。将以下代码添加到布局文件中的编辑文本中。

```
android:inputType="textNoSuggestions" 
```

或者在代码中，你可以像这样使用它，

```
setInputType(InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS); 
```

你也最好读读[这个](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ainputType)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:52:01.120

如果您谈到自动聚焦在edittext上的解决方案：

```
InputMethodManager imm = (InputMethodManager)mContext.getSystemService(Context.INPUT_METHOD_SERVICE);
                    imm.hideSoftInputFromWindow(editText.getWindowToken(), 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T07:59:10.690

您也可以`EditText.setInputType(InputType.TYPE_TEXT_VARIATION_VISIBLE_PASSWORD);` 在您的代码中使用。使用以下代码，当您单击 EditText 时，可以停止从软键盘自动发出的建议

# cuda - 使用 CUDA Thrust 的 Elementwise 电源操作

> ID：14353459
> 
> 赞同：2
> 
> 时间：2013-01-16T07:41:42.413
> 
> 标签：cuda, thrust

有没有办法用`pow`函数转换推力矢量？换句话说，我想将`x`向量的每个元素转换为`pow(x,a)`, 并带有`a`一个常数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T10:23:20.560

有关如何编写具有初始化参数的函子，请参阅Thrust Quict 入门指南中的[部分转换。](http://docs.nvidia.com/cuda/thrust/index.html#topic_4_1)

```
struct saxpy_functor
{
    const float a;

    saxpy_functor(float _a) : a(_a) {}

    __host__ __device__
        float operator()(const float& x, const float& y) const { 
            return a * x + y;
        }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-29T17:09:11.647

这是一个完整的例子。正如@Eric 所提到的，所需要的只是定义自己的幂函数并使用`thrust::transform`.

```
#include <thrust/sequence.h>
#include <thrust/device_vector.h>

class power_functor {

    double a;

    public:

        power_functor(double a_) { a = a_; }

        __host__ __device__ double operator()(double x) const 
        {
            return pow(x,a);
        }
};

void main() {

    int N = 20;

    thrust::device_vector<double> d_n(N);
    thrust::sequence(d_n.begin(), d_n.end());

    thrust::transform(d_n.begin(),d_n.end(),d_n.begin(),power_functor(2.));

    for (int i=0; i<N; i++) {
        double val = d_n[i];
        printf("Device vector element number %i equal to %f\n",i,val);
    }

    getchar();
} 
```

# apache - apache用虚拟主机重写有递归

> ID：14353465
> 
> 赞同：1
> 
> 时间：2013-01-16T07:42:26.990
> 
> 标签：apache, mod-rewrite

我想将 test.com 重写为 test.com/context。

浏览器返回重定向递归错误。

有人有线索吗？

我把下面的httpd-vhosts.conf。

```
<VirtualHost *:80>
    ServerName test.com

    JkMount /* mschoi
    ErrorLog logs/mschoi-error_log
    CustomLog logs/mschoi-acces_log common

    RewriteEngine On
    RewriteRule ^/(.*)$ /context/$1 [L,R]

</VirtualHost>

httpd.conf
Include conf/extra/httpd-vhosts.conf 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:05:31.660

这是您的规则`/context`在重写时再次匹配的简单案例。您可以使用 a`RewriteCond`来避免它：

```
RewriteEngine On
# Rewrite only if the request doesn't already match /context
RewriteCond %{REQUEST_URI} !^/context
RewriteRule ^/(.*)$ /context/$1 [L,R] 
```

如果正在访问的文件确实存在（而不是重写模式），您可以测试而不重写任何真实的现有文件：

```
RewriteEngine On
# If the requested resource is not actually a real file or directory (doesn't exist)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/(.*)$ /context/$1 [L,R] 
```

### 评论后编辑以解释：

不仅每个目录的规则会导致递归。在这种情况下，`/(.*)`匹配*任何内容*并无条件附加到`/content`. 由于`[R]`存在用于重定向的标志，并且每个都是一个新请求，因此它变成了一个重定向链：

```
/something
/content/something
/content/content/something
/content/content/content/something 
```

随后的重定向始终继续匹配前导`/content`以及后面的内容并附`/(.*)`加到它。

# asp.net-web-api - 基于参数类型重载web api动作方法

> ID：14353466
> 
> 赞同：41
> 
> 时间：2013-01-16T07:42:27.823
> 
> 标签：asp.net-web-api

有没有办法对 Action 方法执行基于参数类型的重载？即是否可以在控制器中执行以下操作

```
public class MyController : ApiController
{
   public Foo Get(int id) { //whatever }

   public Foo Get(string id) { //whatever }

   public Foo Get(Guid id)  { //whatever }
} 
```

如果是这样，需要对 Route 表进行哪些更改。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-16T12:36:48.817

标准路由方法不能很好地支持这种情况。

您可能希望使用[基于属性的路由](http://attributerouting.net/)，因为这为您提供了更多的灵活性。

具体查看可以按类型路由的路由约束：

```
// Type constraints
[GET("Int/{x:int}")]
[GET("Guid/{x:guid}")] 
```

其他任何事情都会变成一个黑客......例如

如果您确实使用标准路由尝试过，您可能需要通过其名称路由到正确的操作，然后使用 reg ex 的约束（例如[guid](http://www.geekzilla.co.uk/View8AD536EF-BC0D-427F-9F15-3A1BC663848E.htm)）路由到所需的默认操作。

**控制器：**

```
public class MyController : ApiController
{
   [ActionName("GetById")]
   public Foo Get(int id) { //whatever }

   [ActionName("GetByString")]
   public Foo Get(string id) { //whatever }

   [ActionName("GetByGUID")]
   public Foo Get(Guid id)  { //whatever }
} 
```

**路线：**

```
 //Should match /api/My/1
        config.Routes.MapHttpRoute(
            name: "DefaultDigitApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { action = "GetById" },
            constraints: new { id = @"^\d+$" } // id must be digits
        );

        //Should match /api/My/3ead6bea-4a0a-42ae-a009-853e2243cfa3
        config.Routes.MapHttpRoute(
            name: "DefaultGuidApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { action = "GetByGUID" },
            constraints: new { id = @"^(\{{0,1}([0-9a-fA-F]){8}-([0-9a-fA-F]){4}-([0-9a-fA-F]){4}-([0-9a-fA-F]){4}-([0-9a-fA-F]){12}\}{0,1})$" } // id must be guid
        );

        //Should match /api/My/everything else
        config.Routes.MapHttpRoute(
            name: "DefaultStringApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { action = "GetByString" }
        ); 
```

**更新**

如果做 FromBody，我通常会使用 POST （也许使用模型的 FromUri 代替）但您的要求可以通过添加以下内容来满足。

对于控制器

```
 [ActionName("GetAll")]
    public string Get([FromBody]MyFooSearch model)
    {
         if (model != null)
        {
            //search criteria at api/my
        }
        //default for api/my
    }

    //should match /api/my
    config.Routes.MapHttpRoute(
                name: "DefaultCollection",
                routeTemplate: "api/{controller}",
                defaults: new { action = "GetAll" }
            ); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-07-14T08:58:32.067

您可以如下编码您的方法

```
 [Route("api/My/{id:int}")]
    public string Get(int id)
    {
        return "value";
    }

    [Route("api/My/{name:alpha}")]
    public string Get(string name)
    {
        return name;
    }

    [Route("api/My/{id:Guid}")]
    public string Get(Guid id)
    {
        return "value";
    } 
```

# c - 静态函数和普通函数中的变量

> ID：14353469
> 
> 赞同：2
> 
> 时间：2013-01-16T07:42:42.483
> 
> 标签：c, variables, static

我知道 C 中的静态函数和普通函数之间的区别，我的问题是：在静态函数中声明的变量和在 C 中的普通函数中声明的变量之间有什么区别吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T07:53:43.453

> **在静态函数中声明的变量和在 C 中的普通函数中声明的变量之间有什么区别吗？**

答：NO 没有区别

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T08:09:59.677

函数中声明的变量与其存储类类型无关。函数中定义的所有变量（无论是否静态）都将定义其范围，直到函数退出。然而，一个函数是否为静态只会定义它对其他文件的可见性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T07:51:41.970

不，该`static`关键字仅适用于应用于函数时的可见性。

函数的`static`关键字告诉编译器/链接器该函数不应该在文件之外可见。当应用于函数时，`static`C 中的语言等同`private`于 Java 或 C++ 等语言。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T08:42:31.840

静态函数中使用的术语`static`使该函数仅适用于该特定`.c`文件。这不会对该静态函数内声明的变量（或）`auto`执行`static`任何操作。`register`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-16T08:51:44.790

这两个变量都是`automatic`，因此它们被分配在堆栈上。

# objective-c - 使用 Objective C 和 SUP 2.1.3 插入数据。后端

> ID：14353470
> 
> 赞同：0
> 
> 时间：2013-01-16T07:42:50.450
> 
> 标签：objective-c, xcode, sup

我正在使用 Objective C 和 SUP 2.1.3 后端使用 Xcode。我想插入一些数据。为此，我使用了 create 命令。

```
[createReq setCUST_ID:instBaseS.CUST_ID];  
    [createReq setCust_Name:custName.text];

    [createReq setIbase_ID:instBaseS.IBASE_ID];
    [createReq setProduct_ID:pdtID.text];
    NSLog(@"ibase id is %@",instBaseS.IBASE_ID);
    [createReq setProblem_Desc:problmDesc.text];
    [createReq setSub_Product_ID:@"MOTOR"]; 
      NSLog(@"installed bases cust id %@",instBaseS.CUST_ID);

    [createReq create];   
   // [FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DB synchronize];

[createReq submitPending]; 
```

在这一行`[createReq create];`中，我们遇到了一个异常，例如

```
2013-01-16 12:59:22.078 Field_Final[1555:15203] *** Terminating app due to uncaught exception 'SUPPersistenceException', reason: '-1230 (ERROR)'
*** First throw call stack:
(0x1384022 0x4422cd6 0x3a427c 0x3ac9ce 0x12e376 0x12e922 0x1518fd 0x151694 0xd7db2 0xdc0d8 0xdbcb0 0xdbd13 0xde35 0xb18e4 0x1385e99 0x176114e 0x17610e6 0x1807ade 0x1807fa7 0x1807266 0x17863c0 0x17865e6 0x176cdc4 0x1760634 0x2aa5ef5 0x1358195 0x12bcff2 0x12bb8da 0x12bad84 0x12bac9b 0x2aa47d8 0x2aa488a 0x175e626 0x235a 0x22a5)
terminate called throwing an exception(lldb) 
```

为什么我们会得到这个异常？
我们想在“创建”命令之后同步数据库吗？
如果上述步骤有误，激活此的正确步骤是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:34:50.073

这确实是一个奇怪的错误。我见过的大多数解决方案是创建一个新项目，实现您的 SUP 代码并运行它。它应该可以工作，以及旧项目中的 SUP 代码。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T05:41:56.433

问题解决了。我所做的是，我设置了所有个性化参数并使用“保存”命令保存它。然后我使用“同步”命令同步数据库。然后它被插入到数据库中。我通过使用 MBO 开发人员使用的生成代码中的 find_by_primary_key 方法确认它。

# mysql - MySQL - 授予权限

> ID：14353474
> 
> 赞同：0
> 
> 时间：2013-01-16T07:42:59.280
> 
> 标签：mysql

我不知道如何在 MySQL 中授予用户权限。

我在 aws 上使用 MySQL RDS。我正在创建一个用户并且需要访问报告数据库。
我创建了一个哈希密码并运行了以下内容。

```
SELECT PASSWORD('Test123');

GRANT ALL PRIVILEGES ON reports.* TO 'central'@'localhost'
  IDENTIFIED BY PASSWORD '*D1AD25EDF929F55FBFF703358EC527';

mysql -u central -pTest123 -h test.com
ERROR 1045 (28000): Access denied for user 'central'@'112.198.130.xxx' (using password: YES) 
```

为什么？我做错什么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:46:08.063

您授予了权限，`'central'@'localhost'`但正在尝试以`'central'@'112.198.130.xxx'`. 从 连接`localhost`或授予适当主机的权限。

# asp.net - 在客户端打开网页的硬件识别

> ID：14353475
> 
> 赞同：0
> 
> 时间：2013-01-16T07:43:04.070
> 
> 标签：asp.net, c#-4.0, security, identity

我有一个使用 c# 的 asp.net 网页。我现在想实现硬件安全性，在打开网页之前应该完整填写任何硬件标识。我的意思是如果允许客户端的硬件那么它将打开网页否则它应该会导致授权等错误。有什么方法可以做到这一点，我可以检测到客户端硬件识别，然后允许打开网页。请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:04:27.360

不，没有办法直接通过浏览器检测客户端硬件。

http 请求标头可以提供有关用户操作系统的`User-Agent`一些信息，但请记住，用户可以修改和发送他们喜欢的任何标头。不是你应该指望安全的东西。

网络不允许您将用户锁定在硬件上，这是 IMO 一种不好的做法。

您可以在服务器上跟踪活动会话，并且每个用户只允许一定数量的会话。

# c# - 在通用方法 C# 中指定数据表的列

> ID：14353476
> 
> 赞同：0
> 
> 时间：2013-01-16T07:43:06.973
> 
> 标签：c#

我已经有了指定列的代码，`dataTable`但我想要的是创建一个包含在她的参数中的通用方法：`ColumnName`和类型。我怎样才能做到这一点？

这是我的代码：

```
column = dt.Columns.Add();
column.ColumnName = "IPPName";
column.DataType = typeof(String);

column = dt.Columns.Add();
column.ColumnName = "tagName";
column.DataType = typeof(String);

column = dt.Columns.Add();
column.ColumnName = "time";
column.DataType = typeof(String);

column = dt.Columns.Add();
column.ColumnName = "value";
column.DataType = typeof(Double);

column = dt.Columns.Add();
column.ColumnName = "qtity";
column.DataType = typeof(Double); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:57:29.087

我不知道我是否正确理解了问题。你想实现这样的东西吗？

```
 public DataTable  CreateDataTable(Dictionary<string,Type> columns)
      {
            DataTable dt = new DataTable();
            foreach( var key in columns)
            {
                var column = dt.Columns.Add();
                column.ColumnName = key.Key;
                column.DataType = key.Value;
            }
            return dt;

        }

        public void CreateNewDataTable()
        {
            var columns = new Dictionary<string, Type>()
                {
                    {"column", typeof (string)}
                };
            var dt = CreateDataTable(columns);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:40:51.810

使用扩展方法解决它的另一种方法。我相信它比@adt 答案更容易理解并且更有用，因为它可以在已经存在的`DataTable`.

如果您需要有关扩展方法的帮助，请查看[此说明](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)或询问 :)

```
public static class DataTableExtentions {
  public static void AddColumn(this DataTable table, string columnName, Type columnType)
  {
    var col = table.Columns.Add();
    col.ColumnName = columnName;
    col.DataType = columnType;
  }
} 
```

它会被这样调用：

```
column = dt.AddColumn("IPPName", typeof(String));

column = dt.AddColumn("tagName", typeof(String));

column = dt.AddColumn("time", typeof(String));

column = dt.AddColumn("value", typeof(Double));

column = dt.AddColumn("qtity", typeof(Double)); 
```

# c++ - 使用 TrueType 的 OpenGL 分割错误

> ID：14353483
> 
> 赞同：0
> 
> 时间：2013-01-16T07:43:25.050
> 
> 标签：c++, opengl, ubuntu, segmentation-fault, freetype

我一直在尝试在我的引擎中采用[TrueType](http://en.wikibooks.org/wiki/OpenGL_Programming/Modern_OpenGL_Tutorial_Text_Rendering_02) OpenGL 教程。当我编译并运行他们的示例时，一切正常，但是当我尝试将代码重写到我的引擎中时，我不断遇到分段错误。然后我尝试将他们的代码复制粘贴到我的 Utils 头文件中，但它不起作用。我已经用 cout 进行了一些调试，似乎错误发生在我的渲染方法中。我将首先发布渲染方法，然后是所有其他与 TrueType 相关的函数。如果你需要问我什么，请随意。

**渲染方法**：

```
void Util::Font::render(const char *text, Atlas *a, float x, float y, float sx, float sy)
{
glUseProgram(shaderID);

glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

const uint8_t *p;

/* Use the texture containing the atlas */
glBindTexture(GL_TEXTURE_2D, a->tex);
glUniform1i(samplerID, 0);

/* Set up the VBO for our vertex data */
glEnableVertexAttribArray(0);
glBindBuffer(GL_ARRAY_BUFFER, vertexBufferID);
glVertexAttribPointer(0, 4, GL_FLOAT, GL_FALSE, 0, 0);

point coords[6 * strlen(text)];
int c = 0;

/* Loop through all characters */
for (p = (const uint8_t *)text; *p; p++) {
    /* Calculate the vertex and texture coordinates */
    float x2 = x + a->c[*p].bl * sx;
    float y2 = -y - a->c[*p].bt * sy;
    float w = a->c[*p].bw * sx;
    float h = a->c[*p].bh * sy;

    /* Advance the cursor to the start of the next character */
    x += a->c[*p].ax * sx;
    y += a->c[*p].ay * sy;

    /* Skip glyphs that have no pixels */
    if (!w || !h)
        continue;

    coords[c++] = (point) {
    x2, -y2, a->c[*p].tx, a->c[*p].ty};
    coords[c++] = (point) {
    x2 + w, -y2, a->c[*p].tx + a->c[*p].bw / a->w, a->c[*p].ty};
    coords[c++] = (point) {
    x2, -y2 - h, a->c[*p].tx, a->c[*p].ty + a->c[*p].bh / a->h};
    coords[c++] = (point) {
    x2 + w, -y2, a->c[*p].tx + a->c[*p].bw / a->w, a->c[*p].ty};
    coords[c++] = (point) {
    x2, -y2 - h, a->c[*p].tx, a->c[*p].ty + a->c[*p].bh / a->h};
    coords[c++] = (point) {
    x2 + w, -y2 - h, a->c[*p].tx + a->c[*p].bw / a->w, a->c[*p].ty + a->c[*p].bh / a->h};
}

/* Draw all the character on the screen in one go */
glBufferData(GL_ARRAY_BUFFER, sizeof coords, coords, GL_DYNAMIC_DRAW);
glDrawArrays(GL_TRIANGLES, 0, c);

glDisableVertexAttribArray(0);

} 
```

**字体初始化**

```
bool Util::Font::init()
{
if (FT_Init_FreeType(&ft))
{
    std::cout << "Failed to load Freetype!" << std::endl;
    return false;
}

if (FT_New_Face(ft, "res/fonts/Ubuntu-R.ttf", 0 , &face))
{
    std::cout << "Failed to load font file!" << std::endl;
    return false;
}

shaderID = Util::Shader::loadShaders("res/shaders/font.vert", "res/shaders/font.frag");

samplerID = glGetUniformLocation(shaderID, "textureSampler");
colorID = glGetUniformLocation(shaderID, "color");

glGenBuffers(1, &vertexBufferID);

font12px = new Atlas(face, 12);
font24px = new Atlas(face, 24);
font48px = new Atlas(face, 48);

return true;
} 
```

**Utils.h 中的字体头**

```
namespace Font {

    static FT_Library ft;
    static FT_Face face;
    static GLuint shaderID;
    static GLuint samplerID;
    static GLuint colorID;
    static GLuint vertexBufferID;
    static GLuint coordID;

    bool init();

    struct point {
        GLfloat x;
        GLfloat y;
        GLfloat s;
        GLfloat t;

    };

    struct Atlas {
GLuint tex;     // texture object

int w;          // width of texture in pixels
int h;          // height of texture in pixels

struct {
    float ax;   // advance.x
    float ay;   // advance.y

    float bw;   // bitmap.width;
    float bh;   // bitmap.height;

    float bl;   // bitmap_left;
    float bt;   // bitmap_top;

    float tx;   // x offset of glyph in texture coordinates
    float ty;   // y offset of glyph in texture coordinates
} c[128];       // character information

 Atlas(FT_Face face, int height) {
    FT_Set_Pixel_Sizes(face, 0, height);
    FT_GlyphSlot g = face->glyph;

    int roww = 0;
    int rowh = 0;
     w = 0;
     h = 0;

     memset(c, 0, sizeof c);

    /* Find minimum size for a texture holding all visible ASCII characters */
    for (int i = 32; i < 128; i++) {
        if (FT_Load_Char(face, i, FT_LOAD_RENDER)) {
            fprintf(stderr, "Loading character %c failed!\n", i);
            continue;
        }
        if (roww + g->bitmap.width + 1 >= 1024) {
            w = std::max(w, roww);
            h += rowh;
            roww = 0;
            rowh = 0;
        }
        roww += g->bitmap.width + 1;
        rowh = std::max(rowh, g->bitmap.rows);
    }

    w = std::max(w, roww);
    h += rowh;

    /* Create a texture that will be used to hold all ASCII glyphs */
    glActiveTexture(GL_TEXTURE0);
    glGenTextures(1, &tex);
    glBindTexture(GL_TEXTURE_2D, tex);
    glUniform1i(samplerID, 0);

    glTexImage2D(GL_TEXTURE_2D, 0, GL_ALPHA, w, h, 0, GL_ALPHA, GL_UNSIGNED_BYTE, 0);

    /* We require 1 byte alignment when uploading texture data */
    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);

    /* Clamping to edges is important to prevent artifacts when scaling */
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

    /* Linear filtering usually looks best for text */
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

    /* Paste all glyph bitmaps into the texture, remembering the offset */
    int ox = 0;
    int oy = 0;

    rowh = 0;

    for (int i = 32; i < 128; i++) {
        if (FT_Load_Char(face, i, FT_LOAD_RENDER)) {
            fprintf(stderr, "Loading character %c failed!\n", i);
            continue;
        }

        if (ox + g->bitmap.width + 1 >= 1024) {
            oy += rowh;
            rowh = 0;
            ox = 0;
        }

        glTexSubImage2D(GL_TEXTURE_2D, 0, ox, oy, g->bitmap.width, g->bitmap.rows, GL_ALPHA, GL_UNSIGNED_BYTE, g->bitmap.buffer);
        c[i].ax = g->advance.x >> 6;
        c[i].ay = g->advance.y >> 6;

        c[i].bw = g->bitmap.width;
        c[i].bh = g->bitmap.rows;

        c[i].bl = g->bitmap_left;
        c[i].bt = g->bitmap_top;

        c[i].tx = ox / (float)w;
        c[i].ty = oy / (float)h;

        rowh = std::max(rowh, g->bitmap.rows);
        ox += g->bitmap.width + 1;
    }

    fprintf(stderr, "Generated a %d x %d (%d kb) texture atlas\n", w, h, w * h / 1024);
}

~Atlas() {
    glDeleteTextures(1, &tex);
}
};

    static Atlas *font48px;
    static Atlas *font24px;
    static Atlas *font12px;

    void render(const char *text, Atlas *atlas, float x, float y, float sx, float sy);
} 
```

# c# - 如何在 C# 中映射数字，就像在 Arduino 中使用 map 一样？

> ID：14353485
> 
> 赞同：15
> 
> 时间：2013-01-16T07:43:29.420
> 
> 标签：c#, arduino

C#中是否有像Arduino的[地图这样的功能？](http://arduino.cc/en/Reference/map)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-16T07:50:32.177

您可以使用[扩展方法](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)（`decimal`例如）来做到这一点：

```
public static class ExtensionMethods
{
    public static decimal Map (this decimal value, decimal fromSource, decimal toSource, decimal fromTarget, decimal toTarget)
    {
        return (value - fromSource) / (toSource - fromSource) * (toTarget - fromTarget) + fromTarget;
    }
} 
```

然后你可以像这样使用它：

```
decimal res = 2.Map(1, 3, 0, 10);
// res will be 5 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-06-19T10:30:29.437

```
private static int map(int value, int fromLow, int fromHigh, int toLow, int toHigh) 
{
    return (value - fromLow) * (toHigh - toLow) / (fromHigh - fromLow) + toLow;
} 
```

# javascript - 在 ScrollExtend 上调用函数 - jQuery

> ID：14353492
> 
> 赞同：1
> 
> 时间：2013-01-16T07:44:01.047
> 
> 标签：javascript, jquery

如何在 scrollExtend 上调用函数。我需要下面的代码，但它不能正常工作。如何让它发挥作用？

```
$(document).ready(
    function() {
        $('#scrollBox').scrollExtend(function() {
            //alert('scroll extend working');
            //functionCall();
        });
    }
); 
```

但是scrollExtend的实际代码如下所示，我不知道如何调用它的函数，

```
jQuery('.scroll_container').scrollExtend({
    'target': 'div#scroll_items',
    'url': 'more_content.html',
    'newElementClass': 'list_item more_content'
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:52:38.783

我会在 JQuery 中使用内置函数 onScrollBeyond。

否则在 scrollExtend 中有一个设置，称为 beforestart 和 onSuccess 两者都是回调变量，这意味着您可以将函数放在那里

```
$('#scrollBox').scrollExtend({  
  'target': 'div#scroll_items',   
  'beforeStart': myFunction,  
  'onSuccess': mySecondFunction  
}); 
```

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T07:58:49.287

正如 BeadFist 所说，您可以简单地使用 onScrollBeyond：

```
 $('.scroll_container').onScrollBeyond(functionCall);//if the function exists already, just pass a reference too it
$('.scroll_container').onScrollBeyond(function()
{
    //your function
}); 
```

请注意，对于`scrollExtend`和`onScrollBeyond`，您当然需要[plugin](http://archive.plugins.jquery.com/project/scrollExtend)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T07:50:42.237

尝试：

```
$('#scrollBox').scroll(function() {
   if($('#scrollBox').scrollTop() + $('#scrollBox').height() == $(parentElm).height()) {
       alert("bottom!");
   }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T07:53:02.687

尝试使用 onScrollBeyond：

```
$(document).ready(
  function() {
    $('#scrollBox').onScrollBeyond(function() {
      //alert('scroll extend working');
      //functionCall();
    });
  }
); 
```

# c# - “dd/mm/yyyy”格式的比较验证器

> ID：14353496
> 
> 赞同：2
> 
> 时间：2013-01-16T07:44:33.200
> 
> 标签：c#, asp.net, date, globalization, requiredfieldvalidator

我正在增强将在 EMEA 上使用的现有 Web 应用程序，在该应用程序中，我需要根据用户的全球区域在运行时将日期格式从“mm/dd/yyyy”更改为“dd/mm/yyyy”。

我的问题是我所需的验证不接受“dd/mm/yyyy”格式。

```
<asp:CompareValidator ID="cvDateReportCompleted" runat="server" ErrorMessage="Report Date is not in correct format" ControlToValidate="txtDateReportCompleted" Operator="DataTypeCheck" Type="Date" ValidationGroup="vgMain" Display="None"></asp:CompareValidator> 
```

谁能提供处理此问题的详细信息以`asp:CompareValidator`接受“mm/dd/yyyy”或“dd/mm/yyyy”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T07:55:43.980

在继续之前，您必须考虑这一点：

对于`CompareValidator`它将接受的日期非常特别。例如，以下日期被视为无效：

2001 年 1月 1 日 2001 年
1 月 1 日

CompareValidator 需要一个如下所示的日期：

2001
年 1 月 1 日 2001 年 1 月 1 日

[http://www.informit.com/articles/article.aspx?p=25461&seqNum=5](http://www.informit.com/articles/article.aspx?p=25461&seqNum=5)

***解决方案：***

默认情况下，格式`ASP.Net CompareValidator`不适用于`dd/mm/yyyy`格式，因此我们需要将页面的`Culture`属性更改为 ASP.Net 网页`en-GB`中的属性，`@Pagedirective`如下所示

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" 
Inherits="_Default" Culture = "en-GB" %> 
```

[现场演示](http://www.aspsnippets.com/Demos/232/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:51:34.647

你需要设置`Culture`aspx页面。

```
<%@ Page culture="your culture" %>. 
```

# testing - 在线程组之间传递多个值 - Jmeter

> ID：14353498
> 
> 赞同：1
> 
> 时间：2013-01-16T07:44:36.227
> 
> 标签：testing, jmeter, load-testing, stress-testing

我有 ThreadGroup1 执行登录操作，它使用 CSV 数据集配置从 CSV 文件获取凭据，并将用户名和密码保存在两个不同的变量中，例如：

```
${__setProperty(USERNAMEGlobal, ${USERNAME})}
${__setProperty(PASSWORDGlobal, ${PASSWORD})} 
```

现在在 ThreadGroup2 我使用这些凭据：

```
${__property()} 
```

它适用于单个用户，但如果我尝试多个用户（请求），最后一个值会覆盖以前的所有值，并且 ThreadGroup2 只接收定义的最后一个凭据。

我希望将所有凭据一一传递给 ThreadGroup2，然后 ThreadGroup2 中的请求应分别根据所有这些凭据工作。

如何做到这一点？

PS：我定义了加速期=1，用户数=3，循环=1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:12:23.917

有一些选项：

*   [线程间通信](http://code.google.com/p/jmeter-plugins/wiki/InterThreadCommunication)。
*   将它们放到不同的属性中：

    ```
    ${__setProperty(USERNAMEGlobal1, ${USERNAME1})}
    ${__setProperty(USERNAMEGlobal2, ${USERNAME2})}
    etc. 
    ```

*   使用所有用户名初始化数组，对其进行[字符串化](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#toString%28java.lang.Object%5B%5D%29)，然后放入属性。但是，它看起来像是一个会减慢您的计划的黑客。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:32:47.227

[看起来您可以将所有用户名-密码对保存到 ThreadGroup1 中的文件 csv-file 中，然后通过例如读取CSV Data Set Config](http://jmeter.apache.org/usermanual/component_reference.html#CSV_Data_Set_Config)在 ThreadGroup2 中重新使用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-31T05:56:53.637

我想知道您是否真的需要两个单独的线程组？

似乎您只需要一个 ThreadGroup 即可在其中执行登录操作，然后将用户/传递参数保存在**vars**中，而不是保存在**props**中。Vars 是线程本地的，因此一个线程的值不会覆盖另一个线程的值。

您可以在脚本中设置变量：`vars.put("var_name", "var_value")`，然后像`${var_name}`. 设置变量的[另一个选项。](http://jmeter.apache.org/usermanual/functions.html#how)

# c# - 在 C# 中使用 GDAL 时出现异常

> ID：14353502
> 
> 赞同：15
> 
> 时间：2013-01-16T07:45:08.497
> 
> 标签：c#, exception, gdal, geotiff

我开始在我的应用程序中使用**gdal_csharp** dll 并读取 geotiff 文件。但它说：

```
The type initializer for 'OSGeo.GDAL.GdalPINVOKE' threw an exception. 
```

这是我的代码

```
string fileName = @"/path to geotiff file";

OSGeo.GDAL.Dataset DS = 
    OSGeo.GDAL.Gdal.Open(fileName, OSGeo.GDAL.Access.GA_ReadOnly); 
```

谁能帮忙？

**编辑：**

我有这些 dll

![在此处输入图像描述](../Images/60938fef3e4676fbf06e99d4cfcff7c1.png)

这是完整的错误消息：

![在此处输入图像描述](../Images/e173016f7ed4b9712646e29d7fb8e9cd.png)

它说无法加载`gdal_wrap`。但是当我将该 dll 添加到我的应用程序时，会显示以下消息：

![在此处输入图像描述](../Images/ff988af57c71b3ecfd2c7d1ab44bf74b.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-06-01T19:42:36.177

作为对此的更新，SharpMap 团队现在将 GDAL 作为一个 nuget 包维护在[这里](https://www.nuget.org/packages/GDAL/)，它会定期更新。您需要为您的项目安装“GDAL.Native”和“GDAL”包才能使用 GDAL 库。一旦通过 nuget 安装，它们将自动创建一个“GdalConfiguration.cs”，您可以在启动之前调用该“GdalConfiguration.cs”来初始化 GDAL 路径。唯一需要注意的是软件包设置为自动将其适当的 GDAL 库复制到您的输出构建目录。如果您需要部署应用程序，您将不得不做一些额外的工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T08:51:59.947

[为了解决这个问题，我下载了这里](http://trac.osgeo.org/gdal/wiki/BuildingOnWindows)描述的预建库并从[这里](http://home.gdal.org/fwtools/FWTools247.exe)获取了 FWTools 。

我使用的非托管 DLL`\install_dir\FWTools2.4.7\bin`来自`\install_dir\FWTools2.4.7\csharp`.

`gdal14.dll`，`msvcp71.dll`并`msvcr71.dll`来自[这里](http://download.osgeo.org/gdal/win32/1.4.1/gdalwin32exe141.zip)，在第一个链接中提到。

您收到的错误 re`gdal_wrap.dll`是指它的依赖项之一。我把那个 DLL 扔进去`depends`，它发现了一个很长的依赖库列表。请注意，由于我使用 FWTools 发行版，此列表可能会更长 - 如果您从源代码构建您的版本，它可能看起来不同，但适用相同的原则。

为了让上面的代码在我的机器上工作，我的输出目录中有以下文件：

```
gdal14.dll
gdalconst_csharp.dll
gdalconst_wrap.dll
gdal_csharp.dll
gdal_fw.dll
gdal_wrap.dll
geos_fw.dll
geotiff_fw.dll
hdf5dll.dll
hdf_fw.dll
jpeg12_osgeo.dll
jpeg_osgeo.dll
libcurl.dll
libeay32.dll
libexpat.dll
libmysql.dll
libpq.dll
libtiff_fw.dll
lti_dsdk_dll.dll
mfhdf_fw.dll
msvcp71.dll
msvcr71.dll
NCScnet_fw.dll
NCSEcw_fw.dll
NCSUtil_fw.dll
netcdf.dll
ogdi_32b1.dll
proj.dll
sqlite3.dll
ssleay32.dll
szlibdll.dll
xerces-c_2_7.dll
zlib1.dll
zlib_osgeo.dll 
```

现在这些不一定都必须存在于输出目录中——只要它们在你的路径上某处（例如，`\Windows\System32`）你应该没问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-12-09T14:47:27.230

我知道这是一个老问题，但我相信我的回答可能会对某人有所帮助。

通过执行以下操作，我能够使用 c# gdal 成功编译和运行示例：

1.  [从http://www.gisinternals.com/](http://www.gisinternals.com/)下载 GDAL sdk （在我的情况下为 64 位）
2.  执行`SDKShell.bat`脚本设置系统环境路径等
3.  在 Visual Studio 中创建项目。并引用所有 .net dll（名称以 结尾的`_csharp.dll`），位于`\bin\gdal\csharp\`下载的 SDK中
4.  将 Visual Studio 项目设置中的平台目标设置为 x64 以消除错误的图像格式异常。如果我选择使用 32 位版本的 SDK，则不需要最后一步。

我根本没有安装 fwtools。看起来 fw_tools 的最后一个版本比较旧，sdk 仍在维护。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-24T21:24:51.157

我知道这是一个相当老的问题，但我在自己研究了同样的问题后在谷歌中发现了这个，所以这意味着对于这个错误的搜索，这仍然是一个非常相关的更新页面，因为它仍然在前 5 名搜索相同问题时的大 G。

就我而言，引起共鸣的是“DeusExMachina25”和“Grzegorz Sławecki”的答案。

我正在编写一些使用 NUGet 上当前构建的“锐图”的软件（截至 2016 年 6 月 24 日），我的软件一直抛出与 OP 最初报告的相同的 gdal_wrap 消息，即使我正在使用Sharpmap 团队提供的 GDAL 包。

我没有意识到包的 NUGet 安装程序已经为我安装了一个配置类，但是在阅读了这个线程并发现它确实我去寻找它之后。

果然我在我的项目中找到了文件'GdalConfiguration.cs'，并在我的项目中的适当位置添加了对它的调用，期望GDAL被正确初始化。

但是，在我这样做之后，我仍然遇到了同样的问题。

因此，我在已添加的 GDAL 例程的开头设置了一个断点，并一直等到断点被击中。

然后我通过该方法进行了跟踪，最终找到了以下行：

```
var gdalPath = Path.Combine(executingDirectory, "gdal"); 
```

在文件的第 64 行左右。

跟踪这个，我注意到正在构建的路径是：

```
d:\geodata\maptest\maptest\bin\debug\gdal 
```

但是 NUGet 安装程序已将所有依赖程序集安装在

```
d:\geodata\maptest\maptest\bin\debug 
```

正是我期望他们出现的地方。

我更改了第 64 行，使其现在变为：

```
var gdalPath = Path.Combine(executingDirectory, ""); 
```

瞧，错误消失了，一切都开始工作了。

我也可以用另一种方式做事，并创建一个名为 gdal 的文件夹，然后将所有内容复制到该文件夹​​中，但是当我对项目进行“清理”时，该文件夹将被删除。

由于配置类，设置基于此路径的各种环境变量，快速更改这一行也修复了 GDAL 数据文件、插件和其他一些东西的路径。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T17:56:44.837

您可以尝试使用 Dependency Walker 来查看是否有 gdal_csharp 试图抓取但不能抓取的任何 dll。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-14T13:20:39.937

您是否已将 GDAL 库的路径添加到 PATH 环境变量中？[我从http://vbkto.dyndns.org/sdk/?_sm_au_=iVVqjsHS2n46WP00](http://vbkto.dyndns.org/sdk/?_sm_au_=iVVqjsHS2n46WP00)下载了我的文件，这是我的路径：C:\libs\release-1600-gdal-1-9-mapserver-6-2\bin。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-06T21:16:41.310

要使用 GDAL 的 C# 绑定，您需要安装 FWTools（来自*[http://fwtools.maptools.org/](http://fwtools.maptools.org/)*）以及与您的系统匹配的最新二进制文件（来自*[http://vbkto.dyndns.org/ sdk/](http://vbkto.dyndns.org/sdk/)*）。之后，重要的是在 PATH 变量中包含 FWTools 的*bin*目录（例如 64 位系统：*C:\Program Files (x86)\FWTools2.4.7\bin*）以及必要的 dll （`gdal_csharp.dll`在问题中提到) 在您的 Visual Studio 项目引用中。[我在这里](http://vipassanaandenvironmentalinformatics.blogspot.co.nz/2013/03/getting-started-with-c-and-gdal.html)概述了完整的过程。

此过程适用于 32 位和 64 位系统，我使用 VS 2010 和 2012 对其进行了测试。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-02T14:41:18.167

从系统变量中删除 python 的路径。因为主要的gdal路径与python 27冲突

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-20T20:05:28.793

您是否忘记：

```
GdalConfiguration.ConfigureGdal();
GdalConfiguration.ConfigureOgr();

Gdal.AllRegister();
Ogr.RegisterAll(); 
```

# php - 如何在 PHP 中安装补丁

> ID：14353507
> 
> 赞同：5
> 
> 时间：2013-01-16T07:45:24.150
> 
> 标签：php

我需要在我的 PHP 代码中安装这个补丁：

[https://bugs.php.net/patch-display.php?bug_id=44522&patch=uploads_larger_than_2g_HEAD_v2&revision=latest](https://bugs.php.net/patch-display.php?bug_id=44522&patch=uploads_larger_than_2g_HEAD_v2&revision=latest)

任何机构可以解释如何？

我的 PHP 版本：5.4.10

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T07:54:31.077

您必须先拥有源文件和补丁文件，然后才能对其进行修补。它很简单。

1.  进入 PHP 5.4 源码根目录
2.  跑`patch -p0 < /path/to/patch.patch`
3.  如果显示错误，请按 撤消`patch -R < /path/to/patch.patch`。并调整**-p *num***值。并转到步骤 2。这里*-p*是最小前缀，包含补丁文件中找到的每个文件名中的 num 个前导斜杠。一个或多个相邻斜线的序列被计为一个斜线。这控制了如何处理在补丁文件中找到的文件名，以防您将文件保存在与发送补丁的人不同的目录中。例如，假设补丁文件中的文件名是

    ```
    /u/howard/src/blurfl/blurfl.c 
    ```

    设置`-p0`给出未修改的整个文件名，`-p1`给出

    ```
    u/howard/src/blurfl/blurfl.c 
    ```

    没有前导斜杠，`-p4`给出

    ```
    blurfl/blurfl.c 
    ```

    而根本不指定`-p`只是给你`blurfl.c`. 无论您最终得到什么，都将在当前目录或`-d`选项指定的目录中查找。后面的数字`-p`可以通过以下方式确定

4.  之后，您需要**编译**此修补版本的 PHP。编译说明包含在 PHP 源目录中。在 Unix 中使用`README.UNIX-BUILD-SYSTEM`文件构建它，在 Windows 中使用`README.WIN32-BUILD-SYSTEM`文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T07:52:35.090

将您的文件下载为`php_upload_larger_than_2g.patch`.

把它放在你的系统上。

跑： `patch /path/to/patch/php_upload_larger_than_2g.patch /path/to/patching/file/whatever.php`

这应该“修补”该文件。请注意，这只适用于类 Unix 系统。

# php - 致命错误：在第 203 行的 app/code/core/Mage/Paypal/Block/Express/Review.php 中的非对象上调用成员函数 getPayment()

> ID：14353511
> 
> 赞同：-2
> 
> 时间：2013-01-16T07:46:01.487
> 
> 标签：php, paypal, magento-1.7

从贝宝重定向回来后，我在通过贝宝快速结账进行交易时遇到了这个错误。

我在运输方式中发现了这个错误。

我正在使用 magento 1.7 版本。

这是给出错误的代码

```
 protected function _beforeToHtml()
    {
        $methodInstance = $this->_quote->getPayment()->getMethodInstance(); // here i get error
        $this->setPaymentMethodTitle($methodInstance->getTitle());
        $this->setUpdateOrderSubmitUrl($this->getUrl("{$this->_paypalActionPrefix}/express/updateOrder"));
        $this->setUpdateShippingMethodsUrl($this->getUrl("{$this->_paypalActionPrefix}/express/updateShippingMethods"));

        $this->setShippingRateRequired(true);
        if ($this->_quote->getIsVirtual()) {
            $this->setShippingRateRequired(false);
        } else {
            // prepare shipping rates
            $this->_address = $this->_quote->getShippingAddress();
            $groups = $this->_address->getGroupedAllShippingRates();
            if ($groups && $this->_address) {
                $this->setShippingRateGroups($groups);
                // determine current selected code & name
                foreach ($groups as $code => $rates) {
                    foreach ($rates as $rate) {
                        if ($this->_address->getShippingMethod() == $rate->getCode()) {
                            $this->_currentShippingRate = $rate;
                            break(2);
                        }
                    }
                }
            }

            // misc shipping parameters
            $this->setShippingMethodSubmitUrl($this->getUrl("{$this->_paypalActionPrefix}/express/saveShippingMethod"))
                ->setCanEditShippingAddress($this->_quote->getMayEditShippingAddress())
                ->setCanEditShippingMethod($this->_quote->getMayEditShippingMethod())
            ;
        }

        $this->setEditUrl($this->getUrl("{$this->_paypalActionPrefix}/express/edit"))
            ->setPlaceOrderUrl($this->getUrl("{$this->_paypalActionPrefix}/express/placeOrder"));

        return parent::_beforeToHtml();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:06:37.167

您请明确您的问题，并在您遇到错误的地方发布代码，以便我们期待解决您的问题。

错误背后的原因可能是您在未正确初始化的对象上调用方法 getpayment()。

# java - Java：检测三击而不触发双击

> ID：14353512
> 
> 赞同：4
> 
> 时间：2013-01-16T07:46:06.847
> 
> 标签：java, swing, mouseevent, double-click

我有一个 JTable，我想在双击单元格时调用一个函数，并在三次单击单元格时调用另一个函数。

当单元格被三次单击时，我不想调用双击函数。

我现在拥有的是（mgrdAlarm 是 JTable）：

```
mgrdAlarm.addMouseListener(new MouseAdapter()
{
  public void mouseClicked(MouseEvent e)
  {
    System.out.println("getClickCount() = " + e.getClickCount());
    if (e.getClickCount()==2)
    {
      doubleClick();
      System.out.println("Completed : doubleClick()");
    }
    if (e.getClickCount()==3)
    {
      tripleClick();
      System.out.println("Completed : tripleClick()");
    }
  }
}); 
```

双击控制台显示：

```
getClickCount() = 1
getClickCount() = 2
Completed : doubleClick() 
```

三击时控制台显示：

```
getClickCount() = 1
getClickCount() = 2
Completed : doubleClick()
getClickCount() = 3
Completed : tripleClick() 
```

三次单击时，我希望控制台显示：

```
getClickCount() = 1
getClickCount() = 2
getClickCount() = 3
Completed : tripleClick() 
```

所以我不想在双击单元格时调用函数 doubleClick()，但我确实想在双击单元格时调用函数 doubleClick()。

[编辑]

正如所有回复所暗示的那样，解决方案似乎是延迟双击动作并等待一定时间进行三次单击。

但正如[这里](https://stackoverflow.com/a/1068302/1584106)所讨论的那样，这可能会导致不同类型的问题：用户可能将他的双击时间设置得很长，这可能与我的三次单击超时重叠。

如果我的双击操作在我的三次单击操作之前执行，这并不是真正的灾难，但它确实会产生一些额外的开销，尤其是一些我想阻止的额外数据流量。

由于到目前为止唯一的解决方案可能会导致其他问题，这实际上可能比原来的问题更糟糕，所以我将保持原样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-18T11:30:36.730

```
 public class TestMouseListener implements MouseListener {    
  private boolean leftClick;
  private int clickCount;
  private boolean doubleClick;
  private boolean tripleClick;
  public void mouseClicked(MouseEvent evt) {
    if (evt.getButton()==MouseEvent.BUTTON1){
                leftClick = true; clickCount = 0;
                if(evt.getClickCount() == 2) doubleClick=true;
                if(evt.getClickCount() == 3){
                    doubleClick = false;
                    tripleClick = true;
                }
                Integer timerinterval = (Integer)Toolkit.getDefaultToolkit().getDesktopProperty("awt.multiClickInterval");

                         Timer  timer = new Timer(timerinterval, new ActionListener() {
                            public void actionPerformed(ActionEvent evt) { 

                                if(doubleClick){
                                    System.out.println("double click.");                                    
                                    clickCount++;
                                    if(clickCount == 2){
                                        doubleClick();   //your doubleClick method
                                        clickCount=0;
                                        doubleClick = false;
                                        leftClick = false;
                                    }

                                }else if (tripleClick) { 

                                    System.out.println("Triple Click.");
                                    clickCount++;
                                    if(clickCount == 3) {
                                       tripleClick();  //your tripleClick method
                                        clickCount=0;
                                        tripleClick = false;
                                        leftClick = false;
                                    }

                                } else if(leftClick) {                                      
                                    System.out.println("single click.");
                                    leftClick = false;
                                }
                            }               
                        });
                        timer.setRepeats(false);
                        timer.start();
                        if(evt.getID()==MouseEvent.MOUSE_RELEASED) timer.stop();
            }           
      }

          public static void main(String[] argv) throws Exception {

            JTextField component = new JTextField();
            component.addMouseListener(new TestMouseListener());
            JFrame f = new JFrame();

            f.add(component);
            f.setSize(300, 300);
            f.setVisible(true);

            component.addMouseListener(new TestMouseListener());
          }
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T03:39:22.527

先前的答案是正确的：您必须考虑时间并延迟将其识别为双击，直到经过一定时间。正如您所注意到的，挑战在于，用户的双击阈值可能很长或很短。所以你需要知道用户的设置是什么。另一个 Stack Overflow 线程（[在 Java 中区分单击和双击](https://stackoverflow.com/questions/4577424/distinguish-between-a-single-click-and-a-double-click-in-java)）提到了`awt.multiClickInterval`桌面属性。尝试将其用作您的阈值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T08:22:21.640

你可以做类似的事情，改变延迟时间：

```
public class ClickForm extends JFrame {

final static long CLICK_FREQUENTY = 300;

static class ClickProcessor implements Runnable {

    Callable<Void> eventProcessor;

    ClickProcessor(Callable<Void> eventProcessor) {
        this.eventProcessor = eventProcessor;
    }

    @Override
    public void run() {
        try {
            Thread.sleep(CLICK_FREQUENTY);
            eventProcessor.call();
        } catch (InterruptedException e) {
            // do nothing
        } catch (Exception e) {
            // do logging
        }
    }
}

public static void main(String[] args) {
    ClickForm f = new ClickForm();
    f.setSize(400, 300);
    f.addMouseListener(new MouseAdapter() {
        Thread cp = null;
        public void mouseClicked(MouseEvent e) {
            System.out.println("getClickCount() = " + e.getClickCount() + ", e: " + e.toString());

            if (cp != null && cp.isAlive()) cp.interrupt();

            if (e.getClickCount() == 2) {
                cp = new Thread(new ClickProcessor(new Callable<Void>() {
                    @Override
                    public Void call() throws Exception {
                        System.out.println("Double click processed");
                        return null;
                    }
                }));
                cp.start();
            }
            if (e.getClickCount() == 3) {
                cp =  new Thread(new ClickProcessor(new Callable<Void>() {
                    @Override
                    public Void call() throws Exception {
                        System.out.println("Triple click processed");
                        return null;
                    }
                }));
                cp.start();
            }
        }
    });
    f.setVisible(true);
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T08:11:26.733

您需要延迟执行`double click`以检查其是否为`tripple click`.

暗示。

如果`getClickCount()==2`然后让它等待..说喜欢`200ms`？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T08:53:44.150

这与检测双击而不触发单击完全相同的问题。您必须延迟触发事件，直到您确定没有后续点击。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-03T13:15:07.547

[这里](http://www.java2s.com/Tutorial/Java/0260__Swing-Event/DetectingDoubleandTripleClicks.htm)有一个教程

编辑：它会单独触发点击事件，所以你会得到：单击然后双击然后三次单击。所以你仍然需要做一些时间技巧。

代码是：

```
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.JFrame;
import javax.swing.JTextField;

public class Main {
  public static void main(String[] argv) throws Exception {

    JTextField component = new JTextField();
    component.addMouseListener(new MyMouseListener());
    JFrame f = new JFrame();

    f.add(component);
    f.setSize(300, 300);
    f.setVisible(true);

    component.addMouseListener(new MyMouseListener());
  }
}

class MyMouseListener extends MouseAdapter {
  public void mouseClicked(MouseEvent evt) {
    if (evt.getClickCount() == 3) {
      System.out.println("triple-click");
    } else if (evt.getClickCount() == 2) {
      System.out.println("double-click");
    }
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-16T09:37:00.870

这是我为实现这一目标所做的工作，这对我来说实际上效果很好。检测点击类型需要延迟。你可以选择它。如果可以在 400 毫秒内发生三次单击，则会出现以下延迟。您可以将其减小到无法连续单击的程度。如果您只是担心延迟，那么这是一个可以忽略不计的延迟，这对于执行此操作至关重要。

这里`flag`和`t1`是全局变量。

```
public void mouseClicked(MouseEvent e)
{
int count=e.getClickCount();
                    if(count==3)
                    {
                        flag=true;
                        System.out.println("Triple click");
                    }
                    else if(count==2)
                    {
                        try
                        {
                        t1=new Timer(1,new ActionListener(){
                            public void actionPerformed(ActionEvent ae)
                            {
                                if(!flag)
                                System.out.println("Double click");
                                flag=false;
                                t1.stop();
                            }
                        });
                        t1.setInitialDelay(400);
                        t1.start();
                        }catch(Exception ex){}
                    }
} 
```

# objective-c - 使用 WoWza 服务器的 RTSP 流式传输 iOS 6

> ID：14353519
> 
> 赞同：0
> 
> 时间：2013-01-16T07:46:38.970
> 
> 标签：objective-c, ios6

有人知道`RTSP`使用`WOWza`Server 进行流式传输吗？

我想在`MPMoviePlayer`控制器上播放它，`iOS6`但它显示没有足够的缓冲区来保持它。我的网络服务 url 工作正常，因为我也使用浏览器检查过它们，但我找不到任何关于`RTSP`流媒体的信息。

有没有人有任何关于使用服务器`RTSP`在 iPhone 上流式传输的教程？`WOWza`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:43:49.823

Wowza 支持将内容重新流式传输为 HLS，如果这是您的 wowza 服务器，那么 www.wowza.com 网站上有简单的说明，如果不是，他们可能正在流式传输 HLS。

如果您必须使用 rtsp，应用商店中有几个不错的播放器，或者您可以使用上述的 lib 555 或我们的开源或闭源框架之一构建自己的播放器。

[https://github.com/mooncatventures-group/AVDemoPlay2L](https://github.com/mooncatventures-group/AVDemoPlay2L)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:27:22.523

MPMoviePlayer 仅支持 HTTP 直播。要让 RTSP 在 iPhone 上运行，您必须在 iOS 上实现您的客户端。

有库 live555 可以为您实现，但您必须将它与代码集成。流的解码也必须由您或第三方库在软件中实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T07:51:36.773

rtsp 流无法在 iPhone、iPad 和 iPod touch 上进行。请参考以下链接。

[http://www.wowza.com/forums/content.php?62](http://www.wowza.com/forums/content.php?62)

# android - 如何获取合并联系人的照片？

> ID：14353520
> 
> 赞同：2
> 
> 时间：2013-01-16T07:46:46.300
> 
> 标签：android, facebook, contacts

我试图弄清楚如何获取合并联系人的照片，以显示在 QuickContactBadge 中。我一直在搜索和搜索，我可以在网上找到的所有内容都表明，如果联系人的默认图像来自 Facebook 同步，这是不可能的。然而，我发现的所有示例也都参考了 Froyo 或 Gingerbread。

在 ICS/JB 时代还没有办法做到这一点吗？

[这个答案](https://stackoverflow.com/questions/2383580/how-do-i-load-a-contact-photo)似乎是最有希望的，但评论似乎说它是命中或错过。我在网上找到的所有东西都不适合我。

这是我目前拥有的代码：

```
public static Uri getContactPhotoUri(long ContactId) {
    Uri person = ContentUris.withAppendedId(Contacts.CONTENT_URI, ContactId);
    Uri photo = Uri.withAppendedPath(person, Contacts.Photo.CONTENT_DIRECTORY);

    Cursor cur = App.ContentResolver().query(
        Data.CONTENT_URI,
        new String[] { Data._ID },
        ContactsContract.Data.CONTACT_ID
            + "="
            + ContactId
            + " AND "
            + Data.MIMETYPE
            + "='"
            + Photo.CONTENT_ITEM_TYPE
            + "'", null, Data.IS_PRIMARY + " DESC");
    Uri rv = null;
    rv = (cur == null || !cur.moveToFirst())? null: photo; 
    if (cur != null) cur.close();

    return rv;
} 
```

它为图像来自谷歌联系人的联系人正确显示图像。对于主要图片来自 Facebook 的联系人，
该图片***无法正确显示。***

无论图像来自何处，是否真的没有可靠的方法来获取联系人的默认图像*？*

**编辑**（2013 年 1 月 18 日）：我还尝试如下查询 PHOTO_URI 和 PHOTO_THUMBNAIL_URI，结果相同。

```
public static String[] GroupMembersProjection = new String[] {
    Contacts._ID,
    Contacts.LOOKUP_KEY, 
    Contacts.DISPLAY_NAME_PRIMARY,
    Contacts.PHOTO_THUMBNAIL_URI
};

public static Cursor getGroupMembers(int groupid, String sort) {
    String ord; 
    if (sort.equals("A")) { ord = Contacts.DISPLAY_NAME_PRIMARY; } 
    else { ord = Contacts.TIMES_CONTACTED + " DESC"; /* SORT = "U"; DEFAULT */ }

    ContentResolver cr = App.ContentResolver();
    Cursor contacts = cr.query(Data.CONTENT_URI, 
                GroupMembersProjection, 
                GroupMembership.GROUP_ROW_ID + "=" + groupid, null, ord);
    return contacts;
} 
```

此外，我尝试查询`PHOTO_ID`而不是 PHOTO_URI 字段，然后使用以下代码手动获取 URI 并将其用于图像，但这也会产生相同的结果，显示谷歌图像，但不显示 Facebook 图像。

```
Uri puri = ContentUris.withAppendedId(ContactsContract.Data.CONTENT_URI, photoid); 
```

# c# - 将字典添加到集合中 - 只是值？

> ID：14353521
> 
> 赞同：1
> 
> 时间：2013-01-16T07:46:49.170
> 
> 标签：c#, collections

我正在用 type 的下拉值填充组合框`WagonType`。我正在调用的函数返回一个字典，其中键是`WagonTypeID`，值是`WagonType`。

```
RepositoryItemComboBox comboWagonTypes;
Dictionary<int, WagonType> GetAllWagonTypes()
{
  ...
} 
```

如果我使用 AddRange 填充集合，它将只插入值还是同时插入键和值？

```
comboWagonTypes.Items.AddRange(GetAllWagonTypes()); 
```

还是我需要遍历字典并自己插入值？

```
foreach (var wagonType in GetAllWagonTypes())
   comboWagonTypes.Items.Add(wagonType.Value) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T07:49:20.010

您需要使用字典的[Values](http://msdn.microsoft.com/en-us/library/ekcfxy3x%28v=vs.100%29.aspx)属性。

做就是了

```
comboWagonTypes.Items.AddRange(GetAllWagonTypes().Values); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:51:42.730

只需使用[Values](http://msdn.microsoft.com/en-us/library/s620ab8x.aspx)属性。字典具有键和值作为属性。试试看！

# android - 使用 android 应用程序填充 google 电子表格的源代码

> ID：14353522
> 
> 赞同：0
> 
> 时间：2013-01-16T07:46:48.157
> 
> 标签：android, spreadsheet, google-docs-api

> **可能重复：**
> [使用 Android 提交到 Google 电子表格表单](https://stackoverflow.com/questions/6174962/using-android-to-submit-to-a-google-spreadsheet-form)

我是 Android 开发新手，正在为我们校园的图书租赁网站开发一个应用程序。我想在我的 Android 项目中开发一个活动，允许用户指定所需的详细信息，如姓名、地址等，以及他想租的书的名称。该服务的网络版本已经有一个谷歌文档表格可用。如何通过从我的应用程序中获取值并转发到该电子表格来填充该电子表格。我需要它的源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:40:26.657

这对我有帮助：[使用 Android 提交到 Google 电子表格表单](https://stackoverflow.com/questions/6174962/using-android-to-submit-to-a-google-spreadsheet-form)。我有 2 个可以将数据发送到 Google 表单的工作应用程序，所以如果您有后续问题，我可以提供帮助。

顺便说一句，我最初只是通过在 Google 上搜索“将数据发送到 google form android”找到了上面的链接。您可能知道，如果您学会寻找它们，就有很多关于各种主题的有用的现有问题和答案。

# android - 在联系人中添加 android.permission.CALL_PRIVILEGED 有错误

> ID：14353524
> 
> 赞同：1
> 
> 时间：2013-01-16T07:47:03.173
> 
> 标签：android, contacts

它在android4.0.4的联系人中有android.permission.CALL_PRIVILEGED。但它仍然有错误：

```
java.lang.SecurityException: Permission Denial: starting Intent { act=android.intent.action.CALL_PRIVILEGED dat=tel:xxx flg=0x10000000 cmp=com.android.phone/.PrivilegedOutgoingCallBroadcaster (has extras) } from ProcessRecord{41878ad0 3991:com.android.contacts/10000} (pid=3991, uid=10000) requires android.permission.CALL_PRIVILEGED？ 
```

我已经修改了联系人并重新打包和签名，然后安装 apk。当我拨打它有错误。

我还添加`<uses-permission android:name="android.permission.CALL_PHONE"/>`了 AndroiManifest.xml 应用程序。

这是相关代码：

```
public void dialButtonPressed() {
        if (isDigitsEmpty()) { // No number entered.
            if (phoneIsCdma() && phoneIsOffhook()) {
                // This is really CDMA specific. On GSM is it possible
                // to be off hook and wanted to add a 3rd party using
                // the redial feature.
                startActivity(newFlashIntent());
            } else {
                if (!TextUtils.isEmpty(mLastNumberDialed)) {
                    // Recall the last number dialed.
                    mDigits.setText(mLastNumberDialed);

                    // ...and move the cursor to the end of the digits string,
                    // so you'll be able to delete digits using the Delete
                    // button (just as if you had typed the number manually.)
                    //
                    // Note we use mDigits.getText().length() here, not
                    // mLastNumberDialed.length(), since the EditText widget now
                    // contains a *formatted* version of mLastNumberDialed (due to
                    // mTextWatcher) and its length may have changed.
                    mDigits.setSelection(mDigits.getText().length());
                } else {
                    // There's no "last number dialed" or the
                    // background query is still running. There's
                    // nothing useful for the Dial button to do in
                    // this case.  Note: with a soft dial button, this
                    // can never happens since the dial button is
                    // disabled under these conditons.
                    playTone(ToneGenerator.TONE_PROP_NACK);
                }
            }
        } else {
            final String number = mDigits.getText().toString();

            // "persist.radio.otaspdial" is a temporary hack needed for one carrier's automated
            // test equipment.
            // TODO: clean it up.
            if (number != null
                    && !TextUtils.isEmpty(mProhibitedPhoneNumberRegexp)
                    && number.matches(mProhibitedPhoneNumberRegexp)
                    && (SystemProperties.getInt("persist.radio.otaspdial", 0) != 1)) {
                Log.i(TAG, "The phone number is prohibited explicitly by a rule.");
                if (getActivity() != null) {
                    DialogFragment dialogFragment = ErrorDialogFragment.newInstance(
                                    R.string.dialog_phone_call_prohibited_title);
                    dialogFragment.show(getFragmentManager(), "phone_prohibited_dialog");
                }

                // Clear the digits just in case.
                mDigits.getText().clear();
            } else {
                final Intent intent = newDialNumberIntent(number);
                if (getActivity() instanceof DialtactsActivity) {
                    intent.putExtra(DialtactsActivity.EXTRA_CALL_ORIGIN,
                            DialtactsActivity.CALL_ORIGIN_DIALTACTS);
                }
                startActivity(intent);
                mDigits.getText().clear();  // TODO: Fix bug 1745781
                getActivity().finish();
            }
        }
    } 
```

谁知道原因？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:14:43.657

请从 /system/app 和 /data/app 删除你的 apk，然后使用 adb shell pm clear com.android.contacts 清理数据，最后使用 adb push 命令安装你的 apk。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-24T00:20:39.970

`android.permission.CALL_PRIVILEGED`不适用于 3rd 方开发人员。它由系统应用程序（如拨号程序）在内部使用。

如果您有一个 root 手机并且用户将您的应用程序安装为系统应用程序，这*将起作用。*

[请参阅此处](https://code.google.com/p/android/issues/detail?id=10344)了解更多信息

# java - Java 泛型接口和 Spring GetBean 按 Id 和 Class 类型

> ID：14353526
> 
> 赞同：2
> 
> 时间：2013-01-16T07:47:13.010
> 
> 标签：java, spring, generics

我有一个通用接口，我可以提供许多实现，对于每个这样的实现，我在 spring 定义文件中关联一个 id 属性。

```
IConfigurationService<T> 
```

现在我正在尝试编写一个实用方法，它可以通过 id 获取我的实现。

以下方法是一种实用方法，它会向我抛出警告消息：

```
public <T extends Serializable> IConfigurationService<T> getBean(Class<T> type, String id){
        return (IConfigurationService<T>)context.getBean(id, IConfigurationService.class);
    } 
```

警告消息：类型安全：从 IConfigurationService 到 IConfigurationService 的未经检查的强制转换。

如何摆脱此警告消息？

如果我按如下方式更改 return 语句，则会出现编译错误：

```
return (IConfigurationService<T>)context.getBean(id, IConfigurationService<T>.class); 
```

如果有人能确定我在这里做错了什么，我会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:57:36.190

除了压制它之外，您无法摆脱该警告。这是因为 Java 泛型中的运行时类型擦除。类文字`IConfigurationService.class`不提供任何通用类型信息。所以你得到一个`IConfigurationService<?>`从`context.getBean`. 您必须将其转换为适当的类型。

但是您可能会为此使用解决方法。当你声明

```
@Resource
private IConfigrationService<Foo> configService; 
```

在您的一个 spring 上下文管理类中，spring 将确保只注入`IConfigurationService`其类型参数与`Foo`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T08:35:53.930

所以你有一个接口，它有很多实现，对吧？为什么不对每个实现使用@Qualifier，并在使用@Resource 注入实现时使用限定符？

# xcode - Cordova XCode 项目构建错误

> ID：14353528
> 
> 赞同：0
> 
> 时间：2013-01-16T07:47:30.870
> 
> 标签：xcode, plugins, cordova

当我尝试在 XCode 中构建我的项目时，出现 ChildBrowser Plugin 和 PDF Viewer Plugins 的以下错误。有没有人有同样的想法？

![在此处输入图像描述](../Images/6927e8cc03c50be7151243dc00897d9d.png)

谢谢，安基特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:04:52.170

您是否按照插件说明进行操作？

childbrowser [https://github.com/phonegap/phonegap-plugins/tree/master/iOS/ChildBrowser](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/ChildBrowser)

pdf [https://github.com/phonegap/phonegap-plugins/tree/master/iOS/PDFViewer](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/PDFViewer)

# java - Google Recaptcha Gateway 超时异常

> ID：14353530
> 
> 赞同：0
> 
> 时间：2013-01-16T07:47:34.337
> 
> 标签：java, jboss, recaptcha

我在使用集成的 Google Recaptcha 时遇到问题，因为在提交请求时我收到“网关超时异常”。这主要是因为我们的应用程序服务器（Jboss 4.2）无法从 Google 服务器接收到有效响应。

Google 的 Recaptcha 声明“Google 不经常但偶尔”不断更改 IP 地址，并且与 Java 的 JVM 存在问题。为了解决这个问题，我们需要刷新 DNS 缓存。

Google 给出的一个建议是将 ttl 设置为 30 秒（这绝对是我们的应用程序服务器每 30 秒刷新一次 DNS 缓存的开销）或重新启动 JVM（作为生产服务器这是不可能的）。

如果有人能建议如何在不重新启动 JBoss 应用程序服务器或通过控制台手动清除 JVM DNS 缓存，将不胜感激。

# c# - 如何使用 VB.Net/C# 将图像从 SQL 数据库导出到特定文件夹？

> ID：14353531
> 
> 赞同：2
> 
> 时间：2013-01-16T07:47:36.537
> 
> 标签：c#, sql, vb.net, image, export

我有这个 SQL 数据库“Student”，我想将图像（全部或选定）从它的表“StudentPic”导出到具有“.jpg”扩展名的特定文件夹。

这是我的工作，但没有奏效。对此有何评论。？

```
Dim sql As String = " SELECT TOP 10 StudID,StudentPic FROM Student"
Dim cmd As SqlCommand = New SqlCommand(sql, conn)
conn.Open
Dim dr As SqlDataReader = cmd.ExecuteReader

While dr.Read
    Dim bytes() As Byte = CType(dr("StudentPic"),Byte())
    Dim memStream As MemoryStream = New MemoryStream(bytes)
    Try 
        Dim MyImage As Bitmap = New Bitmap(memStream)
        MyImage = New Bitmap(MyImage, 200, 250)
        MyImage.Save((dr("StudID") + ".jpg"), ImageFormat.Jpeg)
    Catch ex As Exception
        Throw ex
    End Try

End While 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:58:17.500

您可以通过查询从表中选择图像，然后使用 .net 图像函数将图像保存到磁盘。这不是太难，但正如已经提到的，期望在这里编写代码并不是一个好主意。我会在 .net 中深入研究它，如果您遇到困难，请在此处发布您的问题（附有详细信息）。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:17:13.083

您可以将图像检索到字节数组，然后使用 FileStream 写入文件。这是示例。

从数据库中检索图像是将图像保存到数据库的完全相反的过程。

```
SqlCommand cmd = new SqlCommand("select Pic from StudentPic where StudentID=@ID", 
                   new SqlConnection("conn stirng"));cmd.Parameters.AddWithValue("@ID",'id of a student');cmd.Connection.Open(); 
```

执行“ExecuteScalar”，因为我们只想要返回“IMAGE”列数据。

```
byte[] byteImg=(byte[])cmd.ExecuteScalar();cmd.Connection.Close(); 
```

将此数据保存到文件夹。

```
string strPath=Environment.GetFolderPath(Environment.SpecialFolder.Desktop) + "\\StudentPics\\"+"picName.jpg";
    FileStream fs=new FileStream(strFileTime,FileMode.CreateNew,FileAccess.Write);
    fs.Write(byteImg,0,byteImg.Length);fs.Flush();fs.Close(); 
```

希望对它有所帮助。

# sql-server-2008-r2 - 如何将 .pdf 文件内容放入 varbinary(max) 列

> ID：14353533
> 
> 赞同：6
> 
> 时间：2013-01-16T07:47:55.687
> 
> 标签：sql-server-2008-r2

我正在尝试将`.pdf`文件的内容放入 type 的列中`varbinary(max)`。

我怎样才能做到这一点？我玩过`convert`and `cast`，但它似乎不起作用。

我正在考虑定义`var1 varbinary(max)`并将其设置为文件的内容，但这也失败了。

```
declare @var1 varbinary(max)
set @var1 'c:\xxx\inp.pdf' ??? 
```

接着：

```
insert into t1(xdata) values ( @var1); 
```

或者也许我可以使用从文件中插入，不确定没有 BULK 是否可行？

感谢您的帮助，我也不能`.pdf`在单个 qoutes 中使用文件内容，它将其视为`varchar`-(

谢谢大家的帮助。戴

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T07:58:18.323

尝试这个：

```
DECLARE @pdf VARBINARY(MAX)

SELECT @pdf = BulkColumn
FROM OPENROWSET(BULK N'C:\Users\......\YourFile.pdf', SINGLE_BLOB) AS Document;

SELECT @pdf, DATALENGTH(@pdf)

INSERT INTO dbo.YourTable(PDFContents) VALUES(@Pdf)
GO 
```

或直接：

```
INSERT INTO dbo.t1(xdata) 
   SELECT BulkColumn
   FROM OPENROWSET(BULK N'C:\Users\......\YourFile.pdf', SINGLE_BLOB) 
```

`OPENROWSET`与往常一样，可以在[MSDN 的 SQL Server 联机丛书](http://msdn.microsoft.com/en-us/library/ms190312.aspx)中找到有关该函数的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:49:27.013

您需要使用将文档写入其中的[blob 列](http://msdn.microsoft.com/en-us/library/bb895234.aspx)

# jquery - 占位符和ie9

> ID：14353534
> 
> 赞同：0
> 
> 时间：2013-01-16T07:47:57.587
> 
> 标签：jquery, html, css, placeholder

为了在 IE 9 中显示占位符，我使用了以下脚本它工作正常，但在刷新后的某些页面中只有它的工作。

```
var _debug = false;
var _placeholderSupport = function() {
    var t = document.createElement("input");
    t.type = "text";
    return (typeof t.placeholder !== "undefined");
}();

window.onload = function() {
    var arrInputs = document.getElementsByTagName("input");
    for (var i = 0; i < arrInputs.length; i++) {
        var curInput = arrInputs[i];
        if (!curInput.type || curInput.type == "" || curInput.type == "text")
            HandlePlaceholder(curInput);
    }
};

function HandlePlaceholder(oTextbox) {
    if (!_placeholderSupport) {
        var curPlaceholder = oTextbox.getAttribute("placeholder");
        if (curPlaceholder && curPlaceholder.length > 0) {
            Debug("Placeholder found for input box '" + oTextbox.name + "': " + curPlaceholder);
            oTextbox.value = curPlaceholder;
            oTextbox.setAttribute("old_color", oTextbox.style.color);
            oTextbox.style.color = "$placeholder";
            oTextbox.onfocus = function() {
                Debug("input box '" + this.name + "' focus");
                this.style.color = this.getAttribute("old_color");
                if (this.value === curPlaceholder)
                    this.value = "";
            };
            oTextbox.onblur = function() {
                Debug("input box '" + this.name + "' blur");
                if (this.value === "") {
                    this.style.color = "$placeholder";
                    this.value = curPlaceholder;
                }
            };
        }
        else {
            Debug("input box '" + oTextbox.name + "' does not have placeholder attribute");
        }
    }
    else {
        Debug("browser has native support for placeholder");
    }
}

function Debug(msg) {
    if (typeof _debug !== "undefined" && _debug) {
        var oConsole = document.getElementById("Console");
        if (!oConsole) {
            oConsole = document.createElement("div");
            oConsole.id = "Console";
            document.body.appendChild(oConsole);
        }
        oConsole.innerHTML += msg + "<br />";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:31:57.473

我建议使用许多经过良好测试的占位符 polyfill 之一。HTML5 请对此也有一些好的建议：http: [//html5please.com/#placeholder](http://html5please.com/#placeholder)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:48:21.237

试试这个：

```
if ( !("placeholder" in document.createElement("input")) )
{
    $("input[placeholder]:not([type='password']), textarea[placeholder]").each(function()
    {
        var val = $(this).attr("placeholder");
        if ( this.value == "" )
        {
            this.value = val;
        }

        $(this)
            .focus(function()
            {
                if ( this.value == val )
                {
                    this.value = "";
                }
            })
            .blur(function()
            {
                if ( $.trim(this.value) == "" )
                {
                    this.value = val;
                }
            })
    });
}

$('form')
    .submit(function()
    {
        $(this).find("input[placeholder], textarea[placeholder]").each(function()
        {
            if ( this.value == $(this).attr("placeholder") )
            {
                this.value = "";
            }
        });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-04T15:14:12.910

```
/* <![CDATA[ */
$(function() {
var input = document.createElement("input");
if(('placeholder' in input)==false) { 
    $('[placeholder]').focus(function() {
        var i = $(this);
        if(i.val() == i.attr('placeholder')) {
            i.val('').removeClass('placeholder');
            if(i.hasClass('password')) {
                i.removeClass('password');
                this.type='password';
            }           
        }
    }).blur(function() {
        var i = $(this);    
        if(i.val() == '' || i.val() == i.attr('placeholder')) {
            if(this.type=='password') {
                i.addClass('password');
                this.type='text';
            }
            i.addClass('placeholder').val(i.attr('placeholder'));
        }
    }).blur().parents('form').submit(function() {
        $(this).find('[placeholder]').each(function() {
            var i = $(this);
            if(i.val() == i.attr('placeholder'))
                i.val('');
        })
    });
}
});
/* ]]> */ 
```

使用这个..它真的有效！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-10T18:48:31.683

试试这个：

$(文档).ready(函数(){

```
$('.ie9 input, .ie8 input').each(function(index){
    $(this).val($(this).attr('placeholder'));
});

$('.ie9 input, .ie8 input').focusin(function(){
    var val = $(this).val();
    var place = $(this).attr('placeholder');
    if(place == val){
        $(this).val('');
    }
});
$('.ie9 input, .ie8 input').focusout(function(){
    var val = $(this).val();
    if(val == ''){
        $(this).val($(this).attr('placeholder'));
    }   
}); 
```

});

# excel - Open Office calc 的公式或宏，用于从单元格中检索注释（注释）

> ID：14353535
> 
> 赞同：0
> 
> 时间：2013-01-16T07:48:09.317
> 
> 标签：excel, formula, openoffice.org, openoffice-calc

我需要从 oOcalc 工作簿中收集和整理数据。部分信息显示为单元格上的注释。

我想不出一个公式来做到这一点，而且我不熟悉 oOcalc DOM 来操作该项目。

希望有人可以帮助我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:54:09.523

只需要自己弄清楚这个，所以这里有一个宏，它将把一张表中单元格的注释复制到另一张表中的实际单元格中。它可能会更好，但它完成了工作，所以它不值得再投入（我的）时间了！

```
REM ****** BASIC *********

Sub ExtractCommentAnnotationThings

Dim myDoc as Object
Dim originalSheet as Object
Dim newSheet as Object
Dim originalCell as Object
Dim newCell as Object
Dim commentString As String

REM DEFINE VAR FOR OUR LOOP
Dim iTargetRow, iTargetColumn As Long

Const kEndRow = 950
Const kEndColumn = 20

REM SET DOC
myDoc = ThisComponent

REM GET SHEET
originalSheet = myDoc.Sheets(0)
newSheet = myDoc.Sheets(1)

REM START LOOP
For iTargetRow = 0 To kEndRow: DoEvents
For iTargetColumn = 0 To kEndColumn: DoEvents
    originalCell = originalSheet.getCellByPosition(iTargetColumn,iTargetRow)
    REM commentString = Trim(originalCell.Comment.Text)
    If originalCell.Annotation.isVisible = True Then

        commentString = originalCell.getAnnotation().String

        newCell = newSheet.getCellByPosition(iTargetColumn,iTargetRow)
        newCell.String = commentString
    End If      
Next
Next
REM CONTINUE LOOP

End Sub 
```

将`kEndRow`和设置`kEndColumn`为仅包含要复制的单元格范围。适当地设置`originalSheet`and `newSheet`（可能需要先创建一个新工作表），以便将它们复制到您希望它们所在的位置。

希望能帮助到你！

# nicedit - 如何将来自nicEdit的文本区域内容与数据库中的格式化文本一起存储

> ID：14353541
> 
> 赞同：1
> 
> 时间：2013-01-16T07:48:36.890
> 
> 标签：nicedit

我正在将 nicEdit 编辑器用于文本区域，其中可能包含文本、图像、链接和其他格式化文本。我不知道在 MySQL 数据库中使用什么数据类型来存储其内容。

如果还有其他方法可以处理这些东西，请提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:02:59.967

您可以尝试将数据保存在[`text`](http://dev.mysql.com/doc/refman/5.0/en/blob.html)列中。我认为在保存之前对数据进行编码是个好主意。例如，将其保存为 base64（如果您不必在内容中搜索），或者保存为 url 编码字符串。

如果图像上传到服务器，您还必须将图像保存在网络服务器上。几个选项是：

1.  使用`Blob`字段（二进制大对象）保存图像
2.  将图像直接转换为 base64 字符串以在 html 代码中使用。
3.  将图像保存在文件系统上，而不是数据库上

在我的测试中，选项 1 和 2 创建了大量数据。所以最好将图像保存在数据库之外。

希望这可以帮助。

# c++ - 在字符串中添加逗号

> ID：14353547
> 
> 赞同：10
> 
> 时间：2013-01-16T07:49:05.863
> 
> 标签：c++, qt

我想知道如何在 int 或 string 中设置 ',' 逗号？例如，我已经得到了这个：

```
QString::number(object->number()) 
```

这将显示在 UI 上。

数字类似于`123456789`，如何设置字符串的格式`123,456,789`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T08:03:07.317

[在http://doc.qt.io/qt-4.8/qlocale.html](http://doc.qt.io/qt-4.8/qlocale.html)查看 QLocale 上的文档：

```
QLocale(QLocale::English).toString(123456789); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T08:04:39.533

您正在调查[QLocale::toString(int)](http://qt-project.org/doc/qt-4.8/qlocale.html#toString)

```
int i = 123456789;
QLocale l = QLocale::system();
QString s = l.toString(i); 
```

笔记：

*   不要使用“逗号”，在每个语言环境（语言、国家）中这是不同的。有关更多示例，请参见[http://www.gnu.org/software/gettext/manual/gettext.html#Aspects](http://www.gnu.org/software/gettext/manual/gettext.html#Aspects)。
*   如果你使用[QString::number()](http://qt-project.org/doc/qt-4.8/qstring.html#number-2)你会得到一个本地依赖的表示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T08:05:07.777

是肯定的！试试这个：

```
QLocale locale(QLocale::English);
QString string = locale.toString(123456789.21345, 'f'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T07:59:16.650

也许：[http](http://www.qtcentre.org/threads/9822-Numbers-with-comma-format) : //www.qtcentre.org/threads/9822-Numbers-with-comma-format QString number = QLocale(QLocale::English).toString(123456789, 'f', 2); （我没有测试过）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-17T01:21:12.797

```
double n = 123456789.12345;
QString string = QLocale(QLocale::English).toString(n, 'f', 2); 
```

这对我有用。

# c++ - 朋友、抽象类和工厂模式

> ID：14353551
> 
> 赞同：2
> 
> 时间：2013-01-16T07:49:20.287
> 
> 标签：c++, inheritance, factory-pattern, friend

祝大家有美好的一天...

我正在我的公司从事一个复杂的项目，我在项目中使用了一些扭曲的工厂设计模式。省略细节；我有一些只能由“读者”创建的类（我称它们为“设备”）：

```
class DeviceBase // this is a virtual base class
{
  public:
   //some stuff
   friend class ReaderBase; // this is OK and necessary I guess?
  private:
   DeviceBase(); // cannot create a device directly
   //some more stuff
}

class Device1: public DeviceBase // some extended device
{
  public:
   //some stuff 
  private:
   //some more stuff
}

class Device2: public DeviceBase  // some other extended device
{
  public:
   //some stuff

  private:
   //some more stuff
} 
```

现在是“阅读器”，它恰好是设备的工厂：

```
class ReaderBase
{
  private:
    DeviceBase[] _devices; // to keep track of devices currently "latched"
  public:
    // some other methods, getters-setters etc ...

    // this method will create the "Devices" :
    virtual bool PollforDevice ( DeviceType, timeout) = 0; 

} 
```

现在，这是我的工厂课程；但它（如您所见）是纯虚拟的。我有特殊的读者继承自这个：

```
 class InternalReader: public ReaderBase
 {
   public:
     // define other inherited methods by specifics of this reader
     bool PollforDevice( DeviceType dt, timeout ms)
     {
         switch(dt)
         {
           case Device1: { /* create new device1 and attach to this reader */ } break;
           case Device2: { /* create new device2 and attach to this reader */ } break;
         }
         // show goes on and on...
     }
 }

 class ExternalReader: public Reader
 {
   public:
     // define other inherited methods by specifics of this reader
     bool PollforDevice( DeviceType dt, timeout ms)
     {
         switch(dt)
         {
           case Device1: { /* create new device1 and attach to this reader */ } break;
           case Device2: { /* create new device2 and attach to this reader */ } break;
         }
         // show goes on and on...
     }
 } 
```

我使用这种模式的原因是：我正在为一个可以同时连接多个“阅读器”的系统编写代码，并且我必须同时使用它们。

还有这些“设备”：我也可以公开他们的构造函数，大家都会开心；但我想确保它们不是由代码编写者自己创建的（以确保它的其他编码者）

现在的问题：

1.  我应该在每个“设备”中明确声明 ReaderBase 是朋友吗？或者仅仅在基础上声明“DeviceBase”就足够了？
2.  我应该明确放入从“ReaderBase”继承的“Readers”也是这些设备的朋友的每个“Device”，还是只放入 ReaderBase 就足够了？
3.  除了让整个“ReaderBase”类成为朋友之外，我可以（并且应该）让成员方法“PollforDevice”成为朋友吗？知道它是一个纯虚拟方法，那是否也会使继承的副本成为朋友？

很抱歉这个问题很长，但我只想说清楚。

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T10:04:17.370

为什么要关心纯抽象基类的可构造性`DeviceBase`呢？如果它是一个设计合理的契约或抽象基类，无论如何都不能构造它。除非您必须适应某种您未提及的框架，否则只需与隐藏相反，例如：

```
struct DeviceBase {
    virtual void Foo() = 0;
    virtual void Bar() = 0;
    virtual ~DeviceBase() = default;
}; 
```

顺便说一句，声明构造函数或析构函数`private`将非常有效地使您的类“密封”。如果由于某种原因`DeviceBase`不是抽象的（在我看来这是一个严重的设计缺陷），那么构造函数`protected`就不是`private`. 您需要打扰的是具体`Device`类的构造函数可访问性。假设您要“发布”这些实现类（即，您的库的用户可以访问它们的定义）并且您希望强调禁止直接构造，请使用“访问习语”（我为此发明的名称）：

```
namespace impl_detail {
    class DeviceAccess;
}

class ConcreteDevice1 : public DeviceBase {
    friend class impl_detail::DeviceAccess;
    // implementation of DeviceBase and all other stuff go 
    // into the "private" section
};

namespace impl_detail {
    class DeviceAccess {
        template< class TDevice >
        static DeviceBase* Create()
        {
            return new TDevice;
        }
    };
}; 
```

在您的`Reader`类中用于`impl_detail::DeviceAccess::Create`构造`Device`实例，例如：

```
// Your ExternalReader::PollForDevice...
switch (dt) {
    case Device1:
        return impl_detail::DeviceAccess::Create<ConcreteDevice1>();
    case Device2: 
        // etc...
} 
```

长话短说，最好的解决方案是根本不发布具体的实现类，其次是某种限制构建的“心理障碍”，例如上述那种......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T08:41:41.213

> 1.  我应该在每个“设备”中明确声明 ReaderBase 是朋友吗？或者仅仅在基础上声明“DeviceBase”就足够了？
> 2.  我应该明确放入从“ReaderBase”继承的“Readers”也是这些设备的朋友的每个“Device”，还是只放入 ReaderBase 就足够了？

由于友谊不是继承的（在友谊关系的任何一方），您的方案唯一可行的方法是在每个派生设备中声明每个派生阅读器的友谊。这会在 Reader 类和 Device 类之间产生紧密耦合，这不是一个好的设计。

> 3) 除了让整个“ReaderBase”类成为朋友之外，我可以（而且应该）让成员方法“PollforDevice”成为朋友吗？知道它是一个纯虚拟方法，那是否也会使继承的副本成为朋友？

您可以结交`ReaderX::PollforDevice`朋友而不是整个`ReaderX`班级，但这对您没有多大帮助，只会为难以解决循环依赖关系打开大门。

* * *

实际上，很难创建一种设计，其中层次 X 的类只能由层次 Y 的类创建，而不能由其他层次创建，而不会在两个层次中的类之间创建紧密耦合。我的方法是

1.  首先，教育你的同事，如果他们想要 a `DeviceX`，那么他们可以从 a 获得它，`ReaderY`并且没有其他方式。确保在代码审查中强制执行此操作。所有其他步骤只是损害控制。
2.  确保只有`BaseDevice`类暴露于 Reader 实现之外的代码。
3.  使所有设备类的*析构函数受到保护。*这确保了 Device 类只能由派生类或友元清理（并自动排除非友元的堆栈分配）。如果他们不小心尝试直接使用 Device 类，应该让他们三思而后行。
4.  `ReaderBase`交友`DeviceBase`并提供功能来对`ReaderBase`设备进行实际清理。这是确保*可以*清理设备所必需的。

# ruby-on-rails-3 - ActiveAdmin 中的文件下载链接

> ID：14353554
> 
> 赞同：3
> 
> 时间：2013-01-16T07:49:23.847
> 
> 标签：ruby-on-rails-3, file-upload, download, activeadmin

如何在 ActiveAdmin 中创建文件下载链接以下载上传的文件？

我试过这样的事情：

```
action_item :only=> :show do
 link_to('Download file', [@user, :upload_file])
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-29T03:01:51.407

将`action_item`在任务栏中建立按钮，但不会创建实际路由或控制器的操作方法。

您可以通过在中创建自定义 member_action 来实现下载功能`user.rb`

```
# In app/admin/users.rb
action_item only: [:show] do
  link_to('Download File', download_admin_user_path(resource)) if resource.upload_file.present?
end

member_action :download, method: :get do
  user = User.find(params[:id])
  send_file user.upload_file
end 
```

或者，我的偏好，只是利用 RESTful show 动作`upload_file.rb`

```
# In app/admin/users.rb
action_item only: [:show] do
  # NOTE: remove period from file extension
  file_ext = resource.upload_file.file_extension.gsub('.', '')
  link_to('Download File', download_admin_upload_file_path(resource.upload_file, format: file_ext)) if resource.upload_file.present?
end

# In app/admin/upload_files.rb
controller do    
  def show
    if params[:format] == 'txt' # example of a known mimetype, e.g. text file
      send_data resource.path, type: 'text/plain'
    elsif params[:format] == resource.file_extension # example of unknown mimetype
      send_file resource.path
    # let ActiveAdmin perform default behavior
    else
      super
    end
  end
end 
```

引用：[http ://activeadmin.info/docs/8-custom-actions.html](http://activeadmin.info/docs/8-custom-actions.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T08:10:59.713

我不知道您正在使用的完整代码，但这应该可以工作 -

**路线.rb** -

```
resources :users do
    collection do
      get :upload_file
    end
  end 
```

**控制器**-

```
 def upload_file
    send_file @user.upload_file.path, :type => 'application/pdf', :filename =>  @user.permalink
  end 
```

**查看**-

```
 <%= link_to 'Download file', upload_file_users_path(@user) %> 
```

# hibernate - 什么是休眠中的隔离？

> ID：14353556
> 
> 赞同：1
> 
> 时间：2013-01-16T07:49:26.827
> 
> 标签：hibernate, transaction-isolation

我不理解*隔离*的概念，在`hibernate`. 谁能解释一下，并提出一些可能的用例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:43:03.513

hibernate 中的隔离类似于数据库提供的事务隔离，即正在更新的数据对同时发生的其他事务可见的程度。每个数据库都提供默认的隔离设置。有[隔离级别](http://db.apache.org/derby/docs/10.1/devguide/cdevconcepts15366.html)。hibernate 让你可以为你的应用程序设置隔离级别。参考hibernate [-doc](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html#configuration-optional)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:45:18.963

以 MS Sql Server 为例，隔离级别描述了从表中读取的策略，即告诉服务器是否应该读取未提交的事务，只读取已提交的事务，快照 aso 设置因使用的 sql 类型而异。

[设置事务隔离级别 - MS SQL SERVER](http://msdn.microsoft.com/en-us/library/ms173763.aspx)

# c# - 防止在应用程序关闭时减少 COM 引用计数器

> ID：14353558
> 
> 赞同：0
> 
> 时间：2013-01-16T07:49:30.803
> 
> 标签：c#, com, reference, counter

我使用 VC# 为另一个应用程序（我们称之为“A”）创建了一个 UI 前端（称为“B”）。B是一个独立的EXE，必须（由于某些原因）由A调用。（DLL由于安全策略是不可能的。）

目前的流量是：

1.  启动 A（充当 COM 服务器）。
2.  让 A 使用 system() 调用执行 B。
3.  B 创建到 A 的 COM 连接。
4.  用户关闭 B
5.  A 也关闭了。<<<这就是问题！

所需的流程是：

...(5) A 不是封闭的。

据我发现，我认为导致不良行为的原因是 COM 引用计数器自动减少。因为 B 正在使用现有的 A 实例，所以计数器之前是 1，因此减少到 0，导致 A 完全关闭。（这是一个真正的问题，因为此时用户可能会丢失 A 中的数据。）

我已经尝试影响 GC 以保持 A 活着，但没有成功。

问题是：

**如何防止 A 关闭**，例如，通过避免引用计数器的递减？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:56:33.723

如果您可以访问 A 中的 com 对象，您可以对其执行[Marshal.AddRef](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.addref%28v=vs.100%29.aspx)以增加 ref 计数器，即声明 A 也在使用 COM 对象。

# r - 返回美学映射的函数

> ID：14353562
> 
> 赞同：1
> 
> 时间：2013-01-16T07:49:47.560
> 
> 标签：r, function, ggplot2

我想创建一个“就像”函数一样工作`ggplot2`的`aes()`函数。我卑微的尝试以“找不到对象”错误而失败：

```
library(ggplot2)

data <- data.frame(a=1:5, b=1:5)

# Works
ggplot(data) + geom_point() + aes(x=a, y=b)

my.aes <- function(x, y) { aes(x=x, y=y) }
# Fails with "Error in eval(expr, envir, enclos) : object 'x' not found"
ggplot(data) + geom_point() + my.aes(x=a, y=b) 
```

正确的实施方式是`my.aes()`什么？这是为了封装和代码重用。

也许这是相关的，我只是还没有看到如何： [如何编写一个 R 函数来评估数据框中的表达式](https://stackoverflow.com/q/4682709/946850)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T08:35:36.000

键入`aes`不带任何括号或参数以查看它在做什么：

```
function (x, y, ...) 
{
    aes <- structure(as.list(match.call()[-1]), class = "uneval")
    rename_aes(aes)
} 
```

它采用其参数的名称而不评估它们。它基本上是保存名称以供以后使用，因此它可以在您尝试绘制的数据框的上下文中评估它们（这就是您的错误消息抱怨的原因`eval`）。因此，当您包含`my.aes(x=a, y=b)`在您的`ggplot`构造中时，它正在寻找`x`in `data`--`x`因为没有在`aes(x=x, y=y)`.

思考正在发生的事情的另一种方式`aes`是

```
my.aes <- function(x, y) {
  ans <- list(x = substitute(x), y = substitute(y))
  class(ans) <- "uneval"
  ans
} 
```

这应该在上面的示例中有效，但请参阅中的注释`plyr::.`（使用与 相同的`match.call()[-1]`范例`aes`）：

> 类似的技巧可以用替代来执行，但是当函数可以以多种方式调用时，确保从正确的帧中提取值变得越来越棘手。替代技巧也使针对使用它们的函数进行编程变得困难，而引用类提供 as.quoted.character 以将字符串转换为适当的数据结构。

如果你想`my.aes`调用`aes`自己，也许是这样的：

```
my.aes <- function(x,y) {
    do.call(aes, as.list(match.call()[-1]))
} 
```

`aes_string`Roman Luštrik 指出的函数示例：

```
my.aes <- function(x,y) {
    aes_string(x = x, y = y)
} 
```

`my.aes("a", "b")`但在这种情况下，您需要将呼叫更改为。

# webdriver - 在 TestNG 中自定义故障报告

> ID：14353570
> 
> 赞同：3
> 
> 时间：2013-01-16T07:50:22.587
> 
> 标签：webdriver, automated-tests, testng, selenium-webdriver

**背景：**

我创建了一个基本的游乐场项目，其中包含：

1.  一个 testLogin.java 文件，其中包含
    ：testng 包导入 (org.testng.*)
    b. selenium webdriver 导入 (org.openqa.selenium.*)
    c. 5 种带有 testng 注释的测试方法：

> 1.  @Test(groups={"init"}) public void openURL()
>     包含 webdriver 代码以启动 webdriver 并打开具有给定 url 的 chrome >instance。
>     
>     
>     
> 2.  @Test(dependsOnGroups={"init"}) public void testLogin()
>     包含 webdriver 代码以：
>     1\. 找到用户名密码文本输入元素，从属性文件输入用户名密码。
>     2\. 找到“登录”按钮并单击按钮登录
>     3\. 如果其他人已经使用凭据登录，则管理强制登录方案。
>     
>     
>     
> 3.  @Test(dependsOnMethods={"testLogin"}) public void testPatientsScheduleList()
>     包含用于检查是否已安排任何患者的 webdriver 代码。如果是，则获取名称并在控制台中显示。
>     
>     
>     
> 4.  @Test() public void testLogout()
>     包含用于定位注销按钮并单击该按钮以注销应用程序的 webdriver 代码。
>     
>     
>     
> 5.  @AfterTest() public void closeConnection()
>     包含用于处理 webdriver 对象并关闭 chrome 实例的 webdriver 代码。

目前，我只是从 ANT 运行包装为 testng 方法的测试脚本，并生成一个 testng-xslt 报告。

**问题：**

**1.在测试方法中对webdriver脚本的每一行代码进行验证：**

我知道：
1\. Selenium webdriver 脚本包含 API 方法（findElement() 和其他。）由于它们执行的默认断言/验证而引发异常。当测试方法失败时，这些异常会显示在生成的报告中。
2\. TestNG 提供了 Assert 类，它有许多断言方法，但我还没有弄清楚如何使用它们对 webdriver 脚本的每一行代码执行验证/断言。我尝试在每一行 webdriver 脚本代码之后添加断言方法。输出中出现的只是测试方法的 AssertionError 异常。

**2.由于try..catch块而导致通过的某个测试方法失败。**
如果我在一组 2 个或更多测试驱动脚本步骤周围使用 try catch 块，并且如果测试用例在任何步骤（脚本行）中失败，则 try..catch 块会处理它，从而显示测试方法作为执行报告中的“通过”，实际上失败了。

**3\. 创建一个自定义报告，该报告将显示所需的测试执行结果，而不是堆栈跟踪！**
当我执行上述脚本时，会生成一个 testng-xslt 报告，其中包含测试套件（在 testng.xml 中配置）中每个测试方法的通过/失败状态。测试结果只告诉我测试方法是通过还是失败，并提供异常的堆栈跟踪，但实际上并没有提供任何有用的信息。我不想要这种抽象级别的测试执行结果，而是：

> 姓名 | 开始 | 持续时间 | 真正出了什么问题（失败）

**任何人都可以建议/给出一些关于：**
**1.**如何在测试方法中对webdriver脚本的每一行代码执行验证/断言而不在每个脚本行之后编写断言？
**2.**我怎样才能使某个由于 try catch 块而通过的测试方法失败？
**3.**如何自定义故障报告，以便我可以向 testng 的报告实用程序发送一个失败结果，如“预期元素”按钮，id 为“bnt12”，但在测试方法的第 3 步未找到该元素”？
**4.**在 testng-xslt 报告中，我想显示测试方法中发生故障的确切位置。因此，例如，如果我的测试方法因测试方法第 3 行的 webelement = driver.findElement() 而失败，我想在“What-really-went-wrong”的测试报告中显示此问题柱子。我已阅读有关 testng testlisteners TestListenerAdapter / ITestListener/ IReporter 的信息，但在检查 testng 的 javadocs 后我不明白如何使用它们。
**5.**另外，一旦我完成了自定义测试报告，我必须实现 PageObject 模式。在页面对象模式中执行断言的正确位置在哪里？断言应该写在页面对象测试方法中还是写在将使用 PageObject 类的更高级别的测试方法中？

PS：我对 testng 框架和 webdriver 脚本完全陌生。如果帖子中有任何技术错误或观察错误，请多多包涵。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-23T11:35:44.727

> 如何在测试方法中对 webdriver 脚本的每一行代码执行验证/断言，而不在每个脚本行之后编写断言？

我不这么认为。进行比较的是断言。所以你需要它。

> 由于 try catch 块而通过的某个测试方法如何失败？

try-catch 将掩盖断言失败。（因为在断言失败时，会抛出断言异常，所以如果你的 catch 块像 ( `catch(Exception e)`) 断言失败不会逃脱 catch 块。

> 如何自定义故障报告，以便我可以向 testng 的报告实用程序发送故障结果，例如“预期元素”按钮，ID 为“bnt12”，但在测试方法的第 3 步未找到该元素”？

您需要使用测试侦听器。TestNG TestListenerAdapter 是一个好的开始

> 此外，一旦我完成了自定义测试报告，我就必须实现 PageObject 模式。在页面对象模式中执行断言的正确位置在哪里？断言应该写在页面对象测试方法中还是写在将使用 PageObject 类的更高级别的测试方法中？

我个人的选择是在测试方法中使用断言，因为这是我们进行实际测试的地方。页面对象包含用于在网页内导航的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-23T09:32:15.027

> 如何自定义故障报告，以便我可以向 testng 的报告实用程序发送故障结果，例如“预期元素”按钮，ID 为“bnt12”，但在测试方法的第 3 步未找到该元素”？

您可以使用范围报告和 testng 侦听器类（在此类中使用`onTestFailure`方法来自定义您的失败报告）。

# java - Java Spring @Value 注解和参数

> ID：14353584
> 
> 赞同：1
> 
> 时间：2013-01-16T07:51:22.727
> 
> 标签：java, spring

所以，我有一个环境属性，它应该反映我的应用程序在什么环境中运行。

```
@Value("${environment}")
private String environmentName; //This will be set as sandbox, staging, production 
```

我还有一个功能标志（功能称为“superFeature.enable”），应根据应用程序部署的环境进行设置。

```
//Config file
superFeature.enable.sandbox=true
superFeature.enable.staging=false
superFeature.enable.production=false

//@Service annotated class containing call to configuration

@Value("${superFeature.enable.{environment}:false}")
private boolean isSuperFeatureEnabled; 
```

目前，当我在沙盒环境中运行我的应用程序时，`isSuperFeatureEnabled`总是错误的。我的语法对于上面的代码片段是否正确？有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:53:58.483

你不应该把

```
@Value("${superFeature.enable.{environmentName}:false}") 
```

那里？这只是一个猜测，恐怕。那里看起来很矛盾。但是，我不知道上面这两个语句是在哪个上下文和顺序中执行的，所以我不知道在哪里知道哪些变量。我建议先获取更多信息。例如，如果您将 {environment} 替换为您的环境的预期字符串会发生什么，您是否可以在此时获得代码中的环境值。我不知道是否有可能有这种双重间接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:37:12.907

它应该如下（环境也包含在以 $ 开头的占位符语法中）：

```
@Value("${superFeature.enable.${environment}:false}") 
```

# javascript - 有没有办法在 Angular 中延迟加载 CSS 文件？

> ID：14353587
> 
> 赞同：5
> 
> 时间：2013-01-16T07:51:35.287
> 
> 标签：javascript, css, angularjs

我正在使用 AngularJS。到目前为止，我已经通过在部分顶部链接它来加载特定于我的部分的 CSS：

```
<!-- File: some_partial.html -->
<link rel="stylesheet" href="link/to/some_partial.css" />
<!-- Rest of partial code here --> 
```

这感觉不对。CSS 没有链接到`<head>`（使其非标准），并且每隔一段时间，样式实际上并没有应用于部分。

在Angular中延迟加载CSS的正确方法是什么，推迟到实际需要部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:22:19.423

我是否可以建议引入一项服务来跟踪您的各种控制器的样式需求。它确实会有自己的小控制器`head`根据其他组件的请求将实际的 CSS 文件/路径输出到其中。该服务将被注入到其他组件中，以便这些组件可以调用方法来表达他们感兴趣的样式。表达他们感兴趣的样式可以根据实际的 CSS 文件/路径来完成，或者被抽象成一些东西比如“需要对表格、警报、自定义品牌等的支持”。

# android - 批量添加事件到谷歌日历

> ID：14353593
> 
> 赞同：0
> 
> 时间：2013-01-16T07:51:47.150
> 
> 标签：android, google-calendar-api, google-api-java-client, android-calendar

您好我正在尝试使用 google-api-java-client 和日历 API 服务为 android 应用程序添加事件到日历中。我使用 Yaniv Inbar 创建的 calendersample 项目作为模板，效果很好。将 1 个事件插入所选日历时效果很好，但是当我尝试将事件批量添加到日历时，会出现非法状态异常。

在示例中，您可以像这样批量添加日历。整个类可以在这里找到[AsyncBatchInsertCalendars.java](http://code.google.com/p/google-api-java-client/source/browse/calendar-android-sample/src/main/java/com/google/api/services/samples/calendar/android/AsyncBatchInsertCalendars.java?repo=samples)

```
@Override
protected void doInBackground() throws IOException {
   BatchRequest batch = client.batch();
   for (Calendar calendar : calendars) {
      client.calendars().insert(calendar).setFields(CalendarInfo.FIELDS)
      .queue(batch, new JsonBatchCallback<Calendar>() {
         public void onSuccess(Calendar calendar, GoogleHeaders headers) {
            model.add(calendar);
         }
         @Override
         public void onFailure(GoogleJsonError err, GoogleHeaders headers)
         throws IOException {
            Utils.logAndShowError(activity, CalendarSampleActivity.TAG, err.getMessage());
         }
      });
   }
   batch.execute();
} 
```

我重写了这门课，使它成为事件而不是日历。如果您查看整个类[AsyncBatchInsertEvent.java](http://pastebin.com/epKpvqz7)，您会发现在 doInBackground 方法中，我还循环遍历了一个创建事件列表的数组列表。应该将其添加到要插入给定日历的批次中。

```
@Override
protected void doInBackground() throws IOException {
   BatchRequest batch = client.batch();
   for (Event event : events) {
      client.events().insert(calender.id, event).queue(batch, 
      new JsonBatchCallback<Event>() {
         public void onSuccess(Event event, GoogleHeaders headers) {
            //TODO show succes message.
         }
         @Override
         public void onFailure(GoogleJsonError err, GoogleHeaders headers)
         throws IOException {
            Utils.logAndShowError(activity, EventActivity.TAG, err.getMessage());
         }
      });
   }
   batch.execute();
} 
```

如果我使用它，则会出现异常并且应用程序崩溃

```
W/dalvikvm(21030): threadid=20: thread exiting with 
uncaught exception (group=0x40c19930)
E/AndroidRuntime(21030): FATAL EXCEPTION: AsyncTask #2
E/AndroidRuntime(21030): java.lang.RuntimeException: An error occured 
while executing doInBackground() 
```

可以在 pastebin [log.txt](http://pastebin.com/YhDVxCdh)找到错误的完整堆栈跟踪。有谁知道如何解决这个问题或者我是否错误地实现了代码？整个代码可以在 pastbin [AsyncBatchInsertEvent.java中找到](http://pastebin.com/epKpvqz7)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:39:07.013

愚蠢的我，arraylist 事件是空的，因为我检查了 string == string 而不是 string.equels(string)。

# jetty - 审核 Jetty 客户端请求和响应

> ID：14353600
> 
> 赞同：0
> 
> 时间：2013-01-16T07:52:17.320
> 
> 标签：jetty

我需要计算码头事务并测量处理请求所需的时间，并使用 JMX 为我们的监控系统获取响应。

我正在使用 Jetty 8.1.7，但似乎找不到合适的方法来执行此操作。我基本上需要确定何时发送请求（由于 Jetty Async 方法，这是从线程 A 触发的）以及响应何时完成（因为 oncompleteResponse 在另一个线程中完成）。

我通常在需要类似功能的其他领域使用 ThreadLocal 来处理这种状态，但显然这在这里行不通。

任何想法如何克服？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:59:06.677

要使用码头的异步请求，您基本上必须继承 ContentExchange 并覆盖其方法。因此，您可以向其中添加一个额外的字段，该字段将包含发送请求的时间戳，并稍后在您的 onResponseComplete() 方法中使用它来测量处理时间。如果您需要知道请求实际发送到服务器的时间而不是创建时间，您可以覆盖 onRequestCommitted() 和 onRequestComplete() 方法。

# c++ - 使用相同的键加快对许多 std::maps 的访问

> ID：14353602
> 
> 赞同：0
> 
> 时间：2013-01-16T07:52:22.210
> 
> 标签：c++, performance, boost

假设你有一个`std::vector<std::map<std::string, T> >`. 你知道所有的`map`s 都有相同的键。它们可能已被初始化为

```
typedef std::map<std::string, int> MapType;
std::vector<MapType> v;
const int n = 1000000;
v.reserve(n);
for (int i=0;i<n;i++)
{
    std::map<std::string, int> m;
    m["abc"] = rand();
    m["efg"] = rand();
    m["hij"] = rand();
    v.push_back(m);
} 
```

给定一个键（例如`"efg"`），我想提取给定键的映射的所有值（它肯定存在于每个映射中）。

是否可以加快以下代码的速度？

```
std::vector<int> efgValues;
efgValues.reserve(v.size());
BOOST_FOREACH(MapType const& m, v)
{
    efgValues.push_back(m.find("efg")->second);
} 
```

请注意，这些值不一定`int`。由于分析确认大部分时间都花在了 find 函数上，我在考虑是否有一种（符合 GCC 和 MSVC 的 C++03）方法来避免再次根据每个地图的键在地图中定位元素，因为所有地图的结构都是相同的。

如果不是，是否有可能`boost::unordered_map`（使用上面的代码在我的机器上慢 15%）？是否可以缓存字符串的哈希值？

**PS：我知道有一个`std::map<std::string, std::vector<T> >`会解决我的问题。但是，我无法更改数据结构（这实际上比我在这里展示的更复杂）。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:07:34.557

您可以使用有状态比较器缓存和回放比较结果的序列。但这很讨厌；解决办法是调整数据结构。没有“不能”。实际上，添加有状态比较器正在改变数据结构。该要求几乎排除了任何事情。

另一种可能性是创建一个跨类型对象的链接列表，`T`这样您就可以从每个映射到下一个映射，而无需再次查找。如果您可能从任何地图开始（请重构结构），那么循环或双向链表就可以解决问题。

> 由于分析确认大部分时间都花在了查找功能上

保留树形数据结构并优化比较只能加快比较速度。除非时间花在 中`operator< (std::string const&, std::string const&)`，否则您需要更改它的链接方式。

# plugins - 如何通过 CRM 2011 应用程序注册插件步骤

> ID：14353607
> 
> 赞同：1
> 
> 时间：2013-01-16T07:53:13.527
> 
> 标签：plugins, dynamics-crm-2011

有没有办法通过 CRM 2011 应用程序注册插件步骤？我的意思是，我有一个实体。我希望这个实体的每条记录（在创建时）都注册一个插件步骤。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:47:10.857

不，您需要使用插件注册工具。

[使用 Microsoft Dynamics CRM 2011 和 Microsoft Dynamics CRM Online 的插件注册工具](http://msdn.microsoft.com/en-us/library/hh237515.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T18:57:40.270

在 CRM 2011 中，所有插件注册信息都存储在专用实体中

> 以编程方式注册插件
> 
> 用于注册插件和图像的关键实体类型有：PluginAssembly、PluginType、SdkMessageProcessingStep 和 SdkMessageProcessingStepImage。用于注册自定义工作流活动的关键实体类型是 PluginAssembly 和 PluginType 。将这些实体用于创建、更新、检索和删除操作。有关显示这些类的使用的示例代码，请参阅插件注册工具源代码。 [>>来源<<](http://msdn.microsoft.com/en-gb/library/gg309620.aspx)

您需要使用正确的注册信息创建新的 SdkMessageProcessingStep 记录（手动注册一个步骤以检查已将哪些信息插入到表中）

# windows-phone-7 - WP7-到达最后一项时如何扩展列表框

> ID：14353608
> 
> 赞同：2
> 
> 时间：2013-01-16T07:53:15.150
> 
> 标签：windows-phone-7, c#-4.0, wp7test

这个网页给出了关于如何在到达最后一个项目[链接时扩展列表框的想法](http://blogs.microsoft.co.il/blogs/shair/archive/2011/04/06/wp7-how-to-extend-listbox-when-reaching-last-item.aspx?CommentPosted=true#commentmessage)

但在我的情况下，枢轴中有 2 个或更多列表框。如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:52:30.400

如果您使用`LongListSelector`（[WP7 上的 Windows Phone Toolkit](http://phone.codeplex.com/)的一部分）而不是`Listbox`，无限滚动更容易实现......

[http://blogs.windows.com/windows_phone/b/wpdev/archive/2012/10/01/how-to-create-an-infinite-scrollable-list-with-longlistselector.aspx](http://blogs.windows.com/windows_phone/b/wpdev/archive/2012/10/01/how-to-create-an-infinite-scrollable-list-with-longlistselector.aspx)

# android - 从启动器中隐藏应用程序

> ID：14353609
> 
> 赞同：1
> 
> 时间：2013-01-16T07:53:18.437
> 
> 标签：android, android-launcher

我想制作一个应用程序，我们在其中显示安装在我手机中的所有应用程序的列表，并带有复选框。当用户检查任何应用程序时，该应用程序应显示在启动器上。否则应用程序应该对 Launcher 隐藏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T07:56:35.603

除非您也编写启动器应用程序，否则这是不可能的。其他启动器将简单地查看应用程序清单（使用包管理器）是否声明启动器意图。

如果启动器和设置都在同一个应用程序中，最好的解决方案是使用共享首选项文件：

```
Set<String> blacklistedApps;

//--add package names--
blacklistedApps.put("com.useless.uselessapp");

//--save as a preference--
SharedPreferences.Editor.putStringSet("blacklisted",blacklistedApps).commit();

//--read preference--
blacklistedApps = SharedPreferences.getStringSet("blacklisted",new Set<String>()); 
```

# c# - DBML 错误：无效的对象名称“dbo.SPNAME”

> ID：14353610
> 
> 赞同：0
> 
> 时间：2013-01-16T07:53:24.930
> 
> 标签：c#, asp.net, sql-server, linq-to-sql, stored-procedures

我正在使用 dbml 来管理数据库操作。

我已经使用并使用过 50 多个使用这个 dbml 的 sp，一切似乎都运行良好。

今天我在 dbml 文件中添加了一个新的 sp，当执行该 sp 时，我得到一个运行时错误，它说...

> SqlException 未被用户代码处理
> 
> 无效的对象名称“dbo.SPNAME”。

以下是我已验证的所有内容。

*   我在连接字符串中提到的 db 用户可以访问这个 sp。
*   已使用相同的凭据在 SQL Server Management Studio 中执行了 sp，并且 sp 可以正常工作。
*   我正在使用正确的“初始目录”和“数据源”。

可能是什么问题呢 ？有什么想法吗 ？

# c - 如何在C中将变量分配给rand（）？

> ID：14353611
> 
> 赞同：0
> 
> 时间：2013-01-16T07:53:26.153
> 
> 标签：c, srand

> **可能重复：**
> [生成范围内的随机数？](https://stackoverflow.com/questions/2999075/generate-a-random-number-within-range)

我正在尝试这样做，以便在执行代码时，我可以在命令提示符下键入最大数以重新定义最大数并在 0 和新的最大数之间生成一个新的随机数。

我做对了吗？

```
#include <stdlib.h>
#include <stdio.h>
#include <time.h>

int main()
{
    int randomnumber ;
    int max;
    srand( time(NULL) );
    scanf("Enter total number of students %d",&max);
    randomnumber=rand()% 30;
    printf("This is your random number\n %d",randomnumber);
    getchar();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:55:30.853

您已经使用`scanf`向用户发送消息，但您需要使用`printf`它。尝试：

```
printf("%s", "Enter total number of students: ");
scanf("%d",&max); 
```

然后，您可以将 更改`%30`为`%max`给用户一个介于 0 和 之间的数字`max - 1`。

```
randomnumber=rand()% max; 
```

正如评论者所说，使用模来减少范围`rand()`不会给你一个好的随机分布。另外，一定要检查max是否大于0，否则会报错。

如果您想知道为什么`max`此时会收到大量数据，那是因为您没有`max`显式初始化。对于 C 和 C++，这意味着其中可能存在垃圾数据。它不像 Java 或 C# 那样`int`自动初始化为 0。

# c# - 如果 Predicate 返回 true，Lambda 表达式返回什么

> ID：14353613
> 
> 赞同：3
> 
> 时间：2013-01-16T07:53:46.050
> 
> 标签：c#

`fruit`如果谓词条件为真，如果返回参数（我知道是输入参数），我会感到困惑。正如以下代码所示：

```
List<string> fruits = new List<string> {
    "apple",
    "passionfruit",
    "banana",
    "mango",
    "orange",
    "blueberry",
    "grape",
    "strawberry"
};

IEnumerable<string> query = fruits.Where(fruit => fruit.Length < 8);
// query contains: {apple,banana,mango,orange,grape}

IEnumerable<string> query2 = query.Where(fruit => fruits.Contains("apple"));

foreach (string fruity in query2)
{
    Console.WriteLine(fruity);
}

// finally returns: {apple,banana,mango,orange,grape} 
```

因此，如果条件为真，就好像返回了输入。

如果我错了，请指导我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T07:57:42.023

`Where`返回谓词返回的输入的过滤序列`true`。它依次应用于每个元素，并且该项目要么产生要么丢弃。基本上：

```
public static IEnumerable<T>(this IEnumerable<T> source, Func<T,bool> predicate)
{
    foreach(var el in source) {
        if(predicate(el) {
            yield return el;
        }
    }
} 
```

看名字：

```
IEnumerable<string> query2 = query.Where(fruit => fruits.Contains("apple")); 
```

也就是说，对于 every `fruit`，看看**整个集合**（`fruits`，注意 final `s`）是否返回一个苹果。该列表`fruits` *确实*包含`apple`，因此对于每种水果都是如此。

你可能的意思是：

```
IEnumerable<string> query2 = query.Where(fruit => fruit.Contains("apple")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T07:58:36.580

LINQ Where 返回一个 IEnumerably 集合，其中包含谓词为其返回 true 的所有项目。

在您正在执行的第二个查询`fruits.Contains("apple")`中，这基本上总是正确的，或者总是错误的。也许您打算执行以下操作：

```
IEnumerable<string> query2 = query.Where(fruit => fruit == "apple");
//returns: {apple} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T10:58:31.910

您可以将 .Where lambda 视为 SQL 查询：

```
SELECT * FROM IEnumerable WHERE Predicate = TRUE; 
```

对我来说，由于 SQL 背景，这是更可取的方式:)

# java - 使用超类静态方法获取子类的实例

> ID：14353620
> 
> 赞同：3
> 
> 时间：2013-01-16T07:54:17.627
> 
> 标签：java, subclass, static-methods, superclass

我有一个超类，我想将一个静态方法转发`getInstance()`给所有子类。

在创建子类的实例时，我会在超类中注册该实例（可能使用哈希表，其中键基于`getClass()`）。然后，我希望使用前面提到的静态方法 ( `getInstance`)，其中超类方法将返回正确类型的实例。

比如我有一个超类A，一个子类B扩展了A。我想写一个静态方法`A.getInstance()`；当从 B ( `B.getInstance()`) 调用时，我希望它返回我之前存储的 B 实例。

这有点难以解释，但我会经常使用这个超类，而且我宁愿不在`getInstance`每个子类中编写一个方法。

我将如何去做这样的事情？

编辑：我刚刚意识到我的问题可能被误解为创建对象的新实例。我已经创建了实例，我希望获取该类的现有实例

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T08:06:01.270

正如许多其他人在评论中指出的那样，静态方法无法实现您尝试做的事情。此外，您应该尽可能避免使用静态方法，因为它们可能导致测试和维护的噩梦 (*)。

您将方法命名为“getInstance”，所以我*想*您想要做的是工厂模式和单例模式的混合。以下是一些帮助您开始了解这些模式的信息：

单例：[http](http://en.wikipedia.org/wiki/Singleton_pattern)
://en.wikipedia.org/wiki/Singleton_pattern 工厂方法：[http](http://en.wikipedia.org/wiki/Factory_method_pattern)
://en.wikipedia.org/wiki/Factory_method_pattern 抽象工厂：[http ://en.wikipedia.org/wiki/Abstract_factory](http://en.wikipedia.org/wiki/Abstract_factory)

现在两者都不应该手动编码 (*) - 看看像 Google Guice 或 Spring 这样的优秀“依赖注入”(DI) 容器。我不是 100% 确定您到底想要实现什么，但看起来 DI 容器会为您完成。

**编辑：**这是对问题编辑的回应。您想要接收子类的缓存实例。在这种情况下，我仍然建议不要使用静态方法。您可以创建“BCache”类的单例实例（使用 DI 容器或手动编程），然后使用此缓存对象查找已注册的对象。使用 Guice 作为 DI 容器，它可能看起来像这样（警告，未经测试）：

```
@Singleton
public class BCache {
    private Map<Class<? extends B>, B> cache = ...;

    public <T> T getInstance(Class<? extends T> type) {
        return (T) cache.get(type);
    }
} 
```

不过，我仍然认为可以使用 DI 容器完全摆脱缓存类。同样，这是未经测试的代码，使用 Guice，但它可能看起来像这样：

```
@Singleton
public class A extends B {
    public A() {
        //I am not sure if you need to register in this case, because your
        //DI container keeps track of the singleton instances.
        super.register(this);
    }
}

public class SomeClassUsingA {
    @Inject private A a;
} 
```

(*) 请注意“所有的概括都是错误的”，也就是说，在某些项目中它可能有意义，但在大多数情况下它不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T08:11:07.840

您无法以良好的 OOP 方式使用静态方法完全按照您的意愿行事。您可以使用反射或一堆`if .. else if`.

但是，您应该使用一些定义明确的设计模式，例如[Abstract fectory](http://en.wikipedia.org/wiki/Abstract_factory_pattern)或[Factory method](http://en.wikipedia.org/wiki/Factory_method_pattern)。这是你应该走的路，就像有人说“不要发明温水”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T08:18:48.007

您始终可以将 subClass 实例分配给 superClass 引用。因此，您的超类的静态方法可以设置或获取子类实例。但请确保在使用前转换返回的实例。

```
public class A {
    private static A a;

    /**
     * @param a the a to set
     */
    public static void setA(A a) {
        A.a = a;
    }

    /**
     * @return the a
     */
    public static A getA() {
        return a;
    }

public class B extends A {
    private int index = 0;

    /**
     * @param index the index to set
     */
    public void setIndex(int index) {
        this.index = index;
    }

    /**
     * @return the index
     */
    public int getIndex() {
        return index;
    } 
```

用法：

```
public static void main(String[] args) throws Exception {
        B b = new B();
        A.setA(b);

    B c = (B) A.getA();
    System.out.println(c.getIndex());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T08:08:16.480

静态方法不知道使用哪个类来调用它们。例如，如果您有扩展 A 并在其中`static getInstance()`实现的A 和 B 类，那么无论您调用using还是`A`没有区别。此外，尝试调用会产生编译警告（至少在 Eclipse 中）。`getInstance()``A``B``B.getIntance()`

但是，您可以将类作为参数传递`getInstance()`：

```
public class A {
    public static <T extends A> T getInstance(Class<T> clazz) {
        return clazz.newInstance(); // I do not catch exceptions here: do it yourself
    }
}

public class B extends A {
}

...............
B b = A.getInstance(B.class); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T08:04:58.847

`getInstance()`在超类中更改形式`getInstance(String class)` ：

```
public static A getInstance(String class){
if(class.equals("A")){
RegisterObject(...);//User defined method
return new A(...);
}
else if(class.equals("B")){
RegisterObject(...);//User defined method
return  new B(...);
}
else if(class.equals("C")){
RegisterObject(...);//User defined method
return  new C(...);
}
//... and so on

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T08:13:34.633

你可以这样做，

```
 class A{
     public static A getInstance(){
     return new A();
   }

  @Override
  public String toString() {
   return "inside A";
   }
 }

 class B extends A{
public static A getInstance(){
  return new B();
 }

   @Override
   public String toString() {
      return "inside B";
   }
 } 
```

内部主要：

```
 public static void main(String[] args) {
  A a1 = A.getInstance();
  A a2 = B.getInstance();
      System.out.println(a1.toString());
  System.out.println(a2.toString());
   } 
```

# css - 如何在多列中浮动div？没有“左、中、右”的 div 标签

> ID：14353625
> 
> 赞同：0
> 
> 时间：2013-01-16T07:54:37.313
> 
> 标签：css, css-float

我需要在这样的多个列中列出组。

![在此处输入图像描述](../Images/9f10b6c7ff20855e50e5fe9db5e58a5e.png)

我试过了，但它似乎不适用于`float: left;`.

我的结果是这样的。

![在此处输入图像描述](../Images/e791cdb7bcd4737f0fef7464ab757385.png)

问题是，我不能指定`div`like `left`or `right`, or `center`。

因为组列表是从数据库中检索的。所以列表大小不同，列号也不同。

这是我的测试源。

```
<style>
#box {
    height: 200px;
    width: 230px;
    background-color: yellow;
}

.group span {
    font-weight: bold; 
}

.group {
    float: left;
    width: 65px;
    margin-right: 10px;
    margin-bottom: 10px;
    background-color: green;
}
</style>

<div id="box">

    <div class="group">
        <span>group 1</span>
        <li>item1</li>
        <li>item2</li>
        <li>item3</li>
    </div>

    <div class="group">
        <span>group 2</span>
        <li>item3</li>
    </div>

    <div class="group">
        <span>group 3</span>
        <li>item1</li>
        <li>item2</li>
        <li>item3</li>
        <li>item2</li>
        <li>item3</li>
    </div>

    <div class="group">
        <span>group 4</span>
        <li>item10</li>
    </div>

    <div class="group">
        <span>group 5</span>
        <li>item30</li>
    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:59:14.693

这是一个简单的列布局：

```
column-count:3; 
```

但是，只有 IE10 单独支持。对于 Firefox 和 Chrome：

```
-moz-column-count:3;
-webkit-column-count:3; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:08:27.503

我认为它可以帮助你 [http://jsfiddle.net/qyQLu/](http://jsfiddle.net/qyQLu/)

HTML 代码

```
<div id="box">
    <div class="newclass">
        <div class="group">
            <span>group 1</span>
            <li>item1</li>
            <li>item2</li>
            <li>item3</li>
        </div>

        <div class="group">
            <span>group 2</span>
            <li>item3</li>
        </div>
      </div>
      <div class ="newclass">
        <div class="group">
            <span>group 3</span>
            <li>item1</li>
            <li>item2</li>
            <li>item3</li>
            <li>item2</li>
            <li>item3</li>
        </div>
      </div>
      <div class="newclass">
        <div class="group">
            <span>group 4</span>
            <li>item10</li>
        </div>

        <div class="group">
            <span>group 5</span>
            <li>item30</li>
        </div>
      </div>
    </div> 
```

CSS 代码

```
#box {
    height: 200px;
    width: 230px;
    background-color: yellow;
}
.newclass
{
  width:65px;
  float:left;
  padding-left:5px;
}

.group span {
    font-weight: bold; 
}

.group {
    float: left;
    width: 65px;
    margin-right: 10px;
    margin-bottom: 10px;
    background-color: green;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T08:24:54.540

我想到的唯一解决方案是为所有块使用不同的类并使用`clear: both;`，如果元素的位置偏移你需要使用边距，否则你可以放弃浮动并使用位置

# php - 如何在分层导航中显示*所有*过滤器？

> ID：14353628
> 
> 赞同：0
> 
> 时间：2013-01-16T07:54:49.607
> 
> 标签：php, magento, magento-1.7, mage, layered-navigation

我正在使用 magento connect 的“分层导航 SEO”。它工作完美。

但我希望始终显示过滤器（带有结果）。我的要求与此处发现的其他问题不同。

例如...

在计算机类别中（使用示例数据）有 4 个品牌和三种颜色（黑色、棕色和银色）我选择“Apple”作为品牌可用的颜色将是银色，但我想像以前一样显示所有 3 种颜色（记住......不是所有的颜色，如粉红色、洋红色等）如果我选择过滤器（无结果），所有颜色（如白色、洋红色、粉红色等）都会显示，这是我不想要的

我只想要最初与类别相关的过滤器。我是 magento 编码的新手

有什么帮助吗？

如果需要更清晰，我将能够提供...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T11:51:23.907

在 app\code\local\Catalin\SEO\Model\Catalog\Resource\Layer\Filter\Attribute.php

编辑公共函数 getCount($filter)

转到最后一行

更改返回 $connection->fetchPairs($select); 到...

```
$pairCarry = $connection->fetchPairs($select);
$pairCarryfin = $this->checkTheAttributes($pairCarry, $tableAlias, $attribute); 
 return $pairCarryfin; 
```

然后在它下面添加函数...

```
public function checkTheAttributes($pairCarry, $tableAlias, $attribute){
    $category = Mage::registry('current_category');
    if($category){
        $query = "SELECT DISTINCT `$tableAlias`.`value`, COUNT($tableAlias.entity_id) AS `count` FROM `catalog_product_entity` AS `e`
         INNER JOIN `catalog_category_product_index` AS `cat_index` ON cat_index.product_id=e.entity_id AND cat_index.store_id=".$category->getStoreId()." AND cat_index.visibility IN(2, 4) AND cat_index.category_id='".$category->getId()."'
         INNER JOIN `catalog_product_index_price` AS `price_index` ON price_index.entity_id = e.entity_id AND price_index.website_id = '1' AND price_index.customer_group_id = 0
         INNER JOIN `catalog_product_index_eav` AS `$tableAlias` ON $tableAlias.entity_id = e.entity_id AND $tableAlias.attribute_id = '".$attribute->getAttributeId()."' AND $tableAlias.store_id = '".$category->getStoreId()."' GROUP BY `$tableAlias`.`value`";
    }
    else{
        $query = "SELECT DISTINCT `$tableAlias`.`value`, COUNT($tableAlias.entity_id) AS `count` FROM `catalog_product_entity` AS `e`
         INNER JOIN `catalog_category_product_index` AS `cat_index` ON cat_index.product_id=e.entity_id AND cat_index.store_id=1 AND cat_index.visibility IN(2, 4)
         INNER JOIN `catalog_product_index_price` AS `price_index` ON price_index.entity_id = e.entity_id AND price_index.website_id = '1' AND price_index.customer_group_id = 0
         INNER JOIN `catalog_product_index_eav` AS `$tableAlias` ON $tableAlias.entity_id = e.entity_id AND $tableAlias.attribute_id = '".$attribute->getAttributeId()."' AND $tableAlias.store_id = 1 GROUP BY `$tableAlias`.`value`";
    }
    $connection = $this->_getReadAdapter();
    $pairCarry_inter = $connection->fetchPairs($query);

    if(!empty($pairCarry)){
        $odd = array_diff_key($pairCarry_inter, $pairCarry);
        if(!empty($odd)){
            foreach($odd as $k=>$v){
                $odd[$k] = 0;
            }
        $pairCarry_inter = $pairCarry + $odd;
        }
    }

    else{
        foreach($pairCarry_inter as $k => $v){
            $pairCarry_inter[$k] = 0;
        }
    }

    $pairCarry_complete = $pairCarry_inter;

    return $pairCarry_complete;
} 
```

# node.js - 如何正确设置 socket.io 端口？获取 socket.io.js 404

> ID：14353638
> 
> 赞同：2
> 
> 时间：2013-01-16T07:55:40.577
> 
> 标签：node.js, socket.io

根据文档，我有以下设置：

客户端：

```
<script src="/socket.io/socket.io.js"></script>
var socket = io.connect(); // TIP: .connect with no args does auto-discovery 
```

服务器端：

```
var express = require('express'),
    routes = require('./routes'),
    user = require('./routes/user'),
    http = require('http'),
    path = require('path');
    app = express(),
    server = http.createServer(app).listen(80),
    io = require('socket.io').listen(server);

app.configure(function(){
    app.set('port', process.env.PORT || 3000);
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.use(express.logger('dev'));
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(app.router);
    app.use(express.static(path.join(__dirname, 'public')));
});

app.get('/', routes.index);
app.get('/users', user.list);

http.createServer(app).listen(app.get('port'), function(){
    console.log("Express server listening on port " + app.get('port'));
}); 
```

为什么我越来越

```
GET http://localhost:5000/socket.io/socket.io.js 404 (Not Found) 
```

我尝试切换到`server = http.createServer(app).listen(process.env.PORT || 3000),`bu，然后得到`warn: error raised: Error: listen EACCES`相同的 404。关于端口使用情况，我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T08:11:11.863

如果没有特殊权限，您无法在端口 80 上创建服务器。在另一个旁注中，您正在尝试创建 2 个服务器（一个在端口 80 上，另一个在端口 3000 上）。

这是我在项目中使用的（一部分）：

```
var express = require('express')
  , app = express()
  , server = require('http').createServer(app)
  , sio = require('socket.io').listen(server)

app.configure(function(){
    app.set('port', process.env.PORT || 3000);
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.use(express.logger('dev'));
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(app.router);
    app.use(express.static(path.join(__dirname, 'public')));
});

// configure your socket.io instance here

server.listen(app.get('port'), function() {
  // server started
}); 
```

# mysql - 从story.uid等于uid或story.uid等于friend.uid或friend.fid并接受的故事中选择项目

> ID：14353647
> 
> 赞同：1
> 
> 时间：2013-01-16T07:56:18.110
> 
> 标签：mysql, sql, join

如果满足条件，我如何才能仅获取特定记录？

我有代码

```
"SELECT a.id, a.text, a.uid, a.time 
FROM story a INNER JOIN friends b 
         ON ((a.uid = '" . $uid . "') OR 
             (b.uid = '" . $uid . "' AND accepted='1')  OR 
             (b.fid = '" . $uid . "' AND accepted='1')) 
ORDER BY a.time DESC 
LIMIT 3"; 
```

它工作正常，只是当`friends`表为空时，它不会显示`story`记录。

**我想要实现的是**

*   如果表格**故事中的***uid*等于*登录的uid*（用户），则显示表格**故事中的***文本*（意味着这是他自己的故事）

*******   如果table **story中的***uid*等于table **friends中的***uid*并且它的友谊被*接受，***或者**如果table **story中的***uid*等于table **friends中的***fid*并且它的友谊被*接受*然后显示table **story中的***文本*（意味着故事来自一个朋友，只有在接受友谊时才会显示）

    **********   如果*根本没有友谊*，就从桌面**故事中展示***自己的*故事而忽略其他人*************** 

 ********* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:09:51.137

我认为您没有使用正确的连接格式。它应该是：

```
 SELECT field_name 
    FROM table1 t1 
    INNER JOIN table2 t2 
    ON t1.id = t2.some_id 
    WHERE.. 
```

您可以在[此处](http://www.w3schools.com/sql/sql_join_inner.asp)查看基础知识。

在您的情况下，您应该编写如下查询：

```
 "SELECT a.id, a.text, a.uid, a.time 
    FROM story a INNER JOIN friends b 
    ON a.id = b.some_id WHERE ((a.uid = '" . $uid . "') OR
    (b.uid = '" . $uid . "' AND accepted='1')  OR 
    (b.fid = '" . $uid . "' AND accepted='1')) 
    ORDER BY a.time DESC 
    LIMIT 3"; 
```

我认为这会有所帮助。********

# android - 无法在可展开的列表视图中输入edittext

> ID：14353651
> 
> 赞同：4
> 
> 时间：2013-01-16T07:56:32.430
> 
> 标签：android, expandablelistview, android-edittext

我正在使用包含 2 个不同子项的可扩展 ListView。子布局包含 3 个 EditText 字段。当我展开组时，它会显示子布局，但我无法在 edittext 字段中键入任何文本。

我在自定义可扩展列表适配器中的代码如下：

```
public View getChildView(int groupPosition, int childPosition, boolean arg2, View childView,
        ViewGroup parent) 
{
    switch (groupPosition)
    {
    case 0:
        childView = inflater.inflate(R.layout.edit_personal_layout, null);
        final EditText fname = (EditText)childView.findViewById(R.id.editTextFname);
        fname.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) 
            {
                // TODO Auto-generated method stub
                fname.setFocusable(true);
            }
        });

        break;
    case 1:
        childView = inflater.inflate(R.layout.edit_experience_layout, null);
        break;
    case 2:
        childView = inflater.inflate(R.layout.edit_qualification_layout, null);
        break;
    case 3:
        childView = inflater.inflate(R.layout.edit_login_layout, null);
        break;
    case 4:
        childView = inflater.inflate(R.layout.edit_other_layout, null);
        break;
    }

    return childView;
}

public View getGroupView(int position, boolean arg1, View view, ViewGroup parent) 
{
    if(view==null)
    {
        view = inflater.inflate(R.layout.edit_head, null);

    }
    TextView head = (TextView)view.findViewById(R.id.list_item_text_view_head);
    head.setText(menu[position]);
    return view;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T08:28:40.543

1）可能是你`editText`没有得到焦点，这就是你不能输入任何东西的原因。尝试在文件中播放以下行`xml-layout`。

```
 android:descendantFocusability="blocksDescendants" 
```

有关将焦点赋予子元素的更多信息，您可以参考此[链接](http://developer.android.com/reference/android/view/ViewGroup.html#attr_android:descendantFocusability)。

2）如果上述解决方案不起作用，那么您可以尝试在列表视图中添加。

```
<ListView
    android:id="@android:id/list" 
    android:layout_height="fill_parent" 
    android:layout_width="fill_parent"
    android:descendantFocusability="beforeDescendants"
    /> 
```

并更改 mainfest.xml 中的活动：

```
<activity android:name= ".yourActivity" android:windowSoftInputMode="adjustPan"/> 
```

3）如果仍然无法正常工作，请查看此[链接（focusable-edittext-inside-listview）](https://stackoverflow.com/questions/2679948/focusable-edittext-inside-listview/2680077#2680077)和此[链接](https://stackoverflow.com/questions/6862081/edittexts-inside-expandablelistview/9947623#9947623)。

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-01T03:03:49.323

[这是一个类似的答案](https://stackoverflow.com/questions/22746082/cannot-type-edittext-in-expandablelistview-child) “adjustPan”是存储客户输入的关键。另一种聚焦方式：

```
<TextView
     android:id="@+id/e_text_label"...>
    <requestFocus /> </TextView> 
```

# sharepoint - 如何在 SharePoint 中为系统帐户添加电子邮件地址

> ID：14353654
> 
> 赞同：0
> 
> 时间：2013-01-16T07:56:34.147
> 
> 标签：sharepoint, sharepoint-workflow

我正在处理工作流程并尝试发送电子邮件。

在工作流页面上，我收到一条错误消息：

`The e-mail message cannot be sent. Make sure the e-mail has a valid recipient.`

用户是系统帐户。所以我认为我需要设置系统帐户的电子邮件地址。

1.  有谁知道如何设置系统帐户的电子邮件地址？

2.  有没有人有更好的想法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:23:18.997

在系统帐户中添加电子邮件有两种可能性。

1.  如果您使用活动目录用户作为系统帐户登录 sharepoint，那么您必须在活动目录中提及他/她的电子邮件地址。

2.  如果您使用本地用户作为系统帐户，请按照以下步骤操作。

单击系统帐户的下拉菜单->单击我的设置->单击编辑项目并使用有效的电子邮件地址更新它。

让我知道结果。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:53:37.970

尝试这个

在您的服务器中移动到以下位置

开始 --> 管理工具 --> Active Directory 用户和计算机

在那里您可以找到用户列表。您也可以在那里找到管理员。现在右键单击管理员并选择属性并添加您的电子邮件

# java - 如何在流式传输多媒体以支持 ajax 功能时在运行时获取 src

> ID：14353663
> 
> 赞同：0
> 
> 时间：2013-01-16T07:56:54.363
> 
> 标签：java, javascript, html, ajax, struts2

我正在使用 struts 2 开发 Gallery 模块。为了在浏览器上显示图像/音频/视频文件，我使用了 ajax，这将减少服务器负载。对于页面加载时的 ajax 调用，我只需获取 src 位置并将其设置在对象标记（IE）或嵌入标记（其他浏览器）上。此过程要求文件在服务器范围内。现在问题出在重新部署war文件时，所有上传的文件都被删除了。当文件位于服务器（EAP JBOSS）目录之外时，如何使用 ajax 显示音频/视频文件？

# c++ - /SUBSYSTEM 参数的意义 - msdn

> ID：14353668
> 
> 赞同：1
> 
> 时间：2013-01-16T07:57:05.550
> 
> 标签：c++, c, windows, sdk, operating-system

根据链接 [http://msdn.microsoft.com/en-us/library/fcc1zstk(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/fcc1zstk(v=vs.100).aspx)

32 位应用程序假设使用 4.00（最低），64 位应用程序假设使用 5.02（最低）

但是我想从该链接中了解此参数和以下语句的意义/含义。

“子系统的选择会影响链接器将选择的入口点符号（或入口点函数）。”</p>

假

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T08:16:57.817

简单地说：如果您正在编写一个需要指定的控制台应用程序，`/SUBSYSTEM:CONSOLE`并且如果您正在编写一个不会自动打开控制台窗口的窗口应用程序，则需要`/SUBSYSTEM:WINDOWS`. 其他子系统指定您的应用程序在内核模式下运行（但这并不简单），直接与硬件接口或在 Windows CE 设备上运行。

很少需要指定版本。

链接器创建的可执行文件仅根据此选项设置一个标志，负责启动应用程序的 Windows 函数检查此标志以确定如何启动应用程序（附加控制台窗口等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:03:59.073

在你的程序中，你有`main`，`_tmain`等等`WinMain`。这是你的程序开始的。然而，这不是程序启动的*真正*入口点，它只是一个从链接到程序的运行时调用的函数。在运行时，通常有一个特殊的函数在调用主函数之前进行一些初始化，这是文档中引用的“入口点”。

子系统设置似乎告诉链接器根据其设置使用不同的“入口点”功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T22:40:33.153

子系统参数的主要意义是确定可执行文件将为哪个子系统构建；无论是控制台应用程序、Windows 应用程序、POSIX 应用程序、设备驱动程序等等。

根据文档，版本号指定可执行文件所需的最低操作系统（或子系统）版本。例如，如果您指定 6.0 (Windows Vista)，那么理论上，Windows XP 将拒绝尝试运行可执行文件。我不确定这是否真的是真的，而且我认为以这种方式指定最低操作系统版本不是常见的做法。

对切​​入点的影响描述有点草率；更准确地说，子系统的选择会影响*默认*入口点。您可以使用参数覆盖此默认值[`/ENTRY`](http://msdn.microsoft.com/en-us/library/f9t8842e%28v=vs.100%29.aspx)。

如下`/ENTRY`所述，默认设置如下：

*   `/SUBSYSTEM:CONSOLE`: mainCRTStartup (或 wmainCRTStartup)
*   `/SUBSYSTEM:WINDOWS`: WinMainCRTStartup (或 wWinMainCRTStartup)
*   `/DLL`: _DllMainCRTStartup

它还说：“如果未指定 /DLL 或 /SUBSYSTEM 选项，则链接器会根据定义 main 或 WinMain 来选择子系统和入口点。”

IIRC，其他子系统没有默认入口点，您必须明确使用该`/ENTRY`选项。

# java - 在启动时处理 mongodb 连接问题

> ID：14353672
> 
> 赞同：8
> 
> 时间：2013-01-16T07:57:33.703
> 
> 标签：java, spring, mongodb, startup, autowired

我已经使用 Spring 集成了 MongoDB，我的数据服务有一个自动装配的 mongo 存储库，并且一切正常。除非数据库在启动期间关闭。

当服务启动时 mongo 关闭时，初始化期间会抛出异常，在这种情况下整个服务无法启动。这显然不是我想要的。

我想要发生的是捕获异常并启动服务，并优雅地处理数据库可用性问题（比如显示一个页面，说我们有临时问题，使用缓存等等）

我的存储库类：

```
public interface MediaDataRepository extends MongoRepository<MediaData, String> {
...
} 
```

我的服务等级：

```
@Service
public class MediaDataService {
    @Autowired
    private MediaDataRepository mediaDataRepository;
...
} 
```

和控制器：

```
@Controller
@RequestMapping("/api/consumer")
public class MediaController extends HtmlGenerationController {
    private static final Logger LOG = LoggerFactory.getLogger(MediaController.class);

    @Autowired
    private MediaDataService mediaDataService;
...
} 
```

我在启动过程中遇到的错误：

```
2013-01-15 17:50:09.163:WARN:oejw.WebAppContext:Failed startup of context o.m.j.p.JettyWebAppContext{/,file:/code/src/main/webapp/},file:/code/src/main/webapp/
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mediaController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.myservice.service.MediaDataService com.myservice.controller.MediaController.mediaDataService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mediaDataService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.myservice.repository.MediaDataRepository com.myservice.service.MediaDataService.mediaDataRepository; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mediaDataRepository': FactoryBean threw exception on object creation; nested exception is com.mongodb.MongoException$Network: can't call something : /127.0.0.1:27017/myservice_db
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:764)
    at org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:406)
    at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:756)
    at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:242)
    at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1221)
    at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:699)
    at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:454)
    at org.mortbay.jetty.plugin.JettyWebAppContext.doStart(JettyWebAppContext.java:256)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:224)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:167)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:224)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:90)
    at org.eclipse.jetty.server.Server.doStart(Server.java:263)
    at org.mortbay.jetty.plugin.JettyServer.doStart(JettyServer.java:65)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:511)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:364)
    at org.mortbay.jetty.plugin.JettyRunMojo.execute(JettyRunMojo.java:516)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: 
org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.myservice.service.MediaDataService com.myservice.controller.MediaController.mediaDataService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mediaDataService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.myservice.repository.MediaDataRepository com.myservice.service.MediaDataService.mediaDataRepository; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mediaDataRepository': FactoryBean threw exception on object creation; nested exception is com.mongodb.MongoException$Network: can't call something : /127.0.0.1:27017/myservice_db
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
[CLIPPED TO ALLOW QUESTION SIZE]
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: 
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mediaDataService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.myservice.repository.MediaDataRepository com.myservice.service.MediaDataService.mediaDataRepository; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mediaDataRepository': FactoryBean threw exception on object creation; nested exception is com.mongodb.MongoException$Network: can't call something : /127.0.0.1:27017/myservice_db
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
[CLIPPED TO ALLOW QUESTION SIZE]
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: 
org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.myservice.repository.MediaDataRepository com.myservice.service.MediaDataService.mediaDataRepository; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mediaDataRepository': FactoryBean threw exception on object creation; nested exception is com.mongodb.MongoException$Network: can't call something : /127.0.0.1:27017/myservice_db
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
[CLIPPED TO ALLOW QUESTION SIZE]
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: 
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mediaDataRepository': FactoryBean threw exception on object creation; nested exception is com.mongodb.MongoException$Network: can't call something : /127.0.0.1:27017/myservice_db
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:149)
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:102)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1441)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:305)
[CLIPPED TO ALLOW QUESTION SIZE]
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: 
com.mongodb.MongoException$Network: can't call something : /127.0.0.1:27017/myservice_db
    at com.mongodb.DBTCPConnector.call(DBTCPConnector.java:227)
    at com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:305)
    at com.mongodb.DBCollection.findOne(DBCollection.java:647)
    at com.mongodb.DBCollection.findOne(DBCollection.java:626)
    at com.mongodb.DBApiLayer$MyCollection.createIndex(DBApiLayer.java:364)
    at com.mongodb.DBCollection.createIndex(DBCollection.java:436)
    at com.mongodb.DBCollection.ensureIndex(DBCollection.java:515)
    at org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator.ensureIndex(MongoPersistentEntityIndexCreator.java:172)
    at org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator$1.doWithPersistentProperty(MongoPersistentEntityIndexCreator.java:130)
[CLIPPED TO ALLOW QUESTION SIZE]
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: 
java.io.IOException: couldn't connect to [/127.0.0.1:27017] bc:java.net.ConnectException: Connection refused
    at com.mongodb.DBPort._open(DBPort.java:228)
    at com.mongodb.DBPort.go(DBPort.java:112)
    at com.mongodb.DBPort.call(DBPort.java:79)
    at com.mongodb.DBTCPConnector.call(DBTCPConnector.java:218)
    at com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:305)
    at com.mongodb.DBCollection.findOne(DBCollection.java:647)
    at com.mongodb.DBCollection.findOne(DBCollection.java:626)
    at com.mongodb.DBApiLayer$MyCollection.createIndex(DBApiLayer.java:364)
    at com.mongodb.DBCollection.createIndex(DBCollection.java:436)
    at com.mongodb.DBCollection.ensureIndex(DBCollection.java:515)
    at org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator.ensureIndex(MongoPersistentEntityIndexCreator.java:172)
    at org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator$1.doWithPersistentProperty(MongoPersistentEntityIndexCreator.java:130)
    at org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator$1.doWithPersistentProperty(MongoPersistentEntityIndexCreator.java:112)
    at org.springframework.data.mapping.model.BasicPersistentEntity.doWithProperties(BasicPersistentEntity.java:173)
    at org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator.checkForIndexes(MongoPersistentEntityIndexCreator.java:112)
    at org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator.onApplicationEvent(MongoPersistentEntityIndexCreator.java:85)
    at org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator.onApplicationEvent(MongoPersistentEntityIndexCreator.java:48)
    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:97)
    at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:324)
    at org.springframework.data.mapping.context.AbstractMappingContext.addPersistentEntity(AbstractMappingContext.java:263)
    at org.springframework.data.mapping.context.AbstractMappingContext$PersistentPropertyCreator.doWith(AbstractMappingContext.java:364)
    at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:570)
    at org.springframework.data.mapping.context.AbstractMappingContext.addPersistentEntity(AbstractMappingContext.java:247)
    at org.springframework.data.mapping.context.AbstractMappingContext.getPersistentEntity(AbstractMappingContext.java:165)
    at org.springframework.data.mapping.context.AbstractMappingContext.getPersistentEntity(AbstractMappingContext.java:140)
    at org.springframework.data.mapping.context.AbstractMappingContext.getPersistentEntity(AbstractMappingContext.java:65)
    at org.springframework.data.mongodb.repository.support.DefaultEntityInformationCreator.getEntityInformation(DefaultEntityInformationCreator.java:59)
    at org.springframework.data.mongodb.repository.support.DefaultEntityInformationCreator.getEntityInformation(DefaultEntityInformationCreator.java:48)
    at org.springframework.data.mongodb.repository.support.MongoRepositoryFactory.getEntityInformation(MongoRepositoryFactory.java:140)
    at org.springframework.data.mongodb.repository.support.MongoRepositoryFactory.getTargetRepository(MongoRepositoryFactory.java:84)
    at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:131)
    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.getObject(RepositoryFactoryBeanSupport.java:114)
    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.getObject(RepositoryFactoryBeanSupport.java:38)
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:142)
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:102)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1441)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:305)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:764)
    at org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:406)
    at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:756)
    at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:242)
    at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1221)
    at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:699)
    at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:454)
    at org.mortbay.jetty.plugin.JettyWebAppContext.doStart(JettyWebAppContext.java:256)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:224)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:167)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:224)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:90)
    at org.eclipse.jetty.server.Server.doStart(Server.java:263)
    at org.mortbay.jetty.plugin.JettyServer.doStart(JettyServer.java:65)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:511)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:364)
    at org.mortbay.jetty.plugin.JettyRunMojo.execute(JettyRunMojo.java:516)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:48:37.187

在我的搜索中，我发现没有让 Spring 直接处理这个问题的好方法。您可能需要在您的服务和存储库之间放置一个代理。这里有一个帖子：[即使数据库关闭，如何让应用服务器启动？](https://stackoverflow.com/questions/10244618/how-to-make-app-server-to-start-even-if-database-is-down)接近这个问题。

对你来说，这可能意味着拥有一个 Spring 创建的 bean (RepositoryProxy)。这个 bean 将尝试手动创建 Mongo 连接，或者从应用程序上下文的惰​​性 bean 中获取存储库。如果 Mongo 连接失败，它会捕获异常并为缓存数据或错误响应创建连接/对象。它还可以创建一个计时器进程来重新连接到 Mongo 实例。

# c++ - 字符数组中的 null 是否会阻止内存被删除？

> ID：14353679
> 
> 赞同：1
> 
> 时间：2013-01-16T07:58:00.377
> 
> 标签：c++

有内存泄漏吗？

```
 const char * pname = "NAME";
    char * temp = new char[strlen(Name) + 64];
    sprintf(temp,"%s", pname);

    delete [] temp; // is there any memory leaks because now length of temp is 4. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T07:59:46.027

删除（修改）字符串文字（`pname`）是未定义的行为。另外`new/delete`,`new []/delete[]`只能成对使用。

`std::string`如果可以，建议使用，让我们`std::string`为您管理内存分配/释放。

```
 std::string pname("NAME");
  std::string temp(pname);
  std::cout << pname << std::endl; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T08:00:31.317

不，无论 temp 的尾随 0 是分配的内存在哪里，它仍然是初始内存，`strlen(Name) + 64`因此删除释放了正确的整个内存块。

正如@billz 指出的那样，您不应该释放 pname。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T08:06:06.057

不，不会有任何内存泄漏。`sprintf`只会使用`temp`它需要的字节，但是，最初创建的所有字节都将保持分配状态（即使有些未使用）。

然后调用`delete[] temp`将释放*所有*最初分配的字节。

正如其他人指出的那样，不要免费`pname`。您应该只在分别用和创建的指针上调用`delete`和。`delete[]``new``new[]`

**附加信息：**

创建时`temp`，`new[]`在内存中分配了一个连续字节数组，外加一个额外的（小）空间，用于存储有关分配的信息（例如，分配的大小）。当您调用`delete[]`它时，它检查了该信息并发现`strlen(Name)+64`已分配字节，因此它知道必须释放所有字节。您只使用了分配空间的一小部分这一事实并没有什么不同。

# ember.js - 未捕获的类型错误：无法调用未定义的方法“地图”

> ID：14353689
> 
> 赞同：1
> 
> 时间：2013-01-16T07:58:58.723
> 
> 标签：ember.js, sprockets, ember-rails

我正在使用 ember-rails master 并创建了一个 ember bootstrap 项目。一切都是空的，并且在创建时保持原样，但我遇到了提到的类型错误。进入路由器时。命名空间是已知的，但路由器不是。有人见过这个吗？

为了完整起见，我将通过以下内容：

```
Basis.ApplicationController = Ember.Controller.extend({

});

Basis.ApplicationRoute = Ember.Route.extend({

}); 
```

基础.js：

```
//= require ./store
//= require_tree ./models
//= require_tree ./controllers
//= require_tree ./views
//= require_tree ./helpers
//= require_tree ./templates
//= require ./router
//= require_tree ./routes
//= require_self

Basis.Router.map(function(match) {

});

Basis.Store = DS.Store.extend({
  revision: 11
}); 
```

application.handlebars：

# 应用

```
<p>Your content here.</p>

{{outlet}} 
```

应用程序.js

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require handlebars
//= require ember
//= require ember-data
//= require_self
//= require basis
Basis = Ember.Application.create();
//= require_tree . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T03:56:16.487

或者，您可以从 github 上的 master 捆绑 ember-rails：

```
gem 'ember-rails', github: 'emberjs/ember-rails' 
```

然后`bundle install`。确保您没有任何本地供应的 Handlbars、ember.js 或 ember-data 版本。

现在 ember-rails master 位于 ember.js 1.0.0-pre4。

如果您想在 master 上跟踪 ember.js 和 ember-data，您也可以对 vendor 执行此操作（以不与 ember-rails 冲突的方式）它们：

```
bundle exec rails g ember:install --head 
```

这会将它们安装在 vendor/assets/ember。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:19:52.943

如果您使用的是[Ember-Rails](https://github.com/emberjs/ember-rails)的 master 的最新版本，那么问题是 ember 的供应商文件已过期。Ember-Rails 中的 Ember.js 位于`v1.0.pre-279-gb1c0b4c`，而 Ember-Data 位于`4`。为了在您的代码中使用当前文档，您需要更新 Ember.js 和 Ember-Data 的版本。

您可以在此处找到更新的 EmberJS 文件：[EmberJS v1.0.0-pre.2-396-gddb0951](https://raw.github.com/seankeating/ember-js-example/master/vendor/scripts/ember-latest.js) 和 Ember-Data：[Ember-Data v11](https://raw.github.com/seankeating/ember-js-example/master/vendor/scripts/ember-data-latest.js)。只需重命名它们以匹配您现在所拥有的。

您可以在此处查看包含更新后的 Ember 文件的代码：http: [//jsfiddle.net/seankeating/ZRN23/7/](http://jsfiddle.net/seankeating/ZRN23/7/)

# c# - 如何清除 Windows Phone 7 上地图上的所有图钉？

> ID：14353694
> 
> 赞同：1
> 
> 时间：2013-01-16T07:59:16.157
> 
> 标签：c#, windows-phone-7, maps, pushpin

我想清除`Pushpin`地图上的所有a。我可以用`map.Children.Clear()`，很好用。但我使用`google maps`并使用此 XAML 代码：

```
<my:Map Height="756" HorizontalAlignment="Left" Margin="12,6,0,0" Name="googlemap"
                   CredentialsProvider="AqayajnZU8FSfDGL8jpK5zMKAHmUL27Uqxv_OnpQzJQOI2PoQyxcG7dlR6_g4WWo" 
                   CopyrightVisibility="Collapsed" LogoVisibility="Collapsed" 
                   ScaleVisibility="Visible"  VerticalAlignment="Top" Width="438" >
                <my:Map.Mode>
                    <MSPCMCore:MercatorMode/>
                </my:Map.Mode>
                <my:MapTileLayer Name="street" Margin="0,0,0,32" Height="800" Width="433">
                    <my:MapTileLayer.TileSources>
                        <GoogleTileSource:GoogleTile TileTypes="Street"/>
                    </my:MapTileLayer.TileSources>
                </my:MapTileLayer>
            </my:Map> 
```

所以，当我打电话时`map.Children.Clear()`也`MapTileLayer`删除了。我如何才能删除 only `Pushpin`？

有任何想法吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:17:08.107

遍历所有子元素并仅删除 Pushpin 类型的子元素

```
foreach (var item in googlemap.Children.ToList())
{
    if (item is MapTileLayer) continue;
    googlemap.Children.Remove(item);
 } 
```

# c - osx下二进制文件的文件格式

> ID：14353696
> 
> 赞同：1
> 
> 时间：2013-01-16T07:59:17.983
> 
> 标签：c, macos, mach-o

我试图`mach header`阅读`osx 10.7.4`. 在许多情况下，标题魔术字段不等于`MH_MAGIC`所以我猜这些二进制文件使用不同的格式？所以问题是MAC osx下的可执行文件使用什么文件格式？

```
 int main(int argc, char** argv) {
    char* path = getenv("PATH");
    char* token = strtok(path, ":");
    char filename[260];
    DIR* pdir = NULL;
    dirent* pentry = NULL;
    FILE* fin = NULL;
    mach_header header;
    // loop through each directory set in path
    while(token) {
       // try to open directory
       pdir = opendir(token);
       if(pdir) {
         // read entry from directory
         while((pentry = readdir(pdir))) {
            // check so it's a regular file
            if(pentry->d_type == DT_REG) {
               sprintf(filename, "%s/%s", token, pentry->d_name);
               // try to open file and read mach header
               fin = fopen(filename, "r");
               if(fin) { 
                  fread(&header, sizeof(header), 1, fin);   
                  if(header.magic == MH_MAGIC) {    
                     printf("%s has a mach-o header\n", filename);
                  }
                  fclose(fin);
               }
            }
         }
         closedir(pdir);
       }
       token = strtok(NULL, ":");
    }
    return 0;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:06:47.590

除了 Mach-O 二进制文件本身之外，还有包含用于支持通用二进制文件的多种架构的*胖二进制文件。*它们有不同的幻数。据我所知，以下幻数目前在 Mach-O 中使用（来自我自己的代码）：

```
const uint8_t magic1[4] = { 0xce, 0xfa, 0xed, 0xfe };   // 32-bit
const uint8_t magic2[4] = { 0xca, 0xfe, 0xba, 0xbe };   // Universal
const uint8_t magic3[4] = { 0xcf, 0xfa, 0xed, 0xfe };   // 64-bit 
```

# android - 异步任务计时器

> ID：14353702
> 
> 赞同：0
> 
> 时间：2013-01-16T07:59:56.297
> 
> 标签：android, timer, android-asynctask

我有一个使用 AsyncTask 调用 Web 服务并解析 xml 的应用程序，我想知道它开始的那一刻和结束的那一刻之间的持续时间，我这样做但是每次 var difftime 都是 0；

```
 @Override
protected void onPreExecute(){
    super.onPreExecute();
    completed=false;
    time = System.currentTimeMillis();
}
 protected Boolean doInBackground(Integer... params) {
  //code 
 }

  protected void onPostExecute(Boolean result) {
    super.onPostExecute(result);
        difftime = System.currentTimeMillis() - time;
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T08:22:10.900

您的代码应该可以工作。我按以下方式执行了您的代码，它可以工作：

```
private class TestTask extends AsyncTask<Integer, Void, Boolean> {
    private long time;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        time = System.currentTimeMillis();
    }

    @Override
    protected Boolean doInBackground(Integer... params) {
        try {
            Thread.sleep(2000);
        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onPostExecute(Boolean result) {
        super.onPostExecute(result);
        Log.d("TestTask", "difftime = "
                + (System.currentTimeMillis() - time));
    }
} 
```

检查 AsyncTask 的签名：

```
extends AsyncTask<Integer, Void, Boolean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:10:10.583

试试这个：

```
long time;
long difftime;

@Override
protected void onPreExecute(){
    super.onPreExecute();
    completed=false;
    time = Calendar.getInstance().getTimeInMillis();
}

@Override
protected Boolean doInBackground(Integer... params) {
  //code 
}

@Override
protected void onPostExecute(Boolean result) {
    super.onPostExecute(result);
    difftime = Calendar.getInstance().getTimeInMillis() - time;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T08:25:00.453

尝试 System.nanoTime() 代替。这就是您在 Android 中获得高分辨率计时器的方式。

在某些平台上，此 API 调用存在一些臭名昭著的陷阱。例如，在 Windows 上，您不能跨不同线程使用 System.nanoTime() 结果。我认为，同样的问题可能适用于任何运行 Android 的多核 x86 处理器。

如果您只是将其用于基准测试，那可能是一个合理的选择。如果您期望它在 2300 种不同的 Android 设备上始终如一地运行，那可能是一个非常糟糕的主意。甚至 uptimeMillis() 在一些主流的 Android 2.x 电源管理设备上也有非常奇怪的行为（例如以四分之一速度运行）。我自己见过。

我不得不承认，我很好奇该 API 在准确度、精确度和最小增量方面在 Android 设备上的运行情况如何。我真的不知道。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-16T08:08:22.263

我认为您需要在 doInBackground() 中获取 system.currentTimeMillis。

像这样：

```
 @Override
protected void onPreExecute(){
    super.onPreExecute();
    completed=false;
}
 protected Boolean doInBackground(Integer... params) {
      final long START_TIME = System.currentTimeMillis();
      // Code 
 }

  protected void onPostExecute(Boolean result) {
    super.onPostExecute(result);
        final long DIFF_TIME = System.currentTimeMillis() - START_TIME;
  } 
```

还要确保您将时间声明为 longs。它们很长。:)

希望有帮助。

# .net - NHibernate LINQ 解决方案来计算 SUM

> ID：14353708
> 
> 赞同：1
> 
> 时间：2013-01-16T08:00:14.927
> 
> 标签：.net, sql, linq, nhibernate

我正在为 SQL Server 2012使用 NHibernate`3.3.1.4000`和 FluentNHibernate`1.3.0.733`

我有下一节课：

```
class Foo {
    public virtual bool Enabled;
    public virtual IList<Bar> Children;
}

class Bar {
    public virtual Foo Parent;
} 
```

并想要计算`Bar`已启用`Foo`项目的所有项目数。

```
Session.Query<Foo>(x => x.Enabled).Cacheable().Sum(x => x.Children.Count) 
```

但我收到`Antlr.Runtime.NoViableAltException`异常：

> 引发了“Antlr.Runtime.NoViableAltException”类型的异常。[.Sum[Foo](.Where[Foo](.CacheableFoo, Quote((x, ) => (x.Enabled)), ), Quote((x, ) => (x.Children.Count)), )]

如果我`Bar`像这样在客户端（加载所有项目）求和，一切正常：

```
Session.Query<Foo>(x => x.Enabled).Cacheable().ToList().Sum(x => x.Children.Count) 
```

您能否建议在服务器端执行此操作的最佳决定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:02:08.440

我认为这部分会`Sum(x => x.Children.Count)`导致问题。像这样重写您的查询：

```
Session.Query<Foo>(x => x.Enabled).Cacheable()
   .Select(x => x.Children.Count).Sum() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:07:56.283

尝试

```
var childCount = (from x in Session.Query<Foo>()
                  from child in x.Children
                  where x.Enabled
                  select child).Count(); 
```

您应该能够在其中的某处添加 .Cacheable()（在 Query() 之后或 Count() 之前）。

# iphone - 如何在 iPhone 的 box2d 中创建路径

> ID：14353712
> 
> 赞同：1
> 
> 时间：2013-01-16T08:00:52.997
> 
> 标签：iphone, ios, cocos2d-iphone, box2d, box2d-iphone

我在屏幕底部有一条小路，昆虫会在那里行走。但我的道路不是一条直线，它有起有落。那么我的昆虫如何才能走我的锯齿线呢？黑线是我的路。我希望我的昆虫跟随上下部分，我想使用 box2d 来实现这一点。有什么帮助吗？我不知道从哪里开始做这项工作。我还没有开始写代码。如何在 box2d 中为下面的图片路径制作 bodyDef？

![在此处输入图像描述](../Images/00d6bef354822fa6ca7bf188de3a33a4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:57:19.373

我假设“路径”一词是指图像中表示的地面，否则您可以忽略我的其余答案；）

我的建议是按照以下步骤操作：

1.  为地面图像创建主体定义。我使用 PhysicsEditor（[免费试用](http://www.codeandweb.com/physicseditor)）自动为图像创建主体定义。如果您的图像是透明的，则主体定义将很好地映射图像中的形状。PhysicsEditor 通过 .plist 导出主体定义，可以通过代码轻松加载。
2.  为您的昆虫创建一个身体定义（如上）。
3.  在您的代码中，使用地面主体定义为地面创建一个静态主体。
4.  使用项目符号 2 中的定义为每个昆虫创建一个动态体。
5.  添加重力。

现在你会在地上看到你的昆虫。如果你拖动它们（使用 box2d 提供的**鼠标关节**），你会看到它们对地面的反应真实，并且不与地面相交。

最后，您需要施加一个力（在 box2d 中）以自动移动昆虫。

这只是对您应该遵循的步骤的高级描述。每个步骤的更具体信息由 PhysicEditor 文档和 box2d 文档提供。

我希望这会对你有所帮助。

# c++ - 在IOS上打印漂亮的大数字c ++

> ID：14353714
> 
> 赞同：2
> 
> 时间：2013-01-16T08:00:55.373
> 
> 标签：c++, objective-c, boost

我正在寻找一种打印大量数字的好方法，以便它们更具可读性

即6000000

应该

6.000.000

或者

6,000,000 取决于地区

更新

我在我的代码上尝试了以下内容（它在 IOS 上）

```
char* localeSet = std::setlocale(LC_ALL, "en_US");
cout << "LOCALE AFTER :" << std::locale("").name() << endl; 
```

localeSet 始终为 NILL

我总是得到“LCOALE 之后：C”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:16:38.037

在标准 C++ 中是这样的：

```
template < class T >
std::string Format( T number )
{
    std::stringstream ss;
    ss << number;
    const std::string num = ss.str();
    std::string result;
    const size_t size = num.size();
    for ( size_t i = 0; i < size; ++i )
    {
        if ( i % 3 == 0 && i != 0  )
            result = '.' + result;
        result = ( num[ size - 1 - i ] + result );
    }
    return result;
}

...
long x = 1234567;
std::cout << Format( x ) << std::endl;
... 
```

# javascript - 有什么方法可以在 Javascript 中切换 ul 和 ol 吗？

> ID：14353715
> 
> 赞同：1
> 
> 时间：2013-01-16T08:01:00.733
> 
> 标签：javascript, jquery, knockout.js

我有动态创建列表（ol 或 ul）的问题。我面临的问题是，有时我需要有序列表，有时需要无序，具体取决于 JSON。我正在使用淘汰赛，这是我的 html，

```
<ol data-bind="foreach: items" ><li><a data-bind="text: $data"></a></li></ol> 
```

这是我的 JSON，

```
{
   items: ['a','b','c'],
   orderedList: true
} 
```

您可以看到orderedList 可能是true 或false。如果为真，那么我需要使用 ol，如果为假，我需要使用 ul。我也避免复制。任何方式来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:07:28.163

这是我放在一起的粗样品，无法测试。但你可以得到这个想法。

```
<!-- ko if : orderedList -->
<ol>
<!-- /ko -->
<!-- ko ifnot : orderedList -->
<ul>
<!-- /ko -->
<!-- ko foreach: items -->
<li><a data-bind="text: $data"></a></li>
<!-- /ko -->
<!-- ko if : orderedList -->
</ol>
<!-- /ko -->
<!-- ko ifnot : orderedList -->
</ul>
<!-- /ko --> 
```

**编辑：**淘汰赛中没有 if-else 条件。因此，您将不得不依赖使用多个 Ko if 语句。

**EDIT2**：适用于 OP 的代码版本。

```
<!-- ko if : orderedList -->
<ol data-bind="foreach: items">
    <li><a data-bind="text: $data"></a></li>
</ol>
<!-- /ko -->
<!-- ko ifnot : orderedList -->
<ul data-bind="foreach: items">
    <li><a data-bind="text: $data"></a></li>
</ul>
<!-- /ko --> 
```

# javascript - 如何根据对象数组在 docpad 中查询文档

> ID：14353716
> 
> 赞同：0
> 
> 时间：2013-01-16T08:01:05.353
> 
> 标签：javascript, node.js, docpad, query-engine

我有如下所示的 DocPad 文档：

```
---
categories: [{slug: ""}, {slug: ""}, ...]
---

Document content. 
```

如何查询`meta.category`数组中具有预定义 slug 值的所有文档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:32:02.163

我们有几种方法可以解决这个问题。

## 通过模板助手和查询引擎`setFilter`

[https://gist.github.com/4556245](https://gist.github.com/4556245)

最直接的方法是通过一个`getDocumentsWithCategory`模板助手，它利用查询引擎的`setFilter`调用，允许我们指定一个自定义函数（我们的过滤器），该函数将针对集合中的每个模型执行，并基于它的布尔返回值保留模型或将其删除集合。

该解决方案的缺点是：

*   我们必须在每个帖子中重新定义我们的类别信息
*   我们无法立即获得有关我们可用的所有类别的信息

## 通过模板助手和`parseAfter`事件

[https://gist.github.com/4555732](https://gist.github.com/4555732)

如果我们希望能够获得关于我们可用的所有类别的信息，但仍然需要为每个帖子每次定义我们的类别，那么我们可以使用`parseAfter`事件挂钩到我们文档的元数据，提取将类别输出到全局类别对象中，然后使用 id 引用更新我们文档的类别。

缺点是我们仍然必须有多余的类别信息。

## 通过模板助手和全局类别列表

[https://gist.github.com/4555641](https://gist.github.com/4555641)

如果我们只想定义我们的类别信息一次，然后只在我们的帖子中引用类别 ID，那么这个解决方案是最理想的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:10:27.030

我设法为给定的 slug 值 "bar in 创建一个 "foo" 集合`docpad.coffee`：

```
collections:
  foo: (database) ->
    database.findAllLive().setFilter("search", (model, value) ->
      categories = model.get('categories')
      return false unless Array.isArray categories
      for category in categories
        if (category.slug and category.slug == value)
          return true
      return false
    ).setSearchString("bar") 
```

但是当我尝试创建一个帮助函数返回一个给定数组元（“类别”）的集合时，对象的键（“slug”）和值（“bar”）：

```
createCollection: (meta, key, value) ->
  result = @getDatabase().createLiveChildCollection()
    .setFilter("search2", (model, searchString) ->
      objects = model.get(meta)
      return false unless Array.isArray objects
      for object in objects
        if (object[key] and object[key] == searchString)
          return true
      return false
    ).setSearchString(value) 
```

当我尝试调用它时，我得到一个空集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T14:32:12.453

我没有解决方案，但是您看过docpad作者博客的[源代码吗？](https://github.com/balupton/balupton.docpad/blob/master/docpad.coffee#L240)有一些查询元数据对象属性是否存在的示例。希望有帮助！

# ios - 单击时如何更改 uibutton 图像三次

> ID：14353718
> 
> 赞同：0
> 
> 时间：2013-01-16T08:01:12.703
> 
> 标签：ios, uibutton, uiimage

如何更改`UIButton`三次的图像并获取状态或设置稍后我可以用作参考的值。

**例如**，最初的图像`UIButton`是白色的，第一次点击它会变成黄色，然后第三次点击它会变成绿色，然后如果它是绿色的，再次点击它会变回白色。我还需要设置来自不同状态的值。

这将应用于 10 个单独的“UIButton”。

**场景**中，UIButton用于显示手表的状态，初始值为白色表示-new，点击变为黄色表示已使用，再次点击变为绿色，表示一级手表。只是一个示例场景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:14:09.273

你可以这样做：

```
-(void) buttonPressed: (id) sender {
     if([sender isKindOfClass:[UIButton class]]){
         UIButton *button = (UIButton*)sender;
         if(button.backgroundColor == [UIColor White])
             button.backgroundColor = [UIColor Yellow];
         else if(button.backgroundColor == [UIColor Yellow])
             button.backgroundColor = [UIColor Green];
         else if(button.backgroundColor == [UIColor Green])
             button.backgroundColor = [UIColor White];
     }
} 
```

根本没有测试过，但是沿着这些路线的东西应该可以工作。将此视为伪代码

# php - MySQL - 返回两个日期/时间之间的行

> ID：14353719
> 
> 赞同：0
> 
> 时间：2013-01-16T08:01:17.217
> 
> 标签：php, mysql, sql, date

我正在使用的 MySQL 表将日期和时间作为单独的列。日期的格式为时间`"y-m-d"`和`"hh:mm:ss"`时间。如果它们在不同的日子里，我该如何准确地搜索两次之间的行？（例如 和 之间的`2013-01-15 12:00:00`行`2013-01-17 17:00:00`）

现在，我正在使用一种糟糕的解决方法，假设时差最多为一天，但情况并非总是如此。可能有一种简单的方法可以做到这一点，但我就是不知道是什么。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:03:11.713

使用连接字段`CONCAT`

```
SELECT  *
FROM    tableName
WHERE   CONCAT(dateCol, ' ', timeColumn) BETWEEN
            '2013-01-15 12:00:00' AND '2013-01-17 17:00:00' 
```

但我建议您（*如果可能*）通过将两列与数据类型组合来更改表，`DateTime`以便您可以利用索引。上面使用的查询对于大型数据库来说性能`CONCAT`很差`full table scan`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T08:18:18.873

JW. 的答案可以通过首先使用索引缩小搜索空间然后将结果修剪到正确的集合来加快速度。

```
select * from births
where date between '2013-01-15' and '2013-01-17' -- use index
and concat(date, ' ', time) between '2013-01-15 12:00:00' and '2013-01-17 17:00:00' 
; 
```

有关更多详细信息，请参阅此[SQL Fiddle](http://www.sqlfiddle.com/#!2/e4e10/2)。

# colors - SVG―加法混合模式

> ID：14353720
> 
> 赞同：0
> 
> 时间：2013-01-16T08:01:17.660
> 
> 标签：colors, svg, svg-filters

> **可能重复：**
> [使用 SVG 进行加色混合（additive blending）](https://stackoverflow.com/questions/13943905/using-svg-for-additive-color-mixing-additive-blending)

我正在寻找一种方法来创建添加颜色的交互式插图，如下图所示：

![色轮](../Images/add85b4163d405c4d5f423608392314a.png)

红色、蓝色和绿色区域应该是“可拖动的”，但由于我对这种颜色处理不太熟悉，所以我想到的唯一想法是对每个元素使用混合模式过滤器。该[`<feBlend>`](http://www.w3.org/TR/SVG/filters.html#feBlendElement)过滤器不支持 »additive«，但也有[`<feColorMatrix>`](http://www.w3.org/TR/SVG/filters.html#feColorMatrixElement)和[`<feConvolveMatrix>`](http://www.w3.org/TR/SVG/filters.html#feConvolveMatrixElement)过滤器似乎提供了广泛的可能的颜色转换。

是否可以使用这些滤镜创建添加混合模式？我将不胜感激任何其他类型的资源/教程的链接，我可以在其中获得有关这些过滤器如何工作的更多信息！

问候...

# jquery-mobile - 单选和复选框功能

> ID：14353722
> 
> 赞同：0
> 
> 时间：2013-01-16T08:01:35.397
> 
> 标签：jquery-mobile

我是 jquery mobile 的新手。

请找到以下代码...

```
<!DOCTYPE html> 
<html> 
<head> 
    <title>My Page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
    <script>
        var count = 1;
        var newSet = '<div data-role="fieldcontain">' + 
            '<fieldset data-role="controlgroup">'+
             '</fieldset></div>';

        $(function (){
            $('.cbDiv').append(newSet);
        }) ;            

        $(document).on("click", ".add", function() {                        
            newSet = newSet += '<input type="radio" name="radio' + count + '" id="radio' + count + '" value="radio' + count + '" />' + 
            '<label for="radio' + count + '">radio' + count + '</label>';
            $(".cbDiv").html(newSet);           
            count++;
        });

    </script>
</head>
<body>
    <div data-role="page" id="page">
        <div data-role="content">
            <input type="button" class="add" value="Add Radio Button" />
            <div class="cbDiv"></div>
        </div>
    </div>
</body> 
```

我在 jquery mobile 中动态添加单选按钮。它工作正常.. 但是，它不能用作单选按钮（即单选）。它作为一个复选框工作。（即多选）。

如何防止这种情况？

样式也未应用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:08:13.773

使用单选按钮，您需要提供`name`属性。如果您为每个框指定相同的名称，那么它将表现为单个选择而不是复选框。在您的情况下，它们会随每个单选按钮命名属性更改。您应该从中删除该数字，它应该可以按预期工作。

这个[jsfiddle](http://jsfiddle.net/94MzH/)展示了它是如何工作的。

如果您使用正确的类和 CSS 选择器，则应该应用该样式。如果没有，你添加了错误的类或者你的 CSS 有错误。

编辑：我看到你使用`radio`as `id`。您可能应该使用它`class`，因为`id`应该只用于页面上的单个元素。

# php - 某些用户未显示 PHP GD 库图像

> ID：14353723
> 
> 赞同：0
> 
> 时间：2013-01-16T08:01:36.590
> 
> 标签：php, php-gd, imagecreatefrompng

我运行一个虚拟宠物网站，我们使用 PHP GD 库来制作我们的头像和宠物。到目前为止，我们有超过一千个用户，其中只有 3 个用户遇到了这个问题。但是，对于每个用户来说，这是完全相同的问题。

这是这些用户看到的[屏幕截图。](http://img832.imageshack.us/img832/4748/78353383.jpg)

大多数图像只显示“断开的链接”图标，但每隔一段时间它就会开始构建图像并在完成之前停止。

这些是我修复它的尝试：

*   除了拍摄图像并将其打印出来之外，从代码中删除了所有内容。
*   由不同的主机将代码放在完全不同的服务器上
*   从 Cloudflare DNS 服务器中删除了该站点，以查看是否由 Cloudflare 引起
*   使用 JPEG 图像而不是 PNG

这是我迄今为止从这些用户那里收集到的信息：

*   通过代理查看我们的网站可以加载图像
*   使用来自同一互联网连接的笔记本电脑成功加载图像
*   浏览器要么只是输出损坏的链接，要么说图像包含错误并且无法显示。

最后，这是我正在使用的简单测试图像页面的代码：

```
<?
$finalimage = imagecreatetruecolor(500,500);
$file = 'http://www.somesite.com/picture.jpg';
$layers = imagecreatefromjpeg($file);
imagecopy($finalimage, $layers, 0, 0, 0, 0, 500, 500);
imagedestroy($layers);

header("Content-type: image/jpeg");
imagejpeg($finalimage);
imagedestroy($finalimage);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:14:46.530

你忘记了`imagedestroy($finalimage);`最后，但我不知道它是否能解决你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T00:15:26.130

我们用户的问题是使用卡巴斯基反病毒软件。他们必须将我们的 URL 添加到网络安全下的受信任站点列表中。这样做后，所有图像都加载正常。

# java - 我应该使用 HTTP 服务器还是 FTP 服务器来下载文件？我如何在这里使用 P2P 协议？

> ID：14353724
> 
> 赞同：1
> 
> 时间：2013-01-16T08:01:40.250
> 
> 标签：java, http, jakarta-ee, ftp, p2p

在我的 webapp 中，用户可以相互下载文件。如果用户`A`已共享文件`F`，则`B`连接后的用户可以从`A`下载文件。到目前为止，每个用户都建立了一个简单的连接，例如：与另一个用户。该文件驻留在每个用户的本地硬盘上。为了让用户可以下载文件，我想到了两个选项。`F``A``HTTP``xxx.xxx.xxx.xxx/FileList`

*   当用户共享一个文件时，将该文件复制到服务器的 web-app 目录中，这样下载链接就变得像`<a href="./FileToDownload">Click to download</a>`.
*   在每个节点上运行一个单独的 FTP 服务器。

我不知道其中哪一个是更好的选择，但第一个对我来说似乎很简单。每个客户端可以共享文件的方式是什么，而无需将内容复制到`webapp`目录中的某个位置。***在这种情况下，我如何使用 P2P 协议？***

*注意：我使用的是 Tomcat 7。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:39:20.047

真正的 P2P 是不可能的，除非在客户端机器上打开一个监听套接字（这要求你必须在客户端机器上安装一些东西）。

如果您不想将文件存储在服务器上，我宁愿推荐一个“连接服务器”，它充当两个用户之间的网关。用户 A 将上传，用户 B 将同时下载，您只需要在内存中制作字节缓冲区即可。可以丢弃下载的字节。

您可以用任何语言编写一个小型客户端程序来更新可用文件，并从服务器端接收上传请求（也执行上传）我建议使用 TCP 套接字上传到服务器端，这样你就有了直接控制上传的字节（流）。

这里有一些有趣的技术问题（阻塞流、元数据（文件名、长度、创建日期……）、数据一致性、错误处理等）需要考虑。不错的任务。

我不推荐 FTP，因为您无法控制身份验证和授权（谁可以看到文件）。

# ios - iOS 中的数据引用 (dref) 原子支持

> ID：14353726
> 
> 赞同：0
> 
> 时间：2013-01-16T08:01:45.600
> 
> 标签：ios, mp4, quicktime

quiktime 文件格式支持 dref atom。实际视频数据可以驻留在网络服务器上的单独文件中。

为了测试这个特性，我用 dref atom 创建了一个文件。[http://vihosting.net/sample_iTunes_reference.mov](http://vihosting.net/sample_iTunes_reference.mov)

此文件在 quicktime 播放器上播放良好，但 iPhone/iPad 出错，我不确定这是否与生成的文件或设备支持有关。

1.  如果 iOS (iphone, ipad) 支持 dref atom。
2.  如果没有，苹果是否有任何官方文件明确说明这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T12:33:30.380

AVFoundation（iPhone/iPad 中使用的媒体框架）支持有限数量的视频编解码器。您提供的示例文件使用罕见的编解码器 3ivx D4 4.5.1 编码（某些应用程序甚至无法识别），iOS 不支持该编解码器。

使用 h264 或 mpeg4 编解码器对视频进行编码，并为 iOS 使用 .mov 或 m4v 容器。

# extjs - Sencha touch charts 2.0 beta : iPhone 设备中的标签模糊

> ID：14353729
> 
> 赞同：0
> 
> 时间：2013-01-16T08:02:03.633
> 
> 标签：extjs, charts, sencha-touch-2

我们在 Sencha touch 2.1 中开发了一个应用程序。我们需要在柱形图中显示我们的记录，所以我们使用 Sencha touch charts 2.0 beta 。它在 Chrome、Safari 浏览器和安卓模拟器中运行良好。但在 Iphone 设备中，图表似乎很模糊。我们甚至无法阅读图表中的标签。

# windows-phone-8 - 检查我的电脑的 Windows Phone 8 模拟器兼容性

> ID：14353730
> 
> 赞同：0
> 
> 时间：2013-01-16T08:02:05.820
> 
> 标签：windows-phone-8, windows-phone-8-emulator

Windows Phone 8 SDK 安装程序发出警告说我无法在我的 PC 上运行 Windows Phone 8 模拟器，因为它不支持硬件虚拟化。烦人的事情是，它在安装过程结束时给出了这个错误，在它安装了所有东西之后。

是否有一个实用程序可以在安装 SDK**之前检查该兼容性？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:05:43.893

这里有详细描述：

[http://www.howtogeek.com/73318/how-to-check-if-your-cpu-supports-second-level-address-translation-slat/](http://www.howtogeek.com/73318/how-to-check-if-your-cpu-supports-second-level-address-translation-slat/)

# codeigniter - HMVC MX_Controller 未加载 CI' _output 函数

> ID：14353733
> 
> 赞同：1
> 
> 时间：2013-01-16T08:02:21.870
> 
> 标签：codeigniter, codeigniter-2, hmvc

通常，扩展`CI_Controller`允许您使用该函数`_output`来呈现 html 输出。

我正在使用 HMVC。`MX_Controller`不加载`_output`功能。

我已经对其进行了测试并运行了几次。

问题：

1 - 是否`MX_Controller`继承`CI_Controller`？

2 - 我该如何实施`_output`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T21:44:55.283

似乎 codeigniter-modular-extensions-hmvc 确实破坏了 _output() 功能。我不知道如何在 bitbucket 上提交错误：[https ://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc)

我的解决方法涉及覆盖`Output`类并添加一个钩子来触发自定义输出方法。这就是我所做的。

覆盖主`Output`类：

```
class MY_Output extends CI_Output
{
    function __construct()
    {
        parent::__construct();
    }

    // Overwrite the output
    public function my_output()
    {
        $content = $this->get_output();

        // do stuff to $content here

        $this->set_output($content);
        $this->_display();
    }
} 
```

然后在你的配置中启用钩子。

```
$config['enable_hooks'] = TRUE; 
```

然后将其添加到您的钩子配置中。

```
$hook['display_override'][] = array(
    'class' => '',
    'function' => 'custom_output',
    'filename' => 'custom_output.php',
    'filepath' => 'hooks'
    ); 
```

最后将“custom_output.php”文件添加到您的钩子目录并添加它。

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

/*
 * Customize the output
 */
function custom_output()
{
    $CI =& get_instance();
    $CI->output->my_output();
} 
```

如果您不需要访问任何类变量，您只需在`custom_output()`函数中编辑输出即可，而不必担心覆盖`Output`类。

非常hacky，但它有效。:)

# javascript - 在 Firebug 中定义自定义函数

> ID：14353736
> 
> 赞同：2
> 
> 时间：2013-01-16T08:02:54.053
> 
> 标签：javascript, firebug

我是 Firebug 的长期用户，我经常需要`log`各种东西才能看到我在做什么。该`console.log`功能有很多要键入的内容。即使我将它分配给单个字母变量，例如`q = console.log`，我每次启动 Firebug 时都必须这样做。有什么方法可以做到`q`总是引用`console.log`（当然，除非我在我的会话中覆盖它）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:44:07.193

要回答您的问题，该功能目前不存在，但我发现萤火虫开发人员过去反应非常迅速。您为什么不在他们的论坛上提出功能请求，或者更好的是，自己编写代码并要求他们添加它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T02:39:08.640

根据您的 IDE，只需设置一个代码片段（我使用 Flash Develop，所以工具 -> 代码片段）。

我相信这是比设置重定向脚本更好的方法，因为它可以防止 Firebug 命名空间被污染，并且如果你的调试失败，它可以更容易/更一致地调试。

屏幕截图显示我使用 Flash Develop，点击`Ctrl+B`，然后点击`enter`。片段中的竖线 ( `|`) 指示插入片段后光标将放置在哪里开始输入。

![在此处输入图像描述](../Images/d466a3fb0afb4f5470ce44b418c23554.png)

# java - 文件读/写与数据库读/写

> ID：14353738
> 
> 赞同：0
> 
> 时间：2013-01-16T08:02:59.777
> 
> 标签：java, database, logging, file-io

嗨，我只是想知道是否有人可以帮助我。

我有一个程序，它根据日志包含的内容（基本上是否有错误）将其他文件中的日志写入两个不同的文件。我的问题是像我一样（在文件中）或数据库中存储这些日志会更好吗？

其他可能有帮助的信息：

*   我的程序将大量消息写入这些文件，一旦消息在文件中，它就不会改变。

*   稍后我计划将它们读回另一个程序以对数据进行一些操作。如果我应该使用文件，这会改变吗？

最后一个问题：当使用文件时，最好一次写出每条消息还是存储它们然后再写一组？

任何帮助都会非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:32:01.647

1.  使用 FILE I/O，您需要自己实现所有 Qos 方面，如并发、事务等，以确保数据不一致

2.  使用 DB，所有这些方面都已由 DB 处理

# ios - 这个 Sqlite3 语句可以吗？

> ID：14353742
> 
> 赞同：1
> 
> 时间：2013-01-16T08:03:15.377
> 
> 标签：ios, objective-c, sql, sqlite

当谈到 sqlite 时，我是一个菜鸟，不太确定如何做到这一点。

我想要一个包含一堆行的数据库，每个包含一个单词。当用户输入一个单词时，我将通过检查它是否在数据库中来验证它。

我猜我没有的东西，也不知道如何创建，是索引吗？我该如何插入？如何编写查询以利用索引？

我也有两列，“id 和 word”。有id好还是只占空间？

这是我到目前为止得到的：

```
CREATE TABLE words (id INTEGER PRIMARY KEY, word VARCHAR(15)); 
```

我不希望单词超过 15 个字符，所以我设置了 VARCHAR(15);

```
INSERT INTO words(word) VALUES('hello');
INSERT INTO words(word) VALUES('bye');
etc. for all words 
```

并检查一个词：

```
NSString *sql = [NSString stringWithFormat:@"SELECT EXISTS(SELECT 1 FROM words WHERE word=\"%@\" LIMIT 1)", word];
const char *sqlStatement = [sql UTF8String];

if (sqlite3_prepare_v2(db, sqlStatement, -1, &selectStmt, NULL) == SQLITE_OK)
{
    int count = 0; 
    while(sqlite3_step(selectStmt) == SQLITE_ROW)
    {
        count = sqlite3_column_int(selectStmt, 0);
    }

    NSLog(@"COUNT: %i",count);

    //If count is 1, we have a match.  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:09:39.577

是的。你的陈述没问题。

您还可以使用`'`intead of `"`：

```
NSString *sql = [NSString stringWithFormat:@"SELECT EXISTS(SELECT 1 FROM words WHERE word='%@' LIMIT 1)", word]; 
```

* * *

> 有id好还是只占空间？

这取决于您的需要，我建议您应该保留一个`Id`字段作为主键。

* * *

要创建索引，您可以使用：

```
CREATE INDEX yourIndexName ON yourTableName ( yourColumnName ) 
```

有关索引检查[**sqlite的更多信息**](http://www.sqlite.org/lang_createindex.html)

# python - 如何使用networkx在加权图中找到最短路径？

> ID：14353743
> 
> 赞同：10
> 
> 时间：2013-01-16T08:03:22.933
> 
> 标签：python, python-2.7, networkx

我正在使用`networkx`包`Python 2.7 Enthought distribution`来计算海港网络之间的最短路径。使用 计算距离可以正常工作`dijkstra_path_length`，但我还需要知道它使用了什么路线`dijkstra_path`（顺便说一句，我认为如果我先计算路径，然后从路径计算长度而不是在相同的数据上运行 Dijkstra 算法两次）。但是路径功能失败了，说`list indices must be integers, not str`。

这是产生错误的代码。谁能告诉我我做错了什么？

```
import networkx as nx

# Create graph
network_graph = nx.Graph()
f_routes = open('routes-list.txt', 'rb')
# Assign list items to variables
for line in f_routes:
    route_list = line.split(",")
    orig = route_list[0]
    dest = route_list[1]
    distance = float(route_list[2])
    # Add route as an edge to the graph
    network_graph.add_edge(orig, dest, distance=(distance))

# Loop through all destination and origin pairs
for destination in network_graph:
    for origin in network_graph:
        # This line works
        length = nx.dijkstra_path_length(network_graph, origin, destination, "distance")
        # This line fails
        path = nx.dijkstra_path(network_graph, origin, destination, "distance") 
```

我在回溯中得到以下信息。

```
Traceback (most recent call last):
  File "C:\Users\jamie.bull\workspace\Shipping\src\shortest_path.py", line 67, in <module>
    path = nx.dijkstra_path(network_graph, origin, destination, "distance")
  File "C:\Enthought\Python27\lib\site-packages\networkx\algorithms\shortest_paths\weighted.py", line 74, in dijkstra_path
    return path[target]
TypeError: list indices must be integers, not str 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-16T09:08:38.000

`nx.dijkstra_path`尝试一下，当源节点和目标节点相同时，似乎会引发一个误导性异常：

```
>>> import networkx as nx
>>> g = nx.Graph()
>>> g.add_edge('a', 'b', distance=0.3)
>>> g.add_edge('a', 'c', distance=0.7)
>>> nx.dijkstra_path_length(g, 'b', 'c', 'distance')
1.0
>>> nx.dijkstra_path(g, 'b', 'c', 'distance')
['b', 'a', 'c']
>>> nx.dijkstra_path_length(g, 'b', 'b', 'distance')
0
>>> nx.dijkstra_path(g, 'b', 'b', 'distance')
Traceback (most recent call last):
  File "<pyshell#7>", line 1, in <module>
    nx.dijkstra_path(g, 'b', 'b', 'distance')
  File "C:\Users\barberm\AppData\Roaming\Python\Python27\site-packages\networkx\algorithms\shortest_paths\weighted.py", line 74, in dijkstra_path
    return path[target]
TypeError: list indices must be integers, not str 
```

所以只要显式测试`destination`和是否`origin`相同，相同时分别处理。

# android - android inputstream 图像直接进入SQL Network

> ID：14353746
> 
> 赞同：0
> 
> 时间：2013-01-16T08:03:33.100
> 
> 标签：android, sqlite, inputstream

我知道将图片导入BMP是：

```
String  t1="http://www.xxx.xxx/xx/xx.jpg";
URL TKs = new URL(t1);
InputStream Is= TKs.openStream();       
Bitmap Bp = BitmapFactory.decodeStream(Is);
Is.close(); 
```

我也知道把图片转成可以用SQL存储的格式：

```
is = resources.openRawResource(R.drawable.xxx);
byte[] image2 = new byte[is.available()];
is.read(image2);
is.close(); 
```

我用这两种方法应该都能达到我的目的：

```
String  t1="http://www.xxx.xxx/xx/xx.jpg";
URL TKs = new URL(t1);
InputStream Is= TKs.openStream();       
byte[] image2 = new byte[Is.available()];
//////////////////the image2 is NULL
Is.read(image2);
Is.close(); 
```

明明我失败了我想问我到底怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:59:05.820

```
public byte[] getImage(String t1) throws Exception{  
        URL url = new URL(t1);  
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();  
        conn.setConnectTimeout(5 * 1000);  
        conn.setRequestMethod("GET");  
        InputStream inStream = conn.getInputStream();  
        if(conn.getResponseCode() == HttpURLConnection.HTTP_OK){  
            return readStream(inStream);  
        }  
        return null;  
    }  

   public static byte[] readStream(InputStream inStream) throws Exception{  
        ByteArrayOutputStream outStream = new ByteArrayOutputStream();  
        byte[] buffer = new byte[1024];  
        int len = 0;  
        while( (len=inStream.read(buffer)) != -1){  
            outStream.write(buffer, 0, len);  
        }  
        outStream.close();  
        inStream.close();  
        return outStream.toByteArray();  
    }  

byte[] data = getImage(t1); 
```

# javascript - 如何从 iframe 中获取下拉选定的文本？

> ID：14353748
> 
> 赞同：0
> 
> 时间：2013-01-16T08:03:46.243
> 
> 标签：javascript, iframe

我有一个 iframe，它以模式打开。内容存在于 iframe.jsp 中。现在 iframe 包含一个下拉菜单。在更改下拉菜单时，我将调用另一个窗口。但是，如果用户在下拉选项中选择选项 : camRip，则不会调用该窗口。

我的 on change 代码如下所示：

```
<select id="hamStan"  onchange = "callWindow('<%=URL %>');"> 
```

我的变化是这样的：

```
function callWindow(URL) {
var selectedByUser = document.getElementById("hamStan");
var strUserText = selectedByUser.options[selectedByUser.selectedIndex].text;
if(strUserText!="camRip ")
{
var windowName = "popUp";    
var windowSizeArray = [ "width=740,height=400,top=10,left=50,toolbar=1,location=1,directories=0,status=0,menuBar=1,scrollBars=1,resizable=1"];
window.open(URL,windowName,windowSizeArray);
}
} 
```

但问题是 selectedByUser 出现为空。我哪里错了？请帮助。如何从模态 iframe.jsp 更改下拉用户选择的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:46:04.850

经过大量研究，我终于找到了解决方案。

这就是我钓到的：

```
function callWindow(URL) {
var iframe = window.parent.parent.document.getElementById('myIframe');
var iwin= iframe.contentWindow || iframe.contentDocument.defaultView;
var selectedByUser  = iwin.document.getElementById('hamStan');
var strUserText = selectedByUser.options[selectedByUser.selectedIndex].text;
if(strUserText!="camRip ")
{
var windowName = "popUp";    
var windowSizeArray = [ "width=740,height=400,top=10,left=50,toolbar=1,location=1,directories=0,status=0,menuBar=1,scrollBars=1,resizable=1"];
window.open(URL,windowName,windowSizeArray);
}
} 
```

请确保您在此处正确访问 iframe-id，否则变量 iframe 会给您一个类型错误。希望它可以帮助别人。

# sql - 在 oracle forms 6i 中将值从一种形式传递到另一种形式

> ID：14353749
> 
> 赞同：2
> 
> 时间：2013-01-16T08:03:48.163
> 
> 标签：sql, oracle, oracleforms

我是 Oracle 表单的新手，我正在设计用同样的方式编写应用程序。我在以下情况下遇到问题。

我有一个表格（FORM1）来显示没有授权细节的项目列表。在授权项目之前，授权人必须查看详细信息。这需要另一个表单 (FORM2)，只要选择了一个项目并选择了“查看”按钮，就会调用该表单。详细信息将在那里显示。FORM2 上还有按钮：REJECT、APPROVE 和 BACK。

这是 FORM1 按钮按下时查看按钮的事件：

```
DECLARE
list_id   ParamList;
USR_MSG NUMBER;
BEGIN  

IF :TBL_CONTRACT.CONTRACT_NO IS NULL THEN
    USR_MSG:=USER_ALERT('INFO_ALERT','Please select a valid contract no to View.');
    RAISE FORM_TRIGGER_FAILURE;
END IF;

list_id := Create_Parameter_List('PAR_CONTRACT');
Add_Parameter(list_id, 'CONTRACT_NO',TEXT_PARAMETER,:TBL_CONTRACT.CONTRACT_NO);
call_Form('T:\FRM_APPROVAL_VIEW.fmx',no_hide,no_replace, no_query_only,list_id);

END; 
```

我的意图是将 contract_id 传递给 FORM2 并查询数据库以获取详细信息，然后将其显示在表单上。

这是 Form2 when-new-form-instance 事件的代码。

```
SET_WINDOW_PROPERTY(FORMS_MDI_WINDOW,WINDOW_STATE,MAXIMIZE);
BEGIN
  IF ( :PARAMETER.PAR_CONTRACT IS NOT NULL ) THEN 
    /* Use this value in the WHERE clause of MY_BLOCK */
    Set_Block_Property('TBL_CONTRACT',DEFAULT_WHERE, 'PAR_CONTRACT = :PARAMETER.PAR_CONTRACT');
    GO_BLOCK('TBL_CONTRACT');

    Execute_Query;
  END IF;
END; 
```

当我运行应用程序时遇到错误：FRM 47023，在 FRM_APPROVAL_VIEW 表单中不存在名为 Contract_No 的此类参数。

有人会解释什么是错的和补救措施。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:21:20.317

子表单中forms参数的名称应该是参数的名称（CONTRACT_NO）而不是参数列表的名称！如果您重命名表单参数并将代码更改为使用 :PARAMETER.CONTRACT_NO 那么这应该适合您。

# jquery - 即使使用正确的参数也无法显示最后一页

> ID：14353753
> 
> 赞同：5
> 
> 时间：2013-01-16T08:04:02.453
> 
> 标签：jquery, jqgrid

我正在与 jqgrid 战斗大约 8 天（或更长时间），除了一个小问题之外，我什么都做了。我有一个很大的数据库，我正在尝试按部分显示它。我的意思是每次当`next`, `prev`, `last`,`first`或用户输入页码时都会执行 sql 查询。我已经管理它并且一切都是正确的，但是现在网格没有显示正确的最后一页。我的意思是，即使有 42 页，它也显示 1 of 1。

现在，当我输入页码时，网格正在刷新并显示正确的结果，但寻呼机说 2 of 1、5 of 1 等等。

我使用的是：

```
jQuery("#list").jqGrid({ 
        datatype: "jsonstring",
        datastr: JSON.stringify(gridDtls),
        jsonReader:{
          root: "rows",
          page: "page",
          total: "total",
          records: "records",
          repeatitems: false,
          id: "0"
        }, 
```

每次单击按钮时我用来运行查询的代码在这里（请注意，下面的代码仅在按下回车时才有效，因为按钮处于非活动状态）：

```
onPaging: function(pgButton){ 
            var status = returnUserStatus();
            var page1 = $(this).jqGrid("getGridParam", "page");
            var totalPages = $(this).getGridParam('lastpage');

            if(pgButton=="next_pager"){ 

            } 
            if(pgButton=="prev_pager"){ 

            } 
            if(pgButton=="last_pager"){ 

            }
            if(pgButton=="first_pager"){ 

            }else if((pgButton !="first_pager") && (pgButton !="last_pager") && (pgButton !="prev_pager") && (pgButton !="next_pager"))     

        }, 
```

一切对我来说似乎都是正确的。为什么 jqgrid 没有返回正确的页面？我确定我缺少一些小东西。请帮我！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T08:52:26.083

我想你的问题的原因是`datatype: "jsonstring"`你使用*服务器端分页*。而不是你应该使用`datatype: "json"`.

为了理解：类型`datatype: "jsonstring"`几乎与`datatype: "local"`. 最重要的区别是 jqGrid`jsonReader`在 case of中使用`datatype: "jsonstring"`而不是[localReader](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#array_data)在 case of 中使用`datatype: "local"`。页数将由 jqGrid 计算，`total`并且`records`来自服务器响应的值将被*忽略*。

jqGrid 提供了很多自定义选项来向服务器发送几乎所有 Ajax 请求并读取几乎所有响应。您只需要使用相应的选项。因为您没有发布有关服务器接口的任何详细信息，所以我无法在此处写更多详细信息。

我建议您检查选项`prmNames`，`ajaxGridOptions`以及回调`serializeGridData`和`loadBeforeSend`. 该选项允许自定义对服务器的请求。另一个选项`jsonReader`和`jsonmap`回调`beforeProcessing`允许读取服务器响应。

**更新**：[演示](http://www.ok-soft-gmbh.com/jqGrid/Slim.htm)演示了如何在 jqGrid 分页时使用*自动*`datatype: "json"`发送 Ajax 请求。选择网格很重要。在您的情况下，它似乎是列。所以代码可能是*`id``login`*

 *```
$("#userslist").jqGrid({
    url: "admin",
    postData: {
        WrJOB: "listUsers",
        companyId: function () { return $("#companyId").val(); },
        userStatus: function () { return returnUserStatus(); }
    },
    jsonReader: {
        root: "gridDtls.rows",
        page: "gridDtls.page",
        total: "gridDtls.total",
        records: "gridDtls.records",
        repeatitems: false
    },
    prmNames: {page: "pageNum"},
    colModel: [
        {name: 'login', key: true, ...}
    ...
}); 
```

对 URL 的请求`"admin"`将自动包含`pageNum`参数。参数的值`"rows"`将是 20。它是页面的大小。如果用户在寻呼机中选择另一个值（请参阅 参考资料`rowList: [20, 40, 60]`），当前值将被发送到服务器。该选项`prmNames`将默认参数重命名`"page"`为`"pageNum"`. 以同样的方式，您可以重命名将 jqGrid 发送到服务器的任何其他参数。用作`null`值将阻止向服务器发送参数。例如，您可以使用

```
prmNames: {page: "pageNum", nd: null, search: null, sort: null, order: null} 
```

消除发送您不使用的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T08:50:19.433

以前没有使用过 jqgrid，但在[wiki](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data&s%5B%5D=page#json_string)中找到了这一行：

> 如果您使用 jsonstring 来获取数据 - 检索数据后，数据类型选项自动设置为本地 - 即（当前）分页将不起作用！*

# php - Drupal bootstrapping on every request and performance

> ID：14353755
> 
> 赞同：1
> 
> 时间：2013-01-16T08:04:12.997
> 
> 标签：php, spring, drupal, containers

Disclaimer: Don't lets open the hell gate of 'which language is better than something else'.
I like both PHP and Java.

I've just started digging into Drupal and found something that looks odd to me. From the looks of the index.php file, it seems that Drupal has to bootstrap for every Http request from the client.
Compared to Java Frameworks like Spring(yes, I have java background), this seems like overhead if it means Drupal has to read whatevery configuration that is necessary. I don't know much about either of frameworks but doesn't Spring load configuration once on startup ?

My question is
If Drupal has to bootstrap for every request, how does it handle a lot of requests ? Does this give a performance disadvantage to Drupal because of the nature of PHP ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T09:34:48.683

PHP is by nature non persistent language. You share nothing between requests.

Persistency is always managed outside, i.e. session are handled by cookies on communication, loading a persistency session storage (usually a file, but it's a database storage for Drupal). And the content of the application is on a database, files, etc..

With PHP you cannot make a persistent server, reusing objects for several requests. Well in fact you could try it now with some advanced usages of PHP, but it is not the nature of the language, it's not built for that. Everything has to be loaded first, and everything is killed after the end of the request handling.

So all PHP CMS or frameworks, and Drupal is one of them, are built to handle this fact in a clever way. And the main strategy for that is to speed up the time of environment rebuilding with caches (as always, manage persitency outside PHP). To manage high load applications with Drupal you'll have to tweak the cache management:

*   activate caching (of course)
*   use several layers of cache, like for example APC for some classes and path caches, memcache or mongodb for some other caches, MySQL (the default) for others, etc. You could also use modules like Session proxy or others to dispatch your session management on a redis server, or mongodb, memcache, redis, etc
*   use a reverse proxy cache like varnish to manage public pages caches, or even page parts with varnish ESI.

If you compare this to persistent application servers like java or C# can produce it seems to be a bad point. But sometime early constraints help developpers in finding better ways of doing things (I'm not saying Drupal always use the best ways of doing things :-) ). And a lot of heavy load websites use PHP (with caches). So it is just a different way of doing websites.

# javascript - Javascript中变量赋值后的逗号

> ID：14353757
> 
> 赞同：3
> 
> 时间：2013-01-16T08:04:21.167
> 
> 标签：javascript, arrays, variables, for-loop, variable-assignment

```
function ReplaceContentInContainer(matchClass,content)
    {
    var elems = document.getElementsByTagName('*'), i;
    for (i in elems)
        {
        if((" "+elems[i].className+" ").indexOf(" "+matchClass+" ") > -1)
            {
            elems[i].innerHTML = content;
            }
        }
    } 
```

我试图弄清楚逗号在变量赋值中的作用以及在循环`('*'), i;` 中的含义。`for (i in e)`

我最好的猜测是`e`分配给文档节点中的所有元素以及 `i`. 那么这是否意味着这`i`是数组中元素数量的计数或引用`e`（它是数组吗？）？

编辑：好的。它只是实例化变量 ( `i`)，然后`i`在`for`循环中计算对象中的所有元素`elem`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T08:05:25.250

这只是将声明分开。

```
var elems = document.getElementsByTagName('*'), i; 
```

是相同的

```
var elems = document.getElementsByTagName('*');
var i; 
```

一个更简洁，另一个可能被视为更具可读性。

在您的确切情况下，您可以使用

```
var elems = document.getElementsByTagName('*');
for (var i in elems) 
```

在我看来，这将是最好的，因为其目的`i`是显而易见的。

由于变量的范围是函数（或全局）而不是块，所以它本来是完全相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T08:06:02.167

该逗号是因为您`i`在本地范围内定义了变量，它只是`var`语句的一部分。如果没有逗号`i`将是一个全球性的。

您的陈述与以下内容相同：

```
var elems = document.getElementsByTagName('*');
var i; 
```

如果您使用工具对代码质量进行静态分析，例如 JSLint，它将迫使您编写：

```
var elems = document.getElementsByTagName('*'),
    i; 
```

有几个原因：

1.  你定义了两个变量（所以你没有全局变量）
2.  你没有多余的`var`（你写得更少...... :-)）
3.  您的代码比单行版本更具可读性
4.  您在同一个地方定义所有变量，这比以下更容易阅读：

    for (var i in elems) { //做某事 }

perl 中也有类似的概念，例如：

```
my ($var1, $var2); 
```

在 JavaScript 中是一样的，但你不需要将变量放在列表中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T08:07:40.223

`i`是`var`语句的一部分..所以它只是创建一个新变量...您的代码与

```
var elements=document.getElementsByTagName('*');
var i; 
```

# java - 聊天程序网络冻结？

> ID：14353758
> 
> 赞同：0
> 
> 时间：2013-01-16T08:04:25.643
> 
> 标签：java, sockets, networking, freeze

好的，所以我一直在编写这个聊天的乐趣，并且在路上遇到了一些事情。我根本不擅长套接字，有人可以帮忙连接这些吗？

客户端.java：

```
try {
    Socket server = new Socket("jakebobjo.com", 1234);
    InputStream in = server.getInputStream();
    OutputStream out = server.getOutputStream();
    PrintWriter pout = new PrintWriter(out, true);

    pout.println(username + ": " + input.getText() + "\n");

    BufferedReader bin = new BufferedReader(new InputStreamReader(in));
    String responce = bin.readLine();

    server.close();         
} catch (IOException ex) {
    System.out.println("Error connection to host.");
} 
```

服务器.java：

```
try {
    ServerSocket listener = new ServerSocket(1234);
    Socket client = listener.accept();

    InputStream in = client.getInputStream();
    OutputStream out = client.getOutputStream();
    PrintWriter pout = new PrintWriter(out, true);

    pout.println(username + ": " + input.getText() + "\n");

    client.close();         
    listener.close();
} catch (IOException ex) {
    System.out.println("Error connecting to client.");
} 
```

当那些触发 idk 为什么时，程序就会冻结：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:33:08.580

您的程序正在冻结，因为在这两个文件中您已要求应用程序将消息发送到另一端而不接受任何一方的消息。顺序应该像这两个中的任何一个：

> 客户端发送消息 - 服务器接收消息

或者

> 服务器发送消息 - 客户端收到消息

.在您的情况下，没有任何顺序会导致死锁并且您的应用程序被冻结。将客户端文件中的语句顺序更改为：

```
BufferedReader bin = new BufferedReader(new InputStreamReader(in));
String responce = bin.readLine();
pout.println(username + ": " + input.getText() + "\n"); 
```

> > 注意：
> > 2）先启动Server端程序，再启动Client端程序。
> > 1）MoreOver 在服务器端你已经关闭了套接字而没有收到来自客户端的消息。因此，客户端从服务器接收到消息后，当它尝试向服务器发送消息时，程序将停止抛出异常。

# ios - 在 iOS 中循环创建不同类的实例的最佳方法

> ID：14353761
> 
> 赞同：0
> 
> 时间：2013-01-16T08:04:39.847
> 
> 标签：ios, uiviewcontroller, instance

我有 3 个不同的 UIViewController，我想以最有效的方式为它们创建一个实例。现在我一个一个地创建它并且它可以工作，但我想可能可以在一个循环中创建所有它们，因为唯一的区别是类名和框架，但我不知道该怎么做。这是代码

```
Sub1ViewController *sub1 = [self.storyboard instantiateViewControllerWithIdentifier:@"Sub1"];
sub1.view.frame = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height);
[self.scrollViewMain addSubview:sub1.view];

Sub2ViewController *sub2 = [self.storyboard instantiateViewControllerWithIdentifier:@"Sub2"];
sub2.view.frame = CGRectMake(self.view.frame.size.width, 0, self.view.frame.size.width, self.view.frame.size.height);
[self.scrollViewMain addSubview:sub2.view];

Sub3ViewController *sub3 = [self.storyboard instantiateViewControllerWithIdentifier:@"Sub3"];
sub3.view.frame = CGRectMake(2*self.view.frame.size.width, 0, self.view.frame.size.width, self.view.frame.size.height);
[self.scrollViewMain addSubview:sub3.view]; 
```

你们如何认为这可能是一个更好的实现？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:27:47.470

```
- (void)myMethod
{
    [self addControllerWithID:@"Sub1" frame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
    [self addControllerWithID:@"Sub2" frame:CGRectMake(self.view.frame.size.width, 0, self.view.frame.size.width, self.view.frame.size.height)];
    [self addControllerWithID:@"Sub3" frame:CGRectMake(2*self.view.frame.size.width, 0, self.view.frame.size.width, self.view.frame.size.height)];
}

- (void)addControllerWithID:(NSString *)controllerID frame:(CGRect)frame
{
    UIViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:controllerID];
    controller.view.frame = frame;
    [self.scrollViewMain addSubview:controller.view];
} 
```

# javascript - 检测浏览器/设备是否支持双击事件

> ID：14353763
> 
> 赞同：5
> 
> 时间：2013-01-16T08:04:44.003
> 
> 标签：javascript, android, jquery, ios, mobile

我有一个包含多行的表。每一行都可以通过在行上单击一次来选择。双击该行会在同一窗口中打开该行所代表的数据表。

使用移动设备时，双击（双击？）不会触发我的双击事件，而移动浏览器只是缩放。

经过一番思考，我认为移动设备通过单击/点击打开数据表更有意义。

现在，在为表设置事件侦听器时，我正在使用以下代码检测它是否是移动设备浏览器：

```
if( /Android|webOS|iPhone|iPad/i.test(navigator.userAgent) ) {
    // Single click event bind, open
} else {
    // Single click event bind, select
    // Double click event bind, open
} 
```

与其依赖用户代理，我更愿意做一些特征检测，这样任何无法双击的设备都可以工作。

我尝试检测 dblclick 事件在我的 Android 设备上是否可用，并且确实如此。
我想这是有道理的，因为浏览器确实支持它，但设备只是在双击时触发不同的事件。

我唯一能想到的另一件事是检查`touchstart`等事件是否可用，但这似乎与检查用户代理一样错误。

有什么好方法可以检测浏览器/客户端是否按预期支持双击？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T08:14:52.623

也许尝试使用超时来检查第一次点击后是否有另一次点击

```
$(Elm).click(function(evnt){
  clicks++;
  if (clicks == 1) {
    setTimeout(function(){
      if(clicks == 1) 
        // Single click event bind, open
       else 
         // Double click event bind, open
    },2000);
}); 
```

# php - 在 PHP 内置的 Web 服务器中打印一些东西

> ID：14353767
> 
> 赞同：35
> 
> 时间：2013-01-16T08:04:58.350
> 
> 标签：php, embeddedwebserver

在 python 内置的 web 服务器中，`print`在函数中使用时，它会在终端中打印结果...

例如：

```
Django version 1.3.4, using settings 'parsicore.settings'
Development server is running at http://0.0.0.0:8000/
Using the Werkzeug debugger (http://werkzeug.pocoo.org/)
Quit the server with CONTROL-C.

127.0.0.1 - - [16/Jan/2013 02:02:08] "GET / HTTP/1.1" 200 -
hello ... print 1 2 3 
```

如何在 PHP 内置 Web 服务器中打印这样的内容？

例如我想在终端打印 $_POST 。我`php -S 127.0.0.1:3000`用于运行 PHP 内置 Web 服务器。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2015-04-17T01:07:58.153

只需将您的数据传输到 error_log()：

```
error_log(print_r($_REQUEST, true)); 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-01-16T08:30:58.343

[PHP 5.4+ 内置](http://php.net/manual/en/features.commandline.webserver.php)的开发 Web 服务器无法按您想要的方式工作。也就是说，它不是一个 PHP 进程，你不能让它为你运行代码。

它旨在为指定目录中的 PHP 应用程序和内容提供服务。服务器进程的输出是*访问日志*。您*可以*使用该函数写入日志[`error_log`](http://php.net/error_log)，值为 4 作为`message_type`. 所以，理论上，你可以做类似的事情

```
ob_start();
var_dump($_POST);
error_log(ob_get_clean(), 4); 
```

听起来您正在尝试执行一些调试。您应该使用[真正的调试工具](http://xdebug.org/)，而不是拼凑一些东西。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-02-27T11:27:23.680

php 内置服务器将输出写入`php://stdout`流，这意味着您可以向其输出任何内容，但这只能用于调试。

这是一个快速示例，说明如何实现写入服务器控制台的结果：

```
<?php declare(strict_types=1);

/**
 * This is for development purpose ONLY !
 */
final class ServerLogger {

    /**
     * send a log message to the STDOUT stream.
     *
     * @param array<int, mixed> $args
     *
     * @return void
     */
    public static function log(...$args): void {
        foreach ($args as $arg) {
            if (is_object($arg) || is_array($arg) || is_resource($arg)) {
                $output = print_r($arg, true);
            } else {
                $output = (string) $arg;
            }

            fwrite(STDOUT, $output . "\n");
         }
    }
}

// usage example : 
ServerLogger::log('Hello, world!');
// outputting an array : 
ServerLogger::log($_SERVER); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-31T13:30:02.160

```
<?php
// PHP 7.4 and up

define('STDOUT', fopen('php://stdout', 'w'));
fwrite(STDOUT, print_r($_REQUEST, true)); 
```

# python - 在 Django 代码中实现谷歌地图

> ID：14353770
> 
> 赞同：1
> 
> 时间：2013-01-16T08:05:11.000
> 
> 标签：python, django, json, google-maps, map

我必须在 django 中实现一个谷歌地图。基本上在那张地图中，我必须根据市场销售情况显示该地区。根据市场销售情况，我必须将拉链分成 5 个相等的组，即 1-20% 的销售额将是第一组，21-40% 的销售额将是第二组......就像这样。5组在显示时在地图上会有自己的颜色。

我有经度、纬度、数字多边形、销售百分比分组作为地图的输入

最好的方法应该是什么。有没有我可以继续使用的代码示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:10:13.523

我会考虑在客户端使用 Google Maps API。这不是一个真正的 Django 特定问题。您可以通过为客户端模板视图编写一些 javascript 来做到这一点，该视图使用您从网络服务器获得的经度、纬度等。看看这个问题：

[将 Google 地图添加到我的网站](https://stackoverflow.com/questions/2934405/how-can-i-add-google-my-maps-api-on-my-website)

您可以使用传入创建 html 页面的 render_to_response 调用的字典中的纬度/经度值填充模板。

# java - Android 膨胀布局 XML 文件创建运行时

> ID：14353771
> 
> 赞同：4
> 
> 时间：2013-01-16T08:05:20.133
> 
> 标签：java, android, xml, user-interface, layout-inflater

我计划创建我的 UI 运行时的 XML 布局（不像通常的 R.layout.* 文件），将它们保存到临时存储（在文件系统或 SQLite 中）。

阅读文档我发现令人困惑的声明`public View inflate (XmlPullParser parser, ViewGroup root)`：

> 重要 出于性能原因，视图膨胀在很大程度上依赖于在构建时完成的 XML 文件的预处理。因此，目前无法在运行时在纯 XML 文件上使用带有 XmlPullParser 的 LayoutInflater。

有人知道解决上述限制的方法吗？可能使用另一个视图膨胀程序或类似/不平行的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T08:43:50.890

这需要写下您自己的 Layout Inflater，它可以读取磁盘上的 XML 并从中构建布局。您可以遍历标签层次结构，根据每个标签的属性创建和添加视图等。但是与默认的 Android 实现相比，它会非常慢。

# c# - 将 XML 中的数据读入数组

> ID：14353775
> 
> 赞同：7
> 
> 时间：2013-01-16T08:05:42.253
> 
> 标签：c#, arrays, xml

我有一个 XML 文件，我在其中保存临时数据（索引和列名），如下所示：

```
-<NewDataSet> 
    -<USERROWCOL> 
          <COL>2</COL> 
          <Name>Name</Name> 
     </USERROWCOL> 
    -<USERROWCOL> 
          <COL>8</COL> 
          <Name>PDC</Name> 
     </USERROWCOL>
 <NewDataSet> 
```

我想`COL`使用 C# 读取数组中的所有 s，就像它是一个数组（`{2, 8}`）一样。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T08:11:54.650

这是一个 LINQ to XML 版本：

```
string[] arr = XDocument.Load(@"C:\xxx.xml").Descendants("Name")
                        .Select(element => element.Value).ToArray(); 
```

这将给出`Name`文档中的所有元素。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-16T08:07:25.133

LINQ to XML 使这变得非常简单：

```
var document = XDocument.Load("file.xml");
var array = document.Descendants("COL").Select(x => (int) x).ToArray(); 
```

假设您只想要文档中的*每个* `COL`元素，并且每个元素的值都是整数。

# background-image - 背景图像上的边框半径

> ID：14353777
> 
> 赞同：37
> 
> 时间：2013-01-16T08:05:44.693
> 
> 标签：background-image, css

可以加`border-radius`吗`background-image`？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-16T08:22:13.917

对的，这是可能的：

```
div {
  -webkit-border-radius: 50px;
  -moz-border-radius: 50px;
  border-radius: 50px;
  border: none;
  width: 500px;
  height: 335px;
  background: url(http://themescompany.com/wp-content/uploads/2012/02/6402.jpg);
} 
```

[单击此处进行演示。](http://jsfiddle.net/fbDZb/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T08:20:07.717

尝试这个

```
 div {
        border: 10px solid white;
       -moz-border-radius: 10px;
       background:url(map_background_box_right.png);
        } 
```

# java - Spring 3，Hibernate 4.1 Maven 3 教程？

> ID：14353780
> 
> 赞同：5
> 
> 时间：2013-01-16T08:05:59.483
> 
> 标签：java, spring, hibernate, maven, jpa

我在弄清楚如何配置我的项目以使用 Hibernate 时遇到了一些困难。我创建了一个使用 Spring 3.2 和 Maven 3 的简单 webapp。我一直在尝试找到一个关于如何将 Hibernate 4.1 合并到这个项目中的好教程，但似乎找不到。

我需要弄清楚如何配置我的 spring-servlet.xml 文件和我的 persistence.xml 文件（我想使用 JPA 规范来运行休眠。）

Hibernate 文档 [http://www.hibernate.org/docs](http://www.hibernate.org/docs) 似乎完全没有有用的信息。

[http://blog.springsource.org/2012/04/06/migrating-to-spring-3-1-and-hibernate-4-1/](http://blog.springsource.org/2012/04/06/migrating-to-spring-3-1-and-hibernate-4-1/) 看起来很有用。我尝试从那开始遵循 2.B，但它仍然没有解释如何设置persistence.xml，所以......

有人有什么好的建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T11:58:25.143

你可以在[这里](http://viralpatel.net/blogs/spring3-mvc-hibernate-maven-tutorial-eclipse-example/)找到一个很好的教程来从头开始使用 Hibernate Spring 和 Maven 框架。

[并且在同一网站](http://viralpatel.net/)上还有其他教程只是为了发现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:55:11.833

我曾经在这篇文章中实现过这个配置（Spring 3.1 + Hibernate 4）： [迁移到 Spring 3.1 和 Hibernate 4.1](http://blog.springsource.org/2012/04/06/migrating-to-spring-3-1-and-hibernate-4-1/)

做了一些小改动，它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T05:32:21.183

不确定...您面临的确切问题是什么...但是您看过这篇文章[http://www.cavalr.com/blog/Spring_3_and_Hibernate_4_Example](http://www.cavalr.com/blog/Spring_3_and_Hibernate_4_Example)吗，它专门讨论了 Spring 3 和 Hibernate 4 的集成以及文章中包含的示例代码使用 maven，因此它可能会有所帮助，并且该[站点](http://www.cavalr.com/blog/Spring_3_and_Annotation_Based_Hibernate_4_Example)上也有一个基于注释的集成示例。

# c# - 在 DataGridView C# 中存储长值

> ID：14353785
> 
> 赞同：0
> 
> 时间：2013-01-16T08:06:18.057
> 
> 标签：c#, datagridview

我有一个 DataGridView，它存储有关 hex 文件的信息。其中一个表行是一个块的原始十六进制数据。有时，它比 DataGridViewTextBoxCell.MaxInputLength 长（~90000），并且 DataGridView 不想让我将它存储在单元格中。我试图通过将其设置为 int.MaxValue 来避免它，但它似乎不起作用...... Cell 的值根本不显示（但调试显示它在那里，成功存储在单元格中。 ） 谁能帮我？

我的代码：

```
if (s.Length >= ((DataGridViewTextBoxCell) this.datagridviewChunks.Rows[this.datagridviewChunks.Rows.Count - 1].Cells[1]).MaxInputLength)
{
    ((DataGridViewTextBoxCell) this.datagridviewChunks.Rows[this.datagridviewChunks.Rows.Count - 1].Cells[1]).MaxInputLength = int.MaxValue;
    ((DataGridViewTextBoxCell) this.datagridviewChunks.Rows[this.datagridviewChunks.Rows.Count - 1].Cells[1]).Value = s;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:36:01.487

`DataGridViewCell`似乎有最大**43679 个**字符的显示限制，可能是由于渲染表单控件的性能影响而造成的预期限制。该值存储在属性内，但未显示。

我还发现了一个与 SQL Server Management Studio 相关的问题[SSMS - Can not paste more than 43679 characters from a column in Grid Mode](https://connect.microsoft.com/SQLServer/feedback/details/499608/ssms-can-not-paste-more-than-43679-characters-from-a-column-in-grid-mode)，可能是因为`DataGridView`该类正在产品中使用。

我建议您在表单上使用单独的`TextBox`代替，这​​样可以毫无问题地显示值。

# javascript - 类型将 jQuery 对象转换回未定义

> ID：14353796
> 
> 赞同：1
> 
> 时间：2013-01-16T08:07:35.413
> 
> 标签：javascript, jquery, null, undefined

我有一个关于 jQuery 的问题。我想知道是否可以将`typeconvert`jQuery 对象转换为`undefined`.

像这样：

```
alert(typeof $mobileMenu); // Return undefined
$mobileMenu = $('<ul id="mobile-menu"></ul>'); 
alert(typeof $mobileMenu);  // Return object
$mobileMenu = null;  // Here I want it to convert back to undefined.
alert(typeof $mobileMenu);  // This returns "object" but what I want is it to return "undefined" 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:09:57.130

```
$mobileMenu = null; 
```

改成

```
$mobileMenu = undefined; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:10:16.037

如果想要那个比你需要这样做

```
$mobileMenu= undefined; 
```

**null** - 它通常有意义并且行为类似于其他脚本语言的带外“null”、“nil”或“None”对象的概念。

因此，如果您愿意，设置`null`没有任何意义`undefined`。

**注意：**这里必须使用严格相等运算符而不是标准相等运算符，因为 x == undefined 也会检查 x 是否为空，而严格相等则不会。null 不等于未定义。

# ruby-on-rails-3 - 让 capybara/cucumber 和 poltergeist 与 twitter 引导模式对话框一起工作

> ID：14353799
> 
> 赞同：1
> 
> 时间：2013-01-16T08:07:47.163
> 
> 标签：ruby-on-rails-3, capybara, integration-testing, phantomjs, poltergeist

**背景：** 我正在使用 Cucumber/Capybara/PhantomJS/Poltergeist 测试一个 Rails 应用程序。我的黄瓜步骤定义文件之一中有一个 click_link 调用。然后这个 click_link 调用会导致 Rails 调用控制器的 show 方法。控制器通过特定 id 查找对象并以 javascript 格式 (format.js) 响应。show.js.erb 文件给出的响应然后在 Twitter Bootstrap 模式对话框上执行一些文本字符串替换，以在框中显示自定义状态消息。然后显示模态对话框。

这一切都在生产中起作用。但它似乎在测试中不起作用。我收到一条错误消息“找不到带有值或 id 或文本‘关闭’的按钮 (Capybara::ElementNotFound)”。此外， puts page.html 仅显示以下内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"> 
```

这让我觉得模态对话框根本没有显示出来。有人对发生了什么有任何想法吗？

**cucumber_steps.rb**

```
When /^I click this link$/ do

  click_link "Some link to call show method"

  puts page.html

end

And /^I click close button in the modal box$/ do

   click_button 'Close'

end 
```

**Twitter Bootstrap 模式框页面中的 HTML：**

```
<ul>
  <li><a href="/kites/24" data-remote="true">Some link to call show method</a></li>
</ul>
 :
 :
    <form>

<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

  <div class="modal-header">

    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>

    <h3 id="myModalLabel">Modal header</h3>

  </div>

  <div class="modal-body">

    <p>One fine body…&lt;/p>

  </div>

  <div class="modal-footer">

    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>

    <button class="btn btn-primary">Save changes</button>

  </div>

</div>

</form> 
```

**Rails 显示方法**

```
def show

    @kite = Kite.find(params[:id])

    respond_to do |format|

      format.js

    end

  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T23:26:28.900

## 关闭按钮错误

您收到错误是因为您正在使用`click_button "Close"`并且单击按钮未使用“关闭”作为其 ID 或文本： `<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>`

为了解决你要回来的错误，我会执行以下操作：

```
close_button = page.find('button.close')
click_button close_button 
```

## 一般问题

你遗漏了很多关于你的实现的细节，所以很难指出你哪里出错了。我要检查的第一件事是确保您在文件中[设置了 poltergeist](https://github.com/jonleighton/poltergeist#installation)`env.rb`

# php - 现有功能

> ID：14353801
> 
> 赞同：1
> 
> 时间：2013-01-16T08:08:00.263
> 
> 标签：php, oop

好的，我有一点 MVC 的工作原理

某个站点/类名/类函数/函数

```
class test(){
  public function test2(){
    // action will be 'function' in adress
    $action = $this->action ? $this->action : array($this, 'test3');
    function test3(){
      print 1;
    }
    $action();
  }
} 
```

所以，如果我们运行`somesite/test/test2/test3`它会打印 '1'，但如果我们运行`somesite/test/test2/phpinfo`它会显示 phpinfo。
问题：如何检查类函数中函数的存在？

**UPD**
不要忘记 phpinfo，function_exists 会显示它。method_exists在类函数中搜索，但不在类函数
**UPD的函数中搜索**

```
class test{
    public function test2(){
    // site/test/test2/test3
        $tmpAction = $this->parenter->actions[1]; // test3  
        $test3 = function(){
            print 1;
        };
        if(isset($$tmpAction)){
            $$tmpAction();
        }else{
            $this->someDafaultFunc();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:10:02.183

[http://php.net/function-exists](http://php.net/function-exists)

[http://php.net/method-exists](http://php.net/method-exists)

```
if ( function_exists('function_name') ) {
    // do something
}

if ( method_exists($obj, 'method_name') ) { /* */ } 
```

您还应该查看魔术方法[__call()](http://php.net/language.oop5.overloading#object.call)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T08:46:12.647

```
class test{
    public function test2(){
    // site/test/test2/test3
        $tmpAction = $this->parenter->actions[1]; // test3  
        $test3 = function(){
            print 1;
        };
        if(isset($$tmpAction)){
            $$tmpAction();
        }else{
            $this->someDafaultFunc();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T08:11:11.737

要检查某个类中的某个方法是否存在，请使用： http: [//php.net/method-exists](http://php.net/manual/en/function.method-exists.php)

```
 $c = new SomeClass();
   if (method_exists($c, "someMethod")) {
       $c->someMethod();
   } 
```

您还可以使用类名：

```
 if (method_exists("SomeClass", "someMethod")) {
       $c = new SomeClass();
       $c->someMethod();
   } 
```

要“解决”您的问题，请创建`test3()`一个类方法：

```
class test(){
  private function test3() {
      print 1;
  }
  public function test2(){
    // action will be 'function' in adress
    $action = $this->action ? $this->action : array($this, 'test3');

    if (method_exists($this, $action)) {
        $this->$action();
    } else {
        echo "Hey, you cannot call that!";
    }
  }
} 
```

# javascript - jQuery返回所有匹配的元素，需要通过方式判断被选元素

> ID：14353806
> 
> 赞同：1
> 
> 时间：2013-01-16T08:08:18.820
> 
> 标签：javascript, jquery, select, element

请帮助确定元素。

请查看我的示例[http://jsfiddle.net/fantill/DFd7e/](http://jsfiddle.net/fantill/DFd7e/)

我想`li`在第二级之后从所有人那里获得回报，但只选择了一个。

在 css 中应该是`ul ul li`.

我的问题是，如果我以上述方式编写，jquery 将返回所有匹配的元素，而不仅仅是我选择的那个。

要么 要么`$('#A').find('ul ul li')`是`$('#A ul ul li')`相同的结果。

通常`$(this)`将是选择的元素，但我不知道为什么它在这种情况下不起作用。

非常感谢您的建议和帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T08:16:34.043

我认为您正在寻找的是停止将事件传播到其祖先。

```
$('#A').find('ul ul li').click(function(e){ 
    alert($(this).html());
    e.stopPropagation(); 
}); 
```

[`event.stopPropagation`](http://api.jquery.com/event.stopPropagation/)

现场示例：http: [//jsfiddle.net/DFd7e/3/](http://jsfiddle.net/DFd7e/3/)

# ruby-on-rails - 来自两个表的 Rails Show 不起作用

> ID：14353808
> 
> 赞同：0
> 
> 时间：2013-01-16T08:08:23.843
> 
> 标签：ruby-on-rails, controller

我有两个模型，`Place`和`Address`。模型关系是，

在`Place`，`has_one :address , :dependent => :destroy` 在`Address`，`belongs_to :place`。

在新表单中，`Places Controller`我可以`Address`毫无问题地添加字段`fields_for :address`。

但是当显示一个`Place`细节时，我无法得到`Address`那个地方的细节。我不知道我在哪里做错了。

在`show.html.erb`中`Places Controller`，我有，

```
<% @places.each do |place| %>
<p>
 <b>Max people:</b>
 <%=h place.max_people %>
</p>

<p>
 <b>Street:</b>
 <%=h place.address.street %>
</p>
<p> City: </b>
 <%=h place.address.city %>
</p>
<p> Pincode: </b>
   <%=h place.pincode %>
</p>
<% end %> 
```

所以，在`PlacesController`，

```
def show
@userid=session[:userid]
@places = Place.find(:all , :conditions => ["user_id = ?", @userid])

respond_to do |format|
  format.html # show.html.erb
  format.xml  { render :xml => @place }
end
end 
```

它正确显示所有`Place`详细信息，但不显示`Address`详细信息。我已经通过 SO 搜索以找到我的错误，但我发现的只是表格问题。就我而言，新表单正常工作，但不显示。

错误是，

```
 NoMethodError in Places#show

 Showing app/views/places/show.html.erb where line #9 raised:

 undefined method `street' for nil:NilClass 
```

在控制台中，

```
 `Place.last.address.street` gives me correct data. 
```

我错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:14:01.223

确保所有人`places`都有一个地址对象。你可以避免使用异常`.try()`

```
<%=h place.address.try(:street) %>

<%=h place.address.try(:city) %> 
```

因此，如果`place.address`为 nil，则不会渲染任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:44:41.503

@Valery 是对的。所有地方都可能没有地址对象。

试试这个：

```
<% @places.each do |place| %>
    <% next unless place.address.present? %>
    <p>
        <b>Street:</b>
        <%= place.address.street %>
    </p>
<% end %> 
```

# generics - 谷歌人工智能挑战的重制，具有通用性

> ID：14353811
> 
> 赞同：1
> 
> 时间：2013-01-16T08:08:28.600
> 
> 标签：generics, bots, platform

我和我的一些朋友必须开发一些可以托管游戏的东西，由规则定义，客户端的机器人可以面对这些游戏。这是通用的，因为它允许使用另一组规则轻松更改游戏。

为了不从零开始，我们必须寻找可能看起来像我们的项目或项目的一部分的东西。除了谷歌挑战，我们一无所获。那可能是互联网指南、书籍、开源项目......

也许我的英语不够好，但我找不到导致我得到结果的关键词。“机器人”并不像我想的那么精确，因为它很少提及我正在寻找的那种机器人。“人工智能”并不重要。“通用平台”将我带到现有产品的销售中。

那么您对可以帮助我的文件和/或关键词有什么想法吗？

# hadoop - 为什么 DISTINCT 在 Pig 中比 GROUP BY/FOREACH 快

> ID：14353816
> 
> 赞同：1
> 
> 时间：2013-01-16T08:08:49.770
> 
> 标签：hadoop, mapreduce, apache-pig

我不知道为什么 DISTINCT 在 Pig 中比 GROUP BY/FOREACH 快，它们在 MapReduce 框架中应该是相同的，但请参阅：

```
http://pig.apache.org/docs/r0.10.0/perf.html#distinct 
```

Pig wiki 说：“要从关系中的列中提取唯一值，您可以使用 DISTINCT 或 GROUP BY/GENERATE。DISTINCT 是首选方法；它更快、更有效。”

为什么？实施方式是否不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:19:43.757

distinct 的输出是一个关系，它只包含你做不同的列，因此 Map 作业只输出指定列的值作为键，并且组合器最小化映射溢出输出，进一步减少 Reducer 的输入。Group By 的输出是一个“组”键元组和一个 Bag，其中包含与原始关系的所有列具有相同组键的所有元组，因此不使用组合器，并且 Map 阶段的输出更大，并且减速器有更多的输入。Pig 可以做一些优化，但不能保证。

# javascript - 处理 ajax 异步调用

> ID：14353822
> 
> 赞同：0
> 
> 时间：2013-01-16T08:09:41.653
> 
> 标签：javascript, ajax

与以下问题有关。

[调用javascript函数时为空变量](https://stackoverflow.com/questions/14300700/empty-variables-when-calling-javascript-function)

我正在寻求一些关于如何确保从 ajax 调用中获得所有结果的指导。

特别是，这一次的问题在于`getPublicIPAddress()`函数及其 ajax 调用。

```
function genericYiiLocation(callback) {

//console.log('genericYiiLocation: Creating location handler');

this.longitude=  '';
this.latitude=   '';
this.accuracy=   '';
this.publicIpAddress= '';

var me = this;

if (Modernizr.geolocation) {
    //console.log('genericYiiLocation: Location supported');
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(locateSuccess, locateFail);

    } else {
        alert('genericYiiLocation: Geolocation is not supported in your current browser.');
        callback(false);
    }
} else {
    alert ('genericYiiLocation: no native location support');
    callback(false);
}

GetPoo();

function GetPoo(getPublicIPAddress){
    console.log(this.accuracy);
}

function locateSuccess(loc){
    // console.log('genericYiiLocation: storing location data');
    me.longitude = loc.coords.longitude;
    me.latitude = loc.coords.latitude;
    me.accuracy = loc.coords.accuracy;

    callback(true, me);
}

// Unsuccessful geolocation
function locateFail(geoPositionError) {
    switch (geoPositionError.code) {
        case 0: // UNKNOWN_ERROR
            alert('An unknown error occurred, sorry');
            break;
        case 1: // PERMISSION_DENIED
            alert('Permission to use Geolocation was denied');
            break;
        case 2: // POSITION_UNAVAILABLE
            alert('Couldn\'t find you...');
            break;
        case 3: // TIMEOUT
            alert('The Geolocation request took too long and timed out');
            break;
        default:
    }
    callback(false, geoPositionError);
}

function getPublicIPAddress(callback)
{

    var ip;  
    $.ajax({
        type: 'GET',
        url: 'http://smart-ip.net/geoip-json?callback=?',
        dataType: 'json',
        async: true ,
        success: function(data) {
            ip = data.host;
            callback(false,ip);

        } 
    });

//callback();        

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:13:38.263

Ajax 中的“A”代表异步。这意味着 AJAX 调用会在一段时间后完成，并且您的 javascript 会继续执行。您将知道 AJAX 调用何时完成并且数据仅在完成事件中可用。

因此，您不能使用异步 AJAX 调用来获取一些数据，让您的 javascript 等待响应并且不再执行，获取响应然后继续执行。Javascript/异步 AJAX 不能那样工作。

相反，您必须重新构建代码的工作方式，以便发出 AJAX 调用，然后必须将需要 AJAX 调用响应的所有代码放入 AJAX 完成回调中。

所以，你不能这样做（在伪代码中）：

```
some code
var ipAddress = AJAX call to get the IP address
some code that uses the ipAddress 
```

相反，您必须像这样构建：

```
some code
AJAX call to get the ipAddress(function(data) {
    // completion callback
    code that uses the response from the AJAX call
})
no code here that relies on the AJAX response because it hasn't happened yet 
```

# c++ - 枚举值在 C++ 中是相同的

> ID：14353823
> 
> 赞同：-5
> 
> 时间：2013-01-16T08:09:42.980
> 
> 标签：c++, enums

我在课堂上有这个枚举声明：

```
const enum METHODS{

    Write,
    Save,
    Update,
    Delete

}; 
```

但是当我检索我的枚举值时；我得到`-842150451`了所有方法的这个值。

它应该是 0,1,2,3 对吧？

请帮我解决这个问题。

我将我的枚举值放入 `map<LPCTSTR, long> m_methodMap`

`m_methodMap[_T("Save")] = Save;` `same with other methods`

我这样检索它：

`cout << "Values " << m_methodMap.find(sMethodName)->second; // where sMethodName is the methods`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T08:29:56.440

`std::map<LPCTSTR, long>`是垃圾。`LPCTSTR`是一个 typedef to `char*`(or `wchar_t*`)，这意味着映射根据**指针**的值来比较键，而不是存储在其中的字符串。你可能的意思是`std::map<std::basic_string<TCHAR>, METHODS>`。不要在 C++ 中使用 C 数据结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T08:49:18.337

正如 Angew 指出的那样，您可能的意思是：`std::map<std::basic_string<TCHAR>, METHODS>.`您最好不要在这里使用 C 风格的字符串。但是，如果您确定 sMethodName 可能恰好包含您用于构建地图的指针之一，您仍然需要测试是否真的找到`find`了它（不要返回`.end()`）并且只需要使用`->second`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T08:24:57.510

所以你的地图返回一个未初始化的值..它与枚举无关。

# sql - Group Count 和 Total Count 的 SQL 语句

> ID：14353831
> 
> 赞同：0
> 
> 时间：2013-01-16T08:10:12.507
> 
> 标签：sql, oracle

给出以下测试数据：

```
╔═════════╦══════╦═══════╗
║ STUDENT ║ TEST ║ SCORE ║
╠═════════╬══════╬═══════╣
║ Henry   ║    1 ║    80 ║
║ Henry   ║    2 ║    70 ║
║ Henry   ║    3 ║    50 ║
║ Mark    ║    1 ║    60 ║
║ Mark    ║    2 ║    90 ║
║ Mark    ║    3 ║    70 ║
║ Frank   ║    1 ║    80 ║
║ Frank   ║    2 ║    70 ║
║ Frank   ║    3 ║    80 ║
╚═════════╩══════╩═══════╝ 
```

现在我很想看看每个学生获得了多少次 80 分，旁边是 80 分。像这样：

```
╔═════════╦════════════╦══════════════╗
║ STUDENT ║ OWN_80_CNT ║ TOTAL_80_CNT ║
╠═════════╬════════════╬══════════════╣
║ Frank   ║          2 ║            3 ║
║ Mark    ║          0 ║            3 ║
║ Henry   ║          1 ║            3 ║
╚═════════╩════════════╩══════════════╝ 
```

到目前为止，我拥有的是 own_80_cnt。但我不知道如何在它旁边添加total_80_cnt。

```
SELECT  student,
        SUM(CASE WHEN score = 80 THEN 1 ELSE 0 END) AS own_80_cnt
FROM    mytable 
GROUP BY student; 
```

这甚至可以在一个 SELECT 语句中实现吗（首选）？DBMS 是甲骨文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:12:05.270

添加一个内联子查询，分别获得等于 80 的分数。

```
SELECT  student,
        SUM(CASE WHEN score = 80 THEN 1 ELSE 0 END) AS own_80_cnt,
        (SELECT COUNT(*) FROM myTable WHERE score = 80) AS total_80_cnt
FROM    mytable 
GROUP BY student; 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!4/c0ff4/10)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:21:50.777

你可以通过分析来做到这一点：

```
select student, own_80_cnt,
       sum(own_80_cnt) over () total_80_cnt
  from (select student,
               sum(case when score = 80 then 1 else 0 end) as own_80_cnt
          from mytable
         group by student); 
```

# c# - WP 7 Listbox Item 单元格的单击事件

> ID：14353834
> 
> 赞同：1
> 
> 时间：2013-01-16T08:10:27.043
> 
> 标签：c#, windows-phone-7

我将项目添加到列表框中。现在我想单击每个单元格并移动到不同的页面。

如何识别列表中的选定单元格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:19:03.317

您应该在 click 事件处理程序中使用 sender。

```
YourItemType _sender = sender as YourItemType; 
```

然后，您可以找出它到底是什么项目。你的项目有一些独特的领域吗？用它。

```
if (_sender.uniqueValue == something)
{
   NavigationService.Navigate(...)
} 
```

# cocos2d-iphone - Sprite 周围有一个空白边框

> ID：14353837
> 
> 赞同：0
> 
> 时间：2013-01-16T08:10:32.070
> 
> 标签：cocos2d-iphone

我的代码中有一个背景精灵。然后我在上面添加了一个子精灵。但是当子精灵运行一个 CCTwirl 动作（包括其他 CCGridAction）时，精灵周围有一个黑色边框。我想知道如何摆脱空白边框？子精灵不是全屏的。谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:22:26.100

CCTwirl 和 CCLiquid 是“3D”效果，继承自 CCGrid3DAction。如果您想在游戏中使用任何此类“3D”效果，例如动作或过渡，您可能必须启用 3D 投影（cocos2d 2.x 默认为 2D 投影）。

您可以通过 CCDirector 属性更改投影`projection`。

# hadoop - mapreduce 排序和洗牌是如何工作的？

> ID：14353842
> 
> 赞同：4
> 
> 时间：2013-01-16T08:11:04.910
> 
> 标签：hadoop, mapreduce, mrjob

我正在使用 yelps MRJob 库来实现 map-reduce 功能。我知道 map reduce 有一个内部排序和洗牌算法，它根据它们的键对值进行排序。所以如果我在地图阶段之后有以下结果

```
(1, 24) (4, 25) (3, 26) 
```

我知道排序和洗牌阶段会产生以下输出

```
(1, 24) (3, 26) (4, 25) 
```

正如预期的那样

但是，如果我有两个相似的键和不同的值，为什么 sort 和 shuffle 阶段会根据出现的第一个值对数据进行排序？

例如，如果我有以下来自映射器的值列表

```
(2, <25, 26>) (1, <24, 23>) (1, <23, 24>) 
```

预期的输出是

```
(1, <24, 23>) (1, <23, 24>) (2, <25, 26>) 
```

但我得到的输出是

```
(1, <23, 24>) (1, <24, 23>) (2, <25, 26>) 
```

这个 MRjob 库是特定的吗？反正有没有停止这种基于价值的排序？

**代码**

```
from mrjob.job import MRJob
import math

class SortMR(MRJob):

def steps(self):
    return [
        self.mr(mapper=self.rangemr,
                reducer=self.rangesort)]

def rangemr(self, key, line):
    for a in line.split():
        yield 1,a

def rangesort(self,numid,line):
    for a in line:
        yield(1, a)

if __name__ == '__main__':
    SortMR.run() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T12:12:32.773

对值进行“排序”的唯一方法是使用包含值本身的一些信息的复合键。然后，您的键的 compareTo 方法可以确保键首先按实际键组件排序，然后按值组件排序。最后，您需要一个组分区器，以确保在 reducer 中，所有具有相同“键”组件（实际键）的键都被认为是相等的，并且在一次调用 reduce 方法中迭代相关值。

这被称为“二级排序”，与此类[似的问题](https://stackoverflow.com/questions/14320313/mapreduce-sort-values)提供了一些示例链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T06:38:14.013

本地 MRjob 仅在映射器输出上使用操作系统“排序”。

映射器以以下格式写出：

key<-tab->value\n

因此，您最终会得到主要按键排序的键，其次是按值排序的键。

如前所述，这不会发生在真正的 hadoop 版本中，只是“本地”模拟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T08:33:08.840

sort & shuffle 阶段不保证 reducer 为给定键获取的值的顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T10:42:42.147

hadoop 中的排序是基于键的，因此它不能保证值的顺序。

# oauth - oauth 的用例

> ID：14353844
> 
> 赞同：0
> 
> 时间：2013-01-16T08:11:08.797
> 
> 标签：oauth

我正在为我的客户寻找一种解决方案来访问我们的应用程序，而无需实际登录到我们的应用程序（从用户的角度来看）。

这是流程。

1.  用户登录到客户端应用程序 APP1。

2.  用户单击 APP1 中的链接，该链接应将用户带到我们的应用程序 APP2。

3.  APP2 应验证用户详细信息，如果用户在我们的数据库中不可用，则创建用户并转发到请求的资源。**注意此时没有APP1，APP2会接管UI。**

4.  用户可以单击 APP2 中的链接，该链接应将用户带回 APP1。

我们可以使用 OAuth 实现这一点吗？我所看到的所有实现都是这样的，用户将在两个应用程序中都有帐户，并且单击链接 APP2 将提供授权机制。一旦授权 APP1 向 APP2 请求资源。

我们的应用程序基于 Java/Spring。而且我对APP1没有任何控制权。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:30:18.437

> 方法 1（复杂）

APP2 将执行 OAuth 服务器 APP1 将根据 APP2 生成的令牌在用户提供对 APP1 的访问权限的成功验证和确认后执行身份验证和授权

> 方法二

实施单点登录

其中 APP2 向请求添加 Authentication&Authorization 标头 APP1 将始终在处理请求之前查找该标头，如果没有此类标头，则将用户重定向到 APP2 身份验证屏幕，并使用 redirect_url 作为参数。

# multithreading - 静态类及其成员线程安全吗？[在 C#.NET 中]

> ID：14353845
> 
> 赞同：0
> 
> 时间：2013-01-16T08:11:08.810
> 
> 标签：multithreading, thread-safety

静态类及其成员的线程安全： - 静态类中的所有成员都是线程安全的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:20:21.090

静态构造函数是线程安全的——它们保证在每个应用程序域只运行一次，在创建任何类的实例或访问任何静态成员之前。

其他静态方法本身不是线程安全的，CLR 在这方面不区分静态方法和实例方法。

但是，如果一个方法不访问其他线程可见的任何数据或发布此类数据，则可以认为它是线程安全的。它适用于静态和实例方法。否则，您需要添加显式同步以使访问共享数据线程安全。

# javascript - 使用 $_Get 参数的 jQuery 提交不起作用

> ID：14353848
> 
> 赞同：0
> 
> 时间：2013-01-16T08:11:14.467
> 
> 标签：javascript, jquery

嗨，我在这里有一个表格：

```
<form method="post" name="work_form" action="<?php echo $link; ?>" 
```

一切正常，我有一个单独的 jQuery，它也将执行相同的提交，我一直在阅读 SOF，似乎我可以做这样的事情：

```
var action="activity.php?view&pid=1044&hash=bab54ffd80cc30083ffee373141a4926"; //same as php $link value//
$("form:work_form").attr('action', action).submit(); 
```

这是假设模拟提交。我在这里遇到问题，当我从通常情况下进行正常提交时

```
<input type="submit" name="submit" value="Submit" class="submit" /> 
```

没关系，但如果我从 jQuery 触发它，我只会得到这个

```
http://www.myurl.com//activity.php? 
```

$_Get 前缀未通过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:15:28.380

在我看来，您的操作似乎正在被覆盖，但不是参数，因为您缺少“？” 符号。

尝试：

```
var action="?view&pid=1044&hash=bab54ffd80cc30083ffee373141a4926"; //same as php $link value//
$("form[name='work_form']").attr('action',action).submit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:27:39.437

我找不到原因，所以最后我模拟了实际的提交按钮点击：

```
$('#work_form_save').click(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T08:59:09.000

@user1934737 我没有尝试过您的代码，但从第一个实例中我看到您的表单方法是“POST”并且您正在 jquery 中尝试 $_GET。如果您将表单方法更改为“GET”，它会显示同样的问题吗？

# php - 动态 Facebook 元标签 (og:image, og:url)

> ID：14353851
> 
> 赞同：0
> 
> 时间：2013-01-16T08:11:20.907
> 
> 标签：php, javascript, html, facebook, meta

我有问题。

我想动态地更改 facebook 元标记中的内容属性以获取点赞按钮。在其他线程中，我了解到，一旦加载页面，就不可能使用 javascript 或 jquery 属性更改元标记。

我的想法是将 Facebook 之类的按钮放在 iframe 中。在这个框架中，我想定义自己的元标记。此元标记由 php $_GET 变量操纵，这些变量通过操纵 iframe 内容的 javascript 发送。

但它不起作用..

简单解释：[index.php]

```
<html>
 <head>
   <title>RandomPage</title>
 </head>
 <body>
  <iframe id="fb" src="fb.php">
  <iframe>
  <input type="submit" onclick="changelikebutton();" />
  <script type="text/JavaScript">
   function changelikebutton(){
     document.getElementById('fb').src = 'fb.php?l=5';
   }
  <script>
 </body>
<html> 
```

[fb.php]

```
<html>
 <head>
  <meta property="og:image" content="RandomPage.com/<?php echo $_GET['l']; ?>.jpg" >
 </head>
 <body>
  <facebook script code und id >
  <div id="code für fb like button">
 </body>
<html> 
```

这不是原始代码，但它应该解释我的想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:54:03.530

你在正确的轨道上。只需为每个赞按钮提供一个唯一的 URL。URL 可以具有相同的域，但添加一些查询参数以使其唯一。

```
<div class="fb-like" data-href="http://yourdomain.com/fb_meta.php?id=1" data-send="false" data-width="450" data-show-faces="true"></div> 
```

当用户点赞时，会为与该按钮关联的绝对 URL 生成一个赞。该协会通常会在 Facebook 上生成故事。如果朋友决定点击该故事，他们将被重定向到相关的 URL。这就是您的元标记页面将派上用场的地方。

为此，创建一个带有基本 HTML 的 fb_meta.php 页面，并放入您需要的任何打开的图形标签。可以在[此处](http://davidwalsh.name/facebook-meta-tags)和[此处](http://ogp.me/)找到有关开放图形标签的更多信息。您可以使用附加到 URL 上的查询参数 (id) 动态生成开放图形标签的内容，以使其独一无二。

简单地说，您可以使用 $_GET['id'] 提取 id，然后调用您的数据库、数组或其他任何东西来获取元标记的内容。

最好将一个简单的 javascript 重定向回您的主站点或您喜欢按钮所在的页面，这样用户就不会卡在空白页面上。在 fb_meta.php 文件的正文标签中，输入：

```
<script>window.location = 'http://yourdomain.com';</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:25:28.247

我相信仅仅改变 src 属性是不够的。我认为您应该重新加载 iframe 内容。这是一个很好的解决方案：[动态更改 iframe 的内容](https://stackoverflow.com/questions/10953458/dynamically-change-iframes-content)

# javascript - 单页应用程序版本控制

> ID：14353854
> 
> 赞同：1
> 
> 时间：2013-01-16T08:11:22.363
> 
> 标签：javascript, caching, version, versioning, single-page-application

让用户使用最新版本的**单页应用程序**的最佳方法是什么？如何确保用户不必按**ctrl+F5**来获取最新的页面资源**(JS+CSS)**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:13:21.937

使用构建器编号为对静态文件的所有引用添加前缀。

而不是`/js/app.js`你应该指向`/js/123/app.js`123 是内部版本号。

在每次部署时，增加内部版本号。

然后你需要做一些重写，以便服务器`app.js`在路径中找到假文件夹。

当然，静态文件不会重新加载，直到有人关闭浏览器并再次访问该页面或按 F5）。

要解决这个问题，可以使用 AJAX 请求`app.js`，看看是否被修改：

```
$.ajax({
    type:"GET",
    url:'/js/123/app.js',
    cache:true,
    ifModified:true,                  
    success:function(data,textStatus,jqXHR){
        console.debug(data);     // Returns undefined when response is 304 Not Modified
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T08:16:02.930

这是我的解决方案：

PHP：

```
ob_start(function($data) {
    return preg_replace_callback(
        "(/(?:js|css|img)/.*?\.(?:js|css|png|jpg|gif))",
        function($m) {
            if( file_exists(substr($m[0],1))) return $m[0]."/t=".filemtime(substr($m[0],1));
            else return $m[0];
        },
        str_replace(array_keys($rep),array_values($rep),$data)
    );
}); 
```

.ht 访问：

```
RewriteRule (.*)/t=[0-9]+$ /$1 
```

这会自动为所有图像、样式和脚本附加一个特定的时间戳：它的修改时间。然后，`.htaccess`再次将其剥离。

这意味着无论何时更新这些文件之一，缓存的版本都会立即有效地失效。经测试可在所有浏览器中完美运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-30T18:40:24.143

使用内部版本号为静态内容折叠添加前缀是一种很好的方法。为了确保他们总是在构建后获取最新的，您需要将该技术与一个服务器端标签结合起来，该标签呈现 html 和静态内容的位置，并考虑构建号。当然，如果你正在做一个 100% 的角度范式，那么就没有服务器端标签之类的东西，所以你需要违反解决方案的纯度，并有一个用户在登录后登陆的 jsp 页面或类似的东西（欢迎page），然后引用您的静态内容。然后，如果您愿意，您可以在那里结束您的服务器端代码并​​从那时起生活在纯静态布局世界中。

# php - 读取图像尺寸：exif vs gd vs imagemagick？

> ID：14353856
> 
> 赞同：1
> 
> 时间：2013-01-16T08:11:44.777
> 
> 标签：php, image-processing, gd, exif, imagick

imagick 已经完成了处理。

但是我们已经处理了一堆文件，并且在一种方法中只想提取它们的宽度/高度。

据我了解，Imagick to getImageWidth 读取整个文件并将其加载到其内部结构中。

我想知道——exif 或 gd 是否有一些更轻量级的方法来仅获取图像的宽度/高度。

// 可以信任 exif meta

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T08:49:45.630

我刚刚对**127 张 PNG 图像**进行了基准测试。似乎**GD是**GD和Imagick中最快的。如果您只想使用 ImageMagick，`pingImage`请先加载文件并检索宽度和高度。这是 IM 方法中最快的。但仍然比GD慢3倍。

```
+------------------------------------+---------------------------+
| Script/Task name                   | Execution time in seconds |
+------------------------------------+---------------------------+
| GD                                 | 0.010726928710938         |
| IM Multiple Instance               | 1.9311830997467           |
| IM Single Instance                 | 2.0554959774017           |
| IM Single Instance identifyImage   | 1.4270191192627           |
| IM Single Instance pingImage       | 0.036259889602661         |
| imagedimension-exif-gd-imagick.php | 5.467                     |
+------------------------------------+---------------------------+ 
```

ImageMagic 多实例意味着为不同的图像初始化不同的实例

```
foreach($pngs as $png){
    $im = new Imagick($png);
    list($width, $height) =array($im->getimagewidth(), $im->getimageheight());
} 
```

ImageMagic Single Instance 意味着使用 Imagick 的单个可迭代实例

```
$images =  new \Imagick($pngs);
foreach($images as $im){
    list($width, $height) =array($im->getimagewidth(), $im->getimageheight());
} 
```

ImageMagick Single Instance pingImage 表示使用加载后获取维度`pingImage`

```
$im = new Imagick();
foreach($pngs as $png){
    $im->pingImage($png);
    list($width, $height) =array($im->getimagewidth(), $im->getimageheight());
} 
```

ImageMagick Single Instance identifyImage 表示加载后识别图像`pingImage();`

```
$im = new Imagick();
foreach($pngs as $png){
    $im->pingImage($png);
    $im_info = $im->identifyImage();
    extract($im_info['geometry']);
    //echo $width. "x$height\n";
} 
```

最后是GD，

```
foreach($pngs as $png) {
    list($width, $height) = getimagesize ($png);
} 
```

* * *

**注意：** Exif 扩展无法获取[图片尺寸](http://php.net/manual/en/function.exif-read-data.php)。这是用 PHP 手册编写的，

> ***高度***和***宽度***的计算方式与*getimagesize()*的计算方式相同，因此它们的值不能是返回的任何标头的一部分。此外， ***html***是在普通 HTML 中使用的高度/宽度文本字符串。

# java - onActivityResult 无法正常工作

> ID：14353860
> 
> 赞同：0
> 
> 时间：2013-01-16T08:11:54.953
> 
> 标签：java, android, android-intent, start-activity

我有一个活动 1，它将意图发送到活动 2，如下所示：

**活动一**

```
periodDatetv.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                Intent i = new Intent(Settings.this, SettingsPeriodDate.class);
                startActivityForResult(i, 100);
            }
        }); 
```

**活动二**

```
@Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        todayCalendar = new GregorianCalendar();
        pickedDateCalendar = new GregorianCalendar();
        final Dialog dialog = new Dialog(SettingsPeriodDate.this);
        dialog.setContentView(R.layout.perioddatesettings);

        datePicker = (DatePicker) dialog.findViewById(R.id.DataPickerDate);

        dialog.show();

        Button okDialogButton = (Button) dialog
                .findViewById(R.id.dialogButtonOK);

        // if button is clicked, close the custom dialog
        okDialogButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                Calendar c = Calendar.getInstance();
                int currentYear = c.get(Calendar.YEAR);
                int currentMonth = c.get(Calendar.MONTH) + 1;
                int currentDay = c.get(Calendar.DAY_OF_MONTH);

                Day = datePicker.getDayOfMonth();
                Month = datePicker.getMonth() + 1;
                Year = datePicker.getYear();

                todayCalendar.set(currentYear, currentMonth, currentDay);
                pickedDateCalendar.set(Year, Month, Day);

                System.err.println("Choseon date = " + Day + "/" + Month + "/"
                        + Year);
                System.err.println("Today date = " + currentDay + "/"
                        + currentMonth + "/" + currentYear);

                int Days = daysBetween(todayCalendar.getTime(),
                        pickedDateCalendar.getTime());

                System.err.println("Daaaaays === " + Days);

                if (pickedDateCalendar.after(todayCalendar) || Days >= 1) {
                    System.err.println("Inside if pop it");
                    PopIt("Error ", "Please check the date again");

                }

                else {

                    periodDateSharedPreferences(Year, Month, Day);

                }
                dialog.dismiss();
                System.err.println("befor back");
                Intent saved2 = new Intent(SettingsPeriodDate.this,
                        Settings.class);
                startActivityForResult(saved2, 100);

            }

        });

        Button cancelDialogButton = (Button) dialog
                .findViewById(R.id.dialogButtonCancel);
        // if button is clicked, close the custom dialog
        cancelDialogButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                dialog.dismiss();
                Intent i = new Intent(SettingsPeriodDate.this,Settings.class);
                startActivity(i);
            }
        });

    }

    public int daysBetween(Date d1, Date d2) {
        return (int) ((d2.getTime() - d1.getTime()) / (1000 * 60 * 60 * 24));
    }

    public void periodDateSharedPreferences(int calculatedPeriodYear,
            int calculatedPeriodMonth, int calculatedPeriodDay) {
        SharedPreferences periodDatePreferences = PreferenceManager
                .getDefaultSharedPreferences(this);
        SharedPreferences.Editor editor = periodDatePreferences.edit();
        editor.putInt("periodChosenDay", calculatedPeriodDay);
        editor.putInt("periodChosenMonth", calculatedPeriodMonth);
        editor.putInt("periodChosenYear", calculatedPeriodYear);
        editor.commit();

        System.err.println("periodChosenDay preferences"
                + periodDatePreferences.getInt("periodChosenDay", 0));
        System.err.println("periodChosenMonth preferences"
                + periodDatePreferences.getInt("periodChosenMonth", 0));
        System.err.println("periodChosenYear preferences"
                + periodDatePreferences.getInt("periodChosenYear", 0));
        Toast.makeText(SettingsPeriodDate.this, "The date was saved",
                Toast.LENGTH_LONG).show();

        finish();
    }

    public void PopIt(String title, String message) {

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("Error");
        builder.setMessage("Please check again");
        builder.setCancelable(true);

        final AlertDialog dlg = builder.create();

        dlg.show();

        final Timer t = new Timer();
        t.schedule(new TimerTask() {
            public void run() {
                dlg.dismiss();
                t.cancel();
            }
        }, 100000);
    } 
```

我在***活动 1***中得到如下结果：

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        switch (requestCode) {
        case 100:
            System.err.println("after intent back 111111=== ");

             if (resultCode == Activity.RESULT_OK) {
            System.err.println("after intent back if=== ");

            int day = data.getIntExtra("Day", 0);
            int month = data.getIntExtra("Month", 0);
            int year = data.getIntExtra("Year", 0);
            System.err.println("after intent back =///== " + day + "-" + month
                    + "-" + year);
            Toast.makeText(Settings.this,day+"?"+month+"?"+year,Toast.LENGTH_SHORT).show();
            periodDatetv.setText(day + "/" + month + "/" + year);
            break;

         }

        }
    } 
```

但它从不运行 onActivityResult 方法！我的代码有什么问题？请告诉我..提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:16:01.890

在第二个活动中使用`setResult(RESULT_OK);`before方法`finish()`

从您想要的第二个活动应该将一些结果返回到第一个活动

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T08:21:04.167

`setResult()`您在活动 2 中注释掉了您的呼叫。

如果您使用 开始活动`startActivityForResult()`，则您开始的活动（在您的情况下为活动 2）需要在`setResult()`每次即将完成时调用。

看这个例子：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.blablabla)

    //we do this here to make sure result is set even if user leaves
    //activity, for example, by pressing back/home buttons
    //result we set here will be overridden by any latter calls if they occur
    setResult(RESULT_CANCELED);         

    //do some processing here
    Intent intent=new Intent();
    //now let's send the result back
    intent.putExtra(result);
    setResult(RESULT_OK, intent);
    finish();
}

private void another_method() {
    //do some processing here too
    Intent intent=new Intent();
    //sending the result back
    intent.putExtra(result);
    //need to call setResult() here too
    setResult(RESULT_OK, intent);
    finish();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T08:43:58.987

这里的问题是你`SettingsPeriodDate`从开始`Settings`，然后`Settings`从`SettingsPeriodDate`.

您不应该再次启动设置。就在你的工作`setResult()`完成时`finish()``SettingsPeriodDate`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T08:22:59.297

在完成活动之前打电话`setResult(RESULT_OK)`。我在你的代码中找不到它。您不再设置结果，而是再次调用该活动。所以它会创建新的活动。不要以活动 1 的意图调用新活动。

# ruby-on-rails-3 - 设计 - 更改密码不起作用 - 而是将用户注销

> ID：14353866
> 
> 赞同：0
> 
> 时间：2013-01-16T08:12:25.267
> 
> 标签：ruby-on-rails-3, devise

我正在制作一个自定义密码编辑表单，我只更改密码。这是我的用户控制器代码：

```
 def change_my_password
    @user = User.find(current_user.id)
  end

  def update_my_password
    @user = User.find(current_user.id)
    #raise @user.inspect
    if @user.update_with_password(params[:user])
      sign_in @user, :bypass => true
      redirect_to users_path, :notice => "Password updated."
    else
      sign_in @user, :bypass => true
      render action: "change_my_password", :alert => "Unable to update user."
    end
  end 
```

这是我的用户模型

```
class User < ActiveRecord::Base
  rolify
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable, :registerable,
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :role_ids, :password, :password_confirmation, :username, :name, :email, :as => :admin
  attr_accessible :password, :password_confirmation, :username, :name, :email, :remember_me

  #attr_protected :username, :name, :email, :remember_me, :password, :password_confirmation

  validates_uniqueness_of :username
  validates_presence_of :username, :email

  validates_uniqueness_of :email
end 
```

这是我的更改密码表格

```
= simple_form_for(@user, :url=>update_my_password_user_path(@user), :html => { :method => :put, :class => 'form-vertical' }) do |f|
  = f.error_notification
  = display_base_errors @user
  = f.input :password, :autocomplete => "off", :required => true
  = f.input :password_confirmation, :required => true
  = f.input :current_password, :hint => "we need your current password to confirm your changes", :required => true
  = f.button :submit, 'Update', :class => 'btn-primary'
= link_to "Back", :back 
```

一切似乎都很好，但发生的情况是 - 如果我输入了错误的密码确认，则会提示我输入错误，但是当我再次提交表单时，我已退出并且密码不会更改。在我第一次提交表单以更改密码并确认密码错误时，它会从日志中将我注销。我不明白我哪里出错了 - 我什至输入了 sign_in 用户以避免必须退出，但它仍然无法正常工作。我在这里哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:43:02.900

使用`post`方法而不是`put`在路线中并查看如下 -

**路线.rb** -

```
resources "users" do
    collection do
      get 'change_my_password'
      post 'update_my_password'
    end
  end 
```

**change_my_password.html.erb** -

```
 <%= form_for(@user, :url => { :action => "update_my_password" }, :html => {:method => "post"}) do |f| %>

  <%= f.text_field :password, :autocomplete => "off", :required => true %>
  <%= f.text_field :password_confirmation, :required => true %>
  <%= f.text_field :current_password, :hint => "we need your current password to confirm your changes", :required => true %>
  <%= f.submit 'Update', :class => 'btn-primary' %>
<%= link_to "Back", :back %>

<% end %> 
```

这对我来说没有问题。

干杯!

# objective-c - Autocepstrum 加速框架

> ID：14353869
> 
> 赞同：2
> 
> 时间：2013-01-16T08:12:34.253
> 
> 标签：objective-c, fft, accelerate-framework

如何使用加速框架进行自倒谱（倒谱 + 自相关）分析？有没有示例代码或项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-17T18:35:12.967

自倒谱是自相关的倒谱。

我在这里解释如何进行自动关联：

[自相关倒谱](https://stackoverflow.com/questions/22305359/auto-correlating-the-cepstrum/22420998#22420998)

要计算倒谱，您将执行以下操作：

1.  执行自相关上半部分的 FFT。
2.  取每个复杂元素的绝对值 (r^2 + i^2)。
3.  记录每个元素的日志。
4.  执行逆 FFT。

现在有趣的是，执行自相关的方法之一是通过 FFT，如下所示：

1.  用 0 将数据填充到其长度的两倍。
2.  执行 FFT。
3.  将每个元素与自身的共轭相乘。
4.  执行逆 FFT。

这引入了一个有趣的优化，即自动相关计算的最终 IFFT 和倒谱的第一个 FFT 可以被消除。

IE

1.  用 0 将数据填充到其长度的两倍。
2.  执行 FFT。
3.  将每个元素与自身的共轭相乘。
4.  取每个复杂元素的绝对值 (r^2 + i^2)。
5.  记录每个元素的日志。
6.  执行逆 FFT。

# jbpm - JBPM 5.4 - 暂停/保留人工任务

> ID：14353870
> 
> 赞同：3
> 
> 时间：2013-01-16T08:12:36.750
> 
> 标签：jbpm

我有要求让用户与他“**持有**”案例/流程实例。我可以将保持状态与人工任务生命周期的“暂停”状态进行比较。

TaskClient.suspend **()**只是获取任务 ID 并传输它的状态。

但我也需要更新任务表日期。

我不知道该怎么做。

我打算显式调用**TaskClient.setDocumentContent()**并保存数据，然后调用**TaskClient.suspend()。**

这是一个正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-15T09:50:59.320

好吧，你能澄清一下暂停任务会发生什么吗？表单和任务是 jbpm 中分离的组件。如果您查看 jbpm 控制台 ng，该任务处于冻结状态，而它处于与进行中不同的状态，因此如果您将状态更改为另一个状态，它将冻结表单。那对你有用吗？

# javascript - Javascript 显示/隐藏带有 iframe 的 div 可在除 IE 之外的所有应用程序中使用

> ID：14353878
> 
> 赞同：4
> 
> 时间：2013-01-16T08:13:44.107
> 
> 标签：javascript, jquery, ajax, html, iframe

这是`javascript`我目前正在使用的代码：

```
 function toggleContainer(containerID, hideContainerIDs) {
            if(hideContainerIDs) {
                for(var i=0; i<hideContainerIDs.length; i++) {
                    ajaxChat.showHide(hideContainerIDs[i], 'none'); 
                }
            }       
            ajaxChat.showHide(containerID);
            if(typeof arguments.callee.styleProperty == 'undefined') {
                if(typeof isIElt7 != 'undefined') {
                    arguments.callee.styleProperty = 'marginRight';
                } else {
                    arguments.callee.styleProperty = 'right';
                }
            }
            var containerWidth = document.getElementById(containerID).offsetWidth;
            if(containerWidth) {
                document.getElementById('chatList').style[arguments.callee.styleProperty] = (containerWidth+28)+'px';
                document.getElementById('chatBooth').style[arguments.callee.styleProperty] = (containerWidth+28)+'px';  
            } else {
                document.getElementById('chatList').style[arguments.callee.styleProperty] = '20px';
                document.getElementById('chatBooth').style[arguments.callee.styleProperty] = '20px';
            }

        } 
```

DIV 和 IFrame 代码：

```
<div id="chatBooth" style="display:none; overflow: hidden;"> 
        <iframe style="overflow:hidden;height:100%;width:100%" height="100%" width="100%" frameborder="0" scrolling="no" name="booth" id="booth" src="about:blank">
        </iframe>
    </div> 
```

我已经尝试了我能想到的一切，这段代码在每个浏览器中都有效，但是`IE`. 它所做的是，当您单击当前可见的窗口内的链接时，它会在 hidden 中加载一个新页面`IFrame`，并且您可以通过`IFrame`单击按钮使其可见。这是显示和隐藏隐藏`DIV`和的按钮`IFrame`。

```
<input type="button" value="[LANG]toggleChat[/LANG]" title="[LANG]toggleTitleChat[/LANG]" alt="[LANG]toggleChat[/LANG]" onclick="ajaxChat.showHide('chatBooth', null);"/> 
```

这是`Link`更改应该位于`IFrame`每个浏览器中的内容的代码，但是`IE`！

```
alert(this.channelName);
            document.getElementById('booth').contentWindow.location.reload(true);
            document.getElementById('booth').src = 'http://www.cnn.com'; 
```

上面的代码适用于除`IE`. 我完全不知所措。我花了几个小时`Google`搜寻，似乎找不到解决方案，甚至找不到导致问题的原因。任何帮助将不胜感激。

这是请求的 showHide 代码：

```
showHide: function(id, styleDisplay, displayInline) {
    var node = document.getElementById(id);
    if(node) {
        if(styleDisplay) {
            node.style.display = styleDisplay;
        } else {
            if(node.style.display == 'none') {
                node.style.display = (displayInline ? 'inline' : 'block'); 
            } else {
                node.style.display = 'none';
            }
        }   
    }
} 
```

用于重新加载 iframe 和更改 iframe SRC 的代码

```
document.getElementById('booth').contentWindow.location.reload(true);
document.getElementById('booth').src = 'http://www.WEBSITE.com'+ ajaxChatConfig.loginChannelName +'/index.html'; 
```

上面似乎不允许 IE 在 IFrame 中加载任何内容，即使它被告知这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:01:54.407

我复制了您提供的代码，并通过简单地更改您的一个函数来使其工作。但是，因为我没有您的代码的实际工作副本，所以我不能确定这对您是否有用......

我从此更改了 showHide 函数声明...

```
showHide: function(id, styleDisplay, displayInline) { 
```

对这个……

```
function showHide(id, styleDisplay, displayInline) { 
```

我使用的 HTML：

```
<body>
    <div id="chatBooth" style="display:none; overflow: hidden;width:100%;">
        <iframe style="overflow:hidden;height:100%;width:90%;border:1px solid red;" scrolling="no" name="booth" id="booth" src="http://www.ebay.com"></iframe>
    </div>

    <input type="button" value="toggleChat" title="toggleTitleChat" onclick="showHide('chatBooth', null);"/>
</body> 
```

更新：：

您可以使用此功能替换 document.getElementById('booth').contentWindow.location.reload(true);

```
function loadContent(passedInURL){
    if(!passedInURL){
        passedInURL = "http://www.ebay.com";
    }
    var theIFrame = "<iframe style='overflow:hidden;height:200px;width:90%;border:1px solid red;' scrolling='no' name='booth' id='booth' src='";
    theIFrame += passedInURL + "'></iframe>";
            document.getElementById('chatBooth').innerHTML= theIFrame;
} 
```

并将此按钮添加到页面..

```
<input type="button" value="reLoad" title="reLoadFrame" onclick="loadContent();"/> 
```

# java - 为 key=javax.servlet.http.HttpServletResponse 异常修复 No PolicyContextHandler

> ID：14353879
> 
> 赞同：1
> 
> 时间：2013-01-16T08:13:47.867
> 
> 标签：java, jsf, cookies, response, jboss5.x

我正在使用 Jboss 5.1.0

在我的 bean 中，我想获取`Response`对象并使用它来将一些值设置回`cookie`.

下面是我在 bean 中的代码，

```
HttpServletResponse response = null;
response = (HttpServletResponse) PolicyContext.getContext("javax.servlet.http.HttpServletResponse"); 
//Line number 1230

HttpServletRequest req = null;
req = (HttpServletRequest) PolicyContext.getContext("javax.servlet.http.HttpServletRequest");

Cookie[] cookies =  req.getCookies();

for(int i=0;i<cookies.length;i++)
 {
   if(cookies[i].getName().contains("myCookie"))
                {
                    cookies[i].setValue("");
                    cookies[i].setPath("/");
                    cookies[i].setMaxAge(0);
                    response.addCookie(cookies[i]);
                }
} 
```

但是，在第 1230 行的异常情况下

```
java.lang.IllegalArgumentException: No PolicyContextHandler for key=javax.servlet.http.HttpServletResponse
13:24:16,457 ERROR [STDERR]     at javax.security.jacc.PolicyContext.getContext(PolicyContext.java:107)
13:24:16,457 ERROR [STDERR]     at myPackage.myBean(myBean.java:1230)
13:24:16,457 ERROR [STDERR]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
13:24:16,457 ERROR [STDERR]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
13:24:16,457 ERROR [STDERR]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
13:24:16,457 ERROR [STDERR]     at java.lang.reflect.Method.invoke(Method.java:597)
13:24:16,457 ERROR [STDERR]     at org.apache.el.parser.AstValue.invoke(AstValue.java:170)
13:24:16,457 ERROR [STDERR]     at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:276)
13:24:16,457 ERROR [STDERR]     at com.sun.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:68)
13:24:16,457 ERROR [STDERR]     at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
13:24:16,457 ERROR [STDERR]     at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
13:24:16,457 ERROR [STDERR]     at javax.faces.component.UICommand.broadcast(UICommand.java:387)
13:24:16,457 ERROR [STDERR]     at org.ajax4jsf.component.AjaxViewRoot.processEvents(AjaxViewRoot.java:329)
13:24:16,457 ERROR [STDERR]     at org.ajax4jsf.component.AjaxViewRoot.broadcastEventsForPhase(AjaxViewRoot.java:304)
13:24:16,457 ERROR [STDERR]     at org.ajax4jsf.component.AjaxViewRoot.processPhase(AjaxViewRoot.java:261) 
```

我得到`request`对象但不是`response`对象。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:05:19.920

`PolicyContext`在托管 bean 中使用是不必要的。在托管 bean 中，您已经可以直接访问`HttpServletRequest`和`HttpServletResponse`通过[`ExternalContext`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html).

```
ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
HttpServletRequest request = (HttpServletRequest) externalContext.getRequest();
HttpServletResponse response = (HttpServletResponse) externalContext.getResponse();
// ... 
```

`PolicyContext`仅在您无法直接访问它们的服务类（如 EJB）中有用。您的具体问题是因为`PolicyContext`根本不记得 HTTP servlet 响应，而只记得 HTTP servlet 请求，因为有关当前登录用户的信息存储在那里。本质上，HTTP servlet 响应与策略上下文无关。

请注意，`ExternalContext`它还提供了一种方便的[`getRequestCookieMap()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getRequestCookieMap%28%29)方法，该方法返回所有 cookie 的映射，因此您无需手动遍历`Cookie[]`.

```
Cookie cookie = (Cookie) externalContext.getRequestCookieMap().get("myCookie");
// ... 
```

我知道您使用的是 JSF 1.2，但如果您使用的是 JSF 2.0 或更新版本，那么您也可以使用方便的[`addResponseCookie()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#addResponseCookie%28java.lang.String,%20java.lang.String,%20java.util.Map%29)方法来添加 cookie，而无需获取“原始”servlet 响应。

# php - jQuery vTicker 停止自动播放

> ID：14353882
> 
> 赞同：0
> 
> 时间：2013-01-16T08:14:12.973
> 
> 标签：php, javascript, jquery, html, ajax

我正在使用 jQuery vTicker 滚动我的新闻项目。

这是脚本：

```
$(document).ready(function() {
  $('.tx_newsitems').vTicker({
    speed: 500,
    pause: 3000,
    animation: 'none',
    mousePause: true,
    height: 0,
    direction: 'up',
  });
}); 
```

实际问题是我需要在这个插件中停止自动播放。可能吗？有这样的代码`autoplay:false,`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:10:49.523

您需要在初始化 vTicker-function 代码后添加：

```
$("#id of stop/start - button").toggle(function(){ 
  $('.tx_newsitems').vTicker('pause', true);
},function(){ 
  $('.tx_newsitems').vTicker('pause', false);
}); 
```

像这样：

```
$(document).ready(function() {
  $('.tx_newsitems').vTicker({
    speed: 500,
    pause: 3000,
    animation: 'none',
    mousePause: true,
    height: 0,
    direction: 'up',
  });

  $("#stop_start_button").toggle(function(){ 
     $('.tx_newsitems').vTicker('pause', true);
  },function(){ 
     $('.tx_newsitems').vTicker('pause', false);
  });
}); 
```

# git - 合并提交中的其他更改

> ID：14353887
> 
> 赞同：5
> 
> 时间：2013-01-16T08:15:01.707
> 
> 标签：git

假设我正在合并一个拉取请求，并且还希望在更改日志中添加一行：

```
> git merge --no-ff otherguy/feature-x
> echo "Feature: X" >> changelog
> git commit -am "Changelog update"
> git push 
```

在单个提交中可能会发生类似的事情：

```
> git merge --no-ff --no-commit otherguy/feature-x
> echo "Feature: X" >> changelog
> git commit -am "Merge otherguy/feature-x + changelog"
> git push 
```

这样同一个提交将包含合并和文件更改。

假设我在从下游存储库合并时总是更新更改日志，这里有一个问题：

后一种方式是明智的做法吗？以后可能会出现什么意想不到的后果？

**更新：**至于为什么当我已经有一个 git 日志时我需要一个单独的文件更改日志，文件中的那个更被修剪（每个合并的条目左右，而不是每个提交），有时措辞更好并且采用某种格式（例如 debian /更改日志）。所以，它是供外部使用的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T08:38:08.090

您应该首先考虑在存储库中保留提交的更改日志是否真的有用，当您有 git 时首先保留更改日志。

此外，在合并中添加两个分支中都不存在的东西被称为[邪恶合并](https://stackoverflow.com/q/1461909/770830)，无论如何都不是一个好习惯。

# python - 我们有一个相当大的 django 站点以糟糕的性能运行，我们需要帮助找到原因

> ID：14353897
> 
> 赞同：1
> 
> 时间：2013-01-16T08:15:37.320
> 
> 标签：python, django, performance

我们有一个相当大的 Django 站点，它的运行速度非常慢（每页加载 > 3000 毫秒）。

有些东西令人窒息，但我们不知道是什么。

我们只有 10 个查询在 8 毫秒内从 MySQL 执行。如果我们禁用所有 css+javascript，它仍然需要 >3000ms 才能加载。

```
django-debug-toolbar:
User CPU time   264.384 msec
System CPU time 104.791 msec
Total CPU time  369.175 msec
Elapsed time    2621.822 msec 
```

我们尝试并`runprofileserver`获得`django-extensions`了一些 profiledata：

[https://portal.bitcasa.com/send/f19b6dd7bd2bd724737ce42a6e4c342b10349a73214877227628939a5f5331ea/37359a48a7f5e3422778be654e9dd74896b1d6c25249b327e2f566](https://portal.bitcasa.com/send/f19b6dd7bd2bd724737ce42a6e4c342b10349a73214877227628939a5f5331ea/37359a48a7f5e3422778be654e9dd74896b1d6c25249b327e2f5d3bd1966ddbe)

当我尝试破译分析数据时，我得出的结论是，render_content via render（模板渲染？）是为什么它很慢，问题是如果我们尝试禁用基本模板的某些部分，它没有任何区别。

有人可以帮助我们吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:00:31.400

我建议您使用一些分析工具，例如 Tracelytics 或 New Relic。

很难说，但一些常见的原因可能是：

*   与缓存层通信错误

*   误用查询（大型查询、添加索引、使用`select_related`和`prefetch_related`）

*   使用 django-debug-toolbar 本身会使事情变得更慢。确保你有 DEBUG=False

# android - TabPageIndicator：从 AsyncTask 获得响应后，无法刷新具有 ListView 的片段视图

> ID：14353898
> 
> 赞同：1
> 
> 时间：2013-01-16T08:15:42.273
> 
> 标签：android, android-listview, android-fragments, android-fragmentactivity, viewpagerindicator

我正在使用`TabPageIndicator`（[这里](https://github.com/JakeWharton/Android-ViewPagerIndicator)的库）。我有 2 个标签。两者都以不同的方式显示相同的实验室结果。一个选项卡按日期对结果进行分组，而其他选项卡按奶嘴名称分组。

我的目标是只调用一个服务器并在 ViewPager 的两个片段中使用生成的 POJO。我创建了自定义`FragmentPagerAdapter`，其中我正在初始化片段，`getItem()`如下所示：

```
@Override
    public Fragment getItem(int position) {
        Fragment fragment = null;
        switch(position){
            case 0:
                if(labsByDateFragment == null){                     
                    labsByDateFragment = new LabsByDateFragment();
                    fragment = labsByDateFragment;
                }
                break;
            case 1: 
                if(labsByTestFragment == null){                 
                    labsByTestFragment = new LabsByTestFragment();
                    fragment = labsByTestFragment; 
                }
                break;
        }

        return fragment;
    } 
```

两者`LabsByDateFragment`&`LabsByTestFragment`扩展`Fragment`并拥有`ListView`. 现在最初当我`FragmentActivity`启动时，它将显示片段空白和调用`AsyncTask`以使 Web 服务调用数据。

从 AsyncTask 接收到数据后，我`notifyDataSetChanged(labResponse)`将按`OnCompleteListner`如下方式调用：

```
 private OnCompleteListner onCompleteListner = new OnCompleteListner() {

            @Override
            public void onSuccess(Object obj) {

                LabsResponse labResponse = (LabsResponse) obj;
                adapter.notifyDataSetChanged(labResponse);          

            }

            @Override
            public void onFailure(String message) {
                AlertDialog dialog = (AlertDialog) DialogFactory
                        .getDialogWithOkButton(
                                "Oops..Failed to get your Results...Sorry..",
                                ResultsLauncher.this);
                dialog.setOwnerActivity(ResultsLauncher.this);
                dialog.show();
            }
        };

    public void notifyDataSetChanged(LabsResponse labsResponse){

            labsByDateFragment.setLabsResponse(labsResponse);            
            labsByTestFragment.setLabsResponse(labsResponse);            

    } 
```

两个片段中的 setLabsResponse 只需获取相应分组的实验室列表（按日期或按名称）并初始化我的自定义`ListView Adapter`。并将适配器与 ListView 绑定。

我的问题是我只在第一个片段中显示 ListView。但是第二个片段仍然是空白的。此外，第一个片段的 ListView（带有 LabsByDateFragment）显示按实验室的测试名称分组的数据。但是，如果我更改调用顺序`setLabsResponse`如下`notifyDataSetChanged`，它将显示按日期分组的结果：

```
public void notifyDataSetChanged(LabsResponse labsResponse){             

        labsByTestFragment.setLabsResponse(labsResponse);            
        labsByDateFragment.setLabsResponse(labsResponse);            

} 
```

因此，它根据最后分组的实验室响应显示数据。不知道我在哪里犯错。

# sql - OR 子句中存在的索引列

> ID：14353901
> 
> 赞同：2
> 
> 时间：2013-01-16T08:15:51.273
> 
> 标签：sql, sql-server-2008, tsql

我有一个带有主键和两个外键的表，它们都允许 NULLS。

当我为每两列分别创建索引时，查询运行大约 2-3 秒并返回大约 300000 行。

当我为这两个列创建复合非聚集索引时，对于相同数量的行，查询运行大约 10 分钟。

重要的是要注意两列出现在 WHERE 条件中并与 OR 子句一起使用，如下所示：

```
Select 
    SomeColumn
From
    SomeTable
Where 
    FirstColumn = x OR SecondColumn = x 
```

执行查询的平台是 SQL 2008 R2。

为什么在这两种情况下执行时间会有如此大的差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:49:18.190

如果您有两个单独的索引，并且只有这两个列在`WHERE`子句中，那么优化器可以有效地使用它们来确定所需的行（大概是一个`INDEX SEEK`）。

复合索引不是那么好，因为复合索引首先在第一个索引列上排序，然后是第二个，依此类推。所以它对你的情况的第一列很有用`OR`，就像你得到的一样。为了确定第二列的行，优化器必须扫描整个表，因为它没有合适的索引。

如果您在这种情况下有一个大表，那么对于您所要求的简单查询，单个索引通常会更快。它实际上还取决于所选列、查询复杂度、覆盖索引等。

我自己也有这个问题。请参阅：[组合索引与多个单索引与全文索引的查询性能以](https://stackoverflow.com/q/702469/44522)供参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:36:17.623

关键是，索引中列的顺序很重要

```
create table #temp (col1 int, col2 int )
create nonclustered index index1 on #temp(col1, col2) 
```

不一样

```
create nonclustered index index2 on #temp(col2, col1) 
```

如评论中所述，发布查询的执行计划

或更改复合索引中的列顺序并重新运行查询

如评论中所述，我的猜测是，当有两个非聚集索引时-优化器使用其中一个，如果您删除它们并重新创建为具有低数据选择性的第一列的复合索引，则不会使用该索引，并且查询执行时间将遭受

如果您发布查询会容易得多

# ruby - Ruby 'match()` 方法抛出错误“无法转储 MatchData”

> ID：14353905
> 
> 赞同：0
> 
> 时间：2013-01-16T08:16:12.683
> 
> 标签：ruby, regex, ruby-1.9.3

`Interactive ruby ready.`

```
> time = /\A(?­<hours>(0\d|1[0-9­]|2[0-3]))­:(?<minutes­>([1-5]\d|0­\d))\Z/
=> /\A(?<hours>(0\d|1[0-9]|2[0-3])):(?<minutes>([1-5]\d|0\d))\Z/

> match = time.­match '11:3­0'
=> #<TypeError: can't dump MatchData> 
```

我正在尝试运行代码，但出现上述错误。我做错了什么`regexp`帮助我改进它。

***编辑***

```
> time = /\A(0­\d|1[0-9­]­|2[0-3])­:­([0-5]\d)\­Z/
=> /\A(0\d|1[0-9??]|2[0-3])??:([0-5]\d)\Z/
> time.match­('11:30')
=> #<TypeError: can't dump MatchData>
> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:26:01.060

它*应该* 可以工作，并且您链接到的示例确实可以在我的机器上工作。但是，正则表达式不必要地复杂：

```
time = /\A(?<hours>0\d|1[0-9]|2[0-3]):(?<minutes>[0-5]\d)\Z/ 
```

足够。

但是，似乎在您的环境中的某个地方，字符串中嵌入了额外的字节，这些字节使在线测试器（它工作正常）感到困惑。尝试从这个答案中复制正则表达式（我已经删除了不可见的字符），看看它现在是否适合你。

# iphone - 单击 TableView 中的单元格后，UILabel 不会更新

> ID：14353906
> 
> 赞同：1
> 
> 时间：2013-01-16T08:16:16.127
> 
> 标签：iphone, ios, objective-c

我是 iOS 开发的新手，我正在尝试构建字典。我的第一个屏幕顶部只有一个搜索栏，`TableView`下面有一个所有条目。当您在搜索栏中键入时，TableView 将使用匹配的条目进行过滤。当您在全部列表模式或过滤模式下单击任何单元格时，会推送另一个视图，显示单词的名称和定义。

每当我单击表格单元格时，我已经能够打开一个新屏幕，但由于某种原因，新屏幕中的两个标签（单词和定义）不会随着选择而更新——它保持为空. 我想我已经在我的 XIB 文件中正确设置了这两个`IBOutlet`s，因为当我记录 s 的`text`属性时`UILabel`，它们会正确打印出来。帮助？

EntryViewController.h（第二个屏幕）：

```
#import <UIKit/UIKit.h>

@interface EntryViewController : UIViewController

@property (nonatomic, strong) IBOutlet UILabel *word;
@property (nonatomic, strong) IBOutlet UILabel *definition;

@end 
```

入口视图控制器.m：

```
#import "EntryViewController.h"

@implementation EntryViewController

@synthesize word, definition;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    self.word = [[UILabel alloc] init];
    self.definition = [[UILabel alloc] init];
    return self;
}

- (void)viewDidLoad {
    [super viewDidLoad];
    [self.navigationController setNavigationBarHidden:NO];
    // Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

UTVTViewController.h（第一个屏幕）：

```
#import <UIKit/UIKit.h>
#import "EntryViewController.h"

@interface UTVTViewController : UIViewController <UITableViewDataSource, UITableViewDelegate,
    UISearchBarDelegate, UISearchDisplayDelegate>

@property (nonatomic, strong) IBOutlet UITableView *sampleTableView;
@property (nonatomic, strong) NSMutableDictionary *entries;
@property (nonatomic, strong) NSMutableArray *sortedWords, *filteredList;
@property (nonatomic) BOOL isSearching;
@property (nonatomic, retain) EntryViewController *entryView;

- (void)filterListForSearchText:(NSString *)searchText;

@end 
```

UTVTViewController.m

```
#import "UTVTViewController.h"
#import "EntryViewController.h"

@implementation UTVTViewController

@synthesize sampleTableView, entries, sortedWords, filteredList, isSearching, entryView;

- (void)viewDidLoad {
    [super viewDidLoad];
    entries = [NSMutableDictionary new];
    [entries setObject:@"a syndrome of wide spaced eyes (ocular hypertelorism), front-facing (anteverted) nostrils, a broad upper lip, a malformed (\"saddle-bag\") scrotum, and laxity of the ligaments resulting in bending back of the knees (genu recurvatum), flat feet, and overly extensible fingers. There are X-linked and autosomal forms of the disease. The gene for the X-linked form has been mapped to chromosome band Xp11.21 and identified as the FGD1 gene." forKey:@"aarskog-scott syndrome"];
    [entries setObject:@"a diminution, decrease or easing. In medicine there may be abatement of pain or any other symptom or sign. In the environment there may abatement in the degree of pollution" forKey:@"abatement"];
    [entries setObject:@"a disorder marked by a pathological pattern of alcohol use that causes serious impairment in social or occupational functioning. It includes both alcohol abuse and alcohol dependence." forKey:@"alcoholism"];
    // ...other words

    sortedWords = [[NSMutableArray alloc] initWithArray:[[entries allKeys] sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)]];
    filteredList = [[NSMutableArray alloc] init];
    isSearching = NO;
}

// ...

#pragma mark - Table view delegate
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *selection;
    if (isSearching && [filteredList count]) {
        selection = [filteredList objectAtIndex:indexPath.row];
    } else {
        selection = [sortedWords objectAtIndex:indexPath.row];
    }

    EntryViewController *evc = [[EntryViewController alloc] initWithNibName:@"EntryView" bundle:nil];
    evc.title = selection;

    [evc.word setText:selection];
    [evc.definition setText:[entries objectForKey:selection]];
    NSLog(@"word=%@", evc.word.text);
    NSLog(@"definition=%@", evc.definition.text);

    [[self navigationController] pushViewController:evc animated:YES];
}

@end 
```

**编辑：**我包括 AppDelegate 的头文件和实现文件。我有一种感觉，错误出现在`navigationController`我目前没有连接到任何东西的地方，但我什至不知道在哪里附加它，因为我的 XIB 中没有。

UTVTAppDelegate.h：

```
@interface UTVTAppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) UTVTViewController *viewController;
@property (nonatomic, retain) IBOutlet UINavigationController *navigationController;

@end 
```

UTVTAppDelegate.m

```
@implementation UTVTAppDelegate

@synthesize navigationController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[UTVTViewController alloc] initWithNibName:@"UTVTViewController" bundle:nil];
    self.window.rootViewController = self.viewController;

    navigationController = [[UINavigationController alloc] initWithRootViewController:self.viewController];
    [navigationController setNavigationBarHidden:YES];

    [self.window addSubview:navigationController.view];
    [self.window makeKeyAndVisible];
    return YES;
}

// default Xcode methods

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:38:20.280

如果您通过 xib 创建了 UILabel，则不应在 init 中重新分配它。

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
self.word = [[UILabel alloc] init];//REMOVE
self.definition = [[UILabel alloc] init];//REMOVE
return self; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:40:07.113

和

```
self.word = [[UILabel alloc] init];
self.definition = [[UILabel alloc] init]; 
```

您创建与 UI 分离的新对象。加载 NIB 后，将为您创建所有 UI 对象，并使用它们初始化您的 IBOutlet 属性。只需删除这两行，就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T10:32:26.377

尝试将导航控制器设置为窗口的 rootviewController，而不是将其添加为子视图。

```
@implementation UTVTAppDelegate

@synthesize navigationController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[UTVTViewController alloc] initWithNibName:@"UTVTViewController" bundle:nil];

    navigationController = [[UINavigationController alloc] initWithRootViewController:self.viewController];
    [navigationController setNavigationBarHidden:YES];

    self.window.rootViewController = navigationController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T05:20:38.213

在该`didSelectRowAtIndexPath`方法中，我`UILabel`在将视图控制器推送到导航控制器之前设置了 's 文本。解决方案：

```
[[self navigationController] pushViewController:evc animated:YES];
[evc.word setText:selection];
[evc.definition setText:[entries objectForKey:selection]]; 
```

我还删除了代码中调用`alloc`分离`UILabel`对象的行。

# python - 芹菜 - 无法启动工人

> ID：14353907
> 
> 赞同：0
> 
> 时间：2013-01-16T08:16:19.130
> 
> 标签：python, celery

我正在使用 Python 3.2，我想看看 celery。我使用 pip 安装所有内容并创建了一个 tasks.py，就像在教程中一样：http: [//docs.celeryproject.org/en/latest/getting-started/first-steps-with-celery.html#installing-celery](http://docs.celeryproject.org/en/latest/getting-started/first-steps-with-celery.html#installing-celery)

但是，如果我开始一个芹菜工人，我会得到以下信息：

```
[2013-01-16 10:50:16,552: WARNING/MainProcess] C:\Python32\lib\site-packages\bil
liard\__init__.py:318: RuntimeWarning: force_execv is not supported as the billi
ard C extension is not installed
  warnings.warn(RuntimeWarning(W_NO_EXECV))
[2013-01-16 10:50:16,604: WARNING/MainProcess] celery@LNGVIEW201 ready.
[2013-01-16 10:50:16,651: ERROR/MainProcess] Unrecoverable error: error('char fo
rmat requires a bytes object of length 1',)
Traceback (most recent call last):
  File "C:\Python32\lib\site-packages\celery\worker\__init__.py", line 348, in s
tart
    component.start()
  File "C:\Python32\lib\site-packages\celery\worker\consumer.py", line 392, in s
tart
    self.reset_connection()
  File "C:\Python32\lib\site-packages\celery\worker\consumer.py", line 738, in r
eset_connection
    self.connection = self._open_connection()
  File "C:\Python32\lib\site-packages\celery\worker\consumer.py", line 804, in _
open_connection
    callback=self.maybe_shutdown,
 File "C:\Python32\lib\site-packages\kombu\connection.py", line 368, in ensure_
connection
    interval_start, interval_step, interval_max, callback)
  File "C:\Python32\lib\site-packages\kombu\utils\__init__.py", line 217, in ret
ry_over_time
    return fun(*args, **kwargs)
  File "C:\Python32\lib\site-packages\kombu\connection.py", line 241, in connect

    return self.connection
  File "C:\Python32\lib\site-packages\kombu\connection.py", line 731, in connect
ion
    self._connection = self._establish_connection()
  File "C:\Python32\lib\site-packages\kombu\connection.py", line 690, in _establ
ish_connection
    conn = self.transport.establish_connection()
  File "C:\Python32\lib\site-packages\kombu\transport\pyamqp.py", line 107, in e
stablish_connection
    heartbeat=conninfo.heartbeat)
  File "C:\Python32\lib\site-packages\amqp-1.0.6-py3.2.egg\amqp\connection.py",
line 155, in __init__
    self._x_start_ok(d, login_method, login_response, locale)
  File "C:\Python32\lib\site-packages\amqp-1.0.6-py3.2.egg\amqp\connection.py",
line 762, in _x_start_ok
    args.write_table(client_properties)
  File "C:\Python32\lib\site-packages\amqp-1.0.6-py3.2.egg\amqp\serialization.py
", line 317, in write_table
    table_data.write_table(v)
   File "C:\Python32\lib\site-packages\amqp-1.0.6-py3.2.egg\amqp\serialization.py
", line 296, in write_table
     table_data.write(pack('>cB', 't', int(v)))
struct.error: char format requires a bytes object of length 1
 Traceback (most recent call last):
   File "<string>", line 1, in <module>
  File "C:\Python32\lib\site-packages\billiard\forking.py", line 528, in main
     self = load(from_parent)
 TypeError: Required argument 'handle' (pos 1) not found
Traceback (most recent call last):
Traceback (most recent call last):
Traceback (most recent call last):
 File "<string>", line 1, in <module>
 File "<string>", line 1, in <module>
 File "<string>", line 1, in <module>
 File "C:\Python32\lib\site-packages\billiard\forking.py", line 528, in main
 File "C:\Python32\lib\site-packages\billiard\forking.py", line 528, in main
  File "C:\Python32\lib\site-packages\billiard\forking.py", line 528, in main
   self = load(from_parent)
    self = load(from_parent)
  TypeError: Required argument 'handle' (pos 1) not found
    self = load(from_parent)
   TypeError: Required argument 'handle' (pos 1) not found
   TypeError: Required argument 'handle' (pos 1) not found
   Traceback (most recent call last):
 File "<string>", line 1, in <module>
 File "C:\Python32\lib\site-packages\billiard\forking.py", line 528, in main
   self = load(from_parent)
   TypeError: Required argument 'handle' (pos 1) not found
   Traceback (most recent call last):
 File "<string>", line 1, in <module>
 File "C:\Python32\lib\site-packages\billiard\forking.py", line 528, in main
    self = load(from_parent)
   TypeError: Required argument 'handle' (pos 1) not found
    Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "C:\Python32\lib\site-packages\billiard\forking.py", line 528, in main
    self = load(from_parent)
TypeError: Required argument 'handle' (pos 1) not found
Traceback (most recent call last):
   File "<string>", line 1, in <module>
   File "C:\Python32\lib\site-packages\billiard\forking.py", line 528, in main
self = load(from_parent)
TypeError: Required argument 'handle' (pos 1) not found 
```

现在我想线索已经在前几行中了：

```
[2013-01-16 10:50:16,552: WARNING/MainProcess] C:\Python32\lib\site-packages\bil
liard\__init__.py:318: RuntimeWarning: force_execv is not supported as the billi
ard C extension is not installed
  warnings.warn(RuntimeWarning(W_NO_EXECV)) 
```

谁能告诉我如何为台球安装 C-Extension？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T08:37:19.163

我想您使用的是 Windows，如果是这种情况，请查看此处

[https://github.com/celery/celery/issues/1071](https://github.com/celery/celery/issues/1071)

在 Windows 上安装有一些问题，似乎还没有解决方案。

# external - 禁用 JavaScript 时显示外部文本的最佳方式是什么

> ID：14353912
> 
> 赞同：0
> 
> 时间：2013-01-16T08:16:38.857
> 
> 标签：external, javascript

我使用脚本将 .txt 文件加载到我网站上的 div 中。文本文件包含 html's `<p>` `<b>`和`<br>`'s 来控制它们的外观。我一直在绞尽脑汁，但一无所获……在没有脚本的情况下显示数据的最干净/最好的方法是什么，以便在禁用 javascript 时访问者可以读取文件。仅供参考：我试图避免在其他页面上重复数据；所以除此之外的想法将是首选。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:18:16.537

您可以将文本包含为 IFRAME，并通过 Javascript 将其替换为您的 DIV。无论如何都会显示 iframe，但如果启用了 javascript，您可以用更闪亮的东西替换它。

# php - 运行while循环时的进度条

> ID：14353914
> 
> 赞同：4
> 
> 时间：2013-01-16T08:16:47.630
> 
> 标签：php, while-loop, progress-bar

我有这个while循环，它基本上遍历数据库中的许多记录，并将数据插入另一个：

```
$q = $con1->query($users1) or die(print_r($con2->errorInfo(),1));
while($row = $q->fetch(PDO::FETCH_ASSOC)){
    $q = $con2->prepare($users2);
    $q->execute(array($row['id'], $row['username'])) or die(print_r($con2-errorInfo(),1));
} 
```

*（脚本已被缩短以便于阅读 - 正确的有一个更长的数组）*

我想做这个更图形化，并显示一个进度条，它已经走了多远，而不是仅仅看到一个页面加载了几分钟（这个页面中有大约 20.000 行 - 我有更多数据的表格）

我知道您可以从旧数据库中获取总数，我也可以轻松地将当前数字放入如下变量中：

```
$q = $con1->query($users1) or die(print_r($con2->errorInfo(),1));
$i = 0;
while($row = $q->fetch(PDO::FETCH_ASSOC)){
    $q = $con2->prepare($users2);
    $q->execute(array($row['id'], $row['username'])) or die(print_r($con2-errorInfo(),1));
    $i++;
} 
```

但现在我需要实际获取`$i`并显示它 - 或类似的东西。

这是如何“轻松”完成的？

进度条的代码可以与 while 循环在同一个文档中，也可以在另一个更简单的文档中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:22:21.440

您可以创建一个“主”文件，对第一个文件执行 ajax 以运行单个查询。您可以获取此主文件中的所有条目 ID，然后将其作为参数传递给执行单个查询的第二个文件。将这些 id 存储在 javascript 数组中。

创建一个执行此操作的函数，当第一个 ajax 完成后，移动到 id 数组的第二个元素，并使用第二个参数执行另一个 ajax。顺便说一句，这就是magento导入的方式:)

如果您需要进一步的解释，请告诉我，我已尽力解释，但可能还不是很清楚。

```
// you generate this javascript array using php.
// let's say you have all the ids that have to be processed in $Ids php array.
Ids = [<?php echo implode(',', $Ids); ?>];

function doAjax(i) {
    $.ajax({  // using jquery for simplicity
        'url': "ajax.php?id=" + Ids[i],
    }).done(function(){
        if ( i >= 0 ) {
            // at the point you know you're at ((Ids.length-i)/(Ids.length) * 100) percent of the script
            // so you can do something like this:
            // $('.progressbar').css('width', ((Ids.length-i)/(Ids.length) * 100) + '%');
            doAjax(i-1);
        }
    });
}

doAjax(Ids.length); // starting from the last entry 
```

所以，只是为了解释这是做什么的。它首先声明一个全局 javascript 数组，其中包含所有需要更改的 id。

然后我声明了一个递归的ajax函数，这样我们可以确保任何时候只有一个ajax运行（这样服务器就不会炸了），并且我们可以有一个相当准确的进度。此 ajax 函数执行以下操作：

*   向 ajax.php?id=xxx 发送请求 - 其中 xxx 是 javascript 数组中的 id 之一。
*   在文件中，我们得到 id ( `$_GET['id']`)，你从旧数据库中取出它，并将它插入到新数据库中。这仅适用于一个条目。
*   ajax 完成后，它会转到`done()`函数。由于我们从`doAjax()`最后一个元素开始函数，我们进行下一次迭代`doAjax(i-1)`。由于我们在数组中倒退，我们检查键是否为正。如果不是，脚本将停止。

就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:19:57.093

你不能。php 首先由服务器解释，然后作为 HTML 代码发送给用户。
唯一的可能性是创建一个 html 页面并使用 AJAX 调用 php 脚本。

# facebook-like - 墙上的帖子显示“n/a”

> ID：14353915
> 
> 赞同：2
> 
> 时间：2013-01-16T08:16:47.047
> 
> 标签：facebook-like, facebook-javascript-sdk

我有一个问题一直困扰着我一段时间。我有一个带有`Facebook Like`按钮的页面。当访问者点击它时，一切正常。用户首先登录她的`Facebook`帐户，正确的信息显示在`iFrame`弹出的小窗口中。它具有正确的标题、网址、图像，并且可以在帖子中添加一些文本。

但是一旦发布到`Facebook`，墙上的帖子不会显示描述，而是显示四行文字`n/a`。怎么来的？

一些附加信息：

*   我在 html 的 head 部分设置了以下字段，并`Facebook debugger tool`抓取了正确的信息：`og:title`, `og:description`, `og:image`, `og:url`, `og:locale`,`og:type`

*   此外，喜欢它时它总是对我和其他一些人有用，但当 X 或 Y 人试图分享它时，它就不行了，所以它有点零星......

*   我使用`Facebook js sdk`.

*   在`Facebook debugger tool`我收到这个警告：`fb:admins and fb:app_id tags are missing. These tags are necessary for Facebook to render a News Feed story that generates a high click-through rate.`但我在某处读到，在我的情况下这不应该是必要的。

*   描述有时包含`Å`,`Ä`和等字符`Ö`。

有没有其他人经历过这种行为？

提前致谢！

# java - Java API like smack 使用 XMPP 检索在线 GTalk-聊天朋友可以接收音频或视频通话

> ID：14353917
> 
> 赞同：0
> 
> 时间：2013-01-16T08:16:49.367
> 
> 标签：java, audio, smack, google-talk, freeswitch

我正在开发一个使用内置 Freeswitch 实用程序来调用在线 GtalkUser 的模块。

我正在寻找快速 API 接口来验证用户的浏览器是否启用了语音或视频通话（如果我没记错的话，浏览器需要 gtalk-audio/video 插件）。

这是 VAS APP——用户首先使用 gtalk-id 和密码注册，然后用户拨打 common-IVR 号码。与 E1 线路相连。

流 - 检测到来电

1.  用户信息被检索并发送 Freeswitch 用于登录（LT 时间用户必须等待）
2.  Google-data API 同时检索好友列表
3.  这些联系人列表（朋友和他们的 ID）使用 freeswitch 内置的 XMPP 支持进行验证。
4.  如果用户在线，则使用freeswitch 的RTP 协议内置支持呼叫用户。
5.  如果呼叫成功，呼叫者将获得 Gtalk-audio 呼叫的蜂鸣器
6.  如果呼叫失败，用户将获得相应的失败 IVR 响应

我想使用一个可以在一定程度上消除 setp 3/4/5（在某种程度上）的 API。SMACK-XMPP API 只能检测用户存在，但不能检测用户浏览器的插件状态。

# jsf - 如果验证失败，ace:dateTimeEntry 以红色显示背景，但是当验证失败时如何为其他字段显示这种突出显示

> ID：14353918
> 
> 赞同：0
> 
> 时间：2013-01-16T08:16:54.473
> 
> 标签：jsf, icefaces, icefaces-3

我正在使用 Icefaces 3.2。我有一个 ace:dateTimeEntry 可以正常工作，如果此日期字段的验证失败，它也会在红色背景中突出显示。我想知道如何在其他领域实现同样的目标。如果该字段的验证失败，我希望背景以红色突出显示。请注意，我没有为 datetimeentry 实现任何自定义逻辑，它默认突出显示。

```
 <ace:dateTimeEntry id="cal"  value="#{strformbean.customer1.custDob}"  timeZone="Canada/Mountain" pattern="dd/MM/yyyy"
                               renderAsPopup="true" navigator="true" styleClass="ui-inputfield" required="true"   requiredMessage="DOB is required"
                                maxdate="#{strformbean.date}"  readOnlyInputText="true">
                        <f:convertDateTime  dateStyle="medium" pattern="dd/MM/yyyy" /> 

                </ace:dateTimeEntry> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:33:45.923

您可以通过引用组件的`valid`属性来做到这一点：

```
<h:inputText styleClass="#{component.valid ? 'my-normal-styleclass' : 'my-error-styleclass'};"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:32:28.267

谢谢费舍尔马特。Icefaces 论坛提到，此验证突出显示功能是默认在 Icefaces 的 ACE 组件中提供的。我使用的是 Ice components，论坛建议我使用最新的 Ace components 3.2。我将我的 ice:inputText 修改为 ace:textEntry 并且验证工作正常，无需我添加任何代码。

# java - 二叉搜索树，搜索方法

> ID：14353922
> 
> 赞同：0
> 
> 时间：2013-01-16T08:17:13.027
> 
> 标签：java, binary-search-tree

我正在尝试运行我的`Binary Search Tree`，我正在`Employee`我的主程序中创建类型的对象，这似乎没有给我带来问题，但是当我选择在我的 中搜索一个项目时`BST`，程序被终止。

```
 System.out.println("Searching the Binary Search Tree");
                        System.out.println("Enter surname to search for:");
                        String choice2 = sc.nextLine(); 
                        BinaryNode a = temp.search(choice2);
                        Employee newEmp = (Employee) a.obj;
                        if (a == null)
                            {
                                System.out.println("Not Found");
                            }
                        else
                            {
                                System.out.println(newEmp.getData());
                            }
                       break;
                    } 
```

当程序终止时，它指向该行

```
Employee newEmp = (Employee) a.obj; 
```

给出的错误是，`java.lang.NullPointerException: null`

谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:22:14.817

您无法访问空对象的 .obj。检查是否 a==null 后应移动行。

```
 System.out.println("Searching the Binary Search Tree");
                    System.out.println("Enter surname to search for:");
                    String choice2 = sc.nextLine(); 
                    BinaryNode a = temp.search(choice2);
                    if (a == null)
                        {
                            System.out.println("Not Found");
                        }
                    else
                        {
                            Employee newEmp = (Employee) a.obj;
                            System.out.println(newEmp.getData());
                        }
                   break;
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:22:34.747

您能否检查一下 temp.search(choice2) 是否返回非空值？带有空引用的强制转换会导致此类错误

除此之外，请确保您为 BinaryNode a 执行的演员阵容确实是 Employee。（虽然这与 NullPointerException 无关）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T08:26:07.193

您的`search`方法可以返回`null`，因此您应该重新组织代码并`Employee newEmp = (Employee) a.obj;`在`else`部分条件中添加行。

# c# - 如何整合两个类

> ID：14353924
> 
> 赞同：0
> 
> 时间：2013-01-16T08:17:20.247
> 
> 标签：c#, oop

我正在开发一个管理航班的小应用程序，我有一个构建航班详细信息的类和构建乘客的类，现在，我想将乘客装载到航班上，我该怎么做？我是否需要构建一个继承自这两个类的更高类并列出该类的列表（我不认为那是明智的 oop）。或者我应该在具有航班号的乘客类中添加一个票务道具，在这里是我的代码。

```
 public class Passenger
{
    public Passenger(string name, int passportNumber)
    {
        this.PassengerName = name;
        this.PassportNumber = passportNumber;
    }

    private string _passengerName;
    public string PassengerName
    {
        get { return _passengerName; }
        set { _passengerName = value; }
    }

    private int _passportNumber;
    public int PassportNumber
    {
        get { return _passportNumber; }
        set { _passportNumber = value; }
    }

 }

public class FlightDetails
{
    public FlightDetails(int flightNumber, string flightDestination, string planmodel)
    {
        this.FlightNumber = flightNumber;
        this.FlightDestination = flightDestination;
        this.PlanModel = planmodel;
    }

    private int _flightNumber;
    public int FlightNumber
    {
        get { return _flightNumber; }
        set { _flightNumber = value; }
    }

    private string _flightDestination;
    public string FlightDestination
    {
        get { return _flightDestination; }
        set { _flightDestination = value; }
    }

    private string _planeModel;
    public string PlanModel
    {
        get { return _planeModel; }
        set { _planeModel = value; }
    }
}
      static void Main(string[] args)
    {
        List<FlightDetails> flightList = new List<FlightDetails>();

        FlightDetails a = new FlightDetails(12,"france","jumbo");///create a flight

        flightList.Add(a);///  load up the flight

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:27:52.550

首先，您不能创建一个继承自其他两个类的类，因为 C# 中不允许多重继承。

您可以使用聚合，如下所示：

```
public class FlightDetails
{
   // ...
}

public class Passenger
{
   // ...
}

public class Flight
{
    public FlightDetails { get; private set; }
    public List<Passenger> Passengers { get; private set; }

    public Flight(FlightDetails details)
    {
        FlightDetails = details;
        Passengers = new List<Passenger>();
    }

    public AddPassenger(Passenger p)
    {
        // check for ticket and so on..

        Passengers.Add(p);
    }
} 
```

您可以在此处阅读有关聚合的更多信息：[http ://en.wikipedia.org/wiki/Object_composition#Aggregation](http://en.wikipedia.org/wiki/Object_composition#Aggregation)

请注意，在此示例中，为简单起见，我使用了 List，但实际上您需要限制对该数组的访问（因为否则我可以执行以下操作：Flight.Passengers.Add(p) 而不是 Flight.AddPassenger(p)）所以好主意将使用 ReadOnlyCollection 作为此列表的公共接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T08:23:45.837

从逻辑上讲，FlightDetail 与 Passenger 之间的关系是 OneToMany。一个 FlightDetail 可以有多个Passenger，可以写成如下。FlightDetail 和Passenger 应该有任何共同的继承层次，因为它们没有任何共同的属性或行为。

```
 public class FlightDetails
 {
        private List<Passenger> passengerList;
        public void addPassenger(Passenger p){
            if(passengerList == null){
 passengerList = new ArrayList<Passenger>();

    }
    passengerList.add(p);
            }

    public List<Passenger> getPassengerList(){
    return passengerList;
    }
    //... your other detail
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T08:24:53.913

您应该将 FlightDetails 属性添加到您的乘客类。这比制作一个以 PassportNumber 作为索引的列表要容易。但是，使用 List 迭代 FlightDetails 比通过Passenger 访问它更容易。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T08:30:40.903

这是一个可能有效的示例代码。一个航班有一个或多个乘客，因此有一个乘客类型的列表。在现实生活中，乘客可以预订多个航班。如果你想要现实，你将不得不改变你的模型，但对于这种情况，它会起作用：

```
public class Passenger
{
    public Passenger(string name, int passportNumber)
    {
        PassengerName = name;
        PassportNumber = passportNumber
    }

    public string PassengerName { get; set; }
    public int PassportNumber { get; set; }
}

public class FlightDetails
{
    public FlightDetails(int flightNumber, string flightDestination, string planmodel)
    {
        FlightNumber = flightNumber;
        FlightDestination = flightDestination;
        PlanModel = planmodel;
        Passengers = new List<Passengers>();
    }

    public int FlightNumber { get; set; }
    public string FlightDestination  { get; set; }
    public string PlanModel { get; set; }
    public List<Passenger> Passengers { get; private set; }

    public void AddPassenger(string name, int number)
    {
        int max = 2;
        int passengersNumber = Passengers.Count;

        if (passengersNumber < max)
        {
            Passengers.Add(new Passenger(name, number);
        }
    }
public static void Main(string[] args)
{
    var flightList = new List<FlightDetails>();
    var passengersList = new List<Passenger>();

    //Add passenger-objects to passengers-list

    var flightOne = new FlightDetails(12, "France", "Jumbo");
    flightOne.Passengers = passengersList;

    flightList.Add(a);
} 
```

这是限制乘客的更好解决方案：

```
public class FlightDetails
{
    public FlightDetails(int flightNumber, string flightDestination, string planmodel)
        : this(flightNumber, flightDestination, planmodel, new List<Passenger>())
    {
    }

    public FlightDetails(int flightNumber, string flightDestination, string planmodel, List<Passenger> passengers)
    {
        FlightNumber = flightNumber;
        FlightDestination = flightDestination;
        PlanModel = planmodel;

        if(passengers.Count > 2)
            //throw exception or error
        else
            _passengers = passengers;
    }

    private List<Passenger> _passengers = new List<Passenger>();

    public int FlightNumber { get; set; }
    public string FlightDestination  { get; set; }
    public string PlanModel { get; set; }

    public IEnumerable<Passenger> Passengers { get { return _passengers; } }

    public void AddPassenger(string name, int number)
    {
        int max = 2;
        int passengersNumber = _passengers.Count;

        if (passengersNumber < max)
        {
            _passengers.Add(new Passenger(name, number);
        }
    }
} 
```

注意：此代码是在没有编译的情况下编写的。但这个想法通常是正确的。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T08:29:05.377

这实际上取决于您要如何访问和存储关系。

阅读[复合模式](http://en.wikipedia.org/wiki/Composite_pattern)可能是个好主意，它实际上为在父子关系之间移动提供了一个很好的解决方案，即使该模式有另一个目的。

# xml - 如何在 xsd:enumeration 中使用任何字符串

> ID：14353926
> 
> 赞同：8
> 
> 时间：2013-01-16T08:17:23.663
> 
> 标签：xml, xsd

我有这样的xsd类型

```
<xsd:simpleType name="carsEnum">
    <xsd:restriction base="xsd:string">
        <xsd:enumeration value="Seat"/>
        <xsd:enumeration value="Opel"/>
    </xsd:restriction>
</xsd:simpleType> 
```

现在我可以这样使用它了——`<xsd:attribute name="carModel" type="carsEnum"/>`

如何重建 carEnum 以使用任何其他字符串？

举个例子 -

```
< ... carModel="Seat"/>
< ... carModel="Some string"/>
< ... carModel="Opel"/> 
```

当然，我可以像往常一样创建类型 carsEnum 的字符串，但是在 IDE Idea 中使用这种结构相当舒服，因为它显示了工具提示。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T11:04:51.337

如果我总结您的问题，我的理解是您想要维护一个元素汽车的可能值列表，还想要接受出现在该有界列表之外的任何值。这可以在 XSD 中使用`UNION`. 我用下面的例子来说明它。

示例 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<cars>ssd</cars> 
```

XSD：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="cars" type="carsType"/>
  <xs:simpleType name="carsType">
    <xs:union memberTypes="carsEnum carsAnyString"/>
  </xs:simpleType>
  <xs:simpleType name="carsEnum">
    <xs:restriction base="xs:string">
      <xs:enumeration value="Seat"/>
      <xs:enumeration value="Opel"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="carsAnyString">
    <xs:restriction base="xs:string"/>
  </xs:simpleType>
</xs:schema> 
```

在上面的 XSD 中，我使用了 CAR 的多个定义，一次作为枚举列表，一次作为任何字符串。定义结合这两者的 UNION 类型将`type`用于汽车。

所以`<cars`可以有如下值：Seat、Opel、anyOtherCar、AnyString2 ..

我还想提一种控制`ANY STRING`. 以上 XSD 可以接受任何字符串，即使是特殊字符和数字。我们可以通过`restriction pattern`仅添加 Alpha 字符来限制这一点。下面是 XSD 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="cars" type="carsType"/>
  <xs:simpleType name="carsType">
    <xs:union memberTypes="carsEnum carsAnyAlphaString"/>
  </xs:simpleType>
  <xs:simpleType name="carsEnum">
    <xs:restriction base="xs:string">
      <xs:enumeration value="Seat"/>
      <xs:enumeration value="Opel"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="carsAnyAlphaString">
    <xs:restriction base="xs:string">
      <xs:pattern value="[A-Za-z]*"/>
    </xs:restriction>
  </xs:simpleType>
</xs:schema> 
```

所以可能的值可以是`Seat, Opel, "Any string but no Number", "Any string but no special char"`

更换

```
 `<xs:pattern value="[A-Za-z]*"/>` 
```

经过

```
 <xs:pattern value="[A-Za-z]+"/> 
```

不允许空字符串。这是一种重新定义元素的方法.. 不只是坚持枚举列表。

现在你也有了枚举列表的模式。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T08:33:00.590

只需像这样添加其他元素

```
<xsd:simpleType name="carsEnum">
    <xsd:restriction base="xsd:string">
        <xsd:enumeration value="Seat"/>
        <xsd:enumeration value="Opel"/>
 <xsd:enumeration value="SeatNew"/>
 <xsd:enumeration value="OpelNew"/>
    </xsd:restriction>
</xsd:simpleType> 
```

因此，您将能够将 SeatNew 和 OpelNew 分配给您的 carModel。

但是，除非在中指定，否则您不能为 carModel 分配任意值，因为它将被转换为 java 枚举。

# asp.net - 如何在 ASP.NET WebForms 的列表项中创建锚点

> ID：14353931
> 
> 赞同：0
> 
> 时间：2013-01-16T08:17:58.663
> 
> 标签：asp.net, webforms, web-controls

我想创建这样的嵌套标签：

```
<ul>
    <li><a href="">xxx</a></li>
</ul> 
```

然后我`BulletedList`在页面中添加一个控件：

```
<asp:BulletedList runat="server" CssClass="ad-thumb-list" ID="ImageItem">
</asp:BulletedList> 
```

然后我`ListItem`在代码中添加：

```
 DataTable dt = queryDb(xx);
    foreach (DataRow dr in dt.Rows)
    {
        HyperLink hl = new HyperLink();
        hl.NavigateUrl = string.Format("../stream.aspx?type=={0}",dr["type"]);

        ListItem li = new ListItem();
        //here how to add the `hl` to `li`
        ImageItem.Items.Add(li);
    } 
```

在上面的代码中，我不知道将`a`标签添加到`li`.

我想使用这样的东西：

```
li.Controls.Add(hl); 
```

但这似乎是不可能的。

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:58:58.427

您需要设置`DisplayMode`has `Hyperlink`( `BulletedListDisplayMode.HyperLink`)

```
 ImageItem.DisplayMode = BulletedListDisplayMode.HyperLink;

    foreach (DataRow dr in dt.Rows)
    {
        ListItem li = new ListItem("PLACE-THE-LINK-TEXT", string.Format("../stream.aspx?type=={0}",dr["type"]));
        //here how to add the `hl` to `li`
        ImageItem.Items.Add(li);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:21:51.167

这是您可以执行的操作： [DisplayMode 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.bulletedlist.displaymode.aspx)

```
ListItem item = new ListItem("MicroSoft", "http://www.microsoft.com");
ListItem item1 = new ListItem("Google", "http://www.google.com");
BulletedList1.Items.Add(item);
BulletedList1.Items.Add(item1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T08:29:03.397

ListItem 不是容器，因此不提供要添加的控件。请改用**ListViewDataItem**。

# winapi - BS_BITMAP 样式的 PUSHBUTTON 在 XP 上不起作用

> ID：14353932
> 
> 赞同：0
> 
> 时间：2013-01-16T08:18:00.917
> 
> 标签：winapi

看这两张图：

Windows 7的：

![在此处输入图像描述](../Images/af80b143c46c0311575cf5afdd544c47.png)

经验：

![在此处输入图像描述](../Images/ce192e4e1fb04de6b8089c018099cb77.png)

如您所见，XP 机箱上没有图像。

在这篇文章[http://social.msdn.microsoft.com/Forums/da-DK/vcmfcatl/thread/6f9b1f03-0c67-4af4-a187-e135fdd1411c](http://social.msdn.microsoft.com/Forums/da-DK/vcmfcatl/thread/6f9b1f03-0c67-4af4-a187-e135fdd1411c)中，似乎`PUSHBUTTON with BS_BITMAP style doesn't work on XP`. 这是正确的吗？如果是，如何在 XP 上做类似的事情？

* * *

在资源脚本文件中，我设置了样式为 BS_BITMAP 的按钮，下面是与设置图像相关的代码：

```
static INT_PTR CALLBACK Dialog_Color_Proc(...)
{
    ....    
    case WM_INITDIALOG:
        ....
        SetColorDlgButtonColor(hDlg, IDC_SET_START_PAGE_BG, prefs->bgColor);
        ....
}

void SetColorDlgButtonColor(HWND hDlg, int nIDDlgItem, COLORREF color)
{
    HWND hButton = GetDlgItem(hDlg, nIDDlgItem);

    HDC hdc = GetDC(hButton);
    HDC memDC = CreateCompatibleDC(hdc);

    int dx = ClientRect(hButton).dx;
    int dy = ClientRect(hButton).dx;
    HBITMAP hMemBmp = CreateCompatibleBitmap(hdc, dx, dy);
    HBITMAP hOldBmp = (HBITMAP)SelectObject(memDC, hMemBmp);

    Rectangle(memDC, 0, 0, dx, dy);

    RECT rc;
    rc.left   = 0; 
    rc.top    = 0;
    rc.right  = dx;
    rc.bottom = dy;

    HBRUSH brush = CreateSolidBrush(color);
    FillRect(memDC, &rc, brush);
    SelectObject(memDC, hOldBmp);
    SendMessage(GetDlgItem(hDlg, nIDDlgItem), BM_SETIMAGE, IMAGE_BITMAP, (LPARAM)hMemBmp);
    DeleteObject(brush);
    DeleteObject(hMemBmp);
    DeleteObject(memDC);
} 
```

# android - TextView中自动水平滚动的问题

> ID：14353936
> 
> 赞同：0
> 
> 时间：2013-01-16T08:18:27.140
> 
> 标签：android, scroll, textview, chronometer

如果我的文本太长，我想针对这种情况实现自动水平滚动。它在活动为空而没有任何关注的情况下起作用。但是当我尝试在带有计时器的活动中实现这一点时，它不起作用。我在没有计时器的情况下对其进行了测试，它可以工作。我尝试使用`setSelected(true)`，它也不起作用。有什么办法可以解决这个问题，我需要带有计时器的滚动功能。任何意见和答案将不胜感激。

**ScrollTextView.class**

```
public class ScrollingTextView extends TextView{

public ScrollingTextView(Context context, AttributeSet attrs,
        int defStyle){
    super(context, attrs, defStyle);
}

public ScrollingTextView(Context context, AttributeSet attrs){
    super(context, attrs);
}

public ScrollingTextView(Context context){
    super(context);
}

@Override
protected void onFocusChanged(boolean focused, int direction,
        Rect previouslyFocusedRect){
    if(focused){
        super.onFocusChanged(focused, direction, previouslyFocusedRect);
    }
}

@Override
public void onWindowFocusChanged(boolean focused){
    if(focused){
        super.onWindowFocusChanged(focused);
    }
}

@Override
public boolean isFocused(){
    return true;
}
} 
```

**文本视图**

```
<com.android.app.ScrollingTextView
    android:id="@+id/display_message"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:paddingLeft="10dp"
    android:paddingTop="10dp"
    android:singleLine="true"
    android:text="Display Message"
    android:textSize="18dp"
    android:textColor="#ffffff"
    android:ellipsize="marquee"
    android:scrollHorizontally="true"
    android:fadingEdge="horizontal"
    android:marqueeRepeatLimit="marquee_forever"
    android:focusableInTouchMode="true"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-29T10:19:15.807

试试这个，它可能对你有帮助。

> ```
> <TextView
>             android:id="@+id/textView"
>             android:layout_width="fill_parent"
>             android:layout_height="wrap_content"
>             android:clickable="true"
>             android:onClick="onClick" 
>             android:smoothScrollbar="true"
>             android:scrollbars="vertical"
>              android:maxLines="6"
>             android:ellipsize="none"
>             android:scrollHorizontally="false"
>             android:singleLine="false"
>             /> 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:30:56.017

**在你的XML**中添加这个

 **我自己想通了。

```
android:focusable="true" 
```

& 然后再试一次。

**编辑 ：**

**我面临这个问题**

就我而言，这就是 Textview 不滚动的原因是，

我在 textview 上面放了一个 listview，所以 textview 不滚动。所以试了这个

设置 listview 可聚焦为 false

```
listview.setfocusable(false); 
```

然后它可以工作，文本正在滚动。**

# delphi - idFTP 需要太长时间才能给出连接结果

> ID：14353938
> 
> 赞同：1
> 
> 时间：2013-01-16T08:18:37.203
> 
> 标签：delphi, ftp, connection, indy

我开发了一个使用 indy 组件从远程服务器下载更新的应用程序。问题是如果 FTP 服务器宕机或 IP 地址不正确，idFTP.connect() 需要很长时间才能给出结果（连接失败）。

加速连接答案的最佳方法是什么，或者可能是在连接到 idFTP 之前检查 IP 地址。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:01:39.707

您应该设置 ReadTimeout 属性，默认设置为一分钟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T01:50:30.280

默认情况下，Indy 客户端会等待操作系统报告连接是否成功。是的，这可能需要很长时间，如果操作系统必须使用 DNS 查找主机名，进行网络检查，处理网络延迟等。如果您不想等待那么长时间，您可以使用Indy中的`Timeout`参数`Connect()`9 和更早的版本，或`ConnectTimeout`Indy 10 中的属性，以减少等待的时间。 **但是**，这仅适用于确定服务器 IP 后的实际套接字连接尝试。如果您将该`Host`属性设置为非 IP 主机名，Indy 会要求操作系统执行 DNS 查找以获取主机名的 IP，并且没有可用的逻辑`Connect()`来控制执行该查找所需的时间。如果您需要那么多控制，请使用`TIdDNSResolver`手动获取 IP，然后`Host`在调用之前将其分配给属性`Connect()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T11:29:12.283

好吧，本机 connect() API 超时在设计上是出了名的冗长，（以适应调制解调器等高延迟链接）。人为地缩短超时可能会导致过早的故障通知，（尽管许多开发人员从未见过调制解调器，但今天这不是什么大问题:)。

FTP 是一个相当复杂的传输，需要两个 TCP 连接，可能还需要一个 DNS 查找——这些都可能会产生较长的连接延迟。TidFTP 具有继承的“ReadTimeout”属性和带有超时参数的 connect() 重载，但我不确定它们的效果如何。

从历史上看，我自己总是使用 TTimer 或类似工具来超时此类操作 - 如果 FTP 线程没有以合适的信号响应（例如，TThread.Sychronize 或用户定义的 Windows 消息 SendMessage()'d 到 GUI），及时采取了“FTP 失败”操作，并在 FTP 线程中设置了一个标志，告诉它忽略任何回复并自行终止。不要使用 PostMessage - 如果你这样做了，那么在 TTimer 触发时，我会在一小段时间内将发布的响应排队 - 一场比赛。

哦-如果您只是将 TidFTP 插入表单（或在 TForm.FormCreate 中创建一个），并尝试从主 GUI 线程（有或没有 TidAntiFreeze）运行它，请停止执行并关闭FTP。

# sql-server - 首先是 MVC 代码。从生产服务器到开发和结构的数据以另一种方式

> ID：14353941
> 
> 赞同：0
> 
> 时间：2013-01-16T08:18:46.790
> 
> 标签：sql-server, asp.net-mvc, code-first

我有一个 MVC 代码优先解决方案，并且该解决方案在我的生产服务器上运行。

我现在对模型进行了一些更改，这在我的开发计算机上提供了一个新的空数据库。

我现在的问题是：

1）将数据从生产数据库获取到我的开发计算机的最佳方法是什么？我试图从生产中生成“仅数据”脚本，但这没有用。

2) 在不丢失数据的情况下将新结构实施到生产服务器的最佳方法是什么？

我正在使用VS2012专业版。

编辑

以下对我有用

1）备份产品服务器的数据库并在本地恢复

2）使用VS2012中的模式比较来更新db上的模式restored db

3）将恢复的数据库重命名为本地的原始名称（现在我有一个本地数据库，其中包含来自 prod 的数据和正确的模式）

4）备份本地数据库并在服务器上恢复（现在服务器上的数据库具有正确的架构）

我必须更换的唯一故障

Database.SetInitializer(new myDbInitializer());

和

Database.SetInitializer < myContext > (null);

确保系统不会尝试删除/创建数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:21:25.190

> 将数据从生产数据库获取到我的开发计算机的最佳方法是什么？我

除非安全是一个问题，否则备份/恢复。这有时不合法，然后是备份/恢复/加扰或数据生成器（如果不允许开发人员查看数据）。

> 在不丢失数据的情况下将新结构实施到生产服务器的最佳方法是什么？

生成一个脚本来更新数据库。观点。

可悲的是，“点”就像“好莱坞标志大字母”中的“点”，因为它是一个你自己留下的区域。您可以进行模式比较，甚至生成增量脚本，但它们是非常原始的。插入（元数据）、清理操作、重命名都会导致问题。

最好的是：

*   生成增量
*   手动将其转换为适当的形式。
*   在更新期间，应用 delta 脚本。

实际上可能是最好的方法，因为架构增量无法正确处理很多事情。

一个例子 - 我们现在正在处理一个非规范化的表并将其规范化（变为 4），然后将其替换为一个视图。

delta 脚本必须生成规范化值、新表，在那里进行插入，然后生成视图。

涉及逻辑 - 自动增量无法处理它。

# javascript - 我无法正确绘制 chrome 中的图像

> ID：14353944
> 
> 赞同：0
> 
> 时间：2013-01-16T08:18:57.530
> 
> 标签：javascript, image, html, canvas, draw

这里简单的 code1 可以很好地工作[Demo jsFiddle](http://jsfiddle.net/centerwow/Z2UzF/show/)，我希望在 code2 中得到相同的结果

这里的code2 [Demo jsfiddle](http://jsfiddle.net/centerwow/Z2UzF/1/show/)有两个问题。

1.  **比例尺与 1400x700 像素不正确**

2.  我只能从内部汲取成功`function loadImage()`

    ```
     function loadImage(){
            oG.width = 1400;
            oG.height = 700;
            oG.drawImage(scrollImg,0,0);
        } 
    ```

    **我想从** `scrollObject.draw()`

    ```
     var scrollObject = {
            draw : function() {
                oG.drawImage(scrollImg,0,0);
            }
        }; 
    ```

我怎样才能做到这一点 ？非常感谢。

代码1；

```
<!DOCTYPE HTML>
<html>
<head>
<style>
 body {
        margin: 0px;
        padding: 0px;
      }

#mycanvas{

    border: 1px solid #9C9898;
    }
</style>

</head>
<body >
   <canvas id="mycanvas" width="1400" height="700" ></canvas>
   <script type="text/javascript">

  // get the canvas element using the DOM http://jsfiddle.net/centerwow/Z2UzF/show/
 var context = document.getElementById('mycanvas').getContext("2d");
    context.width = 1400 ;
    context.height = 700 ;

    var img = new Image();
    img.src = "http://s9.postimage.org/433ecr79b/grid.png";
    img.onload = function () {
        context.clearRect(0,0,1400,700);
        context.drawImage(img, 0, 0);

    }
</script>
</body>
</html> 
```

代码2：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title> image not display correct</title>
    <style type='text/css'>
    body {
      background-color:black;
    }
    .Container {
      position: relative;
      margin-left:auto;
      margin-right:auto;
      top:10px;
      background-image:url('http://s8.postimage.org/jnu65wk2d/Box_Grass200x100.jpg');
      background-repeat:repeat;
      width:1000px;
      height:500px;
      z-index:0;
      overflow:hidden;
    }

    #layer1{
      position:absolute;
      padding:0;
      margin: 0px;
      z-index:2;
      top:-100px;
      left:-200px;
      width:1400px;
      height:700px;
    }
    </style>
</head>
<body >
    <div class="Container"> 
        <canvas id="layer1">LAYER1</canvas>
    </div>
        <script type='text/javascript'>//http://jsfiddle.net/centerwow/Z2UzF/1/show/

           function loadImage(){
                oG.width = 1400;
                oG.height = 700;
                oG.drawImage(scrollImg,0,0);
            }   

            //layer 1 image then will be object objectGame = oG
        var oG = document.getElementById('layer1').getContext("2d");
                scrollImg = new Image();
                scrollImg.src = "http://s9.postimage.org/433ecr79b/grid.png"; //image size 1400x700px
                scrollImg.onload = loadImage;

            var scrollObject = {
            // Basic attributes

                draw : function() {
                    oG.drawImage(scrollImg,0,0);
                }
            };

            // Now moving it
            function move() {
            //handle with object background
            //clearRect(x, y, width, height)    
                oG.clearRect(0,0,1400,700);
                scrollObject.draw();
            }

        move();

        </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:23:33.903

您只能在 上绘制`loadImage()`，因为触发时`move()`图像尚未加载。您可以使用 a`assetmanager`来下载您的资产，例如图像、声音等。这里是一个很好的构建指南 - [http://www.html5rocks.com/en/tutorials/games/assetmanager/](http://www.html5rocks.com/en/tutorials/games/assetmanager/)

对于比例，您可以将宽度和高度参数传递给`drawImage`函数。

`context.drawImage(image, x, y, width, height);`

您还设置了 的高度和宽度`2d-context`，这是您无法做到的。`<canvas>`在属性中设置宽度和高度。我曾经在使用时遇到过高度/宽度问题`css`，所以我不建议在那里设置宽度/高度。

# regex - 如何在方括号组中表示单个空格字符

> ID：14353947
> 
> 赞同：14
> 
> 时间：2013-01-16T08:19:10.610
> 
> 标签：regex

我在 [] 字符集表达式中表示单个空格时遇到了问题。我最终使用了这样的东西

```
([a-zA-Z0-9]|\x20)+ 
```

我认为这不是很优雅

**更新**：我现在知道我的正则表达式出了什么问题。我使用了类似这样的东西，但它不起作用

```
[A-Za-z0-9/.,':!?$%()- ]+ 
```

但是当我像这样将空间移动到 9 之后

```
[A-Za-z0-9 /.,':!?$%()-]+ 
```

它有效，只是很奇怪。我正在使用在线正则表达式测试器[RegExr](http://www.gskinner.com/RegExr/)尝试此操作。

**更新2**：我现在发现问题是`-`内部正则表达式用于表示一个范围，`[]`因此它之前和之后的任何内容都具有不同的含义，而不仅仅是一个普通字符

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-16T08:21:32.090

```
[a-zA-Z0-9 ] 
```

将为字符类添加一个空格。我猜你已经知道了，并且你想确保你的字符串中只有*一个*空格。在这种情况下，您需要额外的前瞻：

```
^(?!.*  )[a-zA-Z0-9 ]*$ 
```

匹配包含字母数字和空格但仅包含单个空格的字符串。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-16T08:20:09.260

你可以*只*使用一个空间。

对于问题中的正则表达式结构：

```
 ([a-zA-Z0-9]| )+ 
```

在实践中：

```
[a-zA-Z0-9 ]+ 
```

# android - 更新 Google Play 上的应用程序对下载量的影响

> ID：14353952
> 
> 赞同：5
> 
> 时间：2013-01-16T08:19:39.357
> 
> 标签：android, google-play

我的问题可能有一个完全自然的市场答案，但我还是会问。

我创建了一个游戏并于 2012 年 1 月在 Google Play 上发布了它。在那之后，它的下载量稳步增长（超过 50k，目前每天 200-300 次），并且我一直在不断更新它。大约两三周前，我发布了一个更新，对我的新下载产生了奇怪的影响。他们几乎完全停了下来。我很难相信类似于我过去发布的更新会对用户下载决策产生这种影响。更新后，下载量突然从每天 200-300 次下降到每天 1-10 次。

我知道我不太了解 Google Play 搜索例程和类似的东西，但我仍然想知道我的问题是否有一个简单的答案。应用程序升级会影响软件可见性的可能性有哪些？

顺便说一句：我的游戏更新没有改变 SDK 要求或可用设备。

编辑：我注意到在我将 SDK 目标更改为 17 后，我的应用程序中出现了一个新权限：“测试对受保护存储的访问”。这会影响我的下载吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:19:24.733

从应用程序启动之日起至此后 30 天，您的应用程序出现在 Play 商店的“热门新免费/付费”应用程序部分（几乎出现在您的应用程序类别的顶部）。所以在前 30 天，下载量非常大。Playstore 突然将其从“热门新免费/付费”部分中删除，现在您的应用只会出现在“热门免费/付费”部分中，该部分更加拥挤，并且有更多成熟的应用来争夺一席之地。

更新肯定会影响下载。

到目前为止，我会说即使是权限要求的更改也不对下降负责。再一个许可请求可能会改变 10% 的潜在消费者的想法，但不会超过这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T08:31:52.413

让我尝试并尝试一个答案。

据我了解，*Updates*不计入*Downloads*的数量。仅仅是因为，用户已经下载过一次。下载计数表示唯一的下载次数。

除非更新破坏了某些东西或改变了足够大的东西以驱走潜在的下载者，否则它不会影响下载量（每天）的下降或上升。这也可能是由于对您的应用程序的负面反馈和/或评论。尽管我无法声明或提供消息来源，但我几乎可以肯定更新与统计数据下降无关。

希望这会有所帮助。

**更新**

新权限很可能是负责任的。话虽如此，用户决定安装确实是一个非常主观的决定（因为许可）。也许，为了可能纠正这种情况，假设原因是权限，您可以列出应用程序使用的权限列表，并在您的应用程序列表中说明使用它们的原因。但这是减轻用户进一步流失的最好办法。另外，您可能会看到统计数据也恢复正常。祝你好运。;-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-19T14:36:52.753

就我而言，当我在 Play 开发者控制台 - 控制面板中将默认语言更改为英语时，下载次数从 300-400 下降到 1-30，令人沮丧。在我以自己的名称查找我的应用程序之前，它会出现在第一个或第二个选项中，在将默认语言更改为 30 位置之后，我想如果我切换回旧的默认语言可能会回到第一个位置，但这更可怕，因为最后一次更改导致它从位置上消失。它只出现在包含放置在我的应用程序描述中的关键字的复杂搜索中。

我的应用程序始终支持西班牙语和英语两种语言，当我第一次上传应用程序时，我错误地将默认版本设置为西班牙语。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T08:30:26.377

如果您不更改清单 sdk、功能或权限要求，通常不会产生任何影响。您看到的可能与版本无关，而是与其他内容有关。很可能是因为自发布以来已经过去了 30 天。在新应用发布后的前 30 天，您会从 Google 获得一些提升，但在 30 天后，它就会停止。

# pdf - PDFCreator 删除空白页

> ID：14353954
> 
> 赞同：2
> 
> 时间：2013-01-16T08:19:41.967
> 
> 标签：pdf, excel, vba

我在我的 Excel 中使用 PDFCreator 并生成 pdf 文件指定的 Printarea 包含动态填充的数据，因此有空白页被添加到 pdf 文档中。

如何在生成 pdf 文档时删除这些空白页？

# java - 无法使用 Zip4J 在 java 中解压缩

> ID：14353956
> 
> 赞同：1
> 
> 时间：2013-01-16T08:19:53.997
> 
> 标签：java, zip

你好，我来自中国对岸的太平洋。请原谅我的初级英语。对外国网站的筛选会导致更多问题。

在我当前的项目中，我使用的是 zip4j，但出现了一个问题。这是我的代码：

```
public static File [] unzip(File zipFile, String dest, String passwd) throws ZipException {
    ZipFile zFile = new ZipFile(zipFile);
    zFile.setFileNameCharset("GBK");
    if (!zFile.isValidZipFile()) {
        throw new ZipException("压缩文件不合法,可能被损坏.");
    }
    File destDir = new File(dest);
    if (destDir.isDirectory() && !destDir.exists()) {
        destDir.mkdir();
    }
    if (zFile.isEncrypted()) {
        zFile.setPassword(passwd.toCharArray());
    }
    zFile.extractAll(dest);

    List<FileHeader> headerList = zFile.getFileHeaders();
    List<File> extractedFileList = new ArrayList<File>();
    for(FileHeader fileHeader : headerList) {
        if (!fileHeader.isDirectory()) {
            extractedFileList.add(new File(destDir,fileHeader.getFileName()));
        }
    }
    File [] extractedFiles = new File[extractedFileList.size()];
    extractedFileList.toArray(extractedFiles);
    return extractedFiles;
} 
```

在超过一定数量（我的文件 2000）之后压缩包文件时会出现此问题。我使用了myeclipse开发工具和tomcat服务器。

我在 myeclipse 中使用了断点，并没有遇到任何错误。不加断点，直接操作报错：

```
net.lingala.zip4j.exception.ZipException: Compressed file is not valid, can be damaged.
    at com.ninemax.cul.util.CompressUtil.unzip(CompressUtil.java:68)
    at com.ninemax.cul.util.CompressUtil.unzip(CompressUtil.java:38)
    at com.ninemax.cul.service.impl.SysShangChuanWenWuService.writeDataToDatabase(SysShangChuanWenWuService.java:42)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:311)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:89)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy48.writeDataToDatabase(Unknown Source)
    at com.ninemax.cul.action.web.UserUploadAction.uploadSuccess(UserUploadAction.java:93)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:44:06.890

用于创建您要提取的 ZIP 文件的工具是什么？

很可能您的 zip 文件已损坏。请尝试使用 Winzip (Windows) 或 GUnzip (UNIX) 之类的解压缩工具对其进行解压缩，以检查它是否已损坏。

如果它没有损坏，那么很可能该 zip 使用 Zip4J 不支持的加密方法进行了加密和密码保护。例如 Zip4J 支持 AES-256 位 Winzip 加密/解密，但不支持 AES-256 PKZIP 加密/解密。

# c# - 如何获得对 Ajax 请求的异步响应？

> ID：14353958
> 
> 赞同：0
> 
> 时间：2013-01-16T08:19:58.053
> 
> 标签：c#, jquery, asp.net, ajax, multithreading

> **可能重复：**
> [ASP.NET 服务器不异步处理页面](https://stackoverflow.com/questions/12284530/asp-net-server-does-not-process-pages-asynchronously)

有一个关于 Ajax 请求的异步响应的问题。

我正在开发一个 Web 应用程序，使用 ASP.Net + Ajax 为用户启用一些简单的图像处理操作。由于大多数图像处理动作需要一段时间才能完成，我们希望利用用户通过 Ajax 向服务器发送请求，并立即获得部分响应，而服务器正在处理并稍后发送完成的响应（例如，10/20 秒后）。

这样，我想服务器应该能够将延迟响应（在 10/20 秒后获得）推送到客户端。

有什么想法如何实现这种交互？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:20:44.033

喜欢：

```
 $.ajax({
     type: 'GET',
     url: 'http://api.stackoverflow.com/1.1/tags/ravendb/wikis',
     dataType: 'jsonp',
     jsonpCallback: 'jsonCallback',
     jsonp: 'jsonp'
     async: true,
     success: function (data) {
         if (data.tag_wikis.length > 0) {
             alert(data.tag_wikis[0].wiki_excerpt);
         }
     },
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:45:27.943

你会得到最接近的东西是[JSONP](http://www.jquery4u.com/json/jsonp-examples/)，它可以与 jQuery 一起使用。

# openxml - OpenXML 编辑文档

> ID：14353961
> 
> 赞同：0
> 
> 时间：2013-01-16T08:20:09.980
> 
> 标签：openxml, docx

我有一个动态生成的 docx 文件。

需要将文本严格写到页尾。

使用 Microsoft.Interop 我在文本前插入段落：

```
int kk = objDoc.ComputeStatistics(WdStatistic.wdStatisticPages, ref wMissing);
while (objDoc.ComputeStatistics(WdStatistic.wdStatisticPages, ref wMissing) != kk + 1)
                {
                    objWord.Selection.TypeParagraph();

                }
                objWord.Selection.TypeBackspace(); 
```

但我不能在 Open XML 中使用相同的代码，因为 pages.count 仅按单词计算。使用互操作是不可能的，因为它太慢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:00:32.987

在 Open XML 中有 2 个选项可以执行此操作。

1.  从文档末尾的 Microsoft Office 开发人员选项卡创建内容占位符，现在您可以通过编程方式访问此内容占位符，并可以在其中放置任何文本。

2.  您可以将文本直接附加到您的 word 文档中，并将其插入文本的末尾。在这种方法中，您必须首先将所有内容写入文档，一旦完成，您就可以通过以下方式附加文档

//

```
public void WriteTextToWordDocument()
{    
    using(WordprocessingDocument doc = WordprocessingDocument.Open(documentPath, true))
    {
        MainDocumentPart mainPart = doc.MainDocumentPart;
        Body body = mainPart.Document.Body;
        Paragraph paragraph = new Paragraph();
        Run run = new Run();
        Text myText = new Text("Append this text at the end of the word document");
        run.Append(myText);
        paragraph.Append(run);
        body.Append(paragraph);

        // dont forget to save and close your document as in the following two lines
        mainPart.Document.Save();
        doc.Close();
    }
} 
```

我还没有测试过上面的代码，但希望它能给你一个在 OpenXML 中处理 word 文档的想法。问候，

# jquery - 无法在 AJAX 成功函数中引用 $(this) 选择器

> ID：14353962
> 
> 赞同：0
> 
> 时间：2013-01-16T08:20:18.980
> 
> 标签：jquery, ajax, fullcalendar, selector

我想从[fullCalender](http://arshaw.com/fullcalendar/)中删除事件，但我遇到了从日历中删除元素的问题。

当我 `current.remove();`在确认删除过程的条件之前，它运行良好并且事件被删除，但是在成功方法中它不会影响元素，即使我正在兑现`$(this)` 选择器！

```
 $('#calendar').fullCalendar({
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month'
        },

        editable: true,
        droppable: true, // this allows things to be dropped onto the calendar !
        events : url+"CalEvent",
        drop: function(date, allDay) { // this function is called when something is dropped

            // retrieve the dropped element's stored Event Object
            var originalEventObject = $(this).data('eventObject');

            // we need to copy it, so that multiple events don't have a reference to the same object
            var copiedEventObject = $.extend({}, originalEventObject);

            // assign it the date that was reported
            copiedEventObject.start = date;
            copiedEventObject.allDay = allDay;  

            //save event to db
            jQuery.ajax({
                url: url+"addCalEvent",
                type: "POST",
                dataType: 'JSON',
                data:{
                    'eventObj':copiedEventObject
                },

                error: function (request, status, error) {  
                    alert('خطأ في إضافة الحدث ');
                    revertFunc();
                }
            });

            // render the event on the calendar
            // the last `true` argument determines if the event "sticks" (http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)
            $('#calendar').fullCalendar('renderEvent', copiedEventObject, true);

            // is the "remove after drop" checkbox checked?
            if ($('#drop-remove').is(':checked')) {
                // if so, remove the element from the "Draggable Events" list
                $(this).remove();
            }

        } ,
//////////////////////////////////////////////////////
// here is the problem I face with deleting the event ////
        eventClick: function(event, element) {

        var current = $(this);

     if(confirm('هل متأكد من حذف الحدث')){
                jQuery.ajax({
                    url: url+"delCalEvent",
                    type: "POST",
                    dataType: 'JSON',
                    data:{
                        'eventId':event.id
                    },
                    success:function(){

                        current.remove();
                        $('#calendar').fullCalendar('updateEvent', event);
                    },
                    error: function (request, status, error) {  
                        alert('خطأ في حذف الحدث ');
                        revertFunc();
                    }
                });

            } 

        },

        eventDrop: function(event,dayDelta,minuteDelta,allDay,revertFunc) {
            //check for changes
            if (!confirm("هل أنت متأكد من تغيير موعد الحدث ؟")) {
                revertFunc();
            }else{
                //update current event 
                jQuery.ajax({
                    url: url+"updateCalEvent",
                    type: "POST",
                    dataType: 'JSON',
                    data:{
                        'eventObj':event
                    },

                    error: function (request, status, error) {  
                        alert('خطأ في تعديل الحدث ');
                        revertFunc();
                    }
                });
            }

        } 

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:40:31.060

您可以使用 fullCalendar删除事件，而不是使用 JQuery`remove()`和：`updateEvent``removeEvents`

```
 eventClick: function(event, element) {

     var current = event;

     if(confirm('هل متأكد من حذف الحدث')){
            jQuery.ajax({
                url: url+"delCalEvent",
                type: "POST",
                dataType: 'JSON',
                data:{
                    'eventId':event.id
                },
                success:function(){
                    $('#calendar').fullCalendar('removeEvents', current.id);
                },
                error: function (request, status, error) {  
                    alert('خطأ في حذف الحدث ');
                    revertFunc();
                }
            });
       } 
    }, 
```

# php - 在while循环中更改id后添加新元素

> ID：14353966
> 
> 赞同：0
> 
> 时间：2013-01-16T08:20:52.223
> 
> 标签：php, mysql, loops, while-loop

我有 while 循环从 mysql 表中获取信息。但不知道如何找到包含相同内容的 las 条目`factor_id`并在其后添加附加新元素。

```
 if ($this->_db->numRows() > 0) {
        $i = 1;
        $j = '';
        $row = '';
        while ($row = mysqli_fetch_assoc($res_info)) {

            if ($row['task_factor_category'] != $j) {
                $title = '<tr><td colspan="4" class="title" style="text-align: left;">' . $row['task_factor_category'] . '</td></tr>';
                $comment = '<tr><td class="title" style="text-align: left" colspan="4">' . $this->_glan['comments'] . '</td></tr><tr><td colspan="4"><textarea cols="82" rows="3" name="factor_comment[' . $row['factor_id'] . ']" id="' . $row['factor_id'] . '"></textarea></td></tr>';
            } else {
                $title = false;
                $comment = false;
            }
            $this->reg['edit_fields']['factors'] .= $title . '<tr>
        <td>
        ' . $row['factors'] . '
        </td>
        <td>
        <input type="radio" name="task_factor[' . $i . '_' . $row['factor_id'] . ']" value="1"  />
        </td>
        <td>
        <input type="radio" name="task_factor[' . $i . '_' . $row['factor_id'] . ']" value="2" checked />
        </td>
        <td>
        <input type="radio" name="task_factor[' . $i . '_' . $row['factor_id'] . ']" value="3" />
        </td>
        </tr>
        ';
            $j = $row['task_factor_category'];
            $i++;
        }
    } 
```

输出是这样的：

```
 //results with $row['factor_id'] = 10;
title
    1\. entry
    2\. entry
    3\. entry
    4\. entry
    5\. entry
  //need new element here

  //results with $row['factor_id'] = 11;
 title
    1\. entry
    2\. entry
    3\. entry
    4\. entry
    5\. entry
   //need new element here

    ...... 
```

我需要在包含相同因子 id 的最后一个条目之后添加其他元素

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:19:31.990

你可能想试试这个。

```
$id = array();
$i = 0;

while ($row = mysqli_fetch_assoc($res_info))
{
    $id[$i] = $row['id'];

    if ($i != 0 && $id[$i-1] != $row['id']) {
        //new element
    } else {
        //same element
    }
    $i++
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:39:17.897

假设有 7 行，您可以计算总行数

在 while 循环中添加一个 if 代码，例如

```
while(cond)
{
    if($i == 7 )
    {
      then echo("what ever you want");
    }
} 
```

# android - 在画布上用多种颜色绘制线条

> ID：14353968
> 
> 赞同：1
> 
> 时间：2013-01-16T08:21:10.840
> 
> 标签：android, canvas, colors, bitmap

Android 开发新手，我的应用是在画布上绘制路径（具有位图），从颜色选择器中选择多种颜色。先前绘制的路径颜色正在使用画布上的新路径颜色进行更新。任何帮助我，这是我的代码......

```
@Override
public void run() {
    // TODO Auto-generated method stub
    while (locker) {
        canvas = null;
        try {
            if (!holder.getSurface().isValid()) {
                continue;
            }
            canvas = holder.lockCanvas();

            draw(canvas);

        } finally {
            if (canvas != null) {
                holder.unlockCanvasAndPost(canvas);
            }
        }
    }
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    // synchronized (thread.getSurfaceHolder()) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        path = new Path();
        path.moveTo(event.getX(), event.getY());
        path.lineTo(event.getX(), event.getY());
    } else if (event.getAction() == MotionEvent.ACTION_MOVE) {
        path.lineTo(event.getX(), event.getY());
    } else if (event.getAction() == MotionEvent.ACTION_UP) {
        path.lineTo(event.getX(), event.getY());
        paths.add(path);
    }
    return true;
    // }
}

/**
 * This method deals with paint-works. Also will paint something in
 * background
 */
private void draw(Canvas canvas) {
    Bitmap bitmap = BitmapFactory.decodeResource(getResources(),
            R.drawable.bell);
    // canvas.drawColor(Color.CYAN);
    canvas.drawBitmap(bitmap, 20, 20, mPaint);
    // canvas.drawPath(mPath, mPaint);
    for (Path path : paths) {
        // canvas.drawPoint(graphic.x, graphic.y, mPaint);
        canvas.drawPath(path, mPaint);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:38:13.540

您需要记住每条路径的绘制颜色。例如，您可以拥有一个与路径列表同时填充的颜色列表（整数）。然后在你的 draw 方法中这样做：

```
private void draw(Canvas canvas) {
    Bitmap bitmap = BitmapFactory.decodeResource(getResources(),
            R.drawable.bell);
    canvas.drawBitmap(bitmap, 20, 20, mPaint);

    int count = path.size();
    for (int i = 0; i < count; i++) {
        mPaint.setColor(colors.get(i));
        canvas.drawPath(paths.get(i), mPaint);
    }
} 
```

# sql-server - 如何为此数据生成 SQL 查询？

> ID：14353971
> 
> 赞同：1
> 
> 时间：2013-01-16T08:21:14.547
> 
> 标签：sql-server, intervals

我有一个 SQL Server 2005 表，其中存储了两个学生之间发生的书籍交换。

```
ExchangeID   BookID   ExchangeDate   FromPersName   ToPersName
1            23       23.12.2011     John           Matt
2            22       15.02.2012     Billy          Ken
3            23       27.12.2011     Matt           Riddley
5            23       05.03.2012     Riddley        Josh
6            22       08.03.2012     Ken            Rachel
7            23       19.03.2012     Josh           Laura
8            23       15.01.2013     Laura          Mike
9            22       17.01.2013     Rachel         Stephanie 
```

我想生成一个指定年份的报告，如下所示：

```
Year:2012

BookID    PersonName      ReceivingDate   DeliveryDate
23        Matt            01.01.2012      27.02.2012
23        Riddley         27.02.2012      05.03.2012
23        Josh            05.03.2012      19.03.2012
23        Laura           19.03.2012      31.12.2012
22        Ken             01.01.2012      08.03.2012
22        Rachel          08.03.2012      31.12.2012 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:47:25.663

表可以自己加入

```
select ex1.BookID,ex1.toPersName,ex1.ExchangeDate as DeliveryDate,Exchanges.ExchangeDate    
as ReceivingDate from Exchanges as ex1 inner join Exchanges on      
ex1.toPersName=Exchanges.FromPersName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:29:13.070

这是一半的解决方案。你需要稍微改变一下才能工作。我不会对你的作业做完整的询问。用点力吧！

[http://sqlfiddle.com/#!3/39d73/17](http://sqlfiddle.com/#!3/39d73/17)

# c# - 应用程序存在时保持设置的最佳方式

> ID：14353972
> 
> 赞同：0
> 
> 时间：2013-01-16T08:21:16.313
> 
> 标签：c#, .net, windows-8, microsoft-metro

我有一个 Metro 应用程序，我需要在其中保存一些有关当前“会话”的数据，以便下次用户启动我的应用程序时，可以恢复此会话数据。一些数据不是为用户准备的，而是帮助哪些数据应该立即显示，哪些数据应该在用户请求时稍后显示。

我一直在使用[`LocalSettings`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.localsettings.aspx)其他东西，但刚刚注意到这些设置似乎只在应用程序的生命周期内持续存在。

我们应该如何存储需要保存到应用程序数据文件夹的设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T05:34:33.793

您可以通过将数据绑定到某种格式，将其保存在文件中，在应用程序启动时检索它来实现它。

*   创建一个应用程序数据容器。
*   使用您希望的名称初始化 StorageFile。
*   使用DataContractSerializer序列化您的“主题/设置”对象。
*   将内容写入创建的 StorageFile 实例。

**在应用程序启动时：**

*   反序列化数据。
*   以您想要的方式填充。

*您可以使用@Lütfullah Kus*提到的 XML

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:01:40.917

您可以将日志存储到 xml 文件中，例如“lastform:frmSomething;lastwindow:somewindow...”，并且可以在应用程序再次启动时重新加载它。*

# javascript - JSON 到数组 - 如何解析这样的结构？

> ID：14353975
> 
> 赞同：0
> 
> 时间：2013-01-16T08:21:29.973
> 
> 标签：javascript, jquery, json

我的 JSON 对象具有以下结构：

```
{ key :
[
{keya1:value1,
keya2:value2,
keya3:[value31,value32...]
keya4:value4
},
{keyb1:value1,
keyb2:value2,
keyb3:[value31,value32...]
keyb4:value4
},
...
..
{keys1:value1,
keys2:value2,
keys3:[value31,value32...]
keys4:value4
}
]
} 
```

我尝试使用简单的 json.parse 但它不起作用。有了这样的结构，我应该如何进行解析，以便我可以安全地遍历 key 的每个实例并显示所有 keya-valuea、keyb-valueb .. 键值对？非常感谢！

编辑：我实际上故意省略了引号。原始 JSON 数据在键和值周围有引号。抱歉，我之前没有提到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:29:15.020

尝试使用 getJsonArray

```
JSONObject json = (JSONObject) JSONSerializer.toJSON(response);

JSONArray array= json.getJSONArray("key"); 
```

或`getString("key");`在适用的情况下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:43:42.567

您的 JSON 无效，您需要在数组后使用双引号和逗号，当您有正确的 JSON 时，您可以使用`JSON.parse`

```
{ "key" :
        [{
          "keya1":"value1",
          "keya2":"value2",
          "keya3":["value31","value32..."],
          "keya4":"value4"
         },
         {
          "keyb1":"value1",
          "keyb2":"value2",
          "keyb3":["value31","value32..."],
          "keyb4":"value4"
         },
         {
          "keys1":"value1",
          "keys2":"value2",
          "keys3":["value31","value32..."],
          "keys4":"value4"
         }
    ]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T08:53:42.540

尝试引用每个键和值：

```
var str = '{ key : \
    [ \
        {\
            keya1:value1, \
            keya2:value2, \
            keya3:[value31,value32], \
            keya4:value4 \
        }, \
        {\
            keyb1:value1, \
            keyb2:value2, \
            keyb3:[value31,value32], \
            keyb4:value4 \
        }, \
        {\
            keys1:value1, \
            keys2:value2, \
            keys3:[value31,value32], \
            keys4:value4 \
        } \
    ] \
}';

var pattern=/(\w+\d*)/ig;
var json=str.replace(pattern, '"$1"');
var parsedJSON=JSON.parse(json)
console.log(parsedJSON); 
```

我希望这有帮助。

# javascript - 如何解析纯函数

> ID：14353978
> 
> 赞同：3
> 
> 时间：2013-01-16T08:21:47.520
> 
> 标签：javascript, functional-programming, code-analysis

假设您具有以下功能

```
var action = (function () {

  var a = 42;
  var b = 2;

  function action(c) {
    return a + 4 * b + c;
  }

  return action;
}());

// how would you parse action into it's serialized LISP / AST format?
var parsed = parse(action); 
```

是否有可能有一个函数引用该函数`action`并输出 LISP 格式`(lambda (c) (plus (plus 42 (multiply 4 2)) c))`

我们被允许对`action`可以做的事情进行一些限制。

*   正文应该只是一个表达式
*   它应该是一个纯函数
*   任何自由变量都是常数

主要问题是给定一个函数，您可以使用一系列输入调用它的源代码，您能否找到正确的值来替换自由变量？

对于上面的示例，您知道 a 和 b 是常数，您可以智能地绘制几个值的输出并查看模式，然后就知道常数是什么。

### 问题：

您将如何编写一个函数，该函数采用函数引用及其源代码，并为该函数生成某种形式的 AST，并用任何自由变量替换它们的运行时值。

AST 格式的一个示例是代码的 LISP 等价物。

我基本上想序列化和反序列化函数并让它表现相同

应该注意的是，如果传递`{ a: a, b: b }`给分析函数，问题就会变得微不足道。那就是作弊。

### 用例：

我想生成一个与语言无关的纯 JavaScript 函数形式，这样我就可以有效地将它传递给 C++，而不需要我的库的用户使用 DSL 来创建这个函数

假设您有一个数据库驱动程序

```
var cursor = db.table("my-table").map(function (row) {
  return ["foo", row.foo]
}) 
```

您想在运行时确定函数是什么并将其转换为 AST 格式，以便您可以使用高效的查询构建器将其转换为 SQL 或数据库具有的任何查询引擎。

这意味着您不必编写：

```
var cursor = db.table("my-table").map(function (rowQueryObject) {
    return db.createArray(db.StringConstant("foo"), rowQueryObject.getProperty("foo"))
}) 
```

这是 DB 库可以使用查询对象执行的功能，让您无需冗长的方法即可构建查询对象转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:06:49.067

这是一个完整的解决方案（使用 parse 函数可访问的变量目录）：

```
var CONSTANTS = { 
   a: 42,
   b: 2,
   c: 4
};

function test() {
    return a + 4 * b + c;
}

function getReturnStatement(func) {
    var funcStr = func.toString();
    return (/return\s+(.*?);/g).exec(funcStr)[1];
}

function replaceVariables(expr) {
    var current = '';
    for (var i = 0; i < expr.length; i += 1) {
        while (/[a-zA-Z_$]/.test(expr[i]) && i < expr.length) {
            current += expr[i];
            i += 1;
        }
        if (isNumber(CONSTANTS[current])) {
            expr = expr.replace(current, CONSTANTS[current]);
        }
        current = '';
    }
    return expr;
}

function isNumber(arg) {
    return !isNaN(parseInt(arg, 10));
}      

function tokenize(expr) {
    var tokens = [];
    for (var i = 0; i < expr.length; i += 1) {
        if (isWhitespace(expr[i])) {
            continue;
        } else if (isOperator(expr[i])) {
            tokens.push({
                type: 'operator',
                value: expr[i]
            });
        } else if (isParentheses(expr[i])) {
            tokens.push({
                type: 'parant',
                value: expr[i]
            });
        } else {
            var num = '';
            while (isNumber(expr[i]) && i < expr.length) {
                num += expr[i];
                i += 1;
            }
            i -= 1;
            tokens.push({
                type: 'number',
                value: parseInt(num, 10)
            });
        }
    }
    return tokens;
}

function toPrefix(tokens) {
    var operandStack = [],
        operatorStack = [],
        current,
        top = function (stack) {
            if (stack) {
                return stack[stack.length - 1];
            }
            return undefined;
        };

    while (tokens.length) {
        current = tokens.pop();
        if (current.type === 'number') {
            operandStack.push(current);
        } else if (current.value === '(' || 
                !operatorStack.length || 
                (getPrecendence(current.value) >
                 getPrecendence(top(operatorStack).value))) {

            operatorStack.push(current);
        } else if (current.value === ')') {
            while (top(operatorStack).value !== '(') {
                var tempOperator = operatorStack.pop(),
                    right = operandStack.pop(),
                    left = operandStack.pop();
                operandStack.push(tempOperator, left, right);
            }
            operatorStack.pop();
        } else if (getPrecendence(current.value) <= 
                getPrecendence(top(operatorStack).value)) {
            while (operatorStack.length &&
                    getPrecendence(current.value) <=
                    getPrecendence(top(operatorStack).value)) {

                tempOperator = operatorStack.pop();
                right = operandStack.pop();
                left = operandStack.pop();
                operandStack.push(tempOperator, left, right);
            }
        }

    }

    while (operatorStack.length) {
        tempOperator = operatorStack.pop();
        right = operandStack.pop();
        left = operandStack.pop();
        operandStack.push(tempOperator, left, right);
    }

    return operandStack;
}

function isWhitespace(arg) {
    return (/^\s$/).test(arg);
}

function isOperator(arg) {
    return (/^[*+\/-]$/).test(arg);
}

function isParentheses(arg) {
    return (/^[)(]$/).test(arg);
}

function getPrecendence(operator) {
    console.log(operator);
    switch (operator) {
        case '*':
            return 4;
        case '/':
            return 4;
        case '+':
            return 2;
        case '-':
            return 2;
        default:
            return undefined;
    }
}

function getLispString(tokens) {
    var result = '';
    tokens.forEach(function (e) {
        if (e)
            switch (e.type) {
            case 'number':
            result += e.value;
            break;
            case 'parant':
            result += e.value;
            break;
            case 'operator':
            result += getOperator(e.value);
            break;
            default:
            break;
        }
        result += ' ';
    });
    return result;
}

function getOperator(operator) {
    switch (operator) {
        case '+':
            return 'plus';
        case '*':
            return 'multiplicate';
        case '-':
            return 'minus';
        case '\\':
            return 'divide';
        default:
            return undefined;
    }
}

var res = getReturnStatement(test);
console.log(res);
res = replaceVariables(res);
console.log(res);
var tokens = tokenize(res);
console.log(tokens);
var prefix = toPrefix(tokens);
console.log(prefix);
console.log(getLispString(prefix)); 
```

我只是写了它，所以风格可能存在一些问题，但我认为这个想法很清楚。

您可以使用方法获取函数体`.toString`。之后可以使用正则表达式匹配return语句

```
(/return\s+(.*?);/g).exec(funcStr)[1]; 
```

注意这里必须使用分号才能成功匹配！在下一步中，使用该`CONSTANTS`对象将所有变量转换为数值（我看到您还剩下一些参数，因此您可能需要在此处进行少量修改）。之后，字符串被标记化，以便于解析。在下一步中，中缀表达式被转换为前缀表达式。在最后一步，我构建了一个字符串，它将使输出看起来像您需要的那样（`+`- `plus`，`-`-`minus`等等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:48:03.877

由于我不确定您是否能够在调用该方法后获得该方法的主体，所以这是一个替代解决方案：

```
var a = 42;
var b = 2;

function action(c) {
  return a + 4 * b + c;
}

/**
 * get the given func body
 * after having replaced any available var from the given scope
 * by its *real* value
 */
function getFunctionBody(func, scope) {
  // get the method body
  var body = func.toString().replace(/^.*?{\s*((.|[\r\n])*?)\s*}.*?$/igm, "$1");  
  var matches = body.match(/[a-z][a-z0-9]*/igm);
  // for each potential var
  for(var i=0; i<matches.length; i++) {
    var potentialVar = matches[i];
    var scopedValue = scope[potentialVar];
    // if the given scope has the var defined
    if(typeof scopedValue !== "undefined") {
      // add "..." for strings
      if(typeof scopedValue === "string") {
        scopedValue = '"' + scopedValue + '"';
      }
      // replace the var by its scoped value
      var regex = new RegExp("([^a-z0-9]+|^)" + potentialVar + "([^a-z0-9]+|$)", "igm");
      var replacement = "$1" + scopedValue + "$2";
      body = body.replace(regex, replacement);
    }
  }
  return body;
}

// calling
var actionBody = getFunctionBody(action, this);

// log
alert(actionBody); 
```

印刷：

```
return 42 + 4 * 2 + c; 
```

**[演示](http://jsfiddle.net/7GZ7Y/)**

然后，您必须实现自己的`function toLISP(body)`功能或您可能需要的任何其他功能。

请注意，它不适用于复杂的作用域变量，例如`var a = {foo: "bar"}`.

# excel - Excel：我怎样才能在函数中有类似于 Row() 的东西

> ID：14353986
> 
> 赞同：-2
> 
> 时间：2013-01-16T08:22:06.250
> 
> 标签：excel, vba

`=Row()`给我计算公式的行。

我想创建一个函数，用于公式，实现相同的效果（本质上，我想用一个简单的函数调用替换一个长公式）。

我怎样才能做到这一点？

具体来说，我希望它在我复制单元格或使用 ctrl+d 时工作（因此在函数中使用 ActiveCell 对我不起作用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:58:05.713

您可以使用`Application.Caller`来获取有关从何处调用函数的信息。

例子。将此代码放在一个模块中：

```
Function qq()
qq = Application.Caller.Row
End Function 
```

然后您可以使用该函数`=qq()`返回调用单元格的行

# hibernate - 获取无法从 Tridion 2011 中的 Hibernate 查询中找到命名参数

> ID：14353996
> 
> 赞同：0
> 
> 时间：2013-01-16T08:22:46.943
> 
> 标签：hibernate, tridion, tridion-2011, tridion-content-delivery, tridion-storage-extension

我的 DAO 类中有以下方法。

```
public PublishAction findbyLatestPublishedDate(int tcmURI,int pubID) throws StorageException
{
    log.info("Entering Method: JPAPublishActionDAO.PublishAction.findbyLatestPublishedDate");
    StringBuilder queryBuilder = new StringBuilder();
    queryBuilder.append("select pa from PublishAction pa where pa.id in(select pb.id from PublishAction pb where pb.ITEM_REFERENCE_ID=:tcmURI and pb.PUBLICATION_ID=:pubID and rownum <= 1 order by pb.LAST_PUBLISHED_DATE desc)");

    Map<String, Object> queryParams = new HashMap<String, Object>();   
    queryParams.put("ITEM_REFERENCE_ID", tcmURI);
    queryParams.put("PUBLICATION_ID", pubID);

    log.debug("JPAPublishActionDAO findbyLatestPublishedDate -> queryBuilder- "+ queryBuilder.toString());        
    return executeQuerySingleResult(queryBuilder.toString(), queryParams);
} 
```

它给出以下错误：

```
2013-01-16 12:17:01,381 ERROR DeployPipelineExecutor - Original stacktrace for transaction: tcm:0-5607662-66560
java.lang.IllegalArgumentException: org.hibernate.QueryParameterException: could not locate named parameter [PUBLICATION_ID] 
```

这是 HQL 在我的日志中内部生成的查询：

```
2013-01-16 12:17:01,365 DEBUG QueryTranslatorImpl - SQL: select publishact0_.ID as ID66_, publishact0_.ITEM_REFERENCE_ID as ITEM2_66_, publishact0_.LAST_PUBLISHED_DATE as LAST3_66_, publishact0_.PUBLICATION_ID as PUBLICAT4_66_, publishact0_.ACTION as ACTION66_, publishact0_.FLAG as FLAG66_, publishact0_.ITEM_TYPE as ITEM7_66_, publishact0_.SCHEMA_ID as SCHEMA8_66_, publishact0_.URL as URL66_ from AUTN_ITEMS publishact0_ where publishact0_.ID in (select publishact1_.ID from AUTN_ITEMS publishact1_ where publishact1_.ITEM_REFERENCE_ID=? and publishact1_.PUBLICATION_ID=? and rownum<=1 order by publishact1_.LAST_PUBLISHED_DATE desc) 
```

我可以看到 PUBLICATION_ID 列存在于我的实体以及我的 SQL 表中。

请建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T09:15:49.560

JPQL（或 HQL）的美妙之处在于您可以在查询中使用 Java 类的属性。您不应将 JPQL 语法与普通 SQL 语法结合使用。您应该将`pb.ITEM_REFERENCE_ID=:tcmURI`,`pb.PUBLICATION_ID=:pubID`和`pb.LAST_PUBLISHED_DATE`替换为`pb.tcmuri=:tcmURI`,`pb.publicationId=:pubID`和`pb.last_published_date`。除此之外，您的参数映射应包含 tcmURI 和 pubID，而不是您在其中放置的内容。请注意，我用您实体中的实际字段替换了数据库中的列。作为结论，您的方法应如下所示：

```
queryBuilder.append("select pa from PublishAction pa where pa.id in(select pb.id from PublishAction pb where pb.tcmuri=:tcmURI and pb.publicationId=:pubID and rownum <= 1 order by pb.last_published_date desc)");

Map<String, Object> queryParams = new HashMap<String, Object>();   
queryParams.put("tcmURI", tcmURI);
queryParams.put("pubID", pubID); 
```

或者，您可以像这样将查询拆分为 2：

```
StringBuilder queryBuilder = new StringBuilder();
queryBuilder.append("from PublishAction pb where pb.tcmuri=:tcmURI and pb.publicationId=:pubID order by pb.last_published_date desc");

Map<String, Object> queryParams = new HashMap<String, Object>();   
queryParams.put("tcmuri", tcmURI);
queryParams.put("pubID", pubID);

final List<PublishAction> myActions = super.executeQueryListResult(queryBuilder.toString(), queryParams, 1);

if (myActions != null && !myActions.isEmpty()) {
    StringBuilder queryBuilderFinal = new StringBuilder();
    queryBuilderFinal.append("select pa from PublishAction pa where pa.id=:myId");

    Map<String, Object> queryParamsFinal = new HashMap<String, Object>();   
    queryParamsFinal.put("myId", myActions.get(0).getId());

    return super.executeQuerySingleResult(queryBuilderFinal.toString(), queryParamsFinal)
} 
```

请注意，我只能猜测您的 Java 类中的属性名称是什么，所以我只是猜测您有`tcmuri`,`publicationId`和`last_published_date`属性。

希望这可以帮助。

# ios - 我可以防止键盘分裂吗？

> ID：14353997
> 
> 赞同：0
> 
> 时间：2013-01-16T08:22:48.747
> 
> 标签：ios, objective-c, uikeyboard

用户可以在我的应用程序中拆分键盘。我想防止键盘与用户分开我该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:46:04.043

无法禁用从用户拆分键盘的选项。请[在此处](https://stackoverflow.com/questions/7809997/ios-5-any-way-to-prevent-keyboard-splitting)查看其他选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:33:53.803

很抱歉，**不**，你不能通过代码做到这一点。

此功能在**iOS 5**及更高版本中引入。

如果用户不想要此功能，则可以从设置应用程序中将其关闭。

![分体键盘](../Images/77c5984bca68d83b84f3de4a28eeeab3.png)

据我所知，直到现在（2013 年 1 月 16 日），苹果还没有提供任何 API 来执行此操作。

# google-app-engine - GAE：为什么即使我已将实例数固定为一个，我仍会遇到加载请求？

> ID：14353999
> 
> 赞同：3
> 
> 时间：2013-01-16T08:22:56.220
> 
> 标签：google-app-engine

我有一个低负载应用程序，由于加载请求，它经历了延迟峰值（请求最多需要 10 秒才能返回），如日志中所示：

> 此请求导致为您的应用程序启动一个新进程，从而导致您的应用程序代码首次加载。

在这里，我假设“新流程”意味着“新实例”。

为了避免这种情况，我将空闲实例的数量固定为一个（max=1 和 min=1），所以总是有一个实例在运行（“驻留实例”），GAE 不应该启动新的实例。计费已启用。

但是，我仍然遇到加载请求。为什么？对此有什么可做的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T10:39:49.920

空闲实例是“保留”实例 - 它们旨在处理流量增加时的峰值，而不是“正常”流量。空闲实例仅在动态实例启动期间使用。

因此，当您有一个空闲实例且没有运行动态实例并且您收到请求时，空闲实例*应该*处理该请求，但仍会启动一个新的动态实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T09:02:54.723

我的低流量应用程序也遇到了同样的问题，这是一个实用的解决方案，它几乎总是可以防止我的用户面临冷启动： - 1 个常驻 F4 实例 - 等待延迟到 15 秒 - 我工作以便我的热身请求是尽可能快（不到 10 秒），仍然很长，因为我使用框架 Play（Java） - 当我真的不想有任何问题时，我通过 ping 我的应用程序来创建虚假流量。

使用此配置，常驻者通常服务大约 50 个请求，在此期间，动态实例接收预热然后开始服务。