# StackOverflow 问答 15468000-15468999

# java - Minesweeper - 在线法官“错误答案”，尽管它适用于 Netbeans

> ID：15468001
> 
> 赞同：1
> 
> 时间：2013-03-18T00:26:08.713
> 
> 标签：java

我试图提交关于 UVa 的扫雷问题（[http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&category=24&page=show_problem&problem=1130](http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&category=24&page=show_problem&problem=1130)）

样本输入：

```
4 4
*...
....
.*..
.... 
```

样本输出：

```
*100
2210
1*10
1110 
```

我在 NetBeans 上开发了代码。我已经对其进行了测试并且工作正常，但是当我尝试在 UVa 上提交它时，它会导致提交的答案错误。

我有两个问题：1）我的代码有什么问题？2) 为 UVa 编码时我应该使用什么以及不应该使用什么？

-如果我应该遵循不同的标准，请提出建议

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class Main {

    public static void main(String[] args) throws IOException{
        BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));
        String line = reader.readLine();
        String REGEX_WHITESPACE = "\\s+";
        String cleanLine = line.trim().replaceAll(REGEX_WHITESPACE, " ");
        String[] numChar = cleanLine.split(REGEX_WHITESPACE);
        int n = new Integer(numChar[0]).intValue();
        int m = new Integer(numChar[1]).intValue();
        char[][] mine = new char[n][m];
        char[] curLine;

        for(int i=0;i<n;i++){
                line=reader.readLine();
                cleanLine = line.trim().replaceAll(REGEX_WHITESPACE, " ");
                curLine = cleanLine.toCharArray();
                if(curLine.length==m){
                    mine[i]=curLine;
                }
        }
        int starsCount=0;
        for(int i=0;i<n;i++){
            for(int j=0;j<m;j++){
                if(mine[i][j]=='*'){
                    System.out.print('*');
                }
                else{
                    try {
                        if (mine[i][j - 1] == '*') {
                            starsCount++;
                        }
                    } catch (Exception e) {
                    }
                    try {
                        if (mine[i][j + 1] == '*') {
                            starsCount++;
                        }
                    } catch (Exception e) {
                    }
                    try {
                        if (mine[i-1][j] == '*') {
                            starsCount++;
                        }
                    } catch (Exception e) {
                    }
                    try {
                        if (mine[i+1][j] == '*') {
                            starsCount++;
                        }
                    } catch (Exception e) {
                    }
                    try {
                        if (mine[i-1][j - 1] == '*') {
                            starsCount++;
                        }
                    } catch (Exception e) {
                    }
                    try {
                        if (mine[i-1][j + 1] == '*') {
                            starsCount++;
                        }
                    } catch (Exception e) {
                    }
                    try {
                        if (mine[i+1][j - 1] == '*') {
                            starsCount++;
                        }
                    } catch (Exception e) {
                    }
                    try {
                        if (mine[i+1][j + 1] == '*') {
                            starsCount++;
                        }
                    } catch (Exception e) {
                    }
                    if(j==m-1){
                        System.out.println(starsCount);
                    }
                    else{
                        System.out.print(starsCount);
                    }
                    starsCount=0;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T00:49:59.027

这是您可以查看的一件事。

当您知道您的程序必须提供看起来完全像样本的输出时，例如在您的情况下

```
*100
2210
1*10
1110 
```

您应该检查隐藏的空白 - 例如空格、制表符、换行符（可以是`\r`或`\n`格式`\r\n`）。特别是，常见的问题是：

- 最后一行之后是否有换行符？

-你的换行符是`\r`还是`\n`有关系`\r\n`吗？

- 如果您在任何地方有多余的空格，或者在开始输出之前有换行符，它是否认为样本不匹配？

- 如果有制表符或大量空格，是否使用制表符代替空格或反之亦然会使样本不被视为匹配？

我在您的代码中看到了一个**潜在的问题。**

如果一行的右边缘是地雷，它将`print('*')`而不是`println('*')`. 为了解决这个问题，不管单元格中的内容是否位于一行的右侧，都执行 println() - 没有打印 OR println 内容的逻辑，只需 println() 本身没有参数。

编辑：正如查理在对原始问题的评论中提到的那样，您必须对程序进行编码以处理多个字段并在每个字段之前打印 Field #num: 。

这意味着不要将所有代码放在 main 中，而应该将创建和解决一个字段的代码放入它自己的方法中，并在仍有要读取的输入时从 main 调用它。

# asp.net - SignalR：建立连接时服务器如何正确订阅组

> ID：15468007
> 
> 赞同：2
> 
> 时间：2013-03-18T00:27:06.710
> 
> 标签：asp.net, .net, signalr

我看过几个地方，但仍然找不到关于如何使用组的明确说明。我正在使用一个组进行过滤（仅将消息传递给客户端的子集）。

我想在`OnConnected`事件中将客户端加入服务器端的组。客户端不需要知道它属于哪些组。

问题：

1.  我还应该覆盖该`OnReconnected`事件吗？

2.  `GroupManager.Add`我应该返回作为`OnConnected`事件结果返回的任务吗？如果我想加入多个组，我可能需要创建一个组合任务。正确的？

3-为什么服务器（见`GroupManager.Add`实现）向`AddToGroup`客户端发送命令？有没有办法解决这个问题？也许通过使用`Client.AllExcept(...)`和手动处理服务器上的组成员身份（糟糕！）？

我正在使用最新版本的 SignalR (1.0.0.1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T02:49:32.137

1.  您不需要覆盖 OnReconnected。当客户端重新连接时，它将重新加入之前所在的所有组。
2.  您不必这样做，但如果您尝试在 OnConnected 中发送到该组（如果您选择不返回组添加任务），您将需要等到任务完成。
3.  您不想解决此问题，其必要的原因之一是因为＃2（客户端需要知道它在哪些组中）。如果要对组进行身份验证以重新连接，您始终可以创建一个中心管道模块并覆盖 BuildRejoiningGroups 函数以执行您自己的验证。

**回应评论**

评论 1：是
评论 2：您必须返回一个任务，否则什么都不会完成（这是设计使然）。如果您不知道要返回什么，您可以随时返回 base.OnConnected()。

当您调用 GroupManager.Add 时，它会返回一个表示连接何时位于所需组中的任务。一旦加入该组，客户端就会通过令牌收到通知，它现在在一个新组中。如果由于失去连接而必须重新连接，令牌将允许客户端重新加入组。

# google-analytics - 如何在我的可嵌入小部件上使用 Google Analytics？

> ID：15468008
> 
> 赞同：3
> 
> 时间：2013-03-18T00:27:20.050
> 
> 标签：google-analytics, google-analytics-api

我提供了一个简单的可嵌入 js 小部件，人们可以将它放在他们的网站上。

我想跟踪印象和行为。

在此小部件上集成 Google Analytics 的正确方法是什么？主机页面很可能已经有谷歌分析，所以我不应该干预它，事件应该发送到我自己的 GA 帐户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T16:41:06.367

我对elado有类似的需求，谢谢你的帖子。

这是我最近的帖子[https://groups.google.com/a/googleproductforums.com/d/msg/analytics/-/HuMDDvKupLQJ](https://groups.google.com/a/googleproductforums.com/d/msg/analytics/-/HuMDDvKupLQJ)

希望它可以简单地跟踪我的小部件上的交互，而不关心主机站点或博客统计信息。

# ios - iOS：如何在关闭需要状态栏的模态 VC 后隐藏状态栏？

> ID：15468009
> 
> 赞同：1
> 
> 时间：2013-03-18T00:27:34.897
> 
> 标签：ios, objective-c

我有一个显示全屏的视图控制器，并且可以从视图控制器显示另一个模态 VC，模态 VC 需要状态栏，但是在关闭模态 VC 控制器后，基本 VC 顶部有状态栏空间，并且即使我设置：

```
[[UIApplication sharedApplication] setStatusBarHidden:YES] 
```

状态栏被隐藏但空间仍然存在，我检查了基础VC的视图框架，它从0开始，我认为我不应该让它的y坐标从-20开始，但是还有什么我可不可以做？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T00:40:53.043

试试这个：

```
[[UIApplication sharedApplication] setStatusBarHidden:NO];
self.view.frame = [[UIScreen mainScreen] applicationFrame]; 
```

来自 applicationFrame 上的文档：

> 此属性包含屏幕边界减去状态栏占用的区域（如果可见）。使用此属性是检索应用程序初始窗口大小的推荐方法。矩形以点为单位指定。

要获得更强大的解决方案，请更改您的框架以响应状态栏框架的更改。您的应用程序委托子类可以实现：

```
-application:willChangeStatusBarFrame:
-application:didChangeStatusBarFrame: 
```

或者，您可以使用 NSNotificationCenter 注册这些通知：

*   UIApplicationWillChangeStatusBarFrameNotification
*   UIApplicationDidChangeStatusBarFrameNotification

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:28:01.210

我已经尝试过您的方法，但它对我不起作用，我以这种方式解决了它，当模态 VC 关闭时，在`viewDidAppear`基本 VC 中我需要：

```
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationNone];
self.wantsFullScreenLayout = YES;
[self.view layoutSubviews]; 
```

我知道这不是一个好的解决方案，但这是我目前唯一能想到的，无论如何感谢您的帮助。

# arrays - 如何根据时间戳对openssl的index.txt进行排序

> ID：15468013
> 
> 赞同：1
> 
> 时间：2013-03-18T00:27:50.830
> 
> 标签：arrays, sorting, lua, openssl

我需要在openssl的index.txt文件中找到具体的记录，然后根据时间戳排序，让最新的记录出现在最上面。我正在将文件读入数组，数组如下所示：（我已将表转储到日志文件中）

```
database= {}
database[1] = "R    140318001552Z   130318002148Z   7D      unknown /CN=test@test.net/emailAddress=test@test.net"
database[2] = "V    140318001809Z           7E      unknown /CN=test@yahoo.com/emailAddress=test@yahoo.com"
database[3] = "V    140318002157Z           7F      unknown /CN=test@yahoo.com/emailAddress=test@yahoo.com" 
```

我希望能够按第二列（即时间戳）对这个数组进行排序。我需要首先对最新记录进行排序。我将如何在 lua 中编写此代码？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T01:04:47.527

如果您的模式是这样固定的，您可以简单地搜索第一个数字（使用`string.match`）并比较这些数字。请注意，这`string.match`会给你字符串而不是数字。但是由于数字的长度相等，因此词法比较就足够了。当然，如果有必要，您可以使用适当的库将该字符串转换为数字甚至日期/时间对象。但让我们保持简单：

```
table.sort(database, function(e1,e2)
    return string.match(e1, "%d+") > string.match(e2, "%d+")
end) 
```

如果应该在排序表中出现，则提供给的函数`sort`应该返回。`true``e1``e2`

# c# - 如何在c#中为android创建数组

> ID：15468015
> 
> 赞同：0
> 
> 时间：2013-03-18T00:27:57.497
> 
> 标签：c#, android, arrays, xamarin.android

还没有找到我要找的东西，所以这是我最后的手段。

如何在 c# 中为 android 创建一个数组，我也可以写一个字符串？

我有一个editText框和一个按钮。我想在editText框中输入文本，然后在单击按钮时将数据输入存储到数组中。

我真的很感激代码示例，因为我真的不明白这一点，而且我没有发现任何关于在 c# for android 中执行此操作的信息。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T00:34:17.383

您需要使用以下方法创建一个数组：

```
string[] strArr = editText.Text.Split('\n'); 
```

或者非常相似的东西。基本上，您将输入视为分隔字符串，例如 CSV，但在这种情况下，分隔符是换行符。如果您需要在更大的基础上访问 strArr，您只需在类顶部的方法之外声明它。

# c# - jqGrid 调用数据绑定时出现奇怪的异常

> ID：15468020
> 
> 赞同：0
> 
> 时间：2013-03-18T00:28:35.707
> 
> 标签：c#, jquery, asp.net-mvc, jqgrid

我一直在使用[Trirand](http://trirand.net/download.aspx)的最新 MVC dll，并且正在使用 JqGrid.Databind() 函数从控制器获取数据。这是我编写的代码：

```
var listToBind = gridDataTable.Cast<IDictionary>().ToDataSource();
gridModel.ResourcePlanningGrid.DataSource = null;

JsonResult returnObject;
try
{
    returnObject = gridModel.ResourcePlanningGrid.DataBind(listToBind.AsQueryable());
}
catch(Exception ex)
{
    //Unknown Exception: delete the current session that holds the grid and 
    //restart the whole page 
    this.Session["ResourcePlanningGrid"] = null;
    return FilterData();
} 
```

它间歇性地在 .DataBind() 调用上抛出一个异常，表示它解析了一个不是有效布尔值的字符串。有没有人遇到过这个？是否有针对此问题的现有修复程序？还是我应该找到另一种方法将列表中的值传递给绑定？

这是异常堆栈跟踪。

```
 at System.Boolean.Parse(String value)
   at System.Convert.ToBoolean(String value)
   at Trirand.Web.Mvc.JQGrid.get_AjaxCallBackMode()
   at Trirand.Web.Mvc.JQGrid.DataBind()
   at Trirand.Web.Mvc.JQGrid.DataBind(Object dataSource)
   at Cormant.OrangeReports.Web.Controllers.ResourcePlanningController.FilterData(Nullable`1 customerID, Nullable`1 projectID, Nullable`1 startDate, Nullable`1 endDate, String employeeID) in e:\Projects\OrangeReports\Cormant.OrangeReports.Web\Controllers\ResourcePlanningController.cs:line 175 
```

提前致谢

# ruby-on-rails - ruby on rails 目录浏览器

> ID：15468026
> 
> 赞同：0
> 
> 时间：2013-03-18T00:29:47.830
> 
> 标签：ruby-on-rails, ruby

我正在尝试编写一个简单的 RoR 应用程序，该应用程序列出特定路径中的所有目录，然后允许我单击该文件或目录以打开文件或打开目录。我正在使用以下代码列出目录，但我不知道如何从这里打开文件或目录。单击目录时，我收到“No route matches [GET]”/selected file”错误。

```
controller
    @file = Dir.foreach ("/specifiedpath/")

view
<% @file.each do |file| %> 
    <tr>
        <td><%= link_to file, file %></td>
    </tr>
<% end %> 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T00:49:24.407

你需要一些`routes.rb`看起来像这样的东西：

```
get '/browse/*path' => 'browse#show', as: :browse 
```

在您的`browse_controller`中，您需要一个执行以下`show`操作的操作：

```
class BrowseController < ApplicationController

  def show
    @path = params[:path] || '/some/default'
    @files = Dir.foreach(path)
  end 
```

最后，在您的`browse/show.html.haml`（我更喜欢 HAML，抱歉）视图中，类似于：

```
- @files.each do |file|
  %tr
    %td= link_to file, browse_path(File.join(@path, file)) 
```

（如果这一切都不能完全奏效，请原谅我——现在还没有时间完全测试一个充实的解决方案——但如果你自己无法让它发挥作用，我可以再深入研究一下。）

# linux - 如何重命名以 Unix 时间戳开头的多个文件 - imapsync 问题

> ID：15468028
> 
> 赞同：1
> 
> 时间：2013-03-18T00:29:58.963
> 
> 标签：linux, timestamp, imap, sync

我没有得到`imapsync`重命名 maildir 文件名的脚本来工作。：-/

所以我需要的是：

我有一个包含数千封邮件的邮件文件夹。将这些电子邮件导入我的新服务器后，电子邮件的文件名将创建日期作为文件名中的`Unix`时间戳，但文件的创建日期标志是来自电子邮件的正确接收日期。

一个文件的 ls -l 如下所示：

```
-rw-r--r-- 1 popuser popuser  1350432 2013-03-16 07:22 1363563215.M562903P29332V0000000000000802I0000000000AEA46B_527.my-domain.org,S=1350432:2,S 
```

所以脚本要做的是：1）读取文件的创建日期/时间（我找到了命令

```
stat -c %y filename 
```

做这个）

2) 将日期/时间从 1) 转换为 Unix 时间戳

```
date -d "2013-03-17 11:19:01.000000000 +0100" "+%s" 
```

3) 删除文件名的前 10 位数字（错误的时间戳），并使用 2) 中的时间戳

4）对特定目录中的所有文件执行此操作

我是`Linux`脚本新手，谁能帮我写这个脚本？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T00:44:30.960

尝试这样做[`rename`](https://metacpan.org/pod/rename)：

```
$ rename -n 's/^\d+/(stat($_))[9]/e' [0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]* 
```

从`shell`提示。它非常有用，您可以像我一样将一些[perl](/questions/tagged/perl "显示标记为“perl”的问题")代码替换为[`stat`](https://perldoc.perl.org/functions/stat.html)with`e`修饰符。

当您的测试有效时，您可以移除`-n`（试运行模式开关）。

[![警告](../Images/02825101137de76a86a477ce35beba42.png)](https://i.stack.imgur.com/nrqg6.png) **还有其他同名的工具可能会也可能不会这样做，所以要小心。**

如果您运行以下命令 ( `linux`)

```
$ file $(readlink -f $(type -p rename)) 
```

你有一个像

```
.../rename: Perl script, ASCII text executable 
```

并且不包含：

```
ELF 
```

那么这似乎是正确的工具=）

如果不是，则使其成为默认值（通常已经如此）`Debian`和衍生，例如`Ubuntu`：

```
$ sudo update-alternatives --set rename /path/to/rename 
```

（替换`/path/to/rename`为您的`perl's rename`命令的路径。

* * *

如果您没有此命令，请搜索您的包管理器进行安装或[手动执行](https://metacpan.org/pod/release/RMBARKER/File-Rename-0.20/rename.PL)

* * *

最后但同样重要的是，这个工具最初是由 Perl 的父亲 Larry Wall 编写的。

* * *

## 编辑

[如此处](https://stackoverflow.com/questions/15468028/how-do-i-rename-multiple-files-beginning-with-a-unix-timestamp-imapsync-issue/15468123?noredirect=1#comment21904887_15468123)所述，如果您有以下错误：

> 参数列表太长

然后`find`像这样使用：

```
find -type f -name '[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]*' -print0|
    xargs -0 -n1 rename -n 's/^\d+/(stat($_))[9]/e' 
```

（不带试试`-n1`，应该也可以）

# ruby-on-rails - 为 Ruby on Rails 应用程序将 Google Maps API V2 转换为 V3

> ID：15468030
> 
> 赞同：-1
> 
> 时间：2013-03-18T00:30:16.873
> 
> 标签：ruby-on-rails, google-maps-api-3, google-maps-api-2

感谢您的任何帮助，您可以提供！

**总结**我有一个用 Ruby on Rails 构建的 Google Maps API V2 地图应用程序，我正在尝试转换为 V3。[我已经使用Tips for Upgrading Gmaps v2 to v3 more faster](https://stackoverflow.com/questions/3901817/tips-for-upgrading-gmaps-v2-to-v3-more-quickly)中的建议更新了我现有的 javascript 。但是，我的地图仍然没有显示在页面上。

**详细信息：**使用 V2，此代码将在单个网页上显示一系列独特的 A 点到 B 点地图。一个用户可能有许多保存的地图，这段代码会显示它们。现在，地图画布和路线无法解析。

再次感谢您的帮助！

**编辑 3：问题是 calcRoute()**

我查看了所有内容并发现地图在我开始添加 Start 和 End 变量之前有效。这些变量看起来应该可以工作，但方向和路线没有出现。在加载这些变量时我做错了什么吗？我已经提供了我的原始 js 和结果。

原来的：

```
function calcRoute() {
var start = <%= savedmap.from %>;
var end = <%= savedmap.to %>;
var request = {
 origin:start,
destination:end,
travelMode: google.maps.DirectionsTravelMode.DRIVING
};
directionsService.route(request, function(response, status) {
if (status == google.maps.DirectionsStatus.OK) {
directionsDisplay.setDirections(response);
}
});
} 
```

结果：

```
function calcRoute() {
var start = 4400 Massachusetts Ave NW Washington, District of Columbia, 20016-8001;
var end = 2121 I Street- NW Washington, District of Columbia, 20052;
var request = {
origin:start,
destination:end,
travelMode: google.maps.DirectionsTravelMode.DRIVING
};
directionsService.route(request, function(response, status) {
if (status == google.maps.DirectionsStatus.OK) {
directionsDisplay.setDirections(response);
}
});
} 
```

**编辑 2：结果发布**

**根据要求，这是我使用编辑 1**中列出的脚本时发生的结果

 **```
<head>
<script src="https://maps.googleapis.com/maps/api/js?key=MYKEY&sensor=false"></script>
        <script type="text/javascript"> 

      var directionsDisplay7656;
      var directionsService7656 = new google.maps.DirectionsService();
      var map7656;

      function initialize() {
        directionsDisplay7656 = new google.maps.DirectionsRenderer();
        var chicago = new google.maps.LatLng(41.850033, -87.6500523);
        var mapOptions = {
          zoom:7,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          center: chicago
        }
        map7656 = new google.maps.Map(document.getElementById("map_canvas7656"), mapOptions);
        directionsDisplay7656.setMap(map7656);
      }

      function calcRoute() {
        var start = 350 5th Ave New York, NY 10118;
        var end = 2 Lincoln Memorial Cir  Washington, DC 20037;
        var request = {
            origin:start,
            destination:end,
            travelMode: google.maps.DirectionsTravelMode.DRIVING
        };
        directionsService7656.route(request, function(response, status) {
          if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay7656.setDirections(response);
          }
        });
      }

        </script>
</head>
<body id="itineraries"
 onload="initialize()">

<input id="auth_token" class="hidden" name="" type="hidden" value="VALUEHERE=" />
<div class="wholemap">
<h4>test</h4>

    <div class="map" id="map_canvas7656"></div>
    <div class="route" id="route7656"></div>
    <div class="clear"></div>
    <a id="print7656" target="_blank" class="printmap">Print this map</a>
    <a class="removemap" href="/savedmaps/7656">Delete this map</a>
    <div class="clear"></div>
    </div>
</body 
```

**编辑 1：第二次尝试**

这一次，我从 Google 的 Directions 示例开始。不幸的是，仍然没有运气。

```
<script src="https://maps.googleapis.com/maps/api/js?key=MYKEY&sensor=false"></script>
<script type="text/javascript"> 
    <% for savedmap in @maps %>
      var directionsDisplay<%= savedmap.id %>;
      var directionsService<%= savedmap.id %> = new google.maps.DirectionsService();
      var map<%= savedmap.id %>;

      function initialize() {
        directionsDisplay<%= savedmap.id %> = new google.maps.DirectionsRenderer();
        var chicago = new google.maps.LatLng(41.850033, -87.6500523);
        var mapOptions = {
          zoom:7,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          center: chicago
        }
        map<%= savedmap.id %> = new google.maps.Map(document.getElementById("map_canvas<%= savedmap.id %>"), mapOptions);
        directionsDisplay<%= savedmap.id %>.setMap(map<%= savedmap.id %>);
      }

      function calcRoute() {
        var start = <%= savedmap.from%>;
        var end = <%= savedmap.to %>;
        var request = {
            origin:start,
            destination:end,
            travelMode: google.maps.DirectionsTravelMode.DRIVING
        };
        directionsService<%= savedmap.id %>.route(request, function(response, status) {
          if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay<%= savedmap.id %>.setDirections(response);
          }
        });
      }
    <% end %>
        </script> 
```

以上是最新版本。原始代码发布如下

**Javascript：**

```
<script src="https://maps.googleapis.com/maps/api/js?key=MYKEY&sensor=false"></script>
    <script type="text/javascript"> 

    <% for savedmap in @maps %>
        var map<%= savedmap.id %>;
        var resultx<%= savedmap.id %>;
        var directionsPanel<%= savedmap.id %>;
        var directions<%= savedmap.id %>;
    <% end %>   
        function initialize() {
            var marker = new google.maps.marker(new google.maps.LatLng(-30.368374, -71.089182)); //initialize a marker out in the middle of nowhere
            google.maps.event.addListener(marker, 'click', function() {  
            });  
            <% for savedmap in @maps %>
                map<%= savedmap.id %> = new google.maps.Map(document.getElementById("map_canvas<%= savedmap.id %>"));
                map<%= savedmap.id %>.setCenter(new google.maps.LatLng(42.351505,-71.094455), 15);
                directionsPanel<%= savedmap.id %> = document.getElementById("route<%= savedmap.id %>");
                directions<%= savedmap.id %> = new google.maps.directions(map<%= savedmap.id %>, directionsPanel<%= savedmap.id %>);
                directions<%= savedmap.id %>.load("from: <%= savedmap.from %> to: <%= savedmap.to %>");
                //google.maps.event.addListener(directions<%= savedmap.id %>, "error", handleErrors);

                map<%= savedmap.id %>.addOverlay(marker);
                map<%= savedmap.id %>.addControl(new google.maps.SmallMapControl());
                map<%= savedmap.id %>.addControl(new google.maps.MapTypeControl());
                $('a#print<%= savedmap.id %>').attr('href', 'http://maps.google.com/maps?f=q&q=from: <%= savedmap.from %> to: <%= savedmap.to %>&t=h&z=13&layer=c&pw=2')                    
            <% end %>
          }
       /*function handleErrors(){
               if (directions<%= savedmap.id %>.getStatus().code == G_GEO_UNKNOWN_ADDRESS)

                 alert("No corresponding geographic location could be found for one of the specified addresses. This may be due to the fact that the address is relatively new, or it may be incorrect.\nError code: " + directions<%= savedmap.id %>.getStatus().code);
               else if (directions<%= savedmap.id %>.getStatus().code == G_GEO_SERVER_ERROR)
                 alert("A geocoding or directions request could not be successfully processed, yet the exact reason for the failure is not known.\n Error code: " + directions<%= savedmap.id %>.getStatus().code);

               else if (directions<%= savedmap.id %>.getStatus().code == G_GEO_MISSING_QUERY)
                 alert("The HTTP q parameter was either missing or had no value. For geocoder requests, this means that an empty address was specified as input. For directions requests, this means that no query was specified in the input.\n Error code: " + gdir.getStatus().code);

            //   else if (gdir.getStatus().code == G_UNAVAILABLE_ADDRESS)  <--- Doc bug... this is either not defined, or Doc is wrong
            //     alert("The geocode for the given address or the route for the given directions query cannot be returned due to legal or contractual reasons.\n Error code: " + gdir.getStatus().code);

               else if (directions<%= savedmap.id %>.getStatus().code == G_GEO_BAD_KEY)
                 alert("The given key is either invalid or does not match the domain for which it was given. \n Error code: " + directions<%= savedmap.id %>.getStatus().code);

               else if (directions<%= savedmap.id %>.getStatus().code == G_GEO_BAD_REQUEST)
                 alert("A directions request could not be successfully parsed.\n Error code: " + directions<%= savedmap.id %>.getStatus().code);

               else alert("An unknown error occurred.");

            } */
        </script> 
```

**Maps.html.erb 代码**

```
<% for savedmap in @maps %>

    <div class="wholemap">
        <% if savedmap.name != nil and savedmap.name != '' %>
        <h4><%= savedmap.name %></h4>
        <% else %>
        <h4>Untitled Map</h4>
        <% end %>
        <a class="directions" href="#">Show Driving Directions</a>
    <div class="clear"></div>
    <div class="map" id="map_canvas<%= savedmap.id %>"></div>
    <div class="route" id="route<%= savedmap.id %>"></div>
    <div class="clear"></div>
    <a id="print<%= savedmap.id %>" target="_blank" class="printmap">Print this map</a>
    <a class="removemap" href="/savedmaps/<%= savedmap.id %>">Delete this map</a>
    <div class="clear"></div>
    </div>
<% end %> 
```

您尚未为此行程添加任何地图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:33:09.280

我认为您在这里发生了一些事情：

1) 在 v3 中，您引用 api 的方式不同。它应该是这样的。

```
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script> 
```

2）你有初始化函数，但你没有在任何地方调用它，比如 onload。

```
google.maps.event.addDomListener(window, 'load', initialize); 
```

3）您设置地图的方式最好尝试设置要传入的选项数组。

```
var mapOptions = {
    zoom: 8,
    center: new google.maps.LatLng(-30.368374, -71.089182),
    mapTypeId: google.maps.MapTypeId.ROADMAP
};
map1 = new google.maps.Map(document.getElementById("map_canvas1"), mapOptions); 
```

4）对于标记尝试像这样设置它。

```
var marker = new google.maps.Marker({
    position: new google.maps.LatLng(-30.368374, -71.089182),
    map: map1,
    title: 'Hello World!'
});
google.maps.event.addListener(marker, 'click', function() {  
    alert('here');
}); 
```

查看 Maps API 示例页面 ( [https://developers.google.com/maps/documentation/javascript/examples/](https://developers.google.com/maps/documentation/javascript/examples/) )。我认为这应该让你直截了当。

通过让它在没有 Ruby 代码的情况下工作来分解问题。只需先使用 Javascript，然后在获得单个地图工作后重新添加 Ruby。我删除了所有 Ruby 代码，通过上面提到的一些更改，我得到了一个显示标记的地图。

- 克里斯**

# .net - 判断 NHibernate Session 是否处于错误状态

> ID：15468031
> 
> 赞同：0
> 
> 时间：2013-03-18T00:30:28.753
> 
> 标签：.net, winforms, nhibernate

全部，

如果发生错误，是否可以从会话对象（ISession 或其 ISessionImplementor）中确定？或者，是否可以连接一个在会话发生错误时调用的偶数处理程序？

我很清楚通过将代码包装在 try/catch 中并立即处理会话来处理会话的模式。不过，在我的例子中，我已经实现了与会话范围等效的东西，它将休眠会话分发给在当前范围内运行的 DAO。当我发出休眠会话时，客户端代码仅使用它来运行持久操作，我不希望客户端负责进行会话清理，这是会话范围的责任。这是示例：

```
using (new SessionScope(SessionHelper.OpenSession()))
{
    // do read/write etc.
    // ex:
    mydao.MakePersistent(someEntity);  // <-- an error can occur here
} // implicit flush/clean up, BUT in order to do this correctly I have to know if the session in the scope has no errors! 
```

如您所见，SessionScope 实现了 IDisposable，我在那里进行了会话终结，如刷新、tx.Commit() 和处置。但是，如果会话发生错误，我无法刷新会话！

一种解决方法是不给出原始休眠会话，而是给出一个带有执行会话操作的方法的包装器对象，这样我就可以在 try/catch 中包装任何操作并知道错误何时发生。如果你问我，那是愚蠢的解决方法。

另一种选择是所有 DAO 都通知我的会话范围发生了错误，这意味着我的所有 DAO 方法（在 catch 块中）必须检查是否定义了会话范围，如果是，它们负责使会话失败(scope.FailSession(session);) 这要好得多，但我必须在我的所有 DAO 中虔诚地这样做，如果我忘记了，我的会话范围将通过在错误会话上调用 session.Flush() 来行为不端。

感谢 Oskar B. 的评论，对于任何需要具有 ACID 属性或存在与持久性无关的异常风险的逻辑，都需要使用基于事务的方法。这是修改后的解决方案：

```
using (var txScope = new TransactionScope(SessionHelper.OpenSession()))
{
     Customer cust = mydao.getCustomer();
     Order order = mydao.getOrder(cust);
     // modify order, etc. (an error may occur at any time within this scope)
     txScope.VoteCommit();           
} // if we voted commit, it will flush/commit otherwise it will rollback 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:29:11.153

通常，您会将事务与会话分开，因为我们通常希望应用程序代码确认事务提交（通过在没有异常的情况下到达 tx.Commit() 行）。然后会话范围的 Dispose() 就变成了简单的 session.Dispose()。

一种方法是简单地将您对 scope.FailSession() 的想法替换为 scope.CompleteSession()。这与上述类似 - 如果您忘记它，将不会保存任何内容，并且问题将立即显现。

通常，我们在更大的范围内处理会话——而不是在特定的 DAO 中，因为这使得在单个事务中执行“用户请求”的整个工作变得困难。通常当异常发生时，它会导致其余的域逻辑和其他“应用程序代码”被跳过。所以实际的异常处理和会话处理只需要出现在代码的几个部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T01:11:15.073

看来唯一的方法是处理异常并处理它。

# eclipse - 无法更新 Eclipse 4.2.1

> ID：15468033
> 
> 赞同：1
> 
> 时间：2013-03-18T00:30:32.023
> 
> 标签：eclipse

我无法从`Help > Check for Updates`.

错误信息：

```
Cannot complete the install because some dependencies are not satisfiable
  org.eclipse.actf.visualization.ui.pdt.feature.group [1.0.2.R201302130546] cannot be installed in this environment because its filter is not applicable. 
```

环境：

```
OS X version: 10.8.3 
```

蚀：

```
Eclipse Platform
Version: 4.2.1
Build id: M20120914-1800 
```

我不知道如何解决这个问题。突然之间，似乎*每个组件都*需要更新，同时它们都没有正确更新。

“每个组件”是指**每个组件**：

```
Acceleo SDK 3.3.2.201302130808
ACTF Visualization Extension for PDT Feature    1.0.2.R201302130546
ACTF Visualization Extension for WST Feature    1.0.2.R201302130546
ACTF Visualization Feature  1.0.2.R201302130546
ACTF Visualization SDK Feature  1.0.2.R201302130546
BIRT Framework  4.2.2.v201301281649-ClBI9nGZcVSofEz-Xuz0n-ruJtUm
C/C++ Development Tools SDK 8.1.2.201302132326
C/C++ Library API Documentation Hover Help  1.0.0.201302051708
ChangeLog Management Tools  2.8.0.201302051708
ChangeLog Management Tools for Java 2.8.0.201302051708
Code Recommenders Developer Tools   1.0.3.v20130211-0152-b208
Custom Widget Toolkit   0.9.0.201303141537
Dali Java Persistence Tools - EclipseLink DBWS Support  1.1.102.v201301101606-797EBpCcNBHLEeHXGVaV4KKI
Dali Java Persistence Tools - EclipseLink JAXB Support  1.3.2.v201301092252-777B5BgJ9EJAgHNGrMm1f9e
Dali Java Persistence Tools - EclipseLink JPA Support   3.2.2.v201301082148-7K7J78EVVFNVHz0NgOXgX4KKI
Dali Java Persistence Tools - JAXB Support  1.2.2.v201301082148-56ACAkF7BG7WDLFEEF
Dali Java Persistence Tools - JPA Diagram Editor    1.1.2.v201301082148-408c9oB58C5FCB77B5
Dali Java Persistence Tools - JPA Support   3.2.2.v201301091616-7U7K8qFC7sRdwVKaof36y4KKI
Data Tools Platform Enablement Extender SDK 1.10.2.v201209181447-7I9e7XFE9JgB80wJRUvMfJanCn7b
Data Tools Platform Extender SDK    1.10.2.v201209181447-7PAO7gFEpPZ58s9hZvnBQRrZbbiG
Eclipse BIRT Chart Context Sensitive Help Documentation 4.2.2.v201210101433-5117w312413162211
Eclipse BIRT Context Sensitive Help Documentation   4.2.2.v201210101433-5117w312321212544
Eclipse BIRT Documentation  4.2.2.v201210101433-5117w312413162211
Eclipse BIRT Example    4.2.2.v201210101433-7T7D7DDZRDKRKELIKjed
Eclipse BIRT Source Feature 4.2.2.v201301281649-ClBI9nGZcVSofEz-Xuz0n-ruJtUm
Eclipse EGit    2.2.0.201212191850-r
Eclipse Java EE Developer Tools 3.4.2.v201301240600-7b7JINbFSK2WM3QNAEr799V-TyUp
Eclipse Java Web Developer Tools    3.4.2.v201209272000-7F7DFSpC26SrlX9qoilV1RGQC9ivZy86-bz-IBHe
Eclipse JGit    2.2.0.201212191850-r
Eclipse JGit Command Line Interface 2.2.0.201212191850-r
Eclipse Platform    4.2.2.M20130204-1200
Eclipse Platform SDK    4.2.2.M20130204-1200
Eclipse SDK 4.2.2.M20130204-1200
Eclipse Web Developer Tools 3.4.2.v201211061806-7O7MFu3EMkBK01NbrfU9ATE5cdZFz-OoeYjaI4d2
Eclipse XML Editors and Tools   3.4.2.v201211061806-7H7GFeJDxumUrsn5qkiQgOEhsz0p60HAmPyU6VX
Eclipse XSL Developer Tools 1.3.200.v201212131556-7T7ZFUbFIqUoJvvaKoCpRBIaGVOf
EGit Plug-in Import Support 2.2.0.201212191850-r
EMF Compare 1.3.3.v20130213-0806
EMF Compare SDK 1.3.3.v20130213-0806
Equinox Target Components   3.8.0.v20121212-203907-7M7fA78g4_y-gDvtH0ZcFvhMPDZJ
Fortran Development Tools (Photran) 8.0.4.201302122310
Graphical Editing Framework GEF Examples    3.9.0.201212170307
Graphical Editing Framework GEF SDK 3.9.0.201212170307
Graphical Modeling Framework (GMF) Runtime  1.6.2.201302122140
Graphical Modeling Framework (GMF) Runtime Examples 1.6.2.201302122140
Graphical Modeling Framework (GMF) Runtime SDK  1.6.2.201302122140
Graphical Modeling Framework (GMF) Tooling  3.0.2.201301191623
Graphical Modeling Framework (GMF) Tooling - Runtime Extensions 3.0.2.201301191623
Graphical Modeling Framework (GMF) Tooling SDK  3.0.2.201301191623
JavaServer Faces Tools (JSF) Project    3.5.0.v201301161500-7E7U-F9JgLWrLWXMXBLL
JAX-WS Tools    1.2.1.v201301072322-7E7AF72F8NcJSbKkQAUoWl
JST Server Adapters 3.2.201.v20130123_1813-20A87w31241234a2924
JST Server Adapters Extensions  3.3.102.v20130108_1103-777HFL7CcNBDnBcIVFHFD8
m2e - Maven Integration for Eclipse 1.3.0.20130129-0926
m2e - slf4j over logback logging (Optional) 1.3.0.20130129-0926
MoDisco SDK (Incubation)    0.10.2.201301291118
Nebula CalendarCombo Widget 1.0.0.201303141537
Nebula CDateTime Widget 0.14.0.201303141537
Nebula CompositeTable Widget    1.0.0.201303141537
Nebula Examples View Feature    1.0.4.201303141537
Nebula TableCombo Widget    1.0.0.201303141537
Nebula Widgets Examples 1.0.4.201303141537
Net4j Signalling Platform SDK   4.1.2.v20121030-0624
ObjectAid Class Diagram 1.1.1
OCL End User SDK    4.0.2.v20130130-1128
OCL Examples and Editors    3.2.2.v20130130-1128
Operational QVT SDK 3.2.2.v20130128-1651
Papyrus SDK Binaries (Incubation)   0.9.2.v201302131112
Parallel Tools Platform (PTP) End-User Runtime  6.0.4.201302122324
PyDev for Eclipse   2.7.3.2013031601
Rich Ajax Platform (RAP) Tools  1.5.2.20130205-2030
Scout RAP Target    3.8.2.201302111336
Scout Runtime   3.8.2.201302111336
Scout SDK   3.8.2.201302111336
Scout SDK RAP   3.8.2.201302111336
Subversive SVN Team Provider    1.0.0.I20130122-1700
Subversive SVN Team Provider Sources    1.0.0.I20130122-1700
UML2 Extender SDK   4.0.2.v20130114-0902
WAR Products (Incubation)   0.2.2.201212132117
Web Page Editor 2.4.0.v201301161500-479-9oB58E588N8K55
WST Server Adapters 3.2.203.v20130123_1813-7L3FA4CcNBGVCZL_l8OCG
Xpand SDK   1.3.0.v201302260541
XSD - XML Schema Definition SDK 2.8.2.v20130125-0826
... ... ... 
```

如果我按照错误消息尝试手动禁用`ACTF Visualization Extension for PDT Feature 1.0.2.R201302130546`，它会告诉我：

```
Cannot complete the install because some dependencies are not satisfiable
  org.eclipse.actf.visualization.sdk.feature.group [1.0.2.R201302130546] cannot be installed in this environment because its filter is not applicable. 
```

如果我禁用`ACTF Visualization SDK Feature 1.0.2.R201302130546`，它会告诉我：

```
Cannot complete the install because some dependencies are not satisfiable
  org.eclipse.actf.visualization.feature.group [1.0.2.R201302130546] cannot be installed in this environment because its filter is not applicable. 
```

... 等等...

```
Cannot complete the install because of a conflicting dependency.
  Software being installed: EGit Plug-in Import Support 2.2.0.201212191850-r (org.eclipse.egit.import.feature.group 2.2.0.201212191850-r)
  Software currently installed: EGit Project Set Support 2.1.0.201209190230-r (org.eclipse.egit.psf.feature.group 2.1.0.201209190230-r)
  Only one of the following can be installed at once: 
    Git Team Provider Core 2.2.0.201212191850-r (org.eclipse.egit.core 2.2.0.201212191850-r)
    Git Team Provider Core 2.1.0.201209190230-r (org.eclipse.egit.core 2.1.0.201209190230-r)
  Cannot satisfy dependency:
    From: EGit Plug-in Import 2.2.0.201212191850-r (org.eclipse.egit.import 2.2.0.201212191850-r)
    To: package org.eclipse.egit.core.internal [2.2.0,2.3.0)
  Cannot satisfy dependency:
    From: EGit Plug-in Import Support 2.2.0.201212191850-r (org.eclipse.egit.import.feature.group 2.2.0.201212191850-r)
    To: org.eclipse.egit.import [2.2.0.201212191850-r]
  Cannot satisfy dependency:
    From: EGit Project Set Support 2.1.0.201209190230-r (org.eclipse.egit.psf.feature.group 2.1.0.201209190230-r)
    To: org.eclipse.egit.core [2.1.0,2.2.0) 
```

这些是我的（活动的）可用软件站点：

```
buckminster-egf-juno/org.eclipse.egf.site   http://download.eclipse.org/egf/updates/juno/official/  EnabledCodePro AnalytiX http://dl.google.com/eclipse/inst/codepro/latest/3.7    Enabled
Composite Artifact Repository   http://download.eclipse.org/modeling/m2t/acceleo/updates/releases/3.2   Enabled
DataNucleus http://www.datanucleus.org/downloads/eclipse-update/    Enabled
DBViewer    http://www.ne.jp/asahi/zigen/home/plugin/dbviewer/  Enabled
EclEmma http://update.eclemma.org/  Enabled
Eclipse CheckStyle  http://eclipse-cs.sf.net/update/    Enabled
FindBugs    http://findbugs.cs.umd.edu/eclipse/ Enabled
Google Plugin for Eclipse 4.2 (Juno)    http://dl.google.com/eclipse/plugin/4.2 Enabled
Juno    http://download.eclipse.org/releases/juno/  Enabled
Juno    http://download.eclipse.org/releases/juno/201209280900  Enabled
Logback http://logback.qos.ch/p2/   Enabled
MercurialEclipse    http://mercurialeclipse.eclipselabs.org.codespot.com/hg.wiki/update_site/stable Enabled
Nebula Widgets  http://download.eclipse.org/technology/nebula/snapshot/ Enabled
ObjectAid UML Explorer  http://www.objectaid.com/update Enabled
PMD http://pmd.sf.net/eclipse   Enabled
PyDev   http://pydev.org/updates/   Enabled
QuickREx    http://www.bastian-bergerhoff.com/eclipse/features/ Enabled
soapUI  http://www.soapui.org/eclipse/update/   Enabled
The Eclipse Project Updates http://download.eclipse.org/eclipse/updates/4.2 Enabled
Update Site http://community.polarion.com/projects/subversive/download/eclipse/3.0/juno-site/   Enabled
Xtext All In One - Releases http://download.eclipse.org/modeling/tmf/xtext/updates/composite/releases/  Enabled
YEdit   http://dadacoalition.org/yedit  Enabled 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:55:55.240

先卸载 org.eclipse.egit.psf。它[不再受支持](http://wiki.eclipse.org/EGit/New_and_Noteworthy/2.2#Installation)，您无法在不卸载它的情况下升级 egit。这应该可以解决您的第三组错误消息（在某​​处都包含“egit”）。

之后，我会尝试*卸载*所有 ACTF 组件。之后应该可以升级。

如果一切都失败了，您可以使用 File -> Export -> Install -> Items to file 导出*当前安装的插件的选择，*然后使用 File -> Import -> Install 在另一个干净的 Eclipse 安装中再次安装这些插件。这样你就可以摆脱一些不起眼的插件并在半小时内重新安装。

# html - 基本的 CSS 悬停图像交换？

> ID：15468037
> 
> 赞同：3
> 
> 时间：2013-03-18T00:31:42.353
> 
> 标签：html, css

我是 Web 开发的超级初学者，我有一个关于尝试“交换”两个图像的问题。

我编写了这个 CSS 和标记，但由于某种原因，它似乎不起作用。将鼠标悬停在第一个图像上时应该交换的第二个图像只是位于页面上第一个图像的顶部。

CSS：

```
.home  {
  margin: 0;
  padding: 0;
  background: url('images/onhome.png') no-repeat;
}

.home a, .nav a:link, .nav a:visited {
  display: block;
  width: 90px;
  height: 25px;
}

.home a:hover img {
  visibility: hidden;
} 
```

HTML：

```
<div class="home">
  <a href="#">
    <img src="style/images/home.png" width="65" height="18" alt="" />
  </a>
</div> 
```

我不确定出了什么问题，如果有人可以帮助我，我将不胜感激。如果有另一种更好的方法可以做到这一点，我肯定也会对此持开放态度。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-18T00:39:47.023

一种方法是忘记`<img>`, 和 on`:hover`更改背景图像 URL。

```
#home {
    background: url(http://images.nationalgeographic.com/wpf/media-live/photos/000/005/cache/grey-wolf_565_600x450.jpg) no-repeat;
    height: 600px;
    width: 600px;
}

#home:hover {
    background: url(http://25.media.tumblr.com/tumblr_m6fmnhxL3B1r7wu2mo1_500.jpg)  no-repeat;
} 
```

工作示例：http: [//jsfiddle.net/c9sRa/](http://jsfiddle.net/c9sRa/)

如果您将光标放在狼上，它会变成图片虎崽 :-)

# google-maps - 在谷歌地图中覆盖仿射变换

> ID：15468040
> 
> 赞同：0
> 
> 时间：2013-03-18T00:33:01.190
> 
> 标签：google-maps, affinetransform

在谷歌地图中，​​有一个名为 的地图类型`45 degree`。

因此，如果我在普通图层中有一些像标记、圆圈这样的叠加层，那么如果我将地图类型更改为`45 degree`，那么叠加层呢？

我认为它们应该同时进行仿射变换。但是如何实现呢？

# c++ - GCC 的 __builtin_expect 能走多远？

> ID：15468042
> 
> 赞同：24
> 
> 时间：2013-03-18T00:33:04.937
> 
> 标签：c++, c, optimization, gcc

在回答另一个问题时，我对此感到好奇。我很清楚

```
if( __builtin_expect( !!a, 0 ) ) {
    // not likely
} else {
    // quite likely
} 
```

将通过向处理器提示/更改汇编代码顺序/某种魔法来使“很可能”分支更快（通常）。（如果有人能澄清那也很棒的魔法）。

但这适用于 a) 内联 ifs、b) 变量和 c) 0 和 1 以外的值吗？即会

```
__builtin_expect( !!a, 0 ) ? /* unlikely */ : /* likely */; 
```

或者

```
int x = __builtin_expect( t / 10, 7 );
if( x == 7 ) {
    // likely
} else {
    // unlikely
} 
```

或者

```
if( __builtin_expect( a, 3 ) ) {
    // likely
    // uh-oh, what happens if a is 2?
} else {
    // unlikely
} 
```

有什么效果吗？所有这些都取决于目标架构吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-18T01:42:59.363

你读过 GCC 文档吗？

> 内置函数：long __builtin_expect (long exp, long c)
> 
> 您可以使用 __builtin_expect 为编译器提供分支预测信息。一般来说，您应该更喜欢为此使用实际的配置文件反馈（-fprofile-arcs），因为程序员在预测他们的程序实际执行方式方面出了名的差。但是，有些应用程序很难收集这些数据。
> 
> 返回值是exp的值，应该是一个整数表达式。内置的语义是期望 exp == c。例如：
> 
> ```
> if (__builtin_expect (x, 0))
>     foo (); 
> ```
> 
> 表示我们不希望调用 foo，因为我们希望 x 为零。由于您仅限于 exp 的整数表达式，因此您应该使用诸如
> 
> ```
> if (__builtin_expect (ptr != NULL, 1))
>     foo (*ptr); 
> ```
> 
> 在测试指针或浮点值时。

稍微解释一下... __builtin_expect 对于传达您认为程序可能采用的分支特别有用。你问编译器如何使用这种洞察力——好吧，考虑一下这段代码：

```
if (x == 0)
    return 10 * y;
else
    return 39; 
```

在机器代码中，通常可以要求 CPU “转到”另一行（这需要时间，并且取决于 CPU 可能会阻止其他执行优化 - 即低于机器代码级别 - 例如，请参阅[http 下的分支标题： //en.wikipedia.org/wiki/Instruction_pipeline](http://en.wikipedia.org/wiki/Instruction_pipeline)），或调用其他代码，但实际上并没有一个 if/else 概念，其中 true 和 false 代码是相等的......你必须分支才能找到代码非此即彼。完成的方式基本上是伪代码：

```
test whether x is 0
if it was goto else_return_39
return 10 * y
else_return_39:
return 39 
```

鉴于大多数 CPU 跟随`goto`down 到`else_return_39:`标签比仅仅下降到更慢`return 10 * y`，“true”分支的代码将比 false 分支更快地到达。当然，机器代码可以测试 x 是否*不*为0，将“假”代码 ( `return 39`) 放在首位，从而反转性能特征。

这是 __builtin_expect 控制的 - 您可以告诉编译器将真或假分支放在需要较少分支才能到达它的地方，从而获得微小的性能提升。

> 但这适用于 a) 内联 ifs、b) 变量和 c) 0 和 1 以外的值吗？

a) 周围的函数是否内联并不会改变对`if`出现语句的分支的需求（除非优化器看到`if`语句测试总是存在的条件，`true`或者`false`只有一个分支永远不会运行）。因此，它同样适用于内联代码。

[您的评论表明您对条件表达式感兴趣`a ? b : c`--我不确定-在[我是否可以在 C 中使用 GCC 的 __builtin_expect() 和三元运算符时](https://stackoverflow.com/questions/14784481/can-i-use-gccs-builtin-expect-with-ternary-operator-in-c)对该问题有争议的答案，这可能证明以一种或另一种方式很有见地，或者进一步探索的基础]

b）变量 - 你假设：

```
int x = __builtin_expect( t / 10, 7 );
if( x == 7 ) { 
```

那是行不通的——编译器没有义务将这些期望与变量相关联，并在下次`if`看到 an 时记住它们。您可以使用生成汇编语言输出来验证这一点（就像我对 gcc 3.4.4 所做的那样）`gcc -S`：无论预期值如何，程序集都不会改变。

c) 0 和 1 以外的值

它适用于整数 ( `long`) 值，所以是的。上面引用的文档的最后一段解决了这个问题，特别是：

> 您应该使用诸如
> 
> ```
> if (__builtin_expect (ptr != NULL, 1))
>     foo (*ptr); 
> ```
> 
> 在测试指针或浮点值时。

为什么？好吧，如果指针类型大于`long`，那么调用`__builtin_conversion(long, long)`将有效地切断一些不太重要的位，并且无法将其余位合并到测试中。同样，浮点值可能大于 long，并且转换不会产生您期望的结果。通过使用诸如`ptr != NULL`(given `true`converts to 1L and `false`to 0) 之类的布尔表达式，您一定会得到预期的结果。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-18T01:28:41.237

> 但这适用于 a) 内联 ifs、b) 变量和 c) 0 和 1 以外的值吗？

它适用于用于确定分支的表达式上下文。

所以，a) 是的。b) 没有。 c) 是的。

> 所有这些都取决于目标架构吗？

是的！

它利用了使用[指令流水线](http://en.wikipedia.org/wiki/Instruction_pipeline)的架构，允许 CPU 在当前指令完成之前开始处理即将到来的指令。

> （如果有人能澄清那也很棒的魔法）。

（“分支预测”使这个描述复杂化，所以我故意省略它）

任何类似于 if 语句的代码都意味着表达式可能会导致 CPU 跳转到程序中的不同位置。这些跳转使 CPU 指令流水线中的内容无效。

`__builtin_expect`允许（不保证）gcc 尝试组装代码，因此*可能*的情况涉及比替代方案更少的跳转。

# java - 在Java中将字符串转换为int数组

> ID：15468044
> 
> 赞同：2
> 
> 时间：2013-03-18T00:33:15.160
> 
> 标签：java, arrays

我想知道如何将字母之类的字符串转换为数组中的数值。例如，A 为 0，B 为 1。我知道我需要像这样使用 for 循环：for (int i = 0; i < 26; i++)，但我不确定实际使用什么代码片段做转换成一个 int 数组？帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T00:37:09.087

将字母 ( `char`) 转换为表示其在字母表中位置的整数比某些人意识到的要容易。你所要做的就是：

```
(int)(c - 'A')  // the "distance" between c and 'A' = place of c in alphabet 
```

循环遍历字符串的字符并对每个字符执行此操作，将结果存储在一个新的 int 数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T00:37:54.290

您可以通过 yourString.charAt(i) 获取每个 Char，然后使用 (int) 进行转换，这将为您提供相应的 ASCII，然后从“A”的 ASCII 中减去。你会得到你想要的

结果 = (int)yourString.charAt(i) - (int)'A'

# c - 将旧的 C 项目移植到 C++/CX

> ID：15468045
> 
> 赞同：1
> 
> 时间：2013-03-18T00:33:26.173
> 
> 标签：c, porting, c++-cx

我对 C++/CX 比较陌生，现在有一个旧的 C 项目，我需要将它移植到 C++/CX 中。

输出被刷新到文本文件或标准输出中，但现在并不那么重要，因为我可以将它们带入那里的消息对话框。

我的问题是，你对移植这个项目有什么建议吗？

我只是试图将 C 文件复制到 CPP 中，但编译失败。

我的意思是，我现在需要将旧函数包装成某种类结构吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T02:16:10.340

对于 C 和 C++ 之间的差异，起点是 David Tribble 的["C99 vs C++98"](http://david.tribble.com/text/cdiffs.htm)。如果没有更多细节（原始 C 环境、当前 C++ 环境、关于确切错误消息的一些细节），几乎不可能回答这个问题。

# c - 将一维数组中的字符存储到二维数组中

> ID：15468048
> 
> 赞同：0
> 
> 时间：2013-03-18T00:33:50.020
> 
> 标签：c, arrays

我正在尝试使用此循环将一个项目从一维数组移动到二维数组中，但它碰巧无限循环是错误的 hre..

```
printf("Enter plaintext :");
scanf("%s",&plaintext);

while(plaintext[k]!='\0')
{

    for (i=0;i<5;i++)
    {
        for (j=0;j<5;j++)
        {
        chip[i][j]=plaintext[k];
        k++;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T00:59:46.530

无论是否跨越边界，该变量`k`都将递增。`if(plaintext[k]!=NULL)`所以而不是

```
if (plaintext[k] != NULL)
    chip[i][j] = plaintext[k];
else
    c = +1;
k++; 
```

尝试

```
if (plaintext[k] != NULL)
    chip[i][j] = plaintext[k++];
else {
    c = +1;
    break;
} 
```

同时，如果`length`大于 2d 数组的大小，则在早期迭代中复制的字符将被覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:53:42.513

```
 scanf("%s", plaintext);

    for (i=0;i<5;i++){
        for (j=0;j<5;j++){
            chip[i][j]=plaintext[k++];
            if(plaintext[k] == '\0'){
                i=j=5;//break;
            }
        }
    } 
```

另一种方式

```
 char *p;

    printf("Enter plaintext :");
    scanf("%s", plaintext);

    p=&chip[0][0];
    while(k < 25 && plaintext[k]!='\0'){
        *p++ = plaintext[k++];
    } 
```

显示芯片

```
 for (i=0;i<5;i++){
        for (j=0;j<5;j++){
            putchar(chip[i][j]);
            if(--k == 0)
                i=j=5;//break;
        }
        putchar('\n');
    } 
```

# objective-c - 使用 Quartz 圆角并应用阴影

> ID：15468050
> 
> 赞同：1
> 
> 时间：2013-03-18T00:33:56.947
> 
> 标签：objective-c, uiview, quartz-graphics

似乎对此有很多想法，还有一些问题。然而，他们中的一些人说某些代码有效。例如：

```
[self.layer setShadowOffset:CGSizeMake(1, 3)];
[self.layer setShadowOpacity:0.9];
[self.layer setShadowRadius:3.0f];
[self.layer setShouldRasterize:YES];

[self.layer setCornerRadius:12.0f];

[self.layer setShadowPath:[[UIBezierPath bezierPathWithRoundedRect:rect cornerRadius:12.0f] CGPath]]; 
```

应同时应用 12.0f 角半径和阴影。但它不起作用。当我使用这段代码时，我得到了阴影，但没有圆角半径。

据我所知，这是因为我需要将 clipsToBounds 设置为 YES。但是，这反过来又否定了阴影。

我做错了什么还是上面的代码不起作用？

此外，人们说克服这个问题的好方法是创建一个单独的阴影层，然后添加它。

但是我将如何在 UIView 的 drawRect: 中做到这一点？- 示例代码会很棒！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:34:47.560

Your code looks good i have tried your code and it works fine with me.

make sure `rect` used in `[[UIBezierPath bezierPathWithRoundedRect:rect cornerRadius:12.0f] CGPath]]` is correct and if you are using black background then you can not see shadow.

i have tried this in my code. Here is the working code.......

```
[self.EnterQtyView.layer setShadowOffset:CGSizeMake(1, 5)];
[self.EnterQtyView.layer setShadowOpacity:1.0];
[self.EnterQtyView.layer setShadowRadius:5.0f];
[self.EnterQtyView.layer setShouldRasterize:YES];
[self.EnterQtyView.layer setCornerRadius:12.0f];
[self.EnterQtyView.layer setShadowPath:[[UIBezierPath bezierPathWithRoundedRect:self.EnterQtyView.frame cornerRadius:12.0f] CGPath]]; 
```

Hope this will help you.................

# c++ - 派生类的部分类模板特化

> ID：15468053
> 
> 赞同：1
> 
> 时间：2013-03-18T00:34:31.290
> 
> 标签：c++, template-specialization

我正在尝试为嵌入式 Linux 系统编写一个在 LCD 上绘制用户界面元素的程序。我有一个名为的基类`Widget`，它实现了绘图和擦除等基本功能，并具有 x/y 位置和宽度/高度等属性。然后我有派生类`Label`, `Button`, 并`ProgressBar`添加自己的属性（分别为文本、焦点和值）。

我的问题是我想创建一个名为的模板容器类`WidgetArray`，它将自动生成一个小部件网格，并批量编辑它们的属性。但是，`WidgetArray`例如，如果包含一个函数，该函数接受一个字符串向量并将每个字符串分配给`text`a 的属性，如果我声明了一个包含s`Label`的实例（它没有文本属性），编译器就会抱怨。这似乎是模板专业化的完美案例。我在[cplusplus.com](http://www.cplusplus.com/doc/tutorial/templates/)上阅读模板专业化页面时看到了这个：`WidgetArray``ProgressBar`

> 当我们为一个模板类声明特化时，我们还必须定义它的所有成员，即使是那些与泛型模板类完全相同的成员，因为从泛型模板到特化没有成员“继承”。

请告诉我有办法解决这个问题。的绝大多数成员函数`WidgetArray`对所有派生类都完全有效，`Widget`而且我必须复制和粘贴*整个代码*来`WidgetArray`为派生类添加一个专门的函数，这似乎是非常愚蠢的。

这是我拥有的代码的简化版本：

```
template<class T>
class WidgetArray {
protected:
    std::vector<T> children;
    int columns, x, y;
    int element_w, element_h;
    int x_padding, y_padding; 
public:
    WidgetArray() {
        columns = 1;
        children.resize(1);
        x = 0;
        y = 0;
    }
    WidgetArray(int x_in, int y_in, int size, int cols) {
        unsigned int counter1=0, counter2=0;
        columns = cols;
        x = x_in;
        y = y_in;
        element_w = 10;
        element_h = 10;
        x_padding = 0;
        y_padding = 0;
        children.resize(size);
        for (unsigned ii = 0; ii < size; ii++) {
            if (counter1 > columns) {
                counter1 = 0; //column number
                counter2++; //row number
            }
            children.at(ii).x = counter1*(element_w + x_padding) + x;
            children.at(ii).y = counter2*(element_h + y_padding) + y;
            children.at(ii).width = element_w;
            children.at(ii).height = element_h;
        }
    }        
    void draw_children(std::vector<unsigned char>& cmd_str){
        for (unsigned ii=0; ii < children.size(); ii++) children.at(ii).draw(cmd_str);
    }
    void redraw_children(std::vector<unsigned char>& cmd_str) {
        for (unsigned ii=0; ii < children.size(); ii++) {
            children.at(ii).erase(cmd_str);
            children.at(ii).draw(cmd_str);
        }
    }
    void erase_children(std::vector<unsigned char>& cmd_str) {
        for (unsigned ii=0; ii < children.size(); ii++) children.at(ii).erase(cmd_str);
    }
    int reform(int num_elements, int cols, int x_in, int y_in) {
        unsigned int counter1=0, counter2=0;

        children.clear();
        children.resize(num_elements);
        columns = cols;
        x = x_in;
        y = y_in;
        for (unsigned ii = 0; ii < children.size(); ii++) {
            if (counter1 > columns) {
                counter1 = 0; //column number
                counter2++; //row number
            }
            children.at(ii).x = counter1*(element_w + x_padding) + x;
            children.at(ii).y = counter2*(element_h + y_padding) + y;
            children.at(ii).width = element_w;
            children.at(ii).height = element_h;
        }
        return 1;
    }
    int assign_text(std::vector<string> text) {
        for (unsigned ii=0; ii<children.size() || ii < text.size(); ii++) {
            //This is only valid if my type is a Button or Label but I want
            //the rest of the code for WidgetArray to be valid for any derived
            //class of Widget
            children.at(ii).text = text.at(ii);
        }
    }
}; 
```

我希望我的问题很清楚。我环顾四周，有*很多*关于模板专业化的帖子，但我没有找到似乎回答我的问题的帖子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T00:49:13.937

听起来您想要的只是一个模板化的基类，其中包含特定于两者的所有方法，然后您可以从中继承。例如：

```
template <typename T>
struct base
{
protected:
    std::vector<T> children;
    ~base() { }

public:
    void draw_children();
    //Other methods common to all template parameters T

};

class WidgetArrayString
    : public base<std::string>
{
    //Methods specific only to strings
};

class WidgetArrayProgressBar
    : public base<ProgressBar>
{
    //Methods specific only to progress bar
}; 
```

# memory - 复制到cuda中的共享内存

> ID：15468059
> 
> 赞同：6
> 
> 时间：2013-03-18T00:35:14.893
> 
> 标签：memory, cuda

在CUDA编程中，如果我们要使用共享内存，我们需要将数据从全局内存带到共享内存。线程用于传输此类数据。

我在某处（在线资源中）读到，最好不要让块中的所有线程都将数据从全局内存复制到共享内存。这样的想法是有道理的，所有线程都没有一起执行。经线中的线程一起执行。但我担心的是所有的经纱都不是按顺序执行的。比如说，一个带有线程的块被分为 3 个 warp：warp0（0-31 个线程），warp 1（32-63 个线程），warp 2（64-95 个线程）。不能保证 warp 0 会首先执行（对吗？）。

那么我应该使用哪些线程将数据从全局复制到共享内存？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T07:03:32.447

To use a single warp to load a shared memory array, just do something like this:

```
__global__
void kernel(float *in_data)
{
    __shared__ float buffer[1024];

    if (threadIdx.x < warpSize) {
        for(int i = threadIdx; i  <1024; i += warpSize) {
            buffer[i] = in_data[i];
        }
    }
    __syncthreads();

    // rest of kernel follows
} 
```

[disclaimer: written in browser, never tested, use at own risk]

The key point here is the use of `__syncthreads()` to ensure that all threads in the block wait until the warp performing the load to shared memory have finished the load. The code I posted used the first warp, but you can calculate a warp number by dividing the thread index within the block by the warpSize. I also assumed a one-dimensional block, it is trivial to compute the thread index in a 2D or 3D block, so I leave that as an exercise to the reader.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T00:54:39.183

当块被分配给多处理器时，它一直驻留在该块中的所有线程完成之前，并且在此期间，warp 调度程序在具有准备好的操作数的 warp 之间进行混合。因此，如果多处理器上有一个带有三个 warp 的块，并且只有一个 warp 正在从全局内存中获取数据到共享内存，而另外两个 warp 处于空闲状态并且可能正在等待`__syncthreads()`屏障，那么您什么都不会丢失，并且您只会受到全局内存延迟的限制。反正你会的。一旦获取完成，warps 就可以继续他们的工作。

因此，不能保证首先执行 warp0 并且您可以使用任何线程。唯一需要记住的两件事是确保尽可能多地合并访问全局内存并避免存储库冲突。

# opengl - 如何在不使用片段着色器的情况下渲染灰度纹理？(OpenGL)

> ID：15468060
> 
> 赞同：0
> 
> 时间：2013-03-18T00:35:15.607
> 
> 标签：opengl, textures, texture2d

是否可以在不使用片段着色器的情况下仅使用固定管道 openGL 将 RGB 纹理绘制为灰度？

否则我必须创建两种版本的纹理，一种是彩色的，一种是黑白的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T01:06:29.183

我不知道如何使用 RGB 纹理和固定功能管道来做到这一点。

如果您从 RGB 源数据创建纹理但将内部格式指定为 GL_LUMINANCE，OpenGL 将为您将颜色数据转换为灰度。使用标准的白色材料和调制模式。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T02:30:04.070

不可以。[纹理环境组合器在](http://www.opengl.org/sdk/docs/man2/xhtml/glTexEnv.xml)*不*进行缩放/偏置操作的情况下无法执行点积。也就是说，它总是假装 [0, 1] 值被编码为 [-1, 1] 值。既然你不能把它关掉，你就不能做一个合适的点积。

# java - 如何让这段代码运行？

> ID：15468061
> 
> 赞同：-3
> 
> 时间：2013-03-18T00:35:26.137
> 
> 标签：java

我试图运行这段代码（在 3 个不同的类中 - A、B 和 C）并且它没有运行。我不知道为什么不。有人可以帮忙吗？

```
public class A {    

    private int number;
    protected String name;
    public double price;

    public A ( ) {
        System.out.println ( "A( ) called"); }

    private void foo1( ) {
        System.out.println( "A version of foo1( ) called"); }

    protected int foo2( ){
        System.out.println( "A version of foo2( ) called");
        return number; }

    public String foo3( ){
        System.out.println( "A version of foo3() called"); 
        return "Hi";            
    }
} 
```

* * *

```
public class B extends A {

    private char service;

    public B ( ) {
        super( );

        System.out.println( "B( ) called"); }

    public void foo1 ( ) {
        System.out.println( "B version of foo1( ) called"); }

    protected int foo2 ( ){
        int n = super.foo2( );
        System.out.println( "B version of foo2( ) called");
        return ( n+5 ); }

    public String foo3 ( ) {
        String temp = super.foo3 ( );
        System.out.println( "B version of foo3( )");
        return ( temp + " foo3" ); } } 
```

* * *

```
public class C extends B {

    public C( ){
        super( );
        System.out.println( "C( ) called"); }

    public void foo1 ( ) {
        System.out.println( "C version of foo1( ) called" );
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T00:44:03.147

类似的东西应该允许你的程序运行

```
public static void main(String[] args)
{
    A a = new A();
    a.foo2();
    a.foo3();

    //same for B and C
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T00:41:40.517

您没有`main`指定程序开始的方法。您需要在其中一个类中创建一个具有以下签名的 main 方法：

```
public static void main(String[] args) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T00:50:00.860

在同一个包中再添加一个类。例如，我创建了一个名为 Application 的类，如下所示：

```
 public class Application{
         public static void main(String []args){
                A a = new A();
                a.foo3();
                B b = new B();
                b.foo1();
                C c = new C();
                c.foo1();
         }
  } 
```

然后，请尝试再次运行它...

# haskell - 抢劫模板新api

> ID：15468064
> 
> 赞同：0
> 
> 时间：2013-03-18T00:36:19.773
> 
> 标签：haskell, heist

这相当于

```
...
import Happstack.Server.Heist

pageHeist :: B.ByteString -> [(T.Text,T.Text)] -> ServerPart Response
kfzPaginaHeist template par = do
       pagina <- newTemplateDirectory' "template" $ bindStrings par defaultHeistState       
       render pagina template 
```

使用新的抢劫 API？此外，and（或您应该加载模板的方式）是否改变了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T04:29:11.157

首先，您可能不想在 ServerPart monad 中调用 newTemplateDirectory。它应该在您的应用程序启动时调用。其次，不是将 HeistState 传递给它，而是将它传递给包含所有拼接的 HeistConfig。

# javascript - 如果在 `<>` 中不是 `\q`，则在 `q` 上拆分正则表达式

> ID：15468065
> 
> 赞同：0
> 
> 时间：2013-03-18T00:36:31.533
> 
> 标签：javascript, regex

我正在尝试编写一个正则表达式，它将拆分之间的任何内容`<`，`>`如果它不包含 a ，那么它`q`不是 a `\q`。这就是我的意思：

```
 split           nope             split
         v              v                 v
test1< test2 > test3 <tesqt4> test5 < tes\qt6> 
```

我想在不使用前瞻或后视的情况下做到这一点。

这是我到目前为止所拥有的，但它仍然无法正常工作[`^<(?:[^\\][^q]*)*>`](http://regexr.com?345jc)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T00:45:24.320

你很接近; 尝试这个

```
<([^>q\\]*(\\[^>])?)*> 
```

这也会将类似的情况识别`<test\\q>`为无效，并拒绝格式错误的`<test\>`. 如果要接受后者，请将 更改`[^>]`为通配符`.`。

它的工作原理是允许结束标记、无效`q`或转义之前的任何内容`\`。然后它检查下一位是否是有效的转义序列，然后“循环”，直到找到关闭`>`

更新：正如评论中指出的，这是一个更好的版本

```
<(\\[^>]|[^\\>q])*> 
```

[它在 Chrome ( http://jsperf.com/nested-regex-quantifiers-vs-or](http://jsperf.com/nested-regex-quantifiers-vs-or) )上的速度大约是原来的两倍 也更容易理解，因为它是在每个字符的级别上工作的。

# c# - 如何在此 AJAX 函数中分配下拉列表数据？

> ID：15468066
> 
> 赞同：0
> 
> 时间：2013-03-18T00:36:34.097
> 
> 标签：c#, ajax, asp.net-mvc

当用户更改另一个下拉列表（ddlCompany）时，我想更改下拉列表（ddlSite）。

所以我不知道如何将新项目添加到 ddlsite 下拉列表。

阿贾克斯函数

```
function getSite(companyID) {
    alert(companyID);
    $.ajax({
        type: 'POST',
        dataType: 'html',
        url: '@Url.Action("SiteList", "Site")',
        data: ({ ComID: companyID }),
        success: function (result) {
            alert(result);
            $('#SiteList').html(result);
        },
        error: function (xhr, ajaxOptions, thrownError) {
            alert(xhr.status);
            alert(thrownError);
        }
    });
} 
```

我的观点

```
@Html.DropDownList("ddlCompany", ViewData["AllCompany"] as SelectList, "--Select Item--", new { @onchange = "getSite(this.value);" })
<div id="SiteList">
    @Html.Partial("_siteList", SiteList)
</div> 
```

这是我的控制器

```
public ActionResult SiteList(int ComID)
{
    var siteQuery = from s in db.tblSites
                    orderby s.SiteName
                    where s.FKComId == ComID
                    select s;
    IEnumerable<SelectListItem> AllSite = new SelectList(siteQuery, "PKSiteID", "SiteName");
    ViewBag.AllSite = siteQuery;

    return PartialView("_siteList", siteQuery);
} 
```

我的部分看法

```
@model SKG_website.Models.tblSite

@{
    ViewBag.Title = "_siteList";
    var allSites = ViewBag.AllSite as IEnumerable<SKG_website.Models.tblSite>;  
}

<div id="siteList" class="editor-field">    
    @Html.DropDownListFor(model => model.PKSiteID, new SelectList(allSites, "PKSiteID", "SiteName")) 
</div> 
```

我不知道如何在 AJAX 函数中分配 sslsit 下拉列表。我该怎么做？

# java - 我在将 PrimeFaces 数据表映射到我的托管 Bean 时遇到困难

> ID：15468072
> 
> 赞同：0
> 
> 时间：2013-03-18T00:37:26.400
> 
> 标签：java, jsf, primefaces

我认为我的问题与我的托管 Bean 构造函数没有出现 go get call 的事实有关。也就是说，如果我在构造函数处设置断点，则应用程序不会在断点处停止。

我得到标题，但没有在构造函数中添加的行。

这是我的代码：首先是xhtml：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <f:view contentType="text/html">
        <h:head>
            <f:facet name="first">
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
                <title>LOTTO CHECKER</title>
            </f:facet>
        </h:head>

        <h:body>

            <p:layout fullPage="true">

                <p:layoutUnit position="north" size="100" resizable="true" closable="true" collapsible="true">
                    LOTTO CHECKER
                </p:layoutUnit>

                <p:layoutUnit position="south" size="100" closable="true" collapsible="true">
                    Footer
                </p:layoutUnit>

                <p:layoutUnit position="west" size="175" header="Left" collapsible="true" >

                </p:layoutUnit>

                <p:layoutUnit position="center">
                    <h:form id="powerBallDrawingForm">
                        <p:dataTable  value="#(lottoCheckerBean.powerBallDrawings}" var="powerBallDrawing"   >
                            <p:column headerText="DATE">

                                <h:outputText  value ="#{powerBallDrawing.drawingDate}"/>
                            </p:column >
                            <p:column headerText="BALL 1">

                                <h:outputText value="#{powerBallDrawing.ball_1}" />
                            </p:column>                 
                            <p:column headerText ="BALL 2"> 

                                <h:outputText value="#{powerBallDrawing.ball_2}" />
                            </p:column>    
                            <p:column headerText ="BALL 3">

                                <h:outputText value="#{powerBallDrawing.ball_3}" />
                            </p:column>    
                            <p:column headerText ="BALL 4">

                                <h:outputText value="#{powerBallDrawing.ball_4}" />
                            </p:column>    
                            <p:column headerText="BALL 5">

                                <h:outputText value="#{powerBallDrawing.ball_5}" />
                            </p:column>    
                            <p:column headerText="POWER BALL">

                                <h:outputText value="#{powerBallDrawing.powerBall}" />
                            </p:column>    
                        </p:dataTable>
                    </h:form>
                </p:layoutUnit>

            </p:layout>

        </h:body>

    </f:view>
</html> 
```

现在托管 Bean

```
package PowerBall_BigBame_Checker;

import java.io.Serializable;

import java.util.ArrayList;
import java.util.List;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

@ManagedBean
@SessionScoped

public class LottoCheckerBean  implements Serializable {

    // Add business logic below. (Right-click in editor and choose
    // "Insert Code > Add Business Method")

    private List<PowerBallDrawing> powerBallDrawings; 

    public LottoCheckerBean()  {

       powerBallDrawings = new ArrayList<PowerBallDrawing>();
       powerBallDrawings.add( new PowerBallDrawing("03/16/2013",1,2,3,4,5,6));

    }

    public List<PowerBallDrawing> getPowerBallDrawings() {
        return this.powerBallDrawings;
    }

    public void setPowerBallDrawings(List<PowerBallDrawing> powerBallDrawings) {
        this.powerBallDrawings = powerBallDrawings;
    }

} 
```

最后包含表格行的类：

```
package PowerBall_BigBame_Checker;

import java.io.Serializable;

public class PowerBallDrawing implements Serializable {

    private String drawingDate;
    private int ball_1;
    private int ball_2;
    private int ball_3;
    private int ball_4;
    private int ball_5;
    private int powerBall;

    public PowerBallDrawing(String drawingDate, int ball_1, int ball_2, int ball_3,
            int ball_4, int ball_5, int powerBall) {

        this.ball_1 = ball_1;
        this.ball_2 = ball_2;
        this.ball_3 = ball_3;
        this.ball_4 = ball_4;
        this.ball_5 = ball_5;
        this.powerBall = powerBall;
        this.drawingDate = drawingDate;

    }

    public String getDrawingDate() {
        return drawingDate;
    }

    public void setDrawingDate(String drawingDate) {
        this.drawingDate = drawingDate;
    }

    public int getBall_1() {
        return ball_1;
    }

    public void setBall_1(int ball_1) {
        this.ball_1 = ball_1;
    }

    public int getBall_2() {
        return ball_2;
    }

    public void setBall_2(int ball_2) {
        this.ball_2 = ball_2;
    }

    public int getBall_3() {
        return ball_3;
    }

    public void setBall_3(int ball_3) {
        this.ball_3 = ball_3;
    }

    public int getBall_4() {
        return ball_4;
    }

    public void setBall_4(int ball_4) {
        this.ball_4 = ball_4;
    }

    public int getBall_5() {
        return ball_5;
    }

    public void setBall_5(int ball_5) {
        this.ball_5 = ball_5;
    }

    public int getPowerBall() {
        return powerBall;
    }

    public void setPowerBall(int powerBall) {
        this.powerBall = powerBall;
    }
} 
```

我怀疑我在某处违反了约定，但我没有看到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T03:06:33.427

您在构造函数中编写的代码应该在以下方法中：

公共无效 setPowerBallDrawings（列出 powerBallDrawings）{

}

这是因为每当您尝试访问该变量时，都会调用相应的 setter 方法。

试试这个。它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:22:24.213

我已将您的类和 jsf 页面添加到现有项目以查看错误。

你唯一的错误是在这条线上

```
<p:dataTable  value="#(lottoCheckerBean.powerBallDrawings}" var="powerBallDrawing"> 
```

如评论中所述，您的 EL 表达式中有**(**。正确的定义是

```
<p:dataTable  value="#{lottoCheckerBean.powerBallDrawings}" var="powerBallDrawing"> 
```

除此之外没有错误。

# objective-c - memcpy 和错误访问的问题

> ID：15468079
> 
> 赞同：-1
> 
> 时间：2013-03-18T00:38:25.997
> 
> 标签：objective-c, c, exc-bad-access, memcpy

第一次在这里问问题，但我真的对此感到困惑。这基本上就是我想要做的：

```
- (MyStruct)methodName:(OtherStruct)foo
{
    MyStruct bar;
    memcpy(&bar, &foo, sizeof(MyStruct));
    return bar;
} 
```

我试图弄清楚这一点得到了我这个信息：

*   sizeof(bar) == 64
*   sizeof(foo) == 80
*   sizeof(MyStruct) == 64
*   sizeof(OtherStruct) == 80

我得到 EXC_BAD_ACCESS（代码=1，地址=0x0）。我错过了什么愚蠢的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T00:49:34.150

EXC_BAD_ACCESS 的意思是你做了一些导致指针被取消引用的事情，并且内存位置不在分配给你的程序的块之一内，所以这是一个 MMU 问题。

# path - Prolog中的寻路

> ID：15468082
> 
> 赞同：4
> 
> 时间：2013-03-18T00:38:39.880
> 
> 标签：path, prolog, path-finding

我正在尝试自学 Prolog。下面，我编写了一些我认为应该返回无向图中节点之间的所有路径的代码……但事实并非如此。我试图理解*为什么*这个特定的代码不起作用（我认为这将这个问题与类似的 Prolog 寻路帖子区分开来）。我在 SWI-Prolog 中运行它。有什么线索吗？

```
% Define a directed graph (nodes may or may not be "room"s; edges are encoded by "leads_to" predicates).
room(kitchen).
room(living_room).
room(den).
room(stairs).
room(hall).
room(bathroom).
room(bedroom1).
room(bedroom2).
room(bedroom3).
room(studio).
leads_to(kitchen, living_room).
leads_to(living_room, stairs).
leads_to(living_room, den).
leads_to(stairs, hall).
leads_to(hall, bedroom1).
leads_to(hall, bedroom2).
leads_to(hall, bedroom3).
leads_to(hall, studio).
leads_to(living_room, outside).  % Note "outside" is the only node that is not a "room"
leads_to(kitchen, outside).

% Define the indirection of the graph.  This is what we'll work with.
neighbor(A,B) :- leads_to(A, B).
neighbor(A,B) :- leads_to(B, A). 
```

如果 A --> B --> C --> D 是无环路径，则

```
path(A, D, [B, C]) 
```

应该是真的。即，第三个参数包含中间节点。

```
% Base Rule (R0)
path(X,Y,[]) :- neighbor(X,Y).

% Inductive Rule (R1)
path(X,Y,[Z|P]) :- not(X == Y), neighbor(X,Z), not(member(Z, P)), path(Z,Y,P). 
```

然而，

```
?- path(bedroom1, stairs, P). 
```

是假的。为什么？我们不应该与 R1 匹配吗

```
X = bedroom1
Y = stairs
Z = hall
P = [] 
```

自从，

```
?- neighbor(bedroom1, hall).
true.

?- not(member(hall, [])).
true.

?- path(hall, stairs, []).
true . 
```

?

事实上，如果我评估

```
?- path(A, B, P). 
```

我只得到长度为 1 的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T03:38:59.200

欢迎来到 Prolog！本质上，问题是当你进入`not(member(Z, P))`R1 时，`P`它仍然是一个纯变量，因为评估还没有`path(Z, Y, P)`定义它。Prolog 令人惊讶但鼓舞人心的事情之一是，`member(Ground, Var)`它将生成包含`Ground`并统一它们的列表`Var`：

```
?- member(a, X).
X = [a|_G890] ;
X = [_G889, a|_G893] ;
X = [_G889, _G892, a|_G896] . 
```

这有一个令人困惑的副作用，即检查未实例化列表中的值总是会成功，这就是为什么`not(member(Z, P))`总是会失败，导致 R1 总是失败。您获得所有 R0 解决方案而没有 R1 解决方案的事实表明 R1 中的某些东西导致它总是失败。毕竟，我们知道 R0 有效。

如果你交换这两个目标，你会得到你想要的第一个结果：

```
path(X,Y,[Z|P]) :- not(X == Y), neighbor(X,Z), path(Z,Y,P), not(member(Z, P)).

?- path(bedroom1, stairs, P).
P = [hall] 
```

如果您要求其他解决方案，您将得到堆栈溢出。这是因为在更改之后，我们很乐意用 尽快生成带有循环的解决方案`path(Z,Y,P)`，只是在事后用 丢弃它们`not(member(Z, P))`。（顺便说一句，为了稍微提高效率，我们可以切换到`memberchk/2`而不是`member/2`。当然，更快地做错事并没有多大帮助。:)

我倾向于将其转换为广度优先搜索，这在 Prolog 中意味着添加一个“开放集”参数以包含您尚未尝试过的解决方案，并且在每个节点首先尝试开放集中的某些内容，然后将该节点的可能性添加到开放集的末尾。当开放集熄灭时，您已经尝试了可以​​到达的每个节点。对于一些寻路问题，无论如何它是比深度优先搜索更好的解决方案。您可以尝试的另一件事是将路径分为已访问组件和未来组件，并且仅检查已访问组件。只要您没有在当前步骤中生成循环，就可以确保您根本没有生成循环，无需担心未来的步骤。

你提出问题的方式让我相信你不想要一个完整的解决方案，只是一个提示，所以我认为这就是你所需要的。让我知道这是否不正确。

# php - 如何获得许多表的总数

> ID：15468084
> 
> 赞同：0
> 
> 时间：2013-03-18T00:38:58.477
> 
> 标签：php, mysql

我有 500 张表格，所有表格都包含“销售额”字段中的美元金额记录。

以下是每张桌子的绿色物品总销售额：

```
$tabletotal = mysql_query("SELECT sum(sales) FROM databasename.$tablename
WHERE type = 'green' AND descr  LIKE '%SOLD%'   ");
$row = mysql_fetch_assoc($tabletotal);
$answer= $row['sum(sales)']; 
```

因此，如果一张特定的桌子有 4 个绿色物品，它们的售价分别为 4 美元、6 美元、7 美元和 3 美元，那么我上面得到的答案是 20 美元。

现在，我不知道该怎么做，就是获取所有 500 个表中所有绿色项目的总数。因此，如果表 1 总共有 20 美元，表 2 总共有 36 美元，表 3 总共有 15 美元，依此类推，我想把所有表的总数加在一起（在这种情况下是 71 美元，但对于显然有 500 张桌子）。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T00:58:13.660

可能最好使用 for 循环：

```
$tables = array('tbl1', 'tbl2', 'tbl3', ..., 'tbl499');
$total = 0;
foreach ($tables as $t)
{
    $tabletotal = mysql_query("SELECT sum(sales) tot FROM databasename.$t WHERE type = 'green' AND descr LIKE '%SOLD%'");
    $row = mysql_fetch_assoc($tabletotal);
    $total += $row['tot'];
} 
```

或者，您可以使用 s 生成一个巨大的 SQL 查询`UNION`，但它本质上是一样的。

正如 Dream Eater 所说；首先，您不应该处于这种情况。

# regex - 正则表达式：将 ini 部分作为字符串返回

> ID：15468085
> 
> 赞同：0
> 
> 时间：2013-03-18T00:39:20.217
> 
> 标签：regex, ini

使用正则表达式，（我正在使用 Autohotkey，即 PCRE）如何匹配 ini 文件的部分？我不需要获取单独的键 - 只需部分块。

我想出了这个，只要在寻找的部分之后有一个部分，它似乎就匹配，但如果它是最后一个部分，它就会失败。

`iniregex := "ms)(?<=^\[keys\]).*(?=^\[)"`

例如，我想获取该部分的全部内容`[keys]`，同时排除注释并忽略空行（它应该捕获`test=2`，但是排除该行的注释：

```
[settings]
settings=0
;settings=1

[keys]
test=0
;test=1
test=2 ;comment
test=3
[nextsection]
this section has an empty and should be caught.

there is an empty line after this line, and it should be caught, too.

    eof 
```

[我找到了这个](https://stackoverflow.com/questions/1561508/match-ini-section-blocks?rq=1)，但我不确定在哪里放置寻找的部分名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T01:58:24.603

从您链接的问题中，您可以在此处输入所寻求的部分名称：

`(?ms)^\[keys](?:(?!^\[[^]\r\n]+]).)*`

但是，我认为您无法在与捕获相同的正则表达式中删除注释。您必须在第二步中执行此操作。

如果后面没有部分，则您的正则表达式将失败，`[keys]`因为您需要为下一部分放置“0 或更多”类型量词。就像是：

`iniregex := "ms)(?<=^\[keys\]).*(?:(?=^\[))?"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T02:24:44.333

您无法使用单个正则表达式来实现此目的。

您可以做的是根据您的报价使用此正则表达式来提取`[keys]`部分而不包括`[keys]`标签：

```
/^(?<=\[keys\]\r\n)(?:(?!^\[).)*(?=\r\n)/ms 
```

之后，您可以[将此正则表达式](http://regexr.com?345k7)用于提取的部分以排除注释/空白行：

```
/^[^;\s][^;\r\n]*/gm 
```

# actionscript-3 - 如何处理自定义 GridItemRenderer 中的更改

> ID：15468087
> 
> 赞同：0
> 
> 时间：2013-03-18T00:39:46.447
> 
> 标签：actionscript-3, apache-flex, datagrid, event-handling, dataprovider

我在我的`DataGrid`一个项目中使用了一个，其中一个列的自定义`ItemRenderer`将布尔值表示为`CheckBox`

```
<s:DataGrid id="clients" resizableColumns="false">
    <s:columns>
        <s:ArrayList>
            <s:GridColumn dataField="fullName" headerText="Client name" />
            <s:GridColumn dataField="active" headerText="Active?" width="90"
                          itemRenderer="CheckBoxGridItemRenderer"/>
        </s:ArrayList>
    </s:columns>
</s:DataGrid> 
```

这是代码`CheckBoxGridItemRenderer`：

```
<?xml version="1.0" encoding="utf-8"?>
<s:GridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                    xmlns:s="library://ns.adobe.com/flex/spark" 
                    xmlns:mx="library://ns.adobe.com/flex/mx"
                    clipAndEnableScrolling="true">

    <fx:Script>
        <![CDATA[
            override public function prepare(hasBeenRecycled:Boolean):void {
                checkBox.selected = Boolean(data[column.dataField]);
            }
        ]]>
    </fx:Script>

    <s:CheckBox id="checkBox" horizontalCenter="0" />

</s:GridItemRenderer> 
```

现在这是我的问题：处理我声明的类中的数据更改的最佳方法是什么`DataGrid`？

我试图从我的自定义项目渲染器类中更改数据值：

```
private function valueChange():void
{
    data.active = checkBox.selected;
}

[...]

<s:CheckBox id="checkBox" change="valueChange()" /> 
```

然后`CollectionEvent.COLLECTION_CHANGE`在 DataGrid 的 dataProvider 上收听事件，但我从不处理任何更改。有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:19:16.817

你在哪里更改数据。当数据集合的元素发生更改时，除非您为数据集合调度 CollectionEvent.COLLECTION_CHANGE，否则 DataGrid 无法检测到任何内容。此外，数据集合应该是 ArrayCollection 之类的，而不是 Array。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:37:17.653

当我找到解决问题的方法时，我会将其发布在这里，但我会将问题留待一段时间，以防有人提出更好的问题。

首先，我创建了一个`CustomEvent`（我可以使用`CollectionEvent`该类，但这样我确信我不会弄乱 的内部逻辑`DataGrid`）

```
package
{
    import flash.events.Event;

    public class CustomEvent extends Event
    {
        public static const CHANGE:String = "change";

        public var column:String;
        public var data:Object;

        public function CustomEvent(column:String, data:Object)
        {
            super(CHANGE, true);
            this.column = column;
            this.data = data;
        }
    }
} 
```

`super()`请注意对`bubbles`设置为 true的调用。这实际上是在此处处理事件所必需的。

然后我修改了我`CheckBoxGridItemRenderer`以在选中/取消选中复选框时调度此事件：

```
<?xml version="1.0" encoding="utf-8"?>
<s:GridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                    xmlns:s="library://ns.adobe.com/flex/spark" 
                    xmlns:mx="library://ns.adobe.com/flex/mx" clipAndEnableScrolling="true">

    <fx:Script>
        <![CDATA[
            import CustomEvent;

            override public function prepare(hasBeenRecycled:Boolean):void {
                if (data)
                {
                    checkBox.selected = Boolean(data[column.dataField]);
                }
            }

            private function valueChange():void
            {
                data[column.dataField] = checkBox.selected;
                dispatchEvent(new CustomEvent(column.dataField, data));
            }
        ]]>
    </fx:Script>

    <s:CheckBox id="checkBox" horizontalCenter="0" change="valueChange()" />
</s:GridItemRenderer> 
```

最后我只需要监听`DataGrid`实例派发的自定义事件：

```
clients.addEventListener(CustomEvent.CHANGE, handleCustomEvent); 
```

# css - 当您将鼠标悬停在它上面而不抽搐时，如何更改文本？

> ID：15468090
> 
> 赞同：2
> 
> 时间：2013-03-18T00:40:21.057
> 
> 标签：css, hover, pseudo-element, css-content

据我了解，CSS 可用于以`:hover`基本方式更改元素的内容。我正在使用此代码

HTML：

```
<button><span>3 replies</span></button> 
```

CSS：

```
button {width:6em}
button:hover span {display:none}
button:hover:before {content:"Reply!"} 
```

但是当我将鼠标悬停在按钮上时，它抽搐得很厉害

我希望我的像[这个链接上的音乐播放器一样流畅](http://www.musiccentro.com/centroadmin/index.php/beats/ws/?beat_id=159)

当您将鼠标悬停在 、 或 价格 下的按钮之一上时`lease`，`premium`它们`trackout`会切换到`+add`文本

这是我的播放器的一部分[http://djwckd.com/test](http://djwckd.com/test)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T01:08:16.193

重要的是确保您的布局在悬停时不会改变。实现这一点的最简单方法是在布局中为所有部分分配一些空间，即使在不悬停时也是如此。我不确定您要实现哪种布局，但这是一个示例：

```
button { width: 6em }
button:hover span {display:none}
button:before { width: 100px; content: ""; }
button:hover:before {content: "Reply!"} 
```

通过给`:before`伪元素一个大小，即使它没有悬停，布局也不应该在内容改变时改变。您可能需要针对您想要的特定布局进行调整，但一般原则是确保指定所有与大小相关的属性*，* `:hover`然后仅调整非布局属性（即不影响任何框的属性尺寸）在该`:hover`州。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T02:52:07.230

正如您提供的那样，该链接悬停在背景图像上，但在您的测试链接中，如果您希望与使用to和to`<a>`的链接完全相同，那么您之前已经为元素提供了背景图像。`background-image: url('image1');``a``background-image: url('image2');``a:hover`

您仍然可以使用定位背景图像，为此您应该像这样。

```
+--------------+
|              |    position this background to a
+--------------+
|    + Add     |    position this background to a:hover
+--------------+ 
```

好的！为此，使您的背景宽度为 64 像素，高度为 32 像素。然后将您的背景定位到 `a{background-image: url('image') left top no-repeat; background-position: 0% 100%;}`

现在将您的背景定位到

```
a:hover{background-position: 0% 0%;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-12T00:05:52.817

我想我有一个解决办法。诀窍是一件主要的事情：设置文本容器的宽度。我还使用 onmouseenter 而不是 onmouseover 来更快地更改文本（我的理论认为 onmouseenter 比 onmouseover 更快）。这是一个例子：

```
var videoplayer = {
    text: "<b>Hello World</b>",
    author: "(you)"
  }
```

```
<div onmouseenter="this.innerHTML = videoplayer.text;" onmouseleave="this.innerHTML = '<b>(hover over me)</b>';" style="background-color: red; padding: 10px; width: 110px; text-align: center; color: white;">(hover over me)</div>
```

只需确保将 div 的宽度设置为所需的宽度即可。（如果您不想要背景，只需将背景颜色：红色部分更改为背景颜色：透明）。还有一件事：您必须使用 div 或其他容器，并将 display:block 设置为默认值。我建议使用 div。希望这可以帮助！

# jquery - 更新时jQuery div向下滑动

> ID：15468091
> 
> 赞同：-3
> 
> 时间：2013-03-18T00:40:25.410
> 
> 标签：jquery, html, refresh, slidedown

我的代码在这里检查我的图像表上是否有新帖子。

当我有一个新帖子并且我的时间戳发生变化时，我希望一个 div 向下滑动，说有新的更新，如下图所示：

![Instagram：1 张新照片](../Images/1c0b66a76732c08948fde7bba63aa591.png)

```
setInterval('checkForUpdates', 30000);
var lastTime = (new Date()).getTime();
function checkForUpdates() {
   $.get('image.php?timestamp=' . lastTime
      , function (results) {
         if (results) { /* fade into dom */ }
      }
   );
   lastTime = (new Date()).getTime();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T00:56:27.967

```
//add the div with the new post text
$("the conatiner id").prepend("<div class = 'new-post' style = 'width: 100%; height = 20px;'> A new post has been added </div>");
//make it slide down
$("the container id").find(".new-post:last").slideDown("fast"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T00:49:28.017

您是否尝试过使用滑下功能？[http://api.jquery.com/slideDown/](http://api.jquery.com/slideDown/) 或从 0 开始[动画高度 jQuery 动画高度](https://stackoverflow.com/questions/4603397/jquery-animate-height)

# python - 出现字符后删除行的剩余部分

> ID：15468092
> 
> 赞同：2
> 
> 时间：2013-03-18T00:40:26.353
> 
> 标签：python, python-2.7

我有一个包含数千行的文本文件。我想做的是删除'|'的第一次出现 在一行中，所有在后面的那一行中。我对python很陌生，不确定如何去做。re.search 浮现在脑海，但我不知道如何只删除一行的一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T00:43:27.220

看看这个：

```
>>> s = 'abc|123|xyz'
>>> s
'abc|123|xyz'
>>> s.split('|', 1)[0]
'abc' 
```

或者，你可以做

```
>>> s[s.index('|')+1:]
'123|xyz' 
```

看起来第二种方法稍微快一些：

```
>>> from timeit import timeit as time
>>> time("s.split('|', 1)[0]", "s = 'abc|123|xyz'")
0.39399194717407227
>>> time("s[s.index('|')+1:]", "s = 'abc|123|xyz'")
0.2868010997772217 
```

* * *

**相关文档：**

*   [`str.split`](http://docs.python.org/2/library/stdtypes.html#str.split)

# jquery - 更新复选框选择的文本框

> ID：15468094
> 
> 赞同：0
> 
> 时间：2013-03-18T00:40:49.143
> 
> 标签：jquery

调整复选框值时如何更新我的文本框？

例如，如果选中复选框 1 到 6 时文本框显示 1-6，并且未选中 3，我希望文本框显示 1、2、4-6 或 1、2、4、5、6。我该怎么做。

到目前为止，这是我的代码，我的 jsFiddle 可以在[http://jsfiddle.net/dYsg7/4/](http://jsfiddle.net/dYsg7/4/)找到：

```
// slider

$(".slider_weekRange2").slider({
    range: true,
    min: 1,
    max: 15,
    step: 1,
    values: [1, 12],
    slide: function (event, ui) {
        $(".search_weekRange2").val(ui.values[0] + "-" + ui.values[1]);
        $('input:checkbox[name="weeks_1"]').prop("checked", false);
        $('input:checkbox[name="weeks_1"]').slice(ui.values[0] - 1, ui.values[1]).prop("checked", true);
    }
});
$(".search_weekRange2").val($(".slider_weekRange2").slider("values", 0) +
    "-" + $(".slider_weekRange2").slider("values", 1));

// weeks

     // no weeks

$('.week_none').click(function () {
    $('input:checkbox[name="weeks_1"]').prop("checked", false);
        $(".search_weekRange2").val('');
});

        // all week

$('.week_all').click(function () {
    $('input:checkbox[name="weeks_1"]').prop("checked", true);
        $(".search_weekRange2").val('1-15');
});

        // weeks 1-12

$('.week_term').click(function () {
    $('input:checkbox[name="weeks_1"]').prop("checked", false);
    $('input:checkbox[name="weeks_1"]').slice(0, 12).prop("checked", true);
        $(".search_weekRange2").val('1-12');
});

        // odd weeks

$('.week_odd').click(function () {
    $('input:checkbox[name="weeks_1"]').prop("checked", false);
    $('input:checkbox[name="weeks_1"]:even').prop("checked", true);
        $(".search_weekRange2").val('1,3,5,7,9,11,13,15');
});

        // even weeks

$('.week_even').click(function () {
    $('input:checkbox[name="weeks_1"]').prop("checked", false);
    $('input:checkbox[name="weeks_1"]:odd').prop("checked", true);
        $(".search_weekRange2").val('2,4,6,8,10,12,14');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T00:52:44.247

这是你修改过的小提琴：http: [//jsfiddle.net/dYsg7/5/](http://jsfiddle.net/dYsg7/5/)

这是我添加的代码：

```
$('input:checkbox').click(function () {
    var s = [];
    $('input:checkbox').each(function () {
        if (this.checked) {
            s.push($(this).next().text());
        }
    });
   $(".search_weekRange2").val(s.join(','));
}); 
```

单击复选框时，检查每个复选框，如果选中，则将其标签文本（之后的下一项）添加到数组中。收集所有选中的复选框后，用逗号将它们全部连接起来，然后将其分配给输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T00:46:53.633

将 onChange 侦听器添加到您的复选框并调用将创建您的字符串并更新复选框的函数怎么样？

# android - CursorAdapter 支持 ListView 删除动画在删除时“闪烁”

> ID：15468100
> 
> 赞同：14
> 
> 时间：2013-03-18T00:41:33.243
> 
> 标签：android, android-listview, android-animation

我正在尝试实现滑动删除，并`ListView`使用扩展[Roman Nurik 的 SwipeToDismiss](https://gist.github.com/romannurik/2980593)示例的[SwipeToDismissUndoList库。](https://github.com/timroes/SwipeToDismissUndoList)

我的问题在于删除动画。由于`ListView`由 a 支持`CursorAdapter`，动画会触发`onDismiss`回调，`onAnimationEnd`但这意味着动画已经运行并在`CursorAdapter`使用删除更新之前自行重置。

这最终对用户来说就像一个闪烁，他们通过滑动删除笔记，然后视图返回一瞬间然后消失，因为`CursorAdapter`已经拾取数据更改。

这是我的`OnDismissCallback`：

```
private SwipeDismissList.OnDismissCallback dismissCallback = 
        new SwipeDismissList.OnDismissCallback() {
    @Override
    public SwipeDismissList.Undoable onDismiss(ListView listView, final int position) {
        Cursor c = mAdapter.getCursor();
        c.moveToPosition(position);
        final int id = c.getInt(Query._ID);
        final Item item = Item.findById(getActivity(), id);
        if (Log.LOGV) Log.v("Deleting item: " + item);

        final ContentResolver cr = getActivity().getContentResolver();
        cr.delete(Items.buildItemUri(id), null, null);
        mAdapter.notifyDataSetChanged();

        return new SwipeDismissList.Undoable() {
            public void undo() {
                if (Log.LOGV) Log.v("Restoring Item: " + item);
                ContentValues cv = new ContentValues();
                cv.put(Items._ID, item.getId());
                cv.put(Items.ITEM_CONTENT, item.getContent());
                cr.insert(Items.CONTENT_URI, cv);
            }
        };
    }
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-09T02:07:48.273

我知道这个问题已被标记为“已回答”，但正如我在评论中指出的那样，使用 MatrixCursor 的问题在于它效率太低。复制除要删除的行之外的所有行意味着行删除以线性时间运行（与列表视图中的项目数成线性关系）。对于大数据和速度较慢的手机，这可能是不可接受的。

另一种方法是实现您自己的 AbstractCursor 忽略要删除的行。这导致假行删除在恒定时间内运行，并且在绘制时性能损失可以忽略不计。

示例实现：

```
public class CursorWithDelete extends AbstractCursor {

private Cursor cursor;
private int posToIgnore;

public CursorWithDelete(Cursor cursor, int posToRemove)
{
    this.cursor = cursor;
    this.posToIgnore = posToRemove;
}

@Override
public boolean onMove(int oldPosition, int newPosition)
{
    if (newPosition < posToIgnore)
    {
        cursor.moveToPosition(newPosition);
    }
    else
    {
        cursor.moveToPosition(newPosition+1);
    }
    return true;
}

@Override
public int getCount()
{
    return cursor.getCount() - 1;
}

@Override
public String[] getColumnNames()
{
    return cursor.getColumnNames();
}

//etc.
//make sure to override all methods in AbstractCursor appropriately 
```

像以前一样按照所有步骤操作，除了：

*   在 SwipeDismissList.OnDismissCallback.onDismiss() 中，创建新的 CursorWithDelete。
*   交换新光标

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T14:12:11.157

我认为 SwipeToDismissUndoList 不适合基于光标的适配器。因为适配器依赖于内容提供者（[`setNotificationUri()`](http://developer.android.com/reference/android/database/Cursor.html#setNotificationUri%28android.content.ContentResolver,%20android.net.Uri%29)或[`registerContentObserver()`](http://developer.android.com/reference/android/database/Cursor.html#registerContentObserver%28android.database.ContentObserver%29)……）的更改来更新 UI。您不知道数据何时可用。这就是你面临的问题。

我认为有一些类似的伎俩。您可以使用[`MatrixCursor`](http://developer.android.com/reference/android/database/MatrixCursor.html).

*   在[`onLoadFinished(Loader, Cursor)`](http://developer.android.com/reference/android/app/LoaderManager.LoaderCallbacks.html#onLoadFinished%28android.content.Loader%3cD%3e,%20D%29)中，您保留对从内容提供程序返回的游标的引用。您需要稍后手动关闭它。
*   在`SwipeDismissList.OnDismissCallback.onDismiss()`, create new`MatrixCursor`中，复制当前光标中的所有项目，但要删除的项目*除外。*
*   [`swapCursor()`](http://developer.android.com/reference/android/widget/CursorAdapter.html#swapCursor%28android.database.Cursor%29)使用( *not* )将新创建的矩阵光标设置为适配器`changeCursor()`。因为`swapCursor()`不会关闭旧光标。您需要将其保持打开状态，以便装载机正常工作。
*   现在 UI 已更新，您可以调用`getContentResolver().delete()`并实际删除用户想要删除的项目。当内容提供者完成删除数据时，它会通知原始游标重新加载数据。
*   确保关闭您交换的原始光标。例如：

    ```
    private Cursor mOrgCursor;

    @Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
        if (mOrgCursor != null)
            mOrgCursor.close();
        mOrgCursor = data;
        mAdapter.changeCursor(mOrgCursor);
    }

    @Override
    public void onLoaderReset(Loader<Cursor> loader) {
        if (mOrgCursor != null) {
            mOrgCursor.close();
            mOrgCursor = null;
        }
        mAdapter.changeCursor(null);
    } 
    ```

*   不用担心矩阵光标，`changeCursor()`将其关闭。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-06T10:55:37.517

嘿，我遇到了类似的问题并像这样解决了，希望对您有所帮助：

我使用了 Chet Haase 在这个 devbyte 中展示的内容：[http ://www.youtube.com/watch?v=YCHNAi9kJI4](http://www.youtube.com/watch?v=YCHNAi9kJI4)

它与 Roman 的代码非常相似，但这里他使用了 ViewTreeObserver，所以在您从适配器中删除项目之后，但在重新绘制列表之前，您有时间动画关闭间隙，并且它不会闪烁。另一个区别是，他将 Listener 设置为适配器中列表的每个视图（项目），而不是 ListView 本身。

所以我的代码示例：

这是ListActivity的onCreate，这里我把监听器传给适配器没什么特别的：

```
ListAdapterTouchListener listAdapterTouchListener = new ListAdapterTouchListener(getListView());
    listAdapter = new ListAdapter(this,null,false,listAdapterTouchListener); 
```

这是ListAdapter的一部分（它是我自己的扩展CursorAdapter的适配器），我在Constructor中传递了Listener，

```
private View.OnTouchListener onTouchListener;

public ListAdapter(Context context, Cursor c, boolean autoRequery,View.OnTouchListener listener) {
    super(context, c, autoRequery);
    onTouchListener = listener;
} 
```

然后在 newView 方法中我将它设置为视图：

```
@Override
public View newView(final Context context, Cursor cursor, ViewGroup parent) {
    View view = layoutInflater.inflate(R.layout.list_item,parent,false);
    // here should be some viewholder magic to make it faster
    view.setOnTouchListener(onTouchListener);

    return view;
} 
```

监听器与视频中显示的代码基本相同，我不使用背景容器，但这只是我的选择。所以 animateRemoval 有有趣的部分，这里是：

```
private void animateRemoval(View viewToRemove){
    for(int i=0;i<listView.getChildCount();i++){
        View child = listView.getChildAt(i);
        if(child!=viewToRemove){

        // since I don't have stableIds I use the _id from the sqlite database
        // I'm adding the id to the viewholder in the bindView method in the ListAdapter

            ListAdapter.ViewHolder viewHolder = (ListAdapter.ViewHolder)child.getTag();
            long itemId = viewHolder.id;
            itemIdTopMap.put(itemId, child.getTop());
        }
    }

    // I'm using content provider with LoaderManager in the activity because it's more efficient, I get the id from the viewholder

    ListAdapter.ViewHolder viewHolder = (ListAdapter.ViewHolder)viewToRemove.getTag();
    long removeId = viewHolder.id;

    //here you remove the item

    listView.getContext().getContentResolver().delete(Uri.withAppendedPath(MyContentProvider.CONTENT_ID_URI_BASE,Long.toString(removeId)),null,null);

    // after the removal get a ViewTreeObserver, so you can set a PredrawListener
    // the rest of the code is pretty much the same as in the sample shown in the video

    final ViewTreeObserver observer = listView.getViewTreeObserver();
    observer.addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {
        @Override
        public boolean onPreDraw() {
            observer.removeOnPreDrawListener(this);
            boolean firstAnimation = true;
            for(int i=0;i<listView.getChildCount();i++){
                final View child = listView.getChildAt(i);
                ListAdapter.ViewHolder viewHolder = (ListAdapter.ViewHolder)child.getTag();
                long itemId = viewHolder.id;
                Integer startTop = itemIdTopMap.get(itemId);
                int top = child.getTop();
                if(startTop!=null){
                    if (startTop!=top) {
                        int delta=startTop-top;
                        child.setTranslationY(delta);
                        child.animate().setDuration(MOVE_DURATION).translationY(0);
                        if(firstAnimation){
                            child.animate().setListener(new Animator.AnimatorListener() {
                                @Override
                                public void onAnimationStart(Animator animation) {

                                }

                                @Override
                                public void onAnimationEnd(Animator animation) {
                                        swiping=false;
                                    listView.setEnabled(true);
                                }

                                @Override
                                public void onAnimationCancel(Animator animation) {

                                }

                                @Override
                                public void onAnimationRepeat(Animator animation) {

                                }
                            });
                            firstAnimation=false;
                        }
                    }
                }else{
                    int childHeight = child.getHeight()+listView.getDividerHeight();
                    startTop = top+(i>0?childHeight:-childHeight);
                    int delta = startTop-top;
                    child.setTranslationY(delta);
                    child.animate().setDuration(MOVE_DURATION).translationY(0);
                    if(firstAnimation){
                        child.animate().setListener(new Animator.AnimatorListener() {
                            @Override
                            public void onAnimationStart(Animator animation) {

                            }

                            @Override
                            public void onAnimationEnd(Animator animation) {
                                swiping=false;
                                listView.setEnabled(true);
                            }

                            @Override
                            public void onAnimationCancel(Animator animation) {

                            }

                            @Override
                            public void onAnimationRepeat(Animator animation) {

                            }
                        });
                        firstAnimation=false;
                    }
                }
            }
            itemIdTopMap.clear();
            return true;
        }
    });
} 
```

希望这对你有帮助，它对我很好！你真的应该看看 devbyte，它对我帮助很大！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-06T20:57:38.263

在发布这个答案的那一刻，我已经尝试了这个线程中列出的所有方法。CursorWrapper 从性能的角度来看是最有效的，但不幸的是不安全，因为不能保证已关闭项目的位置是稳定的（如果可以从其他来源更改数据，例如通过后台同步）。或者，您可以尝试我的基本光标适配器的简单实现：

```
/*
 * Copyright (C) 2014\. Victor Kosenko (http://qip-blog.eu.org)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

// your package here

import android.content.Context;
import android.database.Cursor;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.CursorAdapter;

import com.google.api.client.util.Sets;

import java.util.Set;

/**
 * This is basic implementation of swipable cursor adapter that allows to skip displaying dismissed
 * items by replacing them with empty view. This adapter overrides default implementation of
 * {@link #getView(int, android.view.View, android.view.ViewGroup)}, so if you have custom
 * implementation of this method you should review it according to logic of this adapter.
 *
 * @author Victor Kosenko
 */
public abstract class BaseSwipableCursorAdapter extends CursorAdapter {

    protected static final int VIEW_ITEM_NORMAL = 0;
    protected static final int VIEW_ITEM_EMPTY = 1;

    protected Set<Long> pendingDismissItems;
    protected View emptyView;
    protected LayoutInflater inflater;

    /**
     * If {@code true} all pending items will be removed on cursor swap
     */
    protected boolean flushPendingItemsOnSwap = true;

    /**
     * @see android.widget.CursorAdapter#CursorAdapter(android.content.Context, android.database.Cursor, boolean)
     */
    public BaseSwipableCursorAdapter(Context context, Cursor c, boolean autoRequery) {
        super(context, c, autoRequery);
        init(context);
    }

    /**
     * @see android.widget.CursorAdapter#CursorAdapter(android.content.Context, android.database.Cursor, int)
     */
    protected BaseSwipableCursorAdapter(Context context, Cursor c, int flags) {
        super(context, c, flags);
        init(context);
    }

    /**
     * Constructor with {@code null} cursor and enabled autoRequery
     *
     * @param context The context
     */
    protected BaseSwipableCursorAdapter(Context context) {
        super(context, null, true);
        init(context);
    }

    /**
     * @param context                 The context
     * @param flushPendingItemsOnSwap If {@code true} all pending items will be removed on cursor swap
     * @see #BaseSwipableCursorAdapter(android.content.Context)
     */
    protected BaseSwipableCursorAdapter(Context context, boolean flushPendingItemsOnSwap) {
        super(context, null, true);
        init(context);
        this.flushPendingItemsOnSwap = flushPendingItemsOnSwap;
    }

    protected void init(Context context) {
        inflater = LayoutInflater.from(context);
        pendingDismissItems = Sets.newHashSet();
        emptyView = new View(context);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if (!getCursor().moveToPosition(position)) {
            throw new IllegalStateException("couldn't move cursor to position " + position);
        }
        if (isPendingDismiss(position)) {
            return emptyView;
        } else {
            return super.getView(position, convertView, parent);
        }
    }

    @Override
    public int getViewTypeCount() {
        return 2;
    }

    @Override
    public int getItemViewType(int position) {
        return pendingDismissItems.contains(getItemId(position)) ? VIEW_ITEM_EMPTY : VIEW_ITEM_NORMAL;
    }

    /**
     * Add item to pending dismiss. This item will be ignored in
     * {@link #getView(int, android.view.View, android.view.ViewGroup)} when displaying list of items
     *
     * @param id Id of item that needs to be added to pending for dismiss
     * @return {@code true} if this item already in collection if pending items, {@code false} otherwise
     */
    public boolean putPendingDismiss(Long id) {
        return pendingDismissItems.add(id);
    }

    /**
     * Confirm that specified item is no longer present in underlying cursor. This method should be
     * called after the fact of removing this item from result set of underlying cursor.
     * If you're using flushPendingItemsOnSwap flag there is no need to call this method.
     *
     * @param id Id of item
     * @return {@code true} if this item successfully removed from pending to dismiss, {@code false}
     * if it's not present in pending items collection
     */
    public boolean commitDismiss(Long id) {
        return pendingDismissItems.remove(id);
    }

    /**
     * Check if this item should be ignored
     *
     * @param position Cursor position
     * @return {@code true} if this item should be ignored, {@code false} otherwise
     */
    public boolean isPendingDismiss(int position) {
        return getItemViewType(position) == VIEW_ITEM_EMPTY;
    }

    public boolean isFlushPendingItemsOnSwap() {
        return flushPendingItemsOnSwap;
    }

    /**
     * Automatically flush pending items when calling {@link #swapCursor(android.database.Cursor)}
     *
     * @param flushPendingItemsOnSwap If {@code true} all pending items will be removed on cursor swap
     */
    public void setFlushPendingItemsOnSwap(boolean flushPendingItemsOnSwap) {
        this.flushPendingItemsOnSwap = flushPendingItemsOnSwap;
    }

    @Override
    public Cursor swapCursor(Cursor newCursor) {
        if (flushPendingItemsOnSwap) {
            pendingDismissItems.clear();
        }
        return super.swapCursor(newCursor);
    }
} 
```

它基于**HashSet**和**默认项目 ID** (getItemId())，因此性能不应该成为问题，因为 contains() 方法具有 O(1) 时间复杂度，并且实际设置大部分时间将包含零或一个项目。这也取决于番石榴。如果您不使用 Guava，只需替换第 91 行的集合构造即可。

要在您的项目中使用它，您只需扩展此类而不是 CursorAdapter 并在 onDismiss() 中添加几行代码（如果您使用的是 [EnhancedListView](https://github.com/timroes/EnhancedListView "增强型列表视图")或类似库）：

```
@Override
public EnhancedListView.Undoable onDismiss(EnhancedListView enhancedListView, int i) {
    adapter.putPendingDismiss(id);
    adapter.notifyDataSetChanged();
    ...
} 
```

如果您使用列表分隔符，此解决方案将不起作用（因为此适配器显示空视图而不是关闭的项目）。您应该在项目布局中添加边距以在项目之间设置间距并在项目布局中包含分隔线。

这段代码以后可以更新，所以我把它贴在了github gist上：[https ://gist.github.com/q1p/0b95633ab9367fb86785](https://gist.github.com/q1p/0b95633ab9367fb86785)

另外，我想建议您不要像您的示例中那样在主线程中使用 I/O 操作:)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-08-08T11:15:27.470

只需带着同样的问题来到这里，并使用 Emanuel Moecklin 提供的代码完美轻松地解决。

这真的很简单：在 onDismiss 方法中，执行以下操作：

```
 //Save cursor for later
        Cursor cursor = mAdapter.getCursor();
        SwipeToDeleteCursorWrapper cursorWrapper = new SwipeToDeleteCursorWrapper(mAdapter.getCursor(), reverseSortedPositions[0]);
        mAdapter.swapCursor(cursorWrapper);
        //Remove the data from the database using the cursor 
```

然后创建 SwipteToDeleteCursorWrapper，如 Emanuel 所写：

```
public class SwipeToDeleteCursorWrapper extends CursorWrapper
{
    private int mVirtualPosition;
    private int mHiddenPosition;

    public SwipeToDeleteCursorWrapper(Cursor cursor, int hiddenPosition)
    {
        super(cursor);
        mVirtualPosition = -1;
        mHiddenPosition = hiddenPosition;
    }

    @Override
    public int getCount()
    {
        return super.getCount() - 1;
    }

    @Override
    public int getPosition()
    {
        return mVirtualPosition;
    }

    @Override
    public boolean move(int offset)
    {
        return moveToPosition(getPosition() + offset);
    }

    @Override
    public boolean moveToFirst()
    {
        return moveToPosition(0);
    }

    @Override
    public boolean moveToLast()
    {
        return moveToPosition(getCount() - 1);
    }

    @Override
    public boolean moveToNext()
    {
        return moveToPosition(getPosition() + 1);
    }

    @Override
    public boolean moveToPosition(int position)
    {
        mVirtualPosition = position;
        int cursorPosition = position;
        if (cursorPosition >= mHiddenPosition)
        {
            cursorPosition++;
        }
        return super.moveToPosition(cursorPosition);
    }

    @Override
    public boolean moveToPrevious()
    {
        return moveToPosition(getPosition() - 1);
    }

    @Override
    public boolean isBeforeFirst()
    {
        return getPosition() == -1 || getCount() == 0;
    }

    @Override
    public boolean isFirst()
    {
        return getPosition() == 0 && getCount() != 0;
    }

    @Override
    public boolean isLast()
    {
        int count = getCount();
        return getPosition() == (count - 1) && count != 0;
    }

    @Override
    public boolean isAfterLast()
    {
        int count = getCount();
        return getPosition() == count || count == 0;
    }
} 
```

就这样！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-07-30T03:28:29.063

（这个答案是关于[Roman Nuriks library](https://gist.github.com/romannurik/2980593)的。对于从那里分支的图书馆，它应该是相似的）。

发生此问题是因为这些库想要回收已删除的视图。基本上在一个行项目被动画消失后，库将其重置为其原始位置和外观，以便 listView 可以重用它。有两种解决方法。

## 解决方案 1

在`performDismiss(...)`库的方法中，找到重置已关闭视图的代码部分。这是部分：

```
ViewGroup.LayoutParams lp;
for (PendingDismissData pendingDismiss : mPendingDismisses) {
   // Reset view presentation
   pendingDismiss.view.setAlpha(1f);
   pendingDismiss.view.setTranslationX(0);
   lp = pendingDismiss.view.getLayoutParams();
   lp.height = originalHeight;
   pendingDismiss.view.setLayoutParams(lp);
}

mPendingDismisses.clear(); 
```

删除这部分并将其放在单独的`public`方法中：

```
/**
 * Resets the deleted view objects to their 
 * original form, so that they can be reused by the
 * listview. This should be called after listview has 
 * the refreshed data available, e.g., in the onLoadFinished
 * method of LoaderManager.LoaderCallbacks interface.
 */
public void resetDeletedViews() {
    ViewGroup.LayoutParams lp;
    for (PendingDismissData pendingDismiss : mPendingDismisses) {
        // Reset view presentation
        pendingDismiss.view.setAlpha(1f);
        pendingDismiss.view.setTranslationX(0);
        lp = pendingDismiss.view.getLayoutParams();
        lp.height = originalHeight;
        pendingDismiss.view.setLayoutParams(lp);
    }

    mPendingDismisses.clear();
} 
```

最后，在您的主要活动中，当新光标准备好时调用此方法。

## 解决方案 2

忘记回收行项目（毕竟它只是一行）。而不是重置视图并准备回收，以某种方式将其标记为`performDismiss(...)`在库的方法中染色。

然后在填充您的 listView 时（通过覆盖适配器的`getView(View convertView, ...)`方法），检查`convertView`对象上的该标记。如果它在那里，请不要使用`convertView`. 例如你可以做（​​以下是伪代码）

```
if (convertView is marked as stained) {
   convertView = null;
}
return super.getView(convertView, ...); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-23T08:57:25.620

基于[U Avalos 的回答](https://stackoverflow.com/a/18139147/527759)，我实现了处理多个已删除位置的光标包装器。但是，解决方案尚未经过全面测试，可能包含错误。设置光标时像这样使用它

```
mAdapter.changeCursor(new CursorWithDelete(returnCursor)); 
```

如果您想从列表中隐藏某些项目

```
CursorWithDelete cursor = (CursorWithDelete) mAdapter.getCursor();
cursor.deleteItem(position);
mAdapter.notifyDataSetChanged(); 
```

CusrsorWithDelete.java

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

import android.database.AbstractCursor;
import android.database.Cursor;

public class CursorWithDelete extends AbstractCursor {
    private List<Integer> positionsToIgnore = new ArrayList<Integer>();
    private Cursor cursor;

    public CursorWithDelete(Cursor cursor) {
        this.cursor = cursor;
    }

    @Override
    public boolean onMove(int oldPosition, int newPosition) {
        cursor.moveToPosition(adjustPosition(newPosition));
        return true;
    }

    public int adjustPosition(int newPosition) {
        int ix = Collections.binarySearch(positionsToIgnore, newPosition);
        if (ix < 0) {
            ix = -ix - 1;
        } else {
            ix++;
        }
        int newPos;
        int lastRemovedPosition;
        do {
            newPos = newPosition + ix;
            lastRemovedPosition = positionsToIgnore.size() == ix ? -1 : positionsToIgnore.get(ix);
            ix++;
        } while (lastRemovedPosition >= 0 && newPos >= lastRemovedPosition);
        return newPos;
    }

    @Override
    public int getCount() {
        return cursor.getCount() - positionsToIgnore.size();
    }

    @Override
    public String[] getColumnNames() {
        return cursor.getColumnNames();
    }

    @Override
    public String getString(int column) {
        return cursor.getString(column);
    }

    @Override
    public short getShort(int column) {
        return cursor.getShort(column);
    }

    @Override
    public int getInt(int column) {
        return cursor.getInt(column);
    }

    @Override
    public long getLong(int column) {
        return cursor.getLong(column);
    }

    @Override
    public float getFloat(int column) {
        return cursor.getFloat(column);
    }

    @Override
    public double getDouble(int column) {
        return cursor.getDouble(column);
    }

    @Override
    public boolean isNull(int column) {
        return cursor.isNull(column);
    }

    /**
     * Call if you want to hide some position from the result
     * 
     * @param position in the AdapterView, not the cursor position
     */
    public void deleteItem(int position) {
        position = adjustPosition(position);
        int ix = Collections.binarySearch(positionsToIgnore, position);
        positionsToIgnore.add(-ix - 1, position);
    }
} 
```

# gradle - gradle parent pom 之类的功能

> ID：15468109
> 
> 赞同：46
> 
> 时间：2013-03-18T00:42:15.087
> 
> 标签：gradle

在我的工作中，我们使用 Maven。我将第一次尝试 gradle。我们为所有项目使用一个共同的父 pom，它具有常用 maven 插件的设置和一些常见的依赖项。gradle中是否有类似的选项？

我的第二个问题是关于发布管理的。我们使用 maven 发布插件，这对我们来说非常有用。Gradle中有类似的东西吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-18T08:23:32.743

要在同一构建的多个项目中共享内容，请使用`allprojects { ... }`,`subprojects { ... }`等。此外，在父项目中声明的额外属性 ( `ext.foo = ...`) 在子项目中是可见的。`ext.libs = [junit: "junit:junit:4.11", spring: "org.springframework:spring-core:3.1.0.RELEASE", ...]`一个常见的习惯用法是在顶层构建脚本中有类似的东西。然后子项目可以通过它们的短名称选择性地包含依赖项。您应该能够在[Gradle 论坛](http://forums.gradle.org)中找到更多相关信息。

要在构建之间共享逻辑，您可以编写脚本插件 ( ) `foo.gradle`，将其放在 Web 服务器上，并将其包含在构建中, 并将其包含在带有和部分的构建中。有关详细信息，请参阅[Gradle 用户指南](http://gradle.org/docs/current/userguide/userguide_single.html)和完整 Gradle 发行版中的许多示例。`apply from: "http://..."``org.gradle.api.Plugin``apply plugin: ...``buildscript {}`

脚本（但不是二进制）插件的当前限制是它们没有被缓存。因此，只有在可以连接到为插件提供服务的 Web 服务器时，构建才会成功。

至于你的第二个问题（这应该是一个单独的问题），有几个第三方发布插件可用，例如[https://github.com/townsfolk/gradle-release](https://github.com/townsfolk/gradle-release)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-11-04T22:23:31.107

io.spring.dependency [-management](https://spring.io/blog/2015/02/23/better-dependency-management-for-gradle)插件允许您使用 Maven bom 来控制构建的依赖项：

```
buildscript {
  repositories {
    mavenCentral()
  }
  dependencies {
    classpath "io.spring.gradle:dependency-management-plugin:0.5.3.RELEASE"
  }
}

apply plugin: "io.spring.dependency-management" 
```

接下来，您可以使用它来导入一个 Maven bom：

```
dependencyManagement {
  imports {
    mavenBom 'io.spring.platform:platform-bom:1.1.1.RELEASE'
  }
} 
```

现在，您可以在不指定版本号的情况下导入依赖项：

```
dependencies {
  compile 'org.springframework:spring-core'
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-28T06:41:15.773

我认为做 maven parent pom 之类的最好方法是使用 gradle "apply from"。
是这样的：</p>

```
allprojects { // or: subprojects { ... }
    apply from: "gradle/script/common.gradle"
} 
```

链接是相关路径或 URL。希望能帮助到你。

参考：
[从根目录导入一个Gradle脚本到子项目](https://stackoverflow.com/questions/12307434/import-a-gradle-script-from-the-root-into-subprojects)
[Super POM，Gradle中层次管理的Parent POM类型](https://stackoverflow.com/questions/20136373/super-pom-parent-pom-type-of-hierarchy-management-in-gradle/21139778#21139778)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-09T21:59:15.923

我也想要这种类型的功能，我在这里创建了一个插件来提供这个：[https ://github.com/boxheed/gradle-pater-build-plugin](https://github.com/boxheed/gradle-pater-build-plugin)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-30T11:38:52.343

您可以非常轻松地将 Parent pom 内容转换为 Gradle init 文件。Gradle 初始化脚本提供与 Maven 超级/父 pom 相同的功能。基本的区别是你可以调用init脚本

运行时 与它们一样多 这使我们可以灵活地
在运行时更改 init 脚本，但怀疑不跟踪更改。

您需要将存储库、分发管理、分析和其他检查（如 findbugs、checkstyle 等）放入 init 脚本。

细节很大，您可以在我这里找到完整的信息。 [http://www.scmtechblog.net/2015/12/how-to-migrate-parent-pom-from-maven-to.html](http://www.scmtechblog.net/2015/12/how-to-migrate-parent-pom-from-maven-to.html)

我已经解释了类似于 maven 发布插件的 gradle 发布插件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-03T13:20:46.840

如果您希望将父级缓存在本地并存储在 Maven 存储库中，目前这是不可能的。

我在这里添加了功能请求： [http ://forums.gradle.org/gradle/topics/support_for_gradle_parent_shared_between_projects_cached_locally](http://forums.gradle.org/gradle/topics/support_for_gradle_parent_shared_between_projects_cached_locally)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-18T13:49:12.800

[为了实现您的目标，您可以应用此处](http://www.gradle.org/docs/current/userguide/multi_project_builds.html)的 Gradel 用户指南中解释的“多项目构建”概念

基本上，您可以通过创建 gradle.build 文件和 gradle.settings 文件来创建定义一组通用配置的伞式项目。构建文件包含所有项目的公共属性、依赖项和插件，settings.gradle 定义了哪些子项目继承了这些配置。

此外，要了解 gradle 插件生态系统，您可以查看[此](http://wiki.gradle.org/display/GRADLE/Plugins)来源。

# php - 我可以通过 $_POST 发送特殊字符吗？

> ID：15468112
> 
> 赞同：0
> 
> 时间：2013-03-18T00:43:04.057
> 
> 标签：php, ajax, post, special-characters

也许这是一个基本问题，但我找不到任何能让我信服的东西。我正在使用 ajax 发送要由 php 页面保存的字段，似乎发布它们而不是乱用 url 编码是一个更简单的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T01:09:20.727

首先，如果你想在你的模型中操作数据，你应该总是使用**POST**而不是**GET**。**GET**方法哲学将用于数据检索。

考虑例如这个：[stackoverflow.com/questions/198462/](https://stackoverflow.com/questions/198462/is-either-get-or-post-more-secure-than-the-other)，或者甚至这个：[维基百科对 POST 的想法](http://en.wikipedia.org/wiki/POST_%28HTTP%29)

并回答您的问题：**是的，您可以**。如果您对字符编码有任何问题，请确保您在任何地方都使用相同的编码设置（网页编码、PHP [mb_internal_encoding](http://php.net/manual/en/function.mb-internal-encoding.php)、MySQL 编码等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T00:57:59.243

您可以使用处理特殊字符的编码 url。

参考[这个](http://www.w3schools.com/tags/ref_urlencode.asp)

# php - 回到填好的表格？

> ID：15468116
> 
> 赞同：0
> 
> 时间：2013-03-18T00:43:54.270
> 
> 标签：php

简而言之，有没有办法将用户的 POST 输入输出回他在上一页中使用的文本框中？

例子：

```
Page one
Text box: <value here>
Text box: <value here>
Text box: <value here> 
```

假设用户决定按下一步（这会将用户引导至第二页），但突然决定返回做一些小改动（第一页）。

我有一个奇怪的设计。由于我不知道如何保留我在第一页中使用的变量，所以我决定在按下下一步后立即将其输入数据库。但是如果我回到第 1 页，它将创建一个新的数据行。我有点困惑，如果您知道如何有效地做到这一点，请提出建议。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T00:49:49.940

现在可能是咬紧牙关重构的好时机。最好现在就完成它，然后再跳过障碍让它工作，这会导致代码在最好的情况下很麻烦，在最坏的情况下难以理解。

就像这里的其他人建议的那样，您可以将表单值保存在`$_SESSION`变量中。您最好的选择*可能*是重构表单，以便所有数据都保存在最后一页，但如果这不可行，那么在第 1 页之后，保存表单值和数据集的唯一 ID（例如主键值）到`$_SESSION`第 2 页的顶部。

如果用户随后按下后退按钮和`isset($_SESSION['myform']['id'])`，那么您可以使用保存的值重新填充表单元素。同样，如果在第 2 页的顶部`$_SESSION['myform']['id']`设置了，则无需插入新行，只需使用来自 的新表单数据更新现有行`$_REQUEST`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T00:47:07.120

将它们存储为 $_SESSION 变量。例如，设置 $_SESSION['input'] = 24。然后您可以在其他页面上调用该值，直到您结束会话。

[http://php.net/manual/en/reserved.variables.session.php](http://php.net/manual/en/reserved.variables.session.php)

# ruby-on-rails - 在 Rails 中访问环境变量

> ID：15468118
> 
> 赞同：1
> 
> 时间：2013-03-18T00:44:04.820
> 
> 标签：ruby-on-rails, environment-variables

我想为 Facebook API 设置环境变量，如下所示：

```
 export FACEBOOK_APP_ID=1234
   export FACEBOOK_APP_SECRET=6e81 
```

当 I 时`printenv`，我可以看到这两个变量。

但是，当我在 Rails 应用程序中调用它时，如下所示：

```
provider :facebook, ENV['FACEBOOK_APP_ID'],  ENV['FACEBOOK_APP_SECRET'] 
```

我遇到了 Facebook 的问题，说：

```
 "error": {
      "message": "Missing client_id parameter.",
      "type": "OAuthException",
      "code": 101
   } 
```

这意味着不知何故，ENV 无法访问我的环境变量。我也尝试：

```
provider :facebook, 'FACEBOOK_APP_ID',  'FACEBOOK_APP_SECRET' 
```

但这对我也不起作用。如果我替换`ENV['FACEBOOK_APP_ID']`为`'1234'`，则没有问题。

ENV[] 可能出了什么问题？我该如何解决问题？

# c++ - 从 std::list 中擦除 使用指向值的原始指针？

> ID：15468119
> 
> 赞同：0
> 
> 时间：2013-03-18T00:44:10.173
> 
> 标签：c++, list, stl

我有一个`std::list<Value>`属于管理构造的，`Value *`每当调用工厂方法时都会分发指针。`Value`当需要销毁这些指针时，这些指针会传回给管理器。但是，我不确定如何最好地使用这些指针来查找和擦除/删除元素。

```
class ValueManager{
public:

    Value * createValue(ValueDef & def) {
        m_valueList.push_back( Value( def ) );
        return &m_valueList.back();
    }

    void destroyValue(Value * target) {

        // Mystery!  
        // How does one remove/erase a list element
        // with only a pointer to it's value?

    }

private:

    std::list<Value> m_valueList;

}; 
```

两者似乎都不适合该任务`::erase`，`::remove`一个采用迭代器而不是指针，而后者采用整个值，这是无法完成的，因为在这种情况下，没有可接受的 == 之间`Values`的比较方法，只有指针可以可靠地用于查找目标。

我的问题是，最有效的实施方式是什么`destroyValue()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T00:46:41.933

很简单：停止返回原始指针，并开始返回迭代器。然后想要销毁一个的用户将在它创建时收到的值传递，就像现在一样。并且取消引用仍然可以像使用原始指针一样工作。但是擦除也将起作用，并且是有效的。

# python - 如何从列表中获得更快的碰撞？

> ID：15468121
> 
> 赞同：0
> 
> 时间：2013-03-18T00:44:22.617
> 
> 标签：python, python-2.7, pygame

嗨，我对 python 相当陌生（现在已经使用了几个月），我想知道如何从列表中获得更快的碰撞。我有一个地图，它是一个带有对象的简单 2D 数组，并且有一个相机 Rectangle 来检查是否有任何 Rect 对象发生碰撞，我试图对玩家的移动做同样的事情，但即使在一个小的 120 by 90 地图，那么我如何仅使用 CPU 来加快速度。

```
for x in range(gridLength):
    for y in range(gridHeight):
        if cameraRect.colliderect(grid[x][y].Rect):
            grid[x][y].draw(screen,((x * 16 + (WINDOWWIDTH / 2 - 16)) - playerRect.left),((y * 16) - playerRect.top + (WINDOWHEIGHT / 2 - 16))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T00:54:49.980

使用空间索引，例如四叉树。这使您可以有效地查询哪些对象与给定的 AABB（轴对齐边界框）发生碰撞，然后如果对象不等于它们的 AABB（例如，如果它们是圆形），那么您可以在之后进行更复杂的测试。

以下是 PyGame Wiki 的示例实现：http://www.pygame.org/wiki/QuadTree [（](http://www.pygame.org/wiki/QuadTree)您必须撤消示例代码中引用的 HTML 实体）

或者，您可以加入其他人编写的物理引擎。你知道，编写一个物理引擎是一项巨大的工作。即使是简单的 2D 游戏，您也可能会感到惊讶。

如果您将切片用于级别数据，您也可以将切片存储在 2D 数组中，并检查给定矩形中的非零切片。就像是：

```
def hit_test(x, y, xsize, ysize):
    xmin = (x - xsize//2) // tile_size
    xmax = (x + xsize//2) // tile_size
    ymin = (y - ysize//2) // tile_size
    ymax = (y + ysize//2) // tile_size
    for xtile in range(xmin, xmax):
        for ytile in range(xmin, xmax):
            if tiles[xtile][ytile] != 0:
                COLLISION 
```

# generics - 如何用汇编语言表示泛型类型

> ID：15468122
> 
> 赞同：2
> 
> 时间：2013-03-18T00:44:26.533
> 
> 标签：generics, assembly, linked-list, mips

我想在汇编程序中实现一个通用链表。我的问题是，我如何表示类型 T 的元素？像指针？TAD 名单如下：

```
Record Node
    element: T
    next   : Node
end

Record Head
    first : Node
    size  : Int
end 
```

我想知道如何执行此操作主要是为记录节点保留内存。

我正在用 MIPS 编程。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:55:07.950

在汇编器中，变量和字段没有类型，只有*大小*。对于平面 32 位内存模型的最常见情况，指针大小为**4 个字节**，与大多数整数相同。因此，您只需要将它们视为恰好包含地址的整数，而不仅仅是任意数字。

# linux - 通过 Unix shell 脚本查找和删除重复的字符串。如何？

> ID：15468124
> 
> 赞同：1
> 
> 时间：2013-03-18T00:44:55.800
> 
> 标签：linux, shell, unix

我是一个 Unix shell 脚本新手。我知道几种不同的查找重复项的方法。但是找不到一种在保持原始顺序的同时删除重复项的简单方法（因为使用 sort -u 会丢失原始顺序）。

示例：脚本调用`dedupe.sh`

样品运行：

`dedupe.sh`

```
cat dog cat bird fish bear dog 
```

结果是：`cat dog bird fish bear`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T01:06:16.800

使用[awk](/questions/tagged/awk "显示标记为“awk”的问题")：

```
$ printf '%s\n' cat dog cat bird fish bear dog | awk '!arr[$1]++'
cat
dog
bird
fish
bear 
```

或者

```
$ echo 'cat dog cat bird fish bear dog' | awk '!arr[$1]++' RS=" " 
```

或者

```
$ printf '%s\n' cat dog cat bird fish bear dog | sort -u 
```

如果它在[shell](/questions/tagged/shell "显示标记为“外壳”的问题")中工作，它将在脚本中工作 =)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T00:59:04.107

你说的是Perl吗？

```
perl -e 'while($_=shift@ARGV){$seen{$_}++||print}print"\n" ' \
cat dog cat bird fish bear dog 
```

等效地，`dedupe.pl`包含：

```
#!/usr/bin/perl
while ($w = shift @ARGV) {
    $seen{$w}++ || print "$w";
}
print "\n"; 
```

现在`chmod u+x dedupe.pl`和：

```
./dedupe.pl cat dog cat bird fish bear dog 
```

无论哪种方式，输出都是所需的。

```
cat dog bird fish bear 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T01:30:13.960

啊 perl... 只写语言。:)

只要您调用另一种脚本语言，不妨考虑一些可读的东西。:)

```
#!/usr/bin/env ruby

puts ARGV.uniq.join(' ') 
```

意思是：

```
puts = "print whatever comes next"
ARGV = "input argument array"
uniq = "array method to perform the behavior you're looking for and remove duplicates"
join(' ') = "join with spaces instead of default of newline. Not necessarily needed if you're piping to something else" 
```

# c++ - SFML Sprite 调整大小错误

> ID：15468126
> 
> 赞同：0
> 
> 时间：2013-03-18T00:45:02.603
> 
> 标签：c++, windows, image, resize, sfml

每当我尝试使用 sfml 1.6 Sprite.Resize(x,y) 函数调整精灵的大小时，它只会复制最右边和最底部的任何内容，以使其达到该大小。有没有办法让它实际缩放图像？我有一个 30 x 30 的图像，我想将其重新缩放为 90 x 90，但这就是发生的[情况](http://imgur.com/gallery/kQgXh/new)（第一张图片是它给我的 90 x 90，第二张是我给它的 30 x 30）。

另外，我刚刚在这段代码中发现：

```
 void changeI(sf::Image I,int x,int y){
        std::cout<<"h"<<std::endl;
        CI = I; // CI is another sf::Image object declared earlier in my code
        CS.SetImage(CI);
} 
```

如果我将其更改为：

```
 void changeI(sf::Image I,int x,int y){
            std::cout<<"h"<<std::endl;
            CI = I;
            CS.SetImage(I); //changed CI to I here 
```

它没有显示任何内容，而是显示侧面带有奇怪缓冲区的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:00:32.103

我找到了一个解决方案，这是一个相当烦人的错误，当您第一次将精灵设置为图像时，请确保使用您想要的最小的，然后将其调整为您想要的任何大小。然后，您可以使用任何您想要的图像。我想这只是 SFML 的疏忽，希望他们能在 SFML 2.0 中修复它

# javascript - jQuery 删除 textarea 中的电子邮件

> ID：15468133
> 
> 赞同：1
> 
> 时间：2013-03-18T00:46:20.887
> 
> 标签：javascript, jquery, regex

我有 HTML 文本区域。

```
<textarea> ... </textarea> 
```

我不希望用户在 textarea 中输入任何电子邮件地址。使用 jQuery 的最佳方法是什么？如何删除提交表单前输入的电子邮件？

我只需要提示和参考。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T01:08:40.017

## [***jsFiddle 演示***](http://jsfiddle.net/t9cLT/)

使用正则表达式匹配电子邮件地址，然后用空白字符串替换它们。

```
$(function() {
    $("textarea").change(function() {
        $(this).val( function(idx, val) {
            return val.replace(/\b(\w)+\@(\w)+\.(\w)+\b/g, "");
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T01:29:53.103

尽管确实存在问题，但在这里使用 JavaScript 不会给您预期的结果。问题是您想在提交表单之前自动删除电子邮件地址。这不是一种用户友好的方法。

您必须提醒用户他不能在框中输入电子邮件地址并要求他更正错误。

删除电子邮件地址部分**在服务器级别**上更安全。比如来自 PHP、ASP、JSP 等。

像这样提醒电子邮件地址的用户。

```
$("textarea").change(function() {
    if(/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test($(this).val())) {
         alert("Entering Email ID's are not allowed.");
    }
}); 
```

然后删除您的服务器应用程序的电子邮件。

# java - 从文件读取时没有此类元素异常

> ID：15468139
> 
> 赞同：-1
> 
> 时间：2013-03-18T00:46:47.957
> 
> 标签：java

我知道这是一个常见问题，但是，即使在进行研究之后，我也不确定为什么会出现错误。

```
import java.io.*;
import java.util.*;

public class readfile {

    private Scanner x;

    public void openFile(){
        try{
            x = new Scanner(new File("input.txt"));
        }
        catch(Exception e){
            System.out.println("Oh noes, the file has not been founddd!");
        }
    }

    public void readFile(){
        int n = 0;
        n = Integer.parseInt(x.next()); //n is the integer on the first line that creates boundaries n x n in an array.

        System.out.println("Your array is size ["+ n + "] by [" + n +"]");

        //Create n by n array.
        int[][] array = new int[n][n];

        //While there is an element, assign array[i][j] = the next element.
        while(x.hasNext()){
             for(int i = 0; i < n; i++){
                 for(int j = 0; j < n; j++){
                     array[i][j] = Integer.parseInt(x.next());
                     System.out.printf("%d", array[i][j]);
                 }
                System.out.println();
             }
        }
    }

    public void closeFile(){
        x.close();
    }
} 
```

我正在阅读一个包含邻接矩阵的文本文件，其中第一行表示矩阵的大小。即）第 1 行读取 5。因此我创建了一个 5x5 的二​​维数组。我遇到的问题是在我阅读并打印文件后，我得到一个 NoSuchElement 异常。提前谢谢！

注意：我很好奇，我已经看到我需要在循环中使用 x.hasNext() ，所以我不假设没有输入时有输入。然而，我已经做到了。不确定是什么问题。

输出：

```
Your array is size [7] by [7] 
0110011 
1000000 
1001000 
0010001 
0000001 
1000001 
Exception in thread "main" java.util.NoSuchElementException 
  at java.util.Scanner.throwFor(Unknown Source) 
  at java.util.Scanner.next(Unknown Source) 
  at readfile.readFile(readfile.java:32) 
  at verticies.main(verticies.java:8) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T00:56:08.217

看起来您的代码正在将整行读取为 int，这些数字中的每一个是：

```
0110011 1000000 1001000 0010001 0000001 1000001 
```

意味着形成每行的 7 位数字？

如果是这种情况，您需要将每个值拆分为其相应子数组的组成部分。

在这种情况下，请改用这段代码：

```
 while(x.hasNext()){
         for(int i = 0; i < n; i++){
             String line = x.next();
             for(int j = 0; j < n; j++){
                 array[i][j] = line.charAt(j) - '0';
                 System.out.printf("%d", array[i][j]);
             }
            System.out.println();
         }
    } 
```

# c - 使用 calloc() 代替 malloc() 和 memset() 有什么好处吗？

> ID：15468146
> 
> 赞同：9
> 
> 时间：2013-03-18T00:47:36.517
> 
> 标签：c, memory-management, malloc, dynamic-memory-allocation, calloc

我想知道是否`calloc()`比 a`malloc`后跟 a更可取`memset`。后者似乎是分配和初始化内存的最常见方式。

[github 代码搜索](https://github.com/search?q=calloc&type=Code)出现了许多`calloc`测试和实现，但在前几页中没有代码实际使用`calloc`.

有谁知道使用或推荐使用的任何项目/组织以及推荐使用`calloc`的情况？

从下面的评论和答案中，以下是迄今为止出现的一些想法：

*   `calloc(n, size)`可以防止可能的溢出`malloc(n * size)`

*   结合*malloc*和*memset*使*calloc*有机会请求已知已清零的页面。

*   *calloc*的一个缺点是组合步骤可能会排除*malloc*周围的其他包装器。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-18T00:53:40.657

好吧，我`calloc`在相当多的 C 代码中使用，所以我想这是一个答案。我认为稍微不寻常的调用方法（元素的数量和元素的大小）可能会让人失望。但是，您可能没有看到预期的那么多调用的另一个原因是，许多较大的项目使用包装器`malloc`，`calloc`以及在内存分配失败时执行错误处理（通常终止程序）的朋友。所以实际的代码`xcalloc`改为使用。

使用`calloc`over `malloc`plus的一个原因`memset`是它`calloc`可能更有效。如果 C 库已经知道一个页面被归零（也许它刚刚从操作系统获得了新的归零内存），它不必显式地将它归零。

# javascript - chrome中未定义“警报”

> ID：15468147
> 
> 赞同：1
> 
> 时间：2013-03-18T00:47:38.137
> 
> 标签：javascript, google-chrome, xhtml, alert

我正在尝试在需要的 php 表单中创建一个字段。我正在使用 Dreamweaver Cs3。

Dreamweaver 生成了以下函数

```
 <script type="text/javascript">
<!--
function MM_validateForm() { //v4.0
    if (document.getElementById) {
        var i, p, q, nm, test, num, min, max, errors = '',
            args = MM_validateForm.arguments;
        for (i = 0; i < (args.length - 2); i += 3) {
            test = args[i + 2];
            val = document.getElementById(args[i]);
            if (val) {
                nm = val.name;
                if ((val = val.value) != "") {
                    if (test.indexOf('isEmail') != -1) {
                        p = val.indexOf('@');
                        if (p < 1 || p == (val.length - 1)) errors += '- ' + nm + ' must contain an e-mail address.\n';
                    } else if (test != 'R') {
                        num = parseFloat(val);
                        if (isNaN(val)) errors += '- ' + nm + ' must contain a number.\n';
                        if (test.indexOf('inRange') != -1) {
                            p = test.indexOf(':');
                            min = test.substring(8, p);
                            max = test.substring(p + 1);
                            if (num < min || max < num) errors += '- ' + nm + ' must contain a number between ' + min + ' and ' + max + '.\n';
                        }
                    }
                } else if (test.charAt(0) == 'R') errors += '- ' + nm + ' is required.\n';
            }
        }
        if (errors) alert('The following error(s) occurred:\n' + errors);

        document.MM_returnValue = (errors == '');
    }
}
//-->
  </script> 
```

并在

```
<form action="registered.php" method="post" name="frmRegister" onsubmit="MM_validateForm('addr1','','R');return document.MM_returnValue" > 
```

当我在 chrome 浏览器上运行它时，我收到一条错误消息，提示警报未定义。

我尝试检查其他答案，但无法使代码正常工作。有人可以帮忙吗？

其他答案：

[从 Chrome 上的 Greasemonkey 脚本将 JS 函数注入页面](https://stackoverflow.com/questions/2303147/injecting-js-functions-into-the-page-from-a-greasemonkey-script-on-chrome)

[jquery alert 说未定义](https://stackoverflow.com/questions/15167838/jquery-alert-says-undefined)

# android - getActionBar() = null 用于自定义语言

> ID：15468151
> 
> 赞同：0
> 
> 时间：2013-03-18T00:48:06.550
> 
> 标签：android, tabs, android-3.0-honeycomb

我遇到了一个奇怪的问题。我正在开发一个应用程序 targetAPI = 11。我正在使用 theActionbar.TabListener 来实现两个选项卡，一切都很好。但是，我现在为德语字符串创建了一个新的“values-de”文件夹以用于德语设备。现在，当我将设备设置为德语并想要启动应用程序时，它会立即崩溃，其中包含一个空指针：

```
 final ActionBar actionBar = getActionBar();
  actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS); 
```

为什么它只发生在设备设置为德语的情况下（我认为它与我的 values-de 有关，我只是复制了整个“values”文件夹，将副本重命名为“values-de”）

如果没有大量的设计变通办法，我该如何解决这个问题？它非常适合英语，但我想添加多语言支持。

谢谢。

编辑 1 - Stacktrace：（抱歉忘记了）

```
03-18 01:56:02.575: E/AndroidRuntime(23037): FATAL EXCEPTION: main
03-18 01:56:02.575: E/AndroidRuntime(23037): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.motioncoding.mobilesms/com.motioncoding.mobilesms.core.LaunchActivity}: java.lang.NullPointerException
03-18 01:56:02.575: E/AndroidRuntime(23037):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-18 01:56:02.575: E/AndroidRuntime(23037):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-18 01:56:02.575: E/AndroidRuntime(23037):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-18 01:56:02.575: E/AndroidRuntime(23037):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-18 01:56:02.575: E/AndroidRuntime(23037):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-18 01:56:02.575: E/AndroidRuntime(23037):    at android.os.Looper.loop(Looper.java:137)
03-18 01:56:02.575: E/AndroidRuntime(23037):    at android.app.ActivityThread.main(ActivityThread.java:5041)
03-18 01:56:02.575: E/AndroidRuntime(23037):    at java.lang.reflect.Method.invokeNative(Native Method)
03-18 01:56:02.575: E/AndroidRuntime(23037):    at java.lang.reflect.Method.invoke(Method.java:511)
03-18 01:56:02.575: E/AndroidRuntime(23037):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-18 01:56:02.575: E/AndroidRuntime(23037):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-18 01:56:02.575: E/AndroidRuntime(23037):    at dalvik.system.NativeStart.main(Native Method)
03-18 01:56:02.575: E/AndroidRuntime(23037): Caused by: java.lang.NullPointerException
03-18 01:56:02.575: E/AndroidRuntime(23037):    at com.motioncoding.mobilesms.core.LaunchActivity.onCreate(LaunchActivity.java:43)
03-18 01:56:02.575: E/AndroidRuntime(23037):    at android.app.Activity.performCreate(Activity.java:5104)
03-18 01:56:02.575: E/AndroidRuntime(23037):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-18 01:56:02.575: E/AndroidRuntime(23037):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-18 01:56:02.575: E/AndroidRuntime(23037):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:11:21.220

复制`styles.xml`from `values`to的问题`values-<lang>`是它是不允许的，并且会混淆 Android，因为它是重复的。然而，允许的资源`values-<lang>`是`strings.xml`并且`arrays.xml`因为这些资源是唯一需要翻译的资源。

但是，当它们针对 API 的特定版本时，可以在文件夹中包含`styles.xml`,`dimens.xml`和。所以他们必须在 ie 中。`colors.xml``values-<lang>``values-de-v11`

# function - x86 简单功能不起作用

> ID：15468152
> 
> 赞同：1
> 
> 时间：2013-03-18T00:48:13.300
> 
> 标签：function, assembly, x86

大家好，我正在尝试构建以下功能

```
function int Main(){
 return 5;
} 
```

这是我的汇编代码：

```
 .globl Main
Main:
pushl %ebp
movl %esp, %ebp
subl $0, %esp
pushl $5
movl %ebp, %esp
popl %ebp
ret 
```

然而这总是返回 1 它从不返回 5 为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T00:52:39.547

怎么样：

```
Main:
push byte 5
pop eax
ret 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:48:34.747

总结大家所说的：您的主要错误是返回值应该进入 EAX 而它没有。Prolog 和 Epilog 代码对于像这样的简单函数不是必需的，但它们也不会受到伤害（只要它们不会使堆栈不平衡）。所以组装应该去：

```
(prolog)
movl $5, %eax,
(epilog)
ret 
```

prolog 和 epilog 是编译器默认生成的。

# jquery - Rails、HAML 和 JQuery

> ID：15468156
> 
> 赞同：1
> 
> 时间：2013-03-18T00:49:03.273
> 
> 标签：jquery, ruby-on-rails, haml

刚开始在前端使用 Bootstrap 和 JQuery 的 Rails/HAML 服务器上工作。所有页面都是在服务器端（HAML）生成的，然后我们在这里和那里使用 JQuery，以便在用户执行操作时给人一种 Web 2.0 的感觉。

在我们进行 AJAX 调用以从服务器获取数据后，我们在一些地方使用 javascript 生成了一些复杂的 html。IE 在我们有一个表的情况下，用户可以对表的行执行操作。一个这样的动作是从表中删除一行并拉入另一行。在拉入另一行的情况下，我们从服务器获取 JSON 数据，在 AJAX 成功时，我们使用 JSON 数据生成新行 (HTML) 并将其动画到表中。

我的问题是表行相当复杂，并且在两个地方生成，服务器（HAML）和javascript。这意味着每次我想稍微改变一下表格（添加一个 css 类或改变一行的外观）我需要在两个地方更改代码，服务器和客户端。

这是一个遗留系统，我坚持使用现有的框架（也许能够说服人们加入另一个）。我能做些什么来解决这个问题？

认为最好的方法是让服务器始终生成 HTML。当我需要添加新行时，IE 不返回 JSON 数据，而是返回新行的 HTML。这样我就可以使用相同的 HAML 文件服务器端来生成初始行和任何新行。

这对我来说都很新，这是最好/唯一的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:39:42.000

我发现的最好方法是在服务器端生成 haml partials 并返回。

```
haml :some_partial, :layout => false 
```

然后在jquery成功：

```
function(data) {
  html = $(data);
  ...
} 
```

# python - 简单问题 - 单选按钮渲染

> ID：15468160
> 
> 赞同：0
> 
> 时间：2013-03-18T00:49:15.800
> 
> 标签：python, html, django, radio-button

我在这个问题上停留了一段时间。

我在数据库中有一个位置，可以由用户使用星级评分。然后我会将该汇率保存到数据库中。例如 1 或 2 到 5，因为它是 5 星级系统。好吧，这很好。

但现在我无法再次将该数字呈现给星星，我想显示 DB 中的所有位置以及它们自己的评级星星。`object.rated = 5`

我对views.py的看法：

```
all_locations_from_db = Location.objects.all()
return render_to_response('resultpage.html',{'all':all_locations_from_db},context_instance=RequestContext(request)) 
```

这将是我的html：

```
{% if all %}
{% for every in all %}
    {{ how can i render that number back to 5-star form again?? }}
{% endfor %}
{% endif %} 
```

这是我现在的问题。有人可以帮帮我吗？我还没有做任何事情，因为我不知道该怎么做..

多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T01:02:51.410

如果我理解正确，您正在寻找如何创建基于单选按钮的评级以及如何检查正确的评级。

如果是这样的话：

```
{% if all %}
{% for every in all %}
    {% for i in "12345" %}
        {% if forloop.counter == every.rated %}
           <input type="radio" name="rate{{forloop.counter}}" value="{{forloop.counter}}" checked>{{forloop.counter}}
        {% else %}
           <input type="radio" name="rate{{forloop.counter}}" value="{{forloop.counter}}">{{forloop.counter}}
        {% endif %}
    {% endfor %}
{% endfor %}
{% endif %} 
```

[Django模板中](https://stackoverflow.com/questions/1107737/numeric-for-loop-in-django-templates)基于数字for循环的循环方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T00:54:58.887

您需要从数据库中获取评级以及位置。然后在 for 循环中迭代此列表并显示页面中每个项目的评分。

# html - 具有数据属性的动态表

> ID：15468161
> 
> 赞同：1
> 
> 时间：2013-03-18T00:49:22.030
> 
> 标签：html, ruby-on-rails, html-table, haml, custom-data-attribute

我有一个动态创建的表，其中行号和列号存储为每个单元格中的数据属性：

```
%table
  - (1..3).each do |row|
    %tr
      - (1..3).each do |column|
        %td.cell{:data => {:x => column, :y => row}} 
```

这生成的 HTML 很好，除了当列等于行时，`data-y`缺少：

```
<table>
  <tr>
    <td data-x='1'></td>
    <td data-x='2' data-y='1'></td>
    <td data-x='3' data-y='1'></td>
  </tr>
  <tr>
    <td data-x='1' data-y='2'></td>
    <td data-x='2'></td>
    <td data-x='3' data-y='2'></td>
  </tr>
  <tr>
    <td data-x='1' data-y='3'></td>
    <td data-x='2' data-y='3'></td>
    <td data-x='3'></td>
  </tr>
</table> 
```

有谁知道这是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T01:40:13.897

这是[Haml 版本 4.0.0 中的一个错误](https://github.com/haml/haml/pull/641)。它已在[4.0.1.rc.1](https://rubygems.org/gems/haml/versions/4.0.1.rc.1)中修复——在撰写本文时该修复尚未成为完整版本，但您应该对 rc1 gem 没问题。

# java - 将 Json 树反序列化为 Java 中的对象以获取 android 应用程序的结构

> ID：15468168
> 
> 赞同：0
> 
> 时间：2013-03-18T00:50:14.260
> 
> 标签：java, android, structure, deserialization, gson

我正在编写一个 android 列表详细信息应用程序，我必须从 json 加载应用程序结构。我正在尝试使用 Gson (Java) 将非最佳 json 反序列化为对象，然后我将动态生成片段（我希望可以做到:-)）。

我在主 FragmentActivity 中有标签，一个标签有自己的片段和自己的 json。每个选项卡都有自己的片段堆栈，用于通过后退和向上按钮进行控制。

我有这个json：

```
{
    "data": [],
    "children": [
        {
            "data": {
                "id": "5",
                "deep": "0",
                "url": "compare",
                "type": "navigation",
                "name": "Vergleich",
                "text": null,
                "number": null
            },
            "children": [
                {
                    "data": {
                        "id": "12",
                        "deep": "1",
                        "url": "information",
                        "type": "navigation",
                        "name": "information",
                        "text": null,
                        "number": null
                    },
                    "children": []
                },
                {
                    "data": {
                        "id": "13",
                        "deep": "1",
                        "url": "application",
                        "type": "navigation",
                        "name": "application",
                        "text": null,
                        "number": null
                    },
                    "children": []
                }
            ]
        }
    ]
} 
```

我为 gson 创建了这个类：

```
public class StructureItem {
    StructureData data;
    ArrayList<StructureItem> children;
} 
```

```
public class StructureData {
    public int id;
    public int deep;
    public String url;
    public String type;
    public String name;
    public String text;
    public String number;
} 
```

我尝试使用以下方法创建对象：

```
String s = LoadJson();
Gson gson = gsonBuilder.create();
StructureItem root = gson.fromJson(s, StructureItem.class); 
```

但不能成功。

你会如何解决我的问题？有什么简单的解决办法吗？

对此有一些注释会很棒。我编程了几年，但这是我的第一个 android 项目。相当可怕的框架！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:27:19.690

尝试在类 StructureItem 中将**ArrayList<StructureItem>**替换为**StructureItem[]**。

# javascript - 一种在我的 MVC 框架中重用 JavaScript 代码的方法

> ID：15468171
> 
> 赞同：3
> 
> 时间：2013-03-18T00:50:39.653
> 
> 标签：javascript, jquery, cakephp, code-reuse

我正在用**CakePHP**开发一个 web 社区，并开始怀疑使用**jQuery**在需要时围绕视图提供有用的小部件。

例如，我编写了一个**jQuery 插件**，它在特定输入文本中搜索数据，询问我的数据库并使用事件处理结果。

基本上，该插件非常适合简单的应用程序，但对于我几乎在所有视图中使用它并且每次都使用不同的事件和方法处理它的社区来说它基本上是无用的，这使得它具有巨大的事件声明并且非常烦人调试。

这只是我需要在社区内使用的许多插件中的第一个，因为我希望在站点中围绕用户操作有很多小部件，而无需刷新页面以进行小的更改。

经过一番搜索后，我想通过在我的 Web 应用程序中实现一个基于**JavaScript MVC**的框架来解决我的问题。

阅读[本文](http://codebrief.com/2012/01/the-top-10-javascript-mvc-frameworks-reviewed/)后，我认为**Ember.js**将是一个不错的解决方案，但它似乎是一个**完整的 JavaScript 应用程序**，应该完全在整个网站上使用，而不是为支持我的**CakePHP**应用程序（也是一个 MVC 框架）而构建的**JavaScript 库**

 **是否存在一些对构建可重用小部件有用的特定框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:53:31.533

如果我必须做类似的事情，我会实现 JS lib 以在布局级别（而不是特定视图）使用。我会选择 2 个案例 - 一个具有最简单的场景，一个具有更复杂的用例。然后注意有哪些相同点和不同点。这至少会给我一个决策基准，如果它值得进一步追求，并且会暴露它必须复杂的程度。**

# jquery - jQuery 图像不会 .explode

> ID：15468175
> 
> 赞同：0
> 
> 时间：2013-03-18T00:50:57.547
> 
> 标签：jquery, image, jquery-animate

我正在向我的网站添加一些非常基本的 jQuery。我想在单击时爆炸一些气球的图像。我尝试按照另一个问题的答案中的建议为该部分添加高度，但它仍然不起作用......

我尝试过的其他效果，比如fadeOut，效果很好......

请帮忙！

脚本.js：

```
//fadeIn blue flower  
$(document).ready(function(){  
$('#blue_flower').hide().fadeIn('slow');  
});

//fadeOut clover  
    $(document).ready(function(){  
        $('#four_leaf_clover').click(function(){  
        $(this).fadeOut('slow');  
    });  
});  

//explode baloons  
$(document).ready(function(){  
    $('#balloons').click(function(){  
        $(this).hide("explode", {pieces:16}, 5000);  
    });  
}); 
```

索引.html：

```
<!DOCTYPE html>
<html lang="en">
<head>
<title>Website Design and Development by Melanie Martin</title>
<meta charset="utf-8" />
<meta name="author" content="Melanie Martin" />
<meta name="description" content="Content based website design and development services." />
<meta name="keywords" content="webstie design, web design, web development, kansas city, Melanie Martin" />
<script src="jquery-1.9.1.min.js"></script>
<script src="script.js"></script>
<link rel="stylesheet" href="baseline.css" type="text/css" />
<link rel="stylesheet" href="template.css" type="text/css" />

<!--lets older browsers see the cool new html5 tags-->
<!--[if lt IE 9]>  
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>  
<![endif]--> 

</head>

<body>

<section id="CorkBoard" class="leftsection">
<section class="oi">
        <section id="Melanie_photo">
            <a href="about.html"><img class="melanie_photo" src="images/melanie.png" alt="Melanie Martin" /></a>
        </section>
        <section id="blue_flower">
            <img id="blue_flower" src="images/blue_flower.png" alt="Click the flower!" />
        </section>
        <section id="business_card">
            <a href="contact.html"><img class="business_card" src="images/business_card.png" alt="Contact Melanie Martin" /></a>
        </section>  
        <section id="four_leaf_clover">
            <img id="four_leaf_clover" src="images/four_leaf_clover.png" alt="Click the clover!" />
        </section>      
        <section id="balloons">
            <img id="balloons" src="images/baloons.png" alt="Click the balloons!" />
        </section>      
        <!--<section id="html5_badge">
            <a href="http://www.w3.org/html/logo/"><img src="http://www.w3.org/html/logo/badge/html5-badge-h-solo.png" width="63" height="64" alt="HTML5 Powered" title="HTML5 Powered"></a></a>
        </section>-->   
        <!--<section id="weather_widget">
        </section>  
        <ul>
            <li>Weather gadget</li>
            <li>Lock with "code" as the combo (will link to code samples)</li>
            <li>Blue ribbon with W3C Validated on it (with W3C link)</li>
            <li>Stationary "Special Deals" link / emblem</li>
            <li>Contact Me Button</li>
            <li>Drawing of Lilo</li>
            <li>
        </ul>-->
</section>
</section>

<section id="DryEraseArea" class="rightsection">
<section class="oi">
    <nav id="PostIt">
    <nav class="oi">
<section id="pink_post-it" class="post-it"><a href="index.html"><img src="images/pink-up.png" alt="Home Page" ></a></section>
<section id="blue_post-it" class="post-it"><a href="projects.html"><img src="images/blue-down.png" alt="Projects Page"></a></section>
<section id="green_post-it" class="post-it"><a href="about.html"><img src="images/green-down.png" alt="About Melanie Martin"></a></section>
<section id="purple_post-it" class="post-it"><a href="contact.html"><img src="images/purple-down.png" alt="Contact Melanie Martin"></a></section>
    </nav>
    </nav>
    <section id="DryErase" class="rightsection">
    <section class="oi">
<h1>Woohoo!  You made it here!</h1>
<p>Hooray!  You found the site where Melanie shows off all her cool projects and recent freelance work!  Take a look around the site<!--, read some articles,--> and let us know what you think.</p>

<h2>Melanie Offers Freelance Services in a Variety of Areas</h2>
<h3>Website Design</h3>
<p>Melanie specializes in content centered design.  Nothing is more important than the message you want to convey to your visitors.  That's why she starts with your articles and images and builds a custom website around them.  The site is just the pretty packaging that shows off all your cool stuff.</p>
<h3>Social Media Integration</h3>
<p>Add social media like Facebook, Twitter, LinkedIn, Stumble, Reddit and others to your site to increase traffic and make the most of your advertising budget.  Social media also gets your visitors involved and benefits your search engine ranking.</p>
<h3>Website Redesign</h3>
<p>An outdated site can put visitors off and give your company a poor image.  Melanie recommends taking a fresh look at your current site at least once every three years.  Sometimes an entire redesign is needed but often just a little "face lift" can get you the results you need.</p>
<h3>Website Maintenance & Monitoring</h3>
<p>Melanie offers solutions for all your web needs. When you don't have the time or desire to update content, deal with host issues like setting up users and email addresses, and monitor your sites traffic, she can customize a plan to take care of it for you. There's no need to worry because she can cover it all. </p>
<h3>Free Consultations</h3>
<p>Consultations are always free.  Whether it's a large or small project doesn't matter just give us a shout and we'll give you free advice, recommendations, or estimates.</p>

    </section>
    </section>
</section>
</section>
<footer class="oi">
<section>
<!--<p>Copyright bagdge goes here.</p>-->
</section>
</footer>

</body>
</html> 
```

模板.css：

```
/*Cork Background*/
html {
background:tan;
background-image:url(images/corkboard.jpg);
min-width:1100px; 
max-width:1400px;
padding:none;
margin:none;
border:none;
}

@font-face {
font-family: popstarAutograph;
src: url(popstarAutograph.otf);
}

h2 {
font-family:popstarAutograph;
font-weight:bold;
}
#DryErase .oi { 
font-family:popstarAutograph;
font-weight:bold;
color:navy;
font-size:2em;
line-height:1.125;
}

/*Cork Board Area*/
#CorkBoard { 
float:left; 
width:33%;
min-width:325px;
}
#CorkBoard .oi { 
min-height:+VALUE;
margin:+VALUE; 
padding:+VALUE; 
background:VALUE; 
border:VALUE;
}
#CorkBoard img {
margin:20px;
}
#business_card {
float:right;
}
#html5_badge {
margin:100px 0 0 0;
}
#blue_flower {
height:130px;
width:100px;
float:right;
}
#four_leaf_clover {
height:30px;
width:25px;
float:left;
}
section #balloons{
height:500px;
width:350px;
border:5px solid;/*added for debugging*/
}
#balloons img{
height:200px;
width:175px;
float:right;
border:5px solid;/*added for debugging*/
}

/*Post-it and Dry Erase Board*/
#DryEraseArea { 
float:right; 
width:66%;
min-width:720px; 
}
#DryEraseArea .oi { 
min-height:+VALUE;
margin:+VALUE; 
padding:+VALUE; 
background:VALUE; 
}
/*Dry Erase Post-it Menu*/
#PostIt { 
float:VALUE; 
min-width:720px;
height:140px;
max-height:140px;
}
#PostIt .oi { 
min-height:+VALUE;
margin:+VALUE; 
padding:+VALUE; 
background:plum; 
}
.post-it img {
height:140px;
width:;
float:left;
}
#pink_post-it img {
margin-left:20px;
margin-top:;
}

/*Dry Erase Board Area */
#DryErase { 
float:VALUE; 
}
#DryErase .oi { 
min-height:+VALUE;
margin-top:-42px; 
padding:25px 35px 35px 35px; 
background:white; 
border-radius:15px;
border:VALUE;
}
/*Contact Page*/
#contactpostit {
width:150px;
float:right;
}

/*Projects Page*/
#projects {
margin:0 25px 0 25px;
}
#projects img{
vertical-align:text-top;
margin:-35px 10px 75px 10px;
width:250px;
}

/*Contact*/
#contact #contactpostit {
float:right;
margin:45px 15px 15px 15px;
width:150px;
}

/*Footer*/
footer { 
float:VALUE; 
width:100%;
min-width:VALUE; 
max-width:VALUE; 
}
footer .oi { 
min-height:+VALUE;
margin:+VALUE; 
padding:+VALUE; 
background:VALUE; 
clear:both;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T00:57:55.080

像其他几个`hide`效果一样，您需要 jQuery UI 来添加`explode`效果：

将此添加到您的`script`标签中：

```
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script> 
```

请参阅[jQuery UI 效果](http://docs.jquery.com/UI/Effects/Explode)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-26T05:17:54.983

我制作了一个用于爆炸图像的 jquery 插件。它使用画布进行效果。 [https://github.com/blackmiaool/jquery-image-explode](https://github.com/blackmiaool/jquery-image-explode)

以及它的源代码在这里：（推荐在github上浏览）

```
//github https://github.com/blackmiaool/jquery-image-explode
(function ($) {
    "use strict";
    const wrapperName = "explode-wrapper";
    if(!$){
        console.error("jQuery is needed.");
        return;
    }
    $.fn.explodeRestore = function () {
        this.each(function () { //explode separately
            const $dom = $(this);
            const wrapper = $dom.prop(wrapperName);
            if (wrapper) {
                wrapper.replaceWith($dom);
                $dom.prop(wrapperName, null);
            }
        });
    };
    $.fn.explode = function (opt) {
        if (!opt || typeof opt !== "object") {
            opt = {};
        }

        const {
            minWidth = 3,
                omitLastLine = false,
                radius = 80,
                minRadius = 0,
                release = true,
                fadeTime = 300,
                recycle = true,
                recycleDelay = 500,
                fill = true,
                explodeTime = 300,
                maxAngle = 360,
                gravity = 0,
                round = false,
                groundDistance = 400,
                ignoreCompelete = false,
                land=true,
                checkOutBound,
                finish,
        } = opt;

        let {
            maxWidth
        } = opt;

        const $target = this;
        let $targetImage;
        const args = arguments;
        if ($target.length > 1) { //explode separately
            $target.each(function () {
                const $dom = $(this);
                $dom.explode.apply($dom, args);
            });
            return;
        } else if (!$target.length) {
            return;
        }

        if ($target.prop("tagName") === "IMG") {
            if (!$target.prop("complete")) {

                $target.on("load", function () {
                    $target.explode.apply($target, args);
                });
                return;
            }
            $targetImage = $target;
        } else if ($target.css("backgroundImage") !== "none") {

            const src = $target.css("backgroundImage").match(/url\(\"([\S\s]*)\"\)/)[1];
            $targetImage = $("<img/>", {
                src
            });
            if (!opt.ignoreCompelete) {
                $targetImage.on("load", function () {
                    opt.ignoreCompelete = true;
                    $target.explode.apply($target, [opt]);
                });
                return;
            }
        }

        const w = $target.width();
        const h = $target.height();
        const minorDimension = Math.min(w, h);
        const radiusData = getRadiusData();

        const ctxWidth = Math.max(w, radius * 2);
        const ctxHeight = Math.max(h, radius * 2, groundDistance * 2);
        if (!maxWidth) {
            maxWidth = minorDimension / 4;
        }
        const $wrapper = $("<div></div>", {
            "class": wrapperName,
        });
        const syncStyles = ["width", "height", "margin-top", "margin-right", "margin-bottom", "margin-left", "position", "top", "right", "bottom", "left", "float", "display"];
        syncStyles.forEach((v) => {
            $wrapper.css(v, $target.css(v));
        });
        //        $wrapper.css("background-color", "black");
        if ($wrapper.css("position") === "static") {
            $wrapper.css("position", "relative");
        }

        const startRatio = 0.3;

        //generate rags' body
        const rags = generateRags();
        getRagsFinalState();

        const $canvas = $("<canvas></canvas>");

        //standard canvas, to draw the ideal target
        const $canvas0 = $("<canvas></canvas>");
        $canvas0.css({
            width: w,
            height: h,
        });
        $canvas0.attr({
            width: w,
            height: h,
        });

        $canvas.css({
            position: "absolute",
            left: (w - ctxWidth) / 2,
            right: (w - ctxWidth) / 2,
            top: (h - ctxHeight) / 2,
            bottom: (h - ctxHeight) / 2,
            margin: "auto",
            width: ctxWidth,
            height: ctxHeight,
        });
        $canvas.attr({
            width: ctxWidth,
            height: ctxHeight,
        });

        $wrapper.append($canvas);

        const ctx = $canvas[0].getContext("2d");
        const ctx0 = $canvas0[0].getContext("2d");

        const {
            naturalWidth,
            naturalHeight
        } = $targetImage?$targetImage[0]:{};
        if ($target.prop("tagName") === "IMG") {
            ctx0.drawImage($targetImage[0], 0, 0, naturalWidth, naturalHeight, 0, 0, w, h);
        } else if ($target.css("backgroundImage") !== "none") {
            let dx = 0,
                dy = 0,
                dWidth = naturalWidth,
                dHeight = naturalHeight;
            let config = {
                'background-repeat': $target.css("background-repeat"),
                "background-size": $target.css("background-size"),
                'background-position-x': $target.css("background-position-x"),
                'background-position-y': $target.css("background-position-y"),
            }

            function warn(key) {
                console.warn(`Unsupported ${key} style:${config[key]}`);
            }
            const ratioW = w / naturalWidth;
            const ratioH = h / naturalHeight;

            if (config["background-size"] === "cover") {
                const ratio = Math.max(ratioW, ratioH);

                dWidth = naturalWidth * ratio;
                dHeight = naturalHeight * ratio;
            } else if (config["background-size"] === "contain") {
                const ratio = Math.min(ratioW, ratioH);

                dWidth = naturalWidth * ratio;
                dHeight = naturalHeight * ratio;
            } else {
                warn("background-size");

            }
            dx = parseInt(config['background-position-x']) / 100 * (w - dWidth);
            dy = parseInt(config['background-position-y']) / 100 * (h - dHeight);

            if (config["background-repeat"] === "repeat") {
                for (var i = 0 - Math.ceil(dx / dWidth); i < w / dWidth + Math.ceil(-dx / dWidth); i++) {
                    for (var j = 0 - Math.ceil(dy / dHeight); j < h / dHeight + Math.ceil(-dy / dHeight); j++) {
                        ctx0.drawImage($targetImage[0], 0, 0, naturalWidth, naturalHeight, dx + i * dWidth, dy + j * dHeight, dWidth, dHeight);
                    }
                }
            } else if (config["background-repeat"] === 'no-repeat') {
                ctx0.drawImage($targetImage[0], 0, 0, naturalWidth, naturalHeight, dx, dy, dWidth, dHeight);
            } else {
                warn("background-repeat");
            }

        } else if ($target.css("backgroundColor") !== "rgba(0, 0, 0, 0)") {
            ctx0.fillStyle = $target.css("backgroundColor");
            ctx0.fillRect(0, 0, w, h);
        } else {
            console.warn("There's nothing to explode.");
        }

        const scaleX = 1;
        const scaleY = 1;
        rags.forEach((rag) => {
            const {
                left,
                top,
                width: ragWidth,
                height: ragHeight,
            } = rag;

            rag.naturalParams = [left, top, ragWidth, ragHeight];

        });

        $target.after($wrapper);
        $target.prop(wrapperName, $wrapper);
        $target.detach();

        let biasVy = 0;

        explode(function () {
            if (release) {
                doRelease();
            } else if (recycle) {
                doRecycle();
            }else{
                finish&&finish();
            }
        });

        function doRelease(cb) {
            const startTime = Date.now();
            let leftCnt = rags.length;

            rags.forEach((rag) => {
                rag.time1 = 1000 / (rag.ratio * (maxWidth + 1 - rag.width) / maxWidth + 0.1);
                rag.time2 = rag.time1 + fadeTime;
            });
            draw();

            function draw() {
                const time = Date.now();
                const duration = time - startTime;

                ctx.clearRect(0, 0, ctxWidth, ctxHeight);

                rags.forEach((rag) => {
                    ctx.save();
                    const {
                        width: ragWidth,
                        height: ragHeight,
                    } = rag;

                    ctx.translate(rag.biasx, rag.biasy);

                    ctx.rotate(rag.lastAngle || rag.finalAngleRad);

                    if (round) {
                        ctx.beginPath();
                        ctx.arc(0, 0, ragWidth / 2, 0, Math.PI * 2, false);
                        ctx.closePath();
                        ctx.clip();
                    }
                    let alpha;
                    if (duration < rag.time1) {
                        alpha = 1;
                    } else if (duration > rag.time2) {
                        alpha = 0;
                    } else {
                        alpha = 1 - (duration - rag.time1) / fadeTime;
                    }
                    if (alpha === 0 && !rag.released) {
                        rag.released = true;
                        leftCnt--;
                    }
                    ctx.globalAlpha = alpha;
                    ctx.drawImage($canvas0[0], rag.left, rag.top, rag.width, rag.height, -ragWidth / 2, -ragHeight / 2, ragWidth, ragHeight);
                    ctx.restore();
                });
                if (!leftCnt) {
                    cb && cb();
                } else {
                    window.requestAnimationFrame(draw);
                }
            }
        }

        function doRecycle() {
            setTimeout(function () {
                explode(function () {
                    $target.explodeRestore();
                }, true);
            }, recycleDelay);

        }

        function explode(cb, reverse) {
            const startTime = Date.now();
            let lastTime = startTime;
            let leftCnt = rags.length;

            if (!reverse) {
                rags.forEach((rag) => {
                    rag.vx = rag.translateX / explodeTime * 1000;
                    rag.vy = rag.translateY / explodeTime * 1000;

                    rag.biasx = rag.translateX0;
                    rag.biasy = rag.translateY0;
                    if (gravity) {
                        rag.transYMax = ctxHeight / 2 + groundDistance - rag.height / 2;
                    }

                });
            }

            draw();

            function draw() {
                const time = Date.now();
                let ratio;
                let angleRatio;
                ratio = (time - lastTime) / 1000;
                angleRatio = (time - startTime) / explodeTime;
                if (reverse) {
                    angleRatio = 1 - angleRatio;
                }
                if (gravity) {
                    biasVy += (gravity * ratio) * 300;
                } else {
                    if (angleRatio > 1 || angleRatio < 0) {
                        cb && cb();
                        return;
                    }
                    ratio *= Math.cos(angleRatio * Math.PI / 2) * Math.PI / 2;
                }
                if (reverse) {
                    ratio = -ratio;
                }
                lastTime = time;
                ctx.clearRect(0, 0, ctxWidth, ctxHeight);
                rags.forEach((rag) => {
                    ctx.save();
                    const {
                        width: ragWidth,
                        height: ragHeight,
                    } = rag;

                    if (!rag.land) {
                        rag.biasx += rag.vx * ratio;
                        rag.biasy += (rag.vy + biasVy) * ratio;

                        if (gravity) {
                            if (checkOutBound && checkOutBound(rag) 
                                || rag.biasy > rag.transYMax
                               || rag.biasy < rag.height/2) {
                                leftCnt--;
                                rag.land = true;
                                rag.lastAngle = rag.finalAngleRad * angleRatio;

                                if(land){
                                    rag.biasy = gravity>0?rag.transYMax:rag.height/2;
                                }else{
                                    rag.biasy=rag.transYMax*2;//hide
                                }
                            }

                        }
                    }

                    ctx.translate(rag.biasx, rag.biasy);

                    if (rag.lastAngle) {
                        ctx.rotate(rag.lastAngle);
                    } else {
                        ctx.rotate(rag.finalAngleRad * angleRatio);
                    }

                    if (round) {
                        ctx.beginPath();
                        ctx.arc(0, 0, ragWidth / 2, 0, Math.PI * 2, false);
                        ctx.closePath();
                        ctx.clip();
                    }

                    ctx.drawImage($canvas0[0], rag.left, rag.top, rag.width, rag.height, -ragWidth / 2, -ragHeight / 2, ragWidth, ragHeight);
                    ctx.restore();
                });
                if (gravity && !leftCnt) {
                    cb();
                } else {
                    window.requestAnimationFrame(draw);
                }
            }
        }

        function random(min, max) {
            return parseInt(Math.random() * (max + 1 - min), 10) + min;
        }

        //generate final position and angle of rags
        function getRagsFinalState() {
            rags.forEach((v, i) => {
                const finalAngle = (((Math.random() * maxAngle * 2) - maxAngle) / ((Math.random() + 2) * v.width)) * 10;

                //coordinate based on center point
                let x = v.left + v.width / 2 - w / 2;
                let y = v.top + v.width / 2 - h / 2;

                if (x === 0) {
                    x = i % 2 ? -1 : 1;
                }
                if (y === 0) {
                    y = (i % 4 < 2) ? -1 : 1;
                }

                const distance = Math.sqrt(x * x + y * y);

                let ratio = ((1 - startRatio) * (1 - (v.width - minWidth) / (maxWidth - minWidth)) + startRatio) * Math.random();
                ratio = 1 - (1 - ratio) * (1 - minRadius / radius);

                const finalDistance = (radius - distance) * ratio + distance;
                const distanceSquare = distance * distance;

                const attach = {
                    finalDistance,
                    ratio,
                    x,
                    y,
                    distance,
                    translateX: (finalDistance - distance) * Math.sqrt((distanceSquare - y * y) / (distanceSquare)) * (x > 0 ? 1 : -1),
                    translateY: (finalDistance - distance) * Math.sqrt((distanceSquare - x * x) / (distanceSquare)) * (y > 0 ? 1 : -1),
                    translateX0: (ctxWidth - w) / 2 + v.left + v.width / 2,
                    translateY0: (ctxHeight - h) / 2 + v.top + v.height / 2,
                    finalAngle,
                    finalAngleRad: finalAngle * (Math.PI / 180),
                };

                for (let i in attach) {
                    v[i] = attach[i];
                }

            });
        }
        //generate inital position and dimension of rags
        //rewrite it to fit for you demand
        function generateRags() {
            let rowCnt;
            const base = [[0, 1], [1, 1], [1, 0], [0, 0]];
            if (omitLastLine) {
                rowCnt = Math.floor(h / maxWidth);
            } else {
                rowCnt = Math.ceil(h / maxWidth);
            }

            const rags = [];

            const noRadius = radiusData.every(function (v) {
                return v === 0
            });

            for (let row = 0; row < rowCnt; row++) {
                generateRow(row);
            }

            function isInner(x, y) {
                if (x < radiusData[0] && y > h - radiusData[0] ||
                    x > w - radiusData[1] && y > h - radiusData[1] ||
                    x > w - radiusData[2] && y < radiusData[2] ||
                    x < radiusData[3] && y < radiusData[3]) {
                    return false;
                }
                return true;
            }

            function distanceLessThan(x1, y1, x2, y2, d) {
                return (x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2) < d * d;
            }

            function tryPushRag({
                left,
                top,
                width,
                height
            }) {
                const x = left + width / 2;
                const y = h - top - height / 2;

                if (noRadius || isInner(x, y) || radiusData.some(function (v, i) {
                        return distanceLessThan(x, y, base[i][0] * w + 2 * (0.5 - base[i][0]) * v, base[i][1] * h + 2 * (0.5 - base[i][1]) * v, v);
                    })) {
                    rags.push({
                        left,
                        top,
                        width,
                        height
                    });
                }
            }

            function generateRow(row) {
                let rowSum = 0;
                const topBase = row * maxWidth;

                function generate(width) {
                    const left = rowSum;
                    rowSum += width;
                    tryPushRag({
                        left,
                        top: topBase,
                        width,
                        height: width,
                    });
                    if (fill) {
                        for (let i = 1; i < parseInt(maxWidth / width); i++) {
                            tryPushRag({
                                left,
                                top: topBase + i * width,
                                width,
                                height: width,
                            });
                        }
                    }
                }
                let width;
                do {
                    if (width) {
                        generate(width);
                    }
                    width = random(minWidth, maxWidth);
                } while (w > rowSum + width);
                if (w - rowSum >= minWidth) {
                    generate(w - rowSum);
                }
            }
            rags.sort(function (rag1, rag2) {

                return Math.random() > 0.5 ? 1 : -1;
            });

            return rags;
        }
        //get an array of 4 corners of radius        
        function getRadiusData() {
            let ret = ["border-top-left-radius", "border-top-right-radius", "border-bottom-right-radius", "border-bottom-left-radius"];
            const width = $target.width();
            ret = ret.map(function (key) {
                let radius = $target.css(key);
                if (radius.match(/px$/)) {
                    return radius.match(/^\d+/)[0] * 1;
                } else if (radius.match(/%$/)) {
                    return radius.match(/^\d+/)[0] / 100 * width;
                }
                return radius;
            });
            ret = ret.map(function (radius) {
                if (radius > width / 2) {
                    radius = width / 2
                }
                return radius;
            });
            return ret;
        }
    };
})(window.jQuery);
```

# python - 亚洲语言情感分析的代码示例 - Python NLTK

> ID：15468178
> 
> 赞同：8
> 
> 时间：2013-03-18T00:51:36.553
> 
> 标签：python, nlp, nltk, sentiment-analysis, asianfonts

`sentiment analysis`这里有一个关于`NLTK`(python)的演示[http://text-processing.com/demo/sentiment/](http://text-processing.com/demo/sentiment/)。

还有情感分析部分的教程

*   [http://streamhacker.com/2010/06/16/text-classification-sentiment-analysis-eliminate-low-information-features/](http://streamhacker.com/2010/06/16/text-classification-sentiment-analysis-eliminate-low-information-features/)
*   [http://streamhacker.com/2010/05/10/text-classification-sentiment-analysis-naive-bayes-classifier/](http://streamhacker.com/2010/05/10/text-classification-sentiment-analysis-naive-bayes-classifier/)
*   [http://nltk.googlecode.com/svn/trunk/doc/book/ch07.html](http://nltk.googlecode.com/svn/trunk/doc/book/ch07.html)

**是否有任何完整的代码示例或使用 python NLTK 进行*亚洲语言*情感分析的工作项目？**（尤其适用于中文、日文、韩文或阿拉伯文、希伯来文和波斯文）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-18T07:11:08.950

*在使用 Python 进行自然语言处理*的日语版本中，有一个专门用于日语处理的额外章节：[https](https://nltk.googlecode.com/svn/trunk/doc/book-jp/ch12.html) ://nltk.googlecode.com/svn/trunk/doc/book-jp/ch12.html （日语）。

除非您正在寻找情感分析的符号方法，否则您可以将现有技术应用于日语（或您想要处理的任何语言）并使用语言特定工具进行预处理步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:47:05.927

我没有看到任何使用 NLTK 的示例，但可以使用[chatterbox](https://www.mashape.com/chatterbox-co/chinese-sentiment-analysis-for-social-media) （面向社交媒体）和[chinese-analytics](https://www.mashape.com/soshio/chinese-analytics)（面向业务）库来执行中文的情感分析。

# c# - 大数据集的单一测试方法

> ID：15468179
> 
> 赞同：2
> 
> 时间：2013-03-18T00:51:38.703
> 
> 标签：c#, testing

我用 编写了一个测试用例`Microsoft.VisualStudio.TestTools.UnitTesting`，遍历了大量存储在磁盘上的文本文件中的测试用例。一旦其中一个测试用例导致“单元测试”失败，我正在使用的 Assert 方法（`AreEqual`或`Fail`）返回一个`ErrorMessage`包含失败案例详细信息的方法。这很好，但是，即使有一个案例失败，我希望我的代码继续执行所有测试用例，所以我可以看到所有失败案例的详细信息。

[我从研究中了解到，根据单元测试大型数据集](https://stackoverflow.com/questions/235402/unit-testing-large-data-sets)的定义，这不一定是单元测试？所以我也对如何解决这个问题的替代建议持开放态度，而不仅仅是那些与`Microsoft.VisualStudio.TestTools.UnitTesting`单元测试框架相关的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T01:15:50.017

有一个概念叫做[数据驱动测试](http://en.wikipedia.org/wiki/Data-driven_testing)。我在 NUnit 中使用过它，但[在 Visual Studio 单元测试](http://msdn.microsoft.com/en-us/library/ms182527.aspx)中也有一种方法。

这会为每个数据行创建一个测试，而不是为整个数据集创建一个测试。这将为您的整个数据集运行测试，即使失败也会继续下一个数据项。最终结果将突出单独处理每个测试用例的失败和成功。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T01:17:29.190

我过去做过的事情是创建一个[t4](/questions/tagged/t4 "显示标记为“t4”的问题")模板来从数据源创建我的测试。通常是测试的 CSV 文件。要（重新）生成所有您需要做的就是打开 TT 文件并将其保存以重新生成 - 或使用 VS 工具。

这样做的好处是每个条件只有一个测试，而且即使它们是为您生成的，它也会为您提供易于重复的测试。您还可以非常轻松地调试失败的测试，因为代码最终是 C#。

例如，使用此内容创建一个 *.tt 并拥有一个包含一些数据的 CSV 文件：

```
<#@ template debug="false" hostspecific="true" language="C#" #>
<#@ assembly name="System.Core" #>
<#@ import namespace="System.IO" #>
<#@ import namespace="System.Linq" #>
<#@ import namespace="System.Collections.Generic" #>
<#@ output extension=".generated.cs" #>
<#
    var testCases =
        File.ReadAllLines(Path.Combine(Host.TemplateFile, @"Cases.csv"))
        .Skip(1)  //Headers
        .Select(line => line.Split(','))
        .Select(
            values =>
                new
                {
                    TestName = values[0],
                    Expected = values[1],
                    Actual = values[2],
                    //More Stuff from values[n]
                });
#>
using System;
using Microsoft.VisualStudio.TestTools.UnitTesting;

namespace DaveShaw
{
    [TestClass]
    public class GeneratedTests
    {
<#
    foreach (var testCase in testCases)
    {
#>
        [TestMethod]
        public void Generated_<#= testCase.Name #>()
        {
            //Put your Arrange & Act code here
            Assert.AreEqual(
                expected: <#= testCase.Expected #>
                actual: <#= testCase.Expected #>);
        }
<#
    }
#>
    }
} 
```

保存后，您将拥有一个 *.generated.cs（其中 * 与 *.tt 相同），其中包含所有测试。

# c - main 在 C 中是否有返回地址、动态链接或返回值？

> ID：15468180
> 
> 赞同：6
> 
> 时间：2013-03-18T00:51:40.873
> 
> 标签：c, stack, main, activation-record

根据我们的书，每个函数在 C 的运行时堆栈中都有一个激活记录。每个激活记录都有一个返回地址、动态链接和返回值。主要也有这些吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T01:08:17.790

所有这些术语都是纯粹的实现细节——C 没有“返回地址”或“动态链接”的概念。它甚至根本没有“堆栈”的概念。C 的大多数*实现*中都有这些对象，并且在这些实现中它们可能存在于`main`. 但是，不要求发生这种情况。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T01:12:54.620

如果你反汇编函数，你会意识到大多数时候堆栈甚至不包含返回值——通常是 EAX 寄存器包含（intel x86）。您还可以查找“调用约定”——这在很大程度上取决于编译器。C 是一种语言，如何将其解释为机器代码并不是“它的”业务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-31T06:29:09.517

虽然这取决于实现，但值得研究使用 gcc 编译的 C 程序。如果你运行`objdump -d executable`，你会看到它被反汇编，你可以看到它的`main()`行为。这是一个例子：

`08048680 <_start>: ... 8048689: 54 push %esp 804868a: 52 push %edx 804868b: 68 a0 8b 04 08 push $0x8048ba0 8048690: 68 30 8b 04 08 push $0x8048b30 8048695: 51 push %ecx 8048696: 56 push %esi 8048697: 68 f1 88 04 08 push $0x80488f1 804869c: e8 9f ff ff ff call 8048640 <__libc_start_main@plt> 80486a1: f4 hlt ... 080488f1 <main>: 80488f1: 55 push %ebp 80488f2: 89 e5 mov %esp,%ebp 80488f4: 57 push %edi 80488f5: 56 push %esi 80488f6: 53 push %ebx ... 8048b2b: 5b pop %ebx 8048b2c: 5e pop %esi 8048b2d: 5f pop %edi 8048b2e: 5d pop %ebp 8048b2f: c3 ret`

您可以看到 main 的行为类似于常规函数，因为它正常返回。实际上，如果您查看[linux 基础](http://refspecs.linuxbase.org/LSB_3.1.1/LSB-Core-generic/LSB-Core-generic/baselib---libc-start-main-.html)文档，您会发现`__libc_start_main`我们从中看到的调用`_start`实际上需要`main`像常规函数一样运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T02:06:55.563

在 C/C++ 中，`main()`就像函数一样编写，但不是函数。例如，不允许调用`main()`，它有*几个*可能的原型（在 C 中不能这样做！）。从中得到的任何`return`东西都会传递给操作系统（程序结束）。

单个 C 实现可能会`main()`像从“外部”调用的函数一样处理统一性，但没有人强迫他们这样做（或不允许在不告诉任何人的情况下切换到其他形式）。有实现 C 的传统方法，但没有人被迫这样做。这只是我们典型架构中最简单的方法。

# java - 展开其他子元素时，可展开列表内的单选按钮仍然存在

> ID：15468181
> 
> 赞同：0
> 
> 时间：2013-03-18T00:51:53.477
> 
> 标签：java, android, radio-button, radio-group, expandablelistadapter

我想在我的 android 应用程序中制作一个可扩展的广播组列表。列表的每个元素都应包含（打开时）几个单独的无线电组。到目前为止，我正在测试每个孩子只有一个无线电组，而且我已经遇到了一个我自己似乎无法解决的问题。

当我扩展可扩展列表的父级时，它似乎工作正常。单选按钮（现在是父元素的唯一子元素）的单选按钮按应有的方式显示。但是，当我展开可展开列表的另一个父级时，单选按钮会添加到另一个子组的现有按钮中。这意味着：一旦我扩展了几个子组，每个扩展的子组都包含大量的单选按钮，充斥着整个屏幕。简而言之，当我展开 parent 1 时，我得到了选择

*   是的
*   不
*   也许

当我展开第二个父项时，我得到了单选选项

*   是的
*   不
*   也许
*   是的
*   不
*   也许
*   大概

...它们也被添加到父 1 内的单选按钮组中。所以现在我有 2 个大型扩展列表元素。当我展开另一个组时，选择也会添加到所有子视图中，依此类推，依此类推……

因此，按照简单的逻辑，似乎所有单选按钮都没有放入一个新组（每次展开子列表时都是新创建的），而是将它们添加到同一个已经存在的组中。

我已经能够将问题与我的 ExpandableListAdapter 类中的 getChildView 函数隔离开来。这是导致上述输出的代码：

```
public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View view,
        ViewGroup parent) {
    ExpandListChild child = (ExpandListChild) getChild(groupPosition, childPosition);
    if (view == null) {
        LayoutInflater infalInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        view = infalInflater.inflate(R.layout.child_layout, null);
    }

    ArrayList<HashMap<String,String>> inputDetailsList = child.getInputfields();
    //RadioGroup rg = new RadioGroup(view.getContext());
    RadioGroup rg = (RadioGroup) view.findViewById(R.id.radiogroup);
    int has_radiogroup = 0;

    for (int i = 0; i <inputDetailsList.size(); i++){
        if (inputDetailsList.get(i).get("type").equals("radio")){
            has_radiogroup = 1;
            RadioButton rb = new RadioButton(rg.getContext());
            rb.setText(inputDetailsList.get(i).get("textcontent"));
            rg.addView(rb);
        }
    }

    return view;
} 
```

这是用作子布局的 xml 文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="55dip"
android:background="@color/ExpandChildBackground"
android:orientation="vertical" >

<TextView
    android:id="@+id/tvChild"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="@color/Black"
    android:textSize="17dip" />

<RadioGroup
    android:id="@+id/radiogroup"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    >
</RadioGroup>
</LinearLayout> 
```

我怀疑我的错误可能是这一行：

```
RadioGroup rg = (RadioGroup) view.findViewById(R.id.radiogroup); 
```

它会查找我在膨胀的子布局 (R.layout.child_layout) 中创建的无线电组。但它不会为每个展开的子视图使用新的，而是使用现有的来应用按钮。换句话说，似乎无线电组永远不会得到它“完成”的标志和/或子视图永远不会得到必须使用新的无线电组而不是旧的无线电组的标志。

我尝试的是使用以下行为每个子视图创建一个新的 RadioGroup（您可以看到它是上面代码中的注释行），而不是使用我在布局中定义的 radiogroup。制作一个新的广播组将如下所示：

```
RadioGroup rg = new RadioGroup(view.getContext()); 
```

但是，这不起作用，它不显示任何无线电组，更不用说按钮了。我还尝试从布局 xml 文件中删除 radiogroup 元素（因为它无论如何都没有使用）。仍然没有运气。为每个元素使用简单的无组织文本视图似乎可以正常工作，因此这也表明我的无线电组实现存在问题。

老实说，我现在没有想法。我可能得到了错误的上下文，但我不知道要使用什么上下文。如果有人能够指出我正确的方向，我将非常感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:41:39.010

如果有人感兴趣，我已经能够自己解决问题。我只是删除了 if-condition [ `if (view == null)`]，所以新代码如下所示：

```
 public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View view,
        ViewGroup parent) {

    ExpandListChild child = (ExpandListChild) getChild(groupPosition, childPosition);
    LayoutInflater infalInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    view = infalInflater.inflate(R.layout.child_layout, null);

    ArrayList<HashMap<String,String>> inputDetailsList = child.getInputfields();

    RadioGroup rg = (RadioGroup) view.findViewById(R.id.radiogroup);
    int has_radiogroup = 0;

    for (int i = 0; i <inputDetailsList.size(); i++){

        if (inputDetailsList.get(i).get("type").equals("radio")){
            System.out.println("type: "+inputDetailsList.get(i).get("type"));
            has_radiogroup = 1;
            RadioButton rb = new RadioButton(rg.getContext());
            rb.setText(inputDetailsList.get(i).get("textcontent"));
            System.out.println("textcontent: "+inputDetailsList.get(i).get("textcontent"));
            rb.setId(Integer.parseInt(inputDetailsList.get(i).get("value")));

            if (has_radiogroup == 1){
                rg.addView(rb);
            }
        }
    }

    return view;
} 
```

现在它是有道理的。每次生成新的`LayoutInflater`子视图时都会调用 ，即扩展组。在此之前，它只是使用已填充的现有视图（视图不为空），`radiobuttons`并将新视图添加`radiobuttons`到现有视图中，导致我的列表充满屏幕。

然而，感谢任何试图解决这个问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-01T11:54:33.997

这对我有用。对于**单选按钮和复选框**

```
 android:focusable="false" 
```

# wpf - 基于现有值计算的 Setter 值 - WPF

> ID：15468191
> 
> 赞同：1
> 
> 时间：2013-03-18T00:53:06.820
> 
> 标签：wpf, triggers, setter

目前有如下设置：

```
<Trigger Property="IsMouseOver" Value="True">
    <Setter TargetName="rectName" Property="Stroke" Value="Red"/>                                            
    <Setter TargetName="rectName" Property="StrokeThickness" Value="2"/>                    
</Trigger> 
```

即触发器将矩形的描边和粗细更改为红色，鼠标悬停时更改为 2。但这只有在矩形的笔触为黑色时才会发生（很少有矩形有透明笔触）

有没有办法把这个条件放在 Setter 上？我正在寻找一种不那么侵入性的方式来实现这一点。有什么线索吗？

是否有类似以下的构造：

```
<Setter TargetName="rectName" Property="Stroke" Value="If Black Then Black Else Red"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:55:03.363

在这里这将起作用，但是请注意，此代码将引发堆栈溢出异常，因为当您将鼠标悬停在红色黑色红色黑色等时，颜色会发生变化：/我只是建议一些其他方法来跟踪矩形状态，可能是 ViewModel 中的一个变量，用于跟踪状态，并在代码中替换：

```
<Condition  Binding="{Binding RelativeSource={RelativeSource Self}, Path=Stroke}" Value="Black" /> 
```

有类似的东西：

```
<Condition Binding="{Path=RectState}" Value="True" /> 
```

否则会崩溃 :) （抱歉匆忙写这个）

```
 <Rectangle Height="100" HorizontalAlignment="Left" Margin="182,152,0,0" Name="rectangle1" VerticalAlignment="Top" Width="200" >
        <Rectangle.Style>
            <Style TargetType="Rectangle">
                <Setter Property="Fill" Value="Transparent" />
                <Setter Property="Stroke" Value="Black" />
                <Style.Triggers>                      
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition  Binding="{Binding RelativeSource={RelativeSource Self}, Path=IsMouseOver}" Value="True" />
                            <Condition  Binding="{Binding RelativeSource={RelativeSource Self}, Path=Stroke}" Value="Black" />
                        </MultiDataTrigger.Conditions>
                        <MultiDataTrigger.Setters>
                            <Setter Property="StrokeThickness" Value="2" />
                            <Setter Property="Stroke" Value="Red" />
                        </MultiDataTrigger.Setters>
                    </MultiDataTrigger>
                </Style.Triggers>
            </Style>
        </Rectangle.Style>
    </Rectangle> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T02:11:41.753

~~您可以使用 MultiTrigger 来实现这一点（下面的代码未经测试，但应该足够接近）~~

```
 <Style.Triggers>
     <MultiTrigger>
        <MultiTrigger.Conditions>
            <Condition Property="IsMouseOver" Value="True" />
            <Condition Property="Stroke" Value="Black" />
        </MultiTrigger.Conditions>
        <Setter TargetName="rectName" Property="Stroke" Value="Red" />
        <Setter TargetName="rectName" Property="StrokeThickness" Value="2" />
     </MultiTrigger>
 </Style.Triggers> 
```

# c++ - 在 XCode 中遇到 fprintf C 的问题

> ID：15468198
> 
> 赞同：0
> 
> 时间：2013-03-18T00:53:54.800
> 
> 标签：c++, xcode, printf

出于物理项目的目的，我正在尝试在 Mac 上的 Xcode 中的 C++ 中使用 fprintf 输出。以前我在 PC 上使用过 Turbo C++，并且没有与我在下面写的类似输出的问题......我正在尝试将数据发送到 .csv 文件以便在 xcel 中创建图形/图表，但调试器讨厌我尝试的输出。有人可以帮助我并告诉我如何将输出从 xcode 发送到 xcel 或 mac 的数字程序中吗？我的代码有什么问题？谢谢我已经束手无策了！

```
#include <iostream>
#include <stdio.h>
#include <math.h>
#include <stdlib.h>
#include <time.h>

int main ()
{
    int ia,ja,ib=1,jb=1,n=1,t=1;
    float Ia[25],Ja[25],C[25][25],Wbb[25][25];
    float xl[25][25],xr[25][25],Pr[25][25],Nr[25][25];
    float max,r1,H=0;

    max=RAND_MAX;
    FILE * Project1;
    Project1 = fopen ("Users/Dave/Desktop/Project1.csv","w");

    Ia[n]=3;
    Ja[n]=3;
    for(t=1;t<100;++t) //time step counter
    {
        n=1;
        for(n=1;n<26;++n) //# of states to look at
        {
            ia=Ia[n];
            ja=Ja[n];
            ib=1;

            for(ib=1;ib<6;++ib) //determine I[n]'s C[ia][ja] values (initially will be the same due to ICs)
            {
                jb=1;
                for(jb=1;jb<6;++jb)
                {
                    C[ia][ja]=100*(ia-ib)^2+100*(ja-jb)^2+1;
                }
            }
            fprintf(Project1, "%d,%d,%d,%f\n",n,ia,ja,C[ia][ja]);

            ib=1;
            for(ib=1;ib<6;++ib) //determine Wsrs and delta x's for each system I[n] {
            {
                jb=1;
                for(jb=1;jb<6;++jb)
                {
                    Wbb[ib][jb]=C[ia][ja]/((100)*(ia-ib)^2+100*(ja-jb)^2+1);
                    xl[1][1]=0;
                    xr[ib][jb]=xl[ib][jb]+Wbb[ib][jb];
                    fprintf(Project1,"%d,%d,%f,%f,%f",ib,jb,Wbb[ib][jb],xl[ib][jb],xr[ib][jb]);
                    xl[ib][jb+1]=xr[ib][jb];
                }
            }

            r1=rand()/max; //randomly select new state and determine it's ib,jb value and reassign to new ia, ja at next time step
            ib=1;
            for(ib=1;ib<6;++ib)
            {
                jb=1;
                for(jb=1;jb<6;++jb)
                {
                    if(r1<xr[ib][jb] & r1>xl[ib][jb])
                        Nr[ib][jb]++;
                    Ia[n]=ib;
                    Ja[n]=jb;
                }
            }
        }

        ib=1;
        for(ib=1;ib<6;++ib)
        {
            jb=1;
            for(jb=1;jb<6;++jb)
            {
                Pr[ib][jb]=Nr[ib][jb]/25;
                H=Pr[ib][jb]*log(Pr[ib][jb])+H; //Compute Total Entropy Function of all systems by adding each systems entropy
            }
        }

        fprintf(Project1,"%f",H); //print out the Entropy at each time step
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T01:03:37.107

所以我看到这里有一些问题，在这一行中你使用了错误的引号：

```
Project1 = fopen (“Users/Dave/Desktop/Project1.csv”,”w”); 
```

应该：

```
Project1 = fopen ("Users/Dave/Desktop/Project1.csv","w"); 
```

正如有人指出 C++ 没有`power`运算符，`^`is a `bitwise exclusive or`，您需要使用该`pow`函数，所以这一行：

```
C[ia][ja]=100*(ia-ib)^2+100*(ja-jb)^2+1; 
```

将会：

```
C[ia][ja]=100*pow((ia-ib),2)+100*pow((ja-jb),2)+1; 
```

运算符也是`&`a `bitwise and`，在以下上下文中，我认为您的意思是`&&`which 是 a `logical and`，在这种情况下，他们会做同样的事情：

```
 if(r1<xr[ib][jb] & r1>xl[ib][jb]) 
```

此外，如果您使用 C++ 进行开发，我将使用 C++ 版本的头文件：

```
#include <cstdio>
#include <cmath>
#include <cstdlib>
#include <ctime> 
```

# python - 如何使用 PYTHON 访问列表/字符串中的信息

> ID：15468199
> 
> 赞同：0
> 
> 时间：2013-03-18T00:54:23.617
> 
> 标签：python, list, frequency

所以我有这个术语列表

```
[('GO:0090141', 1), ('GO:0030308', 1), ('GO:0000266', 1), ('GO:0016881', 1), ('GO:0031307', 1)]
[('GO:0050681', 1), ('GO:0031491', 1), ('GO:0008270', 1), ('GO:0003677', 1), ('GO:0070936', 1)]
[('GO:0050681', 1), ('GO:0031491', 1), ('GO:0008270', 1), ('GO:0003677', 1), ('GO:0070936', 1)]
[('GO:0050681', 1), ('GO:0031491', 1), ('GO:0008270', 1), ('GO:0003677', 1), ('GO:0070936', 1)]
[('GO:0016055', 1), ('GO:0016363', 1), ('GO:0008270', 1), ('GO:0003676', 1), ('GO:0003677', 1)]
[('GO:0016607', 1), ('GO:0016605', 1), ('GO:0006351', 1), ('GO:0005515', 1), ('GO:0016925', 1)]
[('GO:0045842', 1), ('GO:0000781', 1), ('GO:0019789', 1), ('GO:0007067', 1), ('GO:0007049', 1)]
[('GO:0016607', 1), ('GO:0016605', 1), ('GO:0006351', 1), ('GO:0005515', 1), ('GO:0016925', 1)]
[('GO:0006457', 1), ('GO:0019221', 1), ('GO:0000087', 1), ('GO:0010827', 1), ('GO:0042405', 1)]
[('GO:0003676', 1), ('GO:0008270', 1), ('GO:0019789', 1)]
[('GO:0019221', 1), ('GO:0050681', 1), ('GO:0019899', 1), ('GO:0008270', 1), ('GO:0003676', 1)]
[('GO:0008022', 1), ('GO:0019048', 1), ('GO:0019899', 1), ('GO:0016881', 1), ('GO:0045202', 1)]
[('GO:0008022', 1), ('GO:0019048', 1), ('GO:0019899', 1), ('GO:0016881', 1), ('GO:0045202', 1)]
[('GO:0016881', 1), ('GO:0016874', 1), ('GO:0019789', 1)] 
```

我怎样才能得到一个列表只是'GO'信息而不得到'1'....所以我只想要GO：000221，GO：000241等......你也能帮我获得GO术语的频率。 ..etc ......就像 GO:0008270 ......它在我的列表中出现了 7 次

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T01:03:12.407

您有一些元组列表，因此您可以使用列表推导提取每个元组的第二个元素（假设您的列表称为`l`）：

```
 g = [e[0] for e in l] 
```

一旦您有了`GO`术语列表，您就可以使用例如（参见[https://stackoverflow.com/a/893499](https://stackoverflow.com/a/893499)）来获取它们的频率，

```
 from collections import Counter
 freqs = Counter(g) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T01:01:32.680

`list_of_GO = [item[0] for item in old_list]`

你所拥有的是`list`2- `tuples` `(GO:XXX, 1)`。上面的列表推导式只使用`GO:XXX`old_list 中每个元组的第一项（）构建新列表。

似乎您有一堆列表，而不仅仅是一个列表。我们可以看到更多你的代码吗？

计算你的代码的频率，你可以使用`collections.Counter`或者你可以自己计算事情，通过做`list.count(item)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T01:06:01.243

假设数据是按“行”设置的，可以这么说，您可以使用模块中的`Counter`对象`collections`。

```
>>> from collections import Counter
>>> counter = Counter()
>>> data = [
        # Each row of data listed above
        [('GO:0090141', 1), ('GO:0030308', 1), ('GO:0000266', 1), ('GO:0016881', 1), ('GO:0031307', 1)],
        # Etc...
>>> for row in data:
...     counter.update(x[0] for x in row)
...
>>> print counter
Counter({'GO:0008270': 6, 'GO:0050681': 4, 'GO:0003677': 4, 'GO:0016881': 4, 'GO
:0019899': 3, 'GO:0031491': 3, 'GO:0003676': 3, 'GO:0070936': 3, 'GO:0019789': 3
, 'GO:0008022': 2, 'GO:0019221': 2, 'GO:0045202': 2, 'GO:0016607': 2, 'GO:001660
5': 2, 'GO:0019048': 2, 'GO:0016925': 2, 'GO:0006351': 2, 'GO:0005515': 2, 'GO:0
045842': 1, 'GO:0006457': 1, 'GO:0030308': 1, 'GO:0000266': 1, 'GO:0000087': 1,
'GO:0031307': 1, 'GO:0007067': 1, 'GO:0007049': 1, 'GO:0090141': 1, 'GO:0016363'
: 1, 'GO:0000781': 1, 'GO:0016874': 1, 'GO:0016055': 1, 'GO:0010827': 1, 'GO:004
2405': 1}) 
```

# java - 在带有字符串长度方法的“if”语句中使用“or”语句

> ID：15468200
> 
> 赞同：1
> 
> 时间：2013-03-18T00:54:25.380
> 
> 标签：java, if-statement

因此，在我的第五行代码中`[if(length == 2 || 1)]`，我的 or 语句中出现了一个错误，即 Operator || 对于参数类型 boolean、int 未定义。关于我的语法有什么问题以及如何修复它的任何想法？谢谢！

```
//Write a program that translates a letter grade into a number grade. Letter grades are
//A B C D F, possibly followed by + or -. Their numeric values are 4, 3, 2, 1, and 0.
//There is no F+ or F-. A + increases the numeric value by 0.3, a - decreases it by     0.3.
//However, an A+ has the value 4.0\. All other inputs have value –1.
//Enter a letter grade: 
```

//使用带有方法getNumericGrade的类Grade。

```
public class Grade {
private double grade = 0.0;
public double getNumericGrade(String letterGrade){
    int length = letterGrade.length();
    if(length == 2 || 1){
        char startChar = letterGrade.charAt(0);
        char endChar = letterGrade.charAt(1);
        switch(startChar){
        case 'A':
            this.grade = 4.0;
            break;
        case 'B':
            this.grade = 3.0;
            break;
        case 'C':
            this.grade = 2.0;
            break;
        case 'D':
            this.grade = 1.0;
            break;
        case 'F':
            this.grade = 0.0;
            break;
        default:
            this.grade = -1;
        }
    if(length == 2){
        switch(endChar){
        case '-':
            this.grade = this.grade - .3;
            break;
        case '+':
            if(startChar != 'A'){
            this.grade = this.grade + .3;
            }
            break;
        default:
            this.grade = -1;
        }
    }
    if(startChar == 'F' && length != 1){
        this.grade = -1;
    }
    }else{
        this.grade = -1;
    }
    return this.grade;
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T00:55:54.580

这意味着该`||`运算符不接受布尔值和 int，您必须给它两个布尔表达式。

```
if(length == 2 || length ==  1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T01:00:25.863

你想说 if(length == 1 || length == 2)。你现在正在做的是说 if(length == 2 OR 1)。前者涉及两个可以评估真假的逻辑语句，后者一方面涉及一个逻辑语句，另一方面涉及一个整数。

计算机不会将 length == 2 OR 1 解释为“如果长度为 1 或 2，则返回 true”，而是“（如果长度等于 2，则返回 true）或（整数 1）”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T05:30:21.793

您可以执行以下操作：

```
if (Arrays.asList(1,2,3).contains(l.lenghth))
   // code 
```

# lisp - 这个函数是尾递归的吗？

> ID：15468205
> 
> 赞同：1
> 
> 时间：2013-03-18T00:55:00.153
> 
> 标签：lisp, scheme, racket, tail-recursion

在**球拍**中，我定义了以下函数，我想知道它是否是*尾递归*：

```
(define foo
  (λ (c m s1 s2)
      (if (< c m)
          (if (= (modulo m c) 0)
              (foo (+ c 1) m (+ s1 c) s2)
              (foo (+ c 2) m s1 (+ s2 c)))
          (cons s1 s2)))) 
```

我的问题实际上是这样的，但我必须写点别的东西来满足我*的帖子质量标准*。实际上，我不知道我*的帖子质量标准*是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T01:01:40.473

这实际上与您之前的问题相同。是的，这是尾递归：每当您的函数中发生递归调用时`foo`，它都处于尾位置。含义：执行递归调用后，没有其他事情可做，执行分支结束。而这`(cons s1 s2)`部分是递归的基本情况，所以它不计算在内。为了更清楚地看到它，该`foo`过程等效于：

```
(define (foo c m s1 s2)
  (cond ((>= c m)
         (cons s1 s2))                  ; base case of recursion
        ((= (modulo m c) 0)
         (foo (+ c 1) m (+ s1 c) s2))   ; recursive call is in tail position
        (else
         (foo (+ c 2) m s1 (+ s2 c))))) ; recursive call is in tail position 
```

让我们看一个*不是*尾递归的例子。例如，如果第二个的后续部分`if`定义如下：

```
(+ 1 (foo (+ c 1) m (+ s1 c) s2)) 
```

那么显然递归调用不会处于尾部位置，因为在递归返回之后执行了一个操作：将递归结果加一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:09:16.397

这是将代码转换为帧变异版本的伪代码（实际上是 Common Lisp）：

```
(defun foo (c m s1 s2)
  (prog 
      ((c c) (m m) (s1 s1) (s2 s2))  ; the frame
      BACK
      (if (< c m)
          (if (= (modulo m c) 0)
              (progn 
                (psetf s1 (+ s1 c)     ; set!
                       c  (+ c  1))    ;   in parallel
                (go BACK))
              (progn 
                (psetf s2 (+ s2 c)     ; set!
                       c  (+ c  2))    ;   in parallel
                (go BACK)))
          (return-from foo (cons s1 s2)))))) 
```

由于每次尾注后没有什么可做的了，我们可以`(go BACK)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T01:00:53.943

唯一的调用`foo`是在尾部位置，所以这个函数在我看来是尾部递归的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T04:51:19.483

[Scheme R6RS](http://www.r6rs.org/final/r6rs.pdf)第 59 页的第 11.20 节描述了尾调用并显示了基本 Scheme 句法形式的尾调用位置，例如 for`if`和`lambda`

您对 inside 的调用`foo`处于`foo`尾部位置。（因为它们分别处于内`if`尾位、外`if`尾位和`lambda`尾位。）

# .net - 如何在 .NET 3.5 中进行 HTTP 1.1 长轮询？

> ID：15468206
> 
> 赞同：2
> 
> 时间：2013-03-18T00:55:11.310
> 
> 标签：.net, long-polling, http-1.1, wcf-http

我们有一个用其他技术（不是 .NET）编写的服务器，它支持网络上的推送技术（基本上可以承受通过 HTTP 1.1 进行的长时间轮询）。我们正在创建一个 .NET 3.5 应用程序，它应该在发生某些事件时从服务器获取推送通知（如聊天）。

.NET 3.5 或更低版本是否有任何 .NET 框架可用作 HTTP 1.1 推送的客户端？据我了解，它应该支持在收到消息时重新连接，并且每两分钟重新连接一次。WCF 可以解决这类任务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:33:39.090

WCF 确实支持 HTTP 1.1，并且有一种接收通知的异步方式，[此处](http://www.interworks.com/blogs/banderton/2010/07/30/simple-long-polling-wcf-server)以示例描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:02:31.993

SignalR 是 WebRTC 各种实现的绝佳平台。它从 WebSockets 开始，通过服务器发送的事件，通过彗星，长轮询，我认为它甚至可能落入闪存。当客户端和服务器协商以找到匹配项时，它会自动执行此操作。SignalR 主要是为 .net 4+ 设计的，但是[How to use SignalR with .net 3.5](https://stackoverflow.com/questions/9369740/how-to-use-signalr-with-net-3-5)有一个 fork for .net 3.5，看起来很有希望。

# jquery - 使用 jQuery 解析获取的 JSON 时出错

> ID：15468213
> 
> 赞同：0
> 
> 时间：2013-03-18T00:56:17.297
> 
> 标签：jquery, ajax, json

我正在尝试使用 jQuery 解析 JSON 文件。我想返回新类别中的每个 image_url（减去第一个字符）并将图像放在页面上。

这是我的代码

```
function redo () {
$('#init').addClass('disabled');
$.getJSON('http://server/new/sample.json', function(data) {
    $.each(data.products_and_categories.new, function(item){
      $("<img/>").attr("src", "http://d2flb1n945r21v.cloudfront.net/production/uploaded/style/" + item.image_url.substring(1)).appendTo("#items");
    });
  });
$('#init').removeClass('disabled');
}; 
```

它在 chrome 检查器中返回此错误

```
Uncaught TypeError: Cannot call method 'substring' of undefined 
```

为什么它是未定义的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T00:58:54.300

回调函数的第一个参数`$.each()`是索引，第二个参数是值。

尝试：

```
$.each(data.products_and_categories.new, function(index, item){ 
```

# python - python scipy stats pareto fit：它是如何工作的

> ID：15468215
> 
> 赞同：4
> 
> 时间：2013-03-18T00:57:00.003
> 
> 标签：python, scipy, power-law

...帮助和在线文档说函数 scipy.stats.pareto.fit 将要拟合的数据集和可选的 b（指数）、loc、比例作为变量。结果是三元组（指数，位置，比例）

从相同分布生成数据应该导致拟合找到用于生成数据的参数，例如（使用 python 3 colsole）

```
$  python
Python 3.3.0 (default, Dec 12 2012, 07:43:02) 
[GCC 4.7.2] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> 
```

（在下面的代码行中省略了 python 控制台提示“>>>”）

```
dataset=scipy.stats.pareto.rvs(1.5,size=10000)  #generating data
scipy.stats.pareto.fit(dataset) 
```

然而这导致

```
(1.0, nan, 0.0) 
```

（指数 1，应该是 1.5）和

```
dataset=scipy.stats.pareto.rvs(1.1,size=10000)  #generating data
scipy.stats.pareto.fit(dataset) 
```

结果是

```
(1.0, nan, 0.0) 
```

（指数 1，应该是 1.1）和

```
dataset=scipy.stats.pareto.rvs(4,loc=2.0,scale=0.4,size=10000)    #generating data
scipy.stats.pareto.fit(dataset) 
```

（指数应为 4，loc 应为 2，比例应为 0.4）在

```
(1.0, nan, 0.0) 
```

等在调用 fit 函数时给出另一个指数

```
scipy.stats.pareto.fit(dataset,1.4) 
```

总是返回这个指数

```
(1.3999999999999999, nan, 0.0) 
```

显而易见的问题是：我是否完全误解了这个 fit 函数的目的，它的使用方式是否有所不同，或者它只是被破坏了？

备注：在有人提到像 Aaron Clauset 的网页（[http://tuvalu.santafe.edu/~aaronc/powerlaws/](http://tuvalu.santafe.edu/~aaronc/powerlaws/)）上给出的专用功能比 scipy.stats 方法更可靠之前，应该使用它：可能是真的，但它们也非常非常非常非常耗时，并且对于 10000 个点的数据集，在普通 PC 上需要很多小时（可能是几天、几周、几年）。

编辑：哦：拟合函数的参数不是分布的指数而是指数负1（但这不会改变上述问题）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T01:58:19.733

看起来您必须为`loc`and提供猜测`scale`：

```
In [78]: import scipy.stats as stats

In [79]: b, loc, scale = 1.5, 0, 1

In [80]: data = stats.pareto.rvs(b, size=10000)

In [81]: stats.pareto.fit(data, 1, loc=0, scale=1)
Out[81]: (1.5237427002368424, -2.8457847787917788e-05, 1.0000329980475393) 
```

并且猜测必须非常准确才能使拟合成功：

```
In [82]: stats.pareto.fit(data, 1, loc=0, scale=1.01)
Out[82]: (1.5254113096223709, -0.0015898489208676779, 1.0015943893384001)

In [83]: stats.pareto.fit(data, 1, loc=0, scale=1.05)
Out[83]: (1.5234726749064218, 0.00025804526532994751, 0.99974649559141171)

In [84]: stats.pareto.fit(data, 1, loc=0.05, scale=1.05)
Out[84]: (1.0, 0.050000000000000003, 1.05) 
```

希望问题的上下文会告诉你什么是合适的猜测`loc`和`scale`应该是什么。最有可能，`loc=0`和`scale=1`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T02:45:02.403

fit 方法是一种非常通用且简单的方法，它会在分布的非负似然函数 (self.nnlf) 上优化.fmin。在诸如帕累托之类的具有可以创建未定义区域的参数的分布中，通用方法不起作用。

特别是，当随机变量的值不适合分布的有效性域时，一般的 nnlf 方法会返回“inf”。“fmin”优化器不能很好地处理这个目标函数，除非你已经猜到了与最终拟合非常接近的起始值。

In general, the .fit method needs to use a constrained optimizer for distributions where there are limits on the domain of applicability of the pdf.

# c++ - ExtAudioFileOpenURL 泄漏

> ID：15468219
> 
> 赞同：2
> 
> 时间：2013-03-18T00:57:56.453
> 
> 标签：c++, c, malloc, audiotoolbox, extaudiofile

我正在打开一个音频文件来阅读它，每次我都会从这个调用者那里得到一个废弃的 malloc 块。

在一个循环中，我设置了这样的数据（在仪器中标记为内存使用率为 99.7%）`data = (short*)malloc(kSegmentSize*sizeof(short));`

`free(data);`并在每次迭代结束时像这样释放它。

我不太确定这里发生了什么，如果有任何帮助，我将不胜感激。

编辑： KSegmentSize 变化数千，从最小 6000 - 最大 50000（推测）

仪器跟踪：

![在此处输入图像描述](../Images/8cdabc08632bdf88db47f370ec4a8c12.png)

![在此处输入图像描述](../Images/e03bee8d25d9ed7e8b223f6a4da44421.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:26:04.487

没有确切的代码：

很确定你有这个问题 b/c 在 malloc 和 free 之间抛出了一些东西（你可能已经抓住了它，所以你不会退出循环）。根据这是在 C（或 Objective-C）或 C++ 代码中发生的情况，您的解决方法略有不同。

在 C++ 中，将 malloc/free 包装在 RAII 模式中，以便在展开堆栈时调用 free。

```
class MyData {
public:
    A(size_t numShorts) : dataPtr(0) { dataPtr = malloc(numShorts * sizeof(short)); }
    ~A() { free(dataPtr); }
    operator short*() { return dataPtr; }
private:
    short* dataPtr;
}

MyData data(numShorts);
// do your stuff, you can still use data as you were before due the 'operator short*'
// allow the dtor to be called when you go out of scope 
```

在 Objective-C 中，您需要使用 finally 块：

```
void* myPtr = 0;
@try { myPtr = malloc(...); }
@catch {}
@finally { free(myPtr); } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T01:46:53.650

建议您从简化开始，例如注释掉（最好使用#if 0）除 malloc/free 之外的所有代码。运行代码并确保没有废弃的堆块。然后逐渐重新引入剩余的代码，重新运行，直到遇到问题，然后调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T14:02:17.433

很抱歉回答我自己的问题，但是在注释掉代码备份堆栈跟踪之后，实际问题与未处理的文件有关。

调用`ExtAudioFileDispose(audioFile);`解决了这个隐藏的错误。Instruments 并不完全清楚，并将 mallocs 标记为泄漏。公平地说，来自 ExtAudioOpenFile 方法引用的文件中的数据的 malloc，不处理文件引用留下了泄漏。

# html - Gmail iOS 应用程序使用自定义 html 标签 - 任何信息？

> ID：15468224
> 
> 赞同：1
> 
> 时间：2013-03-18T00:58:25.407
> 
> 标签：html, ios, gmail

所以我浏览了 Gmail iOS App (2.0.1) 并看到了一些包含的 html 文件，例如 calendar.html：

```
<h1>
<?cs #trans description Title for screen in welcome sequence describing the
ability to immediately act on calendar events. (Maximum characters: ~25) ?>
Instantly RSVP</h1>
<p>
<?cs #trans description
Reference to being able to receiving emails for calendar events and being able
to act on the events immediately.
(Maximum characters: ~100 depends on line breaks) ?>
Respond to Google Calendar invites right from the app.
</p> 
```

我想知道是否有人知道 ?cs 标签的用途。我确实尝试过谷歌搜索，但我找不到任何东西。也许它是谷歌内部的东西？任何信息都会很好。我只是想了解 iOS/Google 编程风格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T01:20:10.607

`<? … ?>`是一个 XML[处理指令](http://www.w3.org/TR/REC-xml/#sec-pi)。它们不是文档数据，而是用于底层 XML 引擎。

通常，XML 引擎使用处理指令作为将控制流 ( `<? if test="condition" ?>`) 和命令 ( `<? echo "string" ?>`) 嵌入 XML 文档的一种方式。

这里看起来像是`cs`一种元命令。`cs #trans description`似乎是某种用户帮助的标签。

很抱歉，它没有直接回答您的问题，但更好地理解表单可能会帮助您了解有关该功能的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T02:01:37.637

我的猜测是，`<?cs>`在开发过程中，内部 Google 本地化工具会使用标签内的这些文本位向翻译人员解释以下文本的目的。它们可能不会在正在运行的应用程序的任何地方显示或使用。

# vb.net - 在搜索表单中添加“下一步”按钮

> ID：15468225
> 
> 赞同：1
> 
> 时间：2013-03-18T00:58:43.513
> 
> 标签：vb.net, winforms

我已经编写了一个基本的搜索表单，它搜索 TextBox 的文本并突出显示搜索词的第一个实例（如果找到），到目前为止，我有这段代码，但想以某种方式在表单上实现一个“下一步”按钮，当单击将转到下一个实例，再次单击并转到下一个等。有人可以帮助我吗？

```
Dim Search As String
        Dim Find As String
        Search = TextBox1.Text
        Find = InStr(Form1.TextBox1.Text, Search)
        If Find Then
            Form1.TextBox1.Focus()
            Form1.TextBox1.SelectionStart = Find - 1
            Form1.TextBox1.SelectionLength = Len(Search)
        Else
            MsgBox("Can't find the text:" & Environment.NewLine & Search)
        End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:04:13.737

[InStr](http://msdn.microsoft.com/en-us/library/8460tsh1%28v=vs.80%29.aspx)函数有一个参数，可让您从特定索引开始搜索。在这种情况下，它将是找到的单词的索引加上单词本身的长度。

```
Find = InStr(Find + Len(Search), Form1.TextBox1.Text, Search) 
```

在这种情况下，我们从 position 开始`Find + Len(Search)`。未经测试，但我认为这应该做你想要的。

可能是过早的优化，但您可以存储搜索词的长度，因此不必在每次`Next`按下按钮时都计算它。

# python - Python 的 Tkinter 中的图像问题

> ID：15468229
> 
> 赞同：4
> 
> 时间：2013-03-18T00:59:25.883
> 
> 标签：python, tkinter

我一直在尝试在我的 Tkinter 小部件中包含图像，但似乎没有任何效果。这是我的代码：

```
from Tkinter import *
from PIL import Image

root = Tk()
image = Image.open('images/myimage.jpg')
root.image = image
b = Radiobutton(root, text='Image',image=image,value='I')
b.pack()
root.mainloop() 
```

我得到的错误是： Trac

```
eback (most recent call last):
  File "C:/Users/.../loadimages.py", line 7, in <module>
    b = Radiobutton(root, text='Image',image=image,value='I')
  File "C:\Python27\lib\lib-tk\Tkinter.py", line 2714, in __init__
    Widget.__init__(self, master, 'radiobutton', cnf, kw)
  File "C:\Python27\lib\lib-tk\Tkinter.py", line 1974, in __init__
    (widgetName, self._w) + extra + self._options(cnf))
TclError: image "<PIL.JpegImagePlugin.JpegImageFile image mode=RGB size=402x439 at 0x2A6B080>" doesn't exist 
```

大多数互联网资源都建议保留对图像的引用以避免垃圾收集器，但我看不出我能做的比我在这里做的更多。也有关于拥有多个 Tk 实例的建议，但我只有一个。

谁有帮助，在此先感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-18T01:05:21.890

您需要将使用 PIL 打开的图像转换为`PhotoImage`：

```
from PIL import Image, ImageTk

image = Image.open("images/myimage.jpg")
photoimg = ImageTk.PhotoImage(image)
b = Radiobutton(root, image=photoimg) 
```

另请参阅：[照片图像](http://effbot.org/tkinterbook/photoimage.htm)API

# c# - 如何将从sql查询的多行值添加到cmd中

> ID：15468231
> 
> 赞同：0
> 
> 时间：2013-03-18T00:59:38.437
> 
> 标签：c#, sql, sql-server, asp-classic

我有以下一段代码。SQL 查询返回两行值。但是，当我涉及该方法时`cmd.ExecuteReader();`，应用程序仅返回第一行值。

我该如何解决这个问题？方法有问题吗`cmd.Parameters.AddWithValue`？请帮忙！

```
sqlQuery = "select name, data,data2 from surgicalfiledemo where id = '2'";
SqlCommand cmd = new SqlCommand(sqlQuery, con);
cmd.Parameters.AddWithValue("id", surgicalGridView.SelectedRow.Cells[1].Text);

SqlDataReader dr = cmd.ExecuteReader();

if (dr.Read())
{
   HttpContext.Current.Response.ClearContent();
   HttpContext.Current.Response.AddHeader("content-disposition", "attachment;filename=" + dr["name"].ToString() + ".xls");
   HttpContext.Current.Response.ContentType = "application/excel";
   Response.Charset = "";
   Response.Cache.SetCacheability(HttpCacheability.NoCache);
   Response.Write(dr["data"] + "\t");
   Response.Write(dr["data2"] + "\t");
   Response.End();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T01:07:12.720

如果您使用命令参数，则必须`@`在查询中使用参数：更改`Id='2'`为`Id=@Id`then 并在添加值`"id"`时将其更改为`@Id`.

尝试这个：

```
sqlQuery = "select name, data,data2 from surgicalfiledemo where id = @id";
SqlCommand cmd = new SqlCommand(sqlQuery, con);
cmd.Parameters.AddWithValue("@id", surgicalGridView.SelectedRow.Cells[1].Text);

//SqlDataReader dr = cmd.ExecuteReader(); use sqldata adapter to load all the data then fill to to Datatable and Bind it on GridView
SqlDataAdapter adapt = new SqlDataAdapter();
DataTable dt = new DataTable();
adapt.SelectCommand = cmd;
adapt.Fill(dt);
GridView GridView1 = new  GridView();
GridView1.DataSource = dt;
GridView1.DataBind();

// if (dr.Read()) {  .. }  this causes you to return single record only, your export to excel execute every time a row was read thats why you can only see one record.

Response.Clear();
Response.Buffer = true;
string filename="MyExportedData.xls"; 
Response.AddHeader("content-disposition","attachment;filename="+filename);
Response.Charset = "";
Response.ContentType = "application/vnd.ms-excel";
StringWriter sw = new StringWriter();
HtmlTextWriter hw = new HtmlTextWriter(sw);
GridView1.RenderControl(hw);
Response.Output.Write(sw.ToString());
Response.Flush();
Response.End(); 
```

检查此链接：[ASP.NET：将网格视图导出到 Excel](http://www.programming-free.com/2012/09/aspnet-export-grid-view-to-excel.html#.UUZ1sRdTAps)

此致

# c++ - 使用 ubuntu 的 C++ 中的 std::stoi 问题

> ID：15468233
> 
> 赞同：2
> 
> 时间：2013-03-18T00:59:50.547
> 
> 标签：c++, string

当我尝试编译下面的简单程序时收到编译错误。

`error: ‘stoi’ was not declared in this scope`

我试图将两者都包括在内`#include <string>`，但`#include <string.h>`我仍然遇到这些问题。我使用的是 Ubuntu，我不记得我是如何安装 g++ 的，但我确定它使用的是 apt-get install g++ 命令，所以我不知道我使用的是什么版本的 g++ 或 C++ 库。

```
#include <iostream>
#include <fstream>
#include <string.h>

using namespace std;

struct Data
{
    string fname;
    string lname;
    int age;
};

int main()
{
    bool toContinue = true;
    Data data;
    string buffer;
    do
    {
        try
        {
            getline(cin,data.fname);
            getline(cin,data.lname);
            getline(cin,buffer);
            data.age = stoi(buffer);
            cout<<data.fname<<" ";
            cout<<data.lname<<" ";
            cout<<data.age<<endl;
        }
        catch(std::invalid_argument)
        {
            cerr<<"Unable to parse integer";
        }
    }while(toContinue);

    return 0;
} 
```

我的目标是能够在用户为任何变量输入垃圾的情况下使用异常处理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T01:01:45.303

如果您查看[文档](http://en.cppreference.com/w/cpp/string/basic_string/stol)，您会发现它是在 C++11 中引入的。您必须使用`-std=c++11`启用这些功能的选项来编译代码，因为默认情况下代码不会编译为 C++11。

Drew 评论说，如果你使用的是 C++03，你可以使用

[`boost::lexical_cast<int>(buffer)`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_lexical_cast.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T00:36:53.857

事实证明，我需要这个才能让它工作......

```
g++ -std=c++0x ./main.cpp 
```

# java - HashMap 对象键

> ID：15468238
> 
> 赞同：1
> 
> 时间：2013-03-18T01:00:54.120
> 
> 标签：java, arrays, hashmap, key

在 Java 中，我有一个类：

```
public static class Key {

    int[] vector = null;

    private int hashcode = 0;

    Key (int[] key) {
        vector = new int[key.length];
        // here is the problem
        System.arraycopy(key, 0, vector, 0, key.length);
    }

    public int hashCode() { ... }

    public boolean equals(Object o) { ... }

} 
```

它充当`HashMap<Key, int[]> map`. 在我做的代码中：

```
// value int[] array is filled before
map.put(new Key(new int[] {5, 7}), value); 
```

但这会创建一个参数数组`{5, 7}`两次 - 第一次`Key`是在调用构造函数时，然后在该构造函数内部。

我不能使用`HashMap<int[], int[]> map`，因为那时还不清楚`hashCode`将用于什么`int[]`。所以我把`int[]`钥匙包在`Key`课堂上。

怎么可能只创建一次参数数组（可以是不同大小的）？

我不喜欢这个解决方案：

```
map.put(new Key(5, 7), value);

// and rewrite the constructor
Key (int a1, int a2) {
    vector = new int[2];
    vector[0] = a1;
    vector[1] = a2;
} 
```

因为通常参数数组可以具有各种大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T01:24:21.537

> 怎么可能只创建一次参数数组（可以是不同大小的）？

不幸的是，您不能这样做，因为没有办法使内置 Java 数组不可变。如果可以制作不可变数组，则以下内容将起作用：

```
Key (int[] key) {
    // Do not do this!!!
    vector = key;
} 
```

尽管上述方法可以在完全合作的环境中工作，但恶意用户可以传递一个数组，让密钥计算哈希，然后更改数组元素以将错误引入您的代码。这就是为什么当你决定复制传入的数组时你是绝对正确的。

您可以更改函数以接受可变数量的参数，如下所示：

```
Key (int ... key) {
    vector = new int[key.length];
    System.arraycopy(key, 0, vector, 0, key.length);
} 
```

这将允许您隐式而不是显式地创建数组：

```
map.put(new Key(5, 7), value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T01:23:51.353

使用[可变参数](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)作为参数并使用[`Arrays.copyOf()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOf%28int%5B%5D,%20int%29)：

```
Key (int... key) {
    vector = Arrays.copyOf(key, key.length);
} 
```

现在你可以用任何数量的 int 参数调用构造函数（包括没有参数），它不会导致错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T01:28:46.590

由于`arraycopy`用于从一个对象到另一个对象进行深度复制，因此在某些时候您需要创建两个对象，其中第二个对象的大小与参数数组的大小相同。所以`vector = new int[key.length];`看起来是正确的。

顺便说一句，当我编译你的代码时，我得到一个错误，`static`它不是类的有效修饰符，只有`public`,`abstract`或`final`are。

# java - 质数查找器有自己的想法吗？

> ID：15468240
> 
> 赞同：2
> 
> 时间：2013-03-18T01:01:09.977
> 
> 标签：java, numbers

我正在制作一个素数查找器，它将找到用户输入的给定数字的素数。我现在所拥有的似乎要么错过素数，要么将非素数添加到 ArrayList。我的代码对我来说似乎是合乎逻辑的，我对为什么会发生这种情况感到困惑。谁能告诉我我做错了什么？或者也许是一种更简单的方法（我觉得我过于复杂了）？一些错误示例如下： 输入 21，只有 3 显示为素数。输入 11000，出现 25 和 55（显然不是素数）。提前致谢！

```
import java.util.*;

public class PrimeFactors {

public static void main(String args[]) {
    long num;
    Scanner in = new Scanner(System.in);

    System.out.println("\n\n\nThis program finds the prime factors of a given number.\n");
    System.out.print("Please enter the number: ");
    num = in.nextLong();
    System.out.println("\nThe prime factors are: " + primeFactor(num) + "\n");
}

public static ArrayList<Long> primeFactor(long n) {
    long output = 0;
    long guess = 2;
    ArrayList<Long> primeFactors = new ArrayList<Long>();

    while (guess <= n) {
        long primes = 0;
        long i = 2;
        long x = 0;
        long rt = 1;
        long duplicate = 0;

        output = n % guess;

        // Finds the sqrt.          
        while (x <= n) {
            x = rt * rt;
            rt++;
        }

        // Finds odd factors.    
        if ((output == 0) && (guess % 2 != 0)) {
            // This divides the odd factor by an incrementing number that is not 1 or the number itself.
            while (i < rt) {
                primes = primes + (guess % i);
                // If the sum of the remainders to the division is not 0, then the number is prime.
                // I used duplicate to make sure it didn't just go through once and count as prime.
                if (primes != 0){
                    // There were duplicates, so I added them for the division later.
                    duplicate = duplicate + guess;
                    // This was used to wait for the while loop to finish, then find if the amount of times the guess went through was equal to its value - 1 and another 1 for the final number (primes are only divisible by one and itself).
                    if (i == (factors - 1)) {
                        if ((duplicate / guess) == (guess- 2)) {
                            primeFactors.add(guess);
                        }
                    }
                }
                i++;
            }
        }
        guess++;
    }
    return primeFactors;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:08:47.233

首先，而不是

```
 long x = 0;
    long z = 1;

    while (x <= n) {
        x = z * z;
        z++;
    }

    while (j < z) { 
```

你可以这样做

```
 z = (int) Math.Sqrt(n)
    while (j <= z) { 
```

然后对于每个 j 我会检查它是否将 n 除以没有余数。

如果它除以 n 没有余数，则将 n 除以 j 并将 j 添加到质因数。然后不再增加 j，而是再次尝试相同的 j，例如，对于 9，您对其因子执行 3 两次。

任何比这更复杂的事情都是不必要的 - 你会尝试每个 j 直到它不能再分成 n ，并且你总是会在由这些素数形成的复合之前尝试素数，所以你知道你最终只会得到素数.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T01:24:29.320

我会给你一些伪代码，用于简单实现（效率不高）的算法：

```
the value to factorize is N
keep going until N is equal to one
  start at 2 and find lowest number X that divides N evenly
  X is one factor
  N/X is your new N to factor 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T01:13:38.240

一个使代码更简单的建议。在你的 primeFactors 方法中，首先找出它是一个因素，我相信你已经在做，然后调用另一个方法来确定这是否是一个素数。如果那是主要添加到列表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T01:45:37.120

1.  您的变量名称不一致。`factors`特别糟糕，因为它只是一个单一因素的猜测。`guess`改为调用它。
2.  你用`factors`,`primes`和做的算术`dup`也很奇怪。你为什么要添加到`dup`or `primes`？尝试成为您自己的计算机，并为数字 12 执行您的算法；你会发现你根本没有正确的算法。
3.  `factors`您已经通过在末尾增加来排除重复因素的可能性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T01:12:26.670

好的，您的代码存在一些问题：

1.  j、x、j 和 n，命名不佳的变量使调试工作变得困难。
2.  您的电话在哪里，`System.out.println()`以便您可以看到代码中发生了什么？
3.  n 的平方根将是停止寻找直到 n 的素数的更优点。

我可以建议你看看这个：[http](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes) ://en.wikipedia.org/wiki/Sieve_of_Eratosthenes寻找素数的快速方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T02:06:17.153

您在这里所做的数学和逻辑非常奇怪，我不太了解正在发生的事情。

为此，我会投票 +1 以简化代码。这可以通过两种简单的方法来完成。第一种方法将找到一个数字的因子并通过质数检查器运行它们。如果它们是一个因素并通过了质数检查，它们就会被添加到数组中。

奖励点：通过仅搜索因子检查器和素数检查器的下半部分来提高算法的速度。逻辑是任何超过半数的值都不能成为该数字的一个因素。

更多的速度加分，增加 2 跳过所有 2 的倍数，因为它们自动不是素数。祝你好运！

```
import java.util.ArrayList;
import java.util.Scanner;

/***************************************************
 *
 * @file: PrimeFactors.java
 * @date: Mar 17, 2013
 * @author: AaronW
 */

/**
 *
 * @author AaronW
 */
public class PrimeFactors {

    public PrimeFactors() {
    }

    /**
     *
     * @param args
     */
    public static void main(String[] args) {

        long num;
        Scanner in = new Scanner(System.in);

        System.out.println("\n\n\nThis program finds the prime factors of a given number.\n");
        System.out.print("Please enter the number: ");
        num = in.nextInt();
        System.out.println("\nThe factors are: " + findFactors((double)num) + "\n");
    }

    public static ArrayList<Integer> findFactors(Double num) {
        ArrayList<Integer> factors = new ArrayList<Integer>();

        for (int x = 1; x <= num; x++) {
            System.out.println("Testing " + num + " % " + x + " = " + num % x);
            // First, let's see if a number is factor of your target number
            if (num % x == 0) {
                System.out.println(x + " is a factor");
                // Now that we know it's a factor, let's test to see if it's prime
                if (isPrime(x)) {
                    // If it's prime, add it to the ArrayList
                    System.out.println("And " + x + " is prime.");
                    factors.add(x);
                } else {
                    System.out.println("But " + x + " is not prime.");
                }
            } else {
                System.out.println(x + " is not a factor");
            }
        }

        return factors;
    }

    public static boolean isPrime(double num) {
        // Let's start by assuming everything is prime and try to prove that false
        // If we fall through the loop without proving it false, we have a prime
        boolean prime = true;

        for (int x = 2; x < num; x++) {
            // if our target number can be divided by any number between 1 and itself, it is not prime
            if (num % x == 0) {
                prime = false;
            }
        }

        return prime;
    }
} 
```

# c# - 在 C# 中为复选框编程热键

> ID：15468250
> 
> 赞同：0
> 
> 时间：2013-03-18T01:03:07.033
> 
> 标签：c#, winforms, visual-studio-2010, checkbox, hotkeys

我正在尝试制作一组​​与数字键盘相对应的九个复选框，例如，点击数字键盘上的“7”键将使左上角的复选框相应地选中或取消选中。

我无法确定的是如何表示 KeyDown 以便无论页面上当前关注什么内容都可以选择项目，以及如何将 KeyDown 指向相应的复选框以使其从被选中状态切换或未选中。谢谢您的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:50:34.337

在您的表单中，将`KeyPreview`属性设置为`True`.

为表单创建一个`KeyDown`事件处理程序。

`KeyDown`处理程序应该有类似这样的代码：

```
private void Form1_KeyDown(object sender, KeyEventArgs e)
{
    switch (e.KeyCode)
    {
        case Keys.NumPad1: 
            Toggle(checkBox1); break;
        case Keys.NumPad2:
            Toggle(checkBox2); break;
        case Keys.NumPad3:
            Toggle(checkBox3); break;
        ...
        default:
            break;
    }
}

private void Toggle(CheckBox checkbox)
{
    checkbox.Checked = !checkbox.Checked;
} 
```

如果您不喜欢 switch 语句，另一种选择是设置一个字典，将键映射到复选框。然后在您的 keydown 中，您可以检查该键是否在字典中，如果是，请获取复选框并切换它。

# node.js - 在 node-amqp (node.js) 中处理独占队列订阅时出错

> ID：15468259
> 
> 赞同：1
> 
> 时间：2013-03-18T01:04:05.713
> 
> 标签：node.js, rabbitmq, amqp, cloudamqp, node-amqp

当您订阅一个独占队列（一次只允许一个消费者）时，当队列被超额订阅（已经有一个消费者）时，node-amqp 会引发异常。

*   我试过使用 .on("error",cb) 语法。
*   我尝试过错误域（节点 0.10.0）
*   Try/catch 显然没有用

这是我的订阅线，但没什么特别的：

```
queue.subscribe({ack: true, prefetchCount: 1, exclusive: exclusive}, cbExecute).addCallback((ok) -> listeners[type] = ok.consumerTag); 
```

使用队列时会抛出未处理的异常：

```
ACCESS_REFUSED - queue 'respQ' in vhost 'brkoacph' in exclusive use 
```

查看 node-amqp 内部，我看到它们在模块内实现了一个独立的任务队列，以便在发生错误时，该任务在独立的上下文中运行。

是否有任何解决方法/修复？...或者我只是做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-19T15:50:03.743

我认为您想要做的是捕获`AMQP connection`. 正如您所提到的，`node-amqp`在不同的上下文中捕获错误，但您可以在连接上收听：

```
yourConnectionVar.on( 'error', function(err) {
  //do something
  console.log('An error occurred' + err);
}); 
```

我希望这有帮助。

干杯!

# jquery-mobile - jQuery Mobile 对话框和 Backbone js

> ID：15468265
> 
> 赞同：3
> 
> 时间：2013-03-18T01:05:09.740
> 
> 标签：jquery-mobile, backbone.js

我有一个使用 jquery mobile 的骨干应用程序。我正在尝试使用弹出对话框，但是问题是当我单击链接#popupSuccess 时，它不会激活模式，因为我认为主干正在捕获它。有任何想法吗？

这是我的模态代码

```
<a class="modalLink" id="modalSuccessTrigger" href="#popupSuccess" data-rel="popup" data-position-to="window" data-role="button" data-inline="true" data-transition="pop" data-icon="delete" data-theme="b">Success</a>

<div data-role="popup" id="popupSuccess" data-overlay-theme="a" data-theme="c" data-dismissible="false" style="max-width:400px;" class="ui-corner-all modalLinkCont">
    <div data-role="header" data-theme="a" class="ui-corner-top">
        <h1>Correct!</h1>
    </div>
    <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content" style="background-color:white">
        <h3 class="ui-title">That is correct. Tap to continue to level 2</h3>
        <a href="#" data-role="button" data-inline="true" data-rel="back" data-transition="flow" data-theme="b">Contineu</a>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T09:33:26.720

您需要以编程方式启动弹出窗口：

在您的主干视图中：

```
events: {
   'click #modalSuccessTrigger': 'openPopUp'
},

openPopUp: function(e) {
   e.preventDefault()
   $('#modalSuccessTrigger').popup('open')
} 
```

有关更多详细信息，请参阅文档：http: [//jquerymobile.com/demos/1.2.0-alpha.1/docs/pages/popup/index.html](http://jquerymobile.com/demos/1.2.0-alpha.1/docs/pages/popup/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-21T17:46:39.030

为了处理这个问题，我使用来阻止主干路由并激活标记为的链接的弹出处理`data-rel="popup"`

```
$(document).ready(function(){
  ($('a[data-rel="popup"]')).on('click', function(event) {
    event.preventDefault();
    event.stopImmediatePropagation();
    var target = $(this).attr("href");
    $(target).popup('open');
  });
}); 
```

# jquery - 在 href attr 中使用 jquery 变量

> ID：15468271
> 
> 赞同：1
> 
> 时间：2013-03-18T01:06:03.360
> 
> 标签：jquery

我正在尝试获取 jQuery 变量并将它们插入到 href 属性中。

这是 jQuery

```
$(".id_container").click(function() {
                        var item_id = $(this).find(".item").val();
                        var std_id = $(this).find(".std").val();
                        var cre_id = $(this).find(".cre").val();
                         $(location).attr('href',"link.php?item=''+item+''&stid=''+std+''&cre=''+cre+''");
                    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:10:22.130

如果你有两个单引号，你应该有一个双引号，并且最后不需要额外的引号：

```
$(location).attr('href',"link.php?item="+item+"&stid="+std+"&cre="+cre); 
```

# biopython - Biopython 中的 FASTA 文件应该使用哪种字母类型？

> ID：15468274
> 
> 赞同：1
> 
> 时间：2013-03-18T01:06:42.283
> 
> 标签：biopython

如果我使用下面链接中的 FASTA 文件，我应该在 Biopython 中使用什么字母类型？会是 IUPAC.unambiguous_dna 吗？

链接到 FASTA 文件：[http ://hgdownload.cse.ucsc.edu/goldenPath/hg19/chromosomes/?C=S;O=A](http://hgdownload.cse.ucsc.edu/goldenPath/hg19/chromosomes/?C=S;O=A)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T01:35:24.890

你读过[3.1 序列和字母](http://biopython.org/DIST/docs/tutorial/Tutorial.html#htoc17)吗？它解释了可用的不同字母，以及它们涵盖的情况。

您提供的链接中有很多序列（我们无法仔细研究）。我的建议是使用`UnambiguousDNA`. 如果四个基本核苷酸不够，解析器会抱怨，你应该选择一个更广泛的字母表。

# php - XAMPP 重命名函数

> ID：15468277
> 
> 赞同：0
> 
> 时间：2013-03-18T01:07:15.060
> 
> 标签：php

我正在尝试以这种方式编写批量重命名：

```
if ($handle = opendir('../../upload_files')) {
  while (false !== ($fileName = readdir($handle))) {
    $newName = str_replace(", ","_",$fileName);
    rename($fileName, $newName);
    $count++;
  }
  closedir($handle);
  echo $count." files renamed";
} 
```

但是当我运行脚本时，我收到一个警告：

```
Warning: rename(..,..) [function.rename]: No error in E:\WEBS\rename.php on line 6 
```

是什么导致了错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:24:30.587

如果目标文件已经存在，则 PHP 在 Windows 环境下会出现此类错误。

PHP 5.3 [https://bugs.php.net/bug.php?id=48771](https://bugs.php.net/bug.php?id=48771)存在一个已知错误，并带有类似的错误消息。

我建议尝试对您的代码进行以下修改（它基于您的代码，只是进行了一些更正）

```
$dir = "../../upload_files";
if ($handle = opendir($dir))
{
    while (false !== ($fileName = readdir($handle)))
    {
        if (!isset($count)) $count = 0;
        if ($fileName == ".." || $fileName == ".") continue;
        $newName = str_replace(", ","_",$fileName);
        copy($dir.$fileName, $dir.$newName);
        $count++;
    }
    closedir($handle);
    echo $count." files renamed";
} 
```

# c++ - /boost/lockfree/queue.hpp：错误：静态断言失败：（boost::has_trivial_destructor ：：价值）

> ID：15468278
> 
> 赞同：5
> 
> 时间：2013-03-18T01:07:23.670
> 
> 标签：c++, boost, queue, lock-free, static-assert

我正在尝试在此文件中`boost::lockfree::queue`替换[https://github.com/zaphoyd/websocketpp/blob/experimental/examples/broadcast_server/broadcast_server.cpp](https://github.com/zaphoyd/websocketpp/blob/experimental/examples/broadcast_server/broadcast_server.cpp)`std::queue`

我添加了`#include <boost/lockfree/queue.hpp>`；将行`130`, `std::queue<action> m_actions;`, 更改为`boost::lockfree::queue<action> m_actions;`; 删除了所有与锁定有关的行；并将行`103`, `m_actions.pop();`, 更改为`m_actions.pop(a);`.

在添加到项目根目录并在目录中使用's后，我`scons broadcast_server_lockfree`在项目根目录中遇到这些错误：`broadcast_server_lockfree = SConscript('#/broadcast_server_lockfree/SConscript',variant_dir = builddir + 'broadcast_server_lockfree',duplicate = 0)``SConstruct``broadcast_server``SConstruct``broadcast_server_lockfree`

```
root@server:~/websocketpp-experimental# scons broadcast_server_lockfree
scons: Reading SConscript files ...
C++11 build environment partially enabled
scons: done reading SConscript files.
scons: Building targets ...
scons: building associated VariantDir targets: build/release/broadcast_server_lockfree
g++ -o build/release/broadcast_server_lockfree/broadcast_server_lockfree.o -c -std=c++0x -Wall -Wcast-align -isystem /root/boost_1_53_0 -DNDEBUG -D_WEBSOCKETPP_CPP11_MEMORY_ -D_WEBSOCKETPP_CPP11_FUNCTIONAL_ -D_WEBSOCKETPP_CPP11_SYSTEM_ERROR_ -D_WEBSOCKETPP_CPP11_RANDOM_DEVICE_ -D_WEBSOCKETPP_NOEXCEPT_ -I. broadcast_server_lockfree/broadcast_server_lockfree.cpp
In file included from broadcast_server_lockfree/broadcast_server_lockfree.cpp:10:0:
/root/boost_1_53_0/boost/lockfree/queue.hpp: In instantiation of 'class boost::lockfree::queue<action>':
broadcast_server_lockfree/broadcast_server_lockfree.cpp:139:36:   required from here
/root/boost_1_53_0/boost/lockfree/queue.hpp:79:5: error: static assertion failed: (boost::has_trivial_destructor<T>::value)
/root/boost_1_53_0/boost/lockfree/queue.hpp:83:5: error: static assertion failed: (boost::has_trivial_assign<T>::value)
broadcast_server_lockfree/broadcast_server_lockfree.cpp: In member function 'void broadcast_server::process_messages()':
broadcast_server_lockfree/broadcast_server_lockfree.cpp:111:34: error: 'class boost::lockfree::queue<action>' has no member named 'front'
broadcast_server_lockfree/broadcast_server_lockfree.cpp:117:55: error: 'm_connection_lock' was not declared in this scope
broadcast_server_lockfree/broadcast_server_lockfree.cpp:120:55: error: 'm_connection_lock' was not declared in this scope
broadcast_server_lockfree/broadcast_server_lockfree.cpp:123:55: error: 'm_connection_lock' was not declared in this scope
In file included from broadcast_server_lockfree/broadcast_server_lockfree.cpp:10:0:
/root/boost_1_53_0/boost/lockfree/queue.hpp: In instantiation of 'boost::lockfree::queue<T, A0, A1, A2>::~queue() [with T = action; A0 = boost::parameter::void_; A1 = boost::parameter::void_; A2 = boost::parameter::void_]':
broadcast_server_lockfree/broadcast_server_lockfree.cpp:41:24:   required from here
/root/boost_1_53_0/boost/lockfree/queue.hpp:229:11: error: no matching function for call to 'action::action()'
/root/boost_1_53_0/boost/lockfree/queue.hpp:229:11: note: candidates are:
broadcast_server_lockfree/broadcast_server_lockfree.cpp:32:5: note: action::action(action_type, websocketpp::endpoint<websocketpp::connection<websocketpp::config::asio>, websocketpp::config::asio>::message_ptr)
broadcast_server_lockfree/broadcast_server_lockfree.cpp:32:5: note:   candidate expects 2 arguments, 0 provided
broadcast_server_lockfree/broadcast_server_lockfree.cpp:31:5: note: action::action(action_type, websocketpp::connection_hdl)
broadcast_server_lockfree/broadcast_server_lockfree.cpp:31:5: note:   candidate expects 2 arguments, 0 provided
broadcast_server_lockfree/broadcast_server_lockfree.cpp:30:8: note: action::action(const action&)
broadcast_server_lockfree/broadcast_server_lockfree.cpp:30:8: note:   candidate expects 1 argument, 0 provided
In file included from broadcast_server_lockfree/broadcast_server_lockfree.cpp:10:0:
/root/boost_1_53_0/boost/lockfree/queue.hpp: In instantiation of 'boost::lockfree::queue<T, A0, A1, A2>::node::node(boost::lockfree::queue<T, A0, A1, A2>::node::handle_type) [with T = action; A0 = boost::parameter::void_; A1 = boost::parameter::void_; A2 = boost::parameter::void_; boost::lockfree::queue<T, A0, A1, A2>::node::handle_type = boost::lockfree::queue<action>::node*]':
/root/boost_1_53_0/boost/lockfree/detail/freelist.hpp:82:13:   required from 'T* boost::lockfree::detail::freelist_stack<T, Alloc>::construct(const ArgumentType&) [with bool ThreadSafe = true; bool Bounded = false; ArgumentType = boost::lockfree::queue<action>::node*; T = boost::lockfree::queue<action>::node; Alloc = std::allocator<boost::lockfree::queue<action>::node>]'
/root/boost_1_53_0/boost/lockfree/queue.hpp:126:75:   required from 'void boost::lockfree::queue<T, A0, A1, A2>::initialize() [with T = action; A0 = boost::parameter::void_; A1 = boost::parameter::void_; A2 = boost::parameter::void_]'
/root/boost_1_53_0/boost/lockfree/queue.hpp:166:9:   required from 'boost::lockfree::queue<T, A0, A1, A2>::queue() [with T = action; A0 = boost::parameter::void_; A1 = boost::parameter::void_; A2 = boost::parameter::void_]'
broadcast_server_lockfree/broadcast_server_lockfree.cpp:41:24:   required from here
/root/boost_1_53_0/boost/lockfree/queue.hpp:109:52: error: no matching function for call to 'action::action()'
/root/boost_1_53_0/boost/lockfree/queue.hpp:109:52: note: candidates are:
broadcast_server_lockfree/broadcast_server_lockfree.cpp:32:5: note: action::action(action_type, websocketpp::endpoint<websocketpp::connection<websocketpp::config::asio>, websocketpp::config::asio>::message_ptr)
broadcast_server_lockfree/broadcast_server_lockfree.cpp:32:5: note:   candidate expects 2 arguments, 0 provided
broadcast_server_lockfree/broadcast_server_lockfree.cpp:31:5: note: action::action(action_type, websocketpp::connection_hdl)
broadcast_server_lockfree/broadcast_server_lockfree.cpp:31:5: note:   candidate expects 2 arguments, 0 provided
broadcast_server_lockfree/broadcast_server_lockfree.cpp:30:8: note: action::action(const action&)
broadcast_server_lockfree/broadcast_server_lockfree.cpp:30:8: note:   candidate expects 1 argument, 0 provided
scons: *** [build/release/broadcast_server_lockfree/broadcast_server_lockfree.o] Error 1
scons: building terminated because of errors. 
```

我对 C++ 几乎一无所知，并且对错误的搜索没有产生任何结果（因为我不知道我在读什么）。

`boost::lockfree::queue`如果有帮助， 这是示例。[http://boost-sandbox.sourceforge.net/doc/html/lockfree/examples.html](http://boost-sandbox.sourceforge.net/doc/html/lockfree/examples.html)

请告诉我如何纠正这个问题。

**`action`**

```
struct action {
    action(action_type t, connection_hdl h) : type(t), hdl(h) {}
    action(action_type t, server::message_ptr m) : type(t), msg(m) {}

    action_type type;
    websocketpp::connection_hdl hdl;
    server::message_ptr msg;
}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-18T01:13:45.687

从[文档](http://boost-sandbox.sourceforge.net/doc/html/boost/lockfree/queue.html)：

*T 必须有一个复制构造函数、一个普通赋值运算符和一个普通析构函数*。

因此，您的`action`课程必须如下所示：

```
class action
{
public:
    action(const action& rhs) { ... }
    //Implicitly defined destructor for itself and all member variables
    //Implicitly defined operator= for itself and all member variables

}; 
```

s 抱怨是因为你的`static_assert`析构函数并`operator=`没有被编译器隐式定义（或者这是至少一个成员变量的情况`action`）。

编辑：我已经快速浏览了 repo - 我似乎找不到`connection_hdl`，并且没有`message_ptr`in `template <typename endpoint> class server`。无论哪种方式，满足`websocketpp::connection_hdl hdl`或`server::message_ptr msg`不满足上述条件之一。仅仅“放入”一个无锁队列而不是使用 a`std::queue`可能是一项不平凡的任务，需要进行许多更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-29T21:04:09.657

上面的帖子已经很好地回答了这个问题。在这里，我将提供更多示例。富有成果的讨论提供了很多指导，请阅读它们。真正的问题是对队列模板类型的要求。为了实用，让我们看一些真实的用例。

```
namespace lkf=boost::lockfree;
vector<lkf::spsc_queue<pair<Fastq*,int>, lkf::capacity<100>>> datastore;
//lkf::queue<pair<char*,char*>, lkf::capacity<100>> pile1, pile2;  //failed assert
lkf::queue<pair<char*,char*>*, lkf::capacity<100>> pile1, pile2; 
```

代码中的第一行通过了编译器（因为它是 spac_queue），但第二行对编译器失败了（由于 boost::ASSERT）：

```
/usr/local/include/boost/lockfree/queue.hpp:99:5: error: static assertion failed: (boost::has_trivial_assign<T>::value)
     BOOST_STATIC_ASSERT((boost::has_trivial_assign<T>::value)); 
```

将 pair 转换为指针类型（第 3 行）后，编译器很高兴。

可能需要更新提升断言吗？转换为指针是一种快速技巧，可能不是最好的。

boost lockfree::queue 有三个[要求](https://www.boost.org/doc/libs/1_62_0/doc/html/boost/lockfree/queue.html)：

1.  T 必须有一个复制构造函数
2.  T 必须有一个平凡的赋值运算符
3.  T 必须有一个简单的析构函数

spsc_queue 有两个：

1.  T 必须有一个默认构造函数
2.  T 必须是可复制的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-24T10:36:38.370

`std::string`用于队列项目类型时出现此错误。

`boost::lockfree::queue<string>(10000)`

正如许多好人在[这里](https://stackoverflow.com/questions/17032725/what-does-error-c2338-boosthas-trivial-destructortvalue-mean-for-boos)和[这里](https://stackoverflow.com/questions/17452491/how-to-put-stdstring-into-boostlockfreequeue-or-alternative)的答案中指出的那样，不允许使用字符串`boost::lockfree::queue`。

它确实编译`char *`

`boost::lockfree::queue<char*>(10000)`

# python - 显示值 Django Python

> ID：15468281
> 
> 赞同：1
> 
> 时间：2013-03-18T01:07:43.853
> 
> 标签：python, django

![在此处输入图像描述](../Images/6847aab6cca4bf611fe9fc7ab1a49ae9.png)我在 Windows Vista 上使用 Python 2.7 在 Django 1.4.3 中编程。我正在尝试为用户输入功能，例如电话输入`localhost:8000/admin`，然后在首页上显示。我有`index.html` 首页：

```
<!-- Shows the label on tab. -->
{% block title %} Inicio - Bienvenidos {% endblock %}
{% block content %} 
<p> Esta es mi primera pagina en Django </p>
{% if user.is_authenticated %}
    <p> Bienvenido  {{user.username}} </p>
    {% if user.get_profile.photo %}
        <img src="/media/{{user.get_profile.photo}}" width="100px" height="100px"/>
    {% endif %}
    {% if user.get_profile.telefono %}
        <p> Numero Tel:</p> {{user.get_profile.telefono}}</p>
    {% endif %}
{% endif %}
{% endblock %} 
```

它正在提取定义在以下内容中的输入值`models.py`：

```
from django.db import models
from django.contrib.auth.models import User
# Create your models here.

class userProfile(models.Model):

    def url(self, filename):
        ruta = "MultimediaData/Users/%s/%s"%(self.user.username, filename)
        return ruta

    user = models.OneToOneField(User)
    photo = models.ImageField(upload_to = url)
    telefono = models.CharField(max_length = 30)

    def __unicode__(self):
        return self.user.username 
```

但是，在我输入`telefono`（电话）值后，首页没有显示它。我附上了我得到的首页。该数字应出现在鱼片图像下方。似乎是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T01:53:27.447

我会确保您正在编辑您认为正在编辑的页面。将第一行内容更改为：

```
<p> Esta es mi segunda pagina en Django. {{user.get_profile.telefono}}</p> 
```

并确保文本更改为 segunda。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T01:10:38.527

看起来您已将值注释掉。`<!--`并被`-->`视为 HTML 中的注释。

从技术上讲，django 模板仍在呈现该值，因为它们使用不同的注释格式，但是您的浏览器看到了一个注释标签，然后隐藏了内容。

更改此行：

```
<p> Numero Tel:</p> <!--{{user.get_profile.telefono}}</p>--> 
```

对此：

```
<p> Numero Tel:</p> {{user.get_profile.telefono}}</p> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T02:31:18.423

获取用户扩展信息：

```
View = request.user.get_profile().field_name
Template = user.userProfile.field_name 
```

所以要在模板中显示用户扩展信息，它必须是

```
{% block title %} Inicio - Bienvenidos {% endblock %}
{% block content %} 
<p> Esta es mi primera pagina en Django </p>
{% if user.is_authenticated %}
    <p> Bienvenido  {{user.username}} </p>
    {% if user.userProfile.photo %}
        <img src="/media/{{user.userProfile.photo}}" width="100px" height="100px"/>
    {% endif %}
    {% if user.userProfile.telefono %}
        <p> Numero Tel:</p> {{user.userProfile.telefono}}</p>
    {% endif %}
{% endif %}
{% endblock %} 
```

# ruby-on-rails - Coffeescript 加载但不运行代码

> ID：15468285
> 
> 赞同：0
> 
> 时间：2013-03-18T01:08:06.690
> 
> 标签：ruby-on-rails, coffeescript

我正在尝试实现 Jquery-ui 中可用的自动完成功能，作为此[railscast](http://railscasts.com/episodes/399-autocomplete-search-terms?view=asciicast)的一部分。理想情况下，我最终应该得到一个看起来像这个[github repo](https://github.com/railscasts/399-autocomplete-search-terms/blob/master/store-after-redis/app/views/products/index.html.erb)的东西。

但是我遇到了与名为“联系人”的资源相关的咖啡脚本文件的问题。

```
#app/assets/javascripts/contacts.js.coffee
jQuery ->
  $('#search').autocomplete
    source: "/search_suggestions" 
```

当我在浏览器的控制台中运行此代码时，它可以工作。但是当它在咖啡脚本文件中时，它不会。该文件在浏览器中加载。它只是不运行代码。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:06:46.193

我的猜测是您在文档就绪事件触发后以某种方式加载此文件。您可以通过执行以下操作来确认/否认此猜测：

```
setupAutocomplete = ->
  $('#search').autocomplete
    source: "/search_suggestions"

jQuery setupAutocomplete 
```

然后一旦页面加载完毕，打开控制台并手动调用该`setupAutocomplete`函数。如果一切正常，则意味着您的文档就绪回调从未为此触发，可能是因为它发生在此代码加载之前。所以调查一下。

# python - PySide Splitter 大小调整

> ID：15468287
> 
> 赞同：0
> 
> 时间：2013-03-18T01:08:15.750
> 
> 标签：python, qt, pyqt, pyside

我在拆分器中有一个`QTreeView`和一个`PlainTextEdit`水平对齐的。两个小部件占用相同的空间，我怎样才能使它比另一个更宽，但仍然能够通过拖动拆分器手柄来重新调整小部件的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:03:56.097

您可以为拆分器的列设置拉伸因子。具有较高因子的小部件将比另一个小部件占用更多空间。

[http://doc.qt.io/qt-5/qsplitter.html#setStretchFactor](http://doc.qt.io/qt-5/qsplitter.html#setStretchFactor)。

# java - jar 文件找不到图像目录

> ID：15468295
> 
> 赞同：1
> 
> 时间：2013-03-18T01:09:08.637
> 
> 标签：java, image, jar, icons, embedded-resource

我正在尝试启动一个包含程序中使用的图像的 JAR 文件。但是它找不到它们，因此标签变为空白。我该如何解决这个问题？

我是否需要 JAR 文件夹的同一文件夹中的所有图像并进入我的代码并编辑目录，或者这不起作用？

**编辑**，由此获得的图像：

```
hex19.setIcon(new ImageIcon("src/hexHouse.png")); //How the images are used. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T01:16:09.520

您的问题是您实际上是在尝试将图像作为文件获取，而 pf jar 中不存在文件。相反，您必须将图像作为资源。

IE，

```
 BufferedImage img = ImageIO.read(getClass().getResourceAsStream("imageStreamLocation.png"));
  ImageIcon icon = new ImageIcon(img);
  hex19.setIcon(icon); 
```

关键是使用正确的图像流位置。这应该是“文件”的相对路径，但相对于 jar 类文件的位置。

# c - 如何在 OS/161 中添加新的系统调用？

> ID：15468300
> 
> 赞同：0
> 
> 时间：2013-03-17T23:15:01.213
> 
> 标签：c, linux, operating-system, unix, os161

我正在尝试在我的 OS/161 代码中添加一个新的系统调用，但我无法确定在哪里添加原型。我相信您应该将其添加到内核空间和用户空间，但我不确定将原型放入哪些文件中。是否有指南解释如何在 OS/161 中添加示例系统调用?

作为测试，我试图添加一个函数，`printone()`当用户运行该程序时，它只会打印一个“1”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:28:42.500

添加另一个系统调用号，例如`SYS_print1`在定义[`callno.h`](https://www.student.cs.uwaterloo.ca/~cs350/common/os161-src-html/callno_8h-source.html#l00019)这些常量的位置或`SYS_fork`位置`SYS_read`。

找到它们用来选择调用函数的地方，看起来应该是[`mips_syscall()`](https://www.student.cs.uwaterloo.ca/~cs350/common/os161-src-html/syscall_8c-source.html#l00049)。虽然，我不确定为什么在这个版本的源代码中只`SYS_reboot`使用调用`sys_reboot()`. 此源代码参考可能不完整。该评论表明：

```
00049 mips_syscall(struct trapframe *tf)
00050 {
...
00070         switch (callno) {
00071             case SYS_reboot:
00072                 err = sys_reboot(tf->tf_a0);
00073                 break;
00074 
00075             /* Add stuff here */
00076  
00077             default:
00078                 kprintf("Unknown syscall %d\n", callno);
00079                 err = ENOSYS;
00080                 break;
00081         }
...
00108 } 
```

同样`case SYS_print1:`，在专用函数中添加您的功能并实现该功能，例如`sys_print1()`.

这应该是内核方面的。

用户模式的原型`print1()`可以[`unistd.h`](https://www.student.cs.uwaterloo.ca/~cs350/common/os161-src-html/include_2unistd_8h-source.html)与 with`read()`等一起声明。

看起来用户模式的实现`read()`可能在程序集文件中。这是合理的，因为最终它应该执行`syscall`直接在 C 中不可用的 MIPS 指令。您应该`print1()`以类似的方式实现（加载`SYS_print1`到适当的寄存器并执行`syscall`）。

# vb.net - 如何使用 LINQ（在 VB.NET 中）返回具有自联接的单个实体？

> ID：15468302
> 
> 赞同：1
> 
> 时间：2013-03-18T01:10:24.120
> 
> 标签：vb.net, linq, join

我正在尝试使用带有 JOIN 的 LINQ 查询（在 VB.NET 中）返回单个实体类（“类别”），但它不起作用。我认为要么是因为：

*   我得到一个 IEnumerable 结果集（1 个）或
*   我得到的不仅仅是加入中的第一个表的列

因为我得到了这个无效的类型转换异常：

```
 Unable to cast object of type 'System.Data.Linq.DataQuery`1[category]' 
    to type 'category'. 
```

这是我想要的 SQL（注意我不想要连接表中的任何列）：

```
 select subcat.*
      From category as cat
      join category as parentcat On cat.cat_id = cat.parent_cat_id
      Where parentcat.cat_url = 'dogs'
        And cat.cat_url = 'poodles' 
```

这是我在 LINQPad 中工作的 LINQ 代码：

```
 dim q = From cat In categories _
        Join parentcat In categories On parentcat.cat_id Equals cat.parent_cat_id _
        Where parentcat.cat_url.ToLower = "dogs" _
              And cat.cat_url.ToLower = "poodles" _
            Select categories.SingleOrDefault(function(c) c.cat_id = cat.cat_id)
   q.dumb 
```

但这在 VB.NET 中的“CategoryRepository”函数中不起作用：

```
 Public Function GetCategoryByURL(ByVal strCatURL As String, ByVal strSubCatURL As String) As category Implements ICategoryRepository.GetCategoryByURL
        Return From cat In db.categories _
                Join parentcat In db.categories On parentcat.cat_id Equals cat.parent_cat_id _
            Where parentcat.cat_url.ToLower = strCatURL.ToLower _
              And cat.cat_url.ToLower = strSubCatURL.ToLower _
            Select db.categories.SingleOrDefault(Function(C) C.cat_id = cat.cat_id)
        End Function 
```

如何使它返回“类别”类的单个实例？（我需要这种方式，因为我重载了返回单个实例的相同函数......并且有效！）我已经验证数据库是正确的，它应该返回“贵宾犬”类别。

我是 LINQ 的新手，所以我确信我做错了一些非常明显的事情，所以我很感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:28:14.693

您查询类别并返回结果集中`db.categories.SingleOrDefault(Function(C) C.cat_id = cat.cat_id)` *每一*行的语句。`IQueryable`即使它可能有 0 或 1 个结果，这始终是一个。您必须完成`SingleOrDefault()`整个查询：

```
Dim query = From cat In db.categories _
            Join parentcat In db.categories On parentcat.cat_id
                                        Equals cat.parent_cat_id _
            Where parentcat.cat_url.ToLower = strCatURL.ToLower _
            And cat.cat_url.ToLower = strSubCatURL.ToLower _
            Select cat
Return query.SingleOrDefault() 
```

# java - Arquillian JAVA EE 5 和 JBoss 4.2

> ID：15468305
> 
> 赞同：1
> 
> 时间：2013-03-18T01:10:56.730
> 
> 标签：java, testing, jboss

我现在它是应用程序服务器和 JVM 版本的一个非常奇特、无趣和旧的组合，但这是我公司现在正在使用的。我需要能够使用 JTA(TransactionManagementType.BEAN) 测试 EJB3 组件并通过 JPA 1.0/Hibernate 访问数据库

到目前为止，我一直在为此苦苦挣扎一天半，到目前为止运气很少。我在 Stackoverflow 和 JBoss 社区论坛中找到了一些答案，但所有这些都涉及使用 Java 6。我已经使用 OpenEJB（不使用 Arquillian 编写）运行了此类测试，但希望今年我们将迁移到新的应用程序服务器，在 Arquillian 中进行相同的测试以检查现在在 JBoss 4.2 上运行的 EJB 是否也可以在另一个较新的应用程序服务器（可能是 JBoss 7）中运行非常有用

有人知道有这些要求的 Arquillian 示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:49:26.700

最后，在与此进行了更多的斗争之后，我提出了一个结合 Arquillian、JAVA 5、JBoss4.2 和 JPA 的解决方案。任何有兴趣的人都可以[在这个 GitHub 小项目中找到它](https://github.com/pvm30/arquillian-jbossas-4.2)

问候

# python - 搜索 Python 列表

> ID：15468306
> 
> 赞同：4
> 
> 时间：2013-03-18T01:11:27.963
> 
> 标签：python, file, list, search

好的，我有这个代码：

```
colors = ["Red" , "Green" , "Blue" , "Pink" , "Purple" , "Cyan"]

search = str(raw_input())

found = "not"

if search in colors:
    print "Found!"
else:
    print "not Found" 
```

到目前为止，只有当您在终端中键入与列表中完全相同的字符串时，它才能在列表中找到一项，这就是问题所在。

我需要能够在终端中键入一个或两个字符并拥有它，以便它列出列表中与搜索匹配的字符串（例如：如果我要在终端中键入“P”，它将列出“Pink " 和 "Purple" 因为到目前为止它们与我的搜索匹配，但不完全匹配）

我可能忽略了一些东西，但是，有没有一种方法可以让我以这种方式搜索一个列表，而不必有超过 200 行代码（200 多行，因为我需要实现它以在列表中有超过 150 个字符串）只是为了搜索为字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T01:17:01.377

最简单的方法，使用列表推导：

```
matches = [color for color in colors if color.startswith(search)] 
```

如果你有一个很大的列表，这可能不会那么好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T01:18:17.097

你需要的是一个合适的数据结构。从您的需求描述来看，我认为[trie](http://en.wikipedia.org/wiki/Trie)就是其中之一。

您使用颜色列表构建一个 trie，然后使用用户输入搜索 trie（允许使用前缀）。[您可以在github](https://github.com/search?q=trie%20python&ref=commandbar)上找到各种实现或自己实现。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T01:19:00.843

如果性能不是问题，（例如：颜色列表很小）：

```
colors = ["Red" , "Green" , "Blue" , "Pink" , "Purple" , "Cyan"]
search = str(raw_input())
found = "not"

for color in colors:
    # or if color.startswith(search), depend on your needs
    if search in color:
        print "Found"

print "not Found" 
```

否则，使用 Trie：[http ://en.wikipedia.org/wiki/Trie](http://en.wikipedia.org/wiki/Trie)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-18T01:25:46.947

您可以使用 difflib 标准 Python 库。

**示例代码：**

```
from difflib import SequenceMatcher
colors = ["Red", "Green", "Blue", "Pink", "Purple", "Cyan"]
search = str(raw_input())
for color in colors:
    s = SequenceMatcher(None, search, color)

    if s.ratio() > 0.25:
        print color 
```

**输出：**

```
xxxx$ python foo.py 
p
Purple 
```

**笔记：**

您可以根据需要操纵匹配率。在这里，我为挖掘模式使用了 0.25 及以上的比率。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-18T01:27:29.783

使用正则表达式可以让您确定有多少文本以及需要匹配的部分。以下将仅搜索字符串的开头。

```
import re

colors = ["Red" , "Green" , "Blue" , "Pink" , "Purple" , "Cyan"]
search = re.compile("^"+str(raw_input()))
isthere=[]
for col in colors:
    if search.findall(col)!=[]:
        isthere.append(col)

if isthere==[]:
    print "Nothing there"
else:
    print isthere 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-18T01:16:56.117

```
search = str(raw_input())

matches = [s for s in colors if s.startswith(search)] 
```

然后循环匹配并打印。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-18T01:17:22.710

```
 for c in colors:
        if c[0:len(search)-1] == search:
            print "Found!" 
```

不是绝对最优雅的解决方案，但它可以完成工作。只需遍历列表并比较相关的子字符串。诚然，如果搜索字符串比颜色中的任何元素长，您可能希望将其包装在 KeyError 的 try/catch 块中。

# c# - Entity Framework 两个外键作为主键

> ID：15468307
> 
> 赞同：0
> 
> 时间：2013-03-18T01:11:59.720
> 
> 标签：c#, entity-framework

所以我正在使用实体代码最火，我有一个看起来像这样的用户类：

```
public class User
    {
        [Key]
        public string Username { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public DateTime LastModified { get; set; }
    } 
```

我正在尝试制作一个“朋友表”，无论我想出什么，我都会在创建数据库时遇到错误。这是我目前在朋友班上的：

```
public class Friend
    {
        [Key, ForeignKey("User")]
        public virtual User MyUser { get; set; }

        [Key,ForeignKey("User")]
        public virtual User MyFriend { get; set; }

        public bool IsAccepted { get; set; }
    } 
```

这是我得到的错误：

'Core.Model.Friend' 类型的属性 'MyUser' 上的 ForeignKeyAttribute 无效。在依赖类型“Core.Model.Friend”上找不到外键名称“用户”。Name 值应该是逗号分隔的外键属性名称列表。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T02:00:31.837

您需要使用该`Column`属性。通常我会使用这样的东西：

```
public class Friend
{
    [Key]
    [Column(Order = 0)]
    public int MyUserId { get; set; }

    [Key]
    [Column(Order = 1)]
    public int MyFriendId { get; set; }

    [ForeignKey("MyUserId")]
    public virtual User MyUser { get; set; }

    [ForeignKey("FriendId")]
    public virtual User MyFriend { get; set; }

    public bool IsAccepted { get; set; }
} 
```

我不确定如果将`Column`属性直接映射到导航属性会发生什么。如果您愿意，可以尝试一下，看看会发生什么.. 但以上通常对我有用。

或者，如果您更改为使用流畅的映射，您可以执行以下操作：

```
HasKey(u => new { u.MyUserId , u.MyFriendId }); 
```

# javascript - Firefox 事件目标的非 jQuery 解决方案

> ID：15468308
> 
> 赞同：0
> 
> 时间：2013-03-18T01:12:07.110
> 
> 标签：javascript, firefox

我正在尝试在学习 jQuery 之前学习 Javascript，这样我就可以在向上移动之前打下基础。

为了学习，我做了一个简单的猜谜游戏，可以在 Chrome 和 Safari 中运行，但不能在 Firefox 中运行。（我想这就是人们使用 jQuery 的原因！）。

我根据这个[答案](https://stackoverflow.com/questions/7457260/event-target-not-working-on-firefox)调整了代码。但它仍然无法在 Firefox 中运行。这是相关的代码。有任何想法吗？

```
function reportAnswer(e) {
  if(!e) e = window.event;
  questionNumber++;
  document.getElementById("myCount").innerHTML = (questionNumber + 1);
  var x = e.target || e.srcElement;
  checkAnswer();
}

function checkAnswer() {
  var thisAnswer = questionDatabase[currentQuestion].answer;
  if(event.target.id == thisAnswer) {
    document.getElementById("answer").innerHTML = ("YES! </br>" + questionDatabase[currentQuestion].photo);
    score++;
  }
  else {
    document.getElementById("answer").innerHTML = ("<img src=http://philly.barstoolsports.com/files/2012/11/family-feud-x2.png width='370' height='370'>");
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:19:33.953

您的`checkAnswer`函数使用非标准 global `window.event`。你想做两件事：

1.  像@thesystem 建议的那样向它添加一个`event`或参数。`e`
2.  确保从您的事件处理程序中传递该参数。

# facebook - Facebook 无法发送通知

> ID：15468309
> 
> 赞同：0
> 
> 时间：2013-03-18T01:12:10.133
> 
> 标签：facebook, facebook-graph-api

用户在 symfony2.1 中通过 fosfacebookbundle 登录成功

与本主题相关：[“请求此资源需要用户访问令牌。” 用于通知的 Facebook 图表](https://stackoverflow.com/questions/14043512/a-user-access-token-is-required-to-request-this-resource-facebook-graph-for-n)

我想向用户发送通知。访问令牌如下所示`...234|asdf...`。

```
$token_url = 'https://graph.facebook.com/oauth/access_token?grant_type=
                     client_credentials&client_id=' . $app_id . '&
                     client_secret=' . $app_secret;
$access_token = file_get_contents($token_url);
//After that I do a preg_split. Or for testing I print out the access token 
  and I define it manual in the php file `$access_token = '...234|asdf...';`

$userid = 12345;
$inviteMessage = 'Test_message';
$inviteMessage = urlencode($inviteMessage);
$url = "https://graph.facebook.com/" . $userid . "/notifications?access_token=" . 
                $access_token . "&template=" . $inviteMessage;
$c = curl_init($url);
// necessary so CURL doesn't dump the results on your page
curl_setopt($c, CURLOPT_POST, true);
$result = curl_exec($c);
curl_close($c);
$r = json_decode($result);
print_r($r); 
```

print_r 给了我这个：对不起，出了点问题！脸书公司

如果我直接把它放在地址行：

```
https://graph.facebook.com/12345/notifications?access_token=access_token=...234|asdf...&template=Test_message 
```

错误消息：{“错误”：{“消息”：“无效的 OAuth 访问令牌签名。”，“类型”：“OAuthException”，“代码”：190 } }

怎么了？

**更新** developers.facebook.com/docs/concepts/notifications中的href是什么意思？

# xcode - 如何在 Xcode 4.6 中禁用自动保存？

> ID：15468313
> 
> 赞同：1
> 
> 时间：2013-03-18T01:12:30.567
> 
> 标签：xcode, autosave

我试过无济于事

```
defaults write com.apple.Xcode ApplePersistence -bool NO
defaults write com.apple.dt.Xcode ApplePersistence -bool NO 
```

4.2 中的“关闭文档时要求保留更改”选项已被删除，[https://discussions.apple.com/message/20435985#20435985](https://discussions.apple.com/message/20435985#20435985)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T01:18:03.497

打开系统偏好设置->常规->“关闭文档时要求保留更改”。

从 OS X 10.8.3 开始，它仍然存在。

# numbers - 具有各种 frame_number 的 H264 切片

> ID：15468316
> 
> 赞同：0
> 
> 时间：2013-03-18T01:12:48.430
> 
> 标签：numbers, frame, h.264, slice

我正在解码 H264 视频比特流。我一开始有PPS和SPS，然后是切片，P，B，SI，SP切片。我用ffmpeg转成mp4格式，但是视频不正确（可以播放但看不清楚）。

我认为我的 I-slice 已经碎片化了。你有合并它们的想法吗？在切片中，只有 frame-begin-with-0181 的 frame_num 从 1 到 x。其他帧具有非序列 frame_num。这意味着什么？

谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:59:36.800

我已经解决了我的问题。使用碎片切片，我剪切了标题切片（例如：00000101），只留下了起始切片的标题（例如：00000181），现在我可以转换为 mp4 并观看视频：D

# module - Orchard - 在自定义模块的页面上显示小部件

> ID：15468317
> 
> 赞同：2
> 
> 时间：2013-03-18T01:12:49.620
> 
> 标签：module, widget, orchardcms

我正在为 Orchard 开发一个自定义模块。我想在我的自定义模块中的一个页面上使用小部件。

如何将小部件添加到页面（将其显示为部分视图？如何引用它？）？

目标是将主页创建为模块，当您激活它时，它将具有项目滑块小部件的所有功能 - [http://gallery.orchardproject.net/List/Modules/Orchard.Module.FeaturedItemSlider](http://gallery.orchardproject.net/List/Modules/Orchard.Module.FeaturedItemSlider)。因此，小部件将位于页面的内容部分。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T07:40:59.940

您可以通过两种方式做到这一点：

1.  在管理的模块管理中添加新的层规则。您可以使用此语法指定 url 规则 -`url("~/myurl") or url("~/myotherurl") or ...`您可以在其中指定将显示模块的多个 url。接下来，您可以将小部件添加到该图层。如果您需要在少量页面中显示该小部件，这是可以的。

2.  你可以在你的主题中添加一个新`Zone`的（假设它将被称为`MyWidgetZone`）。不要在您的 中显示此区域`Layout.cshtml`，而是在您想要使用它的模板中显示（例如在您的`Content-Page.cshtml`文件中）。要显示此区域，您将在模板中使用此语法 - `Display(Layout.MyWidgetZone)`。您接下来要做的就是将您的小部件添加到`MyWidgetZone`内部模块管理管理中，您就可以开始了..

# c# - 自定义加密

> ID：15468320
> 
> 赞同：-6
> 
> 时间：2013-03-18T01:13:13.780
> 
> 标签：c#, encryption

我正在制作一个自定义加密/解密软件。我已经写了代码：

```
 public int CountCharInStringAccordingToArray(string Text)
    {
        int Count = 0;
        foreach (char x in Text)
        {
            Count++;
        }
        return Count - 1;
    }

    public int CountCharInString(string Text)
    {
        int Count = 0;
        foreach (char x in Text)
        {
            Count++;
        }
        return Count;
    }
    public string Encrypt(string Key, string PlainText)
    {
        int[] TempKey = new int[CountCharInString(Key)];
        int[] TempText = new int[CountCharInString(PlainText)];
        int[] EncryptedInt = new int[CountCharInString(PlainText)];
        char[] EncryptedChar = new char[CountCharInString(PlainText)];
        for (int i = 0; i < CountCharInStringAccordingToArray(Key); i++)
        {
            TempKey[i] = (int)Key[i];
        }
        for (int i = 0; i < CountCharInStringAccordingToArray(PlainText); i++)
        {
            TempText[i] = (int)PlainText[i];
        }
        int Index = 0;
        for (int i = 0; i < CountCharInStringAccordingToArray(PlainText); i++)
        {
            if (Index == CountCharInStringAccordingToArray(Key))
            {
                Index = 0;
            }
            EncryptedInt[i] = TempKey[Index] + TempText[i];
            Index++;
            EncryptedChar[i] = (char)EncryptedInt[i];
        }
        return new string(EncryptedChar);
    }

    public string Decrypt(string Key, string EncryptedText)
    {
        int[] TempKey = new int[CountCharInString(Key)];
        int[] TempText = new int[CountCharInString(EncryptedText)];
        int[] DecryptedInt = new int[CountCharInString(EncryptedText)];
        char[] DecryptedChar = new char[CountCharInString(EncryptedText)];
        for (int i = 0; i < CountCharInStringAccordingToArray(Key); i++)
        {
            TempKey[i] = (int)Key[i];
        }
        for (int i = 0; i < CountCharInStringAccordingToArray(EncryptedText); i++)
        {
            TempText[i] = (int)EncryptedText[i];
        }
        int Index = 0;
        for (int i = 0; i < CountCharInStringAccordingToArray(EncryptedText); i++)
        {
            if (Index == CountCharInStringAccordingToArray(Key))
            {
                Index = 0;
            }
            DecryptedInt[i] = TempText[i] - TempKey[Index];
            Index++;
            DecryptedChar[i] = (char)DecryptedInt[i];
        }
        return new string(DecryptedChar);
    } 
```

但我的问题是当我加密时：

键 = abc123

PlainText = 大家好，你们好吗？

加密结果：§ÑÕ

当我解密时：

键 = abc123

加密文本 = §ÑÕ

解密结果：ﾟﾞﾝￆ

当我解密加密文本时，我得到的东西与“大家好，你们好吗？”完全不同。

有人可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:46:52.403

虽然其他人已经说了很多，但代码中的实际问题是在 Encrypt 和 Decrypt 函数中使用属性“Text”。在您的函数标头中，输入参数是“PlainText”和“EncryptedText”，但在您的函数主体中，您试图使用“Text”来引用它们。Text 属性属于程序的主窗口 - 无论您放入的实际文本如何，您的 Encrypt 和 Decrypt 函数都对该文本执行它们的操作。

作为 C# 中的一般规则，尽量不要让局部变量以大写字母开头。以大写字母开头的名称通常保留给属性和方法。正如您从代码中的错误中看到的那样，您引用的属性与您期望的变量完全不同。采用骆驼大小写之类的命名方案将避免此类无意引用，并允许调试器在您犯了此类错误时告诉您。

# python - 如何使用 Tkinter 改变形状的 alpha？

> ID：15468327
> 
> 赞同：10
> 
> 时间：2013-03-18T01:14:00.663
> 
> 标签：python, tkinter, alpha

我有以下代码使用 Tkinter 创建一个窗口并在其中的画布上绘制形状。

```
from Tkinter import *

class Example(Frame):

    def __init__(self, parent):
        Frame.__init__(self, parent)

        self.parent = parent 
        self.initUI()

    def initUI(self):

        self.parent.title("Colors")
        self.pack(fill=BOTH, expand=1)

        canvas = Canvas(self)

        canvas.create_oval(10, 10, 80, 80, outline="red", fill="green", width=2)
        canvas.create_oval(110, 10, 210, 80, outline="#f11", fill="#1f1", width=2)
        canvas.create_rectangle(20, 50, 300, 100, outline="black", fill="red", width=2)

        canvas.pack(fill=BOTH, expand=1)

if __name__ == '__main__':
    root = Tk()
    ex = Example(root)
    root.geometry("400x400+100+100") # WIDTHxHEIGHT+X+Y
    root.mainloop() 
```

矩形位于两个椭圆的顶部。有什么方法可以使矩形部分透明（因此可以看到椭圆的轮廓）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-18T01:33:58.187

我不完全确定，但我认为不可能将 RGBA 颜色设置为画布项的填充颜色。但是，您可以尝试该`stipple`选项：

```
canvas.create_rectangle(20, 50, 300, 100, outline="black", fill="red", width=2, stipple="gray50") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-18T02:09:15.200

您无法更改画布上项目的 alpha。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-21T05:10:17.023

一个想法是制作一个具有半透明颜色的矩形 png 图像。然后使用 create_image 而不是 create_rectangle。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-03T01:59:50.610

您无法更改 alpha，但您可以使用`stipple`常规选项获得模拟透明度`tkinter`。例如使用：

```
mycanvas.create_rectangle(X1, Y1, X2, Y2, fill=color, stipple="gray50") 
```

产量：

[![调整大小1.png](../Images/2580fe410d42c14ceb4671e83adcd535.png)](https://i.stack.imgur.com/JWqj7.png)

# jquery - jQuery：单击以隐藏元素

> ID：15468328
> 
> 赞同：3
> 
> 时间：2013-03-18T01:14:05.027
> 
> 标签：jquery, html, css

我在下面有一个小的 jQuery 函数。它基本上通过单击元素来工作`#hover-trigger`，无论是链接还是图像。这使得一个集中的 div 元素出现在屏幕中央，在这种情况下`#hover-content`。

我想知道的是，`div`当单击某个元素时，我可以在这个末尾添加什么功能以使消失再次消失？

```
$(document).ready(function()
{
    $('#hover-trigger').click(function()
    {
        $(this).next('#hover-content').slideToggle();
        $(this).toggleClass('active');                  

        if ($(this).hasClass('active')) 
            $(this).find('span').html('&#x25B2;')
        else 
            $(this).find('span').html('&#x25BC;')
    })
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T01:17:45.417

无论你想点击什么元素，告诉它隐藏 div。

```
$("#clickMe").click(function(){

$("#divToHide").hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T01:17:57.430

尝试：

```
$('#hide-trigger').click(function(){
    $('.avtive').slideToggle();
    $('.active').toggleClass('active');
}); 
```

还是我错过了什么？

# python - 是否可以在我的 ruby on rails 应用程序旁边的 heroku cedar 堆栈上将 python 脚本部署到 /cgi-bin/？

> ID：15468330
> 
> 赞同：3
> 
> 时间：2013-03-18T01:14:16.717
> 
> 标签：python, ruby-on-rails, heroku, cgi, cgi-bin

现在我将 RoR 应用程序部署到乘客 + apache2，并且由于遗留要求，我在 apache /cgi-bin/ 中使用了 python .cgi 脚本。

是否可以使用 /cgi-bin/ 中的脚本将 rails 应用程序部署到 heroku？

谢谢！

# delphi - Delphi 自动格式化源损坏匿名程序

> ID：15468331
> 
> 赞同：6
> 
> 时间：2013-03-18T01:14:26.263
> 
> 标签：delphi, formatting, delphi-xe

昨天我发现了 Delphi 中的 Format Source 功能，它为我节省了很多时间。

但是，我发现它破坏了匿名程序的布局。有没有可以改善这个结果的设置？

例如，如果我有以下代码：

```
procedure TServerThread.cbUpdateStreamProgBar(Precentage: Integer);
begin
  Synchronize(
    procedure
    begin
      FrmMain.StreamProgressBar.StepBy(Precentage);
    end);
end; 
```

在我自动格式化源代码后，它被折叠如下：

```
procedure TServerThread.cbUpdateStreamProgBar(Precentage: Integer);
begin
  Synchronize( procedure begin FrmMain.StreamProgressBar.StepBy
    (Precentage); end);
end; 
```

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:21:57.060

如评论中所述，您必须升级到较新版本的 Delphi。XE2 中的自动源格式化程序适用于匿名方法。

作为替代方案，您可以尝试[Experimental GExperts IDE PlugIn](http://www.dummzeuch.de/delphi/gexperts/english.html)。如果格式不正确，有源代码可以添加自己的样式。

另请参阅[`Delphi code formatter`](https://stackoverflow.com/q/402737/576719)。

* * *

更新，想一想，有一个解决方法。不过有点乏味。通过选择源的部分，只有选择将通过按`ctrl`+格式化`D`。

# r - 如何在 R 中获得正确的模拟

> ID：15468336
> 
> 赞同：0
> 
> 时间：2013-03-18T01:14:46.263
> 
> 标签：r

问题：
假设以下随机数表中的数字对应于到某大型工厂上班的人员。让 0,1 和 2 是吸烟者，而 3-9 是不吸烟者。在多次到达后，计算吸烟者的总相对频率。

这是我的 R 代码，用于模拟吸烟者的总相对频率。

```
simulation<-function(k){
    x<-round(runif(k)*10)
    return  (length(x[x<3])/k)}

> simulation(100)
[1] 0.27
> simulation(1000)
[1] 0.244
> simulation(10000)
[1] 0.2445
> simulation(100000)
[1] 0.24923 
```

为什么我不能得到结果 0.3？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T01:48:35.287

如果您只想在数字 0、1、...、9 上获得离散均匀分布，那么只需使用 sample

```
sample(0:9, k, replace = TRUE) 
```

使用您现在拥有的代码，您实际上得到 0 或 10 的概率为 0.05，得到 1-9 的概率为 0.10。

# angularjs - 带有声音管理器的 angularjs，在加载时更新 DOM

> ID：15468337
> 
> 赞同：1
> 
> 时间：2013-03-18T01:14:47.037
> 
> 标签：angularjs, soundmanager2

我是 Angularjs 的新手，我正在尝试使用 soundManager 库创建一个简单的播放器。

我面临的问题是关于在声音加载/播放期间更新 DOM。

soundManager`Sound`对象公开了一些动态属性，例如`bytesLoaded`or `position`，我试图弄清楚如何将它们绑定到 DOM。

我尝试过类似的东西

```
<span ng-bind="sound.bytesLoaded"></span> 
```

where`sound`是附加到 root 的声音对象的实例`$scope`，但似乎 DOM 仅以这种方式更新一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T05:24:21.787

问题可能`sound.bytesLoaded`是在非角度世界中更新，例如加载字节的回调函数或一些类似的非角度世界的回调方法。

要在非角度世界中更新模型值时更新视图，您可能需要`$scope.$apply`从 SM2 的回调方法中调用该方法。

一些伪代码：

```
sound.on('bytesLoaded', function(bytesLoaded){
  // Imagine you have some similar kind of the callback in SM2,
  // where you will be updating the sound.bytestLoaded property.
  sound.bytesLoaded = bytesLoaded;
  $scope.$apply(); // please make sure you call have this line
                   // where you are updating the bytesLoaded property. 

}) 
```

# javascript - $ 未在 jsfiddle 中定义

> ID：15468340
> 
> 赞同：8
> 
> 时间：2013-03-18T01:15:11.677
> 
> 标签：javascript, jsfiddle

假设我有以下 html：

```
<div id="test1">hi</div>
<a href="#" onclick="showDiv()">click here</a> 
```

和javascript：

```
function showDiv() {
    $("#test1").hide();
} 
```

当我在 jsfiddle 上尝试时，它返回：

> $ 未定义

我错过了 jsFiddle 中的一些设置吗？

谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-18T01:17:19.593

这表明您没有从屏幕左侧选择一个 jQuery 库。

![JSFiddle](../Images/e5fe26c71e7db9aeda0f55766e391f94.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-05-26T23:16:05.220

这些答案是旧的，对于任何寻找更新版本的人来说，下拉菜单现在位于 jsfiddle 中 javascript 窗口右上角的 Javascript 一词旁边的齿轮上。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-12-16T20:22:06.200

当前（2015 年 12 月）版本的 jsfiddle 的屏幕截图：

[![在此处输入图像描述](../Images/a0a356298981a6dae7bb99af25524659.png)](https://i.stack.imgur.com/oldEO.jpg)

我也在这个愚蠢的错误上浪费了很多时间——现在通过 JavaScript 窗格中的“JAVASCRIPT *”按钮选择框架和扩展！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-04T06:29:27.363

如果有人在 2017 年阅读此书，请确保使用**https**协议添加 jQuery[链接。](https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js)这将被添加到页面左侧的外部资源选项卡中。

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T01:25:38.943

要么做@Drew 和@James 展示的内容。

如果您仍然遇到问题（我知道我前几天做过），您可以从 CDN 库添加外部资源

“ [http://code.jquery.com/jquery-1.9.1.min.js](http://code.jquery.com/jquery-1.9.1.min.js) ”

祝你好运 ！

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-18T01:27:17.023

`$("#test1").hide();`

以上未定义意味着 $

例子。

`jQuery(document).ready(function($) { $("#test1").hide();` } `

`jQuery(document).ready(function(IsNowDefined) // just for explanation IsNowDefined("#test1").hide();`**

# c++ - C++中的数据库问题

> ID：15468341
> 
> 赞同：0
> 
> 时间：2013-03-18T01:15:20.880
> 
> 标签：c++, database, void

在过去的 8 个小时里，我一直在搞乱这个程序，我不知道该往哪里走。很抱歉我的代码是外语的，我尽力用英语评论它。我终于设法调试了它。但我几乎没有问题。1）如何打印前 5 行（txt 中的前 5 行失败）然后再打印前 5 行？下面列出了我相当可悲的尝试。示例：起初你有 Memento，教父。你打印下五个教父2，肖申克的救赎，莱昂，苦乐参半，Se7en。现在前5个：纪念品，教父，教父2，肖申克的救赎，莱昂 2）如何在程序中使用字符而不是数字来制作菜单? 3）我真的很傻吗？请老实回答。我现在休息一下，睡一觉，早上会看回复，

```
#include <iostream> 
#include <string> 
#include <fstream> 

using namespace std; 

void sisend(); /*input*/
string valik(); /*choice*/
void kogukuvand(); /* the whole display of the database */
void valjumine();    /* program quit*/ 
void sisendvoivaljumine(); /*quiting with output to file or not*/
void viisjuurde(); /* input further 5 lines from the file */
void viismaha();    /* input previous 5 lines from the file*/

int main() 
{ 

         system ("title Filmide andmebaas"); /*Movie database*/
         system ("cls"); 
        int valik; 
         cout << "Vajuta klahv 'j',kui tahad naha jargmist 5 kirjet."<< endl; /* j to get extra 5*/
         cout << "Vajuta klahv 'e',kui tahad naha eelmist 5 kirjet."<< endl;  /* e for previous 5 lines */
         cout << "Vajuta klahv 'v',kui tahad lopetada programmi taitumist."<< endl; /* v for the output */
     cin >> valik; 

switch (valik)   {                   /*choice*/

          case 1:
                  viisjuurde(); 
                  break; 
          case 2:
                 viismaha(); 
                 break; 
          case 3: 

                 sisendvoivaljumine(); 
                 break; 
                 }  
                 }
void viisjuurde() 
{ 
      ifstream filmike("andmebaas.txt"); 
      int n, sum = 5;
  while (filmike >> n) {
      sum += n;

      string film; 
      string vaadatud; 
     int aasta; 
     long int hinne; 
      system ("CLS"); 
      cout << "Kogu filmide andmebaas"<<endl; 
     cout << "Film" << "  " << "Aasta" << "  " <<"Hinne"<< "  " << "Vaadatud" << endl; 
        cout << "------------------------------" << endl; 
         while (filmike>> film >> aasta >> hinne >> vaadatud)  
  { 
        cout << film << "  " << aasta << "  " << hinne << "  " << vaadatud << endl;  
  } 
      system ("pause");  
      cin.get(); 
      main(); 

  }  
}
  void viismaha() 
{ 
      ifstream filmike("andmebaas.txt"); 
      int n, sum = -5;
  while (filmike >> n) {
      sum += n;
  }
      string film; 
      string vaadatud; 
     int aasta; 
     long int hinne; 
      system ("CLS"); 
      cout << "Kogu filmide andmebaas"<<endl; 
     cout << "Film" << "  " << "Aasta" << "  " <<"Hinne"<< "  " << "Vaadatud" << endl; 
        cout << "------------------------------" << endl; 
         while (filmike>> film >> aasta >> hinne >> vaadatud)  
  { 
        cout << film << "  " << aasta << "  " << hinne << "  " << vaadatud << endl;  
  } 
      system ("pause");  
      cin.get(); 
      main(); 

  } 
void sisend() /* user input */
{ 
     string nimi; 
     int aasta; 
     long int hinne; 
     string vaadatud; 
     ofstream lisafilm("andmebaas.txt", ios::app); 
     cout <<"Sisestage filmi nimi." << endl;  /*Enter film's name */
     cin >> nimi; 
     string film;

     cout << "Sisestage filmi ilmumisaasta." << endl;  /* Enter film's year */
     cin >> aasta;     

     cout << "Sisestage filmi hinne." << endl;  /* Enter film's rating */
     cin >> hinne; 

     cout << "Kas olete filmi juba vaadanud?" << endl;  /* Has the user seen the movie already*/
     cout << "Vastake 'Jah' voi 'Ei'" << endl; 
     cin >> vaadatud; 
cout << film << "  " << aasta << "  " << hinne << "  " << vaadatud << endl;  

lisafilm<< nimi << "  " << aasta << "  " << hinne<< "  " << vaadatud << endl;  
lisafilm.close();  
main();

 cout << "Aitah kasutamast andmebaasi." << endl; 
 system("pause"); 
 cin.get (); 
} 

 void valjumine() /*quiting without output */
{  
 system("CLS"); 
 cout << "Aitah kasutamast andmebaasi." << endl; 
 system("pause"); 
 cin.get (); 
  } 
void kogukuvand()  /* the whole movie database*/
{ 
      ifstream filmike("andmebaas.txt"); 
      string film; 
      string vaadatud; 
     int aasta; 
     long int hinne; 
      system ("CLS"); 
      cout << "Kogu filmide andmebaas"<<endl; 
     cout << "Film" << "  " << "Aasta" << "  " <<"Hinne"<< "  " << "Vaadatud" << endl; 
        cout << "------------------------------" << endl; 
         while (filmike>> film >> aasta >> hinne >> vaadatud)  
  { 
        cout << film << "  " << aasta << "  " << hinne << "  " << vaadatud << endl;  
  } 
      system ("pause");  
      cin.get(); 
      main(); 

  } 
void sisendvoivaljumine() 
{ 
     int valik2; 
     system ("CLS"); 
     cout << "Vajuta klahv 'j',kui tahad salvestada kirje ja v2ljuda programmist." << endl;   /* output new movie to file and quit*/
     cout << "Vajuta klahv 'e',kui ei taha salvestada kirje ja v2ljuda programmist." << endl;  /*just quit, without any output to file*/
     cout << "Vajuta klahv 'k',kui tahad naha kogu filmide andmebaasi." << endl;  /* display the whole movie database*/
     cin >> valik2;

     switch (valik2) 
     { 

        case 1:
                 sisendvoivaljumine(); 
                 break; 
                 sisend(); 
                 break; 
        case 2:
                 valjumine(); 
                 break; 
        case 3: 
                 kogukuvand(); 
                 break; 

} 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:41:54.873

一些提示：

1.  根据通用约定缩进和格式化您的代码。它使您（以及其他所有人）更容易阅读和调试。

2.  您正在递归调用 main() 。不要那样做。改为在菜单开关周围使用循环。

3.  从文件中读取行的一种很好的故障保护方法是使用 getline()。与 istringstream 结合以从行中读取单个值：

    ```
    ifstream infile("somefile.txt");
    string line;
    while ( getline(infile, line) ) // read infile until eof
    {
        istringstream iss(line); // create stream from line data
        string a, b, c, d;

        iss >> a >> b >> c >> d; // read just as from cin
        cout << a << "," << b << "," << c << "," << d << endl;
    } 
    ```

4.  如果您读取整数，则需要验证读取是否成功（除非您确定文件在您读取的位置包含数字）：

    ```
    int n;
    if (iss >> n)
    {
        // read OK
    }
    else
    {
        // read failed
        infile.clear();
        string junk;
        infile >> junk;
        cout << "ERROR: bad data was:" << junk << endl;
    } 
    ```

5.  要在菜单中使用字符，您可以使用 char 数据类型。这是个好主意，因为 char 输入不会失败：

    ```
    char choice;
    cin >> choice;
    switch (choice)
    {
        case '1':
        {
            // do something
            break;
        }
        case 'A':
        {
            // do something
            break;
        }
    } 
    ```

6.  请注意，`sisendvoivaljumine`当您选择该选项时，它会递归调用自身。由于可以无限次地反复选择菜单，因此最好使用循环来重复菜单。

您想阅读上述主题。检查[http://www.cplusplus.com](http://www.cplusplus.com)。调试时，请确保您确切知道程序在每个点执行了哪些行。添加清晰的调试输出以帮助您。

# ios - 如何解决这个变异错误？

> ID：15468342
> 
> 赞同：0
> 
> 时间：2013-03-18T01:15:32.140
> 
> 标签：ios, objective-c, nsmutablestring

我收到此错误：

`*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Attempt to mutate immutable object with replaceCharactersInRange:withString:'`

但我无法弄清楚我正在变异的不可变对象。

```
 NSRange subRange = [self.label.text rangeOfString: @"="];
        int numA = 5;
        int numB = 3;

        NSMutableString *mixed = [NSString stringWithFormat: @"%i %i", numA, numB];

        NSMutableString *string = [NSString stringWithString: self.label.text];

        subRange = [string rangeOfString: @"="];

        if (subRange.location != NSNotFound)
            [string replaceCharactersInRange:subRange withString:mixed]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T01:19:19.453

您的`NSMutableString`创建调用未正确平衡。您向编译器承诺您正在创建一个`NSMutableString`，但您要求一个`NSString`创建一个实例。

例如：

`NSMutableString *mixed = [NSString stringWithFormat: @"%i %i", numA, numB];`

需要是：

`NSMutableString *mixed = [NSMutableString stringWithFormat: @"%i %i", numA, numB];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T01:19:52.670

你`NSMutableString`的 s 实际上是`NSString`. 这是运行时详细信息，但至少应该对这些行发出警告。改成：

```
NSMutableString *string = [self.label.text mutableCopy]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T01:19:14.573

您需要创建一个`NSMutableString`这样的：

```
[NSMutableString stringWithString: self.label.text]; 
```

# java - 按深度加权的整数二叉树中的总和值

> ID：15468346
> 
> 赞同：1
> 
> 时间：2013-03-18T01:15:54.220
> 
> 标签：java, recursion, binary-tree

这是我的参考树：

```
 3
   / \
  5   2
 /   / \
1   4   6 
```

这是递归方法的预期输出：

```
(1*3) + (2 * (5 + 2)) + (3 * (1 + 4 + 6)) = 50 
```

...这是我到目前为止的代码：

```
public int depthSum()
{
    int depth = 1;
    return depthSum(overallRoot, depth);
}

public int depthSum(IntTreeNode someNode, int someDepth)
{
    if(someNode == null)
    {
        return 0;
    }
    else
    {
        return someDepth * someNode.data + //some recursion
    }
} 
```

我知道我可能不得不打电话给自己并增加一些深度，但我似乎无法做到这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T01:18:43.597

大概你的意思是：

```
return someDepth * someNode.data +
       depthSum(someNode.left, someDepth+1) +
       depthSum(someNode.right, someDepth+1); 
```

# javascript - 在 AngularJs 中调用另一个指令的控制器

> ID：15468350
> 
> 赞同：0
> 
> 时间：2013-03-18T01:16:28.597
> 
> 标签：javascript, angularjs

如何在同一元素的另一个指令中从 $apply 引用指令的控制器功能？例子：

```
<myelement hint="myelement.controller.getMe()">hoverMe</myelement>

app.directive("myelement", function () {
    return {
        restrict: "E",
        controller: function ($scope) {
            this.getMe = function () {
                return "me";
            };
        }
    }
});

app.directive("hint", function () {
    return {
        restrict: "A",
        controller: function ($rootScope) {
          this.showHint = function (getMsg) {
            alert($rootScope.$apply(getMsg)); //what should be written here?
          }
        },
        link: function (scope, element, attrs, controller) {
            element.bind("mouseenter", function () {
              controller.showHint(attrs.hint);
            });
        }
    }
}); 
```

资料来源：[http ://plnkr.co/edit/9qth9N?p=preview](http://plnkr.co/edit/9qth9N?p=preview)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:24:00.390

[使用 require （在此处](http://docs.angularjs.org/guide/directive)阅读更多信息）。

```
app.directive("hint", function () {
  return {
    restrict: "A",
    require: ["myelement", "hint"],
    controller: function ($scope) {
      this.showHint = function (msg) {
        alert($scope.$apply(msg)); //what should be written here?
      }
    },
    link: function (scope, element, attrs, ctrls) {
        var myElementController = ctrls[0],
            hintController = ctrls[1];

        element.bind("mouseenter", function () {
          hintController.showHint(myElementController.getMsg());
        });
    }
  }
}); 
```

* * *

**更新（关于使提示通用，请参阅下面的评论）**

为了使 Hint 指令通用，你可以使用 $scope 作为它们之间的媒介。

```
app.directive("myelement", function () {
 return {
    restrict: "E",
    controller: function ($scope) {
        $scope.getMe = function () {
            return "me";
        };
    }
 }
}); 
```

```
<myelement hint="getMe()">hoverMe</myelement> 
```

唯一的变化是`getMe`消息没有设置在控制器 ( `this.getMe`) 中，而是设置在 $scope ( `$scope.getMe`) 中。

# python-3.x - 如何从具有多行的文件创建字典

> ID：15468351
> 
> 赞同：0
> 
> 时间：2013-03-18T01:16:29.977
> 
> 标签：python-3.x

我正在尝试从文件中的多行创建字典，例如

```
grocery store
apples
banana
bread

shopping mall
movies
clothing stores
shoe stores 
```

我要做的是让每个部分（即杂货店和购物中心）的第一行成为键和下面的所有东西（分别是苹果、香蕉、面包和电影、服装店、鞋店）的值。我一直在摆弄 readline 方法 + while 循环，但我无法弄清楚。如果有人知道，请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:04:08.737

@minopret 已经给出了一个对教学有用的答案，并且对于初学者来说很重要。从某种意义上说，甚至一些看起来更复杂的方法也经常在幕后做这件事——我的意思是使用一种状态机——所以了解这一点很重要。

但是为了它，我将描述一个更高级别的方法。有一个方便的功能`itertools.groupby`可以将序列分组为连续的组。在这种情况下，我们可以通过一堆不全为空的行来定义一个组——`bool(line)`如果`False`该行为空，`True`否则，然后`dict`从它们构建一个。

```
from itertools import groupby

with open("shopdict.txt") as fin:
    stripped = map(str.strip, fin)
    grouped = (list(g) for k,g in groupby(stripped, bool) if k)
    d = {g[0]: g[1:] for g in grouped} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T01:28:38.547

一种解决方案是将布尔值存储在一个变量中，以确定您是否在一个部分的开头。我不想放弃令人兴奋的（？）结局，但你可以从`is_first=True`.

好吧，我想我还是想放弃结局。这就是我的想法，或多或少：

```
with open(fname) as f:
    content = f.readlines()

is_first = True
d = {}

for line in content:
    if line == '\n':
        is_first = True
    elif is_first:
        key = line
        is_first = False
    else:
        if key not in d:
            d.put(key, '')
        d.put(key, d.get(key) + line)
        is_first = False 
```

我发现以这种方式规划代码更容易。当然，你也可以在没有`is_first`变量的情况下解决这个问题，特别是如果你已经完成了使用`is_first`变量的练习。我认为以下是正确的，但我并没有非常小心：

```
with open(fname) as f:
    content = f.readlines()

d = {}

while content:
    key, content = content[0], content[1:]
    if key != '\n':
        value, content = content[0], content[1:]
        while value != '\n':
            if key not in d:
                d.put(key, '')
            d.put(key, d.get(key) + value)
            value, content = content[0], content[1:] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T10:33:28.780

```
from itertools import groupby
with open("shopdict.txt") as fin:
    stripped = map(str.strip, fin)
    d = {k: g for b, (k, *g) in  groupby(stripped, bool) if b} 
```

这是一种只使用`for`循环的方法

```
d={}
with open("shopdict.txt") as fin:
    for key in fin:
        key = key.strip()
        d[key] = []
        for item in fin:
            if item.isspace():
                break
            d[key].append(item.strip()) 
```

# php - 将字符串转换为星号

> ID：15468352
> 
> 赞同：0
> 
> 时间：2013-03-18T01:16:53.447
> 
> 标签：php

我在一个基于 php 的系统上工作。它的功能之一是允许用户下载一个包含我数据库中一个表中所有信息的 excel 文件。我的问题是，该信息的一个数据被分类给其他用户。因此，我想将该数据的输出转换为星号字符串。

```
<?PHP

 //MySQL Database Connect
 include 'datalogin.php'; 

 function cleanData(&$str)
 { 
 $str = preg_replace("/\t/", "\\t", $str); 
 $str = preg_replace("/\r?\n/", "\\n", $str); 
 if(strstr($str, '"')) $str = '"' . str_replace('"', '""', $str) . '"'; 
 }
 # filename for download 
$filename = "website_data_" . date('Ymd') . ".xls"; 
 header("Content-Disposition: attachment; filename=\"$filename\""); 
 header("Content-Type: application/vnd.ms-excel");  
 $flag = false;

 //$result = pg_query("SELECT * FROM data_mapping ORDER BY CE_Hostname") or die('Query     failed!'); 
/*$query = "SELECT * FROM data_mapping";

while(false !== ($row = pg_fetch_assoc($result))) {  

//while(false !== ($row = pg_fetch_assoc($result))) {  

//$result=mysql_query($query);

$row=mysql_fetch_array($result);
$row=mysql_fetch_assoc ($result);

//$row=$row['Cust_Segment'];
// foreach($data as $row) 

 # display field/column names as first row
 if(!$flag) { 
 echo implode("\t", array_keys($row)) . "\r\n"; 

 $flag = true;  
 }
 array_walk($row, 'cleanData'); 
 echo implode("\t",($row)) . "\r\n";  

 }
 */

 $sql = 'SELECT CE_Hostname, Cust_Segment, Cust_Site_Name, CE_WAN_IP_Addr,     CE_Bkp_IP_Addr, Cust_Name, Svc_Type, com_string FROM data_mapping';

 $result = mysql_query($sql);

 if (!$result) {
    echo "DB Error, could not query the database<br>";
    echo 'MySQL Error: ' . mysql_error();
    exit;
    }
echo "Hostname\t Group/System\t Site Name\t IP ADDR\t BKP IP ADDR\t System Name\t     Device Type\t Comm_String\r\n";
     while ($row = mysql_fetch_assoc($result)) {
    echo implode("\t",($row)) . "\r\n";  
    }

 mysql_free_result($result);

//exit; 

 ?> 
```

我只想转换 comm_string 结果。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:22:56.060

```
$sql = 'SELECT CE_Hostname, Cust_Segment, Cust_Site_Name, CE_WAN_IP_Addr,     CE_Bkp_IP_Addr, Cust_Name, Svc_Type, com_string FROM data_mapping'; 
```

可以简单地更新为不包括分类字段

```
$sql = 'SELECT CE_Hostname, Cust_Segment, Cust_Site_Name, CE_WAN_IP_Addr,     CE_Bkp_IP_Addr, Cust_Name, Svc_Type FROM data_mapping'; 
```

或者，如果您仍然想在 PHP 代码中不做任何更改的情况下显示一些价值，那么您可以这样做

```
$sql = 'SELECT CE_Hostname, Cust_Segment, Cust_Site_Name, CE_WAN_IP_Addr,     CE_Bkp_IP_Addr, Cust_Name, Svc_Type, 'SECRET' FROM data_mapping'; 
```

然后这将显示`SECRET`而不是该代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T01:29:21.087

尝试这个：

```
while ($row = mysql_fetch_assoc($result))
{
    $row['Comm_String'] = preg_replace( '/./', '*', $row['Comm_String'] );
    echo implode("\t",($row)) . "\r\n";  
} 
```

# python - 使用给定字符串更改列表

> ID：15468358
> 
> 赞同：1
> 
> 时间：2013-03-18T01:17:14.160
> 
> 标签：python, string, list, python-3.x

在 Python 3 上，我正在尝试编写一个函数，该函数`find(string_list, search)`将字符串列表`string_list`和单个字符串作为参数，并返回包含给定搜索字符串`search`的所有字符串的列表。`string_list`

所以`print(find(['she', 'sells', 'sea', 'shells', 'on', 'the', 'sea-shore'], 'he'))` 会打印：

```
['she', 'shells', 'the'] 
```

这是我到目前为止所尝试的：

```
def find(string_list, search):
    letters = set(search)
    for word in string_list:
        if letters & set(word):
            return word
    return (object in string_list) in search 
```

跑步`print(find(['she', 'sells', 'sea', 'shells', 'on', 'the', 'sea-shore'], 'he'))`

我所期望的=`[she, shells, the]`

我得到了什么=`[she]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T02:00:24.647

您的代码示例的主要问题是您只能从函数返回*一次*，此时函数停止执行。这就是为什么你的函数只返回一个值。

如果您希望返回多个值，则必须返回一个容器对象，例如 a`list`或 a `set`。如果您使用列表，以下是您的代码的外观：

```
def find(string_list, search):
    letters = set(search)
    result = [] # create an empty list
    for word in string_list:
        if letters & set(word):
            # append the word to the end of the list
            result.append(word)
    return result 
```

这里的`if`测试实际上并没有完全按照您的问题陈述所要求的那样做。由于 a`set`是一个无序集合，因此该`&`操作只能测试两个集合是否有任何共同的元素，而不是它们以与输入相同的顺序出现。例如：

```
>>> letters = set("hello")
>>> word = set("olleh")
>>> word & letters
set(['h', 'e', 'l', 'o']) 
```

如您所见，运算符返回一个集合，其元素是两个集合之间共有的元素。由于一个集合`True`是否包含任何元素，这实际上是测试搜索字符串中的所有字母是否出现在给定项目中，而不是它们以给定顺序一起出现。

更好的方法是直接使用`in`运算符测试字符串，该运算符（当应用于字符串时）按顺序测试一个字符串是否是另一个字符串的子字符串：

```
def find(string_list, search):
    result = []
    for word in string_list:
        if search in word:
            result.append(word)
    return result 
```

由于这种迭代列表中的每个项目并对其进行测试的模式非常普遍，Python 提供了一种更短的方法来编写它，称为[列表推导](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)，它允许您在一个表达式中完成整个事情：

```
def find(string_list, search):
    return [word for word in string_list if search in word] 
```

这与前面的示例一样执行，但更简洁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T01:40:03.563

你可以这样做：

```
def find(string_list, search):
    return [s for s in string_list if search in s] 
```

# c - 重新分配和自由

> ID：15468362
> 
> 赞同：0
> 
> 时间：2013-03-18T01:17:21.547
> 
> 标签：c, arrays, dynamic

```
 double * copyTemp=NULL;
    double * output= malloc(sizeof(double*)*MallSize);
    double test1[] = {1.2,2.2,3.1};
    double test2[]={ 0.1,0.2,0.3,0.5,0.7,1.1,1.2,2.2};
    int i=0;
    int j=0;
    addArrayInOrder(test1 ,test2,output , &counter,&i , &j,size1,size2);
    ShrinkMemory ( MallSize,  counter, output ,  copyTemp );
    free(output); <- this part crashes for some reason
    return 0; 
```

我遇到的问题是，有时当我调用免费程序时，程序就会兑现。我在这段代码中没有看到任何错误，因为我已经将 temp 设置为 NULL，所以只有一件事指向数组是 ans 指针。所以我应该可以在程序结束时调用 free 来释放内存。

该功能看起来像

```
void addArrayInOrder(double *array1, double *array2, double *final, int *finalCounter, int *arry1Counter, int *array2Counter, int ArrSize1, int ArrSize2)
{

    while (*arry1Counter < ArrSize1 && *array2Counter < ArrSize2)
    {

        if (isEqual(array1, array2, *arry1Counter, *array2Counter))
        {

            *(final + *finalCounter) = *(array1 + *arry1Counter);

            arry1Counter++;
            (*array2Counter)++;
            (*finalCounter)++;;
        }
        else if (*(array1 + *arry1Counter) > *(array2 + *array2Counter))
        {

            *(final + *finalCounter) = *(array2 + *array2Counter);
            (*array2Counter)++;
            (*finalCounter)++;
        }
        else
        {
            *(final + *finalCounter) = *(array1 + *arry1Counter);
            (*arry1Counter)++;
            (*finalCounter)++;
        }
    }

}
int ShrinkMemory(int MaxSize, int MinSize, double *final, double *temp)
{
    if (MaxSize != MinSize)
    {
        temp = realloc(final, MinSize * sizeof(double *));
        if (temp == NULL)
        {
            printf("relloc failed ! exixting /n");
            return 1;
        }
        else
        {

            printf("fsafda %p \n",temp);
            printf("fsafda %p \n",final);
            final=temp;
            temp=NULL;
            printf("fsafda %p \n",temp);
            printf("fsafda %p \n",final);
        }
    }
    return 0;
} 
```

为什么会崩溃？我什至使用 prinf %p 打印出内存并且地址看起来正确

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T01:20:37.327

对于双打数组，您需要：

```
double * output= malloc(sizeof(double) * MallSize);
//                      ^^^^^^^^^^^^^^ 
```

（同样适用于`realloc`等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T01:21:04.227

您`final`在内部重新分配`ShrinkMemory`并期望改变函数外部发生的事情。C 不能那样工作。您需要使用双指针 ( ) 并更改对to 的`double **final`每个引用。`final``*final`

同样要清楚的是，在这种情况下，“双指针”是指指向某物的指针的指针（2个星号指定）；指向的事物的类型与它无关（巧合的是，这里是“双重”数据类型）

# c++ - OpenMP 性能影响：私有指令与在构造内部声明变量

> ID：15468367
> 
> 赞同：3
> 
> 时间：2013-03-18T01:18:01.373
> 
> 标签：c++, multithreading, performance, parallel-processing, openmp

性能方面，以下哪个更有效？

在主线程中分配并将值复制到所有线程：

```
int i = 0;
#pragma omp parallel for firstprivate(i)
for( ; i < n; i++){
    ...
} 
```

在每个线程中声明和分配变量

```
#pragma omp parallel for
for(int i = 0; i < n; i++){
    ...
} 
```

在主线程中声明变量，但在每个线程中分配它。

```
int i;
#pragma omp parallel for private(i)
for(i = 0; i < n; i++){
    ...
} 
```

这似乎是一个愚蠢的问题和/或性能影响可以忽略不计。但是我正在并行化一个执行少量计算并被多次调用的循环，所以我可以从这个循环中挤出的任何优化都是有帮助的。

我正在寻找更底层的解释以及 OpenMP 如何处理这个问题。

例如，如果对大量线程进行并行化，我认为第二种实现会更有效，因为使用初始化变量`xor`比将变量复制到所有线程更有效

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T01:25:15.673

您提供的 3 个版本在性能方面没有太大差异，因为每个版本都使用`#pragma omp parallel for`. 因此，OpenMP 会自动将每个迭代分配给不同的线程。因此，变量`i`将成为每个线程的私有变量，并且每个线程将具有不同的迭代范围。该变量`'i'`自动设置为私有，以避免更新此变量时出现竞争条件。由于无论如何该变量`'i'`在并行上都是私有的，因此无需将**private(i)**放在`#pragma omp parallel for`.

然而，您的第一个版本会产生错误，因为 OpenMP 期望下面的循环`#pragma omp parallel for`具有以下格式：

`for(init-expr; test-expr;incr-expr)`

为了预先计算工作范围。

> for 指令对所有相关 for 循环的结构进行了限制。具体来说，所有关联的 for 循环必须具有以下规范形式：
> 
> for (init-expr; test-expr;incr-expr) 结构化块（[OpenMP 应用程序接口](http://www.openmp.org/mp-documents/OpenMP3.1.pdf)第 39/40 页。）

**编辑**：我测试了你的最后两个版本，并检查了生成的程序集。两个版本都产生相同的程序集，如您所见 -> [version 2](http://codepaste.net/4o4nnc)和[version 3](http://codepaste.net/istiz2)。

# triggers - Informix 插入触发器：更新同一表上的值但不同的记录

> ID：15468380
> 
> 赞同：1
> 
> 时间：2013-03-18T01:19:24.383
> 
> 标签：triggers, informix

有什么方法可以让插入触发器将不同记录中同一张表上的值更新为插入的值？据我了解，Informix 似乎不允许我这样做，因为它不允许您更新触发器所在的同一个表中的值。我已经看到建议您从存储过程返回值并在触发器中使用“into”语句，但我认为这个概念不适用于我的情况，因为更新需要在不同的记录上完成被插入。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-09T14:32:59.533

实际上有一种方法可以做到这一点......

确实，您不能直接更新您从中触发的同一个表/列，但是使用视图和“代替”触发器有一个简单的解决方法，这对我来说总是有效的。

1.  重命名表
2.  使用原始名称在该表上创建一个视图
3.  在视图上创建一个“代替”触发器，然后写入原始表
4.  通过撤销对原始表的所有权限来强制使用视图

这是所问问题的真实示例 - 带有日期范围的价格表，其中同一项目的其他行需要在插入、更新、删除完成时更新，以避免日期范围重叠（多个价格同一日期）。

价格表：

```
item    valid_from   valid_to       price
 01     2010-01-01   2013-03-15    120.00
 01     2013-04-16   2015-12-31    125.00
 01     2016-01-01   2016-05-05    130.00
 01     2016-05-06                 140.00 
```

首先，将表替换为同名视图：

```
RENAME TABLE pricelist TO pricelist_table;
CREATE VIEW pricelist AS SELECT * FROM pricelist_table;
REVOKE ALL ON pricelist_table FROM public;
GRANT ALL ON pricelist TO public; 
```

现在做一个插入触发器来更新视图下的同一个表的其他行（在这个例子中是为了避免从/到日期重叠）。通过同时使用视图和表名，您还可以避免在更新子查询中引用的表时出错（触发器中的第二次更新）。

```
CREATE TRIGGER ins_pricelist INSTEAD OF INSERT ON pricelist
       REFERENCING new AS new
   FOR EACH ROW (

     -- write the data to the real table
     insert into pricelist_table
     values(new.item,new.valid_from,new.valid_to,new.price),

     -- close off the previous price row by setting its "valid_to" date
     update pricelist_table set valid_to = new.valid_from - 1
      where item = new.item and valid_from < new.valid_from
        and ( valid_to >= new.valid_from or valid_to is null ),

     -- if the row we're inserting has a null "valid_to" date,
     -- set it to the day before the next "valid_from" date
     update pricelist set valid_to =
          (select min(valid_from)-1 from pricelist_table
            where item = new.item and valid_from > new.valid_from)
      where item = new.item and valid_from = new.valid_from
        and valid_to is null
   ); 
```

在支持带有触发器引用的过程的更高版本（11+）上，更好且更易于维护的方法是从触发器调用单独的存储过程：

```
CREATE PROCEDURE write_pricelist()
       REFERENCING old AS old  new AS new  FOR pricelist;

  -- do all your inserts, updates, etc to pricelist_table here ...

END PROCEDURE;

-- These triggers all call the same stored procedure (above).
CREATE TRIGGER ins_pricelist INSTEAD OF INSERT ON pricelist
    REFERENCING new AS new
    FOR EACH ROW (
      EXECUTE PROCEDURE write_pricelist() WITH TRIGGER REFERENCES
    );
CREATE TRIGGER upd_pricelist INSTEAD OF UPDATE ON pricelist
    REFERENCING new AS new old AS old
    FOR EACH ROW (
      EXECUTE PROCEDURE write_pricelist() WITH TRIGGER REFERENCES
    );
CREATE TRIGGER del_pricelist INSTEAD OF DELETE ON pricelist
    REFERENCING old AS old
    FOR EACH ROW (
      EXECUTE PROCEDURE write_pricelist() WITH TRIGGER REFERENCES
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:41:05.300

这个问题是在`ids@iiug.org`邮件列表中提出的，人们一致认为没有办法做到这一点——我同意这个共识。

# php - Drupal hook_form_alter 权重控制

> ID：15468382
> 
> 赞同：1
> 
> 时间：2013-03-18T01:19:45.537
> 
> 标签：php, drupal, drupal-7, drupal-fapi

尝试在新的内容类型添加表单中添加一些额外的表单项。

也尝试增加提交和预览的权重。

```
function mymodule_form_alter(&$form, &$form_state, $form_id){
  //add some $form items here

  $form['actions']['submit']['#weight'] = 2000;
  $form['actions']['preview']['#weight'] = 2001;
} 
```

但不知何故，提交和预览按钮仍然位于那里添加的新项目上方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T08:37:57.930

尝试将`#weight`属性添加到`$form['actions']`包装器。

您当前的代码更改了 2 个按钮的权重`actions wrapper`，并且不会影响包装器的权重。

例如看下面的代码：

```
function mymodule_form_alter(&$form, &$form_state, $form_id)
{
    //add some $form items here

    $form['actions']['#weight'] = 2000;
} 
```

希望这有效。

# mysql - 提供额外的布尔类型返回列，用于评估另一个查询

> ID：15468383
> 
> 赞同：0
> 
> 时间：2013-03-18T01:19:46.740
> 
> 标签：mysql, sql, join, union

我正在尝试开发一个查询

1.  给出不是由 currentUserID 写入的每个线程中的最后一条消息（现在通过 thread_id 分组完成，按 message_id desc 排序 AND WHERE results.sender_id ！= currentUserID）
2.  如果用户启动了一个线程但没有收到响应，则该线程不应该出现（现在只需使用 WHERE results.sender_id != currentUserID 过滤数据即可完成）
3.  提供一个布尔列来判断是否在此线程中发送了响应（未完成，但将涉及从查询中查找最后一个元素并查看 sender_id 是否=当前登录的用户 id）

[http://sqlfiddle.com/#!2/85971/2](http://sqlfiddle.com/#!2/85971/2)

**概要**

*   用户 1 与用户 2 发送消息
*   线程 ID：1
*   主题：“嗨主题”
*   身体：“嗨身体”

*   用户 2 回复：

*   线程 ID：1
*   身体：“嗨身体反应”

**作为用户 1，SQL 应该返回**

```
THREAD_ID |SUBJECT     | SENDER_ID | BODY             | Responded
1         | Hi Subject | 2         | Hi Body Response | false 
```

**作为用户 2，SQL 应该返回**

```
THREAD_ID |SUBJECT     | SENDER_ID | BODY    | Responded
1         | Hi Subject | 1         | Hi Body | true 
```

请看小提琴

我对它的拍摄是以下，它需要 1 英亩和 2 英亩，但不是 3 英亩，我试图与 UNIONS 混在一起以实现这一目标，但一无所获。

```
SELECT * FROM (
    SELECT t.id as thread_id, t.subject, m.sender_id, m.body
    FROM messages m
    JOIN threads t ON (m.thread_id = t.id)
    ORDER BY t.id asc, m.cdate desc
) as results
WHERE results.sender_id != currentUserID
GROUP BY results.thread_id; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T01:39:04.220

检查下面的查询。我还添加了消息 ID 列。

第一个结果...

```
SELECT t.id as thread_id, t.subject, m.sender_id, m.body, m.id,
(SELECT CASE s.status WHEN 1 THEN 'true' ELSE 'false' END 
 FROM STATUS s where s.message_id = m.id and s.user_id = 1) Responded
FROM messages m
JOIN threads t ON (m.thread_id = t.id)
WHERE m.sender_id != 1 
```

第二个...

```
SELECT t.id as thread_id, t.subject, m.sender_id, m.body, m.id,
(SELECT CASE s.status WHEN 1 THEN 'true' ELSE 'false' END 
 FROM STATUS s where s.message_id = m.id and s.user_id = 2) Responded
FROM messages m
JOIN threads t ON (m.thread_id = t.id)
WHERE m.sender_id != 2 
```

谢谢！

@leo。

# iphone - 如何获取 iOS6 的可用 SSID 列表

> ID：15468387
> 
> 赞同：2
> 
> 时间：2013-03-18T01:20:11.710
> 
> 标签：iphone, ios6, wifi, ssid

在 iOS 4.x 中，有关于我的要求的 API，但在 5.x 中似乎更改为私有，并且在 6.x 中似乎已删除。（其实沙箱里好像不能调用）

获取 802.11 的 SSID 列表对于我们的新项目来说是非常重要的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-14T21:32:06.407

此代码可以很好地获取 SSID。

```
#import <SystemConfiguration/CaptiveNetwork.h>

@implementation IODAppDelegate

@synthesize window = _window;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

CFArrayRef myArray = CNCopySupportedInterfaces();
CFDictionaryRef myDict = CNCopyCurrentNetworkInfo(CFArrayGetValueAtIndex(myArray, 0));
NSLog(@"Connected at:%@",myDict);
NSDictionary *myDictionary = (__bridge_transfer NSDictionary*)myDict;
NSString * BSSID = [myDictionary objectForKey:@"BSSID"];
NSLog(@"bssid is %@",BSSID);
// Override point for customization after application launch.
return YES;
} 
```

这是结果：

```
Connected at:{
BSSID = 0;
SSID = "Eqra'aOrange";
SSIDDATA = <45717261 27614f72 616e6765>; 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T01:16:06.747

我相信对此没有解决方案。原因是：

即使用户禁用了位置服务，访问 SSID 列表（实际上是 BSSID）的应用程序也可以通过使用 skyhook 或类似的解决方案来推断用户的位置。

Apple 未确认此信息，但我对此非常确定。

# java - java内存不足异常

> ID：15468388
> 
> 赞同：0
> 
> 时间：2013-03-18T01:20:23.350
> 
> 标签：java, memory, out-of-memory

```
There is insufficient memory for the Java Runtime Environment to continue.
Native memory allocation (malloc) failed to allocate 180992 bytes for Chunk::new
Possible reasons:
  The system is out of physical RAM or swap space
  In 32 bit mode, the process size limit was hit
Possible solutions:
  Reduce memory load on the system
  Increase physical memory or swap space
  Check if swap backing store is full
  Use 64 bit Java on a 64 bit OS
  Decrease Java heap size (-Xmx/-Xms)
  Decrease number of Java threads
  Decrease Java thread stack sizes (-Xss)
  Set larger code cache with -XX:ReservedCodeCacheSize=
This output file may be truncated or incomplete.

Out of Memory Error (allocation.cpp:328), pid=71060, tid=71956 
```

当我在小型 vps（只有 1gb 内存）上运行我的游戏服务器时出现上述错误

我不确定是什么原因我安装了 64 位 java 作为它的 64 位

我正在使用 java -Xmx768m

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:22:47.700

还要检查您的 -Xms 属性。

# php - MySQL 字段加 1

> ID：15468389
> 
> 赞同：0
> 
> 时间：2013-03-18T01:20:28.987
> 
> 标签：php, mysql

我有一个正在运行的 MySQL 查询。我想添加`1`到一个名为`articleswritten`.

我收到此错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 ''users' 附近使用正确的语法 SET articlewritten = articlewritten + 1 WHERE `id`= '1'' 在第 1 行

代码：

```
$sql = "UPDATE 'users' SET articleswritten = articleswritten + 1 WHERE `id` = '$userid'";
$result = mysql_query($sql) or die(mysql_error()); 
```

我找不到问题。我瞎了吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:58:07.787

这应该是

```
UPDATE `users` 
```

要不就

```
UPDATE users 
```

单引号使表名无效。查询中的其他所有内容都可以。

* * *

但是，您的查询很容易被注入。您应该使用带有 PDO 或 mysqli 的正确参数化查询，而不是使用 ext/mysql

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T01:58:28.680

您不需要在这里单引号表名。这应该做

```
$sql = "UPDATE users SET articleswritten = articleswritten + 1 WHERE id = '$userid'"; 
```

# windows-phone-8 - 在 WP8 应用程序中播放 Soundbite

> ID：15468391
> 
> 赞同：2
> 
> 时间：2013-03-18T01:20:37.720
> 
> 标签：windows-phone-8

我正在尝试编写一个 WP8 应用程序，该应用程序在按下按钮时播放短声，但我似乎无法弄清楚如何播放声音。这是我的代码的一个简单示例：

XAML

```
<Rectangle x:Name="Rect1" Grid.Row="0" Grid.Column="0" Tap="RectTapped" Fill="White" /> 
```

应用程序.cs

```
private void RectTapped(object sender, System.Windows.Input.GestureEventArgs e)
{
    MediaElement sound = new MediaElement();
    sound.AutoPlay = false;
    sound.Source = new Uri("Assets\\Sounds\\bark-1.wav", UriKind.Relative);
    sound.Play();
} 
```

在我的 Nokie 820 设备上进行测试时，没有声音播放。我不明白为什么。

有什么我做错了吗？.wav 在我的资源中。

我读过 MediaElement 不应该用于此任务。我试过在 Xna.Framework.Audio 中使用 SoundEffect 类；遵循 MSDN 中的示例，但这也失败了，因为我无法使用 Content.Load，因为 Load 不是 Content 类的可用方法。

我也看过 XAudio2，但由于我不懂 C++，所以我无法理解这些示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T08:04:31.797

您需要添加`MediaElement`到您的 XAML 树

```
this.LayoutRoot.Children.Add(sound); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T01:39:16.083

代替 a `Rectangle`，使用 a `Button`。此外，`MediaElement`还适用于在 Silverlight 应用程序中播放短声音。确保控件是可视化树的一部分（将其添加到 XAML 中）。然后绑定到按钮`Click`事件处理程序：

```
private void YourClickHandler(object sender, RoutedEventArgs e)
{
   myMediaElement.Source = new Uri("/Assets/Sounds/bark-1.wav", UriKind.Relative);
   myMediaElement.Play();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:48:01.847

您应该使用 XNA SoundEffect 类而不是 MediaElement，因为您正在播放声音效果。

该文档对该区域不利，但这是您的操作方式：

```
effect = SoundEffect.FromStream(stream);
FrameworkDispatcher.Update();
effect.Play(); 
```

所以要从您的应用程序包中播放音效：

```
var stream = Application.GetResourceStream(filepath);
effect = SoundEffect.FromStream(stream);
FrameworkDispatcher.Update();
effect.Play(); 
```

优于 MediaElement 的优势在于 SoundEffect 不需要位于可视树中（而且它也不会破坏背景音频播放器）。缺点是您没有在 MediaElement 上拥有的（有时有用的）事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-21T10:30:28.797

对于 Windows Phone 8.1 Silverlight，使用前两个答案（来自 @DenDelimarsky 和 ​​@onmyway133）来播放声音。

在我的情况下，没有添加`MediaElement`到 XAML 中没有播放的声音。

使用以下代码播放声音：

```
private void YourClickHandler(object sender, RoutedEventArgs e)
        {
            MediaElement myMediaElement = new MediaElement();
            myMediaElement.Source = new Uri("/MP3/AirHornTwoBlows.mp3", UriKind.Relative);
            LayoutRoot.Children.Add(myMediaElement);
            myMediaElement.Play();
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-03T06:02:43.133

删除线

```
sound.AutoPlay=false; 
```

或将其更改为：

```
sound.AutoPlay = true; 
```

它将起作用。

# ruby-on-rails - Selenium 在 Linux 上使用 chromedriver 失败并出现 EOFile 错误

> ID：15468392
> 
> 赞同：2
> 
> 时间：2013-03-18T01:20:39.907
> 
> 标签：ruby-on-rails, selenium, rubygems, capybara, selenium-chromedriver

我有一台自动构建机器在 EC2 实例上运行黄瓜测试。我在用：

*   水豚 (1.1.4)
*   硒网络驱动程序（2.31.0）
*   chromedriver (25.0.1364.172-187217)

测试是使用 Xvfb X11 Server (1.7.7-29.10.amzn1) 无头运行的。这个设置已经运行了好几个月，但上周停止在这些机器上运行。

我得到的错误是：

```
(::) failed steps (::)

end of file reached (EOFError)
/mnt/bamboo-ebs/rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/net/protocol.rb:135:in `read_nonblock'
/mnt/bamboo-ebs/rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/net/protocol.rb:135:in `rbuf_fill'
/mnt/bamboo-ebs/rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/net/protocol.rb:116:in `readuntil'
/mnt/bamboo-ebs/rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/net/protocol.rb:126:in `readline'
/mnt/bamboo-ebs/rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/net/http.rb:2219:in `read_status_line'
/mnt/bamboo-ebs/rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/net/http.rb:2208:in `read_new'
/mnt/bamboo-ebs/rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/net/http.rb:1191:in `transport_request'
/mnt/bamboo-ebs/rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/net/http.rb:1177:in `request'
/mnt/bamboo-ebs/rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/net/http.rb:1170:in `block in request'
/mnt/bamboo-ebs/rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/net/http.rb:627:in `start'
/mnt/bamboo-ebs/rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/net/http.rb:1168:in `request'
./features/step_definitions/web_steps.rb:49:in `/^(?:|I )go to (.+)$/' 
```

我最好的猜测是问题是由于过去一个月对 selenium 或 chromedriver 库的升级，因为每当启动构建实例时这些库都会更新。

我检查了 chromedriver 日志，但它们似乎没有提供任何帮助：

```
0.000][INFO]:      ChromeDriver 23.0.1240.0 /mnt/bamboo-ebs/bin/chromedriver/chromedriver
[0.259][FINE]:      Initializing session with capabilities {
   "browserName": "chrome",
   "chrome.detach": true,
   "chromeOptions": {
      "detach": true
   },
   "cssSelectorsEnabled": true,
   "javascriptEnabled": true,
   "nativeEvents": false,
   "platform": "ANY",
   "rotatable": false,
   "takesScreenshot": false,
   "version": ""
}

[0.259][INFO]:      Using named testing interface
[0.676][INFO]:      Connected to Chrome successfully. Version: 25.0.1364.172
[0.693][FINE]:      Command received (/session/132be881788b1e7a6c878f4c45935176)
[0.693][FINE]:      Command finished (/session/132be881788b1e7a6c878f4c45935176) with response {
   "sessionId": "132be881788b1e7a6c878f4c45935176",
   "status": 0,
   "value": {
      "acceptSslCerts": false,
      "applicationCacheEnabled": false,
      "browserConnectionEnabled": false,
      "browserName": "chrome",
      "chrome.chromedriverVersion": "23.0.1240.0",
      "chrome.nativeEvents": false,
      "cssSelectorsEnabled": true,
      "databaseEnabled": false,
      "handlesAlerts": true,
      "javascriptEnabled": true,
      "locationContextEnabled": false,
      "nativeEvents": true,
      "platform": "linux",
      "rotatable": false,
      "takesScreenshot": true,
      "version": "25.0.1364.172",
      "webStorageEnabled": true
   }
}

[0.695][FINE]:      Command received (/session/132be881788b1e7a6c878f4c45935176/url) with params {
   "url": "http://127.0.0.1:31337/"
}

[0.695][FINER]:     Waiting for all views to stop loading...
[0.696][FINER]:     Done waiting for all views to stop loading
[0.716][FINER]:     Waiting for all views to stop loading... 
```

所有测试都在我的开发机器（Mac OSX Mountain Lion）上使用 chromedriver（26.0.1383.0）成功运行。我试图降级我的 chromedriver 以匹配我的构建机器上的版本，但发现我无法做到这一点。

我已经设法使用 firefox 运行测试，但这对我们来说不是一个长期的解决方案。

任何帮助将非常感激。

# java - java 是否有内置 elementAt(stack s, int index) 方法？

> ID：15468397
> 
> 赞同：0
> 
> 时间：2013-03-18T01:22:11.227
> 
> 标签：java, methods, indexing, stack

我对编程很陌生。我已经使用 python 一年左右并且相当精通，但最近才开始涉足 Java。我找不到任何类型的方法来寻找我正在寻找的东西，但我很难相信不会有内置的方法。我需要在堆栈的给定索引处找到元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T01:25:03.690

既然`java.util.Stack`是的子类`java.util.Vector`那么答案是肯定的，你可以使用`stack.elementAt(index)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T01:25:18.170

如果您仔细查看 Stack 的方法，您会发现它继承了其他类的方法，因此它不仅仅是专门为它定义的方法：http: [//docs.oracle.com/javase/6/docs/api/ java/util/Stack.html](http://docs.oracle.com/javase/6/docs/api/java/util/Stack.html)

Stack 继承 Vector 的方法，包括`get(index)`：[http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html#get(int)](http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html#get(int))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T01:25:51.773

使用 Stack.elementAt(index) 方法。

没有静态方法。在 Stack 类的实例上使用索引。 [参考资料](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Vector.html#elementAt%28int%29)

# c++ - 将具有可变边界的二维数组传递给函数

> ID：15468403
> 
> 赞同：2
> 
> 时间：2013-03-18T01:23:01.677
> 
> 标签：c++, arrays, function

我有一个`array`谁的边界由另一个变量（不是常量）定义：

```
 int max = 10;
 int array[max][max]; 
```

现在我有一个使用它的函数`array`，但我不知道如何将数组传递给函数。我该怎么做呢？

所以为了更清楚，我该如何做这个工作（我考虑过使用类，但变量`max`是由用户输入定义的，所以我不能让数组成为类的成员，因为`max`它必须是一个常量）

```
void function (int array[max][max])
{
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:59:27.230

如果数组大小在函数中保持不变，您可以考虑使用指针和第二个参数作为数组大小。

```
void function(int *array, const int size)
{
} 
```

如果你想改变函数的大小，你可能真的会考虑像 std::vector 这样的 std 实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T02:03:48.043

```
#include <iostream>    
using namespace std;

int main() {
    int** Matrix;                     //A pointer to pointers to an int.
    int rows,columns;
    cout << "Enter number of rows: ";
    cin >> rows;
    cout << "Enter number of columns: ";
    cin >> columns;
    Matrix = new int*[rows];         //Matrix is now a pointer to an array of 'rows' pointers.

    for(int i=0; i<rows; i++) {
        Matrix[i] = new int[columns];    //the i place in the array is initialized
        for(int j = 0;j<columns;j++) {   //the [i][j] element is defined
                cout<<"Enter element in row "<<(i+1)<<" and column "<<(j+1)<<": ";
            cin>>Matrix[i][j];
        }
    }
    cout << "The matrix you have input is:\n";

    for(int i=0; i < rows; i++) {
        for(int j=0; j < columns; j++)
            cout << Matrix[i][j] << "\t";   //tab between each element
        cout << "\n";               //new row
    }
    for(int i=0; i<rows; i++)                
        delete[] Matrix[i];         //free up the memory used
} 
```

# android - 如何使用Android保存对象的不可序列化属性？

> ID：15468404
> 
> 赞同：2
> 
> 时间：2013-03-18T01:23:15.297
> 
> 标签：android

我已经有一段时间了，我刚刚发现是导致它的错误。我有一个 ArrayList，对于我想要保存的每个对象，我想要一个用于 AlarmManager 的待处理意图列表，这样如果我想从每个对象中删除多个警报，我所要做的就是访问列表的 PendingIntents 并简单地在 arraylist 中使用 alarmmanagername.cancel(PendingIntent) 。但是这些对象需要存储，并且在检索存储的对象时，arraylist 设置为 null，因为我必须将其设置为瞬态才能将对象数据存储并检索到系统中，而不会引发 NotSerializableException。以下是班级的设置方式：

```
public class ListObject implements Serializable{

    public String objectname, startampm, stopampm;  //name of schedule and am or pm
    private boolean[] Days = {
            false,  //monday
            false,  //tuesday
            false,  //and soforth
            false,
            false,
            false,
            false};

    private int starthour, startminute, stophour, stopminute;   //times from TimePicker
    public transient ArrayList<PendingIntent> pendintentlist = new ArrayList<PendingIntent>();; //ids for each of the alarms
    private int listalarmid;    //FOR WHEN COME BACK: maybe store pending intents instead of the array of ints above?
    private boolean vibrate, activated;
    private boolean nextday = false; //bool for if schedule goes into next day 
```

据我了解，瞬态使它无法与其余数据一起保存，但是，我如何才能将这个不可序列化的对象与其余数据一起保存，以便在检索到它时，我可以访问这个数组列表没有它变成空？

如果没有，是否有更简单的方法可以稍后取消我想要保存的警报管理器？这是一个简单的应用程序，可让您保存多个警报，我只需要一种保存其未决意图的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:36:50.877

它要么设计为与状态的其余部分一起保存，要么不是，所以我不确定您要对瞬态数据做什么。

*   A`PendingIntend`仍然`Parceable`如此，因此您可以将其写入 a `Bundle`，例如，如果使用`onSaveInstanceState`and`onRestoreInstanceState`

*   瞬态数据可能是“计算的”，即不直接保存状态，但如果需要，您可以保存重新创建它所需的数据。例如，数据库连接是不可序列化的，但您可以存储用户名、密码和 JDBC URL。

*   您可以覆盖（或实现）java序列化方法`writeObject(ObjectOutputStream out)`并`readObject(ObjectInputStream in)`添加您的瞬态字段，例如[这个线程](https://stackoverflow.com/a/7290812/530513)

# bitcoin - 我可以用bitcoinj打开bitcoin-qt钱包吗

> ID：15468416
> 
> 赞同：0
> 
> 时间：2013-03-18T01:24:30.713
> 
> 标签：bitcoin, bitcoinj

我正在尝试用 bitcoinj 打开我的 bitcoin-qt 钱包。我有这个简单的代码：

```
private static final File WALLET_FILE = new File("__PATH__");

public static void main(String[] args) {
    Wallet wallet;
    try {
        wallet = Wallet.loadFromFile(WALLET_FILE);
    } catch (IOException e) {
    System.out.println("Couldn't open wallet: " + e);
    return;
    }

    System.out.println("Balance: " + wallet.getBalance());
} 
```

我收到一个错误：

```
Couldn't open wallet: com.google.protobuf.InvalidProtocolBufferException: Protocol message contained an invalid tag (zero). 
```

我检查了 bitcoin-qt 的状态，我的钱包似乎同步了。

我远不是比特币专家，但我想知道你是否知道解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:21:29.603

显然这是不可能的，我问了关于比特币 stackechange 的问题，他们告诉我格式不一样：

[https://bitcoin.stackexchange.com/questions/8463/open-bitcoin-qt-wallet-with-bitcoinj/8466?noredirect=1#8466](https://bitcoin.stackexchange.com/questions/8463/open-bitcoin-qt-wallet-with-bitcoinj/8466?noredirect=1#8466)

# java - 刷新视图？

> ID：15468417
> 
> 赞同：1
> 
> 时间：2013-03-18T01:24:39.543
> 
> 标签：java, android

我有一个使用 AsyncTask 创建动态表的视图。唯一的麻烦是在此期间我创建了一些复选框，但是一旦用户选中它们，我想禁用该框。但是由于创建它们的动态方式，我无法获得将它们设置为禁用的参考。

所以这是我在循环中创建按钮的方式：

```
while(it.hasNext()){
                if(checkStatus(it.next())){
                    myCheckbox.setChecked(true);
                    myCheckbox.setEnabled(false);
                }else{
                    myCheckbox.setOnClickListener(new OnClickListener() {

                          public void onClick(View v) {
                            buyU asyncTask = new buyU();
                            asyncTask.execute("value1");
                          }
                    });

                }
} 
```

因此，当按下按钮时，我的 asyncTask 运行。但我无法修改复选框，因为我没有它的参考。我无法传递我不认为的引用，因为我正在使用传递参数来发送带有几个值的字符串。所以我在想最简单的方法是再次刷新整个页面的正方形。

有什么好方法可以做到这一点？

或者，我可以将按钮作为对象传递给 asyncTask 以及字符串并将它们转换回另一端的类型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T01:43:45.560

您可以通过`Object`，只需添加一个实例变量和一个构造函数。由于我们从 执行此操作`onClick()`，我们将`v`转换为`CheckBox`：

```
Checkbox c;

public buyU (CheckBox checkbox)
{
  c = checkbox;
}

@Override
protected void onPostExecute (Result result)
{
  c.setChecked (false);
  c.setEnabled (false);
} 
```

然后调用：

```
CheckBox check = (CheckBox) v;
buyU asyncTask = new buyU(check);
asyncTask.execute("value1"); 
```

如果您*确定*应该 `CheckBox`在单击时禁用 ，您可以跳过`AsyncTask`参数传递，只需`CheckBox`在`onClick()`.

```
public void onClick(View v) {
  ((CheckBox)v).setChecked (false);
  v.setEnabled (false);
  buyU asyncTask = new buyU();
  asyncTask.execute("value1");
} 
```

我也会厌倦那个封闭循环，如果它在 UI 线程中运行，请确保它不会长时间运行。

像往常一样，Java 类以大写字母开头，`buyU`不符合该规范。

# java - 如何创建一个检查 int 范围、数字类型而不是 char 的异常？

> ID：15468418
> 
> 赞同：1
> 
> 时间：2013-03-18T01:24:54.347
> 
> 标签：java, exception

我试图绕过异常，我遇到的问题是我需要创建一个程序，要求用户输入数字 9-99。这个数字必须使用 3 个不同的异常进行错误检查。

> e1：数字超出范围（200）
> 
> e2：数字是整数以外的数据类型（双精度）
> 
> e3：输入是数字（char）以外的另一种数据类型

我试图在我的 if 结构中创建模式以使所有三个工作，但是我无法区分 e2 和 e3。它将始终默认为 e2。这是我只有两个例外的情况，但我非常感谢帮助我弄清楚如何实施第三个。谢谢你。

```
public static void main(String[] args) {
    Scanner input = new Scanner(System.in);
    boolean tryAgain = true;
  do {
       try {
            System.out.println("Please enter an integer between 9 and 99: ");

            int inInt = input.nextInt();

            if (inInt >= 9 && inInt <= 99){
                System.out.println("Thank you.  Initialization completed.");
                tryAgain = false;
            }
            else if (inInt < 9 || inInt > 99){
                throw new NumberFormatException("Integer is out of range.");
            }
        }
        catch (NumberFormatException e1) { // Range check
            System.out.println("* The number you entered is not between 9 and 99\.  Try again.");
            System.out.println();
            input.nextLine();
        }
       catch (InputMismatchException e2) { // Something other than a number
            System.out.println("* You did not enter an integer.  Try again.");
            System.out.println();
            input.nextLine();
        }
    } while(tryAgain);
} 
```

}

这是我现在得到的输出：

> > 请输入 9 到 99 之间的整数：2
> > 
> > *   您输入的数字不在 9 到 99 之间。请重试。
> > 
> > 请输入 9 到 99 之间的整数：f
> > 
> > *   您没有输入整数。再试一次。
> > 
> > 请输入 9 到 99 之间的整数：88
> > 
> > 谢谢你。初始化完成。

[https://www.ideone.com/ZiOpGH](https://www.ideone.com/ZiOpGH)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:21:04.837

如果你必须检测三种情况，你需要有三组逻辑。

1.  检查输入的字符是否为有效数值。
2.  检查输入的数字是否为整数。
3.  检查输入的数字是否在下限和上限之间。

而且您几乎必须按顺序检查它们。

Scanner 可以方便`hasXXX`地查看要读取的字符是否与给定模式匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T01:28:09.820

在`catch (InputMismatchException e2)`中，测试以查看`input.hasNextDouble()`（或`input.hasNextFloat()`？不确定哪个更通用...）是否正确。如果是，那么您可以区分“用户输入双精度”和“用户输入非数字类型”的情况

# python - 如何在 Python 中访问 SoundCloud-Stream URL？

> ID：15468422
> 
> 赞同：3
> 
> 时间：2013-03-18T01:25:11.210
> 
> 标签：python, api, token, soundcloud, unauthorized

前段时间我为我的一个朋友写了一个小工具。我从声音列表中检索了所有流链接（像[这样](http://media.soundcloud.com/stream/TYhPZbZIfUEJ?stream_token=8Qpvy)），并用一个小的 python 脚本下载了所有这些。

自 3 月初以来，soundcloud 肯定发生了一些变化，现在我的 cronjob 收到了`401 Unauthorized`错误。我已经通读了 soundcloud API，但它`Access Token`并不完全符合我的需求。

你们中有人有轻松处理这个问题的想法吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T20:18:56.407

正如 Makoto 所说，401 似乎您已经失去了通过 OAuth 令牌访问的权限，所以我会仔细检查以确保您的应用程序仍然可用并且您的令牌是正确的。您可以在[您的应用程序页面上查看。](http://soundcloud.com/you/apps)

另外，我注意到您的网址似乎与 SC api 显示的有点不同。一旦您决定获取正确的轨道 ID，流 url 的约定是：

```
http://api.soundcloud.com/tracks/{id}/stream 
```

这可以在他们的[跟踪文档](http://developers.soundcloud.com/docs/api/reference#tracks)中找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-12T09:03:16.640

[在此处](http://developers.soundcloud.com/docs/api/reference#tracks)阅读文档。您必须将您的 client_id 参数添加到流 url，然后您将被重定向到流链接 (mp3)。

# c++ - 无法在 VC++ 2012 Ultimate 中加载 ICON 资源

> ID：15468426
> 
> 赞同：0
> 
> 时间：2013-03-18T01:25:43.130
> 
> 标签：c++, c, winapi, visual-studio-2012

我在将图标资源添加到 C++ Win32 项目时遇到问题。我按照下面图片中的步骤进行操作，但我们运行 program.exe，菜单栏中没有我的图标（只有默认图标）。*.exe 文件具有应有的新图标。

```
int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)
{
    LPCWSTR className = L"MyWindow";
    WNDCLASSEX wc;
    HWND hwnd;
    MSG Msg;
    wc.cbSize        = sizeof(WNDCLASSEX);
    wc.style         = 0;
    wc.lpfnWndProc   = WndProc;
    wc.cbClsExtra    = 0;
    wc.cbWndExtra    = 0;
    wc.hInstance     = hInstance;
    wc.hIcon         = LoadIcon(NULL, MAKEINTRESOURCE(IDI_ICON1));
    wc.hCursor       = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
    wc.lpszMenuName  = NULL;
    wc.lpszClassName = className;
    wc.hIconSm       = LoadIcon(NULL, MAKEINTRESOURCE( IDI_ICON1));
    if(!RegisterClassEx(&wc))
    {
        MessageBox(NULL,L"Error, registration of class faild", L"ERROR", MB_OK);
        return 0;
    } 
```

![在此处输入图像描述](../Images/ec44302310630bcea9fc884bd3e52924.png)

![在此处输入图像描述](../Images/f4917593afb78691b488cfa1ee7ccac5.png)

![在此处输入图像描述](../Images/7dc5efa064548bd1dd325bd736093df6.png)

![在此处输入图像描述](../Images/ec7a0b65e645e07861757b1a3678d42e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T01:40:44.950

您的窗口样式为 0。

尝试：

```
wc.style         = WS_SYSMENU; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-18T15:25:47.503

wc.hIcon = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_ICON1)); wc.hIconSm = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_ICON1));

# java - 创建两个 Rectangle 对象的问题

> ID：15468429
> 
> 赞同：0
> 
> 时间：2013-03-18T01:26:00.613
> 
> 标签：java, object

我正在尝试做作业，但我似乎遇到了错误。我必须构建一个矩形并返回周长和面积，矩形默认高度和宽度为 1。在我编译它之前一切看起来都很好，然后我被告知 main 方法必须是静态的。当我将主方法设为静态时，我会收到“无法从静态上下文引用的非静态变量”错误。关于我需要做些什么来解决它的任何想法？

```
package rectangle;
/**
 *
 * @author james
 */
public class Rectangle {
/** Main Method */
    public static void main(String[] args) {
        //Create a rectangle with width and height
        SimpleRectangle rectangle1 = new SimpleRectangle();
        System.out.println("The width of rectangle 1 is " + 
                rectangle1.width + " and the height is " +
                rectangle1.height);
        System.out.println("The area of rectangle 1 is " +
                rectangle1.getArea() + " and the perimeter is " +
                rectangle1.getPerimeter());

        //Create a rectangle with width of 4 and height of 40
        SimpleRectangle rectangle2 = new SimpleRectangle(4, 40);
                System.out.println("The width of rectangle 2 is " + 
                rectangle2.width + " and the height is " +
                rectangle2.height);
                System.out.println("The area of rectangle 2 is " +
                        rectangle2.getArea() + " and the perimeter is "
                        + rectangle2.getPerimeter());

    }

        public class SimpleRectangle {
        double width;
        double height;

        SimpleRectangle() {
            width = 1;
            height = 1;
        }

        //Construct a rectangle with a specified width and height
        SimpleRectangle(double newWidth, double newHeight) {
            width = newWidth;   
            height = newHeight;
        }

        //Return the area of the rectangle
        double getArea() {
            return width * height;
        }
        //Return the perimeter of a rectangle
        double getPerimeter() {
            return (2 * width) * (2 * height);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T01:31:12.087

您正在尝试在一个类中创建一个类，这可能不是您想要做的。

`SimpleRectangle`在自己的文件中创建一个类，或者只在类上创建`getPerimeter`和`getArea`方法并将`Rectangle`类重命名`Rectangle`为`SimpleRectangle`（您需要相应地更改源文件名）

# sql - 从 MAMP 的 phpmyadmin 中恢复 SQL 代码

> ID：15468431
> 
> 赞同：0
> 
> 时间：2013-03-18T01:26:36.383
> 
> 标签：sql, phpmyadmin, mamp

所以，我最近完全是个白痴，我从 localhost 删除了我所有的表，以为这是我的远程服务器。我错误地在浏览器的错误选项卡中。无论如何要检索我的旧 SQL 代码来重写所有表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:29:53.570

`PHPMyAdmin`除非有新设置，否则不会为您的数据存储备份？如果您甚至错误地删除了数据并且没有备份，那么找到它的机会非常非常非常渺茫。`PhpMyAdmin`将无法将其还给您，以回答您的问题。

# javascript - 排序打乱了nr的变化

> ID：15468432
> 
> 赞同：0
> 
> 时间：2013-03-18T01:26:41.267
> 
> 标签：javascript, jquery

我对 Javascript 列表的排序有疑问。填充文本区域并选择评分时创建的列表。它看起来像这样：

```
var element = '<li class="lista">' + filmen + '<span class="betyg">' + changeNumber(grade) + '</span></li>';
film_list.append(element); 
```

我还有一个函数可以将 span 元素中的数字转换为星星，它看起来像这样：

```
function changeNumber(number) {
  var stars = "";
  for(var i = 0; i < number; i++) {
    stars += "*";
  }
  return stars;
} 
```

问题是有两个按钮可以对列表进行排序，高低取决于等级，当我按下按钮时，列表排序正确。然而，星星消失了，数字又出现了。我试图`changeNumber`从排序按钮调用该函数，但它似乎不起作用。我不确定我应该使用什么作为论据。关于我应该做什么的任何建议？

排序函数如下所示：

```
var button_high = $('#high');
var betyg_array = new Array();
button_high.click(function () {
  $list = $("#filmerna ul");
  $("#filmerna ul li")
    .remove();
  betyg_array.sort(function (x, y) {
    return y[1] - x[1]
  });
  $.each(betyg_array, function () {
    $nyFilm = $("<li />");
    $nyFilm.attr("class", "lista")
    $nyFilm.text($(this)[0]);
    $nyBetyg = $("<span />");
    $nyBetyg.attr("class", "betyg");
    $nyBetyg.text($(this)[1]);    
    $nyBetyg.appendTo($nyFilm);
    $nyFilm.appendTo($list);
    changeNumber();
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:13:13.497

```
var button_high = $('#high');
var betyg_array = new Array();
button_high.click(function () {
  $list = $("#filmerna ul");
  $("#filmerna ul li")
    .remove();
  betyg_array.sort(function (x, y) {
    return y[1] - x[1]
  });
  $.each(betyg_array, function () {
    $nyFilm = $("<li />");
    $nyFilm.attr("class", "lista")
    $nyFilm.text($(this)[0]);
    $nyBetyg = $("<span />");
    $nyBetyg.attr("class", "betyg");
    $nyBetyg.text($(this)[1]);
    var stars = $nyBetyg.text(betyg_array); //this line and the line below was the solution
    $nyBetyg.text(changeNumber(stars)); 

    $nyBetyg.appendTo($nyFilm);
    $nyFilm.appendTo($list);
  });
}); 
```

# ios - 是否可以从字符串声明变量类型？

> ID：15468433
> 
> 赞同：3
> 
> 时间：2013-03-18T01:27:09.293
> 
> 标签：ios, objective-c

我不知道这个的技术术语。我想知道在Objective C中，是否可以像这样声明一个变量：

```
NSClassFromString(aClassName) *var; 
```

或者

```
[NSClassFromString(aClassName) class] *var; 
```

显然，以上两个都不正确。我想要的是动态声明一个变量。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T01:31:31.520

您应该制作`id`类型的 ivar，然后使其成为动态类型。例如，如果你想动态输入它`NSString`，你可以这样做：

```
id ivar;
Class myClass = NSClassFromString(@"NSString");

ivar = [[myClass alloc] initWithString:@"abc"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T01:30:03.227

您必须声明`var`为`id`，然后像这样实例化它：

```
var = [[NSClassFromString(aClassName) alloc] init]; 
```

声明类型的唯一要点是编译时类型检查，因此只要您只向它可以处理的对象抛出消息，就不会有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T01:30:13.980

`id`它们是动态类型变量的类型。如果您需要检查变量是否符合特定类，您可以使用`-isKindOfClass:`.

您可以动态测试一个类是否是某种类型`[var isKinkdOfClass:NSClassFromString(aClassName)]`

# ruby-on-rails - 我必须为 Heroku 上的自定义域 SSL 付费才能摆脱警告标志，对吗？

> ID：15468435
> 
> 赞同：0
> 
> 时间：2013-03-18T01:27:18.833
> 
> 标签：ruby-on-rails, ruby, ssl, heroku, ssl-certificate

我只是想在购买任何东西之前确定一下。

我在heroku上有一个应用程序。URL 是 cedar 堆栈上的 myappname.herokuapps.com。

我在 godady 上购买了一个自定义域并设置了 CNAME 以进行转发。我可以使用我的自定义域来访问 heroku 上的应用程序。问题是，我在 FF、Chrome、IE 等上收到浏览器警告。消息如下：

这可能不是您要找的网站！您尝试访问 www.mydomain.com，但实际上您访问了一个标识为 *.herokuapp.com 的服务器。这可能是由于服务器上的错误配置或更严重的原因造成的。您网络上的攻击者可能试图让您访问 www.mydomain.com 的虚假（且可能有害）版本。您不应该继续，特别是如果您以前从未看到此站点的此警告。

我的问题是：

1.  我需要购买 SSL 来解决这个问题吗？
2.  我需要获得通配符认证还是其中任何一个有效？
3.  关于在哪里购买有什么建议吗？我看到了一些选项，例如 RapidSSL、Heroku 上的 SSL Endpoint 插件等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T01:49:39.680

不！您可能只是没有正确配置。[在这里](https://stackoverflow.com/questions/7170664/how-to-configure-heroku-application-dns-to-godaddy-domain)您可以检查步骤。您可能没有获得自定义域的插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T04:26:35.237

仅当您想使用 SSL 和 https 时才需要 ssl 插件。您应该能够浏览到[http://mycustomdomain.com/](http://mycustomdomain.com/)而不会收到警告。除非您为域添加 ssl 插件和证书，否则转到[https://mycustomdomain.com/将产生警告。](https://mycustomdomain.com/)

# opencv - OpenCV 错误：参数错误 在未知函数中，文件 ..\..\..\modules\core\src\matrix.cpp，第 697 行

> ID：15468437
> 
> 赞同：2
> 
> 时间：2013-03-18T01:27:22.753
> 
> 标签：opencv

我目前正在尝试纠正立体相机以创建视差图。不幸的是，我无法通过立体声校正步骤，因为我不断收到错误消息

> “OpenCV 错误：未知函数中的错误参数，文件 ..\..\..\modules\core\src\matrix.cpp，第 697 行。”

这个过程很复杂，因为我不是校准相机的人，我也无法使用用于录制视频的相机。我得到了所有的校准参数（内在参数、失真系数、旋转矩阵和平移向量）。如您所见，我尝试将它们直接转换为 CvMat 并以这种方式使用它们，但是当我尝试实际使用它们时出现错误。

提前致谢。

```
CvMat li, lm, ri, rm, r, t, Rl, Rr, Pl, Pr;    

double init_li[3][3] = 
    {   {477.984984743, 0, 316.17458671}, 
    {0, 476.861945645, 253.45073026}, 
    {0, 0 ,1}   };
double init_lm[5] = {-0.117798518453, 0.147554949385, -0.0549082041898, 0, 0};
double init_ri[3][3] = 
    {{478.640315323, 0, 299.957994781}, 
    {0, 477.898896505, 251.665771947}, 
    {0, 0, 1}};
double init_rm[5] = {-0.10884732532, 0.12118405303, -0.0322073237741, 0, 0};
double init_r[3][3] = 
    {{0.999973709051976, 0.00129700728791757, -0.00713435189275776},
    {-0.00132096594266573, 0.999993501087837, -0.00335452397041856}, 
    {0.00712995468519435, 0.00336386001267643, 0.99996892361313}};
double init_t[3] = {-0.0830973040641153, -0.00062704210860633, 1.4287643345188e-005};

cvInitMatHeader(&li, 3, 3, CV_64FC1, init_li);
cvInitMatHeader(&lm, 5, 1, CV_64FC1, init_lm);
cvInitMatHeader(&ri, 3, 3, CV_64FC1, init_ri);
cvInitMatHeader(&rm, 5, 1, CV_64FC1, init_rm);
cvInitMatHeader(&r, 3, 3, CV_64FC1, init_r);
cvInitMatHeader(&t, 3, 1, CV_64FC1, init_t);
cvInitMatHeader(&Rl, 3,3, CV_64FC1);
cvInitMatHeader(&Rr, 3,3, CV_64FC1);
cvInitMatHeader(&Pl, 3,4, CV_64FC1);
cvInitMatHeader(&Pr, 3,4, CV_64FC1);

//frame is a cv::MAT holding the first frame of the video.
CvSize imageSize = frame.size();
imageSize.width /= 2;

//IT BREAKS HERE
cvStereoRectify(&li, &ri, &lm, &rm, imageSize, &r, &t, &Rl, &Rr, &Pl, &Pr); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:10:45.110

所以，你被c-api咬了吗？你为什么不直接拒绝呢？

尽可能使用 c++ api，不要用旧的（1.0）开始学习 opencv，不推荐使用的 api，拜托！

```
double init_li[9] = 
    {   477.984984743, 0, 316.17458671, 
    0, 476.861945645, 253.45073026, 
    0, 0 ,1  };
double init_lm[5] = {-0.117798518453, 0.147554949385, -0.0549082041898, 0, 0};
double init_ri[9] = 
    {   478.640315323, 0, 299.957994781, 
    0, 477.898896505, 251.665771947, 
    0, 0, 1};
double init_rm[5] = {-0.10884732532, 0.12118405303, -0.0322073237741, 0, 0};
double init_r[9] = 
    {   0.999973709051976, 0.00129700728791757, -0.00713435189275776,
    -0.00132096594266573, 0.999993501087837, -0.00335452397041856, 
    0.00712995468519435, 0.00336386001267643, 0.99996892361313};
double init_t[3] = {-0.0830973040641153, -0.00062704210860633, 1.4287643345188e-005};

cv::Mat li(3, 3, CV_64FC1, init_li);
cv::Mat lm(5, 1, CV_64FC1, init_lm);
cv::Mat ri(3, 3, CV_64FC1, init_ri);
cv::Mat rm(5, 1, CV_64FC1, init_rm);
cv::Mat r, t, Rl, Rr, Pl, Pr; // note: no initialization needed.

//frame is a cv::MAT holding the first frame of the video.
cv::Size imageSize = frame.size();
imageSize.width /= 2;

//IT won't break HERE
cv::stereoRectify(li, ri, lm, rm, imageSize, r, t, Rl, Rr, Pl, Pr);

// no need ever to release or care about anything 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:53:24.367

好的，所以我想出了答案。问题是我只为 Rl、Rr、Pl 和 Pr 初始化了标头，但没有为数据本身分配内存。我能够按如下方式修复它：

```
double init_Rl[3][3];
double init_Rr[3][3];
double init_Pl[3][4];
double init_Pr[3][4];

cvInitMatHeader(&Rl, 3,3, CV_64FC1, init_Rl);
cvInitMatHeader(&Rr, 3,3, CV_64FC1, init_Rr);
cvInitMatHeader(&Pl, 3,4, CV_64FC1, init_Pl);
cvInitMatHeader(&Pr, 3,4, CV_64FC1, init_Pr); 
```

虽然，我有一个理论，我可能能够使用 cv::stereoRectify 和 cv::Mats 作为参数，这会让生活变得更轻松。我不知道 cv::stereoRectify 是否存在，但似乎许多其他 c 函数的版本都在 cv 命名空间中。如果很难说，我对 OpenCV 很陌生。

# java - 如何将 URL 的 if 语句解析为某个 IP 地址？

> ID：15468440
> 
> 赞同：0
> 
> 时间：2013-03-18T01:27:45.727
> 
> 标签：java, ip, host, inet

如果我使用 URL www.stackoverflow.com，那么它将解析为 IP 地址 31.13.72.49。

这没问题，我知道如何用一个简单的代码做到这一点：

```
 InetAddress add = InetAddress.getByName("www.stackoverflow.com");
    return add.getHostAddress(); 
```

但我想在我的被阻止 IP 地址列表的 if 语句中执行此操作（喜欢 stackoverflow 顺便说一句:) 只是一个例子）。

例如，我的阻止列表包含（“31.13.72.49”、“www.y.com”、“198.0.10.2”）

如果我输入 www.stackoverflow.com 那么它会承认它是一个错误的 IP 地址（通过知道它的解析 IP 是 31.13.72.49），然后打印一条错误消息（可能是网站被禁止使用）。反之亦然，如果我在阻止列表中输入只有 IP 地址的 URL。

我不知道该怎么办。我知道 equals 关键字或 == 要匹配，但由于它们不一样（尽管相互解析），我不知道如何证明它们确实来自同一个家庭。

PS：我在 Java Eclipse 中执行此操作（导入 java.net.InetAddress;）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T01:31:12.480

使用 InetAddress 类的 equals 方法

# c - 取消引用 void 指针

> ID：15468441
> 
> 赞同：32
> 
> 时间：2013-03-18T01:27:51.423
> 
> 标签：c, pointers

即使在转换了一个 void 指针之后，我在取消引用它时也会遇到编译错误。谁能告诉我这个的原因。

```
int lVNum = 2;
void *lVptr;
lVptr = (int*)&lVNum;

printf("\nlVptr[60 ] is  %d \n",lVptr[1]); 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-18T01:30:38.643

取消引用 void 指针是没有意义的。编译器将如何解释指针指向的内存？您需要先将指针转换为正确的类型：

```
int x = *(int*)lVptr; 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-03-18T01:32:51.257

`printf("\nlVptr[60 ] is %d \n", *(int*)lVptr);`

这会将 void 指针转换为指向 an 的指针`int`，然后正确取消引用它。

如果你想把它当作一个数组（一个），你可以做一个稍微难看的`((int *)lVptr)[0]`. 使用`[1]`超出范围，因此不是一个好主意（至于`lVptr[60]`...）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-18T01:30:16.533

它仍然是`void*`，因为这就是您声明的内容。任何指针都可能被隐式转换为 a `void*`，因此 cast 什么都不做，而你只剩下一个指针，`void`就像你一开始一样。

您需要将其声明为`int*`.

```
void *some_ptr = /* whatever */;
int *p = (int*)some_ptr;
// now you have a pointer to int cast from a pointer to void 
```

请注意，*转换为*an`int*`也是不必要的，出于同样的原因，您不必（也不应该*）*`malloc`转换C 中的返回值。

`void*`'s 可以隐式转换为任何其他指针类型或从任何其他指针类型转换。我在这里添加演员表只是为了清楚起见，在您的代码中您只需编写；

```
int *p = some_void_ptr; 
```

* * *

另外，这个：

```
lVptr[1] 
```

是错的。您有一个指向单个`int`而不是两个的指针。该取消引用会导致未定义的行为。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-08-27T15:23:36.380

您不能取消引用**void**指针，因为它没有类型，首先您需要转换它`(int *)lVptr`，然后取消引用它`*(int *)lVptr`。

```
int lVNum = 2;
void *lVptr;
lVptr = &lVNum;

printf("\nlVptr[60 ] is  %d \n",*(int *)lVptr); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-18T03:36:43.040

一个 void 指针就是这样，一个指向 void 的指针（没有什么可定义的）。

在某些情况下很有用。例如 malloc() 准确地返回一个 void 指针，因为它为未定义的目的分配了内存。一些函数可能同样将 void 指针作为参数，因为它们不关心位置以外的实际内容。

老实说，您发布的片段完全没有意义，甚至无法猜测您要做什么。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-18T05:34:26.027

您可能正在尝试执行的操作示例：

```
#include <stdio.h>

int main () {
    void *v;
    unsigned long int *i = (unsigned long int *)v;

    *i = 5933016743776703571;

    size_t j = sizeof(i);
    printf("There are %ld bytes in v\n", j);

    size_t k;
    for (k = 0; k < j; k++) {
        printf("Byte %ld of v: %c\n", k, ((char *)v)[k]);
    }
} 
```

输出：

```
There are 8 bytes in v
Byte 0 of v: S
Byte 1 of v: T
Byte 2 of v: A
Byte 3 of v: C
Byte 4 of v: K
Byte 5 of v: O
Byte 6 of v: V
Byte 7 of v: R 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-19T05:01:15.460

@ Code-Guru 我尝试在 Visual Studio 中编译它。它给出了错误 - 表达式必须是指向完整对象的指针。

谢谢 teppic，正如您所建议的，以下编译并产生正确的结果。

```
#include<stdio.h>

void main(){

printf("study void pointers \n");

int lvnum = 2;
void *lvptr;
lvptr = &lvnum;
printf("\n lvptr is %d\n",((int *)lvptr)[0]);

} 
```

但是，如果我尝试 printf("\n lvptr is %d\n",((int *)lVptr)[60]); 它编译并运行，但给出随机数。

非常感谢各位朋友的建议。抱歉，我将一个 void 指针分配给了不必要的强制转换的 int 指针，并希望它被取消引用。但是，当我想取消引用它时，我应该使用它。

片段的目的：在我的消息来源中，我发现了由类似情况引起的 klocwork 错误。相反，该程序不仅编译，而且给出了正确的结果。原因 - 这是一个低级代码（无操作系统），其中分配给 void 指针的内存已经保留到 60 左右。但是 klocwork 工具无法解析具有该限制的文件，从而导致错误。我做了很多头脑风暴，结果很愚蠢。

索拉布

# javascript - Twitter的弹出框

> ID：15468443
> 
> 赞同：1
> 
> 时间：2013-03-18T01:28:12.157
> 
> 标签：javascript, html, css

我正在尝试制作 Twitter 提供的引导程序中包含的弹出框功能。我一直在努力让它工作一段时间，并且完全没有关于让它工作的想法，这是我目前拥有的样本[http://jsfiddle.net/JPf9y/1](http://jsfiddle.net/JPf9y/1)

**HTML**

```
<a href="#" class="btn-primary" rel="popover" data-original-title="title" data-content="content">popover</a> 
```

**Javascript**

```
$("a[rel=popover]").popover(); 
```

单击它时它不起作用，我检查以确保我的目录写入正确。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:40:14.443

您需要在页面中包含 bootstrap javascript、bootstrap css 和 jQuery javascript。它们可以在这里下载：

[http://twitter.github.com/bootstrap/assets/bootstrap.zip](http://twitter.github.com/bootstrap/assets/bootstrap.zip) [http://code.jquery.com/jquery-1.9.1.js](http://code.jquery.com/jquery-1.9.1.js)

对于 JSFiddle，您可以使用左侧的标签在左侧`Frameworks and Extensions`菜单下包含 jQuery 和其他文件，例如 bootstrap 的 js 和 css 。`External Resources`对于您的小提琴，我引用了来自[http://cdnjs.com/](http://cdnjs.com/)`.js`的和`.css`文件。

[http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.1/js/bootstrap.min.js](http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.1/js/bootstrap.min.js) [http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.1 /css/bootstrap.min.css](http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.1/css/bootstrap.min.css)

[更新了 JSFiddle](http://jsfiddle.net/JPf9y/3/)

# php - 在字符串中添加 php

> ID：15468444
> 
> 赞同：0
> 
> 时间：2013-03-18T01:28:14.150
> 
> 标签：php, html, wordpress

我要拿

```
$imgsrc = get_template_directory_uri() . '/s.php?strings='; 
```

并`the_content_rss('', TRUE, '', 4)`在字符串之后添加。

我该怎么做呢？

```
$imgsrc = get_template_directory_uri() . '/titles.php?strings=' . the_content_rss('', TRUE, '', 4); 
```

似乎没有输出单个 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:35:48.553

你应该明白的第一件事是

> 字符串连接需要**返回**值而不是输出/回显它们的函数。

因此，请确保`get_template_directory_uri()`并`the_content_rss('', TRUE, '', 4);`返回一个值而不是显示它们。如果两个函数都返回一个值，则 URL 应该按预期构建。

# php - 选择 * 从问题

> ID：15468445
> 
> 赞同：0
> 
> 时间：2013-03-18T01:28:19.070
> 
> 标签：php, mysql

我已经搜索了大约 30 分钟，但我在这里找不到问题......

```
if($middle == 'garage'){
    $result = mysql_query("SELECT * FROM character WHERE username = '$username'") or die(mysql_error());
    $row = mysql_fetch_array($result);
    $return['middle'] = $row['username'];
} 
```

出于某种原因，这正在返回

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'character WHERE username = 'Alcapwn'' 附近使用正确的语法

我已经尝试了很多东西，其他的 SELECT * FROM 查询工作正常，就是这个。包含它的表和行就在那里。如果我切换

```
$result = mysql_query("SELECT * FROM character WHERE username = '$username'") or die(mysql_error()); 
```

至

```
$result = mysql_query("SELECT * FROM users WHERE username = '$username'") or die(mysql_error()); 
```

第二个会起作用，但不是第一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T01:29:41.777

`character`是一个[保留的mysql字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，所以你必须把它括在反引号中

```
FROM `character` ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T01:31:21.417

似乎该**字符**是 MySQL 保留关键字，这意味着您不能将其用作表名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T01:31:22.633

“字符”是 MySQL 中的保留字。

[http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)

# java - 向 JList MULTIPLE_INTERVAL_SELECTION 添加限制

> ID：15468449
> 
> 赞同：1
> 
> 时间：2013-03-18T01:28:40.893
> 
> 标签：java, swing

我正在编写一个小型 Java 应用程序，但由于我的 Java 技能只有 2 或 3 个月大，我面临着一些技术难题。

我的问题如下：客户打电话给酒店并想租一个房间。员工（使用该应用程序）记下客户姓名、电话以及他到达和离开的日期（该部分已完成）。当客户到达我的酒店时，员工使用客户确认号找到预订。他现在有一个界面，他可以在其中看到所选舱位（经济舱、头等舱等）的可用房间。

我希望我的员工选择 X 数量的房间，其中 X 是客户订购的房间。我正在使用 JList 来显示房间号。问题是我只能将选择模式设置为单行或多行：

```
myList.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);
myList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION); 
```

我阅读了所有的 javadoc 并试图找到一种现有的方法来设置 MULTIPLE_INTERVAL_SELECTION 的限制，但徒劳无功。

有什么建议吗？

PS。我的英语不是最好的。我试图尽可能清楚地说明这一点。

# javascript - Firefox 性能滞后于大整数

> ID：15468457
> 
> 赞同：0
> 
> 时间：2013-03-18T01:29:31.097
> 
> 标签：javascript, firefox

## 背景故事

我正在寻找 2 的大幂。我的方法是将大数拆分为一个较小值的数组，然后将它们中的每一个相乘以获得下一个值。我为较小的块选择的最大大小为`1e15`. 然后我决定看看如果我使用新的数组缓冲区并且必须将最大大小减小到`1e9`. 发生了一些奇怪的事情，我得到的性能提升不是来自使用数组缓冲区，而是来自使用更小的整数。这是没有意义的，因为数字越大，函数循环遍历数组的次数就越少。

## 代码

```
var i=3
function run(){
  loop(50000,Math.pow(10,i),i++);
  if(i<16)setTimeout(run,100)
}
run();

function loop(pin,lim,id){
  var pow=110503;
  pow=pin||pow;
  var l=pow-1,val=[2];
  var t1,t2;
  //console.time(id);
  t1=new Date();
  while(l--){
    val=multiply(val,lim);
  }
  //console.timeEnd(id);
  t2=new Date();
  console.log(id,' ',t2-t1);
}

function multiply(a,lim){
  var l=a.length,val=0,carry=0;
  while(l--){
    val=a[l]*2+carry;
    carry=0;
    if(val>lim-1){
      var b=val%lim;
      carry=(val-b)/lim;
      val=b;
    }
    a[l]=val;
  }
  if(carry>0){a.unshift(carry)}
  return a;
} 
```

## 结果

IE10

```
 3 5539 
 4 4213 
 5 3329 
 6 2720 
 7 2341 
 8 2153 
 9 1948 
 10 1699 
 11 1508 
 12 1401 
 13 1309 
 14 1208 
 15 1133 
```

铬合金

```
3 5962
4 4385
5 3851
6 3242
7 2533
8 2207
9 1940
10 1794
11 1542
12 1604
13 1560
14 1414
15 1331 
```

火狐

```
3 3651 
4 2732 
5 2279 
6 1853 
7 1615 
8 1408 
9 1256 
10 2375 
11 2034 
12 1874 
13 1723 
14 1600 
15 1504 
```

## 问题

如您所见，Firefox 的性能优于 IE10 和 Chrome，直到 9 位数长的数字，然后它需要一个突然的时间跳跃。那么，它为什么要这样做呢？我想这可能与在可以存储在 32 个字节中的数字之间切换有关。我想使用 32 字节数字更有效；所以对于较小的数字，他们使用它们，然后在需要时切换到更大的整数类型。但如果这是真的，为什么它永远无法赶上 Chrome 和 IE 的性能，并且切换会导致这么多的性能损失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:16:15.067

SpiderMonkey (Firefox) 和 V8 (Chrome) 都尽可能使用 32 位整数，当数字不再适合 32 位 int 时切换到双精度数（不是更大的整数）。但请注意，“can”是启发式确定的，因为混合双精度和整数是有成本的，因为必须来回转换，所以 V8 可能没有决定在这里专门处理整数。

编辑：删除了关于需要来源的部分，因为它在原帖中就可以了！

# ruby-on-rails - 带有 default_scope 的 rails 3.2.12 中的 ActiveModel::MissingAttributeError

> ID：15468460
> 
> 赞同：0
> 
> 时间：2013-03-18T01:29:42.863
> 
> 标签：ruby-on-rails, ruby-on-rails-3, default-scope

我们希望`default_scope`灵活地使用页面上显示的列`customer index`。例如，如果用户不应该看到 customer `phone#`，那么我们从页面中删除`phone`并`default_scope`希望在页面上保留`phone`空白。`index`我们从网上得到了这个想法，正在做一个测试。`missing attribute:phone`但是选择时有错误`phone`。这是我们`default_scope`在`customer`模型中的定义：

```
def self.default_scope
      Customer.scoped.select("active,name,sales_id,customer_status_category_id, short_name, zone_id, id, since_date")
end 
```

索引页面：

```
<table>
  <tr>
    <th>#</th>
    <th>ShortName</th>
    <th>SinceDate</th>  
    <th>Phone</th>
    <th>Active?</th>
    <th>CustomerStatusCategory</th>
    <th>Sales</th>
    <th>LastContactDate</th>

  </tr>

<% @customers.each do |cust| %>
  <tr>

    <td><%= cust.id %></td>
    <td><%= cust.short_name %></td>
    <td><%= cust.since_date.strftime("%Y/%m/%d") %></td>
    <td><%= cust.phone if cust.phone.present? %></td>
    <td><%= cust.active %></td>
    <td><%= cust.customer_status_category.name %></td>
    <td><%= cust.sales.name %></td>    
    <td><%= return_last_contact_date(cust.id).strftime("%Y/%m/%d") %></td> 

  </tr>
<% end %>
</table> 
```

错误是：

```
 ActiveModel::MissingAttributeError in Customerx/customers#index

Showing C:/D/code/rails_proj/engines/customerx/app/views/customerx/customers/_index_partial.html.erb where line #32 raised:

missing attribute: phone 
```

是否可以通过故意不在`index`（或任何视图页面）中选择它来显示一个空列？如果可能，是否`default_scope`有合适的工具来实现这一目标？谢谢。

# amazon-web-services - EC2 上的代码部署

> ID：15468465
> 
> 赞同：3
> 
> 时间：2013-03-18T01:29:54.997
> 
> 标签：amazon-web-services, amazon-s3, amazon-ec2, amazon-cloudfront, continuous-deployment

有很多关于在 EC2 上部署 AMI 的资源。但是对于基于 PHP/Java 的网站的增量代码更新是否有任何解决方案？

假设我有 10 个 EC2 实例，它们都在运行基于 PHP/Java 的网站，并且该实例具有本地的 docroot。我可能想在一天中对其进行大量代码部署。

我不想在每次有代码更新时创建新的 AMI 副本并将其扩展到新实例。

任何有关如何最好地做到这一点的线索将不胜感激。我们使用 subversion 作为我们的主要代码存储库，在过去，当我们在一到两台服务器上时，我们只是简单地完成了 SVN 更新/co。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T01:33:04.680

您应该查看 Elastic Beanstalk。本质上，您只需打包您的 WAR 或其他代码文件，通过 AWS 的命令行/Eclipse 集成将其上传到存储桶，然后自动执行部署。

[http://aws.amazon.com/elasticbeanstalk/](http://aws.amazon.com/elasticbeanstalk/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T06:45:28.487

Elastic Beanstalk 正是为您而设计的。我们使用 Elastic Beanstalk java/tomcat 风格，但它也支持 php、ruby、python 环境。它具有允许您部署代码的 Web 控制台（它甚至保留它的历史记录），它还具有 git 工具来从命令行部署代码。

它还内置了监控、负载均衡器、自动缩放。只需几个 Web 表单条目即可控制所有这些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T09:56:09.710

Capistrano 是一次将代码部署到多个服务器的绝佳工具。Chef 和 Puppet 是使用数据库、网络服务器等设置这些服务器的绝佳工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T01:45:17.590

您是否考虑过使用旨在为您管理此类事情的工具，Puppet 在该领域备受推崇。

看看这里：

[https://puppetlabs.com/puppet/what-is-puppet/](https://puppetlabs.com/puppet/what-is-puppet/)

（不，我不是 Puppet Labs 的员工 :)）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T12:43:21.917

去 Capistrano 吧。它是在多台服务器上部署代码的好方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-27T19:53:46.377

如前所述，如果您只想要一个 Web 服务器并且不想担心细节，那么 Elastic Beanstalk 是一个不错的选择。

此外，请查看 AWS CodeDeploy。您可以更好地控制您的实例的生命周期，并且您将看到与您现在所拥有的非常相似的东西（您设置的一组 EC2 实例）。您甚至可以使用 Auto Scaling 在实例启动时获得自动部署。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-18T10:01:36.300

您可以使用 Capsitrano 或 TravisCI。

# c# - 从代码后面打开 jQuery UI 对话框

> ID：15468470
> 
> 赞同：1
> 
> 时间：2013-03-18T01:30:14.100
> 
> 标签：c#, javascript, jquery, asp.net

我是 jQuery 和 JavaScript 的新手，但遇到了问题。

我在从 Gridview 中的 ButtonField 打开 jQuery UI 对话框时遇到一些问题：

```
<asp:ButtonField ButtonType="link" Text="Modify Deadline" Visible="true" runat="server" CommandName="modifyDeadline" ControlStyle-CssClass="button" ItemStyle-CssClass="sliderPopupOpener"/> 
```

起初我尝试给上面一个类并将其命名为sliderPopupOpener，并使其在单击时打开jQuery Popup，如下所示：

```
$(".sliderPopupOpener").click(function () {
  $("#sliderPopup").dialog("open");
}); 
```

但是，由于回发，这不起作用，除此之外，它也不适用于我的方法。因为我想在显示 jQuery UI 对话框之前从数据库中获取一些数据。所以我认为最好的方法是从代码后面调用 Dialog 函数。

我怎样才能做到这一点？

我尝试了这种方法，但没有奏效，我不确定我是否做错了什么。

```
if (e.CommandName == "modifyDeadline")
{
     string sliderPopupFunction = @" <script type=""text/javascript""> 
                                        $(function () { 
                                            jQuery(function () {
                                                $(""#sliderPopup"").dialog(""open""); 
                                            }
                                         });
                                    </script>";
    ClientScript.RegisterStartupScript(typeof(Page), "key", sliderPopupFunction);
} 
```

以上可能吗？如果是这样，我做错了什么？

编辑：

我注意到每个人都在给出解决这个问题的方法，而不是告诉我这是否可能仅通过从代码背后调用 jQuery 函数来实现。尽管我很欣赏其他解决方案，但如果我能以尽可能少的努力通过背后的代码使其工作，我将不胜感激，因为我已经以这种方式准备好了一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T01:46:34.197

与其直接绑定`click`事件处理程序，不如尝试使用[`live`](http://api.jquery.com/live/)（自 jquery 1.7 起已弃用）或[`on`](http://api.jquery.com/on/).

这样，你应该改变这个：

```
$(".sliderPopupOpener").click(function () {
    $("#sliderPopup").dialog("open");
}); 
```

变成这样的东西：

```
$(body).on("click", ".sliderPopupOpener", function(){
    $("#sliderPopup").dialog("open");
}); 
```

# 选择

如果代码隐藏方法更适合您，您应该尝试直接在脚本中调用该方法，即更改此：

```
string sliderPopupFunction = @" <script type=""text/javascript""> 
                                    $(function () { 
                                        jQuery(function () {
                                            $(""#sliderPopup"").dialog(""open""); 
                                        }
                                     });
                                </script>"; 
```

简单地说：

```
string sliderPopupFunction = @" <script type=""text/javascript""> 
                                    $(""#sliderPopup"").dialog(""open""); 
                                </script>"; 
```

此外，如果您`sliderPopup`是服务器端控件，则应将 替换为`#sliderPopup`ASP .NET 生成的客户端 ID（使用`sliderPopup.ClientID`）。

要考虑的另一件事是，如果您`sliderPopup`位于更新面板内，则应首先尝试重新初始化 Jquery UI 对话框，如下所示：

```
$("#sliderPopup").dialog().dialog("open"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T01:35:46.497

我认为在这种情况下，您最好使用普通的旧`<input type="button/>`按钮并使用 ajax 执行对服务器的调用，然后将返回的数据附加到您的 html 并使用对话框。Ajax 将在不回发整个页面的情况下执行您的代码。

编辑：这是我不久前做的一个例子

```
//declaring the web method annotation allows this method to be accessed by ajax calls
//scriptmethod tells this method to take the data that we're returning, and encode it as a json so we can use it in javascript
        [WebMethod]
        [ScriptMethod(ResponseFormat = ResponseFormat.Json)] 
        public static List<Person> getPeople() {
            List<Person> people = null;
            using (testDataEntities context = new testDataEntities()) {

                people = context.People.ToList();

            }
            return people;
        } 
```

$(文档).ready(函数 () {

```
 $("#getPeople").click(function () {

            $.ajax({
                type: "POST",
                data: {},
                url: "Default.aspx/getPeople", //getPeople is the name of the method
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                  var data = msg.d;
                  var $table = $("<table></table>");
                   $.each(data,function(){
                    $table.append("<tr><td>"+this.MyProperty+"</td></tr>")
                    });
                  $table.dialog();
                }
            });

        });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T01:42:08.423

只需将 替换为`<asp:ButtonField`您`<asp:TemplateField`想要的任何内容：

```
<asp:TemplateField>
    <ItemTemplate>
        <input type="button" onclick='jsFunctionThatShowsTheDialog()'/>
    </ItemTemplate>
</asp:TemplateField> 
```

# python - 为什么 pygame.draw.shape 返回一个 Rect？

> ID：15468472
> 
> 赞同：1
> 
> 时间：2013-03-18T01:30:28.477
> 
> 标签：python, pygame, rect, geometry-surface

虽然我知道 draw 函数的目的是绘制到某个表面，但我不明白为什么它不简单地返回一个 pygame.Surface 对象，您可以稍后在需要时将其 blit 到表面。到目前为止，当我只想创建一个表面并稍后将其绘制到其他东西上时，这非常不方便。

有什么方法可以让您获得类似的函数来返回表面对象，而不是执行额外的步骤并直接绘制到另一个表面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:42:10.847

要制作具有您想要的形状的表面，而不是绘制到原始表面，您绘制到另一个表面，然后您可以将其粘贴到原始表面。

至于为什么绘制函数返回一个矩形，它可以通过只更新需要更新的屏幕部分来优化您的代码。你这样做的方式是每次你想在屏幕上画一些东西时，你将它返回的矩形附加到一个列表中，当你去更新屏幕时，你这样做：

```
pygame.display.update(rect_list) 
```

# python - 尝试终止在线程上运行的 python 子进程时的行为不一致

> ID：15468476
> 
> 赞同：1
> 
> 时间：2013-03-18T01:30:45.087
> 
> 标签：python, multithreading, subprocess, terminate, long-running-processes

当我尝试终止在单独线程上运行的长时间运行的进程时，我遇到了问题。

下面是程序。WorkOne 创建一个子进程并运行一个长时间运行的进程“adb logcat”，该进程会生成日志行。我在 main() 中启动 WorkOne，等待 5 秒并尝试停止它。多次运行给出多个输出

```
import threading
import time
import subprocess
import sys

class WorkOne(threading.Thread):

    def __init__(self):
        threading.Thread.__init__(self)
        self.event = threading.Event()  
        self.process = subprocess.Popen(['adb','logcat'], stdout=subprocess.PIPE, stderr=sys.stdout.fileno())      

    def run(self):   
        for line in iter(self.process.stdout.readline,''):            
            #print line
            if self.event.is_set():
                self.process.terminate()
                self.process.kill()
                break;
        print 'exited For'

    def stop(self):
        self.event.set()

def main():

    print 'starting worker1'
    worker1 = WorkOne()
    worker1.start()
    print 'number of threads: ' + str(threading.active_count())
    time.sleep(5)
    worker1.stop()
    worker1.join(5)
    print 'number of threads: ' + str(threading.active_count())

if __name__ == '__main__':
    main() 
```

有时我会得到 [A]：

```
starting worker1
number of threads: 2
number of threads: 2
exited For 
```

有时我会得到 [B]：

```
starting worker1
number of threads: 2
number of threads: 1
exited For 
```

有时我会得到 [C]：

```
starting worker1
number of threads: 2
number of threads: 2 
```

我想我应该一直期望得到[B]。这里出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:11:18.800

改变

```
 if self.event.is_set():
            self.process.terminate()
            self.process.kill()
            break; 
```

到

```
 if self.event.is_set():
            self.process.terminate()
            self.process.wait()
            break 
```

分号是一个死的赠品，这里有一个问题。

我猜如果没有线程有时会过早`wait()`地解除阻塞。`work1.join(5)`在这些情况下，`threading.active_count()`返回 2。

而且，正如@A.Rodas 所说，`work1.join(5)`应该`work1.join()`确保连接在完成之前不会解除阻塞`work1`。

* * *

顺便说一句，我不知道你为什么要`terminate`接连打电话`kill`。在 Unix 上，kill 是一种更严格的终止形式。在 Windows 上，它们是相同的。因此，如果您要调用 kill，则无需调用 terminate。

由于您知道由 调用的程序`subprocess`，因此您还应该知道终止是否足以停止它。

因此，您应该只需要一个：要么`self.process.terminate()`或`self.process.kill()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T02:34:26.533

我认为 [B] 只有在子进程花费不到 10 秒的情况下才有可能：主线程休眠 5 秒，然后`worker`在`join()`.

10 秒或更长时间，`worker`即使在调用之后也可以存活，`join()`因为它有一个超时参数，这可能发生也可能不发生。然后你可以得到 [A] （子进程几秒钟后完成）或 [C] （子进程更晚完成）。

要始终获得 [B]，请删除 的 timeout 参数，`join()`以便主线程等待`worker`完成（或通过将 kill 调用置于循环之外，确保在 10 秒内终止进程）。

# c# - 使用 C# 将 Image src 动态添加到 HTML

> ID：15468477
> 
> 赞同：0
> 
> 时间：2013-03-18T01:30:46.643
> 
> 标签：c#, html

当我尝试使用“InnerHtml”添加动态图像时，我的 sql 数据库中有图像路径存储，它不能像这样使用 HTML 代码

```
<div runat=server class="ws_images" id="List_Slide">
</div> 
```

像这样的C#代码

```
List_Slide.InnerHtml = "<li><img src=data1/images/31.jpg alt=31 title=31 id=wows1_0/>      </li>" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:36:39.757

您可以在后面的代码中添加一个 with`runat="Server"`并设置 'src' 属性：

**HTML：**

```
<img runat="server" id="img31" /> 
```

**CS：**

```
((HtmlImage)img31).Src = "data1/images/31.jpg"; 
```

# objective-c - 是否可以检查 NSThread 是否被阻塞？

> ID：15468479
> 
> 赞同：12
> 
> 时间：2013-03-18T01:30:51.237
> 
> 标签：objective-c, locking, pthreads

我一直对如何编写以下代码以将其用于单元测试感兴趣：

**是否可以使用检查特定线程是否被阻塞的方法来扩展 NSThread？**

现在我正在使用 NSCondition：Xcode 向我展示了由*-wait*调用以阻塞线程的链：

```
[NSCondition wait] 
pthread_cond_wait$UNIX2003
_pthread_cond_wait
__psynch_cvwait 
```

除了检查 NSCondition 完成的锁之外，如果可能的话，我非常感谢方法也适用于任何其他阻塞功能（调度信号量、条件锁、休眠线程等）——我不知道 Objective-C 的内部结构，如果它们可以被一种方法捕获，或者每种方法都需要自己的方法。

这是我想要实现的一个简单示例。这个神秘的方法叫做**isBlocked**。

```
// Some test case
// ...

__block NSThread *thread;
NSCondition *condition = [NSCondition alloc] init];

dispatch_async(someQueue(), ^{
    thread = NSThread.currentThread; 

    [condition lock];
    [condition wait];
    [condition unlock];
});

while(1) {
    NSLog(@"Thread is blocked: %d", thread.isBlocked);
} 
```

**注意：**我不擅长 C 和所有这些低级 POSIX 的东西，所以，请详细一点。

**注2：**我对调度队列的解决方案也很感兴趣：如果有人可以告诉我如何测试 someQueue() 被 -[NSCondition wait] 阻止的事实（而不是它将被阻止的事实（fx在 -[condition wait] 运行并设置块之前破解一些代码），但**线程/队列被**阻塞的事实），我会像处理 -[NSThread isBlocked] 方法一样接受这个作为答案.

**注 3：**怀疑像“不可能”这样的坏消息，我声称任何关于捕获 -[condition wait] 已运行并且线程被设置为阻塞（见注 2）这一事实的想法都值得赞赏，也可以被接受为一个答案！

**更新 1**以解决 Richard J. Ross III 的好答案。不幸的是，他的回答在我原来的例子中不起作用，这个版本更接近我的真实工作（尽管它与我最初提供的例子没有太大区别——很抱歉我没有将它包含在第一版问题）：

```
// Example

// Here I've bootstrapped Richard's isLocking categories for both NSThread and NSCondition
// ...

// somewhere in SenTesting test case...
__block NSThread *thread;
NSCondition *condition = [NSCondition alloc] init];
__block BOOL wePassedBlocking = NO;

dispatch_async(someQueue(), ^{
    thread = NSThread.currentThread; 

    [condition lock];
    [condition wait];
    [condition unlock];

    wePassedBlocking = YES; // (*) This line is occasionally never reached!
});

while(!thread.isWaitingOnCondition); // I want this loop to exit after the condition really locks someQueue() and _thread_ __.

// sleep(1);

[condition lock];
[condition broadcast]; // BUT SOMETIMES this line is called before -[condition wait] is called inside someQueue() so the entire test case becomes blocked!
[condition unlock];

while(!wePassedBlocking); // (*) And so this loop occasionally never ends! 
```

如果我取消注释**sleep(1)**测试开始工作非常稳定，没有任何偶尔的锁定！

这导致我们遇到问题，Richard 的类别确实**在实际阻塞完成之前设置状态正好一行，这**意味着**有时**测试用例的主线程在我们实际阻塞*someQueue/thread*之前捕获这个新状态，因为 Richard 的代码**不包含任何同步机制：@synchronized、NSLock 或类似的东西**！我希望我能清楚地解释这个棘手的案例。对于任何对我在这里发布的内容有疑问的人，我想说我也一直在尝试多个队列甚至更复杂的案例，如果需要，我准备提供更多示例。理查德，再次感谢您的努力，如果您理解我的这些观点，让我们一起思考更多！

**更新 2**

我看到了一个死胡同：显然，要真正设置**waitingOnCondition**的状态，我们需要将此状态的更改包装在一些同步闭包中，但问题是关闭同步锁，解锁同步锁，应该在 -[condition wait]，但它不能，因为线程已经被阻塞。再次，我希望我描述得很清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T12:00:02.940

干得好！它不会检测除 之外的任何其他线程正在等待`-[NSCondition wait]`，但它可以很容易地扩展到检测其他类型的等待。

它可能不是最好的实现，但它确实有效，并且会做你需要做的事情。

```
#import <objc/runtime.h>

@implementation NSThread(isLocking)

static int waiting_condition_key;

-(BOOL) isWaitingOnCondition {
    // here, we sleep for a microsecond (1 millionth of a second) so that the
    // other thread can catch up,  and actually call 'wait'. This time
    // interval is so small that you will never notice it in an actual
    // application, it's just here because of how multithreaded
    // applications work.    
    usleep(1);

    BOOL val = [objc_getAssociatedObject(self, &waiting_condition_key) boolValue];

    // sleep before and after so it works on both edges
    usleep(1);

    return val;
}

-(void) setIsWaitingOnCondition:(BOOL) value {
        objc_setAssociatedObject(self, &waiting_condition_key, @(value), OBJC_ASSOCIATION_RETAIN);
}

@end

@implementation NSCondition(isLocking)

+(void) load {
    Method old = class_getInstanceMethod(self, @selector(wait));
    Method new = class_getInstanceMethod(self, @selector(_wait));

    method_exchangeImplementations(old, new);
}

-(void) _wait {
    // this is the replacement for the original wait method
    [[NSThread currentThread] setIsWaitingOnCondition:YES];

    // call  the original implementation, which now resides in the same name as this method
    [self _wait];

    [[NSThread currentThread] setIsWaitingOnCondition:NO];
}

@end

int main()
{
    __block NSCondition *condition = [NSCondition new];

    NSThread *otherThread = [[NSThread alloc] initWithTarget:^{
        NSLog(@"Thread started");

        [condition lock];
        [condition wait];
        [condition unlock];

        NSLog(@"Thread ended");
    } selector:@selector(invoke) object:nil];
    [otherThread start];

    while (![otherThread isWaitingOnCondition]);

    [condition lock];
    [condition signal];
    [condition unlock];

    NSLog(@"%i", [otherThread isWaitingOnCondition]);
} 
```

输出：

```
2013-03-20 10:43:01.422 TestProj[11354:1803] 线程开始
2013-03-20 10:43:01.424 TestProj[11354:1803] 线程结束
2013-03-20 10:43:01.425 测试项目 [11354:303] 0

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:00:19.183

这是使用的解决方案`dispatch_semaphore_t`

**PGFoo.h**

```
#import <Foundation/Foundation.h>

@interface PGFoo : NSObject

- (void)longRunningAsynchronousMethod:(void (^)(NSInteger result))completion;

@end 
```

**PGFoo.m**

```
#import "PGFoo.h"

@implementation PGFoo

- (void)longRunningAsynchronousMethod:(void (^)(NSInteger))completion {
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        sleep(5);
        completion(1);
    });
}

@end 
```

**测试方法**

```
- (void)testThatFailsBecauseItIsImpatient {
    PGFoo *foo = [[PGFoo alloc] init];
    __block NSInteger theResult = 0;
    [foo longRunningAsynchronousMethod:^(NSInteger result) {
        theResult = result;
    }];

    STAssertEquals(theResult, 1, nil);
}

- (void)testThatPassesBecauseItIsPatient {
    PGFoo *foo = [[PGFoo alloc] init];
    __block NSInteger theResult = 0;
    dispatch_semaphore_t semaphore = dispatch_semaphore_create(0);
    [foo longRunningAsynchronousMethod:^(NSInteger result) {
        theResult = result;
        dispatch_semaphore_signal(semaphore);
    }];

    dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);

    STAssertEquals(theResult, 1, nil);
} 
```

通过使用，`dispatch_semaphore_t`您可以“跟踪”正在等待该信号量的线程是否被阻塞。对于`dispatch_semaphore_wait`信号量的每次调用，计数都会递减，并且线程会一直等待，直到调用`dispatch_semaphore_signal`，当`dispatch_semaphore_signal`被调用时，如果计数增加到大于`-1`线程继续的值，则信号量的计数会增加。

该解决方案无法回答您有关检查 an`NSThread`是否“被阻止”的问题，但我认为它提供了您想要的内容，假设您没有到达检查`NSThread`现有框架内维护的实例。

# c# - Dijkstra 的算法实现给出了不正确的结果

> ID：15468485
> 
> 赞同：5
> 
> 时间：2013-03-18T01:31:13.433
> 
> 标签：c#, algorithm, dijkstra

我需要一些帮助来实施 Dijkstra 算法，并希望有人能够帮助我。我有它，以便它打印一些路线，但它没有捕获路径的正确成本。

这是我的节点结构：

```
 class Node
    {
        public enum Color {White, Gray, Black};
        public string Name { get; set; } //city
        public List<NeighborNode> Neighbors { get; set; } //Connected Edges
        public Color nodeColor = Color.White;
        public int timeDiscover { get; set; }//discover time
        public int timeFinish { get; set; } // finish time

        public Node() 
        { 
            Neighbors = new List<NeighborNode>();
        }
        public Node(string n, int discover)
        {
            Neighbors = new List<NeighborNode>();
            this.Name = n;
            timeDiscover = discover;
        }

        public Node(string n, NeighborNode e, decimal m)
        {
            Neighbors = new List<NeighborNode>();
            this.Name = n;
            this.Neighbors.Add(e);
        }

    }

    class NeighborNode
    {
        public Node Name { get; set; }
        public decimal Miles { get; set; } //Track the miles on the neighbor node

        public NeighborNode() { }
        public NeighborNode(Node n, decimal m)
        {
            Name = n;
            Miles = m;
        }

    } 
```

这是我的算法：

```
 public void DijkstraAlgorithm(List<Node> graph)
    {

        List<DA> _algorithmList = new List<DA>(); //track the node cost/positioning
        Stack<Node> _allCities = new Stack<Node>(); // add all cities into this for examination
        Node _nodeToExamine = new Node(); //this is the node we're currently looking at.
        decimal _cost = 0;

        foreach (var city in graph) // putting these onto a stack for easy manipulation. Probably could have just made this a stack to start
        {
            _allCities.Push(city);
            _algorithmList.Add(new DA(city));
        }

        _nodeToExamine = _allCities.Pop(); //pop off the first node

        while (_allCities.Count != 0) // loop through each city
        {

            foreach (var neighbor in _nodeToExamine.Neighbors) //loop through each neighbor of the node
            {
                for (int i = 0; i < _algorithmList.Count; i++) //search the alorithm list for the current neighbor node
                {
                    if (_algorithmList[i].Name.Name == neighbor.Name.Name) //found it
                    {
                        for (int j = 0; j < _algorithmList.Count; j++) //check for the cost of the parent node
                        {
                            if (_algorithmList[j].Name.Name == _nodeToExamine.Name) //looping through
                            {
                                if (_algorithmList[j].Cost != 100000000) //not infinity
                                    _cost = _algorithmList[j].Cost; //set the cost to be the parent cost

                                break;
                            }
                        }
                        _cost = _cost + neighbor.Miles;

                        if (_algorithmList[i].Cost > _cost) // check to make sure the miles are less (better path)
                        {
                            _algorithmList[i].Parent = _nodeToExamine; //set the parent to be the top node
                            _algorithmList[i].Cost = _cost; // set the weight to be correct
                            break;
                        }
                    }
                }

            }
            _cost = 0;
            _nodeToExamine = _allCities.Pop();
        }
    } 
```

这是图表的样子： ![在此处输入图像描述](../Images/9570f8e72484508bbdd0fb15260e363f.png)

图列表节点本质上是

> 节点——相邻节点

例如：

> 节点 = Olympia，相邻节点 = Lacey 和 Tacoma

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T01:33:10.877

我认为问题在于

`_cost = _algorithmList[j].Cost; //set the cost to be the parent cost`

您直接分配成本，而不是添加新旧成本。

此外，你这样做的事实

`if (_algorithmList[j].Cost != 100000000) //not infinity`

直接在它之前意味着如果路径的成本是无穷大的，那么你会做相反的事情 - 你将路径的成本**加为零**，使其成为最便宜的路径而不是最昂贵的路径。

如果要正确检查无穷大，则必须在检查其成本时完全跳过该路径，而不仅仅是跳过计算成本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T03:56:53.083

我需要重写整个算法，因为它没有正确处理：

```
 public void DijkstraAlgorithm(List<Node> graph)
    {

        List<DA> _algorithmList = new List<DA>(); //track the node cost/positioning
        DA _nodeToExamine = new DA(); //this is the node we're currently looking at.
        bool flag = true; //for exting the while loop later

        foreach (var node in graph)
        {
            _algorithmList.Add(new DA(node));
        }

        foreach (var children in _algorithmList[0].Name.Neighbors) //just starting at the first node
        {
            for (int i = 0; i < _algorithmList.Count; i++)
            {
                if (children.Name == _algorithmList[i].Name)
                {
                    _algorithmList[i].Parent = _algorithmList[0].Name;
                    _algorithmList[i].Cost = children.Miles;
                    _algorithmList[0].Complete = true;

                }
            }
        }

        while (flag) //loop through the rest to organize
        {
            _algorithmList = _algorithmList.OrderBy(x => x.Cost).ToList(); //sort by shortest path

            for (int i = 0; i < _algorithmList.Count; i++) //loop through each looking for a node that isn't complete
            {
                if (_algorithmList[i].Complete == false)
                {
                    _nodeToExamine = _algorithmList[i];
                    break;
                }
                if (i == 13) //if the counter reaches 13 then we have completed all nodes and should bail out of the loop
                    flag = false;
            }
            if (_nodeToExamine.Name.Neighbors.Count == 0) //set any nodes that do not have children to be complete
            {
                _nodeToExamine.Complete = true;
            }

            foreach (var children in _nodeToExamine.Name.Neighbors) //loop through the children/neighbors to see if there's one with a shorter path
            {
                for (int i = 0; i < _algorithmList.Count; i++) 
                {
                    if (children.Name == _algorithmList[i].Name)
                    {
                        if (_nodeToExamine.Cost + children.Miles < _algorithmList[i].Cost) //found a better path
                        {
                            _algorithmList[i].Parent = _nodeToExamine.Name;
                            _algorithmList[i].Cost = _nodeToExamine.Cost + children.Miles;
                        }
                    }
                }
                _nodeToExamine.Complete = true;
            }
        }

        PrintDijkstraAlgoirthm(_algorithmList);
    }

    public void PrintDijkstraAlgoirthm(List<DA> _finalList)
    {
        foreach (var item in _finalList)
        {
           if (item.Parent != null)
                Console.WriteLine("{0} ---> {1}: {2}", item.Parent.Name, item.Name.Name, item.Cost);
        }
    } 
```

# css - 如何为背景颜色添加颗粒类型外观

> ID：15468494
> 
> 赞同：2
> 
> 时间：2013-03-18T01:32:12.963
> 
> 标签：css, html, colors, background-color

请注意，蓝色侧边栏添加了颗粒效果。

如何在**不使用图像的情况下**实现这一目标？

![在此处输入图像描述](../Images/aeb1fa10867d276c707e691ab52181d2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T01:41:04.087

您可以创建仅具有几种颜色的纹理图像以实现颗粒效果。作为 GIF 或类似的，如果你做得对，它只会达到几百字节。也就是说，制作一个小图像并将其平铺。

如果您想了解特定站点是如何实现该效果的，请使用 DOM 检查器检查元素背后的代码。如果您右键单击并选择“检查元素”，Chrome 就会内置此功能。我打赌你会发现有一个背景图像。

# java - JComboxBox 选择

> ID：15468501
> 
> 赞同：-1
> 
> 时间：2013-03-18T01:33:37.657
> 
> 标签：java, swing, jcombobox

我有三个 JComboBox；并且基于第一个和第二个 JComboBoxes，第三个 JComboBox 应该
显示不同的值。我能够获得第三个 JComboBox 上的值，但由于某种原因，它会将值附加到先前的选择中。例如，

JCombo1 - A、B、C、D、E、F
JCombo2 - A1、A2、A3、A4、A5
JCombo3 - AA1、AA2、AA3、AA4、AA5

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:51:03.040

据我了解，您要求附加 JComboBox1,jComboBox2（直到 jCombo2 中可用的项目）。

```
 private void jComboBox1ActionPerformed(java.awt.event.ActionEvent evt) {
    this.jComboBox3.removeAllItems();
    String boxOneValue = jComboBox1.getSelectedItem().toString();
    for(int i = 0; i < jComboBox2.getItemCount(); i++) {
        jComboBox3.addItem(boxOneValue + jComboBox2.getItemAt(i));
    }
} 
```

# javascript - 如何在 Google maps v3 API 上异步添加标记？

> ID：15468504
> 
> 赞同：1
> 
> 时间：2013-03-18T01:34:24.083
> 
> 标签：javascript, ajax, google-maps, jquery, google-maps-api-3

到目前为止，我一直在关注[有关如何在地图上添加标记的官方文档](https://developers.google.com/maps/documentation/javascript/overlays?hl=en#Markers)

尽管如此，我一次最多只能看到一个标记。如果我尝试添加另一个，那么它不起作用（我什至看不到第一个）。我的过程如下：

我初始化 gmaps api：

```
 jQuery(window).ready(function(){ 
        //If we click on Find me Lakes
        jQuery("#btnInit").click(initiate_geolocation);
    });

    function initiate_geolocation() {  
        if (navigator.geolocation)  
        {  
            var script = document.createElement("script");
            script.type = "text/javascript";
            script.src = "https://maps.googleapis.com/maps/api/js?key=AIzaSyBbfJJVh0jL1X9b7XFDcPuV7nHD1HlfsKs&sensor=true&callback=initialize";
            document.body.appendChild(script);

            navigator.geolocation.getCurrentPosition(handle_geolocation_query, handle_errors);
        }  
        else  
        {  
            yqlgeo.get('visitor', normalize_yql_response);
        }  
    } 
```

然后，我将它显示在适当的 div 上。但是在进行 AJAX 调用时，为了获取我想要显示的不同标记的位置，它无法正常工作。这是显示简单地图的代码（因为这是迄今为止唯一对我有用的东西）。

```
 function handle_geolocation_query(position){ 

        var mapOptions = {
            zoom: 14,
            center: new google.maps.LatLng(position.coords.latitude, position.coords.longitude),
            mapTypeId: google.maps.MapTypeId.SATELLITE
          }

        alert('Lat: ' + position.coords.latitude + ' ' +  
              'Lon: ' + position.coords.longitude);

        $('#map-canvas').slideToggle('slow', function(){
            var map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
        });

        $.when( getLakes(position.coords.latitude, position.coords.longitude)).done(function(results) {
            // InitializeGoogleMaps(results);
            if(results)
            var data = results.map(function (lake) {
                //Check if the lake has any open swims, if not, the button will not be clickable and an alert will pop up
                if (lake.available>0)
                    clickable=true;
                else
                    clickable=false;

                    return {
                        name: lake.name,
                        fishs: lake.fisheryType,
                        swims: lake.swims,
                        dist: lake.distance,
                        lat: lake.latitude,
                        long: lake.longitude,
                        id: lake.id,
                        avail: lake.available,
                        clickable: clickable,
                        route: Routing.generate('lake_display', { id:  lake.id, lat: position.coords.latitude, lng: position.coords.longitude})
                    }
                });

            var template = Handlebars.compile( $('#template').html() );
            $('#list').append( template(data) );

        } );
    }; 
```

所以我想在 AJAX 调用之后添加标记。我已经设置了一个应该在 when() 中调用的函数

```
function InitializeGoogleMaps(results) {

}; 
```

在 foreach 循环中显示标记但不，不能让它工作。它看起来像这样：

```
CentralPark = new google.maps.LatLng(37.7699298, -122.4469157);
marker = new google.maps.Marker({
    position: location,
    map: map
}); 
```

任何帮助都会很棒！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T01:57:35.723

主要问题是该`map`变量仅在 slideToggle 上的匿名回调范围内声明。首先在顶级函数范围声明。

```
function handle_geolocation_query(position){ 

    var map,
        mapOptions = {
            zoom: 14,
            center: new google.maps.LatLng(position.coords.latitude, position.coords.longitude),
            mapTypeId: google.maps.MapTypeId.SATELLITE
        }
    ... 
```

然后更改 slideToggle 回调以初始化变量而不是重新声明：

```
$('#map-canvas').slideToggle('slow', function(){
    map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
}); 
```

然后你应该`map`作为第二个参数传递给你的`InitializeGoogleMaps`函数并使用`InitializeGoogleMaps(results, map)`. 看看这对你有什么好处，如有任何问题，请回复我。

# java - 在一个语句中从两个表中删除

> ID：15468505
> 
> 赞同：1
> 
> 时间：2013-03-18T01:34:35.763
> 
> 标签：java, sql, derby

我希望能够从 2 个表中删除所有数据，其中用户的 id = 给定的 id。我正在使用 Java、Derby DB、Netbeans 7.3 Beta 2 和 OS X Mountain Lion。

我有两张桌子（对巨大的图像感到抱歉）：

![在此处输入图像描述](../Images/7e99f18fbe24b25aad63ac2572aa1626.png)

这是我到目前为止的声明：

```
String stmt2 = "DELETE FROM APP.PERSON JOIN APP.DATAVAULT WHERE PID = ?";                    
PreparedStatement ps2 = Main.getPreparedStatement(stmt2);
ps2 = conn.prepareStatement(stmt2);
ps2.setInt(1, user.getId());
ps2.executeUpdate();
System.out.println("Deleted"); 
```

我不明白如何从 APP.DATAVAULT 以及 APP.PERSON 中删除。如您所见，APP.DATAVAULT 中有一个外键，它是用户 ID。

我尝试了很多事情，例如：

```
String stmt2 = "DELETE FROM APP.PERSON, APP.DATAVAULT WHERE PID = ?"; 
```

和

```
String stmt2 = "DELETE FROM APP.PERSON AND APP.DATAVAULT WHERE PID = ?"; 
```

我知道我必须使用外键从两者中删除，但我不知道如何。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T01:41:14.087

不幸的是，根据[文档](http://db.apache.org/derby/docs/10.9/ref/index.html)，您不能在 Derby 中使用单个 SQL 查询删除多个表。

您*可以*使用其他一些 RDBMS 包，例如[MySQL](http://dev.mysql.com/doc/refman/5.0/en/delete.html) ......只是没有 Derby。

# sql - Oracle SQL 向具有日期范围的表中插入多行

> ID：15468507
> 
> 赞同：0
> 
> 时间：2013-03-18T01:35:01.727
> 
> 标签：sql, oracle, calendar

我找到了一个相关问题的以下答案。

```
with calendar as(
    select :startdate + rownum - 1 as day
    from dual
    connect by rownum < :enddate - startdate
)
select rownum as "S.No", to_date(day,'dd_mm_yyyy') as "Cal_Dt", to_char(day,'day') as "DayName"
from calendar 
```

此 SQL 为一系列日期生成许多日期和相关信息。有人可以告诉我如何将其包装到 SQL 语句中，以便可以将 select 之外的内容（所有行）插入到另一个表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:07:41.773

伪列`LEVEL`也可以工作

```
insert into tgt_tbl(id,dt,dy)
select distinct level,:startdate+level-1,to_char(:startdate+level-1,'Day') from dual
connect by level<=(:enddate-:startdate)+1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T01:38:20.523

如果要插入数据的表已经存在，请使用`INSERT INTO`：

```
with calendar as ( 
    select :startdate + rownum - 1 as day 
    from dual 
    connect by rownum < :enddate - startdate ) 
insert into anothertable (no, dt, dayname)
select rownum as "S.No", to_date(day,'dd_mm_yyyy') as "Cal_Dt", to_char(day,'day') as "DayName" 
from calendar 
```

~~或者使用`SELECT INTO`语法创建新表：~~

 ~~```
with calendar as ( 
    select :startdate + rownum - 1 as day 
    from dual 
    connect by rownum < :enddate - startdate ) 
select rownum as "S.No", to_date(day,'dd_mm_yyyy') as "Cal_Dt", to_char(day,'day') as "DayName" into newtable
from calendar 
```~~ 

~~*编辑——实际上评论是完全正确的——没有考虑 Oracle :-) 这是从 Oracle 中的 SQL 语句创建表的正确方法：*~~

 ~~```
with calendar as ( 
    select :startdate + rownum - 1 as day 
    from dual 
    connect by rownum < :enddate - startdate ) 
CREATE TABLE newtable
AS 
(select rownum as "S.No", to_date(day,'dd_mm_yyyy') as "Cal_Dt", to_char(day,'day') as "DayName"
from calendar) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-07T11:52:46.270

```
CREATE TABLE DATES_TABLE 
(
  Date_Field   DATE
);

INSERT INTO DATES_TABLE
(
  Date_Field
)
SELECT ROWNUM - 1 + TO_DATE('01-Jun-2004','dd-mon-yyyy') Date_Field
FROM all_objects
WHERE ROWNUM < TO_DATE('30-Jun-2004','dd-mon-yyyy') - TO_DATE('01-Jun-2004','dd-mon-yyyy') + 2; 
```

尝试更改这些日期值以获取所需范围内的日期值~~

# sql - 工会操作员练习

> ID：15468510
> 
> 赞同：0
> 
> 时间：2013-03-18T01:35:28.413
> 
> 标签：sql, oracle11g

我的练习要求编写一个包含`UNION`两个`SELECT`s 的查询，其中包含列`REGION_ID, REGION_NAME, COUNTRY_NAME`和“位置编号”。结果必须是所有国家/地区的列表以及该国家/地区的位置数量。该列表必须按地区 ID 和国家/地区名称排序。

我不太明白 operator 的逻辑`union`，这个查询的结果必须有所有国家的列表以及该国的位置数。我所做的是：

```
(select reg.region_id, reg.region_name, coun.country_name
from countries coun, regions reg
where reg.region_id=coun.region_id
order by region_id, country_name)
UNION
(select ...); 
```

我不确定接下来会发生什么。我不确定我写的参数是否正确。我想知道如何在`union`这里使用运算符。顺便说一句，我正在使用 hr 表模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:42:25.453

我认为您教授想要的是在同一列中列出的国家名称和地区名称。在这种情况下，使用 UNION 很有意义。结果查询将类似于：

```
(select region_id, 0, region_name
from regions)
UNION
(select reg.region_id, coun.contry_id, coun.country_name
from countries coun, regions reg
where reg.region_id=coun.region_id)
order by 1, 2 
```

在上面的查询中，我假设您有一个名为 country_id 的列（它有利于排序，因此首先是区域 #1，然后是属于该区域的所有国家，然后是区域 #2 及其国家，等等）如果您没有 country_id，您可以使用以下查询实现相同的排序：

```
(select region_id, 0, region_name
from regions)
UNION
(select reg.region_id, 1, coun.country_name
from countries coun, regions reg
where reg.region_id=coun.region_id)
order by 1, 2, 3 
```

# r - 按周计算每日观察次数

> ID：15468511
> 
> 赞同：3
> 
> 时间：2013-03-18T01:35:31.160
> 
> 标签：r, time-series

我有两个数据框。一个具有不均匀的每日计数（名为`y`），另一个具有均匀分布的每周数据（名为`gIm`；两个变量表示日期：`weekStart`和`weekEnd`）。我想计算每周之间`weekStart`和`weekEnd`每周的所有日常观察，并将这个新的计数向量附加到我的每周数据框中。

```
y<-y[order(as.Date(y$date, format="%Y/%m/%d")),] # Sort by week
start<-unique(gIm$weekStart)
end<-unique(gIm$weekEnd)
gIm$count<-NA

for(l in 1:length(gIm[,1])){ # index by weeks in gIm--365 weeks
for(i in 1:nrow(y)){ # index by no. obs in y
gIm$count[i]<-sum(y$count[y$date >= start[l] & y$date <=end[l] ], na.rm=TRUE)
}
} 
```

这是我间隔不均匀的每日数据（为长度道歉）：

```
structure(list(date = structure(c(12437, 12478, 12486, 12487, 
12493, 12494, 12495, 12500, 12502, 12506, 12900, 12955, 12962, 
12964, 12977, 12982, 12983, 12985, 12991, 12992, 12993, 13032, 
13033, 13034, 13041, 13046, 13048, 13053, 13055, 13063, 13073, 
13074, 13075, 13082, 13083, 13084, 13094, 13096, 13097, 13101, 
13103, 13104, 13105, 13123, 13124, 13125, 13130, 13133, 13209, 
13214, 13235, 13242, 13244, 13263, 13272, 13277, 13285, 13291, 
13293, 13305, 13306, 13311, 13312, 13314, 13320, 13328, 13339, 
13342, 13346, 13354, 13356, 13357, 13405, 13406, 13410, 13419, 
13420, 13489, 13517, 13518, 13522, 13523, 13525, 13530, 13531, 
13535, 13542, 13543, 13544, 13550, 13551, 13552, 13559, 13560, 
13572, 13573, 13577, 13578, 13579, 13580, 13581, 13585, 13587, 
13592, 13593, 13594, 13600, 13601, 13620, 13621, 13622, 13626, 
13641, 13643, 13647, 13650, 13654, 13657, 13686, 13692, 13704, 
13711, 13717, 13718, 13720, 13726, 14569, 14629, 14630, 14637, 
14642, 14644, 14664, 14672, 14677, 14683, 14713, 14727, 14736, 
14272, 14782, 14789, 14805, 14816, 14825, 14866, 14874, 14880, 
14881, 14930, 14943, 14287, 14314, 14329, 14336, 14250, 14357, 
14362, 14369, 14370), class = "Date"), count = c(1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 2L, 1L, 3L, 1L, 2L, 1L, 1L, 1L, 
1L, 1L, 3L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 3L, 1L, 1L, 2L, 1L, 1L, 
1L, 1L, 1L, 2L, 2L, 1L, 1L, 1L, 2L, 1L, 2L, 3L, 1L, 3L, 1L, 1L, 
1L, 2L, 1L, 1L, 1L, 1L, 2L, 3L, 1L, 2L, 1L, 1L, 1L, 1L, 3L, 1L, 
1L, 1L, 1L, 3L, 1L, 1L, 2L, 2L, 1L, 2L, 1L, 12L, 2L, 1L, 1L, 
1L, 2L, 2L, 1L, 1L, 1L, 1L, 3L, 1L, 2L, 1L, 2L, 2L, 1L, 1L, 3L, 
1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 2L, 3L, 2L, 1L, 3L, 1L, 2L, 2L, 
2L, 1L, 3L, 3L, 1L, 1L, 2L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 4L, 2L, 1L, 1L, 1L, 1L, 1L, 3L, 1L, 1L, 1L, 1L)), .Names = c("date", 
"count"), row.names = c(NA, -160L), class = "data.frame") 
```

这是我的每周间隔数据（为长度道歉）：

```
structure(list(immigration = c(62L, 53L, 47L, 47L, 46L, 46L, 
47L, 49L, 49L, 43L, 47L, 41L, 46L, 44L, 41L, 45L, 52L, 49L, 47L, 
41L, 41L, 37L, 37L, 36L, 37L, 36L, 37L, 38L, 36L, 34L, 33L, 34L, 
32L, 35L, 34L, 38L, 40L, 43L, 43L, 42L, 42L, 41L, 42L, 48L, 46L, 
47L, 40L, 48L, 44L, 42L, 30L, 32L, 41L, 37L, 37L, 39L, 39L, 43L, 
39L, 39L, 42L, 41L, 41L, 37L, 39L, 37L, 40L, 40L, 41L, 41L, 41L, 
39L, 38L, 35L, 36L, 33L, 31L, 33L, 32L, 32L, 33L, 32L, 31L, 31L, 
33L, 33L, 29L, 32L, 38L, 37L, 36L, 38L, 39L, 41L, 39L, 38L, 39L, 
38L, 31L, 42L, 39L, 37L, 30L, 27L, 33L, 36L, 33L, 35L, 36L, 36L, 
35L, 34L, 39L, 42L, 41L, 44L, 93L, 83L, 91L, 70L, 81L, 100L, 
64L, 78L, 72L, 54L, 48L, 40L, 36L, 33L, 33L, 34L, 34L, 34L, 31L, 
31L, 33L, 32L, 31L, 33L, 38L, 38L, 41L, 40L, 39L, 41L, 41L, 43L, 
43L, 45L, 35L, 43L, 41L, 39L, 29L, 26L, 32L, 38L, 34L, 39L, 39L, 
39L, 39L, 39L, 39L, 42L, 42L, 43L, 42L, 43L, 44L, 41L, 43L, 52L, 
45L, 63L, 64L, 53L, 60L, 57L, 51L, 65L, 44L, 39L, 41L, 38L, 31L, 
30L, 29L, 30L, 31L, 31L, 33L, 35L, 36L, 36L, 37L, 36L, 36L, 38L, 
38L, 39L, 31L, 40L, 39L, 36L, 29L, 21L, 27L, 35L, 33L, 32L, 34L, 
36L, 35L, 32L, 35L, 33L, 34L, 31L, 31L, 33L, 34L, 34L, 33L, 33L, 
32L, 31L, 29L, 25L, 27L, 24L, 24L, 23L, 22L, 23L, 23L, 23L, 22L, 
22L, 21L, 21L, 24L, 23L, 27L, 28L, 29L, 29L, 29L, 30L, 31L, 31L, 
30L, 30L, 30L, 23L, 29L, 27L, 23L, 16L, 17L, 24L, 26L, 26L, 27L, 
28L, 29L, 27L, 29L, 29L, 29L, 28L, 29L, 29L, 29L, 30L, 30L, 29L, 
29L, 28L, 25L, 25L, 25L, 25L, 24L, 24L, 23L, 23L, 23L, 22L, 23L, 
22L, 22L, 21L, 22L, 22L, 23L, 25L, 25L, 26L, 27L, 26L, 27L, 26L, 
27L, 26L, 28L, 21L, 26L, 25L, 24L, 18L, 17L, 24L, 26L, 25L, 25L, 
25L, 24L, 24L, 25L, 26L, 28L, 27L, 32L, 26L, 27L, 29L, 40L, 87L, 
65L, 49L, 57L, 40L, 33L, 30L, 28L, 28L, 29L, 30L, 29L, 26L, 36L, 
26L, 23L, 21L, 21L, 23L, 22L, 24L, 27L, 25L, 26L, 24L, 25L, 26L, 
27L, 24L, 27L, 19L, 24L, 25L, 21L, 15L, 14L), weekStart = structure(c(12421, 
12428, 12435, 12442, 12449, 12456, 12463, 12470, 12477, 12484, 
12491, 12498, 12505, 12512, 12519, 12526, 12533, 12540, 12547, 
12554, 12561, 12568, 12575, 12582, 12589, 12596, 12603, 12610, 
12617, 12624, 12631, 12638, 12645, 12652, 12659, 12666, 12673, 
12680, 12687, 12694, 12701, 12708, 12715, 12722, 12729, 12736, 
12743, 12750, 12757, 12764, 12771, 12778, 12785, 12792, 12799, 
12806, 12813, 12820, 12827, 12834, 12841, 12848, 12855, 12862, 
12869, 12876, 12883, 12890, 12897, 12904, 12911, 12918, 12925, 
12932, 12939, 12946, 12953, 12960, 12967, 12974, 12981, 12988, 
12995, 13002, 13009, 13016, 13023, 13030, 13037, 13044, 13051, 
13058, 13065, 13072, 13079, 13086, 13093, 13100, 13107, 13114, 
13121, 13128, 13135, 13142, 13149, 13156, 13163, 13170, 13177, 
13184, 13191, 13198, 13205, 13212, 13219, 13226, 13233, 13240, 
13247, 13254, 13261, 13268, 13275, 13282, 13289, 13296, 13303, 
13310, 13317, 13324, 13331, 13338, 13345, 13352, 13359, 13366, 
13373, 13380, 13387, 13394, 13401, 13408, 13415, 13422, 13429, 
13436, 13443, 13450, 13457, 13464, 13471, 13478, 13485, 13492, 
13499, 13506, 13513, 13520, 13527, 13534, 13541, 13548, 13555, 
13562, 13569, 13576, 13583, 13590, 13597, 13604, 13611, 13618, 
13625, 13632, 13639, 13646, 13653, 13660, 13667, 13674, 13681, 
13688, 13695, 13702, 13709, 13716, 13723, 13730, 13737, 13744, 
13751, 13758, 13765, 13772, 13779, 13786, 13793, 13800, 13807, 
13814, 13821, 13828, 13835, 13842, 13849, 13856, 13863, 13870, 
13877, 13884, 13891, 13898, 13905, 13912, 13919, 13926, 13933, 
13940, 13947, 13954, 13961, 13968, 13975, 13982, 13989, 13996, 
14003, 14010, 14017, 14024, 14031, 14038, 14045, 14052, 14059, 
14066, 14073, 14080, 14087, 14094, 14101, 14108, 14115, 14122, 
14129, 14136, 14143, 14150, 14157, 14164, 14171, 14178, 14185, 
14192, 14199, 14206, 14213, 14220, 14227, 14234, 14241, 14248, 
14255, 14262, 14269, 14276, 14283, 14290, 14297, 14304, 14311, 
14318, 14325, 14332, 14339, 14346, 14353, 14360, 14367, 14374, 
14381, 14388, 14395, 14402, 14409, 14416, 14423, 14430, 14437, 
14444, 14451, 14458, 14465, 14472, 14479, 14486, 14493, 14500, 
14507, 14514, 14521, 14528, 14535, 14542, 14549, 14556, 14563, 
14570, 14577, 14584, 14591, 14598, 14605, 14612, 14619, 14626, 
14633, 14640, 14647, 14654, 14661, 14668, 14675, 14682, 14689, 
14696, 14703, 14710, 14717, 14724, 14731, 14738, 14745, 14752, 
14759, 14766, 14773, 14780, 14787, 14794, 14801, 14808, 14815, 
14822, 14829, 14836, 14843, 14850, 14857, 14864, 14871, 14878, 
14885, 14892, 14899, 14906, 14913, 14920, 14927, 14934, 14941, 
14948, 14955, 14962, 14969), class = "Date"), weekEnd = structure(c(12427, 
12434, 12441, 12448, 12455, 12462, 12469, 12476, 12483, 12490, 
12497, 12504, 12511, 12518, 12525, 12532, 12539, 12546, 12553, 
12560, 12567, 12574, 12581, 12588, 12595, 12602, 12609, 12616, 
12623, 12630, 12637, 12644, 12651, 12658, 12665, 12672, 12679, 
12686, 12693, 12700, 12707, 12714, 12721, 12728, 12735, 12742, 
12749, 12756, 12763, 12770, 12777, 12784, 12791, 12798, 12805, 
12812, 12819, 12826, 12833, 12840, 12847, 12854, 12861, 12868, 
12875, 12882, 12889, 12896, 12903, 12910, 12917, 12924, 12931, 
12938, 12945, 12952, 12959, 12966, 12973, 12980, 12987, 12994, 
13001, 13008, 13015, 13022, 13029, 13036, 13043, 13050, 13057, 
13064, 13071, 13078, 13085, 13092, 13099, 13106, 13113, 13120, 
13127, 13134, 13141, 13148, 13155, 13162, 13169, 13176, 13183, 
13190, 13197, 13204, 13211, 13218, 13225, 13232, 13239, 13246, 
13253, 13260, 13267, 13274, 13281, 13288, 13295, 13302, 13309, 
13316, 13323, 13330, 13337, 13344, 13351, 13358, 13365, 13372, 
13379, 13386, 13393, 13400, 13407, 13414, 13421, 13428, 13435, 
13442, 13449, 13456, 13463, 13470, 13477, 13484, 13491, 13498, 
13505, 13512, 13519, 13526, 13533, 13540, 13547, 13554, 13561, 
13568, 13575, 13582, 13589, 13596, 13603, 13610, 13617, 13624, 
13631, 13638, 13645, 13652, 13659, 13666, 13673, 13680, 13687, 
13694, 13701, 13708, 13715, 13722, 13729, 13736, 13743, 13750, 
13757, 13764, 13771, 13778, 13785, 13792, 13799, 13806, 13813, 
13820, 13827, 13834, 13841, 13848, 13855, 13862, 13869, 13876, 
13883, 13890, 13897, 13904, 13911, 13918, 13925, 13932, 13939, 
13946, 13953, 13960, 13967, 13974, 13981, 13988, 13995, 14002, 
14009, 14016, 14023, 14030, 14037, 14044, 14051, 14058, 14065, 
14072, 14079, 14086, 14093, 14100, 14107, 14114, 14121, 14128, 
14135, 14142, 14149, 14156, 14163, 14170, 14177, 14184, 14191, 
14198, 14205, 14212, 14219, 14226, 14233, 14240, 14247, 14254, 
14261, 14268, 14275, 14282, 14289, 14296, 14303, 14310, 14317, 
14324, 14331, 14338, 14345, 14352, 14359, 14366, 14373, 14380, 
14387, 14394, 14401, 14408, 14415, 14422, 14429, 14436, 14443, 
14450, 14457, 14464, 14471, 14478, 14485, 14492, 14499, 14506, 
14513, 14520, 14527, 14534, 14541, 14548, 14555, 14562, 14569, 
14576, 14583, 14590, 14597, 14604, 14611, 14618, 14625, 14632, 
14639, 14646, 14653, 14660, 14667, 14674, 14681, 14688, 14695, 
14702, 14709, 14716, 14723, 14730, 14737, 14744, 14751, 14758, 
14765, 14772, 14779, 14786, 14793, 14800, 14807, 14814, 14821, 
14828, 14835, 14842, 14849, 14856, 14863, 14870, 14877, 14884, 
14891, 14898, 14905, 14912, 14919, 14926, 14933, 14940, 14947, 
14954, 14961, 14968, 14975), class = "Date")), .Names = c("immigration", 
"weekStart", "weekEnd"), class = "data.frame", row.names = c(NA, 
-365L)) 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T02:04:24.157

中每个日期的周开始`y`：

```
y$weekStart <- y$date - as.POSIXlt(y$date)$wday 
```

聚合这些以组合几周（从结果中省略现在不需要的`date`列）：

```
yy <- aggregate(count ~ weekStart, data=y, FUN=sum) 
```

最后，合并`gIm`：

```
m <- merge(gIm, yy, all=TRUE)

> head(m, 10)
    weekStart immigration    weekEnd count
1  2004-01-04          62 2004-01-10    NA
2  2004-01-11          53 2004-01-17    NA
3  2004-01-18          47 2004-01-24     1
4  2004-01-25          47 2004-01-31    NA
5  2004-02-01          46 2004-02-07    NA
6  2004-02-08          46 2004-02-14    NA
7  2004-02-15          47 2004-02-21    NA
8  2004-02-22          49 2004-02-28    NA
9  2004-02-29          49 2004-03-06     1
10 2004-03-07          43 2004-03-13     2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T02:17:48.267

这是一个使用 data.table 的选项。
您可以在适当的日期之前键入您的数据集。
然后我们可以“即时”（in）排列出每周的日期`j`并合并它们。

```
library(data.table)
gdt <- data.table(gIm, key="weekStart")
ydt <- data.table(y, key="date")

weeklyCounts <- 
ydt[setkey(gdt[, list("date"=seq(weekStart, weekEnd, length.out=7)), by=weekStart], "date")][
   , list(totalCounts = sum(count, na.rm=TRUE))
   , by="weekStart"]

gdt[ setkey(weeklyCounts, weekStart), totalCounts := totalCounts]

gdt
     immigration  weekStart    weekEnd totalCounts
  1:          62 2004-01-04 2004-01-10           0
  2:          53 2004-01-11 2004-01-17           0
  3:          47 2004-01-18 2004-01-24           1
  4:          47 2004-01-25 2004-01-31           0
  5:          46 2004-02-01 2004-02-07           0
 ---                                              
361:          24 2010-11-28 2010-12-04           1
362:          25 2010-12-05 2010-12-11           0
363:          21 2010-12-12 2010-12-18           0
364:          15 2010-12-19 2010-12-25           0
365:          14 2010-12-26 2011-01-01           0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T03:29:52.550

`data.table`这是使用和滚动连接的另一个选项

```
weekData <- data.table(gIm, key = 'weekEnd')
dayData <- data.table(y, key = 'date')
# create a copy of the key column
weekData[, we := weekEnd]

# roll so that weekEnd can go back no more than 6 days
# this (the count column is then summed over the original weekEnd values stored in we
we <- weekData[dayData,roll= -6,nomatch = NA][, list(count = sum(count)), keyby =list(weekEnd = we)]

# join with original weekData, then set `NA` values in count to 0, 
# and remove the additional `we` column
weekSum <- (we[weekData])[is.na(count), c('count','we') := list(0L,NULL)]

head(weekSum, 10)
       weekEnd count immigration  weekStart
 1: 2004-01-10     0          62 2004-01-04
 2: 2004-01-17     0          53 2004-01-11
 3: 2004-01-24     1          47 2004-01-18
 4: 2004-01-31     0          47 2004-01-25
 5: 2004-02-07     0          46 2004-02-01
 6: 2004-02-14     0          46 2004-02-08
 7: 2004-02-21     0          47 2004-02-15
 8: 2004-02-28     0          49 2004-02-22
 9: 2004-03-06     1          49 2004-02-29
10: 2004-03-13     2          43 2004-03-07 
```

滚动一定天数的能力是 data.table 1.8.8 的一个特性。从[新闻](https://r-forge.r-project.org/scm/viewvc.php/pkg/NEWS?view=markup&root=datatable)

> *   除了 TRUE/FALSE，“roll”现在可以是正数（前滚/LOCF）或负数（后滚/NOCB）。有限的数字限制了值滚动的距离（有限的陈旧性）。roll=TRUE 和 roll=+Inf 是等价的。

* * *

编辑——一个（也许）更直接的版本

```
 weekData <- data.table(gIm, key = 'weekStart')
 weekly <- merge(weekData,
              weekData[dayData, roll= -6][,list(count = sum(count)), by = weekStart],
              all.x = TRUE, by = 'weekStart')

 head(weekly, n = 10)

     weekStart immigration    weekEnd count
 1: 2004-01-04          62 2004-01-10    NA
 2: 2004-01-11          53 2004-01-17    NA
 3: 2004-01-18          47 2004-01-24     1
 4: 2004-01-25          47 2004-01-31    NA
 5: 2004-02-01          46 2004-02-07    NA
 6: 2004-02-08          46 2004-02-14    NA
 7: 2004-02-15          47 2004-02-21    NA
 8: 2004-02-22          49 2004-02-28    NA
 9: 2004-02-29          49 2004-03-06     1
10: 2004-03-07          43 2004-03-13     2 
```

# c++ - c++ template function

> ID：15468517
> 
> 赞同：1
> 
> 时间：2013-03-18T01:35:54.653
> 
> 标签：c++, function, templates

I have following code:

```
void myfunc() 
{ 
} 
template <typename T> 
void check() 
{ 
} 

template <typename T> 
void checkT (T) 
{ 
    check<T>(); 
} 
```

and so if I have in main function a call to `checkT(myfunc)` then that compiles, but if I have `check<myfunc>()` that doesn't work although it directly calls the first version. Can you please explain why it is so? The error is

> error: no matching function for call to 'check()'

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T01:40:14.657

This is because `myfunc` is a value expression, not a type. You could do

```
check<decltype(myfunc)>(); 
```

though, or equivalently:

```
check<void(void)>(); 
```

See it live on [http://liveworkspace.org/code/2ANEre$0](http://liveworkspace.org/code/2ANEre%240)

* * *

**PS.** In reply to the comment, I sense a bit of confusion between the function formal parameter and a template type parameter. Make it more explicit by writing:

```
template <typename T> 
void checkT (T somevalue) 
{ 
    check<T>();  // note: somevalue is never used!
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T01:42:15.767

In the first instance `checkT(myfunc)` it is able to deduce the type, `checkT` is really identical to `checkT( T value )` and so you are passing in `value` and `T` is being deduced. In the second case you are not supplying a type you can alter it like so to work:

```
check<decltype(myfunc)>() ; 
```

you are actually supplying a `value` where you need a `type` in this case `void(void)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T01:45:59.220

`checkT(myfunc)` works because `myfunc` is a value. But the second fails because it is not a type, which the template parameters require. For example,

```
void checkT(T) 
```

is the same as

```
void checkT(T t) 
```

so that means the function passed is an object of type `T`. That is, `t` is the object and `T` is the type. In the template parameters of `check`, it requires an explicit specification of the *type*, not the object. So thus passing in an object would raise a compilation error. Just like passing in the number 5 where the explicit type `int` is expected.

You can use it as a type by wrapping it in a `decltype` expression:

```
check<decltype(myfunc)>();
//    ^^^^^^^^^^^^^^^^ 
```

# url - 对这个 url 请求感到困惑

> ID：15468523
> 
> 赞同：0
> 
> 时间：2013-03-18T01:37:02.723
> 
> 标签：url, jquery

我下载了这段代码来测试尝试一些东西，但不知何故，尽管它在同一个文件夹中，但它似乎无法读取 xml。知道如何让它工作吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" type="text/css" media="all" href="style.css" />
    <script type="text/javascript" src="jquery.js"></script>
    <title>Reading XML with jQuery</title>
     <script>
        $(document).ready(function(){
            $.ajax({
                type: "GET",
                url: "sites.xml",
                dataType: "xml",
                success: function(xml) {
                    $(xml).find('site').each(function(){
                        var id = $(this).attr('id');
                        var title = $(this).find('title').text();
                        var url = $(this).find('url').text();
                        $('<div class="items" id="link_'+id+'"></div>').html('<a href="'+url+'">'+title+'</a>').appendTo('#page-wrap');
                        $(this).find('desc').each(function(){
                            var brief = $(this).find('brief').text();
                            var long = $(this).find('long').text();
                            $('<div class="brief"></div>').html(brief).appendTo('#link_'+id);
                            $('<div class="long"></div>').html(long).appendTo('#link_'+id);
                        });
                    });
                }
            });
        });
     </script>
</head>
<body>
    <div id="page-wrap">
        <h1>Reading XML with jQuery</h1>
     </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:50:10.943

尝试通过 Apache 之类的 Web 服务器运行它。我不相信 XmlHttpRequest 跨浏览器对本地文件系统是可靠的。从技术上讲，它旨在向 Web 服务器发出 HTTP 请求。

看到这个答案

[https://stackoverflow.com/a/5469527/1649198](https://stackoverflow.com/a/5469527/1649198)

# java - 使用 getter 和 setter 获取 null

> ID：15468524
> 
> 赞同：0
> 
> 时间：2013-03-18T01:37:15.630
> 
> 标签：java

当我将 getter 和 setter 放在一个方法中，然后在 main 方法中调用该方法时，尽管已将值设置为其他值，但我得到了一个 null 值！此外，我没有收到来自编译器的任何错误，所以我确定这是某个地方的逻辑错误，但我无法弄清楚。

这是来自包含相关方法的类：

```
public class URTest {
UserRegistration _user = new UserRegistration();
public static void main(String[] args) {
   String fieldName;
   UserRegistration _user = new UserRegistration();
   URTest _run = new URTest();
   Scanner input = new Scanner(System.in);
   fieldName = input.nextLine();
   _run.test(fieldName);
   System.out.println(_user.getUsername()); 
}

public void test(String fieldName) {
    UserRegistration _user = new UserRegistration();
    Scanner input = new Scanner(System.in);
    String result;
    System.out.print("Enter " + fieldName + ": ");
    result = input.nextLine();
        while(true) {
            if(result.equals("")) {
                System.out.print("Please enter a value for the " + fieldName + ": ");
                result = input.nextLine();
            } else {
                break;
            }
            if(fieldName.equals("username")) {
                _user.setUsername(result);
            }
} 
```

} }

这是包含我的 getter 和 setter 的类：

```
import java.io.Serializable;

public class UserRegistration implements Serializable {

private String username;
private int userId;
private String firstName;
private String lastName;
private String password;
private String email;

public UserRegistration() {
    this.username = username;
    this.userId = userId;
}

public UserRegistration(String uName, int id, String uPassword) {
    this.username = uName;
    this.userId = id;
    this.password = uPassword;
}

public String getUsername() {
    return username;
}

public void setUsername(String username) {
    this.username = username;
}

public int getUserId() {
    return userId;
}

public void setUserId(int userId) {
    this.userId = userId;
}

public String getFirstName() {
    return firstName;
}

public void setFirstName(String firstName) {
    this.firstName = firstName;
}

public String getLastName() {
    return lastName;
}

public void setLastName(String lastName) {
    this.lastName = lastName;
}

public void setPassword(String password) {
    this.password = password;
}

public String getEmail() {
    return email;
}

public void setEmail(String email) {
    this.email = email;
}

@Override
public String toString() {
    String name = getFirstName() + getLastName();
    String output = name + "has the user id " + getUserId() + 
            "username " + getUsername() + " and email " + getEmail();
    return output;
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T01:40:06.627

你在打电话

```
UserRegistration _user = new UserRegistration(); 
```

在你的课堂上

```
public UserRegistration() {
    this.username = username;
    this.userId = userId;
} 
```

当上面的构造函数被调用时，没有值被设置为成员变量，因此你得到 null

在您的调用方法中，

```
UserRegistration _user = new UserRegistration("name","id1"); 
```

或者

在构造函数中设置默认值：

```
public UserRegistration() {
        this.username = "name";
        this.userId = "id1";
    } 
```

# c# - 替换包含双引号的字符串

> ID：15468526
> 
> 赞同：-1
> 
> 时间：2013-03-18T01:37:23.823
> 
> 标签：c#, string, replace

我觉得这应该很简单，但我正在努力解决它。如果我有一个包含双引号的字符串并且我想去掉那个字符串，我将如何去做呢？

如果我有这个文本：

```
The quick "brown" fox jumps over the "lazy" dog 
```

我想用这个：

```
 .Replace("The quick \"brown\" fox jumps over the \"lazy\" dog", ""); 
```

但它似乎没有识别带有双引号的字符串。我提出的所有搜索似乎都想替换引号本身，而不是包含引号的字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T01:38:54.467

如果您想要简单地去掉引号本身，请使用：

```
var input = "The quick \"brown\" fox jumps over the \"lazy\" dog";
var output = input.Replace("\"", string.Empty);
// output == "The quick brown fox jumps over the lazy dog" 
```

如果要去除引号*和*引号之间的文本，则需要使用 a [`RegEx.Replace`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.replace.aspx)，如下所示：

```
var input = "The quick \"brown\" fox jumps over the \"lazy\" dog";
var output = RegEx.Replace(input, "\"[^\"]*\"", string.Empty);
// output == "The quick  fox jumps over the  dog" 
```

# wpf - Windows 8 和 Windows 7 之间字 体的 WPF 格式问题

> ID：15468527
> 
> 赞同：1
> 
> 时间：2013-03-18T01:37:33.923
> 
> 标签：wpf, windows, formatting

我在 Windows 8 的 Visual Studio 2012 中编写了一个基本的 WPF VB.net 应用程序。

该程序基本上接管了全屏并显示由 XML 提供的文本，它旨在根据屏幕分辨率和大小填充屏幕。

我遇到的问题与格式有关。如果我在 Windows 8 中运行应用程序，文本将正确填满屏幕。

一旦我在任何 PC 上的 Windows 7 中运行该应用程序，它似乎会更改间距并最终在屏幕底部留下空间。

我检查了以下内容，但找不到任何原因： 1\. 屏幕分辨率（它们都以 96 dpi 运行 1650 X 1080）

2.  从 Windows 8 安装复制字体（没有变化）
3.  尝试了不同的类型（Tahoma、Segoe、Century Gothic）没有任何变化。
4.  检查 Windows 7 上的所有设置（带或不带 Aero 主题，带或不带任务栏）
5.  [这与我在 WPF RichTextBox 中的不同字符间距](https://stackoverflow.com/questions/14512687/differing-char-spacing-in-a-wpf-richtextbox)类似的问题 但这仍然没有解决我的问题。（[http://msdn.microsoft.com/en-us/library/vstudio/system.windows.media.textformattingmode%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/vstudio/system.windows.media.textformattingmode%28v=vs.100%29.aspx)）

对此的任何帮助都会很棒，因为我真的很难理解实际问题是什么或可能是什么。

这是一些问题的图片 [http://tmblr.co/Z3zZjsgWM-BG](http://tmblr.co/Z3zZjsgWM-BG)

# android - 如何在android上发现帧缓冲区宽度？

> ID：15468542
> 
> 赞同：5
> 
> 时间：2013-03-18T01:39:51.973
> 
> 标签：android, ffmpeg, framebuffer

我正在我的 android 设备上捕获帧缓冲区，但解码不适用于正确的分辨率。

我发现我可以使用以下方法获得 bbp 和屏幕分辨率：

```
ioctl -rl 28 /dev/graphics/fb0 17920 
```

此命令返回：

> 返回缓冲区：**f0 00 00 00 40 01 00 00** f0 00 00 00 80 02 00 00 00 00 00 00 00 00 00 00 **20 00 00 00**

在 little-endian 格式中，我有：

*   最后四个字节 (20) 是 bbp **32**的数量。
*   前四个字节是屏幕宽度 0xF0 = **240**
*   字节 5 到 8 是屏幕高度 0x0140 = **320**

我尝试使用以下命令解码 fb（Galaxy 5）：

```
./ffmpeg -vcodec rawvideo -f rawvideo -pix_fmt rgb32 -s 240x320 -i fb0 -f image2 -vcodec png image%d.png 
```

我收到了这个警告：

> 缓冲区大小无效，数据包大小 40960 < 预期长度 307200 解码流 #0:0 时出错：参数无效

这两张图片：

![在此处输入图像描述](../Images/a4868890dbc5c0efe44dff9f43a32e46.png) ![在此处输入图像描述](../Images/72eeb736627f503ba3acd79745157063.png)

我的原始文件有 655.360 字节，但预期的正确值是 614.400 字节，使用以下公式：

> 文件大小 = xres * yres * bpp/8 * numberOfFrames
> 
> fileSize = 240 * 320 * 32/8 * 2 (android 使用双帧缓冲) = **614.400**

令我惊讶的是，我将 ffmpeg 上的宽度大小更改为 256 以匹配 655.360 字节并工作（有点，右侧有 16 个额外像素！我得到以下图像：

![在此处输入图像描述](../Images/93dfbd7ef9ef921c126c5e873c70f5d4.png) ![在此处输入图像描述](../Images/ad40d21cdd9b0324b206d1c131a7e12d.png)

所以我的问题是，如果我的屏幕分辨率为 240，**为什么**我必须使用 256 宽度。以及如何为其他分辨率发现这个神奇的数字。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-18T00:12:19.577

您应该使用**line_length**来计算线的大小。

```
+-------------------------+----+
|                         |    |
|                         |    | 
|<-------- XRES --------->|    | = Xres is display resolution
|                         |    |
|                         |    |
|<------- LINE LENGTH -------->| = Memory Size per line
|                         |    |
|                         |    |
+-------------------------+----+
                      ^      ^
                      |      |
  display on screen --+      +----> This is stride 
```

右边的填充被称为“步幅”（步幅=（以像素为单位的线长度）-宽度）。如果显示分辨率不是 8 的倍数，许多设备在帧缓冲区中都有这个步幅。

所以公式是：

> fileSize = line_length * yres * numberOfFrames

**不要将它与 bpp/8 相乘**，因为 line_length 是内存大小（不是像素大小）。

要检索**line_length**您应该使用**FBIOGET_FSCREENINFO** (0x4602 - 17922) 而不是**FBIOGET_VSCREENINFO** (0x4600 - 17922)，如下所示：

> ioctl -rl 50 /dev/graphics/fb0 17922

我的 Galaxy Nexus 像这样返回：

```
return buf: 6f 6d 61 70 66 62 00 00 00 00 00 00 00 00 00 00 00 00 a0 ac 00 00 00
01 00 00 00 00 00 00 00 00 02 00 00 00 01 00 01 00 00 00 00 00 80 0b 00 00 00 00
                                                               ^_________^ 
```

我的 Galaxy Nexus 有 line_length: 2944 (0xb80)。

# css - 在 joomla 模板中居中 iframe

> ID：15468554
> 
> 赞同：0
> 
> 时间：2013-03-18T01:41:37.397
> 
> 标签：css, joomla2.5

我一直在尝试将 youtube 视频放在 joomla 模板中（J51_Oxygen - 默认）。有谁知道做到这一点的最佳方法？我似乎无法覆盖模板，我不确定将模板的 css 放在哪里。

我可以在 html 中正确对齐，但不能居中对齐。

任何提示或帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:53:54.493

在您的文章编辑器中，只需单击 iframe 旁边并使用“居中对齐”编辑器按钮，

或者

在 iframe 周围的 div 上内联添加以下样式：

```
text-align: center 
```

或者

将以下样式添加到 iframe 本身：

```
margin: 0 auto 
```

或者

添加一个 ID 或一个类并将样式附加到模板的主样式表的底部，

或者

这样做并向您的模板[添加自定义样式表。](http://docs.joomla.org/Adding_JavaScript_and_CSS_to_the_page)

# ios - iOS 中的 MIDI 合成行为不端 WRT 弯音：忽略 LSB

> ID：15468558
> 
> 赞同：4
> 
> 时间：2013-03-18T01:42:04.887
> 
> 标签：ios, core-audio, midi, audiounit, coremidi

要么 Apple 的 MIDI 合成代码中存在严重错误，要么我做错了什么。这是我对它的理解。当您发送弯音 MIDI 命令时，弯音的范围是 -8192 到 8191，移调到 0。（所以实际范围是 0 到 16383。）这个数字被分成两个 7 位字段，所以真的这意味着您有 128 个粗略控制值和 128 个精细控制值。

这是我编写的一个弯音示例，类似于 Apple 的[LoadPresetDemo](http://developer.apple.com/library/ios/#samplecode/LoadPresetDemo/Introduction/Intro.html)中的命令。

```
// 'ratio' is the % amount to bend in current pitch range, from -1.0 to 1.0
// 'note' is the MIDI note to bend

NSUInteger bendValue = 8191 + 1 + (8191 * ratio);
NSUInteger bendMSB = (bendValue >> 7) & 0x7F;
NSUInteger bendLSB = bendValue & 0x7F;

UInt32 noteNum = note;
UInt32 noteCommand = kMIDIMessage_PitchBend << 4 | 0;

OSStatus result = MusicDeviceMIDIEvent(self.samplerUnit, noteCommand, noteNum, bendMSB, bendLSB); 
```

当bendMSB（粗调控制）改变时，音高弯曲就好了。但是当bendLSB（精细控制）改变时，什么也没有发生。换句话说，Apple 的 MIDI 合成器似乎忽略了 LSB，这意味着音符只会在听起来难看的离散块中弯曲。

这是做同样事情的另一种方法：

```
// 'ratio' is the % amount to bend in current pitch range, from -1.0 to 1.0

AudioUnitParameterValue bendValue = 63 + 1 + (63 * ratio); // this is a CGFloat under the hood

AudioUnitSetParameter(self.samplerUnit,
                      kAUGroupParameterID_PitchBend,
                      kAudioUnitScope_Group,
                      0,
                      bendValue,
                      0); 
```

这表现出与前一个示例相同的行为。这种处理方式特别有趣的是，kAUGroupParameterID_PitchBend 的文档指定值范围应该是 -8192 到 8191，这完全行不通。实际范围似乎是 0 到 127，浮点（精细控制）被忽略。

最后，如果您进行以下调用来调整弯音范围：

```
// 'semitones' is the number of semitones (100 cents) to set the pitch bend range to
// 'cents' is the additional number of cents to set the pitch bend range to

UInt32 status = 0xB0 | 0;

MusicDeviceMIDIEvent(self.samplerUnit, status, 0x64, 0x00, 0);        // RPN pitch bend range.
MusicDeviceMIDIEvent(self.samplerUnit, status, 0x65, 0x00, 0);
MusicDeviceMIDIEvent(self.samplerUnit, status, 0x06, semitones, 0);   // Data entry MSB
MusicDeviceMIDIEvent(self.samplerUnit, status, 0x26, cents, 0);       // Data entry LSB (optional)
MusicDeviceMIDIEvent(self.samplerUnit, status, 0x64, 0x7F, 0);        // RPN reset
MusicDeviceMIDIEvent(self.samplerUnit, status, 0x65, 0x7F, 0); 
```

你能猜到会发生什么吗？没错，LSB 信息会被忽略，并且音高轮范围仅会根据提供的半音数量而变化。

这里发生了什么？这是苹果的错误还是我错过了什么？（也许是一个设置参数？）或者它根本不是一个错误？也许 Apple 的合成器在设计上没有那么详细的细节？按照 MIDI 标准，这种事情合法吗？！帮助！

* * *

编辑：

当弯音范围设置为 40 个半音时，每个粗略的变化都会产生听觉上的差异。当弯音范围设置为 10 个半音时，只有每秒钟的粗略变化才会产生影响。在 2 个半音（默认值）时，需要 4 次或更多次粗调才能产生差异。

换句话说，不仅 LSB 显然被忽略了，而且似乎还有最小的 # 美分来改变音高。可以修复这些限制中的任何一个吗？如果没有，是否有任何适用于 iOS 的具有更高弯曲分辨率的软件合成器框架？

嗯...也许应用 kAudioUnitSubType_Varispeed 或 kAudioUnitSubType_NewTimePitch 会产生更好的结果...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T06:47:34.203

您的弯音信息不正确。而不是这个：

```
UInt32 noteCommand = kMIDIMessage_PitchBend << 4 | 0;

OSStatus result = MusicDeviceMIDIEvent(self.samplerUnit, noteCommand, noteNum, bendMSB, bendLSB); 
```

做这个：

```
UInt32 bendCommand = kMIDIMessage_PitchBend << 4 | 0;

OSStatus result = MusicDeviceMIDIEvent(self.samplerUnit, bendCommand, bendLSB, bendMSB, 0); 
```

音符值不是弯音命令的一部分。（此外，我将变量名称更改`noteCommand`为`bendCommand`更准确地反映其用途。）

在 LoadPresetDemo 我添加了一个属性`MainViewController.m`：

```
@property (readwrite) NSInteger bendValue; 
```

这个代码：

```
- (void)sendBendValue:(NSInteger)bendValue {
    //bendValue in the range [-8192, 8191]
    const UInt32 bendCommand = kMIDIMessage_PitchBend << 4 | 0;
    bendValue += 8192;
    UInt32 bendMSB = (bendValue >> 7) & 0x7F;
    UInt32 bendLSB = bendValue & 0x7F;
    NSLog(@"MSB=%d, LSB=%d", (unsigned int)bendMSB, (unsigned int)bendLSB);
    OSStatus result = MusicDeviceMIDIEvent(self.samplerUnit, bendCommand, bendLSB, bendMSB, 0);
    NSAssert (result == noErr, @"Unable to send pitch bend message. Error code: %d '%.4s'", (int) result, (const char *)&result);
}

- (IBAction)bendDown:(id)sender {
    self.bendValue = MAX(-8192, self.bendValue - 0x20);
    [self sendBendValue:self.bendValue];
}

- (IBAction)bendCenter:(id)sender {
    self.bendValue = 0;
    [self setBendRange:50 cents:0];
    [self sendBendValue:self.bendValue];
}

- (IBAction)bendUp:(id)sender {
    self.bendValue = MIN(8191, self.bendValue + 0x20);
    [self sendBendValue:self.bendValue];
}

-(void)setBendRange:(UInt32)semitones cents:(UInt32)cents {
    MusicDeviceMIDIEvent(self.samplerUnit, 0xB0, 0x64, 0, 0);
    MusicDeviceMIDIEvent(self.samplerUnit, 0xB0, 0x65, 0, 0);
    MusicDeviceMIDIEvent(self.samplerUnit, 0xB0, 0x06, semitones, 0);
    MusicDeviceMIDIEvent(self.samplerUnit, 0xB0, 0x26, cents, 0);
    //The following two lines are not really necessary. They only matter if additional controller 0x06 or 0x26 messages are sent
    //MusicDeviceMIDIEvent(self.samplerUnit, 0xB0, 0x64, 0x7F, 0);
    //MusicDeviceMIDIEvent(self.samplerUnit, 0xB0, 0x65, 0x7F, 0);  
} 
```

我创建了三个按钮并将它们分配给`bendDown:`、`bendCenter:`和`bendUp:`。

运行程序并按下`bendCenter`按钮。然后，选择长号声音，按住“Mid Note”按钮。按住它的同时，按`bendUp`或`bendDown`按钮。当 LSB 改变而 MSB 保持不变时，我可以听到音高的变化。

# jsp - 需要从 JSP 中的下拉列表中进行选择并将选择添加到 ArrayList

> ID：15468560
> 
> 赞同：0
> 
> 时间：2013-03-18T01:42:12.180
> 
> 标签：jsp, web-applications, jstl

我有一个片段，其中在下拉列表中显示 OptionName 和各种选项。

现在，我想将用户所做的所有选择保存在一个中`ArrayList`，然后将其传递给另一个 Servlet。

```
<form method="post" action="ComputePrice">
<table border="1">
    <TR>
        <c:forEach items="${optionSets}" var="optionSetLocal">
            <TD>${optionSetLocal}</TD>

            <TD><select name="myChoice">
            <d:forEach items="${rawData.get(optionSetLocal)}"
                        var="optionsLocal">
                        <option>${optionsLocal}</option>
                    </d:forEach>
                    <select onclick value="${choices.add(myChoice)}"></select>
            </select></TD>
    </TR>

    </c:forEach>

</table>
<input type="Submit" value="Ok" /> 
```

现在，当我在另一个 Servlet 中打印`ArrayList`“选择”时，我得到了一组全空值。如何`ArrayList`使用页面上所做的选择填充？

为了更好地了解代码：optionSets 是一个`ArrayList`. rawData 是其中的一个`LinkedHashMap`，`<String, ArrayList>`其中哈希是 optionSets arrayList 中的一个条目。

我不确定如何将选择存储在 中，`ArrayList`以便我可以在下一个 Servlet 中使用它进行进一步处理。

尝试附加图像，但由于点数不足而无法附加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:09:39.067

我不知道这是否是一个简单的方法。但是尝试添加与选择列表大小相等的隐藏字段。选择时使用脚本设置字段值。在 servlet 中你可以得到它。

# android - 上传文件时网络请求不起作用

> ID：15468563
> 
> 赞同：0
> 
> 时间：2013-03-18T01:42:35.137
> 
> 标签：android, android-asynctask, android-networking

我面临一个我不知道如何解决的问题。
GetDataTask 工作正常。但是当我上传文件时，请求已发送，但只有在文件上传完成后才会响应！GetDataTask 和 UploadTask 使用 AsyncTask 异步运行。
知道为什么它不起作用以及为什么在文件上传时响应没有返回。
有没有另一种方法来实现这一点？
问题是，**它应该并行运行，但不幸的是它们正在同步运行**。
我在下面发布了我的实际来源。
提前致谢。

**获取数据任务**：

```
private class GetDataTask extends AsyncTask<String, Void, String>{

    @Override
    protected void onPreExecute() {

    }

    @Override
    protected String doInBackground(String... params) {
        return NetConnection.getRecordData(mUserId, mUserPassword);
    }

    @Override
    protected void onPostExecute(String result) {
        parseJson(result);
    }
} 
```

**上传任务**：

```
 private class HttpMultipartPost extends AsyncTask<String, Integer, String>
    {
        TextProgressBar pb;
        long totalSize;
        String filePath;

        @Override
        protected void onPreExecute()
        {
            pb = (TextProgressBar) findViewById(R.id.idPBUploadProgress);
            pb.setMax(100);
        }

        @Override
        protected String doInBackground(String... arg)
        {
            HttpClient httpClient = new DefaultHttpClient();
            HttpContext httpContext = new BasicHttpContext();
            HttpPost httpPost = new HttpPost( Utils.UPLOAD_URL );

            try
            {
                CustomMultiPartEntity multipartContent = new CustomMultiPartEntity(new ProgressListener()
                {
                    @Override
                    public void transferred(long num)
                    {
                        publishProgress((int) ((num / (float) totalSize) * 100));
                        //Log.v(TAG, "Progress =" + num);
                    }
                });

                // We use FileBody to transfer an file
                filePath = arg[0];
                multipartContent.addPart("upfile", new FileBody(new File( filePath )));
                totalSize = multipartContent.getContentLength();
                Log.e(TAG, "Upload file size = " + totalSize/1048576 + "MB") ;

                // Send it
                httpPost.setEntity(multipartContent);
                HttpResponse response = httpClient.execute(httpPost, httpContext);
                String serverResponse = EntityUtils.toString(response.getEntity());

                return serverResponse;
            }

            catch (Exception e)
            {
                System.out.println(e);
            }
            return null;
        }

        @Override
        protected void onProgressUpdate(Integer... progress)
        {
            pb.setProgress((int) (progress[0]));
            pb.setText(progress[0] + "%");
        }

        @Override
        protected void onPostExecute(String result)
        {
            Log.e(TAG, "Response =" + result);
            parseResult( result, filePath );
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T09:06:10.610

好的，以下是[官方 java 文档](http://developer.android.com/reference/android/os/AsyncTask.html)中的注释...

> 执行顺序
> 
> 首次引入时，AsyncTask 在单个后台线程上串行执行。从[DONUT](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#DONUT)开始，这被更改为允许多个任务并行运行的线程池。从[HONEYCOMB](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#HONEYCOMB)开始，任务在单个线程上执行，以避免并行执行导致的常见应用程序错误。
> 
> 如果你真的想要并行执行，你可以 使用 [THREAD_POOL_EXECUTOR调用](http://developer.android.com/reference/android/os/AsyncTask.html#THREAD_POOL_EXECUTOR)[executeOnExecutor(java.util.concurrent.Executor, Object[])](http://developer.android.com/reference/android/os/AsyncTask.html#executeOnExecutor%28java.util.concurrent.Executor,%20Params...%29)。

所以如果你一起调用两个 AsyncTask .. 它们不会被并行执行（例外是甜甜圈、ECLAIR 和姜饼）......你可以用来`executeOnExecutor`并行执行它们......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T02:04:14.500

试试这样

```
package com.file.upload;

import java.io.FilterOutputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.nio.charset.Charset;

import org.apache.http.entity.mime.HttpMultipartMode;
import org.apache.http.entity.mime.MultipartEntity;

public class CustomMultiPartEntity extends MultipartEntity{

    private final ProgressListener listener;

    public CustomMultiPartEntity (final ProgressListener listener)
    {
        super();
        this.listener = listener;
    }

    public CustomMultiPartEntity (final HttpMultipartMode mode, final ProgressListener listener)
    {
        super(mode);
        this.listener = listener;
    }

    public CustomMultiPartEntity (HttpMultipartMode mode, final String boundary, final Charset charset, final ProgressListener listener)
    {
        super(mode, boundary, charset);
        this.listener = listener;
    }

    @Override
    public void writeTo(final OutputStream outstream) throws IOException
    {
        super.writeTo(new CountingOutputStream(outstream, this.listener));
    }

    public static interface ProgressListener
    {
        void transferred(long num);
    }

    public static class CountingOutputStream extends FilterOutputStream
    {

        private final ProgressListener listener;
        private long transferred;

        public CountingOutputStream(final OutputStream out, final ProgressListener listener)
        {
            super(out);
            this.listener = listener;
            this.transferred = 0;
        }

        public void write(byte[] b, int off, int len) throws IOException
        {
            out.write(b, off, len);
            this.transferred += len;
            this.listener.transferred(this.transferred);
        }

        public void write(int b) throws IOException
        {
            out.write(b);
            this.transferred++;
            this.listener.transferred(this.transferred);
        }
    }
} 
```

这是上传文件的 HttpMultipartPost .java

```
import java.io.File;
    import java.io.IOException;
    import org.apache.http.HttpResponse;
    import org.apache.http.HttpStatus;
    import org.apache.http.client.ClientProtocolException;
    import org.apache.http.client.HttpClient;
    import org.apache.http.client.methods.HttpPost;
    import org.apache.http.entity.mime.MultipartEntity;
    import org.apache.http.entity.mime.content.ContentBody;
    import org.apache.http.entity.mime.content.FileBody;
    import org.apache.http.impl.client.DefaultHttpClient;
    import org.apache.http.params.BasicHttpParams;
    import org.apache.http.params.HttpConnectionParams;
    import org.apache.http.params.HttpParams;
    import org.apache.http.util.EntityUtils;
    import com.file.upload.MyMultipartEntity.ProgressListener;
    import android.app.ProgressDialog;
    import android.content.Context;
    import android.os.AsyncTask;
    import android.util.Log;

        public class HttpMultipartPost extends AsyncTask<Void, Integer, Void> {

            private Context context;
            private String filepath;

            private HttpClient client;

            private ProgressDialog pd;
            private long totalSize;

            private static final String url = "Your URL";

            public HttpMultipartPost (Context context, String filepath) {
                super();
                this.context = context;
                this.filepath= filepath;
            }

            @Override
            protected void onPreExecute() {
                //Set timeout parameters
                int timeout = 10000;
                HttpParams httpParameters = new BasicHttpParams();
                HttpConnectionParams.setConnectionTimeout(httpParameters, timeout);
                HttpConnectionParams.setSoTimeout(httpParameters, timeout);

                //We'll use the DefaultHttpClient
                client = new DefaultHttpClient(httpParameters);

                pd = new ProgressDialog(context);
                pd.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
                pd.setMessage("Uploading File...");
                pd.setCancelable(false);
                pd.show();
            }

            @Override
            protected Void doInBackground(Void... params) {
                try {
                    File file = new File(filepath);

                    //Create the POST object
                    HttpPost post = new HttpPost(url);

                    //Create the multipart entity object and add a progress listener
                    //this is a our extended class so we can know the bytes that have been transfered
                    MultipartEntity entity = new CustomMultiPartEntity (new ProgressListener()
                    {
                        @Override
                        public void transferred(long num)
                        {
                            //Call the onProgressUpdate method with the percent completed
                            publishProgress((int) ((num / (float) totalSize) * 100));
                            Log.d("DEBUG", num + " - " + totalSize);
                        }
                    });
                    //Add the file to the content's body
                    ContentBody cbFile = new FileBody( file, "image/jpeg" );// change according
                    entity.addPart("source", cbFile);

                    //After adding everything we get the content's lenght
                    totalSize = entity.getContentLength();

                    //We add the entity to the post request
                    post.setEntity(entity);

                    //Execute post request
                    HttpResponse response = client.execute( post );
                    int statusCode = response.getStatusLine().getStatusCode();

                    if(statusCode == HttpStatus.SC_OK){
                        //If everything goes ok, we can get the response
                        String fullRes = EntityUtils.toString(response.getEntity());
                        Log.d("DEBUG", fullRes);

                    } else {
                        Log.d("DEBUG", "HTTP Fail, Response Code: " + statusCode);
                    }

                } catch (ClientProtocolException e) {
                    // Any error related to the Http Protocol (e.g. malformed url)
                    e.printStackTrace();
                } catch (IOException e) {
                    // Any IO error (e.g. File not found)
                    e.printStackTrace();
                }

                return null;
            }

            @Override
            protected void onProgressUpdate(Integer... progress) {
                //Set the pertange done in the progress dialog
                pd.setProgress((int) (progress[0]));
            }

            @Override
            protected void onPostExecute(Void result) {
                //Dismiss progress dialog
                pd.dismiss();
            }

        }

Hope this will helpful to you. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T03:45:38.633

当我用一个简单的线程替换**GetData Task**时，一切正常。

```
 new Thread( new Runnable() {

            @Override
            public void run() {
                String res = NetConnection. getRecordData(mUserId, mUserPassword);
                Log.e(TAG, res);
                parseJson(res);

            }
        }).start(); 
```

AsyncTask 有点可疑，我不知道为什么。

# c - 如何打印 struct timeVal

> ID：15468564
> 
> 赞同：2
> 
> 时间：2013-03-18T01:42:39.760
> 
> 标签：c, sockets, unix, gcc, gcc-warning

我的代码中有这一行

```
`printf("Rcvd pkt from %s:%d at <%ld.%06ld>\n", inet_ntoa(servAddr.sin_addr),  ntohs(servAddr.sin_port), timeVal.tv_sec, timeVal.tv_usec);` 
```

这是我在编译 gcc 时收到的警告

```
`cc1: warnings being treated as errors
`client12.c: In function ‘main’:
`client12.c:131: warning: format ‘%06ld’ expects type ‘long int’, but argument 5 has type ‘__darwin_suseconds_t’
`client12.c:131: warning: format ‘%06ld’ expects type ‘long int’, but argument 5 has type ‘__darwin_suseconds_t’ 
```

我究竟做错了什么？？

PS - 我已经包括`time.h` 和`sys/time.h`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T01:55:56.980

struct timeval 成员的类型因系统而异。与许多其他 C 数据类型一样，安全且可移植的做法是在打印值时强制转换：

```
printf("Rcvd pkt from %s:%d at <%ld.%06ld>\n",
    inet_ntoa(servAddr.sin_addr),  ntohs(servAddr.sin_port),
    (long) timeVal.tv_sec, (long) timeVal.tv_usec); 
```

这对于大小小于或等于 long 的任何数据类型都可以正常工作。而且这个习语是如此普遍，以至于人们会三思而后行，使任何这些常见数据类型的长度都超过 long，尽管要小心引用文件大小的数据类型（如 off_t）；`long long`在某些情况下可能是这样。

为了最大程度地安全，您将转换为`long long`并使用一种`%lld`格式，但这会将一个可移植性问题换成另一个，因为并非所有`printf`实现都支持`%lld`。而且我还没有看到那些时间值需要这种处理的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T01:56:59.327

将数字转换为正确的类型：

```
printf("Rcvd pkt from %s:%d at <%ld.%06ld>\n", inet_ntoa(servAddr.sin_addr),  ntohs(servAddr.sin_port), (long int)(timeVal.tv_sec), (long int)(timeVal.tv_usec)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T01:50:12.563

请参阅[sys/types.h](http://pubs.opengroup.org/onlinepubs/7908799/xsh/systypes.h.html)以了解`suseconds_t`. 显然，它是

> 一种有符号整数类型，能够存储至少在 [-1, 1,000,000] 范围内的值。

`int`这意味着它可能在您的系统上定义为一个。尝试`l`从格式字符串中删除长说明符，然后将其打印为常规小数。

**编辑**

根据 rra 的回答，这将不可移植。它仅适用`suseconds_t`于以相同方式定义的系统。我们从规范中知道该类型是至少 32 位的有符号整数类型。最便携的方法是将其转换为您可以逃脱的最大有符号积分内在函数。

# android - 未经许可不允许启动服务意图 - 发件人没有获得权限

> ID：15468567
> 
> 赞同：5
> 
> 时间：2013-03-18T01:42:44.577
> 
> 标签：android, commonsware, android-permissions

我正在使用 Mark Murphy 的优秀 Commonsware 书籍——但要消化的东西很多。我构建了“FakePlayer”应用程序（伪装成 mp3 播放器）。它包含一项服务。作为学习经验，我尝试编写一个简单的应用程序（只有一个按钮），其点击处理程序可以：

```
Intent i = new Intent();
i.setAction("com.example.cwfakeplayer.MyPlayerService");
Context context = getApplicationContext();
context.startService(i); 
```

它工作正常 - 服务启动正常。我注意到 Eclipse 抱怨该服务没有权限，所以我通过添加 2 行 android:permissions 和 android:exported 来更新服务的清单：

```
 <service 
        android:name="MyPlayerService"
        android:permission="com.example.fakeplayer.permission.MY_PLAYER_PERMISSION"
        android:exported="true"
       <intent-filter>
            <action android:name="com.example.fakeplayer.MyPlayerService"></action>
       </intent-filter>
      </service> 
```

我在 Eclipse 下使用“调试”将播放器应用程序重新加载到设备上（我使用的是 Galaxy S2）。它似乎奏效了；入门应用程序导致了我预期的权限异常。

然后我添加到启动应用程序的清单（授予它权限）：

```
<manifest
  ...
  <uses-sdk ....
  ....
  <uses-permission android:name="com.example.fakeplayer.permission.MY_PLAYER_PERMISSION" /> 
```

我将启动应用程序重新加载到设备上（使用 Eclipse 下的调试）。仍然在启动应用程序中获得权限错误。

我从设备中删除了这两个应用程序并重新安装（使用调试...），首先是服务应用程序，然后是启动程序。仍然得到烫发错误。

我正在研究 Murphy 先生的高级 Android 书中的“如何使用远程服务”部分，所以我意识到这可能不是跨应用程序工作的最佳方式。

我做了一个“adb shell dumpsys package”，找到了启动应用程序，发现它有“permissionsFixed=false”，没有“grantedPermissions”部分。我认为这意味着启动应用程序中的清单更改没有设法将烫发添加到应用程序中。但我不知道为什么。作为一种学习体验，到目前为止它只产生了困惑......

任何线索都非常感谢！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:17:58.390

> 我通过添加 2 行 android:permissions 和 android:exported 更新了服务的清单

从技术上讲，`android:exported="true"`是多余的，因为具有`<intent-filter>`自动使`<service>`导出。

> 我从设备中删除了这两个应用程序并重新安装（使用调试...），首先是服务应用程序，然后是启动程序。仍然得到烫发错误。

您没有显示您曾经在哪里声明过该`<permission>`元素的自定义权限。在实践中，如果您控制两个应用程序，则将相同的`<permission>`元素放在两个清单中，因此您的两个应用程序的安装顺序不再重要。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-18T03:08:39.093

尝试在清单中替换它

```
<service android:name="com.example.fakeplayer.MyPlayerService"></service> 
```

代替

```
<service 
    android:name="MyPlayerService"
    android:permission="com.example.fakeplayer.permission.MY_PLAYER_PERMISSION"
    android:exported="true"
   <intent-filter>
        <action android:name="com.example.fakeplayer.MyPlayerService"></action>
   </intent-filter>
  </service> 
```

如果这不起作用，请发布您的错误。

# css - 有没有办法相对于元素的中心定位背景图像？

> ID：15468574
> 
> 赞同：10
> 
> 时间：2013-03-18T01:43:23.520
> 
> 标签：css

我有一个想要应用背景的元素，尽管我希望根据其右坐标定位背景图像。

我可以使用容器 div 来表示背景，尽管在这种情况下它并不实用。

我目前有以下规则：

```
.myelem {
  background-image: url("myelem.png");
  background-position: 5% 60%;
  background-repeat: no-repeat;
} 
```

由于图像的大小，这在很大程度上起作用。如果可能的话，我想要指定背景的相对位置`middle`而不是`left`.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-18T01:45:38.977

css 属性[background-position](https://developer.mozilla.org/en/docs/CSS/background-position)接受`center`为一个值：

```
.myelem {
    background-image: url("myelem.png");
    background-position: center center;
    background-repeat: no-repeat;
} 
```

或速记版本：

```
.myelem {
    background: url("myelem.png") center center no-repeat;
} 
```

**更新 1**

没有简单的 css 方法将背景位置设置为中心（或底部或右侧）的偏移量。

您可以向实际图像添加填充，使用 javascript 计算页面加载后的位置，按照以下 SO 问题中的建议为元素添加边距：

*   [HTML 背景图像从中心偏移 x 个像素](https://stackoverflow.com/questions/5981842/html-background-image-offset-by-x-pixels-from-the-center)
*   [使用 CSS 从右侧偏移背景图像](https://stackoverflow.com/questions/5142405/offset-a-background-image-from-the-right-using-css)

或者，您可以使用它[`calc`](https://developer.mozilla.org/en-US/docs/CSS/calc)来计算正确的位置。尽管此时并非所有浏览器都[支持 calc 。](http://caniuse.com/calc)

使用 calc 你可以做这样的事情：

```
.myelem {
    background-image: url("myelem.png");
    background-position: 5% 60%;
    background-position: -webkit-calc(50% - 200px) 60%;
    background-position: calc(50% - 200px) 60%;
    background-repeat: no-repeat;
} 
```

**[演示](http://jsfiddle.net/MrtJW/2/)**

# django - Django，从自定义模型字段的fromfield方法将参数传递给表单字段

> ID：15468575
> 
> 赞同：1
> 
> 时间：2013-03-18T01:43:35.710
> 
> 标签：django, django-models, django-forms

根据[文档](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/#specifying-the-form-field-for-a-model-field "https://docs.djangoproject.com/en/dev/howto/custom-model-fields/#specifying-the-form-field-for-a-model-field")：

> 所有 kwargs 字典都直接传递给表单字段的 __init__() 方法

```
def formfield(self, **kwargs):
    # This is a fairly standard way to set up some defaults
    # while letting the caller override them.
    defaults = {'form_class': MyFormField}
    defaults.update(kwargs)
    return super(HandField, self).formfield(**defaults) 
```

如果 MyFormField 是：

```
class GeopositionField(forms.MultiValueField):
    def __init__(self, *args, **kwargs):
        for name, value in kwargs.items(): # this doesn't print anything
             print name 
             print value

         self.widget = GeopositionWidget()
         fields = (
           forms.DecimalField(label=_('latitude')),
           forms.DecimalField(label=_('longitude')),
         )
         super(GeopositionField, self).__init__(fields, required=False) 
```

如何将参数传递给表单域并在**init**方法中获取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:39:47.510

使用文档中的模式。创建字典并将其传递给 super 的`formfield`方法。

```
class GeopositionField(forms.MultiValueField):    
    #...
    def formfield(self, **kwargs):
        # get the values you want to pass to init
        defaults = {'your_kwarg_key': your_kwarg_value}
        defaults['your_other_kwarg_key'] = your_other_kwarg_value
        defaults.update(kwargs)
        return super(HandField, self).formfield(**defaults) 
```

我不认为文档是说`formfield`方法的结果被传递给`__init__`方法，而且我看不到它在源代码中发生这样的事情。

我认为文档只是说所有的`kwargs`都传递给`__init__`（如您所料），因此您可以通过将`form_class`参数传递给来更改字段类`__init__`- 但是如果您想动态创建字段类，您可以覆盖`formfield`方法。

# xcode - 如何使用 UIPickerView 制作年龄计算器应用程序？

> ID：15468577
> 
> 赞同：0
> 
> 时间：2013-03-18T01:43:39.410
> 
> 标签：xcode, uipickerview, calculator

我正在尝试使用 UIPickerView 制作年龄计算器应用程序。我有代码来进行计算，但是如何插入它们以使用 UIPickerView？年龄计算代码在一个 NSString - (NSString *)age:(NSDate *)dateOfBirth

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:13:59.443

学习如何做到这一点的最佳地点是苹果的文档。这是文档的链接。它里面还有 5 个示例代码链接，这将对您有很大帮助。这是链接：

[http://developer.apple.com/library/ios/ipad/#documentation/UIKit/Reference/UIPickerView_Class/Reference/UIPickerView.html](http://developer.apple.com/library/ios/ipad/#documentation/UIKit/Reference/UIPickerView_Class/Reference/UIPickerView.html)

# c - 如何从邻接矩阵构建邻接列表？

> ID：15468578
> 
> 赞同：1
> 
> 时间：2013-03-18T01:43:43.423
> 
> 标签：c, adjacency-list

我已经成功地为输入文件构建了一个邻接矩阵，输入的第一行作为顶点的总数，以下几行是任意顺序的边作为顶点对。例如

**文件.txt**

```
7
1 2
4 6
4 3
5 2 
```

但是，当我运行该程序时，邻接矩阵已成功构建，但是当我尝试将邻接列表创建为结构树数组时，程序 Seg 错误（核心转储）。关于程序为什么失败的任何线索？有问题的功能是：

```
tree * buildAdjList(int a[][100], int n)
{       int i, j, k;
    tree *node;
    tree * adjArray[n];
    for(i=0; i<=n; i++)
            adjArray[i] = NULL;
    for(j=0; j<=n; j++)
            for(k=0; k<=n; k++)
                    if(a[j][k] == 1){
                            node = (tree *)malloc(sizeof(tree));
                            node->val = k;
                            node->next = adjArray[j];
                            adjArray[j] = node;
                    }
    return adjArray[0];
} 
```

和程序的其余部分：

```
#include <stdio.h>
#include <stdlib.h>
struct tree{
    int val;
    struct tree *next;
};

typedef struct tree tree;

void printArray(int a[][100],int n);
void adjacencyMatrix(int a[][100], int n, int p1, int p2, FILE * inputF);
tree * buildAdjList(int a[][100], int n);
void printAdjArray(tree * adjArr[], int n);

int main(int argc, char ** argv)
{

int a[100][100];
int n,*q;
FILE * inputFile;
int entries, i;
inputFile = fopen(argv[1], "r");
int p1, p2 =0;
if(inputFile==NULL){
    printf("File failed to open.");
    exit(EXIT_FAILURE);
}
fscanf(inputFile, "%d", &entries);
tree * adjarray[entries];
q = (int *)malloc(sizeof(int)*n);
adjacencyMatrix(a,entries,p1,p2,inputFile);
adjarray[0] = buildAdjList(a, entries);
printAdjArray(adjarray, entries);
return 0;
}

void adjacencyMatrix(int a[][100], int n, int p1, int p2, FILE * inputF){
int i,j;
do{
    for(i = 0;i <= n; i++)
    {
        for(j = 0;j <=n; j++)
        {   if(i==p1 && j == p2){
                 a[i][j] = 1;
                 a[j][i] = 1;
            }
        }
        a[i][i] = 0;
    }
}while(fscanf(inputF, "%d %d", &p1, &p2) !=EOF);
    printArray(a,n);
} 
```

非常感谢任何和所有帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:17:43.280

我认为问题出在您的构建中：

```
tree * buildAdjList(int a[][100], int n)
{       int i, j, k;
    tree *node;
    tree * adjArray[n];
    // work
    return adjArray[0];
} 
```

您正在尝试从局部变量（失去作用域）返回内存。在上面的代码中，`tree * adjArray[n]`创建了一个**局部变量**数组（在本地地址空间中）。函数离开后返回指向该数组头部的指针将无效。

通常，当你想创建一个列表或节点时，你需要 malloc 以便内存将存在于堆中（因此将超过 create 函数本身）。就像是：

```
tree * buildAdjList(int a[][100], int n)
{
    tree *newtree = malloc(n * sizeof(tree *));
    // work
    return newtree;
} 
```

`tree *`请注意，您正在分配's 而不是 full的连续内存块（读取：数组）`trees`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-05T02:29:10.113

我意识到这是一个老问题，但我立即发现你在做循环计数器的方式存在问题。由于这是 C++，大小为 n 的数组中的元素是 arr[0]、arr[1]、... arr[n-1]。您的代码引用了超出数组边界的 arr[n] 并可能导致崩溃。

您的循环逻辑需要如下所示，以便在迭代中不包含 i=n，方法是在 for 循环测试中使用 < 而不是 <=：

```
for (i = 0; i < n; i++)
    adjArray[i] = NULL; 
```

# c - C中使用指针算术的数组赋值

> ID：15468580
> 
> 赞同：1
> 
> 时间：2013-03-18T01:43:50.203
> 
> 标签：c, arrays, pointers, pointer-arithmetic

当我使用指针算法访问特定元素时，如何更改数组中的值？

```
#include <stdio.h>

int main() {
  int a[3] = {1, 1, 1}, b[3] = {2, 2, 2};

  a++ = b++; // How can I get this to work so a[1] = b[1]?

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T01:49:12.077

数组不是指针。重复此操作三遍；*数组不是指针*。

你不能增加一个数组，它不是一个可赋值的值（即你不能改变它）。您当然可以对其进行索引以获取值：

```
a[1] = b[1]; 
```

其次，当您打算分配给数组的元素时，您当前的代码正在尝试递增然后为*数组本身分配一个新值。*数组在需要时降级为指针，所以这也有效：

```
int *a_ptr = a;
int *b_ptr = b;
*++a_ptr = *++b_ptr;
// or, better...
a_ptr[1] = b_ptr[1]; 
```

这就是你的意思。我更喜欢版本 1，而且通常也使用带指针的索引，因为它通常更容易阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T02:51:28.180

> 我怎样才能让它工作，所以 a[1] = b[1]？

简单的：

```
a[1]++; 
```

如果您只是想将`a[1]`(1)增加`b[1]`为 (2)，或者

```
a[1] = b[1]; 
```

如果您想`a[1]`拥有与该值相同的值，则`b[1]`不管该值是什么。

> 当我使用指针算法访问特定元素时？

在您的示例中，您没有访问任何元素，也没有进行指针运算，因为`a`and`b`是数组，而不是指针。你的问题的表述很难解释，既是因为这个，也是因为

```
a++ = b++; 
```

1) 完全没有意义 2) 即使`a`和`b` *是*指针也不是合法的 C，因为左侧必须是左值，但`a++`不是 3) 与您希望`a[1]`与`b[1]`. 可能你想要的是：

```
int* ap = a; // get pointer to first element of a
int* bp = b; // get pointer to first element of b

// point ap to second element of a and
// point bp to second element of b and
// copy the value at *bp to *ap
*++ap = *++bp; 
```

那确实会设置`a[1]`为`b[1]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T01:49:20.363

在这种情况下，您的数组实际上并不是指针。当它们作为指针访问时，它们会被编译器转换，但我不相信你可以做类似`a++`.

如果你想用算术来做到这一点，你需要实际的指针：

```
int *ap = a, *bp = b;

*ap++ = *bp++; 
```

这就像做`a[0] = b[0];`然后将每个指针移动到其关联数组中的下一个元素。

但是你的问题说你想设置`a[1] = b[1]`. 好吧，你可以这样做：

```
*++ap = *++bp; 
```

或者你可以只使用数组索引，让你在做什么更明显。

# c# - Windows phone 7：获取存储在库图片中的照片名称？

> ID：15468581
> 
> 赞同：2
> 
> 时间：2013-03-18T01:44:07.753
> 
> 标签：c#, windows-phone-7

我需要获取存储在库图片中的照片的名称。我有一个按钮来创建新`EventHandler<PhotoResult>`的和一个图像控件来显示照片。照片必须在 WP 的 Library Picture 中选择，如下所示：

![在此处输入图像描述](../Images/d612464a2be8892dd1b34433cec6e878.png)

我使用了照片选择器：

```
private void button1_Click(object sender, RoutedEventArgs e)
{
     PhotoChooserTask objPhotoChooser = new PhotoChooserTask();
     objPhotoChooser.Completed += new EventHandler<PhotoResult>(PhotoChooseCall);
     objPhotoChooser.Show();
}

void PhotoChooseCall(object sender, PhotoResult e)
{
    switch (e.TaskResult)
    {
        case TaskResult.OK:
            BinaryReader objReader = new BinaryReader(e.ChosenPhoto);
            image1.Source = new BitmapImage(new Uri(e.OriginalFileName));
            MessageBox.Show("Photo's name: " + e.OriginalFileName.ToString());
            break;
        case TaskResult.Cancel:
            MessageBox.Show("Cancelled");
            break;
        case TaskResult.None:
            MessageBox.Show("Nothing Entered");
            break;
    }
} 
```

但输出是照片的路径，而不是名称：

> 照片名称：\Applications\Data\C80566AB-E17E-495C-81A1-3FCAE34D3DEDE\Data\PlatformData\PhotoChooser-a8208960-3597-40fc-9b4f-869afcf822b6.jpg

怎样才能得到照片的名字？？？（我需要得到**PhotoChooser-a8208960-3597-40fc-9b4f-869afcf822b6.jpg**）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T13:57:17.027

通常的方法是使用`System.IO.Path.GetFileName()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T13:44:54.597

使用“\”作为分隔符拆分字符串，结果数组的最后一个条目包含照片的名称。应该很容易用 C# 执行。

# ios - 在 OpenGLES 2.0 中渲染纹理时出现不一致的伪影

> ID：15468582
> 
> 赞同：0
> 
> 时间：2013-03-18T01:44:14.313
> 
> 标签：ios, opengl-es, opengl-es-2.0

我只是想在 iPhone Simulator 的 OpenGLES 2.0 中渲染一些简单的粒子，有时会有伪影，有时没有，当我尝试运行我的代码时，几乎就像是抛硬币一样。第一个图像是它应该看起来的样子，第二个图像是伪影，注意底部的线条/条带。相同的图像，相同的代码，不同的结果，这让我很难过：

[http://i.imgur.com/C6LnoWj.png](http://i.imgur.com/C6LnoWj.png) <-没有文物

[http://i.imgur.com/EBj26kG.png](http://i.imgur.com/EBj26kG.png) <-artifacts

就像我说的，我不知道从哪里开始，它只是一个基本的两个三角形精灵，纹理坐标为 (0,0)、(0,1)、(1,0) 和 (1,1)。如果您对我应该发布的代码有任何建议，我将不胜感激

编辑：

这是我的纹理加载代码。

```
CGImageRef image = [UIImage imageNamed:filename].CGImage;
size_t width = CGImageGetWidth(image);
size_t height = CGImageGetHeight(image);
NSUInteger length = width*height*4;
GLubyte *data = (GLubyte*)malloc(length*sizeof(GLubyte));
CGContextRef context = CGBitmapContextCreate(data, width, height, 8, width*4, CGImageGetColorSpace(image), kCGImageAlphaPremultipliedLast);

CGContextTranslateCTM(context, 0, height);
CGContextScaleCTM(context, 1.0, -1.0);

CGContextDrawImage(context, CGRectMake(0, 0, width, height), image);
CGContextRelease(context);

GLuint texture;
glGenTextures(1, &texture);
glBindTexture(GL_TEXTURE_2D, texture);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, data); 
```

我根据首先将内存清零的建议将 malloc 调用切换为 calloc ，这似乎已经修复了它。

# glsl - 如何将顶点变换移动到顶点着色器

> ID：15468583
> 
> 赞同：0
> 
> 时间：2013-03-18T01:44:33.087
> 
> 标签：glsl, vertex-shader

我需要你的帮助！我正在尝试将顶点变换部分从 cpu 代码移动到顶点着色器，这是顶点变换的 cpp 代码：

```
//calculate the transform matrix of a refelcting surface
//@point: a point on the surface
//@normal: the normalized normal of the surface
//@return: the transform matrix
glm::mat4 flatReflect(glm::vec3& point, glm::vec3& normal)
{
    glm::vec4 R = glm::vec4(point,1);
    glm::vec4 N = glm::vec4(normal,0);
    GLfloat d = glm::dot(R,N);
    glm::mat4 result;
    result[0][0] = 1 - 2* N.x*N.x;
    result[0][1] = -2*N.x*N.y;
    result[0][2] = -2*N.x*N.z;
    result[0][3] = -2*N.x*d;
    result[1][0] = result[0][1];
    result[1][1] = 1 - 2*N.y*N.y;
    result[1][2] = -2*N.y*N.z;
    result[1][3] = -2*N.y*d;
    result[2][0] = result[0][2];
    result[2][1] = result[1][2];
    result[2][2] = 1-2*N.z*N.z;
    result[2][3] = -2*N.z*d;
    result[3][0] = 0;
    result[3][1] = 0;
    result[3][2] = 0;
    result[3][3] = 1;
    return result;
} 
```

任何的想法？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T05:42:16.423

你可以很容易地翻译。首先，翻译这些行：

```
glm::vec4 R = glm::vec4(point,1);
glm::vec4 N = glm::vec4(normal,0);
GLfloat d = glm::dot(R,N); 
```

这些类型和函数本身就存在于 GLSL 中，不需要限定，因此：

```
vec4 R = vec4(point,  1.0);  // An explicit decimal is important; some drivers do
vec4 N = vec4(normal, 0.0);  // not perform implicit coercions.
float d = dot(R, N); 
```

构造矩阵略有不同；您可以一次创建并返回所有矩阵，而不是声明一个矩阵并设置其元素，例如（对于单位矩阵）：

```
return mat4(1.0, 0.0, 0.0, 0.0,
            0.0, 1.0, 0.0, 0.0,
            0.0, 0.0, 1.0, 0.0,
            0.0, 0.0, 0.0, 1.0); 
```

访问向量的元素就像在 C++ 中一样。知道了这一点，其余的翻译应该很容易。祝你好运！

# python - 必须先创建 wx.App 对象！第2部分

> ID：15468585
> 
> 赞同：0
> 
> 时间：2013-03-18T01:44:47.877
> 
> 标签：python, wxpython

我看到另一个有这个问题的帖子，但解决方案对我不起作用。这段代码的两半分开工作，但不能一起工作。**（我无法让这篇文章中的缩进代码选项起作用，所以我在这里重新创建了它......所以在这一点上可能有不止一个错误......）

```
import wx
import numpy as np
import os
import numpy

if __name__ == "__main__":
    app = wx.PySimpleApp()
    wildcard = "Python source (*.py)|*.py|" \
            "Compiled Python (*.pyc)|*.pyc|" \
            "All files (*.*)|*.*"
    dlg = wx.MessageDialog(None, "Run program?",
                      'Power over DeltaT',
                      wx.YES_NO | wx.ICON_QUESTION)
    retCode = dlg.ShowModal()
    if (retCode == wx.ID_YES):
        dialog = wx.FileDialog(None, "File", os.getcwd(), "", wildcard, wx.OPEN)
        if dialog.ShowModal() == wx.ID_OK:
            x, y, z = np.loadtxt(dialog.GetPath(), dtype=float, delimiter=',',
                                 skiprows=2,usecols=(6, 18, 19), unpack=True)
            dialog.Destroy()
            print x
            f = (z-y) / (x+.01)
            average=numpy.sum(f)/f.shape[0]
            print average
dlg.Destroy()

class StaticTextFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, -1, 'Average Watts per Delta T', size=(400, 300))
        panel = wx.Panel(self, -1)
        wx.StaticText(panel, -1, "The average :", (100, 100))
        x=(13.21)
        stra = str(x)

        text = wx.StaticText(panel, -1, stra, (200, 100))
        font = wx.Font(18, wx.DECORATIVE, wx.ITALIC, wx.NORMAL)
        text.SetFont(font)

app = wx.PySimpleApp()
frame = StaticTextFrame()
frame.Show()
app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:13:19.223

好的...所以您可能只有在双击 .py 文件时才会遇到主要问题（即，将其作为主文件运行）；这是假设`dlg.Destroy()`正确缩进。

因此，您的问题是 wx.Python 一次只希望运行一个应用程序，而您在技术上调用了两个应用程序：一次在主程序内部，一次在外部。

从文件末尾删除`app = wx.PySimpleApp()`and并将框架调用放在末尾`app.MainLoop()``if __name__=='__main__'`

虽然我还没有真正使用它进​​行编码，但我的建议（供将来参考）是过渡到 Kivy： http: [//kivy.org/#home](http://kivy.org/#home)

它看起来棒极了。

# python - 尝试通过 com/pywin32 从 Python 运行 Excel-Solver 时出错

> ID：15468586
> 
> 赞同：1
> 
> 时间：2013-03-18T01:44:50.690
> 
> 标签：python, excel, winapi, com, solver

我正在尝试通过 python 中的 pywin32 运行 Excels Solver 加载项：

```
import win32com.client
from win32com.client import constants as c

app = Dispatch("Excel.Application")
app.Visible = True
app.Workbooks.Open(r'C:\path\to\testsolver.xlsm')
app.Run("runsolver") 
```

..但得到以下错误：

```
"Cannot run the macro 'runsolver'. The macro may not be available in this workbook or all  macros may be disabled" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-28T03:35:31.627

我意识到这是一岁了，但如果这仍然有价值，这里的问题可能是在创建 Excel OLE 对象时不会自动加载 Solver。按照设计，加载项必须先手动加载，然后才能在 Excel OLE 对象中使用。

您可以通过检查 OLE 创建的实例并转到“数据”选项卡并观察 Solver 没有出现在那里来确认它没有加载，就像从 Windows GUI 打开 Excel 时一样。

我在尝试解决 Delphi 代码中的类似问题时发现了这一点，如下所述：

[CreateOleObject 打开的工作簿不会运行包含 Application.Run "Solver.xlam!..." 的宏导致错误 400](https://stackoverflow.com/questions/21983891/createoleobject-opened-workbook-wont-run-macro-containing-application-run-solv)

我希望 Python 语法会相似。

# java - 构造函数中的Java可覆盖方法调用

> ID：15468589
> 
> 赞同：0
> 
> 时间：2013-03-18T01:45:20.580
> 
> 标签：java

我正在做一些开始的javaing，我得到了这个错误方法

```
public CommissionEmployee(String firstName, String lastName, String SocialSecurityNumber, double GrossSales, double commissionRate) {
//implicit call to Object constructor occurs here
this.firstName = firstName;
this.lastName = lastName; 
this.SocialSecurityNumber = SocialSecurityNumber;
setGrossSales(7500.0); //validate and store gross Sales
setCommissionRate(.05); //Validate and Store Commission Rate
} 
```

有人可以解释我的错误吗？我不想忽略这一点，因为我无法将代码扩展为子类。

# sublimetext2 - 使用 Sublime Text 2 编码

> ID：15468595
> 
> 赞同：1
> 
> 时间：2013-03-18T01:46:38.537
> 
> 标签：sublimetext2

一个简单的问题，我刚开始在 Windows 上使用 Sublime Text 2 进行编码，我想更改一些小东西，比如当我编写 if 语句（例如 if (i > 0)）时，在我输入“0”后立即，我的光标介于“0”和“）”之间，所以如果我按回车键，我希望它跳到“）”之后。我习惯了日食，所以我想知道如何获得模仿日食的设置。我已尝试编辑设置文本文件，但找不到我要查找的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T01:57:17.383

尝试将以下内容添加到您的用户键绑定中（可通过 访问`Preferences -> Key Bindings - User`）

```
{ "keys": ["enter"], "command": "move", "args": {"by": "characters", "forward": true},
  "context": [
    { "key": "selection_empty", "operator": "equal", "operand": true },
    { "key": "preceding_text", "operator": "not_regex_match", "operand": "[[:space:]]*", "match_all": true },
    { "key": "following_text", "operator": "regex_contains", "operand": "^[\\)]", "match_all": true },
    { "key": "auto_complete_visible", "operator": "equal", "operand": false }
]} 
```

编辑：更新正则表达式以仅匹配括号。

# compression - “启动”或“训练”用于压缩/解压缩的压缩算法？

> ID：15468600
> 
> 赞同：5
> 
> 时间：2013-03-18T01:47:52.143
> 
> 标签：compression

我正在尝试确定是否有可以预先训练的压缩算法，您可以在其中使用训练过的数据来压缩和解压缩数据。

我不确切知道压缩算法是如何工作的，但我知道这是可能的。

例如，如果我单独压缩这些行，它就不会很好地压缩。

```
banana: 1, tree: 2, frog: 3
banana: 7, tree: 9, elephant: 10 
```

如果我事先用 100 条样本行训练压缩算法，它会很好地压缩，因为它已经有一种将“香蕉”映射到代码/查找值的方法。

伪代码来帮助解释我的问题：

```
# Compressing side

rip = Rip()
trained = rip.train(data)  # once off
send_trained_data_to_clients(trained)

compressed = rip.compress(data)

# And on the other end

rip = Rip()
rip.load_train_data(train)
data = rip.decompress(compressed) 
```

是否有一个通用的（即有流行语言的库）压缩算法让我这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T01:54:12.107

用大多数压缩算法的说法，您所描述的将是压缩器的预设*字典*。

我不能代表所有的压缩库，但 zlib 绝对支持这一点——正如你想象的那样——通过`deflateSetDictionary()`and`inflateSetDictionary()`函数。有关详细信息，请参阅[zlib 手册](http://www.zlib.net/manual.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T01:52:34.983

它存在，称为 Lempel-Ziv 编码，您可以在此处阅读更多信息：

[http://en.wikipedia.org/wiki/LZ77_and_LZ78](http://en.wikipedia.org/wiki/LZ77_and_LZ78)

它是几种“字典”类型的无损压缩方法之一。

LZ 是您的 Zip 归档器的基本功能。

# javascript - 谷歌分析 javascript 安全 - 财产 ID 公开

> ID：15468601
> 
> 赞同：1
> 
> 时间：2013-03-18T01:48:14.217
> 
> 标签：javascript, html, security, google-analytics

我已阅读以下问题：[Google Analytics 和其他客户端分析工具的安全性？](https://stackoverflow.com/questions/9165977/security-on-google-analytics-and-other-client-side-analytics-tools)

但我需要一个更简单的答案。

根据谷歌分析网站，我将以下代码放在我网站的标题中：

```
<script type="text/javascript">

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'propertyID']);
_gaq.push(['_setDomainName', 'brokersqueeze.com']);
_gaq.push(['_setAllowLinker', true]);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') +   '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

</script> 
```

虽然对这里的大多数读者来说可能很明显，但我意识到所有这些信息（如 PropertyID）都可以通过浏览器中的“检查元素”获得。

我是否正确放置了 GA 代码段？或者有没有办法让我们GA这样信息对公众隐藏？上述问题的答案似乎表明，虽然信息是公开的，但每个人都面临着风险。我有这个权利吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T02:48:07.047

是的，你做对了。每个客户端分析工具都存在这种风险。如果他们向 GA 发送欺骗性请求，您可以尝试在报告中过滤结果。即使您在 javascript 代码中混淆了 ID，它们也可以捕获 http 请求并获取该 ID。

# wamp - 如何摆脱 laravel on wamp 中的公共路径

> ID：15468608
> 
> 赞同：2
> 
> 时间：2013-03-18T01:49:20.810
> 
> 标签：wamp, laravel, virtualhost, public

我有一个快速的问题。我第一次尝试使用 Laravel。为此，我正在使用 Wamp。而且我不知道这是否重要，但我在这个地址设置了 wamp 的 DocumentRoot ：

```
DocumentRoot "C:\Users\Bebop\Documents\Site Internet/" 
```

我在一个名为 Sites 的文件夹中将 wamp 用于许多不同的网站。当我访问其中一个站点时，我会去：localhost/Sites/thewebsite。所以我真正想要的只是摆脱 Laravel 网站路径中的公用文件夹。

目前我做了：

*   更改 apache 的 httpd.conf 以包含 vhosts.conf ：

    包括 conf/extra/httpd-vhosts.conf

*   创建了一个新的虚拟主机并像这样配置目录：

    DocumentRoot "C:/Users/Bebop/Documents/Site Internet/Sites/LaravelTest/public" ServerName Sites/LaravelTest

    选项索引 FollowSymLinks AllowOverride all Order Deny,Allow Deny from all Allow from 127.0.0.1

之后，我在位于 C:\Windows\System32\drivers\etc 的文件中添加了一个新主机

```
127.0.0.1       localhost
127.0.0.1       Sites/LaravelTest 
```

通过这样做，当我访问 localhost 时，我会被重定向到 Laravel 网站。但我想去 localhost/Sites/LaravelTest，因为现在我无法访问我所有的其他网站。

有谁知道这是怎么做到的吗 ？

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:52:23.553

假设你想访问你的 Laravel 站点：`http://localhost/LaravelSite/`

您可以在`httpd.conf`文件中使用别名：

```
Alias /LaravelSite/ "C:/Users/Bebop/Documents/Site Internet/Sites/LaravelTest/public/"
<Directory "C:/Users/Bebop/Documents/Site Internet/Sites/LaravelTest/public">
Options Indexes FollowSymLinks
AllowOverride All
Order allow,deny
Allow from all
</Directory> 
```

或者，使用以下命令在命令提示符下创建符号链接：

```
mklink /D "C:\Users\Bebop\Documents\Site Internet\Sites\LaravelSite" "C:\Users\Bebop\Documents\Site Internet\Sites\LaravelTest\public"` 
```

# css - CSS浮动位置

> ID：15468610
> 
> 赞同：-1
> 
> 时间：2013-03-18T01:49:42.087
> 
> 标签：css, css-float

我的主页上有一个部分显示最新帖子的摘录，我为前 2 个帖子创建了一些 css，以便它们并排放置，但我无法让第二篇文章漂浮在第一篇文章。即使我在第二个标题上输入 float:right ，它也会向右浮动，但在第一个标题下。如果您访问我的网站 www.ehowtodrywall.com，您就会明白我的意思。如何让第二个标题浮动到最新文章部分中第一个标题的右侧...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T01:57:31.603

你有`clear:both`。`div.srp-widget-singlepost`如果您删除它，它们将彼此相邻漂浮。

当您清除浮动时，它会在“新行”上开始这种类型的浮动。这就像你在那种浮动上击中“回车”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T01:52:54.077

这是因为浮动的宽度大于其父级的宽度。如果您希望它们彼此相邻，则需要减小它们的宽度，例如 50% 50%。但不要忘记边距和边框会增加宽度。

# c - C读取过去的换行符

> ID：15468618
> 
> 赞同：0
> 
> 时间：2013-03-18T01:51:03.270
> 
> 标签：c, char, newline, printf

例如，当我键入`test \n test`并尝试使用此代码编写它时

```
FILE *f = fopen(file, "w+");
fflush(f);
if (f==NULL) {
    //perror(f);
    return 0;
}
else{
    int i = fprintf(f, "%s", text);
    if (i>0) {
        fclose(f);

        return  1;
    }
    else{
        fclose(f);

        return 0;
    }
} 
```

然后用这个阅读它

```
FILE *f = fopen(file, "r");
static char c[100000];
const char *d;
if (f!=NULL) {
    if (fgets(c, 100000, f) !=NULL){
        d = c;
    }
    else{
        d = "No text";
    }
}
else{
    /*
     char *ff = f;
     perror(ff);
     */
    d = "File not found";
}
fclose(f);

return d; 
```

它只会读写`test`，不会`test`，换行，`test`。为什么这行不通？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T01:53:47.240

该`fgets()`函数读取到它遇到的第一个换行符，或者当它用完存储结果的空间或当它获得 EOF 时停止（因此没有更多数据要读取）。

随后的调用`fgets()`将在第一个换行符之后收集信息。

如果您想一次阅读全部内容，请考虑`fread()`. OTOH，您也必须在那里解决一些问题（特别是：（1）您可能要求最多 1000 个字节，但只能返回 20 个字节，因此您的代码必须正确处理短读取；和（2）`fread()`不会为您终止输入字符串，不像`fgets()`等）。

在编写方面，`fwrite()`将是对 的逻辑补充`fread()`，但您可以很好地继续使用`fprintf()`和朋友，或`fputs()`，或`putc()`，或任何其他标准 I/O 编写功能。对于“如果您使用这些函数编写，则必须使用这些其他函数阅读”没有正式的限制。这取决于您正在编写和阅读的内容的性质，但您通常可以自由切换，因为看起来最方便。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T01:53:38.363

[http://www.cplusplus.com/reference/cstdio/fgets/](http://www.cplusplus.com/reference/cstdio/fgets/)

> 从流中读取字符并将它们作为 C 字符串存储到 str 中，直到读取 (num-1) 个字符或到达换行符或文件结尾，以先发生者为准。

# spring - @Resource 有时不会在 Spring 中注入

> ID：15468619
> 
> 赞同：2
> 
> 时间：2013-03-18T01:51:23.637
> 
> 标签：spring, struts2

我有一个 Spring/Struts2 问题，我在 Spring 论坛中询问过，但没有回复 [@Resource 有时没有注入](http://forum.springsource.org/showthread.php?135570-Resource-not-injected-sometimes)

为了便于阅读，我将在这里重复这个问题。希望它不被视为垃圾邮件

当我使用 @Resource 注入 bean 时，我遇到了一个非常奇怪的问题。我正在使用 Struts2 2.2.3.1 和 Spring 3.0.0 提供的 Spring 插件。（我无法在不知道正确原因的情况下升级到最新版本的 Spring，因为所有程序都在生产中）

问题或观察到的问题是当创建 Struts2 Action 时，使用 @Resource 注释的字段应该具有 Spring 注入的资源。但是，有时且仅有时其中一个带注释的资源未注入或值为 null，因此会导致 NullPointerException。问题发生的点未确定，这意味着在不同环境中运行的同一组程序将导致不同的行为。此外，未注入的资源并不总是相同的。例如，如果有动作 A、B、C 和环境 E1 和 E2，则在 E1 中，A 动作有时可能会出现此问题，而在 E2 中，可能是动作 B 出现问题。一件事'

这就是我所说的问题只“有时”发生的意思。假设 A 遇到这种问题，我启动 Web 服务器（tomcat 或 WAS），如果出现问题，我会第一次访问 A，它将在整个服务器启动期间发生。如果我第一次访问 A 时没有出现问题，那么在此服务器启动的整个过程中都不会出现问题。此外，如果这次它是第一个没有注入的资源，那么这次启动也是一样的。

这是我的一些应用程序设置：我将 XML 与注释扫描混合使用。基本上所有的 Action、Service、Dao 类都在 XML 中定义，但是所有属性定义都留给 Spring 扫描实际类。

样本定义：

代码：

```
<!-- have this in all XML files -->
<context:annotation-config/>

<!-- an action definition, all actions are scoped prototype. It will use adm.common.admBranchesManager in the action with field annotated with @Resource -->
<bean id="adm.common.chooseBranchAction" class="com.bi.wms.adm.common.web.ChooseBranchAction" scope="prototype"></bean>

<!-- all service and dao are singleton and do not have any problem, all service/Manager are annotated with @Transactional. In Action we only code against interface and not actual concrete class -->
<bean id="adm.common.admBranchesManager" class="com.bi.wms.adm.common.service.impl.AdmBranchesManagerImpl"/>

<bean id="adm.common.admBranchesDao" class="com.bi.wms.adm.common.dao.jdbc.AdmBranchesDaoImpl"/> 
```

此外，对于所有操作，它们都扩展了一个抽象操作，该操作具有会话范围的资源字段。

代码：

```
<bean id="base.wms.login" class="com.bi.wms.common.model.WmsLogin" destroy-method="logout" scope="session">
     <aop:scoped-proxy />
     <property name="admUserSessionsManager" ref="adm.operation.admUserSessionsManager"/>
  </bean> 
```

这是示例操作的一部分： 代码：

```
//this class is just a sample not the actually one thats having the problem, AbstractWmsAction is the class that have a session-scoped bean
public class AdmWmsControlAction extends AbstractWmsAction
{
    @Resource(name = "adm.operation.admWmsBatchGroupsManager")
    private AdmWmsBatchGroupsManager admWmsBatchGroupsManager;
    @Resource(name = "adm.operation.admWmsControlManager")
    private AdmWmsControlManager admWmsControlManager;

//sometimes we use setters for injecting but that doesnt stop the problem from happening
//....omit
} 
```

不知道有没有人遇到过这种问题。如果需要更多信息，我会尽力提供。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:56:47.440

我之前在使用注解的 Spring 中看到过类似的问题。这就是为什么我更喜欢在有限的情况下使用@Transactional。哪些类使用@Transactional 注释？实现还是接口？

我只是通过调试器快速查看了这一点，但我认为您最终可能会使用多个 bean，一个使用 @Transactional 创建的 Spring 代理 -- ly 注释类，另一个在您的应用程序上下文中定义。我建议如果你在 Spring 配置文件中定义服务，你也可以在那里定义事务代理，并使用 @Resource 注释按名称注入代理，或者删除 xml 中的配置，然后按类型注入你的注释。这样，如果您有无法解析的重复匹配项，Spring 会通知您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-31T04:23:30.837

在这些时间之后在这里做笔记我还没有找到真正的原因和解决方案。

不过时间证明升级到Spring 2.3.3或更高版本可以解决问题或者至少问题还没有出现

# facebook - 没有语言环境的 Facebook 搜索 API

> ID：15468622
> 
> 赞同：0
> 
> 时间：2013-03-18T01:52:06.153
> 
> 标签：facebook, api, facebook-graph-api, search, locale

我正在玩 Facebook API。我在尝试搜索帖子时遇到问题。问题是当我搜索某些东西时，它会自动假定我将语言环境参数设置为 en_US。例如，当我搜索这个时，我没有得到任何结果：

[http://graph.facebook.com/search?q=tnt.fm/mmci8&type=post](http://graph.facebook.com/search?q=tnt.fm/mmci8&type=post)

要获得结果，我必须添加 locale 属性并指定一种语言。这个查询确实得到了一些结果：

[http://graph.facebook.com/search?q=tnt.fm/mmci8&type=post&locale=pt_BR](http://graph.facebook.com/search?q=tnt.fm/mmci8&type=post&locale=pt_BR)

我正在查看 Facebook API 文档，但没有找到问题的答案。有没有办法对帖子进行“多语言”搜索？我的意思是，进行搜索并返回所有结果，无论它们是哪种语言。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:39:30.763

我不这么认为。

如果您在不指定区域设置的情况下尝试不同的查询，例如，`search?q=obama&type=post`您很可能会看到一些结果。Facebook 默认使用您用于搜索的帐户的区域设置。

搜索不会为我返回任何结果，因为它在我的默认语言环境`tnt.fm/mmci8`中不可用。`en_US`您的帖子仅在`pt_BR`区域设置中可用。

看起来唯一的搜索选项是：

1.  默认语言环境
2.  指定的语言环境

# java - 如果在命令行参数中指定，则覆盖属性文件值

> ID：15468625
> 
> 赞同：0
> 
> 时间：2013-03-18T01:52:33.407
> 
> 标签：java, command-line, properties, command-line-arguments

我正在做一个项目，我需要从`config.properties`文件中读取所有内容。下面是我的`config.properties`文件-

```
NUMBER_OF_THREADS: 100
NUMBER_OF_TASKS: 10000
ID_START_RANGE: 1
TABLES: TABLE1,TABLE2 
```

我正在像这样从命令提示符运行我的程序 - 它工作正常。

`java -jar Test.jar "C:\\test\\config.properties"`

下面是我的程序-

```
private static Properties prop = new Properties();

private static int noOfThreads;
private static int noOfTasks;
private static int startRange;
private static String location;
private static List<String> tableNames = new ArrayList<String>();

public static void main(String[] args) {

        location = args[0];

        try {

            readPropertyFiles();

        } catch (Exception e) {
            LOG.error("Threw a Exception in" + CNAME + e);
        }
    }

    private static void readPropertyFiles() throws FileNotFoundException, IOException {

        prop.load(new FileInputStream(location));

        noOfThreads = Integer.parseInt(prop.getProperty("NUMBER_OF_THREADS").trim());
        noOfTasks = Integer.parseInt(prop.getProperty("NUMBER_OF_TASKS").trim());
        startRange = Integer.parseInt(prop.getProperty("ID_START_RANGE").trim());
        tableNames = Arrays.asList(prop.getProperty("TABLES").trim().split(","));

        for (String arg : tableNames) {

            //Other Code
        }
    } 
```

**问题陈述：-**

现在我要做的是-假设在命令提示符下，如果我传递其他参数，例如`NUMBER_OF_THREADS, NUMBER_OF_TASKS, ID_START_RANGE, TABLES`连同`config.properties file`，那么它应该覆盖 的值`config.properties file`。所以如果我像这样运行我的程序 -

`java -jar Test.jar "C:\\test\\config.properties" t:10 n:100 i:2 TABLES:TABLE1 TABLES:TABLE2 TABLES:TABLE3`

然后在我的程序中-

```
noOfThreads should be 10 instead of 100
noOfTasks should be 100 instead of 10000
startRange should be 2 instead of 1
tableNames should have three table TABLE1, TABLE2, TABLE3 instead of TABLE1 and TABLE2. 
```

如果我需要覆盖 config.property 文件，我将遵循上述格式。

但如果我这样跑——

`java -jar Test.jar "C:\\test\\config.properties"`

那么它应该从`config.properties file`.

一般来说，`config.properties file`如果我在命令行中传递参数以及`config.property`文件位置，我想覆盖。

谁能给我一个做这个场景的例子（干净的方式）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T01:57:41.987

您可以手动合并它们，但是您需要命令行选项的上下文，您怎么知道应该将 TABLE3 添加到 tableNames 数组，而不是 10、100 和 2？

如果您要像这样更改命令行：

```
java -jar Test.jar "C:\\test\\config.properties" 10 100 2 TABLES:TABLE1 TABLES:TABLE2 TABLES:TABLE3 
```

然后，您可以在读取属性文件后循环通过 main 方法中的命令行参数，并插入或添加属性条目。

# c# - 没有重载方法“命中”需要 1 个参数。需要返回两个List

> ID：15468632
> 
> 赞同：-2
> 
> 时间：2013-03-18T01:53:12.377
> 
> 标签：c#

我在 main 中调用类函数时遇到了麻烦，因为它需要同时返回 2 个列表。该函数将一张卡片从一个列表添加到另一个列表，然后将其从原始列表中删除。但是当我尝试调用该函数时，我得到了这个错误......没有重载方法“Hit”需要1个参数

```
 using System;
    using System.Collections.Generic;
    using System.Text;

    namespace BlackJackGameX
    {
        public class MainClass
        {
            public static void Main (string[] args)
            {

                Deck Cards = new Deck();

                Hand PlayerHand = new Hand ();

                Console.WriteLine("Welcome to Black Jack\n\nPress Enter To Start");
                Console.ReadLine ();

                PlayerHand.Hit(PlayerHand);
                PlayerHand.Hit(PlayerHand);
                PlayerHand.HandPrint();

            }
        }
    } 
```

问题出在这个手类的 Hit Function 的底部

```
using System;
using System.Collections.Generic;
using System.Text;

namespace BlackJackGameX
{
    public class Hand
    {

        Deck CardDeck = new Deck ();

        public List<Card> PlayerHand;

        public Hand ()
        {

        }

        public void HandPrint()
        {   
            for (int i = 0; i < PlayerHand.Count; ++i)
            {
                Console.WriteLine("You have a " + PlayerHand[i].CardValue + " of " + PlayerHand[i].CardSuit);

                if (i < PlayerHand.Count)
                {
                    Console.WriteLine ("&");
                }
            }

            Console.ReadLine();

        }

        public List<Card> Hit(List<Card> CardDeck, List<Card> PlayerHand)
        {
            PlayerHand.Add(CardDeck[1]);
            CardDeck.Remove(CardDeck[1]);

            return PlayerHand;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T02:53:21.487

您的`Hit`方法需要两个`List<Card>`参数，但您只传递一个`Hand`对象给它。

```
public List<Card> Hit(List<Card> CardDeck, List<Card> PlayerHand)
{
    ...
} 
```

您需要做的是将`Cards`main 中的对象传递给`Hand`构造函数，以便 Hand 可以使用它：

```
public class Hand
{
    // You should make this private with a public property to guard it
    public List<Card> PlayerHand;

    // No reason to expose this to the outside
    private Deck cardDeck = new Deck();

    public Hand (Deck cards)
    {
        cardDeck = cards;
    }

    // There's nothing worth returning here, so make it void
    public void Hit()
    {
        // I would probably implement a method in the Deck class
        // so you could do something like (where RemoveNext returns the card removed):
        // playerHand.Add(cards.RemoveNext()); 
        playerHand.Add(CardDeck[1]);
        CardDeck.Remove(CardDeck[1]);
    } 
```

你的`Main`样子是这样的：

```
public static void Main (string[] args)
{
    Deck cards = new Deck();
    Hand playerHand = new Hand(cards);

    Console.WriteLine("Welcome to Black Jack\n\nPress Enter To Start");
    Console.ReadLine();

    playerHand.Hit();
    playerHand.Hit();
    // I would rename this to PrintHand(). HandPrint is a noun.
    playerHand.HandPrint();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T01:56:01.657

您遇到的错误是因为`Hit()`您的`Hand`类中的方法接受 2 个参数，而不是 1 个。它需要两个`List<Card>()`参数。

无论参数数量如何，您的代码都传递了一个`Hand`根本不起作用的对象。

# html - CSS 在 Internet Explorer 中无法正常工作？（绝对定位）

> ID：15468639
> 
> 赞同：0
> 
> 时间：2013-03-18T01:53:56.320
> 
> 标签：html, css, internet-explorer, compatibility

页面上的许多其他内容也在使用绝对定位，但由于某种原因，“投票”和“配置文件”按钮在 Internet Explorer 9/10（8-在这里不是问题）。HTML 中没有样式，就在这里。有什么突出的吗？谢谢！

```
 .contain{
        margin-left:-65px;
        margin-top:-85px;
        position:absolute;

    }
    .video_display1{
        background-color:#333;
        width:250px;
        height:200px;
        margin-top:40px;
        margin-left:88px;
    display:inline;
    }
    .profile1{
        width:49px;
        height:12px;
        margin-left:87px;
        margin-top:3px;
        position:absolute;
    }
    .vote1{
        margin-top:3px;
        margin-left:240px;
        position:absolute;
    }
    .display_vote1{
        margin-left:295px;
        margin-top:2px;
        font-size:11px;
        position:absolute;
    } 
```

这是HTML：

```
 <span class="contain">
                <iframe class="video_display1" width="250" height="200" src=""> </span>
                <span class="profile1"><img src=''/></span>     
                <span class="vote1"><input type="image" src=''/></span>             
                <span class="display_vote1"></span>
            </span> 
```

和文档类型：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:21:05.710

您尚未定义图像的宽度和高度，因此要获得固定的高度和宽度，请先定义它。并`display: inline-block;`在你的`.contain`then only 中使用你得到你想要的东西。

# jquery - 这个 JSON 结构何时转换为所有字符串？

> ID：15468640
> 
> 赞同：19
> 
> 时间：2013-03-18T01:53:56.603
> 
> 标签：jquery, node.js, express, jsonp

我正在向我的节点/快递服务器发送一个 JSON 结构并将对象保存到数据库中。问题是我发送带有整数和布尔值的 JSON，但所有内容都保存为字符串。

这是我的节点/快递代码：

```
var express = require('express');

var app = express();
app.enable("jsonp callback");
app.use(express.bodyParser());

// allow cross origin scripting to get data from devices directly
app.all('*', function(req, res, next) {
  res.header('Access-Control-Allow-Origin', '*');
  res.header('Access-Control-Allow-Methods', 'PUT, GET, POST, DELETE, OPTIONS');
  res.header('Access-Control-Allow-Headers', 'Content-Type');
  next();
});

app.post('/departures', function(req, res) {

/* I started using this to convert back to integers - but need to solve the problem
    for (var i in req.body.data) {
      req.body.data[i].siteid = parseInt(req.body.data[i].siteid);
    }
*/
    console.log('saving data '+JSON.stringify(req.body.data));
    positionProvider.save(req.body.data, function(){
      res.json({status:'success'});
    })
}); 
```

这是我使用 jquery 发布的方式：

```
 var data = [{"siteid":123}];

    $.ajax({
        type: 'POST',
        url: serverUrl + '/departures',
        data: {
            data: data
        },
        success: function(resp) {
            alert('saved departure data '+JSON.stringify(data))
        },
        error: function(err) {
            console.log('error posting to server...');
            console.log(err);
        }
    }); 
```

jquery 端报告它发送了 {"siteid":123}，但节点端报告它收到了 {"siteid":"123"}。

整数在哪里转换为字符串？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-18T16:17:16.683

作为从客户端发送到服务器的产物，您的数据将转换为字符串。请记住，客户端和服务器实际上并不是以 JSON 进行通信，而是以文本或二进制数据进行通信。服务器（Express？）隐式解释作为字符串发送的数据，如果您包含`content-type: application/json`请求标头，则将其转换为 JSON。如果您希望数据以特定格式保存，则需要在服务器上明确键入检查和转换。

TLDR（评论）；不要依赖客户端发送有效数据。在将其保存到数据库之前对其进行清理。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-01-06T07:54:22.797

我遇到了同样的问题。jQuery $.post 和 $.ajax 在对 JSON 进行字符串化时将整数转换为字符串。您可以通过查看服务器端的数据来验证它。服务器收到类似 { "age": "3" } 的东西，而你真的想要 { "age": 3 }。

有效的解决方案是避免给 jQuery 纯对象，而是给它一个字符串：

`$.ajax({ type:'POST', url: '/api/...', data: JSON.stringify(data), contentType: 'application/json' })`

# c# - 在使用 C# 的 Xamarin Visual Studio 中，如何在 C# 代码中将 UIButton 设置为启用

> ID：15468643
> 
> 赞同：0
> 
> 时间：2013-03-18T01:55:06.837
> 
> 标签：c#, xamarin-studio

我有一个在 XIB 中创建的 UIButton 对象，并使用 Xamarin Studio 通过 C# 中的插座访问。我也有一个 UITestField。我已将属性检查器中的 UIButton 状态设置为禁用。当 iPhone 应用程序运行并且用户输入的文本通过验证时，我想启用 UIButton（使用我的代码），它与应用程序中的下一个屏幕的 segue 相关联。我该怎么做——请用 C# 代码。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:01:43.280

属性检查器中的 UIButton 状态是用于自定义按钮外观状态的选择器。

要以编程方式禁用按钮，您可以使用以下代码

```
buttonOutlet.Enabled = false; 
```

# jquery - jquery悬停的div中的输入表单导致输入框悬停时div关闭

> ID：15468645
> 
> 赞同：1
> 
> 时间：2013-03-18T01:55:20.670
> 
> 标签：jquery, html

对 jquery 完全一无所知，所以如果这里使用了不正确的术语，请见谅。正如在 jsfiddle 失败尝试中看到的那样，我使用 jquery 将登录表单嵌入到悬停状态动画中。但是，如果我用鼠标选择下拉菜单中的任何项目，则会释放悬停状态并关闭 div。我在这里做错了什么？除了输入的悬停问题之外，当您将鼠标悬停在 div 上时，我还需要如何向脚本添加什么才能使选项卡文本保持悬停状态颜色和背景？

[http://jsfiddle.net/K55ct/171](http://jsfiddle.net/K55ct/171)

```
jQuery(function ($) {
    $('#footerSlideContainer').hover(function () {
        $('#footerSlideContent').animate({
            height: '250px'
        });
        $(this).css('backgroundPosition', 'top left');
    },

    function () {
        $('#footerSlideContent').animate({
            height: '0px'
        });
        $(this).css('backgroundPosition', 'top left');
    });
}); 
```

# oracle - 如何显示上传的图片？

> ID：15468648
> 
> 赞同：-1
> 
> 时间：2013-03-18T01:55:34.887
> 
> 标签：oracle, coldfusion

我已成功将一些图像上传到服务器。我的问题是我不知道如何检索图像。如何在我的服务器上显示上传的图像？

我想我想创建一个显示这些图像的 Word 文档。有什么帮助吗？

```
 <!--- Set Directory Name --->
    <cfset dirName  = Mid(noFailPemohon,17,7)>
    <cfset variables.namaGambar1 = '' />
    <cfset variables.namaGambar2 = '' />

    <!--- Parameter --->
    <cfparam name="filePath" default="C:\inetpub\wwwroot\SPPV2\03_Teknikal\upload\#dirName#\">
    <cfparam name="filePath2" default="C:\inetpub\wwwroot\SPPV2\03_Teknikal\upload\PelanRumah\">

    <!--- Create Dir If Not Exist --->
    <cfif not DirectoryExists('C:\inetpub\wwwroot\SPPV2\03_Teknikal\upload\#dirName#\')>
        <cfdirectory directory= "C:\inetpub\wwwroot\SPPV2\03_Teknikal\upload\#dirName#\" action="create">
    </cfif>

    <cfif not DirectoryExists('C:\inetpub\wwwroot\SPPV2\03_Teknikal\upload\PelanRumah\')>
        <cfdirectory directory= "C:\inetpub\wwwroot\SPPV2\03_Teknikal\upload\PelanRumah\" action="create">
    </cfif>

    <!--- Upload Gambar1 --->
    <cfif isDefined("Form.gambar1")>
        <cftry>
            <!--- Upload To Server --->
            <cffile action="upload" 
                filefield="Form.gambar1" 
                destination="#filePath#" 
                nameconflict="overwrite" 
                result="status">

            <!--- Rename File --->
            <cftry>
                <cffile action="rename" 
                    source="#filePath##status.clientFile#" 
                    destination="#filePath#GambarLaporan#VISIT_NUMBER#.#status.clientFileExt#">

                <cfcatch type="any">
                </cfcatch>
            </cftry>

            <cfcatch type="any"></cfcatch>
        </cftry>
        <cfset variables.namaGambar1 = "#status.serverdirectory#\#status.serverfile#" >
    </cfif> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T02:10:32.413

为什么不能只使用标准的 HTML`<img>`标签来显示文件？您已经知道目标文件在哪里。

```
<img src="https://yourwebsite.com/#filePath#GambarLaporan#VISIT_NUMBER#.#status.clientFileExt#"> 
```

您可能需要替换`\`为`/`您的网址，但它应该就这么简单。

更新：如果您在另一个页面上显示图像，则需要将该值传递给新页面。

```
<cfset ImageLocation = "#filePath#GambarLaporan#VISIT_NUMBER#.#status.clientFileExt#">
<cflocation url="mypage.cfm?Image=#url.ImageLocation#" addtoken="false"> 
```

# javascript - 搜索句点并随机决定在句点之后添加一个单词 50% 的时间

> ID：15468655
> 
> 赞同：1
> 
> 时间：2013-03-18T01:56:25.137
> 
> 标签：javascript, html

我很难弄清楚如何通过 textarea 搜索并找到句点，在找到我需要随机决定是否应该在句点之后添加“arrr”的句点之后，这应该是 50/50 的机会里面印着的字。请帮帮我！！！这是我到目前为止所做的事情，有点混乱 document.getElementById("translate").onclick = function changed() {

```
var outpara = document.getElementById("out")
var paragraph = document.getElementById("input").value;
paragraph = paragraph.toLowerCase();
while(paragraph.indexOf("hello")!== -1) 
{ 
paragraph = paragraph.replace("hello", "Ahoy"); 
}
while(paragraph.indexOf("excuse me")!== -1) 
{
paragraph = paragraph.replace("excuse me", "arrr"); 
}
while(paragraph.indexOf("sir")!== -1) 
{
paragraph = paragraph.replace("sir", "matey"); 
}
while(paragraph.indexOf("madam")!== -1) 
{
paragraph = paragraph.replace("madam", "proud beauty"); 
}
while(paragraph.indexOf("officer")!== -1) 
{
paragraph = paragraph.replace("officer", "foul blaggart"); 
}
while(paragraph.indexOf("where is")!== -1) 
{
paragraph = paragraph.replace("where is", "whar be"); 
}
while(paragraph.indexOf("can you help me find")!== -1) 
{
paragraph = paragraph.replace("can you help me find", "know ye"); 
}
while(paragraph.indexOf("is that")!== -1) 
{
paragraph = paragraph.replace("is that", "be that"); 
}
while(paragraph.indexOf("the")!== -1) 
{
paragraph = paragraph.replace("the", "th'"); 
}
while(paragraph.indexOf("my")!== -1) 
{
paragraph = paragraph.replace("my", "me"); 
}
while(paragraph.indexOf("your")!== -1) 
{
paragraph = paragraph.replace("your", "yer"); 
}   
while(paragraph.indexOf("restroom")!== -1) 
{
paragraph = paragraph.replace("restroom", "head"); 
}   
while(paragraph.indexOf("restaurant")!== -1) 
{
paragraph = paragraph.replace("restaurant", "galley"); 
}
while(paragraph.indexOf("hotel")!== -1) 
{
paragraph = paragraph.replace("hotel", "fleabag inn"); 
}
var x = paragraph.split(" ");
var repl= [Math.floor (Math.random()* 2)]
    if(repl === 0 || repl === 1)
        paragraph.replace(".", ". arrrr")
    else
        paragraph.replace(".", ".")
var readySentance=[];
while(x.indexOf(".")!==-1)
{
    for(var i = 0; i < paragraph.length; ++i)
        {
        x.push(". Arrrr");
        }
} 
```

我的 HTML 看起来像这样

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title> Pirate Translator</title>
<!--<link rel = "stylesheet" href="css/normalize.css" />
<link rel = "stylesheet" href="css/styles.css" />-->
</head>
<body>
<h1> Land Lovin' Lady's Pirate Translator</h1>
<p> Simply click on the buttons to translate words and/or phrases from English to  pirate talk</p><hr />
<form name = "pirateForm">

<div>   
<textarea id="input"></textarea>
<textarea id="out" readonly></textarea>
<input onclick= "changed();" type="button" id ="translate" value="translate"/>
<input onclick="clearArea2()" type="button" id="clear2" value= "clear"/>
<script src="pirate4.js"></script><br>

</form>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T02:05:58.583

`g`在替换中使用正则表达式（以便您可以指定全局标志）和回调：

```
paragraph = paragraph.replace(/\./g, function(){ return Math.random() < 0.5 ? ". arrrr" : "." }); 
```

`arrrr`由于这是用一个命令替换所有出现的事件，因此无论您必须进行多少次尝试才能通过随机性，您都不会陷入一个循环，该循环将在每个句点之后放置一个。

以同样的方式，您可以在所有替换中使用正则表达式，这样您就不需要将它们放在循环中。这将替换所有出现的`hello`：

```
paragraph = paragraph.replace(/hello/g, "Ahoy"); 
```

# java - 尝试设置中断语句

> ID：15468659
> 
> 赞同：0
> 
> 时间：2013-03-18T01:56:54.933
> 
> 标签：java

我有我为一门课程创建的这个 java 代码。我已经尝试并继续失败执行中断语句。

有人可以指出我正确的方向吗？

```
import java.util.Scanner;

public class gradeAverage {

    public static void main( String[] args ){
            Scanner input = new Scanner(System.in);
            int input1;
            int input2;
            int input3;

            //Calculate
            int studentAvg;

            //Prompt for first user input or break if input = q
            System.out.print( "Enter first student grade or q to quit: ");
             if {
                (input1=input.nextInt() = q)
                 break;
                else
                    input1=input.nextInt() =;
    }
            //Prompt for second user input or break if input = q
            System.out.print( "Enter second student grade or q to quit: ");
            input2=input.nextInt();

            //Prompt for third user input or break if input = q
            System.out.print( "Enter third student grade or q to quit: ");
            input3=input.nextInt();

            studentAvg=(input1+input2+input3)/3;

            System.out.printf( "The Student's grade average is %d\n" , studentAvg);

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T01:59:18.367

break 语句需要在循环或某种（`for`、`while`或`do`）内，您不能跳出`if`条件。

如果您将代码放入其中：

```
while(true) {
  ...
} 
```

然后你的休息会很好。

if 语句的格式也是：

```
if (condition) {
  ...
} else {

} 
```

您的代码中似乎有一个`if { (condition)`...

哦，`=`是对变量的赋值，`==`是相等检查，你把它们弄混了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T02:27:49.920

首先，您的 If 语句语法完全错误。这需要纠正。

其次，Break 语句用于中断其间的循环。所以它应该像这样使用

而 { ...... 休息; ......

}

或者

为了（.........）{

休息; ........ }

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-18T02:04:47.230

//假设输入是一个扫描器对象。

```
System.out.print( "Enter first student grade or q to quit: ");
             if ((input1=input.nextline()).equalsIgnoreCase("q")) //do you want to use == or =?
                 break;

                else{
                   //do something
    } 
```

这应该为您解决问题。干杯。

# jquery - 具有多个连接的 SignalR 客户端

> ID：15468662
> 
> 赞同：18
> 
> 时间：2013-03-18T01:57:25.590
> 
> 标签：jquery, asp.net-mvc, signalr, signalr-hub

我有多个 SignalR '服务' 正在运行，只有一个 UI 可以访问它们。

如何使客户端 js 与具有不同 Url 的多个连接进行通信？因为似乎我只能为每个 $.connection.hub 指定一个 url，而且我不能使用多个“signalr/hubs”客户端脚本。

有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-18T02:19:49.777

$.connection.hub 在 /signalr/hubs 包含中创建。

在文件的末尾，它基本上是：

```
$.connection.hub = $.hubConnection("/signalr", { useDefaultPath: false }); 
```

要创建集线器代理，请执行以下操作：

```
var myHub = $.connection.hub.createHubProxy('myHub'); 
```

多个连接的简单示例：

```
var connection1 = $.hubConnection("http://www.myfirstendpoint.com");
var connection2 = $.hubConnection("http://www.mysecondendpoint.com");

var myCon1Hub = connection1.createHubProxy('myCon1Hub');
var myCon2Hub = connection2.createHubProxy('myCon2Hub');

myCon1Hub.client.foo = function() { ... Whatever you want ... };
myCon2Hub.client.foo = function() { ... Whatever you want ... };

connection1.start();
connection2.start(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-06T10:29:35.587

我对这种情况的解决方案：

```
var SignalRHelpers = function () {
  var _connectionDeferred;

  var subscribeToConnectionStart = function (callback) {
    if (!_connectionDeferred)   // start connection if not yet initialized
        _connectionDeferred = $.connection.hub.start();

    if ($.connection.hub.state == $.connection.connectionState.connected && callback) {
        // already connected
        callback();
    } else if (callback) {
        // register handler
        _connectionDeferred.done(callback);
    }
  };

  return {
    SubscribeToConnectionStart: subscribeToConnectionStart
  };
}(); 
```

它在内部存储来自 start() 的 promise 对象，并根据需要附加处理程序。

基本上，您只需在每次需要连接时调用 SignalRHelpers.SubscribeToConnectionStart。例如

```
SignalRHelpers.SubscribeToConnectionStart(function(){
    someHub.server.executeSomething();
}); 
```

# javascript - 隐藏的框在页面加载时保持隐藏

> ID：15468663
> 
> 赞同：0
> 
> 时间：2013-03-18T01:57:25.710
> 
> 标签：javascript, html, css

我的页面大约需要一秒钟的时间来加载 html。有几个隐藏的 div 最初设置为 display:none，然后在正常使用期间通过 jquery toggle 访问。但是，当页面加载时，那些隐藏的 div 会闪烁大约半秒。如果页面是硬刷新的并且加载需要 3-4 秒，那么这些 div 会显示大约一两秒。我想知道是否有任何方法可以防止这种情况。如果看起来不好，我宁愿不要让它们闪烁第二次。页面的简化 html 是这样的。

```
<!DOCTYPE html>
<html>  
<head>      
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />       
    <title>Site - Home</title>      
    <link rel="stylesheet" type="text/css" href="style.css" />              
    <!--JQuery-->       
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>              
    <script type='text/javascript' src='javascript/popup.min.js'></script>  
</head>     

<body>      
    <a href="#" id="new-post">New Post</a>

    <!--Popup container-->
    <div id="new-post-box" class="popup" style="width:500px;">      
        blah            
    </div>

    <script type="text/javascript">/*popup function*/</script>              
</body>
</html> 
```

我不知道该代码是否必要，但可以防止显示 blah 的 div 出现在页面加载中。再次将其设置为 display:none 最初但我猜 css 加载时间比 html 稍晚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:00:44.970

确保 display:none 属性在文件的 css 中，而不是在 document.ready() 或其他脚本中。这应该可以缓解这个问题。

在上面的情况下（我猜你想隐藏 class='popup'）所以在 CSS 中进行以下操作

```
.popup{
  display:none;
} 
```

# ruby-on-rails - SSL Heroku Dnsimple 和安全错误。

> ID：15468667
> 
> 赞同：0
> 
> 时间：2013-03-18T01:57:36.533
> 
> 标签：ruby-on-rails, ssl, heroku

我已经关注了[之前](https://stackoverflow.com/questions/6701549/heroku-ssl-on-root-domain)在此处发布的关于让这三件事协同工作的帖子，但我已经被难住了。

在大多数浏览器中访问 www.myapp.com 时出现以下错误。这是chrome的错误-

```
You attempted to reach www.myapp.com, but instead you actually reached a server identifying itself as myapp.com. 
```

显然，接近但不是我想要的。这就是我运行 heroku 域时得到的结果-

```
myapp.com
secure.myapp.com
www.myapp.com 
```

我在我的应用程序控制器中有这个方法（基于我链接到的 SO 答案的指令）

```
 def check_domain
    if Rails.env.production? and request.host.downcase != 'myapp.com'
       redirect_to request.protocol + 'myapp.com' + request.fullpath, :status => 301
    end
  end 
```

我正在使用 dnsimple 并且我有一个 CNAME 记录-

```
www.myapp.com pointing to running-water6577.herokussl.com 
```

我有一个别名记录-

```
myapp.com to running-water6577.herokussl.com 
```

还有一个 TXT 记录——

```
myapp.com to ALIAS for running-water6577.herokussl.com 
```

我以为我已经采取了一切措施来确保对 www.myapp.com 或 myapp.com 的所有请求都指向[https://myapp.com](https://myapp.com)，但是当键入 www.myapp.com 时，它会解析为[https://www.myapp。 com](https://www.myapp.com)并在 chrome 和任何其他浏览器中引发上述错误。我是通过 Rapidssl 购买的。

我配置错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T04:38:53.783

我假设 myapp.com 工作正常？看起来您的证书仅对 myapp.com（而不是 www.myapp.com）有效，因此您不应尝试通过 www.myapp.com 提供 SSL 流量，而应将 DNSimple 配置为将 www.myapp.com 重定向到myapp.com。这样用户将只能通过 myapp.com 访问您的网站，并且应该获得有效的证书。

# node.js - 堆栈跟踪 nodejs REST API 错误

> ID：15468669
> 
> 赞同：1
> 
> 时间：2013-03-18T01:57:48.517
> 
> 标签：node.js, debugging, stack, trace

api（用nodejs编写）出现错误时如何显示堆栈跟踪信息？我用 curl 发布了一个帖子顺便说一句。

我尝试了节点的 cli 参数 --stack-trace-limit，但除了不友好的单行错误消息外，什么都没有显示。我可以在代码中使用 console.* 和调试器行，但这太耗时了。我试过节点检查器。虽然它有一个不错的 GUI，但它会崩溃。我认为必须有一个更简单的方法？

谢谢。Ĵ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T02:30:00.643

如果没有看到一些代码，很难具体回答。但是，您也可以使用以下方法获取堆栈跟踪

```
var stack = new Error().stack 
```

# 有用的模块

1.  [Memwatch](https://github.com/lloyd/node-memwatch)可用于在代码中的不同位置输出堆差异
2.  [node heapdump](https://github.com/bnoordhuis/node-heapdump)允许您发送一个`kill -SIGUSR2 [pid]`到正在运行的节点进程以生成一个 heapdump，然后可以通过打开配置文件选项卡并右键单击左窗格并选择*加载配置文件在 Chrome 开发人员工具中查看*
3.  [标准 v8 调试器](http://nodejs.org/api/debugger.html)使用`node debug module_name.js`Then运行您的进程`debugger;`
4.  [node-webkit-agent](https://github.com/c4milo/node-webkit-agent)一个堆和 cpu 分析工具，它使用 Chrome 开发者工具界面来分析你的 node.js 应用程序。目前不支持调试，但显然正在进行中
5.  [长堆栈跟踪](https://github.com/mattinsler/longjohn)有时您可能会遇到没有任何堆栈关联的错误。有时我对http请求有这个问题。Longjohn 解决了这个问题
6.  [node-ofe](https://github.com/trevnorris/node-ofe)当您的应用程序致命崩溃时自动生成堆转储

# 代码结构

编写异步 node.js 代码的方式会对调试的难易程度产生很大影响。命名函数很好，匿名的高度嵌套函数很糟糕。查看[http://callbackhell.com/](http://callbackhell.com/)以获得有关如何编写干净的可调试 node.js 代码的良好指南

# facebook - 如何创建可调整大小的“喜欢”框？

> ID：15468673
> 
> 赞同：0
> 
> 时间：2013-03-18T01:58:07.583
> 
> 标签：facebook, twitter-bootstrap, facebook-likebox

无论我使用什么方法，我为 nbglive.com 创建的likebox 都无法调整大小，因此，我如何将它与我们的网站集成而不让它与广播播放器重叠，这给我带来了很大的麻烦。

调整页面大小时是否可以调整类似框的大小？我正在使用 twitter-bootstrap。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T08:41:55.960

我将 FB 小部件（likebox 和评论）放入 Bootstrap 的网格中，如下所示：

```
<div class="span4">
  <div style="text-align: center;">
    <div class="fb-like-box" data-href="{url}" data-width="234" data-show-faces="true" data-stream="false" data-border-color="#007Db7" data-header="false"></div>
  </div>
</div> 
```

其中`url`是包含 FB 页面的网址的变量。

使用 CSS：

```
div.fb-like-box,
div.fb-like-box > span,
div.fb-like-box > span > iframe[style],
div.fb-comments,
div.fb-comments > span,
div.fb-comments > span > iframe[style] {
  width: 100% !important;
} 
```

Facebook 使用根据`width`data 属性设置的样式异步加载其组件。我将它设置为某个安全值：看起来很糟糕，但不会溢出到不同视口的其他元素。我的 CSS 覆盖了调整小部件大小所需的所有 FB 宽度设置（我设置了`100%`，因此它调整为包含的 div）。它没有记录，当FB改变他们的设计时它可能会停止工作，所以`234px`明智地选择你的默认宽度（对我来说）；）

右侧面板底部和边栏中的 LikeBox[示例。](http://www.nowanadzieja.com.pl/)请注意更改浏览器窗口大小时的响应行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-14T12:03:46.377

根据您的 CSS 进行接线，如下所示

```
<div class="comment-box">
      <div class="fb-comments" data-href="site_url" data-width="100%" data-numposts="5" data-colorscheme="light" data-mobile="auto-detected"></div>

</div><!--comment-box--> 
```

按照 fb 在 header 中给出的方式剪切和复制 java-script

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T02:17:42.203

这是一个简单的方法：

```
 $(".fb-like-box").attr("data-width", $(document).width()); 
```

# php - PHP fgets() 除非用变量实现，否则它将不起作用？

> ID：15468678
> 
> 赞同：0
> 
> 时间：2013-03-18T01:58:20.227
> 
> 标签：php, fgets

我正在编写一些可以从 .txt 文件中读取并在网页上显示的代码。

我的初始代码存在问题，因为它会读取任何文本，并且会删除文档中的任何内容。

我的原始代码：

```
function readIn(){
        $input = fopen("input.txt", "r"); //Open the file, save opened file in input
        $line = fgets($input);
        fclose($input);
        return $line
} 
```

它只有在我放入一个 While 循环来遍历每一行时才开始工作

```
function readIn(){
        $input = fopen("input.txt", "r"); //Open the file, save opened file in input
        $fullText = ""; //Variable full text
        while(!feof($input)){
            $line = fgets($input);
            $fullText = $fullText . $line;
        }
        fclose($input);
        return $fullText;
}
echo readIn(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:06:38.963

使用“file_get_contents”将整个文件读入一个变量，然后以您选择的任何方式输出。

# iphone - 无法在 UITableView 上动态创建我的自定义单元格

> ID：15468686
> 
> 赞同：0
> 
> 时间：2013-03-18T01:59:23.117
> 
> 标签：iphone, ios, uitableview

我正在尝试在 UIViewController 中创建一个 UITableView （我会使用 UITableViewController 但我希望 UITableView 只使用一半的屏幕空间），每次按下按钮时都会创建一个新的自定义单元格，并显示当前时间在该单元格中以及自我上次按下按钮以来的时间（因此该单元格中的时间减去其上方单元格中的时间）。问题是，当我按下按钮时，没有任何反应，或者，如果我没有初始化为 UITableView 创建的属性，则会出现一个空白单元格。

我的单元格中有 3 个 UILabel，inOut、entryTime 和 delta，我为 UITableView 创建的 IBOutlet 是 timeTable。newEntry 是按钮。我已经设置了我的 UITableView 的数据源并委托给我的 UIViewController，在我的 UIViewController 的标题上“调用”了协议 UITableViewDataSource、UITableViewDelegate。我找不到问题所在。

这是我的 UIViewController 代码：

```
 @interface MainViewController ()

@property (strong, nonatomic) Brain *brain;
@end

@implementation MainViewController{
    @private
    NSMutableArray *_entryArray;
    NSMutableArray *_timeSinceLastEntryArray;
}
@synthesize brain=_brain;
@synthesize timeTable=_timeTable;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    _brain = [[Brain alloc] init];
    _entryArray = [[NSMutableArray alloc] init];
    _timeSinceLastEntryArray = [[NSMutableArray alloc] init];
    _timeTable = [[UITableView alloc] initWithFrame:CGRectZero];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    return 1;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return [_entryArray count];
}

- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier= @"Cell";

    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    if (indexPath.row%2==0){
        cell.inOut.text = [NSString stringWithFormat:@"Entrada %d", indexPath.row/2 +1];
        cell.entryTime.text = [NSString stringWithFormat:@"%@", [_entryArray objectAtIndex:indexPath.row]];
        if (indexPath.row==0){
            cell.delta.text=@"";
        }
        else {
            cell.delta.text = [_timeSinceLastEntryArray objectAtIndex:indexPath.row];
        }
    }
    else{
        cell.inOut.text = [NSString stringWithFormat:@"Saída %d", (indexPath.row+1)/2];
        cell.entryTime.text = [NSString stringWithFormat:@"%@",[_entryArray objectAtIndex:indexPath.row]];
        cell.delta.text = [_timeSinceLastEntryArray objectAtIndex:indexPath.row];
    }

    return cell;
}

- (IBAction)newEntry:(id)sender {

    [_entryArray addObject:[self.brain currentTime]];
    NSInteger numberOfEntrys= [_entryArray count];
    if (numberOfEntrys >1){
        NSString *timeSinceLastEntry = [_brain timeSince:[_entryArray objectAtIndex:(numberOfEntrys-2)]];
        [_timeSinceLastEntryArray addObject:timeSinceLastEntry];
    }
    else {
        [_timeSinceLastEntryArray addObject:@"0"];
    }

    [_timeTable reloadData];
}

@end 
```

对于自定义单元：

@implementation CustomCell

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

@synthesize  inOut=_inOut, entryTime=_entryTime, delta=_delta;
- (id)initWithFrame:(CGRect)frame reuseIdentifier:(NSString *)reuseIdentifier {

    if (self = [super initWithFrame:frame reuseIdentifier:reuseIdentifier]) {

        // Initialization code

        _inOut = [[UILabel alloc]init];

        _inOut.textAlignment = UITextAlignmentLeft;

        _entryTime = [[UILabel alloc]init];

        _entryTime.textAlignment = UITextAlignmentLeft;

        _delta = [[UILabel alloc]init];

        _delta.textAlignment = UITextAlignmentLeft;

        [self.contentView addSubview:_entryTime];

        [self.contentView addSubview:_inOut];

        [self.contentView addSubview:_delta];

    }

    return self;

}
@end 
```

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:19:18.520

我看到您将初始化代码放入

```
- (id)initWithFrame:(CGRect)frame reuseIdentifier:(NSString *)reuseIdentifier 
```

但是你用

```
cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]; 
```

并且您没有将 Frame 提供给您创建的视图

```
_inOut = [[UILabel alloc]init];
_entryTime = [[UILabel alloc]init];
_delta = [[UILabel alloc]init]; 
```

希望对你有帮助

# bash - remote-shell 命令中缺少尾随-'

> ID：15468689
> 
> 赞同：1
> 
> 时间：2013-03-18T01:59:33.227
> 
> 标签：bash, shell, rsync

在我的 bash shell 脚本中，

`rsync -a --delete -e "ssh -i /keypath" /source_dir/ username@remotehost:/dest_dir/`

上面的任何组合[eval，双引号到单引号]都会给出以下错误，

remote-shell 命令中缺少尾随-'。rsync 错误：../main.c(335) [sender=2.6.8] 处的语法或使用错误（代码 1）

但同样的命令直接在命令提示符下工作。任何人都可以帮助我在这里缺少什么

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-10T20:32:48.570

您的问题在于 bash 脚本中的嵌入引号。

[Bash 常见问题解答 #50](http://mywiki.wooledge.org/BashFAQ/050)

请参阅以下解决方案（如果您觉得有用，请点赞）：

[https://superuser.com/questions/354361/rsync-complaining-about-missing-trailing-in-a-bash-script](https://superuser.com/questions/354361/rsync-complaining-about-missing-trailing-in-a-bash-script)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T06:35:08.543

不知道你的问题是什么，但对我来说，大多数奇怪的 rsync 错误是由登录时输出的`.bashrc`or `.bash_profile`（或其他 shell rc 文件）引起的。现在我通常将以下语句写为我的and的**第一**行：`.bashrc``.bash_profile`

```
# return if it's not an interactive shell
[[ $- == *i* ]] || return 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-12T12:59:19.327

一个对我有用的简单解决方案是使用**单**引号而不是**双**引号，即

```
rsync -a --delete -e 'ssh -i /keypath' /source_dir/ username@remotehost:/dest_dir/ 
```

# c++ - 指针和引用之间的转换

> ID：15468691
> 
> 赞同：3
> 
> 时间：2013-03-18T01:59:50.540
> 
> 标签：c++, pointers, stl, iterator

```
std::list<Value> stdList;

stdList.push_back(Value());

Value * ptr = &stdList.back(); // <-- what will this address point to? 
```

如果我采用返回的引用`back()`并将其隐式转换为较不通用的`Value *`，它会指向列表的最后一个值，还是会指向意外的地方？

有没有办法从指针创建一个迭代器，用于 std::list 函数，例如`erase()`？我意识到从通用到特定（迭代器到指针）比往另一个方向更可行，但我想我还是会问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T02:07:35.453

指针将指向存储在容器内的值。参考做了同样的事情。

您不能直接将该指针转换为列表迭代器，因为您已经丢失了有关周围结构的所有信息。要做到这一点，您必须对`list::find`.

您尝试执行的操作有时是使用`vector`. 您可以将`vector`数据元素指针转换为迭代器（数组索引）的原因是您知道 a 的结构`vector`。

请注意，`list::back()`它*不*返回迭代器。它返回一个引用。两者完全不同。你在想`list::end()`吗？还是您真的对迭代器和引用感到困惑？因为您*可以*从指针中获取引用。你这样做：

```
Value& refval = *ptr; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T09:26:54.870

是的，指针指向存储在列表中的最后一个值。

我们不能从指针创建迭代器，迭代器是容器的概念（这里是列表），迭代器不关心列表中存储了什么样的值。引用和指针是存储在列表中的值的句柄，它们可以互换，我们可以将引用转换为指针，反之亦然。

# android - Android TextView文本在触摸时改变颜色，但它不应该

> ID：15468693
> 
> 赞同：3
> 
> 时间：2013-03-18T02:00:31.663
> 
> 标签：android, textview

我遇到了一个奇怪的问题，我有一个可以通过 XML 滚动的 TextView 并以 `android:scrollbars="vertical"`编程方式使用 `.setMovementMethod(new ScrollingMovementMethod());`

当我触摸 TextView 时，白色文本变为浅灰色。

如果我删除`.setMovementMethod(new ScrollingMovementMethod());`我没有得到那个回应。

是什么导致了这种情况，我该如何预防？

谢谢

```
 <TextView
         android:id="@+id/questionView"
         android:layout_width="fill_parent"
         android:layout_height="0dp"
         android:layout_weight="0.50"
         android:autoLink="none"
         android:clickable="false"
         android:fadingEdge="horizontal"
         android:fadingEdgeLength="@dimen/Fading_Edge"
         android:includeFontPadding="true"
         android:linksClickable="false"
         android:longClickable="false"
         android:padding="4dp"
         android:scrollbars="vertical"
         android:text="Question"
         android:textSize="25px"
         android:typeface="sans" /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T03:25:34.723

尝试为您的 textview 属性使用纯色，如下所示

```
android:textColor="#000000"
android:textColorHighlight="#000000" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:15:15.973

用于在 java 代码中使用滚动视图扩展您的类以进行滚动，希望文本视图颜色不会改变

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-18T02:29:45.190

试试这个它可以帮助你：

```
android:focusable="false" 
```

和/或

```
android:focusableInTouchMode="false" 
```

# python - Python。如果文件名中包含特殊字符，则尝试使用文件名创建新目录时出错

> ID：15468709
> 
> 赞同：2
> 
> 时间：2013-03-18T02:02:49.570
> 
> 标签：python, directory

我的脚本搜索它所在的目录，并将使用它找到的文件名创建新目录并将它们移动到该目录：John-doe-taxes.hrb -> John-doe/John-does-taxes.hrb。它工作正常，直到它遇到变音字符，然后它将创建目录并返回“错误 2”，表示它找不到文件。我对编程很陌生，我发现的答案是添加一个

`coding: utf-8`

行到不起作用的文件我相信因为我没有在我的代码中使用变音符号我正在处理变音符号文件。我很好奇的一件事是，这个问题是否也会出现在变音符号或其他特殊字符中？这是我正在使用的代码，我感谢提供的任何建议。

```
import os
import re
from os.path import dirname, abspath, join

dir = dirname(abspath(__file__))
(root, dirs, files) = os.walk(dir).next() 
p = re.compile('(.*)-taxes-') 
count = 0
for file in files:
    match = p.search(file)
    if match:
        count = count + 1
        print("Files processed: " + str(count))
        dir_name = match.group(1) 
        full_dir = join(dir, dir_name)
        if not os.access(full_dir, os.F_OK):
            os.mkdir(full_dir)
        os.rename(join(dir, file), join(full_dir, file)) 
raw_input() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:08:01.300

要考虑的一件事是使用 Python 3。它默认支持 unicode。我不确定您是否需要做任何事情来更改上述代码中的任何内容才能使其正常工作，但示例中有一个 python 脚本可以将 Python2 代码转换为 Python3。

抱歉，我无法在 Python2 方面为您提供帮助，我遇到了类似的问题，刚刚将我的项目转换到 Python3 ——最终对我来说更容易了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T05:03:55.657

我认为您的问题是将`str`s 传递给`os.rename`不在系统编码中的。只要文件名仅使用 ascii 字符，这将起作用，但是在该范围之外，您可能会遇到问题。

最好的解决方案可能是使用 unicode。如果您给文件系统函数提供 unicode 参数，则文件系统函数应该返回 unicode 字符串。 `open`在具有 unicode 文件名的 Windows 上应该可以正常工作。

如果你这样做：

`dir = dirname(abspath(unicode(__file__)))`

那么你应该在整个过程中使用 unicode 字符串。

# linux - 为什么我们在安装 memcached 后需要一个用户 memcached 和一个组 memcached？

> ID：15468712
> 
> 赞同：0
> 
> 时间：2013-03-18T02:03:04.277
> 
> 标签：linux

这个用户喜欢什么

'memcached:x:101:103:Memcached 守护进程:/var/run/memcached:/sbin/nologin' 'apache:x:48:48:Apache:/var/www:/sbin/nologin'

用于 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:05:24.697

memcached 中的“d”代表“守护进程”

守护进程，在 Unix 世界中，是一种您希望提供某种服务的程序，即使没有用户以交互方式登录。

因此，它需要它自己的用户和组（用于文件权限）。

所有守护进程都可以以 root 身份运行，但为每个守护进程创建一个用户更安全。

# mysql - 从具有多个子查询/连接的 Select 语句创建视图

> ID：15468713
> 
> 赞同：2
> 
> 时间：2013-03-18T02:03:22.033
> 
> 标签：mysql, sql, join, view, subquery

所以我有多个表，我正在尝试创建一个视图来显示我的 select 语句中返回的所有内容。但是，似乎 mysql 不允许创建其中包含子查询的视图。

所以不确定如何将其转换为视图。

```
Select  Title as "AlbumName" , 
        Sum(trk1.Price * trk1.Quant) as "TotalSales"
From    Album alb
        INNER JOIN
        (
            SELECT  AlbumId, 
                    t1.UnitPrice as "Price" , 
                    t1.Quantity as "Quant"
            FROM    Track trk
                    INNER JOIN
                    (
                        SELECT  TrackId, UnitPrice, Quantity
                        FROM    InvoiceLine
                        WHERE   InvoiceId IN ( SELECT InvoiceId FROM Invoice )
                    ) AS t1 ON (trk.TrackId = t1.TrackId)
        ) as trk1 ON (alb.AlbumId = trk1.AlbumId)
Group By alb.AlbumId 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T02:20:16.360

创建一个`VIEW`in`MySQL`很简单，但有一些限制。[请参阅此处：MySQL 视图](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)

限制之一是`VIEW`s 不能有`SELECT`在 FROM 子句中包含子查询的语句。因此，作为替代方案，首先为包含`IN`子句的子查询创建一个视图。

```
CREATE VIEW InvoiceLineView
AS
SELECT  DISTINCT a.*
FROM    InvoiceLine a
        INNER JOIN Invoice b
            ON a.InvoiceId = b.InvoiceId; 
```

创建视图后，您现在可以通过从原始查询中加入视图来继续操作，这样您现在就可以创建一个完全正常工作的`VIEW`. 对于未计算的子查询，您不需要额外的视图。

```
CREATE VIEW AlbumSales
AS
Select  Title as AlbumName, 
        Sum(t1.UnitPrice * t1.Quantity) as TotalSales
From    Album alb
        INNER JOIN Track trk
            ON alb.AlbumId = trk1.AlbumId
        INNER JOIN InvoiceLineView t1
            ON trk.TrackId = t1.TrackId
Group   By alb.AlbumId; 
```

* * *

虽然，`VIEWS`在 MySQL 中是可怕的。

*   [MySQL VIEW 作为性能麻烦制造者](http://www.mysqlperformanceblog.com/2007/08/12/mysql-view-as-performance-troublemaker/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T02:19:10.980

如果您确实需要将其作为视图，则必须首先将子查询包装为视图。

```
CREATE VIEW vw_sub1 AS
SELECT TrackId, UnitPrice, Quantity
  FROM InvoiceLine
 WHERE InvoiceId
    IN (SELECT InvoiceId FROM Invoice);

CREATE VIEW vw_sub2 AS
SELECT AlbumId, t1.UnitPrice Price, t1.Quantity Quant
  FROM Track trk INNER JOIN 
       vw_sub1 t1 ON trk.TrackId = t1.TrackId;

CREATE VIEW vw_main AS
SELECT Title AlbumName, Sum(trk1.Price * trk1.Quant) TotalSales
  FROM Album alb INNER JOIN
       vw_sub2 trk1 ON alb.AlbumId = trk1.AlbumId
 GROUP BY alb.AlbumId; 
```

*代码未经测试*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T02:11:57.720

不幸的是，MySQL 不支持在您的视图中这样的子查询。我听说的唯一解决方法是为每个子查询创建单独的视图，然后使用其他视图创建主视图。这有点奇怪，但它确实有效。

在您的情况下，您需要创建 3 个视图 - 2 个用于内部子查询，1 个用于主查询。

# objective-c - 设置 WebView 内容

> ID：15468719
> 
> 赞同：-2
> 
> 时间：2013-03-18T02:03:57.883
> 
> 标签：objective-c, json, uiwebview

我正在使用来自网络的 JSON 休息服务。JSON 有一个名为“content”的属性，它是一个 HTML 内容，所以 JSON 文件类似于：

```
[{
"id":"4205",
"title":"SomeTitle",
"author":"Homero Simpson",
"content":"<html><head></head><body>Había una vez un molinero cuya única herencia para sus tres hijos eran su molino, su <a href='biblioSonidos://soundID=67'>asno</a> y su <a href='biblioSonidos://soundID=69'>gato</a>. Pronto se hizo la repartición sin necesitar de un clérigo ni de un abogado, pues ya habían consumido todo el pobre patrimonio. Al mayor le tocó el molino, al segundo el asno, y al menor el gato que quedaba. El pobre joven amigo estaba bien inconforme por haber recibido tan poquito. 'Mis hermanos' dijo él, 'pueden hacer una bonita vida juntando sus bienes, pero por mi parte, después de haberme comido al gato, y hacer unas sandalias con su piel, entonces no me quedará más que morir de hambre.'  El gato, que oyó todo eso, pero no lo tomaba así, le dijo en un tono firme y serio: 'No te preocupes tanto, mi buen amo. Si me das un bolso, y me tienes un par de botas para mí, con las que yo pueda atravesar lodos y zarzales, entonces verás que no eres tan pobre conmigo como te lo imaginas.'</body></html>"
}] 
```

我需要使用“内容”属性中的代码创建一个 WebView。所以，我的问题是：如何从这个 JSON 属性设置 WebView 内容？那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:33:47.827

使用 JSONSerialization 将 JSON 文件转换为基础对象（将是 NSDictionary）。然后使用 loadHTMLString 加载内容键的值：

```
NSError *jsonError = nil;
id json = [NSJSONSerialization JSONObjectWithData:[NSData dataWithContentsOfFile:pathToTheJSONFile] options:0 error:&jsonError];
if (json) {
    [webView loadHTMLString:[(NSDictionary *)json objectForKey:@"content"] baseURL:nil];
} else {
    NSLog(@"Error loading JSON: %@", jsonError);
} 
```

（如果您希望内容中的相对链接起作用，则传递适合 baseURL 而不是 nil 的任何内容。）

# c# - 使用 c# 将图像列表添加到 HTML 动态

> ID：15468723
> 
> 赞同：1
> 
> 时间：2013-03-18T02:04:16.217
> 
> 标签：c#, html, dynamic

我有存储在 sql 数据库中的图像列表。我尝试在运行时动态添加它。
我使用`"InnerHtml"`
我创建潜水标签并希望在 div 标签
**HTML 中添加图像列表：**

```
<div runat=server class="ws_images" id="List_Slide"> 
```

**C＃**

```
List_Slide.InnerHtml = "<li><img src=data1/images/31.jpg alt=31 title=31 id=wows1_0/></li>" 
```

你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T02:22:29.537

看起来您正在使用 ASP.NET Web 表单。

您可以做的是将一个`asp:PlaceHolder`控件放到您的页面上，然后在其中添加包含您的图像 HTML 代码的文字控件。

```
 <asp:PlaceHolder id="ImagePlaceHolder" runat="server"/> 
```

......

在后面的代码中：

```
var literal = new LiteralControl("<li><img src=data1/images/31.jpg alt=31 title=31 id=wows1_0/></li>");
ImagePlaceHolder.Controls.Add(literal); 
```

`PlaceHolder`不呈现任何 HTML 标签，因此如果您愿意，可以将 div 标签放在`LiteralControl`.

# php - 使用 $_SESSION 路由用户

> ID：15468728
> 
> 赞同：-1
> 
> 时间：2013-03-18T02:05:41.327
> 
> 标签：php, session-variables

我正在构建一个用户登录以访问控件的应用程序。根据该用户所在的位置（在三个位置之一），我需要根据他们所在的位置从数据库中调用不同的信息集。我应该/是否可以使用 php 会话功能从定义用户所在位置的登录表单中获取一条数据，并将其传递给我需要它的所有页面而不会丢失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:26:22.643

这当然是一种有效的处理方式。在处理表单的页面上：

```
<?php
   if ($_POST['formlocation'] === 'location1') {
      $_SESSION['location'] = 'location1';
   }
   if ($_SESSION['location']
?> 
```

然后在控制面板页面上：

```
<?php
   if ($_SESSION['location'] === 'location1') {
     $sql = "SELECT * FROM tablename WHERE location='".$_SESSION['location']."'";
     .
     .
     .
   }
?> 
```

顺便说一句，如果位置是指“他们在哪个页面上”，则应在表单内使用名为“formlocation”的隐藏表单输入（显然只是一个示例），以便自动提交并传递其 value 属性.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T02:11:02.243

简而言之 - 不。“位于”是什么意思 - 是地理、IP 子网等吗？我们需要更多信息，但一般来说，您不应假定 IP 地址会提供任何位置帮助，因为它可以通过代理和大约六种其他方式进行欺骗。

需要更多信息以获得更多帮助，请详细说明。

# android - 在不折叠 GCM 的情况下限制存储消息

> ID：15468730
> 
> 赞同：2
> 
> 时间：2013-03-18T02:05:51.313
> 
> 标签：android, google-cloud-messaging

谷歌关于 GCM 的注释“在不崩溃的情况下可以存储多少条消息是有限制的。这个限制目前是 100 条。如果达到限制，所有存储的消息都将被丢弃。然后当设备重新联机时，它会收到一条特殊消息表示已达到限制。然后应用程序可以正确处理这种情况，通常是通过请求完全同步。”

那么我的应用程序应该如何请求完全同步呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-06T06:19:57.523

这完全取决于您，因为您需要与第三方服务器同步，而不是与 GCM 服务器同步。

您可以按照将移动应用程序与服务器同步的相同步骤进行操作。

# silverlight - WP8 Webbrowser，停止导航不杀页面

> ID：15468738
> 
> 赞同：0
> 
> 时间：2013-03-18T02:07:06.450
> 
> 标签：silverlight, windows-phone-7, navigation, browser, windows-phone-8

我有一个使用 Web 浏览器控件来浏览网站的应用程序。当用户单击将他们带出站点的超链接时，我希望能够停止导航。我试过了。

```
void wgBrowser_Navigating(object sender, NavigatingEventArgs e)
{
        if (!e.Uri.AbsoluteUri.Contains(BASEURL))
        {
            e.cancel = true;

            return;
        }
        progressPB.Visibility = Visibility.Visible;
} 
```

这实际上会停止导航，但会终止页面，从而导致导航错误消息出现在网络浏览器中。

我已经尝试了一些东西，包括导航后的 wgBrowser.Goback() ，但这不是真正的“返回”，并导致页面重新加载用户之前输入的完全丢失的数据。

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:29:18.237

你试过了`IsolatedStorageSettings`吗？因为`IsolatedStorageSettings`在页面导航时使用存储数据会更好。

例子：

```
private void tbUserName_SelectionChanged(object sender, RoutedEventArgs e)
{
            if (appSetting2.Contains("MainPage2"))
            {
                appSetting2["MainPage2"] = this.tbUserName.Text;
            }
            else
            {
                appSetting2.Add("MainPage2", this.tbUserName.Text);
            }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T10:13:34.067

使用可以使用`InvokeScreipt`over `WebBrowser`control的方法来停止页面导航。

```
yourWebBrowser.InvokeScript("eval", "document.execCommand('Stop');"); 
```

# javascript - 通过图像超链接点击在 youtube 嵌入之间切换？

> ID：15468744
> 
> 赞同：-1
> 
> 时间：2013-03-18T02:07:39.217
> 
> 标签：javascript, html, youtube, embed

这就是我想要做的。我在一个页面上有一堆缩略图，每个缩略图都链接到一个嵌入了 youtube 视频的页面（所以它就像一个播放列表）。我在想可以简单地换掉当前的 youtube 嵌入，而不是让它加载一个全新的页面。

youtube 嵌入是 iframe，所以我需要一种方法，在单击图像时（我猜 javascript onclick 可能是最好的解决方案），然后让它将当前 iframe 更改为其他内容。我可以链接到嵌入了 youtube 的页面，但我想这样做而不需要加载页面 - 只需获取一些 html 并将其插入 iframe 位置。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:34:28.233

**您无需使用 javascript 将某些内容加载到`iframe`.** 您可以向您添加一个`name`属性`iframe`，然后将`target`您的链接设置为该名称。像这样的东西会起作用：

```
<iframe width="420" height="315" src="http://www.youtube.com/embed/zSgiXGELjbc" frameborder="0" allowfullscreen name="youtube_iframe"></iframe>
<p><a href="http://www.youtube.com/embed/DZGINaRUEkU" target="youtube_iframe">load another video</a></p> 
```

在此处查看演示：http: [//jsfiddle.net/q3Nas/](http://jsfiddle.net/q3Nas/)

# c++ - 在复制构造函数中调用动态分配的类的复制构造函数？

> ID：15468749
> 
> 赞同：2
> 
> 时间：2013-03-18T02:09:01.800
> 
> 标签：c++, copy-constructor

假设构造函数、析构函数和赋值运算符写得正确，为什么我不能像这样实现复制构造函数：

```
MyClass::MyClass(const MyClass &other)
{
    this->value = new Value(*(other.value));
} 
```

我看到的大多数示例都是这样做的：（因为它们通常处理数组）

```
MyClass::MyClass(const MyClass &other)
{
    Value *temp = new Value;
    *temp = *(other.value);
    this->value = temp;
} 
```

但是在第一个示例中，如果“new”抛出，“other”不受影响，并且如果 Value 的复制构造函数抛出，“new”不会在传播异常之前释放分配的内存吗？

由于这是一个迷你智能指针本身，我特别避免使用 std::unique_ptr 和其他智能指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T02:27:44.310

> 如果 Value 的复制构造函数抛出，在传播异常之前不会“新”释放分配的内存吗？

是的。

没有特别的理由不使用单行方法而不是三行赋值版本。

* * *

由于您正在编写智能指针，因此以下内容不适用，但在普通类中，您可能会将手动指针管理包装成 RAII 类型。它看起来`std::unique_ptr`有你想要的语义，一个`make_unique`助手让它变得很容易：

```
#include <memory>

// probably will be added to the standard
template<typename T, typename... Args>
std::unique_ptr<T> make_unique(Args &&... args) {
    return std::unique_ptr<T>(new T(std::forward<Args>(args)...));
}

class Value {};

class MyClass {
    std::unique_ptr<Value> value;

public:
    MyClass() : value{make_unique<Value>()} {}

    MyClass(MyClass const &other) : value{make_unique<Value>(*other.value)} {}

    MyClass &operator= (MyClass const &other) {
        value = make_unique<Value>(*other.value);
        return *this;
    }
    // you can also implement assignment from rvalue ref as an optimization
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T02:21:17.033

问题太多，不一一列举。我建议你学习三法则：

*   [什么是三法则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)

就像我说的，这里的正确解决方案可能是

```
struct MyClass
{
     MyClass(const MyClass &other) : value(other.value) {}

    private:
     OtherClass value;
}; 
```

如果`value`是某种**必须**存在于堆上的资源，那么它将被声明为

```
struct MyClass
{
    // ...
    private:
       std::unique_ptr<OtherClass> value;
}; 
```

这样你就不会（嗯，很容易）在所有权语义和内存管理上出错。

# java - 使用 maven exec 插件传递命令行参数 javaagent

> ID：15468752
> 
> 赞同：4
> 
> 时间：2013-03-18T02:09:15.577
> 
> 标签：java, sizeof, javaagents

我有一个 Java 缓存应用程序，我需要将不同大小的对象放入缓存中。问题是我真的不知道如何计算自定义对象的大小，我找到了解决方案 - 使用库：http://mvnrepository.com/artifact/com.googlecode.sizeofag/sizeofag/ 1.0.0。要使用库运行程序，我需要指定命令行参数 -javaagent。那么，如果我使用maven，我该怎么做？？？

程序很简单：

```
protected static Boolean b;
public static void main( String[] args )
{
    System.out.println(SizeOfAgent.sizeOf(b));
} 
```

这是输出：

```
0
Can not access instrumentation environment.
Please check if jar file containing SizeOfAgent class is 
specified in the java's "-javaagent" command line argument. 
```

PS我知道，这样的问题已经存在，但它没有正确的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T02:14:01.987

在 Linux/Unix 机器上，“mvn”命令将使用 shell 变量“MAVEN_OPTS”来传递选项。如果你想给 Maven 更多内存，这很有用。在您的 .profile 或 .bash_profile 中放入这样的行：

> 导出 MAVEN_OPTS=-javaagent

在窗户上：

> 在 shell (cmd.exe) 中输入“set MAVEN_OPTS=...”

或者

> 将 MAVEN_OPTS 添加到您的环境中

在 NetBeans 上：

在 ~/.netbeans/6.5/ 中，创建 etc/netbeans.conf。在那里添加您的环境变量，例如：

> 导出 MAVEN_OPTS="-Xmx512m -XX:MaxPermSize=128m"

# typescript - 打字稿继承功能与文档不同

> ID：15468754
> 
> 赞同：3
> 
> 时间：2013-03-18T02:10:06.840
> 
> 标签：typescript

该规范提到以下功能将用于扩展：

```
var __extends = this.__extends || function(d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function f() { this.constructor = d; }
    f.prototype = b.prototype;
    d.prototype = new f();
} 
```

但是当前生成的功能是：

```
var __extends = this.__extends || function (d, b) {
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
}; 
```

这打破了静态继承：

```
class A{
    fooMem=10;
    static fooStat=10;
}
class B extends A{};

var b = new B();
alert(b.fooMem.toString());
alert(B.fooStat.toString()); 
```

[尝试一下](http://www.typescriptlang.org/Playground/#src=class%20A%7B%0A%09fooMem=10;%0A%09static%20fooStat=10;%0A%7D%0Aclass%20B%20extends%20A%7B%7D;%0A%0Avar%20b%20=%20new%20B%28%29;%0Aalert%28b.fooMem.toString%28%29%29;%0Aalert%28B.fooStat.toString%28%29%29;%0A)

如果使用提到的文档扩展功能，这将起作用：[测试](http://jsfiddle.net/basarat/bas7X/)

有人知道为什么没有使用文档中提到的功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T01:41:57.497

它已被接受为错误：[http ://typescript.codeplex.com/workitem/825](http://typescript.codeplex.com/workitem/825)

# vb.net - 获取字符串中字符之间的文本

> ID：15468755
> 
> 赞同：0
> 
> 时间：2013-03-18T02:10:08.900
> 
> 标签：vb.net, visual-studio-2010, vb6

我有一个包含如下音乐列表的文本文件：

```
BeginSong{
Song Name
Artist
Genre
}EndSong 
```

这种情况有多种。

我想获取 and 之间的文本`BeginSong{`并将`}EndSong`歌曲信息放入字符串数组中。然后我想将每个实例添加到 ListBox 作为艺术家 - 歌曲名称（我确信我可以弄清楚这部分）。我希望这是一个清晰的描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:20:38.890

使用`ReadLine()`函数`FileStream`

由于您已经知道信息的顺序，您应该能够循环所有文件行并将它们存储在相应的属性中。

伪：

```
WHILE Reader.Read()
      Store Line in BeginSongTextVariable
      Read Next Line
      Store Line in SongNameVariable
      Read Next Line
      Store Line in ArtistNameVariable
      Read Next Line
      Store Line in GenreVariable
      Read Next Line
      Store Line in EndSongTextVariable
Add The Above Variables in List
End While 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:38:12.990

Neolisk 有一个很好的答案，它使用正则表达式。但是由于除了 VB.NET 之外，您还包括了 VB6 标记，所以我将介绍一个 VB6 解决方案。

您可以使用字符串拆分功能，并在“结束”上拆分，即`"BeginSong{"`和`"}EndSong"`

```
Dim songInfos As String
Dim firstArray() As String
Dim secondArray() As String
Dim thirdArray() As String
Dim songInfoArray() As String
Dim i As Integer
Dim songCounter As Integer
' to test:
songInfos = songInfos & "BeginSong{" & vbNewLine
songInfos = songInfos & "Song Name1" & vbNewLine
songInfos = songInfos & "Artist1" & vbNewLine
songInfos = songInfos & "Genre1" & vbNewLine
songInfos = songInfos & "}EndSong" & vbNewLine
songInfos = songInfos & "BeginSong{" & vbNewLine
songInfos = songInfos & "Song Name2" & vbNewLine
songInfos = songInfos & "Artist2" & vbNewLine
songInfos = songInfos & "Genre2" & vbNewLine
songInfos = songInfos & "}EndSong"

firstArray = Split(songInfos, "BeginSong{")

songCounter = 0

ReDim songInfoArray(2, 0)

For i = 1 To UBound(firstArray) Step 1
    secondArray = Split(firstArray(i), "}EndSong")
    thirdArray = Split(secondArray(0), vbNewLine)
    songInfoArray(0, songCounter) = thirdArray(1)
    songInfoArray(1, songCounter) = thirdArray(2)
    songInfoArray(2, songCounter) = thirdArray(3)
    songCounter = songCounter + 1
    If i < UBound(firstArray) Then
        ReDim Preserve songInfoArray(2, songCounter)
    End If
Next i 
```

最后一行之后的手表。`ReDim`注意songInfoArray的结构，这是对其进行治疗所必需的

![在此处输入图像描述](../Images/7e8bf04bbca40ac1dc2ced78605009ba.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T02:27:35.457

您可以对命名组使用正则表达式：

```
BeginSong{\n(?<song_name>.*)\n(?<artist>.*)\n(?<genre>.*)\n}EndSong 
```

像这样的东西：

```
Imports System.Text.RegularExpressions
'...
Dim s As New Regex("BeginSong{\n(?<song_name>.*)\n(?<artist>.*)\n(?<genre>.*)\n}EndSong")
Dim mc As MatchCollection = s.Matches(inputFile)
For Each m As Match In mc
  Dim song_name As String = m.Groups("song_name").Value
  Dim artist As String = m.Groups("artist").Value
  Dim genre As String = m.Groups("genre").Value
  'use or store these values as planned
Next 
```

# php - 选择 * 从“%item%”？

> ID：15468756
> 
> 赞同：-1
> 
> 时间：2013-03-18T02:10:11.477
> 
> 标签：php, mysql, select

我有一个下拉菜单供您选择，这会导致为下一页提供一个值。我想使用这个值来确定从哪里选择。所以可能的值是汽车和玩具。所以我想让用户使用下拉菜单选择汽车，这会导致数据库从汽车中选择来查找物品。如果用户选择玩具，我会让他们从玩具中选择以查找物品。当我尝试使用此代码时，我得到一个错误。如果我删除“%item%”，错误就消失了。任何帮助都会受到喜爱。谢谢。

提交

```
<form action="search.php" method="post">
<select>
<option value>Choose A Item</option>
<option value="car" name="item">Car</option>
<option value="toys" name="item">Toys</option>
</select>
<input type="submit" name="submit" value="Submit" />
</form> 
```

搜索

```
$term = $_POST['term'];
$item = $_POST['item'];

$query = mysql_query("select * from '%$item%' where Items like '%$term%'");
if(mysql_num_rows($query) <= 0)
{
echo "<center>No results. Please try another item.</center>";
} else {
while ($row = mysql_fetch_array($query)) {
echo "<p2>";
echo $row['Items'], ' - Location ' .$row['Loc'];
echo '<br/><br/>';
echo "</p2>";
}
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:20:19.390

1.) - 不要使用 mysql_query - 它是一个过时的库，你上面写的查询会受到 SQL 注入 - 互联网上最常见的妥协。

2.) 不要使用 like '%...%' 因为它不能被索引，并且在任何中等大小的表或更大的表上都会非常慢。尝试至少删除第一个 % 以允许索引。

[http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T02:13:42.990

我认为您的查询应该更改为：`$query = mysql_query("select * from '$item' where Items like '%$term%'");`

# service - SQL Server 报告服务 URL 要求提供凭据，但之后没有响应

> ID：15468767
> 
> 赞同：0
> 
> 时间：2013-03-18T02:12:01.203
> 
> 标签：service, reporting-services, reporting, credentials

SQL Server 报告服务 URL 要求提供凭据，但之后没有响应。

即使我一直输入正确的密码，它也要求提供凭据 3 次，而不是在它没有询问甚至没有在浏览器页面上显示任何内容之后。以下两个 URL 的行为相同。我的报表服务和服务器已配置在端口 80 上。

> [http://ssphdev.xxx.com/Reports](http://ssphdev.xxx.com/Reports)
> 
> [http://ssphdev.xxx.com/ReportServer](http://ssphdev.xxx.com/ReportServer)

我正在使用 SQL Server 2008 R2。

任何建议都会有所帮助。我有要从服务器检索的报告。并且还想在同一台服务器上进一步测试。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:29:03.707

我找到了解决这个问题的方法......

*   我将 URL 更改为主机名到 localhost 并且它有效

我想问题是我有两个同名的虚拟（显然一次只有一个是开启的）并且连接到同一个域。我认为当我在 URL 上使用主机名时，它试图连接另一台关闭的开发机器。本地主机工作。

这是我的猜测！如果您遇到此类问题，请尝试“localhost”并看到它解决..!!

干杯！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-01T11:43:30.057

如果设置为以下身份验证模式=“Windows”身份模拟=“真”后仍然提示输入凭据

将以下代码从“Microsoft SQL Server\MSRS10_50.xxxxxxx\Reporting Services\ReportServer\rsreportserver.config 替换为

只需从标记 AuthenticationTypes 中删除 RSWindowsNegotiate 标记

# ios - Keychain2Go 如何在 iPhone 上获取其他应用的钥匙串数据？

> ID：15468769
> 
> 赞同：1
> 
> 时间：2013-03-18T02:12:10.617
> 
> 标签：ios, keychain

这个应用程序[Keychain2Go](https://itunes.apple.com/cn/app/keychain2go/id470565680?l=en&mt=8)如何获取 iPhone 上的所有钥匙串并删除它们？

正如苹果文档中所说：

> 在 iOS 中，应用程序始终可以访问自己的钥匙串项，而无权访问任何其他应用程序的项。系统为钥匙串生成自己的密码，并以任何应用程序都无法访问的方式将密钥存储在设备上。当用户备份 iPhone 数据时，会备份钥匙串数据，但钥匙串中的机密在备份中仍保持加密状态。钥匙串密码不包含在备份中。因此，获得 iPhone 备份访问权限的人不能使用存储在 iPhone 钥匙串中的密码和其他机密。出于这个原因，使用 iPhone 上的钥匙串来存储可用于登录安全网站的密码和其他数据（如 cookie）非常重要。

但是 Keychain2Go 真的可以。如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T07:31:48.227

据我从 Keychain2Go 的文档中了解到，它提供了 iOS 设备中 Mac 的所有安全信息。所以它没有任何改变 iOS 钥匙串项目的能力。

> 在 iOS 上有史以来第一次，您现在可以在您的 iOS 设备上访问您的 Mac 钥匙串。您可以完全访问存储在 Keychain2Go 中的密钥。再也不会在国外时无法登录您的网络邮件帐户，并且您在家里的 Mac 上忘记了密码。

# jsf-2 - 项目阶段更改为生产后，MyFaces 继续在 DEV 模式下运行

> ID：15468778
> 
> 赞同：1
> 
> 时间：2013-03-18T02:13:54.347
> 
> 标签：jsf-2, myfaces, websphere-portal

在 Websphere Portal 7 和 MyFaces 2.1.10 中运行。

WAS 中 Web 模块的部署描述符显示 PROJECT_STAGE 属性的值为“Production”。

然而，当应用程序启动时，我看到 MyFaces 警告“Apache MyFaces-2 正在开发模式下运行”。如果 JSF 中发生错误，我会在页面上看到完整的堆栈跟踪，这表明它实际上是在 DEV 模式下运行。

是否可以在其他位置设置该属性以覆盖 web.xml 文件中的值？如果 web.xml 中的值似乎被忽略，我该如何停止 DEV 模式？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T03:06:57.580

我在这个项目上设置了 JRebel，它打开了 facelet 开发模式。[http://zeroturnaround.com/software/jrebel/features/frameworks/](http://zeroturnaround.com/software/jrebel/features/frameworks/)

# linux - Linux进程地址空间解释？

> ID：15468785
> 
> 赞同：0
> 
> 时间：2013-03-18T02:14:31.973
> 
> 标签：linux

在linux中，每个进程都有地址空间，当创建子进程时，这个地址空间将被 exec() 系统调用覆盖。我想知道这个地址空间是由什么组成的？地址空间中会有什么样的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T02:37:16.410

地址空间由许多内存段组成。其中：

*   程序的可执行代码和静态数据
*   堆
*   堆栈
*   程序启动时加载的共享库
*   使用 .映射到地址空间的其他文件`mmap()`。
*   共享内存段
*   ETC...

有些段是只读的（如程序的可执行代码，aka `.text`），有些是可写的（如堆）。有些是由磁盘上的文件支持的，有些是纯粹基于内存的。

在 Linux 中，您可以查看`/proc/<pid>/maps`任何进程 ID 的内容，以了解哪些段是该进程地址空间的一部分。

当您成功调用`exec()`时，当前进程地址空间中的所有段都未映射，新的可执行文件在启动时会获得一组全新的基本映射（堆栈、堆、程序代码等）。

# javascript - 使用 Jquery 或 Javascript 动态计算字段划分

> ID：15468786
> 
> 赞同：0
> 
> 时间：2013-03-18T02:14:47.977
> 
> 标签：javascript, jquery, division

我正在“试图”弄清楚如何动态计算字段之间的除法以显示在另一个字段中，事实是，我见过的所有示例都是总和，而那些使用的是这样的：`$('#field').each(function(){....});`.

我不能这样做，因为没有办法知道哪个是股息，哪个是除数。我尝试使用“绑定”来尝试将该函数附加到该字段。它没有用。

还尝试将“onChange =”CalcularSaldo（）“放在输入字段上；没有运气，但主要是因为我很确定我的函数是错误的：

```
 <script type="text/javascript">
 $(document).ready(function() {
  function calcularSaldo() {
  var costo = document.getElementById("costo_ad").value;
  var vida = document.getElementById("vida_util").value; 
  document.getElementById("saldo_dep").value = costo / vida;
  }
  });</script> 
```

输入：

```
 <label for="costo_ad">Costo de Adquisicion</label>
  <input name="costo_ad" type="text" id="costo_ad" class="round default-width-input" />

 <label for="vida_util">Vida Util</label>
 <input name="vida_util" type="text" id="vida_util" class="round default-width-input" />

 <label for="saldo_dep">Saldo a Depreciar</label>
 <input name="saldo_dep" type="text" id="saldo_dep" class="round default-width-input" disabled /> 
```

并且函数应该是这样的：

```
saldo_dep = costo_ad / vida_util 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T02:31:13.310

假设我们有以下字段

```
<input type="number" id="field1">
<input type="number" id="field2">

<span id="label"></span> 
```

因此，您希望将 jquery 函数附加到字段上的某些操作，例如在用户完成在任一框中输入文本之后

```
$("#field1, #field2").keyup( function(){

     var n1 = $("#field1").val();
     var n2 = $("#field2").val();

     var result = n2/n1;
     $("#label").text(result);

}); 
```

示例在 jsFiddle ... [http://jsfiddle.net/A3qat/5/](http://jsfiddle.net/A3qat/5/)

# objective-c - 获取 NSCollectionViewItem NSButton click 的代表对象值

> ID：15468789
> 
> 赞同：1
> 
> 时间：2013-03-18T02:15:29.273
> 
> 标签：objective-c, cocoa, nscollectionview, nscollectionviewitem

我已经阅读了一些问题，发现一些问题非常令人困惑，我真的不知道他们是否回答了我的问题。

我有一个`NSCollectionView`实现并连接到一个`Core Data context`，一切都正确显示。

现在我`buttons`在 中`view prototype`，当我单击此按钮时，我需要获取该`representedObject`克隆视图的值。

我已经阅读和阅读，有些部分让我感到困惑，所以我正在寻找一个简单的解释。

感谢您的时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T08:40:11.647

一个动作方法接受一个参数：

```
- (IBAction) collectionViewButtonClicked:(id)sender {
} 
```

那`sender`是发送消息的控件或其他 UI 元素（例如，菜单项）。

使用该参数，当您的操作方法被调用时，您就知道单击了哪个按钮。

按钮是一种控件，每个控件都由至少一个单元格支持。细胞也代表了物体。

因此，首先，将按钮单元格的表示对象设置为拥有该按钮的集合视图项。（您可以在 nib 编辑器中执行此操作。）然后，在您的操作方法中，获取按钮的单元格，然后是单元格的表示对象（即项目），然后是项目的表示对象。

如果`representedObject`插座没有出现在笔尖编辑器中，您可能选择了按钮，而不是它的单元格。我建议使用左下角的按钮打开 nib 编辑器的大纲视图，然后永远不要关闭它。

# tcl - TCL中的绝对值

> ID：15468791
> 
> 赞同：1
> 
> 时间：2013-03-18T02:15:54.533
> 
> 标签：tcl

获取 expr 语句绝对值的函数是什么。例如`expr [$a - $b ]`. 现在解决方案可以是-ve 或+正数。但我想要 +ve 值。

我想像`if { |$diff_a| > 0 & |$diff_b| >0 } {` ....一样使用它。

我使用 tcl 8.4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T08:04:28.180

我想补充一点，“abs”命令只能在 Tcl 的数学表达式中使用，所以正确的例子是：

```
if {[expr abs($diff_a)] > 0} {...} 
```

有关更多信息，请参阅上面答案中指定的 expr 手册页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T02:23:18.583

您将使用以下`abs`功能：

```
if {abs($diff_a) > 0 ...} ... 
```

请注意，`abs`这只适用于表达式的上下文（例如：通过调用`expr`），但还要注意第一个参数`if`被评估为表达式。

`abs`记录在tcl 8.4 之前版本的[expr手册页上。](http://tcl.tk/man/tcl8.4/TclCmd/expr.htm#M21)从 8.5 开始，它位于[mathfunc](http://tcl.tk/man/tcl8.5/TclCmd/mathfunc.htm#M6)手册页上。

# ios - UIPopoverController with UINavigationController border sizing

> ID：15468802
> 
> 赞同：0
> 
> 时间：2013-03-18T02:17:22.970
> 
> 标签：ios, uinavigationcontroller, uipopovercontroller

I am embedding a UINavigationController within a UIPopoverController. It "works", but the top border of the popover expands to the size of the navigation controller bar (behind it), casting the border's shadow onto the top of the main view (read: the top border of the popover is 44 points high). When I instantiate the popover with the class itself...not within the UINavigationController, it all works fine (but, of course I don't have access to the navigational controller).

Where am I going wrong?

```
CGPoint buttonPoint = [self.mapView convertPoint:sender.center fromView:self.guideButtonScroll];

GuideViewController *guideViewController = [[GuideViewController alloc] initWithNibName:@"GuideView" bundle:nil];

UINavigationController *guideNavigationController = [[UINavigationController alloc] initWithRootViewController:guideViewController];

self.buttonbarPopoverController = [[UIPopoverController alloc] initWithContentViewController:guideNavigationController];
self.buttonbarPopoverController.delegate = self;
self.buttonbarPopoverController.popoverContentSize = CGSizeMake(320, 504);
[self.buttonbarPopoverController presentPopoverFromRect:CGRectMake(buttonPoint.x - 30, buttonPoint.y, 10, 10) inView:self.mapView permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:49:37.973

What you are seeing is not the top border of the popover expanded. The popover has normal borders. What you are seeing is the UINavigationBar at the top of the navigation controller's view. The UINavigationBar casts a shadow in iOS 6.

The UINavigationBar is automatically given a special color / style that matches that of the popover borders. Of course you can change that if you don't like it. You are also free to hide the navigation controller's navigation bar if you don't want to see it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:07:16.853

Went with subclassing the UIPopoverController, but that didn't get the gloss look of the popover. Simply just put the UINavigationController inside a UIViewController...gets the custom navigation bar and the gloss look of the popover. Here's what I ended up with:

```
UIViewController *guideviewViewController = [[UIViewController alloc] init];
guideviewViewController.view.frame = CGRectMake(0, 0, 320, 508);

GuideViewController *guideViewController = [[GuideViewController alloc] initWithNibName:@"GuideView" bundle:nil];

self.guideNavigationController = [[UINavigationController alloc] initWithRootViewController:guideViewController];
self.guideNavigationController.view.frame = CGRectMake(0, 0, 320, 508);

[guideviewViewController.view addSubview:self.guideNavigationController.view];

CGPoint buttonPoint = [self.mapView convertPoint:sender.center fromView:self.guideButtonScroll];

self.guidePopoverController = [[UIPopoverController alloc] initWithContentViewController:guideviewViewController];
self.guidePopoverController.delegate = self;
self.guidePopoverController.popoverContentSize = CGSizeMake(320, 508);
[self.guidePopoverController presentPopoverFromRect:CGRectMake(buttonPoint.x - 30, buttonPoint.y, 10, 10) inView:self.mapView permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

# android - Android :: 在添加/删除小部件时确定 3G 网络的状态

> ID：15468806
> 
> 赞同：0
> 
> 时间：2013-03-18T02:17:46.163
> 
> 标签：android, android-intent, android-widget, android-networking

我创建了一个简单的小部件，旨在显示移动网络连接的当前状态（参见源代码[http://tinyurl.com/cmucqr6](http://tinyurl.com/cmucqr6)）

到目前为止它运行良好，唯一的问题是有时它没有显示网络的正确状态（因此它可以在实际禁用时显示它已启用，反之亦然）。但是如果启用它，它会正确禁用网络，如果它被禁用，它会启用它。所以我认为我的更新小部件图像代码有问题。

有人可以解释那里可能有什么问题吗？可能我需要订阅一些特定的事件，比如 network_enable 或类似的？

# emacs - Emacs ansi-term 最大缓冲区大小？

> ID：15468816
> 
> 赞同：12
> 
> 时间：2013-03-18T02:19:05.100
> 
> 标签：emacs, ansi-term

我喜欢使用 Emacs 模式运行 shell 程序`ansi-term`，但我想知道如何在`ansi-term`模式下设置最大缓冲区大小，这样即使有很多行我也不会丢失命令历史记录？（谷歌似乎没有给出明确的答案。）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-18T02:58:09.927

变量 term-buffer-maximum-size 控制这个值。将其设置为 0 应该缓冲所有内容（尚未使用它，但这就是文档所说的）。我很想改用一个大的值，这样一个失控的程序就不会引起严重的问题。它默认为 2048 行。

```
(setq term-buffer-maximum-size 0) 
```

在您的 term-mode-hook 函数中应该这样做。

# c# - 尝试加载 150+ 灰度 4096 x 4096 位图。我认为需要帮助绕过 2GB 限制

> ID：15468818
> 
> 赞同：2
> 
> 时间：2013-03-18T02:19:12.030
> 
> 标签：c#, winforms

**已解决：**我错误地假设 Visual Studio 2012 在创建新项目时默认构建 64 位应用程序。在“解决方案属性”的“构建”选项卡下，有一个标记为“首选 32 位”的复选框。当我取消选中此复选框并重建我的解决方案时，我能够一次加载和处理 200 多个位图。感谢 Mike Trusov 如此礼貌地向我指出解决方案。

**原始问题：**我遇到了一个小问题。我有超过 150 个灰度位图，我想在 8 GB 系统上加载到 RAM 中，但如果不抛出异常，我似乎无法超过 50 个左右。我已经尝试将位图加载到一个数组中，这当然是一个失败的原因，因为 .NET 有 2GB 的限制。但它在加载 2GB 的位图之前很久就失败了。所以我尝试将它们加载到 a`List<List<Bitmap>>`中，但即使在相同的地方也失败了。在异常发生时，任务管理器说我有 3939 MB 的可用 RAM 等待填充。很奇怪。

我不需要这些位图在 RAM 中是连续的。对于我所关心的，它们可以是分散的 16 MB 分配。我只想能够用一堆位图填充可用的 RAM。就这样。

该异常在不同时间是 OutOfMemory 异常或 ArgumentException，具体取决于我在启动程序时拥有多少可用 RAM。在任何一种情况下，堆栈跟踪都会在`System.Drawing.Bitmap..ctor(String filename)`. 发生异常时正在加载的特定文件没有任何问题。事实上，当我让它加载一组不同（甚至重叠）的位图时，错误发生在同一次迭代中。

有没有人知道他们可以借给我如何做到这一点？我是否以某种奇怪的方式遇到 .NET 2GB 限制？

回答几个问题和评论：我在一台具有 8 GB RAM 的计算机上使用 Visual Studio 2012、.NET 4.5、64 位 Windows 7。是的，出于各种原因（性能、图像处理原因等），我同时需要 RAM 中的所有这些位图。我曾考虑过使用 gcAllowVeryLargeObjects，但我不需要或不希望我的所有位图都放在一大块连续的内存中。我宁愿每个位图都使用自己单独的内存分配。此外，如果我有一台具有 64 GB RAM 的机器，那么即使限制为 150 个这种大小的位图也是荒谬的。为什么不抛出 OutOfMemoryException 就无法加载这些位图？

对我来说，.NET 似乎试图将所有位图保存在一个 2 GB 的区域中。如果有办法让每个位图（这里说的比我知道的更多）都有自己独立的地址空间，那可能会解决问题。为了调用很久以前的 MS-DOS 语言，我想使用长指针分配和访问远内存，而不是将所有数据卡在单个近段中。

这是数组代码：

```
 List<String> imageFiles;            // List of .bmp filenames.
    Bitmap[] bmps = new Bitmap[100];    // Stores/accesses the Bitmaps.

    private void goButton_Click(object sender, EventArgs e)
    {
        int i;

        // Load the bitmaps
        if (bmps[0] == null)
        {
            // Load the list of bitmap files.
            imageFiles = Directory.EnumerateFiles(@"C:\Temp", "*.bmp", SearchOption.TopDirectoryOnly).ToList();

            // Read bitmap files
            for (i = 0; i < bmps.Length; ++i)
            {
                bmps[i] = new Bitmap(imageFiles[i]);    // <-- Exception occurs here when i == 52 or so.
            }
        }
    } 
```

这是列表>代码：

```
 List<String> imageFiles;                                // List of .bmp filenames.
    List<List<Bitmap>> bmps = new List<List<Bitmap>>(100);  // Stores/accesses the Bitmaps.

    private void goButton_Click(object sender, EventArgs e)
    {
        int i;

        // Load the bitmaps
        if (bmps.Count == 0)
        {
            // Load the list of bitmap files.
            imageFiles = Directory.EnumerateFiles(@"C:\Temp", "*.bmp", SearchOption.TopDirectoryOnly).ToList();

            // Read bitmap files
            for (i = 0; i < 100; ++i)
            {
                // Load the bitmap into temporary Bitmap b.
                Bitmap b = new Bitmap(imageFiles[i]);   // <-- Exception occurs here when i == 52 or so.

                // Create and add a List<Bitmap> that will receive the clone of Bitmap b.
                bmps.Add(new List<Bitmap>(1));

                // Clone Bitmap b and add that cloned Bitmap to the Bitmap of List<Bitmap>.
                bmps[i].Add((Bitmap)b.Clone());

                // Dispose Bitmap b.
                b.Dispose();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:37:16.990

在 64 位操作系统上运行的 64 位应用程序（检查项目设置 - 可能必须为任何基于 x86 的 CPU 创建新配置）将超过 2gb 的位图加载到内存中应该没有问题（我猜你是）。一个简单的列表也应该起作用：

```
 var imageFiles = Directory.EnumerateFiles(@"C:\Temp", "*.bmp", SearchOption.TopDirectoryOnly).ToList();
    var lst = new List<Bitmap>();
    foreach (var imageFile in imageFiles)
    {
        lst.Add(new Bitmap(imageFile));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T02:35:44.150

它们***都***必须同时加载吗？您能否加载其中的 20 个，然后在您处理或显示这些时，您有一个后台线程准备接下来的 20 个。

# html - 当 PDF 包含 XFDF 数据时，如何在浏览器中显示它？

> ID：15468822
> 
> 赞同：1
> 
> 时间：2013-03-18T02:19:24.317
> 
> 标签：html, pdf, xfdf

我需要显示一个带有数据的 PDF 文件，这个数据是一个 XFDF 文件。所以这个过程在我的机器上工作我打开 XFDF 并自动显示 PDF 和数据。问题是当我在 Web 环境中进行此过程时，HTML 页面不显示任何内容。

我有 2 个文件：PDF 是 TestForm1.pdf，XFDF 是 TestForm1.xfdf。

我可以嵌入一个空的 PDF，它可以工作：

```
<object type="application/pdf" data="TestForm1.pdf" width="300" height="200"></object> 
```

但以下（使用 XFDF）不起作用：

```
<object type="application/vnd.adobe.xfdf" data="TestForm1.xfdf" width="300" height="200"></object> 
```

我的 XFDF 文件的代码是：

```
<?xml version="1.0" encoding="UTF-8"?>
<xfdf xmlns="http://ns.adobe.com/xfdf/" xml:space="preserve">
<f href="TestForm1.pdf"/>
<fields>
    <field name="Name_UeSd4O*CXTlIKGfP8CI1Lg">
        <value>Aaron</value>
    </field>
</fields>
<ids original="F76AE09E68036941A6318DF3754A9CD1" modified="4FB18F258D7B8F4699CCCF49538E852F"/>
</xfdf> 
```

请我需要有关此问题的帮助或指导。问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-19T20:18:32.040

你发帖已经有一段时间了。抱歉复活了。一直在研究同样的问题。

通过将 XFDF 文件中的 href 路径更改为 pdf 所在的完整服务器路径来解决问题。即“ [http://google.com/my.pdf](http://google.com/my.pdf)

# jquery - 添加组件或升级自定义 jquery ui 安装

> ID：15468834
> 
> 赞同：2
> 
> 时间：2013-03-18T02:20:38.937
> 
> 标签：jquery, jquery-ui

[jQuery UI 的下载生成器](http://jqueryui.com/download/)非常简洁。它可以让你只下载你需要的 jQuery UI 组件，而不是下载整个东西。不幸的是，这有一个小问题。

如果您正在对您的站点进行进一步的开发，并且您想使用您的站点当前不使用的 jQuery UI 组件怎么办？您可以再次下载 jQuery UI，但如果您不知道您当前正在使用哪些组件......即使您只使用 2-3 个组件，您是否只需下载整个内容？

如果您想升级您的 jQuery UI 安装但不知道您当前正在使用哪些组件怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:29:32.843

关于哪些组件，您可以下载整个包，但包含在您在项目中使用的文件中。

前任。只有 'jquery.ui.accordion.min' 和 'jquery.ui.datepicker.min'

对于以后的升级，您可以使用 JQuery/JQuery-UI Online CDN 以及在原始在线链接之后引用的自定义“js”文件。这样，您将拥有最新版本并保持您的自定义代码不变。

这将为您节省一些麻烦。

# javascript - Javascript 中的变量引用

> ID：15468836
> 
> 赞同：2
> 
> 时间：2013-03-18T02:20:53.003
> 
> 标签：javascript, variables, reference

我之前在思考一个问题。我想检查一个函数是否已经被放入一个数组中。如果是这样抛出异常。我用控制台做了这个小测试......

![在此处输入图像描述](../Images/468150058a8893efb39df5645e2164f1.png)

所以我想我可以说对象总是只是引用，并且在设置之后`a`我`x`可以更改`x`并且`a`也会受到影响？

这是否意味着条件`x = a`无论如何，这就是我想要的。

使用它来检查函数/对象是否已经在数组中，我可以正确地做到这一点......

![在此处输入图像描述](../Images/d0bf4acb29782b90899da77bb2b64222.png)

有一个更好的方法吗？

这是否也意味着如果我将一个变量传递给一个函数并在该函数中对其进行变异，它也会在该函数之外发生变异？

**编辑**

我想我对这个小测试的突变是正确的。但我不明白为什么它在第二个示例的第一个日志中出现栏

![在此处输入图像描述](../Images/d058d8d7e25159cc849673ffe4f2e1ea.png)

![在此处输入图像描述](../Images/fafaf746d009433cf2574ba06769a5f1.png)

**编辑结束**

示例 1：

```
var x = function(){console.log("hello")}; var a = function(){console.log("hello")}; 

console.log(x == a); //comes out false

//Set a as x
a = x; 

console.log(x == a); //comes out true 
```

示例 2：

```
Array.prototype.Contains = Array.prototype.Contains || function (obj) {
    return this.indexOf(obj) != -1;
};

var x = function(){console.log("hello")}; var a = function(){console.log("hello")}; 

var z = a;

console.log(x == a); //comes out false

var l = [];
l.push(x);

//Set a as x
a = x; 

l.push(a);

console.log(x == a); //comes out true

console.log(l.Contains(x)); //Should come out true
console.log(l.Contains(a)); //Should come out true
console.log(l.Contains(z)); //Should come out false 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T02:32:53.650

您的问题对我来说并不完全清楚，但我会尽力回答。

## 改进功能

您可以简化您的功能以利用该`indexOf`功能。

```
Array.prototype.Contains = Array.prototype.Contains || function (obj) {
    return this.indexOf(obj) >= 0;
}; 
```

另外我想指出，在您的实现中，当您可以通过在`if`.

```
Array.prototype.Contains = Array.prototype.Contains || function (obj) {
    var i;
    for (i = 0; i < this.length; i += 1) {
        if (this[i] === obj) {
            return true;
        }
    }
    return false;
}; 
```

## x == 一个

我认为您理解但只是想澄清一下，`x`并且`a`最初是不同的，因为它们引用了不同的功能。当您设置`x = a`它们时，它们都指向最初声明的函数`x`，因此是相同的。即使这些功能在实现方面是相同的，但它们都是被构造的，然后被放置在内存的不同部分中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T02:31:42.153

当你这样做时：

`var x = function(){console.log("hello")}; var a = function(){console.log("hello")}`

`x`并`a`指向不同的功能。即使您比较它们是否相等，它们也不相等，因为这里的所有相等检查都是查看它们是否指向相同的函数 - 没有尝试查看它们在运行时是否会产生相同的输出（即毕竟，一般来说几乎不可能做到）。

当您执行类似的操作时`x = a`， x 现在引用 a 所引用的任何内容 - 同一个对象。所以现在他们比较平等。

如果您需要查看数组中是否已经存在函数，我建议您创建一个字典（哈希映射、哈希表，无论您想调用什么），而不是仅仅将数组放在一个大列表中，它使用字符串作为键作为函数价值观。关键是函数的“名称” - 每当您创建该函数时，您将使用相同的名称，并且内存中不同位置但具有相同字符的名称将比较相等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T02:42:03.950

你真的很困惑。JavaScript 中的所有内容（除了原始数据类型`null`和`undefined`）都是对象，并且对象作为引用存储在变量中。阅读以下答案以了解有关两者之间差异的更多信息：[https ://stackoverflow.com/a/13268731/783743](https://stackoverflow.com/a/13268731/783743)

当您定义两个相同的函数（在您的情况下`x`和`a`）时，JavaScript 将它们视为单独的函数。这是因为除了函数体之外，函数还维护自己的环境和状态。因此`x`和`a`不是同一个函数，这就是为什么`x === a`返回`false`。

通过设置`x = a`，您实际上是将存储在的引用复制`a`到`x`. 因此，它们现在指向同一个函数（`a`最初是指该函数）。`x`最初引用的函数现在丢失了，最终将被垃圾回收。因此`x === a`现在返回`true`。

顺便说一句，您不需要创建特殊`Contains`函数来检查对象是否已经在数组中。只需使用`indexOf`：

```
var array = [];
function x() {}

array.indexOf(x); // returns -1
array.push(x);
array.indexOf(x); // returns 0 
```

如果索引小于`0`该对象不在数组中。

如果要检查两个函数的函数体是否相同，请使用此函数：

```
function sameFunctionBody(a, b) {
    return String(a) === String(b);
} 
```

只要两个函数**完全相同**（包括空格、参数、函数名等），现在`console.log(sameFunctionBody(x, a))`就会返回。`true`

# iphone - Cocos3D - 集成到uikit时不显示hello world场景

> ID：15468839
> 
> 赞同：2
> 
> 时间：2013-03-18T02:21:02.467
> 
> 标签：iphone, objective-c, ipad, cocos2d-iphone, cocos3d

我想在我的一个视图中集成 cocos3d。所以，我有一个普通的视图控制器（`MapEditorViewController`）和一个视图，在我的视图控制器中，（我创建了一个`IBOutlet CCGLView *openGLView`）我希望 cocos3d 在其中。在我的视图控制器中，我有一个方法 setupCocos3D ：

**地图编辑器视图控制器**

```
- (void)setupCocos3D {

    [[CCDirector sharedDirector] setOpenGLView:openGLView];

    // Create the customized CC3Layer that supports 3D rendering.
    CC3Layer* cc3Layer = [HelloWorldLayer node];

    // Create the customized 3D scene and attach it to the layer.
    // Could also just create this inside the customer layer.
    cc3Layer.cc3Scene = [testScene scene];

    // Assign to a generic variable so we can uncomment options below to play with the capabilities
    CC3ControllableLayer* mainLayer = cc3Layer;

    // The 3D layer can run either directly in the scene, or it can run as a smaller "sub-window"
    // within any standard CCLayer. So you can have a mostly 2D window, with a smaller 3D window
    // embedded in it. To experiment with this smaller embedded 3D window, uncomment the following lines:
    //  CGSize winSize = CCDirector.sharedDirector.winSize;
    //  cc3Layer.position = ccp(30.0, 30.0);
    //  cc3Layer.contentSize = CGSizeMake(winSize.width - 100.0, winSize.width - 40.0);
    //  cc3Layer.alignContentSizeWithDeviceOrientation = YES;
    //  mainLayer = [CC3ControllableLayer node];
    //  [mainLayer addChild: cc3Layer];

    // A smaller 3D layer can even be moved around on the screen dyanmically. To see this in action,
    // uncomment the lines above as described, and also uncomment the following two lines.
    //  cc3Layer.position = ccp(0.0, 0.0);
    //  [cc3Layer runAction: [CCMoveTo actionWithDuration: 15.0 position: ccp(500.0, 250.0)]];

    // Attach the layer to the controller and run a scene with it.

    [CCDirector sharedDirector].animationInterval = (1.0f / kAnimationFrameRate);
    [CCDirector sharedDirector].displayStats = YES;
[[CCDirector sharedDirector] enableRetinaDisplay: YES];

    [[CCDirector sharedDirector] runWithScene:mainLayer];
} 
```

`setupCocos3D``viewDidLoad`在类中被调用`MapEditorViewController`。

我有这两个文件`testScene`，`testLayer (called HelloWorldLayer here)`它们是从 hello world 默认 cocos3d 项目中复制的。

**测试场景.m**

```
/**
 * Constructs the 3D scene.
 *
 * Adds 3D objects to the scene, loading a 3D 'hello, world' message
 * from a POD file, and creating the camera and light programatically.
 *
 * When adapting this template to your application, remove all of the content
 * of this method, and add your own to construct your 3D model scene.
 *
 * NOTES:
 *
 * 1) To help you find your scene content once it is loaded, the onOpen method below contains
 *    code to automatically move the camera so that it frames the scene. You can remove that
 *    code once you know where you want to place your camera.
 *
 * 2) The POD file used for the 'hello, world' message model is fairly large, because converting a
 *    font to a mesh results in a LOT of triangles. When adapting this template project for your own
 *    application, REMOVE the POD file 'hello-world.pod' from the Resources folder of your project.
 */
-(void) initializeScene {

    // Create the camera, place it back a bit, and add it to the scene
    CC3Camera* cam = [CC3Camera nodeWithName: @"Camera"];
    cam.location = cc3v( 0.0, 0.0, 6.0 );
    [self addChild: cam];

    // Create a light, place it back and to the left at a specific
    // position (not just directional lighting), and add it to the scene
    CC3Light* lamp = [CC3Light nodeWithName: @"Lamp"];
    lamp.location = cc3v( -2.0, 0.0, 0.0 );
    lamp.isDirectionalOnly = NO;
    [cam addChild: lamp];

    // This is the simplest way to load a POD resource file and add the
    // nodes to the CC3Scene, if no customized resource subclass is needed.
    [self addContentFromPODFile: @"hello-world.pod"];

    // Create OpenGL ES buffers for the vertex arrays to keep things fast and efficient,
    // and to save memory, release the vertex content in main memory because it is now redundant.
    [self createGLBuffers];
    [self releaseRedundantContent];

    // That's it! The scene is now constructed and is good to go.

    // To help you find your scene content once it is loaded, the onOpen method below contains
    // code to automatically move the camera so that it frames the scene. You can remove that
    // code once you know where you want to place your camera.

    // If you encounter problems displaying your models, you can uncomment one or more of the
    // following lines to help you troubleshoot. You can also use these features on a single node,
    // or a structure of nodes. See the CC3Node notes for more explanation of these properties.
    // Also, the onOpen method below contains additional troubleshooting code you can comment
    // out to move the camera so that it will display the entire scene automatically.

    // Displays short descriptive text for each node (including class, node name & tag).
    // The text is displayed centered on the pivot point (origin) of the node.
//  self.shouldDrawAllDescriptors = YES;

    // Displays bounding boxes around those nodes with local content (eg- meshes).
//  self.shouldDrawAllLocalContentWireframeBoxes = YES;

    // Displays bounding boxes around all nodes. The bounding box for each node
    // will encompass its child nodes.
//  self.shouldDrawAllWireframeBoxes = YES;

    // If you encounter issues creating and adding nodes, or loading models from
    // files, the following line is used to log the full structure of the scene.
    LogInfo(@"The structure of this scene is: %@", [self structureDescription]);

    // ------------------------------------------

    // And to add some dynamism, we'll animate the 'hello, world' message
    // using a couple of actions...

    // Fetch the 'hello, world' object that was loaded from the POD file and start it rotating
    CC3MeshNode* helloTxt = (CC3MeshNode*)[self getNodeNamed: @"Hello"];
    CCActionInterval* partialRot = [CC3RotateBy actionWithDuration: 1.0
                                                          rotateBy: cc3v(0.0, 30.0, 0.0)];
    [helloTxt runAction: [CCRepeatForever actionWithAction: partialRot]];

    // To make things a bit more appealing, set up a repeating up/down cycle to
    // change the color of the text from the original red to blue, and back again.
    GLfloat tintTime = 8.0f;
    ccColor3B startColor = helloTxt.color;
    ccColor3B endColor = { 50, 0, 200 };
    CCActionInterval* tintDown = [CCTintTo actionWithDuration: tintTime
                                                          red: endColor.r
                                                        green: endColor.g
                                                         blue: endColor.b];
    CCActionInterval* tintUp = [CCTintTo actionWithDuration: tintTime
                                                        red: startColor.r
                                                      green: startColor.g
                                                       blue: startColor.b];
     CCActionInterval* tintCycle = [CCSequence actionOne: tintDown two: tintUp];
    [helloTxt runAction: [CCRepeatForever actionWithAction: tintCycle]];
}

#pragma mark Updating custom activity

/**
 * This template method is invoked periodically whenever the 3D nodes are to be updated.
 *
 * This method provides your app with an opportunity to perform update activities before
 * any changes are applied to the transformMatrix of the 3D nodes in the scene.
 *
 * For more info, read the notes of this method on CC3Node.
 */
-(void) updateBeforeTransform: (CC3NodeUpdatingVisitor*) visitor {}

/**
 * This template method is invoked periodically whenever the 3D nodes are to be updated.
 *
 * This method provides your app with an opportunity to perform update activities after
 * the transformMatrix of the 3D nodes in the scen have been recalculated.
 *
 * For more info, read the notes of this method on CC3Node.
 */
-(void) updateAfterTransform: (CC3NodeUpdatingVisitor*) visitor {
    // If you have uncommented the moveWithDuration: invocation in the onOpen: method, you
    // can uncomment the following to track how the camera moves, where it ends up, and what
    // the camera's clipping distances are, in order to determine how to position and configure
    // the camera to view the entire scene.
//  LogDebug(@"Camera: %@", activeCamera.fullDescription);
}

#pragma mark Scene opening and closing

/**
 * Callback template method that is invoked automatically when the CC3Layer that
 * holds this scene is first displayed.
 *
 * This method is a good place to invoke one of CC3Camera moveToShowAllOf:... family
 * of methods, used to cause the camera to automatically focus on and frame a particular
 * node, or the entire scene.
 *
 * For more info, read the notes of this method on CC3Scene.
 */
-(void) onOpen {

    // Move the camera to frame the scene. You can uncomment the LogDebug line in the
    // updateAfterTransform: method to track how the camera moves, where it ends up, and
    // what the camera's clipping distances are, in order to determine how to position
    // and configure the camera to view your entire scene. Then you can remove this code.
    //[self.activeCamera moveWithDuration: 3.0 toShowAllOf: self withPadding: 0.5f];

    // Uncomment this line to draw the bounding box of the scene.
//  self.shouldDrawWireframeBox = YES;
}

/**
 * Callback template method that is invoked automatically when the CC3Layer that
 * holds this scene has been removed from display.
 *
 * For more info, read the notes of this method on CC3Scene.
 */
-(void) onClose {}

#pragma mark Handling touch events 

/**
 * This method is invoked from the CC3Layer whenever a touch event occurs, if that layer
 * has indicated that it is interested in receiving touch events, and is handling them.
 *
 * Override this method to handle touch events, or remove this method to make use of
 * the superclass behaviour of selecting 3D nodes on each touch-down event.
 *
 * This method is not invoked when gestures are used for user interaction. Your custom
 * CC3Layer processes gestures and invokes higher-level application-defined behaviour
 * on this customized CC3Scene subclass.
 *
 * For more info, read the notes of this method on CC3Scene.
 */
-(void) touchEvent: (uint) touchType at: (CGPoint) touchPoint {}

/**
 * This callback template method is invoked automatically when a node has been picked
 * by the invocation of the pickNodeFromTapAt: or pickNodeFromTouchEvent:at: methods,
 * as a result of a touch event or tap gesture.
 *
 * Override this method to perform activities on 3D nodes that have been picked by the user.
 *
 * For more info, read the notes of this method on CC3Scene.
 */
-(void) nodeSelected: (CC3Node*) aNode byTouchEvent: (uint) touchType at: (CGPoint) touchPoint {

} 
```

**HelloWorldLayer.m**

```
//
//  HelloWorldLayer.m
//  testCocos2d
//
//  Created by Etienne Noel on 2013-03-15.
//  Copyright __MyCompanyName__ 2013\. All rights reserved.
//

// Import the interfaces
#import "HelloWorldLayer.h"

// Needed to obtain the Navigation Controller
#import "AppDelegate.h"

#pragma mark - HelloWorldLayer

// HelloWorldLayer implementation
@implementation HelloWorldLayer

/**
 * Override to set up your 2D controls and other initial state, and to initialize update processing.
 *
 * For more info, read the notes of this method on CC3Layer.
 */
-(void) initializeControls {
    [self scheduleUpdate];
}

#pragma mark Updating layer

/**
 * Override to perform set-up activity prior to the scene being opened
 * on the view, such as adding gesture recognizers.
 *
 * For more info, read the notes of this method on CC3Layer.
 */
-(void) onOpenCC3Layer {}

/**
 * Override to perform tear-down activity prior to the scene disappearing.
 *
 * For more info, read the notes of this method on CC3Layer.
 */
-(void) onCloseCC3Layer {}

/**
 * The ccTouchMoved:withEvent: method is optional for the <CCTouchDelegateProtocol>.
 * The event dispatcher will not dispatch events for which there is no method
 * implementation. Since the touch-move events are both voluminous and seldom used,
 * the implementation of ccTouchMoved:withEvent: has been left out of the default
 * CC3Layer implementation. To receive and handle touch-move events for object
 * picking, uncomment the following method implementation.
 */
/*
 -(void) ccTouchMoved: (UITouch *)touch withEvent: (UIEvent *)event {
 [self handleTouch: touch ofType: kCCTouchMoved];
 }
 */
@end 
```

一切都在编译，我只看到黑屏。我已经包含了 hello-world.pod 文件，在控制台中一切似乎都很好（日志显示文件已正确加载）。

为什么我没有看到 hello-world，即使我看到了统计数据（fps 等）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:30:52.423

**对我来说，在MapEditorViewController**添加这一行：

```
mainLayer.contentSize = CGSizeMake(2048, 1320); 
```

就在创建`mainLayer`解决了我的问题之后......

# java - 在 Java 中创建“文件系统”结构

> ID：15468840
> 
> 赞同：0
> 
> 时间：2013-03-18T02:21:03.013
> 
> 标签：java, data-structures, tree, filesystems

我正在 Google App Engine 中创建一个 Java Web 应用程序，它使用云存储提供商（即 Dropbox）的服务来获取有关用户文件的信息（以 JSON 格式），添加某种信息并将它们呈现给用户。

为此，我需要将文件和文件夹从保管箱“复制”到我的应用程序中的数据结构中。我希望在用户连接时将它们存储在内存中，然后我必须将它们与 JDO 一起存储。

我有我的类文件和文件夹（从我的类项目扩展），我想创建一种树结构来存储它们。我知道有 TreeSet 和 TreeMap 类，而且我可以创建一个自定义树，就像[**这里**](https://stackoverflow.com/questions/7278391/is-it-possible-to-create-a-tree-of-objects-in-java)解释的那样。

那么，您能说出最合适（也是最简单）的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:36:14.100

像这样的东西怎么样：

一个目录有一个包含在其中的目录/文件的 ArrayList。

File 有一个 byte[] 用于其数据。

您的 FileSystemTree 有一个根目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T02:41:32.560

我看不出有任何理由推出自己的文件和文件夹类。您可以重用现有的 java.io.File 对象来表示数据的树结构。现在您需要做的就是将文件数据附加到对象上。可能一个简单的 Map<File,String> 就可以了。加载用户数据时，创建一个 File 来表示数据并将 File 映射到内存中的数据。当你去存储数据时，遍历文件树结构并从地图加载到你的存储中。

# java - 会话 cookie 和持久性 cookie

> ID：15468845
> 
> 赞同：5
> 
> 时间：2013-03-18T02:21:20.443
> 
> 标签：java, php, asp.net, cookies, session-cookies

据我所知，会话 cookie 存储在浏览器的进程中（在内存中，而不是在硬盘中）。当用户关闭浏览器时，这些cookies被释放，我们无法再次获取这些cookies。所以这种cookies是用来保存session id的。

永久性 cookie 保存在硬盘上。他们一直活着，直到他们过期。通常，我们通过设置过期时间来创建这些 cookie。

所以我的疑问是：

1.  如果我们设置一个**没有过期时间**的cookie ，这个cookie会被当作session cookie吗？它会保存在浏览器的进程中吗？

2.  具有过期时间的 cookie 必须被视为持久性 cookie 吗？我们可以在浏览器进程中设置**一个过期时间的cookie吗？**

3.  我们可以让会话 cookie 不出现在浏览器的进程中吗？让它留在磁盘上？如果可以，如何编码，php/asp.net/java ??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:34:26.863

就我而言，我们从服务器发送回客户端的内容存储在用户的硬盘中，`persistent cookie`就像你所说的那样。存储您与网站进行的对话的`session cookie`一些信息，在您清除缓存或重新启动浏览器后，对话信息发生了变化。当您访问一个网站时，您不会将 session_id 发送到服务器，因为您还没有。然后服务端生成一个 session_id 并将会话信息存储在服务端，session_id 作为键值对，并将 session_id 返回给客户端，客户端存储在`persistent cookies`. 这是我眼中的过程。

# iphone - CoreGraphics 绘制椭圆的交点

> ID：15468848
> 
> 赞同：1
> 
> 时间：2013-03-18T02:22:14.130
> 
> 标签：iphone, ios, ipad

我正在编写一个 ViewController，它将在左侧有一个图例（标签和彩色框的垂直列表：Category1：黄色，Category2：gree，Category 3：蓝色等......）

用户可以点击列表中的一个项目，然后在 UIView 中绘制一个椭圆。我正在跟踪触摸事件，并且可以使用核心图形毫无问题地绘制椭圆。

下一步是绘制两组的交集。假设用户绘制了一个绿色椭圆和一个红色椭圆，它们有些重叠。我想将交叉点涂成黄色（红色+绿色=黄色），但对如何做到这一点没有任何想法。

我已经能够使用 < 1.0 的 alpha 通道来完成此操作，如下图所示： ![在此处输入图像描述](../Images/18756bf0fad904db7d68fb41d5cdcb20.png)

此外，我需要一种方法让用户点击 UIImage 中的一个点，然后检索该像素所在的所有集合的交集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:03:39.633

如果您使用 Core Graphics 绘制椭圆，您可以更改[混合模式](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGContext/Reference/reference.html#//apple_ref/doc/uid/TP30000950)以创建不同的外观。您想要的混合模式是添加，但 Core Graphics 似乎不支持它（可能是由于 Quantel 专利，尽管我认为该专利已经过期）。您可能可以通过使用 50% alpha 和使用普通模式来创建类似的效果。或者也许其他模式之一会提供看起来更好的东西。

如果这不起作用，您可以在 OpenGL 中使用[additive blending](http://www.gamedev.net/topic/347328-additive-blending-how-to-do-it/)来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:06:19.270

答案来自 user1118321，但我发布这个答案是为了有内联图片而不是内联回复。首先，我为维恩图选择了一组更好的颜色：

![在此处输入图像描述](../Images/5e017564a8a73b6913831fabccc38fad.png)

这些颜色相互重叠和隐藏。解决方案是使用 kCGBlendModeScreen：

![在此处输入图像描述](../Images/9ea59278918ea4caba079abc5432ebf0.png)

然而，这增加了原始颜色。解决方案是将背景设置为黑色：

![在此处输入图像描述](../Images/20406b626663852cb03ea7df579cf87f.png)

对于那些好奇或懒惰的代码，这里有一些代码。在 touchesBegan/Ended/Moved 事件中，我正在创建 SMVennObjects，然后在 drawRect 中绘制它们。SMVennObject 仅包含两个 CGPoints 和一个 UIColor（使用静态 int 按顺序分配）。

```
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect{        
    for(NSUInteger index = 0; index < self.vennObjects.count; index++){
        NSLog(@"drawing index %d", index);
        SMVennObject* vo = [self.vennObjects objectAtIndex:index];
        [self drawVennObject:vo context:UIGraphicsGetCurrentContext()];
    }
}

-(void)drawVennObject:(SMVennObject*)vo context:(CGContextRef)cgContext{
    if((vo.pointBegin.x == 0 && vo.pointBegin.y == 0) ||
       (vo.pointEnd.x == 0 && vo.pointEnd.y == 0)){
        return;
    }

    CGContextBeginPath(cgContext);
    CGContextSetLineWidth(cgContext, 2.0f);

    // Convert UIColor to raw values
    CGFloat red = 0.0;
    CGFloat green = 0.0;
    CGFloat blue = 0.0;
    CGFloat alpha = 0.0;
    [vo.color getRed:&red green:&green blue:&blue alpha:&alpha];
    alpha = 1.0;
    CGFloat color[4] = {red, green, blue, alpha};

    CGContextSetBlendMode(cgContext, kCGBlendModeScreen);

    CGRect r = CGRectMake(MIN(vo.pointBegin.x, vo.pointEnd.x),
                          MIN(vo.pointBegin.y, vo.pointEnd.y),
                          fabs(vo.pointBegin.x - vo.pointEnd.x),
                          fabs(vo.pointBegin.y - vo.pointEnd.y));

    // Draw ellipse
    CGContextSetFillColor(cgContext, color);
    CGContextFillEllipseInRect(cgContext, r);

    // Draw outline of ellipse
    CGContextSetStrokeColor(cgContext, color);
    CGContextStrokeEllipseInRect(cgContext, r);

} 
```

# php - Beanstalkd（通过 pheanstalk）允许重复的同时保留？

> ID：15468850
> 
> 赞同：3
> 
> 时间：2013-03-18T02:22:34.177
> 
> 标签：php, queue, beanstalkd, pheanstalk

试图将 Pheanstalk 包装在我的 PHP 作业基类中。我正在测试具有延迟功能的保留和保留，我发现我可以从我的基类的第二个实例中保留一个作业，而无需第一个实例释放作业或 TTR 超时。这是出乎意料的，因为我认为这正是作业队列应该防止的事情。这是第一个 put 和第一个保留的 beanstalkd 命令以及时间戳。最后我还做了一个 stats-job 请求：

```
01:40:15: Sending command: use QueuedCoreEvent
01:40:15: Got response: USING QueuedCoreEvent

01:40:15: Sending command: put 1024 0 300 233
a:4:{s:9:"eventName";s:21:"ReQueueJob_eawu7xr9bi";s:6:"params";a:2:{s:12:"InstanceName";s:21:"ReQueueJob_eawu7xr9bi";s:17:"aValueToIncrement";i:123456;}s:9:"behaviors";a:1:{i:0;s:22:"BehMCoreEventTestDummy";}s:12:"failureCount";i:0;}
01:40:15: Got response: INSERTED 10

01:40:15: Sending command: watch QueuedCoreEvent
01:40:15: Got response: WATCHING 2

01:40:15: Sending command: ignore default
01:40:15: Got response: WATCHING 1

01:40:15: Sending command: reserve-with-timeout 0
01:40:15: Got response: RESERVED 10 233
01:40:15: Data: a:4:{s:9:"eventName";s:21:"ReQueueJob_eawu7xr9bi";s:6:"params";a:2:{s:12:"InstanceName";s:21:"ReQueueJob_eawu7xr9bi";s:17:"aValueToIncrement";i:123456;}s:9:"behaviors";a:1:{i:0;s:22:"BehMCoreEventTestDummy";}s:12:"failureCount";i:0;}

01:40:15: Sending command: stats-job 10
01:40:15: Got response: OK 162
01:40:15: Data: ---
id: 10
tube: QueuedCoreEvent
state: reserved
pri: 1024
age: 0
delay: 0
ttr: 300
time-left: 299
file: 0
reserves: 1
timeouts: 0
releases: 0
buries: 0
kicks: 0 
```

到目前为止，一切都很好。现在我从我的基类的第二个实例做另一个储备，然后是另一个统计作业请求。请注意，时间戳在同一秒内，与我设置的 300 秒 TTR 相去甚远。另请注意，在第二个 stats-job 打印输出中，该作业有 2 个保留，其中 0 个超时和 0 个释放。

```
01:40:15: Sending command: watch QueuedCoreEvent
01:40:15: Got response: WATCHING 2

01:40:15: Sending command: ignore default
01:40:15: Got response: WATCHING 1

01:40:15: Sending command: reserve-with-timeout 0
01:40:15: Got response: RESERVED 10 233
01:40:15: Data: a:4:{s:9:"eventName";s:21:"ReQueueJob_eawu7xr9bi";s:6:"params";a:2:{s:12:"InstanceName";s:21:"ReQueueJob_eawu7xr9bi";s:17:"aValueToIncrement";i:123456;}s:9:"behaviors";a:1:{i:0;s:22:"BehMCoreEventTestDummy";}s:12:"failureCount";i:0;}

01:40:15: Sending command: stats-job 10
01:40:15: Got response: OK 162
01:40:15: Data: ---
id: 10
tube: QueuedCoreEvent
state: reserved
pri: 1024
age: 0
delay: 0
ttr: 300
time-left: 299
file: 0
reserves: 2
timeouts: 0
releases: 0
buries: 0
kicks: 0 
```

有人对我可能做错了什么有任何想法吗？我需要做些什么来告诉队列我希望作业一次只能由一名工作人员访问吗？一旦我将工作从队列中取出，我就会在 pheanstalk 实例上进行“取消设置”，我相信这会终止与 beanstalkd 的会话。这是否会导致 beanstalkd 决定工人已经死亡并自动释放工作而没有超时？我不确定 beanstalkd 有多少依赖会话状态来确定工作状态。我假设我可以不受惩罚地打开和关闭会话，并且工作 ID 是 beanstalkd 唯一关心的将工作操作联系在一起的东西，但这对我来说可能是愚蠢的......这是我第一次涉足工作队列.

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:55:40.620

我的猜测是您的第一个客户端实例在第二个保留作业之前关闭了到 beanstalkd 服务器的 TCP 套接字。

关闭 TCP 连接会隐式将作业释放回队列中。这些隐式释放（关闭连接、`quit`命令等）似乎不会增加`releases`计数器。

这是一个例子：

```
# Create a job, reserve it, close the connection:
pda@paulbookpro ~ > telnet 0 11300
Trying 0.0.0.0...
Connected to 0.
Escape character is '^]'.
put 0 0 600 5
hello
INSERTED 1
reserve
RESERVED 1 5
hello
^]
telnet> close
Connection closed.

# Reserve the job, stats-job shows two reserves, zero releases.
# Use 'quit' command to close connection.
pda@paulbookpro ~ > telnet 0 11300
Trying 0.0.0.0...
Connected to 0.
Escape character is '^]'.
reserve
RESERVED 1 5
hello
stats-job 1
OK 151
---
id: 1
tube: default
state: reserved
pri: 0
age: 33
delay: 0
ttr: 600
time-left: 593
file: 0
reserves: 2
timeouts: 0
releases: 0
buries: 0
kicks: 0

quit
Connection closed by foreign host.

# Reserve the job, stats-job still shows zero releases.
# Explicitly release the job, stats-job shows one release.
pda@paulbookpro ~ > telnet 0 11300
Trying 0.0.0.0...
Connected to 0.
Escape character is '^]'.
reserve
RESERVED 1 5
hello
stats-job 1
OK 151
---
id: 1
tube: default
state: reserved
pri: 0
age: 46
delay: 0
ttr: 600
time-left: 597
file: 0
reserves: 3
timeouts: 0
releases: 0
buries: 0
kicks: 0

release 1 0 0
RELEASED
stats-job 1
OK 146
---
id: 1
tube: default
state: ready
pri: 0
age: 68
delay: 0
ttr: 600
time-left: 0
file: 0
reserves: 3
timeouts: 0
releases: 1
buries: 0
kicks: 0

quit
Connection closed by foreign host. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-25T08:56:36.267

我遇到了同样的问题。问题出在对 beanstalkd 的多个连接中。

```
use Pheanstalk\Pheanstalk;

$pheanstalk = connect();
$pheanstalk->put(serialize([1]), 1, 0, 1800);

/** @var Job $job */
$job = $pheanstalk->reserve(10);
print_r($pheanstalk->statsJob($job->getId()));
// state reserved but
// only those connection that reserved a job can resolve/update it

$pheanstalk2 = connect();
print_r($pheanstalk->statsJob($job->getId()));
$pheanstalk2->delete($job);
// new connection opened in same process still cannot update the job 

// PHP Fatal error:  Uncaught Pheanstalk\Exception\ServerException: Cannot delete job 89: NOT_FOUND in /var/www/vendor/pda/pheanstalk/src/Command/DeleteCommand.php:45

function connect() {
    $pheanstalk = new Pheanstalk(
        'localhost',
        11300,
        5
    );
    return $pheanstalk;
} 
```

# - YUIDoc

> ID：15468857
> 
> 赞同：0
> 
> 时间：2013-03-18T02:24:02.623
> 
> 标签：

YUIDoc 是一个 Node.js 应用程序，它使用类似于 Javadoc 和 Doxygen 等工具的语法从源代码中的注释生成 API 文档。

# javascript - 在 Tempo.js - JavaScript 渲染引擎中，处理 JSON 数组中没有返回结果的最佳方法是什么？

> ID：15468859
> 
> 赞同：1
> 
> 时间：2013-03-18T02:24:03.777
> 
> 标签：javascript, json, tempo

使用 Tempo.js，如果 JSON 数组中没有项目，我希望能够呈现消息。据我所知，您不能在“数据模板”中放入任何内容，因为如果 JSON 数组中没有要循环的项目，甚至不会调用这些内容。我想这应该像下面的例子一样工作（????=一个神奇的命令，如果不存在行则显示）：

```
<div data-template-?????>Show this if there is no messages</div>

<div data-template>
    Display each message looped through
</div>

<div data-template-fallback>Sorry, JavaScript required!</div> 
```

我无法通过 Tempo.js 文档找到所有方法。我错过了吗？还是有另一种方法来实现这一目标？

我知道在渲染模板之前我可以在 JS 中执行此操作，但这会破坏将 JS 和 HTML 模板代码分开的意义，因此如果可能的话，我希望完全在模板中执行此操作。

任何想法将不胜感激。

# c++ - C++、WIN32、WndProc 到成员函数崩溃（访问冲突在 0x88）

> ID：15468862
> 
> 赞同：0
> 
> 时间：2013-03-18T02:24:45.477
> 
> 标签：c++, windows, winapi, visual-c++

我一直在编写一个 win32 包装类，但遇到了一个问题：因为该类的每个实例都有一个窗口，所以我使用 将`this`指针包含在用户信息空间中`SetWindowLongPtrW()`，允许我从静态`WndProc`函数。这很好用：我可以调用该函数。但是，当我尝试从消息处理程序调用另一个成员函数时，我在`0x00000088` It does compile 处遇到访问冲突。我发布了很多，因为老实说我不太确定问题出在哪里......请随意评论/批评我的代码。谢谢您的帮助！

这是标题：

```
#pragma once
#include <Windows.h>
#include "GlobalDefines.h"
#include "GraphicsWrapper.h"
#include "Keyboard.h"

namespace Startup
{

class GraphicsWrapper;

class WindowsWrapper
{
public:
    WindowsWrapper(HINSTANCE hInstance,
                   HINSTANCE hPrevInstance,
                   LPSTR lpCmdLine,
                   INT nCmdShow);
    ~WindowsWrapper();
    void EnterMsgLoop(GraphicsWrapper* Gfx);
    static LRESULT _stdcall WindowProc(HWND hWnd,
                                       UINT message,
                                       WPARAM wParam,
                                       LPARAM lParam);
    LRESULT _stdcall MessageHandler(HWND hWnd,
                                    UINT message,
                                    WPARAM wParam,
                                    LPARAM lParam);
    WNDCLASSEX WndClass;
    MSG Message;
    RECT Desktop;
    RECT Taskbar;
    RECT WindowCoordinates;
    LPSTR CommandLineArgs;
    INT CmdShow;
    HINSTANCE TheInstance;
    HWND WindowHandle;

    void InitializeWndClassEx();
    void InitializeWindowHandleHWND();
    void ShowWindowOnScreen();
    bool GetScreenRect(RECT & Desktop);
    bool GetTaskbarRect(RECT& rectTaskbar);
    bool GetWindowCoords(RECT& WindowCoordinates);
    int GetTaskbarSide();
    enum TaskbarSides
    {
        Top,
        Right,
        Bottom,
        Left
    };
    void SetFullScreen(bool Enable);
};

static IO::Keyboard * kbd;
} 
```

这是实现的相关部分。我会标记崩溃发生的位置。

```
void Startup::WindowsWrapper::InitializeWndClassEx()
{
    WndClass.hIcon = LoadIcon(TheInstance,(MAKEINTRESOURCE(IDI_MAIN_ICON) ) );
    WndClass.hIconSm = LoadIcon(TheInstance,(MAKEINTRESOURCE(IDI_MAIN_ICON) ) );
    WndClass.cbSize = sizeof(WNDCLASSEX);
    WndClass.style = CS_HREDRAW | CS_VREDRAW;
    WndClass.lpfnWndProc = WindowProc;
    WndClass.hInstance = TheInstance;
    WndClass.hCursor = LoadCursor(NULL, IDC_ARROW);
    WndClass.lpszClassName = L"WindowClassName";
    RegisterClassEx(&WndClass);
    SetWindowLongPtrW(WindowHandle, GWLP_USERDATA, (long)this);
}

void Startup::WindowsWrapper::SetFullScreen(bool Enable)
{

    long style = Enable ? WS_POPUP : WS_OVERLAPPED | WS_SYSMENU;
    static RECT windowRect = {};
    static bool needRect = true;

    if (needRect)
    {
        GetWindowRect(WindowHandle, &windowRect);
        needRect = false;
    }

    SetWindowLong(WindowHandle, GWL_STYLE, style);

    if (Enable)
    {
        SetWindowPos(WindowHandle, HWND_TOPMOST,
                     0,0,
                     GetSystemMetrics(SM_CXSCREEN),
                     GetSystemMetrics(SM_CYSCREEN),
                     SWP_SHOWWINDOW);
    }
    else
    {
        SetWindowPos(WindowHandle, 0,
                     windowRect.left,windowRect.top,
                     windowRect.right - windowRect.left,
                     windowRect.bottom - windowRect.top,
                     SWP_SHOWWINDOW);
    }
} 
```

和

```
LRESULT CALLBACK Startup::WindowsWrapper::WindowProc
(
    HWND hWnd,
    UINT message,
    WPARAM wParam,
    LPARAM lParam
)
{
    WindowsWrapper* ourObjectPtr = NULL;
    long thisObject = GetWindowLongW(hWnd, GWLP_USERDATA);

    ourObjectPtr = (WindowsWrapper *)( (void*)thisObject);

    long Result = ourObjectPtr->MessageHandler(hWnd, message, wParam, lParam);
    RET(Result);

}

LRESULT _stdcall Startup::WindowsWrapper::MessageHandler
(
    HWND hWnd,
    UINT message,
    WPARAM wParam,
    LPARAM lParam
)
{
    switch(message)
    {
        case WM_DESTROY:
            PostQuitMessage(0);
            break;
        case WM_KEYDOWN:
            switch(wParam)
        {
            case VK_ESCAPE:
                PostQuitMessage(0); //Works fine here, but...
                break;
            case VK_SPACE:
                this->SetFullScreen(false); //Crashes here w/ access violation
                break;
            case VK_SHIFT:
                this->SetFullScreen(true); //Or here, w/ the same error.
                break;
        }           
    }
    return DefWindowProc(hWnd, message, wParam, lParam);
} 
```

这是`createWindowEx`电话。再次感谢您的帮助。

```
void Startup::WindowsWrapper::InitializeWindowHandleHWND()
{
WindowHandle = CreateWindowEx(NULL,
    L"WindowClassName",
            L"WindowTitle"
    WS_OVERLAPPED | WS_SYSMENU,
    WindowCoordinates.left, WindowCoordinates.top,
    WindowCoordinates.right, WindowCoordinates.bottom,
    NULL, NULL, TheInstance,
    CommandLineArgs);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:13:12.430

我有一些来自我很久以前写的自定义对话框处理程序的代码，这可能对你有用。

同样的原则适用于窗口，但切换`WM_INITDIALOG`for`WM_CREATE`并替换`DWLP_USER`为`GWLP_USERDATA`. 回调的格式也有细微的不同。不过，您应该能够挽救几乎所有此功能。

```
LRESULT CALLBACK CDialog::DlgProc( HWND hWndDlg, UINT msg, WPARAM wParam, LPARAM lParam )
{
    CDialog* pWindow;

    if( msg == WM_INITDIALOG ) {
        SetWindowLongPtr( hWndDlg, DWLP_USER, (LONG_PTR)lParam );
        pWindow = reinterpret_cast<CDialog*>( lParam );
        pWindow->m_hWnd = hWndDlg;
    } else {
        pWindow = reinterpret_cast<CDialog*>( (LPARAM)GetWindowLongPtr( hWndDlg, DWLP_USER ) );
    }

    if( pWindow != NULL ) {
        LRESULT ret = pWindow->OnMessage( msg, wParam, lParam );
        if( msg == WM_NCDESTROY ) pWindow->m_hWnd = NULL;
    }

    return FALSE;
} 
```

# ruby-on-rails-3 - carriwave，克隆对象如何包含图像

> ID：15468864
> 
> 赞同：0
> 
> 时间：2013-03-18T02:25:33.950
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2, gem

首先我使用的是 db mysql，但后来我改用 postgres。

我编写了一些函数来将 db 从 sql 克隆到 postgres。而且我对 Image 表中的克隆数据库有疑问。

```
ImageClone.all.each do |p|
    img = Image.new()
    img.imageable_id = p.imageable_id
    img.imageable_type = p.imageable_type
    img.uploader = p.uploader
    puts p.uploader #=> 'testing_image.jpg'
    img.save
end

=> #<Image id: 1, imageable_id: 1, imageable_type: "ProductType", uploader: nil> 
```

如何设置图像 url = 'testing_image.jpg'。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:49:17.427

如果要将附件复制到新对象中，则需要告诉新对象读取原始附件，如下所示：

```
new_object.attachment_file = File.open(old_object.attachment_file.path) 
```

`attachment_file`在附件类中定义为已安装上传器的属性在哪里：

```
class Object < ActiveRecord::Base
  mount_uploader :attachment_file, AttachmentUploader 
```

现在您的新对象已将文件加载到内存中。您可以像任何其他附件一样保存、验证或丢弃它！

# r - 用值 0 到 1 缩放 R 中的数值矩阵

> ID：15468866
> 
> 赞同：18
> 
> 时间：2013-03-18T02:25:45.880
> 
> 标签：r, scale

这是我拥有的数字矩阵的摘录

```
 [1,]   30 -33.129487   3894754.1 -39.701738 -38.356477 -34.220534
 [2,]   29 -44.289487  -8217525.9 -44.801738 -47.946477 -41.020534
 [3,]   28 -48.439487  -4572815.9 -49.181738 -48.086477 -46.110534
 [4,]   27 -48.359487  -2454575.9 -42.031738 -43.706477 -43.900534
 [5,]   26 -38.919487  -2157535.9 -47.881738 -43.576477 -46.330534
 [6,]   25 -45.069487  -5122485.9 -47.831738 -47.156477 -42.860534
 [7,]   24 -46.207487  -2336325.9 -53.131738 -50.576477 -50.410534
 [8,]   23 -51.127487  -2637685.9 -43.121738 -47.336477 -47.040534
 [9,]   22 -45.645487   3700424.1 -56.151738 -47.396477 -50.720534
[10,]   21 -56.739487   1572594.1 -49.831738 -54.386577 -52.470534
[11,]   20 -46.319487    642214.1 -39.631738 -44.406577 -41.490534 
```

我现在要做的是将每列的值缩放为从 0 到 1 的值。

我尝试使用`scale()`矩阵上的函数（默认参数）来完成此操作，我得到了这个

```
[1,] -0.88123100  0.53812440 -1.05963281 -1.031191482 -0.92872324
 [2,] -1.17808251 -1.13538649 -1.19575096 -1.289013031 -1.11327085
 [3,] -1.28847084 -0.63180980 -1.31265244 -1.292776849 -1.25141017
 [4,] -1.28634287 -0.33914007 -1.12182012 -1.175023107 -1.19143220
 [5,] -1.03524267 -0.29809911 -1.27795565 -1.171528133 -1.25738083
 [6,] -1.19883019 -0.70775576 -1.27662116 -1.267774342 -1.16320727
 [7,] -1.22910054 -0.32280189 -1.41807728 -1.359719044 -1.36810940
 [8,] -1.35997055 -0.36443973 -1.15091204 -1.272613537 -1.27664977
 [9,] -1.21415156  0.51127451 -1.49868058 -1.274226602 -1.37652260
[10,] -1.50924749  0.21727976 -1.33000083 -1.462151358 -1.42401647
[11,] -1.23207969  0.08873245 -1.05776452 -1.193844887 -1.12602635 
```

这已经接近我想要的，但 0:1 的值甚至更好。我阅读了 的帮助手册`scale()`，但我真的不明白我该怎么做。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-18T02:29:59.730

尝试以下，这似乎很简单：

```
## Data to make a minimal reproducible example
m <- matrix(rnorm(9), ncol=3)

## Rescale each column to range between 0 and 1
apply(m, MARGIN = 2, FUN = function(X) (X - min(X))/diff(range(X)))
#           [,1]      [,2]      [,3]
# [1,] 0.0000000 0.0000000 0.5220198
# [2,] 0.6239273 1.0000000 0.0000000
# [3,] 1.0000000 0.9253893 1.0000000 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-18T02:41:09.783

如果您仍然要使用`scale`：

```
maxs <- apply(a, 2, max)
mins <- apply(a, 2, min)
scale(a, center = mins, scale = maxs - mins) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-13T20:03:18.337

安装`clusterSim`包并运行以下命令：

```
normX = data.Normalization(x,type="n4"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-08T15:38:46.773

不是最漂亮的，但这只是完成了工作，因为我需要在数据框中执行此操作。

```
column_zero_one_range_scale  <- function(
input_df,
columns_to_scale #columns in input_df to scale, must be numeric
){

input_df_replace <- input_df

columncount <- length(columns_to_scale)
for(i in 1:columncount){

columnnum <- columns_to_scale[i]

if(class(input_df[,columnnum]) !='numeric' & class(input_df[,columnnum])!='integer')
  {print(paste('Column name ',colnames(input_df)[columnnum],' not an integer or numeric, will skip',sep='')) }

if(class(input_df[,columnnum]) %in% c('numeric','integer'))
{
  vec <- input_df[,columnnum]
  rangevec <- max(vec,na.rm=T)-min(vec,na.rm=T)
  vec1 <- vec - min(vec,na.rm=T)
  vec2 <- vec1/rangevec
}
input_df_replace[,columnnum] <- vec2
colnames(input_df_replace)[columnnum] <- paste(colnames(input_df)[columnnum],'_scaled')

}

return(input_df_replace)

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-22T18:49:06.037

`scales`包有一个名为`rescale`：

```
set.seed(2020)

x <- runif(5, 100, 150)
scales::rescale(x)
#1.0000000 0.5053362 0.9443995 0.6671695 0.0000000 
```

# javascript - 为什么这个 event.url 起作用而不是这个

> ID：15468868
> 
> 赞同：1
> 
> 时间：2013-03-18T02:25:54.917
> 
> 标签：javascript, html, browser, cordova

我正在使用`cordova phonegap 2.5.0` 我很难`URL`从新的`inAppBrowser`. 出于某种原因，只有这段代码有效——

```
client_browser = window.open(authorize_url, '_blank', 'location=yes');

function iabLoadStop(event) {
    alert(event.type + ' - ' + event.url);
}

client_browser.addEventListener('loadstop', iabLoadStop); 
```

上面的代码完美运行。然而，我们将看到的代码每次都返回 undefined！我想不通为什么？有人可以解释一下吗？

```
client_browser.addEventListener('loadstop', function() { alert('stop: ' + event.url); }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T03:21:49.833

您的内联函数应该接受参数`event`

```
client_browser.addEventListener('loadstop', function(event) { alert('stop: ' + event.url); }); 
```

# opengl - 如何创建具有负值的 3d 纹理并从着色器中读取它

> ID：15468869
> 
> 赞同：1
> 
> 时间：2013-03-18T02:25:58.740
> 
> 标签：opengl, byte, textures, shader, jogl

我编写了一个体积渲染程序，可以将一些 2d 图像转换为用户可以旋转的 3d 体积。我需要通过在该点周围的每个方向上取梯度来计算 3d 纹理中每个点的法线（用于照明）。

计算法线需要在片段着色器中进行六个额外的纹理访问。如果没有这些额外的纹理访问，程序会快得多，所以我试图以字节为单位预先计算每个方向 (x,y,z) 的梯度，并将其存储在原始纹理的 BGA 通道中。当我在 CPU 上测试时，我的字节似乎包含正确的值，但是当我到达着色器时，它看起来不对。很难从着色器中判断为什么它会失败，我认为这是因为一些渐变值是负数。但是，当我将纹理类型指定为 GL_BYTE（而不是 GL_UNSIGNED_BYTE）时，它仍然是错误的，这会破坏原始纹理的外观。仅通过将数据呈现为颜色，我无法准确判断出了什么问题。将负值放入纹理的正确方法是什么？当我在片段着色器中读取它时，我怎么知道值是负数？

以下代码显示了我如何运行该操作以从字节数组 (byte[] all) 计算梯度，然后将其转换为作为 3d 纹理读入的字节缓冲区 (byteBuffer bb)。函数 'toLoc(x,y,z,w,h,l)' 只返回 (x+w*(y+z*h))*4)——它将 3d 下标转换为 1d 索引。图像是灰度的，所以我丢弃了 gba，只使用 r 通道来保存原始值。其余通道 (gba) 存储梯度。

```
 int pixelDiffxy=5;
    int pixelDiffz=1;

    int count=0;  
    Float r=0f;
    byte t=r.byteValue();

    for(int i=0;i<w;i++){
        for(int j=0;j<h;j++){
            for(int k=0;k<l;k++){
                count+=4;
                if(i<pixelDiffxy || i>=w-pixelDiffxy || j<pixelDiffxy || j>=h-pixelDiffxy || k<pixelDiffz || k>=l-pixelDiffz){
                    //set these all to zero since they are out of bounds
                    all[toLoc(i,j,k,w,h,l)+1]=t;//green=0
                    all[toLoc(i,j,k,w,h,l)+2]=t;//blue=0
                    all[toLoc(i,j,k,w,h,l)+3]=t;//alpha=0
                }
                else{

                    int ri=(int)all[toLoc(i,j,k,w,h,l)+0] & 0xff;

                    //find the values on the sides of this pixel in each direction (use red channel)
                    int xgrad1=(all[toLoc(i-pixelDiffxy,j,k,w,h,l)])& 0xff;
                    int xgrad2=(all[toLoc(i+pixelDiffxy,j,k,w,h,l)])& 0xff;

                    int ygrad1=(all[toLoc(i,j-pixelDiffxy,k,w,h,l)])& 0xff;
                    int ygrad2=(all[toLoc(i,j+pixelDiffxy,k,w,h,l)])& 0xff;

                    int zgrad1=(all[toLoc(i,j,k-pixelDiffz,w,h,l)])& 0xff;
                    int zgrad2=(all[toLoc(i,j,k+pixelDiffz,w,h,l)])& 0xff;

                    //find the difference between the values on each side and divide by the distance between them
                    int xgrad=(xgrad1-xgrad2)/(2*pixelDiffxy);
                    int ygrad=(ygrad1-ygrad2)/(2*pixelDiffxy);
                    int zgrad=(zgrad1-zgrad2)/(2*pixelDiffz);

                    Vec3f grad=new Vec3f(xgrad,ygrad,zgrad);

                    Integer xg=(int) (grad.x);
                    Integer yg=(int) (grad.y);
                    Integer zg=(int) (grad.z);

                    //System.out.println("gs are: "+xg +", "+yg+", "+zg);

                    byte gby= (byte) (xg.byteValue());//green channel
                    byte bby= (byte) (yg.byteValue());//blue channel
                    byte aby= (byte) (zg.byteValue());//alpha channel

                    //System.out.println("gba is: "+(int)gby +", "+(int)bby+", "+(int)aby);
                    all[toLoc(i,j,k,w,h,l)+1]=gby;//green
                    all[toLoc(i,j,k,w,h,l)+2]=bby;//blue
                    all[toLoc(i,j,k,w,h,l)+3]=aby;//alpha
                }
            }
        }
    }

ByteBuffer bb=ByteBuffer.wrap(all);
    final GL gl = drawable.getGL();
    final GL2 gl2 = gl.getGL2();
    final int[] bindLocation = new int[1];
    gl.glGenTextures(1, bindLocation, 0);
    gl2.glBindTexture(GL2.GL_TEXTURE_3D, bindLocation[0]);
    gl2.glPixelStorei(GL.GL_UNPACK_ALIGNMENT, 1);//-byte alignment
    gl2.glTexParameteri(GL2.GL_TEXTURE_3D, GL.GL_TEXTURE_WRAP_S, GL2.GL_CLAMP);
    gl2.glTexParameteri(GL2.GL_TEXTURE_3D, GL.GL_TEXTURE_WRAP_T, GL2.GL_CLAMP);
    gl2.glTexParameteri(GL2.GL_TEXTURE_3D, GL2.GL_TEXTURE_WRAP_R, GL2.GL_CLAMP);
    gl2.glTexParameteri(GL2.GL_TEXTURE_3D, GL.GL_TEXTURE_MAG_FILTER, GL.GL_LINEAR);
    gl2.glTexParameteri(GL2.GL_TEXTURE_3D, GL.GL_TEXTURE_MIN_FILTER, GL.GL_LINEAR);
    gl2.glTexEnvf(GL2.GL_TEXTURE_ENV, GL2.GL_TEXTURE_ENV_MODE, GL.GL_REPLACE);
    gl2.glTexImage3D( GL2.GL_TEXTURE_3D, 0,GL.GL_RGBA,
            w, h, l, 0,
            GL.GL_RGBA, GL.GL_UNSIGNED_BYTE, bb );//GL_UNSIGNED_BYTE 
```

有没有更好的方法将大量签名数据放入着色器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T03:18:15.457

```
gl2.glTexImage3D( GL2.GL_TEXTURE_3D, 0,GL.GL_RGBA,
        w, h, l, 0, GL.GL_RGBA, GL.GL_UNSIGNED_BYTE, bb ); 
```

好吧，有两种方法可以做到这一点，这取决于你想在着色器中做多少工作，以及你想限制什么 OpenGL 版本。

The version that requires more shader work also requires a bit more out of your code. See, what you want to do is have your shader take unsigned bytes, then reinterpret them as signed bytes.

The way that this would typically be done is to pass unsigned normalized bytes (as you're doing), which produces floating-point values on the [0, 1] range, then simply expand that range by multiplying by 2 and subtracting 1, yielding numbers on the [-1, 1] range. This means that your uploading code needs to take it's [-128, 127] signed bytes and convert them into [0, 255] unsigned bytes by adding 128 to them.

I have no idea how to do this in *Java*, which does not appear to have an unsigned byte type at all. You can't just pass a 2's complement byte and expect it to work in the shader; that's not going to happen. The byte value -128 would map to the floating-point value 1, which isn't helpful.

If you can manage to convert the data properly as I described above, then your shader access would have to unpack from the [0, 1] range to the [-1, 1] range.

If you have access to GL 3.x, then you can do this quite easily, with no shader changes:

```
gl2.glTexImage3D( GL2.GL_TEXTURE_3D, 0,GL.GL_RGBA8_SNORM,
        w, h, l, 0, GL.GL_RGBA, GL.GL_BYTE, bb ); 
```

The `_SNORM` in the image format means that it is a signed, normalized format. So your bytes on the range [-128, 127] will be mapped to floats on the range [-1, 1]. Exactly what you want.

# asp.net-mvc-3 - 当使用 enctype="multipart/form-data" 表单不发布

> ID：15468872
> 
> 赞同：1
> 
> 时间：2013-03-18T02:26:45.873
> 
> 标签：asp.net-mvc-3, c#-4.0, asp.net-mvc-4

我正在开发 ASP.Net MVC 4 上的应用程序，并尝试以表单上传图像。我遇到的问题是，当表单发布时，如果它`<input type="file"...`是空的（意味着我没有选择文件），表单发布就很好，一切正常。但是，当我选择一个文件时，表单只是坐在那里，什么也不做。

起初我以为上传需要一段时间，但我已经离开了很长一段时间（文件大小为 7kb），什么也没有。调试器甚至在操作开始时也没有命中断点。我很茫然，因为我对这个平台很陌生，而且每天都在学习。请在下面找到所有相关代码：

风景：

```
 @using (Html.BeginForm("StaffInformation", "Manager", FormMethod.Post, new { @class = "form-horizontal", enctype = "multipart/form-data"}))
            {
                @Html.AntiForgeryToken()
                @Html.ValidationSummary(true)
                <div class="control-group">
                    @Html.LabelFor(model => model.firstName, new { @class = "control-label" })
                    <div class="controls">
                        @Html.TextBoxFor(model => model.firstName, new { @class = "span12" })
                        @Html.ValidationMessageFor(model => model.firstName)
                    </div>
                </div>

                <div class="control-group">
                    @Html.LabelFor(model => model.lastName, new { @class = "control-label" })
                    <div class="controls">
                        @Html.TextBoxFor(model => model.lastName, new { @class = "span12" })
                        @Html.ValidationMessageFor(model => model.lastName)
                    </div>
                </div>

                <div class="control-group">
                    Staff Photo:
                    <div class="controls">
                        @if (Model.staffImage == null)
                        {
                            @:None
                        }else{
                        <img width="150" height="150" src="@Url.Action("GetImage", "Manager", new { Model.staffProfileID })" /><br />
                        }
                        <input type="file" id="staffImage" name="staffImage" data-provide="fileinput">
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Save changes</button>
                    <a href="@Url.Action("dashboard", "manager")" class="btn" type="reset" >Cancel</a>
                </div>
            } 
```

那个行动：

```
 public ActionResult StaffInformation(StaffInformationViewModel model, HttpPostedFileBase staffImage)
    {
    if (ModelState.IsValid)   //This is where the breakpoint is
        {
            if (staffImage != null) {
                model.imageMimeType = staffImage.ContentType;
                model.staffImage = new byte[staffImage.ContentLength];
                staffImage.InputStream.Read(model.staffImage, 0, staffImage.ContentLength);
            }

            using (var repo = new CompanyInformationRepository(new UniteOfWorkCompanies()))
            {
                var company = repo.FindCompany(User.Identity.Name);

                repo.AddOrUpdateStaff(model, company);
            }

            return RedirectToAction("ManageStaff");
        }
    } 
```

我真的不知道发生了什么，我使用它的原因仅仅`enctype = "multipart/form-data"`是因为我正在阅读 Adam Freeman 的“Pro ASP.NET MVC 4”，他们说没有它就无法工作。就像我说的，我很新，需要我能得到的所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T02:55:35.213

您可以尝试将其`HttpPostedFileBase staffImage`作为 ViewModel ( `StaffInformationViewModel`) 的一部分 - 也是的，您需要将 保留`enctype = "multipart/form-data"`在表单标签中：

```
public class StaffInformationViewModel
{
    // your other properties here ...

    [Required]
    public HttpPostedFileBase StaffImage { get; set; }
} 
```

然后在视图中：

```
@Html.TextBoxFor(model => model.StaffImage, new { type = "file" }) 
```

然后在控制器中：

```
 public ActionResult StaffInformation(StaffInformationViewModel model)
    {
        if (ModelState.IsValid)
        {
            if (model.StaffImage != null)
            {
                // awesome
            }
            // ... more awesome
        }
    } 
```

我希望这有帮助。如果您需要对此进行更多说明，请告诉我...

# ios5 - ios如何使用WSDL2ObjC从webservice获取数据

> ID：15468873
> 
> 赞同：1
> 
> 时间：2013-03-18T02:26:47.640
> 
> 标签：ios5, wsdl, xcode4.5, wsdl2objc

我无法在 iPhone 中显示数据。请指教。

**获取数据.h**

```
 @interface GetDataFromPhoneService_GetPhoneInfoResponse : NSObject {

        /* elements */
        tns2_GetPhoneInfoModel * GetPhoneInfoReturn;
        /* attributes */
            }

    /* elements */
    @property (retain) tns2_GetPhoneInfoModel * GetPhoneInfoReturn;
    /* attributes */
    - (NSDictionary *)attributes;
    @end
    @interface GetDataFromPhoneService_GetPhoneInfo : NSObject {

        /* elements */
        NSString * phoneNo;
        /* attributes */
    }

    @property (retain) NSString * phoneNo;

    @end

    @interface GetDataFromPhoneSoapBinding_GetPhoneInfo :         GetDataFromPhoneSoapBindingOperation {
        GetDataFromPhoneService_GetPhoneInfo * parameters;
    }
    @property (retain) GetDataFromPhoneService_GetPhoneInfo * parameters; 
```

**获取数据.m**

```
 @implementation GetDataFromPhoneService_GetPhoneInfo
    - (id)init
    {
        if((self = [super init])) {
            phoneNo = 0;
        }

        return self;
    }
    - (void)dealloc
    {
        if(phoneNo != nil) [phoneNo release];

        [super dealloc];
    }
    - (NSString *)nsPrefix
    {
        return @"GetDataFromPhoneService";
    } 
```

获取视图.m

```
 - (IBAction)buttonClick:(id)sender {
        GetDataFromPhoneSoapBinding *binding = [[GetDataFromPhoneService                 GetDataFromPhoneSoapBinding] initWithAddress:@"http://..."];
        binding.logXMLInOut = YES;  // to get logging to the console.

     GetDataFromPhoneService_GetPhoneInfo *request =         [[GetDataFromPhoneService_GetPhoneInfo alloc] init];
        request.phoneNo = @"66875920808";  // insert your phone number here.

        GetDataFromPhoneSoapBindingResponse *resp = [binding GetPhoneInfoUsingParameters:request];
        for (id mine in resp.bodyParts)
        {
            if ([mine isKindOfClass:[GetDataFromPhoneService_GetPhoneInfoResponse class]])
            {

                greeting.text = [mine GetPhoneInfoReturn];

            }
        } 
```

这是数据。

```
 <p372:GetPhoneInfoResponse xmlns:p372="http://Bean.crew.cw.tg">
     <GetPhoneInfoReturn>
        <zimPersno>40347</zimPersno>
        <firstname>WANCHART</firstname>
        <lastname>SANGSUK</lastname>
     </GetPhoneInfoReturn>
  </p372:GetPhoneInfoResponse> 
```

# c++ - 是在用户空间中实现的 C++11 互斥锁吗？

> ID：15468874
> 
> 赞同：2
> 
> 时间：2013-03-18T02:27:04.490
> 
> 标签：c++, c++11, kernel, mutex

我有兴趣知道该标准是否提到了有关在 C++11 中、在用户空间与内核空间中实现互斥锁的任何内容。

可能是实现完全是特定于平台的。

任何提到实施的有用指针/文档都会很棒。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-18T02:32:14.757

C++ 标准没有“用户空间”、“内核空间”或任何类似的概念。具体*如何* `std::mutex`实现取决于您的标准库实现；该标准只定义了*明显的行为*。

# asp.net - 如何过滤asp中继器内的下拉列表？

> ID：15468880
> 
> 赞同：0
> 
> 时间：2013-03-18T02:28:04.373
> 
> 标签：asp.net, repeater

我想过滤 Repeater 控件中的组合框。

我有这个下拉列表：

```
<asp:DropDownList ID="ddAcademicDegree" runat="server" Width="256px"   
                            SelectedValue ='<%# Bind("EdLevel") %>' CssClass="GeneralFont" DataTextField="Description" DataValueField="IDNo" AutoPostBack="True" DataSourceID="SqlDataSource2">
                        </asp:DropDownList> 
```

然后我想根据您在第一个下拉列表中选择的内容过滤下一个下拉列表

```
<asp:DropDownList ID="ddDegree" runat="server" Width="256px" SelectedValue ='<%# Bind("DegreeID") %>' CssClass="GeneralFont" DataTextField="Description" DataValueField="IDNo" DataSourceID="SqlDataSource3"> </asp:DropDownList> 
```

我有这个查询如何使用第一个下拉列表过滤第二个下拉列表？

```
<asp:SqlDataSource ID="SqlDataSource3" runat="server" 
            ConnectionString="<%$ ConnectionStrings:HRIS_ConnectionString %>" 
            SelectCommand="select 0 as IDNo,'' as Description union all select code as IDNo,Description from degree order by idno" 
            ProviderName="<%$ ConnectionStrings:HRIS_ConnectionString.ProviderName %>"> </asp:SqlDataSource> 
```

这是整个代码

```
<asp:Repeater ID="rptrEduc" runat="server" 
                        OnItemCreated="rptrEduc_ItemCreated"  EnableViewState="False" 
                        onitemdatabound="rptrEduc_ItemDataBound" onitemcommand="rptrEduc_ItemCommand" 
                        >
                    <ItemTemplate>
                        <table width ="100%" cellpadding="0" cellspacing="0" align="center">
                          <tr>
                          <td width="20px"><asp:ImageButton ID="imgEdDelete" runat="server" onclick="imgEdDelete_Click" ImageUrl="~/IMAGES/delete_16x16.gif" OnClientClick='return confirm("Delete this record?");' /></td>
                    <td style="text-align: left">
                        Education:</td>
                    <td>
                       <asp:DropDownList ID="ddAcademicDegree" runat="server" Width="256px"   
                            SelectedValue ='<%# Bind("EdLevel") %>' CssClass="GeneralFont" DataTextField="Description" DataValueField="IDNo" AutoPostBack="True" PropertyName="SelectedValue" DataSourceID="SqlDataSource2">

                        </asp:DropDownList>
                    </td>
                    <td>
                        Area of Study (Major)</td>
                    <td>
                        <asp:TextBox ID="txtMajor" runat="server" 
                            Width="260px" CssClass="GeneralFontText" 
                            Text='<%# Bind("Major") %>'></asp:TextBox>
                    </td>
                </tr>
                          <tr>
                          <td></td>
                    <td style="text-align: left">

                        </td>
                    <td> 
```

<%-- SelectedValue ='<%# Bind("DegreeID") %>' CssClass="GeneralFont" DataTextField="Description" DataValueField="IDNo" >--%> ' CssClass="GeneralFont" DataTextField="Description" DataValueField="IDNo" DataSourceID="SqlDataSource3"> <%-- SelectedValue ='<%# Bind("Degree") %>' CssClass="GeneralFont">
硕士学士 --%> 重点领域（次要）'> *机构名称：'>* 毕业年份：'CssClass="GeneralFontText">

# jquery - Jquery 选择器——如何选择当前元素的指定父项中的第一个

> ID：15468881
> 
> 赞同：2
> 
> 时间：2013-03-18T02:28:28.783
> 
> 标签：jquery

大家好，我是jquery的新手，基本的用法我都能用jquery。但我并不专业。我坚持这个问题。请帮我复习一下。谢谢。

假设您有这样的源 html 代码。

```
...
    <fieldset class="ui-helper-reset">
    <ul>
        <li>
            <label>Select Layout Template:</label>
            <span class="spanSelectedLayout"></span>
        </li>
        <li>
            <ol class="layoutThumbneil ui-selectable">
                <li class="ui-state-default ui-selectee">
                    <img class="ui-selectee" src="designer/templates/thumbnails/NullTemplate.PNG" alt="">
                </li>
                <li class="ui-state-default ui-selectee ui-selected">
                    <img class="ui-selectee" src="designer/templates/thumbnails/2RowsTemplate.PNG" alt="">
                </li>
                <li class="ui-state-default ui-selectee">
                    <img class="ui-selectee" src="designer/templates/thumbnails/2ColsTemplate.PNG" alt="">
                </li>
            </ol>
        </li>
    </ul>
    </fieldset>
... 
```

如果当前元素是 中的一个`li`，`ol`并且我想选择该`ul`元素，假设它表示当前元素的第一个指定父级。基本上，我可以像下面这样。

```
$(".layoutThumbneil li").bind("click",function(){alert($(this).parent().parent().parent().html());}) 
```

但是这段代码看起来很冗长，所以我的问题是有没有我不知道的简单方法或其他选择器语法而不是`parent()`用来轻松实现它？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T02:33:05.523

您可以使用[`.closest()`](http://api.jquery.com/closest/)方法：

```
$(".layoutThumbneil li").on("click",function() {
     var html = $(this).closest('ul').html();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T02:33:18.363

您可以与选择器一起使用，但如果它们很重要，[`parents`](http://api.jquery.com/parents/)您应该给`id`元素。`ul`

将 function() { .. } 更改为

```
function(){ alert($(this).parents('ul') .. )} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T02:34:23.930

您可以尝试这样做（它将选择父 ul 元素）：

```
$(".LayoutThumbneil li").bind("click", function() {
    alert($(this).parents("ul").html());
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T02:35:05.323

选择器应该`.layoutThumbneil li`而不是`.LayoutThumbneil li`给定您的 HTML。

尝试：

```
$(".layoutThumbneil li").bind("click", function () {
    console.log($(this).closest("ul").html());
}); 
```

[在这里](http://jsfiddle.net/KkJ4P/)提琴

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-18T02:35:08.067

尝试使用 jQuery[`.parents()`](http://api.jquery.com/parents/)来上树，同时使用 jQuery[`.find()`](http://api.jquery.com/find/)来回树。

```
$(".layoutThumbneil li").bind("click", function() {
  var parent = $(this).parents('.ui-helper-reset');
  var first_ul = parent.find('> ul');
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-18T02:37:28.013

像这样使用最近的..

```
$(".LayoutThumbneil li").bind("click",function(){
    alert(
        $(this).closest('ol') // this is to check if it has a parent ol
          .closest('ul').html()
    );
}) 
```

# mysql - MySQL 查询只选择不匹配的对

> ID：15468883
> 
> 赞同：0
> 
> 时间：2013-03-18T02:28:40.893
> 
> 标签：mysql

我不知道这是否可能，但我试图`SELECT`不匹配列，假设我有一个包含列的表：

`id`, `user_name`, `color1`, `color2`, `fruit1`,`fruit2`

我只想在`color1`和`color2`OR 时按 id 选择一行！`fruit1`,`fruit2`现在彼此相等。如果`color1`== `color2`OR `fruit1`==`fruit2`查询应该返回 0 行。如果`color1`<>`color2`和`fruit1`==`fruit2`该行应该只返回`id`, `user_name`, `color1`,`color2`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:30:44.033

我认为这应该很简单。

```
SELECT  id, user_name, color1, color2
FROM    tableName
WHERE   (color1 <> color2) AND (fruit1 = fruit2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T02:31:52.173

最简单的方法是扩展逻辑并包括两种情况：

```
SELECT id, user_name, color1, color2, fruit1, fruit2
FROM myTable
WHERE (color1 <> color2 AND fruit1 = fruit2)
OR (color1 = color2 AND fruit1 <> fruit2) 
```

根据您的评论，您将不得不尝试一些更复杂的事情：

```
SELECT nonmatching.id, user_name, prop_name, value1, value2
FROM
(
    SELECT id, user_name, prop_name, value1, value2
    FROM
    (
        SELECT id, user_name, 'color' AS prop_name, 
            color1 AS value1, color2 AS value2
        FROM myTable
        UNION ALL
        SELECT id, user_name, 'fruit' AS prop_name, 
            fruit1 AS value1, fruit2 AS value2
        FROM myTable
    ) propertyExpanded
    WHERE value1 <> value2
) nonmatching 
```

例如，如果您只想返回一个不匹配的行，您可以添加以下内容：

```
INNER JOIN
(
    SELECT id, COUNT(1) AS mismatchCount = 1
    FROM
    (
        SELECT id, user_name, 'color' AS prop_name, 
            color1 AS value1, color2 AS value2
        FROM myTable
        UNION ALL
        SELECT id, user_name, 'fruit' AS prop_name, 
            fruit1 AS value1, fruit2 AS value2
        FROM myTable
    ) propertyExpanded
    WHERE value1 <> value2
    GROUP BY id
) nonmatchingCount ON nonmatching.id = nonmatchingCount.id
WHERE nonmatchingCount.mismatchCount = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T02:32:41.843

这应该有效：

```
SELECT id,
       user_name,
       color1,
       color2
FROM mytable
WHERE (color1 = color2) != (fruit1 = fruit2) 
```

这里的技巧是我将比较结果作为布尔值进行比较。

这种方法可以推广到支持两种以上的精确单一数据匹配。也就是说，您可以通过计算匹配项来使用类似的技巧：

```
SELECT * FROM mytable
WHERE (color1 = color2)
    + (fruit1 = fruit2)
    + ...
    + (kind1  = kind2)
    = 1 
```

在此查询中，布尔值`FALSE`or`TRUE`被隐式​​转换为`0`or `1`。

因此，此查询仅在**恰好**匹配一种类型时才会产生行。

# javascript - 删除 JS 文件并包含另一个

> ID：15468886
> 
> 赞同：2
> 
> 时间：2013-03-18T02:29:36.110
> 
> 标签：javascript, html, offline, offlineapps

我开始使用离线网络应用程序。我有一个小测试应用程序，它在离线时使用 localstorage 制作一个简单的 abm，我的想法是，当它在线时，应用程序使用 php 作为后端语言，并在连接恢复时同步 localstorage 和 php。

现在，用于将数据保存到 localstorage 的函数与用于将数据发送到 php 的函数不同。

是否可以从动态上卸载一个 JS 文件（让我们称之为offline.js）并加载另一个（online.js）？

还是女巫会是更好的方法？我应该在一个文件中包含所有功能并动态更改侦听器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T02:38:49.993

如果浏览器在线，您应该使用函数包装器启动 IF 条件检查。

前任：

```
function SaveData(data){
    if(BrowserIsOnline)
        SaveDataToPHPServer(data);
    else
        SaveDataToLocalStorage(data); 
```

并以不同的方式处理每个 Function 主体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T02:44:12.453

您无法卸载 javascript 文件。一旦加载，它将始终被加载。您可能需要重新考虑您的设计。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T02:42:54.070

在现代浏览器中，您可以使用 navigator.onLine 来检查连接。这是规范：[http ://www.w3.org/TR/offline-webapps/](http://www.w3.org/TR/offline-webapps/)

```
var connection = navigator.onLine;

if( connection ){
    //Do AJAX
}else{
    //Do Local Storage.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T18:26:02.330

这是一个可能的解决方案，您可能会发现它很有用...

拥有所有逻辑所在的函数命名空间，例如：

```
this.fn = {};
this.fn['save'] = function() {};
this.fn['load'] = function() {}; 
```

当您的事件被触发时，您只需使用适当的函数，如下所示：

```
var fn = this.fn['load']; 
```

或者

```
var fn = this.fn['save']; 
```

然后像往常一样使用“fn”。

您甚至可以按模块分隔函数，例如“online.js”和“offline.js”，其中每个模块具有相同的函数名称，但绑定到自己的命名空间。

当需要重新链接功能时，您可以简单地执行以下操作：

```
this.fn['load'] = offlineModule.fn['load']; 
```

如果你的所有函数都有一个名称（即：'load'、'save'），你可以简单地将它放在一个循环中。

以上避免了所有有时会令人讨厌的“if/else”条件分支，而是尝试使用一种模式。

但无论如何，这是一个很好的问题，因为我正在开始一个项目的规划阶段，我需要类似于您在问题中描述的内容......到目前为止，这是我拥有的最佳解决方案。基本上受到 Linux 中 SO 的动态链接的启发（有点）。

# android - 如何以编程方式添加自定义视图？

> ID：15468890
> 
> 赞同：2
> 
> 时间：2013-03-18T02:30:02.073
> 
> 标签：android, android-widget

我创建自定义视图并以编程方式添加到 LinearLayout 和以编程方式添加的 XML BUT 视图中，如果在 XML onDraw 中添加的视图被调用，则不会调用 onDraw(Canvas canv) {..} 为什么？如何以编程方式添加自定义视图？如果我覆盖 onMeasure 方法，onDraw 不会调用

看法：

```
package com.android.timetable;

import android.content.Context;
import android.graphics.Canvas;
import android.util.AttributeSet;
import android.view.View;

public class TestView extends View {
    public TestView(Context context) {
        super(context);
    }

    public TestView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
    }
} 
```

活动：

```
package com.android.timetable;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.ViewGroup;
import android.widget.LinearLayout;

public class testActivity extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.test);
        LinearLayout main = (LinearLayout)findViewById(R.id.main);
        TestView test = new TestView(this, null);
        main.addView(test, new LinearLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT));
    }
} 
```

布局：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/main"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent">
    <com.android.timetable.TestView
            android:layout_width="wrap_content"
                                         android:layout_height="wrap_content"/>
</LinearLayout> 
```

# mysql - 无法在 sql 文本中添加逗号

> ID：15468893
> 
> 赞同：1
> 
> 时间：2013-03-18T02:30:46.583
> 
> 标签：mysql, sql, string-concatenation

为什么这个说法不起作用？

```
UPDATE users 
   SET downloaded = downloaded + "4,"; 
```

它只会设置下载等于 4。下载是文本类型。我究竟做错了什么？我正在使用mysql。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T02:33:23.637

至少对于 MySQL，如果您想要字符串连接，请尝试以下操作：

```
UPDATE users SET downloaded = CONCAT(downloaded, '4,'); 
```

我认为通过使用加法运算符，您将字符串解析为数字，只给您`4`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T02:40:20.287

您需要使用 CONCAT 函数。

# ruby-on-rails - Ruby on Rails：如何列出为页面呈现的部分路径？

> ID：15468894
> 
> 赞同：8
> 
> 时间：2013-03-18T02:30:46.733
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我希望列出为我的应用程序中的每个页面呈现的部分。例如，当显示 app/tasks/index.html.erb 页面时，我想向用户显示如下内容：

> 为此页面呈现的部分：
> 
> 任务/_list.html.erb 任务
> /_button.html.erb
> 任务/_navigation.html.erb

在 Ruby on Rails 中有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-18T03:33:15.793

是的，在 Rails 中完全有办法做到这一点！

正如 bdares 在他的评论中指出的那样，模板渲染的行出现在日志中。但他们最初是如何到达那里的呢？嗯，这与[Active Support 中名为`LogSubscriber`](http://api.rubyonrails.org/classes/ActiveSupport/LogSubscriber.html). 这方面的文档非常详尽：

> ActiveSupport::LogSubscriber 是一个对象集，用于使用 ActiveSupport::Notifications，其唯一目的是记录它们。日志订阅者根据给定的命名空间向已注册对象发送通知。

将“Rendered ...”行放在日志中的东西是[在 Rails 3.2](https://github.com/rails/rails/blob/3-2-stable/actionpack/lib/action_view/log_subscriber.rb)`ActionView::LogSubscriber`中这样定义的。花点时间阅读代码。它很好，很整洁。

这样做是订阅 Rails 中的几个事件，即`render_template`,**`render_partial`**和`render_collection`方法。它通过调用该`ActiveSupport::LogSubscriber.attach_to`方法来执行此操作，该方法会将日志订阅者附加到某些事件。该方法也很有趣，定义如下：

```
def attach_to(namespace, log_subscriber=new, notifier=ActiveSupport::Notifications)
  log_subscribers << log_subscriber
  @@flushable_loggers = nil

  log_subscriber.public_methods(false).each do |event|
    next if 'call' == event.to_s

    notifier.subscribe("#{event}.#{namespace}", log_subscriber)
  end
end 
```

我把这段代码放在一起是因为它*与我们的兴趣非常相关*。这是在调用`subscribe`对象`notifier`。`notifier`默认情况下，对象是 ，记住`ActiveSupport::Notifications`这一点很重要。[Rails 中该类](http://api.rubyonrails.org/classes/ActiveSupport/Notifications.html)的文档也在 API 中。

当`subscribe`被调用时，它通过`event`. 这是什么？好吧，它是类中的每一个公共方法。定义子类时`LogSubscriber`，它定义了几个公共方法`render_template`：**`render_partial`**和`render_collection`。这些是将为该日志订阅者订阅的事件。

* * *

现在，这与我们的兴趣相关，因为我们将使用相同的东西来订阅视图内的这些事件。第一步是让`ActiveSupport::Notfications`我们想要订阅*所有*部分渲染事件。我们可以通过创建一个新的 inside 来做到这`before_filter`一点`ApplicationController`：

```
before_filter :log_partial_events

def log_partial_events
  @partial_events = []
  ActiveSupport::Notifications.subscribe("render_partial.action_view") do |event_name, start_at, end_at, id, payload|
  @partial_events << payload[:identifier]
end 
```

我们订阅的`render_partial`事件是`action_view`命名空间中的事件，它正是`ActionView::LogSubscriber`正在订阅的事件之一。当一个部分被渲染时会发生什么，这个块将被调用并传入一些数据。

`event_name`: 事件的名称。 `start_at`: 活动开始的时间。 `end_at`: 事件结束的时间。 `id`：此事件的唯一标识符。 `payload`：有关此事件的一些有效负载信息。

当钩子被调用时，它会将`identifier`键添加`payload`到方法顶部定义的数组中。

然后在视图中，要访问这些列表，您可以执行以下操作：

```
<%= debug @partial_events %> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T03:28:00.853

[Notification API](http://api.rubyonrails.org/classes/ActiveSupport/Notifications.html)中的以下示例应该可以帮助您：

```
ActiveSupport::Notifications.subscribe("render") do |*args|
  events << ActiveSupport::Notifications::Event.new(*args)
end 
```

对于您的情况（跟踪呈现的部分），您需要[`'render_partial.action_view'`](http://edgeguides.rubyonrails.org/active_support_instrumentation.html#action-view)通知。您的代码可能如下所示：

```
class ApplicationController < ActionController::Base
  before_filter :subscribe_to_render

  private
  def subscribe_to_render
    @render_events = []
    ActiveSupport::Notifications.subscribe("render_partial.action_view") do |*args|
      @render_events << ActiveSupport::Notifications::Event.new(*args)
    end
  end
end 
```

无论您想在何处显示此信息，都可以使用此辅助方法：

```
def display_render_events
  raw(@render_events.map do |event|
    event.payload[:identifier].gsub(/^.*app\/views\//, '')
  end.join('<br/>'))
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T04:24:54.613

对于很多像这样的调试信息，看看[rails-footnotes](https://github.com/josevalim/rails-footnotes)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-18T14:21:18.353

您可能还想查看[RailsPanel](https://github.com/dejan/rails_panel)，它是一个 Chrome 扩展。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-20T02:02:48.930

这是一篇旧文章，但如果有人发现这很有用，一种非常简单的方法来列出您单击站点时正在使用的所有视图和部分内容是重新启动您的服务器，并且只对“渲染”进行 grep，例如

```
rails s | grep "Rendered" 
```

# git - 推送时自动 Git Web 部署

> ID：15468898
> 
> 赞同：3
> 
> 时间：2013-03-18T02:31:15.823
> 
> 标签：git

我正在尝试设置一个遵循我们当前配置的 git 存储库，但没有在 Google 上找到我要查找的内容。

我想将我们的 repo 设置为指向一个目录，该目录用作我们 Web 服务器的基本目录，因此当某些内容被推送到“开发”分支时，它会被添加并且可以立即从我们的开发服务器中查看。

任何帮助都会很棒，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T02:37:14.767

您可以创建一个`post-receive`挂钩并将`checkout`内容添加到您的文档根目录。这应该可以解决问题。

```
#!/bin/sh
if [ "$refname" == "refs/heads/develop" ]; then
  GIT_WORK_TREE=/var/www/dev git checkout -f
fi 
```

# debugging - 我可以更改 IntelliJ 中调试器的键映射吗？

> ID：15468911
> 
> 赞同：3
> 
> 时间：2013-03-18T02:33:23.170
> 
> 标签：debugging, intellij-idea, keymapping

我有兴趣将 IntelliJ 中的键映射更改为从默认的 F7、F8 跨步、跨步等到更方便的东西。我发现我可以在 File --> Settings --> Keymap 中更改许多选项，但似乎找不到这些调试器设置。请帮忙！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T03:03:25.120

您可以为所有操作配置快捷方式，使用过滤框按操作名称或快捷键过滤对话框搜索：

![在此处输入图像描述](../Images/aa41b008b665e105dcd22492d3a1a56a.png)

# unicode - 如何向使用 Zend_Pdf 制作的 pdf 文档添加项目符号？

> ID：15468913
> 
> 赞同：0
> 
> 时间：2013-03-18T02:33:29.300
> 
> 标签：unicode, zend-pdf

我正在尝试将项目符号添加到我正在使用 Zend_Pdf 制作的文档中。我不知道如何让实际的子弹字符出现。我知道子弹的 unicode 是 2022，但我不知道如何将该代码实际转换为实际的子弹字符。应该怎么做呢？

编辑：我应该补充一点，我已经尝试通过按住 ctrl+shift 并输入“U2022”来手动添加项目符号字符。这很好地在我的代码中添加了一个项目符号。但是，不仅项目符号不显示，项目符号后面的行上的文本也不显示。这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:57:41.583

*用头撞桌子*

我没有将编码参数添加到 $page->drawText() 方法。

# functional-programming - FP（函数编程）：符号

> ID：15468915
> 
> 赞同：0
> 
> 时间：2013-03-18T02:33:45.833
> 
> 标签：functional-programming, notation

这里使用的语言是[FP](http://en.wikipedia.org/wiki/FP_%28programming_language%29)。

我不明白 和 的使用之间的`<>`区别`[]`。

例如：

```
2 : <3,4,5> -> 4 
```

但

```
+ o [1,2] : <2,3> -> 5 
```

为什么第一个序列是用`[]`而不是写的`<>`？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T03:02:48.710

您的问题的答案实际上在您提供的 wiki 链接中。While`<...>`用作列表的表示法（例如，`<3,4,5>`是带有元素`3`、`4`和的列表`5`），`[...]`只是 FP 已经提供的函数的语法。它被称为*构造*并定义为

```
[f1, ..., fn]:x =  <f1:x, ..., fn:x> 
```

如果你熟悉 Haskell：它类似于

```
map (\f -> f x) [f1, ..., fn] = [f1 x, ..., fn x] 
```

也就是说，这`[...]`是某种映射函数，另请参见[高阶函数以将多个函数应用于一个参数](https://stackoverflow.com/questions/14758077/higher-order-function-to-apply-many-functions-to-one-argument)。

在你的具体例子中

```
2:<3, 4, 5> 
```

选择给定列表的第二个元素，并且`+ o [1, 2]:<2, 3>`可以按如下方式“评估”（*函数组合*`o`在哪里）：

 *```
+ o [1, 2]:<2, 3>  => (definition of composition)
+:([1, 2]:<2, 3>) => (definition of construction)
+:<1:<2, 3>, 2:<2, 3>> => (select list elements)
+:<2, 3> => (addition)
5 
```*

# java - Android - 开始下载前 AsyncTask 滞后

> ID：15468928
> 
> 赞同：-1
> 
> 时间：2013-03-18T02:35:40.150
> 
> 标签：java, android, android-asynctask

就像标题所说的那样。我尝试使用 AsyncTask 下载。下载的时候就卡了。我想也许我在下载之前做的太多了，但没有任何效果。下载开始前大约有 15 秒的延迟。它确实显示了下载进度条，但在等待 15 秒之前不会下载任何内容。这是我的代码：

```
package com.cydeon.plasmamodz;

import com.stericson.RootTools.RootTools;
import com.stericson.RootTools.exceptions.RootDeniedException;
import com.stericson.RootTools.execution.CommandCapture;

public class Bmod extends Activity {

private class DownloadFile extends AsyncTask<String, Integer, String>{
    @Override
    protected String doInBackground(String... sURL) {
        try{
            URL url = new URL(sURL[0]);
            URLConnection connection = url.openConnection();
            connection.connect();
            //Shows 0-100% progress bar
            int fileLength = connection.getContentLength();

            //Download the file
            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream("/sdcard/plasma/battery/batterymod.zip");

            byte data[] = new byte[1024];
            long total = 0;
            int count;
            while ((count = input.read(data)) != -1) {
                total += count;
                //Publish the Progress
                publishProgress((int) (total * 100/fileLength));
                output.write(data, 0, count);
                }

            output.flush();
            output.close();
            input.close();
    } catch (Exception e) {

    }
    return null;
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        mProgressDialog.show();
    }

    @Override
    protected void onProgressUpdate(Integer... progress){
        super.onProgressUpdate(progress);
        mProgressDialog.setProgress(progress[0]);
    }

    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);
        mProgressDialog.dismiss();
        Context context = getApplicationContext();
        CharSequence text = "Download complete";
        int duration = Toast.LENGTH_SHORT;

        Toast toast = Toast.makeText(context, text, duration);
        toast.show();
    }
}

ProgressDialog mProgressDialog;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.battery);
    Button bInstallB = (Button) findViewById(R.id.bInstallBattery);
    Button bReturnB = (Button) findViewById(R.id.bReturnBattery);
    ImageView batteryView = (ImageView) findViewById(R.id.ivBattery);
    Bundle battery;
    battery = getIntent().getExtras();
    final String andy = battery.getString("Andy");
    final String bluebox = battery.getString("BlueBox");
    final String circlepercent = battery.getString("CirclePercent");
    final String circles = battery.getString("Circles");
    final String digital = battery.getString("Digital");
    final String dotted = battery.getString("Dotted");
    final String fullcircle1 = battery.getString("FullCircle1");
    final String fullcircle2 = battery.getString("FullCircle2");
    final String gauge = battery.getString("Gauge");
    final String honeycomb = battery.getString("Honeycomb");
    if (andy != null){
        batteryView.setImageResource(R.drawable.android);
    }if (bluebox != null){
        batteryView.setImageResource(R.drawable.bluebox);
    }if (circlepercent != null){
        batteryView.setImageResource(R.drawable.circlepercent);
    }if (circles != null){
        batteryView.setImageResource(R.drawable.circles);
    }if (digital != null){
        batteryView.setImageResource(R.drawable.digital);
    }if (dotted != null){
        batteryView.setImageResource(R.drawable.dotted);
    }if (fullcircle1 != null){
        batteryView.setImageResource(R.drawable.fullcircle1);
    }if (fullcircle2 != null){
        batteryView.setImageResource(R.drawable.fullcircle2);
    }if (gauge != null){
        batteryView.setImageResource(R.drawable.gauge);
    }if (honeycomb != null){
        batteryView.setImageResource(R.drawable.honeycomb);
    }
    mProgressDialog = new ProgressDialog(Bmod.this);
    mProgressDialog.setIndeterminate(false);
    mProgressDialog.setMax(100);
    mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    bInstallB.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            if (andy != null){
                mProgressDialog.setMessage("Downloading Android Batttery Mod..." );
                DownloadFile downloadFile = new DownloadFile();
                downloadFile.execute("https://dl.dropbox.com/s/623weil5bodvzmq/Andy_Battery.zip");
            }if (bluebox != null){

            }if (circlepercent != null){

            }if (circles != null){

            }if (digital != null){

            }if (dotted != null){
            }if (fullcircle1 != null){
            }if (fullcircle2 != null){
            }if (gauge != null){
            }if (honeycomb != null){
            }

        }
    });

    bReturnB.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            finish();
        }
    });
}   } 
```

那么，如果有人看到导致滞后的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:41:10.537

如果下载的时间长，放弃使用AsyncTask下载... 使用线程...

AsyncTask 的实现变化

# php - SQL 数据库 - 通过 PHP 表单更新记录。没有错误，但没有更新。

> ID：15468929
> 
> 赞同：2
> 
> 时间：2013-03-18T02:35:40.387
> 
> 标签：php, sql, forms, phpmyadmin

希望这是放置这个的正确区域。目前我正在做一个有趣的小项目，同时尝试自学一些 PHP。我创建了一个与我的网站相关联的小“审核”页面，允许我将新数据输入到预先存在的 SQL 数据库、搜索该数据并更新该数据。现在，添加和搜索可以顺利进行。唯一的问题是“更新”功能没有......它没有出错（实际上它表明它是成功的）并且它都按照它应该的方式工作，除了它没有“实际上”更新表中的信息。

在过去的 2 到 3 天里，我一直在阅读 StackOverflow、教程指南、论坛，并且我自己只是在玩部分代码，其中没有一个甚至提供了“远程”答案。

我有 2 个相关页面，“update.php”页面和“update_ac.php”页面在表单上点击“提交”后运行脚本，代码如下：

更新.php

```
<?php
$host="localhost"; // Host name 
$username="member2"; // Mysql username 
$password="********"; // Mysql password 
$db_name="audits"; // Database name 
$tbl_name="data"; // Table name

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// get value of id that sent from address bar
$id=$_GET['id'];

// Retrieve data from database 
$sql="SELECT * FROM $tbl_name WHERE id='$id'";
$result=mysql_query($sql);

$rows=mysql_fetch_array($result);
?>

<table width="400" border="0" cellspacing="1" cellpadding="0">
<tr>
<form name="form1" method="post" action="update_ac.php">
<td>
<table width="100%" border="0" cellspacing="1" cellpadding="0">
<tr>
<td>&nbsp;</td>
<td colspan="3"><strong>Update data in mysql</strong> </td>
</tr>
<tr>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td> 
</tr>
<tr>
<td align="center">&nbsp;</td>
<td align="center"><strong>Barcode</strong></td>
<td align="center"><strong>Product</strong></td>
<td align="center"><strong>Category</strong></td>
<td align="center"><strong>Assigned</strong></td>
<td align="center"><strong>Notes</strong></td> 
</tr>
<tr>
<td>&nbsp;</td>
<td align="center">
<input name="barcode" type="text" id="barcode" value="<? echo $rows['barcode']; ?>">
</td>
<td align="center">
<input name="product" type="text" id="product" value="<? echo $rows['product']; ?>" size="15">
</td>
<td align="center">
<select name="category" id="category" value="<? echo $rows['category']; ?>">
<option value="Hardware">Hardware</option>
<option value="Software">Software</option>
<option value="Furniture">Furniture</option>
</select>
</td>  
<td align="center">
<select name="assigned" id="assigned" value="<? echo $rows['assigned']; ?>">
<option value="name1">Name 1</option>
<option value="name1">Name 2</option>
<option value="name1">Name 3</option>
<option value="name1">Name 4</option>
</select>
</td>
<td align="center">
<input name="notes" type="text" id="notes" value="<? echo $rows['notes']; ?>" size="15">
</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>
<input name="id" type="hidden" id="id" value="<? echo $rows['id']; ?>">
</td>
<td align="center">
<input type="submit" name="Submit" value="Submit">
</td>
<td>&nbsp;</td>
</tr>
</table>
</td>
</form>
</tr>
</table>

<?php
// close connection 
mysql_close();
?> 
```

update_ac.php

```
<?php
$host="localhost"; // Host name 
$username="member2"; // Mysql username 
$password="********"; // Mysql password 
$db_name="audits"; // Database name 
$tbl_name="data"; // Table name 

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// update data in mysql database 
$sql="UPDATE $tbl_name SET barcode='$barcode', product='$product', category='$category', assigned='$assigned', notes='$notes' WHERE id='$id'";
$result=mysql_query($sql);

// if successfully updated. 
if($result){
echo "Successful";
echo "<BR>";
echo "<a href='assets.php'>View Changes</a>";
echo "<BR>";
echo "<a href='login-home.php'>Home</a>";
}

else {
echo "ERROR";
}

?> 
```

现在，我确实从一个[较旧的站点](http://www.phpeasystep.com/mysql/9.html)中提取了它，并且为了满足我自己的需要而进行了“更改”，但无济于事。我什至完全复制/粘贴了他们的教程（包括他们的数据库），即使这样也没有用，这似乎表明某处的代码有问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:42:05.743

我在设置这些变量的第二个脚本中看不到任何内容。表单值不会自动传递给变量，您必须从 $_POST 数组变量中检索它们，这就是为什么您在第一页的表单中使用“post”方法的原因。你这样做：

```
if (isset($_POST['barcode']) && $_POST['barcode'] != "") {
    $barcode = $_POST['barcode'];
} else {
    echo "'barcode' input is not set.";
} 
```

您实际上并不需要 if 语句，但它对于故障排除和一般错误预防很有用。它只是确保该字段既已设置又不为空。

（我会解释数组，但似乎您已经根据带有 $rows 变量的循环掌握了它们。如果您需要帮助，请告诉我，我会给出简短的解释并将您链接到教程.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T11:17:47.397

要更新您的值，您应该在 update_ac.php 中使用 $_POST[NAME of SELECT]

```
<?php
$host="localhost"; // Host name 
$username="member2"; // Mysql username 
$password="********"; // Mysql password 
$db_name="audits"; // Database name 
$tbl_name="data"; // Table name 

// Connect to server and select database.
$con=mysqli_connect("$host","$username","$password","$db_name") or die("cannot connect"); 

if (mysqli_connect_errno()) 
{
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}   

$sql="SELECT * FROM questions";
$result =mysqli_query($con,$sql) or die(mysqli_error($con));
mysqli_query($con,"UPDATE  SET barcode='$_POST[barcode]' ,product='$_POST[product]' ,category='$_POST[category]' ,assigned='$_POST[assigned]' ,notes='$_POST[notes]' WHERE id='$_POST[id]' ");
mysqli_close($con);

?> 
```

此代码只需将其复制并粘贴到 update_ac.php 即可

# javascript - 监听变量值的变化并处理点击事件

> ID：15468932
> 
> 赞同：0
> 
> 时间：2013-03-18T02:36:04.477
> 
> 标签：javascript, jquery, click

前 3 秒变量 x 的值为 0，3 秒后 x 值设置为 1。

每当我们在 0 到 3 秒之间单击按钮时，不应调用函数 handleClick。每当我们在 3 秒后单击按钮时，应该调用函数 handleClick。

下面是我正在使用的 HTML 和 JS 代码。但是即使在 3 秒后也不会调用函数 handleClick。

**HTML：**

```
<button class="quizy-mg-item">click here</button> 
```

**JS：**

```
var x=0;
setTimeout(3000,function(){
x=1 
})
function handleClick(){
document.write("Success");
}
if(x) {
$('.quizy-mg-item').click(handleClick);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T02:41:57.930

试试这个代码，

```
setTimeout(function() {
  $('.quizy-mg-item').click(handleClick);
},3000);

function handleClick(){
  document.write("Success");
} 
```

您的 setTimeout 函数的参数顺序错误。

也在这里，

```
if(x) {
  $('.quizy-mg-item').click(handleClick);
} 
```

在内部进行条件检查时`if`，`x`实际上是 0，因此没有`click`附加处理程序。它与以后的值无关`x`。

ps 不要使用`document.write`，用于`console.log`调试。

# linux - 从haskell内部控制漂亮的水平

> ID：15468937
> 
> 赞同：0
> 
> 时间：2013-03-18T02:36:34.483
> 
> 标签：linux, haskell

使用 Haskell 是否可以在 haskell 程序中控制[nice级别？](http://linux.die.net/man/2/nice)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T02:39:39.710

[让我为你胡说八道](http://www.haskell.org/hoogle/?hoogle=nice)。   

最上面的链接是：

```
nice :: Int -> IO () 
```

来自[System.Posix.Process](http://hackage.haskell.org/packages/archive/unix/latest/doc/html/System-Posix-Process.html#v%3anice)（没有文档，但很明显）。

# c# - 如何访问抽象类的私有成员

> ID：15468938
> 
> 赞同：1
> 
> 时间：2013-03-18T02:36:43.633
> 
> 标签：c#, unit-testing, abstract-class

关于我关于测试抽象类的其他线程（可以在[这里](https://stackoverflow.com/questions/15200768/should-i-be-accessing-protected-methods-for-unit-tests)找到），我现在的问题是访问抽象类的私有变量。这与使用 a 有关`Private Accessor`，但正如我在另一个线程中所述，我无法在与单元测试相同的文件中创建私有访问器。

这是我正在谈论的私有变量：

```
public abstract class Component {

    private eVtCompId mComponentId;   //enum
    private eLayer mLayerId;   //enum
    private IF_SystemMessageHandler mLogger;    //interface 
```

我需要知道如何访问这些，因为我正在创建一个单元测试，其中涉及获取这些特定变量中的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:39:04.733

你需要使用反射

```
var instance = new Component();
...
var fieldInfo = typeof(Component).GetField("mComponentId", BindingFlags.Instance | BindingFlags.NonPublic);
var componentId = (eVtCompId)fieldInfo.GetValue(instance); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T02:39:11.537

如果你不介意有点丑，你可以定义只有在调试模式下编译时才会编译的函数，方法是：

```
#if DEBUG
            ...
#endif 
```

然后，您可以定义公共方法并简单地返回私有变量的值，这样它们只能用于单元测试。

# iphone - UITableViewCell 删除按钮没有出现

> ID：15468940
> 
> 赞同：0
> 
> 时间：2013-03-18T02:37:00.830
> 
> 标签：iphone, ios, uitableview

我有一个 UITableview 放在 JASidePanel 控制器中（[https://github.com/gotosleep/JASidePanels](https://github.com/gotosleep/JASidePanels)）我在表格视图单元格上滑动，但视觉上没有任何反应。我查看了其他问题并实施了所有建议，但无法显示删除按钮。有谁知道什么会导致这种行为？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T02:50:20.223

您必须实现`tableView:editingStyleForRowAtIndexPath:`委托方法和`tableView:commitEditingStyle:forRowAtIndexPath:`数据源方法。没有这些，删除将不会出现在单元格中。

我假设您是`YES`从`tableView:canEditRowAtIndexPath:`数据源方法返回的（至少对于适当的行）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T04:03:09.920

你试过这个类自己的删除单元格的方法吗？

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
   if (UITableViewCellEditingStyleDelete) {
      int k = [[tempArray objectAtIndex:indexPath.row] intValue];

      //Remove object from index 'k'.
   }
} 
```

它可能对你有帮助。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-30T07:24:02.703

在滑动 TableViewCell 时执行 UITableView 的删除操作。我们必须实现以下三种方法：-

此方法将在滑动 TableViewCell 时显示删除按钮。

```
- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView 
       editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath {

  NSUInteger row = [indexPath row];
  NSUInteger count = [posts count];

  if (row < count) {
    return UITableViewCellEditingStyleDelete;
  } else {
    return UITableViewCellEditingStyleNone;
  }
} 
```

当用户在 TableViewCell 滑动时删除一行时调用此方法，并且在点击删除按钮时将删除滑动的行。

```
- (void)tableView:(UITableView *)tableView 
        commitEditingStyle:(UITableViewCellEditingStyle)editingStyle
        forRowAtIndexPath:(NSIndexPath *)indexPath {

  NSUInteger row = [indexPath row];
  NSUInteger count = [posts count];

  if (row < count) {
    [posts removeObjectAtIndex:row];
  }
} 
```

最后，在删除行后调用此方法来更新表格视图。

```
- (void)tableView:(UITableView *)tableView 
                   didEndEditingRowAtIndexPath:(NSIndexPath *)indexPath {

  [self updateViewTitle];
  [tableView reloadData];
} 
```

# perl - perl：设置默认、本地和全局用户设置

> ID：15468949
> 
> 赞同：2
> 
> 时间：2013-03-18T02:37:32.747
> 
> 标签：perl, module, environment-variables

我正在编写一个`perl`脚本 ( `myscript.pl`)，我想按以下顺序从各个模块加载一些环境变量：

*   默认设置在`defaultSettings.pm`同一目录中`myscript.pl`
*   （可选）`userSettings.pm`用户可以选择的其他地方的用户设置
*   （可选）`localSettings.pm`当前工作目录中的本地设置

我已经解决了我的第一个和最后一个项目符号，但没有成功解决第二个项目。

**`myscript.pl`**

```
#!/usr/bin/perl 

use strict;
use warnings;
use FindBin;            
use lib $FindBin::Bin;

# defaultSettings always present in same directory as myscript.pl
use defaultSettings;   

# localSettings sometimes present (in current working directory)
eval
{
    require localSettings;
      localSettings->import();
    };

print "Some variable is: ",$someVariable;
exit 
```

**`defaultSettings.pm`**

```
package defaultSettings;

use strict;
use warnings;
use Exporter;

use vars qw($VERSION @ISA @EXPORT);

$VERSION     = 1.00;
@ISA         = qw(Exporter);
@EXPORT      = qw($someVariable
                  );

our $someVariable="default settings";
1; 
```

**`localSettings.pm`**

```
package localSettings;

use strict;
use warnings;
use Exporter;

use vars qw($VERSION @ISA @EXPORT);

$VERSION     = 1.00;
@ISA         = qw(Exporter);
@EXPORT      = qw($someVariable
                  );

our $someVariable="local settings";
1; 
```

我知道我可以使用

```
use lib "/home/foo/bar/";
use userSettings; 
```

中`myscript.pl`，但我想避免让用户编辑`myscript.pl`- 主要希望/目标是让用户编辑*除* `myscript.pl`.

我对完成相同想法的其他工作流程持开放态度`:)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T03:13:40.377

不要使用 Perl 模块来存储配置数据。这不是它们的用途，而且正如您所见，它们并不真正适合此目的。还有一个潜在的安全风险是模块包含可执行的 Perl，它可以对你的系统做几乎任何事情。数据最好存储在不可执行的文件中。

相反，可以使用 JSON 数据文件之类的东西，这些文件可以放在磁盘卷上的任何位置并直接读入 Perl 数据结构。

您的主要问题似乎是如何定义第三组配置数据的位置，对我来说最明显的选项是应该在其他两组之一中指定它 - 可能是存储在当前工作目录中的那一组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T03:17:36.283

想到的两种方法：

*   `use lib "$ENV{HOME}/bar";`如果您关心的只是不要求用户输入其主目录的路径，但您可以假设该目录中的特定路径。
*   `use lib $ENV{MYSCRIPT_CONFIG};`如果您愿意要求用户设置该环境变量（尽管如果根本没有设置，您至少会收到警告，所以这并不理想；您可以改为创建一个`BEGIN`块来检查它是否已设置然后打开-编码`use lib`) 的效果。

但是，我会提出一个更基本的建议：我认为您正在使用`use`并且`require`当您真正需要`do`. 与其将所有这些随机路径添加到全局模块搜索路径（也将用于您加载的每个其他模块），不如考虑以下策略：

```
if ($ENV{HOME} && -f "$ENV{HOME}/bar/localSettings.pm") {
    my $file = "$ENV{HOME}/bar/localSettings.pm";
    my $status = do $file;
    die "couldn't parse file $file: $@" if $@;
    die "couldn't load $file: $!" unless defined $status;
    die "couldn't load $file" unless $status;
} 
```

的缺点`do`是更冗长的错误管理。优点是您不必在模块路径中添加东西，您不必为文件命名，甚至不必为三种类型的设置文件按顺序使用单独的名称避免`%INC`处理阻止加载所有配置。

（另一个答案也有一个好点，即您应该始终三思而后行将 Perl 模块用于配置数据，但有时这是一个非常好的主意。一种是用户配置可以包含编写的完整回调函数在 Perl 中。我有几个软件包就是这种情况。）

# php - 登录 PHP 和 Mysql

> ID：15468951
> 
> 赞同：1
> 
> 时间：2013-03-18T02:37:56.350
> 
> 标签：php, mysql, login

好的，基本上我有一个 login.php，它只包含这个表单和来自我的 mysql 数据库的连接：它连接到我的另一个文件 login_success.php，其中包含实现我的登录功能的代码主体。

```
 <?php  
    include "header2.php";
    session_start();
    ?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Login</title>
    <style type="text/css">
    #title {
    height: 200px;
    width: 600px; 
    margin-top: 30px;
    margin-right: auto;
    margin-bottom: 10px;
    margin-left: auto;
    padding-top: 20px;
    padding-right: 20px;
    padding-bottom: 35px;
    padding-left: 20px;
    }
    strong {
    font-size: 28px;
    font-family: Georgia, "Times New Roman", Times, serif;
    font-weight: bolder;
    color: #31CAF5;
    }
    #username, #password {
    width: 80%;
    height: 25px;
    padding: 5px;
    color: #999;
    background-color: #FFF;
    border: thin solid #CCC;
    padding-top: 10px;

    }
    #login, #reset {
    width: 70px;
    height: 30px;
    }
    #error {
    height: 20px;
    color: #FFF;
    font-size: 14px;
    background-color: #FF3C3C;
    padding-top: 5px;
    padding-bottom: 5px;
    font-family: Verdana, Geneva, sans-serif;
    text-align: center;
    }
    </style>
    </head>
    <body>
    <div id="title"> <strong>User Login</strong><br />
    <hr noshade="noshade" />
    <?php
    include ('db_connect.php');
    ?>
    <form id="form1" name="form1" method="post" action="login_success.php">
    <table width="100%" border="0" cellpadding="5">
    <tr>
    <td width="16%"> <label for="username">Username</label></td>
    <td width="3%">:</td>
    <td width="81%"><input type="text" name="username" id="username" /></td>
    </tr>
    <tr>
    <td> <label for="password">Password</label></td>
    <td>:</td>
    <td><input type="password" name="password" id="password" /></td>
    </tr>
    <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td> <input type="submit" name="login" id="login" value="Log In" />
    &nbsp;&nbsp;
    <input type="reset" name="reset" id="reset" value="Reset" /></td>
    </tr>
    </table>
    </form>
    </div>
    </body>
    </html>
    <?php
    //endif;
    include "footer.php" ?> 
```

这里的代码是我的文件 login_success。这个想法是，当用户输入正确的登录凭据时，它会将它们启动到已登录的会话中。它旨在允许在数据库上散列的密码。但是，出于某种原因，即使不是保存在数据库中的登录凭据，这也会允许任何详细信息通过。

```
 <?php   
    session_start();
    //For cases where users are not logged in redirect back to login page.

        include "conn.php";
        include "header.php";

        $username = $_POST['username'];
        $password = $_POST['password'];
        $password = md5($password);

        //echo "password ".$password;
        //echo "username ".$username;

        $qry = "SELECT * FROM login WHERE username = '$username'";
        $userlogin = mysqli_query($_SESSION['conn'],$qry);
        $result = mysqli_fetch_array($userlogin);

        if (strcmp($result['password'], $password)==0) {
            $_SESSION["loggedIn"] = $username;
            $_SESSION["message"] = "Logged In Successfully.";
            header('Location: members.php');
        }
        else {
            $_SESSION["message"] = "Log In Failed";
            header('Location: login.php');
        }   

    if(!isset($_SESSION["loggedIn"])){
                    header("Location: index.php");
                    exit;
                }
        echo '<h1> Congratulations '.$_SESSION['loggedIn'].'</h1> <br> <h2>You successfully logged in!</h2><br>

             <h3><a href="logout.php">Logout</a> <a href="members.php">Continue</a></h3><br/><br/>';

    include ("footer.php");?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:42:13.480

尝试这个。我认为 strcmp 函数是这里的罪魁祸首

```
<?php 
if (strcmp($result['password'], $password)==0) {
            $_SESSION["loggedIn"] = $username;
            $_SESSION["message"] = "Logged In Successfully.";
            header('Location: members.php');
        }
        else {
            $_SESSION["message"] = "Log In Failed";
            header('Location: login.php');
        }  
?> 
```

应该

```
<?php 
if ($result == true) {
            $_SESSION["loggedIn"] = $result['username'];
            $_SESSION["message"] = "Logged In Successfully.";
            header('Location: members.php');
        }
        else {
            $_SESSION["message"] = "Log In Failed";
            header('Location: login.php');
        }  

?> 
```

# ios - 本地 git 不工作 - Xcode 4.6

> ID：15468956
> 
> 赞同：1
> 
> 时间：2013-03-18T02:38:54.923
> 
> 标签：ios, xcode, git, cocoa-touch, version-control

我在我的一个项目上设置本地 git 存储库时遇到了很多麻烦。我创建了一个全新的项目并将所有文件拖入其中，确保我检查了 git/version control 勾选。

现在我在管理器中看到了存储库（文件系统指向正确的位置），并且可以使用管理器中的按钮`Pull`和`Commit`所有内容：

![在此处输入图像描述](../Images/5960dbcbc7b53765f396578f34eb6e58.png)

但是，当我在实际项目中进行任何更改时，即使进行了更改，也不会显示源代码控制徽章，即`M`,`A`等。当我尝试推动（或做任何事情）时，它说没有遥控器（有遥控器......）：

![在此处输入图像描述](../Images/d4581f7fcfa98df871332e83717a0496.png)

似乎该项目实际上并未附加到存储库...

**编辑：** `git status`在终端

```
# On branch master
# Your branch is ahead of 'origin/master' by 1 commit.
#   (use "git push" to publish your local commits)
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   CrunchCalculator-1-2.xcodeproj/project.xcworkspace/xcuserdata/Neil.xcuserdatad/UserInterfaceState.xcuserstate
#   modified:   CrunchCalculator-1-2/ViewController.h
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:30:58.703

经过数小时的重新启动、测试和搜索解决方案......原来您所要做的就是更改项目的名称。通过单击主项目文件夹（蓝色）并按回车键，然后将名称更改为其他名称，这解决了问题。

**更改项目名称！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:56:42.587

而不是使用 XCode for GIT 使用命令行。

此链接为您提供各种 GIT 命令[git的用法](http://git-scm.com/)

# c++ - 使用数组对带有文本图像输出的物理线进行建模

> ID：15468957
> 
> 赞同：0
> 
> 时间：2013-03-18T02:38:57.920
> 
> 标签：c++, arrays

我目前正在从事一个 C++ 编程项目，但是我似乎无法正确完成数组。我正在关注本指南，第 2 页，共 8 页。

[http://www.joehummel.net/uploads/cs109-hw7-pe1.pdf](http://www.joehummel.net/uploads/cs109-hw7-pe1.pdf)

我编写了一个 For 循环来打印出矩阵中的所有信息，但由于未知原因，我的输出只是 2 行代码，即“t”和“0”，而不是整个网格。

```
void fill(int M[][N], int ROWS, int COLS, int row, int col)
{
    int i = 0;
    int j = 0;
    for (i<ROWS;i++;)
    {
        for (j<COLS;j++;)
        {
            cout <<"0"<< M[i][j];
        }
    }
    cout << "T" << M[row][col];   
} 
```

任何提示或帮助将不胜感激！谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:51:19.483

代替

`for (i<ROWS;i++;)`

你要

`for (i;i<ROWS;i++)`

或者

`for (;i<ROWS;i++)`

推理： for 循环的部分进行初始化（在所有内容之前运行一次），检查（在每个循环之前，如果它评估为假中断），更新（在每个循环结束后运行一次）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T03:45:02.577

```
void fill(int M[][N], int ROWS, int COLS, int row, int col)
{
    int i, j;

    for (i = 0; i < ROWS; i++)
    {
        for (j = 0; j < COLS ; j++)
        {
            cout << "0" << M[i][j];
        }
    }
    cout << "T" << M[row][col];   
} 
```

# java - 在 Jframe 或 Jpanel 上格式化许多复选框

> ID：15468963
> 
> 赞同：-1
> 
> 时间：2013-03-18T02:39:48.603
> 
> 标签：java, swing, awt, layout-manager, jcheckbox

我已经有一个句子的集合（列表）。所以我需要把每一个句子都放在一个复选框中。复选框的数量取决于矢量大小的数量。例如，我有 50 个句子，所以我需要 50 个复选框。然后用户可以检查要写入文本文件的所需句子。下面的类（ViewerFrame）应该构建一个框架，使其具有与数组列表（ManualSummarySys.sentences）中的句子数量相同的许多复选框。类（ManualSummarySys）运行良好。

```
public class ViewerFrame {

import java.awt.BorderLayout ;
import java.awt.Font ;
import java.awt.GridLayout ;
import java.awt.ScrollPane ;
import java.awt.event.ActionEvent ;
import java.awt.event.ActionListener ;
import java.util.ArrayList ;
import java.util.List ;
import javax.swing.ButtonGroup ;
import javax.swing.JButton ;
import javax.swing.JCheckBox ;
import javax.swing.JComboBox ;
import javax.swing.JFrame ;
import javax.swing.JLabel ;
import javax.swing.JPanel ;
import javax.swing.JRadioButton ;
import javax.swing.border.EtchedBorder ;
import javax.swing.border.TitledBorder ;
import javax.swing.plaf.metal.MetalBorders ;

public class ViewerFrame extends JFrame {

    private static final int FRAME_WIDTH = 10;
    private static final int FRAME_HEIGHT = 5;
    private JLabel sampleField;
    private List<JCheckBox> checkboxes = new ArrayList<JCheckBox>();
    private ActionListener listener;

    public ViewerFrame() {

        sampleField = new JLabel("choose your prefered sentences");
        add(sampleField, BorderLayout.WEST);

        class ChoiceListener implements ActionListener {

            public void actionPerformed(ActionEvent event) {
            }
        }
        listener = new ChoiceListener();
        createControlPanel();

        setSize(FRAME_WIDTH, FRAME_HEIGHT);
        add(this.createCheckBoxes());

    }

    public void createControlPanel() {
        JFrame sizeGroupPanel = createCheckBoxes();

        JPanel controlPanel = new JPanel();
        controlPanel.setLayout(new GridLayout(3, 1));

        controlPanel.add(sizeGroupPanel);
        controlPanel.add(styleGroupPanel);

        add(controlPanel, BorderLayout.LINE_START);

    }

    public JFrame createCheckBoxes() {
        JFrame frame = new JFrame("Sentences");
        frame.setBorder(new TitledBorder(new EtchedBorder(), "Sentences"));
        for (int i = 0; i < ManualSummarySys.sentences.size(); i++) {
            JCheckBox checkbox = new JCheckBox(ManualSummarySys.sentences.get(i));
            checkboxes.add(checkbox);
            checkbox.addActionListener(listener);
            frame.add(checkbox);

        }
        return frame;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T03:13:38.073

You `extend`from `JFrame`，这通常是不可取的，但让我们继续前进......

然后你调用`createControlPanel`，它调用`createCheckBoxes`，它创建一个新的`JFrame`。

如果`createCheckBoxes`您未能为此框架设置布局管理器，则使用 default `BorderLayout`，这意味着实际上只有一个复选框可见（添加的最后一个）。

回到`createControlPanel`您尝试将创建的框架添加`createCheckBoxes`到面板中。您还尝试添加一个名为的对象`styleGroupPanel`，我在您的代码中的任何地方都找不到对它的引用...

回到构造函数，你调用`setSize`，这通常是不可取的，你应该使用`pack`.

最后，您`createCheckBoxes`再次调用并尝试将框架添加到框架中。

您不能将窗口添加到其他任何内容。与其尝试创建另一个窗口，`createCheckBoxes`为什么不直接返回 a`JPanel`呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T02:42:39.597

为什么会`createCheckBoxes()`返回一个 JFrame 的所有东西？然后你把这个 JFrame 添加到另一个 JFrame 中？对不起，但这根本没有意义。

为了我的钱，如果我想显示一堆这样的复选框，我会使用放置在 JTable 中的 DefaultTableModel。一列是复选框的布尔列，另一列是文本行的字符串列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-29T16:21:11.837

好的，如果它可以帮助有类似问题的人，我将粘贴此代码。请注意这里 - 滚动窗格包含 JPanel，并且滚动窗格在 JDialog（或 showConfirmDialog）上呈现给用户。复选框列表顶部还有“全选”复选框。

公共类测试实现 ItemListener{

```
List<String> testset;
JCheckBox selectallcheckbox = new JCheckBox();
List<JCheckBox> testscheckboxes = new ArrayList<JCheckBox>();
List<String> cancel = Arrays.asList("cancel");

public UserInputTest(List<String> tests) {
    this.testset = tests;
}

public List<String> GetCheckBoxes() {

    // Create Content Pane as JScrollPane and adding JPanel into scroll pane.  
    JPanel testspanel = new JPanel();
    testspanel.setLayout(new BoxLayout(testspanel, BoxLayout.Y_AXIS));

    JScrollPane pane = new JScrollPane(testspanel,
                                JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, 
                                JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
    pane.setMinimumSize(new Dimension(400, 400));
    pane.setPreferredSize(new Dimension(400, 500));

    // Create Swing Components and adding them to JPanel
    selectallcheckbox.setText("Select All");
    selectallcheckbox.setSelected(false);
    selectallcheckbox.addItemListener(this);

    testspanel.add(selectallcheckbox, 0);
    testspanel.add(Box.createVerticalGlue());

    // Adding each element from string list to one checkbox into the JPanel 
    for(int i = 0; i < testset.size() ; i++) {
        JCheckBox testcheckbox = new JCheckBox();
        testcheckbox.setText(testset.get(i));
        testcheckbox.setSelected(false);
        //testspanel.setComponentZOrder(testcheckbox, i+1);
        testspanel.add(testcheckbox, i+1);
        testspanel.add(Box.createVerticalGlue());
        testscheckboxes.add(i, testcheckbox);
    }

    int x = JOptionPane.showConfirmDialog(null, pane, "Select Tests", JOptionPane.OK_CANCEL_OPTION);

    List<String> InputTestDetails = new ArrayList<String>();
    if (x == JOptionPane.OK_OPTION) {
        for(JCheckBox getvaluechkbox : testscheckboxes) {
            if(getvaluechkbox.isSelected()) {
                InputTestDetails.add(getvaluechkbox.getText());
            }   
        }
        return InputTestDetails;
    }

    else if (x == JOptionPane.CANCEL_OPTION) {
        return cancel; 
    }

    return cancel; 
}

@Override
public void itemStateChanged(ItemEvent e) {

    if(e.getSource() == selectallcheckbox) {    
        if(selectallcheckbox.isSelected() == true){
            for(JCheckBox setchkbox : testscheckboxes) {
                setchkbox.setSelected(true);
            }   
        }
        else {
            for(JCheckBox setchkbox : testscheckboxes) {
                setchkbox.setSelected(false);
            }
        }
    }

} 
```

}

# scheduled-tasks - 到达时间的循环调度

> ID：15468965
> 
> 赞同：3
> 
> 时间：2013-03-18T02:40:14.627
> 
> 标签：scheduled-tasks, scheduling, round-robin

所以在课堂上，我的教授正在讨论循环调度。考虑这种情况：

```
Job       |    Arrival       |      Burst
A         |       0          |        3
B         |       1          |        5
C         |       3          |        4 
```

我的教授写下结果如下：

```
Time
1 2 3 4 5 6 7 8 9 10 11 12
A A B A B B C C B C  B  C 
```

有时`0-1`，`A`已被处理一次。在 time `1-2`，`A`正在处理另一个突发。有时`2-3` `B`正在处理突发事件，依此类推。

我有时会感到困惑`6-8`。`B`从时间再次处理`5-6`。然后`C`从时间`6-7`，`C`又从时间`7-8`。不应该是这样的：

```
Time
1 2 3 4 5 6 7 8 9 10 11 12
A A B A B C B C B C  B  C 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-14T07:34:45.413

起初，每个循环问题都是基于量子的。（前量子 = 4）。这意味着每个过程都将花费相同的量子时间来执行。对于你的例子，如果量子 = 2。然后看起来像

```
A        B      C       A     B       C          B

0  -  2  - A

2  -  4  - B

4  - 6   - C

6  - 7   - A

7  - 9   - B

9  - 11  - c   

11 -12   - B 
```

进程等待时间 等待时间=（最终执行开始时间-上一个执行周期-到达时间）

```
A –  (6-2-0)=4

B – (11-(2+2)-1)=6

C – (9-2)-3=4

Average waiting time = (4+6+4)/3 = 14/3 = 4.66 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-04T06:47:00.517

我认为其他答案不正确。在进程 A 在时间 2 结束后，B 将被添加到队列中，因为它已经到达，然后 A 将被添加回队列，因为它尚未完成执行并且 C 尚不可用。作业 C 将在 B 使用它的第一个量程后的时间 4 被添加到队列中。正确的顺序应该如下：

```
A: 2
B: 2
A: 1
C: 2
B: 2
C: 2
B: 1
Average waiting time: 4.0 
```

# php - 存储值以供以后在没有数据库的情况下使用

> ID：15468969
> 
> 赞同：2
> 
> 时间：2013-03-18T02:40:36.900
> 
> 标签：php, mysql

我正在构建一个每 5 分钟运行一次的脚本，以检查某个数量是否增加：

```
 $oldmax = '1' //this is the number from the last result
   $newmax = '4' //this is the latest number
   If $newmax > $oldmax {runscript} 
```

由于这是每 5 分钟运行一次，我需要查询 $oldmax 值，然后如果该最大值大于旧值，则将其更新为 $newmax 值...

目前我看到了使用 MySQL 存储 $oldmax 值的选项。但是，由于它只存储一个数字，我发现在 MySQL 中创建一个新表，然后查询该表以获取它存储的那个值有点过头了。使用 PHP，这会增加很多额外的代码。

是否有另一种更简洁的方法来存储 $oldmax 的值，以便每次 cron 运行时，它都可以引用该值？还是我需要使用数据库？如果这只是一个简单的循环，那会很容易，但我的问题是脚本每 5 分钟运行一次，所以它必须从头开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T00:45:23.197

在您的情况下持久化数据的最简单方法是使用文件系统。

有方便的[file_get_contents()](http://php.net/file_get_contents)和[file_put_contents()](http://php.net/file_put_contents)函数来相应地读取和写入数据。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T02:54:00.140

将值写入这样的文件。（假设你使用 linux，如果不让我知道）

```
<?php 
exec('echo "VALUE" > file.txt');  //Linux Version
?> 
```

要从 php 中获取值，只需执行此操作..

```
<? $echo exec('cat file.txt'); //Linux Version ?> 
```

您也可以直接从 bash 获取值。

```
 cat /path-to-the-file/file.txt 
```

还记得给 php 写目录的权限。[这](http://php.net/manual/en/function.exec.php%5D)是 exec 函数的手册。

谢谢！

@leo。

# vba - 从宏运行 Excel Solver

> ID：15468972
> 
> 赞同：0
> 
> 时间：2013-03-18T02:41:11.223
> 
> 标签：vba, excel, solver

我想从宏运行 Excels Solver。我已经将所有算法参数手动输入到 Solver 窗口中。只需调用

```
SolverSolve 
```

我得到一个编译错误。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T07:22:50.033

您必须在 Tools/References 中设置对 Solver 插件的引用：

1.  从 Excel VBA 编辑器窗口的工具菜单中选择引用。
2.  选中“求解器”复选框。
3.  单击确定。

# python - 在 AIX 上安装 Python 时无法构建 Python 包

> ID：15468973
> 
> 赞同：2
> 
> 时间：2013-03-18T02:41:12.533
> 
> 标签：python, installation, aix

我对 python 很陌生，我正在尝试从 AIX 6.5 机器上的源代码安装 python 2.6.8。我用这些命令构建：

```
CC=gcc CXX=g++ ./configure --enable-shared
make 
```

我得到这些错误：

```
Failed to find the necessary bits to build these modules:
_sqlite3           bsddb185           dl              
imageop            linuxaudiodev      ossaudiodev     
spwd               sunaudiodev                        
To find the necessary bits, look in setup.py in detect_modules() for the module's name.

Failed to build these modules:
_bsddb             _ctypes            _curses         
_curses_panel      _tkinter           fcntl 
```

我在哪里可以找到这些“位”以及如何将它们安装到 python 中？能给个详细的攻略吗？我没有root权限。谢谢。

**更新**

我尝试用 xlc 编译 python：

```
CC=xlc_r OPT="-O2 -qmaxmem=70000" ./configure --without-computed-gotos --enable-shared
make 
```

也会得到同样的错误。

**更新2**

我尝试用 xlc 编译 python 2.7.3 也会出错，但`fcntl`构建`_bsddb`成功。

```
Python build finished, but the necessary bits to build these modules were not found:
_bsddb             _sqlite3           bsddb185        
dl                 imageop            linuxaudiodev   
ossaudiodev        spwd               sunaudiodev     
To find the necessary bits, look in setup.py in detect_modules() for the module's name.

Failed to build these modules:
_ctypes            _curses            _curses_panel   
_tkinter 
```

# scripting - GIMP Script-fu 更改默认脚本

> ID：15468982
> 
> 赞同：1
> 
> 时间：2013-03-18T02:42:09.837
> 
> 标签：scripting, scheme, gimp, script-fu

我在重写 GIMP 中的默认徽标脚本之一时遇到问题（使用基于方案的 Script-fu）。一方面，在显示图像后，图层浏览器中不会显示 alpha 图层。我正在重写 Create Neon Logo 脚本（neon-logo.scm），我希望它在显示新图像之前执行以下操作：

1.  添加 Alpha 通道
2.  通过 colortoalpha 将黑色（背景颜色）更改为透明
3.  将生成的图像作为要在另一个 python 脚本中使用的对象返回（使用 for 循环生成 49 个图像）我尝试将以下代码修改为默认脚本：

    ```
     (gimp-image-undo-disable img)
        (apply-neon-logo-effect img tube-layer size bg-color glow-color shadow) *Generates neon logo
        (set! end-layer (car (gimp-image-flatten img))) *Flattens image
        (gimp-layer-add-alpha end-layer) *Adds alpha layer as last layer in img(img=the image)
        (plug-in-colortoalpha img 0 (255 255 255)) *Uses color to alpha-NOT WORKING
        (gimp-image-undo-enable img) *Enables undo
        (gimp-display-new img) *Displays new image 
    ```

对于数字 3，我的 python 代码是这样的：

```
 for str1 in list1:
            for color1 in list3:
                img = pdb.script_fu_neon_logo(str1,50,"Swis721 BdOul BT",(0,0,0),color1,0) 
```

但 img 是一个“Nonetype”对象。我想这样做，而不是在新窗口中显示生成的图像，它只返回生成的图像以用于我的 python 脚本。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:25:35.717

也许为了让一切更易于管理和可读，您应该将原始脚本翻译成 Python - 这样您就不会对变量赋值、从序列中挑选元素等其他琐碎的事情感到惊讶。

1和2）您的调用显然是正确的，可以将“添加一个alpha通道”（不是“alpha层”，正如你写的那样）展平到图像上——但是你调用color-to-alpha来制作白色（255 255 255）透明不是黑色的。Trey 将其更改为 (0 0 0) - 如果它不起作用，请在 script-fu 控制台或 python 控制台上单独进行每个调用，并检查有什么问题。

3) Script-fu 不能将值返回给调用者（这可以通过寄存器调用没有“返回值类型”参数来看出。这意味着 GIMP 中的方案中的脚本只能在自身上呈现 thigns 而不是用于组成更复杂的链。

这给您留下了 2 个选项：将原始脚本移植到 Python-fu（他们只需注册它以返回 PF-IMAGE） - 或者像这样在 Python 中绕过调用：创建一个打开所有图像的集合，调用你的script-fu，检查您当前打开的图像中有哪些不在先前打开的图像集中 - 这将是您的新图像：

棘手的部分是：当你从 Python-fu 中看到图像时，它没有唯一的标识符——所以你必须组合一个像 (name, number_of_layers, size) 这样的值来进行这些比较集，甚至那个可能还不够——或者你可能会处理“寄生虫”（可以附加到图像的任意数据）。如您所见，最好用 Python 重写原始 script-fu，因为所有工作都由 PDB 调用完成，并且这些转换 1:1 是可取的。

# ios - 如何替换 UITextInput 中的文本？

> ID：15468983
> 
> 赞同：1
> 
> 时间：2013-03-18T02:42:22.670
> 
> 标签：ios, objective-c, uitextinput

我在 customView 中使用 UITextInput：

我的代码：[https ://github.com/lequysang/github_zip/blob/master/UITextInputDebug.zip](https://github.com/lequysang/github_zip/blob/master/UITextInputDebug.zip)

```
@property (strong,nonatomic) id<UITextInput> textInput; 
```

输入一些字符后，我想返回 4 个字符并替换此位置的文本（将任何替换为 T）。当前光标位于末尾。

怎么做？

我尝试用 UITextRange 替换Range，但不知道如何用它来获取位置和大小！

请帮忙！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T03:05:39.157

```
replaceRange:withText: 
```

替换文档中指定范围内的文本。（必需的）

```
- (void)replaceRange:(UITextRange *)range withText:(NSString *)text 
```

**参数**

```
range 
```

文档中的一系列文本。

```
text 
```

用于替换范围内文本的字符串。

**可用性** 适用于 iOS 3.2 及更高版本。

**也可以看看**

```
– textInRange: 
```

宣布于`UITextInput.h`

# r - 使用 lapply（和 plyr 包）创建数据框

> ID：15468987
> 
> 赞同：1
> 
> 时间：2013-03-18T02:42:48.180
> 
> 标签：r, plyr

我有多个数据文件，我有兴趣在其中进行清理，然后从中获取运行重复测量方差分析的方法。

这是示例数据，在实际数据中，有 4500 行，另一行称为 Actresponse，有时包含我修剪的 9：[https ://docs.google.com/file/d/0B20HmmYd0lsFVGhTQ0EzRFFmYXc/edit?pli=1](https://docs.google.com/file/d/0B20HmmYd0lsFVGhTQ0EzRFFmYXc/edit?pli=1)

我刚刚发现了 plyr 以及它在处理数据方面是多么的棒，但是我现在使用它的方式对我来说看起来相当愚蠢。我有 4 种不同的东西我感兴趣，我想读入一个数据框。我已经将它们读入 4 个单独的数据框开始，我想知道是否有一种方法可以将它结合起来并阅读所有内容用更少的代码行将手段放入一个数据帧（每个文件的每个reqresponse一行）。基本上，我可以在不重写很多相同代码4次的情况下实现我在这里所做的事情吗？

```
 PMScoreframe <- lapply(list.files(pattern='^[2-3].txt'),function(ff){
  data <-  read.table(ff, header=T, quote="\"")
  data <- data[-c(seq(from = 1, to = 4001, by=500), seq(from = 2, to = 4002, by=500)), ]
  ddply(data[data$Reqresponse==9,],.(Condition,Reqresponse),summarise,Score=mean(Score)) 
})

PMRTframe <- lapply(list.files(pattern='^[2-3].txt'),function(ff){
 data <-  read.table(ff, header=T, quote="\"")
 data <- data[data$RT>200,]
  data <-  ddply(data,.(Condition),function(x) x[!abs(scale(x$RT)) > 3,])
 ddply(data[data$Reqresponse==9,],.(Condition,Reqresponse,Score),summarise,RT=mean(RT))
})

OtherScoreframe <- lapply(list.files(pattern='^[2-3].txt'),function(ff){
  data <-  read.table(ff, header=T, quote="\"")
 data <- data[-c(seq(from = 1, to = 4001, by=500), seq(from = 2, to = 4002, by=500)), ]
  select <- rep(TRUE, nrow(data))
  index <- which(data$Reqresponse==9|data$Actresponse==9|data$controlrepeatedcue==1)
  select[unique(c(index,index+1,index+2))] <- FALSE
  data <- data[select,]
 ddply(data[data$Reqresponse=="a"|data$Reqresponse=="b",],.     (Condition,Reqresponse),summarise,Score=mean(Score)) 
})

 OtherRTframe <- lapply(list.files(pattern='^[2-3].txt'),function(ff){
  data <-  read.table(ff, header=T, quote="\"")
  data <- data[-c(seq(from = 1, to = 4001, by=500), seq(from = 2, to = 4002, by=500)), ]
  select <- rep(TRUE, nrow(data))
  index <- which(data$Reqresponse==9|data$Actresponse==9|data$controlrepeatedcue==1)
  select[unique(c(index,index+1,index+2))] <- FALSE
  data <- data[select,]
  data <- data[data$RT>200,]
  data <-  ddply(data,.(Condition),function(x) x[!abs(scale(x$RT)) > 3,])
  ddply(data[data$Reqresponse=="a"|data$Reqresponse=="b",],.(Condition,Reqresponse,Score),summarise,RT=mean(RT))
 }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T03:08:53.253

我认为这涉及您正在尝试做的事情。基本上，我认为您需要*一次*读取所有数据，然后处理`data.frame`。有几个问题涉及如何全部阅读，这是我将如何做到的，所以我会记录每行`data.frame`来自哪个文件，也可以用于分组：

```
filenames <- list.files(".", pattern="^[2-3].txt")
import <- mdply(filenames, read.table, header = T, quote = "\"")
import$file <- filenames[import$X1] 
```

现在`import`是一个包含所有文件的大数据框（我假设您用于读取文件的模式识别等是正确的）。然后，您可以根据您喜欢的任何标准进行总结。

我不确定您在上面代码的第 3 行中要实现什么，但对于`ddply`下面的内容，您只需要执行以下操作：

```
ddply(import[import$Reqresponse==9,],.(Condition,Reqresponse,file),summarise,Score=mean(Score)) 
```

在你的其余代码中发生了太多事情，很难准确地判断出你想要什么。

我认为重要的是，要使这一过程高效且易于遵循，您需要一次性读取数据，然后处理该数据集——如有必要，制作子集，进行汇总统计或其他任何事情。

作为如何处理此问题的示例，这里尝试解决您处理具有`reqresponse == 9`和以下两个的试验（行？）的问题。可能有一些方法可以更有效地执行此操作，但这稍微基于您的操作方式，以简要向您展示如何使用更大的数据框。现在修改为删除每个文件的前两个试验：

```
 import.clean <- ddply(import, .(file), function(x) {
   index <- which(x$reqresponse == 9)
   if(length(index) > 0) {
     index <- unique(c(index, index + 1, index + 2, 1, 2))
   }
   else index <- c(1,2)
   x <- x[-index,]
   return(x)
}) 
```

# android - 根据当前位置或收到推送通知自动打开 android 应用程序

> ID：15468989
> 
> 赞同：2
> 
> 时间：2013-03-18T02:43:12.903
> 
> 标签：android, push-notification, cordova

我有一个 android 应用程序的要求，该应用程序应在以下 2 种情况下自动打开 - 当使用 android 设备的用户到达某个特定位置时。- 当应用程序从服务器收到一些推送通知时。

我是 android 新手，在上述 2 种情况下，应用程序是否有可能自动打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:35:34.483

1.  对于基于位置的应用程序，请使用 Android 的[LocationManger](http://developer.android.com/reference/android/location/LocationManager.html)

> 此类提供对系统位置服务的访问。这些服务允许应用程序获取设备地理位置的定期更新，**或在设备进入给定地理位置附近时触发应用程序指定的 Intent。**

1.  对于推送消息使用[GCM](http://developer.android.com/google/gcm/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T10:30:34.190

几天前我遇到了这个问题（第二个）并想出了一个“临时”解决方案（可能不是最干净和最酷的）。尽管这个问题很老，但有人可能会遇到同样的问题并在这里找到一些价值。

关于在收到推送通知时如何自动打开 Android 应用程序的第二个问题，从服务类内部输入以下内容：

```
Intent dialogIntent = new Intent(this, myActivity.class);
dialogIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(dialogIntent); 
```

请记住，上面的代码将切断通知声音，因此检查屏幕状态并在锁定时播放一些声音可能是个好主意：

```
/* Check if the device is locked, play ring tone and vibrator */
if (!(((PowerManager) getSystemService(Context.POWER_SERVICE)).isScreenOn())){
  vibrator = (Vibrator) getSystemService(VIBRATOR_SERVICE);
  Sound = MediaPlayer.create(getApplicationContext(), R.raw.sound);

  try { Sound.start(); }                     
  catch(Exception e){ Log.i("intentService", "Error Playing sound");}

  vibrator.vibrate(3000);

}

dialogIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(dialogIntent); 
```

Also, don't forget to release mediaplayer !! just do some research and you'll find an answer, there are different ways but one way could be to wait until the sound is played:

```
Sound.isPlaying() 
```

And then release:

```
Sound.release() 
```

P.S: You can set the notificationSound to null and remove the "if" condition so the ringtone will always be played (even when the screen is ON and the app is opened automatically)

```
setSound(null) 
```

# c# - 换行符在 javascript 谷歌地图标签中不起作用

> ID：15468991
> 
> 赞同：0
> 
> 时间：2013-03-18T02:43:37.603
> 
> 标签：c#, javascript, asp.net, google-maps, google-maps-api-3

下面的代码在多边形上放置了一个标签，并且除了换行符之外工作正常。文本中的变量是 c#，它们也可以正常工作。出于某种原因，我无法让换行符正常工作。它可以编译，但所有内容都显示在同一行。

```
var AustinLabel = new MapLabel({
                    text: "<%=zipCentroid[i]%>" + "\n" + "<%=colorCount[i]%>" + "<%=layerType%>", 
                    position: new google.maps.LatLng(<%=zipLat[i]%>, <%=zipLong[i]%>),
                    map: map,
                    fontSize: 30,
                    minZoom: 13,
                    fontColor: "#FFFFFF",
                    strokeColor: "#000000"
                });
                AustinLabel.set('position', new google.maps.LatLng(<%=zipLat[i]%>, <%=zipLong[i]%>)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T02:48:05.730

尝试

```
<BR> 
```

因为它使用 html 标记，或使用 css 来创建中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T03:15:08.990

谷歌地图 MapLabel 对象使用不支持多行文本的 HTML5 画布 fillText() 方法。

[https://code.google.com/p/google-maps-utility-library-v3/source/browse/trunk/maplabel/src/maplabel.js?r=300](https://code.google.com/p/google-maps-utility-library-v3/source/browse/trunk/maplabel/src/maplabel.js?r=300)

您可能要考虑改用 InfoWindow。这是 InfoWindow 的文档： [https ://developers.google.com/maps/documentation/javascript/reference#InfoWindow](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)

```
var AustinLabel = new google.maps.InfoWindow({
                    content: "<%=zipCentroid[i]%>" + "<br/>" + "<%=colorCount[i]%>" + "<%=layerType%>", 
                    position: new google.maps.LatLng(<%=zipLat[i]%>, <%=zipLong[i]%>)
                }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-02T10:35:20.070

来自：[多行/换行文本支持 - GitHub](https://github.com/googlemaps/js-map-label/issues/8)

* * *

方式一：

要获得多行支持，请添加以下内容：

```
MapLabel.prototype.wrapText = function(context, text, x, y, maxWidth, lineHeight) {
  var words = text.split(' ');
  var line = '';

  for(var n = 0; n < words.length; n++) {
    var testLine = line + words[n] + ' ';
    var metrics = context.measureText(testLine);
    var testWidth = metrics.width;
    if (testWidth > maxWidth && n > 0) {
      context.strokeText(line, x, y);
      context.fillText(line, x, y);

      line = words[n] + ' ';
      y += lineHeight;
    }
    else {
      line = testLine;
    }
  }
  context.strokeText(line, x, y);
  context.fillText(line, x, y);
}; 
```

在drawCanvas_中，改变

```
if (strokeWeight) {
  ctx.lineWidth = strokeWeight;
  ctx.strokeText(text, strokeWeight, strokeWeight);
}

ctx.fillText(text, strokeWeight, strokeWeight); 
```

到

```
if (strokeWeight) {
  ctx.lineWidth = strokeWeight;

}

this.wrapText(ctx, text, strokeWeight, strokeWeight, *ADD MAX WIDTH*, *ADD LINEHEIGHT*);
//e.g.  this.wrapText(ctx, text, strokeWeight, strokeWeight, 200, 14); 
```

此代码是以下代码的扩展： [http ://www.html5canvastutorials.com/tutorials/html5-canvas-wrap-text-tutorial/](http://www.html5canvastutorials.com/tutorials/html5-canvas-wrap-text-tutorial/)

* * *

方式二：

代替：

```
if (strokeWeight) {
   ctx.lineWidth = strokeWeight;
   ctx.strokeText(text, strokeWeight, strokeWeight);
}

ctx.fillText(text, strokeWeight, strokeWeight); 
```

和

```
if (strokeWeight) {
   ctx.lineWidth = strokeWeight;
  // ctx.strokeText(text, strokeWeight, strokeWeight);
}
    // ctx.fillText(text, strokeWeight, strokeWeight);
    var lineheight = 15;
    var lines = text.split('\n');

for (var i = 0; i<lines.length; i++) {
   ctx.fillText(lines[i], strokeWeight, strokeWeight + (i * lineheight));
   if (strokeWeight) {
        ctx.lineWidth = strokeWeight;
        ctx.strokeText(lines[i], strokeWeight, strokeWeight + (i * lineheight));
      }
} 
```

# python - 仅替换文本文件第一行中的某些元素

> ID：15468992
> 
> 赞同：2
> 
> 时间：2013-03-18T02:43:39.553
> 
> 标签：python, file-io, replace

我有一个文本文件，想替换某些“NaN”元素。

我通常使用`file.replace`函数在整个文本文件中更改具有一定数量的 NaN。
现在，我想只在文本文件的第一行而不是整个文本中用某个数字替换 NaN。
你能给我这个问题的提示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T03:11:11.460

您只能读取整个文件，在第一行调用 .replace() 并将其写入新文件。

```
with open('in.txt') as fin:
    lines = fin.readlines()
lines[0] = lines[0].replace('old_value', 'new_value')

with open('out.txt', 'w') as fout:
    for line in lines:
        fout.write(line) 
```

如果你的文件不是很大，你可以只使用 .join()：

```
with open('out.txt', 'w') as fout:
    fout.write(''.join(lines)) 
```

如果它真的很大，你可能最好同时读取和写入行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T03:24:04.400

只要您接受一些限制，您就可以破解它。替换字符串的长度必须与原始字符串相同。如果替换字符串比原始字符串短，则用空格填充较短的字符串以使其长度相等（这仅在您的数据中可以接受额外空格时才有效）。如果替换字符串比原始字符串长，则无法就地替换，需要遵循 Harold 的回答。

```
with open('your_file.txt', 'r+') as f:
    line = next(f) # grab first line
    old = 'NaN'
    new = '0  ' # padded with spaces to make same length as old 
    f.seek(0) # move file pointer to beginning of file
    f.write(line.replace(old, new)) 
```

这在任何长度的文件上都会很快。

# visual-studio-2010 - CUDA 5.0“生成可重定位设备代码”导致设备符号无效错误

> ID：15468997
> 
> 赞同：0
> 
> 时间：2013-03-18T02:44:29.457
> 
> 标签：visual-studio-2010, cuda

我正在尝试使用 CUDA 5 进行单独编译。出于这个原因，我在 Visual Studio 2010 中将“生成可重定位设备代码”设置为“是（-rdc=true）”。程序编译没有错误，但是，我得到一个无效当我尝试使用 cudaMemcpyToSymbol 初始化设备常量时出现设备符号错误。

即我有以下常数

```
__constant__ float gdDomainOrigin[2]; 
```

并尝试使用

```
cudaMemcpyToSymbol(gdDomainOrigin, mDomainOrigin, 2*sizeof(float)); 
```

这会导致错误。当我在没有上述选项集的情况下将所有内容编译为一个整体时，不会发生该错误。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:09:04.603

我无法重现这个。如果从两个 .cu 文件构建应用程序，一个包含 __constant__ 符号和一个简单内核，另一个包含运行时 API 咒语以填充该常量内存并调用内核，它*仅在启用可重定位设备代码时才*有效，即：

```
__constant__ float gdDomainOrigin[2];

__global__
void kernel(float *inout)
{
    inout[0] = gdDomainOrigin[0];
    inout[1] = gdDomainOrigin[1];
} 
```

和

```
#include <cstdio>

extern __constant__ float gdDomainOrigin;
extern __global__ void kernel(float *);

inline 
void gpuAssert(cudaError_t code, char * file, int line, bool Abort=true)
{
    if (code != 0) {
        fprintf(stderr, "GPUassert: %s %s %d\n",
                             cudaGetErrorString(code),file,line);
        if (Abort) exit(code);
    }       
}
#define gpuErrchk(ans) { gpuAssert((ans), __FILE__, __LINE__); }

int main(void)
{
    const float mDomainOrigin[2] = { 1.234f, 5.6789f };
    const size_t sz = sizeof(float) * size_t(2);

    float * dbuf, * hbuf;

    gpuErrchk( cudaFree(0) );
    gpuErrchk( cudaMemcpyToSymbol(gdDomainOrigin, mDomainOrigin, sz) );
    gpuErrchk( cudaMalloc((void **)&dbuf, sz) );

    kernel<<<1,1>>>(dbuf);
    gpuErrchk( cudaPeekAtLastError() );

    hbuf = new float[2];
    gpuErrchk( cudaMemcpy(hbuf, dbuf, sz, cudaMemcpyDeviceToHost) );

    fprintf(stdout, "%f %f\n", hbuf[0], hbuf[1]);

    return 0;
} 
```

在带有 Kepler GPU 的 64 位 linux 系统上的 CUDA 5 中编译和运行这些会产生以下结果：

```
$ nvcc -arch=sm_30 -o shared shared.cu shared_dev.cu 
$ ./shared 
GPUassert: invalid device symbol shared.cu 23

$ nvcc -arch=sm_30 -rdc=true -o shared shared.cu shared_dev.cu 
$ ./shared 
1.234000 5.678900 
```

您可以看到，在第一次编译中，没有生成可重定位的 GPU 代码，找不到符号。在第二种情况下，使用可重定位的 GPU 代码生成，找到了它，并且目标文件中的 elf 标头看起来与您期望的一样：

```
$ nvcc -arch=sm_30 -rdc=true -c shared_dev.cu 
$ cuobjdump -symbols shared_dev.o

Fatbin elf code:
================
arch = sm_30
code version = [1,6]
producer = cuda
host = linux
compile_size = 64bit
identifier = shared_dev.cu

symbols:
STT_SECTION      STB_LOCAL    .text._Z6kernelPf
STT_SECTION      STB_LOCAL    .nv.constant3
STT_SECTION      STB_LOCAL    .nv.constant0._Z6kernelPf
STT_CUDA_OBJECT  STB_LOCAL    _param
STT_SECTION      STB_LOCAL    .nv.callgraph
STT_FUNC         STB_GLOBAL   _Z6kernelPf
STT_CUDA_OBJECT  STB_GLOBAL   gdDomainOrigin

Fatbin ptx code:
================
arch = sm_30
code version = [3,1]
producer = cuda
host = linux
compile_size = 64bit
compressed
identifier = shared_dev.cu
ptxasOptions = --compile-only 
```

也许您可以尝试我的代码和编译/诊断步骤，看看您的 Windows 工具链会发生什么。