# StackOverflow 问答 14738000-14738999

# django - 我想对 dayarchiveview 进行子类化，这样我就可以以不同的方式呈现数据

> ID：14738002
> 
> 赞同：1
> 
> 时间：2013-02-06T20:18:43.983
> 
> 标签：django, django-templates, django-views

我的 django views.py 文件中有一个 dayarchiveview

```
class day_archive(DayArchiveView):
    model=Timer
    paginate_by=12
    allow_future =True
    allow_empty=True
    month_format = '%m'
    day_format='%d'
    date_field='start_hour'
    template_name='timer/timer_archive_date'

    def get_queryset(self):
        return Timer.objects.filter(author=self.request.user) 
```

但我想使用 djangotables2 将返回的数据呈现为表，如下所示：

```
 import django_tables2 as tables

 class Job_table(tables.Table):
    class Meta: 
    model = Timer
    attrs = {"class": "paleblue"}
    fields= ('start_hour','end_hour','category','subcategory','duration')

    def render_duration(self,value):
        from timehuman import sectohour
        hh= sectohour(value)
        return hh 
```

我如何将我的数据呈现为表格而不是呈现的列表？( django 的 context object_list ) 我如何访问要发送到 object_list 上下文的数据并修改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T16:38:11.317

这就是我最终做的事情：可能是hackish，但我让我可以访问将要进入视图的相同数据，并且我可以将其呈现为表格。

```
class day_archive(DayArchiveView):
    model=Timer
    paginate_by=12
    allow_future =True
    allow_empty=True
    month_format = '%m'
    day_format='%d'
    date_field='begin_time'
    template_name='timer/timer_archive_date'

    def get_queryset(self):
        return Timer.objects.filter(author=self.request.user)

    def render_to_response(self, context, **response_kwargs):
        """
        Returns a response, using the `response_class` for this
        view, with a template rendered with the given context.

        If any keyword arguments are provided, they will be
        passed to the constructor of the response class.
        """

    tbl = context['object_list']  #this line is my hack, i dont know better.
    if (tb1 != None):
        jt = Timer_table(blo)
        RequestConfig(self.request).configure(jt)
        from django.db.models import Sum
        total = tbl.aggregate(Sum('duration'))
        t2 = total['duration__sum']
        if (t2 != None):
            timedel= str(datetime.timedelta(seconds=float(t2)))
            context['table']= jt
            context['total'] = timedel 

    return self.response_class(
        request = self.request,
        template = self.get_template_names(),
        context = context,
        **response_kwargs
    ) 
```

# iphone - 针对 XCode 4.6 下的 iOS 4.x 设备

> ID：14738003
> 
> 赞同：0
> 
> 时间：2013-02-06T20:18:44.203
> 
> 标签：iphone, ios, ios4, xcode4.6

我有 Xcode 4.6，我可以定位的最低 iOS 版本是 4.3 ！如何使用我的 XCode 定位 iOS 4.x 设备？那可能吗 ？

感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T20:28:06.027

Xcode 4.6（和 4.5）的目标不能低于 4.3。您可以从 Apple 下载旧版本的 Xcode，而不是针对较低版本的 iOS： [https ://developer.apple.com/downloads/index.action?name=Xcode](https://developer.apple.com/downloads/index.action?name=Xcode)

您可以并行使用多个版本的 Xcode。

# ruby-on-rails-3 - 是否有“Rails Way”在资产管道中包含 jQuery 插件？

> ID：14738012
> 
> 赞同：10
> 
> 时间：2013-02-06T20:19:01.300
> 
> 标签：ruby-on-rails-3, jquery-plugins, ruby-on-rails-3.2, asset-pipeline

许多 jQuery 插件具有以下目录结构：

```
/<plugin name>
../css
../images
../js 
```

CSS 文件通常具有指向其中图像的相对链接。我想要做的是将这些插件包含`Rails Way`在资产管道下，并希望这不涉及必须重命名文件引用以删除相对链接。有这样的 Rails 方式吗？

在 Asset Pipeline 中包含一个已经缩小的 jQuery 插件是否也有点过头了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T13:02:48.243

据我所知，您应该尝试将资产添加到推荐的加载路径中。如果您正在运行的应用程序激活了资产管道，它应该在扩展 application.rb 中的路径后找到您的资产

```
config.assets.paths << Rails.root.join("plugins/plugin_name/assets/") 
```

不舒尔，如果这是您要求的，但如果不是，您应该检查：[http ://guides.rubyonrails.org/asset_pipeline.html#asset-organization](http://guides.rubyonrails.org/asset_pipeline.html#asset-organization)

*记得重启你的服务器*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T13:35:24.900

我有同样的问题，也试图找到“Rails 方式”来做到这一点。这就是我最终得到的结果：

正如 Rob 已经提到的：

> **vendor/assets**用于外部实体拥有的资产，例如 JavaScript 插件和 CSS 框架的代码。

资料来源：[2.1 资产组织](http://guides.rubyonrails.org/asset_pipeline.html#asset-organization)

让我们举一个实际的例子：使用[`jquery_datepicker`](https://github.com/albertopq/jquery_datepicker)gem （注意：由于这个问题，我们不得不使用一种解决方法：[*bundle pack 不适用于 git sources*](https://github.com/carlhuda/bundler/issues/67)）。

1）安装gem（非常简单）：

```
cd vendor/gems
git clone https://github.com/albertopq/jquery_datepicker.git 
```

2) 将此添加到您的 Gemfile

```
gem 'jquery_datepicker', :path => 'vendor/gems/jquery_datepicker' 
```

3) 安装一个 jquery-ui 主题

*   从[*ThemeRoller 中*](http://jqueryui.com/themeroller/)选择一个主题，检查 Datepicker 和 Slider 以及 jQUery 版本
*   下载并解压包的内容
*   文件夹中的 CSS/images`css/theme-name`移动它们：
    *   `jquery-ui-1.8.xx.custom.css`到`app/vendor/stylesheets/`
    *   `images`文件夹到（是的`app/vendor/images/`，移动整个文件夹`images`，这样你最终会得到这样的东西`app/vendor/images/images/ui-icons_256x240.png`
*   i18n from the `development-bundle/ui/i18n` folder (optional) move them to:
    *   Create a folder `i18n` under `app/vendor/javascripts/`
    *   move `jquery.ui.datepicker-xx.js` to this folder `app/vendor/javascripts/i18n/`
    *   make sure the `i18n` folder is loaded so include in `application.js`

```
//= require_directory ./i18n
```

`vendor/assets` is loaded automatically AFAIK so you don't have to include the path in the asset pipeline.

I'd like to see how others are approaching this, it's a very good question.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T15:31:43.640

我认为你没有收到答案的原因是因为它有点不清楚你在问什么。您是否在问将插件放入资产管道是否过大？你问是否必须重命名文件引用？

我总是把我所有的 jquery 插件放在我的资产管道中。是否矫枉过正，都在一个地方，它们只编译一次，所以即使编译它们需要更长的时间，它也不会影响我的应用程序。

# ruby-on-rails - 试图弄清楚提供什么

> ID：14738014
> 
> 赞同：1
> 
> 时间：2013-02-06T20:19:06.887
> 
> 标签：ruby-on-rails

我正在关注 ruby​​ on rails 教程，我在用户视图中看到了以下内容，`<% provide(:title, 'Sign up') %>`只是想知道这到底在做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T20:32:33.047

这应该回答你的问题：

> content_for?
> 
> 只需使用 #content_for 检查是否已捕获任何内容
> 
> 根据视图中的内容以不同方式呈现部分布局很有用。

例子

如果没有 #content_for :right_column，也许你会在布局中使用不同的 CSS

```
<%# This is the layout %>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
 <title>My Website</title>
 <%= yield :script %>
</head>
<body class="<%= content_for?(:right_col) ? 'one-column' : 'two-column' %>">
 <%= yield %>
 <%= yield :right_col %> 
```

> 提供（名称，内容 = nil，&block）
> 
> 与 content_for 相同，但与流一起使用时会直接刷新回布局。换句话说，如果你想在渲染给定模板时多次连接到同一个缓冲区，你应该使用 content_for，如果没有，使用 provide 告诉布局停止寻找更多内容。

**简短回答：** 在 Ruby on Rails 教程中，提供的特殊 rails 函数用于在每个页面上设置不同的标题。根据您在标题上的哪个 static_page 进行相应设置。Ruby on Rails 教程书的 3.3.3（“Embedded Ruby”）中给出了进一步的解释。

# wcf - 使用 basicHttpBinding 和 TransportCredentialOnly 在 IIS 7 中托管的 WCF 服务失败

> ID：14738015
> 
> 赞同：1
> 
> 时间：2013-02-06T20:19:14.573
> 
> 标签：wcf, iis-7, windows-authentication

我正在尝试配置一个基本的 IIS 7 托管 WCF 服务，该服务使用 Windows 身份验证来授权用户。`<security mode="TransportCredentialOnly">`我已经看到了许多示例，这些示例演示了如何使用带有SSL 的basicHttpBinding 来传输凭据。当我将服务配置为使用 TransportCredentialOnly 时，如果我尝试在 IE 中查看 svc 文件，则会收到以下错误：

> 找不到与绑定 BasicHttpBinding 的终结点的方案 http 匹配的基地址。注册的基地址方案是 [https]。

我在 IIS 7 中托管。SSL 配置了有效的证书。Windows 身份验证已打开。匿名身份验证已关闭。应用程序池是在 ApplicationPoolIdentity 下运行的 ASP.Net v4.0

这是我的服务的配置文件：

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <authentication mode="Windows" />
    <roleManager enabled="true" defaultProvider="AspNetWindowsTokenRoleProvider">
    </roleManager>
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="svcTest" >
          <serviceMetadata httpGetEnabled="false" httpsGetEnabled="true"  />
          <serviceDebug includeExceptionDetailInFaults="true" httpsHelpPageEnabled="true" httpHelpPageEnabled="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpEndpointBinding">
          <security  mode="TransportCredentialOnly">
            <transport clientCredentialType="Windows"/>
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <services>
      <service name="WCF_Test.Service1" behaviorConfiguration="svcTest">
        <endpoint name ="Service1Endpoint"
                  address="EndpointTest"
                  binding="basicHttpBinding"
                  bindingConfiguration="BasicHttpEndpointBinding"
                  contract="WCF_Test.IService1">
        </endpoint>
      </service>
    </services>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

如果我将绑定更改为使用`Transport`而不是，`TransportCredentialOnly`那么我可以在 IE 中查看我的服务文件。然后，我可以为我的 Web 客户端创建一个代理，并从我的客户端调用服务上的方法，并尝试使用以下代码从服务方法授权用户：

```
if(System.Web.Security.Roles.IsUserInRole(@"Admins")) 
```

此代码不起作用，因为它使用在服务器上运行 IIS 的帐户的身份 (IIS APPPOOL\ASP.NET v4.0)，而不是从网页调用 Web 服务的用户的身份。

1.  如何使用有效的 SSL 证书配置 IIS 7 以使用具有安全模式 =“TransportCredentialOnly”的 basicHttpBinding？

2.  如何将我的用户 Windows 凭据客户端流向 Web 服务，以便我可以使用此代码在 Web 服务上授权用户？

    [PrincipalPermission(SecurityAction.Demand, Role = "Admins")]

或此代码

```
if(System.Web.Security.Roles.IsUserInRole(@"Admins")) 
```

任何帮助将不胜感激。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:46:40.057

问题可能出在 IIS 的配置中，在它到达您的代码或 web.config 之前。

如果 IIS 启用了匿名身份验证，进入 ASP.net 的请求将看起来像是来自 IIS 的用户身份。

在 IIS 配置中，您必须关闭匿名身份验证并打开 Windows 身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T14:09:24.527

我的猜测是你需要使用 basicHttp **s** Binding 来代替。

# c# - String.Equals 它是如何工作的？

> ID：14738017
> 
> 赞同：1
> 
> 时间：2013-02-06T20:19:20.393
> 
> 标签：c#, string, equals

我有字符串 text="camel"，然后我想检查文本是否包含字母“m”，所以我遍历它并使用以下方法检查它：

```
if (text[i].Equals("m")) 
```

但这永远不会让我回归真实......为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T20:21:13.797

由于您正在将字符与字符串进行比较，因此这是行不通的。[这是有关字符串比较](http://www.dotnetperls.com/string-equals)的更多信息

在这种情况下，您应该使用

```
if(text.Contains("m")) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T20:26:52.767

正如@MattGreer 所提到的，您目前正在比较一个字符和一个字符串。这是因为您为文字选择了分隔符，并且因为`text[i]`从字符串返回字符而不是该字符串的子字符串。

请注意使用[字符串文字](http://msdn.microsoft.com/en-us/library/aa691090.aspx)分隔符（引号）和[字符文字](http://msdn.microsoft.com/en-us/library/aa691087.aspx)分隔符（撇号）之间的区别：

```
if (text[i].Equals('m')) 
```

此外，正如其他人所说，除非出于某种原因您想遍历每个字符，否则`String.Contains()`似乎可以达到预期目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T20:38:53.300

You need to find all occurences of a letter in a text as I understand it:

```
string text = "camel";
string lookup = "M";
int index = 0;
while ( (index = text.IndexOf(lookup, index, StringComparison.OrdinalIgnoreCase) != -1)
{
   // You have found what you looked for at position "index".

} 
```

I don't think that you get it any faster than this.

Good luck with your quest.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T02:21:03.560

Kyle C 已经给了你答案，所以这就是你完成整个过程的方式，我将`winforms`以此为例：

```
private void button1_Click(object sender, EventArgs e)
{
    string text = "camel";

    if (text.Contains("m") || text.Contains("M"))//also checks for capital M
    {
        MessageBox.Show("True");
    }
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-06T20:22:32.290

*无奇迹*

利用`Contains`

您是在问“camel”是否等同于“m” - 它不是。

“骆驼”**包含**“m”。

# visual-c++ - 错误 LNK2019 Directx10 VC++2010

> ID：14738019
> 
> 赞同：0
> 
> 时间：2013-02-06T20:19:22.387
> 
> 标签：visual-c++, directx-10

我正在尝试了解 DirectX 2010，在设置库后我如何安装库：-VC++ 2010-查看-其他 windows-属性管理器

我打开了 Microsoft.Cpp.Win32.user VC++ 目录：- 包括目录：C:\Program Files (x86)\Microsoft DirectX SDK (June 2010)\Include Library Directories: C:\Program Files (x86)\Microsoft DirectX SDK （2010 年 6 月）\Lib\x64

这是我得到的错误列表：- 错误 1 ​​错误 LNK2019：未解析的外部符号 _D3DX10CreateEffectFromFileW@48 在函数“long __cdecl InitDevice(void)”(?InitDevice@@YAJXZ) c:\Users\ahmed_saad\documents\visual studio 2010 中引用\Projects\CodeName_Yarab\CodeName_Yarab\Main.obj CodeName_Yarab 错误 2 错误 LNK2019：未解析的外部符号 _D3D10CreateDeviceAndSwapChain@32 在函数“long __cdecl InitDevice(void)”(?InitDevice@@YAJXZ) c:\Users\ahmed_saad\documents\visual 中引用studio 2010\Projects\CodeName_Yarab\CodeName_Yarab\Main.obj CodeName_Yarab Error 3 error LNK1120: 2 unresolved externals c:\users\ahmed_saad\documents\visual studio 2010\Projects\CodeName_Yarab\Debug\CodeName_Yarab.exe 1 1 CodeName_Yarab

我正在使用 Windows 8 pro x64

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:49:52.030

您可能需要链接到 .lib 文件，因为 DX 不在常用库中。查找 .lib 文件并将其添加到您的链接器属性。

# jquery - 有例外的交替行颜色

> ID：14738025
> 
> 赞同：2
> 
> 时间：2013-02-06T20:19:54.663
> 
> 标签：jquery, css

我有一个隐藏了一些行的表。我确实展示了它们，但根据需要。用户必须执行操作才能显示这些行。每个隐藏的行都有带有 TR 标签的 class="hideMe"。

我想为交替行添加一个类，以更改颜色，但仅限于那些始终可见的。通常它很简单，但我不确定如何合并隐藏行异常。

```
$('.myTable tr:odd:not(hideMe)').addClass('altRow'); 
```

可以只用 CSS 来完成，还是我需要加入一些 jQuery 魔法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T20:21:40.397

您将不得不求助于 JavaScript：

```
$('.myTable tr:not(.hideMe)').each(function (i) {
    $(this).toggleClass( 'altRow', !! (i % 2) );
}); 
```

这是小提琴：http: [//jsfiddle.net/PxT93/](http://jsfiddle.net/PxT93/)

* * *

为了[稍微*提高*性能](http://jsperf.com/modulo-vs-bit-wise)，您可以使用按`&`位运算符而不是模数：

```
$('.myTable tr:not(.hideMe)').each(function (i) {
    $(this).toggleClass( 'altRow', !! (i & 1) );
}); 
```

这是小提琴：http: [//jsfiddle.net/PxT93/1/](http://jsfiddle.net/PxT93/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T02:10:56.343

实际上，只需“稍微”调整一下您的代码，您就会得到一个不错的解决方案：

```
$('.myTable tr:not(.hideMe):odd').addClass('altRow'); 
```

看到它在这里工作：http: [//jsfiddle.net/HYHWJ/](http://jsfiddle.net/HYHWJ/)

另一种解决方案是：

```
$('.myTable tr:not(.hideMe)')
  .removeClass('altRow')
  .filter(':odd')
  .addClass('altRow'); 
```

在这里看到这个工作：http: [//jsfiddle.net/r4N5g/](http://jsfiddle.net/r4N5g/)

# php - 如何在单击链接时触发另存为弹出窗口？具体来说，我如何触发 MIME 类型的变化？

> ID：14738026
> 
> 赞同：0
> 
> 时间：2013-02-06T20:19:54.867
> 
> 标签：php

我已阅读以下问题：[save file onclick](https://stackoverflow.com/questions/11664402/save-file-onclick)

我明白它在说什么，但我不明白如何让它适用于任意文件。我会将 href 属性设置为等于带有该信息的 PHP 脚本吗？

是 POST 还是 GET？我可以指定吗？我将使用脚本中的什么方法来检索文件名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:26:45.623

请求的方法与它关系不大。您的请求将触发来自服务器的响应，服务器反过来提供文件。

它可能是类似的东西`www.site.com/serveFile.php?file=foo.txt`。您在哪里指定要作为 GET 参数提供的文件。

然后在代码中，您可以检索文件名（或一些数字标识符，或用于从数据库中检索数据以提供 CSV 内容的某个日期范围），使用该变量，生成内容，设置标题。一切都是如此。认为您链接的帖子解释了以正确的下载方式提供内容的机制（另存为）。

# ruby - 从另一个数组中的 hashie:mash 中检索值

> ID：14738028
> 
> 赞同：0
> 
> 时间：2013-02-06T20:20:00.343
> 
> 标签：ruby, hash

我正在尝试从 elasticsearch 返回的结果中提取一个值。返回的结果集是一个数组，数组内的对象是 Hashie:Mash。

结果集如下所示：

```
#<Hashie::Mash @fields=#<Hashie::Mash latency=[8.0] response_code=[200.0] response_time=[744.0] sampler_label=["globalnav"] success=[1] my_id=["specnn1"]> @message="globalnav,1,744,200,8,specnn1,\r" @source="file:///fqdn/ffw_spectrum.log" @source_host="xplda04.ieee.org" @source_path="/full/path/ffw_spectrum.log" @tags=["jm_type"] @timestamp="2013-02-04T20:47:12.472Z" @type="jm_type" _id="5ACJI7NqRvCK_THBiRszrQ">
#<Hashie::Mash @fields=#<Hashie::Mash latency=[8.0] response_code=[200.0] response_time=[801.0] sampler_label=["globalnav"] success=[1] my_id=["specnn1"]> @message="globalnav,1,801,200,8,specnn1,\r" @source="file:///fqdn/ffw_spectrum.log" @source_host="xplda04.ieee.org" @source_path="/full/path/ffw_spectrum.log" @tags=["jm_type"] @timestamp="2013-02-04T20:47:12.489Z" @type="jm_type" _id="Mzpz30H3Qf6wLxx_IAO8uQ">
#<Hashie::Mash @fields=#<Hashie::Mash latency=[8.0] response_code=[200.0] response_time=[10.0] sampler_label=["homepage"] success=[1] my_id=["specnn1"]> @message="homepage,1,10,200,8,specnn1,\r" @source="file:///fqdn/ffw_spectrum.log" @source_host="xplda04.ieee.org" @source_path="/full/path/ffw_spectrum.log" @tags=["jm_type"] @timestamp="2013-02-04T20:47:28.115Z" @type="jm_type" _id="vN8t39UmQwy9PxhRGKU5uQ">
#<Hashie::Mash @fields=#<Hashie::Mash latency=[8.0] response_code=[200.0] response_time=[9.0] sampler_label=["homepage"] success=[1] my_id=["specnn1"]> @message="homepage,1,9,200,8,specnn1,\r" @source="file:///fqdn/ffw_spectrum.log" @source_host="xplda04.ieee.org" @source_path="/full/path/ffw_spectrum.log" @tags=["jm_type"] @timestamp="2013-02-04T20:47:28.196Z" @type="jm_type" _id="mMkV4sqwTEqU6OiY5-q3JA">
#<Hashie::Mash @fields=#<Hashie::Mash latency=[10.0] response_code=[200.0] response_time=[747.0] sampler_label=["globalnav"] success=[1] my_id=["specnn1"]> @message="globalnav,1,747,200,10,specnn1,\r" @source="file:///fqdn/ffw_spectrum.log" @source_host="xplda04.ieee.org" @source_path="/full/path/ffw_spectrum.log" @tags=["jm_type"] @timestamp="2013-02-04T20:47:12.475Z" @type="jm_type" _id="LVZaHrExS7Cy8l9ndCBGIA">
#<Hashie::Mash @fields=#<Hashie::Mash latency=[17.0] response_code=[200.0] response_time=[25.0] sampler_label=["random_content"] success=[1] my_id=["specnn1"]> @message="random_content,1,25,200,17,specnn1,\r" @source="file:///fqdn/ffw_spectrum.log" @source_host="xplda04.ieee.org" @source_path="/full/path/ffw_spectrum.log" @tags=["jm_type"] @timestamp="2013-02-04T20:47:28.185Z" @type="jm_type" _id="cLaYGsA_T9e2F70NbvoSqQ">
#<Hashie::Mash @fields=#<Hashie::Mash latency=[800.0] response_code=[200.0] response_time=[808.0] sampler_label=["random_content"] success=[1] my_id=["specnn1"]> @message="random_content,1,808,200,800,specnn1,\r" @source="file:///fqdn/ffw_spectrum.log" @source_host="xplda04.ieee.org" @source_path="/full/path/ffw_spectrum.log" @tags=["jm_type"] @timestamp="2013-02-04T20:47:12.465Z" @type="jm_type" _id="OFbQcHyATDS2l-IWxltIug">
#<Hashie::Mash @fields=#<Hashie::Mash latency=[15.0] response_code=[200.0] response_time=[20.0] sampler_label=["homepage"] success=[1] my_id=["specnn1"]> @message="homepage,1,20,200,15,specnn1,\r" @source="file:///fqdn/ffw_spectrum.log" @source_host="xplda04.ieee.org" @source_path="/full/path/ffw_spectrum.log" @tags=["jm_type"] @timestamp="2013-02-04T20:47:12.467Z" @type="jm_type" _id="gdz3yDkTSyqgn-2S5yirEg">
#<Hashie::Mash @fields=#<Hashie::Mash latency=[393.0] response_code=[200.0] response_time=[400.0] sampler_label=["random_content"] success=[1] my_id=["specnn1"]> @message="random_content,1,400,200,393,specnn1,\r" @source="file:///fqdn/ffw_spectrum.log" @source_host="xplda04.ieee.org" @source_path="/full/path/ffw_spectrum.log" @tags=["jm_type"] @timestamp="2013-02-04T20:47:12.491Z" @type="jm_type" _id="5XGEVQzFS_S_OTLpD1KPfQ">
#<Hashie::Mash @fields=#<Hashie::Mash latency=[16.0] response_code=[200.0] response_time=[22.0] sampler_label=["random_content"] success=[1] my_id=["specnn1"]> @message="random_content,1,22,200,16,specnn1,\r" @source="file:///fqdn/ffw_spectrum.log" @source_host="xplda04.ieee.org" @source_path="/full/path/ffw_spectrum.log" @tags=["jm_type"] @timestamp="2013-02-04T20:47:12.504Z" @type="jm_type" _id="wi14pyNHRWaH6AK7874KiA"> 
```

我可以通过循环遍历数组然后循环遍历hasie并遍历数组来提取response_time，然后得到哈希mash中的值。

有没有一种简单或有效的方法来`response_time`使用红宝石提取价值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:42:31.813

正在`array.map(&:response_time)`做你想要达到的目标吗？

# actionscript-3 - AS3：从麦克风捕获压缩流

> ID：14738032
> 
> 赞同：1
> 
> 时间：2013-02-06T20:20:21.250
> 
> 标签：actionscript-3

现在我有这样的代码：

```
soundData = new ByteArray();
microphone = Microphone.getMicrophone();
microphone.codec = SoundCodec.SPEEX;
microphone.rate = 8;
microphone.gain = 100;
microphone.addEventListener(SampleDataEvent.SAMPLE_DATA, micSampleDataHandler);

function micSampleDataHandler(event:SampleDataEvent):void {
  while (event.data.bytesAvailable) {
    var sample:Number = event.data.readFloat();
    soundData.writeFloat(sample);
  }
} 
```

原始数据是从麦克风记录下来的。使用 SPEEX 编解码器压缩后如何将其转换为 ByteArray？请注意，必须播放转换后的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:04:32.177

参考这个代码。

```
soundData.position=0;

var soundOutput:Sound = new Sound();
soundOutput.addEventListener(SampleDataEvent.SAMPLE_DATA, playSound);
soundOutput.play();

function playSound(soundOutput:SampleDataEvent):void {
    if (! soundData.bytesAvailable>0)
    {
        return;
    }
    for (var i:int = 0; i < 8192; i++) 
    {
        var sample:Number=0;
        if (soundData.bytesAvailable>0) 
        {
            sample=soundData.readFloat();
        }
        soundOutput.data.writeFloat(sample);
        soundOutput.data.writeFloat(sample);
    }
} 
```

使用`SoundCodec.SPEEX`上面的代码播放率不是 1x 你应该更正 playSound 函数。也许你测试过。如果你删除`microphone.codec = SoundCodec.SPEEX;`知道。

**更多信息**：[Adobe 官方捕获声音输入](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7d1d.html)

在 speex 中录制时有一些问题。

参考关注文章。

[http://forums.adobe.com/message/3571251#3571251](http://forums.adobe.com/message/3571251#3571251)

[http://forums.adobe.com/message/3584747](http://forums.adobe.com/message/3584747)

如果 SoundFormat 指示 Speex，则音频是以 16 kHz 采样的压缩单声道。在 Flash 中，声音对象以 44khz 播放。由于您以 16khz(Speex) 采样，因此您通过 SampleDataEvent 事件处理程序 2.75 发送数据的速度比获取该数据的速度快。因此，您必须更改 playSound for（或 while）循环。

我推荐以下网站。这篇文章是“如何调整播放率？” 很棒的教程。

[http://www.kelvinluck.com/2008/11/first-steps-with-flash-10-audio-programming/](http://www.kelvinluck.com/2008/11/first-steps-with-flash-10-audio-programming/)

# c++ - 如何在 c++ 中重载将左操作数（const char []）与右操作数字符串对象连接起来的按位与（&）（作业）

> ID：14738045
> 
> 赞同：3
> 
> 时间：2013-02-06T20:20:52.960
> 
> 标签：c++

*编辑*：紧随其后的代码是工作版本，位于标题中

```
inline char * operator & (const char String1 [], const MyStringClass & String2)
{
    int length = strlen (String1) + String2.Length();
    char * pTemp = new char [length + 1];
    strcpy (pTemp, String1);
    strcat (pTemp, String2.GetStr());   
    return pTemp;
} 
```

这是我第一次觉得有必要提出问题，因为我自己无法找到有用的信息（通过搜索、谷歌、书籍等）。我的课程书是 C++ Primer 5th Edition，我读过 Ch. 14 涵盖了运算符重载。我不一定要寻找“答案”，而是朝着正确的方向轻推（因为我确实想学习这些东西）。

赋值让我们创建了自己的字符串类并重载了一堆运算符，它们将在任一侧接受一个类对象——除了赋值运算符，它可能只在左侧接受一个类对象。我玩过各种返回类型（这不能是成员函数；试图使它成为友元函数的努力失败了）。

```
/* 
   Note: return by value, otherwise I get a warning of returning the address
   of a local variable, temporary. But no matter the return type or what I'm
   returning, I always get the error: C2677: binary '&' : no global operator 
   found which takes type 'MyStringClass' (or there is no acceptable 
   conversion)
*/

MyStringClass operator & (const char String1 [], const MyStringClass & String2)
{
    /*
       The only requirement is that the left side has const char [] so that
       (const char []) & (MyStringClass &) will concatenate. There is no return 
       type requirement; so, I could either try and return a string object or
       an anonymous C-type string.

       cout << StringOject1 << endl; // this works
       cout << (StringObject1 & "bacon") << endl; // so does this; 
       // another function overloads & such that: obj & const char [] works

       cout << ("bacon" & StringObject1) << endl; // but not this
    */

    MyStringClass S (String1); // initialize a new object with String1
    S.Concat (String2); // public member function Concat() concatenates String2
                        // onto String1 in S
    return S; // this does not work

    /* a different way of trying this... */
    int Characters = strlen (String1) + String2.Length();
    int Slots = Characters;
    char * pTemp = new char [Slots + 1];
    strcpy (pTemp, String1);
    strcat (pTemp, String2.pString); // this won't work; pString is a private 
                                     // member holding char * and inaccessible
    // making it pointless to try and initialize and return an object with pTemp
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:33:06.007

查看了您的代码，据我所知，您可能正在寻找这样的东西：

```
class MyStringClass
{
public:
    const char* data() const;

private:
const char* charptr;
};

const char* MyStringClass::data() const
{
    return charptr;
}

MyStringClass operator & (const char String1 [], const MyStringClass & String2)
{
    /* a different way of trying this... */
    int len = strlen(String1) + String2.Length();
    char * pTemp = new char [len + 1]; //total length of both strings
    strcpy (pTemp, String1);
    strcat (pTemp, String2.data()); // you need to have a public member function that returns the string as const char*
    MyStringClass str(pTemp); //requires MyStringClass to have constructor that takes char*
    return str; //return the string

} 
```

# php - mysql 结果太大 - htaccessfile

> ID：14738046
> 
> 赞同：0
> 
> 时间：2013-02-06T20:20:53.127
> 
> 标签：php, mysql

我有一个 mysql 查询，应该返回大约 16,000 个结果。

显然这对我目前的设置来说太多了。

我将增加什么 PHP 变量以允许显示所有结果？

memory_limit 128M post_max_size 8M upload_max_filesize 2M

还有什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:22:27.993

您应该增加的配置选项是`memory_limit`，但是为什么您需要一次处理应用程序中的 16,000 行呢？你确定这是必要的吗？

通常，您可以将此逻辑整合到一个`while`循环中，该循环一次查询数据库中数百甚至一千行的批次。

# mod-rewrite - mod_rewrite 禁止调用子文件夹

> ID：14738047
> 
> 赞同：0
> 
> 时间：2013-02-06T20:20:54.243
> 
> 标签：mod-rewrite

我正在使用 2 个域，例如[http://doma.in](http://doma.in)和[http://domain.com](http://domain.com)

缩短 URL 仅调用从我的脚本生成的 URL。来自缩短 URL 的所有其他调用都应转发到主域。这就是为什么我有这个小的 mod_rewrite 规则。

```
RewriteCond %{HTTP_HOST} ^doma.in [NC]
RewriteRule ^/?$ http://www.domain.com/$1 [R=301,L] 
```

**问题**

我想禁止从缩短 URL 调用子文件夹。因为缩短 URL 也可以生成自定义 URL，例如

[http://www.nokia.com](http://www.nokia.com) -> [http://doma.in/nokia](http://doma.in/nokia)

如果我有一个名为**“nokia”**的子文件夹，它将不会被转发到目标。而不是转发它是调用子文件夹。

使用此规则通过 mod_rewrite 转发 URL。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-x
RewriteRule ^(.*) /redirect.php?id=$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:57:26.757

你的问题有点不清楚。

如果即使您有一个名为 /nokia 的目录也希望为 /nokia 执行重定向，则需要删除以下行： RewriteCond %{REQUEST_FILENAME} !-d

该条件说的是“如果请求的文件路径是现有目录，则不要继续。”

# wordpress - 任何页面上的 Wordpress 分页功能

> ID：14738048
> 
> 赞同：0
> 
> 时间：2013-02-06T20:20:55.030
> 
> 标签：wordpress, pagination

好的，

因此，我有一个名为 Publications 的常规页面，在此页面上我有一个自定义 WP_Query，用于查询名为 article 的自定义帖子类型。我列出了文章，也想在此处进行分页，但是当我使用此代码对链接进行分页时，它会出现 404：

```
$big = 999999999;

echo paginate_links(array(
    'base' => str_replace($big, '%#%', get_pagenum_link( $big)),
    'format' => '?paged=%#%',
    'current' => max(1, get_query_var('paged')),
    'total' => $wp_query->max_num_pages,
    'prev_text' => __('Previous'),
    'next_text' => __('Next'),
)); 
```

现在，我的固定链接设置为“月份和名称”

当我将我的永久链接设置为默认值时，它可以工作，但我无法更改我的永久链接。其他人有这个问题吗？

**编辑：**我也将格式更改为'/page/%#%'，但它不起作用。这也是我的 wp_query 参数：

```
$args = array(
    'posts_per_page'=>10,
    'post_type'=>'article',
    'order'=>'DESC',
    'orderby'=>'post_date',
    'meta_query'=>$meta_query
); 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:28:33.950

如果您更改永久链接，您还需要更新您的代码以匹配。这部分`'format' => '?paged=%#%'`

> 格式（字符串）（可选）用于分页结构。默认值为 '?page=%#%'，如果使用漂亮的永久链接，这将是 '/page/%#%'，其中 '%#%' 将替换为页码。默认值：'?page=%#%'

[资源](http://codex.wordpress.org/Function_Reference/paginate_links)

# javascript - Node-Mysql 数据库查询 + res.json 太慢了

> ID：14738051
> 
> 赞同：1
> 
> 时间：2013-02-06T20:20:58.753
> 
> 标签：javascript, node.js, node-mysql

我正在学习节点。

使用 Express 和 Node-Mysql，我能够成功地查询我的 mysql 数据库并将结果作为 JSON 返回给客户端。

但是，它太慢了。对于 LIMIT 为 100 的简单查询，大约需要 6 秒才能获得响应。

根据我的记录器，数据库查询只需要大约 8 毫秒即可运行 - 所以我不认为 node-mysql 是问题所在。

但我唯一要做的另一件事是将结果集传递给要转换为 json 的响应对象。

这是我的代码，大致如下：

**路线：**

```
app.get( "/exercises", function( req, res ){
    exercises.get( req.query, function( result ){
        res.json( result );
    });
}); 
```

**模型：**

```
module.exports.get = function( params, cb ){
    var sql = "SELECT * FROM exercises LIMIT 100";
    db.do( sql, function( result ){
        var response = {};
        response.data = result[ 0 ];
        response.meta = result[ 1 ][ 0 ];
        cb( response );
    });
}; 
```

**D B：**

```
module.exports.do = function( sql, vals, cb ){
    var selectStart = +new Date();
    pool.acquire(function( err, db ){
        db.query( sql, vals, function( err, result ) {
            cb( result );
            console.log( "Query Execuction: %d ms", +new Date() - selectStart );
            pool.release( db );
        });
    });
}; 
```

有谁知道我可能做错了什么/为什么将结果集发送给客户需要这么长时间？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:14:13.520

我对游泳池不熟悉，不幸的是我还不能发表评论。我注意到的一件事是你`db.do`用两个参数调用，而它需要三个参数。当您尝试回调时，这应该引发“未定义不是函数”。

# database - Sybase中的游标有多慢

> ID：14738059
> 
> 赞同：2
> 
> 时间：2013-02-06T20:21:31.430
> 
> 标签：database, stored-procedures, cursor, sybase

听说sybase中游标很慢，甚至有人说要避免使用游标。有人能说出 Sybase 中的游标有多慢吗？只读游标是否正常，或者它们也很慢，完全使用游标是否可以接受

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:27:32.810

[http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.dc20020_1251/html/databases/databases537.htm](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.dc20020_1251/html/databases/databases537.htm)

这是您的示例答案.... 针对 5000 行表的示例执行时间

```
程序 | 访问方法 | 时间  
-------------------------------------------------- ------------------
增加价格 | 使用三表扫描 | 28 秒  
增加价格光标 | 使用游标，单表扫描 |125 秒

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:26:34.310

我认为声明不完整。实际索赔可能是

游标比基于 SET 的操作/sql 语句慢。

这适用于所有数据库，而不仅仅是 Sybase。作为一般规则，您必须尽可能地尝试（努力）并使用 SQL 和基于集合的操作，而不是游标和循环记录。

# visual-c++ - VS2012 C++ 运行时库未出现在发布先决条件中

> ID：14738060
> 
> 赞同：2
> 
> 时间：2013-02-06T20:21:32.737
> 
> 标签：visual-c++, deployment, visual-studio-2012, clickonce, publish

我正在使用 ClickOnce 在 Windows 7 上使用 VS2012 部署 C# 应用程序，并引用 C++ 项目。

在 VS2010 中，我能够将 VC++ 2010 运行时库作为先决条件之一，但是在 VS2012 中，没有这样的等价物。

在非开发人员机器上运行已部署的应用程序时，我收到无法加载 C++ 项目的错误。

[我从http://www.microsoft.com/en-us/download/details.aspx?id=30679](http://www.microsoft.com/en-us/download/details.aspx?id=30679)安装了 VC++ 2012 可再发行组件， 但在先决条件中仍然没有看到此选项。

当我浏览到：C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0A\Bootstrapper\Packages\ 有一个 package.xml 说：您没有安装 Visual C++ 2012 运行时库所需的权限(x86)。

这没有任何意义，因为我是这台计算机的管理员。

有没有人能够在 2012 年参考 C++ 项目部署 .NET 项目？

# c# - 确定什么是字节数组？

> ID：14738065
> 
> 赞同：-3
> 
> 时间：2013-02-06T20:21:41.440
> 
> 标签：c#, byte

我最近开始学习 C# Networking，我想知道如何判断接收到的 Byte 数组是文件还是字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T20:23:43.997

字节数组只是一个字节数组。它只是输入数据。

如何*解释*这些数据取决于您。例如，文本文件和字符串之间有什么区别？

从根本上说，如果您的应用程序需要知道如何解释数据，您必须将其放入协议中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:24:47.737

字节数组只是一个字节数组。但是，您可以使原始字节数组包含一个描述它是什么类型的字节（假设您是它的发起者）。然后你找到这个描述符字节并用它来做决定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T20:29:26.723

字符串是编码的字节数组；文件可以包含字符串和/或二进制数据。

ASCII 字符串使用 0-127 之间的字节值来表示字符和控制代码。对于 UTF8，人们已经编写了验证例程 ( [https://stackoverflow.com/a/892443/884862](https://stackoverflow.com/a/892443/884862) )。

您必须先检查数组的所有字符串编码特征，然后才能假定它是二进制文件。

**编辑**这是一个关于使用 .NET 对文件类型进行分类的 SO 问题[，如何根据文件签名而不是](https://stackoverflow.com/questions/58510/using-net-how-can-you-find-the-mime-type-of-a-file-based-on-the-file-signature)使用文件签名（前 X 个字节）的扩展名来确定文件的 mimetype 来找到文件的 mime 类型。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-06T20:27:02.157

不完全是“文件”，数组包含数据。您应该遍历该数组并写入数据，

尝试这个：

```
foreach(string data in array)
{ 
    Console.WriteLine(data); 
} 
```

现在，如果它不包含字符串，而是数据，您可以简单地使用

```
foreach(var data in array)
{
    Console.WriteLine(data.ToString());
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-06T20:24:05.023

不，你不能。数据就是数据，你必须在你的网络通信形式的协议之上层，它需要这样说：“*如果我看到的第一个字节是 a`1`接下来的四个字节代表 a `int`，如果我看到 a`2`读取下一个字节并且那是紧随其后的文本字符串的长度……* ”

比发明自己的协议更简单的解决方案是使用预构建的协议，它可以为您提供更高级别的抽象，如[WCF](http://msdn.microsoft.com/en-us/library/ms734712.aspx)，因此您不需要处理字节数组。

# php - 将多个 MySQL 字段连接成一个 JSON 响应

> ID：14738067
> 
> 赞同：0
> 
> 时间：2013-02-06T20:21:50.607
> 
> 标签：php, mysql

我是新手。我想将 MySQL 中的 3 个字段（city、provinceName、countryName）连接成逗号分隔的字符串，并以“city”为键返回 JSON 中的字符串。我无法获取字符串，也无法将它们构造成 JSON 格式的完整文本。我的PHP是：

```
$fetch = mysql_query("SELECT DISTINCT city GROUP_CONCAT(DISTINCT city, stateProvinceName, countryName SEPARATOR ',') FROM neighborhoods
WHERE countryAbbreviation='$countryAbbreviation' AND stateProvinceName IS NOT NULL
") or die(mysql_error());
while ($row = mysql_fetch_array($fetch, MYSQL_ASSOC)){
$row_array['city'] = $row['city'];
array_push($return_arr,$row_array);
}
echo json_encode($return_arr); 
```

当我测试查询时，它不是逗号分隔的。相反，我得到魁北克市魁北克加拿大。当我运行网站时，JSON 响应只有 {"city":"Quebec City"}。所需的响应是 {"city":"Quebec City, Quebec, Canada"} - 或者在一般情况下，多个“城市”对象。

我应该改变什么。请具体。我没有很好地遵循一般说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:29:34.497

```
while(....)
{
     $city = $row['city'] . ", ";
}
//cuts off last comma, alternatively convert above loop to do/while
$city = substr($city, strpos(",", $city, -1));

echo json_encode($city); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:41:11.953

您使用城市字段而不是连接字符串。

```
$fetch = mysql_query("SELECT DISTINCT CONCAT_WS(',', city, stateProvinceName, countryName) AS full_address FROM neighborhoods
WHERE countryAbbreviation='$countryAbbreviation' AND stateProvinceName IS NOT NULL
") or die(mysql_error());
while ($row = mysql_fetch_array($fetch, MYSQL_ASSOC)){
$row_array['city'] = $row['full_address'];
array_push($return_arr,$row_array);
}
echo json_encode($return_arr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T20:46:25.197

当您希望每个城市具有不同的值时，请对城市使用 group by 子句。

# performance - 有选择地禁止插件加载到 Wordpress 管理区域

> ID：14738074
> 
> 赞同：3
> 
> 时间：2013-02-06T20:22:19.590
> 
> 标签：performance, wordpress, plugins, admin

有人知道如何禁用某些插件在 Wordpress 的后端/管理区域中加载吗？

目前，我正在运行一个站点，其中包含许多主要面向前端操作的插件，但是当我访问后端页面（即 /wp-admin/edit.php）时，**所有**CSS、JS 和插件文件都在为插件加载那里不需要，从而增加了管理区域的加载时间和响应能力。

我正在寻找一种解决方案，无论是基于代码的插件，都可以选择性地加载仅管理员插件，理想情况下无需破解核心文件。

我正在使用 wordpress 3.5.1。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T22:11:23.997

结帐[插件管理器](http://wordpress.org/extend/plugins/plugin-organizer/)。我没有使用它，但根据它的描述，您可以“通过任何帖子类型或 wordpress 管理的 URL 选择性地禁用插件”。我猜你可以禁止某些插件在包含`/wp-admin/`.

您也可以自己修改插件。这取决于它们是如何编写的，但是您可以找到它们将 css 和 js 文件排入队列的位置，并将它们包装在如下`is_admin()`语句中：

```
// Make sure we aren't in the admin area
if ( !is_admin() ) {
    wp_enqueue_script('plugin-script');
    wp_enqueue_style('plugin-style');
} 
```

这将确保脚本/样式仅在前端加载。

另一种可能性是找到所有通过插件加载的 css 和脚本文件，并在您的`functions.php`文件中取消注册它们。这将需要您稍微浏览一下插件以找到所有文件的句柄，但它应该可以正常工作。这将取消注册管理区域中排队的一些默认内容，因此您可以明白我的意思。

```
add_action( 'admin_init', 'remove_admin_styles' );

function remove_admin_styles() {
    wp_deregister_style(
        'wp-admin',
        'ie',
        'colors',
        'colors-fresh',
        'colors-classic',
        'media',
        'install',
        'thickbox'
    );
} 
```

正如您所说，您不想弄乱核心文件，但如果您绝对需要，您可以实施[本文](http://betterwp.net/15-wordpress-selective-plugin-loading/)中描述的解决方案。我相信您知道，除非绝对必要，否则更改 WordPress 核心文件不是一个好主意。请记住，如果您将来升级 WordPress，这些更改将会消失。

# java - 这种连接池场景将如何发展？

> ID：14738075
> 
> 赞同：1
> 
> 时间：2013-02-06T20:22:20.073
> 
> 标签：java, spring, jakarta-ee, jersey, jetty

我们有一个 Web 应用程序，它使用 C3P0 来汇集我们的连接。我们将 C3P0 作为数据源注入到 JdbcTemplate 中。你可以在这里看到我们是如何做到的：

```
<bean id="dataSourceDev" class="com.mchange.v2.c3p0.ComboPooledDataSource">
    <property name="driverClass" value="${databasedev.driver}" />
    <property name="jdbcUrl" value="${databasedev.url}"/>
    <property name="user" value="${databasedev.username}"/>
    <property name="password" value="${databasedev.password}"/>

    <property name="initialPoolSize" value="5" />
    <property name="minPoolSize" value="5" />
    <property name="maxPoolSize" value="1000" />
    <property name="acquireIncrement" value="5" />
    <property name="maxStatements" value="1000" />
    <property name="maxStatementsPerConnection" value="1000"/>
    <property name="maxIdleTime" value="10800"/> <!-- 3 hours -->
</bean>

<bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
    <constructor-arg>
         <ref bean="dataSourceDev" />
    </constructor-arg>
</bean>

<bean id="someDaoBean" class="com.gedi.platform.dao.SomeDaoClass">
    <property name="jdbcTemplate" ref="jdbcTemplate" />
</bean>

<bean id="someResourceClass" class="com.gedi.platform.SomeResourceClass">
    <property name="someDao" ref="someDaoBean" />
</bean> 
```

您可以看到它是一个 Java EE Web 应用程序 - 它使用 Jetty 作为其应用程序服务器。我的问题是，Jetty 如何实例化我们的 bean，这将如何影响连接池？如果我们有几十个用户在不同时间使用网站，所有这些用户会被放在同一个连接池中吗？还是每个客户端只有一个连接池，每个 HTTP 客户端都会在其中创建 Resource、DAO、JdbcTemplate 和 C3P0 的新实例？

我说清楚了吗？我想要的是一个用于所有 HTTP 请求的连接池，无论它们来自来自波士顿还是新西兰的 Web 浏览器。这样，连接池就发挥了最大的作用。但是，如果为每个 HTTP 客户端都实例化了一个新的连接池，那么池化最终不会有太大的改进。

**编辑**

一个重要的花絮 - 我们使用 JAX-RS 的 Jersey 参考实现来生成 RESTful 接口。因此，我们的 servlet 通过 Jersey 分派请求，Jersey 会找到合适的资源类/方法来处理它们。我想知道 Jersey 是在每个请求上重新实例化这些类，还是始终保留它们的一个实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:34:18.903

泽西岛和码头都与这里无关。春天在这里很重要。在 Spring 中，每个 bean（比如你的`dataSourceDev`,`jdbcTemplate`和`someDaoBean`）都是单例。这意味着当 Spring 应用程序上下文启动时，它将为它们中的每一个创建一个实例。

这意味着无论您使用什么`DataSource`（Web 请求、后台作业等），都使用相同的实例（因此使用相同的连接池）。你是对的，如果每个请求都创建连接池，那不会有太大的改进。实际上它会慢得多。

但是在您的情况下（这就是 99% 的 Web 应用程序的工作方式），所有需要数据库访问的代码都将竞争并重用相同的连接（或者如果没有可用的连接则等待）。顺便说一句，确保您的数据库实际上可以处理 1000 个并发连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:36:51.950

Spring 创建`beans`并缓存它们，因此除非您将 bean 指定为`prototype`作用域（为每个请求创建一个新 bean），否则默认情况下所有 bean 都是单例的。码头不干涉。

当请求进入时，`DispatcherServlet`捕获请求并将其交给适当的处理程序。如果未将处理程序声明为 bean，则处理程序是同一个`prototype`bean。

您正确理解了连接池。这正是创建这个概念的原因。无论请求来自何处，在任何时间点与数据库的最大连接数都将是您在`maxPoolSize`属性中定义的连接数。

# iphone - 视图在自动布局中消失，ios

> ID：14738080
> 
> 赞同：0
> 
> 时间：2013-02-06T20:22:27.917
> 
> 标签：iphone, ios, autolayout

目标是无论我处于纵向还是横向模式，我的图像都将位于距离超级视图的左边缘 20 处，而 viewHolder 也将位于距离超级视图的底部边缘 20 处。

我正在做的是

视图控制器.h

```
@property (strong, nonatomic) IBOutlet NSLayoutConstraint *verticalConsImage;
@property (strong, nonatomic) IBOutlet UIImageView *imageView;
@property (strong, nonatomic) IBOutlet UIView *viewHolder;
@property (strong, nonatomic) IBOutlet NSLayoutConstraint *bottomConsViewHolder;
@property (strong, nonatomic) IBOutlet NSLayoutConstraint *topConsViewHolder; 
```

视图控制器.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [self.view removeConstraint:self.verticalConsImage];
    [self.view removeConstraint:self.topConsViewHolder];
    [self.view removeConstraint:self.bottomConsViewHolder];

    //the position of the imageView left edge is equal of the superview’s left edge plus 20.
    self.verticalConsImage = [NSLayoutConstraint
                                      constraintWithItem:self.imageView
                                      attribute:NSLayoutAttributeLeading
                                      relatedBy:NSLayoutRelationEqual
                                      toItem:self.view
                                      attribute:NSLayoutAttributeLeading
                                      multiplier:1.0f
                                      constant:20.0f];
    // add it again to the view
    [self.view addConstraint:self.verticalConsImage];
    //the position of the viewHolder's bottom edge is equal of the superview’s bottom edge plus 20\.    
    self.bottomConsViewHolder = [NSLayoutConstraint
                                      constraintWithItem:self.viewHolder
                                      attribute:NSLayoutAttributeBottom
                                      relatedBy:NSLayoutRelationEqual
                                      toItem:self.view
                                      attribute:NSLayoutAttributeBottom
                                      multiplier:1.0f
                                      constant:20.0f];
    // add it again to the view
    [self.view addConstraint:self.bottomConsViewHolder]; 
```

但是，当我运行该应用程序时，viewHolder 根本不会以纵向或横向显示。图片附在下面 ![在此处输入图像描述](../Images/b84826483380237d5003a749698d982f.png)

我在这里缺少什么，如果您对此有任何想法，请提供帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:03:22.843

您需要从 IB 视图顶部以黄色突出显示的视图中删除约束，并删除所有代码，不需要它。如果系统不允许你删除那个约束，那是因为那个视图没有固有尺寸，所以你需要先给它一个固定的高度，然后再删除顶部约束。

我认为您的视图消失的原因是因为这两个约束是在 IB 中的 4" 屏幕上设置的，而模拟器使用的是 3.5" 屏幕，所以要保持这些约束，唯一可以改变的是视图的高度，它可能被设置为零或更低。

# wpf - 在 WPF 应用程序中未安装 SQL Server CE 4.0 的用法

> ID：14738087
> 
> 赞同：1
> 
> 时间：2013-02-06T20:22:45.907
> 
> 标签：wpf, entity-framework, sql-server-ce

我有一个访问 SQL Server CE 数据库中数据的 wpf 应用程序。该应用程序和数据库旨在无需安装即可在 PC 上运行，但尝试这样做会失败。（未能找到数据库提供者）我采取了以下步骤：

*   `System.Data.SqlServerCE`-> 复制本地
*   将 7 个 SQL Server CE 程序集复制到应用程序目录中
*   验证 VC++ 在系统上可用
*   添加以下内容`app.config`

    ```
    <system.data>
      <DbProviderFactories>
        <remove invariant="System.Data.SqlServerCe.4.0" />
        <add name="Microsoft SQL Server Compact Data Provider 4.0" 
             invariant="System.Data.SqlServerCe.4.0" 
             description=".NET Framework Data Provider for Microsoft SQL Server Compact" 
             type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" />
      </DbProviderFactories>                          
    </system.data> 
    ```

在尝试执行以下代码时：

```
 try
  {
    MessageBox.Show("initialize db connection");
    context = new DataAccess.PersistentStorageEntities();
    MessageBox.Show(context.Database.Connection.ConnectionString);
  }
  catch (Exception ex)
  {
    MessageBox.Show("exception: "+ex.Message);
    if (ex.InnerException != null)
    {
      MessageBox.Show("innerexception: "+ ex.InnerException.Message);  
    }
  } 
```

我收到消息：

> *例外：不是有效的 Win32 应用程序。（来自 HRESULT 的异常：0x800700C1）*

我怀疑它在加载时遇到问题`System.Data.SqlServerCe.4.0`，但无法弄清楚为什么它会尝试加载为 Win32

有什么想法吗？我觉得我在这里失去了理智

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:41:34.293

1：您必须使用 Private 文件夹中的 System.Data.SqlServerCe dll（以及同一文件夹中的 System.Data.SqlServerCe.Entity.dll dll）。

2：您必须将 x86 和 AMD64 文件夹添加到您的项目中，并在每个文件夹中包含所需的文件（包括私有 VC++ 运行时文件夹）（如在 Private 文件夹中）。确保包含所有文件作为内容

3：您必须将配置引用更改为版本 4.0.0.1

有关更多详细信息，请参阅我的博客：“将 SQL Server Compact 4.0 与桌面专用部署和安装项目 (MSI) 结合使用（第 2 部分）”

# javascript - Mongoose DBrefs - 转换为 ObjectId 的值失败

> ID：14738090
> 
> 赞同：0
> 
> 时间：2013-02-06T20:22:53.483
> 
> 标签：javascript, mongodb, mongoose

我有一个包含团队详细信息的团队模式，以及一个用于存储这些团队的匹配模式。我正在尝试使匹配模式中的主/客队成为对 Team 对象的引用。我把我的代码放在下面，保存团队时出现错误，但我不禁觉得我在模式或保存比赛时做错了。任何人都可以帮忙吗？

到目前为止，我有以下代码：

Team.js 提取

```
var Team = new Schema({
  'key' : {
    unique : true,
    type : Number,
    default: getId
  },
  'name' : { type : String,
              validate : [validatePresenceOf, 'Team name is required'],
              index : { unique : true }
            }
});

module.exports.Schema = Team;
module.exports.Model = mongoose.model('Team', Team); 
```

Match.js 提取

```
var util = require('util');
var mongoose = require('mongoose');
var Schema = mongoose.Schema;
var Team = require('../schemas/Team').Schema;

var Match = new Schema({
  'key' : {
    unique : true,
    type : Number,
    default: getId
  },
  'hometeam' : {
    type : Schema.ObjectId,
    ref : 'Team'
  },
  'awayteam' : {
    type : Schema.ObjectId,
    ref : 'Team'
  }
});

module.exports = mongoose.model('Match', Match); 
```

index.js

```
 app.get('/match', function(req, res) {
    var key = 1356136550152; // Reading
    Team.findByKey(key, function(err, team) {
      if(err) {
        res.send("An error occured");
      }
      if(!team) { 
        res.send("The team does not exist");
      }
      var match = new Match();
      match.hometeam = team;
      match.save(function(err) {
        if(err) {
          util.log('Error while saving Match: ' + util.inspect(err));
          res.send("An error occured whilst saving the match");
        } else {
          res.send("Saved the match");
        }
      });
    });
  }); 
```

错误：

```
Error while saving Match: { message: 'Cast to ObjectId failed for value "{ name: \'testTeam\',\n  _id: 50d500663ca6067226000001,\n  __v: 0,\n  key: 1356136550152 }" at path "hometeam"',
  name: 'CastError',
  type: 'ObjectId',
  value: 
   [ { name: 'testTeam',
       _id: 50d500663ca6067226000001,
       __v: 0,
       key: 1356136550152 } ],
  path: 'hometeam' } 
```

team._id 出错

```
Error while saving Match: { [MongoError: E11000 duplicate key error index: testdb.matches.$team.name_1  dup key: { : null }]
  name: 'MongoError',
  err: 'E11000 duplicate key error index: testdb.matches.$team.name_1  dup key: { : null }',
  code: 11000,
  n: 0,
  connectionId: 8,
  ok: 1 }

db.matches.getIndexes()
[
    {
        "v" : 1,
        "key" : {
            "_id" : 1
        },
        "ns" : "testdb.matches",
        "name" : "_id_"
    },
    {
        "v" : 1,
        "key" : {
            "key" : 1
        },
        "unique" : true,
        "ns" : "testdb.matches",
        "name" : "key_1",
        "background" : true,
        "safe" : null
    },
    {
        "v" : 1,
        "key" : {
            "team.key" : 1
        },
        "unique" : true,
        "ns" : "testdb.matches",
        "name" : "team.key_1",
        "background" : true,
        "safe" : null
    }
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T02:25:11.843

其中`index.js`应该是：

```
match.hometeam = team._id; 
```

代替：

```
match.hometeam = team; 
```

**更新**

关于新的错误消息，您似乎在`matches`集合上有一个唯一索引，该索引引用了不存在的字段。使用以下命令将其放入外壳中：

```
db.matches.dropIndex('team.name_1') 
```

# rubygems - 无法安装 chef，gem 版本与 net-ssh net-ssh-multi net-ssh-gateway 冲突

> ID：14738091
> 
> 赞同：7
> 
> 时间：2013-02-06T20:22:56.407
> 
> 标签：rubygems, chef-infra, net-ssh

使用 rvm 和一个空的 gemset，我得到了这个：

```
$ gem install chef --no-ri --no-rdoc
ERROR:  While executing gem ... (Gem::DependencyError)
    Unable to resolve dependencies: chef requires net-ssh (~> 2.2.2); net-ssh-multi requires net-ssh (>= 2.6.5); net-ssh-gateway requires net-ssh (>= 2.6.5) 
```

我已经尝试通过安装早期版本的 net-ssh-gateway 和 net-ssh-multi 来解决它，但是 net-ssh-multi 1.1 版通过安装 1.1.2 让我感到困惑。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-06T20:28:34.127

这是我第一个成功的解决方法：

```
gem install net-ssh -v 2.2.2 --no-ri --no-rdoc
gem install net-ssh-gateway -v 1.1.0 --no-ri --no-rdoc --ignore-dependencies
gem install net-ssh-multi -v 1.1.0 --no-ri --no-rdoc --ignore-dependencies
gem install chef --no-ri --no-rdoc 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-06T20:41:11.063

这是由于 net-ssh-multi 的更新将所需的 net-ssh 版本提高到 >= 2.6.5。Chef 团队已经在开发一个新版本。目前，您可以使用

```
gem install chef --pre --no-ri --no-rdoc 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-08T22:48:55.687

此序列将在正在引导的服务器上安装 10.16.4 版 Chef，并解决版本冲突：

```
gem install net-ssh -v 2.2.2 --no-ri --no-rdoc
gem install net-ssh-gateway -v 1.1.0 --ignore-dependencies --no-ri --no-rdoc
gem install net-ssh-multi -v 1.1.0 --ignore-dependencies --no-ri --no-rdoc
gem install chef --no-rdoc --no-ri -v 10.16.4 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-06T22:15:49.290

Bundler 可以毫不费力地协商这些模糊的依赖关系。这是使用 Bundler 魔术安装 Chef 的单线：

```
echo -e "source :rubygems\ngem 'chef'" > Gemfile && bundle 
```

或者您可以使用[Opscode 推荐的安装程序](http://www.opscode.com/chef/install/)。这是 Ubuntu 的单线：

```
curl -L https://www.opscode.com/chef/install.sh | sudo bash 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-13T11:12:10.550

我有办法让 chef 10.12.0 gem 安装在 Ruby 1.8.7 上。我不得不稍微调整 Mojo 的答案才能完成这项工作。

在 Mojo 序列中的前面步骤之后，`gem install chef -v 10.12.0`失败了：

`ERROR: Error installing chef: mime-types requires Ruby version >= 1.9.2.`

我通过强制使用恰好可以完成工作的旧版本 (1.21) 的 mime 类型来解决此错误。

整个事情是：

```
gem install net-ssh -v 2.2.2 --no-ri --no-rdoc
gem install net-ssh-gateway -v 1.1.0 --ignore-dependencies --no-ri --no-rdoc
gem install net-ssh-multi -v 1.1.0 --ignore-dependencies --no-ri --no-rdoc
gem install mime-types -v 1.21 --no-ri --no-rdoc
gem install chef --no-rdoc --no-ri -v 10.12.0 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-02T03:22:35.953

Bundler很好的解决了这个问题

```
mkdir /tmp/install-chef
pushd /tmp/install-chef
gem install bundler
echo -e "source 'https://rubygems.org'\ngem 'chef', '= 10.18.2'" > Gemfile
bundle install
popd
rm -rf /tmp/install-chef 
```

# c++ - 使截断在运行时打印错误的 C++ 自动方法

> ID：14738092
> 
> 赞同：3
> 
> 时间：2013-02-06T20:23:01.537
> 
> 标签：c++, truncation

我刚刚加入了一个拥有数千行代码的团队，例如：

```
int x = 0; 
x=something(); 
short y=x; 
doSomethingImportantWith(y); 
```

编译器给出了很好的警告说：将 XX 位类型值转换为“短”会导致截断。有人告诉我，没有真正发生截断的情况，但我对此表示严重怀疑。

有没有一种很好的方法可以在每个案例中插入支票，效果如下：

```
if (x>short.max) printNastyError(__FILE,__LINE); 
```

在每次分配之前？手动执行此操作将花费比我想使用更多的时间和精力，并且编写一个脚本来读取警告并将这些内容添加到正确的文件以及所需的包含似乎有点过头了——尤其是因为我希望有人已经这样做（或类似的事情）。

我不关心性能（真的）或除了知道这些问题何时发生之外的任何事情，所以我可以只修复真正重要的问题，或者我可以说服管理层这是一个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T22:00:45.087

您可以尝试使用以下丑陋的 hack 编译和运行它：

```
#include <limits>
#include <cstdlib>

template<class T>
struct IntWrapper
{
    T value;

    template<class U>
    IntWrapper(U u) {
        if(u > std::numeric_limits<T>::max())
            std::abort();
        if(U(-1) < 0 && u < std::numeric_limits<T>::min()) // for signed U only
            std::abort();
        value = u;
    }

    operator T&() { return value; }
    operator T const&() const { return value; }
};

#define short IntWrapper<short>

int main() {
    int i = 1, j = 0x10000;
    short ii = i;
    short jj = j; // this aborts
} 
```

显然，它可能会破坏作为模板参数传递的代码，`short`并且可能会在其他情况下破坏，因此请取消定义它破坏构建的位置。您可能需要添加运算符重载，以便通常的算术与包装器一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:44:56.363

您可能可以为 gcc 编写一个插件来检测这些截断并发出对检查转换是否安全的函数的调用。[您可以用C](http://gcc.gnu.org/wiki/plugins)或[Python](https://gcc-python-plugin.readthedocs.org/en/latest/)编写这些插件。如果你更喜欢使用 clang，它也支持编写[插件](http://clang.llvm.org/docs/ClangPlugins.html)。

我认为最简单的方法是让插件将 unsafe cast from `int`to转换`short`为 call to a function `_convert_int_to_float_fail_if_data_loss(value)`。我将把它作为练习留给读者如何编写这样的插件。

# c++ - 如何在 Eclipse 中创建与操作系统无关的运行配置？

> ID：14738096
> 
> 赞同：0
> 
> 时间：2013-02-06T20:23:15.623
> 
> 标签：c++, eclipse, eclipse-cdt

我想要一个运行配置，无论我是在 Windows 系统还是 Unix 系统上进行测试，我都可以使用它。

一切似乎都很好，除了在运行配置对话框中 C/C++ 应用程序的字段也需要应用程序的扩展。

![在此处输入图像描述](../Images/fa55c8a40e84ede0fa275b183583dbc6.png)

所以在 Windows 中，它是：`Path/To/Application.exe`

在 Unix 系统上，它是：`Path/To/Application`

如果有某种方法可以自动检测操作系统并应用适当的扩展名，我可以与从事该项目的每个人共享相同的 *.launch 文件，而不管他们的操作系统如何。

我已经研究过使用变量来设置路径和文件名，但其中大多数都需要额外的对话框和用户输入。通配符在这里似乎也不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:21:38.887

感谢[Marc K.](https://bugs.eclipse.org/bugs/show_bug.cgi?id=400342)指出只需将“.exe”扩展名添加到 unix 可执行文件的快速修复。不过，正如他所提到的，这并不是解决问题的完美方法。

# database - 应用程序是否应该自测其数据库

> ID：14738099
> 
> 赞同：0
> 
> 时间：2013-02-06T20:23:18.753
> 
> 标签：database, testing, production-environment, qa

让一个中型业务应用程序绑定到一个数据库。此应用程序有许多影响多个表的业务规则。以这个简单的为例：

*   数据库有名为`Person`, `Customer`,的表`ProspectiveCustomer`，每个表都有一个“活动”标志
*   一个人可以是客户和/或潜在客户
*   同一个人的客户和潜在客户不能同时处于活动状态
*   如果此人不活跃，则客户或潜在客户不能活跃
*   发票的问题和生命周期决定了谁是活跃的或不活跃的

此类规则过于复杂，无法由数据库触发器强制执行，并且根据设计选择，没有集中式代码来完成这项肮脏的工作。然后总是有可能一个错误将数据库设置为不一致的状态，正如我们每天在测试时注意到的那样。

由于我担心这种情况在生产中未被发现，我想知道编写一个检查数据库状态并报告任何不一致的脚本是否是个好主意。除了一些活动记录之外，这既有助于发现生产错误，也有助于在需要时修复数据库。

这种方法的唯一缺点是那些自测脚本的额外开发时间（在我的情况下不可忽略）。**我错过了一些基本的东西吗？**

此外，如果编写了这些自测，它们在测试活动中也会非常有用，从而最大限度地减少开发它们的额外工作量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:28:44.277

如果您想在数据库级别执行此操作，您可能需要考虑使用检查约束。

您可以在检查约束中执行多少操作可能会受到您使用的 RDBMS 的限制。

此线程中 SQL Server 中的复杂检查约束示例：http: [//social.msdn.microsoft.com/Forums/en/sqldocumentation/thread/1d4cf16b-9b37-4eb5-b66b-a428487f42c9](http://social.msdn.microsoft.com/Forums/en/sqldocumentation/thread/1d4cf16b-9b37-4eb5-b66b-a428487f42c9)

*（编辑：最好在应用程序级别强制执行此操作，这可能是您的选择，也可能不是）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:51:21.023

理想情况下，您测试处理数据的应用程序以确保它们遵守业务规则 - 如果您可以捕获错误更改的数据，则更容易找出正在发生的事情，而不是查找不一致的记录。测试驱动开发在这方面确实有帮助。

其次，再次，理想情况下，您以一种不会发生这种不一致的方式对数据库进行建模 - 在您给出的示例中，通过将“状态”字段放在“人员”记录中，而不是客户或潜在客户桌子。

当然，理想世界是不存在的。

[这就是为什么开发“防御性编程”](http://en.wikipedia.org/wiki/Defensive_programming)概念的原因。许多语言都支持[断言](http://en.wikipedia.org/wiki/Assertion_%28computing%29)，可以让您保护您的应用免受这种不一致数据的影响——在我看来，这是一项巨大的投资，因为它迫使您将业务规则和假设转化为代码，并处理这些假设的可能性在没有进一步破坏的情况下是错误的——例如，如果你正在为这个系统编写一个发票应用程序，那么如果“person”、“customer”和“prospect”表不同步，那就不好了；然后允许开具发票通常要糟糕得多。将断言放入您的代码为您提供了一种结构化的处理方式。

我工作过的许多业务系统都包含常规（每晚）数据库脚本来检查数据的有效性——在许多情况下，我们有一个规则，即我们检测到的任何数据错误都会在每晚批处理中转换为新的检查，以便该系统随着时间的推移而增加。

# ruby-on-rails-3 - collection_select 抛出错误

> ID：14738101
> 
> 赞同：0
> 
> 时间：2013-02-06T20:23:22.453
> 
> 标签：ruby-on-rails-3, forms, select

我在表单上有一个选择框来选择项目的类别类型：

`<%= f.select(:category, collection_select(:project_category, :cat_id, @project_category, :id, :cat_name)) %>`

它应该从`project_categories`表中填充。

迁移如下所示：

```
class CreateProjectCategories < ActiveRecord::Migration
  def change
    create_table :project_categories do |t|
      t.string    :category_name
      t.text      :cat_desc
      t.date      :created_on
      t.datetime  :updated_at
    end
  end
end 
```

我的`project.rb`模型定义`has_one :category`和`projectCategory.rb`模型定义`belongs_to :project`。

我的`project_categories`表填充了数据。我从 Rails Guides 获得了语法，但它不起作用。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:49:08.210

好的，我的语法错误。最终代码如下所示：

`<%= collection_select(:project_categories, :id, Project_Category.all, :id, :category_name) %>`

本质上，语法应该是这样定义的：WARNING: PSEUDO-CODE!!

`<%= collection_select(:database_table, :lookup_value, Model_Name.all, :returned_numeric_value, :returned_text_value_based_on_numeric_value) %>`

不知道为什么 API 文档不能这么*说*...

# python - 在将图像上传到亚马逊 s3 存储桶之前，从 Django 模型表单调整图像大小

> ID：14738104
> 
> 赞同：1
> 
> 时间：2013-02-06T20:23:39.400
> 
> 标签：python, django, amazon-s3, django-forms, python-imaging-library

我正在尝试使用 PIL 调整图像大小，然后将其上传到 S3 存储桶。
模型形式工作得很好，除了图像大小调整没有发生。

以下是我的模型：

```
class ImageDetail(models.Model):

    def upload_image(self, filename):
        return u'obj/{name}.{ext}'.format(            
            name = uuid.uuid4().hex,
            ext  = os.path.splitext(filename)[1].strip('.')
        )
    flag = models.IntegerField(default=0)
    view = models.IntegerField(default=0)
    title = models.CharField(max_length=500, help_text="Enter a small/suitable title")
    image = models.ImageField(upload_to = upload_image, 
                          help_text="Please ensure, image size is less than 1 MB") 
```

视图文件，如下所示：

```
form = ImageUploadForm(request.POST or None, request.FILES or None)
if form.is_valid() and request.POST:
    form_instance = form.save(commit=False)
    img = form_instance.image
    # process the image now
    if img.width > 300 or img.height > 200:
        IMG_TYPE = os.path.splitext(img.name)[1].strip('.').lower()
        if IMG_TYPE == 'jpeg':
            PIL_TYPE = 'jpeg'
            FILE_EXTENSION = 'jpeg'
        elif IMG_TYPE == 'jpg':
            PIL_TYPE = 'jpeg'
            FILE_EXTENSION = 'jpeg'
        elif IMG_TYPE == 'png':
            PIL_TYPE = 'png'
            FILE_EXTENSION = 'png'
        elif IMG_TYPE == 'gif':
            PIL_TYPE = 'gif'
            FILE_EXTENSION = 'gif'
        else:
            print 'Not a valid format'
            return
        im = Image.open(StringIO(img.read()))
        im.thumbnail((300, 180), Image.ANTIALIAS)
        #Save the image
        temp_handle = StringIO()
        im.save(temp_handle, PIL_TYPE)
        s3 = S3Custom()
        if not form_instance.image:
            return self.success(self.request, form, None, errors = 'Error while uploading the image')
        form_instance.save() 
```

S3自定义函数定义如下：

```
class S3Custom(object):
    conn = S3Connection(settings.AWS_ACCESS_KEY_ID, settings.AWS_SECRET_ACCESS_KEY)
    b = Bucket(conn, settings.AWS_STORAGE_BUCKET_NAME)
    k = Key(b)
    def upload_file(self, ruta, prefix):
        try:           
            self.k.key = '%s/%s' % (prefix, os.path.split(ruta)[-1])
            self.k.set_contents_from_filename(ruta)
            self.k.make_public()
        except Exception, e:
            print e
        return '%s%s' % (settings.S3_URL, self.k.key) 
```

我已经安装了`django-storage`。问题是，图像上传得很好，但没有正确调整大小。我错过了什么？我错了吗

```
im.save(temp_handle, PIL_TYPE)
s3 = S3Custom()
form_instance.save() 
```

在视图文件中？请让我知道，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:39:18.133

因此，首先要做的事情是：您几乎肯定不想同步调整大小 - 相反，在保存原始文件后启动 Celery 任务（或类似任务）以异步执行调整大小。

除此之外，你永远不会对这个`s3`对象做任何事情——`s3.upload_file`如果它从来没有被调用过，那就不会做太多......

（我还建议使用某种静态分析器，它会警告您未使用的变量！）

# php - Facebook 登录错误 400 错误请求 - PHP

> ID：14738111
> 
> 赞同：0
> 
> 时间：2013-02-06T20:24:19.737
> 
> 标签：php, facebook

我正在尝试修复 fb 登录错误。此代码是在我开始在该站点上工作之前设置的。显然它曾经工作过。我查看了 fb 文档，代码看起来是正确的。这是电话：

```
$token_url = 'https://graph.facebook.com/oauth/access_token?client_id=' . $site->facebook_app_id . '&redirect_uri=' . urlencode('http://' . $site->domain . '/facebook.php?oauth_callback') . '&client_secret=' . $site->facebook_app_secret . '&code=' . get('code');

$token =  file_get_contents($token_url); 
```

回应是：

`failed to open stream: HTTP request failed! HTTP/1.0 400 Bad Request ' in .../facebook.php on line 21`

的输出`echo $token_url`是：

`https://graph.facebook.com/oauth/access_token?client_id=#####&redirect_uri=http%3A%2F%2Fdev.mypdxhomes.com%2Ffacebook.php%3Foauth_callback&client_secret= ####&code=AQClZMJ1NUYIwwXUABCw3g8hVhRFavrmQfCr5b-dS6PkVqA40WNfBhQTWHe7V7-q7HUDk2OTS50KGUHEa3TMYADWgkYp688rlSnGNyeetkFYWBuFrWOdeo_wBjdErBQ7n1iNHzetqMvlMtW9KK9TEmnIxmwXEdPl-T3CkRNbGp4g2oCSvXI_ozRo6LWDJMqg6nLq54ibag7k8muhjGZ97CYs`

我看过很多关于这个问题的帖子，但没有一个能帮助我解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:49:51.807

在这里找到了解决方案：[Facebook Access Tokens - Server-Side Authentication](https://stackoverflow.com/questions/10833134/facebook-access-tokens-server-side-authentication/10877126#comment20695473_10877126)

最终使用 FB PHP SDK

# linux - 根据目标名称创建对象文件

> ID：14738113
> 
> 赞同：0
> 
> 时间：2013-02-06T20:24:30.123
> 
> 标签：linux, makefile

是否可以根据目标的名称在 makefile 中创建对象文件？

就像是

```
all : gsm gsm_db

if make gsm
%.o : %.cpp
    $(CC) $(CFLAGS) $< -o $@

if make gsm_db
%.o : %.cpp
    $(CC) $(CFLAGS_DB) $< -o $@ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:29:44.743

像这样的东西应该工作：

```
ifneq "$(filter gsm_db, $(MAKECMDGOALS))" ""
%.o : %.cpp
    $(CC) $(CFLAGS_DB) $< -o $@
else
%.o : %.cpp
    $(CC) $(CFLAGS) $< -o $@
endif 
```

# list - 从文件中提取部分单词

> ID：14738116
> 
> 赞同：0
> 
> 时间：2013-02-06T20:24:36.530
> 
> 标签：list, vba, extract, ms-word, truncate

我有一个列表“列表 A”，其中包含数万个条目（下面显示了 4 个示例条目）。我想从“列表 A”创建另一个列表，“列表 B”。我需要“列表 B”的每个条目仅包含“列表 A”中每个条目开头的“>”字符之后的第一个“单词”的前 4 个（共 5 个）字符。

因此，例如，我想要一个看起来像这样的“列表 B”：2JUG 3JU9 1JU8 3JUE

我是脚本编写的新手，如果您能提供任何帮助，我将不胜感激。我最接近解决我的问题的是打印第一列，但这给了我第一个“单词”的所有 5 个字符，加上下一行中的一长串字母。我是脚本写作的新手，所以如果可能的话，请尽量给我你的解释的“傻瓜”版本。谢谢！

***以下“列表 A”中的示例条目***

> 2JUGA 78 NMR NA NA NA 没有 TubC 蛋白 [血管球菌 DISCIFORMIS] || 2JUGB GPLGSSAGALLAHAASLGVRLWVEGERLRFQAPPGVMTPELQSRLGGARH ELIALLRQLQPSSQGGSLLAPVARNGRL
> 
> 3JU9A 237 XRAY 2.10 0.207 0.253 无伴刀豆球蛋白-Br [巴西咖啡豆] || 1AZDA 1AZDB 1AZDC 1AZDD 4H55A ADTIVAVELDTYPNTDIGDPSYPHIGIDIKSVRSKKTAKWNMQNGKVGTA HIIYNSVGKRLSAVVSYPNGDSATVSYDVDLDNVLPEWVRVGLSASTGLY KETNTILSWSFTSKLKSNSTHETNALHFMFNQFSKDQKDLILQGDATTGT EGNLRLTRVSSNGSPQGSSVGRALFYAPVHIWESSAVVASFEATFTFLIK SPDSHPADGIAFFISNIDSSIPSGSTGRLLGLFPDAN
> 
> 1JU8A 37 NMR NA NA NA 没有 Leginsulin [NA] ADCNGACSPFEVPPCRSRDCRCVPIGLFVGFCIHPTG
> 
> 3JUEA 368 XRAY 2.30 0.203 0.219 无 ARFGAP，带有卷曲螺旋、ANK 重复和含 PH 结构域的蛋白质 1 [智人] || 3JUEB GPLGSGSGHLAIGSAATLGSGGMARGREPGGVGHVVAQVQSVDGNAQCCD CREPAPEWASINLGVTLCIQCSGIHRSLGVHFSKVRSLTLDSWEPELVKL MCELGNVIINQIYEARVEAMAVKKPGPSCSRQEKEAWIHAKYVEKKFLTK LPEIRGRRGGRGRPRGQPPVPPKPSIRPRPGSLRSKPEPPSEDLGSLHPG ALLFRASGHPPSLPTMADALAHGADVNWVNGGQDNATPLIQATAANSLLA CEFLLQNGANVNQADSAGRGPLHHATILGHTGLACLFLKRGADLGARDSE GRDPLTIAMETANADIVTLLRLAKMREAEAAQGQAGDETYLDIFRDFSLM ASDDPEKLSRRSHDLHTL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:37:39.630

这是解决方案 - 非常简单，但假设提供的输入将完成这项工作：

```
Sub NMRData()
    With Selection.Find
        .Text = "^p>"
        .Replacement.Text = "@@@>"
        .Forward = True
        .Wrap = wdFindContinue
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchWildcards = False
        .MatchSoundsLike = False
        .MatchAllWordForms = False
    End With
    Selection.Find.Execute Replace:=wdReplaceAll
    With Selection.Find
        .Text = "^p"
        .Replacement.Text = ""
        .Forward = True
        .Wrap = wdFindContinue
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchWildcards = False
        .MatchSoundsLike = False
        .MatchAllWordForms = False
    End With
    Selection.Find.Execute Replace:=wdReplaceAll
    With Selection.Find
        .Text = "@@@>"
        .Replacement.Text = "^p>"
        .Forward = True
        .Wrap = wdFindContinue
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchWildcards = False
        .MatchSoundsLike = False
        .MatchAllWordForms = False
    End With
    Selection.Find.Execute Replace:=wdReplaceAll

    For k = ThisDocument.Paragraphs.Count To 1 Step -1
        Set oPara = ThisDocument.Paragraphs(k)
        oPara.Range.Text = Left(oPara.Range.Text, 5) & vbNewLine
    Next k

    ThisDocument.SaveAs FileName:="listB.docx", FileFormat:=wdFormatXMLDocument

End Sub 
```

所需的输出将保存在与新 DOCX 文件相同的文件夹中。

要运行代码，请按`ALT`+ `F11`，然后`F5`通过 VBA 界面按 - ，或按`ALT`+`F8`选择并按名称运行宏。

带有现成代码的示例 DOCM：[https ://www.dropbox.com/s/6zt4nfn7rt8eqc7/NMRDataListA.docm](https://www.dropbox.com/s/6zt4nfn7rt8eqc7/NMRDataListA.docm)

PS这是我的第一个Word-VBA体验）

# list - 了解 ML 中的 foldl

> ID：14738120
> 
> 赞同：12
> 
> 时间：2013-02-06T20:24:51.017
> 
> 标签：list, functional-programming, iterator, sml, metalanguage

我需要编写一个函数来获取字符串列表并在列表中找到最大的字符串。问题是它需要使用 List.foldl 遍历列表，并且不能使用递归调用，除了 List,foldl 的库函数中的调用。

我写

```
fun longest_string1(xs)= 
case xs of 
[] => ""  
| x::xs' => List.foldl((fn (s,x) => if String.size s > String.size x then s else x) "" x,) 
```

我的解释如下：

- 输入 xs，如果 xs 为空，则返回一个空字符串

- 否则对于 xs 的第一项调用 List.foldl

-List.foldl 传入一个匿名函数来检查 s 的长度，这应该表示针对列表头项的累加器。

-设置初始累加器为空字符串，初始比较值设置为高阶函数传入的初始列表的头部

但是，它不键入检查。

我认为我的问题在于对 List.foldl 函数本身的理解以及它如何准确地读取其参数。有人可以提供一些澄清吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-06T23:08:57.147

因此，对于您发布的代码：

1.  您不需要空列表的案例。foldl 会为您解决这个问题。只需将 xs 传递给 foldl 而不是 x。
2.  foldl 是咖喱，所以你不应该在参数周围有括号。

除此之外，它实际上看起来是正确的。无论如何，如果您仍然不确定 foldl 是如何工作的，这里有一个非常长而彻底的解释；）

好的，让我们从 List.foldl 开始。

```
val foldl : ('a * 'b -> 'b) -> 'b -> 'a list -> 'b 
```

所以，有三个参数。一个是我们稍后会担心的函数，第二个是*与返回类型相同类型的值，*最后一个是列表。

所以，让我们举一个简单的例子——假设我们有一个整数列表，我们想要对所有数字求和。我们可以这样做：

```
fun sum [] = 0
  | sum (x::xs) = x + sum xs 
```

或者，我们可以使用 foldl（从现在开始我会写 foldl 而不是 List.foldl，因为我很懒）。

所以，我们知道列表是第三个参数。第二个应该是某种起始值或累加器，如果列表为空，这将是有意义的。总而言之，这将是0。

第一个参数是一个函数，这是棘手的部分。类型是：

```
fn : 'a * 'b -> 'b 
```

好的，所以 'a 也是列表中元素的类型，所以如果这是列表中的一个项目是有意义的。'b 是起始值*和*返回值的类型。

实际发生的是 foldl 使用列表中的第一个元素和累加器调用函数。然后它将结果作为*新*的累加器和列表的其余部分调用自己。所以如果我们这样做：

```
foldl foo 0 [1,2,3] 
```

它会做

```
foo (1,0) 
```

接着

```
foldl foo (foo (1,0)) [2,3] 
```

等等。

因此，为了对列表求和，我们将创建以下函数：

```
fn (x,acc) => x + acc 
```

所以我们可以这样做：

```
fun sum xs = foldl (fn (x,acc) => x + acc) 0 xs 
```

或者，更简单

```
val sum = foldl op+ 0 
```

（`op+`和我之前使用的匿名函数一样）

让我们通过列表来了解一下`[1,2,3]`

```
foldl op+ 0 [1,2,3]
foldl op+ (op+ (1,0)) [2,3] -> foldl op+ 1 [2,3]
foldl op+ (op+ (2,1)) [3]   -> foldl op+ 3 [3]
foldl op+ (op+ (3,3)) []    -> foldl op+ 6 []
6 
```

# kerberos - 使用 keytab 验证 kerberos 服务令牌

> ID：14738121
> 
> 赞同：2
> 
> 时间：2013-02-06T20:24:55.297
> 
> 标签：kerberos

之前在这个论坛上问过一个类似的问题，但接受的答案对我没有帮助。我的服务器有一个 Kerberos 密钥表文件，我想用它来验证客户端发送的服务票证。

根据 Sun 的文档和分散在其他地方的示例代码，这是我目前拥有的：

1.  客户端向 KDC 请求 MYSPN 的服务票证
2.  客户端将文件发送到服务服务器以请求访问服务。
3.  服务器在使用已拥有的 MYSPN 的 keytab 验证服务票证后授予访问权限。

我无法让#3 工作。我得到的具体错误是：

```
GSSException: No valid credentials provided (Mechanism level: Attempt to obtain new ACCEPT credentials failed!)
    at sun.security.jgss.krb5.Krb5AcceptCredential.getInstance(Krb5AcceptCredential.java:100)
    at sun.security.jgss.krb5.Krb5MechFactory.getCredentialElement(Krb5MechFactory.java:128)
    at sun.security.jgss.krb5.Krb5MechFactory.getMechanismContext(Krb5MechFactory.java:200)
    at sun.security.jgss.GSSManagerImpl.getMechanismContext(GSSManagerImpl.java:231)
    at sun.security.jgss.GSSContextImpl.acceptSecContext(GSSContextImpl.java:319)
    at sun.security.jgss.GSSContextImpl.acceptSecContext(GSSContextImpl.java:285)
    at cms.gssapi.Server$1.run(Server.java:188)
    at cms.gssapi.Server$1.run(Server.java:1)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:357)
    at cms.gssapi.Server.acceptSecurityContext(Server.java:182)
    at cms.gssapi.Server.main(Server.java:59)
Caused by: javax.security.auth.login.LoginException: Unable to obtain Princpal Name for authentication 
    at com.sun.security.auth.module.Krb5LoginModule.promptForName(Krb5LoginModule.java:750)
    at com.sun.security.auth.module.Krb5LoginModule.attemptAuthentication(Krb5LoginModule.java:646)
    at com.sun.security.auth.module.Krb5LoginModule.login(Krb5LoginModule.java:559)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at javax.security.auth.login.LoginContext.invoke(LoginContext.java:784)
    at javax.security.auth.login.LoginContext.access$000(LoginContext.java:203)
    at javax.security.auth.login.LoginContext$5.run(LoginContext.java:721)
    at javax.security.auth.login.LoginContext$5.run(LoginContext.java:719)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.login.LoginContext.invokeCreatorPriv(LoginContext.java:718)
    at javax.security.auth.login.LoginContext.login(LoginContext.java:590)
    at sun.security.jgss.GSSUtil.login(GSSUtil.java:264)
    at sun.security.jgss.krb5.Krb5Util.getKeys(Krb5Util.java:202)
    at sun.security.jgss.krb5.Krb5AcceptCredential$1.run(Krb5AcceptCredential.java:95)
    at sun.security.jgss.krb5.Krb5AcceptCredential$1.run(Krb5AcceptCredential.java:93)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.security.jgss.krb5.Krb5AcceptCredential.getInstance(Krb5AcceptCredential.java:92)
    ... 11 more 
```

这是尝试使用 keytab 验证客户端服务票证的服务器代码片段：

```
 public static void main( String[] args) {
      Properties props = new Properties();
      props.load( new FileInputStream( "server.properties"));
      System.setProperty( "sun.security.krb5.debug", "true");
      System.setProperty( "java.security.krb5.realm", props.getProperty( "realm"));
      System.setProperty( "java.security.krb5.kdc", props.getProperty( "kdc"));
      System.setProperty( "java.security.auth.login.config", "./jaas.conf");
      System.setProperty( "javax.security.auth.useSubjectCredsOnly", "false");
      krb5Oid = new Oid( "1.2.840.113554.1.2.2");
      Server server = new Server();
      server.login();
      byte serviceTicket[] = readClientTicketFromFile();
      String clientName = server.acceptSecurityContext(serviceTicket);
  }

  private static byte[] readClientTicketFromFile() throws IOException {
    BufferedReader in = new BufferedReader( new FileReader( "serviceticket.token"));
    String str;
    StringBuffer buffer = new StringBuffer();
    while ((str = in.readLine()) != null) {
       buffer.append( str + "\n");
    }
    in.close();
    BASE64Decoder decoder = new BASE64Decoder();
    return decoder.decodeBuffer( buffer.toString());
  }

  private static Oid krb5Oid;

  private Subject login() throws LoginException {
    LoginContext loginCtx = null;
    loginCtx = new LoginContext( "Server", new LoginCallbackHandler(null,null));   
    System.out.println("Attempting to do Login...");
    loginCtx.login();
    Subject ret_sub = loginCtx.getSubject();
     return ret_sub;
  }

  private String acceptSecurityContext( final byte[] serviceTicket) 
      throws GSSException {
    krb5Oid = new Oid( "1.2.840.113554.1.2.2");
    return Subject.doAs( subject, new PrivilegedAction<String>() {
      public String run() {
        try {
          GSSManager manager = GSSManager.getInstance();
          GSSContext context = manager.createContext( (GSSCredential) null);
          context.acceptSecContext( serviceTicket, 0, serviceTicket.length);
          return context.getSrcName().toString();
        }
        catch ( Exception e) {
          e.printStackTrace();
          return null;
        }
      }
    });
  } 
```

这是我的 server.properties

```
realm=MYREALM
kdc=192.168.1.1 
```

和 jaas.conf 文件

```
Client {
  com.sun.security.auth.module.Krb5LoginModule required
  useTicketCache=false
  useKeyTab=false
  storeKey=false
  isInitiator=true
  debug=true
  ;
};

Server {
     com.sun.security.auth.module.Krb5LoginModule required 
     useKeyTab=true 
     storeKey=true 
     doNotPrompt=true
     isInitiator=false
     keyTab="/etc/krb5.keytab"
     principal="MYSPN/host.domain.com@MYREALM"
     debug=true
     ;
}; 
```

我确定服务票证是有效的，因为如果我为服务帐户提供密码，服务器可以进行身份​​验证，但我想使用 keytab 文件而不是密码。

# c# - 如何使用 C# 语法将 DTEXEC 实用程序命令行参数传递给 process.start？

> ID：14738123
> 
> 赞同：0
> 
> 时间：2013-02-06T20:25:12.007
> 
> 标签：c#, asp.net, ssis

我必须通过 ASP.NET 代码将参数传递给 DTEXEC 实用程序。我正在使用该`process.start()`方法来触发 SSIS 包执行。

### 字符串 1

```
dtexec /file C:\ssis\pkg1.dtsx 
       /conn "MyConnectionManager";"\"Data Source=localhost\TestSQL2008R2;Initial Catalog=ConnDB;Integrated Security=SSPI;\"" 
```

### 字符串 2

```
/file C:\ssis\pkg1.dtsx 
/conn "MyConnectionManager;Data Source=localhost\TestSQL2008R2;Initial Catalog=ConnDB;Integrated Security=SSPI;" 
```

上述命令行参数是在通过 DTEXEC 实用程序手动执行包时生成的。但是，我需要通过此命令行`process.start()`使用 C# 在 ASP.NET 中传递方法。

如何在 C# 字符串语句中表示上述命令行？换句话说，我如何通过使用字符来转义特殊字符**`@`**并将有效语句传递给`process.start()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:28:30.293

逐字字符串文字可能最容易用于对此类字符串进行硬编码。

你只需要加倍每个内部`"`：

```
@"dtexec /file C:\ssis\pkg1.dtsx /conn ""MyConnectionManager"";""\""Data Source=localhost\TestSQL2008R2;Initial Catalog=ConnDB;Integrated Security=SSPI;\"""""; 
```

和：

```
@"/file C:\ssis\pkg1.dtsx /conn ""MyConnectionManager;Data Source=localhost\TestSQL2008R2;Initial Catalog=ConnDB;Integrated Security=SSPI;"""; 
```

使用“常规”字符串，您需要在它们之前使用 a 来转义每个字符串`"`和`\`原始字符串`\`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:02:13.217

冒着因偏离主题而被否决的风险，您拥有比调用 dtexec 可执行文件更好的机制。由于您在 .net 中，请使用现有的[object model](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.aspx)。它*比*dtexec 提供的有限抽象要强大得多。

粗略的代码看起来像

```
string packagePath = @"C:\ssis\pkg1.dtsx";
string connectionString = @"Data Source=localhost\TestSQL2008R2;Initial Catalog=ConnDB;Integrated Security=SSPI;"
Application app = new Application();
Package pkg = null;
pkg = app.LoadPackage(packagePath, null);
pkg.Connections["MyConnectionManager"].ConnectionString = connectionString;
pkg.Execute(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T20:29:53.217

我没有测试这些，但下面应该这样做。

```
var string1 = 
"dtexec /file C:\\ssis\\pkg1.dtsx /conn \"MyConnectionManager\";\"\\\"Data Source=localhost\\TestSQL2008R2;Initial Catalog=ConnDB;Integrated Security=SSPI;\\\"\"";

var string2 = "dtexec /file C:\\ssis\\pkg1.dtsx /conn \"MyConnectionManager;Data Source=localhost\\TestSQL2008R2;Initial Catalog=ConnDB;Integrated Security=SSPI;\""; 
```

如果你像我上面展示的那样走老式路线，你只需要转义`\`（因为那是你的转义字符）并在字符串中`"`的任何地方。`\`如果您像其他答案建议的那样使用ver batim，它将更易于阅读和维护。

# android - 有没有办法扩展 AlertDialog 然后完全控制它的外观？

> ID：14738125
> 
> 赞同：0
> 
> 时间：2013-02-06T20:25:21.240
> 
> 标签：android, android-alertdialog, android-dialogfragment

我在这里查看文档：http: [//developer.android.com/guide/topics/ui/dialogs.html#PassingEvents](http://developer.android.com/guide/topics/ui/dialogs.html#PassingEvents)

他们所有的例子似乎都忽略了开发人员完全改变 OK | 外观和/或定位的潜在愿望。取消按钮。

我觉得 DialogFragment 的解决方案很接近，但我仍然没有明显的方法来定义我的活动中的 View 应该是 OK 按钮，以便我可以轻松地将回调附加到它。

我错过了什么？还是真的不可能在任何扩展 AlertDialog 或 DialogFragment 的东西中操纵按钮的外观和位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:27:56.423

您可以使用`Dialog`并向其添加自己的自定义布局，并控制其中每个视图的外观。这是一个如何执行此操作的示例：

```
final Dialog alert = new Dialog(FingerPaintActivity.this, android.R.style.Theme_Light_Panel);
alert.requestWindowFeature(Window.FEATURE_NO_TITLE); // no title 
alert.getWindow().getAttributes().windowAnimations = R.style.PauseDialogAnimation; // this is used for custom animation when dialog is showing and hiding 
alert.setContentView(getLayoutInflater().inflate(R.layout.stamps, null)); // here is your custom layout
alert.getWindow().setLayout(width-50, (height-100)); // set height / width 
```

您可以像这样对视图（例如按钮）使用设置侦听器：

```
Button myOkBtn = (Button) alert.findViewById(R.id.myOkBtn);
myOkBtn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

        }
    }); 
```

# string - 了解 Knuth Morris Pratt (KMP) 失效函数

> ID：14738130
> 
> 赞同：4
> 
> 时间：2013-02-06T20:25:39.363
> 
> 标签：string, algorithm, string-matching, knuth-morris-pratt

我一直在阅读[有关 Knuth-Morris-Pratt 算法的 Wikipedia 文章](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)，我对如何在跳转/部分匹配表中找到这些值感到困惑。

```
 i  |  0  1  2  3  4  5  6
W[i] |  A  B  C  D  A  B  D
T[i] | -1  0  0  0  0  1  2 
```

如果有人可以更清楚地解释捷径规则，因为这句话

> “假设我们发现了一个适当的后缀，它是一个适当的前缀，以 W[2] 结尾，长度为 2（可能的最大值）”

令人困惑。如果正确的后缀以 W[2] 结尾，它的大小不是 3 吗？

另外我想知道为什么 T[4] 不是 1 当有大小为 1 的前缀和后缀时：A.

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T20:40:47.530

请注意，失效函数 T[i] 不使用 i 作为索引，而是作为长度。因此，T[2] 表示由 W 的前两个字符形成的字符串的最长正确边界（既是前缀又是后缀的字符串）的长度，而不是由以字符结尾的字符串形成的最长正确边界的长度2\. 这就是为什么 T[2] 的最大可能值为 2 而不是 3 - 由 W 的前两个字符形成的子字符串的长度不能大于 2。

使用这种解释，也更容易看出为什么 T[4] 是 0 而不是 1。由 W 的前四个字符形成的 W 的子串是 ABCD，它没有适当的前缀，也是适当的后缀。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-02T20:09:48.870

“假设我们发现了一个适当的后缀，它是一个适当的前缀，以 W[2] 结尾，长度为 2（可能的最大值）”

好的，长度可以最大为 2，这是正确的，这就是为什么......一个事实：“正确”前缀不能是整个字符串，“正确”后缀也是如此（如正确子集）

让， W[0]=AW[1]=AW[2]=A ，即模式是“AAA”，因此，（最大长度）正确的前缀可以是“AA”（从左到右），并且（最大长度）正确的后缀可以是“AA”（从右到左）//是的，前缀和后缀有重叠（中间的“A”）

因此，该值将是 2 而不是 3，仅当前缀不正确时才会为 3。

# ruby-on-rails - 在 Rails 中使用 PDFKit 的 wkhtmltopdf

> ID：14738135
> 
> 赞同：0
> 
> 时间：2013-02-06T20:26:02.930
> 
> 标签：ruby-on-rails, wkhtmltopdf, pdfkit

我正在尝试基于 Rails 应用程序中的 HTML 文件生成 PDF 文件。我搜索并找到了这个 wkhtmltopdf 引擎，但是当我尝试生成一个在我的页面中附加“.pdf”后缀的 pdf 时，它似乎处于一个循环中，除非我停止服务器，否则它永远不会结束，这会显示此错误：

```
command failed: "/usr/bin/wkhtmltopdf" "--page-size" "Letter" "--margin-left" "0.75in" "--margin-right" "0.75in" "--margin-bottom" "0.75in" "--margin-top" "0.75in" "--encoding" "UTF-8" "--quiet" "-" "-" 
```

我正在使用 pdfkit 和 wkhtmltopdf-binary gems 和 MacOS Lion。有谁知道如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:48:04.923

如果您按照[此处](https://github.com/pdfkit/pdfkit)的确切说明进行操作，那么您的问题应该会消失。我已经在几个项目中使用了这个，没有问题。您还应该知道，如果您碰巧部署到 ubuntu 并且需要更新 wkhtmltopdf，则缩放内容会出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:19:10.857

是的..也有这个。wkhtmltopdf 的 gem 版本有一个 bug。下载当前版本，convert 调用最终会回来。

[http://code.google.com/p/wkhtmltopdf/downloads/detail?name=wkhtmltopdf.dmg&can=2&q=](http://code.google.com/p/wkhtmltopdf/downloads/detail?name=wkhtmltopdf.dmg&can=2&q=)

# java - 如何阻止 android 系统重新传递有关方向更改的旧意图？

> ID：14738137
> 
> 赞同：1
> 
> 时间：2013-02-06T20:26:05.343
> 
> 标签：java, android, android-intent, android-activity, android-orientation

我从 B 开始一项活动 A，其目的是附加额外内容，并根据 onCreate 中的额外内容类型进行一些处理，并且效果很好。

但是，当我进行方向更改时，系统会将相同的旧意图重新传递给我，并且由于我再次通过 onCreate ，整个过程将重新启动。

如果没有旧意图传递给它，我的代码完全负责在调用 onCreate 时恢复活动的先前状态。但是由于系统重新交付它使我的活动认为这是一个新的意图并再次重新启动整个过程。

我试过国旗`intent.getFlags() != Intent.FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY`。此标志可防止在长按主页按钮和从历史记录启动的活动但对方向更改没有影响的情况下重新交付。

在另一个线程[Dirty Fix](https://stackoverflow.com/questions/6451082/android-intent-gets-redelivered-when-launching-with-home-button)中提出了一个脏修复，但我想知道是否有适当的方法来解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-30T01:45:47.307

使用 savedInstanceState 来确定活动或片段是否从包括方向变化在内的任何内容中恢复。当活动/片段恢复时，savedInstanceState 将为空。

```
public void onCreate(Bundle savedInstanceState) {
    ...
    boolean isRedeliver = savedInstanceState != null || (intent.getFlags() & Intent.FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY) != 0;
    ...
} 
```

该技术也用于[fragment 的官方文档](http://developer.android.com/reference/android/app/Fragment.html)。

```
 if (savedInstanceState == null) {
        // During initial setup, plug in the details fragment.
        DetailsFragment details = new DetailsFragment();
        details.setArguments(getIntent().getExtras());
        getFragmentManager().beginTransaction().add(android.R.id.content, details).commit();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:41:00.450

这个问题的“干净”解决方案是使用片段。

创建您自己的 Fragment 子类。在它的 onCreate 中，一定要调用 setRetainInstance(true)。在其 onCreate 中，您可以开始您的流程。如果只是为了做一些工作，在它的onCreateView中返回null。

在您的 Activity 的 onCreate 中： - 首先尝试找到您自己的 Fragment 的当前实例。- 如果没有找到，创建一个全新的并将其提交到您的 Fragment Transaction。

通过调用 setRetainInstance(true) 并在 Activity 的 onCreate 中创建新的 Fragment 之前首先尝试找到它，即使在旋转之后，您也会保留相同的 Fragment 实例，并且不会再次调用 Fragment 的 onCreate。

# ruby-on-rails-3 - 如何定义表计划？

> ID：14738141
> 
> 赞同：0
> 
> 时间：2013-02-06T20:26:26.780
> 
> 标签：ruby-on-rails-3

我有一张桌子`Schedules`可以存放一天的`Person`工作。现在我想添加这个`Person`工作的时间。假设`Person`周一从上午 9 点到 11 点工作，周二从上午 9 点到下午 6 点，依此类推......

同样在每个日期范围内（从 start_time 到 end_time ），我如何设置 Person 不像午餐时间那样工作的时间？

```
 create_table "schedules", :force => true do |t|
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.integer  "person_id"
    t.boolean  "sun"
    t.boolean  "mon"
    t.boolean  "tue"
    t.boolean  "wed"
    t.boolean  "thu"
    t.boolean  "fri"
    t.boolean  "sat"
  end 
```

我应该创建第二个表来存储每天的时间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:20:28.677

我认为建模一个人的工作时间表会更好地作为一对多：

```
Person
  has_many :shifts
end

Shift
  #fields person_id, day, start_time, end_time
  belongs_to :person
end 
```

然后，要创建您描述的时间表（'星期一从上午 9 点到上午 11 点，星期二从上午 9 点到下午 6 点，依此类推......'）：

```
@person = Person.find(1)
@person.shifts.create!(:day => 'mon', :start_time => '9 am', :end_time => '11 am')
@person.shifts.create!(:day => 'tue', :start_time => '9 am', :end_time => '6 pm') 
```

当您想显示此信息时，只需遍历 Person 的 Shifts：

```
@person.shifts.each do |s|
 puts "#{@person.name} works on #{s.day} from #{s.start_time} to #{s.end_time}."
end 
```

您可以选择简单地模拟“午休”，让 Person 当天轮班两班。例如，如果他们从上午 9 点工作到晚上 7 点，从下午 1 点开始休息一小时，那么让他们在当天从上午 9 点到下午 1 点轮班，从下午 2 点到晚上 7 点轮班。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:43:51.017

您可以在 Person 和 Days （例如）之间创建一个 ref 表，其中包括 Time 和无论何时工作的标志。

# ios - 在当前区域的地图上显示图钉

> ID：14738142
> 
> 赞同：1
> 
> 时间：2013-02-06T20:26:27.183
> 
> 标签：ios, annotations, maps, xcode4.5

我正在使用地图，我在 CSV 文件中有 2000 个德国特定位置的纬度和经度。单击时将所有图钉放在地图上需要 3-4 分钟。

我希望该地图应在 gps 值上快速打开并显示该特定区域的图钉。如果用户在地图上移动，那么它会丢弃图钉，但不会像我们现在大约 3-4 分钟那样在所有过程中等待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T08:47:59.837

我制作了一个 Selector 并在后台执行它并在 -viewDidLoad 方法上使用它。用户无需等待即可看到地图

```
[self performSelectorInBackground:@selector(readFileAndDropPin) withObject:self]; 
```

# php - 将 POST HTML 数据从 textarea 转换为 PDF

> ID：14738146
> 
> 赞同：0
> 
> 时间：2013-02-06T20:26:35.330
> 
> 标签：php, pdf, pdf-generation, tcpdf, html2pdf

我在表单中有一个文本区域，当我插入一些带有表格格式的 html 代码时，它会在本地主机上以所有格式转换为 PDF，但是当我在我的共享主机和我的 VPS 上执行相同操作时，它都没有显示格式，我已在本地主机和实时主机上附加了两个图像，

POST html 数据存储在一个变量中，它包含大约 120 个带有文本的复选框，大约 30 个带有数据的文本字段

当我使用预先存储在变量中的相同 html 时，它可以工作，当我使用 $_POST 变量时，它会给出糟糕的结果，如图 2 所示

请让我知道我怎样才能让它在双方都能平等地工作

图 1（本地主机上的好结果）

![在此处输入图像描述](../Images/83dc1d5ef1fdc6eefbd4c705aefbc9eb.png)

图 2（来自 $_POST 变量和托管的 HTML 结果）

![在此处输入图像描述](../Images/bf8f630307a30c263744aef19f02cadc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:37:30.500

当你通过 php $_POST 获得一个复选框值时，如果它被选中并且没有被关闭，则返回：

```
<?
$state = "";
$myvar = $_POST['mycheck'];
if($myvar=="on") $state = "checked";

print "<input type='checkbox' name='mych' $state>";
?> 
```

# javascript - jQuery将自定义函数绑定到附加元素

> ID：14738154
> 
> 赞同：0
> 
> 时间：2013-02-06T20:27:07.043
> 
> 标签：javascript, jquery

我正在尝试创建一个 Web 应用程序，该应用程序将允许用户定义自定义 JavaScript 函数，然后向他们的用户界面添加一个按钮，该按钮可以很好地执行该函数。

这是代码示例

```
var customCommands = {
  command1: {
    text: 'Hello Console',
    cFunctionRun: function() {
      console.log('hello Console!');
    }
  },
  command2: {
    text: 'Hello World',
    cFunctionRun: function() {
      alert('hello World!');
    }
  }
} 
```

然后我写了一个小函数，它循环并构建按钮并将它们添加到用户界面。问题是当我将元素附加到用户界面而不是单击按钮时没有任何效果......

这是我尝试过的方法之一

```
for (var cmd in customCommands) {
    command = customCommands[cmd];
    button = $('<button/>').html(command.text).on('click', 
      function(){ 
        console.log(command.text); 
        command.cFunctionRun(); 
      }
    );
}
buttonContainer.append(button); 
```

现在我的循环构建一切都很好，甚至可以`.on('click')`正常工作，但它总是显示最后添加的命令的文本？

这是[http://jsfiddle.net/nbnEg/](http://jsfiddle.net/nbnEg/)显示发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:46:20.510

当您实际单击时，命令变量指向最后一个命令（因为整个循环已经运行）。您应该维护每个按钮的数据状态，告诉它调用哪个命令。你应该做这个。

```
for(var i in customCommands) {
  if(customCommands.hasOwnProperty(i)){ //this is a pretty important check
    var command = customCommands[i];
    button = $('<button/>').html(command.text).data("command_name", command).on('click', function(){ 
      console.log($(this).data("command_name").text); 
      $(this).data("command_name").cFunctionRun(); 
    });

    $("body").append(button);
  }
} 
```

[JSFiddle](http://jsfiddle.net/fmLT2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:42:02.680

你所需要的只是用函数传递参数，你应该试试[这个](http://api.jquery.com/on/#passing-data)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T20:48:11.820

这是一个（缺失的）闭包问题。事件处理程序将在循环的最后一次迭代中保留对 command 值的引用。要解决它，您可以使用立即调用的函数创建一个新范围：

```
for(var cmd in customCommands) {
    (function(command){
        button = $('<button/>').html(command.text).on('click', 
          function(){ 
            console.log(command.text); 
            command.cFunctionRun(); 
          }
        );
        buttonContainer.append(button);
    }(customCommands[cmd]));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T20:53:22.807

由于`button`s 应该是**唯一的**（没有理由创建重复项），因此我将按钮设置`id`为`name`customCommands 的按钮（在本例中为 command1 和 command2）。这个例子可以很容易地适应使用任何相关属性（data-*、name 等）。

每当按下您的其中一个时，创建一个`click`事件侦听器。然后调用与给定关联的函数。`document``button``id`

```
$(document).on("click", "button", function(){
    customCommands[this.id].cFunctionRun();
});

for(var command in customCommands){
    var button = $('<button id="' + command +'"/>').html(customCommands[command].text);
    $("body").append(button);
} 
```

**[例子](http://jsfiddle.net/ChaseWest/EA5MR/)**

# parallel-processing - 如何通过单个进程读取 MPI 中的 txt 文件？为什么我的方法不起作用？

> ID：14738155
> 
> 赞同：1
> 
> 时间：2013-02-06T20:27:12.470
> 
> 标签：parallel-processing, mpi

我是 MPI 的新手。我正在尝试使用标准 c++ 代码读取文本文件，如下所示。

```
int main(int argc, char* argv[] ){

int np, pid, ierr;
ierr = MPI_Init(&argc, &argv);
ierr = MPI_Comm_size(MPI_COMM_WORLD, &np);
ierr = MPI_Comm_rank(MPI_COMM_WORLD, &pid);

const int imgWidth = 1000; // the width of the image (count in pixel)
const int imgHeight = 1000; // the height of the image

double* Y;
Y = (double *)malloc(imgHeight*imgWidth*sizeof(double));

if(pid == 0)
{
    string input = "Im.txt";
    readData(input.c_str(), Y);
}
MPI_Bcast(Y, imgHeight*imgWidth, MPI_DOUBLE, 0, MPI_COMM_WORLD);

free(Y);

MPI_Finalize();

return 1; 
```

}

readData 函数定义为：

```
bool readData(const char *fileName, double* Y){

printf("Reading the data file!\n");

ifstream fin(fileName);

int i = 0;
while(fin>>Y[i])
{   
    i++;
};
cout<<"In total, "<<i<<" data are imported."<<endl;
//close the file
fin.close();

return 1; 
```

}

文件“Im.txt”包含一堆数字。但是，当我运行程序时，没有导入数据。谁能给我一个提示？我不需要使用多重进程来并行读取这个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T23:33:24.307

最后，我发现了问题。我正在使用 Visual Studio 在 Win7 下工作。似乎我必须明确指出我的文件的路径。即使我将“Im.txt”与源代码文件放在同一个文件夹中，它也不起作用。

# javascript - 对 javascript 模板使用脚本标签而不是字符串

> ID：14738156
> 
> 赞同：0
> 
> 时间：2013-02-06T20:27:14.247
> 
> 标签：javascript, html, templates, underscore.js

所以我见过车把模板这样做：

```
<script id="some-template" type="text/x-handlebars-template">  </script> 
```

我想知道是否有办法使用这样的[underscore.js](http://underscorejs.org/#template)模板。将我的模板放在标记中而不是放在字符串中会非常好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:41:55.273

当然，您可以轻松做到这一点。

```
var templateText= document.getElementById('some-template').innerHTML; 
```

# emacs - 在emacs中使用哪个repl用于clojure

> ID：14738157
> 
> 赞同：9
> 
> 时间：2013-02-06T20:27:15.917
> 
> 标签：emacs, clojure, slime

我正在尝试设置一个用于在 emacs 中编辑 clojure 的环境。我对 emacs 比较陌生（只有 1 年），对 clojure 完全陌生（2 周）。我在网上找到了很多关于如何设置的教程，其中大部分都是关于 lein、swank-clojure、slime 和 nrepl 的。似乎 swank-clojure 和 slime 需要一起工作，但 swank-clojure 已被弃用，所以剩下的是 nrepl 和一些内置的 lisp repl 模式。

我首先尝试了低级 lisp 模式，因为它是 clojure-mode 的默认设置，而且对我来说看起来不错。但我似乎无法找到一种在其中轻松切换命名空间的方法。

然后我尝试了 emacs-live，它就像 nrepl 附带的 emacs 新手工具包。然后我可以执行“nrepl-jack-in”来获得 repl，即使它很慢。它可以使用“CC Mn”轻松切换命名空间。但是，切换后的某个时间，会弹出一个名为*nrepl 错误的缓冲区，并且不会让我关闭。*我不得不强制关闭 emacs。此外，nrepl 没有太多的语法高亮。

总结一下：在 swank-clojure 被弃用之后，我应该使用哪个 repl？粘液复制？nrepl? 还是其他人？

我现在对clojure不太了解，所以我不确定什么特性对repl很重要，但至少有语法高亮并且可以在nrepl中像“CC Mn”这样的命名空间之间轻松切换会很好，也许还有一个调试器。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-06T21:36:31.447

出于各种原因，我衷心推荐 nREPL.el：

1.  swank-clojure 正式死了，但已经死了很长时间。虽然它完成了一些工作，但在它最初成立后并没有太大的改变或改进。swank-clojure 的开发需要在 Common Lisp 方面拥有丰富的专业知识，而 Clojure 开发人员通常缺乏并且不愿意获得这些专业知识。

2.  clojure-mode 2.0.0 根本不支持 swank-clojure + SLIME。这一举措对 clojure-mode（删除了大量遗留代码）和 nrepl.el（在发布后加快了开发速度）都非常有利。

3.  nrepl.el 正在快速获取功能。我是它的贡献者之一，所以我应该知道 :-) 最近添加了很多很酷的东西，比如宏扩展、编译错误突出显示和多连接支持，仅举几例。更多功能和改进正在筹备中。nrepl.el 的架构比 SLIME 的架构简单得多，而且普通的 Clojure 黑客更容易扩展 nrepl.el。

4.  SLIME 语法高亮？REPL 在 SLIME 和 nrepl.el 中具有相同的字体锁定，并且源缓冲区使用 clojure-mode 的字体锁定。换句话说 - 语法高亮在两者中是相同的。

5.  Emacs Live 依赖于供应商化的 git 子模块，通常它发布的扩展版本有点落后于上游。您可能想尝试作为替代[Emacs Prelude](https://github.com/bbatsov/prelude)，它也附带 Clojure 支持，但始终使用 MELPA 中可用的最新包。

没有`slime-repl`（在 SLIME 之外）。此时它只是 swank-clojure + SLIME 或 nrepl.el。鉴于 nrepl.el 甚至现在实现了 SLIME 的大部分功能 - 你最好习惯使用 nrepl.el。

**更新**

nREPL.el 在 0.2.0 版之后重命名为 CIDER。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T20:40:57.237

nREPL 可能是您最好的选择。它是官方建议的 swank-clojure 替代品，而且设置起来非常容易。（至于 SLIME，swank-clojure*是*对 Clojure 的 SLIME 支持。SWANK 是 SLIME 的后端通信通道。如果你想使用 SLIME，你会想要 swank-clojure - 但当然它已经被 nREPL 放弃了。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T16:24:08.793

我目前的经验是，nrepl.el 的可用性不如 SWANK。然而，无论是在功能方面还是在稳定性方面，它都在快速回升。

现在安装 Swank 有点困难，因为 Clojure 模式已经放弃了它，所以你需要一个旧版本。所以，我的建议是，如果你已经有了一个有效的设置，那么几个月内不要改变任何东西；另一方面，如果您没有可用的设置，请选择 nrepl，因为它迟早会发生，而 Swank 将涉及旧版本。

如果您最终得到 nrepl，正如我所说，它还不完美，但请记住，用一句话来说，事情只会变得更好。

# c# - C# 无法更改 DataGridView 的 DefaultCellStyle.WrapMode

> ID：14738161
> 
> 赞同：0
> 
> 时间：2013-02-06T20:27:46.403
> 
> 标签：c#

我使用绑定到 DataTable 的 DataGridView。DefaultCellStyle.WrapMode 设置为 false，一切都按我想要的方式工作。但是，我想使用一个自定义的 CellPainting（下面的代码），它可以做应该做的事情，但是 WrapMode 不再受到尊重，并且当添加到 DataGridView1 的“URL”列时，现在会包装更长的字符串。

```
 private void dataGridView1_CellPainting(object sender, DataGridViewCellPaintingEventArgs e)
   { 
       if (e.RowIndex < 0) return;

       if (e.ColumnIndex == dataGridView1.Columns["URL"].Index)
       {
           if ((e.State & DataGridViewElementStates.Selected) ==
              DataGridViewElementStates.Selected)
               return;
           e.CellStyle.WrapMode = DataGridViewTriState.False;
           Rectangle rect = new Rectangle(e.CellBounds.X, e.CellBounds.Y,
                                          e.CellBounds.Width - 1, e.CellBounds.Height - 1);

           using (System.Drawing.Drawing2D.LinearGradientBrush lgb =
             new System.Drawing.Drawing2D.LinearGradientBrush(rect, Color.White, Color.Honeydew, 0f))
           {
               e.Graphics.FillRectangle(lgb, rect);
           }

           if (e.Value == null) return;

           using (System.Drawing.Pen pen = new System.Drawing.Pen(dataGridView1.GridColor))
           {
               e.Graphics.DrawRectangle(pen, e.CellBounds.X - 1, e.CellBounds.Y - 1,
                 e.CellBounds.Width, e.CellBounds.Height);
           }

           StringFormat sf = new StringFormat();
           sf.LineAlignment = StringAlignment.Center;
           sf.Alignment = StringAlignment.Near;

           using (System.Drawing.Brush valueBrush = new SolidBrush(e.CellStyle.ForeColor))
           {
               e.Graphics.DrawString(e.Value.ToString(), e.CellStyle.Font, valueBrush, rect, sf);

           }

           e.Handled = true;
       }

     } 
```

我尝试添加以下行：

```
dataGridView1.DefaultCellStyle.WrapMode = DataGridViewTriState.False; 
```

它不起作用，我试过了

```
e.CellStyle.WrapMode = DataGridViewTriState.False; 
```

它也不起作用。

如何使用自定义 CellPainting 并将其设置`DefaultCellStyle.WrapMode`为 false？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:49:10.113

而不是`e.Graphics.DrawString(e.Value.ToString(), e.CellStyle.Font, valueBrush, rect, sf);`尝试使用`TextRenderer`.

```
var textFormatFlag = TextFormatFlags.SingleLine | TextFormatFlags.HorizontalCenter | TextFormatFlags.VerticalCenter;
TextRenderer.DrawText(e.Graphics, e.Value.ToString(), e.CellStyle.Font, rect, e.CellStyle.ForeColor, textFormatFlag); 
```

如果单元格的内容比单元格宽，也添加此标志：

```
TextFormatFlags.EndEllipsis 
```

用'...'结束它:)

有关可用选项的更多信息，请查看[此处](http://msdn.microsoft.com/en-us/library/system.windows.forms.textformatflags.aspx)。

# sql - 使用 Django 的 django-extensions 运行 IPython 笔记本时隐藏 SQL 语句

> ID：14738163
> 
> 赞同：2
> 
> 时间：2013-02-06T20:27:54.153
> 
> 标签：sql, django, ipython, ipython-notebook, django-extensions

我正在使用 Django 的 django-extensions 运行一个 iPython 笔记本，可以访问 Django 模型（详见此处[http://andrewbrookins.com/python/using-ipython-notebook-with-django/](http://andrewbrookins.com/python/using-ipython-notebook-with-django/)）。当我进行模型查询时，笔记本会显示 Django 执行的底层 SQL 查询，如下所示：

![在此处输入图像描述](../Images/bffca92c54ddd2abcd3918ab3af06776.png)

我可以隐藏这个 SQL 吗？它是如此庞大，以至于有时显示器无法使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:26:13.617

使用最新版本，您可以使用

```
%%capture variable
the code 
```

将 stdout 和 stderr 捕获到添加 --no-stdout 标志的变量中

```
%%capture --no-stdout variable 
```

不会捕获标准输出，从而显示它。

另外，请最好使用 IPython（大写字母 I），接受 ipython，但尽量避免使用 iPython

# php - CodeIgniter 页面上的 ajax 调用返回结果“一个空字符串”

> ID：14738166
> 
> 赞同：0
> 
> 时间：2013-02-06T20:28:08.507
> 
> 标签：php, jquery, ajax, codeigniter

我的 CI 应用程序的 index.php 中有一个 AJAX 脚本。此时我只是想返回一个简单的字符串进行测试。我为此使用以下代码：

```
<script>
    $(document).ready(function() {
        $.ajax({
            type: 'POST',
            url: 'index.php/loader/opc_client',
            dataType: 'json',
            cache: false,
            success: function(data) {
                console.log(data);
                $('#opc-results').html(data.test);
            }
        });
    });
</script> 
```

这个调用中的 url 是一个独立的文件，它有自己的控制器。当我直接在浏览器中访问此文件时，它会正常加载并返回预期结果。以下是我的 PHP 代码：

```
<?php echo json_encode("test"); ?> 
```

触发该函数后，我可以在 Firebug 中看到帖子结果，但 Firebug 窗口仅在视图下显示**“一个空字符串” 。**`POST``console`

有什么线索吗？我不明白这...

**更新：**如果我`console.log('success')`在 AJAX 调用的成功参数中，它会正确记录它，所以由于某种原因`data`是空的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:39:16.660

尽管从技术上讲 php 可以将字符串作为数组处理，但您不应该只对字符串进行 json_encode，但我想在这种情况下事情会变得很奇怪。只需将它包装在一个数组中，当您完成测试后，使用键值对可能会更好，因为它使客户端的事情更容易处理，即 obj.property。

尝试`echo json_encode(arrray('test'));`

# collections - java.util.Collection 和 java.util.Set 接口

> ID：14738169
> 
> 赞同：0
> 
> 时间：2013-02-06T20:28:27.260
> 
> 标签：collections

如果 java.util.Set 接口包含与 java.util.Collection 完全相等的方法，那么它的目的是什么？Java中没有禁止多重实现，Set实现（HashSet）可以在没有Set接口的情况下正常工作。那么为什么我们需要那些无用的包袱呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:36:26.937

JavaDoc 描述[`Collection`](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html)（强调我的）的合同：

> 集合表示一组对象，称为其元素。**一些集合允许重复元素，而另一些则不允许**。

开[`Set`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)：

> **不包含重复元素**的集合。

换句话说，`Set`抽象描述了 s 的一个（ekhem！）子集`Collection`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:32:34.980

一个区别是 Collection 允许重复元素，而 Set 不允许。可能还有更多。

# c++ - 如何在（视频）内存中创建缓冲区以使用 OpenGL 进行绘制？

> ID：14738181
> 
> 赞同：0
> 
> 时间：2013-02-06T20:29:10.990
> 
> 标签：c++, opengl, buffer, sfml

OpenGL 使用两个缓冲区，一个用于在屏幕上显示，另一个用于渲染。它们被交换以避免闪烁。（双缓冲。）

是否可以在（我假设是视频内存）中创建另一个“缓冲区”，以便可以在其他地方进行绘图。我问的原因是我有几个 SFML Windows，我希望能够指示 OpenGL 为每个窗口绘制一个独立的缓冲区。目前我无法控制渲染缓冲区。有一个用于编辑：所有（不是每个）窗口。一旦你调用 window.Display()，这个缓冲区的内容就会被复制到另一个出现在窗口中的缓冲区。（我认为这就是它的工作原理。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:40:10.090

您正在寻找的术语是“屏幕外渲染”。使用 OpenGL 有两种方法可以做到这一点。

一种是使用操作系统底层图形层提供的专用离屏drawable。这称为 PBuffer。PBuffer 可以非常像窗口一样使用，它没有映射到屏幕。PBuffers 是第一个使用 OpenGL 实现离屏渲染的稳健方法；它们是在 1998 年推出的。由于 PBuffer 是功能齐全的可绘制对象，因此可以将 OpenGL 上下文附加到它们。

另一种方法是使用 OpenGL 本身而不是操作系统提供的离屏渲染目标。这称为帧缓冲区对象。FBO 需要功能齐全的 OpenGL 上下文才能工作。但是 FBO 无法提供需要附加到 OpenGL 上下文才能正常工作的可绘制对象。所以 FBO 的主要用途是为它们渲染中间图片，稍后在屏幕上渲染可见图片时使用。幸运的是 FBO 可以工作，OpenGL 上下文绑定的可绘制对象可能会被隐藏。因此，您可以使用对用户隐藏的常规窗口。

如果您的愿望是纯粹的离屏渲染，那么 PBuffer 仍然是一个非常可行的选择，尤其是在 GLX/X11 (Linux) 上，它们可以立即可用，而无需修改扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:30:43.903

查看[帧缓冲区对象 (FBO)](http://www.songho.ca/opengl/gl_fbo.html)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-06T20:36:20.887

如果您有第三个缓冲区，您将失去双缓冲的价值。双缓冲区有效，因为您正在更改指向发送到显示设备的像素阵列的指针。如果包含第三个缓冲区，则必须复制到每个缓冲区中。

我已经有一段时间没有使用 OpenGL 了，但是渲染成纹理（位图）会不会更好。这让 OpenGL 的每个实现都可以选择如何将位图从内存中获取到屏幕适当区域的视频缓冲区中。

# actionscript-3 - 如何防止客户端应用程序链接我的库的两个不同版本？

> ID：14738182
> 
> 赞同：1
> 
> 时间：2013-02-06T20:29:16.430
> 
> 标签：actionscript-3, flash, apache-flex, flash-builder, swc

在 AS3/Flex 中，似乎没有任何现成的东西可以阻止客户端应用程序链接（外部或“静态”）我的 SWC 的两个版本。从历史上看，当这种情况发生时，它是在没有任何编译器警告的情况下发生的，直到我们在最终的 SWF 中观察到异常的“混合”行为，我们才知道出了问题。我可以做些什么来严格防止我的库的两个版本包含在应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:23:06.017

有两种不同的链接方式：

*   静态链接（当编译器在编译时知道程序的所有代码时）。
*   动态链接（当代码加载到已编译的应用程序中，但不一定与加载它的应用程序一起编译时）。

    1.  您可能不必担心，链接同一代码的两个不同版本很可能会失败，除非代码作为数据链接（作为嵌入式 SWF 而不是真实代码），在这种情况下，无论是谁这样做都可能知道他们在做什么。

    2.  如果您加载不同版本的库，则可能会发生几种不同的事情。在矩阵的一侧有：“加载到不同的安全域”、“加载到子安全域”、“加载到相同的安全域”，在矩阵的另一侧：“新版本加载旧版本”、“旧版本加载新版本”。

现在，加载到不同安全域的每种情况都可能加载不同版本的库，而无需做任何事情：这就是安全域的用途。当加载到同一个域时，第一个加载的代码获胜。加载到子域时，两个域中将同时存在两个版本。

我会做什么：

```
class Version {

private static var version:String;

public static function setVersion():void {
    if (version) trace("Another library was loaded");
    else version = "1.0.0";
}}
import Version;
Version.setVersion(); 
```

加载 SWF 后，类定义之外的代码将立即运行。如果该类之前已加载，`version`则将设置该变量。显然，您可以使用更复杂的方法来确定要做什么以及继续前进是否安全，具体取决于版本是什么。一般来说，您的代码*应该*在“加载到子域”之类的情况下支持多个版本，如果不支持或试图以某种方式规避它，它将被视为错误。

# asp.net - 突出显示 ASP.Net 菜单中的选定选项卡

> ID：14738185
> 
> 赞同：4
> 
> 时间：2013-02-06T20:29:27.220
> 
> 标签：asp.net, css

我正在尝试用不同的颜色突出显示 ASP.NET 菜单中选定的选项卡。这样做似乎很简单，但首先我无法让它工作，其次我找不到一个好的工作示例。

**ASP/HTML**

```
<div class="clear hideSkiplink">
                <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="False"
                    IncludeStyleBlock="false" Orientation="Horizontal">

                    <Items>
                        <asp:MenuItem NavigateUrl="~/ReadMe.aspx" Text="Read Me" />
                        <asp:MenuItem NavigateUrl="~/Summary.aspx" Text="Summary" />
                        <asp:MenuItem NavigateUrl="~/Detail.aspx" Text="Detail" />
                    </Items>
                </asp:Menu>
  </div> 
```

**CSS**

```
div.hideSkiplink
{
    background-color:#3a4f63;
    width:100%;
}

div.menu
{
    padding: 4px 0px 4px 8px;
}

div.menu ul
{
    list-style: none;
    margin: 0px;
    padding: 0px;
    width: auto;

}

div.menu ul li a, div.menu ul li a:visited
{
    background-color: #465c71;
    border: 1px #4e667d solid;
    color: #dde4ec;
    display: block;
    line-height: 1.35em;
    padding: 4px 20px;
    text-decoration: none;
    white-space: nowrap;
}

div.menu ul li a:hover
{
    background-color: #bfcbd6;
    color: #465c71;
    text-decoration: none;
}

div.menu ul li a:active
{
    background-color: #465c71;

    color: #cfdbe6;
    text-decoration: none;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T10:16:21.403

**这是一个可行的解决方案：** **脚本**

```
<script language="javascript" type="text/javascript">

   $(function () {
        // this will get the full URL at the address bar
        var url = window.location.href;

        // passes on every "a" tag 
        $("#cssmenu a").each(function () {
            // checks if its the same on the address bar
            if (url == (this.href)) {
                $(this).closest("li").addClass("active");
            }
        });
        $("#header a").each(function () {
            // checks if its the same on the address bar
            if (url == (this.href)) {
                $(this).closest("li").addClass("active");
            }
        });

    });
</script> 
```

**标记**

**使用 div 列出项目`id ="cssmenu"`**

```
<div id='cssmenu'>
    <ul>
       <li><a href="../Admin/dashboard.aspx"><span>Dashboard</span></a></li>
       <li><a href="../Admin/Report.aspx"><span>Reports</span></a></li>
       <li><a href="../Admin/Shop.aspx"><span>Shop</span></a></li>
       <li><a href="../Admin/system.aspx"><span>System</span></a></li>
    </ul>
</div> 
```

**样式表**

```
#cssmenu ul {
    list-style-type: none;
    width: auto;
    position: relative;
    display: block;
    height: 33px;
    font-size: .6em;
    background: url(images/bg.png) repeat-x top left;
    font-family: Verdana,Helvetica,Arial,sans-serif;
    border: 1px solid #000;
    margin: 0;
    padding: 0;
}

#cssmenu li {
    display: block;
    float: left;
    margin: 0;
    padding: 0;
}

#cssmenu li a {
    float: left;
    color: #A79787;
    text-decoration: none;
    height: 24px;
    padding: 9px 15px 0;
    font-weight: normal;
}

#cssmenu li a:hover,
#cssmenu .active {
    color: #fff;
    background: url(images/bg.png) repeat-x top left;
    text-decoration: none;
}

#cssmenu .active a {
    color: #fff;
    font-weight: 700;
}

#cssmenu ul { background-color: #629600 }
#cssmenu li a:hover,
#cssmenu li.active { background-color: #7AB900 } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T00:13:20.233

[This answer](https://stackoverflow.com/a/7068011/1085891) to [ASP.NET: Highlight menu item of current page](https://stackoverflow.com/questions/7067944/asp-net-highlight-menu-item-of-current-page) should provide the solution you're after.

Basically, you'll need to use the [Menu.StaticSelectedStyle Property](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.menu.staticselectedstyle.aspx). There's an example in the answer link above and in the documentation.

**Example Snippet**

```
<asp:menu [...]>
        <staticselectedstyle backcolor="LightBlue"
          borderstyle="Solid"
          bordercolor="Black"
          borderwidth="1"/>

        [...]
</asp:menu> 
```

Also, you will need to remove the `menu` [attribute `IncludeStyleBlock="false"`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.menu.includestyleblock.aspx) as it " indicates whether ASP.NET should render a block of cascading style sheet (CSS) definitions for the styles that are used in the menu."

Other helpful links:

*   [asp:MenuItem / CSS](https://stackoverflow.com/questions/6390113/aspmenuitem-css)
*   [StaticMenuItemStyle vs. StaticSelectedStyle - Does one overwrite the other?](https://stackoverflow.com/questions/1676334/staticmenuitemstyle-vs-staticselectedstyle-does-one-overwrite-the-other)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T02:02:17.423

您需要手动设置 Selected MenuItem

```
NavigationMenu.Items(i).Selected = True 
```

我创建了一个函数来使突出显示更容易。

```
SelectMenuByValue("Value2", NavigationMenu) 
```

它将 MenuItem 的 Value 和 Menu 控件实例作为参数。

```
<asp:Menu ID="NavigationMenu" runat="server">
<Items>
    <asp:MenuItem Text="Parent1" Value="ParentValue">
        <asp:MenuItem Text="SubMenu1" Value="Value1" NavigateUrl="~/Page1.aspx" />
        <asp:MenuItem Text="SubMenu2" Value="Value2" NavigateUrl="~/Page2.aspx" />
        <asp:MenuItem Text="SubMenu3" Value="Value3" NavigateUrl="~/Page3.aspx" />
    </asp:MenuItem>
</Items> 
```

后面的代码：

```
Public Sub SelectMenuByValue(ByVal sValue As String, ByVal NavigationMenu As Menu)
Dim iMenuCount As Integer = NavigationMenu.Items.Count - 1
For i As Integer = 0 To iMenuCount
    Dim menuItem As MenuItem = NavigationMenu.Items(i)
    If menuItem.Value = sValue Then
        If menuItem.Enabled AndAlso menuItem.Selectable Then menuItem.Selected = True
        Exit For
    End If
    If CheckSelectSubMenu(menuItem, sValue) Then Exit For
Next
End Sub

Private Function CheckSelectSubMenu(ByVal menuItem As MenuItem, ByVal sValue As String) As Boolean
    CheckSelectSubMenu = False
    Dim iMenuCount As Integer = menuItem.ChildItems.Count - 1
    For i As Integer = 0 To iMenuCount
        Dim subMenuItem As MenuItem = menuItem.ChildItems(i)
        If subMenuItem.Value = sValue Then
            CheckSelectSubMenu = True
            If subMenuItem.Enabled AndAlso subMenuItem.Selectable Then subMenuItem.Selected = True
            Exit For
        End If
        If CheckSelectSubMenu(subMenuItem, sValue) Then
            CheckSelectSubMenu = True
            Exit For
        End If
    Next
End Function 
```

**参考：来自论坛[ASP.NET 4 : Highlight menu item for current page](https://stackoverflow.com/questions/8053337/asp-net-4-highlight-menu-item-for-current-page)**

# bash - 获取 Bash 脚本以检查目录中的文件并根据每个文件执行操作

> ID：14738187
> 
> 赞同：0
> 
> 时间：2013-02-06T20:29:29.723
> 
> 标签：bash

这是我第一次发帖，过去我使用过这里的代码示例，感谢您的帮助。

我目前有一个包含几十个函数的大型 Bash 脚本，并且它正在增长，并且变得越来越难以管理。每个功能确实是一个完全独立的模块，并且为了便于开发，并且能够轻松地允许社区贡献的模块而无需我需要集成每个模块，我想添加具有单独模块文件的功能，主脚本会自动看看，加进去。

目前我有：（超级简化）

脚本.sh

```
#! /bin/bash

function one {
 stuff
}

function two {
 different stuff
}

one
two
exit 
```

但希望有一个自动检查目录的脚本（比如“modules/”），并且任何后缀为.module的文件（例如lights.module）都将被加载到菜单中（我有一个功能很好的whiptail菜单系统已经）。

我已经从 Google 和 stackoverflow 尝试了很多东西，但我似乎碰壁了。

我可以创建一个包含模块名称列表的文件 - 因此可以随意放入一个模块，它会出现在列表中：

```
for entry in /home/tony/scripts/test/modules/*
do
 echo "$entry" >> modules.list # Append the name of present modules to the list of modules
done 
```

但是我如何让我的脚本知道这些模块名称，并对它们做一些事情（即将它们放入一个whiptail 菜单，如果选择了它们就调用它们）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:49:50.933

Have you considered having a folder, and then running:

```
for module in somefolder/*.module; do
    source $module
done 
```

If need be, you can alphabetically sort your modules in the desired execution order

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:45:10.400

KSH 对这类事情有自动加载功能——[这](http://www.linuxtopia.org/online_books/advanced_bash_scripting_guide/x6632.html)似乎意味着 Bash 有一个可用的端口。

# haskell - Haskell 仍然无法推断类型相等

> ID：14738197
> 
> 赞同：0
> 
> 时间：2013-02-06T20:29:55.747
> 
> 标签：haskell

[这个问题是对Haskell can't deduc type equal](https://stackoverflow.com/questions/14734702/haskell-cant-deduce-type-equality)问题的跟进。我尝试使用我上一个问题中描述的可训练类型和以下代码来实现一个基本的多项式逼近器：

```
module MachineLearning.Polynomial
       (polynomial,
        polynomialTrf
       ) where
import MachineLearning.Training
import MachineLearning.Utils

polynomialTrf :: Floating n => [n] -> n -> n
polynomialTrf coeff var = helper 0 coeff var 0 where
  helper _ [] var acc = acc
  helper 0 (c:cs) var acc = helper 1 cs var c 
  helper deg (c:cs) var acc = helper (deg+1) cs var (acc+(c*(var^deg)))

polynomialCost :: Floating n => n -> n -> [n] -> n
polynomialCost var target coeff = sqcost (polynomialTrf coeff var) target

polynomialSV :: (Floating n) => Trainable n n
polynomialSV = Trainable polynomialTrf polynomialCost 
```

这里`sqcost`只是`sqcost a b = (a-b) ^ 2`. 我从编译器收到以下错误消息：

```
src/MachineLearning/Polynomial.hs:18:26:
    Could not deduce (n1 ~ n)
    from the context (Floating n)
      bound by the type signature for
                 polynomialSV :: Floating n => Trainable n n
      at src/MachineLearning/Polynomial.hs:18:1-53
    or from (Floating n1)
      bound by a type expected by the context:
                 Floating n1 => [n1] -> n -> n
      at src/MachineLearning/Polynomial.hs:18:16-53
      `n1' is a rigid type variable bound by
           a type expected by the context: Floating n1 => [n1] -> n -> n
           at src/MachineLearning/Polynomial.hs:18:16
      `n' is a rigid type variable bound by
          the type signature for polynomialSV :: Floating n => Trainable n n
          at src/MachineLearning/Polynomial.hs:18:1
    Expected type: [n] -> n1 -> n1
      Actual type: [n] -> n -> n
    In the first argument of `Trainable', namely `polynomialTrf'
    In the expression: Trainable polynomialTrf polynomialCost

src/MachineLearning/Polynomial.hs:18:40:
    Could not deduce (n ~ n1)
    from the context (Floating n)
      bound by the type signature for
                 polynomialSV :: Floating n => Trainable n n
      at src/MachineLearning/Polynomial.hs:18:1-53
    or from (Floating n1)
      bound by a type expected by the context:
                 Floating n1 => n -> n -> [n1] -> n1
      at src/MachineLearning/Polynomial.hs:18:16-53
      `n' is a rigid type variable bound by
          the type signature for polynomialSV :: Floating n => Trainable n n
          at src/MachineLearning/Polynomial.hs:18:1
      `n1' is a rigid type variable bound by
           a type expected by the context: Floating n1 => n -> n -> [n1] -> n1
           at src/MachineLearning/Polynomial.hs:18:16
    Expected type: n -> n -> [n1] -> n1
      Actual type: n -> n -> [n] -> n
    In the second argument of `Trainable', namely `polynomialCost'
    In the expression: Trainable polynomialTrf polynomialCost 
```

我的问题是问题出在哪里？我该如何解决？对我来说，这两种类型很明显是相等的，所以我有可能误解了类型系统中的某些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:10:21.003

恐怕是等级2

```
data Trainable a b
    = Trainable (forall n. Floating n => [n] -> a -> b)
                (forall n. Floating n => a -> b -> [n] -> n) 
```

不会帮你的。我只关注另一个问题中的类型错误，并没有注意到`Floating`它还不够丰富，无法使其真正可用。由于您一般不能从一个`Floating`类型转换为其他类型或`Floating`从除`Real`s ( `realToFrac`) 之外的任何类型转换为一个类型，因此您通常无法编写给定多态类型的许多有趣的函数，抱歉。

这里的问题是，上述类型要求传递给`Trainable`构造函数的函数适用于所有`Floating`类型`n`（无论指定什么`a`和`b`），但实现`polynomialTrf`只`polynomialCost`适用于一种特定`Floating`类型，即作为（两个）参数给出的类型。`polynomialTrf`有 type `Floating n => [n] -> n -> n`，但它需要有 type`(Floating n, Floating f) => [f] -> n -> n`才有资格传递给`Trainable`构造函数。

使用第三种类型参数，您将拥有

```
Trainable polynomialTrf polynomialCost :: Floating n => Trainable n n n 
```

而对于`trainSgdFull`，您将需要类型

```
trainSgdFull :: (Floating n, Ord n, Mode s) => Trainable a b (AD s n) -> [n] -> a -> b -> [[n]] 
```

能够使用`gradientDescent`。

我不知道如何正确解决您的问题。

# qt - Visual Studio 2012 中的 Qt，“错误 C1083：无法打开包含文件：'stddef.h'：没有这样的文件或目录”

> ID：14738199
> 
> 赞同：2
> 
> 时间：2013-02-06T20:30:01.723
> 
> 标签：qt, opengl, visual-studio-2012

当我尝试为 Qt 编译一些 openGL 项目时出现错误和警告。其中许多是：

```
error C1083: Cannot open include file: 'stddef.h': No such file or directory    d:\documents\code\qt5pack\qt-everywhere-opensource-src-5.0.1\qtbase\src\corelib\global\qglobal.h    46  1   01-createcontext 
```

在 Visual Studio 或 Creator 中使用 Qt 和 OpenGL 让我很头疼。我注意到我的 $VCInstallDir 是 VC10.. 我不知道这是否重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-28T05:54:18.230

我遇到了这个确切的问题，并为此苦苦挣扎了几天。我的情况是这样的：安装了 VSE 2013、Qt 5.3.1（64 位）和 OpenCV 2.4.9（64 位）。工作正常，使用 VS 2013 编译器在 QtCreator + OpenCV 中构建项目。然后我尝试合并 CUDA，发现 CUDA 编译器与 VS 2013 不兼容，因此不得不降级到 2012。这就是问题开始的时候。尝试修复，卸载，重新安装......似乎没有任何效果。我一直在阅读帖子，这可能与未正确安装或安装 Microsoft Platform SDK 有关。所以我去这个网站下载了一份新的副本，并注意到页面下方有一个部分描述了如何卸载它，包括一些手动步骤。

[http://msdn.microsoft.com/en-us/windows/desktop/bg162891.aspx](http://msdn.microsoft.com/en-us/windows/desktop/bg162891.aspx)

所以，这就是我为使一切正常工作所做的工作。也许所有这些步骤都不是必需的，但这就是我所做的。

1）卸载VSE 2012（我已经摆脱了VSE 2013），并删除了文件夹 C:\Program Files (x86)\Microsoft Visual Studio 11.0 和 C:\Program Files (x86)\Microsoft Visual Studio 10.0 两者都有卸载后其中的一些残留物。注意：请记住，VS 2012 实际上是 Visual Studio 11.0，而 VS 2010 是 Visual Studio 10.0。

2）卸载所有Microsoft .NET Framework SDK（我的机器4.5和4.51上有一些）

3) 卸载所有 Microsoft .NET Framework Multi-Targeting Packs，这显然是 SDK 的一部分。同样，我的机器上有几个......我猜来自不同的版本。

4) 重新安装 VSE 2012

5）重新安装微软SDK。对我来说，这是适用于 Windows 7、8 和 8.1 的最新版本 8.1。

6) 确保我所有的工具包在 QtCreator 中都是正确的，它们是正确的，并且一切都可以再次工作。

希望这可以帮助某人。

现在我可以重新使用所有 NVidia/GPU 选项重新编译 OpenCV。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:21:23.423

我对构建、制作和配置项目以及从源代码编译非常陌生。我不知道到底出了什么问题，但我认为这可能与我本月早些时候进行的 VS2010 express 安装有关。我使用卸载程序“修复”了 VS2012，现在它似乎可以工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T20:46:30.927

VS2012 实际上应该指向 VC11...你检查过你的项目属性了吗？您是否安装了 Windows SDK？

# database - 使用枚举代替外键

> ID：14738200
> 
> 赞同：1
> 
> 时间：2013-02-06T20:30:07.380
> 
> 标签：database, hibernate, enums, foreign-keys

今天再次使用 Hibernate Enum Mapping 后，我想知道是否将其扩展一点是否是个好主意。
解释一下我的想法来自哪里：当然，我们的目标是为我们的应用程序建立一个规范化的数据模型，这通常会导致这样一个事实，即我们会得到很多包含类别、状态或类似数据之类的表。通常这些表只有很少的列（通常只有 PK 和 1 或 2 个内容列）和行。此外，这些表格的内容很少改变，有时甚至从不改变。
如果我们为此使用枚举并通过 Ordinal 或 Integer 将其映射到表（两者都使用 Hibernate，但我会说任何 ORM 都可以做到这一点），那么这两种性能不会更好（更少的连接) 和处理（Java 中的枚举可以非常优雅地使用）？

澄清一下：

表人员
ID：数字
名称：Varchar
RELATIONSHIP_STATUS_ID：数字

表 RELATIONSHIP_STATUS
ID：数字
状态：Varchar

内容人员：
1 | 约翰·多伊 | 1
2 | 玛丽·波平斯 | 2

内容关系状态
1 | 单人
2 | 已婚

现在我将转储状态表，将这两个状态放在一个枚举中，然后按序号将其映射到列。
这会是一件有意义的事情吗？如果这种设计在性能方面会更好，我会特别感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:57:21.297

我在表格和枚举之间进行选择的因素如下：

*   可能值的列表将来可能会发生变化，我们不想在发生这种情况时重新编译、重新测试和重新部署应用程序：我们使用表格
*   可能值的列表将来可能会更改，但是表的每个值都在代码本身中用于实现一些业务逻辑（例如 if status == mapped then do something else do something）：我们需要更改如果可能的值列表发生变化，无论如何都是逻辑，所以我们使用枚举
*   列表永远不会改变：我们使用枚举

不过，您仍然可以保留表格，并在代码中使用枚举。当您不知道枚举是如何实现的时，这使得仅查看数据库中的数据时更清楚。0 表示已婚，1 表示单身，一点也不明显。如果您保留该表仅供参考，您至少可以弄清楚这些值的含义，并确保无法在数据中插入 2 或任何其他数字。

另一种方法是使用枚举的名称而不是其序数。它占用了更多空间并且效率更低，但它使数据更加清晰和易于分析。但是，除非您添加检查约束，否则您将失去安全性。

# cordova - PhoneGap 构建 webkit-appearance 选择标签没有下拉箭头

> ID：14738203
> 
> 赞同：2
> 
> 时间：2013-02-06T20:30:15.033
> 
> 标签：cordova, select, drop-down-menu, phonegap

我正在使用 PhoneGap 构建，我的选择标签在手机上没有下拉箭头。我尝试申请`-webkit-appearance: menulist;`，但这没有帮助，我尝试了其他选择，但仍然只显示没有下拉箭头的选项。

这是 PhoneGap 的一个问题，因为相同的代码在我的 Android 手机的本机浏览器上显示了一个下拉箭头。

只有在我使用 PhoneGap 构建时，箭头才会消失。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T10:03:25.470

Android 浏览器对`<select>`s 的渲染是错误的，如果应用了背景或边框，它将删除正常的样式。

由于`<select>`s 看起来不像`<select>`s 是一个相当大的可用性问题，所以最好的办法是不要只为这个浏览器设置样式。

不幸的是，没有纯 CSS 方式来选择/排除 Android 浏览器，所以我建议您使用布局引擎（[https://github.com/stowball/Layout-Engine](https://github.com/stowball/Layout-Engine)`.browser-android` ），它会在`<html>`标签中添加一个类。

然后，您可以`<select>`设置除 Android 浏览器之外的所有 s 的样式，如下所示：

```
html:not(.browser-android) select {
    background: #0f0;
    border: 1px solid #ff0;
} 
```

# c++ - 当键不存在时，对象的 C++ 映射擦除

> ID：14738205
> 
> 赞同：0
> 
> 时间：2013-02-06T20:30:23.523
> 
> 标签：c++, map, stl

我在 C++ (gcc) 中有以下地图：

```
map<int, EdgeExtended> myMap; 
```

其中 EdgeExtended 的定义是：

```
struct EdgeExtended {
    int neighborNodeId;
    int weight;
    int arrayPointer;
    bool isCrossEdge;

    EdgeExtended(Edge _edge, int _arrayPointer) {
        neighborNodeId = _edge.neighborNodeId;
        weight = _edge.weight;
        arrayPointer = arrayPointer;
        isCrossEdge = _edge.isCrossEdge;
    }

    EdgeExtended(const EdgeExtended & _edge) {
        neighborNodeId = _edge.neighborNodeId;
        weight = _edge.weight;
        arrayPointer = _edge.arrayPointer;
        isCrossEdge = _edge.isCrossEdge;
    }

    EdgeExtended(int _neighborNodeId, int _weight, bool _isCrossEdge, int _arrayPointer) {
        neighborNodeId = _neighborNodeId;
        weight = _weight;
        arrayPointer = _arrayPointer;
        isCrossEdge = _isCrossEdge;
    }

    void setValues(int _neighborNodeId, int _weight, bool _isCrossEdge, int _arrayPointer) {
        neighborNodeId = _neighborNodeId;
        weight = _weight;
        arrayPointer = _arrayPointer;
        isCrossEdge = _isCrossEdge;
    }

    EdgeExtended() {
        neighborNodeId = -1;
        weight = -1;
        arrayPointer = -1;
        isCrossEdge = false;
    }
}; 
```

我想这样做（简单的例子）：

```
EdgeMap edge;
int nodeId=18;

edge=map.erase(nodeId); 
```

a）此代码是否正确，擦除是否返回与键对应的对象？b) 如果是，当密钥不存在时，擦除返回什么？c）如果此代码错误，我如何检查是否存在键，对象映射到键，然后从映射中删除该对。请记住，性能相当关键，所以我需要最有效的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:32:36.033

a) 不，这是不正确的。您调用的[std::map::erase](http://en.cppreference.com/w/cpp/container/map/erase)方法返回已擦除元素的数量。

您可以做的是使用[std::map::find](http://en.cppreference.com/w/cpp/container/map/find)检查具有给定键的元素是否在地图中。如果元素存在，则返回一个迭代器，如果不存在则返回`end()`。您可以将此迭代器传递给相关的`std::map::erase`重载。

```
EdgeMap edge;
int nodeId=18;
ExtendedEdge removedEdge;
....
EdgeMap::iterator it = edge.find(nodeId);
if( it != edge.end() ) 
{
  // found element.
  removedEdge = it->second; // or removeEdge = std::move(it->second) in C++11
  edge.erase(it);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T20:38:13.710

> a）此代码是否正确，擦除是否返回与键对应的对象？

不，这将返回已删除的元素数。

> b) 如果是，当密钥不存在时，擦除返回什么？

不适用。它只是返回`0`。

> c）如果此代码错误，我如何检查是否存在键，对象映射到键，然后从映射中删除该对。请记住，性能相当关键，所以我需要最有效的方法。

```
auto it = yourMap.find(nodeId);
if (it != yourMap.end()) {
   EdgeExtended theObjectToRemove = *it;
   yourMap.erase(it);
} 
```

这与普通的复杂性相同`erase(nodeId);`，因为`erase(it)`需要摊销的常数时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T20:36:54.970

我会用迭代器来做，像这样：

```
typedef map<int, EdgeExtended> EdgeMap;

bool RemoveEdge( EdgeMap & myMap, int nodeId, EdgeExtended &edge )
{
    EdgeMap::iterator e = myMap.find(nodeId);
    if( e == myMap.end() ) return false;
    edge = e->second;
    myMap.erase(e);
    return true;
} 
```

# php - PHP 不会将文件写入具有 +rw 权限的目录

> ID：14738207
> 
> 赞同：0
> 
> 时间：2013-02-06T20:30:29.807
> 
> 标签：php, file, fwrite

我有一个简单的 .php 文件：

```
<?php
$archivo = $_POST["name"];
$alineamiento = $_POST["alineamiento"];
$fp=fopen("$archivo","w");
fwrite($fp,$alineamiento);
fclose($fp);
?> 
```

这很好用，但是当我需要将文件写入子文件夹（sub_mat）时：

```
<?php
$archivo = $_POST["name"];
$alineamiento = $_POST["alineamiento"];
$fp=fopen("/var/www/SChip/sub_mat/$archivo","w");
fwrite($fp,$alineamiento);
fclose($fp);
?> 
```

这不起作用。我也尝试不使用绝对路径目录，例如：

```
<?php
$archivo = $_POST["name"];
$alineamiento = $_POST["alineamiento"];
$fp=fopen("sub_mat/$archivo","w");
fwrite($fp,$alineamiento);
fclose($fp);
?> 
```

我`rw`在 sub_mat 文件夹中有权限。我在 Chrome、FF 和 Opera 上尝试了这个，但它不起作用。我知道这一定很愚蠢，但我无法弄清楚问题所在。

编辑

我修改了脚本，添加`system("mv ...")`并初始化了值。如果我在控制台中运行它，它工作正常，没有错误，只有：

> PHP 注意：未定义索引：第 2 行 /var/www/SChip/create-matrix.php 中的名称
> PHP 注意：未定义索引：第 3 行 /var/www/SChip/create-matrix.php 中的 alineamiento

但这很明显......但是当我在 Chrome 或 FF 中运行时，它不起作用，没有错误或警告。它只是将文件留在当前文件夹中，并且`mv`不执行。

```
<?php
$archivo = $_POST["name"];
$alineamiento = $_POST["alineamiento"];
$archivo = "testing";
$alineamiento = "test2";
$fp=fopen("$archivo","w");
fwrite($fp,$alineamiento);
fclose($fp);
system("mv $archivo custom_matrices_temporal/$archivo");
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T20:53:13.080

该目录还需要*执行*( `x`) 权限以允许创建新文件。

# ruby - 使用 Axlsx gem 阅读和编辑 Excel 模板？

> ID：14738208
> 
> 赞同：4
> 
> 时间：2013-02-06T20:30:30.853
> 
> 标签：ruby, excel, axlsx

我有一个我想加载然后在 ruby​​ 中编辑的 excel 模板。我查看了 Axlsx gem，但没有看到读取文件和编辑的方法？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:57:39.203

我见过的唯一与此相似的是这个 repo/gem。

[https://github.com/asanghi/excel_rails](https://github.com/asanghi/excel_rails)

我从来没有亲自使用过它，所以ymmv！

# javascript - 通过向上和向下箭头键导航到特定的锚标记

> ID：14738209
> 
> 赞同：0
> 
> 时间：2013-02-06T20:30:31.670
> 
> 标签：javascript, smooth-scrolling, keyboard-navigation

我目前正在使用锚标签，并在 5 个链接上实现了平滑滚动。这目前完美无缺。但是，我现在想添加使用箭头键在这些相同的锚标记中导航的功能。

我只能通过javascript和jquery摸索，所以当涉及到这些东西时我很困惑。

```
<ul>
    <li class="scrolldot"><span><a href="#one">1</a></span></li>
    <li class="scrolldot"><span><a href="#two">2</a></span></li>
    <li class="scrolldot"><span><a href="#three">3</a></span></li>
    <li class="scrolldot"><span><a href="#four">4</a></span></li>
    <li class="scrolldot"><span><a href="#five">5</a></span></li>
    <li class="scrolldot"><span><a href="#six">6</a></span></li>
</ul> 
```

所以基本上，我希望用户点击向下箭头并将他们带到下一部分，具体取决于他们在页面上的位置。如果他们在第 2 部分，请将它们带到第 3 部分。如果他们再次击中，他们将被带回两个等等。说得通？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:24:26.457

结帐[捕鼠器](http://craig.is/killing/mice "捕鼠器")。这是一个漂亮的小库，可以很容易地绑定键。网站上也有一些很好的例子。

也许这样的事情就足够了：

```
Mousetrap.bind('up', function() {
    your_up_function();
});

Mousetrap.bind('down', function() {
    your_down_function();
}); 
```

# python - Python：无法识别 Django 模型中的更改

> ID：14738211
> 
> 赞同：1
> 
> 时间：2013-02-06T20:30:38.157
> 
> 标签：python, django, shell, models, choice

这一定很简单，但我无法理解它。我想为 django 模型实例分配一个简单的单字符值。我已经这样做了一百万次，但在这种情况下，它不起作用。

我的模型.py

```
class MetaInformation(models.Model):
    # part of the class profile ...
    PROFILE_STATUS = (
        ('C', 'Claimed'),
        ('U', 'Unclaimed'),)
    status = models.CharField(_('Profile'), max_length=1,
        choices = PROFILE_STATUS,)

class Profile(MetaInformation):
    # additional attributes
    ... 
```

现在我正在执行`Django shell`：

```
In [1]: a = Profile.objects.all()
In [2]: a[1].status
Out[2]: u'U'
In [3]: a[1].status = Profile.PROFILE_STATUS[0] # equal to 'C'
In [4]: a[1].save() 
```

我希望结果是

```
In [14]: a[1].status
Out[14]: u'C' 
```

但 Django 回来了

```
In [14]: a[1].status
Out[14]: u'U' 
```

**为什么无法识别属性的保存或提供任何错误消息？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T06:24:05.067

我相信，Bibhas 的答案大部分是正确的。您总是通过 QuerySet 引用数据这一事实`Profile.objects.all()`是其中最大的部分。再加上 Django 处理切片的方式（如列表索引，但 QuerySet 并不是真正的列表），以及数据库不必考虑记录排序的事实，您就会有一个奇妙的困惑和挫败感。

序列

```
a = Profile.objects.all()
a[1].status 
```

将产生类似于此的 SQL：

```
SELECT * FROM user_profile LIMIT 1 OFFSET 1; 
```

为了从表中获取单个值。这里有几件重要的事情：

1.  仅获取一条记录。这样做是为了提高效率，因为您只要求一条记录，因此不再检索。这也意味着
2.  Django 不会填充 QuerySet 的缓存。这意味着下次您请求 a[1] 时，它将再次访问数据库。
3.  此查询没有指定顺序。数据库可以自由地以对其最有效的任何顺序返回行，并且该顺序甚至可以在查询之间更改。

我知道 MySQL 通常会按照最近更新的顺序返回记录。因此，仅通过保存记录，它就不太可能处于与以前相同的位置。它可能会移动到结果集的开头或结尾，但不太可能保持在位置 1（返回的第二项）。

为避免这种情况，不要将查询集视为列表。不要直接对使用切片语法检索到的项目执行操作。如果您需要这样做，请将它们存储在一个临时变量中，并对该变量执行所有操作。

这个小小的修改可以避免所有的麻烦：

```
>>> a = Profile.objects.all()
>>> b = a[1]
>>> b.status
'U'
>>> b.status = 'C'
>>> b.save()
>>> b.status
'C' 
```

或者，如果您需要将其视为列表，则将其设为一个。从 QuerySet 中创建一个列表将完全评估它，并将整个结果集存储在内存中，每次请求时 a[1] 都保证是同一个对象。

```
>>> a = list(Profile.objects.all()) # Warning -- may be huge if the Profile table is large
>>> a[1].status
'U'
>>> a[1].status = 'C'
>>> a[1].save()
>>> a[1].status
'C' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T05:49:38.887

看看这个 -

```
>>> from apps.users.models import Member
>>> members = Member.objects.all()
>>> members[1].user_type
u'C'
>>> members[1].user_type = 'M'
>>> members[1].save()
>>> members[1].user_type
u'C'
>>> m = members[1]
>>> m.user_type
u'C'
>>> m.user_type = 'M'
>>> m.save()
>>> m.user_type
'M' 
```

这是我认为正在发生的事情：该`all()`方法返回一个 QuerySet。`save()`从上面的查询中，当您对 QuerySet 中的项目执行更改时，不会将更改提交到数据库。但是，如果您`Member`单独对一个对象执行此操作，它确实有效。从 Django 文档中 -

> QuerySet 是惰性的——创建 QuerySet 的行为不涉及任何数据库活动。您可以整天将过滤器堆叠在一起，并且在评估 QuerySet 之前，Django 不会实际运行查询。...
> 
> 通常，在您“请求”查询集的结果之前，不会从数据库中获取它们。执行此操作时，将通过访问数据库来评估 QuerySet。

[你可以在这里](https://docs.djangoproject.com/en/dev/topics/db/queries/#querysets-are-lazy)阅读更多。所以`save()`on 方法`members[1]`不会触及数据库或从那里读回。而`Member`对象上的更改被提交到数据库并立即读回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T20:36:59.433

`PROFILE_STATUS[0]`将返回 the`('C', 'Claimed')`和它的一个元组。你需要`PROFILE_STATUS[0][0]`：

```
a[1].status = Profile.PROFILE_STATUS[0][0] 
```

# node.js - 在 express 中添加故意延迟

> ID：14738212
> 
> 赞同：49
> 
> 时间：2013-02-06T20:30:39.923
> 
> 标签：node.js, express

我将 express 与 node.js 一起使用，并测试某些路由。我在[http://coenraets.org/blog/2012/10/creating-a-rest-api-using-node-js-express-and-mongodb/做这个 tute](http://coenraets.org/blog/2012/10/creating-a-rest-api-using-node-js-express-and-mongodb/)

我通过 ajax 调用`http://localhost:3000/wines`（内容无关紧要）。但我想测试延迟。我可以在 2 秒后做类似做出快速响应的事情吗？（我想模拟 ajax 加载器，我在 localhost 上运行，所以我的延迟几乎为零）

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-11-13T13:22:36.323

用作中间件，满足您的所有请求

```
 app.use(function(req,res,next){setTimeout(next,1000)}); 
```

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2013-02-06T21:21:10.197

只需在[setTimeout](http://nodejs.org/api/globals.html#globals_settimeout_cb_ms)`res.send`内部调用：

```
setTimeout((() => {
  res.send(items)
}), 2000) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-06T07:31:55.117

尝试[连接暂停](https://github.com/flesler/connect-pause)模块。它会为您的应用程序中的所有或仅部分路由增加延迟。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-04-23T05:36:55.950

要在所有请求上全局应用它，您可以使用以下代码：

```
app.use( ( req, res, next ) => {
    setTimeout(next, Math.floor( ( Math.random() * 2000 ) + 100 ) );
}); 
```

* * *

**时间值是：**

最大值 = 2000（有点....最小值被添加，所以实际上它的 2100）

最小值 = 100

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-09-13T19:29:23.740

只需在@maggocnx 的解决方案之上添加评论：尽早放置此中间件（在您的路由处理程序之前）

`app.use(function(req,res,next){setTimeout(next,1000)});`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-03-29T07:58:42.117

```
app.get('/fakeDelay', function(req,res){
    let ms = req.query.t;
    ms = (ms>5000 || isNaN(ms)) ? 1000 : parseInt(ms); 
    setTimeout((()=> res.status(200).send({delay:ms})), ms);
}) 
```

然后将 URL 请求为：http://localhost/fakeDelay/?t=2000 *（本例中最大 5000 毫秒，默认为 1000 毫秒）*

**更新：** 使用承诺。'sleep' 功能可用于延迟任何 Express 响应或其他异步功能。

```
const sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));

app.get('/fakeDelay', async (req, res) => {
  await sleep(500);
  res.send([])
}) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-13T08:31:42.587

您也可以使用 Promise 或回调（在本例中使用[q](https://github.com/kriskowal/q) Promise）编写自己的通用延迟处理程序：

**暂停.js：**

```
var q = require('q');

function pause(time) {
    var deferred = q.defer();

    // if the supplied time value is not a number, 
    // set it to 0, 
    // else use supplied value
    time = isNaN(time) ? 0 : time;

    // Logging that this function has been called, 
    // just in case you forgot about a pause() you added somewhere, 
    // and you think your code is just running super-slow :)
    console.log('pause()-ing for ' + time + ' milliseconds');

    setTimeout(function () {
        deferred.resolve();
    }, time);

    return deferred.promise;
}

module.exports = pause; 
```

然后随心所欲地使用它：

**server.js：**

```
var pause = require('./pause');

router.get('/items', function (req, res) {
    var items = [];

    pause(2000)
        .then(function () {
            res.send(items)
        });

}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-29T15:19:54.560

您可以使用[express-delay](https://npm.io/package/express-delay)包。

下面的代码会将所有传入的请求延迟一秒。

```
const app = require('express')();
const delay = require('express-delay');
app.use(delay(1000)); 
```

该包还提供了在指定边界内引入随机延迟的可能性，例如通过调用`delay(1000, 2000)`一到两秒之间的延迟。

# macos - 在 NSTextView 上滚动不起作用

> ID：14738216
> 
> 赞同：2
> 
> 时间：2013-02-06T20:30:47.237
> 
> 标签：macos, cocoa, nstextview, nsscrollview

我在屏幕上的 NSTextView 上附加了一些文本，因此我希望用户能够在视图中滚动以查看整个日志。但我无法让我的文本视图滚动。下面是我的代码。知道这里有什么问题。

```
NSView *superview = [window contentView];

NSRect scrollViewFrame = NSMakeRect(10, self.window.frame.size.height / 2 - 200, 400, 400);
NSScrollView *scrollview = [[NSScrollView alloc]

                            initWithFrame:scrollViewFrame];

NSSize contentSize = [scrollview contentSize];
[scrollview setBorderType:NSLineBorder];
[scrollview setHasVerticalScroller:YES];
[scrollview setHasHorizontalScroller:NO];
[scrollview setAutoresizingMask:NSViewWidthSizable|NSViewHeightSizable];

NSRect textViewFrame = NSMakeRect(0, 0, contentSize.width, contentSize.height);
self.logTextView = [[NSTextView alloc] initWithFrame:textViewFrame];
[self.logTextView setMinSize:NSMakeSize(0.0, contentSize.height)];
[self.logTextView setMaxSize:NSMakeSize(FLT_MAX, FLT_MAX)];
[self.logTextView setVerticallyResizable:YES];
[self.logTextView setHorizontallyResizable:NO];
[self.logTextView setAutoresizingMask:NSViewWidthSizable];

[scrollview addSubview:self.logTextView];
[superview addSubview:scrollview]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:40:00.287

这是固定的。我忘了为我的滚动视图设置文档视图。

```
[scrollview setDocumentView:self.logTextView]; 
```

# git - 意外挂断后如何恢复 git pull/clone？

> ID：14738219
> 
> 赞同：35
> 
> 时间：2013-02-06T20:30:57.277
> 
> 标签：git

我对某个存储库（主要是 github 的）执行 git pull/clone。有时几分钟后下载会崩溃。

这是一个日志。

```
remote: Counting objects: 2284, done.
remote: Compressing objects: 100% (713/713), done.
fatal: The remote end hung up unexpectedlyiB | 5 KiB/s      
fatal: early EOF
fatal: index-pack failed 
```

在我的后续过程中，我注意到我已经获取了大约 4 MB 的对象。当我再次启动该过程时，它会从头开始。我的互联网连接很糟糕，有时它会崩溃并且我意外断开连接。

我的问题是：有没有办法恢复拉/克隆来拯救我已经获取的那些 4 MB，而不是重新开始？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-06T20:39:05.937

如果拉挂了，它不会将任何更改写入您的文件系统。这是因为，如果是这样，您的本地存储库将不会处于稳定状态。

**无法恢复 pull/** clone 。所以你唯一的选择是再次拉/克隆。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-20T12:21:22.780

cd进入主目录并运行

```
git fetch 
```

仅在 linux 上测试

# android - FFT之前或之后归一化信号之间有什么区别？

> ID：14738221
> 
> 赞同：0
> 
> 时间：2013-02-06T20:31:11.197
> 
> 标签：android, signal-processing, fft, normalization, libgdx

我正在使用 Libgdx 库从 Android 应用程序中的加速度计信号进行 FFT。

我需要对信号进行归一化，因为我找到了两个信号的点积，我想要它的最大值 1。

对于“**归一化**”，我的意思是信号的*欧几里得*范数为 1。（欧几里德范数是向量模拟分量乘积之和的平方根。当我找到它的值时，对于归一化信号，我将向量的所有分量除以标准值）。

点积在频谱中，所以如果我在时域对信号进行归一化，频谱表示不是欧几里得归一化，那么我将再次进行欧几里得归一化。*（我已经考虑在 FFT 之后按 1/N比例因子*进行归一化，我认为它可能不会影响我的问题）。

如果我在 FFT 之前和之后进行欧几里得归一化，或者我只在 FFT 之后进行，有哪些区别？

编辑 1：还考虑 Libgdx 库中的 FFT 是复杂 DFT，并且我在输入中有实信号，而不是输出信号对于 0 到 (N/2)-1 和 N/2 到 N 是对称的。我验证 Parseval 定理如果我不应用任何窗口（如 Hamming 的窗口），则已验证。那么，如果我使用 0 到 N/2-1 个信号分量，我会得到 0 到 1 之间的点积吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T23:39:04.540

嗯，似乎没有人回答这个问题。不知道为什么，但我会简短地插话。

令 f[n] 为信号，F[k] 为傅里叶变换版本（显然是离散的）。

根据[Parseval 定理](http://en.wikipedia.org/wiki/Parseval%27s_theorem)，我们有：

```
 norm(f[n]) = (1/N) norm(F[k]) 
```

其中 N 是样本数。通过傅里叶变换的齐次性，如果g[n]=af[n]，则G[k] = a F[k]。

最后，将这两者结合起来，为了使 norm(F[k]) 为 1，您需要做的是除以：

```
 (1)      norm(F[k]) = N norm(f[n]) 
```

在时域或频域中。

类似地，如果您希望 norm(f[n]) 为 1，您需要做的就是除以：

```
 (2)      norm(f[n]) = (1/N) norm(F[k]) 
```

最后：

**如果我在 FFT 之前和之后进行欧几里得归一化，或者我只在 FFT 之后进行，有哪些区别？**

因为傅立叶变换是线性的（并且保持同质性），所以无论您在之前还是之后进行划分都没有区别。但是，如果您希望时域的范数为 1，那么您应该使用 (2) 中的常数。另一方面，要使频域范数为 1，您应该在 (1) 中使用常数。

# cassandra - 4节点Cassandra集群，各50.00%

> ID：14738222
> 
> 赞同：-1
> 
> 时间：2013-02-06T20:31:12.260
> 
> 标签：cassandra

我在 Windows 平台构建的 Cassandra 集群上运行 4 个节点。当我跑

nodetool -h 本地主机环

种子节点上的命令，我看到每个节点处于启动状态，正常状态并拥有**50.00%**我希望看到**25.00%**。看到每个节点拥有 50.00% 是否正常？

这里是每个节点的配置；

**1\. 节点**

```
rpc_address: 0.0.0.0
initial_token: -9223372036854775808
listen_address: [IP Addres of the machine]
seeds: "[IP Addres of the seed machine (1\. Node)]" 
```

**2.节点**

```
rpc_address: 0.0.0.0
initial_token: -4611686018427387904
listen_address: [IP Addres of the machine]
seeds: "[IP Addres of the seed machine (1\. Node)]" 
```

**3\. 节点**

```
rpc_address: 0.0.0.0
initial_token: 0
listen_address: [IP Addres of the machine]
seeds: "[IP Addres of the seed machine (1\. Node)]" 
```

**4.节点**

```
rpc_address: 0.0.0.0
initial_token: 4611686018427387904
listen_address: [IP Addres of the machine]
seeds: "[IP Addres of the seed machine (1\. Node)]" 
```

使用此公式计算的初始代币；(2^64 / 4) * [节点索引] - 2^63

Cassandra 1.2.1 安装在每个节点上。关于每个节点的 50.00% 值的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T14:13:55.710

在您设置复制因子并创建密钥空间之前，您无法真正说出每个节点拥有多少。创建一个具有 replication_factor=1 的 KS，每个节点将拥有 25%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:20:21.807

你的复制因子是 2 吗？

这可以解释它 - 你的数据在环中有两次。

# c# - 如何防止文本框上的回车键重定向到asp.net c#上的另一个页面？

> ID：14738223
> 
> 赞同：0
> 
> 时间：2013-02-06T20:31:19.300
> 
> 标签：c#, asp.net, redirect, webpage

当我在文本框中输入内容时，每当我按 Enter 键时都会遇到问题。我知道有些面板可以让您运行按钮的确切功能，但是，这一次当我在文本框上按 Enter 时，它通常会将我发送到解决方案的不同页面。

真诚地，我不知道为什么会发生这种情况，即使系统发送给我的页面也不同，有时我无法说出为什么会发生这种情况。

有没有办法或我可以做的事情，以便每当您在文本框上按 enter 时，它什么都不做（我想甚至没有回发）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:30:22.007

捕获按键事件并停止页面执行请求：这是使用 jquery：

```
$(document).keypress(function (e) {
    var keyCode = (window.event) ? e.which : e.keyCode;
    if (keyCode && keyCode == 13) {
        e.preventDefault();
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:50:12.490

```
$("#<%=id_of_textbox.ClientID %>").keydown(function(event) {
    if (event.keyCode == 13) {
      $("#<%=id_of_search_button.ClientID %>").click();
      return false;
    }
}); 
```

# xpages - XPage 数据视图添加行在服务器上不起作用

> ID：14738224
> 
> 赞同：1
> 
> 时间：2013-02-06T20:31:24.370
> 
> 标签：xpages, xpages-extlib

我正在研究一个非常简单的移动 XPages 示例，它使用带有添加行事件的数据视图来加载更多行。它在我本地预览时有效，但在服务器上无效 - 单击链接什么都不做（没有错误，没有更多行，什么都没有）。我在 Domino 8.5.3 上安装了升级包 1（尝试了 Windows 2008 和 Ubuntu Linux）。我可以检查和/或启用（调试）什么来找出它为什么不能在服务器上运行？

```
<xe:appPage id="ourFaculty" pageName="ourFaculty" resetContent="false">
    <xe:djxmHeading id="djxmHeading1" label="Our Faculty"
        transition="fade" moveTo="homePage" back="Home">
    </xe:djxmHeading>
    <xe:dataView id="dataView1" rows="8" pageName="displayContact"
        openDocAsReadonly="true">
        <xp:this.facets>
            <xp:link escape="true" text="Load More Rows" id="link1"
                xp:key="pagerBottom">
                <xp:eventHandler event="onclick" submit="false">
                    <xp:this.script>
                        <xe:addRows for="dataView1" rowCount="8"></xe:addRows>
                    </xp:this.script>
                </xp:eventHandler>
            </xp:link>
        </xp:this.facets>
        <xe:this.data>
            <xp:dominoView var="vwContacts" viewName="vwContacts">
            </xp:dominoView>
        </xe:this.data>
        <xe:this.summaryColumn>
            <xe:viewSummaryColumn columnName="Name"
                columnTitle="Contact">
            </xe:viewSummaryColumn>
        </xe:this.summaryColumn>
    </xe:dataView>
</xe:appPage> 
```

更多信息...我使用调试器查看 HTTP 请求。在本地数据库中，这里是初始页面的请求（相关信息）和“更多”链接：

```
GET .../mobilePage.xsp?$$ajaxid=view...$$viewid=!de59blf2bg! [HTTP/1.1 200 OK 20ms]
GET .../mobilePage.xsp/getRows?$$axtarget=view:_id...$$viewid=!de59blf2b5!&first=8&rows=8&state=false [HTTP/1.1 200 OK 30ms] 
```

在本地预览中，请求之间的“viewid”参数是相同的。在服务器上，情况有所不同：

```
GET .../mobilePage.xsp?$$ajaxid=view...$$viewid=!de59cuxasl! [HTTP/1.1 200 OK 30ms]
GET .../mobilePage.xsp/getRows?$$axtarget=view:_id...$$viewid=!de59cwhsqv!&first=8&rows=8&state=false [HTTP/1.1 200 OK 210ms]
no element found 
```

我猜这就是原因，但我不知道是什么原因造成的，也不知道如何解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:18:42.513

在 xe:appPage 上尝试设置 resetContent="true"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T02:13:51.973

经过大量场景（感谢虚拟机）和大量调试后，我想通了。事实证明，扩展库没有任何问题。它回到了我在服务器上出于历史目的进行的 URL 重定向。我有一个转换为“！”的 URL 重定向。到 ”？”。这是让文档出现在搜索引擎中的老技巧。我摆脱了那些 URL 重定向文档，重新启动了 HTTP，一切正常。

# javascript - 使用 Sammy.js 路由 knockout.js 应用程序和使用 html4 支持的历史记录

> ID：14738225
> 
> 赞同：4
> 
> 时间：2013-02-06T20:31:28.830
> 
> 标签：javascript, knockout.js, sammy.js

我刚开始玩 sammy.js，我想做的第一件事就是测试历史更改是如何工作的。它按预期工作，甚至更好，但是一旦我打开 IE10 并切换到 IE9 浏览器模式，一切都崩溃了。如果我没有使用哈希设置链接，IE9 只会继续跟踪链接。当然，IE8 也有同样的问题。

目前我只有这段与 sammy 相关的代码

```
App.sm = $.sammy('#content', function() {

    this.get('/', function(context) {
        console.log('Yo yo yo')
    });

    this.get('/landing', function(context) {
        console.log('landing page')
    });

    this.get('/:user', function(context) {
        console.log(context)
    });

}); 
```

和发起人

```
$(function() {
    App.sm.run('/');
}); 
```

我还查看了这个[示例](http://pushstate.quirkey.com/)，它包含三种类型的链接，普通链接、哈希链接和普通链接，但在 IE9 和 IE8 上都能正常工作。这让我觉得应该可以让 sammy.js 同时支持 html5 历史和 html4。

所以我的问题是，我怎样才能做到这一点？

**更新**

我找到了让它在 IE 上运行的方法

我刚刚添加了这个片段：

```
this.bind('run', function(e) {
        var ctx = this;
        $('body').on('click', 'a', function(e) {
            e.preventDefault();
            ctx.redirect($(e.target).attr('href'));
            return false;
        });
    }); 
```

无论如何，我在进入网站时仍然遇到问题，支持浏览器的 html5 历史记录总是被重定向到 domain.com，无论初始 url 是什么。

所以我想知道我应该如何配置 sammy.js 才能正常工作。或者，也许任何人都可以推荐一些其他可以很好地与 knockout.js 配合使用的路由器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-21T07:03:22.450

出于多种原因，包括搜索引擎蜘蛛和链接共享；您的网站应该可以在没有 History API 的情况下运行。如果用户看到[http://example.org/poodles/red](http://example.org/poodles/red)并想向其他人展示您网站上的红色贵宾犬，他们会复制该链接。其他访问者需要能够在相同的 URL 上看到相同的内容；即使他们不是从主页开始。

出于这个原因，我建议使用 History API 作为渐进式增强。在可用的地方，您应该使用它来提供更好的用户体验。在不可用的地方，链接应该正常运行。

这是一个示例路由器（如 Sammy），如果 history.pushState 不可用，它只允许默认浏览器导航。

关于淘汰赛部分；我在一个 KnockoutJS 项目中使用了它，它运行良好。

```
(function($){

    function Route(path, callback) {
        function escapeRegExp(str) {
            return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
        }

        // replace "/:something" with a regular expression fragment
        var expression = escapeRegExp(path).replace(/\/:(\w+)+/g, "/(\\w+)*");

        this.regex = new RegExp(expression);
        this.callback = callback;
    }

    Route.prototype.test = function (path) {
        this.regex.lastIndex = 0;

        var match = this.regex.exec(path);

        if (match !== null && match[0].length === path.length) {
            // call it, passing any matching groups
            this.callback.apply(this, match.slice(1));
            return false;
        }

    };

    function Router(paths) {
        var self = this;
        self.routes = [];
        $.each(paths, function (path, callback) {
            self.routes.push(new Route(path, callback));
        });

        self.listen();
        self.doCallbacks(location.pathname);
    }

    Router.prototype.listen = function () {
        var self = this, $document = $(document);

        // watch for clicks on links
        // does AJAX when ctrl is not down
        // nor the href ends in .html
        // nor the href is blank
        // nor the href is /
        $document.ready(function(e){

           $document.on("click", "[href]", function(e){
               var href = this.getAttribute("href");

               if ( !e.ctrlKey && (href.indexOf(".html") !== href.length - 5) && (href.indexOf(".zip") !== href.length - 4) && href.length > 0 && href !== "/") {
                   e.preventDefault();
                   self.navigate(href);
               }
           });
        });

        window.addEventListener("popstate", function(e) {
            self.doCallbacks(location.pathname);
        });
    };

    Router.prototype.navigate = function(url) {
        if (window.history && window.history.pushState) {
            history.pushState(null, null, url);
            this.doCallbacks(location.pathname);
        }
    };

    Router.prototype.doCallbacks = function(url) {
        var routes = this.routes;

        for (var i=0; i<routes.length; i++){
            var route = routes[i];

            // it returns false when there's a match
            if (route.test(url) === false) {
                console.log("nav matched " + route.regex);
                return;
            }
        }

        if (typeof this.fourOhFour === "function") {
            this.fourOhFour(url);
        } else {
            console.log("404 at ", url);
        }
    };

    window.Router = Router;

}).call(this, jQuery); 
```

示例用法：

```
router = new Router({
    "/": function () {

    },
    "/category/:which": function (category) {

    },
    "/search/:query": function(query) {

    },
    "/search/:category/:query": function(category, query) {

    },
    "/:foo/:bar": function(foo, bar) {

    }
});

router.fourOhFour = function(requestURL){

}; 
```

# android - 如何为移动跨平台网站编写 CSS

> ID：14738228
> 
> 赞同：0
> 
> 时间：2013-02-06T20:31:37.633
> 
> 标签：android, ios, css, mobile, pixel-ratio

iOS 很简单，因为像素比总是 1 或 2，而目标 dpi 总是像素/比。然而，Android 使用 1.3、1.5，在某些情况下使用 2.25 作为像素比。我不知道有什么方法可以将目标 dpi 设置为 android 设备的像素/比率，这将是一个简单的解决方案，但我认为对于物理像素数是其倾角奇数倍的任何显示器来说，这是一个像素不完美的解决方案计数（那些 1.3、1.5 等）。

现在我基本上是为 each 编写 css `-webkit-min-device-pixel-ratio`，然后手动将我的`px`值乘以该比率（略微调整舍入）。使用`em`s 对字体和其他一些东西很有用，但`px`如果我不想要一半、空白或重叠像素，我必须使用 s 来定位和调整元素大小。

有一个更好的方法吗？

如果不是，那么处理背景图像的最佳方法是什么。我真的不想仅仅因为我正在更改每个比例的每个图标的每个背景位置，就必须重新编写每个背景`background-size`位置`device-pixel-ratio`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:53:40.687

You can try using the [viewport](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html) meta tag. It lets you match width to the device's width. It also allows you to set initial scaling, set bounds on scaling, or even disable scaling. And [here](https://stackoverflow.com/questions/10892463/meta-viewport-questions) is a link to a relevant Stack Overflow question and answer on using the meta viewport tag.

# javascript - 是否有针对 Javascript 的类似 SQL 的数据访问的实现？

> ID：14738229
> 
> 赞同：2
> 
> 时间：2013-02-06T20:31:39.977
> 
> 标签：javascript, sql, object

我希望用 Javascript 绘制对象中的一些数据，首先想到的是使用类似 SQL 的接口通过查询获取该对象上的组织数据。当我只是在寻找一种更简单的方法来访问 Javascript 对象中的信息时，我在网上搜索并发现除了[JS 中的整个 sqlite 实现。](https://github.com/kripken/sql.js)

由于这件事似乎不是一个很有趣的想法，我想知道你们中是否有人写过或听说过这样的库。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:40:45.020

也许是 YQL？

[http://developer.yahoo.com/yql/](http://developer.yahoo.com/yql/)

您可以定义不同的数据源。不过，我还没有尝试过使用“内存中”JavaScript 对象。

# ruby - Ruby 中的嵌套数组有限制吗

> ID：14738231
> 
> 赞同：2
> 
> 时间：2013-02-06T20:31:45.847
> 
> 标签：ruby, multidimensional-array

我正在试验 Ruby 中的数组。我无法访问最大嵌套数组计数。示例实验如下所示：

```
array = [[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]] 
```

那么，你知道 Ruby 中数组的维数限制吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T20:33:10.433

限制是当您耗尽内存时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:46:02.497

根据评论者@HunterMcMillen 的想法，您可以像这样测试它：

```
# Warning: be prepared for a sad computer!
depth=0; arr=[]; a=arr
begin
  while true do
    b = []
    a.push(b)
    a = b
    depth += 1
  end
rescue => e
  puts "OK: depth=#{depth}, error=#{e} (#{e.class})"
end 
```

大概在某些时候它会引发一些错误（例如内存不足），你会看到你可以嵌套多少个数组。

# jquery - 为什么 jQuery UI 使用嵌套的 css 类？

> ID：14738232
> 
> 赞同：3
> 
> 时间：2013-02-06T20:31:47.317
> 
> 标签：jquery, css, jquery-ui

为什么 jQuery UI 会这样写 CSS：

```
.ui-dialog .ui-dialog-titlebar-close {}
.ui-dialog .ui-dialog-content {} 
```

由于他们的类名是如此具有描述性，我认为如果他们这样做，它会更快并且不太可能发生任何冲突：

```
.ui-dialog-titlebar-close {}
.ui-dialog-content {} 
```

在我看来，它们不必要地嵌套类并导致浏览器做更多的工作，但我想知道是否有一个我不知道的充分理由。有谁知道他们为什么要嵌套这些类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:54:18.110

Most likely because the CSS for `.ui-dialog-titlebar-close` and `.ui-dialog-content` is reusable. So basically they are ensuring these classes will only inherit specific styles to the dialog when they are children of `.ui-dialog`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:02:44.087

他们这样做是为了具体。

具有类的元素`.ui-dialog-content`还有其他几个类，例如`.ui-widget-content`.

```
<div id="dialog" class="ui-dialog-content ui-widget-content"> 
```

为了确保规则`.ui-dialog-content`胜过他们添加的其他类的规则`.ui-dialog`。

当您检查元素时，这一点很明显。的背景和边框规则`.ui-widget-content`将被覆盖。

```
.ui-dialog .ui-dialog-content {
    background: none repeat scroll 0 0 transparent;
    border: 0 none;
    overflow: auto;
    padding: 0.5em 1em;
    position: relative;
}

.ui-widget-content {
    background: url("images/ui-bg_highlight-hard_100_f2f5f7_1x100.png") repeat-x scroll 50% top #F2F5F7; /* Overridden */
    border: 1px solid #DDDDDD; /*Overridden*/
    color: #362B36;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T21:49:56.680

您对[浅层，最好是一级选择器更可取](https://stackoverflow.com/a/11218699/1081234)这一事实是正确的- 至少从性能角度来看，至少在理论上是这样。然而，在大多数情况下，渲染引擎优化抵消了原本微不足道的性能开销。

这是样式表易于维护、可读性和大小开始发挥作用的时候。降低的特异性允许回收“部分”类 - 如果您[查看呈现的标记](http://jqueryui.com/dialog/)，`.ui-dialog`将会有一大堆其他类应用于它：

```
ui-dialog ui-widget ui-widget-content ui-corner-all ui-front ui-draggable ui-resizable 
```

将所有属性应用到*一个*规则中会更好吗？绝对不是从开发人员的角度来看，这种方法会使其成为维护的噩梦。想象一下，更改单个表示属性，然后必须将其回溯到您的示例中的所有“特定”规则！

限定 ansector 选择器（例如`.ui-dialog .ui-dialog-content`）的理由要简单得多，如果不是立即显而易见的话 - 以增加这些选择器的特异性。例如，`.ui-helper-reset`类基本上取消了任何先前设置的样式，因为该规则是在 css 文件的底部声明的：

```
.ui-helper-reset {
    border: 0 none;
    font-size: 100%;
    line-height: 1.3;
    list-style: none outside none;
    margin: 0;
    outline: 0 none;
    padding: 0;
    text-decoration: none;
} 
```

要覆盖任何这些属性，必须使用更高特异性的选择器。

我个人不喜欢这种模式 - 我希望代码一致性对这种类结构背后的推理做出更多贡献。

# javascript - 我可以在 iframe 内的 iframe 上使用 onclick scrollBy 事件吗

> ID：14738233
> 
> 赞同：0
> 
> 时间：2013-02-06T20:31:55.823
> 
> 标签：javascript, iframe

几天来我一直在尝试解决这个问题，这让我发疯了。我什至不确定这是否可能，所以任何帮助将不胜感激。我在这个很棒的网站上搜索了数百个答案，但找不到我要找的答案。

我正在尝试使用按钮在我的 html 页面上滚动 iframe 的内容。

基本上我有两个 iframe（名为 iframe1 和 iframe2），它们并排放置在我的 html 页面上。我在每个 iframe 下方有 2 个按钮。iframe1 是向上和向下滚动，因此按钮被命名为“向上和向下”，它们使用以下代码可以正常工作：

```
<input type="button" class="button" onclick="frame1.scrollBy(0,-200)"  value="Up" /> 
<input type="button" class="button" onclick="frame1.scrollBy(0, +200)"  value="Down" /> 
```

第二个 iframe (iframe2) 包含一个 html 页面（名为 card.html），其中还有 2 个 iframe（这是令人困惑的地方），这 2 个新 iframe 称为 iframe3 和 iframe4。我只想滚动 iframe4。

如何使它滚动，我尝试应用与 iframe1 相同的功能，但由于某种原因它不起作用。

IE

```
<input type="button" class="button" onclick="frame4.scrollBy(0,-200)"  value="Up" />
<input type="button" class="button" onclick="frame4.scrollBy(0,-200)"  value="Up" /> 
```

我想这与 iframe 位于另一个 iframe 内并且按钮位于主 html 页面上的事实有关。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:01:32.520

这只是一个（受过良好教育的）猜测，但请尝试`frame2.frame4.scrollBy(0,-200)`. 您需要先从另一个 iframe 内部获取 iframe，然后才能对其进行处理。

# c++ - 是否可以将 Windows 位图绘制到 cairo 表面？

> ID：14738245
> 
> 赞同：2
> 
> 时间：2013-02-06T20:32:35.137
> 
> 标签：c++, bitmap, draw, cairo

我在一个项目中工作，其中 Cairo 被选为 OpenSUSE Linux 环境中的图形库（在 Xlib 上运行）。我几乎没有使用图形库或图形文件格式的经验，我想知道是否可以将 Windows 位图图像绘制到 Cairo 表面？在开罗绘制 png 似乎相对简单，但我一直在四处寻找有关绘制位图的信息，但找不到任何东西。我拼凑了以下代码：

```
int height = 256;
int width = 256;
cairo_format_t format = CAIRO_FORMAT_RGB24;
int stride = cairo_format_stride_for_width (format, width);
unsigned char *bitmapData;
bitmapData = (unsigned char *)(malloc (stride * height));
std::ifstream myFile ("exampleBitmapImage.bmp", std::ios::in | std::ios::binary);
myFile.read ((char *)bitmapData, stride * height);

cairo_surface_t *imageSurface = cairo_image_surface_create_for_data (bitmapData, format, width, height, stride);
cairo_set_source_surface (cs, imageSurface, 0, 0);
cairo_paint (cs);
cairo_show_page (cs);
cairo_surface_destroy (imageSurface);

myFile.close(); 
```

奇怪的是，当我运行它时，它会以 1/64 的大小连续 8 次上下颠倒和向后显示图像，然后填写图像大小的剩余部分（图像的剩余 7/8 ) 与黑色。我怀疑它与文件格式有关，并且我正在错误地解析和提供二​​进制数据，并且对 Cairo 的设置不正确。任何人都可以就如何使其正常工作提供指导吗？对于我缺乏知识并希望更好地理解这个问题，我深表歉意，非常感谢任何帮助，谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:39:04.583

将步幅乘以 -1 应该翻转您的位图。查找 BMP 文件格式[http://en.wikipedia.org/wiki/BMP_file_format](http://en.wikipedia.org/wiki/BMP_file_format)并实现位图头解析器并正确设置编码。

现在猜测编码为 RGB24，而您让 Cairo 将位图标题解释为图像数据。

# javascript - Respond.js CDN/X-Domain 设置

> ID：14738247
> 
> 赞同：2
> 
> 时间：2013-02-06T20:32:37.167
> 
> 标签：javascript, internet-explorer-8, cross-domain, media-queries

我正在尝试让[respond.js](https://github.com/scottjehl/Respond)使用他们的 CDN/X-Domain 指令，但效果不佳。在 IE8 中仍然没有加载媒体查询。

我什至上传了示例`cross-domain`文件夹来测试和调整文件的路径

在我的`<head>`我有：

```
<link href="http://mywebsite.wpengine.netdna-cdn.com/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="http://mywebsite.com/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="http://mywebsite.com/respond.proxy.js"></script> 
```

*   我在上面的文件之前链接到 respond.js 本身
*   当 CDN 关闭时，媒体查询在 ie8 中工作
*   IE8没有输出错误
*   我使用 WPEngine 托管，他们已将 response-proxy.html 添加到 CDN 中。- 我已经仔细检查了这些文件，它们都存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-07T13:54:20.737

这就是我让它工作的方式，remote 指的是远程 URL，本地指的是本地资产。确保在调用 respond.js 之前链接到您的样式表。

```
<!--[if lt IE 9]>
  <script src='//remote/respond.min.js'></script>
  <link href="//remote/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
  <link href="/local/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
  <script src="/local/respond.proxy.js"></script>
<![endif]--> 
```

# mysql - Visual Basic 2010 - 在表单上显示对不同数据网格视图的多个 MySql 查询

> ID：14738250
> 
> 赞同：0
> 
> 时间：2013-02-06T20:32:54.923
> 
> 标签：mysql, vb.net

再会，

我正在开发一个使用 Visual Basic 2010 和 MySql 的项目。该项目的功能是进行体育计时服务。我对上述环境中的编程知识了解半，当我遇到困难时，我会用谷歌搜索答案，它在 99% 的时间里都能很好地为我服务。

我的问题是：我有一个包含每个体育赛事表格的数据库。所有数据都被捕获，所有功能都按预期工作。我现在想使用四个 GridView 在表单上显示这场比赛的结果（4 是允许的最大比赛距离）。这些结果需要针对每个比赛距离（最多 4 个）单独显示（使用不同的查询）。

我有显示结果的代码，但这会用相同的数据填充所有四个网格视图。这是我的代码：

```
Private Sub ListResults()

    Dim query As String = "SELECT RaceNo, FirstName, LastName, RaceDistance, RaceTime FROM " & frmMain.EventCode & _
            " WHERE NOT ISNULL(RaceTime) AND RaceDistance = '" & frmMain.RaceDistance1 & "' ORDER BY RaceDistance ASC, RaceTime ASC;"

    Dim connection As New MySqlConnection(frmMain.connStr)
    Dim da As New MySqlDataAdapter(query, connection)
    Dim ds As New DataSet

    Try
        If da.Fill(ds) Then
            dgvLoadResultsA.DataSource = ds.Tables(0)
            dgvLoadResultsB.DataSource = ds.Tables(0)
            dgvLoadResultsC.DataSource = ds.Tables(0)
            dgvLoadResultsD.DataSource = ds.Tables(0)

        End If
    Catch ex As Exception
        Console.WriteLine(ex.Message)
    Finally

        da = Nothing
        connection.Close()
        connection = Nothing
    End Try
End Sub 
```

我知道我需要生成四个不同的查询（我能够做到），但我不确定如何将这些查询的结果发送到不同的网格视图。我似乎并不完全理解如何将我的查询结果发送到数据集中的不同表。我可以通过使用不同的参数和变量运行子程序来创建代码，但我认为有更好的方法来做到这一点。

对此问题的任何帮助将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:38:21.807

您需要做的是为每个查询使用不同的 DataSet。

就我个人而言，我会将您的查询代码拆分为一个单独的函数，将事件和距离作为参数并返回您的数据表；

```
Private Function GetResults(ByVal EventCode As Integer, ByVal RaceDistance As Integer) As DataTable

    Dim query As String = "SELECT RaceNo, FirstName, LastName, 
                           RaceDistance, RaceTime 
                           FROM " & EventCode & _
                         " WHERE NOT ISNULL(RaceTime) 
                           AND RaceDistance = '" & RaceDistance & "' 
                           ORDER BY RaceDistance ASC, RaceTime ASC;"

    Dim connection As New MySqlConnection(frmMain.connStr)
    Dim da As New MySqlDataAdapter(query, connection)
    Dim ds As New DataSet

    Try
        If da.Fill(ds) Then
            Return ds.Tables(0)
        End If
    Catch ex As Exception
        Console.WriteLine(ex.Message)
    Finally

        da = Nothing
        connection.Close()
        connection = Nothing
    End Try
End Sub 
```

我在这里假设您的数据类型，您当然需要修改它以使用正确的数据类型。

然后你可以使用附加你的数据源；

```
dgvLoadResultsA.DataSource = GetResults(EventCodeA, RaceDistanceA)
dgvLoadResultsB.DataSource = GetResults(EventCodeB, RaceDistanceB)
dgvLoadResultsC.DataSource = GetResults(EventCodeC, RaceDistanceC)
dgvLoadResultsD.DataSource = GetResults(EventCodeD, RaceDistanceD) 
```

理想情况下，您还将连接字符串传递给 GetResults 函数，然后您的函数是可单元测试的，但我会将这个决定留给您。

当然，理想情况下，您应该在附加之前检查您的函数是否返回有效的 DataTable。但我不想使解决方案过于复杂！

# c++ - 即使我知道我将使用哪个泛型，转发声明模板类是否安全？

> ID：14738254
> 
> 赞同：2
> 
> 时间：2013-02-06T20:33:02.443
> 
> 标签：c++, qt, forward-declaration

这可以编译，但我想知道它是否不安全。

在我的标题中，我转发声明这一点

```
class QStringList;
template<> class QList<QStringList>;

class MyClass {
     ...
     static void somethin(const QList<QStringList> &thelist);
} 
```

然后在我的实现中我这样做

```
#include <QStringList>
#include <QList>
#include "MyClass.h"
void MyClass::somethin(const QList<QStringLisT> &thelist) { ... } 
```

无论“什么”，这都能保证安全吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:11:26.900

`somethin`声明为接受引用并定义为接受指针，因此不应编译（除非它是您在示例中删除的重载。

至于它的前向声明`QList`应该没问题，因为诸如 in 之类的指针和引用`somethin`只需要前向声明，但请注意，如果实际定义采用额外的模板参数（可能是默认的），那么您必须在前向声明中包含这些额外的参数。这就是为什么您永远不应该在标准库中转发声明类型和函数的原因之一，因为它们可能具有实现定义的附加参数（模板或其他），这些参数可能会发生冲突。

# java - Do-while 循环不起作用

> ID：14738255
> 
> 赞同：-1
> 
> 时间：2013-02-06T20:33:03.757
> 
> 标签：java, string, do-while

我的 while 循环有问题。程序询问用户他们的姓名，在用户输入后，程序会询问您想打印多少次输入。

我已经被困在我的 while 循环上很长一段时间了，只有当我做类似的事情时才能让它工作：`} while (antal > some random number)`

```
package uppg2;

import java.util.Scanner;

public class Uppg2 {

    public static void main(String[] args) {

        Scanner name = new Scanner(System.in);
        Scanner ant = new Scanner(System.in);
        int antal;
        String namn;
        System.out.print("Whats your name?: ");
        namn = name.nextLine();

        System.out.print("How many times u wanna print ur name?: ");
        antal = ant.nextInt();
        do {

            System.out.print(namn);

        } while (????);
        antal++;
        namn = null;
        antal = 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T20:36:33.070

我个人会像这样使用 for 循环：

```
for(int i = 0 ; i < antal; i++){
    System.out.println(namn);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T20:36:42.477

您可以倒计时`antal`( `antal--`) 直到它为 1。但不确定是否可以销毁其中的值`antal`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T20:39:58.553

就像其他人建议的那样，这将是 for 循环的用例。但是当你坚持使用 while 循环时：

```
int counter = 0; // a variable which counts how often the while loop has run

do {
    System.out.print( namn ); // do what you want to do
    counter++                 // increase the counter
} while (counter < antal)     // check if the desired number of iterations is reached 
```

当循环结束时不再需要的值`antal`时，您也可以不使用计数器变量，只需减少每个循环的 antal 并检查它是否已达到 0。

```
do {
    System.out.print( namn );
    antal--;
} while (antal > 0) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T20:36:54.077

```
package uppg2;

import java.util.Scanner;

public class Uppg2 {

public static void main(String[] args) {

    final Scanner in = new Scanner(System.in);
    int antal;
    String namn;
    System.out.print("Whats your name?: ");
    namn = in.nextLine();

    System.out.print("How many times u wanna print ur name?: ");
    antal = in.nextInt();
    int i = 0;
    while(i < antal){

            System.out.print( namn );
            i++;

    }
    in.close();
}
} 
```

告诉我这是否有效。基本上，您需要一个增量计数器来确保它只打印出所需的次数。由于我们从 0 开始计数，我们不需要确保它一直持续到它等于打印时间，但它仍然在它之下。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-06T20:40:54.903

您必须有一个在 do-while 循环内递增的计数器，并与该值进行比较

它会使你的循环循环类似于：

```
antal = ant.nextInt();
int i = 0;
do{ 

            System.out.print( namn );
            i++; 

    }while (i < antal); 
```

请注意，因为它是一个 do-while 循环，所以即使用户输入零，您也将始终至少打印一次名称。为防止这种情况，您需要使用 for 或 while 循环，如其他回答者所述，或在`System.out.println`调用周围使用 if 条件来检查 antal 是否为零。

另外，如果您不在乎最后是什么antal，则可以使用TofuBeer的解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-06T20:35:28.387

这是类似问题的解决方案。看看您是否无法将其转化为您的问题：

```
// How many times to I want to do something?
int max = 40;
for (int i = 0; i < max; i++) {
    // Do something!
} 
```

# iis - 带有“辅助”路径的 IIS 7.5 假 404 错误

> ID：14738261
> 
> 赞同：2
> 
> 时间：2013-02-06T20:33:42.883
> 
> 标签：iis, error-handling

任何人都知道如何防止这个 IIS7.5 /aux 路径问题（在 IIS8 上工作）。这不是真正的 404 错误！？！前[http://msdn.microsoft.com/aux](http://msdn.microsoft.com/aux)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T11:40:33.370

这是由于 IIS 中对 URL 的一些内置限制，这些限制不允许您使用在 Windows 文件系统中具有特殊含义的名称，这可以追溯到 CP/M 时代： [https://www .bitquabit.com/post/zombie-operating-systems-and-aspnet-mvc/](https://www.bitquabit.com/post/zombie-operating-systems-and-aspnet-mvc/)

如果您使用的是 ASP.NET 版本 4 或更高版本，则可以使用此设置`web.config`来禁用这些 URL 限制：

```
<configuration>
  <system.web>
    <httpRuntime relaxedUrlToFileSystemMapping="true"/>

    <!-- ... your other settings ... -->
  </system.web>
</configuration> 
```

如果您确定在任何地方（在 Web 服务器、框架或您自己的代码以及任何第三方依赖项中）执行的部分 URL 和文件系统路径之间没有直接映射，这应该是安全的。在现代 Web 应用程序中通常应该是这种情况，但不要相信我（或任何人）的话，除非他们有可靠的证据，我无法在此提供。

另请参阅：[http ://haacked.com/archive/2010/04/29/allowing-reserved-filenames-in-URLs.aspx](http://haacked.com/archive/2010/04/29/allowing-reserved-filenames-in-URLs.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-09T08:58:51.387

如果您正在处理这样的问题，这可能意味着您的应用程序在 URL 路径中使用了可能最初是用户输入的任意文本。这是在所谓的“REST”API 中使用的一种被误导的设计模式，目的是使 URL 变得“漂亮”。您可能还会遇到百分比编码、Unicode 字符、trans-BNP Unicode 字符（表情符号！）、Unicode 规范化、不区分大小写（以及土耳其语-i 和希腊语问题）以及无数尚未解决的问题被发现。

REST 不是关于漂亮的 URL，漂亮的 URL 不需要包含任意文本（除非你是 Wikipedia，否则你将很难做到正确）。提高您的谷歌排名的漂亮网址充其量是有争议的，如果不是神话的话。

以下是重新设计应用程序中 URL 的一些建议：

1.  使用唯一 ID 而不是名称。人类可读的名称永远不应用作标识符。
2.  如果您认为您必须用文本（除了唯一 ID）来装饰您的 URL，那么“清理”文本部分。例如，您可以删除 URL、空格等中的任何非 ASCII 字符和任何具有特殊含义的字符，并用破折号替换不允许的字符序列。当然，还要替换“禁止”的名称，例如`aux`. 但是，说真的，不要为这样的“美化”网址而烦恼。
3.  如果它对您的应用程序有意义，让用户指定 URL 片段，但使用验证来限制允许的 URL。然后，您可以强制片段是唯一的，并将其用作唯一 ID，而不仅仅是装饰。
4.  如果`aux`是 URL 的固定部分，只需将其替换为其他内容即可。
5.  对任意用户输入使用查询字符串或 POST 请求。当然，还要对其进行验证和清理。URL 路径中不应包含搜索字符串之类的内容。
6.  如果您不同意，或者您在这件事上别无选择，或者没有时间重新设计您的 API，请参阅[https://stackoverflow.com/a/14771755/2279059](https://stackoverflow.com/a/14771755/2279059)

# php - phpmysql 从列中仅选择月份

> ID：14738262
> 
> 赞同：0
> 
> 时间：2013-02-06T20:33:43.030
> 
> 标签：php, mysql, datetime

我在这个问题上遇到了麻烦，无法找到解决它的方法。任何帮助将不胜感激。

我有一个包含一系列列的表，其中一个名为 PostDate。它包含以下数组，我将其作为表格输出以便更好地查看。

```
PostDate
0000-00-00
2013-01-08 
2013-01-10 
2013-01-11 
2013-01-15 
2013-01-16 
2013-01-18 
2013-01-18 
2013-01-18 
2013-01-19 
2013-01-19 
2013-01-23 
2013-01-23 
2013-01-24 
2013-01-26 
2013-01-29 
2013-01-29 
2013-01-29 
2013-01-30 
2013-01-31 
2013-01-31 
2013-02-01 
2013-02-02 
2013-02-02 
```

代码是这样的。

```
$scorequerymonth=
   "SELECT PostDate 
    FROM tablename 
    WHERE AgentID=$agent 
    ORDER BY PostDate"; 

$scoreresultmonth=mysql_query($scorequerymonth, $scoreconnection) or die('Could not connect agent: ' . mysql_error());

$scoretotwos=mysql_num_rows($scoreresultmonth);
echo "<br>";
echo "scoretotwos: " . $scoretotwos;  
echo "<br>";

echo "<table border='1'><tr>";

for($i = 0; $i<mysql_num_fields($scoreresultmonth); $i++)
{
echo "<th>".mysql_field_name($scoreresultmonth, $i)."</th>";

}
echo "</tr>";

while($row = mysql_fetch_array($scoreresultmonth))
{

    echo "<tr>";
    for($i = 0; $i < mysql_num_fields($scoreresultmonth); $i++)
    {

        echo "<td>". $row[$i] ."</td>"; 

    }   
    echo "</tr>";

    }
echo "</table>";
echo "<br>"; 
```

我想要完成的是分开一月，二月等的行数......我已经尝试过这个查询，但我只得到这个月的 01、02。

```
$scorequerymonth=
    "SELECT DATE_FORMAT(PostDate, '%m') 
     FROM tablename 
     WHERE AgentID=$agent 
     ORDER BY PostDate"; 
```

我想知道的是，是否有人能告诉我如何找到或找出或找出 01 或 02 或其他月份以及存在的行数。

我基本上只需要那个给定月份的总行数。

任何帮助都会非常好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:45:04.817

你快到了。您需要添加一个`GROUP BY`子句，并返回一个聚合（例如`COUNT(1)`or `SUM(1)`）：

```
SELECT DATE_FORMAT(t.PostDate,'%m') AS post_month
     , COUNT(1) AS count_for_post_month
  FROM tablename t
 WHERE t.AgentID=$agent
 GROUP BY post_month 
```

* * *

请注意，通过从日期值中仅返回“01”、“02”，这会将多个年份合并到每个日期中。例如，“01”的“计数”将包含所有年份 1 月的匹配行计数，全部组合在一起：“2011-01”、“2012-01”、“2013-01”

通常的模式是包含年份，并获取特定日历月的计数：

```
SELECT DATE_FORMAT(t.PostDate,'%Y%m') AS post_yyyymm 
```

# here-api - “中心”事件回调中的 setCenter

> ID：14738263
> 
> 赞同：0
> 
> 时间：2013-02-06T20:33:45.007
> 
> 标签：here-api

我想将地图中心坐标保持在一定范围内。为此，我在相关回调函数中调用该`setCenter`方法：`"center"`

```
map.addObserver("center", function (obj, key, newValue, oldValue) {

  var limits = {minLat: 47.4136, minLon: 5.9845, maxLat: 54.8073, maxLon: 14.3671};

  if (newValue.latitude < limits.minLat || newValue.longitude < limits.minLon || 
      newValue.latitude > limits.maxLat || newValue.longitude > limits.maxLon) {

      var newLatLon = {latitude:  Math.max(Math.min(newValue.latitude, limits.maxLat), limits.minLat),
                       longitude: Math.max(Math.min(newValue.longitude, limits.maxLon), limits.minLon)};

      map.setCenter(nokia.maps.geo.Coordinate.fromObject(newLatLon));

      console.log(newValue);
      console.log(map.center);
  }
}); 
```

如果我将地图拖到限制之外，我会在控制台中看到`map.center`正在正确调整，但`newValue`坐标仍然超出限制。

我误解了 API 吗？

我正在使用[http://api.maps.nokia.com/2.2.3/jsl.js?with=all](http://api.maps.nokia.com/2.2.3/jsl.js?with=all)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:55:29.740

将观察者添加到属性，然后**在**观察者函数中更改该属性并不能保证适用于所有属性。我的理解是不支持重新设置中心以避免无限循环。在这种情况下，您最好使用[事件框架](http://developer.here.net/apiexplorer/examples/api-for-js/events/map-events-displayed.html)而不是观察者。

下面的代码将地图的中心限制在以德国为中心的矩形内。如果你拖动地图，它会停止死机，如果你轻弹地图，它会反弹回来。您需要获取自己的免费[应用程序 ID 和令牌](http://www.developer.nokia.com/Community/Wiki/How_to_Obtain_Your_Own_Nokia_appID_and_Token)才能使其正常工作。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=7; IE=EmulateIE9" />
        <title>Nokia Maps API Example: Restricted Area</title>
        <!-- KML support is required here. -->
        <script type="text/javascript" charset="UTF-8" src="http://api.maps.nokia.com/2.2.3/jsl.js"></script>

</head>

<style type="text/css">
            html {
                overflow:hidden;
            }

            body {
                margin: 0;
                padding: 0;
                overflow: hidden;
                width: 100%;
                height: 100%;
                position: absolute;
            }

            #mapContainer {
                width: 80%;
                height: 80%;
            }
        </style>
    </head>
    <body>      
        <div id="mapContainer"></div>
        <script type="text/javascript">
/////////////////////////////////////////////////////////////////////////////////////
// Don't forget to set your API credentials
//
// Replace with your appId and token which you can obtain when you 
// register on http://api.developer.nokia.com/ 
//
            nokia.Settings.set( "appId", "APP ID"); 
            nokia.Settings.set( "authenticationToken", "TOKEN");
//          
/////////////////////////////////////////////////////////////////////////////////////   
        </script>
        <div id="uiContainer"></div>
        <script>

var mapContainer = document.getElementById("mapContainer");
var map = new nokia.maps.map.Display(mapContainer, {
    center: [51, 7],
    zoomLevel: 6
    });

map.addComponent(new nokia.maps.map.component.Behavior());  
var dragger = map.getComponentById("panning.Drag");    

// Set of initial geo coordinates to create the purple polyline
var points = [
        new nokia.maps.geo.Coordinate(47.4136, 5.9845),
        new nokia.maps.geo.Coordinate(47.4136, 14.3671),
        new nokia.maps.geo.Coordinate(54.8073, 14.3671),
        new nokia.maps.geo.Coordinate(54.8073, 5.9845),
        new nokia.maps.geo.Coordinate(47.4136, 5.9845)
    ];

// Transparent purple polyline
map.objects.add(new nokia.maps.map.Polyline(
    points,
    {   
        pen: {
            strokeColor: "#22CA", 
            lineWidth: 5
        }
    }
)); 

var restrict = function(evt) {   

     var limits = {minLat: 47.4136, minLon: 5.9845, maxLat: 54.8073, maxLon: 14.3671};

  if (map.center.latitude < limits.minLat || map.center.longitude < limits.minLon || 
      map.center.latitude > limits.maxLat || map.center.longitude > limits.maxLon) {

      var latitude =  Math.max(Math.min(map.center.latitude, limits.maxLat), limits.minLat);
      var longitude = Math.max(Math.min(map.center.longitude, limits.maxLon), limits.minLon);    
      map.setCenter(new nokia.maps.geo.Coordinate(latitude,longitude));      
      evt.cancel();
  }
}

map.addListener("dragend", restrict);
map.addListener("drag", restrict);
map.addListener("mapviewchange", restrict);
map.addListener("mapviewchangeend", restrict);
map.addListener("mapviewchangestart", restrict);

 </script>
    </body>
</html> 
```

我在这里为五个事件添加了事件侦听器，分别是**dragend**、**drag**、**mapviewchange**、**mapviewchangeend**和**mapviewchangestart** - 根据您需要的效果，您可能不需要全部。该行 `evt.cancel();`停止处理事件。

# c# - 用户过滤结果的服务器端缓存策略

> ID：14738266
> 
> 赞同：4
> 
> 时间：2013-02-06T20:33:58.117
> 
> 标签：c#, asp.net, caching

我在[www.zipstory.com](http://www.zipstory.com)（测试版）有一个情况，我有来自同一个数据库的馈送的 n 排列。例如，某人可以获得他们感兴趣的任何城市的提要，并且这些城市中的许多城市都放在一起，因此它们都按最近或最多的投票排序。

当同时有数千个用户时，我应该如何为每个用户缓存东西而不完全用尽可用内存？

我唯一的猜测是不要。我可以提出一个客户端缓存策略，在其中对城市结果进行分类，但这样我仍然可以按城市缓存一刀切的策略。

你有什么建议？在这一点上，我处于陌生的境地，可以使用一个好的策略。我注意到这个网站没有这样做，但 Facebook 有。他们必须从缓存的用户提要池中提取并在客户端提取它们。不确定，我还不够聪明，无法弄清楚这一点。

换句话说...

每个城市都有自己的饲料。每个用户都有一个组合的城市订阅源的 n 排列。

我想看看使用 c# 和 ASP.NET 解决这个问题的可能方法

* * *

添加到 2013 年 2 月 28 日。这是我根据您的评论所做的，非常感谢！...

*   对于每个登录的用户，我都会缓存他们的首选城市列表
*   每个城市缓存前 10 个帖子结果并存储在基于 Linq 的对象中
*   当用户进来并有 x 个城市作为提要时，我会遍历他们的城市列表循环，然后检查城市帖子是否在缓存中，如果没有，我从数据库中获取，然后将单个帖子的 html 与其他排序元素一起填充到缓存中。
*   我将城市列表重新组合到一个供用户使用的提要中，并且由于我在 linq 对象上有一些排序元素，因此我可以按正确的顺序对它们进行排序并返回给用户

这确实意味着每次都会有一些 CPU 工作，因为我必须将城市列表合并到一个城市列表中，但这避免了每次都访问数据库，并且每个人都受益于更快的页面响应时间。主要缺点是因为我之前没有对城市进行单个查询 UNION，如果每个城市都没有缓存，这需要每个城市进行一个查询，但是如果每个城市都被单独检查是否缓存，那么每 10 个城市的 10 个查询只会在以下情况下发生该网站是一个死区。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:39:06.763

仅缓存您需要的每个用户的最少量不同信息。

例如，如果它适合内存，则缓存完整的提要集，并且每个用户只存储他们感兴趣的提要的 id。

当他们请求他们的提要时，只需将它们从内存中取出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T18:26:16.793

根据关键链点判断情况。

**如果内存不是问题**，请考虑缓存整个提要并从那里检索项目。为此，您可以使用分布式缓存解决方案。其中一些甚至是免费的。从 memcached 开始，[http://memcached.org/](http://memcached.org/)。人们将这种方法称为*Load Ahead*。

*如果您想使用具有过期和优先级的 asp.net 缓存，**有时内存*****是*****一个问题。**在这种情况下，当内存出现问题时，缓存可能随时消失。因此，您可以按需再次加载数据（称为*Load Through*) 影响带宽。在这种情况下，您的代码应该更聪明地相处。如果这是您的选择，请尝试尽可能少地缓存。例如缓存每个加载的项目，当用户请求提要时，检查是否所有项目都存在于缓存中。如果没有，您将不得不再次获取所有或丢失的。我过去做过类似的事情，但无法提供代码。关键点是：缓存实体，然后缓存带有实体引用 (ID) 的提要。因此，当请求特定提要时，您检查所有引用在缓存中是否仍然有效。顺便说一句，asp.net 为此类场景提供缓存依赖项，因此也请阅读相关内容 - 可能会有所帮助。*

 *在任何情况下，在实现数据访问层时都考虑到*装饰器*设计模式，这将允许您：1 - 推迟后期开发阶段的缓存问题，以及 2 - 根据事情的进展在上述两种方法之间切换。我会从更简单（更便宜）的内置解决方案开始，然后在真正需要时切换到分布式缓存解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T12:46:40.497

您是否考虑过缓存通用提要并标记它们。然后每个用户，您只需存储对该标签/关键字的引用。

另一种可能性是存储通用提要，然后在客户端进行过滤。这将增加您的带宽，但节省缓存成本。

如果您使用的是 HTML5，请使用本地存储来保存用户偏好。*

# java - Java 运行 Windows 命令行命令返回一个值

> ID：14738276
> 
> 赞同：0
> 
> 时间：2013-02-06T20:34:50.723
> 
> 标签：java, windows, command-line, processbuilder

我想从 java 运行 windows 命令行命令并将结果返回到 java。这可能吗？

例如，我想做以下

Object returnValue = runOnCommandLine("wmic cpu get LoadPercentage"); //在这种情况下，returnValue 是字符串形式的 cpu 负载百分比

编辑：我能够得到这个工作

```
InputStream inputStream = new ProcessBuilder("wmic", "cpu", "get", "status").start().getInputStream();
StringWriter writer = new StringWriter();
IOUtils.copy(inputStream, writer);
String theString = writer.toString();
System.out.println("My string: " + theString); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:57:52.907

您需要的数据是 commandOutput。

```
 String cmd = "wmic cpu get LoadPercentage";
    ProcessBuilder pb = new ProcessBuilder(cmd);
    pb.redirectErrorStream(true);
    Process p = pb.start();
    BufferedReader stdin = new BufferedReader(
                          new InputStreamReader(p.getInputStream()));
    StringBuilder commandOutput = new StringBuilder();
    String line;
    while ((line = stdin.readLine()) != null) {
      commandOutput.append(line);
    }
    int exitValue = -1;
    try {
     exitValue = p.waitFor();
    } catch (InterruptedException e) {
    // do something here   
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:06:16.637

您可以执行以下操作：

```
 Process proc = Runtime.getRuntime().exec("net start");          
        InputStreamReader isr = new InputStreamReader(proc.getInputStream());
        BufferedReader br = new BufferedReader(isr);

        String temp = null;
        while (( temp = br.readLine() ) != null)
               System.out.println(temp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T20:36:55.283

看看 ProcessBuilder。

使用低于 Java 1.5 `Runtime.getRuntime().exec(...)`。

# jquery - Jquery 滑块在第一次加载时显示错误

> ID：14738277
> 
> 赞同：0
> 
> 时间：2013-02-06T20:34:58.077
> 
> 标签：jquery, html, css, slider

我的 jquery 幻灯片出现了一个奇怪的问题。一切似乎都工作正常，我没有收到任何错误，但幻灯片在您第一次访问该页面时没有正确加载。刷新页面后，虽然一切都显示得很好。

这种方式让我难过。我想也许我是在叫事情不正常，但我所做的只是在我的页脚中调用我的 jquery

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.0.js"></script>
<script type="text/javascript" src="<?=base_url();?>inc/js/jquery.carouFredSel-6.2.0.js"></script>
<script type="text/javascript" src="<?=base_url();?>inc/js/main.js"> 
```

我所做的主要是初始化滑块。

这是我正在开发的实时网站。如果您第一次去那里，您可以在第一次访问时看到它的外观，因为老实说，我不知道如何准确地描述它在做什么。[http://catlyndesigns.net/home/artwork](http://catlyndesigns.net/home/artwork)

谢谢你的帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:25:15.820

我想到了！我没有为图像分配高度和宽度，因此滑块无法确定放置所有内容的位置。随着高度和宽度的增加，一切正常！谢谢大家的帮助！

# ajax - 使用dojo的跨域请求

> ID：14738278
> 
> 赞同：0
> 
> 时间：2013-02-06T20:35:00.683
> 
> 标签：ajax, dojo, cross-domain

我正在尝试使用 dojo 进行跨域请求。外部 url 是 MIME 类型 text/html 页面上唯一的内容是 1236 之类的东西。我试过了

```
dojo.require("dojo.io.script");
    dojo.ready(function() {
      dojo.io.script.get({
          url: "theexternalurl",
          callbackParamName: "jsoncallback",
          load: function(data) {
              console.log(data);
          }
     });
});, 
```

但这并不好。关于如何使用 dojo 完成此操作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:49:10.297

我怀疑您在这里遇到了浏览器安全问题。跨域请求仅在使用 iframe 或注入脚本（如您所做的那样）并且该脚本的内容有效时才有效*"text/javascript"*。

如果您尝试将*“text/html”*加载到脚本中，它将无法工作，因为它不是有效的脚本。这是我们大多数人在某个时候尝试过的事情。我花了几个小时试图绕过跨域限制，并发现阻止它的安全性是可靠的。

有关更多详细信息，请参阅我的[答案](https://stackoverflow.com/questions/13283905/retrieving-xml-data-from-a-rest-service-across-domains-with-dojo/13291431#13291431)。

如果您要做的只是将内容加载到页面上，那么您可以使用**<iframe>**。但是，如果您尝试以某种方式解析加载的内容，恐怕这是一个死胡同。可能不是您希望的答案，但它会为您节省数小时的挫败感。

# node.js - NODE.JS 连接测试速度慢

> ID：14738279
> 
> 赞同：0
> 
> 时间：2013-02-06T20:35:02.320
> 
> 标签：node.js, asynchronous

我正在尝试使用**NODE.JS**测试服务器的可用性，例如服务器监控。**我创建了包含5000 个域**的测试 CSV 文件，并使用了以下代码：

```
var net = require('net');

function Daemon(address,name, port) {
  this.address = address;
  this.name = name;
  this.port = port;
}

var fs = require('fs');
var array = fs.readFileSync('domains.csv').toString().split("\n");
for(i in array) {
    console.log(array[i]);
    daemons.push(new Daemon(array[i],'http', 80));
}

// loop through each daemon in the array
daemons.forEach(function(d) {

  // create the TCP stream to the server
  var stream = net.createConnection(d.port, d.address);
    console.log('[' + d.address + ']\t connected');

  // listen for connection
  stream.on('connect', function(){

    // connection success
    //console.log('[' + d.name + ']\t connected');

    stream.end(); // close the stream
  });

  // listen for any errors
  stream.on('error', function(error){
    console.log('[' + d.name + ']\t error: ' + error);

    stream.destroy(); // close the stream

  });
}); 
```

特定域有很多超时：

```
[http]   error: Error: getaddrinfo ENOTFOUND
[http]   error: Error: connect ETIMEDOUT
[http]   error: Error: getaddrinfo ENOTFOUND
[http]   error: Error: getaddrinfo ENOTFOUND
[http]   error: Error: connect ETIMEDOUT
[http]   error: Error: getaddrinfo ENOTFOUND
[http]   error: Error: getaddrinfo ENOTFOUND
[http]   error: Error: getaddrinfo ENOTFOUND
[http]   error: Error: getaddrinfo ENOTFOUND
[http]   error: Error: getaddrinfo ENOTFOUND
[http]   error: Error: getaddrinfo ENOTFOUND
[http]   error: Error: getaddrinfo ENOTFOUND
[http]   error: Error: getaddrinfo ENOTFOUND
[http]   error: Error: getaddrinfo ENOTFOUND
[http]   error: Error: getaddrinfo ENOTFOUND
[http]   error: Error: getaddrinfo ENOTFOUND
[http]   error: Error: getaddrinfo ENOTFOUND
[http]   error: Error: getaddrinfo ENOTFOUND
[http]   error: Error: getaddrinfo ENOTFOUND
[http]   error: Error: connect ETIMEDOUT
[http]   error: Error: getaddrinfo ENOTFOUND
[http]   error: Error: connect ETIMEDOUT
[http]   error: Error: connect ETIMEDOUT
[http]   error: Error: connect ETIMEDOUT
[http]   error: Error: connect ETIMEDOUT
[http]   error: Error: read ETIMEDOUT
[http]   error: Error: connect ETIMEDOUT
[http]   error: Error: read ETIMEDOUT
[http]   error: Error: connect ETIMEDOUT
[http]   error: Error: read ETIMEDOUT
[http]   error: Error: connect ETIMEDOUT 
```

但是这段代码很慢。完成它需要将近 30 分钟。如何加快此代码（异步连接）？

我需要脚本能够**在每 5 分钟内测试 100.000 个域**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:37:30.240

我的猜测是，在某一时刻，打开 5000 个出站 TCP 连接对您的系统不利。您应该将并发连接尝试限制在合理的数量。

我建议你使用并发 100 或 200 的[async.queue 。](https://github.com/caolan/async#queueworker-concurrency)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:38:29.777

net.createConnection 是非阻塞的，所以你已经有了异步连接。

我用 500 ips 尝试了你的代码，接受或拒绝连接的时间不到 10 秒，只有 TIMEOUT 的连接需要更长的时间（30-40 秒）

如果您想做更多异步，请使用异步模块 ^^ 您的循环将如下所示：

```
async.forEach(
    daemons, 
    function(daemon) {
       //Your connect stuff
    },
    function(err){}
); 
```

# jquery - jQuery 在 .load() 之后多次调用我的 live("keydown") 事件

> ID：14738281
> 
> 赞同：3
> 
> 时间：2013-02-06T20:35:25.557
> 
> 标签：jquery, keydown

我有以下 jQuery 事件：

```
$("#scanItem").live("keydown", function (e) {
    if (e.keyCode == 13) {
        e.preventDefault();
        alert('hi');
    }
}); 
```

scanItem 是我页面中的一个文本框。

第一次加载页面时，一切正常。按下回车键会触发该事件 1 次。但是，我有一个下拉列表，它将执行 jQuery 加载以重新加载 div。

div 重新加载后，当我在文本框上按 enter 时，警报会触发 3 次。

我已经为此绞尽脑汁好几个小时了。任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T20:47:23.103

```
 $("#scanItem").unbind().on("keydown", function (e) {
    if (e.keyCode == 13) {
        e.preventDefault();
        alert('hi');
    }
}); 

```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T20:43:50.783

如果脚本被重新加载，那么您每次都在添加事件处理程序。

如果您无法将脚本移出 div，一个简单的解决方案是将其更改为不使用`live`：

```
$("#scanItem").on('keydown', function (e) { 
```

要使其工作，您必须确保代码位于`#scanItem`元素之后。

所以这不会触及具有相同 id 的未来元素。

顺便说一句，正如`live`已弃用并且现在已从新版本中删除的那样，您确实应该`on`直接使用（如此处）或通过委托（这使其在功能上等同于`live`）。

# java - 跟踪动态导航

> ID：14738288
> 
> 赞同：0
> 
> 时间：2013-02-06T20:35:52.430
> 
> 标签：java, algorithm, data-structures

我有一个由较小的瓷砖/块组成的网格（4x6）。当有人在网格中移动时，我需要准确跟踪他们移动到的位置。所以，如果我给瓷砖编号

```
 1- 2- 3- 4- 5- 6
 7- 8- 9-10-11-12
13-14-15-16-17-18 
```

现在，如果我在 10 岁，我可以移动到 4、9、11、0r 16。

我应该如何跟踪这个？我可以使用什么数据结构来存储这些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:44:37.813

3 选项。

OOP 的做法：

创建一个网格类，其中包含一个 2D 数组。它可用于创建方法，例如`surrounding(int x, int y)`返回周围的瓷砖。

二维数组。

像 OOP 方式，但有点混乱。您将从 (x-1, y), (x + 1, y), (x, y + 1), (x, y - 1) 获得周围的瓷砖。

一维数组。

就像你在你的例子中一样。这可能更难使用，我不推荐它。如果您确实想使用这种方式，则可能必须为网格的“宽度”设置另一个 int 变量。在提供的示例中，它是 6，因此周围的瓷砖将是：

(i - 6), (i - 1), (i + 1), (i + 6)。

我强烈推荐二维数组或网格选项。我更喜欢的 Grid 非常好，如果你想让事情尽可能花哨的话。

# github - Github 顶级项目页面

> ID：14738289
> 
> 赞同：3
> 
> 时间：2013-02-06T20:35:52.910
> 
> 标签：github

是否可以将项目页面发布到[http://username.github.com/](http://username.github.com/)而不是[http://username.github.com/projectname](http://username.github.com/projectname)？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T20:38:11.547

Create a repository called username.github.com and it will automatically be used as your top-level page.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T08:40:56.210

请注意，自 2013 年 4 月以来（“[新 GitHub 页面域：github.io](https://github.com/blog/1452-new-github-pages-domain-github-io) ”）：

*   用户页面存储库现在可以使用新的命名**`username/username.github.io`**
*   名为 username/username.github.com 的现有用户页面存储库不需要重命名，将继续无限期发布。
*   如果 username.github.io 和 username.github.com 存储库都存在，则 username.github.io 版本获胜。

所以解决方案仍然有效，但请注意：

> 如果您的 Pages 网站以前是从某个`username.github.com`域提供的，那么所有流量都将**无限期地****重定向到新`username.github.io`**位置，因此您无需更改任何链接。
> 例如，newmerator.github.com 现在重定向到 newmerator.github.io。

# php - 如何在 PHP 中删除超过 3 天的远程 FTP 文件夹

> ID：14738291
> 
> 赞同：-1
> 
> 时间：2013-02-06T20:36:09.107
> 
> 标签：php, ftp

我需要删除 ftp 存储中超过 3 天的文件夹。我的意思是创建日期，而不是修改日期。我应该只通过 PHP FTP 命令来完成。这是我的代码无法正常工作：

```
$skip = array('.', '..', '.ftpquota', '.htaccess');
$expire_date = date('Y-m-d', strtotime('-3 days', time()));
$ff_list = ftp_nlist($con, $db_dir);
foreach($ff_list as $item)
{
    if(in_array($item, $skip))
    {
        continue;
    }
    $mod_time = ftp_mdtm($con, $item);
    if(strtotime($expire_date ) >= $mod_time)
    {
        ftp_rmdir($con, $item);
    }
} 
```

请让我知道如何使它正常...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-29T14:17:13.937

最简单的方法是使用 DirectoryIterator

```
<?php
if (file_exists($folderName)) {
    foreach (new DirectoryIterator($folderName) as $fileInfo) {
        if ($fileInfo->isDot()) {
        continue;
        }
        if ($fileInfo->isFile() && time() - $fileInfo->getCTime() >= 3*24*60*60) {
            unlink($fileInfo->getRealPath());
        }
    }
}
?> 
```

# c# - C# 互操作 Excel 格式，如 Excel 的格式为表格

> ID：14738292
> 
> 赞同：8
> 
> 时间：2013-02-06T20:36:18.613
> 
> 标签：c#, formatting, excel-interop

我正在将一个`SQLite`表`Excel`从`C#`. 它工作正常。我正在使用该`Excel.Range.set_Value()`方法。

如何格式化`Excel.Range`类似`Excel's`的格式（如表格）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T21:00:23.393

扩展我的评论并添加到 D Stanley。

```
Range range = ws.get_Range("A1:D5");
wrksheet.ListObjects.AddEx(XlListObjectSourceType.xlSrcRange, range, missing, Microsoft.Office.Interop.Excel.XlYesNoGuess.xlNo, missing).Name = "MyTableStyle";
wrksheet.ListObjects.get_Item("MyTableStyle").TableStyle = "TableStyleMedium1"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-03T23:09:49.400

此示例选择活动工作表中每个单元格的矩形范围。此外，它使用 Range 的索引参数来获取范围点。此外，AddEx()（以及 Interop.Excel 中的大多数方法）使用默认参数，因此您不必使用 System.Reflection.Missing。

```
// define points for selecting a range
// point 1 is the top, leftmost cell
Excel.Range oRng1 = oSheet.Range["A1"];
// point two is the bottom, rightmost cell
Excel.Range oRng2 = oSheet.Range["A1"].End[Excel.XlDirection.xlToRight]
    .End[Excel.XlDirection.xlDown];

// define the actual range we want to select
oRng = oSheet.Range[oRng1, oRng2];
oRng.Select(); // and select it

// add the range to a formatted table
oRng.Worksheet.ListObjects.AddEx(
    SourceType: Excel.XlListObjectSourceType.xlSrcRange,
    Source: oRng,
    XlListObjectHasHeaders: Excel.XlYesNoGuess.xlYes); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-06T20:55:02.563

Here's the VBA that does it:

```
ActiveSheet.ListObjects.Add xlSrcRange, Range("$J$10:$N$12"), , xlYes 
```

Shouldn't be too hard to translate into an automation call. You can [read the documentation](http://msdn.microsoft.com/en-us/library/office/microsoft.office.interop.excel.listobjects.add%28v=office.14%29.aspx) as well.

# ruby-on-rails - 遍历rails目录中的文件，对文件名做些什么？

> ID：14738293
> 
> 赞同：1
> 
> 时间：2013-02-06T20:36:20.950
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

在我的 rails 项目结构中，我在路径 db/pages 下创建了一个文件夹 pages 。我想遍历这个 db/pages 目录中的所有 html.erb 文件和**DoSomething**以及每个文件的文件名。所有这一切都应该在我运行 rake db:seed 时发生，所以我将代码放在了seeds.rb

以下是我尝试的代码：

```
source_path = "/db/pages"

Dir.glob("#{source_path}/*.html.erb").each do |html_page|
  DoSomething html_page
end 
```

当我运行 rake db:seed 时，这似乎什么也没做。我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T20:37:33.453

尝试在 Rails.root 之前添加：

```
Dir.glob("#{Rails.root}#{source_path}/*.html.erb").each do |html_page| 
```

更正确的方法是：

```
source_path = Rails.root.join('db', 'pages')

Dir.glob("#{source_path}/*.html.erb").each do |html_page| 
```

# c - 使用文件类型参数在 System Verilog 中导入 C 函数

> ID：14738297
> 
> 赞同：0
> 
> 时间：2013-02-06T20:36:25.193
> 
> 标签：c, system-verilog, object-test-bench

我正在尝试将 C 函数导入 System verilog 测试台。C 函数的代码如下所示。我想将文件作为参数传递。该函数基本上从一个文件读取并写入另一个文件。

```
 int readmem(int z, FILE *file1, FILE *file2) {
        char data;
        int x;
        int i;
        for(i = 0; i<z;i ++) {
        data = fgetc(file1);
        x = data;
        fputc(x,file2);
        }
        return 0;
    } 
```

请告诉我如何在系统 verilog 测试台中调用此函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:25:36.977

您不能通过 DPI 在 SystemVerilog 和 C 之间传递文件描述符，所以我认为不可能直接按原样导入函数。

如果您真正需要做的只是获得 SystemVerilog 中的功能，那么将其移植到 SystemVerilog 会比尝试通过 DPI 导入它更容易。

像这样的东西应该可以工作（未经测试！）：

```
function int readmem(int z, int file1, int file2);
  reg[8:0] data;
  for (int i = 0; i < z; i++) begin
    data = $fgetc(file1);    // Really should break out of the loop if data == EOF ('h1FF)
    $fwrite(file2, "%c", data[7:0]);
  end
  return 0;
endfunction 
```

然后从其他地方：

```
int file1 = $fopen("input_file", "r");
int file2 = $fopen("output_file", "w");

readmem(10, file1, file2) 
```

声明为 9 位的原因`data`是为了在到达文件末尾时捕获 EOF。`file1`由于您没有检查 EOF，因此您的原始函数可能会运行结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T18:48:18.910

SystemVerilog 包括 DPI（直接编程接口），它可以让您的 SystemVerilog 调用 C 函数，甚至可以让您的 C 调用 SystemVerilog 任务/函数。查看 IEEE std 1800-2009 第 35 节和附录 H 和 I。数据类型存在限制，因此请查看基本 SV/C 类型映射的附录 H.7.4。

要在 SystemVerilog 中调用 C 函数，只需将其导入所需的范围（例如模块或包）

```
import "DPI-C" context function C_function_name(/* args */); 
```

从 C 调用 SystemVerilog 需要一个额外的步骤。

在 SV 中：

```
export "DPI-C" function SV_function_name; /*no args */ 
```

在 C 中：

```
extern return_type SV_function_name( /* args */); 
```

根据您的模拟器，您可能需要先编译 C 代码并引用目标文件，或者仅将源文件包含在文件列表中。您需要向模拟器添加选项，因此请查看手册。

以下是一些可以帮助您入门的资源：

*   [http://en.wikipedia.org/wiki/SystemVerilog_DPI](http://en.wikipedia.org/wiki/SystemVerilog_DPI)
*   [http://www.doulos.com/knowhow/sysverilog/tutorial/dpi/](http://www.doulos.com/knowhow/sysverilog/tutorial/dpi/)
*   [http://www.asic-world.com/examples/systemverilog/dpi.html](http://www.asic-world.com/examples/systemverilog/dpi.html)

* * *

修订：使用翻译包装器，因为 FILE 不会跨 DPI 进行翻译。C`const char*`映射到 SystemVerilog 的`string`.

C：

```
#include <stdlib.h>
#include <stdio.h>
// include for DPI
#include "svdpi.h"
// wrapper
int C2SV_readmem(int z, const char *filename1, const char *filename2) {
    FILE *file1;
    FILE *file2;
    int rtn;
    file1 = fopen(filename1, "r");
    file2 = fopen(filename2, "w");
    if (file1 == NULL) {
        printf("failed to open '%s' for read\n", filename1);
        return 1;
    }
    if (file2 == NULL) {
        printf("failed to open '%s' for write\n", filename2);
        return 1;
    }
    return readmem(z, file1, file2); // call original readmem function
}
/* ... */ 
```

SystemVerilog：

```
module test;
  import "DPI-C" context function int C2SV_readmem(input int z, input string filename1, input string filename2);
int value;
initial begin
  value = C2SV_readmem( 25, "FileIn.txt", "FileOut.txt");
end
endmodule 
```

# xslt - 如何在 xslt 中使用表达式 < 或 < 过滤 xml 文件？

> ID：14738299
> 
> 赞同：0
> 
> 时间：2013-02-06T20:36:31.447
> 
> 标签：xslt

嗨，我正在尝试显示一些符合特定条件的东西。在我的 xml 文件中，我有一堆“供应商”

```
<Suppliers>
 <ASupplier>
  <SupplierId> 12 </SupplierId>
  <SupplierName> Amazon </SupplierName>
  <Email> Something@live.com </Email>
  <StartDate> 01</11</2010 </StartDate>
  <ContractLength> 6 </ContractLength>
  <AnnualTurnover> 1233.32 </AnnualTurnover>
 </ASupplier>
</Suppliers> 
```

这是我的 xslt 文件中的代码

```
<xsl:if test="$SearchType = 'Length'">
 <xsl:for-each select="ASupplier[$SupplierFilter >= ContractLength]">
  <tr>
   <td>
    <xsl:value-of select="../SupplierName"/>
   </td>
  </tr>
 </xsl:for-each>
</xsl:if> 
```

'SearchType' 是一个参数。我遇到的问题是我取回了空数据而不是里面有名字的表。它返回正确的数字，但没有任何数据，即我有 3 个合同长度为 6 或更少的供应商，如果我输入 6 并搜索它会返回 3 个表格单元格但没有任何数据。有什么想法吗。ps 我有函数开始并包含使用类似代码并且工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:55:19.807

您显示的输入丢失了它的 XML 标记，因此很难看到 xslt 的作用（我会把它们放回去）。

那说我猜

```
<xsl:value-of select="../SupplierName"/> 
```

应该

```
<xsl:value-of select="SupplierName"/> 
```

如果`SupplierName`是一个孩子`ASupplier`

# powershell - 在远程 VM 上运行 power shell

> ID：14738309
> 
> 赞同：0
> 
> 时间：2013-02-06T20:37:05.237
> 
> 标签：powershell, remote-server

假设我有一台安装了 Windows Server 2008 的虚拟机 VM1。所以它可能安装了 PowerShell 2.0，但如果需要解决这个问题，我可以安装 PowerShell 3.0 版。现在说我的机器是带有 SP 1 的 Windows 7 64 位，我想在我的机器上执行一个 PowerShell 脚本，该脚本在 VM1 上打开 PowerShell（而不是真正打开窗口）并在该 VM1 的 PowerShell 上执行一些命令。而且我确实拥有该 VM1 和我的机器（两者）的管理登录凭据。

怎样才能实现这样的目标？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T20:41:45.927

它在版本 2 和版本 3 上的工作方式相同，但您必须[启用 PSRemoting](http://technet.microsoft.com/en-us/library/hh849694.aspx)。完成后，您可以使用[`Enter-PSSession`](http://technet.microsoft.com/en-us/library/hh849707.aspx)交互方式访问远程系统（类似于 SSH 进入 Linux 机器）或[`Invoke-Command`](http://technet.microsoft.com/en-us/library/hh849719.aspx)远程执行单个命令或脚本块。

# java - 如何在 Guice 中传递构造函数参数

> ID：14738312
> 
> 赞同：1
> 
> 时间：2013-02-06T20:37:08.747
> 
> 标签：java, guice

我有一个摇摆班：

```
public class PopUpContextMenu extends JPopupMenu {
    public PopUpContextMenu() {
        super();

        JMenuItem loginMenuItem = new LoginMenuItem("Login");
        JMenuItem logoutMenuItem = new LogoutMenuItem("Logout");
        add(loginMenuItem);
        add(logoutMenuItem);
    }
} 
```

我想将其更改为使用 Guice，以便可以删除两个“新”语句。我想要类似的东西：

```
public class PopUpContextMenu extends JPopupMenu {
    @Inject
    public PopUpContextMenu(JMenuItem loginMenuItem, JMenuItem logoutMenuItem) {
        super();
        add(loginMenuItem);
        add(logoutMenuItem);
    }
} 
```

我的问题是如何在 Guice 中配置绑定，以便在构造 loginMenuItem 时传递字符串“Login”并在构造 logoutMenuItem 时传递字符串“Logout”？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:50:20.733

您可以`@Named`为此使用注释：

在你的课堂上：

```
@Inject
@Named("LOGIN")
JMenuItem loginMenuItem;

@Inject
@Named("LOGOUT")
JMenuItem logoutMenuItem 
```

那么在你的 Guice 模块 configure() 方法中你可以：

```
bind(JMenuItem.class).annotatedWith(Names.named("LOGIN")).toInstance(new LoginMenuItem("Login"));
bind(JMenuItem.class).annotatedWith(Names.named("LOGOUT")).toInstance(new LoginMenuItem("Logout")); 
```

# linq-to-excel - LinqToExcel 空白行

> ID：14738313
> 
> 赞同：3
> 
> 时间：2013-02-06T20:37:16.697
> 
> 标签：linq-to-excel

我正在使用 LinqToExcel 轻松地将 Excel 数据导入 SQL Server。

```
 var fileName = ConfigurationManager.AppSettings["ExcelFileLocation"];
        var excel = new ExcelQueryFactory(fileName);
        var employees = excel.Worksheet<Employee>().ToList(); 
```

一切都很好，只有 1 个问题，字段完全映射到数据库表字段，并且在数据库中它们不是 NULL。

![输入excel文件](../Images/bd0b3dd03ff232e0dac663060d79798b.png)

话虽如此，如果你看这个 Excel 文件的截图，第 3 行下面的一些行实际上不是空的。没有空格，但不知何故 LinqToExcel 也会读取它们，当然我得到 EntityFramework 抛出的异常，说该字段不能为空。

我需要选择 3 到 8980 以下的所有空白行，然后删除它们。只有这样我才能使用 LinqToExcel 而不是尝试导入空白行。

知道如何解决问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T22:43:33.560

您可以向 LINQ 语句添加条件，以便不包括空行。

```
var employees = excel.Worksheet<Employee>().Where(x => x.VS2012 != null).ToList(); 
```

如果检查 not null 不起作用，那么您可以检查空字符串

```
var employees = excel.Worksheet<Employee>().Where(x => x.VS2012 != "").ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-06T12:09:11.687

> *但不知何故 LinqToExcel 也会读取它们*

这是 Excel 的一个怪癖。它会记住当工作表处于最大尺寸时使用了多少行和多少列。您可以通过键入 Ctrl-End 来查看。这将选择曾经使用过的最后一行和最后一列中的单元格。

Office 支持描述如何重置最后一个单元格：[找到并重置工作表上的最后一个单元格](https://support.office.com/en-us/article/Locate-and-reset-the-last-cell-on-a-worksheet-c9e468a8-0fc3-4f69-8038-b3c1d86e99e9)

基本上，您删除多余的行和列，清除格式，保存工作簿并重新打开它。

如果您有等待导入的 Excel 文件并且没有时间部署固定的 Linq2Excel 客户端，则此解决方法可能很有用。

# c - 套接字繁忙导致 poll() 延迟

> ID：14738318
> 
> 赞同：0
> 
> 时间：2013-02-06T20:37:32.600
> 
> 标签：c, sockets, tcp, network-programming

我正在使用 TCP 套接字从客户端发送数据。数据是提前准备好的，所以我总是有更多的数据要发送。此外，我不能更改写入的大小，否则服务器会抱怨。我执行以下操作：

```
while (1) {
    poll(for POLLOUT condition);
    write(to TCP socket);
    if (no more data)
        break;
} 
```

问题是 POLL 需要很长时间。我认为这是套接字实际被写入（或响应）的时间。无论如何，我可以减少在民意调查中花费的时间吗？这是目前的一个主要瓶颈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:23:39.887

`Poll``POLLOUT`当有足够的缓冲区空间将更多数据排入队列时，将引发一个事件。（看这个链接 - [Man (7) socket](http://www.kernel.org/doc/man-pages/online/pages/man7/socket.7.html)）

如果没有，则意味着写入缓冲区已满，这意味着您的写入速度比其他对等方的读取能力要快。或者只是网络比您预期的要慢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T01:11:15.720

> 套接字繁忙导致 poll() 延迟

当然可以。这`poll()`就是为了。延迟直到套接字变得可读或可写。

你的作者比你的读者快。在阅读端寻找解决方案。您的写作端表现正确。

但是，每次在该循环的开头调用它是没有意义的。仅当您需要知道套接字已*变为*可写时才调用它。它通常一直是可写的，除非您的套接字发送缓冲区已满，因此每次调用它都是浪费时间。

继续写，直到你得到`EAGAIN/EWOULDBLOCK.` *Then* is the time to call `poll()`，告诉你套接字发送缓冲区何时有空间。然后像以前一样重新开始写作。

# objective-c - CERoundProgressView 设置最大值小于 1.0

> ID：14738323
> 
> 赞同：1
> 
> 时间：2013-02-06T20:38:06.380
> 
> 标签：objective-c, ios6

有没有办法将对象的最大值设置`CERoundProgressView`为小于 1.0 - 比如 0.5？

参考：[CERoundProgressView](https://github.com/Ceroce/CERoundProgressView)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:49:35.483

您总是可以继承 CERoundProgressView，为最大值和最小值添加属性。

```
@property (nonatomic, weak) float max;
@property (nonatomic, weak) float min; 
```

将最大值设置为 0.5，如果需要，将最小值设置为 0.1

`setProgress:(float)progress animated:(BOOL)animated;`然后，用这样的东西覆盖：

```
- (void) setProgress:(float)progress animated:(BOOL)animated {
    float value = ((progress - self.min) / (self.max - self.min) ) * (1.0 - 0.0);
    [super setProgress:value animated:animated];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:45:59.157

似乎没有属性可以改变进度的范围。但是，由于这个项目是开源的，您可以轻松地调整类以使用简单的线性插值。

# excel - Office 2013 Excel .PutInClipboard is Different?

> ID：14738330
> 
> 赞同：9
> 
> 时间：2013-02-06T20:38:19.333
> 
> 标签：excel, vba, ms-office, clipboard

I've used a routine for years to put a plain text string into the clipboard that I can paste into another program such as:

```
targetData.SetText "This is a plain text string"
targetData.PutInClipboard 
```

When I use this in Excel Office 2013 the data isn't in the clipboard and therefore I can't paste it. This never happened in prior versions.

Under closer inspection I've found that the string does go to the clipboard but as "System String" but not as "Text" or "Unicode Text".

BUT... about 10% of the time it acutally works as it should putting the string into the clipboard as "Text".

Any ideas??

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-23T16:33:37.863

*user2140261 的评论是正确的解决方案：*

[如何：将信息发送到剪贴板](http://msdn.microsoft.com/en-us/library/office/ff192913.aspx)

*（以下内容只是从上面的链接复制而来）*

如果需要将表单或报表上的活动控件的内容复制到剪贴板，只需要这段代码：

```
Private Sub cmdCopy_Click() 
   Me!txtNotes.SetFocus 
   DoCmd.RunCommand acCmdCopy 
End Sub 
```

*但是，这是您旧例程所需的替换：*

**1.创建一个模块，将其命名为“WinAPI”或其他名称，将以下代码放入其中：**

```
Declare Function GlobalUnlock Lib "kernel32" (ByVal hMem As Long) As Long
Declare Function GlobalLock Lib "kernel32" (ByVal hMem As Long) As Long
Declare Function GlobalAlloc Lib "kernel32" (ByVal wFlags As Long, ByVal dwBytes As Long) As Long
Declare Function CloseClipboard Lib "User32" () As Long
Declare Function OpenClipboard Lib "User32" (ByVal hwnd As Long) As Long
Declare Function EmptyClipboard Lib "User32" () As Long
Declare Function lstrcpy Lib "kernel32" (ByVal lpString1 As Any, ByVal lpString2 As Any) As Long
Declare Function SetClipboardData Lib "User32" (ByVal wFormat As Long, ByVal hMem As Long) As Long

Public Const GHND = &H42
Public Const CF_TEXT = 1
Public Const MAXSIZE = 4096 
```

**2\. 在定义旧例程的模块中，用以下代码替换旧例程：**

```
Function ClipBoard_SetData(MyString As String) 
   Dim hGlobalMemory As Long, lpGlobalMemory As Long 
   Dim hClipMemory As Long, X As Long 

   ' Allocate moveable global memory. 
   '------------------------------------------- 
   hGlobalMemory = GlobalAlloc(GHND, Len(MyString) + 1) 

   ' Lock the block to get a far pointer 
   ' to this memory. 
   lpGlobalMemory = GlobalLock(hGlobalMemory) 

   ' Copy the string to this global memory. 
   lpGlobalMemory = lstrcpy(lpGlobalMemory, MyString) 

   ' Unlock the memory. 
   If GlobalUnlock(hGlobalMemory) <> 0 Then 
      MsgBox "Could not unlock memory location. Copy aborted." 
      GoTo OutOfHere2 
   End If 

   ' Open the Clipboard to copy data to. 
   If OpenClipboard(0&) = 0 Then 
      MsgBox "Could not open the Clipboard. Copy aborted." 
      Exit Function 
   End If 

   ' Clear the Clipboard. 
   X = EmptyClipboard() 

   ' Copy the data to the Clipboard. 
   hClipMemory = SetClipboardData(CF_TEXT, hGlobalMemory) 

OutOfHere2: 

   If CloseClipboard() = 0 Then 
      MsgBox "Could not close Clipboard." 
   End If 

End Function 
```

**3\. 然后，这样称呼它：**

```
' doesn't work on Windows 8: targetData.SetText "This is a plain text string"
'doesn't work on Windows 8: targetData.PutInClipboard
ClipBoard_SetData ("This is a plain text string") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-15T09:12:32.990

您应该将“Microsoft forms 2.0 object library”添加到您的引用中，然后您就可以使用此功能。您可以通过转到 Excel/developer/Visual basic（或您的 VBE 模块）并在工具/参考中选择浏览，然后在您的 system32 文件夹中搜索“FM20.DLL”文件，然后在最后选择此文件来执行此操作将出现参考列表中的“Microsoft forms 2.0 object library”。激活那个。现在一切都和以前一样好；）

# java - How to compile .jrxml only once

> ID：14738332
> 
> 赞同：3
> 
> 时间：2013-02-06T20:38:24.580
> 
> 标签：java, jasper-reports

Please Help: .jrxml is compiling every time i generate the report. I want to compile it only once. please help me what condition should i need to add. i am not using input/output stream. with compileReport what can be done to compile only once.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:10:46.713

不要让您的 JRXML 文件在任何可通过网络访问的地方都可用。JRXML 文件包含易于阅读的 SQL 语句，其中包含：

*   数据库供应商
*   数据库结构

恶意用户可以将这些信息用于不法目的。我倾向于将 SQL 语句移动到数据库视图或存储过程中，这隐藏了很多信息。

您的报告创建过程应如下所示：

1.  与业务分析师交谈以确定所有报告的报告要求。
2.  合并所有简单变化的报告（例如，不同的列或排序顺序）。
3.  为每个报告创建 JRXML 文件（一个 JRXML 文件可以处理多个报告变体），将 JRXML 文件存储在源代码存储库中。
4.  编译 JRXML 文件以获取`.jasper`文件。
5.  将编译`.jasper`后的文件存储在存储库和 Web 服务器上。
6.  完全从源代码中删除编译步骤。

简而言之，编译报告是一个你应该在应用程序环境之外进行的过程。这是开发人员应该采取的步骤。开发人员将编译后的报告检查到存储库中，测试/构建环境可以获取最新的副本。

除非您绝对需要即时编译报告。请注意，除非您正在创建动态报告，否则即时编译报告并没有真正意义。在这种情况下，您需要使用[DynamicJasper 之](http://dynamicjasper.com/)类的东西。

说了这么多，你的问题的答案是这样的：

1.  尝试获取`Sample_Report.jasper`.
2.  如果`Sample_Report.jasper`资源不存在，则按照您显示的方式进行编译。
3.  如果资源确实存在，请避免编译步骤。

这可能类似于：

```
JasperReport jasReport = null;

try {
  jasReport = (JasperReport)JRLoader.loadObject(
    getResourceAsStream("Sample_Report.jasper")
  );
}
catch( Exception e ) {
  jasperReport = JasperCompileManager.compileReport(
    getResourceAsStream("Sample_Report.jrxml")
  );
} 
```

您必须确保正确的目录和文件可以加载（如果它们确实存在于这些位置）。您还必须在编译后保存已编译的报告，以便下一次迭代获取该`.jasper`文件。

要保存编译后的`.jasper`文件，您可以使用以下[API](http://jasperreports.sourceforge.net/api/index.html)：

```
JasperCompileManager.compileReportToStrem(input, output); 
```

也可以看看：

*   [http://community.jaspersoft.com/questions/527132/how-load-jasper-instead-jrxml](http://community.jaspersoft.com/questions/527132/how-load-jasper-instead-jrxml)
*   [http://community.jaspersoft.com/questions/538416/how-save-compiled-jasper-object-database-blob](http://community.jaspersoft.com/questions/538416/how-save-compiled-jasper-object-database-blob)

# sql - 将 Visual Foxpro 数据库导入 SQL Server

> ID：14738333
> 
> 赞同：1
> 
> 时间：2013-02-06T20:38:30.250
> 
> 标签：sql, database, import, foxpro, visual-foxpro

我正在尝试使用*SQL Server Import and Export Wizard*将表从 Visual Foxpro 数据库导入我的 2008 SQL Server 。

我的问题是某些列的类型无法自动检测到。当我打开具有问题列的表的映射时，列类型设置为*129*。对于所有这些，类型应该是*text*，但我的问题是它们需要导入超过 200 个表，而且我没有时间滚动浏览所有表并更改列的类型。

所以我的问题是，如果向导无法检测到它是什么类型，有没有办法自动将类型默认为*文本？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:02:14.000

如果您有 Visual FoxPro 可用，您可以尝试此处提供的升迁向导：http: [//vfpx.codeplex.com/releases/view/10224](http://vfpx.codeplex.com/releases/view/10224)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:46:48.693

从[导入和导出向导的文档中](http://msdn.microsoft.com/en-us/library/ms141209.aspx)：

> SQL Server 导入和导出向导使用 Integration Services 提供的映射文件将数据类型从一个数据库版本或系统映射到另一个... 默认情况下，XML 格式的映射文件安装到 C:\Program Files\Microsoft SQL服务器\100\DTS\映射文件。
> 
> 如果您的业务需要数据类型之间的不同映射，您可以更新映射以影响向导执行的映射。

您可以使用[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645)之类的工具来找出它正在使用的文件并适当地更新它。

# c++ - 我的书对 lambda 返回类型的讨论是错误的吗？

> ID：14738335
> 
> 赞同：13
> 
> 时间：2013-02-06T20:38:32.530
> 
> 标签：c++, c++11, lambda, llvm, clang

我的书是这样说的：

> 具有函数主体的 Lambda 包含除未指定返回类型的单个 return 语句以外的任何内容返回 void。

但是这个：

```
auto f = []{
  int i=0; i++;
  return std::string("foo");
};
std::cout << f() << std::endl; 
```

实际上编译并打印出“foo”，但是 lambda expr 不仅仅是一个返回语句，所以它应该返回 void，因为它没有手动指定“-> std::string”作为返回类型。

这里发生了什么？

我在最新的 Xcode 4.6 中使用 Apple 的编译器，基于 Clang 3.2 似乎：

铿锵——版本

Apple LLVM 版本 4.2 (clang-425.0.24)（基于 LLVM 3.2svn）目标：x86_64-apple-darwin12.2.0 线程模型：posix

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T20:43:41.023

该书准确地反映了标准草案 n3290 中的规则。也许您的编译器实现了不同的草案。

在第 5.1.2p4 节中，草案内容如下

> 如果*lambda 表达式*不包含*trailing-return-type*，则好像*trailing-return-type*表示以下类型：
> 
> *   如果*复合语句*的形式为 `{` *属性说明符序列*[*选择*] `return` *表达式* `;` `}` ，则在左值到右值转换、数组到指针转换和函数到指针转换之后返回的表达式的类型；
> *   否则无效。

句法构造*属性说明符序列*可以是`alignas`或双括号属性。不是变量声明。

在 C++11 发布之后的 n3485 草案（即，它正在朝着 C++1y 发展）包含相同的措辞。我不知道在 n3290 之前的某些草案中是否有不同的规则。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T20:41:14.193

如果您使用流行的编译器（gcc、Visual Studio），您通常不需要指定返回类型，只要编译器能够明确地确定它 - 就像在您的示例中一样。

以下示例显示了一个 lambda，它需要显式返回类型信息：

```
auto lambda = [](bool b) -> float
    { 
        if (b) 
            return 5.0f; 
        else 
            return 6.0; 
    }; 
```

我就此事询问了 Bjarne Stroustrup，他的评论是：

`I do not know if C++11 allows the deduction of the return type is there are several return statements with identical return type. If not, that's planned for C++14.`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T20:46:01.307

我不确定从问题中的引用中得到什么，但这是 C++11 标准对没有声明符或返回类型的 lambdas 所说的：

> 如果 lambda-expression 不包含 lambda-declarator，就好像 lambda-declarator 是 ()。如果 lambda 表达式不包含 trailing-return-type，就好像 trailing-return-type 表示以下类型 (5.1.2p4)：
> 
> — 如果复合语句的形式为 { attribute-specifier-seqopt return expression ; 左值到右值转换（4.1）、数组到指针转换（4.2）和函数到指针转换（4.3）后返回表达式的类型；
> 
> ——否则，无效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-06T06:39:17.317

Clang 实现了对[C++ 核心问题 975](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#975)的建议解决方案。这允许 lambda 的任意主体，具有任意数量的 return 语句，并从返回的表达式中推断出返回值，但条件是它们都必须产生相同的类型。

在 C++14 中，N3638 进一步推广了这种支持[，](http://isocpp.org/files/papers/N3638.html)该标准在 WG21 的布里斯托尔会议上被投票纳入该标准的工作草案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T20:44:58.217

草案 n3485 表明，如果编译器可以明确确定返回类型，它将允许 lambda 不指定它。

# javascript - HTML/CSS/JS: large, scrolling and zooming tile grid

> ID：14738338
> 
> 赞同：0
> 
> 时间：2013-02-06T20:38:35.047
> 
> 标签：javascript, html, css, canvas

I want to create a front-end to basically visualize a 2-dimensional array. It's a **large** grid, large enough that the tiles may boil down to single pixels when looking at it from afar.

I'd like to implement zooming and 2d scrolling to navigate the representation (which is nothing more than colored squares).

What's the easiest way to go about this? This is not the part of the project i'm the most interested in, so I'd like to avoid having to learn huge frameworks.

I'm perfectly willing to use a `canvas` and/or `JS/CSS` techniques over elements.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:43:07.187

二维数组会有一些模式吗？将是任何图像或东西？代表一些像自动机规则 110 或一些简单/半高级的图形画布是一个很好的选择，或者像 KineticJS 这样的框架

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T21:05:56.363

此代码适用于画布

```
<canvas id="canvas"></canvas>
<script>
var arr = new Array(new Array(1,2,3), new Array(1,2,1), new Array(2,3,1));
var ctx = document.getElementById("canvas").getContext("2d");
var size = 10;
for(var i=0; i< 3;i++){
    for(var j=0; j< 3;j++){
        if(arr[i][j]==1){
        ctx.fillStyle = "red";
        }else if(arr[i][j]==2) {
        ctx.fillStyle = "blue";
        }else if(arr[i][j]==3){
        ctx.fillStyle = "green";
        }

        ctx.fillRect(i*(size+1),j*(size+1),size,size);
    }
}
</script> 
```

# visual-studio-2012 - 实体框架 5 - 实现 SQL Server“以用户身份执行”

> ID：14738339
> 
> 赞同：7
> 
> 时间：2013-02-06T20:38:44.463
> 
> 标签：visual-studio-2012, sql-server-2008-r2, entity-framework-5, impersonation

我正在使用带有 Entity Framework 5 和 SQL Server 2008 的 Visual Studio 2012 编写数据库应用程序。我希望 Entity Framework 模拟 SQL Server 用户（即没有登录的用户）。我为数据库上下文创建了一个新的构造函数，`MyDatabaseEntities`其中包括一个用于模拟用户名称的参数。这是我编写的代码：

```
public partial class MyDatabaseEntities
{
    private String _impersonateUser = null;

    public MyDatabaseEntities(String impersonateUser)
        : base("MyConnectionString")
    {
        _impersonateUser = impersonateUser;

        this.Database.Connection.StateChange += Connection_StateChange;

    }

    void Connection_StateChange(object sender, StateChangeEventArgs e)
    {
        if (e.CurrentState == ConnectionState.Open && e.OriginalState != ConnectionState.Open)
        {
            using (var cmd = this.Database.Connection.CreateCommand())
            {
                cmd.CommandType = CommandType.Text;

                cmd.Parameters.Add(new SqlParameter("user", _impersonateUser));

                cmd.CommandText = "EXECUTE AS USER = @user";

                cmd.ExecuteNonQuery();

            }

        }

    } 
```

我不得不添加支票...

```
if (e.CurrentState == ConnectionState.Open && e.OriginalState != ConnectionState.Open) 
```

...因为`Connection_StateChange`即使状态没有改变，方法 method 似乎也会执行。那么问题是当我运行代码**两次**时，

```
public void RunSimpleQuery()
{
    using (MyDatabaseEntities context = new MyDatabaseEntities("UserName"))
    {
        var result = context.TableName.ToList();

    }

} 
```

...实体框架抛出一个`SqlException`：

> 当前命令发生严重错误。结果（如果有）应被丢弃。\r\n当前命令出现严重错误。结果，如果有的话，应该丢弃。

有任何想法吗？

**更新 1**

我在上面的代码中，我改变了......

```
cmd.CommandText = "EXECUTE AS USER = @user;"; 
```

...到...

```
cmd.CommandText = "REVERT; EXECUTE AS USER = @user;"; 
```

...我仍然得到同样的`SqlException`错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T09:31:30.373

问题是 EF 在不需要时关闭连接并将其返回到池中。因此，当它再次执行一些 SQL 时，它会从您的事件可能未初始化的池中请求新连接。但是我再次相信您应该尝试通过手动控制连接生命周期来解决这个问题，以便既受益于连接池又能够满足您的要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-21T19:41:06.120

我知道这是一个老问题，但也许对某人有用。

我以不同的方式使用您的代码...

代替

> Connection_StateChanged 事件

我在同一个类中创建了两个方法：

```
 public void ChangeUser(String sUser)
    {
        if(Database.Connection.State != ConnectionState.Open)
            Database.Connection.Open();

        using (var cmd = Database.Connection.CreateCommand())
        {
            cmd.CommandType = CommandType.Text;
            cmd.Parameters.Add(new SqlParameter("user", sUser));
            cmd.CommandText = "EXECUTE AS USER = @user;";
            cmd.ExecuteNonQuery();
        }
    }

    public void Revert()
    {
        if (Database.Connection.State != ConnectionState.Open)
            Database.Connection.Open();

        using (var cmd = Database.Connection.CreateCommand())
        {
            cmd.CommandType = CommandType.Text;
            cmd.CommandText = "REVERT;";
            cmd.ExecuteNonQuery();
        }
    } 
```

我在执行存储过程之前和之后使用它，

```
using (var db = new MyDatabaseEntities())
        {
            db.ChangeUser(model.Username);
            var result = db.Something();
            db.Revert();
            return result;
        } 
```

它适用于 SP，即使在多次执行后也不会引发异常。如果我可以在命令执行后捕获一个事件，那么可能都被封装在 MyDatabaseEntities 上。

# mercurial - cvs2hg 是否仍然可能产生损坏的存储库？

> ID：14738347
> 
> 赞同：0
> 
> 时间：2013-02-06T20:39:20.977
> 
> 标签：mercurial, cvs, cvs2svn

尝试将存储库从 cvs 迁移到 hg，我找到了工具 cvs2hg，它似乎做得很好（转换很好，我有所有的标签和分支）。但是，[hg 文档](http://mercurial.selenic.com/wiki/RepositoryConversion#CVS)警告说“修复提交”会使存储库有些损坏或至少很危险。

这仍然是一个问题吗？自编写此警告以来，也许 hg 或 cvs2hg 已从修复中受益。如果是的话，我如何在生成的 hg 存储库上检查我是否处于如此危险的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T20:26:29.473

修复提交是好的和必要的。cvs2hg 比 hg convert 做得更好。

但也许首先关于这个问题。在 CVS 存储库中，您可以使用标签和分支玩各种肮脏的把戏。例如，您可以手动微调一些标记今天版本的 3 个文件、昨天版本的 4 个文件以及另一个长达一个月的版本。在实践中，我做了很多次“补丁标签”（有一些旧标签，我后来有各种提交，结果是一个错误，我修复了这个错误，通过旧标签制作修复标签，移动它在1-2个文件上）。

结果，如果将历史记录用于整个存储库，您将获得指向发布哪个 naver 已经存在或将存在于存储库历史记录的任何点的标记。

类似的技巧可以用分支来制作。或者分支可以从“丑陋”标签开始。

在这种情况下，任何 CVS 到 HG 的“自然”转换都将完全消失。在基于时间的历史记录中，没有任何地方可以挂钩此类标签或分支。而 hg convert 只是在或多或少的随机位置绑定这些标签，并在非常丑陋的地方分支。

Fixup 提交只是那些缺少的修订：在适当位置绑定并引入更改的人工提交，这些更改将存储库置于其应处于给定标记的状态。有了这些，我们得到了正确绑定到正确代码的“人工”标签和分支。

所以如果你：

*   提交 ac(1.1)、bc(1.1) 和 cc(1.1)
*   提交 ac(1.2), bc(1.2)
*   提交抄送（1.2）
*   人为创建的标签 blah_1.0 指向 ac(1.1)、bc(1.1) 和 cc(1.2)
*   提交 ac(1.3), bc(1.3)
*   ...

然后基于 hg convert 的历史将有 4 个编辑变更集（就像上面的那些）和 blah_1.0 绑定在一些丑陋的地方，内容错误。同时，cvs2hg 将创建“fixup commit”，它会人为地创建变更集，在该变更集上我们确实有 ac(1.1)、bc(1.1) 和 cc(1.2)，并在那里标记。在历史上，这样的变更集与移植/嫁接/樱桃采摘提交相当相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:20:34.643

您应该仔细检查生成的存储库，以确保它代表您的代码历史记录并且不包含任何这些糟糕的修复提交。

顺便说一句，看看更新的[http://www.catb.org/esr/reposurgeon/](http://www.catb.org/esr/reposurgeon/)工具可能是值得的。

# jquery - 通过ajax提交表单到另一个域

> ID：14738349
> 
> 赞同：1
> 
> 时间：2013-02-06T20:39:24.750
> 
> 标签：jquery, cors

我需要通过 ajax（不是 json）向另一个域提交表单，但不断收到错误消息

`XMLHttpRequest cannot load http://some.other.domain/. Origin http://localhost:8081 is not allowed by Access-Control-Allow-Origin.`

有没有办法解决这个问题？

```
$.ajax({
    type: "POST",
    dataType: "text/html",
    data: $("#surveyForm").serialize(),
    crossDomain: true,
    url: "http://some.other.domain",
    processData: false,
    error: function (jqXHR, textStatus, errorThrown) {
    },
    success: function (response) {
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:25:31.890

您最好的选择可能是设置[代理服务器](http://developer.yahoo.com/javascript/howto-proxy.html)。您不能使用 JSON-P，因为您正在执行表单 POST，并且您不能使用 CORS，因为您不控制远程域上的标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T08:56:51.707

我认为要将数据发送到跨域，您必须使用数据类型作为 JSONP。你不能发布整个表格。我下面的代码对我来说是正确的（希望这对你有帮助）

```
 $.ajax({ url: "MYURL",
    data: {
           paxMessage: JSON.stringify(paxMessage)
          },

    contentType: "application/json; charset=utf-8",

    dataType: "jsonp",

    success: function(data) {
              alert("Data Submitted successfully");
           },

    error: function(XMLHttpRequest, textStatus, errorThrown) {
           alert(textStatus);
           }
       }); 
```

# javascript - Box2D b2.ContactListener strangeness

> ID：14738350
> 
> 赞同：1
> 
> 时间：2013-02-06T20:39:31.660
> 
> 标签：javascript, box2d, box2dweb

I've been using Jonas Wagner's [JS Box2D port](https://github.com/jwagner/box2d2-js) and am running into a strange problem with shape userdata. I've setup my entity to have a collision shape as well as a secondary 'foot' sensor shape to determine when my object is on solid ground. The definition looks a little like this:

```
var bodyDef = new b2.BodyDef();
bodyDef.position.Set(
    (this.pos.x + this.size.x / 2) * b2.SCALE,
    (this.pos.y + this.size.y / 2) * b2.SCALE
);
this.body = ig.world.CreateBody(bodyDef);

var shapeDef = new b2.PolygonDef();
shapeDef.SetAsBox(
    this.size.x / 2 * b2.SCALE,
    this.size.y / 2 * b2.SCALE
);
shapeDef.density = 0.85;
shapeDef.filter.groupIndex = -1; 
this.body.CreateShape(shapeDef);

var footShapeDef = new b2.PolygonDef();
footShapeDef.SetAsOrientedBox(
    3 * b2.SCALE,
    3 * b2.SCALE,
    new b2.Vec2(0,7*b2.SCALE),
    0
);
footShapeDef.isSensor = true;
footShapeDef.density = 0.85;
footShapeDef.filter.groupIndex = -1; 

var footShape = this.body.CreateShape(footShapeDef);
footShape.SetUserData("feet");

this.body.SetMassFromShapes(); 
```

The idea here being that I can detect when my foot sensor stops colliding with entities. Everything is working as expected and my b2.ContactListener is correctly reporting when objects stop colliding with my foot sensor. The problem is that the userData I'm assigning to my foot shape isn't being correctly reported.

As you can see below, the point object returned in my b2.ContactListener's Remove callback clearly contains a shape (shape2) with it's m_userData attribute set to 'feet'. However, querying the shape2 object directly reports it's m_userData as null.

I've included a screenshot of Safari's debug console performing the console.log shown below. What's going on here?!

```
var listener = new b2.ContactListener();
listener.Remove = function(point)
{
    var p = point;
    var s1 = p.shape1;
    var s2 = p.shape2;

    console.log(p, s1, s2);
} 
```

![enter image description here](../Images/7901a2d4ed93e452498a655d0f53ad68.png)

# node.js - NodeJS - 正在下载的流视频

> ID：14738354
> 
> 赞同：4
> 
> 时间：2013-02-06T20:39:46.543
> 
> 标签：node.js, video-streaming, http-live-streaming

我正在编写一个程序，它将流式传输当前正在下载到驱动器上的视频文件。我遇到的问题似乎是让浏览器实际播放视频。该脚本侦听文件更改，然后流式传输其余部分，但浏览器除了显示空白视频页面外不执行任何操作。

```
var fs          = require('fs'),
    http        = require('http'),
    filename    = '/home/qrpike/Videos/topgears.mp4';

http.createServer(function (req, res) {

    console.log(req.url);
    if( req.url == '/video.mp4'){

        res.writeHead(200,{
            'Content-Type'          : 'video/mp4',
            'Cache-Control'         : 'public',
            'Connection'            : 'keep-alive',
            'Content-Disposition'   : 'inline; filename=topgears.mp4;',
            'Content-Transfer-Encoding' : 'binary',
            'Transfer-Encoding'     : 'chunked'
        });

        fs.open(filename, 'r', function(err, fd) {

            if (err) throw new Error('Could not open file');
            var position = 0;

            fs.stat(filename, read);
            fs.watchFile(filename, read.bind(null, null));

            function read(err, stat) {

                var delta = stat.size - position;
                if (delta <= 0) return;

                fs.read(fd, new Buffer(delta), 0, delta, position, function(err, bytes, buffer) {

                    console.log("err", err, "bytes", bytes, "position",position,"delta",delta);
                    res.write(buffer.toString('binary'));

                });

                position = stat.size;

            } 

        });

    }

}).listen(1337);
console.log('Server running at http://127.0.0.1:1337/'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:15:09.267

所以这个答案取决于[日益增长的文件](https://github.com/felixge/node-growing-file)，理论上它可以满足你的需求。我担心的是该项目已经两年没有提交，所以我不知道它是否仍然有效。话虽如此，这在本地对我有用（尽管我没有测试到视频文件的管道）：

```
var fs = require('fs');
var http = require('http');
var GrowingFile = require('growing-file');

var FILENAME = '/home/dave/Desktop/video/video.ogg';

var server = http.createServer(function(req, res) {
  var file;
  if (req.url === '/video.ogg') {
    res.writeHead(200, {
      'Content-Type': 'video/ogg'
    });
    file = GrowingFile.open(FILENAME);
    file.pipe(res);
  } else {
    res.statusCode = 404;
    res.end('Not Found');
  }
});

server.listen(1337); 
```

# ruby - 厨师 11：有什么方法可以将属性转换为 ruby 哈希？

> ID：14738364
> 
> 赞同：10
> 
> 时间：2013-02-06T20:40:28.767
> 
> 标签：ruby, hash, attributes, chef-infra

我正在为厨师属性中的服务生成配置。但是，在某些时候，我需要将属性 mash 转换为简单的 ruby​​ 哈希。这曾经在 Chef 10 中运行良好：

```
node.myapp.config.to_hash 
```

但是，从 Chef 11 开始，这不起作用。只有顶级属性被转换为哈希，然后嵌套值保留不可变的 mash 对象。修改它们会导致如下错误：

> Chef::Exceptions::ImmutableAttributeModification -------------------------------------------------------- ----- 当您不指定要设置的优先级时，节点属性是只读的。要设置属性，请使用类似 `node.default["key"] = "value"' 的代码

我尝试了很多方法来解决这个问题，但这些方法不起作用：

```
node.myapp.config.dup.to_hash
JSON.parse(node.myapp.config.to_json) 
```

json 解析 hack 看起来应该很好用，结果是：

```
JSON::ParserError
unexpected token at '"#<Chef::Node::Attribute:0x000000020eee88>"' 
```

除了在每本食谱中包含嵌套解析函数之外，是否有任何实际可靠的方法将属性转换为简单、普通、良好的旧 ruby​​ 哈希？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-08T22:28:36.597

在此处和 opscode chef 邮件列表上都缺乏答案之后，我最终使用了以下 hack：

```
class Chef
  class Node
   class ImmutableMash
      def to_hash
        h = {}
        self.each do |k,v|
          if v.respond_to?('to_hash')
            h[k] = v.to_hash
          else
            h[k] = v
          end
        end
        return h
      end
    end
  end
end 
```

我把它放在我食谱的图书馆目录中；现在我可以在厨师 10（已经正常工作并且不受此猴子补丁影响）和厨师 11 中使用 attribute.to_hash。我也将此作为错误报告给 opscode：

~~如果你不想给你的厨师打猴子补丁，请在这个问题上说出来：http: [//tickets.opscode.com/browse/CHEF-3857](https://web.archive.org/web/20160409231528/http://tickets.opscode.com/browse/CHEF-3857)~~

**更新：** monkey-patch 票被[这些](https://github.com/chef/chef/pull/670) [PR标记为关闭](https://github.com/chef/chef/pull/664)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-29T18:35:37.493

我希望我参加聚会还不算太晚，但是将节点对象与空哈希合并为我做到了：

```
chef (12.6.0)> {}.merge(node).class
 => Hash 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-02T19:02:18.277

我遇到了同样的问题，经过多次修改后想出了这个：

```
json_string = node[:attr_tree].inspect.gsub(/\=\>/,':')
my_hash = JSON.parse(json_string, {:symbolize_names => true}) 
```

inspect 执行其他建议的方法中缺少的深度解析，我最终得到一个哈希，我可以根据需要修改和传递它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-04-15T16:08:36.500

这已经修复了很长时间：

```
[1] pry(main)> require 'chef/node'
=> true
[2] pry(main)> node = Chef::Node.new
[....]
[3] pry(main)> node.default["fizz"]["buzz"] = { "foo" => [ { "bar" => "baz" } ] }
=> {"foo"=>[{"bar"=>"baz"}]}
[4] pry(main)> buzz = node["fizz"]["buzz"].to_hash
=> {"foo"=>[{"bar"=>"baz"}]}
[5] pry(main)> buzz.class
=> Hash
[6] pry(main)> buzz["foo"].class
=> Array
[7] pry(main)> buzz["foo"][0].class
=> Hash
[8] pry(main)> 
```

可能在 Chef 12.x 或 Chef 13.x 中或周围的某个时间修复，在 Chef 15.x/16.x/17.x 中肯定不再是问题

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-08-30T17:59:03.173

上面的答案有点不必要。你可以这样做：

```
json = node[:whatever][:whatever].to_hash.to_json
JSON.parse(json) 
```

# jboss5.x - 部署在 JBoss 上的 Mule ESB 应用程序：org.apache.cxf.binding.BindingFactoryManagerImpl 需要映射名称

> ID：14738367
> 
> 赞同：1
> 
> 时间：2013-02-06T20:40:50.323
> 
> 标签：jboss5.x, mule, esb

我正在尝试在 JBoss (5.1.0.GA) 上将 Mule ESB 应用程序部署为 .war 文件。当我启动 JBoss 时，出现以下错误：

```
13:37:06,952 ERROR [StandardContext] Context [/OMS] startup failed due to previous errors
java.lang.RuntimeException: mapped-name is required for     org.apache.cxf.binding.BindingFactoryManagerImpl/bus of deployment OMS.war
    at org.jboss.web.tomcat.service.injection.WebResourceHandler.loadXmlResourceEnvRefs    (WebResourceHandler.java:287)
    at org.jboss.web.tomcat.service.injection.WebResourceHandler.loadXml(WebResourceHandler.java:325)
    at org.jboss.web.tomcat.service.TomcatInjectionContainer.processMetadata(TomcatInjectionContainer.java:550) 
```

这是 jboss-classloading.xml

```
<classloading xmlns="urn:jboss:classloading:1.0"
 name="OMS.war"
 domain="OMS"
 export-all="NON_EMPTY"
 import-all="false">
</classloading> 
```

jboss-web.xml

```
<jboss-web>
<class-loading>
    <loader-repository>
     <loader-repository-config>  
            java2ParentDelegation=false  
         </loader-repository-config>  
</loader-repository>
  </class-loading>
 </jboss-web> 
```

和 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" 
   xmlns="http://java.sun.com/xml/ns/javaee"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
   <context-param>
       <param-name>org.mule.config</param-name>
   <param-value>_includes.xml,_subflows.xml,monitor_flow.xml,claim_flow.xml,orders_flows.xml,parcel_flow.xml,create_claim_flow.xml,request_flows.xml,retry_flow.xml,inbound_parcel_flow.xml,server_status_flow.xml,insurance_policy_flow.xml</param-value>
   </context-param>

   <listener>
       <listener-class>org.mule.config.builders.MuleXmlBuilderContextListener</listener-class>
   </listener>
</web-app> 
```

这 3 个 xml 文件在 WEB-INF 下。所有 .jar 文件都在 WEB-INF/lib 下

任何帮助，将不胜感激。谢谢你。

# java - Java 优先队列比较器

> ID：14738378
> 
> 赞同：6
> 
> 时间：2013-02-06T20:41:12.997
> 
> 标签：java, priority-queue

我已经为优先级队列定义了自己的比较函数，但是比较函数需要数组的信息。问题是当数组的值发生变化时，并没有影响比较功能。我该如何处理？代码示例：

```
import java.util.Arrays;
import java.util.Comparator;
import java.util.PriorityQueue;
import java.util.Scanner;

public class Main {
    public static final int INF = 100;
    public static int[] F = new int[201];

    public static void main(String[] args){

        PriorityQueue<Integer> Q = new PriorityQueue<Integer>(201, 
            new Comparator<Integer>(){
                public int compare(Integer a, Integer b){
                    if (F[a] > F[b]) return 1;
                    if (F[a] == F[b]) return 0;
                    return -1;
                }
            });

            Arrays.fill(F, INF);
            F[0] = 0; F[1] = 1; F[2] = 2;
            for (int i = 0; i < 201; i ++) Q.add(i);
            System.out.println(Q.peek()); // Prints 0, because F[0] is the smallest
            F[0] = 10;
            System.out.println(Q.peek()); // Still prints 0 ... OMG
        }
   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T20:44:55.260

您的比较器仅在您修改队列时（即添加项目时）才会被调用。在那之后，队列不知道有什么东西导致了顺序改变，这就是为什么它保持不变。

有一个像这样的比较器是相当令人困惑的。如果你有两个值，A 和 B，并且在某个时候 A>B，每个人都会期望 A 保持大于 B。我认为你对这个问题使用优先级队列是错误的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T20:44:49.950

因此，本质上，您正在动态更改比较标准，而这不是优先队列合同提供的功能。请注意，这似乎适用于某些情况（例如，在删除或插入另一个项目时，堆可能会对*某些*项目进行排序），但由于您无法保证，这不是一种有效的方法。

您可以做的是，每次更改数组时，都将所有元素取出，然后将它们放回原处。这当然*非常*昂贵（ O(n*log(n))），因此您可能应该尝试工作围绕您的设计，以避免更改数组值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T20:52:15.243

使用在 peek 上使用比较器的 PriorityQueue 的自定义实现，而不是在 add 上：

```
public class VolatilePriorityQueue <T> extends AbstractQueue <T>
{
    private final Comparator <? super T> comparator;

    private final List <T> elements = new ArrayList <T> ();

    public VolatilePriorityQueue (Comparator <? super T> comparator)
    {
        this.comparator = comparator;
    }

    @Override
    public boolean offer (T e)
    {
        return elements.add (e);
    }

    @Override
    public T poll ()
    {
        if (elements.isEmpty ()) return null;
        else return elements.remove (getMinimumIndex ());
    }

    @Override
    public T peek ()
    {
        if (elements.isEmpty ()) return null;
        else return elements.get (getMinimumIndex ());
    }

    @Override
    public Iterator <T> iterator ()
    {
        return elements.iterator ();
    }

    @Override
    public int size ()
    {
        return elements.size ();
    }

    private int getMinimumIndex ()
    {
        T e = elements.get (0);
        int index = 0;

        for (int count = elements.size (), i = 1; i < count; i++)
        {
            T ee = elements.get (i);
            if (comparator.compare (e, ee) > 0)
            {
                e = ee;
                index = i;
            }
        }

        return index;
    }
} 
```

# javascript - 如何记录一个函数在 JSDoc 中允许任意数量的参数？

> ID：14738382
> 
> 赞同：0
> 
> 时间：2013-02-06T20:41:33.243
> 
> 标签：javascript, jsdoc

我有一些函数可以接受任意数量的参数。我已经检查了[JSDoc @Param](http://code.google.com/p/jsdoc-toolkit/wiki/TagParam) wiki，但它没有提到这个问题。例如，您将如何记录类似的函数`console.log`？

# ios - 点击绝对坐标

> ID：14738389
> 
> 赞同：1
> 
> 时间：2013-02-06T20:41:56.173
> 
> 标签：ios, testing, ios-ui-automation

我正在尝试在使用视图实例化的自定义 NavigationBar 上执行点击。由于我似乎无法先选择它然后点击，我想使用自定义坐标执行点击（元素位于左上角）：

```
UIATarget.localTarget().frontMostApp().tapWithOptions({tapCount: 1, touchCount: 1, duration: 0.1, tapOffset: {x: 0, y: 0}); 
```

不幸的是，点击的原点 (0,0) 看起来就在 NavigationBar 元素的正下方，我无法点击该元素，因为它位于 NavigationBar 内部。从屏幕左上角开始点击的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:24:59.633

我认为`duration`在选项中指定键`tapWithOptions`是导致问题的原因。

在我用 UI 自动化测试的我自己的一个应用程序中，我尝试了一个实验。我粘贴了您在 Instruments 中编写的行，但运行时它不起作用。但是当我取下`duration`钥匙时，它起作用了，并且执行了一次点击。我的猜测是，`duration`即使持续时间很短，添加也会以某种方式触发“点击并按住”手势。轻击手势识别器显然忽略了 UI 自动化生成的这些类型的事件。通过删除`duration`键，UI 自动化执行正常的点击，它应该可以工作。

# ruby-on-rails - 您如何（并且应该）从视图访问闪存、会话和控制器实例变量？

> ID：14738391
> 
> 赞同：0
> 
> 时间：2013-02-06T20:42:07.063
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我首先应该说这是从有用的消息开始的，例如您在设置 Devise 时收到的消息（从 v. 2.2.3 开始）：

```
Ensure you have flash messages in app/views/layouts/application.html.erb 
For example:
    <p class="notice"><%= notice %></p>
    <p class="alert"><%= alert %></p> 
```

至少有三种方法可以从控制器获取信息到视图中。您可以将内容放入会话中，然后放入闪存中，或在控制器中设置实例变量。我看到了使用视图中的一个裸变量访问闪存和会话的示例，这打开了发生冲突的可能性。例如，我可以有一个这样的控制器：

```
class PerverseController < ApplicationController

def index
    @msg = 'Message 1'
    session[:msg] = 'Message 2'
    # Note - this is where a real concern comes in, the previous page could 
    # have done anything! Though here I use flash.now to illustrate the point.
    flash.now[:msg] = 'Message 3'
end 
```

然后，如果我有以下观点：

```
<%= msg %> 
```

似乎可以引用这三个值中的任何一个。实际上，视图中的上述代码对我来说是一个错误（在 Rails 3.2 上）。您需要明确地实际使用“@”或“flash”或“会话”。

我在这方面找不到任何明确的文档 - 书籍和教程大多参考闪存和会话作为事后的想法，所以我想它可能会在未来的版本中改变。但是，我很想看到一个指向引用的指针，以及我*应该*做些什么来避免将来损坏的建议，同时保持我的代码尽可能清晰/简洁。

现在，我想确保我与 Devise 正确集成。

# django - Django：聚合来自不同模型的字段值

> ID：14738393
> 
> 赞同：0
> 
> 时间：2013-02-06T20:42:12.230
> 
> 标签：django, django-models

如果您的模型结构如下：

```
class Hour(models.Model):
    stat1 = models.FloatField()
    stat2 = models.FloatField()
    stat3 = models.FloatField()

class Day(models):
    hour = models.ForeignKey(Hour) #e.g.: Hour.id=1, Hour.id=2, ..., Hour.id=24

class Weather(models.Model):
    day = models.ForeignKey(Day) 
```

注意：`hours`可能会从某些中丢失，`days`并且`stats`可能会从某些中丢失`hours`。数据收集缺少每天的所有时间和每小时的所有统计数据。

在这个层次结构上求和和平均统计数据的最佳方法是`models`什么？例如，假设当我知道有些日子没有数据时，我想要所有有数据的`stat2`at的总和和平均值？`H5``days``Weather``H5`

更新：我自己的解决方案，假设 Day.id 等于一天中的小时：例如，如果 Day.id == 5，那么它是当天的 H5：

```
hours = [[hour for hour in w.day.objects.all() if hour.id==5] \
    for w in Weather.objects.all()]
var2_sum = [sum(h.var2 for h in hours if hasattr(h,'var2'))]
var2_count = [count(h.var2 for h in hours if hasattr(h,'var2'))]
var2_avg = var2_sum / var2_count 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:01:58.443

更新：我自己的解决方案，假设 Day.id 等于一天中的小时：例如，如果 Day.id == 5，那么它是当天的 H5：

```
hours = [[hour for hour in w.day.objects.all() if hour.id==5] \
    for w in Weather.objects.all()]
var2_sum = [sum(h.var2 for h in hours if hasattr(h,'var2'))]
var2_count = [count(h.var2 for h in hours if hasattr(h,'var2'))]
var2_avg = var2_sum / var2_count 
```

Nested `forloops` are fun and all, but are a brute force way to answer the question. The use of `hasattr` is necessary to avoid have `None` entries into the lists created by list comprehension.

# java - 使用 spring for android 使用压缩的 jpeg 字节数组进行多部分发布请求

> ID：14738394
> 
> 赞同：8
> 
> 时间：2013-02-06T20:42:16.560
> 
> 标签：java, android, spring, post, multipartform-data

我一直在我的android应用程序中成功地使用spring for android来从/向服务器获取/发布数据。现在，我必须对**多部分表单**进行发布请求，但我无法让它按照我想要的方式工作。

用例： 1\. 从图库中挑选一张照片 2\. 使用文件源将其加载到位图 3\. 将位图压缩为 ByteArrayOutputStream 4\. 将字节数组 ( ByteArrayOutputStream.toByteArray() ) 传递给服务器。（我需要将此作为 jpeg 而不是 application/octet-stream 发送）

上传照片的服务器端点接受仅具有以下 Mime 类型的 MultipartFile（注意，它**不接受 MimeType: application/octet-stream**）：

```
GIF("image/gif")
PNG("image/png", "image/x-png")
JPG("image/jpeg", "image/jpg", "image/pjpeg")
BMP("image/bmp") 
```

我试过使用[示例代码](https://github.com/SpringSource/spring-android-samples/blob/master/spring-android-showcase/client/src/org/springframework/android/showcase/rest/HttpPostFormDataActivity.java)，但到目前为止还没有成功。

使用以下代码，我收到以下错误： org.springframework.web.bind.MissingServletRequest ParameterException: Required MultipartFile parameter 'file' is not present

非常感谢您对此事的帮助。谢谢并继续努力。

这是我的代码：

```
bitmap = BitmapFactory.decodeFile("/mnt/sdcard/DCIM/Camera/20130205_162546.jpg");
ByteArrayOutputStream bos = new ByteArrayOutputStream();
bitmap.compress(CompressFormat.JPEG, 60, bos);
byte[] data = bos.toByteArray();

// populate the data to post
MultiValueMap<String, Object> formData = new LinkedMultiValueMap<String, Object>();
formData.add("caption", "Test Caption");
formData.add("file", data);

// The URL for making the POST request
final String url = "http://api.example.com/imageUpload?oauth_token=XXXXXX";

HttpHeaders requestHeaders = new HttpHeaders();

// Sending multipart/form-data
requestHeaders.setContentType(MediaType.MULTIPART_FORM_DATA);

// Populate the MultiValueMap being serialized and headers in an HttpEntity object to use for the request
HttpEntity<MultiValueMap<String, Object>> requestEntity = new HttpEntity<MultiValueMap<String, Object>>(formData, requestHeaders);

// Create a new RestTemplate instance
RestTemplate restTemplate = new RestTemplate(true);

//    // Set a custom message converter that supports the application/json media type
//    final GsonHttpMessageConverter gsonMessageConverter = new GsonHttpMessageConverter();
//    gsonMessageConverter.setSupportedMediaTypes(Collections.singletonList(MediaType.APPLICATION_JSON));
//    final ByteArrayHttpMessageConverter byteArrayMessageConverter = new ByteArrayHttpMessageConverter();
//    byteArrayMessageConverter.setSupportedMediaTypes(Collections.singletonList(MediaType.IMAGE_JPEG));
//    final FormHttpMessageConverter formMessageConverter = new FormHttpMessageConverter();
//    formMessageConverter.setSupportedMediaTypes(Collections.singletonList(MediaType.IMAGE_JPEG));
//    restTemplate.getMessageConverters().addAll(Arrays.asList(gsonMessageConverter, byteArrayMessageConverter, formMessageConverter));

// Make the network request, posting the message, expecting a String in response from the server
ResponseEntity<String> response = restTemplate.exchange(url, HttpMethod.POST, requestEntity, String.class);

// Return the response body to display to the user
Log.i(TAG, "**** response.body : " + response.getBody()); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-04T07:35:17.877

我遇到了同样的问题，解决方案是覆盖`org.springframework.core.io.Resource#getFileName()`实现。

就我而言：

```
MultiValueMap<String, Object> map = new LinkedMultiValueMap<String, Object>();
// add values to map ... and when it comes to image:
Resource res = new ByteArrayResource(Utils.uriToByteArray(context, itemImage)) {
                    @Override
    public String getFilename() throws IllegalStateException {
        return imageFileName;
    }
};
HttpHeaders imageHeaders = new HttpHeaders();
imageHeaders.setContentType(MediaType.IMAGE_JPEG);
HttpEntity<Resource> imageEntity = new HttpEntity<Resource>(res, imageHeaders);
map.add("item[image]", imageEntity); 
```

其中 imageFilename 是文件名。稍后将包含在多部分标题中：`Content-Disposition: form-data; name="your_image_form_item"; filename="20130520_142401.jpg"`

我希望它有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-20T19:21:30.923

我也遇到过这个问题。原来我的问题的主体在服务器上，服务器未配置为处理/解决多部分请求。

[在这里](https://stackoverflow.com/a/19481665/1459223)查看我的详细答案。希望能帮助到你。

# iphone - ViewController 上的本地通知

> ID：14738395
> 
> 赞同：0
> 
> 时间：2013-02-06T20:42:24.897
> 
> 标签：iphone, ios, xcode, notifications, local

我有以下代码`ViewController.m`：

```
-(void) checker {
    UILocalNotification *notification = [[UILocalNotification alloc] init];
    [notification setAlertBody: @"Im your local notification"];
    [notification setFireDate: [NSDate dateWithTimeIntervalSinceNow: 1]];
    [notification setTimeZone: [NSTimeZone defaultTimeZone]];
    [UIApplication setScheduledLocalNotifications: [NSArray arrayWithObject: notification]];
} 
```

最后一行产生警告：

> 找不到类方法“+setScheduledLocalNotifications”（返回类型默认为 id）

并且在处理时会出错。如何实例化通知？正如我所说，我是新手，如果您能提供完整的答案，将不胜感激。

**编辑：**我有一个计时器，它每 60 秒重复一次，并调用一个发出通知的函数。

```
timer = [NSTimer scheduledTimerWithTimeInterval:60 target:self selector:@selector(checker) userInfo:nil repeats:YES];

/* ... */
-(void)checker {
    NSLog(@"Notification routine");
    UIApplication* app = [UIApplication sharedApplication];
    NSArray *oldNotifications = [app scheduledLocalNotifications];

    // Clear out the old notification before scheduling a new one.(if needed)
    if ([oldNotifications count] > 0)
        [app cancelAllLocalNotifications];

    // Create a new notification.
    UILocalNotification* alarm = [[[UILocalNotification alloc] init] autorelease];
    if (alarm) {
        alarm.fireDate = [NSDate dateWithTimeIntervalSinceNow:10];
        alarm.timeZone = [NSTimeZone defaultTimeZone];
        alarm.repeatInterval = 0;
        alarm.alertBody = @"Msg to show";
        [app scheduleLocalNotification:alarm];
    }
} 
```

我可以看到日志每分钟只触发一次，但`oldNotifications`计数没有增加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:48:02.927

```
[[UIApplication sharedApplication] scheduleLocalNotification:notification]; 
```

错误消息中的“+”表示它正在尝试调用类方法而不是实例方法。该`[UIApplication sharedApplication]`调用将返回应用程序对象的单例实例，允许您将该方法作为实例方法调用。

您还应该阅读[UIApplication](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)的文档。你只需要调用`scheduleLocalNotification:`通知对象来安排它。这将允许您将内存释放给对象，因为 schedule 方法将复制对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:48:48.607

我就是这样做的

```
UIApplication* app = [UIApplication sharedApplication];
NSArray *oldNotifications = [app scheduledLocalNotifications];

// Clear out the old notification before scheduling a new one.(if needed)
if ([oldNotifications count] > 0)
    [app cancelAllLocalNotifications];

// Create a new notification.
UILocalNotification* alarm = [[[UILocalNotification alloc] init] autorelease];
if (alarm)
{
    alarm.fireDate = [NSDate dateWithTimeIntervalSinceNow:60*60];//afterone hour
    alarm.timeZone = [NSTimeZone defaultTimeZone];
    alarm.repeatInterval = 0;
    alarm.soundName = @"alarmsound.caf";
    alarm.alertBody = @"Msg to show";
    [app scheduleLocalNotification:alarm];
} 
```

更新：

```
- (void)scheduleAlarmForDate:(NSDate*)theDate andBody:(NSString*)Body
{
    UIApplication* app = [UIApplication sharedApplication];
    NSArray *oldNotifications = [app scheduledLocalNotifications];

    // Clear out the old notification before scheduling a new one.
    if ([oldNotifications count] > 0)
        [app cancelAllLocalNotifications];

    // Create a new notification.
    UILocalNotification* alarm = [[UILocalNotification alloc] init];//Using ARC no autorelease
    if (alarm)
    {
        alarm.fireDate = theDate;
        alarm.timeZone = [NSTimeZone defaultTimeZone];
        alarm.repeatInterval = 0;
        alarm.soundName = @"alarmsound.caf";
        alarm.alertBody = Body;
        [app scheduleLocalNotification:alarm];
    }
} 
```

现在如果我调用这个方法两次，

```
 NSDate *fireDate1 = [NSDate dateWithTimeIntervalSinceNow:4.0];
[self scheduleAlarmForDate:fireDate1 andBody:@"My alertBody 1"];

NSDate *fireDate2 = [NSDate dateWithTimeIntervalSinceNow:6.0];
[self scheduleAlarmForDate:fireDate2 andBody:@"My alertBody 2"]; 
```

第一个警报将被取消，，

# android - HTC 手机上的 Android setOrientationHint

> ID：14738397
> 
> 赞同：1
> 
> 时间：2013-02-06T20:42:30.190
> 
> 标签：android, video, orientation

当`setOrientationHint`用于录制视频时，三星和摩托罗拉手机只需将此值写入旋转元数据。

但是，HTC 手机似乎并未将此值写入元数据，而是在录制后实际尝试旋转视频。我在 Android 4.0.3 及更低版本上尝试过的手机实际上将其旋转 90 度，无论该值如何，4.0.4 手机都会根据该值旋转它。

有没有其他人注意到这种行为，解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:48:02.593

根据我的经验，您无法统一所有设备。一些设备添加元数据，一些旋转字节数组，还有一些完全取消它。

元数据存在的另一个问题是，正如录制设备不同，播放设备也不同，例如在 Windows 中，您可能已经注意到 jpeg 元数据 (EXIF) 被忽略并且所有图像都以横向显示。

我现在希望硬件制造商在相机硬件方面会有一定的障碍，但似乎这仍然是一个问题。

# javascript - 如何在 ember.js 中实现过滤

> ID：14738400
> 
> 赞同：0
> 
> 时间：2013-02-06T20:42:58.877
> 
> 标签：javascript, ember.js

我想使用谷歌地图在 ember 中创建应用程序。它看起来类似于谷歌地图，在左侧我想要过滤器，在右侧它将是地图。可以说我的地点对象看起来像：

```
{ name: 'Luigi', type: 'pizza', ...} 
```

在过滤器中，我想使用复选框选择要在地图上显示的地点类型。默认情况下，所有元素都被选中，并且每个选中的类型地点都显示在地图上。

这里开始我的问题。我看了窥视代码，阅读指南，但我不知道如何开始。我想我需要一些`FilterController`存储选定的过滤器数组，并且属性会以`PlacesControllers` *某种方式* 从基于该数组的模型中`content`监视类型数组`FilterController`并返回集合。`Places`

如何对上述情况的地方进行过滤？

现在我正在尝试构建基于过滤器列出地点的演示，欢迎所有输入！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:54:45.520

您可以在数组控制器上执行计算属性，根据接口指定的内容过滤数组控制器：

```
App.PlacesController({
   content: [an array with your places],
   placesToDisplay: function(){
       return this.filter(function(item){
           return this.get('filter').contains(item.get('type')); //true when you want the item to be displayed.
       });
   }.property('content', 'filter'),
   filter: [] //containing the types you want to filter on.
}); 
```

参考`placesToDisplay`您认为的属性。并更新`filter`属性。因为`placesToDisplay`监视属性，当属性的内容发生更改`filter`时，它将重新呈现您的视图。`filter`

你试过什么了？如果你会做一个[小提琴](http://jsfiddle.net)，我可以更具体。

# playframework - Play 2.0 无法解析 javax.ws.rs/jsr311-api/1.1.1

> ID：14738405
> 
> 赞同：4
> 
> 时间：2013-02-06T20:43:07.633
> 
> 标签：playframework, playframework-2.0, sbt

我正在尝试在我的新环境 Windows 8 上编译 Play 2.0.4 上的现有项目。

在解决依赖关系时，Play 找不到`javax.ws.rs#jsr311-api;1.1.1!jsr311-api.jar`.

这是错误代码：

```
[info] Updating {file:/C:/Users/Test/Documents/Projects/Test/}test...
[info] downloading http://repo1.maven.org/maven2/org/slf4j/slf4j-api/1.6.1/slf4j-api-   1.6.1.jar ...
[info]  [SUCCESSFUL ] org.slf4j#slf4j-api;1.6.1!slf4j-api.jar (918ms)
[warn]  [NOT FOUND  ] javax.ws.rs#jsr311-api;1.1.1!jsr311-api.jar (275ms)
[warn] ==== Typesafe Releases Repository: tried
[warn]   http://repo.typesafe.com/typesafe/releases/javax/ws/rs/jsr311-api/1.1.1/jsr311-api-1.1.1.jar
[info] downloading http://repo.typesafe.com/typesafe/releases/play/play-test_2.9.1/2.0.3/play-test_2.9.1-2.0.3.jar ...
[info]  [SUCCESSFUL ] play#play-test_2.9.1;2.0.3!play-test_2.9.1.jar (2751ms)
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::              FAILED DOWNLOADS            ::
[warn]  :: ^ see resolution messages for details  ^ ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: javax.ws.rs#jsr311-api;1.1.1!jsr311-api.jar
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
sbt.ResolveException: download failed: javax.ws.rs#jsr311-api;1.1.1!jsr311-api.jar
    at sbt.IvyActions$.sbt$IvyActions$$resolve(IvyActions.scala:213)
    at sbt.IvyActions$$anonfun$update$1.apply(IvyActions.scala:124)
    at sbt.IvyActions$$anonfun$update$1.apply(IvyActions.scala:123)
    at sbt.IvySbt$Module$$anonfun$withModule$1.apply(Ivy.scala:110)
    at sbt.IvySbt$Module$$anonfun$withModule$1.apply(Ivy.scala:110)
    at sbt.IvySbt$$anonfun$withIvy$1.apply(Ivy.scala:98)
    at sbt.IvySbt.liftedTree1$1(Ivy.scala:47)
    at sbt.IvySbt.action$1(Ivy.scala:47)
    at sbt.IvySbt$$anon$3.call(Ivy.scala:56)
    at xsbt.boot.Locks$GlobalLock.withChannel$1(Locks.scala:75)
    at xsbt.boot.Locks$GlobalLock.withChannelRetries$1(Locks.scala:58)
    at xsbt.boot.Locks$GlobalLock$$anonfun$withFileLock$1.apply(Locks.scala:79)
    at xsbt.boot.Using$.withResource(Using.scala:11)
    at xsbt.boot.Using$.apply(Using.scala:10)
    at xsbt.boot.Locks$GlobalLock.liftedTree1$1(Locks.scala:51)
    at xsbt.boot.Locks$GlobalLock.withLock(Locks.scala:51)
    at xsbt.boot.Locks$.apply0(Locks.scala:30)
    at xsbt.boot.Locks$.apply(Locks.scala:27)
    at sbt.IvySbt.withDefaultLogger(Ivy.scala:56)
    at sbt.IvySbt.withIvy(Ivy.scala:95)
    at sbt.IvySbt.withIvy(Ivy.scala:91)
    at sbt.IvySbt$Module.withModule(Ivy.scala:110)
    at sbt.IvyActions$.update(IvyActions.scala:123)
    at sbt.Classpaths$$anonfun$work$1$1.apply(Defaults.scala:816)
    at sbt.Classpaths$$anonfun$work$1$1.apply(Defaults.scala:814)
    at sbt.Classpaths$$anonfun$44$$anonfun$45.apply(Defaults.scala:830)
    at sbt.Classpaths$$anonfun$44$$anonfun$45.apply(Defaults.scala:828)
    at sbt.Tracked$$anonfun$lastOutput$1.apply(Tracked.scala:35)
    at sbt.Classpaths$$anonfun$44.apply(Defaults.scala:832)
    at sbt.Classpaths$$anonfun$44.apply(Defaults.scala:827)
    at sbt.Tracked$$anonfun$inputChanged$1.apply(Tracked.scala:45)
    at sbt.Classpaths$.cachedUpdate(Defaults.scala:834)
    at sbt.Classpaths$$anonfun$36.apply(Defaults.scala:734)
    at sbt.Classpaths$$anonfun$36.apply(Defaults.scala:732)
    at sbt.Scoped$$anonfun$hf7$1.apply(Structure.scala:478)
    at sbt.Scoped$$anonfun$hf7$1.apply(Structure.scala:478)
    at scala.Function1$$anonfun$compose$1.apply(Function1.scala:41)
    at sbt.Scoped$Reduced$$anonfun$combine$1$$anonfun$apply$11.apply(Structure.scala:295)
    at sbt.Scoped$Reduced$$anonfun$combine$1$$anonfun$apply$11.apply(Structure.scala:295)
    at sbt.$tilde$greater$$anonfun$$u2219$1.apply(TypeFunctions.scala:40)
    at sbt.std.Transform$$anon$5.work(System.scala:67)
    at sbt.Execute$$anonfun$submit$1$$anonfun$apply$1.apply(Execute.scala:221)
    at sbt.Execute$$anonfun$submit$1$$anonfun$apply$1.apply(Execute.scala:221)
    at sbt.ErrorHandling$.wideConvert(ErrorHandling.scala:18)
    at sbt.Execute.work(Execute.scala:227)
    at sbt.Execute$$anonfun$submit$1.apply(Execute.scala:221)
    at sbt.Execute$$anonfun$submit$1.apply(Execute.scala:221)
    at sbt.CompletionService$$anon$1$$anon$2.call(CompletionService.scala:26)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
[error] {file:/C:/Users/Test/Documents/Projects/Test/}test/*:update: sbt.ResolveException: download failed: javax.ws.rs#jsr311-api;1.1.1!jsr311-api.jar 
```

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T23:09:17.833

依赖项位于 Sonatype OSS 快照存储库中：

```
resolvers +=
  "Sonatype OSS Snapshots" at "https://oss.sonatype.org/content/repositories/snapshots" 
```

将其添加到目录下的构建定义中`project`。

阅读[解析器](http://www.scala-sbt.org/release/docs/Detailed-Topics/Resolvers.html)以熟悉 SBT/Play 中解析器的概念（Play 在幕后使用 SBT）。

# ajax - VaryByParam 不使用参数，仅 *

> ID：14738406
> 
> 赞同：0
> 
> 时间：2013-02-06T20:43:09.223
> 
> 标签：ajax, json, model-view-controller, outputcache

我已经查看了其他 VaryByParam 问题，但我无法找到我的问题的答案。我有一个定义了以下操作的 MVC 站点：

```
[OutputCache(Duration = 30, VaryByParam = "TargetID")]
public JsonResult IsThingAllowed(int TargetID)
{
    bool isAllowed = IsAllowed(TargetID);

    return Json(isAllowed, JsonRequestBehavior.AllowGet);
} 
```

无论 TargetID 是什么，都会返回缓存的值。但是，如果我更改`TargetID`为`*`，它将按预期工作（缓存值因 而异`TargetID`）：

```
[OutputCache(Duration = 30, VaryByParam = "*")] 
```

这是 AJAX 调用：

```
$.ajax({
    url: "/MyController/IsThingAllowed",
    type: "POST",
    data: JSON.stringify({ "TargetID": id }), // This is definitely varying!
    dataType: "json",
    contentType: "application/json; charset=utf-8",
    success: function (data, textStatus, xhr) {

        updateThing(data);
    },
    error: function (xhr, textStatus, error) {

    }
}); 
```

显式命名参数时我做错了什么？

**编辑：** 如果我们使用`GET`而不是`POST`.. 则有效，但`POST`显然**有效**，因为它在我们使用时有效`*`。

这是它的工作原理`GET`：

```
 $.ajax({
     url: "/MyController/IsThingAllowed",
     type: "GET",
     data: { TargetID: id },
     dataType: "json",
     contentType: "application/json; charset=utf-8",
     success: function (data, textStatus, xhr) {

         updateThing(data);
     },
     error: function (xhr, textStatus, error) {

     }
 }); 
```

# c++ - 是 UB 访问“填充”字节吗？

> ID：14738407
> 
> 赞同：10
> 
> 时间：2013-02-06T20:43:10.300
> 
> 标签：c++, alignment, language-lawyer

如果我有这样的对象：

```
struct {
    uint32_t n;
    uint8_t c;
} blob {}; 
```

那么将有3个“填充”字节。

是 UB 访问填充字节吗？例如：

```
uint8_t * data = reinterpret_cast<uint8_t*>(&blob);
std::cout << data[4] << data[5] << data[6] << data[7]; 
```

我首先假设这可能是 UB，但如果这是真的，那么 memcpy 也将是 UB：

```
memcpy(buf, &blob, sizeof(blob)); 
```

我的具体问题是：

*   是 UB 访问填充字节吗？
*   如果不是，那么这是否意味着也定义了这些值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T20:52:48.273

No, it's not UB to access padding when the entire object has been zero-initialised (the standard says in §8.5/5 that padding is initialised to 0-bits when objects are zero-initialised) or value-initialised and it is not a class with a user-defined constructor.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:07:32.403

我认为，在适当的情况下，您最终可能会为此选择 UB。我在想的是你有 ECC 或奇偶校验检查的内存，其中 ecc/奇偶校验位是通过写入内存来设置的。如果在 [never waswritten to AT ALL] 之前没有使用过一块内存，并且您在填充字段中读取了未初始化的字节，那么当尚未写入的内存时，它可能会导致 ecc/parity 错误正在阅读。

当然，在这样的系统中，您可以通过在启动期间的某个时间点简单地执行“填充所有内存”来避免一大堆痛苦，因为这样做是不合时宜的：

```
struct Blob 
{
    uint32_t n;
    uint8_t c;
};

Blob *b = malloc(sizeof(Blob)*10);

for(int i = 0; i < 10; i++)
{
   b[i].n = i;
   b[i].c = i;
 }

 ...

 Blob a[3];

 memcpy(a, &b[1], sizeof(a));    // Copies 3 * Blob objects, including padding. 
```

现在，由于并非 b[x] 的所有位都已设置，它可能无法复制 memcpy 中的数据，因为奇偶校验/ecc 错误。那会很糟糕。但同时，不能强制编译器“设置”所有的填充区域。

我的结论是，这是UB，但除非有特殊情况，否则不太可能引起问题。当然，您会在很多代码中看到上述类型的`memcpy`代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T21:31:00.020

在 C 中，它不是未定义的行为。唯一一次访问未初始化的东西（例如对象中的填充）会导致未定义的行为，即对象具有自动存储持续时间并且从未使用过它的地址：

> 6.3.2.1.2：如果左值指定了一个可以使用寄存器存储类声明的自动存储持续时间的对象（从未使用过它的地址），并且该对象未初始化（未使用初始化程序声明并且没有分配给它已在使用前执行），则行为未定义。

但在这种情况下，您使用的是地址（带有`&`），因此行为是明确定义的（不会发生错误），但您可能会得到任何随机值。

在 C++ 中，所有的赌注都没有了，就像通常的情况一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T21:44:31.333

如果它不是未定义的行为，那么它肯定是实现定义的。虽然 C++ 标准不能保证你的程序做什么，但你的系统的 ABI 规范——如果你使用的是 Linux，则为[SysV——可以。](http://www.sco.com/developers/devspecs/)我怀疑如果你在填充位上胡闹，你可能更感兴趣的是你的程序将如何在你的系统上运行，而不是它在任何符合 C++ 的任意系统上的运行方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T22:05:21.190

POD 结构将存在于至少 sizeof(struct) 字节（包括任何填充字节）的连续内存块中。访问填充字节（如果它们存在）只有在没有首先初始化的情况下才会是 UB。

```
memset(&s, 0, sizeof(s)); 
```

这将初始化所有字节，包括填充。之后从填充中读取将不是 UB。

当然，`memset()`这是一种 C 主义，我们永远不会在 C++ 中这样做，对吧？

# mysql - 将值以 x 开头的行排在包含 x 的行之前

> ID：14738410
> 
> 赞同：0
> 
> 时间：2013-02-06T20:43:40.277
> 
> 标签：mysql, sql, database

我有这个 MySQL 查询：

```
SELECT
  id,
  title
FROM song
WHERE text IS NOT NULL
    AND title LIKE "%foo%"
ORDER BY title 
```

什么是在这里调整排序的好方法，以便那些以*开头* `foo`的行总是在那些只包含它的行之前？

换句话说，我希望那些`LIKE "foo%"`在那些之前`LIKE "%foo%"`，没有重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:47:21.153

您可以尝试以下方法。[我在SQL Fiddle](http://sqlfiddle.com/#!2/7e2aa/1)中尝试过，它可以工作。

```
SELECT
  id,
  title
FROM song
WHERE text IS NOT NULL
    AND title LIKE "%foo%"
ORDER BY CASE WHEN title LIKE "foo%" THEN 1 ELSE 2 END, title 
```

# visual-studio - 启动 Visual Studio 2012 时出错

> ID：14738417
> 
> 赞同：27
> 
> 时间：2013-02-06T20:43:53.367
> 
> 标签：visual-studio, visual-studio-2012

每次启动 Visual Studio 时都会收到一条错误消息。由于我在我的项目中也看到了一些无法解释的行为，我想解决这个问题。

**错误信息**

> 遇到异常。这可能是由扩展引起的。
> 
> 您可以通过检查文件“C:\Users\Jonathan\AppData\Roaming\Microsoft\VisualStudio\11.0\ActivityLog.xml”来获取更多信息。

当我查看日志文件时，我发现了两个异常：

**错误 1**

```
Exception Type       : System.Windows.Markup.XamlParseException
Exception Message    : Provide value on 'System.Windows.StaticResourceExtension' threw an exception.
Exception Stack Trace:
    at System.Windows.Markup.WpfXamlLoader.Load(XamlReader xamlReader, IXamlObjectWriterFactory writerFactory, Boolean skipJournaledProperties, Object rootObject, XamlObjectWriterSettings settings, Uri baseUri)
    at System.Windows.Markup.WpfXamlLoader.LoadBaml(XamlReader xamlReader, Boolean skipJournaledProperties, Object rootObject, XamlAccessLevel accessLevel, Uri baseUri)
    at System.Windows.Markup.XamlReader.LoadBaml(Stream stream, ParserContext parserContext, Object parent, Boolean closeStream)
    at System.Windows.Application.LoadComponent(Object component, Uri resourceLocator)
    at SquaredInfinity.VSCommands.UI.Views.DefaultAlertView.InitializeComponent()
    at SquaredInfinity.VSCommands.Foundation.Services.VSCUIService.GetDefaultAlertViewModel(String alertMessage, String alertDialogTitle)
    at SquaredInfinity.Foundation.Presentation.Services.UIService.GetDefaultAlertViewModel(String alertMessage)
    at SquaredInfinity.Foundation.Presentation.Services.UIService.ShowAlert(String message)
    at SquaredInfinity.VSCommands.VSCommandsPackage.Initialize()
Exception Data   : [EmptyOrNull]
Inner Exception:
Exception Type       : System.Exception
Exception Message    : Cannot find resource named 'VSC.Button'. Resource names are case sensitive.
Exception Stack Trace:    at System.Windows.StaticResourceExtension.ProvideValueInternal(IServiceProvider serviceProvider, Boolean allowDeferredReference)
                      at System.Windows.StaticResourceExtension.ProvideValue(IServiceProvider serviceProvider)
                      at MS.Internal.Xaml.Runtime.ClrObjectRuntime.CallProvideValue(MarkupExtension me, IServiceProvider serviceProvider)
Exception Data   : [EmptyOrNull] 
```

**错误 2**

```
System.ComponentModel.Composition.CompositionException: The composition produced a single composition error. The root cause is provided below. Review the CompositionException.Errors property for more detailed information.

1) The current type,    SquaredInfinity.Foundation.Configuration.Services.IConfigurationService, is an interface and cannot be constructed. Are you missing a type mapping?
Resulting in: Resolution of the dependency failed, type = "SquaredInfinity.Foundation.Configuration.Services.IConfigurationService", name = "(none)".
Exception occurred while: while resolving.
Exception is: InvalidOperationException - The current type, SquaredInfinity.Foundation.Configuration.Services.IConfigurationService, is an interface and cannot be constructed. Are you missing a type mapping?
-----------------------------------------------
At the time of the exception, the container was:
  Resolving SquaredInfinity.Foundation.Configuration.Services.IConfigurationService,(none)

Resulting in: An exception occurred while trying to create an instance of type '#Btb.#Rtb'.

Resulting in: Cannot activate part '#Btb.#Rtb'.
Element: #Btb.#Rtb -->  #Btb.#Rtb

Resulting in: Cannot get export '#Btb.#Rtb (ContractName="Microsoft.VisualStudio.Text.Classification.IClassifierProvider")' from part '#Btb.#Rtb'.
Element: #Btb.#Rtb (ContractName="Microsoft.VisualStudio.Text.Classification.IClassifierProvider") -->  #Btb.#Rtb

   at System.ComponentModel.Composition.Hosting.CompositionServices.GetExportedValueFromComposedPart(ImportEngine engine, ComposablePart part, ExportDefinition definition)
   at System.ComponentModel.Composition.Hosting.CatalogExportProvider.GetExportedValue(CatalogPart part, ExportDefinition export, Boolean isSharedPart)
   at System.ComponentModel.Composition.Hosting.CatalogExportProvider.CatalogExport.GetExportedValueCore()
   at System.ComponentModel.Composition.Primitives.Export.get_Value()
   at System.ComponentModel.Composition.ExportServices.GetCastedExportedValue[T](Export export)
   at System.ComponentModel.Composition.ExportServices.<>c__DisplayClass4`2.<CreateStronglyTypedLazyOfTM>b__1()
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.LazyInitValue()
   at System.Lazy`1.get_Value()
   at Microsoft.VisualStudio.Text.Utilities.GuardedOperations.InvokeMatchingFactories[TExtensionInstance,TExtensionFactory,TMetadataView](IEnumerable`1 lazyFactories, Func`2 getter, IContentType dataContentType, Object errorSource) 
```

我该如何解释这一点，以便找出错误？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-06T20:58:29.333

VSCommands 扩展或其他插件似乎有问题。您可以尝试禁用所有扩展，重新启动 Visual Studio 并重新启用它们；有时它可以解决此类问题。

您可以尝试的另一件事是以管理员身份运行 Visual Studio，因为如果没有足够的权限来访问某些资源（这是旧版本的 Visual Studio 中的错误），可能会发生此错误。

您最后的*痛苦*手段将是干净的重新安装。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-05-07T23:21:27.763

只需重新安装最新的 Web Essentials 5/5/2013。它解决了这个问题。无需卸载或禁用任何东西，只需再次运行安装程序即可完成。

[http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-09-17T23:40:11.357

通过删除以下文件夹修复：

> C:\Users{用户名}\AppData\Local\Microsoft\VisualStudio{版本号}\ComponentModelCache

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-24T19:34:43.123

此错误在安装 Visual Studio 2012 Update 2 后开始。显然，Web 工具和 Web Essentials 2012 扩展存在冲突——它们都尝试注册一些相同的组件，这会产生此异常。

此外，在安装 VS 2012 Update 2 时，这些扩展中的一个或两个的自动更新通知似乎被破坏，因为虽然扩展已更新以解决冲突，但您不会收到更新存在的通知。

解决方案是删除这两个扩展，然后重新安装它们。

有关这方面的更多信息，请参阅[http://madskristensen.net/post/web-tools-20122-and-web-essentials](http://madskristensen.net/post/web-tools-20122-and-web-essentials)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-12-04T19:45:45.183

我遇到了同样的错误。我注意到 NuGet 包管理器扩展有一个更新。安装此更新后，错误消失了。

确保应用了所有可用的更新。要检查是否有可用的更新，请打开工具 > 扩展和更新。在“扩展和更新”对话框中，展开左侧窗格中的“更新”节点。安装任何可用的更新并重新启动 Visual Studio 2012。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-11-04T17:17:47.653

对于所有遇到此问题的人：

1.  打开 Visual Studio 2012，但不加载任何解决方案/项目
2.  从*工具*菜单中打开*扩展和更新*
**   禁用 Web Essentials 2012*   删除解决方案的 .suo 文件*   在 Visual Studio 中打开解决方案*   看到它加载并且 Visual Studio 没有崩溃*   启用 Web Essentials 2012*   重新启动 Visual Studio 2012 并重新加载您的解决方案。*   快乐时光！*

 *[来源](http://www.robertgray.net.au/posts/updated-web-essentials-2012-and-now-visual-studio-2012-crashes#.VFkJqvnF-QB)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-06-11T09:31:28.853

解决上述问题所需要做的就是删除项目和 Visual Studio 的 *.suo 文件。我遇到过同样的问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-23T07:20:32.027

我也遇到了同样的错误：

> 遇到异常。这可能是由扩展引起的。
> 
> 您可以通过检查文件 'C:\Users\ 来获取更多信息。. . \VisualStudio\11.0\ActivityLog.xml'

### 原因：

我已经从控制面板卸载了一些 SQL 文件。只有在那之后我才开始收到这个错误，但我不确定我卸载了哪个服务。

### 解决方案：

我下载了[Visual Studio 2012 的 SDK](http://www.windowsazure.com/en-us/downloads/)并安装/重新启动了 Visual Studio，然后它工作正常。*

# c# - 使用 WebClient 登录 Pinterest（403 错误）

> ID：14738420
> 
> 赞同：0
> 
> 时间：2013-02-06T20:44:15.150
> 
> 标签：c#, webclient, http-status-code-403

所以我试图在 ASP.NET 页面中使用 WebClient 登录 Pinterest。这是我目前使用的 CookieWebAwareClient：

```
public class CookieAwareWebClient : WebClient
{
    public CookieAwareWebClient()
        : this(new CookieContainer())
    { }

    public CookieAwareWebClient(CookieContainer c)
    {
        this.CookieContainer = c;
        this.Headers.Add("User-Agent: Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.52 Safari/536.5");
    }

    public CookieContainer CookieContainer { get; set; }

    protected override WebRequest GetWebRequest(Uri address)
    {
        WebRequest request = base.GetWebRequest(address);
        if (request is HttpWebRequest)
        {
            (request as HttpWebRequest).CookieContainer = this.CookieContainer;
        }
        return request;
    }
} 
```

这是我用来登录的代码，首先执行 GET 请求以获取 csrf 令牌和他们使用的其他 _ch 值。

```
var client = new CookieAwareWebClient();
client.Encoding = Encoding.UTF8;

string html = client.DownloadString("https://pinterest.com/login/");

string csrftoken = GetCSRFToken(html);
string chtoken = GetCHToken(html);

var values = new NameValueCollection();
values.Add("email", HttpUtility.UrlEncode(MY_EMAIL));
values.Add("password",MY_PASSWORD);
values.Add("csrfmiddlewaretoken", csrftoken);
values.Add("_ch", chtoken);

// 403 Error happens below
client.UploadValues("https://pinterest.com/login/?next=%2Flogin%2F", values);

html = client.DownloadString("http://pinterest.com/settings"); 
```

我觉得我只是错过了一些小东西，但无法确定它是什么。

# c#-4.0 - 实体框架 4.0 和 5.0 Code First 提示使用 NOLOCK 的 IQueryable 查询

> ID：14738421
> 
> 赞同：3
> 
> 时间：2013-02-06T20:44:20.800
> 
> 标签：c#-4.0, visual-studio-2012, ef-code-first, entity-framework-5

我使用的是 EF 5.0 Code First。我们无法在每个读取查询上实现 nolock。请找到下面的代码。

我的模型：

```
public class UserType
{
    public UserType()
    {
        CreationDate = DateTime.Now;
        UpdatedDate = DateTime.Now;
        DeletedFlag = false;
    }
    public int UserTypeId { get; set; }
    public string UserTypeName { get; set; }

    public int CreatedBy { get; set; }
    public int UpdatedBy { get; set; }
    public DateTime CreationDate { get; set; }
    public DateTime UpdatedDate { get; set; }
    public bool DeletedFlag { get; set; }
} 
```

RepositoryBase：（我们使用的是存储库设计模式）

```
 public IQueryable<T> Query<T>() where T : class
    {
            return DataContext.Set<T>();
    } 
```

服务：

```
//TODO: place NOLOCK
repBase.Query<UserType>().Where(ja => ja.DeletedFlag == false).OrderByDescending(ja => ja.UpdatedDate).ToList(); 
```

repBase 是要在 Query() 之上调用的 DB 上下文的实例。

现在我们想用（NOLOCK）运行上面的查询。

Visual Studio 2012、EF 5.0 代码优先、C#.Net 4.0、MVC Web API、存储库设计模式

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T09:14:10.940

不支持。EF 永远不会在查询中发出，除了通过or`NOLOCK`执行直接 SQL 之外，没有其他方法可以做到这一点。如果你想通过 EF 生成，你可以下载 EF 源代码并修改其 SQL 生成引擎以添加提示。无论如何，您应该三思而后行地使用全局。`Database.SqlQuery``DbSet.SqlQuery``NOLOCK``NOLOCK`

# javascript - 仅在悬停时获取和设置元素的高度和宽度

> ID：14738423
> 
> 赞同：1
> 
> 时间：2013-02-06T20:44:27.677
> 
> 标签：javascript, jquery, jquery-hover

悬停时，以下代码获取子菜单面板中最高的列，并将所有列设置为相同的高度。它还获取所有列的宽度之和，并将列容器宽度设置为总和：

```
$(function() 
{
    $("#menu> li").hover(function () {
        var tallestColumnHeight = 0, submenuPanelTotalWidth = 0;
        $("ul.sub-menu-1 > li", this).each(function () {
            tallestColumnHeight = Math.max(tallestColumnHeight, $(this).height());
            submenuPanelTotalWidth += parseInt($(this).outerWidth(), 10);
        }).height(tallestColumnHeight);
        $("ul.sub-menu-1 > li", this).parent().width( submenuPanelTotalWidth );
   });  
}); 
```

现在上面的代码有很多开销，因为它在每次悬停时获取并设置高度和宽度两次。我想设置某种标志，以便计算只运行一次。

有任何想法吗？在这里使用 jQuery .data() 存储一次初始值然后检查数据是否设置是否明智？

非常感谢任何建议或帮助！

**更新**

用 mouseenter() 事件替换 hover() 并使用 one() 是最好的解决方案。

这是更新的代码：

```
$(function() 
{
$("#menu > li").one('mouseenter', function(e)   
{
    var tallestColumnHeight = 0,
        submenuPanelTotalWidth = 0;

    $("ul.sub-menu-1 > li", this).each(function ()
    {
        tallestColumnHeight = Math.max(tallestColumnHeight, $(this).height());
        submenuPanelTotalWidth += parseInt($(this).outerWidth(true), 10);
    }).height(tallestColumnHeight);

    $("ul.sub-menu-1 > li", this).parent().width( submenuPanelTotalWidth );     
}); 
   }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:48:53.663

```
$("#menu> li").hover(function (){

//your code

$("#menu> li").unbind('hover')
}); 
```

使用此代码，前提是您没有绑定到悬停功能的任何其他功能。这种解除绑定技术删除了与悬停事件关联的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:52:07.727

您可以将 eventHandler 函数保存在变量中，并使用保存的变量对元素调用 unbind。这将更有性能，因为处理程序函数将不再执行。

```
$(function()  {

  var hoverFunction = function () {
    var tallestColumnHeight = 0,
    submenuPanelTotalWidth = 0;

    $("ul.sub-menu-1 > li", this).each(function () {
      tallestColumnHeight = Math.max(tallestColumnHeight, $(this).height());
      submenuPanelTotalWidth += parseInt($(this).outerWidth(), 10);
    }).height(tallestColumnHeight);

    $("ul.sub-menu-1 > li", this).parent().width( submenuPanelTotalWidth );
    $("#menu> li").unbind('hover', hoverFunction);
  };

  $("#menu> li").hover();  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T21:36:39.623

您可以使用 jquery 的 .one() 函数。不幸的是，悬停不是真正的事件。相反，它应该被替换为 .one("mouseenter mouseleave",function()...

# rally - Rally Lookback API：任务状态值的不等式

> ID：14738424
> 
> 赞同：1
> 
> 时间：2013-02-06T20:44:34.853
> 
> 标签：rally, lookbackapi

当我在给定时间范围内请求任务对象的先前状态值小于“已完成”的所有快照时，我得到零结果。但是，如果我将不等式切换为大于“已完成”，我会得到预期的结果。我会假设状态“已定义”和“进行中”少于“已完成”。

```
_TypeHierarchy:"Task",    
"_PreviousValues.State":{$lt: "Completed"},
State: "Completed", 
```

上述查询在指定时间范围内返回 0 个结果。但是下面的查询在同一时间范围内返回 4137 个结果（注意，唯一的区别是不等式从小于到大于的切换）：

```
_TypeHierarchy:"Task",    
"_PreviousValues.State":{$gt: "Completed"},
State: "Completed", 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:01:54.153

问题是 LBAPI 当前并未将任务状态视为应有的下拉字段。我们将在其上输入缺陷。感谢您指出问题！

同时，您应该能够使用 '$ne: null' 或 '$in: ["Defined", "In-Progress"]' 获得所需的结果。

# sql - 查询回访用户、第一条记录和最后一条记录

> ID：14738426
> 
> 赞同：1
> 
> 时间：2013-02-06T20:44:48.323
> 
> 标签：sql, sql-server, sql-server-2008

我正在尝试编写一个查询，显示我们的唯一用户、他们在系统中第一次记录条目的日期以及他们最后一次记录条目的日期。它们分为两个表：用户表和日志表。

用户：

```
| Userid | Username    |
|--------|-------------|
|20      | Tom Smith   |
|21      | Jim Jones   |
|22      | Sandy Brown | 
```

日志：

```
| Logid | UserID  | Date       | Value        |
--------|---------|------------|--------------|
| 1     | 21      | 01/03/2013 | Login        |
| 2     | 22      | 01/04/2013 | Login        |
| 3     | 21      | 01/05/2013 | Edit         |
| 4     | 20      | 01/06/2013 | Login        |
| 5     | 20      | 01/07/2013 | Search       |
| 6     | 22      | 01/08/2013 | Login        |
| 7     | 21      | 01/09/2013 | Close        |
| 8     | 21      | 01/11/2013 | Login        |
| 9     | 20      | 01/12/2013 | Edit         |
| 10    | 22      | 01/13/2013 | Search       | 
```

这是我尝试编写的查询的预期结果：

```
|Userid | UserName    | First Log Date | Last Log Date |
|-------|-------------|----------------|---------------|
| 20    | Tom Smith   | 01/06/2013     | 01/12/2013    |
| 21    | Jim Jones   | 01/03/2013     | 01/11/2013    |
| 22    | Sandy Brown | 01/04/2013     | 01/13/2013    | 
```

到目前为止，我有前两列，但是我无法弄清楚第一个和最后一个日期列，下面是我到目前为止的查询：

```
select 
    distinct(u.userid1) as 'Userid',
    u.username as 'UserName'
from 
    users u,
    log l
where
    u.userid = l.userid 
```

我正在使用 SQL Server 2008。我希望得到一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:47:19.937

只需获取每条记录的日期`min`和`max`。

```
select 
    u.userid as [Userid],
    u.username as [UserName],
    min([Date]) as [First Log Date],
    max([Date]) as [Last Log Date]
from users u 
inner join log l on u.userid = l.userid
group by u.userid, u.username 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:48:51.583

您只需要应用一个聚合函数来获取`min`和`max`日期，然后`group by u.userid, u.username`：

```
select u.userid as 'Userid',
  u.username as 'UserName',
  min(l.date) FirstDate,
  max(l.date) lastDate
from users u
inner join log l
  on u.userid = l.userid
group by u.userid, u.username 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/5e712/4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T20:49:12.810

你只需要一个`group by`：

```
select u.userid, u.username,
       MIN(date) as FirstLogDate, MAX(date) as MaxLogDate
from users u join
     log l
      on u.userid = l.userid
group by u.userid, u.username 
```

# php - .htaccess 更改自身 - 导致 500 内部服务器错误

> ID：14738429
> 
> 赞同：4
> 
> 时间：2013-02-06T20:44:57.467
> 
> 标签：php, .htaccess, wordpress, internal-server-error

我在 .htaccess 更改自身并在我的网站上导致 500 - Internal Server Errors 时遇到问题。这种变化每隔一天左右发生一次。

我的原始 .htaccess 文件如下所示：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

在它改变自己之后，它看起来像这样：

```
# BEGIN WordPress<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

本质上，这一行被移到了上面一行的末尾：

```
<IfModule mod_rewrite.c> 
```

我们的网站几周前被黑客入侵并用于网络钓鱼。我们的主机将其关闭，我们进行了更改，他们认为这些更改足以重新打开我们的网站。我们变了...

*   更新到最新版本的 Wordpress（我们通常是最新的，但晚了几天）。

*   安装了两个安全插件（Better WP Security 和 Bulletproof Security）。

*   以及删除我们认为可能导致漏洞的论坛插件。

*   这两个安全插件现已被删除。

*   我现在更改了 htaccess 文件的权限

我们真的不能让我们的网站再次宕机（500 服务器错误）。有什么我错过的可能导致 .htaccess 改变的吗？注意：当我将更改后的 htaccess 文件替换为原始文件时，它修复了 500 服务器错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:10:42.713

快速浏览一下您的两个安全插件，Bulletproof Security 对您的 .htaccess 文件做了很多改动。就个人而言，我永远不会让插件接触 .htaccess，因为如果插件中存在任何错误，它可能会导致您的站点因 500 服务器错误而下线。

在禁用 Bulletproof Security 后，我会查看插件在 .htaccess 中尝试执行的操作并手动将其添加到文件中。

或者，您可以尝试在初始注释和以下行之间添加一个额外的行空间，如下所示：

```
# BEGIN WordPress

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

最后，您可以完全取消“IfModule”，因为您知道它已安装在您的服务器上：

```
# BEGIN WordPress

RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T16:26:50.220

该问题可能是由两个安全插件之间的交互引起的。也许禁用其中一个可以解决问题。

保护您的 htaccess 的另一种方法是将其分配给 root 用户（如果您被允许）和/或使其只读。当然它并没有解决根本问题，但至少包含了效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-14T07:39:46.490

我有同样的问题，但我终于发现`.htaccess`文件编码应该保持默认`ANSI`，错误只是因为我将其编码更改为`UTF8`.

# ruby-on-rails - 大写 API

> ID：14738434
> 
> 赞同：1
> 
> 时间：2013-02-06T20:45:15.730
> 
> 标签：ruby-on-rails

有没有很好的 API 或服务可以很好地处理大小写？它应该能够处理诸如“我需要帮助尽快修复我的 iPhone”之类的输入，以及“我需要帮助尽快修复我的 iPhone”的期望输出。

编辑：这与titleize一起使用。Titleize 不处理诸如“iPhone”之类的词和首字母缩略词。我目前正在获得像“ceo”这样的用户输入，并且当我想要“CEO”时，titleize 返回“Ceo”。我不想写一个特殊大写的列表，特别是如果有一个好的替代方案。

另一种选择是单词库和正确的大小写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:48:21.650

看看[`#titleize`](http://apidock.com/rails/ActiveSupport/Inflector/titleize)在`ActiveSupport::Inflector`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:48:29.490

```
"man from the boondocks".titleize   # => "Man From The Boondocks"
"x-men: the last stand".titleize    # => "X Men: The Last Stand"
"TheManWithoutAPast".titleize       # => "The Man Without A Past"
"raiders_of_the_lost_ark".titleize  # => "Raiders Of The Lost Ark" 
```

[从http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-titleize](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-titleize)剪切和粘贴

# javascript - window.attachEvent 似乎在 IE8 中不起作用

> ID：14738435
> 
> 赞同：2
> 
> 时间：2013-02-06T20:45:17.727
> 
> 标签：javascript, internet-explorer-8, dom-events

首页：

```
...
<script>
if (window.addEventListener) {
 // addEventListener equivalent of code below
} else if (window.attachEvent) {
 window.attachEvent("message", function(e) {
  if (e.origin != "page2.html") { return; }
  alert(e.data);
 });
}
</script>

<iframe src="page2.html"></iframe> 
```

page2.html：

```
<script>
var message = "hello!";
parent.postMessage(message, '*');
</script> 
```

此代码在 Chrome、Firefox 和 Opera 中运行良好。当然 IE 有自己的做事方式，所以尽管使用了自己的`.attachEvent`.

page2.html 实际上是另一个域上的页面；我正在发送正确的 P3P 标头（没关系，但就是这样）。

我如何找出为什么`postMessage`似乎没有到达父页面？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T20:47:15.923

`attachEvent`以 形式获取其事件名称`"onmessage"`，而不是`addEventListener`（使用`"message"`）

# c++ - 将成员函数作为参数传递

> ID：14738436
> 
> 赞同：2
> 
> 时间：2013-02-06T20:45:30.020
> 
> 标签：c++, pointers

假设我在一个类中有这个公共方法：

```
uli returnSum()
{
    for_each(i, j, doSum);
    return this->sum;
} 
```

`void doSum(short int y)`是同一类的私有方法。我如何将它作为参数传递给 for_each？

使用上面的语法，我得到`error: must use .* or ->* to call pointer-to-member function in __f (...)'`. 两者都`this->*doSum`不起作用。

我读了一些关于创建指向该成员函数的指针并将其作为参数传递的内容，但我不太确定该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:03:10.067

看看下面的例子：

```
#include <iostream>
using namespace std;

class Test {
  public:
    int fun1(int x) { return x+1; }
};

typedef int (Test::*PtrType)(int);

void call(Test& self, PtrType prt) {
    cout << (self.*ptr)(2) << endl;
}

int main() {
    Test t;
    call(t, &Test::fun1);
    return 0;
} 
```

该行为`typedef int (Test::*PtrType)(int);`类方法定义了类型的简单名称。括号`(Test::*PtrType)`很重要；`PtrType`是新定义的类型（尽管您可以不使用 typedef，并将整个签名放在`call`函数参数中，但强烈建议不要使用这种方法）。

该表达式`(self.*ptr)(2)`调用您的指针指向的方法`ptr`，并将 2 作为其参数传递。同样，关键点是在 . 周围加上括号`(self.*ptr)`。

`&`最后要记住的一点是，在设置指针 ( ) 的值时不能跳过`&Test::fun1`，即使使用常规函数也是如此。

如果您使用模板，您可以使您的代码更整洁：

```
template <typename PtrT>
void call(Test& self, PtrT ptr) {
    cout << (self.*ptr)(2) << endl;
} 
```

在这种情况下不需要 typedef，但是，您仍然必须记住调用中的括号。

如果您使用新的 C++0x 标准进行编译，则可以使用`std::function`或`std::bind`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T20:50:12.220

你可以像这样使用std::bind

```
std::for_each(i, j, std::bind(&MyClass::doSum, this)); 
```

# html - 包含的开放 SGML 节点的正则表达式 , , 和 标签

> ID：14738439
> 
> 赞同：1
> 
> 时间：2013-02-06T20:45:47.763
> 
> 标签：html, xml, regex, sgml

我有一些 SGML，我试图通过在开始标签中添加结束标签来清理它们。现在，文档的结构如下：

```
<CAT>
<NAME>Daniel
<COLOR>White
<DESC>Daniel is a white cat <p>He was born in July</p><br />He's super cute.<p><br />He does not have any siblings.
<COUNTRY>USA
</CAT> 
```

到目前为止，我可以匹配一个打开的标签并使用这个正则表达式将内容捕获为一个组： `<NAME>([^\\<]+)[^<]`如果内容区域内没有任何`<p>`、、`</p>`或`<br />`元素。

但是如果我这样做 `<DESC>([^\\<]+)[^<]`了，模式匹配会在第一个之前停止`<p>`

我使用`<`模式结束的原因是因为所有其他打开的节点都没有停止匹配的 html 元素

如何制作一个匹配`<DESC>`包含`<p>`、`</p>`和在节点`<br />`之前结束的`<COUNTRY>`节点的正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:47:52.357

这个怎么样：

```
<DESC>((?:</?p>|<br />|[^\\<])+) 
```

这允许这三个标签匹配并在`<`不属于三个标签之一的下一个标签处停止。

顺便说一句，您为什么不允许反斜杠作为有效字符？

# spring - Spring 上下文：property-placeholder 无法解析嵌套变量

> ID：14738442
> 
> 赞同：0
> 
> 时间：2013-02-06T20:45:52.887
> 
> 标签：spring, spring-integration

我有两个项目——project-web 和 project-service，它们都使用 Spring core 3.1.3 并具有从相应属性文件加载属性的配置：

project-web -- 基于 Spring 集成的项目，在其 spring 配置文件中：

```
<context:property-placeholder location="WEB-INF/spring-integration/spring-integration.properties" ignore-resource-not-found="true" />    
<import resource="classpath*:META-INF/spring/applicationContext.xml" /> 
```

其中导入是包含来自 project-service 的 spring 配置文件，并且在 project-service 项目中，我进行了以下配置：

```
<context:property-placeholder location="classpath:META-INF/application.properties, classpath:META-INF/db.properties"  ignore-resource-not-found="true"/>
<import resource="classpath:META-INF/spring/applicationContext-data.xml"/> 
```

在 applicationContext-data.xml 中包含 DAO 的 Spring 配置的导入我有：

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
       <property name="driverClassName" value="${db.${db.type}.driver}" />
       <property name="url" value="${db.${db.type}.url}"/>
       <property name="username" value="${db.${db.type}.username}" />
       <property name="password" value="${db.${db.type}.password}" />       
    </bean> 
```

当我为项目服务运行单元测试时，一切都很好，所有变量都正确解析，没有任何问题。但是当我运行 project-web 时（project-service 将作为 .jar 文件包含在 project-web 的 WEB-INF/lib 文件夹中），它在启动过程中抛出错误，说 can't resolve ${db.type }：

org.springframework.beans.factory.BeanDefinitionStoreException：在类路径资源 [META-INF/spring/applicationContext-data.xml] 中定义的名称为 'dataSource' 的 bean 定义无效：无法解析字符串值中的占位符 'db.type' db.${db.type}.driver”在 org.springframework.beans.factory.config.PlaceholderConfigurerSupport.doProcessProperties(PlaceholderConfigurerSupport.java:209) ~[spring-beans-3.1.3.RELEASE.jar:3.1.3\. RELEASE] 在 org.springframework.context.support.PropertySourcesPlaceholderConfigurer.processProperties(PropertySourcesPlaceholderConfigurer.java:174) ~[spring-context-3.1.3.RELEASE.jar:3.1.3.RELEASE] 在 org.springframework.context.support。 PropertySourcesPlaceholderConfigurer.postProcessBeanFactory(PropertySourcesPlaceholderConfigurer.java:151) ~[spring-context-3.1.3.RELEASE.jar:3.1.3\. 发布] ....................

注意：我不能在 project-web 中声明所有内容，因为 project-service 也会被其他项目使用。任何人都知道为什么在项目服务中单独运行但在项目网络中包含时不起作用？它无法解析嵌套变量 ${db.type}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:06:52.050

问题是您的第一个`PropertyPlaceHolderConfigurer`正在尝试解决需要由第二个解决的占位符。

您可以为每个使用不同的前缀（例如`!{`，而不是`${`其中一个），或设置

`ignore-unresolvable="true"`

在第一个 - 然后它将把决议留给另一个。

# ios - 图像视图在滚动视图中隐藏导航栏

> ID：14738445
> 
> 赞同：0
> 
> 时间：2013-02-06T20:45:59.143
> 
> 标签：ios, xcode, ipad

在我的 ipad 应用程序中，滚动视图中有一个导航栏和一个图像视图。
当我运行我的应用程序时，图像视图会隐藏导航栏。
所以，我删除图像视图并再次运行，然后我看到导航栏。但是，我无法单击导航栏中的按钮。请告诉我我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:22:45.737

注意视图的层次结构，如果 UIScrollView 在视图之上，那么它后面的任何视图都不会收到任何触摸事件。使用 XIB 添加的导航栏是主视图中子视图的一部分，因此您必须在导航栏下启动 UIScrollView，y = 44

```
ScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 44, self.view.frame.size.width,self.view.frame.size.height-44)]; 
```

并且不要忘记从 ScrollView 高度减去 44 以适应屏幕。

# docx4j - 如何使用 docx4j 从 docx 文件中删除所有评论？

> ID：14738446
> 
> 赞同：4
> 
> 时间：2013-02-06T20:46:00.117
> 
> 标签：docx4j

我想使用 docx4j 从 docx 文件中删除所有评论。

我可以使用如下所示的一段代码删除实际评论，但我认为我还需要从主文档部分删除评论引用（否则文档已损坏），但我不知道如何要做到这一点。

```
CommentsPart cmtsPart = wordMLPackage.getMainDocumentPart().getCommentsPart();
org.docx4j.wml.Comments cmts = cpart.getJaxbElement();
List<Comments.Comment> coms = cmts.getComment();
coms.clear(); 
```

任何指导表示赞赏！

我还在 docx4j 论坛上发布了这个问题：http: [//www.docx4java.org/forums/docx-java-f6/how-to-remove-all-comments-from-docx-file-t1329.html](http://www.docx4java.org/forums/docx-java-f6/how-to-remove-all-comments-from-docx-file-t1329.html)。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T09:21:21.423

您可以使用 TraversalUtil 查找相关对象（CommentRangeStart、CommentRangeEnd、R.CommentReference），然后将其删除。

```
import java.util.ArrayList;
import java.util.List;

import javax.xml.bind.JAXBElement;

import org.docx4j.TraversalUtil;
import org.docx4j.TraversalUtil.CallbackImpl;
import org.docx4j.XmlUtils;
import org.docx4j.openpackaging.packages.WordprocessingMLPackage;
import org.docx4j.openpackaging.parts.WordprocessingML.MainDocumentPart;
import org.docx4j.wml.Body;
import org.docx4j.wml.CommentRangeEnd;
import org.docx4j.wml.CommentRangeStart;
import org.docx4j.wml.ContentAccessor;
import org.docx4j.wml.R.CommentReference;
import org.jvnet.jaxb2_commons.ppp.Child;

public class Foo {
public static void main(String[] args) throws Exception {

    WordprocessingMLPackage wordMLPackage = WordprocessingMLPackage
            .load(new java.io.File(System.getProperty("user.dir") + "/Foo.docx"));
    MainDocumentPart documentPart = wordMLPackage.getMainDocumentPart();

    org.docx4j.wml.Document wmlDocumentEl = (org.docx4j.wml.Document) documentPart
            .getJaxbElement();
    Body body = wmlDocumentEl.getBody();

    CommentFinder cf = new CommentFinder();
    new TraversalUtil(body, cf);

    for (Child commentElement : cf.commentElements) {
        System.out.println(commentElement.getClass().getName());
        Object parent = commentElement.getParent();
        List<Object> theList = ((ContentAccessor)parent).getContent();
        boolean removeResult = remove(theList, commentElement );
        System.out.println(removeResult);
    }   
}

private static boolean remove(List<Object> theList, Object bm)  {
    // Can't just remove the object from the parent,
    // since in the parent, it may be wrapped in a JAXBElement
    for (Object ox : theList) {
        if (XmlUtils.unwrap(ox).equals(bm)) {
            return theList.remove(ox);
        }
    }
    return false;
}

static class CommentFinder extends CallbackImpl {

    List<Child> commentElements = new ArrayList<Child>();

    @Override
    public List<Object> apply(Object o) {

        if (o instanceof javax.xml.bind.JAXBElement
                && (((JAXBElement)o).getName().getLocalPart().equals("commentReference")
                        || ((JAXBElement)o).getName().getLocalPart().equals("commentRangeStart")
                        || ((JAXBElement)o).getName().getLocalPart().equals("commentRangeEnd")                                      
                        )) {
                System.out.println(((JAXBElement)o).getName().getLocalPart());
                commentElements.add( (Child)XmlUtils.unwrap(o) );
            } else 
        if (o instanceof CommentReference || 
            o instanceof CommentRangeStart || 
            o instanceof CommentRangeEnd) {
            System.out.println(o.getClass().getName());
            commentElements.add((Child)o);
        }
        return null;
    }

        @Override // to setParent
        public void walkJAXBElements(Object parent) {

            List children = getChildren(parent);
            if (children != null) {

                for (Object o : children) {

                    if (o instanceof javax.xml.bind.JAXBElement
                            && (((JAXBElement)o).getName().getLocalPart().equals("commentReference")
                                    || ((JAXBElement)o).getName().getLocalPart().equals("commentRangeStart")
                                    || ((JAXBElement)o).getName().getLocalPart().equals("commentRangeEnd")                                      
                                    )) {

                        ((Child)((JAXBElement)o).getValue()).setParent(XmlUtils.unwrap(parent));
                    } else {                        
                        o = XmlUtils.unwrap(o);
                        if (o instanceof Child) {
                            ((Child)o).setParent(XmlUtils.unwrap(parent));
                        }
                    }

                    this.apply(o);

                    if (this.shouldTraverse(o)) {
                        walkJAXBElements(o);
                    }

                }
            }
        }           
    } 
```

}

# android - NoSuchMethodError 在同一个 APK 中调用类的构造函数

> ID：14738450
> 
> 赞同：0
> 
> 时间：2013-02-06T20:46:07.593
> 
> 标签：android, apk

我正在开发一个在尝试`new`某个类时抛出 NoSuchMethodError 的应用程序。代码看起来像这样......

```
Bar bar = new Bar(Bar.Type.WHATEVER, 1f); 
```

...错误是...

```
Caused by: java.lang.NoSuchMethodError: com.foo.Bar.<init> 
```

我在网上看到的所有内容都与针对库的一个版本进行编译并使用没有相同方法/签名的另一个版本运行有关。但是，在我的情况下，有问题的类在一个 JAR 中，其类正在应用程序的 APK 中导出。所以不应该在运行时使用不同版本的类，对吧？

最近更改的构造函数参数，`Bar`因此我执行了以下操作来验证更改是否已进入 APK：

1.  打开APK并提取classes.dex
2.  使用 dex2jar 将 DEX 转换为 JAR
3.  打开 JAR 并提取有问题的类。
4.  使用 jclasslib 检查类并验证构造函数是否存在。我懂了`<init>(Lcom/foo/Bar$Type;F)`

在这一点上，我很困惑。有谁知道可能导致此错误的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:16:14.143

我让应用程序再次运行，我相信问题是项目使用的一个 jar，它是使用 Bar 的（现已过时的）版本构建的。假设我的应用程序依赖于 jar X（包括 Bar）和 Y（使用 Bar）。我知道 Bar 的签名最近发生了更改，并且我可以看到更改正在进入 APK。但我没有意识到jar Y 使用了 Bar 并且最近没有重建。由于抛出的异常只提到了方法名称—— `<init>`（构造函数）——而不是参数，我没有意识到 Bar 试图使用（现在不存在的）默认构造函数来构造。

# c++ - 抛出异常是谁的责任？操作系统还是进程？

> ID：14738451
> 
> 赞同：17
> 
> 时间：2013-02-06T20:46:10.273
> 
> 标签：c++, exception, exception-handling, operating-system, cpu

**从操作系统的角度来看，异常是如何工作的？**

来自 C++，我可以从程序员的角度理解异常。
当抛出异常时，堆栈开始展开，每个激活记录都有机会捕获和处理异常。

**但是首先抛出异常是谁的责任呢？**

1.  是操作系统向进程发送触发器，告诉它进入“异常处理状态”吗？
2.  进程是否在它自己的程序空间中调用和处理异常，对操作系统来说是不发音的？

这里有两个崩溃的程序说明了我的不确定性。

```
int main(){

    int i = 1/0; //did the OS tell the process to end?

    return 0;
} 
```

* * *

```
#include <exception>

int main(){

    throw 11;  //did the process tell the OS it needs to end?

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T20:57:08.697

C++ 异常是语言的一部分，由语言标准定义，并由编译器和运行时库实现。CPU 检测到的还有其他`exceptions`，例如除以零或取消引用 NULL 指针，两者都是语言标准中[未定义行为的示例。](http://blog.regehr.org/archives/213)这些`faults`在处理器术语中，例如在 x86 上触发 a`fault handler`然后由操作系统提供服务。然后，操作系统可以选择将该故障报告给导致它的进程，在 Unix 上，这是使用`signals`. `signal handler`例如，如果您的进程安装了一个`SIGSEGV`，它可以处理当进程取消引用 NULL 指针时由 CPU 生成的错误......该机制与该语言定义的 C++ 异常是分开的。

在您的示例中，当 C++ 程序`throws`出现异常时，这完全由编译器生成的代码和语言运行时库处理，不需要内核调用，处理器也不会产生硬件故障。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-06T20:54:34.917

您正在谈论两个完全不同的异常过程。

第一个是由操作系统提供的。在 Windows 中，您可以使用[`__try`和`__except`](http://msdn.microsoft.com/en-us/library/s58ftw19(v=vs.80).aspx)处理它们。

第二个由 C++ 编译器提供，不以任何方式涉及操作系统。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-06T20:56:39.290

由于我只知道一两个用 C++ 编写的操作系统，而我更了解的操作系统根本没有正式使用异常，这几乎排除了操作系统抛出的异常。

三个主要操作系统（Linux、Windows、MacOS X）以及所有形式的 Unix（AIX、Solaris、HP-UX 等）都是用 C 编写的，以及几乎所有其他非汇编语言编写的商用操作系统，所以不能抛出 C++ 类型的异常[这并不是说没有软件驱动的异常，只是它们不是你在 C++ 中用“try/catch”捕获的异常类型，没有某种翻译]。

在第一个示例中，操作系统肯定涉及[在我知道它们如何工作的所有操作系统中]，因为除以零会在所有具有除法功能的机器上导致硬件异常，因此需要涉及操作系统。此外，无论是 C++、C 还是您在汇编程序中编写相同的东西，这都会以相同的方式编译和失败。对于大多数操作系统，它们会向程序发送信号，但由于您没有处理信号的代码，您的代码很可能会简单地中止，告诉操作系统发生了一些奇怪的事情并且它正在放弃，甚至懒得放松堆栈。

在第二种情况下，根本不涉及操作系统。对 main 的调用周围有一个“try-catch”块，上面写着“糟糕，有人扔了一些没有被抓住的东西，让我们退出吧”。涉及操作系统的唯一部分是“退出此进程”，这当然需要由操作系统完成，尽管我相信大多数操作系统，只是从“应用程序的起始地址”返回也将有同样的效果。

# mysql - 如何在 MYSQL 中匹配编码的变音符号？

> ID：14738452
> 
> 赞同：1
> 
> 时间：2013-02-06T20:46:12.617
> 
> 标签：mysql, sql

在一个将近十年前的项目中，我们在一个带有 html 实体的 MYSQL 数据库中编码了变音符号。今天所有这些似乎都很奇怪，但尽管如此。使用此数据库的应用程序实现了搜索功能，我的问题是当搜索的字符串包含变音符号时搜索无法正常工作。像：`"f&uuml;r"`

简化的 MySQL 查询如下所示：

```
SELECT kunstwerk. * , kategorie.published, kategorie.bezeichnung
FROM kunstwerk
LEFT JOIN kategorie ON SUBSTRING( kategorie, 1, 7 ) = kategorie_Nr
WHERE published = 'true'
AND published_veto <> 'false'
AND MATCH (titel_DE)
AGAINST (
  '+f&uuml;r '
  IN BOOLEAN MODE
)
ORDER BY kategorie 
```

我的问题是它匹配任何包含的内容，`"&uuml;"`而不管`"f&uuml;r"`.

这是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:11:34.427

我不是 100% 确定这里会发生什么，但 mySQL 显然在`&`和`;`控制字符上窒息。（我怀疑它最终只搜索`uuml`部分）。

无论如何，将术语用引号括起来会有所帮助：

```
AGAINST (
  '+"f&uuml;r" '
  IN BOOLEAN MODE
) 
```

# windows-phone-7 - 数据模板中的 Windows Phone 动态布局

> ID：14738453
> 
> 赞同：0
> 
> 时间：2013-02-06T20:46:18.113
> 
> 标签：windows-phone-7, windows-phone-8

我需要在列表框项目内有一个动态布局。

这种布局的例子是 Facebook 上的新闻提要。为简化起见，让我们将其缩小为一种新闻项目类型：有人添加了 N 张照片。我已经有了一种算法，可以采用图像大小并产生最佳布局。

*   我不希望有 20 张具有绑定宽度、高度、边距、可见性的图像。

*   我必须启用虚拟化。

这在 Windows 手机平台上如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:00:12.697

最简单的方法：

将 ItemsControl 放在列表框项内。按照布局算法的要求设置 ItemsControl 的宽度和高度。将 ItemsPanel 设置为网格。在数据模板中，放置一个图像，按照布局算法告诉您设置边距。

图像不会被虚拟化，列表框项（包含带有图像的整个 ItemsControl）会。

最正确的方法（仅当您有许多图像和/或大图像以使单个项目超过 2048 像素时才需要）：

从例如 VirtualizingStackPanel 继承，覆盖 MeasureOverride 和 ArrangeOverride 以实现您的自定义布局，然后花费大约 2-10 天修复代码中与虚拟化相关的问题。这种方式虚拟化了一切，但是时间是估计的（我自己从来没有做过），我不能保证你最终会成功。

中间方法：重新设计布局算法，使其在行中布局图像。使用单个虚拟化列表框或 ItemsControl，将您的项目分成更小的行，每行包含单行图像。

# c - 为什么 fscanf 不扫描行尾的整数？

> ID：14738457
> 
> 赞同：0
> 
> 时间：2013-02-06T20:46:29.407
> 
> 标签：c, scanf

我正在尝试读取包含多行表单的文件：

```
www.someurl.com,timestamp 
```

我正在使用以下代码：

```
char url[256];
unsigned int timestamp;

// Read each line from the input file.
while(fscanf(inputfile, "%s,%d", url, &timestamp) == 2) {
    printf("%s was visited at %d\n", url, timestamp);
} 
```

但是，`fscanf`将整行扫描成字符串，而不将时间戳扫描成整数。我确定这是一个非常基本的错误，但我无法弄清楚。有人可以解释这是为什么，以及我该如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T20:49:48.717

处理时`%s`，`fscanf`需要一个以空格结尾的字符串，而且它也是贪婪的。所以整行被读入url。

可以直接指定禁止字符集：

```
fscanf(inputfile, "%[^,],%d", url, &timestamp) 
```

[这里](http://en.cppreference.com/w/cpp/io/c/fscanf)有更多关于`fscanf`变体和格式字符串的数据。

# php - 获取登录用户信息 - 调用未定义函数 (2)

> ID：14738460
> 
> 赞同：1
> 
> 时间：2013-02-06T20:46:38.713
> 
> 标签：php, wordpress, function, call, undefined

我重新发布这个问题是因为问题没有解决。在相关问题中，以下答案可能是解决方案。

> 显然，这是因为包含该函数的文件 /wp-includes/pluggable 直到加载插件后才会加载。它的确是。因此，将你正在做的任何事情都包装在一个函数中，并将其挂接到 plugins_loaded 或 init 钩子上。（参见 wp-settings.php 文件）

我到底在哪里写 add_action('plugins_loaded','my_function'); 命令？在“wp-settings 文件”中，“pluggable”还是我自己的 php 文件？我想做的就是在 php 文件中显示用户信息，该文件加载到 wordpress 的页面中，但我不断收到相同的错误“调用未定义的函数”。我已经尝试包含相关的 php 文件，但仍然无法正常工作。

```
 <?php 
 global $current_user;
 get_currentuserinfo();
 echo $current_user->user_login;
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-30T08:43:35.570

这可能对你有用！

```
require (ABSPATH . WPINC . '/pluggable.php');
global $current_user;
get_currentuserinfo();
echo $current_user->user_login; 
```

你所做的就是在你的插件中包含pluggable.php 文件。

# fullcalendar - fullCalendar - 根据某些标准将图像添加到事件中的任何方式？

> ID：14738462
> 
> 赞同：0
> 
> 时间：2013-02-06T20:46:43.213
> 
> 标签：fullcalendar

我有一个事件填充我的完整日历，我想为一些符合特定条件的事件添加一个图标。例如，我的日历事件表示将添加到路线的工作订单。因此，如果工作订单在路线中，我希望代表该工作订单的事件在标题中有一个图标，表示它是路线的一部分。

我可以更改活动的颜色，但我想要的不仅仅是颜色。我要求太多了吗？这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-27T10:53:33.090

```
eventRender: function(event, element, calEvent) {
        element.find(".fc-event-title").after($("<span class=\"fc-event-icons\"></span>").html("<img src=\"images/on1.jpg\" />"));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:13:06.373

你当然可以。您可以在其中`eventRender`查找和操作`.fc-event-title`（请注意，一些“短”事件可能没有此标记），或者只是添加一个具有图像背景的类，或者添加一个 dingbat（此处为项目符号），例如：
`.fcimg .fc-event-title:before {content: "\025cf\00020";}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T11:01:32.480

您还可以在 DayEventRenderer.js 文件中的插件中进行一些修改 goto " `daySegHTML`" 函数，并在条件之后`if (!event.allDay && seg.isStart)`（即事件 div itslef 的开始）插入以下语句：

```
if (event.imgSource != '')
            html += "<div><img src='" + event.imgSource + "' style='display:inline;width:2.0em;height:2.0em;margin-bottom:0.5em'></div>"; 
```

请注意，这`event.imgSource`不是内置事件属性，但您必须在提供事件数据时提供它。

因此，如果您不提供`event.imgSource`任何内容，则不会包含任何内容，如果您提供图像源，它将自动添加它。

希望这能解决问题:)

# objective-c - Objective-C 中的非均匀随机数

> ID：14738463
> 
> 赞同：4
> 
> 时间：2013-02-06T20:46:48.423
> 
> 标签：objective-c, c, random

我想计算范围内的非均匀分布的随机数`[0, n - 1]`。所以最小可能值为零。最大可能值为 n-1。我希望最小值最常出现，最大值相对不频繁出现，两者之间的近似线性曲线（高斯也很好）。**我如何在 Objective-C 中做到这一点？（可能使用基于 C 的 API）**

我目前的想法的一个非常粗略的草图是：

```
// min value w/ p = 0.7
// some intermediate value w/ p = 0.2
// max value w/ p = 0.1
NSUInteger r = arc4random_uniform(10);
if (r <= 6) 
    result = 0;
else if (r <= 8)
    result = (n - 1) / 2;
else
    result = n - 1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:56:03.363

如果您尝试将返回值平方`arc4random_uniform()`（或将它们中的两个相乘）怎么办？

```
int rand_nonuniform(int max)
{
    int r = arc4random_uniform(max) * arc4random_uniform(max + 1);
    return r / max;
} 
```

我已经快速编写了一个示例程序来测试它，它看起来很有希望：

```
int main(int argc, char *argv[])
{
    int arr[10] = { 0 };

    int i;
    for (i = 0; i < 10000; i++) {
        arr[rand_nonuniform(10)]++;
    }

    for (i = 0; i < 10; i++) {
        printf("%2d. = %2d\n", i, arr[i]);
    }

    return 0;
} 
```

结果：

```
0\. = 3656
1\. = 1925
2\. = 1273
3\. = 909
4\. = 728
5\. = 574
6\. = 359
7\. = 276
8\. = 187
9\. = 113 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:57:12.610

我认为你基本上走在正确的轨道上。可能存在精度或范围问题，但一般来说，如果您想随机选择 3、2、1 或 0，并且您希望选择 3 的概率是选择 0 的概率的四倍，那么如果是一个纸质练习，你可能会在一个充满的网格上：

```
3 3 3 3
2 2 2
1 1
0 
```

把东西扔到它上面，然后读出它落在的数字。

您所需的线性比例的选项数量为：

```
- 1 if number of options, n, = 1
- 1 + 2 if n = 2
- 1 + 2 + 3 if n = 3
- ... etc ... 
```

它是算术级数的简单总和。您最终会得到 n(n+1)/2 个可能的结果。例如，对于 n = 1，这是 1 * 2 / 2 = 1。对于 n = 2，这是 2 * 3 /2 = 3。对于 n = 3，这是 3 * 4 / 2 = 6。

因此，您将立即编写如下内容：

```
NSUInteger random_linear(NSUInteger range)
{
    NSUInteger numberOfOptions = (range * (range + 1)) / 2;
    NSUInteger uniformRandom = arc4random_uniform(numberOfOptions);

    ... something ...
} 
```

那时你只需要决定uniformRandom属于哪个bin。最简单的方法是使用最明显的循环：

```
NSUInteger random_linear(NSUInteger range)
{
    NSUInteger numberOfOptions = (range * (range + 1)) / 2;
    NSUInteger uniformRandom = arc4random_uniform(numberOfOptions);

    NSUInteger index = 0;
    NSUInteger optionsToDate = 0;
    while(1)
    {
        if(optionsToDate >= uniformRandom) return index;
        index++;
        optionsToDate += index;
    }
} 
```

鉴于您可以在不迭代的情况下计算 optionsToDate，一个明显更快的解决方案是二分搜索。

一种更聪明的看待它的方法是，uniformRandom 是从 (0, 0) 到 (n, n) 的线下方的框的总和。所以它是图形下方的区域，图形是一个简单的直角三角形。所以你可以从面积公式倒推。

具体来说，图下方从 (0, 0) 到 (n, n) 在位置 x 处的区域为 (x*x)/2。因此，您正在寻找 x，其中：

```
(x-1)*(x-1)/2 <= uniformRandom < x*x/2

=> (x-1)*(x-1) <= uniformRandom*2 < x*x
=> x-1 <= sqrt(uniformRandom*2) < x 
```

在这种情况下，您想取 x-1，因为结果没有进展到数字网格的下一个离散列。因此，您可以通过平方根运算简单的整数截断到达那里。

因此，假设我一路上没有混淆我的确切不等式，并假设所有精度都合适：

```
NSUInteger random_linear(NSUInteger range)
{
    NSUInteger numberOfOptions = (range * (range + 1)) / 2;
    NSUInteger uniformRandom = arc4random_uniform(numberOfOptions);

    return (NSUInteger)sqrtf((float)uniformRandom * 2.0f);
} 
```

# hadoop - Hadoop：格式在 /mnt/hdfs/1/namenode 中中止

> ID：14738465
> 
> 赞同：5
> 
> 时间：2013-02-06T20:46:51.307
> 
> 标签：hadoop

我在 ec2 上创建了一些 ebs 文件系统以与 hadoop 一起使用。我已经在 hadoop 环境中设置了 JAVE_HOME。但是当我去格式化第一卷时，它会中止并显示以下消息

```
[root@hadoop-node01 conf]# sudo -u hdfs hadoop namenode -format
13/02/06 15:33:22 INFO namenode.NameNode: STARTUP_MSG:
/************************************************************ 
STARTUP_MSG: Starting NameNode
STARTUP_MSG:   host = hadoop-node01.mydomain.com/10.xx.xx.201
STARTUP_MSG:   args = [-format]
STARTUP_MSG:   version = 0.20.2-cdh3u5
STARTUP_MSG:   build = file:///data/1/tmp/topdir/BUILD/hadoop-0.20.2-cdh3u5 -r 30233064aaf5f2492bc687d61d72956876102109; compiled by 'root' on Fri Oct  5 18:45:46 PDT 2012
************************************************************/
Re-format filesystem in /mnt/hdfs/1/namenode ? (Y or N) y
Format aborted in /mnt/hdfs/1/namenode
13/02/06 15:33:27 INFO namenode.NameNode: SHUTDOWN_MSG:
/************************************************************
SHUTDOWN_MSG: Shutting down NameNode at hadoop-node01.mydomain.com/10.xx.xx.201
************************************************************/ 
```

这是我的名称节点配置：

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

<!-- Put site-specific property overrides in this file. -->

<configuration>
  <property>
          <name>dfs.name.dir</name>          <value>/mnt/hdfs/1/namenode,/mnt/hdfs/2/namenode,/mnt/hdfs/3/namenode,/mnt/hdfs/4/namenode</value>
  </property>
  <property>
     <name>dfs.data.dir</name>
     <value>/mnt/hdfs/1/datanode,/mnt/hdfs/2/datanode,/mnt/hdfs/3/datanode,/mnt/hdfs/4/datanode</value>
 </property>
</configuration> 
```

有谁知道为什么会发生此错误或如何解决此问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-07T03:29:50.860

不幸的是，在 1.x 中，格式命令的提示符区分大小写。用大写 Y 代替，它不会中止。

# java - 测试清单 with mockito

> ID：14738467
> 
> 赞同：0
> 
> 时间：2013-02-06T20:47:01.807
> 
> 标签：java, junit, mockito

我正在尝试使用 mockito 测试列表，但不知道如何设置我的预期值。

以下是我到目前为止所拥有的。另外，如果有人可以告诉我如何创建具有特定值的模拟对象，那将是很棒的。

```
@Test
public void testFindAllProductsByCategoryId() throws Exception {
    List<Map> expectedProductList =  anyList(Products.class);
    when(productListMock.findAllProductsByCategoryId(1)).thenReturn(expectedProductList);
    List<Map> actualProductList = productListMock.findAllProductsByCategoryId(1);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:40:30.507

我不认为你这样做是正确的。 [anyList 用于匹配器。](http://mockito.googlecode.com/svn/branches/1.6/javadoc/org/mockito/Matchers.html) 你应该在`when`方法中使用它。例如：

```
 when(mockedObject.methodIsCalledWith(anyList())).thenReturn(...); 
```

就是说，我不清楚您要在这里做什么。 [mockito 的文档](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html)写得**很好**，所以我认为你应该回到那个地方来弄清楚你想要做什么。

# javascript - Handlebars 根据值渲染模板

> ID：14738468
> 
> 赞同：1
> 
> 时间：2013-02-06T20:47:02.883
> 
> 标签：javascript, javascript-framework, handlebars.js

我有以下数据

```
multipleTypes = [
        {"type": "radio", "label": "Cool people names","option": ["Ralgar", "Mozzy"]},
        {"type": "checkbox", "label": "Cool phones", "option": ["android", "iphone"]}
        {"type": "radio", "label": "Cool pets", "option": ["monster", "moose"]},
        {"type": "checkbox", "label": "Cool places", "option": ["bar", "undercovers", "moon"]},
    ] 
```

这里是模板

```
<script id="checkbox-template" type="text/x-handlebars-template">
    <fieldset>
        <legend>{{label}}</legend>
        {{#each option}}
            <label for="regularCheckbox">
                <input type="checkbox" id="regularCheckbox" value="checkbox 1">
                <span>{{this}}</span>
            </label>
        {{/each}}
    </fieldset>
</script>
<script id="radio-template" type="text/x-handlebars-template">
    <fieldset>
        <legend>{{label}}</legend>
        {{#each option}}
            <label for="regularRadio">
                <input type="radio" name="radios" id="regularRadio" value="radio 1">
                <span>{{this}}</span>
            </label>
        {{/each}}
    </fieldset>
</script> 
```

我正在尝试查看对象列表并根据 type 属性呈现模板。这可能吗？

`If else`模板内的效果不太好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:00:11.227

这个怎么样？

```
Handlebars.registerHelper('typeRadio', function(obj) {
    return obj.type === 'radio';
});
Handlebars.registerHelper('typeCheckbox', function(obj) {
    return obj.type === 'checkbox';
}); 
```

然后在您的模板中，使用：

```
<fieldset>
    <legend>{{label}}</legend>
    {{#if typeRadio}}
        // do radio stuff
    {{/if}}
    {{#if typeCheckbox}}
        // do checkbox stuff
    {{/if}}

</fieldset> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:02:04.203

Handlebars 没有测试值的方法，但是您可以使用像Comparison block helper 这样的 helper来测试[车把模板](http://doginthehat.com.au/2012/02/comparison-block-helper-for-handlebars-templates/)`type`的属性并呈现特定的 HTML 块：

```
{{#compare type "radio"}}
Radio HTML
{{/compare}}
{{#compare type "checkbox"}}
Checkbox HTML
{{/compare}} 
```

但是，您可能需要考虑转换数据。如果所有输入都是复选框或单选，则可能`radio`对使用单选按钮的项目使用布尔属性。您的数据现在看起来像：

```
multipleTypes = [
    {"radio": true, "label": "Cool people names","option": ["Ralgar", "Mozzy"]},
    {"radio": false, "label": "Cool phones", "option": ["android", "iphone"]}
    {"radio": true, "label": "Cool pets", "option": ["monster", "moose"]},
    {"radio": false, "label": "Cool places", "option": ["bar", "undercovers", "moon"]},
] 
```

然后你可以使用 if/else：

```
{{#if radio}}
Radio HTML
{{else}}
Checkbox HTML
{{/if}} 
```

或者，只需在调用代码中进行模板选择：

```
var templates = {
  'radio': Handlebars.compile($('#radio-template').html()),
  'checkbox': Handlebars.compile($('checkbox-template').html())
};
multipleTypes.forEach(function(item) {
  var rendered = templates[item.type](item);
  // Do something with rendered output ...
}); 
```

# ios - iOS模拟器中的断断续续的图像

> ID：14738470
> 
> 赞同：1
> 
> 时间：2013-02-06T20:47:14.177
> 
> 标签：ios, objective-c, xamarin.ios, ios-simulator

我使用 GLES 2.0 for iOS 制作了一款 iOS 游戏。当我在实际设备上运行它时，它与我的高分辨率图像完美配合，但是当我在模拟器中运行它时，我得到的图像非常不稳定：

![断断续续](../Images/cfc4e5f6d443a9ecbb7575774a68fb02.png)

在开发过程中我并没有真正关心，但是现在我要提交到 iTunes Store，我必须上传我没有的 3.5 英寸和 4 英寸 iPhone 的屏幕截图（我一直在开发iPad）。所以我决定使用模拟器，但老实说我不能使用这些截图。

没有购买 3.5 英寸和 4 英寸设备*只是*为了截图，我该如何解决这个问题并获得高质量的截图？

注意：原始图像质量很高。即使在视网膜 iPad 上，它们看起来一点也不波涛汹涌。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T01:06:01.727

这是预期/已知的行为。模拟器就是这样：*模拟器*而不是*模拟器*。模拟器中的 OpenGL 性能和图像质量通常与实际设备上的大不相同（而且通常更差）。确定 OpenGL 代码在设备上的外观和性能的唯一方法是在设备上对其进行测试，而在您的情况下获得好的屏幕截图的唯一方法是寻找这样的设备并使用它来进行测试截屏。否则，就模拟器而言，所见即所得。没有神奇的开关说“让它看起来像在设备上一样”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T18:17:20.987

事实证明，模拟器一直都是正确的。

我在朋友的 iPhone 5 上试用了最终版本，乍一看还不错，但仔细一看，它就像上面的屏幕截图一样。我可以通过让我的朋友截图来验证这一点，实际上看起来就像我在那里发布的截图一样。

它在 iPad 上看起来不错的原因是因为在 iPad 上，游戏实际上是在放大纹理，即使只是轻微的，而且放大算法比缩小算法产生更好的结果。（我可以发誓它在 480x320 2.3 机器人上看起来不错）

所以无论如何，我开始通过在加载时创建 mipmap 来解决问题

```
GL.GenerateMipmap(TextureTarget.Texture2D); 
```

然后设置缩小以使用这些 mipmap

```
GL.TexParameter(TextureTarget.Texture2D, TextureParameterName.TextureMinFilter, (int)All.LinearMipmapLinear); 
```

现在波涛汹涌的缩小已经消失了，取而代之的是一个肮脏的缩小。奥兹

实际上这样做表明我错误地使用了对视网膜显示器的支持。该应用程序以 iPhone 3GS 的分辨率运行。

所以我只需要确保创建的帧缓冲区大小正确，问题就消失了。然而，在使用视网膜显示器时，我再次放大了我的纹理，所以我只在非视网膜设备上创建了 mipmap（这会消耗更多的 VRAM 并使游戏加载速度变慢）。

# restkit - RestKit 0.2 中的 RKManagedObjectMapping？

> ID：14738475
> 
> 赞同：0
> 
> 时间：2013-02-06T20:47:21.643
> 
> 标签：restkit

`RKManagedObjectMapping`RestKit 0.2发生了什么？我在哪里可以找到有关更换的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:12:47.923

[查看此处](https://github.com/RestKit/RestKit/wiki/Object-mapping)提供的示例以了解如何将代码更改为新架构。

# ruby-on-rails - Rails：用于访问模型方法返回的数据的 Canned/RESTful 方式

> ID：14738478
> 
> 赞同：0
> 
> 时间：2013-02-06T20:47:40.010
> 
> 标签：ruby-on-rails, ruby, rest

在我的应用程序中，我有一个 User 模型，它定义了一个返回 Activity 对象列表的历史方法，显示用户执行的最后 N 个操作。UserController#history 方法将其与视图关联。

代码如下所示：

```
class UserController < ApplicationController
  def history
    user = User.find(params[:id])
    @history = user.history(20)
  end
end

class User < ActiveRecord::Base
  has_many :activities    

  def history(limit)      
      ...
  end
end 
```

当然，我还将这一行添加到我的 routes.rb 文件中：

```
match '/user/:id/:action', :controller => 'user' 
```

所以现在当我转到 localhost:3000/user/8/history 时，我看到了用户 8 的历史记录。一切正常。

作为一个 Rails NOOB，我想知道是否有一些针对这种情况的罐装解决方案可以简化代码。我的意思是，如果 /user/8 是访问用户 8 页面的 RESTful 方式，是否可以告诉 Rails /user/8/history 应该显示通过调用用户 8 的 history() 返回的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:10:28.150

首先，命名控制器的约定是复数形式，除非它仅用于单个资源，例如会话。

关于路线，我相信您在路线中使用了`resources`“助手”，您可以做的是指定到用户的资源路线也有一个成员操作来获取这样的历史记录

```
resources :users do
  member do
    get :history
  end
end 
```

我认为没有更清洁的方法可以做到这一点

你可以在这里查看[http://guides.rubyonrails.org/routing.html#adding-more-restful-actions](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:08:11.060

就 Rails 标准而言，这是在您的案例中显示历史的正确方法。在 Rails 中，控制器被认为是视图和模型的中间件，所以定义一个动作`history`对我来说似乎很好。

您可以以更好的方式指定路线：

```
resources :user do
  get 'history', :on => :member #it will generate users/:id/history as url.
end 
```

# ember.js - 将上下文绑定到 ember 文本字段中的操作

> ID：14738480
> 
> 赞同：2
> 
> 时间：2013-02-06T20:47:51.057
> 
> 标签：ember.js, handlebars.js

我有一个需要管理多个聊天窗口的 ember 应用程序。在 {{#each}} 循环中为每个活动聊天创建一个窗口。这很简单。我遇到问题的地方是当用户按下回车键时发送聊天消息。

窗口看起来像这样

```
{{#each chats}}
    ... stuff to display already existing chats...
    {{view Ember.TextField valueBinding="text" action="sendChat"}}
    <button {{action sendChat this}}> Send </button>
{{/each}} 
```

这对按钮很有效，因为我可以传递`this`给它。默认情况下，在文本字段视图操作中定义的函数只获取该文本字段中的文本，在这种情况下这还不够。由于可以打开多个聊天窗口，我需要知道消息输入到哪个窗口。是否可以传递`this`给文本字段操作函数？（或者你能建议一种不同的方法来解决这个问题吗？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:04:31.423

~~添加`contentBinding="this"`到视图的定义中，例如：~~

 ~~```
{{view Ember.TextField valueBinding="text" action=sendChat contentBinding="this"}} 
```~~  ~~### 编辑

Ember master 已经有了[这个改变](https://github.com/emberjs/ember.js/blob/master/packages/ember-handlebars/lib/controls/text_field.js#L125)，但是官方下载的版本仍然没有.. 所以你需要子类化`Ember.TextField`并改变它`insertNewline`来实现所需的功能：

```
App.ActionTextField = Em.TextField.extend({
    insertNewline: function(event) {
        var controller = this.get('controller'),
        action = this.get('action');

        if (action) {
            controller.send(action, this.get('value'), this);

            if (!this.get('bubbles')) {
                event.stopPropagation();
            }
        }
    }
}); 
```

之后，动作处理程序将收到额外的参数，*视图*：

```
{{view App.ActionTextField valueBinding="text" action=sendChat myfieldBinding="this"}} 
```

在控制器中：

```
sendChat: function (text, view) {
    var myField = view.get('myfield');
    //do stuff with my field
} 
```

您可以使用 ember master 而不是子类化`Ember.TextField`..

希望ember大佬快点发布下一个版本。。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-15T01:36:18.267

我知道这个问题已经得到解答，但我说让我添加一些信息，这些信息可能会在操作和 TextField 的情况下对某人有所帮助。一个词*“组件”*。`TextField`在 Ember 中`Component`，如果您`TextField`从这个角度考虑，它在发送操作和在应用程序中使用 TextField 时可能会有所帮助。

所以当你说`App.SomeTextField = Ember.TexField.extend({...});`App.SomeTextField 是 Ember.TextField 的子类时（记住它是一个组件）。你可以在里面添加你的逻辑并且可以工作，你可以从你的模板访问它，例如 {{view App.SomeTextField}}

你可能会想我看到这个家伙很烂的“观点”这个词，`TextField`是一个观点。嗯，它是一种视图，因为 Ember 组件是 Ember.View 的子类，因此它们具有视图所具有的所有功能。但是有一些重要的事情要记住，与视图不同的组件不会吸收它们周围的上下文（信息/数据），它们会锁定所有内容，如果你想从外部周围的上下文中发送一些东西，你必须明确地这样做。

因此，要将事物传递到`App.SomeTextField`您拥有它的模板中，您将执行类似`{{view App.SomeTextField value=foo action="sendChat"}}`传递两个事物值和在这种情况下的操作的地方。您可能可以在视图/组件之间稍作调整，但事情会崩溃，为什么您的操作没有发送？

现在这是事情变得有点迷幻的地方。记住`TextField`是一个组件，它是视图的子类，但视图不是组件。由于组件是它们自己封装的元素，当您尝试执行此操作时`this.get('controller').send('someAction', someParam)`，“this”指的是组件它的自身，而控制器在此代码方面再次是组件的自身。您希望的操作将转到外部环境，而您的应用程序不会。

为了解决这个问题，您必须遵循从组件发送操作的协议。会是这样的

```
 App.SomeTextField = Ember.TextField.extend({
    //this will fire when enter is pressed
    insertNewline: function() {
      //this is how you send actions from components
      //we passed sendChat action in
      //Your logic......then send...
      this.sendAction('sendChat');
    }

 }); 
```

现在在与您的 SomeTextField 组件/视图元素所在的位置相关联的控制器中，您将执行

```
 App.SomeController = Ember.Controller.extend({
   //In actions hash capture action sent from SomeTextField component/view element
   actions: {
     sendChat: function() {
       //Your logic well go here...
     }
   }
 }); 
```

现在我说要将 TextField 视为一个组件，但我一直在跟踪视图并声明 {{view AppSomeTextField...}}。让我们像组件一样做。

所以你会在你想要使用它的模板中

//在一些模板内

```
 `{{some-text-field}}` 
```

然后你会得到一个名称为该组件的特定模板：

//与组件关联的模板

```
 <script type="text/x-handlebars" data-template-name="components/some-text-field">
     Add what you want
 </script> 
```

在你的 JS 中声明你的组件：

```
 //important word 'Component' must be at end 
 App.SomeTextFieldComponent = Ember.TextField.extend({
    //same stuff as above example
 }); 
```

由于我们是一个角色，您可能可以使用 Ember 输入助手获得相同的功能。他们非常强大。

```
 {{input action="sendChat" onEvent="enter"}} 
```

Welp 希望这些信息能帮助某人，如果他们想知道为什么我的操作没有从这个 textField 发送。

这个 jsBin 是一个用于组件/视图发送动作等的沙盒......没什么太花哨的，但它可能对某人有帮助..

[http://emberjs.jsbin.com/suwaqobo/3/](http://emberjs.jsbin.com/suwaqobo/3/)

和平，我离开这个...~~

# java - Jersey REST Server：实例化资源类

> ID：14738482
> 
> 赞同：10
> 
> 时间：2013-02-06T20:47:52.527
> 
> 标签：java, jakarta-ee, jersey, jax-rs

Jersey REST 服务器 [1] 上的教程提到了 Jersey servlet：

> 此 servlet 分析传入的 HTTP 请求并选择正确的类和方法来响应此请求。此选择基于类和方法中的注释。

当servlet“选择正确的类和方法”时，它是否每次都重新实例化该类？还是它保留每个资源类的一个实例？

这似乎很重要，因为如果这些资源类具有对存储应用程序范围状态的对象的引用，这些状态对象将与资源一起重新实例化，并且最终不会正确存储状态数据。

[1] [http://www.vogella.com/articles/REST/article.html#restjersey](http://www.vogella.com/articles/REST/article.html#restjersey)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-06T21:20:20.310

Jersey 将为每个请求建立每个类的新实例，除非您使用`@Singleton`.

请参阅：[https ://jersey.java.net/documentation/latest/jaxrs-resources.html#d0e2331](https://jersey.java.net/documentation/latest/jaxrs-resources.html#d0e2331)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:17:17.713

实际上根据这篇[文章](http://weblogs.java.net/blog/mhadley/archive/2007/09/new_jersey_feat.html)，默认注释类型是从单例更改为每个请求。这意味着在每个请求都使用一个实例之前，但现在为每个请求创建新的类对象。如果您想更改它，可以使用 resourceFactory 注释。

```
@Target({ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Documented
@ResourceFactory(SingletonProvider.class)
public @interface Singleton {} 
```

您也可以查看此链接以获取 com.sun.jersey.spi.resource [JavaDoc](http://jersey.java.net/nonav/apidocs/1.5/jersey/)

# android - ActionBarSherlock 和新的 Android SDK

> ID：14738485
> 
> 赞同：0
> 
> 时间：2013-02-06T20:48:04.847
> 
> 标签：android, actionbarsherlock

我有一个使用 ActionBarSherlock 和 android SDK（我认为是工具版本 19）的现有项目，我将 Android SDK 升级到最新版本（21），突然所有 R 变量的东西都丢失了，例如：它声称的 R.layout.fragment_account_layout不存在，需要创建。几乎所有与 R 变量相关的东西都搞砸了。我尝试了几种不同的方法来解决它；清理项目，清理工作区并重新添加所有内容。没有任何效果。我该如何解决这个问题？我需要对我的配置进行更改吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:19:09.980

您可能需要检查您的活动是否导入了错误的 R 文件（在这种情况下，它可能是从 ActionBarSherlock 而不是您的应用程序导入 R）最坏的情况是您可能需要手动将 R 添加到您的活动中。像

`import your.app.namespace.R;`

在类中并删除任何其他正在导入的 R

# c# - SCardGetCardTypeProviderName 返回空结果

> ID：14738488
> 
> 赞同：1
> 
> 时间：2013-02-06T20:48:10.260
> 
> 标签：c#, pinvoke, smartcard, marshalbyrefobject, winscard

我正在尝试通过 C# 中的互操作使用 SCardGetCardTypeProviderName。其中一个参数是引用，它应该根据传入的卡上下文返回智能卡提供者的名称。这是我正在使用的代码：

```
IntPtr hSC = { value comes from call using SCardEstablishContext }
string cardName = { value comes from SCardUIDlgSelectCard }
int providerNameLength = 256;
string providerName = string.Empty;  //doesn't matter how I initialize this

[DllImport("winscard.dll", CharSet = CharSet.Ansi, SetLastError = true)]
public static extern Int32 SCardGetCardTypeProviderName(IntPtr hContext, string szCardName, uint dwProviderId, ref string szProvider, ref int pcchProvider);

int lReturn = SCardGetCardTypeProviderName(hSC, cardName, SCARD_PROVIDER_CSP, ref providerName, ref providerNameLength); 
```

但是 providerName 总是返回空，而 providerNameLength 更改为 43，这让我认为这是一个编组问题。但我尝试将 providerName 编组为：

*   LPWStr
*   LPTStr
*   LPStr

在后两者的情况下，我得到一串奇怪的字符，而不是空字符串，这让我再次认为这是一个编组/翻译问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T07:48:35.010

将字符串参数声明为 StringBuilder：

```
[DllImport("winscard.dll"]
public static extern int SCardGetCardTypeProviderName(
    IntPtr hContext,
    string szCardName, 
    uint dwProviderId, 
    StringBuilder szProvider, 
    ref int pcchProvider
);
....
StringBuilder providerName = new StringBuilder(providerNameLength);
int lReturn = SCardGetCardTypeProviderName(
    hSC, 
    cardName, 
    SCARD_PROVIDER_CSP, 
    providerName, 
    ref providerNameLength
); 
```

无需重复 CharSet 的默认值，并且这些 API 函数不使用 Win32 的最后错误机制。

# objective-c - UIImagePickerController 接口方向崩溃

> ID：14738491
> 
> 赞同：4
> 
> 时间：2013-02-06T20:48:19.840
> 
> 标签：objective-c, uiimagepickercontroller, uiinterfaceorientation

自从将我的设备更新到 6.1 后，我在尝试显示 UIImagePickerController 时遇到了崩溃。我只使用纵向。

迷恋;撞车;崩溃：

> 原因：***由于未捕获的异常“UIApplicationInvalidInterfaceOrientation”而终止应用程序，原因：“preferredInterfaceOrientationForPresentation 必须返回受支持的界面方向！”

这是我调用 UIImagePickerController 的地方：

```
if (![UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
{
    //The device cannot make pictures
    [PMAlertDialog showWithTitle:NSLocalizedString(@"incompatibleDeviceDialogTitle", nil) message:NSLocalizedString(@"incompatibleDeviceDialogMessage", nil) andButtonTitle:NSLocalizedString(@"okButtonTitle", nil)];
    return;
}

if (_imagePicker == nil)
{
    _imagePicker = [[UIImagePickerController alloc] init];
    _imagePicker.delegate = self;
}

_imagePicker.allowsEditing = NO;
_imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
_imagePicker.mediaTypes = [UIImagePickerController availableMediaTypesForSourceType:UIImagePickerControllerSourceTypeCamera];

[self presentModalViewController:_imagePicker animated:YES]; 
```

我已将这些方法添加到添加 UIImagePickerController 的视图控制器中：

```
-(BOOL)shouldAutorotate
{
    return NO;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationPortrait;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:25:03.110

为了解决这个问题，我做了一个分类如下：

我创建了一个新的objective-c类，“UIImagePickerController+NonRotating”

在头文件（UIImagePickerController+NonRotating.h）中：

```
#import <Foundation/Foundation.h>

@interface UIImagePickerController (NonRotating)

- (BOOL)shouldAutorotate;
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation;

@end 
```

在实现文件（UIImagePickerController+NonRotating.m）中：

```
#import "UIImagePickerController+NonRotating.h"

@implementation UIImagePickerController (NonRotating)

- (BOOL)shouldAutorotate {
    return NO;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationPortrait;
}

@end 
```

您当然可以修改它，但您认为合适 - 使其自动旋转并返回多个支持的方向等。

# plc - PLC梯形图编程的最佳IDE

> ID：14738494
> 
> 赞同：5
> 
> 时间：2013-02-06T20:48:26.520
> 
> 标签：plc

最近我想学习 PLC 的梯形逻辑编程，但我想知道是否有任何 IDE 可以比**Step7**或**cx-programmer**更好地创建梯形程序？我可以使用**Visual Studio**或**Netbeans**的任何插件吗？最后，在 Linux 或 Microsoft Windows 下使用 PLC 更好吗？

**更新 1**：在谷歌上搜索后，我发现梯形图编程不依赖于 PLC 品牌或其型号，所以我在问题中没有提到任何品牌。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T00:14:19.787

你的目标是什么？在几乎所有情况下，您的 IDE 都是由 PLC 制造商决定的，而您的 PLC 品牌是由客户在购买机器时指定的。他们指定 PLC 是因为他们需要一些可以在线进行维护和故障排除的东西。由于该软件是专有的，而且价格昂贵得离谱，他们不想为工厂中的每台机器都获得新的软件许可证，并且不得不重新学习新软件，同时他们正在因制造停机而损失大量资金。

因此，如果您的目标是进入该行业，您想了解该国的植物倾向于使用什么。在北美，它通常是 Allen-Bradley aka Rockwell Automation，它使用**RSLogix 5000**进行编程（编辑：RSLogix 5000 的最新版本已更名为**Studio 5000**）。在欧洲，通常是 Seimens，但我对他们没有经验。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T04:42:06.867

PLC IDE 几乎总是首先选择硬件。除了一些不起眼的例外，您可以选择要运行的硬件，这决定了 IDE。IDE 都是专有的，并且对于每个硬件平台都是独一无二的。仅罗克韦尔自动化就有三种不同的 IDE 来支持他们的硬件产品线，所有这些 IDE 都是单独授权的，而且非常昂贵。

如果欧姆龙是您所在地区最常见的，那么从它们开始是个好主意。一旦你习惯了一种 PLC，学习更多内容真的很容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T20:50:39.480

如果您不介意您使用的是哪个 PLC 平台，我真的很享受使用 RSLogix 的时光。他们在此处提供免费的培训级套件：

[http://www.ab.com/linked/programmablecontrol/plc/micrologix/downloads.html](http://www.ab.com/linked/programmablecontrol/plc/micrologix/downloads.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-22T17:10:34.030

我更喜欢 RSLogix 5000。它是最容易使用的产品之一，并且具有用户定义类型和附加指令以帮助实现可重用性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T15:28:17.727

ABB 有 Control Builder（这是我工作的产品），AFAIK 当有人购买我们的 AC800 控制器时，他们会免费获得 CB，至少是所谓的基于文件的“[紧凑版”。](http://industrialit.com/CCBTutorial/Start.html)CB 具有梯形图以及所有其他 1131 种语言以及功能图等一些扩展。

免责声明 对不起，如果这听起来像一个广告，只是对我的工作充满热情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-29T15:19:17.327

我主要是一名高级语言程序员，但也做过各种 PLC/PAC 平台的开发，包括 Rockwell、Siemens 和 Beckhoff。

如果你的目标只是简单地介绍一下梯子，那么几乎任何事情都会到期。您可以免费下载 Beckhoffs TwinCAT 软件。它只是一个 30 天的许可证，但您可以每 30 天不断地重新安装一次，而不会出现问题。TwinCAT 的重要之处在于它可以在 Windows PC 上运行，因此您可以直接在 PC 上开发和测试代码，而无需使用实际的 Beckhoff 硬件。阶梯有点古怪，但语句列表部分是迄今为止最强大的部分之一。如果您是一名 C 程序员，您会对 Beckhoff 感到非常自在，因为他们将许多类似 C 的函数（例如 memcpy 和 setcpy）复制到他们的库中。

Beckhoff 平台并不是那么普遍，但它可以让您学习梯形图和 PLC/PAC 编程的原理。

# php - implode() 无效参数

> ID：14738505
> 
> 赞同：-2
> 
> 时间：2013-02-06T20:48:54.313
> 
> 标签：php, implode

当我尝试运行此代码时：

```
$arraytest = implode(", ", $array['playerList']); print $arraytest; 
```

我收到此错误：

> 警告：implode() [function.implode]：在 /home/crafter/public_html/index.php 中传递的参数无效

它应该获取有关我的 Minecraft 服务器的信息。

我对它做了 var_dump() 并且它响应为 NULL。我自动假设它是一个数组，因为我从 bukkit 论坛获得了这个脚本......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T20:50:25.547

`$array['playerList']`必须是一个数组，它可能不是。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T20:51:50.930

`$array['playerList']`可能不是数组。您可以通过以下方式检查： `echo gettype($array['playerList']);`

# java - 如何预测移动物体的未来位置？

> ID：14738506
> 
> 赞同：-4
> 
> 时间：2013-02-06T20:48:57.053
> 
> 标签：java, math, physics

我之前问过这个问题，由于它不是编程问题而被关闭，这完全是因为我的措辞错误。我希望将其实现到 java 中。我正在创建一个小游戏，我有一个光子鱼雷，它从一艘船上向目标发射。现在，由于鱼雷的速度很慢，如果它们正在移动，船将永远不会击中任何目标，我想解决这个问题。我已经制定了多种理论并绘制了许多数学资料，以找出实现这一目标的最佳方法，最后我得出以下结论：

1.  我找到了光子鱼雷到达目标所需的时间。
2.  我发现目标在鱼雷到达的时间内走了多远。
3.  然后我找到目标的新位置和原船之间的距离。
4.  这让我有机会使用余弦规则 (​​SSS) 来找出子弹需要发射的轨迹才能有更高的击中机会。

这是一个图表：

![我的问题示意图](../Images/b487478b0e0bffb225e565007cfbe1ae.png)

现在唯一的问题是我需要将线 a 旋转到正确的方向，因为默认情况下它平行于线 c，这会弄乱整个方程。有人能帮忙吗？如果您能想出更好的方法来找到新的职位建议，我们也非常欢迎。我的 java 游戏实体机制的工作原理如下：

2.  每个实体都有两个控制运动的向量。位置和速度。然而，速度并没有被完全正确地跟踪，因为它不是一个速度和一个方向，为了让事情变得更容易，它是一个 xSpeed 和一个 ySpeed。
3.  实体每刻都会更新一次，发射鱼雷的船必须在这一刻而不是在多个刻中计算未来的位置。

我问这个问题不要再被关闭了，因为这一次我真的需要将答案实现到Java中。

这是我迄今为止尝试过的数学：

```
 double dis = level.distanceBetween(photonTargetTop, this);

        double speed = 5;

        double time = dis / speed;

        double d1 = photonTargetTop.velocity.x * time;
        double d2 = photonTargetTop.velocity.y * time;

        double dis2 = level.distanceBetween(this, photonTargetTop.pos.x + d1, photonTargetTop.pos.y + d2);

        double dis3 = level.distanceBetween(photonTargetTop, photonTargetTop.pos.x + d1, photonTargetTop.pos.y + d2);

        double cosAngle = Math.pow(dis2, 2) + Math.pow(dis, 2) - Math.pow(dis3, 2) / 2 * dis2 * dis;

        double angle = Math.acos(cosAngle);

        EntityPhoton p = new EntityPhoton(this, level);
        p.rotation = angle;
        level.addEntity(p, pos); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:23:22.960

假设目标船没有加速度，这意味着它的速度和方向没有改变。

我们还假设一旦发射，您的鱼雷就没有加速度。它总是以恒定的速度运行。

让我们也将您的鱼雷发射的点称为 (0,0)。

船描述了一条直线。在这条线上选择一个点（如果船沿着不经过 (0,0) 的航向，您可以找到离中心位置最近的点，其中包含一些您可以在维基百科上查找的几何图形）。

一旦选择了要击中敌舰的位置，您就知道 (0,0) 与该位置之间的距离，并且鉴于鱼雷的速度始终相同，您还可以知道何时发射鱼雷鱼雷。然后你还必须找到方向，这意味着在 x 和 y 上给出的速度值，但这并不难。

一般来说，这个问题是一个有多种解决方案的系统，所以假设鱼雷比目标快，你可以击中它的点是无限的，所以你必须使用一些启发式方法来选择一个对你来说方便的点。

# ruby - Puppet .pp 文件本身可以是 .erb 模板吗？

> ID：14738509
> 
> 赞同：0
> 
> 时间：2013-02-06T20:49:03.910
> 
> 标签：ruby, puppet

我希望其中定义的站点`nodes.pp`来自 .yml 文件。我在想如果 .pp 文件本身首先从 .erb 文件处理，那么这将很容易。但据我所知，.pp 文件本身不能是模板，例如。`nodes.pp.erb`.

我想将节点定义保留在 yml 而不是 .pp 中，因为我想对部署的流浪测试等使用相同的定义。我发现使用通用 .yml 比解析 nodes.pp 来提取信息更容易。

显而易见的解决方案是从nodes.pp.erb 按需生成nodes.pp，例如。在一个 rake 任务中，但我想知道 Puppet 本身是否可以解决我的难题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:15:39.583

我认为 puppet hiera 很适合你，看看：

[https://github.com/puppetlabs/hiera#readme](https://github.com/puppetlabs/hiera#readme)

# nosql - redis服务器没有启动

> ID：14738512
> 
> 赞同：3
> 
> 时间：2013-02-06T20:49:09.853
> 
> 标签：nosql, redis

嗨，我对redis有以下问题，

*   我已经在 Ubuntu 12.10 上安装了 redis

    sudo apt-get install redis-server

然而，随后是消息服务器的启动

[6793] 2 月 6 日 21:46:54 # 警告：未指定配置文件，使用默认配置。为了指定一个配置文件使用'redis-server/path/to/redis.conf' [6793] 6 February 6379 21:46:54 #Opening port: bind: Address already in use

服务器启动我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-01T14:40:06.887

您应该使用以下命令停止当前实例。

```
/etc/init.d/redis-server stop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:56:20.103

Redis 的默认端口 6793 已被使用，因此您需要找出正在使用该端口的内容。

您可以通过运行检查：`lsof -i :6793`

然后，您需要杀死正在使用该端口的任何东西，或者使用配置文件为 Redis 指定不同的端口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-03T13:50:28.343

我建议您检查日志文件以排除可能的错误。通常位于 /var/log/redis/redis.log

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-07T01:51:17.780

pidof redis-server 可以获取redis-server的进程id；或者 lsof -i:6379 可以让您使用默认侦听端口 6379 获取正在运行的实例的进程 ID。

# c - 从 C 中的文件读取时出现段错误

> ID：14738514
> 
> 赞同：1
> 
> 时间：2013-02-06T20:49:10.323
> 
> 标签：c, file, segmentation-fault, fault

我只是想用 3 个命令行参数运行这个程序：2 个整数和 1 个文件名。

我一直在运行我的程序：

```
a.out 1 2 devices.txt 
```

devices.txt 看起来像这样：

```
1 
```

我的主要方法如下所示：

```
int main(int argc, char* argv[]){
int MaxIterations, T, numDevices;
FILE *devices;

printf("Num arguments: %d \n", argc);
if(argc < 3 || argc > 4){
    printf("ERROR, need exactly 2 or 3 arguments!\n");
    return 1;
} else if (argc == 3){

    MaxIterations = argv[1]; // max iterations allowed
    T = argv[2]; // time interval
    devices = fopen("devices.in", "r");
} else {

    MaxIterations = argv[1];
    T = argv[1];
    devices = fopen(argv[3], "r");
    if(devices == NULL){
        fprintf(stderr, "CANT OPEN FILE: %s!\n", argv[3]);
        exit(1);
    }

}

FILE* file = fopen ("devices.txt", "r");
 int i = 0;

fscanf(devices, "%d", numDevices);
printf("Number of devices: %d \n", numDevices);

fclose(devices);
return 0; 
```

}

我做错了什么导致我出现段错误？我添加了调试 printf 来确定 seg 错误实际触发的位置，它看起来像它：

```
fscanf(devices, "%d", numDevices); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T20:51:08.277

启用编译器警告：

这是无效的：

```
fscanf(devices, "%d", numDevices); 
```

这里是你想要的：

```
fscanf(devices, "%d", &numDevices); 
```

`d`转换说明符需要一个指向有符号整数的指针。您正在传递（未初始化的）对象的值`numDevices`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:01:03.103

问题是 fscanf 函数需要一个指向存储从文件读取的值的变量的指针。你需要类似的东西

```
fscanf(devices, "%d", &numDevices); 
```

您收到段错误的原因是，在您的原始代码中，numDevices 的（未初始化的）值被用作要写入的地址 - 而且由于它不太可能是有效的可写地址，段错误是通常的方式你的电脑说“不！” :)

# cytoscape.js - How do I get the ID of a clicked node in cytoscape.js?

> ID：14738517
> 
> 赞同：8
> 
> 时间：2013-02-06T20:49:19.670
> 
> 标签：cytoscape.js

This example in the documentation:

```
 cy.on('click', function(evt){
      console.log( 'clicked ' + this.id() );
}); 
```

Results in:

```
Uncaught TypeError: Object [object Object] has no method 'id' 
```

And evt.cyTarget.data() returns undefined.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T18:07:56.863

.id() 函数适用于元素，但您的事件处理程序中没有元素。您在没有任何委托元素选择器的情况下绑定到核心，因此您绑定到核心本身——这意味着对`this`指向的引用`cy`。

这可能是你的意思：

```
cy.on('click', 'node', function(evt){
      console.log( 'clicked ' + this.id() );
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-04-29T12:01:27.197

我将它用于 2.x：

```
 cy.on('tap', 'node', function (evt) {
         console.log(evt.cyTarget.id())
    }); 
```

或者对于 3.x：

```
 cy.on('tap', 'node', function (evt) {
         console.log(evt.target.id())
    }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T10:23:21.913

如[访问数据的文档](http://cytoscape.github.com/cytoscape.js/#collection/data/eles.data)`eles.data()`中所述，您可以使用该方法访问元素数据。在您的情况下，您将 id 定义为节点名称，然后只需调用

```
console.log('clicked ' + this.data('id')); 
```

# php - Netbeans ERROR PARSING FILE

> ID：14738518
> 
> 赞同：0
> 
> 时间：2013-02-06T20:49:23.740
> 
> 标签：php

im facing strange problem in Netbeans. Its a remote ftp project, and i got this class

```
<?php

class functions
{

    public static function sendEmail($to, $to_name, $from, $from, $from_name, $subject, $body)
    {

    }

}

?> 
```

i think there is nothign wrong on this file, but in Netbeans i got this Parsing error problem. i cant simply call this function thgrough CTRL+SPACE cause its not reading in in other php files. this error is really strange and is slowering my work. Did someone solved this?? thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:52:34.110

the method definition has a duplicate parameter - `$from`

Although this is syntactically correct, it is bad practice and can make your IDE barf

# wcf - WCF/WF - 为什么我不能发布更新的代码并在其上恢复/调试暂停的工作流

> ID：14738523
> 
> 赞同：1
> 
> 时间：2013-02-06T20:49:34.987
> 
> 标签：wcf, debugging, workflow-foundation, resume, step-into

我有一个使用 AppFabric / Persistence 和 .net 4.0 的 WCF 工作流，我知道它会在代码活动中出现一些错误，因为它与外部soap 服务通信，当操作无法执行时，有时会抛出 SoapExceptions 作为返回值完成。这是不可避免的，并且从一开始就需要处理大量异常。

在开发过程中，当这些错误发生时，我的工作流程会暂停，我可以很容易地追踪错误，并为新发现的soap异常编写一个处理程序。问题是，在我对代码活动进行更改并发布新的 dll 后，暂停工作流的“恢复”不会利用这些更改，我也不能在恢复时中断代码。

工作流尝试运行 5 次，然后重新抛出相同的错误，即使它类似于抛出新异常（“TEST EXCEPTION”），然后我将其从代码中删除。

我不会更改工作流程的定义，只是对代码活动进行一些小改动。

我发誓我可以在 VS2010 中做到这一点，但是自从我切换到 vs2012 以来已经很长时间了。仅供参考，我可以调试尚未暂停的新工作流程。我可以单步执行代码。只是无法在恢复时调试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:59:04.580

我怀疑你是否能够 - 我从我使用 VS2008 的经验中记得这一点。

我不记得究竟为什么会发生这种情况，但我认为你不能。当我们发布新代码时，我们在生产中做了什么，并且没有完成（和持久）工作流 - 我们在配置中添加了程序集绑定，它指向新代码。旧代码也存在。

像[这样](http://msdn.microsoft.com/en-us/library/twy1dw1e.aspx)的东西：

```
 <configuration>
   <runtime>
      <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
         <dependentAssembly>
            <assemblyIdentity name="myAssembly"
                              publicKeyToken="32ab4ba45e0a69a1"
                              culture="neutral" />
            <bindingRedirect oldVersion="1.0.0.0"
                             newVersion="2.0.0.0"/>
            <codeBase version="2.0.0.0"
                      href="http://www.litwareinc.com/myAssembly.dll"/>
         </dependentAssembly>
      </assemblyBinding>
   </runtime>
</configuration> 
```

[这](https://stackoverflow.com/questions/809262/how-to-programatically-modify-assemblybinding-in-app-config)也很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:24:26.290

我可以通过使用 C:\Windows\Microsoft.NET\Framework\v4.0.30319\SQL\en\SqlWorkflowInstanceStoreSchemaUpgrade.sql 升级架构并更改为 .net 4.5 来恢复和调试

它可能不是最优雅的解决方案，但它确实有效。

我还想说，我个人讨厌这样的解决方案，尤其是在搜索它们之后。如果您来到这里并且无法部署 4.5，我深表歉意。

# mysql - 如何仅选择 bigint 的日期部分？

> ID：14738525
> 
> 赞同：0
> 
> 时间：2013-02-06T20:49:37.283
> 
> 标签：mysql

假设在 mysql 中，我有一个表，其中包含 BIGINT 的列“thedate”，其值为：

```
1342962983638 
```

转换为 2012-07-22 _*此处的某个时间* 如何执行仅从该 bigint 中选择日期部分的 select 语句？

即生成的 bigint 将显示为“2012-07-22”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:59:00.220

您需要将 截断`epochtime`为仅 10 个整数值。所以，选择看起来像：

```
SELECT FROM_UNIXTIME( SUBSTRING('1342962983638',1,10), '%Y-%m-%d'); 
```

[小提琴](http://sqlfiddle.com/#!2/c4c9f/3)。

# php - PHP scripts has no error but can not see the functionality on joomla 2.5 using jumi

> ID：14738526
> 
> 赞同：0
> 
> 时间：2013-02-06T20:49:43.770
> 
> 标签：php, joomla2.5, jumi

Hi I have a several php files which actually is a registration form with validation. So if someone fills up the form correctly, the values will be stored into database. When I am running the file, the form field displays but it has no functionality. I don't know exactly what is the mistake I have made?

The web url is the following if you would like to have a look: [BPHF](http://bphf2012.org/index.php?option=com_jumi&fileid=11)

The files can be seen from [here](https://www.dropbox.com/sh/vof0p4heo4csdn9/dj2NfgcWuE)

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:22:30.213

解决了！！

修复错误后，功能不起作用的原因是因为在表单操作位置，我只放了 register.php。我没有意识到我犯了那个愚蠢的错误..

# android - 将图像动态加载到对话框中

> ID：14738527
> 
> 赞同：2
> 
> 时间：2013-02-06T20:49:47.643
> 
> 标签：android, dialog, android-dialogfragment

如何将图像动态加载到android中的对话框中

```
public Dialog onCreateDialog(Bundle savedInstanceState) {
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());       
        LayoutInflater inflater = getActivity().getLayoutInflater();
        builder.setView(inflater.inflate(R.layout.popup, null));
} 
```

我只能将静态按钮和图像链接到视图中。

如果我尝试像动态链接图像

```
ImageView image = (ImageView) getActivity().findViewById(R.id.image);
image.setImageResource(R.drawable.icon); 
```

图像作为空对象返回

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:33:14.620

这是解决方案

```
public Dialog onCreateDialog(Bundle savedInstanceState) {
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());       
        LayoutInflater inflater = getActivity().getLayoutInflater();
        ViewGroup vg = (ViewGroup)inflater.inflate(R.layout.popup, null);
        ImageView image = (ImageView) vg.findViewById(R.id.image);
        image.setImageResource(R.drawable.icon);
        builder.setView(vg);
} 
```

希望这可以帮助！

# sql - SSMS 2012 System.OutOfMemoryException（客户端）和 SQL 提示（包括调试信息）

> ID：14738530
> 
> 赞同：5
> 
> 时间：2013-02-06T20:49:51.480
> 
> 标签：sql, ssms, redgate, ssms-2012, red-gate-sql-prompt

一些背景知识：自从它与 Red Gate 的 SQLPrompt 一起发布以来，我一直在 SSMS 2012 中遇到此内存异常（此异常从未发生在同一台笔记本电脑上的 SSMS 2008R2 中）。

我最初每天都会遇到这些异常（SSMS2012 和 SQLPrompt），这迫使我关闭并重新打开 SSMS（以及我正在处理的所有事情）。几个月前，我偶然发现了一个支持线程，指出可能的附加组件是原因，所以我**卸载**了我唯一的附加组件（SQL 提示，但没有卸载开发人员包的其余部分）并且几个月*没有*一个例外少 System.OutOfMemoryException 异常。

在 2012 年发布 SP1 后，我应用它并再次重新安装 SQL Prompt（最新版本）以查看问题是否已得到解决，并且在开发时间的 7 小时内，我再次遇到了臭名昭著的 System.OutOfMemoryException。

在所有这些过程中，我一直在使用 Red Gate 开票并在他们看到异常的地方提交调试日志，但由于内存异常没有明确列出 SQLPrompt，他们不会将问题上报给开发团队。然而，在此特定异常之前，SQL Prompt 在 SSMS 2012 IDE (Visual Studio 2010) 中引发了许多异常（下面列出了一些）。我认为内存异常是 SQL Prompt 如何管理缓存数据并耗尽 SSMS 的可用内存的问题的征兆，最终引发异常。

我已经学会了如何推迟这个问题以及如何重现它，它与两个变量直接相关：

1.  在 SSMS（对象资源管理器和查询窗口）中连接和处理多个实例。即连接到 7 个实例在 2-3 小时内消除了异常。
2.  从多个实例返回结果集。这包括 SSMS 用于将信息返回到 IDE 的查询以及返回到各个查询窗口的结果。

我连接到的实例越多，引发异常的速度就越快，这导致我 SQL 提示符缓存每个实例的所有对象信息。一旦引发内存异常，情况就会恶化，直到 SSMS 完全崩溃（除非我先关闭它）。

我所追求的是如何收集更多/更好的信息以提交给 Red Gate 以纠正这个问题。这是我需要你帮助的地方。

笔记本电脑：HP Elite book 8440 内存：6GB

当前操作系统：Win 7 Enterprise Ed Sp1

以下是 SQL Prompt 引起的一些异常：

```
System.ArgumentOutOfRangeException "Specified argument was out of the range of valid values."   

Microsoft.VisualStudio.Text.Implementation.BinaryStringRebuilder.GetLineNumberFromPosition(N/A,N/A)
Microsoft.VisualStudio.Text.Implementation.TextSnapshot.GetLineFromPosition(Microsoft.VisualStudio.Text.Implementation.TextSnapshot,N/A)
Microsoft.VisualStudio.Editor.Implementation.VsTextBufferAdapter.GetLineIndexOfPosition(N/A,System.Int32,System.Int32&,System.Int32&)
RedGate.SQLPrompt.CommonVS.Editor.VSScriptProvider.PositionFromIndex(RedGate.SQLPrompt.CommonVS.Editor.VSScriptProvider,System.Int32)
RedGate.SqlPrompt.Metadata.Script.ScriptProviderBase.GetText(RedGate.SQLPrompt.CommonVS.Editor.VSScriptProvider,System.Int32,System.Int32)
RedGate.SqlPrompt.Engine.NewEngine.SqlPromptEngine.GetCandidates(RedGate.SqlPrompt.Engine.NewEngine.SqlPromptEngine,System.Int32)
RedGate.SqlPrompt.Engine.PromptEngineEmulator.get_GetSuggestions(RedGate.SqlPrompt.Engine.PromptEngineEmulator)
RedGate.SqlPrompt.Engine.AutoCompleter.m_FilterChanged(RedGate.SqlPrompt.Engine.AutoCompleter,RedGate.SqlPrompt.Engine.PromptEngineEmulator,System.EventArgs)
RedGate.SqlPrompt.Engine.PromptEngineEmulator.OnFilterChanged(RedGate.SqlPrompt.Engine.PromptEngineEmulator)
RedGate.SqlPrompt.Engine.PromptEngineEmulator.set_Index(RedGate.SqlPrompt.Engine.PromptEngineEmulator,System.Int32)
RedGate.SqlPrompt.Engine.PromptEngineEmulator.set_CaretPosition(RedGate.SqlPrompt.Engine.PromptEngineEmulator,N/A)
RedGate.SQLPrompt.CommonUI.Editor.EditorWindowBase.SetEngineCaretPosition(RedGate.SQLPrompt.SSMSUI.SSMSEditorWindow,N/A)
RedGate.SQLPrompt.CommonUI.Editor.EditorWindowBase.UpdateUIPrompts(RedGate.SQLPrompt.SSMSUI.SSMSEditorWindow)
RedGate.SQLPrompt.CommonVS.Editor.VSEditorWindow.OnTextViewCommandExec(RedGate.SQLPrompt.SSMSUI.SSMSEditorWindow,RedGate.SQLPrompt.CommonVS.Editor.TextViewMonitor,RedGate.SQLPrompt.CommonVS.Editor.CommandExecEventArgs)
RedGate.SQLPrompt.CommonVS.Editor.TextViewMonitor.AfterCommandExecute(RedGate.SQLPrompt.CommonVS.Editor.TextViewMonitor,RedGate.SQLPrompt.CommonVS.Editor.CommandExecEventArgs)
RedGate.SQLPrompt.CommonVS.Editor.TextViewMonitor..(RedGate.SQLPrompt.CommonVS.Editor.TextViewMonitor.)
RedGate.SQLPrompt.CommonUI.Utils.ErrorDialog.Do(System.Action)
RedGate.SQLPrompt.CommonVS.Editor.TextViewMonitor.(RedGate.SQLPrompt.CommonVS.Editor.TextViewMonitor,System.Guid&,System.Uint32,System.Uint32,System.IntPtr,System.IntPtr)
RedGate.SQLPrompt.CommonVS.Editor.TextViewMonitor..(RedGate.SQLPrompt.CommonVS.Editor.TextViewMonitor.,System.Guid&,System.Uint32,System.Uint32,System.IntPtr,System.IntPtr)
Microsoft.VisualStudio.Editor.Implementation.CommandChainNode.Exec(N/A,N/A,N/A,N/A,N/A,N/A)

System.ArgumentException    00:05:14.7510000    "The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))"   

#mMc.#JQub.#OQub(#mMc.#JQub,N/A,System.Uint32,#mMc.#k3ub&)
#mMc.#JQub.#z26.#8Di(#mMc.#JQub.#z26)
RedGate.SQLSourceControl.Engine.SmartAssembly.ExceptionReporting.ErrorReporterBase.Do(RedGate.SQLSourceControl.CommonUI.Forms.ErrorDialog,System.Action,System.Predicate`1<System.Exception>,System.Boolean)
RedGate.SQLSourceControl.Engine.SmartAssembly.ExceptionReporting.ErrorReporterBase.Do(RedGate.SQLSourceControl.CommonUI.Forms.ErrorDialog,System.Action)
RedGate.SQLSourceControl.CommonUI.Forms.ErrorDialog.Do(System.Action) 
```

这是内存异常：

![结果集中抛出异常](../Images/067a70791b7551e309e8548a1e8354de.png)

```
System.OutOfMemoryException <null>  

System.Text.StringBuilder.set_Capacity(System.Text.StringBuilder,N/A)
Microsoft.SqlServer.Management.QueryExecution.QEDiskStorageView.set_MaxNumBytesToDisplay(N/A,N/A)
Microsoft.SqlServer.Management.QueryExecution.QEDiskDataStorage.GetStorageView(N/A)
Microsoft.SqlServer.Management.QueryExecution.QEResultSet.StartRetrievingData(Microsoft.SqlServer.Management.QueryExecution.QEResultSet,System.Int32,N/A)
Microsoft.SqlServer.Management.QueryExecution.ResultSetAndGridContainer.StartRetrievingData(N/A,N/A,N/A)
Microsoft.SqlServer.Management.QueryExecution.ResultsToGridBatchConsumer.OnNewResultSet(Microsoft.SqlServer.Management.QueryExecution.ResultsToGridBatchConsumer,N/A,N/A)
Microsoft.SqlServer.Management.QueryExecution.QESQLBatch.ProcessResultSet(Microsoft.SqlServer.Management.QueryExecution.QESQLBatch,N/A)
Microsoft.SqlServer.Management.QueryExecution.QESQLBatch.DoBatchExecution(Microsoft.SqlServer.Management.QueryExecution.QESQLBatch,System.Data.SqlClient.SqlConnection,N/A)
Microsoft.SqlServer.Management.QueryExecution.QESQLBatch.Execute(N/A,N/A,N/A)
Microsoft.SqlServer.Management.QueryExecution.QEOLESQLExec.DoBatchExecution(Microsoft.SqlServer.Management.QueryExecution.QEOLESQLExec,Microsoft.SqlServer.Management.QueryExecution.QESQLBatch)
Microsoft.SqlServer.Management.QueryExecution.QESQLExec.ExecuteBatchCommon(Microsoft.SqlServer.Management.QueryExecution.QEOLESQLExec,N/A,N/A,System.Boolean&)
Microsoft.SqlServer.Management.QueryExecution.QEOLESQLExec.ExecuteBatchHelper(N/A,N/A,N/A,N/A)
Microsoft.SqlServer.Management.QueryExecution.QEOLESQLExec.ProcessBatch(N/A,N/A,N/A)
.BatchParser.ThunkCommandExecuter.ProcessBatch(N/A,N/A,N/A) 
```

同样，需要明确的是，我不知道其他异常是否相关，但内存异常**仅**在安装 SQL Prompt 时发生。

感谢你的协助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-29T02:42:09.377

对我有用的是在 SQL 提示符中禁用代码建议，然后我可以运行相同的查询，然后得到结果。然后我可以在 SQL 提示符中启用代码建议，并且错误会消失一段时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-09T22:51:08.467

此时 RedGate 终于承认问题是 SQL Prompt 插件正在与 32 位 SSMS 客户端进行进程内工作，并最终阻塞内存导致内存不足异常。

他们对此解决方案的反应是“可能”在一年左右的时间内，当您支付年度支持时，这就是一记耳光。从那以后，我拒绝就这个问题为 2 个现有的 Tool-belt 许可证支付进一步的支持，这是我自 2012 年以来一直在解决的问题，直到他们纠正了这个问题。如果这对您有影响，并且如果可以的话，请这样做并用您的钱包投票，以激励他们将此修复作为更高的优先级。

如果那一天到来，我将使用 SQL 提示的更正版本的版本信息更新此答案帖子，该版本信息不再在 SSMS.exe 的 32 位内存空间中运行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-08T15:25:53.667

您可以尝试按照本文所述限制列数，看看是否有帮助？ [http://redgate.uservoice.com/forums/94413-sql-prompt-feature-suggestions/suggestions/1364757-disable-sql-prompt-on-certain-databases](http://redgate.uservoice.com/forums/94413-sql-prompt-feature-suggestions/suggestions/1364757-disable-sql-prompt-on-certain-databases)

# c# - 带参数的 Dispatch.Invoke(new Action...)

> ID：14738533
> 
> 赞同：18
> 
> 时间：2013-02-06T20:50:02.320
> 
> 标签：c#, .net, wpf, multithreading

以前我有

```
Dispatcher.Invoke(new Action(() => colorManager.Update())); 
```

从另一个线程将显示更新到 WPF。由于设计原因，我不得不更改程序，并且必须将 ColorImageFrame 参数传递给我的 ColorStreamManager.Update() 方法。

在[此](http://blog.decarufel.net/2009/03/good-practice-to-use-dispatcher-in-wpf.html)链接之后，我将调度程序修改为：

```
Dispatcher.Invoke(new Action<ColorStreamManager, ColorImageFrame>((p,v) => p.Update(v))); 
```

它编译得很好，但根本不会运行。VS2010 说**“参数计数不匹配”。**在我的`ColorStreamManager.Update()`方法中，我有 `RaisePropertyChanged(() => Bitmap)`；

有人能指出我哪里出错了吗？

方法的签名`ColorStreamManager.Update()`如下：

```
 public void Update(ColorImageFrame frame); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-06T21:08:31.363

您不希望该操作具有参数，因为`Dispatcher`它不知道将什么传递给该方法。相反，您可以做的是关闭变量：

```
ColorImageFrame someFrame = ...;
Dispatcher.Invoke(new Action(() => colorManager.Update(someFrame))); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T21:04:37.480

如果`Invoke`使用`Action<T1, T2>`委托调用，则需要将两个 Action 参数传递给 Invoke 调用：

```
ColorStreamManager colorManager = ...
ColorImageFrame frame = ...

Dispatcher.Invoke(
    new Action<ColorStreamManager, ColorImageFrame>((p,v) => p.Update(v)),
    colorManager,
    frame); 
```

您在这里使用的 Invoke 重载是[`Dispatcher.Invoke(Delegate, Object[])`](http://msdn.microsoft.com/en-us/library/cc647509.aspx).

# tsql - 如何动态停止/触发存储过程中的触发器？

> ID：14738537
> 
> 赞同：3
> 
> 时间：2013-02-06T20:50:27.000
> 
> 标签：tsql, stored-procedures, triggers, sql-server-2008-r2

假设我在数据库中有一个表 MyTab。我有一个触发器，例如，删除此表上的触发器。然后在存储过程中，我尝试从该表中删除数据，但只想为该删除停止删除触发器。之后，将扳机恢复正常。是否可以在存储过程中有代码，例如：

```
stop trigger on MyTab;
delete from MyTab where ...;
put the trigger back; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T20:52:52.300

[如此处](https://stackoverflow.com/questions/1388072/disable-enable-trigger-sql-server)所述，您可以禁用和启用触发器，但我可能会将其放在 try-catch 和/或事务中，这样您就不会因为错误而被禁用触发器卡住。

例如：

```
set xact_abort on; -- Auto-rollback on any error
begin transaction;

    alter table MyTab disable trigger TR_MyTab_Delete;

    delete from MyTab where 1/0 = 1; -- Causes div by zero error

    alter table MyTab enable trigger TR_MyTab_Delete; -- Won't run becuase of above error

commit; 
```

上面的脚本会抛出一个错误，但不会禁用触发器，因为[设置 xact_abort on](http://msdn.microsoft.com/en-us/library/ms188792.aspx)可以保证我的事务被回滚，包括禁用触发器。

# linux - source 和 dest 路径相同时的一行复制命令

> ID：14738538
> 
> 赞同：1
> 
> 时间：2013-02-06T20:50:27.687
> 
> 标签：linux, backup, cp

我想在与当前目录不同的其他子目录中备份文件，如下所示：

```
cp /aaa/bbb/ccc/ddd/eeee/file.sh /aaa/bbb/ccc/ddd/eeee/file.sh.old 
```

如您所见， source 和 dest dir 是相同的，因此常见的约定是更改为 common 目录，执行复制 im `./`，然后更改回原始目录。

在这种情况下是否有单行命令来完成复制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:00:01.500

是的。用这个：

`cp /aaa/bbb/ccc/ddd/eeee/{file.sh,file.sh.old}`

花括号将导致字符串的第一部分重复用于以逗号分隔的每个项目。Bash 将上述内容扩展为两个单独的路径，然后将其传递给`cp`. 要查看 Bash 将传递给 的内容`cp`，只需`echo`在开头添加一个：

`echo cp /aaa/bbb/ccc/ddd/eeee/{file.sh,file.sh.old}`

您将看到这会产生您的原始陈述：

`cp /aaa/bbb/ccc/ddd/eeee/file.sh /aaa/bbb/ccc/ddd/eeee/file.sh.old`

您只是在使用 Bash 技巧来节省打字时间。

# autohotkey - 如何在 AutoHotkey 中的每个发送字符之间设置键延迟？

> ID：14738543
> 
> 赞同：1
> 
> 时间：2013-02-06T20:50:50.883
> 
> 标签：autohotkey

我正在尝试在发送的字符之间添加延迟，如下所示：

```
^`::SetKeyDelay,100 Send 67890 
```

我认为这段代码有效：

```
^`::
SetKeyDelay, 100
Send 67890 
```

目标是将该代码放在一行中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T21:20:56.147

Autohotkey 不支持每行多个命令（分号表示行注释）。文档本身说明

> 每个脚本都是一个纯文本文件，其中包含要由程序 (AutoHotkey.exe) 执行的**行。**

您可以全局设置键延迟（然后每个热键操作都是单行的）：

```
SetKeyDelay, 100

;...

^`::Send 67890 
```

或者，您可以使用子例程或函数：

```
type(speed, str){
  SetKeyDelay, %speed%
  Send, %str%
}

;...

^`::type(100, "67890") 
```

也可以使用多行热键，但您需要用 . 分隔它们的结尾`return`。文档似乎更喜欢这种方法：

```
^`::
  SetKeyDelay, 100
  Send, 67890
return 
```

# jquery - 链接到 Colorbox 中的全尺寸图像

> ID：14738544
> 
> 赞同：2
> 
> 时间：2013-02-06T20:50:54.180
> 
> 标签：jquery, colorbox

有没有办法链接到 Colorbox 中的原始图像？

我有一个可以正常工作的hack，但我想知道是否有其他方法可以做到这一点：

```
<a href="full_size.jpg" title="<a class='cbox_expand' href='full_size.jpg'>Expand</a>">Photo_1</img> 
```

![在此处输入图像描述](../Images/3990d0b366637086d0b5bd7f90ac9d73.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T07:29:20.287

```
$('a.example').colorbox({
  title: function() {
    return $('<a>Expand</a>').attr('href', $(this).attr('href'));
  }
}); 
```

# javascript - 来自 javascript 的同步 Json 调用

> ID：14738545
> 
> 赞同：2
> 
> 时间：2013-02-06T20:50:57.400
> 
> 标签：javascript, json, jquery, jsonp

我正在做一个项目，我需要在一个循环中进行多个 JSON 调用。一旦我退出该循环，我就需要处理我所做的所有调用的结果。我很难理解如何以我的操作顺序有效的方式进行这些调用。我处理结果的代码总是在对服务的调用完成之前执行。我创建了一个 jsfiddle 来演示并在此处包含代码。

[http://jsfiddle.net/VEkrf/3/](http://jsfiddle.net/VEkrf/3/)

```
 var sourceData = { "fooIndex": "foo",
        "barIndex": "bar"
    }
    var destinationData = {};
    for (var sourceIndex in sourceData) {
        $.getJSON('http://echo.jsontest.com/' + sourceIndex + '/' + sourceData[sourceIndex] + '?callback=?', null, function (result) {
            for (var resultIndex in result) {
                alert("Adding " + resultIndex + " : " + result[resultIndex]);
                destinationData[resultIndex] = result[resultIndex];
            }
        });
    }

    if (Object.keys(destinationData).length == 0) {
        alert("Destination not yet populated");
    }
    else {
        alert("Eureka!  You did it!");
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T21:04:44.147

这看起来像是[jQuery Deferred Object](http://api.jquery.com/category/deferred-object/)和我的搭档的工作[`$.when`](http://api.jquery.com/jQuery.when/)！

将所有`$.getJSON`调用传递给`$.when`，当它们都完成后，我将调用一个包含*所有*结果的函数。

看一下这个：

```
var sourceData = {
    "fooIndex": "foo",
    "barIndex": "bar"
};
var destinationData = {};

// Array of AJAX calls
var AJAX = [];

for (var sourceIndex in sourceData) {
    AJAX.push($.getJSON('http://echo.jsontest.com/' + sourceIndex + '/' + sourceData[sourceIndex] + '?callback=?'));
}

// Apply is needed to pass each element as a parameter
$.when.apply($, AJAX).done(function(){
    // This function will be called when all the AJAX calls are done

    // The arguments of the functin are the responses from each request
    for(var i = 0, len = AJAX.length; i < len; i++){
        var result = arguments[i][0];
        //arguments: [resultObj, 'success', jqXHR]
        for (var resultIndex in result) {
            alert("Adding " + resultIndex + " : " + result[resultIndex]);
            destinationData[resultIndex] = result[resultIndex];
        }
    }

    alert("Eureka!  You did it!");
}); 
```

注意：由于这是异步的，`destinationData`因此在触发回调之前将不可用。将任何使用它的代码*放入*`.done()`回调中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T20:55:17.393

由于您已经在使用 jQuery，我建议您探索队列函数。您可以将 ajax 调用排队，然后在成功处理程序中调用 de-queue 或 next 函数。就这样，他们依次走。添加到队列中的最后一项是处理返回数据的函数。

```
var sourceData = {
    "fooIndex": "foo",
    "barIndex": "bar"
};
var destinationData = {};

$(function () {
    console.debug('ready');
    for (var sourceIndex in sourceData) {
        console.debug('for Loop');
        $(document).queue('ajax', function (next) {
            $.getJSON('http://echo.jsontest.com/' + sourceIndex + '/' + sourceData[sourceIndex] + '?callback=?', null, function (result) {
                for (var resultIndex in result) {
                    alert("Adding " + resultIndex + " : " + result[resultIndex]);
                    destinationData[resultIndex] = result[resultIndex];
                    next();
                }
            });
        });
    }

    $(document).queue('ajax', function (next) {
        alert("Eureka!  You did it!");
    });
    $(document).dequeue('ajax');
}); 
```

我一直在为“同步”ajax 做这件事。

[这是我正在谈论的一个例子](http://jsfiddle.net/EheyN/4/)

# ruby-on-rails - Rails 3.x 使用现有表字段进行身份验证

> ID：14738549
> 
> 赞同：0
> 
> 时间：2013-02-06T20:51:09.197
> 
> 标签：ruby-on-rails, authentication

我有需要连接登录的 Rails 3.2.11 应用程序。Devise Database Authenticatable 本来可以，除了：

1.  我无法创建表/字段并且需要使用现有字段（设计想要创建用户模型）。
2.  而不是用户模型，我必须使用带有电子邮件和密码字段的“现有模型（学生）。

你们中的任何一位 Rails 大师会告诉我如何自定义 Devise 或者是否使用不同的东西。基本要求是：使用必须注册但使用现有表/字段的登录系统。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:40:08.460

如果您无法将字段添加到表中，快速回答是，Devise 不是身份验证选择。它需要某些基本的特定领域才能工作。

正如 Peter de Ridder 指出的那样，您可以使用特定的模型名称设置 Devise。但是，如果没有这些必填字段，就会出现一些错误（例如“缺失列”等更神秘的错误）。

请注意，在此 Devise 的 wiki 文章中，根据**需要**引用这些字段：

> [https://github.com/plataformatec/devise/wiki/How-To:-change-an-already-existing-table-to-add-devise-required-columns](https://github.com/plataformatec/devise/wiki/How-To:-change-an-already-existing-table-to-add-devise-required-columns)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:15:11.560

您可以根据需要自定义设计。Railscasts #210 提供有关自定义选项的信息。您可以使用您想要的任何名称创建设计模型。例如，您可以这样做：

```
rails generate devise Student 
```

如果你想要一个学生模型。Devise 中的几乎所有内容都可以自定义，尽管有些更改比其他更改更容易。您还可以从 github 上的 devise 获取所有控制器，并在您自己的应用程序中自定义或覆盖它们。设计 wiki 有很多关于定制的信息：

[https://github.com/plataformatec/devise/wiki](https://github.com/plataformatec/devise/wiki)

如果您想完全控制所有身份验证选项，我还可以推荐从头开始修改的 railscast #250 身份验证（也可用于从头开始授权的 railscast）。

# image - 在 Office 图片管理器中调整图像大小

> ID：14738554
> 
> 赞同：0
> 
> 时间：2013-02-06T20:51:23.953
> 
> 标签：image, pixels, office-2007

想将我的图像的像素更改为 951x211。当输入 951x211 时，它会自动显示为 594 x 211。想将我的图像作为横幅放在我的主页中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:15:11.287

一旦我设置了宽度和高度，Photoshop 就解决了我上面的问题。它变得固定，保存为桌面中的图像，当我在办公室图片管理器中打开它时，它的宽度和高度不会改变。

# plone - 在@@register 上使用动态词汇表自定义字段的条件字段

> ID：14738555
> 
> 赞同：2
> 
> 时间：2013-02-06T20:51:27.917
> 
> 标签：plone, zope

我正在关注[collective.examples.userdata](http://pypi.python.org/pypi/collective.examples.userdata)在注册表单上添加一些自定义字段。

我想添加两个字段，一个用于州，另一个用于城市，第二个根据先前选择的州加载内容。

我的问题是这怎么可能，只能使用模式、使用[动态词汇表](http://developer.plone.org/forms/vocabularies.html#dynamic-vocabularies)或需要编辑注册表单吗？我该怎么做？

另一个问题是如何在 portlet 中加载注册表单。是否可以填写@@register viewlet？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:08:44.087

使用 javascript 来做次要字段的动态部分。要在 portlet 中呈现表单，有几种方法可以做到，但同样，使用 javascript 可能是最简单的。您放置了一个注册按钮，可打开注册覆盖。

查看[http://plone.org/products/plone.app.jquerytools](http://plone.org/products/plone.app.jquerytools)了解如何连接它。

# jquery - jquery get 方法在 safari 中工作但在 firefox 中不工作

> ID：14738560
> 
> 赞同：2
> 
> 时间：2013-02-06T20:51:56.747
> 
> 标签：jquery, html, cross-browser

我有这两个页面：

第 1 页：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Test jquery.get()</title>
    <script type="text/javascript" charset="utf-8" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
</head>
<body>
    <div class="result"></div>
    <script type="text/javascript" charset="utf-8">
        $.get('tests.html', function(data) {
        $('.result').html(data);
        alert(data);
        });
    </script>
</body>
</html> 
```

第2页：

```
<html>
<body>
    <form action="#" method="get" accept-charset="utf-8">
        <input type="text" name="some_name" value="" id="some_name">
        <p><input type="submit" value="Continue &rarr;"></p>
    </form>
</body>
</html> 
```

第一个页面加载第二个页面，但它只适用于 Safari 而不是 Firefox。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:19:04.713

您当前的代码显然是将整个 HTML 文档的标记注入到`<div>`元素中。Firefox 可能对`<html>`位于`<div>`.

尝试`<form>`在您的调用中减少对您的元素的标记`html()`：

```
$.get("tests.html", function(data) {
    $(".result").html($(data).find("form").html());
}); 
```

或者更好的是，使用为此目的而设计的[load() ：](http://api.jquery.com/load/)

```
$(".result").load("tests.html form"); 
```

# powershell - 使用 schtasks.exe 的 Powershell 计划任务返回错误成功无法识别

> ID：14738567
> 
> 赞同：2
> 
> 时间：2013-02-06T20:52:10.103
> 
> 标签：powershell, windows-task-scheduler

我正在尝试`schtasks.exe`使用以下命令安排另一个 powershell 脚本：

```
$Command = cmd /c "$Env:WinDir/system32/schtasks.exe /create /s $ComputerName  /tn $TaskName /tr $TaskRun /sc $Schedule /d $Days /st $StartTime /RU system"

Invoke-Expression $Command 
```

它在远程服务器上安排任务但抛出错误：

> “‘SUCCESS:’一词未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。请检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。

它确实在正确的时间成功地安排了作业，但会引发此错误。
有谁知道如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:02:03.293

显示错误是因为当您创建`$command`变量时，您将它的值设置为表达式的 RESULT，即`SUCCESS`. 该命令在您执行之前完成运行`Invoke-Expression`。因此，`Invoke-Expression`实际上将结果 ( `SUCCESS`) 作为脚本块运行，并且您会收到错误消息。证明：

```
PS > $command = whoami

PS > $command
computer\user

PS > $command = 'whoami'

PS > $command
whoami 
```

您可以像创建`$command`变量时那样直接调用命令，也可以将表达式（`cmd /c ...`）保存为字符串，然后调用它。前任：

```
$Command = 'cmd /c "$Env:WinDir/system32/schtasks.exe /create /s $ComputerName  /tn $TaskName /tr $TaskRun /sc $Schedule /d $Days /st $StartTime /RU system"'

Invoke-Expression $Command 
```

# android - 无法让 DialogFragment 以编程方式关闭

> ID：14738572
> 
> 赞同：4
> 
> 时间：2013-02-06T20:52:39.073
> 
> 标签：android, android-fragments, android-dialogfragment

我有一个 DialogFragment 显示要从中选择的项目列表（类似于消息传递中的附加对话框）。

我的问题是我无法让这个对话框选择选择项目时。我试过打电话`dismiss()`和`getDialog().dismiss()`里面`OnItemClickListener`，没有运气。我试图通过 FragmentManager 删除对话框，我试过了`fragmentManager.popBackStack()`，都无济于事。我无法关闭此对话框。在对话框外部单击或点击后退按钮时它会消失，但我的代码中没有任何东西可以让它消失。

有没有人见过这个？如何让对话框正确关闭？

对话代码：

```
public class ShareDialog extends DialogFragment {

public enum ShareType {
    Camera, Gallery, Web, Whiteboard, Browse,
}

BaseAdapter mShareAdapter = new BaseAdapter() {

    @Override
    public View getView(int position, View contentView, ViewGroup parent) {
        TextView view = null;
        if (contentView == null) {
            view = (TextView) getLayoutInflater(null).inflate(android.R.layout.simple_list_item_1, parent, false);
        } else {
            view = (TextView) contentView;
        }
        int draw = 0;
        switch (ShareType.values()[position]) {
        case Browse:
            view.setText("Browse Content...");
            draw = R.drawable.ic_share_browse;
            break;
        case Camera:
            view.setText("Image from Camera...");
            draw = R.drawable.ic_share_camera;
            break;
        case Gallery:
            view.setText("Image from Gallery...");
            draw = R.drawable.ic_share_gallery;
            break;
        case Web:
            view.setText("New Browsing Session");
            draw = R.drawable.ic_share_web;
            break;
        case Whiteboard:
            view.setText("New Whiteboard");
            draw = R.drawable.ic_share_whiteboard;
            break;
        }
        view.setCompoundDrawablesWithIntrinsicBounds(draw, 0, 0, 0);
        view.setCompoundDrawablePadding(8);
        return view;
    }

    @Override
    public long getItemId(int position) {
        return ShareType.values()[position].ordinal();
    }

    @Override
    public Object getItem(int position) {
        return ShareType.values()[position];
    }

    @Override
    public int getCount() {
        return ShareType.values().length;
    }
};

public Dialog onCreateDialog(android.os.Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    builder.setTitle("Share which?");
    ListView list = new ListView(getActivity());
    list.setAdapter(mShareAdapter);
    list.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long itemId) {
            dismiss(); // WHY DOESN'T THIS WORK???
            if (listener != null)
                listener.newShare((ShareType) mShareAdapter.getItem(position));
        }
    });
    builder.setView(list);
    return builder.create();
}

public interface ShareDialogListener {
    void newShare(ShareType type);
}

private ShareDialogListener listener;

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    // Verify that the host activity implements the callback interface
    try {
        // Instantiate the AutoconnectListener so we can send events to the host
        listener = (ShareDialogListener) activity;
    } catch (ClassCastException e) {
        // The activity doesn't implement the interface, throw exception
        throw new ClassCastException(activity.toString() + " must implement ShareDialogListener");
    }
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:50:12.967

为什么不使用 AlertDialog.Builder 上可用的方法来构建列表，而不是创建自己的 ListView 并填充它？

我已经修改了您的示例代码以显示它是如何工作的，并且在此示例中，对话框dismiss() 功能正常。

```
public Dialog onCreateDialog(android.os.Bundle savedInstanceState) {
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setSingleChoiceItems(mShareAdapter, 0, new OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                dialog.dismiss();
                if (listener != null) {
                    listener.newShare((ShareType) mShareAdapter.getItem(which));
                }
            }
        });
        builder.setTitle("Share which?");
        return builder.create();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-14T17:26:12.853

对于某些 - 我不知道 - 原因，您从 getDialog() 返回的对话框引用不是您想要在侦听器内部使用的引用。您需要调用 builder.create(); 时提供的对对话框的引用；

例如：

```
 final AlertDialog dialog = builder.create();
    list.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            dialog.dismiss();
        }
    });
    return dialog; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-12T12:35:25.203

哈....

我已经找到了...

这实际上是我们的原因......我们试图膨胀一个xml，并调用：

```
DialogFragment.this.getLayoutInflater(null).inflate(...); 
```

就像我在评论中所说的那样，这个调用会导致创建 4 个对话框，然后一切都搞砸了。

正确的方法是调用：

```
LayoutInflater layoutInflater = (LayoutInflater) getActivity().getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
layoutInflater.inflate(...); 
```

这个修复一开始就为我解决了烦人的错误！

# tsql - 通过环境变量将空字符串值传递给 TSQL 脚本

> ID：14738574
> 
> 赞同：2
> 
> 时间：2013-02-06T20:52:51.160
> 
> 标签：tsql, environment-variables, sqlcmd, dereference, null-string

我有一个 DOS 批处理文件，我想用它来调用 TSQL 程序。我想传递要使用的数据库的名称。这似乎有效。我想为要使用的表的名称传递前缀。所以对于测试表，我想传递一个前缀的名称来使用测试表。

```
set svr=myserver
rem set db=myTESTdatabasename
set db=mydatabasename
rem set tp=TEST
set tp=
sqlcmd -S %svr% -d somename -i test01.sql 
```

test01.sql 看起来像这样：

```
use $(db)
go

select top 10 * into $(db).dbo.$(tp)dsttbl from $(db).dbo.$(tp)srctbl 
```

它适用于测试的东西，但对于真实的东西，我只想将 tp 的值设置为 null 以便它将使用真实的表名而不是虚假的表名。

我这样做的原因是因为我不知道将在实际数据库中使用的所有内容的名称。我正在尝试使其通用，因此我不必对将是一个非常大的 sql 程序（真正的 sql 程序已经有数百行）进行一堆搜索替换。

在测试用例中，这将解决

```
select top 10 * into myTESTdatabasename.dbo.TESTdsttbl from myTESTdatabasename.dbo.TESTsrctbl 
```

对于生产运行，它应该解决

```
select top 10 * into mydatabasename.dbo.dsttbl from mydatabasename.dbo.srctbl 
```

问题似乎是它不喜欢 $(tp) 的空值，或者它可能得到一个未定义的变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T06:34:47.453

我尝试了一些语法，正如 Preet Sangha 指出的那样，您应该使用 /V 命令行选项。

原因是在批处理脚本中将变量设置为空字符串会取消[定义它](https://stackoverflow.com/questions/7219672/how-to-undefine-an-ms-dos-variable)。

如果您想在批处理文件的顶部设置数据库名称，您仍然可以使用 set，如下所示：

```
set db_to_use= 
```

然后，您可以使用 /V 选项在 sqlcmd 中使用此（未定义）变量：

```
sqlcmd -S %svr% -d somename -v db="%db_to_use%" -i test01.sql 
```

...或者您可以直接在 sqlcmd 行中设置值：

```
sqlcmd -S %svr% -d somename -v db="" -i test01.sql 
```

# linux - Problems with netlink socket, kernel opps 0002

> ID：14738580
> 
> 赞同：0
> 
> 时间：2013-02-06T20:53:19.007
> 
> 标签：linux, netlink

I try to send some data from user mode to my kernel module. But when it send something, it triggers a kernel error:

Bug:unable to handle kernel paging request ad ffff88022f168bc0

IP: [<...>]build_skb+0xf5/0x1c0

```
#include "socket.hpp"

using namespace std;

KernelSocket::KernelSocket(DataLink * dl){
    this->dl = dl;

    this->sock_fd = socket(PF_NETLINK, SOCK_RAW, NETLINK_USER);
    if(sock_fd<0) {
        printf("unable to create socket%d\n", sock_fd);
        exit(-1);
    }
    memset(&src_addr, 0, sizeof(src_addr));
    src_addr.nl_family = AF_NETLINK;
    src_addr.nl_pid = getpid();
    //src_addr.nl_groups = 0;

    bind(sock_fd, (struct sockaddr*)&src_addr, sizeof(src_addr));
    memset(&dest_addr, 0, sizeof(dest_addr));
    memset(&dest_addr, 0, sizeof(dest_addr));
    dest_addr.nl_family = AF_NETLINK;
    dest_addr.nl_pid = 0;
    dest_addr.nl_groups = 0;

    nlh = (struct nlmsghdr *)malloc(NLMSG_SPACE(MAX_PAYLOAD));
    memset(nlh,0,NLMSG_SPACE(MAX_PAYLOAD));
    nlh->nlmsg_len = NLMSG_SPACE(MAX_PAYLOAD);
    nlh->nlmsg_pid = getpid();
    nlh->nlmsg_flags = 0;

    reportLocalAddress();

}

void KernelSocket::sendToKernel(string data){

    int length = data.length();
    char c;
    c = (length%0xff);
    data.insert(0, 1, c);
    c = (length/0xff);
    data.insert(0, 1, c);

    nlh->nlmsg_len = NLMSG_SPACE(MAX_PAYLOAD);
    nlh->nlmsg_pid = getpid();
    nlh->nlmsg_flags = 0;
    memcpy((NLMSG_DATA(nlh)), data.c_str(), length+2);

    iov.iov_base = (void *)nlh;
    iov.iov_len = nlh->nlmsg_len;
    //iov.iov_len = length;
    msg.msg_name = (void *)&dest_addr;
    msg.msg_namelen = sizeof(dest_addr);
    msg.msg_iov = &iov;
    msg.msg_iovlen = 1;

    sendmsg(sock_fd,&msg,0);
}

void KernelSocket::reportLocalAddress(){
    int length = 6;
    string data = dl->localAddress.toString();
    data.insert(0,1, 0xff);
    data.insert(0,1, 0xff);

    nlh->nlmsg_len = NLMSG_SPACE(MAX_PAYLOAD);
    nlh->nlmsg_pid = getpid();
    nlh->nlmsg_flags = 0;
    memcpy((NLMSG_DATA(nlh)), data.c_str(), length+2);

    iov.iov_base = (void *)nlh;
    iov.iov_len = nlh->nlmsg_len;
    msg.msg_name = (void *)&dest_addr;
    msg.msg_namelen = sizeof(dest_addr);
    msg.msg_iov = &iov;
    msg.msg_iovlen = 1;

    sendmsg(sock_fd,&msg,0);
    printf("send mac address to kernel\n");

}

void * kernelSocketWorkLoop(void * kernelSocket){
    int length,ret;
    KernelSocket * ks = (KernelSocket *) kernelSocket;
    while(1){
        ret = recvmsg(ks->sock_fd, &(ks->msg), MSG_DONTWAIT);
        if(ret>=0){
            string c;
            c.assign((char *)NLMSG_DATA(ks->nlh));
            length = c[0]*0xff+c[1];
            ks->dl->packetDownBuffer.push(c);

        }
        sleep(1);
    }
} 
```

I am using this period code now. Anybody have opinion on this problem? Thanks~

Here is the function in the kernel module that I use to receive message.

```
static void ss_recv(struct sk_buff *skb){
    struct nlmsghdr *nlh;
    int len;
    char * c;
    struct uwmodem_priv* priv = NULL;
    priv = netdev_priv(dev);

    printk("in ss_recv\n");
    nlh = (struct nlmsghdr *)skb->data;
    if(nlh->nlmsg_pid>0){
        priv->daemon_pid = nlh->nlmsg_pid;
        len = nlh->nlmsg_len - NLMSG_HDRLEN;
        c = kmalloc(len, GFP_ATOMIC);
        if(c==NULL){
            printk("Fail to allocate c\n");
        }
        memcpy(c, nlmsg_data(nlh), len);
        if(c[0]==0xff && c[1]==0xff){
            printk("Set MacAddress(%d) \n", nlh->nlmsg_pid);
            //for mac address
            memcpy(dev->dev_addr, c+2, ETH_ALEN);

        }else{
            len = c[0]*0xff+c[1];

            //printk("Kernel Length:[%d][%d][%d]\n", c[0], c[1], c[2]);

            printk("Kernel received from (%d)[%d]: \n", nlh->nlmsg_pid,len);
            uwmodem_rx(dev, c+2, len);
        }

        kfree(c);
    }
    //printk("Exit ss_recv\n");
} 
```

# c++ - 写向量 二进制模式

> ID：14738581
> 
> 赞同：-1
> 
> 时间：2013-02-06T20:53:19.760
> 
> 标签：c++, binary, output

我有以下代码（C++）

```
vector<unsigned char> bytes;
bytes.push_back('e');
bytes.push_back('P');
bytes.push_back('R');
bytes.push_back('f');

...

ofstream file(compiledFile, ios::out | ios::binary);
file.write((const char*) &binary[0], binary.size());
file.close(); 
```

但结果是输出文件我有“rPRf”而不是字节。

我做错了什么？结果我需要“65505266”字节。

谢谢你们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T20:56:28.683

`e`, `P`,`R`和`f`是字节。该文件有 4 个字符（字节）长，其中包含您放在那里的内容。

“二进制文件”和“文本文件”之间的唯一区别是如何在 Windows 上读取/写入换行符（在非常旧的操作系统上可能还有一些其他特殊字符）。`e`字符和数字之间的唯一区别`65`是您用来读取文件的程序如何选择显示它。将显示一个文本编辑器`e`和一个十六进制编辑器`65`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T20:58:01.303

这是你想要做的吗？

```
for( unsigned int i=0; i<bytes.size(); ++i ) {
    file << int(bytes[i]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:15:27.820

当我尝试这个时

```
unsigned char * array = new unsigned char [4];
*(array)='e';
*(array+1)='P';
*(array+2)='R';
*(array+3)='a';

std::ofstream out(fname, std::ofstream::binary);
out.write((char*)array,3);
out.close(); 
```

它工作正常，在输出文件中，使用文本编辑器我只有字节码。

# python - asyncore server: Request resulting in "socket.error'>:[Errno 32] Broken pipe)"

> ID：14738586
> 
> 赞同：0
> 
> 时间：2013-02-06T20:53:37.263
> 
> 标签：python, asyncore

I'm writing an asyncore server which fetches info from another module in same process and writes it back to client. The info basically is a dictionary where for each key we have a queue of messages. I'm required to dump the length of each queue. The code runs fine on a test machine but as soon as I install it on a production server I start getting following error message : "socket.error'>:[Errno 32] Broken pipe)".

This is the server:

```
class request_handler (asyncore.dispatcher):
    def __init__(self, conn_sock, client_address, dict):
            self.client_address  = client_address
            self.buffer = ""
            self.dict = dict
            asyncore.dispatcher.__init__(self, conn_sock)

    def readable(self):
            return True

    def writable(self):
            return False

    def handle_read(self):
            data = self.recv(SIZE)
            mtats = "msgq-stats"

            if data:
                    buffer = data
                    if buffer.lower() == mstats.lower():
                            msgout = "-- Message Queue Stats --\n"
                            for key, value in dict.items():
                                    mq = 0
                                    if dict[key].message_queue:
                                            mq = len(dict[key].message_queue)
                                    msgout += key + ":" + str(mq) + "\n"
                            self.send(msgout)
                    else:   self.send("Invalid input\n")
            else:
                    self.send("Invalid input\n")

    def handle_write(self):
            print ("--Handling read--\n")

    def handle_close(self):
            pass

# ---------------------------------------------------------------------

class monitor_server (asyncore.dispatcher):
    def __init__ (self, ip, port, destination):
            sys.path.append('/path/')
            import dict

            self.ip = ip
            self.port = port
            self.dict = dict
            asyncore.dispatcher.__init__ (self)
            self.create_socket (socket.AF_INET, socket.SOCK_STREAM)

            self.set_reuse_addr()
            self.bind ((ip, port))
            self.listen (5)

    def writable (self):
            return 0

    def handle_read (self):
            pass

    def readable (self):
            return self.accepting

    def handle_connect (self):
            pass

    def handle_accept (self):
             (conn_sock, client_address) = self.accept()
             request_handler (conn_sock, client_address, self.destination) 
```

and this is the client code:

```
class Client(asyncore.dispatcher_with_send):
   def __init__(self, host, port, message):
      asyncore.dispatcher.__init__(self)
      self.create_socket(socket.AF_INET, socket.SOCK_STREAM)
      self.connect((host, port))
      print "Message being sent is "
      print message
      self.out_buffer = message

  def handle_close(self):
      self.close()

  def handle_read(self):
      print self.recv(1024)
      self.close()

 c = Client('', 6000, 'msgq-stats')
 asyncore.loop() 
```

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:13:52.170

这是您必须处理的错误情况。有时连接会关闭。与生产相比，在开发过程中遇到不同的套接字错误是正常的，因为有很多不同的可能错误，它们几乎完全取决于执行环境以及连接另一端的程序正在做什么以及什么客户端和服务器之间的所有路由器都决定这样做。

所以，你的问题的字面答案是你需要在你的应用程序代码中处理这个和许多其他套接字错误。当您使用 asyncore 时，这是您工作的一部分。添加必要的异常处理并在发生此类情况时将连接标记为已关闭。

一个稍微好一点的答案是，有更高级的工具可以使网络编程更容易，您可能应该考虑使用这些工具。这个领域的大事是[Twisted](http://twistedmatrix.com/)。

# matlab - 在 MATLAB 中自动打开文件

> ID：14738587
> 
> 赞同：1
> 
> 时间：2013-02-06T20:53:37.950
> 
> 标签：matlab, file

我正在运行一个关于磁力测量的程序。我有一个包含 10 多个文本文件的文件，每个文件都包含精确磁场值的数据（幅度与频率）。

然后我的程序读取每个文件，绘制数据，对这些文件进行拟合，然后我使用这种拟合来根据 2 个幅度峰值之间的频率距离找到磁场（这只是理论，没有必要理解这部分）。

我想要的只是一些代码行，可以打开指定目录中的所有文件并让我使用数据（即`data = importdata(filenames{i},delimiterIn,headerlinesIn);`）

后来我有一行询问用户他想打开哪个数据文件，它会返回磁场值。

所以我需要使用两个文件夹：一个包含数据来创建我的拟合和方程。一个包含用户想要打开的任何数据文件以查找在获取数据时应用的磁场。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T22:02:14.427

从问题中不清楚您是否希望用户以交互方式执行此操作，所以我假设您这样做。要选择可以使用的文件夹`uigetdir`，例如：

```
d = uigetdir('C:\'); 
```

将显示 C: 驱动器上的目录以供选择，等等...同样，要选择该文件夹中的所有文件，您可以使用`dir`. 例如，如果您想挑选出用户选择的文件夹中的所有 TXT 文件：

```
 d = uigetdir(pwd, 'Select a folder');
 files = dir(fullfile(d, '*.txt')); 
```

# clearcase - Relating baselines from parent stream to those in a child stream

> ID：14738589
> 
> 赞同：2
> 
> 时间：2013-02-06T20:53:43.353
> 
> 标签：clearcase

Suppose you make a baseline in a child stream (e.g. release), name it **baseline_rel_X** and then at the same time you deliver the changes to the parent stream (e.g. integration) and also make a baseline there called **baseline_int_Y**. At that point, the baselines baseline_rel_X and baseline_int_Y are effectively the same (notwithstanding different streams, each element will be the same if compared).

Is there a way to relate (establish equality) between a baseline in the parent stream and its corresponding baseline in a child stream, in this example relate **baseline_rel_X** to **baseline_int_Y**, given that their names are different?

The reason we want to do this is to help us list all the files to be deployed to PROD, which corresponds to the parent (integration) stream above. We make many baselines in our child (release) stream, which corresponds to our TEST/UAT environment, until we collect enough changes to make one in the integration stream, which goes into PROD. You could say that there is a one-to-many relationship between baselines in PROD and TEST/UAT. So we want to take the integration baseline that is currently in PROD, **relate it to its original baseline in the release stream (that unfortunately has a different name)**, and then do a diff between that and the most recent baseline to list all the changes we've made since we last released to PROD.

I know this sounds confusing but I am hoping it makes some sense.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:07:45.383

而不是试图：

*   做一些复杂或冗长的事情`cleartool diffbl`
*   依赖于您无法更改的命名约定

我将[在**属性**](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_mkattr.htm)`baseline_rel_X`中记录您将交付 ( ) 到对象中的基线表单的名称`baseline:baseline_int_Y@\pvob`。

其他方法是：

*   [在 rel 中寻找一个与交付活动名称](https://stackoverflow.com/a/9328314/6309)（以流和交付日期命名）足够接近的基线：这是非常不精确的。
*   查找应该存在于源基线和目标基线之间的超链接。再次，有点复杂。

# ruby - 你如何设置 Rack::URLMap 在 Sinatra 中使用 RSpec？

> ID：14738590
> 
> 赞同：3
> 
> 时间：2013-02-06T20:53:43.607
> 
> 标签：ruby, testing, rspec, sinatra, rack

我对 Sinatra 比较陌生，我想找到一种将 RSpec 与我的 Sinatra 设置集成的方法。

配置.ru

```
require 'sinatra'
require 'mongoid'
require 'uri'
require './lib/twilio_wrapper'

Mongoid.load!("./config/mongoid.yml")

Dir["./controllers/*.rb"].each { |file| require file }

run Rack::URLMap.new(
  '/' => HomeController.new,
  '/users' => UsersController.new(TwilioWrapper.new)
) 
```

通过这个设置，我可以模块化我的控制器并创建帮助类的单个实例（例如 TwilioWrapper）。但是，如果我想设置 RSpec，我需要将它指向我的应用程序的类。但是，在上述情况下，因为我使用的是 Rack::URLMap，所以我没有特定的应用程序类来指向 RSpec。

如何在包含 RSpec 进行测试的同时以上述方式保持代码模块化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:37:30.107

Rack 不关心控制器，它关心应用程序。2 个 Sinatra 应用程序在 Rack 中“架起”也是`HomeController`如此。`UsersController`这些不是控制器，它们是独立的 Rack 应用程序。我不认为您想要 2 个应用程序，而是将这 2 个控制器放在 2 个文件中，以便您可以分别指定它们并保持代码可读。

Sinatra 的命名约定是将其命名为`MyApp`反映这一点。Sinatra 是一个平面框架，但您可以根据需要命名您的“控制器”文件。

所以在文件夹中`routes`你可以有'users.rb'和'home.rb'但两个文件都在顶部

```
MyApp < Sinatra::Application 
```

然后您可以使用`Rack::Test`Rspec 进行测试。

如果您确实想测试 2 个应用程序并希望使用`Rack::Test`w Rspec 前缀，您只需`app`在您的 spec_helper 或 spec 文件中定义为：

```
 def app
  run Rack::URLMap.new(
   '/' => HomeController.new,
   '/users' => UsersController.new(TwilioWrapper.new)
  )
 end 
```

所做的只是将你`Rack::Test`的 Sinatra 应用程序打包到一个测试容器中。

另请参阅 Phrogz 关于[如何布置 Sinatra 应用程序的出色答案](https://stackoverflow.com/questions/5015471/using-sinatra-for-larger-projects-via-multiple-files)

# jquery - jQuery UI Draggable - why am I getting improper ids from e.srcElement.id only on occasion?

> ID：14738594
> 
> 赞同：0
> 
> 时间：2013-02-06T20:54:14.827
> 
> 标签：jquery, jquery-ui

I am incredibly confused. Right now, I have a draggable set to:

```
$('li.drag').draggable(); 
```

But once is a while, I will grab an element and it will return the parent div or the parent li's id when I call e.srcElement.id on my droppable:

```
$('h3.drop-target').droppable({
    accept: 'li.drag',
    drop: function(e) {
        alert(e.srcElement.id);
    }
}); 
```

This is very strange, as it will work fine for the EXACT same elements on some occasions, then I will refresh and it will error, usually just on one or two, on the same ones it was just successful on. Any ideas why I am am getting sporadic behavior?

jQuery 1.8.2 and UI 1.8.24

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T15:56:57.460

这个答案可能来得有点晚，但万一其他人来到这里需要答案。这对我们有用：

使用“ui.item.context.id”而不是“srcElement.id”

# php - How does Ruby handle undeclared variables as opposed to php?

> ID：14738599
> 
> 赞同：1
> 
> 时间：2013-02-06T20:54:27.550
> 
> 标签：php, ruby-on-rails, ruby

In php, I can comfortably write:

```
if (x > 100) 
{ 
   method(); 
} 
```

knowing that if x doesn't exist, my program will treat it as a small bump in the road and keep going.

I'm used to php's ultra-lax variable typing and undeclared handling, and wondering what the rules of Ruby are in relation to this.

What is Ruby's default action when you try to evaluate something that isn't declared?

And if I can pepper this in too... does null, zero, and false equal the same thing in Ruby? Would

```
if(!x)
{
  puts 'works'
} 
```

puts?

I know these are very simple questions, but either they're too obvious for me to catch or I'm using the wrong search phrases.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T20:58:06.580

1.  如果您使用未贴花的变量，Ruby 会抱怨。

2.  在 ruby​​ 中，您通常不会将一个包含`if`在`{`and中`}`，而是将其放入`if`并以 . 结尾`end`。

3.  `false` `nil`并且`0`是不同的东西。您的代码将抱怨`x`未定义，并且仅`puts`当`x`is`false`或`nil`

4.  在红宝石中检查一个值是否像这样`nil`使用`nil?``if !x.nil?`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:02:58.957

从最后一个问题开始：在红宝石中，零不被视为假，唯一的假值是：`nil`和显然`false`。其他一切都是“真实”价值。

注意：我将使用实例变量，因为局部变量没有被实例化是不正常的。

那么为什么这行不通

```
if @x > 100 
  method()
end 
```

因为`>`在 ruby​​ 中实际上是一个方法调用，所以如果`@x`是 nil （未定义的变量），它将引发 a`NoMethodError`因为 nil 没有定义该方法。

```
NoMethodError: undefined method `>' for nil:NilClass 
```

所以你可以在你的条件下做的是首先确保`@x`具有这样的值：

```
if @x && @x > 100 
  method()
end 
```

# extjs - how do I define a nested store for ext.js using ext.net

> ID：14738604
> 
> 赞同：0
> 
> 时间：2013-02-06T20:54:46.000
> 
> 标签：extjs, ext.net

Platform - Ext.net 2.1 in an MVC project. The data is coming back as json from a DirectMethod and I'm binding on the client.

I'm returning the results of a dataset with multiple tables with relationships defined between the tables. I want to bind the resulting data to a store to be used in a dataview. The first dataview that I'm filling, only uses the highest level of data. However, when the user selects a record in the dataview, I want to bind to another template in a different dataview to provide all levels of information.

```
Tables

Account
--- Addresses 
```

(I'll skip the other table for now)

Here is the definition of my models and store:

```
@(Html.X().Model()
      .Name("SearchResults.Models.Address")
      .IDProperty("nafnmfuid")
      .Associations(assoc => assoc.Add(new BelongsToAssociation() {Model = "SearchResults.Models.Account"}))
      .Fields(
          new ModelField("nafnmfuid", ModelFieldType.Int),
          new ModelField("naftype"),
          new ModelField("nafadd1"),
          new ModelField("nafcity"),
          new ModelField("nafstate"),
          new ModelField("nafzip")
      ))

@(Html.X().Model()
    .Name("SearchResults.Models.Account")
    .IDProperty("nmfuid")
    .Associations(assoc => assoc.Add(new HasManyAssociation() {Name = "Addresses", Model = "SearchResults.Models.Address", AssociationKey = "Addresses", PrimaryKey = "nmfuid", ForeignKey = "nafnmfuid"}))
    .Fields(
        new ModelField("nmfuid", ModelFieldType.Int),
        new ModelField("AmfLastNamePrimary"),
        new ModelField("AmfFirstNamePrimary"),
        new ModelField("nmfid"),
        new ModelField("naftype"),
        new ModelField("nafadd1"),
        new ModelField("nafcity"),
        new ModelField("nafstate"),
        new ModelField("nafzip")
    )
)    

@(Html.X().Store()
            .ID("StoreSearchResults")
            .ModelName("SearchResults.Models.Account")
            .Reader(readers => readers.Add(Html.X().JsonReader()))
      ) 
```

I tried returning the data as nested json as well as three objects in the json.

When I bind the data (on the client), I get the new field in the highest level (Account) called Addresses. However, the field is an empty array.

When I look at the RAW property of the Account record, I see all the nested data.

Here is the ext.js code that's generated by Ext.net

```
 window.App.StoreSearchResults2 = Ext.create("Ext.data.Store", {
    model:Ext.define("SearchResults.Models.Address",  {
        extend: "Ext.data.Model"
        , fields:[ {
            name:"nafnmfuid"
            ,type:"int"
        }
        , {
            name:"naftype"
        }
        , {
            name:"nafadd1"
        }
        , {
            name:"nafcity"
        }
        , {
            name:"nafstate"
        }
        , {
            name:"nafzip"
        }
        ]
        ,idProperty:"nafnmfuid"
        ,associations:[ {
            type:"belongsTo"
            ,model:"SearchResults.Models.Account"
        }
        ]
    })
    ,storeId:"StoreSearchResults2"
    ,autoLoad:true
    ,proxy: {
        type:'memory'
        , reader: {
            type:"json"
        }
    }
});
window.App.StoreSearchResults = Ext.create("Ext.data.Store", {
    model:Ext.define("SearchResults.Models.Account",  {
        extend: "Ext.data.Model"
        , fields:[ {
            name:"nmfuid"
            ,type:"int"
        }
        , {
            name:"AmfLastNamePrimary"
        }
        , {
            name:"AmfFirstNamePrimary"
        }
        , {
            name:"nmfid"
        }
        , {
            name:"naftype"
        }
        , {
            name:"nafadd1"
        }
        , {
            name:"nafcity"
        }
        , {
            name:"nafstate"
        }
        , {
            name:"nafzip"
        }
        ]
        ,idProperty:"nmfuid"
        ,associations:[ {
            type:"hasMany"
            ,associationKey:"addresses"
            ,primaryKey:"nmfuid"
            ,model:"SearchResults.Models.Address"
            ,foreignKey:"nafnmfuid"
            ,name:"Addresses"
        }
        ]
    })
    ,storeId:"StoreSearchResults"
    ,autoLoad:true
    ,proxy: {
        type:'memory'
        , reader: {
            type:"json"
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:43:58.090

问题是我在客户端使用方法 loadData 来绑定数据。切换到 loadRawData 就成功了。

# sharepoint - Get ID of Selected List Item

> ID：14738605
> 
> 赞同：1
> 
> 时间：2013-02-06T20:54:53.460
> 
> 标签：sharepoint, sharepoint-2010

I am trying to get the ID of a selected list item using JavaScript. Basically I am trying to get the ID using JavaScript and then in the same javascript redirect to a page with the selected ID in the querystring.

This is my javascript:

```
function GetID() {
    var ctx = SP.ClientContext.get_current();
    var items = SP.ListOperation.Selection.getSelectedItems(ctx);
    window.location.href = "/_layouts/CustomApplicationPage/CustomApplicationPage.aspx?ID=" + items;
} 
```

But the results I get in my querystring are:

```
CustomApplicationPage.aspx?ID=[object Object] 
```

Does anyone know how to get the ID of the selected list item or point me to the correct method to use in JavaScript?

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:07:44.963

问题是这里描述 `items`的类型：http: [//msdn.microsoft.com/en-us/library/ff409526 (v=office.14).aspx](http://msdn.microsoft.com/en-us/library/ff409526(v=office.14).aspx)`Dictionary`

由于您只是试图取回一个值，因此您可以通过引用`Dictionary`.

```
window.location.href = "/_layouts/CustomApplicationPage/CustomApplicationPage.aspx?ID=" + items[0].id; 
```

# asp-classic - classic ASP recordset field not being allowed to evaluate

> ID：14738606
> 
> 赞同：0
> 
> 时间：2013-02-06T20:54:53.947
> 
> 标签：asp-classic

I am returning a value from my database. The data type is a string. I checked with TypeName. However, my if condition never works despite it printing the value I am checking for. Any ideas?

```
while NOT prs.EOF

    RecordStatus = prs("status")

    If (RecordStatus = "S") Then
        response.write("Scheduled!<br>")
        prs.MoveNext
    Else
        response.write(RecordStatus & "<BR>")
        prs.MoveNext
   End If

Wend
prs.Close 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:17:56.600

此外，请考虑将 MoveNext 放在最后一行。

```
while NOT prs.EOF

    RecordStatus = prs("status")    

    If (Trim(RecordStatus) = "S") Then
        response.write("Scheduled!<br>")
    Else
        response.write(RecordStatus & "<BR>")
    End If

    prs.MoveNext    
Wend
prs.Close 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:55:19.940

Same result, half the code:

```
do while NOT prs.EOF
    RecordStatus = ucase(trim(prs("status")))
    If RecordStatus = "S" Then response.write "Scheduled!<br>" Else response.write RecordStatus & "<br>"
    prs.MoveNext
loop
prs.close 
```

You could also do this logic check with a case statement inside the SQL query itself:

```
select case lower(status) when 's' then 'Scheduled!' else status end as sresult from <yourdatabase> 
```

Then use the code:

```
do while NOT prs.EOF
    sresult = prs("sresult") & "<br>"
    response.write sresult
    prs.MoveNext
loop
prs.close 
```

Hope it help :)

# sql - SQL 跟踪正确的工作流使用情况

> ID：14738616
> 
> 赞同：1
> 
> 时间：2013-02-06T20:55:41.747
> 
> 标签：sql, oracle

我有这个问题我必须弄清楚希望我能有效地解释它。

*   *Event*的操作顺序是：开始→沟通→销售完成
*   *状态*的操作顺序是：工作→完成

我需要确保每个用户都遵循流程而不是跳过步骤

所以就像在这个例子中：

![表格示例](../Images/e1deb40314e1da615631817e14cfcea0.png)

*   Bobo 正在与两个客户合作
    *   第一个客户，他仍处于沟通阶段，但他正在关注操作顺序的流程
    *   但在他的第二个客户上，他没有完成 Start 状态，然后继续进行 Communicating。
*   Mike 从工作状态的开始事件到完成状态的通信事件，再到工作状态的销售完成事件。所以迈克也没有遵循操作顺序。

显然，在像这样的超小规模上，只需要稍微看一下这个就可以看到那个。不幸的是，在任何给定时间，我们都有数百名用户和数千名客户与之合作。

我只需要计算未遵循流程的客户 ID（这不是他们没有完成完整流程而错过步骤的问题。）以及与该客户合作的用户名

所以我猜结果看起来像

```
Bobo     1
Mike     1 
```

这意味着 Bobo 有 1 个他正在处理的帐户，他跳过了与 Mike 相同的步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:39:27.740

如果您的应用程序中的阶段以非常严格的顺序定义，您可以使用这种方法或类似的逻辑，并且您可以拥有如下的参考表。

```
with t2 as
(
select 1 id, 'start'            event from dual union all
select 2 id, 'communicating'    event from dual union all
select 3 id, 'salecomplete'     event from dual
)
select * from t2;

        ID EVENT
---------- -------------
         1 start
         2 communicating
         3 salecomplete 
```

您可以在数据中获取 order_id/workflow_id，然后检查是否有任何其他工作流项目***应该***在该项目之前，但没有。

例如。检查没有“通信”的“完成”事件。（或）检查没有“开始”事件的“通信”事件。

这是代码。我只包含了客户 ID 级别，但将其扩展到与特定客户打交道的用户是相当直接的。

```
with t1 as  (
  select 100 cust, 'start'          event from dual union all
  select 100 cust, 'salecomplete'   event from dual union all
  select 200 cust, 'communicating'  event from dual union all
  select 200 cust, 'salecomplete'   event from dual union all
  select 300 cust, 'salecomplete'   event from dual union all
  select 400 cust, 'start'          event from dual union all
  select 400 cust, 'communicating'  event from dual union all
  select 400 cust, 'salecomplete'   event from dual
),
t2 as
(
select 1 id, 'start'            event from dual union all
select 2 id, 'communicating'    event from dual union all
select 3 id, 'salecomplete'     event from dual
),
t3 as
(
select t1.cust, t2.*
  from t1, t2
  where t1.event = t2.event
)
select * from t3 tgt
where tgt.id <> 1 --initial event can exist by itself
  and not exists (
   select 1
     from t3 src
     where tgt.cust = src.cust
       and tgt.id -1 = src.id
); 
```

这将显示缺少前一个事件的所有事件。

```
 CUST         ID EVENT
---------- ---------- -------------
       100          3 salecomplete
       200          2 communicating
       300          3 salecomplete 
```

要获取发生这种情况的客户列表，只需在最后一个查询中使用 dist cust 即可。

```
...
      CUST
----------
       100
       200
       300 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:31:56.750

你不能用你的表结构做你想做的事。在 SQL 中，表本质上是无序的。你无法知道第一件事和第二件事发生了什么。

没有这些信息，就不可能确定序列。

您是否有对行进行排序的 id 或日期时间？

使用这样的字段，您可以获得下一个状态：

```
select t.*,
       lead(EVENT) over (partition by username, customerid order by thedatetime) as nextEvent,
       lead(status) over (partition by username, customerid order by thedatetime) as nextStatus
from t 
```

接下来，您可以使用您的逻辑：

```
select t.*
from (select t.*,
             lead(EVENT) over (partition by username, customerid order by thedatetime) as nextEvent,
             lead(status) over (partition by username, customerid order by thedatetime) as nextStatus
      from t
     ) t
where not (event = 'Start' and coalesce(nextEvent, 'Communicating') = 'Communicating' or
           event = 'Communicating' and coalesce(nextEvent, 'Sale Complete') = 'Sale Complete' or
           event = 'Sale Complete' and nextEvent is not null or
           status = 'Working' and coalesce(nextstatus, 'Complete') = 'Complete' or
           status = 'Complete' and nextstatus is not null
          ) 
```

这提供了所有信息。如果您只想要 customerIds，请使用：

```
select distinct CustomerId 
```

# jquery - jQuery 和 JSON 推送错误

> ID：14738617
> 
> 赞同：0
> 
> 时间：2013-02-06T20:55:51.430
> 
> 标签：jquery, json

我正在为 Web 应用程序开发 GUI，他们希望我使用 json 来获取值。我有一个简单的脚本来提取键的值，但它不起作用。

HTML

```
<div class="get-data">
  <p>Get Data</p>
  <div class="json"> 
      <!--<p> will be created here --> 
  </div>
</div> 
```

JSON

```
 [
     {
        "id":-596859137166526783,
        "avatarDefinitionId":2,
        "tenantId":1,
        "avatarName":"qln320",
        "attributes":{
             "qln320.set.media.handling":"TEAR_OFF",
             "qln320.snr.memory.free":"66939392",
      }
     }
 ] 
```

jQuery

```
 $.getJSON('json/test.json', function(data) {
 var items = [];

 data[0].attributes['qln320.snr.memory.free'];

 $('<p/>', {
   'class': 'raw-list',
   html: items.join('')
   }).appendTo('.json');
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:02:21.063

您正在遍历`attributes`对象，`val`在代码中返回`qln320.set.media.handling`and`qln320.snr.memory.free`属性的值，实际上它返回`"TEAR_OFF"`and `"66939392"`，但是无论返回值如何，您都在推送硬编码`val.qln320.snr.memory.free`字符串。

```
$.each(data[0].attributes, function (key, val) {
    items.push(val);
});

$('<p/>', {
    'class': 'raw-list',
    html: items.join('')
}).appendTo('.json'); 
```

[http://jsfiddle.net/XDZ8Y/](http://jsfiddle.net/XDZ8Y/)

但是错误`[TypeError: a is undefined]`与发布的脚本无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:01:06.697

如果那是确切的 json 代码，那么它在一个数组中，您需要以这种方式修改您的代码，

```
$.getJSON('json/test.json', function(data) {
 var items = [];
if(data.length)
{
var data=data[0]; 
```

//其余的代码。

# ios - '-' 的右操作数是垃圾值

> ID：14738624
> 
> 赞同：4
> 
> 时间：2013-02-06T20:56:20.997
> 
> 标签：ios, objective-c, cocoa-touch, clang-static-analyzer

我第一次使用静态分析器并且很难找出箭头。在查看了一些关于 SO 的类似问题后，我认为问题在于 CGSize 大小为 nil 值，但我不完全确定它是如何工作的。

这是代码：

```
 - (void)keyboardDidShow:(NSNotification*)notification {
    CGSize size = CGSizeMake(0, 0);
    size = [self keyboardSize:notification];
      if (UIInterfaceOrientationIsLandscape(self.interfaceOrientation)) {
            detailTableView.frame = CGRectMake(detailTableView.frame.origin.x, detailTableView.frame.origin.y,
                                       detailTableView.frame.size.width, kTableViewMovableHeight + kTableViewDefaultHeight -  size.height
                                       );
    //detailTableView.scrollEnabled = YES;
    }
}

- (CGSize)keyboardSize:(NSNotification *)aNotification {
NSDictionary *info = [aNotification userInfo];
NSValue *beginValue = [info objectForKey:UIKeyboardFrameEndUserInfoKey];
UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];
CGSize keyboardSize;
UIDeviceOrientation _screenOrientation = orientation;
if ([UIKeyboardDidShowNotification isEqualToString:[aNotification name]]) {
    if (UIDeviceOrientationIsPortrait(orientation)) {
        keyboardSize = [beginValue CGRectValue].size;
    } else {
        keyboardSize.height = [beginValue CGRectValue].size.width;
        keyboardSize.width = [beginValue CGRectValue].size.height;
    }
} else if ([UIKeyboardWillHideNotification isEqualToString:[aNotification name]]) {
    if (_screenOrientation == orientation) {
        if (UIDeviceOrientationIsPortrait(orientation)) {
            keyboardSize = [beginValue CGRectValue].size;
        } else {
            keyboardSize.height = [beginValue CGRectValue].size.width;
            keyboardSize.width = [beginValue CGRectValue].size.height;
        }
        // rotated
    } else if (UIDeviceOrientationIsPortrait(orientation)) {
        keyboardSize.height = [beginValue CGRectValue].size.width;
        keyboardSize.width = [beginValue CGRectValue].size.height;
    } else {
        keyboardSize = [beginValue CGRectValue].size;
    }
}
return keyboardSize;
} 
```

![在此处输入图像描述](../Images/c3c6c566aee435d7f621b0dcb76b1acc.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T21:01:29.843

1.  CGSize 是一个 C 结构
2.  `[self keyboardSize:notification]`可能返回零

声明 C 结构时，其值具有垃圾值。也就是说，之前那段记忆中的内容。如果您的调用`keyboardSize`返回 uninitialized `CGSize`，则该 C 结构将具有所谓的“垃圾值”。

现在我看到了 CGSize 的实现，将`keyboardSize`方法中的变量 keyboardSize 的声明更改为：

```
CGSize keyboardSize = CGSizeMake(0, 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:21:43.613

您缺少 else 条件。

```
if ([UIKeyboardDidShowNotification isEqualToString:[aNotification name]]) {
    // ...
} else if ([UIKeyboardWillHideNotification isEqualToString:[aNotification name]]) {
    // ...
}
// else not handled could result in keyboardSize not being set.
return keyboardSize; 
```

您可以通过处理缺少的 else 条件或初始化 keyboardSize 来解决此问题。

```
CGSize keyboardSize = CGSizeZero; 
```

# javascript - 从不同的 Javascript 函数中检索 AJAX 值

> ID：14738631
> 
> 赞同：3
> 
> 时间：2013-02-06T20:56:36.893
> 
> 标签：javascript, jquery

在这个大型 Web 应用程序的简化示例中，考虑一个简单的注册表单，其中包含以下字段：用户名、名字、姓氏和注册按钮`type="button"`。

```
<form action="" method="post" id="cns_form">
    <table id="companyTable"><tr>
        <td width="200">
            First name*:<br />
            <input type="text" id="first_name" name="first_name">
        </td>
        <td width="200">
            Last name*:<br />
            <input type="text" id="last_name" name="last_name">
        </td>
    </tr></table>
    <input type="button" value="Register" id="register" >
</form>
<div id="alert" title="Alert"></div> 
```

* * *

当用户名字段完成时，jQuery 会触发数据库的 ajax 搜索以查看该用户名是否已经存在。单击时也会触发相同的搜索 `Register`（出于从这个简化示例中删除的原因）。

问题：离开用户名字段时一切正常。但是，单击 后`Register`，如果用户名已经存在，我不知道如何检索 AJAX 搜索的结果并停止提交表单。我已经尝试了各种不同的东西，但已将代码返回到此状态，因此读者最容易提供帮助。

例如，我尝试从[这个问题](https://stackoverflow.com/questions/9384580/javascript-function-not-returning-value)集成建议的解决方案，但我没有成功地将它应用到我的情况......我尝试`async:false`在 ajax 函数内设置......我还尝试从 checkForm 函数内部调用 checkUsername(uname)，但这也没有用。一点帮助？

jQuery document.ready：

```
$(function(){
    $('#username').blur(function() {
        var uname = $.trim($(this).val());
        checkUsername(uname);
    }); //END BLUR username

    $('#register').click(function() {
        var uname = $.trim($( '#username').val());
        checkUsername(uname);
        checkForm();
    });
}); //END document.ready 
```

* * *

AJAX 调用：

```
function checkUsername(uname) {
        if (uname != '') {
            $.ajax({
                type: "POST",
                url: 'ajax/ax_all_ajax_fns.php',
                data: 'request=does_this_username_already_exist&username=' + uname,
                async: false,
                success:function(data){
//alert('Returned AJAX data: '+data);
                    if (data != 0) {
                        var existing_user = data.split('|');
                        var fn = existing_user[0];
                        var ln = existing_user[1];
                        focus_control = 'username';
                        $( '#alert' ).html( 'That username is already in use by ' + fn +' '+ ln +'. Please choose another.' );
                        $( '#alert' ).dialog( 'open' );
                    } //EndIf data<>0
                } //End success
            }); //End $.ajax
        } //End If this.val <> ""
} 
```

* * *

checkForm 功能：

```
function checkForm() {
    var un = $.trim($( '#username').val());
    var fn = $( '#first_name').val();
    var ln = $( '#last_name').val()

    if (un=='' || fn=='' || ln=='') {
        $( '#alert' ).dialog({
            height: 200,
            width: 300,
        });
        $( '#alert' ).html( 'Fields marked with an asterisk are required.' );
        $( '#alert' ).dialog( 'open' );
    } else {
        $("#cns_form").submit();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T00:26:18.857

一个人在回答自己的问题时既高兴又哭泣，但就这样吧。解决方案是将 checkUsername() 函数作为输入参数发送给 checkForm() 函数，并使 checkUserName() 函数返回一个我们可以在 checkForm() 中检查的值。

因此，我们必须这样修改`$('#register').click`函数：

```
$('#register').click(function() {
    var uname = $.trim($( '#username').val());
    checkForm(checkUsername(uname)); //<===========================
}); 
```

* * *

*然后是checkUsername* () 函数，因此：

```
function checkUsername(uname) {
        var returnVal = 0; //<=================================
        if (uname != '') {
            $.ajax({
                type: "POST",
                url: 'ajax/ax_all_ajax_fns.php',
                data: 'request=does_this_username_already_exist&username=' + uname,
                async: false,
                success:function(data){
//alert('Returned AJAX data: '+data);
                    if (data != 0) {
                        var existing_user = data.split('|');
                        var fn = existing_user[0];
                        var ln = existing_user[1];
                        focus_control = 'username';
                        $( '#alert' ).html( 'That username is already in use by ' + fn +' '+ ln +'. Please choose another.' );
                        $( '#alert' ).dialog( 'open' );
                        returnVal = 0; //<============================
                    } //EndIf data<>0
                } //End success
            }); //End $.ajax
        } //End If this.val <> ""
    return returnVal; //<==============================
} 
```

* * *

*和*checkform() 函数因此：

```
function checkForm(exists) { //<============================
alert('sub checkForm(). value of exists: ' + exists);
    if (exists==9) { //<================================
        $( '#alert' ).html( 'That username is already in use' + existing +'. Please choose another.' );
        $( '#alert' ).dialog( 'open' );
    }else{ //<==========================================
        var un = $.trim($( '#username').val());
        var fn = $( '#first_name').val();
        var ln = $( '#last_name').val()

        if (un=='' || fn=='' || ln=='') {
            $( '#alert' ).dialog({
                height: 200,
                width: 300,
            });
            $( '#alert' ).html( 'Fields marked with an asterisk are required.' );
            $( '#alert' ).dialog( 'open' );
        } else {
            $("#cns_form").submit();
        }
    } //<===================================================
} 
```

感谢和赞扬 Felix Kling 的[这篇有用的帖子](https://stackoverflow.com/questions/14220321/how-to-return-the-response-from-an-ajax-call-from-a-function)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T21:11:07.400

`return false`可以在 HTML 表单标记中放入函数调用。

```
<form>
    <bunchOfElements />
    <button onclick="checkUserName(); return false">Check Name </button>
</form> 
```

此外，您可以使用将函数绑定到按钮的单击事件

```
$(document).ready(function(){
    $("#buttonID").bind('click', function(){ 
        //do your thing
        checkForm();
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T21:02:32.403

`return false`在您的#register 按钮单击功能的末尾放置一个，就在下面`checkForm()`。该按钮继续触发表单提交。当你有你的javascript函数处理的时候。

# maven - 在 Maven 的多个活动配置文件中定义的相同属性 - 哪一个会赢？

> ID：14738632
> 
> 赞同：4
> 
> 时间：2013-02-06T20:56:37.663
> 
> 标签：maven

当多个配置文件被激活并且它们具有相互冲突的属性定义时，究竟会发生什么？例如，如果有两个配置文件都定义了属性`${platform-path}`但将其定义为两个不同的值，那么最终使用的有效值是多少？

我尝试使用`help:effective-pom`，它似乎是文件中稍后定义的配置`settings.xml`文件，但我似乎无法在 maven 站点和 sonaType 书中看到这种行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-20T17:40:52.443

我猜这取决于xml解析器的实现。一项快速测试表明，pom 文件中变量的最后一个定义被认为是正确的。

# android - 如何获得深色 ActionBarSherlock 主题？

> ID：14738634
> 
> 赞同：2
> 
> 时间：2013-02-06T20:56:45.603
> 
> 标签：android, actionbarsherlock

我`Theme.Sherlock.NoActionBar`在我的应用程序上使用 android，它为我提供了一个轻量级的主题。有什么方法可以让我的应用程序使用深色主题？

```
<activity
        android:name=".App"
        android:label="@string/app_name"
        android:configChanges="orientation|screenSize|screenLayout"
        android:theme="@style/Theme.Sherlock.NoActionBar" > 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T21:19:00.043

我记得深色主题是 actionbarsherlock 的默认主题，只需使用

```
android:theme="@style/Theme.Sherlock" 
```

或者

```
android:theme="@style/Theme.Sherlock.NoActionBar" 
```

如果不需要操作栏

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T21:08:03.997

尝试创建样式然后使用它

```
<style name="ActionBarHomeItem" parent="Theme.Sherlock">
        <item name="android:windowActionBar">false</item>
    </style> 
```

* * *

```
<activity
        android:name=".App"
        android:label="@string/app_name"
        android:configChanges="orientation|screenSize|screenLayout"
        android:theme="@style/ActionBarHomeItem" > 
```

# javascript - 如何在javascript中将双花括号与变量连接起来

> ID：14738635
> 
> 赞同：1
> 
> 时间：2013-02-06T20:57:04.527
> 
> 标签：javascript, python, django

我似乎无法弄清楚这一点。我有一个 Python/Django 模板，它使用 {{ variable }} 呈现我的变量，并且我试图在 HTML 页面上使用 Javascript 在用户单击按钮时操纵变量。

我看到的问题是 Javascript 似乎对待 {{ 不同，因此当它呈现为 HTML 时，它不会转换变量（即它显示“+ id +”而不是下面代码中的 5：

```
function changeDate()
  id = 5;
  html = "{{ variable[" + id + "] }}";
  document.getElementById('test').innerHTML = html; 
```

我试过像这样转义它们：“{{”，这似乎有效（即，它将 'id' 转换为 5）但是 Python 不会将字符串解释为变量，它只是在页面上显示字符串作为 {{ variable[5] }} 而不是该变量的实际值。

我的*猜测是，发生这种情况是因为 Javascript 在页面已经呈现**后将*DIV 转换为新文本，因此 Python 在首次呈现页面时永远没有机会转换变量。

所以我认为有两种可能的解决方案：

1.  找出正确呈现变量的方法，同时将 {{ 和 }} 留在字符串中

或者

1.  弄清楚如何让 Python 在通过 Javascript 显示之前解释 {{ variable[5] }} 的字符串版本。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:27:02.390

Django 的模板渲染只是进行搜索/替换类型的替换：它获取花括号内的字符串 - 并将该字符串用作传递给它的字典的键。

它不会尝试将字典值作为数据结构来访问 - 相反，它会简单地采用字符串表示形式。

所以，

```
data = {"variable": ["a", "b", "c"] } 
```

可以在名称为“variable”的 dtemplate 中检索 - 但如果您尝试访问“variable[0]”，渲染模板应该引发 NameError - 仅仅是因为“variable[0]”不是上面数据字典的键.

处理它的一种方法是将索引部分推迟到客户端上的 javascript 代码，并在数据字典上传递对象的 javascript 编码 (json) 字符串 - 所以你会做一些事情：

```
import json

function changeDate()
  id = 5
  variable = ["bla", "ble", "bli", "blo", "blu", "blew"]
  html = """<script> id = {{id}};
            document.write({{variable}}[id]);
            </script>
          """
  data = {"variable": json.dumps(variable), "id": id}; 
```

并传递此数据以使用`html`模板呈现。

# c# - 我怎样才能得到空间“”作为一个字符？

> ID：14738641
> 
> 赞同：1
> 
> 时间：2013-02-06T20:57:19.353
> 
> 标签：c#, arrays, string

我有一个`text`：`"The camel is big"`，然后我寻找字母`"e"`，然后我想将接下来的两个字母存储在字符串变量中，所以我`next1`将获得价值`"l"`并`next2`存储空间`" "`；但是编译器会抛出一个异常，并显示*Index 超出了数组的范围*。这是代码：

```
for (int i = 0; i < text.Length; i++)
{
    if (text[i]=='e' || text[i]=='E')
    {
        next1 = text[i + 1].ToString();
        next2 = text[i + 2].ToString(); //this throws exception...
    }
} 
```

我理解感谢您的评论，是的，它发生`i`在最后一点，它试图获取下一个不存在的字母。好吧，我该如何防止它，我的文字很大，有时“e”可能恰好是最后一个字母......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T20:58:17.410

当您在字符串中最后一个字符之前的索引上有or时，第二行 ( `text[i + 2]`) 将引发错误。如果是*最后一个*字符，第一行 ( ) 将抛出。`e``E``text[i + 1]`

 *您提供的示例字符串不会引发异常。

到那时，`text[i + 2]`确实会越界字符串（字符数组）。

您需要在此之前循环到：

```
for (int i = 0; i < text.Length - 2; i++) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T21:00:54.857

`'e'`那么，当字符串的最后一个字符为 an 时，您期望会发生什么？

它应该根本不设置`next1`吗`next2`？它应该将它们默认为`null`还是空字符串？

一般有两种选择。将循环更改为`for`从 0 变为`text.Length-2`，这样您就永远不会处理最后两个字符（这意味着`next1`并且`next2`不会从以前的任何内容更改，或者在您的内部`if`您需要检查是否`i+1`大于长度如果是字符串，则执行“其他内容”，然后对 . 执行相同操作`i+2`。“其他内容”可以是任意数量的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T21:01:03.130

当 i 是最后一个或几乎最后一个元素时，您尝试访问数组外的元素！
尝试将循环中的交互减少 2 :)*

# jquery - 如何在不将页面滚动条重置为顶部的情况下使用 jQuery 为固定 div 设置动画

> ID：14738647
> 
> 赞同：2
> 
> 时间：2013-02-06T20:57:36.693
> 
> 标签：jquery, scroll, jquery-animate, css-position

第一次在这里发帖，所以要友善;-)

我在页面正文中有一个固定的“菜单”div，大部分隐藏在“屏幕外”，位于右侧边距，其初始顶部和右侧在 CSS 中设置为仅显示“句柄”。

div 与页面内容一起滚动 OK，并且我引入了 jQuery 的 animate 函数，以便在需要时将这个 div 滑出边缘并返回 - 当单击句柄时。这是一个简单的脚本，简化为...

```
var x = document.getElementById('menu');
if (x.style.right == '0px') {

        $j("#menu").animate({
            right:'-148px'
        });
    } else {

        $j("#menu").animate({
            right:'0px'
        });
    } 
```

问题在于，每当此菜单 div 动画被触发为“打开”或“关闭”时，页面都会重置为顶部（其滚动条位置会重置）。我尝试添加代码来捕获和重置滚动条位置，但这会在页面上引入“闪烁”效果。

关于如何在不影响页面滚动位置的情况下触发动画的任何线索？

最好的，

基思..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:16:51.937

`return false`在点击事件的末尾添加或将链接的href设置为`href="javascript:void(0)"`

# html - IE8中的CSS表格高度溢出容器div

> ID：14738652
> 
> 赞同：1
> 
> 时间：2013-02-06T20:58:00.693
> 
> 标签：html, css, internet-explorer-8, css-tables

我遇到了一个问题，我在父 div 中有一个动态构建的表。

我已将父 div 设置为最大高度，但如果表更大，则 div 表完全忽略其父 div 的最大高度并溢出页面

以下是表格的 CSS：

```
#navigator_table
{   
table-layout: fixed;
font-family: Arial;
font-size: 10px;
margin: 5px 5px;
text-align: center;
border-collapse: collapse;
border: 1px solid #000;
Width: 95%;
} 
```

以下是 div 的 CSS：

```
.navigator_overflow
{
max-width: 650px;
height: expression(this.scrollHeight > 599 ? "600px" : "auto");
max-height: 600px;
overflow: scroll;
   } 
```

我已经尝试在 div 和 table 中添加以下任何结果：

```
overflow: hidden, auto, scroll
clear: both; 
float: left;
display: block; 
```

溢出隐藏刚刚删除了滚动条，但表格仍然超出了页面的范围。

我试过添加：

```
height: expression(this.scrollHeight > 599 ? "600px" : "auto");
/* supposed to be the workaround for max-height in IE*/ 
```

到桌子上

max-height 在 Firefox 和 Chrome 中效果很好。这只是IE

我正在使用以下文档类型：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd"> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:17:06.913

终于找到我的答案了！

我需要添加

```
position: relative; 
```

在父 div

如果有人可以的话，现在可以在以下站点找到答案：
[http](http://net.tutsplus.com/tutorials/html-css-techniques/9-most-common-ie-bugs-and-how-to-fix-them/)
://net.tutsplus.com/tutorials/html-css-techniques/9-most-common-ie-bugs-and-how-to-fix-them/告诉我为什么它有效....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:59:59.257

请参阅此相关问题：[CSS 表达式设置 div 的高度](https://stackoverflow.com/questions/7888148/css-expression-to-set-height-of-div)

简短的回答，你最好使用 JavaScript 来做这个......

# c# - 当我的方法返回基类型时，如何避免在 c# 中使用 is 运算符？

> ID：14738654
> 
> 赞同：0
> 
> 时间：2013-02-06T20:58:11.320
> 
> 标签：c#, oop

我有一个抽象基类`P`。我有两个继承`P`称为`I`和的类`O`。

我的存储库中有一个`Get()`返回`P`. `I`此方法总是返回一个或`O`取决于一个值的实例。

```
public P Get(string pci)
{
     var a = GetAByPCI(string pci);

     if(a == 1)
         return new I();
     else if(a == 2)
         return new O();
     else
         // throw exception here.
} 
```

当我从另一个位置调用此方法时，我需要检查并转换类型。

```
P p = PRepository.Get("200");

if(p is I)
    I i = (I)p; 
```

我想避免每次使用`p`上述内容时都必须检查和沮丧。我觉得好像我在这里做了一些根本性的错误，但不确定。

**更新：** 派生类型`I`&`O`具有需要使用但仅与该特定类型相关的其他属性。`P`有许多在继承类型中实现的抽象属性。向下转换是我可以根据需要获得具体类型的唯一方法吗？

也许这个逻辑是完全错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:02:43.340

拥有基类的全部意义在于避免不得不处理子类本身。只需向基类添加一个抽象方法并在子类中实现它。这样，调用代码将简单地调用该方法，而无需进行任何强制转换。这是基本的多态性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:05:11.640

你的意图是什么？看来您没有正确使用继承。如果从方法返回 P 对象，则需要向下转换或返回派生类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T21:12:33.883

你是正确的怀疑向下铸造。

我会看看[模板方法设计模式](http://www.dofactory.com/Patterns/PatternTemplate.aspx)。如果你有一个基类，它应该用来隐藏子类的细节。

因此，也许您的基类中有一个名为 Execute() 的方法。在基类内部，execute 方法调用一些受保护的方法，比如 Method1() 和 Method2()。方法 1 包含共享代码，方法 2 是抽象的，子类必须执行它。然后，当您取回您的实例时，您只需调用 Execute。正确的 Method2() 将运行而无需向下投射。

```
public abstract class MyBaseClass
{
    public void DoSomething()
    {
        //Here's a bunch of stuff I have to do everytime
        DoSomethingTypeSpecific();
        //I could do more stuff if I needed to
    }

    protected abstract void DoSomethingTypeSpecific();
}

class MyBaseClassOne : MyBaseClass
{
    protected override void DoSomethingTypeSpecific()
    {
        Console.WriteLine(1);
    }
}

class MyBaseClassTwo : MyBaseClass
{
    protected override void DoSomethingTypeSpecific()
    {
        Console.WriteLine(2);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T12:59:04.747

我也会考虑使用[Decorator 模式](http://www.dofactory.com/Patterns/PatternDecorator.aspx)和[组合而不是使用继承](http://en.wikipedia.org/wiki/Composition_over_inheritance)。

尽管如此，如果您想访问不属于基类的属性，您仍然需要强制转换。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-06T21:25:45.057

在不将属性放入基类的情况下无法消除强制转换，但您可以使用[策略模式](http://www.dofactory.com/Patterns/PatternStrategy.aspx)来解耦对象创建（有关如何执行此操作的示例，请参见[我的问题和答案here ）。](https://stackoverflow.com/questions/6819747/how-to-decouple-mode-switching-and-commands)**该示例展示了如何解耦 switch-case**，但您可以使用策略模式执行相同的操作来分析上下文的结果，因此您可以隐藏演员表。

```
public static class A
{
    // please note: some example in related to your question
    // and the strategy pattern provided at the link
    public static P GetI(int a)
    {
        if (a == 1)
            return new I();
        else
            return null; // <- this is important for evaluation
    }

    // can put this method anywhere else, also into another class
    public static P GetO(int a)
    {
        if (a == 2)
            return new O();
        else
            return null; // <- this is important for evaluation
    }

    public static bool Condition(string pci)
    {
        return !string.IsNullOrEmpty(pci); // could eval different states, values
    }
} 
```

然后可以将 as/is 逻辑划分为单独的方法/类，调用类（例如控制器、客户端）不需要知道所有不同的专业化。以下代码显示了如何创建上下文。有关Strategy 和 Context 类的实现细节，请参阅我的[帖子。](https://stackoverflow.com/questions/6819747/how-to-decouple-mode-switching-and-commands)

```
var strategyI = new Strategy<int, P>(A.Condition, A.GetI);
var strategyO = new Strategy<int, P>(A.Condition, A.GetO);

var strategies = new List<Strategy<int, P>> {strategyI, strategyO};
var context = new Context<int, P>(strategies.ToArray());

var result = context.Evaluate(1); // should return a new I(), with 2 as param a new O()

// once you get the result you can create a new context to work with the result

var strategyWorkI = new Strategy<P, P>(Condition, WorkWithI);
var stragegiesForWork = new List<Strategy<P, P>> {strategyWorkI} // could be more than one
var workContext = new Context<P, P>(strategiesForWork.ToArray());

var p = workContext.Evaluate(result); // does the right thing, but
                                      // no need to know class I here (only P)
if (p == null)
  // seems to be something went wrong, throw? ... 
```

这是演员阵容的脱钩，但此时您仍然需要演员阵容。

```
public static P WorkWithI(P p)
{
    var i = p as I; // I would prefer as instead of is (see boxing/unboxing in .net)
    if (i != null)
    {
       // do what you want with concrete class I in i
    }

    return i; // <- this is important for Evaluation
} 
```

无论如何......代码中仍然存在带有is / as的点，但它不会影响您的控制器/管理器等（保持代码灵活和可插入，例如通过依赖注入）

...如果您无法理解我的简短描述，我可以提供一个完整的示例。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-06T22:59:30.873

如果上述所有解决方案都不符合您的要求并且您不想更改基类（从派生类添加属性），那么您不仅应该考虑大多数评论中提到的继承设计......**您还应该寻找您的工厂/存储库实施**。这个存储库是否在做你需要的事情？为什么不添加 GetI() 和 GetO()？

例如，Linq 允许您使用 .OfType 查询和过滤列表，并且您仅获得类型 T 的元素。

您可以使用类型信息（例如，我在示例中使用[泛型](http://msdn.microsoft.com/library/512aeb7t%28v=vs.80%29.aspx)）和附加条件添加特定的 Get 方法。

```
public T Get<T>(string pci, int c)
{
     var a = GetAByPCI(string pci);

     if(a == c)
         return new T();
     else
         // throw exception here.
} 
```

使用通用参数调用 Get 方法。此解决方案的问题是您需要知道调用时的条件，这不处理“特殊构造”（例如，带有 T 参数的构造函数）。无论如何，这也可以通过工厂模式来解决。

```
I i = PRepository<I>.Get(1, "200"); // create a new I(), only if 1 fits GetAByPCI()
O o = PRepository<O>.Get(2, "123"); // create a new O(), only if 2 fits GetAByPCI()
// can do anything with the concrete type 
```

您还可以使用策略模式将条件从存储库/工厂调用中移出（我在上面的回答中已经提到过）。

也可以在泛型方法后面加上“as”（即使在大多数情况下我不推荐它，我也会向您展示如何）。

```
public T Get<T>(string pci)
{
     return this.Get(pci) as T; // your method with trying to cast to concrete type
} 
```

这样，您可以获得如下实现：

```
I i = PRepository<I>.Get("200");
if (i != null)
{
  // do I specific tasks
} 
```

# php - mysql drupal 6 查询问题

> ID：14738655
> 
> 赞同：0
> 
> 时间：2013-02-06T20:58:13.537
> 
> 标签：php, mysql, drupal, drupal-6

我正在尝试查询具有最低数值的条目，然后将数据库中的数值更新为值 +1，如下所示：

```
$ras = db_query("SELECT name,number FROM {people} ORDER BY number DESC LIMIT 1"); 
$raw = db_fetch_array($ras);
$com_name = $raw['name'];
$count = $raw['number']+1;
db_query("UPDATE {people} (number) SET ('%d') WHERE name='%s'", $count, $com_name); 
```

我收到一个错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解要使用的正确语法。这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T21:01:14.750

你的`SET`条款是错误的。

尝试这个：

```
db_query("UPDATE {people} SET number = '%d' WHERE name='%s'", $count, $com_name); 
```

或者这个，（如果您的`number`列是`INT`类型：

```
db_query("UPDATE {people} SET number = %d WHERE name='%s'", $count, $com_name); 
```

**注意**已删除的引号？

# android - 如何在点击监听器中识别 android Marker

> ID：14738666
> 
> 赞同：1
> 
> 时间：2013-02-06T20:59:18.850
> 
> 标签：android, google-maps-markers

我在一个使用 API V2 的 android 应用程序中有一个谷歌地图，但我遇到了一个小问题。我正在从数据库中加载可见地图区域中的所有标记。该部分运行良好，单击它们并单击它们的信息窗口也是如此。

问题是，一旦我捕获了信息窗口单击事件，我想将表示的数据库对象发送到另一个活动。我怎么得到那个。我在考虑标记的 latlng，但它在放在地图上时似乎已被调整/截断。所以我在考虑使用建筑物的名称，但是如果两个建筑物具有相同的名称怎么办。我在考虑将 Marker 子类化并给我一个 id，但 Marker 是最后一个类。

现在，我将选择名称/地址类型的搜索，但我更喜欢对标记所代表的特定对象更明确的东西。如何在标记中存储额外数据？

# ios - Objective-C 回调/块模式

> ID：14738667
> 
> 赞同：1
> 
> 时间：2013-02-06T20:59:27.037
> 
> 标签：ios, objective-c, objective-c-blocks

我要做的是从远程服务器加载人员列表（JSON 格式），将文件保存到磁盘上，然后解析结果并返回`NSArray *`给调用者。

我创建了一个`EmployeeDirectoryManager`具有以下内容的：

```
- (NSArray *)loadDirectory:(BOOL)refreshFromServer;
- (void)loadDirectoryFromFile;
- (void)loadDirectoryFromServer; 
```

我想在该`loadDirectory`方法上使用一个块，以便调用者可以在什么时候被通知`loadDirectoryFromServer`，它正在使用一个上面`AFJSONRequestOperation`有一个`success`块的。

我需要一些关于如何实现这一点的指导，或者我是否走错了路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:55:54.797

要在您的方法中使用块作为完成处理程序，首先您需要定义新类型

`typedef void(^TypeComplitionHandler)(id result)`

然后你可以将块传递给你的方法。例如

```
- (void)loadDirectoryFromFileComplitionHandler:(TypeComplitionHandler)complition {
    complition(@"done");
} 
```

# javascript - 新内容取代旧内容隐藏和显示

> ID：14738670
> 
> 赞同：0
> 
> 时间：2013-02-06T20:59:31.877
> 
> 标签：javascript, html, show-hide

我正在处理隐藏和显示具有不同内容的 div。当我点击一个链接时，我希望显示一个 div。但是当我点击另一个链接时，我希望新内容替换以前的内容。现在，它属于它而不是取代它。有什么解决办法吗？

Javascript

```
function show(){

var links = {
link1: "content1",
link2: "content2",
link3: "content3",
link4: "content4"
};

var id = event.target.id;
var a = document.getElementsByTagName("a");
document.getElementById(links[id]).style.visibility = 'visible';
}

function init(){

 var divs = document.getElementsByTagName("div");
 for (i = 0; i < divs.length; i++) {
    if (divs[i].className == "div") {
        divs[i].style.visibility = 'hidden';
    }
}
var a = document.getElementsByTagName("a");
for(i = 0; i < a.length; i++){
   a[i].onclick = show;
}
}

window.onload = init; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:15:28.830

您需要运行将它们全部隐藏的代码块，然后每次都显示您想要的代码。

做这个：

```
function hideAll() {
    var divs = document.getElementsByTagName("div");
     for (i = 0; i < divs.length; i++) {
        if (divs[i].className == "div") {
            divs[i].style.visibility = 'hidden';
        }
} 
```

从 中删除此代码`init()`并将其替换为调用并在开头`hideAll()`添加调用。`hideAll()``show()`

# mongodb - MongoDB 聚合查询不返回所有字段

> ID：14738671
> 
> 赞同：1
> 
> 时间：2013-02-06T20:59:34.270
> 
> 标签：mongodb, mongodb-php

我正在尝试使用聚合函数在图表中显示信息。对于此示例，集合中的文档如下所示（不包括此查询的不必要字段）：

```
{
 'locid' : <someid>, #Reference to a city & state collection
 'collat' : <dateobj>, #a date object when this entry was saved 
 'pid' : <someid>, #Reference to a person collection 
 'pos' : <int> #Value I am interested in matching with location & date
 } 
```

所以我基本上从一个`pid`. 我使用它作为我的第一个`$match`参数来限制被扔进管道的数据量。

```
array(
    '$match' => array(
         'pid' => new \MongoId($pid)
     )
), 
```

所以现在我选择了正确的`pid`，我告诉它我只想要/需要某些字段：

```
array(
    '$project' => array(
        'pos' => 1,
        'collat' => 1,
        'locid' => 1
    )
), 
```

第二个匹配是说我现在只关心这些位置（`$ids`包含一个数组`locid`）：

```
 array(
        '$match' => array(
            'locid' => array('$in' => $ids)
        )
    ), 
```

最后，我是说将所有退回的文件按`collat`和`locid`

```
array(
            '$group' => array(
                '_id' => array(
                    'locid' => '$locid',
                    'collat' => '$collat'
                )
            )
        ) 
```

虽然查询完成并返回数据，但我没有`pos`取回该字段，它只返回`locid`and `collat`。

**问题**

1.  不`$project`就是为了这个吗？我用它来告诉驱动程序我想要返回哪些字段？
2.  一旦我也得到了`pos`字段返回，我怎么能告诉司机我只想要每个`locid`&`collat`组合对的最低值？因此，假设该日期、位置和人员有两个条目：4 和 8。我只关心`pos`=4

我的最终目标是创建一个折线图，其中 X 轴作为日期（从 开始`collat`），Y 轴将作为`pos`字段，每条线都将绘制单独的`locid`数据。

这是发送到聚合驱动程序的全部参数。

```
$ops = array(
        array(
            '$match' => array(
                'pid' => new \MongoId($pid)
            )
        ),
        array(
            '$project' => array(
                'pos' => 1,
                'collat' => 1,
                'locid' => 1
            )
        ),
        array(
            '$match' => array(
                'locid' => array('$in' => $ids)
            )
        ),
        array(
            '$group' => array(
                '_id' => array(
                    'locid' => '$locid',
                    'collat' => '$collat'
                )
            )
        )
    );
    $out = $myCollection->aggregate($ops); 
```

**更新**这是我将其分组并返回`pos`而不会引发错误的方式。我需要对它进行抽查，以确保它实际上返回了正确的值。

```
array(
            '$group' => array(
                '_id' => array(
                    'locid' => '$locid',
                    'collat' => '$collat'
                ),
                array('$min' => '$pos')
            )
        ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T21:06:03.330

聚合查询就像一条 SQL 语句`group by`。您正在告诉`{$group}`您想要“GROUP BY”的字段，但您并没有告诉它您希望如何聚合分组信息。

你想要的`{$group}`可能是这样的：

```
{$group : { _id : { locid: "$locid", collat: "$collat"},
            pos : {$min : "$pos"}
           }
 } 
```

# mysql - MySQL写一个触发器防止买太多

> ID：14738672
> 
> 赞同：0
> 
> 时间：2013-02-06T20:59:39.967
> 
> 标签：mysql, triggers

我有一张表`warehouse`，其中包含有关商店中文章的信息（文章 ID 作为外键和数量）。然后，我有另一个表，`shoppinglist`其中有一个客户 ID、文章 ID 和数量。可以说，该客户想购买 3 篇文章，但只有一篇文章可用。如何写一个`trigger`帮助我防止买太多的东西？

我试过这个：

```
DELIMITER $$ CREATE TRIGGER check BEFORE INSERT ON shoppinglist FOR EACH ROW BEGIN IF warehouse.quantity < shoppinglist.quantity THEN CALL fail('You cant buy that much'); END IF; END $$ DELIMITER; 
```

但这似乎不起作用。我的意思是，当我这样做时：

```
INSERT INTO shoppinlist (clients_id, article_id, quantity) VALUES (1, 2, 100); 
```

仓库中只有 2 篇 id = 2 的文章，没关系，这是可能的。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:16:17.373

在您的代码中，warehouse.quantity 或 shoppingList.quantity 将引用哪些具体文章？此外，`check`是一个保留关键字。

尝试这个：

```
DELIMITER $$
CREATE TRIGGER qtyCheck BEFORE INSERT ON shoppinglist 
FOR EACH ROW 
BEGIN 
  SET @qty = (SELECT quantity FROM warehouse WHERE article_id = NEW.article_id);
  IF @qty < NEW.quantity THEN
    CALL fail('You cant buy that much'); 
  END IF; 
END $$ 
DELIMITER ; 
```

请注意，我重命名了触发器，我猜是表上列的名称`article_id`，`warehouse`我使用了`NEW`变量而不是`shoppingList`触发器的主体，并且在分号之前需要一个空格`DELIMITER ;`，尽管这可能是发帖时错字。

`fail`最后，如果未定义函数，您可能会收到以下错误。它在我的系统中不存在...

```
ERROR 1305: PROCEDURE testing.fail does not exist 
```

# c# - 如何读取文本文件并通过重复部分循环？

> ID：14738673
> 
> 赞同：4
> 
> 时间：2013-02-06T20:59:54.417
> 
> 标签：c#, ansi

我有一个 ANSI 835（文本）文件。为简单起见，它看起来像这样：

```
ISA*00
GS*Foo*12345
ST*835*000001
LX*1
CLP*123456
NM1*Lastname
REF*010101
DTM*20120512
SVC*393939
LQ*19
LX*2
CLP*23456
NM1*Smith
REF*58774
DTM*20120601
SVC*985146
LX*3
CLP*34567
NM1*Doe
REF*985432
DTM*20121102
SVC*864253
LQ*19
LQ*84 
```

记录被分成 LX 段。LX*1 之后的所有内容都是一条记录，LX*2 之后的所有内容都是另一条记录，以此类推。我需要从每一行获取某些项目，将它们分配给变量，并最终将它们作为一行添加到 datagridview。再次为简单起见，我有以下变量，这是每个变量应该包含的内容：

`string ItemNumber`应该是 CLP 行中
`string LastName`* 之后的字符组 应该是 NM1 行中
`string Date`* 之后的字符组 应该是 REF 行中 * 之后的
`string Error`字符组 应该是 * 之后的字符组LQ线

我面临的最大问题是每个 LX 段中可能有不止一条 LQ 线。在这种情况下，可以将第二个错误添加到第一个错误的末尾，用逗号分隔。

我尝试将文件加载到字符串数组中并逐行执行，但我不确定如何说“从 LX*1 开始，直到你点击 LX*2”。

```
string[] lines = File.ReadAllLines(MyFile);

foreach (string line in lines)
{
    string[] splitline = line.Split('*');

    if (splitline[0] = "LX")
    {
        //this is where i need to loop through the next lines 
        //until i hit the next line starting with LX.
    }
} 
```

有任何想法吗？一如既往，感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T21:16:23.723

从一个简单的数据模型开始：

```
public class LXRecord
{
    public string ItemNumber { get; set; }
    public string LastName { get; set; }
    public string Date { get; set; }
    public List<string> Errors { get; set; }

    public LXRecord()
    {
        Errors = new List<String>();
    }
} 
```

定义你的重要标记：

```
public static class Tokens
{
    public const string TOKEN_SPLITTER = "*";
    public const string NEW_RECORD = "LX";
    public const string ITEM_NUMBER = "CLP";
    public const string LAST_NAME = "NM1";
    public const string DATE = "REF";
    public const string ERROR = "LQ";
} 
```

遍历这些行，在令牌上做一个 switch/case，`LXRecord`当你看到“LX”标志时就开始一个新的：

```
List<LXRecord> records = new List<LXRecord>();
LXRecord currentRecord = null;

foreach(string line in lines)
{
    int tokenIndex = line.IndexOf(Tokens.TOKEN_SPLITTER);
    if (tokenIndex < 1 || tokenIndex == line.Length - 1) //no token or no value?
        continue;

    string token = line.Substring(0, tokenIndex);
    string value = line.Substring(tokenIndex + 1);

    switch(token)
    {
        case(Tokens.NEW_RECORD) :
            currentRecord = new LXRecord();
            records.Add(currentRecord);
            break;
        case(Tokens.ITEM_NUMBER) :
            currentRecord.ItemNumber = value;
            break;
        case(Tokens.LAST_NAME) :
            currentRecord.LastName = value;
            break;
        case(Tokens.DATE) :
            currentRecord.Date = value;
            break;
        case(Tokens.ERROR) :
            currentRecord.Errors.Add(value);
            break;
    }
} 
```

请注意，这样您可以相对轻松地忽略不支持的标志、添加新标志或添加解析（例如，`ItemNumber`可以使用`Int32.Parse`并将其存储为整数，或者“日期”可以存储 a `DateTime`）在这种情况下，我选择存储错误`List<String>`，但如果你愿意，你可以用逗号分隔它。如果内容还包含第二个星号，我也避免拆分`*`字符。

编辑：根据您的评论，您可以在 or 中进行一些更复杂/专业的解析`case`或移至另一种方法。而不是我上面的“LAST_NAME”的情况，你可以有：

```
case(Tokens.LAST_NAME) :
    ParseName(currentRecord, value);
    break; 
```

在哪里`ParseName`：

```
public static void ParseName(LXRecord record, string value)
{
    int tokenIndex = value.IndexOf(Tokens.TOKEN_SPLITTER);
    if (tokenIndex < 1 || tokenIndex == value.Length - 1) //no last name and first name?
    {
        record.LastName = value;
    }
    else
    {
        record.LastName = value.Substring(0, tokenIndex);
        record.FirstName = value.Substring(tokenIndex + 1);
    }
} 
```

令牌检查可能会在那里进行调整，但它应该给你一个好主意。

# object - 另一个类的属性隔间中的类

> ID：14738676
> 
> 赞同：2
> 
> 时间：2013-02-06T21:00:03.480
> 
> 标签：object, attributes, uml, class-diagram

是否可以将一个类添加为另一个类的属性？

如果是正常情况，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:13:39.413

有两种（可能是三种）方法可以做到这一点：

1-使用属性文本。

2-使用关联符号。

（3-两者）

看到这张[图片](http://ptgmedia.pearsoncmg.com/images/ch16_9780131489066/elementLinks/16fig03.jpg)。

这是 Craig Larman 的[完整文章](http://www.informit.com/articles/article.aspx?p=1398623&seqNum=5)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T23:59:06.937

这是绝对正常的。@jurgenreza 的回应很全面。在他展示的各种选项中，我是选项 3 的批评者之一（因为冗余）。

# jquery - $.post 适用于 Chrome 但不适用于 Firefox

> ID：14738677
> 
> 赞同：2
> 
> 时间：2013-02-06T21:00:05.713
> 
> 标签：jquery, .post

我有一个页面，上面有两个表单，第一个表单是用户输入姓名、地址等详细信息的地方（没有提交按钮）。第二个表单将购买详细信息提交到贝宝。我目前正在使用带有 onClick 事件的 paypal 表单提交按钮来调用一个函数，该函数通过 $.post 将用户详细信息输入我的数据库到 php 脚本。

**的HTML：**

```
 <form id="regcust">
    <input type="text" name="fName" id="fName">
    <input type="text" name="lName" id="lName">
    </form>

    <form id="paypal_button_form" action="https://www.paypal.com/cgi-bin/webscr" method="post">
    <input type="image" src="/img/buynow.gif" onClick="registerCustomer()" name="submit">
    </form> 
```

**jQuery：**

```
 function registerCustomer() {
        var form = document.getElementById("regcust");
        var fn   = $("input[name='fName']").val();
        var ln   = $("input[name='lName']").val();

        $.post("RegisterCustomer.php", {  
            fName: fn, 
            lName: ln 
        });
    };

Note: I have stripped this right down for clarity. 
```

我在 Chrome 中构建了网站，一切正常，当用户点击 paypal 按钮时，详细信息记录在我的数据库中，用户被发送到 paypal 进行付款。但是，我刚刚在 Firefox 中进行了测试，并且没有捕获用户详细信息，用户在没有输入详细信息的情况下被发送到贝宝？- 编辑：如果我在函数中放了一个 alert()，这会触发，所以它没有记录细节似乎很奇怪。

我用谷歌搜索并搜索了这个网站，发现了类似的问题/答案，但它们都不适用于我的脚本。我什至安装了 firebug 并尝试通过它，但老实说，作为一个 PHP 人，调试 jQuery/javascript 有点令人困惑，看看它呈现给我的所有信息 - 尽管错误窗口总是空的？

任何人都可以为我阐明这一点，或者请指出我正确的方向，因为我无法理解它。

提前致谢。

编辑：锥子发布的答案解决了我的问题，谢谢；）我确实尝试过投票给他的答案，但似乎我的代表太低了，无法这样做。

任何人都可以解释为什么它在 Chrome 中有效但在 Firefox 中无效？我想尝试了解发生了什么（或没有发生），所以我再次避免这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:32:05.610

似乎按钮的单击事件和提交表单之间可能存在竞争条件。您可能希望显式链接这些事件，以便它们始终按您想要的顺序发生。此代码提交您的 RegisterCustomer，然后仅在完成后提交贝宝表单。在我的脑海中写下了这个，我不合适：

```
<form id="regcust">
<input type="text" name="fName" id="fName">
<input type="text" name="lName" id="lName">
</form>

<form id="paypal_button_form" action="https://www.paypal.com/cgi-bin/webscr" method="post">
</form>

<a href="javascript:;" id="buyNow"><img src="/img/buynow.gif"></a> 
```

JS：

```
$(document).ready(function() {
  $("#buyNow").click(function() {
    var form = $("#paypal_button_form");
    var fn   = $("#fName").val();
    var ln   = $("#lname").val();

    $.post("RegisterCustomer.php", {  
        fName: fn, 
        lName: ln 
    }, function() {
         form.submit()
    });
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-10T17:48:41.587

```
$(document).ready(function() {
  $("#buyNow").click(function() {
    var form = $("#paypal_button_form");
    var fn   = $("#fName").val();
    var ln   = $("#lname").val();

    $.post("RegisterCustomer.php", {  
        fName: fn, 
        lName: ln 
    }).done( function() {
    form.submit();
});
  });
}); 
```

# objective-c - 在 Xcode 中重新定位 TableView 的困难

> ID：14738679
> 
> 赞同：1
> 
> 时间：2013-02-06T21:00:13.670
> 
> 标签：objective-c, xcode, uitableview

我在 Xcode 4.5.2 中有一个使用情节提要的应用程序。我有一个表格视图，我想重新定位表格视图，使其在屏幕上稍微低一点，以便我可以在表格视图开始的上方添加一个图像和一个按钮。我研究了这个问题，虽然我找到了一些建议，但没有一个对我有用。表格视图是通过模态 segue 访问的，因此没有导航栏。

这是我已经尝试过的：

1）我添加了一个导航栏并将其背景设置为我的图像，然后尝试将按钮添加到导航栏中。因为 Xcode 不允许我调整导航栏的大小，所以我的图像和我的按钮一样被扭曲了，所以我放弃了这个努力。

2) 我添加了一个工具栏，但遇到了与导航栏类似的问题。

3）我尝试在代码中向下移动表格视图（认为我可以在表格视图上方的可用空间中添加图像和按钮）。这根本不起作用，我的表格视图原点仍然位于屏幕的最顶部。但这里是代码：

```
//called in the view did load method of the table view controller class

- (void)repositionTableView
{
  float yOffset = 75.0;

  CGFloat x = self.tableView.frame.origin.x;
  CGFloat y = self.tableView.frame.origin.y + yOffset;
  CGFloat height = self.tableView.frame.size.height;
  CGFloat width = self.tableView.frame.size.width;

  CGRect newTableFrame = CGRectMake(x, y, height, width);

  self.tableView.frame = newTableFrame;
} 
```

谁能给我任何关于如何解决这个问题的建议？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:15:25.863

![降低的 tableview](../Images/e7abf97f1704af995e05ea748a72eb78.png)

确保：

您创建了一个`UIViewController`.

`UITableView`是 的子视图`self.view`。

自动布局已禁用。

你可以自由移动它。

# mysql - 多个 id 的复杂连接

> ID：14738680
> 
> 赞同：0
> 
> 时间：2013-02-06T21:00:14.103
> 
> 标签：mysql, sql

我有一张这样的桌子

```
id | user_id | code  | type | time
-----------------------------------
2    2         fdsa    r      1358300000
3    2         barf    r      1358311000
4    2         yack    r      1358311220
5    3         surf    r      1358311000
6    3         yooo    r      1358300000
7    4         poot    r      1358311220 
```

我想为每个匹配时间获取用户 2 和用户 3 的串联“代码”列。

我想收到这样的结果集：

```
code     | time
-------------------------------
fdsayooo   1358300000
barfsurf   1358311000 
```

请注意，没有 yackpoot 代码，因为查询不是在寻找用户 4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:11:12.650

你可以使用`GROUP_CONCAT`函数。尝试这个：

```
SELECT GROUP_CONCAT(code SEPARATOR '') code, time 
FROM tbl 
WHERE user_id in (2, 3)
GROUP BY time
HAVING COUNT(time) = 2; 
```

**[SQL 小提琴演示](http://www.sqlfiddle.com/#!2/1c1bb/5/0)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:04:23.467

您正在寻找的是`GROUP_CONCAT`，但您在问题中遗漏了很多细节来提供一个很好的例子。这应该让你开始：

```
SELECT GROUP_CONCAT(code), time 
FROM myTable 
WHERE user_id in (2, 3)
GROUP BY time; 
```

缺少的细节是：

1.  是否需要订单？不确定如何使用分组进行排序，需要测试是否关键
2.  需要其他字段吗？如果是这样，您可能最终需要进行子选择或辅助查询。
3.  你只想要多次的结果吗？
4.  您是否真的希望结果列中的值之间没有分隔符（`SEPARATOR ''`在`GROUP_CONCAT`

笔记：

1.  如果您想通过其他方式（如`user_id`和`time`）来添加更多字段到 GROUP BY。

# java - 连接空闲后的 SQLException

> ID：14738682
> 
> 赞同：0
> 
> 时间：2013-02-06T21:00:22.880
> 
> 标签：java, jdbc, db2, sqlexception

我正在使用带有 JDBC 的 DB2，当我在连接空闲几分钟后第一次尝试运行时，下面的代码会抛出 SQLException。从第二次开始，它将完全按照它必须的方式工作。

`ResultSet.next()`

关于什么会导致异常的任何想法？

异常跟踪：

```
FFDC Exception:com.ibm.db2.jcc.am.lo SourceId:com.ibm.ws.rsadapter.jdbc.WSJdbcResultSet.next 
ProbeId:2624 Reporter:
com.ibm.ws.rsadapter.jdbc.WSJccResultSet@b080b08
com.ibm.db2.jcc.am.lo: The current transaction was rolled back because of error "-30108".. SQLCODE=-1476, SQLSTATE=40506, DRIVER=3.57.110
at com.ibm.db2.jcc.am.bd.a(bd.java:663)
at com.ibm.db2.jcc.am.bd.a(bd.java:60)
at com.ibm.db2.jcc.am.bd.a(bd.java:127)
at com.ibm.db2.jcc.am.am.b(am.java:3760)
at com.ibm.db2.jcc.t4.eb.h(eb.java:278)
at com.ibm.db2.jcc.t4.eb.a(eb.java:239)
at com.ibm.db2.jcc.t4.eb.c(eb.java:31)
at com.ibm.db2.jcc.t4.u.a(u.java:32)
at com.ibm.db2.jcc.t4.j.Zb(j.java:259)
at com.ibm.db2.jcc.am.am.X(am.java:3554)
at com.ibm.db2.jcc.t4.d.f(d.java:1881)
at com.ibm.db2.jcc.am.gc.a(gc.java:200)
at com.ibm.db2.jcc.t4.d.a(d.java:109)
at com.ibm.db2.jcc.am.am.c(am.java:366)
at com.ibm.db2.jcc.am.am.next(am.java:293)
at com.ibm.ws.rsadapter.jdbc.WSJdbcResultSet.next(WSJdbcResultSet.java:3120) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:32:13.643

“外部” [SQL 代码`-1476`](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.messages.sql.doc/doc/msql01476n.html)表示事务已回滚，因为“内部” [SQL 代码`-30108`](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.messages.sql.doc/doc/msql30108n.html)表示：

> 连接失败但已重新建立。特殊寄存器设置可能已重播。新连接的主机名或 IP 地址：host-name。新连接的服务名称或端口号：service-name。原因码：原因码。

我猜你的连接超时了，它掉线了。

# javascript - AngularJS 中的路由更改和控制器继承

> ID：14738685
> 
> 赞同：0
> 
> 时间：2013-02-06T21:00:39.713
> 
> 标签：javascript, angularjs

我有两个问题：

1.  我有一个表格。用户按下保存按钮后，将向服务器发送一个放置请求。响应包含新对象的 id。现在我想将路线从 test.com/object 更改为 test.com/object/1。由于我拥有所有信息，我不想再次运行控制器（这将再次从服务器加载对象，但这没用）。**简短版：如何在不重新加载控制器的情况下更改路线？如果这是不可能的，那么最好的方法是什么？**

2.  我有两个控制器，它们非常相似。一个很好的例子是 createObject- 和 editObject-Controller。我想分享几乎所有功能，但有一些特定于控制器的方法不同。我喜欢服务，但在这种情况下我没有看到很大的优势，因为我不想只分享逻辑，我想分享事件处理程序本身的定义。**简短版本：为控制器创建继承的方法是什么？**

我期待着答案和好主意！非常感谢！

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:22:23.020

更改路由而不是视图（或控制器）的典型（内置）Angular 方法是仅通过更改 URL 的搜索部分`$location.search('someSearchParam', searchParamValue)`。 [必须将reloadOnSearch](http://docs.angularjs.org/api/ng.$routeProvider#when)设置`false`为才能正常工作。当 URL 更改时，会广播事件[$routeUpdate](http://docs.angularjs.org/api/ng.$route#$routeUpdate)，因此您的控制器可以侦听此事件以了解某些内容已更改。另请参阅[使用 $location.path 但没有 ngView 重新加载的 AngularJS 分页](https://stackoverflow.com/questions/12422611/angularjs-paging-with-location-path-but-no-ngview-reload)

控制器继承可能不是一个好主意。您可以使用一个控制器和 ng-show/hide 来显示页面的“创建”或“编辑”版本，如 $scope 属性所示，例如 $scope.editMode：

```
<div> 
  <span ng-show="editMode">Edit Object</span>
  <span ng-hide="editMode">Create Object</span>
</div>
<div>Name: <input type="text" ng-model="name"></div>
...
<div>
  <input type="submit" ng-show="editMode" ng-click="update()">Update
  <input type="submit" ng-show="editMode" ng-click="create()">Create
</div> 
```

如果您确实想尝试控制器继承，请注意范围继承，而不是控制器。控制器范围原型从其父范围继承。有关此主题的更多信息，请参阅[AngularJS 中范围原型/原型继承的细微差别是什么？](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:09:38.957

谢谢马克，你帮了我很多！

改变路线的事情并不能真正让我满意，但我认为这是目前唯一的方法。在我看来，应该可以更改路由而不仅仅是参数，而无需重新加载任何控制器。希望这将在未来的版本中成为可能！

# php - Wordpress - 每页帖子不适用于特定类别-slug.php

> ID：14738686
> 
> 赞同：0
> 
> 时间：2013-02-06T21:00:40.547
> 
> 标签：php, wordpress-theming, wordpress

我有一个特定的 category-slug.php 页面。

我想显示第一个类别“横幅广告”，每页只有 1 个帖子，然后在其下方，每页显示来自“精选”类别的 3 个帖子。

**我不想使用：** **query_posts('posts_per_page=4');**

我已经尝试了 pre_get_posts 功能，但似乎无法使其正常工作。

现在每页显示的帖子数量是我在设置->阅读中分配的数量

这是我当前的代码：

```
$args1 = array(
    'category_name' => 'banner-ads',
    'posts_per_page' => 1
    );

$the_query = new WP_Query( $args1 );

while ( $the_query->have_posts() ) :
    $the_query->the_post();
    ar2_render_posts( null, array ( 'type' => 'node' ), true );
endwhile;

wp_reset_postdata();

$args2 = array(
    'category_name' => 'featured',
    'posts_per_page' => 3
    );

$query2 = new WP_Query( $args2 );

while( $query2->have_posts() ):
    $query2->next_post();
    ar2_render_posts( null, array ( 'type' => 'traditional' ), true );
endwhile;

wp_reset_postdata(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-11T06:47:49.853

这很简单，就`alter query_args`在`ar2_render_posts`

```
ar2_render_posts( null, array ( 
     'query_args' => array ( 'posts_per_page' => 1 ),
), true ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:19:38.647

您还没有进行重置：`wp_reset_postdata();`

关于类别有用：[http ://codex.wordpress.org/Class_Reference/WP_Query#Category_Parameters](http://codex.wordpress.org/Class_Reference/WP_Query#Category_Parameters)

这是我的第一个循环页面之一：

```
<?php 
$postq1 = new WP_Query(
 array(
  'post_type' => array('post','yourcustom'),
  'posts_per_page' => 1, 
  'category_name'=>'banner-ads')
 );
if($postq1->have_posts()):
    while ( $postq1->have_posts() ) :
        $postq1->the_post();?>
<article id="post-<?php the_ID();?>">....</article>
<?php 
    endwhile;
endif;
wp_reset_postdata();
?> 
```

第二个循环：

```
<?php 
$postq2 = new WP_Query(
 array(
  'post_type' => array('post','yourcustom'),
  'posts_per_page' => 3,
  'category_name'=>'featured')
);
if($postq2->have_posts()):
    while ( $postq2->have_posts() ) :
        $postq2->the_post();?>
<article id="post-<?php the_ID();?>">....</article>
<?php 
    endwhile;
endif;
wp_reset_postdata();
?> 
```

...其余代码与`query_posts()`;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T21:30:58.343

好的，所以我终于想通了。如果您想强制它获取一定数量的帖子，请添加过滤器及其功能，然后在循环结束时将其删除。我在第二个循环中意识到 ar2_render_posts() 函数与代码冲突，因此我选择从头开始重做该函数，因为它基本上是一个布局函数。

```
add_filter('post_limits', 'my_post_limits');

function my_post_limits( $limit ) {
    if ( in_category('banner-ads') ) {
        return 'LIMIT 0, 3';
    }
    return $limit;
}

    $args1 = array(
        'category_name' => 'banner-ads'
        );

    $the_query = new WP_Query( $args1 );

    while ( $the_query->have_posts() ) :
        $the_query->the_post();
        ar2_render_posts( null, array ( 'type' => 'node' ), true );
    endwhile;

    wp_reset_postdata();
    remove_filter('post_limits', 'my_post_limits'); 
```

# php - 将部分 URL 传递给 PHP 并从数据库返回结果

> ID：14738692
> 
> 赞同：-2
> 
> 时间：2013-02-06T21:00:54.650
> 
> 标签：php, javascript

我正在制作一个交互式地图，我想知道是否可以将 URL 的一部分传递给 PHP 脚本并让它查找信息，然后将其取回以显示在 lightwindow 中的 iframe 中。

地图是基于 CSS 的，href 中每个州的每个链接都包含州名（例如 - #statename）。

当用户单击地图时，#statename 将附加到 URL。

我想知道是否可以将 URL 的那部分（#statename）传递给 PHP 并让它从那里运行脚本？

这是我正在处理的交互式地图的链接。如果你点击德克萨斯州，你会明白我的意思：

[http://sjdunham.com/beta/maptest/](http://sjdunham.com/beta/maptest/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:09:37.550

是的，这很简单，你可以将一个事件绑定到 hashchange 事件，如果你使用的是 jQuery，你可以这样做：

```
$(window).on('hashchange', function() {
   console.log(window.location.hash); // replace this
}); 
```

然后，您可以将 console.log 行替换为对 PHP 脚本的 ajax 调用，并在请求完成后使用您发回的任何内容来修改 iframe。

# sharepoint-2010 - 用于 SharePoint2010 开发的自定义 Power Shell？

> ID：14738694
> 
> 赞同：0
> 
> 时间：2013-02-06T21:00:54.800
> 
> 标签：sharepoint-2010, powershell-2.0

显然不是要求代码，而是要求功能。您编写了什么样的 PS 脚本，它们如何使您作为 SharePoint2010 开发人员的生活更轻松？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T15:52:14.457

部署脚本，如果存在撤回的解决方案，等待它实际撤回。然后部署新的解决方案。

通过计划任务运行的唤醒脚本，用于唤醒应用程序池

上传用户个人资料图片

构建脚本，从 List 构建 1000 个站点

# ajax - jquery在div中选择输入

> ID：14738699
> 
> 赞同：0
> 
> 时间：2013-02-06T21:01:03.063
> 
> 标签：ajax, jquery-post

我有以下代码来调用 ajax POST ：

```
 $("a[href=Save]").click(function() {
        var thisform = $(this).attr("name");
        // Get all the information left in the form
        var lname = $('div[name="' + thisform + '"] input[name="lname"]').val();
        var fname = $('div[name="' + thisform + '"] input[name="fname"]').val();
        var mname = $('div[name="' + thisform + '"] input[name="mname"]').val();
        var language = $('div[name="' + thisform + '"] input[name="lang"]').val();
        var title = $('div[name="' + thisform + '"] input[name="title"]').val();
        var ptype = $('div[name="' + thisform + '"] input[name="ProfileType"]').val();
        var vip = $('div[name="' + thisform + '"] input[name="VIP"]').val();
        var vreason = $('div[name="' + thisform + '"] input[name="Vreason"]').val();

        alert (lname);

        //Set the Ajax Request
        $.post("..\ajax\profileMod.php", {
            'lname':lname,
            'fname':fname,
            'mname':mname,
            'language':language,
            'title':title,
            'ptype':ptype,
            'vip':vip,
            'vreason':vreason
        };
        .done(function(data) {
         // php code : echo json_encode(array("name"=>"Called!"));
            alert(data.name);

        });

        // Stop original behavior
        return false;
    }); 
```

我不知道我哪里出错了，但代码不起作用。我正在尝试使用 POST 调用 php 文件，并显示一条消息以查看文件是否被正确调用。我所有的“var”都达到了正确的值（我已经一一测试了它们）。

我看了很多帖子才发现我眼睛受伤的错误！所以我求救！！！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:04:23.730

看起来你放了一个“;” 你应该在哪里放一个“）”

```
 'vip':vip,
        'vreason':vreason
    }; <-- problem
    .done(function(data) {
     // php code : echo json_encode(array("name"=>"Called!"));
        alert(data.name); 
```

应该

```
 'vip':vip,
        'vreason':vreason
    }) <-- fix
    .done(function(data) {
     // php code : echo json_encode(array("name"=>"Called!"));
        alert(data.name); 
```

我想

# c# - 如何在一个 WCF 请求中发送多个返回值？

> ID：14738705
> 
> 赞同：3
> 
> 时间：2013-02-06T21:01:31.577
> 
> 标签：c#, .net, wcf, request, response

这是 WCF 服务的内容，我想同时从用户那里获取 5 个值，并向他们发送前两个值相加作为 AdditionalResult 的响应，相加结果的减法和第三个值作为 SubtractedResult，SubtractedResult 的乘法和第四个值作为 MultipliedResult 和multipliedResult 和第 5 个值的除法为 DividedResult。

我知道这看起来毫无意义，但我正在尝试对这些进行一些预先测试，但我是 WCF 的新手，任何可以提供帮助的人都会受到赞赏。

```
public interface IService1
{

    [OperationContract]
    string GetValuesForCalculation(int value1, int value2, int value3, int value4, int value5);

    // TODO: Add your service operations here
}

public class Service1 : IService1
{

    public int GetValuesForCalculation(int value1, int value2, int value3, int value4, int value5)
    {
        int AddedResult;
        int SubtractedResult;
        int MultipliedResult;
        int DividedResult;

        AddedResult = (value1 + value2);
        SubtractedResult = (AddedResult - value3);
        MultipliedResult = (SubtractedResult - value4);
        DividedResult =(MultipliedResult/value5);

        return AddedResult;
        return SubtractedResult;
        return MultipliedResult;
        return DividedResult;
    }

} 
```

如何同时返回 4 个值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T21:10:16.617

您需要创建`DataContract`并返回该对象。

```
[ServiceContract()]
interface IService1
{
    [OperationContract]
    ReturnValue GetValuesForCalculation(int value1, int value2, int value3, int value4, int value5);
}

public class Service1 : IService1
{
    public ReturnValue GetValuesForCalculation(int value1, int value2, int value3, int value4, int value5)
    {
        int AddedResult;
        int SubtractedResult;
        int MultipliedResult;
        int DividedResult;

        AddedResult = (value1 + value2);
        SubtractedResult = (AddedResult - value3);
        MultipliedResult = (SubtractedResult - value4);
        DividedResult =(MultipliedResult/value5);

        var returnValue = new ReturnValue(AddedResult, SubtractedResult, MultipliedResult,DividedResult); 

        return returnValue ;
    }
}

[DataContract]
public class ReturnValue
{
    public ReturnValue(int addedResult, int subtractedResult, int multipliedResult, int dividedResult)
    {
        AddedResult = addedResult;
        SubtractedResult = subtractedResult;
        MultipliedResult = multipliedResult;
        DividedResult = dividedResult;
    }

    [DataMember]
    public int AddedResult {get; set;}

    [DataMember]
    public int SubtractedResult {get; set;}

    [DataMember]
    public int MultipliedResult {get; set;}

    [DataMember]
    public int DividedResult {get; set;}
} 
```

On your client side that `ReturnValue` class will be automatically generated by the same code that generates your client proxy (be it the tool built in to visual studio or [svcutil.exe](http://msdn.microsoft.com/en-us/library/aa347733.aspx))

Here is the [MSDN Page](http://msdn.microsoft.com/en-us/library/ms733127.aspx) on `DataContracts`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T21:08:48.807

您应该创建一个结构并在同一个调用中将它们全部返回。

```
public class Service1 : IService1
{

public int GetValuesForCalculation(int value1, int value2, int value3, int value4, int value5)
{
    int AddedResult;
    int SubtractedResult;
    int MultipliedResult;
    int DividedResult;

    AddedResult = (value1 + value2);
    SubtractedResult = (AddedResult - value3);
    MultipliedResult = (SubtractedResult - value4);
    DividedResult =(MultipliedResult/value5);

    CallResponse myResponse = new CallREsponse {AddResult = AddedResult, 
                 SubtractResult = SubtractedResult, 
                 MultiplyResult = MultipliedResult, 
                 DivideResult = DividedResult};
    return myResponse;
}

}
public struct CallResponse
{
int AddResult;
    int SubtractResult;
    int MultiplyResult;
    int DivideResult;
} 
```

# c++ - qmake 可以在 Visual Studio 项目中配置命令行选项吗？

> ID：14738707
> 
> 赞同：4
> 
> 时间：2013-02-06T21:01:34.990
> 
> 标签：c++, visual-studio-2010, qt, qmake

我有兴趣在`/MP`我使用 qmake 创建的每个 Visual Studio 项目中将其用作命令行选项（因为这极大地加快了编译速度） - 请参阅[此处了解说明](https://stackoverflow.com/questions/1422601/how-do-i-turn-on-multi-cpu-core-c-compiles-in-the-visual-studio-ide-2008)。

不幸的是，我不知道如何在 Qt .pro 文件中设置它——或者是否有可能。

是否可以为 qmake 设置命令行标志（如链接的问题）以识别并添加到 Visual Studio 项目？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T21:18:05.010

尝试`QMAKE_CXXFLAGS`：

```
QMAKE_CXXFLAGS += /MP 
```

它似乎正在工作 - 设置并运行`qmake -tp vc`在编译器的选项中设置 MP 标志。

# spotify - 如何将 Spotify 升级到 0.8.8？

> ID：14738708
> 
> 赞同：0
> 
> 时间：2013-02-06T21:01:37.617
> 
> 标签：spotify

我们意识到，在我们的开发团队中，我们的 Spotify 版本不一致。一部分有 0.8.8，而另一部分有旧版本 - 0.8.5。Spotify 不会为旧版本的帐户升级。但是，显然 Spotify API 发生了变化，因此我们的应用程序在 0.8.5 上运行，而不是在 0.8.8 上运行。其他开发人员如何也更新到 0.8.8？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:32:22.313

当前的生产 Spotify API 框架应该是最新的，无论客户端版本如何。现在是ver。0.2.8。

请记住，您需要在清单文件中声明您的框架依赖项。你可以在这里读更多关于它的内容：

[https://developer.spotify.com/technologies/apps/guidelines/integration/#frameworks](https://developer.spotify.com/technologies/apps/guidelines/integration/#frameworks)

0.8.5 仍然是当前的实时客户端，而 0.8.8 正在逐步向少数用户推出。

有一个预览 API，它取决于 0.8.8 中所做的桥接更改，但它不应该用于生产。

[https://developer.spotify.com/technologies/apps/preview/](https://developer.spotify.com/technologies/apps/preview/)

# html - 无法在 html 表单下方插入更多 html 标签

> ID：14738709
> 
> 赞同：0
> 
> 时间：2013-02-06T21:01:42.520
> 
> 标签：html, css, forms

我有一个在 div 内的表单，我想做的是在该表单下放置一个表格以显示一些结果。问题是，如果我在浏览器中的表单代码之后写任何标签，它会显示在表单的右侧而不是表单的下方。我需要做什么？这是CSS的东西吗？这是html代码和CSS：

```
<div style="width:55%;height:auto;margin-right:0px;" class="BuscarCliente">
  <form class="buscarForm" name="buscarClienteForm" method="get">
       <label class="formTitle">Buscar Cliente</label>
       <br><br>
       <label class="buscarForm">Ingresa el nombre del cliente a buscar:</label><br>
       <input class="buscarForm" style="width:200px;margin-top:7px;"type="text" name="nombre_cliente"><br><br>
       <input class="buscarForm" type="button" value="Buscar Cliente" onClick="JAVASCRIPT:form.submit()">
    </form>  

   <br><br><span>THIS STUFF SHOULD BE BELOW</span>
</div> 
```

这是CSS

```
form.buscarForm{
   color:#486288;
   font-family: 'Source Sans Pro', Helvetica, sans-serif;
   font-size:16px;
   font-weight: 200;
   margin-left:35px;
   margin-top: 15px;
   float: left;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T21:04:12.727

您的`float: left;`css 规则指示浏览器将您的表单布局为浮动。之后出现的任何内容都会显示在右侧，除非它太大而无法容纳。如果不需要，可以删除该规则，或者您需要使用`clear: both;`css 规则设置下一个元素的样式。

此外，`<span>`标签默认显示为内联，因此您还需要在具有`clear: both;`规则的浮动表单之后添加一个块元素。 `<div>`是常见的块元素。

这是一种方法：http: [//jsfiddle.net/HgWgT/](http://jsfiddle.net/HgWgT/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:05:12.220

添加`style="clear: both;`到表格之后的下一个元素，然后它将位于左侧。

# java - Activity 的 onCreate 中的 Android NullPointer 异常

> ID：14738712
> 
> 赞同：0
> 
> 时间：2013-02-06T21:01:51.320
> 
> 标签：java, android, nullpointerexception

我有一个简单的应用程序，可以将文本框中的两个数字相乘并在第三个框中显示结果。代码中没有任何语法错误，但是当我运行应用程序时出现此错误：应用程序已意外停止。

这是java代码：

```
package c.example.rectangle;

import android.os.Bundle;

import android.view.View;
import android.app.Activity;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity implements OnClickListener{

    EditText l = (EditText) findViewById(R.id.length);
    EditText w = (EditText) findViewById(R.id.width);
    TextView a = (TextView) findViewById(R.id.lblarea);
    Button b = (Button) findViewById(R.id.calculate);

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);  
        b.setOnClickListener(this);

    }

    public void onClick(View v) {
        calculateRectangle(l.getText().toString(), w.getText().toString());

    }
    private void calculateRectangle(String clength, String cwidth){

        int area = Integer.parseInt(clength)*Integer.parseInt(cwidth);

        b.setText(String.valueOf(area)); 
}} 
```

这是我的 XML 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#8B4513"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/label1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_marginTop="20dp"
        android:background="#2F4F4F"
        android:gravity="center"
        android:text="@string/rect"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#8B4513"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/label2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="30dp"
            android:layout_marginTop="50dp"
            android:background="#2F4F4F"
            android:gravity="center"
            android:text="@string/cm"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/length"
            android:layout_width="110dp"
            android:layout_height="21dp"
            android:layout_marginLeft="40dp"
            android:layout_marginTop="50dp"
            android:background="#2F4F4F"
            android:ems="10"
            android:gravity="center"
            android:inputType="number" />

    </LinearLayout>

 <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#8B4513"
        android:orientation="horizontal" >

    <TextView
        android:id="@+id/label3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#2F4F4F"
        android:layout_marginLeft="30dp"
        android:layout_marginTop="20dp"
        android:text="@string/breadth"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/width"
        android:layout_width="110dp"
        android:layout_height="21dp"
        android:layout_marginLeft="33dp"
        android:layout_marginTop="20dp"   
        android:background="#2F4F4F"
        android:inputType="number"
        android:ems="10" 
        android:gravity="center"
        >

        <requestFocus />
    </EditText>

</LinearLayout>

 <Button
     android:id="@+id/calculate"
     android:layout_width="fill_parent"
     android:layout_marginLeft="100dip"
     android:layout_marginRight="100dip"
     android:layout_height="wrap_content"
     android:text="@string/calculate"
     android:layout_marginTop="20dp" />

 <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#8B4513"
        android:orientation="horizontal" >

 <TextView
     android:id="@+id/label4"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_marginLeft="30dp"
     android:layout_marginTop="20dp"
     android:background="#2F4F4F"
     android:text="@string/area"
     android:textAppearance="?android:attr/textAppearanceMedium" />

 <TextView
     android:id="@+id/lblarea"
     android:layout_width="110dp"
     android:layout_height="21dp"
     android:layout_marginLeft="60dp"
     android:layout_marginTop="20dp"
     android:background="#2F4F4F"
     android:gravity="center"/>
 </LinearLayout>
  </LinearLayout> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:02:52.023

我知道，你得到了正确的答案，但我只是想解释一下为什么你需要像@Mr.Me 所说的那样编写代码。

您在课程开始时描述您的 View 元素，并尝试在那里初始化它们。这是不正确的。因为在构造函数将运行 Views 对象的初始化时，您尚未将布局文件附加到活动。如您所见，您正在使用 findViewById() 方法，但在使用它之前，您应该调用 setContentView()。

为了更好地理解，请阅读[Activity Lifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)，注意渲染过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:05:01.593

重新排列您的代码，如下所示：

```
 EditText l;
 EditText w;
 TextView a;
 Button b;

  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main); 
    l = (EditText) findViewById(R.id.length);
    w = (EditText) findViewById(R.id.width);
    a = (TextView) findViewById(R.id.lblarea);
    b = (Button) findViewById(R.id.calculate); 
```

# jsf-2 - 在同一视图中使用同一页面的多个包含

> ID：14738713
> 
> 赞同：1
> 
> 时间：2013-02-06T21:01:52.607
> 
> 标签：jsf-2, primefaces

环境是 JSF 2、GlassFish、PrimeFaces。

我正在开发一个用于在非常复杂的模型中编辑数据的应用程序。

模型中的所有类都与其他类有关系，而这些类又与其他类有关系，依此类推。在许多情况下，对于给定的类，关系的“集群”（该类的整个扩展树）在树的许多地方都包含相同的类。

例如 ：

*   A 类与 B、C 和 D 类有关系。
*   B类没有关系。
*   C类与B类有关系。
*   D类与E类有关系。
*   E类与B类有关系。

现在我已经总结了上下文，这就是我的困扰。

已做出设计决定，将类的给定实例的*所有*数据放在同一页面中。对于给定的“根”类，当前的架构如下：

“根”类显示在 PrimeFaces TabView 中。选项卡是：

*   “Main”：包含类的简单属性（字符串、整数、...）。
*   每个关系都有一个选项卡。
*   在每个选项卡中，都有一个指向相应 XHTML 文件的包含。

如果关系指向单个类，则指向的 XHTML 文件类似于此处描述的“根”形式。适当的对象作为参数传递给 include 指令中的 XHTML 文件。最多有 3 个嵌套的 TabView。

如果关系指向一个列表，则指向的 XHTML 文件显示一个带有“添加”、“编辑”和“删除”按钮的列表。适当的列表作为参数传递给 include 指令中的 XHTML 文件。

关于列表还有其他复杂性，但我暂时不会去那里。仅凭单一元素，我们就可以看出存在问题。

起初，我对要包含的所有 XHTML 文件使用相同的参数名称。这不起作用，因为参数对于视图是“全局的”。它似乎适用于初始显示，但是一旦一个选项卡中有更新，我就会得到一个 javax.el.PropertyNotFoundException 因为表单指向另一个对象。

为了缓解这个问题，我将参数名称更改为每个类都是唯一的。以前，所有参数都称为“元素”。修改后，A类的参数称为“aElement”，B类的参数称为“bElement”，依此类推。

如果集群中的所有类都不同，则此方法有效。如果发生冲突，我们又回到了与以前相同的问题：在两个不同的包含中，我们使用相同的参数名称，但具有不同的值。

我曾想过一种非常复杂的方法，但它使用 Javascript：

*   我向 XHTML 表单传递了一个附加参数，它是传递对象的唯一标识符。
*   我在 XHTML 表单中获取标识符，并将其放在一个隐藏字段中，该字段与表单的其余部分分开。
*   我确保隐藏字段永远不会更新，在表单获得焦点时读取其值，并使用该值通过 AJAX 请求检索正确的对象。

所以我的问题是：是否有“纯”Java/JSF 方式来处理这个问题？

TL;DR：感谢阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:18:48.520

对于非常复杂的性质，CDI 提供了比普通 JSF2 更多的功能。您可以使用生产者，并且在运行时您可以自由地评估和修改对象。

您可以跟踪已经生成的内容并相应地调整命名。例如，将每个占用的名称保存在地图中。祝你好运。

# c# - 如何使用 XML Source 组件将具有不同架构的 XML 文件加载到数据库中？

> ID：14738717
> 
> 赞同：1
> 
> 时间：2013-02-06T21:01:59.507
> 
> 标签：c#, xml, ssis, xsd

我有一个文件夹，其中包含许多具有不同 XML 架构的 XML 文件。在所有这些文件中标识的 XML 源组件有 4 个表，其中 3 个具有相同的形式，但它是一个具有多个列的表，列数因 XML 文件而异。所以当我使用 XML 源组件时，我遇到了 xsd 文件的问题。如果没有正确的 xsd 文件，XML 源组件将无法工作。

有没有办法为每个 xml 文件动态生成 xsd 文件，因为我使用 ForEach 循环或其他方法来加载 XML 文件而不生成它们的 xsd。

如果答案包括脚本组件，我使用的是 c#。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:36:58.733

您的 XSD 文件应包含所有属性的超集。然后，XML 源组件不会关心某些属性是否没有出现在特定的 XML 文件中——它会为这些值传递空值。

# sql - 动态 where 子句中的 If 或 Case

> ID：14738724
> 
> 赞同：0
> 
> 时间：2013-02-06T21:02:21.530
> 
> 标签：sql, sql-server-2008, if-statement, case

在 SQL Server 2008 上，我有一个变量 @storename，它是一个 varchar(20) 和这个语句：

```
SET @query = 'select '+@result1+' '+@colsNull+' into ##tempz 
FROM
(SELECT '+@result2+'
FROM rpPay p LEFT JOIN RPTrs r ON p.ReceiptNo = r.receiptno LEFT JOIN Currencies c ON LEFT(p.paytype,1) = c.POSCurrency
WHERE r.trsdate >= '''+ convert(varchar(10), @startDate, 101) +''' 
AND r.trsdate <= '''+ convert(varchar(10), @endDate, 101) +''' 
) p
pivot
(sum(amount) FOR CurrencyDesc in('+@cols+')) piv'
execute(@query) 
```

我正在尝试将 where 子句设置为所有 StoreID 或 @storename 的内容。我可以在那里有一个 IF 或 case 语句或类似的东西

```
and r.StoreID = * or r.StoreID = @storename 
```

有没有在 where 子句中使用通配符的事情？

就目前而言，我已经尝试过：

```
declare @storename varchar(20)
set @storename = '01'

and ('+@storename+' is null or r.storeId = '+@storename+') -- Error : Conversion failed when converting the varchar value 'BK' to data type int.
and r.StoreID like '+@storename+' -- Returns no information, just blank table 
```

也刚试过

```
declare @storename varchar(20)
set @storename = '01'
and r.storeid = '''+@storename+''' 
```

哪个确实有效，并且只从商店 01 退回所有东西，但是如果我放

```
set @storename = null -- Gives me invalid Object name for the temp table I'm using
set @storename = '' -- give back no results again, just empty table 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:05:01.070

不，但您可以尝试：-

```
AND ( @storename IS NULL OR r.StoreID = @storename ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:05:23.500

您可以使用`NULL`for`@storename`表示“所有记录”。

```
declare @storenameComparisonValue varchar(50)
set @storenameComparisonValue =
        isnull(cast(replace(@storename, '''', '''''') as varchar(50)), 'null')
' ... and (' + @storenameComparisonValue + ' is null or r.StoreID = '''
        + @storenameComparisonValue + ''') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T21:54:39.707

`r.storeId = '+@storename+')`

storeId 是一个 int 并且 @storename 是一个 varchar 所以你不能比较它们。

`and r.StoreID like '+@storename+'`

storeID 是一个 int 所以你不能对它做 LIKE 。

您可能需要将 @storename 转换为 int 或重构您的数据库，以便 StoreID 是 varchar，因此它们匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T21:58:20.767

使它与

> 和 r.storeid 像 ''%'+@storename+'%''

# python - 比较随机和随机

> ID：14738725
> 
> 赞同：0
> 
> 时间：2013-02-06T21:02:26.430
> 
> 标签：python, linux, random

我被问到：

> 使用您的树莓派，编写一个 python 脚本来确定 /dev/random 和 /dev/urandom 的随机性。读取字节和直方图结果。在 matplotlib 中绘图。对于您的答案，请包括 python 脚本。

我目前迷失在“确定随机性”的措辞上。

我可以从 urandom 和随机读取：

```
#rb - reading as binary
devrndm = open("/dev/random", 'rb')
#read to a file instead of mem?
rndmdata = devrndm.read(25) #read 25bytes 
```

或者

```
with open("/dev/random", 'rb') as f:
    print repr(f.read(10)) 
```

我认为这个练习的目的是发现 urandom 比 random 更快并且拥有更大的池。但是，如果我尝试阅读超过 15 的任何内容，阅读时间似乎会成倍增加。

所以我现在不知道如何比较“随机性”。如果我将 urandom 和 random 都读取到各自的文件中，我该如何比较它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:11:43.997

您的体验可能正是他们想要的。从 urandom(4) 的手册页：

> 读取时，/dev/random 设备将仅返回熵池中估计的噪声位数内的随机字节。/dev/random 应该适合需要非常高质量随机性的用途，例如一次性填充或密钥生成。当熵池为空时，来自 /dev/random 的读取将被阻塞，直到收集到额外的环境噪声。
> 
> 从 /dev/urandom 设备读取不会阻塞等待更多熵。

注意关于阻塞的一点。urandom 不会，随机会。特别是在嵌入式环境中，可能很难获得额外的熵，这会导致您看到的阻塞。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T21:22:37.783

可以这么简单吗：

```
In [664]: f = open("/dev/random", "rb")
In [665]: len(set(f.read(256)))
Out[665]: 169

In [666]: ff = open("/dev/urandom", "rb")
In [667]: len(set(ff.read(256)))
Out[667]: 167

In [669]: len(set(f.read(512)))
Out[669]: 218

In [670]: len(set(ff.read(512)))
Out[670]: 224 
```

IE。要求 256 个字节不会返回 256 个唯一值。因此，您可以根据唯一计数绘制增加的样本量，直到达到 256 个饱和点。

# ios - NSManagedObject 保持错误

> ID：14738726
> 
> 赞同：6
> 
> 时间：2013-02-06T21:02:26.503
> 
> 标签：ios, core-data

**我的情况**：假设我有一个类`Person`（NSManagedObject 的子类）。每次用户单击按钮时，都会创建一个新的 Person 实例并将其添加到全局 NSMutableArray。新创建的 Person 实例也将被添加到子上下文中，如下所示：

```
NSManagedObjectContext *childContext = [[NSManagedObjectContext alloc] initWithConcurrencyType: NSPrivateConcurrencyType];
[childContext setParentContext: _mainContext]; 
```

同样，当单击按钮时，我会保存上下文：（它有点复杂，但遵循这个结构）

```
[childContext performBlock:^{
    [childContext save:nil];
    [_mainContext save:nil];
}]; 
```

在我的数组中的按钮对象上单击两次或更多次（不确定是否取决于总点击次数）后变为`fault`.

根据文档：访问故障对象的属性应该加载持久对象。
即使当我访问我的 NSManagedObject 的属性时，该对象仍然是错误的并且属性是`nil`.

为什么我的数组中的对象出现故障，我如何访问故障对象的属性？

**编辑**：

加载 UIViewController 时，我从数据存储区获取所有现有对象：

```
-(NSArray*)fetchPersons {
    NSManagedObjectContext *context = [self managedObjectContext]; //this is _mainContext, it is created with initWithConcurrencyType:NSMainQueueConcurrencyType
    NSFetchRequest  *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *description = [NSEntityDescription entityForName:@"Person" inManagedObjectContext:context];
    [fetchRequest setEntity:description];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"key = %i", aCondition];
    [fetchRequest setPredicate:predicate];
    return [context executeFetchRequest:fetchRequest error:nil];
} 
```

我正在使用这个 NSArray`fetchPersons`来填充 NSMutableArray。

创建一个新的 Person 对象：

```
-(Person*)createPerson {
    NSManagedObjectContext *childContext = [[NSManagedObjectContext alloc] initWithConcurrencyType: NSPrivateQueueConcurrencyType]; 
    [childContext setParentContext:[self managedObjectContext]];
    Person *person = [NSEntityDescription insertNewObjectForEntityForName:@"Person" inManagedObjectContext:childContext];
    return person;
} 
```

我不确定如何处理带有 òbjectID 的对象。我使用 childContext 作为临时上下文。有时我需要一个 Person 实例，但我不想将它保存到持久存储中（或者在开始时将其插入到主上下文中）。

在所有这些步骤之后，我的 NSMutableArray 中有所有对象。在创建一些对象并尝试记录它们的属性（`person.name`或其他东西）后，我得到了 nil 属性（故障对象）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-07T20:19:45.047

`NSManagedObject``NSManagedObjectContext`s 与创建它们的对象保持紧密的关系。造成这种情况的具体原因是托管对象始终是可变的，因此可能需要写回存储区，并且预计未来会出现故障——Core Data 明确可能选择不将整个持久存储区加载到内存中，但可能必须处理未来任意遍历对象图或内存不足警告。

（除此之外：这也是 Core Data 对象不能用于创建它们的线程/队列以外的任何东西的最直接原因；它是上下文以及上下文和对象之间隐式通信的各种位'安全）

这在实践中意味着您不应该允许托管对象超过其存储。

为了允许您在具有不同上下文的不同代理之间来回发送对象，Apple 实现了[`NSManagedObjectID`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectID_Class/Reference/NSManagedObjectID.html)它是任何托管对象的唯一标识符。这是一个完全不透明的类，但作为参考，如果你有一个 SQLite 存储，那么它就是对相关表和行的引用；如果您有其他商店类型之一，那么它同样是指向商店中某个位置的指针。它本身不携带任何对象数据。

所以你通常做的是`objectID`在创建它的上下文仍然存在时调用一个对象。然后，您可以将其传递给其他想要它的人。然后，他们将使用[[myManagedObjectContext -existingObjectWithID:error:]](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html#//apple_ref/occ/instm/NSManagedObjectContext/existingObjectWithID:error:)来获取他们可以安全使用的托管对象的新副本。新副本将绑定到该上下文而不是原始副本，因此无论何时何地该上下文是安全的，而不是原始的，它都是安全的。

唯一可能令人惊讶的是，当您第一次插入一个对象时，它只会获得一个临时对象 ID。这是因为 Core Data 喜欢将需要插入到存储中的东西批量化，然后仅在您请求保存时才将它们全部插入。

出于您的目的，您不希望在保存之前传递 ID，因为该对象不会存在于父存储中。因此，这一点部分是学术性的，但假设您出于其他原因想要提取 ID，您还可以考虑使用 context 的[`-obtainPermanentIDsForObjects:error:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html#//apple_ref/occ/instm/NSManagedObjectContext/obtainPermanentIDsForObjects:error:)，这可能比实际保存快很多，具体取决于您的商店类型，并且绝对不会慢点。

# javascript - 无法让 JavaScript 爆米花样本工作

> ID：14738727
> 
> 赞同：0
> 
> 时间：2013-02-06T21:02:28.723
> 
> 标签：javascript, jquery, audio

我是网络编程的绝对菜鸟，我似乎无法让下面的爆米花示例正常工作。我正在尝试从这里的*工作*示例中实现它：http: [//jsfiddle.net/thisgeek/At3xg/](http://jsfiddle.net/thisgeek/At3xg/)

有人可以发现我做错了什么吗？请注意，在下面的代码中，这些词不会与音频一起突出显示，但它们在 jfiddle 示例中会突出显示。

谢谢！

```
<html>
     <head>
        <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
        <script src="http://popcornjs.org/code/dist/popcorn-complete.min.js"></script>

       <script>
             var pop = Popcorn("#greeting");

            var wordTimes = {
                "w1": { start: 1, end: 1.5 },
                "w2": { start: 1.9, end: 2.5 },
                "w3": { start: 3, end: 4 }
            };

            $.each(wordTimes, function(id, time) {
                 pop.footnote({
                    start: time.start,
                    end: time.end,
                    text: '',
                    target: id,
                    effect: "applyclass",
                    applyclass: "selected"
                });
            });

            pop.play();

            $('.word').click(function() {
                var audio = $('#greeting');
                audio[0].currentTime = parseFloat($(this).data('start'), 10);
                audio[0].play();
            });
       </script>  

        <style>
       .word {
           color: red;
        }
        .word:hover, .word.selected {
            color: blue;
            cursor: pointer;
        }
       </style>    
     </head>

     <body>
        <audio id="greeting" src="http://dl.dropbox.com/u/17154625/greeting.ogg" controls></audio>

        <div id="text">
           <span id="w1" class="word" data-start="1.0">Hello</span>,
           and <span id="w2" class="word" data-start="2.0">welcome</span>
           to Stack <span id="w3" class="word" data-start="3.0">Overflow</span>.
           Thank you for asking your question.
        </div>
     </body>
   </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:09:23.700

将所有你自己的 JavaScript 代码封装在里面

```
$(document).ready(function() { /* your code here */ }); 
```

或者将它移到`</body>`标签之后，所以它会等到 HTML 正文加载后才运行。

`onLoad`当您在左上角设置下拉菜单时，jsFiddle 会自动执行此操作。

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

# java - MySQL 无法正确存储一些 UTF8 字符

> ID：14738732
> 
> 赞同：1
> 
> 时间：2013-02-06T21:02:48.100
> 
> 标签：java, mysql, jdbc, utf-8, character-encoding

我正在使用**mysql** dbms 来存储来自维基百科的页面。`utf-8`我已使用指令在 my.cnf 文件中将字符集编码设置为（维基百科编码）：

```
[mysqld]
character_set_server = utf8 
```

`'chararacter set utf8'`并使用属性定义创建了我的数据库。

我还通过以下方式更改了 mysqld 客户端的字符集编码：

*   `'charSet=utf8'`在初始化我的 jdbc 驱动程序时插入属性。
*   查询`'set names utf8'`

但是我注意到 mysql 服务器用其他字符替换了一些字符。

例如，它替换`á`为`a`.

**更新**

我已经运行了命令`show variables like '%char%'`，确保两者`character_set_client`和`character_set_set`都是`utf8`.

如何在我的数据库中存储正确的字符？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:06:07.677

尝试在 DB URL 中指定编码：

```
url="jdbc:mysql://localhost:port/DBNAME?characterEncoding=UTF-8" 
```

以下是有关我的答案的更多信息：

以下内容来自 MySQL 文档（[http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-charsets.html](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-charsets.html)）：

> 从 JDBC 驱动程序发送到服务器的所有字符串都会自动从原生 Java Unicode 格式转换为客户端字符编码，包括使用 Statement.execute()、Statement.executeUpdate()、Statement.executeQuery() 发送的所有查询以及所有PreparedStatement 和 CallableStatement 参数，不包括使用 setBytes()、setBinaryStream()、setAsciiStream()、setUnicodeStream() 和 setBlob() 设置的参数。
> 
> **设置字符编码**
> 连接时自动检测客户端和服务器之间的字符编码。对于服务器版本 4.1.0 和更高版本，您可以使用 character_set_server 在服务器上指定编码。驱动程序自动使用服务器指定的编码。要覆盖客户端自动检测到的编码，请使用用于连接到服务器的 URL 中的 characterEncoding 属性。要允许从客户端发送多个字符集，请使用 UTF-8 编码，方法是将 utf8 配置为默认服务器字符集，或者通过 characterEncoding 属性将 JDBC 驱动程序配置为使用 UTF-8。

几个月前我遇到了类似的问题。我检查了 MySQL 上 character_set_server 的默认值（使用“mysqld --verbose --help”命令）。这是拉丁语1。

# php - 如何在四方重定向期间拥有会话变量

> ID：14738735
> 
> 赞同：0
> 
> 时间：2013-02-06T21:03:08.163
> 
> 标签：php, foursquare

当我重定向到foursquare以进行oauth目的时，我试图保持用户名变量处于活动状态。我正在使用 Amazon EC2 服务器。以下是相关代码：

```
session_start();
if (isset($_GET['username']))
{
    $_SESSION['username'] = $_GET['username']
    header("Location: https://foursquare.com/oauth2/authenticate?clientid=(clientidHere)&responsetype=code&redirect_uri=http://redirecturi");
}
if (isset($_GET['code']))
{ 
    echo $_SESSION['username'];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:59:56.010

认为这里的问题在于您的参数。他们应该是：

*   `client_id`
*   `response_type`
*   `redirect_uri`

请参阅：[https ://developer.foursquare.com/overview/auth](https://developer.foursquare.com/overview/auth)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:55:11.010

我发现我只需要使用 cookie。

# java - 使用 UI AutoHide 时尝试切换变量和更新视图

> ID：14738737
> 
> 赞同：0
> 
> 时间：2013-02-06T21:03:08.930
> 
> 标签：java, android, view, onclick, toggle

```
 // Set up the user interaction to manually show or hide the system UI.
    contentView.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            if (TOGGLE_ON_CLICK) {
                mSystemUiHider.toggle();
                ((ZooView)contentView).editmode = mSystemUiHider.isVisible();
            } else {
                mSystemUiHider.show();
            }
        }
    }); 
```

这是我的代码，我正在尝试更新自定义视图（ZooView）中的变量以了解视图是否处于哪种模式（editmode 自定义变量主要更改 OnDraw 方法）...我试图使视图无效它会在点击时切换，但事实并非如此，因为 logcat 显示它甚至没有定期使用此功能。（只是偶尔）

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:16:05.197

mSystemUiHider .setOnVisibilityChangeListener(new SystemUiHider.OnVisibilityChangeListener() { // 缓存值。 int mControlsHeight, mControlsWidth; int mShortAnimTime;

```
 @Override
                @TargetApi(Build.VERSION_CODES.HONEYCOMB_MR2)
                public void onVisibilityChange(boolean visible) {

                    ((ZooView)contentView).editmode = visible; 
```

将更改放在这里完全修复了它！:)

# java - 名称 [t3://127.0.0.1:7001/weblogic.management.mbeanservers.domainruntime] 未绑定在此上下文中。找不到 [t3:]

> ID：14738740
> 
> 赞同：0
> 
> 时间：2013-02-06T21:03:19.813
> 
> 标签：java, jsp, tomcat, weblogic, jmx

我有`Tomcat 7.0`一些 Java 代码，用于连接到`Weblogic 12c`服务器以管理 weblogic 服务器。我可以使用 RMI/IIOP，但不能使用 T3。每个人都说确保该`wlfullclient.jar`文件已被使用并且可用于 Tomcat 类路径。这是。我知道，因为如果我删除它，我得到的错误是`"Unsupported protocol: T3"`. 而且我的 RMI/IIOP 连接不起作用。所以我只是将 IIOP 协议切换到 T3，我得到：

`Failed to retrieve RMIServer stub: javax.naming.NameNotFoundException: Name [t3://127.0.0.1:7001/weblogic.management.mbeanservers.domainruntime] is not bound in this Context. Unable to find [t3:]`

环顾所有在线文档，我想知道这是否意味着我必须在我的 tomcat 上设置一个配置文件。所有上下文连接信息都在代码中——主机、端口、用户 ID、密码等。

所以我很困惑为什么Tomcat说它找不到t3以及为什么它不能绑定到`weblogic.management.mbeanservers.domainruntime`mbean。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:43:47.423

我不确定您如何生成 wlfullclient.jar 以及您使用的是什么版本的 JVM。您能否确保按照以下页面中提到的步骤生成 jar。

[http://docs.oracle.com/cd/E12840_01/wls/docs103/client/jarbuilder.html](http://docs.oracle.com/cd/E12840_01/wls/docs103/client/jarbuilder.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:34:25.147

试着放

```
"weblogic.management.remote" as JMXConnectorFactory.PROTOCOL_PROVIDER_PACKAGES 
```

在您的环境中，加上主体和凭据，然后`new JMXServiceURL(...)`使用

```
"service:jmx:t3://localhost:7001/jndi/weblogic.management.mbeanservers.domainruntime" 
```

并将其传递给`JMXConnectorFactory.connect(serviceUrl, env)`.

此外，`wlthint3client.jar`这应该足够了 - 但我不确定这一点，像你一样构建自己的 wlfullclient.jar 可能更安全......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-09T17:53:43.553

那些罐子可能是骗人的。无论您使用哪个，请确保位于路径的开头，并且您可以添加此代码以检查您是否已准备好一切。

> Class<?> cl = Class.forName("weblogic.management.remote.t3.ClientProvider");

# c# - 匹配多行直到分隔线？

> ID：14738742
> 
> 赞同：1
> 
> 时间：2013-02-06T21:03:23.700
> 
> 标签：c#, regex, c#-4.0

在尝试解析数据表时学习一些正则表达式，我认为没有一种简单的方法（在正则表达式中，我的意思是在 C# 中，当然！）来做到这一点。假设我有一个包含以下内容的文件：

```
0000AA  One Token    -  Value
0000AA  Another Token-  Another Value
0000AA  YA Token     -  Yet Another
0000AA  Yes, Another -  Even More
0000AA
0000AA  ______________________________________________________________________
0000AA  This line - while it will match the regex, shouldn't. 
```

所以我有一个简单的多行正则表达式： `^\s*[A-Z]{2}[0-9]{4}\s\s*(?<token>.*?)\-(?<value>.*?)$` 这会将所有“令牌”加载到“令牌”中，并将所有值加载到“值”组中。很简单！但是，Regex 也匹配底线，将“This line”放入标记中，并将“while it will [...]”放入值中。

本质上，我希望正则表达式只匹配`____`分隔线上方的行。这是否可以单独使用正则表达式，还是我需要先将传入的字符串修改为分隔线上的 .Split() `____`？

干杯 -
迈克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:12:23.477

仅使用正则表达式解析这样的文本文件不会使用正确的工具来完成这项工作。尽管可能，但它既低效又不必要地复杂。

我实际上也不会将所有文本加载到字符串中并在这一行上拆分，因为这不是最有效的方法。我宁愿循环读取文件，一次一行，根据需要处理每一行。然后在到达此特定行时停止处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:04:51.560

> 我希望正则表达式仅匹配`____`分隔线上方的行。仅使用正则表达式可以做到这一点吗？

当然有可能。添加前瞻以确保遵循这样的行，例如：

```
(?=(?s).*^\w{6}[ \t]+_{4,}) 
```

将此添加到表达式的末尾，以确保遵循这样的行。例如：

```
(?m)^\s*[A-Z]{2}[0-9]{4}\s\s*(?<token>.*?)\-(?<value>.*)$(?=(?s).*^\w{6}[ \t]+_{4,}) 
```

（还在表达式中添加`m`和`s`标志。）

这不是很有效，因为正则表达式引擎可能需要为每个匹配项扫描大部分字符串。

# javascript - javascript 中 a == 'foo' 和 'foo' == a 之间的区别

> ID：14738748
> 
> 赞同：2
> 
> 时间：2013-02-06T21:03:44.357
> 
> 标签：javascript, optimization, minify

这是一个基本的东西，但我发现它值得与大家分享。我观察到一个代码压缩实用程序改变了一个代码片段，其中一个条件被写成，

```
if(document.getElementById('foo').value == '6') 
```

到

```
if('6' == document.getElementById('foo').value) 
```

这有什么帮助？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T21:06:31.927

这是为了避免分配并在您错过两者之一时出错`=`。

```
if('6' = document.getElementById('foo')) 
```

不会通过（分配给文字），但是

```
if(document.getElementById('foo') = '6') 
```

会默默地失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:10:55.740

`==`in javascript 不是“强类型”，与`===`.

举个例子 ：

```
if (1 == '1')
{
    //Will pass here.
}

if (1 === '1')
{
   //Will not pass here
} 
```

所以这`==`意味着两个操作数之一被转换为另一个的类型。

`'foo' == a`我可以看到和之间的唯一区别`a == 'foo'`是，在一种情况下`a`被转换为字符串，而在另一种情况下`'foo'`被转换为 wathever 的类型是`a`.

# sql - SQL：如何找到从一个表链接到另一个表的最小条目数

> ID：14738751
> 
> 赞同：7
> 
> 时间：2013-02-06T21:04:08.927
> 
> 标签：sql, postgresql, select, count, min

假设我有一些 Table_A：

```
A_id | A_val
1      a
2      b
3      c 
```

一些表_B：

```
B_id | B_val
1      d
2      e
3      g 
```

和一个链接器 Table_C：

```
A_id | B_id
1      1
2      1
2      2
3      1
3      2
3      3 
```

我需要帮助来尝试在*表 A中找到与**表 B*中链接的项目最少的项目。我目前是使用 PostgreSQL 的 SQL 的初学者，并认为它可能与使用子查询有关。我设法使用以下方法计算链接：

```
SELECT A_id, COUNT(B_id) as Num_links
  FROM TABLE_C
  GROUP BY A_id; 
```

但我不知道从这里去哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:16:20.020

您可以使用`with`子句为“计数”查询提供别名，并将其视为临时表。然后选择 中`a_id`小于`num_links`或等于最低计数的`num_links`。

```
WITH link_counts AS (
         SELECT a_id, COUNT(b_id) as num_links
           FROM table_c
       GROUP BY a_id
     )
SELECT a_id
  FROM link_counts
 WHERE num_links <= (SELECT MIN(num_links) FROM link_counts) 
```

请注意，如果不同`a_id`的链接具有相同（最低）数量的链接（例如，如果`a_id`1 和 4 都只有 1 个链接），这可能会返回多行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:19:10.847

您可以使用`RANK()`. 这将为您的 Aid 排序`COUNT(Bid)`- 对于具有相同编号的那些，所有将返回相同的排名。

```
SELECT *
FROM A T1
  JOIN (
    SELECT Aid, RANK() OVER (ORDER BY COUNT(Bid)) rnk
    FROM C 
    GROUP BY Aid
    ) T2 ON T1.Id = T2.Aid
WHERE T2.rnk = 1 
```

这是[小提琴](http://sqlfiddle.com/#!1/2b232/1)。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T21:12:46.053

这是策略。计算最大链接数。您可以通过使用`order by`and修改查询来做到这一点`limit`。

接下来，计算 中每一行的链接总数`tableC`。为此，我使用了窗口函数。该声明：

```
count(*) over (partition by a_id) 
```

说创建一个变量，它是我表中“a”的计数。

然后一起加入这个。

```
select distinct c.a_id
from (select c.*,
             count(*) over (partition by a_id) as num_links
      from table_c c
     ) c join
     (select a_id, count(*) as num_links
      from table_c c
      group by a_id
      order by 2 asc
      limit 1
     ) cmax
     on c.num_links = cmax.num_links 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T21:29:06.390

这是另一种选择。它在`HAVING`子句中使用子查询：

```
SELECT DISTINCT AId, COUNT(*)
FROM C
GROUP BY AId
HAVING COUNT(*) <= ALL (SELECT COUNT(*) 
                        FROM C 
                        GROUP BY AId) 
```

和相关的[小提琴](http://sqlfiddle.com/#!1/2b232/5)。我不知道这在性能方面与其他解决方案相比如何，但它似乎清楚地表明了正在发生的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T21:54:06.420

看起来这里的其他人有一个更优雅的解决方案......我的 SQL Fu 有点生疏，但这也可以。

```
 CREATE TABLE Table_C
(
    A_id INT,
    B_id INT
);

INSERT INTO Table_C (A_id, B_id) VALUES (13, 112);
INSERT INTO Table_C (A_id, B_id) VALUES (44, 105);
INSERT INTO Table_C (A_id, B_id) VALUES (66, 68);
INSERT INTO Table_C (A_id, B_id) VALUES (13, 113);
INSERT INTO Table_C (A_id, B_id) VALUES (445, 105);
INSERT INTO Table_C (A_id, B_id) VALUES (660, 68);

CREATE TABLE TempTable
(
    A_id INT,
    Cnt INT
);

INSERT INTO
  TempTable (A_id, Cnt)
SELECT
  t.A_id
  , COUNT(t.A_id) AS Cnt
FROM
  Table_C t
GROUP BY
  t.A_id;

SELECT @minCnt := MIN(Cnt) FROM TempTable;

SELECT
  A_id
FROM
  Table_C
GROUP BY
  A_id
HAVING
  COUNT(A_id) = @minCnt; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T00:09:12.057

```
WITH ct AS (
   SELECT a.a_id
         ,count(c.a_id) AS link_ct
         ,min(count(c.a_id)) OVER () AS min_ct
   FROM   table_a a
   LEFT   JOIN table_c c USING (a_id)
   GROUP  BY 1
   )
SELECT a_id, link_ct
FROM   ct
WHERE  link_ct = min_ct; 
```

这类似于[@matts 发布](https://stackoverflow.com/a/14738948/939860)的内容。它在某些方面有所不同：

*   `ct`在我数`LEFT JOIN`到的 CTE中`table_c`，这样我就不会错过来自**0 个连接**的行`table_a`，根据问题中的定义，这些行应该获胜。**`table_b`**
***   使用窗口函数在 CTE 中计算`min_ct`（因此在最终`WHERE`条件中没有额外的子查询）。可能会或可能不会更快，无论如何它都更干净。*   最终`WHERE`条件良好，`=`而不是`<=`。**

 **[**-> sqlfiddle**](http://sqlfiddle.com/#!12/6ba15/4)展示了差异。**

# ruby-on-rails - 如何根据 Sphinx (Rails) 中的字段值对搜索结果进行排序

> ID：14738753
> 
> 赞同：0
> 
> 时间：2013-02-06T21:04:13.410
> 
> 标签：ruby-on-rails, sphinx, thinking-sphinx

我有一个项目有时间表的场景，时间表有很多不同的名称和截止日期。

鉴于我可以搜索项目并对项目字段值甚至多态字段值进行排序，我如何根据具有请求的计划名称的计划对结果进行排序。

用简单的英语，在 Thinking-Sphinx 中，我如何按匹配计划名称的截止日期对搜索结果进行排序，例如。我希望按“预订”（Schedule）截止日期对项目进行排序。

这似乎在 Sphinx 中应该很简单，但它避开了我。我已经考虑构建一个考虑日程名称的搜索后排序，但 Sphinx 排序会更受欢迎。

我已经尝试过类似以下的方法，但它不考虑计划名称。

```
class Project
   has_many :schedules

   define_index do
      has schedules.due_date, :type => :datetime, :as => :due_date
   end
end

$: Project.search(query, :order => "due_date desc", :match_mode => :extended) 
```

有趣的是，我确实得到了结果（有点排序），但它不准确，可能是因为它没有考虑到属于一个项目的许多时间表，因此不是特定于字段值的。我也考虑过使用“with”但是

有没有办法用 Thinking Sphinx 完成这个任务？（我在 Rails 2.3.x 上，所以我在 think-sphinx 1.4.3 上。）

[编辑] 我已经使用 <=> 运算符成功地对这个后搜索进行了排序，但这需要查找时间表。我还研究了表达式排序，但这仅适用于正在搜索的模型的字段，我不知道我可以索引什么以使其可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:49:35.920

来自 Pat Allan：按照我所描述的方式，这是不可能的。应改为搜索时间表。

请参阅 Pat在 Google Group 讨论中的[回答。](https://groups.google.com/forum/?fromgroups=#!topic/thinking-sphinx/jY35S2TjqWo)“你想用 Sphinx 做的事情是不可能的在项目索引中。我建议您改为在日程表上搜索，然后，因为只有一个日程表名称和一个日程表截止日期，所以应该没问题。从那里，您可以在搜索结果中使用该日程表的项目。 "

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T13:03:04.300

我想你必须使用你的查询

默认情况下，排序模式是 asc 用于更改您需要指定的

```
Project.search <query>, :order => <attribute_name>, :sort_mode => :desc, :match_mode =>:extended 
```

如果你想使用多个属性，或者 Sphinx 的排名分数，那么你需要使用 :extended 排序模式。

```
Project.search <query>, :sort_mode => :extended, :order => "attribute_name DESC/ASC, @relevance DESC/ASC", :match_mode=> :extended 
```

[http://pat.github.com/ts/en/searching.html#sorting](http://pat.github.com/ts/en/searching.html#sorting)

# android - 视频播放后打开新场景

> ID：14738754
> 
> 赞同：0
> 
> 时间：2013-02-06T21:04:14.563
> 
> 标签：android, andengine

我正在学习 android，我试图弄清楚如何在视频视图完成后打开一个新场景。

这是我的代码：

```
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.view.Window;
import android.view.WindowManager;
import android.widget.VideoView;

public class SplashScene extends Activity implements OnCompletionListener {

    BaseActivity activity;
    VideoView video;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.splash);

        video = (VideoView) findViewById(R.id.vvSplashVideo);
        String path = "android.resource://" + getPackageName()
                + "/raw/splashscreen";
        video.setVideoURI(Uri.parse(path));

        video.setOnCompletionListener(this);

        video.start();
        loadResources();
    }

    public void loadResources() {

    }

    @Override
    public void onCompletion(MediaPlayer arg0) {
        // TODO Auto-generated method stub

        Log.v("Fin", "done");

        activity.setCurrentScene(new MainMenuScene());      
    } 
```

当我运行该应用程序时，视频有效并且日志消息有效，但随后出现此错误：

[http://puu.sh/1YuiA](http://puu.sh/1YuiA)在应用程序崩溃之前。

关于我做错了什么的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:38:38.587

`activity;`您必须在 SplashScene 类中进行初始化。

代码：

```
public class SplashScene extends Activity implements OnCompletionListener {

BaseActivity activity;
....

 @Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

activity=new BaseActivity (); <===== initiate this

// rest of code } 
```

}

}

# antlr - 基于递归下降的计算器堆栈溢出

> ID：14738760
> 
> 赞同：2
> 
> 时间：2013-02-06T21:04:31.460
> 
> 标签：antlr, recursive-descent

**TL;博士：**

我的计算器语法依赖于递归下降将括号组相互嵌套，但是嵌套括号过多（大约 20 个）会导致堆栈溢出。我怎样才能解决这个问题？有没有办法让问题更平坦？

**长表：**

不久前——我的脑袋深深陷入了小型嵌入式系统——没有半个大脑的人不应该遇到堆栈溢出。现在被一项更抽象的任务所困扰，我来这里寻求建议。

激励项目是一个适用于 Android 的计算器。当前的计算器在很多方面都明显不足，但我今天没有带我的肥皂盒，所以我直接解决我遇到的问题：堆栈溢出！

具体来说，当用户创建了太多嵌套的括号组时，包括函数等。这是因为我的计算器依赖于`ANTLR`语法，这意味着它使用递归下降。方便的是，这允许它通过 PEMDAS 连续运行，从而可以轻松计算嵌套函数和括号。但！我发现 - 根据手机 - 按下括号按钮 20 次左右会导致崩溃，这是由调用堆栈引起的堆栈溢出引起的，大约 100 次函数调用深度，这是递归下降方法的自然结果。

我知道，平面比嵌套更好，但它所经历的 4 个级别（函数）是完全必要的，而其他几个级别使我的生活对数更容易。即使删除这些级别也不能解决问题：用户仍然能够在几分钟内导致系统崩溃。有一个“太多的括号！” 错误消息很糟糕（这是其他计算器之一会做的事情）。另外，我使用 AST 输出来格式化输入字符串，使其看起来非常漂亮，因此预先计算括号组会使整个系统有点过于复杂。

所以，问题：

即使问这个问题似乎也很愚蠢，但是：有没有办法在 ANTLR 中实现一个语法，可以解析和解释复杂且深度嵌套的表达式，而不会爆炸调用堆栈？

语法：

```
grammar doubleCalc;

options {
    language = Java;
    output = AST;
//  k=2;
}

// Calculation function.
prog returns [double value]
    :   e=addsub EOF {$value = $e.value;}
    ;

addsub returns [double value]
    :   e=muldiv {$value = $e.value;}
        (   PLUS^ e=muldiv {$value += $e.value;}
        |   MINUS^ e=muldiv {$value -= $e.value;}
        )*
    ;

muldiv returns [double value]
    :   e=power {$value = $e.value;} 
        (   MUL^ e=power {$value *= $e.value;}
        |   DIV^ e=power {$value /= $e.value;}
        )*
    ; 

power returns [double value]
    :   e = negate {$value = $e.value;} 
        (   POW^ f=power {$value = java.lang.Math.pow($value, $f.value);}   
        )?
    ; 

negate returns [double value]
    :   (   MINUS^ neg = atom {$value = -$neg.value;}
        |   neg = atom {$value = $neg.value;}
        )
    ;

atom returns [double value]
    :   LOG10^ '(' e=addsub ')' {$value = java.lang.Math.log10($e.value);} 
    |   LOG8^ '(' e=addsub ')' {$value = java.lang.Math.log10($e.value)/java.lang.Math.log10(8.0);} 
    |   LOG2^ '(' e=addsub ')' {$value = java.lang.Math.log10($e.value)/java.lang.Math.log10(2.0);} 
    |   LN^ '(' e=addsub ')' {$value = java.lang.Math.log($e.value);} 
    |   ASIN^ '(' e=addsub ')' {$value = Math.asin(Math.PI*(($e.value/Math.PI) \% 1));}//com.brogramming.HoloCalc.Trig.asin($e.value);} 
    |   ACOS^ '(' e=addsub ')' {$value = Math.acos(Math.PI*(($e.value/Math.PI) \% 1));}
    |   ATAN^ '(' e=addsub ')' {$value = Math.atan(Math.PI*(($e.value/Math.PI) \% 1));}
    |   SIN^ '(' e=addsub ')' {$value = Math.sin(Math.PI*(($e.value/Math.PI) \% 1));} 
    |   COS^ '(' e=addsub ')' {$value = Math.cos(Math.PI*(($e.value/Math.PI) \% 1));} 
    |   TAN^ '(' e=addsub ')' {$value = Math.tan(Math.PI*(($e.value/Math.PI) \% 1));}
    |   ASIND^ '(' e=addsub ')' {$value = Math.asin(Math.PI*(($e.value/180f) \% 1));}//com.brogramming.HoloCalc.Trig.asin($e.value);} 
    |   ACOSD^ '(' e=addsub ')' {$value = Math.acos(Math.PI*(($e.value/180f) \% 1));}
    |   ATAND^ '(' e=addsub ')' {$value = Math.atan(Math.PI*(($e.value/180f) \% 1));}
    |   SIND^ '(' e=addsub ')' {$value = Math.sin(Math.PI*(($e.value/180f) \% 1));} 
    |   COSD^ '(' e=addsub ')' {$value = Math.cos(Math.PI*(($e.value/180f) \% 1));} 
    |   TAND^ '(' e=addsub ')' {$value = Math.tan(Math.PI*(($e.value/180f) \% 1));}
    |   SQRT^ '(' e=addsub ')' {$value = (double) java.lang.Math.pow($e.value, 0.5);} 
    |   CBRT^ '(' e=addsub ')' {$value = (double) java.lang.Math.pow($e.value, 1.0/3.0);} 
    |   ABS^ '(' e=addsub ')' {$value = (double) java.lang.Math.abs($e.value);}
    // Numbers
    |   n = number {$value = $n.value;}
    |   '(' e=addsub ')' {$value = $e.value;}
    ;

number returns [double value]
    :   PI {$value = java.lang.Math.PI;}
    |   EXP {$value = java.lang.Math.E;}
    |   INT {$value = (double) Double.parseDouble($INT.text.replaceAll(",", ""));}
    |   DOUBLE {$value = Double.parseDouble($DOUBLE.text.replaceAll(",", ""));}
    ;

LN  :    'ln';
LOG10   :   'log10';
LOG8    :   'log8';
LOG2    :   'log2';
SIN :   'sin';
COS :   'cos';
TAN :   'tan';
ASIN    :   'asin';
ACOS    :   'acos';
ATAN    :   'atan';
SINH    :   'sinh';
COSH    :   'cosh';
TANH    :   'tanh';
ASINH   :   'asinh';
ACOSH   :   'acosh';
ATANH   :   'atanh';
SIND    :   'sind';
COSD    :   'cosd';
TAND    :   'tand';
ASIND   :   'asind';
ACOSD   :   'acosd';
ATAND   :   'atand';
SINHD   :   'sinhd';
COSHD   :   'coshd';
TANHD   :   'tanhd';
ASINHD  :   'asinhd';
ACOSHD  :   'acoshd';
ATANHD  :   'atanhd';
PI  :   'pi';
IM  :   'i';
EXP :   'e';
ABS :   'abs';
FACT    :   'fact';
SQRE    :   'sqre';
CUBE    :   'cube';
SQRT    :   'sqrt';
CBRT    :   'cbrt';
POW : '^';
PLUS : '+';
MINUS : '-';
MUL : ('*');
DIV : '/';
BANG    :   '!';
DOUBLE: ('0'..'9' | ',')+ '.'('0'..'9')* ;
INT :   ('0'..'9' | ',')+ ;
NEWLINE:'\r'? '\n' ;
PERCENT
    :   '%';
EOF :   '<EOF>' {$channel=HIDDEN;}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T21:43:07.480

看看 Keith Clarke 的这个不错的技术：

[http://antlr.org/papers/Clarke-expr-parsing-1986.pdf](http://antlr.org/papers/Clarke-expr-parsing-1986.pdf)

ANTLR v4 使用了一个变体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T19:12:47.360

听起来像 ANTLR v4 是根据 Ter 的回答要走的路，但是另一种方法是自己扫描输入字符串并递归地挑选出最低的括号组并将其替换为计算值。

我会创建自己的 TokenStream 来缓冲令牌，寻找')'。当它看到时，向后搜索'（'。获取该标记序列并将其提供给您的解析器以获取该表达式的双精度值。定义一个可以在其中包含双精度的自定义标记类和一个特殊标记type 指定一个计算结果，并将其粘贴到您的流中，parens 曾经是。修改您的语法以通过返回嵌入的双精度来处理该新标记。

通过这种方式，您实际上消除了`'(' e=addsub ')'`语法中的需要。所有这些都将替换为与您的特殊令牌匹配并返回嵌入其中的值的规则。

此外，您正在使用您的语法构建一棵树，但考虑到您的规则中的操作，看起来您正在立即计算表达式。假设您实际上并没有使用树，您应该消除树构建注释并摆脱该`output=AST`选项。

# php - mysql+php除法查询值

> ID：14738763
> 
> 赞同：0
> 
> 时间：2013-02-06T21:04:38.207
> 
> 标签：php, mysql, divide

所以我让这张表填满了一行（我们现在称之为 $numbers），其中包含大于 100 000 的数字。例如 581 249

我想用 MySql 查询在屏幕上（使用 PHP）回显这些值。我只想将返回值除以 1000...

这个想法是这样的：

我做了一个单杠，它是 $numbers 的长度。但是这个条的宽度是以像素为单位的 $numbers 的值......基本上，它创建一个带有（例如）581 249 像素的条：'）......

这显然不是目标。所以我选择将这个值除以 1k。这样，条形图更适合屏幕。

如何在 MySql 查询中实现这一点？

查询的回显代码是这样的：

```
if(isset($_POST['submit'])){
$jaar = $_POST['year'];
echo "<CENTER><h1>".$_POST['year']."</h1></CENTER>";
$result2 = mysql_query("SELECT week, SUM(numbers), SUM(orders) FROM productie WHERE year =" . $year . " GROUP BY week"); 
while($row=mysql_fetch_array($result2) or die(mysql_error())){
    echo "<div class='BarTable'>
<table>
    <tr>
        <td><div class='BarLabel''>".$row['week']."</div></td>
        <td class='BarFull'>
            <img src='images/bargraph/month_bar.png' height='12' alt='320' width=".$row['SUM(numbers)']." />
            <p>".$row['SUM(numbers)']."</p>
        </td>
    </tr>
</table> 
```

此 while 循环遍历数据库，并为在数据库中找到的每个新周创建一个新柱。通过这种方式，我的结果是一个很好的水平条形图，所有周（带有相应的 $numbers）在彼此之下。

我仍然面临的唯一问题（如前所述），是酒吧太宽了。现在我想减小大小，但仍保留输入的值（因为 $numbers 的值显示在栏后面）。

如何将此值除以 1000？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:12:53.353

无需提及您应该将[PDO](http://php.net/pdo)或[mysqli](http://php.net/mysqli)用于新项目，我认为您正在寻找的是：

```
SELECT week, ROUND(SUM(numbers)/1000) as thousandths, SUM(orders) ... 
```

然后在你的数组中访问它`$row['thousandths']`

# python - UDP python 到 c - 打包二进制数据 - struct.pack(' 客户端（蟒蛇）： theta = math.sin(23/3) / 300 y = math.cos(23/11) / 20 data=struct.pack(' <ff',theta,y) 0="" 20="" 300="" 1021="" #="" pack="" with="" two="" float="" s.sendto(data,="" (ip,="" 50000))="" 服="" 问问题="" 2013-02-06t21:04:51.647="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 客户端（蟒蛇）：="" theta="math.sin(23/3)" y="math.cos(23/11)" data="struct.pack('<ff',theta,y)" 服务器（蟒蛇）：="" daten,="" addr="s.recvfrom(1024)" d="struct.unpack('<ff',daten)" print="" ("[%s]="" %s"="" %="" (d[0],d[1]))="" --="">有效 我怎样才能使一个c文件作为客户端？？？这在 c (data=struct.pack(' 客户（三）： ?? 用 Skype 插件更改 CSS 中的电话号码样式 我们的网站顶部有一个电话号码，客户当然可以给我们打电话。我有 Skype 插件，它很方便，而且我注意到其他用户也有它。但它完全抛弃了设计。我注意到网页的 html 用 css 样式更改。有没有一种标准方法可以改变 Skype 电话号码的外观？ 更新：电话号码已更改，span并在其周围添加了此标签： 然后有很多span标签，当您将鼠标悬停在电话号码上时，这是 Skype 菜单（最初是隐藏的）。我可以使用此类覆盖样式，但我想确保以正确的方式执行此操作，以便它适用于不同（较新）版本的 Skype 和所有浏览器（Skype 在其他系统中的工作方式可能不同？）。没有官方的处理方法吗？ pythoncudppackunpack 4 2 回答 2 This answer is useful 0 这应该相当于 struct { float d[2]; }; 在 C 中（假设一个 little-endian 主机）。 于 2013-02-06T21:06:58.953 回答 This answer is useful 0 我得到了解决方案： float value[2]; value[0]=1.22; value[1]=-2.22; ... sendto(s,value,sizeof(value),....) 谢谢 于 2013-02-08T11:17:44.503 回答 Related 0 javascript - wordpress 菜单移动放置问题 1 json - 使用保留词作为对象 2 python - 在网页上显示连续的整数流 3 ruby - 总结字典值的Ruby方式 0 android - Android 注释和 OnClickListener 的继承问题 0 matlab - 在 Matlab 中处理 3-D 散点图的过度绘图和缺失数据 1 c - 特定的 C 移位操作。看看并告诉我它是关于什么的 1 node.js - Socket.io、安全和多人游戏 2 c# - 将图像或文件上传到本地服务器中的文件夹 1 apache-flex - Flex mx:Tree - 没有 itemRendererFunction ？如何为树中的项目设置不同的 itemrenderer？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</ff',theta,y)>

> ID：14738766
> 
> 赞同：0
> 
> 时间：
> 
> 标签：python, c, udp, pack, unpack

客户端（蟒蛇）：

```
theta = math.sin(23/3) / 300
y = math.cos(23/11) / 20
data=struct.pack('<ff',theta,y) # pack with two float
s.sendto(data, (ip, 50000)) 
```

服务器（蟒蛇）：

```
 daten, addr = s.recvfrom(1024) #
 d=struct.unpack('<ff',daten)
 print ("[%s] %s" % (d[0],d[1])) 
```

--> 有效

我怎样才能使一个c文件作为客户端？？？这在 c (data=struct.pack('

客户（三）：

```
 ?? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:06:58.953

这应该相当于

```
struct {
  float d[2];
}; 
```

在 C 中（假设一个 little-endian 主机）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:17:44.503

我得到了解决方案：

```
float value[2];
value[0]=1.22;
value[1]=-2.22;
...
sendto(s,value,sizeof(value),....) 
```

谢谢

# css - 用 Skype 插件更改 CSS 中的电话号码样式

> ID：14738767
> 
> 赞同：3
> 
> 时间：2013-02-06T21:04:53.003
> 
> 标签：css, skype

我们的网站顶部有一个电话号码，客户当然可以给我们打电话。我有 Skype 插件，它很方便，而且我注意到其他用户也有它。但它完全抛弃了设计。我注意到网页的 html 用 css 样式更改。有没有一种标准方法可以改变 Skype 电话号码的外观？

***更新***：电话号码已更改，`span`并在其周围添加了此标签：

```
<span class="skype_pnh_print_container_1359399953"> 
```

然后有很多`span`标签，当您将鼠标悬停在电话号码上时，这是 Skype 菜单（最初是隐藏的）。我可以使用此类覆盖样式，但我想确保以正确的方式执行此操作，以便它适用于不同（较新）版本的 Skype 和所有浏览器（Skype 在其他系统中的工作方式可能不同？）。没有官方的处理方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T20:11:07.237

以下是我为 Skype 链接设置样式的方式：

```
a[href^="skype:"] {
  color: white;
} 
```

就我个人而言，我没有看到任何额外的标记，比如额外的 Skype 跨度标签，所以上面的 CSS 代码应该适用于任何 Skype 呼叫链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:18:13.587

```
body span.skype_pnh_container { 
    /* "body" is not really necessary */
    /* here, but it increases CSS */
    /* specificity – just in case ... */

    display: none !important; 
    visibility: hidden !important; 
}

body span[class^="skype_pnh_container"] { 
    /* override the 'skype' styling */
    color: red!important;
    background-color: green!important;
}

body span[class^="skype_pnh_print_container"] {
    display: inline !important;
} 
```

从网上复制粘贴

此外，根据[http://forum.skype.com/index.php?showtopic=78380](http://forum.skype.com/index.php?showtopic=78380)您可以使用以下 META 标签来防止它：

```
<meta name="SKYPE_TOOLBAR" content="SKYPE_TOOLBAR_PARSER_COMPATIBLE" /> 
```

继续

# php - 如何有条件地覆盖 TWIG 布局块？

> ID：14738772
> 
> 赞同：26
> 
> 时间：2013-02-06T21:05:06.080
> 
> 标签：php, templates, symfony, twig

首先，让我从我尝试使用的代码开始：

```
{% if modal == true %}
    {% block header %}{% endblock %}
    {% block footer %}{% endblock %}
{% endif %} 
```

我想要完成的是仅当名为 modal 的变量为真时才显示我的页眉和页脚块。我在 if 语句下面也有这个：

```
{% block content %}
    {{ dump(modal) }}
{% endblock %} 
```

这里发生的情况是，无论 modal 的值是否为真，我对清空页眉和页脚块的覆盖总是运行。因此，我使用作为 false 传入的 modal 运行它，结果是页眉和页脚仍然不显示。dump 命令的输出准确地显示真或假，但条件似乎总是在 if 语句中评估为真。

可以不将块包装在条件语句中，还是我需要做一些额外的事情才能完成这项工作？

谢谢你的尽心帮助。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-02-07T00:50:07.537

定义

```
{% block footer %}Some standard content{% endblock %} 
```

在父树枝模板中。然后在要决定是否显示页脚内容的模板中可以执行以下操作：

```
{% block footer %}
  {% if not modal == true %}
    {{ parent() }}
  {% endif %}
{% endblock %} 
```

如果模式为真 - 页脚将为空，否则 - 在页脚中将打印“一些标准内容”

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-02-06T21:26:32.190

块不关心它周围的任何逻辑，如[文档](http://twig.sensiolabs.org/doc/tags/extends.html#how-blocks-work)中所述：

> 块提供了一种方法来更改模板的某个部分的呈现方式，但它不会以任何方式干扰它周围的逻辑。

您应该将该逻辑放在块内部，而不是外部，正如您在该文章的最后一个示例中看到的那样。

# asp.net - .hgignore 网站刷新文件

> ID：14738773
> 
> 赞同：0
> 
> 时间：2013-02-06T21:05:08.113
> 
> 标签：asp.net, mercurial, hgignore

我的 ASP.NET 网站引用了由于驻留在`...\bin\`项目目录中而被排除的刷新文件。

我可以在我的 .hgignore 文件中添加什么以确保`...\bin\*.refresh`不排除这些文件？

注意：我知道我可以使用`hg add ...\bin\my.dll.refresh`每个引用并继续使用我的`.hgignore`，但我想避免手动添加特定文件类型，因为这容易出错且容易忘记。

```
# use glob syntax
syntax: glob

# Ignore Visual Studio 2008 files
src/**.obj
src/**.exe
src/**.pdb
src/**.user
src/**.aps
src/**.pch
src/**.vspscc
src/**_i.c
src/**_p.c
src/**.ncb
src/**.suo
src/**.tlb
src/**.tlh
src/**.bak
src/**.cache
src/**.ilk
src/**.log
src/**.lib
src/**.sbr
src/**.scc
src/***/[Bb]in      <---- Problem child
src/***/[Dd]ebug*/
src/***/obj/*
src/***/[Rr]elease*/
src/*_ReSharper*/
src/*[Tt]est[Rr]esult*
src/*[Bb]uild[Ll]og.*
src/*.[Pp]ublish.xml
src/***/PrecompiledWeb/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T03:48:46.073

对于“除某些名称之外的所有名称”，您必须使用：

*   正则表达式模式
*   在正则表达式“所有文件”中添加负前瞻（得到“除此子集之外的所有文件”*作为*结果）

`syntax: regexp`

`bin/(?!.*\.refresh$).+`

在任何情况下，检查和调试这个表达式，使用带有模式`bin\*.*refresh*`和`hg status`命令的文件名

# javascript - JQuery - 将页面加载到 div - 匿名函数

> ID：14738777
> 
> 赞同：0
> 
> 时间：2013-02-06T21:05:19.550
> 
> 标签：javascript, jquery, html, dojo, anonymous-function

当用户按下链接时，我试图将页面加载到 div 中。但是在开发控制台（Chrome）中，我收到以下错误：

```
Uncaught TypeError: undefined is not a function
(anonymous function) 
```

我的 HTML：

```
<!DOCTYPE html> 
<html lang="en"> 
  <head> 
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="CSS/common.css" />
    <script src="//ajax.googleapis.com/ajax/libs/dojo/1.8.2/dojo/dojo.js" data-dojo-config="async:true, parseOnLoad:true"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="JS/common.js"></script>
    <script src="JS/DyContent.js"></script>
    <title></title>
  </head>
  <body>
    <div id="bannerColor"></div>
    <div id="imgNav">
      <img id="banner" src="Images/logoLast.jpg"/> 
      <ul id="nav">
        <li class="current"><a "View/index.php">Home</a></li>
        <li><a href="#About">About Us</a></li>
        <li><a href="#Login">Login/Register</a>
          <ul>
            <li><a href="#Add">Add/Remove Car</a></li>
            <li><a href="#Search">Serach Invoices</a></li>
            <li><a href="#Book">Book Service</a></li>
          </ul>
        </li>
        <li><a href="#Gallery">Gallery</a></li>
        <li><a href="#Contact" id="Contact">Contact Us</a></li>
      </ul>
    </div>
    <div id="centerPane" data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'center'"></div>
  </body>
</html> 
```

我的 JQuery 文件：

```
$(document).ready(function () {
  $('#Contact').click(function () {
    $('#centerPane').load('External/map.php');
  });
}); 
```

和我试图加载的页面（map.php）：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="/CSS/common.css" />
    <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script type="text/javascript" src="/JS/location.js"></script>
    <title></title>
  </head>
  <body>
    <header></header>
    <div id="mapContainer"></div>
    <div id="writtenDir"></div>
   <footer></footer>
  </body>
</html> 
```

是什么导致错误并且不允许填充 div？

编辑：

```
<link rel="stylesheet" type="text/css" href="http://scmweb.infj.ulst.ac.uk/~B00518833/DNA/View/CSS/common.css" />
<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script type="text/javascript" src="http://scmweb.infj.ulst.ac.uk/~B00518833/DNA/View/JS/location.js"></script>
<div id="mapContainer"></div>
<div id="writtenDir"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:34:27.177

将我的所有评论合并为一个答案：

这可能是因为您还有其他 javascript 库。在命名空间冲突的情况下，通常会抛出“未定义不是函数”错误。首先验证是否调用了 onclick 处理程序 - 这将验证 jquery 是否正常工作。

如果它被调用，请在 load() 函数调用中关联一个回调函数。验证是否收到数据。或者，在 firebug 中检查网络调用。

如果这也可以正常工作，则将 CSS 链接作为主页本身的一部分。至于脚本，将它们链接到主文件本身。如果这是不可能的，您必须自己评估作为响应的一部分存在的脚本。请参阅[如何将 Jquery 响应（带有脚本标签的 HTML 页面）加载到 DOM 中](https://stackoverflow.com/questions/10234014/how-to-load-the-jquery-responsehtml-page-with-script-tags-into-the-dom)（或）使用 jquery.getScript() 来评估脚本。尝试先加载基本的 HTML 内容，然后引入交互式元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:15:02.860

我会尝试的第一件事是编辑您的 map.js，使其不包含完整的 html 页面，而只是您需要的内容：

```
<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script type="text/javascript" src="/JS/location.js"></script>

<header></header>
<div id="mapContainer"></div>
<div id="writtenDir"></div>
<footer></footer> 
```

如果你像你一样加载你的文件，你最终会在你的文档中得到类似的东西：

```
<!DOCTYPE html> 
<html lang="en"> 
    <head> 
        [....]
        <title></title>
    </head>
    <body>
        <div id="centerPane" data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'center'">
            <!DOCTYPE html> 
            <html lang="en"> 
               <head>[...]</head>
               <body>[...]</body>
            </html>
        </div>
    </body>
</html> 
```

这显然不是有效的 html ，可能会导致一些脚本错误......

## 编辑

正如 Colin 所指出的，您已经尝试删除额外的 doctype 和 html（我没有阅读所有 22 条评论），但是您遇到了一个完全不同的错误：

```
@Badaboooooom I then get the following error. Uncaught TypeError: Cannot read property 'offsetWidth' of null – Colin747 58 mins ago 
```

Wich 可能是一个完全不同的问题。其他代码已执行。

我会首先删除 doctypes 和 map.js 的所有脚本，然后在添加脚本功能时一一调试。

# c# - 在 WPF 窗口上使用 DragMove 将不允许我将窗口移动到负 Top 值

> ID：14738783
> 
> 赞同：0
> 
> 时间：2013-02-06T21:05:47.167
> 
> 标签：c#, wpf

我有一个 WPF 窗口，我正在使用 DragMove 拖动窗口。当我将它拖离屏幕顶部时，它会重新回到 0 顶部值。有没有办法以编程方式禁用它？

# java - Java 对象在 Android 的内存中是如何布局的？

> ID：14738786
> 
> 赞同：22
> 
> 时间：2013-02-06T21:05:52.243
> 
> 标签：java, android, jol

我对 HotSpot 中堆上的对象布局相当熟悉，但对 Android 来说并不熟悉。

例如，在 32 位 HotSpot JVM 中，堆上的一个对象被实现为一个 8 字节的标头，然后是对象的字段（一个字节用于`boolean`，四个字节用于引用，以及其他所有内容）以某种特定的顺序（对超类中的字段有一些特殊规则），并填充为 8 个字节的倍数。

我已经进行了一些研究，但找不到任何特定于 Android 的信息。

（我有兴趣优化一些极其广泛使用的数据结构，以最大限度地减少 Android 上的内存消耗。）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-08T22:18:00.063

`dalvik/vm/oo/Object.h`是你的朋友吗？的评论`struct Object`说：

> ```
> /*
>  * There are three types of objects:
>  *  Class objects - an instance of java.lang.Class
>  *  Array objects - an object created with a "new array" instruction
>  *  Data objects - an object that is neither of the above
>  *
>  * We also define String objects.  At present they're equivalent to
>  * DataObject, but that may change.  (Either way, they make some of the
>  * code more obvious.)
>  *
>  * All objects have an Object header followed by type-specific data.
>  */ 
> ```

`java.lang.Class`对象是特殊的；`ClassObject`它们的布局由`Object.h`. 数组对象很简单：

```
struct ArrayObject : Object {
    /* number of elements; immutable after init */
    u4              length;

    /*
     * Array contents; actual size is (length * sizeof(type)).  This is
     * declared as u8 so that the compiler inserts any necessary padding
     * (e.g. for EABI); the actual allocation may be smaller than 8 bytes.
     */
    u8              contents[1];
}; 
```

对于数组，宽度在`vm/oo/Array.cpp`. 布尔值的宽度为 1，对象的`sizeof(Object*)`长度为 4（通常为 4），所有其他基本类型都有其预期的（打包的）长度。

数据对象非常简单：

```
/*
 * Data objects have an Object header followed by their instance data.
 */
struct DataObject : Object {
    /* variable #of u4 slots; u8 uses 2 slots */
    u4              instanceData[1];
}; 
```

a（所有非 Class 类实例）的布局`DataObject`由`computeFieldOffsets`in控制`vm/oo/Class.cpp`。根据那里的评论：

```
/*
 * Assign instance fields to u4 slots.
 *
 * The top portion of the instance field area is occupied by the superclass
 * fields, the bottom by the fields for this class.
 *
 * "long" and "double" fields occupy two adjacent slots.  On some
 * architectures, 64-bit quantities must be 64-bit aligned, so we need to
 * arrange fields (or introduce padding) to ensure this.  We assume the
 * fields of the topmost superclass (i.e. Object) are 64-bit aligned, so
 * we can just ensure that the offset is "even".  To avoid wasting space,
 * we want to move non-reference 32-bit fields into gaps rather than
 * creating pad words.
 *
 * In the worst case we will waste 4 bytes, but because objects are
 * allocated on >= 64-bit boundaries, those bytes may well be wasted anyway
 * (assuming this is the most-derived class).
 *
 * Pad words are not represented in the field table, so the field table
 * itself does not change size.
 *
 * The number of field slots determines the size of the object, so we
 * set that here too.
 *
 * This function feels a little more complicated than I'd like, but it
 * has the property of moving the smallest possible set of fields, which
 * should reduce the time required to load a class.
 *
 * NOTE: reference fields *must* come first, or precacheReferenceOffsets()
 * will break.
 */ 
```

因此，超类字段首先出现（像往常一样），然后是引用类型字段，然后是单个 32 位字段（如果可用，并且如果需要填充，因为有奇数个 32 位引用字段），然后是 64位字段。随后是常规的 32 位字段。请注意，所有字段都是 32 位或 64 位（填充较短的原语）。特别是，此时，VM 不会使用少于 4 个字节来存储 byte/char/short/boolean 字段，尽管理论上它当然可以支持这一点。

请注意，所有这些都是基于在提交时`43241340`（2013 年 2 月 6 日）阅读 Dalvik 源代码。由于 VM 的这一方面似乎没有公开记录，因此您不应依赖此作为对 VM 对象布局的稳定描述：它可能会随着时间而改变。

# c# - 从 C 移植到 C# 时是否需要 __W64？

> ID：14738789
> 
> 赞同：0
> 
> 时间：2013-02-06T21:06:03.620
> 
> 标签：c#, c, porting

从 C 移植到 C# 时是否需要将 __W64 放入 C# 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:57:06.000

是`__w64`，小写的 w，MSDN 页面[在这里](http://msdn.microsoft.com/en-us/library/s04b5w00%28v=VS.71%29.aspx)。它旨在帮助诊断代码从 32 位模式重定向到 64 位模式时出现的问题，诊断由 /Wp64 编译选项生成。它自 VS2008 以来已被弃用。

C# 中没有等价物，主要是因为它是一种可以即时转换为 32 位或 64 位机器代码的语言。所以不，不要复制那个。但是请注意您*如何*翻译代码，原始程序员出于某种原因提出了警告标志。通常它涉及将指针转换为 int，而不是那种容易转换为 C# 的代码。

# r - 分组熔化 R 表

> ID：14738792
> 
> 赞同：0
> 
> 时间：2013-02-06T21:06:15.627
> 
> 标签：r

我正在尝试使用融化功能重塑下表

```
structure(list(a = c(0.153705582462314, 0.0486852891805727, 0.0443466683559926, 
0.049402643366726, 0.10496252040361, 0.0605314701268217, 0.123066826124396, 
0.10436283816338, 0.123452539416624, 0.0921469079168177, 0.131665907599587, 
0.0927555742098017, 0.228148961056112, 0.130543777324655, 0.0843670900309334, 
0.131948120538527), b = c(0.158938848699283, 0.0487570327200071, 
0.0454810210056237, 0.0510635787328623, 0.103120937885508, 0.0639093015144946, 
0.111187181680815, 0.0978797635763352, 0.0792834772158317, 0.0582100024292881, 
0.0860846940492594, 0.0620370376768188, 0.11814043806398, 0.0825043302248793, 
0.0615953756935117, 0.0711048468042418), c = c(0.148449985263957, 
0.0514334902734327, 0.0448107469650824, 0.0553431826494535, 0.11011576290828, 
0.0596050964023732, 0.109924244560051, 0.100309207109092, 0.0772350806188979, 
0.0567484442878015, 0.0943868769266179, 0.0642831549581465, 0.117850661875511, 
0.0868600001807722, 0.0619469756159616, 0.0745909201443937), 
    d = c(0.153576142965318, 0.0440065816952808, 0.0383730598042165, 
    0.0466911489805908, 0.0883448739785253, 0.052233465825278, 
    0.0782617872165657, 0.0740854821951614, 0.0704324151657985, 
    0.051813360749928, 0.0865163379367009, 0.0581975106052581, 
    0.118039038983586, 0.082545661321027, 0.0567767394969306, 
    0.0641904998624335), e = c(0.161975563218496, 0.0457647898614343, 
    0.0394148591712433, 0.0454720734366032, 0.0822881130339494, 
    0.0520786880977144, 0.0772094145035842, 0.0685930881198674, 
    0.0634496037760497, 0.0475349902051384, 0.0730862457567602, 
    0.0539538999707352, 0.0918201356593523, 0.0711086911717703, 
    0.0541541288301524, 0.0575437259907984)), .Names = c("a", 
"b", "c", "d", "e"), class = "data.frame", row.names = c("Naphthalene", 
"Acenaphtylene", "Acenaphthene", "Fluorene", "Phenenthrene", 
"Anthracene", "Fluoranthene", "Pyrene", "Benzo(a)anthracene", 
"Chysene", "Benzo(b)fluoranthene", "Benzo(k)fluoranthene", "Benzo(a)pyrene", 
"Indeno(1.2.3-cd)pyrene", "Dibenz(a.h)anthracene", "Benzo(g.h.i)perylene"
)) 
```

我想用 colnames (a,b,c,d,e,f) 创建组

我使用了融化功能

```
dfm <- melt(test,id=c("a","b","c","d","e")) 
```

但是，生成的表与原始表相同。

有人可以指出我正确的方式吗？它应该很简单，但我已经尝试了几种组合但没有结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:09:36.493

你实际上并没有说出你想要什么（如果这不是你想要的，那么改变你的问题）。但我猜您正在尝试跟踪存储为行名的化学名称：

```
test$chemical = rownames(test)

##Pointless melting as nothing really happens
##dfm is equal to test now
dfm = melt(test, id=c("a","b","c","d","e"))
head(dfm)
        a       b       c       d       e variable         value
1 0.15371 0.15894 0.14845 0.15358 0.16198 chemical   Naphthalene
2 0.04869 0.04876 0.05143 0.04401 0.04576 chemical Acenaphtylene
3 0.04435 0.04548 0.04481 0.03837 0.03941 chemical  Acenaphthene
4 0.04940 0.05106 0.05534 0.04669 0.04547 chemical      Fluorene
5 0.10496 0.10312 0.11012 0.08834 0.08229 chemical  Phenenthrene
6 0.06053 0.06391 0.05961 0.05223 0.05208 chemical    Anthracene 
```

或者，您可能会追求：

```
dfm = melt(test, "chemical")
head(dfm)
      chemical variable   value
1   Naphthalene        a 0.15371
2 Acenaphtylene        a 0.04869
3  Acenaphthene        a 0.04435
4      Fluorene        a 0.04940
5  Phenenthrene        a 0.10496
6    Anthracene        a 0.06053 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:03:11.650

如果您所追求的是@csgillespie 发布的第二个选项，您也可以在base R 中以非常简单的方式执行此操作`stack`：

```
mydf2 <- data.frame(chemical = rownames(mydf), stack(mydf))
head(mydf2)
#        chemical     values ind
# 1   Naphthalene 0.15370558   a
# 2 Acenaphtylene 0.04868529   a
# 3  Acenaphthene 0.04434667   a
# 4      Fluorene 0.04940264   a
# 5  Phenenthrene 0.10496252   a
# 6    Anthracene 0.06053147   a 
```

# mysql - RMySQL、dbWriteTable 和包含换行符的文本字段

> ID：14738796
> 
> 赞同：1
> 
> 时间：2013-02-06T21:06:28.817
> 
> 标签：mysql, r, text, rmysql

我有一个 R 例程，需要将第三方的文本写入 MySQL 数据库。该文本通常包含换行符。

很遗憾，

```
foobar <- as.data.frame(a=1, b='\n')
dbWriteTable(MySQL(), foobar, 'test') 
```

创建一个包含*两条*记录的表；'\n' 生成记录中断和空记录。

RMySQL 有什么特别之处吗？这是一个众所周知的问题吗？看了很多遍，没看到有人讨论。有没有使用不同连接器的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-21T16:30:05.000

```
con <- dbConnect(MySQL(), user='user', password='password')

foobar <- as.data.frame(a=1, b='\n')
foobar$b <- dbEscapeStrings(con, foobar$b)
dbWriteTable(con, foobar, 'test') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T21:43:48.843

事实证明，这实际上很容易解决。

DBI 接口中有一个名为 dbEscapeStrings 的函数。它将字符串转换为一种形式，在这种形式中它们将以数据库和区域设置敏感的方式正确存储。如果在将字符串通过间隙之前以这种方式转换字符串，那么它们会正确存储在表中。

# python - 如何在python中将整数天增加5天

> ID：14738798
> 
> 赞同：2
> 
> 时间：2013-02-06T21:06:38.253
> 
> 标签：python, linux, date

对python非常陌生，请原谅菜鸟问题：

我有一个代表日期的数字，例如：

```
date = 20121228 
```

（代表2012年12月28日）

如何在 python 中将该日期增加 5 天，所以我最终得到一个新的（正确的）数字，代表日期

```
date = 20130102 
```

我不想要：

```
date = 20121233 
```

更新：当我尝试使用时`datetime.strptime`，出现此错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in ?
AttributeError: type object 'datetime.datetime' has no attribute 'strptime' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T21:14:08.650

试试这个：

```
date = 20121228
from datetime import datetime, timedelta
dt = datetime.strptime(str(date), "%Y%m%d").date() + timedelta(days=5)
print datetime.strftime(dt, "%Y%m%d") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:14:45.867

将其解析为一个`datetime.date()`对象，添加 5 天，然后重新格式化回您的号码：

```
from datetime import datetime, timedelta

dt = datetime.strptime(str(date), '%Y%m%d').date()
dt += timedelta(days=5)
date = int(dt.strftime('%Y%m%d')) 
```

示范：

```
>>> from datetime import datetime, timedelta
>>> date = 20121228
>>> dt = datetime.strptime(str(date), '%Y%m%d').date()
>>> dt += timedelta(days=5)
>>> int(dt.strftime('%Y%m%d'))
20130102 
```

对于 Python 2.5 之前的 Python 版本，您需要使用以下`time.strptime()`版本：

```
import time
from datetime import datetime, timedelta
dt = datetime(*(time.strptime(str(date), '%Y%m%d')[:6]))
dt += timedelta(days=5)
date = int(dt.strftime('%Y%m%d')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T21:14:32.763

您需要先将日期转换为字符串。然后使用`timedelta`对象将天数添加到`datetime`对象中。

```
from datetime import datetime, timedelta

d = datetime.strptime(str(20121228), "%Y%m%d")
print (d + timedelta(days=5)).strftime("%Y%m%d") 
```

# angularjs - angularjs 资源 - 无效的标签或选项

> ID：14738799
> 
> 赞同：0
> 
> 时间：2013-02-06T21:06:43.040
> 
> 标签：angularjs

[我的问题与这个](https://stackoverflow.com/questions/2816653/invalid-label-error-with-json-request/2816696#2816696)问题相似但不一样。

这是我的[小提琴](http://jsfiddle.net/Vbahole22/Wybc2/)

我正在使用公共资源。我不认为它是jsonp。（他们使用的标志是 pjson，我认为对他们来说，这意味着漂亮的 json）。如果我有 JSONP 的方法，它会调用并返回，但是我得到一个无效的标签错误。如果我将方法设置为 GET，我会在 firebug 中得到 OPTIONS 错误（我通常与跨域违规相关联）。

奇怪的是，我的应用程序调用其他外部资源没有问题 - 所以我不确定它是如何完成的并且不能这样做。如果我无法控制这个外部资源，我是 SOL 吗？

```
 $scope.serviceDesc = layerRes.get(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:40:37.837

看起来您可以通过在使用[$http 服务](http://docs.angularjs.org/api/ng.%24http)`callback=JSON_CALLBACK`时在 url 参数中指定 a 来对您正在使用的此服务进行 JSONP 调用，或者在您的情况下为[$resource 服务](http://docs.angularjs.org/api/ngResource.%24resource)

看看我写的这个例子：[http ://plnkr.co/edit/7EE85Mr8bZBUroQTp5A9?p=preview](http://plnkr.co/edit/7EE85Mr8bZBUroQTp5A9?p=preview)

```
$http.jsonp('http://services.arcgisonline.com/ArcGIS/rest/services/World_Physical_Map/MapServer/0?f=json&callback=JSON_CALLBACK')
  .success(function(data) {
    console.log('The data from their server:');
    console.log(data);
    $scope.worldPhysicalMap = data;
  }); 
```

将其转换为使用 $resource 应该没有太大不同。

# wpf - WPF 矩形与边框：哪个性能更好？

> ID：14738800
> 
> 赞同：8
> 
> 时间：2013-02-06T21:06:47.240
> 
> 标签：wpf, wpf-controls

有时，[Border](http://msdn.microsoft.com/en-us/library/system.windows.controls.border%28v=vs.100%29.aspx)控件或[Rectangle](http://msdn.microsoft.com/en-us/library/system.windows.shapes.rectangle.aspx)控件都可以满足我的需求。一个例子是，当我正在实现一个 ControlTemplate 并且我已经在应用分层技术（即在网格中堆叠控件）时，我不需要将不同的 RadiusX 或 RadiusY 应用于角落。

然而，在设计这样的 ControlTemplates 时，有时我最终会使用*几个*这样的边框或矩形层。因此，我意识到我可能应该认识到哪个控件对应用程序的性能影响最小。我看到它们的继承层次结构在 FrameworkElement 之后出现了分歧。而且我还注意到 Border 是一个装饰器控件（我使用过装饰器，但我不确定它们相对于其他控件的性能如何）。有人可以阐明

1）我们如何能够基于特定的继承层次对控件的性能影响得出一些一般性结论？

2) 装饰器，例如 Border，相对于其他控件的表现如何？

3）特别是关于边框和矩形，哪个表现更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-14T02:07:21.723

根据我的经验，WPF 边框有点轻量级，但更重要的是 - 它们代表了一种不同的需求，尽管它们通常在屏幕上呈现相同的效果。如果我正在撰写包含矩形作为其一部分的东西，那么矩形通常是合适的。如果我想在屏幕上强调某些东西，或者表明一个对象有一些不同的状态——那么我将使用边框。我经常将该边框的颜色、粗细或可见性绑定到模型的 state 属性（或适用于您的情况的任何内容），但本质区别在于边框不是对象的一部分。这是一种使该对象脱颖而出或可见的方法。

或者，如果它是一些已经组成的东西，比如一个文本框，我在它周围添加了一些颜色——这通常是一个边框。

通过牢记这一区别，它可以帮助您的 XAML 树更适合您，并为您提供以后更易于维护的代码。

# find - 需要在 Debian 中删除带空格的文件

> ID：14738808
> 
> 赞同：0
> 
> 时间：2013-02-06T21:07:21.233
> 
> 标签：find, debian, filenames, spaces

我需要在某个文件夹中查找并删除带有空格的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:16:24.917

```
$ ls -l
total 16
-rw-r--r--  1 smw  staff  10 Feb  6 16:10 Foo Bar
-rw-r--r--  1 smw  staff  11 Feb  6 16:10 foobar

$ ls -l *\ *
-rw-r--r--  1 smw  staff  10 Feb  6 16:10 Foo Bar

$ rm -i *\ *
remove Foo Bar? y

$ ls -l
total 16
-rw-r--r--  1 smw  staff  11 Feb  6 16:10 foobar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:21:42.803

在处理空格时，你必须处理 bash 的细节......

首先，您需要迭代文件，以一种无论空格如何都能正确地为您提供文件的方式。看看[这个问题](https://stackoverflow.com/questions/11054129/how-to-prevent-for-loops-from-parsing-spaces)。我赞成这个：

```
find ... | while read line ; do command "$line" ; done 
```

然后就是使用类似的东西`sed`来改变`$line`你需要的任何东西（比如没有空格的相同东西）就在哪里`command "$line"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T21:28:09.883

这就是我删除带有空格的文件的方式

```
pi@raspberrypi ~/Music $ ls -l
-rw-r--r-- 1 pi pi      0 Feb 25 16:05 Sleep Away.mp3

pi@raspberrypi ~/Music $ rm Sleep\ Away.mp3 
```

使用“\”正斜杠转义任何空格

# database - 写入joomla组件中的多个表？

> ID：14738809
> 
> 赞同：11
> 
> 时间：2013-02-06T21:07:22.750
> 
> 标签：database, joomla, components, joomla2.5

我正在尝试创建一个使用多个表的组件（前端）。我发现 1 或 2 个帖子部分回答了这个问题，但没有一个真正回答。对于知道如何做到这一点的人来说，这一点似乎总是简单而明显，但从未真正解释过（或者我错过了正确的帖子）。

在我的组件中，用户在一个视图中输入需要存储在两个表中的数据：标准 Joomla 用户表，即 # __users 一个附加表，用于存储 Joomla 中未包含的数据，即 # __users_complements

我是初学者，所以也许我错了，但我明白joomla的标准功能只能将表格的结果保存在一个表格中。就我而言，我想我必须重写模型中的标准函数：com_component / model / my_model.php。

1）我很困惑，因为我真的不明白必须重写哪个函数：save()？店铺 （）？其他？

2) 假设我重写了 save() 函数，我应该重写所有代码来保存数据（分解数据数组并创建所有更新查询）还是应该创建 2 个标准表对象。

在这种情况下，（2个对象）每次将整个数据数组发送到父函数似乎很奇怪，因为我知道一部分用于表1，另一部分用于表2。我应该能够在don之前拆分不是吗？

3）当我从表单取回数据并调用模型的保存功能时，我应该创建 2 个模型并从我的控制器管理这些模型吗？

你能帮我澄清一下如何在多个表中保存吗？非常感谢带有代码的示例。谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-09T16:38:13.370

我终于成功了。因为我花了很多时间在这上面，发现很多人都在寻找答案，这就是我的做法。

我想您知道如何使用标准 MVC 结构创建组件：

1.  组件入口点
2.  组件控制器
3.  最终组件路由器
4.  组件视图
5.  组件型号
6.  组件控制器

在 model **components\my_component\models\my_model.php**创建你自己的保存函数

```
public function save($data)
{
    // Initialise variables.
    $userId = (!empty($data['id'])) ? $data['id'] : (int)$this->getState('user.id');
    $user = JFactory::getUser();

    $table_one = $this->getTable('TableOne', 'MyComponentTable', array());
    $table_two = $this->getTable('TableTwo', 'MyComponentTable', array());

    // Bind the data.
    if (!$table_one->bind($data))
    {
        $this->setError(JText::sprintf('USERS PROFILE BIND FAILED', $user->getError()));
        return false;
    }

    if (!$table_two->bind($data))
    {
        $this->setError(JText::sprintf('USERS PROFILE BIND FAILED', $user->getError()));
        return false;
    }

    // Store the data.
    if (!$table_one->save($data))
    {
        $this->setError($user->getError());
        return false;
    }

    if (!$table_two->save($data))
    {
        $this->setError($user->getError());
        return false;
    }

    return $user->id;
} 
```

当然需要在save函数中调用getTable函数

```
public function getTable($type = 'TableOne', $prefix = 'MyComponentTable', $config = array())
{
    // call the administrator\components\com_mycomponent\tables\__tablename__.php
    $this->addTablePath(JPATH_COMPONENT_ADMINISTRATOR . '/tables');
    return JTable::getInstance($type, $prefix, $config);
} 
```

它有效！很简单！当然，正如我在问题中所说，整个 $data 被发送到父 save() 函数，以使用 table_one 或 table_two 不需要的数据。它以这种方式与标准的 joomla 结构一起工作（代码中没有 hack 或直接查询）。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T21:23:39.183

可能有些人不同意以下方法稍微破坏 MVC 结构的方式，但我发现它对我来说是最简单的。

通常，您有一个适合其中一张表的模型。在您将数据推送到用户表以及组件中的一个示例中，我会将以下内容添加到组件中表的模型中：

```
public function save($data) {
    if (!parent::save($data)) {
        return false;
    }

    // add necessary code to save to the users table, since there isn't a standard way to do this that I'm aware of

    // sometimes I will grab another model even
    require_once(JPATH_BASE . '/administrator/components/com_users/models/user.php');
    $other_model = $this->getInstance('user', 'UsersModel');
    $other_model->save($data);

    return true;
} 
```

该函数的第一部分应该像往常一样将数据保存到组件表中。但是您可以将您需要的内容添加到组件的其余部分，以使您喜欢的任何事情发生。

我几乎可以保证有一种更好的链接模型的方法（我已经看到 Joomla 平台核心中发生的一些变化将在未来带来更好的方法），但这应该让你现在就开始。

此外，对于提示 3，如果您有时只需要保存一个表，有时需要同时保存两个表，我会在控制器中处理。我发现即使没有加载零件，保存功能也可以非常安全地运行，所以我通常让它运行。

# java - Android HttpClient在执行期间发送第一个数据包

> ID：14738818
> 
> 赞同：0
> 
> 时间：2013-02-06T21:07:39.347
> 
> 标签：java, android, multithreading, apache-commons-httpclient

尝试在我的应用程序中使用 an 时，我遇到了一个相当令人困惑的难题`HttpClient`。看似随意，`HttpClient.execute(HttpRequest)`永远不会回来！好吧...如果我使用`HttpConnectionParams.setConnectionTimeout(HttpParams, int)`它设置超时，它将引发超时异常。否则我的后台线程将永远挂起。

我在阳光下尝试了一切来解决这个问题，但无济于事。在别无选择的情况下，我对该问题进行了数据包捕获，发现了一些令人惊讶的事情！（或者也许并不奇怪，我不是一个真正的网络人）

调用成功：

```
 905 75.286537   192.168.20.163        192.168.20.171        TCP      74     34340 > http [SYN] Seq=0 Win=5840 Len=0 MSS=1460 SACK_PERM=1 TSval=411399 TSecr=0 WS=16
 906 75.286634   192.168.20.171        192.168.20.163        TCP      74     http > 34340 [SYN, ACK] Seq=0 Ack=1 Win=8192 Len=0 MSS=1260 WS=256 SACK_PERM=1 TSval=2129684 TSecr=411399
 919 78.280782   192.168.20.163        192.168.20.171        TCP      74     34340 > http [SYN] Seq=0 Win=5840 Len=0 MSS=1460 SACK_PERM=1 TSval=411783 TSecr=0 WS=16
 920 78.286704   192.168.20.171        192.168.20.163        TCP      74     http > 34340 [SYN, ACK] Seq=0 Ack=1 Win=8192 Len=0 MSS=1260 WS=256 SACK_PERM=1 TSval=2129984 TSecr=411399
 955 84.280710   192.168.20.163        192.168.20.171        TCP      74     34340 > http [SYN] Seq=0 Win=5840 Len=0 MSS=1460 SACK_PERM=1 TSval=412551 TSecr=0 WS=16
 956 84.287958   192.168.20.171        192.168.20.163        TCP      70     http > 34340 [SYN, ACK] Seq=0 Ack=1 Win=65535 Len=0 MSS=1260 SACK_PERM=1 TSval=2130584 TSecr=411399
 957 84.288332   192.168.20.163        192.168.20.171        TCP      66     34340 > http [ACK] Seq=1 Ack=1 Win=93440 Len=0 TSval=412551 TSecr=2130584
 959 84.648812   192.168.20.163        192.168.20.171        TCP      294    [TCP segment of a reassembled PDU]
 960 84.649333   192.168.20.163        192.168.20.171        HTTP     411    POST /xxxxx.Service/xxxxx.asmx/GetReservations HTTP/1.1  (application/json)
 961 84.649368   192.168.20.171        192.168.20.163        TCP      66     http > 34340 [ACK] Seq=1 Ack=574 Win=16630272 Len=0 TSval=2130620 TSecr=412598
 962 84.656518   192.168.20.171        192.168.20.163        TCP      1314   [TCP segment of a reassembled PDU]
 963 84.656560   192.168.20.171        192.168.20.163        HTTP     580    HTTP/1.1 200 OK  (application/json)
 964 84.657192   192.168.20.163        192.168.20.171        TCP      66     34340 > http [ACK] Seq=574 Ack=1249 Win=119808 Len=0 TSval=412599 TSecr=2130621
 965 84.686906   192.168.20.163        192.168.20.171        TCP      66     34340 > http [ACK] Seq=574 Ack=1764 Win=159744 Len=0 TSval=412603 TSecr=2130621
 968 85.187509   192.168.20.163        192.168.20.171        TCP      66     34340 > http [FIN, ACK] Seq=574 Ack=1764 Win=159744 Len=0 TSval=412667 TSecr=2130621
 969 85.187567   192.168.20.171        192.168.20.163        TCP      66     http > 34340 [ACK] Seq=1764 Ack=575 Win=16630272 Len=0 TSval=2130674 TSecr=412667 
```

通话失败：

```
2653 195.296440  192.168.20.163        192.168.20.171        TCP      74     60962 > http [SYN] Seq=0 Win=5840 Len=0 MSS=1460 SACK_PERM=1 TSval=426761 TSecr=0 WS=16
2656 195.296894  192.168.20.171        192.168.20.163        TCP      74     http > 60962 [SYN, ACK] Seq=0 Ack=1 Win=8192 Len=0 MSS=1260 WS=256 SACK_PERM=1 TSval=2141685 TSecr=426761
2658 195.297191  192.168.20.163        192.168.20.171        TCP      66     60962 > http [ACK] Seq=1 Ack=1 Win=5840 Len=0 TSval=426761 TSecr=2141685
2659 195.669276  192.168.20.163        192.168.20.171        TCP      294    [TCP segment of a reassembled PDU]
2660 195.669749  192.168.20.163        192.168.20.171        HTTP     411    POST /xxxxx.Service/xxxxx.asmx/GetReservations HTTP/1.1  (application/json)
2661 195.669783  192.168.20.171        192.168.20.163        TCP      66     http > 60962 [ACK] Seq=1 Ack=574 Win=66048 Len=0 TSval=2141722 TSecr=426809
2662 195.670095  192.168.20.163        192.168.20.171        TCP      60     60962 > http [RST] Seq=574 Win=0 Len=0
2802 215.154316  192.168.20.163        192.168.20.171        TCP      74     48450 > http [SYN] Seq=0 Win=5840 Len=0 MSS=1460 SACK_PERM=1 TSval=429303 TSecr=0 WS=16
2803 215.154397  192.168.20.171        192.168.20.163        TCP      74     http > 48450 [SYN, ACK] Seq=0 Ack=1 Win=8192 Len=0 MSS=1260 WS=256 SACK_PERM=1 TSval=2143671 TSecr=429303
2804 215.154704  192.168.20.163        192.168.20.171        TCP      60     48450 > http [RST] Seq=1 Win=0 Len=0
2807 215.716852  192.168.20.163        192.168.20.171        TCP      66     60962 > http [FIN, ACK] Seq=574 Ack=1 Win=5840 Len=0 TSval=429375 TSecr=2141685
2826 218.152321  192.168.20.163        192.168.20.171        TCP      74     48450 > http [SYN] Seq=0 Win=5840 Len=0 MSS=1460 SACK_PERM=1 TSval=429687 TSecr=0 WS=16
2827 218.152387  192.168.20.171        192.168.20.163        TCP      74     [TCP Previous segment lost] http > 48450 [SYN, ACK] Seq=821395 Ack=1 Win=8192 Len=0 MSS=1260 WS=256 SACK_PERM=1 TSval=2143970 TSecr=429687
2828 218.152669  192.168.20.163        192.168.20.171        TCP      60     48450 > http [RST] Seq=1 Win=0 Len=0
2957 224.152259  192.168.20.163        192.168.20.171        TCP      74     48450 > http [SYN] Seq=0 Win=5840 Len=0 MSS=1460 SACK_PERM=1 TSval=430455 TSecr=0 WS=16
2958 224.152379  192.168.20.171        192.168.20.163        TCP      74     [TCP Previous segment lost] http > 48450 [SYN, ACK] Seq=1936893 Ack=1 Win=8192 Len=0 MSS=1260 WS=256 SACK_PERM=1 TSval=2144570 TSecr=430455
2959 224.152722  192.168.20.163        192.168.20.171        TCP      60     48450 > http [RST] Seq=1 Win=0 Len=0
3032 230.130084  192.168.20.163        192.168.20.171        TCP      639    [TCP Retransmission] 60962 > http [FIN, PSH, ACK] Seq=1 Ack=1 Win=5840 Len=573 TSval=431220 TSecr=2141685 
```

奇怪的是从第 2662 行开始，没有明显的原因，我的设备向服务器发送了一个 RST 数据包？为什么它会那样做？您可以看到在数据包 2802 ~20 秒后发生的连接终止（这是我的超时值）。问题是，当设备发送 RST 数据包时`HttpClient.execute`没有返回，它只是坐在那里！

也许我在配置我的客户端时错过了一些东西？

```
private static DefaultHttpClient newClient()
{
    HttpParams params = new BasicHttpParams();

    ConnManagerParams.setMaxConnectionsPerRoute(params, new ConnPerRouteBean(30));
    ConnManagerParams.setMaxTotalConnections(params, 100);

    HttpProtocolParams.setContentCharset(params, HTTP.DEFAULT_CONTENT_CHARSET);
    HttpProtocolParams.setUseExpectContinue(params, false);
    HttpProtocolParams.setUserAgent(params, "XXXXX XXXXXXXXXX/1.0");
    HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);

    HttpConnectionParams.setConnectionTimeout(params, SOCKET_OPERATION_TIMEOUT);
    HttpConnectionParams.setSoTimeout(params, SOCKET_OPERATION_TIMEOUT);
    HttpConnectionParams.setSocketBufferSize(params, 8192);
    HttpConnectionParams.setStaleCheckingEnabled(params, true);

    SchemeRegistry reg = new SchemeRegistry();
    reg.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
    reg.register(new Scheme("https", SSLSocketFactory.getSocketFactory(), 443));
    ThreadSafeClientConnManager mgr = new ThreadSafeClientConnManager(params, reg);

    DefaultHttpClient client = new DefaultHttpClient(mgr, params);

    return client;
} 
```

或者可能与我如何发出请求有关？

```
private JSONObject performRequest(String url, JSONObject values) 
        throws ClientProtocolException, IOException, JSONException {
    HttpPost httpPost = new HttpPost(url);
    httpPost.setHeader("content-type", "application/json");
    httpPost.setHeader(HTTP.CONN_DIRECTIVE,HTTP.CONN_CLOSE);

    StringEntity requestEntity;
    requestEntity = new StringEntity(values.toString(), HTTP.UTF_8);
    httpPost.setEntity(requestEntity);

    HttpResponse response;
    HttpEntity responseEntity = null;
    String responseString;
    try {
        //this is the line that never returns
        response = _httpClient.execute(httpPost);
        responseEntity = response.getEntity();          
        responseString = EntityUtils.toString(responseEntity);
    } finally {
        if (responseEntity != null)
            responseEntity.consumeContent();
    }
    String d = new JSONObject(responseString).getString("d");
    if (d.length() > 0)
        return new JSONObject(d);
    else
        return new JSONObject();
} 
```

我的应用程序中的所有 Web 服务调用都使用相同`HttpClient`的方法，并且多个线程可以访问此客户端。我假设使用 a`ThreadSafeClientConnManager`会提供我需要的线程安全性，但我想可能还有其他我错过的东西。

任何帮助都非常感谢，我整天都在敲击键盘试图解决这个问题。

*编辑* 我想我应该提到这仅在我使用机器名称作为 url 时发生，而不是在我使用特定 IP 地址时发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:47:50.997

我以前遇到过非常相似的问题。事实证明，我的 POST 正文中有一些服务器不喜欢的数据。在请求通过之前，我使用反复试验来消除我投入到 HttpPost 对象中的内容。

对我来说，我输入了一个糟糕的键值对。

换句话说，我相信您的问题出在您的“价值观”对象中。我的问题是我的 POST 请求中有 JSON 键“_b”。尝试删除 JSON 值，直到服务器停止超时。

另一个提示：为了测试这一点，我创建了一个应用程序，它只是重复发出网络请求，我知道这个应用程序很容易超时，循环直到我得到超时。通常我会在前 100 个请求中超时。如果您也这样做，可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T23:18:58.187

弄清楚了！在我的设备上运行的[配置脚本之一](http://www.daemon-systems.org/man/dhcpcd-run-hooks.8.html) [dhcpcd与我使用的硬件/驱动程序不一致。](http://www.daemon-systems.org/man/dhcpcd.8.html)我修改了脚本，它解决了有问题的 TCP/IP 连接。

# sql-server - 用于 SQL 查询的特定 LINQ 的 SQL Server 表索引

> ID：14738825
> 
> 赞同：0
> 
> 时间：2013-02-06T21:07:51.067
> 
> 标签：sql-server, performance, linq-to-sql

我将首先描述商业案例。如果你只是想问这个问题，请跳过前面的几段......

我正在通过 Web 从 ASP.NET Web API 服务器同步 .NET 移动客户端上的数据。由于客户端的“移动性”，我希望该过程尽可能高效，因此我想实现增量同步，这意味着客户端从指定日期请求新条目，这通常会是最后一个同步日期。

我正在单独处理条目删除，所以为了简单起见，让我们关注新的和修改的条目。

正在同步的表太大而无法容纳单个响应，因此实现了分页。

表中的每个条目都有一个唯一的 ID**列**和一个**LastUpdated**列。在服务器上，我使用以下代码响应请求的页面：

```
var set             = Model.Set<T>().Where(t => String.Compare(t.LastUpdated, fromDate, StringComparison.Ordinal) >= 0).OrderBy(t => t.Id);
var queryResultPage = set.Skip(pageSize * pageNumber).Take(pageSize);

return queryResultPage.ToList(); 
```

Model.Set 是从中检索数据的 DbSet。请忽略我必须使用字符串来表示日期的事实......

我的问题是，什么 SQL Server 表索引会*在这种情况下*产生最佳性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:03:46.010

Pleun 完全正确。我最近在 CRM 2011 平台上为客户做了一个演示。我向他们展示了一个案例，在对 220 万条记录和另外 450 万条记录进行排序后，页面浏览需要大约 30 秒才能加载页面。

使用 SQL Profiler，您可以找到正在运行的查询。将其放入 SQL Management Studio（根据需要对其进行清理以使其成为标准 SQL）然后运行执行计划并查找它建议的索引（尤其是它说缺少的索引）

无论如何，在我给客户的演示中，在我们完成此操作后，查询下降到不到一秒；页面加载时间大约为 4 秒（这仍然很可怜）。

# c# - 实体框架，对两个具有相同布局但表名不同的表使用相同的模型

> ID：14738830
> 
> 赞同：2
> 
> 时间：2013-02-06T21:08:05.327
> 
> 标签：c#, entity-framework, model

我有两张布局相同的桌子 -

```
Report Table
   ID
   ReportCol1
   ReportCol2 
```

在另一个数据库中，我有

```
 Reporting Table
    ID
    ReportCol1
    ReportCol2 
```

我想使用单个实体模型调用`Report`来从这两个表中加载数据。

在我的上下文课程中，我有

```
public DbSet<Report> Report{ get; set; }

protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Configurations.Add(new ReportMap());
} 
```

在我调用第一个数据库报告表时，我得到了预期的结果。

我将连接字符串更改为指向第二个数据库，但无法更改表映射中的表名。

由于我的评论中概述的原因，我不想使用存储过程。

我能做什么，缺少数据库中的表名（这不是一个选项）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:28:03.323

你试过这个流畅的 API`modelBuilder.Entity<Report>().ToTable("Reporting");`吗？您可能需要编写此代码，以便它根据您要连接的数据库有条件地执行此操作。您可能需要让您的配置允许您说“DatabaseA 使用此映射和连接字符串”和“DatabaseB 使用此其他映射和连接字符串”，而不是更改连接字符串，您可以通过某个名称/键指定哪个数据库，您的应用会查找该名称以确定要运行的映射代码。

```
if(dbMappingconfig == DbMapping.A)//some enum you create
{
    modelBuilder.Entity<Report>().ToTable("Reporting");
} 
```

如果您的目标是能够将这些实体传递给 DisplayReport(Report r) 等其他方法，这样您就不必重复代码，那么您可以让 Reporting 和 Report 类都实现 IReport 接口。

EF 还支持继承层次结构，因此您可以让它们从同一个类继承，**但**我有一种强烈的感觉，它**不适**用于跨数据库。

如果 OnModelCreating 没有重新运行，它可能已经被缓存。放在`modelBuilder.CacheForContextType = false;`那里，这样它就不会在将来缓存它，并且要清除当前的缓存，我认为你可以做一个 Clean+Rebuild。这将以每次重建模型而不是重用缓存为代价。你真正想要的是使用缓存直到连接字符串发生变化。反正我不知道手动清除缓存，但可能有办法。您可以自己管理模型构建：

```
DbModelBuilder builder = new DbModelBuilder();
// Setup configurations
DbModel model = builder.Build(connection);
DbCompiledModel compiledModel = model.Compile();
DbContext context = new DbContext(connection, compiledModel); 
```

但这会带来额外的复杂性，因为您需要自己管理缓存。

在搜索这个时，我遇到了这个，看起来他们正在尝试完成相同的事情，并且已经进入同一页面，请参阅有问题的最后部分：**[如何将实体框架模型动态映射到表名](https://stackoverflow.com/questions/3428069/how-to-map-an-entity-framework-model-to-a-table-name-dynamically)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:34:58.253

您是否能够在每个数据库中创建相同的命名视图并映射到该视图而不是变量表名？

我的解决方案中有 2 个具有不同名称的表副本，并通过拥有 2 个上下文和 2 组地图文件（生成的文本模板）来处理它

# java - 使用 JSON API 写入存储桶时出现错误 403“未配置访问”

> ID：14738831
> 
> 赞同：0
> 
> 时间：2013-02-06T21:08:08.553
> 
> 标签：java, google-cloud-storage

我正在尝试使用以下代码使用 REST API 写入云存储：

```
 public static void insertData() {
                try {
                    StorageObject st = new StorageObject();
    //create the media object
                    Media m = new Media();
   String content = "hi! this is a test";
                    m.setData(Base64.encodeBase64String(content.getBytes()));
                    m.setContentType("text/html");
                    st.setMedia(m);
    //this gets me the credential, works for other APIs but not cloud storage
                    Storage storage = RequestBuilder.buildStorage();
                    //Create the insert and execute
                    Insert insert = storage.objects().insert("mybucket", st);
                    insert.execute();
                } catch (IOException e) {
                    log.severe(e.getMessage());
                }
            } 
```

这是我根据 REST API 的 ACL 条目：

```
 "kind": "storage#bucketAccessControls",
 "items": [
  {
   "kind": "storage#bucketAccessControl",
   "id": "gammeprediction/allUsers",
   "selfLink": "https://www.googleapis.com/storage/v1beta1/b/gammeprediction/acl/allUsers",
   "bucket": "mybucket",
   "entity": "allUsers",
   "role": "OWNER"
  }] 
```

这就是我获得证书的方式：

```
private static Credential authorize() {
        GoogleCredential credential = null;
        //load properties
        Properties appProperties = new Properties();
            appProperties.load(RequestBuilder.class
                    .getResourceAsStream("/app.properties"));

        // creates an authorization with the key and service account given
        InputStream is = RequestBuilder.class.getResourceAsStream("/"
                + appProperties.getProperty("app.keyFileName"));
        PrivateKey pk;
        try {
            pk = PrivateKeys.loadFromKeyStore(KeyStore.getInstance("PKCS12"),
                    is, "notasecret", "privatekey", "notasecret");
            credential = new GoogleCredential.Builder()
                    .setTransport(HTTP_TRANSPORT)
                    .setJsonFactory(JSON_FACTORY)
                    .setServiceAccountId(
                            appProperties
                                    .getProperty("app.serviceAccount"))
                    .setServiceAccountPrivateKey(pk)
                    .setServiceAccountScopes(PredictionScopes.PREDICTION,
                            DriveScopes.DRIVE, StorageScopes.DEVSTORAGE_FULL_CONTROL).build();

        return credential;
    } 
```

存储桶上的权限是所有用户的 OWNER，但我仍然收到 403 Forbidden "Access not configured" 错误。什么可能是错的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:56:57.237

一旦 JSON API 普遍可用，这个逻辑就会起作用。

但是，目前 JSON API 处于有限预览阶段。由于未知用户不被视为受限预览版的成员，因此目前无法通过 REST API 进行完全匿名的查询。相反，您必须在连接时至少提供一个列入白名单的 API 密钥。如果您没有提供更多身份信息，您将被视为匿名用户。或者，更进一步，您可以使用 OAuth2 凭据而不是被视为注册用户。有关更多信息，请参阅：[https ://developers.google.com/storage/docs/json_api/](https://developers.google.com/storage/docs/json_api/)

那是一个 GWT RequestBuilder 吗？不幸的是，我并不完全熟悉它的用途。如果有帮助，以下是使用 Google API Java 客户端设置与 API 密钥的连接的示例：[https ://code.google.com/p/google-api-java-client/wiki/OAuth2#Unauthenticated_access](https://code.google.com/p/google-api-java-client/wiki/OAuth2#Unauthenticated_access)

此外，您对 setData() 的调用似乎传递了一个非 base64 字符串，这将失败。

# jquery - 悬停时如何使文本显示？

> ID：14738834
> 
> 赞同：-3
> 
> 时间：2013-02-06T21:08:13.793
> 
> 标签：jquery

我发现这个效果是在 Flash 中完成的。在 JavaScript 中是否有类似的方法来解决这个问题？查看下面的链接并将鼠标悬停在 2013 年。

[http://www.iflymagazine.com/?locale=no_en](http://www.iflymagazine.com/?locale=no_en)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:35:32.883

[这是一个非常基本的例子：](http://jsfiddle.net/3kN7P/)

```
<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>

<div id='2'><span>2</span></div>
<div id='0'><span>0</span></div>
<div id='1'><span>1</span></div>
<div id='3'><span>3</span></div>

div{
    height:100px;
    width:100px;
    color: white;
    background: red;
    display:inline-block;
    text-align:center;
}
span{
    font-size:125px;
    line-height:-10px;
}

$(function () {
    $('div').mouseenter(function () {
        $(this).stop(true).animate({backgroundColor: 'white', color: 'red'}, 500, 'easeInQuint');
    });

    $('div').mouseleave(function () {
        $(this).stop(true).animate({backgroundColor: 'red', color: 'white'}, 500, 'easeInQuint');
    });
}); 
```

它没有你想要的幻灯片效果。为此，我想您将不得不处理多个元素并将它们交换进出。

编辑：我又看看你想要什么，我做了[这个：](http://jsfiddle.net/a4tFB/)

```
.wrapper{
    position:relative;
    display:inline-block;
    width:100px;
    height:100px;
}
.number{
    position:absolute;
    bottom:0px;
    left:0px;
    height:100px;
    width:100px;
    color: white;
    background: red;
    display:inline-block;
    text-align:center;
    z-index:2;
}
.text{
    position:absolute;
    display:inline-block;
    z-index:1;
    top:0px;
    left:0px;
    height:100px;
    width:100px;
    color: black;
    background: gray;
    font-size:8pt;
}
.spnNum{
    font-size:125px;
    line-height:-10px;
}

<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>

<div class='wrapper'>
    <div class='number' id='2'><span class='spnNum'>2</span></div>
    <div class='text' id='t2'>
        <span> Text Goes in here to be displayed when the number is hidden</span>
    </div>
</div>
<div class='wrapper'>
    <div class='number' id='0'><span class='spnNum'>0</span></div>
    <div class='text' id='t0'>
        <span> Text Goes in here to be displayed when the number is hidden</span>
    </div>
</div>
<div class='wrapper'>
    <div class='number' id='1'><span class='spnNum'>1</span></div>
    <div class='text' id='t1'>
        <span> Text Goes in here to be displayed when the number is hidden</span>
    </div>
</div>
<div class='wrapper'>
    <div class='number' id='3'><span class='spnNum'>3</span></div>
    <div class='text' id='t3'>
        <span> Text Goes in here to be displayed when the number is hidden</span>
    </div>
</div>

$(function () {
    $('.number').mouseenter(function(){
        $(this).slideUp(200);
    });

    $('.text').mouseleave(function(){
        $(this).prev().slideDown();
    });

}); 
```

如果您尝试在数字之间移动得太快，这可能会有点麻烦，而且动画越慢，这种情况只会变得更糟。但它确实让你真正接近我认为你想要完成的事情。

# jsf - JSF 重定向不会停止页面呈现

> ID：14738835
> 
> 赞同：0
> 
> 时间：2013-02-06T21:08:14.013
> 
> 标签：jsf

我们以一种非常简单的方式使用 JSF。我们所做的只是实现包含一些 Java 代码的标签。

我已经实现了一个“安全”标签，只要用户没有登录，它就会将 302 重定向发送回登录页面：

```
// make them log in
ctx.getExternalContext().redirect("login.xhtml");
ctx.responseComplete(); 
```

问题是 redirect() 方法不会停止页面的其余部分的呈现。页面下方的标签正在执行。这是一个问题，因为如果未登录的用户让浏览器忽略重定向，他们可能会看到他们不应该看到的东西。

如何让 responseComplete() 做我认为应该做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:42:10.843

在 servlet 过滤器中实现与登录相关的逻辑总是更好，如下所示：

1.  为您要保护的 URL 模式实施过滤器
2.  在过滤器中，检查用户是否已登录（可能只是检查用户会话中是否存在用户名/用户 ID）
3.  如果用户未登录，则将用户重定向到基于 HTML 的登录页面。
4.  如果用户已登录，则让用户访问资源。

有很多方法（可能比这更好）来实现这一点，但这是最基本的一种。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T13:59:36.730

试试看！

```
ctx.getExternalContext().dispatch("login.xhtml");
ctx.responseComplete(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T01:26:51.483

也许您可以使用标志来验证用户是否已登录。
然后，您可以`render=#{managedBean.logged}`在您不想呈现的标签中使用该属性。
这只是一种解决方法......对于您提供的大量信息并不能真正提供太多帮助。

# javascript - Javascript 帮助设置/获取每个输入元素的本地存储数据

> ID：14738836
> 
> 赞同：0
> 
> 时间：2013-02-06T21:08:17.753
> 
> 标签：javascript, html, local-storage

我一直在研究这个，而且它几乎可以工作了。我有一种感觉，循环内的 setInterval 是无法完成或不起作用的。如果没有 setInterval 和最后的 'if' 语句，它会完美地循环遍历元素，并在我将其设置为时为每个元素添加一个 className。如果有人可以建议我哪里出错，这是我的脚本：

```
(function() {
    var localStorageID = document.getElementById('local-storage');
    var inputTags = ['input', 'textarea', 'select', 'button'];

    // Loop through all the input tags on the page
    for(var i = 0; i < inputTags.length; i++) {

        // Create a variable that matches input tags inside our #localStorage
        var localStorageTag = localStorageID.getElementsByTagName(inputTags[i]);

        var formData = {};

        for(var z = 0; z < localStorageTag.length; z++) {
            formData[localStorageTag[z].name] = localStorageTag[z].value;
        }

        localStorage.setItem('formData', formData);

        if(localStorage.getItem('formData')) {
            // Try to achieve something
        }   
    }
})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:09:06.300

您不能将对象存储在 localStorage 中。它们必须是字符串。使用 JSON.stringify() 将对象转换为字符串，然后在从 localStorage 检索时使用 JSON.parse() 字符串。

编辑：例如：

```
localStorage.setItem('formData', JSON.stringify(formData));
var fd= JSON.parse(localStorage.getItem('formData'));

if(fd) {
    // Try to achieve something
} 
```

# c# - 如何在 C# 中制作/设计一个在运行时可以具有不同类型成员的类

> ID：14738837
> 
> 赞同：3
> 
> 时间：2013-02-06T21:08:20.493
> 
> 标签：c#

我有一种情况，我需要一个类，该类需要包含有关在运行时变化的事物的信息，例如：

```
class Info<T>
{
    public T Max { get; set; }
    public T Min { get; set; }
    public T DefaultValue { get; set; }
    public T Step { get; set; }
    // Some other stuff
} 
```

我必须将此类的许多实例存储在字典中，但问题是要使用字典，我必须声明一种类型，例如

```
Dictionary<string, Info<int>> dict = new Dictionary<string, Info<int>>(); 
```

在这种情况下，我无法添加其他类型的信息，例如`Info<double>`. 我想要类似的东西，我在以下情况下删除了通用版本。

```
 {"Price", new Info{Min=100,Max=1000,DefaultValue=200,Step=50}}
 {"Adv", new Info{Min=10.50,Max=500.50,DefaultValue=20.50,Step=1.5}}
 {"Answer", new Info{Min=false,Max=false,DefaultValue=false,Step=false}} 
```

我可以用`Dictionary<string, Object> dict = new Dictionary<string, Object>();`

但是当我拿回 dict 项目时，我不知道那是什么类型，我也需要知道类型，例如`Price`它是 int 而对于 Adv 它是 double ，我如何在运行时知道它？

实际上我想创建一个验证器（我正在使用.Net Compact Framework 3.5/如果它存在则不能使用任何内置系统）例如如果我有一个像下面这样的类..

```
class Demo
{
    public int Price { get; set; }
    public float Adv { get; set; }

    public static bool Validate(Demo d)
    {
        List<string> err = new List<string>();
        // here I have to get Info about the Price
        // from dictionary, it can be any storage
        Info priceInfo = GetPriceInfo("Price");
        if (d.Price < priceInfo.Min)
        {
            d.Price = priceInfo.Min;
            err.Add("price is lower than Min Price");
        }
        if (d.Price > priceInfo.Max)
        {
            d.Price = priceInfo.Max;
            err.Add("price is above than Max Price");
        }
        // need to do similar for all kinds of properties in the class  
    }
} 
```

所以想法是将验证信息存储在一个地方（在字典或其他地方），然后在验证时使用该信息，我还想知道我是否可以以更好的方式设计上述场景？

也许有更好的方法可以做到这一点，请问有什么指导方针吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T21:18:03.703

您可以使用非泛型基类：

```
public abstract class Info {
}

public class Info<T> : Info {
} 
```

现在所有不同的泛型类型都继承自同一个基类型，因此您可以在字典中使用它：

```
Dictionary<string, Info> dict = new Dictionary<string, Info>(); 
```

您可以在基类中定义接口不依赖于泛型类型的属性和方法，并在泛型类中实现它们。这样您就可以在不指定泛型类型的情况下使用它们。

对于需要类型的方法，您需要每种类型的特定代码。您可以使用`is`and`as`运算符来检查类型：

```
Info<int> info = dict[name] as Info<int>;
if (info != null) {
  int max = info.Max;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:14:22.250

您可以从 Microsoft 获取并模仿[IEnumerable](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.aspx)接口并创建一个`.Cast<T>`? `dynamic`但是，除非您想进入（仅限 4.0+）或反射，否则必须有人知道您的类型。两者都是有代价的。也许您需要重新考虑您的设计？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T21:31:42.867

Keith Nicholas 是对的——如果您希望您的字典支持多种类型，您将需要一个接口，但它需要是一个[通用](http://msdn.microsoft.com/en-us/library/kwtft8ak%28v=vs.80%29.aspx)接口。

尝试这样的事情（警告：未经测试的代码）：

```
interface IInfo<T>
{
    T Max { get; set; }
    T Min { get; set; }
    T DefaultValue { get; set; }
    T Step { get; set; }
}

Dictionary<string, IInfo> dict = new Dictionary<string, IInfo>();

class AnswerInfo : IInfo<bool> { }
class PriceInfo : IInfo<int> { }
class AdvInfo : IInfo<double> { }

dict["Answer"] = new AnswerInfo() { Min = false, Max = false, DefaultValue = false, Step = false };
dict["Price"] = new PriceInfo() { Min = 100, Max = 1000, DefaultValue = 200, Step = 50 };
dict["Adv"] = new AdvInfo() { Min = 10.50, Max = 500.50, DefaultValue = 20.50 Step = 1.5 }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T21:50:15.027

使用对象字典（或某些基类），您将有多种选择来获取数据（通常，涉及从要使用的通用基类进行的某种继承，其属性如下所述）。

1.  使用枚举来表示类型，然后你可以有某种开关/案例。（很容易做到，不是很 C#ish。）
2.  使用类似于 VARIANT 的东西。变体是既提供存储的信息又提供存储的值的类型，可以是任何基本类型，如字符串、int、float。[（在 C# 中并不存在，您可以从此处的Variant Type in C#](https://stackoverflow.com/questions/11046622/variant-type-in-c-sharp)的答案中看到。）
3.  您还可以在运行时测试对象的类型以找出您拥有的对象类型，然后根据其类型进行转换并处理其内容。（几种方法..可能必须使用反射，首先看看这里：[获取对象类型并相应地分配值](https://stackoverflow.com/questions/1110375/get-object-type-and-assign-values-accordingly)。）
4.  实际上，您还可以尝试以某种方式抽象您想要对每个对象执行的操作，然后调用该函数。类似于命令模式的东西。（[命令模式：如何将参数传递给命令？](https://stackoverflow.com/questions/104918/command-pattern-how-to-pass-parameters-to-a-command)）

可能还有很多。:)

# python - lambda内的变量范围

> ID：14738844
> 
> 赞同：5
> 
> 时间：2013-02-06T21:08:59.113
> 
> 标签：python, scope

为什么这段代码打印“d，d，d，d”，而不是“a，b，c，d”？如何修改它以打印“a、b、c、d”？

```
cons = []
for i in ['a', 'b', 'c', 'd']: 
    cons.append(lambda: i)  
print ', '.join([fn() for fn in cons]) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T21:18:06.397

奇怪的是，这不是变量*范围*问题，而是 python`for`循环（和 python 变量）语义的问题。

如您所料，`i`在您的 lambda 内部正确地引用`i`了最近封闭范围内的变量。到现在为止还挺好。

但是，您预计这意味着会发生以下情况：

```
for each value in the list ['a', 'b', 'c', 'd']: 
    instantiate a new variable, i, pointing to the current list member
    instantiate a new anonymous function, which returns i
    append this function to cons 
```

实际发生的是这样的：

```
instantiate a new variable i
for each value in the list ['a', 'b', 'c', 'd']: 
    make i refer to the current list member
    instantiate a new anonymous function, which returns i
    append this function to cons 
```

因此，您的代码四次将*相同*的变量附加到列表中 - 到循环退出时，其值为.`i``i``'d'`

请注意，如果 python 函数通过 value 获取并返回其参数/返回值的*值*，您不会注意到这*一点*，因为用) 创建。然而，实际上，python 变量始终是对特定对象的*引用*——因此你的四个副本都引用到循环结束时。`i``append``lambda`*`i``'d'`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T21:18:48.520

当你创建一个闭包时，被你的 lambda 表达式“关闭”的变量（在本例中为`i`）是由名称绑定的，而不是值。因此，无论何时调用 lambda，它们都会使用最后一个值“i”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T22:31:38.343

这是您完成这项工作所需的简单修复：

```
cons = []
for i in ['a', 'b', 'c', 'd']: 
    cons.append(lambda i=i: i)  
print ', '.join([fn() for fn in cons]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T23:53:13.093

'Erics' 作为理解的回答：

```
 cons =[lambda i= i:i for i in ['a', 'b', 'c', 'd']]   
 print ', '.join([fn() for fn in cons]) 
```*

# sql - 查询以显示基于聚合值的附加列

> ID：14738846
> 
> 赞同：0
> 
> 时间：2013-02-06T21:09:28.397
> 
> 标签：sql, postgresql

我一直在考虑这个问题几个小时，但没有运气，所以我认为 SO 上的人可能会提供帮助:)

我有一个表格，其中包含有关商店处理量的数据。下面显示的前三列可以从该表中查询。我要做的是添加第 4 列，该列基本上是关于商店是否已处理 >=150 美元的标志，如果是，将显示相应的日期。这种工作方式是商店超过 150 美元的第一个实例是显示的日期。在第一次达到激活日期之后，后续处理量不计算在内。例如，对于商店 4，只有一个激活日期实例。

```
store_id  sales_volume   date        activated_date
----------------------------------------------------    
2         5              03/14/2012    
2         125            05/21/2012   
2         30             11/01/2012   11/01/2012    
3         100            02/06/2012
3         140            12/22/2012   12/22/2012
4         300            10/15/2012   10/15/2012
4         450            11/25/2012
5         100            12/03/2012 
```

关于如何构建第四列的任何见解？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:49:29.620

解决方案首先计算累积销售额。然后，您只需要累积销售额首次超过 150 美元水平时的激活日期。当添加当前销售额使累计金额超过阈值时，就会发生这种情况。以下`case`表达式处理此问题。

```
select t.store_id, t.sales_volume, t.date,
       (case when 150 > cumesales - t.sales_volume and 150 <= cumesales
             then date
        end) as ActivationDate
from (select t.*,
             sum(sales_volume) over (partition by store_id order by date) as cumesales
      from t
     ) t 
```

如果您有不支持累积总和的旧版 Postgres，您可以使用如下子查询获取累积销售额：

```
(select sum(sales_volume) from t t2 where t2.store_id = t.store_id and t2.date <= t.date) as cumesales 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T23:05:38.317

### 变体 1

您可以`LEFT JOIN`使用一个表格来计算超过每家商店 150 美元限制的第一个日期：

```
SELECT t.*, b.activated_date
FROM   tbl t
LEFT   JOIN (
   SELECT store_id, min(thedate) AS activated_date
   FROM  (
      SELECT store_id, thedate
            ,sum(sales_volume) OVER (PARTITION BY store_id
                                     ORDER BY thedate) AS running_sum
      FROM   tbl
      ) a
   WHERE  running_sum >= 150
   GROUP  BY 1
   ) b ON t.store_id = b.store_id AND t.thedate = b.activated_date
ORDER  BY t.store_id, t.thedate; 
```

第一天的计算必须分两步完成，因为累积运行总和的窗口函数必须在单独的`SELECT`.

### 变体 2

另一个窗口函数而不是`LEFT JOIN`. 五月可能不会更快。用 测试`EXPLAIN ANALYZE`。

```
SELECT *
      ,CASE WHEN running_sum >= 150 AND thedate = first_value(thedate)
               OVER (PARTITION BY store_id, running_sum >= 150 ORDER BY thedate)
       THEN thedate END AS activated_date
FROM  (
   SELECT *
         ,sum(sales_volume)
              OVER (PARTITION BY store_id ORDER BY thedate) AS running_sum
   FROM   tbl
   ) b
ORDER  BY store_id, thedate; 
```

[-> sqlfiddle](http://sqlfiddle.com/#!12/9c507/6)演示两者。

# sphinx - 在 Mac OS X 版本 10.8.2 上安装 sphinx 并配置

> ID：14738850
> 
> 赞同：0
> 
> 时间：2013-02-06T21:09:39.133
> 
> 标签：sphinx

谁能告诉我如何在 mac OS X 版本 10.8.2 上安装 sphinx

现在，我如何检查它是否正确安装或移动？

我在哪里可以找到我安装的文件

尝试运行`./configure`命令时出现错误收到此错误

```
unknown-5c:96:9d:7d:44:c7:sphinx-2.0.1-beta username$ ./configure

checking build environment
--------------------------

checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... config/install-sh -c -d
checking for gawk... no
checking for mawk... no
checking for nawk... no
checking for awk... awk
checking whether make sets $(MAKE)... no
checking whether to enable maintainer-specific portions of Makefiles... no

checking for compiler programs
------------------------------

checking whether to compile debug version... no
checking for gcc... no
checking for cc... no
checking for cl.exe... no
configure: error: in `/Users/username/Downloads/sphinx-2.0.1-beta':
configure: error: no acceptable C compiler found in $PATH
See `config.log' for more details. 
```

如何解决这个问题？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:18:37.783

一定

> 配置：错误：在 $PATH 中找不到可接受的 C 编译器

是不是很清楚……？

[https://www.google.com/search?q=install+c+compiler+mac+os](https://www.google.com/search?q=install+c+compiler+mac+os)

# java - java导入中的名称冲突

> ID：14738854
> 
> 赞同：7
> 
> 时间：2013-02-06T21:10:00.237
> 
> 标签：java, import

除非我们[更改编译器](https://stackoverflow.com/questions/9613392/what-need-to-be-done-to-implement-import-as-in-java#9613822)，否则 Java 会错过`import X as Y`语法，这在像我这样的情况下会很有用：此时，我正在处理一个项目，该项目有多个同名的类，但属于不同的包。

我想要类似的东西

```
import com.very.long.prefix.bar.Foo as BarFoo
import org.other.very.long.prefix.baz.Foo as BazFoo

class X {
    BarFoo a;
    BazFoo b;
    ...
} 
```

相反，我完成了类似的事情

```
class X {
    com.very.long.prefix.bar.Foo a;
    org.other.very.long.prefix.baz.Foo b;
    ...
} 
```

在这里看起来很有害，但在我的具体情况下，我需要使用水平滚动来浏览我的源代码，这会使得已经一团糟的程序变得更糟。

根据您的经验，这种情况下的最佳实践是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T19:47:41.910

我感觉到你的痛苦，无论你使用哪种解决方案，有两个同名的类这一事实已经足够令人困惑了。

有几种~~解决方案~~变通方法：

1.  如果这是您的代码，只需重命名其中一个（或两者）
2.  如果这是库（更有可能）导入更常用的类，请完全限定另一个类，正如 Jeff Olson 建议的那样。
3.  如果可能的话，首先尽量避免让他们在同一个班级。
4.  您可以编写自己的`BarFoo`，除了扩展它们各自的类，从而为它们提供自己的名称`BazFoo`之外什么也不做。`Foo`您甚至可以将它们定义为内部类。例子：

```
private BarFoo extends com.very.long.prefix.bar.Foo{
//nothing, except possibly constructor wrappers
}

private BazFoo extends com.very.long.prefix.bar.Foo{
//nothing, except possibly constructor wrappers
}

class X {
   BarFoo a;
   BazFoo b;
   //...
} 
```

不过也有一些缺点：

*   您必须重新定义构造函数
*   如果您需要将它传递给明确检查其`getClass`.

您可以通过包装 Foo 类而不是扩展它们来解决这些缺点，例如：

```
private BarFoo {
   public com.very.long.prefix.bar.Foo realFoo;
}

private BazFoo extends com.very.long.prefix.bar.Foo{
  public com.very.long.prefix.baz.Foo realFoo;
}

class X {
    BarFoo a;
    BazFoo b;

    //now if you need to pass them
    someMethodThatTakesBazFoo(b.realFoo);
} 
```

选择最简单的解决方案，祝你好运！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T21:13:25.850

最佳实践是重构代码。

两个类不应该具有相同的名称，因为在同一个类中使用它们是正常的，因此为两者选择相同的名称不是明智的选择。所以至少应该重命名其中之一。

或者在同一个类中同时使用它们是不正常的，因为它们属于完全不同的抽象级别（例如数据库访问代码和 UI 代码），并且应该重构代码以使用每个必须使用的类而不是其他地方.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-06T22:27:21.873

在这些情况下，我通常所做的是在我的班级中导入**最**常用的 Foo ，然后完全限定另一个：

```
import com.very.long.prefix.bar.Foo

class X {
    Foo a;
    org.other.very.long.prefix.baz.Foo b;
    ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-20T12:22:39.757

在这里。

随着时间的推移，我实际上开发了一种策略来解决 Java 语言的这种限制。我不知道这是否有一些缺点（到目前为止我从未发现任何缺点），但如果是这样，请在这个问题中发表评论。

这个想法是用**类**而不是包替换完全限定名称的最后一部分，并将实际类定义为静态内部类。

```
class Bar {
    static class Foo { ... }
} 
```

这样我们就有了类似的东西

```
import f.q.n.Bar
import other.f.q.n.Baz

...
Bar.Foo a;
Bar.Foo b; 
```

这实际上是一种非常干净的方式。当然，它仅适用于您控制的类，而不适用于库。

## 已知的缺点

*   你的老板可能不喜欢这个主意，用锤子砸你的手指；
*   [Eclipse 不会喜欢这个想法](https://stackoverflow.com/questions/31111263/eclipse-completion-of-inner-classes)，您必须习惯它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-08T20:46:57.347

您可能想看看与 Java 兼容的[Kotlin 。](https://kotlinlang.org)

如果 Kotlin 中存在名称冲突，您可以使用 as 关键字在本地重命名冲突实体来消除歧义：

```
import foo.Bar // Bar is accessible
import bar.Bar as bBar // bBar stands for 'bar.Bar' 
```

[您可以在https://kotlinlang.org/docs/reference/packages.html](https://kotlinlang.org/docs/reference/packages.html)找到更多信息

# sql - 如何使用部署后脚本在远程服务器上批量插入 CSV

> ID：14738855
> 
> 赞同：2
> 
> 时间：2013-02-06T21:10:01.567
> 
> 标签：sql, sql-server, visual-studio

我在我的 SQL Server 数据库项目中使用部署后脚本来批量插入数据。如果我发布到本地数据库，这很好用，但如果我发布到远程数据库，很明显我从中批量插入的 CSV 将不存在于远程服务器上。我曾考虑在 CSV 上使用命令行复制到共享文件夹，但这会引发安全问题，因为有权访问此文件夹的任何人都可能篡改部署。

我应该如何使用部署后脚本将数据复制到远程服务器？CSV 比一堆插入更容易维护，所以我更喜欢使用 CSV。有没有人遇到并解决了这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:57:40.410

最好的方法是你提到的那个。命令行将其复制到**安全**的共享文件夹和 BCP 中。

从那时起，文件夹的安全性取决于网络服务。

# cuda - 持久的 GPU 功能/操作

> ID：14738856
> 
> 赞同：0
> 
> 时间：2013-02-06T21:10:11.690
> 
> 标签：cuda

我想知道是否可以编写一个持久的 GPU 函数。我有疑问，但我不确定调度程序是如何工作的。

我正在寻找处理未知数量的数据点（大约 5000 万）。数据以 20 块左右的形式到达。如果我可以将这 20 个点放入 GPU“桶”中，并让这个“持久”操作在它们进入时抓取并处理它们，那就太好了。完成后，抓取结果。
当存储桶为空时，我可以让 GPU 忙于处理虚拟数据。但我认为部分空桶的竞争条件将是一个问题。
我怀疑当这个持久性操作正在运行时，我将无法在 GPU 上运行任何其他操作。即让其他不敬业的SM 工作。

这是一种可行的（费米）GPU 方法，还是只是一个坏主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:34:33.763

我不确定这个持久内核是否可行，但它肯定会非常低效。尽管这个想法很优雅，但它不适合 GPU：您必须全局通信哪个线程从桶中挑选哪个元素，一些线程甚至可能永远不会启动，因为它们等待其他线程完成并且桶必须是声明为 volatile ，因此会减慢您的整个输入数据。

解决您的问题的一个更常见的解决方案是将数据分成块并将这些块异步复制到 GPU 上。您将使用两个流，一个处理最后发送的块，另一个从主机发送一个新块。这实际上将同时进行。这样，您可能会隐藏大部分传输。但是不要让块变得太小，否则您的内核将遭受低占用率和性能下降。

# apache - 计算 apache 模块一天处理的请求数

> ID：14738862
> 
> 赞同：2
> 
> 时间：2013-02-06T21:10:31.630
> 
> 标签：apache, apache-modules

我有一个我们使用的 apache 模块。我们想做的是测量模块在一天内服务的请求数。我知道我们可以 grep acess_log 或 error_log 并立即知道数字。我想在 apache 模块本身内部有某种计数器，并在每个请求中记录它。但这并不实用，因为 apache 的 stock 安装默认使用 5 个进程，因此 apache 模块将单独加载到每个进程中，因此计数器将毫无意义。这些辅助进程也可以根据需要重新启动。

有没有办法可以做到这一点？显然只有一个 httpd 进程在监听 80 端口，然后它将请求转发给一个辅助进程，对吧？如果是这样，我可以让该进程有一个计数器并将其递增并在转发时将其记录在每个请求中吗？

对此必须有更好的解决方案。

谢谢

-P

# javascript - JSONP 对象错误

> ID：14738865
> 
> 赞同：2
> 
> 时间：2013-02-06T21:10:45.257
> 
> 标签：javascript, jquery, jsonp

我正在尝试发出跨域请求以发送/接收一些数据。`object error`我过不去 在我收到`No Transport`错误但添加`Query.support.cors = true;`解决了这个问题之前。

```
var url = "http://CROSSDOMAINSERVER:PORT/Service1.svc/GetDataUsingDataContract";
            $.ajax({
                type: 'GET',
                url: url,
                data: 'tool=1&product=Some%20Product&details=9&bogus=should%20not%20pass%20validation', 
                datatype: "jsonp",
                contentType: "application/json",
                success: function (response) {
                    alert(response.data);
                },
                error: function (error) {
                    alert(error.statusText);
                }
            }); 
```

如果我在浏览器中输入网址：

```
 http://CROSSDOMAINSERVER:PORT/Service1.svc/GetDataUsingDataContract?&tool=1&product=Some%20Product&details=9&bogus=should%20not%20pass%20validation 
```

我得到了正确的回应。

```
{"d":{"__type":"ClientSideData:#ProdResourceToolService","details":"9","product":"Some Product","result":"1","site":"Somewhere, SD","systime":"2\/6\/2013 2:50:20 PM","team":"0000000000","tool":"1","user":"username"}} 
```

当我使用 ajax 时，它不会将其提交到数据库或返回数据，只是`object error`. 有人对如何解决这个问题有任何建议吗？

我还应该指定是否在本地调试时删除我`http://CROSSDOMAINSERVER:PORT/`得到`var url`正确的 json 响应。为什么跨域不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:18:06.083

这是您当前的回复：

```
{
    "d": {
        "__type": "ClientSideData:#ProdResourceToolService",
        "details": "9",
        "product": "Some Product",
        "result": "1",
        "site": "Somewhere, SD",
        "systime": "2/6/2013 2:50:20 PM",
        "team": "0000000000",
        "tool": "1",
        "user": "username"
    }
} 
```

这是一个有效的[JSON](http://www.json.org/)字符串。但是，它不是有效的[JSONP](http://en.wikipedia.org/wiki/JSONP)。如果可能，让您的服务将 json 包装在一个函数中：

```
responseFunc({
    "d": {
        "__type": "ClientSideData:#ProdResourceToolService",
        "details": "9",
        "product": "Some Product",
        "result": "1",
        "site": "Somewhere, SD",
        "systime": "2/6/2013 2:50:20 PM",
        "team": "0000000000",
        "tool": "1",
        "user": "username"
    }
}); 
```

在您的`$.ajax()`通话中，添加一个属性：`jsonpCallback: 'responseFunc'`.

另外，我建议将其`data`作为对象传递：

```
data: { tool: 1, product: 'Some Product' } //etc... 
```

如果您可以从服务器端访问服务而没有任何问题，您可以创建一个 httphandler（例如 .ashx）并让它为您生成 JSON。这样您就不必在客户端处理跨域问题。

# php - 错误后继续 PHP 脚本？

> ID：14738867
> 
> 赞同：2
> 
> 时间：2013-02-06T21:10:47.573
> 
> 标签：php

```
mysql_query("SELECT active...  WHERE account = '".$account."'")

x = 1;
where(x<10){
    if($active == 1){
        mysql_query("UPDATE scriptstatus SET active = '0' WHERE account = '".$account."'");

        /// Script with errors

        x++;
    }
}
mysql_query("UPDATE scriptstatus SET active = '1' WHERE account = '".$account."'"); 
```

我有一个脚本，但它有错误，这使脚本停止。

我可以强制脚本运行到最后吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:15:41.653

不，这是不可能的，也不是一个好主意。PHP 脚本在出错时终止。 **真正的解决方案是改正错误。**

小贴士：尝试寻找合适的 IDE，它会在您键入时通知您潜在的问题和错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:15:05.770

使用 try catch： http: [//php.net/manual/en/language.exceptions.php](http://php.net/manual/en/language.exceptions.php)

```
try {
    /// Script with errors
} catch (Exception $e) {} 
```

# java - 如何为引用赋值？

> ID：14738870
> 
> 赞同：0
> 
> 时间：2013-02-06T21:11:00.130
> 
> 标签：java, processing

我正在尝试在java中制作一个roguelike来练习。这是我生成地板的代码（现在只是一个边缘有墙砖的大房间）。我正在尝试将我的瓷砖阵列中的某些瓷砖设置为墙砖或地砖。虽然当他们离开 setTile 方法时，他们会恢复到进入方法之前的值。我要疯了。这是我的代码：

```
public Floor(int width, int height) {
        this.tiles = new Tile[(width+1)*(height+1)];
        this.width = width;
        this.height = height;
        generateTiles();    
        boolean test = false;
    }
    public Tile getTile(int x, int y)
    {
        return tiles[y * width + x];
    }

    public void setTile(int x, int y, Tile tile)
    {
        Tile tileToSet = getTile(x,y);
        tileToSet = tile;
    }
    private void generateTiles() {
        for (int i = 0; i < tiles.length; i++)
        {
            tiles[i] = new Tile();
        }
        //make the top wall
        for (int i = 0; i<width;i++)
        {
            setTile(i,0,new WallTile());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:14:20.660

这段代码两次设置相同的变量并且什么都不做。

```
 public void setTile(int x, int y, Tile tile)
    {
        Tile tileToSet = getTile(x,y);
        tileToSet = tile;
    } 
```

我想你想要这样的东西：

```
 public void setTile(int x, int y, Tile tile)
    {
        tiles[y * width + x] = tile;
    } 
```

这会将存储在 tile 数组中的值更改为提供的 Tile 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:15:01.480

看你的`setTile`方法：

```
public void setTile(int x, int y, Tile tile)
{
    Tile tileToSet = getTile(x,y);
    tileToSet = tile;
} 
```

您在 x,y 处获取 tile 值并将其设置为局部变量 ( `tileToSet`)，然后将`tile`值设置为变量`tileToSet`。当然，它不会改变 x,y 处的图块。`tileToSet`只是对值的引用，**绝不是对数组元素的引用**。

替换为：

```
public void setTile(int x, int y, Tile tile)
{
    tiles[y * width + x] = tile;
} 
```

如果您想要一个返回 tile **index**的方法，就像您在命令中所说的那样，您可以像这样重写 get/set 对：

```
public void setTile(int x, int y, Tile tile)
{
    tiles[getTileIndex(x, y)] = tile;
}

public Tile getTile(int x, int y)
{
    tiles[getTileIndex(x, y)] = tile;
}

public int getTileIndex(int x, int y)
{
    return y * width + x;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T21:15:45.460

在Java中，当您将对象传递给函数时，对该对象的引用将按值复制。这意味着您不能交换磁贴参考。

你需要做的是这样的：

```
public Floor(int width, int height) {
        this.tiles = new Tile[(width+1)*(height+1)];
        this.width = width;
        this.height = height;
        generateTiles();    
        boolean test = false;
    }
    public Tile getTile(int x, int y)
    {
        return tiles[y * width + x];
    }

    public void setTile(int x, int y, Tile tile)
    {

        tiles[y * width + x] = tile;//this works cuz it takes the ref from the array and assigns it the copy of the reference passed in

    }
    private void generateTiles() {
        for (int i = 0; i < tiles.length; i++)
        {
            tiles[i] = new Tile();
        }
        //make the top wall
        for (int i = 0; i<width;i++)
        {
            setTile(i,0,new WallTile());
        }
    }
} 
```

查看这篇文章以获得解释：[http ://www.javaworld.com/javaworld/javaqa/2000-05/03-qa-0526-pass.html](http://www.javaworld.com/javaworld/javaqa/2000-05/03-qa-0526-pass.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T21:15:54.993

你的`setTile`没有意义。您正在*检索*当前位于该位置的图块，将其存储在*局部变量* `tileToSet`中，然后*覆盖*该变量的值。

您*要做*的是将给定的图块存储在`tiles`数组中。与实现方式类似`getTile`，您可以通过以下方式执行此操作：

```
public void setTile(int x, int y, Tile tile)
{
    tiles[y * width + x] = tile;
} 
```

请注意，这*不*等同于（但您似乎认为是）：

```
public void setTile(int x, int y, Tile tile)
{
    Tile tileToSet = tiles[y * width + x];
    tileToSet = tile;
} 
```

# cocoa - 使用核心数据实体和菜单项填充 NSPopupButton

> ID：14738874
> 
> 赞同：0
> 
> 时间：2013-02-06T21:11:23.020
> 
> 标签：cocoa, core-data, nsmenuitem, nspopupbutton

有没有办法将核心数据实体列表放入 NSPopupButton 并在其中另外放置一个菜单项？

我有两个核心数据实体，比如 Person 和 Car。一个人有许多汽车（关系）。在一张纸上，用户应该能够从该人的弹出按钮中选择一辆车。此弹出按钮还应提供创建新车的选项，然后将为该人选择该选项。

到目前为止我的尝试：

当从核心数据填充弹出窗口时，我放入 IB 中 NSPopupButton 的项目不会在运行时出现。

我可以指定当用户从弹出窗口中选择一个项目时调用的操作，但每个项目都会触发该操作。（我需要在核心数据实体中有一个虚拟条目才能触发所需的工作表，我也无法控制该虚拟项目在弹出窗口中的位置）

# javascript - 使用属性对标签进行排序

> ID：14738880
> 
> 赞同：1
> 
> 时间：2013-02-06T21:11:41.153
> 
> 标签：javascript, jquery

我有这个 HTML

```
<td colspan="4" class="item"> DERBY LINE, VT 05830<br>
    <label for="" data-sort="16.26">UPS Ground $16.26</label><br>
    <label for="" data-sort="27.57">UPS 3 Day Select&reg; $27.57</label><br>
    <label for="" data-sort="33.87">UPS 2nd Day Air&reg; $33.87</label><br>
    <label for="" data-sort="72.82">UPS Next Day Air $72.82</label><br>
    <label for="" data-sort="7.99">USPS Priority $7.99</label><br>
    <label for="" data-sort="9.61">FEDEX SmartPost&reg; FedEx Delivered Via USPS $9.61</label><br>
    &nbsp;
    <input type="button" name="Button5" id="Button5" onmouseout="this.className='btn'" onmouseover="this.className='btn_over'" onclick="document.shipquote.action='shipquote.asp?action=clean';document.shipquote.submit();" value="Clear" class="btn">
</td> 
```

我需要它通过“数据排序”属性对其进行排序，现在我正在使用 [这个元素排序器](http://james.padolsey.com/javascript/sorting-elements-with-jquery/) 但是当我运行脚本时它返回这个

```
<td colspan="4" class="item"> DERBY LINE, VT 05830<br>
    <label for="" data-sort="16.26">UPS Ground $16.26</label><br>
    <label for="" data-sort="27.57">UPS 3 Day Select&reg; $27.57</label><br>
    <label for="" data-sort="33.87">UPS 2nd Day Air&reg; $33.87</label><br> 
    <label for="" data-sort="7.99">USPS Priority $7.99</label><br>
    <label for="" data-sort="72.82">UPS Next Day Air $72.82</label><br>
    <label for="" data-sort="9.61">FEDEX SmartPost&reg; FedEx Delivered Via USPS $9.61</label><br>
    &nbsp;
    <input type="button" name="Button5" id="Button5" onmouseout="this.className='btn'" onmouseover="this.className='btn_over'" onclick="document.shipquote.action='shipquote.asp?action=clean';document.shipquote.submit();" value="Clear" class="btn">
</td> 
```

如您所见，它运行但由于某种原因它只获得 attr 上的第一个数字。我正在使用的电话如下：

```
$('.item label').sortElements(function(a, b){
    return $(a).attr("data-sort") > $(b).attr("data-sort") ? 1 : -1;
}); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T21:14:32.750

看起来它当前将每个值视为一个字符串并按各自的顺序对它们进行排序，1 - 9。您应该使用[`parseFloat()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseFloat)将值从字符串转换为浮点数，以确保正确完成比较：

```
$('.item label').sortElements(function(a, b){
   return parseFloat($(a).attr("data-sort")) > parseFloat($(b).attr("data-sort")) ? 1 : -1;
}); 
```

或者改用该[`.data()`](http://api.jquery.com/data)方法，它会自动将数字解释为浮点数：

```
$('.item label').sortElements(function(a, b){
   return $(a).data("sort") > $(b).data("sort") ? 1 : -1;
}); 
```

# google-apps-script - 用固定大小的块和滚动面板填充垂直面板

> ID：14738886
> 
> 赞同：0
> 
> 时间：2013-02-06T21:12:22.947
> 
> 标签：google-apps-script

我希望有一个 UI 可以填充物理显示器，而外部没有滚动条，并且可以调整到不同大小/纵横比的显示器。基本空间分为 2 个垂直面板。这些面板之一旨在具有固定部分和可滚动区域。

```
 function doGet() {
  var app = UiApp.createApplication();
  // overall panel to fill available display
//  var container = app.createSimplePanel().setSize("100%","100%");
  // Contains a panel to be divided in two  
  var outer = app.createHorizontalPanel().setSize("100%","100%");
  // Two vertical panels (equal size) filling available space within outer   
  var p1 = app.createVerticalPanel().setSize("100%","100%");
  var p2 = app.createVerticalPanel().setSize("100%","100%");
  // Left hand panel p2 holds two  panels. One fixed height
  var p4 = app.createVerticalPanel().setSize("100%","20PX"); 
  var scrollPanel = app.createScrollPanel().setId('sp').setTag('Empty').setSize("100%","100%");
  // The scroll panel is to hold a variable number of elements and use the space available to display the maximum
  // demonstrated by a vertical panel with label widgets
  var p3 = app.createVerticalPanel().setSize("100%","100%");
  for (i=0;i<100;i++){
    var lab4 = app.createLabel("Te"+(i+4)).setSize("100%","100%");
    p3.add(lab4);
  }
   scrollPanel.add(p3);
  // label to occupy fixed space above scrolled  list
  var lab1 = app.createLabel    ("Testing********************************************************************************************************************************************************************1");

  // label at top of right hand panel
  var lab2 = app.createLabel("Testing********************************************************************************************************************************************************************2");

  p2.add(lab2);
  p4.add(lab1);
  // scroll panel below label panel
 p1.add(p4)
  p1.add(scrollPanel);
  // add some formatting to make panels show up
  applyCSS(outer,_outerContainer)
  applyCSS(p1,_innerContainer)
  applyCSS(p4,_outerContainer)
  applyCSS(p2,_innerContainer)
  applyCSS(p3,_innerContainer)
  outer.add(p1).add(p2);
 // container.add(outer);
  //app.add(container);
  app.add(outer);
  return app;
} 
```

(1) 我应该怎么做才能让显示器分成 2 个相同大小的面板？大小显示取决于内容的相对大小。(2) 如何让垂直面板 P1 在可用物理空间内最大化滚动面板的大小？按照编码，固定块放置正确，滚动面板从包含垂直面板的中间开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:16:17.573

经过一些试验和错误......答案是

(1.1) 使用 Absolute Panels 而不是 Vertical Panels 。

(1.2) 了解宽度和高度规范与内容有关，因此您必须允许填充和边距。如果没有这些，则通过宽度 50% 的 AbsolutePanel 将其分成 2 个相等的列。

(2) 使用高度为 30PX 的 AbsolutePanel 和高度为 100% 的垂直面板（以包含滚动面板）将第一列拆分为 2 结果 ...全宽和高度显示，外部没有滚动条；电脑显示器上滚动面板上的滚动条；全宽和高度显示，外部没有滚动条；i-pad 上任一方向的滚动面板（无滚动条）中的可滚动显示；

# ios - UITextView 的界面构建器和子类

> ID：14738895
> 
> 赞同：3
> 
> 时间：2013-02-06T21:13:04.537
> 
> 标签：ios, objective-c, interface-builder

我正在使用 XCode 4.6，并且试图用 SSToolKit 中的 SSTextView 替换我的 UITextView 之一，以便为其添加占位符。得益于 CocoaPods，SSToolkit 库已正确集成到我的项目中。所以我只是将视图控制器中的属性类型更改为 SSTextView 而不是 UITextView：

```
@property (strong, nonatomic) IBOutlet SSTextView *commentTextView; 
```

当然，我还在界面构建器的检查器中更改了控件的类：

![在此处输入图像描述](../Images/783950711e87bc5cae9b2c78040dc350.png)

然而，在我的控制器的 viewWillAppear: 属性仍然是 UITextView 并且当我设置占位符时：

```
self.commentTextView.placeholder = NSLocalizedString(@"Comment", @""); 
```

我得到一个“无法识别的选择器 setPlaceholder：发送到实例”。在我看来，我已经做了一千次这样的事情，但在这里，我无法弄清楚我忘记了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:28:37.563

我想到了。事实证明，在重新部署到模拟器时，编译的应用程序的某些部分似乎没有被覆盖。因此，在我从模拟器中删除应用程序并从头开始运行后，它可以正常工作。我还有其他错误，比如缺少 segues 等等，所以我查了一下，发现了“删除应用程序”技术。诡异的...

# svn - 如何解决与在颠覆中标记为删除的文件的文件冲突？

> ID：14738896
> 
> 赞同：0
> 
> 时间：2013-02-06T21:13:05.790
> 
> 标签：svn

背景：

*   服务器框 1：仅从 SVN 签出存储库（生产）
*   Server Box 2：开发人员在单独的沙箱中工作并致力于 SVN。（发展）
*   服务器盒 3：SVN 存储库

事件顺序：

1.  开发人员 1：直接在服务器盒 1 上工作。
2.  开发人员1：意识到错误然后复制到服务器框2并尝试提交到SVN服务器并失败。
3.  开发人员 2：注意到执行签出时出现问题，并从操作系统中手动删除了文件。
4.  开发人员 2：注意到仍然无法从服务器框 2 中签出，手动将文件添加回操作系统，并通过 SVN 删除。
5.  开发人员 2：陷入了一场看似无法解决的冲突之中。

该文件在服务器框 1 中标记为删除。正确的版本位于 SVN 存储库中，但由于冲突“U”，开发人员无法签出该文件。如何解决这个冲突？（不删除并执行全新的结帐？）SVN 在执行结帐时不再提示解决冲突。

所有服务器都仅在 Linux 上运行命令行。（没有 gui 客户端...）

提前感谢您的帮助。

```
:>svn status
...
!     C path/filename.ext
      >   local delete, incoming edit upon update
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:46:08.507

听起来你有树冲突。这是 svn book关于如何处理它们的[部分。](http://svnbook.red-bean.com/en/1.7/svn.tour.treeconflicts.html)

# api - 如何使用 Github OAuth redirect_url 参数？

> ID：14738899
> 
> 赞同：1
> 
> 时间：2013-02-06T21:13:15.700
> 
> 标签：api, redirect, oauth, github

我正在尝试将 Github Oauth API 用于特定目的：

[Github OAuth API 规范](http://developer.github.com/v3/oauth/#redirect-urls)

这是我所做的：

我在我的 Github 帐户中创建了一个“应用程序”，并添加了一个应用程序 URL，例如**[http://example.com/](http://example.com/)**和一个回调 URL **[http://example.com/](http://example.com/)** /。作为回报，Github 生成了一个**client_id**和**client_secret**。

我使用**client_id**生成授权 url：

```
https://github.com/login/oauth/authorize?client_id=<client_id>&scope=repo&redirect_url=http://example.com/auth/ 
```

当我将此 URL 粘贴到浏览器中时。Github 要求我登录。一旦我使用我的凭据登录，它会要求我授权该应用程序，我这样做了。但是，它会使用临时代码返回到此 url：

```
 http://example.com/?code=<temporary code> 
```

，而不是我提供的**redirect_url**：

```
 http://example.com/auth/?code=<temporary code> 
```

一般来说，我希望灵活地构建自己的**redirect_url**，我可以在其中向 redirect_url 添加一些参数，**以便**区分不同的用户。

我尝试了不同的组合但没有成功。我什至尝试对**redirect_url**参数进行编码，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:18:20.410

参数的名称不是`redirect_url`，而是`redirect_uri`(URL -> URI)。

# sql - 聚合可能不会出现在 UPDATE 语句的集合列表中

> ID：14738900
> 
> 赞同：20
> 
> 时间：2013-02-06T21:13:21.310
> 
> 标签：sql, sql-server

```
UPDATE [silverdb01].[dbo].[info] 
SET [FM] = SUM(a.[MONDAY] - b.[QUOTA]) 
FROM  [silverdb01].[dbo].[info] a,  [silverdb01].[dbo].[quota] b 
WHERE a.[WORK_TYPE]='IN' AND a.[NAME]='KUTHAY' 
```

当我运行它时，我收到以下错误：

> *聚合可能不会出现在 UPDATE 语句的集合列表中。*

有任何想法吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-06T21:49:47.523

我猜（正如其他人指出的那样）你真的不想要这个更新的笛卡尔，所以我在查询中添加了一个“id”，所以你必须做一些修改，但这可能会让你走上正确的道路

```
;with temp as (
    select  a.id, SUM(a.pazartesi - b.kota) as newTotal
    from    [asgdb01].[dbo].[info] a join [asgdb01].[dbo].[kota] b 
          on a.id = b.id
    where   a.work_type='in' and a.name='alp' )
update  a
set     fm = t.newTotal
from    [asgdb01].[dbo].[info] a join temp t on a.id = t.id 
```

# ios - 不会调用其他类中的方法，Objective-C

> ID：14738901
> 
> 赞同：1
> 
> 时间：2013-02-06T21:13:25.430
> 
> 标签：ios, objective-c, debugging

我正在尝试为 iOS 学习 Objective-C。我目前正在关注 iTunesU 上的“一起编码”。虽然我被卡住了，因为我无法让我的控制器调用另一个类的方法。找不到我做错了什么，并认为 StackOverflow 可能有解决方案！

方法“flipCardAtIndex”是不起作用的方法。我已经使用 nslog 进行了调试，并从方法“flipCard”中得到了一个输出。但是当我为 FlipCardAtIndex 执行实现时，我什么也没有得到。所以我的猜测是它从不调用它...我已经使代码更短了，所以它只是我认为重要的部分，这是控制器：

```
#import "ViewController.h"
#import "PlayingCardDeck.h"
#import "CardMatchingGame.h"

@interface ViewController ()

@property (weak, nonatomic) IBOutlet UILabel *flipsLabel;
@property (nonatomic) int flipCount;
@property (weak, nonatomic) IBOutlet UILabel *scoreLabel;
@property (strong, nonatomic) IBOutletCollection(UIButton) NSArray *cardButtons;
@property (strong, nonatomic) CardMatchingGame *game;

@end

@implementation ViewController

- (CardMatchingGame *) game{
    if (_game) _game = [[CardMatchingGame alloc] initWithCardCount:[self.cardButtons     count]
                                                     usingDeck:[[PlayingCardDeck alloc] init]];
    return _game;
}

- (IBAction)flipCard:(UIButton *)sender {

[self.game flipCardAtIndex:[self.cardButtons indexOfObject:sender]];
self.flipCount++;
[self updateUI];

} 
```

和实施：

```
- (void)flipCardAtIndex:(NSUInteger)index
{
    NSLog(@"ALL YOUR BASE ARE BELONG TO US");
    Card *card = [self cardAtIndex:index];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T21:23:58.813

使固定？

```
- (CardMatchingGame *) game{
    if (!_game) _game = [[CardMatchingGame alloc] initWithCardCount:[self.cardButtons        count] usingDeck:[[PlayingCardDeck alloc] init]];
    return _game;
} 
```

# java - 使用正则表达式删除字符串两部分之间的文本

> ID：14738904
> 
> 赞同：1
> 
> 时间：2013-02-06T21:13:54.887
> 
> 标签：java, regex

我需要使用正则表达式匹配字符串的某些部分，并且我很难弄清楚它。有问题的字符串将始终如下所示：

```
CN=Last.First.M.1234567890, OU=OrganizationalUnit, O=Organization, C=CountryName 
```

生成的字符串看起来像`CN=1234567890,`这样，所以我需要将字符串的第一部分包含在内，`,`然后去掉该`Last.First.M.`部分。这可以做到吗？

注意：我将此正则表达式传递给我无法触及的函数，因此我不能使用更简单的方法，例如拆分字符串或仅获取数字并将其添加`CN=`到其中。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:26:22.867

当我懒得玩正则表达式时，我会这样做。

```
String[] myStrings = "CN=Last.First.M.1234567890, OU=OrganizationalUnit, O=Organization, C=CountryName"
    .split(",");
// myStrings [0] now contains CN=Last.First.M.1234567890

myStrings[0] = myStrings[0].replace("Last.First.M.", "");
// now we replaced the stuff we didnt want with nothing and myStrings[0]
// is looking pretty nice. This is a lot more readable but probably
// performs worse. For even more readable code assign to variables rather then to modify myStrings[0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T23:54:54.703

我相信在进行更多挖掘之后，我在这里找到了我正在寻找的答案。

[正则表达式跳过捕获组中的字符](https://stackoverflow.com/questions/277547/regular-expression-to-skip-character-in-capture-group)

这里的所有答案都很棒，只是不适用于我的工作。现在我将研究一种不同的方法来解决这个问题。感谢所有的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T21:24:53.737

使用正则表达式`([A-Z]{2})=(?:\w+\.)+(\d+),`，您可以获得所需的部分。

# java - 使用此自定义格式解析 DateTime

> ID：14738907
> 
> 赞同：1
> 
> 时间：2013-02-06T21:14:09.787
> 
> 标签：java, datetime

我正在尝试解析这样的日期：

星期四 04/04 - 太平洋标准时间下午 1 点

我尝试了不同的模式，目前我有这个：

```
SimpleDateFormat formatoFechaHora = new SimpleDateFormat("EEE dd/MM - ha z");
Date daa=formatoFechaHora.parse("THU 04/04 - 1PM PST"); 
```

这会引发异常：

> java.text.ParseException：无法解析的日期：“Thu 02/07 - 1PM PST”（偏移量 0）

解析这个的正确模式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:19:16.850

如果您不熟悉模式，请务必查阅[文档](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)`DateFormat`。你需要

```
new SimpleDateFormat("EEE dd/MM - ha z", Locale.ENGLISH) 
```

此外，您的默认设置`Locale`可能与您的日期或时区字段不匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:19:36.987

你**应该**是 `EEE dd/MM - ha z`

请注意，这`EEE`是针对这**一天** `THU`的，并且`yyyy`是针对像 2013年这样的**年份的。**

**编辑**：您可能需要明确将您的语言环境设置为英语。

```
SimpleDateFormat formatoFechaHora = new SimpleDateFormat("EEE dd/MM - ha z", Locale.ENGLISH); 
```

# pdf - Imagemagick 将 2 个生成的 PDF 合并为 1 个多页文件

> ID：14738911
> 
> 赞同：12
> 
> 时间：2013-02-06T21:14:19.957
> 
> 标签：pdf, imagemagick, multipage

我没有在文档中找到获取 2 个 PDF 并将它们组合成 1 个文件，其中 image1.pdf 将是第 1 页，而 image2.pdf 将是第 2 页。

这甚至可能吗？

我看到文档，您可以在其中提取图像并从多页 PDF 进行大量处理，但没有关于如何组合它们。

**这似乎有效，但质量严重下降。我确信有一种方法可以在不涉及 PDF 质量、密度、降级等的情况下进行组合。

`exec("convert image1.pdf image2.pdf combined.pdf");`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-06T21:42:32.160

如果您服务器上的 imagemagick 能够完全操纵 pdf，则它必须在后台使用 ghostscript 委托。首先直接使用ghostscript尝试[此处](https://superuser.com/questions/54041/how-to-merge-pdfs-using-imagemagick-resolution-problem)使用的答案以获得最佳效果。

```
gs -dBATCH -dNOPAUSE -q -sDEVICE=pdfwrite -sOutputFile=temp.pdf pdf1.pdf pdf2.pdf 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-06T21:38:02.693

尝试：

```
convert page1 page2 output.pdf 
```

你就在我之前发布了:(

我认为你将不得不增加一个密度。

# ruby-on-rails - 使用 Capistrano 从 Windows 到 Linux 将 Rails 应用程序部署到 VPS

> ID：14738913
> 
> 赞同：0
> 
> 时间：2013-02-06T21:14:21.317
> 
> 标签：ruby-on-rails, gem, capistrano, bundler

我正在尝试将我的第一个 rails 应用程序部署到 VPS。到目前为止，我已经用 ubuntu、postgresql、node、ruby 等配置了它，并且运行`cap deploy:setup`命令没有错误。当我尝试运行`cap deploy:cold`时，我收到一个有趣的捆绑程序错误，它说由于缺少 gem 而无法继续，即使它在 gemfile 中也是如此。我正在 Windows 7 上开发，因此无法与 unicorn 捆绑，并将此 gem 放入 gem 文件中的组中：

```
group :production do
    if RUBY_PLATFORM =~ /win32/
      gem "pg", :platform => [:mswin, :mingw]
    else
      gem "pg", :platform => :ruby
      gem 'unicorn'
    end
end 
```

这是我运行时得到的一些输出`cap deploy:cold`：

```
 ?[2;37mcommand finished in 200ms?[0m
 ** transaction: commit
  * ?[32m2013-02-06 21:11:42 executing `deploy:migrate'?[0m
  * ?[33mexecuting "cd /home/deployer/apps/blog/releases/20130206211131 && bundl
e exec rake RAILS_ENV=production  db:migrate"?[0m
    servers: ["176.58.109.176"]
    [176.58.109.176] executing command
 ** [out :: 176.58.109.176] rake aborted!
 ** [out :: 176.58.109.176] Please install the postgresql adapter: `gem install
activerecord-postgresql-adapter` (pg is not part of the bundle. Add it to Gemfil
e.)
 ** [out :: 176.58.109.176] /home/deployer/apps/blog/shared/bundle/ruby/1.9.1/ge
ms/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.
rb:7:in `<top (required)>'
 ** [out :: 176.58.109.176] /home/deployer/apps/blog/shared/bundle/ruby/1.9.1/ge
ms/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
 ** [out :: 176.58.109.176] /home/deployer/apps/blog/shared/bundle/ruby/1.9.1/ge
ms/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `block in requ
ire'
 ** [out :: 176.58.109.176] /home/deployer/apps/blog/shared/bundle/ruby/1.9.1/ge
ms/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependen
cy'
 ** [out :: 176.58.109.176] /home/deployer/apps/blog/shared/bundle/ruby/1.9.1/ge
ms/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
 ** [out :: 176.58.109.176] /home/deployer/apps/blog/shared/bundle/ruby/1.9.1/ge
ms/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection
_specification.rb:50:in `resolve_hash_connection'
 ** [out :: 176.58.109.176] /home/deployer/apps/blog/shared/bundle/ruby/1.9.1/ge
ms/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection
_specification.rb:41:in `resolve_string_connection'
 ** [out :: 176.58.109.176] /home/deployer/apps/blog/shared/bundle/ruby/1.9.1/ge
ms/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection
_specification.rb:25:in `spec'
 ** [out :: 176.58.109.176] /home/deployer/apps/blog/shared/bundle/ruby/1.9.1/ge
ms/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection
_specification.rb:130:in `establish_connection'
 ** [out :: 176.58.109.176] /home/deployer/apps/blog/shared/bundle/ruby/1.9.1/ge
ms/activerecord-3.2.11/lib/active_record/railtie.rb:82:in `block (2 levels) in <
class:Railtie>'
 ** [out :: 176.58.109.176] /home/deployer/apps/blog/shared/bundle/ruby/1.9.1/ge
ms/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:36:in `instance_ev
al'
 ** [out :: 176.58.109.176] /home/deployer/apps/blog/shared/bundle/ruby/1.9.1/ge
ms/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:36:in `execute_hoo
k'
 ** [out :: 176.58.109.176] /home/deployer/apps/blog/shared/bundle/ruby/1.9.1/ge
ms/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:43:in `block in ru
n_load_hooks'
 ** [out :: 176.58.109.176] /home/deployer/apps/blog/shared/bundle/ruby/1.9.1/ge
ms/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:42:in `each'
 ** [out :: 176.58.109.176] /home/deployer/apps/blog/shared/bundle/ruby/1.9.1/ge
ms/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:42:in `run_load_ho
oks'
 ** [out :: 176.58.109.176] /home/deployer/apps/blog/shared/bundle/ruby/1.9.1/ge
ms/activerecord-3.2.11/lib/active_record/base.rb:720:in `<top (required)>'
 ** [out :: 176.58.109.176] /home/deployer/apps/blog/shared/bundle/ruby/1.9.1/ge
ms/activerecord-3.2.11/lib/active_record/railties/databases.rake:25:in `block (2
 levels) in <top (required)>'
 ** [out :: 176.58.109.176] Tasks: TOP => db:migrate => db:load_config
 ** [out :: 176.58.109.176] (See full trace by running task with --trace)
    ?[2;37mcommand finished in 2926ms?[0m
failed: "sh -c 'cd /home/deployer/apps/blog/releases/20130206211131 && bundle ex
ec rake RAILS_ENV=production  db:migrate'" on 176.58.109.176 
```

任何帮助都非常感谢，经过几天的努力，我准备放弃了！非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:46:48.383

在你的`Gemfile`：

```
group :production do 
  gem 'pg'
  gem 'unicorn'
end 
```

删除`:platform => :ruby`.

编辑：尝试在服务器上指定环境：

```
export RAILS_ENV=production 
```

# image-processing - “After Effects”的Light Glow效果背后的理论是什么？

> ID：14738916
> 
> 赞同：1
> 
> 时间：2013-02-06T21:14:23.717
> 
> 标签：image-processing, glsl, shader, image-manipulation, after-effects

“After Effects”的Light Glow效果背后的理论是什么？我想使用 GLSL 来实现它。但如果我至少更接近它背后的理论，我可以复制它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:23:10.910

我最近一直在实施类似的东西。我的渲染管道看起来像这样：

1.  将场景渲染到纹理（全屏）
2.  过滤场景（“明亮通道”）以隔离高亮度、闪亮的位
3.  将 (2) 下采样到更小的纹理（以提高性能），并进行 H 高斯模糊
4.  在 (3) 上执行 V 高斯模糊。
5.  将 (4) 的输出与 (1) 的输出混合
6.  显示到屏幕。

通过一些参数调整，你会得到它看起来很漂亮。谷歌诸如“bright pass”（低通滤波器）、Gaussian Blur、FBO（Frame Buffer Objects）等。像“bloom”和“HDR”这样的效果也有大量关于做这些事情的不同方式的信息。在确定目前的方法之前，我尝试了大约 4 种不同的高斯模糊方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:20:18.177

看看如何制作阴影体积，而不是刻出阴影，您可以在体积上运行多通道模糊，将其材质设置为非常发射的加法混合着色器，我想您会得到类似的效果.

或者，您可以执行[GPUGems](http://http.developer.nvidia.com/GPUGems/gpugems_ch21.html)实现：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-12T01:12:28.153

我会回答我自己的问题，以防有人同时到达这里。有了更高的精度（实际上是 100% 的精度），我得到了精确的 After Effects 发光效果。它的工作方式是：

1.  对原始图像应用高斯模糊。
2.  提取此模糊图像的亮度
3.  就像在 After Effects 中一样，您有两种颜色（A 和 B）。所以秘诀是在这些颜色之间制作渐变映射，以符合所需的“颜色循环”。如果您不知道，渐变图是颜色（在本例中为 A 和 B）之间的插值。遵循 After Effects 的相同词汇，您需要在您选择的“颜色循环”上循环 X 次......这意味着，假设您使用 A->B->A 之类的颜色循环，它将被视为一个循环在您的图像上（可以在 Photoshop 上尝试此操作）。
4.  将您在第 2 步中提取的 luma 用作渐变图的参数...换句话说：luma=(0%, 50%, 100%) 分别映射到颜色 (A, B, A)...中点被插值。
5.  根据所需的“发光操作”（添加、相乘等）将您的图像与原始图像混合

此过程对每个像素都像 After Effects 一样工作。辉光的其他细节可以在基本程序之后轻松完成……需要校准“辉光强度”、“辉光阈值”等内容，以便在相同参数下获得相同的结果。

# php - 在php中有条件地重载

> ID：14738917
> 
> 赞同：1
> 
> 时间：2013-02-06T21:14:29.093
> 
> 标签：php, preprocessor, overloading

可能是我遗漏了一些明显的东西。
我有一个带有 set 和 get 方法的本地类。

```
class DBStorage extends NativeClass{
  public function get($key);
  public function set($key,value);
} 
```

我大部分时间都想使用它，但是，如果我打开系统调试标志。
我希望`set`and`get`方法被以下内容重载：

```
IF DEBUG IS ON{
    class DBStorage extends NativeClass{
      public function get($key){
         var_dump($key);
         parent::get($key);
      }
      public function set($key,$value){
         var_dump($key,$value);
         parent::set($key,$value);
      }
    }
} 
```

NativeClass 是用 C 编写的。它是一个扩展（phpredis，但它不相关）。我将如何做到这一点？我在 PHP 的 5.3 分支上。

只是为了确保......如果调试关闭，`DBStorage`将是：

```
 class DBStorage extends NativeClass{} 
```

如果调试打开，它将是：

```
class DBStorage extends NativeClass{
      public function get($key){
         var_dump($key);
         parent::get($key);
      }
      public function set($key,$value){
         var_dump($key,$value);
         parent::set($key,$value);
      }
    } 
```

我确实尽量避免 IF 的混乱（真实类中有几十个函数）

```
public function get($key) {
       if (DEBUG) {
           var_dump($key);
       }
       return parent::get($key);
   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T21:18:50.733

你不能有条件地重载，但是你可以有条件地在重载的方法中做一些事情：

```
class DBStorage extends NativeClass{

    public function get($key) {
       if (DEBUG) {
           var_dump($key);
       }
       return parent::get($key);
    }

} 
```

如果调试关闭，它会将参数直接传递给父方法并返回父方法的返回值，就好像什么都没发生一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:20:32.913

由于类构造周围的 if ，您的初始代码将无法编译。为什么不只提供一个调试成员变量，如果为真，则回显输出或推送到日志文件中？

```
class NativeClass
{
    public $debug = false;
}

class DBStorage extends NativeClass
{
    public function get($key)
    {
        if (true === $this->debug) {
            error_log(sprintf('Key: %s', $key));
        }

        parent::get($key);
    }
}

// Calling code
$dbo = new DBStorage();

$dbo->debug = true;

$dbo->doStuff(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T21:26:16.753

某事刚来找我

```
class nodebug extends NativeClass{
  static public function create(){
        if(DEBUG) return new DebugNativeClass;
        return new self;
  }
}

class DebugNativeClass extends nodebug{
    public function set($key,$value){
       var_dump($key,$value);
       parent::set($key,$value);
    }

    public function get($key){
       var_dump($key);
       return parent::set($key);
    }

} 
```

# ios - 在故事板中重新排序 UITabBarController 中的视图控制器（XCode 4.6）

> ID：14738925
> 
> 赞同：0
> 
> 时间：2013-02-06T21:14:50.363
> 
> 标签：ios, xcode, storyboard, uistoryboard, xcode4.6

又是那个问题...

我在情节提要中有一个 UITabBarController 并想在那里重新排序选项卡。

我尝试了在以前的帖子中可以找到的所有建议的解决方案（简单拖放、重新启动 XCode、将 Storyboard 作为源代码打开、用右大脚趾触摸左耳，同时在背后拍手），但没有一个对我有用。

有没有人为此在 XCode 4.6 中有一个可行的解决方案？

**编辑：**
我创建了一个新项目，看看是否有任何区别，唉，拖放在那里工作得很好。如果我错过了一些构建/故事板/项目设置的任何想法/想法（到目前为止我看不到任何差异）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:34:33.217

您始终可以删除故事板中从 TabBarController 到 ViewControllers 的“关系”segues，然后按照您想要的顺序将它们一一连接起来。

# facebook-opengraph - Facebook 提及标签设计和流程（朋友选择器然后是带有标签的文本区域）

> ID：14738930
> 
> 赞同：1
> 
> 时间：2013-02-06T21:15:03.233
> 
> 标签：facebook-opengraph, tagging

我有一个发送礼物的应用程序，用户可以在其中向 Facebook 朋友发送礼物。我想使用 Mention Tagging Open Graph 功能在 Facebook 上发帖，如下所示：

Bob 给了（动作）一个礼物（对象）：嘿@John，给我喝杯咖啡！Vero（与朋友 John 标记的消息）

理想情况下，用户会首先选择礼物的接收者（不必是 Facebook 好友），然后在交付细节中写下消息并选择如何发送礼物（Facebook、电子邮件或文本）。

用户是否已经在文本区域中被标记（因为他们已经选择了 Facebook 朋友）？在交付详细信息页面中，我们明确告诉他们，如果他们选择在 Facebook 上发布礼物，该朋友将被标记（我们还清楚地解释了如何删除/添加不同的标记人）。

有点像 Facebook 相机的例子，它有一个朋友选择器图标和模式，但在显示文本区域**之前显示了朋友选择器模式。**

如果不清楚，我可以发送应用程序和网站的模型，其中包含有关流程的更多详细信息。

# node.js - MongoDB shell 导出整个数据库

> ID：14738931
> 
> 赞同：2
> 
> 时间：2013-02-06T21:15:05.697
> 
> 标签：node.js, mongodb, ssh, mongodump

在 MongoDB 中，我试图为 Mongo 持有的所有数据库设置自动备份，我当前的脚本库类似于

```
mongodump -u username -p password -o backup/(date) 
```

我有（日期）我希望将其转储到带有备份日期的文件夹中，例如 2013-02-06

我希望通过 chron 作业或 .sh 脚本来实现这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T21:25:59.593

如果这是一个 *nix shell 脚本，您可以编写：

```
mongodump -u _username_ -p _password_ -o backup/$(date +%Y-%m-%d) 
```

或者：

```
#!/bin/bash
DT=$(/bin/date +%Y-%m-%d)
mongodump -u _username_ -p _password_ -o backup/$DT 
```

这将在备份下创建一个目录 YYYY-MM-DD。然后，您可能希望使用以下内容对目录进行 tar 处理：

```
tar -czf mongod-backup-$DT.tar backup/$DT 
```

# jquery - :not(.active) 选择器

> ID：14738944
> 
> 赞同：2
> 
> 时间：2013-02-06T21:16:01.567
> 
> 标签：jquery, jquery-selectors

我有一个简单的 CSS :not 选择器：

```
$('.UISelect.popover:not(.active)').click(function () {

    $(this).toggleClass('active');

}); 
```

单击将类 .active 添加到 .UISelect.popover：

```
<a class="UISelect popover active">jow</a> 
```

:not(.active) 选择器应防止在第二次单击时删除 .active。

* * *

但是，问题在于它会在每次点击时切换 .active 类。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:18:33.043

发生这种情况是因为在 dom 元素中永远设置了 click 事件。

这应该解决它：

```
$('.UISelect.popover').click(function () {
    $(this).toggleClass('active', !$(this).is('.active'));
}); 
```

当您声明事件时，它们将绑定到节点。当点击实际触发时，与您对它们的任何类无关。您唯一的解决方案是在点击触发时对其进行验证。

幸运的是，它`toggleClass`接受了第二个参数（真/假），所以你实际上不需要`if`在它周围加上一个。有了`true`它会添加类，`false`它会删除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:25:35.330

一个简单的方法是只添加类，不管它是否已经有它。您不需要在添加之前检查它是否已经具有该类，jQuery 会为您检查唯一性。

```
$('.UISelect.popover').click(function () {
    $(this).addClass('active');
}); 
```

# tridion - Tridion 复制/粘贴在同一组织项目中导致 TCM54 错误

> ID：14738945
> 
> 赞同：3
> 
> 时间：2013-02-06T21:16:14.307
> 
> 标签：tridion, tridion-2011

从 Tridion 2011 GA 升级到 2011 SP1 HR1 后，我们遇到了一个奇怪的问题。在同一文件夹中复制粘贴组件时，我们通常会弹出一个窗口，询问我们是否要使用不同的名称粘贴，但是，在我们的例子中，我们会看到如下错误消息：

![在此处输入图像描述](../Images/6d79769608ae9e0b0096b47bd1d6583e.png)

```
/WebUI/Models/TCM54/Services/General.svc/CopyPasteItem failed to execute. STATUS (500): Internal Server Error The page cannot be displayed because an internal server error has occurred. 
```

事件查看器日志中唯一可见的是警告，这是预期的（因为我的测试虚拟机也收到了警告）。除了 GUI 中的错误，我们实际上没有看到任何错误。

**在文件夹中复制/粘贴组件时：**

```
Unable to paste the item into this Folder. 
Name must be unique for items of type: Component within this Folder and its BluePrint context. Source or sources  of conflict: tcm:4-81455\. 

Error Code: 
0x80040329 (-2147220695) 

Call stack: 
UtilitiesBL.AssertUniqueTitle 
UtilitiesBL.CloneItem 
ComponentBL.Clone 
Tridion.ContentManager.ContentManagement.RepositoryLocalObject.Copy(OrganizationalItem,Boolean) 
Tridion.ContentManager.BLFacade.ContentManagement.RepositoryLocalObjectFacade.Clone(UserContext,String,String,Boolean) 
Folder.PasteItem 
```

在结构组中复制/粘贴页面时：

```
It is not possible to paste this item into a Structure Group.
Name and File name both must be unique for items of type: Page within this Structure Group and its BluePrint context. Source or sources of conflict: tcm:5-82986-64.

Error Code:
0x80040329 (-2147220695)

Call stack:
UtilitiesBL.AssertUniqueTitleAndFileName
UtilitiesBL.AssertUniqueTitleAndFilename
UtilitiesBL.CloneItem
PageBL.Clone
Tridion.ContentManager.ContentManagement.RepositoryLocalObject.Copy(OrganizationalItem,Boolean)
Tridion.ContentManager.BLFacade.ContentManagement.RepositoryLocalObjectFacade.Clone(UserContext,String,String,Boolean)
StructureGroup.PasteItem 
```

如上所述，这些是事件日志中生成的正常警告，但我们应该得到一个弹出窗口，而不是错误。

我们曾尝试重新启动服务器，认为这是一次性的怪癖，但这并没有帮助。我了解错误消息中提到的“TCM54”是指通过 COM+ 运行的代码。任何人都可以提供一些建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:21:56.347

看看这篇文章：[无法在 Tridion 2011 SP1 中保存发布目标](https://stackoverflow.com/questions/12100744/unable-to-save-publication-targets-in-tridion-2011-sp1)

我似乎记得粘贴使用像 Publication Targets 那样的旧（基于 COM）代码。

# nuget - 如何在不更改版本的情况下更新 nuget

> ID：14738947
> 
> 赞同：0
> 
> 时间：2013-02-06T21:16:18.237
> 
> 标签：nuget

我刚刚向 nuget 发布了一个包，但意识到我忘记包含一个 css 文件。我的版本控制与我正在打包的库（我不拥有）相关联，因此我无法真正增加它。

在这种情况下，我如何强制重新推送或建议做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:38:40.610

找到了我自己问题的答案。

显然有多少版本位置没有限制，因此您可以简单地附加另一个版本位置。

因此，例如，如果您要打包的包裹是`0.0.1`您可以上传另一个`0.0.1.1`

# javascript - 如何使用 onchange 函数显示当前单选值以在不同的 HTML 页面上反映正确的结果？

> ID：14738951
> 
> 赞同：1
> 
> 时间：2013-02-06T21:16:29.260
> 
> 标签：javascript, html

你能帮助我吗？我想做一个准确性测验，在您单击提交后，它将得到您的答案以及完成测验所需的时间（以秒为单位）并将其与函数中的数据数组进行比较，并将其显示在不同的 HTML 页面上.

我使用`onchange="handleInput(this);"`& <`form action="Results.html">`在不同页面上显示结果。我是 Javascript 新手。

任何帮助都感激不尽！谢谢你。

**样品结果显示**

> 哎呀！你答错了3个！
> 
> 错误答案：2、4、5
> 
> 您用了 17 秒完成了测验。5 个答案错误，相当于每小时 65 个错误！数据准确性答案键
> 
> 有两个完全匹配：1 和 3。所有其他都不匹配。请记住，90 秒是完成测验的平均时间。

**到目前为止，这是我的代码：**

```
<html>
<title>Accuracy Proofing</title>
<head>
<script language="JavaScript">
startday = new Date();
clockStart = startday.getTime();
function initStopwatch() { 
var myTime = new Date(); 
var timeNow = myTime.getTime();  
var timeDiff = timeNow - clockStart; 
this.diffSecs = timeDiff/1000; 
return(this.diffSecs); 
} 
var secStop=setInterval(function(){getSecs()},1000);
function getSecs() { 
var mySecs = initStopwatch(); 
var mySecs1 = ""+mySecs;
mySecs1= mySecs1.substring(0,mySecs1.indexOf(".")) + " secs."; 
document.forms[0].elapsed_time.value = mySecs1;
document.getElementById('Timer').innerHTML = 'Elapsed time: ' + mySecs1;
document.getElementById("demo").innerHTML=initStopwatch;
window.setTimeout('getSecs()',1000); 
}
</script>

</head>

<body class="quiz-container" onLoad="window.setTimeout('getSecs()',1)">
<div class="quiz-container-inner"
        <h3>Accuracy Quiz</h3>
        <p class="overview">Compare each pair below. If the numbers, letters, and punctuation are the same, put a check in the "Same" column. If they are different, put a check in the "Different" column.</p>

        <div class="box-callout">
        <form action="Results.html" method="post" class="products" target="_top">
            <input type="hidden" name="elapsed_time" id="elapsed_time" value="0">
        <!-- Table markup-->

        <div id="Timer" name="Timer"></div>

        <table id="hor-zebra" summary="Employee Pay Sheet">

        <!-- Table header -->
        <thead>
        <tr>
            <th scope="col"></th>
            <th scope="col">Correct</th>
                <th scope="col">Same</th>
                <th scope="col">Different</th>
                <th scope="col"></th>
                <th scope="col">Copy</th>
            </tr>
        </thead>
        <!-- Table footer -->
        <tfoot>
            <tr>
            <td scope="col"></td>
            <td scope="col">Correct</td>
            <td scope="col">Same</td>
            <td scope="col">Different</td>
            <td scope="col"></td>
            <td scope="col">Copy</td>
            </tr>
        </tfoot>

        <!-- Table body -->
        <tbody>
            <tr class="odd">
                <td><span class="number">1.</span></td>
                <td><span class="times">November 16, 2005</span></td>
                <td>
                    <input type="radio" onchange="handleInput(this);" tabindex="1" value="s" name="Field1" id="Field1_1">
                </td>
                <td>
                    <input type="radio" onchange="handleInput(this);" tabindex="2" value="d" name="Field1" id="Field1_2">               
                </td>
                <td><span class="number">1.</span></td>
                <td><span class="courier">Novenber 16, 2005</span></td>
            </tr>
            <tr>
                <td><span class="number">2.</span></td>
                <td><span class="times">CITIMORTGAGE, INC.</span></td>
                <td>
                    <input type="radio" onchange="handleInput(this);" tabindex="1" value="s" name="Field2" id="Field2_1">
                </td>
                <td>
                    <input type="radio" onchange="handleInput(this);" tabindex="2" value="d" name="Field2" id="Field2_2">               
                </td>
                <td><span class="number">2.</span></td>
                <td><span class="times-tight">CITIMORGAGE, INC.</span></td>
            </tr>
            <tr class="odd">
                <td><span class="number">3.</span></td>
                <td><span class="times">ALICIA CARILLO</span></td>
                <td>
                    <input type="radio" onchange="handleInput(this);" tabindex="1" value="s" name="Field3" id="Field3_1">
                </td>
                <td>
                    <input type="radio" onchange="handleInput(this);" tabindex="2" value="d" name="Field3" id="Field3_2">               
                </td>
                <td><span class="number">3.</span></td>
                <td><span class="times">Alcia Carillo</span></td>
            </tr>
            <tr>
                <td><span class="number">4.</span></td>
                <td><span class="times">45 Nortwesterly</span></td>
                <td>
                    <input type="radio" onchange="handleInput(this);" tabindex="1" value="s" name="Field4" id="Field4_1">
                </td>
                <td>
                    <input type="radio" onchange="handleInput(this);" tabindex="2" value="d" name="Field4" id="Field4_2">               
                </td>
                <td><span class="number">4.</span></td>
                <td><span class="arial">45 Nortwesterley</span></td>
            </tr>
            <tr class="odd">
                <td><span class="number">5.</span></td>
                <td><span class="times">HUSBAND AND WIFE</span></td>
                <td>
                    <input type="radio" onchange="handleInput(this);" tabindex="1" value="s" name="Field5" id="Field5_1">
                </td>
                <td>
                    <input type="radio" onchange="handleInput(this);" tabindex="2" value="d" name="Field5" id="Field5_2">               
                </td>
                <td><span class="number">5.</span></td>
                <td><span class="times">HUSBAND AND WIFE</span></td>
            </tr>
            <tr>
                <td><span class="number">6.</span></td>
                <td><span class="times">AMERICAHOMEKEY, INC.</span></td>
                <td>
                    <input type="radio" onchange="handleInput(this);" tabindex="1" value="s" name="Field6" id="Field6_1">
                </td>
                <td>
                    <input type="radio" onchange="handleInput(this);" tabindex="2" value="d" name="Field6" id="Field6_2">               
                </td>
                <td><span class="number">6.</span></td>
                <td><span class="arial">AMERICAHOMKEY, INC.</span></td>
            </tr>
        </tbody>

        </table>

    <div class="pad">
<input type="Submit" value="Show Me the Results." class="large brown awesome">
        </div>
    </form>
    </div>
</div>
<script type="text/javascript">
    createTimer();
</script>

</body>
</html> 
```

我的网站在本地，它没有托管在任何网络服务器上，我只想让它在本地运行。所以这就是为什么我不能使用任何服务器端脚本......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:23:12.723

由于您没有向最终用户显示经过的时间，因此处理它的一种更简洁的方法是在表单的 onsubmit 处理程序中只计算一次：

```
<script>
var startTime = new Date().getTime();
function saveElapsedTime( field) {
  var now = new Date().getTime();
  var elapsed = now - startTime;
  field.value = elapsed;
  return true;
}
</script>

<form ... onsubmit='saveElapsedTime( this.elapsed_time);'>
    <input type='hidden' name='elapsed_time' id='elapsed_time' value='unknown'>
    ...
</form> 
```

至于处理结果并将其显示在另一个页面上，您需要一些服务器支持来接收表单数据，或者您需要更改表单以使用`method='get'`并通过解析从新页面上的 JavaScript 访问结果数据`window.location.search`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:31:49.207

您可以使用表单的 GET 方法而不是 POST，然后解析 url 以获取参数。（存储在 window.location 中的 URL）

# objective-c - 将 100 个 NSMutableArray 组合成一个可控对象

> ID：14738954
> 
> 赞同：0
> 
> 时间：2013-02-06T21:17:09.887
> 
> 标签：objective-c, macos, cocoa, nsmutablearray

好的，我基本上需要找到一种方法来更好地管理 100 个 NSMutableArrays 的数据。

就像，（我实际上没有这样做）：

```
NSMutableArray *array1;
NSMutableArray *array2;
NSMutableArray *array3;
//etc.. 
```

我需要具有多个方面的东西，例如：

```
NSMutableCombinationArray *theMassiveArray;

[theMassiveArray addObject:theObject forArray:0 atIndex:0]; 
```

最后我想做这样的事情：

```
//in applicationdidfinishlaunching
loopCount = 0;

- (void) frameTimer:(NSTimer*)timer { //called every second

    startingValue = 0;

    for (int i = 1; i <= 100; i++)
    {
        NSString *dmxValues = [NSString stringWithFormat: @"%@,%@,%@,%@,%@", [DMXChannelArray objectAtIndex:startingValue], [DMXChannelArray objectAtIndex:startingValue+1], [DMXChannelArray objectAtIndex:startingValue+2], [DMXChannelArray objectAtIndex:startingValue+3], [DMXChannelArray objectAtIndex:startingValue+4]];

        [theMassiveArray addObject:dmxValues forArray:i-1 atIndex:loopCount];

        startingValue = startingValue + 5;
    }

    loopCount = loopCount + 1;

}

//NOTE DMXChannelArray is updated in another class with current DMX values from a controller. 
```

所以DMX有512个通道，每个阵列需要容纳5个通道。这是一个记录应用程序，基本上以每秒一次的分辨率存储 500 个 DMX 通道值。

我怎样才能做到这一点？最好的方法是什么？我显然想避免编写 100 个 NSMutableArrays 并手动完成这一切。

作为参考，当录制结束时，用户选择他想要导出多少组（5 个通道），然后根据该数量，另一个 for 循环将通过 NSMutableCombinationArray 并导出最终数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:43:32.153

编写一个包装类：

```
@interface MultiDimensionalMutableArray : NSObject

- (void)insertObject:(id)obj atIndex:(NSUInteger)idx intoArrayAtIndex:(NSUInteger)arrIdx;
- (id)objectAtIndex:(NSUInteger)idx inArrayAtIndex:(NSUInteger)arrIdx;

@end

@implementation MultiDimensionalMutableArray
{
    NSMutableArray * arrays;
}

- (id)init
{
    // init boilerplate

    arrays = [NSMutableArray arrayWithCapacity:100];
    for( int i = 0; i < 100; i++ ){
        [arrays addObject:[NSMutableArray array]];
    }

    return self;
}

- (void)insertObject:(id)obj atIndex:(NSUInteger)idx intoArrayAtIndex:(NSUInteger)arrIdx
{
    //TODO: Include appropriate bounds checking
    NSMutableArray * innerArray = [arrays objectAtIndex:arrIdx];
    [innerArray insertObject:obj atIndex:idx];
}

- (id)objectAtIndex:(NSUInteger)idx inArrayAtIndex:(NSUInteger)arrIdx
{
    return [[arrays objectAtIndex:arrIdx] objectAtIndex:idx];
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:43:23.880

这是你应该做的

```
NSMutableArray *massiveArray = [[NSMutableArray alloc] init];

for(int i=0; i<500; i+=5) {
    NSDictionary *dataDict = [[NSDictionary alloc] initWithObjectsAndKeys:[DMXChannelArray objectAtIndex:i], @"Key1", [DMXChannelArray objectAtIndex:i+1], @"Key2", [DMXChannelArray objectAtIndex:i+2], @"Key3", [DMXChannelArray objectAtIndex:i+3], @"Key4", [DMXChannelArray objectAtIndex:i+4], @"Key5", nil];
    [massiveArray addObject:dataDict];        
} 
```

所以最后 massArray 包含 100 个字典，例如，要访问第 45 个字典的第二个值，您可以这样做：

```
NSString *value = [[massiveArray objectAtIndex:44] objectForKey:@"Key2"]; 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T21:45:08.650

好

```
NSMutableDictionary *dict = [NSMutableDictionary alloc] initWithCapacity:100];
for(int i=1; i<=100; i++){
  NSString *dmxValues = [NSString stringWithFormat: @"%@,%@,%@,%@,%@", [DMXChannelArray objectAtIndex:startingValue], [DMXChannelArray objectAtIndex:startingValue+1], [DMXChannelArray objectAtIndex:startingValue+2], [DMXChannelArray objectAtIndex:startingValue+3], [DMXChannelArray objectAtIndex:startingValue+4]];
  [dict setObject:[NSArray arrayWithObject:dmxValues] forKey:[NSNumber numberWithInt:(i-1)];
} 
```

检索您的值

```
[dic objectForkey:[NSNumber numberWithInt:array_index][array_element_index]; 
```

# sharepoint - 从 WSS 3.0 中的对象模型批准文档库项目

> ID：14738955
> 
> 赞同：0
> 
> 时间：2013-02-06T21:17:12.490
> 
> 标签：sharepoint

通过对象模型批准 WSS 3.0 中的项目的正确方法是什么？我最近修改了一些代码，以自动批准其他开发人员满足某些条件的项目。然而那个开发者已经离开了，现在我们发现所有的项目都被批准了，不管它们是否符合这个标准。

我正在翻阅数千行代码，寻找发生这种情况的地方。

或者，是否有授予批准权限的权限组？我知道代码运行的用户，所以如果存在这样的事情，我可以更改这些用户。然而，尽管在 MS 文档中找到了一些提及，但在我们自己的安装中，我没有看到任何地方列出的权限。

谢谢。如果我可以提供更多信息，请告诉我 - 我不精通 SP 编程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:36:18.847

YOu should search something like this.

SPList oList = oWeb.Lists["Documents"];

SPFolder oFolder = oList.RootFolder;

foreach(SPFile oFile in oFolder.Files) { if (oFile.Level == SPFileLevel.Draft) { oFile.Approve(""); } }

# azure - Azure 表插入问题

> ID：14738960
> 
> 赞同：2
> 
> 时间：2013-02-06T21:17:31.203
> 
> 标签：azure

插入实体时遇到问题。我不确定那里有什么问题。当我插入时，我得到一个 StorageClientException 说明“值超出范围”。

我的表服务实体看起来像

```
public class Itinerary : TableServiceEntity
{
     public string Name { get; set; }
     public DateTime DOB { get; set; }
     public int Sex { get; set; }
     public string ToPNR { get; set; }
     public string ReturnPNR { get; set; }
     public string ContactNumber { get; set; } 
     public DateTime TravelDate { get; set; }
     public DateTime ReturnDate { get; set; }
} 
```

当提供完整的行程详细信息时，实体会被插入，但对于只有一侧详细信息的行程，插入方法会失败并出现给定的异常。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T21:27:14.870

我猜问题在于您的 DateTime 字段。如果您在将数据存储到表存储之前没有初始化它们，那么将分配给这些字段的值将是 .NET DateTime.Min 值的值。不幸的是，这个值超出了 Azure 表存储的范围。因此，始终建议为 Azure 表存储中的 DateTime 字段提供一些值。如果您想为其分配默认值，请使用 CloudTableClient.MinSupportedDateTime 属性。这将使用 Azure 存储支持的最小值初始化字段 - [http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.cloudtableclient.minsupporteddatetime.aspx](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.cloudtableclient.minsupporteddatetime.aspx)

希望这可以帮助

# xamarin.ios - 如何将自定义 UIViewController 添加到现有的 XIB？

> ID：14738964
> 
> 赞同：1
> 
> 时间：2013-02-06T21:17:38.503
> 
> 标签：xamarin.ios, uicollectionview

我刚刚开始接触 MonoTouch，并且遇到了最基本的问题。在他们的教程中，他们介绍了通过 XCode 的 Interface Builder 直接向 XIB 添加控件。但是，我无法弄清楚如何向 XIB 添加自定义控件。

我已经看到了许多子类化基本 UICollectionView 以根据您自己的目的对其进行自定义的示例，并且在我的项目的 C# 代码中完成了此操作。我的问题是，如何将 UICollectionView 的特定子类添加到 XIB 以在项目中使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:48:53.647

对于一个普通的 UIView，你需要经历的基本步骤是：

1.  在 C# 中创建您的自定义视图作为一个类

    ```
    public class MyView
    {
    } 
    ```

2.  向其中添加 UIView 基类，添加 Register 属性并添加两个构造函数：

    ```
    [Register("MyView")]
    public class MyView : UIView
    {
        public MyView() {}
        public MyView(IntPtr handle) : base(handle) {}
    } 
    ```

3.  为了让它做一些有用的事情，然后添加一个 Draw 实现：

    ```
    public override Draw(RectangleF rect)
    {
        var context = UIGraphics.CurrentGraphics();
        UIColor.Red.SetFill();
        context.FillEclipseInRect(rect);
    } 
    ```

4.  保存并构建您的项目

5.  现在在要使用自定义视图的 UIViewController 的 XIB 编辑器中，将 UIView 添加到设计图面

6.  选择该 UIView 并在 Identity Inspector 中，将 UIView 的“自定义类”设置为“MyView”

7.  将所有内容保存在 xCode 中

8.  返回 MonoDevelop，构建并运行

此流程的视频可在以下位置获得：- [http://www.youtube.com/watch?v=ggwO46dd-50&feature=youtube_gdata](http://www.youtube.com/watch?v=ggwO46dd-50&feature=youtube_gdata)

对于自定义 UICollectionView、UILabel、UITableViewCell 或任何其他 UIView 基类，您可以遵循类似的步骤，只是使用不同的基类和不同的构造函数以支持特定的 View。

有关自定义表格单元格的视频，请参阅：[http ://slodge.blogspot.co.uk/2013/01/uitableviewcell-using-xib-editor.html](http://slodge.blogspot.co.uk/2013/01/uitableviewcell-using-xib-editor.html)

# c++ - 带有模板类型结构问题的 C++ 函数模板参数

> ID：14738965
> 
> 赞同：6
> 
> 时间：2013-02-06T21:17:46.610
> 
> 标签：c++, function, templates, c++11, arguments

这段代码莫名其妙地无法编译：

```
struct sometype
{
    template <typename T>
    T* get() { return nullptr; }
};

template <typename T>
struct anothertype
{
#if 1
    template <typename T2> struct some_wrapper { typedef T2 type; };
    typedef typename some_wrapper<sometype>::type thetype;
#else
    typedef sometype thetype;
#endif
    typedef thetype* Ptr;

    Ptr m_ptr;
    T* get() { return m_ptr->get<T>(); }
}; 
```

如果我将`#if`参数更改为 0，它会以某种方式固定。有人可以对此有所了解吗？请注意，看似毫无意义`some_wrapper`的事情实际上在我的真实代码中做了一些有用的事情。

我正在使用 g++ 4.7.1 `-fstd=gnu++11`，错误如下（指向我声明的行`anothertype<T>::get`：

```
error: expected primary-expression before '>' token
error: expected primary-expression before ')' token 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T21:25:00.320

很难用你所有的 typedef 来判断，但我敢打赌你需要：

```
m_ptr->template get<T>(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-06T21:25:08.260

您应该按如下方式修复函数调用，添加`template`关键字：

```
T* get() { return m_ptr->template get<T>(); } 
```

您可以查看[此链接](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Fkeyword_template_qualifier.htm)以获取语法说明。

# ruby-on-rails - 将 erb 迁移到 haml - 使用带有嵌套表单的 build 方法时的奇怪行为

> ID：14738967
> 
> 赞同：0
> 
> 时间：2013-02-06T21:17:47.863
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, haml, nested-forms, erb

我在 Rails 中有一个简单的视图，我正在从 ERB 迁移到 HAML。此视图呈现嵌套表单，但包含一个空的子对象，它没有任何现有的子对象。

使用 ERB，我是通过这样做来实现的：

```
<%= form_for @question do |f| %>
  <%= f.label :name %>
  <%= f.text_field :name %>

  <%= f.object.answers.build if f.object.answers.empty? %>

  <%= f.fields_for :answers do |builder| %>
    <%= render 'answer_fields', f: builder %>
  <% end %>

  <%= f.submit %>
<% end %> 
```

有用！但是当我使用 HAML 做同样的事情时，它也“有效”，但会在表单之间打印出令人讨厌的文本，看起来像这样：`#<Answer:0xb159004>`.

这就是我的 HAML 的样子：

```
= form_for @question do |f|
  = f.label :name
  = f.text_field :name

  = f.object.answers.build if f.object.answers.empty?

  = f.fields_for :answers do |builder|
    = render 'answer_fields', f: builder

  = f.submit 
```

它实际上是一回事，但是 ERB 和 HAML 有效，虽然它有效，但它也在`#<Answer:0xb159004>`表格附近打印，我不知道如何摆脱。

我做错了什么还是这是一个 HAML 限制/错误？有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:48:10.970

这并不能直接解决您的问题，但我总是使用[http://html2haml.heroku.com/](http://html2haml.heroku.com/)将现有的 erb 模板切换到 HAML。只需将现有的 erb 代码复制并粘贴到文本字段中，它就会为您输出相应的 HAML。它也接受纯 HTML。我还没有看到它吐出不正确的语法，所以它非常适合在没有任何分歧的情况下转换现有代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:09:18.927

我有这个问题很多天了，但是在发布这个之后，我有了洞察力并解决了我自己的问题。

将行的开头从“=”替换为“-”可以解决此问题，因为这会使 HAML 不插入 ruby​​ 代码的输出。

```
= form_for @question do |f|
  = f.label :name
  = f.text_field :name

  - f.object.answers.build if f.object.answers.empty?    <--- fix

  = f.fields_for :answers do |builder|
    = render 'answer_fields', f: builder

  = f.submit 
```

我在网上找到的每个示例都使用 <%= 语法中的 ERB 代码，并且我假设将它们翻译成 HAML 总是只是为了删除 <%，但我猜在这种特定情况下不会。

# ruby-on-rails-3 - 每当我使用 Exits.results() 过滤某些内容时，我总是得到“[400] Invalid Value”

> ID：14738969
> 
> 赞同：0
> 
> 时间：2013-02-06T21:17:57.647
> 
> 标签：ruby-on-rails-3, google-analytics-api, garb-gem

我无法弄清楚我总是得到 400。这是我的模型：

```
class G2
   extend Garb::Model
   metrics :pageviews
end 
```

这是我的电话：

```
G2.results(profile, :filters => {:pageviews.gte=>3}) 
```

我明白了：

```
Garb::BadRequestError: [400] Invalid Value : https://www.googleapis.com/analytics/v3/data/ga?ids=ga:XXXXXXXX&start-date=2013-01-07&end-date=2013-02-06&metrics=ga:pageviews&filters=ga:pageviews%3E%3D3 
```

如果我不包含`:filters`符号，则请求将成功。我使用 GA Query Tool 测试了这个查询，它可以工作。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:42:23.373

事实证明，这是最近签到服装引起的错误。作者（sija）已恢复更改，此问题不再重现：[https ://github.com/Sija/garb/issues/17](https://github.com/Sija/garb/issues/17)

# mysql - #

> ID：14738978
> 
> 赞同：2
> 
> 时间：2013-02-06T21:18:24.750
> 
> 标签：mysql, ruby-on-rails

尝试生成应用程序时出现以下错误。

# 

我有一个带有我的数据库登录信息的 database.yml，但不确定这个错误到底是什么。有谁知道它是什么？

我假设它是验证登录到测试数据库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T21:46:35.933

确保为`development`环境配置了您的数据库用户名和密码，而不仅仅是`test`环境。初始 Rails 应用程序设置在那里。

该`test`数据库由测试使用，例如`rake spec`or `rake test`，并且`development`当您使用诸如`rails generate`or之类的 Rails 时使用该数据库`rails console`。

一个典型的设置如下：

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: foo_development
  pool: 5
  username: db_username
  password: db_password
  socket: /tmp/mysql.sock

test:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: foo_test
  pool: 5
  username: db_username
  password: db_password
  socket: /tmp/mysql.sock 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:00:33.073

为什么要让 root 用户访问您的应用程序？

建议您创建一个不同的用户并向该用户授予所有权限，然后使用这些凭据配置您的 database.yml。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-17T13:40:39.263

我想为此贡献我的答案。这听起来有点业余，但它可能会帮助一些和我有同样问题的可怜的家伙。

我的密码`database.yml`配置如下：

```
development:
  <<: *default
  database: my_db_name
  username: my_username
  password: !?my_password913 
```

这是一个新手错误，但它让我搞砸了几分钟。如果您使用特殊字符，请确保用引号括起您的密码，因为 ! 例如将评估为 false 的布尔表达式，这将`mysql2`忽略密码字段并发送`password=no`

谢谢！

# ipad - 主视图控制器可以成为细节视图控制器的代表吗？

> ID：14738987
> 
> 赞同：0
> 
> 时间：2013-02-06T21:19:00.213
> 
> 标签：ipad, xcode4.3

有没有办法让主视图控制器成为主细节模板中细节视图控制器的代表？

我的详细视图中有一个分段控件，我希望用户能够使用它来确定应在主视图中显示哪些项目。

我知道如何在不使用主从模板的情况下做到这一点，但无法弄清楚如何使用模板来做到这一点。

# r - mac上的openNLP

> ID：14738988
> 
> 赞同：1
> 
> 时间：2013-02-06T21:19:01.837
> 
> 标签：r, opennlp, rjava

我不熟悉 Mac（我使用 Windows 和 Linux Mint），但我需要一个包，我需要能够告诉所有平台上的人们如何构建。该软件包依赖于`openNLP`并且由于 MacOS X 的[编码问题](http://www.r-project.org/nosvn/R.check/r-release-macosx-ix86/openNLP-00check.html)，因此无法通过`install.packages("openNLP")`.

有人告诉我您仍然可以使用安装，`install.packages("openNLP", type="source")`但我收到以下消息：

```
> install.packages("openNLP", type="source")
trying URL 'http://cran.rstudio.com/src/contrib/openNLP_0.0-8.tar.gz'
Content type 'application/x-gzip' length 807784 bytes (788 Kb)
opened URL
==================================================
downloaded 788 Kb

* installing *source* package ‘openNLP’ ...
/Library/Frameworks/R.framework/Resources/bin/config: line 142: make:
command not found
/Library/Frameworks/R.framework/Resources/bin/config: line 143: make:
command not found
/Library/Frameworks/R.framework/Resources/bin/config: line 219: make:
command not found
Could not determine the Java interpreter.
Maybe run R CMD javareconf?
ERROR: configuration failed for package ‘openNLP’
* removing ‘/Library/Frameworks/R.framework/Versions/2.15/Resources/library/openNLP’

The downloaded source packages are in
        ‘/private/var/folders/YW/YWal638NEwi-tFse3NsBFk+++TM/-Tmp-/RtmpaWdKnC/downloaded_packages’
Warning message:
In install.packages("openNLP", type = "source") :
  installation of package ‘openNLP’ had non-zero exit status 
```

所以我使用 Mac 的终端来做建议`R CMD javareconf`：

```
Java interpreter : /usr/bin/java
Java version     : 1.6.0_37
Java home path   :
/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
Java compiler    : /usr/bin/javac
Java headers gen.: /usr/bin/javah
Java archive tool: /usr/bin/jar
Java library path:
JNI linker flags : -framework JavaVM
JNI cpp flags    : -I$(JAVA_HOME)/include

Updating Java configuration in /Library/Frameworks/R.framework/Resources
Done. 
```

并尝试关闭 R，重新打开，然后`install.packages("openNLP", type="source")`出现相同的消息。谷歌在这里没有帮助我，我对 Mac 非常不熟悉。我认为这与安装的 java 类型有关，但对 Mac 知之甚少，无法漫无目的地玩，因为这不是我的 Mac 机器。

请指导我正确安装 openNLP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:38:53.367

我刚刚使用 R 2.15.2 从 Mas OSX 10.6.8 上的源代码编译，没有错误。鉴于错误消息说`make`找不到，这听起来好像该机器尚未设置为从源代码编译。您是否了解默认情况下未安装 XCode，并且您需要从 Apple 获取它才能编译“源”包？

# android - 无论如何要完全禁用android中的webview

> ID：14738992
> 
> 赞同：1
> 
> 时间：2013-02-06T21:19:04.433
> 
> 标签：android

我希望我的 webview 显示一个网页，但根本不与该页面进行任何交互。只是显示它。我显示了一个 iframe，但是当您单击其中的图像时，它会转到一个链接。该链接对于框架来说太大了。我需要禁用能够单击它。

我试过了

```
 WebView
        android:id="@+id/wv_AmberAlert"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:clickable="false" 
        android:longClickable ="false" 
```

和

```
 wv_Amber_Alert.setFocusableInTouchMode(false);
    wv_Amber_Alert.setFocusable(false);
    wv_Amber_Alert.setOnTouchListener(null);
    wv_Amber_Alert.setOnClickListener(null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:01:30.137

您可以尝试将 WebViewClient 附加到 WebView 并覆盖[onLoadResource()](http://developer.android.com/reference/android/webkit/WebViewClient.html#onLoadResource%28android.webkit.WebView,%20java.lang.String%29)方法以停止加载 url：

```
WebViewClient client = new WebViewClient() {
        @Override
        public void onLoadResource(WebView view, String url) {
            view.stopLoading();
        }
    };
wv_Amber_Alert.setWebViewClient(client); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-06T23:54:30.340

我喜欢在 WebView 上添加一个“覆盖”FrameLayout。

使其与 webview 的大小和位置相同，并**确保 android:clickable="true"**

加载 webview 时，我将叠加层设置为可见。加载完成时反之亦然。

为叠加层添加半透明背景也很好 - 这向用户解释了 webview 正在加载并且还没有冻结（因为交互现在不起作用）。