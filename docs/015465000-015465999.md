# StackOverflow 问答 15465000-15465999

# javascript - 将 jQuery 与 CSS3 动画结合使用

> ID：15465007
> 
> 赞同：0
> 
> 时间：2013-03-17T19:10:13.633
> 
> 标签：javascript, jquery, css, queue

我需要使用 CSS3 和 jQuery 创建一个旋转器。我正在使用 CSS3 来控制淡入和淡出，使用 jQuery 来控制何时添加类。但是我不能让它工作。[这是我当前代码如何不起作用的 jsFiddle](http://jsfiddle.net/4EuFN/1/)。这是代码：

```
$('#action-alerts .rotate:gt(0)').hide();
  setInterval(function(){
 $('#action-alerts .rotate:first-child')
 .queue( function(next){ 
    $('#action-alerts .rotate:first-child').addClass('fadeOut-alert') 
    }).dequeue().delay(1100)
 .queue( function(next){
    $('#action-alerts .rotate:first-child').removeClass('fadeOut-alert')
    }).next('.rotate')
 .queue( function(next){ 
    $('#action-alerts .rotate:first-child').addClass('fadeIn-alert')
    }).dequeue().delay(1100)
 .queue( function(next){ 
    $('#action-alerts .rotate:first-child').removeClass('fadeIn-alert')
    }).dequeue()
    .end()
    .appendTo('#action-alerts');}, 
3000); 
```

我将如何正确编写此功能？

我最初是从以下问题开始的：

***原始问题***

我正在构建一个旋转器，它可以通过漂亮的淡入淡出过渡来转换 div。我最初只使用 jQuery，它在台式机上看起来不错，但在移动设备上它会[闪烁](https://stackoverflow.com/questions/15423614/jquery-fadein-and-fadeout-causes-flickering)。我想将 CSS3 用于带有 jQ​​uery 的移动设备作为后备，但我无法让 CSS3 + jQuery 控制类工作。

这是我尝试过的代码：

***JS***

```
$('#action-alerts .rotate:gt(0)').hide();
  setInterval(function(){
    $('#action-alerts .rotate:first-child').addClass('fadeOut-alert')
     .delay(1100).removeClass('fadeOut-alert')
     .next('.rotate').addClass('fadeIn-alert').delay(1100)
     .removeClass('fadeIn-alert').end().appendTo('#action-alerts');}, 
  3000); 
```

注意：上面的代码在`$(document).ready(function() { });`我也没有看到 jQuery 添加的类，但没有抛出错误。

***CSS***

```
@keyframes fadeIn-alert {
 from {
    opacity:0;
 }  
 to {    
    opacity:1;
 }
}

.fadeIn-alert {
   animation-duration: 1s;
   animation-fill-mode: both;
   animation-name: fadeIn-alert;
}

@keyframes fadeOut-alert {
 from {
    opacity:1;
 }  
 to {    
    opacity:0;
 }
}

.fadeOut-alert {
   animation-duration: 1s;
   animation-fill-mode: both;
   animation-name: fadeOut-alert;
} 
```

注意：我在这里发布的代码中省略了供应商前缀。

***HTML***

```
<div id="action-alerts">

       <div class="quote-holder rotate">
       <div class="grid_10">
       <h3 class="action-box-red"><span class="alert-icon">Text</span></h3>     
       </div>
       <div class="grid_2">
       <a target="_blank" href="#" class="default_button xlarge textcenter red">Read the <br> Report</a>
       </div>
       </div>

       <div class="quote-holder rotate">
       <div class="grid_10">
       <h3 class="action-box-red"><span class="alert-icon">Text</span></h3>     
       </div>
       <div class="grid_2">
       <a target="_blank" href="#" class="default_button xlarge textcenter red">Take <br> Action</a>
       </div>
       </div>
</div>
<!-- MORE HTML AS ABOVE --> 
```

为什么我的代码不起作用，如何创建我正在使用的效果类型？

# sql-server - 根据一列中的值更新 SQL Server 2008 DB 表的列

> ID：15465008
> 
> 赞同：0
> 
> 时间：2013-03-17T19:10:16.143
> 
> 标签：sql-server, sql-server-2008

我需要实现试用许可证到期的功能。我创建了`Membership`包含以下列的表：

*   `Registration_Date`,
*   `Trial_Expiration_Date`
*   `Trial_Expired`（值：是/否）。

试用期两周。

你能帮我写一个`stored procedure`到：

1.  更新列一旦注册成功，`Trial_Expiration_Date = Registration_Date + 14.`我将在列中插入值。`"Registration_Date"`

2.  如果今天的日期差`Trial_Expiration_Date`为 0，则将该字段更新`"Trial_Expired"`为`'Y'`。

我正在使用 SQL Server 2008 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:29:43.763

您可以创建一个计算字段来`Trial_Expired`代替。

```
CREATE TABLE Membership
    (
    Registration_Date DATE, 
    Trial_Expiration_Date DATE,
    Trial_Expired AS  CASE
             WHEN Trial_Expiration_Date < GETDATE() THEN 'Y'
             ELSE 'N'
           END
    )  ON [PRIMARY] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:12:55.940

您可以[`CASE`](http://msdn.microsoft.com/en-us/library/ms181765.aspx)在更新语句中使用表达式

```
UPDATE Membership
SET    Trial_Expiration_Date = DATEADD(MM, 14, Registration_Date),
       Trial_Expired =
           CASE
             WHEN DATEADD(MM, 14, Registration_Date) < GETDATE() THEN 'Y'
             ELSE 'N'
           END
WHERE ... -- some condition here 
```

# highcharts - Highcharts highstocks - 烛台图的最后一个值被部分削减

> ID：15465010
> 
> 赞同：2
> 
> 时间：2013-03-17T19:10:26.197
> 
> 标签：highcharts, highstock

在我正在构建的烛台图中，最新的柱被部分截断，以至于连柱都不可见。因此很难通过看柱来判断高低。

我现在无法发布图片，但就像最后一个矩形被切成两半。

我在 api 中尝试了很多选项，但无法弄清楚为什么显示不正确。图表边距和轴偏移选项没有帮助。有没有办法可以从绘图区域设置系列边距，以便正确显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T22:56:04.670

我遇到了同样的问题，无法弄清楚，因为无论我如何更改 xAxis.maxPadding 或更改 xAxis.max，当我单击范围选择器时，它总是会切断最后一根烛台。

为了解决它，（hack）我刚刚在我的系列中添加了一个额外的数据点，并将其设置为最后一天后的 1 天，并将所有值设置为 null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-27T16:10:50.820

对于这个问题，最好的解决方案是插入一个虚拟系列，该系列应该隐藏在图表的各个方面。所以试试这个，从数据系列的最后一点插入一个虚拟系列到一些额外的缓冲区（根据需要）。然后通过从图例（使用 showinlegend）、图表（将线宽设置为 0）和工具提示中显式删除它来从图表中删除这个系列，方法是检查格式化程序。希望这能解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T07:16:46.117

没有任何代码或图片，很难说出问题所在，但听起来您需要使用最大填充选项。[http://api.highcharts.com/highcharts#xAxis.maxPadding](http://api.highcharts.com/highcharts#xAxis.maxPadding)。您可能还想查看 endOnTick 以及是否在轴上设置最大值。

# java - 按频率排序 Hadoop 结果（类似于字数）

> ID：15465012
> 
> 赞同：0
> 
> 时间：2013-03-17T19:10:53.457
> 
> 标签：java, hadoop

我正在尝试编写一个 Hadoop map/reduce 类，该类读取包含演员列表和他们播放过的电影（每行一部电影）的文本文件，并返回每个演员参与的电影数量。

最后，我希望结果按电影数量排序（升序或降序都可以）。但是，我的代码似乎按电影标题中的字符数对结果进行了排序。我已经尝试了我能想到的一切，包括反转输出（文本、IntWritable 到 IntWritable、文本）并使用不同的比较器，但我无法让它按电影计数对结果进行排序。

我敢肯定这是非常简单的事情，但我一生都无法弄清楚。任何建议将不胜感激。

数据文件的摘录：

```
Chan, Jackie (I)    The Forbidden Kingdom   2008
Chan, Jackie (I)    Kung Fu Panda 2 2011
Chan, Jackie (I)    Shanghai Noon   2000
Chan, Jackie (I)    Pik lik for 1995
Chan, Jackie (I)    The Karate Kid  2010
Chan, Jackie (I)    Shanghai Knights    2003
Chan, Jackie (I)    Around the World in 80 Days 2004
Chan, Jackie (I)    Rush Hour   1998
Chan, Jackie (I)    The Tuxedo  2002
Chan, Jackie (I)    Kung Fu Panda   2008
Chan, Jackie (I)    Rush Hour 2 2001
Chan, Jackie (I)    Rush Hour 3 2007
Davi, Robert    Licence to Kill 1989
Davi, Robert    Die Hard    1988
Davi, Robert    The Hot Chick   2002
Davi, Robert    The Goonies 1985 
```

我的代码如下：

```
// MovieCountByActor.java

package ucsc.hadoop.homework2;

import java.io.IOException;
import java.nio.ByteBuffer;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
// import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.conf.Configured;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.io.WritableComparator;
import org.apache.hadoop.mapred.JobConf;
import org.apache.hadoop.mapreduce.Job;
import org.apache.hadoop.mapreduce.Mapper;
import org.apache.hadoop.mapreduce.Reducer;
import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;
import org.apache.hadoop.util.Tool;
import org.apache.hadoop.util.ToolRunner;

import ucsc.hadoop.util.ConfigurationUtil;

public class MovieCountByActor extends Configured implements Tool {
private static final Log LOG = LogFactory.getLog(MovieCountByActor.class);

    public int run(String[] args) throws Exception {
        // Configuration conf = getConf();
        JobConf conf = new JobConf(getConf(), MovieCountByActor.class);
        conf.setOutputKeyComparatorClass(CountSort.class);
        conf.setOutputValueGroupingComparator(CountSort.class);

        if (args.length != 2) {
            System.err.println("Usage: moviecountbyactor <in> <out>");
            System.exit(2);
        }

        ConfigurationUtil.dumpConfigurations(conf, System.out);

        LOG.info("input: " + args[0] + " output: " + args[1]);

        Job job = new Job(conf, "movie count");
        job.setJarByClass(MovieCountByActor.class);
        job.setMapperClass(MovieTokenizerMapper.class);
        job.setReducerClass(MovieCountReducer.class);

        job.setMapOutputKeyClass(Text.class);
        job.setMapOutputValueClass(IntWritable.class);

        job.setOutputKeyClass(Text.class);
        job.setOutputValueClass(IntWritable.class);
        job.setSortComparatorClass(CountSort.class);

        FileInputFormat.addInputPath(job, new Path(args[0]));
        FileOutputFormat.setOutputPath(job, new Path(args[1]));

        boolean result = job.waitForCompletion(true);
        return (result) ? 0 : 1;
    }

    public static void main(String[] args) throws Exception {
        int exitCode = ToolRunner.run(new MovieCountByActor(), args);
        System.exit(exitCode);
    }

    public static class MovieTokenizerMapper extends Mapper<Object, Text, Text, IntWritable> {
        private final static IntWritable ONE = new IntWritable(1);
        private final static Text ACTOR = new Text();

        @Override
        public void map(Object key, Text value, Context context) throws IOException, InterruptedException {
            String[] tokens = value.toString().split("\\t");

            String actor = "";
            if (tokens.length == 3) {
                actor = tokens[0];
                ACTOR.set(actor);
                context.write(ACTOR, ONE);
            }
        }
    }

    public static class MovieCountReducer extends Reducer<Text, IntWritable, Text, IntWritable> {
        private IntWritable result = new IntWritable();

        public void reduce(Text actor, Iterable<IntWritable> values, Context context) throws IOException, InterruptedException {

            int movieCountPerActor = 0;
            for (IntWritable count : values) {
                movieCountPerActor += count.get();
            }
            result.set(movieCountPerActor);
            context.write(actor, result);
        }
    }

    public static class CountSort extends WritableComparator {
        protected CountSort() {
            super (IntWritable.class);
        }

        @Override
        public int compare(byte[] b1, int j1, int k1, byte[] b2, int j2, int k2) {
            Integer a = ByteBuffer.wrap(b1, j1, k1).getInt();
            Integer b = ByteBuffer.wrap(b2, j2, k2).getInt();
            return a.compareTo(b) * -1;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:51:33.663

我认为您对`job.setSortComparatorClass(CountSort.class);`正在做的事情感到困惑-这是您的 Key 值在减少之前的比较器。我认为您只是在检查序列化 Text 对象（演员名称）的 Int 部分，这解释了为什么您会看到演员姓名长度的输出（我想如果您有两个演员，您会看到意外的输出碰巧散列到同一个reduce实例的相同名称长度。

要按电影数量对输出进行排序，您将需要执行另一个 M/R 作业来获取第一个作业的输出（按演员计算电影），然后使用映射器来切换键/值（所以输出键是计数，值是演员名称）。使用单个减速器，您将按电影计数的升序获得演员。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-18T10:03:21.820

默认情况下 Map Reduce 对 reducer 输出的键进行排序，因此在计算特定演员的电影后可以做什么，您可以将 reducer 的输出键设置为电影计数，将值设置为演员名称。

如下：

```
public static class MovieCountReducer extends Reducer<Text, IntWritable, IntWritable,Text> {
        private IntWritable result = new IntWritable();

        public void reduce(Text actor, Iterable<IntWritable> values, Context context) throws IOException, InterruptedException {

            int movieCountPerActor = 0;
            for (IntWritable count : values) {
                movieCountPerActor += count.get();
            }
            result.set(movieCountPerActor);
            context.write(result, actor);
        }
} 
```

此外，请在作业配置中进行以下更改：

```
job.setMapOutputKeyClass(Text.class);
job.setMapOutputValueClass(IntWritable.class);
job.setOutputKeyClass(IntWritable.class);
job.setOutputValueClass(Text.class); 
```

# linux - 更改为另一个用户帐户以访问 bash 中的文件

> ID：15465014
> 
> 赞同：0
> 
> 时间：2013-03-17T19:11:12.010
> 
> 标签：linux, bash

基本上我想更改目录但到另一个用户帐户我该怎么做这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:15:13.567

您可以使用命令 su < username > 切换用户并获取 shell，但您必须知道该用户的密码。如果您想执行单个命令而不是完整的 shell，请使用 -c 开关添加该命令。手册页[在这里](http://unixhelp.ed.ac.uk/CGI/man-cgi?su)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:15:18.030

使用`su`，然后以用户身份运行的命令：

```
$ su otheruser
$ cd /home/otheruser 
```

# c - 将strtof值分配给C中的二维数组

> ID：15465016
> 
> 赞同：0
> 
> 时间：2013-03-17T19:11:19.450
> 
> 标签：c, pointers, multidimensional-array, dynamic-arrays

我正在尝试将 CSV 文件解析为 C 中的二维数组。我想制作一个具有以下结构的矩阵：

```
typedef struct {
    int row;
    int col;
    float **arr;
    int numElements;
} Matrix; 
```

我正在使用的函数接受一个动态分配的 2D 浮点数组，并返回。我正在使用 fgets 读取值，使用 strtok 标记逗号之间的每个值，然后使用 strtof 转换返回的字符串。

首先，我动态地制作了二维数组，然后将它们传递给要填充值的函数，

```
RMatrix->arr = make2DArray(RMatrix->row, RMatrix->col);
    VMatrix->arr = make2DArray(VMatrix->row, VMatrix->col);

    printf("RMatrix->arr : %p \n", RMatrix->arr);
    printf("VMatrix->arr : %p \n", VMatrix->arr);

    parseCSV(fpRMatrix, RMatrix->arr, RMatrix->row, RMatrix->col, &(RMatrix->numElements), INPUT_LENGTH);
    printf("RMatrix parsed\n");
    parseCSV(fpVMatrix, VMatrix->arr, VMatrix->row, VMatrix->col, &(VMatrix->numElements), INPUT_LENGTH);
    printf("VMatrix parsed\n"); 
```

以下是功能：

```
void parseCSV(FILE *fp, float **output, int row, int col, int *numElements ,int inputLength)
{
    char *buffer;
    int rowArr = 0;

    printf("Output : %p \n", output);

    buffer = (char*) malloc(inputLength * sizeof(char));

    while(fgets(buffer, inputLength, fp)) {
        char *p =strtok(buffer,",");
        int colArr = 0;         
        float check = 0;

        while(p)
        {
            printf("p now : %s \n", p);
            check = strtof(p, (char**) NULL);
            printf("check now : %f \n", check);
            output[rowArr][colArr] = strtof(p, (char**) NULL);
            *numElements += 1;
            colArr++;
            p = strtok('\0',",");
            printf("output[%d][%d] : %f  ", rowArr, colArr, output[rowArr][colArr]);
        }
        printf("\n");
        rowArr++;
    }
    printf("numElements in the end : %d\n", *numElements);
    free(buffer);

}

float **make2DArray(int row, int col) 
{  
    float** arr;
    float* temp;

    arr = (float**)malloc(row * sizeof(float*));
    temp = (float*)malloc(row * col * sizeof(float));
    for (int i = 0; i < row; i++) {
        arr[i] = temp + (i * row);
    }

    return arr;

} 
```

输出 ：

```
Name : RMatrix
NumElements : 0
Rows : 2
Cols : 4
Name : VMatrix
NumElements : 0
Rows : 2
Cols : 4
RMatrix->arr : 0x11684d0 
VMatrix->arr : 0x1168520 
Output : 0x11684d0 
p now : 1 
check now : 1.000000 
output[0][1] : 0.000000  p now : 2 
check now : 2.000000 
output[0][2] : 0.000000  p now : 3 
check now : 3.000000 
output[0][3] : 0.000000  p now : 4

check now : 4.000000 
output[0][4] : 0.000000  
p now : 5 
check now : 5.000000 
output[1][1] : 4.000000  p now : 6 
check now : 6.000000 
output[1][2] : 0.000000  p now : 7 
check now : 7.000000 
output[1][3] : 0.000000  p now : 8

check now : 8.000000 
output[1][4] : 0.000000  
numElements in the end : 8
RMatrix parsed
Output : 0x1168520 
p now : 1 
check now : 1.000000 
output[0][1] : 0.000000  p now : 2 
check now : 2.000000 
output[0][2] : 0.000000  p now : 3 
check now : 3.000000 
output[0][3] : 0.000000  p now : 4

check now : 4.000000 
output[0][4] : 0.000000  
p now : 5 
check now : 5.000000 
output[1][1] : 4.000000  p now : 6 
check now : 6.000000 
output[1][2] : 0.000000  p now : 7 
check now : 7.000000 
output[1][3] : 0.000000  p now : 8

check now : 8.000000 
output[1][4] : 0.000000  
numElements in the end : 8
VMatrix parsed 
```

如您所见，strtof 调用成功（反映在 p 和检查变量中）但没有分配到数组中。

我只用了 C 一个月，就对它着迷。但是，很明显我需要了解更多。我真的很感谢你的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:17:11.070

这

```
arr[i] = temp + (i * row); 
```

应该

```
arr[i] = temp + (i * col); 
```

自从`i = [0,row-1]`

# meteor - 我可以撤消更新 Meteor 吗？

> ID：15465018
> 
> 赞同：28
> 
> 时间：2013-03-17T19:11:34.567
> 
> 标签：meteor

我认为更新 Meteor 可能会破坏我的应用程序。它工作正常，然后我运行了流星更新，现在它不工作了。我可以做类似的事情`meteor downgrade`吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-11T16:16:28.133

Meteor 0.6.0 及更高版本附带了一个新的分发系统。您现在可以将`--release`参数传递给任何 Meteor 命令，它将针对请求的版本运行。例如，要将您的应用程序与 Meteor 0.6.1 捆绑在一起，请运行：`meteor bundle --release 0.6.1`. 值得注意的是，这仅适用于 0.6.0 之后的版本。

如果您想将您的应用固定到特定版本，请运行`meteor update --release <release>`：这会修改`.meteor/release`您的应用程序目录中的文件。然后像往常一样简单地运行 Meteor。当有新版本可用时，您仍会收到通知。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-17T19:42:46.657

**更新**：从 Meteor 0.6.0 开始，此功能无需使用 Meteorite 即可使用。请参阅[Avital 的答案](https://stackoverflow.com/a/15953863/1269037)。（对于 > 0.6.0 的版本。要在低于 0.6.0 的版本上使用功能，您仍然可以使用 Meteorite：

如果您想使用您的应用程序控制版本（因此您现有的应用程序仍然可以使用旧版本或 0.57.1​​（带有安全错误修复），您可以使用陨石：[https ://github.com/oortcloud/meteorite](https://github.com/oortcloud/meteorite)

通过安装它`npm install -g meteorite`

[它对来自http://atmosphere.meteor.com](http://atmosphere.meteor.com)的大量其他软件包也很有帮助。

要控制您的应用程序的版本，请将您的 smart.json 编辑为：

```
{
    "meteor": {
        "tag": "v0.5.7"
    }
} 
```

只有您已经制作的应用程序会受到影响，您可以在准备好后对其进行升级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-14T01:45:45.980

I have tried this and it is very hard. My best advice is to try and copy all the files from an app running the version you want, then paste your app's code in there.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-18T05:45:48.317

There is no meteor downgrade command from its CLI. The best and easy way if you have version control like GIT, just undo your recent changes by `git stash save`, and run `meteor` again.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-28T05:29:31.300

On Windows, I was able to effectively "downgrade" from a failed upgrade by editing the version number to a previous working release in the file:

C:\Users\Paul\AppData\Local.meteor\meteor.bat

You need to change it to a version which has a corresponding folder in: .meteor\packages\meteor-tool

# android - 带有gridview无效索引错误的Viewpager

> ID：15465019
> 
> 赞同：0
> 
> 时间：2013-03-17T19:11:46.690
> 
> 标签：android, listview, gridview, android-viewpager

我有一个viewpager，它有多个页面，其中包含限制为预定义项目数量的gridviews。

gridviews 使用一个自定义适配器，它为每个页面显示来自 json 列表的预定义数量的项目，每个页面从项目的最后一页左侧继续：

我遇到的问题是，一旦我单击一个项目，然后按返回进入我的列表，单击另一个项目会返回无效索引错误：

我的完整代码如下：

```
package com.guessthegame;

import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import com.viewpagerindicator.LinePageIndicator;
import android.os.Bundle;
import android.os.Parcelable;
import android.app.Activity;
import android.content.Intent;
import android.support.v4.app.NavUtils;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.GridView;
import android.widget.TextView;
import android.widget.AdapterView.OnItemClickListener;

public class GamesList extends Activity {

    static String file, name, desc, img = "";
    GameListAdaptor adaptor;
    GridView listViewGames;
    static TextView Tname;
    static TextView Tdesc;
    static TextView Tcount;
    ViewPager myPager;
    int perPage = 12;
    int gamesCnt = 0;
    int pagesNo = 1;
    int currentPage = 0;

    private class MyPagerAdapter extends PagerAdapter {
        public int getCount() {

            pagesNo = (int) Math.ceil(((float) gamesCnt / (float) perPage));

            return (pagesNo > 1 ? pagesNo  : 1 );
        }

        public Object instantiateItem(View collection, int position) {

            LayoutInflater inflater = (LayoutInflater) collection.getContext().getSystemService(getBaseContext().LAYOUT_INFLATER_SERVICE);

            View view = inflater.inflate(R.layout.activity_games_list, null);
            ((ViewPager) collection).addView(view, 0);

            adaptor = new GameListAdaptor(getBaseContext(),R.layout.game, loadGames(position+1));

            listViewGames = (GridView) view.findViewById(R.id.games);

            listViewGames.setClickable(true);

            listViewGames.setOnItemClickListener(new OnItemClickListener() {

               @Override
               public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                    // TODO Auto-generated method stub
                  // if(position <= loadGames(position+1).size()) {

                       Games games = adaptor.getItem(position);

                        Intent intent = new Intent(GamesList.this, Game.class);

                        intent.putExtra("FILE", file);
                        intent.putExtra("IMG", games.img);
                        intent.putExtra("HINT", games.hint);
                        intent.putExtra("SOUND", games.sound);
                        intent.putExtra("ANSWER", games.answer);
                        intent.putExtra("CLOSE", games.close);

                        startActivity(intent);
                  // }
                }

            });

            listViewGames.setAdapter(adaptor);

            adaptor.setNotifyOnChange(true);

            return view;

            }
            @Override
            public void destroyItem(View arg0, int arg1, Object arg2) {
                ((ViewPager) arg0).removeView((View) arg2);
            }
            @Override
            public boolean isViewFromObject(View arg0, Object arg1) {
                return arg0 == ((View) arg1);
            }
            @Override
            public Parcelable saveState() {
                return null;
            }
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_games_page);

        // Show the Up button in the action bar.
        //getActionBar().setDisplayHomeAsUpEnabled(true);

        Bundle extras = getIntent().getExtras();

        if(extras != null) {
            file    = extras.getString("FILE");
            name    = extras.getString("NAME");
            desc    = extras.getString("DESC");
            img     = extras.getString("IMG");
        }

        if(file != "") {

            gamesCnt = MainActivity.prefs.getInt(file+"_cnt", 0);

            MyPagerAdapter adapterP = new MyPagerAdapter();
            myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
            myPager.setAdapter(adapterP);
            //myPager.setCurrentItem(0);

            //Bind the title indicator to the adapter
            LinePageIndicator titleIndicator = (LinePageIndicator)findViewById(R.id.indicator);
            titleIndicator.setViewPager(myPager);
            //new LoadJsonTask().execute();

        }

    }

    @Override
    public void onResume() { 
        // After a pause OR at startup
        super.onResume();

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        //getMenuInflater().inflate(R.menu.activity_games_list, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            NavUtils.navigateUpFromSameTask(this);
            return true;
        }
        return super.onOptionsItemSelected(item);
    }

    private ArrayList<Games> loadGames(int position) {
        ArrayList<Games> games = new ArrayList<Games>();

        String jsonString = null;

        InputStream in;
        try {
            in = this.getAssets().open(file);

            int size = in.available();

            byte[] buffer = new byte[size];
            in.read(buffer);
            in.close();

            jsonString = new String(buffer);

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        try {

            JSONObject jsonObj = new JSONObject(jsonString);

            JSONArray gamesArr = jsonObj.getJSONArray("games");

            int gamesCnt = gamesArr.length();

            int startNo = (position == 1 ? 0 : (position-1) * perPage + 1);
            int endNo   = ((startNo+perPage) > gamesCnt ? gamesCnt : (startNo+perPage));

            Log.i("info",position + " - " + startNo + " <= " + endNo + " | " + gamesArr.length());

            for(int currentNo = startNo; currentNo < endNo; currentNo++) {

                JSONObject j = gamesArr.getJSONObject(currentNo);

                Games game= new Games();

                game.img    = (j.getString("img") != "" ? j.getString("img") : "" );
                game.hint   = (j.getString("hint") != "" ? j.getString("hint") : "" );
                game.sound  = (j.getString("sound") != "" ? j.getString("sound") : "" );
                game.answer = (j.getString("answer") != "" ? j.getString("answer") : "" );
                game.close  = (j.getString("close") != "" ? j.getString("close") : "" );

                games.add(game);

            }

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }       

        return games;

    }

} 
```

日志猫：

```
 03-19 17:51:31.838: E/AndroidRuntime(14573): FATAL EXCEPTION: main
    03-19 17:51:31.838: E/AndroidRuntime(14573): java.lang.IndexOutOfBoundsException: Invalid index 9, size is 0
    03-19 17:51:31.838: E/AndroidRuntime(14573):    at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
    03-19 17:51:31.838: E/AndroidRuntime(14573):    at java.util.ArrayList.get(ArrayList.java:304)
    03-19 17:51:31.838: E/AndroidRuntime(14573):    at android.widget.ArrayAdapter.getItem(ArrayAdapter.java:337)
    03-19 17:51:31.838: E/AndroidRuntime(14573):    at com.guessthegame.GamesList$MyPagerAdapter$1.onItemClick(GamesList.java:71)
    03-19 17:51:31.838: E/AndroidRuntime(14573):    at android.widget.AdapterView.performItemClick(AdapterView.java:298)
    03-19 17:51:31.838: E/AndroidRuntime(14573):    at android.widget.AbsListView.performItemClick(AbsListView.java:1100)
    03-19 17:51:31.838: E/AndroidRuntime(14573):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2749)
    03-19 17:51:31.838: E/AndroidRuntime(14573):    at android.widget.AbsListView$1.run(AbsListView.java:3423)
    03-19 17:51:31.838: E/AndroidRuntime(14573):    at android.os.Handler.handleCallback(Handler.java:725)
    03-19 17:51:31.838: E/AndroidRuntime(14573):    at android.os.Handler.dispatchMessage(Handler.java:92)
    03-19 17:51:31.838: E/AndroidRuntime(14573):    at android.os.Looper.loop(Looper.java:137)
    03-19 17:51:31.838: E/AndroidRuntime(14573):    at android.app.ActivityThread.main(ActivityThread.java:5041)
    03-19 17:51:31.838: E/AndroidRuntime(14573):    at java.lang.reflect.Method.invokeNative(Native Method)
    03-19 17:51:31.838: E/AndroidRuntime(14573):    at java.lang.reflect.Method.invoke(Method.java:511)
    03-19 17:51:31.838: E/AndroidRuntime(14573):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    03-19 17:51:31.838: E/AndroidRuntime(14573):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    03-19 17:51:31.838: E/AndroidRuntime(14573):    at dalvik.system.NativeStart.main(Native Method) 
```

我假设它是因为我向每个页面添加了一个网格视图，并且 onclick 侦听器不知道从哪个视图获取位置。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:16:41.470

通过删除 onitemclicklistner 并将 onclicklistner 添加到我的列表适配器中来修复。

# ruby - 修改 Ruby 中的调用对象

> ID：15465020
> 
> 赞同：0
> 
> 时间：2013-03-17T19:11:48.160
> 
> 标签：ruby, linked-list

我正在学习 Ruby，作为练习，我正在制作一个链表类。我正在为双向链表编写删除方法。我的问题是，如果我用它的头节点表示列表，我该如何删除头？似乎 Ruby 不允许您分配给 self 变量，所以我不能将调用者的引用更改为下一个节点。一种解决方案是我可以从下一个节点复制密钥并交换引用，但总的来说，Ruby 有没有办法更改调用者的引用？

```
class LinkedListNode

    attr_accessor :next, :previous, :key

    def initialize(key=nil, next_node=nil, previous=nil)
        @next = next_node
        @previous = previous
        @key = key
    end

    def append(key=nil)
        newnode = LinkedListNode.new(key)
        seeker = self
        while seeker.next != nil
           seeker = seeker.next
        end
        newnode.previous = seeker
        seeker.next = newnode
     end

     def delete(key=nil)
         seeker = self
         while seeker.key != key
             return if seeker.next == nil
             seeker = seeker.next
         end
         if seeker.previous != nil
            if seeker.next != nil
                seeker.previous.next = seeker.next
                seeker.next.previous = seeker.previous
            else
                seeker.previous.next = nil
            end
         else
             return self = self.next
         end
         return seeker = nil
     end

     def print
         seeker = self
         string = ""
         while 1
            if seeker.next == nil
                string += seeker.key.to_s
                break
            else
                string += seeker.key.to_s + " -> "
            end
            seeker = seeker.next
        end
        puts string
    end
end

if __FILE__ == $0
    ll = LinkedListNode.new(1)
    ll.append(2)
    ll.append(3)
    ll.append(4)
    ll.append(5)

    ll.print

    ll.delete(5)
    ll.print

    ll.delete(1)
    ll.print
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T00:19:11.280

您需要以不同的方式概念化链表。LinkedListNode 是 LinkedList 的一个组件，而不是 LinkedList 本身。追加、删除和打印等操作应该放在 LinkedList 类中，而不是 LinkedListNode 类中。尝试从类似的东西开始

```
class LinkedList

  # This one-liner defines a LinkedList::Node with associated constructor
  # and accessors for the three tags provided.  Any tags omitted during
  # construction will be initialized to nil.
  Node = Struct.new(:key, :previous, :next)

  attr_reader :head, :tail

  def initialize
    # start with no Nodes in the list
    @head = @tail = nil
  end

  def append(key)
    # Make the LinkedList tail a new node that stores the key,
    # points to the prior tail as its previous reference, and
    # has no next.
    @tail = Node.new(key, @tail)
    if @tail.previous  # the prior tail was not nil
      @tail.previous.next = @tail   # make the prior tail point to the new one
    else               # if there wasn't any tail before the list was empty
      @head = @tail    # so the new tail Node is also the head
    end
  end

  # ...

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:19:58.433

您无法更改调用者指向的对象（即 modify `self`），但您可以按照您已经考虑过的任何方式操作该对象。简短的回答是它无法完成。你可以想出其他方法来建模它，但我认为你已经在正确的轨道上。

# css - 如何定位按钮精灵css

> ID：15465025
> 
> 赞同：0
> 
> 时间：2013-03-17T19:12:05.893
> 
> 标签：css

```
.button1{

  background: #E68A00 url(wooden.jpg) repeat-x;
  border: 2px solid #eee;
  height: 28px;
  width: 115px;
  margin: 50px 0 0 50px;
  padding: 0 0 0 7px;
  overflow: hidden;
  display: block;
  text-decoration:none;
  font-family: 'Sacramento', cursive;
  color : white;
  font-size: 30px;

  /*Rounded Corners*/
-webkit-border-radius: 15px;
-moz-border-radius: 15px;
border-radius: 15px;

/*Gradient*/
background-image: -webkit-linear-gradient(top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.2));
background-image: -moz-linear-gradient(top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.2));
background-image: -o-linear-gradient(top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.2));
background-image: -ms-linear-gradient(top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.2));
background-image: linear-gradient(top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.2));

/*Transition*/
-webkit-transition: All 0.5s ease;
-moz-transition: All 0.5s ease;
-o-transition: All 0.5s ease;
-ms-transition: All 0.5s ease;
transition: All 0.5s ease;

}

pg.button1{ 
position:relative;
left:300px;
top:0px;

}

p2.button1{ 
position:absolute;
right:0px;
top:150px;

}

p3.button1{ 
position:absolute;
right:0px;
top:200px;

}

.button1:hover {
  width: 200px;
} 
```

我试过改变元素的位置，但它不起作用！它只是位于屏幕的一部分。我如何让它显示在我想要的位置上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:19:30.800

pg、p2、p3 不是正确的 HTML 标签。可能您创建了具有此类名称的 ID，然后将其更改为：

```
#pg .button1 {} 
```

选择`position absolute`或`relative`。

# sql - 获取其他列的行数

> ID：15465030
> 
> 赞同：0
> 
> 时间：2013-03-17T19:12:40.430
> 
> 标签：sql, sql-server-2008, tsql

我需要获取一些列，其中`LinkID`最`ReplyCount`重要的是`TotalRowCount`.

这是我的代码：

```
SELECT 
   TOP(10) link.LinkID, mesaj.ReplyCount
FROM 
   TBL_UserIcerikler AS link 
INNER JOIN 
   TBL_UserMesajlar AS mesaj  ON link.FromUserID = mesaj.UserID
WHERE 
   link.PublishDate >='2013-03-12 19:46:45.000' 
ORDER BY
   link.PublishDate DESC 
```

当我添加`Count(*) AS a`“.

我收到了这条消息。如何获得行数？有没有人有关于这个话题的任何信息？

> *消息 208，级别 16，状态 1，第 1 行
> 无效的对象名称“TBL_UserIcerikler”*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:24:16.140

`Count(*)`是一个聚合函数，它返回已汇总的行数（不是查询返回的行数），因此您必须`GROUP BY`指定一些内容并仅指定您分组的字段（或仅返回 COUNT(*)）。

将 COUNT() 和 TOP() 混合使用没有多大意义。

例如 ：

```
SELECT link.LinkID, mesaj.ReplyCount, COUNT(*)
  FROM TBL_UserIcerikler AS link 
  INNER JOIN TBL_UserMesajlar AS mesaj ON link.FromUserID = mesaj.UserID
  WHERE link.PublishDate >='2013-03-12 19:46:45.000'
  GROUP BY link.LinkID, mesaj.ReplyCount; 
```

我知道这不是你想要的，但你没有给出足够的解释来说明你想从你的数据库中得到什么。

也就是说，我认为您可能忘记了表达式列表中的逗号。

为什么不发布您修改后的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T23:04:36.037

请阅读[此](http://msdn.microsoft.com/en-us/library/ms177673.aspx)MSDN 对 group by 的解释，您将了解为什么需要它来获取总数。

# php - PHP 注册脚本 - 验证总是失败

> ID：15465032
> 
> 赞同：-1
> 
> 时间：2013-03-17T19:12:47.950
> 
> 标签：php, validation

我一直在为一个网站编写一个注册脚本，它按顺序检查每个字段的输入（总共 9 个），一旦所有这些都被检查过，它就会在`"{//9"`和之间完成代码`"}// close9"`。

但是，如果任何检查失败，脚本应该为变量分配一个“失败”的值`$GLOBALS['fail']`，这反过来又应该在页面底部返回回显“注册失败”。

但是，即使为`$GLOBALS['fail']`变量分配了一个值，`passed`它仍然会回显“注册失败”，尽管我已经尝试了一切，但它不会停止。

我什至输入了在调用函数**之前**`echo $GLOBALS['fail'];`检查它分配的值。**`if($GLOBALS['fail'] = "failed")`**

 **下面是代码：

```
<?php 
//first visit
if(isset($_POST['submit']))
{//first visit

if(isset($_POST['firstname'])&&(!empty($_POST['firstname'])))
{//1
$firstname = $_POST['firstname'];
echo $firstname . "<br/>";

if(isset($_POST['surname'])&&(!empty($_POST['surname'])))
{//2
$surname = $_POST['surname'];
echo $surname. "<br/>";

if(isset($_POST['username'])&&(!empty($_POST['username'])))
{//3
$username = $_POST['username'];
echo $username. "<br/>";

if(isset($_POST['password1'])&&(!empty($_POST['password1'])))
{//4
$pass1 = $_POST['password1'];
echo $pass1\. "<br/>";

if(isset($_POST['password2'])&&(!empty($_POST['password2'])))
{//5
$pass2 = $_POST['password2'];
echo $pass2\. "<br/>";

if(isset($_POST['day'])&&(!empty($_POST['day'])))
{//6
$day = $_POST['day'];
echo $day. "<br/>";

if(isset($_POST['month'])&&(!empty($_POST['month'])))
{//7
$month = $_POST['month'];
echo $month. "<br/>";

if(isset($_POST['year'])&&(!empty($_POST['year'])))
{//8
$year = $_POST['year'];
echo $year. "<br/>";

if(isset($_POST['email'])&&(!empty($_POST['email'])))
{//9
$email = $_POST['email'];
echo $email. "<br/>" ."well done";
$GLOBALS['fail'] = "passed";
echo $GLOBALS['fail'];

} //close9

else {$GLOBALS['fail']="failed"; echo "Please fill in <b>All</b> fields " ;}

} //close8

else {$GLOBALS['fail']="failed"; echo "Please fill in <b>All</b> fields " ;}

} //close7

else {$GLOBALS['fail']="failed"; echo "Please fill in <b>All</b> fields " ;}

} //close6

else {$GLOBALS['fail']="failed"; echo "Please fill in <b>All</b> fields " ;}

} //close5

else {$GLOBALS['fail']="failed"; echo "Please fill in <b>All</b> fields " ;}

} //close4

else {$GLOBALS['fail']="failed"; echo "Please fill in <b>All</b> fields " ;}

} //close3

else {$GLOBALS['fail']="failed"; echo "Please fill in <b>All</b> fields " ;}

} //close2

else {$GLOBALS['fail']="failed"; echo "Please fill in <b>All</b> fields " ;}

} //close1

else {$GLOBALS['fail']="failed"; echo "Please fill in <b>All</b> fields " ;}

} //firstvisit

else echo "stupidity";

echo $GLOBALS['fail'];

if(isset($GLOBALS['fail'])){
if($GLOBALS['fail']="failed"){
echo "registration failed";
}
else echo $GLOBALS['fail'];
}
else echo "no fail set";
?> 
```

当我按下注册并且整个表单完成时屏幕上的输出**很好完成通过通过注册失败**

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T19:17:23.760

利用：

```
if($GLOBALS['fail'] === "failed"){} 
```

或者：

```
if($GLOBALS['fail'] == "failed"){} 
```

你不能用一个“=”来比较，如果你想比较类型，你需要用2来比较值，用3来比较。**

# cross-browser - 跨浏览器定位

> ID：15465033
> 
> 赞同：1
> 
> 时间：2013-03-17T19:12:52.350
> 
> 标签：cross-browser, responsive-design, css-position

**我是前端世界的新手，想知道你们如何在一个网站上定位元素，这些元素可以跨多个浏览器进行翻译。**

我正在为一个学校项目设计和开发一个网站，该网站在我的 MacBook Pro 上的 Chrome 和 Firefox 上看起来不错。但是，当我尝试在我工作的 PC 上的 IE 9 和 Firefox 上查看它时，定位完全关闭。IE 9 中的字体大小也很差。

我听说 IE 有时是个婊子，但我想知道是否有什么办法可以使它在不同的浏览器和操作系统中保持一致。

我主要使用相对定位和一两个绝对位置的东西。对于字体大小，我使用 em，因为我听说它们更适合响应式。**如果我希望这个网站在不同的浏览器和操作系统上具有响应性并且相同，我应该使用什么类型的定位？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-07T02:07:59.663

除了其他建议之外，我建议您始终使用 CSS 重置，以便所有浏览器中的默认设置都相似。

有几个不错的重置可供选择，我在[http://necolas.github.io/normalize.css/上取得了很好的成功](http://necolas.github.io/normalize.css/)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:21:33.373

我通常查看[http://quirksmode.org](http://quirksmode.org)以了解哪些功能与我想要支持的浏览器兼容。我有一段时间没有这样做了，但我看到网站作者 (Peter-Paul Koch) 一直在更新它。

我也想知道哪些标准文件是相关的以及他们说了什么。至于字体大小，相关标准包括 HTML 4.01 和 CSS 的各个级别。我认为这些文件并没有说太多。在任何情况下，由于技术原因，浏览器在解释或遵守标准中偶尔出现的点时经常会略有不同。毕竟标准很少或根本没有提到抗锯齿字体、Retina 显示以及其他可能与平台和实现非常相关的问题。

对于字体大小，我使用基本大小并设置与之相关的所有其他内容。我也有一段时间没有这样做了。其他人可能会对当前的做法有更深入的了解。尽管如此，我希望我的建议将继续有效。

当我为商业目的进行编码时，在我认为工作完成之前，我仍然会在各种浏览器中进行测试。

如果您的问题有更多细节，请添加它们。否则，虽然你在这里问很好，但我想你会发现更广泛的“你们是做什么的”问题最适合这里[http://programmers.stackexchange.com](http://programmers.stackexchange.com)

# javascript - javascript代码使div向下和向上滑动（显示/隐藏）

> ID：15465038
> 
> 赞同：-3
> 
> 时间：2013-03-17T19:13:04.633
> 
> 标签：javascript

我有一个页面，并且在部分旁边有很少的问号图像，如果单击问号图像，则该部分正下方的 div 将出现向下滑动页面的其余部分。本质上是一个向下/向上滑动的 javascript 函数。

前任：

```
Section Title (? IMG)
<div id="section">blah blah blah</div>
<br><br>
Section Title 2 (? IMG)
<div id="section2">Blah2 blah2 blah2</div> 
```

在我上面的例子中，div section 和 div section2 里面的内容一开始是隐藏的，但是当 ? 单击该部分的 IMG，内容将自行显示，页面的其余部分将同时向下滑动，为 div 内的内容腾出空间。相反，如果在显示内容时单击问号图像，它将向上滑动并隐藏自身，下面的页面也会向上滑动以填补空白。

我怎么写这个？我需要它可扩展，这样我就可以添加多个 div，这些 div 可以相应地命名并单独扩展。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T19:18:10.657

使用 jQuery，您可以这样做：

HTML：

```
<div id="clickme">
  Click here
</div>
<img id="book" src="book.png" alt="" width="100" height="123" /> 
```

脚本：

```
$('#clickme').click(function() {
  $('#book').slideDown('slow', function() {
    // Animation complete.
  });
}); 
```

来源：jQuery 文档[http://api.jquery.com/slideDown/](http://api.jquery.com/slideDown/)

要在 HTML 页面中包含 jQuery，您可以在头部使用以下内容：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

您也可以自己下载它并将其放置在您想要的服务器上。

编辑：完整的答案与现成的代码然后......

HTML：

```
<h1 id="id1" class="clickme">click1</h1>
<div id="section1">blah blah blah</div>
<br><br>
<h1 id="id2" class="clickme">click2</h1>
<div id="section2">Blah2 blah2 blah2</div> 
```

脚本

```
$('.clickme').click(function() {
  $(this).next().slideToggle('slow', function() {
    // Animation complete.
  });   
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T19:27:54.797

试试这个例如： -

```
<div class="wrapper">
<div class="btn">section Title (? IMG)</div>
<div class="section">blah blah blah</div>
</div>

    <div class="wrapper">
<div class="btn">section Title (? IMG)</div>
<div class="section">Blah2 blah2 blah2</div>
        </div>

<script>
$(function(){
      $('.btn').click(function(e){
            $(this).parent().toggleClass('slideOut');
        });
});
</script>

.section{
    display:none;
}
.slideOut .section{
display:block;
}
.btn
{
    cursor:pointer;
} 
```

# azure-media-services - 无法上传到 Azure 媒体服务 - 找不到文件

> ID：15465040
> 
> 赞同：-1
> 
> 时间：2013-03-17T19:13:25.497
> 
> 标签：azure-media-services

当我在本地运行网站时，视频将上传到 azure，我得到一个发布网址。没问题。但是，当我发布网站然后尝试从那里上传时，我收到此错误：

> “/”应用程序中的服务器错误。-------------------------------------------------- ------------------------------

```
c:\V1.mp4 
  Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

 Exception Details: System.IO.FileNotFoundException: c:\V1.mp4

Source Error: 

 An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Stack Trace: 

[FileNotFoundException: c:\V1.mp4]
   Microsoft.WindowsAzure.MediaServices.Client.AssetFileData.UploadAsync(String path, BlobTransferClient blobTransferClient, ILocator locator, CancellationToken token) +499
   Microsoft.WindowsAzure.MediaServices.Client.<>c__DisplayClass1c.<UploadAsync>b__14(Task`1 t) +347
   System.Threading.Tasks.ContinuationTaskFromResultTask`1.InnerInvoke() +80
   System.Threading.Tasks.Task.Execute() +49

[AggregateException: One or more errors occurred.]
   System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions) +3548265
   System.Threading.Tasks.Task.Wait(Int32 millisecondsTimeout, CancellationToken cancellationToken) +10487717
   System.Threading.Tasks.Task.Wait() +10
   Microsoft.WindowsAzure.MediaServices.Client.AssetFileData.Upload(String path) +90
   UploadTest.Upload.UploadVideoButton_Click(Object sender, EventArgs e) +101
   System.Web.UI.WebControls.Button.OnClick(EventArgs e) +9553594
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +103
   System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +35
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1724`enter code here` 
```

上传.aspx

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="Upload.aspx.cs" Inherits="UploadTest.Upload" %>
<asp:Content ID="Content2" ContentPlaceHolderID="FeaturedContent" runat="server">
    <asp:Button ID="UploadVideoButton" runat="server" Text="Upload The Video" OnClick="UploadVideoButton_Click" />
</asp:Content> 
```

上传.aspx.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using Microsoft.WindowsAzure.MediaServices.Client;

namespace UploadTest
{
    public partial class Upload : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void UploadVideoButton_Click(object sender, EventArgs e)
        {
            CloudMediaContext context = new CloudMediaContext("<accountname>", "<accountkey>");
            var asset = context.Assets.Create("V1.mp4", AssetCreationOptions.None);
            var file = asset.AssetFiles.Create("V1.mp4");
            file.Upload(@"c:\V1.mp4");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-27T06:16:26.923

**我认为您应该使用它通过上传流来上传文件**

```
public void UploadFileToAzure(Stream stream, string fileName, string contentType, 
    EContextType contextType) {
    if (stream == null)
        throw new ArgumentNullException("stream");

    if (fileName == null)
        throw new ArgumentNullException("fileName");

    CloudBlobContainer blobContainer = null;

    switch (contextType)
    {
        case EContextType.CloudStorage:
            blobContainer = AzureBlobUtil.InitializeBlob(Settings.AzureBlobStorageFileStorage, Settings.GetAzureDataConnectionString);
            break;
        default:
            blobContainer = AzureBlobUtil.InitializeBlob(Settings.AzureBlobStorageDocument, Settings.GetAzureDataConnectionString);
            break;
    }

    var blob = blobContainer.GetBlockBlobReference(fileName);
    blob.UploadFromStream(stream);

    blob.Metadata["FileName"] = fileName;
    blob.Metadata["IsArchived"] = false.ToString();
    blob.SetMetadata();
    // Set the properties
    blob.Properties.ContentType = contentType;

    blob.SetProperties();
} 
```

# ios - 在两个不同的故事板之间传递数据

> ID：15465046
> 
> 赞同：4
> 
> 时间：2013-03-17T19:14:17.600
> 
> 标签：ios, xcode, storyboard, segue

我有两个问题。

**1\. 第一个问题**：

在我的项目中，我有两个不同的故事板文件：`A storyboard`和`B storyboard`.

我想将数据（`nsstring`） 传递`(A) controller of (A) storyboard`给 `(B) controller of (B) storyboard`

我是怎么做到的？

**2.第二个问题**：

在第二个故事板中，我有两个控制器与 segue 链接。

当我使用此指令在代码中调用 segue 时：

```
[self.navigation controller performSegueWithIdentifier: @"secondViewSegue" sender:self]; 
```

我有一条消息：`"has no segue with identifier 'secondViewSegue' "`

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T20:17:02.023

1/ 这样做的一个好方法是制作一个单独的模型对象，可以从两个位置平等地寻址。最简单的方法*是*将属性添加到文件的`@interface`部分`AppDelegate.h`，例如

```
 @property (nonatomic, strong) NSString* sharedString; 
```

要设置和获取它，您需要在任何需要它的文件中添加对 AppDelegate 的类型访问：

```
 #include AppDelegate.h 
```

然后你可以使用...

```
 AppDelegate* appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];

  //to set (eg in A controller)
  appDelegate.sharedString = string;

  //to get (eg in B controller)
  NSString* string = appDelegate.sharedString; 
```

作为属性的替代方法，您可以在头文件中使用静态变量：

```
 static NSString* staticString; 
```

`#imports`头文件的任何对象都可以访问它。虽然不是真正的 Objective-C 方式。

对于更复杂的情况，您可能需要创建一个单例对象来访问您的模型数据。

2/ 尝试：

```
 [self performSegueWithIdentifier: @"secondViewSegue" sender:self]; 
```

确保 Segue 是从您的 viewController 连接的，而不是从 Navigation Controller 连接的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-18T10:36:52.163

有多种方法可以在不同故事板中的两个不同视图控制器之间传递数据。我正在使用什么，我想分享

**斯威夫特 3**

```
let storyboard = UIStoryboard(name: "StoryboardName2", bundle: nil)
    let controller :NextViewController  = storyboard.instantiateViewController(withIdentifier: "NextVCIdentifier") as! NextViewController
    controller.NameofUser = Self.SelectedUser 
```

在下一个视图控制器中声明变量为

```
public var NameofUser:String = "" 
```

# ruby-on-rails - 在 Hartl 教程之后向 Rails 应用程序添加密码重置功能

> ID：15465047
> 
> 赞同：2
> 
> 时间：2013-03-17T19:14:18.700
> 
> 标签：ruby-on-rails, ruby, routes, forgot-password

我是 RoR 的新手，并且一直在[学习 Hartl](http://ruby.railstutorial.org/)教程（非常棒）。我已经成功地完成了第 9 章（稍微调整一下，因为我的最终目标不是制作微博网站）。那时，我决定要在我的应用程序中添加一个“记住我”复选框并重置密码功能，所以我[跳到 railscast 教程](http://railscasts.com/episodes/274-remember-me-reset-password)（正如 Hartl 所建议的那样）。复选框非常顺利，但我在密码重置部分遇到了障碍。这是一个接一个的错误。我不得不承认我忍不住做了一点调整——我尝试使用`form_for`语法而不是`form_tag`语法。我已经能够提交一个电子邮件地址，但后来我得到了一个`No route matches [POST] "/reset_password/new"`信息。在过去的两天里，我一直在阅读关于 stackoverflow 的类似帖子并尝试了这些建议，但我似乎无法想出一些可行的方法。请帮忙！

这是细节：

我的密码重置视图位于`/app/views/reset_password/new.html.erb`：

```
<% provide(:title, 'Reset Password') %>
<h1>Reset Password</h1>

<div class="row">
  <div class="span6 offset3">
    <%= form_for @user, url: new_reset_password_path do |f| %>

      <%= f.label :email %>
      <%= f.text_field :email %>

      <%= f.submit "Reset Password", class: "btn btn-large btn-methyl" %>
    <% end %>
  </div>
</div> 
```

我的控制器位于`/app/controllers/reset_password_controller.rb`：

```
class ResetPasswordController < ApplicationController

  def new
    @user = User.new
  end

  def show
  end

  def create
    @user = User.find_by_email(params[:email].downcase)
    user.send_password_reset if user
    redirect_to root_path, notice: "Email sent with password reset instructions."
  end

  def edit
    @user = User.find_by_password_reset_token!(params[:id])
  end

  def update
    @user = User.find_by_password_reset_token!(params[:id])
    if @user.reset_password_sent_at < 2.hours.ago
      redirect_to_new password_reset_path, alert: "Reset password request has expired."
    elsif @user.update_attributes(params[:user])
      redirect_to root_path, notice: "Password has been reset!"
    else
      render :edit
    end
  end
end 
```

我的路线位于`/config/routes.rb`：

```
Methylme::Application.routes.draw do

  resources :users
  resources :sessions, only: [:new, :create, :destroy]
  resources :reset_password

  root to: 'static_pages#home'

  match '/signup', to: 'users#new'
  match '/signin',  to: 'sessions#new'
  match '/signout', to: 'sessions#destroy', via: :delete

  match '/help', to: 'static_pages#help'
  match '/about', to: 'static_pages#about'
  match '/contact', to: 'static_pages#contact'
.
.
.
end 
```

最后，`$ rake routes`报告如下：

```
 users GET    /users(.:format)                   users#index
                     POST   /users(.:format)                   users#create
            new_user GET    /users/new(.:format)               users#new
           edit_user GET    /users/:id/edit(.:format)          users#edit
                user GET    /users/:id(.:format)               users#show
                     PUT    /users/:id(.:format)               users#update
                     DELETE /users/:id(.:format)               users#destroy
            sessions POST   /sessions(.:format)                sessions#create
         new_session GET    /sessions/new(.:format)            sessions#new
             session DELETE /sessions/:id(.:format)            sessions#destroy
reset_password_index GET    /reset_password(.:format)          reset_password#index
                     POST   /reset_password(.:format)          reset_password#create
  new_reset_password GET    /reset_password/new(.:format)      reset_password#new
 edit_reset_password GET    /reset_password/:id/edit(.:format) reset_password#edit
      reset_password GET    /reset_password/:id(.:format)      reset_password#show
                     PUT    /reset_password/:id(.:format)      reset_password#update
                     DELETE /reset_password/:id(.:format)      reset_password#destroy
                root        /                                  static_pages#home
              signup        /signup(.:format)                  users#new
              signin        /signin(.:format)                  sessions#new
             signout DELETE /signout(.:format)                 sessions#destroy
                help        /help(.:format)                    static_pages#help
               about        /about(.:format)                   static_pages#about
             contact        /contact(.:format)                 static_pages#contact 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:18:50.333

我认为您不想在密码重置视图中链接到`new_reset_password_path`( )，而是链接到( )，它*确实会*发送重置密码电子邮件。`new``reset_password_path``create`

 *如果您的路线没有达到您的预期（例如，`create`路线没有关联`xxx_path`名称），您应该简单地单独声明它们，使用

```
post '/reset_password', to: 'reset_password#create', as: 'send_reset_password' # for example
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T23:15:24.850

这是 Ryan 最好的认证教程之一，

[http://railscasts.com/episodes/250-authentication-from-scratch-revised](http://railscasts.com/episodes/250-authentication-from-scratch-revised)*

# c++ - 三个不同的数字

> ID：15465061
> 
> 赞同：-1
> 
> 时间：2013-03-17T19:15:39.757
> 
> 标签：c++, algorithm

我被困在下面的问题上。我的解决方案超过了时间限制。有人可以告诉我如何改进它吗？

您只需要计算不同数字 (X1, X2, X3) 的有序三元组的数量，其中 Xi 可以是从 1 到 Ni 的任何正整数，包括 (i = 1, 2, 3)。数字 N1、N2、N3 最多可达 10^18。因此，答案可能非常大。因此，您应该以 10^9 + 7 为模输出它。

输入

输入的第一行包含一个整数 T，表示测试用例的数量。T 测试用例的描述如下。每个测试用例的唯一一行包含三个空格分隔的整数 N1、N2、N3。

输出

对于每个测试用例，输出一行，其中包含所需的三元组数，以 10^9 + 7 为模。

约束

1≤T≤1000

1≤镍≤10^18

```
Example

Input:

5

3 3 3
2 4 2
1 2 3
25 12 2012
1 1 2013

Output:
6
4
1
578880
0 
```

这是我的解决方案：

```
#include <iostream>

using namespace std;

int main()
{
int t;
scanf("%d",&t);
for(int i=0; i<t; i++)
{
    long long unsigned a,b,c,sum=0,s1,s2,s3;
    scanf("%llu %llu %llu", &a,&b,&c);
    for(s1=1; s1<=a; s1++)
    {
        for(s2=1; s2<=b; s2++)
        {
            if(s1==s2) continue;
            for(s3=1; s3<=c; s3++)
            {
                if(s1==s3 || s2==s3) continue;
                sum=(sum+1)%1000000007;
            }
        }
    }
    printf("%llu\n",sum);
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:20:36.203

好吧，我发现您可以轻松计算有序三元组的数量，因此这是解决方案：

```
#include <iostream>
#include <algorithm>

using namespace std;

int main()
{
const long long unsigned the_prime= 1000000007;
int t;
scanf("%d",&t);
for(int i=0; i<t; i++)
{
    long long unsigned m[3],res=0;
    scanf("%llu %llu %llu", &m[0],&m[1],&m[2]);
    sort(m,m+3);
    res=((((m[0]%the_prime)*((m[1]-1)%the_prime))%the_prime)*((m[2]-2)%the_prime))%the_prime;
    printf("%llu\n",res);
}
return 0;
 } 
```

# android - 滚动动画 ImageView 时，会显示两个图像

> ID：15465064
> 
> 赞同：1
> 
> 时间：2013-03-17T19:15:52.570
> 
> 标签：android, animation, android-listview

我有一个`ImageView`。我想为单击它的单个图像设置动画。但是当滚动时，我看到两个图像动画。为什么？

```
Animation  animationLeft;
ImageAdapter imageAdapter;ListView listView;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
      animationLeft=AnimationUtils.loadAnimation(this, R.anim.transform_left);

     listView=(ListView) findViewById(R.id.listView1);
     imageAdapter=new ImageAdapter(this, items,images);
    listView.setAdapter(imageAdapter);

    listView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int 
      position,
                long arg3) {
            ImageAdapter mAdapter = (ImageAdapter)parent.getAdapter();

            final View vImage=   mAdapter.getView(position, view, 
    parent).findViewById(R.id.imageView1);
             animate(vImage);

        }
    });

}

public void animate(View v){
         TranslateAnimation anim = new TranslateAnimation
(Animation.RELATIVE_TO_SELF, 0.0f,Animation.RELATIVE_TO_SELF, 0.0f,
                    Animation.RELATIVE_TO_SELF, -1.0f,Animation.RELATIVE_TO_SELF,
0.0f);
            anim.setDuration(6000);
             v.startAnimation(anim);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-12T08:10:08.640

您的方法`public void animate(View v)`专注于能够为图像设置动画的视图，因此有两个图像正在设置动画.....

尝试在 Imageview 上单独设置动画，如下所示

```
public void animate(View v){
ImageView thumbPhoto=(ImageView)view.findViewById(R.id.list_image);
        TranslateAnimation anim = new TranslateAnimation(Animation.RELATIVE_TO_SELF, 0.0f,Animation.RELATIVE_TO_SELF, 0.0f,Animation.RELATIVE_TO_SELF, -1.0f,Animation.RELATIVE_TO_SELF,0.0f);
        anim.setDuration(3000);
        thumbPhoto.startAnimation(anim);
} 
```

尝试在可能的情况下调用此方法，可能在 onCreate() 中，以便在 Activity 出现时立即进行图像动画

# backbone.js - 让子视图知道何时将其插入 DOM 的最佳方法

> ID：15465066
> 
> 赞同：2
> 
> 时间：2013-03-17T19:16:16.027
> 
> 标签：backbone.js

让子视图/子视图知道它们何时已经在 DOM 中的最佳方法是什么？

考虑我们有以下视图层次结构：

```
MainView
   SubView
      ChildView 
```

例如，这里`MainView`已经在 DOM 中。然后作为`render`过程的一部分`MainView`创建`SubView`，然后创建`ChildView`。

因此，在完成渲染`ChildView`之前不会在 DOM 中。`MainView`我需要知道（通过事件或处理程序）何时插入和显示。

最直接的答案是`MainView`在渲染完成时触发一些事件。如果这是我唯一需要它的情况——那就没问题了。但是有很多地方，一般来说突然子视图决定了他们的父母该做什么，可能不好。

***更新***：在什么情况下需要这样做？当我们使用期望元素在 DOM 中的小部件时（获取高度等）。例如：手风琴小部件，jqGrid。因此，当它们的容器已经在 DOM 中时，初始化它们的正确时间。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-17T23:02:22.513

我不确定您的用例是什么，但我假设它在 Childview 中找到一个 DOM 元素并对其进行操作。在这种情况下，它是否在 DOM 中并不重要。

我通常做的是获取对元素的引用 -`$el`

然后找到子元素

```
$target = $el.find('.target') 
```

这还有一个额外的好处，就是只允许我在 ChildView 中获取类或 ID，以确保正确管理视图。

# verilog - CPLD 引脚未被驱动

> ID：15465068
> 
> 赞同：1
> 
> 时间：2013-03-17T19:16:20.747
> 
> 标签：verilog, vga

我正在使用 Verilog 从 Lattice CPLD 构建 VGA 控制器。过去我对 Verilog 有过相当多的了解，但已经有一段时间了，而且我已经生疏了，而且控制显示器所需的同步线没有被驱动（检查 O.Scope），并且我不知道为什么不。

我试图在 Active-HDL 中模拟代码，但我收到一条奇怪的错误消息（无法为非阻塞事务分配内存）并收到计数器没有负载的警告（我相信在这种情况下我可以忽略？ ) 代码如下：

```
module CtrlLines(NRST, CLK, H_SYNC, V_SYNC);
    input  wire CLK;        /*< CLK input from Top module   >*/
    input  wire NRST;       /*< Reset input from Top module >*/
    output reg  H_SYNC;
    output reg  V_SYNC;

    reg [10:0] h_counter;   /*< Tracks amount of pulses from CLK    >*/
    reg [10:0] v_counter;   /*< Tracks amount of pulses from H_SYNC >*/

    `define H_FRONT_PORCH   10'd95
    `define H_BACK_PORCH    10'd720
    `define H_COUNT_MAX     10'd800

    `define V_FRONT_PORCH   10'd2
    `define V_BACK_PORCH    10'd514
    `define V_COUNT_MAX     10'd528

    always @(negedge NRST, posedge CLK) begin
        if (!NRST) begin
            h_counter <= 10'b00;
        end
        else begin
            h_counter <= h_counter + 1'b1;
            case (h_counter)
                `H_FRONT_PORCH: H_SYNC <= 1;    /*< If the counter has reached Front Porch, go High >*/
                `H_BACK_PORCH : H_SYNC <= 0;    /*< If the counter has reached Back Porch, go Low   >*/
                `H_COUNT_MAX  : h_counter <= 0; /*< If the counter has reached Max, Reset   >*/
            endcase                             /*< Else, remain at current level           >*/
        end
    end

    always @(negedge NRST, negedge H_SYNC) begin
        if (!NRST) begin
            v_counter <= 10'b00;
        end
        else begin
            v_counter <= v_counter +1'b1;
            case (v_counter)
                `V_FRONT_PORCH  : V_SYNC <= 1;
                `V_BACK_PORCH   : V_SYNC <= 0;
                `V_COUNT_MAX    : v_counter <= 0;
            endcase
        end
    end
endmodule 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:35:37.717

`reg`这段代码是有问题的，因为您对同一个( )有多个非阻塞分配`h_counter`。哪个将首先执行是不确定的，这会导致模拟竞争条件：

```
 h_counter <= h_counter + 1'b1;
    case (h_counter)
        `H_FRONT_PORCH: H_SYNC <= 1;    /*< If the counter has reached Front Porch, go High >*/
        `H_BACK_PORCH : H_SYNC <= 0;    /*< If the counter has reached Back Porch, go Low   >*/
        `H_COUNT_MAX  : h_counter <= 0; /*< If the counter has reached Max, Reset   >*/ 
```

我的猜测是你的综合工具也有这个问题。

`default`也许您的意思是在语句的子句中发生增量`case`。

这同样适用于`v_counter`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T19:31:56.237

我不知道它是否导致了问题，但有一条奇怪的线：

```
default         : V_SYNC = V_SYNC; 
```

您在其中使用阻塞分配给自己分配 V_SYNC。

我建议删除这一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:56:41.973

我会重申 Tim 的建议，即以不使用 H_SYNC 作为时钟的方式对 V_SYNC 部分进行编码。使用数据作为时钟（反之亦然）通常不受欢迎，因为大多数工具都不能很好地处理它。

For the main problem I might suggest that you verify that the H_SYNC and V_SYNC signals are properly routed to your top level and the IOs? Based on the warning I think your logic might be getting optimized out during syn. I don't see any major functional issues with what you posted.

# c# - 如何在c#中为每个字符添加值？

> ID：15465070
> 
> 赞同：0
> 
> 时间：2013-03-17T19:16:26.010
> 
> 标签：c#

我是 c# 新手，不知道如何解释，但我想知道是否可以为输入到文本框中的每个字符添加费用。

例如，如果客户要输入“HELLO HI”，则应向他们收取 5 英镑的费用，每个字母或数字额外收取 1 英镑的费用，这 1 英镑的费用也应适用于输入的任何空格。

抱歉，如果我没有正确解释这一点，但这是我能做到的最好方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:26:44.940

好吧，我猜它看起来差不多是这样的：

```
string str =  "Happy Birthday";
int price = str.Length + 5; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:42:42.613

```
using System;
using System.Windows.Forms;
namespace WindowsFormsApplication6
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
        int amount;
        private void textBox1_TextChanged(object sender, EventArgs e)
        {
            amount = 5;
            amount = amount + textBox1.Text.Length;            
            label1.Text = amount.ToString();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T04:46:41.493

使用 TextboxID.text.Length 在文本框中查找输入字符串的长度，并添加您的修复费用 5 ，正如 ALEX 向您解释的那样。请参阅亚历克斯的回答。

# java - BasicStroke 导致偏心

> ID：15465085
> 
> 赞同：1
> 
> 时间：2013-03-17T19:18:15.117
> 
> 标签：java, swing, graphics2d

将 Graphics2D 对象的 BasicStroke 更改为 1 以外的任何值会导致它在启动时不在 JPanel 的中心绘制任何东西。

这是一个 JFrame 上的 JPanel。这是我项目的基本思想，但不是全部。

```
public void paintComponent(Graphics g) {
    Graphics2D g2 = (Graphics2D) g;
    if(this.centered){
        this.myShape.setCenterX(this.getWidth()/2);
        this.myShape.setCenterY(this.getHeight()/2);
    }
    g2.setStroke(new BasicStroke(3)); //new BasicStroke(1) works fine
    g2.draw(this.myShape);
} 
```

当您单击并拖动 myShape 时，myShape 将立即跳到中心。但是当我最初编译并运行它时，如果笔画不是 1，paintComponent() 会在屏幕中心上方约一厘米处绘制它。

我的居中方式有问题吗？我定义了 MyShape 类，所以那里可能有错误。也许中心和绘图点之间的距离是JPanel和JFrame顶部之间的空间？我如何解决它？

编辑：添加图片

[http://s21.postimage.org/dfpmz73et/Untitled_1.png](http://s21.postimage.org/dfpmz73et/Untitled_1.png) 第一个形状正好在我想要的地方。另外两个在我想要的地方。但无论笔划大小如何，从中心的位移似乎都是相同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:32:53.307

是的，我相信这是形状的正常行为。它假定轮廓为 1 个像素。因此，当您知道要更改基本笔划大小时，您需要更改中心计算。就像是：

```
public void paintComponent(Graphics g) {
    Graphics2D g2 = (Graphics2D) g;
    BasicStroke stroke = new BasicStroke(3);
    int adjustment = stroke.getLineWidth() - 1;

    if(this.centered){
        this.myShape.setCenterX(this.getWidth() + adjustment / 2);
        this.myShape.setCenterY(this.getHeight() + adjustment / 2);
    }
    g2.setStroke(stroke);
    g2.draw(this.myShape);
} 
```

# javascript - 使用机器 IP 访问 localhost 会导致 Ajax 调用失败

> ID：15465086
> 
> 赞同：1
> 
> 时间：2013-03-17T19:18:19.117
> 
> 标签：javascript, ajax, angularjs

Angular 中的Ajax`GET`调用失败。

它引发以下错误：

```
XMLHttpRequest cannot load http://localhost:3000/learning_record_service/get_document?document_id=288\. Origin http://127.0.0.1:3000 is not allowed by Access-Control-Allow-Origin. 
```

以下是请求详细信息：

```
Request URL:http://localhost:3000/learning_record_service/get_document?document_id=288
Request Method:OPTIONS
Status Code:200 OK
Request Headersview source
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Access-Control-Request-Headers:accept, origin, x-requested-with
Access-Control-Request-Method:GET
Connection:keep-alive
Host:localhost:3000
Origin:http://127.0.0.1:3000
Referer:http://127.0.0.1:3000/documents/open/288?sc=c961d72844bbc5439923e097860057d0&angular=1
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.22 ( 
```

虽然这里是代码：

```
$http.get('/learning_record_service/get_document?document_id=' + document_id).success(function(data){

//success code

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:42:06.590

查看您的请求，我们可以看到以下内容：

```
Request URL:http://localhost:3000/learning_record_service/get_document?document_id=288
...
Host:localhost:3000
Origin:http://127.0.0.1:3000
Referer:http://127.0.0.1:3000/documents/open/288?sc=c961d72844bbc5439923e097860057d0&angular=1 
```

如您所见，某些事情导致您的代码混淆`localhost:3000`和`127.0.0.1:3000`. 这被解释为默认情况下大多数浏览器不允许的“跨域”或“跨域”请求。

# python - pandas csv阅读器中的日期转换

> ID：15465087
> 
> 赞同：1
> 
> 时间：2013-03-17T19:18:21.813
> 
> 标签：python, csv, pandas, converter

```
from StringIO import StringIO
import datetime as dt
import pandas as pd

def addtime(temp):
    temp = (temp) + (dt.timedelta(hours  =16))
    return(temp)

data = """\
    '12-31-2012',5100, 5200
    '01/1/2013',5300,5400"""

tdata = pd.read_csv(StringIO(data),
    names =    ['date', 'field1', 'field'], index_col = None,
    parse_dates =['date'], header= None)

print tdata

old_date = tdata.ix[0,'date']
print 'old date =',old_date
new_date = addtime(old_date)
print 'new date =',new_date

#                 date  field1  field
#0  2012-12-31 00:00:00    5100   5200
#1  2013-01-01 00:00:00    5300   5400
#old date = 2012-12-31 00:00:00
#new date = 2012-12-31 16:00:00 
```

作为 Pandas CSV 阅读器的一部分，我想为每个日期添加 16 个小时。但我不知道如何添加有效的“parse_dates=”。示例代码正确地执行了操作，只是不是以期望的方式。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T19:36:02.820

使用`date_parser`参数。通常，它默认为`dateutil.parser.parse`，但您可以指定一个自定义函数（例如`addtime`，下面），它不仅可以解析日期字符串，还可以添加 a `timedelta`。

```
from StringIO import StringIO
import datetime as dt
import pandas as pd
import dateutil.parser as parser

def addtime(temp):
    temp = parser.parse(temp) + dt.timedelta(hours=16)
    return temp

data = """\
    '12-31-2012',5100, 5200
    '01/1/2013',5300,5400"""

tdata = pd.read_csv(StringIO(data),
    names = ['date', 'field1', 'field'], index_col = None,
    parse_dates =['date'], header= None, date_parser=addtime)

print tdata 
```

产量

```
 date  field1  field
0  2012-12-31 16:00:00    5100   5200
1  2013-01-01 16:00:00    5300   5400 
```

# python - Python sys.stdin.read(1) 在 while(True) 循环中始终执行 1 次获取输入和多次未获取输入

> ID：15465089
> 
> 赞同：1
> 
> 时间：2013-03-17T19:18:29.687
> 
> 标签：python, python-2.7

我在 64 位 Windows 7 上运行 python 2.7。

这是我正在执行的代码：

```
import sys
while True:
    print 'please enter a character:'
    c = sys.stdin.read(1)
    print 'you entered', str(c) 
```

在 Eclipse 的 PyDev 环境中，我得到以下输入 a 和 b 的输出。

```
please enter a character:
a
you entered a
please enter a character:
you entered 
please enter a character:
you entered 

please enter a character:
b
you entered b
please enter a character:
you entered 
please enter a character:
you entered 

please enter a character: 
```

它正确地获取一次输入，然后执行两次跳过用户输入。

现在，当我在 python 终端中为输入 a 和 b 运行相同的代码时，我得到以下输出：

```
enter char
a
you entered a
enter char
you entered

enter char
b
you entered b
enter char
you entered

enter char 
```

这在获得用户输入和跳过用户输入后执行。

什么会导致这个问题？如何让 Python 在无限循环中一次读取一个字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T19:28:07.820

问题可能是由于标准输入的冲洗，因为`\n`徘徊。

作为替代方案，使用[`raw_input`](http://docs.python.org/2.7/library/functions.html?highlight=raw_input#raw_input)

```
while True:
    c = raw_input('please enter a character: ')
    print 'you entered', c 
```

对于冲洗部分，请参阅[this](https://stackoverflow.com/questions/2520893/how-to-flush-the-input-stream-in-python)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-07T19:18:23.480

`sys.stdin`默认情况下是行缓冲的，即在标准输入缓冲区中有*完整行*`sys.stdin.read(1)`之前，您不会返回。

 *这意味着如果您输入一个字符并`Enter`在获得第一个字符后点击`sys.stdin.read(1)`，缓冲区中有一个换行符（一个或两个字符`os.linesep`：），在下一次循环迭代时立即读取。

`Enter`您可以通过[一次只读取一个字符](https://stackoverflow.com/a/510364/4279)来避免命中( `msvcrt.getch()`)。*

# cordova - Phonegap Photoswipe 如何加载外部文件夹以显示图像

> ID：15465090
> 
> 赞同：1
> 
> 时间：2013-03-17T19:18:33.067
> 
> 标签：cordova, hyperlink, directory, external, photoswipe

我正在为我的新 android/ios 应用程序使用 Phonegap。我也在使用 photoswipe 插件。

当我的应用程序在商店中在线时，如果您加载本地网址，我将无法再编辑图片...有没有办法加载外部文件夹来显示我的图片..所以当我想添加图片时，我只是上传到在线文件夹？

我是 javascript 和 html 的 n00b，所以有人可以帮助我，并以简单的方式解释它吗？

# php - 在 Codeigniter 的表单中发布多行数据

> ID：15465091
> 
> 赞同：0
> 
> 时间：2013-03-17T19:18:36.357
> 
> 标签：php, codeigniter

我想从数据库中选择 CodeIgnigher PHP 应用程序中的一些数据，并希望进行一些更改并插入到另一个表中。我想在 IN 表中插入尽可能多的选定记录。目前我只将一行插入到 out 表中。

您能否指出，这里做错了什么。

我的桌子是。Out_Table (id, name..) 和 In_Table (id, name, quantity..)。

我的模型代码是：

```
<?php

    class ShoppingListM extends CI_Model {

    public function getData() {
        $query = $this->db->get('products');
        return $query->result();
    }

    function SaveForm($form_data) {
        $this->db->insert('SLists', $form_data);

        if ($this->db->affected_rows() == '1') {
            return TRUE;
        }

        return FALSE;
    }

}

?> 
```

查看代码：

```
 <div class="divTable">

        <fieldset>
            <!-- these will be affected by check all -->
     <div class="divRow">Product Name | Quantity | Packages</div>
            <div class="divRow"><input type="checkbox" size="100" class="checkall"> Check all</div>

            <br>

                <?php foreach ($records as $rec) {
                    ?>

                    <div class="divRow"><input type="checkbox">
                            <input size="5" type="hidden" value="<? echo $rec->id; ?>" name="id"></input>
                            <input size="20" type="text" value="<? echo $rec->name; ?>" name="name"></input>
                            <input size="5" type="text" value="" name="quantity"></input>
                            <select name="package">
                                <option name="case">Case</option>
                                <option name="box">Box</option>
                                <option name="box">Single Bottle</option>
                            </select>
                    </div>                
                    <br> 
                        <?
                    }
                    ?>

                    </fieldset> 
                    </div>
                    <div><input type="submit" name="submit"/></div>
                    </form> 
```

控制器代码：

```
class ShoppingListController extends CI_Controller {

public function index() {
    //$data['val'] = array("test1", "test2", "test3");

   // $this->load->model('HomeModel');
    //$data['records'] = $this->HomeModel->getData();

    $this->load->model('ShoppingListM');

    $data['records'] = $this->ShoppingListM->getData();

    $this->form_validation->set_rules('name', 'Name', 'required|max_length[255]');          
    $this->form_validation->set_rules('qty', 'qty', '');                    
    $this->form_validation->set_rules('package', 'Package', 'required|max_length[128]');

            if ($this->form_validation->run() == FALSE) // validation hasn't been passed
    {
        $this->load->view('ShoppingListV', $data);
    }
    else // passed validation proceed to post success logic
    {
        // build array for the model

        $form_data = array(
                        'name' => set_value('name'),
                        'quantity' => set_value('quantity'),
                        'package' => set_value('package')
                    );

        // run insert model to write data to db

                    // run insert model to write data to db

        if ($this->ShoppingListM->SaveForm($form_data) == TRUE) // the information has therefore been successfully saved in the db
        {
            redirect('ShoppingListController/success');   // or whatever logic needs to occur
        }
        else
        {
        echo 'An error occurred saving your information. Please try again later';
        // Or whatever error handling is necessary
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T23:33:36.620

好吧，我在你提供的代码中看不到 in_table/out_table 的位置。

插入很多行你想要[的 insert_batch](http://ellislab.com/codeigniter/user-guide/database/active_record.html#insert)

**文档中的示例**

```
$data = array(
   array(
      'title' => 'My title' ,
      'name' => 'My Name' ,
      'date' => 'My date'
   ),
   array(
      'title' => 'Another title' ,
      'name' => 'Another Name' ,
      'date' => 'Another date'
   )
);

$this->db->insert_batch('mytable', $data); 
```

或者，如果您不关心多个查询的维护工作，您可以循环 in_table 中的所有行并一一插入

```
$data= $this->db->get('Out_table');
try
{
    if ( $data->num_rows == 0)
         throw new Exception('table empty');

    foreach( $data->result() as $row)
    {

        //modifiy the row as u want
        $modified=$row;

        $q=$this->db->insert('in_table',$modified);
        if( ! $q )
            throw new Exception('failed to insert row id:'.$row->id);
    }
    echo $data->num_rows.'rows inserted';    
 }

catch (Exception $e)
{
    echo $e->getMessage();
 // Stop method execution with return, or use exit
    return;
} 
```

# android - 获取网页内容

> ID：15465092
> 
> 赞同：0
> 
> 时间：2013-03-17T19:18:38.067
> 
> 标签：android, multithreading

在主线程上阅读网页内容时出现一些错误

```
public class WebReader extends AsyncTask<String, String, String> {

    private String result;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
    }

    @Override
    protected String doInBackground(String... params) {
        String result;
        HttpClient client = new DefaultHttpClient();
        HttpGet request = new HttpGet(params[0]);
        ResponseHandler<String> responseHandler = new BasicResponseHandler();
        System.out.println(params[0]);
        try {
            result = client.execute(request, responseHandler);
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
        // TODO Auto-generated catch block
            e.printStackTrace();
        }
        this.result = result;
        return result;

    }

    protected void onProgressUpdate(String... progress) {

    }

    @Override
    protected void onPostExecute(String result) {
    this.result = result;
}   

    public String getResult(){
        return result;
    }

} 
```

我用这个：

```
public static void testAsync(){
    String result = null;
    WebReader wr = new WebReader();
    wr.execute("http://www.google.fr");
    result = wr.getResult();
    while(result==null){
        try {
            Thread.sleep(1000);
            result = wr.getResult();
        } catch (InterruptedException e) {
            result = "";
        }

    }
    System.out.println(result); 
} 
```

我真的找不到返回字符串的解决方案

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T13:34:01.553

我认为问题在于线路

```
this.result = result; 
```

在

```
protected void onPostExecute(String result) { 
```

因为我看不到 onPostExecute 是如何传递结果参数的，所以你分配的是 NULL。我删除了这条线，它起作用了。

# c# - 字符串中的字母替换

> ID：15465095
> 
> 赞同：3
> 
> 时间：2013-03-17T19:19:06.127
> 
> 标签：c#

我有这个简单的字母替换代码。我想补充的是，如果我将字母 A 替换为字母 T，那么所有 T 字母也会自动替换为 A。因此，如果我有一个单词“atatatat”，下面的代码会将单词更改为“tttttttt”，但应该将其更改为“tatatatat”。我怎样才能解决这个问题？

```
private void button3_Click(object sender, EventArgs e)
{
    String key= this.textBox1.Text;
    String letter1 = this.textBox2.Text;
    String letter2 = this.textBox3.Text;

    StringBuilder newKey = new StringBuilder();
    newKey.AppendLine(key);
    newKey.Replace(letter1, letter2);
    this.textBox4.Text = noviKljuc.ToString();
} 
```

我尝试添加这一行：`newKey.Replace(letter2, letter1);`但这会将单词更改为“aaaaaaaa”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T19:22:14.990

只需遍历字母并一一更改：

```
foreach(char c in key){    
    if(c==letter1){
        newKey.Append(letter2);
    }else if(c==letter2){
        newKey.Append(letter1);
    }else{
        newKey.Append(c);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T19:34:28.613

您需要遍历每个字母，检测是否继续更改，然后仅在第一个替换发生时才进行第二次替换：

```
// Check to see if we can find the 1st char to replace in the string
bool doReplace = key.Any(c => c == originalChar);

if (doReplace)
{
    foreach (char c in key)
    {
        if (c == originalChar)
        {
            newKey.Append(alternateChar);
        }
        else if (c == alternateChar)
        {
            newKey.Append(originalChar);
        }
        else
        {
            newKey.Append(c);
        }
    }
}
else
{
    newKey = key;
}

this.textBox4.Text = newKey.ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T19:55:24.290

试试这个

```
var result = String.Join("", 
   key.Select(c => c == letter2 ? letter1 : c == letter1 ? letter2 : c  )); 
```

# objective-c - 如何使用 Facebook SDK 3.2 将图片添加到 FBWebDialogs

> ID：15465099
> 
> 赞同：4
> 
> 时间：2013-03-17T19:19:24.567
> 
> 标签：objective-c, facebook

我正在使用 FBWebDialogs 视图在您的墙上发布消息。此功能已添加到 Facebook SDK 3.2

我正在创建一个多人棋盘游戏，游戏邀请可以发布到你的朋友墙上。不，我还想添加一张图片，即应用程序徽标。

我唯一得到的工作是：

```
NSMutableDictionary *params =
[NSMutableDictionary dictionaryWithObjectsAndKeys:
 @"Krudoku for iPhone, iPad and iPod touch", @"name",
 FBopponent.FBid, @"to",
 @"A multiplayer game which is a mixture of scrabble and sudoku.", @"caption",
 @"I'd like to play a game of Krudoku with you. Please go to the appstore and download Krudoku so we can play together!", @"description",
 @"http://www.facebook.com/Krudoku", @"link",
 @"http://www.krudoku.com/pictures/appicon_fb_136.png", @"picture",
 nil];

// Invoke the dialog
[FBWebDialogs presentFeedDialogModallyWithSession:nil
                                       parameters:params
                                          handler:
 ^(FBWebDialogResult result, NSURL *resultURL, NSError *error)
{
 ....
 ....
 }]; 
```

图片参数是指我的网络服务器上的图片。现在我想指的是保存在本地设备上的图片。但是像 @"file://...." 这样的东西不起作用。有谁可以帮我离开这里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:58:20.727

您必须将图片上传到网络服务器，然后使用可以访问上传图片的 URL，例如

```
http://www.myserver.com/uploads/myPicture.png 
```

另请参阅[此问题](https://stackoverflow.com/questions/11546712/facebook-fbcdn-image-is-not-allowed-in-stream)。

# c - 使用 inet_ntop() 和 inet_pton() 转换 IP 地址输入（C 编程）

> ID：15465104
> 
> 赞同：5
> 
> 时间：2013-03-17T19:19:57.167
> 
> 标签：c, sockets, inet

我正在尝试转换用户输入的 IP 地址，以便我可以对其执行一些按位运算以及已经存储在结构中的地址。然而，我的问题是，当 IP 地址被转换回来时，输出总是 255.255.255.255。例如，输入 10.0.0.1 或 192.16.2.1 始终返回 255.255.255.255。

任何帮助，将不胜感激。谢谢

```
 {
        struct sockaddr_in sa;
        char ipinput[INET_ADDRSTRLEN];

        fputs("Enter an IP Address: ", stdout);
        fflush(stdout);
        fgets(ipinput, sizeof ipinput, stdin);
        inet_pton(AF_INET, ipinput, &(sa.sin_addr));
        inet_ntop(AF_INET, &(sa.sin_addr), ipinput, INET_ADDRSTRLEN);
        printf("IP Address = \%s\ \n", ipinput);
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T19:29:51.477

你没有检查返回的值`inet_pton`，你会注意到它失败了。事实证明，它不喜欢`fgets`. 修剪它：

```
ipinput[strlen(ipinput) - 1] = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-10T06:39:56.173

试着遵循这个：

`inet_ntop(AF_INET, (void *)hent->h_addr_list[0],servIP,16);`

```
inet_pton(AF_INET, hostIP, &(sa->sin_addr)); 
```

# c# - c#中网络聊天应用程序的正确方法是什么

> ID：15465111
> 
> 赞同：0
> 
> 时间：2013-03-17T19:20:19.683
> 
> 标签：c#, chat

我正在尝试使用连接到 Web 服务器的 c# 创建一个聊天应用程序，以检查是否有可用的消息。

我已经尝试通过创建 HttpWebRequest 来每秒检查消息，但我注意到这对服务器不利，想象一下如果有成千上万的用户并且每个用户每秒发送一个 HttpWebRequest，那会很重。

我听说过一些关于同步连接的事情，但我认为它也会发送相同数量的 HttpWebRequest，（我不确定这部分）。

那么请问有人知道聊天应用程序的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T19:36:07.517

也许[SignalR](http://signalr.net/)在您的情况下可能有用。

> ASP.NET SignalR 是一个面向 ASP.NET 开发人员的新库，它可以非常简单地将实时 Web 功能添加到您的应用程序中。什么是“实时网络”功能？它是让您的服务器端代码实时将内容推送到连接的客户端的能力。

实际上使用这种技术的最典型的教程是[网络聊天](http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:12:23.110

使用 Remoting.Net 看到这个：

[http://www.codeproject.com/Articles/62813/NET-Remoting-Events-Explained](http://www.codeproject.com/Articles/62813/NET-Remoting-Events-Explained) [http://www.codeproject.com/Articles/12586/Remote-Execution-Using-NET-Remoting](http://www.codeproject.com/Articles/12586/Remote-Execution-Using-NET-Remoting)

# c# - 输入字符串格式不正确 查询字符串 datalist 购物车

> ID：15465113
> 
> 赞同：0
> 
> 时间：2013-03-17T19:20:43.980
> 
> 标签：c#, asp.net, query-string, shopping-cart, datalist

我正在尝试使用 Devart LinqConnect(Linq-to-Mysql) 在 asp.net C# 和 Mysql 中制作购物车 Web 应用程序。

I have Categories in a hierarchy when a select an category is displays the corresponding products in the ShowProducts.aspx page. 我添加了一个从查询字符串值中获取数据的数据列表。

我已分配给每个类别，例如在男士下的类别衬衫上，我已将 Id 分配给超链接，例如

```
<li><a href="ShowProducts.aspx?id=8">Mens</a><span class="rarrow">&#9654;</span>
                        <ul class="sub2">
                            <li><a href="ShowProducts.aspx?id=9">Shirts</a></li> 
```

当它被传递到其他页面 ShowProducts.aspx As S`howProducts.aspX?id=9`时，它会在 Datalist 中显示产品列表。由于它是购物车应用程序，当我单击按钮而不是添加会话购物车对象时，我有一个添加到购物车按钮它给了我一个错误：

> *指数数组的边界之外。*上`int ProductID = Convert.ToInt32(DataListProducts.DataKeyField[RowClicked]);`

这是我在 Datalist Item 命令中的代码。

```
 protected void DataListProducts_ItemCommand(object source, DataListCommandEventArgs e)
    {
        if (e.CommandName == "AddToCart")
        {
            int RowClicked = Convert.ToInt32(e.CommandArgument);
            int ProductID = Convert.ToInt32(DataListProducts.DataKeyField[RowClicked]);
            List<int> ProductsInCart = (List<int>)Session["Cart"];

            if (ProductsInCart == null)
            {

                ProductsInCart = new List<int>();
            }

            ProductsInCart.Add(ProductID);
            Session["Cart"] = ProductsInCart;
        }
    } 
```

这是我在 ShowProducts.aspx 中的 DataBindings：

```
 <asp:LinqDataSource ID="LinqDataSourceProducts" runat="server" ContextTypeName="ShoppingContext.ShoppingDataContext"
    EntityTypeName="" Select="new (ProductName, ProductUnitPrice, ProductBrand, Category, ParentID, ProductImage, ProductID)"
    TableName="Products" Where="ParentID == @ParentID1">
    <WhereParameters>
        <asp:QueryStringParameter DefaultValue="0" Name="ParentID1" QueryStringField="id"
            Type="Int64" />
    </WhereParameters>
</asp:LinqDataSource>
<asp:DataList ID="DataListProducts" runat="server" DataSourceID="LinqDataSourceProducts" 
    RepeatDirection="Horizontal" RepeatColumns="4" 
Style="margin-left: 87px" CellSpacing="50"
    CellPadding="50" onitemcommand="DataListProducts_ItemCommand">
    <ItemTemplate>
        <table style="border:5px dotted #c0c0c0">
            <tr>
                <td>
                    <asp:ImageButton ID="ImageButton1" ImageUrl='<%# GetImage(Eval("ProductImage")) %>'
                        runat="server" Width="250px" Height="270px" />
                    <br />
                    <center>
                        <asp:Label ID="Label1" runat="server" Text='<%# Eval("ProductID") %>'></asp:Label>
                        <asp:Label ID="LabelProductName" runat="server" Text='<%# Eval("ProductName") %>'></asp:Label><hr />
                    </center>
                    By : &nbsp;<b><asp:Label ID="Label2" runat="server" Text='<%# Eval("ProductBrand") %>'></asp:Label></b><br />
                    <asp:Button ID="ButtonAddToCart" runat="server" Text="Add To Cart" CommandName="AddToCart" CommandArgument='<%# Eval("ProductID") %>'
                        Style="padding-top: 3px; left: 5px" />
                </td>
            </tr>
        </table>
    </ItemTemplate>
</asp:DataList> 
```

请任何人对此有答案...请帮助..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T19:25:54.210

传递给 Convert.ToInt32 的值之一不是数字，使其失败

```
e.CommandArgument.ToString()
or
DataListProducts.DataKeyField[RowClicked] 
```

# php - 使用 While 循环 php 更新 mysql 数据库

> ID：15465114
> 
> 赞同：1
> 
> 时间：2013-03-17T19:20:59.127
> 
> 标签：php, mysql, while-loop

这已经困扰了我 3 天了。我对此很陌生，并试图弄清楚一些事情。我有一个涉及 3 个字段的表格。名字，姓氏，标记。我使用了一个 while 循环从 mysql 表生成表。我使用了一个文本框并使用循环在“ID”之后调用文本框，因此每个文本框都被唯一命名。然后，我使用 post 方法将值发送到第二页，该页面将使用用户刚刚输入的值更新“标记”列。这就是我发现问题的地方！

这是初始页面。

```
<html> 
<head><title>Please Enter Your Surname</title></head> 
<body> 
<center> 
<h2><font color=blue>Please Enter Your Surname</font></h2><p> 

<form action="insert.php" method="POST"> 

<?php

$db = mysql_connect("localhost","root","");
if (!$db)
{
    do_error("Could not connect to the server");
}

mysql_select_db("session6",$db)or do_error("Could not connect to the database");

$result = mysql_query("SELECT * FROM members ORDER BY id",$db);

$rows=mysql_num_rows($result);

if(!$rows)
{
    do_error("No results found");
}
else
{
    echo "<table border=3 cellspacing=1 cellpadding=1
    align=center bgcolor=lightblue>\n";
    echo "<caption><h2><font color=blue> Members Details    
            </font></h2></caption>\n";
    echo "<tr><th>Member Id</th><th>Firstname</th><th>Mark</th></tr>\n";
    while ($row = mysql_fetch_array($result))
    {

        echo "<tr>";
        echo "<td strong>" . $row['Id'] . "</td>";
        echo "<td strong>" . $row['Firstname'] . "</td>";?>
        <td strong><input type="text" name="<?php echo $row['Id']; ?>" size="20"></td>
        <tr>
        <?php

    }
    ?><input type="hidden" name="no_of_rows" value="<?php echo $rows; ?>">
    <?php
    echo "</table>\n";
}

mysql_close($db) or do_error("Could not close connection");

function  do_error($error)
{
    echo  $error;
    die();
}

?>
<input type="submit" value="Search"> 
<input type="reset" value="Reset"> 

</form> 

</body></html>
` 
```

然后更新在这里完成，这似乎是我遇到问题的地方：

```
<html>
<body>
<?php
$db = mysql_connect("localhost","root","");
if (!$db)
{
    do_error("Could not connect to the server");
}

mysql_select_db("marks",$db)or do_error("Could not connect to the database");

$i=1;
while ($i <= $_POST["no_of_rows"])// or $_POST["No_of_Rows"] from form
{   

    $insertsql = "UPDATE members SET mark = " . $_POST[$i] . " WHERE Id = " . $row['Id'] . ";"; 
    echo $_POST['$i'];
    $i++;

}

?>

</body></html> 
```

当我回显 $_POST[$i'] 时，它会显示正确的值，但不会更新数据库，而且我还没有准备好将笔记本电脑扔进垃圾箱！哈！我知道这很可能会很愚蠢，我只是看不到什么，因此将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:22:51.720

您在更新查询中缺少单引号。这将有助于：

```
$insertsql = "UPDATE `members` SET `mark` = '" . $_POST[$i] . "' WHERE `Id` = '" . $row['Id'] . "' ;"; 
```

您也没有运行`mysql_query`更新的查询命令

最后，您正在使用已弃用的 mysql php 命令。请改用 mysqli 或 pdo。并且不要忘记在查询中转义数据以防止 sql 注入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T23:40:26.973

问题是这里的单引号，强制字面 '$i' 这可能不是 $_POST 中的键

```
echo $_POST["$i"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-06T12:58:12.963

使用变量时无需使用引号：$_POST[$id];

# jquery - 根据另一个值的行更新一行中的值

> ID：15465115
> 
> 赞同：1
> 
> 时间：2013-03-17T19:21:02.147
> 
> 标签：jquery

我目前正在尝试更新一行的值 - 取决于使用 jQuery 的另一个值的行。

例如：

如果**Room Allocation = Pending**，则 Edit 和 Cancel 按钮出现在 Actions 下 如果**Room Allocation != Pending**则按钮 Edit 和 Decline 出现在 Actions 下

我该怎么做呢？

这是我包含的小提琴：http: [//jsfiddle.net/S9Gwy/](http://jsfiddle.net/S9Gwy/)

到目前为止，这是我的代码：

```
 $('.results_tbl').dataTable({
        "bPaginate": true,
            "bLengthChange": false,
            "bFilter": true,
            "bSort": true,
            "bInfo": false,
            "bAutoWidth": true
    });

        /*====================================

        determining whether cancel or decline
        button is going to appear depending on
        room allocation status

        =====================================*/

    // find all the booking rows

    var bookingRows = $('table tr.booking');

    // stash a reference to the row

    bookingRows.each(function () {
        var row = $(this);

        // if you can add a class of 'pending' to the status <td>, this becomes even cleaner and nicer...

        // check the contents of the status column

        if (row.find('td.status').text().toLowerCase() == 'pending') {

            // add a class to the row so the CSS can do its thing...

            row.addClass('pending');
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:34:06.413

第一个（行级）解决方案可能是这样的：

```
tr.booking .cancelall {
    display: none;
}

tr.booking.pending .cancelall {
    display: inline-block;
}

tr.booking.pending .declineall {
    display: none;
} 
```

# php - 如何启动 memcache 服务器

> ID：15465117
> 
> 赞同：-1
> 
> 时间：2013-03-17T19:21:11.817
> 
> 标签：php, apache, memcached

我在本 [手册](https://www.digitalocean.com/community/articles/how-to-install-and-use-memcache-on-ubuntu-12-04)中安装了内存缓存 。但是之后我得到了一个错误

```
echo "stats settings" | nc localhost 11211 
```

错误

```
localhost [127.0.0.1] 11211 (?) : Connection refused 
```

我找到了几个答案，但它们不起作用，例如

```
/etc/init.d/memcache start | restart 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:39:25.250

安装内存缓存：

```
apt-get install memcached 
```

创建配置：

```
vim /etc/memcached.conf

[...]
# Specify which IP address to listen on. The default is to listen on all IP addresses
# This parameter is one of the only security measures that memcached has, so make sure
# it's listening on a firewalled interface.
# -l 12.34.56.78
-l 127.0.0.1
[...] 
```

重启服务：

```
/etc/init.d/memcache restart 
```

检查状态和监听端口：

```
netstat -tap | grep memcached 
```

我希望我有所帮助。

# php - PDO 和变量 php

> ID：15465120
> 
> 赞同：-1
> 
> 时间：2013-03-17T19:21:57.773
> 
> 标签：php, variables

我想用变量替换 mysql 连接服务器信息，而不是在我这边引发错误。

```
$objDb = new PDO('mysql:host=localhost;dbname=mydb', 'root', ''); 
```

希望它看起来像这样：

我试过这个但没有成功；

```
$objDb = new PDO('mysql:host=$host;dbname=$db', $user, $pass); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:24:23.827

使用双引号：

```
$objDb = new PDO("mysql:host=$host;dbname=$db", $user, $pass); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:23:45.313

尝试：

```
$objDb = new PDO('mysql:host='.$host.';dbname='.$db, $user, $pass); 
```

或者：

```
$objDb = new PDO("mysql:host=$host;dbname=$db", $user, $pass); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T19:23:53.920

用这个：

```
// Usage:   $db = connectToDatabase($dbHost, $dbName, $dbUsername, $dbPassword);
// Pre:     $dbHost is the database hostname, 
//          $dbName is the name of the database itself,
//          $dbUsername is the username to access the database,
//          $dbPassword is the password for the user of the database.
// Post:    $db is an PDO connection to the database, based on the input parameters.
function connectToDatabase($dbHost, $dbName, $dbUsername, $dbPassword)
{
    try
    {
        return new PDO("mysql:host=$dbHost;dbname=$dbName;charset=utf8", $dbUsername, $dbPassword);
    }
    catch(PDOException $PDOexception)
    {
        exit("<p>An error ocurred: Can't connect to database. </p><p>More preciesly: ". $PDOexception->getMessage(). "</p>");
    }
} 
```

所以你可以这样做：

```
$host = 'localhost';
$user = 'root';
$databaseName = 'databaseName';
$pass = '';

$db = connectToDatabase($host, $databaseName, $user, $pass); 
```

# c++ - 默认初始化

> ID：15465122
> 
> 赞同：0
> 
> 时间：2013-03-17T19:22:09.347
> 
> 标签：c++, c++11

```
#include <iostream>

using namespace std;
class Apple
{
    public:
       int i;
       string s = "HelloWorld";
       string s1;
       bool b;
};

int main(int argc, char *argv[]) {
    Apple a; //doesn't this trigger default initialization??
    cout << a.i << a.s << a.s1 << a.b;

} 
```

如果对象是局部变量，则数据成员将被默认初始化。但这里是输出：`0HelloWorld0`. 这不是值初始化吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T19:27:32.330

> 这不是值初始化吗？？

在我的机器上，您的程序输出`-1219700747HelloWorld244`，这是默认初始化的明确指示符。

你得到`0HelloWorld0`的不是完全随机的，可能有很多原因。例如，它与您的操作系统架构有关。每个程序的所有新内存最初都归零，这就是为什么在这个简单的示例中，所有内容都设置为零。或者编译器出于性能原因静态初始化结构。

引用 12.6.2/8 的标准：

> 在非委托构造函数中，如果给定的非静态数据成员或基类不是由 mem-initializer-id 指定的（包括由于构造函数没有 ctor-initializer 而没有 mem-initializer-list 的情况）并且实体不是抽象类（10.4）的虚拟基类，则
> 
> — 如果实体是具有大括号或等号初始化器的非静态数据成员，则实体按照 8.5 中的规定进行初始化；
> 
> — 否则，如果实体是匿名联合或变体成员 (9.5)，则不执行初始化；
> 
> — 否则，实体被默认初始化（8.5）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T19:31:37.457

这是一个[简单的测试](http://liveworkspace.org/code/2iQK7b%242)，表明您的代码中没有执行任何值初始化。

```
#include <iostream>
#include <string>

using namespace std;
class Apple
{
    public:
       int i;
       string s = "HelloWorld";
       string s1;
       bool b;
};

int main() 
{
   {
     Apple a; 
     a.i = 42;
     a.b = true;
     cout << a.i << a.s << a.s1 << a.b;
   }
   {
     Apple a; 
     cout << a.i << a.s << a.s1 << a.b;
   }
   {
     Apple a{}; 
     cout << a.i << a.s << a.s1 << a.b;
   }
} 
```

输出：

```
42HelloWorld142HelloWorld10HelloWorld0 
```

如您所见，在第二种情况下，这些成员仍然包含先前分配的值。请注意，我并不是说这是保证或标准定义的行为。

在第三种情况下，您表明应该通过添加大括号来对对象进行值初始化。

如果您的编译器不支持 C++11 的统一初始化语法，您可以将其更改为以下内容以达到相同的效果。

```
Apple a = Apple(); 
```

# matlab - QAM 是最好的方法吗？

> ID：15465126
> 
> 赞同：1
> 
> 时间：2013-03-17T19:22:25.903
> 
> 标签：matlab, signal-processing

很抱歉这个菜鸟问题，因为我以前从未使用过 matlab 和信号处理。这是我想要做的：我有一个固定长度的字节数组X，现在我想将它编码为一个声音文件，我也希望这个过程是可逆的，这意味着声音可以转换回X没有错误。我在网上搜索，发现如下代码：

```
M = 16; 
x = randint(5000,1,M); 
y=modulate(modem.qammod(M),x); 
```

我的问题是，QAM 是最好的方法吗？以及如何使用它？一点点代码示例将不胜感激，谢谢！

更新#1：我试图通过声音（y）输出y，但matlab不允许我这样做，它说我只能输出浮点数。我该如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:49:01.083

如果你需要通过空中传输，我认为你面前有很多工作要做。电信系统中最难解决的问题通常是同步，这意味着您的接收器必须及时知道 QAM 符号的放置位置。这并不容易。如果您选择继续，我同意 mtrw 您应该尝试 dsp.stackexchange.com。

例如，尝试对一个简单的调制方案进行成像，其中每个位都转换为一小段正弦波，其频率取决于该位是 1 还是 0。您将如何在接收器端对此进行解码？您需要检测第一位的开始，并在接收器上运行一些自我维持的时钟以进行同步，以在它们不改变的情况下找到位，即 PLL（锁相环）。使用曼彻斯特编码可能会使这更容易，但是您仍然需要做很多工作才能使其运行。

如您所见，当您离开保存的 Matlab 港时，没有简单的解决方案 :-)

此致

# asp.net - ASP.NET MVC - 表单身份验证和 www 子域

> ID：15465127
> 
> 赞同：2
> 
> 时间：2013-03-17T19:22:31.080
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

不久前，我发布了一个关于表单身份验证随机超时的问题。我以为这个问题已经解决了，但显然不是。

所以：我将会话、成员资格提供程序和表单身份验证超时设置为 15 分钟。当我查看我的网站时，我会随机注销，但在我的问题中，我看到我主要是在指向我的网站的链接更改时注销 - 从 www.mysite.com 到 mysite.com，反之亦然。这有关系吗？如果是这样，有什么我可以做的，以便 mvc 能够识别 www。并且没有 www。版本一样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T23:11:09.447

通过 web.config 在您的 auth cookie 中专门设置 cookie 域。

其次，可能不相关但只是为了安全起见，您是否正在处理会话和表单身份验证之间的超时同步？即使它们都设置为 15 分钟，它们也可以在非常不同的时间超时

请参阅我的帖子：[Forms Authentication Timeout Logging](https://stackoverflow.com/questions/7797274/forms-authentication-timeout-logging)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:09:07.470

和之间有**很大**区别。它们将在 2 个不同的会话和 cookie 中运行。甚至搜索引擎也会将它们识别为 2 个不同的网站。`www.mysite.com``mysite.com`

您应该尝试始终使用其中 1 个的链接，并在请求开始后立即执行 301 重定向。您可以在 Global.asax 中放置一些代码来验证`BeginRequest`.

解决此问题的最佳方法是使用 IIS7 中的 Rewrite 模块，它会自动为您执行此操作。

# cuda - cuPrintf 什么都不做（程序使用固定+映射内存，CUBLAS 也是）

> ID：15465130
> 
> 赞同：0
> 
> 时间：2013-03-17T19:22:58.303
> 
> 标签：cuda

我需要从 CUDA 内核打印一些值，并尝试使用 cuPrintf。我的计算能力是 1.1，所以我不能使用 printf。程序编译正确，也没有给出任何运行时错误。但是， cuPrintf 行似乎什么也没做。以下是我尝试过的一些事情：

*   使用 -arch sm_11 编译
*   用 cudaPrintfInit 和 cudaPrintfEnd 包围每个内核调用
*   确保字符数足够小以使用默认缓冲区大小
*   确保 cudaPrintfInit 和 cudaPrintfDisplay 返回 cudaSuccess

除了常规内容之外，我的程序还使用以下内容：

*   CUBLAS 图书馆
*   页面锁定（固定）+ 映射内存

为什么对 cuPrintf 的调用没有做任何事情？

**编辑**
以下是代码中的一些相关片段：

```
__global__ void swap_rows(float *d_A, int r1, int r2, int n)
{
  int i = r1;
  int j = blockDim.x*blockIdx.x + threadIdx.x;
  cuPrintf("(%d,%d) ", i, j);

  if(j >= n) return;
  float tmp;
  tmp = d_A[L(i,j)];
  d_A[L(i,j)] = d_A[L(r2,j)];
  d_A[L(r2,j)] = tmp;
}

extern "C" float *someFunction(float *_A, float *_b, int n)
{
  int i, i_max, k, n2 = n*n;
  dim3 lblock_size(32,1);
  dim3 lgrid_size(n/lblock_size.x + 1, 1);
  float *d_A, *d_b, *d_x, *h_A, *h_b, *h_x, tmp, dotpdt;

  cublasStatus status;
  cudaError_t ret;

  if((ret = cudaSetDeviceFlags(cudaDeviceMapHost)) != cudaSuccess) {
    fprintf(stderr, "Error setting device flag: %s\n", 
            cudaGetErrorString(ret));
    return NULL;
  }

  // Allocate mem for A and copy data
  if((ret = cudaHostAlloc((void **)&h_A, n2 * sizeof(float), 
                            cudaHostAllocMapped)) != cudaSuccess) {
    fprintf(stderr, "Error allocating page-locked h_A: %s\n", 
            cudaGetErrorString(ret));
    return NULL;
  }

  if((ret = cudaHostGetDevicePointer((void **)&d_A, h_A, 0)) != cudaSuccess) {
    fprintf(stderr, "Error getting devptr for page-locked h_A: %s\n", 
            cudaGetErrorString(ret));
    return NULL;
  }

  if((ret = cudaMemcpy(h_A, _A, n2 * sizeof(float), cudaMemcpyHostToHost)) !=
      cudaSuccess) {
    fprintf(stderr, "Error copying A into h_A: %s\n", cudaGetErrorString(ret));
    return NULL;
  }

  // Some code to compute k and i_max  

  if(cudaPrintfInit() != cudaSuccess)
    printf("cudaPrintfInit failed\n");

  swap_rows<<<lgrid_size,lblock_size>>>(d_A, k, i_max, n);
  if((ret = cudaThreadSynchronize()) != cudaSuccess)
    fprintf(stderr, "Synchronize failed!\n", cudaGetErrorString(ret));

  if(cudaPrintfDisplay(stdout, true) != cudaSuccess)
    printf("cudaPrintfDisplay failed\n");
  cudaPrintfEnd();

// Some more code
} 
```

我忘了提：这些方法是单独编译的（从 main() 函数）作为动态链接模块（共享对象）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:30:35.430

想通了：我有另一个内核给出了“无效的配置参数”错误。我为该内核使用了 32*32*1 的块大小，这超出了每个块允许的最大线程数。一旦这个问题得到解决，cuPrintf 就开始工作了。

# macos - .bash_profile损坏未找到，命令未找到...帮助恢复到原来的

> ID：15465134
> 
> 赞同：1
> 
> 时间：2013-03-17T19:23:19.787
> 
> 标签：macos, bash, terminal, osx-mountain-lion, .bash-profile

我正在我的mac上安装Mongo db ...并将Mongodb / bin目录导出到PATH ..看起来我损坏了bash_profile，现在我找不到它..

这就是我所做的：

```
nano ~/.bash_profile 
```

该文件不存在，所以我继续创建一个并添加以下行

```
export PATH={$PATH}:~/mongo/bin 
```

所以现在我保存了文件 .. 按 ctrl + O 然后在提示符下按 Enter 键。然后我按 ctrl + X 退出 nano。我使用以下命令重新加载了我的 bash 配置文件：

```
$ source ~/.bash_profile. 
```

......

现在，即使是 open、clear、grep 等基本命令也会导致

**-bash：清除：找不到命令**

当我做

```
export $PATH 
```

这就是出现的...

*

> -bash：导出：`{{/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin}:/Users/pavbond007/Documents/Mongo/mongodb-osx-x86_64-2.2.3 /bin}:/Users/pavbond007/Documents/Mongo/mongodb-osx-x86_64-2.2.3/bin'：不是有效的标识符

*

我是这方面的新手..请帮助我回到我可以访问所有 mac 和 unix 命令的原始状态..

如果您需要更多详细信息，请告诉我..我的操作系统是山狮..我还安装了 XCode..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T19:52:28.513

我怀疑问题是当您不希望 $PATH 扩展时它正在扩展。导出命令没有任何不同的处理方式。Export 期望导出一个环境变量的名称，但您没有给它变量的名称，而是给它变量引用本身，它会被扩展。

想一想：

```
echo PATH 
```

输出

```
PATH 
```

然而，这

```
echo $PATH 
```

输出这个：

```
{{/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin}:/Users/pavbond007/Documents/Mongo/mongodb-osx-x86_64-2.2.3/bin}:/Users/pavbond007/Documents/Mongo/mongodb-osx-x86_64-2.2.3/bin 
```

因此，要导出 PATH 变量，请改用此方法（注意缺少美元符号）：

```
export PATH 
```

另外，我注意到您的 $PATH 中有一堆花括号。把那些拿出来。我很确定这会破坏事情。

要像您首先尝试的那样在一行中执行此操作，让我们将它们放在一起：

```
export PATH=$PATH:~/mongo/bin 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T20:06:50.660

如果要扩展标记，则必须将`$`符号放在大括号*之前。*`PATH`无论如何，在这种情况下，您甚至不需要使用它，也不需要大括号：

```
export PATH+=:~/mongo/bin 
```

# javascript - 长的单页网站在页面中间而不是顶部打开

> ID：15465135
> 
> 赞同：1
> 
> 时间：2013-03-17T19:23:27.557
> 
> 标签：javascript, html, css

我有一个长的单页网站，其中包含部分`<div id="#">`。`#services`目前，该站点在和之间的底部附近加载/打开`#contact`。当直接输入 URL 或单击链接时，如何让页面始终加载在顶部？

[现场直播。](http://frshstudio.com)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T19:31:15.173

这是因为您`autofocus="autofocus"`在靠近页面底部的联系人部分的姓名输入中设置了自动对焦属性（如下所示：）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:33:28.130

`<div id="#">`这与你的s无关。您的网站没有从顶部开始的原因是您的联系表。您的姓名输入字段有`autofocus="autofocus"`，当某物被聚焦时，浏览器将滚动到该位置。

只是改变

```
<input type="text" id="name" name="name" value="" placeholder="NAME" required="required" autofocus="autofocus"> 
```

在

```
<input type="text" id="name" name="name" value="" placeholder="NAME" required="required"> 
```

# dojo - 如何使自定义 dojo 小部件主题化？

> ID：15465137
> 
> 赞同：1
> 
> 时间：2013-03-17T19:23:35.730
> 
> 标签：dojo

在 dojo 1.8 中，我正在创建一些自定义应用程序特定的小部件，并且我希望它们与页面当前主题的样式相匹配。不幸的是，由于我的小部件不是由 Dijit 小部件组成，因此我无法弄清楚如何实现这一点。

我希望能够根据`variables.less`变量创建我的小部件样式；但是，由于我不知道在构建时要使用哪个主题，所以我不知道要使用哪个`variables.less`文件。此外，虽然`variables.less`文件定义了颜色，但它没有定义主题的其他方面，例如边框半径、间距等。

想到的另一种方法是找到由与我想要的主题相似的主题定义的现有 CSS 类，并将它们应用于我的 HTML。不过，这似乎是有限的，而且听起来可能很脆弱。

标准小部件似乎通过让每个主题“了解”他们想要显示的每个小部件来处理这个问题。我宁愿不需要修改每个主题，尽管如果需要，这是一个可以接受的后备。

关于做什么的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:55:25.960

根据IRC`layke_`的说法，`#dojo`即使在较小的版本更新中，CSS 类也可能发生变化，但它很少需要重构自定义小部件——通常只有在 dijit 中存在主要的 DOM 重组时。基于该信息，似乎使用`dijit`* CSS 类是可行的方法。

# common-lisp - 在 Common Lisp 中查找函数的数量

> ID：15465138
> 
> 赞同：8
> 
> 时间：2013-03-17T19:23:42.663
> 
> 标签：common-lisp, arity, parameter-list

我一直在做一些遗传编程，我一直在根据它们的数量将函数分成不同的函数集；这一切都相当复杂。

我想知道是否有更简单的方法可以做到这一点。例如，如果有一个函数返回给定函数的数量。

提前喝彩。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-17T21:02:48.093

对于解释函数，您应该能够使用[`function-lambda-expression`](http://www.lispworks.com/documentation/HyperSpec/Body/f_fn_lam.htm).

对于编译函数，唉，这个函数经常返回`nil`，所以你必须使用一个依赖于实现的函数（[clocc](http://clocc.sourceforge.net/) / [port](http://sds.podval.org/data/port.html) / [sys.lisp](http://clocc.hg.sourceforge.net/hgweb/clocc/clocc/raw-file/tip/src/port/sys.lisp)）：

```
(defun arglist (fn)
  "Return the signature of the function."
  #+allegro (excl:arglist fn)
  #+clisp (sys::arglist fn)
  #+(or cmu scl)
  (let ((f (coerce fn 'function)))
    (typecase f
      (STANDARD-GENERIC-FUNCTION (pcl:generic-function-lambda-list f))
      (EVAL:INTERPRETED-FUNCTION (eval:interpreted-function-arglist f))
      (FUNCTION (values (read-from-string (kernel:%function-arglist f))))))
  #+cormanlisp (ccl:function-lambda-list
                (typecase fn (symbol (fdefinition fn)) (t fn)))
  #+gcl (let ((fn (etypecase fn
                    (symbol fn)
                    (function (si:compiled-function-name fn)))))
          (get fn 'si:debug))
  #+lispworks (lw:function-lambda-list fn)
  #+lucid (lcl:arglist fn)
  #+sbcl (sb-introspect:function-lambda-list fn)
  #-(or allegro clisp cmu cormanlisp gcl lispworks lucid sbcl scl)
  (error 'not-implemented :proc (list 'arglist fn))) 
```

编辑：注意 CL 中的*arity*并不是一个真正的数字，因为 Lisp 函数除了[*需要的参数之外，还可以接受*](http://www.lispworks.com/documentation/HyperSpec/Body/03_daa.htm)[*optional*](http://www.lispworks.com/documentation/HyperSpec/Body/03_dab.htm)、[*rest*](http://www.lispworks.com/documentation/HyperSpec/Body/03_dac.htm)和[*keyword*](http://www.lispworks.com/documentation/HyperSpec/Body/03_dad.htm)参数；这就是为什么上面的函数返回参数函数的[lambda 列表](http://www.lispworks.com/documentation/HyperSpec/Body/03_d.htm)，而不是数字。[](http://www.lispworks.com/documentation/HyperSpec/Body/03_daa.htm)*`arglist`*

 *如果您只对只接受必需参数的函数感兴趣，则需要使用类似

```
(defun arity (fn)
  (let ((arglist (arglist fn)))
    (if (intersection arglist lambda-list-keywords)
        (error "~S lambda list ~S contains keywords" fn arglist)
        (length arglist)))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-25T00:21:54.137

有一个提供函数的 lambda 列表的可移植库：[https ://github.com/Shinmera/trivial-arguments](https://github.com/Shinmera/trivial-arguments)

```
(ql:quickload "trivial-arguments") 
```

例子：

```
(arg:arglist #'gethash)
;; => (sb-impl::key hash-table &optional sb-impl::default)

(defun foo (a b c &optional d) nil)
(arglist #'foo)  ;; => (a b c &optional d) 
```

它返回完整的 lambda 列表，带有`&optional`和东西，所以我们不能只得到`length`arity 的结果。*

# r - scale_x_discrete 不显示数据一些数据并隐藏另一个

> ID：15465141
> 
> 赞同：1
> 
> 时间：2013-03-17T19:23:48.840
> 
> 标签：r, ggplot2

我想绘制一个按财政年度显示数据的图表。我遇到的问题是**ggplot 显示的点在包含信息的数据框中不存在，而不是绘制另一个真正存在的点**。请问ggplot的高手能帮帮我吗？非常感谢！！

代码是：

```
 plot = ggplot(data = headcountPerMonth,
              aes(x = Month.Number, 
                  y = Headcount, 
                  group = Fiscal.Year, 
                  colour = Fiscal.Year)) +
       geom_line() +    
       geom_point() +  
       labs(colour = "Fiscal year") +
       scale_x_discrete(
         name = "Month", 
         labels = headcountPerMonth$Month.Name
       ) +
       scale_y_continuous(name = "Headcount");
    print(plot); 
```

剧情是下一个。如您所见，有**一个值 Month = March, Fiscal.Year = 2012，但在 Month = June, Fiscal.Year = 2012 上没有**。

![在此处输入图像描述](../Images/3fa38380976624e4f74fcbc1a25b22b5.png)

图中的数据是下一个。如您所见**，没有值 Month = March, Fiscal.Year = 2012 ，但存在于 Month = June, Fiscal.Year = 2012**上。

```
 Month Headcount Fiscal.Year Month.Number Month.Name
1  2010-04-01        48        2010            4        abr
2  2010-05-01        49        2010            5        may
3  2010-06-01        52        2010            6        jun
4  2010-07-01        51        2010            7        jul
5  2010-08-01        51        2010            8        ago
6  2010-09-01        51        2010            9        sep
7  2010-10-01        52        2010           10        oct
8  2010-11-01        54        2010           11        nov
9  2010-12-01        54        2010           12        dic
10 2011-01-01        56        2010            1        ene
11 2011-02-01        56        2010            2        feb
12 2011-03-01        61        2010            3        mar
13 2011-04-01        61        2011            4        abr
14 2011-05-01        59        2011            5        may
15 2011-06-01        59        2011            6        jun
16 2011-07-01        61        2011            7        jul
17 2011-08-01        59        2011            8        ago
18 2011-09-01        58        2011            9        sep
19 2011-10-01        59        2011           10        oct
20 2011-11-01        65        2011           11        nov
21 2011-12-01        68        2011           12        dic
22 2012-01-01        72        2011            1        ene
23 2012-02-01        72        2011            2        feb
24 2012-03-01        72        2011            3        mar
25 2012-04-01        77        2012            4        abr
26 2012-05-01        77        2012            5        may
27 2012-06-01        80        2012            6        jun
28 2012-07-01        80        2012            7        jul
29 2012-08-01        77        2012            8        ago
30 2012-09-01        81        2012            9        sep
31 2012-10-01        86        2012           10        oct
32 2012-11-01        86        2012           11        nov
33 2012-12-01        85        2012           12        dic
34 2013-01-01        88        2012            1        ene
35 2013-02-01        86        2012            2        feb 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T20:23:05.217

由于`Month.Number`数据中的变量是数字，因此出现问题。当您使用 in 时，`ggplot()`值是从 绘制的`1:12`，而不是从`4:12`和`1:3`您期望的那样。

要解决该问题，您可以`Month.Number`按预期顺序转换为具有级别的因子（也可以在内部`aes()`使用 function完成`factor()`）。

```
ggplot(data = headcountPerMonth,
       aes(x = factor(Month.Number,levels=c(4:12,1,2,3)), 
           y = Headcount, group = Fiscal.Year, 
           colour = as.factor(Fiscal.Year))) +
  geom_line() +    
  geom_point() +  
  labs(colour = "Fiscal year") +
  scale_y_continuous(name = "Headcount")+
  scale_x_discrete(name = "Month", labels = headcountPerMonth$Month.Name) 
```

# r - R quantmod 交易信号和模拟

> ID：15465144
> 
> 赞同：2
> 
> 时间：2013-03-17T19:23:54.247
> 
> 标签：r, quantmod, trading

我想使用 R 的 quantmod 包来测试一些交易股票的技术指标。我的目标是在股票代码上自动运行指标，结果告诉我如果我严格遵循指标（例如 MACD），我的表现会怎样。

网站 www.quantmod.com 很有趣，但是作者似乎几年前就停止了更新。

到目前为止我能做的：使用绘图功能通过包“quantmod”获取股票符号并直观地解释它们。例如，当两条线相互交叉时，使用 MACD 的一个交易信号。

我不能做什么（但想做）： - 自动直观地指示信号（显示），例如在图中使用箭头或任何图形符号 - 模拟：每次信号到达时自动交易（买入或卖出）和最后告诉我这个技术指标是否对特定股票或指数有用。

这是绘图的一些基本代码：

```
require(quantmod)
getSymbols("IBM", source="google")
chartSeries(IBM, subset="last 10 weeks", type="candles")
addMACD() 
```

我希望我能解释我在寻找什么。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T19:48:47.647

您可能想查看吸墨纸和 quantstrat 软件包。Ao 那里的 chart.Posn() 函数将为您提供您正在寻找的图，并且还包括 PL 和 DD 曲线。

高温下，

简·休姆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T22:07:39.580

您要问的内容有几个。我会尝试逐条回答。

> 自动直观地指示信号（显示），例如在图中使用箭头或任何图形符号

您可以使用 绘制符号`par(new=TRUE); points(.........)`。退房`?pch`。

> 模拟：自动交易（买入或卖出）

目前尚不清楚您是要模拟交易还是实际交易。如果是后者，那就是另一个连接到您的交易平台的蜡球。如果是前者，[quantstrat 提供了一个通用的基础设施来建模和回测基于信号的量化策略](http://blog.fosstrading.com/2011/08/introduction-to-quantstrat.html)。

> 每次信号到达

你的数据来自哪里？这些是您需要自己连接的其他一些电线；它不会是“自动的”。

> 并在最后告诉我这个技术指标是否有用

这是你需要定义的东西。

# php - jQuery ajaxForm 插件 - 从 beforeSend 回调结果提交值

> ID：15465155
> 
> 赞同：3
> 
> 时间：2013-03-17T19:24:44.213
> 
> 标签：php, jquery, ajax, forms, plugins

我正在使用[这个 jQuery ajaxForm 插件](http://www.malsup.com/jquery/form/#getting-started)将文件上传到我的服务器，并显示文件上传的进度（因为它主要用于视频上传）。我已经让这一切都按照我想要的方式正常工作，但是我不知道如何实现我想要做的事情。

所以我想要做的是：

1.  提交表单 - 在数据库中创建新行
2.  从中返回 uniqueID 并与文件上传一起提交

我需要/想要这样做的原因是，当有人上传视频时，我想让他们填写视频详细信息（视频标题、描述等）并在视频仍在上传时保存这些信息。所以要做到这一点，我需要在数据库中创建一行，以便创建该视频的唯一 ID，然后将该值返回给视频上传本身，以便它可以使用视频上传详细信息修改该行，并使用该唯一 ID 所以当用户保存视频信息时，它知道将要播放哪个视频。

```
$('.upload-page form.video-upload').ajaxForm({
url: "ajax/upload.php",
data: {videoID: "videoID"}, //would I be able to modify this from beforeSend?
beforeSend: function() {

//This would be where I would make an ajax call to create the row in the database
    //then i would need to return the value from here to the upload form somehow?   

},
uploadProgress: function(event, position, total, percentComplete) {

    //returns back video upload progress
},
complete: function(xhr) {

           //Upload complete        

}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:48:10.413

我会尝试使用 jquery 的追加添加 `<input type="hidden" value"(id)" name="video_id" />`到表单或序列化表单并将 id 添加到字符串的末尾。

但是，根据您在另一端处理视频上传的方式，您可能无法在上传完成之前获取 id。我从来没有用更大的文件做过这样的事情。

# c# - 通过控制器类从 web 服务返回对象返回一个空对象

> ID：15465160
> 
> 赞同：1
> 
> 时间：2013-03-17T19:24:50.460
> 
> 标签：c#, web-services, object, guid

我正在用我的数据库中的数据构建我的对象，到目前为止一切都很好

```
 public static List<ImageData> GetAllImageData(Guid UserId)
    {
        List<ImageData> imageDataList = new List<ImageData>();
        try
        {
            SqlCommand cmd = DBHandler.getCommand("sp_Get_AllImagesForWebUser");
            DBHandler.AddParameter(ref cmd, "@UserId", UserId);
            foreach (DataRow row in DBHandler.ExecuteSP(cmd).Tables[0].Rows)
            {
                LogWriter.Print("imagedatacontroller() new Guid(row[ImageId].ToString()): " + new Guid(row["ImageId"].ToString()), LogLevel.DEBUG);
                imageDataList.Add(
                    new ImageData(new Guid(row["ImageId"].ToString()), new Guid(row["UserId"].ToString()), row["ImagePath"].ToString(), (int)row["PatientId"], row["BodyPart"].ToString(), row["ReasonForVisit"].ToString(), row["Diagnosis"].ToString(), Convert.ToBoolean(row["ConsentForResearch"]), Convert.ToBoolean(row["ConsentForEducation"]), Convert.ToBoolean(row["ConsentForStorage"]))
                    );
            }
        }
        catch (Exception e)
        {
            LogWriter.Print("Exception: ImageDataController->GetAllImageData() " + e, LogLevel.EXCEPTION);
        }
        return imageDataList;
    } 
```

然后我有一个公开函数并返回 ImageData 列表的 web 服务 (.ASMX)

```
 [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public List<ImageData> GetImageDataFromUser(string UserId)
    {
        return ImageDataController.GetAllImageData(new Guid(UserId));
    } 
```

但问题是 ImageData 的两个 Guid 属性（ImageId 和 UserId）是一个只有零值的 Guid，我不知道为什么。我已经用我的 LogWriter 验证了它是一个有效且正确的 Guid，但是一旦我尝试通过我的 web 服务公开它，它就只有零 guid。

这就是我的 SOAP 的样子

```
<ArrayOfImageData xmlns="http://172.18.67.166:147/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 
    <ImageData> 
        <ImageId>00000000-0000-0000-0000-000000000000</ImageId> 
        <UserId>00000000-0000-0000-0000-000000000000</UserId> 
        <ImagePath>C:\inetpub\wwwroot\Omegapoint\data\UploadedImages\0416f1aa-9b57-4ba8-be54-398ffa9d7139.PNG</ImagePath> 
        <PatientId>0</PatientId> 
        <CreationDate>2013-03-17T22:08:10.1964107+01:00</CreationDate> 
        <Bodypart/> 
        <ReasonForVisit/> 
        <Diagnosis/> 
        <ConsentForResearch>false</ConsentForResearch> 
        <ConsentForEducation>false</ConsentForEducation>
        <ConsentForStorage>false</ConsentForStorage> 
    </ImageData>
</ArrayOfImageData> 
```

但 ImageId 应该是：

```
0416f1aa-9b57-4ba8-be54-398ffa9d7139 
```

UserId 应该是：

```
4bcd23a9-2815-42ef-b9ea-671b2aa08aa3 
```

# c# - 给出一些命令在 MVVM 中查看

> ID：15465161
> 
> 赞同：18
> 
> 时间：2013-03-17T19:25:01.030
> 
> 标签：c#, .net, wpf, mvvm

假设我有一些用户控制。用户控件有一些子窗口。并且用户控制用户想要关闭某种类型的子窗口。后面的用户控制代码中有一个方法：

```
public void CloseChildWindows(ChildWindowType type)
{
   ...
} 
```

但是我不能调用这个方法，因为我没有直接访问视图的权限。

我考虑的另一个解决方案是以某种方式将用户控件 ViewModel 公开为其属性之一（这样我就可以绑定它并直接向 ViewModel 发出命令）。但我不希望用户控件用户了解有关用户控件 ViewModel 的任何信息。

那么解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-20T00:14:51.200

我觉得我刚刚找到了一个相当不错的 MVVM 解决方案来解决这个问题。我写了一个暴露类型属性`WindowType`和布尔属性的行为`Open`。DataBinding 后者允许 ViewModel 轻松打开和关闭窗口，而无需了解有关 View 的任何信息。

必须爱行为... :)

![在此处输入图像描述](../Images/6fec8683306798a67f0f72fffe5a1d53.png)

xml:

```
<UserControl x:Class="WpfApplication1.OpenCloseWindowDemo"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:WpfApplication1"
             xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">

    <UserControl.DataContext>
        <local:ViewModel />
    </UserControl.DataContext>
    <i:Interaction.Behaviors>
        <!-- TwoWay binding is necessary, otherwise after user closed a window directly, it cannot be opened again -->
        <local:OpenCloseWindowBehavior WindowType="local:BlackWindow" Open="{Binding BlackOpen, Mode=TwoWay}" />
        <local:OpenCloseWindowBehavior WindowType="local:YellowWindow" Open="{Binding YellowOpen, Mode=TwoWay}" />
        <local:OpenCloseWindowBehavior WindowType="local:PurpleWindow" Open="{Binding PurpleOpen, Mode=TwoWay}" />
    </i:Interaction.Behaviors>
    <UserControl.Resources>
        <Thickness x:Key="StdMargin">5</Thickness>
        <Style TargetType="Button" >
            <Setter Property="MinWidth" Value="60" />
            <Setter Property="Margin" Value="{StaticResource StdMargin}" />
        </Style>
        <Style TargetType="Border" >
            <Setter Property="Margin" Value="{StaticResource StdMargin}" />
        </Style>
    </UserControl.Resources>

    <Grid>
        <StackPanel>
            <StackPanel Orientation="Horizontal">
                <Border Background="Black" Width="30" />
                <Button Content="Open" Command="{Binding OpenBlackCommand}" CommandParameter="True" />
                <Button Content="Close" Command="{Binding OpenBlackCommand}" CommandParameter="False" />
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <Border Background="Yellow" Width="30" />
                <Button Content="Open" Command="{Binding OpenYellowCommand}" CommandParameter="True" />
                <Button Content="Close" Command="{Binding OpenYellowCommand}" CommandParameter="False" />
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <Border Background="Purple" Width="30" />
                <Button Content="Open" Command="{Binding OpenPurpleCommand}" CommandParameter="True" />
                <Button Content="Close" Command="{Binding OpenPurpleCommand}" CommandParameter="False" />
            </StackPanel>
        </StackPanel>
    </Grid>
</UserControl> 
```

YellowWindow（黑色/紫色类似）：

```
<Window x:Class="WpfApplication1.YellowWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="YellowWindow" Height="300" Width="300">
    <Grid Background="Yellow" />
</Window> 
```

视图模型，动作命令：

```
using System;
using System.ComponentModel;
using System.Windows.Input;

namespace WpfApplication1
{
    public class ViewModel : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;
        private void OnPropertyChanged(string propertyName)
        {
            if (this.PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }

        private bool _blackOpen;
        public bool BlackOpen { get { return _blackOpen; } set { _blackOpen = value; OnPropertyChanged("BlackOpen"); } }

        private bool _yellowOpen;
        public bool YellowOpen { get { return _yellowOpen; } set { _yellowOpen = value; OnPropertyChanged("YellowOpen"); } }

        private bool _purpleOpen;
        public bool PurpleOpen { get { return _purpleOpen; } set { _purpleOpen = value; OnPropertyChanged("PurpleOpen"); } }

        public ICommand OpenBlackCommand { get; private set; }
        public ICommand OpenYellowCommand { get; private set; }
        public ICommand OpenPurpleCommand { get; private set; }

        public ViewModel()
        {
            this.OpenBlackCommand = new ActionCommand<bool>(OpenBlack);
            this.OpenYellowCommand = new ActionCommand<bool>(OpenYellow);
            this.OpenPurpleCommand = new ActionCommand<bool>(OpenPurple);
        }

        private void OpenBlack(bool open) { this.BlackOpen = open; }
        private void OpenYellow(bool open) { this.YellowOpen = open; }
        private void OpenPurple(bool open) { this.PurpleOpen = open; }

    }

    public class ActionCommand<T> : ICommand
    {
        public event EventHandler CanExecuteChanged;
        private Action<T> _action;

        public ActionCommand(Action<T> action)
        {
            _action = action;
        }

        public bool CanExecute(object parameter) { return true; }

        public void Execute(object parameter)
        {
            if (_action != null)
            {
                var castParameter = (T)Convert.ChangeType(parameter, typeof(T));
                _action(castParameter);
            }
        }
    }
} 
```

打开关闭窗口行为：

```
using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Interactivity;

namespace WpfApplication1
{
    public class OpenCloseWindowBehavior : Behavior<UserControl>
    {
        private Window _windowInstance;

        public Type WindowType { get { return (Type)GetValue(WindowTypeProperty); } set { SetValue(WindowTypeProperty, value); } }
        public static readonly DependencyProperty WindowTypeProperty = DependencyProperty.Register("WindowType", typeof(Type), typeof(OpenCloseWindowBehavior), new PropertyMetadata(null));

        public bool Open { get { return (bool)GetValue(OpenProperty); } set { SetValue(OpenProperty, value); } }
        public static readonly DependencyProperty OpenProperty = DependencyProperty.Register("Open", typeof(bool), typeof(OpenCloseWindowBehavior), new PropertyMetadata(false, OnOpenChanged));

        /// <summary>
        /// Opens or closes a window of type 'WindowType'.
        /// </summary>
        private static void OnOpenChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            var me = (OpenCloseWindowBehavior)d;
            if ((bool)e.NewValue)
            {
                object instance = Activator.CreateInstance(me.WindowType);
                if (instance is Window)
                {
                    Window window = (Window)instance;
                    window.Closing += (s, ev) => 
                    {
                        if (me.Open) // window closed directly by user
                        {
                            me._windowInstance = null; // prevents repeated Close call
                            me.Open = false; // set to false, so next time Open is set to true, OnOpenChanged is triggered again
                        }
                    }; 
                    window.Show();
                    me._windowInstance = window;
                }
                else
                {
                    // could check this already in PropertyChangedCallback of WindowType - but doesn't matter until someone actually tries to open it.
                    throw new ArgumentException(string.Format("Type '{0}' does not derive from System.Windows.Window.", me.WindowType));
                }
            }
            else 
            {
                if (me._windowInstance != null)
                    me._windowInstance.Close(); // closed by viewmodel
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-19T20:12:24.600

过去我通过引入 a 的概念来处理这种情况`WindowManager`，这是一个*可怕*的名字，所以让我们将它与 a 配对`WindowViewModel`，它只是稍微不那么可怕 - 但基本思想是：

```
public class WindowManager
{
    public WindowManager()
    {
        VisibleWindows = new ObservableCollection<WindowViewModel>();
        VisibleWindows.CollectionChanged += OnVisibleWindowsChanged;            
    }
    public ObservableCollection<WindowViewModel> VisibleWindows {get; private set;}
    private void OnVisibleWindowsChanged(object sender, NotifyCollectionChangedEventArgs args)
    {
        // process changes, close any removed windows, open any added windows, etc.
    }
}

public class WindowViewModel : INotifyPropertyChanged
{
    private bool _isOpen;
    private WindowManager _manager;
    public WindowViewModel(WindowManager manager)
    {
        _manager = manager;
    }
    public bool IsOpen 
    { 
        get { return _isOpen; } 
        set 
        {
            if(_isOpen && !value)
            {
                _manager.VisibleWindows.Remove(this);
            }
            if(value && !_isOpen)
            {
                _manager.VisibleWindows.Add(this);
            }
            _isOpen = value;
            OnPropertyChanged("IsOpen");
        }
    }    

    public event PropertyChangedEventHandler PropertyChanged = delegate {};
    private void OnPropertyChanged(string name)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(name));
    }
} 
```

注意：我只是很随意地把它放在一起；您当然希望根据您的特定需求调整这个想法。

但是任何人，基本前提是您的命令可以在`WindowViewModel`对象上工作，适当地切换`IsOpen`标志，并且管理器类处理打开/关闭任何新窗口。有几十种*可能的*方法可以做到这一点，但它在过去对我来说很有效（当实际实施而不是在我的手机上扔在一起时）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-21T13:10:21.613

对于纯粹主义者来说，一个合理的方法是创建一个处理您的导航的服务。简短摘要：创建一个 NavigationService，在 NavigationService 中注册您的视图并使用视图模型中的 NavigationService 进行导航。

例子：

```
class NavigationService
{
    private Window _a;

    public void RegisterViewA(Window a) { _a = a; }

    public void CloseWindowA() { a.Close(); }
} 
```

要获得 NavigationService 的引用，您可以在其之上进行抽象（即 INavigationService）并通过 IoC 注册/获取它。更恰当地说，您甚至可以进行两种抽象，一种包含注册方法（由视图使用），另一种包含执行器（由视图模型使用）。

有关更详细的示例，您可以查看严重依赖 IoC 的 Gill Cleeren 的实现：

[http://www.silverlightshow.net/video/Applied-MVVM-in-Win8-Webinar.aspx](http://www.silverlightshow.net/video/Applied-MVVM-in-Win8-Webinar.aspx)开始于 00:36:30

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-17T19:47:18.760

实现这一点的一种方法是让视图模型请求关闭子窗口：

```
public class ExampleUserControl_ViewModel
{
    public Action ChildWindowsCloseRequested;

    ...
} 
```

然后视图将订阅其视图模型的事件，并在它被触发时关闭窗口。

```
public class ExampleUserControl : UserControl
{
    public ExampleUserControl()
    {
        var viewModel = new ExampleUserControl_ViewModel();
        viewModel.ChildWindowsCloseRequested += OnChildWindowsCloseRequested;

        DataContext = viewModel;
    }

    private void OnChildWindowsCloseRequested()
    {
        // ... close child windows
    }

    ...
} 
```

所以这里的视图模型可以确保子窗口在不了解视图的情况下关闭。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-08T07:29:00.387

这个问题的大多数答案都涉及到一个由 ViewModel 控制的状态变量，而 View 会根据这个变量的变化而采取行动。这适用于**有状态的命令**，例如打开或关闭窗口，或者只是显示或隐藏某些控件。但它不适用于**无状态事件命令**。您可以在信号的上升沿触发一些动作，但需要再次将信号设置为低电平（假），否则它不会再次触发。

我写了一篇关于解决这个问题的**ViewCommand 模式的文章。**它基本上是从 View 到当前 ViewModel 的常规命令的相反方向。它涉及一个接口，每个 ViewModel 都可以实现该接口以向所有当前连接的视图发送命令。View 可以扩展为在其 DataContext 属性更改时向每个分配的 ViewModel 注册。此注册将视图添加到 ViewModel 中的视图列表中。每当 ViewModel 需要在 View 中运行命令时，它都会遍历所有已注册的 View 并在它们存在时对其运行命令。这利用反射来查找 View 类中的 ViewCommand 方法，但反方向的 Binding 也是如此。

View 类中的 ViewCommand 方法：

```
public partial class TextItemView : UserControl
{
    [ViewCommand]
    public void FocusText()
    {
        MyTextBox.Focus();
    }
} 
```

这是从 ViewModel 调用的：

```
private void OnAddText()
{
    ViewCommandManager.Invoke("FocusText");
} 
```

这篇文章可以[在我的网站上找到，也可以](http://unclassified.software/source/viewcommand)[在 CodeProject 上](http://www.codeproject.com/Articles/554677/View-control-from-a-ViewModel-with-ViewCommands)找到旧版本。

包含的代码（BSD 许可证）提供了在代码混淆期间允许重命名方法的措施。

# android - 如何在imageview中显示图像的原始大小

> ID：15465168
> 
> 赞同：2
> 
> 时间：2013-03-17T19:25:59.713
> 
> 标签：android, camera, imageview

我正在制作一个应用程序，您可以在其中单击按钮并拍照，然后在拍照后我想在图像视图中显示它。

我为此使用此代码：

```
@Override
public void onActivityCreated (Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);    

    Button b = (Button) getView().findViewById(R.id.button1);
    b.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {           
            try {
                Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
                cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, mImageCaptureUri);
                startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);
            } catch(ActivityNotFoundException e){
                Toast.makeText(getActivity(), "Your device does not have a camera", Toast.LENGTH_SHORT).show();
            }    
        }           
    }); 

    send = (Button) getView().findViewById(R.id.button2);
    send.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Toast.makeText(getActivity(), "Uploading image...", Toast.LENGTH_LONG).show();
            new uploadtoserver().execute();
        }           
    });
}

public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == CAMERA_PIC_REQUEST) {
        if (data != null) {
            Bitmap thumbnail = (Bitmap) data.getExtras().get("data");               
            ImageView image = (ImageView) getView().findViewById(R.id.imageView1);  
            //image.setImageBitmap(thumbnail);  

            send.setVisibility(Button.VISIBLE);

            // CALL THIS METHOD TO GET THE URI FROM THE BITMAP
            Uri tempUri = getImageUri(getActivity(), thumbnail);
            // CALL THIS METHOD TO GET THE ACTUAL PATH
            finalFile = new File(getRealPathFromURI(tempUri));

            Bitmap bmImg = BitmapFactory.decodeFile(finalFile.toString());

            image.setImageBitmap(bmImg);

            System.out.println(finalFile);
        }
    }
} 
```

这是imageview的xml部分

但它显示图像被裁剪和丑陋（不是原始尺寸）

如何让它在imageview中显示照片的原始大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:43:27.707

额外返回的图像数据`Intent`是捕获图像的缩小版本，适用于缩略图。全尺寸图像将写入您`EXTRA_OUTPUT`在请求中作为 Uri 传递的文件位置。如果您想使用完整图像本身，则需要查看那里。

请记住，Android 只保证一个或另一个，因此您传递一个`EXTRA_OUTPUT`位置，但也在“数据”字段中查找返回的结果这一事实不适用于所有设备......这不是框架向您保证（[有关更多信息的文档](http://developer.android.com/reference/android/provider/MediaStore.html#ACTION_IMAGE_CAPTURE)）。你应该只期望从你在请求中提供的 Uri 中读取文件。如果图像没有写入那里，那是因为相机应用程序无法访问您提供的 Uri 位置，它必须是公共位置的有效路径（如外部存储，而不是应用程序私有内部存储）。

# mysql - 查询省略零行

> ID：15465170
> 
> 赞同：0
> 
> 时间：2013-03-17T19:26:05.423
> 
> 标签：mysql, sql

这是我的查询：

```
 SELECT 
    [ASACCT].ACCT_MO_I as 'Types'
    ,sum(CASE when [TECH_V].[CLOS_T]='N4'  THEN 1 ELSE 0 END) AS 'N4'
    ,SUM(CASE when [TECH_V].[CLOS_T]='N3'  THEN 1 ELSE 0 END) AS 'N3'
    ,SUM(CASE when [TECH_V].[CLOS_T]='N2'  THEN 1 ELSE 0 END) AS 'N2'
  FROM [supt_oper_anls_dw].[dbo].[TECH_V] as [TECH_V]
   LEFT OUTER JOIN [supt_oper_anls_dw].[dbo].ACCT_DATE_DIM AS [ASACCT]
     ON CONVERT(varchar(10), [ASACCT].GREG_D, 101)
      = CONVERT(varchar(10), [TECH_V].[OPEN_TS], 101)
  WHERE [TECH_INCDT_V].[KGRP_I] ='73fd71ecf84f5080217683869fd819c3'
    and (
          ([ASACCT].ACCT_MO_I > (datepart(MONTH,getdate()))-1-6
       and [ASACCT].ACCT_MO_I <=(datepart(MONTH,getdate()))-1
       and [ASACCT].ACCT_YR_I = (datepart(year,getdate()))
          )
       OR ([ASACCT].ACCT_MO_I > (datepart(MONTH,getdate()))-6-1+12
       and [ASACCT].ACCT_YR_I = (datepart(year,getdate()))-1
          )
        )
    and [TECH_V].Notes like '%MFTFD%'
    and [TECH_V].notes like '%DEV%'
  GROUP BY [ASACCT].ACCT_MO_I,  [ASACCT].ACCT_YR_I 
```

不显示零行。在某些情况下，例如在我的 TECH_V 表中，我提供的 where 子句不可能没有数据。但是我希望输出显示为零..而是省略了整行。

我想要像下面这样的输出

```
1  1  2  3 
2  4  5  6
3  0  0  0
4  2  5  4
5  2  5  6
6  0  0  0 
```

但在我的实际输出中，第 3 和第 6 被淘汰了。

代码逻辑是正确的..因为它适用于其他 where 子句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:41:36.690

您必须交换您的餐桌顺序：

```
SELECT 
...
FROM [supt_oper_anls_dw].[dbo].ACCT_DATE_DIM AS [ASACCT] 
LEFT OUTER JOIN [supt_oper_anls_dw].[dbo].[TECH_V] as [TECH_V]
... 
```

# ios - 过滤 Mkoverlay 数组

> ID：15465172
> 
> 赞同：0
> 
> 时间：2013-03-17T19:26:13.567
> 
> 标签：ios, objective-c, mkmapview, mkoverlay

我正在尝试使用谓词过滤掉 MKOverlays 数组，但我遇到了异常。

```
 NSArray *pointsArray = [viewController.mapView overlays];
    MKPolyline *myLine = (MKPolyline *)[pointsArray objectAtIndex:0];
    NSMutableArray *mutablePonts = [pointsArray mutableCopy];

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"title != TRIP"];
    [mutablePonts filterUsingPredicate:predicate]; 
```

我想过滤掉那些标题为 TRIP 的叠加层。我得到了例外

[ valueForUndefinedKey:]：这个类不符合键 TRIP 的键值编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:24:04.870

您需要在`TRIP`.

# ios - 从特定 url 提取数据时 NSJSONSerialization 崩溃

> ID：15465178
> 
> 赞同：0
> 
> 时间：2013-03-17T19:26:51.960
> 
> 标签：ios, objective-c, xcode, json, nsjsonserialization

我正在尝试从此 url 中提取数据，但遇到了一些问题。为什么会在上`NSJSONSerialization`线时崩溃？有没有更好的方法从这个网站下载信息？

编辑：我将 jsonArray 从 NSArray 更改为 NSDictionary，但它仍然在同一个地方崩溃。有没有其他方法可以下载这些数据？

```
NSString *url=@"https://api.p04.simcity.com/simcity/rest/users/search/J3d1.json";

NSURLRequest *theRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:url]];

NSURLResponse *resp = nil;
NSError *err = nil;

NSData *response = [NSURLConnection sendSynchronousRequest: theRequest returningResponse: &resp error: &err];

NSDictionary *jsonArray = [NSJSONSerialization JSONObjectWithData: response options: NSJSONReadingMutableContainers error: &err];

NSLog(@"%@",jsonArray); 
```

作为参考，JSON 是：

```
{
    "users": [
        {
            "uri": "/rest/user/20624",
            "tutorialState": 0,
            "nucleusId": 20624,
            "id": 20624,
            "screenName": "R3DEYEJ3D1",
            "lastLogin": 1362666027000,
            "isOnline": "true",
            "avatarImage": "https://api.p04.simcity.com/simcity/rest/user/20624/avatar",
            "cities_count": 0,
            "canChat": "true"
        },
        {
            "uri": "/rest/user/46326",
            "tutorialState": 0,
            "nucleusId": 46326,
            "id": 46326,
            "screenName": "J3D1_WARR10R",
            "lastLogin": 1363336534000,
            "isOnline": "false",
            "avatarImage": "https://api.p04.simcity.com/simcity/rest/user/46326/avatar",
            "cities_count": 0,
            "canChat": "true"
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T19:34:57.237

您的服务器提供了一个不受操作系统信任的证书 - 我必须在您的 JSON 中使用该`-k`标志，`curl`所以应该早点想到这一点。

为了解决这个问题，您需要切换到使用异步`NSURLConnection`并实现其委托方法。[请参阅此堆栈溢出问题](https://stackoverflow.com/questions/1578121/https-with-nsurlconnection-nsurlerrorservercertificateuntrusted)中的此答案，以实施针对您的解析问题的有效解决方案。我在应用程序委托中实现了它，但是您可以例如将它放在异步中`NSOperation`并在那里使用它。

**警告：此代码将连接到任何服务器，无论信任如何。这是要求一个人在中间攻击。启用此类信任时，请勿将敏感信息发送到服务器**。您必须实现代码来验证您的服务器的身份，并用针对该检查结果的测试替换`if (YES)`in 。`- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge`

我目前的理解是，这应该通过将您的证书的公钥作为 DER 文件包含在应用程序包中来完成，并使用`SecCertificateCreateWithData`创建一个`SecCertficiateRef`将用作`SecTrustSetAnchorCertificates`. 然后，`SecTrustEvaluate`应该用来验证身份。我基于阅读[证书、密钥和信任服务参考以及在](https://developer.apple.com/library/mac/#documentation/security/Reference/certifkeytrustservices/Reference/reference.html)[这篇博客文章](http://blog.wingsofhermes.org/?p=58)中找到的关于如何信任您自己的证书的示例代码来理解这一点。

```
@interface AppDelegate () <NSURLConnectionDelegate, NSURLConnectionDataDelegate>

//  This is needed to collect the response as it comes back from the server
@property (nonatomic, strong) NSMutableData *mutableResponseData;

@end

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Xcode template code for setting up window, ignore...
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil];
    } else {
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil];
    }
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    //  Instantiate our connection 
    NSString *urlString = @"https://api.p04.simcity.com/simcity/rest/users/search/J3d1.json";
    NSURL *url = [NSURL URLWithString:urlString];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    if(![NSURLConnection connectionWithRequest:request delegate:self]) {
        NSLog(@"Handle an error case here.");
    }

    return YES;
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    //  Prepare to recevie data from the connection
    NSLog(@"did receive response: %@", response);
    self.mutableResponseData = [NSMutableData data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    //  Handle an error case here
    NSLog(@"did fail with error: %@", error);
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    //  Build up the response data
    [self.mutableResponseData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSError *error = nil;
    id JSONObject = [NSJSONSerialization JSONObjectWithData:self.mutableResponseData options: NSJSONReadingMutableContainers error:&error];
    if (!JSONObject) {
        //  Handle error here
        NSLog(@"error with JSON object");
    }
    else if ([JSONObject isKindOfClass:[NSDictionary class]]) {
        //we're in business
        NSDictionary *dict = JSONObject;
        NSLog(@"dict is %@", dict);
    }
    else {
        //  Handle case of other root JSON object class...
    }
}

//  The following two methods allow any credential to be used. THIS IS VULNERABLE TO MAN IN THE MIDDLE ATTACK IN ITS CURRENT FORM
- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace
{
    return [protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust];
}

- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{
    if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust]) {
        // WE ARE POTENTIALLY TRUSTING ANY CERTIFICATE HERE. Replace YES with verification of YOUR server's identity to avoid man in the middle attack.
        //  FOR ALL THAT'S GOOD DON'T SHIP THIS CODE
#warning Seriously, don't ship this.
        if (YES) {
            [challenge.sender useCredential:[NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust] forAuthenticationChallenge:challenge];
        }
    }

    [challenge.sender continueWithoutCredentialForAuthenticationChallenge:challenge];   
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:31:12.207

如果数据为零，NSJSONSerialization 总是会崩溃。您需要输入条件以查看该 URL 是否包含任何数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T19:32:22.737

尝试将 url 放在浏览器中以确保为您提供有效的 JSON，并确保解析的数据是 Array 或 NSDictionary

# sql - 返回最常出现的事件

> ID：15465182
> 
> 赞同：2
> 
> 时间：2013-03-17T19:27:35.547
> 
> 标签：sql, ms-access

我正在使用 MS Access 2010。

如果我有这样的表：

表格1：

```
FirstName         LastName

  Alex              AAA
  Max               AAA
  Stewie            BBB
  Barney            BBB
  John              AAA 
```

什么查询可以返回最频繁的 LastName 以及它出现的次数？在这种情况下，它应该返回：

```
AAA      3 
```

但是，如果姓氏与频率相关（发生相同的时间），它应该同时返回。

我搜索了网络和 stackoverflow，尽管许多问题相似，但它们要么不能解决我的问题，要么是针对 SQL Server 以外的另一种方言。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T19:33:40.843

MS Access 中的热门返回匹配项：

```
SELECT TOP 1 * 
FROM (SELECT names.LastName, Count(names.LastName) AS CountOfLastName
      FROM [names]
      GROUP BY names.LastName) a
ORDER BY CountOfLastName Desc 
```

所以上面的查询会在多行同频时返回多行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T19:31:12.583

```
Select
   LastName,
   count (*) as HowManyTimes
from myTable
Group By LastName
Order By count(*) 
```

# windows - 我在哪里可以找到有关 Windows 视频捕获架构，特别是虚拟网络摄像头驱动程序的信息？

> ID：15465183
> 
> 赞同：1
> 
> 时间：2013-03-17T19:27:43.810
> 
> 标签：windows, driver, virtual, device

我看到一个带有 Win7 的联想平台，它有一个网络摄像头和一个虚拟网络摄像头。虚拟网络摄像头渲染由物理网络摄像头捕获的视频，但支持图像处理。它还与物理网络摄像头并行工作（一个应用程序使用网络摄像头，另一个应用程序使用虚拟网络摄像头）。

我在哪里可以找到有关 Windows 架构的文档，以便对此类虚拟摄像头进行编程并从物理设备提供它？

谢谢， 夏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:11:44.523

Windows 中用于视频捕获的主要 API [仍然是] [DirectShow](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375454%28v=vs.85%29.aspx)。在 SO 和 MSDN 论坛上多次讨论了实现虚拟视频捕获设备的问题：

*   [自定义虚拟视频捕获设备](https://stackoverflow.com/questions/9569238/custom-virtual-video-capture-device?lq=1)
*   [作为字节流的虚拟网络摄像头输入](https://stackoverflow.com/questions/8557723/virtual-webcam-input-as-byte-stream)和那里的链接

在虚拟相机中，您可以自由选择从哪里获取视频源，是真实的捕获设备还是生成源，还是从网络获取等。

# android - LazyLoader imageLoader 空指针异常？

> ID：15465192
> 
> 赞同：1
> 
> 时间：2013-03-17T19:28:14.203
> 
> 标签：android, nullpointerexception, lazy-loading, image-loading

我目前正在开发一个具有使用 LazyLoader 方法填充的 List 的应用程序，因此我拥有以下类：

FileCache.java、ImageLoader.java、LazyAdapter.java、Utils.java

基本上，当我填充列表时，图像加载鳍，但是我想在单个项目视图上显示所选列表项的图像，当它被选中时。因此，当用户单击列表项时，他们将被带到一个新活动以查看该项目周围的所有详细信息。为了保存数据库调用，我在列表中收集了所有需要的数据并将其隐藏在字段中，然后使用以下方法将其传递给单个项目视图：

```
String ImageURL = ((TextView) view.findViewById(R.id.ImageURL)).getText().toString();

Intent i = new Intent(getApplicationContext(), VenueItem.class);

i.putExtra("ImageURL", ImageURL);

startActivity(i); 
```

然后，这会将那个 URL 和我发送到新活动的一堆其他数据传递给新的 Activity。当它到达新活动时，我正在使用以下方法读取该数据：

```
String image_url;

Intent i = getIntent();

image_url = i.getStringExtra("ImageURL");

ImageView thumb_image=(ImageView) findViewById(R.id.itemImage); // thumb image

imageLoader.DisplayImage(image_url, thumb_image); //This is the line it fails on 
```

正如你所看到的，我已经突出显示了上面似乎失败的行，并且我得到了一个 nullpointerexception 错误，即使我已经调试了代码并且当它到达该行时，它传递的 2 个参数都存在。图像加载器的代码如下：

```
final int stub_id = R.drawable.noimage;
    public void DisplayImage(String url, ImageView imageView)
    {
        imageViews.put(imageView, url);
        Bitmap bitmap=memoryCache.get(url);
        if(bitmap!=null)
            imageView.setImageBitmap(bitmap);
        else
        {
            queuePhoto(url, imageView);
            imageView.setImageResource(stub_id);
        }
    } 
```

我认为这可能与我调用图像加载器的方式有关，有人可以帮我解决这个问题，因为它很烦人吗？或者有人可以告诉我更好的方法来获取已经缓存并显示在列表中以显示在单个项目活动中的图像吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T19:36:15.267

听起来可能很愚蠢，但你真的实例化了 imageLoader 吗？因为你还没有包含它的代码；）

似乎 imageLoader 变量可能是空值，而不是您传递给它的 image_url 和 thumb_image 。

试图运行

```
imageLoader.DisplayImage(image_url, thumb_image); 
```

如果 imageLoader 为 null 将导致 NullPointerException 例如您已声明它但未实例化它：

```
ImageLoader imageLoader; 
```

这需要是

```
ImageLoader imageLoader = new ImageLoader(); 
```

# regex - 使用 mongodb mongoose find 和 RedExp

> ID：15465193
> 
> 赞同：0
> 
> 时间：2013-03-17T19:28:15.790
> 
> 标签：regex, node.js, mongodb, mongoose

我读了一些帖子，它适用于一个模型，但是当我尝试使用其他模型时，它不起作用。我有这个：

```
function getimages(search, callback) {

   imagenmodel.find({ title: new RegExp(search) }, function (err, imagent){

       if (err) throw err;

       console.log(imagent);

       callback(imagent);

   });

} 
```

显示`console.log`图像对象是空的，即使 RegExp 字母与标题的某些字母一致。也许我以错误的方式使用它，但我不知道如何正确地做到这一点。对此没有解决方案...？

谢谢提前！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:27:07.397

```
imagenmodel.find({ title: new RegExp(reg) }, function (err, imagent){ 
```

应该是

```
imagenmodel.find({ title: new RegExp(search) }, function (err, imagent){ 
```

因为那是函数参数。

# java - 是否有一个特殊的字符集将所有可能的字节值映射到有效字符并返回？

> ID：15465194
> 
> 赞同：1
> 
> 时间：2013-03-17T19:28:21.737
> 
> 标签：java, string, pdf, character-encoding, binary

我开始使用 PDF 规范。PDF 文件是文本和二进制数据的混合体。为了进行一些快速而肮脏的编辑，我想将文件读入字符串，查找并替换一些文本部分，然后将字符串写回文件，同时保留除我替换的字节之外的所有字节。

我的第一次天真的尝试是这样的：

```
byte[] orignalBytes = ...; // read bytes from file
String content = new String(originalBytes, StandardCharsets.US_ASCII);
// do some find and replace (only working with ASCII chars)
byte[] changedBytes = content.getBytes(StandardCharsets.US_ASCII); 
```

这失败了，因为引用 String 构造函数的 javadoc：“此方法总是用此字符集的默认替换字符串替换格式错误的输入和不可映射的字符序列”。

我正在寻找一个特殊的字符集，它映射来自 US_ASCII 字符集的所有字符，此外“在从 byte[] 转换为 String 并返回时保留所有其他字节的值”。

我只需要能够使用 ascii 字符。

我现在正在考虑编写自己的字符集，但想知道这样的东西是否已经存在？

任何想法或指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:41:32.600

每个文本字符串都可以有自己的自定义编码。从长远来看，使用现有的 PDF 库将为您省去很多麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:59:43.893

I tested Marko Topolnik's suggestion, it seems to work:

```
public class CharsetTest
{
  @Test
  public void test()
  {
    byte[] allByteValues = new byte[256];

    byte byteValue = Byte.MIN_VALUE;

    for(int i = 0; i < allByteValues.length; i++)
    {
      allByteValues[i] = byteValue;
      byteValue++;
    }

    {
      System.out.println(Arrays.toString(allByteValues));
      String string = new String(allByteValues, StandardCharsets.US_ASCII);
      System.out.println(string);
      byte[] bytesFromString = string.getBytes(StandardCharsets.US_ASCII);
      System.out.println(Arrays.toString(bytesFromString));
      System.out.println("equal: " + Arrays.equals(allByteValues, bytesFromString));
      System.out.println();

      Assert.assertFalse(Arrays.equals(allByteValues, bytesFromString));
    }
    {
      System.out.println(Arrays.toString(allByteValues));
      String string = new String(allByteValues, StandardCharsets.ISO_8859_1);
      System.out.println(string);
      byte[] bytesFromString = string.getBytes(StandardCharsets.ISO_8859_1);
      System.out.println(Arrays.toString(bytesFromString));
      System.out.println("equal: " + Arrays.equals(allByteValues, bytesFromString));
      System.out.println();

      Assert.assertTrue(Arrays.equals(allByteValues, bytesFromString));
    }
  }
} 
```

The output on my eclipse console:

![enter image description here](../Images/88c5072383f7b318a218dd35e7ddb381.png)

# html - 并非所有 webm 文件都在 Firefox 中播放

> ID：15465195
> 
> 赞同：3
> 
> 时间：2013-03-17T19:28:35.607
> 
> 标签：html, firefox, video, webm

我使用 Miro Video Converter 和 FreeMakeVideo Converter 对 webm 视频进行了编码，结果相同：一些 webm 视频在 Firefox 中播放，而另一些在嵌入 html5 视频标签时不会。

在 Chrome 中，它们都可以正常播放。

在我的 Apache 配置中，我添加了： AddType video/webm .webm

我还添加了一个相同的 .htaccess 文件：AddType video/webm .webm

没有任何区别。一些 webm 文件可以正常播放，而另一些则根本无法播放。

如果我直接在 Firefox 中打开 webm 文件，它们都可以正常工作，但在视频标签中只有一些可以正常工作。

有任何想法吗？？？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-10T21:58:30.170

我知道这个问题很老，但实际上我前几天才遇到这个问题，我想我会为遇到同样问题的任何未来冒险者回答这个问题。

这是 Firefox 中的一个已知问题。有时，它只是不想播放 webm 文件。我不知道为什么，我没有费心去弄清楚。我能够通过切换源标签的顺序来解决这个问题。

我以前是这样的：

```
<source src="myVideo.webm" type="video/webm">
<source src="myVideo.mp4" type="video/mp4">
<source src="myVideo.ogv" type="video/ogv"> 
```

就这样，firefox 来了，先看到了 webm，然后选择了尝试和 opne。一些问题导致它无法播放，但由于它支持该格式，它还是使用了该源。为了解决这个问题，我做了以下事情：

```
<source src="myVideo.ogv" type="video/ogv">
<source src="myVideo.mp4" type="video/mp4">
<source src="myVideo.webm" type="video/webm"> 
```

这样，当firefox读取源代码时，它首先会看到ogv文件并选择打开它，因为它可以支持它。从那以后就没有问题了。

希望这可以帮助某人...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-13T01:41:28.700

我也会在这里加我的 2 美分。我自己今天刚刚经历过这个问题。使用 Firefox 现在的版本 33 (!)，Firefox 对 webm 做了“一些事情”，但它肯定不会做正确的事情。（我在这里开始了一个关于它的线程......[在 Firefox 33 中无法播放 HTML5 视频](https://stackoverflow.com/questions/27452971/trouble-getting-html5-vidio-to-play-in-firefox-33)

但最重要的是，这是另一个可能需要数年才能解决的 Firefox 问题案例。但我离题了……这**是**一个 Firefox 问题，由于列出视频源文件的首选顺序是 MP4，然后是 webm，然后是 ogg，所以目前唯一明智的做法是检测 Firefox 浏览器，并采取相应措施。我这样做的方法是在我常见的“sitescripts.js”文件中创建一个javascript函数，如下所示......

```
function browserComment(browser, comment)
 {
  if(navigator.userAgent.toLowerCase().indexOf(browser) < 0) return;

  if (comment == true)  document.write("<!--");
  else  document.write("-->");

 } 
```

它的目的是允许我检测特定的浏览器，并添加 HTML 注释开始或注释结束。因此，接下来，在我的 HTML5 视频编码中，我将执行以下操作。请注意我如何使用上面的函数来检测 firefox，并在呈现页面时添加打开或关闭注释，方法是传递 true 或 false。

```
<video width="640" height ="480" controls poster="somePhoto.JPG">

  <source src ="someVideo.mp4" type='video/mp4' > <!--cSafari / iOS 1st -->

  <!-- firefox supports 'webm'... but doesn't work properly. 
   So I'll comment out the webm version -->

  <script> browserComment('firefox', true ) </script>
  <source src ="someVideo.webm" type='video/webm' > <!-- Firefox / Opera / Chrome -->
  <script> browserComment('firefox', false ) </script>

  <source src ="someVideo" type='video/ogg' > <!-- Firefox / Opera / Chrome -->

  <!-- other code to invoke Flask player as a fallback -->

 </video> 
```

它有点难看，但至少它为其他浏览器保留了正确的视频源顺序，这些浏览器可以很好地处理 webm 文件，比如 Chrome。当 Mozilla 最终解决了这个问题时，可能是在遥远的星系中的 623.2 版本左右，我只需要改变我的 browserComment() 函数，开始考虑版本。

# javascript - 如何在行尾定位div？

> ID：15465197
> 
> 赞同：4
> 
> 时间：2013-03-17T19:28:48.337
> 
> 标签：javascript, html, targeting

我正在尝试在 div 行之间插入一个框条，如何定位每行 div 的末尾？

这是 div 的 JSFiddle：http: [//jsfiddle.net/5Sn94](http://jsfiddle.net/5Sn94)

这是代码：

```
<div>
    <img src="//placehold.it/50x50">
</div>
<div>
    <img src="//placehold.it/50x50">
</div>
<div>
   <img src="//placehold.it/50x50">
</div> 
```

一段时间后，div 将进入下一行，创建一个新的“行”。如何在一行 div 下方插入一个跨越整个页面宽度的 div。

为了向您展示我想要实现的目标，请访问 Google 上的此链接：http: [//bit.ly/1329rDn](http://bit.ly/1329rDn)

然后你会看到如果你点击任何图像，它会在 div 行之间打开更大的新图像，这是如何实现的？我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T19:42:05.683

我认为这可以帮助您进行调查：

```
div {
    display: inline-block; // <-- use display: inline-block instead of float: left
    margin: 0 15px 0 0;
    cursor: pointer;
}
.expander {
    background: coral;
    height: 100px;
    width: 100%;
    margin-bottom: 6px;
    float: left; // <-- this float makes the trick
} 
```

[http://jsfiddle.net/5Sn94/14/](http://jsfiddle.net/5Sn94/14/)

`.expander`是一个 div，需要在 target（在我的示例中悬停）元素之后插入。它有 100% 的宽度来占据整个水平空间。

`expander`要在悬停的 div 之后插入，我使用了这个 javascript（内部`for`循环）：

```
div[i].onmouseover = function() {
    d.innerHTML = 'Details about div #' + this.dataset.id;
    this.parentNode.insertBefore(d, this.nextSibling).style.display = 'block';
} 
```

您可以在 jQuery 等中 insertAfter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:34:18.050

您可以使用，但只有在页面[http://jsfiddle.net/5Sn94/2/](http://jsfiddle.net/5Sn94/2/)`document.getElementsByTagName`上没有任何其他 div 时它才会起作用

```
var divs = document.getElementsByTagName('div');
divs[divs.length-1].style.border = '1px solid red'; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-17T19:32:18.513

使用 jQuery，您可以使用`last-child`选择器：http: [//jsfiddle.net/5Sn94/1/](http://jsfiddle.net/5Sn94/1/)

# c++ - C : 用双精度变量初始化引用

> ID：15465199
> 
> 赞同：-3
> 
> 时间：2013-03-17T19:29:10.480
> 
> 标签：c++, syntax, reference

以下是做什么的：

```
double &number = 12.4; 
```

它应该将引用分配给 double 类型的变量作为 12.4

但不是对变量的引用，而是指针的地址。为什么它有效？

```
double & Getsomenumber()
{
    static double number = 12.4;

    double &anotherNumber = number;

    return anotherNumber;} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T19:30:28.427

这是非法语法，C 中没有引用。

如果您的意思是 C++，那么这也是无效的，您不能将临时对象绑定到非`const`引用。`const double& number = 12.4`会工作。

所以“它为什么有效？” 不是一个有效的问题 - 它不是，不是针对 C，不是针对 C++。

> 但不是对变量的引用，而是指针的地址

不，引用只是一个别名 - 您基本上是通过不同的名称引用同一个变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:36:55.613

您正在做的事情实际上应该以这种方式工作：

```
const double& number = 12.4; 
```

实际上，您不应该能够创建对没有 const 表达式的引用`const`。

# c# - 正确修复第一次请求时的 HttpWebRequest GetResponse 延迟

> ID：15465203
> 
> 赞同：3
> 
> 时间：2013-03-17T19:29:36.800
> 
> 标签：c#, .net, proxy, httpwebrequest, httpwebresponse

如前所述， [为什么这个 WebRequest 代码很慢？](https://stackoverflow.com/questions/754333/why-is-this-webrequest-code-slow)这里[是 64 位 Windows 上的 HttpWebRequest GetResponse 延迟](https://stackoverflow.com/questions/1698031/httpwebrequest-getresponse-delay-on-64bit-windows)

由于代理自动检测，HttpWebRequest 在第一个请求时挂起。一个解决方法是设置**Proxy = null**，但这也锁定了所有使用代理的用户，这**不是一个合适的解决方案**。

那么，有谁知道如何在不锁定所有代理用户的情况下以编程方式修复这个初始延迟？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T23:53:14.003

您可以先尝试/捕获呼叫，并将代理设置为 null 并在失败情况下设置代理自动检测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-07T14:25:56.103

`http://localhost:9200`当使用 GetResponse 和 GetRequestStream 发出第一个请求并且有 20 秒的延迟时，我在从 ASP.NET（C#）调用 Elasticsearch 时遇到了类似的问题。

我的问题的原因是在 IPv6 中。我的情况的解决方案是注释 localhost 的 IPv6 地址的定义：

转到“C:\Windows\system32\drivers\etc\”文件夹

备份“主机”文件

编辑文件以更改行：

```
::1 localhost 
```

至

```
#::1 localhost 
```

你也可以换行：

```
#127.0.0.1 localhost 
```

至

```
127.0.0.1 localhost 
```

也许您可以刷新 DNS 缓存：以管理员身份启动命令提示符，在命令窗口中键入，然后按 Enter：ipconfig /flushdns

在此之前，我尝试了许多通过 Internet 找到的解决方案，但对我的情况没有任何帮助，例如：

1.  request.Proxy = null;
2.  ServicePointManager.UseNagleAlgorithm = false
3.  web.config 中的各种变化...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T19:34:53.013

一种方法是要求用户在 Internet Explorer 选项中关闭代理自动检测。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-15T07:13:24.903

帮助我的事情是关闭 Internet Explorer LAN 设置中的“自动检测设置”。没有其他工作，包括重写代码以使用 HttpClient 而不是 HttpWebRequest。

# python - 添加多个列表项的更简单方法？

> ID：15465204
> 
> 赞同：4
> 
> 时间：2013-03-17T19:29:41.283
> 
> 标签：python

有没有比我在下面编写的代码更简单的方法来汇总列表中的项目？我是新手，这似乎有点笨拙。

```
n = [3,5,7]
o = [4,10,8]
p = [4,10,5]

lists = [n, o, p]

def sumList(x):
    return sum(x)

def listAdder(y):
    count = 0
    for item in y:
        count += sumList(item)
    return count

print listAdder(lists) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-17T19:32:25.653

就像是：

```
from itertools import chain

n = [3,5,7]
o = [4,10,8]
p = [4,10,5]

print sum(chain(n, o, p))
# 56 
```

这避免了创建不必要的项目列表，因为您将它们`chain`直接传递给...

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-17T19:32:29.940

您可以在一行中完成，`listAdder()`与调用相同`sum()`：

```
sum(sum(x) for x in lists) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T19:53:51.187

您还可以避免列表列表，直接求和：

`sum(n+o+p)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T19:34:04.530

尽可能短，但效率不高

```
sum(sum(lists, [])) 
```

# html - 重置html5画布游戏

> ID：15465207
> 
> 赞同：1
> 
> 时间：2013-03-17T19:29:49.740
> 
> 标签：html, canvas, reset

目前我有一个游戏可以绘制小行星和背景、分数等，一旦船撞到小行星，它就会将用户带到游戏结束屏幕，当他们再次点击播放按钮时，我希望游戏重置而不是开始从它刚刚撞上小行星开始。

```
function playGame() {
clearCtxMenu();
clearCtxGameOver();
drawBg();
startLoop();
score = 0;
document.addEventListener('keydown',checkKeyDown,false);
document.addEventListener('keyup',checkKeyUp,false);
} 
```

这会将所有内容加载到游戏中并清除菜单/游戏结束屏幕中的图像。

```
function gameOver() {
stopLoop();
drawPlayAgain();
drawMenu();
ctxGameOver.fillText("Score: " + score, 320, 160);
ctxGameOver.fillText("Highscore: " + highScore, 300, 180);
} 
```

当小行星被击中时调用的游戏结束函数。

我已经设置了，一旦你再次点击播放按钮，它就会调用 playGame 函数，但我希望它从头开始，而不是从刚刚完成的地方开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:05:54.333

对于问题后的任何人，我只是清空了数组，例如 ArrayName = [];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-26T18:02:33.490

更清楚一点（因为我还不能评论）：

在位于此处 ( [http://www.w3schools.com/graphics/game_intro.asp](http://www.w3schools.com/graphics/game_intro.asp) ) 的 w3c 学校游戏教程中，我有一个关于如何在单页应用程序中重置游戏的问题并找到了这个问题。上面的答案是对的，但对我来说，我对它的理解还不够好，无法有一点“啊哈”的时刻。

因此，通过一个示例，它可能会帮助其他人了解修复的位置。看下面的代码：

```
var myGamePiece;
var myObstacles = [];
var myScore;

function startGame() {
    myGamePiece = new component(30, 30, "red", 10, 120);
    myGamePiece.gravity = 0.05;
    myScore = new component("30px", "Consolas", "black", 280, 40, "text");
    myGameArea.start();
 } 
```

行“var myObstacles = [];” 保存障碍物的位置，如果它被重置，游戏将不得不制作新的。从而“重置”游戏。其余的由教程中的代码处理。

希望这可以帮助某人。

# cordova - 升级 JQuery Mobile 应该怎么做？

> ID：15465209
> 
> 赞同：2
> 
> 时间：2013-03-17T19:30:07.450
> 
> 标签：cordova, jquery-mobile

我曾经使用 1.0.1，我正在尝试更新到 1.3.0。

在 html 的头部

```
<link rel="stylesheet" type="text/css" href="jquery.mobile-1.3.0.min.css" />
<script src="jquery.mobile-1.3.0.min.js"></script> 
```

我想我只是在这里更改值并下载文件应该没问题。

但是，刷新页面后，我发现页面只是在没有 css 的情况下显示。

升级有什么需要做的吗？

我原来的

```
<link rel="stylesheet" type="text/css" href="jquery.mobile-1.0a1.min.css" />
<script src="jquery.mobile-1.0a1.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T19:46:46.867

您还需要更改**jQuery**版本。每个**jQuery Mobile**版本都有一个最小/最大**jQuery**要求。

如果您使用的是**jQuery Mobile** 1.3 版，我建议您使用**jQuery** 1.9.1 版。并且不要高于或低于 1.8.3。

# c++ - 减少程序的内存使用

> ID：15465214
> 
> 赞同：0
> 
> 时间：2013-03-17T19:30:36.663
> 
> 标签：c++, memory, numbers, int

我正在尝试解决内存使用限制为 0.75 mb 的问题我无法制作大小为 100 000 的数组，因为它不在 0.75 mb 范围内

我的程序如下：

```
#include <iostream>   
#include <String>
using namespace std;

void main() {
char temp;
int temp1, num, k, z, val__=0;
cin >> num;
int* value = new int[94000];
short* place = new short[94000];
for (int i = 0; i< num; i++) {
    cin >> temp>>temp;
    if (temp == 'U') {
        cin >> temp >> temp >> place[val__] >> value[val__++];
    }
    else {
        cin >> temp >> temp1;
        for (k = val__-1; k >=0; k-- ) {
            if (place[k]==temp1) {
                cout << value[k]<<endl;
                for (z = k; z < val__; z++) {
                    value[z]=value[z+1];
                    place[z]=place[z+1];
                }
                val__--;
                k = 0;
            }
        }
    }

}
} 
```

如何计算 C++ 程序的全局内存使用量，以及如何减少使用的内存量？
在一个数组中，我存储从 0 到 1000 的数字；在第二个中，我存储从 0 到 10^9 的数字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:30:32.347

你有两个数组，假设 sizeof(int) 是 4 个字节，而 sizeof(short) 是 2 个字节，那么你只使用 600000 个字节加上一点点用于堆管理。我认为，其他内存占用堆栈或其他类型的内存。可能你必须减少堆栈？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:18:07.437

我不确定您要确切解决什么问题。但是，如果您需要的内存比您可以分配的更多，（并且假设您不想增加分配的内存大小），那么您可能希望将数据保存在数据库或文件中，只读取数组的部分在将更多项目加载到程序运行内存中之前，您需要处理并从内存中释放它们。

# time - Youtube API - 时间参数无法正常工作

> ID：15465225
> 
> 赞同：0
> 
> 时间：2013-03-17T19:31:43.700
> 
> 标签：time, youtube

我使用 Youtube API 很长时间了，一切都很好，但是昨天我遇到了一个 Time 参数的错误：

检查此链接（没有时间参数）： [http ://gdata.youtube.com/feeds/api/users/TopGear/uploads?orderby=viewCount&max-results=5](http://gdata.youtube.com/feeds/api/users/TopGear/uploads?orderby=viewCount&max-results=5)

这个链接（时间=今天）： [http ://gdata.youtube.com/feeds/api/users/TopGear/uploads?orderby=viewCount&max-results=5&time=today](http://gdata.youtube.com/feeds/api/users/TopGear/uploads?orderby=viewCount&max-results=5&time=today)

内容相同，第一个条目有：

> 2008-08-17T00:25:36.000Z

所以看起来 Youtube 服务器没有正确响应，因为：

> 在检索搜索结果的请求中，时间参数将搜索限制为在指定时间内上传的视频。（参考：developers.google.com/youtube/2.0/reference?#timesp）

任何建议，将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:31:47.040

我也注意到了这一点。我有一个使用此时间参数（设置为 last_week）的脚本，并且它在过去一年中运行良好。几天前，结果开始包括来自 all_time 的视频，好像它完全忽略了时间参数。我的进一步调查表明，现在“时间”参数根本没有任何作用。谷歌这边出了点问题。

可能是时候开始使用 API 的 v3：[https ://developers.google.com/youtube/v3/docs/search/list](https://developers.google.com/youtube/v3/docs/search/list)

# flyway - Flyway：迁移多个数据库

> ID：15465239
> 
> 赞同：0
> 
> 时间：2013-03-17T19:32:52.247
> 
> 标签：flyway

是否可以迁移具有相同数据的多个数据库？我知道架构参数，但据我了解，它适用于位于不同数据库/架构中的表。不要将迁移复制到不同的数据库。

Maven 的配置如何？

原因是，我有一个仅用于单元测试的模式，并且希望在另一个环境中拥有数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:10:29.943

当然，只需为每个数据库运行一次 Flyway。此处需要 Maven 配置文件或插件执行。

# ruby-on-rails - Rails数据表colviz无法读取属性'msie'

> ID：15465241
> 
> 赞同：0
> 
> 时间：2013-03-17T19:32:56.893
> 
> 标签：ruby-on-rails, datatables

我在 Rails 应用程序中使用 gem 'jquery-datatables-rails'。我也在使用 ColViz 工具。

但是，当我使用 ColViz 时，我在浏览器控制台中收到此错误：

```
Uncaught TypeError: Cannot read property 'msie' of undefined 
```

这是我的咖啡脚本：

```
 $(".dataTable").dataTable
  bStateSave: true
  fnStateSave: (oSettings, oData) ->
   localStorage.setItem "DataTables_" + window.location.pathname, JSON.stringify(oData)

  fnStateLoad: (oSettings) ->
    JSON.parse localStorage.getItem("DataTables_" + window.location.pathname)

sDom: "CT<\"clear\">lfrtip"
oColVis:
  buttonText: "Show/Hide"
  aiExclude: [0]
  bRestore: true
  sAlign: "left"

oTableTools:
  aButtons: [
    sExtends: "xls"
    sButtonText: "Excel"
    mColumns: "visible"
  ,
    sExtends: "pdf"
    sPdfOrientation: "landscape"
    sPdfMessage: "Endeavor"
    mColumns: "visible"
  ] 
```

UDPATE1

这是我得到错误的地方：

```
 /* This results in a very small delay for the end user but it allows the animation to be
     * much smoother. If you don't want the animation, then the setTimeout can be removed
     */
    setTimeout( function () {
        $(nHidden).animate({"opacity": 1}, that.s.iOverlayFade);
        $(nBackground).animate({"opacity": 0.1}, that.s.iOverlayFade, 'linear', function () {
            /* In IE6 if you set the checked attribute of a hidden checkbox, then this is not visually
             * reflected. As such, we need to do it here, once it is visible. Unbelievable.
             */
            if ( jQuery.browser.msie && jQuery.browser.version == "6.0" )
Uncaught TypeError: Cannot read property 'msie' of undefined
            {
                that._fnDrawCallback();
            }
        });
    }, 10 ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:46:31.307

新版本的 jquery 好像不支持 .browser

我将此添加到我的应用 jquery.mb.browser.js

您可以在以下位置找到它：

```
https://github.com/pupunzi/jquery.mb.browser/archive/master.zip 
```

# javascript - HTML5 移动应用程序在手机屏幕关闭时运行？

> ID：15465242
> 
> 赞同：35
> 
> 时间：2013-03-17T19:33:03.543
> 
> 标签：javascript, android, ios, html, geolocation

我有兴趣创建一个基于 HTML5 地理位置的 Web 应用程序，该应用程序在手机屏幕关闭时仍然可以运行（例如，当手机放在口袋里时跟踪你运行了多远）。

有没有办法让应用程序保持运行但关闭屏幕，或者在使用其他应用程序时让应用程序在后台运行？这至少在一些流行的移动设备上是可能的吗（尤其是较新的 iOS 和 Android 设备？）

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-05-08T13:56:44.607

我的[音乐应用](http://thedigitalage.org/hangthedj)是 HTML5，也需要在后台运行。对此的支持因移动浏览器而异。

*   iOS 上的 Safari：会在后台继续播放一两首歌曲
*   Android上的本机浏览器：将播放一首歌曲然后停止
*   Android上的Firefox：当屏幕锁定或浏览器失去焦点或歌曲结束时将停止
*   Android 上的海豚：在后台播放！但最终停止
*   Android 上的 Opera：更好的后台支持，Javascript 继续运行，音乐继续播放，即使屏幕关闭或 Opera 被发送到后台，但最终在几首歌曲后停止。

如您所见，它是命中还是未命中。有一半的时间我最终试图把手机放在口袋里，试图让屏幕保持打开状态，直到我不小心按下它——这太糟糕了。我渴望有一天用户可以更好地控制在后台运行 HTML5 应用程序。如果我不得不猜测，我会说对此的普遍支持还很遥远，如果它甚至获得牵引力的话。尽管我几乎肯定苹果永远不会批准它，但我被迫转向原生应用程序解决方案。与此同时，我将保持希望并继续测试最新的移动浏览器。因为如果它真的发生了，那就太棒了。:-)

我还应该指出，根据我的经验，对于上述几乎所有的组合，使用 HTML5 同时运行 javascript、提取网络数据和播放音乐通常会将您的手机变成烤箱并很快耗尽您的电池。乌格。

此外，如果您使用 jQuery Mobile（这非常棒），您会在不同的浏览器上看到不同的触摸处理。例如，Firefox touch 效果很好，Dolphin 很糟糕，需要精确的触摸并按住并释放才能正确。这不是 HTML5 的直接错误，而是我正在处理的另一个问题。

以下是另一位开发人员对移动 HTML5的[有趣想法。](http://blog.guya.net/2013/04/20/the-promise-of-mobile-html5)

更新：我刚刚（2013 年 5 月 22 日）在我的三星 Galaxy S3 上下载了 Opera，它拥有迄今为止最好的 HTML5 支持。对于我的应用程序，它会继续在后台运行 javascript，无论是关闭屏幕还是将 Opera 推送到后台，至少会播放几首歌曲。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-05-12T17:53:29.520

您可以使用服务工作者：

[https://developers.google.com/web/fundamentals/primers/service-workers/](https://developers.google.com/web/fundamentals/primers/service-workers/)

> 服务工作者是您的浏览器在后台运行的脚本，与网页分开，为不需要网页或用户交互的功能打开了大门。如今，它们已经包含推送通知和后台同步等功能。将来，服务工作者可能会支持其他功能，例如定期同步或地理围栏。

准确地说，应用程序可以注册一个服务工作者，如下所示：

```
if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('/sw.js').then(function(registration) {
      // Registration was successful
      console.log('ServiceWorker registration successful with scope: ', registration.scope);
    }, function(err) {
      // registration failed :(
      console.log('ServiceWorker registration failed: ', err);
    });
  });
} 
```

一旦 service worker 注册成功，任何在 sw.js 中实现的应用逻辑都会在后台执行；即使应用程序选项卡被禁用。

# actionscript-3 - Flash 两次添加我的对象并切换舞台高度

> ID：15465245
> 
> 赞同：0
> 
> 时间：2013-03-17T19:33:13.053
> 
> 标签：actionscript-3, flash-cs5

我正在尝试向舞台添加一个对象。在文档类中，我使用以下代码：

```
public function StartGame()
{
    gameClass = new GameClass(this);
    this.addChild(gameClass);
} 
```

在游戏中，我想在舞台底部添加一个对象。之后，它应该向上移动，直到它在屏幕之外。我添加了以下代码：

```
public function GameClass(main:MainClass) {
        this.main = main;
        viruslist = new Array();

        this.addEventListener(Event.ADDED_TO_STAGE, init);
    }

    private function init(e:Event):void {
        addVirus(75);
    }

    public function addVirus(xcoor)
    {
        trace("Creating virus");
        var v:Virus = new Virus(this.main, this, xcoor);
        this.addChild(v);
        viruslist.push(v);
    } 
```

然后，在 Virus 类中，我执行以下操作：

```
public function Virus(main:MainClass, gameKlasse:GameClass, x:Number) {
        this.main = main;
        this.game = gameKlasse;
        this.xcoor = x;
        this.addEventListener(Event.ADDED_TO_STAGE, init);
    }

    private function init(e:Event):void {
        this.y = main.height;
        trace("Height: " + y);
        trace("Stage height: " + main.height);
        this.addEventListener(Event.ENTER_FRAME, runTime);
        trace("Virus created");
    } 
```

所以问题是，我的舞台大约是屏幕的高度。但是，病毒几乎被置于顶部。我的日志显示：

> 创建病毒高度：86 阶段高度：156.5 病毒创建高度：156.5 阶段高度：227 病毒创建

出了什么问题？为什么它会被创建两次？为什么舞台高度会发生变化？为什么我的对象没有出现在我的屏幕底部？

编辑： using`stage.stageHeight`给出相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:41:43.580

您正在使用 main.height 和 stage.height，而 main 和 stage 没有任何高度，直到您添加一些东西。因此，一旦添加了病毒，它的高度只会大于零。

您正在寻找的是 stageHeight 属性，它将告诉您可用的高度。您可以通过以下方式在添加到舞台的任何对象中访问它：

```
stage.stageHeight 
```

祝你好运！

# sql-server - WCF 服务和超时

> ID：15465249
> 
> 赞同：0
> 
> 时间：2013-03-17T19:33:46.093
> 
> 标签：sql-server, performance, wcf, web-services, webforms

我工作的一个应用程序已经投入生产好几年了，但 UI（ASP WebForms）和服务（WCF）之间的超时频率越来越高。自从我们推出以来，用户数量和数据量已经显着增加。

最初，我们将问题归咎于性能不佳的 SQL Server 集群（服务使用该集群），然后迁移到功能更强大的集群。但是，问题仍然存在，并且我们每天收到的超时次数似乎在增加。

我们已经聘请了 DBA，但无法隔离 SQL Server 上的瓶颈。我还通过测试控制台应用程序直接调用服务来执行测试，问题也出现在那里，让我认为问题不在于 WebForms，而在于 WCF 服务。

我不知道如何解决这个理论（并开始解决它），因为它只出现在看似高流量的情况下。

WCF 和可伸缩性是否存在已知问题，还是更有可能是当前的服务实现存在缺陷？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:56:23.480

我怀疑这个问题与 SQL 服务器和应用程序层之间的交互有关。我将假设您没有在应用程序中使用 APM，因为您没有提及它。更不用说，在大多数人看来，APM 是为了让 UI 工作得更快，对吧？

**科学位，集中**

默认情况下，ASP.Net/IIS 为您提供有限数量的线程。请记住线程是昂贵的，每个线程都占用调度程序时间并以各种堆栈的形式占用内存，等等。这几乎是世界上所有计算机的缺陷。

在 .net 中，所有工作都在线程上完成。因此，当没有空闲线程时，IIS 会将请求放入队列以等待线程。现在，通常你会认为如果所有线程都在使用中，那么 CPU 利用率就会很高。这是错误的。通常对于现代 CPU，大部分时间它们都处于 I/O 饥饿状态，这意味着它们正在休眠。

在这种情况下，通常会发生一些请求。每次启动他们自己的线程，然后访问数据库。然后他们等待（睡觉）。您的 CPU 利用率达到 0%，而您的所有线程都在使用中。更多的请求进来。它们被放入队列中。数据库请求返回，一些请求出列（但不是全部）。然后队列上的请求超时。

**摩尔线！**

我们如何解决这个问题？显然，我们希望尽可能快地将 IIS 队列中的大部分工作转移到 SQL 服务器上，对吗？所以显然答案是增加线程数，对吧？现在，正如我之前提到的，线程很昂贵，所以如果你有一个非常强大的 SQL 服务器，你的应用程序服务器仍然会在 SQL 服务器之前放弃幽灵，同时仍然有 0% 的 CPU 利用率。显然更多的线程不会让我们到达我们想要的地方。

**异步/等待魔法酱！**

公认的解决方案是实际使用异步编程。

**但是不是异步/等待 UI 和并行化吗？**

不。它最常在 UI 和并行化中展示，因为它的收益最容易可视化。在 1 小时的演示中模拟 100 万次点击/秒的服务要困难得多。

因此，当我们向数据库发送查询时，线程不会在结果上休眠，而是跳回 IIS 队列以服务下一个客户。当结果返回时，通知下一个可用线程并处理它。

因此，使用 async/await 进行数据库调用，您可以最大限度地利用 CPU/网络，并忽略数据库的延迟。事实上，你会发现你应该已经把瓶颈转移到了 SQL 服务器上。

**但是我的 API 在哪里？**

啊...这是问题所在。异步/等待是相当新的。您需要 VS 2012 和 .net 4.5（很好）才能使用它。此外，大多数数据库 API 还没有完全支持 Async/Await。

例如 Entity Framework，Microsoft 的旗舰 DB 技术仅支持 EF 6.0 ALPHA 中的 async/await（截至撰写本文时），并且很可能仅支持 MS SQL SERVER。

# silverlight - MVVM Ria 服务。更新现有实体

> ID：15465253
> 
> 赞同：0
> 
> 时间：2013-03-17T19:33:56.937
> 
> 标签：silverlight, mvvm, wcf-ria-services

我发现的每一篇文章都展示了如何使用 RIA 添加新项目。没有人更新现有数据吗？它肯定看起来不像。

设想：

我正在使用我的虚拟机中的服务来拉入我的实体。然后在我看来使用虚拟机编辑实体。然后我想将我的实体保存回数据库。我不想添加它。我不想删除它。我想更新它。我在服务器端看到了该方法，但我所拥有的只是在我的数据上下文上提交更改。

我试图克隆原始实体，然后附加原始实体并将当前实体复制到它上面

```
public void SaveDoctors(Doctors current, Doctors original, Action<SubmitOperation> callback)
        {
            var ctx = new RefereeDomainContext();

            ctx.Doctors.Attach(original);
            original = current;
            ctx.SubmitChanges(callback,null);

        } 
```

这也不起作用。我今天浏览了 10 多个博客，我发现的所有内容都与添加新实体有关，即使他们声称会向您展示如何更新实体。

我可以轻松地将实体发送到服务器端并在那里执行，但我不知道这是正确的形式。

更新实体的合适位置在哪里？我正在使用 SL5，我不确定如何告诉您我使用的是哪个版本的 RIA 服务。

**澄清**

我使用来自我的视图模型的服务调用检索我的实体：

```
Doctors doctors = GetService<IDoctors>.GetDoctor().FirstorDefault(d=>d.id=xxxx); 
```

我将医生实体推送到我的 VM 结构中：

```
DoctorsVM=new DoctorsVM(doctors); 
```

这包含对通过视图模型的属性编辑的医生的引用。任何子对象都填充到子对象的 ObservableCollections 中。

当我完成这个特定实体并准备保存它时：

GetService.UpdateCurrentDoctor(DoctorsVM.Doctor)//引用原始实体。

这就是我失去它的地方。如果我这样做：在我的方法中它不起作用

```
var ctx=new DataContext;
ctx.Attach(currentDoctor);//attaches as unmodified

ctx.Add(currentDoctor);//creates a new Entity. Dont want that. 
```

ctx.AttachAsModified 仅在服务器端可用。ctx.UpdateDoctors 仅在服务器端可用。

这就是我迷路的地方。

我来自 WPF/桌面背景，所以也许我只是迷失在整个异步环境中。我只需要朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:51:06.800

这个问题有点长，所以回答可能有点长:)

如果你真的需要它，你不应该克隆实体！

背景 在实体模型中，我们有每个实体的键。如果您检查域服务，您将看到所有 CRUD 操作都由该键属性完成。如果您从服务器端返回一个集合，两个实体具有相同的密钥，您将在客户端看到其中一个。

回答 更新记录很容易。只需使用 DomainService 类实例获取实体获取要修改的项目然后提交即可。就这些。

```
 //a line of unsafe-dummy code
      domService.GetDoctorByID("124..").FirstOrDefault().CitizenNumber='CN123';

      //domService class track changeset so it decide update
      domService.SubmitChanges();       
      //Update occurs by entity key i.e. DoctorID 
```

我看到“医生”的表达方式，我们还使用 silverlight 和 ria 服务开发医疗保健应用程序。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:57:06.490

看来您必须在一个会话期间保持数据上下文处于活动状态。我不喜欢这个，但它就是这样。我正在从应用程序的下一次搜索中重置域上下文，这样它就不会变得异常庞大。

# google-closure-compiler - google-closure 编译器高级优化正在修改 navigator.battery.level 导致 TypeError

> ID：15465263
> 
> 赞同：3
> 
> 时间：2013-03-17T19:34:44.787
> 
> 标签：google-closure-compiler, clojurescript, navigator

我正在使用 ClojureScript 来检索电池电量：

```
 navigator.battery.level 
```

使用简单和空白优化时效果很好。但是当使用高级优化模式时，上面会变成：

```
navigator.hd.rd 
```

并导致 TypeError 因为 navigator.hd 未定义。

我怎样才能解决这个问题？

**编辑：**

由于下面的答案而修复。虽然在 ClosureScript 中我不得不做一些讨厌的、嵌套的、agets ......所以我想出了这个：

```
(defn jget [jobject & props]    
(loop [obj jobject 
       p (map name props)]
    (if (not (empty? p))            
        (let [prop (aget obj (first p))]
            (recur prop (rest p)))
    obj))) 
```

然后这样称呼它：

```
(jget js/navigator :battery :level) 
```

如果已经有工具可以解决这个问题，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T04:52:13.193

另一种解决方案是编写一个`externs`文件，该文件是一个 JavaScript 文件，其中包含对您要保留其名称的所有对象和方法的引用。在这种情况下，JS 文件看起来像这样：

```
//resources/externs/navigator.js
navigator = {}
navigator.battery = {}
navigator.battery.level = function(){}; 
```

您会在 ClojureScript 编译器选项中将其称为：

```
:externs ["resources/externs/navigator.js"] 
```

就像 Sirko 提出的解决方案一样，这将防止高级模式编译使用该`navigator.battery.level`名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T19:41:53.003

采用

```
 navigator['battery']['level'] 
```

这将保留命名。

闭包编译器通常会重命名点表示法的变量（如`navigator.battery`），但保留那些他知道或使用括号表示法的变量（如 navigator['battery']）。

# python - 将图像（png）转换为矩阵，对其进行归一化，反之亦然

> ID：15465272
> 
> 赞同：0
> 
> 时间：2013-03-17T19:35:48.400
> 
> 标签：python, opencv, image-processing

我开始搞乱图像处理，我想制作一个图像矩阵、向量（一维数组）并将每个图像再次反转为图像，这是代码（取自 openCV 的示例），此外 - 我将如何规范化一维数组？在我规范化这个数组之后会发生什么，我可以在规范化后让它成像吗？

```
import cv2.cv as cv
import numpy
img=cv.LoadImage("test3.JPG")
mat=cv.GetMat(img)
a = numpy.asarray(mat)
print a 
```

输出是：

```
 [[[150 150 150]
 [171 171 171]
 [242 242 242]
 ..., 
 [252 252 252]
 [252 252 252]
 [252 252 252]]

 [[151 151 151]
 [170 170 170]
 [244 244 244]
 ..., 
 [252 252 252]
 [252 252 252]
 [252 252 252]]

 [[159 159 159]
 [172 172 172]
 [248 248 248]
  ..., 
 [252 252 252]
 [252 252 252]
 [252 252 252]]

 ..., 
[[251 251 251]
[251 251 251]
[251 251 251]
 ..., 
[249 249 249]
[248 248 248]
[248 248 248]] 
```

这三个点是什么意思，它没有打印所有的值？此特定图像为 125X150

谢谢。

编辑

```
import cv2.cv as cv
import numpy
import Image
 def normalize(arr):
  for i in range(3):
    minval = arr[...,i].min()
    maxval = arr[...,i].max()

    if minval != maxval:
        arr[...,i] -= minval
        arr[...,i] *= (255.0/(maxval-minval))
  return arr

 img=cv.LoadImage("test3.JPG")
 mat=cv.GetMat(img)
 a = numpy.asarray(mat)
 b = normalize(a)

 print b

with open('1.txt.',"w") as f:
f.write("\n".join(" ".join(map(str, x)) for x in (b)))

 im = Image.fromarray(b)
 im.save("12.jpeg") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:50:20.750

```
def normalize(arr):
    """
    Linear normalization
    http://en.wikipedia.org/wiki/Normalization_%28image_processing%29
    """
    # Do not touch the alpha channel
    for i in range(3):
        minval = arr[...,i].min()
        maxval = arr[...,i].max()
        if minval != maxval:
            arr[...,i] -= minval
            arr[...,i] *= (255.0/(maxval-minval))
    return arr 
```

* * *

```
import numpy as np
import Image

def normalize(arr):
    for i in range(3):
        minval = arr[..., i].min()
        maxval = arr[..., i].max()

        if minval != maxval:
            arr[..., i] -= minval
            arr[..., i] *= (255.0 / (maxval - minval))
    return arr

img = Image.open('orig.jpg').convert('RGBA')
a = np.array(img)
b = normalize(a)

im = Image.fromarray(b)
im.save('output.jpg') 
```

`orig.jpg`：

![在此处输入图像描述](../Images/ffb7fd633e26c5a8c8f1a4583f0d1463.png)

运行脚本产生`output.jpg`：

![在此处输入图像描述](../Images/6fc1332f73e0c5603d4a04b7732bf245.png)

# iphone - Old School Feel 文本一次出现一个字母的问题

> ID：15465274
> 
> 赞同：1
> 
> 时间：2013-03-17T19:36:01.310
> 
> 标签：iphone, ios, nstimer

好吧，正如标题所说，我正在尝试创建一个老式的学校类型的应用程序。我的意思是计算机编程为绿色，黑色，文本（编程）（如终端/Windows程序输入），我试图让我的字符串一次显示在屏幕上一个字母。所以我决定尝试一个例子，这是我的代码，任何建议都会很棒！:)

```
 instructionsArray = [[NSMutableArray alloc] initWithObjects: nil];
    instructionsString = @"Lorem ipsum dolor sit er elit lamet, ...";

  for (int i = 1 ; i <= [instructionsString length]; i++) {
    [instructionsArray addObject:@"%@", [NSString stringWithFormat:[instructionsString characterAtIndex:i]]];
} 
```

所以基本上我有这个示例字符串；instructionsString（它只是一个 NSString）和这个 MutableArray。我认为将字符串转换为字符到数组中最简单，然后使用 NSTimer，显示数组的每个项目，任何更简单更好的方法都将不胜感激！

谢谢

编辑：谢谢 Hypercube 我将代码更改为：

```
 [Instructions.text stringByAppendingString:[remainingBuffer subStringWithRange: NSmakeRange(1, remainingBuffer.length - 1)]]; 
```

但是，我仍然收到此错误和警告： No visible @interface for 'NSString' 声明选择器 'subStringWithRange' 并且警告 'NSmakeRange' 对于 C99 无效

任何帮助将不胜感激谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:48:31.583

这很奇怪，因为就像一周前一样，我写了一些东西来在视觉上模拟点阵打印机，它面临着同样的问题。

我会完全忘记字符数组，因为无论如何这就是字符串，只保留一个`NSString remainingBuffer`对象。每当 NSTimer 说是时候打印一个字符时，如果缓冲区不为空，则从中读取第一个字符，打印该字符，然后从缓冲区中删除第一个字符，如下所示：

```
remainingBuffer = [remainingBuffer subStringWithRange: NSmakeRange(1, remainingBuffer.length - 1)]; 
```

如果`NSString`设计正确，它不应该为文本分配任何新数据，而只是返回一个 NSString，其指向其字符数组的内部指针比旧字符串大一个字符长度。

每当您需要告诉控制台打印某些内容时，只需附加到`remainingBuffer`

快乐编码！

# cocoa-touch - 在 Cocoa/Cocoa-Touch 中，谁管理视图的大小？

> ID：15465277
> 
> 赞同：0
> 
> 时间：2013-03-17T19:36:10.133
> 
> 标签：cocoa-touch, cocoa

我有一个父视图控制器想要以模态方式呈现一个子视图控制器。我希望这个子视图占据整个屏幕。子视图由一个表视图组成，我在我的子视图控制器中以编程方式创建它。然而，初始化器`UITableView`期望被赋予一个`CGRect`它的边界。大概（因为它是唯一的孩子）它应该是完整的可用尺寸。

我的问题是视图控制器本身是否也有自己的大小属性，因为它在某种程度上也充当隐式视图，或者我是否需要以某种方式将大小传递给视图控制器的初始化程序？这似乎不对。

我认为让我感到困惑的一件事是，在 Cocoa-touch 中我呈现的是视图*控制器*，而不是视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:44:40.013

我想我回答了我自己的问题：似乎所有视图控制器都充当隐式视图，因为它们具有`view`表示控制器所代表的物理视图的单个属性。因此，它确实有自己的大小，我可以传递`self.view.bounds`给表视图初始化程序。

# php - 从 MySQL 获取信息以显示 14 天到期的项目

> ID：15465281
> 
> 赞同：-2
> 
> 时间：2013-03-17T19:36:43.027
> 
> 标签：php, mysql

我有一个用户在他们最后一次注册时键入的 PHP 程序，他们需要每年更新，所以我想将它显示给管理员，以便在用户应该更新前 14 天查看。

结构如下：

```
join_date, members_name, members_address, members_telephone, members_email 
```

我希望它们被显示，`join_date`格式为 yyyy/mm/dd

存储它的表称为`customer_tbl`.

到目前为止，这是我所尝试过的。

```
SELECT customers_tbl.join_date
FROM
customers_tbl
WHERE
'DATEADD(dd, -14, GETDATE())' = customers_tbl.join_date
ORDER BY
customers_tbl.join_date 
```

所以对于这一切，我想要的是显示加入日期在 14 天后到期的人。

目前我什么都没有显示。

感谢任何看到这个并提供建议的人。

第二次尝试仍然没有

```
 <?php
 error_reporting(E_ALL); 
 ini_set("display_errors", 1); 

 include('includes/dbconn.php');
 $query = "SELECT * FROM `customers_tbl`
 WHERE (
    MONTH('join_date') = MONTH(CURDATE())
    AND DAY('join_date') = DAY(CURDATE())
  ) OR (
    MONTH('join_date') = MONTH(DATE_ADD(CURDATE(), INTERVAL -14 DAY))
    AND DAY('join_date') = DAY(DATE_ADD(CURDATE(), INTERVAL -14 DAY))
  ) OR (
    MONTH('join_date') = MONTH(DATE_ADD(CURDATE(), INTERVAL -28 DAY))
    AND DAY('join_date') = DAY(DATE_ADD(CURDATE(), INTERVAL -28 DAY))
  )";

   $result = mysql_query($query) or die(mysql_error());
   $num_result = mysql_num_rows($result);
   if($num_result > 0){

   echo $result['join_date'];   
   }

   echo $result['join_date'];   

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:50:51.580

我可以告诉你怎么做，但我不会为你编程，原因与 John Conde 解释的相同。

*   构建一个数据库连接（我推荐使用 PDO）。
*   初始化一个 sql 查询，它选择当前日期等于或大于（join_date + 1 年 - 14 天）的所有用户
*   考虑添加一个名为 expire_date 的列，它会让您更容易检查，但是。您必须在插入用户时确定值。
*   创建一个具有特定 id 的 div。
*   使用 javascript（例如：jQuery 库）向您的后端（包含 pdo 数据库连接和查询的那个）执行 AJAX 请求。
*   选择与您的搜索匹配的所有用户，并将其存储到 JSON 数组 ($jsonArray) 中，其中包含与您创建的查询匹配的所有用户。
*   将 JSON 数组返回到 javascript (echo json_encode($jsonArray); & flush();)
*   使用 json 数组中的数据构建一个表格，您将使用该表格显示在您创建的 div 中。

我可能会更具体，但如果您显示一些代码，我们可以讨论这一点。

# java - getPreferredPreviewSizeForVideo() 是获得正确预览大小的好方法吗？

> ID：15465282
> 
> 赞同：0
> 
> 时间：2013-03-17T19:36:43.103
> 
> 标签：java, android, camera, preview

我正在构建一个显示相机预览的 android 应用程序的一部分。我想为当前设备设置正确的（最佳）预览尺寸。

为此，我使用了以下代码：

```
public void surfaceChanged(SurfaceHolder surfaceHolder, int format, int w, int h) {
    Parameters parameters = camera.getParameters();
    List<Size> sizes = parameters.getSupportedPreviewSizes();

    // the list seems to be in that order, that the best quality is the first element
    parameters.setPreviewSize(sizes.get(0).width, sizes.get(0).height);

    camera.setParameters(parameters);
    camera.startPreview();
} 
```

现在我的问题是，以下方法是否会更好地为任何设备获得最佳预览质量？

```
public void surfaceChanged(SurfaceHolder surfaceHolder, int format, int w, int h) {
    Parameters parameters = camera.getParameters();

    Size preferredSize = parameters.getPreferredPreviewSizeForVideo();
    parameters.setPreviewSize(preferredSize.width, preferredSize.height);

    camera.setParameters(parameters);
    camera.startPreview();
} 
```

目前我只有一台设备（Nexus 4），在这台设备上两种方法的结果相同。但我想知道，你会建议哪种方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-03T08:10:25.560

我真的不推荐使用这种方法。在 Galaxy S4 上，此方法返回 176x144 的首选视频预览大小。似乎开发人员在这里不小心返回了最小的而不是最大的尺寸……如果您将其用作预览，它看起来很难看，甚至会破坏录制的视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:51:41.310

从文档中`getPreferredPreviewSizeForVideo()`：

> 摄像机应用程序应将预览大小设置为不大于首选预览大小的值。换句话说，预览尺寸的宽度和高度的乘积不应大于首选预览尺寸的乘积。

因此，由于它基本上说预览不应大于首选大小，因此此方法*应*返回可用的最大预览大小。

我还建议使用该方法，因为`getSupportedPreviewSizes()`不能*保证*返回的列表是有序的。我还没有看到出现故障，但这并不意味着每台设备都会兑现它。

# php - PHP - cURL 发布到网站 -> 模拟浏览器（执行 javascript） -> 返回 html 结果

> ID：15465290
> 
> 赞同：3
> 
> 时间：2013-03-17T19:37:47.450
> 
> 标签：php, javascript, curl

我想知道是否有可能（一切皆有可能）使用 cURL 发布到网站（模拟登录）然后模拟浏览器（允许 javascript 处理登录）然后在所述脚本运行后返回 html 结果？

这是一个进程树。

cUrl -> login.php -> 模拟浏览器运行 javascript -> 返回 html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:23:48.570

phantomjs.org/index.html 做了我需要做的事情，感谢您的建议:)

# html - 如何使图像的背景文本居中

> ID：15465291
> 
> 赞同：0
> 
> 时间：2013-03-17T19:37:56.160
> 
> 标签：html, css, background

标题几乎说明了这一点，我有一张图片，上面有文字。而且我想保持它始终居中，水平和垂直。现在我正在做

```
headerText: {
    position: absolute;
    top: 40%;
    left: 5%;
} 
```

但它似乎不适用于不同的分辨率。那么还有其他方法可以实现这种布局吗？

[链接](http://stavarov-ubytovna.cz/index.html)到网站（黄色标题是我要居中的文字）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:42:52.663

只需将跨度移动到图像标签之前，如下所示：

```
<div class="header">
    <span class="headerText">Ubytovna Stavařov Přerov</span>´
    <img src="css/title578145459.png" class="headerImage left">
    <img src="css/title756941752.png" class="headerImage right">            
</div> 
```

你的标题文本css需要是

```
.headerText {
    float: left;
    width: 100%;
    text-align: center;
    position: absolute;
    top: 40%;
    z-index: 1;
    color: yellow;
    font: bolder 6em justus;
    font-style: oblique;
} 
```

那应该可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T19:48:40.950

另一种方法是将以下 CSS 添加到 .headerText 样式中：

```
width: 100%;
text-align: center;
left: 0; 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T19:42:09.027

如果您可以将文本放在 div 或 span 中，那么您可以轻松地将它们对齐以居中。随着挖掘，你所需要的只是

```
margin: auto 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T19:43:26.807

那应该这样做：

```
headerText: {
    position: absolute;
    top: 40%;
    left: 5%;
    margin: auto;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T19:44:57.300

第一：后面的冒号`headerText`应该去掉。第二：我假设`headerText`是一个类选择器，所以你必须在前面加上`.`一个`headerText`

我建议将图像设置为`background-image`. 然后您可以执行以下操作然后：

```
.headerText {
    background-image: url(path/to/your/image.png)
    background-position: center center;
    background-repeat: no-repeat;
} 
```

但这取决于您的图像是否必须是页面内容的一部分，或者它只是设计/样式。该解决方案仅在后一种情况下才有意义。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-17T20:40:26.357

垂直居中的简单修复。

```
.headerText{
  position:absolute;
  top:0px;
  line-height:190px;
} 
```

确保为不同的分辨率修改高度，具体取决于标题文字的换行位置 - 大量行高看起来很糟糕，换行。

水平居中也很快：

```
.headerText{
  position:absolute;
  left:0px;
  right:0px;
  text-align:center;
} 
```

现在都在一起了：

```
.headerText{
  position:absolute;
  top:0px;
  left:0px;
  right:0px;
  line-height:190px;
  text-align:center;
} 
```

# c++ - 具有类型的 C++ 方法

> ID：15465297
> 
> 赞同：0
> 
> 时间：2013-03-17T19:38:45.313
> 
> 标签：c++, class, templates, return

有没有办法在这个例子中使用模板解决方案或其他东西？现在 C 类中的 parse() 函数返回类型不同，具体取决于使用的类型。

我有A类：

```
class A {

    std::vector<SomeClass*> parseData(const char *data);
} 
```

然后我有B级

```
class B {

    std::string parseData(const char *data); } 
```

然后我想在C类中调用正确的类方法：

```
class C {

    std::vector<SomeClass*> parse { A::parseData(_data); }
    std::string parse { B::parseData(_data); }

    void setData(std:string data) { _data = data; }

    std:string _data;
}

int main()
{
    C c1.setData(data_with_many_strings_and_numbers);
    C c2.setData(data_with_one_string);
    std::vector<SomeClass*> someClassData = c1.parse();
    std:string someString = c2.parse();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:44:44.090

如果这些调用执行不同的任务，您最好有两种单独的方法。考虑将此实现更改为以下类型：

```
class C {

    std::vector<SomeClass*> parseVector { A::parseData(_data); }
    std::string parseString { B::parseData(_data); }

    void setData(std:string data) { _data = data; }

    std:string _data;
}

int main()
{
    C c1.setData(data_with_many_strings_and_numbers);
    C c2.setData(data_with_one_string);
    std::vector<SomeClass*> someClassData = c1.parseVector();
    std:string someString = c2.parseString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:46:38.213

不，你不能按照你想做的方式去做你想做的事。解析本质上是一个运行时问题，你不能像那样决定要即时返回什么。您需要以某种方式直接或通过可以告诉您已阅读的类型的包装器以某种方式使类型返回子类型。然后，您可以注册具有责任链的解析器。注册这个责任链可以从模板化的函数调用中受益，但它需要将它们包装在一个类型隐藏的封装器中，而不是多态化你的静态类型以在这些类型中调用相同的命名函数（可能是浪费时间......也可以只是子类型一个抽象基础，除非你被迫这样做）。

无论如何，您需要一种与您现在正在做的完全不同的方法。

# java - Introspector 发现不再存在的属性

> ID：15465299
> 
> 赞同：0
> 
> 时间：2013-03-17T19:39:14.680
> 
> 标签：java, glassfish, glassfish-3, introspection

我在一个我已经工作了很长时间的 Java EE 6 应用程序中依赖于对 XML 处理的自省。到目前为止，它工作得很好。但是，我不得不重命名属性设置器名称。问题是`Introspector.getBeanInfo(Class<?>)`，即使在我检测到旧的和新的二传手之后

*   停止使用 JRebel，
*   清除了我的 Maven 存储库，
*   吹走 GlassFish 并安装了一个新的，然后
*   重建我的网络应用程序。

另外，我确保刷新了内省的缓存：

```
public class BeanUtils {
    public static Map<String, Class> propertyTypes(Class beanType) throws Exception {
        HashMap<String, Class> propertyTypes = new HashMap<>();
        for (PropertyDescriptor descriptor : Introspector.getBeanInfo(beanType).getPropertyDescriptors()) {
            propertyTypes.put(descriptor.getName(), descriptor.getPropertyType());
        }
        return propertyTypes;
    }
    // Added this to flush the introspector
    static {
        Introspector.flushCaches();
    }
} 
```

这是我正在反省的课程：

```
public class AdhocUnavailableTimesRequestTag
{
    public AdhocUnavailableTimeRequestTag[] getAdhocUnavailableTimes()
    {
        return adhocUnavailableTimes;
    }

    public void setUnavailableTimes(AdhocUnavailableTimeRequestTag[] adhocUnavailableTimes)
    {
        this.adhocUnavailableTimes = adhocUnavailableTimes;
    }

    private AdhocUnavailableTimeRequestTag[] adhocUnavailableTimes;
} 
```

并调用`BeanUtils.propertyTypes(AdhocUnavailableTimesRequestTag.class)`返回：

```
"adhocUnavailableTimes" => class [LAdhocUnavailableTimeRequestTag;
"class" => java.lang.Class"
"unavailableTimes" => class [LAdhocUnavailableTimeRequestTag; 
```

`unavailableTimes`什么可能导致内省者在它不再存在时捡起它？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:52:54.957

这将是方法的名称`setUnavailableTimes`。您可以通过将方法重命名为`setAdhocUnavailableTimes`.

# objective-c - FBFriendPickerViewController 没有滚动到最后一个单元格：Facebook SDK 3.2 中的错误

> ID：15465304
> 
> 赞同：0
> 
> 时间：2013-03-17T19:39:30.600
> 
> 标签：objective-c, facebook

我正在使用 FBFriendPickerViewController 来显示 facebook 朋友。在 Facebook SDK 3.1 中它工作正常，但最近我升级到 Facebook SDK 3.2 现在，当添加 UISearchBar 作为画布视图的子视图时，您无法再滚动到最后一个单元格

```
CGFloat searchBarHeight = 44.0;
FBsearchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0,0,
            self.view.bounds.size.width,
            searchBarHeight)];
FBsearchBar.autoresizingMask = FBsearchBar.autoresizingMask | UIViewAutoresizingFlexibleWidth;
FBsearchBar.delegate = self;
FBsearchBar.showsCancelButton = NO;

[self.canvasView addSubview:FBsearchBar];
CGRect newFrame = self.view.bounds;
newFrame.size.height -= searchBarHeight;
newFrame.origin.y = searchBarHeight;

self.tableView.frame = newFrame; 
```

有人对此有解决方案吗？我升级到 Facebook SDK 3.2 是因为引入了 FBWebDialogs 用于在您自己的墙上或朋友的墙上发布消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:32:36.823

我终于找到了能够选择最后一个条目的技巧：

newFrame.size.height -= 2*searchBarHeight;

# java - 如何创建自适应 Android 应用

> ID：15465308
> 
> 赞同：0
> 
> 时间：2013-03-17T19:40:03.507
> 
> 标签：java, android, user-interface, dynamic, android-fragments

我希望 Android 应用程序能够根据用户所在的用户组以不同的方式显示和行为。例如，用户登录，应用程序告诉服务器它是哪个用户。从服务器返回的信息可能因用户而异，因此我希望应用程序能够创建与信息匹配的不同 UI 元素。

可能会改变的事情是：

*   根据不同的索引对数据列表进行排序
*   具有不同输入字段的对话，以及不同数量的对话
*   颜色和图标可能会改变，尽管这不应该那么难。
*   也许功能可能完全被排除在外，例如在数据库中添加/删除字段，显示不同的图表等。

很抱歉这含糊不清，也许问这个笼统的问题并不聪明，但我还不知道应用程序的细节，只是大纲，我想从某个地方开始。

是唯一的办法做到这一点

```
if(condition)
   //intitialize one GUI element
else if(condition2)
   //initialize another GUI element 
```

直到无穷大，还是有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:49:37.970

同事们，为什么不使用策略模式呢？

在我们的案例中，我建议：

1) 在将由具体类实现的接口中分离所需的行为。例如：

```
public interface IViewBehavior {
    public void setSorting();
    public void setFields();
    public void setColors();

}
public interface IDataBehavior {
    public void setData(); 
} 
```

2）使用组合并通过委托将这些行为集成（添加）到 Application 对象中：

```
public class RickardApp extends Application {

    IDataBehavior dataBehavior;
    IViewBehavior viewBehavior;

    public void setDataBehavior(IDataBehavior dataBehavior) {
        this.dataBehavior = dataBehavior;
    }

    public void setViewBehavior(IViewBehavior viewBehavior) {
        this.viewBehavior = viewBehavior;
    }

} 
```

set*Behavior() 方法将动态定义应用程序的行为。我们只需要在知道细节时创建“行为”类。

# javascript - 检查是否是 url 正则表达式的一部分

> ID：15465313
> 
> 赞同：2
> 
> 时间：2013-03-17T19:40:33.283
> 
> 标签：javascript, regex

我在导航树中有节点。我想选择属于 url 的所有节点，以便突出显示它们。我让它工作但忘记了一个极端情况，即 url 的最后一部分以相同的字符串开头。

在这种情况下，如果有人在 url`/products/foobar-super`我希望它选择`/products`而`/products/foobar-super`不是`/products/foobar`.

```
describe('part of url', function () {

  it('matches /products and /products/foobar-super', function () {

    var current = '/producten/foobar-super';

    var nodes = [
      '/products',
      '/products/foobar',
      '/products/foobar-super',
    ];

    var result = [];

    nodes.forEach(function (node) {
      if (new RegExp(node + '.*').test(current)) {
        result.push(node);
      }
    });

    result.should.eql([
      '/products',
      '/products/foobar-super',
    ]);

  });

}); 
```

Jsfiddle 与测试：http: [//jsfiddle.net/RKDga/2/](http://jsfiddle.net/RKDga/2/)

不确定是否可以使用正则表达式，我猜的另一个解决方案是拆分节点和当前 url`/`比较它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:47:45.930

以下代码可以帮助您 [JSFIDDLE](http://jsfiddle.net/RKDga/4/)

```
 /*globals mocha: true, describe: true, it: true, beforeEach:true */
(function() {
    function assert(expr, msg) {
        if (!expr) throw new Error(msg || 'failed');
    }

    mocha.setup({
        ui: "bdd",
        ignoreLeaks: true
    });

    describe('part of url', function () {

      it('matches /products and /products/foobar-super', function () {

        var current = '/products/foobar-super';

        var nodes = [
          '/products',
          '/products/foobar',
          '/products/foobar-super',
        ];

        var result = [];
         ;
    var urllist =  current.split("/");
   var temp; 
    nodes.forEach(function (node) {
       temp = "";
      for(var i=1;i<urllist.length; i++){
            temp += "/"+ urllist[i];
          if(node == temp){
             result.push(node );
          }
      }
    });

 console.log(result);          

        assert(result[0] === '/products', 'first item should be /products');
        assert(result[1] === '/products/foobar-super', 'second item should be /products/foobar-super');

      });

    });

mocha.run();
}()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T19:52:55.327

这是另一个没有正则表达式的解决方案：

```
describe('part of url', function () {

  it('matches /products and /products/foobar-super', function () {

    var current = '/products/foobar-super';

    var nodes = [
      '/products',
      '/products/foobar',
      '/products/foobar-super',
    ];

    var result = [];

    nodes.forEach(function (node) {

      var node_parts = node.split('/');
      var current_parts = current.split('/');
      var match = true;

      node_parts.forEach(function (node_part, i) {

        if (node_part !== current_parts[i]) {
          match = false;
        }

      });

      if (match) {
        result.push(node);
      }

    });

    result.should.eql([
      '/products',
      '/products/foobar-super',
    ]);

  });

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T20:16:58.273

测试将通过，如果

```
new RegExp(node + '.*') 
```

改为

```
new RegExp(node + '(/|$)') 
```

它会阻止匹配，除非`node`后面跟着`/`或字符串的结尾。

# c# - 从到达时间和旅行时间计算发射时间

> ID：15465320
> 
> 赞同：3
> 
> 时间：2013-03-17T19:41:38.433
> 
> 标签：c#, datetime

我需要根据给定的到达和旅行时间计算发射时间。我已经研究过 DateTime，但我不太确定我会怎么做。我正在使用 monthCalander 以下列格式获取到达日期时间。

```
Example:

Arrival_time = 20/03/2013 09:00:00
Travel_time = 00:30:00

Launch_time = Arrival_time - Travel_time

Launch_time should equal: 20/03/2013 08:30:00 
```

有人可以告诉我一个简单的方法来实现这一点。非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T19:44:24.820

使用时间[跨度](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)：

```
DateTime arrivalTime = new DateTime(2013, 03, 20, 09, 00, 00);
// Or perhaps: DateTime arrivalTime = monthCalendar.SelectionStart;

TimeSpan travelTime = TimeSpan.FromMinutes(30);
DateTime launchTime = arrivalTime - travelTime; 
```

如果由于某种原因您不能使用`MonthCalendar.SelectionStart`获取 DateTime 并且您只有可用的字符串，您可以将其解析为 DateTime 如下（对于该特定格式）：

```
string textArrivalTime = "20/03/2013 09:00:00";
string dateTimeFormat = "dd/MM/yyyy HH:mm:ss";

DateTime arrivalTime = DateTime.ParseExact(textArrivalTime, dateTimeFormat, CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T19:53:39.537

您将混合使用 DateTime 对象和时间跨度。我已经模拟了一个小型控制台应用程序来演示这一点。

```
using System;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.Title = "Datetime checker";
            Console.Write("Enter the date and time to launch from: ");
            DateTime time1 = DateTime.Parse(Console.ReadLine());
            Console.WriteLine();
            Console.Write("Enter the time to take off: ");
            TimeSpan time2 = TimeSpan.Parse(Console.ReadLine());
            DateTime launch = time1.Subtract(time2);
            Console.WriteLine("The launch time is: {0}", launch.ToString());
            Console.ReadLine();
        }
    }
} 
```

我使用您的示例输入运行并获得了预期的输出，这应该可以满足您的需求。

我希望这可以帮助您及时赶上发布 :)

# ninject - 如果我们希望 GC 收集的实例被正确处理，必须使用哪个范围？

> ID：15465323
> 
> 赞同：1
> 
> 时间：2013-03-17T19:41:48.387
> 
> 标签：ninject, named-scope

`InParentScope`如果想要正确处理 GC 收集的实例，必须使用？如果不是，应该使用哪个 Scope 来代替？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T00:40:40.093

对象的任何范围，除了`InTransientScope()`在范围的生命周期结束时被释放。没有*正确*的范围，因为范围定义了对象的寿命，这取决于具体情况。

当一个对象被注入的对象被垃圾回收或被 Ninject 停用时，它是 d，因为它自己的范围已经结束`InParentScope()`。`Dispose`

**注意，如果 Parent 的 Scope 为`InTransientScope()`，则不会跟踪该对象，因此请谨慎使用。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T07:12:10.443

[如果https://github.com/ninject/ninject/wiki/Object-Scopes](https://github.com/ninject/ninject/wiki/Object-Scopes)未涵盖您的问题，我将很乐意根据您的后续跟进进行所需的任何更改。

# ios - 从 ViewDidLoad 调用按钮操作

> ID：15465328
> 
> 赞同：-1
> 
> 时间：2013-03-17T19:42:16.700
> 
> 标签：ios, objective-c

在调用操作按钮时，默认情况下从 viewDidLoad 说 id 的值是多少？例如

```
- (IBAction)findInvoice:(id)sender {
....
....
} 
```

我目前正在使用 [self findInvoice:nil]; 在 viewDidLoad 中，我将 Invoice 引用传递给可编辑的文本字段。有用。那是对的吗

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T19:53:45.197

好吧，这样做是可以的，但是在这种情况下，我更喜欢将逻辑移动到一个单独的方法中并从任何地方调用它。

```
- (void)findInvoice {
    ...
}

- (IBAction)findInvoiceButtonTapped:(id)sender {
    [self findInvoice];
}

- (void)viewDidLoad {
    [self findInvoice];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T19:55:14.680

您的通话没有问题。确保您没有`sender`将方法内部`findInvoice`用于任何其他目的。

当一个按钮被点击时，`(id)sender`应该是被点击的按钮。它表示`id`为数据类型。所以你可以手动传递 nil 或任何你需要的东西。

您可以通过两种方式调用此方法，

```
[self findInvoice:nil]; //sender should be nil;

[self findInvoice:self.settingsButton];//sender should be settingsButton; 
```

您也可以在单击按钮时触发它。

```
- (IBAction)findInvoice:(id)sender {

  UIButton *btnClicked = (UIButton *)sender; //it should be nil when called as [self findInvoice:nil];

} 
```

# android - DatePicker 的 setMinDate() 不起作用

> ID：15465330
> 
> 赞同：4
> 
> 时间：2013-03-17T19:42:31.677
> 
> 标签：android, datepicker

```
DatePicker datepicker = (DatePicker) view.findViewById(R.id.ad_date_picker);
datepicker.setMinDate(Calendar.getInstance().getTimeInMillis()); 
```

它只是行不通。它仅在 xml ( `android:minDate="mm/dd/yyyy"`) 中有效，但我需要将最小日期动态设置为当天。我的最低 API 是 11。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T20:03:54.697

***PS：解决方案以前可以工作，但现在可能已经过时了。***

尝试这样的事情。如果我理解正确，您希望将微调器的最小日期设置为今天的日期。它对我有用，没有任何错误：

```
 Calendar cal = Calendar.getInstance();
    cal.set(cal.get(Calendar.YEAR), cal.get(Calendar.MONTH), cal.get(Calendar.DAY_OF_MONTH), 0, 0, 0);
    long time = cal.getTimeInMillis();
    DatePicker datepicker = (DatePicker) findViewById(R.id.datePicker);
    datepicker.setMinDate(time); 
```

在你的 xml 我假设你有这样的东西：

```
<DatePicker
    android:id="@+id/datePicker"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

# database - servlet 页面从另一台 PC 调用数据库

> ID：15465332
> 
> 赞同：0
> 
> 时间：2013-03-17T19:42:39.087
> 
> 标签：database, servlets

**先生，我正在开发我最后一年的 b.tech 项目。**
我正在用jsp开发项目，我在一台电脑上有项目代码，我正在尝试连接到另一台电脑上的oracle数据库。
我正在调用 jsp 页面到 servlet 页面和具有数据库编码的 servlet 页面我已经编写了这个代码。

```
import javax.servlet.*;  
import javax.servlet.http.*;      
import java.sql.*; 
import oracle.sql.*;   
import oracle.jdbc.driver.*;
public class login extends HttpServlet  
{    
public void doPost(HttpServletRequest request, HttpServletResponse response)throws 
       IOException, ServletException{    
    String s1 = request.getParameter("username");

String s2 = request.getParameter("password");

    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try {
      // Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
     DriverManager.registerDriver(new oracle.jdbc.driver.OracleDriver());
Connection con = DriverManager.getConnection("jdbc:oracle:thin: @ip:1521:xe", "system",    
 "oracle");
Statement stmt=con.createStatement();
ResultSet rs=stmt.executeQuery("insert into data values('"+s1+"','"+s2+"')");
System.out.println("data inserted");

  }
    catch(Exception e)
  {    
    System.out.println(e); 
    }    
        }     
} 
```

这只是插入的一个例子。我不知道我是否做得对。它也说**oracle.sql**包不可用应该做什么请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:20:44.967

在 java 中，您只需要 jdbc 驱动程序，将其放在应用程序的类路径中，注册驱动程序并获得连接。

您使用的驱动程序类`sun.jdbc.odbc.JdbcOdbcDriver`对我来说并不熟悉，您应该使用`oracle.jdbc.OracleDriver`.

请注意，Oracle 提供了两个 jdbc 驱动程序[thin](http://www.orafaq.com/wiki/JDBC#Thin_driver)和[oci](http://www.orafaq.com/wiki/JDBC#OCI_driver)。您需要提供以获取连接的 url 略有不同。

（从没听说过这个[：](http://www.orafaq.com/wiki/JDBC#KPRB_driver) /）

# nginx - php-fpm 进程监控/分析

> ID：15465333
> 
> 赞同：17
> 
> 时间：2013-03-17T19:42:46.077
> 
> 标签：nginx, process, php

我最近遇到了一个问题，即 php-fpm 进程使用（如活动进程的数量）达到最大可用进程并停止执行其他脚本直到有问题的进程完成。

更详细地说，我当前的 php-fpm 设置是：

```
pm = static
pm.max_children = 100 
```

我正在观看 php-fpm 的状态页面，大部分时间显示：

```
total processes: 100
idle processes: 95-99
active processes: 1-5 
```

这是正常的。但是，每隔几分钟，活动进程计数会在几秒钟内跳到 100，然后恢复到正常的 1-5。在那段时间里，服务器上运行的所有其他脚本都只是在这段时间内卡住了。（从浏览器中您只需看到等待的页面）。

现在，我检查了它是否在特定的流量峰值中，但不是。它也可能发生在当天流量最少的情况下。

我相信某个脚本，甚至可能仅在特定情况下，会导致 php 出于某种原因简单地使用所有可用进程。

一旦我们从 5.2.X 迁移到 PHP 5.4.X，这个问题就开始了

我们目前有大约 60 个网站，因此很难浏览每个网站的页面并进行检查。

nginx 日志中没有任何内容（反正没有什么重要的，有一些通知等）。

我正在尝试做的是以某种方式跟踪/配置文件/监控哪个 php-fpm 脚本正在使用这些进程，所以我会知道从哪里开始寻找问题。

这可能吗？也许是不同的方法？

**更新**

这是 1 小时内 PHP-FPM 进程计数的图表，间隔为 1 分钟：

![图形](../Images/9397c8743b57a70a46ea1f75b484106a.png)

我已经用红色标记了我正在谈论的跳跃。峰值时的内存使用量保持不变

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-18T09:23:59.740

在您的 php-fpm 日志文件中，您应该能够看到如下内容：

```
 WARNING: [pool www-images] server reached pm.max_children setting (5), consider raising it. 
```

当活动进程的数量达到限制时。您应该能够将其与传入的请求相关联。

如果这没有显示导致问题的请求的任何模式，那么您应该将慢速日志记录添加到您的 php-fpm 配置中：

```
request_slowlog_timeout = 10
slowlog = /var/log/php-fpm/slow.$pool.log 
```

将为每个占用超过 slowlog_timeout 限制的请求记录堆栈跟踪。

如果仍然没有显示任何内容，那么您的内部应用程序日志记录应该显示减速发生的位置。

如果这没有足够的细节，那么你可以使用[strace](http://linux.die.net/man/1/strace)作为最后的手段，它将显示正在进行哪些系统调用。这将产生大量信息。我建议仅将其附加到`strace -p PID`PID 是 php-fpm 实例的 processID 的单个进程。

> 它也可能发生在当天流量最少的情况下。

这肯定会出现在 php-fpm 慢速日志记录中。但是，如果这仅向您显示什么请求很慢，但不能帮助您找出原因，您可以在 PHP-FPM 配置文件中使用 auto pre 和 post-pend 文件添加调试。

```
php_value[auto_prepend_file]=/php_shared/prepend.php
php_value[auto_append_file]=/php_shared/postpend.php 
```

## 或者真的很简单

您可以设置 PHP-FPM 状态页面。

将此添加到您的 PHP-FPM 池配置中：

```
pm.status_path = /www-status 
```

并通过 nginx 将请求传递给 PHP-FPM

```
location ~ ^/(www-status)$ {
    include       %mysite.root.directory%/conf/fastcgi.conf;
    fastcgi_pass   unix:%phpfpm.socket%/php-fpm-www.sock;

    # or IP address
    # fastcgi_pass 127.0.0.1:9000;

    #If you're fastcgi.conf doesn't set the query_string
    #pass the query string here instead.
    # fastcgi_param  QUERY_STRING  $query_string;

    fastcgi_index index.php;
    fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;

    allow 127.0.0.1;
    allow stats_collector.localdomain;
    allow watchdog.localdomain;
    deny all;
} 
```

然后访问 yoursite.com/www-status?full 将为您提供每个 php-fpm 进程的大打印信息，例如：

```
pool:                 www
process manager:      dynamic
start time:           18/Mar/2013:20:17:21 +1100
start since:          243
accepted conn:        3
listen queue:         0
max listen queue:     0
listen queue len:     0
idle processes:       3
active processes:     1
total processes:      4
max active processes: 1
max children reached: 0
slow requests:        0

************************
pid:                  6233
state:                Idle
start time:           18/Mar/2013:20:17:21 +1100
start since:          243
requests:             1
request duration:     631
request method:       GET
request URI:          /www-status
content length:       0
user:                 -
script:               /documents/projects/intahwebz/intahwebz/basereality/www-status
last request cpu:     0.00
last request memory:  262144 
```

顺便说一句，我敢打赌一些愚蠢的查询会锁定您的数据库。

# jquery - 使用 MySQL 查询和 PHP 的 JQuery 手风琴菜单

> ID：15465335
> 
> 赞同：0
> 
> 时间：2013-03-17T19:42:51.707
> 
> 标签：jquery, mysql

我正在尝试使用 2 个 MySQL 查询（1 个用于标题，1 个用于内容）和 PHP 来制作手风琴菜单。下面是我的代码 PHP 和 JQuery 代码，我似乎无法弄清楚如何使内容留在标题中。MySQL 中的所有内容都按顺序打印出来。任何帮助将不胜感激。

PHP 和 MySQL

```
 <div id="left"> 
    <div class="menu">
    <?php
     $sqlseasons = "SELECT * FROM seasons"; 
    $resultseasons = mysqli_query($dbc, $sqlseasons); 
    while ($row = mysqli_fetch_array($resultseasons)){ 
    $year_id = $row['year_id'];
    ?> 
    <h3><?php echo $row['seasonyear'] ?></h3>
     <?php 
    $sqlteam = "SELECT team.team_id, team.year_id, team.teamname 
    FROM team
     WHERE team.year_id = '$year_id'"; 
    $resultsteam = mysqli_query($dbc, $sqlteam); 
    while ($sqlrow = mysqli_fetch_array($resultsteam)){ 
    $teamid = $sqlrow['team_id']; 
    ?> 
    <p><a href="#" onclick="displaySeason('<?php echo $teamid ?>')" id="menu_teamname"><?php echo $sqlrow['teamname']; ?></a></p>
    <?php 
    } 
    mysqli_close(); } mysqli_close();?></div><button id="team-season">Add Team</button> 
```

jQuery

```
$(document).ready(function(){245\.      $('.menu').accordion();246\.  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:05:46.170

您需要添加更多 div

这里

```
 <div id="left"> 
        <div class="menu">
        <?php
         $sqlseasons = "SELECT * FROM seasons"; 
        $resultseasons = mysqli_query($dbc, $sqlseasons); 
        while ($row = mysqli_fetch_array($resultseasons)){ 
        $year_id = $row['year_id'];
        ?> 
        <h3><?php echo $row['seasonyear'] ?></h3>
         <?php 
```

# jenkins - 整合 Jenkins 电子邮件通知

> ID：15465337
> 
> 赞同：5
> 
> 时间：2013-03-17T19:43:21.790
> 
> 标签：jenkins

我有一个 Jenkins 项目，由 3 个简单的自由式工作组成，每个工作都有自己的构建奴隶。每个作业都绑定到一个单独的平台：linux、mac 或 windows。当开发人员提交他们的代码时，Jenkins 在轮询 repo 后不久，在每个构建从属设备上构建项目，每个项目都会向开发人员发送一封电子邮件，描述构建是失败还是成功。 **问题：**每个 scm 更改三封单独的电子邮件确实会向开发人员的收件箱发送垃圾邮件，尤其是那些喜欢经常提交小更改的人的收件箱。因此，他们可能会完全忽略这些电子邮件。

**问题：**有没有办法（通过插件或项目重组）将三封成功/失败电子邮件合并为一封电子邮件？我查看了*Email-ext*插件、*MultiJob*插件和*Build a multi-configuration project* 选项，似乎找不到更改项目结构的方法，因此只向开发人员发送一封电子邮件，描述哪些作业失败或成功。我怀疑您必须将作业合并到一个 MultiJob 项目中，并在发送之前检查在每个平台上构建的结果，但我不知道。关于詹金斯，我还没有弄清楚很多。

你们能给我的任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T19:51:47.873

“可编辑电子邮件通知”发布者（来自 email-ext）有一个设置来决定它如何处理矩阵（多配置）项目。

您可以将“矩阵项目的触发器”配置为“仅触发父作业”，这应该可以实现您想要的。

同样，您也可以将其配置为“每个配置的触发器”以获得您现在拥有的结果，或两者的“父级和每个配置的触发器”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-29T05:56:46.347

如果您有“n”个自由式工作，并且您必须收到一封电子邮件通知，那么请使用 jenkins 的 Multijob 插件。这是方法之一。在这里，您可以按顺序或并行运行您的作业。要将结果整合到一封电子邮件中，您需要额外的插件，例如 Copy Artifact、Groovy。

下面我举一个例子，我需要在一封电子邮件中获得 2 个自由式工作“工作 A”和“工作 B”的结果

（先决条件：- Multijob、Artifact、Groovy 插件已安装在 jenkins 中运行作业的节点应至少有 2 个执行程序）要遵循的步骤。

1.  创建一个多作业项目（将其命名为“Master”）
2.  在 Add Build Step ----> MultiJob Phase a. “在第 1 阶段”我添加了“作业 A”，在“第 2 阶段”添加了“作业 B”（因为我希望我的作业按顺序运行） b。如果您想并行执行作业，请在“阶段 1”中添加“作业 A”和“作业 B”
3.  “作业 A”和“作业 B”应检查复制工件的权限并添加项目以允许将工件复制为“主”（这将授予“主”遍历子作业结果的权限）
4.  现在对于“大师”，您需要在 Groovy 后期构建中添加 Groovy 脚本（添加后期构建操作 ---> Groovy Postbuild）

下面给出的是我用来遍历我的子作业结果然后获取通过百分比来决定我是否需要将主人的状态设置为成功或失败的 groovy 脚本。这里我的作业结果是 nunit 结果。

```
 import hudson.model.*
        import com.tikal.jenkins.plugins.multijob.*

        void log(msg) {
        manager.listener.logger.println(msg)
        }

        def boolean findpercent(int pass,int total) 
        {
        log 'Entered the function find percent' 
        def float percent = 0.0
        log percent
        percent = (pass/total) * 100
        log percent
        if(percent >= 90.0)
        {
            return true
        }else
        {
            return false
        }
        }

        threshold = Result.SUCCESS

        void aggregate_results() {
        def failed = false
        def  int totalTestCases = 0
        def  int  failedTestCases = 0
        def  int  passedTestcases = 0
        def  int skipTestcases = 0
        mainJob = manager.build.getProject().getName()
        job = hudson.model.Hudson.instance.getItem(mainJob)

        log '-------------------------------------------------------------------------------------'
        log 'Aggregated status report'
        log '-------------------------------------------------------------------------------------'

        log mainJob
        log job
        log manager.build.getNumber()
        log manager.build.getResult()

        job.getLastBuild().getSubBuilds().each { subBuild->
        subJob = subBuild.getJobName() 
        subJobNumber = subBuild.getBuildNumber()
        job1 = hudson.model.Hudson.instance.getItem(subBuild.getJobName())
        build = job1.getBuildByNumber(subJobNumber)
        log build
        log job1.getLastCompletedBuild().getResult()
        log job1.getLastCompletedBuild().getTestResultAction()
        log build.getResult()
        log subJobNumber 
        log subJob 
        log job1 
        log subBuild
        log build.getAllActions()
        log '-------------------------------------------------------------------------------------'
        log 'build.getTestResultAction()'
        log '-------------------------------------------------------------------------------------'
        log build.getTestResultAction()
        testResult = build.getTestResultAction()
        log testResult
        if (testResult != null) {
                total = testResult.getTotalCount()
                log total
                log totalTestCases
                totalTestCases += total
        log  totalTestCases 
                             failures = testResult.getFailCount()   
        log  failures 
        log failedTestCases  
                failedTestCases  +=    failures
        log failedTestCases  
                            skip = testResult.getSkipCount()
        log skip 
        log skipTestcases 
                skipTestcases +=  skip
                pass = total - (failures  + skip )
                log pass 
        passedTestcases += pass
        log pass 
        log passedTestcases 
                }
        }
        log 'Total testcases run'
        log totalTestCases 
        log 'Total failedTestCases'
        log failedTestCases 
        log 'Total skipTestcases'
        log skipTestcases 
        log 'Total passedTestcases'
        log passedTestcases
        log 'End Result'
        if(findpercent(passedTestcases,totalTestCases)) {
                   log 'success'
            manager.build.setResult(hudson.model.Result.SUCCESS)
        }else
           {
                    log 'failure'
            manager.build.setResult(hudson.model.Result.FAILURE)
        } 

         log 'time taken'
         log manager.build.getTimestampString()
         log 'Time End'

        }

        try 
        {
        aggregate_results()
        } 
        catch(Exception e) {
        log('ERROR: ${e.message}')
        log('ERROR: Failed Status report aggregation')

        } 
```

5.  现在在可编辑的电子邮件通知中，我使用 BUILD_LOG_EXCEPT 来获取所需的值。例如 ${BUILD_LOG_EXCERTT, start = "Total passedTestcases", end="End Result"} 这将返回变量 passTestcases 的值，因为它存在于日志 Total passedTestcases 和 End Result 之间

    注意：- 运行作业的从节点应至少有 2 个执行器。因为这里的 master 将一直运行，直到您的所有子作业都运行为止。因此，如果它按顺序运行，您将需要两个执行器。如果您需要并行运行，则需要 n 个执行器（n-1 个子作业和 1 个主作业）。

# php - 仅用于验证的 JavaScript 已被检查

> ID：15465340
> 
> 赞同：1
> 
> 时间：2013-03-17T19:43:28.670
> 
> 标签：php, javascript, jquery, codeigniter

我有一些使用 codeigniter 的 PHP 代码。如何检查标记为检查的字段的验证？我的代码如下。

您能否让我知道如何检查项目是否已检查并相应地强制验证？

```
<html>

<head>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <script type="text/Javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="<?php echo base_url(); ?>/site.css"></link>
</head>

<body>

    <script type="text/Javascript">

        $(function () {
            $('.checkall').click(function () {
                $(this).parents('fieldset:eq(0)').
                    find(':checkbox').attr('checked', this.checked);
            });
        });

    </script>

    <? $attributes = array('class' => '', 'id' => ''); ?>

    <? echo form_open('ShoppingListController', $attributes); ?>

    <div class="divTable">

        <fieldset>
            <!-- these will be affected by check all -->
            <div class="divRow">Product Name | Quantity | Packages</div>
            <div class="divRow"><input type="checkbox" size="100" class="checkall"> Check all</div>

            <br>

                <?php foreach ($records as $rec) {
                    ?>

                    <div class="divRow"><input type="checkbox">
                            <input size="5" type="hidden" value="<? echo $rec->id; ?>" name="id"></input>
                            <input size="20" type="text" value="<? echo $rec->name; ?>" name="name"></input>
                            <label for="quantity">Value <span class="required">*</span></label>
                            <span class="required"><?php echo form_error('quantity'); ?></span>
                            <input size="5" type="text" value="" name="quantity"></input>

                            <select name="package">
                                <option name="case">Case</option>
                                <option name="box">Box</option>
                                <option name="box">Single Bottle</option>
                            </select>
                    </div>                
                    <br> 
                        <?
                    }
                    ?>

                    </fieldset> 
                    </div>
                    <div><input type="submit" name="submit"/></div>
                    </form>

                    </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:09:04.197

您可以使用以下代码：

```
var divRows = $('.divRow');
var count = divRows.length;

divRows.each(function() {
   if ($(this).find('input[type=checkbox]').is(':checked')) {
       count--;
   }
});
if (count != 0) {
   alert(count + ' checkboxes not checked');
} 
```

[http://jsfiddle.net/SKgA8/](http://jsfiddle.net/SKgA8/)

# ruby - 在节点 heroku 项目上安装 gems

> ID：15465342
> 
> 赞同：5
> 
> 时间：2013-03-17T19:43:49.287
> 
> 标签：ruby, node.js, heroku, gem, compass-sass

我正在 heroku 上编写一个节点应用程序，该应用程序需要一个 gem，安装[指南针](http://compass-style.org)，用于[node-compass](https://github.com/nathggns/node-compass)。

但是，我似乎无法弄清楚如何在 heroku 上的节点应用程序中安装 gems。我有一个 Gemfile，看起来像这样。

```
source "https://rubygems.org"
gem 'compass' 
```

你以前成功地做到了这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-20T02:17:28.077

根据 Heroku[对此问题](https://stackoverflow.com/questions/18143977/install-a-gem-to-node-project-on-heroku)的官方回复：

> 您需要使用 heroku multi buildpack 才能同时拥有 Ruby buildpack 和 Node buildpack：[https ://github.com/ddollar/heroku-buildpack-multi](https://github.com/ddollar/heroku-buildpack-multi)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-06T10:33:02.533

除了 Gemfile，您还需要一个 buildpack 和一个 Gemfile.lock。我在这个稍微不同的问题的[答案中写下了我是如何做到这一点的，但我认为它也应该回答这个问题。](https://stackoverflow.com/a/30073828/180500)

# vb.net - 直接从共享点打开 .doc 文件

> ID：15465343
> 
> 赞同：3
> 
> 时间：2013-03-17T19:44:00.800
> 
> 标签：vb.net, sharepoint-2010, ms-word

我想从 sharepoint 库中打开 .doc 文件以在 C# 中进行编辑

我的代码是

```
Dim process As Process = New Process()
process.Start("https://somename.sharepoint.com/sites/C1/DocLib/mydoc.doc") 
```

它正在打开，但我无法在编辑后保存文档。

如何保存文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:51:05.080

您可以做的是使用office interop for word 打开文件，进行编辑然后将其保存在本地。之后，使用 sharepoint 的**Copy** web 服务覆盖文档库中的文件。

链接：

[复制方法](http://msdn.microsoft.com/en-us/library/copy%28v=office.12%29.aspx)

[字互操作](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.documentclass.save%28v=office.11%29.aspx)

让我知道您是否需要其他参考资料。

# java - 如何使异步 tcp 服务器继续侦听通道而不关闭它

> ID：15465347
> 
> 赞同：1
> 
> 时间：2013-03-17T19:44:27.650
> 
> 标签：java, networking, asynchronous, tcp

我正在尝试制作一个能够处理来自客户端的 1000 多个连接的服务器。这是部分学术，部分爱好项目，所以我有点想制作自己的解决方案，但我面临一个问题：当我开始监听连接并且有人连接时，TCP 连接在 5 秒后被 java 关闭。我知道这是来自我的 5 秒睡眠，但如果我删除它，它会立即返回。

这是我的服务器代码（精简）：

```
 final int SERVER_PORT = 9000;
    final String SERVER_IP = "10.0.0.201";

    AsynchronousChannelGroup group = null;
    try {
        group = AsynchronousChannelGroup.withThreadPool(threadPool);
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    // Create asynchronous server-socket channel bound to the default group.
    try(AsynchronousServerSocketChannel asynchronousServerSocketChannel = AsynchronousServerSocketChannel
            .open(group)) {
        if ( asynchronousServerSocketChannel.isOpen() ) {
            // Bind to local address
            asynchronousServerSocketChannel.bind(new InetSocketAddress(SERVER_IP, SERVER_PORT),
                    SERVER_SOCKET_CHANNEL_BACKLOG);
            // Display a waiting message
            System.out.println("Waiting for connections on ip:port " + SERVER_IP + ":" + SERVER_PORT);
            while (true) { // Not good?
                Future<AsynchronousSocketChannel> asynchronousSocketChannelFuture = asynchronousServerSocketChannel
                        .accept();
                try(AsynchronousSocketChannel asynchronousSocketChannel = asynchronousSocketChannelFuture.get()) {

                    final SocketAddress remoteAddress = asynchronousSocketChannel.getRemoteAddress();

                    System.out.println("Incoming connection from: " + remoteAddress);
                    final ByteBuffer incomingBuffer = ByteBuffer.allocateDirect(1024);

                    // Time to receive data.
                    asynchronousSocketChannel.read(incomingBuffer, incomingBuffer,
                            new CompletionHandler<Integer, ByteBuffer>() {

                                public void completed( Integer result, ByteBuffer buffer ) {

                                }

                                public void failed( Throwable exc, ByteBuffer buffer ) {
                                    if ( exc instanceof AsynchronousCloseException ) {
                                        // Someone closed the connection
                                        // while we where listening on it.
                                        System.out.println("We listened on the socket, but someone closed it.");
                                    }
                                }
                            });

                    try {
                        Thread.sleep(5000);
                    } catch (Exception e) {
                        System.out.println(e.toString());
                    }
                } catch (IOException | InterruptedException | ExecutionException ex) {
                    System.err.println(ex);
                }
            }
        } else {
            System.out.println("The asynchronous server-socket channel cannot be opened!");
        }
    } catch (IOException ex) {
        System.err.println(ex);
    }
} 
```

运行此代码并使用 netcat "nc 10.0.0.201 9000" 连接时，连接会在 5 秒后从 java/server 端重置（如果移除睡眠则立即重置）。

我怎样才能阻止它返回，并让它继续听？我是否采取了正确的方法来解决我的初始目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:48:55.443

一个可以满足我要求的工作示例：

```
 final int SERVER_PORT = 9000;
    final String SERVER_IP = "10.0.0.201";

    AsynchronousChannelGroup group = null;
    try {
        group = AsynchronousChannelGroup.withThreadPool(threadPool);
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    // Create asynchronous server-socket channel bound to the default group.
    AsynchronousServerSocketChannel asynchronousServerSocketChannel = AsynchronousServerSocketChannel.open(group);
    if ( asynchronousServerSocketChannel.isOpen() ) {
        // Bind to local address
        asynchronousServerSocketChannel.bind(new InetSocketAddress(SERVER_IP, SERVER_PORT),
                SERVER_SOCKET_CHANNEL_BACKLOG);
        // Display a waiting message
        System.out.println("Waiting for connections on ip:port " + SERVER_IP + ":" + SERVER_PORT);
        while (true) { // Not good?
            Future<AsynchronousSocketChannel> asynchronousSocketChannelFuture = asynchronousServerSocketChannel
                    .accept();
            final AsynchronousSocketChannel asynchronousSocketChannel = asynchronousSocketChannelFuture.get();

            final SocketAddress remoteAddress = asynchronousSocketChannel.getRemoteAddress();

            System.out.println("Incoming connection from: " + remoteAddress);
            final ByteBuffer incomingBuffer = ByteBuffer.allocateDirect(1024);

            // Time to receive data.
            asynchronousSocketChannel.read(incomingBuffer, incomingBuffer,
                    new CompletionHandler<Integer, ByteBuffer>() {

                        public void completed( Integer result, ByteBuffer buffer ) {
                         // Why flip it?
                            buffer.flip();
                            String msgReceived = Charset.defaultCharset().decode(buffer).toString();
                            System.out.print("Got stuff from the network: " + msgReceived);

                            // Empty the buffer, and listen for new
                            // messages.
                            incomingBuffer.clear();
                            asynchronousSocketChannel.read(incomingBuffer, incomingBuffer, this);
                        }

                        public void failed( Throwable exc, ByteBuffer buffer ) {
                            if ( exc instanceof AsynchronousCloseException ) {
                                // Someone closed the connection
                                // while we where listening on it.
                                System.out.println("We listened on the socket, but someone closed it.");
                            }
                        }
                    });
        }
    }
} 
```

# ssh - SSH client.py 不工作，显示连接错误

> ID：15465348
> 
> 赞同：0
> 
> 时间：2013-03-17T19:44:33.923
> 
> 标签：ssh, openssh

我的配置文件：

```
Host server
User new_user
HostName 10.0.1.193
Port 55555
LocalForward 3000 10.0.1.193:6000
IdentityFile ~/.ssh/server 
```

客户端.py

```
import xmlrpclib
s = xmlrpclib.ServerProxy('http://localhost:3000')
print s.pow(2,3)  # Returns 2**3 = 8
print s.add(2,3)  # Returns 5
print s.div(5,2)  # Returns 5//2 = 2

# Print list of available methods
print s.system.listMethods() 
```

服务器.py

```
from SimpleXMLRPCServer import SimpleXMLRPCServer
from SimpleXMLRPCServer import SimpleXMLRPCRequestHandler

# Restrict to a particular path.
class RequestHandler(SimpleXMLRPCRequestHandler):
    rpc_paths = ('/RPC2',)

# Create server
server = SimpleXMLRPCServer(("localhost", 6000),
                            requestHandler=RequestHandler)
server.register_introspection_functions()

# Register pow() function; this will use the value of
# pow.__name__ as the name, which is just 'pow'.
server.register_function(pow)

# Register a function under a different name
def adder_function(x,y):
    return x + y
server.register_function(adder_function, 'add')

# Register an instance; all the methods of the instance are
# published as XML-RPC methods (in this case, just 'div').
class MyFuncs:
    def div(self, x, y):
        return x // y

server.register_instance(MyFuncs())

# Run the server's main loop
server.serve_forever() 
```

我的 server.py 运行良好，但是当我运行 client.py 时，它给出了以下错误：

```
Traceback (most recent call last):
  File "client.py", line 4, in <module>
    print s.pow(2,3)  # Returns 2**3 = 8
  File "/usr/lib/python2.7/xmlrpclib.py", line 1224, in __call__
    return self.__send(self.__name, args)
  File "/usr/lib/python2.7/xmlrpclib.py", line 1578, in __request
    verbose=self.__verbose
  File "/usr/lib/python2.7/xmlrpclib.py", line 1264, in request
    return self.single_request(host, handler, request_body, verbose)
  File "/usr/lib/python2.7/xmlrpclib.py", line 1292, in single_request
    self.send_content(h, request_body)
  File "/usr/lib/python2.7/xmlrpclib.py", line 1439, in send_content
    connection.endheaders(request_body)
  File "/usr/lib/python2.7/httplib.py", line 954, in endheaders
    self._send_output(message_body)
  File "/usr/lib/python2.7/httplib.py", line 814, in _send_output
    self.send(msg)
  File "/usr/lib/python2.7/httplib.py", line 776, in send
    self.connect()
  File "/usr/lib/python2.7/httplib.py", line 757, in connect
    self.timeout, self.source_address)
  File "/usr/lib/python2.7/socket.py", line 571, in create_connection
    raise err
socket.error: [Errno 111] Connection refused 
```

我已经检查了我的 ssh 是否正常工作，我可以使用给定的配置 ssh 进入远程服务器，即

```
ssh server 
```

作品找到。谁能解释可能出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T18:33:27.963

您的服务器运行，也许它没有抱怨，但这并不意味着它“运行正确”或更明确地说，它并不意味着服务器处于客户端期望的工作状态。

上面的内容有点神秘：一些未知的东西出了问题，即使你还不知道出了什么问题，你想开始测试你知道应该工作的东西，并验证它们实际上是否工作。即使错误对您来说毫无意义，这也是一种有用的调试技巧。

在这种情况下，客户端错误消息是“连接被拒绝”，意思是“拒绝 [在服务器上]”。

试试这个：在终端/DOS 窗口中的“客户端”PC 上，运行：telnet [您的服务器 ip] [您的服务器端口]

您应该会遇到同样的错误 - 连接被拒绝。也许服务器实际上并没有打开端口。或者服务器打开了端口，但由于服务器上的防火墙，您无法在另一台主机上远程看到它。

此外，在同一主机上同时运行客户端和服务器代码有时可以揭示更多线索（它应该可以工作，但如果不能，那么可能存在不止一个问题）。

# django - Django存储手机号码，使用什么字段？

> ID：15465356
> 
> 赞同：10
> 
> 时间：2013-03-17T19:45:07.227
> 
> 标签：django, django-models

在我的模型中，我需要以以下格式存储手机号码 447182716281。我应该使用哪个字段？Django 有什么可以支持的吗？

例子

```
 mobile = models.IntegerField(max_length=12) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T19:53:43.293

电话号码必须是 CharFields。整数字段不会保留前导 0、+ 和间距。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T20:59:54.740

表单验证中有一个正则表达式字段。在模型中只使用 CharField。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T00:03:44.487

我认为这是一个有趣的问题，因为它确实取决于问题建模，CharField 工作正常，但看看这个：

[ORM 技巧](https://speakerdeck.com/jacobian/stupid-orm-tricks)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-21T05:16:21.443

在使用 models.IntegerField(default=0) 获取更大的数字时，它会给出错误确保此值小于或等于 2147483647。

所以更好的使用方法是。BigIntegerField 一个 64 位整数，很像 IntegerField，只是它保证适合从 -9223372036854775808 到 9223372036854775807 的数字。此字段的默认表单小部件是 TextInput。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-13T14:06:34.770

PostgreSQL IntegerField 无法正常工作，因此最好将 CharField 与 Django 一起使用。

```
Number=models.CharField(max_length=12) 
```

# php - AJAX 联系表无法发布数据

> ID：15465358
> 
> 赞同：1
> 
> 时间：2013-03-17T19:45:28.143
> 
> 标签：php, javascript, jquery, ajax, forms

所以我得到了这个 AJAX 联系表，我以前使用过它的代码。我无法弄清楚为什么它不起作用。

```
HTML
<div id="website-contact-form">
<form id="website_contact" name="website_contact">
        <input id="email-address-input" name="website-email" type="text" placeholder="Your email here" class="order-form-input" /><br />
        <textarea name="website-message" placeholder="Please give a brief description of what you have in mind, plus contact details." class="order-form-textarea"></textarea>
        <a href="#" id="submit-website-project" name="submit-website-project" class="send-button"></a>
</form>
</div> 
```

JS

```
<script type="text/javascript">
$(document).ready(function(){
    $('#submit-website-project').click(function (e) {

        e.preventDefault();
        if ($('#email-address-input').val() != ""){

                postForm("ajax/contact-website.php", "website_contact",
                function (data) {

                    if (data == "success") {
                        $('#website-contact-form').
                        html("<br />Thankyou for your enquiry. I'll "+
                             "get in touch shortly.");
                    } else {

                    alert("That didn't work. Try again?");
                    }
                });
        }
    });

}); //END DOCUMENT READY

function postForm(url, form_id, success_func) {
    $.ajax({
        type: "POST",
        url: url,
        data: $("#" + form_id).serialize(),
        success: function (data) {
            success_func(data);
        }
    });
}
</script> 
```

最后是我的 PHP

```
<?php

if (isset($_POST['email'])) {
    $_POST['email'] = trim(@$_POST['email']);

    $ToEmail = 'barneywimbush:gmail.com';
    $EmailSubject = 'Barneywimbush.com';
    $mailheader = "From: ".$_POST["email"]."\r\n";
    $mailheader .= "Reply-To: ".$_POST["email"]."\r\n";
    $mailheader .= "Content-type: text/html; charset=iso-8859-1\r\n";

    $MESSAGE_BODY = "Email: ".$_POST["email"]."";
    $MESSAGE_BODY .= "Comment: ".nl2br($_POST["project_description"])."";

    $res = mail($ToEmail, $EmailSubject, $MESSAGE_BODY, $mailheader); // or die ("Failure")

    if ($res) {
        echo "success";
    }
    else {
        echo "failed";
    }
}
else {
    echo "failed";
} 
```

我只是收到警报“这不起作用。再试一次？”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T19:58:07.940

您的 $_POSTs 的 PHP 变量不正确，在检查网络面板时，您的表单正在发送，

**网站邮箱：** yes@test.com

**website-message:**测试数据

虽然您的 PHP 代码正在查找 $_POST['email']，但它应该是 $_POST['website-email'];

更改输入元素的名称属性以更改请求的参数名称。

# c# - EF中的循环依赖

> ID：15465364
> 
> 赞同：1
> 
> 时间：2013-03-17T19:46:01.617
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework

该项目是一个模块化的形式。每个模块都位于一个单独的 Laibary 中。但有时需要在模块之间进行通信。例如，在 EF 中创建关系。但是当我做得很好时，将项目 A 的引用添加到 B 通常不是问题。但是当我想将B的项目引用添加到A时，遇到以下错误。

**无法添加对的引用。将此项目添加为参考将导致循环依赖**

每个模块都是h代码的一个项目，每个模块都位于一个项目中。每个模块都有自己的Domain字段，并且定义了它的属性。(ORM) 使用 EF。有时他们会接触到模块。例如，一个模块作为希望相互通信的新闻评论。几个有关系。

但是要插入这个关系的引用 让我的其他项目。我遇到这个错误新闻模块

```
public class News
{
    public string Title { get; set; }
    public string Text { get; set; }

    public IList<Comment> Comments { set; get; }
} 
```

评论模块

```
public class Comment
{
    public string Title { get; set; }
    public string TextComment { get; set; }

    public News  New { set; get; }
} 
```

如果您能帮助我更好地设计项目，我将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T19:48:01.730

我在这里看到两个选项：

1.  将共享代码移动到第三个库，以便 A 和 B 将引用它，但不能相互引用
2.  将 A 和 B 合并到一个库中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-27T07:57:20.667

您将两个实体链接在一起，正如我所见过的几乎所有实体框架教程中所推荐的那样。但是，我只会在小型项目中这样做，您可以将所有域模型放在一个程序集中。

如果您正在处理一个更大的项目，您需要根据子域将域模型分离到不同的程序集中，我不会将两个实体链接在一起。相反，我会问自己，是新闻对其评论数据负责，还是评论对新闻数据负责？

通过这种方式，您可以找到根实体，这取决于上下文可能是它们中的任何一个。例如，如果您决定新闻是根，那么新闻将包含评论，但评论应该只引用新闻 ID，因为它们不负责新闻数据。

# image - 如何使用 mongodb/mongoose 在我的网页上加载图像？

> ID：15465365
> 
> 赞同：0
> 
> 时间：2013-03-17T19:46:07.760
> 
> 标签：image, node.js, mongodb

当用户加载我的网页时，我想像任何其他网站一样加载图像，除了图像存储在我的 mongo 数据库中。如果重要的话，我正在使用猫鼬/模式。我所有的图片都很小（不到 1mb），所以我不需要 gridfs。因此，本质上，当我在服务器上收到获取图像的请求时，如何返回存储在 mongodb 中的图像？

# rest - CakePHP：RESTful 前缀动作

> ID：15465378
> 
> 赞同：1
> 
> 时间：2013-03-17T19:47:03.443
> 
> 标签：rest, cakephp

我在 CakePHP 中做 REST 应用程序时遇到麻烦，请求**GET /admin/quote_authors/1.json**将我发送到“view”操作，而不是“admin_view”。

*   路由.php：

    ```
    Router::parseExtensions('json');
    Router::mapResources(array(':controller'), array('prefix' => '/admin/')); 
    ```

*   QuoteAuthorsController.php：

    ```
    public $components = array('RequestHandler');

    public function admin_view($id) {
        var_dump('admin view');
    }

    public function view($id) {
        var_dump('view');
    } 
    ```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:35:40.717

因为无法评论，所以回答。

您似乎缺少请求**/admin/quote_authors/view/1.json的操作部分**

因此，对于其他请求，它通常类似于**/admin/:controller/:action/:params**。

而且，当然，就像 thaJeztah 说的那样，删除前缀的斜杠（这就是它给你那个错误的原因，它正在考虑参数“1”作为它必须执行的操作）

# android - 如何将listview项目中的更改更改为它后面的arraylist项目

> ID：15465380
> 
> 赞同：0
> 
> 时间：2013-03-17T19:47:12.243
> 
> 标签：android, listview, binding, listviewitem

我需要具有可编辑字段的异构项目的动态列表。看起来有点复杂，但本质上用户可以添加/删除项目；每个项目可以是不同的类型（我有一个名为 的抽象类`Action`，每个单一类型都对其进行扩展），并且具有可编辑的字段（即 EditText）。

我使用了一个`ListView`（这似乎是更自然的方式），我做了一个适配器，扩展`ArrayAdapter`，绑定到一个`ArrayList<Action>`，但我注意到对列表项的更改不支持 ArrayList 的相应项。

很难解释，但我这样做：

启动应用程序，添加某种类型的元素，在带有 id 的 EditText 上写一些东西`R.id.action_add_text`，然后我期望

```
String text = ((EditText) actions.get(0).view.findViewById(R.id.action_add_text)).getText().toString(); 
```

反映我在那个 EditText 中写的内容，但它仍然是空的。

我哪里错了？我需要获取当前列表状态来保存它，但我不知道在哪里检索它，有没有办法“双向”绑定，以便将 UI 更改报告回适配器？或者我应该遍历 listview 子项（但是适配器的功能是什么）？

请耐心等待，我搜索了很多但找不到任何有用的东西（也许我找不到合适的词来搜索）

编辑：ArrayAdapter 实现 import java.util.ArrayList;

```
import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class ActionAdapter extends ArrayAdapter<Action> {
    Context context; 
    int layoutResourceId;    
    ArrayList<Action> actions = null;

    public ActionAdapter(Context context, int layoutResourceId, ArrayList<Action> actions) {
        super(context, layoutResourceId, actions);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.actions = actions;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        ActionHolder holder = null;

        if(row == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(actions.get(position).viewId, parent, false);

            holder = new ActionHolder();
            holder.title = (TextView)row.findViewById(R.id.action_title);

            row.setTag(holder);
        }
        else
        {
            holder = (ActionHolder)row.getTag();
        }

        Action action = actions.get(position);
        holder.title.setText(action.title);

        return row;

    }

    static class ActionHolder
    {
        TextView title;
    }
} 
```

同时我认为我需要覆盖 getItemViewType 和 getViewTypeCount，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:29:06.847

答案出现在观看 youtube.com/watch?v=wDBM6wVEO70 ：

虽然可以创建这样一个复杂的列表（具有*非静态*项的异构、动态列表，在非只读项（如 textviews）的意义上*是非静态*的），但在这种情况下最好避免使用列表视图。它们非常昂贵和复杂。

在小型数据集和一堆特殊情况的情况下，就像我所面临的那样，将线性布局放在滚动视图中并以编程方式填充它要简单得多。

# matlab - MATLAB：从编程 GUI 返回变量

> ID：15465381
> 
> 赞同：2
> 
> 时间：2013-03-17T19:47:18.293
> 
> 标签：matlab, user-interface, variables

我一直在尝试编写一个 GUI，它应该接收一个变量作为输入并执行几个生成另一个变量的操作。GUI 将有一个关闭 GUI 的按钮。

我不是（也不想）使用 GUIDE。

下面，我提供了一个简单的 GUI 工作示例，它简单地将一个添加到输入变量。“完成”按钮关闭 GUI，但**我找不到将变量导出到工作区的方法**。

```
% Is this the correct way to initialize the function for what I am trying to do?
function outputVariable = exampleGUI(inputVariable) 

    % Initialize main figure
    hdl.mainfig = figure();

    % Add Button
    hdl.addPushButton = uicontrol(hdl.mainfig, 'Units', 'normalized',
                                  'Position', [0.05 0.6 0.3 0.25], 'String',
                                  'Add One', 'Callback', @addOne);
    % Done Button
    hdl.donePushButton = uicontrol(hdl.mainfig, 'Units', 'normalized',
                                   'Position', [0.65 0.6 0.3 0.25], 'String',
                                   'Done', 'Callback', @done);
    % Static text
    hdl.sliceNoText = uicontrol(hdl.mainfig, 'Style', 'text',
                                'Fontsize', 16, 'Units', 'normalized', 
                                'Position', [0.35 0.2 0.3 0.25]);

    function addOne(~, ~, ~)
        inputVariable = inputVariable + 1; % add one to the current inputVariable
        set(hdl.sliceNoText, 'String', num2str(inputVariable)); % change static text
        newVariable = inputVariable; % new variable to be exported
    end

    function done(~, ~, ~)   
        delete(hdl.mainfig); % close GUI
    end

end 
```

我想做类似的事情：

在工作区中：

```
outputVariable = exampleGUI(inputVariable) 
```

在向输入变量添加一定次数后，我将按下“完成”按钮，GUI 将关闭，工作区将包含 inputVariable 和 outputVariable。

非常感谢。

弗内里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T20:53:47.193

这是您可以做的一个示例。您可以做很多事情来使用您想要的功能。通常，除了输入和输出以及 guihandles 之外，我不喜欢在整个函数的工作区中有任何变量。我使用`setappdata`and`getappdata`来存储其他变量，并让它们可以被回调访问。这取决于您，但以下是如何使您的简单 gui 工作的示例。这`CloseRequestFcn`允许您处理如果用户只是关闭 gui 会发生什么。希望这可以帮助。此外，`waitfor`阻止函数返回，直到函数关闭。如果需要，您还可以将图形的`'WindowStyle'`属性设置`'modal'`为强制用户在关闭 gui 之前输入。

```
function outputVariable = exampleGUI(inputVariable) 

    % Any variables declared here will be accessible to the callbacks
    % Initialize output
    outputVariable = [];

    % Initialize newVariable
    newVariable = [];

    % Initialize main figure
    hdl.mainfig = figure('CloseRequestFcn',@closefunction);

    % Add Button
    hdl.addPushButton = uicontrol(hdl.mainfig, 'Units', 'normalized', 'Position',[0.05 0.6 0.3 0.25], 'String', 'Add One', 'Callback', @addOne);
    % Done Button
    hdl.donePushButton = uicontrol(hdl.mainfig, 'Units', 'normalized', 'Position',[0.65 0.6 0.3 0.25], 'String', 'Done', 'Callback', @done);
    % Static text
    hdl.sliceNoText = uicontrol(hdl.mainfig,'Style','text','Fontsize',16,'Units','normalized','Position',[0.35 0.2 0.3 0.25]);

    function addOne(hObject,eventdata) 
        inputVariable = inputVariable+1; % add one to the current inputVariable
        set(hdl.sliceNoText, 'String', num2str(inputVariable)); % change static text
        newVariable = inputVariable; % new variable to be exported
    end

    function closefunction(hObject,eventdata) 
        % This callback is executed if the user closes the gui
        % Assign Output
        outputVariable = newVariable;
        % Close figure
        delete(hdl.mainfig); % close GUI
    end

    function done(hObject,eventdata)  
        % Assign Output
        outputVariable = newVariable;
        % Close figure
        delete(hdl.mainfig); % close GUI
    end

    % Pause until figure is closed ---------------------------------------%
    waitfor(hdl.mainfig);    
end 
```

# c# - 解析 XML 时遇到问题

> ID：15465383
> 
> 赞同：1
> 
> 时间：2013-03-17T19:47:19.353
> 
> 标签：c#, xml, xml-parsing, xml-serialization

我在从 centovacast v3 XML API 解析一些 XML 时遇到了一些麻烦。我已经使用他们的 2.x API 并对其进行了解析，但是响应已经完全改变，我似乎无法让我现有的任何解析器工作。我尝试过的每个示例似乎都无法正确获取数据。

我正在使用 .NET 3.5（4.0 也是可以接受的），任何示例都将不胜感激。

一个示例 XML 文档是：

```
<?xml version=""1.0"" encoding=""UTF-8""?>
<centovacast version=""3.0.0"" host=""0.0.0.0:2199"">
    <response type=""success"">
        <message>OK</message>
        <data>
            <row>
                <id>1</id>
                <parameters>
                    <ipaddress>127.0.0.1</ipaddress>
                    <port>2198</port>
                    <title>Local server</title>
                    <isrelay>1</isrelay>
                    <ismaster>1</ismaster>
                    <defaultip>0.0.0.0</defaultip>
                    <daemontype>RPC</daemontype>
                    <hostname/>
                </parameters>
                <status>
                    <memfree>101879808</memfree>
                    <memtotal>1073741824</memtotal>
                    <memavail>778653696</memavail>
                    <swapfree>1077501952</swapfree>
                    <swaptotal>1077501952</swaptotal>
                    <buffers>172535808</buffers>
                    <cpuload>0.00</cpuload>
                    <uptime>13372713</uptime>
                    <machine>Intel(R) Xeon(R) CPU E5620</machine>
                    <osbrief>Linux</osbrief>
                    <osdetails>2.6.18</osdetails>
                    <other>
                        <Processes>
                            <field>n</field>
                            <field>72</field>
                        </Processes>
                        <Kernel>
                            <field>s</field>
                            <field>Linux version 2.6.18</field>
                        </Kernel>
                        <row>
                            <field>f</field>
                            <field>0.000000</field>
                        </row>
                        <row>
                            <field>f</field>
                            <field>0.000000</field>
                        </row>
                        <row>
                            <field>f</field>
                            <field>0.000000</field>
                        </row>
                    </other>
                    <online>1</online>
                </status>
                <accounts>
                    <licensed>-1</licensed>
                    <active>1</active>
                    <inactive>0</inactive>
                </accounts>
            </row>
        </data>
    </response>
</centovacast> 
```

我尝试使用以下代码：

```
 var xml = XDocument.Parse(xmldata);
        var query = from p in xml.Descendants("status")
                    select p;
        foreach (var record in query)
            MessageBox.Show(record.Value); 
```

但它返回的所有数据都在一个大混乱中，`<status>`而`<parameters>`不是在单独的值中。

我很想序列化/反序列化，因为我正在进行的 XML 调用为集群中的每个服务器返回上述内容，所以它可能是一个相当大的结果集，但我并不挑剔，我很高兴能够将数据放入正确的变量中，以便我可以使用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:42:54.830

`xml.Descendants("status")`返回整个元素`status`及其子元素。如果要枚举它的元素，请使用以下代码：

```
xml.Descendants("status").Descendants(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:49:36.607

这是一个以匿名类型存储一些元素的示例：

```
var data =
    XDocument.Parse(xml)
    .Root
    .Element("response")
    .Element("data")
    .Elements("row")
    .Select(row =>
        new
        {
            Id = Int32.Parse(row.Element("id").Value),
            Parameters = new
            {
                IpAddress = row.Element("parameters").Element("ipaddress").Value,
                port = Int32.Parse(row.Element("parameters").Element("port").Value),
            },
            Status = new
            {
                MemFree = Int32.Parse(row.Element("status").Element("memfree").Value),
            },
        }); 
```

你总是可以插入你自己的具体类型和空值检查选项值可能在哪里。

# javascript - 如何在 soundmanger2 中循环播放音频

> ID：15465386
> 
> 赞同：2
> 
> 时间：2013-03-17T19:47:23.290
> 
> 标签：javascript, soundmanager2

我们如何在 soundamanager2 中循环播放相同的音频文件？

这是我的示例代码

```
function playSound(url) {
            soundManager.setup({
            url: 'swf',
            onready: function() {
                 soundManager.createSound({
                 id: 'samplesound',
                 url: url,
                 volume: 100
                 });
                 soundManager.play('samplesound');
                 }
            }); 
        } 
```

从标签调用它

```
<a href='javascrit:void(0);' onclick='playSound('url');'></a> 
```

谁能指导我在各个时间连续循环这个声音？？

谢谢您的帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T19:52:58.507

您可以使用 play 命令循环播放声音

以下应播放声音 3 次

```
soundManager.play('samplesound',{loops: 3}); 
```

让循环工作的黑客可能是

```
var loops = 3;
var looped = 0;
    soundManager.createSound({
                     id: 'samplesound',
                     url: url,
                     volume: 100,
                      onfinish:function() { 
                         if(looped<loops){
                             soundManager.play('samplesound'); 
                             looped++; 
                          } else{   
                             looped = 0;
                          }
                      )}
                     }); 
```

看

[http://www.schillmania.com/projects/soundmanager2/demo/api/](http://www.schillmania.com/projects/soundmanager2/demo/api/)

和

[http://www.schillmania.com/projects/soundmanager2/doc/#smsoundmethods](http://www.schillmania.com/projects/soundmanager2/doc/#smsoundmethods)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-15T14:04:13.533

将默认选项设置为“loop:1”将只播放每个声音一次。在我的网站中，Loop: 2 会一遍又一遍地播放。在他们的演示页面上，他们循环播放“loops: 3”

soundManager.defaultOptions = {

```
 loops: 2

}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-17T22:03:01.450

使用此实用功能：

```
function loopSound(sound, times) {
    var current = 0;
    _loopSound(sound, times, current);
    function _loopSound(sound, times, current) {
        if (++current <= times) {
            sound.play({
                onfinish : function() {
                    _loopSound(sound, times, current);
                }
            }); 
        }
    }   
}

var mySound= soundManager.createSound({
              url: '/mySound.mp3'
            });
loopSound(mySound, 3); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-24T08:32:55.770

这对我有用：

`soundManager.play('mysound', { loops: Infinity });`

# objective-c - 尝试访问托管对象属性时的 EXC_BAD_ACCESS

> ID：15465389
> 
> 赞同：1
> 
> 时间：2013-03-17T19:48:02.790
> 
> 标签：objective-c, cocoa-touch, cocoa, core-data

我在处理 Core Data+concurrency/nested MOCs 时遇到了一些麻烦（不确定我遇到了 =P 的问题）。

我有一个方法，我传入一个托管对象 ID（我检查了它是否是永久的），并且该方法有一个子托管对象上下文，该上下文被限制在某个队列中。我可以通过从子托管对象上下文中检索对象，`[managedObjectContext objectWithID:moID]`但是当我尝试访问它的任何属性时（托管对象仍然是一个错误），我得到`EXC_BAD_ACCESS`堆栈跟踪显示`_svfk_1`和`objc_msgSend`.

我知道在没有示例代码的情况下很难找出问题所在，但我希望有人可以阐明可能的原因。谢谢。=)

**编辑：**我尝试使用`existingObjectWithID:error:`而不是`objectWithID:`汤姆哈灵顿建议的那样，现在它有时可以工作，但有时不能工作。我也经历了一次`EXC_BAD_ACCESS`崩溃`mergeChangesFromContextDidSaveNotification:`。我怀疑这可能是一个同步问题。如果我在一个上下文中编辑某些内容并保存，而在我的子上下文中编辑其他内容，这会导致问题吗？

**编辑 2：**我弄清楚了为什么 existingObjectWithID:error: 有时但并非总是有效。托管对象 ID 确实是一个临时 ID（不应该`mergeChangesFromContextDidSaveNotification:`将其转换为永久 ID？），所以我必须`obtainPermanentIDsForObjects:error:`在传递 ID 之前调用。但有时在子上下文的`mergeChangesFromContextDidSaveNotification:`. 这可能是什么原因？谢谢。

**编辑 3：**这是我的 MOC 层次结构的样子。

```
 Persistent Store Coordinator
                |
      Persistent Store MOC
         /            \
Main Queue MOC   Child MOC (confinement) 
```

我从主队列调用一个方法，该方法使用子 MOC（在另一个队列中）插入和更新一些托管对象，同时，我在持久存储 MOC 中插入和更新托管对象。托管对象也可以同时更新、删除和插入到主队列 MOC 中。我将 Persistent Store Coordinator 的任何更改合并到 Main Queue MOC 和 Child MOC。

还有一些问题：保存 MOC 会自动合并事物吗？如果 MOC 有待处理的合并请求，并且您在处理该合并请求之前保存，这会导致问题吗？

**编辑 4：**这是我初始化子 MOC 的方式。

```
dispatch_sync(_searchQueue, ^{
    _searchManagedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSConfinementConcurrencyType];

    [_searchManagedObjectContext setParentContext:_persistentStoreManagedObjectContext];
    [_searchManagedObjectContext setMergePolicy:NSMergeByPropertyStoreTrumpMergePolicy];
}); 
```

顺便说一句，我注意到只有`EXC_BAD_ACCESS`当通知包含已删除的对象时，合并才会崩溃（带有 ）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T04:15:39.677

看来你还是太努力了。对于您的子 MOC，因为它在串行队列中，请使用`NSPrivateQueueConcurrencyType`并将其父 MOC 设置为您的主 MOC。

`NSConfinementConcurrencyType`用于旧版配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T01:17:13.637

我找到了解决办法。在每次保存之前，我都会这样做`[moc obtainPermanentIDsForObjects:[[moc insertedObjects] allObjects] error:&error]`。现在我再也没有崩溃了。

我仍然对到底发生了什么有点模糊，但这是我的理解。当您保存新插入的对象时，只有在连接到持久存储协调器的 MOC 保存时，它们才会被分配一个永久 ID。现在，要么`mergeChangesFromContextDidSaveNotification:`将永久 ID 向下传播（正如我所料），要么在合并之前发生了一些其他操作，或者某处存在 Apple 错误。无论如何，事先获得永久 ID 解决了这个问题。

TL；DR 核心数据+并发是困难的。

# php - 检查结果为空 mysql

> ID：15465392
> 
> 赞同：0
> 
> 时间：2013-03-17T19:48:20.933
> 
> 标签：php, mysql

这个下面的mysql命令是返回空结果。

如何在php中检查这个

```
SELECT (sum(`money1`) - sum(`money2`)) as sm FROM `manfeatokasb` 
```

下面的代码不正确，无法检查空结果

```
if ($result['sm'] === null  )
{
    echo 'this command is return null result';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:49:33.390

利用[`is_null()`](http://us3.php.net/manual/en/function.is-null.php)

```
if (is_null($result['sm']))
{
    echo 'this command is return null result';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:30:48.983

您可以使用 mysql_num_rows

```
if(mysql_num_rows($result) != 0){
     //code if "not null"
}else{
    //code if "null"
} 
```

# cloud-foundry - CloudFoundry - 应用程序“controlealunos”不存在

> ID：15465396
> 
> 赞同：0
> 
> 时间：2013-03-17T19:48:32.217
> 
> 标签：cloud-foundry

我认为我遇到了错误问题。我在 Cloud Foundry 上创建了一个名为“controle* *A* *lunos”的应用程序，大写字母 A。

当我执行命令时

```
cf-apps 
```

我得到这个结果：

```
+----------------+----+---------+---------------------------------+---------------+
| Application    | #  | Health  | URLs                            | Services      |
+----------------+----+---------+---------------------------------+---------------+
| controleAlunos | 1  | RUNNING | controlealunos.cloudfoundry.com | mysql-86d568b |
+----------------+----+---------+---------------------------------+---------------+ 
```

但是当我尝试使用命令更新我的项目时：

```
prod cf-update controleAlunos controleAlunos-0.1.war 
```

我收到一个错误

```
Error Application 'controlealunos' does not exist. 
```

我认为它应该是我的应用程序的名称。我把它和一个大写字母 controle* *A* *lunos 放在一起，我收到了没有大写字母 controlealunos 的错误。

我试图重命名它，但我仍然得到错误。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:10:18.310

我猜您创建的项目名称是“controlealunos”，这导致 application.properties 中的 app.name 属性是小写名称，而用于推送到 CF 的名称是“controleAlunos”。您可以尝试更改属性文件中的值并再次更新。

# playframework-2.0 - 播放框架 2：带有日期字段的 bindfromRequest() 忽略时间部分

> ID：15465398
> 
> 赞同：0
> 
> 时间：2013-03-17T19:48:33.470
> 
> 标签：playframework-2.0

我正在使用我的 play2.1 应用程序使用 ajax 提交一些数据，包括表单上的日期，该日期在表单`Date.toISOString()`上提供了一个字符串`2013-03-20T19:00:00.000Z`。

在服务器端，我使用`bindFromRequest()`将请求数据绑定到 java 对象。java 对象有一个`Date`字段。现在该字段的日期部分在日期对象中是正确的，但缺少时间部分。它总是说午夜。

有没有人有将日期发送到 Play 应用程序的经验？还有其他我没有想到的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:52:19.813

如果你`testDate.toUTCString()`在 javascript 端使用类似的东西，它也会得到时间部分。

通过放置在模型中进行了测试`public Date myDateTest;`

在模板方面：

```
$(function(){

    var testDate = new Date();
    $('#myDateTest').val(testDate.toUTCString());

}); 
```

和相应的字段，（也可以隐藏）。

```
@inputText(computerForm("myDateTest"), '_label -> "My date test") 
```

在控制器测试：

```
Computer comp = computerForm.get();
System.out.println("my date: " + comp.myDateTest); 
```

结果是：

> 2013 年 3 月 18 日星期一 13:48:15 EET

需要考虑的事情：如果您总是捕获当前日期，则不需要将其从模板发送到模型，而是在需要时将其设置在 java 端控制器，我只是将当前日期用于演示目的。

干杯。

# groovy - Groovy 交换变量，如 ruby

> ID：15465401
> 
> 赞同：7
> 
> 时间：2013-03-17T19:48:46.517
> 
> 标签：groovy, swap

在 Groovy 中交换变量的最佳方法是什么？

是否可以在 Ruby 中做类似的事情？

> x,y = y,x

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-17T19:57:52.390

只需使用括号进行多重赋值

```
(x,y) = [ y, x ] 
```

# ruby-on-rails - 在 rspec 控制器测试中分配变量

> ID：15465402
> 
> 赞同：0
> 
> 时间：2013-03-17T19:48:46.373
> 
> 标签：ruby-on-rails, unit-testing, rspec, controller, factory-bot

我有一个 rspec 测试，我需要在其中测试我的控制器。

```
it "renders the #show view" do
  get :show, id: FactoryGirl.create(:quiz)
  @facebook_profile = FactoryGirl.create(:facebook_profile)
  response.should render_template :show
end 
```

facebook_profile 对象有一个 user_q1 列，所以 @facebook_profile.user_q1 给出了一个有效的结果。

在我的测验控制器中：

```
@user_q1 = @facebook_profile.user_q1 
```

这在手动测试中效果很好，但在 rspec 中，我得到了结果：

```
undefined method `user_q1' for nil:NilClass 
```

我怀疑问题出在这里，在控制器中我的 show 方法的第一行：

```
@facebook_profile = FacebookProfile.find_by_facebook_id(session[:facebook_profile_id]) 
```

我的会话控制器中有一个变量（尽管不是任何模型中的列），我称之为 facebook_profile_id。然后我在我的测验控制器的上述代码行中调用此变量。我认为我的规范无法定义@facebook_profile，因为它不知道 facebook_profile_id。显然，仅仅定义“@facebook_profile = FactoryGirl”（就像我上面所说的那样）是行不通的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:16:16.730

你应该这样做：

```
let(:fb_profile) { FactoryGirl.create(:facebook_profile) }
let(:quiz) { FactoryGirl.create(:quiz) )

it "renders the #show view" do
  FacebookProfile.should_receive(:find_by_facebook_id).and_return fb_profile
  get :show, id: quiz.id
  response.should render_template :show 
end 
```

实际上，您不需要在 db 中创建对象，但这是另一个争论。

# java - getDeclaredMethod 不起作用，NoSuchMethodException

> ID：15465407
> 
> 赞同：15
> 
> 时间：2013-03-17T19:49:14.883
> 
> 标签：java, reflection

我一直在尝试`Reflection`在 Java 中使用，但结果并不好。这是我的代码：

```
public class ReflectionTest {
    public static void main(String[] args) {
        ReflectionTest test = new ReflectionTest();
        try {
            Method m = test.getClass().getDeclaredMethod("Test");
            m.invoke(test.getClass(), "Cool story bro");
        } catch (NoSuchMethodException | SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public void Test(String someawesometext) {
        System.out.println(someawesometext);
    }
} 
```

我只是得到了`java.lang.NoSuchMethodException`错误，我已经尝试了几乎所有的东西。喜欢使用`getMethod`代替，`getDeclaredMethod`添加`test.getClass()`之后等等。`"Test"``getDeclaredMethod`

这是堆栈跟踪：

```
java.lang.NoSuchMethodException: ReflectionTest.Test()
at java.lang.Class.getDeclaredMethod(Unknown Source)
at ReflectionTest.main(ReflectionTest.java:10) 
```

我已经在谷歌上搜索了很多天，但没有运气。所以我有谁知道我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-17T19:52:42.433

您在其中指定名称`getDeclaredMethod`但不指定参数，尽管该`Test`方法在其签名中确实有一个参数。

试试这个：

```
Method m = test.getClass().getDeclaredMethod("Test", String.class); 
```

除此之外：

```
m.invoke(test, "Cool story bro"); 
```

因为 的第一个参数[`Method.invoke`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Method.html#invoke%28java.lang.Object,%20java.lang.Object...%29)需要一个对象。但是，在静态方法的情况下，此参数将被忽略：

> 如果底层方法是静态的，则忽略指定的 obj 参数。它可能为空。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T19:58:35.437

有两个问题：

问题 1 是您必须指定目标方法的 HHS 参数签名：

```
Method m = test.getClass().getDeclaredMethod("Test", String.class); 
```

问题 2 是您必须将实例传递给`invoke()` 方法：

```
m.invoke(test, "Cool story bro"); 
```

仅供参考，如果方法是，您*会将*`class`实例的作为目标传递给`invoke`方法`static`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T19:54:10.617

如果您检查[JavaDoc 中的 Class.getDeclaredMethod()](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getDeclaredMethod%28java.lang.String,%20java.lang.Class...%29)，您会看到它需要一个参数类型数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-01T11:07:38.743

```
 final Class<?> ContextImpl =Class.forName("android.app.ContextImpl");
        Method method= ContextImpl.getDeclaredMethod("getImpl",Context.class); 
        method.setAccessible(true);  
        Context myContext=  (Context) method.invoke(ContextImpl,getApplicationContext());                     
        System.out.println("........... Private Method Accessed. : "+myContext); 
```

# javascript - 经过身份验证的 AJAX 文件下载

> ID：15465408
> 
> 赞同：3
> 
> 时间：2013-03-17T19:49:21.180
> 
> 标签：javascript, ajax, download

我正在将 Intranet 与文档管理系统集成。DMS 有一个 SOAP API。我们构建了一个接收 REST 调用、发出 SOAP 调用并返回 JSON 或文档数据的客户端。

问题是 AJAX 文件下载的所有解决方案似乎都使​​用 iFrame（请参阅[John Culniver 的文件下载插件](http://johnculviner.com/post/2012/03/22/Ajax-like-feature-rich-file-downloads-with-jQuery-File-Download.aspx)）。

我不能使用它，因为我需要在标头中提供身份验证凭据。我能想到的唯一其他潜在解决方案是使用`window.open`（如果我可以通过浏览器弹出窗口阻止）。

有没有人有另一种潜在的解决方案，或者如何用 window.open 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T20:10:08.693

我认为这个问题没有客户端解决方案。`window.open`不会让您设置请求标头。您需要执行一些操作，例如向服务器发送 cookie 或其他值，并添加服务器端代码以减轻对请求标头的需求。

请参阅以下问题的答案：

*   [提供从 jQuery post 下载的生成文件](https://stackoverflow.com/questions/9101676/offer-a-generated-file-for-download-from-jquery-post)
*   [如何在 POST 表单上设置 Header 字段？](https://stackoverflow.com/questions/9516865/how-to-set-a-header-field-on-post-a-form)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-20T11:16:07.377

我能够成功地做到这一点。我是我的示例，我使用的是基本身份验证，但是您可以将**Authorization**标头替换为不同的值（例如，您可以将其替换为`Bearer Yourtokenvalue`.

这是代码片段

```
$(document).on("click", "#btn", function() {

  var username = "yourUserNameForBasicAuthentication";
  var password = "yourPasswordForBasicAuthentication"

  console.log("button clicked");
  var request = new XMLHttpRequest();
  request.open("GET", $("#txtUrl").val().trim(), true);

  //Set the authorization headers
  request.setRequestHeader("Authorization", "Basic " + window.btoa(username + ":" + password));

  //Set the Response type as blob which means raw data
  request.responseType = "blob";

  //We will initiate a default file name in case no file name is detected later on from headers of HTTP Request
  var fileName = "unnamed.pdf";
  request.onload = function(event) {
    if (request.status == 200) {
      console.log("success response received");
      var blob = request.response;

      //Getting contenttype from response headers
      var contentType = request.getResponseHeader("content-type");
      if (contentType == null) {
        contentType = "application/pdf";
      }

      //Check 'Content-Disposition' header to get filename of file (if possible)
      if (request.getResponseHeader("Content-Disposition")) {
        var contentDisposition = request.getResponseHeader("Content-Disposition");
        fileName = contentDisposition.substring(contentType.indexOf("=") + 1);
      }

      if (window.navigator.msSaveOrOpenBlob) {
        // Internet Explorer
        window.navigator.msSaveOrOpenBlob(new Blob([blob], {
          type: contentType
        }), fileName);
      } else {
        var el = document.createElement("a");
        document.body.appendChild(el);
        el.href = window.URL.createObjectURL(blob);
        el.download = fileName;
        el.click();
        el.remove();
        window.URL.revokeObjectURL(el.href);
      }

    } //end of Status code
    else {
      alert("System failed to authenticate");
    }

  } //End of event
  request.send();

});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<input type="text" value="https://yoursamplefile.txt" id="txtUrl" style="width:100%" /><br />
<input type='button' value='Download File' id='btn' />
```

# python - 本地服务器中的高复制删除延迟

> ID：15465409
> 
> 赞同：1
> 
> 时间：2013-03-17T19:49:27.593
> 
> 标签：python, google-app-engine, python-2.7, webapp2, app-engine-ndb

我使用带有 --high_replication --use_sqlite 的 Python 编写了这段代码：

```
def delete(self, id):
    product = Product.get_by_id(long(id))
    if product is None:
        self.session.add_flash('Product could not be found', level='error')
        self.redirect_to('products')
    else:
        product.key.delete()
        self.session.add_flash('Product is deleted')
        self.redirect_to('products') 
```

删除后，我重定向到“产品”页面，该页面基本上是一个查询所有产品并显示它们的页面。

我发现的唯一一件事是它也显示已删除的记录。当我刷新“产品”页面时，记录就消失了。

其他人是否也面临这个问题，我能做些什么吗？

* * *

**编辑1：**

我只在本地看到这种行为，在生产基础设施上并非如此。我过去使用以下 jvm arg 为 Java sdk 解决了这个问题：

```
-Ddatastore.default_high_rep_job_policy_unapplied_job_pct=20 
```

Python sdk 是否有类似的东西来模拟您希望应用程序在本地看到的最终一致性的数量？

请参阅[https://developers.google.com/appengine/docs/java/tools/devserver](https://developers.google.com/appengine/docs/java/tools/devserver)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:45:53.853

您所看到的是开发服务器模拟的 HRD 数据存储的最终一致性行为。

[https://developers.google.com/appengine/docs/python/datastore/queries#Data_Consistency](https://developers.google.com/appengine/docs/python/datastore/queries#Data_Consistency)

在最终一致性查询中，用于收集结果的索引也以最终一致性访问。因此，此类查询有时可能会返回不再匹配原始查询条件的实体，而强一致性查询始终在事务上是一致的。

# php - 如何将 XML 回显为简单字符串？

> ID：15465410
> 
> 赞同：0
> 
> 时间：2013-03-17T19:49:31.333
> 
> 标签：php, echo

我无法理解代码的行为：

输入 ：

```
<?php
    function polldaddy_choices($choices) {
      foreach ($choices as $choice) {
        $answer = "<pd:answer>
                   <pd:text>" . $choice . "</pd:text>
                   </pd:answer>";
        echo $answer; 
     }
  }
  $total_choices = array('yes' , 'no' , 'do not know');
  $ans = polldaddy_choices($total_choices); 
  $xml = "world" . $ans . "hello" ;
  echo $xml;
?> 
```

输出 ：

```
 <pd:answer>
      <pd:text></pd:text>
      </pd:answer><pd:answer>
      <pd:text></pd:text>
      </pd:answer><pd:answer>
      <pd:text></pd:text>
      </pd:answer>worldhello 
```

为什么字符串出现在输出的末尾？

这是键盘上的链接：http: [//codepad.org/2dbiCalb](http://codepad.org/2dbiCelb)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:55:49.787

您的功能没有重新调整任何内容。您直接在该函数中回显。

所以首先你调用`polldaddy_choices`，它与 html 相呼应。然后，你回声：

```
$xml = "world" . "" . "hello" ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T19:59:27.450

Because you are `echo`ing the output in your `polldaddy_choices` function. So the following:

`$ans = polldaddy_choices($total_choices);` Is actually printing the XML, and:

`$xml = "world" . $ans . "hello";` will simply be printing **worldhello**, as `$ans === null`

I think you probably want to be doing something more like:

```
function polldaddy_choices($choices) {
    $answers = array();
    foreach ($choices as $choice) {
        $answer = "<pd:answer>
                   <pd:text>" . $choice . "</pd:text>
                   </pd:answer>";
        $answers[] = $answer;
    }

 return implode("\n", $answers);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T20:01:25.793

您的函数立即回显了 xml 代码。在下面的代码中，您将看到我创建了一个变量 ($answer = "";)，然后使用 ".=" 将 xml 附加到变量的末尾。在函数结束时，我返回 $answer 的值。

当您调用函数然后 ($ans = polldaddy_choices($total_choices);) 时，它会将函数的返回值放入您的 $ans 变量中。

```
<?php
function polldaddy_choices($choices) {
  $answer = "";
  foreach ($choices as $choice) {
    $answer.= "<pd:answer>
               <pd:text>" . $choice . "</pd:text>
               </pd:answer>";
 }
 return $answer;
}
$total_choices = array('yes' , 'no' , 'do not know');
$ans = polldaddy_choices($total_choices); 
$xml = "world" . $ans . "hello" ;
echo $xml;
?> 
```

# python - 为什么这段代码不返回这些列表？这是否与使用“return”而不是“print”有关？

> ID：15465412
> 
> 赞同：0
> 
> 时间：2013-03-17T19:49:48.767
> 
> 标签：python, list, printing, return

所以这是我的代码，当我将所有内容都设置为“打印”时，代码可以工作，但现在“返回”在我选择主题、主题和问题/答案后程序终止。我做了这个程序来输入我的闪存卡问题和答案，然后可以选择主题，然后选择一个主题，然后选择是只看问题、答案还是两者都看。我注意到在每个列表的末尾都会出现“无”这个词，我试图通过用“返回”替换“打印”来解决这个问题，但这带来了更多问题，我真的很感激一些关于我的意见应该做。

代码如下

——伊桑，13 岁

```
import sys
subjects = ["History", "Science"]
topics_science = ["Light", "X-mas Exam Review"]
topics_history = ["Italian Renaissance"]
science_xmasreview = ["Q. What do we use to catogorize a habitat?", \
"A. Damp or Dry, Hot or Cold, Windy or Calm, Dim or Bright.", \
"Q. What is something that only eats plants?", \
"A. Herbivore", \
"Q. What are the properties of oxygen?"]

science_light = [
"Q. What is an object the gives out light?", \
"A. Light source", \
"Q. What is the speed of light?", \
"A. 300 million meters per second.", \
"Q. What does transparent mean?", \
"A. Light can pass completely through a transparent material."]

history_renaissance = [
"Q. What did Lorenzo do differently from Cosimo?", \
"A. Lorenzo made no effort to conceal his power", \
"Q. Why did the Pope want Lorenzo dead?", \
"A. Because the Pope wanted more power and saw Lorenzo as a threat.", \
"Q. Who did the Pazzi plot with to kill Lorenzo?", \
"A. Pope Sixtus IV"]

def qanda(x):
    print
    print "Enter 1 for just questions"
    print "Enter 2 for just answers"
    print "Enter 3 for both"
    qa = raw_input("Enter number: ")
    qa = str(qa)
    if qa == '1':
        printer(x[::2])
    elif qa == '2':
       printer(x[1::2])
    elif qa == '3':
        printer(x)
    else:
        print "Not recognized"
def newline():
    raw_input()
    print
def printer(list):
    n = 0
    l = len(list)
    print
    while n < l:
        return list[n]
        newline()
        n += 1
    while n == l:
        n += 1
def subjectchoice():
    if subject == "1":
        print
        history()
    elif subject == "2":
        print
        science()
        else:
        print 'Not recognized.'
def science():
    print topics_science
    print "Enter 1 for Light"
    print "Enter 2 for X-mas Exam Review"
    topicchoice = raw_input("Enter number: ")
    topicchoice = str(topicchoice)
    if topicchoice == "1":
        qanda(science_light)
    elif topicchoice == "2":
          qanda(science_xmasreview)
    else:
        print "Not recognized"
        sys.exit
def history():
    print topics_history
    print "Enter 1 for Italian Renaissance"
    topicchoice = raw_input("Enter number: ")
    topicchoice = str(topicchoice)
    if topicchoice == "1":
       return qanda(history_renaissance)
    else:
        print "Not recognized"
        sys.exit()
print subjects
print "Enter 1 for History"
print "Enter 2 for Science"
subject = raw_input("Enter number: ")
subject = str(subject)
subjectchoice() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:15:25.117

我相信这会起作用，您不需要在您的打印机（）函数中返回语句：

```
import sys
subjects = ["History", "Science"]
topics_science = ["Light", "X-mas Exam Review"]
topics_history = ["Italian Renaissance"]
science_xmasreview = ["Q. What do we use to catogorize a habitat?",
                      "A. Damp or Dry, Hot or Cold, Windy or Calm, Dim or Bright.",
                      "Q. What is something that only eats plants?",
                      "A. Herbivore",
                      "Q. What are the properties of oxygen?"]

science_light = [
    "Q. What is an object the gives out light?",
    "A. Light source",
    "Q. What is the speed of light?",
    "A. 300 million meters per second.",
    "Q. What does transparent mean?",
    "A. Light can pass completely through a transparent material."]

history_renaissance = [
    "Q. What did Lorenzo do differently from Cosimo?",
    "A. Lorenzo made no effort to conceal his power",
    "Q. Why did the Pope want Lorenzo dead?",
    "A. Because the Pope wanted more power and saw Lorenzo as a threat.",
    "Q. Who did the Pazzi plot with to kill Lorenzo?",
    "A. Pope Sixtus IV"]

def printer(list):
    n = 0
    l = len(list)
    print
    while n < l:
        print list[n]  # <-- Changed this from a return to a print statement
        newline()
        n += 1
    while n == l:
        n += 1

def qanda(x):
    print
    print "Enter 1 for just questions"
    print "Enter 2 for just answers"
    print "Enter 3 for both"
    qa = raw_input("Enter number: ")
    qa = str(qa)
    if qa == '1':
        printer(x[::2])
    elif qa == '2':
        printer(x[1::2])
    elif qa == '3':
        printer(x)
    else:
        print "Not recognized"

def newline():
    raw_input()
    print

def subjectchoice():
    if subject == "1":
        print
        history()
    elif subject == "2":
        print
        science()
    else:
        print 'Not recognized.'
def science():
    print topics_science
    print "Enter 1 for Light"
    print "Enter 2 for X-mas Exam Review"
    topicchoice = raw_input("Enter number: ")
    topicchoice = str(topicchoice)
    if topicchoice == "1":
        qanda(science_light)
    elif topicchoice == "2":
        qanda(science_xmasreview)
    else:
        print "Not recognized"
        sys.exit
def history():
    print topics_history
    print "Enter 1 for Italian Renaissance"
    topicchoice = raw_input("Enter number: ")
    topicchoice = str(topicchoice)
    if topicchoice == "1":
        return qanda(history_renaissance)
    else:
        print "Not recognized"
        sys.exit()
print subjects
print "Enter 1 for History"
print "Enter 2 for Science"
subject = raw_input("Enter number: ")
subject = str(subject)
subjectchoice() 
```

# ruby-on-rails - 在索引页面设计中调用 render sign_in

> ID：15465414
> 
> 赞同：0
> 
> 时间：2013-03-17T19:49:59.017
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, ruby-on-rails-3.2

我正在尝试`sign_in`在我的索引页面中调用渲染。

我不想转到另一个页面，我想留在同一页面。

我努力了：

```
<%= render :partial ... %>

<%= render :file %> 
```

我得到一个错误。

你知道我该怎么做吗？

* * *

我在 devise/sessions/_new.html.erb 中的文件

```
 <h2>Sign in</h2>

<%= form_for(resource, :as => resource_name, :url => session_path(resource_name)) do |f| %>
  <div><%= f.label :email %><br />
  <%= f.email_field :email %></div>

  <div><%= f.label :password %><br />
  <%= f.password_field :password %></div>

  <% if devise_mapping.rememberable? -%>
    <div><%= f.check_box :remember_me %> <%= f.label :remember_me %></div>
  <% end -%>

  <div><%= f.submit "Sign in" %></div>
 <% end %>
<% end %> 
```

如果我将 content_for 放在文件上，我会收到错误消息，您知道单击链接后如何在索引中呈现文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:43:46.727

你得到什么错误？

如果要在另一个视图中渲染局部视图，请使用`_`前缀保存它。所以调用你的文件：

`_sign_in.html.erb`

要将部分渲染为视图的一部分，请使用视图中的 render 方法：

```
<%= render "sign_in" %> 
```

如果它与该控制器的其他视图不在同一个文件夹中，即称为“共享”：

```
<%= render "shared/sign_in" %> 
```

欲了解更多信息： http: [//guides.rubyonrails.org/layouts_and_rendering.html#using-partials](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)

# visual-c++ - MSBuild VC2012，如何确保 AfterBuild 仅在输出更改时运行？

> ID：15465415
> 
> 赞同：4
> 
> 时间：2013-03-17T19:50:02.967
> 
> 标签：visual-c++, msbuild

我正在尝试将 AfterBuild 任务添加到我的 VC++2012 项目中，该任务仅在输出更改时才会执行。如果我是正确的，在 C# 中，当您添加构建后事件时，您可以选择指定何时运行构建后事件。我尝试添加诸如**_SourceItemsToCopyToOutputDirectory**之类的条件，但它没有帮助，无论我是否进行空构建，它都是空的。我发现的唯一属性是**LinkSkippedExecution**但我不确定它是否是最佳选择。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T00:01:00.940

[查看此堆栈溢出问题和答案：](https://stackoverflow.com/questions/516227/suppressing-afterbuild-targets-when-a-csproj-has-not-been-built) 您可以根据输出文件的时间戳在构建前目标中创建一个属性。

```
<Target Name="BeforeBuild">
    <PropertyGroup>
      <MyBeforeCompileTimestamp>%(IntermediateAssembly.ModifiedTime)
                 </MyBeforeCompileTimestamp>
    </PropertyGroup>
  </Target>

  <Target Name="AfterBuild">
    <CallTarget Condition="$(MyBeforeCompileTimestamp) !=   
          %(IntermediateAssembly.ModifiedTime)" Targets="MyTarget" /> 
  </Target> 
```

# javascript - 加载时缩放/缩放页面以使用户尽可能宽查看我的 wordpress 网站图片

> ID：15465418
> 
> 赞同：1
> 
> 时间：2013-03-17T19:50:26.357
> 
> 标签：javascript, wordpress, zooming, scale, viewport

所以我设计了一个 1024x768 的网站……我根据全球统计数据做出的决定表明这仍然是主要的分辨率。

我自己放大了，看起来很棒。我在一些图片上使用了一些技巧，它们的分辨率更高，但如果放大它们就会缩小，它们并不模糊。

然而......现在任何打开但不知道如何放大的人都会看到一个很小的页面，因为越来越多的人使用更高分辨率的屏幕。仍然让用户放大是不对的，我想解决这个问题......

有没有办法根据每个用户的视口在打开页面时缩放页面？

用户现在如何看待它：http: [//i.stack.imgur.com/XBqiQ.jpg](http://i.stack.imgur.com/XBqiQ.jpg)

我如何查看它并希望用户查看：http: [//i.stack.imgur.com/xNTIF.png](http://i.stack.imgur.com/xNTIF.png)

我能找到的唯一与缩放和缩放有关的东西仅适用于图像......

* * *

附加编辑：

好的，作为对给我的回答，给我的东西在 Firefox 中不起作用不确定 IE，因为我没有测试它，但这正是我想要的！

```
$('body').css('zoom',$(window).width()/1200); 
```

有什么建议么？

我在使用它时也遇到的问题是我拥有的 iframe：我在 iframe 页面上使用它来加载论坛并将其放入 wordpress 页面的内容中。此代码自动调整其大小并将其置于顶部。

```
<script language="javascript" type="text/javascript">
 function resizeIframe(obj)
 {
   obj.style.height = obj.contentWindow.document.body.scrollHeight + 'px';
   obj.style.width = obj.contentWindow.document.body.scrollWidth + 'px';                        
 }
 </script>

[iframe id="frmid" frameborder="0" padding="0" margin="0" onload="javascript:resizeIframe(this); window.parent.parent.scrollTo(0,0)" src="http://muslimbodybuilding.com/Forum/" scrolling="no"] 
```

请参阅评论中的屏幕截图我无法发布另一个链接限制我......

=======================

我还遇到了另一个在 Firefox 中工作的类似解决方案

```
<script type="text/javascript">
jQuery(window).load(function() {
  var currentWidth = jQuery(document.body).width();
    var targetWidth = 1100; // experiment for your self
    var scrollWidth = 0; // need to make it dynamic --- was 20
    // if the screen is not bigger than the target, then don't mess with zooming
    if (currentWidth > targetWidth) {
      if (typeof document.body.style.transform != "undefined")
        document.body.style.transform = currentWidth / targetWidth;
      else if (typeof document.body.style.MozTransform != "undefined") {
        document.body.style.MozTransformOrigin = "left top";
        document.body.style.MozTransform = 'scale(' + currentWidth / targetWidth + ')';
      }
      else if (typeof document.body.style.WebkitTransform != "undefined")
        document.body.style.WebkitTransform = 'scale(' + currentWidth / targetWidth + ')';

      jQuery(document.body).width(targetWidth - scrollWidth);
   }
});
</script> 
```

它也会放大 iframe，但是当我不断更改页面时，我的 facebook 滑块会被推动并四处移动。

在 chrome 中，它仍然不会使用这种方法缩放 iframe。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:46:55.540

假设您使用的是 jQuery（您可以在没有 jQuery 的情况下执行此操作，但它使代码更加简洁以实现跨浏览器兼容性），您可以执行以下操作：

> $('body').css('zoom',$(window).width()/768);

这会将主体的缩放属性设置为浏览器窗口比您的设计更宽的比例。[请注意，并非所有浏览器都支持 css zoom](http://www.browsersupport.net/CSS/zoom)。

然而，这确实有点令人讨厌 - 这样做的“现代”方式是使用[响应式网页设计](http://en.wikipedia.org/wiki/Responsive_web_design)，无论客户端浏览器的宽度如何，都能提供良好的体验。

# c# - 显示一个子虚拟机，然后在第一个关闭后显示另一个

> ID：15465419
> 
> 赞同：2
> 
> 时间：2013-03-17T19:50:29.427
> 
> 标签：c#, mvvm, viewmodel, caliburn.micro

我有一位家长指挥。我想在其中显示第一个视图模型。然后在第一个关闭后（即完成一些操作），我想显示一个不同的视图模型。

我正在使用[Caliburn.Micro.Contrib](https://github.com/kmees/CMContrib "Github 上的 Caliburn.Micro.Contrib 页面")，其中**ConductResult在***Conductor*中显示子 VM 。它有一个很酷的扩展方法**AfterClosingDo**，它在那个孩子被停用和关闭后运行一个协程。

但是，当我使用 运行另一个 ConductResult 时`AfterClosingDo`，基本上会发生这种情况：

*   第一个子虚拟机已关闭
*   发生停用事件，ConductResult 运行 AfterClosing 操作
*   在 AfterClosing 中，我使用父 Conductor 中的 ConductResult 打开第二个子 VM
*   第二个子虚拟机已正确激活
*   但是，第一个子VM的停用仍未完成，并且在Conductor中将**null**项设置为活动

第一个 VM 基本上显示加载操作的进度，第二个 VM 显示实际数据。加载完成后，我想在父 Conductor 中显示数据（当然是使用第二个 VM）。

所以，我的问题：有没有一种干净的方法可以做到这一点`Caliburn.Micro`，最好不要覆盖导体、屏幕等的默认行为。

我正在考虑使用**EventAggregator**，但我不确定它是否是最好的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T21:07:11.650

我有一个非常相似的问题，我有一个指挥打开一个子虚拟机，然后会弹出一个确认框说“你想关闭吗”并为原始 items`CanClose`方法触发了一个回调，其效果与你描述的。

弹出虚拟机会关闭，但在关闭时会触发一个回调，该回调应该关闭第一个虚拟机。

我的指挥最终重新激活了令人讨厌的原始虚拟机。事件的顺序是：

*   打开虚拟机 1
*   尝试关闭 VM 1
*   CanClose 保护方法被触发
*   在 VM 1 的 CanClose 中弹出 VM 2（使用相同的导体）
*   单击 VM 2 上的确认按钮
*   确认按钮触发 CanClose 的回调并关闭 VM1
*   VM2 关闭
*   Conductor 记得 VM 1 在 VM 2 之前处于活动状态，因此在 VM 1 关闭后重新打开它

最后，我只是实现了一个在关闭后触发的接口。

关闭后有工作要做的子项实现接口（`IAfterClose`）

`DeactivateItem`然后我为指挥提供了一个覆盖：

```
 public override void DeactivateItem(IScreen item, bool close)
    {
        var afterClose = item as IAfterClose;

        base.DeactivateItem(item, close);

        if (afterClose != null && close)
            afterClose.AfterClose();
    } 
```

这确保回调不会过早触发。不确定这是否会使您受益（因为我没有使用过 contrib 库），但它可能会给您一些想法。

唯一的缺点是我必须修复`DefaultCloseStrategy`回调何时触发它会在那里抛出一个空引用异常。我应用的修复似乎没有造成不良影响，但我并没有真正研究为什么会引发 null ref 异常。

我找不到任何其他方法来做到这一点，因为最后一个触发的事件似乎是停用事件，而且它们还为时过早。

# internet-explorer-8 - css3pie 将效果应用于不输入文本的 div

> ID：15465420
> 
> 赞同：0
> 
> 时间：2013-03-17T19:50:30.397
> 
> 标签：internet-explorer-8, css, css3pie

我正在使用 css3pie（适用于 Internet Explorer 8）将边框半径等效果应用于我页面上的 div 它可以工作，但不适用于输入文本

```
.header input[type="text"]{
border: 2px solid #696;
text-align: center;
width: 150px;
-webkit-border-radius: 8px;
-moz-border-radius: 8px;
border-radius: 8px;
background: #fff;
box-shadow:5px 5px 5px #000;
-webkit-box-shadow:5px 5px 5px #000;
-moz-box-shadow:5px 5px 5px #000;
behavior: url(PIE.htc);
} 
```

这是头部代码

```
<link rel="stylesheet" type="text/css" href="main.css">
<!--[if IE 8]>
<link rel="stylesheet" type="text/css" href="ie.css">
<![endif]-->
<meta http-equiv="X-UA-Compatible" content="IE=8" /> 
```

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T20:12:15.247

CSS3Pie中的元素应该没有问题`input`，只要您使用的是`px`测量值，您就是这样；文档在已知问题页面中提到了比例大小元素的问题，但这不是您的问题。

鉴于您在同一页面中的其他元素正常工作，只有其他可能的问题：

*   首先是`hasLayout`问题。解决方案通常是`zoom:1`在样式中添加类似的东西。

*   其次是消失的边界问题，解决方案是使用`position`and`z-index`样式。

这两个问题都在[CSS3Pie 已知问题页面](http://css3pie.com/documentation/known-issues/)上进行了讨论，以及如何解决它们的详细信息。

# ruby - Ruby布尔运算符优先级，不同的行为

> ID：15465421
> 
> 赞同：0
> 
> 时间：2013-03-17T19:50:36.590
> 
> 标签：ruby

为什么优先级在以下代码中表现不同：

```
a = true or true and false

if a then
  puts "Foo"
end

if true or true and false then
  puts "Quux"
end 
```

这只会打印“Foo”而不是“Quux”。

```
E:\Home>ruby --version
ruby 1.9.3p392 (2013-02-22) [i386-mingw32]

E:\Home>ruby test.rb
Foo 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T20:03:08.980

运算符 `=`优先于`and`and `or`（例如参见[那里](http://www.techotopia.com/index.php/Ruby_Operator_Precedence)）。所以在你的第一个陈述中，

```
a = true 
```

在其余部分之前进行评估。因此，您设置`a`为`true`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T20:09:49.063

查看运算符优先级

[http://www.techotopia.com/index.php/Ruby_Operator_Precedence](http://www.techotopia.com/index.php/Ruby_Operator_Precedence)

评价顺序是这样的

```
(((a = true) or true) and false)
# a = true

if (true or true) and false then
# equivalent to
if true and false then 
```

要获得更自然的行为，请使用`&&`and `||`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T20:02:44.480

看这里

```
2 and 7
#=> 7
2 or 7
#=> 2
2 or 7 and 12
#=> 12
2 or 7 or 12
#=> 2
2 or 7 and 12 or 10
#=> 12
true and true and false
#=> false
true or true or false
#=> true
true and true or false
#=> true
true or true and false
#=> false
true or true and false and true
#=> false 
```

***概括 ：***

(a) 当您将在只有`and`运算符的表达式中使用时，表达式的值始终是最后一个操作数，而对于只有运算符的表达式，反之亦然`or`。在布尔值的情况下，将评估完整的表达式。

(b) 当一个表达式将有`and`和`or`混合时，评估将持续到最后一个`and`，其**`ROH`**操作数将是表达式的值（在`Boolean`最后一个`and`RHO 的情况下，将评估 LHO，然后将结果作为布尔运算规则产生。

*应用 (b) 的规则*

以下代码有效：

```
if true or true and false then
  puts "Quux"
end
#=> nil

a = true or true and false
#=> false

if a then
  puts "Foo"
 end
#Foo
#=> nil 
```

`Foo`由于`=`over的优先级，下面的代码输出`and`, `or`。

表达式`a = true or true and false`计算如下应用规则 (b)

```
a = true or true and false
         ||
(a = true) or true and false
         ||
    true and false
         ||
       false 
```

*规则（b）的另一种很好的应用*

```
if 2 and 3 or nil
 p "hi"
end
#=> "hi"

if 2 or 3 and nil
 p "hello"
end
#nothing printed 
```

# r - rmongodb 和 Rmongo 包的比较

> ID：15465429
> 
> 赞同：6
> 
> 时间：2013-03-17T19:51:47.823
> 
> 标签：r, mongodb, web-applications

我已经看到了很多关于如何使用 rmongodb 从 R 中使用 Mongodb 的好问题/答案。最近我遇到了一个名为“Rmongo”的 github 包......现在我也可以在 CRAN 中看到它。谁能告诉我使用这两个软件包的能力/重点有什么比较差异？

# java - 从Java中的集合中提取数据

> ID：15465432
> 
> 赞同：0
> 
> 时间：2013-03-17T19:52:14.730
> 
> 标签：java, linq, csv

我有一个这样的 csv 数据集：

```
A, 10, USA
B,30, UK
C,4,IT
A,20,UK
B,10,USA 
```

我想阅读这个 csv 行并提供以下输出：

```
A has ran 30 miles with average of 15\. 
B has ran 30 miles with average of 20.
C has ran 4 miles with average of 4\. 
```

我想在 Java 中实现这一点。我在 C# 中使用 Linq 完成了此操作：

```
var readlines = File.ReadAllLines(filename);
            var query = from lines in readlines
                        let data = lines.Split(',')
                        select new
                        {
                            Name = data[0],
                            Miles = data[1],

                        };

            var values = query.GroupBy(x => new {x.Name}).Select(group => new { Person = group.Key, Events = group.Sum(g =>Convert.ToDouble(g.Miles)) ,Count = group.Count() }); 
```

我希望在 Java 中执行此操作，但我不确定是否可以在不使用任何第三方库的情况下执行此操作？有任何想法吗？到目前为止，我的 Java 代码如下所示：

```
CSVReader reader = new CSVReader(new FileReader(filename));
        java.util.List<String[]> content = reader.readAll();
        String[] row = null;
        for(Object object:content)
        {
          row = (String[]) object;
          String Name = row[0];
          String Miles = row[1];

          System.out.printf("%s has ran %s miles %n",Name,Miles);
        }

           reader.close();  
        } 
```

我正在寻找一种很好的方法来获取每个名称的总里程值以计算平均值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:52:46.670

作为 C# 开发人员，有时很难不错过 linq 的功能。但正如 Farlan 建议的那样，您可以执行以下操作：

```
CSVReader reader = new CSVReader(new FileReader(filename));
    java.util.List<String[]> content = reader.readAll();
    Map<String, Group> groups = new HashMap<>();
    for(String[] row : content)
    {
        String Name = row[0];
        String Miles = row[1];

        System.out.printf("%s has ran %s miles %n", Name, Miles);

        if (groups.containsKey(Name)){
            groups.get(Name).Add(Double.valueOf(Miles));
        } else {
            Group g = new Group();
            g.Add(Double.valueOf(Miles));
            groups.put(Name, g);
        }
    }
    reader.close();

    for (String name : groups.keySet())
    {
        System.out.println(name + " ran " + groups.get(name).total() + " with avg of " + groups.get(name).average());
    }

}

class Group {
    private List<Double> miles;

    public Group()
    {
        miles = new ArrayList<>();
    }

    public Double total(){
        double sum = 0;
        for (Double mile : miles)
        {
            sum += mile;
        }
        return sum;
    }

    public Double average(){
        if (miles.size() == 0)
            return 0d;            
        return total() / miles.size();
    }

    public void Add(Double m){
        miles.add(m);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:58:16.000

使用 Java 的 BufferedReader 类：

```
BufferedReader in = new BufferedReader(new FileReader("your.csv"));
String line;
while ( (line = in.readLine()) != null) {
  String [] fields = line.split(",");
  System.out.println(fields[0] + " has ran " + fields[1] + " miles with average " + fields[2]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T22:33:21.313

有很多方法可以做到这一点，一些冗长的方法，一些更短的方法。问题是 Java 在执行简单任务时可能非常冗长，因此更好的方法可能有点难看。

下面的示例向您展示了如何实现这一点，与打印相媲美。但是请记住，它可能不是最好的方法，但我觉得它更容易阅读和理解。

```
 final File csvFile = new File("filename.csv");
    final Scanner reader = new Scanner(csvFile);

    final Map<String, Integer> info = new HashMap<>(); //Store the data

    //Until there is are no more lines, continue
    while (reader.hasNextLine()) {
        final String[] data = reader.nextLine().split(","); // data[0] = A. [1] = 10\. [2] = USA
        final String alpha = data[0];

        if (!info.containsKey(alpha)) {
            info.put(alpha, Integer.parseInt(data[1]));
        } else {
            int miles = info.get(alpha);
            info.put(alpha, miles + Integer.parseInt(data[1]));
        }
    }

    reader.close(); 
```

涉及的步骤很简单：

### 第 1 步 - 读取文件。

通过将 a 传递给`File`对象`Scanner`，您将目标解析设置为 the`File`而不是控制台。使用非常简洁的`hasNextLine()`方法，您可以连续读取每一行，直到不再存在为止。然后每行用逗号分隔，并存储在 String 数组中以供参考。

### 第 2 步 - 关联数据。

由于您想将整数累加在一起，您需要一种方法将已经传入的字母与数字相关联。一种重量级但干净的方法是使用`HashMap`. `Key`它所需要的将是一个字符串，特别是`A` `B`or `C`。通过利用`Key`独特的事实，我们可以使用该`O(1)` `containsKey(String)`方法来检查我们是否已经阅读了这封信。如果是新的，请将其添加到`HashMap`并保存该号码。*但是，如果*该字母以前见过，我们会找到旧值，将其与新值相加，然后覆盖`HashMap`.

您现在需要做的就是打印出数据。随意采取不同的方法，但我希望这是一个清楚的例子，说明你如何在 Java 中做到这一点*。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-13T09:51:50.850

也许你可以试试这个 Java 库：[https ://code.google.com/p/qood/](https://code.google.com/p/qood/)

它在没有任何 getter/setter 的情况下处理数据，因此它比 LINQ 更灵活。

在您的情况下，文件“D:/input.csv”有 3 列：

```
NAME,MILES,COUNTRY
A, 10, USA
B,30, UK
C,4,IT
A,20,UK
B,10,USA 
```

查询代码将是：

```
final QModel raw = QNew.modelCSV("D:/input.csv")
  .debug(-1);//print out what read from CSV
raw.query()
  .selectAs("OUTPUT", 
    "CONCAT(NAME,' has ran ',SUM(MILES),' miles with average of ',MEAN(MILES),'.')")
  .groupBy("NAME")
  .result().debug(-1)//print out the result
  .to().fileCSV("D:/output.csv", "UTF-8");//write to another CSV file 
```

# php - 将数字格式化为文本的 PHP 函数

> ID：15465433
> 
> 赞同：1
> 
> 时间：2013-03-17T19:52:14.357
> 
> 标签：php

这只是出于好奇而提出的问题。此时是否有一个 PHP 函数可以将数字转换为文本等价物？例如 1 = '一'。1000 = '一千'。

我不认为这真的很难做到。一般来说，除了前 20 个数字外，我们说数字的方式非常一致。不过，我还没有找到这样的功能。

不过我可能最终会做一个。可能是一个有趣的简单人工智能项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T19:57:53.827

With intl/NumberFormatter:

```
var_dump(
    numfmt_create('en_US', NumberFormatter::SPELLOUT)->format(655)
); 
```

# git - Git - 如何处理符号链接

> ID：15465436
> 
> 赞同：80
> 
> 时间：2013-03-17T19:52:32.237
> 
> 标签：git

在 git 中处理符号链接的正确方法是什么？

我有以下结构：

```
Vendors
  Module A
  Module B
  Module C
App
 Code
   Modules
     Core Module 1
     Core Module 2
     Module A (symlinked to vendors)
     Module B (symlinked to vendors)
     Module C (symlinked to vendors) 
```

有一个主 App 目录，其中包含应用程序中的所有核心代码。此外，还有一个供应商目录，其中包含符号链接到主应用程序目录并因此集成的模块。

重要的是，供应商目录和主应用程序目录都在同一个存储库中进行版本控制。

因此，我应该让 git 继续存储符号链接，还是想办法让它忽略符号链接？

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2013-03-17T20:01:20.817

Git can handle symlinks just fine as long as the operating system used by all developers supports them. Since you depend on having these symlinks present I will assume that your development environments all support symlinks.

To decide if something should be included in your git repository or not (symlink or otherwise) consider the following:

*   Is it a file generated by some tool or other process in the repository? If so, it's best to ignore it and let each user generate the file, so that they will always have the latest version.
*   Is the file specific to a particular user's development environment, or one that is used in all environments? If it's a quirk of a particular user's environment, like a configuration to ignore Emacs backup files, it doesn't belong in the repo. If it's something all developers will need, and/or something that's needed to build the application for production, it should go in the repository.

In your case it seems like the symlinks are not generated and they are needed in all environments, so putting them in the repository should be fine.

However, when creating them be sure to create them as relative symlinks rather than absolute symlinks, so that they'll work regardless of where the repository is cloned. The easiest way to do this is to change directory into the Modules directory and create the symlink from there:

```
cd App/Code/Modules
ln -s "../../../Vendors/Module A" "Module A" 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-17T19:59:01.337

Git stores the symlink, just like any other file in its version control - except for a symlink it would only store the information about the path it is symlinking to, and the file type as symlink instead of a regular file.

If the symlink points to a directory, git does not store the contents under the symlinked directory.

So there should be no harm in storing symlinks versioned under git for your case.

One more thing you need to be aware of with symlinks is that, git would only recreate the symlinks on a fresh clone, not the file or directory it is pointing at. There are chances that the symlinked path would be non-existent (say when using absolute paths).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-25T00:29:55.060

@Tuxdude 完全不能同意你的观点“......那么你做错了什么”。例如，如果您需要将媒体文件夹放在网络服务器或 NFS 上的不同驱动器上，那么您必须将其置于版本控制之外。因此，正如您所解释的，将无法通过版本控制访问符号链接媒体文件夹中的内容。但这是一个你必须这样做的场景。这真的很痛苦......我的场景更加复杂（我不会详细介绍），我真正想要的是将符号链接文件夹的子文件夹添加到版本控制中，而不是它的内容，但是我需要有一个选项，我可以忽略 git 中子文件夹类型本身的任何更改。例如，基本结构：

*   应用程序/媒体/bla
*   应用程序/媒体/blub

我需要 git 版本控制中的那些文件夹，没有它的内容。

在网络服务器（相同版本）上，这些文件夹看起来像这样（符号链接）：

*   app/media/bla => 完全在别处
*   app/media/blubb => 又在另一个地方

开发人员在他们的本地环境中应该只有第一步中解释的原始版本化结构（无符号链接）。但是网络服务器有指向不同 NFS 系统的符号链接。

如果有人知道如何解决这个问题，我将不胜感激，因为我还没有找到任何解决方案。

我现在这样做的唯一方法是让一个构建器为本地环境创建正确/不同的结构，并且服务器和媒体子文件夹目前完全被 gitignore 忽略。但这有时可能很棘手/难以维护。

# c++ - 访问类外的非静态数据成员

> ID：15465437
> 
> 赞同：1
> 
> 时间：2013-03-17T19:52:36.387
> 
> 标签：c++, non-static, datamember, data-members

是否可以访问其类之外的非静态数据成员？假设您有如下示例。我知道作为示例没有多大意义，但我只想了解如何访问非静态数据成员。如果编译以下内容，则会产生错误：

```
 C.h|70|error: invalid use of non-static data member ‘C::age’| 
```

//通道

```
class C{
  public:
    int age;
};
 int getAge(); 
```

//C.cpp

```
C::C()
{
    age  = 0;
}
int getAge(){
   return (C::age);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T19:56:17.267

非静态成员依赖于实例。它们在初始化有效实例时被初始化。

您的示例的问题在于，它尝试通过类接口访问非静态成员，而无需先初始化具体实例。这是无效的。

你可以做到`static`：

```
class C{
public:
    static int age;
}; 
```

这需要您`age`在运行时使用之前还定义：`int C::age = 0`. 请注意，`C::age`如果使用此方法，可以在运行时更改 的值。

或者，您可以制作它`const static`并直接初始化它，如下所示：

```
class C{
public:
    const static int age = 0;
}; 
```

在这种情况下， 的`C::age`值为`const`。

两者都可以让您在没有实例的情况下获得它：`C::age`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T19:57:14.313

Without making it static, you would have to create a value:

Either an lvalue:

```
C c;

return c.age; 
```

or an rvalue:

```
return C().age;
// or
return C{}.age; 
```

The problem with your code is that you try to access the `age` member without creating an instance of the class. Non-static data members of a class are only accessible through an instance of the class, and in your case no instance is created.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T23:30:17.977

你不能这样做的原因是因为局部变量是在运行时分配到堆栈上的——如果你真的想使用一些内联 asm，你可以获得它的位置，但它需要一些调试才能获得堆栈位置和更高版本（在函数）你越想访问它，它就越有可能被其他东西覆盖。

# ruby-on-rails-3.2 - FactoryGirl 测试失败 - 试图建立自己的关联

> ID：15465460
> 
> 赞同：0
> 
> 时间：2013-03-17T19:55:08.257
> 
> 标签：ruby-on-rails-3.2, factory-bot, rspec-rails

我正在尝试使用 FactoryGirl 创建一个自关联对象以用于测试简单的类别树。我已通读[FactoryGirl 的入门文档](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#associations)以设置关联，但仍有问题。我想测试一个对象是否有父对象和子对象（1 个子对象，因为这是我的 FactoryGirl 定义中的设置）。我对父母的测试通过，但对孩子的测试失败

错误信息

```
1) Category should have a child
   Failure/Error: category.children.count.should eq(1)

     expected: 1
          got: 0 
```

RSPEC 测试

```
it "should have a child" do
    category = FactoryGirl.build(:parent_category)

    category.should_not be_nil

    category.children.count.should eq(1)
end

it "should have a parent" do
    category = FactoryGirl.build(:child_category)

    category.should_not be_nil

    category.parent.should_not be_nil
end 
```

父/子关系的模型设置（同一模型）：

```
class Category < ActiveRecord::Base
  include ActiveModel::ForbiddenAttributesProtection

  belongs_to :parent, :class_name => 'Category'
  has_many :children, :class_name => 'Category', :foreign_key => 'parent_id', :dependent => :destroy

  attr_accessible :name, :parent_id

  validates :name, :presence => true

  before_validation :uppercase_name

  def uppercase_name
    self.name.upcase! unless self.name.nil?
  end
end 
```

FACTORYGIRL 设置：

```
FactoryGirl.define do
  factory :category do
    name "CATEGORY"

    factory :parent_category do
      name "PARENT"
      parent_id 0
      after(:create) do |pc, evaluator|
        FactoryGirl.create_list(:category, 1, parent: pc)
      end
    end

    factory :child_category do
      name "CHILD"
      association :parent, factory: :parent_category
    end

  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T16:27:31.867

由于 awesome_nested_set 的并发问题，我们最终使用了[closure_tree](https://github.com/mceachen/closure_tree)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:29:18.640

我发现了一个很有前途的 gem，叫做[awesome_nested_set](https://github.com/collectiveidea/awesome_nested_set)，它似乎有一个非常干燥的目的。

还有另一个有趣的树宝石叫做[祖先](https://github.com/stefankroes/ancestry)。

# vb.net - 从 VB .NET 访问 DLL

> ID：15465462
> 
> 赞同：1
> 
> 时间：2013-03-17T19:55:15.733
> 
> 标签：vb.net, visual-studio, dll, header-files, solution

我的问题的答案可能已经存在，但我没有成功地将数据综合成一个连贯的解决方案。感谢您的建议。

我正在使用 Visual Basic (.NET 3.5) 和 Visual Studio 2012 编写“用户控制”应用程序。我得到了一个 DLL 文件，其中包含我必须访问的功能。此外，我还获得了相应的 .LIB 和 .H 文件，我被告知这是正确使用 DLL 所必需的。我相信 DLL 是用 C 编写的。

我还获得了一些较旧的 VB 代码，据说这些代码利用了 DLL 的功能，即 DLL 在项目中“包含”（或某些东西）。正如您可能会说的那样，我对此的把握充其量是微不足道的。这是VB代码：

```
Private Declare Function SF_AddToCommandQueue Lib "SFrmUt80.dll" Alias "_SF_AddToCommandQueue@8" _
    (ByVal CmdCode As Integer, ByVal strParam As String) As Boolean

Private Declare Function SF_FlushCommandQueue Lib "SFrmUt80.dll" Alias "_SF_FlushCommandQueue@4" _
    (ByVal strWindowTitle As String) As Boolean

Private Declare Function SF_GetUserName Lib "SFrmUt80.dll" Alias "_SF_GetUserName@8" _
    (ByVal strBuffer As String, ByVal BufferSize As Integer) As Integer

Private Declare Function SF_GetUserID Lib "SFrmUt80.dll" Alias "_SF_GetUserID@0" _
    () As Integer

Private Declare Function SF_GetCmdType Lib "SFrmUt80.dll" Alias "_SF_GetCmdType@0" _
    () As Integer

Private Declare Function SF_GetCmdFilename Lib "SFrmUt80.dll" Alias "_SF_GetCmdFilename@8" _
    (ByVal strBuffer As String, ByVal BufferSize As Integer) As Integer

Private Declare Function SF_GetRegisteredMsg Lib "SFrmUt80.dll" Alias "_SF_GetRegisteredMsg@0" _
    () As Integer 
```

希望这不是太模糊，我想知道如何将这个 DLL 文件集成到我的解决方案中，以便我可以在 VB .NET 中使用它的功能。

非常感谢您的智慧。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:02:42.653

-files`.H`对您没有多大用处，因为您不在托管环境中使用它们。您实际上只需将`DLL`s 包含到您的解决方案中（即将它们添加到 中的项目中`Solution-Explorer`）。
VS 为您完成其余的工作，您需要做的就是，就像您已经做的那样，在源代码中声明库中的函数并调用这些函数。

在[MSDN](http://msdn.microsoft.com/en-us/library/26thfadc.aspx)上有一篇关于此的文章。

# java - 如何从 div 中选择特定元素？

> ID：15465463
> 
> 赞同：-1
> 
> 时间：2013-03-17T19:55:16.533
> 
> 标签：java, html, jsoup, selector

我想从此 div 获取日期：

```
<div class="pandatacontcol" style=" width:160px;">
    <h6>Date Qualified</h6>
    <p id="QualDate34868684">2013-03-08 12:04:01</p>
</div> 
```

所以输出将是：`2013-03-08`

我试图这样做：

```
elements = doc.select("p[id^=\"QualDate\"]"); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T20:29:28.443

不带引号试试

```
doc.select("p[id^=QualDate]"); 
```

属性的值设置在引号内`<tag attribute="value">`，但这些引号不是值的一部分。

# redbean - Redbean：如何将 R::graph() 与 json 解码输入一起使用

> ID：15465467
> 
> 赞同：3
> 
> 时间：2013-03-17T19:55:33.923
> 
> 标签：redbean

我*想*我正在使用 Redbean 3.3.7（从网站上下载的一体机），但我在代码中找不到版本号。我正在接收一些 json 编码的数据并想用 R::graph() 处理它，但是我收到了一个错误。

```
$json = '{"id": "","title": "Test Article","slug": "test-article","content": "<p>This is a test article</p>"}';

$decoded = json_decode($json, true); 
```

这给了我一个数组

```
var_dump($decoded)

array(4) {
  ["id"]=>
  string(0) ""
  ["title"]=>
  string(12) "Test Article"
  ["slug"]=>
  string(12) "test-article"
  ["content"]=>
  string(29) "<p>This is a test article</p>"
} 
```

还

```
echo gettype($decoded); 
```

返回“数组”。

但是当我尝试这个时：

```
$bean = R::graph($decoded); 
```

我收到 RedBean_Exception_Security 错误消息“Expected array but got :string”; rb.php 第 9029 行

我究竟做错了什么？更重要的是，我该如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T22:13:15.630

根据文档“一个数组必须包含一个名为 'type' 的键，其中包含它所代表的 bean 的类型”。所以我只需要在调用 R::graph() 之前添加 $decoded['type'] = 'table_name'。如果我在提交的表单中添加一个名为“type”的隐藏字段，它也可以工作。

```
<input type="hidden" name="type" value="table_name" /> 
```

# java - 泽西岛：向服务器响应添加标头

> ID：15465470
> 
> 赞同：3
> 
> 时间：2013-03-17T19:55:47.577
> 
> 标签：java, jersey, jax-rs

我正在使用泽西岛，我有以下方法：

```
@POST
@Path("hello")
@Produces(MediaType.TEXT_HTML)
public String hello(@FormParam("username") String username)
{
    Gson gson = new Gson();
    CommunicationResponseM result = new CommunicationResponseM();

    String result = "hello";

    return gson.toJson(result);
} 
```

到目前为止一切顺利，但现在我需要添加一些标题。我怎样才能做到这一点？

谢谢！

PS：
我以这种方式启动Jersey服务器：

```
 final HttpServer server = HttpServerFactory.create(baseUrl);
    server.start(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T20:14:31.983

`Response`您可以改为返回一个对象。看看：
[https](https://jersey.java.net/nonav/documentation/latest/user-guide.html#d0e5169) ://jersey.java.net/nonav/documentation/latest/user-guide.html#d0e5169 和
[http://jersey.java.net/nonav/apidocs/1.17/jersey/javax/ws /rs/core/Response.ResponseBuilder.html](http://jersey.java.net/nonav/apidocs/1.17/jersey/javax/ws/rs/core/Response.ResponseBuilder.html)

这些应该让你走上正确的轨道......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T20:29:49.100

如果您正在寻找一种从 http 请求中获取标头参数值的方法，那么您可以使用[@HeaderParam](http://jsr311.java.net/nonav/javadoc/javax/ws/rs/HeaderParam.html)注释。它类似于@FormParam 注释。

如果您希望在响应中添加标题，有几种方法。

*   [您可以使用@Context](https://jsr311.java.net/nonav/javadoc/javax/ws/rs/core/Context.html)注释在资源中注入[HttpServletResponse](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletResponse.html)并在其上调用 addHeader 方法。
*   您可以在您的方法中返回一个[Response](https://jsr311.java.net/nonav/javadoc/javax/ws/rs/core/Response.html)对象并使用它来添加标头。另请参阅[ResponseBuilder](https://jsr311.java.net/nonav/javadoc/javax/ws/rs/core/Response.ResponseBuilder.html)。

对于 Jersey 1，[Jersey 1.18 用户指南](https://jersey.java.net/documentation/1.18/index.html)中有更多信息。请参阅第 2.5 和 2.13 节。

关于[Jersey 2 用户指南](https://jersey.java.net/documentation/latest/index.html)，请参阅第 3 章和第 3.6 节。

# jquery - “同位素”不能很好地与“CarouFredsel”配合使用

> ID：15465475
> 
> 赞同：1
> 
> 时间：2013-03-17T19:56:31.400
> 
> 标签：jquery, jquery-isotope, caroufredsel

我正在尝试将 Isotope 与 Caroufredsel 一起使用，但没有成功。

我在用着：

HTML+WP:

事实上，Isotope 和 Caroufredsel 使用相同的 ID，这是主要冲突。

```
<section class="products">

    <nav id="f1" class="usNavi">
        <div class="wrap">
            <ul id="filter" class="filter" data-key="filter">
                <li><a href="#" data-filter="*">Todos</a></li>
                <li><a href="#" data-filter=".p-10">EcoLife Technologies</a></li>
                <li><a href="#" data-filter=".p-6">SilverLine</a></li>
                <li><a href="/productos/">Regresar</a></li>
            </ul>
        </div>
    </nav>

    <div id="heaters">

        <div class="arrow-nav">
            <a id="left" class="left" href="#"></a>
            <a id="right" class="right" href="#"></a>
        </div>

    <ul id="carrusel" class="carrusel clearfix">

            <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
            <?php
            $cat = get_the_category();
            ?>
            <li class="product <?php foreach($cat as $cate){
                $id = $cate->cat_ID;
                echo "p-$id";
            }
            ?> heater-<?php the_ID(); ?>">
            <figure class="clearfix">
                <?php the_post_thumbnail(); ?>
            </figure>

            <h2><?php the_title(); ?></h2>
            <h3><?php get_spec_0_1(); ?></h3>
            <h4><?php get_spec_6_1(); ?></h4>
            <a href="<?php the_permalink(); ?>">Ver</a>
            <small>
                Uso Recomendado para
                <figure class="clearfix">
                    <?php get_spec_300(); ?>
                </figure>
                <strong>personas.</strong>
            </small>

        </li>

    <?php endwhile; endif; ?>
    <?php wp_reset_query(); ?>

</ul>
</section> 
```

这就是我如何称呼 CarouFredsel 和 Isotope....

```
<script>

jQuery(function($) {

    var _onBefore = function() {
        $(this).find('li').stop().css('opacity', '0.25' );
    };

    var _onAfter = function() {
        $(this).find('li').stop().css('opacity', '1' );
    };

    //isotope

    var $container = $('#carrusel');

    $('#filter a').click(function(){
        var selector = $(this).attr('data-filter');
        $container.isotope({
            filter: selector,
            animationOptions: {
                duration: 750,
                easing: 'linear',
                queue: false

            }
        });
        return false;
    });

    $container.isotope({
        filter: '*',
        animationOptions: {
            duration: 750,
            easing: 'linear',
            queue: false
        }
    });

    $("#carrusel").carouFredSel({
        auto    : false,
        width: '100%',
        height: '100%',

        scroll: {
            duration: 750

        },
        prev: {
            button: "#left",
            key: "left",
            items: 2,
            onBefore: _onBefore,
            onAfter: _onAfter

        },
        next: {
            button: "#right",
            key: "right",
            items: 2,
            onBefore: _onBefore,
            onAfter: _onAfter
        }

    });

});
</script> 
```

谢谢

# django - Django：信号接收器是否同时运行？

> ID：15465476
> 
> 赞同：6
> 
> 时间：2013-03-17T19:57:10.317
> 
> 标签：django, concurrency, signals

我想知道响应 Django 信号的侦听器方法是顺序执行还是同时执行。本质上是这样的：

```
for object_instance in object_instance_list:
    custom_signal.connect(object_instance.method)
custom_signal.send(self) 
```

与此不同：

```
for object_instance in object_instance_list:
    object_instance.method() 
```

编辑：对代码进行语法更正

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:08:00.953

您可能已经阅读了 FWIW 代码 - Django 是开源的。但无论如何：

1.  信号接收器被顺序调用
2.  在您的第二个片段中，您*没有*调用 object_instance.method - 您需要添加括号（并最终传递相关参数 - 在这种情况下至少是发送者）才能实际调用该方法。

长话短说：信号主要用于允许应用程序之间的松散耦合。如果你想要并发执行，你要么必须使用线程或子进程（这可能不安全，具体取决于执行环境），或者选择像 celery 这样的东西。

# android - Android项目从Windows迁移到Mac（IClasspathEntry必须是绝对的）

> ID：15465477
> 
> 赞同：2
> 
> 时间：2013-03-17T19:57:11.123
> 
> 标签：android, eclipse, classpath

我已经解决了将旧的 Android 项目从 Windows 迁移到 Mac 的大多数问题，但路径问题仍然存在。

当我加载 Eclipse 时，它​​给了我一条错误消息：

“为 android-7 解析数据失败。iClasspathEntry 的源附件路径 'C:\Android\sdk\sources\android-17' 必须是绝对的”

显然这条路是错误的，但我到底该在哪里改变它呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-04T22:28:00.467

我遇到了同样的问题，发现并找到[了一个有用的链接](http://www.mikesel.info/show-hidden-files-mac-os-x-10-7-lion/)来显示 Mac 上的隐藏文件。

在 mac 的终端窗口中运行以下命令

```
defaults write com.apple.Finder AppleShowAllFiles TRUE 
```

之后，重新启动查找器（alt+右键单击）

然后它将显示隐藏文件 .metadata 文件夹。

删除以下文件：

```
.metedata/.plugins/org.eclipse.jst.j2ee.web/webLibrariesCache.index 
```

重启日食；错误应该消失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-11T15:07:54.250

首先关闭 Eclipse。

然后去

```
.metadata/.plugins/org.eclipse.core.resources/.root/.indexes 
```

使用文本编辑器打开文件并更改 SDK 的路径。

重新启动 Eclipse，一切都会好起来的！

# python - 更新或插入 MySQL Python

> ID：15465478
> 
> 赞同：9
> 
> 时间：2013-03-17T19:57:13.360
> 
> 标签：python, mysql, mysql-python

如果记录已经存在，我需要更新一行，如果不存在，我需要创建一个新记录。我不知道 ON DUPLICATE KEY 将使用 MYSQLdb 完成此操作，但是我无法使其正常工作。我的代码如下

```
 cursor = database.cursor()
        cursor.execute("INSERT INTO userfan (user_id, number, round VALUES (%s, %s, %s) ON DUPLICATE KEY UPDATE user_id =%s, number=%s, round=%s", (user_id, number, round))
        database.commit() 
```

主键是 user_id

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-17T20:11:37.580

缺少一个括号。您还可以在语句`VALUES(column)`的`ON DUPLICATE KEY UPDATE`部分中使用：

```
 cursor = database.cursor()
    cursor.execute("""
        INSERT INTO userfan 
            (user_id, number, round)
        VALUES 
            (%s, %s, %s) 
        ON DUPLICATE KEY UPDATE 
                                          -- no need to update the PK
            number  = VALUES(number), 
            round   = VALUES(round) ;
                   """, (user_id, number, round)     # python variables
                  )
    database.commit() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-27T12:13:39.707

```
def insertAndUpdateData(lVideoList, no_of_gate):
    connection = sqlite3.connect('db.sqlite',
                                 detect_types=sqlite3.PARSE_DECLTYPES |
                                              sqlite3.PARSE_COLNAMES)
    cursor = connection.cursor()
    success = 200
    unsuccess = 500
    default_value = 0
    lDefaultEntry = None
    for i in range(no_of_gate):
        gate_id = i+1
        for videofilename in lVideoList:            
            cursor.execute("SELECT * FROM dailyfootfall WHERE csv_name=? AND gate_id=?", [videofilename, gate_id])
            lDefaultEntry = cursor.fetchone()
            try:

                if lDefaultEntry is not None:

                    print ('Entry found...!!!')

                    cursor.execute("UPDATE dailyfootfall SET video_download=?, processed=?, send_status=? ,male_footfall=?, send_status_male=?, "
                                   "female_footfall =?,send_status_female=?, outsiders=?, send_status_outsiders=? "
                                   "WHERE csv_name=? AND gate_id=? AND footfall=0", [unsuccess,unsuccess,unsuccess,default_value,unsuccess,
                                                                                    default_value,unsuccess,default_value,unsuccess,videofilename,gate_id])
                    print("Data_Updated..!!!")

                else:
                    cursor = connection.cursor()
                    print ('Entry Not found...!!!')
                    print("videofilename: ", videofilename)
                    insert_query = ("INSERT or IGNORE INTO dailyfootfall(csv_name, video_download, processed, footfall, send_status, "
                                    "male_footfall, send_status_male, female_footfall, send_status_female, gate_id,outsiders, send_status_outsiders) "
                                    "VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,?)")

                    cursor.execute(insert_query,[videofilename, unsuccess, unsuccess, default_value, unsuccess, default_value,
                                                 unsuccess, default_value, unsuccess, gate_id, default_value, unsuccess])

                    print("Data_Inserted..!!")
                    print("="*20)

            except Exception as e:

                exc_type, exc_obj, exc_tb = sys.exc_info()
                fname = os.path.split(exc_tb.tb_frame.f_code.co_filename)[1]
                print("Entry found: ",exc_type, fname, exc_tb.tb_lineno)

    print("Data Inserted Successfully !")
    connection.commit()
    cursor.close()
    connection.close()

if __name__ == "__main__":

    lVideoList = ['2022_01_27_10_00_00-2022_01_25_10_30_00', '2022_01_27_10_30_00-2022_01_25_11_00_00',
                '2022_01_27_11_00_00-2022_01_25_11_30_00', '2022_01_27_11_30_00-2022_01_25_12_00_00']
    no_of_gate = 3

    UpdateData(lVideoList, no_of_gate)

    print("default_value inserted!!!!") 
```

# php - 带有 SQLSRV 查询的 PHP While 语句

> ID：15465480
> 
> 赞同：0
> 
> 时间：2013-03-17T19:57:14.607
> 
> 标签：php, sql, sqlsrv

我有以下 PHP 代码：

```
echo "var s1 = [";
$count = 0;
while($row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC))
  {
  if ($count++ > 0) echo ", ";
  echo $row['OrdersBal'];
  }
echo "];\n";
echo "var ticks = [";
$count2 = 0;
while($row2 = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC))
  {
  if ($count2++ > 0) echo ", ";
  echo "'" . $row2['CardName'] . "'";
  }         
echo "];\n"; 
```

它目前正在输出：

```
var s1 = [37966.550000, 19876.170000, 17314.580000, 15614.410000, 7575.000000];
var ticks = []; 
```

但我希望它输出：

```
var s1 = [37966.550000, 19876.170000, 17314.580000, 15614.410000, 7575.000000];
var ticks = ['Parameter Technology', 'Earthshaker Corporation', 'Microchips', 'Mashina Corporation', 'SG Electronics']; 
```

如果我移动第二个 while 语句使其首先出现，那么该语句将正确输出。这让我相信我不能以这种方式连续执行两个 while 语句，但我不确定我的替代方案是什么。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T20:02:53.573

在循环期间使用变量存储文本，然后将它们打印出来：

```
$count = 0;
$orders = "";
$cardNames = "";
while($row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC))
{
    if ($count++ > 0)
    {
        $orders .= ", ";
        $cardNames .= ", ";
    }
    $orders .= $row['OrdersBal'];
    $cardNames .= $row['CardName'];
}

echo "var s1 = [" . $orders . "];\n";
echo "var ticks = [" . $cardNames . "];\n"; 
```

# jquery - 有没有办法让视差在 DIV 中起作用

> ID：15465481
> 
> 赞同：2
> 
> 时间：2013-03-17T19:57:29.870
> 
> 标签：jquery, html, css, parallax

可能完全是错误的树，但是您可以使用 div background-image 元素制作视差滚动图像吗？

我想要发生的是我目前有一些带有文本效果翻转图像的 DIV，但是我在背景图像中使用视差时，我想保留所有站点图像的 3D 主题。

编辑：例如，是否可以在此页面上制作蓝色框：

www.parkhallmanor.co.uk/new

使用视差效果滚动单独的图像？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-17T20:47:26.030

是的，这是可能的。

正如您大概知道的那样，正常的视差效果只是将 bg 图像放在主体标签上，然后在滚动时更改其背景偏移量，或者在其上移动一些 div 比滚动速度慢。

由于您希望每个窗口中都有单独的图像，因此您需要使用背景偏移方法。每个 div 在 CSS 中都是这样的：

```
#div1 {
    background: url('/ui/div1bg.jpg') 0 -800px no-repeat;
} 
```

是[背景](http://www.w3schools.com/cssref/pr_background-position.asp)`0 -800px`位置。随着窗口向下滚动，您希望通过逐渐增加第二个值来向下移动背景，以模拟透视。在模拟的视角中，远处的东西慢慢地从你身边经过，靠近的东西移动得很快。

所以你只是得到滚动事件：

```
$(window).scroll(function () {
    parallax();
}); 
```

收集您将使用的指标：

```
function parallax() {
    var ev = {
        scrollTop: document.body.scrollTop || document.documentElement.scrollTop
    };
    ev.ratioScrolled = ev.scrollTop / (document.body.scrollHeight - document.documentElement.clientHeight);
    render(ev);
} 
```

并渲染更改：

```
function render(ev) {
    var t = ev.scrollTop;
    var y = Math.round(t * 2/3) - 800;
    $('#div1, #div2, #div3').css('background-position', '0 ' + y + 'px');
} 
```

因此，随着 t 变量的增加（用户向下滚动），图像以 2/3 的速率移动。它从 -800px 开始，一旦用户向下滚动到 1200px，就会逐渐变为 0。如果页面长于 1200 像素并且元素仍然可见，则必须调整数学运算，因为此后代码将滚动到图像顶部。但是，如果到那时它们已经超过了该元素，则可以忽略它。

显然，您应该调整那里的数字以获得正确的 div 和图像效果。

如果你想以总页面高度为基础，无论它碰巧是什么，你都可以使用上面的第二个指标 .ratioScrolled，例如：

```
var y = Math.round((1 - ev.ratioScrolled) * -100); 
```

因此，例如，如果您有一个高度为 150 像素的 div 和一个高度为 250 像素的图像，那么上面的内容将完美运行 - 它从 -100 像素开始（向上移动）并且随着页面滚动，无论它碰巧有多长，它以 0px 结束（无移位 - 所以底部 100px 被剪裁）。

# java - 排序/比较不同的标准

> ID：15465482
> 
> 赞同：1
> 
> 时间：2013-03-17T19:57:35.127
> 
> 标签：java, sorting, data-structures, comparison

所以我有来自 STDIN 的数据，我正在为每行创建一个包含数字数据字段的对象。基于此字段，我想将它们分类为 PriorityQueue 或 LinkedList。在此排序之后，我将计算要保存的对象的另一个值（这些值将基于频率等）。然后我想使用第二个值作为新标准将它分类到另一个 PQ 或 LL 中。

每次使用不同的标准对相同的对象进行两次排序的最佳方法是什么？我不想只用不同的 compareTo 方法创建两种类型的同一对象。我希望有更好的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T20:04:47.410

在对象 thesevles 中实现 Comparable 时，您应该使用比较器：http: [//docs.oracle.com/javase/6/docs/api/java/util/Comparator.html](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)

这使您能够使用不同的比较逻辑来比较相同的对象。

# ios - How to share data between ios Safari app and Native App?

> ID：15465483
> 
> 赞同：1
> 
> 时间：2013-03-17T19:57:38.407
> 
> 标签：ios, mobile-safari

I have a need to set some data via ios Safari (a token), and then read that data (token) from a native iOS app.

i passed the context token to the app immediately via an URL-scheme by registering my app but my app Rejeced.

# html - Semantic meaning of the tag

> ID：15465488
> 
> 赞同：0
> 
> 时间：2013-03-17T19:57:57.447
> 
> 标签：html

I read the explanation on the [W3C website](http://www.w3.org/html/wg/drafts/html/master/text-level-semantics.html#the-mark-element) but for me the definition isn’t satisfying. Can anybody paraphrase this?

As I understand, it should be used in cases when a certain part of a text references to another context, like e.g. another text part or a search string I entered.

I don’t get the examples with the quotations—where’s the referential meaning when highlighting a part of a quotation just to gather the readers’ attention or mark a part of a quotation to emphasize it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:06:12.850

[用HTML5 Doctor](http://html5doctor.com)的话来说，也可以参考一篇get到的文章：“ *[Draw attention with mark](http://html5doctor.com/draw-attention-with-mark/)* ”。

来自 w3c.org：4.6.19[标记元素](http://www.w3.org/html/wg/drafts/html/master/text-level-semantics.html#the-mark-element)：

> 由于在另一个上下文中的相关性，mark 元素表示一个文档中为参考目的而标记或突出显示的一系列文本。当用于引文或散文中提到的其他文本块时，它表示最初没有出现但已添加的亮点，以使读者注意可能未被认为重要的文本部分最初编写该块时的原始作者，但现在受到了以前意想不到的审查。在文档的主要散文中使用时，它表示由于可能与用户当前活动相关而突出显示的文档部分。

开头提到的文章的最后一部分也谈到了这个标签的语义：

> **strong 和 em 的区别**
> 
> 以前，您可能已经使用 em 和 strong 分别为文本部分添加强调或重要性。标记与这两个不同，因为它纯粹用于突出一段文本与用户和/或页面内容的相关性。过去您可能为此使用了 em 和 strong ，由于缺乏更好的元素，这在当时可以说是有效的，但是引入 mark 仅仅意味着它们的使用会更加严格。
> 
> 当您需要指出一段文本的重要性时使用strong，例如错误或警告信息，em 应该用于强调文本，强调单词以适应句子的含义。

# c# - ASP.NET MVC 4 Cross field or property validation

> ID：15465491
> 
> 赞同：2
> 
> 时间：2013-03-17T19:58:19.650
> 
> 标签：c#, asp.net, asp.net-mvc

I'm trying to figure out how to validate that a user has entered matching passwords when they sign up. Is there anything built in to MVC 4 Data Annotations that I can use for this or is the only route creating a custom validation attribute?

If I do have to create a custom validation attribute, how do I access the password property (assuming I put the annotation on the confirm password property)? Also, are there any commonly used libraries for this type of validation?

This is what I have for the beginning of a custom validation attribute, just not sure how to access the password property:

```
public class CrossFieldValidationAttribute : ValidationAttribute
{
    public override bool IsValid(object value) //how do I get the other value in here?
    {
        //validation logic here
        return base.IsValid(value);
    }
} 
```

I appreciate any help!

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-17T20:05:20.287

mvc 中已经内置了一个比较验证属性。请参阅此处的文档：

[http://msdn.microsoft.com/en-us/library/system.web.mvc.compareattribute(v=vs.98).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.compareattribute(v=vs.98).aspx)

一个使用示例是：

```
 public string Password { get; set; }

    [Compare("Password", ErrorMessage = "Uh oh")]
    public string PasswordAgain { get; set; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T20:11:39.663

您可以创建自定义属性并为其公共属性设置附加信息。

```
public class CustomValidationAttribute : ValidationAttribute
{
    public string MeaningfulValidationInfo { get; set; }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        // do whatever meaningful with MeaningfulValidationInfo 
        return base.IsValid(value, validationContext);
    }
} 
```

您可以这样设置附加信息：

```
[CustomValidationAttribute(MeaningfulValidationInfo = "blah")]
public ActionResult Index()
{
    return View();
} 
```

如果您尝试检查两个输入的密码是否相同，您只需在模型中验证即可。

```
 public class LoginModel
    {
        [Required]
        [EmailAddress]
        public string EmailAddress { get; set; }
        [Required]
        public string Password { get; set; }
        [Required]
        [Compare("Password")]
        [Display(Name = "Confirm password")]
        public string ConfirmPassword { get; set; }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-24T02:57:49.943

比较注释是最简单的选择。如下所示，`Compare`指向`Password`属性。

```
[Required]
[StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
[DataType(DataType.Password)]
[Display(Name = "Password")]
public string Password { get; set; }

[DataType(DataType.Password)]
[Display(Name = "Confirm password")]
[Compare("Password", ErrorMessage = "The password and confirmation password do not match.")]
public string ConfirmPassword { get; set; } 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-17T20:05:43.553

您可以使用ASP.NET 工具中内置的 **比较验证 *控件*

我在下面提供了一个示例

```
<body>
    <form id="form1" runat="server">
    <div>

    <asp:Label
        id="lblBirthDate"
        Text="Birth Date:"
        AssociatedControlID="txtBirthDate"
        Runat="server" />
    <asp:TextBox
        id="txtBirthDate"
        Runat="server" />
    <asp:CompareValidator
        id="cmpBirthDate"
        Text="(Invalid Date)"
        ControlToValidate="txtBirthDate"
        Type="Date"
        Operator="DataTypeCheck"
        Runat="server" />

    <br /><br />

    <asp:Button
        id="btnSubmit"
        Text="Submit"
        Runat="server" />

    </div>
    </form>
</body> 
```

请参考以下任何链接以扩展您的知识

[http://www.java2s.com/Tutorial/ASP.NET/0160__Validation/CompareValidatorperformsthreedifferenttypesofvalidations.htm](http://www.java2s.com/Tutorial/ASP.NET/0160__Validation/CompareValidatorperformsthreedifferenttypesofvalidations.htm)

[http://www.vkinfotek.com/aspnetvalidationcontrols.html](http://www.vkinfotek.com/aspnetvalidationcontrols.html)

# ios - Using Reachability throughout an application

> ID：15465494
> 
> 赞同：0
> 
> 时间：2013-03-17T19:58:51.010
> 
> 标签：ios, ios5, uiview, reachability

I would like to simply use Reachability through an application to check internet connection availability. When the internet connection is lost I would like to display a custom view (overlay) which is semi transparent (can still see the displayed view behind) with some text like ...Checking for Internet Connection.

This seems simple, but I cannot get this to work as I expect.

I have read through the apple documentation on Reachability and the logs appear to be working correctly. I would like to confirm that I have this setup correctly, as expected, and how to produce the transparent view/ hide the view when connection is restored.

App Delegate: I make a call to `[self setupReachability];`

Then I have these methods:

```
- (void)setupReachability {
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reachabilityChanged:) name:ReachabilityChangedNotification object:nil];

    self.internetReach = [Reachability reachabilityForInternetConnection];
    [self.internetReach startNotifier];
    [self checkConnection:internetReach];

}

#pragma mark -
#pragma mark - Reachability 
//Called by Reachability whenever status changes.
- (void) reachabilityChanged: (NSNotification* )note {
    Reachability* curReach = [note object];
    NSParameterAssert([curReach isKindOfClass: [Reachability class]]);
    [self checkConnection: curReach];
}
-(void)checkConnection: (Reachability*) curReach {
    NetworkStatus netStatus = [curReach currentReachabilityStatus];
        if (netStatus == NotReachable) {
            NSLog(@"inernet reach - not reachable");
        }
} 
```

I understand I can create a modal view like this:

```
 UIView *modalView = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
 modalView.opaque = NO;
 modalView.backgroundColor = [[UIColor blackColor] colorWithAlphaComponent:0.5f];

UILabel *label = [[UILabel alloc] init];
label.text = @"Modal View";
label.textColor = [UIColor whiteColor];
label.backgroundColor = [UIColor clearColor];
label.opaque = NO;
[label sizeToFit];
[modalView addSubview:label]; 
```

But I am unsure how to add this to whatever currently displayed view controller/ nav controller that is on screen?

EDIT: Error occurring: ![enter image description here](../Images/d58b7894fa154773556f5e7ff394eadd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:18:30.977

`[self.window.rootViewController presentModalViewController:myController animated:YES];`

您需要先将标签添加到模态视图控制器，然后以模态方式呈现。

# php - Resize Wordpress theme header / logo

> ID：15465498
> 
> 赞同：-1
> 
> 时间：2013-03-17T19:59:17.840
> 
> 标签：php, wordpress

How can I resize the header area in order to insert a bigger logo. The logo height is not adjusting properly. This is a specific theme. I will include the header code and the css code.

CSS:

```
/* =Navigation
----------------------------------------------- */

.site-content .site-navigation {
  margin: 0 0 1.5em;
  overflow: hidden;
}
.site-content .nav-previous {
  float: left;
  width: 50%;
}
.site-content .nav-next {
  float: right;
  text-align: right;
  width: 50%;
}

/* =top
----------------------------------------------- */

.topbar {
  height:40px;
  background:#302b29;
}

.top {
  background:url(images/top.png) repeat-x;
  height:117px;
}

.head {
  background:url(images/head.png) center no-repeat;
  height:117px;
}

.logo {
  padding:5px 0px;
}

h1.site-title {
  font-size:20px;
  font-family: Arial,serif;
  font-weight:bold;
  color:#fff;
  margin:15px 0px 5px 0px 
}

h1.site-title a:link,h1.site-title a:visited {
  color:#fff;
}

h2.site-description {
  font-size:14px;
  color: #eee;
}

/* Searchform */

#searchform {
  width:260px;
  float:right;
  margin-top:8px;
}

#s {
  width:180px;
  padding:3px 5px;
  background:#4C4645;
  border:1px solid #5E5B5B;
  color:#fff;
}

#searchsubmit {
  padding:3px 10px;
  background:#800404;
  border:1px solid #A00C0C;
  margin-left:5px;
  box-shadow:none;
  color:#fff;
  text-shadow:1px 1px 0px #540404;
}
/* TOP-MENU */

#botmenu {
  font-size: 14px;
}

#submenu {
  margin: 30px 0px;
  padding:0px 0px;
  height:50px;
}

#submenu ul {
  width: auto;
  float:left;
  list-style: none;
  margin: 0;
  padding: 0 10px;
}

#submenu li {
  float: left;
  list-style: none;
  margin: 0;
  padding: 0;
  color: #222;
  font-weight:400;
}

#submenu li a {
  color: #fff;
  display: block;
    margin: 0;
  padding: 16px 10px 16px 10px;
  text-decoration: none;
  position: relative;
}

#submenu li a:hover, #submenu li a:active, #submenu .current_page_item a  {
  color: #fff;
}  

#submenu li a.sf-with-ul {
  padding-right: 10px;
}

#submenu li ul li a, #submenu li ul li a:link, #submenu li ul li a:visited,
#submenu li ul li ul li a, #submenu li ul li ul li a:link, #submenu li ul li ul li a:visited,
#submenu li ul li ul li ul li a, #submenu li ul li ul li ul li a:link, #submenu li ul li ul li ul li a:visited {
  color: #eee;
  width: 148px; 
  margin: 0;
  padding: 10px 10px;
  border-top:1px solid #403837;
  position: relative;
  font-weight:400;
}

#submenu ul li ul li:first-child a,#submenu ul li ul li ul li:first-child a,#submenu ul li ul li ul li ul li:first-child a  {
  border-top:none;
}

#submenu li ul li a:hover ,#submenu li ul li ul li a:hover ,#submenu li ul li ul li ul li a:hover {
  color: #fff; 
}

#submenu li ul {
  z-index: 9999;
  position: absolute;
  left: -999em;
  height: auto;
  width: 170px;
  margin: 0px 0px 0px 0px;
  padding: 5px 5px;
  background:#302B29;
  border:1px solid #302B29;
}

#submenu li ul a {
  width: 150px;
}

#submenu li ul a:hover, #submenu li ul a:active {
}

#submenu li ul ul {
  margin: -49px 0 0 181px;
}

#submenu li:hover ul ul, #submenu li:hover ul ul ul, #submenu li.sfHover ul ul, #submenu li.sfHover ul ul ul {
  left: -999em;
}

#submenu li:hover ul, #submenu li li:hover ul, #submenu li li li:hover ul, #submenu li.sfHover ul, #submenu li li.sfHover ul, #submenu li li li.sfHover ul {
  left: auto;
  }

#submenu li:hover, #submenu li.sfHover {
  position: static;
}  

/* Layout */

#primary, #secondary{
  padding:50px 0px;
} 
```

Header Code:

```
<body <?php body_class(); ?>>
<div id="page" class="hfeed site">
<header id="masthead" class="site-header" role="banner">
  <div class="topbar">
    <div class="container_6">
    </div>
  </div>
  <div class="top cf ">
    <div class="container_6">
      <div class="head cf">
        <div class="logo grid_2">
          <h1><a href="<?php bloginfo('siteurl');?>/" title="<?php bloginfo('name');?>"> 
            <img style="float: left;" src="linktomylogo/newlogo1.png" alt="" width="148" height="90" /> </a>
          </h1>
          <h2 class="site-description">
            <?php bloginfo( 'description' ); ?>
          </h2>
        </div>
        <div id="botmenu" class="grid_4">
          <p><?php shailan_dropdown_menu( ); ?></p>
          <?php wp_nav_menu( array( 'container_id' => 'submenu', 'theme_location' => 'primary','menu_id'=>'web2feel' ,'menu_class'=>'sfmenu','fallback_cb'=> 'fallbackmenu' ) ); ?>
        </div>
      </div>  
    </div>
  </div>
</header><!-- #masthead .site-header -->
<div id="main" class="site-main cf"> 
```

I have changed a few things but it messes up the site. The height of the image should be around 200 and not 90px.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:04:34.883

徽标放置在 div 内，类为`top`，另一个类为`head`。我在下面稍微修改了他们的 CSS。

```
.top{
    background:url(images/top.png) repeat-x;
    height:200px;  /* Change the height here */
}

.head{
    background:url(images/head.png) center no-repeat;
    height:200; /* and here */
} 
```

# r - Relational operator is not producing the expected answer in R

> ID：15465505
> 
> 赞同：1
> 
> 时间：2013-03-17T20:00:03.830
> 
> 标签：r

This is my first question to StackOverflow. I've searched high and low for an explanation but cannot seem to locate an answer. In short, the relational operator I am using ('<=') is not producing what is expected:

```
> data[['Open']][2]
[1] 79.22
> data[['Avg']][2]
[1] 79.22
> data[['Open']][2] >= data[['Avg']][2]
[1] FALSE 
```

The goal is to: read the data into a data frame; take an average of yesterday's High, Low, and Close prices; and, compare today's Open price with yesterday's average.

After running the scripts on large data, I found that my results in R didn't match a similar analysis run in Excel.

For the StackOverflow community, I scaled down the problem to it's essential parts; but, since my error may be with how I am reading in the data, I've included that part of the code as well.

My test file ('test.csv') looks like this, including a new line at the end of the last row:

```
<TICKER>,<DATE>,<TIME>,<OPEN>,<LOW>,<HIGH>,<CLOSE>
USDJPY,20120713,0:00:00,79.26,79.05,79.37,79.24
USDJPY,20120716,0:00:00,79.22,78.67,79.23,78.84 
```

My Code:

```
# Read in test file
raw <- read.csv('test.csv', header=TRUE, sep=",")

# Convert date and dump data into data frame, date is formatted for time series
stripday <- strptime(raw$X.DATE, format="%Y%m%d")
data <- data.frame(stripday, raw)

# Drop unused data columns and name the used columns
drops <- c("X.DATE.", "X.TIME.", "X.TICKER.")
data <- data[, !(names(data) %in% drops)]
colnames(data) <- c("Date", "Open", "Low", "High", "Close")

# Convert values from facotors to numeric
data[,2] <- as.numeric(as.character(data[,2]))
data[,3] <- as.numeric(as.character(data[,3]))
data[,4] <- as.numeric(as.character(data[,4]))
data[,5] <- as.numeric(as.character(data[,5]))

# Take yesterday's average of High, Low, and Close 
data[['Avg']] <- NA
data[['Avg']][2] <- (
    data[['High']][1] + 
    data[['Low']][1] + 
    data[['Close']][1]) / 3

# Is today's Open greater than or equal to yesterday's Average
data[['OpenGreaterThanAvg']] <- NA
data[['OpenGreaterThanAvg']] <- 1 * (data[['Open']] >= data[['Avg']])

# Write data to .csv
write.table(data, 'output.csv', quote=FALSE, sep=",", row.names=FALSE) 
```

Since 79.22 equals 79.22, I would expect OpenGreaterThanAvg to display a "1" instead of a zero.

str() and class() tell me that the two objects, which I am trying to compare, are the same.

```
> str(data[['Open']][2])
 num 79.2
> str(data[['Avg']][2])
 num 79.2
> class(data[['Open']][2])
[1] "numeric"
> class(data[['Avg']][2])
[1] "numeric" 
```

Also, note that R tells me that data[['Avg']][2] is less than data[['Open']][2]

```
> data[['Open']][2] < data[['Avg']][2]
[1] TRUE 
```

Additionally, I am a HUGE fan of constructive criticism; so, if you suggestions unrelated to the question, I would welcome your comments.

Thank you. Brian

# ant - Set Ant property from Gradle not working

> ID：15465507
> 
> 赞同：4
> 
> 时间：2013-03-17T20:00:46.557
> 
> 标签：ant, gradle

I'm converting our build from Ant to Gradle. Our first step is to add the Gradle build files so we can start using Gradle as our build tool. This lets us use our existing build scripts to build using Ant and convert them to Gradle over time. I want to simply have Gradle call the existing Ant build files. Our projects are all NetBeans projects, which have build.xml and nbproject/build-impl.xml files. Some of the projects require NetBeans build properties, which can be found at ~/.netbeans/6.5.1/build.properties. I currently have build.gradle which contains only this:

```
ant.importBuild 'build.xml' 
```

I can build the project using Ant like this:

```
ant -Duser.properties.file=/home/me/.netbeans/6.5.1/build.properties dist 
```

However, when I build with Gradle, Ant complains it cannot find the properties set in build.properties. I've tried setting the Ant property, but it doesn't seem to get picked up:

```
ant.properties['user.properties.file'] = '/home/me/.netbeans/6.5/build.properties' 
```

I've also tried setting a system property:

```
systemProperties 'user.properties.file': '/home/me/.netbeans/6.5/build.properties' 
```

but this doesn't work either. Ideally I'd like to set this property in ~/.gradle/gradle.properties as just about all of our projects need it.

How can I set this property in Gradle and have Ant pick it up when called from Gradle?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T07:38:20.703

如果要在多个 Gradle 项目上设置加载属性，可以使用 Gradle 初始化脚本[http://www.gradle.org/docs/current/userguide/init_scripts.html](http://www.gradle.org/docs/current/userguide/init_scripts.html)。在初始化脚本中，您将放置以下代码：

```
allProjects {
    ant.properties['user.properties.file'] = '/home/me/.netbeans/6.5/build.properties'
} 
```

# ruby-on-rails - webrick and active_support (LoadError)

> ID：15465508
> 
> 赞同：0
> 
> 时间：2013-03-17T20:00:50.880
> 
> 标签：ruby-on-rails, rubygems, rvm, webrick

I've CentOS 5.8 x86_64 with RVM installed. Under root I do:

```
1) rvm install ruby-1.9.2
2) rvm gemset create global
3) rvm gemset use global
4) gem list

*** LOCAL GEMS ***

actionmailer (2.3.14)
actionpack (2.3.14)
activerecord (2.3.14)
activeresource (2.3.14)
activesupport (2.3.14)
bundler (1.3.4)
daemon_controller (1.1.2)
fastthread (1.0.7)
minitest (1.6.0)
passenger (3.0.19)
rack (1.1.6)
rails (2.3.14)
rake (10.0.3, 0.8.7)
rdoc (2.5.8)
rubygems-bundler (1.1.1)
rvm (1.11.3.6)
sqlite3 (1.3.7)

5) ruby script/server

/usr/local/rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require': no such file to load -- active_support (LoadError)
        from /usr/local/rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
        from /usr/local/rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
        from /var/www/html/lkdoctor/vendor/rails/railties/lib/commands/server.rb:1:in `<top (required)>'
        from /usr/local/rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /usr/local/rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from script/server:2:in `<main>'

6) gem which active_support

/usr/local/rvm/gems/ruby-1.9.2-p320/gems/activesupport-2.3.14/lib/active_support.rb 
```

So I don't understand why Webrick doesn't see this gem!?

In fact I supressed that error with changing /config/boot.rb file with adding these lines:

```
require 'active_support'
require 'action_controller'
require 'active_record'
require 'action_mailer'
require 'active_resource' 
```

However, I understand it is the wrong way. Thank you in advance.

# ruby - 是否可以有多个 github 帖子的命名约定？

> ID：15465511
> 
> 赞同：2
> 
> 时间：2013-03-17T20:01:00.420
> 
> 标签：ruby, github, markdown, jekyll, liquid

是否可以有*多个*github 帖子的命名约定？

例如，在`_post`目录中，我想有这样的文件：

```
2013-03-18-xyz.markdown  
abc.markdown 
```

以便可以在 URL 中找到从中生成的 HTML 页面：

```
http://username.github.com/2013/03/18/xyz.html

http://username.github.com/abc.html 
```

分别对于在`_config.yml`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T23:23:13.843

> 注意部分......对于每个帖子......

我想说更重要的报价是这个

> 您可以通过配置或在每个帖子 **的 YAML Front Matter 上为您的站点指定永久链接。**

`_config.yml`这意味着您甚至可以不使用

```
---
layout: post
title: Coderay
tags: Windows
permalink: /:year/:month/:title
--- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T21:07:31.653

根据文档，应该可以通过为每个帖子定义永久链接格式 [https://github.com/mojombo/jekyll/wiki/Permalinks](https://github.com/mojombo/jekyll/wiki/Permalinks)

> 您可以通过配置或在每个帖子的 YAML Front Matter 上为您的站点指定永久链接。您可以自由选择一种内置样式来创建链接或制作自己的链接。默认样式始终为日期。

注意部分`...for each post...`。

# c# - Comparing numbers in asp.net

> ID：15465512
> 
> 赞同：1
> 
> 时间：2013-03-17T20:01:06.230
> 
> 标签：c#

I am creating a random number generator, when a certain number is generated I want the label to change change colour.

```
Random RandomClass = new Random ();

Num1.Text = RandomClass.Next (1, 49).ToString();

if (Num1.Text >= "9") 
{
   this.Num1.BackColor = System.Drawing.Color.DarkBlue;
} 
```

Now I know `>= "9"` Doesn't work but I can't seem to think of anything else.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:02:19.237

嗯，我想这会做到：

```
int r = RandomClass.Next (1, 49);
Num1.Text = r.ToString();

if (r >= 9) 
{
   this.Num1.BackColor = System.Drawing.Color.DarkBlue;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:09:29.983

*好吧*，尚不清楚您真正想要什么，但您所做的是*字符串比较*而不是*整数比较*。

如果你想比较 int 值，你可以这样做；

```
Random RandomClass = new Random ();
int i = RandomClass.Next (1, 49);
Num1.Text = i.ToString();

if (i >= 9) 
{
   this.Num1.BackColor = System.Drawing.Color.DarkBlue;
} 
```

# java - JPanel Format Problems

> ID：15465513
> 
> 赞同：0
> 
> 时间：2013-03-17T20:01:16.467
> 
> 标签：java, swing, jframe, jpanel, layout-manager

I have a 2 JPanels, 1 a button Panel and one a Graphic Panel. I would like the button panel to situated right below the graphic panel but the button panel cuts off the Graphics Panel in the middle. I've been trying the box layout which seems from discussions seems like the best format for what I am trying to do. Can anyone please give me some advice on my formatting problem.

```
 JFrame canvas = new JFrame("Baseball Strike K");

    JFrame canvas = new JFrame ("GraphicBoard");
      canvas.setVisible(true);
      canvas.setSize(1000,1000);
      canvas.setDefaultCloseOperation(EXIT_ON_CLOSE);
//create two panels
//add them to contentPane

//set Layout
      JPanel buttonPanel = createButtons();
      JPanel mainPanel = new Graphic(); //extends JPanel and writes the paint method
      mainPanel.setSize(1000, 1000);

      Container content = canvas.getContentPane();
      content.setLayout(new BoxLayout(content, BoxLayout.Y_AXIS));
      content.add(mainPanel);
      content.add(buttonPanel); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:33:18.340

```
mainPanel.setSize(1000, 1000); 
```

布局管理器的工作是确定组件的大小，因此您永远不会调用组件的 setSize() 方法。

相反，您向布局管理器提示尺寸应该是多少。为此，您可以重写 getPreferredSize() 方法以返回适当的值。另外，我会选择一个更合理的尺寸（1000、1000），以便在大多数屏幕上显示。如果您真的希望您的绘画区域这么大，那么我会将绘画面板添加到 JScrollPane，然后将滚动窗格添加到框架中。

尝试使用 BoxLayout 让您的代码正常工作。然后我建议更好的布局管理器是使用 BorderLayout。然后您将绘画面板添加到 CENTER 并将按钮添加到 SOUTH。现在，当您调整框架大小时，将调整油漆面板的大小。

```
canvas.setVisible(true); 
```

此外，该行代码的位置是错误的。在使框架可见之前，您应该首先将所有组件添加到框架中。

# python - 如何在python中对相同字符的句子进行分组（'aabcdd' -> ['aa', 'b', 'c', 'dd'] ）？

> ID：15465519
> 
> 赞同：2
> 
> 时间：2013-03-17T20:01:26.837
> 
> 标签：python

我有一个`'aabbababacccssdd'`要从中生成的字符串`['aa', 'bb', 'a', 'b', 'a', 'b', 'a', 'ccc', 'ss', 'dd']`

这是我目前的解决方案：

```
def get_pats(n):
    n = str(n) # to support integers
    a = len(n)
    p = []
    pat_start = 0
    prev = 0
    for b in range(0, a):
        if n[b] != n[prev]:
            p.append(n[pat_start:b])
            prev = b
            pat_start = b
    p.append(n[pat_start:b+1])
    return p 
```

该解决方案效果很好，但我想知道是否有更优雅/pythonic的方式来做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-17T20:05:36.037

这就是[itertools.groupby](http://docs.python.org/2/library/itertools.html#itertools.groupby)为您所做的：

```
text = 'aabbababacccssdd'

from itertools import groupby
print [''.join(g) for k, g in groupby(text)]
# # ['aa', 'bb', 'a', 'b', 'a', 'b', 'a', 'ccc', 'ss', 'dd'] 
```

# mysql - 针对另一个表计算连接中的行数

> ID：15465521
> 
> 赞同：0
> 
> 时间：2013-03-17T20:01:35.797
> 
> 标签：mysql, sql

产品表列：

*   图像1
*   产品类别
*   产品.数量
*   价格
*   描述
*   product_id

优惠表列：

*   Offer_id
*   Product_id
*   提供的人

我需要`offer_id`通过`product_id`在这两个表上使用来计算。我还需要获取我过滤的产品列表`product_type`。

我尝试了以下方法：

```
SELECT COUNT(offers_id) AS offers,
       image1,
       product_type,
       product.amount,
       product.price,
       description,
       product.product_id
FROM product INNER JOIN offers ON product.product_id = offers.product_id
WHERE product_type LIKE '%$product_type%'" 
```

但此查询仅返回产品表中的一种产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:05:04.967

如果你想计算分组信息，你必须使用 GROUP BY，例如：

```
SELECT COUNT(offers_id) AS offers, image1, product_type, product.amount, product.price, description, product.product_id  
FROM product INNER JOIN offers ON product.product_id = offers.product_id  
WHERE product_type LIKE '%$product_type%'"
GROUP BY image1, product_type, product.amount, product.price, description, product.product_id 
```

# javascript - 为什么带有 lambda 的 String.replace() 比 while 循环重复调用 RegExp.exec() 慢？

> ID：15465522
> 
> 赞同：3
> 
> 时间：2013-03-17T20:01:36.517
> 
> 标签：javascript, regex, performance, optimization, lambda

**一个问题：**

我想处理一个字符串 ( `str`)，以便将任何带括号的数字（由 匹配`rgx`）替换为从数组 ( `sub`) 中的适当位置获取的值：

```
var rgx = /\((\d+)\)/,
    str = "this (0) a (1) sentence",
    sub = [
            "is",
            "test"
        ],
    result; 
```

给定上面声明的`result`变量，应该是“这是一个测试句”。

**两种解决方案：**

[这有效](http://jsfiddle.net/guypursey/82APF/1/)：

```
var mch,
    parsed = '',
    remainder = str;
while (mch = rgx.exec(remainder)) { // Not JSLint approved.
    parsed += remainder.substring(0, mch.index) + sub[mch[1]];
    remainder = remainder.substring(mch.index + mch[0].length);
}
result = (parsed) ? parsed + remainder : str; 
```

但我认为下面的代码会更快。它的变量更少，更简洁，并使用匿名函数表达式（或*lambda*）：

```
result = str.replace(rgx, function() {
    return sub[arguments[1]];
}); 
```

[这也有效](http://jsfiddle.net/guypursey/8bL8a/)，但我对速度的看法是错误的； [在 Chrome 中，速度慢得令人惊讶（~50%，我上次检查时）](http://jsperf.com/match-and-substitute)！

...

**三个问题：**

1.  为什么这个过程在 Chrome 中看起来更慢，而在 Firefox 中（例如）更快？
2.  与给定更大字符串或数组`replace()`的循环相比，该方法是否有可能更快？`while()`如果不是，它在[Code Golf](http://en.wikipedia.org/wiki/Code_golf)之外有什么好处？
3.  *有*没有办法优化这个过程，让它像第二种功能方法一样更高效、更轻松？

我欢迎任何关于这些过程背后发生了什么的见解。

...

[ **Fo(u)r 记录：**我很高兴在我使用“lambda”和/或“功能”这两个词时被点名。我仍在学习这些概念，所以不要假设我确切地知道我在说什么，如果我在这里误用了这些术语，请随时纠正我。]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T20:28:43.733

> 为什么这个过程在 Chrome 中看起来更慢，而在 Firefox 中（例如）更快？

因为它必须调用一个（非本机）函数，这很昂贵。Firefox 的引擎可以通过识别和[内联查找](http://en.wikipedia.org/wiki/Inline_expansion)来优化它。

> 与给定更大字符串或数组的 while() 循环相比，replace() 方法是否有可能更快？

是的，它必须做更少的字符串连接和赋值，并且 - 正如你所说 - 要初始化的变量更少。然而，您只能对其进行测试以证明我的假设（并且还可以查看[http://jsperf.com/match-and-substitute/4](http://jsperf.com/match-and-substitute/4)以获取其他片段 - 例如，您可以看到 Opera 优化了 lambda-replace2 而不是使用`arguments`）。

> 如果不是，它在 Code Golf 之外有什么好处？

我不认为代码高尔夫是正确的术语。软件质量与可读性和可理解性有关，用其术语来说，功能代码的*简洁*性和*优雅*性（尽管这是主观的）是使用这种方法的原因（实际上我从未见过用 替换`exec`和`substring`重新连接）。

> 有没有办法优化这个过程，让它像第二种功能方法一样更高效、更轻松？

你不需要那个`remainder`变量。有`rgx`一个[`lastIndex`属性](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/lastIndex)，它会自动通过 推进匹配`str`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T21:10:38.403

你的`while`循环`exec()`比它应该的要慢一些，因为你在做额外的工作（`substring`），因为你`exec()`在非全局正则表达式上使用。如果您需要遍历所有匹配项，则应`while`在全局正则表达式上使用循环（`g`启用标志）；这样，您就可以避免做额外的工作来修剪字符串的已处理部分。

```
var rgR = /\((\d+)\)/g;
var mch,
    result = '',
    lastAppend = 0;

while ((mch = rgR.exec(str)) !== null) {
    result += str.substring(lastAppend, mch.index) + sub[mch[1]];
    lastAppend = rgR.lastIndex;
}
result += str.substring(lastAppend); 
```

***不过，这个因素不会影响不同浏览器之间的性能差异。***

似乎性能差异来自浏览器的实现。由于对实现不熟悉，我无法回答差异来自哪里。

在权力方面，`exec()`和`replace()`拥有同样的权力。这包括您不使用返回值的情况`replace()`。[**示例 1**](https://stackoverflow.com/questions/14081935/moving-index-in-javascript-regex-matching/14082410#14082410)。[**示例 2**](https://stackoverflow.com/questions/14863026/javascript-regex-find-all-possible-matches-even-in-already-captured-matches/14863278#14863278)。

`replace()`**如果**您使用函数返回的值（即您在匿名函数中进行真正的替换），则方法比`while`循环更具可读性（意图更清晰）。您也不必自己重建替换的字符串。这是首选的地方。（我希望这能回答问题 2 的第二部分）。`exec()` **`replace``exec()`**

 **我想`exec()`被用于替代以外的目的（除了非常特殊的情况，例如[**this**](https://stackoverflow.com/questions/14727065/regular-expressions-matching-irc-like-parameters/14735486#14735486)）。如果可能，更换应使用`replace()`.

仅当实际输入的性能严重下降时，才需要进行优化。我没有任何优化可以展示，因为已经分析了 2 个唯一可能的选项，并且 2 个不同浏览器之间的性能相互矛盾。这在未来可能会改变，但就目前而言，您可以选择具有更好跨浏览器性能的最差浏览器来使用。**

# android - viewpager 的自定义动画

> ID：15465525
> 
> 赞同：6
> 
> 时间：2013-03-17T20:01:59.403
> 
> 标签：android, android-viewpager, fragment, android-animation

我正在使用 viewPager 和 Fragments，现在我正在尝试获取自定义动画，精确的[缩小页面转换。](http://developer.android.com/training/animation/screen-slide.html#zoom-out)

但是我遇到了一些错误。我会将错误与代码片段一起放在注释中。

类 MainActivity

```
import android.support.v4.app.FragmentManager;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.view.ViewPager;
import android.view.Menu;

public class MainActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);/** Getting a reference to the ViewPager defined the layout file */
        ViewPager pager = (ViewPager) findViewById(R.id.pager);

        /** Getting fragment manager */
        FragmentManager fm = getSupportFragmentManager();

        /** Instantiating FragmentPagerAdapter */
        MyFragmentPagerAdapter pagerAdapter = new MyFragmentPagerAdapter(fm);

        /** Setting the pagerAdapter to the pager object */
        pager.setAdapter(pagerAdapter);

        // **ERROR:The method setPageTransformer(boolean, ViewPager.PageTransformer) in the type ViewPager is not applicable for the arguments (boolean, ZoomOutPageTransformer)**
        pager.setPageTransformer(true, new ZoomOutPageTransformer());
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

类 ZoomOutPageTransformer

```
import android.view.View;
    // **ERROR on 'ViewPager.PageTransformer --> ViewPager cannot be resolved to a type **
    public class ZoomOutPageTransformer implements ViewPager.PageTransformer {
        private static float MIN_SCALE = 0.85f;
        private static float MIN_ALPHA = 0.5f;

        public void transformPage(View view, float position) {
            int pageWidth = view.getWidth();
            int pageHeight = view.getHeight();

            if (position < -1) { // [-Infinity,-1)
                // This page is way off-screen to the left.
                view.setAlpha(0);

            } else if (position <= 1) { // [-1,1]
                // Modify the default slide transition to shrink the page as well
                float scaleFactor = Math.max(MIN_SCALE, 1 - Math.abs(position));
                float vertMargin = pageHeight * (1 - scaleFactor) / 2;
                float horzMargin = pageWidth * (1 - scaleFactor) / 2;
                if (position < 0) {
                    view.setTranslationX(horzMargin - vertMargin / 2);
                } else {
                    view.setTranslationX(-horzMargin + vertMargin / 2);
                }

                // Scale the page down (between MIN_SCALE and 1)
                view.setScaleX(scaleFactor);
                view.setScaleY(scaleFactor);

                // Fade the page relative to its size.
                view.setAlpha(MIN_ALPHA +
                        (scaleFactor - MIN_SCALE) /
                        (1 - MIN_SCALE) * (1 - MIN_ALPHA));

            } else { // (1,+Infinity]
                // This page is way off-screen to the right.
                view.setAlpha(0);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-01T18:01:36.977

我已经解决了这个问题：

1.  下载最新的[Android SDK](http://developer.android.com/sdk/index.html#win-bundle)
2.  浏览到**android-sdk-windows\extras\android\support\v4**
3.  将**android-support-v4.jar**复制到项目中的 libs 文件夹中
4.  清理你的项目
5.  运行你的代码

这对我有用，通过 ecplise 下载支持库给了我这个错误。这为我解决了问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-19T09:06:11.633

@mXX 几乎是对的。但是对于那些仍然有问题的人（比如我），我需要在他的程序中添加一点。

您需要更新您的 Android 支持库包。**但是，如果您现在拥有它，则需要先将其卸载，然后重新安装才能获得新的。**

如果您有 IntellijIdea：

1.  从“工具/Android/SDK 管理器”打开 SDK 管理器窗口
2.  找到 Exteras 文件夹，然后检查 Android 支持库。如果其状态为已安装，请单击“删除 1 个包...”以将其删除。
3.  检查此软件包并单击安装按钮。
4.  导航到 \extras\android\support\v4 然后复制 android-support-v4.jar 并将其粘贴到您的 Libs 文件夹中。
5.  Idea 应该自动重新编译项目，但是如果它没有这样做，那么您应该通过单击“Build/Rebuild Project”手动重新编译它

而已 ;）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-08T03:19:09.893

对于仍然坚持这一点的人来说，当前支持 v4 问题不导入 v4 ViewPager 接口：它不需要静态 ViewPager 类实例。只需实现 PageTransformer。PageTransformer 接口已经用 ViewPager 封装在里面。

```
public class ZoomOutPageTransformer implements PageTransformer {

    private static float MIN_SCALE = 0.85f;
    private static float MIN_ALPHA = 0.5f;

    public void transformPage(View view, float position) {
        int pageWidth = view.getWidth();
        int pageHeight = view.getHeight();

        if (position < -1) { // [-Infinity,-1)
            // This page is way off-screen to the left.
            view.setAlpha(0);

        } else if (position <= 1) { // [-1,1]
            // Modify the default slide transition to shrink the page as well
            float scaleFactor = Math.max(MIN_SCALE, 1 - Math.abs(position));
            float vertMargin = pageHeight * (1 - scaleFactor) / 2;
            float horzMargin = pageWidth * (1 - scaleFactor) / 2;
            if (position < 0) {
                view.setTranslationX(horzMargin - vertMargin / 2);
            } else {
                view.setTranslationX(-horzMargin + vertMargin / 2);
            }

            // Scale the page down (between MIN_SCALE and 1)
            view.setScaleX(scaleFactor);
            view.setScaleY(scaleFactor);

            // Fade the page relative to its size.
            view.setAlpha(MIN_ALPHA + (scaleFactor - MIN_SCALE)
                    / (1 - MIN_SCALE) * (1 - MIN_ALPHA));

        } else { // (1,+Infinity]
            // This page is way off-screen to the right.
            view.setAlpha(0);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T02:45:35.483

更新 android support v4 库后，您可以从 eclipse 中删除该项目。然后再次导入项目。做干净的构建，一切都会好起来的！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-20T19:28:58.510

只需将**compile 'com.android.support:support-v13:23.1.1'**添加到**build.gradle**中的**依赖**项（[截图](http://i.stack.imgur.com/5IgfB.png)）

# php - 如何在 joomla 2.5 上获取活动菜单的模块名称？

> ID：15465527
> 
> 赞同：1
> 
> 时间：2013-03-17T20:02:29.563
> 
> 标签：php, joomla2.5

我可以通过以下代码获取当前菜单标题：

`<?php $active = JFactory::getApplication()->getMenu()->getActive(); echo $active->title; ?>`

但是我能以某种方式获得菜单模块名称吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:38:07.543

如果您有多个使用“mod_mainmenu”的菜单，您可以执行以下操作：

```
jimport( 'joomla.application.module.helper' );
$module = JModuleHelper::getModule( 'mainmenu', 'ModuleTitle' );
echo '<pre>';
print_r( $module );
echo '</pre>'; 
```

这会让你得到你想要的我想。

您还可以查看 Joomla Docs 中的[JModuleHelper/getModule](http://docs.joomla.org/JModuleHelper/getModule)信息 - 通过研究该页面，您将能够毫不费力地做您想做的事。

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T05:00:17.697

以下代码用于将标题放入 joomla

$document = JFactory::getDocument();

$document->setTitle('页面标题');

# javascript - 用 setTimeout 替换 setInterval

> ID：15465528
> 
> 赞同：0
> 
> 时间：2013-03-17T20:02:33.797
> 
> 标签：javascript, ajax, node.js, sqlite

在此先感谢您的帮助！我正在使用（并且是超级新手）JavaScript、带有 express 的 node.js 和 sqlite3。我正在尝试发出 AJAX 请求以获取已发布到聊天室页面的所有消息的列表：

```
var meta = document.querySelector('meta[name=roomName]');
var roomName = meta.content;

window.addEventListener('load', function(){
     var intervalID = setInterval(updateMessages, 4000);
}, false);

function updateMessages() {
    var req = new XMLHttpRequest();
    req.open('GET', '/' + roomName + '/messages.json', true);
    req.send();
    document.getElementById('messages').innerHTML = req.responseText;
} 
```

两个问题： 1\. 我认为我应该使用 setTimeout 而不是 setInterval。我将如何切换到使用这种方法？2\. 与上面代码对应的下面的服务器端代码是否正确？如何访问此请求后返回的数据？

```
app.get('/:roomName/messages.json', function(request, response){
    var roomName = request.params.roomName;
    var sql = "SELECT ALL body FROM messages where room="+roomName+";";
    conn.query(sql, function(error, result) { 
      if(error) {
        console.log("There was an error.");
      }
      response.send(result);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:08:43.223

`setInterval`是在这里使用的合适的东西。

但是，请记住，您将永远不会看到任何消息，因为 AJAX 是*异步*的，因此`req.responseText`不会有任何消息。你应该使用一个`readystatechange`事件：

```
req.open(......);
req.onreadystatechange = function() {
    if( this.readyState == 4) {
        document.getElementById('messages').innerHTML = this.responseText;
    }
};
req.send(); 
```

# java - 在 Java 中迭代格式化字符串的特定部分

> ID：15465529
> 
> 赞同：0
> 
> 时间：2013-03-17T20:02:35.197
> 
> 标签：java, string, format

我知道在java中我们可以做类似的事情：

```
String s = "I am a %s %s"

s = s.format("format", "string") 
```

我想知道是否可以一次只替换一个`%s`的出现，此外，我是否可以给这些命名，例如`%1`, `%2`。我想要实现的是拥有一个巨大的 html 字符串，其中每个方法都将完成该字符串的特定部分。该字符串将以迭代方式完成，我想确保每个方法都完成自己的部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:12:43.500

从技术上讲，您可以简单地使用`String.replace`：

```
s = s.replace("%1", value1);
s = s.replace("%2", value2); 
```

根据您想要做的事情，您可能需要也可能不需要考虑安全性以及使用它在您的 html 中注入恶意脚本的人。在后一种情况下，清理用户输入是重中之重。

# dojo - 隐藏丑陋的启动屏幕（dojox 尚未完全解析）

> ID：15465536
> 
> 赞同：0
> 
> 时间：2013-03-17T20:02:53.670
> 
> 标签：dojo, ibm-mobilefirst

当我启动我的应用程序时，dojo 开始加载但尚未完全解析，因此屏幕看起来很丑！！！

有没有办法隐藏这个丑陋的屏幕，直到它完全加载解析？

谢谢多米尼克

* * *

**编辑添加片段** 我听说 WL Studio 会自动隐藏正文，因此无需创建覆盖。

这是我的html

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<title>Test</title>
<meta name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="shortcut icon" href="images/favicon.png">
<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
<link rel="stylesheet" href="css/Test.css">
<script>
    window.$ = window.jQuery = WLJQ;
</script>
<script type="text/javascript"
    data-dojo-config="isDebug: false, async: true, parseOnLoad: true, mblHideAddressBar: false"
    src="dojo/dojo.js"></script>
</head>
<body id="content" style="display: none;">
    <div id="main" data-dojo-type="dojox.mobile.View"
        data-dojo-props='selected:true'>
        <div data-dojo-type="dojox.mobile.Heading"
            data-dojo-props='fixed:"top"'>Main Screen</div>
        <button id="refreshBte" data-dojo-type="dojox.mobile.Button"
            style="width: 100%">Refresh</button>
        <button id="settingsBte" data-dojo-type="dojox.mobile.Button"
            style="width: 100%">Setting</button>
    </div>
    <!--application UI goes here-->
    <script src="js/initOptions.js"></script>
    <script src="js/Test.js"></script>
    <script src="js/messages.js"></script>
</body>
</html> 
```

和我的 js

```
function wlCommonInit(){
    require([ "dojo/core-web-layer", "dojo/mobile-ui-layer",
            "dojo/mobile-compat-layer" ], dojoInit);

}

function dojoInit() {
    require([ "dojo", "dojo/parser", "dojox/mobile", "dojox/mobile/compat",
            "dojox/mobile/deviceTheme", "dojox/mobile/Heading", "dojox/mobile/Button" ],
            function(dojo) {
                dojo.ready(function() {
                });
            });
} 
```

我也尝试在其中添加 hidden="hidden" 但它没有改变任何东西。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:55:19.817

就在这里，

你需要建立一个加载覆盖。看看这个教程：

[http://dojotoolkit.org/documentation/tutorials/1.6/recipes/loading_overlay/](http://dojotoolkit.org/documentation/tutorials/1.6/recipes/loading_overlay/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-26T19:31:46.320

我通常这样做是：

```
<div id="main" style="visibility: hidden;"></div> 
```

解析完成后：再次将主可见性设置为可见。

可能无法完全解决问题（取决于浏览器解析布局的速度），但在它被转换为小部件之前，您不会显示纯 html。

进一步参考：dojo/Ready = 检测页面何时被解析。

# mysql - SQL 只显示计数函数的最大值

> ID：15465537
> 
> 赞同：0
> 
> 时间：2013-03-17T20:03:01.047
> 
> 标签：mysql, sql, count, distinct-values

```
Select Distinct id as personID, count(tid) as Sales
From salesTable
Group by personID; 
```

当前结果是：（我只需要显示最高销售额。）

```
 personID  | Sales
_____________________
   1000      | 2
   1020      | 1
   1040      | 2
   1060      | 1
   1080      | 2
   1140      | 1
   1160      | 1
   _________________ 
```

salesTable 如下所示：

```
id  | tid
_________
1000|201
1020|202
1040|203
1000|204
1060|205
1080|206
1040|207
1080|208
1140|209
1160|210 
```

我想要的结果应该是这样的：

```
personID  | Sales
_____________________
   1000      | 2
   1040      | 2
   1080      | 2
  _________________ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T20:05:15.140

```
select  id as personID
,       count(tid) as Sales
From    salesTable
group by 
        id
having  count(tid) =
        (
        select  max(Sales)
        from    (
                select  count(tid) as Sales
                from    salesTable
                group by
                        id
                ) SubQueryAlias
        ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T21:19:05.977

稍微简单和有序：

```
SELECT id as personID
      ,count(tid) AS Sales
FROM   salesTable
GROUP  BY id
HAVING count(tid) =
   (
   SELECT count(tid)
   FROM   salesTable
   GROUP  BY id
   ORDER  BY count(tid) DESC
   LIMIT  1
   )
ORDER  BY personID; 
```

[->SQLfiddle 演示。](http://sqlfiddle.com/#!2/65046/7)

# jquery - Jquery 代码在不应该返回 true 时

> ID：15465541
> 
> 赞同：0
> 
> 时间：2013-03-17T20:03:13.480
> 
> 标签：jquery, html, css, styles, stylesheet

我在 jquery 中有这段代码，可以根据浏览器添加不同的 css 样式，因为我无法在完全相同的位置获取内容。这是在用户使用 chrome 时将链接添加到样式表的代码。

```
<script type= "text/javascript">
    $.browser.chrome = /chrome/.test(navigator.userAgent.toLowerCase());
    if ($.browser.chrome) {
        document.write('<link rel="stylesheet" href="css/chrome.css" 
                                         type="text/css" media="screen">'); 
    }
</script> 
```

但是，当我使用 chrome 时，另一个代码（将链接添加到 safari 样式表的相同代码）也变为 true 并且也添加了链接。所以当我使用 chrome 时我有两个样式表。两个代码完全相同，唯一的区别是“chrome”这个词变成了“safari”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:13:39.813

要获得更好、更准确的 chrome 检测，请查看以下网址： [https ://stackoverflow.com/a/11382806/2177992](https://stackoverflow.com/a/11382806/2177992)

除此之外，您可以像这样构造代码：

```
if ( chrome )
{
    //chrome stuff
}
else if ( safari )
{
    //safari stuff
} 
```

这样，两者将永远不会同时处于活动状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:06:40.870

```
"mozilla/5.0 (windows nt 6.1; wow64) applewebkit/537.22 (khtml, like gecko) chrome/25.0.1364.172 safari/537.22" 
```

Chrome 用户代理字符串包含`safari`在其中，因此当您检查 safari 是否在字符串中时，Chrome 和 Safar 都是如此。

有关检测浏览器的更好方法，请参阅这些问题

[javascript中的浏览器检测？](https://stackoverflow.com/questions/2400935/browser-detection-in-javascript)

[检测浏览器版本](https://stackoverflow.com/questions/5916900/detect-version-of-browser)

有趣的相关文章：[浏览器用户代理字符串的历史](http://webaim.org/blog/user-agent-string-history/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T20:06:59.340

这将是因为`navigator.userAgent.toLowerCase()`包含`safari`. 我的版本是`mozilla/5.0 (windows nt 6.1) applewebkit/537.22 (khtml, like gecko) chrome/25.0.1364.172 safari/537.22`.

根据[http://user-agent-string.info/?Fuas=mozilla%2F5.0+%28windows+nt+6.1%29+applewebkit%2F537.22+%28khtml%2C+like+gecko%29+chrome %2F25.0.1364.172+safari%2F537.22&test=4483&action=analyze](http://user-agent-string.info/?Fuas=mozilla%2F5.0+%28windows+nt+6.1%29+applewebkit%2F537.22+%28khtml%2C+like+gecko%29+chrome%2F25.0.1364.172+safari%2F537.22&test=4483&action=analyze)这部分字符串称为 a `browser signature`。

# c++ - 当初始化列表可用时，为什么现在使用可变参数？

> ID：15465543
> 
> 赞同：38
> 
> 时间：2013-03-17T20:03:26.647
> 
> 标签：c++, performance, c++11, variadic-functions, initializer-list

我一直想知道可变参数与初始化列表相比有什么优势。两者都提供相同的能力 - 将无限数量的参数传递给函数。

我个人认为初始化列表更优雅一些。语法不那么尴尬。

此外，随着参数数量的增加，初始化列表似乎具有明显更好的性能。

那么，除了在 C 中使用可变参数的可能性之外，我还缺少什么？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-17T20:33:04.467

如果可变参数是指省略号（如 中），那么**可变参数模板**`void foo(...)`而不是初始化列表或多或少会过时- 在使用 SFINAE 实现时，椭圆仍然可能有一些用例（例如）类型特征，或者为了 C 兼容性，但我将在这里讨论普通用例。

 **事实上，可变参数模板允许参数包有不同的类型（实际上，*任何*类型），而初始化列表的值必须可转换为初始化列表的基础类型（并且不允许缩小转换）：

```
#include <utility>

template<typename... Ts>
void foo(Ts...) { }

template<typename T>
void bar(std::initializer_list<T>) { }

int main()
{
    foo("Hello World!", 3.14, 42); // OK
    bar({"Hello World!", 3.14, 42}); // ERROR! Cannot deduce T
} 
```

正因为如此，当需要类型推导时，初始化列表很少使用，除非参数的类型确实是同质的。另一方面，可变参数模板提供了椭圆可变参数列表的**类型安全**版本。

此外，调用采用初始化列表的函数需要将参数括在一对大括号中，而采用可变参数包的函数则不然。

最后（嗯，还有其他差异，但这些与您的问题更相关），初始化列表中的值是`const`对象。根据 C++11 标准的第 18.9/1 段：

> 类型对象`initializer_list<E>`提供对类型对象数组的访问**`const E`**。[...] 复制初始化列表不会复制底层元素。[...]

这意味着尽管不可复制的类型可以移动到初始化列表中，但它们不能被移出。这个限制可能会也可能不会满足程序的要求，但通常会使初始化列表成为保存不可复制类型的限制选择。

更一般地说，无论如何，当使用一个对象作为初始化列表的元素时，我们要么复制它（如果它是左值），要么远离它（如果它是右值）：

```
#include <utility>
#include <iostream>

struct X
{
    X() { }
    X(X const &x) { std::cout << "X(const&)" << std::endl; }
    X(X&&) { std::cout << "X(X&&)" << std::endl; }
};

void foo(std::initializer_list<X> const& l) { }

int main()
{
    X x, y, z, w;
    foo({x, y, z, std::move(w)}); // Will print "X(X const&)" three times
                                  // and "X(X&&)" once
} 
```

换句话说，初始化列表不能用于通过引用 (*) 传递参数，更不用说执行完美转发了：

```
template<typename... Ts>
void bar(Ts&&... args)
{
    std::cout << "bar(Ts&&...)" << std::endl;
    // Possibly do perfect forwarding here and pass the
    // arguments to another function...
}

int main()
{
    X x, y, z, w;
    bar(x, y, z, std::move(w)); // Will only print "bar(Ts&&...)"
} 
```

* * *

(*) 但是必须注意，[初始化列表（与 C++ 标准库的所有其他容器不同）确实具有*引用语义*](https://stackoverflow.com/questions/15198807/why-isnt-stdinitializer-list-a-language-built-in/15198902#15198902)，因此尽管在将元素插入初始化列表时会执行元素的复制/移动，但复制初始化列表本身不会导致包含对象的任何复制/移动（如上面引用的标准段落中所述）：

```
int main()
{
    X x, y, z, w;
    auto l1 = {x, y, z, std::move(w)}; // Will print "X(X const&)" three times
                                       // and "X(X&&)" once

    auto l2 = l1; // Will print nothing
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T18:01:58.107

简而言之，C 风格的可变参数函数在编译时产生的代码比 C++ 风格的可变参数模板要少，因此如果您担心二进制大小或指令缓存压力，您应该考虑使用可变参数而不是模板来实现您的功能。

但是，可变参数模板更安全，并且产生更多可用的错误消息，因此您通常希望使用内联可变参数模板包装您的外联可变参数函数，并让用户调用该模板。**

# r - R - 将宽数据改造成长数据后文件大小显着增加

> ID：15465546
> 
> 赞同：2
> 
> 时间：2013-03-17T20:03:46.163
> 
> 标签：r, reshape, reshape2

我有一个中等大小的数据库（约 400,000 行，27 列），我需要使用相同的比较标准搜索大部分列（其中 25 列）。我认为将数据重塑/融合为“长”格式会更有效，因此我使用了 reshape2 包来生成 ~9,000,000 行/4 列数据集。除了花费很长时间（我只有 2GB 的 RAM）之外，重新调整后的文件大小非常巨大：500MB。

是否有更有效/计算量更少的方法：

1.  重塑和存储从宽到长的数据？
2.  完全避免重塑并仍然使用相同的搜索条件搜索多个列？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T23:56:34.583

详细说明我的评论，除了@Matthew 已经描述的内容之外，数据压缩可能在您获得如此不同的文件大小的原因中发挥了不错的作用。

例如看这个：

```
set.seed(1234)
A <- matrix(runif(1000), 1000, 1000, byrow = TRUE)
A <- A + runif(5)
B <- t(A)
save(A, file="A.RData")
save(B, file="B.RData") 
```

这两个数据结构包含相同`A`的`B`数据但转置，但文件大小完全不同：

```
file.info("B.RData")$size / file.info("A.RData")$size
# [1] 97.38222 
```

为什么？似乎 R 的压缩算法（在大多数情况下）是按列探索数据。

如果我查看@Matthew 的示例，每个单独的列`conc.*`对我来说看起来非常随机，即难以压缩，尽管原始列`conc`对于压缩算法可能看起来不那么随机。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T21:52:17.577

This can happen.

From `?reshape`

```
summary(Indometh)
wide <- reshape(Indometh, v.names = "conc", idvar = "Subject",
            timevar = "time", direction = "wide")

> dim(Indometh)
[1] 66  3
> dim(wide)
[1]  6 12
> 66*3    # long
[1] 198
> 6*12    # wide
[1] 72 
```

What's happening, is that you have repeated values in the long format (here, `Subject` and `time`):

```
> head(Indometh)
  Subject time conc
1       1 0.25 1.50
2       1 0.50 0.94
3       1 0.75 0.78
4       1 1.00 0.48
5       1 1.25 0.37
6       1 2.00 0.19

> wide
   Subject conc.0.25 conc.0.5 conc.0.75 conc.1 conc.1.25 conc.2 conc.3 conc.4 conc.5 conc.6 conc.8
1        1      1.50     0.94      0.78   0.48      0.37   0.19   0.12   0.11   0.08   0.07   0.05
12       2      2.03     1.63      0.71   0.70      0.64   0.36   0.32   0.20   0.25   0.12   0.08
23       3      2.72     1.49      1.16   0.80      0.80   0.39   0.22   0.12   0.11   0.08   0.08
34       4      1.85     1.39      1.02   0.89      0.59   0.40   0.16   0.11   0.10   0.07   0.07
45       5      2.05     1.04      0.81   0.39      0.30   0.23   0.13   0.11   0.08   0.10   0.06
56       6      2.31     1.44      1.03   0.84      0.64   0.42   0.24   0.17   0.13   0.10   0.09 
```

# php - 带有数学验证码的联系表

> ID：15465550
> 
> 赞同：3
> 
> 时间：2013-03-17T20:04:07.983
> 
> 标签：php

我已经成功地使用 php 创建了一个联系表单，它提供了各种所需的消息。现在我想添加一个简单的随机算术验证码（非图像）。请参阅下面的匿名（工作）html 表单和现有（工作，但没有算术验证码）php。

这个想法是以与其他错误消息相同的方式显示“不正确的答案”，或者传递到Thankyou页面以获得正确填写的正确答案的表格。我在这方面做得很好，但不能让它发挥作用。非常感谢任何帮助。

* * *

HTML：

```
 <p>Area of interest:
    <input type="radio" name="likeit" value="A" checked="checked" /> A
    <input type="radio" name="likeit" value="B" /> B
    <input type="radio" name="likeit" value="C" /> C</p>

    <p>How did you hear about us?
    <select name="how">
    <option value=""> -- Please select -- </option>
    <option>Recommendation</option>
    <option>Internet</option>
    <option>Advertisement</option>
    <option>Other</option>
    </select></p>

    <p><strong>Your message subject:</strong><br /><input type="text" name="subject" size="35"/></p>

    <p><strong>Your message:</strong><br />
    <textarea name="comments" rows="10" cols="40"></textarea></p>

    <p>Please answer the following arithmetic question: What is <?php echo $digit1;?> + <?php echo $digit2;?>?
     <input name="captcha" type="text" size="2" id="captcha"/></p>

    <p><input type="submit" value="Send" /></p>

    </form> 
```

PHP：

```
 <?php
    /* Contact form with arithmetic captcha */
    $myemail  = "enquiries@X.co.uk";

    /* Check all form inputs using check_input function */
    $yourname = check_input($_POST['yourname'], "Enter your name");
    $email    = check_input($_POST['email']);
    $telephone  = check_input($_POST['telephone']);
    $website  = check_input($_POST['website']);
    $likeit   = check_input($_POST['likeit']);
    $how_find = check_input($_POST['how']);
    $subject  = check_input($_POST['subject'], "Add a subject");
    $comments = check_input($_POST['comments'], "Add your message");

    /* If e-mail is not valid show error message */
    if (!preg_match("/([\w\-]+\@[\w\-]+\.[\w\-]+)/", $email))
    {
            show_error("Email address is not valid");
    }

    /* If URL is not valid set $website to empty */
    if (!preg_match("/^(https?:\/\/+[\w\-]+\.[\w\-]+)/i", $website))
    {
        $website = '';
    }

    /* Message for the email */
    $message = "Hello!

    Your contact form has been submitted by:

    Name: $yourname
    Email: $email
    Telephone: $telephone
    URL: $website

    Area of interest? $likeit
    How did they find us? $how_find

    Comments:
    $comments

    End of message
    ";

    /* Send the message using mail() function */
    mail($myemail, $subject, $message);

    /* Redirect visitor to the thankyou page */
    header('Location: thankyou.html');
    exit();

    /* Functions used */
    function check_input($data, $problem='')
    {
        $data = trim($data);
        $data = stripslashes($data);
        $data = htmlspecialchars($data);
        if ($problem && strlen($data) == 0)
        {
            show_error($problem);
        }
        return $data;
    }

    function show_error($myError)
    {
    ?>

    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <!--
    Head data in here
    -->
        <html xmlns="http://www.w3.org/1999/xhtml">

        <body>

            <div id="mainheader">

    <div id="mainlogo">

    <h1><a href="http://www.X.co.uk/" title="X">
                                    <img style="border:0;width: 260px; height: 160px;" src="images/X.jpg" alt="X" /></a></h1>
    </div>
    </div>

    <div id="content">
            <div class="content">
                    <h2 class="title">Error!</h2>

    <p><strong>Please correct the following error:</strong></p>
    <p><?php echo $myError; ?></p>

            </div>
    </div>

        <div id="panel">

            <div id="main" class="boxed">
                <h2 class="heading">Main</h2>
                <ul>
                    <li><a href="index.html">Home</a> </li>
                    <li><a href="about.html">About</a> </li>
                    <li><a href="contact.html">Contact</a> </li>
                </ul>
            </div>

            <div id="services" class="boxed">
                <h2 class="heading">Services</h2>
                <ul>
                    <li><a href="services.html">Services</a> </li>
                    <li><a href="recent-projects.html">Recent projects</a> </li>
                </ul>
            </div>

            <div id="pricing" class="boxed">
                <h2 class="heading">Pricing</h2>
                <ul>
                    <li><a href="pricing.html">Pricing</a> </li>
                </ul>
            </div>

            <div id="info" class="boxed">
                <h2 class="heading">Info</h2>
                <ul>
                    <li><a href="tips-and-tricks.html">Tips and tricks</a> </li>
                    <li><a href="useful-links.html">Useful links</a> </li>
                    <li><a href="faq.html">Frequently asked questions</a> </li>
                    <li><a href="site-map.html">Site map</a> </li>
                </ul>
            </div>

                    <div id="contact" class="boxed">
                            <h2 class="heading">Contact</h2>
                            <ul>
                            <li><a href= "mailto:enquiries&#38;#64;X.co.uk">Contact by email</a> </li>
                            <li><strong>Telephone:<br />X</strong> </li>
                            </ul>
                    </div>

        </div>

       <div id="mainfooter">
                    <p> &#38;#169; 2011 X<br />Designed by <a href="http://www.X.co.uk/" title="X"><strong>X</strong></a> </p>
                            <a href="http://validator.w3.org/check?uri=referer" title="Valid XHTML 1.0">
                    <img style="border:0;width:88px;height:31px" src="images/valid-xhtml10.png" alt="Valid XHTML 1.0" />
                </a>
                            <a href="http://jigsaw.w3.org/css-validator/check/referer" title="Valid CSS!">
                    <img style="border:0;width:88px;height:31px" src="images/vcss.gif" alt="Valid CSS!" />
                </a>
        </div>

        </body>
        </html>
    <?php
    exit();
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-18T05:58:59.580

一般来说，验证码的想法是防止自动处理表单。任何非图像比较都将很容易解决。

无论如何，我会使用会话来解决这个问题。

只需将预期结果存储在第一页的会话变量中，并确保它与第二页匹配

page1.php：

```
 <?php

    session_start();

    $digit1 = mt_rand(1,20);
    $digit2 = mt_rand(1,20);
    if( mt_rand(0,1) === 1 ) {
            $math = "$digit1 + $digit2";
            $_SESSION['answer'] = $digit1 + $digit2;
    } else {
            $math = "$digit1 - $digit2";
            $_SESSION['answer'] = $digit1 - $digit2;
    }

    ?>

    <form method="POST" action="page2.php">
            What's <?php echo $math; ?> = <input name="answer" type="text" /><br />
            <input type="submit" />
    </form> 
```

page2.php

```
 session_start();

    echo "You entered ".htmlentities($_POST['answer'])." which is ";

    if ($_SESSION['answer'] == $_POST['answer'] )
            echo 'correct';
    else
            echo 'wrong. We expected '.$_SESSION['answer'];

    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-07T06:07:09.167

使用简单的 PHP 数学验证码 [https://github.com/kmlpandey77/MathCaptcha](https://github.com/kmlpandey77/MathCaptcha)

# 数学验证码

一个简单的 PHP 数学验证码

## 用法

```
composer require kmlpandey77/math-captcha 
```

### 图像中的数学

它将在图像中返回数学

创造`captcha.php`

```
<?php
require_once 'vendor/autoload.php'; // link to vendor's autoload.php

use Kmlpandey77\MathCaptcha\Captcha;

$captcha = new Captcha();
$captcha->image(); 
```

创造`form.php`

```
<form action="check.php" method="post">
    <p>
        Answer it <img src="./captcha.php" alt="" valign="middle">  <input type="text" name="captcha">
    </p>
    <p><button type="submit" name="submit">Submit</button></p>
</form> 
```

### 文本中的数学

它将以文本形式返回数学

创造`form.php`

将此代码放在顶部`form.php`

```
<?php
require_once 'vendor/autoload.php'; // link to vendor's autoload.php

use Kmlpandey77\MathCaptcha\Captcha;
?> 
```

并将此代码放入`body`

```
<form action="check.php" method="post">
    <p>
        Answer it <?php echo new Captcha; ?>  <input type="text" name="captcha">
    </p>
    <p><button type="submit" name="submit">Submit</button></p>
</form> 
```

### 查看

检查用户是否输入了正确的验证码

创造`check.php`

```
<?php
require_once 'vendor/autoload.php'; // link to vendor's autoload.php
use Kmlpandey77\MathCaptcha\Captcha;

if(isset($_POST['submit'])){

    if(Captcha::check()){

        //valid action

        echo('<font color="green">Answer is valid</font>');
    }else{
        echo('<font color="red">Answer is invalid</font>');
    }
} 
```

# jquery - 如何向简单的 jQuery 手风琴添加样式/css？

> ID：15465552
> 
> 赞同：0
> 
> 时间：2013-03-17T20:04:21.160
> 
> 标签：jquery, css

请在此处查看此示例：http: [//jsfiddle.net/v5eV3/](http://jsfiddle.net/v5eV3/)

我想知道如何为该手风琴添加风格，尤其是当它处于活动状态时。

在悬停时我管理，但问题是它何时处于活动状态。

jQuery代码：

```
$(document).ready(function() {
    var cur_stus;

    //close all on default
    $('#accordion dd').hide();
    $('#accordion dt').attr('stus', '');

    //open default data
    $('#accordion dd:eq(0)').slideDown();
    $('#accordion dt:eq(0)').attr('stus', 'active');

    $('#accordion dt').click(function(){
        cur_stus = $(this).attr('stus');
        if(cur_stus != "active")
        {
            //reset everthing - content and attribute
            $('#accordion dd').slideUp();
            $('#accordion dt').attr('stus', '');

            //then open the clicked data
            $(this).next().slideDown();
            $(this).attr('stus', 'active');
        }
        //Remove else part if do not want to close the current opened data
        else
        {
            $(this).next().slideUp();
            $(this).attr('stus', '');
        }
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:09:50.273

使用`.addClass()`和`.removeClass()`jQuery函数：

```
$(document).ready(function() {
    var cur_stus;

    //close all on default
    $('#accordion dd').hide();
    $('#accordion dt').attr('stus', '');

    //open default data
    $('#accordion dd:eq(0)').slideDown();
    $('#accordion dt:eq(0)').attr('stus', 'active');
    $('#accordion dt:eq(0)').addClass('active');

    $('#accordion dt').click(function(){
        cur_stus = $(this).attr('stus');
        if(cur_stus != "active")
        {
            //reset everthing - content and attribute
            $('#accordion dd').slideUp();
            $('#accordion dt').attr('stus', '');
            $('#accordion dt').removeClass('active');

            //then open the clicked data
            $(this).next().slideDown();
            $(this).attr('stus', 'active');
            $(this).addClass('active');
        }
        //Remove else part if do not want to close the current opened data
        else
        {
            $(this).next().slideUp();
            $(this).attr('stus', '');
                    $(this).removeClass('active');
        }
        return false;
    });
}); 
```

工作演示：http: [//jsfiddle.net/v5eV3/2/](http://jsfiddle.net/v5eV3/2/)

# java - 如何使用 TableModel 将对象的 java ArrayList（每个对象包含 {int,String,float,float}）添加到 JTable

> ID：15465558
> 
> 赞同：0
> 
> 时间：2013-03-17T20:04:52.013
> 
> 标签：java, swing, jtable

我有一个`ArrayList`对象`OrderEntry`。每个对象都有：

```
public class OrderEntry
{
    private int quantity;
    private String itemName;
    private float rate;
    private float value;
} 
```

事情是，我有一个`JButton`，当我单击此按钮时，我希望每个对象的值在一行中有 4 列。

我是 Swing 新手`JTable/TableModel`，谁能帮我举个例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:47:39.083

创建一个表模型来保存订单 - [TableModel](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/TableModel.html)的实现。然后在表格中设置模型。这是一个好的开始 -[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)教程。下面是一个示例，说明了`AbstractTableModel`.

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.table.AbstractTableModel;

public class OrderEntryTable {

    public OrderEntryTable() {
        JFrame frame = new JFrame("OrderEntryTable");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final OrderEntryModel model = new OrderEntryModel();
        JTable table = new JTable();
        table.setModel(model);
        JScrollPane scrollPane = new JScrollPane(table);
        JPanel content = new JPanel(new BorderLayout());
        content.add(scrollPane, BorderLayout.CENTER);
        JButton button = new JButton("Add order entry");
        content.add(button, BorderLayout.SOUTH);
        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                model.addOrderEntry(new OrderEntry(3, "name", 0.5f, 1.0f));
            }
        });
        frame.add(content);
        frame.pack();
        frame.setVisible(true);
    }

    public class OrderEntryModel extends AbstractTableModel {

        private static final long serialVersionUID = 1L;
        private List<OrderEntry> orders = new ArrayList<OrderEntry>();

        public OrderEntryModel() {
            //TODO - setup orders
        }

        public void addOrderEntry(OrderEntry entry) {
            orders.add(entry);
            int lastRow = orders.size() - 1;
            fireTableRowsInserted(lastRow, lastRow);
        }

        @Override
        public int getRowCount() {
            return orders.size();
        }

        @Override
        public int getColumnCount() {
            return 4;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            OrderEntry entry = orders.get(rowIndex);
            switch (columnIndex) {
                case 0:
                    return entry.getQuantity();
                case 1:
                    return entry.getItemName();
                case 2:
                    return entry.getRate();
                case 3:
                    return entry.getValue();
            }
            return null;
        }

        @Override
        public String getColumnName(int column) {
            switch (column) {
                case 0:
                    return "Quantity";
                case 1:
                    return "ItemName";
                case 2:
                    return "Rate";
                case 3:
                    return "Value";
            }
            return null;
        }
    }

    public class OrderEntry {

        private int quantity;
        private String itemName;
        private float rate;
        private float value;

        public OrderEntry(int quantity, String itemName, 
               float rate, float value) {
            super();
            this.quantity = quantity;
            this.itemName = itemName;
            this.rate = rate;
            this.value = value;
        }

        public int getQuantity() {
            return quantity;
        }

        public void setQuantity(int quantity) {
            this.quantity = quantity;
        }

        public String getItemName() {
            return itemName;
        }

        public void setItemName(String itemName) {
            this.itemName = itemName;
        }

        public float getRate() {
            return rate;
        }

        public void setRate(float rate) {
            this.rate = rate;
        }

        public float getValue() {
            return value;
        }

        public void setValue(float value) {
            this.value = value;
        }
    }

    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new OrderEntryTable();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T01:23:22.583

有关更灵活、可重用（但更复杂）的表模型，请参阅[Bean 表模型](http://tips4java.wordpress.com/2008/11/27/bean-table-model/)。

# android - ListView 中的特殊向下滑动

> ID：15465561
> 
> 赞同：1
> 
> 时间：2013-03-17T20:05:08.503
> 
> 标签：android, animation

我需要为以下场景制作动画：

![在此处输入图像描述](../Images/b423db39edfee3ab0add7eecc779db73.png)

我有一个 ListView，每个单元格中有 3 个布局：

*   preview_layout （蓝色）：包含**content_layout**内容的预览。
*   **内容布局**（绿色）：包含带有一些按钮的长文本。
*   一个**wrapper_layout**（红色）：包含preview_layout 和contents_layout。

contents_layout 的可见性设置为“ **gone** ”，因此列表中只有 preview_layout 可见。

当按下 ListView 的一个单元格时，我需要使用向下滑动的动画来显示 content_layout。

到目前为止，我使用了以下解决方案：

在ListView的*getView中：*

```
// Preview_layouts height
int hPreview = 70;
// Views
final View previewView = rowView.findViewById(R.id.preview);
final View contentsView = rowView.findViewById(R.id.contents);
// On previewView click
previewView.setOnClickListener(new View.OnClickListener() {
    public void onClick(View view) {
        if (!contentsView.isShown()) { 
            // Close all the contents_layout of the ListView (menuListView)
            for (int i=0; i < menuListView.getChildCount(); i++) {
                View v = menuListView.getChildAt(i).findViewById(R.id.contents);
                if (v.isShown()) { v.startAnimation(new SlideUpAnimation(v, hPreview)); }
            }
            // Slide down the selected contents_layout (contentsView)
            contentsView.startAnimation(new SlideDownAnimation(contentsView, hPreview));
        }
    }
}); 
```

SlideDownAnimation 类：

```
public class SlideDownAnimation extends Animation {
    private View target;
    private LayoutParams targetResize;
    private int mFromHeight, mToHeight;
    public SlideDownAnimation( View targetToSlideDown, int fromHeight ) {
        // Show the contents_layout target
        target = targetToSlideDown;
        target.setVisibility(View.VISIBLE);
        // Animation property
        setDuration(500); 
        setInterpolator(new DecelerateInterpolator());
        // Target
        targetResize = targetToSlideDown.getLayoutParams();
        mFromHeight = fromHeight;
        mToHeight = targetResize.height - fromHeight;
        targetResize.height = 1;
    }
    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t) {
        // Set the Alpha to fade in the contents_layout target
        t.setAlpha(interpolatedTime);
        // Set the height to slide down the contents_layout target
        targetResize.height = (int) (mToHeight * interpolatedTime) + mFromHeight;
        target.requestLayout();
    }
} 
```

这个解决方案的最大问题是，如果 content_layout 设置为**android:layout_height="wrap_content"**并且可见性消失，我无法获得它的**高度，它只返回“0”。**

 **您还有其他解决方案来执行我需要的动画吗？**

# php - 如何使用 gdlib 在 PHP 中绘制爆炸饼图？

> ID：15465570
> 
> 赞同：1
> 
> 时间：2013-03-17T20:05:55.660
> 
> 标签：php, charts, gdlib

我可以使用以下方法轻松绘制如下所示的图表`imagefilledarc`：

[饼图示例](http://i.imgur.com/8UhNsDQ.png)

但是，如果我想在切片之间添加一点空间，我将如何进行？像这样：

[饼图示例 2](http://i.imgur.com/917NN2S.png)

我怎么能画成这样？基本上，它看起来好像圆弧的中心移动了一个特定的角度，然后在原始圆的边界处被切断。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-03T08:54:54.990

你可以在这里找到很多选项

[https://github.com/moklick/frontend-stuff](https://github.com/moklick/frontend-stuff)

# r - 在变量的新水平的情况下，R 中的预测误差

> ID：15465574
> 
> 赞同：1
> 
> 时间：2013-03-17T20:06:32.730
> 
> 标签：r, regression, prediction

我在 R 中使用 GBM 包进行预测。Traning 在合理的错误率下工作得很好，但是，当想要在包含具有新级别的因子变量的训练集上运行预测时，我收到以下错误：

```
gbm1 <- gbm(SalePrice ~., data=bb,distribution="gaussian",n.trees=7000,cv.folds=3,shrinkage=0.001,interaction.depth=4)

    f.predict <- exp(predict.gbm(gbm1,data.frame(bbv),n.trees=7000))
        Error in predict.gbm(gbm1, data.frame(bbv), n.trees = 7000) : 
          New levels for variable <and the name of the levels are listed> 
```

试图搜索错误文本，但只找到 GBM 代码本身；（

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T20:55:39.220

我不熟悉 GBM 包，但错误表明当预测数据包含以前未知的级别时，GBM 无法处理从模型进行的预测。其背后的基本原理是，该模型只能说明它所训练的数据类别。在简单线性模型的情况下，您不能期望模型`a~b`（`a`取决于`b`）预测涉及新变量 b 的数据，即`a~b+c`。该模型没有针对 的训练行为`b+c`，仅针对`b`。

# ios - 将 UIView 显示为弧线

> ID：15465578
> 
> 赞同：2
> 
> 时间：2013-03-17T20:06:40.267
> 
> 标签：ios, objective-c, uiview, transformation

我想将复杂的 UI 元素显示为带有扇区的甜甜圈，因此每个扇区都可以表示为单个 UIView。有什么方法可以将矩形 UIView 转换为弧形以适应甜甜圈轮廓？或者那是不可能的？我是一个 iOS 新手，如果您向我指出正确的文档，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:15:51.200

`UIView`'s 总是矩形的，除非你对其应用仿射变换（但我仍然认为你不能得到弧形）。我认为你最好的选择是通过子类化 UIView 并实现`drawRect`或使用在 UIView 内绘制弧线`CAShapeLayer`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:16:39.120

在不知道更多关于你究竟想要做什么的情况下，我会冒险并建议你使用 CGDrawing 方法在矩形视图中绘制你的甜甜圈段。

为此，您将特别使用以下内容：

```
CGPathAddArc()
CGPathAddLineToPoint()
CGPathMoveToPoint() 
```

此代码绘制填充弧：

```
-(void)drawFilledArc:(CGContextRef)context innerRadius:(CGFloat)rIn outterRadius (CGFloat)rOut
    startAngle:(double)startAng endAngle:(double)endAng drawColor:(UIColor *)color
{
    float x1, y1;
    CGFloat centerX = originX;
    CGFloat centerY = originY;

    CGContextSaveGState(context);
    CGMutablePathRef path = CGPathCreateMutable();

    CGContextSetLineWidth(context, lineWidth);

    getChartWheelCoord(centerX, centerY, startAng, rIn, &x1, &y1);
    CGPathMoveToPoint(path, NULL, x1, y1);

    getChartWheelCoord(centerX, centerY, startAng, rOut, &x1, &y1);
    CGPathAddLineToPoint(path, NULL, x1, y1);

    CGPathAddArc(path, NULL, centerX, centerY, rOut, radians(-startAng), radians(-endAng), YES);

    getChartWheelCoord(centerX, centerY, endAng, rIn, &x1, &y1);
    CGPathAddLineToPoint(path, NULL, x1, y1);

    CGPathAddArc(path, NULL, centerX, centerY, rIn, radians(-endAng), radians(-startAng), NO);
    CGPathCloseSubpath(path);

    CGContextSetFillColorWithColor(context, color.CGColor);
    CGContextAddPath(context, path);
    CGContextDrawPath(context, kCGPathFillStroke);

    CGPathRelease(path);
    CGContextRestoreGState(context);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T20:17:30.577

那么你可以通过以下方式实现你想要的。

1 如果您的 UI 元素不必对 Click 或 touch Events 负责，那么您可以使用 Core-Graphics 绘制它。

2 如果您的 UI 元素必须响应用户交互事件，那么您可以创建一个 UIView 并添加任意数量的自定义按钮作为 UIview 的子视图以及弧形或扇形图像（自定义按钮的图像）。

# php - php mysql .htaccess

> ID：15465581
> 
> 赞同：1
> 
> 时间：2013-03-17T20:06:43.097
> 
> 标签：php, mysql, .htaccess

我正在创建一个处理个人资料页面的网站，我需要从 URL 获取用户名，直到此时一切正常，但我在使用**.htaccess**时遇到问题，我不知道如何解决此错误这是我的第一次使用 .htaccess 我使用的是 WAMP 包，在我添加 .htaccess 文件并隐藏包含它的文件夹后，浏览器给了我这个错误。

**内部服务器错误 服务器遇到内部错误或配置错误，无法完成您的请求。请通过 admin@localhost 联系服务器管理员，告知他们此错误发生的时间，以及您在此错误之前执行的操作。服务器错误日志中可能提供有关此错误的更多信息。** 这是 profile.php 的一部分

# 配置文件.php

```
 // updatede for using the GET methode for ge the data nedded from the url 
    if(isset($_GET['u']))
    {
          $username = mysql_real_escape_string($_GET['u']);
          if(ctype_alnum($username))
         {

          //check user exist
             $check = mysql_query("SELECT user_name, first_name FROM user WHERE user_name = '$username' ")or die(mysql_error());
             if (mysql_num_rows($check)==1) 
             {
               $get = mysql_fetch_assoc($check);
               $username = $get['user_name']; 
               $fname = $get['first_name'];
             }
             else
             {
                echo "<h2>User does not Exist!!</h2>";
                exit();  
             }
          }
       }

        echo "$username";
?> 
```

# .htaccess

```
RewriteEngine On

RewriteRule^([a-zA-Z0-9_-]+)$ profile.php?u=$1

RewriteRule^([a-zA-Z0-9_-]+)/$ profile.php?u=$1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:50:51.880

不要`.htaccess`以 UTF8 字符编码保存您的文件。保存在ANSI

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:22:25.440

假设 profile.php 没有错误。尝试删除 .htaccess 文件的最后一行。还要在 Rewriterule 和 '^' 之间添加一个空格。由于 ctype_alnum() 函数，向正则表达式添加空格与此无关。这仅允许字母字符。

只需将其复制并粘贴到您的 .htaccess 文件中并（当然）删除前面的行：

RewriteEngine On
RewriteRule ^([a-zA-Z0-9_-]+)$ profile.php?u=$1

# cocoa - NSPersistentDocument 中的 NSTextView 在失去第一响应者之前不会更新脏标志

> ID：15465582
> 
> 赞同：4
> 
> 时间：2013-03-17T20:06:48.773
> 
> 标签：cocoa, core-data, cocoa-bindings, nstextview

我有一个`NSTextView`在一个`NSPersistentDocument`窗口。我将文本字段的内容绑定到“二进制数据”核心数据字段，但是当我在文本视图中键入文本时，文档的标题栏不会显示“已编辑”，直到文本视图失去焦点。因此，如果我在进行编辑后退出，则不会保存新数据。

如果我将`NSContinuouslyUpdatesValueBindingOption`标志传递给文本视图绑定，“已编辑”会立即出现，但在长文档中性能确实会受到影响。

我如何让 Core Data 知道有未保存的更改而不实际分配每个更改的所有文本数据？

（这个问题就像“[绑定的 NSTextField 在失去焦点之前不会更新实体](https://stackoverflow.com/questions/9580992/binded-nstextfield-doesnt-update-the-entity-until-it-lose-the-focus/15465501#15465501)”，除了我不能使用`NSContinuouslyUpdatesValueBindingOption`，因为它使编辑操作非常慢。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T06:48:47.063

据我所知，我认为这是不可能的。当您将更改分配给 NSManagnedObject 的属性时，CoreData 会为您管理状态（和撤消的东西）。如果您只是尝试在没有数据的情况下更改目录，则潜在的保存操作将不起作用。

查看“[文档架构免费提供撤消支持](http://developer.apple.com/library/mac/documentation/DataManagement/Conceptual/DocBasedAppProgrammingGuideForOSX/StandardBehaviors/StandardBehaviors.html#//apple_ref/doc/uid/TP40011179-CH5-SW28)”如何实现脏状态和撤消支持。

如果您有非常大的文本文档，我建议您不要将它们存储在 CoreData 属性中。正如您在“[增量数据读取和写入](http://developer.apple.com/library/mac/#documentation/DataManagement/Conceptual/DocBasedAppProgrammingGuideForOSX/AdvancedTopics/AdvancedTopics.html#//apple_ref/doc/uid/TP40011179-CH7-SW25)”中所读到的，我建议将文本存储在单独的文件中并使用 NSFileWrapper。至少我将此解决方案用于我的应用程序。

这是顺便说一句。CoreData 本身[在这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdPerformance.html#//apple_ref/doc/uid/TP40003468-SW1)建议的内容“......但是，如果您能够将 BLOB 作为资源存储在文件系统上，并维护这些资源的链接（例如 URL 或路径），则更好。然后您可以将 BLOB 加载为并在必要时”

我不知道您的 NSTextView 中有什么样的文本，但您正在使用“长文档”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:14:20.357

如果您将“ `NSTextView`”子类化，则可以捕获[“ `insertText:`”](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSTextView_Class/Reference/Reference.html#//apple_ref/occ/instm/NSTextView/insertText%3a)方法，然后在键入字符后立即设置文档的[“文档已编辑”标志，而](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWindow/setDocumentEdited%3a)无需执行繁重的（和 CPU 密集型的）绑定。

# javascript - Node.JS 令牌替换（相当于在 ASP.NET 中调用内联函数）

> ID：15465584
> 
> 赞同：0
> 
> 时间：2013-03-17T20:06:56.690
> 
> 标签：javascript, node.js

现在，我有一个 ASP.NET 应用程序，在该应用程序中，在 aspx 文件中的不同位置，我调用了一个插入标准模板 HTML 的函数。例如：

```
<html>
<head>
</head>
<body>
<%=SectionHeader('Section title 1') %>
some content for section 1
<%=SectionHeader('Section title 2') %>
some content for section 2
</body>
</html> 
```

因此，无论在何处调用 SectionHeader 函数，它都会读取传入的参数，并插入节标题的 HTML，例如 {title}。我试图弄清楚如何在 Node.js 中完成同样的事情。

我了解如何进行基本的令牌替换 - 读取静态 HTML 文件，查找令牌（例如 {token1}）并用某些东西替换它。但是没有使用正则表达式和复杂的字符串操作，有什么方法可以在 Node 中完成与 ASP.NET 相同的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:46:47.717

我采用了生成的应用程序骨架，并修改了`index.js`and`index.jade`以将函数传递到模板中。我认为这是您所要求的，但是如果这是一个很好的架构，可以将模板回调到逻辑中，那么可能会有意见。

index.js

```
exports.index = function(req, res){
  var fn = function(initial) {
      return initial + ". Tester";
  };
  res.render('index', { title: 'Express', fn : fn });
}; 
```

索引.jade

```
block content
  h1= title
  p Welcome to #{title}

  div Hello #{fn('A')} 
```

现在，当我加载时`http://localhost:3000/`，这就是在屏幕上呈现的内容。请注意，“A”被传递到函数中以生成字符串“A.Tester”作为输出。

* * *

**表达**

欢迎来到快递

你好 A. 测试员

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:20:14.790

node有[很多模板引擎](http://nodetoolbox.com/categories/Templating)，也许你应该尝试其中之一。如果您正在搜索 Web 应用程序框架[express](http://expressjs.com/)将是一个很好的起点，它支持许多模板引擎。

当然你可以只做字符串替换，但是模板引擎提供了更多。

# java - Java 巨大的整数

> ID：15465586
> 
> 赞同：0
> 
> 时间：2013-03-17T20:07:00.560
> 
> 标签：java, binary, integer

您如何表示大于 32 或 64 位处理器允许的数字的整数运算。我正在尝试编写一个小型 Java 计算器，输入必须是一串数字，然后必须将其转换为二进制或 base-10 表示。然后必须从另一个也必须转换的数字字符串中添加、乘、除或减去它。显然，像 Python 和 Ruby 这样的语言可以处理像“9999999999999999999”+“999999999999999999”这样的事情。但是从 Java 的角度来看，我不确定这样做的方法。

我首先定义了一个带有构造函数的新类，该构造函数可以解析字符串是否实际上是一串数字。至于将它们转换为二进制或 base-10 以及我能做些什么，但是当我向此类添加方法（如加法、减法、乘法和划分。

任何概念性的想法，无论大小，都是有帮助的。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T20:08:21.653

看看[BigInteger](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html)和[BigDecimal](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)类。两者都是任意精度的实现。因此，它们显然比数字文字具有更大（和非常量）的开销。顾名思义，`BigInteger`仅用于整数，而`BigDecimal`可以存储任何有理十进制数。

此外，有时使用它们可能会很痛苦，因为 Java 不支持运算符重载，因此您不能使用 Java 的数学运算符。请改用类的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T20:10:17.987

尝试使用 BigInteger 类。它旨在处理大量数据。

# android - 在 AndEngine 中使用 RGB_565 作为背景图像

> ID：15465587
> 
> 赞同：1
> 
> 时间：2013-03-17T20:07:05.263
> 
> 标签：android, andengine

我目前正在使用 Andengine、GLES1 开发一款游戏，并且在我的一台设备上发现它运行速度非常慢（大约 15 FPS）。为了改善这一点以及使用 SpriteGroup，我将背景图像转换为 RGB_565。所以，例如，

```
mBitmapTextureAtlasBackground = new BitmapTextureAtlas(512, 
    512,BitmapTextureFormat.RGB_565,TextureOptions.DEFAULT);
mBgRegion = BitmapTextureAtlasTextureRegionFactory
    .createFromAsset(mBitmapTextureAtlasBackground, mActivity, 
    "backgroundgame1.png", 0, 0);
BackgroundSprite = new Sprite(0.0f, 0.0f, mCamera.getWidth(),mCamera.getHeight(), mBgRegion); 
```

然而图像如下，右边是RGB_565，

![原始图像](../Images/e5144047fedbabe5b099175474a96d86.png) ![RGB_565](../Images/4367353eaa8b32016ea2f7a7e8359870.png)

（第一张图片上的黑色矩形是我屏蔽的广告！）。有什么我遗漏的吗？对于这方面的任何帮助，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:04:56.453

抱歉，这似乎是我自己对图像格式的无知：$

我已经留下了这个问题，但以防万一有人在游荡。我使用的是纹理打包器，它为我提供了纹理格式 (png) 和图像格式 (RGB565) 的选项，因此我认为 RGB565 是没有 alpha 的 png 的简化版本。在调查我的问题时，我遇到了这个，

[如何将 32 位 PNG 转换为 RGB565？](https://stackoverflow.com/questions/10118374/how-to-convert-32-bit-png-to-rgb565)

和这个，

[为什么 OpenGL(IOS) 中有 .pvr 文件](https://stackoverflow.com/questions/5590819/why-there-is-pvr-file-in-openglios)

我现在明白了 png 和 RGB565 确实有很大的不同！

# javascript - 从全屏按下转义时更改 CSS 类

> ID：15465591
> 
> 赞同：1
> 
> 时间：2013-03-17T20:07:36.080
> 
> 标签：javascript, fullscreen

我正在使用[这个插件](http://www.ailis.de/~k/archives/66-jQuery-Fullscreen-Plugin.html)在我的网站上制作一个 Flash 视频全屏显示。为了使全屏正常工作，当用户单击按钮进入和退出全屏时，我还使用一些 javascript 在 div 上添加和删除全屏类。

当用户使用退出键而不是按钮退出全屏模式时，我遇到了一个小问题。当使用转义键时，全屏类确实会被删除，这会使布局有点混乱。有没有办法检测何时使用转义键退出全屏然后删除全屏类？

此外，我不是一个 javascript 编码器，因此将不胜感激很多帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-09-12T04:59:32.763

退出全屏模式时，Chrome 不会触发按键事件。你需要定义一个事件监听器来监听全屏模式的变化，就像这样（这些东西没有很好的标准化，所以你需要监听不同浏览器触发的事件）：

```
 if (document.addEventListener) {
        document.addEventListener('webkitfullscreenchange', exitHandler, false);
        document.addEventListener('mozfullscreenchange', exitHandler, false);
        document.addEventListener('fullscreenchange', exitHandler, false);
        document.addEventListener('MSFullscreenChange', exitHandler, false);
    } 
```

然后，当浏览器触发此事件时，它将调用您定义的“exitHandler”函数，并且当用户*退出*全屏模式时，您可以通过执行以下操作从 div 中删除该类：

```
function exitHandler() {
    if (!document.webkitIsFullScreen && !document.mozFullScreen && !document.msFullscreenElement) {
        var myDiv = document.getElementById("myDivId");
        myDiv.classList.remove("fullscreen");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:12:09.370

您可以在文档上绑定事件

```
document.addEventListener('keyup', function(e){ 

    if(e.which == 27){
          //add remove class.
     }
}) 
```

# ruby - Rails 3：大规模更新

> ID：15465596
> 
> 赞同：1
> 
> 时间：2013-03-17T20:08:09.653
> 
> 标签：ruby, ruby-on-rails-3

我想使用单个更新按钮在单个视图中使用批量更新每个操作。使用以下代码，Rails 会抛出此错误

```
Showing /home/vincent/git/gestion/app/views/operations/tag.html.erb where line #23 raised:

undefined method `merge' for 1:Fixnum
Extracted source (around line #23):

20:         <td>
21:             <% @tags.each do |elem| %>
22:             <%= f.label elem.tag %>
23:             <%= f.check_box "operation[tag_ids][]", elem.id, operation.tags.include?(elem) %>
24:             <% end %>
25:         </td>
26:         <td><%= f.submit %></td> 
```

楷模

```
class Operation < ActiveRecord::Base
  attr_accessible :credit, :date_operation, :debit, :libelle, :tag_ids
  has_and_belongs_to_many :tags
  accepts_nested_attributes_for :tags, :allow_destroy=>true
end

class Tag < ActiveRecord::Base
  attr_accessible :id, :tag
  has_and_belongs_to_many :operations
end 
```

控制器

```
 def tag
    @operations = Operation.limit(100)
    @tags = Tag.all
    respond_to do |format|
      format.html { "tag" }# tag.html.erb
#      format.json { render json: @operations }
    end
  end 
```

看法

```
<% @operations.each do |operation| %>
    <tr>

        <td><%= operation.date_operation %></td>
        <td><%= operation.libelle %></td>
        <td><%= operation.credit %></td>
        <td><%= operation.debit %></td>
        <%= form_for operation do |f| %>
        <td>
            <% @tags.each do |elem| %>
            <%= f.label elem.tag %>
            <%= f.check_box "operation[tag_ids][]", elem.id, operation.tags.include?(elem) %>
            <% end %>
        </td>
        <td><%= f.submit %></td>
        <% end %>
    </tr>
    <% end %> 
```

你对这个问题有任何线索/帮助吗？

先感谢您

编辑 1：添加完整的堆栈跟踪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:24:37.877

您需要更改`f.check_box`for `check_box_tag`，例如：

```
<%= check_box_tag "operation[tag_ids][]", elem.id, operation.tags.include?(elem) %> 
```

这种情况下的问题是`f.check_box`期望值绑定到在这种情况下不是形式的形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:24:03.343

在这种情况下使用nested_form gem，我认为它会起作用。

有关nested_form 的更多信息，请单击[此处](https://github.com/ryanb/nested_form)

# html - Sublime text 2：选择html标签内的所有文本

> ID：15465597
> 
> 赞同：18
> 
> 时间：2013-03-17T20:08:09.510
> 
> 标签：html, sublimetext2

如何在 sublime text 2 中选择匹配的 html 标签中的所有内容。我尝试过“将选择扩展到括号​​”，但它不起作用。例如。

```
<div class="container">
  <p>
    Text goes here...
  </p>
  <p>
    Text goes here...
  </p>
  <p>
    Text goes here...
  </p>
  more content...
</div> 
```

我想选择 div.container 的所有内容

不过我发现了一个窍门

我试过的只是做“冷折叠”然后选择所有的。但我希望有一条捷径或为它建造。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-17T20:22:26.897

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-08T20:23:37.520

我在 Mac 上使用带有 Emmet 的 Sublime Text 2 并且 cmd + d 正在为我选择匹配的单词，而不是 HTML 标签之间的文本。

`<h3>Only Want to Select This Text</h3>`我能够使用 cmd + shift + a实现我正在寻找的内容（在开始和结束标签之间选择文本，例如）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-18T03:11:26.120

这对我有用

Preferences-> Key Binding-User

然后将其添加到 [ ]

{ "keys": ["ctrl+shift+a"], "command": "expand_selection", "args": {"to": "tag"} },

# c# - 正则表达式拆分字符串但保留分隔符，但不作为单独的元素

> ID：15465598
> 
> 赞同：3
> 
> 时间：2013-03-17T20:08:09.803
> 
> 标签：c#, regex

我需要拆分以下字符串

```
the quick brown fox jumps over the lazy dog 
```

进入以下标记：

1.  这
2.  快速的棕色狐狸跳过
3.  懒狗

因此，为了解释，我想拆分`the`但`the`在前面的数组元素中包含分隔符（而不是作为它自己的单独元素）。

任何人都可以对此有所了解，或者给我正确的正则表达式吗？

我正在使用 C#。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T20:13:27.843

您需要使用后视 ( `?<=`)。这个名字说明了一切，查看前面的字符，看看它们是否匹配某个给定的模式。

这应该有效：

```
"(?<=\\bthe) " 
```

因此，在任何空格处，检查前面的字符是否为`"the"`，如果是，则匹配。

注意 - 我们还需要包含单词边界`\\b`（转义`\b`），否则类似的东西`"bathe"`也会匹配。

如果没有后视，我们将检查所有空格：

```
 v     v     v   v     v    v   v    v
the quick brown fox jumps over the lazy dog 
```

通过后视，我们只会匹配`"the"`之前的那些：（暂时忽略`\\b`）

`"the "`- 刚找到一个空格，最后一个字符是`"the"`，所以匹配。
`"quick "`- 刚刚找到另一个空格，但最后一个字符是`"...k"`，所以不匹配。
等等

[测试](http://ideone.com/Eur4Of)。

# java - 用于创建路径的 Java 代码

> ID：15465599
> 
> 赞同：0
> 
> 时间：2013-03-17T20:08:17.890
> 
> 标签：java

试图在java中编写代码。请建议任何适用于这种情况的算法。输入是：

```
Col A   Col B
A       B
A       C
B       D
C       A
C       B
C       E
D       A
D       B
E       A 
```

我正在尝试进行组合，例如输出：

```
A   B   D   A       
A   C   A           
A   C   B   D   A   
A   C   E   A       
B   D   B           
C   A   B   D   A   C
C   A   C           
C   B   D   A   C   
C   E   A   C

|
|
| 
```

等等。输出的起点和终点应该相同。

另一种看待它的方式是，你从节点 A 开始，你必须回到节点 A，所以你的路径是从 A 到 B，然后是 B 到 D（因为从 B 你只能去一个节点，即D），然后 D 到 A。所以，col A 和 Col B 为您提供了可能的路径，例如从 A 到 B 和 C，而不是 D 和 E。我希望这会有所帮助。另外，有什么办法可以限制没有。解决方案的节点数？

请提出一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:13:06.760

您需要使用递归，并且当您通过数据进行递归时，您需要标记您访问过的位置，这样您就不会无限地走同一条路径，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:23:28.130

根据您的数据，您有五个不同节点的集合 - A、B、C、D 和 E。

如果我们将它们组合在一起，那么我们会得到与什么相关的映射：

```
A:  [B, C]
B:  [D]
C:  [B, E]
D:  [A, B]
E:  [A] 
```

上面表示一个[稀疏图](http://en.wikipedia.org/wiki/Dense_graph#Sparse_and_tight_graphs)。除了 B->D->B，一个节点不会直接从另一个节点连接回自身。

这是我如何处理它的流程。

*   将 a`Map<String, List<String>`用于我到达的主节点，以及该节点连接到的边。

*   选择一个起始节点*a*。将其链接放入堆栈。

*   检查结束节点是否与开始节点相同。
    *   如果是，你就完成了 - 从堆栈中弹出元素并获取你的路径。
    *   如果不是，则从堆栈中弹出第一个元素并将其链接推入堆栈。从检查重复。
*   如果没有什么可以弹出，那么就没有从*a*到*a 的*路径。

这种遍历方式是[深度优先搜索](http://en.wikipedia.org/wiki/Depth-first_search)。您将更深入地了解图表，直到您到达您的路径或用尽您的选择。

# ruby - 使用 Sinatra 为 AWS s3 提供静态资产

> ID：15465601
> 
> 赞同：0
> 
> 时间：2013-03-17T20:08:32.247
> 
> 标签：ruby, amazon-s3, sinatra, assets

有没有人有在 Sinatra 应用程序中向 AWS S3 提供资产的经验。我已经安装了宝石

```
asset_sync 
```

按照这里的说明[https://github.com/ejholmes/asset-sync-sinatra](https://github.com/ejholmes/asset-sync-sinatra)

当我跑步时

```
rake assets:precompile 
```

我在控制台中收到此错误消息

```
cannot load such file -- asset_sync 
```

这是我的设置

宝石文件

```
source :rubygems
gem 'sinatra'
gem 'pony'
gem 'sinatra-flash'
gem 'heroku'
gem 'activesupport', require: 'active_support'
gem 'asset_sync', git: 'git://github.com/ejholmes/asset_sync.git', branch: 'sinatra' 
```

配置文件

```
module MyConfig

def config
 environment = ENV["RACK_ENV"] || "development"
 YAML.load_file("./config/config.yml")[environment]
end
end 
```

配置.yml

```
development:
 aws_access_key: = 'myaccesskey'
 aws_secret_key: = 'mysecretkey'
 fog_directory: = 'applecatering' 
```

耙文件

```
require 'active_support/core_ext'
require 'asset_sync'
require './config/config.rb'
include MyConfig

AssetSync.configure do |con|
 con.fog_provider = 'AWS'
 con.fog_region = 'eu-west-1'
 con.fog_directory = config['fog_directory']
 con.aws_access_key_id = config['aws_access_key']
 con.aws_secret_access_key = config['aws_secret_key']
 con.prefix = "assets"
 con.public_path = Pathname("./public")
end

namespace :assets do
 desc "Precompile assets"
 task :precompile do
AssetSync.sync
end
end 
```

第一次尝试这个，谁能看到我做错了什么，我错过了什么或不理解这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T20:21:26.437

我不认为你`Rakefile`的包括`Gemfile`.

尝试将此添加到您的顶部`Rakefile`，

```
require 'bundler/setup'
Bundler.require(:default) 
```

并尝试运行`bundle exec rake assets:precompile`

**编辑：**

另外，也许`require 'asset_sync'`从`Rakefile`. `Bundler.require(:default)`应该`require`的内容`Gemfile`

# iphone - 获取我的应用是否被授权使用 facebook [iOS 6, FB SDK 3.2]

> ID：15465602
> 
> 赞同：2
> 
> 时间：2013-03-17T20:08:35.517
> 
> 标签：iphone, ios, xcode, facebook, privacy

我怎么知道我的应用程序是否被用户授权使用 Facebook？

您可以在“设置 -> 隐私 -> Facebook”中启用或禁用它。我必须得到这个状态。

我正在使用 Facebook 3.2

谢谢你们！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T15:37:41.483

您可以使用 ACAccountStore 获取 Facebook 帐户（如果可用）并检查是否授予访问权限：

```
ACAccountStore *accountStore = [[ACAccountStore alloc] init];

ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

if(accountType.accessGranted){
    //app has permissions
}else{
    //no permissions
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T03:40:35.700

如果您正在寻找一行代码进行检查，那就是这里：

```
if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook])
{

//code goes here

} 
```

**笔记**

*仅*当您使用社交框架时，此代码才会有所帮助。

# node.js - EC2 服务器阵列上的 Socket.io (node.js)；用于发现和持久性的 redis 存储的替代方案？

> ID：15465606
> 
> 赞同：1
> 
> 时间：2013-03-17T20:09:12.270
> 
> 标签：node.js, socket.io

我在我的 EC2 自动缩放服务器阵列上运行 socket.io/node.js。一旦我拥有超过 1 台服务器，就会出现明显的问题，即需要在服务器之间共享 socket.io 连接。这是您通常使用 socket.io 附带的 redis 存储插件的地方。

不幸的是，我使用的是 MongoDB（而不是 redis），在我的堆栈中添加另一个数据库的成本会高得令人望而却步。我尝试使用[socket.io-mongo](https://github.com/kof/socket.io-mongo)模块，但它绝对杀死了我的服务器（巨大的 CPU 使用率）。

有没有其他方法可以在 EC2 服务器之间共享 socket.io 会话？

# php - 检查现有患者的数据库，然后添加如果不存在

> ID：15465607
> 
> 赞同：0
> 
> 时间：2013-03-17T20:09:14.770
> 
> 标签：php, mysql, if-statement

我创建了一个页面，mysql查询检查数据库中是否已经存在患者，如果患者不存在，则以下代码应将它们添加到数据库中

```
 <?php
    include("includes/staffmenu.php");
    include("includes/staffsession.php");
    @require_once("includes/dbconfig.inc");

    $firstname=$_POST["pfname"];
    $middlename=$_POST["pmname"];
    $surname=$_POST["psname"];
    $nat=$_POST["pnat"];
    $DOB=$_POST["pdob"];
    $pemail=$_POST["pemail"];
    $add1=$_POST["padd1"];
    $add2=$_POST["padd2"];
    $add3=$_POST["padd3"];
    $postcode=$_POST["ppcode"];
    $telephone=$_POST["pphone"];

        $pcheck=mysql_query("
        SELECT * FROM patient 
        WHERE 
        Patient_First_Name='$firstname' AND Patient_Middle_Name='$middlename' AND Patient_Surname='$surname' AND Patient_National_Insurance_No='$nat' 
        AND Patient_DOB='DOB' AND Patient_Address_Line_1='$add1' AND Patient_Address_Line_2='$add2' AND Patient_Address_Line_3='$add3' AND Patient_Postcode='$postcode'");
        $myrow = mysql_fetch_row($pcheck);
            if($myrow)
                    {   echo "This Patient already exists.<br><br> Please press the back button on your browser or the backspace button on your keyboard to go back";

                    }
            else
                    {   mysql_query("INSERT INTO patient (Patient_First_Name,Patient_Middle_Name,Patient_Surname,Patient_National_Insurance_No,Patient_DOB,Patient_Email,Patient_Address_Line_1,Patient_Address_Line_2,Patient_Address_Line_3,Patient_Postcode,Patient_Phone_No  ) 
                        VALUES('$firstname','$middlename','$surname','$nat','$DOB','$pemail','$add1','$add2','$add3','$postcode','$telephone')") or die (mysql_error());
                        echo "<br>";
                        echo "<p>Success! The Patient has been added to the database
                        </p>";
                    }   
    ?> 
```

问题是，即使患者已经存在，它也会继续添加一个新的……有人可以告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:13:50.517

`$`搜索 DOB 时缺少 a 。

`Patient_DOB='$DOB'`

另外，请注意您的代码容易受到 SQL 注入攻击

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:14:12.907

尝试改变

```
Patient_DOB='DOB' 
```

至

```
Patient_DOB='$DOB' 
```

# spring - Spring AOP在方法内捕获日志

> ID：15465608
> 
> 赞同：2
> 
> 时间：2013-03-17T20:09:22.007
> 
> 标签：spring, spring-aop

我是 Spring AOP 的新手。我确实了解它背后的概念，我也了解@Before 或@After 等用法的概念。我很困惑的仍然是Spring AOP的用法。想想下面的类方法。

```
public void test(int x) {
       :
       x++;
       logger.info("This is a test" + x);
       :
       try {
                   :
       } catch (Exception e) {
           throw new ...
       }
       :
} 
```

捕获日志的旧方法如上所示。这是我的问题：

1.  如果我要使用 Spring AOP 实现上述方法，则该记录器将被删除，但 Spring AOP 是否能够捕获此日志消息？（据我所知，Spring AOP 不会查看方法内部）

2.  如果对第 1) 条的回答是肯定的，那么它是如何完成的？

3.  如果答案是否定的，那么使用 Spring AOP 有什么意义。@Before 的使用是没有用的，除非您想在执行方法之前捕获参数等信息。大多数时候，我们想在方法本身中捕获一些日志。

忘记 AspectJ。我确实知道 AspectJ 可以完成上述工作。我只是想知道使用 Spring AOP 的意义是什么，如果它不能完成在方法中捕获日志的最基本的事情。

任何帮助表示赞赏。

* * *

进一步说明：

我假设在实现 Spring AOP 之后，上面的代码会是这样的。记录器调用不再在测试方法中，因为它将由方面类处理。这不就是 AOP 的目的吗？消除对象的横切关注（因为它与对象的实际服务无关）并由方面类处理？

```
public void test() {

       :
       try {
                   :
       } catch (Exception e) {
           throw new ...
       }
       :
} 
```

如果 Spring AOP 不能做到这一点，那么拥有 AOP 的意义何在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T00:54:48.387

我很难理解你在这里的要求。一般来说，我不知道“在方法中捕获日志”是什么意思，但我认为无论如何我都可以提供一些帮助。

在我看来，您想在方法的随机点中任意插入代码，不一定在方法的开头或结尾。一般来说，Spring AOP 无法做到这一点，我不确定 AspectJ 是否能提供帮助，但我不太熟悉，无法给你一个明确的答案。

正如您所说，Spring AOP 可以在您的代码库中的各种 JoinPoints 之前/之后/周围注入。这些 JoinPoints 将成为方法，并且仅在 Spring 托管类中。

因此，如果您有类似以下的方法，则可以`System.out`通过方面在其周围添加日志记录（在本例中为通过）`@Around`。

编码：

```
public void test() {
    System.out.println("I am in a method now");
} 
```

方面：

```
@Around("execution(public * *(..))")
public void publicMethods(ProceedingJoinPoint pjp) {
    System.out.println("before in an aspect");
    pjp.proceed();
    System.out.println("after in an aspect");
} 
```

这实质上将初始方法变成了这个（以及将这些添加`System.out`到所有公共方法中）：

```
public void test() {
    System.out.println("before in an aspect");
    System.out.println("I am in a method now");
    System.out.println("after in an aspect");
} 
```

根据代码的布局，您可以通过在要插入的点处创建方法来有效地任意插入。我不会推荐这个，但它肯定是可能的。

最后，以下是您的问题的答案：

1.  `@Before`假设日志记录行是方法中的第一个代码，您可以用方面替换记录器。如果您要这样做，那么您将能够从方法中删除日志记录。我不太清楚你对最后一句话的要求是什么，但不，Spring AOP 并不看“内部”方法。
2.  Spring AOP 能够“捕获”它，因为 Spring 将代理该类。
3.  Spring AOP 的重点是能够“拦截”方法调用。您可能看不到它的真正用途，但它非常有用。最后一句话，我希望有所不同，当使用 Spring AOP 时，我希望能够检查我的方法中的内容或结果。

编辑：

您是对的，可以删除日志调用，并由方面进行处理。必须注意的是，方面调用日志方法的唯一机会是在实际方法调用之前或之后。

# c++ - C++ 类表达式参数定义不正确

> ID：15465615
> 
> 赞同：0
> 
> 时间：2013-03-17T20:09:47.620
> 
> 标签：c++, c++11, undefined-reference

我正在学习 C++，目前遇到类模板的奇怪问题。这是我的头文件：

```
#ifndef VECTOR_H
#define VECTOR_H
#include <iostream>
#include <list>

using namespace std;

template <int n>
class Vector {

public:
    list<float> coords;
    Vector();
    Vector(list<float> ncoords);
};

template <int n>
Vector<n>::Vector() {
    coords.assign(n, 0.0);
}
#endif 
```

这是我的 .cpp 文件：

```
#include "vector.h"
#include <list>

using std::ostream;
using namespace std;

template <int n>
Vector<n>::Vector(list<float> ncoords): coords {ncoords}{} 
```

如果我这样做，一切都很好`Vector<2> vector;`

但是如果我尝试链接器会出错 `Vector<20> vector2 { list<float>{} };`

错误信息

> 未定义对 `Vector<20>::Vector(std::list >)' 的引用

问题是 - 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T20:15:42.723

模板必须在头文件中实现。这是由于链接的工作方式。仔细阅读[这里](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file/495056#495056)的详尽答案。下一次在询问之前搜索。

# php - javascript 不会验证单个 php 页面中的多个表单

> ID：15465619
> 
> 赞同：1
> 
> 时间：2013-03-17T20:09:53.213
> 
> 标签：php, javascript, html

我是网络开发的新手。我有一个关于在单个 php 页面中验证用户输入数据的问题：

这是我的代码

```
<html>
    <head>
        <script lanauge="JavaScript" type="text/javascript">
            function validate_skill_name()
        {
            if (document.worker.skill_name == null 
                    || document.worker.skill_name == "") {
                alert("skill name field is incorrect");
                document.worker.skill_name.focus();
                return false;
            }
            return true;
        }

        function validate_skill_id()
        {
            if (document.worker.worker_id1 == null 
                    || isNaN(document.worker.worker_id1)) {
                alert("skill: worker id 1 field is incorrect");
                document.worker.worker_id1.focus();
                return false;
            }
            return true;
        }

        function validate_time_id()
        {
            if (document.worker.worker_id2 == null 
                    || isNaN(document.worker.worker_id2)) {
                alert("time: worker id 2 field is incorrect");
                document.worker.worker_id2.focus();
                return false;
            }
            return true;
        }
    </script>
</head>
<body>
    <h1> Select Workers </h1>
    <form name="worker" action="" method="post" onsubmit="return(validate_skill_name());">
        Skill Name: <input type="text" name="skill_name"/><br />
        <input type="submit" value="submit me!"/>
    </form>

    <h1> Get Worker Skill </h1>
    <form name="worker" action="" method="post" onsubmit="return(validate_skill_id());">
        ID: <input type="text" name="worker_id1"/> <br />
        <input type="submit" value="submit me!"/>
    </form>

    <h1> Get Worker Available Time </h1>
    <form name="worker" action="" method="post" onsubmit="return(validate_time_id());">
        ID: <input type="text" name="worker_id2"/> <br />
        <input type="submit" value="submit me!"/>
    </form>

    <?php
        require_once "../logic.php";

        if ($_POST) {
            $result = NULL; 
            if (array_key_exists('worker_id2', $_POST)) {
                $result = logic_get_worker_available_time($_POST['worker_id2']);
            } else if (array_key_exists('skill_name', $_POST)) {
                $result = logic_select_has_skill($_POST['skill_name']);
            } else if (array_key_exists('worker_id1', $_POST)) {
                $result = logic_get_worker_skills($_POST['worker_id1']);
            }
            echo htmlspecialchars(print_r($result));
        } 
    ?>

</body> 
```

我的问题是，此代码不验证用户输入数据。我不知道为什么。因为我对我的其他 php 页面做了完全相同的事情，只是它们只有一种形式，而不是像以防万一那样的多种形式。

结果，用户输入没有得到验证。$_POST 请求总是被发送到我的 logic.php。

希望任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T20:17:34.177

您应该使用 ID 属性来唯一标识页面上的元素 - 例如在您的情况下的表单。

```
<form id="myFormID">
    <input name="skill_name" type="text" />
</form> 
```

然后您可以通过 javascript 引用表单：

```
document.getElementById("myFormID");
function validate_skill_name()
{
    var formElm = document.getElementById("myFormID");

    if (formElm.skill_name.value == null || formElm.skill_name.value == "") {
        alert("skill name field is incorrect");
        formElm.skill_name.focus();
        return false;
    }
    return true;
} 
```

**此外，更好的方法是使用 jQuery：**

```
$("#myFormID").submit(function(){
    var inputElmVal = $("input[name=input_field_name]").val();
    if(inputElmVal == '')
    {
        // Do your null validation here ....
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:23:22.173

你需要使用value，输入的名称是html元素

```
function validate_skill_name() {
    if (document.worker.skill_name.value == null 
        || document.worker.skill_name.value == "") {
        alert("skill name field is incorrect");
        document.worker.skill_name.focus();
        return false;
    }
    return true;
} 
```

[http://jsfiddle.net/gcREC/](http://jsfiddle.net/gcREC/)

# ruby-on-rails - Rails 3：保存方法不起作用

> ID：15465626
> 
> 赞同：0
> 
> 时间：2013-03-17T20:10:21.377
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

我正在构建我的第一个 Rails 应用程序，直到现在一切都很好，但后来我发现了以下场景：一个演示文稿应该有 N 次迭代。我没有使用 REST。所以，我试图制作一个简单的表格来创建迭代。

**这些是模型：**

```
class Presentation < ActiveRecord::Base
  has_many :iterations
end

class Iteration < ActiveRecord::Base
  belongs_to :presentation
  attr_accessible :presentation_id, :description, :delivery_date, :file
  validates :presentation_id, :presence => {:message => 'is required.'}
end 
```

**这些是控制器中的操作：**

```
#Shows Form
def add
  @iteration = Iteration.new
  @presentation = Presentation.find(params[:id])
end

#Saves Form
def save
  @iteration = Iteration.new(params[:iteration])
  @iteration.delivery_date = Time.now
  if @iteration.save
    flash[:notice] = "Saved succesfully!"
  else
    flash[:error] = "Changes were not saved."
  end
  redirect_to root_url
end 
```

**这些将是 HAML 中的视图：**

```
= form_for @iteration, :url => { :action => "save", :method => "post" }, :html => { :multipart => true }  do |f|

- if @iteration.errors.any?
  There were some errors:
  .notice-text.fg-color-white
    %ul.notice
    - for message in @iteration.errors.full_messages
      %li= message
%br

.field
  = f.label :description, "Description"
  = f.text_area :description, :class=>"form-text-area", :rows=>5
.field
  = f.label :file, "Upload File"
  = f.file_field :file
.field
  = hidden_field_tag :presentation_id, @presentation.id
%br
= f.submit "Save" 
```

问题是，save 方法不会保存，但是视图上@iteration.errors.count 的值为0。我用了然后保存！相反，正如我在另一篇文章中所读到的那样，它会引发以下错误：

验证失败：需要演示。

我无法弄清楚我做错了什么。请注意，在视图中，我曾经使用“f.hidden_​​field”而不是“hidden_​​field_tag”，但我出于其他原因更改了它，但是在此之前我遇到了同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:15:53.653

你的 HAML，

```
hidden_field_tag :presentation_id 
```

需要是，

```
f.hidden_field :presentation_id, :value => @presentation.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T23:08:12.697

查看您可以拥有的模型定义，

1.  嵌套资源：请参阅[控制器路径以获取嵌套资源 - 未定义方法 `<controller>_path'](https://stackoverflow.com/questions/4527933/controller-path-for-nested-resource-undefined-method-controller-path)

2.  使用虚拟属性：Ryan 在此非常有用的轨道广播 -> [http://railscasts.com/episodes/16-virtual-attributes-revised](http://railscasts.com/episodes/16-virtual-attributes-revised)

3.  在会话中保存演示文稿ID：（这不是一个干净非常干净的方法）

在您的控制器上，您将需要在演示文稿上实例化迭代，以便正确填充演示文稿 ID。

# xcode - 为什么 Xcode 确信我的桌面处于版本控制之下？

> ID：15465627
> 
> 赞同：0
> 
> 时间：2013-03-17T20:10:21.377
> 
> 标签：xcode, git, version-control, warnings

![在此处输入图像描述](../Images/de921d5f18155eb4331873ee93e83738.png)

`/Users/pcperini/Desktop/.git`并且`/Users/pcperini/Desktop/.svn`不存在。Xcode 从哪里得到这个？可以修复吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:21:39.160

想通了：需要从组织者中删除存储库。

# html - 你如何定位 CSS 按钮

> ID：15465629
> 
> 赞同：-1
> 
> 时间：2013-03-17T20:10:58.307
> 
> 标签：html

```
 .button1{

      background: #E68A00 url(wooden.jpg) repeat-x;
      border: 2px solid #eee;
      height: 28px;
      width: 115px;
      margin: 50px 0 0 50px;
      padding: 0 0 0 7px;
      overflow: hidden;
      display: block;
      text-decoration:none;
      font-family: 'Sacramento', cursive;
      color : white;
      font-size: 30px;

      /*Rounded Corners*/
    -webkit-border-radius: 15px;
    -moz-border-radius: 15px;
    border-radius: 15px;

    /*Gradient*/
    background-image: -webkit-linear-gradient(top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.2));
    background-image: -moz-linear-gradient(top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.2));
    background-image: -o-linear-gradient(top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.2));
    background-image: -ms-linear-gradient(top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.2));
    background-image: linear-gradient(top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.2));

    /*Transition*/
    -webkit-transition: All 0.5s ease;
    -moz-transition: All 0.5s ease;
    -o-transition: All 0.5s ease;
    -ms-transition: All 0.5s ease;
    transition: All 0.5s ease;

    }

    #pg .button1{ 
    position: absolute
    left:340px;
    top:50px;

    }

    #p2 .button1{ 
    position:relative 
    left:340px;
    top:50px;

    }

    #p3 .button1{ 
    position:relative 
    left:40px;
    top:50px;

    }

    .button1:hover {
      width: 200px;
    }

 <a class="button1 pg " href="...">Small $14</a>
    <a class="button1 p2" href="...">Medium $15</a>
    <a class="button1 p2" href="...">Large $16</a> 
```

我今天已经发布了这个问题两次以上！并且仍然没有有效的解决方案上面的代码有效，但是当我尝试更改 left 和 top 值时，什么也没有发生:(。基本上我想更改共享相同属性（设计）的 3 个按钮的位置。太烦人了，过去 3 个小时我一直在这里寻找解决此问题的方法。请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:12:54.933

您没有`id`属性，但您希望`#`ID 选择器能够工作？

要选择第一个按钮，您需要类似`.button1.pg`

# html - CSS - 如何避免每个段落的 class=？

> ID：15465630
> 
> 赞同：3
> 
> 时间：2013-03-17T18:59:43.350
> 
> 标签：html, css

假设我有一个这样的 CSS：

```
p {
        color: #000000;
}

p.myclass {
        color: #ff0000;
} 
```

所以所有段落文本都应该是黑色的，除了“myclass”段落是红色的。

我看到的是，如果我这样做：

```
<div class="myclass">
<p>Something something something</p>
</div> 
```

我还是黑了。如果我这样做：

```
<p class="myclass">Something something something</p> 
```

然后我就红了。

在实际页面上，我有多个部分要应用不同的类，因此我不能只在页面级别定义“p”。但是 class= 对于每个

标签似乎真的很低效。

有没有办法说“在这个块中，使用这个类，然后任何

该块中的标签与该类匹配吗？我认为这就是 div 所做的。

我确定有一些基本的我误解了......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T19:11:05.040

你需要`.myclass p` 在你的css中使用。拥有 DIV 的好处是您可以设置框的样式，然后再设置 p 样式。

**HTML 示例**

```
<p>This is a content in black</p>
<p>This is more content in black</p>
<div class="myclass">
    <p>This content is in red</p>
    <p>This more content in red</p>    
</div>    
<p>This is content again in black</p> 
```

**CSS 示例**

```
.myclass p {color:red;}
p {color:black;} 
```

**在线示例**

查看[我为您制作的这个 JS Fiddle，它演示](http://jsfiddle.net/652Jk/)了 myclass 与 p 的使用。可以在[此处](http://jsfiddle.net/652Jk/1/)查看更高级的演示，该演示演示了如何使用带有 in ap 标记的 span 样式并将 DIV 样式设置为容器内的框。

# c# - 如何将类绑定到 WPF AutoCompleteBox？

> ID：15465638
> 
> 赞同：1
> 
> 时间：2013-03-17T20:12:06.073
> 
> 标签：c#, wpf, autocomplete

我有这样的课：

```
class MyClass
{
    public int ID{ get; set; }
    public string Title{ get; set; }
} 
```

目前我将它绑定到 AutoCompleteBox 像这样：

```
List<MyClass> lstMyClass = new List<MyClass>();
lstMyClass = context.Sometable;
autoCompleteBox1.ItemsSource = lstMyClass;
autoCompleteBox1.ValueMemberPath = "Title";
autoCompleteBox1.PopulateComplete(); 
```

它按标题查找对象，但在自动完成部分它显示类定义而不是项目标题。任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T20:40:00.210

您可以使用`ItemTemplate`( [msdn](http://msdn.microsoft.com/en-us/library/system.windows.controls.autocompletebox.itemtemplate%28v=vs.95%29.aspx) )。

```
<controls:AutoCompleteBox x:Name="autoCompleteBox1"        
      FilterMode="Contains"              
      IsTextCompletionEnabled="True">
    <controls:AutoCompleteBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Title}" />
        </DataTemplate>
    </controls:AutoCompleteBox.ItemTemplate>
</controls:AutoCompleteBox> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T20:29:19.190

您可以覆盖 MyClass 中的 ToString() 方法，以便它返回 Title。

# android - 在子视图中设置膨胀按钮的 OntouchListener

> ID：15465643
> 
> 赞同：0
> 
> 时间：2013-03-17T20:12:17.487
> 
> 标签：android, eclipse, ontouchlistener, layout-inflater

如何`PadButton` `PadSelect` `PadName`在此代码中设置 Ontouchlistener ？

主要活动：

```
public class Drum extends Activity {

    boolean loaded = false;
    int sound;
    SoundPool soundPool = null;
    Button PadButton,PadSelect,PadName;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_drum);

        //Remove notification bar
        this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        PadButton = (Button) findViewById(R.id.padButton);
        PadSelect = (Button) findViewById(R.id.padSelect);
        PadName = (Button) findViewById(R.id.padName);

        LinearLayout root = (LinearLayout)findViewById(R.id.DrumLayout);
        LinearLayout row1 = new LinearLayout(this);
        LinearLayout row2 = new LinearLayout(this);
        LinearLayout row3 = new LinearLayout(this);

        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
                 LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT,5f);

            params.setMargins(3, 3, 3, 3);

        View Vcassa = View.inflate(this, R.layout.drumpad, null);
        View Vrullo = View.inflate(this, R.layout.drumpad, null);
        View Vtom1 = View.inflate(this, R.layout.drumpad, null);
        View Vtom2 = View.inflate(this, R.layout.drumpad, null);
        View Vtom3 = View.inflate(this, R.layout.drumpad, null);

        View Vtim1 = View.inflate(this, R.layout.drumpad, null);
        View Vtim2 = View.inflate(this, R.layout.drumpad, null);
        View VhatClose = View.inflate(this, R.layout.drumpad, null);
        View VhatOpen = View.inflate(this, R.layout.drumpad, null);
        View VhatPedal = View.inflate(this, R.layout.drumpad, null);

        View VrideTin = View.inflate(this, R.layout.drumpad, null);
        View VrideCrash = View.inflate(this, R.layout.drumpad, null);
        View Vridebell = View.inflate(this, R.layout.drumpad, null);
        View Vcrash1 = View.inflate(this, R.layout.drumpad, null);
        View Vcrash2 = View.inflate(this, R.layout.drumpad, null);

        root.addView(row1);
        root.addView(row2);
        root.addView(row3);

        row1.addView(Vcassa,params);
        row1.addView(Vrullo,params);
        row1.addView(Vtom1,params);
        row1.addView(Vtom2,params);
        row1.addView(Vtom3,params);

        row2.addView(Vtim1,params);
        row2.addView(Vtim2,params);
        row2.addView(VhatClose,params);
        row2.addView(VhatOpen,params);
        row2.addView(VhatPedal,params);

        row3.addView(VrideTin,params);
        row3.addView(VrideCrash,params);
        row3.addView(Vridebell,params);
        row3.addView(Vcrash1,params);
        row3.addView(Vcrash2,params);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_drum, menu);
        return true;
    }

    @Override
    protected void onResume(){
        super.onResume();

        if (soundPool == null) {
            soundPool = new SoundPool(1, AudioManager.STREAM_MUSIC, 100);
            soundPool.setOnLoadCompleteListener(new OnLoadCompleteListener() {
                @Override
                public void onLoadComplete(SoundPool soundPool, int sampleId,
                        int status) {
                    loaded = true;
                }
            });
        }
    }
} 
```

膨胀的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/padLayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/pad"
    android:orientation="vertical"
    android:padding="3dp" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical|clip_horizontal|top"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/padButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/titles2" />

        <Button
            android:id="@+id/padSelect"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="15dp"
            android:layout_height="wrap_content" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="21dp" >

        <Button
            android:id="@+id/padName"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_margin="2dp"
            android:background="#0f0f0f"
            android:padding="2dp"
            android:text="@string/pad"
            android:textColor="#dfdfdf"
            android:textSize="10sp" />

    </LinearLayout>

</LinearLayout> 
```

主要布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/DrumLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#999"
    android:gravity="center"
    android:orientation="vertical"
    tools:context=".Drum" >

</LinearLayout> 
```

我无法点击按钮的特定实例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:18:21.647

您已经有权访问该对象。设置`OnTouchListener`正常就好。

```
PadButton = (Button) findViewById(R.id.padButton);
PadSelect = (Button) findViewById(R.id.padSelect);
PadName = (Button) findViewById(R.id.padName);

PadButton.setOnTouchListener( new OnTouchListener() {

        @Override
        public boolean onTouch( View v, MotionEvent event ) {

            return false;
        }
    } );
PadSelect.setOnTouchListener( new OnTouchListener() {

        @Override
        public boolean onTouch( View v, MotionEvent event ) {

            return false;
        }
    } );
PadName.setOnTouchListener( new OnTouchListener() {

        @Override
        public boolean onTouch( View v, MotionEvent event ) {

            return false;
        }
    } ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:19:24.850

只需在 Click 侦听器上添加一个法线

```
 PadButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

        }
    }); 
```

# python - Pandas GroupBy 的绘图结果

> ID：15465645
> 
> 赞同：39
> 
> 时间：2013-03-17T20:12:23.337
> 
> 标签：python, matplotlib, group-by, pandas, data-analysis

我开始学习 Pandas，并试图找到最 Pythonic（或 Panda-thonic？）的方法来完成某些任务。

假设我们有一个包含 A、B 和 C 列的 DataFrame。

*   A 列包含布尔值：每一行的 A 值要么为真，要么为假。
*   B 列有一些我们想要绘制的重要值。

我们想要发现的是 A 设置为 false 的行的 B 值与 A 设置为 true 的行的 B 值之间的细微差别。

换句话说，**我如何按 A 列的值（真或假）进行分组，然后在同一张图上绘制两组 B 列的值？**这两个数据集应该用不同的颜色来区分这些点。

* * *

接下来，让我们为这个程序添加另一个功能：在绘图之前，我们要为每一行计算另一个值并将其存储在 D 列中。这个值是在记录前整整五分钟存储在 B 中的所有数据的平均值 - 但是我们只包含存储在 A 中的具有相同布尔值的行。

换句话说，**如果我有一行 where`A=True`和`time=t`，我想计算列 D 的值，它是从时间`t-5`到`t`具有相同的所有记录的 B 的平均值`A=True`。**

在这种情况下，我们如何对 A 的值执行 groupby，然后将此计算应用于每个单独的组，最后绘制两组的 D 值？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-17T20:52:57.310

我认为@herrfz 达到了所有的高点。我将充实细节：

```
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt

sin = np.sin
cos = np.cos
pi = np.pi
N = 100

x = np.linspace(0, pi, N)
a = sin(x)
b = cos(x)

df = pd.DataFrame({
    'A': [True]*N + [False]*N,
    'B': np.hstack((a,b))
    })

for key, grp in df.groupby(['A']):
    plt.plot(grp['B'], label=key)
    grp['D'] = pd.rolling_mean(grp['B'], window=5)    
    plt.plot(grp['D'], label='rolling ({k})'.format(k=key))
plt.legend(loc='best')    
plt.show() 
```

![在此处输入图像描述](../Images/45adfa633b96554772d77347a6f1f089.png)

# c# - ASP.NET MVC Entity Framework 使用 MultiSelectList 插入多对多表

> ID：15465646
> 
> 赞同：0
> 
> 时间：2013-03-17T20:12:34.493
> 
> 标签：c#, asp.net-mvc, entity-framework, many-to-many

我有 3 张桌子：

**轮询：**

```
public int PollId { get; set; }
public string PollTitle { get; set; }

public virtual ICollection<Party> Parties { get; set; } 
```

**聚会**

```
public int PartyId { get; set; }
public string PartyName { get; set; }

public virtual ICollection<Poll> Polls { get; set; } 
```

**PartyInPoll**（两个主键）

```
 * int PartyId
 * int PollId 
```

**在我的 PollController 中：**

```
private VoterEntities db = new VoterEntities();

//
        // GET: /Polls/Create

        public ActionResult Create()
        {
            ViewBag.PartyId = new MultiSelectList(db.Parties, "PartyId", "PartyName");
            return View();
        }

        //
        // POST: /Polls/Create

        [HttpPost]
        public ActionResult Create(Poll poll)
        {

            //var parti = db.Parties.Find(partyId);
            if (ModelState.IsValid)
            {
                var pList = new List<Party>();
                foreach (var pId in "PartyId")
                {
                    pList.Add(new Party
                    {
                        PartyId = pId
                    });
                }
                poll.Parties = pList;
                db.Polls.Add(poll);
                db.SaveChanges();
                return RedirectToAction("Index");
            }
            ViewBag.PartyId = new MultiSelectList(db.Parties, "PartyId", "PartyName", poll.Parties);
            return View(poll);
        } 
```

**我的观点：**

```
@model VoterMVC.Models.Poll

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

        <div class="editor-label">
            @Html.LabelFor(model => model.PollTitle)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.PollTitle)
            @Html.ValidationMessageFor(model => model.PollTitle)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Parties)
        </div>
        <div class="editor-field">
            @Html.ListBox("PartyId")
            @Html.ValidationMessageFor(model => model.Parties)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

现在大部分工作都像魅力一样，但 foreach 循环却没有。它不会与所选缔约方的视图列表框进行通信，并且循环将 7（？！）个新行添加到 Party 表和 PartyInPoll 表。所以我想要的当然是让从视图中的 ListBox 中选择的值通过 foreach 循环发送，以便更新 PartyInPoll 表。我不希望将新的派对添加到派对表中！！

希望你明白我的意思。卡在这几天了，非常感谢任何帮助，谢谢！

编辑：如果有任何更好的解决方案，请吐出来:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-30T01:01:29.573

一旦您`PartyId`从列表框中选择了一个，视图只会将此 id 发送到 post 方法。在这种情况下，for 循环变得毫无用处。您的大多数问题都来自数据库中的多对多关系。[在此处](http://help.filemaker.com/app/answers/detail/a_id/9922/~/understanding-and-creating-many-to-many-relationships-in-filemaker-pro)阅读有关此内容的更多信息。如果您想在一个投票中让多个缔约方创建 1 到 *（或 * 到 1）关系，您会发现这样做更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:16:53.667

这段代码看起来不对：

```
 foreach (var pId "PartyId") 
```

它甚至不应该编译。可能你有

```
foreach (var pId in "PartyId") 
```

这段代码会遍历“PartyId”字符串中的字符。恰好有 7 个。

# jquery - 如何获取上一个和下一个轮播幻灯片的父母的ID值？(jQuery)

> ID：15465649
> 
> 赞同：2
> 
> 时间：2013-03-17T20:12:49.437
> 
> 标签：jquery, carousel

我正在尝试编写脚本，将描述分配给轮播的“上一个”和“下一个”链接。需要根据当前幻灯片的数值从轮播项目ID属性中读取描述（可以通过轮播API访问-见第一行JS代码-返回从1开始的轮播项目的数值）

HTML：

```
<div id="carousel-wrapper" class="content-promo carousel-wrapper>
  <div class='wrapper'>

    <div id='features' class=' ccm-block-styles'>
      <div id='slide-1' class='carousel-slide'>
         <!-- SOME CONTENT  -->
      </div>
    </div>

    <div id='lifestyle' class=' ccm-block-styles'>
      <div id='slide-2' class='carousel-slide'>
         <!-- SOME CONTENT  -->
      </div>
    </div>

    <div id='food-&-drink' class=' ccm-block-styles'>
      <div id='slide-3' class='carousel-slide'>
         <!-- SOME CONTENT  -->
      </div>
    </div>

  </div> <!-- End of .wrapper -->
</div> <!-- End of #carousel-wrapper --> 
```

JS：

```
currentslide = $( ".carousel-wrapper" ).rcarousel( "getCurrentPage" );
prevslide = currentslide - 2; // as eq() counts from 0
prevslideidtext = $(".carousel-slide").eq( prevslide ).parent().attr( "id" );
nextslide = currentslide;
nextslideidtext = $(".carousel-slide").eq( nextslide ).parent().attr( "id" ); 
```

不幸的是，当is`prevslideidtext`时，DIV 不是返回上一张幻灯片父级的 ID，而是返回当前幻灯片父级的 ID 。`nextslideidtext``undefined`

结果示例（当第一张幻灯片是当前幻灯片时）：

```
currentslide = 1
prevslide = -1
nextslide = 1
prevslideidtext = features
nextslideidtext = undefined 
```

有 6 个带`carousel-slide`类的 DIV（上面的 HTML 代码中只显示了 3 个），但上面的 JS 脚本的行为与只有一个一样。

我做错了什么？

我不坚持使用`eq();`它只是在我看来是一种清晰而简单的方法来达到我需要的效果。

（我知道当传递给 eq() 的索引超出范围时， eq() 会创建新的空项目，我将对其进行整理 - 最后一张幻灯片 - 稍后）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:00:26.980

我为我的问题找到的解决方法：

```
// 1\. Read and save old carousel navigation text (like "Prev" and "Next")
carouselprevoldtext = $('#ui-carousel-prev').children(".carousel-control-text").html();
carouselnextoldtext = $('#ui-carousel-next').children(".carousel-control-text").html();
// 2\. How many slides?
maxslidenumber = $(".carousel-slide").length;
// 3\. Create an array with all slides' IDs (in this particular case I use parent() as ID is assigned through CMS by user not hardcoded - and extra DIV is added by CMS)
slideidarray = {};
$(".carousel-slide").each(
    function(index){
    slideidarray[index] = $ ( this ).parent().attr('id');
}                      
);
// 4\. Run the carousel
$( ".carousel-wrapper" ).rcarousel({ OPTIONS HERE });
// 5\. Find current slide
currentslide = $( ".carousel-wrapper" ).rcarousel( "getCurrentPage" ); // starts from 1 not from 0
// 6\. Find previous and next slides ID texts
// A. For first slide - previous slide is the last one
if (currentslide == 1) {
    prevslideidtext = slideidarray[maxslidenumber - 1];
    nextslideidtext = slideidarray[1];
}
else {
    prevslideidtext = slideidarray[currentslide - 2]; // as arrays count from 0
    nextslideidtext = slideidarray[currentslide];
    // B. For last slide - next slide is the first one
    if (currentslide == maxslidenumber) {
    nextslideidtext = slideidarray[0];
    }
}
// 7\. Create new carousel navigation text
carouselprevupdhtml = "<span class='carousel-control-text'>" + carouselprevoldtext + ": </span><span class='carousel-control-title'>" + prevslideidtext + '</span>';
carouselnextupdhtml = "<span class='carousel-control-text'>" + carouselnextoldtext + ": </span><span class='carousel-control-title'>" + nextslideidtext + '</span>';
// 8\. Assign it to carousel navigation
$('#ui-carousel-prev').html( carouselprevupdhtml );
$('#ui-carousel-next').html( carouselnextupdhtml ); 
```

当然，每次更换幻灯片时，都需要重复步骤 5 到 8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T23:01:50.713

您好，首先让我更好地帮助您，您可以执行以下操作：

1.) 将您的示例代码放在 JSFiddle 或 CodePen 中。然后把那个链接发回这里。 [http://jsfiddle.net/](http://jsfiddle.net/) [http://codepen.io/](http://codepen.io/)

只是一个提示，我建议您更改上面的类名或 ID 名称。同时拥有同名的 ID 和类并不是一个好习惯。

您有以下内容：

```
<div id="carousel-wrapper" class="content-promo carousel-wrapper> 
```

* * *

更新：您似乎需要关闭 #carousel-wrapper 元素的类属性中的引用。

# ruby-on-rails - 哪种编程模式是处理 MailChimp 邮件列表的优雅解决方案？

> ID：15465650
> 
> 赞同：1
> 
> 时间：2013-03-17T20:12:51.030
> 
> 标签：ruby-on-rails, api, design-patterns, model, ruby-on-rails-3.2

我实现了一些列表管理方法，以使我的 Rails 应用程序的用户数据与相应 MailChimp 列表的订阅者数据保持同步。

（编辑）在引擎盖下我已经在使用[mailchimp gem](https://rubygems.org/gems/mailchimp)。我只是抽象出一个更高的级别**来代表一个特定的列表**。

现在所有的逻辑都在一个控制器中，但我宁愿有一个更通用且因此可重用的方法（也许有一天甚至可以将它转换成一个 gem）。

所以我的第一个想法是将列表表示为无表模型，提供处理它的必要方法。

```
class MailChimpList
    def add_subscriber
        # ...
    end
    # ...
end 
```

**...但我很好奇还有哪些其他方法存在，哪些会更好地反映这个想法？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:29:47.463

对于处理 API 交互的更通用方法（不仅仅是 MailChimp），[Temboo](https://temboo.com)提供了一个[Ruby SDK](https://temboo.com/download)，它可以规范对 100 多个 API 的访问。例如，添加 MailChimp 订阅者如下所示：

```
listSubscribe = MailChimp::ListSubscribe.new(temboo_session)

listSubscribeInputs = listSubscribeChoreo.new_input_set()

listSubscribeInputs.set_credential("myMailchimpAccount")

listSubscribeInputs.set_ListId("myMailingList")
listSubscribeInputs.set_EmailAddress("foo@example.com")

listSubscribeResults = listSubscribe.execute(listSubscribeInputs) 
```

如果您认为您将在其他项目中重新使用 MailChimp，或者尝试以类似的方式集成其他 API，请查看它。

您可以在此处找到 MailChimp 方法和文档、可自定义的代码片段和实时示例：[https ://www.temboo.com/library/Library/MailChimp/](https://www.temboo.com/library/Library/MailChimp/)

（完全披露：我为 Temboo 工作。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:54:27.317

您可以使用 gem gibbon [https://github.com/amro/gibbon](https://github.com/amro/gibbon)与 mailchimp 进行交互。您可以获取列表、活动、订阅列表的电子邮件等。

# jquery-mobile - jqm滑块停止事件未触发

> ID：15465652
> 
> 赞同：1
> 
> 时间：2013-03-17T20:12:59.080
> 
> 标签：jquery-mobile, slider

我正在尝试构建一个带有切换/翻转滑块的 JQM 页面，该滑块根据滑块位置显示/隐藏 txt 框。请参阅 JSfiddle[测试页面](http://jsfiddle.net/GlynLewis/aYdua/)。

HTML -

```
<div data-role="page">
<div data-role="header" data-theme="b">
    <label>JQM Slider Toggle test</label>
</div>
<div data-role="container">
    <div data-role="fieldcontain">
        <label for="OnFront">Device Location:</label>
        <select name="OnFront" id="OnFront" data-role="slider" data-theme="b">
            <option value="true">Front</option>
            <option value="false">Rear</option>
        </select>
    </div>
    <div id="DeviceOnFront">
        <div data-role="fieldcontain">
            <label for="FrontPosId">Front Position</label>
            <input type="text" id="FrontPosId" class="input_txt"></input>
        </div>
    </div>
    <div id="DeviceOnRear" hidden="hidden">
        <div data-role="fieldcontain">
            <label for="RearPosId">Rear Position</label>
            <input type="text" id="RearPosId" class="input_txt"></input>
        </div>
    </div>
</div>
<div data-role="footer" data-theme="b">
    <label>Glyn Lewis</label>
</div> 
```

JS-

```
$('div[data-role="page"]').bind('pageinit', function () {

// debug test to see if events are firing ???
 $("#OnFront").on("start", function () {
     alert("User has started sliding my-slider!");
 });

$("#OnFront").on("stop", function (event) {
     var value = event.target.value;
     alert("User has finished sliding my slider, its value is: " + value);
 });

 // code for changing which txt box is shown
 // based on toggle/flip switch
 $("#OnFront").on("stop", function (event) {
     var value = event.target.value;
     if (value == true) {
         $("#DeviceOnFront").show();
         $("#DeviceOnRear").hide();
     } else {
         $("#DeviceOnFront").hide();
         $("#DeviceOnRear").show();
     };
 }); 
```

};

我无法触发滑块“停止”事件？？

任何指点将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:02:09.487

这是根据您的示例制作的工作解决方案：http: [//jsfiddle.net/Gajotres/AWyXq/](http://jsfiddle.net/Gajotres/AWyXq/)

你几乎没有错误。事件sliderstop 和sliderstart 不存在：

```
 $("#OnFront").on("sliderstart", function () {
     alert("User has started sliding my-slider!");
 }); 
```

它们的正确名称是**slidestart**和**slidestop**：

```
$('#OnFront').on('slidestart', function(){    
     console.log('Start');
}); 
```

# c++ - 输入流与 C++ 中的 getline

> ID：15465653
> 
> 赞同：0
> 
> 时间：2013-03-17T20:13:01.790
> 
> 标签：c++

我有一个字符数组`char input[11];`。我有一个循环：

```
do {
  is >> input;      // is is an input stream defined by istream& is
} while (something)
// works fine

do {
  is.getline(input, 11);
} while (something)
/* i enter 10 digits and press enter, cursor still blinks,
i enter another value and finally it proceeds to the next piece of code */ 
```

两者有什么区别，为什么一个读入所有 11 个字符（10 个数字 + 回车）而另一个悬空？

# python - Python中的闭包——一个例子

> ID：15465656
> 
> 赞同：0
> 
> 时间：2013-03-17T20:13:27.127
> 
> 标签：python, closures

我在一个循环中多次执行一个动作，想知道我走了多远。我正在尝试制作一个进度报告功能，它应该像这样：

```
def make_progress_report(n):
    i = 0
    def progress_report():
        i = i + 1
        if i % n == 0:
            print i
    return progress_report

pr = make_progress_report(2)
pr()
pr()  # 2
pr()
pr()  # 4 
```

此代码不起作用。具体来说，我得到一个`UnboundLocalError`for `i`。我应该如何修改它以使其正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T21:22:34.120

这里有 3 个选项：

1.  为您的计数器使用列表：

    ```
    def make_progress_report(n):
        i = [0]
        def progress_report():
            i[0] = i[0] + 1
            if i[0] % n == 0:
                print i[0]
        return progress_report 
    ```

2.  使用 itertools.count 跟踪您的计数器：

    ```
    from itertools import count
    def make_progress_report(n):
        i = count(1)
        def progress_report():
            cur = i.next()
            if cur % n == 0:
                print cur
        return progress_report 
    ```

3.  使用*nonlocal*作为您的计数器（仅限 Python 3+！）：

    ```
    def make_progress_report(n):
        i = 0
        def progress_report():
            nonlocal i
            i = i + 1
            if i % n == 0:
                print i
        return progress_report 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T21:17:03.563

您可以考虑使用生成器：

```
def progress_report(n):
    i = 0
    while 1:
        i = i+1
        if i % n == 0:
            print i
        yield # continue from here next time

pr = progress_report(2)

next(pr)
next(pr)
next(pr)
next(pr) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T21:01:08.097

再看看你是如何定义你的闭包的。定义闭包时应该传入 n ......举个例子：

```
#!/usr/env python
def progressReportGenerator(n):
    def returnProgress(x):
        if x%n == 0:
            print "progress: %i" % x
    return returnProgress

complete = False
i = 0 # counter
n = 2 # we want a progress report every 2 steps

getProgress = progressReportGenerator(n)

while not complete:
    i+=1 # increment step counter

    # your task code goes here..

    getProgress(i) # how are we going?

    if i == 20: # stop at some arbtirary point... 
        complete = True
        print "task completed" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T21:22:21.450

因此，progress_report 不会关闭变量 i。你可以像这样检查它......

```
>>> def make_progress_report(n):
...     i=0
...     def progress_report():
...             i += 1
...             if i % n == 0:
...                     print i
...     return progress_report
...
>>> pr = make_progress_report(2)
>>> pr.__closure__
(<cell at 0x1004a5be8: int object at 0x100311ae0>,)
>>> pr.__closure__[0].cell_contents
2 
```

您会注意到 pr 的关闭中只有一项。那是您最初为 传递的值`n`。该`i`值不是闭包的一部分，因此在函数定义之外，`i`不再在范围内。

这是关于 Python 闭包的一个很好的讨论：http: [//www.shutupandship.com/2012/01/python-closures-explained.html](http://www.shutupandship.com/2012/01/python-closures-explained.html)

# java - 生成 3 个从 1 到 25 的随机数？（爪哇）

> ID：15465659
> 
> 赞同：0
> 
> 时间：2013-03-17T20:13:38.847
> 
> 标签：java, arrays, random, unique

所以，我正在尝试生成一个长度为 3 的数组，其中包含从 1 到 25 的随机*唯一*数字。我不明白为什么我的代码不起作用，非常感谢一些帮助！

```
public void generateRandom() {
    for(int j=0; j<3; j++) {
        dots[j] = (int) (Math.random()*(col*row)+1);
        System.out.println(dots[j]);
        for(int i=j; i>0; i--) {
            if(dots[j]==dots[j-1]) {
                generateRandom();
            }
        }
    }
} 
```

`dots[]`是我试图存储 3 个唯一随机数的数组。顺便说一句，`col*row == 25`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T20:21:08.070

这是一个有点不同的方法。它依赖于创建一个具有指定值集的 ArrayList，然后对该列表进行混洗。一旦列表被打乱，您可以根据打乱列表中的前三个元素创建一个数组。

```
public static void main(String[] args) {
    List<Integer> list = new ArrayList<Integer>();
    for(int i = 0; i < 26; i++){
        list.add(i);
    }

    Collections.shuffle(list);
    Integer[] randomArray = list.subList(0, 3).toArray(new Integer[3]);

    for(Integer num:randomArray){
        System.out.println(num);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T20:33:13.513

```
for(int j=0;j<3;j++)
    dots[j]=(int)(Math.random()*Integer.MAX_VALUE)%25+1; 
```

由于您`Math.random`无论如何都是一个随机数，因此乘以`Integer.MAX_VALUE`不会影响随机性。另外，如果您想解释为什么您的代码不起作用，那是因为如果数字相对较小，例如在 下`0.001`，则乘法时通过获取 int 将得到 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T20:16:06.050

每次 generateRandom 调用自己时，它都会从头开始使用第一个随机数，而不是为当前位置选择一个新的随机数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T20:22:13.387

这是方法

```
public void generateRandom() {
    for(int j=0; j<3; j++) {
      boolean f;
      do { 
        dots[j] = (int) (Math.random()*(col*row)+1);
        f = false;
        for(int i=j-1; i>=0; i--) {
            if(dots[i]==dots[j]) {
              f = true;
              break;
            }
        }
        if (!f)
          System.out.println(dots[j]);
      } while (f);
   }
} 
```

它重复生成数字，直到找不到重复项。

# imagemagick - 将可变宽度的标签附加到具有固定大小的标签

> ID：15465662
> 
> 赞同：0
> 
> 时间：2013-03-17T20:13:54.787
> 
> 标签：imagemagick

我正在尝试使用 Imagemagick 命令创建一个单字母文本标签，给它一个阴影，将它放在一个固定大小的画布区域的左侧，然后将它附加到另一个固定高度但未知宽度的标签。所以，想要的结果是最终透明PNG左侧的一个字母，另一个标签设置在原点右侧约100px，例如这个模型：

![所需输出的样机](../Images/8dde7b8f53e41a3ee8d221a185da6b09.png)

我在以下命令中完成了所有这些工作，*除了*阴影文本标签不在固定大小的框中（应该是 100 像素 x 25 像素）。结果如下：

![实际结果](../Images/36f730a2bdd88e98105ee70b7dc19453.png)

我*认为*我需要做的是以某种方式关闭 -trim 选项，但我不知道该怎么做。+trim 不是一个有效的选项，并且 +repage 不会这样做。

```
convert \
\( -background transparent \
   \( -gravity west -fill lavender -font Constantia.ttf \
      -pointsize 12 label:'x' -trim \
      \( +clone -background black -shadow 100x3+0+0 -channel A -level 0,50% \
         +channel \) \
      +swap +repage -gravity center -composite \) \
-size 100x25 -gravity west \) \
   \( -size x25 -fill black -background transparent -font MyriadPro-Semibold.otf \
      -pointsize 15 label:'Long legend for x' -gravity west \) \
   +append -strip legend_test.png 
```

（修剪选项需要将高度降低到 25 像素——否则阴影操作会产生太大的垂直延伸。编辑：我想我上面错了——即使没有 -trim 命令中的任何位置，我希望的固定尺寸图像不起作用。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:48:41.430

嗯，看起来 ImageMagick 的社区已经不多了。我张贴到 ImageMagick phpBB 板上，并能够整理出一个答案。简要地：

*   -trim 选项不是在调用后影响每个图像的选项。相反，它本质上是一个立即执行的命令。
*   -extent 选项可用于将图像增大或减小到所需大小。显然，我在原始代码中使用的 -size 命令只能用于设置图像的初始大小，而不是更改已经存在的图像的大小。

这是最终的工作命令：

```
convert \
\( -background transparent -extent 100x25 -gravity west \
   \( -fill lavender -font Constantia.ttf \
      -pointsize 12 label:'x'  -trim -extent 100x25 -gravity west \
      \( +clone -background black -shadow 100x3+0+0 -channel A -level 0,50% \
         +channel \) \
      +swap +repage -gravity center -composite \) \
-background transparent -extent x25 \) \
   \( -size x25 -fill black -background transparent -font MyriadPro- Semibold.otf \
      -pointsize 15 label:'Long legend for x' -gravity west \) \
   +append -strip legend_test.png 
```

# python - 如何从我创建的列表（v）中提取空文件的数量？

> ID：15465663
> 
> 赞同：0
> 
> 时间：2013-03-17T20:14:03.930
> 
> 标签：python, python-2.7, count, empty-list

代码试图找出哪些文件是空的，哪些文件不是空的，并打印一个文件名列表及其状态（空/非空）。

```
import fnmatch
import os
import pprint

#filenames_dic= {}
v = []

for root, dirnames, filenames in os.walk('P:/data/'):
    for filename in fnmatch.filter(filenames, '*.txt'):

        address=os.path.join(root,filename)
        size= os.path.getsize(address)
        if (size == 0):
            status= ('EMPTY')          

        else:
            status = (size)

        v.append([address,status]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T20:19:05.577

```
number_of_empty_files = len([x[1] for x in v if x[1] == 'EMPTY']) 
```

或者

```
number_of_empty_files = len(filter(lambda x: x[1] == 'EMPTY', v)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T20:28:50.523

如果您想再次遍历列表以获取空文件的数量，那么您可以按照 Ellochka Cannibal 的建议进行操作，尽管如果您只计算文件，那将是相当浪费的。要获得计数，您可以简单地在 if 语句中放置一个计数器变量：

```
c=0
...
for ...
  if (size == 0):
    status = ('EMPTY') 
    c += 1 
```

# c# - C# 虽然 TryParse

> ID：15465664
> 
> 赞同：1
> 
> 时间：2013-03-17T20:14:07.267
> 
> 标签：c#, tryparse

```
char typeClient = ' ';
bool clientValide = false;
while (!clientValide)
{
     Console.WriteLine("\nEntrez le type d'employé (c ou g) : ");
     clientValide = char.TryParse(Console.ReadLine(), out typeClient);
     if (clientValide)
         typeClient = 'c';
} 
```

我想让它不会退出 while 除非字符是 'g' 或 'c' 帮助！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T20:17:57.777

```
string input;
do {
    Console.WriteLine("Entrez le type d'employé (c ou g):");
    input = Console.ReadLine();
} while (input != "c" && input != "g");

char typeClient = input[0]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-17T20:24:32.970

是你用`Console.ReadLine`的吗，用户按或`Enter`后还要按。改为使用以使响应是即时的：`c``g``ReadKey`

```
bool valid = false;
while (!valid)
{
    Console.WriteLine("\nEntrez le type d'employé (c ou g) : ");
    var key = Console.ReadKey();
    switch (char.ToLower(key.KeyChar))
    {
        case 'c':
            // your processing
            valid = true;
            break;
        case 'g':
            // your processing
            valid = true;
            break;
        default:
            Console.WriteLine("Invalid. Please try again.");
            break;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T20:16:46.687

你真的很亲密，我认为这样的事情对你很有效：

```
char typeClient = ' ';
while (typeClient != 'c' && typeClient != 'g')
{
    Console.WriteLine("\nEntrez le type d'employé (c ou g) : ");
    var line = Console.ReadLine();
    if (!string.IsNullOrEmpty(line)) { typeClient = line[0]; }
    else { typeClient = ' '; }
} 
```

基本上，当用户输入某些内容时，它会将输入读入`typeClient`变量，因此循环将继续，直到他们输入`g`or `c`。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2018-08-12T07:53:16.293

您可以`ConsoleKeyInfo`使用`Console.ReadKey()`：

```
 ConsoleKeyInfo keyInfo;
 do {
   Console.WriteLine("\nEntrez le type d'employé (c ou g) : ");
   keyInfo = Console.ReadKey();
 } while (keyInfo.Key != ConsoleKey.C && keyInfo.Key != ConsoleKey.G); 
```

# php - 使用列总和创建图像

> ID：15465666
> 
> 赞同：0
> 
> 时间：2013-03-17T20:14:12.680
> 
> 标签：php, mysql

有人可以解释如何用数字创建图像，我得到这个查询：

```
$sumq = mysql_query("SELECT SUM(count) FROM downloads");
$row1=mysql_fetch_array($sumq); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:19:56.453

您可以使用[图像字符串](http://php.net/manual/fr/function.imagestring.php)：

```
<?php
$text = 42; // whatever your number is

// Create a 100*30 image
$im = imagecreate(100, 30);

// White background and blue text
$bg = imagecolorallocate($im, 255, 255, 255);
$textcolor = imagecolorallocate($im, 0, 0, 255);

// Write the string at the top left
imagestring($im, 5, 0, 0, $text, $textcolor);

// Output the image
header('Content-type: image/png');

imagepng($im);
imagedestroy($im);
?> 
```

# linkedin - 使用 Restsharp 在 LinkedIn 上分享

> ID：15465670
> 
> 赞同：0
> 
> 时间：2013-03-17T20:14:25.677
> 
> 标签：linkedin, restsharp

我很难使用restsharp在linkedin上工作。这是我的代码：

```
 var shareMsg = new
    {
        comment = "Testing out the LinkedIn Share API with JSON",
        content = new
        {
            title = "Test post to LinkedIn",
            submitted_url = "http://www.somewebsite.com",
            submitted_image_url = "http://www.somewebsite.com/image.png"
        },
        visibility = new
        {
            code = "anyone"
        }
    };

    RestClient rc = new RestClient(LinkedInAppInfo.LinkedInBaseApiUrl);
    RestRequest request = new RestRequest(LinkedInAppInfo.SharePostPath, Method.POST);
    request.RequestFormat = DataFormat.Json;
    request.AddParameter("format", "json");
    request.AddBody(shareMsg);
    request.AddParameter("oauth2_access_token", accessToken, ParameterType.GetOrPost);

    RestResponse restResponse = (RestResponse)rc.Execute(request);
    ResponseStatus responseStatus = restResponse.ResponseStatus; 
```

我得到的结果是：

```
{
  "errorCode": 0,
  "message": "Couldn't parse share document: error: Unexpected end of file after null",
  "requestId": "06ZU78FUNW",
  "status": 400,
  "timestamp": 1363551953855
} 
```

关于我做错了什么有什么想法吗？

# git - 将 SVN 库添加到 git 存储库。提示？提示？我需要为它制作一个子模块吗？

> ID：15465673
> 
> 赞同：0
> 
> 时间：2013-03-17T20:14:51.407
> 
> 标签：git, svn, version-control, repository, git-submodules

我正在制作一个位于 git 存储库中的 iOS 应用程序。我想添加 Google Objective C 客户端库，但它是通过 SVN 存储的。将 SVN 项目添加到 git 存储库的推荐方法是什么？我需要为它制作一个子模块还是没有必要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:55:45.927

首先看一下这个：

[是否可以将 subversion 存储库作为 git 子模块？](https://stackoverflow.com/questions/465042/is-it-possible-to-have-a-subversion-repository-as-a-git-submodule)

此外，您可以考虑简单的路线，只需将您想要的修订版的源代码复制到您自己的存储库中。有些人可能不会考虑这种“最佳实践”，但会使维护变得简单。

# python - QListView中自定义IndexWidget的平滑延迟加载和卸载

> ID：15465677
> 
> 赞同：4
> 
> 时间：2013-03-17T20:15:15.307
> 
> 标签：python, qt, user-interface, pyqt, qtableview

我正在编写一个应用程序，它使用自定义 QWidget 代替 PyQt 中的常规列表项或委托。我已经按照[QWidgetDelegate 的 paint() 方法中的 Render QWidget 中的答案为 QListView](https://stackoverflow.com/questions/6452838/render-qwidget-in-paint-method-of-qwidgetdelegate-for-a-qlistview)实现了带有自定义小部件的 QTableModel。生成的示例代码位于此问题的底部。实现中有一些我不知道如何解决的问题：

1.  不显示时卸载项目。我计划为一个包含数千个条目的列表构建我的应用程序，但我无法在内存中保留那么多小部件。
2.  加载尚未在视图中的项目或至少异步加载它们。小部件需要一些时间来呈现，下面的示例代码在滚动列表时有一些明显的滞后。
3.  在下面的实现中滚动列表时，加载时每个新加载的按钮都会在 QListView 的左上角显示一瞬间，然后弹回原位。怎么能避免呢？

--

```
import sys
from PyQt4 import QtGui, QtCore
from PyQt4.QtCore import Qt

class TestListModel(QtCore.QAbstractListModel):
    def __init__(self, parent=None):
        QtCore.QAbstractListModel.__init__(self, parent)
        self.list = parent

    def rowCount(self, index):
        return 1000

    def data(self, index, role):
        if role == Qt.DisplayRole:
            if not self.list.indexWidget(index):
                button = QtGui.QPushButton("This is item #%s" % index.row())
                self.list.setIndexWidget(index, button)
            return QtCore.QVariant()

        if role == Qt.SizeHintRole:
            return QtCore.QSize(100, 50)

    def columnCount(self, index):
        pass

def main():
    app = QtGui.QApplication(sys.argv)

    window = QtGui.QWidget()

    list = QtGui.QListView()
    model = TestListModel(list)

    list.setModel(model)
    list.setVerticalScrollMode(QtGui.QAbstractItemView.ScrollPerPixel)

    layout = QtGui.QVBoxLayout(window)
    layout.addWidget(list)

    window.setLayout(layout)
    window.show()

    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:20:52.037

您可以使用代理模型来避免加载所有小部件。代理模型可以使用视口和小部件的高度来计算行数。他可以计算带有滚动条值的项目的索引。

这是一个不稳定的解决方案，但它应该可以工作。

如果你修改你的 data() 方法：

```
button = QtGui.QPushButton("This is item #%s" % index.row())
self.list.setIndexWidget(index, button)
button.setVisible(False) 
```

在将它们移动到它们的位置之前，这些项目不会显示（这对我有用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:11:44.067

[`QTableView`](http://doc-snapshot.qt-project.org/4.8/qtableview.html)仅向模型请求其视口中项目的数据，因此数据的大小并不会真正影响速度。由于您已经进行了子类[`QAbstractListModel`](http://doc-snapshot.qt-project.org/4.8/qabstractlistmodel.html)化，因此您可以重新实现它以在初始化时仅返回一小组行，并修改其[`canFetchMore`](http://doc-snapshot.qt-project.org/4.8/qabstractitemview.html#canfetchmore)方法以`True`在未显示总记录量时返回。尽管根据数据的大小，您可能需要考虑创建一个数据库并使用[`QSqlQueryModel`](http://doc-snapshot.qt-project.org/4.8/qsqlquerymodel.html)or[`QSqlTableModel`](http://doc-snapshot.qt-project.org/4.8/qsqltablemodel.html)代替，它们都以 256 个为一组进行延迟加载。

为了获得更流畅的项目负载，您可以连接到[`valueChanged`](http://doc-snapshot.qt-project.org/4.8/qabstractslider.html#valuechanged)您的信号，[`QTableView.verticalScrollBar()`](http://doc-snapshot.qt-project.org/4.8/qabstractscrollarea.html#verticalscrollbar)并根据它之间的差异[`value`](http://doc-snapshot.qt-project.org/4.8/qtableview.html#value)和[`maximum`](http://doc-snapshot.qt-project.org/4.8/qtableview.html#maximum)有类似的东西：

```
while xCondition:
   if self.model.canFetchMore():
      self.model.fetchMore() 
```

使用[`setIndexWidget`](http://doc-snapshot.qt-project.org/4.8/qtableview.html#setindexwidget)会大大减慢您的应用程序。您可以使用 a[`QItemDelegate`](http://doc-snapshot.qt-project.org/4.8/qitemdelegate.html)并自定义它的[`paint`](http://doc-snapshot.qt-project.org/4.8/qwidget.html#paint)方法来显示具有以下内容的按钮：

```
class MyItemDelegate(QtGui.QItemDelegate):
    def __init__(self, parent=None):
        super(MyItemDelegate, self).__init__(parent)

    def paint(self, painter, option, index):
        text = index.model().data(index, QtCore.Qt.DisplayRole).toString()

        pushButton = QtGui.QPushButton()
        pushButton.setText(text)
        pushButton.setGeometry(option.rect)

        painter.save()
        painter.translate(option.rect.x(), option.rect.y())

        pushButton.render(painter)

        painter.restore() 
```

并设置它：

```
myView.setItemDelegateForColumn(columnNumber, myItemDelegate) 
```

# javascript - 添加一个 onchange 事件来选择

> ID：15465679
> 
> 赞同：4
> 
> 时间：2013-03-17T20:15:18.967
> 
> 标签：javascript, select, option, onchange

我有以下js代码：

```
function createConBox() {
   var charDiv = document.getElementById("characterList");  // reference to "characterList" div
   header = document.createElement("p");  // creates the <p> tag
   charDiv.appendChild(header);  // adds the <p> tag to the parent node
   title = document.createTextNode("Show Only Lines By:");  // creates the text string
   header.appendChild(title); // adds the text string to the parent node

   // create select box and add elements
   selectBox = document.createElement("select");   
   selectBox.setAttribute("id", "cList");
   charDiv.appendChild(selectBox);

   charNames = uniqueElemText("h3");   // array of character names
   newOption = document.createElement("option");
   selectBox.appendChild(newOption);
   newOptionTitle = document.createTextNode("Show All Lines");
   newOption.appendChild(newOptionTitle);
   for (i = 0; i < charNames.length; i++) {
      newOption = document.createElement("option");
      selectBox.appendChild(newOption);
      newOptionTitle = document.createTextNode(charNames[i]);
      newOption.appendChild(newOptionTitle);
   }

}

function showLines() {
   alert("The Box has been changed");
} 
```

每次更改框中的选项时，我都希望它调用“showLines()”。但是，每次我尝试实现一个事件时，我只能在页面加载时触发它，之后再也不会触发它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T20:20:44.683

`selectBox.onchange = showLines;`应该可以解决您的问题。

在某些浏览器中，只有在模糊选择框后才会触发 onchange。为了克服这个，你可以使用`onclick`而不是`onchange`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T20:19:59.023

我的猜测是你正在这样做：

```
selectBox.onchange = showLines(); 
```

如果是这种情况，只需删除`()`：

```
selectBox.onchange = showLines; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-30T13:20:21.813

当我动态传递 id 以防万一时，我会做什么：

```
var selectcell = tablerow.insertCell(1);
var selectelmt = document.createElement('select');
selectelmt.name = 'Select';
selectelmt.value = 'select';
selectelmt.classList = 'form-control input-sm cobclass';
selectelmt.onchange= onselectchange(i);
selectelmt.id = 'cobselect' + i;
selectelmt.options[0] = new Option('select');
selectcell.appendChild(selectelmt);
// ddrbind(i);
show();
i++;` 
```

# java - 使用 Java 通过 GSM 调制解调器转发文本消息

> ID：15465683
> 
> 赞同：0
> 
> 时间：2013-03-17T20:15:50.167
> 
> 标签：java, sms, gsm, modem, serial-communication

我正在使用`Java CommV3`驱动程序将 GSM 调制解调器（华为 E173）与 Java 应用程序连接起来。我正在尝试将文本消息转发到 mySQL 数据库中存在的多个号码。我总是收到一个`PortInUseException`. 但是，使用相同的代码手动发送和接收消息完全可以正常工作。我尝试在消息之间（在循环中）使用长达 15 秒的延迟，但我仍然面临同样的问题。

我在这里想念什么？我们是否有用于将消息转发到多个号码的 AT 命令？是否有我应该注意的特殊延迟？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T00:26:06.240

虽然这是一个老问题，但我也许可以提供一个建议。

如果您使用多线程方法进行发送和接收，则必须确保这些线程中的每一个都可以独占访问资源（在本例中为您的 GSM 调制解调器）。因此，请确保在 RX/TX 期间关闭与串行端口的连接，反之亦然。

如果您可以发布代码片段，我可以为您提供更多建议。

# android - Android onUpgrade 数据库调用 endTransaction 导致非法状态异常

> ID：15465688
> 
> 赞同：4
> 
> 时间：2013-03-17T20:16:02.460
> 
> 标签：android

前段时间我发布了这个问题： [Android onUpgrade Database 导致 IllegalStateException](https://stackoverflow.com/questions/13482781/android-onupgrade-database-causing-illegalstateexception)

灵魂是在数据库升级时停止并重新启动事务：

```
public void onUpgrade(SQLiteDatabase db,
        int oldVersion, int newVersion) {

db.endTransaction();
//updgading the db
db.beginTransaction();
} 
```

这在我的测试系统上工作，但现在我从我的生活系统中获得了永久的错误跟踪。似乎在大多数系统上它都在工作，但不是在一些系统上。

```
java.lang.RuntimeException: An error occured while executing doInBackground()
at android.os.AsyncTask$3.done(AsyncTask.java:278)
at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
at java.util.concurrent.FutureTask.run(FutureTask.java:137)
at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
at java.lang.Thread.run(Thread.java:856)
Caused by: java.lang.IllegalStateException: no transaction pending
at net.sqlcipher.database.SQLiteDatabase.endTransaction(SourceFile:640)
at net.sqlcipher.database.SQLiteOpenHelper.getWritableDatabase(SourceFile:128)
at com.myApp.j.q(SourceFile:339) ... 
```

这里有什么问题？谢谢塔塔

编辑：这是发生崩溃的地方。SQLiteOpenHelper.getWritableDatabase(SourceFile:128)

```
int version = db.getVersion();
            if (version != mNewVersion) {
                db.beginTransaction();
                try {
                    if (version == 0) {
                        onCreate(db);
                    } else {
                        onUpgrade(db, version, mNewVersion);
                    }
                    db.setVersion(mNewVersion);
                    db.setTransactionSuccessful();
                } finally {
                    db.endTransaction(); //L. 128 crash
                }
            } 
```

# c++ - c++自定义按钮图标

> ID：15465690
> 
> 赞同：1
> 
> 时间：2013-03-17T20:16:07.513
> 
> 标签：c++, winapi

我想制作一个动态宽度的按钮。这是我的代码：

```
CreateWindowEx(BS_PUSHBUTTON, "BUTTON", "OK",
            WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON,
            50, 220, 100, 24, hwnd,
            (HMENU)ID_BUTTON,
            GetModuleHandle(NULL),
            0); 
```

但是，如果我将标签“OK”更改为“SOMETHING LONGER”，则按钮不够宽。如何设置动态宽度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T20:23:41.547

试试[Button_GetIdealSize 宏](http://msdn.microsoft.com/en-us/library/bb761851%28VS.85%29.aspx)。

* * *

好的，大卫，下次请提供更多信息，把你不明白的地方说出来，因为从你评论中的问题我可以推断你不仅不熟悉 Win API，而且你对 C/C++ 编程也很陌生一般来说。

```
HWND buttonHandle = CreateWindowEx(BS_PUSHBUTTON, "BUTTON", "OK",
                                   WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON,
                                   50, 220, 100, 24,
                                   hwnd,
                                   (HMENU)ID_BUTTON,
                                   GetModuleHandle(NULL),
                                   0);
SIZE size;

if (!Button_GetIdealSize(buttonHandle, &size)) {
  // Call of `Button_GetIdealSize` failed, do proper error handling here.
  // For that you have various options:
  // 1\. Exit current scope and return error code;
  // 2\. Throw an exception;
  // 3\. Terminate execution of your application and print an error message.
  // Of course these options can be mixed.
  // If you don't understand what I'm talking about here, then either skip this
  // check or start reading books on software development with C/C++.
}

// At this point `size` variable was filled with proper dimensions.
// Now we can use it to actually resize our button...

if (!MoveWindow(buttonHandle, 50, 220, (int)size.cx, (int)size.cy, TRUE)) {
  // Call of `MoveWindow` failed, do proper error handling here, again.
}

// We are done! 
```

**注意**：您的问题的标题不正确。C++ 与按钮和 Win API 无关，顺便说一下，这是纯 C。更好的标题是：**Win API：如何正确调整按钮大小以适应其内容？**

# c# - 使用 C# 读取 xml

> ID：15465692
> 
> 赞同：-3
> 
> 时间：2013-03-17T20:16:29.300
> 
> 标签：c#, xml

我需要解析它以获取 php 中的元素我只使用简单的 xml 文件，但是可以通过 c#

```
 <answers>
<answer ID="START">
<text>VVLV?</text>
<id>0</id>
<responses>

<response id="1">
<key>!1</key>
<product> 123123 </product>
<command>goto ANSWER_1</command>
</response>

<response id="2">
<key>!2</key>
<product> 213sad </product>
<command>goto ANSWER_2</command>
</response>

<response id="3">
<key>!3</key>
<product>dfbdfgsdf </product>
<command>goto ANSWER_3</command>

</response>

</responses>

</answer>

<answer ID="ANSWER_1">
<text>dfbdfgb?</text>
<id>1</id>
<responses>

<response id="1">
<key>!1</key>
<product> 123 </product>
<command>check_product 1 goto ANSWER_9 ANSWER_11</command>
</response>

<response id="2">
<key>!2</key>
<product> 321 </product>
<command>check_product 1 goto ANSWER_9 ANSWER_12</command>
</response>

<response id="3">
<key>!3</key>
<product> asd 3 </product>
<command>check_product 1 goto ANSWER_9 ANSWER_11</command>

</response>

</responses>

</answer>

<answer ID="ANSWER_2">
<text>asd?</text>
<id>2</id>
<responses>

<response id="1">
<key>!1</key>
<product> ads </product>
<command>goto ANSWER_4</command>
</response>

<response id="2">
<key>!2</key>
<product> asdasd </product>
<command>goto ANSWРІER_2</command>
</response>

<response id="3">
<key>!3</key>
<product> dscdsc</product>
<command>goto ANSWER_3</command>

</response>

</responses>

</answer>

<answer ID="ANSWER_3">
<text>asdasd</text>
<password>1</password>
<id>3</id>
<responses>

<response id="1">
<key>!1</key>
<product> asdasd </product>
<command>goto ANSWER_0</command>
</response>

<response id="2">
<key>!2</key>
<product>  </product>
<command>goto ANSWER_2</command>
</response>

<response id="3">
<key>!3</key>
<product> Testqdawd 3 </product>
<command>goto ANSWER_3</command>

</response>

</responses>

</answer> 
```

我如何在 C# 中解析它，例如我如何在 ID="START"->responses->response with id 3->key 的回答中获得 elent 的价值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:25:06.853

您应该阅读有关[LINQ to XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)的信息。在问任何问题之前，您绝对应该这样做！

使用`XDocument.Load`方法，您可以轻松地将 XML 加载到`XDocument`对象中：

```
var dox = XDocument.Load("Input.txt"); 
```

然后使用标准 LINQ to XML 语法对其进行查询：

```
var response = (from a in dox.Root.Elements("answer")
                where (string)a.Attribute("ID") == "ANSWER_1"
                from r in a.Element("responses").Elements("response")
                where (int)r.Attribute("id") == 1
                select r).FirstOrDefault(); 
```

或 XPath 选择器：

```
var response = dox.XPathSelectElement("answers/answer[@ID='ANSWER_1']/responses/response[@id='1']"); 
```

# ios - 无法移动 UIImageView

> ID：15465694
> 
> 赞同：1
> 
> 时间：2013-03-17T20:16:32.757
> 
> 标签：ios, xcode, uiimageview, interface-builder, uistoryboard

在 XCode iPad 应用程序中，我使用了一个带有视图和内部 UIImageView 的故事板，在 Interface Builder 中定义。如果我尝试使用 SetFrame 命令 [myImageView setFrame:CgRectMake...] 更改 UIImageView 的位置，则图像不会更改屏幕上的位置。setFrame 命令是否足够？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T20:28:39.860

我会检查一个清单，看看设置是否良好：

1.  **检查您的 IBOutlet** - 如果您的 UIImageView 没有连接，那么您尝试调用它的任何操作都不会起作用。
2.  **检查自动调整大小掩码**- 如果这是一种非平凡的布局，其中一些视图相互嵌套，则可能会出现意想不到的结果。
3.  **确保您没有使用自动布局**- 这可以通过选择故事板本身并确保文件检查器 (cmd+alt+1) 中的“使用自动布局”复选框未勾选（默认勾选）来完成。

![在此处输入图像描述](../Images/a8d03156497b402056eade5738d5847f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T23:16:26.680

我不确定，但 UIImageView 是否需要在更改其位置后重新绘制，因为这在编程中经常出现？

# php - 命中计数器 sql 错误

> ID：15465711
> 
> 赞同：0
> 
> 时间：2013-03-17T20:17:37.823
> 
> 标签：php, mysql, sql, arrays

我试图让这个命中计数器与 pdo 一起工作，但它一直在抱怨 Parse 错误：

> 语法错误，意外的 '('，第 37 行中需要标识符 (T_STRING) 或变量 (T_VARIABLE) 或 '{' 或 '$'。

我不确定它是否是索引，因为我的数据库的名称是 group2，带有一个表计数器和一个名为 counter 的列。我也尝试使用 mysql 程序方法，但我对这两种方法都不够熟悉，而且我使用的每个指南仍然出现这些错误。我究竟做错了什么。

*编辑新代码：

```
<?php
try
{
$dsn = "mysql:host=xxxxxxxxxxxxxx"; // Missing semi colon (;)
$conn = new PDO($dsn,'group2', 'xxxxxxxxxxxx');  //connection
$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
}
catch(PDOexception $e)
{
Print($e->getMessage());
Exit;
}

$sql = ("SELECT * FROM counter");
$conn->query($sql);
$row = $conn->query($sql);
$counter =$row['counter'];

if(empty($counter))
{

$counter = 1; 
$insert = $conn->query("INSERT INTO counter VALUES('$counter')");  
}

$add= $counter+1;
$insertNew = $conn->("UPDATE counter SET counter = '$add'"); 
echo $counter;

?>

<?php $conn = null; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:51:57.223

There is a *lot* wrong with your code.

1.  There is no function `mysqle_select_db()`. There is one called `mysql_select_db()`, but since you're using PDO, you probably want to use `$conn->query('use group2')`, if at all.
2.  You are running a query with a variable that's not set yet. `$conn->query($sql);` just two lines further down won't work.
3.  Square brackets are not valid in table names, neither is `+` a valid query column. `SELECT + FROM counter[counter]` just won't work. You probably meant to do `SELECT * FROM counter`.
4.  Your query won't return *anything*, but I'm pretty sure it won't return a `counter[counter]` column. You probably meant to just do `$counter=$row['counter'];` (yes you can trick MySQL into using square brackets in column names, but that's most probably not whats intended here)
5.  Last but not least, your UPDATE query is not only issued twice (once using PDO, once though the mysql_* lib), but also wrong. It should most probably read `$insertNew = $conn->("UPDATE counter SET counter = '$add'");`, assuming that your `counter` table has a `counter` column.

Edit:

With a few minor details, your script looks okay.

1.  you probably shouldn't post your database password.
2.  One of your database queries is not doing much: `$conn->query($sql);` - you do that again on the next line.
3.  Your counter will start with 2 instead of 1, because you're updating after you inserted (the UPDATE is not in the `else` part of your `if` statement, so it will run in all cases)

If it still doesn't work, you should try and put echo/print_r/var_dump statements into your code to see where it is breaking - e.g.:

`print_r($conn->errorInfo());` will give you information on errors inside PDO. `echo "$counter";` will give you the result of your select.

print_r($conn->errorInfo());

# android - ActionBarSherlock - 不显示前 ICS 的分隔线

> ID：15465712
> 
> 赞同：0
> 
> 时间：2013-03-17T20:17:38.040
> 
> 标签：android, xml, android-layout, android-actionbar, actionbarsherlock

我正在尝试通过调整[此处](https://plus.google.com/113735310430199015092/posts/R49wVvcDoEW)找到的代码，使用 ActionBarSherlock 在我的操作栏中实现取消/完成布局。

在 ICS 或 Jelly Bean（ABS 将使用本机 ActionBar）上，一切都按预期工作。在 Gingerbread (API 10) 上进行测试时，一切正常，只是按钮之间没有出现分隔线：

![姜饼缺失分频器](../Images/e57d15f0756218ad830ca88807b94654.png)

我起初认为这是分隔线图像的问题，但即使使用如下代码：

```
android:divider="#f00" 
```

Gingerbread 上没有出现分隔线，但正如预期的那样，在 ICS/JB 上出现了一个鲜红色的分隔线。显然 ActionBarSherlock 3.5+ 使用原生行为来显示分隔线，那么为什么在使用 ABS 时没有出现分隔线，而在使用原生 ActionBar 时却出现了？

这是我的 XML：

**actionbar_custom_view_done_discard.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:divider="?attr/dividerVertical"
    android:dividerPadding="12dp"
    android:orientation="horizontal"
    android:showDividers="middle" >

    <include layout="@layout/actionbar_cancel_button" />

    <include layout="@layout/actionbar_done_button" />

</LinearLayout> 
```

**actionbar_cancel_button.xml**

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/actionbar_cancel"
    style="?actionButtonStyle"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:background="@drawable/abs__item_background_holo_light" >

    <TextView
        style="?actionBarTabTextStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:drawableLeft="@drawable/ic_action_cancel"
        android:drawablePadding="8dp"
        android:gravity="center_vertical"
        android:paddingRight="20dp"
        android:text="@string/action_cancel" />

</FrameLayout> 
```

**actionbar_done_button.xml**与上面完全相同，但名称、文本和图标发生了变化。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T20:48:09.203

分频器`LinearLayout`是 API 11+。这与 ActionBarSherlock 无关。

您可以简单地在两个元素之间添加一个带有背景的 1dp 视图来解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T12:47:21.247

这是我发现自定义`ActionBar`布局的最佳实现：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<include layout="@layout/actionbar_cancel_button" />

<!-- View below is used because the android:divider attribute only works on API 11+. This is identical in appearance to that. -->

<View
    style="@style/Widget.Sherlock.Light.ActionButton"
    android:layout_width="1dp"
    android:layout_height="match_parent"
    android:layout_marginBottom="12dp"
    android:layout_marginTop="12dp"
    android:background="@drawable/abs__list_divider_holo_light" />

<include layout="@layout/actionbar_done_button" /> 
```

# java - 如何从 Servlet 2 调用 Javascript 的函数

> ID：15465718
> 
> 赞同：0
> 
> 时间：2013-03-17T20:18:17.277
> 
> 标签：java, javascript, jsp, servlets

我需要使用 JavaScript 调用“datosGPS”的函数，该函数在 JPS 中，但我需要从 Servlet 调用“ServletPeticiones”中调用它我需要 Servlet 调用该函数而无需用户干预 是否可以实现?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:25:34.877

您可以打印您的 Java Script 代码，例如，

`response.getOutputStream().println("[javascript code]");`

在浏览器中。

Servlet 运行在 Web 服务器上，而 JS 运行在 Web 浏览器上。不可能从 Servlet 调用 JS。

# javascript - 如何在 Extjs 4.1 中制作可滚动的标签面板？

> ID：15465725
> 
> 赞同：1
> 
> 时间：2013-03-17T20:18:45.843
> 
> 标签：javascript, extjs, extjs4

我在窗口内创建了一个标签面板。我可以`autoScroll:true`与窗口一起使用，但不能与标签面板一起使用。我需要它与 tabpanel 一起工作，所以当我向下滚动时，选项卡列表不会上升和消失。

标签面板：

```
 var   sections = Ext.createWidget('tabpanel', {
    id: 'mytabpanel',
    title: 'UM',
    activeTab: 3,
    closable: true,
    autoScroll: true, // not working
   //defaults:{ autoScroll:true }, //not working

    items: [
    { 
```

窗口（标签面板容器）：

```
var window = new Ext.Window({
            id: 'item1',
            closable: true,
            floating: true,
            collapsible: true,
            width: 900,
            height: 600,
            autoScroll: true, //working
        items  : mytabpanel

}).show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T03:57:31.390

您应该始终指定父容器的布局。在这种情况下，您的窗口组件应该有`layout: 'fit'`配置。

浏览示例以了解在 ExtJS 中是如何完成的。对于刚入门的人来说，这些指南是必读的。

编辑：关于您关于内部滚动问题的相关问题：看看这个从您的原始帖子更改的小提琴 - [http://jsfiddle.net/REtRQ/3/](http://jsfiddle.net/REtRQ/3/)它在窗口中显示了嵌套的选项卡面板。请在`Ext.define`实际使用之前查看用于定义组件的方法的使用。这允许您清理代码分离并且不会强制您使用全局变量。注意一切都是如何自动命名空间的。

# java - Java - 在 Web 浏览器中显示 HttpResponse 的内容

> ID：15465728
> 
> 赞同：2
> 
> 时间：2013-03-17T20:19:10.777
> 
> 标签：java, http, post, browser, apache-commons-httpclient

所以我做了一个小程序，它向网站发送一个 post 方法，然后打印出响应，我可以在网络浏览器中显示响应吗？

```
HttpResponse response = client.execute(post);

      BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

      String line = "";
      while ((line = rd.readLine()) != null) {
        System.out.println(line);
        if (line.startsWith("Auth=")) {
          String key = line.substring(5);
          // Do something with the key
        }

      }
    } catch (IOException e) {
      e.printStackTrace();
    } 
```

这会在调试器中为我打印整个页面，我可以在浏览器中显示它吗？

我正在使用来自 apache 的 HttpClient。

是否可以以某种方式将响应转换为 URI，然后使用`java.awt.Desktop.getDesktop().browse(response);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T20:27:33.180

为了在浏览器中显示您的响应，您需要从 Web 客户端而不是 Java 客户端调用 Servlet。如果您的请求是 HTTP GET 请求，您只需在浏览器中键入 URL 即可调用它。否则，您需要一个 HTML 表单来访问您的 Servlet。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:45:50.583

您可以将响应写入文件，然后在浏览器中打开该文件。

# php - 修改此 js 函数，使其使用从 db 中获取的值而不是数组中指定的值来生成 Select 选项

> ID：15465729
> 
> 赞同：1
> 
> 时间：2013-03-17T20:19:14.623
> 
> 标签：php, javascript

如何修改此函数，以便它可以使用从数据库中获取的值，而不是用于生成 Select 选项的数组中指定的值？

该功能允许我区分选择元素的默认值（*或“默认状态”，它们预设为最常用的选项）*与用户通过单击表单元素主动选择该值时*（表明他们做出了一个积极的决定，将其设置为该值）*。该函数在初始形式下正常工作，我在这里发布了一个带有工作示例的小提琴：http: [//jsfiddle.net/chayacooper/JHAPp/4/](http://jsfiddle.net/chayacooper/JHAPp/4/)

```
<script>
$('select').focus(function () {
    var option = $(this).find("option[value*=default]");
    option.attr('value', option.attr('value').replace(/_default/g, ''));
});
</script>
<select name="jeans">
    <option value="$0">$0</option>
    <option value="$50_default" selected="selected">$50</option>
    <option value="$100">$100</option>
    <option value="$150">$150</option>
</select> 
```

我无法将该功能调整为在帐户页面上工作，用户可以在其中查看和编辑他们的信息。在最初使用该函数时，我可以手动更改选项值*（即替换`value="$50"`为`value="$50_default"`）*，但是帐户页面在下面的 printSelectOptions 函数中使用 $options 数组生成*元素的选项，以便预先选择与数据库信息匹配的选项。下面的函数预先选择与数据库中的信息匹配的值（无论用户是否专门选择了该值，或者它是否仍处于“默认状态”），但是因为它需要删除“_default”字符串才能识别由`$options`数组生成的正确选项，它正在提交不带“_default”字符串的值，无论它是否已更改。*

 *如何修改 js 函数以与此协同工作，以便如果用户没有关注元素，如果该值是从处于“默认状态”的数据库中获取的，它将提交默认值（使用 '_default ' 细绳）？

```
<?php
    try {  
        $stmt = $conn->prepare("SELECT * FROM price WHERE user_id = :user_id");  
        $stmt->bindValue(':user_id', $user_id); 
        $stmt->execute();
    }  catch(PDOException $e) {echo $e->getMessage();}
    $row = $stmt->fetch();
    $search_default = array('_default');
    $replace_default = array('');
    $row_default = str_replace($search_default, $replace_default, $row);

    // This function selects the option matching the value in the db
    function printSelectOptions($dataArray, $currentSelection) {
        foreach ($dataArray as $key => $value) {
            echo '<option ' . (($key == $currentSelection) ? 'selected="selected"' : '') . ' value="' . $key . '">' . $value . '</option>';
        }
    }
?>
<select name="jeans">
<?php

    // Generates a <select> element with the options specified in this array
    $options = array("Null"=>"", "$0"=>"$0", "$50"=>"$50", "$100"=>"$100", "$150"=>"$150");
    $selected = $row_default['jeans'];

    // Pre-selects the option matching the db information
    echo printSelectOptions($options, $selected); 
?> 
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:53:28.030

我认为您应该考虑更改 PHP 代码，并保留 JavaScript 原样。

这个怎么样：

在调用之前`echo printSelectOptions(...)`，找到`$options`键等于的条目`$row_default['jeans']`（永远不会以“_default”结尾）并将该条目的键更改为`$row['jeans']`. 您可能只是将其设置为原来的样子，但您可能正在对其进行更改，因此它现在以“_default”结尾。

您也将更`$selected = $row_default['jeans'];`改为`$selected = $row['jeans'];`.

现在，如果数据库中的值以“_default”结尾，则所选选项（并且只有所选选项）将以“_default”结尾。由于 JavaScript 保持不变，如果用户关注选择元素，它将删除“_default”。

代码如下所示：

```
// This is a helper function that replaces a key while maintaining the entry's
// position in the array. It does not modify the given array, but returns a
// new array.
function replaceKey($array, $oldKey, $newKey) {
    $newArray = array();
    foreach ($array as $key => $value) {
        $newArray[($key === $oldKey) ? $newKey : $key] = $value;
    }
    return $newArray;
}

$options = array("Null"=>"", "$0"=>"$0", "$50"=>"$50", "$100"=>"$100", "$150"=>"$150");

// We will change the key for the entry in $options so it includes "_default" if
// the value from the database includes "_default". We need to do this only if
// $row['jeans'] ends with "_default". That will be the case if these two are
// different.
if ($row_default['jeans'] !== $row['jeans']) {
    $options = replaceKey($options, $row_default['jeans'], $row['jeans']);
}

// Now we can use the value from the db for setting the selected value, rather
// than the value that had "_default" removed. 
$selected = $row['jeans'];

// Pre-selects the option matching the db information.
echo printSelectOptions($options, $selected); 
```

更新：

The JavaScript that executes when the select gains focus looks correct. 我在[jsfiddle](http://jsfiddle.net/john_s/2epBy/)中对其进行了测试，它似乎工作正常。如果您查看 jsfiddle，我对其进行了一些更改，因此它反映了选项以“_default”结尾的事实。我也改变了`.attr()`to的用法`.prop()`，但原来的效果也很好。（如果你使用 jQuery >=1.6，你应该使用`.prop()`来改变元素属性，而不是`.attr()`.）

如果 PHP 正在生成它在 jsfiddle 中的选择方式，那么 JavaScript 无法正常工作肯定还有另一个原因。也许有一个 JavaScript 错误导致事件处理程序无法连接。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-17T20:48:48.187

`$row`在您的代码中是一个数组，您使用 $row['jeans'] 访问字段并返回您需要放入`$stmt->fetch()`循环的所有行。

```
while ($row = $stmt->fetch()) {
    $row_default = str_replace($search_default, $replace_default, $row['jeans']);
    echo '<option value="' . $row_default . '">' . $row_default . '</option>';
} 
```

这是[获取文档](http://www.php.net/manual/en/pdostatement.fetch.php)*

# node.js - 猫鼬 - 如果不在数组中则添加，如果已经在数组中则删除

> ID：15465731
> 
> 赞同：1
> 
> 时间：2013-03-17T20:19:18.070
> 
> 标签：node.js, mongodb, mongoose

猫鼬确定元素是否已经在数组中的最快方法是什么。在这种情况下，我想从该数组中删除元素。如果数组不包含我要添加的特定元素。

当然添加和删除可以通过 addToSet 和 remove(_id) 来完成。查询也没有问题。我真的更关心做到这一点的最短方法，用更少的努力。

例如，我建议采用 Schema：

```
var StackSchema = new Schema({
    references: [{ type: Schema.Types.ObjectId, ref: 'Person' }]
}); 
```

假设引用数组包含以下元素：

```
['5146014632B69A212E000001',
 '5146014632B69A212E000002',
 '5146014632B69A212E000003'] 
```

案例 1：我的方法收到 5146014632B69A212E000002 （所以应该删除这个条目。）

案例2：我的方法收到5146014632B69A212E000004（所以应该添加这个条目。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-15T22:57:18.680

任何路过的人的解决方案。:)

```
if(doc.references.indexOf(SOMESTRING) !== -1) {
    console.log('it\'s there') ; doc.likes.pull(SOMESTRING);
}else{
    doc.references.push(SOMESTRING);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:04:39.117

这是逻辑，下面有代码。

我通常使用 underscore.js 来完成这样的任务，但你可以只用 JavaScript 来完成。

1.  获取文档。
2.  遍历文档中的 _id，执行真值测试。
3.  如果文档具有您正在测试的 _id，请从数组中删除当前索引。
4.  如果您已经浏览了整个数组并且其中没有任何内容，`array.push()`则_id。然后`document.save()`

这是我通常遵循的方法。

在下划线中，它会是这样的：

```
function matching(a,b) { // a should be your _id, and b the array/document
  var i;
  for ( i = 0, i < b.length , i++) {
    if ( a.toString() === b[i].toString() )
      return i;
    else return -1;
  }
}; 
```

然后你会使用这个函数：

```
var index = matching( '5146014632B69A212E000002', doc );
if ( index > -1 )
  doc.splice( index , 1);
else 
  doc.push( '5146014632B69A212E000002' ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-15T04:38:22.467

@Hussein 回答，但使用 Lodash：

```
const _ = require("lodash")

const User = require("./model")

const movies = ["Inception", "Matrix"]

(async () => {
    // Catch errors here
    const user = User.findById("")

    const userMoviesToggle = _.xor(
        user.movies, // ["Inception"]
        movies
    ); // ["Matrix"]

    user.movies = userMoviesToggle

    // Catch errors here
    user.save()
})() 
```

# android - ImageButtons之间的Android ImageView

> ID：15465736
> 
> 赞同：0
> 
> 时间：2013-03-17T20:19:52.107
> 
> 标签：android, android-layout, imageview

我有一个相对布局，两端有一个 ImageButton，中间有一个 ImageView。我希望 ImageButtons 成为默认的 android 大小，ImageView 使用中心的所有剩余空间。

```
<RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="left" >

            <ImageButton
                android:id="@+id/btnLeft"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_centerVertical="true"
                android:layout_gravity="left"
                android:onClick="onClick"
                android:src="@drawable/left" />

            <ImageView
                android:id="@+id/imgBoard"
                android:layout_centerHorizontal="true"
                android:layout_centerInParent="true"
                android:layout_centerVertical="true"
                android:scaleType="centerInside"
                android:src="@drawable/ic_launcher" />

            <ImageButton
                android:id="@+id/btnRight"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_centerVertical="true"
                android:layout_marginRight="0dip"
                android:onClick="onClick"
                android:src="@drawable/right" />

    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:51:19.670

You can achieve this by setting the ImageButtons first and then set the ImageView between them by using `android:layout_toLeftOf="@id/btnRight"` and `android:layout_toRightOf="@id/btnLeft"`

This will work for you:

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageButton
        android:id="@+id/btnLeft"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_gravity="left"
        android:onClick="onClick"
        android:src="@drawable/left" />

    <ImageButton
        android:id="@+id/btnRight"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="0dip"
        android:onClick="onClick"
        android:src="@drawable/right" />

    <ImageView
        android:id="@+id/imgBoard"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:layout_toLeftOf="@id/btnRight"
        android:layout_toRightOf="@id/btnLeft"
        android:scaleType="centerInside"
        android:src="@drawable/ic_launcher" />

</RelativeLayout> 
```

# php - php上传类和智能调整大小

> ID：15465740
> 
> 赞同：0
> 
> 时间：2013-03-17T20:20:07.047
> 
> 标签：php, image-scaling

我在我的 PHP 项目中使用这个类来调整图片大小：[http ://www.verot.net/php_class_upload_docs.htm](http://www.verot.net/php_class_upload_docs.htm)

我现在想要实现的是进行某种“智能调整大小”；让我解释。

现在，我使用以下代码来调整图像大小。

```
$handle->image_resize         = true;
$handle->image_ratio_crop     = true;
$handle->image_x              = 600;
$handle->image_y              = 400; 
```

这样，即使图像非常宽或非常高，它也只会裁剪超出的部分。我要做的基本上是调整到 X 和 Y 的最大值，以便在长或宽图片的情况下，所有类都会做的只是逐个像素地缩放它们，这样就不需要裁剪超出或使用填充。

这可以通过简单地设置*没有*image_y 的 image_x 来实现，反之亦然，但它不适用于上述所有引用的情况。

关于如何解决这个问题的任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:49:29.080

包括[这里](https://stackoverflow.com/a/9691531/1279376)给出的类。然后使用

```
$resizeObj -> resizeImage(240 ,135 , 'auto');
$resizeObj -> saveImage('sample-resized.jpg', 100); 
```

# jquery - 根据窗口大小调整动态大小的 div 的高度

> ID：15465746
> 
> 赞同：1
> 
> 时间：2013-03-17T20:20:29.953
> 
> 标签：jquery

我有一个 div 在我的页面顶部充当掩码。页面本身的内容绝对以页面为中心（参见 css）。我使用 jQuery 根据#nav div 与窗口顶部的距离为 div .holder 指定一个高度。

CSS：

```
#pagewrap 
{
    position:absolute;
    width:915px;
    margin-left:-458px;
    padding:0;
    left:50%;
    height:100%;
    margin-top:-330px;
    top:50%;
}

.holder 
{
    background: none repeat scroll 0 0 black;
    height: 0;
    position: fixed;
    top: 0;
    width: 915px;
    z-index: 10000;
}

#nav 
{
    position:fixed;
    text-align:center;
    width:915px;
    height:224px;
    margin:0 auto;
    background:url(nav-off.png) no-repeat scroll 0 0 transparent;
    z-index:1001;
    font-family:'Cabin',sans-serif;
} 
```

Javascript：

```
var t = $("#nav");
var offset = t.offset();
$(function() 
{
    $(".holder").css("height" , offset.top);
}); 
```

很简单，但是如果窗口的大小发生变化，我希望更新高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T20:23:39.053

使用`jQuery resize`方法来检测窗口大小的变化。

```
$(window).resize(reset);

function reset(){
      var t = $("#nav");
       var offset = t.offset();
         $(function() {
              $(".holder").css("height" , offset.top);     
           });
}

$(document).ready(function(){
     reset();// set on page load
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:24:13.717

将整个脚本放入一个函数中，并在 document.ready 和[$(window).resize()上调用该函数](http://api.jquery.com/resize/)

# php - PHP - OnClick 更新 MySQL

> ID：15465749
> 
> 赞同：-2
> 
> 时间：2013-03-17T20:20:35.190
> 
> 标签：php, mysql

我有以下代码来选择某个用户当天的点击次数：

```
$res=$db->Query("SELECT `today_clicks` AS total_subs FROM user_clicks WHERE `uid` = '".$data['id']."' AND `module` = \"ysub\""); 
$r=mysql_fetch_object($res);
echo $r->total_subs;
if($db->GetNumRows($res) == 0){
echo "0";
} 
```

如果上述查询数高于 50，我想添加一个按钮来执行 2 次 MySQL 更新，它们是：

```
$db->Query("UPDATE `users` SET ``premium`='".$premium."' WHERE `id`='".$data['id']."'");
$db->Query("UPDATE `users` SET  `fbbonus` =  '1' WHERE  `users`.`id` ='".$data['id']."';"); 
```

但我不知道如何只在单击按钮时运行这些查询，如果它们有 50 次以上的点击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:28:24.983

我不会为您写出整个代码，因为这不是本网站的重点。但是，我会告诉你如何做到这一点。

*   创建一个锚点`someID`
*   向包含您的 PHP（查询代码）的页面发送[AJAX](http://api.jquery.com/jQuery.ajax/)请求，如果结果大于 50（使用[mysql_num_rows](http://php.net/manual/en/function.mysql-num-rows.php)检查） - 注意，已弃用 - ，只需在脚本中继续并运行接下来的两个查询
*   返回ajax脚本

# c - 用另一个给定的单词替换文本中的单词

> ID：15465755
> 
> 赞同：2
> 
> 时间：2013-03-17T20:21:01.913
> 
> 标签：c

我这里有这段代码

```
#include <stdio.h>
#include <string.h>
#include<conio.h>

void main()
{
  char s[] = "All work and no play makes Jack a dull boy.";
  char word[10],rpwrd[10],str[10][10];
  int i=0,j=0,k=0,w,p;

  printf("All work and no play makes Jack a dull boy.\n");
  printf("\nENTER WHICH WORD IS TO BE REPLACED\n");
  scanf("%s",word);
  printf("\nENTER BY WHICH WORD THE %s IS TO BE REPLACED\n",word);
  scanf("%s",rpwrd);
  p=strlen(s);

  for (k=0; k<p; k++)
    {
      if (s[k]!=' ')
        {
          str[i][j] = s[k];
          j++;
        }
      else
        {
          str[i][j]='\0';
          j=0; i++;
        }
    }

  str[i][j]='\0';
  w=i;

  for (i=0; i<=w; i++)
    {
      if(strcmp(str[i],word)==0)
        strcpy(str[i],rpwrd);

      printf("%s ",str[i]);
    }
  getch();
} 
```

我怎样才能替换“杰克”这个词？喜欢

输出：

```
All work and no play makes Jack a dull boy.

Enter ther word Jack to be Replaced
Mark
Tom

All work and no play makes Mark a dull boy.
All work and no play makes Tom a dull boy. 
```

无需搜索整个句子。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T20:28:31.123

> 无需搜索整个句子。

您必须搜索整行：

```
char sentence[] = "The quick brown fox jumped over the lazy dog.";
const char *to_replace = "fox";
const char *replacement = "dragon";

char *pos = strstr(sentence, to_replace);

// if found
if (pos != NULL) {
    // The new string
    size_t newlen = strlen(sentence) - strlen(to_replace) + strlen(replacement);
    char new_sentence[newlen + 1];

    // Copy the part of the old sentence *before* the replacement
    memcpy(new_sentence, sentence, pos - sentence);

    // Copy the replacement
    memcpy(new_sentence + (pos - sentence), replacement, strlen(replacement));

    // Copy the rest
    strcpy(new_sentence + (pos - sentence) + strlen(replacement), pos + strlen(to_replace));

    printf("Old: %s\nNew: %s\n", sentence, new_sentence);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:27:14.010

最快的方法是分配一个新的字符串，即`strlen (s) - strlen (word) + strlen (rpwrd) + 1`. 然后使用该`strstr`函数找到要替换的单词并将该点复制到一个新字符串中，附加新单词，然后将原始句子的其余部分复制到一个新字符串中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T20:28:12.280

您需要声明 a并使用or`char*`为其分配动态内存。当单词比替换的单词长时，就会出现这种情况。 其次，有很多函数可以搜索字符串并将其替换为给定的字符串。有一个-function 定位子字符串并返回字符串内的位置。虽然它是关于，但请[在此处](http://www.cplusplus.com/reference/cstring/)查找有关-Header 的参考。`malloc``calloc`
`<string.h>``strstr``C++``<string.>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-19T05:09:46.620

```
#include <stdio.h>
#include <string.h>

int main ()
{
  char str[] ="This is a simple string made with simple code";
  char * pch;
  int i=0,count=0;
  for(i=0;i<strlen(str);i++){
    if(str[i]=='s'&& str[i+1]=='i'&&str[i+2]=='m'&&str[i+3]=='p' && str[i+4]=='l' && str[i+5]=='e'){
        count++;
      }
  }
  for(i=1;i<=count;i++){
    pch = strstr (str,"simple");
    strncpy (pch,"sample",6);
  }

  puts (str);
  return 0;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-01-11T16:00:08.893

这可能有效：

```
 #include<bits/stdc++.h>
 using namespace std;
 int main()
 {
    char str[] ="xxxxforxxxx xxxx for xxxx";
    int n=sizeof(str)/sizeof(str[0]);
    string old ="xxxx";
    int oldlen=old.length();
    string news ="geeks";
    string final="";
    for(int i=0;i<=n-oldlen-1;i++)
    {
        string check="";
        for(int j=i;j<old.length()+i;j++)
        {
            check+=str[j];
        }
        if(old==check)
        {
           final+=news;
           i=i+oldlen-1;
        }
        else
        {
           final+=str[i];
        }
    }
    final += str[str.Length-1];
    cout<<final;
 } 
```

# sql - 从存储引擎得到错误-1

> ID：15465758
> 
> 赞同：1
> 
> 时间：2013-03-17T20:21:17.857
> 
> 标签：sql, innodb, mysql

我将我的应用程序从使用 MySQL 5.1 的旧服务器移动到运行新 MySQL 5.6 的更强大的新服务器。

现在我每天都会遇到几次奇怪的错误：

**“来自存储引擎的错误 -1”**

它每天只发生几次，使用简单的查询，例如：

```
UPDATE innoDbTable SET int_column = 1 WHERE primarykey = 96 
```

或者

```
INSERT INTO differentInnoTable (10cols) VALUES (10values)... 
```

当我在日志中看到此错误时，我使用来自 mysql 控制台的完全相同的查询，并且它始终有效...

我看到了这个问题，但是 force_innodb_recovery 对我不起作用.. [Mysql 'Got error -1 from storage engine' 错误](https://stackoverflow.com/questions/9595852/mysql-got-error-1-from-storage-engine-error)

有什么我可以尝试的诊断工具吗？

你有什么提示吗？

来自我的服务器的变量：

```
auto_increment_increment    1
auto_increment_offset   1
autocommit  ON
automatic_sp_privileges ON
back_log    350
basedir /opt/mysql/server-5.6
big_tables  OFF
bind_address    *
binlog_cache_size   32768
binlog_checksum CRC32
binlog_direct_non_transactional_updates OFF
binlog_format   STATEMENT
binlog_max_flush_queue_time 0
binlog_order_commits    ON
binlog_row_image    FULL
binlog_rows_query_log_events    OFF
binlog_stmt_cache_size  32768
bulk_insert_buffer_size 8388608
character_set_client    utf8
character_set_connection    utf8
character_set_database  latin1
character_set_filesystem    binary
character_set_results   utf8
character_set_server    latin1
character_set_system    utf8
character_sets_dir  /opt/mysql/server-5.6/share/charsets/
collation_connection    utf8_general_ci
collation_database  latin1_swedish_ci
collation_server    latin1_swedish_ci
completion_type NO_CHAIN
concurrent_insert   AUTO
connect_timeout 10
core_file   OFF
datadir /var/lib/mysql/
date_format %Y-%m-%d
datetime_format %Y-%m-%d %H:%i:%s
default_storage_engine  InnoDB
default_tmp_storage_engine  InnoDB
default_week_format 0
delay_key_write ON
delayed_insert_limit    100
delayed_insert_timeout  300
delayed_queue_size  1000
disconnect_on_expired_password  ON
div_precision_increment 4
end_markers_in_json OFF
enforce_gtid_consistency    OFF
eq_range_index_dive_limit   10
error_count 0
event_scheduler OFF
expire_logs_days    10
explicit_defaults_for_timestamp OFF
external_user   
flush   OFF
flush_time  0
foreign_key_checks  ON
ft_boolean_syntax   + -><()~*:""&|
ft_max_word_len 84
ft_min_word_len 4
ft_query_expansion_limit    20
ft_stopword_file    (built-in)
general_log ON
general_log_file    /var/log/mysql/mysql.log
group_concat_max_len    1024
gtid_executed   
gtid_mode   OFF
gtid_next   AUTOMATIC
gtid_owned  
gtid_purged 
have_compress   YES
have_crypt  YES
have_dynamic_loading    YES
have_geometry   YES
have_openssl    DISABLED
have_profiling  YES
have_query_cache    YES
have_rtree_keys YES
have_ssl    DISABLED
have_symlink    YES
host_cache_size 678
hostname    tik02
identity    0
ignore_builtin_innodb   OFF
ignore_db_dirs  
init_connect    
init_file   
init_slave  
innodb_adaptive_flushing    ON
innodb_adaptive_flushing_lwm    10
innodb_adaptive_hash_index  ON
innodb_adaptive_max_sleep_delay 150000
innodb_additional_mem_pool_size 8388608
innodb_api_bk_commit_interval   5
innodb_api_disable_rowlock  OFF
innodb_api_enable_binlog    OFF
innodb_api_enable_mdl   OFF
innodb_api_trx_level    0
innodb_autoextend_increment 64
innodb_autoinc_lock_mode    1
innodb_buffer_pool_dump_at_shutdown OFF
innodb_buffer_pool_dump_now OFF
innodb_buffer_pool_filename ib_buffer_pool
innodb_buffer_pool_instances    8
innodb_buffer_pool_load_abort   OFF
innodb_buffer_pool_load_at_startup  OFF
innodb_buffer_pool_load_now OFF
innodb_buffer_pool_size 33554432
innodb_change_buffer_max_size   25
innodb_change_buffering all
innodb_checksum_algorithm   innodb
innodb_checksums    ON
innodb_cmp_per_index_enabled    OFF
innodb_commit_concurrency   0
innodb_compression_failure_threshold_pct    5
innodb_compression_level    6
innodb_compression_pad_pct_max  50
innodb_concurrency_tickets  5000
innodb_data_file_path   ibdata1:12M:autoextend
innodb_data_home_dir    
innodb_disable_sort_file_cache  OFF
innodb_doublewrite  ON
innodb_fast_shutdown    1
innodb_file_format  Antelope
innodb_file_format_check    ON
innodb_file_format_max  Antelope
innodb_file_per_table   ON
innodb_flush_log_at_timeout 1
innodb_flush_log_at_trx_commit  1
innodb_flush_method 
innodb_flush_neighbors  1
innodb_flushing_avg_loops   30
innodb_force_load_corrupted OFF
innodb_force_recovery   0
innodb_ft_aux_table 
innodb_ft_cache_size    8000000
innodb_ft_enable_diag_print OFF
innodb_ft_enable_stopword   ON
innodb_ft_max_token_size    84
innodb_ft_min_token_size    3
innodb_ft_num_word_optimize 2000
innodb_ft_server_stopword_table 
innodb_ft_sort_pll_degree   2
innodb_ft_user_stopword_table   
innodb_io_capacity  200
innodb_io_capacity_max  2000
innodb_large_prefix OFF
innodb_lock_wait_timeout    50
innodb_locks_unsafe_for_binlog  OFF
innodb_log_buffer_size  8388608
innodb_log_file_size    50331648
innodb_log_files_in_group   2
innodb_log_group_home_dir   ./
innodb_lru_scan_depth   1024
innodb_max_dirty_pages_pct  75
innodb_max_dirty_pages_pct_lwm  0
innodb_max_purge_lag    0
innodb_max_purge_lag_delay  0
innodb_mirrored_log_groups  1
innodb_monitor_disable  
innodb_monitor_enable   
innodb_monitor_reset    
innodb_monitor_reset_all    
innodb_old_blocks_pct   37
innodb_old_blocks_time  1000
innodb_online_alter_log_max_size    134217728
innodb_open_files   2000
innodb_optimize_fulltext_only   OFF
innodb_page_size    16384
innodb_print_all_deadlocks  OFF
innodb_purge_batch_size 300
innodb_purge_threads    1
innodb_random_read_ahead    OFF
innodb_read_ahead_threshold 56
innodb_read_io_threads  4
innodb_read_only    OFF
innodb_replication_delay    0
innodb_rollback_on_timeout  OFF
innodb_rollback_segments    128
innodb_sort_buffer_size 1048576
innodb_spin_wait_delay  6
innodb_stats_auto_recalc    ON
innodb_stats_method nulls_equal
innodb_stats_on_metadata    OFF
innodb_stats_persistent ON
innodb_stats_persistent_sample_pages    20
innodb_stats_sample_pages   8
innodb_stats_transient_sample_pages 8
innodb_strict_mode  OFF
innodb_support_xa   ON
innodb_sync_array_size  1
innodb_sync_spin_loops  30
innodb_table_locks  ON
innodb_thread_concurrency   0
innodb_thread_sleep_delay   10000
innodb_undo_directory   .
innodb_undo_logs    128
innodb_undo_tablespaces 0
innodb_use_native_aio   ON
innodb_use_sys_malloc   ON
innodb_version  1.2.10
innodb_write_io_threads 4
insert_id   0
interactive_timeout 28800
join_buffer_size    262144
keep_files_on_create    OFF
key_buffer_size 16777216
key_cache_age_threshold 300
key_cache_block_size    1024
key_cache_division_limit    100
large_files_support ON
large_page_size 0
large_pages OFF
last_insert_id  0
lc_messages en_US
lc_messages_dir /opt/mysql/server-5.6/share/
lc_time_names   en_US
license GPL
local_infile    ON
lock_wait_timeout   31536000
locked_in_memory    OFF
log_bin OFF
log_bin_basename    
log_bin_index   
log_bin_trust_function_creators OFF
log_bin_use_v1_row_events   OFF
log_error   /var/lib/mysql/tik02.err
log_output  FILE
log_queries_not_using_indexes   ON
log_slave_updates   OFF
log_throttle_queries_not_using_indexes  0
log_warnings    1
long_query_time 2.000000
low_priority_updates    OFF
lower_case_file_system  OFF
lower_case_table_names  0
master_info_repository  FILE
master_verify_checksum  OFF
max_allowed_packet  33554432
max_binlog_cache_size   18446744073709547520
max_binlog_size 104857600
max_binlog_stmt_cache_size  18446744073709547520
max_connect_errors  100
max_connections 1500
max_delayed_threads 20
max_error_count 64
max_heap_table_size 16777216
max_insert_delayed_threads  20
max_join_size   18446744073709551615
max_length_for_sort_data    1024
max_prepared_stmt_count 16382
max_relay_log_size  0
max_seeks_for_key   18446744073709551615
max_sort_length 1024
max_sp_recursion_depth  0
max_tmp_tables  32
max_user_connections    0
max_write_lock_count    18446744073709551615
metadata_locks_cache_size   1024
metadata_locks_hash_instances   8
min_examined_row_limit  0
multi_range_count   256
myisam_data_pointer_size    6
myisam_max_sort_file_size   9223372036853727232
myisam_mmap_size    18446744073709551615
myisam_recover_options  BACKUP
myisam_repair_threads   1
myisam_sort_buffer_size 8388608
myisam_stats_method nulls_unequal
myisam_use_mmap OFF
net_buffer_length   16384
net_read_timeout    30
net_retry_count 10
net_write_timeout   60
new OFF
old OFF
old_alter_table OFF
old_passwords   0
open_files_limit    7500
optimizer_prune_level   1
optimizer_search_depth  62
optimizer_switch    index_merge=on,index_merge_union=on,index_merge_sort_union=on,index_merge_intersection=on,engine_condition_pushdown=on,index_condition_pushdown=on,mrr=on,mrr_cost_based=on,block_nested_loop=on,batched_key_access=off,materialization=on,semijoin=on,loosescan=on,firstmatch=on,subquery_materialization_cost_based=on,use_index_extensions=on
optimizer_trace enabled=off,one_line=off
optimizer_trace_features    greedy_search=on,range_optimizer=on,dynamic_range=on,repeated_subselect=on
optimizer_trace_limit   1
optimizer_trace_max_mem_size    16384
optimizer_trace_offset  -1
performance_schema  ON
performance_schema_accounts_size    100
performance_schema_digests_size 10000
performance_schema_events_stages_history_long_size  10000
performance_schema_events_stages_history_size   10
performance_schema_events_statements_history_long_size  10000
performance_schema_events_statements_history_size   10
performance_schema_events_waits_history_long_size   10000
performance_schema_events_waits_history_size    10
performance_schema_hosts_size   100
performance_schema_max_cond_classes 80
performance_schema_max_cond_instances   6900
performance_schema_max_file_classes 50
performance_schema_max_file_handles 32768
performance_schema_max_file_instances   2154
performance_schema_max_mutex_classes    200
performance_schema_max_mutex_instances  14000
performance_schema_max_rwlock_classes   30
performance_schema_max_rwlock_instances 5800
performance_schema_max_socket_classes   10
performance_schema_max_socket_instances 3020
performance_schema_max_stage_classes    150
performance_schema_max_statement_classes    167
performance_schema_max_table_handles    4000
performance_schema_max_table_instances  12500
performance_schema_max_thread_classes   50
performance_schema_max_thread_instances 3100
performance_schema_session_connect_attrs_size   512
performance_schema_setup_actors_size    100
performance_schema_setup_objects_size   100
performance_schema_users_size   100
pid_file    /var/run/mysqld/mysqld.pid
plugin_dir  /opt/mysql/server-5.6/lib/plugin/
port    3306
preload_buffer_size 32768
profiling   OFF
profiling_history_size  15
protocol_version    10
proxy_user  
pseudo_slave_mode   OFF
pseudo_thread_id    43865
query_alloc_block_size  8192
query_cache_limit   1048576
query_cache_min_res_unit    4096
query_cache_size    16777216
query_cache_type    OFF
query_cache_wlock_invalidate    OFF
query_prealloc_size 8192
rand_seed1  0
rand_seed2  0
range_alloc_block_size  4096
read_buffer_size    131072
read_only   OFF
read_rnd_buffer_size    262144
relay_log   
relay_log_basename  
relay_log_index 
relay_log_info_file relay-log.info
relay_log_info_repository   FILE
relay_log_purge ON
relay_log_recovery  OFF
relay_log_space_limit   0
report_host 
report_password 
report_port 3306
report_user 
secure_auth ON
secure_file_priv    
server_id   0
server_id_bits  32
server_uuid 01fac1d2-8b69-11e2-8a99-00163e10de95
skip_external_locking   ON
skip_name_resolve   ON
skip_networking OFF
skip_show_database  OFF
slave_allow_batching    OFF
slave_checkpoint_group  512
slave_checkpoint_period 300
slave_compressed_protocol   OFF
slave_exec_mode STRICT
slave_load_tmpdir   /tmp
slave_max_allowed_packet    1073741824
slave_net_timeout   3600
slave_parallel_workers  0
slave_pending_jobs_size_max 16777216
slave_rows_search_algorithms    TABLE_SCAN,INDEX_SCAN
slave_skip_errors   OFF
slave_sql_verify_checksum   ON
slave_transaction_retries   10
slave_type_conversions  
slow_launch_time    2
slow_query_log  ON
slow_query_log_file /var/log/mysql/mysql-slow.log
socket  /var/run/mysqld/mysqld.sock
sort_buffer_size    262144
sql_auto_is_null    OFF
sql_big_selects ON
sql_buffer_result   OFF
sql_log_bin ON
sql_log_off OFF
sql_mode    STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION
sql_notes   ON
sql_quote_show_create   ON
sql_safe_updates    OFF
sql_select_limit    18446744073709551615
sql_slave_skip_counter  0
sql_warnings    OFF
ssl_ca  
ssl_capath  
ssl_cert    
ssl_cipher  
ssl_crl 
ssl_crlpath 
ssl_key 
storage_engine  InnoDB
stored_program_cache    256
sync_binlog 0
sync_frm    ON
sync_master_info    10000
sync_relay_log  10000
sync_relay_log_info 10000
system_time_zone    CET
table_definition_cache  1400
table_open_cache    2000
table_open_cache_instances  1
thread_cache_size   8
thread_concurrency  10
thread_handling one-thread-per-connection
thread_stack    262144
time_format %H:%i:%s
time_zone   SYSTEM
timed_mutexes   OFF
timestamp   1363551365.087333
tmp_table_size  16777216
tmpdir  /tmp
transaction_alloc_block_size    8192
transaction_allow_batching  OFF
transaction_prealloc_size   4096
tx_isolation    REPEATABLE-READ
tx_read_only    OFF
unique_checks   ON
updatable_views_with_limit  YES
version 5.6.10-log
version_comment MySQL Community Server (GPL)
version_compile_machine x86_64
version_compile_os  debian6.0
wait_timeout    28800
warning_count   0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:56:49.060

如果将 innodb_force_recovery 设置为 4 没有用，我不认为这是一个损坏问题。

仅当您尝试更新主键或插入行时才会发生这种情况吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T14:00:49.237

我已将 innodb_force_recovery=1 添加到 my.cnf 文件中。

禁用这条线为我解决了这个问题。但是对我来说，这个错误是可靠的——所以它可能有多种原因。

注意：这个问题在 MySQL 5.6.11 版本中仍然存在。

# javascript - 如何将阿拉伯语单词与reg exp匹配？

> ID：15465760
> 
> 赞同：6
> 
> 时间：2013-03-17T20:21:33.730
> 
> 标签：javascript, regex

我有一个这样的字符串：“سلام علیکم”，这是一个两个单词的阿拉伯语短语。我想用正则表达式匹配第一个单词。如果是英语，我会测试`/^[a-zA-Z]*/`。我怎么能用阿拉伯语做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T20:26:56.837

您可以创建一个仅匹配阿拉伯语的字符类：

```
/^[\p{Arabic}]*/ 
```

[这](http://www.regular-expressions.info/unicode.html)是完整的参考

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T20:43:32.113

阿拉伯字符是：

```
'\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC' 
```

# asp.net-mvc - 使用 TFS2012 构建 .net 4.0 代码

> ID：15465763
> 
> 赞同：2
> 
> 时间：2013-03-17T20:21:42.287
> 
> 标签：asp.net-mvc, asp.net-mvc-4, .net-4.0

我安装了 TFS 2012。我想在 TFS 2012 上为需要在 .net 4.0 中构建的 asp.net MVC 代码设置门控签入。这样做的方法是什么？

我假设 TFS 2012 是控制器，TFS 2010 是构建代理。但是，当我尝试将 TFS 2010 构建代理连接到来自不同机器的构建代理框中的 TFS 2012 团队项目集合时，我收到一条消息，要求我升级到 TFS 2012。这不是我需要的吗如果我想设置另一台机器作为我的构建代理，该怎么做？将构建代理指向默认控制器，在本例中为 TFS 2012 框

TFS2012 构建代理能否在 .net 4.0 中构建代码，并将其部署在只有 .net 4.0 的服务器上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T20:28:45.150

您必须将构建代理升级到 TFS2012，您不能在不同版本上混合使用 TFS 层。

是的，如果您有一个带有 TFS 2012（和 VS 2012，如果需要）的构建代理，您仍然可以构建仅用于部署的 .Net 4.0 程序集。这正是我使用 TFS 的方式。

程序集是针对项目文件的“目标框架”中的 .Net 版本构建的，而不是服务器上安装的。如果更新 Visual Studio，可能会使用更高版本的 C# 编译器，但这不会导致部署问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:30:40.277

似乎此问题已通过 TFS 2012 的更新 2 修复：

可以看看这个网站：

[http://blogs.msdn.com/b/bharry/archive/2013/04/04/vs-tfs-2012-2-update-2-released-today.aspx](http://blogs.msdn.com/b/bharry/archive/2013/04/04/vs-tfs-2012-2-update-2-released-today.aspx)

# hibernate - 在 Hibernate 中跟踪查询源

> ID：15465767
> 
> 赞同：0
> 
> 时间：2013-03-17T20:22:39.680
> 
> 标签：hibernate, log4j, hql

在 Hibernate 中，有没有办法跟踪每个生成的查询来自哪一行*源代码？*我一直在使用调试工具在服务器日志中打印出格式良好的 HQL 查询，但我想知道如何跟踪在源代码中生成此类查询的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:07:36.927

我也使用 Criteria API，我想我知道你为什么要问这个。问题是在调用 list() 方法之前检查 Criteria 实例非常困难。例如，这个问题涉及检查休眠条件实例以查看已在其上定义了哪些别名。

[如何确定 Criteria 实例是否已有 Subcriteria？](https://stackoverflow.com/questions/9806556/how-do-i-determine-whether-a-criteria-instance-already-has-a-subcriteria)

也许这对您有一些线索，因为一个建议是使用 Hibernate 的 CriteriaImpl 类，即使它是一种非标准方法。

JPA2 标准是否解决了这个问题？

# actionscript-3 - 在 AS3 中动态创建类的实例（不在库中）

> ID：15465770
> 
> 赞同：0
> 
> 时间：2013-03-17T20:23:00.070
> 
> 标签：actionscript-3, actionscript

我正在尝试根据从函数启动发送给我的变量创建一个类的实例。

此类不是 displayObject，也不在 Flash 库中。这似乎意味着以下内容不起作用：

```
private function BasicControl(_stage:int):void {
        var s1:tut_stage = getDefinitionByName("stage"+_stage) as tut_stage;
        trace(s1);
        s1.Begin();
    } 
```

这导致：

```
ReferenceError: Error #1065: Variable stage1 is not defined.
at global/flash.utils::getDefinitionByName()
at kazo::Main/BasicControl()[B:\Users\Kevin SSD\client\temp_tutorial\preview_src\kazo\Main.as:76]
at kazo::Main/SWFLoadComplete()[B:\Users\Kevin SSD\client\temp_tutorial\preview_src\kazo\Main.as:113] 
```

但是，如果它写成：

```
var s1:tut_stage = new stage1; 
```

这将正常工作。

如果类不在库中，如何动态调用它？看来我所有的努力都没有结果。我可以让它工作的唯一方法是使用一个可怕的解决方法：

```
private function BasicControl(_stage:int):void {
        var s1:tut_stage;

        switch(_stage) {
            case 1:
                s1 = new stage1;
                break;

            case 2:
                s2 = new stage2;
                break;

        }
    } 
```

我必须在这里遗漏一些东西 - 在这种情况下我应该如何调用 stage1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:29:10.967

该`getDefinitionByName`函数返回一个类引用。试试这个：

```
var Clazz:Class = getDefinitionByName("stage" + _stage) as Class;
var s1:tut_stage = new Clazz() as tut_stage; 
```

此外，您必须确保您的类在编译时包含在 SWF 中。只需在某处引用它们以强制 Flash 包含它们。

```
stage1; stage2; 
```

您需要为要包含的任何类添加引用，但您只需执行一次。

# jruby - 如何从 Java 加载、编译和调用 JRuby 文件？

> ID：15465772
> 
> 赞同：1
> 
> 时间：2013-03-17T20:23:07.617
> 
> 标签：jruby, jruby-java-interop

我找到的最好的文档是[this](https://github.com/jruby/jruby/wiki/JRubyAndJavaCodeExamples)，但它有点过时了——已弃用或缺少方法。我想，从Java代码：

1.  从文件系统加载`.rb`文件。
2.  确保将其编译为可能的最快形式，因为这存在于长时间运行的服务器中。
3.  调用该文件中的函数或类，传入在 Java 端构造的值。
4.  （如果可能）能够重复步骤 1-3，如果`.rb`文件更改，并获取新的 Ruby 代码。

# windows - 如何将程序添加到 Windows 7 程序列表？

> ID：15465777
> 
> 赞同：0
> 
> 时间：2013-03-17T20:23:33.763
> 
> 标签：windows, list, regedit

谁能告诉我如何将程序添加到 Windows 7 程序列表？例如腻子或 Eclipse。我真的很喜欢能够按下 Windows 键，然后开始输入我想要的程序的名称并让 Windows 找到它。过去我创建了一个快捷方式并将其固定到列表中，但必须有一种方法来注册 putty 或 eclipse，就像其他软件在安装时所做的那样

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T20:29:35.510

您可以通过将程序的快捷方式添加到路径 C:\ProgramData\Microsoft\Windows\Start Menu\Programs 来做到这一点

# printing - 在一张纸上打印多页

> ID：15465780
> 
> 赞同：0
> 
> 时间：2013-03-17T20:23:45.430
> 
> 标签：printing

我在打印文档时遇到问题。我绝不是编程专家，但我已经自学了大约一年，所以我了解了基础知识。我想我知道问题出在哪里，但我不知道如何解决它，我已经尽职尽责地找到了答案，但没有任何运气。

我正在尝试创建一个报告列表，用户可以选择要打印的特定报告，然后点击打印按钮或打印预览按钮，并根据需要打印或显示报告。当我将打印或打印预览按钮连接到一个特定的报告时，它工作正常。一旦我将其更改为从列表中打印，它就会开始给我带来问题，并且仅当报告长度为两页或更多页并且它随机发生而我没有进行任何更改时才会出现问题。（有时它可以正常工作，有时不能）问题是它会尝试将所有页面打印到一张纸上，就像一张双重曝光的照片一样。请参阅下面的屏幕截图。

![问题示例](../Images/16b3ff49a81c81fe09f51bdaa9719f9d.png)

这是我认为很重要的代码。

```
public class Report //Creates a new class called Report.
{
    public PrintDocument Document = new PrintDocument();

    private int LineNumber;
    private int PageNumber;
    private int TotalNumberOfPages;

    private PrintDocument Set() //Sets up the document.
    {
        Body.Add(new NewLine());
        LineNumber = 0;
        PageNumber = 1;
        Document.DocumentName = Title[0].Text;
        Document.PrintPage += new PrintPageEventHandler(OnPrintPage);
        return Document;
    }
    private void OnPrintPage(object sender, PrintPageEventArgs e) //Sets up the lines to be printed.
    {
        int Offset = e.MarginBounds.Top;
        int PageEnd = e.MarginBounds.Top + e.MarginBounds.Height;

        //Instructions on how to build the page. Trust me, it's right.

        if (AllLines.Count > LineNumber)
        {
            e.HasMorePages = true;
            /* ^This is where the problem is problem is. When this is made true, it sometime changes back to 
              false (as it should) when it gets to the end, but sometime it does not. The times that it randomly 
              does not, it still starts the page over but does it right on top of the old page like I printed 
              the first page out, then put the paper back into the printer and printed the second page over it. 
            */
            PageNumber++;
        }
        else
        {
            e.HasMorePages = false; 
            LineNumber = 0;
            PageNumber = 1; 
        }
    }

    public void Print() //Sets the command to send the document to the printer.
    {
        Set().Print();
    }
    public void PrintPreview() //Set the command to display the document.
    {
        PrintPreviewDialog PP = new PrintPreviewDialog();
        PP.Document = Set();
        PP.ShowDialog();
    }
}

public partial class frmReports : Form
{
#region PRINT DOCUMENTS //Creates the reports.
    public Report Report1()
    {
        Report Page = new Report();     
        //Instructions on how to build the page. Trust me, it's right.
        return Page;
    }   
    public Report Report2()
    {
        Report Page = new Report();     
        //Instructions on how to build the page. Trust me, it's right.
        return Page;
    }   
    public Report Report3()
    {
        Report Page = new Report();     
        //Instructions on how to build the page. Trust me, it's right.
        return Page;
    }
    public Report Report4()
    {
        Report Page = new Report();     
        //Instructions on how to build the page. Trust me, it's right.
        return Page;
    }
    public Report Report5()
    {
        Report Page = new Report();     
        //Instructions on how to build the page. Trust me, it's right.
        return Page;
    }
    #endregion

    List<Report> Reports = new List<Report>(); //Creates a Reports List

    public frmReports()
    {
        InitializeComponent();      

        //Adds the reports to the Reports List
        Reports.Add(Report1());
        Reports.Add(Report2());
        Reports.Add(Report3());
        Reports.Add(Report4());
        Reports.Add(Report5());

        foreach (Report r in Reports) //Adds the reports to the List Box already added to the form.
            lstReportList.Items.Add(r);
    }

    private void OnClick_btnPrint(object sender, EventArgs e) //When clicking the Print button.
    {
        if (lstReportList.SelectedItem != null) 
            foreach(Report r in Reports.FindAll(r => r == lstReportList.SelectedItem) r.Print(); //Determains all of the items in the List Box and prints them out.
    }

    private void OnClick_btnPrintPreview(object sender, EventArgs e) //When clicking the Print Preview button.
    {
        if (lstReportList.SelectedItem != null)
            foreach(Report r in Reports.FindAll(r => r == lstReportList.SelectedItem) r.PrintPreview(); //Determains all of the items in the List Box and displays them.
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T00:09:08.087

我想到了。我需要重置文档。

```
 public void Print()
    {
        Set().Print();
        Document = new PrintDocument(); //<-------------
    }
    public void PrintPreview()
    {
        PrintPreviewDialog PP = new PrintPreviewDialog();
        PP.Document = Set();
        Form frmPP = (Form)PP;
        frmPP.WindowState = FormWindowState.Maximized;
        PP.Name = PP.Document.DocumentName;
        frmPP.Text = PP.Name;
        frmPP.Icon = ((Icon)(Midas_Point_of_Sales_System.Properties.Resources.yellow));
        PP.ShowDialog();
        Document = new PrintDocument(); //<-------------
    } 
```

# c++ - 处理使用 boost::interprocess STL 兼容共享内存分配器创建的 C++ 对象的正确方法是什么？

> ID：15465786
> 
> 赞同：0
> 
> 时间：2013-03-17T20:24:20.257
> 
> 标签：c++, boost, boost-interprocess

我对 Boost::interprocess 共享内存和释放有点困惑。

在 C++ 中在堆栈上创建新对象时，您只需向构造函数声明类型、变量名和参数（除非您需要默认构造函数）：

```
 AType AVariableName(param1,param2); 
```

如果要使用 Boost::interprocess 分配相同的变量，我正在做这样的事情。我为密集的 typedef 系列道歉，但我想不出如何在不提供真正的 boost 模板类型扩展的情况下提出这个问题并具体化。

```
typedef int                   PointKeyType;
typedef DATAPOINT                 PointMappedType;
typedef std::pair<const int, PointMappedType> PointValueType;
typedef boost::interprocess::allocator<PointValueType, 
  boost::interprocess::managed_shared_memory::segment_manager> PointShmemAllocator;
typedef boost::interprocess::map<PointKeyType, 
  PointMappedType, std::less<PointKeyType>, PointShmemAllocator> PointMap; 
```

到目前为止，我所做的一切是定义我正在`<integer,DATAPOINT>`共享内存中创建一个类似 std::map 的实体，我还没有说 DATAPOINT 是什么，但它是一个用一些浮点数和整数值定义的结构体. 在拥有并初始创建共享内存映射的应用程序中，我像这样初始化它，主要是从 Boost 演示中借用的代码：

```
 managed_shared_memory segment
      ( open_or_create  // or maybe it should be create_only?
       ,MEMORY_AREA_NAME // a string literal
       ,65536);          //segment size in bytes

   // STL compatible allocator
   PointShmemAllocator point_alloc_inst (segment.get_segment_manager()); 
```

现在我像这样使用分配器，使用 typedef PointMap 创建 boost::interprocess::map<...>：

```
 PointMap *aPointMap = 
       segment.construct<PointMap>("SOMEOBJECT_NAME_HERE")                                  (std::less<PointKeyType>() //first  ctor parameter
                                 ,point_alloc_inst); 
```

现在假设我想处理这个`boost::interprocess::map`我称之为 PointMap 的对象，并重用它的内存。我怎么做？

我试过这样的事情：

```
segment.destruct<PointMap>(aPointMap); 
```

但是这里的语法并不完全正交。然后我想，也许它像析构函数的放置语法一样，但我一直无法弄清楚。

如果这一切都是魔法而且它只是有效，而我应该只是`delete PointMap`，仅此而已，我会觉得有点傻，但我想确保我没有犯大错。

其次，我假设访问此共享内存的辅助进程以相同的方式简单地处理，但我会使用如下`find<T>`方法：

```
 std::pair<PointMap*, std::size_t> f = segment->find<PointMap>("SOMEOBJECT_NAME_HERE");
      aPointMap = f.first; 
```

然后，当我完成它，`delete aPointMap`或者只是设置`aPointMap = NULL`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:43:12.817

请参阅[文档](http://www.boost.org/doc/libs/1_53_0/doc/html/interprocess/quick_guide.html#interprocess.quick_guide.qg_interprocess_container)，其中提供了您想要做的完整示例。地图示例不会破坏容器，但向量会破坏。

```
PointMap *aPointMap =
       segment.construct<PointMap>("SOMEOBJECT_NAME_HERE")
                                 (std::less<PointKeyType>() //first  ctor parameter
                                 ,point_alloc_inst); 
```

这会创建一个名为`"SOMEOBJECT_NAME_HERE"`so 要销毁它的对象，您只需销毁该命名对象：

```
segment.destroy<PointMap>("SOMEOBJECT_NAME_HERE"); 
```

这可以说是正交的：您按名称创建一个对象并传递参数，然后按名称销毁它（但不需要参数，因为析构函数不接受参数。）

# qt - QtGui 和 QMainWindow 的关系

> ID：15465791
> 
> 赞同：1
> 
> 时间：2013-03-17T20:24:42.810
> 
> 标签：qt, qmainwindow, qtgui

这是.h文件：

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QtGui>

class MainWindow : public QMainWindow
{
public:
    MainWindow();

private:
};

#endif // MAINWINDOW_H 
```

使用 .h 文件，我得到错误：

```
expected class-name before '{' token in Qt 
```

我可以添加`#include <QMainWindow>`并且错误消失了，但我不明白为什么。应该`QtGui`包括`QMainWindow`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:51:20.643

The QtGui doesn't include QMainWindow anymore because the widgets are in a different module, in Qt5.

The file listing "includes" for the widgets is QtWidgets/QtWidgets.

# android - FATAL Exception Main android（通过 kSoap 访问 web 服务）

> ID：15465792
> 
> 赞同：0
> 
> 时间：2013-03-17T20:25:02.603
> 
> 标签：android, exception, ksoap

我是 android 开发新手，我正在尝试通过 UltiDiv 访问本地托管的 Web 服务，当我运行应用程序时它给了我胎儿异常，我在 android 清单中添加了 INTERNET 和 NETWORK_STATE 权限，但它仍然相同。Web 服务名称是 connecto，方法名称是 DbRead，并采用字符串 phone

```
 // here is the code 
    package finalProject.test.webService;
    import org.ksoap2.SoapEnvelope;
    import org.ksoap2.serialization.SoapObject;
    import org.ksoap2.serialization.SoapPrimitive;
    import org.ksoap2.serialization.SoapSerializationEnvelope;
    import org.ksoap2.transport.HttpTransportSE;
    import android.app.*;
    import android.util.Log;
    import android.widget.TextView;
    import android.os.Bundle;
    public class FinalWebServiceDemoActivity extends Activity {
    // some parameters regarding your web-service to be invoked
private static final String SOAP_ACTION = "http://tempuri.org/connecto";
    private static final String METHOD_NAME = "DbRead";
    private static final String NAMESPACE = "http://tempuri.org/";
    private static final String URL = "http://192.168.1.8:8080/connecto.asmx";

    TextView tv;

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    tv=(TextView)findViewById(R.id.text1);
    call();
    }

    public void call()
    {
    try {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("phone","1234");

        SoapSerializationEnvelope envelope = new                             SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet=true;
        envelope.setOutputSoapObject(request);

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.call(SOAP_ACTION, envelope);

        SoapPrimitive result = (SoapPrimitive)envelope.getResponse();
        String strRes = result.toString();

        tv.setText(strRes);
        } catch (Exception e) {
        tv.setText("Exception...");
        Log.i("exception", e.toString());
        StackTraceElement elements[] = e.getStackTrace();
        for (int i = 0, n = elements.length; i < n; i++) {      
            Log.i("File", elements[i].getFileName());
            Log.i("Line", String.valueOf(elements[i].getLineNumber()));
            Log.i("Method", elements[i].getMethodName());
        }
        }
        }
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:40:46.203

通过用 2.4 替换 Ksoap 2.6.0 解决 :-)

# php - 在 PHP 中将属性从一种方法传递到另一种方法

> ID：15465795
> 
> 赞同：0
> 
> 时间：2013-03-17T20:25:12.857
> 
> 标签：php, class, methods

我正在尝试类和 PHP:PDO。我已经设置了一个简单的类来尝试一些东西，但是我收到一个错误“未定义的变量：conn”错误。

```
class Cms {

    function __construct() {
        try {
            $conn = new PDO('mysql:host=localhost;dbname=blog', 'root', '');
            $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        } catch(PDOException $error) {
            echo 'error: ' . $error->getMessage();
        }
    }

    public function read() {
        $query = $conn->query("SELECT * FROM posts");
    }
} 
```

据我所知，这可能是因为 $conn PDO 对象没有被传递到 read 方法，因为它是在构造方法中设置的。让 read 方法能够使用 $conn 属性的最佳（正确）方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T20:26:49.737

```
class Cms {

    private $_conn;

    function __construct() {
        try {
            $this->_conn = new PDO('mysql:host=localhost;dbname=blog', 'root', '');
            $this->_conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        } catch(PDOException $error) {
            echo 'error: ' . $error->getMessage();
        }
    }

    public function read() {
        $query = $this->_conn->query("SELECT * FROM posts");
    }
} 
```

因此，您创建一个私有属性，将您的 PDO 实例分配给它并使用

一些文档：[http ://www.php.net/manual/en/language.oop5.properties.php](http://www.php.net/manual/en/language.oop5.properties.php)

# r - 使用将连续变量分成两组的值构建表

> ID：15465799
> 
> 赞同：4
> 
> 时间：2013-03-17T20:25:57.290
> 
> 标签：r

我正在寻找你的帮助。我试图将一个连续变量分成两组，我举了这个例子来说明我想要做什么：

```
x=data.frame(v1=c(1,1,2,2,3,4,5,6,9,9,11,2,4,45,67,89,1,1,5,5,5,6,6,6,9,9,9,11,11,8,8,8,51,90,40,15,30,11,8,9,9,1,5,5,100,67,78,98,34,25)) 
```

我尝试将我的连续变量分成两组，初始值为 20，然后：

```
g1=data.frame(x[x$v1>20,])
g2=data.frame(x[x$v1<=20,]) 
```

在我计算 g1 和 g2 的均值和 sd 之后：

```
mean(g1$x.x.v1...20...)=62.61538
mean(g2$x.x.v1....20...)=6.216216
sd(g1$x.x.v1...20...)=26.80963
sd(g2$x.x.v1....20...)=3.55227
length(g1$x.x.v1...20...)= 13
length(g2$x.x.v1....20...)=37 
```

在此之后，我想要一个显示如下内容的表格：

```
Value   Mean.G1  SD.G1  Mean.G2  SD.G2  N.G1 N.G2
20        62.61    26.8   6.21     3.55  13   37 
```

但是这个表不仅适用于 20，我想为具有不同值的向量构建该表，例如一个具有 10 个元素的向量，从 20 开始，并且在步骤 20 中增加，像这样的向量`v=c(10,30,50,70,90,110,130,150,170,190)`。我等待这个问题是明确的。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:34:11.307

第一步可以更经济地完成，结果与以下相同：

```
g1=x[x$v1>20,]
g2=x[x$v1<=20,] # since "[" would have returned a dataframe 
```

但是为什么不跳过这一步，而是这样做：

```
do.call(cbind, by(x$v1, list(v1GT20 = x$v1 > 20), 
                      function(v) c(Mean=mean(v), SD=sd(v), N=length(v)) ) )
        FALSE    TRUE
Mean  6.21622 62.6154
SD    3.55227 26.8096
N    37.00000 13.0000 
```

如果您想在多个位置进行剪切，请使用剪切功能来拆分和识别组：

```
do.call(cbind, by(x$v1, cut( x$v1 , breaks=c(10,30,50,70,90,110,130,150,170,190) ), 
                               function(v) c(Mean=mean(v), SD=sd(v), N=length(v)) ) )

      (10,30]  (30,50] (50,70]  (70,90] (90,110]
Mean 16.28571 39.66667 61.6667 85.66667 99.00000
SD    7.93125  5.50757  9.2376  6.65833  1.41421
N     7.00000  3.00000  3.0000  3.00000  2.00000 
```

如果你想要长格式，那么`melt`reshape2 包中的函数很有用，我注意到中断向量需要一个最低参数来拾取低于 10 的项目：

```
> melt( do.call(cbind, by(x$v1,
                          cut( x$v1 , breaks=c(-Inf, 10,30,50,70,90,110,130,150,170,190), 
                                               include.lowest=TRUE ), 
                          function(v) c(Mean=mean(v), SD=sd(v), N=length(v)) ) ) )

   Var1      Var2    value
1  Mean [-Inf,10]  5.34375
2    SD [-Inf,10]  2.90283
3     N [-Inf,10] 32.00000
4  Mean   (10,30] 16.28571
5    SD   (10,30]  7.93125
6     N   (10,30]  7.00000
7  Mean   (30,50] 39.66667
8    SD   (30,50]  5.50757
9     N   (30,50]  3.00000
10 Mean   (50,70] 61.66667
11   SD   (50,70]  9.23760
12    N   (50,70]  3.00000
13 Mean   (70,90] 85.66667
14   SD   (70,90]  6.65833
15    N   (70,90]  3.00000
16 Mean  (90,110] 99.00000
17   SD  (90,110]  1.41421
18    N  (90,110]  2.00000 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T20:53:36.787

您可以`summary`在这里简单地使用`lapply`

```
do.call(rbind,lapply( v,function(x) {
  v1.inf <- summary(v1[v1<=x])
  v1.sup <- summary(v1[v1>x])
  m <- as.matrix(rbind(v1.inf,v1.sup))
  rownames(m) <- paste(x,c('inf','sup'),sep='')
  m
}))

       Min. 1st Qu. Median   Mean 3rd Qu. Max.
10inf     1    2.75    5.0  5.344    8.00    9
10sup    11   17.50   42.5 48.500   75.25  100
20inf     1    4.00    6.0  6.216    9.00   15
20sup    25   40.00   67.0 62.620   89.00  100
30inf     1    4.00    6.0  7.308    9.00   30
30sup    34   48.00   67.0 69.000   89.50  100
50inf     1    4.25    7.0  9.619    9.00   45
50sup    51   67.00   83.5 80.000   92.00  100
70inf     1    5.00    8.0 13.090   11.00   67
70sup    78   89.00   90.0 91.000   98.00  100
90inf     1    5.00    8.0 17.620   12.00   90
90sup    98   98.50   99.0 99.000   99.50  100
110inf    1    5.00    8.5 20.880   22.50  100
110sup   NA      NA     NA    NaN      NA   NA
130inf    1    5.00    8.5 20.880   22.50  100
130sup   NA      NA     NA    NaN      NA   NA
150inf    1    5.00    8.5 20.880   22.50  100
150sup   NA      NA     NA    NaN      NA   NA
170inf    1    5.00    8.5 20.880   22.50  100
170sup   NA      NA     NA    NaN      NA   NA
190inf    1    5.00    8.5 20.880   22.50  100
190sup   NA      NA     NA    NaN      NA   NA 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T22:16:00.070

这是一个`data.table`解决方案：

```
require(data.table)
x.dt <- data.table(x)
rbindlist(lapply(v, function(i) {
    lbls <- paste0(c(">", "<="), i)
    x.dt[, grp := as.character(factor(v1 > i, levels=c(TRUE, FALSE), labels=lbls))]
    x.dt[, as.list(c(v = i, mean = mean(v1), 
        sd = sd(v1), length = length(v1))), by = grp]
}))
#       grp   v      mean        sd length
#  1:  <=10  10  5.343750  2.902828     32
#  2:   >10  10 48.500000 32.505656     18
#  3:  <=20  20  6.216216  3.552270     37
#  4:   >20  20 62.615385 26.809633     13
#  5:  <=30  30  7.307692  5.907862     39
#  6:   >30  30 69.000000 23.870484     11
#  7:  <=50  50  9.619048 10.245647     42
#  8:   >50  50 80.000000 17.270950      8
#  9:  <=70  70 13.088889 16.555447     45
# 10:   >70  70 91.000000  8.717798      5
# 11:  <=90  90 17.625000 23.951747     48
# 12:   >90  90 99.000000  1.414214      2
# 13: <=110 110 20.880000 28.456655     50
# 14: <=130 130 20.880000 28.456655     50
# 15: <=150 150 20.880000 28.456655     50
# 16: <=170 170 20.880000 28.456655     50
# 17: <=190 190 20.880000 28.456655     50 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-17T20:35:12.533

我会使用 reshape2 和 plyr，

```
library(plyr) ; library(reshape2)
v=c(10,20,30,50,70,90,110,130,150,170,190) # added 20 for checking
# create new dichotomy id variable
l1 = llply(v, function(.v) transform(x, test = x[["v1"]] <= .v))
names(l1) = v # name list elements for later reference
all = melt(l1, id=c("v1","test")) # merge data.frames together
# summarise the data by groups
results = ddply(all, c("L1","test"), summarise, 
          mean = mean(v1), sd=sd(v1), length=length(v1)) 
```

导致

```
arrange(results, as.numeric(L1))

    L1  test      mean        sd length
1   10 FALSE 48.500000 32.505656     18
2   10  TRUE  5.343750  2.902828     32
3   20 FALSE 62.615385 26.809633     13
4   20  TRUE  6.216216  3.552270     37
5   30 FALSE 69.000000 23.870484     11
6   30  TRUE  7.307692  5.907862     39
7   50 FALSE 80.000000 17.270950      8
8   50  TRUE  9.619048 10.245647     42
9   70 FALSE 91.000000  8.717798      5
10  70  TRUE 13.088889 16.555447     45
11  90 FALSE 99.000000  1.414214      2
12  90  TRUE 17.625000 23.951747     48
13 110  TRUE 20.880000 28.456655     50
14 130  TRUE 20.880000 28.456655     50
15 150  TRUE 20.880000 28.456655     50
16 170  TRUE 20.880000 28.456655     50
17 190  TRUE 20.880000 28.456655     50 
```

# android - Xtify - 不接收推送通知 - Android

> ID：15465801
> 
> 赞同：1
> 
> 时间：2013-03-17T20:26:03.580
> 
> 标签：android, push-notification, google-cloud-messaging, xtify

试图让 Xtify 在 Android 上运行，但没有任何运气。

我已经成功运行了演示并且可以接收推送通知。但我没有在我自己的应用程序上使用它们。

该设备已成功注册，我已经从演示应用程序中完全复制了所有内容......确保在清单中设置了所有权限/服务/接收者。

有人对它为什么不起作用有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:08:06.570

想通了....我没有意识到你`must have a separate API Project for each application.`

所有的头痛都是徒劳的！

# ios - IOS UIScrollView中的位置坐标值加倍

> ID：15465802
> 
> 赞同：0
> 
> 时间：2013-03-17T20:26:06.773
> 
> 标签：ios, objective-c, uiscrollview, coordinates

我有一个包含 UINavigationBar 和 UIScrollView 的 ViewController。在滚动视图中，我放置了其他视图来创建分页类型的东西。我完美地完成了这项工作，但我不得不解决一个非常奇怪的问题，即我在 UIScrollView 中的所有坐标值都加倍，但元素在 .frame.origin 中返回了正确的坐标。

不知道为什么会这样并且搜索并没有发现任何东西，我认为我一定是错的并进行了测试。

我创建了上面的场景，但在背景中我放置了一个 10x10 像素网格的测量图像。我在 viewDidLoad 中为 viewController 运行它：

```
[super viewDidLoad];
// Size to fit the screen
float height = [[UIScreen mainScreen] bounds].size.height;
height -= [UIApplication sharedApplication].statusBarFrame.size.height;
height -= self.navBar.frame.origin.y;
height -= self.navBar.frame.size.height;
CGRect frame = self.scrollView.frame;
frame.size.height = height;
self.scrollView.frame = frame;

frame.origin.y = 10;
testUIView *testView = [[testUIView alloc] initWithFrame:frame];
[self.scrollView addSubview:testView]; 
```

结果证实了我最黑暗的恐惧。网格显示在 testView 下，显示两个十像素的块。价值确实翻了一番 - 但为什么会这样，我该怎么办？

[编辑]

出于好奇，这里是插入视图的代码：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        [[NSBundle mainBundle] loadNibNamed:@"testUIView" owner:self options:nil];

        self.view.frame = frame;

        [self addSubview:self.view];
        [self.spinner startAnimating];
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:42:18.287

从您的代码中不清楚您是如何确定某物“加倍”的，但原因几乎可以肯定是您混淆了点和像素，并且您在 Retina 设备上运行。

几乎所有坐标（尤其是 中的东西`CGPoint`）都以点数给出。在 Retina 显示器上，每个点有 4 个像素（两行乘两列）。这称为`scale`，对于 Retina 显示器来说是“2”。有关更多详细信息，请参阅[在视图中支持高分辨率屏幕。](https://developer.apple.com/library/ios/#documentation/2DDrawing/Conceptual/DrawingPrintingiOS/SupportingHiResScreensInViews/SupportingHiResScreensInViews.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:01:06.690

这里的教训是“尽量保持观察力”以及“不要遗漏细节”。

x 和 y 值加倍，因为在 initWithFrame 中，框架直接应用于子视图，该子视图是来自 xib 的 IBOutlet。添加未修改的框架意味着 x 和 y 值保留在视图的坐标空间内。因此，视图出现在父视图中的 y=10 处，子视图出现在视图中的 y=10 处，导致布局将子视图放置在 y=20 处。

解决方案：在将其应用于子视图之前重置框架原点。

这是尖尖的帽子时间！

# mysql - mySQL 的包装器使其看起来像 SQL Server？

> ID：15465803
> 
> 赞同：3
> 
> 时间：2013-03-17T20:26:11.307
> 
> 标签：mysql, sql-server, odbc, driver

我们在小型家族企业中使用 Microsoft SQL Server 驱动的系统。这是我们的主要零售系统。

我厌倦了在内部运行服务器，而企业负担不起托管（远程）SQL Server 解决方案。家族企业是一家小型、稳定但（尚未）快速增长的零售商，因此没有大量的技术预算。

查看 Google 新推出的基于云的 SQL 服务，我发现它是 mySQL 而不是 SQL Server。

有谁知道使 mySQL 看起来像 SQL Server 的驱动程序等？

然后我们的店内系统可以像使用 SQL Server 一样使用基于云的 mySQL，我们就可以不再担心备份、服务器、正常运行时间等问题。

然后，我们可以利用节省的时间来赚取足够的收入来支付托管解决方案的费用！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T02:47:59.263

我也不知道翻译。但是，您是否查看过 SQL Server 的托管数据库服务之一，例如 SQL Azure 或 Amazon RDS。

SQL Server Azure ( [http://msdn.microsoft.com/en-us/library/windowsazure/ee336279.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee336279.aspx) ) 与完整的 SQL Server 安装不完全兼容，但它已经接近了。

Amazon 的关系数据库服务 ( [https://aws.amazon.com/rds/](https://aws.amazon.com/rds/) ) 允许您在 MySQL、Oracle 和 SQL Server 之间进行选择。它在后台运行完整的 SQL Server，但也有一些限制。

这两种服务都让您不必担心托管服务器本身。但是，诸如备份、索引维护和一些性能调整之类的数据库维护仍然取决于您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T00:38:36.753

简而言之，没有。[有关差异的更多详细信息](https://stackoverflow.com/questions/10616/differences-between-mysql-and-ms-sql)...... 归根结底，会有相当多的工作确保它可以正常工作。

此外，使用云不会让您不必担心事情，尤其是备份。只是这不再掌握在自己手中。

# java - 一次或多个查询加入所有表？

> ID：15465808
> 
> 赞同：2
> 
> 时间：2013-03-17T20:26:37.493
> 
> 标签：java, spring, jdbc

我正在使用 Spring JDBC，我想知道什么是最好的：加入所有表以便我可以获得我想要填充的对象的所有关联或执行多个选择查询？当您需要连接多个表以获取对象的所有数据时，如何处理 Spring 中的表连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:37:55.607

一般来说，最好加入从对象中引用的尽可能多的表。您带回的列数不太可能超过为其余数据多次调用数据库的缺点。

唯一真正的例外是如果您想要来自多对一关联的数据。因此，例如，如果您选择 a`Car`并在`Wheel`s 上加入，您将为每辆车返回四行，这并不是真正的问题。但是，如果您加入`Wheels`和`Seats`，您将获得 4 座汽车的 16 排座位。这种加入创建了笛卡尔积，因此在这种情况下可能需要进行第二次查询以获取座位，除非您只会选择几辆车。

要解决使用 Spring JDBC 加入时重写映射代码的问题，请考虑拆分 RowMappers。免责声明：我主要使用 Hibernate，对 Spring 的 JdbcTemplate 不太熟悉，尽管我已经使用了一些。让我举一个一对一连接的例子：

```
private Car mapCar(ResultSet rs) throws SQLException {
    Car car = null;
    while (rs.next()) {
        if (car == null) {
            Long carId = rs.getLong("ID");
            String model = rs.getString("MODEL");
            car= new Car(carId, model);
        }
        car.setEngine(mapEngine(rs));
    }
    return car;
} 
```

你可以有一个特定于汽车的`mapEngine()`方法，`CarRepository`或者你可以在你的类上创建一个你调用的公共`mapEngine()`方法。如果您使用后者，您可能会遇到名称冲突，因此您的选择变量的别名可能是有序的。即便如此，如果两者都有，您可能别无选择，只能创建一个单独的公共映射器。所以你可能有一个公共方法，如：`EngineRepository``mapCar()``CarMapper``EngineMapper``rs.getLong("ID")`

```
public Engine mapEngineShared(ResultSet rs) throws SQLException {
    Engine engine = new Engine();
    engine.setId("ENGINE_ID"); // Aliased from "ID"
    engine.setId("ENGINE_MODEL_TYPE"); // Aliased from "MODEL_TYPE"
    return engine;
} 
```

在以这种方式映射的任何查询中，请确保为您的引擎字段别名`ENGINE_`以与共享映射器兼容。这不是一个理想的解决方案，但可以让您避免到处都有重复的映射代码。

对于一对多关联，您需要使用 a`ResultSetExtractor`因为一次`RowMappers`只处理一行，并且会`Cars`为每个`Wheel`. 不过，方法是相同的，`RowMappers`在适当的地方重用。

如果由于数据模型和业务逻辑往往需要它们而最终大量使用复杂的连接，并且您发现映射器的创建很尴尬，那么您可能会考虑使用 ORM 解决方案来为您处理映射。再说一次，如果你没有真正看到不使用连接的任何性能问题，你最好很少使用它们并坚持 JdbcTemplate 的简单性。

# javascript - 如何将整个 YQL 结果保存在 javascript 对象中？

> ID：15465809
> 
> 赞同：2
> 
> 时间：2013-03-17T20:26:41.050
> 
> 标签：javascript, html, json, yql

我想将 YQL 查询的结果保存在 javascript 对象中

我的查询：

> SELECT * FROM html WHERE url="http://myurl.com" 和 xpath="/html/body/center/table[1]/tr"

我要怎么继续？我阅读了 YQL 的文档，但我认为它真的很复杂。我也在stackoverflow上搜索过，但它并没有真正帮助我。

该对象应该就像 JS 中的普通 JSON 对象一样。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-21T16:58:51.043

您可能无法一次性保存整个内容，但您可以通过获取您需要的信息来保存数据，将其组织成一个数组，然后保存该数组：

```
function getXML(Your_XML_URL) {
// Build the YQL query
var qryRSS = 'select * from rss where url=' + '"' + feed + '"';

// Initiate the YQL query
$.getJSON("http://query.yahooapis.com/v1/public/yql",
    {
        // These are the settings for your API call
        q: qryRSS,
        format: "json"
    },
    // Take the data you got from the YQL server and output it to the screen. The variable "data" holds the JSON you got back from the YQL server.
    function (data) {
        var myArrayName = [];
        // Create an object for each entry. If you don't want every entry in the XML files you can change data.query.results.item.length to whatever number you want.
        for (var i = 0; i < data.query.results.item.length; i += 1) {
            var singleEntry = {};
            dataLoc = data.query.results.item[i];

            var singleEntry.title = dataLoc.title;           //You would replace these
            var singleEntry.pub = dataLoc.pubDate;           //with the names of the tags
            var singleEntry.image = dataLoc.thumbnail.url;   //in your XML file.
            var singleEntry.url = dataLoc.link;
            var singleEntry.desc = dataLoc.description;

            //Add your object to the array.
            myArrayName.push(singleEntry);

        }
        localStorage.setItem("mySavedItem", JSON.stringify(myArrayName));
    });
} 
```

然后您可以稍后通过以下方式检索该信息：

```
var myXMLArray = JSON.parse(localStorage.getItem("mySavedItem"));
console.log(myXMLArray[0].title);
console.log(myXMLArray[2].pub); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T20:39:07.023

您可以使用 JSONP 方法获取此数据。脚本：

```
<script src="http://query.yahooapis.com/v1/public/yql?q=SELECT%20*%20FROM%20html%20WHERE%20url%3D%22http%3A%2F%2Fghse%3A12-13%40www.ghse.de%2Fvplan%2F12%2Fc%2Fc00082.htm%22%20and%20xpath%3D%22%2Fhtml%2Fbody%2Fcenter%2Ftable%5B1%5D%2Ftr%22&format=json&callback=callback"></script> 
```

用于处理响应的回调：

```
function callback(data) {
    console.log(data);
} 
```

[http://jsfiddle.net/bdCHZ/](http://jsfiddle.net/bdCHz/)

另请查看 YQL 控制台[测试器](http://y.ahoo.it/t6MXk)以获取详细信息。

这只是一个如何手动检索此 JSON 的示例。您可以使用 jQuery 等来发出 JSONP 请求。

# mysql - mysql：找不到记录时如何返回NULL结果？

> ID：15465811
> 
> 赞同：0
> 
> 时间：2013-03-17T20:26:48.130
> 
> 标签：mysql

这是我正在做的 MySQL：

```
mysql> select "Le Café de la Mairie" as titre, "15 pl Mairie" as adresse1, id from ville where sound=soundex('FERTE SOUS JOUARRE') and cp='77260';
+-----------------------+--------------+-----+
| titre                 | adresse1     | id  |
+-----------------------+--------------+-----+
| Le Café de la Mairie  | 15 pl Mairie | 447 |
+-----------------------+--------------+-----+
1 row in set (0.00 sec)

mysql> select "Le Café de la Mairie" as titre, "15 pl Mairie" as adresse1, id from ville where sound=soundex('FERTE SOUS JOUARRE') and cp='77261';
Empty set (0.00 sec)

mysql> 
```

这就是我想要的：

```
mysql> select "Le Café de la Mairie" as titre, "15 pl Mairie" as adresse1, id from ville where sound=soundex('FERTE SOUS JOUARRE') and cp='77260';
+-----------------------+--------------+-----+
| titre                 | adresse1     | id  |
+-----------------------+--------------+-----+
| Le Café de la Mairie  | 15 pl Mairie | 447 |
+-----------------------+--------------+-----+
1 row in set (0.00 sec)

mysql> **(same query but dont find a record)**;
+--------------+------------+------+
| titre        | adresse1   | id   |
+--------------+------------+------+
| NULL         | NULL       | NULL |
+--------------+------------+------+

mysql> 
```

当然，我已经 google & search stackoverflow。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:31:49.107

```
SELECT
    t.*
FROM 
    (SELECT 1) AS dummy
  LEFT JOIN
    (SELECT ... your select here) AS t
      ON TRUE ; 
```

所以，坚持这个问题：

```
SELECT
    t.*
FROM 
    (SELECT 1) AS dummy
LEFT JOIN
    ( SELECT
        "Le Café de la Mairie" as titre,
        "15 pl Mairie" as adresse1,
        id
      FROM ville
      WHERE sound=soundex('FERTE SOUS JOUARRE')
      AND cp='77261') AS t
ON TRUE; 
```

# javascript - 与可汗学院的嵌入式 youtube 播放器互动

> ID：15465812
> 
> 赞同：0
> 
> 时间：2013-03-17T20:26:48.997
> 
> 标签：javascript, iframe, youtube-api

我想知道是否有一种方法可以与 teh Khan Academy 的嵌入式代码中的 youtube 视频的 iframe 进行交互（它呈现一个带有 youtube iframe 的 iframe）。

我正在尝试从我的页面内播放/暂停 youtube 视频，以及查询视频的进度。

我能找到的只是这个信息页面（它根本没有任何信息）：[http ://www.khanacademy.org/about/blog/post/29139422372/embeddable-khan-academy-video-player](http://www.khanacademy.org/about/blog/post/29139422372/embeddable-khan-academy-video-player)

我会简单地嵌入 youtube 视频本身，但我希望登录的学生在 KA 获得学分以观看视频，所以我需要使用他们的嵌入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T05:47:35.003

如果你想自动观看视频，你可以在 selenium 的控制下打开一个网络浏览器。

*   制作要观看的视频列表（使用 API，或从网站提取信息）
*   打开视频页面，它会加载但不开始播放
*   点击视频元素开始播放
*   循环观看视频是否完成（进度在视频中，我不会为此烦恼），视频帧关闭并显示结果点屏幕，您可以检测到

注意跟踪观看的视频，同一视频可以有多个 URL。还有一些视频有与此相关的问题，如果你是在无人看管的情况下观看，你应该把它们关掉。

一些主题有足够的视频资料，可以为你提供可笑听众的地球徽章（到目前为止，我找到了其中的七个，但这可能会随着重新排列而改变）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-20T13:25:34.050

那是2个不同的东西。你不能同时做这两件事。所以你应该打开2个问题。

1/ 如何与 Youtube 播放器交互，并嵌入它（但你没有提到你想嵌入它的位置）

2/ 如何从可汗学院 API 获取奖励积分（但我们不知道您希望如何呈现数据，以及在哪里呈现）。

3/ 制作一个控制播放器的脚本，同时调用函数从可汗学院获取数据。

您的要求没有很好地描述。我无法真正理解您要达到的目标。是作为老师吗？具体情况如何？
例如，我不明白“从我的页面内部”。你是什​​么意思？您想为您的学生制作自己的私人网站，进行不同的演示，从 Youtube 和可汗学院获取数据吗？我们需要关于最终目标的解释。

因此，要尝试回答您的第一个问题，您可以在互联网上获得很多帮助，例如，阅读以下文档：

[http://tutorialzine.com/2015/08/how-to-control-youtubes-video-player-with-javascript](http://tutorialzine.com/2015/08/how-to-control-youtubes-video-player-with-javascript)

这里有关于可汗学院 API 的所有文档，用于获取积分、徽章等……

一个广泛的答案是编写脚本并将其粘贴到此处。我认为我们无法为您的问题提供更准确的答案，因为您需要开始编写代码，然后针对您将遇到的问题提出准确的问题。你的问题需要一个问题一个问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-29T04:36:09.523

不要粗鲁，但您链接到的页面清楚地解释了如何做到这一点。底部的嵌入代码也嵌入了点跟踪。然而，学生需要登录才能获得积分。只需单击共享菜单，然后转到嵌入。只需复制并粘贴即可。它包括视频底部的点。

# java - 如何通过配置更改管理 Android 上的蓝牙连接？

> ID：15465817
> 
> 赞同：7
> 
> 时间：2013-03-17T20:27:16.323
> 
> 标签：java, android, multithreading, sockets, bluetooth

**问题：**
如何管理（连接、读取、写入、断开）通过配置更改持续存在的蓝牙连接？

[首选与使用ActionBarSherlock](http://actionbarsherlock.com)的设备版本 2.2 "Froyo" 兼容的解决方案。

**问题...**

*   既`BluetoothDevice`不能也`BluetoothSocket`不能保留在`onSaveState`.

*   为了[让我的应用程序保持响应](http://developer.android.com/training/articles/perf-anr.html)，12 秒的阻塞调用[`BluetoothSocket.connect()`](http://developer.android.com/reference/android/bluetooth/BluetoothSocket.html#connect())必须在单独的线程上进行。启动 a`Runnable`是线程化长任务的推荐方法，但尝试在配置更改时恢复是一场噩梦。官方文档指出了三种不同的解决方案。

    *   使用[`getLastNonConfigurationInstance()`](http://developer.android.com/reference/android/app/Activity.html#getLastNonConfigurationInstance())，已弃用（说真的？！）。

    *   `android:configChanges="keyboardHidden|orientation"`像[BluetoothChat Sample](http://developer.android.com/tools/samples/index.html)一样设置。但是，这并不能说明所有类型的配置更改。

    *   取消并重新启动[Shelves Example](http://code.google.com/p/shelves/)等任务。在这种情况下，这可能会再浪费 12 秒。

**更新 1**

*   进一步的研究使我找到了[asyncTaskLoader](http://developer.android.com/reference/android/content/AsyncTaskLoader.html)，但似乎这只能在完成时更新 UI，而不能提供更新。

*   BluetoothHDP 示例使用服务。服务似乎专注于进程间通信以及在活动生命周期之外持续存在的需要。我不需要这些功能中的任何一个。

**更新 2**

[正如 Reuben 所指出的](https://stackoverflow.com/a/15731702/884677)，[`Fragment.setRetainInstance(bool)`](http://developer.android.com/reference/android/app/Fragment.html#setRetainInstance(boolean))已经取代了已弃用的`getLastNonConfigurationInstance()`。在这一点上，似乎最好的选择是使用`setRetainInstance(true)`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T16:16:34.197

我将通过使用`Service`可以处理您的蓝牙连接的方法来解决此问题，并按照[此答案中的说明使该服务与您的 Activity 对话。](https://stackoverflow.com/a/4739898/72746)

然后，您可以使用 ASyncTask 简单地显示/隐藏对话框，并在轮换时取消/重新启动 ASyncTasks，`Shelves Example`正如您提到的那样。

服务并没有那么可怕，它可能是解决您问题的最佳工具。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T18:41:20.933

切勿将 App 模型（逻辑或数据）放在 Visual/UI 组件中。如您所见，它们来来去去，并发生变化。

存放非 UI 相关内容的地方，例如数据收集、实时连接、线程等：

*   应用程序类。包含所有其他组件的生命周期。几乎就像一个全球单身人士。您可以将其用于临时存储。

例子：

```
public class App extends Application {

  private static Beer sBeer;

  public static void brbHoldMyBeer(Beer b){
    sBeer = b;
  }

  public static Beer imBackWheresMyBeer(){
    return sBeer;
  }

} 
```

此外，在 Application 类中拥有一个静态线程 Executor 服务，将有助于保留正在运行的任务。

*   正在运行的后台服务。哪些活动、片段等可以绑定/取消绑定，并发布命令/请求。这是应用范围内运行的进程和数据的推荐位置。

*   一个非视觉片段，带有`setRetainInstance(true)`. 这里的非可视化意味着它是一个附加到 Activity 但不显示任何视图的虚拟片段。它只是用作 Activity 的可保留对象持有者。这建议用于活动范围的流程和数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T16:21:43.323

您可以尝试使用可以处理所有内容并在必要时调用主要活动的[单例模式。](http://en.wikipedia.org/wiki/Singleton_pattern)

所以这是获取 MySingleton 对象实例的一种静态方法，每次调用 getInstance 时都是同一个实例。您可以在其中“存储”所有蓝牙对象，它不会被破坏并且可以从每个活动中访问。

```
public class MySingleton { 
    private static MySingleton instance; 
    public static MySingleton getInstance() { 
        if (null == instance) { 
            instance = new MySingleton(); 
        } 
    return instance; 
} 

    private MySingleton() { 
    } 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T16:32:21.910

有很多解决方案。如果您不使用 Fragments，那么最简单的选择是覆盖 onRetainNonConfigurationInstance()。不要介意 API 已被弃用，这只是因为他们希望您使用 Fragments（公平地说，Fragment.setRetainInstance() 使整个问题成为理所当然的事情）。这个 API 很长一段时间都不会去任何地方。

我要做的是覆盖 onRetainNonConfiguration() 以返回“this”，即对死 Activity 实例的引用，然后从 onCreate() 复制您需要的对象引用，即：

```
Object obj = getLastNonConfigurationInstance();
if (obj != null) {
    MyActivity deadActivity = (MyActivity)obj;
    this.foo = deadActivity.foo;
    this.bar = deadActivity.bar;
    ...
} 
```

或者，您*可以*使用服务，但我个人不喜欢它们。毫无疑问，这对于做跨进程的东西很有用，但除此之外，它们是寻找问题的解决方案。

最后，作为一般顺序，您可以安全地将“全局”数据填充到您的应用程序上下文中。为此，您将 android.app.Application 子类化并在清单中使用 <application android:name="MyApp"> 属性。在此处在全局静态数据中保留对 Application 对象的引用也很有用，因此 AsyncTasks 和其他无上下文代码始终可以访问 Application 上下文，而无需无缘无故地传递 Context 参数。

```
class MyApp extends Application {
...

    public static MyApp context;
    ...

    @Override
    public void onCreate() {
        super.onCreate();

        context = this;

        ... set up global data here ...
    }
...
} 
```

# javascript - 跨站 AJAX 错误

> ID：15465818
> 
> 赞同：1
> 
> 时间：2013-03-17T20:27:16.223
> 
> 标签：javascript, ajax, jsonp, nokia-s40, cross-site

在诺基亚 Series 40/云预览版上部署 ajax 时不会执行（PS - 诺基亚使用代理服务器在手机上运行 Web 应用程序）。ajax 调用在桌面浏览器和本地预览（诺基亚 Web 工具）中工作。

```
</head>
    <script language="javascript" type="text/javascript">
    function findUserCity(){
        $.ajax({
          url : "http://api.wunderground.com/api/*******/geolookup/q/autoip.json",
          dataType : "jsonp",
          success : function(parsed_json) {       
            var city = parsed_json['response']['results'][0]['name'];
            var cityId = parsed_json['response']['results'][0]['l'];        
            document.getElementById("userCityId").value=cityId;          
            document.getElementById("userCity").value=city;
            findUserLocationWeather(cityId);        
          }
        }); 
    }
    </script>
    </head>
    <body onload="findUserCity();jsonDataSource.init();">
    <div class="container" >
        <div class="strip view0" id="views">
            <div id="homeview">         
                <div id="currentWeatherContainer" >
                </div>          
                <div class="inputContainer">                                                                            
                    <input type="hidden" id="userCityId" value=""/>
                    <input type="hidden" id="userCity" value=""/>

                </div>                                                  
            </div>
        </div>

    </div>
    </body> 
```

完整代码 - [http://pastebin.com/dZFKPv1s](http://pastebin.com/dZFKPv1s)

# c - 十进制素数转二进制

> ID：15465820
> 
> 赞同：0
> 
> 时间：2013-03-17T20:27:46.270
> 
> 标签：c, binary, decimal

我尝试将十进制素数转换为二进制格式...我有 2 个不同的工作代码块，但我不知道如何与它们集成。

这是我的素数代码：

```
#include <stdio.h>
#include <math.h>

int main(){
    int num, sr, num2;
    int isPrime = 1; 
    printf("Prime\t    | Binary\n");
    printf("============================\n");
    for(num=2; num<=100; num++){
        sr = (int) sqrt(num);
        for(num2=2; num2 <= sr; num2++){
            //num2 <== sr to stop the innner loop
            if(num%num2 == 0){
                isPrime = 0;
                break;
            }
        }
        if(isPrime){
            printf("%d\t    |\n", num);
            isPrime = 1;
        }else{
            isPrime = 1; 
        }
    }
    return 0;
} 
```

这是十进制到二进制：

```
int decimalNumber,remainder,quotient;
int binaryNumber[100],i=1,j;
while(quotient!=0){
     binaryNumber[i++]= quotient % 2;
     quotient = quotient / 2;
}

for(j = i -1 ;j> 0;j--)
     printf("%d",binaryNumber[j]); 
```

我想要的是：

```
Prime       | Binary
=====================
2           | 10
3           | 11
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T20:57:52.383

您基本上可以将代码复制并粘贴到正确的位置（稍作更改或 2）。

```
...
如果（是素数）{
   整数商 = 数；
   int binaryNumber[100],i=1,j;

   printf("%d\t |", num);

   而（商！= 0）{
      binaryNumber[i++]= 商 % 2;
      商 = 商 / 2;
   }

   for(j = i -1 ;j> 0;j--)
      printf("%d",binaryNumber[j]);

   printf("\n");
   isPrime = 1;
}
...

```

[测试](http://ideone.com/QAjhGT)。

但是**功能**可能更好。它看起来像：

```
void printBinary(int decimalNumber)
{
    int quotient = decimalNumber;
    int binaryNumber[100],i=1,j;
    while(quotient!=0){
        binaryNumber[i++]= quotient % 2;
        quotient = quotient / 2;
    }

    for(j = i -1 ;j> 0;j--)
        printf("%d",binaryNumber[j]);
} 
```

你会用它来称呼它

```
printBinary(num); 
```

[测试](http://ideone.com/syEYXZ)。

# java - 在 Hadoop 中解析 XML 文件

> ID：15465823
> 
> 赞同：1
> 
> 时间：2013-03-17T20:28:06.667
> 
> 标签：java, hadoop, xml-parsing, mapreduce

嗨，我已经在 VMware 上以伪分布式模式安装了 hadoop-0.20.2-cdh3u5。我想使用这个已建立的环境解析 XML 文件。我可以通过编写 map/reduce 代码然后将它们作为*.jar*文件导出到集群上然后在集群上执行它们来做到这一点。我无法弄清楚的是如何将 java 解析代码（使用 SAXON 解析器）放入 map/reduce 类中，然后在输出中生成 csv 文件。

所以我有这个解析代码：（在这里使用 SAXon 解析器）

```
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;
import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Unmarshaller;

public class JAXBC {
    private JAXBContext context;
private Unmarshaller um;
public JAXBC() throws JAXBException
{
    // creating JAXB context and instantiating Marshaller
    JAXBContext context = JAXBContext.newInstance(ConnectHome.class);

    // get variables from the xml file
    um = context.createUnmarshaller();

}

  public ConnectHome convertJAXB(String strFilePath) throws FileNotFoundException,     
   JAXBException 
   { 
      return ((ConnectHome) um.unmarshal(new FileReader(strFilePath)));
   }
 } 
```

我有类似这样的 XML：（此处的示例元素）

```
 <Course>
   <ID>1001</ID>
   <Seats>10</Seats>
   <Description>Department: CS , Faculty: XYZ</Description>
   <Faculty>
       <Name>XYZ</Name>
       <Age>30</Age>
   </Faculty>
 </Course> 
```

现在我的问题是我无法弄清楚如何以 map/reduce 格式编写这段特定的代码。我曾在 yahoo 上将此特定教程称为[hadoop和各种教程。](http://java.dzone.com/articles/hadoop-practice)

所以我的问题是有人可以让我知道如何编写这样的 map reduce 代码，然后从中创建一个 jar 文件。

让我知道是否需要其他信息。我试图尽可能地短。

提前致谢。

注意：我知道这在 mapreduce 世界中听起来像是一个非常微不足道的问题，而我在这里展示的这个 XML 只是其中包含几个标签的单个标签的一个示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:38:06.273

这是你想要的 [https://github.com/studhadoop/xmlparsing-hadoop/blob/master/XmlParser11.java](https://github.com/studhadoop/xmlparsing-hadoop/blob/master/XmlParser11.java)

```
line 170 :if (currentElement.equalsIgnoreCase("name")) 
line 173 :else if (currentElement.equalsIgnoreCase("value")) 
```

name 和 value 是我的 xml 文件中的标签。在您的情况下，如果您需要处理 FACULTY 中的标签，您可以使用名称代替名称，使用年龄代替值。

```
conf.set("xmlinput.start", "<Faculty>");
 conf.set("xmlinput.end", "</Faculty>"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-01T17:30:21.567

对于 XML，您通常希望将其放入 AVRO 等协议缓冲区并从那里处理。hadoop 生态系统是在处理非结构化数据并将其转换为 hdfs 结构化数据的过程中成长起来的……因此，结构化数据的接收和处理还不是生态系统的直观部分。Mahout 在其 Bayes 包中有一些用于 XML 接收的代码，其工作方式与 Sree 的答案非常相似。

# c# - 从对象中获取正确的类名以进行排序算法

> ID：15465826
> 
> 赞同：0
> 
> 时间：2013-03-17T20:28:27.447
> 
> 标签：c#, sorting, reflection

我正在使用反射枚举器类从一个基类类型中获取所有派生类。

```
 public static Type[] GetArrayOfType<T>() where T : class
    {
        List<Type> objects = new List<Type>();

        foreach (Type type in Assembly.GetAssembly(typeof(T)).GetTypes()
            .Where(myType => myType.IsClass && !myType.IsAbstract && myType.IsSubclassOf(typeof(T))))
        {
            objects.Add(type);
        }

        // AlphaNumeric Sorting
        objects.Sort(AlphaNumericSort.Comparer);        // Name property is as wanted

        return objects.ToArray();
    } 
```

我想在同一类中对列表进行排序，因为它是静态的，并且在调用依赖它的所有后续 GUI 代码之前调用。

```
public class AlphaNumericSort : IComparer<object>
{
    static IComparer<object> comparer = new AlphaNumericSort();

    public int Compare(object x, object y)
    {
        string s1 = x.ToString();       // Gives me the FullName
        string s1a = x.GetType().Name;  // Gives me "RuntimeType"

    ...snip 
```

如何在比较器中获得正确的短名称或类的名称？我可以获取 RuntimeType 的 FullName 或对象名称。

编辑：

如果我尝试从 Type

```
public class AlphaNumericSort : IComparer<Type>
{
    static IComparer<Type> comparer = new AlphaNumericSort();

    public int Compare(Type x, Type y)
    {
        string s1 = x.Name;
        string s2 = y.Name; 
```

然后下面一行

```
objects.Sort(AlphaNumericSort.Comparer); 
```

给我

*参数 1：无法从 'System.Collections.Generic.IComparer' 转换为 'System.Comparison'*

和

*'System.Collections.Generic.List.Sort(System.Comparison)' 的最佳重载方法匹配有一些无效参数*

编辑2：

```
 public static IEnumerable<T> GetEnumerableOfType<T>(params object[] constructorArgs) where T : class, IComparable<T>
    {
        List<T> objects = new List<T>();

        foreach (Type type in Assembly.GetAssembly(typeof(T)).GetTypes()
            .Where(myType => myType.IsClass && !myType.IsAbstract && myType.IsSubclassOf(typeof(T))))
        {
            objects.Add((T)Activator.CreateInstance(type, constructorArgs));
        }

        // AlphaNumeric Sorting
        objects.Sort(AlphaNumericSort.Comparer);   // ERROR!!!

        return objects;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T20:32:46.720

除非你不能使用 LINQ`OrderBy`应该需要更少的代码。

```
 return objects.OrderBy(x => x.FullName).ToArray(); 
```

您还可以从中派生比较器`IComparer<Type>`而不是`IComparer<object>`（因为您的列表实际上是`Type`对象列表）并在那里使用`Name`属性而不进行强制转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T20:31:31.790

您可以在比较器中将对象转换为类型，并使用您想要的任何类型字段。

```
 public int Compare(object x, object y)
 {
    Type t1 = (Type)x; 
```

# ios - 使用 Autolayout 使三个对象居中

> ID：15465829
> 
> 赞同：5
> 
> 时间：2013-03-17T20:28:38.070
> 
> 标签：ios, objective-c, autolayout

我有一个包含三个标签的视图。

第一个标签放置在最顶部。第三个标签放置在距底部 50px 处。

我想要做的是始终使用自动布局将第二个标签放在这两个标签的中心，但我不知道该怎么做。

问题是第二个标签不在视图的中心。

我尝试将两个垂直间距约束设置为小于或等于初始值，但它不起作用。

只能使用自动布局来做到这一点吗？我考虑过添加另一个视图，但这看起来不是一个好的解决方案..

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:23:52.233

我不认为你可以用自动布局来做到这一点。但是覆盖`layoutSubviews`（或者`viewDidLayoutSubviews`如果你不使用`UIView`子类）将标签 2 居中在标签 1 和标签 3 之间是微不足道的（一定`[super layoutSubviews]`要先打电话）。

编辑：这是一些示例代码。

```
- (void)layoutSubviews {
    [super layoutSubviews];

    _label2.center = CGPointMake(_label2.center.x, (CGRectGetMaxY(_label1.frame) + CGRectGetMinY(_label3.frame)) / 2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:26:27.933

我认为我的另一个答案是不正确的。我认为最简单的方法是创建一个`NSView`保存标签的标签，第二个标签设置在它的中心。我之前的回答假设当自动布局系统需要在视图之间分割空间时，它会平等地做到这一点，但一些快速测试表明它没有。

我认为目前使用自动布局不可能说某个空间应该等于另一个空间。

# c# - 在 silverlight 画布中移动对象

> ID：15465837
> 
> 赞同：0
> 
> 时间：2013-03-17T20:29:03.790
> 
> 标签：c#, silverlight, silverlight-5.0

```
<UserControl x:Class="MyGameSilverlight.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400" KeyDown="OnKeyDown">

    <Grid x:Name="LayoutRoot" Background="White">

            <Canvas x:Name="c1" Background="Green" Margin="0,0,130,80" RenderTransformOrigin="0.463,0.5">
                <Rectangle x:Name="obj" Height="60" Width="80" Canvas.Left="45" Canvas.Top="45" Fill="Aqua" />
            </Canvas>

    </Grid>
</UserControl> 
```

[代码背后]

```
private void OnKeyDown(object sender, KeyEventArgs e)
        {
            switch (e.Key)
            {
                case Key.Right:
                    Canvas.SetLeft(obj, Canvas.GetLeft(obj) + 20);
                    break;

                case Key.Left:
                    Canvas.SetLeft(obj, Canvas.GetLeft(obj) - 20);
                    break;
                // more here
            }
        } 
```

我在画布中有简单矩形的代码。现在我想在按键上移动这个矩形。例如，当我按下右箭头键时，矩形应该从其初始位置向右移动 20px。

代码背后的代码是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:31:45.413

您可以通过静态方法[Canvas.GetLeft](http://msdn.microsoft.com/en-us/library/system.windows.controls.canvas.getleft%28v=vs.95%29.aspx)、[Canvas.GetTop](http://msdn.microsoft.com/en-us/library/system.windows.controls.canvas.gettop%28v=vs.95%29.aspx)、[Canvas.SetLeft](http://msdn.microsoft.com/en-us/library/system.windows.controls.canvas.setleft%28v=vs.95%29.aspx)和[Canvas.SetTop](http://msdn.microsoft.com/en-us/library/system.windows.controls.canvas.settop%28v=vs.95%29.aspx)`Canvas.Left`在代码中获取和设置附加属性：`Canvas.Top`

```
double left = Canvas.GetLeft(obj) + 20;
double top = Canvas.GetTop(obj) + 20;
Canvas.SetLeft(obj, left);
Canvas.SetTop(obj, top); 
```

* * *

似乎问题是关于如何接收或处理键盘输入。您必须附加（例如）一个 KeyDown 处理程序，但您必须知道 UIElement 需要具有键盘焦点才能接收键事件。由于 Rectangle 和 Canvas 都不是可聚焦的（请参阅[Focus Overview](http://msdn.microsoft.com/en-us/library/cc903954%28v=vs.95%29.aspx)），您可以将处理程序附加到您的 MainPage：

```
<UserControl ... KeyDown="OnKeyDown">
    <Canvas>
        <Rectangle Name="obj" .../>
    </Canvas>
</UserControl> 
```

在处理程序中，您将像这样处理各个键：

```
private void OnKeyDown(object sender, KeyEventArgs e)
{
    switch (e.Key)
    {
        case Key.Right:
            Canvas.SetLeft(obj, Canvas.GetLeft(obj) + 20);
            break;
        // more here
    }
} 
```

# django - Django Celery Chord 不执行

> ID：15465839
> 
> 赞同：3
> 
> 时间：2013-03-17T20:29:03.767
> 
> 标签：django, celery, django-celery, djcelery

我有一个程序可以通过 Python 的 itertools 生成大量产品列表；基本上是一大组各种单词组合。通过 products() 函数运行多个集合。我想做的是让 Celery 帮助解决这个问题，将每组分配给不同的 Celery 任务，然后最后将它们组合起来。我的理解是和弦是做到这一点的方法。

所以基本上我有这个：

```
callback = tabulate_results.subtask()
header = []
for combo in combos_to_run:
    header.append(run_product.subtask(args=(object_terms, combo)))
result = chord(header)(callback)
result.get() 
```

以及它的两个支持性、精简的功能：

```
from celery import subtask, chord
@task()
def run_product(object_list, combo_set):
    results = []
    for result in product(object_list, *combo_set):
        results.append(result)
    return results

@task()
def tabulate_results(result_sets):
    master_set = []
    for result_set in result_sets:
        master_set.extend(result_set)

    return master_set 
```

起初，和弦任务出现在 celeryev 中，但我在这里引用了一个问题：[Django Celery - Missing something but I don't know what? 有结果，但无法让他们](https://stackoverflow.com/questions/11587558/django-celery-missing-something-but-i-have-no-idea-what-have-results-but-can)知道 Celery 返回与通过 MySQL 进行结果跟踪有关的错误。我确实使用 MySQL 作为我的结果后端，并将其切换到 Redis 摆脱了它。但是，现在我遇到了一个新问题。当我通过 Django shell 运行代码时，celeryev 中没有出现任何任务，除此之外没有返回任何内容：

```
R IS: <GroupResult: 9f658e8d-591f-4fa9-9e79-4db0c51e8331 [9b199d1e-061f-413c-9521-4a3051dd121a, 2effbfb5-c9dc-4569-a63f-656c233a9387, 80911a60-6a22-46bb-83a1-d5a84c659794, 70acfa43-8ffe-4bc8-8ff1-1df6def035e1, dd417423-d1f6-44eb-8c4b-2ded40d7614f, fbff8adc-815d-459c-b914-b30528dbbd39]> 
```

基本上是一条 Celery 消息，但没有数据。代码也永远不会返回，我的光标悬空。当我按 C 键退出时，行号是 Celery 中似乎正在等待的东西。我不知道会发生什么，因为 celeryev 没有给我任何任务。我已经确认其他任务确实显示在 celeryev 中。

我已经正常测试了我的函数，没有将它们作为 Celery 任务运行，并且它们正常返回。

**简短版本** 我试图让 Celery 和弦帮助我的 Django 应用程序中的密集 Python 任务，但它们似乎没有返回任何结果或进入 celeryev。Redis 后端。芹菜版本 3.0.15。姜戈 1.4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:02:37.003

首先，让一个任务等待另一个任务的结果通常被认为是不好的做法（这就是为什么应该使用链式子任务）——[来源](http://docs.celeryproject.org/en/latest/userguide/tasks.html?highlight=bad#avoid-launching-synchronous-subtasks)

除此之外，您为和弦粘贴的语法不正确。这是相关链接： [http](http://docs.celeryproject.org/en/master/getting-started/next-steps.html#chords) ://docs.celeryproject.org/en/master/getting-started/next-steps.html#chords 。除其他问题外，您的代码不会将任何任务传递给和弦。和弦只是一组作为一个组处理的任务，之后触发回调。从文档中，这是和弦的正确语法：

```
>>> from celery import chord
>>> from proj.tasks import add, xsum

>>> chord((add.s(i, i) for i in xrange(10)), xsum.s())().get()
90 
```

请注意，和弦有两个参数，一方面是初始任务组，另一方面是回调（用逗号分隔）。

这是一个开始，但听起来花更多时间在文档上会比任何事情都更有帮助。

# android - textview 和 imageview 的顺序导致未知原因崩溃

> ID：15465849
> 
> 赞同：0
> 
> 时间：2013-03-17T20:29:53.747
> 
> 标签：android

我有一个图像视图，我想在它上面加上文字。因此，在相对布局中，我将 textview 放在 imageview 之后，它在顶部没问题。但是当我在我的设备上测试应用程序时，它会在尝试更改文本时崩溃。

```
myText = (TextView) findViewById(R.id.percentText);
myText.setText(percentage+"%"); 
```

奇怪的是，当我简单地更改顺序时，先放 textview 然后再放 imageview，它不会崩溃。但文字在图像后面，看不到。任何人都知道为什么这可能会给我带来麻烦？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:48:14.250

像这样使用 FrameLayout 试试这个..

```
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_gravity="center_vertical"
            android:layout_margin="10dp"
            android:background="@drawable/popup_addphoto" >

            <ImageView
                android:id="@+id/imgaddcontAddphoto"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/addphoto"
                android:contentDescription="@string/app_name"
                android:scaleType="centerCrop" />

            <TextView
                android:id="@+id/txtphoto"
                style="@style/txt_sign_up"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="bottom|center_horizontal"
                android:gravity="center"
                android:padding="2dp"
                android:text="@string/addphoto" />
        </FrameLayout> 
```

# django - Django 反向包含/图标

> ID：15465858
> 
> 赞同：14
> 
> 时间：2013-03-17T20:30:35.707
> 
> 标签：django, django-models, django-queryset

在[这个](https://stackoverflow.com/questions/472063/mysql-what-is-a-reverse-version-of-like)问题中解决`LIKE`了SQL中反向操作的问题，例如如果字段名称是“Peter Johnson”，我们可以通过这样的查询找到它：

```
select name from user where "Mr. Peter Johnson" like CONCAT('%', name, '%') 
```

有没有办法在 Django`Q`对象中做这样的事情（我正在构建一个大查询，所以使用原始 SQL 查询是不合理的）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2019-07-18T15:44:04.680

虽然附加功能确实为边缘情况提供了扩展的复杂功能，但附加功能应被视为最后的手段，并且可能会在某些时候被弃用。

这可以使用注释和过滤来完成。

```
from django.db.models import F, Value, CharField

MyUserModel.objects \
     .annotate(my_name_field=Value('Mr. Peter Johnson', output_field=CharField())) \
     .filter(my_name_field__icontains=F('name')) 
```

泛化：

```
from django.db.models import F, Value, CharField

@staticmethod
def reverse_case_insensitive_contains(model, search_field_name: str, search_field_value: str):
    return model.objects \
        .annotate(search_field=Value(search_field_value, output_field=CharField())) \
        .filter(search_field__icontains=F(search_field_name)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-27T20:38:43.563

不幸的是，Django 的 ORM 没有内置任何用于反向 LIKE 的东西。但是一个`.extra()`子句可能比原始查询更容易一些。

我用过这样的东西：

```
qs.extra(
    where=['''%s LIKE %s.%s'''],
    params=(
        "string to match",
        FooModel._meta.db_table,
        "bar_field",
    ),
) 
```

上面代码的问题是

1）它不适用于这种形式的sqlite后端（“语法错误接近。”，它确实适用于查询中硬编码的表/列名称......这并不总是安全且总是丑陋的）；

2）它需要 FooModel.bar_field 有数据`%in like style%`，所以你不能匹配任意字符串（这可以通过查询来修复，`%s LIKE CONCAT("%", %s.%s, "%")`但它会使其特定于 DBMS，这不好）。

Reversed LIKE 本身可能适用于任何主要的 DBMS，但我只在 sqlite 和 postgres 上对其进行了测试。

也许有人应该概括我的解决方案并为这个特定任务创建一个具有特殊子类查询集/管理器/Q 对象的可重用、与 DBMS 无关的应用程序......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-06-21T17:00:10.793

如果您使用的是最新版本的 Django（1.10 或更高版本）并使用 Postgres，则 ORM 可以处理此问题。[查看文档。](https://docs.djangoproject.com/en/1.11/ref/contrib/postgres/lookups/)

`trigram_similar`查找将为您提供所需的内容：

```
qs = MyModel.objects.filter(name__trigram_similar='Mr. Peter Johnson') 
```

不要忘记通过启用 pg_tgrm 扩展来启用此查找。您可以使用[django 迁移](https://docs.djangoproject.com/en/1.11/ref/contrib/postgres/operations/)来做到这一点。

您将需要添加`'django.contrib.postgres'`到您的`INSTALLED_APPS`设置中。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-18T07:59:17.883

```
output = MyModel.objects.filter(Q(name__contains="Mr. Peter Johnson")) 
```

# ubuntu - Ubuntu 崩溃机架上的 Graylog2 Web 界面？

> ID：15465859
> 
> 赞同：0
> 
> 时间：2013-03-17T20:30:48.617
> 
> 标签：ubuntu, graylog2

我一直在尝试在 ubuntu 12.10 上安装 graylog2。我终于让服务器运行起来了，但我似乎在使用 Web 界面时遇到了问题。当我启动乘客，然后访问 0.0.0.0:3000 时，我收到机架错误：

```
[ pid=17089 thr=5814240 file=utils.rb:176 time=2013-03-17 16:14:31.439 ]: *** Exception NoMethodError in PhusionPassenger::Rack::ApplicationSpawner (undefined method `values' for nil:NilClass) (process 17089, thread #<Thread:0x00000000b16fc0>):
from /var/lib/gems/1.9.1/gems/mongoid-2.4.5/lib/mongoid/railtie.rb:83:in `block in <class:Railtie>' 
```

我无法超越这一点，并且想知道是否有人对可能导致这种情况的原因提出任何建议。我正在遵循 graylog 网站上的指南。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T23:09:08.850

看起来您需要指定适当的环境。

我遇到了这个错误，并且能够通过环境选项解决它。

```
script/rails server -e production 
```

# java - 如何保存for循环中使用的最后一个整数

> ID：15465863
> 
> 赞同：-6
> 
> 时间：2013-03-17T20:31:19.270
> 
> 标签：java, for-loop, save

我目前正在开发一个程序，我需要保存最后使用的整数的值。

让我们考虑这种情况：

```
 for (int i = 1;i<=28123;i++){
        if (isAbundant(i)){
            if (i*2 <= 28123){
                sum2 += i*2;
            }
            if (i + [the previous value of i] <= 28123){
                sum2 += i + [the previous value of i];
            }
        }
    } 
```

我将如何让`previous value of i`实际代表 的先前值`i`？我需要另存`i`为另一个变量吗？如果是这样的话，不`i`就变成了电流`i`吗？

如果您认识到问题集，则此问题来自：请不要评论问题本身。请直接回答问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T20:33:38.360

尽管提出问题的方式（礼貌不花钱），但在循环之外定义 int i ：

```
int i=0;
for (i = 1;i<=28123;i++){
    if (isAbundant(i)){
        if (i*2 <= 28123){
            sum2 += i*2;
        }
        if (i + (i-1) <= 28123) { //your only ++ing i, so previous value is always i-1
            sum2 += i + (i-1);
        }
    }
}

//i is now accessable here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T20:35:20.977

尝试这个。但是，您可能需要根据您的要求处理第一次迭代的特殊情况。

```
int pre = 0;
for (int i = 1; i <= 28123; i++) {
    if (isAbundant(i)) {
        if (i * 2 <= 28123) {
            sum2 += i * 2;
        }
        if (i + pre <= 28123) {
            sum2 += i + pre;
        }
    }
    pre = i;
} 
```

# java - 随时间改变文本颜色

> ID：15465864
> 
> 赞同：1
> 
> 时间：2013-03-17T20:31:27.930
> 
> 标签：java, android

我希望我的文本颜色每秒改变一次，但我实际上并不知道如何开始做某事，这取决于经过的时间。你能给我几个例子，或者说我应该使用什么方法？也许我可以阅读以了解更多信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:33:16.603

首先，看一下`Timer`和`TimerTask`类。例如，要定期运行哔声，您可以使用以下内容：

```
timer.schedule(new RemindTask(),
        1250,        //initial delay
        1*100);  //subsequent rate 
```

}

改变文本的颜色 - 各种方法来做到这一点..

[来源](http://enos.itcollege.ee/~jpoial/docs/tutorial/essential/threads/timer.html)

[安卓定时器类](http://developer.android.com/reference/java/util/Timer.html)

[Android textColor不会改变颜色](https://stackoverflow.com/questions/12245240/android-textcolor-wont-change-colour)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T20:38:19.940

这样的事情应该可以解决问题，并且不需要使用`Timer`or `TimerTask`：

```
public class Test
{
    public static void main(String... args)
    {
        Thread thread = new Thread()
        {

            public void run()
            {
                while (true){
                    Random myColor = new Random();
                    TextView tv = tv.setTextColor(Color.rgb(myColor.nextInt(255), myColor.nextInt(255), myColor.nextInt(255)));
                    try
                    {
                        Thread.sleep(1000); // 1 second
                    } catch (Exception e)
                    {
                        e.printStackTrace();
                    }
                }
            }
        };
        thread.start();
    }
} 
```

# iphone - 跨 iOS 平台的视频规格

> ID：15465867
> 
> 赞同：0
> 
> 时间：2013-03-17T20:31:32.367
> 
> 标签：iphone, ios, ipad, video

我一直在按照 iOS 图形和图标人机界面指南（[https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages ）在网上搜索视频规范.html#//apple_ref/doc/uid/TP40006556-CH14-SW1](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW1)）但我能找到的最多的是在“视频技术”下的“媒体层”部分中提到的（[http://developer.apple.com/库/ios/#documentation/miscellaneous/conceptual/iphoneostechoverview/MediaLayer/MediaLayer.html](http://developer.apple.com/library/ios/#documentation/miscellaneous/conceptual/iphoneostechoverview/MediaLayer/MediaLayer.html)）。

具体来说：

> iOS 中的视频技术支持播放具有 .mov、.mp4、.m4v 和 .3gp 文件扩展名并使用以下压缩标准的电影文件：
> 
> *   H.264 视频，最高 1.5 Mbps，640 x 480 像素，每秒 30 帧，H.264 基线配置文件的低复杂度版本，具有最高 160 Kbps 的 AAC-LC 音频，48 kHz，.m4v 立体声音频， .mp4 和 .mov 文件格式
>     
>     
> *   H.264 视频，最高 768 Kbps，320 x 240 像素，每秒 30 帧，Baseline Profile 最高 1.3 级，AAC-LC 音频最高 160 Kbps，48 kHz，立体声音频格式为 .m4v、.mp4 和 . mov文件格式
>     
>     
> *   MPEG-4 视频，最高 2.5 Mbps，640 x 480 像素，每秒 30 帧，具有最高 160 Kbps 的 AAC-LC 音频的简单配置文件，48 kHz，.m4v、.mp4 和 .mov 文件格式的立体声音频

我的问题：这些是所有平台的唯一选择吗？那么，640x480 和 30fps 的 H.264 视频在配备视网膜的 iPhone 或配备非视网膜的 iPad 或 iPad mini 上是否具有相同的质量？或者我们应该为 iPhone 5 使用 640x1136 视频，为 iPhone 4（非视网膜）使用 320x480 视频，为带有视网膜的 iPad 使用 2048x1536 视频？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T17:48:29.927

该信息已过时。确切的规格取决于硬件，例如 iPad3 技术规格在[这里](http://support.apple.com/kb/sp647)。您必须查找特定设备的信息并查看支持的 h.264 配置文件。640x480 基线适用于非常旧的硬件，例如 iPhone 3G。

# c# - 清除所有主流浏览器的浏览数据

> ID：15465870
> 
> 赞同：-6
> 
> 时间：2013-03-17T20:32:05.463
> 
> 标签：c#, c#-4.0, c#-3.0, privacy

如何以编程方式删除所有主流浏览器（IE、Firefox、Opera、Chrome 和 Safari）中的 cookie、缓存和历史记录（即所有浏览数据）？

我发现以下博客条目详细介绍了完成任务的批处理脚本：http: [//www.catonmat.net/blog/clear-privacy-ie-firefox-opera-chrome-safari/](http://www.catonmat.net/blog/clear-privacy-ie-firefox-opera-chrome-safari/)

但我想将这些转换为 C#。

* * *

我有 WinINETCache 类，但我在这个命令附近有一些错误......

代码描述行

```
 long fileTime = (internet_cache_entry_infoa.LastModifiedTime.dwHighDateTime << 0x20) | ((long)((ulong)internet_cache_entry_infoa.LastModifiedTime.dwLowDateTime));
        long num5 = (internet_cache_entry_infoa.LastAccessTime.dwHighDateTime << 0x20) | ((long)((ulong)internet_cache_entry_infoa.LastAccessTime.dwLowDateTime));
        long num6 = (internet_cache_entry_infoa.LastSyncTime.dwHighDateTime << 0x20) | ((long)((ulong)internet_cache_entry_infoa.LastSyncTime.dwLowDateTime));
        long num7 = (internet_cache_entry_infoa.ExpireTime.dwHighDateTime << 0x20) | ((long)((ulong)internet_cache_entry_infoa.ExpireTime.dwLowDateTime)); 
```

我想知道我必须调用哪个库才能成功执行。课程如下 - 我该如何称呼这个课程？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;

namespace watcher
{
    class WinINETCache
    {

        // Fields
        private const int CACHEGROUP_FLAG_FLUSHURL_ONDELETE = 2;
        private const int CACHEGROUP_SEARCH_ALL = 0;
        private const int ERROR_FILE_NOT_FOUND = 2;
        private const int ERROR_INSUFFICENT_BUFFER = 0x7a;
        private const int ERROR_NO_MORE_ITEMS = 0x103;

        // Methods
        public static void ClearCacheItems(bool bClearFiles, bool bClearCookies)
        {
            if (!bClearCookies && !bClearFiles)
            {
                throw new ArgumentException("You must call ClearCacheItems with at least one target");
            }
            if (Environment.OSVersion.Version.Major > 5)
            {
                VistaClearTracks(bClearFiles, bClearCookies);
            }
            else
            {
                if (bClearCookies)
                {
                    ClearCookiesForHost("*");
                }
                if (bClearFiles)
                {
                    long lpGroupId = 0L;
                    int lpdwFirstCacheEntryInfoBufferSize = 0;
                    int cb = 0;
                    IntPtr zero = IntPtr.Zero;
                    IntPtr hFind = IntPtr.Zero;
                    bool flag = false;
                    hFind = FindFirstUrlCacheGroup(0, 0, IntPtr.Zero, 0, ref lpGroupId, IntPtr.Zero);
                    int num4 = Marshal.GetLastWin32Error();
                    if (((hFind != IntPtr.Zero) && (0x103 != num4)) && (2 != num4))
                    {
                        do
                        {
                            flag = DeleteUrlCacheGroup(lpGroupId, 2, IntPtr.Zero);
                            num4 = Marshal.GetLastWin32Error();
                            if (!flag && (2 == num4))
                            {
                                flag = FindNextUrlCacheGroup(hFind, ref lpGroupId, IntPtr.Zero);
                                num4 = Marshal.GetLastWin32Error();
                            }
                        }
                        while (flag || ((0x103 != num4) && (2 != num4)));
                    }
                    hFind = FindFirstUrlCacheEntryEx(null, 0, WININETCACHEENTRYTYPE.ALL, 0L, IntPtr.Zero, ref lpdwFirstCacheEntryInfoBufferSize, IntPtr.Zero, IntPtr.Zero, IntPtr.Zero);
                    num4 = Marshal.GetLastWin32Error();
                    if ((IntPtr.Zero != hFind) || (0x103 != num4))
                    {
                        cb = lpdwFirstCacheEntryInfoBufferSize;
                        zero = Marshal.AllocHGlobal(cb);
                        hFind = FindFirstUrlCacheEntryEx(null, 0, WININETCACHEENTRYTYPE.ALL, 0L, zero, ref lpdwFirstCacheEntryInfoBufferSize, IntPtr.Zero, IntPtr.Zero, IntPtr.Zero);
                        num4 = Marshal.GetLastWin32Error();
                        do
                        {
                            INTERNET_CACHE_ENTRY_INFOA internet_cache_entry_infoa = (INTERNET_CACHE_ENTRY_INFOA)Marshal.PtrToStructure(zero, typeof(INTERNET_CACHE_ENTRY_INFOA));
                            lpdwFirstCacheEntryInfoBufferSize = cb;
                            if (WININETCACHEENTRYTYPE.COOKIE_CACHE_ENTRY != (internet_cache_entry_infoa.CacheEntryType & WININETCACHEENTRYTYPE.COOKIE_CACHE_ENTRY))
                            {
                                flag = DeleteUrlCacheEntry(internet_cache_entry_infoa.lpszSourceUrlName);
                            }
                            flag = FindNextUrlCacheEntryEx(hFind, zero, ref lpdwFirstCacheEntryInfoBufferSize, IntPtr.Zero, IntPtr.Zero, IntPtr.Zero);
                            num4 = Marshal.GetLastWin32Error();
                            if (!flag && (0x103 == num4))
                            {
                                break;
                            }
                            if (!flag && (lpdwFirstCacheEntryInfoBufferSize > cb))
                            {
                                cb = lpdwFirstCacheEntryInfoBufferSize;
                                zero = Marshal.ReAllocHGlobal(zero, (IntPtr)cb);
                                flag = FindNextUrlCacheEntryEx(hFind, zero, ref lpdwFirstCacheEntryInfoBufferSize, IntPtr.Zero, IntPtr.Zero, IntPtr.Zero);
                            }
                        }
                        while (flag);
                        Marshal.FreeHGlobal(zero);
                    }
                }
            }
        }

        public static void ClearCookies()
        {
            ClearCacheItems(false, true);
        }

        [CodeDescription("Delete all permanent WinINET cookies for sHost; won't clear memory-only session cookies. Supports hostnames with an optional leading wildcard, e.g. *example.com. NOTE: Will not work on VistaIE Protected Mode cookies.")]
        public static void ClearCookiesForHost(string sHost)
        {
            string str;
            INTERNET_CACHE_ENTRY_INFOA internet_cache_entry_infoa;
            bool flag;
            sHost = sHost.Trim();
            if (sHost.Length < 1)
            {
                return;
            }
            if (sHost == "*")
            {
                str = string.Empty;
                if (Environment.OSVersion.Version.Major > 5)
                {
                    VistaClearTracks(false, true);
                    return;
                }
            }
            else
            {
                str = sHost.StartsWith("*") ? sHost.Substring(1).ToLower() : ("@" + sHost.ToLower());
            }
            int lpdwFirstCacheEntryInfoBufferSize = 0;
            int cb = 0;
            IntPtr zero = IntPtr.Zero;
            IntPtr hFind = IntPtr.Zero;
            if ((FindFirstUrlCacheEntry("cookie:", IntPtr.Zero, ref lpdwFirstCacheEntryInfoBufferSize) == IntPtr.Zero) && (0x103 == Marshal.GetLastWin32Error()))
            {
                return;
            }
            cb = lpdwFirstCacheEntryInfoBufferSize;
            zero = Marshal.AllocHGlobal(cb);
            hFind = FindFirstUrlCacheEntry("cookie:", zero, ref lpdwFirstCacheEntryInfoBufferSize);
        Label_00C2:
            internet_cache_entry_infoa = (INTERNET_CACHE_ENTRY_INFOA)Marshal.PtrToStructure(zero, typeof(INTERNET_CACHE_ENTRY_INFOA));
            lpdwFirstCacheEntryInfoBufferSize = cb;
            if (WININETCACHEENTRYTYPE.COOKIE_CACHE_ENTRY == (internet_cache_entry_infoa.CacheEntryType & WININETCACHEENTRYTYPE.COOKIE_CACHE_ENTRY))
            {
                bool flag2;
                if (str.Length == 0)
                {
                    flag2 = true;
                }
                else
                {
                    string str2 = Marshal.PtrToStringAnsi(internet_cache_entry_infoa.lpszSourceUrlName);
                    int index = str2.IndexOf('/');
                    if (index > 0)
                    {
                        str2 = str2.Remove(index);
                    }
                    flag2 = str2.ToLower().EndsWith(str);
                }
                if (flag2)
                {
                    flag = DeleteUrlCacheEntry(internet_cache_entry_infoa.lpszSourceUrlName);
                }
            }
        Label_014A:
            flag = FindNextUrlCacheEntry(hFind, zero, ref lpdwFirstCacheEntryInfoBufferSize);
            if (flag || (0x103 != Marshal.GetLastWin32Error()))
            {
                if (flag || (lpdwFirstCacheEntryInfoBufferSize <= cb))
                {
                    goto Label_00C2;
                }
                cb = lpdwFirstCacheEntryInfoBufferSize;
                zero = Marshal.ReAllocHGlobal(zero, (IntPtr)cb);
                goto Label_014A;
            }
            Marshal.FreeHGlobal(zero);
        }

        public static void ClearFiles()
        {
            ClearCacheItems(true, false);
        }

        [return: MarshalAs(UnmanagedType.Bool)]
        [DllImport("wininet.dll", EntryPoint = "DeleteUrlCacheEntryA", CallingConvention = CallingConvention.StdCall, CharSet = CharSet.Ansi, SetLastError = true, ExactSpelling = true)]
        private static extern bool DeleteUrlCacheEntry(IntPtr lpszUrlName);
        [return: MarshalAs(UnmanagedType.Bool)]
        [DllImport("wininet.dll", CallingConvention = CallingConvention.StdCall, CharSet = CharSet.Unicode, SetLastError = true)]
        private static extern bool DeleteUrlCacheGroup(long GroupId, int dwFlags, IntPtr lpReserved);
        [DllImport("wininet.dll", EntryPoint = "FindFirstUrlCacheEntryA", CallingConvention = CallingConvention.StdCall, CharSet = CharSet.Ansi, SetLastError = true, ExactSpelling = true)]
        private static extern IntPtr FindFirstUrlCacheEntry([MarshalAs(UnmanagedType.LPTStr)] string lpszUrlSearchPattern, IntPtr lpFirstCacheEntryInfo, ref int lpdwFirstCacheEntryInfoBufferSize);
        [DllImport("wininet.dll", EntryPoint = "FindFirstUrlCacheEntryExA", CallingConvention = CallingConvention.StdCall, CharSet = CharSet.Ansi, SetLastError = true, ExactSpelling = true)]
        private static extern IntPtr FindFirstUrlCacheEntryEx([MarshalAs(UnmanagedType.LPTStr)] string lpszUrlSearchPattern, int dwFlags, WININETCACHEENTRYTYPE dwFilter, long GroupId, IntPtr lpFirstCacheEntryInfo, ref int lpdwFirstCacheEntryInfoBufferSize, IntPtr lpReserved, IntPtr pcbReserved2, IntPtr lpReserved3);
        [DllImport("wininet.dll", CallingConvention = CallingConvention.StdCall, CharSet = CharSet.Unicode, SetLastError = true)]
        private static extern IntPtr FindFirstUrlCacheGroup(int dwFlags, int dwFilter, IntPtr lpSearchCondition, int dwSearchCondition, ref long lpGroupId, IntPtr lpReserved);
        [return: MarshalAs(UnmanagedType.Bool)]
        [DllImport("wininet.dll", EntryPoint = "FindNextUrlCacheEntryA", CallingConvention = CallingConvention.StdCall, CharSet = CharSet.Ansi, SetLastError = true, ExactSpelling = true)]
        private static extern bool FindNextUrlCacheEntry(IntPtr hFind, IntPtr lpNextCacheEntryInfo, ref int lpdwNextCacheEntryInfoBufferSize);
        [return: MarshalAs(UnmanagedType.Bool)]
        [DllImport("wininet.dll", EntryPoint = "FindNextUrlCacheEntryExA", CallingConvention = CallingConvention.StdCall, CharSet = CharSet.Ansi, SetLastError = true, ExactSpelling = true)]
        private static extern bool FindNextUrlCacheEntryEx(IntPtr hEnumHandle, IntPtr lpNextCacheEntryInfo, ref int lpdwNextCacheEntryInfoBufferSize, IntPtr lpReserved, IntPtr pcbReserved2, IntPtr lpReserved3);
        [return: MarshalAs(UnmanagedType.Bool)]
        [DllImport("wininet.dll", CallingConvention = CallingConvention.StdCall, CharSet = CharSet.Unicode, SetLastError = true)]
        private static extern bool FindNextUrlCacheGroup(IntPtr hFind, ref long lpGroupId, IntPtr lpReserved);
        internal static string GetCacheItemInfo(string sURL)
        {
            int lpdwCacheEntryInfoBufferSize = 0;
            int cb = 0;
            IntPtr zero = IntPtr.Zero;
            bool flag = GetUrlCacheEntryInfoA(sURL, zero, ref lpdwCacheEntryInfoBufferSize);
            int num = Marshal.GetLastWin32Error();
            if (flag || (num != 0x7a))
            {
                return string.Format("This URL is not present in the WinINET cache. [Code: {0}]", num);
            }
            cb = lpdwCacheEntryInfoBufferSize;
            zero = Marshal.AllocHGlobal(cb);
            flag = GetUrlCacheEntryInfoA(sURL, zero, ref lpdwCacheEntryInfoBufferSize);
            num = Marshal.GetLastWin32Error();
            if (!flag)
            {
                Marshal.FreeHGlobal(zero);
                return ("GetUrlCacheEntryInfoA with buffer failed. 2=filenotfound 122=insufficient buffer, 259=nomoreitems. Last error: " + num.ToString() + "\n");
            }
            INTERNET_CACHE_ENTRY_INFOA internet_cache_entry_infoa = (INTERNET_CACHE_ENTRY_INFOA)Marshal.PtrToStructure(zero, typeof(INTERNET_CACHE_ENTRY_INFOA));
            lpdwCacheEntryInfoBufferSize = cb;
            long fileTime = (internet_cache_entry_infoa.LastModifiedTime.dwHighDateTime << 0x20) | ((long)((ulong)internet_cache_entry_infoa.LastModifiedTime.dwLowDateTime));
            long num5 = (internet_cache_entry_infoa.LastAccessTime.dwHighDateTime << 0x20) | ((long)((ulong)internet_cache_entry_infoa.LastAccessTime.dwLowDateTime));
            long num6 = (internet_cache_entry_infoa.LastSyncTime.dwHighDateTime << 0x20) | ((long)((ulong)internet_cache_entry_infoa.LastSyncTime.dwLowDateTime));
            long num7 = (internet_cache_entry_infoa.ExpireTime.dwHighDateTime << 0x20) | ((long)((ulong)internet_cache_entry_infoa.ExpireTime.dwLowDateTime));
            string[] strArray = new string[] { 
            "Url:\t\t", Marshal.PtrToStringAnsi(internet_cache_entry_infoa.lpszSourceUrlName), "\nCache File:\t", Marshal.PtrToStringAnsi(internet_cache_entry_infoa.lpszLocalFileName), "\nSize:\t\t", ((ulong) ((internet_cache_entry_infoa.dwSizeHigh << 0x20) + internet_cache_entry_infoa.dwSizeLow)).ToString("0,0"), " bytes\nFile Extension:\t", Marshal.PtrToStringAnsi(internet_cache_entry_infoa.lpszFileExtension), "\nHit Rate:\t", internet_cache_entry_infoa.dwHitRate.ToString(), "\nUse Count:\t", internet_cache_entry_infoa.dwUseCount.ToString(), "\nDon't Scavenge for:\t", internet_cache_entry_infoa._Union.dwExemptDelta.ToString(), " seconds\nLast Modified:\t", DateTime.FromFileTime(fileTime).ToString(), 
            "\nLast Accessed:\t", DateTime.FromFileTime(num5).ToString(), "\nLast Synced:  \t", DateTime.FromFileTime(num6).ToString(), "\nEntry Expires:\t", DateTime.FromFileTime(num7).ToString(), "\n"
         };
            string str = string.Concat(strArray);
            Marshal.FreeHGlobal(zero);
            return str;
        }

        [return: MarshalAs(UnmanagedType.Bool)]
        [DllImport("wininet.dll", CharSet = CharSet.Ansi, SetLastError = true, ExactSpelling = true)]
        private static extern bool GetUrlCacheEntryInfoA(string lpszUrlName, IntPtr lpCacheEntryInfo, ref int lpdwCacheEntryInfoBufferSize);
        private static void VistaClearTracks(bool bClearFiles, bool bClearCookies)
        {
            int num = 0;
            if (bClearCookies)
            {
                num = 2;
            }
            if (bClearFiles)
            {
                num = 0x100c;
            }
            try
            {
                using (Process.Start("rundll32.exe", "inetcpl.cpl,ClearMyTracksByProcess " + num.ToString()))
                {
                }
            }
            catch (Exception exception)
            {
                FiddlerApplication.DoNotifyUser("Failed to launch ClearMyTracksByProcess.\n" + exception.Message, "Error");
            }
        }

        // Nested Types
        [StructLayout(LayoutKind.Sequential)]
        private class INTERNET_CACHE_ENTRY_INFOA
        {
            public uint dwStructureSize;
            public IntPtr lpszSourceUrlName;
            public IntPtr lpszLocalFileName;
            public WinINETCache.WININETCACHEENTRYTYPE CacheEntryType;
            public uint dwUseCount;
            public uint dwHitRate;
            public uint dwSizeLow;
            public uint dwSizeHigh;
            public FILETIME LastModifiedTime;
            public FILETIME ExpireTime;
            public FILETIME LastAccessTime;
            public FILETIME LastSyncTime;
            public IntPtr lpHeaderInfo;
            public uint dwHeaderInfoSize;
            public IntPtr lpszFileExtension;
            public WinINETCache.WININETCACHEENTRYINFOUNION _Union;
        }

        [StructLayout(LayoutKind.Explicit)]
        private struct WININETCACHEENTRYINFOUNION
        {
            // Fields
            [FieldOffset(0)]
            public uint dwExemptDelta;
            [FieldOffset(0)]
            public uint dwReserved;
        }

        private enum WININETCACHEENTRYTYPE
        {
            ALL = 0x31003d,
            COOKIE_CACHE_ENTRY = 0x100000,
            EDITED_CACHE_ENTRY = 8,
            None = 0,
            NORMAL_CACHE_ENTRY = 1,
            SPARSE_CACHE_ENTRY = 0x10000,
            STICKY_CACHE_ENTRY = 4,
            TRACK_OFFLINE_CACHE_ENTRY = 0x10,
            TRACK_ONLINE_CACHE_ENTRY = 0x20,
            URLHISTORY_CACHE_ENTRY = 0x200000
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:46:39.013

转换所有脚本对于论坛答案来说太过分了。

你应该看看 DirectoryInfo 和 FileInfo 类。它们应该可以帮助您将 80% 的批处理命令转换为 c#。

以下示例代码将删除 C:\TempFiles 中的所有文件和目录（包括子目录）（使用它而不是 del 命令）：

```
DirectoryInfo dInfo = new DirectoryInfo(@"C:\TempFiles\");

foreach (FileInfo fi in dInfo.GetFiles())
{
    // You could also check the file Extension here.
    if (fi.Exists())
    {
        fi.Delete();
    }
}

foreach (DirectoryInfo di in dInfo.GetDirectories())
{
    if (di.Exists())
    {
        di.Delete(true);
    }
} 
```

# c# - 使用 BitmapEncoder 生成时如何在循环中重复 GIF

> ID：15465871
> 
> 赞同：3
> 
> 时间：2013-03-17T20:32:12.727
> 
> 标签：c#, windows, windows-runtime, animated-gif

我可以使用 BitmapEncoder (C#, WinRT) 创建动画 gif。但是，我一直无法弄清楚如何让 GIF 循环返回并从头开始？

没有尝试太多，因为我不确定要尝试什么。搜索要在 GIF 上设置的更多属性，但找不到任何相关内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T18:31:05.750

好吧，终于可以弄明白了。显然，您需要将以下元数据添加到 GIF 以使其循环：

```
BitmapPropertySet properties = await encoder.BitmapProperties.GetPropertiesAsync("/appext/Data");
properties = new BitmapPropertySet()
{
    {
        "/appext/Application",
        new BitmapTypedValue(Iso8859.Default.GetBytes("NETSCAPE2.0"), Windows.Foundation.PropertyType.UInt8Array)
    },
    { 
        "/appext/Data",
        new BitmapTypedValue(new byte[] { 3, 1, 0, 0, 0 }, Windows.Foundation.PropertyType.UInt8Array)
    },
};

await encoder.BitmapProperties.SetPropertiesAsync(properties); 
```

如果您的项目中没有 Iso8859，只需将“NETSCAPE2.0”的 ascii 代码作为字节数组放入其中。

# c++ - 静态数组上的 memset

> ID：15465874
> 
> 赞同：1
> 
> 时间：2013-03-17T20:32:37.907
> 
> 标签：c++, arrays, memset

当您必须设置静态数组的元素时，我对将什么作为第一个参数传递给 memset 感到有些困惑。我一直在寻找，但我找不到一些特定问题的答案。

如果我有一个声明为的数组：

```
char arr[10]; 
```

我已经看到这两个调用是有效的并且产生相同的效果：

```
memset( arr, 0, 10);
memset( &arr, 0, 10); 
```

我的具体问题是：

1-为什么它们对 arr 有相同的影响？

2-这些电话有什么不同？

3-哪一个会被认为是正确的？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T20:36:44.373

存储时长与它无关；数组是数组。这个表达式：

```
&arr 
```

生成 a `char (*)[10]`，即指向`char`具有 10 个元素的数组的指针。但是，当`arr`传递给这样的函数时：

```
memset(arr, 0, 10); 
```

它降级为指向第一个元素的指针，即 a `char*`。这些不是一回事。“正确”（惯用的）调用是：

```
memset(arr, 0, 10); 
```

`void*`但是，在这种情况下，它们在传递给函数时都转换为 a`memset`并在函数中解释为 a `unsigned char*`。由于它们都指向同一个地方，因此会产生相同的结果。

然而，重要的是要认识到，在处理真正的各自类型（即，不是 a *）*`void*`时，指向数组的指针与指向数组第一个元素的指针不同。

 *例如，增加 a`char (*)[10]`将增加指针`sizeof(char[10])`字节，而增加 a`char*`将仅增加一个字节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T20:37:08.713

> 为什么它们对 arr 有相同的影响？这些调用之间有什么不同？

因为数组的地址与其第一个元素的地址相同（数组在传递给函数时衰减为指向其第一个元素的指针），只是它们具有不同的类型。`arr`具有 type ，当传递给函数时`char[10]`会衰减。`char *`相反，`&arr`具有`char (*)[10]`作为函数参数传递时不会改变的类型。

> 哪一个会被认为是正确的？

只要函数不期望特定类型，即它接受`void *`，任何一个都是好的。但是，如果被调用的函数期望指定其中一种类型，则不应使用另一种类型，因为这样您的程序将出现格式错误并调用未定义的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T20:35:49.127

> 1-为什么它们对 arr 有相同的影响？

它们都包含相同的值，即数组开头的地址。

> 2-这些电话有什么不同？

`arr`衰减为指向 char 的指针，即`char*`（当您将数组的名称传递给函数时会发生这种转换）并且`&arr`是指向char**数组**的指针，即`char (*)[]`.

> 3-哪一个会被认为是正确的？

我会用`arr`. `memset`接受 a`void*`这是两者都起作用的原因。

另外，请注意`char arr[10] = {};`可用于对数组进行零初始化。*

# javascript - 使用 javascript 从数据库中自动填充文本字段

> ID：15465878
> 
> 赞同：0
> 
> 时间：2013-03-17T20:33:05.767
> 
> 标签：javascript, database, textfield, auto-populate

当我使用javascript在文本字段中键入数据时，我想通过使用自动填充将数据从数据库获取到文本字段，任何人都可以帮助我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:39:52.820

解决这个问题的方法之一是例如使用 jquery.ui 中的自动完成控制并使用您选择的语言/服务器创建服务以从您的数据库中获取数据。

配置 jquery.ui 自动完成就像

```
 var availableOptions  = ["apple", "pear", "pineapple"]

  $( "#auto" ).autocomplete({
      source: availableOptions
  }); 
```

只是有输入控制

```
 <div>
     <label for="auto">Fruits: </label>
     <input id="auto" />
  </div> 
```

因此，如果您没有上述数千个数据项是最简单的方法之一。

或者，已经实现了 Web 服务，您可以查询它 ajax 样式，以正确的方式配置自动完成插件

```
 $('#auto').autocomplete({
    source: function( request, response ) {
      $.getJSON( "/api/search", {
        term: request.term 
      }, response );
    },
    search: function() {
      var term = this.value
      if ( term.length < 2 ) {
        return false;
      }
    }
  }) 
```

# javascript - javascript延迟弹出窗口

> ID：15465879
> 
> 赞同：2
> 
> 时间：2013-03-17T20:33:09.913
> 
> 标签：javascript, popup

我有一个 javascript 问题，这已经困扰了我好几个小时了。我需要延迟一个 css 弹出窗口，这样如果你只是在页面上滚动鼠标，你就不会得到大量的弹出窗口。

无论我尝试什么，它都会使弹出窗口变得愚蠢，在 x 秒后通过滑动任何链接、自动关闭等弹出。如果我在鼠标悬停时添加一个计时器，它开始表现得很奇怪，如果我然后删除鼠标悬停的计时器它工作正常，但您不能再将鼠标悬停在菜单关闭之前，还尝试添加负边距并自动关闭

欢呼所有人

javscript

```
<script type="text/javascript">

var span = document.querySelectorAll('.pop');
for (var i = span.length; i--;) {
(function () {
    var t;
    span[i].onmouseover = function () {
        hideAll();
        clearTimeout(t);
        this.className = 'popHover';
    };
    span[i].onmouseout = function () {
        var self = this;
        t = setTimeout(function () {
            self.className = 'pop';
        }, 300);
    };
})();
}

function hideAll() {
 for (var i = span.length; i--;) {
    span[i].className = 'pop'; 
    }
};
</script> 
```

css

```
.pop {
position:relative;
   }
    .pop div {
    display: none;
    }

.popHover {
position:absolute;
}

.popHover div {
background-color:#FFFFFF;
border-color:#AAAAAA;
border-style:solid;
border-width:1px 2px 2px 1px;
color:#333333;
padding:5px;
position:absolute;
z-Index:9999;
width:150px;
display: inline-block;
 margin-top: -20px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T04:30:11.267

使用 jquery 可能对您尝试做的事情更有帮助。尝试这样的事情：

```
// Use a CDN to take advantage of caching
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
<script type="text/javascript">
var t;
$('.pop').on('mouseover', $.proxy(function () {
    hideAll();
    clearTimeout(t);
    this.addClass('popHover');
    this.removeClass('pop');
}, this));

$('.pop').on('mouseout', $.proxy(function () {
    var self = this;
    t = setTimeout(function () {
        self.addClass('pop');
        self.removeClass('popHover');
    }, 300);
},this));

function hideAll() {
    // Since you are calling this from the mouseover function of all the
    // elements with the 'pop' class, I dont understand what the purpose of this class
    // is so it might not be entirely correct.
    $('.pop').addClass('pop');
}
</script> 
```

让我知道这是否有帮助。如果你还需要它。有一个小提琴可能会有所帮助，以便为您提供更准确的响应。

# .net - reg 密钥检查导致崩溃

> ID：15465882
> 
> 赞同：1
> 
> 时间：2013-03-17T20:33:14.473
> 
> 标签：.net, vb.net, registry, regedit

我在这里有这个函数来检查它是否在注册表中，如果是则返回 true，如果不是则返回 false。但是，它每次都会崩溃

```
R = My.Computer.Registry.LocalMachine.OpenSubKey("Software\Microsoft\Windows\CurrentVersion\Run", True) 
```

这是整个函数：

```
Private Function CheckKey2() As Boolean
Dim R As RegistryKey
    Dim V() As String
    Dim O As String = vbNullString
    R = My.Computer.Registry.LocalMachine.OpenSubKey("Software\Microsoft\Windows\CurrentVersion\Run", True)
    V = R.GetValueNames()
    R.Close()

    For Each Str As String In V
        O = O & Str & "|"
    Next
    If O.Contains(MyValue) Then
        Return True
    Else
        Return False
    End If
End Function 
```

这是我的注册表中的内容

```
Key Name:          HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run
Class Name:        <NO CLASS>
Last Write Time:   10/30/2012 - 6:19 AM
Value 0
 Name:            RtHDVCpl
 Type:            REG_SZ
 Data:            C:\Program Files\Realtek\Audio\HDA\RAVCpl64.exe -s

Value 1
 Name:            Kernel and Hardware Abstraction Layer
 Type:            REG_SZ
 Data:            KHALMNPR.EXE

Value 2
  Name:            AdobeAAMUpdater-1.0
  Type:            REG_SZ
  Data:            "C:\Program Files (x86)\Common Files\Adobe\OOBE\PDApp\UWA\UpdaterStartupUtility.exe"

Value 3
  Name:            TortoiseHgOverlayIconServer
  Type:            REG_SZ
  Data:            C:\Program Files\TortoiseHg\TortoiseHgOverlayServer.exe

Value 4
  Name:            Logitech Download Assistant
  Type:            REG_SZ
  Data:            C:\Windows\system32\rundll32.exe C:\Windows\System32\LogiLDA.dll,LogiFetch 
```

# php - 只读取大文本文件的最后 50 行

> ID：15465886
> 
> 赞同：0
> 
> 时间：2013-03-17T20:33:22.163
> 
> 标签：php, javascript, jquery, html, ajax

我的服务器上有一个非常大的日志文件，我希望在我的网站上有一个不断更新的控制台视图，只显示文件的最后 50 行左右

问题是每次加载整个文件都需要很长时间，所以我需要一种方法来只加载 nescsarry 行，（如果可能的话）或其他有效的解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:55:11.773

我会说这是一个[完全相同的副本](https://stackoverflow.com/questions/5848045/get-the-last-50-lines-from-text-file-using-php)（正如约翰康德所说），除非你想在客户端做，在这种情况下，也许，你可以用[HTTP byte serving](http://en.wikipedia.org/wiki/Byte_serving)来做。

我建议您使用 PHP 执行此操作，因此请阅读该问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-17T20:44:27.950

```
$file = file("file.txt");
for ($i = count($file)-50; $i < count($file); $i++) {
echo $file[$i] . "\n";
} 
```

未经测试，但是...？

# java - 同步集合列表

> ID：15465888
> 
> 赞同：1
> 
> 时间：2013-03-17T20:33:30.097
> 
> 标签：java, list, linked-list, queue, synchronized

我有 2 个线程需要访问队列，一个用于放置，一个用于获取。

所以我有一个启蒙

```
public static Queue<WorldData>          blockDestructionQueue   = Collections.synchronizedList(new LinkedList<WorldData>()); 
```

有了上面我得到一个类型不匹配：无法从列表转换为队列

我尝试将其投射到队列中，但这不起作用。

```
public static Queue<WorldData>          blockDestructionQueue   = (Queue<WorldData>)Collections.synchronizedList(new LinkedList<WorldData>()); 
```

我想知道为什么这不起作用。

我从另一个堆栈溢出答案中得到了这个信息。

[如何使用 ConcurrentLinkedQueue？](https://stackoverflow.com/questions/616484/how-to-use-concurrentlinkedqueue)

在正确答案第 6 段中

> 如果您只有一个线程将内容放入队列，而另一个线程将内容从队列中取出，则 ConcurrentLinkingQueue 可能是矫枉过正。当您可能有数百甚至数千个线程同时访问队列时，它更有用。您的需求可能会通过使用来满足：
> 
> ```
> Queue<YourObject> queue = Collections.synchronizedList(new LinkedList<YourObject>()); 
> ```
> 
> 这样做的一个优点是它锁定实例（队列），因此您可以在队列上同步以确保复合操作的原子性（正如 Jared 所解释的）。您不能使用 ConcurrentLinkingQueue 执行此操作，因为所有操作都是在没有锁定实例的情况下完成的（使用 java.util.concurrent.atomic 变量）。如果您想在队列为空时阻塞，则不需要这样做，因为 poll() 将在队列为空时简单地返回 null，而 poll() 是原子的。检查 poll() 是否返回 null。如果是，wait()，然后再试一次。无需锁定。

附加信息：

编辑：Eclipse 试图太有帮助，并决定在不需要且不要求放置的地方添加一个断点异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T20:38:06.023

队列不是列表，a`Queue`也不是 的实现`List`，尽管您可以使用列表实现队列。

看看 BlockingQueue 它可能更适合您的需要：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/BlockingQueue.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/BlockingQueue.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:40:06.430

`Collections.synchronizedList``SynchronizedList`返回一个不扩展的实例`Queue`。 `LinkedList`是，`Queue`但那不是您当时使用的。

# servlets - 使用 servlet 在 db2 中上传图像

> ID：15465891
> 
> 赞同：0
> 
> 时间：2013-03-17T20:33:41.470
> 
> 标签：servlets, jdbc, db2

我正在尝试将图像上传到我的 db2 数据库中。我已经复制了所需的 `db2jcc.jar`库`web-inf/lib`

```
<form action="Upload" method="post" enctype="multipart/form-data">
ID : <input type="text" name="id"/><br>
FILE : <input type="file" name="photo"/><br>
<input type="submit" value="upload"/>
</form> 
```

我的上传器 servlet 是

```
try {
        String id=request.getParameter("id");
        Part photo =  request.getPart("photo");
        try
        {
            Class.forName("com.ibm.db2.jcc.DB2Driver").newInstance();
            Connection con=DriverManager.getConnection("jdbc:db2:SAMPLEDB");
            System.out.println("Connection Successful");
            PreparedStatement ps=con.prepareStatement("INSERT INTO SAMPLETABLE (ID,PHOTO) VALUES (?,?)");  
            ps.setString(1, id);
            File fBlob = new File ( request.getParameter("photo") );  //exception thrown here
            FileInputStream is = new FileInputStream ( fBlob );  
            ps.setBinaryStream (2, is, (int) fBlob.length() );  
            ps.execute ();  

        }
        catch(Exception e)
        {
            System.out.println("exception --> "+e);
        }
    }
    finally
    {
        out.close();
    }
} 
```

我得到的例外是

```
java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:41:45.797

request.getParameter() 及其相关方法不适用于多部分请求，在处理多部分表单数据时总是返回 null。

请参阅以下有关 Java 文件上传的内容： [https ://www.coderanch.com/how-to/java/FileUpload](https://www.coderanch.com/how-to/java/FileUpload)

这是一个更好的解决方案：[http ://www.roseindia.net/jsp/file_upload/Sinle_upload.xhtml.shtml](http://www.roseindia.net/jsp/file_upload/Sinle_upload.xhtml.shtml)

# python - App Engine 中的处理程序测试失败：webtest 导入错误

> ID：15465892
> 
> 赞同：3
> 
> 时间：2013-03-17T20:33:41.603
> 
> 标签：python, google-app-engine, web-testing

我无法理解这个错误：

```
======================================================================
ERROR: test_webtest (unittest2.loader.ModuleImportFailure)
----------------------------------------------------------------------
ImportError: Failed to import test module: test_webtest
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/unittest2/loader.py", line 260, in _find_tests
    module = self._get_module_from_name(name)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/unittest2/loader.py", line 238, in _get_module_from_name
    __import__(name)
  File "/Users/chris/Documents/gae/tasker/test/test_webtest.py", line 4, in <module>
    import webtest
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/webtest/__init__.py", line 9, in <module>
    from webtest.app import TestApp
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/webtest/app.py", line 65, in <module>
    class TestRequest(webob.BaseRequest):
AttributeError: 'module' object has no attribute 'BaseRequest' 
```

情况是：

*   我正在尝试为我的 App Engine 应用设置处理程序单元测试。
*   我正在关注[本教程](https://developers.google.com/appengine/docs/python/tools/localunittesting#Setting_Up_a_Testing_Framework)以获取单元测试框架，包括页面底部的 bash 脚本，逐字逐句。
*   我正在使用以下命令从终端运行测试：

    `./run_tests.py /usr/local/google_appengine test/`

*   我正在使用[本教程](https://developers.google.com/appengine/docs/python/tools/handlertesting)来构建我的处理程序测试。但它永远不会超过进口。我所要做的就是`test/test_webtest.py`生成错误：

    ```
    import webtest 
    ```

*   我已经安装了 webtest：

    ```
    $ pip install WebTest
    Requirement already satisfied (use --upgrade to upgrade): WebTest in /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages
    Requirement already satisfied (use --upgrade to upgrade): six in /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages (from WebTest)
    Requirement already satisfied (use --upgrade to upgrade): WebOb>=1.2 in /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages (from WebTest)
    Requirement already satisfied (use --upgrade to upgrade): waitress in /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages (from WebTest)
    Requirement already satisfied (use --upgrade to upgrade): beautifulsoup4 in /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages (from WebTest)
    Requirement already satisfied (use --upgrade to upgrade): distribute in /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/distribute-0.6.28-py2.7.egg (from waitress->WebTest) 
    ```

*   我正在同时运行所有测试，包括通过且没有错误的旧测试。但是导入`webtest`其中任何一个都会在顶部生成错误。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:24:10.417

I'm using webtest with GAE and it is working for me. I'll try to identify differences between my setup and yours to see if that helps you:

*   I'm using `unittest` and not `unittest2`.
*   I'm not using a script like your `run_tests.py`. I just call it from the command line like this: `nosetests --with-gae`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T17:38:25.880

事实证明，这对于我的不同 python 环境来说是一个愚蠢的问题。

我的路径中的`pip`and`python`链接到`/user/local/bin/python`. 实际上，这就是安装 webtest 的地方。

然而，我从教程中复制的代码有这个 hashbang：`#!/usr/bin/python`所以当我用 运行它时，它运行在*没有*安装webtest`./run_tests.py`的环境中。

 *运行`python ./run_tests.py`或更改 hashbang 以`#!/user/local/bin/python`解决问题。*

# photoshop - 充满线条的PSD

> ID：15465894
> 
> 赞同：-3
> 
> 时间：2013-03-17T20:33:57.353
> 
> 标签：photoshop

![在此处输入图像描述](../Images/45c318efb5b5085886732d451747d992.png)

有人知道这是怎么回事吗？（顺便说一句，我在 PC 上 - 我不确定这是否与此有关？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T20:50:09.760

除了这些是指南，而且这个问题不是关于编程的事实（检查这个网站的页脚，还有其他几个这种格式的网站不是关于编程的问题，例如[图形设计](https://graphicdesign.stackexchange.com/)），**你的 PSD 文件看起来损坏了**。

我猜是一个糟糕的转会或什么的。让寄给你的人再寄一次，也许。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:35:26.230

转到视图菜单并取消选中“附加”:) 这些是可以帮助您解决对齐等问题的“指南”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T20:37:34.567

或按 Ctrl + H。这些是指导线，可帮助您更好地了解坐标或您希望它们用于什么。您可以通过单击标尺并将鼠标拖向图像来添加它们。

# javascript - 从 Jquery 选择的插件中删除所有选择

> ID：15465900
> 
> 赞同：1
> 
> 时间：2013-03-17T20:34:27.217
> 
> 标签：javascript, jquery, jsp

我正在使用 Jquery[选择](http://harvesthq.github.com/chosen/)的插件进行多选。我必须添加一个重置按钮来清除所有选定的项目，但不知道从哪里继续。
已经尝试过`.clear` `.val([])`了，但没有任何帮助。你如何清除所有选定的项目？普通的 javascript 指针会比基于 jQuery 的更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:06:05.453

如果您在第一页上使用 chosen 选择它会有所帮助

```
$('.chzn-container li.search-choice').remove() 
```

# python - 如何在python中结束一个列表？

> ID：15465901
> 
> 赞同：0
> 
> 时间：2013-03-17T20:34:31.727
> 
> 标签：python, list, recursion

我必须编写一个使用递归生成列表的代码，但列表中的最后一项必须为空。这是我的代码，我需要它来生成与它实际生成的内容。

```
def coin_change(avail_change, total_cents):
    if avail_change == []:
        return []
    if total_cents // avail_change[0] >= 1:
        first = total_cents // avail_change[0]
        first_list = [avail_change[0], first]
        return [first_list, coin_change(avail_change[1:], (total_cents - (avail_change[0] * first)))]
    else:
        return coin_change(avail_change[1:], total_cents) 
```

结果：

```
coin_change([50,5,1],108) => [[50,2],[5,1],[1,3]]
expected [[50, 2], [5, 1], [1, 3]], saw [[50, 2], [[5, 1], [[1, 3], []]]] 
```

我需要让列表结束，`[1,3]`但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:52:53.450

当你使用递归时，首先考虑你的基本情况是什么，以及它是如何与前面的调用相结合的。在这个问题中，如果你这样做了，`return [first_list, ...`那么你就是在嵌套结果。取而代之的是，您必须在同一个列表中插入新结果。

```
def coin_change(avail_change, total_cents):
    if not avail_change:
        return []
    else:
        first = total_cents // avail_change[0]
        result = coin_change(avail_change[1:], (total_cents % avail_change[0]))
        if first > 0:
            result.insert(0, [avail_change[0], first])
        return result

print coin_change([50,5,1],108) # [[50, 2], [5, 1], [1, 3]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:48:01.247

您为每个递归调用返回一个列表，因此结果是越来越嵌套的列表之一。

您还应该返回二元组而不是列表。列表旨在可变且非固定长度，但您的（面额，计数）对都不是。

另外，只是为了好玩， 的输出是`coin_change([3,2],16)`什么，您期望它是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T21:08:55.977

```
first_list = []

def coin_change(avail_change, total_cents):
    if not avail_change:
        return []

    if total_cents // avail_change[0] >= 1:
        first = total_cents // avail_change[0]
        first_list.append([avail_change[0], first])
        coin_change(avail_change[1:], (total_cents - (avail_change[0] * first)))

    else:
        coin_change(avail_change[1:], total_cents)

    return first_list

x = coin_change([50, 5, 1], 108)
print x 
```

结果：
[[50, 2], [5, 1], [1, 3]] 如你所愿

x = coin_change([ ], 108) 打印 x

输出 [ ]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T22:17:41.157

这可能会有所帮助：

```
coins = []
def coin_change(avail_change, total_cents):
    if avail_change == []:
        raise Exception()
    if total_cents // avail_change[0] >= 1:
        first = total_cents // avail_change[0]
        first_list = [avail_change[0], first]
        coins.append(first_list)
        try:
            return coin_change(avail_change[1:], (total_cents - (avail_change[0] * first)))
        except:
            return coins
    else:
        try:
            return coin_change(avail_change[1:], total_cents)
        except:
            return coins 
```

结果：

```
>>> coin_change ([50,5,1], 108)
[[50, 2], [5, 1], [1, 3]] 
```

# finance - FIX 会话级别拒绝

> ID：15465902
> 
> 赞同：3
> 
> 时间：2013-03-17T20:34:34.163
> 
> 标签：finance, quickfix, fix-protocol, quantitative-finance

我正在研究修复会话层并且对会话级别拒绝有些困惑。

如果在会话期间收到乱码或无效（校验和错误、正文长度错误、所需标签丢失...等），正确的恢复措施是什么？我正在考虑以下三个：

1.  发送拒绝或注销消息，并在文本字段中包含原因并断开连接。
2.  发送 REJECT 消息并包含原因（即 undefined tag ）。
3.  忽略乱码/错误消息。在这种情况下，对于下一个接收到的消息，将检测到序列间隙，并且通过发送 ResendRequest FIX 引擎将恢复先前接收到的乱码消息的正确版本。

另一件事是： REJECT 总是后跟 LOGOUT 和 DISCONNECTION 吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T01:15:59.720

一般来说，对无效消息的正确响应只是会话级拒绝（消息类型 3），其中包括它在标记#45 (RefSeqNum) 中引用的消息的序列号。其余的都是可选的。包含尽可能多的信息通常会帮助那些处理该问题的人。缺乏这些信息可能会使诊断问题变得更加困难，并导致大量客户请求和电话。

忽略一条消息从来都不是一个好主意。仅仅发送注销也不是一个好主意——不清楚为什么对方连接请求结束会话。

是否在拒绝后发送注销完全取决于您。有些系统会这样做，有些则不会。这并不重要，因为注销永远不会有帮助。

您会看到，如果发生导致错误的事情，例如消息中缺少关键字段，或者正在生成无效的校验和 - 很可能是应用程序没有正确编写，在这种情况下应该立即关闭并修复它。另一种可能性是系统故障（即由于电离辐射导致的错误☺），在这种情况下，无法优雅地处理错误。

这些情况在开发和测试（认证）期间很常见，并且在生产中几乎从未见过。在测试/登台/开发环境中，交换会简单地拒绝包含尽可能详细信息的消息。这将提示开发人员哪里出了问题，他们将更正代码并重试。

在生产中，发生这样的事情是不可接受的，如果发生这种情况，支持部门将需要参与其中。如果出现不常见的错误，交易所只会发送拒绝。但是您可以想象一个故障客户端可能会开始发送数百万（或更多）格式错误的消息。这很容易减慢所有连接到它的客户端的 FIX 网关，甚至导致拒绝服务。这是不可接受的，交易所采用不同的技术来防止它。有些人会不断监控情况并禁止不良客户端（例如使用防火墙），如果他们检测到错误率高得离谱，那么他们会打电话给客户端通知他们情况。其他交易所会拒绝一些消息，如果客户端没有修复错误，则发送注销，最后 - 自动阻止访问。在极端情况下，客户可能会被拒绝进一步访问，直到再次通过认证，并因不便而被罚款。但这当然超出了 FIX 协议的范围。

此外，我已经编写金融应用程序大约十年了，我现在所在的公司在美国所有交易所以及世界各地的许多主要交易所都有业务。幸运的是，其中许多不使用 FIX。但是从使用 FIX 的列表中，我从未见过一个符合 FIX 协议的。绝不。因此，您最好的选择是遵循您正在连接的交换规则（他们永远不会向您发送不良消息，或者如果他们这样做 - 您将不得不打电话给他们，向他们发送拒绝将毫无意义），或者如果你正在编写一个服务器部分——做你的客户期望你做的最合乎逻辑的事情。

希望能帮助到你。祝你好运！

# php - php pdo mysql不会返回带引号的文本

> ID：15465904
> 
> 赞同：0
> 
> 时间：2013-03-17T20:34:42.053
> 
> 标签：php, html, mysql, pdo

好的，所以对于我的应用程序，我使用 php 的 pdo 和 mysql，我在数据库中有这个：

```
"Tiny & Big: Grandpa's Leftovers" - 75% off 
```

现在由于某种原因，其中的引号不会让我将其回显到表单字段进行编辑，它适用于任何没有引号的条目。

现在我检查了我的查询输出，它清楚地给了我选择：

```
[info] => "Tiny & Big: Grandpa's Leftovers" - 75% off 
```

所以我在徘徊为什么它不能使用它？

我使用这个小功能获取数据：

```
 public function fetch()
{
    $this->STH->setFetchMode(PDO::FETCH_ASSOC); 
    return $this->STH->fetch();
} 
```

以及实际的查询功能：

```
 // the main sql query function
public function sqlquery($sql, $objects = array())
{
    global $core;

    try
    {
        $this->STH = $this->database->prepare($sql);

        foreach($objects as $k=>$p)
        {
            // +1 is needed as arrays start at 0 where as ? placeholders start at 1 in PDO
            if(is_numeric($p))
            {
                $this->STH->bindValue($k+1, (int)$p, PDO::PARAM_INT);
            }
            else
            {
                $this->STH->bindValue($k+1, $p, PDO::PARAM_STR);
            }
        }

        return $this->STH->execute();
    }

    catch (Exception $e)
    {
        $core->message($e->getMessage());
    }

    $this->counter++;

    $this->queries .= "<br />$sql";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T20:37:18.637

“用于编辑的表单字段”是对我的提示，您正在执行以下操作：

```
<input value="<?php echo $row['info']; ?>"> 
```

由于该领域的报价，这不会很好地工作`info`。它输出`value=""`. 用于`htmlspecialchars($row['info'], ENT_QUOTES)`正确转义 html 中发射的引号。

# javascript - PhoneGap - 允许的最大活动媒体对象数？

> ID：15465912
> 
> 赞同：1
> 
> 时间：2013-03-17T20:35:36.583
> 
> 标签：javascript, android, cordova, media

我在 Android 上使用 PhoneGap (Cordova) 并同时播放多个媒体对象。我知道由于资源限制，允许并发媒体对象的最大数量。当我一次有太多时，我可以通过应用程序崩溃来确认这一点。

我已经搜索但无法找到同时活动媒体对象的数量限制是多少？一旦我知道上限是什么，我就可以将声音的数量限制在它之下，这样它就不会崩溃。

有谁知道 Phonegap for Android 中允许的最大活动媒体对象数？或者它只是相对于您正在使用的设备？

每次播放声音后我都在使用 .release() 但我担心的是并发声音。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:42:38.490

解决方案是编写一个管理器来限制并发声音的数量。

我无法回答这个限制，但我怀疑它会因设备的功能而异。

# bash - 切换此输出的格式？

> ID：15465914
> 
> 赞同：1
> 
> 时间：2013-03-17T20:35:59.463
> 
> 标签：bash

我编写了这个脚本来打印一个或多个文件中的单词分布：

```
cat "$@" | tr -cs '[:alpha:]' '\n' | 
tr '[:upper:]' '[:lower:]' | sort | 
uniq -c | sort -n 
```

这给了我一个输出，例如：

```
1 the
4 orange
17 cat 
```

但是，我想更改它，以便首先列出该单词（我假设将涉及排序，因此它的字母顺序），而不是数字，如下所示：

```
cat 17
orange 4
the 1 
```

是否只有一个简单的选项我需要切换它？还是更复杂的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T20:37:58.820

管道输出到

```
awk '{print $2, $1}' 
```

或者您可以使用 awk 完成任务：

```
{
    $0 = tolower($0)    # remove case distinctions
    # remove punctuation
    gsub(/[^[:alnum:]_[:blank:]]/, "", $0)
    for (i = 1; i <= NF; i++)
        freq[$i]++
}

END {
    for (word in freq)
        printf "%s\t%d\n", word, freq[word]
} 
```

用法：

```
awk -f wordfreq.awk input 
```

# python - 在单独的线程中运行 PyQt 时在交互式控制台退出时杀死 GUI

> ID：15465915
> 
> 赞同：1
> 
> 时间：2013-03-17T20:36:04.237
> 
> 标签：python, multithreading, pyqt

我想编写一个 PyQt 应用程序，它会在一个单独的线程中生成它的窗口，这样我就可以在它运行时在交互式 shell 中弄乱它的数据结构。不幸的是，尝试在 shell 中执行 exit() 并不会终止应用程序，可能是因为 Qt 线程仍在运行。在控制台中按下 CTR+D 或键入 exit() 或键入 exit 后，如何强制 Python shell 死机？这是测试用例：

```
#!/usr/bin/python -i

from PyQt4 import QtGui

class MainWindow(QtGui.QMainWindow):
    pass

def main():
    import sys

    app = QtGui.QApplication(sys.argv)
    window = MainWindow()
    window.show()
    sys.exit(app.exec_())

if __name__ == '__main__':
    import threading
    threading.Thread(None, main).start() 
```

# notepad++ - Notepad++ 颜色高亮及其值

> ID：15465917
> 
> 赞同：4
> 
> 时间：2013-03-17T20:36:14.053
> 
> 标签：notepad++

昨晚，Notepad++ 的最后一次使用，颜色代码背景突出显示，其值如下所示。![在此处输入图像描述](../Images/a34e2711316d56d7ee250f2d1f6a77fc.png)

但是现在，背景颜色不是这样显示的。![在此处输入图像描述](../Images/403df4f72bd5977f91660a90d45a4e26.png)

我没有找到设置。请你能帮我，我该如何设置第一张图片的设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-20T15:26:01.890

这是记事本#（“尖锐”）。由于某种原因，它无法“验证”并在更新后被禁用。您可以转到下面的链接或直接从带有 N++ 的插件管理器下载它。

[链接到记事本#](https://github.com/Lomeli12/Notepad-Sharp)

* * *

还，

试试“记事本++的快速颜色选择器”。您双击十六进制颜色，会弹出一个颜色选择器以及一个预览。另一个很酷的事情是，如果您愿意，它会提供更多与“主题”相匹配的颜色。

[**这是链接快速颜色选择器**](https://code.google.com/p/nppqcp/)（也可以从插件管理器中获得）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-20T03:03:01.087

你好去插件管理器并选择安装记事本#祝你好运！

尝试使用插件管理器

![在此处输入图像描述](../Images/a09005c208a815540aca182404e3d5a8.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T04:30:49.983

颜色突出显示由插件完成。我知道 Notepad# 插件可以做到这一点，并且可能还有其他一些插件。

在更新过程中，Notepad# 插件可能已被禁用。

我注意到它在我的一台机器上工作，但在另一台机器上却没有。我不得不重新安装 Notepad# 插件，因为插件管理器没有检测到有可用的更新。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-17T20:52:22.077

从菜单中选择`Settings`-> `Style Configurator`。您应该看到以下内容：

![NPP 样式设置](../Images/e56563304713d7b14600fec52c472ba8.png)

选择`CSS`左侧，然后选择`VALUE`中间。然后您可以更改`Foreground`和`Background`颜色。

注意 - 我在 Windows 上，使用 Notepad++ 版本 6。

# amazon-s3 - CORS、Amazon S3 和 Rails - 在 IE 10 和 Safari 上失败

> ID：15465922
> 
> 赞同：30
> 
> 时间：2013-03-17T20:36:59.933
> 
> 标签：amazon-s3, amazon, internet-explorer-10, cors

IE 10 支持 CORS。Amazon S3 支持 CORS。

我们可以在除 IE 10 之外的所有浏览器中直接从站点到 S3 上传（不打扰 IE 9-）。它是这样工作的：

1.  用户选择一个文件（拖放或从文件输入中选择）

2.  (POST) 我们必须在请求进入 S3 ( `$.post('/static/sign_asset', { ... }`) 之前“签署”请求，它有一个全天完美触发的回调。

3.  （POST）然后我们使用文件数据和来自签名等的数据将 XHR 制作为 S3。

```
var xhr = new XMLHttpRequest();
// ETC
var fd = new FormData();
// ETC
xhr.open('POST', url, true);
xhr.send(fd);

```

文件上传，一切都在所有浏览器中完美运行，除了......

## 问题从 IE 10 开始：

4.  **在 Access-Control-Allow-Origin 标头中找不到 Origin null。**和**XMLHttpRequest：网络错误 0x80070005，访问被拒绝。**在我们设置`response.headers["Access-Control-Allow-Origin"] = "*"`发送响应的控制器后，没有其他浏览器显示此内容。即使我们遇到了这个错误，Chrome 也会显示这个错误，但请求仍然会通过。

5.  尽管出现此错误，该文件实际上确实已上传到 S3。Amazon S3 执行[303 重定向](http://doc.s3.amazonaws.com/proposals/post.html#Dealing_with_Success)操作- 这是我们对文件已成功上传的验证。

6.  (GET) 这是对 CORS Ajax 请求的重定向，因此“重定向”不会刷新页面，它只是返回并访问我们的服务器。IE 10 使用 Content-Type 发出此请求`multipart/form-data; boundary=---------------------------7dd2ce2201da`

**这就是导致 Rails 出错的原因。**

```
Started GET "/static/signed/asset/tsabat/83ee6840-7158-0130-c19b-28cfe912f6ff?bucket=s.cdpn.io&key=5%2Fauthor-tim_2.jpg&etag=%2260fb3876d516553ff6f3a018066b3250%22" for 127.0.0.1 at
 2013-03-17 10:46:36 -0700

EOFError - bad content body:
  (gem) rack-1.4.5/lib/rack/multipart/parser.rb:74:in `block in Rack::Multipart::Parser#fast_forward_to_first_boundary'  (gem) rack-1.4.5/lib/rack/multipart/parser.rb:72:in `Rack::Multipart::Parser#fast_forward_to_first_boundary'
  (gem) rack-1.4.5/lib/rack/multipart/parser.rb:72:in `Rack::Multipart::Parser#parse'
  (gem) rack-1.4.5/lib/rack/multipart/parser.rb:15:in `Rack::Multipart.parse_multipart'
  (gem) rack-1.4.5/lib/rack/multipart.rb:25:in `ActionDispatch::Request#parse_multipart'
  (gem) rack-1.4.5/lib/rack/request.rb:336:in `ActionDispatch::Request#POST'
  (gem) rack-1.4.5/lib/rack/request.rb:201:in `ActionDispatch::Request#POST' 
```

## Safari 也失败了（6.0.2）

Safari 返回 200 状态码，Rails 并没有对重定向感到害怕，但 xhr.status 是错误的。xhr.readyState == 4，但 xhr.status == 0。我们一直在寻找 200 以确保它正常工作。这很容易修复，但仍然......

[Chrome](http://cl.ly/NdLA)没问题- 似乎甚至没有设置 Content-Type

[Firefox 做得很好](http://cl.ly/Nctm)- 内容类型`application/json; charset=utf-8`

* * *

有一些[示例页面](http://ie.microsoft.com/testdrive/HTML5/CORSUpload/Default.html)显示了 IE 10 处理 CORS 的能力，但它们不处理这个重定向问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T03:07:18.420

CodePen 团队成员在这里。我们想通了……

我们希望依赖于 S3 的 POST 功能中内置的 303 重定向，但事实证明这是有问题的，如上所示。相反，我们只是停止使用[S3 表单字段](http://docs.aws.amazon.com/AmazonS3/latest/dev/HTTPPOSTForms.html#HTTPPOSTFormFields) `success_action_redirect`并切换到`success_action_status`.

对于后代，不要依赖 S3 的 303 重定向来跨浏览器一致地处理 xhr 请求。如果这样做，您将花费时间与无效标题、空起源和龙作斗争。

# r - psych 包 fa.parallel() 调用出错

> ID：15465925
> 
> 赞同：0
> 
> 时间：2013-03-17T18:55:59.667
> 
> 标签：r

我收到以下脚本错误：

```
fa.parallel(eser[,-1], fa="pc", n.iter=10,
             show.legend=FALSE, main="Example Scree plot with parallel analysis")

Error in fa.parallel(eser[, -1], fa = "pc", n.iter = 10, show.legend =
FALSE,  :  object 'fa.values.sim' not found 
```

是什么样的对象`fa.values.sim`？然而，碎石图是正确的。你有什么想法可以帮助我修复错误吗？我在 R v2.15.3 下使用 Rstudio v0.97.310

非常感谢您提供的任何帮助。

* * *

`eser`数据框如下：

```
Participant Price Software Aesthetics Brand
1           P1     6        5          3     4
2           P2     7        3          2     2
3           P3     6        4          4     5
4           P4     5        7          1     3
5           P5     7        7          5     5
6           P6     6        4          2     3
7           P7     5        7          2     1
8           P8     6        5          4     4
9           P9     3        5          6     7
10         P10     1        3          7     5
11         P11     2        6          6     7
12         P12     5        7          7     6
13         P13     2        4          5     6
14         P14     3        5          6     5
15         P15     1        6          5     5
16         P16     2        3          7     7
17         P17     3        3          5     6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-09T17:34:18.880

我已经在下一个版本的 psych 包（1.3.6）中修复了这个错误。

对 psych 包的所有用户的请求。如果您发现错误，请告诉我。这是修复它们的最佳方法。

账单

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T01:18:03.723

我认为这是功能上的错误。您可以通过在 R 的命令行中键入其名称来阅读其源代码。然后您可以搜索所有出现的`fa.values.sim`. 这些中的每一个都在一个`if (fa != "pc")`语句中。因此，当函数尝试分配时`results`，它不能，因为`fa.values.sim`确实没有定义 if `fa == "pc"`。但是这个错误发生在情节声明之后，所以你的情节不受影响。

综上所述，代码中存在错误`fa.parallel`。如果你只关心剧情，那你确实没问题。您可以忽略错误消息。

如果您*真的*希望错误消息消失，请将您的命令更改为：

```
fa.parallel(eser[,-1], fa="foo", n.iter=10,
             show.legend=FALSE, main="Example Scree plot with parallel analysis") 
```

这是因为函数的编写方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-12T08:55:02.590

```
library(psych)
fa.parallel(USJudgeRatings[,-1], fa="PC", n.iter=100,
show.legend=FALSE, main="Scree plot with parallel analysis") 
```

上面挂了R，原因不明。有错误吗？谢谢

# php - 使用 php\mysql 删除数据库表

> ID：15465928
> 
> 赞同：-2
> 
> 时间：2013-03-17T20:37:24.937
> 
> 标签：php, mysql, database

我正在尝试将数据库中的所有表列出到一个数组中，然后继续删除表的内容。我的代码有什么问题？

```
 <?php

mysql_connect('localhost', 'root','');

mysql_select_db(database_name);

$res = mysql_query("SHOW TABLES");

$tables = array();

while($row = mysql_fetch_array($res, MYSQL_NUM)) {
    $tables[] = "$row[0]";
}

$length = count($tables);

for ($i = 1; $i < $length; $i++) {
  $res = "DELETE FROM $tables[$i]";
  mysql_query($res);
  echo $res;
    $i++;
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:48:14.900

在你的 for 循环结束时，你不需要做 $i++; 不再，因为此操作已包含在 for 循环中。

您目前拥有的代码将删除一个表的内容然后跳过一个表，再次删除一个表的内容并再次跳过一个......

$i 也应该以 0 开头，因为 php 中数组中的第一个元素是元素 0。

```
for ($i = 0; $i < $length; $i++) {
    $res = "DELETE FROM $tables[$i]";
    mysql_query($res);
    echo $res;
} 
```

# c# - 应用程序无法在模拟器中启动

> ID：15465931
> 
> 赞同：0
> 
> 时间：2013-03-17T20:37:43.637
> 
> 标签：c#, android, xamarin, xamarin.android

我正在尝试使用 Xamarin.Android 创建一个应用程序。该应用程序未在 android 模拟器中启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-20T04:37:04.483

我有同样的问题......奇怪的是我每两周都会遇到同样的问题。 **我的解决方案是将最低 Android 版本更改为更低或更高。**

# c++ - 在没有加载项的情况下将 Qt 与 Visual Studio 一起使用

> ID：15465932
> 
> 赞同：29
> 
> 时间：2013-03-17T20:37:43.750
> 
> 标签：c++, qt, user-interface

我最近开始使用 Qt 库，我有一个问题。这是否可以在没有特殊插件的情况下将 Qt 与 Visual Studio 一起使用？

我只想使用 qt 设计器设计 UI，其余的在 VS Express 中完成。我怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-18T02:12:46.127

是的，您可以，如果您不想使用[QtVSAddin](http://qt-project.org/wiki/QtVSAddin)，那么在没有 VS 插件且**无需**手动执行任何 uic 或 moc 步骤的情况下，将 Qt 与 VS Express 一起使用非常容易。让 QMake（与 Qt 一起安装但不是 QtVSAddin 的一部分）创建您的 VS 项目文件并在 qmake 项目文件中进行所有项目设置。每当您进行更改，例如添加/删除表单或源时，请修改 qmake 项目文件并重新生成 VS 项目。根本不要修改VS项目文件，只把它当作一个临时项目。QMake 会自动将规则添加到 VS 项目文件中以重新运行**uic**和**moc**，如果您只是修改源代码或表单，则无需执行任何操作。

出于配置管理的目的，我发现这是使用此工作流程的一种更简洁的方法，因为您将 VS 项目文件视为只是一个临时项目（它们往往差异很大，并且[在版本控制中维护起来很痛苦](https://stackoverflow.com/questions/611925/suggestions-for-maintaining-visual-studio-vcproj-project-files-in-version-contro)）。

几个片段可以帮助你：

在您的 qmake 项目文件中，确保将以下行添加到其中，以便在 Windows 上运行时生成 VS 项目文件（qmake 默认生成一个 makefile）。

**your_qmake_proj.pro**

```
win32: TEMPLATE = vcapp 
```

此外，使用批处理文件重新运行 qmake 很方便，因此您不必打开命令提示符并设置环境（或在已设置环境的命令提示符中将目录更改为项目）。如果您还没有使用 Windows 设置各种 Qt 环境变量（或者不想），请确保将它们添加到您的批处理文件中。

**makevcproj.bat**

```
set QTDIR=C:\Qt\x.y.z
set PATH=%PATH%;%QTDIR%\bin
set QMAKESPEC=win32-msvcXXXX
qmake your_qmake_proj.pro
pause 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T17:45:13.810

CMake 也是一个答案，它确实适用于 Visual Studio 的快速版本。我的意思是，如果您在 CMake 中使用 Qt 支持，您可以在没有 Qt 插件的情况下在 Visual Studio 中开发 Qt 项目（就像我多年来所做的那样）。我安装插件只是为了同一个包中的调试扩展。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T20:39:47.623

这当然是可能的，但如果没有插件，您将需要在 VS 中编译其余部分之前或通过预编译脚本编写所需的文件`UI`。`MOC`

具体来说：

`uic``.ui`从文件生成标题。

和

`moc`为其中包含 Qt 宏的类生成附加的实现文件。

该加载项可帮助您在编译其余文件之前在所需文件上顺利调用这些。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-17T23:31:20.973

如果您在 QtCreator 中创建 UI 并以生成 UI 和 MOC 文件的方式手动设置 VS，这是可能的。

但工作量太大，您可以使用[QtCreator](http://qt.digia.com/Product/Developer-Tools/)，这是一个了不起的轻量级 IDE。

# java - 非常简单的自定义 taglib 功能不起作用

> ID：15465936
> 
> 赞同：6
> 
> 时间：2013-03-17T20:38:03.423
> 
> 标签：java, jsp, tags, taglib

我正在思考为什么我的自定义 taglib 函数不起作用。该示例使用`Math.cos`and `Math.sin`。

这是课程：

```
package foo.tags;
public class Math {
    public java.lang.Double cos(java.lang.Double value) {
        return java.lang.Math.cos(value);
    }
    public java.lang.Double sin(java.lang.Double value) {
        return java.lang.Math.sin(value);
    }
} 
```

这是 .tld 文件：

```
<taglib xmlns="http://java.sun.com/xml/ns/j2ee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee/web-jsptaglibrary_2_0.xsd"
version="2.0">

<tlib-version>2.0</tlib-version>
<uri>/WEB-INF/tags/math.tld</uri>
<function>
    <name>cos</name>
    <function-class>foo.tags.Math</function-class>
    <function-signature>java.lang.Double cos(java.lang.Double)</function-signature>
</function>
<function>
    <name>sin</name>
    <function-class>foo.tags.Math</function-class>
    <function-signature>java.lang.Double sin(java.lang.Double)</function-signature>
</function>
</taglib> 
```

调用代码的重要片段：

```
<%@ taglib prefix="math" uri="/WEB-INF/tags/math.tld" %>
<span>${math:sin(180)}</span> 
```

我在`math:sin(180)`. 有谁看到我做错了什么？如果需要更多信息，请告诉我，但异常本身的信息量不是很大。

## 编辑

这是堆栈跟踪：

```
Mar 17, 2013 2:27:14 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [Foo] in context with path [/Foo] threw exception [org.apache.jasper.JasperException: An exception occurred processing JSP page /WEB-INF/jsp/svg/clock1.jsp at line 10

[OTHER LINES REDACTED]
10:   <span>${math:sin(180)}</span>
[OTHER LINES REDACTED]

Stacktrace:] with root cause
java.lang.NullPointerException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.el.parser.AstFunction.getValue(AstFunction.java:112)
    at org.apache.el.parser.AstMult.getValue(AstMult.java:39)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
    at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:985)
    at org.apache.jsp.<REDACTED>
    at org.apache.jsp.<REDACTED>
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:593)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:530)
    at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:954)
    at org.apache.jsp.<REDACTED>
    at org.apache.jsp.<REDACTED>
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at Foo.page.filter.SimulationProgressFilter.doFilter(SimulationProgressFilter.java:88)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at fOO.page.filter.CurrentSessionStateFilter.doFilter(CurrentSessionStateFilter.java:119)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-17T20:47:52.240

你的`cos`和`sin`方法需要`static`。

# php - 在邮件中动态发送变量 (PHP)

> ID：15465938
> 
> 赞同：-1
> 
> 时间：2013-03-17T20:38:06.547
> 
> 标签：php

我在表单中的输入字段旁边有加号图标，以便我可以添加更多输入字段。字段名称会自动生成到此表单中 -> "one_f1", "one_f2" ...

当我创建要发送的邮件时，我需要为此创建一个 while 循环，以便我可以放置从表单发送的所有值。我在尝试在名为 body 的变量中添加 while 循环时卡住了，因为它必须位于邮件正文中。

我怎样才能解决这个问题？

这是代码；

```
$body ='
            <ul>
                while(isset($_POST["one_f".$i]))){
                     echo "<li style=\"list-style: circle;\">".$_POST["one_f".$i]".</li>"; 
                }
            </ul>
       '; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T20:40:17.550

追加有什么问题？

```
$body = "<ul style=\"list-type-type:circle\">";
$i = 1; // whatever number the first field is
while(isset($_POST['one_f'.$i])) {
    $body .= "<li>".$_POST['one_f'.$i]."</li>";
    $i++; // you forgot this in your code!
}
$body .= "</ul>"; 
```

# php - 使用 php 以 html 形式验证数字

> ID：15465941
> 
> 赞同：0
> 
> 时间：2013-03-17T20:38:29.647
> 
> 标签：php, validation, forms, http-post

我创建了一个表格，其中提交的金额就像

`<label for="amt"<?php validateField( "amt", $Fieldsmissing ) ?>>Amt *</label>` `<input type="number" name="amt" id="amt" min="1" value="<?php setValue( "amt" ) ?>" />`

在表格的顶部，条件就像

`function setValue( $fieldName ) { if ( isset( $_POST[$fieldName] ) && $_POST[$fieldName] > 0 ) { echo $_POST[$fieldName]; } }`

提交后，如果我输入 0 则会显示错误，但是如果我输入 00 或任何“-”符号或任何字母而不是 0，则它不会验证。

据我所知，数字类型在 Mozila、IE 中有一个错误，但它在 Chrome 中工作正常，因为 Chrome 不接受任何低于 1 的输入。我正在寻找的是，我想设置从 0.1 到最大正数的输入值（即 99999）。除此之外，如果它输入任何其他内容，它将显示错误。谁能告诉我什么条件最适合我的形式。谢谢。

此处提供完整的源代码以供您理解，如果您查看[此处将不胜感激](https://www.dropbox.com/s/spo0osmlf7wb536/registration.php?n=40292574)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:59:18.310

查看这些功能：

*   [**intval：**](http://php.net/manual/en/function.intval.php)返回 var 的整数值，使用指定的基数进行转换（默认为基数 10）。intval() 不应用于对象，因为这样做会发出 E_NOTICE 级别的错误并返回 1。
*   [**filter_var：**](http://php.net/manual/en/function.filter-var.php)使用指定过滤器过滤变量。（`FILTER_VALIDATE_INT`在你的情况下。
*   [**settype**](http://php.net/manual/en/function.filter-var.php)设置变量的类型。（整数）

所以，试试这个：

```
function setValue($fieldName)
{
   if (isset($_POST[$fieldName]))
   {
      $field = intval($_POST[$fieldname]);
   }

   // other magic
} 
```

# glassfish - Glassfish 3：在 ServletContextListener.contextDestroyed 方法中调用 ejb 上的方法导致异常

> ID：15465944
> 
> 赞同：1
> 
> 时间：2013-03-17T20:38:48.910
> 
> 标签：glassfish, ejb, java-ee-6, servletcontextlistener

我有一个@Singleton ejb，它将在 ServletContextListener contextInitialized 和 contextDestroyed 方法中调用。contextDestroyed 方法中的调用导致异常：

javax.ejb.EJBException：尝试在容器处于停止状态时调用

看起来好像在容器关闭后调用了 contextDestroyed 方法，让我没有机会访问像我的 ejb 这样的任何资源。有谁知道在容器关闭之前是否有任何方法可以了解应用程序关闭？

提前谢谢。干杯，斯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:32:50.897

您可以`@PreDestroy`直接在`@Singleton`bean 中对方法使用注解。如此标记，在应用程序关闭期间，将在 bean 销毁之前调用该方法。

# c# - 下拉列表 selectedindex 更改后显示隐藏的文本框和标签

> ID：15465945
> 
> 赞同：1
> 
> 时间：2013-03-17T20:38:52.810
> 
> 标签：c#, sharepoint

C#代码：

```
 protected void DropDownListDB_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (DropDownListDB.SelectedValue == "Other")
        {
            LabelIfOtherDb.Visible = true;
            TextBoxIfOtherDb.Visible = true;
        }
    } 
```

ASP 代码：

```
 <asp:DropDownList AutoPostBack="True" ID="DropDownListDB" runat="server" Height="20px" 
                    Width="158px">
                    <asp:ListItem>- Select -</asp:ListItem>
                    <asp:ListItem>Oracle</asp:ListItem>
                    <asp:ListItem>MS SQL Server</asp:ListItem>
                    <asp:ListItem>MySQL</asp:ListItem>
                    <asp:ListItem>MS Access</asp:ListItem>
                    <asp:ListItem>Other</asp:ListItem>
                </asp:DropDownList> 
```

我有`AutoPostBack="True"`，但它仍然没有显示我隐藏的文本框/标签..有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T20:42:24.150

看来，您的事件未连接到事件处理程序。两种可能性：或者，在标记中定义事件处理程序，例如：

```
<asp:DropDownList AutoPostBack="True" ID="DropDownListDB" runat="server" Height="20px" SelectedIndexChanged="DropDownListDB_SelectedIndexChanged"> 
```

或在代码隐藏中

```
DropDownListDB.SelectedIndexChanged += DrowpDownListDB_SelectedIndexChanged; 
```

你应该把它放在标记中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T21:22:38.727

这部作品对大学作业有同样的问题

```
 <asp:DropDownList ID="DropDownList1" AutoPostBack="true" 
    runat="server" Height="16px" Width="237px" 
    onselectedindexchanged="DropDownList1_SelectedIndexChanged"/> 
```

# ruby-on-rails - 设计 - 列出用户

> ID：15465949
> 
> 赞同：3
> 
> 时间：2013-03-17T20:39:08.677
> 
> 标签：ruby-on-rails, list, model, devise, controller

在我的 Rails 应用程序中，我需要按用户名列出用户，我得到的错误是

```
NoMethodError in Posts#index

Showing C:/Users/Corey/Dev/statlog/app/views/posts/index.html.erb where line #12 raised:

undefined method `username' for #<Array:0x3893298>
Extracted source (around line #12):

9: <div class="follow-row">
10:   <div class="titan-users nuvo"><h2>TITAN Users</h2></div>
11:     <% @users.each do |post| %>
12:       <div class="user-row"><%= @user.username %></div>
13:     <% end %>
14: </div>
15: 
Rails.root: C:/Users/Corey/Dev/statlog

Application Trace | Framework Trace | Full Trace
app/views/posts/index.html.erb:12:in `block in _app_views_posts_index_html_erb___134739565_23193672'
app/views/posts/index.html.erb:11:in `each'
app/views/posts/index.html.erb:11:in `_app_views_posts_index_html_erb___134739565_23193672'
app/controllers/posts_controller.rb:13:in `index' 
```

下面是我的posts_controller 你看我没有user_controller。

```
 class PostsController < ApplicationController
  # GET /posts
  # GET /posts.json
  def index
    @posts = Post.all(:order => "created_at DESC")
    @post = Post.new

    @users = User.all

    @user = User.find(:all)

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @posts }
    end
  end

  # GET /posts/1
  # GET /posts/1.json
  def show
    redirect_to posts_path
  end

  # GET /posts/new
  # GET /posts/new.json
  def new
    @post = Post.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @post }
    end
  end

  # GET /posts/1/edit
  def edit
    @post = Post.find(params[:id])
  end

  # POST /posts
  # POST /posts.json
  def create
    @post = current_user.posts.build(params[:post])

    respond_to do |format|
      if @post.save
        format.html { redirect_to @post, notice: 'Post was successfully created.' }
        format.json { render json: @post, status: :created, location: @post }
      else
        format.html { render action: "new" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /posts/1
  # PUT /posts/1.json
  def update
    @post = Post.find(params[:id])

    respond_to do |format|
      if @post.update_attributes(params[:post])
        format.html { redirect_to @post, notice: 'Post was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /posts/1
  # DELETE /posts/1.json
  def destroy
    @post = Post.find(params[:id])
    @post.destroy

    respond_to do |format|
      format.html { redirect_to posts_url }
      format.json { head :no_content }
    end
  end
end 
```

这是我的用户和帖子模型。

```
class Post < ActiveRecord::Base
  attr_accessible :status, :author, :email, :username

  belongs_to :user

  validates :status, :presence => true

end 
```

我的用户模型

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :username

  has_many :posts
  # attr_accessible :title, :body
end 
```

最后但并非最不重要的是我的 post/index.html.erb 视图。

```
<% if user_signed_in? %>
  <h1 id="welcome" class="nuvo">Welcome <%= current_user.username %>!</h1>
<% else %>
  <h1 id="welcome" class="nuvo">Log-In to make some posts!</h1>
<% end%>

<div class="follow-row">
  <div class="titan-users nuvo"><h2>TITAN Users</h2></div>
    <% @users.each do |post| %>
      <div class="user-row"><%= @user.username %></div>
    <% end %>
</div>

<div class="statuses">
  <% if user_signed_in? %><div class="status-form"><%= render 'form' %></div><% end %>
  <% @posts.each do |post| %>
    <div class="post">
      <div class="tstamp"><strong>Posted <%= time_ago_in_words(post.created_at) %> ago by <%= post.user.username %></strong></div>
      <div class="status"><%= post.status %></div>
    </div>
  <% end %>
</div> 
```

我的用户迁移文件

```
class DeviseCreateUsers < ActiveRecord::Migration
  def change
    create_table(:users) do |t|
      ## Database authenticatable
      t.string :email,              :null => false, :default => ""
      t.string :encrypted_password, :null => false, :default => ""

      ## Recoverable
      t.string   :reset_password_token
      t.datetime :reset_password_sent_at

      ## Rememberable
      t.datetime :remember_created_at

      ## Trackable
      t.integer  :sign_in_count, :default => 0
      t.datetime :current_sign_in_at
      t.datetime :last_sign_in_at
      t.string   :current_sign_in_ip
      t.string   :last_sign_in_ip

      ## Confirmable
      # t.string   :confirmation_token
      # t.datetime :confirmed_at
      # t.datetime :confirmation_sent_at
      # t.string   :unconfirmed_email # Only if using reconfirmable

      ## Lockable
      # t.integer  :failed_attempts, :default => 0 # Only if lock strategy is :failed_attempts
      # t.string   :unlock_token # Only if unlock strategy is :email or :both
      # t.datetime :locked_at

      ## Token authenticatable
      # t.string :authentication_token

      t.timestamps
    end

    add_index :users, :email,                :unique => true
    add_index :users, :reset_password_token, :unique => true
    # add_index :users, :confirmation_token,   :unique => true
    # add_index :users, :unlock_token,         :unique => true
    # add_index :users, :authentication_token, :unique => true
  end
end 
```

将用户名添加到用户迁移文件

```
class AddUsernameToUser < ActiveRecord::Migration
  def change
    add_column :users, :username, :string
  end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T20:41:05.057

```
<% @users.each do |user| %>
   <div class="user-row"><%= user.username %></div>
<% end %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T21:30:28.650

你有控制器`@user = User.find(:all)`，所以当你打电话时，`@user.username`你会得到你可爱的错误。

同样在`<% @users.each do |post| %>`您有复制粘贴错误（`post`这里在做什么？）。`user`渲染时使用本地。**RadBrad**答案将起作用：

```
<% @users.each do |user| %>
   <div class="user-row"><%= user.username %></div>
<% end %> 
```

这`@posts.users`不起作用，因为您的模型中没有这种关系。

最后清理你的控制器并删除`@user = User.find(:all)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T21:08:42.213

尝试这样做

```
<% @posts.users.each do |post| %>
   <%= user.username %>
<% end %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T10:38:34.857

你可以使用这个：

```
<% @users.each do |post| %>
  <div class="user-row"><%= post.username %></div>
<% end %> 
```

或者你也可以这样做：

```
<% @users.each do |user| %>
  <div class="user-row"><%= user.username %></div>
<% end %> 
```

# jquery - 如何在html（）之后聚焦（）？

> ID：15465950
> 
> 赞同：0
> 
> 时间：2013-03-17T20:39:17.613
> 
> 标签：jquery, html, focus

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
</head><
<body>
    <button onClick="change()">Change Input</button>
    <div>
        <input value="It works">
    </div>

<script>
    function change() 
    {
        $('div').html('<input value="it didnt work">');
    }

    $('input').focus(function () 
    {
        if (this.value == this.defaultValue) 
        {
            this.value = '';
        }
    }).blur(function() 
    {
        if (this.value == '') 
        {
            this.value = this.defaultValue;
        }
    });
</script>

</body>
</html> 
```

在这里，我尝试在更改 div 的 html 后集中输入。但是没有用，为什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:42:28.360

用于`$('input').focus();`聚焦输入框。确保输入框已经存在于 dom 中。

# easeljs - 为什么easeljs会失败，TexturePacker的动画何时会改变小数位数？

> ID：15465951
> 
> 赞同：0
> 
> 时间：2013-03-17T20:39:33.280
> 
> 标签：easeljs, texturepacker

我不知道问题是画架错误还是我做错了什么（很可能）。当我使用 TexturePacker 对象制作动画时，在具有不同小数位数的数字之间的数组位置中的动画不会显示。（例如 9 到 10、99 到 100）

jsfiddle中的代码示例：

```
var fromTexturePacker = {
    "animations": {
        "0": [0],
            "1": [1],
            "2": [2],
            "3": [3],
            "4": [4],
            "5": [5],
            "6": [6],
            "7": [7],
            "8": [8],
            "9": [9],
            "10": [10],
    }
}

var canvas = document.getElementById("canvas");
var stage = new createjs.Stage(canvas);

createjs.Ticker.addListener(stage);

var image = new Image();
image.src = "http://www.kadrmasconcepts.com/blog/wp-content/uploads/2011/05/robin.png";

var Animaciones = {
    images: [image],
    frames: {
        width: 240,
        height: 315,
        regX: 120,
        regY: 160
    },
    animations: {}
};

var anim = fromTexturePacker['animations'];

Animaciones.animations['go0to9'] = [anim['0'], anim['9']];
Animaciones.animations['go9to10'] = [anim['9'], anim['10']];
Animaciones.animations['go10to10'] = [anim['10'], anim['10']];

bird = new createjs.BitmapAnimation(new createjs.SpriteSheet(Animaciones));
bird.x = 150;
bird.y = 150;
bird.gotoAndPlay("go0to9");

stage.addChild(bird); 
```

[http://jsfiddle.net/xa6Lr/9/](http://jsfiddle.net/xa6Lr/9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:44:41.850

您的问题是您将单帧引用为“动画”，并且仅将数组用于 1 帧。有多种方法可以实现这一点，请参见下面的 fork：

```
//either remove the arrays
var fromTexturePacker = {
    "animations": {
            "0": 0,
            "1": 1,
            "2": 2,
            "3": 3,
            "4": 4,
            "5": 5,
            "6": 6,
            "7": 7,
            "8": 8,
            "9": 9,
            "10": 10
    }
}

//OR if you NEED to put single frames into arrays, use this:
Animaciones.animations['go9to10'] = [anim['9'][0], anim['10'][0]]; 
```

[http://jsfiddle.net/YVyKJ/2/](http://jsfiddle.net/YVyKJ/2/)

EaselJS 动画系统非常强大，我想说你的动画通过提供多维数组作为帧来工作，这已经足够令人惊奇了。

# jquery - 用jQuery获取'this'输入框的值？

> ID：15465955
> 
> 赞同：0
> 
> 时间：2013-03-17T20:39:53.783
> 
> 标签：jquery, input

所以我有多个 div 包含相同的 HTML 结构、类名和属性。除了输出的内容外，它们是相同的。每个 div 都有一个具有相同类的输入框。如何获取每个输入框的具体值？我猜我会使用“this”，但我无法弄清楚如何准确使用“this”来获取每个文本框的特定值。我不想使用每个，因为它会输出一个值数组。

```
<div>
    <input class="player-input" type="text"></input>
    <button class="enter">Enter</button>
    <p>Lorem Ipsum<p>
</div>

<div>
    <input class="player-input" type="text"></input>
    <button class="enter">Enter</button>
    <p>Lorem Ipsum<p>
</div> 
```

我正在使用 Meteorjs，事件的设置如下：

```
Template.players.events({
    'click .enter': function(){
          //code
    },
    'keydown .player-input': function(e){
        if (e.which == 13){
            //code
        }
    }
}); 
```

如何使用 jQuery 获取每个特定输入元素的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:57:26.813

这是我将每个附加到段落的方法，如果它有效，请告诉我：http: [//jsfiddle.net/VtMRx/](http://jsfiddle.net/VtMRx/)

```
$(".player-input").each(function() {
    //alert(this.value);
    $("#paragraphID").append(this.value + "<br/>");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:11:30.077

您可能想使用 .closest

描述：对于集合中的每个元素，通过测试元素本身并向上遍历其在 DOM 树中的祖先来获取与选择器匹配的第一个元素。

[http://api.jquery.com/closest/](http://api.jquery.com/closest/)

```
$('.enter').click(function() {    
    var myVal = $(this).closest('.player-input').val();
    $(this).closest('p').html(myVal);
}): 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T20:54:39.563

使用您当前的结构， prev() 应该可以工作：

[http://api.jquery.com/prev/](http://api.jquery.com/prev/)

```
$('button.enter').click(function() {    
    var myVal = $(this).prev('input.player-input').val();
}): 
```

# c - 使用 `GCCs` 预处理器作为汇编器

> ID：15465958
> 
> 赞同：4
> 
> 时间：2013-03-17T20:40:02.483
> 
> 标签：gas, nasm, yasm, inline-assembly, c, gcc, assembly, compiler-construction

有各种开源汇编程序，例如[gas](/questions/tagged/gas "显示标记为“气体”的问题")、[nasm](/questions/tagged/nasm "显示标记为“nasm”的问题")和[yasm](/questions/tagged/yasm "显示标记为“yasm”的问题")。它们有不同`pseudo-ops`的`macro`语法。对于许多开源项目，汇编程序经过预处理以替换常量和平台条件。

`gcc`假设您可以使用所有当前的`attributes`和，创建汇编程序会有什么限制`#pragmas`，不包括翻译性能（编译/汇编到二进制时间）？

我不是在谈论[inline-assembly](/questions/tagged/inline-assembly "显示标记为“内联汇编”的问题")。

```
 #define MOV(RA,RB)  (OXFEB10000UL | RA << 16 | RB)  
 #define ADD(RA,RB)  (OXFEB20000UL | RA << 16 | RB)  
 #define RET         (OXFEB7ABCDUL)  

 unsigned long add4[] __attribute(section(".text")) =
 {
    ADD(R0,R1),
    ADD(R2,R3),
    MOV(R1,R2),
    ADD(R0,R1),
    RET()
 }; 
```

我相信使用指针算术可以允许模拟`.`和其他`labels`. 也许这是一个[XY 问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)；我试图理解为什么有这么多汇编程序。似乎一切都可以由预处理器完成，而汇编器确实是程序员的偏好；或者我缺少技术限制。

我想这可能与“你可以用汇编程序做的事情，而你不能用[shell 代码](http://en.wikipedia.org/wiki/Shellcode)做的事情”有关。

**编辑：我已将其从***C*重新标记为*compiler*。我对汇编程序的技术细节感兴趣。它是简单的`1-1`翻译和发射重定位（如编译器那样）还是还有更多？正如我上面所概述的那样，我并不是要人们编写汇编程序。我试图了解汇编程序在做什么。我不相信装配工有一**本龙书**。当然，预处理器不能自己创建a `binary`，需要额外的机器；它只翻译文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T03:09:36.677

我认为[XY 问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)是一个错误的描述。问题更多的是“需要**概念A**来评估**概念B** ”。

* * *

**概念 A：**什么是汇编程序？

请参阅：*David Solomon*的[汇编程序和装载程序](http://www.davidsalomon.name/assem.advertis/asl.pdf)。[一些智慧的珍珠，一些古老的琐事]

 *> 我很快发现这个领域缺乏文献。与存在大量文献的编译器相比，汇编器和加载器几乎没有写过。

一个汇编程序包括，

*   一个[符号表](http://en.wikipedia.org/wiki/Symbol_table)，便于通过某些对象格式进行链接。
*   [Lexer](http://en.wikipedia.org/wiki/Lexer_%28computer_science%29)和[Parser](http://en.wikipedia.org/wiki/Parser)用于将文本转换为数据结构或直接转换为机器代码。
*   为最有效的分支和子例程调用执行[2 遍。](http://en.wikipedia.org/wiki/Assembly_language#Number_of_passes)
*   操作码表。

汇编器通常是一种`1-1`翻译。但是，通常会存在几种分支和调用的变体；一般称为*长*版和*短*版。使用的操作码取决于到目的地的*距离；*需要一个两遍编译器来优化前向分支。^([哈罗德](https://stackoverflow.com/users/555045/harold))^(提到)

* * *

**概念 B：**使用“C”预处理器作为汇编器。

'C' 预处理器可以模拟的最好的是 1-pass 汇编器。一大类 CPU/指令可以这样编码；尽管宏可能很麻烦。不会有*列表*或*外部参照*，但大多数人不会错过这些功能。此外，由于预处理器的限制，语法会很奇怪。处理地址修复会很困难，因为标签要么通过使用指针或手动编码`#define`的标签偏移来重新使用“C”符号表。这将这种方法限制在除[基本块](http://en.wikipedia.org/wiki/Basic_block)之外的任何东西上。

## 大型汇编程序例程

YUV/RGB 转换或 MP3 解码等大型汇编程序例程不太可能以这种方式使用。

## 多架构代码

多架构代码很常见。例如，ARM wifi 芯片可能将其代码作为固件嵌入到 Linux 内核中。这种技术可能在这里有用。但是，为不同的架构使用单独的编译器/汇编器，然后使用`objcopy`嵌入它们要明智得多。

## 自修改代码

这可能是最有用的。事实上，许多工具，例如链接器和加载器，都具有在运行时修补代码的高级功能。它还可以用于在运行时有条件地更改例程；函数指针几乎同样快速且易于理解，更不用说缓存一致性问题了。

另见：[黄金博客](http://www.airs.com/blog/archives/date/2007/08)，伊恩·兰斯·泰勒（ *Ian Lance Taylor*）。[虽然他使用`<templates>`]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T20:46:27.097

> gcc 有什么限制创建汇编程序 [...] ？

**很多。**我们使用汇编器进行汇编，使用 C 预处理器进行预处理是有原因的。

首先，正如您刚刚自己展示的那样，您不能使用普通的汇编语法，无论是 Intel 还是 AT&T 风格。你必须使用那些丑陋的括号。

其次，`__attribute__`您所说的那些指令与预处理器无关，它甚至无法识别它们。它们是编译器的提示，**编译**器将依次生成由这些属性引导的汇编代码（或不生成）。

> 也许这是一个 XY 问题

这是肯定的。

> 我试图理解为什么有这么多汇编程序。

出于同样的原因，有各种类型的编程语言、编译器、汽车和衣服：一种工具不能满足每个人的需求。人们是不同的，他们用他们的工具链做不同的事情，他们发现一个比另一个更容易使用（如果它不需要 AT&T 语法，我个人会使用 GNU 汇编器，我只是不能支持），等等*

# php - PHP：将多数组键插入子数组键

> ID：15465959
> 
> 赞同：0
> 
> 时间：2013-03-17T20:40:04.340
> 
> 标签：php, arrays, key

我有一个像这样的 miltimentional 数组：

```
Array ( [11] => Array ( [0] => 5 ) 
        [12] => Array ( [0] => 7 ) 
        [14] => Array ( [0] => 9 [1] => 10 [2] => 11 [3] => 25 ) 
      ) 
```

并想像这样转换它：

```
Array ( [0] => Array ( [11] => 5 ) 
        [1] => Array ( [12] => 7 ) 
        [2] => Array ( [14] => 9 )
        [3] => Array ( [14] => 10)
        [4] => Array ( [14] => 11)
        [5] => Array ( [14] => 25)
      ) 
```

你知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:40:00.287

最低限度：

```
foreach($myArray as $a => $b)
  foreach($b as $c)
    $tmpArray[] = array($a => $c);
$myArray = $tmpArray; unset($tmpArray); 
```

[工作示例](http://codepad.org/ty2DBg2S)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:13:18.073

```
 <pre>
<?php

$arr = array();
$arr[11] = array(0, 1, 2);
$arr[12] = 3;
$arr[13] = array(4, 5);

print_r($arr);

$arr2 = array();

$x = 0;
$a = 0;

while ($x < 14) {// count() will fail with '3' but our numbers are at 11
    if (is_array($arr[$x])) {
        $p = 0;
        while ($p < count($arr[$x])) {// works here because index starts at 0 
            if (!is_null($arr[$x]))  {
                $arr2[$a++] = $arr[$x][$p];
            }
            $p ++;
        }
    }
    else {
        if (!is_null($arr[$x])) {
            $arr2[$a++] = $arr[$x];
        }
    }

    $x ++;
}

print_r($arr2);
?>
</pre> 
```

结果：

```
Array
(
    [11] => Array
        (
            [0] => 0
            [1] => 1
            [2] => 2
        )

    [12] => 3
    [13] => Array
        (
            [0] => 4
            [1] => 5
        )

)
Array
(
    [0] => 0
    [1] => 1
    [2] => 2
    [3] => 3
    [4] => 4
    [5] => 5
) 
```

我太累了，所以这是我现在能做的最大了。问题：

```
while ($x < 14) {// count() will be '3' but our numbers are at 11 
```

也许这段代码可以改进..

# c# - 如何使用 Xamarin 在 Android 应用中添加联系人信息

> ID：15465963
> 
> 赞同：2
> 
> 时间：2013-03-17T20:40:09.733
> 
> 标签：c#, contacts, xamarin, xamarin.android

我正在开发一个**简单**的应用程序，它将存储联系人姓名和 IP 地址。

在我的脑海中，我想我会有一个文本字段，我可以在其中输入名称，另一个文本字段用于 IP 地址，然后是一个按钮，单击该按钮将文本字段的内容存储到某种数组中，然后可以调用最多显示添加的联系人。

我在**Xamarin for Android 中工作并用****C#**编写我的代码- 除了我不完全确定从哪里开始这项任务。

有人知道在 C# 上从哪里开始吗？示例或现有作品将非常有用，因为我在编程方面非常初学者！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:29:38.400

Xamarin 有一个[github 存储库](https://github.com/xamarin)，其中包含许多不同的示例和现成的应用程序。

Xamarin.Android的[Xamarin 文档](http://docs.xamarin.com/)也非常有用，因为它包含存储库中一些示例的 API 文档、教程和描述以及其他示例。

还有几本书，它们为您提供了如何使用 Mono for Android/Xamarin.Android 的良好基础知识：

*   [使用 Mono for Android 和 .NET/C# 进行专业的 Android 编程](http://www.wrox.com/WileyCDA/WroxTitle/productCd-1118026438.html)
*   [使用 C# 进行移动开发](http://shop.oreilly.com/product/0636920024002.do)

# jquery - jQuery用for循环旋转几个div

> ID：15465964
> 
> 赞同：0
> 
> 时间：2013-03-17T20:40:10.840
> 
> 标签：jquery, loops, for-loop, rotation

我正在尝试创建一个 jquery 脚本来将每个 div 旋转 15 * x 度，但它不会工作。我从 w3schools 中找到了 css 旋转代码，实际上确实是从样式表中工作的。

无论如何，我正在使用的代码：

```
$(function() {
    var nrOfDivs = $(this).length();
    for(x=0; x=nrOfDivs; x++) {
        var y = x * 15;
        var wheelSpin = {
            'transform' : 'rotate(' + y + ')',
            '-ms-transform' : 'rotate(' + y + ')',
            '-moz-transform' : 'rotate(' + y + ')',
            '-webkit-transform' : 'rotate(' + y + ')',
            '-o-transform' : 'rotate(' + y + ')' 
        }
        $('.wheelbox').each(function() {
            $(this).css(wheelSpin);
        });
    }
}); 
```

我在 jquery 中做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:44:41.570

你的循环是错误的

```
 for(x=0; x=nrOfDivs; x++) 
```

它应该是`x < nrOfDivs`或者无论布尔值是否合适。

肯定`x=nrOfDivs`不好

# eclipse - Java 文件不反映在 Eclipse EE 中的动态 Web 项目中所做的更改

> ID：15465965
> 
> 赞同：0
> 
> 时间：2013-03-17T20:40:12.593
> 
> 标签：eclipse, tomcat, servlets

我在 Eclipse Juno EE 中有一个动态 Web 项目。每当我对项目中的 java 文件进行更改时，这些更改都不会反映。该文件的旧版本运行。有人可以帮忙吗！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:06:18.023

关键是在Eclipse中配置tomcat服务器，禁用Auto Reloading但启用Auto Publishing，这样就可以使用JVM hotswap了。这是一篇详细讨论它的文章。[如何使用 Tomcat 和 Eclipse 设置热代码替换](http://blog.redfin.com/devblog/2009/09/how_to_set_up_hot_code_replacement_with_tomcat_and_eclipse.html)。

值得一提的是，有一款名为 JRebel 的商业产品，比 JVM HotSwap 强大得多。如果您有兴趣，这里是一个[比较 JRebel 和 HotSwap的链接。](http://zeroturnaround.com/software/jrebel/features/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:41:33.177

您必须重新部署整个应用程序或在调试模式下运行它，在这种模式下可以进行一些热部署（如果您不更改方法的签名）。

# ruby-on-rails - Heroku 路由错误：ActionController::RoutingError

> ID：15465969
> 
> 赞同：1
> 
> 时间：2013-03-17T20:40:28.967
> 
> 标签：ruby-on-rails, heroku

我的 routes.rb 中有以下内容

```
 constraints subdomain: 'api' do
    namespace :api, path: nil, defaults: {format: 'json'} do
      namespace :v1 do
        resources :cities, only: [:index] do
          resources :areas, only: [:index]
        end
      end
    end
  end 
```

已经在本地进行了测试并且可以正常工作，但是当我部署到heroku时出现以下错误：

```
2013-03-17T20:35:04+00:00 app[web.1]: ActionController::RoutingError (No route matches [GET] "/v1/cities.json"):
2013-03-17T20:35:04+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.9/lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
2013-03-17T20:35:04+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.9/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2013-03-17T20:35:04+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/rack/logger.rb:32:in `call_app'
2013-03-17T20:35:04+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/rack/logger.rb:16:in `block in call'
2013-03-17T20:35:04+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/tagged_logging.rb:22:in `tagged'
2013-03-17T20:35:04+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/rack/logger.rb:16:in `call'
2013-03-17T20:35:04+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.9/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2013-03-17T20:35:04+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
2013-03-17T20:35:04+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
2013-03-17T20:35:04+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2013-03-17T20:35:04+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
2013-03-17T20:35:04+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.9/lib/action_dispatch/middleware/static.rb:62:in `call'
2013-03-17T20:35:04+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/engine.rb:479:in `call'
2013-03-17T20:35:04+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/application.rb:223:in `call'
2013-03-17T20:35:04+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/railtie/configurable.rb:30:in `method_missing'
2013-03-17T20:35:04+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/newrelic_rpm-3.5.8.72/lib/new_relic/agent/instrumentation/unicorn_instrumentation.rb:18:in `call'
2013-03-17T20:35:04+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:552:in `process_client'
2013-03-17T20:35:04+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:632:in `worker_loop'
2013-03-17T20:35:04+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/newrelic_rpm-3.5.8.72/lib/new_relic/agent/instrumentation/unicorn_instrumentation.rb:18:in `block (4 levels) in <top (required)>'
2013-03-17T20:35:04+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:142:in `start'
2013-03-17T20:35:04+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:500:in `spawn_missing_workers'
2013-03-17T20:35:04+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/unicorn-4.6.2/bin/unicorn_rails:209:in `<top (required)>'
2013-03-17T20:35:04+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bin/unicorn_rails:23:in `load'
2013-03-17T20:35:04+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bin/unicorn_rails:23:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:02:34.450

您在 Heroku 上的主机设置为`api.yourdomain`还是正在使用`subdomain.herokuapp.com`主机？

如果子域不是`api`，则此行将导致您的路由失败：

```
constraints subdomain: 'api' do 
```

# php - 单击类似于 tumblr 时弹出图像

> ID：15465976
> 
> 赞同：0
> 
> 时间：2013-03-17T20:41:42.500
> 
> 标签：php, javascript, html

我正在创建一个网站，并且很难知道如何弹出/扩展类似于这些示例的选择：

[http://www.tumblr.com/](http://www.tumblr.com/)

[http://www.mistwalkercorp.com/album/album/gallery1.html](http://www.mistwalkercorp.com/album/album/gallery1.html)

我需要使用JS吗？php？两个都？只是普通的html？我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:43:48.630

这些通常被称为灯箱，它们是用 JavaScript 完成的。有几十个流行的预先存在的 JavaScript 库可以做到这一点。我的最爱之一是[Fancybox](http://fancybox.net/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T20:45:42.100

这些“弹出窗口”被称为“灯箱”。它们可作为 jQuery 和 mootools 等各种库的插件使用。示例网站 ( [http://www.mistwalkercorp.com/album/album/gallery1.html](http://www.mistwalkercorp.com/album/album/gallery1.html) ) 使用基于 slimbox [http://www.digitalia.be/software/slimbox的“绑定缩放”](http://www.digitalia.be/software/slimbox)

其他几个：colorbox，fancybox

这里也有一个很好的列表 [http://www.macnative.com/top-10-best-jquery-lightbox-clones/](http://www.macnative.com/top-10-best-jquery-lightbox-clones/)

# javascript - 如何判断我的方法接受 yuidoc 中的 {id: String, label: String} 数组？

> ID：15465979
> 
> 赞同：1
> 
> 时间：2013-03-17T20:42:02.077
> 
> 标签：javascript, yuidoc

我无法在文档中找到它。

我更喜欢`[{id: String, label: String}]`在生成的文档中显示类型，并且实验让我认为我唯一能做的就是指定一个没有任何其他字符的纯字母数字字符串（它们被生成器忽略）。

真的没有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-21T23:46:13.427

只需创建一个 @class 指定该信息（两个属性 id 和标签）并使用该类！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-25T17:38:58.320

有两种解决方案：

1）创建一个实际的命名类，并使用`@class`和`@param`标签来记录它。因为您的文字对象`{id: String, label: String}`基本上是一个内联/匿名类。所以让它匿名，实际上给它一个名字。然后您可以指定您的参数是该类的数组。像这样：

```
 /**
 * @class MyLabel
 * @constructor
 * @param id {String}
 * @param label {String}
 */
function MyLabel(id, label) {
  this.id = id;
  this.label = label;
}

/* ... and then document your method, with the array of those objects, using: */

/**
 * @method myMethod
 * @param labels {MyLabel[]} Array of labels.
 */ 
```

这就是选项 1，并且需要对您的代码进行一些重构。但是，不要害怕命名、定义和记录你的类，只有好的东西才能产生。

2）另一种选择是您可以[从 JSDocs 获取页面](http://usejsdoc.org/tags-param.html#parameters-with-properties)，并使用伪参数语法：

```
 /**
 * @method myMethod
 * @param labels {Object[]} An array of label objects
 * @param labels[].id {String} Id
 * @param labels[].label {String} Label  
 */ 
```

我很确定这也会在 YUIdoc 中正确呈现。

# javascript - 防止 JavaScript 异步运行

> ID：15465980
> 
> 赞同：0
> 
> 时间：2013-03-17T20:42:06.083
> 
> 标签：javascript, asynchronous

正如你在下面看到的

```
} 别的 {
    直播信息
    .fadeOut(2000)
    .html('در حال پخش : ' + 当前)
    .fadeIn(1500)
    .延迟（7000）；
    如果（下一个！=''）{
        直播信息
        .fadeOut(2000)
        .html('بعدی : ' + 下一个)
        .fadeIn(1500)
        .延迟（5000）
    }
}

```

我的代码的两部分异步运行，我看不到第一部分的结果。

我看不到它的结果：

```
    直播信息
    .fadeOut(2000)
    .html('در حال پخش : ' + 当前)
    .fadeIn(1500)
    .延迟（7000）；

```

现在我想避免`if`与提到的部分异步运行块。

我可以这样做，但它迫使我有更多相同的代码：

```
} 别的 {
    如果（下一个！=''）{
        直播信息
        .fadeOut(2000)
        .html('در حال پخش : ' + 当前)
        .fadeIn(1500)
        .延迟（7000）
        .fadeOut(2000)
        .html('بعدی : ' + 下一个)
        .fadeIn(1500)
        .延迟（5000）
    } 别的 {
        // 这段代码重复了！
        直播信息
        .fadeOut(2000)
        .html('در حال پخش : ' + 当前)
        .fadeIn(1500)
        .延迟（7000）
    }
}

```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:00:36.470

要进行同步任务——比如`if`条件或`.html()`——内联等待，许多动画函数都提供了可以使用的回调。而且，对于那些不喜欢（喜欢`.delay()`）的人，您可以通过将任务包装在 中来将它们添加到同一个`fx`队列中[`.queue()`](http://api.jquery.com/queue/#queue2)：

```
liveInfo
.fadeOut(2000, function () {
    liveInfo.html('در حال پخش : ' + current);
})
.fadeIn(1500)
.delay(7000)
.queue(function (done) {
    if (next != ''){
        liveInfo
        .fadeOut(2000, function () {
            liveInfo.html('بعدی : ' + next);
        })
        .fadeIn(1500)
        .delay(5000)
    } 
    done();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:50:13.047

```
} else {
    liveInfo
    .fadeOut(2000)
    .html('در حال پخش : ' + current)
    .fadeIn(1500);
    if (next != ''){
        liveInfo
        .delay(7000) /* move the delay to the next animation */
        .fadeOut(2000)
        .html('بعدی : ' + next)
        .fadeIn(1500)
        .delay(5000)
    }
} 
```

我认为只需将延迟移至下一个动画就可以满足您的需求。

# c - 在 Windows 上针对 4 GB 文件调用 stat() 时出现未知错误

> ID：15465993
> 
> 赞同：2
> 
> 时间：2013-03-17T20:43:02.000
> 
> 标签：c, windows-8, 32-bit, stat

我在 NTFS 分区上有一个 4 GB（确切地说）文件和一个试图获取其大小的程序，`stat()`但它总是失败`Unknown error`（stat 返回 -1）。

这是否意味着 NTFS 不支持 4 GB 文件？或者我必须使用不同的（Win32？）API？

编辑：

```
 struct stat st;
  if (stat(path.c_str(), &st) == -1) {
    printf("stat: %s\n", strerror(errno));
  } 
```

输出：

```
stat: Unknown error 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T20:51:04.170

该`stat`函数返回一个`stat`用 32 位定义文件大小的结构，这意味着它可以正确处理最多 4GB 的文件大小。你应该使用`stat64`.

另请参阅[MSDN 上的 stat 函数系列](http://msdn.microsoft.com/en-us/library/14h5k7ff%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:44:36.283

NTFS 确实支持超过 4GB 的文件，你在考虑 fat32 的限制...所以不是这样^_^

# javascript - 尝试在我的弹出窗口中提交表单并获取已提交的值

> ID：15465995
> 
> 赞同：0
> 
> 时间：2013-03-17T20:43:11.907
> 
> 标签：javascript, jquery

这段代码的目标是从我的 Chrome 扩展弹出窗口中的一个简单表单中获取用户输入。当用户提交表单时，我希望将该`input`字段中的值添加到 myNames 数组中。

在`popup.html`

```
 <form class="my-form">
    <input placeholder="Enter a name" class="name-to-submit"></input>
    <a href="#" class="primary button submit">Add Name</a>
  </form> 
```

在 popup.js 中

```
 var newName = $('.name-to-submit').val();
    if ($('.submit').click() && newName !== "") {
    ... do some stuff
    } 
```

我的问题是 newName 总是通过 as`""`我不知道为什么......

我应该将 my 更改`anchor tag`为 a`button`还是`input`with `type=submit`？

还是做点别的？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:00:07.567

是否有与您的锚点相关的点击事件？这应该在输入文本后将其关闭。

```
$(".submit").click(function(){
 var newName = $('.name-to-submit').val();
alert(newName);
}); 
```

[http://jsfiddle.net/HARR2/](http://jsfiddle.net/HARR2/)

编辑：如果您想在用户点击输入时触发此事件（在表单提交时）

```
$(".my-form").submit(function(){
 var newName = $('.name-to-submit').val();
alert(newName);
}); 
```

[http://jsfiddle.net/HARR2/2/](http://jsfiddle.net/HARR2/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:02:59.673

我总是会声明输入元素的类型属性。您的姓名输入元素是否应该具有属性 type="text"？

# python - 用于核外计算/数据挖掘的 Python 工具

> ID：15465997
> 
> 赞同：16
> 
> 时间：2013-01-23T14:53:27.257
> 
> 标签：python, numpy, data-mining, large-data, database

我对`python mining`太大而无法放在 RAM 中但位于单个 HD 中的数据集感兴趣。

我知道我可以将数据导出为`hdf5`文件，使用`pytables`. 还`numexpr`允许进行一些基本的核外计算。

接下来会发生什么？尽可能使用小批量，在不能使用小批量时依靠线性代数结果分解计算？

还是我错过了一些更高级别的工具？

感谢您的见解，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T14:36:47.513

你到底想做什么——你能举一两个例子吗？

[numpy.memmap](http://docs.scipy.org/doc/numpy/reference/generated/numpy.memmap.html)很简单——

> 为存储在磁盘上的*二进制*文件中的数组创建内存映射。
> 内存映射文件用于访问磁盘上大文件的小段，无需将整个文件读入内存。Numpy 的 memmap 是类似数组的对象......

另请参阅SO 上的[numpy+memmap](https://stackoverflow.com/search?q=[numpy]+memmap)。

[scikit-learn 的](http://scikit-learn.org)人知识渊博，但更喜欢具体的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T19:00:14.060

我有类似的需求来处理 sub-map-reduce 大小的数据集。当我开始研究 python pandas 作为 SAS 的重要替代品时，我在 SO 上提出了这个问题：[“Large data” work flow using pandas](https://stackoverflow.com/questions/14262433/large-data-work-flows-using-pandas)

那里提供的答案建议使用 pandas 的 HDF5 接口将 pandas 数据结构直接存储在磁盘上。存储后，您可以批量访问数据并逐步训练模型。例如，scikit-learn 有几个类可以在数据集的增量部分上进行训练。一个这样的例子可以在这里找到：

[http://scikit-learn.org/0.13/modules/generated/sklearn.linear_model.SGDClassifier.html](http://scikit-learn.org/0.13/modules/generated/sklearn.linear_model.SGDClassifier.html)

任何实现该`partial_fit`方法的类都可以增量训练。我仍在尝试为此类问题找到可行的工作流程，并且有兴趣讨论可能的解决方案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-31T08:51:59.563

在 sklearn 0.14（将在未来几天发布）中有一个完整的文本文档核心分类示例。

我认为这可能是一个很好的例子：

[http://scikit-learn.org/dev/auto_examples/applications/plot_out_of_core_classification.html](http://scikit-learn.org/dev/auto_examples/applications/plot_out_of_core_classification.html)

在下一个版本中，我们将使用更多分类器扩展此示例，并在用户指南中添加文档。

注意：您也可以使用 0.13 重现此示例，所有构建块都已经存在。