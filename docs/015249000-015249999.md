# StackOverflow 问答 15249000-15249999

# php - 在 php 中向用户显示错误消息的正确方法是什么？

> ID：15249012
> 
> 赞同：0
> 
> 时间：2013-03-06T13:45:17.833
> 
> 标签：php

我有一个简单的登录系统，但是当他们没有正确输入凭据时，我不想回显错误消息，而是希望能够将消息放入`<p></p>`或类似的东西中。我尝试使用空数组

```
$data = array(); 
```

然后在出现错误时设置状态变量而不是使用 echo

```
$data["status"] = "...." 
```

在我输入的 html 部分

```
<?php if ( isset($status) ) : ?>
    <p><?= $status; ?></p>
<?php endif; ?> 
```

但我似乎无法让它工作。我也试过：

```
extract($data) 
```

但是我再次显然做错了。我不确定这是否是正确的方法。使用 javascript 或 jquery 会是处理这个问题的一种投注方式吗？无论如何这是我的代码。

```
$conn = DBconnect($config);
//create and empty array so we can ifor the users.
$data = array();

// if the user has submitted the form
if( $_SERVER["REQUEST_METHOD"] === "POST") {

    //protect the posted value then store them to variables
    $username = protect($_POST["username"]);
    $password = protect($_POST["password"]);

    //Check if the username or password boxes were not filled in
    if ( !$username || !$password ){
        // if not display an error message.
        $data["status"] =  "You need to fill in a username and password!";
    }else{
        //check if the username and password match.
        $stmt = query("SELECT * FROM users WHERE username = :username AND password = :password",
                        array("username" => $username, "password" => $password),
                        $conn);
        $row = $stmt->fetch(PDO::FETCH_ASSOC);
        if(!$row){
            //display an error message
            $data["status"] =  "Username or Password is incorrect.";
        }elseif($row["active"] !=1) {
            $data["status"] =  "You have not activated your account!";
            }else{
                //we log the user in. 
```

这一直在进行。这是 html 部分

```
<div class="container">

  <form class="form-signin" action ="" method = "post">
    <h2 class="form-signin-heading">Please Log In</h2>
    <input type="text" class="input-block-level" name = "username" id = "username" placeholder="Username">
    <input type="password" class="input-block-level" name = "password" id = "password" placeholder="Password">
    <label class="checkbox">
      <input type="checkbox" value="remember-me"> Remember me
    </label>
     <input type="submit" class = "btn btn-large btn-primary" name = "submit" value="Log in!" >

    <?php if ( isset($status) ) : ?>
      <p><?= $status; ?></p>
    <?php endif; ?>

  </form>

</div> <!-- /container --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:47:35.757

```
$data["status"] = "...."
and on the html part i put in

<?php if ( isset($status) ) : ?>
    <p><?= $status; ?></p>
<?php endif; ?> 
```

好吧，据我所知，`$status`没有设置。`$data["status"]`已设置。

至于传递错误消息的正确方法，如评论中所建议的那样；因为这个错误是一个只在当前会话中真正相关的值，所以将它传递给`$_SESSION`. 而且因为我们喜欢给所有值赋予相关的标题，所以将其存储在其中`$_SESSION['error'];`是传递错误消息的一种完全合法的方式。

# php - 谷歌地图标记太大

> ID：15249019
> 
> 赞同：2
> 
> 时间：2013-03-06T13:45:47.750
> 
> 标签：php, google-maps, google-maps-api-3, google-maps-markers

下面是我的代码，我选择了一个图像来代表我的标记并且图像太大了，有没有一种方法可以让我的图像看起来更小，例如填充，imagesizeicon 等等

```
 function initialize() {
    var mapOptions = {
      zoom: 13,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: center
    };

    map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);

for (var i=0; i<a.length;i++)
{
if(i == 0) iconImage = "image1.jpg";
else if(i == 1)  iconImage = "image2.jpg";
    marker = new google.maps.Marker({
      map:map,
      draggable:true,
      animation: google.maps.Animation.DROP,
      position: a[i],
icon: iconImage,
  }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T13:55:45.620

使用[google.maps.icon](https://developers.google.com/maps/documentation/javascript/reference#Icon)对象来指定图标而不是简单的图像文件名。在那里你可以设置[大小](https://developers.google.com/maps/documentation/javascript/reference#Size)，例如

```
marker = new google.maps.Marker({
    map:map,
    draggable:true,
    animation: google.maps.Animation.DROP,
    position: a[i],
    icon: {
        size: new google.maps.Size(width, height),
        scaledSize: new google.maps.Size(width, height),
        url: iconImage 
    },
}); 
```

* * *

完整的工作示例（您需要`marker.gif`此 html 文档旁边的文件）

```
<!DOCTYPE html>
<html>
  <head>
    <title>Google Maps JavaScript API V3 Test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      html, body, #map_canvas {
        margin: 0;
        padding: 0;
        height: 100%;
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <script>
      var map;
      function initialize() {
        var mapOptions = {
          zoom: 11,
          center: new google.maps.LatLng(52.3727, 4.8985),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        map = new google.maps.Map(document.getElementById('map_canvas'),
                mapOptions);

        var marker = new google.maps.Marker({
          map: map,
          draggable: true,
          animation: google.maps.Animation.DROP,
          position: new google.maps.LatLng(52.3727, 4.8985),
          icon: {
            size: new google.maps.Size(20, 20),
            scaledSize: new google.maps.Size(20, 20),
            url: "marker.gif"
          }
        });

      }

      google.maps.event.addDomListener(window, 'load', initialize);

    </script>
  </head>
  <body>
    <div id="map_canvas"></div>
  </body>
</html> 
```

# vector - 3D 矢量图出错了

> ID：15249020
> 
> 赞同：0
> 
> 时间：2013-03-06T13:45:48.970
> 
> 标签：vector, 3d, octave

我根据一篇文章在下面的 Octave 中编写了一个脚本： [如何在 MATLAB 中绘制向量（物理 2D/3D 向量）？](https://stackoverflow.com/questions/1962332/how-to-draw-vectors-physical-2d-3d-vectors-in-matlab)

我在 Octave 中有以下代码，并且在第 3 行第 1 列附近收到错误“向量”未定义

谁能帮我？我已经为 Octave 编写了一些其他 *.m 文件，没有问题，现在我被卡住了。

```
a = [0 0 1];   %# Vector 1  
b = [0.894 0 0.447];   %# Vector 2
c = [0.276 0.851 0.447];   %# Vector 3
d = [-0.724 0.526 0.447];   %# Vector 4
e = [-0.724 -0.526 0.447];   %# Vector 5
f = [0.276 -0.851 0.447];   %# Vector 6 
g = [0.724 0.526 -0.447];   %# Vector 7 
h = [-0.276 0.851 -0.447];   %# Vector 8    
i = [-0.894 0 -0.447];   %# Vector 9    
j = [-0.276 -0.851 -0.447]   %# Vector 10   
k = [0.724 -0.526 -0.447];   %# Vector 11   
l = [0 0 -1];   %# Vector 12

starts = zeros(3,3);
ends = [a;b;c;d;e;f;g;h;i;j;k;l];

quiver3(starts(:,1), starts(:,2), starts(:,3), starts(:,4), starts(:,5),
        starts(:,6), starts(:,7), starts(:,8), starts(:,9), starts(:,10),
        starts(:,11), starts(:,12), ends(:,1), ends(:,2), ends(:,3),
        ends(:,4), ends(:,5), ends(:,6), ends(:,7), ends(:,8), ends(:,9),
        ends(:,10), ends(:,11), ends(:,12), 0)

axis equal 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:12:38.220

这不起作用，因为`starts`它的大小为 3x3，并且您在列索引上将其索引到 12。我得到的错误信息是：

```
error: A(I,J): column index out of bounds; value 4 out of bound 3 
```

# configuration - 有没有办法在 TeamCity 中订购 JUnit 测试用例？

> ID：15249022
> 
> 赞同：0
> 
> 时间：2013-03-06T13:45:57.013
> 
> 标签：configuration, junit, teamcity

假设我有三个 JUnit 测试用例，即`TC1, TC2`和`TC3`。有没有办法以某种方式配置**TeamCity**或**pom**，这样当我 时`remote run`，顺序总是 TC1 -> TC2 -> TC3？

现在，由于测试用例中的无序，所有这些测试都从相同的功能开始（例如：创建用户），这需要相当长的时间。我只想在第一个测试用例（在这种情况下为 TC1）中执行该功能。我也对任何其他方法持开放态度。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:03:55.563

`maven-failsafe-plugin`有一个可选参数，`runOrder`这正是我想要的。您可以将其设置为`alphabetical`，然后修改测试用例的名称，您就完成了。

# android - 无需数据库即可保存 GPS 点

> ID：15249025
> 
> 赞同：-2
> 
> 时间：2013-03-06T13:46:12.150
> 
> 标签：android, gps, maps

我可以在不使用数据库的情况下将 GPS 点保存在 android 中吗？我想首先跟踪用户的位置然后反转他的轨迹，所以我需要保存跟踪点以便遍历它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:59:08.670

您始终可以按照适合您的任何格式（XML、JSON 或您自己的定制格式）将数据写入文件

请参阅[使用内部存储](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)和[使用外部存储](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)指南。根据生成文件的大小，使用通常有更多空间的外部存储可能会更好。

另外，也许你有一些特定的理由不使用数据库，但我认为使用 SQLite 比使用文件存储数据更容易管理。有关详细信息，请参阅[使用数据库](http://developer.android.com/guide/topics/data/data-storage.html#db)指南

# android - 如何从代码创建 UI？

> ID：15249027
> 
> 赞同：0
> 
> 时间：2013-03-06T13:46:21.347
> 
> 标签：android, xamarin

我试图从代码中动态添加一些控件，而不是从.xml。我使用的代码如下：

```
protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);

            // Set our view from the "main" layout resource
            SetContentView(Resource.Layout.Main);

            mainLayout = FindViewById<LinearLayout>(Resource.Id.mainLayout);

            Button test = new Button(Window.Context) { Text = "BLABLABLA" };
            test.SetWidth(100);
            test.SetHeight(100);

            LinearLayout.LayoutParams _params = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WrapContent, LinearLayout.LayoutParams.WrapContent, 0.0f);
            _params.SetMargins(10, 10, 0, 0);
            mainLayout.AddView(test, _params);
        } 
```

但是按钮没有出现在我的应用程序中。有什么问题？

更新：现在可以了！但我不明白我做了什么以及为什么它之前没有运行过。但无论如何谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:47:24.000

你错过了`setContentView(mainLayout);`你的`onCreate()`方法中的电话。

请注意，您必须在生成布局**后调用此方法。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:04:20.250

首先要设置 LayoutParams，您应该将其设置为 Button 测试，而不是像这样的布局：

```
test.setLayoutParams(_params); 
```

然后将其添加到邮件布局中，如下所示：

```
mainLayout.AddView(test); 
```

# eclipse - Eclipse 插件将工作空间保存在存储库中

> ID：15249030
> 
> 赞同：0
> 
> 时间：2013-03-06T13:46:26.177
> 
> 标签：eclipse, version-control, eclipse-plugin

每当 Eclipse 关闭时，是否有 Eclipse 插件可以将工作空间保存在存储库（如 SVN）中？如果它可以每天将工作空间保存在一个像 workspace_date.zip 这样的 zip 文件中，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:48:40.950

我觉得不好。因为我们要开发这么多东西。如果它自动发送到SVN那么很难维护。有时在编码的中间我们会关闭eclipse。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:49:22.030

为什么不使用 git 之类的源代码控制？

您可以使用[EGit 插件](http://www.eclipse.org/egit/)。

如果您真的只想保存您的工作区，您可以编写一个脚本来执行此操作。

# django - Django外键查询

> ID：15249032
> 
> 赞同：1
> 
> 时间：2013-03-06T13:46:29.553
> 
> 标签：django

```
class Model1(models.Model):
    a1 = models.CharField()

class Model2(models.Model):
    a2 = models.CharField()
    model1 = ForeignKey(Model1) 
```

我想做这样的事情

```
#views.py

def action(request):
    model1_instances = Model1.objects.all()
    render_to_respose('action.html', 'model1_instances': model1_instances, context_instance=RequestContext(request) 
```

# 我想做的是；

# 对于传递给 action.html 的每个“model1_instances”对象，我想要其对应的 Model2 对象。

尝试使用`model2_instance = model1_instances.model2_set.all()`，它没有给出预期的结果，可能是因为 model1_instances 返回了数据库中的所有 Model1 对象。

# 我知道的

如果我使用类似的东西；

```
model1_instance = Model1.objects.get(pk=1) 
```

很容易得到对应的

```
model2_instance = model1_instance.model2_set.all(). 
```

我已经知道了，这不是我想要的。

需要一些线索的家伙。

# 解决方案

谢谢大家的贡献。我偶然发现了这个 [API]：[https](https://github.com/japsu/django-selectreverse) ://github.com/japsu/django-selectreverse ，我决定使用它。正所谓“无需重新发明轮子”。它奏效了，实际上让我省了很多麻烦，我现在可以把注意力集中在其他事情上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:56:53.340

我认为您所追求的答案已经在另一个线程中得到了回答。

[在 Django 中获取相关值的最佳实践](https://stackoverflow.com/questions/1827240/best-practice-to-get-related-values-in-django-without-doesnotexist-error)

虽然（未经测试）在我的脑海中，尝试这样的事情：

```
model2_instance = Model2.objects.filter(model1__pk=1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:18:36.333

谢谢大家的贡献。我偶然发现了这个 [API]：[https](https://github.com/japsu/django-selectreverse) ://github.com/japsu/django-selectreverse ，我决定使用它。正所谓“无需重新发明轮子”。它奏效了，实际上让我省了很多麻烦，我现在可以把注意力集中在其他事情上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:17:34.070

您将获得 Model1 的实例：

```
model1 = Model1.objects.get(pk=1) 
```

然后要获取使用 FK 引用它的 Model2 的实例，请尝试以下操作：

```
model2 = model1.Model2_set.all() 
```

这将返回引用您的 Model1 实例的所有 Model2 实例的集合。

我从以下方面获得了相关信息：[Backwards related objects](https://docs.djangoproject.com/en/dev/topics/db/queries/#backwards-related-objects)

**编辑：** 在模板中获取相关的 Model2 实例而不是查看：

```
{% for model1 in model1_instances %}
    {% for model2 in model1.Model2_set.all %}
    {{ model2 }}
    {% endfor %}
{% endfor %} 
```

# php - 如何在php中使用soap将参数发送到wsdl文件

> ID：15249033
> 
> 赞同：2
> 
> 时间：2013-03-06T13:46:33.390
> 
> 标签：php, soap, wsdl, soap-client

我有一个带有位置的 wsdl 文件，我想通过肥皂发送请求值，我正在尝试以下场景。但它没有调用 wsdl 函数。请帮助我如何发送肥皂请求参数。

```
<xs:complexType name="wsNotification">
 <xs:sequence>
  <xs:element maxOccurs="unbounded" minOccurs="0" name="notificationList" nillable="true" type="tns:notificationsParam"/>
 </xs:sequence>
</xs:complexType>
<xs:complexType name="notificationsParam">
 <xs:sequence>
  <xs:element minOccurs="0" name="email" type="xs:string"/>
  <xs:element minOccurs="0" name="phone" type="xs:string"/>
 </xs:sequence>
</xs:complexType> 
```

下面的代码我在php中使用soap函数调用wsdl

```
 $client = new SoapClient("http://192.100.1.8:8080/getAPI/ws/WSNotification?wsdl", 
                                array('email'       => "test@gmail.com",
                                       'phone'       => "97122555")
                         );
 echo "Response:\n" . $client->__getLastResponse() . "<br>"; 
```

当我调用上述soap函数时，我没有得到wsdl的任何响应。请帮助我如何将参数从php发送到soap。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-19T22:03:59.650

不确定您是否已经对此有答案。但之前我使用[nusoap 工具包](http://sourceforge.net/projects/nusoap/)来实现这一点。

1.  下载包并将文件放在您的项目文件夹中
2.  在您的代码中包含该库

    require_once('lib/nusoap.php');

3.  写你的代码

查看您的 xml 这可以解决问题

```
$client=new nusoap_client('http://192.100.1.8:8080/getAPI/ws/WSNotification?wsdl', 'wsdl');

$login=array('email'=>'test@gmail.com', 'phone'=>'97122555');
$response= $client->call('notificationsParam', array('parameters' => $login));

if ($client->fault) {
echo '<h2>Fault</h2><pre>';
print_r($response);
echo '</pre>';
} else {
$err = $client->getError();
if ($err) {
    echo '<h2>Error</h2><pre>' . $err . '</pre>';
} else {

print_r($response);

}
} 
```

# jquery - jQuery 为文本字段的输入值设置动画

> ID：15249034
> 
> 赞同：0
> 
> 时间：2013-03-06T13:46:40.530
> 
> 标签：jquery

我已经浏览了几个小时，仍然找不到有价值的东西。

我想将文本字段的值从 0 设置为它的值。例如，我有一个 value="100" 的文本输入，并且在任何事件或页面加载之后，我希望这个值从 0 动画到 100（输入的起始值）

我怎么能这样做？提前非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:50:58.063

您可以使用 jQuery 的“动画”功能的“步骤”选项来对动画的每个“步骤”执行操作。

```
//When the document is ready..
jQuery(document).ready(function () {
    //..loop over all of the INPUT elements that have a non-blank data-value field..
    jQuery("input[data-value!='']").each(function (inputKey, inputItem) {
        //..animate between the current value of the input (i.e. 0) and the desired
        //  value specified in the data-value field, setting to the full value upon
        //  completion of the animation
        jQuery({
            value: jQuery(inputItem).val()
        }).animate({
            value: jQuery(inputItem).data("value")
        }, {
            step: function () {
                jQuery(inputItem).val(Math.round(this.value));
            },
            complete: function() {
                jQuery(inputItem).val(jQuery(inputItem).data("value"));
            }
        });
    });
}); 
```

查看这个 jsFiddle 示例： http [:](http://www.josscrowcroft.com/2011/code/jquery-animate-increment-decrement-numeric-text-elements-value/#) [//jsfiddle.net/yE86J/9/1](http://jsfiddle.net/yE86J/9/)

我建议使用四舍五入来确保您最终得到参考：[http](http://www.josscrowcroft.com/2011/code/jquery-animate-increment-decrement-numeric-text-elements-value/#) : //www.josscrowcroft.com/2011/code/jquery-animate-increment-decrement-numeric-text-elements-value/，jQuery[如何查找元素基于数据属性值？](https://stackoverflow.com/questions/4191386/jquery-how-to-find-an-element-based-on-a-data-attribute-value)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:14:41.713

尝试

```
$(document).ready(function(){
  increase( $('#i') );
});

function increase( i , v ){
    // let's store the initial/original input's value
    if( !i.data.originalValue ) i.data.originalValue = i.val();
    var currentVal = v || 0;
    i.val(currentVal);
    // if current value == initial/original value, then break the script
    if( i.val() == i.data.originalValue ) {
        alert( 'Complete!' ); // <-- callback here
        return;
    }
    currentVal++;
    // call this function again after 30ms
    setTimeout( increase , 30 , i , currentVal );
} 
```

这是一个[小提琴示例](http://jsfiddle.net/basillicum/PACfV/)

# java - Maven Assembly：配置文件最佳实践

> ID：15249036
> 
> 赞同：2
> 
> 时间：2013-03-06T13:46:43.600
> 
> 标签：java, maven, maven-assembly-plugin

我有一个多模块 maven 项目，包括一个单独的程序集项目。当我从 Eclipse 开发和运行我的应用程序时（在开发期间），我的主模块（包含主类）中有特定的配置文件（例如 log4j 或其他属性文件）。这些文件包含特定于开发时间的信息。程序集项目包含用于生产的每个配置文件。然后组装的产品应该使用这些配置。这是我目前的设置：

```
MainModule/src/main/resources
     +configA.properties
     +log4j.properties
Module1/src/main/resources
     +configB.properties
AssemblyProj/src/main/resources
     +configA.properties
     +configB.properties
     +log4j.properties 
```

生成的项目有这样的结构：

```
libs/
   +MainModule.jar
   +Module1.jar
configs/
   +configA.properties
   +configB.properties
   +log4j.properties 
```

由于类路径，配置目录覆盖了每个 *.jar 中的配置文件，即

```
java -cp configs/;libs/* My.Main.Class 
```

现在我遇到的问题是每个 jar 中仍然包含所有开发配置。另外，我对使用该覆盖类路径方法有一种不好的感觉。有没有关于如何以更好的方式做到这一点的做法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:22:19.363

将这些资源提取到`classifier`每个提到的模块的基于 - 的依赖项中。然后定义`<profiles/>`触发它们的用法。在您的程序集中，根据需要使用分类器。

# javascript - 列出对象的所有属性 - 对象 1 在 undefined:1

> ID：15249039
> 
> 赞同：0
> 
> 时间：2013-03-06T13:46:50.200
> 
> 标签：javascript, cordova

在 JavaScript 中，我有这个函数，`result`参数由 SCANQR 代码（使用 PhoneGap）传入，我在 Android 上使用 Eclipse 进行调试。

我很难理解 object 的类型和属性`result`。

我在这里将代码与控制台的结果一起发布。

我很困惑

```
object at undefined:1 
```

和

```
 0 at undefined:1 
```

你能帮我弄清楚这些消息的含义并帮助理解这个对象的结构吗？它是一个数组吗？

```
onQrCodeScan: function(result) {
    console.log("result: " + result);

    var eventTitle = result.SUMMARY;
    var dateTimeStart = result.DTSTART;
    var dateTimeEnd = result.DTEND;
    var location = result.LOCATION;
    var description = result.DESCRIPTION;

    console.log('RESULT IF OF TYPE: ' + typeof(result));

    for (var key in result) {
        if (result.hasOwnProperty(key)) {
            console.log('PROPERTY:    '+ key);
        }
    } 
```

* * *

```
 03-06 14:31:21.726: I/Web Console(17775): result: BEGIN:VEVENT
    03-06 14:31:21.726: I/Web Console(17775): SUMMARY:my title event
    03-06 14:31:21.726: I/Web Console(17775): DTSTART:20130307T183200Z
    03-06 14:31:21.726: I/Web Console(17775): DTEND:20130307T193200Z
    03-06 14:31:21.726: I/Web Console(17775): LOCATION:london
    03-06 14:31:21.726: I/Web Console(17775): DESCRIPTION:my title event
    03-06 14:31:21.726: I/Web Console(17775): END:VEVENT,QR at undefined:1

    03-06 14:31:21.742: I/Web Console(17775): RESULT IF OF TYPE: object at undefined:1
    03-06 14:31:21.757: I/Web Console(17775): PROPERTY:    0 at undefined:1
    03-06 14:31:21.765: I/Web Console(17775): PROPERTY:    1 at undefined:1 
```

我在 Android 上使用 Eclipse 进行调试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:01:16.733

> 了解这个对象的结构？它是一个数组吗？

这是可能的，所有属性似乎都是数字的。要查看您的对象，只需

```
console.log(JSON.stringify(result)); 
```

# jquery - 在 .text() 函数上出现类型错误

> ID：15249040
> 
> 赞同：1
> 
> 时间：2013-03-06T13:46:51.093
> 
> 标签：jquery, json, jquery-mobile

我正在尝试使用下面的 json 文件中的值来计算一些东西：

```
$(document).ready(function() {
        $.ajax({
            type : 'GET',
            url : 'outfitters.json',
            dataType : 'json',
            success : processTeam,
            error : function() {
                alert('error');
            }
        });

        $('#outfitters').submit(function(event) {
            var days = ('#days').text();
            var final_price = days * (("#length").val() + ("#material").val() + ("fibre").val() + ("#kevlar").val());

            console.log(final_price);
            $("#price").html(final_price);
        });

    });

    function processTeam(data) {
        var company = data.company;
        $("h1").html(company);

        var locations = '';
        for ( i = 0; i < data.locations.length; i++) {

            locations = data.locations[i].name;
            $("ul").append('<li>' + locations + '</li>').listview('refresh');

        }

        var feet_12 = data.twelve;
        $("#12feet").val(feet_12);

        var feet_14 = data.fourteen;
        $("#14feet").val(feet_14);

        var feet_16 = data.sixteen;
        $("#16feet").val(feet_16);

        var fibre = data.fibreglass;
        $("#fibre").val(fibre);

        var kevlar = data.kevlar;
        $("#kevlar").val(kevlar);

        var paddles = data.paddles;
        $("#paddles").val(paddles);

        var lifevest = data.paddles;
        $("#lifevest").val(lifevest);

    } 
```

但是`TypeError: "#days".text is not a function`当我单击提交按钮时我得到了。看起来不像是图书馆问题，因为我使用的是最新的图书馆。我不知道我可能错在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:48:24.633

将其更改为：

```
$('#days').text(); 
```

改变一切：

```
 var days = ('#days').text();
        var final_price = days * (("#length").val() + ("#material").val() + ("fibre").val() + ("#kevlar").val()); 
```

到

```
 var days = $('#days').text();
        var final_price = days * ($("#length").val() + $("#material").val() + $("#fibre").val() + $("#kevlar").val()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:49:04.777

```
var days = ('#days').text(); 
```

应该

```
var days = $('#days').text(); 
```

# ruby-on-rails - 特征步骤中的随机数据生成

> ID：15249043
> 
> 赞同：1
> 
> 时间：2013-03-06T13:46:56.057
> 
> 标签：ruby-on-rails, ruby, minitest, fabrication-gem, spinach

```
class Spinach::Features::Signup < Spinach::FeatureSteps

  attr_accessor :valid_attributes
  before do
    valid_attributes = Fabricate.attributes_for(:identity)
    #@valid_attributes = Fabricate :identity
  end

  step 'I am a visitor' do
    true
    visit root_path
  end

  step 'I am on the landing page' do
    current_path.must_equal root_path
  end

  step 'I follow signup link' do
    click_link('signup_link')
  end

  step 'I fill name with my name' do
    fill_in 'name', with: valid_attributes.name
  end

  step 'I fill email with my email' do
    fill_in "email", with: valid_attributes.email
  end
end 
```

我使用菠菜 gem 来创建功能步骤。上面的代码标识了我的功能步骤。我还使用 minitest 测试框架。我使用制造商 gem 来创建随机数据。

```
require "ffaker"
Fabricator(:identity) do
  name            {Faker::Name.name}
  email           {Faker::Internet.email}
  password_digest "ChtUIGTiBvrm6v6R4PX6sO3netSuN3eW0AbFmXblXvgKM5Z8sFUKy"
end 
```

这是我的身份模型制造者类。当我运行注册功能时，我看到一个错误：

```
undefined method `name' for nil:NilClass 
```

我认为这是关于 Fabricate.Attributes_for 的。如果我使用 Fabricate :identity，它不会给出错误。

我无法解决这个问题。有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:13:59.047

当你这样做时：

```
valid_attributes = Fabricate.attributes_for(:identity) 
```

你有一个`Hash`.

这样做：`valid_attributes[:email]`或使用 Openstruct。

# javascript - 计算jQuery中的日期差异

> ID：15249044
> 
> 赞同：0
> 
> 时间：2013-03-06T13:46:57.103
> 
> 标签：javascript, jquery

问题是; 我的应用程序中有 2 个字段，一个是日期 (Field1)，第二个是标签 (Field2)。因此，我希望当用户在字段 1 中选择日期时，应自动填充字段 2（当前日期 - 字段 1 中的日期）。任何人都可以帮助如何实施它。

我正在使用 jQuery 来显示日期：

```
// This displays the date dialog when user clicks on Field1
$('#Field1').click(function () {
    $('#Field1').simpleDatepicker();
});

// Tried following code but it didn't worked
$('#Field1').click(function () {
    $('#Field1').simpleDatepicker({
        onSelect: function () {
       $('#Field2').value(calculateDays($('#Field1').toString))
        }
    });
});

function calculateDays(dateString) {
    var today = new Date();
    var inputDate = new Date(dateString);
    var days = today - inputDate;
    return days;
}; 
```

对于某些人来说，这可能看起来像可悲的代码，但我只是一个初学者，所以欢迎任何建议/评论。

另外请告诉我这是否可以仅使用 html 而无需使用 jQuery 来完成。据我了解，计算天数（日期之间的差异）代码将进入 jQuery，因为这需要在选择日期（'onSelect' 事件）后触发。如有错误请指正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:43:28.553

我假设您正在尝试使用[Karl Seguin 的 jquery.simpleDatePicker](https://github.com/karlseguin/jquery.simpleDatePicker)（在 Google 上搜索“simpledatepicker”时它名列前茅）。

正如 Jimbo 在评论中所说，在这里很难就 MVC 方法提出建议——你说你想纯粹用 HTML 来做这件事，但 HTML 本身不能决定行为（我会说那是非常*不*符合 MVC 的）。HTML5 表单*确实*允许一些有限的行为控制（验证等），并且它们也提供`<input type="date"/>`，但这些都不能帮助您解决问题。

因此，对于这个答案，我将修复代码中的错误：

1.  插件是用 jQuery 方法初始化的`simpleDatePicker`——你忘了大写“P”；
2.  插件本身迎合点击事件。您应该直接初始化它而不等待用户输入；
3.  源代码中没有`onSelect`初始化选项：我选择`change`在输入上使用事件侦听器来捕获它；
4.  你使用 jQuery 方法`value`——这是原生 DOM Javascript——你应该使用它`val`；
5.  `toString`不适用于 DOM 元素或 jQuery 对象——再次使用该`val`方法；
6.  本机 Date 对象无法解析任意格式的日期——如果这样做，您的代码也不会产生天数（它只会产生以毫秒为单位的差异）。对于这种功能，您应该使用一个好的日期库：我选择了[Moment](http://momentjs.com/)。

结果代码（[如此处所示](http://jsfiddle.net/barney/B6dFG/)）：

```
$('#Field1')
    .simpleDatePicker()
    .on('change', function passValue(){
        $('#Field2').val(calculateDaysFromNow($('#Field1').val()))
    });

function calculateDaysFromNow(dateString){
    return moment.duration(moment(dateString,'MMM DD YYYY').diff()).days();
} 
```

关于我如何使用时刻的一些详细说明：

首先，我们要解析`#Field1`一个实际可量化的日期对象的格式化日期：

```
moment(dateString,'MMM DD YYYY') 
```

接下来，我们`diff`要从现在开始确定这一点。像 Date 一样，如果我们不传递任何参数，那么 moment 现在假设：

```
moment(dateString,'MMM DD YYYY').diff() 
```

我们不希望这是一个日期，而是一个持续时间，所以我们将它传递给 moment 的`duration`方法：

```
moment.duration(moment(dateString,'MMM DD YYYY').diff()) 
```

……最后，我们希望以天为单位表示：

```
moment.duration(moment(dateString,'MMM DD YYYY').diff()).days() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:01:59.820

我不确定，但这个：

`$('#Field2').value(calculateDays($('#Field1').toString))`应该是这样的：

`$('#Field2').value(calculateDays($('#Field1').val()))`或者 `$('#Field2').value(calculateDays($('#Field1').text()))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:08:39.223

这是在第二个字段中设置相同日期的解决方案。链接：[jquery：使用两个带有两个字段（字段 1 ，字段 2 + 1 天）的日期选择器，如 booking.com](https://stackoverflow.com/questions/14219296/jquery-using-two-datepicker-with-two-fields-field-1-field2-1-day-like-b) 根据您的需要更改格式。

# java - 从字符串中删除所有不在白名单上的字符

> ID：15249047
> 
> 赞同：13
> 
> 时间：2013-03-06T13:47:03.943
> 
> 标签：java, regex, replace, character, whitelist

我正在尝试编写 java 代码来删除所有不需要的字符并让只有白名单的字符。

例子：

```
String[] whitelist = {"a", "b", "c"..."z", "0"..."9", "[", "]",...} 
```

我只想要字母（小写和大写）和数字+我要添加的一些下一个字符。然后我将为`for()`字符串中的每个字符开始循环，如果它不在白名单上，则将其替换为空字符串。

但这不是好的解决方案。也许可以使用模式（正则表达式）以某种方式完成？谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-06T13:49:20.890

是的，你可以使用[`String.replaceAll`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)which 需要一个正则表达式：

```
String input = "BAD good {} []";
String output = input.replaceAll("[^a-z0-9\\[\\]]", "");
System.out.println(output); // good[] 
```

或者在[番石榴](https://github.com/google/guava)中，您可以使用[`CharMatcher`](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/base/CharMatcher.html)：

```
CharMatcher matcher = CharMatcher.inRange('a', 'z')
                          .or(CharMatcher.inRange('0', '9'))
                          .or(CharMatcher.anyOf("[]"));
String input = "BAD good {} []";
String output = matcher.retainFrom(input); 
```

这仅显示小写版本，使其更易于演示。要包含大写字母，`"[^A-Za-z0-9\\[\\]]"`请在正则表达式（以及您想要的任何其他符号）中使用 - 并且`CharMatcher`您可以`or`使用`CharMatcher.inRange('A', 'Z')`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T13:51:59.113

您可以尝试匹配不在白名单中的所有内容并将其替换为空字符串：

```
String in = "asng $%& 123";
//this assumes your whitelist contains word characters and whitespaces, adapt as needed
System.out.println(in.replaceAll( "[^\\w\\s]+", "" )); 
```

# soap - 解决 SoapFault 异常：[HTTP] 无法解析 URL

> ID：15249050
> 
> 赞同：2
> 
> 时间：2013-03-06T13:47:07.527
> 
> 标签：soap, php, webservice-client, soapfault

我在一个项目上工作，该项目使用由 PHP 和 2 个本机智能手机应用程序（ios 和 android）查询的基于 Soap 的 Web 服务，在 Web 服务开发团队进行了一些编辑之后，PHP 方面的事情被打破了，但智能手机应用程序没有问题。

这是一个重现问题的简单脚本

```
<?php
error_reporting(E_ALL);
$url          = 'http://www.xxxxx.com/service.awws?wsdl'; 

$sKey    = 'thekey';

$client= new SoapClient($url, array('trace' => 1,
                                   'exception' => 1,
                                   'encoding'      => 'UTF-8',
                                   'cache_wsdl' => WSDL_CACHE_NONE));

$params = array('sKey' => $sKey, 'nLangID' => 1);

$res      = $client->TPGetLocalisationVersion($params);

echo '<pre>Res : ';
print_r($res);
echo '</pre>';

?> 
```

我收到以下错误：

```
Fatal error: Uncaught SoapFault exception: 
[HTTP] Unable to parse URL in /home/xxxx/www/test.php:14 Stack trace: #0 [internal function]: 
SoapClient->__doRequest('__call('TPGetLocalisati...', Array) #2 /home/tmpweb/www/test.php(14): 
SoapClient->TPGetLocalisationVersion(Array) #3 {main} thrown in /home/xxxx/www/test.php on line 14 
```

TPGetLocalisationVersion 方法存在且参数正确。这段代码几天前曾经工作过。

我还可以使用 wget 从 PHP Web 服务器获取 wsdl。

我用一些在线工具测试了 WSDL 文件，看起来还可以。

有什么建议可以调试吗？我确定 WSDL 没有被缓存，因为我在专用服务器上并且在 php.ini 中完全禁用了 WSDL 缓存

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T14:42:50.180

问题已解决，问题出在 WSDL 内的 soap:adress 中（错误值）

# c# - 如何从数据表中删除一行？

> ID：15249056
> 
> 赞同：2
> 
> 时间：2013-03-06T13:47:33.310
> 
> 标签：c#, datatable

如何从数据表中删除一行_考虑我的数据表中有 12 行，我需要使用特定的行值删除其中的一个。

数据表：

```
Field Name | Field Type 
------------------------
FirstName  |  Text box
           |
LastName   |  Text box 
```

我需要使用下面的代码片段从表本身中删除选定的行，我可以检索 FirstName

```
string value = (string)selectedRows[i].Cells[0].Value;
Console.WriteLine(outdex); 
```

但是如何从数据表中删除它

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:54:30.813

从 OP 的其他问题中，他想从 a 中获取选定的行`DataGridView`并从临时 中删除该行`DataTable`。

```
//Get the row that is selected
DataGridViewRow dr = selectedRows.Cast<DataGridViewRow>().FirstOrDefault();
//Your temp DataTable
DataTable dtTemp = new DataTable();
//If there is a row selected
if (dr != null)
{
  var rowToRemove = dtTemp.Rows.Cast<DataRow>().FirstOrDefault(row => row[0] == dr.Cells[0].Value);
  if (rowToRemove != null)
    dtTemp.Rows.Remove(rowToRemove);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:51:13.270

干得好：

```
dt.Rows.Cast<DataRow>()
       .Where(r => r.ItemArray[0] == "Any_Value")
       .ToList()
       .ForEach(r => r.Delete()); 
```

或者

```
DataView view = new DataView(dt);
view.RowFilter = "Column_name = 10";

foreach (DataRowView row in view)
{
  row.Delete();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T13:51:42.547

尝试使用以下代码，

```
 var rows = dataTable.Select("condition to select");
    rows.ForEach((r) => r.Delete(););
    dataTable.AcceptChanges(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T13:51:04.637

```
if (value == "some deleteValue")
    selectedRows[i].Delete(); 
```

但是，如果在循环中执行此操作，您可能会想要更多类似以下的答案： [Deleting specific rows from DataTable](https://stackoverflow.com/questions/5648339/deleting-specific-rows-from-datatable)

# java - Android NDK java.lang.UnsatisfiedLinkError JNI

> ID：15249064
> 
> 赞同：-1
> 
> 时间：2013-03-06T13:48:05.237
> 
> 标签：java, android, android-ndk, java-native-interface

我正在尝试从 java 中的 testRTSPClient.cpp 调用一个方法。但我收到以下错误。03-06 18:36:11.558: E/AndroidRuntime(6938): java.lang.UnsatisfiedLinkError: play

我的 java 类是 RTSPClientActivity.java 和 .cpp 文件是 testRTSPClient.cpp

以下是我在 .cpp 文件中制作的方法

无效 Java_my_pakg_RTSPClientActivity_play(JNIEnv *env, jobject obj) { ... }

```
public class RTSPClientActivity extends Activity {
    static {
        try

        {
            System.loadLibrary("testRtspClient");
        } catch (Throwable e) {
            throw new RuntimeException(e);
        }
    }

    static native void playstream();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.rtsp_layout);
        play();
    }
} 
```

我在互联网巴士上看到过相关问题，没有答案有用，我找不到我错的地方..谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:52:04.577

你必须改变

```
static native void playstream(); 
```

至

```
static native void play(); 
```

与您在 cpp 中定义的相同条目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:56:26.383

您需要将 C++ 函数定义包装在`extern "C"`. 这是一个例子：

[如何为 Android ndk 准备我的 .cpp 文件来构建它们？](https://stackoverflow.com/questions/7656055/how-do-i-prepare-my-cpp-files-for-the-android-ndk-to-build-them/7665923#7665923)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:00:48.593

请检查函数签名，它们在 C 和 Java 代码中应该相同。最好的方法是从具有本机函数的类创建 .h 文件。

在您的命令行中转到您的项目/bin/classes 并在那里执行

```
javah -jni com.mypackage.myclass 
```

# asp.net - Windows 7 上 IIS 8 Express 的 Websocket 问题

> ID：15249067
> 
> 赞同：11
> 
> 时间：2013-03-06T13:48:07.117
> 
> 标签：asp.net, windows-7, websocket, iis-8

我尝试为 Web 套接字创建处理程序，但 context.IsWebSocketRequest 总是返回 false 并且无法在 Windows 7 上使用 IIS 8 Express。

如何启用 websocket 模块或我缺少的任何步骤？我有带有 IIS Express 动态 url 的 VS 2012 应用程序。

请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-18T13:54:23.057

WebSocket 协议需要在 IIS 8 中启用（参见[http://www.codeguru.com/csharp/csharp/programming-html5-web-sockets-in-asp.net-4.5.htm](http://www.codeguru.com/csharp/csharp/programming-html5-web-sockets-in-asp.net-4.5.htm)）。此外，我不确定 Windows 7 是否支持 Web 套接字。我只看到需要 Windows 8 或 Windows Server 2012。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-01T13:27:10.983

简短的回答是，您可以使用 IIS 8 Express 在 Windows 7 中针对 WebSocket**编写**应用程序，但实际上无法对其**进行测试**。它需要 Windows 8 或 Windows Server 2012。

来自[IIS 8.0 Express 自述文件](http://www.iis.net/learn/extensions/introduction-to-iis-express/iis-80-express-readme)：

> **WebSocket 支持**
> 
> IIS 8.0 Express 支持编写 WebSocket 应用程序。有关详细信息，请参阅 Microsoft 的 MSDN 网站上的 WebSocket 协议规范或 System.Net.WebSockets 命名空间主题。
> 
> **不适用于下层操作系统的 Windows Server 2012 和 Windows 8 功能**
> 
> 有一些功能需要特定于 Windows Server 2012 和 Windows 8 客户端的体系结构，当您在早期操作系统上安装 IIS 8.0 Express 时，这些功能将无法在下层工作：
> 
> 服务器名称指示 (SNI)
> 中央证书存储
> WebSocket 功能

然后，从[System.Net.WebSockets MSDN 条目](http://msdn.microsoft.com/en-us/library/hh159285)（强调我的）：

> Windows 7、Windows Vista SP2 和 Windows Server 2008 支持 System.Net.WebSockets 命名空间中的某些类。*但是，Windows 8 和 Windows Server 2012 支持客户端和服务器 WebSocket 的唯一公共实现。*这些类Windows 7、Windows Vista SP2 和 Windows Server 2008 支持的 System.Net.WebSockets 命名空间中的类元素是抽象类。这允许应用程序开发人员使用客户端 WebSocket 的实际实现来继承和扩展这些抽象类。

# xml - xpath/xslt 对多个值进行相等检查

> ID：15249068
> 
> 赞同：1
> 
> 时间：2013-03-06T13:48:08.987
> 
> 标签：xml, xslt, xpath, xslt-2.0

例如我有一个xml：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<TemporaryRoot>
    <ProcessPurchaseOrder>
        <DocumentReference>
            <AlternateDocumentID>
                <ID>0171688401</ID>
            </AlternateDocumentID>
            <AlternateDocumentID>
                <ID>0171688404</ID>
            </AlternateDocumentID>
            <AlternateDocumentID>
                <ID>0171688405</ID>
            </AlternateDocumentID>
        </DocumentReference>
    </ProcessPurchaseOrder>
    <DbResponse>
        <ResultSet>
            <Row>
                <Cell name="WEANR" type="VARCHAR2">0171688401</Cell>
            </Row>
            <Row>
                <Cell name="WEANR" type="VARCHAR2">0171688404</Cell>
            </Row>
        </ResultSet>
    </DbResponse>
</TemporaryRoot> 
```

如何编写 xpath 或 xslt 代码来检查是否`DbResponse/ResultSet/Row/Cell[@name="WEANR"]`包含来自`AlternateDocumentID/ID`'s 的所有值

在这个例子中结果是假的，因为`DbResponse/ResultSet/Row/Cell[@name="WEANR"]`没有`0171688405`价值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:58:06.317

您可以使用 XPath 2.0 构造，而不是 Dimitre 的使用`not(X[not(. = Y)])`，这对于那些没有接受过数学训练或没有直观掌握符号逻辑的人来说有点难以理解

```
every $x in X satisfies (some $y in Y satisfies $x eq $y) 
```

具体来说

```
every $id in //ID satisfies (some $cell in //Cell satisfies $id eq $cell) 
```

您还可以通过编写将此示例的显式量化与“=”运算符的隐式量化混合在一起

```
every $id in //ID satisfies ($id = //Cell) 
```

这可能是我的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:56:55.713

作为 XPath 解决方案，您可以检查与节点`Row/Cell`匹配的所有`AlternateDocumentID/ID`节点，然后将其与总节点进行比较：

```
count(//DbResponse/ResultSet/Row[Cell/@name='WEANR' and  //AlternateDocumentID/ID/text() = Cell/text()]) = count(//AlternateDocumentID/ID) 
```

对于 XSLT 解决方案，[这里有一个很好的示例问题](https://stackoverflow.com/questions/269989/xpath-or-xsl-to-match-two-node-sets-using-custom-comparison)，说明如何做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T04:46:28.407

**使用这个单一的 XPath 1.0 表达式**：

```
not(/*/ProcessPurchaseOrder
                /*/*/ID[not(. = /*/DbResponse/*/*/Cell[@name='WEANR'])]) 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select=
     "not(/*/ProcessPurchaseOrder
                /*/*/ID[not(. = /*/DbResponse/*/*/Cell[@name='WEANR'])])"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当对提供的 XML 文档应用此转换时：**

```
<TemporaryRoot>
    <ProcessPurchaseOrder>
        <DocumentReference>
            <AlternateDocumentID>
                <ID>0171688401</ID>
            </AlternateDocumentID>
            <AlternateDocumentID>
                <ID>0171688404</ID>
            </AlternateDocumentID>
            <AlternateDocumentID>
                <ID>0171688405</ID>
            </AlternateDocumentID>
        </DocumentReference>
    </ProcessPurchaseOrder>
    <DbResponse>
        <ResultSet>
            <Row>
                <Cell name="WEANR" type="VARCHAR2">0171688401</Cell>
            </Row>
            <Row>
                <Cell name="WEANR" type="VARCHAR2">0171688404</Cell>
            </Row>
        </ResultSet>
    </DbResponse>
</TemporaryRoot> 
```

**计算 XPath 表达式并将结果复制到输出：**

```
false 
```

**当我们将文档更改为此：**

```
<TemporaryRoot>
    <ProcessPurchaseOrder>
        <DocumentReference>
            <AlternateDocumentID>
                <ID>0171688401</ID>
            </AlternateDocumentID>
            <AlternateDocumentID>
                <ID>0171688404</ID>
            </AlternateDocumentID>
        </DocumentReference>
    </ProcessPurchaseOrder>
    <DbResponse>
        <ResultSet>
            <Row>
                <Cell name="WEANR" type="VARCHAR2">0171688401</Cell>
            </Row>
            <Row>
                <Cell name="WEANR" type="VARCHAR2">0171688404</Cell>
            </Row>
        </ResultSet>
    </DbResponse>
</TemporaryRoot> 
```

**应用于此文档的转换再次产生正确的结果：**

```
true 
```

**说明**：

正确使用**[双重否定法](http://en.wikipedia.org/wiki/Double_negation)**。

# jquery - jQuery Slider 描述每个功能

> ID：15249072
> 
> 赞同：1
> 
> 时间：2013-03-06T13:48:24.707
> 
> 标签：jquery, each, carousel

我用 jQuery 创建了一个轮播滑块。但我在每张幻灯片后更新描述时遇到问题。滑块的构建如下：

```
<div id="sliderwrapper">
   <div id="slider_controlpanel">
      <a href="" class="slider_left" data-name="slider_button"></a>
      <a href="" class="slider_right" data-name="slider_button"></a>
      <div id="slider_description"></div>
   </div>  
    <ul>
        <li data-number="1" data-description="blabla">IMG</li>
        <li data-number="2" data-description="obladioblada">IMG</li>
    </ul>
</div> 
```

我在 jQuery 中所做的是：

```
$('#sliderwrapper ul li:visible').each(function() {
    var currentDesc = $('#slider_description').text();
    var newDesc = $(this).attr('data-description');
    $('#slider_description').removeData(currentDesc);
    $('#slider_description').text(newDesc);
}); 
```

但不知何故，它不会更新，而是停留在第一个。从我收集到的信息来看，每个函数都作为一个循环工作，并且对于每个可见的幻灯片，它都应该运行。还是我完全错了，这不应该起作用？

如果您需要有关如何构建轮播的信息，请发表评论！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:29:54.623

嗯......我得到你想要做的只是显示当前显示的`data-description`属性中的数据`li`。我已经修改并评论了您的[fiddle](http://jsfiddle.net/2S3Gz/1/)中的更改。

# bash - 使用 if 语句比较 bash 脚本中的变量

> ID：15249077
> 
> 赞同：0
> 
> 时间：2013-03-06T13:48:42.603
> 
> 标签：bash, shell, scripting

所以我对 bash 脚本很陌生，但到目前为止 tldp.org 一直是我的好朋友。无论如何，我已经把自己弄糊涂了，发誓要寻求帮助来澄清：我声明了一个像这样的变量
MAXseeds=-1; sumS=0 我在脚本中做了很多事情，并为 sumS 获得了一个新值，它是一个整数值。然后，我想比较 MAXseeds 和 sumS，如果 sumS 较大，则使 MAXseeds 等于 sumS。我这样做：

```
 echo $MAXseeds      
  echo $sumS    
  if [ $MAXseeds -lt $sumS ];
  then 
     MAXseeds = $sumS
     best_file=$COUNT
  fi 
  echo $MAXseeds 
```

据我所知，这应该可以工作，但是我在这部分脚本上运行时得到的终端输出是

```
 -1
  492
  lookup.sh: line 34: MAXseeds: command not found
  -1 
```

基本上我想知道我在这里做错了什么？为什么它以找不到命令响应？任何解释为什么这是不正确的将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:52:02.097

试试这个：

```
if [ $MAXseeds -lt $sumS ];
then 
  MAXseeds=$sumS
  best_file=$COUNT
fi 
```

“=”周围没有空格。

如果您在“MAXseeds”之后放置一个空格，那么它将被解释为一个命令。当然，它不是命令，因此您会收到错误消息。

# eclipse - mwe2 参考工作流程

> ID：15249079
> 
> 赞同：0
> 
> 时间：2013-03-06T13:48:45.510
> 
> 标签：eclipse

当您启动一个新的 Eclipse IDE 并创建一个新的 MWE2 工作流时，您可以从目标环境或工作区中的插件引用工作流（在新的 RCP 中）

`component = @foo.MyWorkflow {}`

但这不适用于所有工作流程，有些无法解决：

```
Couldn't resolve reference to Module 'OtherWorkflow'. 
```

即使在复制`MyWorkflow`、重命名`MyWorkflow2`和重新启动 RCP:时`MyWorkflow2`也无法解决。

编辑：一定是xtext引用器的某种问题，经过一段时间没有任何更改，其他工作流程也可以解决，但删除RCP的工作区后它们重新消失编辑2：在2.3.1中出现错误，使用最新的每晚（2.4 之前），所有工作流程都可以解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T13:52:03.783

第一：@ 表示法不需要第二个 Eclipse 实例。编辑器和工具也在*同一个*实例中解析。

第二：mwe2 builder 不是很可靠。`bin`查看项目空间中的隐藏文件夹。构建器应在此位置复制和更新您的 mwe2 文件。它只会引用此处存在且最新的文件。我发现我经常不得不触摸源文件来强制重建，或者删除目标文件以摆脱无法识别的陈旧状态。

否则 mwe2 是一个稀疏绘制的元黑洞。你有你的智慧。祝你好运。

# servlets - java servlet会话维护

> ID：15249080
> 
> 赞同：2
> 
> 时间：2013-03-06T13:48:49.110
> 
> 标签：servlets, httpsession

我已经开发了用于生成验证码和添加会话名称***代码的 servlet***

**生成验证码**

```
import javax.servlet.*;
import java.io.*;
import java.awt.*;
import java.util.Random;
import java.awt.image.*;
import javax.imageio.*;
import javax.servlet.http.*;
public class capta extends HttpServlet
{

    final int LEN=10;
    BufferedImage image;
    Random rnd;
    public void doGet(HttpServletRequest req,HttpServletResponse rep)
    {
        try
        {
            image = new BufferedImage(200, 80, BufferedImage.TYPE_INT_RGB); 
            rnd=new Random();
            rep.setContentType("image/jpeg");
            String random_String=getRandomNumbers();
            HttpSession ses=req.getSession();
            ses.setAttribute("code",random_String);
            Graphics g = image.getGraphics();
            g.setFont(new Font("Maiandra GD",1,30));
            g.setColor(Color.blue); 
            g.drawString(random_String,3,50);
            g.dispose();
            /// it was here
            ImageIO.write(image, "jpg", rep.getOutputStream());
        }
        catch(Exception e)
        {

        }
    }
    private String getRandomNumbers()
    {
        StringBuffer str=new StringBuffer();
        for(int i=1;i<=9;i++)
        {
            str.append(new Integer(rnd.nextInt(9)).toString()); 
        }
        return str.toString();
    }

    public void doPost(HttpServletRequest req,HttpServletResponse rep)throws ServletException , IOException
    {
        doGet(req,rep);
    }

} 
```

**在其他 servlet 中使用 Generate capta-image**

```
import javax.servlet.*;
import java.io.*;
import javax.servlet.http.*;
public class capta_test extends HttpServlet
{

    public void doGet(HttpServletRequest req,HttpServletResponse rep)
    {
        PrintWriter out=null;
        try
        {
            String input=req.getParameter("txt_capta");
            out=rep.getWriter();            
            rep.setContentType("text/html");
            out.println("<html><head><title>Capta Test</title></head>");    
            out.println("<body>");  
            out.println("<h1> Capta  is Generated </h1>");

            out.println("<img src=\"http://localhost:8080/mahesh/capta\" />");
            HttpSession ses=req.getSession();

            String original=(String)ses.getAttribute("code");
            if(original!=null)
            {
                out.println("<h1>Original Value "+original+"</h1>");
            }
            ses.invalidate();
            out.println("</body>");     
            out.println("</html>"); 
        }
        catch(Exception e)
        {

        }
    }

    public void doPost(HttpServletRequest req,HttpServletResponse rep)throws ServletException , IOException
    {
        doGet(req,rep);
    }

} 
```

两个 servlet 都可以正常工作，但我没有得到在 Capta-code servelt 中生成的会话值（在 servlet 中添加）
我得到的是在以前的 capta-image 中生成的会话值。

见输出：
**输出 - 1**

**![输出 - 1](../Images/6bf0c2d577913d92a14f4bac85968cfa.png)**

**输出 - 2**

![在此处输入图像描述](../Images/f33fa8104d30eacd7977f3c5f2585f2b.png)

**输出 - 3**

![在此处输入图像描述](../Images/12fae04369268167a515cd2dd228f4ec.png)

**谢谢 ..**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:42:42.870

您的程序流程错误，会话值为 null，因为`capta_test servlet is called even before the capta servlet`.

看看这个简单的教程。希望这可以帮助您走上正确的道路

[JSP 和 Servlet 中的验证码](http://www.devmanuals.com/tutorials/java/jsp/captcha.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:52:33.840

将随机数生成逻辑放入**capta_test** servlet 并将该数字放入会话中。因为您正在呈现 HTML，所以将在这样的页面加载后调用**capta** servlet，并且不会使会话无效。

**随机数发生器**

```
import javax.servlet.*;
import java.io.*;
import javax.servlet.http.*;
public class capta_test extends HttpServlet
{
public void doGet(HttpServletRequest req,HttpServletResponse rep)
{
    PrintWriter out=null;
    try
    {
        String original=getRandomNumbers();
        HttpSession ses=req.getSession(false);
        ses.setAttribute("code",random_String);
        String input=req.getParameter("txt_capta");
        out=rep.getWriter();            
        rep.setContentType("text/html");
        out.println("<html><head><title>Capta Test</title></head>");    
        out.println("<body>");  
        out.println("<h1> Capta  is Generated </h1>");

        out.println("<img src=\"http://localhost:8080/mahesh/capta\" />");
        out.println("<h1>Original Value "+original+"</h1>");
        out.println("</body>");     
        out.println("</html>"); 
    }
    catch(Exception e)
    {

    }
}

public void doPost(HttpServletRequest req,HttpServletResponse rep)throws ServletException , IOException
{
    doGet(req,rep);
}
private String getRandomNumbers()
{
    Random rnd=new Random();
    StringBuffer str=new StringBuffer();
    for(int i=1;i<=9;i++)
    {
        str.append(new Integer(rnd.nextInt(9)).toString()); 
    }
    return str.toString();
}
} 
```

**图像生成器 servlet**

```
import javax.servlet.*;
import java.io.*;
import java.awt.*;
import java.util.Random;
import java.awt.image.*;
import javax.imageio.*;
import javax.servlet.http.*;
public class capta extends HttpServlet
{

  final int LEN=10;

BufferedImage image;
public void doGet(HttpServletRequest req,HttpServletResponse rep)
{
    try
    {
        HttpSession ses=req.getSession(false);

        String random_String=(String)ses.getAttribute("code");
        image = new BufferedImage(200, 80, BufferedImage.TYPE_INT_RGB); 
        rep.setContentType("image/jpeg");
        Graphics g = image.getGraphics();
        g.setFont(new Font("Maiandra GD",1,30));
        g.setColor(Color.blue); 
        g.drawString(random_String,3,50);
        g.dispose();
        /// it was here
        ImageIO.write(image, "jpg", rep.getOutputStream());
    }
    catch(Exception e)
    {

    }
}
public void doPost(HttpServletRequest req,HttpServletResponse rep)throws ServletException , IOException
{
    doGet(req,rep);
}

} 
```

# javascript - 使用 Ñ 字符（拉丁语）在 PhoneGap 上的 SQLite 中查询不给出结果

> ID：15249084
> 
> 赞同：2
> 
> 时间：2013-03-06T13:48:57.343
> 
> 标签：javascript, sqlite, cordova, character-encoding

我使用 PhoneGap 开发应用程序。我使用 Ripple 在浏览器中测试我的开发，然后在真实设备中测试我的应用程序。

我有很多带有拉丁字符的行，例如 Ñ、Ü 等，当我进行没有这些字符的查询时，我在 Android 设备上的应用程序完美地显示了这些字符。

例如，该行有

```
NAME              ADDRESS
PETER NUÑEZ       RUE DES AMIES,16, 4AC3 
```

如果我进行查询：

`var word='AMIES';`

`...select * from table where ADDRESS like '%?%',[word]...`

它工作正常并完美地给了我这一行，但如果我尝试：

`var word='NUÑEZ';`

`...select * from table where NAME like '%?%',[word]...`

它没有给出结果。

如果我使用：`var word='NU%EZ';`它工作正常。

我使用 SQL 注入进行查询`..(,?,[var])..`

问题是什么？我可以显示从 Query 中检索到的 Ñ、Ü 等字符，但我无法使用这些拉丁字符查询任何内容。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-19T03:17:16.317

使用 apache cordova，在我的起始页“www\index.html”中添加`<meta charset="utf-8" />`到 head 对我来说很好：3。

# iphone - 手机颠簸时，我可以阻止 Bump 被激活吗？

> ID：15249088
> 
> 赞同：0
> 
> 时间：2013-03-06T13:49:06.257
> 
> 标签：iphone, ios, objective-c, bump

我喜欢凹凸背后的想法，我在应用程序中使用它。但是，如果我能够在两部手机之间建立连接（非常接近），而用户不必碰碰，我会更喜欢它。

我已经尝试过`simulateBump`哪个非常适合这个目的。但是，当它认为手机被碰撞时，我不希望 Bump 框架被激活。

那么，如何禁用“碰撞”？

另外，一个额外的问题：当手机被碰撞时，我可以阻止碰撞框架在手机上触发振动吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:39:35.410

让其他人知道 Andrei 在说什么 - [Bump](http://en.wikipedia.org/wiki/Bump_%28application%29)允许两个智能手机用户将他们的手机物理碰撞在一起，以通过 Internet 相互传输联系信息、照片和文件。

现在上下文已经很清楚了，这些是 Bump - [Bump API for iOS](https://github.com/bumptech/bump-api-ios/blob/master/libBump/BumpClient.h)公开的 API 。根据这个 -

1.  当手机发生碰撞时，如果您在应用程序中包含了带有委托的 Bump SDK，则当 2 部手机碰撞时将激活 Bump 框架。如果您不想激活凹凸，则删除凹凸处理程序（如`configureWithAPIKey`等）并实现您自己的。虽然我看到一个`BOOL`名为`bumpable`. 默认为`YES`. 也许如果你把它设置为`FALSE`并看看它是如何工作的。
2.  发生碰撞时，我没有看到任何用于关闭振动的 API。

我纯粹是基于我对他们头文件的观察。没有在 xCode 中尝试过。所以我可能是错的。

此外，如果您对点对点数据传输感兴趣，您可能想看看[GameKit](http://mobile.tutsplus.com/tutorials/iphone/bluetooth-connectivity-with-gamekit/)，它是 iOS 框架中很酷的技术部分。

# c# - 同步对象

> ID：15249089
> 
> 赞同：-7
> 
> 时间：2013-03-06T13:49:12.800
> 
> 标签：c#, locking

请看下面的代码。

我有两个q。

使用这种类型的对象锁定有什么好处？

第二个问题，我可以在代码仍在**//--------**这个区域时操作**缓冲区吗？**

 **```
private list<byte> buffer;
.
.
.

lock(buffer)
{
  //--------
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:50:44.720

锁用于防止在多线程环境中对对象的多次访问。在实践中，锁是 .NET 框架中 Monitor 类的实现

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:56:37.557

> 使用这种类型的对象锁定有什么好处？

为什么特定类型的锁对象会有优势？如[手册](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.110%29.aspx)所述：

> 最佳实践是定义一个私有对象来锁定，或者一个私有静态对象变量来保护所有实例共有的数据。

* * *

> 我可以在代码仍在 //-------- 这个区域时操作缓冲区吗？

是的，从同一线程`lock()`发出声明。其他线程将不得不在那里等待。**

# php - 用 MYSQL 存储索引列表？

> ID：15249098
> 
> 赞同：2
> 
> 时间：2013-03-06T13:49:30.420
> 
> 标签：php, mysql

我有一个与 MySQL/PHP 性能相关的问题。

我需要在表中存储与每条记录关联的索引列表。每个列表包含 1000 个索引。我需要能够快速访问与给定记录关联的列表中的任何索引值。我不确定最好的方法。我已经想到了以下方法，并希望您对它们提出意见：

1.  将列表作为逗号分隔值列表或使用 JSON 存储在字符串中。性能可能很糟糕，因为我需要将整个列表从数据库中提取到 PHP 中，只为了检索一个值。解析字符串也不会很快......我可以在 PHP 端的最近最少使用的缓存中存储一​​些扩展列表以减少负载。

2.  创建一个包含 1001 列的列表，用于存储列表及其主键。我不确定这在存储方面的成本是多少？这也感觉像是在滥用系统。然后，如果我需要存储 100000 个索引怎么办？

3.  仅使用 SQL 存储包含我的索引的二进制文件的名称并执行 fopen(); fseek(); fread(); 每次访问的 fclose() 循环？不确定系统文件系统缓存将如何反应。如果情况不妙，那么有很多解决方案可以解决这些问题……但这听起来有点矫枉过正，不是吗？

你对那个怎么想的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:51:46.250

标准解决方案是创建另一个表，每行（记录，索引），并添加一个 MySQL 索引以允许快速搜索

```
CREATE TABLE IF NOT EXISTS `table_list` (
  `IDrecord` int(11) NOT NULL,
  `item` int(11) NOT NULL,
  KEY `IDrecord` (`IDrecord`)
) 
```

`item`根据您的需要更改' 类型 - 我`int`在我的示例中使用过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:53:26.940

旧的一对多关系怎么样？

```
records
-------
id     int
record ...

indices
-------
record_id int
index     varchar 
```

然后：

```
 SELECT *
      FROM records
 LEFT JOIN indices
        ON records.id = indices.record_id
     WHERE indices.index = 'foo' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:55:45.447

最合乎逻辑的解决方案是将每个值放在它自己的元组中。为每个元组添加一个 MYSQL 索引将使 DBMS 能够快速确定值，并且应该会提高性能。

我们不同意您的其他答案的原因如下：

**选项1**

在一个 MYSQL 单元格中存储多个值违反了数据库规范化的第一阶段。[你可以在这里](http://en.wikipedia.org/wiki/First_normal_form)阅读它。

**选项 3**

这严重依赖其他文件。您希望尽可能本地化您的数据存储，以便将来更容易维护。

# magento - Magento : 通过特定的付款方式获取订单

> ID：15249099
> 
> 赞同：5
> 
> 时间：2013-03-06T13:49:35.970
> 
> 标签：magento, methods, magento-1.7, payment, orders

如何使用付款方式“checkmo”获取订单？我可以使用 addFieldToFilter 函数吗？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T14:34:34.290

使用下面的代码：

```
 $ordersByPaymentCheckMo = Mage::getResourceModel('sales/order_payment_collection')            
        ->addFieldToSelect('*')
        ->addFieldToFilter('method',"checkmo");

    foreach($ordersByPaymentCheckMo as $orderByPayment):
          $order = Mage::getModel('sales/order')->load($orderByPayment->getParentId());
         echo '<br/>ORDER # : '.$order->getIncrementId();
    endforeach; 
```

更新最好的方法是加入集合：

```
 $table_prefix = Mage::getConfig()->getTablePrefix();
    $order_table = $table_prefix.'sales_flat_order';
    $on_condition = "main_table.parent_id = $order_table.entity_id";

    $orderCollection =  Mage::getModel('sales/order_payment')->getCollection()->addFieldToFilter('method',"checkmo");

    $orderCollection ->getSelect()->join($order_table,$on_condition);

    foreach($orderCollection as $order):
     echo '<br/>ORDER # : '.$order->getIncrementId();
    endforeach; 
```

# c# - WMI MangementObject.InvokeMethod()

> ID：15249100
> 
> 赞同：2
> 
> 时间：2013-03-06T13:49:38.310
> 
> 标签：c#, service, wmi

我正在尝试调试一段代码，它更新了用于 Windows 服务的凭据，该服务无法正常工作。它不会抛出异常，只是没有通过检查以表明它已被应用。

MSDN 对构造函数的描述如下：

```
public Object InvokeMethod(
    string methodName,
    Object[] args
) 
```

我不明白的是它在哪里查找`methodName`您传入的字符串。我的假设是它会在我尝试更新的服务的代码中查找。`Change`但是，代码尝试更新的服务中没有方法。

[这个 CodeProject 教程](http://www.codeproject.com/Articles/28161/Using-WMI-to-manipulate-services-Install-Uninstall)似乎还表明，methodName 有一个有效参数列表，因为它使用了源代码中不存在的“create”和“delete”。

```
String serviceName = "Scan Data Service";

using (ManagementObject service = new ManagementObject(new ManagementPath("Win32_Service.Name='" + serviceName + "'")))
{
    Object[] wmiParams = new Object[11];
    if (arguments == null)
    {
        wmiParams[6] = "LocalSystem";
        wmiParams[7] = "";
    }
    else
    {
        wmiParams[6] = arguments[0]; //Username
        wmiParams[7] = arguments[1]; //Password
    }
    service.InvokeMethod("Change", wmiParams);
}
SelectQuery query = new SelectQuery("select startname from Win32_Service where name = '" + serviceName + "'");

bool updated = false;

using (ManagementObjectSearcher searcher = new ManagementObjectSearcher(query))
{
    foreach (ManagementObject service in searcher.Get())
    {
        String startName = service["startname"].ToString();

        if ((String.Compare(startName, "LocalSystem", true) == 0 && arguments == null) ||
            (arguments != null && String.Compare(startName, arguments[0], true) == 0))
        {
            updated = true;
        }
    }
} 
```

`InvokeMethod()`是否有适用于所有服务的某个地方的 methodName 参数列表？或者是否应该在我的服务代码中实现某些必须以某种方式读取或反映的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:08:03.387

解决。

这取决于您使用 WMI 做什么，因为我正在使用它使用[Win32_Service 类](http://msdn.microsoft.com/en-us/library/aa394418(v=vs.85).aspx)的服务，它所针对的方法名称属于这个。

当然还有更多的[Win32 类](http://msdn.microsoft.com/en-us/library/aa394084(v=vs.85).aspx)，您可以将方法用于不同的任务。

# asp.net-mvc-4 - mvc4 网址验证

> ID：15249105
> 
> 赞同：26
> 
> 时间：2013-03-06T13:49:53.730
> 
> 标签：asp.net-mvc-4, unobtrusive-validation, jquery-validation-engine

在试图找到答案两天后，我在这里写了这个问题。

基本上这就是发生的事情。

我在视图模型中有一个属性如下

```
[Required(ErrorMessage = "Required Field")]
[Url(ErrorMessage="Please enter a valid url")]
[DisplayName("Website")]
public string web { get; set; } 
```

在看来，我有这个

```
@Html.EditorFor(model => model.web, new { AutoCompleteType = "Disabled", autocomplete = "off" }) 
```

现在问题在于如何在客户端验证该字段的输入文本。该字段必须始终具有协议前缀，否则将变为无效。

我可以解决此问题的最佳方法是什么？

非常感谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-06T14:20:36.693

您可以使用[DataAnnotationsExtensions 库](http://dataannotationsextensions.org)来做到这一点。它们有一个`UrlAttribute`您可以配置为仅在指定协议时进行验证。此属性还提供客户端验证。您可以在此处查看此行为的示例：http: [//dataannotationsextensions.org/Url/Create](http://dataannotationsextensions.org/Url/Create)

您可以按如下方式使用此属性：

```
using System.ComponentModel.DataAnnotations;

namespace DataAnnotationsExtensions.Core
{
    public class UrlEntity
    {
        [Url]
        [Required]
        public string Url { get; set; }

        [Url(UrlOptions.OptionalProtocol)]
        [Required]
        public string UrlWithoutProtocolRequired { get; set; }

        [Url(UrlOptions.DisallowProtocol)]
        [Required]
        public string UrlDisallowProtocol { get; set; }
    }
} 
```

出于您的目的，第一个选项就足够了。

这个库的包（包括 ASP.NET MVC 支持）可以在 NuGet 上找到：Install-Package DataAnnotationsExtensions.MVC3

注意：这也适用于 ASP.NET MVC 4

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:06:03.890

不确定我是否完全理解这个问题。您是否尝试验证格式正确的 URL？如果是这样，您可以按如下方式实现 RegularExpression DataAnnotation：

```
[RegularExpression(@"^http(s?)\:\/\/[0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*(:(0-9)*)*(\/?)([a-zA-Z0-9\-\.\?\,\'\/\\\+&amp;%\$#_]*)?$", ErrorMessage = "My Error Message")] 
```

# c# - 如何编写 Xelement 值？

> ID：15249109
> 
> 赞同：2
> 
> 时间：2013-03-06T13:50:03.980
> 
> 标签：c#, xml, generics

我想创建一个从 xml 文件中收集自定义子节点值并从表单中重写白数据的方法。我有一个想法，我在 ArrayList 中收集数据并将其提供给该方法。但是我不能在 foreach 中更改它，因为它会抛出 ArgumentOutOfRangeException（尽管 ArraList 包含 8 个元素并且增量变量的值也是 8）。所以我会寻求帮助。

这是代码：

```
 public static void Search(ArrayList nodeIds, ArrayList values)
        {
            XDocument doc = XDocument.Load("Options.xml");
            int i = 0;
            foreach (XElement option in doc.Descendants("BasicOptions"))
            {
                foreach(string nodeId in nodeIds)
                {
                    if (option.Attribute("id").Value == nodeId)
                    {
                        foreach (XElement prop in option.Nodes())
                        {
                            prop.Value = values[i].ToString();
                            i++;
                        }
                    }
                }
            }
            doc.Save("Options.xml");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:15:46.637

在我看来，这`i`将毫无疑问地超出范围，因为它在**3 个** `foreach`语句的外部声明并在 center 内使用`foreach`。你应该重新考虑你的方法。

我建议，但在不知道您传入的值或为什么要调用它的情况下，将您的内部声明为`foreach`如下`for`声明：

```
public static void Search(ArrayList nodeIds, ArrayList values)
{
    XDocument doc = XDocument.Load("Options.xml");
    foreach (XElement option in doc.Descendants("BasicOptions"))
    {
        foreach (string nodeId in nodeIds)
        {
            if (option.Attribute("id").Value == nodeId)
            {
                var nodes = option.Nodes().ToList();
                for (int i = 0; i < nodes.Count && i < values.Count; i++)
                {
                    XElement node = (XElement)nodes[i];
                    node.Value = values[i].ToString();
                }
            }
        }
    }
    doc.Save("Options.xml");
} 
```

# web-services - ASIFormDataRequest 帖子类型

> ID：15249115
> 
> 赞同：0
> 
> 时间：2013-03-06T13:50:38.800
> 
> 标签：web-services, ios5, asiformdatarequest

我需要发送带有 post 类型的 RestFul Web Service Request，post 数据格式如下 {"Request":"parameters"....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:07:17.053

我不再推荐使用 ASIHttpRequest 库，因为它没有从开发人员那里得到任何更新，关于如何创建一个 post http 请求这里是一个例子

```
NSString *url = @"your webservice base url";
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:url]];

[request setHTTPMethod:@"POST"];

NSString *param2 = ...//
NSData *binaryData = .... //initilize the binary data you want to send
NSString *bodyString = [NSString stringWithFormat:@"param1=%@&param2=%@",binartData,param2];

[request setValue:[NSString stringWithFormat:@"%d", [bodyString length]] forHTTPHeaderField:@"Content-length"];
[request setHTTPBody:[bodyString dataUsingEncoding:NSASCIIStringEncoding]];//or set the type of encoding agreed with your webservice

NSURLResponse *response = nil;
NSError *error = nil;
NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

NSString *responseString;
if ( responseData && !error){
    responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

} 
```

# malloc - 启用 ARC 模式时减少保留计数

> ID：15249123
> 
> 赞同：0
> 
> 时间：2013-03-06T13:50:58.760
> 
> 标签：malloc, breakpoints, xcode4.6

我是 iOS 开发的新手，当我使用下面的代码时，保留计数达到 3 并且应用程序将崩溃，

```
 AsyncronousUIImage *image=[[AsyncronousUIImage alloc] init];
        [image loadImageFromURL:imageURL inImageView:templateView];
        image.delegate=self;
        [templateScroll addSubview:templateView]; 
```

![在此处输入图像描述](../Images/5b5df804fafcf07cd51636c3345bbb68.png)

我有 ARC 启用模式，我使用的是 xcode 4.6。

得到错误：

malloc：*** 对象 0xa293dd0 的错误：未分配被释放的指针 ***在 malloc_error_break 中设置断点以进行调试

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:03:26.697

如果您使用的是 ARC，那么`image`一旦它离开当前函数的范围，就会被释放。看起来您正在使用带有该变量的异步方法。因此，图像在异步代码接收到数据并尝试设置它时被释放。

使用 ARC 时，您需要确保保留代码其他部分所需的变量，或者至少将它们传递给将保留它们的其他对象。

# javascript - JqPlot(JQuery) 排序图例标签

> ID：15249128
> 
> 赞同：1
> 
> 时间：2013-03-06T13:51:04.620
> 
> 标签：javascript, jquery, sorting, jqplot, jquery-ui-sortable

我有一个问题：

是否可以在 Jqplot 对我的图例标签进行排序？

```
legend: {
         show: true,
         placement: 'outsideGrid'
}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:02:50.803

您可以使用类似这样的方法对图例中的行进行排序（灵感来自[我如何使用 jQuery 按字母顺序对列表进行排序？](https://stackoverflow.com/questions/1134976/how-may-i-sort-a-list-alphabetically-using-jquery)）：

```
var rows = $('#chart .jqplot-table-legend tr').get();
rows.sort(function(a, b) {
    return $(a).children().last().text().localeCompare($(b).children().last().text());
});

$.each(rows, function(index, item) {
    $('#chart .jqplot-table-legend tbody').append(item);
}); 
```

这对标准图例渲染器最有效 - 它也适用于`EnhancedLegendRenderer`，但切换可见/不可见系列实际上将显示或隐藏与排序之前存在的标签相对应的系列。

# iphone - 知道用户是否在 iPhone 上启用/禁用了拼写检查

> ID：15249132
> 
> 赞同：0
> 
> 时间：2013-03-06T13:51:15.097
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

有什么方法可以知道（以*编程*方式）用户是否启用/禁用了拼写检查
（**常规->键盘->检查拼写**）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:54:45.783

不，您无法以编程方式找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:14:17.223

在 iOS 中是不可能的。但是您会因拼写错误而生成红色下划线。

```
[textView setSpellCheckingType:UITextSpellCheckingTypeYes]; 
```

# ios - Facebook 登录失败并显示代码 190 -“设备上的访问令牌已失效”

> ID：15249133
> 
> 赞同：4
> 
> 时间：2013-03-06T13:51:24.520
> 
> 标签：ios, facebook, sdk

我在这里阅读了所有其他相关问题，但没有找到答案。

我已经能够重现 Facebook 登录失败并出现代码 190 的场景，以及“设备上的访问令牌无效”的消息。

出于某种原因，只有当用户在 iOS Facebook 设置页面中设置他的凭据时才会发生这种情况。如果用户在 Safari 中（并且仅在 Safari 中）登录 Facebook，则授权方法可以正常工作。

如果用户在 Safari 和 iOS 中都登录 Facebook，授权失败，甚至多次尝试失败（超过 10 次）。

当我退出 iOS 的 Facebook 设置页面并让 Safari 登录 Facebook 时，授权成功。

我正在使用 iPhone 模拟器，所以我没有安装 Facebook 应用程序，当我的应用程序调用时`[facebook authorize]`，它会在 Safari 中打开（如果 iOS 设置为空）。

Facebook SDK 3.1.1。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T23:19:55.367

在过去的几天里，我也遇到了这个问题。最后我的解决方案是重置 iPhone 模拟器。你这样做：

1.  选择 iOS 模拟器菜单
2.  选择“重置内容和设置...”

一旦我这样做了，身份验证就会正常工作。在我的情况下，我相信由于在设置中更改为不同的 FB 帐户而引发了 190 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-06T18:39:37.267

当我更改我的 Facebook 密码时，这发生在我的 iPhone 上。还需要在手机上更改您的 Facebook 应用程序密码

# python - PyInstaller 和 Enthought 套件

> ID：15249134
> 
> 赞同：3
> 
> 时间：2013-03-06T13:51:31.397
> 
> 标签：python, pyinstaller, enthought, mayavi, pythonxy

我想知道是否有人在使用 pyinstaller 和已考虑导入的脚本创建独立可执行文件方面取得了任何成功。这几天我一直在尝试这样做，但是我一直收到导入错误。通过一些挖掘，我相信我可能需要添加一些隐藏的导入并创建自己的钩子。但是我没有听说有人在这方面取得过任何成功，所以我想我会在这里问一下，看看是否有人可能对这种情况有一些经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T21:26:13.827

我一直在尝试为我的 python 应用程序构建一个独立的 exe，它使用 matplotlib（enthought 的组件之一）并且在让它工作时遇到了很多麻烦。最后在 pyinstaller 网站上发现了一个错误帖子 ( [http://www.pyinstaller.org/ticket/651](http://www.pyinstaller.org/ticket/651) )，告诉我这是 pyinstaller 中的一个错误。我按照那篇文章中的参考资料在 <a href="https://github.com/pyinstaller/pyinstaller/pull/61" rel="nofollow noreferrer">https://github 下载了 pyinstaller 的固定版本。 com/pyinstaller/pyinstaller/pull/61

现在我的独立 exe 构建工作正常。我敢打赌你遇到了和我一样的问题。请参阅...[使用 pyinstaller 构建 python pylab/matplotlib exe](https://stackoverflow.com/questions/17095180/building-python-pylab-matplotlib-exe-using-pyinstaller)

# python - 计算其二进制表示中 1 的数量——右移不起作用？

> ID：15249135
> 
> 赞同：0
> 
> 时间：2013-03-06T13:51:31.900
> 
> 标签：python

当被问到计算二进制表示中 1 的个数时，我想到的第一个答案是将数字右移并计算最不重要的位

但是有一种说法，当数字为负数时，这种方法会导致死循环吗？

我用python快速尝试

```
>>> a = -16
>>> a >> 1
-8
>>> a >> 1
-8
>>> -8 >> 1
-4
>>> 
```

这是我所期望的，那么问题是什么，将负数移动会导致符号位向右转移？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:54:46.857

的确，你会得到一个无限循环，因为一旦你到达`-1`你就无法离开那里：

```
>>> a = -1
>>> a >> 1
-1 
```

这听起来像功课，所以我不会给你一个完整的答案，但看看内置的`mod`功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T14:30:42.597

请参阅[http://docs.python.org/2/reference/expressions.html#shifting-operations](http://docs.python.org/2/reference/expressions.html#shifting-operations)：向右移动等同于除法。然后检查[http://docs.python.org/2/reference/expressions.html#binary-arithmetic-operations](http://docs.python.org/2/reference/expressions.html#binary-arithmetic-operations)：整数除法隐含地应用于`floor`结果，因此，无论您`-1 / 2 = -1`从`floor(-0.5) = -1`哪个数字开始，您最终都会达到-1。因此，您最终会陷入无限循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T12:14:48.033

如果我们谈论的是 python 的无限精度整数，那么任何负数都有无限个 1！因此，不管符号填充（您也将在 C 中得到），除了固定位长度外，以负数计算位是没有意义的。

对于 32 位或 64 位 int，只需移动多次并停止。

这是 32 位整数 -4 中的位。

```
>>> n = -4
>>> for bit in reversed([ (n>>shift)&1 for shift in range(32) ]):
...    print bit,
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 
```

所以总结起来就是

```
sum( (n>>shift)&1 for shift in range(32) ) 
```

# macos - PDFDocument + Quartz 过滤器的内存泄漏

> ID：15249136
> 
> 赞同：5
> 
> 时间：2013-03-06T13:51:32.743
> 
> 标签：macos, cocoa, ios5, pdf, quartz-graphics

我的应用程序使用石英过滤器将 PDF 文档中的图像转换为黑白：

```
PDF Document *pdfDocument = [[PDFDocument alloc] initWithURL:[NSURL fileURLWithPath:@"/Users/dan/Desktop/test.pdf"]];

QuartzFilter *quartzFilter = [QuartzFilter quartzFilterWithURL:[[NSBundle mainBundle] URLForResource:@"Black & White" withExtension:@"qfilter"]];

NSDictionary *options = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:quartzFilter, nil] forKeys:[NSArray arrayWithObjects:@"QuartzFilter", nil]];

[pdfDocument writeToFile:@"/Users/dan/Desktop/testResault.pdf" withOptions:options]; 
```

不幸的是，使用过滤器将文件写入磁盘会导致许多内存泄漏，如下所示： ![在此处输入图像描述](../Images/95c65de7aff5be613da6516e2b129268.png)

这是 Quartz 框架中的错误还是我在上面的代码中做错了什么？

如果你愿意，你可以在这里下载我的测试项目：[http ://www.file-upload.net/download-7293644/PDF---Quartz-Memory-Leak.zip.html](http://www.file-upload.net/download-7293644/PDF---Quartz-Memory-Leak.zip.html)

我正在使用 ARC。

# c# - 选择随机字符

> ID：15249138
> 
> 赞同：24
> 
> 时间：2013-03-06T13:51:35.897
> 
> 标签：c#, random, char

我有一些字符：

```
chars = "$%#@!*abcdefghijklmnopqrstuvwxyz1234567890?;:ABCDEFGHIJKLMNOPQRSTUVWXYZ^&".ToCharArray(); 
```

现在我正在寻找一种从这些中返回随机字符的方法。

我找到了一个可能有用的代码：

```
static Random random = new Random();
        public static char GetLetter()
        {
            // This method returns a random lowercase letter
            // ... Between 'a' and 'z' inclusize.
            int num = random.Next(0, 26); // Zero to 25
            char let = (char)('a' + num);
            return let;
        } 
```

此代码返回我一个随机字符形式的字母但只返回我小写字母

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-06T13:54:27.543

好吧，你快到了 - 你想从字符串中返回一个随机元素，所以你只需在字符串长度范围内生成一个随机数：

```
public static char GetRandomCharacter(string text, Random rng)
{
    int index = rng.Next(text.Length);
    return text[index];
} 
```

顺便说一句，我建议*不要*使用没有任何锁定`static`的类型变量-不是线程安全的。有关更多详细信息（和解决方法），请参阅我[关于随机数的文章。](http://csharpindepth.com/Articles/Chapter12/Random.aspx)`Random``Random`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-06T14:00:18.660

这可能对您有用：

```
public static char GetLetter()
{
    string chars = "$%#@!*abcdefghijklmnopqrstuvwxyz1234567890?;:ABCDEFGHIJKLMNOPQRSTUVWXYZ^&";
    Random rand = new Random();
    int num = rand.Next(0, chars.Length);
    return chars[num];
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-06T13:56:26.870

你可以像这样使用它；

```
char[] chars = "$%#@!*abcdefghijklmnopqrstuvwxyz1234567890?;:ABCDEFGHIJKLMNOPQRSTUVWXYZ^&".ToCharArray();
Random r = new Random();
int i = r.Next(chars.Length);
Console.WriteLine(chars[i]); 
```

这是一个[`DEMO`](http://ideone.com/G2hyK4).

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-06T13:58:47.770

请使用 CHARS 缓冲区的大小而不是 26。

```
int num = random.Next(0, chars.Length) 
```

然后代替

```
let = (char)('a' + num) 
```

利用

```
let = chars[num] 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-06T13:59:29.783

我有一个大概的问题，我是通过这种方式做到的：

```
public static String GetRandomString()
{
    var allowedChars = "abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNOPQRSTUVWXYZ0123456789";
    var length = 15;

    var chars = new char[length];
    var rd = new Random();

    for (var i = 0; i < length; i++)
    {
        chars[i] = allowedChars[rd.Next(0, allowedChars.Length)];
    }

    return new String(chars);
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-06-22T13:19:47.220

我不确定它的效率如何，因为我对编码很陌生，但是，为什么不直接利用你已经创建的随机数呢？这不会“随机化”大写字符吗？

```
 int num = random.Next(0,26);           
    char let = (num > 13) ? Char.ToUpper((char)('a' + num)) : (char)('a' + num); 
```

另外，如果你想从你的 char[] 中取出一个字母，那么只使用一个字符串会更容易吗？

```
 string charRepo = "$%#@!*abcdefghijklmnopqrstuvwxyz1234567890?;:ABCDEFGHIJKLMNOPQRSTUVWXYZ^&"; 
    Random rando = new Random();
    int ranNum = rando.Next(0, charRepo.Length);

    char ranChar = charRepo[ranNum]; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-06T13:54:53.600

```
private static void Main(string[] args)
        {
            Console.WriteLine(GetLetters(6));
            Console.ReadLine();
        }

        public static string GetLetters(int numberOfCharsToGenerate)
        {
            var random = new Random();
            char[] chars = "$%#@!*abcdefghijklmnopqrstuvwxyz1234567890?;:ABCDEFGHIJKLMNOPQRSTUVWXYZ^&".ToCharArray();

            var sb = new StringBuilder();
            for (int i = 0; i < numberOfCharsToGenerate; i++)
            {
                int num = random.Next(0, chars.Length);
                sb.Append(chars[num]);
            }
            return sb.ToString();
        } 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-09-24T13:19:48.760

您的代码很好，您只需将 'a' 更改为 'A'

```
static Random random = new Random();
        public static char GetLetter()
        {
            // This method returns a random lowercase letter
            // ... Between 'a' and 'z' inclusize.
            int num = random.Next(0, 26); // Zero to 25
            char let = (char)('A' + num);
            return let;
        } 
```

此代码与问题中提到的相同，只是更改`char let = (char)('A' + num);`，它返回大写字母。

谢谢！！！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-03-06T13:58:56.317

我希望这段代码可以帮助你：

```
 string s = "$%#@!*abcdefghijklmnopqrstuvwxyz1234567890?;:ABCDEFGHIJKLMNOPQRSTUVWXYZ^&";
            Random random = new Random();
            int num = random.Next(0, s.Length -1);
            MessageBox.Show(s[num].ToString()); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-04-28T00:22:07.000

从 ASCII 数字中获取字符：

```
private string GenerateRandomString()
{
Random rnd = new Random();
string txtRand = string.Empty;
for (int i = 0; i <8; i++) txtRand += ((char)rnd.Next(97, 122)).ToString();
return txtRand;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-09-04T10:47:29.750

你可以试试这个：

```
 public static string GetPassword()
 {
string Characters = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
 Random rnd = new Random();
int index = rnd.Next(0,51);
string char1 = Characters[index].ToString();
return char1;
  } 
```

现在您可以根据自己的意愿使用此代码块。干杯!

# javascript - 使用 html+css+javascript 或 JSP 作为我的表示层

> ID：15249147
> 
> 赞同：0
> 
> 时间：2013-03-06T13:51:49.373
> 
> 标签：javascript, mysql, eclipse, spring, jsp

我想构建一个包含基本菜单（比如说 10 个按钮）的应用程序，每个按钮都是我女朋友心理学课程中的一个主题。当我单击一个按钮时，我将转到特定主题的菜单。（所以我有 10 个这样的子菜单）。

在每个子菜单中，我也可以按下按钮，但这次我会得到一些我保存在 mySql 数据库中的句子。

我知道如何使用 spring 构建大部分服务器端部分（我知道如何构建控制器和服务层）休眠部分（我知道如何构建域和 DAO 层），

我的问题是，我不知道是否应该使用 html+css+java 脚本来构建菜单并配置控制器和客户端之间的功能和通信，或者我应该使用 Jsp+Jstl？

对不起，我缺乏知识，我知道这是安静的基础..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:53:58.777

通过使用 jstl 标签，您可以构建

像

```
 <c:out value="${name}"/> 
```

# python - 如何在需要转换为 JSON 的 Python 对象中存储和访问日期时间？

> ID：15249153
> 
> 赞同：0
> 
> 时间：2013-03-06T13:52:12.317
> 
> 标签：python, json, datetime, object

我正在编写我的第一个 python 脚本，它使用不同的日期时间条目创建和更新对象。

我正在设置这样的对象：

```
# Date conversion
import datetime
import time

# 0:01:00 and 0:00:00 threshold and totalseconds
threshold = time.strptime('00:01:00,000'.split(',')[0],'%H:%M:%S')
tick = datetime.timedelta(hours=threshold.tm_hour,minutes=threshold.tm_min,seconds=threshold.tm_sec).total_seconds()
zero_time = datetime.timedelta(hours=0,minutes=0,seconds=0)
zero_tick = zero_time.total_seconds()
format_date = '%d/%b/%Y:%H:%M:%S'

from datetime import datetime

# Response object
class ResponseObject(object):
    def __init__(self, dict):
      self.__dict__ = dict

# JSON encoding
from json import JSONEncoder
class MyEncoder(JSONEncoder):
    def default(self, o):
      return o.__dict__

# > check for JSON response object
try:
   obj
except NameError:
    obj = ResponseObject({})

...
entry = "14/Nov/2012:09:32:31 +0100"
entry_tz = str.join(' ', entry.split(None)[1:6])
entry_notz = entry.replace(' '+entry_tz,'')
this_time = datetime.strptime(entry_notz, format_date)

# > add machine to object if not there, add init time
if not hasattr(obj, "SOFTINST"):
    #line-breaks for readability
    setattr(obj, "SOFTINST", {  
        "init":this_time,
        "last":this_time,
        "downtime":zero_time,
        "totaltime":"",
        "percentile":100
    })
... 
print this_time
print MyEncoder().encode({"hello":"bar"})
print getattr(obj, "SOFTINST") 
```

我最后的“打印”返回：

```
{
  'totaltime': datetime.timedelta(0),
  'uptime': '',
  'last': datetime.datetime(2012, 11, 14, 9, 32, 31),
  'init': datetime.datetime(2012, 11, 14, 9, 32, 31),
  'percentile': 100, 
  'downtime': 0
} 
```

我无法将其转换为 JSON ...

我不明白为什么会这样：

```
print this_time   #2012-11-14 09:32:31 
```

但在对象内部，它存储为

```
datetime.datetime(2012, 11, 14, 9, 32, 31) 
```

**问题：**
如何以“字符串格式”存储日期时间对象，并且仍然可以在 Python 中轻松访问（和修改）它们？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:00:20.947

在 datetime 对象上使用 isoformat 方法。（见参考：[http](http://docs.python.org/release/2.5.2/lib/datetime-datetime.html) ://docs.python.org/release/2.5.2/lib/datetime-datetime.html ）

# mysql - 为什么这个 MySQL 查询不删除任何行？

> ID：15249155
> 
> 赞同：2
> 
> 时间：2013-03-06T13:52:21.797
> 
> 标签：mysql, join

从表面上看，我的用例非常简单。我有两张桌子：`order`和`line`。`order`包含`id`和`datetime`，并且在表中`line`有对 的引用。不幸的是，这是一个非常旧的系统，我不能（即不允许修改系统）使用带有更新/删除触发器的外键。`id``order`

我正在[阅读这个问题](https://stackoverflow.com/questions/4154707/mysql-delete-from-one-table-with-join)并编写了自己的查询来做类似的事情。基本上，只要订单超过两年，我就想删除`line`与删除订单相关的所有 s ：`order`

```
DELETE a
FROM 
  `line` AS a
  LEFT JOIN `order` AS b ON a.`order_id` = b.`id`
WHERE
  b.`datetime` < DATE_SUB(NOW(), INTERVAL 2 YEAR); 
```

目前没有任何事情发生 - 没有行受到影响。将查询更改为仅选择，使用相同的连接和 where 子句，可以很好地返回许多结果。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:01:46.490

医生说`tbl_name`，不是`table_references`。所以这可能有效：

```
DELETE line
FROM 
  line
  LEFT JOIN `order` AS b ON line.`order_id` = b.`id`
WHERE
  b.`datetime` < DATE_SUB(NOW(), INTERVAL 2 YEAR); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:55:35.027

DELETE 命令用于删除整行，因此正确的语法是

```
DELETE FROM yourtable WHERE... 
```

如果你做 DELETE (something) FROM 将不起作用

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:59:06.177

```
DELETE FROM 
  `line`
WHERE
   order_id IN 
      (SELECT id
       FROM order
       WHERE `datetime`< DATE_SUB(NOW(), INTERVAL 2 YEAR) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T14:05:23.433

尝试这个：

```
DELETE FROM `line` WHERE `order_id` IN (SELECT `id` FROM `order` 
WHERE `datetime` < DATE_SUB(NOW(), INTERVAL 2 YEAR)); 
```

可能我更重。

# matrix - 矩阵乘法最坏情况、最佳情况和平均情况复杂度

> ID：15249159
> 
> 赞同：1
> 
> 时间：2013-03-06T13:52:33.070
> 
> 标签：matrix, complexity-theory, time-complexity

以下进行矩阵乘法的函数的 (a) 最坏情况、(b) 最佳情况和 (c) 平均情况复杂度是多少

```
for i=1 to n do
    for j=1 to n do
        C[i,j]=0
        for k=1 to n do
            C[i,j]=C[i,j]+A[i,k]*B[k,j]
        end {for}
    end {for}
end {for} 
```

你会如何证明复杂性的合理性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:07:27.507

`i`,`j`并且`k`全部从`1`到`n`。

因此，最好的、平均的和最坏的情况是**O(n * n * n) = O(n^3)**

对于每个`n`可能`i`的s，都有`n` `j`s，对于每个`n` `j`s，都有`n` `k`s。这给出`n * n * n`了内部循环的执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:27:27.740

**O(n^3)**，因为在每个嵌套循环上，N 乘以 N，因为你有一个嵌套循环 3 次，它完全处理整个 N，那将是**NXNXN = N^3**

# vim - Vim - 删除直到最后一次出现的字符

> ID：15249160
> 
> 赞同：12
> 
> 时间：2013-03-06T13:52:37.843
> 
> 标签：vim

我试图弄清楚如何`dt`或`df`最后一次出现字符串中的字符。

例如，假设我有以下行：

`foo not.relevant.text.bar`

如果我`f df.`预期得到`foo relevant.text.bar`，但我想得到`foo bar`。使用`f 3df.`不是一个选项，因为我不知道字符串中有多少个字符。此外，我可能想要获取`foo .bar`( `f 3dt.`)，或者如果该行以点结尾，我可能想要获取`foo .`. 我想总是找到最后一个，不管有多少。

没有正则表达式这可能吗？我想我可以使用正则表达式，但我希望我缺少一个简单的 vim 命令。我发现自己经常尝试做这样的事情。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-06T14:05:15.027

一种**不**使用**正则表达式**的方法，**不** **计算**“点”（可能是其他字母）...看看其他人是否有更好的方法..

`foo[I]not.relevant.text.bar`( `[I] is cursor`)

你可以试试：

```
lmm$T.d`m 
```

或以这种格式，可能看起来更好？

`l``m``m``$``T``.``d`````m`

这将完成这项工作。如果您经常使用它，您可以创建一个映射。

**编辑**

我添加了一个 GIF 动画来展示它的工作原理。:)

**笔记**

**`@=`**将光标移动到正确的起点（按）后，我在正常模式下键入`f(space)`，以显示我在命令行中按下的键。

![在此处输入图像描述](../Images/da39f4f6a134eb0c24918fc99d71fa3f.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-06T14:11:15.320

你可以使用我的[JumpToLastOccurrence 插件](http://www.vim.org/scripts/script.php?script_id=3386)。它提供了///`,f`执行此操作的命令。`,F``,t``,T`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-06T14:02:45.947

我会用`f df...`

键入不一定要短，但我发现使用“重复最后一个命令”比预先计算要删除的单词/句子的数量更容易。

然后你可以调整`.`你输入的数量来调整你要删除的字符串的长度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-16T02:30:57.467

对于您的示例：`E``T``.``d``B`

> foo not.relevant.text.bar

只要光标位于“foo”之后的文本中的任何位置，它就可以工作。

# 从路径+文件名中去除路径：`E``T``/``d``B`

我用它来剥离除尾随文件名之外的所有路径名。

> 从**/some/long/path/filename.ext**中删除路径，只留下文件名。

只要：

*   光标位于粗体字内的任意位置
*   该单词中没有空格

    1.  `E`走到最后（因为没有空格 - 如果不是最后一行也可以）

    2.  `T``/`找到最后一个`/`（在它之后停止，所以它也会被删除）

    3.  `d``B`删除到单词的开头

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T14:10:19.110

在视觉模式下：

```
$F.d^ 
```

$ 转到当前行的末尾，F 向后搜索一个句点，d^ 删除直到行首。

# foursquare - Foursquare 场地 api 返回不正确的签入意图数据

> ID：15249164
> 
> 赞同：0
> 
> 时间：2013-03-06T13:53:17.333
> 
> 标签：foursquare

它因城市而异，但我注意到实际的 Foursquare 应用程序总是返回一个准确的附近商店列表以供签到......而开发人员 api 结果大多不准确，并且在使用意图时通常最多偏离标记 3 个街区=checkin ...什么给了？

# asp.net - 针对 Active Directory 检测过期密码

> ID：15249166
> 
> 赞同：-1
> 
> 时间：2013-03-06T13:53:26.113
> 
> 标签：asp.net

我有一个网站 (asp.net)，您对 AD 公司进行身份验证。我在这个很棒的论坛中找到的身份验证代码（我把它放在下面）。问题是如果用户的密码过期了，我的代码直接告诉他是错误的，人们会有点疯狂。

我在谷歌上搜索以检测到这一点，但我什么也没找到。

你能帮我吗？我如何知道密码是否已过期或必须更改？如果是这样，用户如何更改它？

米码：

公共函数 usuarioYPassDM(tUsuario As String, tcontraseña As String) As Boolean

```
 Dim esError As String

    'primero ver si es un usuario de dm

    ' devolveremos true si son credenciales válidas, false si no

    Dim entrada As DirectoryEntry = New DirectoryEntry()

    entrada.Path = LDAP://SERVER******

    entrada.AuthenticationType = AuthenticationTypes.Secure

    entrada.Username = tUsuario

    entrada.Password = tcontraseña

    Dim dsSystem As DirectorySearcher = New DirectorySearcher(entrada, "(sAMAccountName=" & tUsuario & ")")

    Dim srSystem As SearchResult

    dsSystem.SearchScope = SearchScope.Subtree

    Try

        srSystem = dsSystem.FindOne()

        usuarioYPassDM = True

    Catch ex As Exception

        esError = ex.Message.ToString

        usuarioYPassDM = False

    End Try

End Function 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:14:32.460

[这](http://blogs.msdn.com/b/adpowershell/archive/2010/02/26/find-out-when-your-password-expires.aspx)是计算用户对象的密码到期日期的函数，该用户对象给出其 samAccountName、安全标识符或 DistinguishedName。

# php - 使用模型规则 CakePHP 验证 URL 参数

> ID：15249168
> 
> 赞同：1
> 
> 时间：2013-03-06T13:53:26.873
> 
> 标签：php, validation, cakephp

我刚刚写了我的第一篇文章，所以如果我做错了什么，请告诉我！我的问题：我想验证 url 给出的数据。

**../Logs/requests?from=2011-10-18T16:15:00&to=2011-10-18T16:30:00&fmt=csv**

我刚刚发现有一个选项可以使用添加到模型中的规则进行验证。

```
public $validate = array(
    'request_id' => array(
        'alphaNumeric' => array(
            'rule'     => 'alphaNumeric',
            'required' => true,
            'message'  => 'Alphabets and numbers only'
        ),
    )
); 
```

在控制器中使用“ **ModelName->set($params)** ”，之后“ **ModelName->validates()** ”函数应该提供答案，如果其有效与否。[我的解决方案与http://book.cakephp.org/2.0/en/models/data-validation/validating-data-from-the-controller.html](http://book.cakephp.org/2.0/en/models/data-validation/validating-data-from-the-controller.html)上的解决方案之间的唯一区别 是我的控制器使用了几个模型收集响应数据。问题是“ **validates()** ” - 函数只返回“有效”，即使我输入了特殊字符或其他应该是“无效”的东西 - 由模型规则签名。帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:08:36.670

这*不是*答案，而是为了帮助 OP 而添加的；

我创建了一个测试控制器/模型来测试您的情况。我故意没有扩展“AppController”/“AppModel”来删除那些导致问题的代码。

**我的测试模型（app/Model/Some.php）**

```
class Some extends Model
{
    public $name = 'Some';
    public $useTable = 'false';

    public $validate = array(
        'request_id' => array(
            'alphaNumeric' => array(
                'rule'     => 'alphaNumeric',
                'required' => true,
                'message'  => 'Alphabets and numbers only'
            ),
        )
    );
} 
```

**我的测试控制器（app/Controller/SomeController.php）**

```
class SomeController extends Controller
{
    public $uses = array('Some');

    public function index()
    {
        $this->autoRender = false;

        $params = array('Some' => array('request_id'=>'4*G/&2'));
        $this->Some->set($params);
        $result = $this->Some->validates();
        debug($result);

        $params = array('Some' => array('request_id'=>'AAAA'));
        $this->Some->set($params);
        $result = $this->Some->validates();
        debug($result);

    }
} 
```

输出：

```
\app\Controller\SomeController.php (line 32)
false
\app\Controller\SomeController.php (line 37)
true 
```

此测试设置似乎按计划工作，因此您也可以尝试在您的应用程序中测试这些设置以缩小问题的原因。也许某些行为附加到您的 AppModel 包含“beforeValidate()”回调并禁用 request_id 字段的验证？

# java - ServerSocket 不适用于 try-with-resources？

> ID：15249169
> 
> 赞同：2
> 
> 时间：2013-03-06T13:53:28.643
> 
> 标签：java, try-catch, serversocket, try-with-resources

所以我们在课堂上玩弄 ServerSockets，制作一个非常简单的 HTTP 服务器，它接受一个请求，不做任何事情，并以 200 OK 响应，然后是一些 HTML 内容。

这两天我一直在想办法解决这个问题，我一直没能掌握，我的老师也没有。由于某些奇怪的原因，我开始认为关闭服务器是一个问题。我已经解决了这个问题，但只想知道为什么我首先会发生这种情况。

以下是三个片段：

HttpServer.class：

```
package httpserver;

import java.io.Closeable;
import java.io.IOException;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.Scanner;

public class HttpServer implements Closeable {
    public static final int PORT = 80;
    public static final int BACKLOG = 1;
    public static final String ROOT_CATALOG = "C:/HttpServer/";

    private ServerSocket server;
    private Socket client;
    private Scanner in;
    private PrintWriter out;

    private String request;

    public HttpServer() throws IOException {
        server = new ServerSocket(PORT, BACKLOG);
    }

    public Socket accept() throws IOException {
        client = server.accept();
        in = new Scanner(client.getInputStream());
        out = new PrintWriter(client.getOutputStream());

        return client;
    }

    public void recieve() {
        request = in.nextLine();
        System.out.println(request);
    }

    public void respond(final String message) {
        out.print(message);
        out.flush();
    }

    @Override
    public void close() throws IOException {
        if(!server.isClosed()) {
            client = null;
            server = null;
        }
    }
} 
```

有效的 Main.class 解决***方案***：

```
package httpserver;

import java.io.IOException;
import java.net.Socket;

public class Main {
    public static void main(String[] args) throws IOException {
        HttpServer server = new HttpServer();
        Socket client;

        while(true) {
            client = server.accept();
            server.recieve();
            server.respond("HTTP/1.0 200 OK\r\n"
                    + "Content-Type: text/html\r\n"
                    + "\r\n"
                    + "<html><body><b>hello..</b></body></html>");
            client.close();
        }
    }
} 
```

***不起作用***的 Main.class 解决方案：

```
package httpserver;

import java.io.IOException;

public class Main {
    public static void main(String[] args) {
        try(HttpServer server = new HttpServer()) {
            while (true) {
                server.accept();
                server.recieve();
                server.respond("HTTP/1.0 200 OK\r\n"
                        + "Content-Type: text/html\r\n"
                        + "\r\n"
                        + "<html><body><b>hello..</b></body></html>");
            }
        } catch(IOException ex) {
            System.out.println("We have a problem: " + ex.getMessage());
        }
    }
} 
```

I could imagine it has something to do with not closing the client socket after each loop iteration. But even so, it should at least go through once, before bugging up in that case. I really can't see what the problem is supposed to be.

No error messages, nothing...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:58:08.747

You do not specify any [Content-length](http://www.w3.org/Protocols/HTTP/1.0/spec.html#BodyLength) when sending the HTTP, so the browser does not know when to stop reading for more data. See [How to know when HTTP-server is done sending data](https://stackoverflow.com/questions/9412945/how-to-know-when-http-server-is-done-sending-data) for more info.

In the working example you closed the client socket, which tells the browser there is no more data - for your ambitions this might be enough if you don't want the browser to respond.

# asp.net - 如何在模型错误消息中包含 mailto 链接

> ID：15249175
> 
> 赞同：1
> 
> 时间：2013-03-06T13:53:51.810
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

将 mailto 添加到此 ASP.NET MVC3 代码的正确语法是什么。这不起作用，使用双引号也不起作用：

```
ModelState.AddModelError("", "We could not locate the email address you entered.  Please check the email address.  If you believe it is correct, please contact us by sending an email to <a href='mailto:support@abc.com'>Support</a> from the email address you are attempting to use."); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:26:35.917

我不太擅长 Razor，但这暂时可以解决您的问题

```
@Html.Raw(Html.ValidationSummary().ToString().Replace("[mailto]", "<a href='mailto:support@abc.com'>Support</a>")) 
```

你的消息将包含这个

```
ModelState.AddModelError("", "We could not locate the email address you entered.  Please
check the email address.  If you believe it is correct, please contact us by sending an 
email to [mailto] from the email address you are attempting to use."); 
```

该链接现在添加到视图中，而不是从服务器/控制器中添加，`[mailto]`用实际链接替换您的链接并调用`Html.Raw`以在浏览器中呈现 html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:37:06.583

尝试使用

添加这个 NamesPace ：`Using System.Text`

```
 StringBuilder s=new StringBuilder ();
    s.Append(We could not locate the email address you entered.  Please check the email address.  If you believe it is correct, please contact us by sending an email to ");
    s.Append("<a href='mailto:support@abc.com'>Support</a>");
    s.Append("from the email address you are attempting to use.");
    ModelState.AddModelError("", s.ToString()); 
```

# java - Hibernate with H2 不存储数据

> ID：15249176
> 
> 赞同：1
> 
> 时间：2013-03-06T13:53:54.777
> 
> 标签：java, hibernate, h2

我正在使用 H2 使用 Hibernate 开发一个简单的 java 应用程序。

我没有收到任何例外。Hibernate 输出和 H2 的跟踪文件向我显示了数据的插入。

但是数据不存储在数据库中。hibernate 和 H2 控制台都不显示任何插入的数据。

也许有人有一个想法。

谢谢

这是我的休眠配置：

```
<hibernate-configuration>
  <session-factory>
    <property name="hibernate.dialect">org.hibernate.dialect.H2Dialect</property>
    <property name="hibernate.connection.driver_class">org.h2.Driver</property>
    <property name="hibernate.connection.url">jdbc:h2:~/HibTest;TRACE_LEVEL_FILE=3;FILE_LOCK=NO</property>
    <property name="hibernate.connection.username">sa</property>
    <property name="hibernate.connection.password"></property>

    <property name="hibernate.hbm2ddl.auto">create-drop</property>

    <mapping package="de.test.hib.domain" />
    <mapping class="de.test.hib.domain.Data" />
  </session-factory>
</hibernate-configuration> 
```

这是我的域类：

```
package de.test.hib.domain;

import java.io.Serializable;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.SequenceGenerator;

@Entity
@SequenceGenerator(sequenceName="SEQ_DATA",name="SEQ_DATA_GEN",initialValue=1)
public class Data implements Serializable {

    private static final long serialVersionUID = 1L;

    private Integer id;
    private String content;

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        if (!(object instanceof Data)) {
            return false;
        }

        Data other = (Data) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }

        return true;
    }

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE,generator="SEQ_PERSON_GEN")
    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    @Column(nullable=false)
    public String getContent() {
        return content;
    }

    public void setContent(String content) {
        this.content = content;
    }
} 
```

以及持续的过程：

```
Transaction trans = HibernateUtils.getInstance().getCurrentSession().beginTransaction();
HibernateUtils.getInstance().getCurrentSession().saveOrUpdate(this);
HibernateUtils.getInstance().getCurrentSession().flush();
trans.commit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:14:43.720

`FILE_LOCK=NO`从数据库 URL 中删除该选项。这是非常危险的，因为这意味着数据库文件不受保护。如果数据库已经打开，那么以这种方式打开数据库会损坏数据库文件。

# php - 无法修复错误“未定义强制 svg POST 参数。” 使用 HighCharts 导出 (PHP/CURL)

> ID：15249178
> 
> 赞同：1
> 
> 时间：2013-03-06T13:54:02.897
> 
> 标签：php, curl, highcharts

我已经使用 HighCharts 多年了，而且出乎意料地，将图表导出为 PNG、JPG 等不再起作用。我使用 cURL 以我应该的方式导出到[http://export.highcharts.com/ ：](http://export.highcharts.com/)

`curl_setopt($ch,CURLOPT_URL, $url);` `curl_setopt($ch,CURLOPT_POST, true);` `curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);`

其中 $fields_string 的格式也很好，并且包括 svg= 参数。

为什么它一直给我返回错误：“manadatory svg POST parameter is undefined.”????

我已经尝试了各种方法，但为什么它不再起作用了？我在 HighCharts 网站上查看，但那里......他们确实有效。

var_dump() $fields_string 是：

```
string(7069) "svg=<svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" version="1.1" width="700" height="422"><defs><clipPath id="highcharts-5"><rect rx="0" ry="0" fill="none" x="0" y="0" width="632" height="275" stroke-width="0.000001"></rect></clipPath></defs><rect rx="5" ry="5" fill="#FFFFFF" x="0" y="0" width="700" height="422" stroke-width="0.000001" stroke="#4572A7"></rect><text x="350" y="25" style="font-family:verdana, arial, helvetica, sans-serif;font-size:16px;color:#3e576f;fill:#3e576f;" text-anchor="middle" class="highcharts-title" ><tspan x="350">Test</tspan></text><g class="highcharts-grid" ></g><g class="highcharts-grid" ><path d="M 58 330.5 L 690 330.5" fill="none" stroke="#C0C0C0" stroke-width="1" ></path><path d="M 58 239.5 L 690 239.5" fill="none" stroke="#C0C0C0" stroke-width="1" ></path><path d="M 58 147.5 L 690 147.5" fill="none" stroke="#C0C0C0" stroke-width="1" ></path><path d="M 58 55.5 L 690 55.5" fill="none" stroke="#C0C0C0" stroke-width="1" ></path></g><g class="highcharts-series-group" ><g class="highcharts-series" clip-path="url(#highcharts-5)" visibility="visible" transform="translate(58,55)"><rect rx="0" ry="0" fill="none" x="82.5" y="16.5" width="149" height="257" stroke-width="5" stroke="rgb(0, 0, 0)" r="0" stroke-opacity="0.05" transform="translate(1,1)"></rect><rect rx="0" ry="0" fill="none" x="82.5" y="16.5" width="149" height="257" stroke-width="3" stroke="rgb(0, 0, 0)" r="0" stroke-opacity="0.1" transform="translate(1,1)"></rect><rect rx="0" ry="0" fill="none" x="82.5" y="16.5" width="149" height="257" stroke-width="1" stroke="rgb(0, 0, 0)" r="0" stroke-opacity="0.15000000000000002" transform="translate(1,1)"></rect><rect rx="0" ry="0" fill="#4572a7" x="82.5" y="16.5" width="149" height="257" stroke-width="1" stroke="#FFFFFF" r="0"></rect><rect rx="0" ry="0" fill="none" x="398.5" y="75.5" width="149" height="198" stroke-width="5" stroke="rgb(0, 0, 0)" r="0" stroke-opacity="0.05" transform="translate(1,1)"></rect><rect rx="0" ry="0" fill="none" x="398.5" y="75.5" width="149" height="198" stroke-width="3" stroke="rgb(0, 0, 0)" r="0" stroke-opacity="0.1" transform="translate(1,1)"></rect><rect rx="0" ry="0" fill="none" x="398.5" y="75.5" width="149" height="198" stroke-width="1" stroke="rgb(0, 0, 0)" r="0" stroke-opacity="0.15000000000000002" transform="translate(1,1)"></rect><rect rx="0" ry="0" fill="#aa4643" x="398.5" y="75.5" width="149" height="198" stroke-width="1" stroke="#FFFFFF" r="0"></rect></g></g><g class="highcharts-data-labels" visibility="visible" transform="translate(58,55)"><text x="158" y="10" style="font-family:verdana, arial, helvetica, sans-serif;font-size:11px;color:#4572a7;line-height:14px;font-weight:bold;fill:#4572a7;" text-anchor="middle" ><tspan x="158">56.42%</tspan></text><text x="474" y="69" style="font-family:verdana, arial, helvetica, sans-serif;font-size:11px;color:#4572a7;line-height:14px;font-weight:bold;fill:#4572a7;" text-anchor="middle" ><tspan x="474">43.58%</tspan></text></g><g class="highcharts-legend" transform="translate(274,381)"><rect rx="5" ry="5" fill="none" x="0.5" y="0.5" width="151" height="25" stroke-width="1" stroke="#909090" visibility="visible"></rect><text x="30" y="18" style="font-family:verdana, arial, helvetica, sans-serif;font-size:12px;cursor:pointer;color:#3e576f;fill:#3e576f;" ><tspan x="30">Performance Ratio</tspan></text><rect rx="2" ry="2" fill="#4572a7" x="9.5" y="7.5" width="16" height="12" stroke-width="1" stroke="#FFFFFF" r="0"></rect></g><g class="highcharts-axis" ><text x="216" y="344.19704790557563" style="font-family:verdana, arial, helvetica, sans-serif;font-size:11px;color:#666;line-height:14px;font:normal 9px sans-serif;fill:#666;" text-anchor="end" transform="rotate(-35 216 344)"><tspan x="216">Piano</tspan></text><text x="532" y="344.19704790557563" style="font-family:verdana, arial, helvetica, sans-serif;font-size:11px;color:#666;line-height:14px;font:normal 9px sans-serif;fill:#666;" text-anchor="end" transform="rotate(-35 532 344)"><tspan x="532">MagneticOne</tspan></text><path d="M 374.5 330.19704790557563 L 374.5 335.19704790557563" fill="none" stroke="#C0D0E0" stroke-width="1"></path><path d="M 690.5 330.19704790557563 L 690.5 335.19704790557563" fill="none" stroke="#C0D0E0" stroke-width="1"></path></g><g class="highcharts-axis" ><text x="50" y="335.29704790557565" style="font-family:verdana, arial, helvetica, sans-serif;font-size:11px;width:296px;color:#666;line-height:14px;fill:#666;" text-anchor="end"><tspan x="50">0</tspan></text><text x="50" y="243.630381238909" style="font-family:verdana, arial, helvetica, sans-serif;font-size:11px;width:296px;color:#666;line-height:14px;fill:#666;" text-anchor="end"><tspan x="50">20</tspan></text><text x="50" y="151.9637145722423" style="font-family:verdana, arial, helvetica, sans-serif;font-size:11px;width:296px;color:#666;line-height:14px;fill:#666;" text-anchor="end"><tspan x="50">40</tspan></text><text x="50" y="60.29704790557562" style="font-family:verdana, arial, helvetica, sans-serif;font-size:11px;width:296px;color:#666;line-height:14px;fill:#666;" text-anchor="end"><tspan x="50">60</tspan></text></g><text x="26" y="192.5" style="font-family:verdana, arial, helvetica, sans-serif;font-size:12px;color:#6d869f;font-weight:bold;fill:#6d869f;" transform="rotate(270 26 192)" text-anchor="middle"><tspan x="26">Combined Performance</tspan></text><path d="M 58 330.5 L 690 330.5" fill="none" stroke="#C0D0E0" stroke-width="1" ></path><g class="highcharts-tooltip" visibility="hidden"><rect rx="5" ry="5" fill="none" x="2" y="2" width="0" height="0" stroke-width="5" fill-opacity="0.85" stroke="rgb(0, 0, 0)" stroke-opacity="0.05" transform="translate(1,1)"></rect><rect rx="5" ry="5" fill="none" x="2" y="2" width="0" height="0" stroke-width="3" fill-opacity="0.85" stroke="rgb(0, 0, 0)" stroke-opacity="0.1" transform="translate(1,1)"></rect><rect rx="5" ry="5" fill="none" x="2" y="2" width="0" height="0" stroke-width="1" fill-opacity="0.85" stroke="rgb(0, 0, 0)" stroke-opacity="0.15000000000000002" transform="translate(1,1)"></rect><rect rx="5" ry="5" fill="rgb(255,255,255)" x="2" y="2" width="0" height="0" stroke-width="2" fill-opacity="0.85"></rect><text x="2" y="14" style="font-family:verdana, arial, helvetica, sans-serif;font-size:12px;color:#333333;padding:0;white-space:nowrap;fill:#333333;" ><tspan x="2"> </tspan></text></g><text x="690" y="417" style="font-family:verdana, arial, helvetica, sans-serif;font-size:10px;cursor:pointer;color:#909090;fill:#909090;" text-anchor="end" ><tspan x="690"> </tspan></text><g class="highcharts-tracker" transform="translate(58,55)"><rect rx="0" ry="0" fill="rgb(192,192,192)" x="82" y="16" width="150" height="258" stroke-width="0.000001" fill-opacity="0.000001" visibility="visible" style="cursor:pointer;"></rect><rect rx="0" ry="0" fill="rgb(192,192,192)" x="398" y="75" width="150" height="199" stroke-width="0.000001" fill-opacity="0.000001" visibility="visible" style="cursor:pointer;"></rect></g></svg>&filename=chart&type=image/png" 
```

当我回显 svg 的值时，我在浏览器中看到了完美的 SVG 图像。

# css - 专门针对平板电脑的 Css 媒体查询

> ID：15249180
> 
> 赞同：1
> 
> 时间：2013-03-06T13:54:09.033
> 
> 标签：css, media-queries

我有一个媒体查询 -->@media all AND (max-width: 1024)..它在三星平板电脑上运行良好，但我需要这个只适用于平板电脑而不是电脑。如果设备是个人电脑，它应该只有@media屏幕和（最大宽度：768px）..我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:03:23.730

您无法通过媒体查询检查设备（PC、平板电脑、手持设备），只能检查设备宽度（*更多，我知道，但操作要求设备宽度*）。

也许[这篇文章](http://unmatchedstyle.com/news/working-with-media-queries-and-min-width.php)会帮助你更多地了解它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:03:46.027

媒体查询永远不应该是特定于设备的——您只需说“对于这种大小的输出执行此操作，但对于不同大小的输出执行此操作”。无论是手机、PC、平板电脑、信息亭、手表还是其他任何东西都应该是无关紧要的。出于这个原因，媒体查询不允许您查询硬件。

您可能需要基于设备功能的不同行为（而不是样式），例如。这是一个“触摸”设备吗？但这应该在 JS 而不是 CSS 中管理。

您查询的实际目标是什么？将 CSS 应用于 PC 和平板电脑是否重要？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T14:10:30.813

简短的回答：你没有。

更长的答案：您以错误的方式进行操作。

很容易陷入使用屏幕宽度来定位特定设备的陷阱，但那是爱丽丝梦游仙境的兔子洞。为什么？因为移动设备的宽度与桌面的宽度重叠。

例如，这里有一个屏幕宽度列表，你能猜出哪些是桌面的吗？

1024
1366
1200
1080

你猜怎么了？我敢打赌，你的猜测是错误的。1024 及以上似乎是“桌面”分辨率，但 iPhone 5 Retina 为 1136x640，第三代 iPad 为 2048x1536。更复杂的是，许多使用台式机的人不会将浏览器保持最大化，因此设备宽度不等于浏览器宽度。Kindle 上会发生什么，它具有更高的分辨率，但也增加了文本大小？

越来越多的设备定期进入市场。

那么，你最好的选择是什么？完全放弃针对特定设备或设备类的想法。如果您必须这样做，请使用 JavaScript 来查找触摸屏（因为这是您需要专门为一类设备调整界面的最可能原因）。

您仍然可以使用媒体查询来定位宽度（或者更好的是，根据我的经验，[使用比例媒体查询](http://blog.cloudfour.com/the-ems-have-it-proportional-media-queries-ftw/)），但不要期望它一定能在给定的设备上工作。

# windows - 相同模式的不同 FOR 循环执行

> ID：15249181
> 
> 赞同：0
> 
> 时间：2013-03-06T13:54:13.147
> 
> 标签：windows, batch-file

我正在编写两个 FOR 循环来连接使用通配符作为名称的文件。我使用 More +1 命令（跳过第一行），一个 > 符号来提供一个临时文件，
最后，我将 /y 最终文件移动到一个新的扩展文件中（实际上是重命名文件）。

我不明白为什么第一个循环需要一个空格键来操作每个文件，而第二个循环不需要几个文件！

我在批处理文件的第一行放置了一个@ECHO OFF。

奇怪的行为：我在第一个循环中写了一条 ECHO 消息来执行每个命令。如果我删除（或将此 ECHO 消息作为评论），则循环不起作用。

对这种故障有什么建议吗？

谢谢你。

代码示例：

```
for %%x in (.\req*.csv) do (
  echo %%x ... 
  more +1 "%%x" >tmpStock
  move /y tmpStock "%%x".sse)

for %%F in (req*.csv.sse) do (type "%%F" >>Stock.txt)
for %%F in (req*.csv.sse) do (DEL /Q "%%F") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:38:00.393

我想这就是解决方案。

```
type req*.csv>tempfile
findstr /v /i /c:"unwanted text" tempfile>Stock.txt
del tempfile 
```

*耸耸肩*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:05:48.853

MORE 命令通常会在每次显示全屏信息时暂停。但是如果输出被重定向或管道，那么它不会在每个屏幕后暂停。不幸的是，它不会继续无休止地打印，直到文件结束。如果输出被重定向或管道传输，它将在 ~64k 行 (~65535) 之后暂停。

您可以使用 FOR /F 循环来处理除第一行之外的所有内容，但这相对较慢。

我编写了一个名为 SKIP.BAT 的简单混合 JScript/Batch 实用程序，可用于跳过文件中的**n**行。它用作过滤器，比纯批处理 FOR 循环快得多。只需通过管道输入数据，它就会跳过您指定的行数。脚本当然可以改进。例如，它没有任何错误检查。

```
@if (@X)==(@Y) @end /* Harmless hybrid line that begins a JScript comment

::************ Batch portion ***********
@echo off
cscript //E:JScript //nologo "%~f0" %*
exit /b 0

************* JScript portion **********/
for (var i=0; i<WScript.Arguments.Item(0); i++) {
  if (!WScript.StdIn.AtEndOfStream) WScript.StdIn.ReadLine();
}
while (!WScript.StdIn.AtEndOfStream) {
  WScript.Stdout.WriteLine(WScript.StdIn.ReadLine());
} 
```

只要上面的脚本在您的当前目录中，或者在您的 PATH 中，那么您的代码就可以简化为：

```
@echo off
>Stock.txt (for %%F in (req*.csv) do type "%%F" | skip 1) 
```

或者，从命令行：

```
>Stock.txt (for %F in (req*.csv) do @type "%F" | skip 1) 
```

当然，整个解决方案可以很容易地用纯 JScript 或 VBScript 编写。或者 CSV 连接可以集成到一个混合脚本中。但是拥有一个独立的 SKIP 实用程序对于批量开发很有用。

# javascript - 本地 Chrome 扩展设置输入类型=“文件”的文件

> ID：15249185
> 
> 赞同：7
> 
> 时间：2013-03-06T13:54:27.703
> 
> 标签：javascript, file-upload, google-chrome-extension, file-io

我正在开发 Chrome 浏览器的扩展程序。`input type="file"`我不想使用扩展名从 html 元素中选择文件。但我知道由于安全限制，这是不可能的。

有没有办法**消除与此问题相关的 Chrome 的安全限制，**以便实现这一点。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T05:56:38.743

好的，我要回答我自己的问题。

首先感谢 Michael Dibbets 和 wtjones 的回答。 `--disable-web-security and --allow-file-access-from-files`不工作。我没有选择原生插件和从源代码扩展 chrome，因为这似乎需要时间。

## 解决方案：

我使用[chromedriver](https://code.google.com/p/chromedriver)和[selenium java](https://code.google.com/p/selenium/downloads/list)来自动化 chrome。

[在Slanec 对这个问题的回答](https://stackoverflow.com/questions/9726005/how-to-click-on-input-type-file-across-browsers-using-selenium-webdriver)的帮助下，我能够务实地选择文件。

### 这是java代码：

```
System.setProperty("webdriver.chrome.driver", "C:/.../chromedriver.exe");

WebDriver driver = new ChromeDriver();
driver.get("URL_OF_THE_PAGE");
WebElement link = driver.findElement(By.linkText("TEXT_IN_THE_LINK"));
link.click();
WebElement choose_file_input = driver.findElement(By.className("CLASS_OF_THE_INPUT"));
choose_file_input.sendKeys("PATH_TO_FILE"); 
```

谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:01:11.070

这是仅供个人使用的扩展程序吗？如果是这样，您也许可以使用 --disable-web-security 和 --allow-file-access-from-files。否则您可能需要使用本机插件：[https ://code.google.com/p/firebreath/](https://code.google.com/p/firebreath/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:57:38.003

下载铬源代码并编译您自己的浏览器。

安全限制是有目的的，不能被规避（无论如何都不容易） 目的是用户可以从 google play 商店下载扩展，而不必担心扩展对他们的系统造成的风险。

# ios - 音频单元从麦克风捕获声音，添加混响，然后发送到扬声器

> ID：15249186
> 
> 赞同：0
> 
> 时间：2013-03-06T13:54:29.300
> 
> 标签：ios, core-audio, audiounit

很抱歉再次打扰。

我使用音频图形处理方法来播放mic-in 并为扬声器的声音添加效果。当我使用 AUGraph_1 : RIO_input->Converter-> AiPodUE->RIO_output 时，它工作正常，我可以听到声音播放。

但是当我使用 AUGraph_2 时：RIO_input->Converter->AUReverb2->RIO_output，尝试添加一些混响，事情就出错了，根本没有声音。

这是使用 CAShow 打印的日志：

AUGraph_1>>>节点1：'auou''rioc''appl'，实例0x816f920 OI

节点 2：'aufc''conv''appl'，实例 0x81713e0 OI

节点 3：'aufx''ipeq''appl'，实例 0x8171740 OI

连接：

节点 1 总线 1 => 节点 2 总线 0 [2 ch, 0 Hz, 'lpcm' (0x0000000C) 16 位 little-endian 有符号整数]

节点 2 总线 0 => 节点 3 总线 0 [ 2 ch，44100 Hz，'lpcm' (0x00000C2C) 8.24 位小端符号整数，去交错]

节点 3 总线 0 => 节点 1 总线 0 [ 2 ch，44100 Hz，'lpcm' (0x00000C2C) 8.24 位小端符号整数，去交错]

AUGraph_2>>>>

节点 1：'auou''rioc''appl'，实例 0x8151420 O

节点 2：'aufc''conv''appl'，实例 0x7539df0 O

节点 3：'aufx''rvb2''appl'，实例 0x7539210 O

连接：

节点 1 总线 1 => 节点 2 总线 0 [2 ch, 0 Hz, 'lpcm' (0x0000000C) 16 位 little-endian 有符号整数]

节点 2 总线 0 => 节点 3 总线 0 [ 2 ch，44100 Hz，'lpcm' (0x00000029) 32 位小端浮点，去交错]

节点 3 总线 0 => 节点 1 总线 0 [2 ch, 0 Hz, 'lpcm' (0x0000000C) 16 位 little-endian 有符号整数]

有什么不对？

请帮助我，任何线索将不胜感激。

最好的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:48:10.970

我做了同样的练习，但使用了混合器单元而不是转换器，如下所示

AudioUnitGraph 0x13D000：成员节点：节点 1：'auou''rioc''appl'，实例 0x7ac9100 O
节点 2：'aumx''mcmx''appl'，实例 0x7acdee0 O
节点 3：'aufx''rvb2''appl' , instance 0x7acf150 O
Connections: node 1 bus 1 => node 2 bus 1 [ 1 ch, 44100 Hz, 'lpcm' (0x00000C2C) 8.24-bit little-endian signed integer, deinterleaved] node 2 bus 0 => node 3 bus 0 [ 2 ch, 44100 Hz, 'lpcm' (0x00000029) 32-bit little-endian float, deinterleaved] node 3 bus 0 => node 1 bus 0 [ 2 ch, 0 Hz, 'lpcm' (0x0000000C) 16-bit little -endian 有符号整数]

我简化了 Audiograph [http://zerokidz.com/audiograph/Home.html](http://zerokidz.com/audiograph/Home.html)中的代码来执行此操作，因为它的注释非常好，并解释了有关各种 ASBD 格式的问题。

# java - 哈希映射中常见值的返回键

> ID：15249190
> 
> 赞同：1
> 
> 时间：2013-03-06T13:54:40.860
> 
> 标签：java

我有一个哈希图。多个键具有相同的值。什么是最好的方法来找到

`keys for repeated Values`无需迭代。?

阅读[这个](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html#containsValue%28java.lang.Object%29)文档感觉它没有任何功能。

注意：键 | 值对是 Int 类型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:00:15.510

如果不迭代标准 JDK API 中的 Map，就无法找到一个值的所有键。

您可以通过以下方式使用 Guava 库：

*   使用[Maps.filterValues](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Maps.html)返回其值满足 Predicate 的条目
*   转换为 Guava Multimap 并使用[Multimaps.invert](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Multimaps.html#invertFrom%28com.google.common.collect.Multimap,%20M%29)
*   使用[BiMap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/BiMap.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:03:55.043

无论哪种方式，您最终都会迭代集合。在某些库中，迭代可能隐藏在视图之外，但它必然存在。

您可以轻松编写一个简单的方法来满足您的需求：

```
public static <K,V> Set<K> keysOfDupValues(Map<K,V> m) {
    Set<K> res = new HashSet<K>();
    Map<V,K> seen = new HashMap<V,K>();
    for (Map.Entry<K,V> e : m.entrySet()) {
        V v = e.getValue();
        K k = e.getKey();
        if (seen.containsKey(v)) {
            res.add(k);
            res.add(seen.get(v));
        } else {
            seen.put(v, k);
        }
    }
    return res;
} 
```

[ideone 上的演示](http://ideone.com/uBIT5t)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:06:37.663

这真的不可能。`containsValue()`超类中 method 的实现`java.util.AbstractMap`会遍历这些值。

所以，你必须通过价值观来实现这一目标。

您可以查看[实现`containsValue()`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/AbstractMap.java#AbstractMap.containsValue%28java.lang.Object%29)以了解如何执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T14:13:46.280

如果您从无法控制的代码中读取该地图，那么您别无选择，只能在地图上进行迭代。

在任何情况下，您都可以通过构建一个反向映射来避免进行多次迭代的问题，这将归结为一个多重映射，但是由于 Java 中没有该模式的特定类定义，您必须使用映射来构建它和清单。

每次您需要`<k,v>`在原始映射中包含一个新对时，您还需要`<v,k>`在反向映射中包含反向对。如果`v`作为键（即原始值）在反向映射中尚不存在，则将其映射到仅包含`k`作为值（即原始键）的列表。如果键`v`已经存在于反向映射中，那么您只需将值推`k`送到现有列表中。

当您需要知道哪些键映射到原始映射中的给定值时，您可以在反向映射中查询该值，并获取键列表。

关于地图的[Java 教程](http://docs.oracle.com/javase/tutorial/collections/interfaces/map.html)包括一个关于使用地图实现多地图的部分。

如果您可以控制地图创建过程，此解决方案应该非常有效。但是，如果地图是由某种外部机制创建并定期更新的，那么它的收益将很小。

如果您只能控制映射的创建，但不能控制其更新，您可以实现一个暴露`Map`接口的新类，该接口在内部也保存反向映射，并在插入/删除新对时更新它，或支持通知让您的代码知道地图已更改以及如何更改的机制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T15:14:20.390

尝试改变

```
File newxmlfile = new File(Environment.getExternalStorageDirectory()
+ ts);
to
File newxmlfile = new File(Environment.getExternalStorageDirectory()
+ "/"+ts); 
```

# sybase - Sybase Delete 命令未按预期工作

> ID：15249191
> 
> 赞同：0
> 
> 时间：2013-03-06T13:54:43.170
> 
> 标签：sybase

我写了这个简单的命令来测试删除命令，但发现它有一些差异：

```
delete table1 from table1,table2
where table1.col1 = table2.col1
and table1.col2= table2.col2 
```

在 table1 我有 272768 行， table2 我有 1380 行。现在我需要从 table1 中删除 table2 中可用的这 1380 行。但令我惊讶的是，它在运行上述脚本后从 table1 中删除了 2234 行。预期的删除应该只有 1380 行。我能做些什么来优化它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:58:14.250

试试这个方法：

```
delete from table1 
from  table2
where table1.col1 = table2.col1
and table1.col2= table2.col2 
```

或者

```
delete from table1 
where exists 
(
  select 1
    from table2 
  where table1.col1 = table2.col1
    and table1.col2= table2.col2

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:59:35.640

如果您运行查询：

```
SELECT COUNT(*)
  FROM table1 JOIN table2
    ON table1.col1 = table2.col1 AND table1.col2 = table2.col2 
```

你会发现 1380 行`table2`匹配 2234 行`table1`，所以 DELETE 正在做它应该做的事情。

该查询是首选形式；您可以在没有显式连接的情况下使用过时的表示法：

```
SELECT COUNT(*)
  FROM table1, table2
 WHERE table1.col1 = table2.col1 AND table1.col2 = table2.col2 
```

但是你应该在你写的任何东西中使用显式的 JOIN 表示法；您只需要了解 FROM 子句中的逗号分隔列表，就可以理解另一个千年编写的旧查询。

# mysql - 将复杂的 SQL 查询转换为 LINQ

> ID：15249202
> 
> 赞同：-1
> 
> 时间：2013-03-06T13:55:16.983
> 
> 标签：mysql, sql, asp.net-mvc, linq

我有丰富的 SQL 经验，但对 LINQ 还很陌生，并且正在努力将以下 MySQL 查询转换为 LINQ。任何人都可以帮助将以下内容转换为 LINQ 以在具有实体框架的 ASP.net MVC 项目中使用吗？

```
SELECT
    S.Submission_ID,
    P.Photo_ID,
    C2.Contract_Name,
    J.Job_Number,
    D.Device_Name,
    A.`Display_Name`,
    S.Submission_Status,
    S.Submission_JobRef,
    S.Created,
    TRUE
FROM
    Submission S
        LEFT JOIN Job J ON S.`Job_ID` = J.`Job_ID`
        LEFT JOIN Contract C2 ON J.`Contract_ID` = C2.`Contract_ID`
        INNER JOIN Submission_Status SS ON S.`Submission_Status` = SS.`ID`
        INNER JOIN Device D ON S.`Device_ID` = D.`Device_ID`
        INNER JOIN ACTION A ON S.`Action_ID` = A.`Action_ID`
        INNER JOIN (
            SELECT
                MIN(P.Photo_ID) AS Photo_ID,
                P.Submission_ID
            FROM
                Photo P
            GROUP BY
                P.`Submission_ID`) P ON S.`Submission_ID` = P.Submission_ID
WHERE
    S.`Submission_Status` <> 3 AND
    (LOCATE(@Criteria, C2.`Contract_Name`) > 0 OR
    LOCATE(@Criteria, J.`Job_Number`) > 0 OR
    LOCATE(@Criteria, D.`Device_Name`) > 0 OR
    LOCATE(@Criteria, A.`Display_Name`) > 0 OR
    LOCATE(@Criteria, SS.`Value`) > 0 OR
    LOCATE(@Criteria, S.`Submission_JobRef`) > 0)
ORDER BY
    S.`Submission_ID` DESC 
```

我试图了解多个连接和子查询，但后来卡住了。这就是我到目前为止所拥有的......显然，它不工作或不完整！

```
Dim results = From S In db.Submissions
                      Join P In db.Photos On S.Submission_ID Equals P.Submission_ID
                      Group Join J In db.Jobs On S.Job_ID Equals J.Job_ID
                        Into Job = Group
                      Join J In db.Jobs On S.Job_ID Equals J.Job_ID
                      Group By P.Submission_ID
                        Into SubmissionPhotoID = Min(P.Photo_ID)
                      Select New With {.Submission_ID = Submission_ID,
                                       .Photo_ID = SubmissionPhotoID,
                                       .Contract_Name = If(IsNothing(S.Job), "", S.Job.Contract.Contract_Name),
                                       .Job_Number = If(IsNothing(S.Job), "", S.Job.Job_Number),
                                       .Device_Name = S.Device.Device_Name,
                                       .Action_Name = S.Action.Display_Name,
                                       .Submission_Status = S.Submission_Status1.ID,
                                       .Submission_JobRef = S.Submission_JobRef,
                                       .Created = S.Created,
                                       .CanEdit = bolCanEdit}
                      Order By S.Submission_ID
                      Skip param.iDisplayStart
                      Take param.iDisplayLength 
```

任何有关上述内容的帮助或指导将不胜感激！

* * *

## 编辑

为了提供帮助，以下是模型中定义上述查询中使用的实体的类。（我省略了一些与问题无关的字段）。

```
Partial Public Class Submission
    Public Property Submission_ID As Integer
    Public Property Job_ID As Nullable(Of Integer)
    Public Property Device_ID As Integer
    Public Property Action_ID As Integer
    Public Property Submission_Status As Nullable(Of Integer)
    Public Property Submission_JobRef As String
    Public Property Created As Nullable(Of Date)

    Public Overridable Property Action As Action
    Public Overridable Property Device As Device
    Public Overridable Property Job As Job
    Public Overridable Property Photos As ICollection(Of Photo) = New HashSet(Of Photo)
    Public Overridable Property Submission_Status1 As Submission_Status
End Class

Partial Public Class Job
    Public Property Job_ID As Integer
    Public Property Contract_ID As Nullable(Of Integer)
    Public Property Job_Number As String

    Public Overridable Property Contract As Contract
    Public Overridable Property Submissions As ICollection(Of Submission) = New HashSet(Of Submission)
End Class

Partial Public Class Contract
    Public Property Contract_ID As Integer
    Public Property Contract_Name As String

    Public Overridable Property Jobs As ICollection(Of Job) = New HashSet(Of Job)
End Class

Partial Public Class Submission_Status
    Public Property ID As Integer
    Public Property Value As String

    Public Overridable Property Submissions As ICollection(Of Submission) = New HashSet(Of Submission)

End Class

Partial Public Class Device
    Public Property Device_ID As Integer
    Public Property Device_Name As String

    Public Overridable Property Submissions As ICollection(Of Submission) = New HashSet(Of Submission)
End Class

Partial Public Class Action
    Public Property Action_ID As Integer
    Public Property Display_Name As String

    Public Overridable Property Submissions As ICollection(Of Submission) = New HashSet(Of Submission)
End Class

Partial Public Class Photo
    Public Property Photo_ID As Integer
    Public Property Submission_ID As Integer

    Public Overridable Property Submission As Submission
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:05:28.867

这是一段相当复杂的 SQL，带有子选择以及左连接和内连接的混合。一些快速的建议：

将其分解为一系列 linq 语句，从您的核心对象开始，并在后续步骤中添加相关部分。如果您将结果保留为 IQueryable，编译器将为您将所有结果放在一起并作为一个查询发送到数据库（即在最后一步之前不要 ToList()）。

就个人而言，我使用两个 from 和一个 where 扩展方法进行连接，而不是使用连接运算符。一方面，我让您更容易知道您正在获得左连接或内连接。

例如：

```
FROM Submission S LEFT JOIN Job J ON S.`Job_ID` = J.`Job_ID` 
```

我会这样做（对不起，我是 c#，所以语法对于 VB 可能不太正确）

```
Dim results = from s in db.Submissions
              from j in db.Jobs.Where(j=> j.Job_Id == s.Job_Id).DefaultIfEmpty() 
```

因此，连接条件在 Jobs 的 .Where() 内，而 .DefaultIfEmpty() 告诉它左连接（本质上，如果连接失败，Job 将是默认值）。

**进一步编辑：**

经过实验，我得到了这个代码来返回一个结果（是不是正确的结果是另一个问题）。再次对 c# 语法感到抱歉。

```
 [TestMethod]
    public void Query()
    {
        const string conStr = "Data Source=(local);Initial Catalog=ComplexSqlToLinq; Integrated Security=True";
        var db = new MyDbContext(conStr);

        const string criteria = "Contract1";

        var minPhotos = from p in db.Photos
                        group p by p.SubmissionId
                        into g
                        select new {SubmissionId = g.Key, PhotoId = g.Min(p=>p.PhotoId)};

        var query = from s in db.Submissions
                    from j in db.Jobs.Where(j => j.JobId == s.JobId).DefaultIfEmpty()
                    from c in db.Contracts.Where(c => c.ContractId == j.ContractId).DefaultIfEmpty()
                    from ss in db.SubmissionStatuses.Where(ss => ss.Id == s.SubmissionStatus)
                    from d in db.Devices.Where(d => d.DeviceId == s.DeviceId)
                    from a in db.Actions.Where(a => a.ActionId == s.ActionId)
                    from p in minPhotos.Where(p => p.SubmissionId == s.SubmissionId)

                    where s.SubmissionStatus != 3 &&
                       ( c.ContractName.Contains(criteria) ||
                         j.JobNumber.Contains(criteria) ||
                         d.DeviceName.Contains(criteria) ||
                         a.DisplayName.Contains(criteria) ||
                         ss.Value.Contains(criteria) ||
                         s.SubmissionJobRef.Contains(criteria))

                    select new
                               {
                                   s.SubmissionId,
                                   p.PhotoId,
                                   c.ContractName,
                                   j.JobNumber,
                                   d.DeviceName,
                                   a.DisplayName,
                                   s.SubmissionStatus,
                                   s.SubmissionJobRef,
                                   s.Created,
                                   SomeBool = true
                               };

        var result = query.ToList();
        Assert.IsTrue(result.Any());
    } 
```

显然，您可以改变测试中的标准常数以适用于不同的项目，我选择匹配合同 - 我假设只有一个表会匹配。

此查询生成以下 SQL，看起来有点做作，但在功能上与您的原始 SQL 非常相似。

```
SELECT 
    [Filter1].[SubmissionId] AS [SubmissionId], 
    [GroupBy1].[A1] AS [C1], 
    [Filter1].[ContractName] AS [ContractName], 
    [Filter1].[JobNumber] AS [JobNumber], 
    [Filter1].[DeviceName] AS [DeviceName], 
    [Filter1].[DisplayName] AS [DisplayName], 
    [Filter1].[SubmissionStatus] AS [SubmissionStatus], 
    [Filter1].[SubmissionJobRef] AS [SubmissionJobRef], 
    [Filter1].[Created] AS [Created], 
    cast(1 as bit) AS [C2]
FROM   
(
    SELECT 
        [Extent1].[SubmissionId] AS [SubmissionId], 
        [Extent1].[SubmissionStatus] AS [SubmissionStatus], 
        [Extent1].[SubmissionJobRef] AS [SubmissionJobRef], 
        [Extent1].[Created] AS [Created], 
        [Extent2].[JobNumber] AS [JobNumber], 
        [Extent3].[ContractName] AS [ContractName], 
        [Extent4].[Value] AS [Value], 
        [Extent5].[DeviceName] AS [DeviceName], 
        [Extent6].[DisplayName] AS [DisplayName]
    FROM      
        [dbo].[Submissions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Jobs] AS [Extent2] ON [Extent2].[JobId] = [Extent1].[JobId]
        LEFT OUTER JOIN [dbo].[Contracts] AS [Extent3] ON [Extent3].[ContractId] = [Extent2].[ContractId]
        INNER JOIN [dbo].[SubmissionStatus] AS [Extent4] ON [Extent4].[Id] = [Extent1].[SubmissionStatus]
        INNER JOIN [dbo].[Devices] AS [Extent5] ON [Extent5].[DeviceId] = [Extent1].[DeviceId]
        INNER JOIN [dbo].[Actions] AS [Extent6] ON [Extent6].[ActionId] = [Extent1].[ActionId]
    WHERE 
        3 <> [Extent1].[SubmissionStatus] 
) AS [Filter1]

INNER JOIN  (
    SELECT 
        [Extent7].[SubmissionId] AS [K1], 
        MIN([Extent7].[PhotoId]) AS [A1]
    FROM 
        [dbo].[Photos] AS [Extent7]
    GROUP BY 
        [Extent7].[SubmissionId] ) AS [GroupBy1] 
    ON [GroupBy1].[K1] = [Filter1].[SubmissionId]
WHERE 
(
    [Filter1].[ContractName] LIKE @p__linq__0 ESCAPE N'~') OR 
    ([Filter1].[JobNumber] LIKE @p__linq__1 ESCAPE N'~') OR 
    ([Filter1].[DeviceName] LIKE @p__linq__2 ESCAPE N'~') OR 
    ([Filter1].[DisplayName] LIKE @p__linq__3 ESCAPE N'~') OR 
    ([Filter1].[Value] LIKE @p__linq__4 ESCAPE N'~') OR 
    ([Filter1].[SubmissionJobRef] LIKE @p__linq__5 ESCAPE N'~')
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:30:24.230

用一个词来回应 Dave Johnson 的评论 - 可扩展性。

最近我试图提高应用程序的性能，我的第一个想法是添加一些复杂性与 John Henry 的示例相似的 SQL - 多个连接和过滤器。毕竟，它在我的开发机器上表现得像火箭一样。

架构师断然禁止在数据库服务器上使用复杂的 SQL，因为它连接了几个拥有 100 多个用户的大型应用程序。尽管我很喜欢构建灵活的 SQL，但我不得不同意。将逻辑转移到使用它的机器上是很好的架构。

所以对于我们这些精通声明式 SQL 的人来说，学习翻译到 linq 技能很重要。

当然，我之前给出的解决方案并没有实现这一点，因为相同的 SQL 被发送到服务器。但是拥有一个 linq 等价物是一个可以进一步优化的开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:13:22.800

经过大量搜索和阅读各种文章后，我放弃了尝试用 LINQ 查询语法编写此查询，而改用方法语法。

非常感谢 Ackroydd 在将复杂的 SQL 转换为 LINQ 方面的建议和支持。当您知道您可以在几分钟内用 SQL 完成某些事情，但需要使用 LINQ 来实现可伸缩性并与现有代码保持一致时，您会感到非常沮丧！

这是我最终得到的结果，因为我确信它对其他人有用：

```
Dim query As IQueryable(Of Submission)

' Initialise the new query
query = db.Submissions.Include(Function(s) s.Action) _
                              .Include(Function(s) s.Photos) _
                              .Include(Function(s) s.Device) _
                              .Include(Function(s) s.Job) _
                              .Include(Function(s) s.Submission_Status1) _
                              .Include(Function(s) s.Job.Contract) _
                              .Include(Function(s) s.Comments) _
                              .AsNoTracking

' Apply initial filters
query = query.Where(Function(S) Not S.Submission_Status1.ID.Equals(3))

' Apply search criteria if passed
If Not String.IsNullOrEmpty(param.sSearch) Then
    query = query.Where(Function(S) S.Job.Contract.Contract_Name.Contains(param.sSearch) OrElse
                                            S.Job.Job_Number.Contains(param.sSearch) OrElse
                                            S.Device.Device_Name.Contains(param.sSearch) OrElse
                                            S.Action.Display_Name.Contains(param.sSearch) OrElse
                                            S.Submission_Status1.Value.Contains(param.sSearch) OrElse
                                            S.Submission_JobRef.Contains(param.sSearch))
End If

' Order the results
query = query.OrderByDescending(Function(S) S.Submission_ID)

' Paginate the results
query = query.Skip(param.iDisplayStart).Take(param.iDisplayLength)

' Return only the required columns
Dim resultData = query.AsEnumerable.Select(Function(S) New AjaxSubmissionOverview With { _
                                                           .Submission_ID = S.Submission_ID,
                                                           .Photo_ID = S.Photos.First.Photo_ID,
                                                           .Contract_Name = If(IsNothing(S.Job), "", S.Job.Contract.Contract_Name),
                                                           .Job_Number = If(IsNothing(S.Job), "", S.Job.Job_Number),
                                                           .Device_Name = S.Device.Device_Name,
                                                           .Action_Name = S.Action.Display_Name,
                                                           .Submission_Status = S.Submission_Status,
                                                           .Submission_JobRef = S.Submission_JobRef,
                                                           .Latest_Comment = If(S.Comments.Count = 0, "", HtmlHelpers.Truncate(S.Comments.Last.Comment1, 100)),
                                                           .Created = S.Created,
                                                           .CanEdit = bolCanEdit}) 
```

# ios - 通过目标 C（适用于 iOS）在 Facebook 中创建多个相册？

> ID：15249205
> 
> 赞同：0
> 
> 时间：2013-03-06T13:55:23.100
> 
> 标签：ios, objective-c, facebook, file-sharing

是否可以通过objective C在Facebook中动态创建多个相册，这样我们每次上传某些图片时都有相册的文本定义？

# 我们正在使用的当前代码如下：

```
 for (UIView *view in scrollView.subviews)
{

     if (view.tag == IMAGE_VIEW_TAG) {
        NSData *attachmentData = [self getImageData:view];
        UIImage *img = [UIImage imageWithData:attachmentData];
        FBRequest *photoUploadRequest = [FBRequest requestForUploadPhoto:img]; 
```

[photoUploadRequest startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {

```
 }];
        NSLog(@"This is Image");
    }

    if (view.tag == TEXT_VIEW_TAG)
    {
        NSString *message = @""
           message = [self getTextData:view];
        NSLog(@"mesage values %@",message); 
```

NSMutableDictionary* params = [[NSMutableDictionary alloc] initWithObjectsAndKeys:message, @"message",nil]; [FBRequest startWithGraphPath:@"me/feed" 参数:params HTTPMethod:@"POST" completionHandler:^(FBRequestConnection *connection, id result, NSError *error){

# python - SQLAlchemy Flask 过滤器查询以组合来自两个模型的结果

> ID：15249207
> 
> 赞同：4
> 
> 时间：2013-03-06T13:55:32.147
> 
> 标签：python, orm, sqlalchemy, flask, flask-sqlalchemy

我正在尝试按 date_registered 订购用户的感谢（帖子）。

目前有两个查询得到两个列表，然后手动合并重新排序。用户可以是感谢的给予者或接受者。感谢总是有一个给予者，但可能有多个接收者。因此，我有一个Thank 和ThankReceivedByUser 模型来获得结果。

```
class Thank(db.Model):

    id = db.Column(db.Integer, primary_key = True)
    giver_id = db.Column(db.Integer, db.ForeignKey("user.id"), nullable = False)
    status = db.Column(db.SmallInteger, nullable = False) 
    date_registered = db.Column(db.DateTime, nullable = False)

class ThankReceivedByUser(db.Model):

    id = db.Column(db.Integer, primary_key = True)
    thank_id = db.Column(db.Integer, db.ForeignKey("thank.id"), nullable = False)
    receiver_id = db.Column(db.Integer, db.ForeignKey("user.id"), nullable = False)
    status = db.Column(db.SmallInteger, nullable = False) 
    date_registered = db.Column(db.DateTime, nullable = False) 
```

如果可能的话，获得一些关于构建单个查询的提示会很棒。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T13:33:49.673

我想出了一个解决这个问题的方法：

```
谢谢=Thank.query\
    .join(ThanksReceivedByUser)\
    .filter(or_(Thank.giver_id == user.id,
                感谢ReceivedByUser.receiver_id == user.id))\
    .order_by(Thank.date_registered).all()

```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-07T10:22:19.250

如果我正确理解了您的问题，您希望在一个查询中结合用户给予和接受的感谢。如果是这样，您需要[`UNION`](http://docs.sqlalchemy.org/en/rel_0_8/orm/query.html#sqlalchemy.orm.query.Query.union)两个查询，其中一个选择给予感谢，而另一个选择收到。然后您可以对这个组合查询的结果进行排序。以下是您的查询的样子：

```
# user_id contains a value of some user's id.
given_q = db.session.query(Thank).filter_by(giver_id=user_id)
received_q = db.session.query(Thank).join(ThankReceivedByUser).\
    filter(ThankReceivedByUser.receiver_id == user_id)
q = given_q.union(received_q).order_by(Thank.date_registered) 
```

# jquery - jQuery.ajax() 到 PHP 总是进入“request.fail”函数

> ID：15249209
> 
> 赞同：0
> 
> 时间：2013-03-06T13:55:40.203
> 
> 标签：jquery

我会尽量做到描述性。对不起，如果它太多了。

我有一个 HTML 文件，带有一个简单的登录表单，链接 jquery 和我的个人脚本：

```
 <html>
 <head>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

 <title>Login</title>
 <script src="js/jquery-1.8.1.min.js"></script>
 <script src="js/50load-json.js"></script>
 </head>

 <body>

<h1>Login Form</h1>
 <form id="myform">
        Username<br>    <input type="text"      name="username" id="username"><p>
        <!--Password    <input type="password"  name="password"> -->
        Password<br>    <input type="text"      name="password" id="password"><p>
                        <input type= 'submit' value='Login' id="submitLogin">
 </form>    
<div id="output"></div>
 </body>
 </html> 
```

从我的脚本（50load-json.js）中，我调用了一个 PHP，它连接到我的数据库并执行查询以匹配用户名和密码。

我的js文件的代码如下：

```
 $(document).ready(function(){

      $("#myform").submit( function () { 
    var output = $('#output');    
            var my_post_data = "username=bloc&password=party";//These Parameters should evaluate as TRUE in the PHP

      $.post("loginthisPOST.php", my_post_data)
   .done(function(data) { alert("Data Loaded: " + data);})
   .fail(function(data) { alert("error: " + data); });
       });    
       }); 
```

我的“loginthisPOST.php”看起来像这样：

```
 <?php
   header('Access-Control-Allow-Origin: *');
   header('Access-Control-Allow-Methods: POST');
   header('Access-Control-Allow-Headers: X-Requested-With');

   $u = strip_tags($_POST['username']);
   $p = strip_tags($_POST['password']);

   $con = mysql_connect("database","username","password");
   if (!$con)
   {
   die('Could not connect: ' . mysql_error());
   }
        mysql_select_db ("phpmy1_bumblast_com");
        $sorgu="SELECT * from users WHERE username ='$u' AND password ='$p' ";
        $ssql_select = mysql_query($sorgu)or die(mysql_error());
        if(mysql_num_rows($ssql_select)>0)
        {
           echo 'true';
        }else{
           echo 'false'; 
        }      
        mysql_close($con);
 ?> 
```

显然，我的计划是使这个“动态”（将`var values = $(this).serialize();`代码添加到我的“js”文件，然后将这些参数作为“my_post_data”传递），但我什至无法使用静态数据成功调用 PHP。它总是执行“失败”功能。更具体地说，它给了我这些消息“错误：[object Object]”。

我上传了我的测试站点，以防我无法通过 MAMP 发出这种请求，但它也失败了。

我的“测试”页面发布在这里：

[http://www.capitalbecarios.org/phonegap_tests/50login.html](http://www.capitalbecarios.org/phonegap_tests/50login.html)

此外，我还有一个“loginthisGET.php”用于测试目的（传递实际正确的用户名和密码，因此评估为“TRUE”）：

[http://www.capitalbecarios.org/phonegap_tests/js/loginthisGET.php?username=bloc&password=party](http://www.capitalbecarios.org/phonegap_tests/js/loginthisGET.php?username=bloc&password=party)

“50load-json.js”和“loginthisPOST.php”都位于“50login.html”所在的“js”文件夹中。

另外，为什么如果我这样做`$("#output").html('there is error while submit 1');`会显示它，然后又很快将其删除，因为它会刷新页面？

你能帮助这个无知的灵魂获得启蒙吗？

感谢您对本说明的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:03:07.073

**[更新]**当您使用 jQuery 时，请考虑使用[jQuery.post()](http://api.jquery.com/jQuery.post/)

```
$("#myform").submit( function () {
   var my_post_data = $("#myform").serialize(); 
   // Or = "username=bloc&password=party" for testing
   $.post("loginthis.php", my_post_data, function (msg){
       //A callback function for your post
       alert(msg);
   }); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:29:51.560

考虑`return false;`在提交处理程序中添加一个：

```
$("#myform").submit( function () { 
  var my_post_data = $("#myform").serialize();    
  $.post("loginthisPOST.php", my_post_data)
  .done(function(data) { alert("Data Loaded: " + data);})
  .fail(function(data) { alert("error: " + data); });
  return false;
}); 
```

发生的事情是发送了两个 POST 请求：您的`$.post();`和原始表单的提交。当第二个请求开始时，它会取消所有挂起的 XMLHttpRequest，为它们中的每一个生成一个“已取消”错误（从而进入失败函数）。这也是您在关闭错误警报时看到页面刷新的原因。

# jquery - jQuery Promises 不适用于多个 jqXHR

> ID：15249216
> 
> 赞同：1
> 
> 时间：2013-03-06T13:55:57.903
> 
> 标签：jquery

对于我的 jQuery 应用程序，我想实现延迟加载。因此我创建了一个对象，其中包含我所有的 jqXHR 承诺。

当我现在将所有内容组合成一个声明时

```
var resultset = new Object();
resultset.one = $.getScript('http://......');
resultset.two = $.getScript('http://......'); 
```

* * *

```
$.when(resultset.one,resultset.two).then(
function(){ alert('success')},
function(){alert('failure')}
); 
```

然后它总是进入错误状态。我不知道为什么，因为 js 调试器告诉，所有请求都很好（状态 200）。

JQ API 文档说明以下内容将起作用：

```
$.when($.ajax("/page1.php"), $.ajax("/page2.php"))
  .then(myFunc, myFailure); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:11:44.397

您可以使用带有 getScript() 的 Promise 并等到所有脚本都加载完毕，例如：

```
$.when(
    $.getScript( "/mypath/myscript1.js" ),
    $.getScript( "/mypath/myscript2.js" ),
    $.getScript( "/mypath/myscript3.js" )
).done(function(){

    //place your code here, the scripts are all loaded

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:19:25.800

这是一个很好的解释为什么：

> 的语法`$.when()`是[`$.when(one, or, more, deferreds)`](http://api.jquery.com/jQuery.when/)- 所以如果你想传递数组中的多个延迟，你需要 .apply() 因为你不想将方法调用构建为字符串并使用（在这种情况下`eval`这确实是**邪恶**的） .

[jQuery 中的 $.when.apply(null, a method) 是什么意思？](https://stackoverflow.com/questions/10345124/whats-the-meaning-of-when-applynull-a-method-in-jquery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:12:45.807

好的，我使用以下解决方法让它工作。--> 也许任何人都可以解释一下区别，好吗？

$.when.apply($, (resultset.one, results.two)).then(...);

# jquery - 长度的简单循环

> ID：15249229
> 
> 赞同：0
> 
> 时间：2013-03-06T13:56:42.187
> 
> 标签：jquery, loops

是的，这应该很容易，尽管它是在上午的早期，并且由于某种奇怪的原因，这没有正确解释。我有两个不同的代码，一个是出于不同的原因。第一个代码如下

第一个代码：

```
$(function(){
    var who = $('.buttonwrap').each();
     var what = who.children('ul');
      var when = what.children('li');
  for (var i = 0; i>when.length; i++ ) {
          $('.counter').html(when[i]);
        }
}); 
```

[http://jsbin.com/apugal/1/edit](http://jsbin.com/apugal/1/edit)

然后我有这个出于不同的原因

```
 $(function(){
   $('.topic_button').each(function() {
     var s = $(this).attr('value');
   $.get(s, function(data) { 
     var elem = $(data).find('.main-content .statused tr.bg').length;
   $('.counter').text(elem);
      }, 'html');
      });
     }); 
```

[与http://jsbin.com/apugal/1/edit](http://jsbin.com/apugal/1/edit)相同的 html 标记，但代码不同。

如果有人可以向我解释我做错了什么，我会尝试自己处理这段代码。如果它变得痛苦，我会寻求更多帮助。谢谢

编辑第二个代码！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:32:45.617

我查看了您提供的 jsbin 链接。

对于第一个代码，我做了以下事情，它似乎做了你想要的。（至少另一种看待它的方式；））

```
$(function(){
  var who = $('.buttonwrap').each(function(){
    var what = $(this).children('ul');
    what.each(function(){
      var when = $(this).children('li');
      $('.counter').text(when.length);
    });
  });
}); 
```

其次，您似乎正在尝试从每个`.topic_button`div中提取值，`$(this).attr('value');`但是，在查看标记时，没有“值”属性来获取值。

从给出的 html 中（只拿了第一个）：

```
<div class="buttonwrap">
  <div class=".topic_button">topic 1</div>
  <ul>
    <li>d</li>
    <li>f</li>
  </ul>
</div> 
```

此外，对于 HTML 中的类，这可能是一个拼写错误，只需`class="classname"`在名称前不使用句点即可。

# jquery-isotope - jquery Isotope - 滚动到中心单击放大的项目

> ID：15249232
> 
> 赞同：0
> 
> 时间：2013-03-06T13:56:52.813
> 
> 标签：jquery-isotope, scrollto

我是新来的（没有编码员，我是建筑师），但在过去的几个月里，我经常浏览这个地方，以找到解决我在为我们的建筑办公室建立新网站时遇到的几个问题的解决方案。该网站已经在线，但我仍然有一个问题，我想解决它，让它像我想要的那样工作。

在该站点中，我在几个地方以不同的方式使用了 jquery Isotope。但是对于我们的新闻部分，我使用同位素来显示可用的新闻站点。newsitem 由 xml 文件填充，当您单击图像时，newsitem 将放大并添加额外的文本信息，以及图像按钮等。因为项目正在扩大，所以需要重新布局光栅，并且经常在重新布局后新闻项目会移出视野。

为了解决这个问题，我想滚动到目标项目，然后再次关注它。我使用 Ariel Flesher 的 Jquery.ScrollTo 插件来解决这个问题（这在我们网站的投资组合部分非常有用）。问题是我不知道要滚动到哪个坐标。目前我正在使用使用图像的顶部作为占位符，这似乎很好，但是当我在重新布局命令之后设置滚动命令时，它仍然滚动到图像的旧位置，而不是重新滚动到的位置布局。

所以简而言之，我的问题是，如何在重新布局后获得新坐标，以将它们提供给滚动功能？

```
//          change newsitem from small to big
        $container.delegate('.element.crid_1 .img_container','click',function(){
            /* img src */               
            var ori = $('img', this).attr('src');
            if(ori != undefined){
                var string = $('img', this).attr('src');
                var bigpicture = string.truncate(-6)
                $('img', this).attr('src',bigpicture +'01.jpg');
                $('img', this).attr('width',512);
                $('img', this).attr('height',512);
            } 
            $(this).parent().toggleClass('featured not_featured');
            txt_height = $(this).parent().find('.text').height();                           
            new_height = manage_txt_heights(txt_height);    
            $(this).parent().find('.text').css({"height" : new_height + "px" });

            $container.isotope('reLayout');

            var imgoffset=$('img', this).offset().top ;
            var calculation = '+='+imgoffset+'px';
            $('#nieuwswrapper').scrollTo(calculation,800);
        }); 
```

上面的代码是我用来放大newsitem的，在重新布局命令之后，我已经为滚动行为添加了行。其中值 800 是滚动速度。

整个“工作”网页可在此处获得[网站新闻部分](http://www.bartduvekot.nl/nieuws.html)

提前感谢您的任何建议。简

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-17T19:38:26.197

您可以激活 ItemPositionData：

```
$('#container').isotope({
  itemSelector: '.element',
  itemPositionDataEnabled: true
})
// log position of each item
.find('.element').each(function(){
  var position = $(this).data('isotope-item-position');
  console.log('item position is x: ' + position.x + ', y: ' + position.y  );
}); 
```

[http://isotope.metafizzy.co/docs/options.html#itempositiondataenabled](http://isotope.metafizzy.co/docs/options.html#itempositiondataenabled)

# unix - 使用 C shell 别名变量，除了一个

> ID：15249239
> 
> 赞同：2
> 
> 时间：2013-03-06T13:57:40.583
> 
> 标签：unix, alias, csh

我想创建一个别名，它使用第一个 cli 变量作为某些东西的输入，并将其余变量放在最后，例如：

```
alias rerun '`head -n 2 \!:1/some_log_file.log | tail -n 1` \!:*' 
```

在示例中，我想使用第一个变量作为目录名称，最后使用所有其他变量（第一个变量除外），

编辑：我目前从上面的例子中得到的是：第一个参数按计划进入目录名称，所有参数都像这样结束（测试是包含日志文件的目录）：

```
% rerun test foo bar foo
<executed_cmd> test foo bar foo 
```

我想：

```
<executed_cmd> foo bar foo 
```

这样我就可以将额外的参数传递给执行的命令（无限制）

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:10:35.190

你想在别名中使用多个参数，你可以这样做：

*   `~/.bashrc`在（[或与`csh`](https://stackoverflow.com/a/2710848/1983854)）相关的函数中定义一个函数
*   在同一个文件中定义别名

例如：

```
myalias_func()
{
        ls -ltr $1 >> /tmp/$2
}
alias myalias=myalias_func 
```

在你的情况下，

```
rerun_func()
{
head -n 2 ...
}
alias rerun=rerun_func 
```

# java - 从 Object 到 Java 7 的未经检查的强制转换

> ID：15249240
> 
> 赞同：0
> 
> 时间：2013-03-06T13:57:44.040
> 
> 标签：java, eclipse, list, java-7

我现在不明白 Java 的错误在哪里。使用 Java 7。

```
public void chatMessage(String userName, String message) {
      IScope scope = Red5.getConnectionLocal().getScope();
      ISharedObject chat = getSharedObject(scope, "chat");
      List<ChatHistoryItem> history = (List<ChatHistoryItem>) chat.getAttribute("remoteHistory");
      ChatHistoryItem item = new ChatHistoryItem();
      item.user = userName;
      item.date = new Date();
      item.message = message;
      history.add(item);
      chat.setAttribute("remoteHistory", history);
    } 
```

错误 ：`Unchecked cast from Object to List<ChatHistoryItem>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:00:58.957

问题是因为您无法安全地确定`ISharedObject.getAttribute`方法调用将返回的类型。这发生在这一行：

```
List<ChatHistoryItem> history = (List<ChatHistoryItem>) chat.getAttribute("remoteHistory"); 
```

如果`object`此方法返回的不是类型`List<ChatHistoryItem>`，您将收到一个`ClassCastException`. 如果该方法确实返回了适当的类型，您的代码仍将执行。

我假设这不是破坏您的代码的错误，它只是来自您使用的 IDE 的警告？

# python - 如何将标量广播到熊猫数据框中的过滤列

> ID：15249241
> 
> 赞同：3
> 
> 时间：2013-03-06T13:57:44.797
> 
> 标签：python, pandas

我希望将表达式的结果广播到一个数据帧，但不是广播到整个列，只是广播到一个过滤的子集。下面的简化：

```
In [6]: df1 = DataFrame({"A":[1, 2, 3, 4], "B":["w", "x", "y", "z"], "C":(numpy.
zeros((4), dtype='S1'))})

In [7]: df1
Out[7]:
   A  B C
0  1  w
1  2  x
2  3  y
3  4  z 
```

所以 A 和 B 包含我现有的数据，C 列准备输入我的结果。所以我可以向整个专栏广播如下：

```
In [9]: df1['C'] = 'H'

In [10]: df1
Out[10]:
   A  B  C
0  1  w  H
1  2  x  H
2  3  y  H
3  4  z  H 
```

但是，如果我尝试将（在本例中为字母“R”）广播到过滤后的子集：

```
In [14]: (df1[df1['A'] > 2])['C']
Out[14]:
2    H
3    H
Name: C 
```

（只是为了证明过滤有效）

所以现在我尝试将“R”分配给这个子集..

```
In [12]: (df1[df1['A'] > 2])['C'] = "R"

In [13]: df1
Out[13]:
   A  B  C
0  1  w  H
1  2  x  H
2  3  y  H
3  4  z  H 
```

但是我的价值观保持不变:(（尽管有趣的是我没有收到错误！？）请任何人都可以提出一种我可以实现这一目标的方法吗？

非常感谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T14:19:07.937

首先选择列，然后过滤：

```
df1.loc[df1['A'] > 2, 'C'] = "R"

   A  B  C
0  1  w  H
1  2  x  H
2  3  y  R
3  4  z  R 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-07T10:46:01.793

正如一句话：在这种情况下，pandas 得到了很好的改进以发出警告：

```
In [8]: In [12]: (df1[df1['A'] > 2])['C'] = "R"
/Users/tismer/anaconda/bin/ipython:1: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the the caveats in the documentation: http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy
  #!/bin/bash /Users/tismer/anaconda/bin/python.app 
```

[点击阅读上面的熊猫链接](http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy)

# json - JSON 格式的 Lotus Domino 数据

> ID：15249243
> 
> 赞同：1
> 
> 时间：2013-03-06T13:57:48.807
> 
> 标签：json, encode, lotus-domino, quoted-printable

我的目标是能够以 JSON 格式从 notesdocument 中获取数据。我可以通过 URL 使用 Domino 数据服务来做到这一点。富文本字段被翻译成 HTML 但得到 contentTransferEncoding: "quoted-printable" 有什么办法可以避免这种情况吗？或者-我可以从文档中的所有类型的字段中获取json的另一种方法-使用XPages或java？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:05:42.040

也许[迈克尔尼尔森的 DomJson](http://www.openntf.org/p/DomJson)可以帮助你。它在功能上与 Domino 数据服务相似，但可能会提供您在富文本字段方面所需的功能。如果没有，那么您可以将其扩展到您的需求，因为它是开源的 :-)

# python-sphinx - 如何在 Sphinx globaltoc 侧边栏中包含所有文档？

> ID：15249244
> 
> 赞同：2
> 
> 时间：2013-03-06T13:58:01.457
> 
> 标签：python-sphinx, sidebar, tableofcontents, toctree

我希望将整个 TOC 中的每个文档都包含在 globaltoc 侧边栏中。我如何实现这一目标？

在主题文件中，有对 的调用`{{ toctree() }}`，但我不知道`toctree()`指的是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T00:22:37.683

您可以使用[sphinxcontrib-fulltoc](http://sphinxcontrib-fulltoc.readthedocs.org/en/latest/) sphinx 扩展在侧栏中包含完整的目录。

# gwt - 谷歌可视化：如何在列顶部显示一些图标

> ID：15249247
> 
> 赞同：1
> 
> 时间：2013-03-06T13:58:09.413
> 
> 标签：gwt, google-visualization

我的应用程序中有一个简单的条形图，我需要在我的条形顶部放置一些“.”、一些图标或其他任何东西。

这是代码：

```
DataTable data = DataTable.create();
data.addColumn(ColumnType.STRING, "Year");
data.addColumn(ColumnType.NUMBER, "Sales");
data.addRows(2);
data.setValue(0, 0, "Work");
data.setValue(0, 1, 14);
data.setValue(1, 0, "Sleep");
data.setValue(1, 1, 10);

BarChart barChart = new BarChart(data, options);
vpnl.setHeight("500px");
vpnl.add(barChart); 
```

这是输出，你可以在这里看到的黑色圆圈是我想在这个位置放置的，或者它可以是任何数字。

任何想法 ？

![代码生成的屏幕截图](../Images/24c8c685818982328b774479fefd4d16.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:13:56.703

目前不支持此功能。实现它的唯一方法是编写一些花哨的 javascript 来创建它。

我不是使用 javascript 处理 SVG 的专家，也不会假装是。我会让你知道我在 Firebug 中发现了什么，并与大家分享。

使用[此图表](http://code.google.com/apis/ajax/playground/?type=visualization#area_chart)，我检查了创建的 SVG 元素。它有 5 个不同的`<g>`（我假设是组）元素。

*   `g[1]`包含有关标题的信息。
*   `g[2]`包含图例
*   `g[3]`contains the chart information (sub-groups with the chart area, gridlines, series, axis label values, etc.) -- when a point is selected, this shows the circle/double-circle for that point too
*   `g[4]`包含轴标题
*   `g[5]`包含两个单独组中的工具提示，但仅在鼠标悬停时

这是当您将鼠标悬停在某个点时触发的代码中的函数：

```
Y.Ov=function(a,b,c){a=new kv(a);var d=this.Mf.pk(Wj);b=b[zc](sd);d[w](this.Mf[sb](b[0]));for(var e=1;e<b[L];++e)d[w](this.Mf.pk(ti)),d[w](this.Mf[sb](b[e]));Qt(d,c);a.t()[w](d);a.Zz(100);a.Yz(100);this.on[y](a);return a};Y.appendChild=function(a,b){if(b){var c;if(b[Bc]==Sv){if(!b.Th())return;c=b.t()}else c=b;a.t()[w](c)}};Y.replaceChild=function(a,b,c){a.t().replaceChild(b,c);Cu(c)};Y.Fg=function(a){a.Th()&&this.xs(a.t())};Y.xs=function(a){this.Mf.Fg(a)};Y.ds=function(a){this.Mf.removeNode(a);Cu(a)}; 
```

这可能对你没有帮助。我找不到任何简单的方法来为这个（哦，非常需要的）功能创建一个解决方法。抱歉还没有解决方案！

# javascript - 保护亚马逊存储桶中的 json 数据

> ID：15249251
> 
> 赞同：1
> 
> 时间：2013-03-06T13:58:19.123
> 
> 标签：javascript, json, amazon-s3

假设：我在亚马逊 s3 存储桶中有一些 json 文件。在同一个存储桶中，我有一个使用该 json 文件作为数据源的 html-js viewev。

我希望用户只能使用我的 html-js 查看器查看数据，而不是例如在本地下载 json 文件或使用第 3 方查看器。

有没有可能实现这样的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T17:55:58.977

这对于仅由静态 s3 存储桶提供的浏览器端代码是不可能的。无论您多么努力地混淆或加密数据，您仍然必须提供代码来解锁和显示它。

您可以（或多或少）确保他们必须查看您的广告的唯一方法是提供查看器本身的 HTML。如果您只是从 s3 存储桶中提供它，那么听起来这个 JSON 并没有太大变化。您可能只需使用广告预渲染 HTML 并将其放入 s3 存储桶中，而不是使用 json + html 查看器。

# xml - 使用 XML Schema 验证 XML 文档

> ID：15249256
> 
> 赞同：0
> 
> 时间：2013-03-06T13:58:41.597
> 
> 标签：xml, validation, xsd

好吧，在简短的版本中。老师给了我们测试的复习，​​它包含了 XML 模式（我们还没有在课堂上复习）。我正在阅读这一章，但很难弄清楚，因为这本书一次只提供代码片段。所以，我不知道应该如何把事情放在更大的图景中。

我们有一个像这样的 XML 文档

```
<enrollment>
  <semester>1128</semester>
  <student>
    <id>1000001</id>
    <lastname>Smith</lastname>
    <firstname>Joe</firstname>
    <courses>
      <course id="10001"/>
      <course id="10003"/>
    </courses>
    <tuition>200</tuition>
  </student>
</enrollment> 
```

我们必须创建一个具有这些验证的 XML 模式。

1.  可以有 0 到 10 门课程

2.  学费必须大于零且小于10,000。

3.  创建一个名为 CourseType 的自定义类型，用于验证课程 ID 属性是否正好包含 5 位数字。

这是我到目前为止的 XML 模式代码（不确定是否正确）。我非常有信心前两个是正确的。第三个没看懂

```
<xs:schema blah blah blah validation inputs>
<xs:element name="enrollment">
<xs:complexType>
  <xs:sequence>
    <xs:element name="courses">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="course"
          minOccurs="0"
          maxOccurs="10"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="tuition">
    <xs:simpleType>
      <xs:restriction base="xs:integer">
        <xs:minInclusive value="0"/>
        <xs:maxInclusive value="10000"/>
      </xs:restriction>
    </xs:simpleType>
  </xs:element>

    <xs:element name="Courses">
      <xs:complexType name ="Course">
      <xs:simpleContent>
        <xs:extension base ="xs:course ID">
          <xs:attribute name="id" type="CourseType">
          </xs:attribute>
        </xs:extension>
       </xs:simpleContent>
      </xs:complexType>
   </xs:element>
  </xs:sequence>  
</xs:complexType>  
</xs:element>

<xs:simpleType name="CourseType">
   <xs:restriction base="xs:integer">
   <xs:totalDigits value ="5"/>
   </xs:restriction>
 </xs:simpleType>
 </xs:schema> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:39:00.523

几个建议。

*   你说学费的限制是大于零小于一万。但是，您的声明使用了 minInclusive 和 maxInclusive 方面，它们允许值为零和一万；您可能需要考虑 minExclusive 和 maxExclusive 是否会更好地匹配要求。

*   totalDigits 方面确保 CourseType 值可以用五个或更少的十进制数字写入，但它不禁止值`1`、`-12345`或`0000000000001492`。约束“正好包含 5 个数字”暗示了对值的词法表示的约束。你能用模式刻面得到你需要的东西吗？

# jakarta-ee - 是否可以限制 Maven 构建的输出？

> ID：15249263
> 
> 赞同：2
> 
> 时间：2013-03-06T13:58:56.010
> 
> 标签：jakarta-ee, maven, maven-2, tdd

我所在的团队已经对我们的项目进行了 maven 化，并将 TDD 作为一种生活方式，但由于项目的庞大规模和我们的测试数量，我们的构建大约需要 15-20 分钟。我们拥有和我们一样多的测试覆盖率真是太棒了，但这并不是我们想要的快速转变。

当我们进行完整构建时，会有页面、页面、页面和页面发送到控制台，我知道写入控制台的成本可能很高。有没有办法**调整**maven 以减少一些输出？这甚至是一个问题，还是我应该寻找其他方法来缩短我们的构建时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T14:04:58.587

您假设写入控制台是瓶颈。是由 maven 编写的（例如许多插件调用、记录正在执行的测试）还是由我们自己的代码编写的？

如果您的代码输出过多，那么您应该在`src/test/resources`目录中部署一个日志配置文件（Log4j、Logback 等）并禁止所有日志输出。

如果您对 Maven 本身编写的内容感到困扰，请使用以下`-q`标志运行它：

> -q,--quiet 安静的输出——只显示错误

这至少可以让您验证写入控制台是问题所在（我不太确定）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-09T12:40:37.750

您是否也考虑过检查是否可以并行化您的 Maven 构建？默认情况下，Maven 不会利用硬件的全部功能。它按顺序而不是并行构建所有模块。**您可以通过 Maven 命令检查以分析您的项目，包括依赖关系图，并在可能的情况下并行构建项目。**您可以指定用于构建项目的确切线程数，也可以使用参数的可移植版本，并根据机器上可用的 CPU 指定线程数。

**mvn -T 4 install** -- 将使用 4 个线程

**mvn -T 1C install** -- 每个可用的 CPU 内核将使用 1 个线程。

虽然您的项目可能不容易并行构建，但值得一试，但速度提升可能很大。每个 CPU 内核使用一个线程是一个很好的默认设置。

# android - 使用时间戳保存文件

> ID：15249267
> 
> 赞同：0
> 
> 时间：2013-03-06T13:58:59.693
> 
> 标签：android, timestamp

我正在尝试使用时间戳作为名称来保存文件。当我自己命名文件时，我可以毫无问题地保存文件，但是当我尝试使用时间戳时它不起作用。这是我的代码：

```
 Long tsLong = System.currentTimeMillis()/1000;
        String ts = tsLong.toString();

        File newxmlfile = new File(Environment.getExternalStorageDirectory()
                 + ts);
        try {
            newxmlfile.createNewFile();
        } catch (IOException e) {
            Log.e("IOException", "exception in createNewFile() method");
        }

        FileOutputStream fileos = null;
        try {
            fileos = new FileOutputStream(newxmlfile);
        } catch (FileNotFoundException e) {
            Log.e("FileNotFoundException", "can't create FileOutputStream");
        } 
```

有谁知道如何做到这一点？

编辑（已解决）：我更改了下面的行，并使用时间戳将文件保存为 xml 文件。

```
File newxmlfile = new File(Environment.getExternalStorageDirectory()
                 ,ts + ".xml"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T14:02:27.133

我认为您正在使用无效路径创建文件。

当您进行字符串连接时：

```
Environment.getExternalStorageDirectory() + ts 
```

...您将时间戳添加`123456`到文件路径（类似）`/mnt/sdcard`。你最终会得到一个无效的路径，比如：

```
/mnt/sdcard14571747181 
```

（并且您无权写入该文件，因为它不在外部目录中。）

您可以自己添加文件分隔符，也可以使用以下命令创建文件：

```
File newxmlfile = new File(Environment.getExternalStorageDirectory(), ts);
                                                                    ^^
                                                                the change 
```

# css - Css 样式不会传递给表单内的标签

> ID：15249269
> 
> 赞同：0
> 
> 时间：2013-03-06T13:59:03.273
> 
> 标签：css

我有形式：

```
<form class="userForm">
...
</form> 
```

这个表单的内部是`fieldset`then `div`，而 div 的内部是`label`. 现在我想为这个表单内的所有标签创建 css：

我试试这个：

```
form.userform label {
    width: 150px;
} 
```

但没有成功

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:01:04.903

在没有看到更多代码的情况下，这个选择器是有效的。我认为您需要添加的是`display:block`标签，因为这不是块级元素。

```
 form.userform label {
      width: 150px;
      display: block;
 } 
```

现在宽度将可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:04:37.690

请尝试以下css代码：

```
.userForm label {
    width: 150px;        
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:40:10.867

检查您的大小写。将您的表单类名更改为`userform` **或**使用以下 CSS：

这应该有效：

```
form.userForm label {
  width: 150px;
} 
```

这也应该有效（就像 Girish 之前建议的那样）：

```
.userForm label {
  width: 150px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T14:42:18.423

尝试一下 。

```
.userform fieldset div label {
    width: 150px;
} 
```

# ruby - rubymine 4.5.4 可以运行 ruby 2.0 吗？

> ID：15249270
> 
> 赞同：1
> 
> 时间：2013-03-06T13:59:03.280
> 
> 标签：ruby, rubymine

有谁知道 ruby​​mine 4.5.4 是否支持 ruby​​ 2.0？我在 ruby​​mine 5.0.2 的补丁说明中看到了它，但我们的公司许可证不包括升级到 ruby​​mine 5.0.2。如果不需要的话，我不想下载 ruby​​ 2.0 来测试它（有搞砸测试套件的风险），但我想确保在测试人员开始升级 ruby​​ 并且无法运行它之前将其引起某人的注意我们的 IDE。

# c# - 如何处理 OdbcDataAdapter 中的长字符串

> ID：15249274
> 
> 赞同：1
> 
> 时间：2013-03-06T13:59:09.970
> 
> 标签：c#, .net, odbc

我正在将 ODBC 查询的结果读入 DataTable：

```
var result = new DataTable();
using (var connection = new OdbcConnection(connectionString))
{
    connection.Open();
    using (var cmd = new OdbcCommand(query, connection))
    {
        cmd.CommandTimeout = 180;
        using (var da = new OdbcDataAdapter(cmd))
        {
             da.Fill(result);//hangs here
        }
    }
} 
```

，但它不适用于其中一个字段是长字符串的记录（例如，粘贴了完整的电子邮件对话）。这样的查询永远不会返回，挂在 Fill 方法上并忽略超时。另一方面，Excel 在使用相同的 ODBC 源时可以正确读取这些记录。

我怎么能读这么长的字符串？

# c# - 使用 iTextSharp 添加新页面

> ID：15249276
> 
> 赞同：2
> 
> 时间：2013-03-06T13:59:18.197
> 
> 标签：c#, xml, pdf, itextsharp

我有一门课程可以为我的目录构建内容，而且效果很好，很漂亮。这是代码：

```
public void Build(string center,IDictionary<string,iTextSharp.text.Image> images)
    {
        iTextSharp.text.Image image = null;
        XPathDocument rapportTekst = new XPathDocument(Application.StartupPath + @"..\..\..\RapportTemplates\RapportTekst.xml");
        XPathNavigator nav = rapportTekst.CreateNavigator();
        XPathNodeIterator iter;

        iter = nav.Select("//dokument/brevhoved");
        iter.MoveNext();
        var logo = iTextSharp.text.Image.GetInstance(iter.Current.GetAttribute("url", ""));
        iter = nav.Select("//dokument/gem_som");
        iter.MoveNext();
        string outputPath = iter.Current.GetAttribute("url", "")+center+".pdf";
        iter = nav.Select("//dokument/titel");
        iter.MoveNext();
        this.titel = center;

        Document document = new Document(PageSize.A4, 30, 30, 100, 30);
        var outputStream = new FileStream(outputPath, FileMode.Create);
        var pdfWriter = PdfWriter.GetInstance(document, outputStream);
        pdfWriter.SetLinearPageMode();

        var pageEventHandler = new PageEventHandler();
        pageEventHandler.ImageHeader = logo;
        pdfWriter.PageEvent = pageEventHandler;

        DateTime timeOfReport = DateTime.Now.AddMonths(-1);

        pageWidth = document.PageSize.Width - (document.LeftMargin + document.RightMargin);
        pageHight = document.PageSize.Height - (document.TopMargin + document.BottomMargin);

        document.Open();
        var title = new Paragraph(titel, titleFont);
        title.Alignment = Element.ALIGN_CENTER;
        document.Add(title);

        List<TableOfContentsEntry> _contentsTable = new List<TableOfContentsEntry>();
        nav.MoveToRoot();
        iter = nav.Select("//dokument/indhold/*");
        Chapter chapter = null;
        int chapterCount = 1;
        while (iter.MoveNext())
        {
            _contentsTable.Add(new TableOfContentsEntry("Test", pdfWriter.CurrentPageNumber.ToString()));
            XPathNodeIterator innerIter = iter.Current.SelectChildren(XPathNodeType.All);
            chapter = new Chapter("test", chapterCount);
            while(innerIter.MoveNext())
            {                  
                if (innerIter.Current.Name.ToString().ToLower().Equals("billede"))
                {
                    image = images[innerIter.Current.GetAttribute("navn", "")];
                    image.Alignment = Image.ALIGN_CENTER;
                    image.ScaleToFit(pageWidth, pageHight);
                    chapter.Add(image);
                }
                if (innerIter.Current.Name.ToString().ToLower().Equals("sektion"))
                {
                    string line = "";
                    var afsnit = new Paragraph();
                    line += (innerIter.Current.GetAttribute("id", "") + " ");
                    innerIter.Current.MoveToFirstChild();
                    line += innerIter.Current.Value;
                    afsnit.Add(line);
                    innerIter.Current.MoveToNext();
                    afsnit.Add(innerIter.Current.Value);
                    chapter.Add(afsnit);
                }
            }
            chapterCount++;
            document.Add(chapter);
        }
        document = CreateTableOfContents(document, pdfWriter, _contentsTable);
        document.Close();           
    } 
```

然后我调用方法`CreateTableOfContents()`，因此它正在做它应该做的事情。这是该方法的代码：

```
public Document CreateTableOfContents(Document _doc, PdfWriter _pdfWriter, List<TableOfContentsEntry> _contentsTable)
    {
        _doc.NewPage();
        _doc.Add(new Paragraph("Table of Contents", FontFactory.GetFont("Arial", 18, Font.BOLD)));
        _doc.Add(new Chunk(Environment.NewLine));

        PdfPTable _pdfContentsTable = new PdfPTable(2);

        foreach (TableOfContentsEntry content in _contentsTable)
        {
            PdfPCell nameCell = new PdfPCell(_pdfContentsTable);
            nameCell.Border = Rectangle.NO_BORDER;
            nameCell.Padding = 6f;
            nameCell.Phrase = new Phrase(content.Title);
            _pdfContentsTable.AddCell(nameCell);

            PdfPCell pageCell = new PdfPCell(_pdfContentsTable);
            pageCell.Border = Rectangle.NO_BORDER;
            pageCell.Padding = 6f;
            pageCell.Phrase = new Phrase(content.Page);
            _pdfContentsTable.AddCell(pageCell);
        }
        _doc.Add(_pdfContentsTable);
        _doc.Add(new Chunk(Environment.NewLine));

        /** Reorder pages so that TOC will will be the second page in the doc
        * right after the title page**/
        int toc = _pdfWriter.PageNumber - 1;
        int total = _pdfWriter.ReorderPages(null);
        int[] order = new int[total];

        for (int i = 0; i < total; i++)
        {
            if (i == 0)
            {
                order[i] = 1;
            }
            else if (i == 1)
            {
                order[i] = toc;
            }
            else
            {
                order[i] = i;
            }
        }

        _pdfWriter.ReorderPages(order);
        return _doc;
    } 
```

然而问题是。我想在目录之前插入一个分页符，以便重新排序页面，以便目录自然是第一页。但是 pdf 文件的输出不正确。

这是它的样子： ![图片](../Images/96e198d4eacc7fbfa0dd48e0ee821b4f.png)

似乎方法中的`_doc.NewPage()`in`CreateTableOfContents()`没有正确执行。这意味着当该方法开始重新排序页面时，图像和目录仍然在同一页面上。

编辑：为了澄清上述内容，`_doc.NewPage()`执行，但在图片和目录之后添加了空白页。

我已经阅读了几个地方，这可能是因为有人试图在已经空白的页面之后插入新页面。但这种情况并非如此。

我也将链接到 pdf 文件，以更好地说明问题。

带目录的pdf：[带目录](http://freepdfhosting.com/326fe4967c.pdf)

没有目录的pdf：[没有目录](http://freepdfhosting.com/e4d8601349.pdf)

预先感谢您的帮助 ：）

# mysql - Mysql查询性能问题

> ID：15249277
> 
> 赞同：0
> 
> 时间：2013-03-06T13:59:18.717
> 
> 标签：mysql

我们在具有以下规格的专用服务器上运行我们的系统

*   双至强 2.8Ghz
*   8GB 内存
*   2 个 250GB 存储空间
*   1TB 每月数据传输

我所有的代码都在 php 中，数据库是 mysql

目前我们的数据库中有大约 50 万条记录；这可能每年至少增加 50 万

我正面临一个问题，即我们的一个主页的加载时间非常长。我注意到在他们的本地服务器上加载时间是 2 秒，在我们的服务器上是 18 秒。在本地服务器上使用相同的查询和服务器数据库的精确副本。

**您将采取哪些步骤来找出加载时间差异如此之大的原因？**

**通过我们系统的每个调用都被加载到数据库中。目前有 370k 条记录** 每个呼叫都与一个活动、资费和定价模型相关联。
我们的查询计算：

a) 每个活动的总通话次数，
b) 每个活动的总通话费用

问题在于，过去的大部分数据（通话费用）可以通过更新资费、定价、活动开始日期、结束日期等来改变。这导致了一些不稳定，因为表格包括通话费用 另一种方法是计算即时通话费用。所以每次有查询时都要在代码中计算。但是有 40 万条记录，而且每年可能会增加一百万条记录

做这个的最好方式是什么？请参阅下面的查询字符串：

a) 平台活动线索数据查询

```
SELECT c.tariff, c.campaign_name, c.ad_status, c.ad_control, cd.company, cd.customer_name, pm.pricing_model_name, c.start_date, c.end_date,
(
SELECT p.payment_date
FROM payments p
WHERE p.campaign_id = c.campaign_id
ORDER BY p.payment_date DESC
LIMIT 1) AS LastPaidOn,
(
SELECT p.payment_amount
FROM payments p
WHERE p.payment_status = 'Complete' AND p.campaign_id = c.campaign_id
ORDER BY p.payment_date DESC
LIMIT 1) AS LastPaidAmount,
(CASE WHEN NOW() BETWEEN c.start_date AND c.end_date THEN 'Live' ELSE 'Dead' END) AS STATUS,
(CASE WHEN c.group_name = c.campaign_id THEN '' ELSE c.group_name END)
 AS group_name_processed,
(
SELECT IFNULL(SUM(call_leads_purchased),0)
FROM payments
WHERE campaign_id = c.campaign_id AND payment_status = 'Complete') AS CallLeadsPurchased,
(
SELECT IFNULL(SUM(cd.call_leads_used),0)
FROM call_data cd
WHERE cd.campaign_id = c.campaign_id) AS CallLeadsUsed
FROM campaign_data c
JOIN customer_details cd ON cd.customer_id = c.customer_id
JOIN pricing_model pm ON pm.pricing_model_id = c.pricing_model_id
HAVING STATUS = 'Live'
ORDER BY c.campaign_name 
```

b) 仪表板查询

/*来电摘要*/

```
SELECT
(
SELECT SUM(call_leads_used)
FROM call_data cd
WHERE 1 = 1 AND cd.call_date >= '2010-03-06' AND campaign_id IN(6)) AS SummaryCallLeadsUsed,
(
SELECT COUNT(*)
FROM call_data cd
WHERE 1 = 1 AND cd.call_date >= '2010-03-06' AND campaign_id IN(6)) AS SummaryReceivedCalls,
(
SELECT COUNT(*)
FROM call_data cd
WHERE 1 = 1 AND cd.call_date >= '2010-03-06' AND campaign_id IN(6) AND cd.call_status = 'Unanswered') AS SummaryUnanswered,
(
SELECT SUM(call_leads_used)
FROM call_data cd
WHERE campaign_id IN(6)) AS TotalCallLeadsUsed,
(
SELECT SUM(call_leads_purchased)
FROM payments
WHERE campaign_id IN(6) AND payment_status = 'Complete') AS TotalLeadsPurchased 
```

/*对于饼图*/

```
SELECT
'Free Calls' AS TYPE, COUNT(*) AS calls
FROM call_data cd,
campaign_data cad
WHERE cd.campaign_id = cad.campaign_id AND cd.call_date >= '2010-03-06' AND cd.is_processed = 1 AND cd.applied_charges = 0 AND cad.customer_id = 6
GROUP BY cad.customer_id UNION
SELECT
'Charged Calls' AS TYPE, COUNT(*) AS calls
FROM call_data cd,
campaign_data cad
WHERE cd.campaign_id = cad.campaign_id AND cd.call_date >= '2010-03-06' AND cd.is_processed = 1 AND cd.applied_charges > 0 AND cad.customer_id = 6
GROUP BY cad.customer_id

/*For Calls per day chart*/
SELECT COUNT(*) AS calls, DATE_FORMAT(call_date, '%Y-%m-%d') AS call_day
FROM call_data cd,
campaign_data cad
WHERE cd.campaign_id = cad.campaign_id AND cd.call_date >= '2010-03-06' AND cd.is_processed = 1 AND cad.customer_id = 6
GROUP BY call_day
ORDER BY call_day

/*For total pages */
SELECT COUNT(*) AS expr
FROM call_data cd,
campaign_data cad
WHERE cd.campaign_id = cad.campaign_id AND cd.is_processed = 1 AND cd.call_date >= '2010-03-06' AND cad.customer_id = 6

/*Calls data*/
SELECT
cad.campaign_name,
cd.call_date,
cd.caller_id,
cd.call_duration,
cd.call_status,
cd.call_duplication,
cd.applied_charges
FROM call_data cd,
campaign_data cad
WHERE cd.campaign_id = cad.campaign_id AND cd.is_processed = 1 AND cd.call_date >= '2010-03-06' AND cad.customer_id = 6
ORDER BY cd.call_date DESC
LIMIT 0, 20 
```

# javascript - Textarea maxlength 值不起作用

> ID：15249278
> 
> 赞同：0
> 
> 时间：2013-03-06T13:59:19.660
> 
> 标签：javascript, html, dojo, textarea, maxlength

我有一个文本区域，我正在使用 DOJO 库从 JS 设置 maxlength。代码如下：

```
<textarea id="ct" rows="50" cols="50"></textarea> 
```

在 JS 中，最大长度设置如下

```
var el = dojo.byId('ct');
if(el) {
    dojo.attr(el,"maxLength",'2500');
    if (!('maxLength' in el)) {
        var max = el.attributes.maxLength.value;
        el.onkeypress = function () {
            if (this.value.length >= max)
                return false;
        };
    }
} 
```

我正在使用以下文本来填充 textarea。

```
Twitter's character limit is 140\. An SMS text message limit is 160\. Google AdSense ads can have 25 characters for the title, 70 characters for the ad text, and 35 characters for the displayed URL. N.B. a space or punctuation are a "character". Exercice: try to copy and paste portions of this text to count the number of letters.  * Even the cheapest online college demands a diploma. Studying an MBA program online or at online business schools requires a previous application where the number of letters is carefully controlled. Admissions to cheapest online college are regulated. Online business schools offer character counts in their advertising classes. An MBA program online offers a wide range of subjects, such as economics, organization, marketing, accounting, finance, strategic management, international business, management of information technology, human resources, and political strategies. Students work on a wide range of courses in the first year, then begin a specialization in the second. Specialization occurs through courses which are generally chosen by the student who wishes to explore a particular area (e.g. the market for finance options or pricing policies for marketing).  * An MBA program online is one of the best in the world. It forms effective frameworks and established many links with the business world. American universities have considerable financial means. For example, Harvard's capital is 34.9 billion. In a federal country like the United States, the university system is decentralized and higher education institutions enjoy considerable autonomy that allows them flexibility.  * Since the mid 1990s, the cheapest online colleges have undergone considerable consolidation. Many providers have gone out of business or were absorbed by larger groups. In 2005, there were 4,182 higher education institutions (colleges, universities, schools) in the United States, and approximately research 1,400 units. That represents the highest enrollment rate in higher education in the world. The two-year online colleges form the basis of tertiary education.  * Online business schools enables Programme graduates to start their professional career abroad. In fact, multiple exchange agreements in many countries place online business schools among the World's most successful. The schools also develop and expand their networks constantly with MBA. The cultural mix is commonplace in the business school, with more than one in three students being from overseas. P 
```

textarea 最多有 2500 个字符。但是当我在以下 URL 中粘贴相同的文本时，它显示 2501 个字符。这是因为文本中的 *。不知道是什么原因。

[字符串长度](http://www.string-functions.com/length.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:57:27.103

如果您将 maxLength 替换为 2499 ( `dojo.attr(el,"maxLength",'2499');`)，它应该可以工作！

这是因为你必须从 0 开始计数！

希望我对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:58:01.930

代替`var max = el.attributes.maxLength.value;`

您可以使用`var max = el.attributes.maxLength;` 现在完整的代码将是：

```
var el = dojo.byId('ct');
    if(el){
    dojo.attr(el,"maxLength",'2500');
    if (!('maxLength' in el)) {
var max = el.attributes.maxLength;
el.onkeypress = function () {
    if (this.value.length >= max) return false;
}; 
```

# sql - 按嵌套顺序的顶部结果排序

> ID：15249279
> 
> 赞同：1
> 
> 时间：2013-03-06T13:59:20.550
> 
> 标签：sql, entity-attribute-value

首先，我正在使用 EAV 数据库，所以当我说实体时，它与表相同。

我有一个“资产”实体，每个资产都有许多“报价”。每个报价都有一个价格属性。我想以最高价格退回每项资产的报价，并且也必须按最高价格订购。例如：

资产 1 有 3 个报价（a、b 和 c），价格为 4 美元（a）、7.25 美元（b）和 5 美元（c）

和

资产 2 有 2 个报价（d 和 e），价格为 9 美元（d）和 3 美元（e）

所以结果集应该如下所示：

```
Offer       Price       Asset  
d           $9           2  
b           $7.25        1 
```

我没有提供任何 SQL 的原因是因为我正在研究一个非关系数据库，其中所有内容都保存在 4 个表中——实体表、子类型表、元字符串和元数据。但我只想要概念上的答案，就好像这是一个关系数据库，我可以将它翻译成 EAV SQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:06:45.480

像这样的东西？

```
SELECT    data.Asset, data.Price, o.offerID
FROM      (
          SELECT o.assetID AS Asset, MAX(o.offer) AS Price
          FROM   assetTable AS a
                 INNER JOIN offerTable AS o
                     ON a.assetID = o.assetID    
          GROUP BY o.assetID
          ) data
          INNER JOIN offerTable AS o
              ON data.Asset = o.assetID
              AND data.Price = o.offer
ORDER BY  data.Price DESC, data.assetID 
```

# java - 发布表单时出错：列计数与第 1 行的值计数不匹配

> ID：15249281
> 
> 赞同：1
> 
> 时间：2013-03-06T13:59:24.820
> 
> 标签：java, mysql, jsp

我正在从表单中发送 5 个值，它们是名称、电子邮件、密码、确认密码和城市，但是当执行此代码时，我得到了指定的错误

代码：

```
 <%---<%@ page errorPage="addbookerror.jsp" %> --%>
<%@ page import="java.sql.*"  %>
 <%@ page import="bean.*" %>
<%@ page import="database.*" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

<title></title>
</head>
<body>
<jsp:useBean id="d" class="database.studentDAO" scope="page"></jsp:useBean>
<jsp:useBean id="s" class="bean.studentInfo" scope="page"></jsp:useBean>
<jsp:setProperty name="s" property="name" param="st_name"/>
<jsp:setProperty name="s" property="email" param="st_email"/>
<jsp:setProperty name="s" property="pwd" param="st_password"/>
<jsp:setProperty name="s" property="cpwd" param="st_confirm_password"/>
<jsp:setProperty name="s" property="city" param="st_city"/>
<%
d.addStudent(s);

%>

</body>
</html> 
```

错误：

```
org.apache.jasper.JasperException: An exception occurred processing JSP page /Admin/add_st_ac.jsp at line 20

17: <jsp:setProperty name="s" property="cpwd" param="st_confirm_password"/>
18: <jsp:setProperty name="s" property="city" param="st_city"/>
19: <%
20: d.addStudent(s);
21: 
22: %>
23: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-23T06:53:47.983

您能否显示您正在使用的学生数据库（数据库代码）的架构以及实际`addStudent`定义？

很可能您手动尝试在`addStudent`函数中构建查询，但无法填充所需的所有列。

# c# - 将 Git 信息字符串写入 exe 文件 C#

> ID：15249285
> 
> 赞同：6
> 
> 时间：2013-03-06T13:59:45.753
> 
> 标签：c#, git, logging, msbuild, mono

我需要将 git 信息：*提交名称、标签、分支等* 写入二进制 (exe) 文件。

需要运行字符串 * | grep git，在该文件上简单地查看有关它的最新 git 信息。我知道运行此命令（没有 grep）时会显示 AssemblyInfo，但我面临两个可能的问题：

1.  我不确定是否可以从代码写入 AssemblyInfo，运行“git log”命令，然后获取其输出并写入 AssemblyInfo。

2.  如果我想使用命令“git log”，那么它将无法在 Windows 上运行，但我的应用程序可能会构建在 Windows 上而不是 unix 环境上。

也许您知道另一种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:05:55.743

这通常在您的构建脚本中完成，填充您的 AssemblyInfo 的模板版本（查看 mustache，一种模板语言）。

此构建步骤执行以下操作：

*   使用 git 管道命令获取必要的信息（例如[，如何以编程方式确定当前签出的 Git 分支](https://stackoverflow.com/questions/1593051/how-to-programmatically-determine-the-current-checked-out-git-branch)）
*   使用模板生成 AssemblyInfo 文件。

然后您的软件构建将照常进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:31:53.263

Git windows 实现有一个 .net 包装器。一些备受瞩目的[项目](http://blogs.msdn.com/b/bharry/archive/2013/01/30/git-init-vs.aspx)使用此实现。 [https://github.com/libgit2/libgit2sharp](https://github.com/libgit2/libgit2sharp) , [http://libgit2.github.com/](http://libgit2.github.com/)

# css - 如何使用css调整搜索栏中的插入符号（闪烁光标）大小

> ID：15249288
> 
> 赞同：38
> 
> 时间：2013-03-06T13:59:49.050
> 
> 标签：css, searchbar

我试图用谷歌搜索它，但令人惊讶的是没有找到相关的结果......我想知道如何使用 css 来调整带有 CSS 的搜索框内的闪烁光标？我调整了搜索框的大小，但闪烁光标的大小似乎仍然是原始的小文本大小。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2017-07-19T06:04:39.950

你不能改变插入符号的宽度（至少现在是这样）；但是您可以更改大多数现代浏览器的插入符号颜色

[https://developer.mozilla.org/en-US/docs/Web/CSS/caret-color](https://developer.mozilla.org/en-US/docs/Web/CSS/caret-color)

```
input {
 caret-color: red;
 caret-color: #ff0000;
 caret-color: rgb(255, 0, 0);
 caret-color: hsl(0, 97%, 50%);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-06T17:14:54.780

搜索 Caret 而不是 Cursor 会给你更多的结果。

显然，这在 textarea 中是不可能的，但通过 Javascript 在其他元素中是可能的：

看一眼：

[如何使用 CSS 控制光标/插入符号的大小](https://stackoverflow.com/questions/6090893/how-to-control-cursor-caret-size-with-css)

[如何用css修改插入符号](https://stackoverflow.com/questions/6240735/how-to-modify-the-caret-with-css)

和

[样式化文本输入插入符号](https://stackoverflow.com/questions/7339333/styling-text-input-caret)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-01T11:31:46.947

目前无法设置插入符号的样式，但如果您使用另一个 DOM 元素来显示输入控件值，那么您可以。看看[如何在 HTML 输入字段中使用这个方形光标？](https://stackoverflow.com/questions/3758023/how-to-use-this-square-cursor-in-a-html-input-field)

[![样本](../Images/ea4044b95b872c5c41ba1372ef0356cf.png)](https://i.stack.imgur.com/qWBoZ.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-20T10:13:00.540

如果大写在您的上下文中是可以的，一个简单的技巧是使用 css 属性**font-variant: small-caps;** 使插入符号大于文本。

另一种方法是使用输入字段替换来创建自己的插入符号，有人花时间[完成了一些工作](https://benfrain.com/creating-a-custom-input-cursorcaret/)，但作者建议继续使用标准插入符号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-24T18:35:29.557

据我所知，没有直接的方法来设置插入符号的样式。相反，这里有一些有用的信息可以帮助您解决这些问题。

默认情况下，插入符号高度将采用字体高度，唯一不会的情况是，当指定行高时，它将采用此高度。

因此，如果您想修改插入符号的高度，您可以通过 font-size 或通过 line height 来完成，如果您不想更改字体大小。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2017-07-05T03:04:30.430

```
<style>
.input_strips {
font-family: monospace;

<!--change the font size this will change the input cursor and the text box-->
font-size: 30px; 
}
</style> 
```

# c# - 禁用通过 DataGridViewComboBoxColumn 滚动并通过 datagridview 滚动

> ID：15249291
> 
> 赞同：4
> 
> 时间：2013-03-06T14:00:03.670
> 
> 标签：c#, datagridview

我有一个带有两列（`DataGridViewTextBoxColumn`和`DataGRidViewComboBoxColumn`）的 DataGridView。如果我单击文本框列中的单元格并使用鼠标滚轮滚动，则网格会滚动。太棒了。

如果我单击组合框列中的单元格，鼠标滚轮将滚动组合框中的项目。我需要滚动datagridview。

在我尝试修复时，我可以通过处理`EditingControlShowing`事件来禁用组合框中的滚动：

```
private void SeismicDateGridView_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
{
     if (e.Control is IDataGridViewEditingControl)
     {
          dgvCombo = (IDataGridViewEditingControl) e.Control;

          ((System.Windows.Forms.ComboBox)dgvCombo).MouseWheel -= new MouseEventHandler(DGVCombo_MouseWheel);
          ((System.Windows.Forms.ComboBox)dgvCombo).MouseWheel += new MouseEventHandler(DGVCombo_MouseWheel);
     }
}

private void DGVCombo_MouseWheel(object sender, System.Windows.Forms.MouseEventArgs e)
{
     HandledMouseEventArgs mwe = (HandledMouseEventArgs)e;
     mwe.Handled = true;
} 
```

任何想法如何在`DataGridViewComboBox`列处于活动状态时滚动 DataGridView ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T17:13:42.147

您是否考虑过处理 ComboBox 的 DropDownClosed 事件并将焦点更改为父级？

```
void DateGridView_CellClick(object sender, DataGridViewCellEventArgs e)
{            
    System.Windows.Forms.ComboBox comboBox = dataGridView.EditingControl as System.Windows.Forms.ComboBox;
    if (comboBox != null)
    {
        comboBox.DropDownClosed += comboBox_DropDownClosed;
    }
}

void comboBox_DropDownClosed(object sender, EventArgs e)
{
    (sender as System.Windows.Forms.ComboBox).DropDownClosed -= comboBox_DropDownClosed;
    (sender as System.Windows.Forms.ComboBox).Parent.Focus();
} 
```

如果您想在选择单元格之前滚动 DataGridView，但 ComboBox 仍处于下拉状态，那将是另一种情况，但根据您在此处所说的判断：

> 如果我单击组合框列中的单元格，鼠标滚轮将滚动组合框中的项目。

我假设您只是想在做出选择后更改焦点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:37:51.750

[您可以像这里](http://www.codeproject.com/Articles/280310/Redirect-Mouse-Wheel-Events-To-Unfocused-Windows-F)一样使用 P/Invoke 重定向输入。或者您可以将 子类化`DataGridView`以向其添加一个`Scroll`调用基类方法的`OnMouseWheel`方法，然后您可以从`DGVCombo_MouseWheel`. [这里](http://www.codeproject.com/Tips/143450/How-to-scroll-a-parent-control-with-mouse-wheel-wh)的例子。

我认为第二个选项可能是最优雅的，没有理由使用 PInvoke。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-07T15:23:11.403

在这里它是通过内联函数完成的。并处理案例，当组合框被下拉时：

```
dgv.EditingControlShowing += (s, e) =>
    {
        DataGridViewComboBoxEditingControl editingControl = e.Control as DataGridViewComboBoxEditingControl;
        if (editingControl != null)
            editingControl.MouseWheel += (s2, e2) =>
                {
                    if (!editingControl.DroppedDown)
                    {
                        ((HandledMouseEventArgs)e2).Handled = true;
                        dgv.Focus();
                    }
                };
    }; 
```

# dynamic - Highcharts：如何从外部 JS 调整图表大小？

> ID：15249299
> 
> 赞同：2
> 
> 时间：2013-03-06T14:00:25.590
> 
> 标签：dynamic, size, highcharts

我在一个页面上有两个图表，它们的代码存储在不同的文件中。我想要实现的是：当我点击第一个图表时，第二个应该改变它的大小（较低的高度和宽度）。应该执行此操作的函数在另一个文件中（但我认为这不是条件）...我试图更改包含 div 的宽度，但它只会剪切图表。然后我尝试更改该 div 的宽度，然后再次加载该图表......没有结果......甚至可以这样做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T10:29:02.410

使用[setSize()](http://api.highcharts.com/highcharts#Chart.setSize%28%29)函数。

例如：

```
 chart.setSize(newWidth, newHeight); 
```

# html - HTML 未触及浏览器顶部

> ID：15249300
> 
> 赞同：2
> 
> 时间：2013-03-06T14:00:33.607
> 
> 标签：html, css

我的网站没有触及浏览器的顶部。顶部的空隙很小。

坦率地说，身体没有接触到窗户的顶部，我希望它接触到顶部。

**HTML：**

```
<div id="container">
    <div id="header">
        <h1>
            Example
        </h1>
    </div>
    <div id="navigation">
        <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">Services</a></li>
            <li><a href="#">Contact us</a></li>
        </ul>
    </div>
</div> 
```

**CSS：**

```
#container
{
    margin: 0 auto;
    width: 350px;
    background: #fff;
    float: left;
}

#header
{
    background: #ccc;
    padding: 20px;
}

#header h1 { margin: 0; }

#navigation
{
    float: left;
    width: 350px;
    background: #333;
}

#navigation ul
{
    margin: 0;
    padding: 0;
}

#navigation ul li
{
    list-style-type: none;
    display: inline;
}

#navigation li a
{
    display: block;
    float: left;
    padding: 5px 10px;
    color: #fff;
    text-decoration: none;
    border-right: 1px solid #fff;
}

#navigation li a:hover 
{ 
    background: #383; 
} 
```

这是示例：

[http://jsfiddle.net/deerox/YxwqX/](http://jsfiddle.net/deerox/YxwqX/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T14:01:57.473

**快速修复**，将 body 和 html 标签风格化，如下所示：

```
html, body
{
    margin: 0;
    padding: 0;
} 
```

**进一步阅读，CSS重置：**

CSS 重置（或“重置 CSS”）是一组简短的、通常压缩（缩小）的 CSS 规则集，可将所有 HTML 元素的样式重置为一致的基线。

如果您不知道，**每个浏览器都有自己的默认“用户代理”样式表**，用于使无样式的网站看起来更清晰。例如，大多数浏览器默认将链接设置为蓝色，将访问链接设置为紫色，为表格提供一定数量的边框和填充，对 H1、H2、H3 等应用可变字体大小，并为几乎所有内容设置一定数量的填充。有没有想过为什么提交按钮在每个浏览器中看起来都不一样？

显然，这给 CSS 作者带来了一定程度的头痛，他们无法弄清楚如何使他们的网站在每个浏览器中看起来都一样。（注意：即将发布关于为什么这是一个错误概念的文章！）

使用 CSS 重置，CSS 作者可以强制每个浏览器将其所有样式重置为 null，从而尽可能避免跨浏览器的差异。

*（[来源](http://www.cssreset.com/what-is-a-css-reset/)）*

**资源：**

我正在使用[HTML5 reset](https://raw.github.com/murtaugh/HTML5-Reset/master/_/css/style.css)，这是我的最爱。

其他常用的重置技术可以在 [http://cssreset.com/的首页一起找到](http://cssreset.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T14:05:39.303

并非所有浏览器都以相同的方式处理 HTML 元素。

您应该使用重置 css 文件来撤消浏览器的样式。（只需[google](http://www.google.com)进行[css 重置](http://www.google.com?q=css%20reset)）

在这种情况下，它是`<body>`在您的浏览器中具有标准边距/填充的标签。

```
body {
    margin:0;
    padding:0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:04:08.823

采用

```
html,body{
    padding:0px;
    margin:0px;
} 
```

看来您是 CSS 新手。您可能必须使用 CSS 浏览器重置来实现跨浏览器兼容的设计。

# javascript - 浏览器扩展导致网站出现错误

> ID：15249303
> 
> 赞同：2
> 
> 时间：2013-03-06T14:00:39.237
> 
> 标签：javascript, html, google-chrome-extension, internet-explorer-9

Chrome 和 IE 上安装的扩展程序有时会导致我的网站出现错误。我希望扩展不会影响我的网站，我可以用 JavaScript 阻止它们吗？而且我知道这听起来有点愚蠢:) 无论如何，欢迎提出任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:25:49.013

您不能使用 javascript 阻止扩展，但您可以检查用户是否安装了某个扩展并显示有关扩展的警告或错误，例如“启用 XY 时上传将不起作用”

如何做到这一点已经在 SO 上讨论过了

[检查用户是否安装了 Chrome 扩展程序](https://stackoverflow.com/questions/6293498/check-whether-user-has-a-chrome-extension-installed)

[如何使用 JavaScript 检测是否已安装 Internet Explorer 插件](https://stackoverflow.com/questions/8818736/how-to-detect-if-an-internet-explorer-plugin-is-already-installed-using-javascri)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:43:39.053

不，没有任何方法可以阻止网页中的扩展程序。

# jquery - 使用 ajax 和 spring mvc 的相关选择框

> ID：15249304
> 
> 赞同：0
> 
> 时间：2013-03-06T14:00:41.703
> 
> 标签：jquery, ajax, spring-mvc

我有 2 个下拉菜单的问题（第二个框选项取决于当前选择的第一个框选项）。我现在拥有的是： **控制器**：

```
@Controller
@RequestMapping(ADMINISTRATION)
{...}
    @RequestMapping(value = USERS + STUDENT + "/reloadGroups/{schoolId}", method = GET)
    public @ResponseBody
    List<StudyGroup> reloadGroups(@PathVariable(value = "schoolId") final int schoolId) {
        return studyGroupService.getStudyGroupBySchool(schoolService.getSchool(schoolId));
    } 
```

**html**：

```
 <script type="text/javascript">
                $(document).ready(
                    function() {
                        var selectSchool = $("#school");
                        var selectGroup = $("#studyGroup");

                        selectSchool.change(function() {
                            var schoolId = $("#school option:selected").val();

                            $.get("/administration/users/student/reloadGroups/"
                                    + schoolId, function(data) {
                                selectGroup.empty();
                                console.log(data);
                                var group = JSON.parse(data);
                                for ( var option in data) {
                                    selectGroup.append($("<option/>", {
                                        text : group[option].name,
                                        key : group[option].id
                                    }));
                                }
                            })

                        })
                    });
</script>
    //and of course 2 select boxes with ids 'school' and 'studyGroup' 
```

我收到如下错误：

```
"NetworkError: 404 Not Found - http://localhost:8080/administration/users/student/reloadGroups/2" 
```

但我不知道为什么，请求映射应该没问题。例如，当我在浏览器中输入`http://localhost:8080/drdiet-web/administration/users/student/reloadGroups/1`错误更改为 500 时：

```
"NetworkError: 500 Internal Server Error - http://localhost:8080/drdiet-web/administration/users/student/reloadGroups/1" 
```

有什么问题？我是阿贾克斯的新手。

**编辑**

这之前“有效”，但不完全是，因为我只能更改第一个下拉值，因此它影响了第二个可用选项：

```
 $(document).ready(function() {
        var selectSchool = $("#school");
        var selectGroup = $("#studyGroup");

        selectSchool.change(function(){
                var schoolId = $("#school option:selected").val();

            $.ajax({
            url: config.baseUrl + '/administration/users/student/reloadGroups/' + schoolId,
            type: 'GET',
            data: schoolId,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            dataType: 'text',
            error : function() {
                alert("error");
                console.log("error");
            },
            success: function(data){
                selectGroup.empty();
                var aaa = JSON.parse(data);
                console.log(data);
                alert("ok");
                for(var opt in aaa){
                    selectGroup.append($("<option/>", {
                        text: aaa[opt].name,
                        key: aaa[opt].id
                    }));
                console.log(aaa[opt]);
                }
            }
            })
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:07:27.700

好的，错误 404 非常明显（`config.baseUrl`）。内部服务器错误（代码 500）是由控制器中不同类型的列表引起的。只是没看出来，谢谢大家的回复。

# django - 抽象模型中的Django条件定义模型字段

> ID：15249306
> 
> 赞同：2
> 
> 时间：2013-03-06T14:00:43.170
> 
> 标签：django, django-models, django-orm

我的项目中有一个抽象模型，我想用它在具体子类上默认定义一个字段，但也允许将该字段动态重新定义为默认值以外的其他内容。所有这些现在都有效：

```
class classproperty(object):
    """
    Decorator for making class properties
    """
    def __init__(self, fget):
        self.fget = fget

    def __get__(self, owner_self, owner_cls):
        return self.fget(owner_cls)

class BaseModel(models.Model):
    class Meta(object):
        abstract = True

    @classproperty
    def _special_attribute_field(self):
        return getattr(self, '_bm_special_attribute_field', 'default')

    @property
    def bm_special_attribute(self):
        return getattr(self, self._special_attribute_field) 
```

...然后有一堆方法使用后两个函数来确定要访问哪个字段。

问题是，现在，继承自的类`BaseModel`必须显式定义该`default`字段，即使它们不`_bm_special_attribute_field`用于指定默认值以外的其他内容。我想做的是以编程方式定义`default`具体子模型，前提*是*这些模型不用于`_bm_special_attribute_field`将其更改为其他东西，在这种情况下，它们应该带来自己的字段。有没有办法做到这一点，也许是元类？关键是它不能破坏 Django 机器。

# vim - vimrc 中使用 or 运算符的异常行为

> ID：15249309
> 
> 赞同：1
> 
> 时间：2013-03-06T14:00:52.157
> 
> 标签：vim, grep

我通常在 vim 中进行搜索和替换，如下所示：

```
:%s/\([\.!?]\|[\.!?]"\)\s\s/\1text /g 
```

因此，它会查找句点、感叹号、问号或上述任何一种，后跟引号和两个空格。它工作正常。

但是当我像这样在我的vimrc中映射它时

```
map <F4> :%s/\([\.!?]\|[\.!?]"\)\s\s/\1text /g<CR> 
```

然后按 F4 我收到此错误消息：

```
E486: Pattern not found: \([\.!?]|[\.!?]"\)\s\s 
```

由于某种原因，它正在删除管道前的反斜杠，我不知道为什么。有谁知道如何纠正这种行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T14:14:32.340

在`:map`ping 中，管道字符是特殊的。改用`<Bar>`：

```
:noremap <F4> :%s/\([\.!?]\<Bar>[\.!?]"\)\s\s/\1text /g<CR> 
```

此外，[您应该使用`:noremap`](http://learnvimscriptthehardway.stevelosh.com/chapters/05.html); 它使映射不受重新映射和递归的影响。

# ruby - 用于检查系统函数输出中的字符串更改的循环（监视 DNS 更新）

> ID：15249313
> 
> 赞同：0
> 
> 时间：2013-03-06T14:01:05.407
> 
> 标签：ruby, monitoring

我正在切换 DNS 服务器，我想编写一个简短的 ruby​​ 脚本，该脚本每 10 秒运行一次，并在我的网站解析为不同的 IP 后立即触发本地 Mac OS X 系统通知。

使用[终端通知器](https://github.com/julienXX/terminal-notifier)发送系统通知就这么简单

```
terminal-notifier -message "DNS Changed" 
```

我想在输出后立即触发它

```
ping -i 10 mywebsite.com 
```

... 更改或不再包含已定义的 IP 字符串。

```
> 64 bytes from 12.34.56.789: icmp_seq=33 ttl=41 time=241.564 ms 
```

在本例中为“12.34.56.789”。

*   如何监控*ping -i 10 mywebsite.com*的输出字符串的变化，并在检测到变化后调用通知函数？

我认为在等待 DNS 更新时这可能是一个不错的做法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:31:50.243

尝试这个：

```
IP = "12.34.56.789"
p = IO.popen("ping -i 10 mywebsite.com")
p.each_line do |l|
  if(! l =~ /from #{IP}/) #The IP has changed
    system("terminal-notifier -message \"DNS Changed\"")
  end
end 
```

# assembly - 在 TASM 中将“$”添加到数组时出现 NTVDM 错误

> ID：15249315
> 
> 赞同：0
> 
> 时间：2013-03-06T14:01:09.863
> 
> 标签：assembly, tasm, sentinel, ntvdm

```
ideal
model small
stack 1024
dataseg
    array1 db 11 dup(?)
codeseg
org 100h
PROC MAIN
    CALL GETINPUT
    CALL PRINTARRAY
EXIT:
    mov ah, 4ch
    int 21h
ENDP

PROC PRINTARRAY
    lea dx, [array1]
    mov ah, 9
    int 21h
    ret
ENDP

PROC GETINPUT
    mov bx, offset array1
    GET:
        CALL GETCHAR
        cmp al, '.'
        je ENDGET
        mov [array1+bx], al
        inc bx
        cmp bx, 10
        jge ENDGET
        CALL PRINTSPACE
        jmp GET
    ENDGET:
    mov [array1+bx], '$'
    ret
ENDP

PROC GETCHAR
    mov ah, 1
    int 21h
    ret
ENDP

PROC PRINTSPACE
    mov dl, ' '
    mov ah, 2
    int 21h
    ret
ENDP

PROC PRINTCHAR
    mov ah, 2
    int 21h
    ret
ENDP

END MAIN 
```

添加“$”时出现 NTVDM 错误 cs:0423 ip:0125。没有哨兵，我无法打印没有垃圾和其他字符的数组。:( 我不知道是因为我的操作系统、windows 7 32bit 还是汇编程序。请帮助我。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:05:42.620

看这两条指令：

```
mov bx, offset array1
GET:
    ...
    mov [array1+bx], al 
```

您获取地址`array1`然后将其添加到自身中，这对您来说是不是很奇怪`array1+bx`？

# asp.net - 如何有条件地应用浏览器的兼容模式以在 asp.net 中使用 7 或 9？

> ID：15249317
> 
> 赞同：0
> 
> 时间：2013-03-06T14:01:12.653
> 
> 标签：asp.net, internet-explorer, cross-browser, ie8-compatibility-mode

我有一个在 IE7、8 兼容模式、Chrome、Firefox 等下工作的 JavaScript。唯一的问题是这个脚本在 IE8 和 IE9 中不起作用。任何想法？

所以，我想在页面、`<Head>`部分中设置运行时的文档兼容模式。如何有条件地设置兼容模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:33:01.027

我建议修复你的 JavaScript。从长远来看，你会为自己省去很多麻烦。

如果您对保留脚本原样不动，您可以使用 X-UA-Compatible 元标记（请参阅[META Tags and Locking in Future Compatibility](http://msdn.microsoft.com/en-us/library/cc817574.aspx)）。这**应该**使您的 JavaScript 工作（不保证！）。

如果你想在运行时设置它，你可以在你的页面上声明它：

```
<meta id="comp" http-equiv="X-UA-Compatible" runat="server" /> 
```

并将其设置在代码隐藏中

```
comp.Content = "IE=EmulateIE7"; 
```

其他浏览器只是忽略标签，所以你可以像这样把它放在你的页面上：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" /> 
```

# php - 带通配符的 PHP 正则表达式

> ID：15249322
> 
> 赞同：2
> 
> 时间：2013-03-06T14:01:34.170
> 
> 标签：php, regex, regex-lookarounds

我在 PHP 中有两个字符串：

```
$string  = '<a href="http://localhost/image1.jpeg" /></a>'; 
```

和

```
$string2 = '[caption id="attachment_5" align="alignnone" width="483"]<a href="http://localhost/image1.jpeg" /></a>[/caption]'; 
```

我正在尝试匹配第一种类型的字符串。那是没有被'[caption ...]'和'[/caption]'包围的字符串。到目前为止，我想使用这样的东西：

```
$pattern = '/(?<!\[caption.*\])(?!\[\/caption\])(<a.*><img.*><\/a>)/'; 
```

但是 PHP 也将第一个字符串与此模式匹配，即使它前面没有 '[caption' 和零个或多个字符后跟 ']'。是什么赋予了？为什么会这样，正确的模式是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:16:26.060

PHP 不支持可变长度后视，因此您的这部分模式无效：

```
(?<!\[caption.*\]) 
```

它应该警告你这一点。

此外，`.*`总是匹配尽可能大的数量。因此，您的模式可能会导致匹配重叠多个标签。相反，使用`[^>]`（匹配任何不是右括号的内容），因为右括号不应出现在`img`标记内。

为了解决后视问题，为什么不只检查结束标签呢？这应该足够了（假设标题标签的使用方式与您所展示的类似）。

```
$pattern = '|(<a[^>]*><img[^>]*></a>)(?!\[/caption\])|'; 
```

*匹配包含 的模式时`/`，请使用另一个字符作为模式分隔符以避免倾斜牙签综合症。您可以在模式周围使用几乎任何非字母数字字符。*

**更新：**之前的正则表达式是基于您提供的示例正则表达式，而不是示例数据。如果要匹配不包含图像的链接，请执行以下操作：

```
$pattern = '|(<a[^>]*>[^<]*</a>)(?!\[/caption\])|'; 
```

请注意，这不允许链接中间有*任何*标签。如果您允许使用标签（例如使用`.*?`），则正则表达式可以匹配从 the 开始`[caption]`并在其他地方结束的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:23:18.780

我看不出您的正则表达式如何匹配任一字符串，因为您正在寻找`<a.*><img.*><\/a>`，并且两个锚点都不包含`<img...`标签。此外，寻找和禁止`caption`-bits 的两个子表达式在我看来位置很奇怪。最后，您需要确保您的标签匹配位不会贪婪，即不要使用`.*`but `[^>]*`。

你的意思是这样的吗？

```
$pattern = '/(<a[^>]*>(<img[^>]*>)?<\/a>)(?!\[\/caption\])/' 
```

[在regex101](http://regex101.com/r/sH3aM5)上测试它。

**编辑：**根据 dan1111 的建议删除了无用的前瞻并更新了 regex101 链接。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T14:21:57.763

Lookbehind 不允许非固定长度模式，即 (*,+,?)，我认为这`/<a.*><\/a>(?!\[\/caption\])/`足以满足您的要求

# php - PHP sleep（）无法正常工作，我希望重定向

> ID：15249323
> 
> 赞同：0
> 
> 时间：2013-03-06T14:01:37.943
> 
> 标签：php, echo, sleep

我有一个表单，在提交时会检查数据。如果数据无效，我目前有它回显文本。

我希望它回显文本然后暂停并重定向。

我试过 sleep(); 但这会导致页面在提交时休眠，等待 x 秒然后继续而不显示回显

关于如何解决这个问题的任何想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:04:27.057

正常发送您的错误消息并在 x 秒后使用元刷新进行重定向：

```
<?php

// your code that determines there is an error goes here

header('Refresh: 10;url=your_page.php');

echo $errorMessage; 
```

该`header()`调用与此元标记相同：

```
<meta http-equiv="refresh" content="10;URL='your_page.php'"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T14:04:35.560

一个简单的（虽然公认是相当老式的）解决方案是输出元刷新，作为在一段时间后重新引导用户的一种方式。（以下示例中为 5 秒。）

```
<meta http-equiv="refresh" content="5;URL='http://dest.url/whereever/'"> 
```

这就像任何其他元标记一样位于 HTML 头部。（有关更多信息，请参阅[维基百科](http://en.wikipedia.org/wiki/Meta_refresh)页面。）

# image - 字体真棒图像叠加

> ID：15249325
> 
> 赞同：7
> 
> 时间：2013-03-06T14:01:40.997
> 
> 标签：image, overlay, zurb-foundation, font-awesome

我目前正在创建一个图像库（使用 Zurb Foundation 作为框架），并希望在图像悬停时显示缩放图标（如此示例：http: [//codepen.io/Twikito/pen/Jeaub](http://codepen.io/Twikito/pen/Jeaub)）。但我希望该图标是一个字体（Font Awesome）图标，而不仅仅是一个，而是 3 个单独的可点击图标。这可能吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-22T19:33:09.470

我使用 font-awesome将一个[快速的 JSfiddle放在一起。](http://jsfiddle.net/fTdRS/)CSS 被破解在一起，但演示了什么是可能的。它应该给你一个尝试的起点。

```
<a href="#" title="" class="image">
  <img src="http://www.lyricis.fr/wp-content/uploads/2010/04/kickass-film-still-01.jpg" alt="">
</a>

<div class="cn">
   <div class="inner">
      <a href="#zoom"><i class="icon-zoom-in large"></i></a>
      <a href="#download"><i class="icon-cloud-download large"></i></a>
      <a href="#comment"><i class="icon-comment large"></i></a>  
   </div>
</div> 
```

注意：上面的 JSfiddle 使用从[bootstrapcdn.com外部调用的 font-awesome.css](http://www.bootstrapcdn.com/)

# javascript - 元素中的“增量”CSS 类

> ID：15249327
> 
> 赞同：0
> 
> 时间：2013-03-06T14:01:44.683
> 
> 标签：javascript, jquery, css

让我们假设我们有一个 div 元素`#a-node`和一个 javascript 方法创建一个或多个其他 div 被调用`.b-node`（首先不需要在这个内部）并且它也添加一个`#a-node`class `.b-node-enabled`。

存在一种方法来切换/打开`.b-node-enabled`仅当存在`.b-node`专门连接到`#a-node`？

例子：

*   如果没有人`.b-node`连接`#a-node`，则关闭课程；
*   如果一个或多个`.b-node`与 连接`#a-node`，则打开类；

如果需要和`-webkit`功能，我可以使用 jQuery。

**真正的问题**

我有一个创建背景的 div 弹出窗口，我需要在主要内容主体上打开一个类（不在此弹出窗口内，反之亦然，也只是附加到主体），我可以启用多个弹出窗口在同一时间。我只需要关闭`.b-node-enabled`如果没有弹出窗口显示。

```
<body>
    <!-- MAIN CONTENT -->
    <div id="a-node" class="b-node-enabled">...</div>
    <!-- POPUPS -->
    <div class="b-node">...</div>
    <div class="b-node">...</div>
    <div class="b-node">...</div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:12:14.943

我不知道我是否真的理解你的问题，但也许这个代码片段可以帮助你（需要 jQuery）。

```
function updateANodeClass() {
    if ($(".b-node").length) {
        $("#a-node").addClass("b-node-enabled");
    } else {
        $("#a-node").removeClass("b-node-enabled");
    }
} 
```

添加或删除一个后`.b-node`，您必须调用该函数来更新类。

# php - 8小时重命名php会话30分钟后丢失数据

> ID：15249328
> 
> 赞同：0
> 
> 时间：2013-03-06T14:01:44.930
> 
> 标签：php, session, session-timeout

我的默认 PHP 会话是 30 分钟。

我得到了第一个代码：

```
<?php
session_set_cookie_params(28800);
session_name('TEST');
session_start();
session_regenerate_id(true);

$_SESSION['test'] = 'jam';
?> 
```

而这第二个：

```
<?php
session_set_cookie_params(28800);
session_name('TEST');
session_start();
session_regenerate_id(true);

echo $_SESSION['test'];
?> 
```

事实是，我的会话在 30 分钟没有活动后丢失。

定时示例：

```
00:00 : run first script
00:10 : run seconde script : i got "jam"
00:20 : run seconde script : i got "jam"
00:40 : run seconde script : i got "jam"
01:11 : run seconde script : session is lost 
```

希望你能给我任何线索来解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:06:01.730

在 PHP Manual 中的页面上查看[此答案](http://www.php.net/manual/en/function.session-set-cookie-params.php#109077)，看看`session_set_cookie_params()`是否对您有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:07:07.843

Cookie 的生命周期只是方程式的一部分。服务器端会话存储是另一个。确保它[`session.gc_maxlifetime`](http://www.php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime)也设置得足够高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:09:51.967

您只是设置 cookie 的生命周期，与会话数据的实际生命周期无关。如果您使用将会话保存到文件系统的默认会话保存处理程序，则会话数据的生命周期由[session.gc_maxlifetime](http://www.php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime)指令控制。[您可以使用ini_set](http://php.net/ini_set)覆盖此值，如下所示：

```
ini_set('session.gc_maxlifetime', 28800); 
```

请注意，如果您还有其他使用会话的脚本并且它们共享相同的会话保存路径，那么最小 gc_maxlifetime 将用于该目录中的所有会话。因此，如果您想更改 gc_maxlifetime 值，这通常意味着您还想指定自己的会话存储路径。您可以使用[session_save_path](http://www.php.net/manual/en/function.session-save-path.php)函数执行此操作：

```
session_save_path('/path/to/your/sessions'); 
```

# python - Dropbox SDK 的 Python 安装失败

> ID：15249331
> 
> 赞同：2
> 
> 时间：2013-03-06T14:01:51.657
> 
> 标签：python, windows, sdk, python-2.7, dropbox

我和这里有同样的问题。

[Windows 7 上的 Dropbox Python SDK 安装错误（无法创建“构建”）](https://stackoverflow.com/questions/14596744/dropbox-python-sdk-installation-error-on-windows-7-could-not-create-build)

用户没有说他们是如何解决这个问题的（我已经尝试重新开始，并重新安装 Python）。我要求用户详细说明，我的帖子被删除了，因为我没有回答这个问题。对不起，我是新来的。但是重新发布对我来说似乎违反直觉。

开始...

我安装了 Python 2.7，然后下载并尝试运行 Dropbox Python SDK 的 setup.py。

它要求我添加 setuptools，所以我做了，然后尝试从 CMD 安装 Dropbox setup.py。之后我得到了以下...

```
C:\Python27\dropbox-python-sdk-1.5.1>setup.py install
running install
running bdist_egg
running egg_info
writing dropbox_python_sdk.egg-info\PKG-INFO
writing top-level names to dropbox_python_sdk.egg-info\top_level.txt
writing dependency_links to dropbox_python_sdk.egg-info\dependency_links.txt
reading manifest file 'dropbox_python_sdk.egg-info\SOURCES.txt'
reading manifest template 'MANIFEST.in'
writing manifest file 'dropbox_python_sdk.egg-info\SOURCES.txt'
installing library code to build\bdist.win-amd64\egg
running install_lib
running build_py
creating build
error: could not create 'build': Cannot create a file when that file already exists

C:\Python27\dropbox-python-sdk-1.5.1> 
```

我做错了什么？我知道它没有安装，因为 Dropbox 模块不存在。

如果有帮助，我正在使用 Windows Server 2008 64 位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-23T16:09:38.947

根据 piokuc 的评论回答。他/她没有标记答案（很长一段时间），所以我把它留在这里让其他人找到。

“删除您看到投诉的构建目录。- piokuc”

我发现如果尝试在没有“Easy Install”的情况下安装 Dropbox python 模块失败，导致 Dropbox 模块安装完成一半。只需删除有问题的文件并重新开始。

# javascript - 将 JSON 对象转换为字符串

> ID：15249336
> 
> 赞同：3
> 
> 时间：2013-03-06T14:02:04.440
> 
> 标签：javascript

您好我想将 json 对象转换为特殊字符转义的字符串。

以下是示例

```
{
"xtype": "window",
"height": 250,
"width": 400,
"bodyPadding": "20 0 0 20",
"title": "Configuration",
"modal": true,
"items": [
    {
        "xtype": "textfield",
        "fieldLabel": "Deploy Path"
    },
    {
        "xtype": "textfield",
        "fieldLabel": "Save Path"
    },
    {
        "xtype": "button",
        "margin": "20 0 0 100",
        "text": "Save"
    }
]
} 
```

以上反对

```
{\n    \"xtype\": \"window\",\n    \"height\": 250,\n    \"width\": 400,\n    \"bodyPadding\": \"20 0 0 20\",\n    \"title\": \"Configuration\",\n    \"modal\": true,\n    \"items\": [\n        {\n            \"xtype\": \"textfield\",\n            \"fieldLabel\": \"Deploy Path\"\n        },\n        {\n            \"xtype\": \"textfield\",\n            \"fieldLabel\": \"Save Path\"\n        },\n        {\n            \"xtype\": \"button\",\n            \"margin\": \"20 0 0 100\",\n            \"text\": \"Save\"\n        }\n    ]\n} 
```

有人可以帮我吗？

提前致谢。

你好，

我的 JSON 包含一些添加的插件，因此 stringify 函数不起作用。例如

```
plugins: [
Ext.create('Ext.grid.plugin.CellEditing', {
ptype: 'cellediting'
})
] 
```

这是事情对我不起作用的地方，我希望有人可以在这里帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T14:06:22.560

我不确定你为什么想要这个。目标是构建可以在程序中编写的字符串文字吗？

但是，无论如何，这似乎可以做到：

```
var str = JSON.stringify(obj, null, '\n')
          .replace(/"/g, '\\"')
          .replace(/\n/g, '    ')
          .replace(/(?:[ ]{4}((?:[ ]{4})*))/g, '\\n$1'); 
```

请注意，您必须开始的不是“JSON 对象”（这意味着什么，因为[JSON](http://www.json.org/)是一种数据交换格式），而是一个普通的 javascript 对象。

[*jsbin 示例*](http://jsbin.com/apeqej/2/edit?javascript,live)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:06:59.647

使用[org.json](http://www.json.org/java/)库：

这是一个示例代码。

```
JSONObject jsonObj = new JSONObject("{\"phonetype\":\"N95\",\"cat\":\"WP\"}"); 
```

或者

```
var j={"name":"phonetype"};
JSON.stringify(j); // '{"name":"phonetype"}' 
```

# python-sphinx - 警告：文档不包含在包含文件的任何目录树中

> ID：15249340
> 
> 赞同：75
> 
> 时间：2013-03-06T14:02:26.503
> 
> 标签：python-sphinx, restructuredtext, toctree

我收到警告：

```
WARNING: document isn't included in any toctree 
```

对于文档中存在的文件，因为它们已被明确包含。所以我有索引文件：

```
.. toctree::
    :maxdepth: 2

   pages/0010-foo
   pages/0020-bar 
```

在文件 0020-bar.rst 中，我特别包括了许多其他文件，如：

```
.. contents:: :local:

.. include:: /pages/reference-architecture/technical-considerations/0070-baz.rst 
```

但是当我构建项目时，我仍然收到一个警告，即 0070-baz.rst 不在任何目录树中，如下所示：

```
/home/nick/Documents/myProject/docs/pages/reference-architecture/technical-considerations/0070-baz.rst:: WARNING: document isn't included in any toctree 
```

奇怪的是我可以看到输出中的内容。这是正常的吗？对于明确包含而不是通过 toctree 包含的文件，是否总是出现此警告？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2016-11-21T17:24:55.117

如果您只想将`..include::`一个文档放在另一个文档中，而不让它出现在任何`toctree`.

**添加`:orphan:`到文档顶部以消除警告。**

这是一个*文件范围的元数据*选项。[从Sphinx 文档](https://www.sphinx-doc.org/en/master/usage/restructuredtext/field-lists.html#file-wide-metadata)中了解更多信息。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-03-15T17:48:40.487

无论文件是否包含，Sphinx 都会对此抱怨。

但是，您可以使用[exclude_patterns](http://www.sphinx-doc.org/en/master/usage/configuration.html#confval-exclude_patterns)配置值专门排除文件。

因此，对于您的情况，您可能会尝试使用以下内容更改 Sphinx 的`conf.py`文件：

```
exclude_patterns = ['pages/reference-architecture', 'some/other/file.txt'] 
```

您可以通过这种方式排除单个文件、目录或使用文件通配模式来匹配文件组。

**编辑：**请参阅：[Joakim 对](https://stackoverflow.com/a/40725923/134391)创建此答案后添加的另一个选项的回答。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-03-02T14:56:15.730

我有一种情况，我无法编辑我想作为 git 子模块引入的文档。这些文档已经有了自己的结构，包括用 Markdown 编写的 TOC 页面，我确实希望它们由 sphinx 处理以保持格式的一致性。

我发现我可以做的是指定一个隐藏的目录树以使目录树知道文档，但不会弄乱目录树或在我的 sphinx 构建输出中添加一堆错误。

```
* :doc:`Additional Book <external/index>`

.. toctree::
   :hidden:

   external/documentA.md
   external/documentB.md 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-21T07:05:04.207

缩进工作：

```
 toctree::   
   :maxdepth: 2
       hello <h.rst>
       abc <your.rst> 
```

# plone - 隐藏目录结果的特定对象

> ID：15249344
> 
> 赞同：3
> 
> 时间：2013-03-06T14:02:34.887
> 
> 标签：plone, catalog

有没有办法隐藏我的目录结果的特定对象？我有一个不想显示的配置文件。我正在按 id 过滤，但它看起来很丑。

```
from Products.CMFCore.utils import getToolByName
def search(context):
    catalog = getToolByName(context, 'portal_catalog')
    items = catalog()
    for item in items:
        if item.id != "config_file":
            'do something' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:47:30.637

如果您已经从导航树中隐藏了对象，则可以通过测试来过滤相同的属性`exclude_from_nav`：

```
items = catalog()
for item in items:
    if item.exclude_from_nav:
        continue

    # do something with all objects *not* excluded from navigation. 
```

过滤掉*不*符合标准的东西更难。像上面这样对大脑对象进行测试是从结果集中删除一小部分子集的完美方法。

如果您需要处理更大比例的“异常”，您可能需要重新考虑您的架构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:20:31.763

使用[Products.AdvancedQuery](http://www.dieter.handshake.de/pyprojects/zope/AdvancedQuery.html)，您可以创建高级查询并过滤目录结果。另请参阅[如何](http://plone.org/documentation/manual/developer-manual/indexing-and-searching/searching-with-advancedquery)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T18:51:07.110

在一般情况下，将内容项的到期日期设置为某个过去的日期会将其从搜索结果中隐藏（只要用户没有*访问非活动门户内容*权限）。

这是一种隐藏应该对所有人可见的内容片段的简单方法，但您不想弄乱搜索结果，例如用作主页的文档。

我总是使用*2001 年 1 月 1 日*作为日期，这样我就可以很容易地识别出我何时使用了这个小“黑客”。

# maven - 如何禁用 Maven 3 中的默认生命周期阶段？

> ID：15249345
> 
> 赞同：13
> 
> 时间：2013-03-06T14:02:41.273
> 
> 标签：maven, maven-3

通过*禁用*我的意思是完全，完全从生命周期中删除阶段，因此它甚至不会被调用。

我可能需要一个自定义生命周期，但我找不到一种简单的方法来直接在我的`pom.xml`. 看来我需要*编写一个插件*来列出我想要的阶段。

例如，我希望`default-testResources`,`default-testCompile`和`default-test`阶段永远不会发生，并将我的构建日志从这里转为：

```
[INFO] ------------------------------------------------------------------------
[INFO] Building HelpDesk Webapp 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ helpdesk ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory d:\proj\HelpDesk\repo\src\main\resources
[INFO]
[INFO] --- maven-compiler-plugin:3.0:compile (default-compile) @ helpdesk ---
[INFO] No sources to compile
[INFO]
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ helpdesk ---
[INFO] Not copying test resources
[INFO]
[INFO] --- maven-compiler-plugin:3.0:testCompile (default-testCompile) @ helpdesk ---
[INFO] Not compiling test sources
[INFO]
[INFO] --- maven-surefire-plugin:2.10:test (default-test) @ helpdesk ---
[INFO] Tests are skipped.
[INFO]
[INFO] --- maven-war-plugin:2.3:war (default-war) @ helpdesk ---
[INFO] Packaging webapp
[INFO] Assembling webapp [helpdesk] in [d:\proj\HelpDesk\repo\target\helpdesk]
[INFO] Processing war project
[INFO] Copying webapp resources [d:\proj\HelpDesk\repo\src\main\webapp]
[INFO] Webapp assembled in [40 msecs]
[INFO] Building war: d:\proj\HelpDesk\repo\target\helpdesk.war
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------ 
```

进入这个：

```
[INFO] ------------------------------------------------------------------------
[INFO] Building HelpDesk Webapp 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ helpdesk ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory d:\proj\HelpDesk\repo\src\main\resources
[INFO]
[INFO] --- maven-compiler-plugin:3.0:compile (default-compile) @ helpdesk ---
[INFO] No sources to compile
[INFO]
[INFO] --- maven-war-plugin:2.3:war (default-war) @ helpdesk ---
[INFO] Packaging webapp
[INFO] Assembling webapp [helpdesk] in [d:\proj\HelpDesk\repo\target\helpdesk]
[INFO] Processing war project
[INFO] Copying webapp resources [d:\proj\HelpDesk\repo\src\main\webapp]
[INFO] Webapp assembled in [40 msecs]
[INFO] Building war: d:\proj\HelpDesk\repo\target\helpdesk.war
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-06T14:49:55.260

如果您想继续使用预定义的包装（jar、war 等），您不能完全删除它们。您可以保留包装`pom`并通过将您想要的目标绑定到所需阶段来定义自己的生命周期，或者您可以完全定义自己的生命周期。您还可以将默认目标绑定到阶段`none`，以防止目标执行任何实际工作，如图所示。

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-resources-plugin</artifactId>
    <executions>
        <execution>
            <id>default-testResources</id>
            <phase>none</phase>
        </execution>
    </executions>
</plugin> 
```

所有这一切 - khmarbaise 的问题是一个很好的问题。通常，更改现有的预构建生命周期并不是最佳实践。

# git - 如何知道从分叉中更改了哪些文件 - git

> ID：15249349
> 
> 赞同：1
> 
> 时间：2013-03-06T14:02:59.150
> 
> 标签：git, git-fork

假设我创建了一个分支，我做了一些提交，我如何从 fork 获取文件和提交？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T14:11:36.293

这将为您提供一个分支（例如 master）和另一个分支之间的修改文件列表：

```
 git diff --name-status master..branch 
```

但这也会考虑到 master 的最新修改。
如果您想要分支的时刻和最新的新分支之间的差异，那么：

```
 git diff --name-status master...branch 
```

请参阅“ [git diff 显示不够](https://stackoverflow.com/questions/5256249/git-diff-doesnt-show-enough/5257065#5257065)”：

![差异点](../Images/dbb8bca1a35ce9d687a0955bb174c553.png)

同样，要列出自从您有分支以来完成的提交：

```
git log master..branch 
```

请注意，**fork**更多地保留用于*克隆*（在服务器端），而不是用于分支。

# flash - ExternalInterface.addCallback 在 IE8 Flash 10.0 或更低版本中不起作用

> ID：15249351
> 
> 赞同：1
> 
> 时间：2013-03-06T14:03:06.727
> 
> 标签：flash, internet-explorer, externalinterface

我有一个小型 Flash 应用程序，可以在 jQuery document.ready 上动态加载。它适用于除 IE 之外的所有浏览器。当安装的 FlashPlayer 版本低于 10.1 时，通过 addCallBack 添加的回调不存在。我已经用 flex 3.5 中的 mxmlc 编译了应用程序，目标播放器是 9.0.124，所以它应该可以工作。我已经构建了其他更大的 flex 应用程序，并且对 ExternalInterface 和 IE 没有任何问题。应用程序加载和 ExternalInterface.call 方法触发和 IE 响应，但回调只是不存在。没有错误被抛出。

我的应用程序

```
public class MyApp extends Sprite {
    private var sounds:Dictionary = new Dictionary();
    private var channel:SoundChannel = new SoundChannel();
    private var onLoadHandler:String;

    public function MyApp() {
        flash.system.Security.allowDomain("*");

        var flashvars:Object = LoaderInfo(this.root.loaderInfo).parameters;
        onLoadHandler = flashvars.onLoad;

        addEventListener(Event.ENTER_FRAME, registerExternalCallbacks);
     }

    private function registerExternalCallbacks(event:Event):void{
        removeEventListener(Event.ENTER_FRAME, registerExternalCallbacks);

        if (ExternalInterface.available) {
            ExternalInterface.addCallback("addSound", addSound);
            ExternalInterface.addCallback("playSound", playSound);
            ExternalInterface.addCallback("getCameraCount", getCameraCount);

            if (onLoadHandler) {
                ExternalInterface.call(onLoadHandler);
            }
        }
    };

    private function addSound(name:String, url:String):void{
        var sound:Sound = new Sound();
        sound.load(new URLRequest(url));
        sounds[name] = sound;
    }

    private function playSound(name:String):void{
        if (sounds[name] != null) {
             channel = sounds[name].play();
        }
    }

    private function getCameraCount():int {
        return Camera.names.length;
    }
} 
```

HTML 标记

```
<object width="1" height="1" id="MyApp" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" style="position: absolute; top: -999px; left: -999px;">
    <param value="MyApp.swf" name="movie">
    <param value="always" name="allowScriptAccess">
    <param value="false" name="allowFullScreen">
    <param value="false" name="loop">
    <param value="false" name="menu">
    <param value="high" name="quality">
    <param value="onLoad=onLoad" name="flashvars">
    <embed width="1" height="1" flashvars="onLoad=onLoad" quality="high" menu="false" loop="false" allowfullscreen="false" allowscriptaccess="always" name="MyApp" src="MyApp.swf" pluginspage="http://www.macromedia.com/go/getflashplayer" swliveconnect="true" type="application/x-shockwave-flash">
</object> 
```

理想情况下，我不会太担心，但我的老板希望这适用于较旧的闪存版本，因此我们的客户被迫更新。

# javascript - 在 node.js 中包含 CoffeeScript 类

> ID：15249353
> 
> 赞同：2
> 
> 时间：2013-03-06T14:03:14.203
> 
> 标签：javascript, coffeescript, require

我刚刚习惯了 CoffeeScript，但我已经被课程困住了。我想让我的文件像节点一样结构化，这样我就可以需要一个包含这样的类的 JavaScript 文件。

`Test = require "test.js"`

`Test.start()`

其中 start 是测试类的方法。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T14:15:50.507

> 这可能吗？

与 Node.js 中的不完全一样。浏览器环境中没有同步`require`。但是，您可以尝试使用众多异步库之一来做到这一点，看看[AMD](https://github.com/amdjs/amdjs-api/wiki/AMD)。最著名的实现是[require.js](http://requirejs.org/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T14:24:04.190

我发现在浏览器环境中使用 CommonJS 模块（Node.js 使用的模块）的最简单方法是使用[Browserify](http://browserify.org/)。我个人也更喜欢 CommonJS 模块定义而不是 AMD 模块定义，但这只是个人喜好。

另外，请考虑到为了导出您的类以便`require 'test'`直接为您提供类构造函数，您必须将您的类分配给`module.exports`：

```
# In test.coffee
module.exports = class Test 
  @start = -> console.log 'start!' 
```

然后将该文件编译为`test.js`，您就可以使用它了：

```
Test = require './test'
Test.start() 
```

在 Node.js 中，这将正常工作。在浏览器中，您需要首先使用 Browserify（或其他工具）处理文件以使其正常工作（它将创建正确的`require`函数以及CommonJS 模块正常工作的一些变量）`exports`。`module.exports`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T14:24:21.987

看看[stitch](https://github.com/sstephenson/stitch)、[hem](https://github.com/spine/hem)（灵感来自stitch，但有更简洁的功能）和[browserify](https://github.com/substack/node-browserify)。

就个人而言，我更喜欢下摆。你可以用它做这样的事情：

```
# app/lib/model.coffee

module.exports = class Model
  ... 
```

.

```
# app/lib/util.coffee

helper1 = -> ...

helper2 = -> ...

module.export = {helper1, helper2} 
```

.

```
# app/index.coffee

Model = require 'lib/model'
{helper1} = require 'lib/util'

# do whatever you want with required stuff
... 
```

Hem 负责即时编译 CoffeeScript 并将所有需要的代码捆绑在一起（它还支持 npm 模块和任意 js 库作为代码的外部依赖项，有关更多详细信息，请参阅文档）。

# android - 在其中打开隐藏视图的列表菜单

> ID：15249358
> 
> 赞同：0
> 
> 时间：2013-03-06T14:03:24.577
> 
> 标签：android, android-layout, android-view

我需要创建一个列表菜单，其中每个项目在被选中时将打开一个带有其他控件的子区域（参见示例图像）：

![示例布局图像](../Images/8ebb5d2f1f685bd200fc7e17834a488e.png)

我有两种可能的解决方案：

*   让所有项目的控件在*RelativeLayout*中具有“消失”的可见性，并在*LinearLayout*中列出它们。
*   使用*ExpandableListView*，但我没有这方面的经验，我不知道这是否适合我的情况。

你认为什么会更优雅？你有其他/更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:15:09.307

两种方法都可以，但`ExpandableListView`在性能方面应该更好。

您必须[`ExpandableListAdpater`](http://developer.android.com/reference/android/widget/ExpandableListAdapter.html)为您的组项目提供一个布局，为子项目提供另一个布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:10:42.937

您可以使用 ListView 以及 ExpandableListView 来满足您的要求。

![在此处输入图像描述](../Images/b199d16b597f3a405d633957759091f8.png)

![在此处输入图像描述](../Images/5ba7a041f1abd7353ec519b0b0813022.png)

我通过使用适合您要求的 ListView 和幻灯片动画做了一些事情。如需完整参考，请浏览我的 Android 博客

[http://amitandroid.blogspot.in/2013/03/android-listview-with-animation.html](http://amitandroid.blogspot.in/2013/03/android-listview-with-animation.html)

谢谢，

# netbeans - Netbeans 新手——如何启用从 javadoc JAR 文件中查看信息

> ID：15249373
> 
> 赞同：6
> 
> 时间：2013-03-06T14:04:17.447
> 
> 标签：netbeans, jar, javadoc, netbeans-7

我有一些 JAR 文件，我必须将它们添加到 Java 项目中——对于每个 JAR，我还有单独的 JAR，其中包含每个 jar 的 Javadoc——现在我希望能够从 Netbeans 中的 Javadocs 中查看信息。

我该怎么做呢？我在 Windows 8 x-64 上使用 Netbeans IDE 7.3。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T11:21:23.487

当您以 zip 格式下载一些 JAR 文件时，通常会在其中找到 3 个文件：

```
example.jar
example-sources.jar
example-javadoc.jar 
```

在您的项目中导入`example.jar`为库。之后转到您的项目（右键单击）然后**Properties** >> **Libraries** >> **Compile**然后选择您的 jar 文件并单击**EDIT**，以该形式选择 javadoc 和源文件:)

这是便于导航的图像（itextpdf lib 在此示例中）

![Netbeans 项目设置](../Images/c3bc5e98bbe27a636a364896fe0e9c2c.png)

**编辑**

还有更快的方法；）右键单击**项目的****库**部分中的JAR，然后从菜单中选择**编辑。**它的形式与上面的示例相同。

 ***** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:06:50.657

转到：工具>>Java 平台>>Javadoc 选项卡
在那里您可以设置您想要的Javadoc。****

# mysql - 如何在创建数据库语句中使用变量

> ID：15249375
> 
> 赞同：5
> 
> 时间：2013-03-06T14:04:23.917
> 
> 标签：mysql

我有这个程序：

```
DELIMITER //

create DEFINER = 'root'@'localhost' procedure create_db(name TEXT) 
BEGIN
DECLARE temp TEXT;
DECLARE user TEXT;
SELECT SCHEMA_NAME FROM INFORMATION_SCHEMA.SCHEMATA WHERE SCHEMA_NAME = name INTO temp;
  if temp = name then
      SIGNAL SQLSTATE '45002' SET MESSAGE_TEXT = 'This database already exist';
  else
      SELECT USER() INTO user;
      create database name;
      grant all privileges on name.* to user with grant option;
  END IF;
END //

DELIMITER ; 
```

它工作得很好，只是它提供字面上的“名称”而不是变量名称的值。我如何告诉它名称是一个变量？php 中的 $name 之类的东西。我浏览了许多文档，但它们都使用没有前缀的变量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T14:28:23.640

您只需要使用准备好的语句，这是工作代码：

```
DELIMITER //

drop procedure if exists create_db //

create procedure create_db(name TEXT)
BEGIN
  DECLARE temp TEXT;
  DECLARE user TEXT;
  SELECT SCHEMA_NAME FROM INFORMATION_SCHEMA.SCHEMATA WHERE SCHEMA_NAME = name INTO temp;
  if temp = name then
  SIGNAL SQLSTATE '45002' SET MESSAGE_TEXT = 'This database already exist';
    else
    SELECT USER() INTO user;

    SET @s = CONCAT('CREATE DATABASE ', name);
    PREPARE stmt_create FROM @s;
    EXECUTE stmt_create;
    DEALLOCATE PREPARE stmt_create;

    SET @s = CONCAT('GRANT ALL PRIVILEGES ON ', name, '.* TO ', user, ' WITH GRANT OPTION');
    PREPARE stmt_grant FROM @s;
    EXECUTE stmt_grant;
    DEALLOCATE PREPARE stmt_grant;

  END IF;
END //

DELIMITER ; 
```

# xpath - 是否可以过滤从 XPath 查询返回的后代元素？

> ID：15249380
> 
> 赞同：0
> 
> 时间：2013-03-06T14:04:29.720
> 
> 标签：xpath, yql, yahoo-api

目前，我正在尝试使用以下查询从某些网站上抓取表单：

```
select * from html 
where url="http://somedomain.com" 
and xpath="//form[@action]" 
```

这将返回如下结果：

```
{
    form: {
        action: "/some/submit",
        id: "someId",
        div: {
            input: [
               ... some input elements here
            ]
        }
        fieldset: {
            div: {
                input: [
                    ... some more input elements here
                ]
            }
        }
    }
} 
```

在某些站点上，这可能会深入很多层次，因此我不确定如何开始尝试过滤掉结果中不需要的元素。如果我可以在这里过滤掉它们，那么它会使我的后端代码更简单。基本上，我只喜欢表单和任何标签、输入、选择（和选项）和 textarea 后代。

这是我尝试过的 XPath 查询，但我意识到元素层次结构不会被维护，如果页面上有多个表单，这可能会导致问题：

```
//form[@action]/descendant-or-self::*[self::form or self::input or self::select or self::textarea or self::label] 
```

但是，我确实注意到此查询返回的元素不再在 div 和表单下的其他元素下返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:52:20.990

我认为您尝试过的简单查询是不可能的。

但是，创建一个包含一些执行您正在寻找的过滤的 JavaScript 的新数据表并不会做*太多工作。*

**数据表**

一个快速的`<execute>`小块可能如下所示。

```
var elements = y.query("select * from html where url=@u and xpath=@x", {u: url, x: xpath}).results.elements();
var results = <url url={url}></url>;
for each (element in elements) {
    var result = element.copy();
    result.setChildren("");
    result.normalize();
    for each (descendant in y.xpath(element, filter)) {
        result.node += descendant;
    }
    results.node += result;
}
response.object = results; 
```

» 查看[完整的示例数据表](https://gist.github.com/salathe/5120512)。

**示例查询**

```
use "store://VNZVLxovxTLeqYRH6yQQtc" as example;
select * from example where url="http://www.yahoo.com" 
```

»[在 YQL 控制台中查看此查询](http://y.ahoo.it/u/i+z)

**示例结果**

![查询结果 XML](../Images/7c1ce6d8bde04c0533b351de6926d2c7.png)

希望以上是朝着正确方向迈出的一步，并且看起来不会太令人生畏。

**链接**

*   [打开数据表参考](http://developer.yahoo.com/yql/guide/yql-opentables-reference.html)
*   [在开放数据表中执行 JavaScript](http://developer.yahoo.com/yql/guide/yql-execute-chapter.html)
*   [YQL 编辑器](http://developer.yahoo.com/yql/editor/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:44:59.927

这就是我过滤特定节点但仍允许显示所有属性的父标记的方式：

```
//form[@name]/@* | //form[@action]/descendant-or-self::node()[name()='input' or name()='select' or name()='textarea' or name()='label'] 
```

如果页面上有多个表单标签，它们应该按此父标签分组，而不是全部挤在一起且无法识别。

如果它有助于您希望节点出现的方式，您也可以反转联合：

```
//form[@action]/descendant-or-self::node()[name()='input' or name()='select' or name()='textarea' or name()='label'] | //form[@name]/@* 
```

# opengl - 将 vec3 乘以模型视图矩阵

> ID：15249386
> 
> 赞同：3
> 
> 时间：2013-03-06T14:04:38.383
> 
> 标签：opengl, glsl, lwjgl, vector-graphics

我有一个 3D 坐标，我想通过 modelVeiw 矩阵进行转换，以进入 GLSL 着色器中的视图空间。该点在着色器中定义，不受 OpenGL 变换的影响。反正有没有做类似 gl_ModelViewMatrix*(vec3 name) 的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T14:22:44.133

没有。gl_ModelViewMatrix 是 mat4。您需要将其乘以 vec4（w 为 1）。

# java - 如何从 Java 中的任何输入或程序中录制/捕获音频？

> ID：15249388
> 
> 赞同：2
> 
> 时间：2013-03-06T14:04:43.110
> 
> 标签：java, audio-recording, audio

我正在做一个小科学项目，我真的想从音频输入和计算机上运行的程序录制音频，如何在 Java 中做到这一点？如果比特率可以以某种方式自定义，那就太棒了。.mp3 或类似的文件会很棒，如果它是任何不同的文件类型应该不是问题，因为它可以被转换。

我听说过 Java Sound API，但我并不真正了解如何使用此 API 真正录制音频。

在此先感谢蒂姆·维塞

# jquery - 搜索选择的选项，找到值，将选择添加到其中并将其 html 文本写入 div

> ID：15249396
> 
> 赞同：2
> 
> 时间：2013-03-06T14:05:07.530
> 
> 标签：jquery

我有一个简单的选择、一个 div 和一个预填充变量。

这是我想做的事情：

我有预填充值，可以说：

```
prepop = 2; 
```

我想搜索选择中的所有选项，将选择的属性添加到值为 2 的选项中，并在 div 测试中写入“Val two”：

```
<div id="test"></div>

<select>
<option value="1">Val one<option>
<option value="2">Val two</option>
</select> 
```

有什么想法吗？

以下是我的想法：

```
var $options = "get all the select options";
    $options.each(function(){
        if (jQuery(this).val() == prepop){
            jQuery('#test').html(jQuery(this).text());
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:12:00.703

我认为这应该可以解决问题：

```
$(document).ready(function() {
    var prepop = 2;
    $('select').find('option').each(function() {
        if($(this).val() == prepop) {
            $('#test').html($(this).text());
        }
    });
}); 
```

所以这里发生的事情是，我们正在遍历“选择”下方的所有“选项”。如果当前通过“选项”循环的值等于预填充变量，我们用适当的内容填充 div。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T14:19:41.137

只需使用这个：

```
 $('select').val(prepop); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T14:08:59.303

```
$('select option').each(function(){
    if ($(this).val() == prepop){
        $(this).parent().val($(this).val());
        $('#test').html($(this).text());
    }
}); 
```

查看**[示例](http://jsfiddle.net/JJccr/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T14:08:50.230

试试这个 ，

```
 $("#selectId > option").each(function() {

   if (this.value == prepop){
            $('#test').html(this.text());
        }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T14:12:49.170

你会不会对这样的事情感兴趣：

```
$(document).ready(function(){
   var sel = document.getElementById('myselect');
    sel.value = 2;
    $("#test").html( sel[sel.selectedIndex].text );

}); 
```

在这里测试它：

[http://jsfiddle.net/3D44L/](http://jsfiddle.net/3D44L/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T14:13:49.143

// 但请使用 id 进行选择，并使用扩展选择器进行选项 - 在实际使用中。

```
var prepop = 2;

$('select').val(prepop);

$('#test').html($("option[value=" + prepop + "]").text()); 
```

# sql-server - 值不能为空，参数名称：viewInfo

> ID：15249398
> 
> 赞同：22
> 
> 时间：2013-03-06T14:05:10.523
> 
> 标签：sql-server, sql-server-2008, ssms

将 SP2 安装到现有的 SQL Server 2008 R2 后，我失去了对所有数据库的访问权限，并开始面临屏幕截图中的错误。

![在此处输入图像描述](../Images/a0d65dd6e6ae855bb35e09aaa58bbce1.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-08-07T19:49:13.110

检查**Temp**和**TMP**的环境值。

`C:\Users\buck>set t`

`TEMP=C:\Users\buck\AppData\Local\Temp\2`

`TMP=C:\Users\buck\AppData\Local\Temp\2`

确保列出的目录存在并且您的 id 具有写入该目录的适当权限。或者，通过控制面板 ( `Control Panel-> System and Security-> System -> Advanced system settings`)，您可以更改分配给**TEMP**和**TMP**的默认目录。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-11-25T16:29:00.357

当我看到这个问题时，通常是因为安装 SSMS 的驱动器已用完可用空间。删除一些旧的日志文件可以解决问题。

在重新安装之前进行快速检查可能是值得的。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-09-30T15:09:32.257

我在我们的远程共享服务器上收到此错误。原来我们的C盘没有空间了。

我通过让我的同事关闭他的 SQL Server Management Studio 会话来让它工作，它立即清理了 7 GB！那我就可以登录了！呜呜呜！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-08T17:03:49.870

遇到此问题时，我发现它与环境临时文件夹（TMP Temp）有关。

我曾尝试将“2”文件夹添加到此位置，但没有成功。 `C:\Users\USER\AppData\Local\Temp\2`

尝试输入`%temp%`文件资源管理器，看看它是否会将您带到有效位置。我发现我收到了一个错误，因为它试图转到“4”位置。 `C:\Users\USER\AppData\Local\Temp\4`

我在 Temp 文件夹中创建了一个名为“4”的文件夹，重新运行 SSMS，它又开始工作了。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-03-11T18:06:34.773

更改临时变量没有解决。安装了 SMMS 的驱动器有 34% 的可用空间。

但是，使用`Run > %temp% > it`会出错`"C:\%username%\appdata\local\temp\4 was missing"`（这未在我的`TEMP/TMP`变量中列出）。

快速解决方案是为“4”添加子文件夹，`c:\%username%\appdata\local\temp\`现在可以毫无问题地打开 SMMS。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-06T14:12:01.420

一个快速的谷歌建议显然这是一个常见的问题。看起来这不是 SQL Server 本身的问题，而实际上是 .NET 问题我发现的最常见（和快速）的解决方案是重新安装 SSMS。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-01-13T08:13:42.487

右键单击 SSMS 图标，然后单击“以管理员身份运行”。在 SSMS 控制台上，通过单击“数据库”树节点来验证错误是否消失。该错误现在应该已永久修复，您不再需要以管理员身份运行 SSMS。下次只需正常启动 SSMS，它应该可以正常工作。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-11-14T05:28:35.373

我发现如果您在 sql 集群上升级 iseries odbc 驱动程序。很多时候你会遇到这个问题。在 32 位和 64 位文件夹中重命名 machine.config 可以解决问题。我们目前从版本 12 或 6.1 升级到 7.1 或 13，因为版本 12 导致对我们的一个 SQL 实例进行错误检查。升级了，问题都解决了。

干杯，

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-03-10T08:16:42.897

根据以下链接： [https ://connect.microsoft.com/SQLServer/feedback/details/573771/value-cannot-be-null](https://connect.microsoft.com/SQLServer/feedback/details/573771/value-cannot-be-null)

我刚刚检查了我的用户是本地管理员，然后我注销并重新登录。
在那一步之后，我没有再次收到此错误。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-12-10T10:40:53.207

我收到了这个确切的错误，并认为我可以尝试进行修复。

好吧，修复并没有解决问题，但它确实告诉我它无法访问 C:\Windows\Microsoft.NET\Framework\v2.0.50727\CONFIG 中的 machine.config - 发现它不存在！还有另一个文件 machine.config.default

所以尝试复制，重命名为 .config 和 viola 解决了它，一切都像冠军一样工作。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-07-03T05:17:50.267

我在 SSMS 中遇到了同样的错误，我找到[了这个链接](http://mssqlnuggets.wordpress.com/2013/08/05/error-value-cannot-be-null-parameter-name-viewinfo-microsoft-sqlserver-management-sqlstudio-explorer/)并按照它提到的步骤操作。

> 问题似乎出在访问设置文件的内容时。该文件包含无效条目。这个文件是 CurrentSettings-。对此的修复如下所示：
> 
> 1.  在服务器上转到开始菜单–>您的配置文件–>文档–>SQL Server Management Studio–>设置（这是上面指定的文件的位置）
> 2.  删除此文件夹中的所有文件
> 3.  重启sqlserver服务
> 4.  启动 SSMS，这个错误就消失了。您将能够展开所有文件夹并执行常规 SSMS 活动而不会出现此错误。

一旦我执行了这些步骤并重新启动了我的电脑，这个错误就消失了，SSMS 工作正常。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-02-25T11:56:32.297

我刚刚遇到这个问题并在 5 分钟内立即解决。只需转到控制面板并在程序上运行故障排除工具。

```
**PATH** Control Panel\All Control Panel Items\Troubleshooting\Programs 
```

它将为您提供可能有任何问题的已安装程序的列表。向下滚动该列表并找到“SQL Server Management Studio”并对其运行故障排除过程。它有望解决您的问题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-07-21T07:02:40.193

我多次收到此消息，每次都通过以下几种不同的解决方案解决。

1.  解决方案：从临时文件夹中清除缓存，按 windows + R => 键入“%temp%” => 删除临时文件夹中的所有文件...并尝试天气它可以正常工作并成功打开 ssms
2.  解决方案：在上述临时文件夹位置创建名为“2”的文件夹......并尝试天气它可以正常工作并成功打开 ssms。
3.  解决方案：在上述临时文件夹位置创建名为“4”的文件夹......并尝试天气它可以正常工作并成功打开 ssms。
4.  解决方案：这可能是因为驱动器ssms安装的磁盘空间不足...所以释放一些空间...并尝试天气它工作并成功打开ssms。
5.  解决方案：格式是最后的解决方案......

# sql-server - 如何在 DataSource.groovy 中使用 MSSQL DSN 作为 URL

> ID：15249399
> 
> 赞同：1
> 
> 时间：2013-03-06T14:05:12.277
> 
> 标签：sql-server, grails, datasource, dsn

我一直在 DataSource.groovy 中尝试此代码，但它显示“没有合适的驱动程序”的错误

```
dataSource 
{
    pooled = true
    driverClassName = "com.microsoft.sqlserver.jdbc.SQLServerDriver"
    String url="jdbc:microsoft:sqlserver:DSNname";
} 
```

我已经包含了两个 jdbc SQLserver 驱动程序 sqljdbc、sqljdbc4（*.jar 文件）。

我也试过这段代码，但没有用。

```
DataSource
{
        driverClassName = "com.microsoft.sqlserver.jdbc.SQLServerDriver"
    //url="jdbc:sqlserver://localhost:1433;database=DBNAME" its working
    url="jdbc:odbc:myDSN"
    username="sa"
    password=""
} 
```

提前致谢。

# vb.net - 在vb中选择文本

> ID：15249405
> 
> 赞同：0
> 
> 时间：2013-03-06T14:05:37.850
> 
> 标签：vb.net

我想在 vb.net 的文本框中选择一个单词到另一个单词，并突出显示它们之间的所有内容。

一个例子是

> 我去了海滩，和家人一起野餐，然后在 6 点钟回家。

起始词 be`had`和结束词 being`home`以及其间突出显示的所有内容。

我已经使用了一些代码

```
Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click
    Dim a As String
    Dim b As String
    a = TextBox2.Text 'means what ever is in textbox2 string to the location where "a" is
    b = InStr(RichTextBox1.Text, a)
    If b Then
        RichTextBox1.Focus()
        RichTextBox1.SelectionStart = b - 1
        RichTextBox1.SelectionLength = Len(a) 
```

但它不完全是我想要它做的。

除此之外，还使用了 RegEx 函数，如下所示

```
 'gets rid of the enter line break eg <enter> command no new lines
     Dim content As String = Replace(TextBox1.Text, Global.Microsoft.VisualBasic.ChrW(10), Nothing)
    'searches for this tag in the brackets between ".*" will be the contents
    Dim Regex As New Regex("<div.*class=""answer_text"".*id=editorText"".*""")
    'Show the string 
    For Each M As Match In Regex.Matches(content)
    'This will get the values, there are 3 atm meta.name des and content
    Dim Description As String = M.Value.Split("""").GetValue(3)
    'displays the content in the label
    TextBox3.Text = "" & Description
    Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:16:19.213

这将选择 startWord 和 endWord 之间的所有内容，不包括它们

```
Dim startWord As String = "had"
Dim endWord As String = "home"

Dim index As Integer = richTextBox1.Text.IndexOf(startWord)
richTextBox1.[Select](index + startWord.Length, richTextBox1.Text.IndexOf(endWord) - index - startWord.Length) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:47:13.300

这是一个涉及两个`TextBox`控件的解决方案：

```
Private Sub Button3_Click(sender As System.Object, e As System.EventArgs) Handles Button3.Click
        Dim a As String
        Dim b As String
        Dim index_a As Integer
        Dim index_b As Integer
        a = TextBox1.Text
        b = TextBox2.Text
        index_a = InStr(RichTextBox1.Text, a)
        index_b = InStr(RichTextBox1.Text, b)
        If index_a And index_b Then
            RichTextBox1.Focus()
            RichTextBox1.SelectionStart = index_a - 1
            RichTextBox1.SelectionLength = (index_b - index_a) + Len(b)
        End If
End Sub 
```

`TextBox1`包含第一个单词，`TextBox2`包含第二个单词。单击按钮时，它将从第一个单词突出显示到第二个单词的末尾。

# android - android条码扫描仪出错

> ID：15249409
> 
> 赞同：0
> 
> 时间：2013-03-06T14:05:44.810
> 
> 标签：android, barcode, zxing

我正在通过 ZXIng IntentIntegrator 使用 QR 码扫描仪制作应用程序。我可以使用以下代码来实现

```
IntentIntegrator integrator = new IntentIntegrator(
                        HomeActivity.this);
                integrator.initiateScan();

public void onActivityResult(int requestCode, int resultCode, Intent intent) {
        IntentResult scanResult = IntentIntegrator.parseActivityResult(
                requestCode, resultCode, intent);
        if (scanResult != null) {
            // handle scan result

            Toast.makeText(getApplicationContext(),
                    "scan   " + scanResult.getContents(), 1).show();
        }
        // else continue with any other code you need in the method

    } 
```

它在真实设备上运行。但是当我尝试在我的其他设备上运行它时（三星注 2）。它给了我崩溃日志。

```
03-06 19:10:19.940: E/AndroidRuntime(10325): FATAL EXCEPTION: main
03-06 19:10:19.940: E/AndroidRuntime(10325): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.aztecbarcodereader.zxing.client.android.SCAN cat=[android.intent.category.DEFAULT] flg=0x4080000 }
03-06 19:10:19.940: E/AndroidRuntime(10325):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1580)
03-06 19:10:19.940: E/AndroidRuntime(10325):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1431)
03-06 19:10:19.940: E/AndroidRuntime(10325):    at android.app.Activity.startActivityForResult(Activity.java:3446)
03-06 19:10:19.940: E/AndroidRuntime(10325):    at android.app.Activity.startActivityForResult(Activity.java:3407)
03-06 19:10:19.940: E/AndroidRuntime(10325):    at android.support.v4.app.FragmentActivity.startActivityForResult(FragmentActivity.java:817)
03-06 19:10:19.940: E/AndroidRuntime(10325):    at com.aztecbarcodereader.zxing.integration.android.IntentIntegrator.startActivityForResult(IntentIntegrator.java:290)
03-06 19:10:19.940: E/AndroidRuntime(10325):    at com.aztecbarcodereader.zxing.integration.android.IntentIntegrator.initiateScan(IntentIntegrator.java:274)
03-06 19:10:19.940: E/AndroidRuntime(10325):    at com.aztecbarcodereader.zxing.integration.android.IntentIntegrator.initiateScan(IntentIntegrator.java:209)
03-06 19:10:19.940: E/AndroidRuntime(10325):    at com.raa.jwelarydemo.HomeActivity$8.onClick(HomeActivity.java:241)
03-06 19:10:19.940: E/AndroidRuntime(10325):    at android.view.View.performClick(View.java:4223)
03-06 19:10:19.940: E/AndroidRuntime(10325):    at android.view.View$PerformClick.run(View.java:17275)
03-06 19:10:19.940: E/AndroidRuntime(10325):    at android.os.Handler.handleCallback(Handler.java:615)
03-06 19:10:19.940: E/AndroidRuntime(10325):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-06 19:10:19.940: E/AndroidRuntime(10325):    at android.os.Looper.loop(Looper.java:137)
03-06 19:10:19.940: E/AndroidRuntime(10325):    at android.app.ActivityThread.main(ActivityThread.java:4898)
03-06 19:10:19.940: E/AndroidRuntime(10325):    at java.lang.reflect.Method.invokeNative(Native Method)
03-06 19:10:19.940: E/AndroidRuntime(10325):    at java.lang.reflect.Method.invoke(Method.java:511)
03-06 19:10:19.940: E/AndroidRuntime(10325):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
03-06 19:10:19.940: E/AndroidRuntime(10325):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
03-06 19:10:19.940: E/AndroidRuntime(10325):    at dalvik.system.NativeStart.main(Native Method) 
```

为什么我会收到此异常？

当我尝试在此设备上使用任何市场应用程序使用条形码时，还有一件事它也有同样的问题。我想我必须在我的特定设备上进行一些设置。但我找不到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:33:34.227

你从哪里得到你正在使用的 jar 文件？好像不是官方的ZXing。

注意对您的意图的操作

```
com.aztecbarcodereader.zxing.client.android.SCAN 
```

这与官方 ZXing 应用程序使用的操作字符串不匹配，这是真实的：

```
com.google.zxing.client.android.SCAN 
```

如果您修改了 IntentIntegrator.java 文件，那么您需要恢复更改并使用原始源代码。如果您没有修改它，那么您需要返回 ZXing 官方网站并下载一份新的副本，因为您拥有的那个似乎是由其他人（错误地）制作的。

你可以在这里下载官方的：[https](https://code.google.com/p/zxing/downloads/detail?name=ZXing-2.1.zip)`android-integration` ://code.google.com/p/zxing/downloads/detail? name=ZXing-2.1.zip一旦你得到 zip 文件打开它，里面是你的 jarfile需要。

# apache-poi - apache-poi 在页眉或页脚中插入文件名

> ID：15249410
> 
> 赞同：0
> 
> 时间：2013-03-06T14:05:45.763
> 
> 标签：apache-poi, export-to-excel, excel-2003, poi-hssf

我正在使用 apache poi 库（poi-3.8-20120326.jar）

如何在 xls (hssf) 文档的页脚中添加文件名？

我的方法如下：

```
final static public String FILE_NAME = "&[File]";
public static void insertFilename(Sheet sheet) {
    sheet.getFooter().setLeft(FILE_NAME);
} 
```

问题是，Microsoft Excel 2003 显示

> 文件]

如果我打开页脚编辑器，单击该字段，不做任何更改，然后保存——它可以工作。编辑器显示为

> ＆[文件]

是否有解决方法或肮脏的技巧来避免这种情况？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:38:05.870

它在 Excel 中可能看起来像“&[File]”，但这不是它在内部存储的方式。您正在为 .xls 文件使用 HSSF，因此请使用以下[静态 HeaderFooter 方法](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HeaderFooter.html)来获取文件名的内部 Excel 代码：

```
import org.apache.poi.hssf.usermodel.HeaderFooter;

String fileIndicator = HeaderFooter.file(); 
```

快速查看源代码确定内部代码是字符串“&F”。

如果有人将 XSSF 用于 .xlsx 文件，则没有相应的`file`方法。但是，[XSSFHeaderFooter 的文档](http://poi.apache.org/apidocs/org/apache/poi/xssf/usermodel/extensions/XSSFHeaderFooter.html)表明您可以直接使用字符串“&F”。

# mysql - 使用 Amazon RDS MySQL 和 Play Framework 1.2.5（c3p0 默认设置）时连接偶尔挂起

> ID：15249411
> 
> 赞同：4
> 
> 时间：2013-03-06T14:05:48.007
> 
> 标签：mysql, playframework-1.x, c3p0, amazon-rds

我们在[使用 RDS Mysql 的 Amazon 托管 Play 应用程序时](http://www.mchange.com/projects/c3p0/#maxAdministrativeTaskTime)遇到问题。

有时应用程序最终没有响应。今天我用 jstack -F 检查了线程状态，有多个线程卡在 c3p0 连接的本机代码中：

```
Thread 14060: (state = IN_NATIVE)
 - java.net.SocketInputStream.socketRead0(java.io.FileDescriptor, byte[], int, int, int) @bci=0 (Compiled frame; information may be imprecise)
 - java.net.SocketInputStream.read(byte[], int, int, int) @bci=79, line=150 (Compiled frame)
 - java.net.SocketInputStream.read(byte[], int, int) @bci=11, line=121 (Compiled frame)
 - com.mysql.jdbc.util.ReadAheadInputStream.fill(int) @bci=262, line=114 (Compiled frame)
 - com.mysql.jdbc.util.ReadAheadInputStream.readFromUnderlyingStreamIfNecessary(byte[], int, int) @bci=176, line=161 (Compiled frame)
 - com.mysql.jdbc.util.ReadAheadInputStream.read(byte[], int, int) @bci=48, line=189 (Compiled frame)
 - com.mysql.jdbc.MysqlIO.readFully(java.io.InputStream, byte[], int, int) @bci=34, line=3036 (Compiled frame)
 - com.mysql.jdbc.MysqlIO.reuseAndReadPacket(com.mysql.jdbc.Buffer, int) @bci=23, line=3489 (Compiled frame)
 - com.mysql.jdbc.MysqlIO.reuseAndReadPacket(com.mysql.jdbc.Buffer) @bci=3, line=3478 (Compiled frame)
 - com.mysql.jdbc.MysqlIO.checkErrorPacket(int) @bci=12, line=4019 (Compiled frame)
 - com.mysql.jdbc.MysqlIO.sendCommand(int, java.lang.String, com.mysql.jdbc.Buffer, boolean, java.lang.String, int) @bci=428, line=2490 (Compiled frame)
 - com.mysql.jdbc.MysqlIO.sqlQueryDirect(com.mysql.jdbc.StatementImpl, java.lang.String, java.lang.String, com.mysql.jdbc.Buffer, int, int, int, boolean, java.lang.String, com.mysql.jdbc.Field[]) @bci=559, line=2651 (Compiled frame)
 - com.mysql.jdbc.ConnectionImpl.execSQL(com.mysql.jdbc.StatementImpl, java.lang.String, int, com.mysql.jdbc.Buffer, int, int, boolean, java.lang.String, com.mysql.jdbc.Field[], boolean) @bci=130, line=2677 (Compiled frame)
 - com.mysql.jdbc.ConnectionImpl.execSQL(com.mysql.jdbc.StatementImpl, java.lang.String, int, com.mysql.jdbc.Buffer, int, int, boolean, java.lang.String, com.mysql.jdbc.Field[]) @bci=17, line=2627 (Compiled frame)
 - com.mysql.jdbc.StatementImpl.executeQuery(java.lang.String) @bci=534, line=1556 (Compiled frame)
 - com.mysql.jdbc.DatabaseMetaData$9.forEach(java.lang.Object) @bci=174, line=5013 (Compiled frame)
 - com.mysql.jdbc.IterateBlock.doForAll() @bci=25, line=51 (Compiled frame)
 - com.mysql.jdbc.DatabaseMetaData.getTables(java.lang.String, java.lang.String, java.lang.String, java.lang.String[]) @bci=280, line=4991 (Compiled frame)
 - com.mchange.v2.c3p0.impl.DefaultConnectionTester.activeCheckConnectionNoQuery(java.sql.Connection, java.lang.Throwable[]) @bci=21, line=185 (Compiled frame)
 - com.mchange.v2.c3p0.impl.DefaultConnectionTester.activeCheckConnection(java.sql.Connection, java.lang.String, java.lang.Throwable[]) @bci=7, line=62 (Compiled frame)
 - com.mchange.v2.c3p0.AbstractConnectionTester.activeCheckConnection(java.sql.Connection) @bci=4, line=67 (Compiled frame)
 - com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.testPooledConnection(java.lang.Object) @bci=122, line=368 (Compiled frame)
 - com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.refurbishIdleResource(java.lang.Object) @bci=26, line=310 (Compiled frame)
 - com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask.run() @bci=35, line=1999 (Interpreted frame)
 - com.mchange.v2.async.ThreadPerTaskAsynchronousRunner$TaskThread.run() @bci=41, line=255 (Interpreted frame) 
```

如果没有设置其他连接测试，DefaultConnectionTester.activeCheckConnectionNoQuery 似乎会检查 DatabaseMetaData.getTables。

C3p0 手册有关于[配置正确连接测试](http://www.mchange.com/projects/c3p0/#configuring_connection_testing)的说明，[这个答案](https://stackoverflow.com/a/10357595/28482)有关于使用 Play 进行 c3p0 设置的说明！但我想知道：

*   有没有办法检查这是什么问题？
    *   我之前遇到的标准“Mysql 连接在 8 小时后被终止”结果异常
*   似乎有一些使用 c3p0/Play/Hibernate 的默认连接测试，因为这已经完成了？
    *   我有一种预感，默认情况下 c3p0 不进行连接测试
        *   默认值 idleConnectionTestPeriod = 0，testConnectionOnCheckin = false，testConnectionOnCheckout = false
*   有没有办法为连接测试查询设置超时？
    *   例如，即使我配置了一些明智的preferredTestQuery，该查询是否也会因为当前的getTables() 调用而挂起？
*   还有什么我应该考虑的吗？

* * *

# 使用自动测试表更新（不是解决方案）

我们将 c3p0.automaticTestTable 设置为进行更合理的连接测试，但这似乎并没有解决问题，只是稍微更改了线程的堆栈跟踪。

在类似的情况下，我们现在有如下线程堆栈：

```
"Task-Thread-for-com.mchange.v2.async.ThreadPerTaskAsynchronousRunner@6064cd08" daemon prio=10 tid=0x00007f53d403a000 nid=0x63dd runnable [0x00007f53dce4a000]
   java.lang.Thread.State: RUNNABLE
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(SocketInputStream.java:150)
        at java.net.SocketInputStream.read(SocketInputStream.java:121)
        at com.mysql.jdbc.util.ReadAheadInputStream.fill(ReadAheadInputStream.java:114)
        at com.mysql.jdbc.util.ReadAheadInputStream.readFromUnderlyingStreamIfNecessary(ReadAheadInputStream.java:161)
        at com.mysql.jdbc.util.ReadAheadInputStream.read(ReadAheadInputStream.java:189)
        - locked <0x00000000dbecd0d8> (a com.mysql.jdbc.util.ReadAheadInputStream)
        at com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:3036)
        at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3489)
        at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3478)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4019)
        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2490)
        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2651)
        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2677)
        - locked <0x00000000dbec1a70> (a com.mysql.jdbc.JDBC4Connection)
        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2627)
        at com.mysql.jdbc.StatementImpl.executeQuery(StatementImpl.java:1556)
        - locked <0x00000000dbec1a70> (a com.mysql.jdbc.JDBC4Connection)
        - locked <0x00000000d1330078> (a com.mysql.jdbc.StatementImpl)
        at com.mchange.v2.c3p0.impl.DefaultConnectionTester.activeCheckConnection(DefaultConnectionTester.java:73)
        at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.testPooledConnection(C3P0PooledConnectionPool.java:374)
        at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.refurbishIdleResource(C3P0PooledConnectionPool.java:310)
        at com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask.run(BasicResourcePool.java:1999)
        at com.mchange.v2.async.ThreadPerTaskAsynchronousRunner$TaskThread.run(ThreadPerTaskAsynchronousRunner.java:255) 
```

播放线程正在等待获取数据库连接：

```
"play-thread-3" prio=10 tid=0x00007f53c400b000 nid=0x5b3e in Object.wait() [0x00007f53ddd57000]
   java.lang.Thread.State: TIMED_WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0x00000000db9f38f8> (a com.mchange.v2.resourcepool.BasicResourcePool)
        at com.mchange.v2.resourcepool.BasicResourcePool.prelimCheckoutResource(BasicResourcePool.java:579)
        - locked <0x00000000db9f38f8> (a com.mchange.v2.resourcepool.BasicResourcePool)
        at com.mchange.v2.resourcepool.BasicResourcePool.prelimCheckoutResource(BasicResourcePool.java:584)
        ... (näitä vaihtelevat määrät)
        at com.mchange.v2.resourcepool.BasicResourcePool.prelimCheckoutResource(BasicResourcePool.java:584)
        - locked <0x00000000db9f38f8> (a com.mchange.v2.resourcepool.BasicResourcePool)
        at com.mchange.v2.resourcepool.BasicResourcePool.prelimCheckoutResource(BasicResourcePool.java:584)
        - locked <0x00000000db9f38f8> (a com.mchange.v2.resourcepool.BasicResourcePool)
        at com.mchange.v2.resourcepool.BasicResourcePool.checkoutResource(BasicResourcePool.java:477)
        at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:525)
        at com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource.getConnection(AbstractPoolBackedDataSource.java:128)
        at org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider.getConnection(InjectedDataSourceConnectionProvider.java:71)
        at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:446)
        at org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)
        at org.hibernate.jdbc.JDBCContext.connection(JDBCContext.java:160)
        at org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:81)
        at org.hibernate.impl.SessionImpl.beginTransaction(SessionImpl.java:1473)
        at org.hibernate.ejb.TransactionImpl.begin(TransactionImpl.java:60)
        at play.db.jpa.JPAPlugin.startTx(JPAPlugin.java:377)
        at play.db.jpa.JPAPlugin.beforeInvocation(JPAPlugin.java:345)
        at play.plugins.PluginCollection.beforeInvocation(PluginCollection.java:473)
        at play.Invoker$Invocation.before(Invoker.java:217)
        at play.Invoker$Invocation.run(Invoker.java:277)
        at play.server.PlayHandler$NettyInvocation.run(PlayHandler.java:229)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:178)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:292)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722) 
```

一些注意事项：

*   有可能（至少在理论上）许多连接恰好在读取堆栈转储的同时被测试，即使我发现这不太可能。
*   在[另一个问题](https://stackoverflow.com/questions/9817681/a-thread-was-hanged-on-java-net-socketinputstream-socketread0native-method-an)中提到数据死锁或硬件/网络问题可能会导致这种行为。
    *   至少不应该有任何正在进行的模式修改。

兄弟，图科

* * *

回答我自己：

*   找不到连接挂起的原因:(
    *   RDS 有 MySQL 的 error.log，不幸的是那里什么都没有
*   Play 有一些 c3p0 ComboPooledDataSource 的默认设置（在*DBPlugin.onApplicationStart()*中）
    *   idleTimeExcessConnections ：来自 application.conf db.pool.maxIdleTimeExcessConnections（默认 0）
    *   checkoutTimeout ：来自 application.conf db.pool.timeout（默认 5000）
    *   空闲连接测试周期：10
    *   setTestConnectionOnCheckin : 真
    *   另外，conf/c3p0.properties 可以用来设置自定义属性
*   尚未找到为连接测试设置超时的方法（可能不支持简短的[DefaultConnectionTester源代码查找）](http://www.mchange.com/projects/c3p0/#maxAdministrativeTaskTime)

我们将继续设置 c3p0.automaticTestTable 并检查以后是否会出现任何问题。

更新：不幸的是我们还没有解决问题:(同样使用自动测试表，连接测试似乎卡住了 java.net.SocketInputStream.socketRead0(Native Method)

* * *

再次对自己回答：

我们最终使用 c3p0:s [maxAdministrativeTaskTime](http://www.mchange.com/projects/c3p0/#maxAdministrativeTaskTime)尝试了这种“为连接测试查询设置超时”方法。这有点小技巧，所以必须看看这是否可以成为最终解决方案（如果可行）。

到目前为止还没有问题，我们将看看它是如何工作的。日志中也没有 c3p0 错误/堆栈跟踪，我希望此中断会显示在日志中吗？要么超时尚未发生，要么我们应该调整日志配置以显示 c3p0 日志。

更新（2013-04-04）：在此之后问题（可能）没有经常发生，但时不时发生:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T10:29:37.297

再次对自己回答：

我们首先使用为 MySQL 驱动程序指定的 socketTimeout，以便连接测试不会卡住。

似乎底层的 TCP 连接结束了，因此服务器没有回答（TCP ACK 或任何东西）。

更新：最终的解决方案是为 AWS 提供 tcpdump 支持，他们在 AWS 基础设施中发现了一些案例。他们建议我们在 EC2 实例的安全组中打开临时端口范围。[AWS 论坛上](https://forums.aws.amazon.com/thread.jspa?messageID=440379)的更多讨论。

# mysql - MySQL Workbench 从 SQL Server 2008 迁移到 MySQL：错误：确定要复制的行数：不支持的操作数类型

> ID：15249413
> 
> 赞同：0
> 
> 时间：2013-03-06T14:05:54.193
> 
> 标签：mysql, sql-server, migration, mysql-workbench, database-migration

我正在尝试使用 MySQL Workbench 5.2.46CE 将数据库从 SQL Server 2008 迁移到 MySQL。在复制数据之前一切正常（步骤“批量数据传输”）：

> 开始...
> 为数据复制
> 准备信息...为数据复制准备信息已完成
> 确定要复制的行
> 数...计算表中的行数...
> wbcopytables.exe --count-only --passwords-from -stdin --odbc-source=Driver={SQL Server};Server=.\sqlexpress;Database=... ;User Id=... ;Password=... --table-file=...
> 错误：确定要复制的行数：+ 不支持的操作数类型：“NoneType”和“str”
> 失败

我真的不明白为什么我会得到这个，所以如果你们有任何想法...... :) （PS：我今天开始使用 SQL Server 2008 和 MySQL Workbench，所以我真的不知道它们是如何工作的）

**编辑 2** - SQL Express 表 DDL（更新）

```
CREATE TABLE [dbo].[S_OCivilite](
    [OCIV_Id] [int] IDENTITY(0,1) NOT N'',
    [OCIV_Code_Pan] [nvarchar](3) NOT N'',
    [OCIV_Intitule_Pan] [nvarchar](35) NOT N'',
    [OCIV_DateModif_Pd] [datetime] NOT N'',
 CONSTRAINT [PK_OCIV_Id] PRIMARY KEY CLUSTERED 
(
    [OCIV_Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY],
 CONSTRAINT [IX_OCIV_Code_Pan] UNIQUE NONCLUSTERED 
(
    [OCIV_Code_Pan] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:55:04.870

When moving from one DB to another you will always run into datatype conversion hurdles. In a nutshell you need to understand what table structures are in your source DB and how those map to the same structures in the target DB.All these SQL Databases support or should support ANSI SQL, the collective common aspect of SQL, however each DB vendor has procedural extensions and DDL that makes cross conversion interesting.

So reading your question you do not have SQL Server 2008, but SQL Express which is a "lite" version of SQL Server. Your error is saying that in reading a table to get the row counts it has found a datatype or an unsupported ddl statement and can't handle the typecasting.

I use MySQL workbench, but have not tried to migrate a full DB. You should look for settings that relax the typecasting or send everything into MySQL as a varchar and then have a subsequent ETL process correctly process and typecast the data. Or do a table at a time until you understand what it is truly complaining about.

If you can post the records or record it is complaining about or the table DDL from SQLExpress that would really help.

EDIT 1: Response to SQL DDL edit

I would first off suspect the Identity column in SQL Server. The MySQL corresponding Datatype should be AUTO_INCREMENT . You need to find the logs for Bulk loader. You should be able to set the level of logging and actually see what it is complaining about.

# xml - JSON 是一种类似于 SOAP 的传输协议或类似于 XML 的格式语言

> ID：15249416
> 
> 赞同：1
> 
> 时间：2013-03-06T14:05:58.070
> 
> 标签：xml, json, soap

只是想澄清一下我对 JSON 的逻辑，它是像 SOAP 这样的传输协议还是像 XML 这样的标记语言？为什么我要问这个问题，因为当开始搜索肥皂内容时，有很多链接可用，其中比较 JSON/SOAP 和 JSON/XML 都存在。

谢谢， A agg。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:09:09.220

> 它是像 SOAP 这样的传输协议还是像 XML 这样的标记语言？

不，它是一种数据格式（如 XML），但不是一种标记语言。

# android - 用于主题溢出下拉菜单的主题/样式是什么

> ID：15249422
> 
> 赞同：1
> 
> 时间：2013-03-06T14:06:18.383
> 
> 标签：android, android-actionbar, android-theme

我正在尝试为溢出下拉菜单设置主题，但我无法为操作栏的这一部分找到正确的主题和样式。

我目前正在查看以下文件：

> [https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/themes.xml](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/themes.xml) [https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values /styles.xml](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/styles.xml)

任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:16:39.330

我设法通过在这里创建一个虚假的全息主题找到了我想要的东西：

> [http://jgilfelt.github.com/android-actionbarstylegenerator/](http://jgilfelt.github.com/android-actionbarstylegenerator/)

然后我只是查看了 zip 文件中的示例并更新了我的主题/样式文件，如下所示：

```
<item name="android:popupMenuStyle">@style/MyApp.Theme.PopupMenu</item>
<item name="android:dropDownListViewStyle">@style/MyApp.Theme.DropDownListView</item>

<style name="MyApp.Theme.PopupMenu" parent="@android:style/Widget.Holo.ListPopupWindow">
    <item name="android:popupBackground">@drawable/theme_menu_popup_background</item>
</style>

<style name="MyApp.Theme.DropDownListView" parent="@android:style/Widget.Holo.ListView.DropDown">
    <item name="android:listSelector">@drawable/theme_menu_popup_selector</item>
</style> 
```

我想知道如何彻底检查所有内容，但似乎我只能设法为我的应用程序提供那些基本的主题/样式特定位，因为找到必要的样式语法需要很长时间。要是有更简单的方法就好了。

当然，我不知道如何定位`ListPopupWindow`甚至更改文本的颜色，但现在已经足够了。

# java - 创建或替换并解析 Java 源，我无法使用 Java 源创建函数

> ID：15249424
> 
> 赞同：6
> 
> 时间：2013-03-06T14:06:28.593
> 
> 标签：java, oracle

甲骨文环境。

以下 Java 源代码已正确编译：

```
CREATE OR REPLACE AND RESOLVE JAVA SOURCE NAMED hr.roman
   AS package Package.NumeriRomani;

class Numero{
    String r="";
    int a=0;

    Numero(int n){
        a=n;
            if(n==0){
                r="NULL";
                return;}
            while(n>=1000){
                    r+="M";
                    n-=1000;}
            if(n>=900){
                    r+="CM";
                    n-=900;}
            while(n>=500){
                    r+="D";
                    n-=500;}
            if(n>=400){
                    r+="CD";
                    n-=400;}
            while(n>=100){
                    r+="C";
                    n-=100;}
            if(n>=90){
                    r+="XC";
                    n-=90;}
            while(n>=50){
                    r+="L";
                    n-=50;}
            if(n>=40){
                    r+="XL";
                    n-=40;}
            while(n>=10){
                    r+="X";
                    n-=10;}
            if(n>=9){
                    r+="IX";
                    n-=9;}
            if(n>=5){
                    r+="V";
                    n-=5;}
            if(n==4){
                    r+="IV";
                    n-=4;}
            while(n>=1){
                    r+="I";
                    n--;}
    }//Numero(int)
    Numero(String k){
        int vCor,vNext;
        r=k;
        for(int i=0;;i++){
            vCor=valore(k.charAt(i));
            if(i==k.length()-1){
                a+=vCor;
                break;}
            vNext=valore(k.charAt(i+1));
            if(vCor>=vNext)
                a+=vCor;
            else
                a-=vCor;
        }
    }

    static public int valore(char c){
        switch(c){
          case 'I': return 1;
            case 'V': return 5;
            case 'X': return 10;
            case 'L': return 50;
            case 'C': return 100;
            case 'D': return 500;
            case 'M': return 1000;
            default: return 0;
        }
    }

    public int getArabo(){
        return a;
    }
    public String getRomano(){
        return r;
    }
    }
/ 
```

我想为 getArabo 创建一个函数，为 getRoman 创建一个函数，但我总是收到错误。

我尝试过：

```
CREATE OR REPLACE FUNCTION hr.converti (alfa IN varchar2)
   RETURN VARCHAR2
AS
   LANGUAGE JAVA
   NAME 'ROMAN.getArabo(java.lang.String) return java.lang.String';
/ 
```

但我收到错误：

```
select hr.converti('XII') from dual; 
```

ORA-29540: ROMAN 类不存在

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T14:29:35.473

以下是您需要更正才能使用此 java 类的内容：

1.  使用静态方法，以便可以从 Oracle 调用它们而无需对象实例化
2.  您的源已命名`ROMAN`，但您的类已命名`Numero`。从 Oracle 调用该类时，您将引用该类。**为类和源提供相同的名称将防止混淆。**
3.  java是强类型的，你不能将方法转换`int getArabo()`为：

    ```
    getArabo(java.lang.String) return java.lang.String 
    ```

这是一个工作示例：

```
SQL> CREATE OR REPLACE AND COMPILE JAVA SOURCE NAMED "Roman" AS
  2  class Roman {
  3     public static int getArabo(java.lang.String x){
  4          return 0;
  5      }
  6  }
  7  /

Java created

SQL> CREATE OR REPLACE FUNCTION converti (alfa IN varchar2)
  2     RETURN NUMBER
  3  AS LANGUAGE JAVA NAME 'Roman.getArabo(java.lang.String) return int';
  4  /

Function created

SQL> select converti ('aaa') from dual;

CONVERTI('AAA')
---------------
              0 
```

* * *

此外，您可以使用 Oracle 函数将数字转换为罗马字符值[`TO_CHAR`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements004.htm#i34570)（但该`TO_NUMBER`函数不能用于反向操作）：

```
SQL> SELECT to_char(2013, 'RN') FROM dual;

TO_CHAR(2013,'RN')
------------------
         MMXIII 
```

# php - 来自 php 的 Ajax 结果有额外的新行

> ID：15249425
> 
> 赞同：0
> 
> 时间：2013-03-06T14:06:33.077
> 
> 标签：php, ajax

我有一个 ajax 代码如下。现在在我的 php 中的问题我只是写了一个回显作为代码，以防我的 sql 无法插入并且我尝试在此处进行比较，但我注意到它有额外的新行导致该语句失败 if(responseData=="SMGFE\n" ）。我什至把多余的“\n”放在一起检查，但它也失败了。这个问题有什么解决办法吗？

```
function ajaxLoad(url,postData,plain) {
            //alert("in url : "+url);
            var http_request = false;

            if (window.XMLHttpRequest) { // Mozilla, Safari, ...
                http_request = new XMLHttpRequest();
                if (http_request.overrideMimeType && plain) {
                    http_request.overrideMimeType('text/plain');
                }
            } else if (window.ActiveXObject) { // IE
                try {
                    http_request = new ActiveXObject("Msxml2.XMLHTTP");
                } catch (e) {
                    try {
                        http_request = new ActiveXObject("Microsoft.XMLHTTP");
                    } catch (e) {}
                }
            }
            if (!http_request) {
                alert('Giving up :( Cannot create an XMLHTTP instance');
                return false;
            }
            http_request.onreadystatechange =  function() {
                if (http_request.readyState == 4) {
                    if (http_request.status == 200) {
                          var responseData = http_request.responseText;
                        alert("http response :"+responseData+"TEST");
                        if(responseData=="SMGFE\n")
                            {
                                alert("Gname "+document.getElementById("gname").value+" Already Exist");
                            }
                            else{

                            alert("Successfully Inserted");  
                            clearSelection();                   
                              window.opener.location.reload();
                          window.close();

                      }
                    }
                    else {
                        alert('Request Failed: ' + http_request.status);
                    }
                }
            };
        //alert("before post data"+postData.length);
            if (postData) { // POST
                  //alert("post data"+postData.length);
                http_request.open('POST', url, true);
                http_request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');  
                http_request.setRequestHeader("Content-length", postData.length);
                http_request.send(postData);
            }
            else {
                http_request.open('GET', url, true);
                http_request.send(null);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:16:38.010

我不完全了解您要做什么，但这不是您问题的解决方案吗？

```
if(responseData.substr(0,5) =="SMGFE") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:23:18.800

您最好尝试从 responseData 中删除换行符和任何空格，或者在您的 php 文件中尝试

```
trim($your_php_variable_responseData); 
```

请参阅[php 手册](http://php.net/manual/en/function.trim.php)

```
> This function returns a string with whitespace stripped from the beginning 
and end of str. Without the second parameter, trim() will strip these characters:

" " (ASCII 32 (0x20)), an ordinary space.
"\t" (ASCII 9 (0x09)), a tab.
"\n" (ASCII 10 (0x0A)), a new line (line feed).
"\r" (ASCII 13 (0x0D)), a carriage return.
"\0" (ASCII 0 (0x00)), the NUL-byte.
"\x0B" (ASCII 11 (0x0B)), a vertical tab. 
```

或者您可以在 javscript 中尝试

```
responseData= responseData.replace(/^\s+|\s+$/g,""); 
```

# ruby-on-rails-3 - 在 rails3 中使用 OR 条件

> ID：15249426
> 
> 赞同：-3
> 
> 时间：2013-03-06T14:06:34.210
> 
> 标签：ruby-on-rails-3

我有一个用户表，department_id 是该字段之一，我必须检查两个条件：department_id=>current_user.id 或 department_id=>null。

我不知道如何在 rails3 中为此编写查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:32:28.950

这是一个假设您有一个 Customer 模型的示例。

```
Customer.where("department_id = ? OR department_id IS NULL", current_user.id) 
```

您也可以在此处查看指南：

[http://guides.rubyonrails.org/active_record_querying.html#conditions](http://guides.rubyonrails.org/active_record_querying.html#conditions)

# google-app-engine - 如何在单个 App Engine 用户帐户上添加更多应用程序

> ID：15249429
> 
> 赞同：0
> 
> 时间：2013-03-06T14:06:38.927
> 
> 标签：google-app-engine

我有很多在应用引擎上运行的小型应用程序后端和网站。我已达到最多 12 个应用程序。我想知道是否有办法向单个用户添加更多内容？为什么限制是12？是否有未来版本的 GAE 可以让用户创建更多应用程序？我可以付费以在单个用户帐户上拥有更多吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:27:15.940

虽然我不确定您是否可以付费获得更多，但如果您有一个，您可以从您的 Google Apps 帐户中再获得 10 个。然后，您可以在该应用程序的管理员中添加您的个人帐户并正常继续。

虽然这听起来像是一种解决方法，但它实际上是有道理的，因为最终您将在它自己的域上部署您的应用程序，并且您需要拥有一个 Google Apps 帐户才能实现这一目标。从那里如果您有更多特定域的用户，他们每个人最多可以启动 10 个应用程序，当然您（他们）可以与更多人共享，所以理论上没有限制 :)

您可以通过开始免费试用来创建[Google Apps 帐户](http://www.google.com/enterprise/apps/business/)，如果您只有一个用户，则可以在 30 天后降级到免费版本。如果您有更多，那么您将不得不开始为此付费（不幸的是，最近发生了变化）。

# android - 带有片段视图的 Android 操作栏选项卡重叠

> ID：15249436
> 
> 赞同：1
> 
> 时间：2013-03-06T14:06:54.820
> 
> 标签：android, tabs, android-fragments, android-fragmentactivity, fragmenttransaction

我的标签：
private void tabSherlock() { actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

```
 ActionBar.Tab tab1 = actionBar.newTab();
    tab1.setText("Home");
    tab1.setTabListener(new TabListener<HomeFragment>(this, "Home",
            HomeFragment.class));
    actionBar.addTab(tab1);

    ActionBar.Tab tab4 = actionBar.newTab();
    tab4.setText("Tab4");
    tab4.setTabListener(new TabListener<BuzzFragment>(this, "Tab4",
            BuzzFragment.class));
    actionBar.addTab(tab4);
} 
```

选项卡监听器：

```
public class TabListener<T extends Fragment> implements
        ActionBar.TabListener {
    private Fragment mFragment;
    private final SherlockFragmentActivity mActivity;
    private final String mTag;
    private final Class<T> mClass;

    /**
     * Constructor used each time a new tab is created.
     * 
     * @param activity
     *            The host Activity, used to instantiate the fragment
     * @param tag
     *            The identifier tag for the fragment
     * @param clz
     *            The fragment's Class, used to instantiate the fragment
     */
    public TabListener(SherlockFragmentActivity activity, String tag,
            Class<T> clz) {
        mActivity = activity;
        mTag = tag;
        mClass = clz;

        android.support.v4.app.FragmentTransaction ft = mActivity
                .getSupportFragmentManager().beginTransaction();

        // Check to see if we already have a fragment for this tab, probably
        // from a previously saved state. If so, deactivate it, because our
        // initial state is that a tab isn't shown.
        mFragment = mActivity.getSupportFragmentManager()
                .findFragmentByTag(mTag);
        if (mFragment != null && !mFragment.isDetached()) {
            ft.detach(mFragment);
        }

    }

    /* The following are each of the ActionBar.TabListener callbacks */

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // User selected the already selected tab. Usually do nothing.

        Log.d(TAG, "onTabReselected");
    }

    @Override
    public void onTabSelected(com.actionbarsherlock.app.ActionBar.Tab tab,
            android.support.v4.app.FragmentTransaction ft) {
        Log.d(TAG, "onTabSelected");

        Fragment preInitializedFragment = mActivity
                .getSupportFragmentManager().findFragmentByTag(mTag);
        if (preInitializedFragment == null) {
            mFragment = SherlockFragment.instantiate(mActivity,
                    mClass.getName());
            ft.add(android.R.id.content, mFragment, mTag);
            // ft.commit();
        } else {
            ft.attach(preInitializedFragment);
            // ft.commit();
        }

        // ft = mActivity.getSupportFragmentManager().beginTransaction();
        //
        // if (mFragment == null) {
        // mFragment = Fragment.instantiate(mActivity, mClass.getName());
        // ft.add(android.R.id.content, mFragment, mTag);
        // ft.commit();
        // } else {
        // ft.attach(mFragment);
        // ft.commit();
        // }
    }

    @Override
    public void onTabUnselected(
            com.actionbarsherlock.app.ActionBar.Tab tab,
            android.support.v4.app.FragmentTransaction ft) {

        Log.d(TAG, "onTabUnselected");

        Fragment preInitializedFragment = mActivity
                .getSupportFragmentManager().findFragmentByTag(mTag);

        if (preInitializedFragment != null) {
            ft.detach(preInitializedFragment);
            // ft.commit();
        } else if (mFragment != null) {
            ft.detach(mFragment);
            // ft.commit();
        }

        // ft = mActivity.getSupportFragmentManager().beginTransaction();
        //
        // if (mFragment != null) {
        // ft.detach(mFragment);
        // ft.commitAllowingStateLoss();
        // }
    }

    @Override
    public void onTabReselected(
            com.actionbarsherlock.app.ActionBar.Tab tab,
            android.support.v4.app.FragmentTransaction ft) {

        Log.d(TAG, "onTabReselected");

    }
} 
```

一个选项卡包含项目单击移动到详细信息片段的列表视图：尝试 {

```
 // FragmentTransaction fragmentTransaction =
 getFragmentManager().beginTransaction();
 // fragmentTransaction.addToBackStack(name)
 android.support.v4.app.FragmentTransaction transaction =
 getSupportFragmentManager()
 .beginTransaction();

 // Replace whatever is in the fragment_container view with this
 // fragment,
 // and add the transaction to the back stack so the user can
 // navigate back
 // transaction.replace(android.R.id.content, newFragment);
 transaction.replace(android.R.id.content, newFragment, "Place");
 transaction.addToBackStack("Place");

 // Commit the transaction
 transaction.commit();
 } catch (Exception e) {

 e.printStackTrace();
 } 
```

如果我点击另一个选项卡视图会从细节片段中重叠，任何人都可以帮助我提前谢谢。

# java - 为什么这是 NotSerializable？

> ID：15249438
> 
> 赞同：0
> 
> 时间：2013-03-06T14:06:59.113
> 
> 标签：java, android, serialization

我得到一个带有以下代码的 NotSerializableException ，但我不知道为什么：

```
private class Entry implements Serializable {
    public int mProgress, mReps;
    public int mDays;
    public String[] mEntry;

    public Entry() {
        mEntry = new String[2];
        mProgress = mReps = 0;
        mDays = 0;
    }
}

private HashMap<String,Entry> mEntries;

FileOutputStream fos = mApp.openFileOutput("FOO", Context.MODE_PRIVATE);
ObjectOutputStream os = new ObjectOutputStream(fos);
os.writeObject(mEntries);
os.close(); 
```

我发现了上述 4 行之一中发生的异常：

保存异常 java.io.NotSerializableException: com.company.app.classname

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T14:13:46.123

我怀疑这`Entry`是一个内部类，因此将引用可能不可序列化的“外部”类。

尝试以下操作：

```
private static class Entry implements Serializable {
...
} 
```

注意`static`关键字。

编辑：

正如@Henrik 所指出的，查看确切的异常消息和堆栈跟踪通常会提供重要的线索。在这种情况下，异常显示了不可序列化的类的`com.company.app.classname`名称`Entry`（

# css - 父母重叠孩子的盒子阴影

> ID：15249443
> 
> 赞同：0
> 
> 时间：2013-03-06T14:07:02.683
> 
> 标签：css, overflow

我有 2 个 div，一个父级和一个子级，它们都有固定的宽度，子级也有固定的高度，子级 div 向左浮动`box-shadow:0 1px 2px 0 rgba(0,0,0,0.4)`，问题是父级 div 与子级的左阴影重叠。

我无法将 margin-left 添加到子元素，因为它的左侧与父 div 上方的菜单 div 的左侧对齐，因此它必须恰好在它所在的位置。

我尝试了 z-index，减去父级的边距以及许多其他我什至无法计算的东西，但似乎没有任何东西可以解决问题。代码是：

```
#menu {
  width: 100%;
  height: 50px;
  background: #252525;
  margin: 0 auto 20px auto;
}

#wrapper {
  background: #CCC;
  width: 1195px;
  margin: 0 auto;
  clear: both;
  overflow: auto;
  background: none;
  position: relative;
}

#wrapper {
  overflow: hidden;
}

#db_left,
#db_right,
#db_center {
  margin-right: 30px;
  float: left;
}

#db_left {
  width: 170px;
  position: relative;
}

#db_right {
  margin-right: 0 !important;
  width: 315px;
}

#db_center {
  width: 650px;
  margin-top: 20px !important;
}

#profpic_holder {
  width: 150px;
  height: 150px;
  padding: 10px;
  position: relative;
  float: left;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
}
```

```
<body>
  <div class="wrapper">
    <div class="header">
      Some Content...
    </div>
    <div id="db_left">
      <div id="profpic_holder">
        <img src="#" width="150" height="150" alt="" />
      </div>
      <div id="profname">
      </div>
    </div>
    <div id="db_center">
    </div>
    <div id="db_right">
    </div>
  </div>
</body>
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-01T04:07:44.620

修复。

`#wrapper`所以在它的`overflow:hidden`区域之外什么都看不到，包括孩子的影子。

我所要做的就是只隐藏它的顶部和底部的溢出，所以我这样做了：

```
#wrapper{
  overflow-y:hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:02:31.540

你拥有它的方式

```
 -webkit-box-shadow:0 1px 2px rgba(0, 0, 0, 0.4);
 box-shadow:0 1px 2px rgba(0, 0, 0, 0.4); 
```

不会有左影。如果你想让阴影出现在四面八方使用这个

```
 -webkit-box-shadow:0 0 2px 1px rgba(0, 0, 0, 0.4);
 box-shadow:0 0 2px 1px rgba(0, 0, 0, 0.4); 
```

我希望这有帮助。

# mysql - 如何对值为 X 的列执行计数

> ID：15249447
> 
> 赞同：0
> 
> 时间：2013-03-06T14:07:12.183
> 
> 标签：mysql, sql

有没有一种方法可以使用 SQL 执行计数操作，其中列等于 X，理想情况下，当同一列等于 Y 和 Z 时，单独计数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:08:49.723

```
SELECT yourcolumn, COUNT(*) AS cnt
FROM yourtable
WHERE yourcolumn IN ('X', 'Y', 'Z')
GROUP BY yourcolumn 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T14:08:37.750

像这样的东西？

```
select
  sum(case when val = 'x' then 1 else 0 end) as countX
  ,sum(case when val = 'y' then 1 else 0 end) as countY
  ,sum(case when val = 'z' then 1 else 0 end) as countZ 
from table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:13:44.597

我建议如下：

```
SELECT YourColumn, COUNT(<Any Column of your table>)
FROM YourTable
GROUP BY YourColumn 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T14:14:05.893

我相信以下（较短的）语句应该适用于 MySQL：

```
SELECT COUNT(val='X'), COUNT(val='Y'), COUNT(val='Z') FROM ... 
```

# php - 用于从 mysql 获取数据的 PHP 脚本仅获取部分值

> ID：15249450
> 
> 赞同：-1
> 
> 时间：2013-03-06T14:07:25.523
> 
> 标签：php, mysql, json

我正在尝试从 mysql 表中获取数据并通过 php 脚本将其作为 json 字符串发送，以便稍后可以由例如 ios 应用程序使用。

我到目前为止的代码是：

```
<?php

$con = mysql_connect("xxx", "xxx", "xxx");

mysql_select_db("FreeSir_MarinaLaroverket") or die("Unable to select database");

$arr = array();

$rs = mysql_query("SELECT * FROM Nyheter");

while($obj = mysql_fetch_assoc($rs))
{
$arr[] = $obj;
}

echo json_encode($arr);

?> 
```

但是当我使用脚本时，我得到以下信息：

```
[{"Index":"1","Title":null,"News":null,"Date":"11\/1"},{"Index":"2","Title":"Andra nyheten","News":null,"Date":"22\/2"}] 
```

正如您可能看到的那样，我有一些从无处弹出的空值。我已经仔细检查了我是否插入了正确的值，但它仍然只是给我空值。

如果你们中的任何人都能看到是什么让这段代码没有给我我想要的所有值，我将不胜感激。

此致

自由宁静

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:15:56.557

如果您的`var_dump($arr)`语句显示正确的数据，那么您的 JSON 表示可能有问题。检查[手册](http://php.net/json_encode)，`json_encode()`并查找`$options`参数。

# javascript - JavaScript 获取点击行的数据

> ID：15249452
> 
> 赞同：0
> 
> 时间：2013-03-06T14:07:26.850
> 
> 标签：javascript, dom

晚上好，我想从用户单击的行中获取所有数据，所以我尝试了这个脚本，它获取了行 ID，但它没有获取该行中存在的数据，我推送该行中的每个数据到一个数组以供进一步使用：

```
 function findRowNumber() {
    var rowIdx;
    var rowData = new Array();
    var table = document.getElementById('product_table');
    var rows = table.getElementsByTagName('tr');
    var selectedRow;
    var rowCellValue;
    for (i = 0; i < rows.length; i++) {
        rows[i].onclick = function() {
            rowIdx = this.rowIndex;
            selectedRow = rows[rowIdx];
            for (j = 1; j < selectedRow.length; j++) {  // it doesn't enter that loop
        rowCellValue = selectedRow.cells[j].value;
        rowData.push(rowCellValue);
        alert("Value " + rowCellValue);

    }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:09:29.090

selectedRow 在单击该行后填充，而您在绑定单击处理程序后但在实际单击之前尝试循环遍历它。您必须在点击处理程序中移动该代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:59:30.513

如果单元格中的数据是文本，

使用 textContent（或 innerText）检索可能更简单。

```
<!doctype html>
<html lang= "en">
<head>
<meta charset= "utf-8">
<title> Small Test Page</title>
<style>
table{border:3px ridge #c0c0c0;border-collapse:collapse;}
th, td{border:1px solid black}
</style>

<script>    
function findRowNumber(){
    var rowIdx;
    var rowData= [];
    var table= document.getElementById('product_table');
    var rows= table.getElementsByTagName('tr');
    var selectedRow;
    var rowCellValue;
    for(i= 0;i<rows.length;i++){
        rows[i].onclick= function(){
            rowIdx= this.rowIndex;
            selectedRow= this.cells;
            for(j= 0;j<selectedRow.length;j++){
                rowCellValue= selectedRow[j].textContent ||
                selectedRow[j].innerText;
                rowData.push('cell '+j+': '+rowCellValue);
            }
            alert("Row #" +rowIdx+'. '+ rowData);
        }
    }
}    
</script>
</head>
<body>
<h1> Retrieve Row Data</h1>
<p> <button type= "button" id= "tableSwapBtn" onclick= "findRowNumber()">
Click to initialize</button> </p>

<table id="product_table" style="width:300px">
<tbody>
<tr> <td> a</td> <td> 1</td> </tr>
<tr> <td> b</td> <td> 2</td> </tr>
<tr> <td> c</td> <td> 3</td> </tr>
<tr> <td> d</td> <td> 4</td> </tr>
<tr> <td> e</td> <td> 5</td> </tr>
<tr> <td> f</td> <td> 6</td> </tr>
<tr> <td> g</td> <td> 7</td> </tr>
</tbody>
</table>
</body>
</html> 
```

# c - GPU (CUDA) 和 CPU 的计算结果不同

> ID：15249453
> 
> 赞同：0
> 
> 时间：2013-03-06T14:07:27.243
> 
> 标签：c, cuda, fractals

我想创建在我的 GPU 上生成分形的程序。首先，我在 C 中创建了一个工作项目，之后我尝试将其转换为 CUDA/C。

不幸的是，在我这样做之后，我发现 CPU 和 GPU 的结果存在差异。

我花了几个小时思考我做错了什么，这对我来说是个谜。

IMO：似乎在while循环中计算值存在差异，因此它比正常的CPU函数结束得更早。

问：有没有可能是真的？如果，我能做些什么来避免这种计算错误？

这是我的整个代码：

```
// C libs
#include <stdint.h>
#include <stdio.h>
#include <iostream>

// Help libs
#include <windows.h>
#include <math.h>

// CUDA libs
#include "cuda.h"
#include "cuda_runtime.h"
#include "device_launch_parameters.h"

__global__ void calulateFractal(unsigned char *a, int N, double c_re, double c_im, int width, int height, double minX, double maxX, double minY, double maxY, double ratioX, double ratioY, int maxLevel)
{
    int i = blockIdx.x * blockDim.x + threadIdx.x;

    if(i < N)
    {
        int x = i % width;
        int y = i / width;

        double p_im = y * ratioY + minY;
        double p_re = x * ratioX + minX;

        double z_re = p_re;
        double z_im = p_im;

        int iteration = 0;

        while ((z_re * z_re + z_im * z_im) < 4 && iteration < maxLevel)
        {
            double tmp_re = z_re * z_re - z_im * z_im + c_re;
            double tmp_im = 2 * z_re * z_im + c_im;
            z_re = tmp_re;
            z_im = tmp_im;
            iteration++;
        }

        a[i] = iteration;
    }
}

void calulateFractalCPU(unsigned char *a, int i, double c_re, double c_im, int width, int height, double minX, double maxX, double minY, double maxY, double ratioX, double ratioY, int maxLevel)
{
    int x = i % width;
    int y = i / width;

    double p_im = y * ratioY + minY;
    double p_re = x * ratioX + minX;

    double z_re = p_re;
    double z_im = p_im;

    int iteration = 0;

    while ((z_re * z_re + z_im * z_im) < 4 && iteration < 99)
    {
        double tmp_re = z_re * z_re - z_im * z_im + c_re;
        double tmp_im = 2 * z_re * z_im + c_im;
        z_re = tmp_re;
        z_im = tmp_im;
        iteration++;
    }

    a[i] = iteration;
}

int saveFractalToBitmap(unsigned char **colorsArray, unsigned char *bitmap, int width, int height, char *filename)
{
    // Bitmap structures to be written to file
    BITMAPFILEHEADER bfh;
    BITMAPINFOHEADER bih;

    // Fill BITMAPFILEHEADER structure
    memcpy((char *)&bfh.bfType, "BM", 2);
    bfh.bfSize = sizeof(bfh) + sizeof(bih) + 3*height*width;
    bfh.bfReserved1 = 0;
    bfh.bfReserved2 = 0;
    bfh.bfOffBits = sizeof(bfh) + sizeof(bih);

    // Fill BITMAPINFOHEADER structure
    bih.biSize = sizeof(bih);
    bih.biWidth = width;
    bih.biHeight = height;
    bih.biPlanes = 1;
    bih.biBitCount = 24;
    bih.biCompression = BI_RGB; // uncompressed 24-bit RGB
    bih.biSizeImage = 0; // can be zero for BI_RGB bitmaps
    bih.biXPelsPerMeter = 3780; // 96dpi equivalent
    bih.biYPelsPerMeter = 3780;
    bih.biClrUsed = 0;
    bih.biClrImportant = 0;

    // Open bitmap file (binary mode)
    FILE *f;
    f = fopen(filename, "wb");

    if(f == NULL) 
        return -1;

    // Write bitmap file header
    fwrite(&bfh, 1, sizeof(bfh), f);
    fwrite(&bih, 1, sizeof(bih), f);

    // Write bitmap pixel data starting with the
    // bottom line of pixels, left hand side
    for (int i = 0; i < width * height ; i++)
    {
        // Write pixel components in BGR order
        fputc(colorsArray[bitmap[i]][2], f);
        fputc(colorsArray[bitmap[i]][1], f);
        fputc(colorsArray[bitmap[i]][0], f);
    }

    // Close bitmap file
    fclose(f);

    return 0;
}

int main()
{
    unsigned char **colorsArray;
    unsigned char *fractalLevelsCPU;
    unsigned char *fractalLevelsGPU;

    double minX = -1.7;
    double maxX = 1.7;
    double minY = -1.5;
    double maxY = 1.5;

    double input_re = -0.79;
    double input_im = 0.1463;

    int width = 10;
    int height = 5;
    int N = width * height;
    int maxLevel = 100;
    size_t levelsArraySize = N * sizeof(unsigned char);

    double ratioX = (maxX - minX) / (double) width;
    double ratioY = (maxY - minY) / (double) height;

    bool gpu = true;

    // Allocate memory
    colorsArray = (unsigned char**) malloc((maxLevel+1) * sizeof(unsigned char*));
    for(int i=0; i<=maxLevel; i++)
    {
        colorsArray[i] = (unsigned char *) malloc(3 * sizeof(unsigned char));
        colorsArray[i][0] = (int) (255.0 * i / maxLevel);
        colorsArray[i][1] = (int) (255.0 * i / maxLevel);
        colorsArray[i][2] = (int) (255.0 * log((double) i) / log((double) maxLevel));
    }

    fractalLevelsCPU = (unsigned char*) malloc(levelsArraySize);
    cudaMalloc((unsigned char **) &fractalLevelsGPU, levelsArraySize);

    cudaMemcpy(fractalLevelsCPU, fractalLevelsGPU, levelsArraySize, cudaMemcpyHostToDevice);

    if(gpu)
    {
        // Run GPU method
        calulateFractal <<< 1, N >>> (fractalLevelsGPU, N, input_re, input_im, width, height, minX, maxX, minY, maxY, ratioX, ratioY, maxLevel);

        // Copy data from GPU to CPU array
        cudaMemcpy(fractalLevelsCPU, fractalLevelsGPU, levelsArraySize, cudaMemcpyDeviceToHost);
    }
    else
    {
        // Iterate every element in array and compute level of fractal
        for(int i=0; i<N; i++)
        {
            calulateFractalCPU(fractalLevelsCPU, i, input_re, input_im, width, height, minX, maxX, minY, maxY, ratioX, ratioY, maxLevel);
        }
    }

    // Show results
    for(int i=0; i<N; i++)
    {
        if((i % width) == 0) 
            printf("\n");

        printf("%d\t", fractalLevelsCPU[i]);    
    }
    //saveFractalToBitmap(colorsArray, fractalLevelsCPU, width, height, "frac.bmp");

    // Free memory
    for(int i=0; i<=maxLevel; i++)
    {
        free(colorsArray[i]);
    }
    free(colorsArray);

    free(fractalLevelsCPU);
    cudaFree(fractalLevelsGPU);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T07:02:28.983

我找到了解决我的问题的方法。

首先，**每个块的线程数应该是 2 的幂**。我还意识到我的 GPU 对每个块和块本身的线程数有限制。NVIDIA Utils 向我展示了我最多可以使用 65536 个块和每个块 512 个线程。

解决方案：

```
int threadsPerBlock = 512;
int blocksNumber = N/threadsPerBlock + (N % threadsPerBlock == 0 ? 0:1);

if(blocksNumber > 65536) 
    return -1;

calulateFractal <<< blocksNumber, threadsPerBlock >>> (fractalLevelsGPU, N, input_re, input_im, width, height, minX, maxX, minY, maxY, ratioX, ratioY, maxLevel); 
```

# ruby - 管理 Ruby Gem 的多个版本

> ID：15249455
> 
> 赞同：7
> 
> 时间：2013-03-06T14:07:28.070
> 
> 标签：ruby, gem, zurb-foundation

我是新手，但我有一个关于管理不同版本的 gem 的问题，在我的例子中是 zurb-foundation。一个新版本刚出来，我做了一个 gem 更新，它使我的旧版本的框架不再编译。

我的项目包含一个以开头的 config.rb 文件

```
require 'zurb-foundation' 
```

Ruby 是如何知道使用最新版本的呢？是否有指向最新版本的符号链接？如果是这样，我想我可以根据我目前正在从事的项目重新编写这个符号链接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T14:14:34.777

如果您有多个项目使用不同版本的 gem，您可能想看看 Bundler。

[http://gembundler.com/](http://gembundler.com/)

Bundler 使管理 Ruby gem 变得轻而易举。这是强烈推荐的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:10:35.703

您应该使用 RVM 来管理 ruby​​ 和 gems 的多个版本。访问以下链接以了解 rvm 并进行安装。

[https://rvm.io/](https://rvm.io/)

[https://rvm.io/rvm/install/](https://rvm.io/rvm/install/)

# python - 如何实现 Python REST 身份验证

> ID：15249456
> 
> 赞同：2
> 
> 时间：2013-03-06T14:07:28.067
> 
> 标签：python, rest, authentication

我是新手，我想做以下事情

我有像这样的服务端点

```
@login_required
@app.route('/')
def home():
  pass

@login_required
@app.route('/add')
def add():
  pass

@login_required
@app.route('/save')
def save():
  pass

@login_required
@app.route('/delete')
def delete():
  pass 
```

*   我希望在进行这些调用时对用户进行身份验证。
    **问题**
*   如何使用 python 对 REST 调用进行身份验证？
*   我如何确保如果调用登陆以执行任何端点，它们是经过身份验证的？
*   我如何在不保存任何状态的情况下基本上在 HTTP 标头级别进行所有身份验证，以便将来可以更好地扩展（如 Amazon S3），这意味着任何调用都可能转到不同的服务器并且仍然能够自行进行身份验证。

我对 REST 世界完全陌生，并不真正知道如何实现这一目标。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:17:49.133

首先，一个问题，您是在验证用户、客户端还是两者？

对于客户端的身份验证，我喜欢[HTTP MAC 身份验证](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-http-mac-03)来进行 REST 服务身份验证。看看 Mozilla Services [macauthlib](https://github.com/mozilla-services/macauthlib)以及它是如何在他们的 pyramid_macauth 项目中使用的。您应该能够以 pyramid_macauth 为例，学习如何应用 macauthlib 来保护您的服务。搜索看看是否有其他人用 Flask 尝试过这个也是一个好主意。

对于用户和客户端的身份验证，也许可以看看 OAuth 2.0 适当的（HTTP MAC Auth 是一个相关规范）。

我曾希望发布更多链接，但是，这是我的第一篇文章，看来我必须在回复中获得更多链接。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:25:10.903

安全不适合新手。使用框架并依赖其实现。研究源代码、阅读博客和论文，在某些时候您将能够构建自己的系统。

有很多事情可能会出错，一旦你部署了一个协议，你可能无法在不破坏现有客户端的情况下返回。

也就是说，验证请求的常用方法是使用几个令牌，通常称为公钥和私钥（秘密）。一个变体是使用私钥来生成一个短暂的会话令牌。另一种变体是使用每个客户端特定的 API 密钥。无论如何，此令牌通常在 HTTP 标头中发送（标准 cookie 或自定义 cookie），但也可以使用请求正文。通常它们不会附加到 URL，因为密钥可能以日志文件结尾。此外，您应该注意存储密钥的方式和位置。

根据通道（纯 HTTP），您可能希望使用 HMAC 对请求进行签名，而不是在野外发送秘密。您必须注意重放攻击。定时攻击是可能的。密码冲突可用于破坏您的计划。您可能需要令牌来避免 CSRF（如果 Web 浏览器不发挥作用，这并不是真正需要的，但您没有指定这一点）

同样，选择一个框架，不要自己编写任何代码。损坏的软件通常可以修复，但安全漏洞可能会造成真正的损害。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:35:10.077

查看您的 API，它看起来不像是静止的端点。URI 应该代表某个实体而不是动作。例如，如果您正在处理诸如用户之类的实体，您可以拥有 yourdomain.com/user 并使用 POST、DELETE、PATCH 和 GET 等 HTTP 动词执行各种操作，例如创建、删除、更新和获取（假设您使用烧瓶这可以很容易地实现）。

在安全性方面，我假设有多种方案，但我使用的方案是通过初始身份验证调用生成一个会话令牌，给定密钥和秘密。我建议您寻找有关生成密钥和秘密对以及会话令牌的专业在线资源。

在扩展方面，我猜你担心的是会话不应该特定于给定的机器。身份验证数据可以存储在与 HTTP 前端分开的存储中。通过这种方式，您可以添加额外的网络服务器并扩展您的前端，或者添加额外的数据存储并根据需要进行扩展。

# c - “返回”作为函数指针数组中的函数

> ID：15249457
> 
> 赞同：0
> 
> 时间：2013-03-06T14:07:28.863
> 
> 标签：c, function, return, function-pointers

所以这就是我正在使用的。

```
{
    int Test;
    void (*functions[5])() = {
        return,
        one,
        two,
        three,
        four
    };

    for (Test = takeInput(5);; Test = takeInput(5)){
        cls();
        Print(L"0)  Abort\n");
        Print(L"1)  One\n");
        Print(L"2)  Two\n");
        Print(L"3)  Three\n");
        Print(L"4)  Four\n");
        Print(L"Enter Selection: ");
        (*functions[Test])();
    }
} 
```

这就是我想要做的事情的要点。这是某种上下文的菜单系统（并且 takeInput(5) 将暂停输入，停止循环，直到有人输入数字）。

问题是，以这种方式使用 return 显然是错误的。我认为看到（我认为）return 是一个函数，我不明白为什么不能将它放入函数指针数组中以跳出菜单。我想我可以制作一个在调用时基本上只返回 true 的虚拟函数，然后检查它（问题在于所有其他函数都返回 void）。即使这样可行，我也希望有一个与上述非工作示例一样独立的解决方案。

有没有一种比我想象的更好的、干净的、希望简短的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:10:46.537

`return`不是函数，它没有地址，因此您不能将它放在函数指针数组中。

此外，`Test`当您在前几次使用它时，它似乎未初始化：

```
for (Test; 
```

和

```
(*functions[Test])(); 
```

如果你想跳出`for`循环，你必须在两个分号之间使用`break`或`return`或适当的条件`for(;condition;)`。

函数调用不会中断循环。除非，它是异国情调的，例如`abort()`,`exit()`或`longjmp()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:42:37.293

在执行函数之前，我会`return`在你的函数数组中替换`NULL`并测试 null ，当函数指针为`NULL`.

# entity-framework-4.3 - 是否使用 POCO 使用带有外键的虚拟类型？

> ID：15249461
> 
> 赞同：0
> 
> 时间：2013-03-06T14:07:44.007
> 
> 标签：entity-framework-4.3

我是 Entity Framework 的新手，想知道为什么我的外键属性必须是“虚拟的”，即使可以在没有非虚拟外键的情况下加载数据。

可以说我有两节课。两者都有用 virtual 关键字注释掉的行。数据仍然会在没有虚拟的情况下加载。那我们为什么要使用虚拟呢？一旦我们使用 Context.SaveChanges() 添加/更新/删除记录，它会产生影响吗？

```
public class Application
{
   public int ApplicationID{get;set;}
   public string Name{get;set;}

   //public virtual ICollection<ApplicationPages> Pages{get;set;}
   public ICollection<ApplicationPages> Pages{get;set;}
}

public class ApplicationPages
{
   public int ApplicationPageID{get;set;}
   public string Name{get;set;}

   public int ApplicationID{get;set;}
   [ForeignKey("ApplicationID")]
   public Application Application{get;set;}
   //public virtual Application Application{get;set;}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:22:28.313

据我了解，需要 virtual 关键字才能允许实体框架制作您的类的代理，这有助于延迟加载情况。

我不知道代理变体的详细信息，但我猜它会带回并将子 ID 与父代一起存储。然后，如果您随后访问子属性（除了 id），它有一种获取子记录的有效方法。

我在父级的导航属性方面遇到了麻烦，将它们排除在外，以便在需要时显式加载子记录。但是，我的密钥是两部分（身份证和生效日期），这可能是原因。

# c++ - C++ 将任意函数从 DLL 动态加载到 std::function

> ID：15249465
> 
> 赞同：9
> 
> 时间：2013-03-06T14:07:55.367
> 
> 标签：c++, dll, c++11, dllexport, std-function

如何使用单个函数将任意*动态链接库*(dll) 函数加载到对象中？`std::function`

例如，我想将两个函数编译成一个 dll：

```
// test.dll

int plusFive(int value) {
    return value + 5;
}

void printHello() {
    std::cout << "Hello!" << std::endl;
} 
```

并在运行时使用这样的单个函数加载它们：

```
// main.cc

#include <functional>

int main() {
    std::function<int(int)> func1(loadDllFunc("test.dll", "plusFive"));
    std::function<void()> func2(loadDllFunc("test.dll", "printHello"));
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T14:07:55.367

使用（取自[MSDN Dev Center的描述）中提供的](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682599(v=vs.85).aspx)*WinAPI*函数。`windows.h`

*   `LoadLibrary`- 将指定模块加载到调用进程的地址空间中。返回模块的句柄。
*   `GetProcAddress`- 从指定的动态链接库 (DLL) 中检索导出函数或变量的地址。返回导出函数或变量的地址。

使用此函数加载特定函数并返回一个`std::function`对象：

```
// main.cc

#include <iostream>
#include <string>
#include <functional>
#include <windows.h>

template <typename T>
std::function<T> loadDllFunc(const std::string& dllName, const std::string& funcName) {
    // Load DLL.
    HINSTANCE hGetProcIDDLL = LoadLibrary(dllName.c_str());

    // Check if DLL is loaded.
    if (hGetProcIDDLL == NULL) {
        std::cerr << "Could not load DLL \"" << dllName << "\"" << std::endl;
        exit(EXIT_FAILURE);
    }

    // Locate function in DLL.
    FARPROC lpfnGetProcessID = GetProcAddress(hGetProcIDDLL, funcName.c_str());

    // Check if function was located.
    if (!lpfnGetProcessID) {
        std::cerr << "Could not locate the function \"" << funcName << "\" in DLL\"" << dllName << "\"" << std::endl;
        exit(EXIT_FAILURE);
    }

    // Create function object from function pointer.
    std::function<T> func(reinterpret_cast<__stdcall T*>(lpfnGetProcessID));

    return func;
} 
```

DLL 源代码应该这样写：

```
// test.cc (test.dll)
#include <iostream>

// Declare function prototypes with "extern C" to prevent name mangling.
// Declare functions using __declspec(dllexport) to signify the intent to export.
extern "C" {
    __declspec(dllexport) int __stdcall plusFive(int);
    __declspec(dllexport) void __stdcall printHello();
}

int plusFive(int value) {
    return value + 5;
}

void printHello() {
    std::cout << "Hello!" << std::endl;
} 
```

然后`loadDllFunc`像这样使用：

```
// main.cc

int main() {
    auto func1 = loadDllFunc<int(int)>("test.dll", "plusFive");
    auto func2 = loadDllFunc<void()>("test.dll", "printHello");

    std::cout << "Result of func1: " << func1(1) << std::endl;
    func2();
} 
```

输出：

```
Result of func1: 6
Hello! 
```

作为旁注，可以使用 GCC (4.7.2) 编译 DLL，如下所示：

```
g++ -shared -o test.dll test.cc -std=c++11 
```

## 编辑：

我不确定演员`loadDllFunc`是否给出了正确的类型：

```
std::function<T> func(reinterpret_cast<__stdcall T*>(lpfnGetProcessID)); 
```

它似乎将它投射到`__stdcall int (*)(int)`应该的时间`int (__stdcall *)(int)`。

`loadDllFunc`这是使用辅助解析器类实现的另一种方法。此解决方案将正确地将函数指针转换为`int (__stdcall *)(int)`.

```
template <typename T>
struct TypeParser {};

template <typename Ret, typename... Args>
struct TypeParser<Ret(Args...)> {
    static std::function<Ret(Args...)> createFunction(const FARPROC lpfnGetProcessID) {
        return std::function<Ret(Args...)>(reinterpret_cast<Ret (__stdcall *)(Args...)>(lpfnGetProcessID));
    }
};

template <typename T>
std::function<T> loadDllFunc(const std::string& dllName, const std::string& funcName) {
    // Load DLL.
    HINSTANCE hGetProcIDDLL = LoadLibrary(dllName.c_str());

    // Check if DLL is loaded.
    if (hGetProcIDDLL == NULL) {
        std::cerr << "Could not load DLL \"" << dllName << "\"" << std::endl;
        exit(EXIT_FAILURE);
    }

    // Locate function in DLL.
    FARPROC lpfnGetProcessID = GetProcAddress(hGetProcIDDLL, funcName.c_str());

    // Check if function was located.
    if (!lpfnGetProcessID) {
        std::cerr << "Could not locate the function \"" << funcName << "\" in DLL\"" << dllName << "\"" << std::endl;
        exit(EXIT_FAILURE);
    }

    // Create function object from function pointer.
    return TypeParser<T>::createFunction(lpfnGetProcessID);
} 
```

# jquery - MVC 4 PartialViewResult 返回 PartialView 调用错误的视图（URL）

> ID：15249466
> 
> 赞同：1
> 
> 时间：2013-03-06T14:07:55.653
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-partialview

我对 MVC 和 JQuery 还很陌生。我正在使用 MVC 4。我有一个可以编辑字段的索引视图。我希望能够在列表底部添加一个空白行，用于添加新行。到目前为止，我的工作基于 MVC 2 中的这个示例：http: [//blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)

这是我的索引视图：

```
 @using (Html.BeginForm()) {
<h3 style="margin-top: 1px;">
    <input type="hidden" name="selectedConditionID" value="@ViewBag.SelectedConditionID" />
    <input type="hidden" name="isCore" />
    <input type="submit" value="Save" />
    @Html.ActionLink("Add Condition Detail", "BlankEditorRow", null, new { id="addItem"})
</h3>
<div class="table" id="editorRows"> 
@for (var i = 0; i < Model.Count; ++i) {
    ViewBag.i = i;
    Html.RenderPartial("_ConditionDetailEditorRow", Model[i]);
}
</div>
<div>
    @Html.ActionLink("Back to Condition Library", null, "Home")
</div> 
```

}

这是部分视图：

```
 <div class="editorRow">
@if (@ViewBag.i == 0) {
    <div class="header-row">
        <div class="header-cell">@Html.DisplayNameFor(model => model.StackRank)</div>
        <div class="header-cell">@Html.DisplayNameFor(model => model.ID)</div> ...
        <div class="header-cell">Options</div>
    </div>
}

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    int i = @ViewBag.i;
    <div  class="body-cell">
        @Html.TextBoxFor(m => m.StackRank)
        @Html.ValidationMessageFor(m => m.StackRank)
    </div>
    <div  class="body-cell">
        @Html.DisplayFor(m => m.ID)
    </div> ...
    <div  class="body-cell">
        @Html.ActionLink("Edit", "Edit", new { id=Model.ID }) |
        @Html.ActionLink("Delete", "Delete", new { id=Model.ID })
    </div>
} 
```

这是我的索引视图中的 JQuery，它应该导致将空白行添加到索引列表的末尾：

```
$(function () {
    $("#addItem").click(function () {
        $.ajax({
            url: this.href,
            cache: false,
            success: function (html) { $("#editorRows").append(html); }
        });
        return false;
    });
}); 
```

这是控制器方法：

```
public PartialViewResult BlankEditorRow()
    {
        ViewBag.i = 0;
        return PartialView("_ConditionDetailEditorRow", new Condition_Details());
    } 
```

这是问题所在：当我单击索引页面上的“添加条件详细信息”操作链接时，我只得到一个部分视图的页面（...//localhost:56213/ConfigurationUI/ConditionDetails/BlankEditorRow/addItem）。

我想要的是在索引页面底部出现一个空白行。我假设 URL 应该类似于：...//localhost:56213/ConfigurationUI/ConditionDetails/Index/addItem。

现在我怀疑我的 JQuery 脚本没有触发，但不知道为什么？

怎么了？

谢谢！

# 我想出了一个解决方案：

## 我把整个表放在局部视图中：

**修订的索引视图**

```
<div id="condition_detailsList">
     @{ Html.RenderPartial("_ConditionDetailsEdit", Model); }
</div> 
```

**修订的局部视图**

```
<table id="condition_detailsList">
<thead>
    <tr>
        <th>
            @Html.DisplayNameFor(model => model[0].StackRank)
        </th>...

    </tr>
    </thead>
    <tbody id="editorRows">
        @for (var i = 0; i < Model.Count; ++i) {
            <tr style="margin:0; padding:0; border:0;">
                <td> <div>
                    @Html.TextBoxFor(m => m[i].StackRank)
                    @Html.ValidationMessageFor(m => m[i].StackRank)
                </div> </td>...

            </tr>
                @Html.HiddenFor(m => m[i].ID, new { @id = "hID" + i })...
        }
</tbody> 
```

## 从使用 Ajax 的 Index 视图中，我在控制器中调用了 post 方法

```
 $(function () {
    $('#addItem').click(function () {
        $.ajax({
            cache: false,
            type: "POST",
            url: "@(Url.Action("GetNewRow", "ConditionDetails"))",
            data: { "conditionID": cID },
            success: function (condition_detailsListPlusNewRow) {
                //initialize fields... 
```

## 在控制器中，我将新行返回到局部视图

```
[HttpPost]
    public ActionResult GetNewRow(int conditionID) //, List<Condition_Details> conditionDetails)
    {
        //you must initial the index view here, then...

        //retrieve the list, add a new row and return the partial view
        var condition_details = db.Condition_Details.Where(x => x.Condition_ID ==       conditionID).OrderBy(x => x.StackRank).ThenBy(x => x.ID).ToList();

        Condition_Details conditionDetail = new Condition_Details();
        List<Condition_Details> condition_detailsPlusNewRow = new List<Condition_Details>();
        foreach (var row in condition_details)
        {
            conditionDetail = row;
            condition_detailsPlusNewRow.Add(conditionDetail);
        }

        Condition_Details newRow = new Condition_Details();
        newRow.Condition_ID = conditionDetail.Condition_ID;
        newRow.Condition = conditionDetail.Condition;
        newRow.StackRank = conditionDetail.StackRank + 1;
        condition_detailsPlusNewRow.Add(newRow);

        return PartialView("_ConditionDetailsEdit", condition_detailsPlusNewRow);
    } 
```

# php - phpunit 没有找到任何带有 director xml 标签的测试，但是有（一些）文件标签

> ID：15249469
> 
> 赞同：3
> 
> 时间：2013-03-06T14:08:06.587
> 
> 标签：php, phpunit

我有这个配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<phpunit
    backupGlobals               = "false"
    backupStaticAttributes      = "false"
    colors                      = "false"
    convertErrorsToExceptions   = "true"
    convertNoticesToExceptions  = "true"
    convertWarningsToExceptions = "true"
    processIsolation            = "false"
    stopOnFailure               = "false"
    stopOnError                 = "false"
    stopOnIncomplete            = "false"
    syntaxCheck                 = "false"
    bootstrap                   = "test_bootstrap.php"
    >

  <testsuites>
      <testsuite name="UnitTests">
          <file>unit/api/2/ApiControllerTest.php</file>
          <file>unit/api/2/RoutesTest.php</file>
   </testsuite> 
```

它运行测试文件。如果我将文件替换为

```
<directory>unit</directory>
// or
<directory>unit/api/2</directory>
// or
<directory>unit/api/2/*</directory>
// or
<directory>unit/api/2/*Test.php</directory>
// or
<directory suffix="Test.php">unit/api/2</directory> 
```

它只是说：没有执行任何测试！

请问，有什么问题吗？

Ubuntu 12.04 LTS，php 5.3.10，phpunit 3.7.16

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:29:57.033

相对于目录的路径在哪里`unit`是 phpunit.xml 文件？

如果您的路径看起来像这样：

```
projectroot
|- phpunit.xml
|- unit/
   |- api/ 
```

您可以尝试将目录设置为以下内容`phpunit.xml`：

```
<directory>./unit</directory> 
```

然后像这样从 root 运行 phpunit：`phpunit -c phpunit.xml`

如果这不起作用，则有其他问题。如果你运行这个会发生什么：

```
phpunit ./unit/api/2 
```

如果没有运行测试，请回答以下问题：

*   也许您在测试用例中的方法不是以“测试”开头的？
*   是否所有测试用例文件都以 Test.php 结尾？
*   所有测试用例类都扩展 PHPUnit_Framework_TestCase 吗？
*   所有测试用例类名都以“Test”结尾吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-13T20:12:44.467

PHPUnit 的后缀属性默认为“Test.php”，这可能不是很明显。如果您的测试不使用此后缀（例如，它使用 TestUser.php 或 /test/User.php，而不是 UserTest.php），则将跳过该测试。

如果您确定目标目录存在，请检查您的文件是否与 PHPUnit 使用的选定后缀匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-25T09:01:26.230

这可能有点取决于 Phpunit 的版本。

我可以让它与另外两个较旧的（3.7.22 和 3.7.38）一起工作，但之前有类似的问题。这是我的解决方案：

我首先配置的目录错误：

```
 <testsuites>
            <testsuite name="Default">
                    <directory>/tests</directory>
            </testsuite>
    </testsuites> 
```

正如您在这个错误示例中所看到的，它以斜杠 (" `/`") 为前缀。删除该斜线会导致以下 XML 摘录可以正常工作：

```
 <testsuites>
            <testsuite name="Default">
                    <directory>tests</directory>
            </testsuite>
    </testsuites> 
```

确保目录没有以斜杠为前缀并且它存在。存在部分至关重要，因为如果 Phpunit 测试运行程序不存在，它将不会显示错误消息。您只会看到没有执行任何测试。

> 未执行任何测试！

* * *

以您的问题为例：

1.  `<directory>unit</directory>`：它失败是因为目录不存在（你认为它存在，我知道，但是如果目录不存在它就会失败，Phpunit*没有*骗你）。
2.  `<directory>unit/api/2</directory>`: 如果失败，是因为目录不存在而失败（你认为是，我知道，但是如果目录不存在，它就失败了，Phpunit*没有*骗你）。
3.  `<directory>unit/api/2/*</directory>`: 这总是会失败，因为目录不存在。大多数文件系统不允许`*`在目录名和文件名中使用“”字符。
4.  `<directory>unit/api/2/*Test.php</directory>`: 同样的，这不是一个有效的目录名，因为目录不存在而失败。
5.  `<directory suffix="Test.php">unit/api/2</directory>`: 如果失败，是因为目录不存在而失败（你认为是，我知道，但是如果目录不存在，它就失败了，Phpunit*没有*骗你）。此外，值为“ ”的*后缀*`Test.php`参数是多余的，因为这是默认后缀。因为它是多余的，所以它是多余的，您应该将它从 XML 文件中删除。

没有软件是没有错误的，这自然也适用于 Phpunit，但你首先应该考虑到 Phpunit 并没有对你撒谎。

在更正目录配置后，我自己对记录的两个版本没有问题。你的旅费可能会改变。这特别适用于第 1、2 和 5 点：从您的问题看来，这些目录确实存在，但从您给出的描述以及我可以看到的 Phpunit 行为是什么，这些目录不存在。

第 3 点和第 4 点应该很清楚，它们根本不起作用，因为您将通配符放入目录名称中，该目录名称旨在描述具体路径，而不是暗示打算/允许使用通配符。您可以在之前的问答问题中找到这一点：[尝试使用配置 XML 文件运行 Phpunit 会导致异常](https://stackoverflow.com/q/11853974/367456)。

* * *

> 此答案中的信息基于
> 
> *   Sebastian Bergmann 的 PHPUnit 3.7.22 和 3.7.38。
> *   php.net 的 PHP 5.4.36

# java - StreamCorruptedException：无效类型代码：客户端服务器连接中的 01

> ID：15249470
> 
> 赞同：2
> 
> 时间：2013-03-06T14:08:06.850
> 
> 标签：java, serialization, deserialization, objectinputstream

首先，我知道有一些关于 StreamCorruptedExceptions 的问题，但几乎没有关于“无效类型代码：01”的问题。

我有一个本地客户端连接到本地服务器。客户端尝试向服务器发送一个可序列化的“Task_Data”对象。我用来发送的代码是（去除了杂乱）：

* * *

```
 oos = new ObjectOutputStream(clientSocket.getOutputStream());

    Task_Data task = new Task_Data();
    task.setCheckMale(true);
    task.setCheckAdult(true);
    task.setAdditionalInfo("testing");
    task.setTakeNotes(true);
    task.setTakePhoto(true);
    oos.writeObject(task);
    oos.flush(); 
```

* * *

现在在接收端（服务器）我有：

* * *

```
 Task_Data task = (Task_Data) ois.readObject();
    System.out.println(task.getAdditionalInfo()); 
```

* * *

Eclipse 抛出此错误：java.io.StreamCorruptedException: invalid type code: 01

奇怪的是，像 UTF 这样的“原始”类型的传输没有任何问题。

也许原因在于我的序列化，Task_Data 类是：

* * *

```
public class Task_Data implements Serializable {

private static final long serialVersionUID = -226273890693695870L;

private boolean checkMale = true;
private boolean checkAdult = true;
private boolean takePhoto = true;
private boolean takeNotes = true;

private String additionalInfo = null;

private void writeObject(java.io.ObjectOutputStream out) throws IOException {
    out.writeBoolean(checkMale);
    out.writeBoolean(checkAdult);
    out.writeBoolean(takePhoto);
    out.writeBoolean(takeNotes);
    out.writeUTF(additionalInfo);
}

private void readObject(java.io.ObjectInputStream in) throws IOException, ClassNotFoundException {
    checkMale       =   in.readBoolean();
    checkAdult      =   in.readBoolean();
    takePhoto       =   in.readBoolean();
    takeNotes       =   in.readBoolean();
    additionalInfo  =   in.readUTF();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:00:31.843

您的`writeObject()`方法将在序列化期间执行，因为它与此类方法的规范签名一致，但您的`readObject()`方法不会，因为它不。因此存在不对称性，这可能会导致任何错误，包括这个错误。

但我不知道你为什么要编写显式代码来完成默认情况下序列化已经完成的事情。我将完全摆脱`readObject()`and`writeObject()`方法以及任何现有的序列化流，然后重新测试。

您还必须确保在套接字的生命周期内使用相同的 ObjectInputStream 和 ObjectOutputStream。这些流上有标头，在一端开始新的标头会混淆另一端。

# java - 使用 Jenkins 构建 Maven 项目

> ID：15249474
> 
> 赞同：1
> 
> 时间：2013-03-06T14:08:09.860
> 
> 标签：java, maven, jenkins, continuous-integration

我对 Maven 和 Jenkins 都是新手，所以请耐心等待我......

**当我从项目文件夹中运行mvn install**时，我有一个可以正确构建的 Maven 项目，但是当我尝试通过 Jenkins 构建时，根本无法解决任何依赖关系。我是否在我的 Maven 或 Jenkins 设置中遗漏了一些东西/搞砸了一些东西？

项目 POM 和 .m2/settings.xml 如下...

**pom.xml**

```
<project xmlns="http://maven.apache.org/POM/4.0.0"     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://maven.apache.org/POM/4.0.0  http://maven.apache.org/xsd/maven-    4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>project</groupId>
<artifactId>ProjectGUI</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>jar</packaging>
<name>ProjectGUI</name>
<url>http://maven.apache.org</url>

<repositories>
<repository>
  <id>central</id>
  <url>http://server:8081/nexus/content/groups/public</url>
  <releases><enabled>true</enabled></releases>
  <snapshots><enabled>true</enabled></snapshots>
</repository>
</repositories>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>                   
                <source>1.7</source>
                <target>1.7</target>
            </configuration>
        </plugin>
        <plugin>
    <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-assembly-plugin</artifactId>
            <executions>
                <execution>
                    <id>package-jar-with-dependencies</id>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                    <configuration>
                           <appendAssemblyId>false</appendAssemblyId>
                        <descriptorRefs>
                            <descriptorRef>jar-with-dependencies</descriptorRef>
                        </descriptorRefs>
                        <archive>
                                                        <manifestEntries>
                                                            <Manifest-   Version>1.0</Manifest-Version>
                                                            <Main-Class>project.Main</Main-Class>
                                                            <SplashScreen-    Image>splash.png</SplashScreen-Image>
                                                        </manifestEntries>
                                                    </archive>
                    </configuration>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <version>2.1</version>
            <configuration>
                <archive>
                    <manifestEntries>
                        <Manifest-Version>1.0</Manifest-Version>
                        <Main-Class>project.Main</Main-Class>
                        <SplashScreen-Image>splash.png</SplashScreen-Image>
                    </manifestEntries>
                </archive>
            </configuration>
        </plugin>    
    </plugins>
</build>
<properties>
<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencies>
<dependency>
  <groupId>junit</groupId>
  <artifactId>junit</artifactId>
  <version>3.8.1</version>
  <scope>test</scope>
</dependency>
<dependency>
  <groupId>com.googlecode.lambdaj</groupId>
  <artifactId>lambdaj</artifactId>
  <version>2.3.3</version>
</dependency>
<dependency>
  <groupId>org.hamcrest</groupId>
  <artifactId>hamcrest-all</artifactId>
  <version>1.3</version>
</dependency>
<dependency>
  <groupId>javax.media</groupId>
  <artifactId>jmf</artifactId>
  <version>2.1.1e</version>
</dependency>
<dependency>
  <groupId>ch.qos.logback</groupId>
  <artifactId>logback-classic</artifactId>
  <version>1.0.0</version>
</dependency>
<dependency>
  <groupId>jfree</groupId>
  <artifactId>jfreechart</artifactId>
  <version>1.0.13</version>
</dependency>
<dependency>
  <groupId>com.jidesoft</groupId>
  <artifactId>jide-charts</artifactId>
  <version>3.4.8</version>
</dependency>
<dependency>
  <groupId>com.jidesoft</groupId>
  <artifactId>jide-common</artifactId>
  <version>3.4.8</version>
</dependency>
<dependency>
  <groupId>org.jogamp.gluegen</groupId>
  <artifactId>gluegen-rt-main</artifactId>
  <version>2.0-rc11</version>
</dependency>
<dependency>
  <groupId>org.jogamp.jogl</groupId>
  <artifactId>jogl-all-main</artifactId>
  <version>2.0-rc11</version>
</dependency>
<dependency>
    <groupId>org.jzy3d</groupId>
    <artifactId>jzy3d</artifactId>
    <version>0.9</version>
</dependency>
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-api</artifactId>
  <version>1.7.2</version>
</dependency>
</dependencies>
</project> 
```

**.m2/settings.xml**

```
<settings>
<mirrors>
<mirror>
  <!--This sends everything else to /public -->
  <id>nexus</id>
  <mirrorOf>central</mirrorOf>
  <url>http://server:8081/nexus/content/groups/public</url>
</mirror>
</mirrors>
<profiles>
<profile>
  <id>nexus</id>
  <!--Enable snapshots for the built in central repo to direct -->
  <!--all requests to nexus via the mirror -->
  <repositories>
    <repository>
      <id>central</id>
      <url>http://central</url>
      <releases><enabled>true</enabled></releases>
      <snapshots><enabled>true</enabled></snapshots>
    </repository>
  </repositories>
 <pluginRepositories>
    <pluginRepository>
      <id>central</id>
      <url>http://central</url>
      <releases><enabled>true</enabled></releases>
      <snapshots><enabled>true</enabled></snapshots>
    </pluginRepository>
  </pluginRepositories>
</profile>
</profiles>
<activeProfiles>
<!--make the profile active all the time -->
<activeProfile>nexus</activeProfile>
</activeProfiles>
</settings> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:18:36.847

这可能是因为 Jenkins（如果她在另一台计算机上运行）不知道额外的存储库被标识为您域中`central`的私有实例。`nexus`

詹金自己的设置`settings.xml`因她的安装方式而异。

就我而言（本机 ubuntu 安装），Jenkins 的家是`/usr/lib/jenkins`. 也许您可以将本地复制`settings.xml`到 Jenkins' 中`/usr/lib/jenkins/.m2/`？

# mysql - 如何使用左连接获取所有行获取第二个表中的最新行

> ID：15249486
> 
> 赞同：0
> 
> 时间：2013-03-06T14:08:59.287
> 
> 标签：mysql, join

我正在尝试按照[此答案中](https://stackoverflow.com/a/4581171/1624960)的说明如何获取连接表中的最新行。

我有两张桌子。

```
Projects : id, title
Status : project_id, status_id, created(DATETIME) 
```

当我知道项目 ID（示例 = 2）时，我有正确的查询来选择最新的状态更新。

```
SELECT projects. * , project_state_project_map.status_id AS status, 
project_state_project_map.created AS status_created
FROM projects
LEFT JOIN (

    SELECT * 
    FROM project_state_project_map
    WHERE project_id = 2
    ORDER BY created DESC 
    LIMIT 1
    )
project_state_project_map ON project_state_project_map.project_id = projects.id
WHERE projects.id = 2
LIMIT 1 
```

但是，我无法弄清楚如何选择所有具有当前状态的项目。我必须对 sql 进行什么更改才能获得所有项目的最新状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:15:24.797

我建议更改您的查询以使用聚合函数来获取具有状态的最新日期：

```
SELECT p. *, 
  pm1.status_id AS status, 
  pm1.created AS status_created
FROM projects p
LEFT JOIN project_state_project_map pm1
  ON pm1.project_id = p.id
INNER JOIN 
(
  SELECT max(created) MaxDate, project_id
  FROM project_state_project_map
  WHERE project_id = 2
  GROUP BY project_id
) pm2 
  ON pm1.project_id = pm2.project_id
  AND pm1.created = pm2.MaxDate
WHERE p.id = 2 
```

这将获取`max(created)`每个项目的日期，然后此结果用于返回该日期的状态。

这也可以写成：

```
SELECT p. *, 
  pm.status_id AS status, 
  pm.created AS status_created
FROM projects p
LEFT JOIN
(
  SELECT pm1.project_id,
    pm1.status_id,
    pm1.created
  FROM project_state_project_map pm1
  INNER JOIN 
  (
    SELECT max(created) MaxDate, project_id
    FROM project_state_project_map
    WHERE project_id = 2
    GROUP BY project_id
  ) pm2
    ON pm1.project_id = pm2.project_id
    AND pm1.created = pm2.MaxDate
) pm
  ON pm.project_id = p.id
WHERE p.id = 2; 
```

# hadoop - 使用适度资源对谷歌图书 n-gram 数据集进行处理的最可行选项是什么？

> ID：15249489
> 
> 赞同：0
> 
> 时间：2013-03-06T14:09:09.750
> 
> 标签：hadoop, hive, distributed-computing, bigdata, n-gram

我需要从谷歌书籍的 n-gram 语料库中为每个目标词计算大约 10,000 个目标词和几百个上下文词的词共现统计

以下是完整数据集的链接：

[谷歌 Ngram 查看器](http://storage.googleapis.com/books/ngrams/books/datasetsv2.html)

很明显，数据库大约为 2.2TB，包含数千亿行。为了计算单词共现统计，我需要为每对可能的目标词和上下文词处理整个数据。我目前正在考虑将 Hadoop 与 Hive 一起使用来批量处理数据。考虑到这是一个学期时间限制和计算资源有限的学术项目，还有哪些其他可行的选择。

请注意，不需要实时查询数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:06:45.447

Hive 有一个用于处理 ngram 的内置 UDF [https://cwiki.apache.org/Hive/statisticsanddatamining.html#StatisticsAndDataMining-ngrams%2528%2529andcontextngrams%2528%2529%253ANgramfrequencyestimation](https://cwiki.apache.org/Hive/statisticsanddatamining.html#StatisticsAndDataMining-ngrams%2528%2529andcontextngrams%2528%2529%253ANgramfrequencyestimation)

# java - 为什么 InputStream.available() 如此耗时？

> ID：15249491
> 
> 赞同：0
> 
> 时间：2013-03-06T14:09:13.713
> 
> 标签：java, io, profiling, pcap, jvisualvm

我已经实现了自己的类来读取`pcap`文件。（二进制文件，即tcpdump、wireshark）

```
public class PcapReader implements Iterator<PcapPacket> {
    private InputStream is;

    public PcapReader (File file) throws FileNotFoundException, IOException {
        is = this(new DataInputStream(
             new BufferedInputStream(
                 new FileInputStream(file))));
    }

    @Override
    public boolean hasNext () {
        try {
            return (is.available() > 0);
        } catch (IOException e) {
            return false;
        }
    }

    //pseudo code!
    @Override
    public PcapPacket next () {
        is.read(header);
        is.read(body);

        return new PcapPacket(header, body);
    }

    //more code here
} 
```

然后我像这样使用它：

```
PcapReader reader = new PcapReader(file);
while (reader.hasNext()) {
    PcapPacket pcapPacket = reader.next();
    //process packet
} 
```

被测文件有 190 Mb。而且我还使用 JVisualVM 进行分析。

*   `hasNext()`被调用170万次，时间为**7.7**秒

*   `next()`被调用的次数相同，时间为**3.6**秒

**我的主要问题是为什么`hasNext()`在绝对值上如此耗时并且还大于两倍`next`？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:22:21.820

当您`is.available()`在您的`hasNext()`方法中调用 时，它会归结为`FileInputStream.available()`实现。这是一种本地方法，从[FileInputStream 源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/io/FileInputStream.java#FileInputStream.available%28%29)中可以看出。

最后，这确实是一个耗时的操作，因为文件操作的操作系统实现必须提前检查是否有更多数据可供读取。因此，它实际上会执行读取操作而不更新文件指针（或将其更新回原始位置），只是为了检查是否有“下一个”字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:23:01.043

我敢肯定，`available()`方法的内部（本机）实现**不仅仅是**返回 some `return availableSize;`，而是更复杂。Stream 使用 OS API 计算可用数据；特别是，例如，对于日志文件，由于 Stream 读取它们而写入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T01:31:16.010

> 我已经实现了自己的类来读取`pcap`文件。

因为您没有使用[jNetPcap](http://jnetpcap.com)，或者因为您*正在*使用 jNetPcap 但需要可以从`File`?

如果是后者，您可能想要使用具有“更多数据可用”方法和单独的“所以读取该数据”方法的模式以外的模式；读取数据并返回“可用数据包”/“文件结尾”/“错误”指示或为后一种情况或两种情况`DataInputStream`引发异常的东西（似乎为 I/O 错误和 EOF 引发异常，所以对你的班级做同样的事情可能是有意义的）。

是的，这意味着它不能是 an `Iterator`，但也许`Iterator`s 最初并不打算表示顺序文件中的记录（此外，如果您真的希望它是 an `Iterator`，您将如何处理该`remove`方法？）。

如果您可以避免需要从 a 读取`File`，则可以使用 jNetPcap 自己的例程来读取捕获文件，在 libpcap 1.1.0 及更高版本中，它还可以读取一些 pcap-ng 文件。

# c# - 如何在复杂的 WPF 场景中组织资源（样式、...）？

> ID：15249492
> 
> 赞同：16
> 
> 时间：2013-03-06T14:09:16.957
> 
> 标签：c#, wpf, templates, styles

如何组织 WPF 资源（包括样式、模板等），以便我可以跨 Windows、页面甚至项目使用它们。为了实现资源的最大可重用性和可维护的结构（例如每个模板一个文件），我必须采取哪些选项？

例如：我正在创建一个 WPF 应用程序，我想使用 TabControl，但我想对其进行重大更改。所以我可以在其中创建一个样式并将其应用于 TabControl 和 TabItem。没关系，但是我可以在哪里放置资源以保持我的 Window XAML 清晰并让其他 Windows 或项目也可以访问该样式？

我发现我可以将它添加到 App.xaml 中，但这只是一个项目的解决方案，并且只允许在该项目的项目之间共享。另外，我认为将这些模板与其他代码分开一点会更好，而不是将它们全部放在某个页面或 app.xaml 中？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-06T14:19:56.783

我通常创建一个单独的样式项目，我从我想要样式的项目中引用它。样式项目具有如下固定结构：

![造型项目](../Images/a56f40338e5be11e0188ab047a9ebb3d.png)

对于每个控件，我都会创建一个样式`ResourceDictionary`。例如对于我的按钮：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Style x:Key="PrimaryButtonStyle" TargetType="Button">
    </Style>

    <Style x:Key="ToolbarButton" TargetType="Button">
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Margin" Value="3"/>
        <Setter Property="Background" Value="Transparent"></Setter>
    </Style>
</ResourceDictionary> 
```

在一个 main`ResourceDictionary`中，我合并了所有其他字典，在本例中是 IncaDesign.xaml 文件，您可以在上图中看到：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:Commons.Controls;assembly=Commons">

    <ResourceDictionary.MergedDictionaries>

        <ResourceDictionary Source="Converter/Converter.xaml" />
        <ResourceDictionary Source="Styles/Button.xaml" />
        <ResourceDictionary Source="BitmapGraphics/Icons.xaml" />

    </ResourceDictionary.MergedDictionaries>

    <!-- Default Styles -->
    <Style TargetType="Button" BasedOn="{StaticResource PrimaryButtonStyle}"></Style>
</ResourceDictionary> 
```

请注意我是如何定义默认样式的，它们会自动应用，除非您另外指定。在您想要设置样式的每个窗口或控件中，您只需要引用这个`ResourceDictionary`. 注意源的定义，它是对程序集 ( `/Commons.Styling;component...`)的引用

```
<UserControl.Resources>        
    <ResourceDictionary>            
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/Commons.Styling;component/IncaDesign.xaml" />
        </ResourceDictionary.MergedDictionaries>   
    </ResourceDictionary>        
</UserControl.Resources> 
```

现在将自动设置默认样式，如果您想显式访问资源，可以使用`StaticResource`.

```
<Viewbox Height="16" Width="16" Margin="0,0,10,0">
    <ContentControl Content="{StaticResource FileIcon32}" />
</Viewbox> 
```

在我看来，这是一个非常好的解决方案，它适用于非常复杂的解决方案，包括模块化解决方案，例如使用 PRISM 构建的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:13:47.357

您可以在您的解决方案或单独的解决方案中创建一个包含资源字典的项目。您的项目将是类库类型，然后可以轻松地从任何其他项目引用 .dll。这是一篇描述这一点的文章：[资源字典文章](http://blogs.msdn.com/b/wpfsldesigner/archive/2010/06/03/creating-and-consuming-resource-dictionaries-in-wpf-and-silverlight.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T14:13:15.720

A`ResourceDictionary`代表你正在寻找的东西。

[以下是如何在项目内和项目间使用它们的说明](http://blogs.msdn.com/b/wpfsdk/archive/2007/06/08/defining-and-using-shared-resources-in-a-custom-control-library.aspx)。

# jboss - 将 Guice 注入 JAX-WS POJO

> ID：15249493
> 
> 赞同：1
> 
> 时间：2013-03-06T14:09:20.693
> 
> 标签：jboss, jax-ws, guice

我正在使用 JBoss 7.1 和 Java 1.6。

我想通过 JAX-WS 端点集成[Guice服务。](http://code.google.com/p/google-guice/)使用 Gunnar.Morling 描述的拦截器模式，当使用无状态 bean 作为 Web 服务时，我能够正确实例化 Guice 模块。但是我不能用一个简单的 POJO 注释 web 服务来做同样的事情。这可能有没有人找到解决方法。以下是我迄今为止所做的努力的总结。

```
@UsesGuice @Interceptor
public class GuiceInterceptor {

  @Inject
  private GuiceInjectorHolderBean injectorHolder;

  @AroundInvoke
  public Object aroundAdvice(final InvocationContext ctx) throws Exception {
    if (ctx.getTarget().getClass().isAnnotationPresent(UsesGuice.class)) {
        final Injector injector = injectorHolder.getInjector();
        injector.injectMembers(ctx.getTarget());
    }
    return ctx.proceed();
  }
} 
```

GuiceInjectorHolderBean 是一个单根 bean，负责触发 guice 连接。所需的注解类如下

```
@Retention(RUNTIME)
@Target(TYPE) 
@InterceptorBinding 
public @interface UsesGuice {} 
```

JAX-WS POJO 类

```
@UsesGuice
@WebService(serviceName = "EchoServiceService", portName = "EchoServicePort", ame = "EchoServiceImpl", targetNamespace = "lala")
public class EchoServiceImpl implements EchoService
{
  @Inject
  MyGuiceInjection injection;

  @Override
  @WebMethod
  public String sayHello(final String msg)
  {
    return "Hello " + injection.call(msg);
  }
} 
```

在此先感谢迪米特里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T03:39:14.410

**您当前的方法**

在您的代码中，`javax.interceptor`注释和受 CDI 和 EJB 标准支持，而不是 Guice `@Interceptor`。Guice通过接口和调用方法使用专有的[AOP](http://code.google.com/p/google-guice/wiki/AOP)拦截。`@InterceptorBinding``@AroundInvoke``org.aopalliance.intercept.MethodInterceptor``AbstractModule.bindInterceptor`

因此，您尝试通过以下方式在端点上引导 Guice 注入：

1.  在端点的方法上使用*非 Guice 拦截器*
2.  在`@AroundInvoke`方法中，以编程方式调用 Guice `Injector`，注入目标是拦截的端点

那求问，1 用什么？

**您当前方法的“引导”拦截机制**

显然，正如您所说，EJB 拦截器可以工作。

除了 EJB 或 Guice AOP 拦截器……一个明显的替代方案是标准的 CDI 拦截器。

但这会使这一切变得相当循环和重量级......为什么只使用 CDI 来进行自举，以便您可以配置和执行您想要的 DI 竞争对手：Guice？

**建议的替代解决方案 - 手动端点实例初始化的 JAX-WS 支持**

如果你想要 POJO web 服务，也许考虑回溯一点，而不是拦截器驱动的 Guice 初始化，也许这可能是你需要的：

```
 javax.xml.ws.Endpoint.publish(String address, Object implementor) 
```

[端点.发布 javadoc](http://docs.oracle.com/javase/7/docs/api/javax/xml/ws/Endpoint.html#publish%28java.lang.String,%20java.lang.Object%29)

以标准方式初始化 Guice，`injector.getInstance()`用于构建您的端点实例，然后用于`Endpoint.publish`针对端口设置端点实例。下面给出了一个很好的例子：

[在 Web 容器外的 Java 6 中使用带有 JAX-WS 的 Guice 3](https://stackoverflow.com/questions/7687204/using-guice-3-with-jax-ws-in-java-6-outside-web-container)

# visual-studio-2012 - 当我打开已打开文件的项目时，Web Essentials 2012 崩溃

> ID：15249495
> 
> 赞同：4
> 
> 时间：2013-03-06T14:09:22.933
> 
> 标签：visual-studio-2012, web-essentials

一件有趣的事情正在发生，我希望有人能够帮助我。

安装了 Web Essentials 的 Visual Studio 2012 工作正常，直到最新更新（他们删除较少的更新，coffeescript 等）

但是自从更新以来，我遇到了问题。这只发生在我打开一个具有文件的项目时 - Web Essentials 将对其进行操作 - 已经打开。

如果我在关闭项目之前使用 cshtml/less/css 文件关闭所有选项卡。然后下次我打开那个项目时，我很好。我什至可以打开这些文件，然后 Web Essentials 就可以使用它的所有额外功能。但是，如果在保存项目时甚至打开了其中一个文件，并因此在加载项目时自动打开，那么整个 Visual Studio 就会崩溃。

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:44:29.000

经过几天和几天的搜索后发现了问题（发布此问题后仅几分钟:)）

最新版本的 Web Essentials 需要 ASP.NET 和 Web 工具 2012.2 我听说过很多关于这些工具 2012.2 的信息，但我认为它们是一个扩展——可能是使用 Visual Studio 自动安装的“Microsoft Web 开发工具”或其他东西使用我机器上运行的所有自动更新软件自动升级。

所以我尝试更新所有扩展并刷新和搜索更新 - 无济于事。

我什至下载并安装了 VS2012 Update 2 CTP4，认为这一定是每个人都在谈论的难以捉摸的更新。

好吧，我相信您已经猜到了，实际上以上都不是。该链接是[http://go.microsoft.com/fwlink/?LinkId=282650](http://go.microsoft.com/fwlink/?LinkId=282650)

它列在 Web Essentials 的主页上，但不在运行更新时弹出的页面上。

我希望这个链接可以帮助某人。

# javascript - onDataChange 不是函数

> ID：15249496
> 
> 赞同：0
> 
> 时间：2013-03-06T14:09:26.140
> 
> 标签：javascript

我有这样的 .php 文件

```
... html / php code ...

<script>
  (function(){
    window.mypage.onDataChange(data);
   })();
</script>

...html / php code ...

<script>
  (function(){
    window.mypage.onDataChange = function(data){
             ...
            };
   })();
</script> 
```

所以我们可以看到，我在页面顶部调用我的函数，并在底部描述这个函数，但不明白为什么我得到

```
{"msg":"TypeError: window.mypage.onDataChange is not a function","url":"/","lineNumber":"137","browser":{"mozilla":"true","version":"19.0"}} 
```

有什么问题？当我测试我的脚本时，它运行良好，控制台中没有任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:28:52.503

您需要在调用它们之前定义您的函数。以这种结构的方式，它不会这样做。

切换两个代码块的顺序（window.mypage.onDataChange = function ... 需要在函数调用之上），或者只是将函数调用放入 onload。

jQuery 样式示例：

```
$(function(){
  window.mypage.onDataChange(data);
});

HTML / PHP Code 
```

工作代码：

```
<script type='text/javascript'>
  window.mypage = {
    onDataChange: function(data){
     console.log(data);
    }
  }

  var data = "This is data, yay";
  window.mypage.onDataChange(data);
</script> 
```

# ios - Xcode：如何从另一个视图调用方法？视图之间的交互

> ID：15249498
> 
> 赞同：0
> 
> 时间：2013-03-06T14:09:35.880
> 
> 标签：ios, objective-c, delegates, uitableview

我有一个视图控制器，另一个视图控制器作为子控制器，表视图控制器也作为子控制器。我的第一个孩子就像一个有几个按钮的工具栏，但没有任何方法。我需要的是，当点击第一个孩子的按钮时，该视图必须从表格视图控制器调用带有按钮标签（所有按钮都有不同的标签）的方法来过滤列表。那么，我需要知道什么来控制这些子控制器之间的交互？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T19:07:58.667

在其他视图中处理更改、操作或用户交互是[委托](http://developer.apple.com/library/ios/#documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html)的基本用例。最佳实践是让第一个视图控制器成为子视图控制器的代表，然后当子视图控制器中发生事件时，它们会调用其代表的某些方法来通知它。为了响应委托调用，您可以重新加载表格视图、禁用/启用按钮或您需要执行的任何其他更新。

保持视图之间的值/状态同步的其他选项是：

*   [核心数据](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)——最适合用于数据
*   [Key-Value Observation](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html) - 最适合用于数据
*   `NSNotification`s sent through [`NSNotificationCenter`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)- 最适合用于操作

# active-directory - 在没有凭据的情况下连接到 ad-lds

> ID：15249503
> 
> 赞同：0
> 
> 时间：2013-03-06T14:09:48.190
> 
> 标签：active-directory, adlds, lds

我在 Windows Server 2008 R2 上生成了一个 AD-LDS 实例，并通过 Windows 7 机器上的 ADSI Edit 成功连接到它（两台计算机都位于同一个域中）。

我的目标是创建一个由所有域用户运行的轻量级 .NET 程序，并确定特定用户是否可以执行特定操作（角色和组）。

到目前为止，我已经设法编写了大部分内容，但我现在面临一个小安全问题：虽然从服务器本身运行时不需要凭据，从另一个用户（当然在同一个域中）运行时，LDS连接需要实例的管理员凭据 - 我不太愿意将这种事情留在我的代码中。

我在网上搜索了很多绕过它的方法（Active Directory 绑定？/ SimpleBinding？），但我发现的所有解决方案都涉及 SSL 和证书安装。

域中的用户是否有一种简单的方法可以在不暴露他/服务器凭据的情况下连接 LDS 实例？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T23:48:02.827

您是否查看过实例本身的权限？您可以向某些组添加委托人。听起来您以安装 LDS 的用户身份在本地运行代码，默认情况下会获得各种权限，但其他用户没有被授予足够的权限（默认情况下是安全的）。

# ios - 使用“BaseClass *”类型的表达式初始化“SubClass *__strong”的不兼容指针类型

> ID：15249505
> 
> 赞同：3
> 
> 时间：2013-03-06T14:09:51.843
> 
> 标签：ios, objective-c, macos, compiler-construction, clang

在 Objective-C 中，为什么我们不能`alloc`+`init`或`new`带有超类的基类对象，而我们可以使用超类的构造函数来初始化？

下面是一些代码：

`s1`可以很舒服地创建。

```
NSMutableString *s1=[NSString string];
NSLog(@"%@",s1); 
```

但是`s2`并`s3`不能，并给出警告

`Incompatible pointer types initializing 'SubClass *__strong' with an expression of type'BaseClass *'`

```
NSMutableString *s2=[[NSString alloc] init];
NSLog(@"%@",s2);

NSMutableString *s3=[NSString new];
NSLog(@"%@",s3);

//here no warning.
id mem=[NSString alloc];
NSMutableString *s4=[mem init];
NSLog(@"%@",s4); 
```

当我们将 alloc + init 分成两个不同的语句时会发生什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T15:04:22.033

答案可以在Clang 3.3 文档的[Objective-C 特性中找到：](http://clang.llvm.org/docs/LanguageExtensions.html#objective-c-features)

> **相关结果类型**
> 
> 根据 Cocoa 约定，具有特定名称（“init”、“alloc”等）的 Objective-C 方法总是返回作为接收类类型实例的对象。此类方法被称为具有“相关结果类型”，这意味着发送到这些方法之一的消息将具有与接收者类的实例相同的静态类型。

因此在

```
NSMutableString *s2 = [[NSString alloc] init]; 
```

右侧的类型实际上是`NSString *`and not `id`，并将其分配给 an`NSMutableString *`会给出“不兼容的指针类型”警告。

另一方面，`string`方法在

```
NSMutableString *s1 = [NSString string]; 
```

没有“相关结果类型”，所以它只返回一个`id`可以分配给`NSMutableString *`.

`id`仅当您用作中间类型时，将 alloc/init 分解为单独的语句才会抑制警告。使用`NSString`or`NSMutableString`您仍然会收到警告：

```
NSString *tmp4 = [NSString alloc];
NSMutableString *s4 = [tmp4 init]; // <-- Warning here

NSMutableString *tmp5 = [NSString alloc]; // <-- Warning here
NSMutableString *s5 = [tmp5 init]; 
```

* * *

根据文档，如果方法的返回类型与其类的类型兼容，并且如果：

*   第一个词是“alloc”或“new”，方法是类方法，或者
*   第一个词是“autorelease”、“init”、“retain”或“self”，方法是实例方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:32:49.230

**第一个案例**

```
 NSMutableString *s2=[[NSString alloc] init];
   NSLog(@"%@",s2); 
```

在这里，您正在创建一个`NSString`实例并`init`在其上发送消息，最后您将一个`NSString`实例分配给`NSMutableString`. 这里编译器知道您分配了**不兼容的指针类型**。所以它警告你。

**第二种情况**

```
id mem=[NSString alloc];
NSMutableString *s3=[mem init]; 
```

您正在创建一个`NSString`实例并分配为 type `id`。并发送`init`一个类型的对象`id`。**id**类型是通用的，编译器直到运行时才知道它的实际类型（动态类型）。所以它**不会警告你**。所以问题不在于嵌套调用。

最后它只是我的观察:)。

# objective-c - Cocos2d：带边框的纯色矩形精灵

> ID：15249507
> 
> 赞同：1
> 
> 时间：2013-03-06T14:09:55.443
> 
> 标签：objective-c, opengl, cocos2d-iphone, sprite

**有没有一种方法可以在纯色精灵周围添加边框而无需创建另一个精灵？**

这里是创建纯色矩形精灵的代码。感谢 Mat Cegiela 在 SO ( [https://stackoverflow.com/a/14609459/1097106](https://stackoverflow.com/a/14609459/1097106) ) 上分享它。：

```
-(CCSprite*)blankSpriteWithSize:(CGSize)size
{
    CCSprite *sprite = [CCSprite node];
    GLubyte *buffer = malloc(sizeof(GLubyte)*4);
    for (int i=0;i<4;i++) {buffer[i]=255;}
    CCTexture2D *tex = [[CCTexture2D alloc] initWithData:buffer pixelFormat:kCCTexture2DPixelFormat_RGB5A1 pixelsWide:1 pixelsHigh:1 contentSize:size];
    [sprite setTexture:tex];
    [sprite setTextureRect:CGRectMake(0, 0, size.width, size.height)];
    free(buffer);
    return sprite;
} 
```

这很好用，因为它不使用任何图像文件。

要添加边框，可以使用上述方法创建两个纯色精灵，一个稍微小一点，并将较小的一个作为子精灵添加到父精灵，但是有没有一种方法可以更优雅地做到这一点？

我试过了（[https://stackoverflow.com/a/10903183/1097106](https://stackoverflow.com/a/10903183/1097106)）——感谢 Morion 的分享：

```
CGSize selfSize = [self contentSize];
float selfHeight = selfSize.height;
float selfWidth = selfSize.width;
CGPoint vertices[4] = {ccp(0.f, 0.f), ccp(0.f, selfHeight), ccp(selfWidth, selfHeight), ccp(selfWidth, 0.f)};
ccDrawPoly(vertices, 4, YES); 
```

在精灵中`-(void)draw`没有任何积极的结果。将此代码添加到`-(void)draw`.

**编辑：** 原来问题是缺少`[super draw];`inside `-(void)draw`。添加它会使其工作。

这里的实现`-(void)draw`将允许在纯色矩形精灵周围设置边框（它还定义了自定义颜色）：

```
-(void)draw
{
    [super draw];

    CGSize selfSize = [self contentSize];
    float selfHeight = selfSize.height;
    float selfWidth = selfSize.width;
    CGPoint vertices[4] = {ccp(0.f, 0.f), ccp(0.f, selfHeight), ccp(selfWidth, selfHeight), ccp(selfWidth, 0.f)};
    ccDrawColor4B(120, 120, 120, 255);
    ccDrawPoly(vertices, 4, YES);
} 
```

# java - Thread 类和 Object 类中的方法

> ID：15249508
> 
> 赞同：0
> 
> 时间：2013-03-06T14:09:59.963
> 
> 标签：java, multithreading

我们`start(), run() and join() methods`在线程对象上使用线程时使用线程，这些方法在`Thread class`.

我们也`wait(), notify(), and notifyAll()`将其与 Thread 对象一起使用，但这些方法位于`Object class`.

我在想为什么需要在 Object 类下定义这些方法，因为我们只用`Threads`? 调用它们。我们知道，每当我们调用`wait()`对象时，都会进入等待状态，等待共享资源/条件满足，但这只能在线程环境中发生。

所以问题是为什么需要将这些方法放在 Object 类下？

如果我在这里遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:14:13.607

方法`wait()`//属于对象，因为它们与此对象一起工作就像与监视器一样`notify()`。`notifyAll()`

## 类似的问题：

*   [为什么等待、通知和通知所有方法都在对象类中？](https://stackoverflow.com/questions/9516038/why-wait-notify-and-notifyall-methods-are-in-object-class)
*   [为什么在 Java 的 Object 类中声明 wait() 和 notify()？](https://stackoverflow.com/questions/1769489/why-are-wait-and-notify-declared-in-javas-object-class)
*   [为什么等待/通知/通知所有方法在 java 中不同步？](https://stackoverflow.com/questions/7019745/why-wait-notify-notifyall-methods-are-not-synchronized-in-java)

*在询问之前尝试在 SO 上搜索相同的问题...*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:12:04.337

每个 Java 对象都有一个与之关联的[监视器。](http://en.wikipedia.org/wiki/Monitor_%28synchronization%29)您引用的功能在对象的监视器上运行。这就是需要在下面定义它们的原因`Object`（它们*可以*成为`static`其他类的成员，但无论如何它们都需要采用类型参数`Object`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:13:07.980

Object类是所有java类的超类。Object中的方法我们可以在任何类中使用来进行同步。

# html - ASP.NET Server tags being rendered in IE6, IE7 and IE8

> ID：15249510
> 
> 赞同：0
> 
> 时间：2013-03-06T14:10:11.030
> 
> 标签：html, vb.net, asp.net-mvc-3, server-tags

I've got a weird issue where the ASP.NET closing server tags are being rendered on the page and I'm not able to figure what is causing this issue. There is nothing in between the body and the first div, which has an id="Page". There is no issue in other browsers. Do you have any ideas?

This is the code behind and what gets rendered in IE6, notice the server tags, right before the intial div.

![IE 6](../Images/7f5ce84d159b2ab87f72de47517c9833.png) [http://i.stack.imgur.com/FkIZ2.png](https://i.stack.imgur.com/FkIZ2.png)

IE8 same issue, different place, and there is also a snapshot from inspecting the elements which confirms the place of the server tags (though that control uses another master page, that has a simillar structure - see code below).

![IE 8](../Images/57620fdbbae5638f513df7d4e5468c70.png) [http://i.stack.imgur.com/WqjB6.png](https://i.stack.imgur.com/WqjB6.png)

Any ideas are good, cos at the moment I don't know what else to try. :) Thank you in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:15:36.803

You missed the final delimiter of the `href` in the `lt IE 9` `<link>`.

Just add the delimiter and everythings should work fine.

# javascript - javascript/jquery - 在弹出窗口第 2 部分控制的父选项卡中隐藏元素

> ID：15249511
> 
> 赞同：0
> 
> 时间：2013-03-06T14:10:11.893
> 
> 标签：javascript, jquery, popup, parent

有人可以帮我吗？我有一个父窗口和一个弹出窗口。我希望他们交流，但代码有问题。请告诉我有关 javascript 或 jquery 的信息。我只想让弹出窗口也控制父窗口。

我的 index.html

```
<html>
<head>
<script>
function openwindow() { window.open("pop.html","mywindow","menubar=1,resizable=1,width=400,height=400"); }
</script>
</head>
<body>
<a href="href="javascript: openwindow()"" id="will-hide-in-pop">Show pop up!</a>
</body>
</html> 
```

然后我们点击锚点后，弹出窗口将显示。这是带有表单的弹出代码： 弹出代码：

```
<html>
<head>
<script>
function clicked(){window.opener.document.getElementById('will-hide-in-pop').style.display="none"; }
</script>
</head>
<body>
<div>
<form action="process.php" method="GET">
<input type="text" name="text" />
<input type="checkbox" name="cbox" />
<input type="submit" name="" onclick="clicked()"/>
</form>
</div>
</body>
</html> 
```

我输入了正确的代码吗？我只想要表单提交后，父窗口中的锚点也会消失

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:17:06.037

尝试在 jQuery 提交中调用您的函数：

```
 $(document).ready(function () {
     $('form').submit(function () {
         clicked();             
      });       
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:17:18.703

注意选择器：.getElementById('will-hide-in-pop') 在弹出窗口中，您使用 getElementById，但在索引中，有 class="will-hide-in-pop"。

# iphone - 为分组表子类化 UITableViewCell

> ID：15249512
> 
> 赞同：1
> 
> 时间：2013-03-06T14:10:11.967
> 
> 标签：iphone, ios, objective-c, uitableview

我正在尝试创建`UITableViewCell`要在分组表中使用的自定义子类。

我正在用`nib`. （我刚刚尝试在没有笔尖的情况下这样做，但遇到了同样的问题）。

每当我在想要创建具有不同背景等的全新单元格样式之前完成此操作时...所以`awakeFromNib`我这样做...

```
- (void)awakeFromNib
{
    // N.B. I am not doing this, this is how I normally get rid of border
    // in this case I want the border so I am not running this code.
    self.backgroundView = [[UIView alloc] initWithFrame:CGRectZero];
    self.backgroundColor = [UIColor clearColor];
} 
```

但在这种情况下，我想保留圆角的背景，我只是向它添加不同的 UI 元素。

单元格被创建并且所有元素的布局都正确，但是我在每个部分的左上角都有一个烦人的“第二个边框”。

我有一个屏幕截图显示这个。

![问题截图](../Images/84165ab1f5ccea640c6f38487c8072db.png)

起初我以为这是我屏幕上的一根头发或其他东西，但事实并非如此。

我试过设置`backgroundView`and`backgroundColor`但这会删除正常的单元格背景，我想保留它们。

有什么想法可以摆脱这个吗？

**编辑**

只是为了澄清我上面所说的关于设置`backgroundColor`和`backgroundView`.

这是我更改它们时会发生的情况...

![在此处输入图像描述](../Images/b6241a46523de218d493d74d0f737df0.png)

在这个我设置`backgroundView`为`nil`. 边界仍然存在，但我试图摆脱的那一点点也是如此。

![在此处输入图像描述](../Images/db1c2221b0b0b098044ce83df5e8d44a.png)

如果我将其设置`backgroundView`为新的，`UIView`则会发生这种情况......

我想要与白色背景和圆角边框相同的背景。只是没有那个烦人的一点。

# php - PHP：识别出空格时如何插入？

> ID：15249513
> 
> 赞同：-4
> 
> 时间：2013-03-06T14:10:12.510
> 
> 标签：php, newline, whitespace, line-breaks

我有一系列坐标（lat1，long1 lat2，long2 lat3，long3 ...）

`121.01953125,14.6893901824952 121.019706726075,14.6893205642702 121.019889831543,14.6891403198242 121.020111083984,14.688931465149 121.020446777344,14.6887502670288 121.020835876465,14.6887207031249`

我想要做的是在识别/检测到空格时输入换行符或“br”，这样它就变成了......

```
121.01953125,14.6893901824952 
121.019706726075,14.6893205642702 
121.019889831543,14.6891403198242 
121.020111083984,14.688931465149 
121.020446777344,14.6887502670288 
121.020835876465,14.6887207031249 
```

关于如何做到这一点的任何想法？先感谢您。

编辑：我尝试了他们建议的解决方案，但它不起作用。

```
echo str_replace(" ","<br />",$string); 
```

我的字符串来自一个 kml 文件，当我回显该字符串时，它就像我上面所说的那样。我正在使用以下代码来解析文件。

```
$string = $placemark->MultiGeometry->Polygon->outerBoundaryIs->LinearRing->coordinates; 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T14:11:25.100

尝试：

```
echo str_replace(' ', '<br />', $yourCoordinates); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T14:11:57.843

尝试这个

```
$str = str_replace(" ","<br />",$str); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T14:13:23.893

`echo str_replace(' ', '<br/>', $coordinates);`

这应该够了吧 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T14:14:20.133

尝试这个：

```
$string = "121.01953125,14.6893901824952 121.019706726075,14.6893205642702 121.019889831543,14.6891403198242 121.020111083984,14.688931465149 121.020446777344,14.6887502670288 121.020835876465,14.6887207031249";

echo $return = str_replace(" ","<br />",$string); 
```

希望这对你有帮助

# yesod - 使用带有 setMessage 的类型安全 URL？（小村庄与小村庄）

> ID：15249515
> 
> 赞同：3
> 
> 时间：2013-03-06T14:10:15.780
> 
> 标签：yesod, hamlet

如何在 setMessage 中使用类型安全的 url？

我想改变

```
 ...
 setMessage [shamlet|<span .warning>Warning! See Help.|]
 ... 
```

到包含链接的消息。

从我迄今为止收集到的信息来看，它应该以某种方式工作

```
 ...
 renderer <- getUrlRender
 let html = [hamlet|<span .warning>Warning! See #
                     <a href=@{HelpR}> Help!|]
 setMessage $ toHtml $ html renderer
 ... 
```

但该代码只是给我整个文件中令人困惑的错误消息。

我确实阅读了有关莎士比亚模板的印刷版 Yesod Book Chapter，但我发现它对所涉及的类型不是很明确。比如生产什么类型的`[hamlet|...|]|`？如果没有 URL-Interpolation，ghci 会报告`t -> Markup`但内部有 URL-Interpolation，我只会得到错误。

我对所涉及的所有类型同义词进一步感到困惑，例如`[shamlet|...|]`提供一些类型的东西`Html`，而`setMessage`期望一个`Html ()`。我不知道如何轻松查找这些内容：Hoogle 经常找不到关于该主题的任何内容，而 Google 总是会找到可能过时的版本（以及不再有效的示例） - 确定我最终会获得最新版本，但有没有地方可以我对这些有一个简单的概述？（ghci 可以列出一个类型的所有同义词吗？）

请注意，我实际上想在纯功能代码片段中生成消息，稍后由处理程序使用。这就是为什么我想将 URL 渲染与指定小村庄的地方分开。感谢您提供正确方向的任何指示！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T17:58:55.710

我认为您想使用[getUrlRenderParams](http://haddocks.fpcomplete.com/fp/7.4.2/20130301-40/yesod-core/Yesod-Handler.html#v%3agetUrlRenderParams)。奇怪的是，今天在 IRC 上出现了一个相关的讨论。Hamlet 模板将 URL 呈现函数作为其第一个参数，并且该函数必须具有两个参数：一个类型安全的 URL 和一个查询字符串参数列表。getUrlRender 返回一个不接受查询字符串参数的函数，这就是您需要 getUrlRenderParams 的原因。

# performance - Azure PaaS 云驱动器与 IaaS 磁盘的性能

> ID：15249516
> 
> 赞同：2
> 
> 时间：2013-03-06T14:10:16.067
> 
> 标签：performance, azure, azure-clouddrive, azure-disk

根据对[StackOverflow 答案](https://stackoverflow.com/a/14936780/172029)的评论，

> 在 Web 或辅助角色中，您必须使用 Azure 驱动器 - 它的性能远低于使用 VHD 获得的 Azure 磁盘。参考：[blogs.msdn.com/b/windowsazurestorage/archive/2012/06/28/…</a>](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/06/28/exploring-windows-azure-drives-disks-and-images.aspx)
> 
> [](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/06/28/exploring-windows-azure-drives-disks-and-images.aspx)
> 
> [–](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/06/28/exploring-windows-azure-drives-disks-and-images.aspx)[马特约翰逊](https://stackoverflow.com/users/634824/matt-johnson)2 月 19 日 20:15

但是，我已经阅读了此参考链接和其他相关文档，但我找不到任何支持 PaaS 云驱动器比 IaaS 磁盘慢的断言。事实上，我唯一看到的是驱动器在 2 MB 块上工作，而磁盘在 128 KB 块上工作。因此，我假设驱动器*比*磁盘性能更高。

> 驱动器：IO < 2 MB 将是 1 个事务；IO >= 2 MB 将被分解为 2MB 或更小的事务
> 
> 磁盘：IO < 128 KB 将是 1 个事务；IO >= 128 KB 将被分解为 128 KB 或更小的事务

有没有人有任何现实世界的指标或链接来表明这两个选项之间的性能差异？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T18:07:27.243

目前这两个功能的实现方式不同。

Azure 驱动器是一个文件系统筛选器，它抓取 NTFS 调用、转换为 REST 并转发到支持磁盘的 Azure Blob（页面 Blob）。网络 IO 计入 VM 的配额（VM 的每个核心获得 100Mb/秒）。

数据驱动器在 Azure Hypervisor 中实现，并作为可挂载驱动器呈现给来宾操作系统。相同的基本思想 - 它将对驱动器的调用转换为 REST，并与支持驱动器的 Azure Blob（仍然是页 Blob）进行交互。调用存储的网络 IO 不计入来宾操作系统，因此在调用数据磁盘时仍然可以有 100Mb/sec/core 用于“常规”网络流量。

对于这两者，都有本地缓存​​选项，其影响将根据特定的工作负载和 IO 模式而有所不同。

我建议您快速阅读以下内容以获取更多详细信息：

[http://blogs.msdn.com/b/windowsazurestorage/archive/2012/11/04/windows-azure-s-flat-network-storage-and-2012-scalability-targets.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/11/04/windows-azure-s-flat-network-storage-and-2012-scalability-targets.aspx)

[http://blogs.msdn.com/b/windowsazurestorage/archive/2012/06/28/exploring-windows-azure-drives-disks-and-images.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/06/28/exploring-windows-azure-drives-disks-and-images.aspx)

# mysql - go 将空接口转换为字符串

> ID：15249518
> 
> 赞同：2
> 
> 时间：2013-03-06T14:10:24.697
> 
> 标签：mysql, go, type-conversion

我正在使用 mymysql 包，我正在尝试创建一个获取 SQL 查询和一些参数的函数（作为可变参数空接口）：

```
func FindByQuery(statement string, params ...interface{}) (diver *DiverT, err error) {
    values := make([]interface{}, len(params))
    for i := range params {
            values[i] = params[i]
    }

    // Both statements result in the same error...
    row, _, execError := Db.QueryFirst(statement,values...)

    row, _, execError := Db.QueryFirst(statement,params...)

    // Additional code...
} 
```

当我使用某种 SQL 调用此方法时，总是会收到 SQL 错误。我做类似的事情：

```
FindByQuery("SELECT * FROM Diver WHERE Name=?", "Markus") 
```

这会导致以下错误：

> 从 MySQL 服务器收到 #1064 错误：“您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以获取在第 1 行的 '?%!(EXTRA string=Markus)' 附近使用的正确语法”

我应该怎么做才能将参数正确转换为字符串（或其他字符串，如果我有不同的参数）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-25T13:03:56.977

尝试使用 printf 格式语法：

```
FindByQuery("SELECT * FROM Diver WHERE Name=%s", "Markus") 
```

# c# - Ultrawingrid - 根据唯一值选择行

> ID：15249520
> 
> 赞同：2
> 
> 时间：2013-03-06T14:10:35.367
> 
> 标签：c#, infragistics, ultrawingrid

有没有办法根据其中一列（ID 列）的值在超翼网格中选择一行？我一直试图找出如何做到这一点，但收效甚微。

我有一个全局变量，它是“活动 ID”（即当前正在应用程序中编辑的 ID - 它是系统认为被选中和活动的 ID） - 但有时网格的选定行和“选定 ID”变量不匹配。我需要确保它们相同，以防止用户混淆。我希望在 refresh() 函数中调用以下代码...

也许像（有点像伪代码）：

```
int index; // This could be any number

foreach (row r in grid)
{
    if (row.cell["ID"].value = index)
        grid.selectedindex = thisRow;
} 
```

我的想法是否正确？如果是这样，正确的语法是什么？如果没有，我还应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:37:37.063

知道了。

```
 int index;
            foreach (UltraGridRow row in grid.Rows)
            {
                if (Convert.ToInt32(row.Cells["ID"].Value) == index)
                {
                    grid.ActiveRow = row;
                    break;
                }
            } 
```

就像我需要的那样工作 - 很抱歉回答我自己的问题；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-14T22:10:36.450

是的。您可以使用该`FirstOrDefault`函数查找符合条件的行：

```
var row = ultraGrid1.Rows.FirstOrDefault(r => r.Cells["Id"].Value.ToString() == "1"); 
```

现在您（可能）拥有单元格包含您想要的值的行，您可以激活它来选择它：

```
if (row != null)
row.Activate(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T22:09:29.787

如果您绑定到能够通过键查找项目的 DataTable 或列表，则可以使用 Rows 集合的[GetRowWithListIndex](http://help.infragistics.com/NetAdvantage/WinForms/Current/CLR4.0/?page=Infragistics4.Win.UltraWinGrid.v12.2~Infragistics.Win.UltraWinGrid.RowsCollection~GetRowWithListIndex.html)方法来查找 UltraGridRow。

例如以下将激活键为 5 的行：

```
DataTable dt = this.ultraGrid1.DataSource as DataTable;
DataRow dr = dt.Rows.Find(5);
this.ultraGrid1.Rows.GetRowWithListIndex(dt.Rows.IndexOf(dr)).Activate(); 
```

如果您的列表不支持按键查找项目，您也可以使用 linq 在列表中查找项目。[有一个在此处](https://stackoverflow.com/questions/1175645/find-an-item-in-list-by-linq)查找带有链接的项目的示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-23T11:58:25.133

如果您有多个乐队，您可以使用以下内容：

```
int index;

ultraGrid1.DisplayLayout.Bands.OfType<Infragistics.Win.UltraWinGrid.UltraGridBand>()
    .SelectMany(s => s.GetRowEnumerator(Infragistics.Win.UltraWinGrid.GridRowType.DataRow)
    .OfType<Infragistics.Win.UltraWinGrid.UltraGridRow>())
    .Where(s => s.Cells.Exists("ID"))
    .FirstOrDefault(s => (int)s.Cells["ID"].Value == index)?
    .Activate(); 
```

注意：空条件运算符 (?) 需要 C# 6.0 或更高版本。否则你必须检查，如果`FirstOrDefault(...)!=null`然后激活它。

# ruby-on-rails - user_spec 上未定义的方法“Factory”

> ID：15249521
> 
> 赞同：4
> 
> 时间：2013-03-06T14:10:36.340
> 
> 标签：ruby-on-rails, factory-bot

我遇到了一个快速的问题。我得到了 user_spec 页面的“未定义方法‘工厂’”。我相信“let(:user) { Factory(:user) }”的语法不正确。但是我想不出一个可行的方法。

```
Failure/Error: let(:user) { Factory(:user) }
     NoMethodError:
       undefined method `Factory' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_1:0x007fc7ac31e6a8> 
```

如果有人可以查看我的代码并帮助我，那将不胜感激，因为我几乎完成了密码重置的测试。

user_spec.rb：

```
require 'spec_helper'

describe User do
  describe "#send_password_reset" do
    let(:user) { Factory(:user) }

    it "generates a unique password_reset_token each time" do
      user.send_password_reset
      last_token = user.password_reset_token
      user.send_password_reset
      user.password_reset_token.should_not eq(last_token)
    end

    it "saves the time the password reset was sent" do
      user.send_password_reset
      user.reload.password_reset_sent_at.should be_present
    end

    it "delivers email to user" do
      user.send_password_reset
      last_email.to.should include (user.email)
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T14:29:56.243

Factory Girl 方法如下：

```
let(:user) { FactoryGirl.create(:user) } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-06T14:11:36.583

替换`Factory`为`FactoryGirl`，他们将其更改为消除歧义并让有用的`Factory`命名空间可用。

# mysql - MySQL GROUP BY 年份怪异

> ID：15249522
> 
> 赞同：0
> 
> 时间：2013-03-06T14:10:38.063
> 
> 标签：mysql

鉴于此表：

```
CREATE TABLE `items` (
`id` int(11) unsigned NOT NULL AUTO_INCREMENT,
`type` char(15) DEFAULT NULL,
`ext_id` varchar(255) DEFAULT NULL,
`timestamp` int(11) DEFAULT NULL,
`title` varchar(255) DEFAULT NULL,
`txt` text,
`url` varchar(255) DEFAULT NULL,
`longitude` float(9,6) DEFAULT NULL,
`latitude` float(9,6) DEFAULT NULL,
`meta` text,
PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=41695 DEFAULT CHARSET=utf8; 
```

数据范围从 2005 年到 2013 年，所有数据都在 (int) 时间戳列中，此查询：

```
SELECT DATE_FORMAT(`timestamp`, '%Y') as 'year',
COUNT(id) as 'total'
FROM items
GROUP BY DATE_FORMAT(`timestamp`, '%Y') 
```

返回这个：

```
'year' => null
'COUNT(*)' => string '38710' (length=5)

'year' => string '2011' (length=4)
'COUNT(*)' => string '45' (length=2)

'year' => string '2012' (length=4)
'COUNT(*)' => string '67' (length=2)

'year' => string '2013' (length=4)
'COUNT(*)' => string '90' (length=2) 
```

为什么我没有得到正确的结果？当我遍历 a`SELECT * FROM items`时，我在打印时得到了正确的日期`<?php print date('Y-m-d H:i', $item->timestamp); ?>`，所以日期就在那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:16:39.397

`DATE_FORMAT`想要一个 MySQL 日期类型作为它的参数，而不是一个表示 UNIX 时间戳的整数。如果您将日期存储为 UNIX 时间戳（顺便说一句，您通常不应该这样做），那么您需要将其转换为`FROM_UNIXTIME()`. 还有一个`YEAR()`返回年份的函数，比使用 DATE_FORMAT 更简洁。

所以简而言之，你想要`YEAR(FROM_UNIXTIME(timestamp))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:16:38.883

[DATE_FORMAT](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)接受`date`作为它的第一个参数。你给一个int。

# delphi - 永远不会在 TObjectDispatch 上调用受保护方法的覆盖

> ID：15249529
> 
> 赞同：0
> 
> 时间：2013-03-06T14:11:00.513
> 
> 标签：delphi

我正在尝试扩展 TObjectDispatch 的受保护虚拟方法。但是这个方法永远不会被调用。

[编辑以重现问题]。

当我覆盖 GetPropInfo 并在 TMyDispatch 中使用它时，它按预期工作。被覆盖的方法被调用。但是，当由 TMyDispatch（模拟我的真实世界示例）创建时，不会调用 TMyDispatchItem 上的覆盖方法。

```
{$METHODINFO ON}

  TExtDispatch = class(TObjectDispatch)
  protected
    function GetPropInfo(const AName: string; var AInstance: TObject;
      var CompIndex: Integer): PPropInfo; override;
  public
    constructor Create;
  end;

  TMyDispatchItem = class(TExtDispatch)
  private
    FItemValue: string;
  public
    procedure ShowItemValue;
  published
    property ItemValue: string read FItemValue write FItemValue;
  end;

  TMyDispatch = class(TExtDispatch)
  public
    function GetItem: TMyDispatchItem;
  private
    FValue: string;
  public
    procedure ShowValue;
  published
    property Value: string read FValue write FValue;
  end;

  {$METHODINFO OFF}

  TTestForm = class(TForm)
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  TestForm: TTestForm;

implementation

{$R *.dfm}

procedure TTestForm.Button1Click(Sender: TObject);
var
  V: Variant;
  VI: Variant;
begin
  V := IDispatch(TMyDispatch.Create);
  V.Value := 100; //this calls inherited getpropinfo
  V.ShowValue;

  VI := V.GetItem;
  VI.ItemValue := 5; //this doesn't
  VI.ShowItemValue;
end;

{ TExtDispatch }

constructor TExtDispatch.Create;
begin
  inherited Create(Self, False);
end;

function TExtDispatch.GetPropInfo(const AName: string; var AInstance: TObject;
  var CompIndex: Integer): PPropInfo;
begin
  Result := inherited GetPropInfo(AName, AInstance, CompIndex);
  ShowMessage('GetPropInfo: ' + AName);
end;

{ TMyDispatch }

function TMyDispatch.GetItem: TMyDispatchItem;
begin
  Result := TMyDispatchItem.Create;
end;

procedure TMyDispatch.ShowValue;
begin
  ShowMessage('My dispatch: ' + Value);
end;

{ TMyDispatchItem }

procedure TMyDispatchItem.ShowItemValue;
begin
  ShowMessage('My item value: ' + FItemValue);
end;

end. 
```

实际上，我已经找到了一种解决此问题的方法，方法是将 的数据类型更改`TMyDispatch.GetItem`为以 Variant 形式返回。像这样：

```
function TMyDispatch.GetItem: Variant;
begin
   Result := IDispatch(TMyDispatchItem.Create);
end; 
```

现在突然调用了被覆盖的方法。我真的很想了解这里发生了什么。

还有更多的想法或解释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:17:13.873

众所周知，Delphi 中的虚拟方法分派可以工作。所以，如果`TExtDispatch.GetPropInfo`没有被执行，那么这些是可能的原因：

1.  该`GetPropInfo`方法根本没有被调用。
2.  被调用的实际实例`GetPropInfo`不是`TExtDispatch`.

如果你展示了其余的代码，那么我们可以更确定，但上述选项应该足以让你解决它。

唯一打电话的地方`GetPropInfo`是`GetIDsOfNames`。如果您的覆盖`GetIDsOfNames`没有调用`GetPropInfo`，那么其他任何东西都不会。

* * *

考虑到您更新的代码，我在调试器下运行它。单击按钮时，`TObjectDispatch.GetPropInfo`会调用两次。第一次调用它是调用`inherited GetPropInfo()`in 的结果`TExtDispatch.GetPropInfo`。第二次调用它时，您可以检查`ClassName`以找出类`Self`是什么。当你这样做时，你会发现`ClassName`计算结果为`'TObjectDispatch'`。在这种情况下，我列表中的第 2 项就是解释。

* * *

我真的不明白你想在这里做什么。但是，我怀疑您的问题源于`GetItem`实施方式。我怀疑它应该是这样的：

```
function TMyDispatch.GetItem: IDispatch;
begin
  Result := TMyDispatchItem.Create;
end; 
```

`TInterfacedObject`当您将构造函数的返回值分配给对象引用时，应该已经敲响了警钟。这总是一个错误。您必须将其分配给接口引用。

我希望发生的事情是调度代码`IDispatch`如果遇到一个，它将使用一个，但如果它找到一个类的实例，而不是创建一个新`IDispatch`的来完成这项工作。这是第三个实例`TObjectDispatch`。

# java - 如何使用 junit 和 easymock 模拟静态方法

> ID：15249534
> 
> 赞同：0
> 
> 时间：2013-03-06T14:11:21.277
> 
> 标签：java, junit, easymock, jmock

接下来的问题是：我需要测试私有类的方法**methodTest()**。methodTest **(** )从外部库调用静态方法***staticExternal() 。***如果我使用 JMock 和 EasyMock，但包含***staticExternal()***的类没有接口 ，如何替换***mockLocal()***上的*staticExternal() ？*

 *PS PowerMock 无法使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:13:08.030

据我所知，你不能。基本上，该代码很难测试。您应该考虑提取依赖项，其中该依赖项的“正常”实现调用静态方法。

从根本上说，静态方法调用很难精确替换，因为它们是静态的。为了拦截静态方法调用，PowerMock 之类的工具必须适应 Java 的核心（替换类加载器等）。在我看来，*通常*最好重构你的代码，这样它就可以在没有那种东西的情况下进行测试。*

# html - Bootstrap 上的 CSS 媒体查询在 iPhone 上不起作用

> ID：15249554
> 
> 赞同：2
> 
> 时间：2013-03-06T14:12:14.460
> 
> 标签：html, iphone, twitter-bootstrap, css, media

我正在`Bootstrap`用作我的响应式框架。

我在 Bootstrap CSS 文件下有自己的样式表，其中包含自己的样式表......`Media Queries`但是在我`iPhone 4`的.`heading``tags`

这是我的代码外观的片段：

```
<link href="assets/css/bootstrap.css" rel="stylesheet">
<link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
<link href="assets/css/style.css" rel="stylesheet"> 
```

我设置`Media Queries`如下.....

```
 /* Large desktop */
  @media (min-width: 1200px) { ... }

  /* Portrait tablet to landscape and desktop */
  @media (min-width: 768px) and (max-width: 979px) { ... }

  /* Landscape phone to portrait tablet */
  @media (max-width: 767px) { ... }

  /* Landscape phones and down */
  @media (max-width: 480px) { ... } 
```

我已经清除了 iPhone 上的缓存，但仍然无法正常工作

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T16:07:16.123

你可能错过了标签

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

在您的进口之前。

请参阅文档并确保您遵循了所有步骤：

[http://twitter.github.com/bootstrap/scaffolding.html](http://twitter.github.com/bootstrap/scaffolding.html)

# c - 为什么我得到“direct://”作为我的程序的输出？

> ID：15249557
> 
> 赞同：0
> 
> 时间：2013-03-06T14:12:18.737
> 
> 标签：c, network-programming

我正处于在 c 中为类编写代理服务器的早期阶段，在调试时，我的程序给了我一个奇怪的简单输出，有两行

直接的：//

直接的：//

这是什么意思？我以前从未发生过这种情况。当我不提供执行该程序所需的 3 个参数时，该程序甚至会输出此内容。

```
#include <pthread.h>
#include <unistd.h>
#include <arpa/inet.h>
#include <stdlib.h>
#include <stdio.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <time.h>
#include <string.h>

int main (int argc, char *argv[]){

   if(argc!=3){
      printf("Usage: proxy <IP address> <port no.>");
      exit(1);
   }

   int csock, ssock, clen, slen;
   int csocka, ssocka;
   int rc, fd, ttl;
   char method[40];
   char uri[80];
   char prot[40];
   char cbuf[100];
   time_t logtime;
   char * pch;

   struct sockaddr_in caddr;
   struct sockaddr_in caddr2;
   struct sockaddr_in saddr;
   struct sockaddr_in saddr2;

   csock = socket(AF_INET, SOCK_STREAM, 0);
   caddr.sin_family = AF_INET;
   caddr.sin_addr.s_addr = inet_addr(argv[1]);
   caddr.sin_port = htons(atoi(argv[2]));
   clen = sizeof(caddr);
   rc = bind(csock, (struct sockaddr *) &caddr, clen);
   if(rc < 0){
      printf("bind failed");
      exit(1);
   }
   rc = listen(csock, 5);
   if(rc < 0){
      printf("listen failed");
      exit(1);
   }
   printf("hey");
   csocka = accept(csock, (struct sockaddr *) &caddr2, &clen);
   if(csocka < 0){
      printf("accept failed");
      exit(1);
   }

   while(1){
      read(csocka,&cbuf,sizeof(cbuf));
      time(&logtime);                                   //time of req.
      if(cbuf==NULL){
         cerror("400 Bad Request: empty request");
         write(csocka, &errbuf, sizeof(errbuf));
         continue;
      }
      ttl = strlen(cbuf);
      while(cbuf[ttl-1] == '\n' || cbuf[ttl-1] == '\r'){
         cbuf[ttl--] = '\0';
      }
      if(sscanf(cbuf,"%[^ ] %[^ ] %[^ ]", method, uri, prot) != 3){
         cerror("400 Bad Request: Unexpected number of arguments");
         write(csocka, &errbuf, sizeof(errbuf));
         continue;
      }
      if(method!="GET" || method !="HEAD"){
         cerror("405 Method Not Allowed: GET/HEAD only");
         write(csocka, &errbuf, sizeof(errbuf));
         continue;
      }
      if(uri == (char*) 0){
         cerror("400 Bad Request: empty url");
         write(csocka, &errbuf, sizeof(errbuf));
         continue;
      }
      printf("%s \n", cbuf);
   }

   close(csocka);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:18:19.253

最可能的原因是您运行的不是程序，而是一些系统程序。

如果您在 Linux 机器上，请键入：

`which <program name>`

找出您实际运行的可执行文件。

类型：

`./<program name>`

改为运行您的程序（前提是您与可执行文件位于同一目录中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:29:36.567

你为什么忽略 的返回值`read`？是什么让你认为对你来说`read`是空终止`cbuf`的？如果`read`不是 null terminating `cbuf`，那么是什么让您认为将 buf 传递给安全`strlen`？您通过将不是字符串的东西传递给 strlen 来调用未定义的行为......接下来的行为可能看起来很奇怪或不一致，但这是未定义行为的本质。

```
int len = read(csocka,&cbuf,sizeof(cbuf));
if (len <= 0) {
    /* something went wrong in read().
     * report an error and stop here... */
    break;
}
/* Once error checking is performed, len is the number of bytes recieved by read. */ 
```

考虑上面的代码。`ttl=strlen(cbuf);`如果您正确检查错误，您需要这条线吗？

`printf("%s \n", cbuf);`是错误的，因为 cbuf 不是字符串。考虑`fwrite(cbuf, len, stdout); putchar('\n');`或`printf("%.*s\n", len, stdout);`。

`write(csocka, &errbuf, sizeof(errbuf));`看起来也有问题，但我会把它留给你。如果您需要我们为您修复这些类型的错误，那么您的学习方法效果不佳。你在看哪本书？

# c# - 在 List 中查找值的第一个索引

> ID：15249559
> 
> 赞同：0
> 
> 时间：2013-03-06T14:12:25.487
> 
> 标签：c#, linq, list

在文本中，我有一些相同的单词，我想获得每个单词的位置。使用这样的结构：

```
fullText = File.ReadAllText(fileName);  
List<string> arr = fullText.Split(' ').ToList();
List<string> result = arr.
    Where(x => string.Equals(x, "set", StringComparison.OrdinalIgnoreCase)).
    ToList();

for (int i = 0; i < result.Count; i++)
{
     Console.WriteLine(arr.IndexOf(result[i]));
} 
```

我只得到每个单词的最后一个位置。例如，我有：

```
**LOAD SUBCASE1  SUBTITLE2 LOAD SUBCASE3 SUBTITLE4 load Load Load** 
```

我必须得到

```
**LOAD : position 1 
LOAD : position 4
load : position 7
Load: position 8 
Load : position 8** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:23:13.227

要获取索引，请尝试以下操作；

```
List<string> result = arr.Select((s,rn) => new {position = rn+1, val = s})
         .Where(s => string.Equals(s.val, "LOAD", StringComparison.OrdinalIgnoreCase))
         .Select(s => s.val + " : position " + s.position.ToString()) 
         .ToList(); 
```

上面的查询不会返回`**LOAD`and `Load**`。为了得到你的预期结果`**`，我认为你可以使用`s.val.Contains()`如下；

```
List<string> result = arr.Select((s, rn) => new { position = rn + 1, val = s })
     .Where(s => s.val.ToLower().Contains("load"))
     .Select(s => 
        s.val.EndsWith("**") ? s.val.Substring(0, s.val.Length - 2) + 
        " : position " + s.position.ToString() + "**" : s.val + " : position " + 
        s.position.ToString())
     .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:27:30.780

> 您的单词表中没有“集合”。....我错了，而是必须是“加载”

你`Equals`用来比较。这意味着您要比较整个单词，而不是单词的一部分，因此将省略“**LOAD”。这是想要的吗？否则使用`IndexOf`.

但是，您可以使用此查询：

```
var words = fullText.Split().Select((w, i) => new{Word = w, Index = i});
var matches = words.Where(w =>  StringComparer.OrdinalIgnoreCase.Equals("load", w.Word));
foreach(var match in matches)
{
    Console.WriteLine("Index: {0}", match.Index);
} 
```

[**演示**](http://ideone.com/0hltyN)

```
Index: 4
Index: 7
Index: 8 
```

`IndexOf`方法是：

```
var partialMatches =  words.Where(w =>  w.Word.IndexOf("load", StringComparison.OrdinalIgnoreCase) != -1);
foreach (var partialMatch in partialMatches)
{
    Console.WriteLine("Index: {0}", partialMatch.Index);
} 
```

[**演示**](http://ideone.com/nMOEYh)

```
Index: 0
Index: 4
Index: 7
Index: 8
Index: 9 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:40:04.023

这是一个完成这项工作的扩展方法：

```
public static class Extensions
{
    public static IEnumerable<int> IndecesOf(this string text, string pattern)
    {
        var items = text.Split(' ');
        for(int i = 0; i < items.Count(); i++)
            if(items[i].ToLower().Contains(pattern));
                yield return i + 1;
    }
} 
```

以及用法：

```
var fullText = "**LOAD SUBCASE1 SUBTITLE2 LOAD SUBCASE3 SUBTITLE4 load Load Load**";
foreach(int i in fullText.IndecesOf("load"))
    Console.WriteLine(i); 
```

输出：

> 1 4 7 8 9

请注意，我从您的示例字符串中删除了双倍空格，当使用双倍空格时，拆分会将一个空字符串添加到数组中。

# sql - 我应该使用 EAV 数据库设计模型还是很多表

> ID：15249562
> 
> 赞同：4
> 
> 时间：2013-03-06T14:12:36.640
> 
> 标签：sql, database, database-design, relational-database, entity-attribute-value

我开始了一个新的应用程序，现在我正在寻找两条路径，不知道哪个是继续的好方法。
我正在建立类似**电子商务**网站的东西。我有一个**类别**和**子类别**。
问题是现场有不同类型的**产品，每种产品都有不同的****属性**。并且站点必须可以通过这些产品属性进行**过滤。**
这是我最初的数据库设计：

```
Products{ProductId, Name, ProductCategoryId}
ProductCategories{ProductCategoryId, Name, ParentId}
CategoryProperties{CategoryPropertyId, ProductCategoryId, Name}
ProductPropertyValues{ProductId, CategoryPropertyId, Value} 
```

现在经过一些分析，我发现这个设计实际上是**EAV**模型，我读到人们通常**不推荐这种设计。**
似乎一切都需要动态 sql 查询。

这是一种方式，我现在正在研究它。

我看到的另一种方式可能被命名为*LOT WORK WAY*，但如果它更好，我想去那里。做表

```
Product{ProductId, CategoryId, Name, ManufacturerId} 
```

并在数据库中进行表继承，这意味着使表像

```
Cpus{ProductId ....}
HardDisks{ProductId ....}
MotherBoards{ProductId ....}
erc. for each product (1 to 1 relation). 
```

我知道这将是一个非常大的数据库和非常大的应用程序域，但它是否比 EAV 设计的选项**更好、更容易且性能更好。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T15:38:43.410

EAV 很少能赢。在您的情况下，我可以看到 EAV 的吸引力，因为不同的类别将具有不同的属性，否则将很难管理。但是，假设有人想搜索“所有具有 3 个以上盘片、使用 SATA 接口、转速为 10k rpm 的硬盘驱动器”？您在 EAV 中的查询会很痛苦。如果你想支持这样的查询，EAV 就出局了。

然而，还有其他方法。您可以考虑一个带有扩展数据的 XML 字段，或者，如果您使用的是 PostgreSQL 9.2，则可以考虑一个 JSON 字段（虽然 XML 更容易搜索）。这将为您提供更大范围的可能搜索，而无需 EAV 的麻烦。权衡是模式执行会更难。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T15:05:34.290

[这个](https://stackoverflow.com/questions/4066463/should-i-use-eav-model)问题似乎更详细地讨论了这个问题。

除了那里讨论的性能、可扩展性和复杂性之外，还要考虑：

*   SQL Server等SQL数据库具有全文检索功能；因此，如果您有一个描述产品的字段 - 全文搜索将为其编制索引，并能够提供高级语义搜索

*   看看现在风靡一时的 no-sql 系统；它们的可扩展性应该非常好，并且它们为非结构化数据（例如您拥有的数据）提供支持。Hadoop 和 Casandra 是很好的起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-01T09:56:08.043

您可以很好地使用 EAV 模型。我们对物流应用程序做类似的事情。它是建立在.net 上的。除了表格之外，您的应用程序代码还必须正确处理对象。看看您是否可以为每个对象添加通用表。它对我们有用。

# objective-c - 强制 NSScrollView 独立于输入设备使用 NSScrollerStyleOverlay

> ID：15249563
> 
> 赞同：3
> 
> 时间：2013-03-06T14:12:42.523
> 
> 标签：objective-c, macos, nsscrollview

如何强制`NSScrollView`使用这样的滚动条：

![在此处输入图像描述](../Images/b3a5c28d8b91f83a46247e5b27be5b90.png)

独立于输入设备，因为现在如果计算机连接了有线鼠标或应用程序正在笔记本电脑（macbook）上运行，它会使用如下滚动条：

![在此处输入图像描述](../Images/4a2de334c06ef4a5a9e020534fbdb9d2.png)

女巫总是可见的。如果用户更改系统偏好设置中的设置，就有可能达到我想要的结果。但我需要在不改变任何东西的情况下得到这个结果。或者也许有一些简单的方法可以使用 custom `NSScrollers`？

隐藏滚动条是可以接受的结果，但是当我隐藏它们时，我遇到了一些滚动问题。我使用自定义 NSClipView 女巫将 documentView 调整为在调整其帧大小时居中。但是，当我调整帧大小并将其滚动到中心时，如果我滚动到任何地方，它会跳到左下角，然后按应有的方式工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-14T10:55:33.250

我正在使用表格视图，我只是把这段代码放在 awakeFormNib 中：

```
[[self.tableView enclosingScrollView] setScrollerStyle:NSScrollerStyleOverlay]; 
```

我也尝试隐藏滚动条，但后来我无法使用触控板滚动内容（使用鼠标没问题）。在另一个项目中，我有类似的表格视图，设置相同，隐藏滚动条不会导致任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-20T08:16:57.103

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(notify:) name:NSPreferredScrollerStyleDidChangeNotification  object:nil];

- (void)notify:(NSNotification*)
{
    __weak typeof(self) weakself = self;
    dispatch_async(dispatch_get_main_queue(), ^{
        weakself.scrollView.scrollerStyle = NSScrollerStyleOverlay;
    });
} 
```

# html - 将表合并到一个表

> ID：15249567
> 
> 赞同：0
> 
> 时间：2013-03-06T14:13:01.683
> 
> 标签：html, css, ruby-on-rails, ruby-on-rails-3, erb

相关片段

显示.html.erb

```
<% outbound_messages.each do |outbound_message| %>
        <h5>Outbound Message</h5>
        <%= render "trace/display_tabular_data", :data => outbound_message %>
    <% end %> 
```

Display_tabular_data.html.erb

```
<table border="1px solid black">
  <thead>
  <tr>
    <%data.each do |key,value|%>
        <th><%=key.capitalize%></th>
    <%end%>
  </tr></thead><tr>
  <%data.each do |key,value|%>
      <td><%=value%></td>
  <%end%>
</tr>
</table> 
```

因此，每行数据都会打印在一个唯一的表中。所以有类似[http://imgur.com/1gskRvX](http://imgur.com/1gskRvX)

但显然，一个更好的结果将是一个单独的表（期望的结果）

```
Outbound Message
Message ID, Exchange, Relayed
Row1
Row2
Row3
Row4
...
.... 
```

有什么想法可以解决这个问题吗？Display_tabular_data 在 show.html.erb 中的不同位置至少被调用了 15 次，因此如果可以通过仅在 display_tabular_data 中而不是在 show.html.erb 中进行更改以某种方式获得这个最终结果，那将会容易得多。如果不可能，请给我最好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:33:01.740

如果您不想为每个对象呈现单独的表格，那么在 show.html.erb 中使用类似的内容怎么样：

```
<% unless outbound_messages.empty? %>
  <%= render 'trace/display_tabular_data', :data => outbound_messages %>
<% end %> 
```

然后在部分：

```
<h5>Outbound Messages</h5>

<table border="1px solid black">
  <thead>
  <tr>
    <% data.first.each do |key,value| %>
      <th><%=key.capitalize%></th>
    <% end %>
  </tr>
  </thead>

  <% data.each do |outbound_message| %>
    <tr>
    <% outbound_message.each do |key,value|%>
        <td><%=value%></td>
    <% end %>
    </tr>
</table> 
```

仅当您确信每个 outbound_message 都具有相同的密钥集时，这才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:33:49.493

干得好..

```
<% if outbound_messages.count > 0 %>
  <h5>Outbound Message</h5>
    <table border="1px solid black">
      <thead>
        <tr>
        <td>Message ID</td>
        <td>Exchange</td>
        <td>Relayed</td>
      </tr>
      </thead>
      <% outbound_messages.each do |outbound_message| %>
        <tr>
          <td>
            <%= outbound_message[:message_id] %>
          </td>
          <td>
            <%= outbound_message[:exchange] %>
          </td>
          <td>
            <%= outbound_message[:relayed] %>
          </td>
        </tr>
      <% end %> 
    </table>
<% end %> 
```

您可以完全消除部分

# c# - C# - 将数据写入流 + 使用另一个流读取数据

> ID：15249571
> 
> 赞同：0
> 
> 时间：2013-03-06T14:13:08.013
> 
> 标签：c#, multithreading, stream

现在我有一个[StreamWriter](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)和一个[StreamReader](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)，1个包含（文本）数据的文件，至少 2 个线程。1个线程是一个监听器并读取数据。另一个线程将内容写入流中。

**我可以避免使用文件作为内存缓冲区吗？**

我认为有可能从两端连接 2 个流。但不知道如何。我创建写入文件的编写器。然后我启动一个线程来创建一个阅读器，该阅读器从这个文件中读取并完成他的工作。它有效，但我想避免使用文件。

* * *

```
// writer
StreamWriter writer = new StreamWriter(new FileStream("text.txt", FileMode.Create, FileAccess.Write, FileShare.Read));
writer.AutoFlush = true;
// reader
StreamReader reader = new StreamReader(new FileStream("text.txt", FileMode.Open, FileAccess.Read, FileShare.ReadWrite)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:21:53.073

我发表了一些我称之为`ProducerConsumerStream`会做到这一点的东西。它是一个内存流，允许一个读取器和一个写入器。它是一个固定大小的循环缓冲区，允许消费者以尽可能快的速度读取生产者可以写入。请参阅[构建一种新型流](http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=852)。

# android - android.net.TrafficStats 缺少功能

> ID：15249577
> 
> 赞同：0
> 
> 时间：2013-03-06T14:13:20.360
> 
> 标签：android, network-traffic

我想用`android.net.TrafficStats`. [文档](http://developer.android.com/reference/android/net/TrafficStats.html)说，这个类中有一个和`getUidTcpTxBytes()`一个`getUidUdpTxBytes()`函数。这些软件是在 API 级别 8 中添加的。我使用的是 API 级别 8，但我找不到这些功能，只有其中一些像`getTotalRxBytes()`.

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:17:03.873

[`getUidTcpTxBytes()`](http://developer.android.com/reference/android/net/TrafficStats.html#getUidTcpTxBytes%28int%29)与[`getUidUdpTxBytes()`](http://developer.android.com/reference/android/net/TrafficStats.html#getUidUdpTxBytes%28int%29). 您可以通过查看 JavaDocs 中的方法并查看“在 API 级别 12 中添加”表示法来判断这一点，该符号位于包含方法签名的灰色条的右侧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:17:10.623

仔细看一下：[getUidTcpTxBytes() 和 getUidUdpTxBytes()](http://developer.android.com/reference/android/net/TrafficStats.html#getUidTcpTxBytes%28int%29)是在 API 级别 12 中添加的。实际上它们中的大多数是在 API 级别 12 和 14 之后添加的。

# java - 线程主 java.util.InputMismatchException 错误中的异常

> ID：15249578
> 
> 赞同：0
> 
> 时间：2013-03-06T14:13:21.203
> 
> 标签：java

我对发生了什么有疑问，每当我尝试编译它时，它总是给我一个像这样的错误：

```
Exception in thread "main" java.util.InputMismatchException
at java.util.Scanner.throwFor(Unknown Source)
at java.util.Scanner.next(Unknown Source)
at java.util.Scanner.nextInt(Unknown Source)
at java.util.Scanner.nextInt(Unknown Source)
at Person.main(Person.java:38) 
```

我想要的只是让用户能够输入他们的年龄和姓名并将其存储在“年龄”和“姓名”变量中，然后让它在底部字符串中打印出来。如果有人也想帮我清理我的代码，那也没什么坏处。

```
import java.util.*; 
import java.io.*; 
import java.util.Scanner;

public class Person 

{

public static void main(String[]args) 

    {

    int age;
    int name;

    Scanner scan = new Scanner(System.in);

    System.out.println("Enter in your age.");
    age = scan.nextInt();

     if (age < 18) 

     {
         System.out.println("So you're a kid, huh? That's fine.");
     } 

     else if (age >= 18)

     {
        System.out.println("Ah, and adult! Good.");
     }

     @SuppressWarnings("resource")
     Scanner in = new Scanner(System.in);

     System.out.println("Enter in your name");
     name = in.nextInt();

     System.out.println("So you're " + age + " years old and your name is " + name);

}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T14:15:52.177

**问题**

```
 int name; //Name should be of type String
 ...
 System.out.println("Enter in your name");
 name = in.nextInt(); //It doesn't handle the string since your using `nextInt` 
```

**解决方案**

```
 String name;
 ...
 System.out.println("Enter in your name");
 name = in.nextLine(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:15:15.483

为什么名称是整数？`int name;`

我怀疑您正在使用字母字符输入您的姓名......并且在这一行遇到了异常：`name = in.nextInt();`

`name` **不**应该是整数。它**应该**是一个字符串。

因此，`string name;`和`name = in.nextLine();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:16:19.787

这意味着您的程序试图读取一个不是整数的整数值。

使用时`name = in.nextInt();`

它应该是 string.not int

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-27T17:31:40.947

java.util.Scanner.throwFor（未知来源）的线程“主”java.util.InputMismatchException 中的异常

让我解释一下为什么您会遇到这种类型的错误您将**name**变量定义为**int**但在控制台中您将提供 **字符串**作为输入。所以编译器会抛出 InputMismatchException 错误。最好将 name 变量作为字符串:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-29T06:58:24.873

更正的代码：

```
import java.util.*;  
import java.io.*; 

public class Person  { 
    public static void main(String[]args)  {
        int age;
        String name;

        Scanner scan = new Scanner(System.in);

        System.out.println("Enter in your age.");
        age = scan.nextInt();//for Number input 
        System.out.println("Enter in your name");
        name = scan.next();//for String Input 

        if (age < 18) 
        {
             System.out.println("So you're a kid, huh? That's fine.");
        } 

        else if (age >= 18)
        {
            System.out.println("Ah, and adult! Good.");
        }

        System.out.println("So you're " + age + " years old and your name is " + name);

    } 
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-08-19T09:49:24.170

*名称 = in.nextInt();* 因为您需要用户名，所以显然它将是 String 类型，因此请使用 name=in.next( **)**或**name=in.nextLine()**。我希望它现在可以工作。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2020-04-23T11:49:16.177

```
import java.util.*;
class Employe
{
    private int id;
    private String name;
    Employe(int id,String name)
    {
        this.id=id;
        this.name=name;
    }
    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
}
public class Quarantine {
public static void main(String[] args) {
    Employe empList[]=new Employe[2];
    Scanner sc=new Scanner(System.in);
    for(int index=0;index<empList.length;index++) {
    int id=sc.nextInt();
    String name=sc.nextLine(); 
    empList[index]=new Employe(id,name);
    }
    for(int index=0;index<empList.length;index++) {
        System.out.println(empList[index].getId()+" "+empList[index].getName());
        }}
} 
```

如果我输入为 1，则

它会显示错误，因为两者都被视为字符

我需要输入 124，运行

# c# - php的soap解决方案

> ID：15249586
> 
> 赞同：0
> 
> 时间：2013-03-06T14:13:46.860
> 
> 标签：c#, php, web-services, soap, wsse

我在调用 php 中的 Web 服务时遇到问题，该 Web 服务是用 c# 语言编写的。我在 c# 中有可以正常工作的示例代码，此代码使用 System.ServiceModel.ClientBase。

```
ServiceReference2.ExternalClient t = new ServiceReference2.ExternalClient ();
            t.Endpoint.Binding.CloseTimeout = new TimeSpan(500, 0, 0);
            t.Endpoint.Binding.SendTimeout = new TimeSpan(500, 0, 0);
            t.Endpoint.Binding.ReceiveTimeout = new TimeSpan(500, 50, 0);
            t.ClientCredentials.ServiceCertificate.Authentication.CertificateValidationMode = System.ServiceModel.Security.X509CertificateValidationMode.None;
            t.ClientCredentials.UserName.UserName = txtUserName.Text;
            t.ClientCredentials.UserName.Password = txtPassword.Text;
            string ds = t.GetTransfer(txtDate.Text); 
```

我测试了 nusoap 和 soapclient，但我收到了错误消息（错误的请求或错误获取 http 标头）。

我的问题与[WSSE PHP SOAP Client Header 函数调用](https://stackoverflow.com/questions/13350691/wsse-php-soap-client-header-function-call)和我的 WSDL 类似[WSDL](http://www.voilacomcel.com/voilaws/VoilaComcelWS.svc?wsdl)

# jquery - 如何将引导 btn-group 中的菜单浮动到左侧？

> ID：15249590
> 
> 赞同：0
> 
> 时间：2013-03-06T14:13:55.050
> 
> 标签：jquery, css, twitter-bootstrap

```
<div class="pull-right">

 <div class="btn-group pull-left">
  <div class="btn-group">
   <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
    Action
    <span class="caret"></span>
   </a>
   <ul class="dropdown-menu">
    <li><a href="#">some link 1</a></li>
    <li><a href="#">some link 2</a></li>
    <li><a href="#">some link 3</a></li>
   </ul>
  </div>
 </div>

</div> 
```

现在它看起来像这样：

![在此处输入图像描述](../Images/3e3d42947961959dcdbf010b9fb25fc2.png)

我想要这样的东西：

![在此处输入图像描述](../Images/07400ec0f4c15fea799b7b48c372de86.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:54:56.983

要使下拉菜单显示为右对齐，您只需将 pullright 分配给下拉菜单：

Jsfiddle[演示](http://jsfiddle.net/shail/eerLr/)

```
<ul class="dropdown-menu pull-right">
   <li><a href="#">some link 1</a></li>
</ul> 
```

在您提供的代码中，分配给按钮组的 pull-left 类不会真正将其拉到左侧，因为父 div 正在使用 pull-right class 。如果要控制按钮组对齐及其位置。您可以执行以下操作： 不要**多次** `div class="btn-group"`使用

检查 jsfiddle 与您提供的代码（清理了一下）[Demo with button](http://jsfiddle.net/shail/xvbGz/) Assign class left in place of class pull-left ，这样：

```
 <div class="btn-group left"> <!-- I have assigned a new class to it i.e left --> 
```

比将 css 写入位置：

```
.btn-group.left{
   bottom: 15px;
   position: relative;
   top: 15px;
   right:20px;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:15:31.083

在`dropdown-menu`课堂`left: 0`上改为`right: 0`

# c# - 在 c# 中使用 vb.net 类

> ID：15249596
> 
> 赞同：3
> 
> 时间：2013-03-06T14:14:19.317
> 
> 标签：c#, .net, vb.net, dll, types

如何在 vb.net 中创建类型并在 c# 中使用该类型？我想我需要编译 vb 项目并添加对 dll 的引用，但不知道这是否是正确的方法，或者引用是否有效。这样做不是为了好玩，我们有一些 vb 代码，我们正在考虑这个选项。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T14:15:20.163

只需在 VB 中创建一个类库项目，然后从 C# 项目中添加对该项目的引用。（或者，如果它在不同的解决方案中，添加对由 VB 项目创建的 DLL 的引用。）这绝对没问题 - 您可以访问`Public`类库中的所有类型。

为了解决您问题中的评论，项目*都可以*默认使用相同的命名空间，但通常最好让每个项目都有自己的命名空间，因此很清楚任何特定类型的来源。

# java - 在 Spring 3.1 中替换 Spring-EncryptionUtils

> ID：15249605
> 
> 赞同：0
> 
> 时间：2013-03-06T14:14:39.960
> 
> 标签：java, spring, security, encryption

我将一个项目迁移到 Spring 3.1，该项目使用

```
org.springframework.security.util.EncryptionUtils 
```

这个类似乎在 Spring 3.1 中消失了，我发现一些参考资料表明它在 Spring 3.0 中已经被弃用了。

实用程序已用于简单的同步加密：

```
encryptedText = EncryptionUtils.encrypt(password, text)
decryptedText = EncryptionUtils.decrypt(password, encryptedText) 
```

这是一个不错且简单的方法。您能否建议使用可以达到相同结果的良好替代品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:28:39.347

您可以使用以下实用程序

```
org.acegisecurity.util.EncryptionUtils 
```

您可以使用以下网址下载此内容

```
http://www.java2s.com/Code/Jar/a/Downloadacegisecurity107osgijar.htm 
```

如果您有简单的需求并希望使用 DESede 加密密码，则此类很有用。

但对于更复杂的要求，则需要直接使用 Java 加密库。

# mongodb - 如何将翻译插入嵌套在数组中的子文档中？

> ID：15249607
> 
> 赞同：1
> 
> 时间：2013-03-06T14:14:42.413
> 
> 标签：mongodb

使用这样的模式，其中“items”字段包含一个带有嵌套翻译的子文档数组：

```
{
        "_id" : ObjectId("513740415b51ea0803000001"),
        "items" : [
                {
                        "id" : ObjectId("5137407f5b51ea100f000000"),
                        "title" : {
                                "en" : "Yes",
                                "fr" : "Oui",
                                "es" : "Si"
                        }
                },
                {
                        "id" : ObjectId("5137407f5b51ea100f000003"),
                        "title" : {
                                "en" : "No"
                        }
                }

        ],
} 
```

您将如何将翻译添加到特定项目 id ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:27:16.263

您可以使用[`$`位置运算符](http://docs.mongodb.org/manual/reference/operator/positional/#_S_)来更新文档的特定数组元素。

例如，添加`"de": "nein"`：

```
db.test.update(
    {'items.id': ObjectId("5137407f5b51ea100f000003")}, 
    {$set: {'items.$.title.de': 'nein'}}) 
```

`$`对象中的表示查询选择参数匹配`$set`的元素的索引。`items`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:19:48.300

你可以这样做：

`db.yourColName.update({"items.id" : "itemId"}, {$set : {"translationField" : "translationValue"}})`

在查询的第一部分中，您正在搜索数组中的直接项并为其设置一个新字段 + 值。

问题是，就像您已经注意到的那样，Mongo 没有静态模式。因此`$set`，要么更新现有字段，要么创建一个新字段。这完全取决于您在子查询中设置的字段名称。

要获取直接文档，请使用`$`运算符：`items.$.title.fr`where`$`将表示当前对象。

# r - R中的树：回归与分类

> ID：15249608
> 
> 赞同：2
> 
> 时间：2013-03-06T14:14:43.400
> 
> 标签：r, tree, classification, regression

我在 R 中使用树库，但是当我将数据放入树命令时，有时会得到回归树，有时会得到分类树。这是关于什么的？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T14:17:20.270

从帮助页面 ( `?tree`)

> 左侧（响应）应该是拟合回归树时的数值向量或生成分类树时的因子。

# timer - UnrealScript - 如何使用函数“ClearTimer()”

> ID：15249613
> 
> 赞同：0
> 
> 时间：2013-03-06T14:14:55.133
> 
> 标签：timer, unrealscript

我当前的代码： http: [//pastebin.com/3crQJqh8](http://pastebin.com/3crQJqh8)

但是我不想使用 ClearAllTimers，我只想清除一个计时器。但是当我尝试使用此处指定的 ClearTimer 函数时：

[http://wiki.beyondunreal.com/UE3:Actor_native_functions_%28UDK%29#ClearTimer](http://wiki.beyondunreal.com/UE3:Actor_native_functions_%28UDK%29#ClearTimer)

我得到编译错误。我相信要么我的语法错误，要么我错过了一些变量。如果有人能告诉我如何使用 ClearTimer 功能，我将不胜感激。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:27:47.690

设法通过使用使其工作：

```
ClearTimer('ReplenishSprint'); 
```

# c# - Linq xml to object - 如何填充集合

> ID：15249619
> 
> 赞同：0
> 
> 时间：2013-03-06T14:15:05.850
> 
> 标签：c#, xml, linq

好吧，我最近问了一个关于如何[使用自定义数据类型填充 Collection](https://stackoverflow.com/questions/15242736/linq-xml-to-object-how-to-populate-a-collectionfoo)的问题，但现在我不知道如何填充简单的字符串 Collection。也许有人愿意帮助我。

我的简化类结构：

```
public class Accommodation
{
    [XmlElement("Attribute")]
    public Collection<string> Categories;        
} 
```

xml 看起来像：

```
<Accommodation Id="f7cfc3a5-5b1b-4941-8d7b-f8a4a71fa530">
  <Categories>
    <Category Id=Time="1abc23"/>
    <Category Id=Time="2abc34"/>
  </Categories>
</Accommodation> 
```

这就是我的 linq 语句目前的样子（我需要一些帮助：

```
from x in doc.Descendants("Accommodation")
select new Accommodation()
{
    Categories = new Collection<string>(x.Descendants("Categories").SelectMany(
    categories => categories.Elements("Category").Select(
    (string)x.Element("Categories").Element("Category").Attributes("Id")).ToList()))
} 
```

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:24:24.193

看起来你只想要这个：

```
doc.Descendants("Accommodation")
   .Select(x => new Accomodation { Categories = 
                  x.Element("Categories")
                   .Elements("Category")
                   .Select(c => (string)c.Attribute("id")).ToList() }); 
```

如果`Accommodation`是 XML 的根标签，那就更简单了：

```
var accomodation = new Accomodation
{
    Categories = doc.Root.Element("Categories")
                         .Elements("Category")
                         .Select(c => (string)c.Attribute("id")).ToList()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:39:56.303

如果有人好奇，我现在就这样解决了。但我确信我的解决方案可能涉及比必要更多的开销。

```
 IEnumerable<Accommodation> temp = 
    (from x in doc.Descendants("Accommodation")
        select new Accommodation()
        {
            Categories = new Collection<string>(
                x.Descendants("Categories").SelectMany(categories 
                    => categories.Elements("Category").Select(category 
                        => category.Attribute("Id").Value ?? "")).ToList())
        }).ToList(); 
```

# excel - Excel 公式结果不是单元格值

> ID：15249621
> 
> 赞同：2
> 
> 时间：2013-03-06T14:15:08.603
> 
> 标签：excel, excel-formula, excel-2003

在 Excel 中，我尝试获取 2 个条件匹配的行数。我用这个函数 =COUNT(IF(Data!J$5:Data!J$1000="RC Corp",IF(Data!AD$5:Data!AD$1000="Expected Allowances / Provisions", 1)))

数据在我的工作簿中是一个不同的工作表。在单元格中，它向我显示结果 1。但是当我观看公式时，它告诉我“公式结果 = 2”正确的结果是 2。但它总是显示 1。我也尝试使用 f9 手动更新单元格，但没有变化。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:24:15.130

对于 Excel 2007+ 使用 =COUNTIFS(Data!J$5:Data!J$1000,"RC Corp",Data!AD$5:Data!AD$1000,"Expected Allowances / Provisions")

对于 2007 年以前的使用 =SUMPRODUCT((Data!D:D="RC Corp")*(Data!AD:AD="Expected Allowances / Provisions"))

# html - 使用 CSS 在一行上创建三个图标

> ID：15249623
> 
> 赞同：3
> 
> 时间：2013-03-06T14:15:12.817
> 
> 标签：html, css

我有三个图标需要放在一行上。如何使用 CSS 实现这一点？

这是HTML：

```
<div class="icon"></div>
<div class="icon"></div>
<div class="icon"></div>
<div class="icon"></div>
<div class="icon"></div>
<div class="icon"></div>
<div class="icon"></div>
<div class="icon"></div>
<div class="icon"></div>
<div class="icon"></div>
<div class="icon"></div> 
```

接下来是我已经拥有的 CSS：

```
.icon {
    min-height: 20px;
    max-width: 20px;
    min-width: 20px;
    display:inline-block;
    background-color: red;
    border-style:dashed;
    border-width: 1px;
}
.icon:nth-child(3n+0) {
    clear:right;
    display:block;
} 
```

上面的代码导致一行上有两个图标，然后下一行有一个图标，下一行有两个图标，依此类推。

我希望的是，每行三个图标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:19:15.133

为什么不在父元素上使用`float: left`with fixed ？[小提琴](http://jsfiddle.net/jtbrh/)`width`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T15:00:27.407

这是工作>> [jsfiddle](http://jsfiddle.net/J4z7p/)

```
<div class="icon"></div>
<div class="icon"></div>
<div class="icon"></div>
<div class="icon"></div>
<div class="icon"></div>
<div class="icon"></div>
<div class="icon"></div>
<div class="icon"></div>
<div class="icon"></div>
<div class="icon"></div>
<div class="icon"></div>
<div class="icon"></div>
<div class="icon"></div>

.icon {
    min-height: 20px;
    max-width: 20px;
    min-width: 20px;
    display:inline;
    background-color: red;
    border-style:dashed;
    border-width: 1px;
    float:left;
}
.icon:nth-child(3n+1) {
    clear:left;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T15:01:53.470

如果您将图标包装在一个最大宽度小于图标元素宽度 4 倍的元素中（以处理浏览器之间的框模型差异），这将解决问题。这是一个[小提琴](http://jsfiddle.net/UMcht/1/)。

```
.icon{max-width:70px;}
.icon span {
    height: 20px;
    width: 20px;
    display: inline-block;
    background-color: red;
    border-style:dashed;
    border-width: 1px;
}
.icon span:nth-child(3n+3) {
    background-color:blue; /*just to highlight it*/
}

<div class='icon'>
<span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T14:17:06.027

使用`3n+1`. 在 CSS 中，元素索引是从 1 开始的。

旁注：有什么关系`min-width:20px; max-width:20px`？为什么不直接放`width:20px`？

# c# - 对 .NET 中未对齐字段的读取和写入肯定是原子的吗？

> ID：15249626
> 
> 赞同：7
> 
> 时间：2013-03-06T14:15:16.793
> 
> 标签：c#, .net, atomic, memory-alignment

C# 规范（[ECMA-334](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-334.pdf)和[ISO/IEC 23270](http://standards.iso.org/ittf/PubliclyAvailableStandards/c042926_ISO_IEC_23270_2006%28E%29.zip)）有一段关于读写的原子性：

> **12.5 变量引用的原子性**
> 
> 以下数据类型的读取和写入应是原子的：bool、char、byte、sbyte、short、ushort、uint、int、float 和引用类型。此外，具有上一个列表中的基础类型的枚举类型的读取和写入也应该是原子的。其他类型的读取和写入，包括 long、ulong、double 和 decimal，以及用户定义的类型，不必是原子的。

但我很难想象这总是正确的。例如，我可以使用[`StructLayout`属性](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.structlayoutattribute.aspx)布局结构，并强制字段不对齐：

```
// sizeof(MyStruct) == 9
[StructLayout(LayoutKind.Sequential, Pack = 1)]
struct MyStruct
{
    public byte pad;   // Offset: 0
    public int value1; // Offset: 1
    public int value2; // Offset: 5
} 
```

现在当我这样做时，我会认为对 的写入`int`不是原子的，因为它没有与自然边界对齐*：*

```
MyStruct myStruct = new MyStruct();
myStruct.value1 = 20; 
```

那么，它绝对是原子的（就像规范所说的那样），还是不能保证是原子的（例如在 x86 上）？无论哪种方式，您是否有任何来源支持这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T14:19:44.150

我认为您是对的……在某些情况下，如果您故意不做任何事情，系统将不会按照语言规范运行。重要的是，[ECMA-335](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-334.pdf)在第一部分第 12.6.6 节中明确说明了这一点：

> *符合 CLI 的 CLI 应保证对正确对齐的内存*位置的读写访问 不大于本机字大小（本机 int 类型的大小）是原子的（参见 §I.12.6.2）相同的大小。原子写入不应改变除已写入的位之外的任何位。**除非使用显式布局控制（参见分区 II（控制实例布局））来更改默认行为**，否则不大于自然字长（本机 int 的大小）的数据元素应正确对齐。对象引用应被视为以本机字长存储。

（我的粗体强调；斜体在规范中。）

# asp.net - 在控制器中接收和解析 JSON 对象

> ID：15249628
> 
> 赞同：0
> 
> 时间：2013-03-06T14:15:23.120
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我正在将带有 jQ​​uery 的 json 对象数组发送到 asp.net mvc3 中的控制器。问题是当我在服务器上收到对象的字符串化版本时，因为它看起来为空。

当我收到 json 时，我希望将其转换为模型列表。

我发送的json是：

```
[{"0": [{"name": "name1", "value": "value1"}, {"name": "name2", "value": "value2"}]}, {"1": [{"name": "name3", "value": "value3"}, {"name": "name4", "value": "value4"}]}]  

public class Example
{
   public List<Model> Values {get; set;}
}

public ActionResult functionName(Example example) { //... } 
```

我想要的是将该 json 字符串转换为两个`Model`对象的列表。

# android - 带有 ImageButton 的 Android 自定义 ListView 没有获得焦点

> ID：15249632
> 
> 赞同：18
> 
> 时间：2013-03-06T14:15:32.430
> 
> 标签：android, android-listview, focus, imagebutton

我正在为安卓电视开发一个应用程序。我有一个`listview`带`ImageButton`+ `Textview`s 的孩子。由于电视不接受触摸事件，而是使用 D-PAD 或轨迹球遥控器，我必须将注意力集中在所有可点击的项目上，以便用户知道焦点在哪里。但问题是如果我添加我可以专注于列表行

`android:descendantFocusability="blocksDescendants"`

在自定义列表行布局中但`ImageButton`在列表行中不会获得焦点。如果我删除上面的代码然后`ImageButton`得到焦点但我不能点击列表行。

我也添加[`setItemsCanFocus`](http://developer.android.com/reference/android/widget/ListView.html#setItemsCanFocus%28boolean%29)了我的`ListView`但没有运气，没有任何改变。我阅读了很多文件，但我找不到这个问题的正确答案。我想同时关注 List 行和`ImageButton`. 有没有可能，有知道的请帮帮我...

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-01T12:23:37.140

> 我必须关注所有可点击的项目，以便用户知道焦点在哪里。但问题是如果我添加我可以专注于列表行

由于行文件中的多个视图而导致视图挂起，要单击您必须在行 xml 的主布局中再添加一个属性。

`android:descendantFocusability="blocksDescendants`

> 但是当我写上面的属性时，我无法关注我的行文件中的 ImageButton。

我只是尝试了一种方法来获得关注`ImageButton`和关注`listview`。

*要专注于 ImageButton：*

1.  创建一个选择器文件。
2.  应用于图像按钮。
3.  添加`android:focusableInTouchMode="true"`到图像按钮。

*要专注于 Listview：*

1.  添加`android:descendantFocusability="blocksDescendants`到行 xml 中的主布局。

现在，当您单击 ImageButton 时，它会聚焦于您想要的颜色，即使它也会聚焦于 listview 单击。

*选择器.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<selector 
    xmlns:android="http://schemas.android.com/apk/res/android"
    >
    <item 
        android:state_pressed="true"
        android:drawable="@android:color/transparent" 
        /> <!-- pressed -->    
    <item 
        android:state_focused="true"
        android:drawable="@android:color/darker_gray" 
        /> <!-- focused -->    
    <item 
        android:drawable="@android:drawable/btn_star" 
        /> <!-- default -->
</selector> 
```

在 S3 模拟器中测试，运行良好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-02T12:54:06.027

我以前也有同样的问题。我通过添加（到xml中的布局）解决了我的问题

```
android:focusableInTouchMode="true"
android:clickable="true" 
```

所以我的问题解决了。

注意：仅添加 android:focusableInTouchMode="true" 不起作用，您必须在 focusableInTouchMode 为 true 之后使布局可点击为 true。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-02T13:29:30.703

我在 listView 中遇到了同样的问题，但我找到了解决方案，只需使用 imageView 而不是图像按钮，然后行也可以点击和聚焦。

注意：当我们在 listView 中使用 button 或 imagebutton 时，列表视图的行会被禁用，以防止这种情况发生，而是使用 view 或 imageview。

希望这会对你有所帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-14T07:22:22.823

将以下代码添加到自定义行的父布局中，

```
android:descendantFocusability="blocksDescendants" 
```

并将以下代码添加到该布局中的任何按钮或 ImageButton

```
android:focusable="false"
android:focusableInTouchMode="false" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-06T15:52:21.067

你有没有尝试过 ：

```
setFocusableInTouchMode(false); 
```

或者

```
setFocusable(false); 
```

在您的两个项目（ImageButton 和 TextView）上？

# bash - 在终端中设置的 globstar 未传播到脚本

> ID：15249633
> 
> 赞同：4
> 
> 时间：2013-03-06T14:15:34.797
> 
> 标签：bash, shell, shopt

我需要使用随源提供的 build.sh 构建一个库。它包含一个 globstar 路径 ( `src/**/*.java`)。我启用了 globstar`shopt -s globstar`并且所有工作都在终端上很好，但来自 bash 文件：

```
#!/bin/bash
ls **/*.java 
```

我收到以下错误：

```
ls: cannot access **/*.java: No such file or directory 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T14:17:17.690

就放

```
shopt -s globstar 
```

也进入脚本。

# iphone - （CoreData 项目）为了避免崩溃，我必须手动合成 NSFetchedResultsController - 为什么？

> ID：15249634
> 
> 赞同：2
> 
> 时间：2013-03-06T14:15:36.823
> 
> 标签：iphone, core-data, nsfetchedresultscontroller

当我不手动时`synthesize`，`NSFetchedResultsController` `property`我的应用程序崩溃了。

**崩溃日志：**

```
*** Assertion failure in -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-2380.17/UITableView.m:1070
2013-03-06 15:09:15.667 Staff Manager[6673:c07] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid update: invalid number of rows in section 0\.  The number of rows contained in an existing section after the update (0) must be equal to the number of rows contained in that section before the update (1), plus or minus the number of rows inserted or deleted from that section (0 inserted, 2 deleted) and plus or minus the number of rows moved into or out of that section (0 moved in, 0 moved out).' 
```

当我`synthesize`按照预期进行所有工作时：

```
@synthesize fetchedResultsController = _fetchedResultsController; 
```

你可以解释吗？

我的知识状态是 Xcode 的编译器为我做这件事。

**Xcode 版本：4.6 部署目标：6.1**

**应用程序在此方法中崩溃（最后一行）**

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{    
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [self.tableView beginUpdates];
        Person *personToDelete = [self.fetchedResultsController objectAtIndexPath:indexPath];

        [self.managedObjectContext deleteObject:personToDelete];
        [self.managedObjectContext save:nil];

        [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
        [self performFetch];

        [self.tableView endUpdates];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:58:55.477

我只能说，当您使用已经创建的nsfetchresultscontroller从xcode创建项目时，fetchresultscontrollerdelegate的创建方式是在您删除显示的托管对象时已经执行deleteRowsAtIndexPaths，它会自动删除相应的tableview单元格

你应该只保留 deleteObject 部分

```
Person *personToDelete = [self.fetchedResultsController objectAtIndexPath:indexPath];

[self.managedObjectContext deleteObject:personToDelete];
[self.managedObjectContext save:nil]; 
```

# java - Java Out Of Band（称为“紧急数据”）数据

> ID：15249635
> 
> 赞同：8
> 
> 时间：2013-03-06T14:15:44.373
> 
> 标签：java, c, sockets, out-of-band

这是一些尝试使用 OOB（紧急）数据的基本代码。我的问题是，如果客户端使用 C 或 Java，则服务器部分的行为会有所不同。请注意，您可能会认为两个客户端都有些棘手，但如果我使用 C 服务器（为了更好地控制 OOB），那么无论我的服务器端 OOB 控制是什么，两个客户端的行为都完全相同。

首先是服务器（Java）部分：

```
Socket s = ss.accept();
s.shutdownOutput();
s.setOOBInline(true);
InputStream is = s.getInputStream();
for (;;) {
  byte []d = new byte[3];
  int l = is.read(d);
  if (l==-1) break;
  for (int i=0; i<l; i++) System.out.print((char)d[i]);
  System.out.println();
  Thread.sleep(2000);
} 
```

然后是客户端（Java）部分：

```
Socket s = new Socket("localhost",61234);
s.shutdownInput();
OutputStream os = s.getOutputStream();
byte []n = new byte[10];
for (int i=0; i<n.length; i++) n[i] = (byte)('A'+i);
byte m = (byte)('0');   
os.write(n);
System.out.println("normal sent");
s.sendUrgentData(m);
System.out.println("OOB sent");
os.write('Z');
System.out.println("normal sent"); 
```

然后是备用客户端（C）部分：

```
s = socket(PF_INET,SOCK_STREAM,0);
bzero(&a,sizeof(a));
a.sin_family = AF_INET;
a.sin_port = htons(61234);
a.sin_addr.s_addr = inet_addr("127.0.0.1");
connect(s,(struct sockaddr *)&a,sizeof(a));
shutdown(s,SHUT_RD);
char m = '0';
char *n = "ABCDEFGHIJ";

printf("normal sent %d\n",write(s,n,strlen(n)));
printf("OOB sent %d\n",send(s,&m,1,MSG_OOB));
printf("normal sent %d\n",write(s,"Z",1)); 
```

现在这就是我得到的（第一个 C 客户端，然后是 Java 客户端）：

```
Accepting connection
ABC
DEF
GHI
J
Z
Accepting connection
ABC
DEF
GHI
J
0Z 
```

Java 服务器似乎无法看到从 C 客户端发送的 OOB 数据。为什么`0`似乎已经丢失了？它没有，因为服务器至少检测到流中的 oob 边界。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T15:23:49.720

在所有 Sockets 实现中，带外数据的支持方式不同。就这么简单。

微软的建议在这里：

*   [http://msdn.microsoft.com/en-us/library/windows/desktop/ms740102(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740102(v=vs.85).aspx)

> 目前，对 RFC 793（引入该概念）有两种相互冲突的解释。
> 
> Berkeley Software Distribution (BSD) 中 OOB 数据的实现不符合 RFC 1122 中指定的主机要求。
> 
> 具体来说，BSD中的TCP紧急指针指向紧急数据字节之后的字节，符合RFC的TCP紧急指针指向紧急数据字节。因此，如果应用程序将紧急数据从与 BSD 兼容的实现发送到与 RFC 1122 兼容的实现，则接收方会读取错误的紧急数据字节（它将位于数据流中正确字节之后的字节作为紧急数据读取）字节）。
> 
> 为了最大限度地减少互操作性问题，建议应用程序编写者不要使用 OOB 数据，除非需要与现有服务进行互操作。敦促 Windows 套接字供应商记录其产品实现的 OOB 语义（BSD 或 RFC 1122）。

如果你正在编写一个新的协议并且需要带外数据，我建议你需要一个单独的连接来处理你的紧急数据，或者你需要在应用层进行多路复用。

因此，如果您可以选择，我的建议是不要使用 OOB 数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:49:14.723

好的，这似乎与JVM实现有关。我在不同的操作系统和 JVM 上进行了不同的测试。

在使用 JDK 1.6（Java 7 未测试）的不同 Linux 上，一切都是正确的。

但是我的 Mountain Lion 出了点问题，它的行为因 Java 版本而异。似乎是与 Apple 的实现相关的 JVM 错误。

# javascript - 使用 mootools 将 div 包裹在其他 div 周围

> ID：15249640
> 
> 赞同：4
> 
> 时间：2013-03-06T14:16:09.360
> 
> 标签：javascript, mootools

我得到了一个 main`div`类`overview`，在那个主 div 中，每 4 个元素都应该用`div`.

这里的html结构：

```
<div class="overview">
    <a class="item" href="#">Test1</a>
    <a class="item" href="#">Test2</a>
    <a class="item" href="#">Test3</a>
    <a class="item" href="#">Test4</a>
    <a class="item" href="#">Test5</a>
    <a class="item" href="#">Test6</a>
    <a class="item" href="#">Test7</a>
    <a class="item" href="#">Test8</a>
    <a class="item" href="#">Test9</a>
    <a class="item" href="#">Test9</a>
    <a class="item" href="#">Test9</a>
    <a class="item" href="#">Test9</a>
</div> 
```

我怎么能用 mootools 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:30:44.533

很简单，用mod就行了。

```
(function(){
    var wrapper,
        overview = document.getElement('div.overview');

    overview.getElements('a.item').each(function(a, i){
        if (i % 4 == 0){
            wrapper && overview.adopt(wrapper);
            wrapper = new Element('div');
        }
        wrapper.adopt(a);
    });

    overview.adopt(wrapper);
}()); 
```

在行动：http: [//jsfiddle.net/dimitar/4Tana/](http://jsfiddle.net/dimitar/4Tana/)

# .net - GroupCommand 额外参数 (record.data.)

> ID：15249641
> 
> 赞同：0
> 
> 时间：2013-03-06T14:16:14.460
> 
> 标签：.net, extjs, command, ext.net

当我单击我的 GroupCommand 时，我收到此错误：

```
"ReferenceError: record is not defined" 
```

这是代码：

```
<DirectEvents>
    <GroupCommand OnEvent="GrdHorarios_GroupCommand">
        <EventMask ShowMask="true" MinDelay="2000" Msg="Carregando" />
        <ExtraParams>
            <ext:Parameter Value="record.data.IDBDRElenco" Mode="Raw" Name="elencoId">
            </ext:Parameter>
            <ext:Parameter Value="command" Mode="Raw" Name="commandName">
            </ext:Parameter>
        </ExtraParams>
    </GroupCommand>
</DirectEvents> 
```

我可以以其他方式使用`record.data.anyfield`或`GroupCommand`存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:14:05.640

GroupCommand 事件在单击的记录组的上下文中触发。因此，“记录”参数没有多大意义。因此，单击的组所包含的记录数组被传递到 GroupCommand 侦听器。好吧，正如@ [assoline](https://stackoverflow.com/users/2140299/assoline)所说。

# c# - 选择 AutocompleteBox

> ID：15249649
> 
> 赞同：1
> 
> 时间：2013-03-06T14:16:25.310
> 
> 标签：c#, windows-phone-8

这一定很简单，我看不到。如何阅读自动完成框中所选项目的文本？

当我输入“Mi”并且“Milk”在下拉列表中完成时，“Mi”仍将是 autocomplete.text 中的值的文本，尽管“Mi”在文本框中视觉上被替换为“Milk”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T08:34:21.680

使用 selectionchanged 事件来获取所选项目。您可以更新自动完成控件的文本以反映所选项目。

```
 private void SearchBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (e.AddedItems.Count > 0)
        {
            string selecteditem = (string)e.AddedItems[0];
            this.SearchBox.Text = selecteditem;
        }
    } 
```

# jquery - 添加到对象/数组

> ID：15249651
> 
> 赞同：0
> 
> 时间：2013-03-06T14:16:37.103
> 
> 标签：jquery

我将数据存储在一个对象中（因为我想稍后将其转换为 json）。

```
var myObject = new Object();

myObject.name = "John";
myObject.name = "James"; 
```

我不太确定这是如何工作的，因为我想将它视为一个数组，能够循环并输出每个名称

```
myObject[i]['name']; 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:21:00.577

你不能像你那样做。试试这样：

```
var myObjectNames = []; // means a new Array, or you can use: new Array() instead; 
```

您可以像这样添加新名称：

```
myObjectNames.push("John");
myObjectNames.push("James"); 
```

然后将它们全部输出：

```
for(var x in myObjectNames) {
    console.log(myObjectNames[x]); // will output your names in the console
} 
```

或使用连接功能：

```
console.log(myObjectNames.join(";")); // will output: "John;James" in the console 
```

* * *

**扩展答案**

您可以拥有以下对象：

```
var myObject = []; 
```

然后只需将名称成对推送到该数组中`key->value`：

```
var myNames = ['John', 'James', 'Zlatan'];

for(var x in myNames) {
    myObject.push({name: myNames[x]});
}

console.log(myObject); 
```

在那里，您将在控制台输出中具有以下结构：

```
[Object { name=

"John"

}, Object { name=

"James"

}, Object { name=

"Zlatan"

}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:30:12.463

如果您只想要一个名称数组，您可以将 myObject 初始化为一个数组并将名称添加到其中，然后通过指定索引或使用“推”来添加。

```
nameArray = []; //or new Array();
nameArray[0] = 'John';
nameArray.push('James'); 
```

上面唯一的一点是你只能存储一条信息（即你可以存储姓名，但不能存储姓名和年龄）如果你想存储多个，你可以先用你想要的属性创建对象，然后然后将它们存储到一个数组中：

```
personArray = [];
person1= new Object();
person1.name = 'John';
person1.age = 18;
personArray.push(object1);
person2 = {}; //Shorter version of new Object()
person2.name = 'James';
person2.age = 31;
personArray.push(person2); 
```

然后可以根据需要访问它：

```
personArray[1]['name']; //James
personArray[0].age; //18 
```

# objective-c - 在 NSObject 中查找最常见的数组

> ID：15249652
> 
> 赞同：0
> 
> 时间：2013-03-06T14:16:37.707
> 
> 标签：objective-c, sorting, nsarray, filtering, nsobject

我有一个 NSObject“TeamStats”，其中包含一组“Possession”对象。“Possession”对象包含一个“Players”数组……对于每个“Game”，还创建了一个“TeamStats”。“Possession”对象的两个属性是 didEndInTurnover 和 didEndInScore。我需要做的是在一个回合中找到最常见的一组球员，即 didEndInScore 和 didEndInTurnover ...

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:13:16.633

好的，首先，我将通过用一个新的 NSString 变量替换玩家数组来简化这一点，该变量只告诉该数据用于哪个小队（因此您将拥有一个`NSString *squadName`变量（并且您将设置`posession1.squadName = @"Squad A"`或类似的东西）为对象的属性`Possession`，而不是玩家数组。如果您想打印出玩家姓名或号码，您总是可以在其他地方设置一个数组或字典来保存该信息以打印到屏幕上 - 比如

```
NSArray squad1Array = [NSArray arrayWithObjects:@"Bill",@"Tom",@"Joe",nil];
NSArray squad2Array = [NSArray arrayWithObjects:@"Jim",@"Jeff",@"Mike",nil]; 
```

设置好小队后，您需要遍历`Possession`对象数组。在那个循环中，首先检查`didEndInTurnover`. 然后，您需要每个小队和每个小队的整数变量`didEndIn...`（例如`int squadAScore`, `int squadBScore`,`int squadATurnover`等`int squadBTurnover`）。当您循环播放时，检查哪个小队对该控球有效，并酌情增加该小队的整数计数器。最后，在你遍历所有财产后比较你的整数计数器，看看哪个是最大的。

请注意，如果您想更好地组织它或使其更灵活且更少硬编码，您可能会考虑使用嵌套的 NSDictionaries 而不是整数计数器 - 将其设置为字典需要更多的工作，但如果您稍后需要添加新的小队或其他东西，将来进行此类更改可能会更容易。

好吧，我不知道这是否可以理解。如果它真的没有意义，我可以尝试放置一些循环大致是什么样子的代码，让我知道。

编辑：这是使用字典的循环外观的一些示例：

```
// Define counters for squads
NSMutableDictionary *turnoverDictionary = [[NSMutableDictionary alloc] init];
NSMutableDictionary *scoreDictionary = [[NSMutableDictionary alloc] init];

// Loop over all possessions
for (YourPossessionClass *currentPossession in myTeamStats.possessionArry)
{
    if (currentPossession.didEndInTurnover == YES)
    { 
        BOOL found = NO;
        for (NSString *squad in [turnoverDictionary allKeys])
        {
            if ([squad isEqualToString:currentPossession.squad])
            {
                int count = [[turnoverDictionary objectForKey:squad] intValue];
                count ++;
                NSNumber *newCount = [NSNumber numberWithInteger:count];
                [turnoverDictionary setObject:newCount ForKey:squad];
                found = YES;
            }
            //else {Do Nothing - this isn't the squad we want}
        }

        // Add a new entry to the dictionary for this squad if this squad didn't exist before
        if (!found)
        {
            [turnoverDictionary setObject:[NSNumber numberWithInt:0] forKey:currentPossession.squad];
        }
        //else {Do Nothing - squad was already in dictionary}
    }
    else if {currentPossession.didEndInScore == YES}
    {
        // ... Do all the same stuff as we did for turnover, except now add them to the scoreDictionary instead of the turnoverDictionary ...
    }
} 
```

# html - Chrome不尊重字体粗细？

> ID：15249654
> 
> 赞同：20
> 
> 时间：2013-03-06T14:16:38.277
> 
> 标签：html, css, google-chrome, fonts

我有 Arial 作为我的基本字体，我正在尝试为页面的不同部分使用各种字体粗细（普通、粗体/700 和 900）

这似乎在 Firefox 和 Internet Explorer 中都可以正常工作，但在 Google chrome 中，粗体/700 和 900 之间似乎完全没有区别！？

[见小提琴](http://jsfiddle.net/BXJvC/)

（以防上述链接损坏/无效）

**HTML：**

```
<p id="one">Testing</p>
<p id="two">Testing</p>
<p id="three">Testing</p> 
```

**CSS：**

```
p { font-family: arial; font-size: 40px; margin: 0; }

#one { font-weight: normal; }
#two { font-weight: 700; }
#three { font-weight: 900; } 
```

我用谷歌搜索了一下，发现了一个[类似的问题](https://stackoverflow.com/questions/8529846/font-weight-is-not-working-on-chrome)，它提供了一个半有用的答案：

> 解决了：
> 
> 字体粗细：900；font-family: "Arial Black", Arial, sans-serif;

但是使用上述简单方法会使`font-weight`Chrome 中的所有内容都假定为 900（即使另有指定）

有关此示例，[请参见此处](http://jsfiddle.net/ZjHEn/)（显然在 Chrome 中）

这是 Chrome 中的错误吗？还是我在这里做错了什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-06T14:32:04.497

Arial（至少是标准版本）只有两个权重：`normal`和`bold`. 如果您指定的权重不是这两者之一，浏览器将选择最接近的可用权重。（请参阅：[font-weight:900 仅适用于 Firefox](https://stackoverflow.com/questions/8872486/font-weight900-only-working-in-firefox)）

Arial Black 是与 Arial 不同的字体，这就是您提供的半有用答案有效的原因。

如果您想使用 Arial，请尝试：

```
#one { font-weight: normal; }
#two { font-weight: bold; }
#three { font-family: "Arial Black", Arial, sans-serif; } 
```

另一种选择是使用诸如 Typekit 或 Webink 之类的网络字体服务，并选择具有更多可用权重的字体。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T14:49:27.140

我认为这不是谷歌浏览器的错误。可能是字体没有重量，900。不仅在 Chrome 中，而且在 Opera 和 Safari 中也不起作用。

Arial Black 的正常，700 和 900 在 Safari 中一切都是一样的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T14:32:14.947

问题是“Arial Black”。由于某种原因，Chrome 和 IE（顺便说一下）忽略了该字体的字体粗细。删除它并按预期应用您的 CSS。

`p { font-family: Arial, sans-serif; font-size: 40px; margin: 0; }`

PS现在我仔细检查700和900没有区别。不过是600/900。**杰拉德**是对的。

[http://jsfiddle.net/ZjHEn/1/](http://jsfiddle.net/ZjHEn/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-17T15:59:18.903

如果一个元素具有非正常的本机字体粗细（例如 b、strong、th），则添加设置为 normal 的字体粗细属性将修复模糊字体。这是对我确信这是 Chrome 错误的临时修复。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-25T20:56:04.377

我找到了解决方案。

感谢领英。

```
-webkit-font-smoothing: antialiased; 
```

# performance - 谷歌应用引擎的性能监控工具

> ID：15249657
> 
> 赞同：3
> 
> 时间：2013-03-06T14:16:42.347
> 
> 标签：performance, google-app-engine

有人可以提供有关 GAE 云解决方案的建议，以检查我的应用程序的运行状况和性能。

我发现的一些工具是：

1.  应用统计
2.  超级云状态
3.  gae_mini_profiler

在我从这三个方面做出决定之前，我想知道人们是否可以提出任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-17T11:41:02.817

[谷歌云监控](https://cloud.google.com/monitoring/)和[谷歌云跟踪](https://cloud.google.com/tools/cloud-trace)（现在都在测试版中）可能是你正在寻找的。

# excel - Excel公式：计算值为日期的单元格

> ID：15249662
> 
> 赞同：3
> 
> 时间：2013-03-06T14:16:49.770
> 
> 标签：excel, excel-formula

我正在寻找一个公式来在一系列单元格上运行 COUNTIF （或类似的），并且其中包含的值是日期，以增加计数器 - 基本上类似于：

```
=COUNTIF(range, if_date()) 
```

我无法找到问题的 if_date() 部分的逻辑测试。有没有办法测试单元格以检查其内容是否为日期？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T15:48:59.610

这对于工作表函数来说很困难，因为 excel 中的日期只是格式化的数字 - 只有`CELL`函数可以让您调查单元格的格式（并且您不能将其应用于范围，因此需要辅助列）..... ..或者，如果您只有日期和空格.....或日期和文本，那么使用`COUNT`函数就足够了，即

`=COUNT(range)`

这会计算数字，因此如果您想将日期与数字区分开来，这将是不够的。如果你这样做了，那么可以使用数字范围，例如，如果你有一个范围和日期中的数字，但数字都低于 10,000 并且日期都是相对较新的，那么你可以使用这个版本来排除数字

`=COUNTIF(range,">10000")`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-17T15:07:04.293

这是我的解决方案。如果您的单元格将仅包含日期或空白，只需将其与另一个日期进行比较。如果单元格可以转换为日期，它将被计算在内。

```
=COUNTIF(C:C,">1/1/1900")
## Counts all the dates in column C 
```

注意，带有数字的单元格将被计算在内。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-21T19:08:43.963

这是一种方法。使用上述答案的组合执行以下操作：

1.  使用预定义格式将单元格转换为文本
2.  尝试使用 DATEVALUE 将其转换回日期
3.  排除 DATEVALUE 返回错误的任何单元格

作为一个公式，只需使用下面的示例，将 <> 替换为您的范围参考。

```
=SUM(IF(ISERROR(DATEVALUE(TEXT(<<RANGE HERE>>, "MM/dd/yyyy"))), 0, 1)) 
```

您必须使用 CTRL + SHIFT + ENTER 将其作为数组公式输入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T15:55:23.267

要计算满足单个测试的数字或日期（例如等于、大于、小于、大于或等于或小于或等于），请使用 COUNTIF 函数。在 Excel 2007 及更高版本中，要计算某个范围内的数字或日期（例如大于 9000 且同时小于 22500），您可以使用 COUNTIFS 函数。如果您使用的是 Excel 2003 或更早版本，则可以使用 SUMPRODUCT 函数对某个范围内的数字进行计数（在 Excel 2007 中引入了 COUNTIFS）。

请查看[更多](http://office.microsoft.com/en-in/excel-help/count-numbers-or-dates-based-on-a-test-HP010342341.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T22:06:11.510

**Excel**中没有交互式解决方案，因为上面引用的某些函数不是矢量友好的，例如**CELL 。**例如，可以计算绝对值小于 3 的所有数字，因为**ABS**在公式数组中被接受。

所以我使用了以下数组公式（**Ctrl+Shift+Enter**编辑后没有大括号）

```
 ={SUM(IF(ABS(F1:F15)<3,1,0))} 
```

如果*F 列*有

```
 F
          1 ...    2
          2 ....   4
          3 ....  -2
          4 ....   1
          5 .....  5 
```

数为3！（-2,2 和 1）。为了展示 ABS 是如何对数组友好的函数，让我们做一个简单的测试：在编辑栏中选择**G1:G5** , digit *=ABS(F1:F5)*并按**Ctrl+Shift+Enter**。这就像有人写*Abs(F1:F5)(1), Abs(F1:F5)(2)*等。

```
 F    G
          1 ...    2  =ABS(F1:F5) => 2 
          2 ....   4  =ABS(F1:F5) => 4
          3 ....  -2  =ABS(F1:F5) => 2
          4 ....   1  =ABS(F1:F5) => 1
          5 .....  5  =ABS(F1:F5) => 5 
```

现在我放了一些混合数据，包括 2 个日期值。

```
 F
          1 ...    Fab-25-2012
          2 ....   4
          3 ....   May-5-2013
          4 ....   Ball
          5 .....  5 
```

在这种情况下，**CELL**失败并返回 1

```
 ={SUM(IF(CELL("format",F1:F15)="D4",1,0))} 
```

发生这种情况是因为**CELL**返回范围的第一个单元格的格式。（*D4*是mdy格式）

所以剩下的就是编程了！**公式数组**的 UDF（用户定义函数）必须返回一个变量数组：

```
Function TypeCell(R As Range) As Variant
Dim V() As Variant
Dim Cel As Range
Dim I As Integer
Application.Volatile '// For revaluation in interactive environment
ReDim V(R.Cells.Count - 1) As Variant
I = 0
For Each Cel In R
   V(I) = VarType(Cel) '// Output array has the same size of input range.
   I = I + 1
Next Cel
TypeCell = V
End Function 
```

现在很容易（常数*VbDate*为 7）：

```
 =SUM(IF(TypeCell(F1:F5)=7,1,0)) 
```

它显示 2。该技术可用于任何形状的细胞。我已经测试了垂直、水平和矩形形状，因为您使用 函数内的**每个**订单进行填充。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T15:51:02.527

这假设潜在日期值列在 A 列中。您可以在相邻列中执行以下操作：

制作一个嵌套公式，如果“日期”有效，则将其转换为其数值，如果无效，则将错误值转换为零。
然后它将有效的数值转换为 1 并将零保留原样。
然后对新列求和以获得有效日期的总数。

=IF(IFERROR(DATEVALUE(A1),0)>0,1,0)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-31T17:59:17.873

以下是我如何能够欺骗 Excel 计算列表中过期的证书。我没有设定日期或日期范围，只有当前日期。“TODAY()”不适用于 Excel 2013。它将其视为文本或条件，而不是日期值。所以这些以前的对我不起作用。所以这个词问题/场景：这个列表中有多少人过期了？

使用： =IFERROR(D5-TODAY(),0) 其中 D5 是要询问的日期。

然后使用： =IF(J5>=1,1,0) 其中 J5 是第一个方程产生正数或负数的单元格。这套，我已经隐藏在可见表的一侧，然后我只是将未过期成员的总数相加。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-25T01:53:52.923

有点啰嗦，但对我有用：试试这个::

```
=SUM(IF(OR(ISBLANK(AU2), NOT(ISERR(YEAR(AU2)))),0,1)
 +IF(OR(ISBLANK(AV2), NOT(ISERR(YEAR(AV2)))),0,1)) 
```

if 的第一部分将允许单元格为空白，或者如果单元格中有某些内容，它会尝试将其转换为年份，如果有错误或日期结果 = 1 以外的其他内容，则对每个单元格执行相同操作，然后总结结果

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-01-23T17:55:06.203

一个范围内的单元格总数减去同一范围内的空白单元格。

=(115 - (计数空白(C2:C116)))

这会计算范围内的所有内容，因此可能不是您要查找的内容。

# javascript - 确定路径名是否以 u 开头

> ID：15249663
> 
> 赞同：0
> 
> 时间：2013-03-06T14:16:53.213
> 
> 标签：javascript, jquery, indexof

```
$(function() {
   var s = $('#field_id5 div.field_uneditable').html();
     if(s == "+Member") {
       var path = window.location.pathname;
 if( /^u\d+/.test(path) ){
    $('#content').prependTo('#container').css('marginRight','0px');
    $('#page_wrapper').remove();
   }
 $('#profile-advance-left').hide();
   }
}); 
```

收到错误未捕获**的 ReferenceError：未定义路径名**

上面的更新代码---

上面的代码`var numbers`我尝试编写一种正则表达式（在正则表达式方面不是很有经验），它会检查数字是否在你之后。除了检查 u 是否在路径名中之外，代码在某种意义上是有效的。我只希望它检查是否以 u 开头，因为我有这样的链接，`/forum`并且运行此代码，这根本不是我想要的。我需要此代码仅在这样的 url 上运行

`/u1`

`/u2`

`/u3`

`/u4`

有什么建议么？

好的，所以下面的两个答案仍然不起作用..我的一个朋友给了我一个代码，但我不相信它被逃脱了请看看

```
if(//?ud+/.test(window.location.pathname)){
  $('#content').prependTo('#container').css('marginRight','0px');
   $('#page_wrapper').remove();
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:19:39.800

> 我只希望它检查是否以 u 开头

```
if( window.location.pathname.indexOf('u') == 0 ) ... 
```

或者

```
if( /^u/.test(window.location.pathname) )... 
```

如果您需要确保`u`后跟 1 个或多个数字，我会这样做：

```
if( /^u\d+/.test(window.location.pathname) ) ... 
```

整个代码片段将是：

```
if( /^u\d+/.test(window.location.pathname) ){
  $('#content').prependTo('#container').css('marginRight','0px');
  $('#page_wrapper').remove();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:24:07.463

```
var regex = /^u[0-9][0-9]*/;
regex.test(checkif); 
```

这将测试它是否采用“u”+数字系列格式

编辑：根据凯尔的评论修复了正则表达式函数。可能有一种更简洁的方法，但它应该可以工作。

# c# - 当我尝试安装 C# Windows 服务时出错

> ID：15249665
> 
> 赞同：-1
> 
> 时间：2013-03-06T14:16:56.033
> 
> 标签：c#, windows-services

当我尝试安装我的 C# 窗口服务时，这就是我得到的，我是 win 服务应用程序的新手，如果您需要更多信息，请提及，非常感谢：

```
Installing assembly 'C:\BatchFileManagerWinService\PCSBatchFileManagerWinService.exe'.
Affected parameters are:
   logtoconsole = 
   assemblypath = C:\BatchFileManagerWinService\PCSBatchFileManagerWinService.exe
   logfile = C:\BatchFileManagerWinService\PCSBatchFileManagerWinService.InstallLog
Installing service PCS Batch File Manager...
Service PCS Batch File Manager has been successfully installed.
Creating EventLog source PCS Batch File Manager in log Application...
An exception occurred in the OnAfterInstall event handler of PCSBatchFileManagerWinService.ProjectInstaller.
System.InvalidOperationException: Cannot start service PCS Batch File Manager on computer '.'.
The inner exception System.ComponentModel.Win32Exception was thrown with the following error message: 
The service did not respond to the start or control request in a timely fashion.
Rolling back assembly 'C:\BatchFileManagerWinService\PCSBatchFileManagerWinService.exe'.
Affected parameters are:
   logtoconsole = 
   assemblypath = C:\BatchFileManagerWinService\PCSBatchFileManagerWinService.exe
   logfile = C:\BatchFileManagerWinService\PCSBatchFileManagerWinService.InstallLog
Restoring event log to previous state for source PCS Batch File Manager.
Service PCS Batch File Manager is being removed from the system...
Service PCS Batch File Manager was successfully removed from the system. 
```

ProjectInstaller 代码如下：

```
 [RunInstaller(true)]
public partial class ProjectInstaller : System.Configuration.Install.Installer
{
    public ProjectInstaller()
    {
        InitializeComponent();

        //Read domain/Username and password
        XmlDocument doc = new XmlDocument();
        doc.Load(System.Reflection.Assembly.GetExecutingAssembly().Location + ".config");
        XmlElement appSettings = (XmlElement)doc.DocumentElement.GetElementsByTagName("appSettings")[0];
        string username = null;
        string password = null;
        foreach (XmlElement setting in appSettings.GetElementsByTagName("add"))
        {
            string key = setting.GetAttribute("key");
            if (key == "WinServInstallUserName") username = setting.GetAttribute("value");
            if (key == "WinServInstallPassword") password = setting.GetAttribute("value");
        }
        serviceProcessInstaller1.Account = ServiceAccount.User;
        serviceProcessInstaller1.Username = username;
        serviceProcessInstaller1.Password = password;

        // Start Service
        this.AfterInstall += new InstallEventHandler(ProjectInstaller_AfterInstall);
    }

    void ProjectInstaller_AfterInstall(object sender, InstallEventArgs e)
    {
        ServiceController sc = new ServiceController("PCS Batch File Manager");
        sc.Start();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:27:23.787

在您的服务项目的 Program.cs 文件中，添加

```
Debugger.Launch(); 
```

作为第一行

```
private static void Main(string[] args) 
```

当您启动服务时，它会询问您要如何调试，选择您打开的 Visual Studio 引用。然后，您可以更好地了解导致问题的原因。

另外，完成后别忘了把那个声明拿出来！

# c# - 数字格式化类

> ID：15249666
> 
> 赞同：0
> 
> 时间：2013-03-06T14:17:00.630
> 
> 标签：c#, .net, razor

我有一个从数据库中获取数据并将其存储为字符串的类。

`sAnswer`可以是任何数据类型，通常是 int。当它是 int 时，我试图将其格式化为具有逗号分隔符。（1000000 -> 1,000,000）我该怎么做？

使用`Format`like`var val = string.Format("{0:n0}", sAnswer);`不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:24:11.540

将不是字符串的值转换为字符串时会发生格式化。您不能将格式应用于已经是字符串的值。您将不得不暂时将`string`背面转换为`int`

```
string val = String.Format("{0:n0}", Int32.Parse(sAnswer)); 
```

* * *

您可以通过使用常量的按位组合来影响`Int32.Parse`尝试转换的方式`NumberStyles`

```
string val = String.Format("{0:n0}", Int32.Parse(sAnswer,
                                                 NumberStyles.AllowLeadingWhite |
                                                 NumberStyles.AllowTrailingWhite|
                                                 NumberStyles.AllowExponent)); 
```

或者简单地使用`NumberStyles.Any`为您提供最大灵活性的枚举常量。如果`sAnswer`可以包含无效条目（例如空字符串），则执行安全转换

```
string val;
int i;
if (Int32.TryParse(sAnswer, out i)) {
    val = String.Format("{0:N0}", i);
} else {
    val = ""; // Assign a default value here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T14:24:27.517

这对你有用吗

```
int answerInt;
if (int.TryParse(sAnswer, out answerInt))
{
    sAnswer = answerInt.ToString("#,0", CultureInfo.InvariantCulture)
} 
```

# gwt - GWT-RPC 错误 - 子类型不可实例化

> ID：15249667
> 
> 赞同：1
> 
> 时间：2013-03-06T14:17:01.433
> 
> 标签：gwt, serialization, gwt-rpc

有以下类：

```
@Entity
public class MPolicy extends MAbstractEntity {

    private MPolicyCondition condition;

    private List<MPolicyAction> actions;

    ...

}

@Entity
public abstract class MPolicyCondition extends MAbstractEntity {

}

@Entity
public abstract class MPolicyAction extends MAbstractEntity {

    @Column(unique = true)
    protected String name;

    public String getName() {
        return name;
    }
    public void setName(final String name) {
        this.name = name;
    }
} 
```

为什么错误：

> 子类型 com.*.MPolicyCondition 不可实例化

出现？

如果我从 MPolicyCondition 中删除抽象关键字，一切正常！但是 MPolicyAction 类也是抽象的。为什么 MPolicyCondition 会影响 bug，但 MPolicyAction 不会？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:11:39.620

我发现 MPolicyCondition 的子类没有可序列化的成员。所以问题就解决了。但是编译器会更友好地解释错误！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:38:17.897

因为你有一个 MPolicyAction 列表。

您的 List 实现（可能是 ArrayList）是可实例化的。

# c++ - 寻找相似颜色的最佳色彩空间

> ID：15249671
> 
> 赞同：2
> 
> 时间：2013-03-06T14:17:06.027
> 
> 标签：c++, image, colors, rgb, grayscale

如果我想找到所有相似颜色的像素，我应该使用什么颜色空间？我尝试使用 GrayScale 并在图像中我想找到与之连接的相似像素的点运行 DFS，但似乎这不是正确的方法。我应该使用哪种颜色空间，这将帮助我找到从图像中某个点开始连接的 a 中相似颜色的像素。最初我有 RGB 图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:24:55.163

这取决于“相似”对您意味着什么。与计算机相似的颜色对人类的感知可能会非常不同。

OTOH，HSV 模型非常适合，因为它对于非机器人来说非常直观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:28:00.650

我曾经使用[Lab](http://en.wikipedia.org/wiki/Lab_color_space)色彩空间并计算[色差](http://en.wikipedia.org/wiki/Color_difference)（CIE76 对我来说足够好）获得了很好的结果。

从[维基百科链接](http://en.wikipedia.org/wiki/Lab_color_space#Advantages)：

> > > 与 RGB 和 CMYK 颜色模型不同，Lab 颜色旨在接近人类视觉。

因此，如果您对相似的定义是：“它们看起来很相似”，我会选择 Lab。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-14T03:52:52.753

检查这个线程[Python - 找到相似的颜色，最好的方法](https://stackoverflow.com/questions/8863810/python-find-similar-colors-best-way)

答案是： http: [//www.compuphase.com/cmetric.htm](http://www.compuphase.com/cmetric.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-08T18:43:29.650

您可以使用色彩空间 HSV(Hue, Saturation, Value or Brightness) 。

将图像转换为 HSV 后，您必须将通道饱和度和值设置为常用值，例如 100 或任何其他强调颜色的值。通过这种转换，色调将是唯一有一些变化的通道，这应该足以只显示几乎没有变化的相似颜色。

如果要减少间隔，可以在通道色调的直方图上生成所需的间隔，并计算与其他直方图的差异。该计算的结果将是颜色之间的距离。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T14:42:18.613

Lab 是一个非常好的色彩空间，但我知道由于它的非线性和通用性，它使用起来有点困难。

如果您对色调感兴趣并且正在处理想要轻松消除阴影和反射的图像，HSV 是一个非常好的色彩空间。

如果您对近似人类视觉感知感兴趣，YCrCb 是一个非常好的（但不如 Lab 复杂）色彩空间。它考虑到对人类来说，R、G 和 B 成分会产生更强和更弱的刺激。

# iphone - 在 iPhone 中动态重绘调整大小的圆圈

> ID：15249675
> 
> 赞同：1
> 
> 时间：2013-03-06T14:17:16.663
> 
> 标签：iphone, ios, drawrect

我想要做的是让用户触摸屏幕，当在该位置检测到触摸时，圆圈的大小会变大（并继续增长），直到用户放开为止。

我知道如何检测触摸，但我遇到的问题是尝试绘制并随着圆圈变大而重新绘制圆圈。

做这个的最好方式是什么？

![在此处输入图像描述](../Images/600ba63f77ed14cf7ed67c86245f133e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T23:29:02.313

我会使用 , 和 的组合`UILongPressGestureRecognizer`来`NSTimer`实现`UIBezierPath`这一点。

首先，设置您`viewDidLoad`要添加和配置 CAShapeLayer，它将容纳您要绘制的圆圈。下面的代码最初会在屏幕上绘制一个半径为 50 点的圆，并在主视图中添加一个长按手势。当然，触摸检测可以按照您喜欢的任何方式进行。哦，你需要为此导入 Quartz。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    circleRadius = 50.0f;

    circle = [CAShapeLayer layer];

    [circle setAnchorPoint:CGPointMake(0.5f, 0.5f)];
    [circle setFillColor:[UIColor clearColor].CGColor];
    [circle setStrokeColor:[UIColor colorWithWhite:0.9f alpha:0.7f].CGColor];
    [circle setLineWidth:5.0f];

    [self.view.layer addSublayer:circle];

    [self drawCircleWithRadius:circleRadius];

    UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPressDetected:)];
    [longPress setMinimumPressDuration:0.1];
    [longPress setAllowableMovement:15.0f];
    [self.view addGestureRecognizer:longPress];
} 
```

然后，当识别出长按手势时，检查其状态。如果它的状态*开始*启动一个重复计时器来调用动画函数。当手势结束时，无效。

```
- (void)longPressDetected:(UILongPressGestureRecognizer *)sender {
    if (sender.state == UIGestureRecognizerStateBegan) {
        timer = [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(animateImageView) userInfo:nil repeats:YES];
    }else if (sender.state == UIGestureRecognizerStateEnded) {
        [timer invalidate];
    }
}

- (void)animateImageView {
    circleRadius += 10.0f;
    [self drawCircleWithRadius:circleRadius];
} 
```

最后，下面的这个函数将使用 CABasicAnimation 将形状图层的路径属性设置为上面指示的值（每次 +10）。确保此动画持续时间不高于计时器重复间隔！

```
- (void)drawCircleWithRadius:(CGFloat)radius {
    CABasicAnimation *pathAnimation = [CABasicAnimation animationWithKeyPath:@"path"];
    [pathAnimation setFromValue:(id)circle.path];
    [pathAnimation setToValue:(id)[UIBezierPath bezierPathWithRoundedRect:CGRectMake(0, 0, 2.0f * radius, 2.0f * radius) cornerRadius:radius].CGPath];
    [pathAnimation setDuration:0.1];
    [pathAnimation setRepeatCount:1.0f];
    [pathAnimation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear]];
    circle.path = [UIBezierPath bezierPathWithRoundedRect:CGRectMake(0, 0, 2.0*radius, 2.0*radius) cornerRadius:radius].CGPath;
    circle.position = CGPointMake(CGRectGetMidX(self.view.frame)-radius, CGRectGetMidY(self.view.frame)-radius);
    [circle addAnimation:pathAnimation forKey:@"changePathAnimation"];
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:03:16.603

You can try this:

**Touch** methods

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
   myTimer = [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(reDrawCircle) userInfo:nil repeats:YES];
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
   [myTimer invalidate];
   myTimer = nil;
} 
```

For Scalling Image::

```
-(void)reDrawCircle {

   //Your Code for Circle Re-Draw.
} 
```

When user touches, it'll start timer for your method for re drawing circle and when User ends with touch, it'll invalidate timer. So it'll not call method for re-draw.

Hopefully, it'll help you.
Thanks.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:00:16.080

您必须自定义 UIView 才能在 drawRect: 方法中绘制圆圈。在 viewController 的视图上处理捏合效果，更新 UIView 自定义中的变量并使用：

```
[myCicleView setNeedsDisplay]; 
```

强制视图重绘自身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T14:25:42.423

最好的方法是使用 Quartz 2D 并在触摸时为形状设置动画。

使用这样的东西..

![在此处输入图像描述](../Images/476b2fffce35fa05868c0c5c77296342.png)

```
CGContextRef ctxt = [[NSGraphicsContext currentContext] graphicsPort];
CGGradientRef gradient;
CGColorSpaceRef colorSpace;
CGFloat locations[] = {0.0,1.0};
CGFloat components[] = { 0.5,1.0,1.0,1.0, 0.25,0.5,0.5,1.0 };
colorSpace = CGColorSpaceCreateWithName(kCGColorSpaceGenericRGB);
gradient = CGGradientCreateWithColorComponents(colorSpace,components,locations,
                                               sizeof(locations)/sizeof(CGFloat));
CGPoint start = {70.0,130.0}, end = {100.0,100.0};
CGFloat startRadius = 0.0, endRadius = 90.0;
CGContextDrawRadialGradient(ctxt,gradient,start,startRadius,end,endRadius,0);
CGGradientRelease(gradient);
CGColorSpaceRelease(colorSpace); 
```

在这里找到更多信息.. [在 iOS 开发中，使用 Core Graphics 和/或 Quartz 2D，我如何绘制一个填充了渐变的圆，使其看起来像一个球体？](https://stackoverflow.com/questions/6638934/in-ios-development-using-core-graphics-and-or-quartz-2d-how-can-i-draw-a-circl)

另外对于 Quartz2d 的动画技术，请看这里.. [https://github.com/neror/CA360](https://github.com/neror/CA360)

# javascript - 从 iframe 内部关闭 Bootstrap 模态

> ID：15249678
> 
> 赞同：35
> 
> 时间：2013-03-06T14:17:18.350
> 
> 标签：javascript, jquery, twitter-bootstrap, parent-child

打开带有 iframe 的 Twitter Bootstrap Modal 的页面：

```
<div id="iframeModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="btn btn-danger pull-right" data-dismiss="modal" aria-hidden="true">Close</button>
        <div class="clearfix"></div>
    </div>
    <div class="modal-body">
        <iframe src="iframe-modal.html"></iframe> 
    </div>
    <div class="modal-footer">
    </div>
</div> 
```

我正在寻找一种从 iframe 内部关闭此模式的方法。前任。单击内部的链接`iframe-modal.html`以关闭模式。我尝试过但未成功：

```
$('#iframeModal', window.parent.document).modal('hide');
$('#iframeModal', top.document).modal('hide');
$('#iframeModal').modal('hide'); 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-03-06T15:23:20.637

您始终可以创建一个可全局访问的函数来关闭 Bootstrap 模式窗口。

例如。

```
window.closeModal = function(){
    $('#iframeModal').modal('hide');
}; 
```

然后从 iframe 调用它：

```
window.parent.closeModal(); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-05-30T18:00:19.990

问题是 jQuery 事件正在与单个页面的 jQuery 实例一起注册。所以，`$('#iframeModal', window.parent.document).modal('hide');`实际上是要触发 iframe 中的隐藏事件，而不是父文档。

这应该有效：`parent.$('#iframeModal').modal('hide');`

这将使用父级的 jQuery 实例来查找项目（因此不需要上下文），然后它将在父级中正确触发事件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-05T10:52:24.417

如果您不知道`id`modal 使用的另一种解决方案`iframe`：

添加函数*CloseModal*

```
function CloseModal(frameElement) {
     if (frameElement) {
        var dialog = $(frameElement).closest(".modal");
        if (dialog.length > 0) {
            dialog.modal("hide");
        }
     }
} 
```

where`frameElement`是*对`iframe`元素容器的引用。*

这个参数可以`iframe`像这样传递：

```
window.parent.CloseModal(window.frameElement); 
```

更多关于`window.frameElement`你可以在[这里找到](https://developer.mozilla.org/en-US/docs/Web/API/Window/frameElement)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-18T09:13:32.693

也可以触发点击关闭按钮：

```
$('#iframeModal button.mce-close', parent.document).trigger('click'); 
```

# php - 使用php删除文件的按钮

> ID：15249681
> 
> 赞同：0
> 
> 时间：2013-03-06T14:17:25.537
> 
> 标签：php, loops, delete-file

我有一个 php 循环，它显示目录中的所有文件：

```
<?php

    // Define the full path to your folder from root
    $filepath =  'castlewp/cv/'; // The place the files will be uploaded to.
    $path = $_SERVER['DOCUMENT_ROOT'] . $filepath;

    // Open the folder
    $dir_handle = @opendir($path) or die("Unable to open $path");

    // Loop through the files
    while ($file = readdir($dir_handle)) {

    if($file == "." || $file == ".." || $file == "index.php" || $file == ".htaccess" || $file == ".htpasswd" )

        continue;
        echo "<li><a href=\"$file\">$file</a></li>";

    }
    // Close
    closedir($dir_handle);
?> 
```

我正在尝试找到一种在每个文件旁边添加一个按钮的方法，该按钮将删除该文件。我一直在玩 php unlink 但到目前为止，我只能在有人访问脚本时删除所有文件，这不是我想要的。

据我所知，这是一个相当简单的添加内容，但我对 PHP 的了解很少，因此任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:27:00.743

尝试，注意：您必须修复 li 标签中的 url 以匹配您的 url

```
<?php
// Define the full path to your folder from root
$filepath =  'castlewp/cv/'; // The place the files will be uploaded to.
$path = $_SERVER['DOCUMENT_ROOT'] . $filepath;

// check if a file is send via GET variable
if (isset($_GET['file'])) {
$fullpath = $path.$file;
// check if file exists
if(file_exists($fullpath)) {
    unlink($fullpath);  
} else {
    // add some error handling here
} 
}

// Open the folder
$dir_handle = @opendir($path) or die("Unable to open $path");

// Loop through the files
while ($file = readdir($dir_handle)) {

if($file == "." || $file == ".." || $file == "index.php" || $file == ".htaccess" || $file == ".htpasswd" )

    continue;
    echo "<li><a href=\"yoururl?file=$file\">$file</a></li>";

}
// Close
closedir($dir_handle); 
```

?>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:28:20.180

创建另一个脚本并通过 GET 参数将文件名传递给它，并在当前文件中添加如下内容：

```
if($file == "." || $file == ".." || $file == "index.php" || $file == ".htaccess" || $file == ".htpasswd" )

    continue;
    echo "<li><a href=\"$file\">$file</a></li>";
    echo "<a href=\"delete.php?f={$file}\">Delete</a>"; 
```

然后在您的 delete.php 文件中复制一些现有代码并对其进行修改以删除该文件：

```
$filepath =  'castlewp/cv/'; // The place the files will be uploaded to.
$path = $_SERVER['DOCUMENT_ROOT'] . $filepath;
if(empty($_GET['f']))
  exit();
$file = str_replace(array('/', '..'), '', $_GET['f']);
$filePath = realpath($path.$file);
if($filePath !== FALSE)
  unlink($filePath); 
```

以这一切为例。您仍然需要添加一些安全性，但我认为这是一个起点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T14:31:42.760

首先：正确格式化您的代码。我建议您使用空格和/或额外的括号来使您的代码更具可读性。该`continue`语句是满足条件时唯一执行的语句`if`，但您的源格式不会这样认为。

您也忘记`<ul>`或`<ol>`标记您的列表。检查 W3C 标准以获取列表。

一个简单的实现是基于一个带有提交按钮的元素。这是纯html。插入您的

*   表单内的元素，每个元素都有一个“删除”按钮。指定表单的目标。

    生成这个（或类似的）html：

    ```
    <form action="myfilemanager.php" method="post" name"=formfilemanager">
        <ul>
          <li>filename1.dat <input type="submit" name="filename1.dat" value="delete"/></li>
          <li>filename2.dat <input type="submit" name="filename2.dat" value="delete"/></li>
          ....
        </ul>
    </form> 
    ```

    当您按下 filename2.dat 的“删除”按钮时，您会在 $_POST 全局上找到一些参数：

    ```
    filename2.dat=delete 
    ```

    如果你像这样循环 $_POST 数组

    ```
    foreach($_POST as $k=>$v) {
        if($v=='delete') { 
          // $k contains the file name to delete
          // SANITIZE you input, remove '..','%', whatever
          $k=str_replace(array('%','|','/','..'),'',$k);
          unlink($filepath.$k);
        }
    } 
    ```

# r - 递归访问R中列表列表中的元素

> ID：15249682
> 
> 赞同：0
> 
> 时间：2013-03-06T14:17:26.643
> 
> 标签：r, list, nested-lists

我正在使用 R 的 Annotation 包来获取与某些基因相关的 GO 术语。使用 getGOParents(term) 函数的结果是：

```
> x = getGOParents("GO:0035556")

$`GO:0035556`
$`GO:0035556`$Ontology
[1] "BP"

$`GO:0035556`$Parents
    is_a 
"GO:0007165" 
```

列表的结构是：

```
dput(x)
structure(list(`GO:0035556` = structure(list(Ontology = "BP", 
Parents = structure("GO:0007165", .Names = "is_a")), .Names = c("Ontology", 
"Parents"))), .Names = "GO:0035556") 
```

我需要访问列表的“最后一个”术语，我以一种非常愚蠢的方式做到了：

```
y=x[1]
z=y[[1]]
w=z[[2]]
s=w[[1]] 
```

有没有办法以编程方式访问它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:44:44.583

您可以使用`rapply`它是 lapply 的递归版本。在这里，我在列表的终端节点上应用标识函数。

```
 rapply(x,f=I)
GO:0035556.Ontology GO:0035556.Parents.is_a 
               "BP"            "GO:0007165" 
```

或一一访问

```
rapply(x,f=I)[2] 
GO:0035556.Parents.is_a 
       "GO:0007165" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:48:58.470

请注意，您可以将您的方法压缩为

```
x[[1]][[2]][[1]] 
```

您可以做的一件事是使用删除列表结构`unlist`

```
unlist(x)
#GO:0035556.Ontology GO:0035556.Parents.is_a 
#               "BP"            "GO:0007165" 
```

您可以通过索引单独访问它们

```
> unlist(x)[1]
GO:0035556.Ontology 
               "BP" 
> unlist(x)[2]
GO:0035556.Parents.is_a 
           "GO:0007165" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:14:06.857

我为此使用了此功能：

```
getParent <- function(x){
    parent = NA
    if(exists(x,revmap(GOBPCHILDREN))){
        parents = get(x,revmap(GOBPCHILDREN))
        parent = tail(parents, n=1)
    }
    if(!is.na(parent)){
        return(parent)
    }
    return(NA)
} 
```

但我不想要最高的父母，因为这个总是一样的。所以我将功能更改为：

```
getParent <- function(x){
    parent = NA
    if(exists(x,revmap(GOBPCHILDREN))){
        parents = get(x,revmap(GOBPCHILDREN))
        parent = tail(parents, n=4)[1] ##change the 4 to which level you want
    }
    if(!is.na(parent)){
        return(parent)
    }
    return(NA)
} 
```

GO 术语的一个很好的可视化工具是 GOrilla：[http ://cbl-gorilla.cs.technion.ac.il/](http://cbl-gorilla.cs.technion.ac.il/)

我希望你能用这些信息做点什么

# android - 将 Google maps api v2 添加到现有项目

> ID：15249683
> 
> 赞同：8
> 
> 时间：2013-03-06T14:17:27.373
> 
> 标签：android, api, google-maps, build-target

我正在开发一个 Android 应用程序以将 google maps api 合并到一个单独的活动中。但是当我阅读教程时，它指出构建目标必须在项目创建时设置为 google api。我的问题是可以将地图添加到现有项目吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-11-16T02:33:14.200

我知道这是一个老问题，但是当我以前的经验是从初始应用程序创建中添加 Google Maps API 时，我试图弄清楚如何将 Google Maps 添加到现有的 Android Studio 项目中时遇到了这个问题。

在 Android Studio 中，您可以使用：

```
File --> New --> Google --> Google Maps Activity 
```

或者右键单击包含所有活动的文件夹，以上内容仍将保留。

让 Android Studio 同步，您将看到一个生成的关于您的谷歌地图密钥的 xml 文件。复制粘贴 URL（它是没有缩进的），然后按照说明进行操作。之后你会得到一把钥匙。获得密钥后，将其复制粘贴到生成的 xml 文件中的“YOUR_KEY_HERE”字符串常量中，就可以开始了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T14:19:45.493

设备必须安装Google [Play 服务](http://developer.android.com/google/play-services/index.html)`Google Maps Android v2`才能运行：

> 该 API 现在作为 Google Play 服务 SDK 的一部分分发，您可以使用 Android SDK 管理器下载它。要了解如何安装该软件包，请参阅安装 Maps API SDK。

您会发现这些[文档](https://developers.google.com/maps/documentation/android/)很有用！

如果您的应用程序正在运行 v1，则最好运行检查以查看是否`Google Play services`已安装，如果未安装，则使用旧地图。我没有测试过它，但在[这里](https://stackoverflow.com/questions/9301156/detect-google-services-on-android-device)检查答案以运行该检查。我还发现，从[这里](http://developer.android.com/reference/com/google/android/gms/common/GooglePlayServicesUtil.html#isGooglePlayServicesAvailable%28android.content.Context%29)你可以这样做：

```
int status = GooglePlayServicesUtil.isGooglePlayServicesAvailable(getApplicationContext();
if(status == ConnectionResult.SUCCESS) {
    //Success! Do what you want
} 
```

并使用以下类型来确定设备上是否安装了 Google Play 服务：

> public static int isGooglePlayServicesAvailable（上下文上下文）
> 
> 验证此设备上是否安装并启用了 Google Play 服务，并且此设备上安装的版本不低于此客户端所需的版本。
> 
> 返回指示是否存在错误的状态代码。ConnectionResult 中可以是以下之一：SUCCESS、SERVICE_MISSING、SERVICE_VERSION_UPDATE_REQUIRED、SERVICE_DISABLED、SERVICE_INVALID。

要使用片段添加地图，您需要执行以下操作：

```
private GoogleMap map;
private MapFragment mapFragment;
private void InitMap()
{
    mapFragment = ((MapFragment)getSupportFragmentManager().findFragmentById(R.id.fragment_map));

    map = mapFragment.getMap();
    map.setMapType(GoogleMap.MAP_TYPE_NORMAL);
    map.setMyLocationEnabled(false);
} 
```

对于 Google Maps Android v2 和 Fragments，如上所述，[这是一个很好的资源](https://developers.google.com/maps/documentation/android/start)！哦，记得使用`Google Play services SDK`!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T14:27:56.000

您只需要更改项目的构建目标。

在 Eclipse 下，转到 Window > Preferences > Android 在 Project Build Target 列表中，选择一个提供 Google API 的选项。

**注意：**这仅在针对 Android **v1**的 Google Maps API 时有效。Google Maps API for Android **v2**由[库项目提供](http://developer.android.com/google/play-services/maps.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-25T08:25:24.740

打开您的项目属性> Android> 查看选项库> 单击添加> google-play-services_lib 选项存在（仅当谷歌播放服务已在其他项目中正确完成所有步骤时）

# regex - 使用命令行删除文本中的重复字符串键

> ID：15249686
> 
> 赞同：0
> 
> 时间：2013-03-06T14:17:34.263
> 
> 标签：regex, command-line, duplicates, unique

我试图逐行删除一些重复的字符串。例如：

```
A {id: "x" p {id: "vcv" v: "i4"} on:taf"}
A {id: "y" p {id: "wse" v: "i4"} on:ue"}
A {id: "z" p {id: "das" v: "i4"} on:tade"}
A {id: "x" p {id: "da" v: "i4"} on:faer"}
A {id: "y" p {id: "werw" v: "i4"} on:asee"}
A {id: "y" p {id: "werw" v: "i4"} on:asee"} 
```

输出应该是没有重复 A_id 的输出，这意味着输出应该是：

```
A {id: "x" p {id: "vcv" v: "i4"} on:taf"}
A {id: "y" p {id: "wse" v: "i4"} on:ue"}
A {id: "z" p {id: "das" v: "i4"} on:tade"} 
```

我遇到的问题是我不知道如何排序并仅使用子字符串使其唯一。我尝试使用：

```
cat input.txt | grep 'A\s\{id:\s\"[^;]*\sp\s\{id:' | sort -u > output.txt 
```

但它不会删除重复的子字符串，而只会删除与其他字符串完全相同的行。所以它就像它只是被删除：

```
A {id: "y" p {id: "werw" v: "i4"} on:asee"} 
```

这与最后两行相同，但没有删除：

```
A {id: "y" p {id: "wse" v: "i4"} on:ue"} 
```

它具有重复的 id 但不同的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:31:58.333

一个 awk 解决方案：

```
$ awk '!a[$3]++' file
A {id: "x" p {id: "vcv" v: "i4"} on:taf"}
A {id: "y" p {id: "wse" v: "i4"} on:ue"}
A {id: "z" p {id: "das" v: "i4"} on:tade"} 
```

结合你的 grep 命令的匹配：

```
$ awk '$1=="A" && $2=="{id:" && $4=="p" && $5=="{id:" && !a[$3]++' file
A {id: "x" p {id: "vcv" v: "i4"} on:taf"}
A {id: "y" p {id: "wse" v: "i4"} on:ue"}
A {id: "z" p {id: "das" v: "i4"} on:tade"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:25:17.137

问题是`sort`默认使用整个字符串作为键，所以它只会消除相同的行。

尝试改变

```
sort -u 
```

到

```
sort -uk3,3 
```

消除键是第三个字段的重复项。字段由空格分隔。

> -k, --key=POS1[,POS2] 在 POS1 开始一个键，在 POS2 结束它（原点 1）
> 
> POS 是 F[.C][OPTS]，其中 F 是字段编号，C 是字段中的字符位置。OPTS 是一个或多个单字母排序选项，它覆盖该键的全局排序选项。如果没有给出键，则使用整行作为键。

[参考](http://unixhelp.ed.ac.uk/CGI/man-cgi?sort)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:25:17.577

Perl 解决方案：

```
perl -ne 'if (/\{id: "([^"]+)"/ and not exists $h{$1}) { $h{$1}++; print }' 
```

它将匹配的 id 存储在哈希中，并且仅在 id 尚未在哈希中时打印。

# asp.net-mvc - 仅用于控制器操作的 mvc 路由

> ID：15249689
> 
> 赞同：0
> 
> 时间：2013-03-06T14:17:38.757
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在设置一条 mvc 路由来捕获 404。我不希望在它不是对控制器操作的请求时调用此路由，例如，如果找不到图像，则对图像的请求不应触发该路由。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:26:32.693

您可以更改 IIS 配置以不处理 .jpg 或您不希望应用程序处理的任何其他文件格式，或者您可以将 IgnoreRoute（在 App_start/RouteConfig（取决于您的 MVC 版本）中）添加到每种类型的路由您不想处理的文件。

像这样 ：

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
routes.IgnoreRoute("favicon.ico");
routes.IgnoreRoute("*.jpg");
routes.MapRoute("CatchAll", "{*path}", [Page404ControllerAction]); 
```

希望能帮助到你！

# java - Javax.enterprise.context.SessionsScoped 的行为类似于 SpringContainer 中的 Singleton，以 JSF 作为前端

> ID：15249690
> 
> 赞同：0
> 
> 时间：2013-03-06T14:17:42.097
> 
> 标签：java, spring, jsf-2

我有前端 JSF/RichFaces、中间层 Spring 和 Hibernate for DB 的 Web 应用程序。当我部署应用程序并从我的系统和我的朋友访问中访问时，我的朋友可以继续我所做的任何操作（对象表现为单例/应用程序上下文）。下面是我的会话类 web.xml、faces-config.xml 和 spring.xml 的代码。我想由于同样的原因，我相信 viewscoped bean 也没有达到我的预期。在这种情况下有人可以帮忙吗？

```
package org.kp.business;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.enterprise.context.SessionScoped;
import javax.inject.Named;

@Named
@SessionScoped
public class OliHolder implements Serializable{

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    private Map<String, ArrayList<OliData>> oliTypesHolder = new HashMap<String, ArrayList<OliData>>();

    public void addOli(String oliType) {
        OliData oliDetails = new OliData();
        oliDetails.setOliName(oliType);
        oliDetails.initData(oliType);
        ArrayList<OliData> tempHolder = null;
        if(!oliTypesHolder.containsKey(oliType))
        {
            tempHolder = new ArrayList<OliData>();
            tempHolder.add(oliDetails);
            oliTypesHolder.put(oliType, tempHolder);
        }else{
            tempHolder = oliTypesHolder.get(oliType);
            tempHolder.add(oliDetails);
        }
    }

    public void deleOli(int num, String oliType) {
        ArrayList<OliData> list = oliTypesHolder.get(oliType);
        if(null != list && list.size() > 0){
            if((list.size()>num)){  
                list.remove(num);
            }
        }
    }

    public void resetOliHolder(){
        oliTypesHolder.clear();
    }

    public List<OliData> getOlisByType(String oliType){
        ArrayList<OliData> tempHolder = oliTypesHolder.get(oliType);
        return tempHolder;
    }

    public void resetCurrentType(String selectedOli) {
         oliTypesHolder.remove(selectedOli);
    }

    public Map<String, ArrayList<OliData>> getOliTypesHolder() {
        return oliTypesHolder;
    }

} 
```

人脸配置.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<faces-config xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_1.xsd"
    version="2.1">

    <application>
        <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
    </application>

</faces-config> 
```

web.xml

```
<?xml version="1.0"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <display-name>EBMMaker</display-name>
    <!-- <welcome-file-list> <welcome-file>index.html</welcome-file> </welcome-file-list> -->
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.faces</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>faces/index.xhtml</welcome-file>
    </welcome-file-list>
    <context-param>
        <param-name>org.richfaces.skin</param-name>
        <param-value>ruby</param-value>
    </context-param>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/SpringConfig.xml</param-value>
    </context-param>
    <listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>
</web-app> 
```

春天.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
        xmlns:tx="http://www.springframework.org/schema/tx"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
            http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd">

        <context:annotation-config />
        <context:component-scan base-package="org.kp"></context:component-scan>

        <bean id="dataSource"
            class="org.springframework.jdbc.datasource.DriverManagerDataSource">
            <property name="driverClassName" value="com.mysql.jdbc.Driver" />
            <property name="url" value="jdbc:mysql://localhost:3306/ebm" />
            <property name="username" value="root" />
            <property name="password" value="root" />
        </bean>
        <bean id="sessionFactory"
            class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
            <property name="dataSource" ref="dataSource" />
            <property name="packagesToScan" value="örg.kp.db.model" />
            <property name="configLocation">
                <value>
                    classpath:/org/kp/db/hibernate.cfg.xml
                </value>
            </property>
        </bean>

</beans> 
```

这是我正在尝试访问用于从数据库获取数据的 bbOli Bean 的一类由于我是手动创建对象，因此我正在使用应用程序上下文访问 bbOli Bean。我不确定 OLIData 对象的范围。

```
package org.kp.business;

import java.util.ArrayList;
import java.util.List;

import javax.faces.context.FacesContext;
import javax.servlet.ServletContext;

import org.kp.db.model.TblEBMFieldDetails;
import org.springframework.context.ApplicationContext;
import org.springframework.web.context.support.WebApplicationContextUtils;

public class OliData {

    BusinessOli bbOli;

    private String oliName;

    public OliData() {
        ApplicationContext ctx = WebApplicationContextUtils
                .getRequiredWebApplicationContext((ServletContext) FacesContext
                        .getCurrentInstance().getExternalContext().getContext());
        bbOli = (BusinessOli) ctx.getBean("bbOli");
    }

    private String commentText;

    public String getCommentText() {
        return commentText;
    }

    public void setCommentText(String commentText) {
        this.commentText = commentText;
    }

    public String getOliName() {
        return oliName;
    }

    public void setOliName(String oliName) {
        this.oliName = oliName;
    }

    private List<TblEBMFieldDetails> dbEBMData;
    private List<EBMDataForView> renderEBMData;

    public List<EBMDataForView> getRenderEBMData() {
        return renderEBMData;
    }

    public void setRenderEBMData(List<EBMDataForView> renderEBMData) {
        this.renderEBMData = renderEBMData;
    }

    public List<TblEBMFieldDetails> getDbEBMData() {
        return dbEBMData;
    }

    public void setDbEBMData(List<TblEBMFieldDetails> dbEBMData) {
        this.dbEBMData = dbEBMData;
    }

    public void initData(String oliName) {
        this.dbEBMData = bbOli.getOliTypeSpfcData(oliName);
        renderEBMData = new ArrayList<EBMDataForView>();
        for (TblEBMFieldDetails dt : dbEBMData) {
            EBMDataForView data = new EBMDataForView();
            data.setCmplxFlg(dt.isCollectionFlg());
            if (dt.isCollectionFlg() && null != dt.getValues()) {
                data.setFieldCollectionValue(dt.getValues().split(","));
                System.out.println("Hey I'm: "+data.getFieldCollectionValue().length);
            }

            data.setFieldDefaultValue(dt.getDefaultValue());
            data.setFieldName(dt.getFieldName());
            data.setRequiredFld(dt.isReqFlg());
            renderEBMData.add(data);
        }
    }

} 
```

改变后

```
import org.springframework.beans.factory.annotation.Autowired;

@ManagedBean(name = "bbOliHolder")
@ViewScoped
public class OliHolderBacking implements Serializable{

    private static final long serialVersionUID = 1L;

    private String selectedTab;

    @Autowired
    BusinessOli bbOli;

    public BusinessOli getBbOli() {
        return bbOli;
    }

    public void setBbOli(BusinessOli bbOli) {
        this.bbOli = bbOli;
    }

    @Autowired
    OliHolder oliHolder;

    private String[] allOliTypes = null;

    @PostConstruct
    public void init() {

        allOliTypes = getBbOli().getAllOlisFromDB();
        olis = new ArrayList<OliData>();
    }

} 
```

服务层 Bean

```
import java.util.List;

import org.kp.db.dao.EBMDetailDao;
import org.kp.db.dao.impl.OlisImpl;
import org.kp.db.model.TblEBMFieldDetails;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Service;

@Service("bbOli")
@Scope("prototype")
public class BusinessOli{

    @Autowired
    OlisImpl olisImpl;

    @Autowired
    EBMDetailDao ebmData;

    public String[] getAllOlisFromDB() {

        String[] str = olisImpl.getAllOlis();
        return str;
    }
} 
```

然而，BusinessOli 中的自动装配在更改之前就已经开始工作了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:32:18.943

据我所知，Spring 不支持 Java EE 6 (JSR 299) 中引入的 CDI 注释，因此您应该使用 spring 注释来定义 bean 的范围，在您的情况下是：

```
import org.springframework.context.annotation.Scope;

@Scope("session") 
```

在您的情况下，Spring 使用了默认范围，这确实是单例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:05:05.357

如果同时使用 Spring 和 JSF，那么使用 Spring beans 而不是 JSF Managed bean 会很有好处。Spring bean 提供了 JSF 托管 bean 的几乎所有功能，并且在此之上添加了许多有用的 Spring 特性（AOP、代理、编织、MessageSources 等）。

如果您决定使用 Spring bean，则必须使用 Spring Scopes，如下所示`WebApplicationContext`：

```
import org.springframework.context.annotation.Scope;
import org.springframework.web.context.WebApplicationContext

@Scope(WebApplicationContext.SCOPE_SESSION) 
```

**查看范围**

有一个问题。如您所见，`SCOPE_VIEW`在`WebApplicationContext`. Spring 尚不支持 JSF 2 视图范围。现在，您必须提供自己的视图范围实现。这并不难：

*   您可以在这里找到**说明**：
    [https ://github.com/weijiguang/OA/wiki/Spring-3-and-the-JSF-2-View-Scope(spring-2%E5%8F%8AJSF-2-bean% E4%BD%9C%E7%94%A8%E5%9F%9F)](https://github.com/weijiguang/OA/wiki/Spring-3-and-the-JSF-2-View-Scope(spring-2%E5%8F%8AJSF-2-bean%E4%BD%9C%E7%94%A8%E5%9F%9F))

*   您还可以在这里找到**工作实现**：
    [https ://github.com/michail-nikolaev/primefaces-spring-scopes](https://github.com/michail-nikolaev/primefaces-spring-scopes)

*   并且不要忘记在这里投票**支持 Spring 中的 JSF 2 View 范围支持** ：[https ://jira.springsource.org/browse/SPR-6543](https://jira.springsource.org/browse/SPR-6543)

# sqlite - 定义不支持 SQLite 的智能手机

> ID：15249691
> 
> 赞同：0
> 
> 时间：2013-03-06T14:17:43.217
> 
> 标签：sqlite, cordova

我开发phonegap应用程序，并使用SQLite 今天我发现firefox不支持它，经过额外调查我发现IE8也不支持据我了解phonegap适用于默认系统浏览器从这里我的问题，用户如何知道他的智能手机会与我的应用程序一起工作或者我如何知道并向用户说我的应用程序将无法工作

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:16:01.970

PhoneGap**不**使用默认浏览器进行渲染。它在它支持的所有平台上使用**WebKit**渲染引擎。因此，如果您可以使用 PhoneGap 在一个平台上运行 SQLite，那么在所有支持 PhoneGap 的平台上都是一样的。附带说明一下，Chrome 和 Safari 使用 WebKit 作为其渲染引擎，因此使用这些浏览器在桌面上测试您的应用程序。

# php - cakephp - 使用 imagecreatefrompng() 的调试器错误

> ID：15249693
> 
> 赞同：0
> 
> 时间：2013-03-06T14:17:44.883
> 
> 标签：php, cakephp, imagecreatefrompng

当我在控制器的操作中使用 imagecreatefrompng() 时，我有一些代码会中断。我不认为它应该有所作为，但 imagecreatefrompng() 是在通过 AJAX 调用的动作内部调用的。

```
$imgName='img/favicons/'.$saveFileName.'_large.png';
$img=imagecreatefrompng($imgName); 
```

我很确定这条路是对的。在同一操作中，我将文件保存到该文件夹​​中，但是返回以下错误：

> **警告**：get_class() 期望参数 1 是对象，资源在**C:\xampp\htdocs\cakephp\lib\Cake\Utility\Debugger.php**第**578行**
> 
> **警告**：get_object_vars() 期望参数 1 是对象，资源在**C:\xampp\htdocs\cakephp\lib\Cake\Utility\Debugger.php中的第****584**行

 **错误指向的 debugger.php 文件中的特定函数处理对象到字符串的转换，导致错误的行是：

```
$className = get_class($var);
$objectVars = get_object_vars($var); 
```

有人知道出了什么问题吗？谢谢

**编辑 ：**

这是函数的代码

```
public function saveSiteFavicon() {
    $this->layout = 'ajax';
    $url = $this->request->data['websiteurl'];
    $saveFileName = parse_url($url);
    $saveFileName = $saveFileName['host'];
    $saveFileName = str_replace('.', '', $saveFileName);
    $saveFileName = str_replace('www', '', $saveFileName);
    $this->Favicon->recursive = 0;
    $faviconexists = $this->Favicon->findByImage($saveFileName.'.png');
    if(!empty($faviconexists)) {
        echo $saveFileName.'.png:'.$faviconexists['Favicon']['id'];
    } else {
        $fp = fopen ('img/favicons/'.$saveFileName.'.png', 'w+');
        $ch = curl_init('http://g.etfv.co/'.$url);
        curl_setopt($ch, CURLOPT_TIMEOUT, 6);
        /* Save the returned data to a file */
        curl_setopt($ch, CURLOPT_FILE, $fp);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
        curl_exec($ch);
        curl_close($ch);
        fclose($fp);
        //if the favicon is oversized resize it
        $faviconFileName = 'img/favicons/'.$saveFileName.'.png';
        $metaData=getimagesize($faviconFileName);
        if($metaData[1] > 16) {
            rename($faviconFileName, 'img/favicons/'.$saveFileName.'_large.png');
            $imgName='img/favicons/'.$saveFileName.'_large.png';
            $thumbName='img/favicons/'.$saveFileName.'.png';
            $img=imagecreatefrompng($imgName);

            $imgThumb=imagecreatetruecolor(16,16);
            imagecopyresampled($imgThumb,$img,0,0,0,0,16,16,$metaData[0],$metaData[1]);
            imagepng($imgThumb, $thumbName);
            imagedestroy($imgThumb);
        }
        $this->Favicon->create();
        $this->Favicon->save(array('image'=>$saveFileName.'.png'));
        $faviconid = $this->Favicon->getLastInsertId();
        echo $saveFileName.'.png:'.$faviconid;
    }
} 
```

在视图中，我只是通过 ajax 调用此函数并提醒结果，这是我看到错误消息的地方。

```
$.post("../favicons/saveSiteFavicon", {websiteurl: value})
                .done(function(data) {
                    alert(data);
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:27:19.273

错误消息基本上告诉你问题；

`$img`是“资源”，而不是`Object`“简单”数据类型（字符串/整数等）。无法调试资源。您可以使用`var_dump()`，但这可能只会给您类似`resource #123`. 通过使用它可以调试资源的“类型”；

```
debug(get_resource_type($img)); 
```

但是，查看您的代码，您已经期望这是一个“图像”，或者`FALSE`如果`imagecreatefrompng()`失败:)

有关“资源”的更多信息； [http://php.net/manual/en/language.types.resource.php](http://php.net/manual/en/language.types.resource.php)**

# c++ - 缺少字符串和 STL 容器的隐式转换

> ID：15249694
> 
> 赞同：-4
> 
> 时间：2013-03-06T14:17:44.743
> 
> 标签：c++, stl, containers, implicit-conversion, stdstring

为什么 C++在编写类似代码时没有隐式转换为`bool`定义的容器和 STL 容器`std::string`

```
if (!x.empty()) { ... } 
```

而不是更短

```
if (x) { ... } 
```

什么时候`x`是类型`std::string`或例如`std::vector`？

我也对`std::string`（在 C++03 中）没有`const char*`在 STL 示例中隐式转换为的事实感到困惑，例如

```
std::string s("filename");
std::ofstream(s.c_str(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T14:21:00.883

在 C++ 中不这样做的一个原因是，这种转换往往会导致[细微的错误](http://tempastic.blogspot.co.uk/2012/04/perils-of-implicit-conversions-in-c.html)。

`c_str()`Stroustrup在 C++ 编程语言 [第 3 版] 中专门解决了您的问题：

> 转换为 C 风格的字符串可以由一个`operator const char*()`而不是`c_str()`. 在这种转换出乎意料的情况下，这将提供隐式转换的便利，但会以意外为代价。

# javascript - 使用控制台查看对象的可用方法？

> ID：15249700
> 
> 赞同：6
> 
> 时间：2013-03-06T14:17:59.703
> 
> 标签：javascript, browser, console, inspection

有什么方法可以使用控制台查看 JS 对象上可用的方法吗？

我在想这样的事情：

```
> var myArray = [1,2,3];
  undefined
> myArray
  [1, 2, 3]
> myArray.logme = function() { console.log(this); };
  function () { console.log(this); }
> myArray
  [1, 2, 3] 
```

我第二次键入`myArray`时，我想看看该`logme()`方法现在可用的事实。

我想知道答案，以便更轻松地探索不熟悉的 JS 对象。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T17:00:18.323

您可以使用

```
console.dir(myArray); 
```

你会得到一个像这样的可扩展/可检查的显示，包括自定义属性和原型对象：

![](../Images/e94835bb6ad2a981eb187a07a487a696.png)

[（来自[https://stackoverflow.com/a/14537759/1048572](https://stackoverflow.com/a/14537759/1048572)，另请参阅[Console.dir 和 console.log 有什么区别？](https://stackoverflow.com/q/11954152/1048572)）]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:30:32.913

如果您在 Chrome 中并且您可以使用类似以下的内容（相当粗略）检查属性是否为`function`：

```
function showMethods(obj) {
    console.log(Object.keys(obj).filter(function(prop) {
        return typeof el[prop] == 'function';
    }));
} 
```

然后只需按如下方式调用它：

```
showMethods({a: 1, b: 2, c: function () {}}) // ['c']
showMethods({a: 1, b: 2}) // []
showMethods({a: 1, b: function() {}, c: function () {}}) // ['b', 'c'] 
```

# greasemonkey - 如何只运行一次 Greasemonkey 脚本

> ID：15249703
> 
> 赞同：5
> 
> 时间：2013-03-06T14:18:00.597
> 
> 标签：greasemonkey

我为域制作了一个greasemonkey 脚本，现在如何让它只运行一次？就像每次访问域时都会启动一样，我不希望这样。我如何让它只运行一次，然后像删除自己或使自己处于非活动状态？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T01:01:38.930

如果您希望脚本（或脚本的一部分）只运行一次，那么您需要在非易失性存储中存储一个标志。脚本不能自行删除或自行关闭。但它可以立即退出，而不是运行任何其他代码。

要逐个站点（域）存储内容，请使用[localStorage](https://stackoverflow.com/q/2010892/331508)。要在脚本+命名空间的基础上存储东西，请使用[GM_setValue](http://wiki.greasespot.net/GM_setValue)。这是一个基本脚本：

```
// ==UserScript==
// @name        _Run a GM script one-time only
// @namespace   _pc
// @include     http://YOUR_SERVER.COM/YOUR_PATH/*
// @grant       GM_getValue
// @grant       GM_setValue
// ==/UserScript==

var alreadyRun = GM_getValue ("alreadyRun",  false);

if ( ! alreadyRun) {
    GM_setValue ("alreadyRun", true);
    alert ("This part of the script will run exactly once per install.");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T05:32:49.583

将函数重新定义为主体中的最后一条语句：

```
function foo()
 {
 ...
 foo = function(){};
 } 
```

# sql - 如何在 Excel 中使用此查询？是查询错误还是只是 Excel 不够强大？

> ID：15249704
> 
> 赞同：-1
> 
> 时间：2013-03-06T14:18:00.737
> 
> 标签：sql, excel, parameters, odbc, ms-query

```
SELECT Orders.PO_No, Orders.Order_No
FROM DBase.dbo.Orders Orders
Where Orders.PO_No = (Select Top 1 Orders.PO_No From Orders Where Order_No = ?) 
```

如果我特别使用

```
SELECT Orders.PO_No, Orders.Order_No
FROM DBase.dbo.Orders Orders
Where Orders.PO_No = (Select Top 1 Orders.PO_No From Orders Where Order_No = '555555') 
```

它返回值我如何使用用户在 Sheet1 上的单元格 $A$1 中输入的值编写此查询我试过了？在“定义下的命令文本”和“SQL 语句”框下的 MSQuery 内。

当使用命令文本字段和？我确实得到了一个名为 Parameter1 的新参数，但是当我将 Parameter1 的值设置为 = 单元格时，出现以下错误：

[Microsoft][ODBC SQL Server Driver]语法错误或访问冲突

和

[Microsoft][ODBC SQL Server Driver]无效的描述符索引

即使我确保单元格值为 555555

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:09:44.163

我想出了以下 VBA，它运行速度超快且易于更改。

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Target.Address = "$A$1" Then
        With Range("Table_Query_from_DBase_1[[#Headers],[PO_No]]").ListObject.QueryTable
        .CommandText = Array( _
        "SELECT Orders.PO_No, Orders.Order_No" & Chr(13) & "" & Chr(10) & "FROM DBase.dbo.Orders Orders" & Chr(13) & "" & Chr(10) & "Where Orders.PO_No =(Select Top 1 Orders.PO_No From Orders Where Order_No = '" & Range("A1").Value & "')" _
                   )
        End With
    End If
End Sub 
```

每当在单元格 A1 中输入新值时，代码将自动更改 CommandText（选择语句）。

此外，通过使用 With 命令，您可以包含更多内容，例如通过添加更改参数后使其自动刷新

```
.Refresh BackgroundQuery:=False 
```

结束前。

您可以通过将其放入分配给按钮或工作表刷新或几乎无穷无尽的变量的宏中来更改 CommandText 何时更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:37:46.403

很抱歉，我没有方便的 SQLServer 来测试它，但我的猜测是，正如 Jeff 评论的那样，当需要一个 String 时，你会传递一个 Long 。尝试这个

```
Where Orders.PO_No = (Select Top 1 Orders.PO_No From Orders Where Order_No = "'" & ? & "'") 
```

我不确定*该*语法是否正确，但本质上您需要在问号周围加上引号。格式化单元格不起作用，因为 Excel 只是将值放入问号所在的 SQL 语句中。它不评估单元格的值，并包括字符串的引号或日期的哈希值或类似的东西。即使单元格值是字母（而不是看起来像数字的字符串），SQL 也不会工作，因为缺少单引号。

我认为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-31T23:06:52.193

类似于 user2140261 的解决方案，使用 worksheet_change 事件来触发更改：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Target.Address = "$A$1" Then
        With ActiveSheet.Range("Table_Name").ListObject.QueryTable
            .CommandText = ChangeParameter(.CommandText, "ParameterFlag", Range(Target.Address))
        End With
        ActiveWorkbook.RefreshAll
    End If
End Sub 
```

上面的$A$1是动态信息的位置（比如一个日期），SQL表是Table_Name，ParameterFlag是SQL代码中要替换的参数（见下文）。这是用于更改 SQL 代码的 ChangeParameter 函数：

```
Function ChangeParameter(src As String, parameter As String, newValue As String)
    'Replace src text surrounded by startParameter and endParameter with newValue

    Dim startPosn As Long, endPosn As Long
    Dim startParameter As String, endParameter As String

    startParameter = "/*<" & parameter & ">*/"
    endParameter = "/*</" & parameter & ">*/"
    startPosn = 0
    Do
        startPosn = InStr(startPosn + 1, src, startParameter)
        If startPosn Then
            endPosn = InStr(startPosn + Len(startParameter), src, endParameter)
            If endPosn Then
                src = Left(src, startPosn + Len(startParameter) - 1) & newValue & Mid(src, endPosn)
            Else
                Exit Do
            End If
        End If
    Loop While startPosn
    ChangeParameter = src
End Function 
```

例如，如果所需的 SQL 代码是：

```
SELECT * FROM mytable WHERE startDate > '7/1/2015' 
```

然后这将在命令文本框中编辑为：

```
SELECT * FROM mytable WHERE /*<StartDate>*/'7/1/2015'/*</StartDate>*/ 
```

调用线路是：

```
.CommandText = ChangeParameter(.CommandText, "StartDate", "'" & Range(Target.Address) & "'") 
```

（日期作为常量存储在代码中，因此有必要用单引号将电子表格的值括起来）。所有这些都有效，因为被包围的注释`/* */`即使在一行的中间也会被忽略，这通常是一种糟糕的编码实践，但在这里很有用。

`/*<StartDate>*/`原始 SQL 代码中由参数标志（在本例中）包围的所有位置`/*</StartDate>*/`都将替换为新值（在本例中为"'" & Range(Target.Address) & "'"）。下次更改目标单元格 $A$1 时，将再次运行调用并再次更改参数，而无需知道其先前的值是什么。

对 ChangeParameter 的多次调用可用于每个要更改的参数，以及每个包含要更改的参数的基于 SQL 的表。

当然，如果参数替换适用于复杂代码，则这些都不是必需的......

# javascript - 我对 java Script 函数感到困惑

> ID：15249706
> 
> 赞同：-1
> 
> 时间：2013-03-06T14:18:06.040
> 
> 标签：javascript, function

所以这是一些代码

```
var name = 'ali';

function say() {
  alert(name);
} 
```

所以这会提醒'ali'，因为名称函数由全局对象拥有，现在下面的代码

```
var oobj  { 
  var name: 'raziq',
  say:function () {
    alert (name);
  }
}

oobj.say(); 
```

所以现在say函数归oobj对象所有，所以name属性应该提醒'raziq'而不是'ali'。顺便说一句，我知道这个关键字的用法

我的问题是什么会被警告和 y ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T14:22:28.777

- -更新 - -

基本上，一个是变量，一个是属性。您可以通过两种不同的方式访问它们

在您的问题中，您声明了一个变量`name`和一个函数。在任何时候，如果您不专门重新定义`name`，那么它将始终是该值。

在你的情况下，你认为你正在重新定义`name`你这样做

```
var oobj = {
    name: 'raziq' 
```

但你不是。您正在声明 oobj 对象的属性。即，如果我尝试从对象外部提醒名称，它会查找名称的变量声明，它会找到您设置为“ali”的全局变量。为了得到`property`名字，你必须告诉它找到它的“路径”。路径是`oobj.name`

你在一个对象里面，所以你不要使用`var =`and `;`。你用逗号`,`，你就这样做`say: function() {`

```
var oobj = {
    name: 'raziq',
    say: function () {
        alert(this.name);
    }
}
oobj.say(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:40:22.713

由于 Jeff 已经发布了正确的答案，我只想指出，即使是第一个示例也没有按预期工作。内部`alert`将向您展示该`name`功能。

所以这：

```
function name() {
  alert(name);
}

name() 
```

将提示消息：

```
function name() {
  alert(name);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:24:04.987

也许你正在寻找这个

```
var oobj = { 
    name : 'raziq',
    say : function (){
            alert (oobj.name);
        }
}

oobj.say(); 
```

请参阅[更新的小提琴示例](http://jsfiddle.net/basillicum/5uj2b/)和[扩展的小提琴示例](http://jsfiddle.net/basillicum/5uj2b/3/)。

# iphone - 将数据 Iphone 发送到 PHP NSUTF8StringEncoding

> ID：15249710
> 
> 赞同：0
> 
> 时间：2013-03-06T14:18:14.743
> 
> 标签：iphone, ios, xcode, ios6, nsurlconnection

我正在关注在线视频教程，将数据发送到 php 文件，然后将其存储在数据库中。

我真的很困惑它是如何工作的，因为没有帖子？它只是从变量中收集信息。我很少有 youtube 评论说同样的话，但有些他的作品如何？

到目前为止我的代码...

```
- (IBAction)Submit:(id)sender {

    NSString *strURL = [NSString stringWithFormat:@"http://www.bigwavemedia.co.uk/ios/contact.php?name=%@", nameField.text];

    //to execute php code
    NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];

    NSString *strRes = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding];

    NSLog(@"%@", strRes);  
} 
```

当我点击提交按钮时，尽管它已链接，但我没有得到任何回应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:43:14.663

在您的情况下，您需要创建[`NSURLConnection`](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)与服务器的通信。

```
NSString *strURL=[NSString stringWithFormat:@"http://www.bigwavemedia.co.uk/ios/contact.php?name=%@", nameField.text];

NSURL *url=[NSURL URLWithString:strURL];
self.request=[NSURLRequest requestWithURL:url];

self.nsCon=[[NSURLConnection alloc] initWithRequest:request delegate:self];

            if(self.nsCon)
                self.receivedData=[[NSMutableData alloc] init];
            else
            {
                UIAlertView *alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Error",@"") message:NSLocalizedString(@"Not Connected Other View !!",@"") delegate:nil cancelButtonTitle:NSLocalizedString(@"OK",@"") otherButtonTitles:nil];
                [alert show];
                [alert release];
            } 
```

`NSURLConnection`并且 Write 需要上述链接中描述的委托方法。

# javascript - 如何在dojo中调用另一个方法的父方法

> ID：15249717
> 
> 赞同：2
> 
> 时间：2013-03-06T14:18:31.843
> 
> 标签：javascript, dojo

我如何在 dojo 中调用另一个方法的父方法。考虑以下示例：

```
var parent = declare(null,{

m1: function(arg){
console.log("parent.m1");
},
m2: function(arg){
console.log("parent.m2");
}

});`enter code here`

var child = declare(parent,{

m1: function(arg){
console.log("child.m1");
// how can i call parent.**m2** here directly without calling child.m2
},
m2: function(arg){
console.log("child.m2");
}

}); 
```

我怎么能直接从 child.m1 调用 parent.m2 而不调用 child.m2

现在假设我定义两个模块如下：

```
parentModule.js

    var parent = declare(null,{

    m1: function(arg){
    console.log("parent.m1");
    },
    m2: function(arg){
    console.log("parent.m2");
    }

    });
    return declare("ParentModule",[parent,child]);
//******************************************//
childModule.js

    return declare("child",null,{

    m1: function(arg){
    console.log("child.m1");
    // how can i call parent.**m2** here directly without calling child.m2
    //if we call ParentModule.prototype.m2.call(this,arguments); this will call child.m2
    //as child module override the parent now
    //also calling this.getInherited("m2",arguments); will call child.m2 !!!
    //how to fix that?
    },
    m2: function(arg){
    console.log("child.m2");
    }

    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T19:25:34.340

使用dojo的declare时可以`this.inherited(arguments)`在子函数中使用调用父函数，见：

[http://dojotoolkit.org/reference-guide/1.8/dojo/_base/declare.html#dojo-base-declare-safemixin](http://dojotoolkit.org/reference-guide/1.8/dojo/_base/declare.html#dojo-base-declare-safemixin)

```
m1: function (arg) {
    console.log("child.m1");
    this.inherited(arguments);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T14:47:14.743

您可以使用 javascript 的原型功能来完成您的要求。

```
m1: function(arg){
    console.log("child.m1");
    parent.prototype.m2.apply(this, arguments);
}, 
```

更多关于原型的信息可以在这里找到[JavaScript .prototype 是如何工作的？](https://stackoverflow.com/questions/572897/how-does-javascript-prototype-work)

这是此工作的示例 [http://jsfiddle.net/cswing/f9xLf/](http://jsfiddle.net/cswing/f9xLf/)

# android - 在android中更新地图标记

> ID：15249720
> 
> 赞同：8
> 
> 时间：2013-03-06T14:18:39.130
> 
> 标签：android, android-mapview, google-maps-markers, marker

使用 Google Maps Android API v2，我可以通过`Marker`从 hashMap 获取然后调用来更新我的标记位置：

```
Marker marker = hashMap.get(someId);
marker.setTitle("Title");
marker.setSnippet("Snippet");
marker.setPosition(new LatLng(newLatitude, newLongitude)); 
```

但是，如果在调用此标记时选择了标记，则仅当我单击标记并重新选择它时，标题和片段才会更新。反正有没有告诉地图刷新标记气泡中的数据？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-30T01:09:00.147

立即调用`hideInfoWindow()`，然后调用`showInfoWindow()`，如下所示：

```
marker.hideInfoWindow();
marker.showInfoWindow(); 
```

# ms-access - Excel 工作表名称不允许使用 VBA 将数据导入 Access - DAO

> ID：15249722
> 
> 赞同：4
> 
> 时间：2013-03-06T14:18:50.890
> 
> 标签：ms-access, vba, dao

我的目标是将一些数据从 Excel 文件导入 Access DB。为了做到这一点，我像这样使用 DAO：

```
Debug.Print "Starting process to import the " & numberOfDaysToImport & " missing days"
Set sourceDB = OpenDatabase(c_sourceFile_austrianNetImports, False, True, "Excel 8.0;")
DoEvents
Set rs = sourceDB.OpenRecordset(c_sqlRetrieveAustriaNetImports)
Debug.Print "Recordset Field Count = " & rs.Fields.Count 
```

`c_source_austrianNetImports`和`c_sqlRetrieveAustriaNetImports`分别是包含 Excel 源文件路径和用于检索数据的 SQL Select 语句的字符串变量。

我的问题是，当 Excel 源文件的工作表名称以下划线结尾时，SQL Select 查询不起作用并且 VBA 崩溃。例如，如果我要从中检索数据的工作表被调用，`EEX_EXC_Scheduled_PWR_AUT_H1_A_`然后VBA 崩溃并显示消息`c_sqlRetrieveAustriaNetImports``SELECT * FROM [EEX_EXC_Scheduled_PWR_AUT_H1_A_$A1:H65536]`

*   运行时错误“3011”Microsoft jet 数据库引擎找不到对象“EEX_EXC_Scheduled_PWR_AUT_H1_A_$A1:H65536”确保该对象存在并且您正确拼写了它的名称和路径名。

如果我通过删除最后的下划线来修改工作表的名称和 SQL 语句，那么它可以工作。我也尝试通过使用打开记录集

```
Set rs = sourceDB.OpenRecordset("Sheet$13") 
```

但我仍然收到相同的错误消息。

我不允许修改工作表的名称。如何使用原始名称（末尾包含 _ 的名称）获取数据？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-03T18:21:41.253

您应该能够以不同的名称保存电子表格。我在导入 CSV 文件时这样做，但使用 Excel 文件实际上更容易：

```
bRename = false
while right(c_source_austrianNetImports) = "_" ' rename workbook
    c_source_austrianNetImports = left(c_source_austrianNetImports,len(c_source_austrianNetImports-1)
    bRename = True
wend 
if bRename then 
    ActiveWorkbook.SaveAs c_source_austrianNetImportst, xlWorkbookNormal 
endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-20T15:18:49.020

如果您能够导入命名范围而不是工作表，那就可以了。我有一个每天导入的电子表格，其中工作表的名称是日期（每天更改），但表格是一个命名范围。

如果它不是命名范围，您可以创建代码来创建命名范围，保存，然后导入您创建的范围。

# mysql - 外键语法

> ID：15249730
> 
> 赞同：5
> 
> 时间：2013-03-06T14:19:20.183
> 
> 标签：mysql, database, database-design

我首先创建了教师表，它的描述是

```
 mysql> desc teacher;
   +--------------+-------------+------+-----+---------+-------+
   | Field        | Type        | Null | Key | Default | Extra |
   +--------------+-------------+------+-----+---------+-------+
   | TEACHER_ID   | varchar(3)  | NO   | PRI | NULL    |       |
   | TEACHER_NAME | varchar(40) | YES  |     | NULL    |       |
   +--------------+-------------+------+-----+---------+-------+ 
```

在我创建了一个如下的新表之后。我的需要是在下表中我想`TEACHER_ID`用作外键。我写了以下内容。我不知道它是否在语法上是错误的。但我没有得到任何错误...

```
 mysql> CREATE TABLE SUB_MCA_TY
->  (SUB_ID VARCHAR(4) PRIMARY KEY,
->  SUB_NAME VARCHAR(30),
-> TEACHER_ID VARCHAR(3) REFERENCES TEACHER(TEACHER_ID)); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-06T14:28:34.640

“内联”外键*总是*被 MySQL 默默地忽略，即使是 InnoDB（欢迎来到 MySQL 美妙的一致性世界......）

您需要在列之后将其更改为显式约束：

```
CREATE TABLE SUB_MCA_TY
(
   SUB_ID VARCHAR(4) PRIMARY KEY,
   SUB_NAME VARCHAR(30),
   TEACHER_ID VARCHAR(3),
   foreign key (TEACHER_ID) REFERENCES TEACHER(TEACHER_ID)
); 
```

[从手册中引用](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)：

> *MySQL 不识别或不支持“inline REFERENCES 规范”（定义在 SQL 标准中），其中引用被定义为列规范的一部分*

# php - 提取 $_GET 变量的特定部分或 URL 本身

> ID：15249731
> 
> 赞同：3
> 
> 时间：2013-03-06T14:19:24.987
> 
> 标签：php

得到这个东西的用户来到我的网站，他们每次都有新的 url 变量，但结尾总是相同的 /dp/Random ID/

```
http://mywebsite.com/?source=text&keyword=site.com/random-text/dp/10505/ 
```

所以我要保存的是 /dp/this id/ 我想使用类似的东西：

```
 $keywword = $_GET['keyword']; 
```

还有一些如何像在正则表达式中那样提取随机 ID，您可以找到 /dp/ 和 / 之间的内容，并将其保存到 $id 之类的变量中，以便以后使用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T14:23:18.180

您可以执行以下操作：

```
$keyword = $_GET['keyword'];
$foo     = explode('/', $keyword);
$id      = $foo[3]; 
```

[`DEMO:`http://codepad.org/CcOcwDa6](http://codepad.org/CcOcwDa6)

* * *

我还打算建议一个 regExp 解决方案：

```
preg_match('/dp\/([^\/]+)\//', $url, $matches);
$id = $matchs[1]; 
```

regExp 解决方案的好处是，如果您的`keyword`参数发生更改，只要您要查找的 id 前面有`dp/`.

[`DEMO:`http://ideone.com/xqXU2b](http://ideone.com/xqXU2b)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T14:25:19.263

或使用正则表达式：

```
if (preg_match('/^.*\/dp\/([0-9]+)\/?$/i', $_GET['keyword'], $matches))
    var_dump($matches[1]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T14:28:22.790

也许这会成功：

```
$keyword = $_GET['keyword'];
$id = preg_replace('#^(?:.+)?\/dp\/([0-9]+)\/(?:.+)?$#', '$1', $keyword); 
```

# javascript - jQuery 在大型项目列表上渲染动画花费的时间太长

> ID：15249739
> 
> 赞同：2
> 
> 时间：2013-03-06T14:19:48.177
> 
> 标签：javascript, jquery, each

在我当前的项目中，我有一个包含项目行的表。每个项目都有一个隐藏的复选框，在该复选框上执行动画，如下所示：

```
$('.elemToShow').each(function(){
    $(this).show('fast');
}); 
```

问题在于，随着项目列表变得越来越大，该函数需要花费大量时间来渲染，以至于它只是在一段时间后“弹出”在屏幕上，而不是按预期显示动画。

有什么方法可以执行这个函数，让它不管列表大小如何都可以动画？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T14:21:16.190

这里不需要循环的开销，jQuery 已经`each`基于该选择器执行了一个。尝试这个：

```
$('.elemToShow').show('fast'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:15:25.953

我认为这可能有效。

Javascript：

```
function showCheckbox(element, elementClass, parentClass) {
    var $element = element;

    $element.show(200, function() {
        var $next = $(this).closest(parentClass).find(elementClass+':hidden').first();

        if ($next[0]) {
            showCheckbox($next, elementClass, parentClass);
        }
    })
}

showCheckbox($('.element:first'), '.element', 'tr'); 
```

这是HTML

```
<table>
<tr>
    <td>
        <input type="checkbox" class="element" />
    </td>
    <td>
        <input type="checkbox" class="element" />
    </td>
    <td>
        <input type="checkbox" class="element" />
    </td>
    <td>
        <input type="checkbox" class="element" />
    </td>
    <td>
        <input type="checkbox" class="element" />
    </td>
    <td>
        <input type="checkbox" class="element" />
    </td>
    <td>
        <input type="checkbox" class="element" />
    </td>
    <td>
        <input type="checkbox" class="element" />
    </td>
</tr> 
```

CSS：

```
.element {display:none} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:08:08.580

如果旧浏览器不支持它不是世界末日，请尝试以下 CSS：

```
.elemToShow {
    animation: fadein 0.5s ease;
}
@keyframes fadein {from{opacity:0} to{opacity:1}} 
```

删除 jQuery 淡入。通过让浏览器处理淡入淡出，它应该会更流畅。

（请注意，Chrome 仍然使用`-webkit-animation`和`@-webkit-keyframes`前缀版本，但这会改变下一个版本）

# jscript - 如何列出类/对象的所有方法？

> ID：15249741
> 
> 赞同：2
> 
> 时间：2013-03-06T14:19:56.273
> 
> 标签：jscript, jscript.net

如何在 jscript.net 中列出类或对象的所有可用方法？甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:21:53.127

我想这在一定程度上是可能的。它可能需要使用`/fast-`. 任何标准的对象自省工具都是一个很好的起点。您是否有想要遍历的特定对象？

有很多关于[Javascript Introspection](http://www.syger.it/Tutorials/JavaScriptIntrospector.html)的好文章，这就是其中之一，包括[StackOverflow 上](https://stackoverflow.com/questions/275351/javascript-reflection)的这篇文章。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T14:36:04.723

你的答案在这里[链接](http://msdn.microsoft.com/en-us/library/667a3hk6%28v=vs.71%29.aspx)

您可以列出类或对象的所有可用方法

# c++ - 关联数组的含义是什么？

> ID：15249743
> 
> 赞同：11
> 
> 时间：2013-03-06T14:20:01.320
> 
> 标签：c++, data-structures, associative-array

我正在阅读 C++ 标准库：教程和参考书。在地图示例中：

```
 typedef map<string,float> StringFloatMap;
   StringFloatMap coll;

   //insert some elements into the collection
   coll["VAT"] = 0.15;
   coll["Pi"] = 3.1415;
   coll["an arbitrary number"] = 4983.223;
   coll["Null"] = 0; 
```

作者说：

> 在这里，索引被用作键并且可以具有任何类型。这是关联数组的接口。关联数组是索引可以是**任意类型**的数组。

任何人都可以向我解释，关联数组中的**任意类型是什么意思？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T14:22:16.240

数组通常由元素的位置索引。一个简单的数组- `int x[10]`, 有它的元素`x[0] ... x[9]`。索引是一个无符号整数值。

关联容器意味着索引可以是任意（不一定是无符号整数）类型（在本例中为`std::string`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T14:22:44.550

区别在于向量/数组之间，大多数人将其称为*序列容器*，但实际上可以将其视为*关联容器*，其键是从 0 到 N 的完整整数范围。

另一方面，映射不会对键施加这样的限制，它们可以是字符串、整数、您想要的任何类型（当然前提是该类型上有一个合理的相等比较运算符）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T14:23:58.767

这意味着您可以创建一个将任意键类型与任意值类型匹配的映射。

您可以创建将 s 映射`std::string`到`float`s、`short`s 到`YourClass`es 或`YourOtherClass`到的映射`YetAnotherClass`。

您甚至可以创建一个`std::map<void *, void *>`可以将任何指针映射到任何其他指针的指针。尽管这会产生疑问，因为没有办法找出指针指向的数据的类型。

# android - 如何从原始文件夹中获取文件到列表视图？

> ID：15249748
> 
> 赞同：4
> 
> 时间：2013-03-06T14:20:22.823
> 
> 标签：android, list, mp3

喜欢这个代码..

```
public class SongsManager {
// SDCard Path
final String MEDIA_PATH = new String("/sdcard/");//this will I switch to raw folder..

private ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

// Constructor
public SongsManager(){

}

/**
 * Function to read all mp3 files from sdcard
 * and store the details in ArrayList
 * */
public ArrayList<HashMap<String, String>> getPlayList(){
    File home = new File(MEDIA_PATH);

    if (home.listFiles(new FileExtensionFilter()).length > 0) {
        for (File file : home.listFiles(new FileExtensionFilter())) {
            HashMap<String, String> song = new HashMap<String, String>();
            song.put("songTitle", file.getName().substring(0, (file.getName().length() - 4)));
            song.put("songPath", file.getPath());

            // Adding each song to SongList
            songsList.add(song);
        }
    }
    // return songs list array
    return songsList;
} 
```

但从原始文件中读取...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T14:23:29.437

试试看：

```
public void getRawFiles(){
    Field[] fields = R.raw.class.getFields();
    // loop for every file in raw folder
    for(int count=0; count < fields.length; count++){

        int rid = fields[count].getInt(fields[count]);

        // Use that if you just need the file name
        String filename = fields[count].getName();

        // Use this to load the file
        try {
            Resources res = getResources();
            InputStream in = res.openRawResource(rid);

            byte[] b = new byte[in.available()];
            in.read(b);
            // do whatever you need with the in stream
        } catch (Exception e) {
            // log error
        }
    }
} 
```

顺便说一句，可能与您的问题并不完全相关，但是如果您想从 SD 卡中读取数据，则不应编写硬编码路径。它不适用于许多设备。您应该改用它：

```
String sdcard = Environment.getExternalStorageDirectory(); 
```

**更新：**

看起来您正在尝试使用文件名及其相应路径构建哈希映射。这可能对 sd 卡中的通用文件有意义，但不适用于 raw 或 assets 文件夹中的文件。这是因为它们包含在您的 apk 中，这基本上是一个 zip 文件。这意味着访问 apk 中的文件并不容易（尽管可以使用一些解压缩工具）。

由于您没有确切地说出您需要什么，因此很难知道。您可以使用上面的代码获取原始文件夹中的文件名并将它们显示在列表中。此外，您可以保存资源 ID。如果用户单击一个项目，您将获得该项目的资源 ID 并使用 InputStream 加载文件，如上面的代码中所示。您不能像示例中那样使用 File 类（因为正如我所说，它们不是真正的文件），但您可以使用 android Resources 类通过 InputStream 读取原始资产。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T14:27:32.437

```
/**
   * Method to read in a text file placed in the res/raw directory of the
   * application. The method reads in all lines of the file sequentially.
 */

public static void readRaw(Context ctx,int res_id) {

InputStream is = ctx.getResources().openRawResource(res_id);
InputStreamReader isr = new InputStreamReader(is);
BufferedReader br = new BufferedReader(isr, 8192); // 2nd arg is buffer
                                                    // size

// More efficient (less readable) implementation of above is the
// composite expression
/*
 * BufferedReader br = new BufferedReader(new InputStreamReader(
 * this.getResources().openRawResource(R.raw.textfile)), 8192);
 */

try {
    String test;
    while (true) {
        test = br.readLine();
        // readLine() returns null if no more lines in the file
        if (test == null)
            break;
    }
    isr.close();
    is.close();
    br.close();
} catch (IOException e) {
    e.printStackTrace();
 }
 } 
```

# c# - 是否可以从空变量开始联合？

> ID：15249750
> 
> 赞同：1
> 
> 时间：2013-03-06T14:20:34.057
> 
> 标签：c#, .net, linq, union, var

我需要类似的东西：

```
var myList;

foreach (MyObject myObject in myObjects)
{
    myList = myList.Union(myObject.Items.Cast<Item>());
} 
```

但似乎我无法初始化一个空变量。解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T14:23:20.447

`var`不是那样工作的，它使用类型推断来根据等号之后的内容分配类型。

`myList` **此外，当您在初始化它之前**尝试访问时，这会引发空异常（它会是`null`）。试试这个：

```
IEnumerable<Item> myList = myObjects.SelectMany(m => m.Items.Cast<Item>()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T14:24:29.587

`Union`考虑到您正在使用它`IEnumerable<Item>`内部，返回与它相同的类型，然后：

```
var myList = Enumerable.Empty<Item>(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T14:24:36.200

这不是问题`Union`- 这是尝试从*任何*未初始化的局部变量中读取的问题。

你可以使用：

```
var myVar = Enumerable.Empty<Item>(); 
```

...或者只是使用`SelectMany`mattytommo 所示的方法，可能需要调用来`Distinct()`获取不同的元素（就像`Union`那样）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T14:24:31.713

您必须指定变量的类型，并且必须从一个空集合开始，例如：

```
IEnumerable<Item> myList = new List<Item>(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T14:24:33.727

编译器无法知道您要创建的类型，所以

```
var myList; 
```

不足以告诉编译器有什么类型`myList`。你可以做

```
List<Item> myList; 
```

但是调用`.Union`会给你一个 NullReferenceException。

那么为什么不从一个空列表开始呢

```
List<Item> myList = new List<Item> 
```

还是一个 IEnumerable？

```
IEnumerable<Item> myEnumerable = Enumerable.Empty<Item>() 
```

# excel - 从 Excel 导入到 Access 备注字段时截断的数据

> ID：15249753
> 
> 赞同：10
> 
> 时间：2013-03-06T14:20:39.003
> 
> 标签：excel, ms-access, truncate, truncation

当我附加 Excel 文件时，Access 会截断几个备注字段中的数据。Access 表中的字段已设置为备注类型。我认为问题在于我在某些备忘录字段的前几行中没有任何条目。Access 假设数据是一个文本字段，即使我已经将它设置为备忘录类型。

我尝试附加为 CSV。不工作。

我已将虚拟数据放在超过 255 个字符限制的第一行，如果我这样做，数据不会被截断。

我不想每次必须导入 Excel 文件时都输入虚拟数据。这是一个至少每两周完成一次的过程，可能更频繁。我想建立一种简单的方法来为使用同一数据库的未来员工导入数据。有任何想法吗？

**更新：**即使前几行中有虚拟数据，当我导入 Excel 文件时，Access 也会截断 10 个备忘录字段中的 3 个的数据（虚拟数据的字符长度为 785）。现在我真的无所适从。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-30T19:10:51.123

已经有一段时间了，但我遇到了和你一样的问题。

经过一番挖掘，我发现[微软的奇妙世界是这样解释的](http://office.microsoft.com/en-us/access-help/import-or-link-to-data-in-an-excel-workbook-HA010341760.aspx)：

> 为避免在导入过程中出错，请确保每个源列的每一行都包含相同类型的数据。Access 扫描前八个源行以确定表中字段的数据类型。我们强烈建议您确保前八个源行不要在任何列中混合不同数据类型的值。否则，Access 可能不会为列分配正确的数据类型。

显然，这意味着当将 excel 文件**附加**到现有表时，即使列被格式化并保存为备注字段，如果 excel 文件中的所有 8 行都小于 256 个字符，Access 假定您*实际上*是要指定文本，从而在 255 个字符后截断剩余的行。我已经执行了几个测试，将“虚拟”行放在前 8 行中，每个测试都触发了超过 255 个字符的导入。

现在，如果您**导入到新表**，向导允许您选择所有格式选项。

如果您可以覆盖表中已有的所有数据，那么导入新表会很方便。但是，如果您确实需要追加，我建议您导入临时表，然后从那里追加。一个简单的方法是保存导入，然后从 VBA 执行它，就像[Elliot_et_al 想做的那样](http://social.msdn.microsoft.com/Forums/en-US/b3d79f78-d287-43ff-8ec8-c7d2f2925810/run-a-saved-import-spec-from-vba-code)。然后，您也可以在 VBA 中运行附加查询。如果你正确设置你的桌子，你可能会逃脱

```
INSERT INTO [MyTable]
SELECT [MyTable_temp].*
FROM [MyTable_temp]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-11T16:02:14.803

对于它的价值....我在 Access 2013 中遇到了类似的问题 - 它在从 XLS 导入时将字段截断为 255 个字符，即使导入向导选择 LONG TEXT 作为字段，甚至当我的字段具有 >前几行 255 个字符。

一位同事建议我链接电子表格而不是导入新表，问题就消失了。我还根据链接的表创建了一个新表，一切都很好。

**编辑添加**：在 Access 2013 中，如果您已经将 XLS 文件导入 Access 并且无法返回到它尝试首先链接，请尝试以下操作：

转到表格的设计视图，转到该屏幕底部的字段属性并将长文本“文本格式”设置为“富文本”。就在今天，我发现这使我不必重新创建几个月前从 excel 导入的表格，并发现即使我将“注释”列设置为长文本，它仍然会截断我手动的文本无论如何输入 255 个字符。切换到富文本使该文本可见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-01T16:46:01.170

我使用 excel 与外部合作伙伴进行交流，并将他们的报告捕获到访问数据库中。我发现最好的方法是在工作表中插入一个“虚拟”第一行，该行在用户填充的数据可能超过 255 个字符的任何给定列中包含超过 255 个字符。

这样，当我导入数据时，它总是会导入所有文本，然后我可以简单地从数据库表中删除“虚拟”行。

我经常使用从我的访问数据库链接到的“导入模板”工作簿。我将模板页面设置为在链接之前格式化为表格（以便导入包含所有数据而无需每次都指定范围），并将第一个“虚拟”行隐藏在那里。

通过这种方式，我可以简单地将数据复制并粘贴到导入模板中，然后运行数据库查询以将数据导入（并在必要时转换）到数据库中，然后再进行第二次查询以删除“虚拟”记录。

希望这可以帮助..？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-19T12:29:00.560

Excel 和 Access 很古怪。显然，将 Excel 或 CSV 附加到具有与长文本相同属性的现有 Access 表的末尾是一个问题。附加数据会将所有长文本默认为短文本。解决方法是将数据输出到 Excel，将数据附加到一个表中，然后将其作为新表导入 Access 中。无论您做什么，Access 都无法将附加数据视为短文本而不是长文本。

请确保在使用导入向导将列的属性更改为长文本时。

我希望这有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-29T22:50:24.403

我在 MS Access 2013 中遇到了同样的问题。当我导入一个列文本大于 255 个字符的 Excel 表时，它被截断了。我做了很多研究，终于找到了解决方法。实际上，MS Access 数据库如何根据第一条记录列的文本长度确定文本的大小并为后续记录固定该长度。如果它的长度 < 255，访问会自动将进一步的记录长度限制为 255 大小或第一个记录列的长度。我确保第一条记录具有所有记录文本列（已排序）的最大长度，然后导入它对我来说效果很好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-21T15:00:22.903

我在使用 Access 2010 时遇到了同样的问题。在发现 Access 查看前 25 条记录以确定导入时每列的数据类型后，我发现了两种不同的解决方法。

1.  按列长度降序对导入记录进行排序。这意味着某些列中大于 255 个字符的记录将位于前 25 条记录中。然后，Access 能够在不截断的情况下导入这些记录。
2.  创建了将列数据类型指定为备注的链接表，然后附加到表中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-17T19:24:40.480

过去我很幸运地使用了上面提供的富文本解决方案以及使用“虚拟行”作为导入的第一条记录。谢谢你！但是，今天我想我遇到了一个更有效/更一致的导入解决方案，你会重复很多次。我在 Access 2007 中试过这个。

使用导入向导，就像将数据导入新表一样。浏览所有设置您的规格的屏幕。最重要的是，在繁琐的字段选项/数据类型区域中检查或指定每个字段的数据类型（对于我最近的文本文件，这是导入文本向导的第三个屏幕）——请务必在此处指定您的备注字段。（别担心，你只需要这样做一次！）

当您到达最终的“这就是向导需要的所有信息...”屏幕时，请在左下方查找“高级...”按钮。这会弹出一个屏幕，总结您刚刚所做的一切。在右侧查找“另存为...”。使用有用的名称保存这些规范。（您可以通过单击下面的“规格...”来确认您已保存规格。）单击“确定”以离开高级屏幕。

如果您实际上不需要创建新表，现在可以取消向导。接下来——从现在开始，你每次都可以这样做以避免截断——使用“将记录的副本附加到表...”进入正常的导入向导，在向导中，你应该会看到相同的内容“高级...”按钮。打开它，单击“规格...”，然后双击您保存的规格。说“确定”退出“高级”并完成向导。这应该告诉 Access 将您的备注字段保留为备注字段！

将 CSV 导入现有表时，我发现在进入“高级”屏幕之前需要通过几个正常的向导屏幕（例如指定文本限定符）。不知道为什么这会让它开心，仅供参考。

我希望这可以帮助像我一样遇到字段截断导入错误的其他人！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-28T15:57:00.927

在许多情况下，您只需将备注字段的文本格式从普通文本更改为 RTF，现在如果您打开表格数据，您可以看到所有导入的文本

# java - 使用 StringBuilder 的回文检查器

> ID：15249754
> 
> 赞同：5
> 
> 时间：2013-03-06T14:20:39.410
> 
> 标签：java, stringbuilder, palindrome

我试图创建一个回文检查器。我正在使用 StringBuilder 并且我发现附加空格有点棘手。

## 编辑：除了使用 .reverse() 还有其他方法吗？感谢您的回答。:D

当单词没有空格时，此代码有效：

```
public String palindrome (String anyString) {

StringBuilder sb = new StringBuilder();

for (int i = anyString.length()-1; i>=0; i--) {
        sb.append(anyString.charAt(i));
}

String string2 = sb.toString();

return string2;
} 
```

当输入的单词有空格时；它返回一个字符串，其中包含直到第一个空格的字符。

例如：

```
word = "not a palindrome"
palindrome(word) = "emordnilap" 
```

***预期***=“emordnilap一吨”

* * *

我试过插入

```
if (anyString.charAt(i) != ' ')
    sb.append(anyString.charAt(i));
else 
    sb.append(' '); 
```

在代码的中间，但它不起作用。

多谢你们！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T14:22:21.863

改用[`StringBuilder.reverse()`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html#reverse%28%29)方法，它工作[得更快（1378行）](http://kickjava.com/src/java/lang/AbstractStringBuilder.java.htm)，更正确

```
StringBuilder sb = new StringBuilder("not a palindrome");
System.out.println(sb.reverse()); 
```

*输出：*

> emordnilap一吨

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T14:23:21.663

该`reverse`方法已经内置`StringBuilder`

```
public String palindrome (String anyString) {
    StringBuilder sb = new StringBuilder(anyString);
    return sb.reverse().toString();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-26T01:24:38.933

```
public static boolean isPalindromeNaive(String s){
    StringBuilder sb = new StringBuilder(s);
    StringBuilder sbReverse = sb.reverse();
    if (s.equals(String.valueOf(sbReverse))){
        return true;
    }
    return false;
} 
```

似乎不是您要找的东西，但它是完整的方法，仅供参考。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-14T17:11:38.797

这个答案允许你不计算你不想要的字符。

```
public boolean isPalindrome(String s) {
  for (int left = 0, right = s.length()-1; ; left++, right--) {
    while(left < right && !isAcceptableCharacter(s.charAt(left))) {
      left++;
    }
    while(left < right && !isAcceptableCharacter(s.charAt(right))) {
      right++;
    }
    if (left >= right) { return true; }
    if (s.charAt(left) != s.charAt(right)) { return false; }
  }
}

static boolean isAcceptableCharacter(char c) {
  return Character.isLetter(c) || Character.isDigit(c);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2022-01-15T01:53:44.990

此代码有效：

```
public boolean isPalindrome(String word){
    return word.equals(new StringBuilder(word).reverse().toString().trim()) ? true : false;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-19T16:13:34.997

这是最简单的检查方法。

```
import java.util.*;
public class Main {

public static void main(String[] args) {
// write your code here
    Scanner s = new Scanner(System.in);

    System.out.println("Enter the string");

    String st1 = s.nextLine();

    String st2 = Palindrome(st1);
    if (isPalindrome(st1,st2)==true)
    {
        System.out.println("palindrome");
    }
    else {
        System.out.println("Not palindrome");
    }
}

private static String Palindrome(String s) {
    StringBuilder stringBuilder = new StringBuilder(s);
    return String.valueOf(stringBuilder.reverse());
}

private static boolean isPalindrome(String s1, String s2){
    if (s1.equals(s2))
    {
        return true;
    }
    else {
        return false;
    }
}
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-14T16:36:59.640

您应该以全部小写或全部以大写形式传递参数，或者您还可以编写用于转换**String、StringBuffer、StringBuilder的新方法**

//删除空格“\t”制表符和“\n”换行符“\f”的方法...

```
private StringBuilder removeUnwanted(StringBuilder strBuild){
            String str = new String(strBuild);
            str = str.replace("\n","").replace("\t","").replace("\f","").replace(" ","");
            return new StringBuilder(str);
}
public boolean isPal(StringBuilder strBuild){
            int flag = 0;
            strBuild = removeUnwanted(strBuild);
            for(int i = 0;i<strBuild.length()-1;i++){
                    if(strBuild.charAt(i) != strBuild.reverse().charAt(i)){
                            flag = 1;
                            break;
                    }
            }
            if(flag == 0)
                    return true;
            else
                    return false;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-04T03:52:39.730

如果您只想要一个没有 String Builder 的回文检查器

```
private static boolean isPalindrome(String input) {

        for (int i = 0, j = input.length() - 1; j >= i; i++, j--) {
            if (input.charAt(i) != input.charAt(j))
                return false;
        }

        return true;
} 
```

但是 StringBuilder 应该可以工作：

```
private static boolean isPalindrome(StringBuilder input) {
    return input.toString().equals(input.reverse().toString());
} 
```

# runtime - Dijkstra 算法基于复杂度的平均运行时间变化

> ID：15249758
> 
> 赞同：1
> 
> 时间：2013-03-06T14:20:57.063
> 
> 标签：runtime, complexity-theory, path-finding, dijkstra

具有自平衡二叉搜索树的 Dijkstra 算法的复杂度为 O(e * log(n))。这是否意味着在统计中间，e=100 和 n=25 的寻路查询花费的时间是 e=50 和 n=25 的寻路查询的两倍。

这个问题有点激烈，我的观点是关于统计平均运行时间变化的相对比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:32:31.167

我认为这里的数学很简单，`O(E * log(N))`平均运行时间与 E 成正比。 O(n) 实际上可以是`O(n) + C`，所以如果小`n`而显着`C`，`n*2`则不会慢两倍，而是更少：`(2n + C) / (n + C)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:13:48.963

我想你可能会觉得它很有趣： http: [//community.topcoder.com/tc ?module=Static&d1=tutorials&d2=complexity2](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=complexity2)

检查标题“递归树”

# sql - 就像参数“_”一样不起作用

> ID：15249763
> 
> 赞同：-1
> 
> 时间：2013-03-06T14:21:04.293
> 
> 标签：sql, sql-server-2008, sql-like

我正在使用以下命令`SQL Server 2008 R2`来显示第二个字母为“e”的公司名称（c_name）。我没有得到任何结果。

```
select c_name from ind_comp where c_name LIKE '_e' 
```

预期成绩：

```
 Rows 1, 4,7,10 
```

实际：没有返回行

示例表行（表：ind_comp）：

```
Sno c_name          addrs               turnover
1   pesodent        B-12/7 Kolkata      250
2   Colgate         127 Mumbai          519
3   Prestiege       56H Jharkhand       120
4   Relexo          D-45/12 New Delhi   358
5   Bajaj           450, Channai        840
6   TATA            C/90 Bihar          508
7   Reliance        Y-90 New Delhi      700
8   ShaktiBhog      A 120 Punjab        950
9   Kotak Mahindra  B-12 Mumbai         950
10  Pepsi India     5/40 Haryana        600
11  Air India       WZ-90 Goa           1000 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T14:25:55.990

您的查询将仅返回 2 个字符长且以 . 结尾的条目`e`。您需要使用`%`通配符来包含任何长度大于 2 个字符的条目。

```
SELECT c_name FROM ind_comp WHERE c_name LIKE '_e%' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T14:22:28.423

尝试使用

```
select c_name from ind_comp where c_name LIKE '_e%' 
```

# inno-setup - Inno Setup：组件列表中丰富的工具提示

> ID：15249766
> 
> 赞同：3
> 
> 时间：2013-03-06T14:21:20.747
> 
> 标签：inno-setup

如何在安装程序的组件列表中创建自定义工具提示？基本上，当用户将鼠标指针移到组件上时，我需要显示一些富文本（图像、描述）。

这样做的目的是为用户提供有关他将要安装的每个组件的详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:00:36.877

抱歉，Inno Setup 本身无法做到这一点。

# javascript - 如何将插件添加到 jw-player？

> ID：15249772
> 
> 赞同：1
> 
> 时间：2013-03-06T14:21:49.807
> 
> 标签：javascript, flash, jwplayer

我已经阅读了有关如何制作 JWPlayer 插件的信息，这真的很容易。但是，我主要关心的是我应该创建什么类型的插件。

这是我想要完成的事情：

我有一些视频需要编辑。后端编程已经创建，但不是三个选择告诉

```
Start from: 00:00:00 
End at: 00:15:53 
```

我想向 JW Player 添加一个滚动条，开始和结束有两个限制（几乎是在这里完成的：http: [//mp3cut.net/](http://mp3cut.net/)）。我可以用 javascript 制作这个插件还是应该使用动作脚本？

谢谢你的帮助。

*附言。如果有任何插件使它已经开发，那就太好了。我就是找不到...*

# java - android MapActivity 不能扩展

> ID：15249776
> 
> 赞同：-1
> 
> 时间：2013-03-06T14:21:59.870
> 
> 标签：java, android

我遵循这些网站中的所有步骤：

[https://developers.google.com/maps/documentation/android/v1/hello-mapview](https://developers.google.com/maps/documentation/android/v1/hello-mapview)

我还下载了 play-services-sdk。

但是我仍然收到一条错误消息：

```
The import com.google.android.maps cannot be resolved 
```

而且我也不能扩展 MapActivity：

这是我的 manifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.sale"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"/>

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="10" />
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.CAMERA"/>
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <!-- The following two permissions are not required to use
     Google Maps Android API v2, but are recommended. -->
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <permission
        android:name="com.example.mapdemo.permission.MAPS_RECEIVE"
        android:protectionLevel="signature"/>
        <uses-permission android:name="com.example.sale.permission.MAPS_RECEIVE"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

         <uses-library android:name="com.google.android.maps" />  

        <activity
            android:name="com.example.sale.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

              </activity>

         <!--  Entry for RegisterActivity.class -->
        <activity android:name=".RegisterActivity"
                  android:label="Register New Account"></activity>
        <meta-data android:value="@string/app_id" android:name="com.facebook.sdk.ApplicationId"/>
        <activity android:label="@string/app_name" android:name="com.facebook.LoginActivity"></activity>
        <activity android:name=".ProfileActivity" android:label="Profile page"></activity>

        <meta-data
              android:name="com.google.android.maps.v2.API_KEY"
              android:value="AIzaSyDTVRXMTmfe3jZyAlt-87kRgqM8y4TzIto"/>

    </application>

</manifest> 
```

这是我开始创建的 MapActivity（但是它不识别 MapActivity）：

```
package com.example.sale;

import com.google.android.maps.GeoPoint;  
import com.google.android.maps.MapView; 
import com.google.android.maps.MapActivity;

public class SaleMapActivity extends MapActivity {

} 
```

问题是什么？我遵循所有步骤并在谷歌中阅读了很多内容，但没有答案。如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:25:17.600

您将这两个 API 混合在一起，您的代码中有一部分来自 Google Maps API V1，例如：

```
<uses-library android:name="com.google.android.maps" /> 
```

和更多。

还有 API v2 的一部分，你想使用什么 API v2？我建议您坚持使用 Google Maps API V2，我写了一篇关于如何在您的应用中实现 google map API V2 的博客文章，您可以在这里查看：

[谷歌地图 API V2 实施](https://blog-emildesign.rhcloud.com/?p=435)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T10:41:25.707

这非常简单，您不需要下载任何东西，只需在创建新项目时将“编译方式”选项更改为“googleAPIs”即可。

# python - 从 python 脚本创建独立应用程序的最简单方法

> ID：15249780
> 
> 赞同：0
> 
> 时间：2013-03-06T14:22:18.143
> 
> 标签：python, exe

我在这个部门有点菜鸟，所以我想知道从 python 脚本创建独立应用程序的最简单方法（即最少的时间和精力）是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:25:47.373

由于您已标记您的问题`[exe]`，我认为它是特定于 Windows 的。看看[py2exe](http://www.py2exe.org/)：

> py2exe 是一个 Python Distutils 扩展，可将 Python 脚本转换为可执行的 Windows 程序，无需安装 Python 即可运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:27:10.527

在 Windows 中，一个简单的方法是使用[Py2Exe](http://www.py2exe.org/ "Py2Exe")，请参阅[本教程](http://www.logix4u.net/component/content/article/27-tutorials/44-how-to-create-windows-executable-exe-from-python-script "Logix4U 教程")。

# r - R中的连接字符

> ID：15249781
> 
> 赞同：1
> 
> 时间：2013-03-06T14:22:18.810
> 
> 标签：r

我有一组字符“A”“B”“C”，我希望它们成为一个单词“ABC”，没有空格。当我使用

```
paste('A','B','C',collapse='')
[1] "A B C " 
```

我明白了，但是我不想要任何间距。我希望它是“ABC”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T14:23:47.280

使用`sep`代替`collapse`：

```
R> paste('A','B','C',sep='')
[1] "ABC" 
```

使用最新版本的 R，您还可以使用`paste0`效率更高的版本：

```
R> paste0('A','B','C')
[1] "ABC" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T14:28:18.687

你很接近，试试这个：

```
paste(c('A','B','C'),collapse='')
# [1] "ABC" 
```

作为替代解决方案，包`stringr`包含`str_c`将多个字符串连接成单个字符串。所以你可以这样做：

```
 str_c('A','B','C',collapse='')
 # [1] "ABC" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T14:27:46.727

如果你将你的字母连接在一个向量中，那么 collapse 会起作用：

```
 paste(c('A','B','C'), collapse='')
 #[1] "ABC" 
```

# android - Android 上具有客户端身份验证的本地 HTTPS 服务器

> ID：15249786
> 
> 赞同：5
> 
> 时间：2013-03-06T14:22:26.487
> 
> 标签：android, linux, https, openssl, boost-asio

我必须创建一个密钥分发服务器，它只是一个本地服务器，通过他们自己的 API 从 DRM 提供商获取 AES 密钥并将它们返回给连接的客户端。客户端要么是我自己的基于 FFmpeg 库的媒体播放器，要么是原生的 Android 媒体播放器。

我已经在 Windows 上使用 Boost ASIO 库和 OpenSSL 进行了实验——有一个如何创建简单 HTTPS 服务器和客户端的示例。就我而言，我必须仅允许专用应用程序/客户端访问服务器，因此我需要客户端身份验证。有一些事情我不清楚，因为我从来都不是这类事情的专家。

我知道 HTTPS 服务器必须要求客户端进行身份验证，客户端应该发送其证书，然后服务器重新读取并验证证书中的一些数据。问题是：

*   客户需要哪种证书，如何创建？
*   服务器需要哪种证书，如何创建？
*   我可以在哪里存储客户端证书，以便客户端（FFmpeg、Android MediaPlayer）可以访问它？它不能被任何其他应用程序访问。
*   我在哪里可以存储服务器证书？

我所写的所有内容都是在本机级别执行的，即它是由 Linux 共享库实现的。这就是为什么我认为对于 Linux 专家而不是对于普通 Android 开发人员来说这是一个相当大的问题。

有人可以解释一下——用几条子弹，如何做到这一点——如果可能的话？也欢迎任何提示！

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:23:16.180

So, first off, the server does not ask the client for a certificate. It is the other way around. The client can, but not always, request the certificate from the server. From the wording of your question, it sounds like you might not need to use a certificate. See this [link](https://stackoverflow.com/questions/788808/how-do-digital-certificates-work-when-used-for-securing-websites-using-ssl) for more info otherwise. The server does typically need to authenticate the client, but this is usually done through a username / password message that is passed back to the server after a secure connection is in place. You are responsible for writing the code to handle that on both the server and client.

Here is some code that I use to connect to a server via an SSL connection:

```
void SSLSocket::Connect(SSLSocket* psSLS, const string& serverPath, string& port)
{
   // Connects to the server.
   // serverPath - specifies the path to the server.  Can be either an ip address or url.
   // port - port server is listening on.
   //
   try
   {
      boost::shared_ptr<boost::asio::io_service> IOServ(new boost::asio::io_service);
      IOService = IOServ; // Defined the same way in the class
      Locking CodeLock(SocketLock); // Single thread the code.
      // If the user has tried to connect before, then make sure everything is clean before trying to do so again.
      if (pSocket)
      {
         delete pSocket;
         pSocket = 0;
      }                                                                                                  
      // Create the resolver and query objects to resolve the host name in serverPath to an ip address.
      boost::asio::ip::tcp::resolver resolver(*IOService);
      boost::asio::ip::tcp::resolver::query query(serverPath, port);
      boost::asio::ip::tcp::resolver::iterator EndpointIterator = resolver.resolve(query);
      // Set up an SSL context.
      boost::asio::ssl::context ctx(*IOService, boost::asio::ssl::context::tlsv1_client);
      // Specify to not verify the server certificiate right now.
      ctx.set_verify_mode(boost::asio::ssl::context::verify_none);
      // Init the socket object used to initially communicate with the server.
      pSocket = new boost::asio::ssl::stream<boost::asio::ip::tcp::socket>(*IOService, ctx);
      //
      // The thread we are on now, is most likely the user interface thread.  Create a thread to handle all incoming and outgoing socket work messages.
      if (!RcvThreadCreated)
      {
         WorkerThreads.create_thread(boost::bind(&SSLSocket::RcvWorkerThread, this));
         RcvThreadCreated = true;
         WorkerThreads.create_thread(boost::bind(&SSLSocket::SendWorkerThread, this));
      }
      // Try to connect to the server.  Note - add timeout logic at some point.
      // This is an async method and will return right away.  When it completes, the
      // SSLSocket::HandleConnect method will be called and will contain error info to
      // identify if a successful connection was made or not.
      boost::asio::async_connect(pSocket->lowest_layer(), EndpointIterator,
         boost::bind(&SSLSocket::HandleConnect, this, boost::asio::placeholders::error));
}

void SSLSocket::HandleConnect(const boost::system::error_code& error)
{
   // This method is called asynchronously when the server has responded to the connect request.
   std::stringstream ss;
   try
   {
      if (!error)
      {
         pSocket->async_handshake(boost::asio::ssl::stream_base::client,
            boost::bind(&SSLSocket::HandleHandshake, this, boost::asio::placeholders::error));
         ss << "SSLSocket::HandleConnect: From worker thread " << Logger::NumberToString(boost::this_thread::get_id()) << ".\n";
         Log.LogString(ss.str(), LogInfo);
      }
      else
      {
         // Log an error.  This worker thread should exit gracefully after this.
         ss << "SSLSocket::HandleConnect: connect failed to " << sClientIp << " : " << uiClientPort << ".  Error: " << error.message() + ".\n";
         Log.LogString(ss.str(), LogError);
         Stop();
      }
   }
   catch (std::exception& e)
   {
      stringstream ss;
      ss << "SSLSocket::InitAsynchIO: threw an error - " << e.what() << ".\n";
      Log.LogString(ss.str(), LogError);
      Stop();
   }
}

void SSLSocket::HandleHandshake(const boost::system::error_code& error)
{
   // This method is called asynchronously when the server has responded to the handshake request.
   std::stringstream ss;
   try
   {
      if (!error)
      {
         // Try to send the first message that the server is expecting.  This msg tells the server we want to connect.
         // The first 4 bytes specifies the msg length after the first 4 bytes.  The next 2 bytes specifies the msg type.
         // The next 4 bytes specifies the source code.  The next 13 bytes specifies the msg "AttackPoker".
         // The next 2 bytes specifies the locale length.  The last 2 bytes specifies the locale - en for English.
         //
         unsigned char Msg[27] = {0x17, 0x00, 0x00, 0x00, 0x06, 0x00, 0x01, 0x00, 0x00, 0x00, 0x0b, 0x00, 0x41,
            0x74, 0x74, 0x61, 0x63, 0x6b, 0x50, 0x6f, 0x6b, 0x65, 0x72, 0x02, 0x00, 0x65, 0x6e};
         boost::system::error_code Err;

         sClientIp = pSocket->lowest_layer().remote_endpoint().address().to_string();
         uiClientPort = pSocket->lowest_layer().remote_endpoint().port();
         ReqAlive = true;
         // boost::asio::async_write(*pSocket, boost::asio::buffer(Msg), boost::bind(&SSLSocket::HandleFirstWrite, this,
         //   boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
         int Count = boost::asio::write(*pSocket, boost::asio::buffer(Msg), boost::asio::transfer_exactly(27), Err);
         if (Err)
         {
            ss << "SSLSocket::HandleHandshake: write failed - " << error.message() << ".\n";
            Log.LogString(ss.str(), LogInfo);
         }
         HandleFirstWrite(Err, Count);
         // boost::asio::async_write(pSocket, boost::asio::buffer(Msg, 27), boost::bind(&SSLSocket::HandleWrite, this,
         // boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
         ss.str("");
         ss << "SSLSocket::HandleHandshake: From worker thread " << boost::this_thread::get_id() << ".\n";
      }
      else
      {
         ss << "SSLSocket::HandleHandshake: failed - " << error.message() << ".\n";
         IOService->stop();
      }
      Log.LogString(ss.str(), LogInfo);
   }
   catch (std::exception& e)
   {
      stringstream ss;
      ss << "SSLSocket::HandleHandshake: threw an error - " << e.what() << ".\n";
      Log.LogString(ss.str(), LogError);
      Stop();
   }
}

void SSLSocket::HandleFirstWrite(const boost::system::error_code& error, size_t bytesTransferred)
{
   // This method is called after a msg has been written out to the socket.
   std::stringstream ss;
   try
   {
      if (!error)
      {
         // boost::asio::async_read(pSocket, boost::asio::buffer(reply_, bytesTransferred), boost::bind(&SSLSocket::handle_read,
         //   this, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
         // boost::asio::async_read(pSocket, boost::asio::buffer(reply_, 84), boost::bind(&SSLSocket::handle_read,
         //   this, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
         // Locking CodeLock(ReadLock); // Single thread the code.
         // Signal the other threads that msgs are now ready to be sent and received.
         // boost::asio::async_read(pSocket, boost::asio::buffer(pRepBuf), boost::asio::transfer_exactly(4), boost::bind(&SSLSocket::HandleRead,
         //  this, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
         //
         // Notify the UI that we are now connected. - TBD
         // Get the 1st 4 bytes of the next msg, which is always the length of the that msg.
         pDataBuf = BufMang.GetPtr(MsgLenBytes);

         // int i1=1,i2=2,i3=3,i4=4,i5=5,i6=6,i7=7,i8=8,i9=9;
         //   (boost::bind(&nine_arguments,_9,_2,_1,_6,_3,_8,_4,_5,_7))
         //     (i1,i2,i3,i4,i5,i6,i7,i8,i9);

         // boost::asio::read(*pSocket, boost::asio::buffer(pReqBuf, MsgLenBytes), boost::asio::transfer_exactly(MsgLenBytes), Err);
         // boost::asio::async_read(pSocket, boost::asio::buffer(pReqBuf, MsgLenBytes), boost::bind(&SSLSocket::HandleRead, _1,_2,_3))
         //   (this, pReqBuf, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred);
         //   boost::asio::async_read(*pSocket, boost::asio::buffer(reply_), boost::asio::transfer_exactly(ByteCount), boost::bind(&Client::handle_read,
         //      this, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
         // boost::asio::async_write(*pSocket, boost::asio::buffer(pDataBuf, MsgLenBytes), boost::bind(&SSLSocket::HandleWrite, this,
         //    boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));

         HandShakeReady = true;
         Locking CodeLock(SocketLock); // Single thread the code.
         boost::asio::async_read(*pSocket, boost::asio::buffer(pDataBuf, MsgLenBytes), boost::bind(&SSLSocket::HandleRead, this,
            boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
      }
      else
      {
         ss << "SSLSocket::HandleFirstWrite: failed - " << error.message() << ".\n";
         Log.LogString(ss.str(), LogError);
         Stop();
      }
   }
   catch (std::exception& e)
   {
      stringstream ss;
      ss << "SSLSocket::HandleFirstWrite: threw an error - " << e.what() << ".\n";
      Log.LogString(ss.str(), LogError);
      Stop();
   }
} 
```

# c - 将两个 uint8_t 组合为 uint16_t

> ID：15249791
> 
> 赞同：30
> 
> 时间：2013-03-06T14:22:33.023
> 
> 标签：c

我有以下数据

```
uint8_t d1=0x01; 
uint8_t d2=0x02; 
```

我想将它们组合`uint16_t`为

```
uint16_t wd = 0x0201; 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-06T14:23:12.777

您可以使用按位运算符：

```
uint16_t wd = ((uint16_t)d2 << 8) | d1; 
```

因为：

```
 (0x0002 << 8) | 0x01 = 0x0200 | 0x0001 = 0x0201 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-06T14:31:03.267

最简单的方法是：

```
256U*d2+d1 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-06T14:39:43.333

这很简单。你不需要演员表，你不需要临时变量，你不需要黑魔法。

```
uint8_t d1=0x01; 
uint8_t d2=0x02; 
uint16_t wd = (d2 << 8) | d1; 
```

这始终是明确定义的行为，因为 d2 始终是正值并且永远不会溢出，只要`d2 <= INT8_MAX`.

（INT8_MAX 在 stdint.h 中找到）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-01T07:28:56.233

```
(uint16_t)((d2 << 8) + (d1 & 0x00ff)) 
```

# c# - 在 Gridview asp.net 上并排编辑按钮

> ID：15249794
> 
> 赞同：0
> 
> 时间：2013-03-06T14:22:57.410
> 
> 标签：c#, asp.net, gridview

我需要在我的gridview中显示更新和取消按钮，而不是彼此重叠

现在是这样的：

![http://i.imgur.com/J53fCSi.png](../Images/ae65b17ff3d2a25335b2c6f26115ae44.png)

我需要它是这样的：

绿色按钮 红色按钮

有什么想法吗？

这是 asp.net 代码：

```
<asp:GridView runat="server" ID="CriteriosGridView" DataSourceID="dsCriterios" DataKeyNames="codigo"
        AutoGenerateColumns="False" CssClass="tabConfigGeral" HorizontalAlign="Center"
        BackColor="White" BorderColor="#CCCCCC" BorderStyle="None" BorderWidth="1px"
        CellPadding="3" OnDataBound="CriteriosGridView_DataBound">
        <Columns>
            <asp:BoundField DataField="codigo" HeaderText="Ordem" ItemStyle-HorizontalAlign="Center"
                InsertVisible="False" ReadOnly="True" SortExpression="codigo">
                <ItemStyle HorizontalAlign="Center"></ItemStyle>
            </asp:BoundField>
            <asp:BoundField DataField="filtro" HeaderText="Critério" SortExpression="filtro"
                ItemStyle-Width="200px">
                <ItemStyle Width="200px"></ItemStyle>
            </asp:BoundField>
            <asp:CommandField ShowEditButton="True" HeaderText="Ação" CancelText="" EditText=""
                UpdateText="" Visible="False" ButtonType="Image" CancelImageUrl="~/Images/Cancel.png"
                EditImageUrl="~/Images/action.Edit.gif" UpdateImageUrl="~/Images/Logado.png">
                <ControlStyle Height="14px" Width="14px" />
                <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" Height="22px" Width="22px"
                    CssClass="BotaoGrid"></ItemStyle>
            </asp:CommandField>
        </Columns>
        <FooterStyle BackColor="White" ForeColor="#000066" />
        <PagerStyle BackColor="White" ForeColor="#000066" HorizontalAlign="Left" />
        <SelectedRowStyle BackColor="#669999" HorizontalAlign="Center" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#318ADE" Font-Bold="True" ForeColor="White" />
        <RowStyle ForeColor="#000066" BackColor="White" HorizontalAlign="Center" />
        <AlternatingRowStyle BackColor="#E7F7FF" />
    </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:55:13.657

Remove width attributes in

```
<ControlStyle Height="14px" Width="14px" /> 
```

And

```
<ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" Height="22px" Width="22px"
                CssClass="BotaoGrid"></ItemStyle> 
```

To see if the layout is the problem. Or if you want to specify widths, make sure that the buttons have enough space.

# ruby-on-rails - Cucumber、VCR gem 和 chrome 驱动程序不能一起工作

> ID：15249795
> 
> 赞同：3
> 
> 时间：2013-03-06T14:22:58.700
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, cucumber

我正在尝试使用 VCR gem、chrome 驱动程序和 webmock 运行 cucumber，但它不起作用。一个问题是**没有**一个请求被记录下来。我确实设置了 VCR `ignore_localhost`，我认为由于 javascript 而需要它，如this [SO answer中所述](https://stackoverflow.com/a/6120205/600953)中所述。

**但是为什么没有`www.test.com`记录我访问 url（比如说）的步骤请求？**我看到加载的 chrome 浏览器和 URL 中的地址，所以我知道黄瓜步骤正在那里。

如果我关闭，`ignore_localhost`那么我会看到一些录音，但 uri 都是`127.0.0.1`。我期望的 uri 出现在`body: string`而不是`uri`. **为什么会这样？**

```
request:
  method: post
  uri: http://127.0.0.1:9592/session/87bb12aa8b5b1230399b98bcc7d0ba11/url
  body:
    encoding: US-ASCII
    string: ! '{"url":"http://www.test.com"}'
  headers:
    Accept:
    - application/json
    Content-Type:
    - application/json; charset=utf-8
    Content-Length:
    - '46'
    User-Agent:
    - Ruby 
```

如果有帮助，这是我的 VCR 配置

```
VCR.configure do |c|
  c.cassette_library_dir = 'features/support/vcr_cassettes'
  c.hook_into :webmock
  c.ignore_localhost = true
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T08:38:57.467

首先，像这样设置你的配置：

```
VCR.configure do |c|
  c.cassette_library_dir = 'features/support/vcr_cassettes'
  c.hook_into :webmock
  c.ignore_localhost = true
  c.allow_http_connections_when_no_cassette = false
end 
```

使用最后一个选项，您告诉 VCR 在没有磁带的情况下不允许真正的 http 请求。现在运行你的测试。我敢打赌它会抛出一个错误！现在您必须告诉 VCR 何时使用哪个磁带。在这里查看 VCR 的黄瓜助手[https://www.relishapp.com/vcr/vcr/v/2-4-0/docs/test-frameworks/usage-with-cucumber](https://www.relishapp.com/vcr/vcr/v/2-4-0/docs/test-frameworks/usage-with-cucumber)

VCR 也包括一些其他测试框架的助手[https://www.relishapp.com/vcr/vcr/v/2-4-0/docs/test-frameworks](https://www.relishapp.com/vcr/vcr/v/2-4-0/docs/test-frameworks)

# hadoop - 如何设计 Hadoop 作业以将一个文件中的字段匹配到另一个文件

> ID：15249798
> 
> 赞同：0
> 
> 时间：2013-03-06T14:23:05.657
> 
> 标签：hadoop

我有两个不同的文件，每个文件都包含不同的数据。我想对这些文件进行一些处理，然后根据匹配的键将数据合并在一起。在 Hadoop 中实现这一点的最佳方法是什么？我正在考虑以某种方式创建两个映射器，每个映射器处理一个文件，然后一个减速器来组合数据？我不确定这是否可能。有人对我如何在 Hadoop 中合并来自两个文件的数据有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:35:28.950

有很多方法可以编写 map/reduce 作业（Hive、Pig、Cascading、Java 等），但本质上连接是一个多输入作业，其中映射器以 key_to_join_by 和 rest_of_data 格式发出记录，reducer 执行实际的连接（除非其中一个文件小到足以保存在内存中，您可以在映射器中进行连接）

[您可以在此处](http://pig.apache.org/docs/r0.10.0/basic.html#join-inner)查看如何在 Pig 中执行此操作的示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:30:46.170

你能举出你的文件的例子吗？目前尚不清楚您在问什么。您是在谈论在 Hadoop 中进行联接吗？如果是这样，您将需要两个映射器类。或者您可以使用 Hive，它使执行连接更容易。请查看这两种可能的解决方案的示例：[加入 Hadoop](http://kickstarthadoop.blogspot.com/2011/09/joins-with-plain-map-reduce.html "加入 Hadoop")

# python - 如何索引 Python 列表

> ID：15249799
> 
> 赞同：0
> 
> 时间：2013-03-06T14:23:08.323
> 
> 标签：python

```
list=[1,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,1,0,1,3,0,3,0,3,1] 
```

所以现在我想知道这个列表中的第 5 个对象是否为 3：

```
if list.index(3)==5:
  print("yes")
else:
  print("no") 
```

-> 答案是“不”……但正如你所见。那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T14:23:40.520

1.  不要`list`用作变量名。它掩盖了一个非常有用的命令。

2.  `index`是列表的方法，返回列表中给定元素的位置。您想要相反：获取给定位置的元素。

此代码将为您提供帮助。它检查列表的第 5 个（位置 4）元素是否为 3：

```
lst = [1,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,1,0,1,3,0,3,0,3,1]
if lst[4] == 3:
    print('yes') 
```

您的代码`list.index(3)`返回`1`，因为 的第一次出现`3`在位置 1。

# node.js - Express - res.send() 工作一次

> ID：15249808
> 
> 赞同：11
> 
> 时间：2013-03-06T14:23:24.257
> 
> 标签：node.js, express

我是 Node 和 Express 的新手，我试图用 Express 做一些事情只是为了开始，然后我遇到了这个问题。

第一个`res.send()`效果很好，但第二个没有触发。

这是我的代码：

```
var express = require('express'),
    app     = express(),
    fs      = require('fs'),
    visits;

app.listen(8080);

app.get('/', function(req,res) {

    res.send('Hello');

    fs.readFile('counter.txt','utf-8', function(e,d) {

        if (e) { 
            console.log(e);
        }
        else {
            console.log(parseInt(d) + 1);
            fs.writeFile('counter.txt',parseInt(d) + 1);
            res.send('<p id="c">' + ( parseInt(d) + 1 ) + '</p>');
        }

    })
... 
```

'Hello' 已发送，但未发送`res.send('<p> .. </p>');`。如果我发表评论`res.send('Hello');`，将显示访问者。

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-06T14:35:02.017

`res.send()`意味着只被调用一次。

试试这个：

```
app.get('/', function(req,res) {
  var response = 'Hello';
  fs.readFile('counter.txt','utf-8', function(e,d) {
      if (e) {
        console.log(e);
        res.send(500, 'Something went wrong');
      }
      else {
        console.log(parseInt(d) + 1);
        fs.writeFile('counter.txt',parseInt(d) + 1);
        response += '<p id="c">' + ( parseInt(d) + 1 ) + '</p>';
        res.send(response);
      }
  })
}); 
```

（或者只是`res.send("Hello<p id=...")`，但你明白了：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T14:35:23.837

这是因为 res.send() 完成发送响应。

当`res.send('Hello');`遇到它时，它会立即发送响应。所以 next`res.send`没有执行，你看不到访问者。评论第一个`res.send`允许您查看第二个。

# c# - 排序动态列表不起作用

> ID：15249813
> 
> 赞同：0
> 
> 时间：2013-03-06T14:23:37.510
> 
> 标签：c#, asp.net, linq

我有一个填充和排序的动态列表：

```
List<dynamic> eventList = new List<object>();

            foreach (Task t in tasks)
            {
                eventList.Add(
               new
               {
                   id = "t" + t.TaskID.ToString(),
                   title = t.TaskTitle,
                   start = ResolveStartDate(StartDate(t.Schedule.DateFrom.Value)),
                   end = ResolveEndDate(StartDate(t.Schedule.DateFrom.Value), t.Schedule.Hours.Value),
                   description = t.TaskDescription,
                   allDay = false,
                   resource = t.Schedule.EmployeID.ToString(),
                   color = ColorConversion.HexConverter(System.Drawing.Color.FromArgb(t.Project.Color.Value))
               }
           );
            }

            foreach (Case c in cases)
            {
                eventList.Add(
               new
               {
                   id = "c" + c.CaseID.ToString(),
                   title = c.CaseTitle + "-" + c.Customer.CustomerDescription,
                   start = ResolveStartDate(StartDate(c.Schedule.DateFrom.Value)),
                   end = ResolveEndDate(StartDate(c.Schedule.DateFrom.Value), c.Schedule.Hours.Value),
                   description = c.CaseDescription,
                   allDay = false,
                   resource = c.Schedule.EmployeID.ToString(),
                   color = ColorConversion.HexConverter(System.Drawing.Color.FromArgb(c.Color.Value))
               }
           );

            }

            eventList.OrderBy(p => p.title); 
```

当我在排序调用之前和之后检查调试模式时，列表根本没有排序，它是按添加的顺序排列的。

当我运行它时，我也没有看到任何排序。有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:26:08.380

这就是问题：

```
eventList.OrderBy(p => p.title); 
```

您假设`OrderBy`对现有集合进行排序。它没有。它*返回*一个有序的序列。您忽略了该返回值，因此该语句是无用的。

你可能想要：

```
eventList = eventList.OrderBy(p => p.title).ToList(); 
```

它不仅仅是`OrderBy`像这样工作的 -*所有*LINQ 序列操作（`Select`,`Where`等`Join`）都保持原始集合不变，并返回一个带有适当投影、过滤（等）数据的序列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:26:00.460

`OrderBy`不会更改原始列表。它只是创建一个新的，具有与第一个相同的元素，但顺序不同。尝试

```
eventList = eventList.OrderBy(p => p.title).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:27:46.257

下面的行只是一个查询：

```
eventList.OrderBy(p => p.title); 
```

这意味着，它类似于类，结构语句。它只声明了一些结构，什么也不做。为了使该查询*实例化*，您必须将其复制到数组或列表中，如下所示：

```
var sortedArray = eventList.OrderBy(p => p.title).ToArray(); 
```

之后，将遍历 eventList 并将元素写入数组并存储在 sortedArray 变量中。

# c# - 制作安装程序但使用了 SDK“未注册的类”

> ID：15249815
> 
> 赞同：0
> 
> 时间：2013-03-06T14:23:39.153
> 
> 标签：c#, .net, visual-studio, sdk, installation

我们正在尝试为我们的应用程序制作安装程序，并且正在使用 Advanced Installer。

当我从我们的应用程序的发布文件夹中添加所有文件并让它安装时。应用程序崩溃并说某些类未注册。我知道这是来自我们使用的一些使用 ActiveX 对象的 SDK。我是否必须将这些 SDK 安装程序添加到先决条件中，或者是否有其他方法可以注册这些类？

# c# - 发送带有附件的邮件

> ID：15249817
> 
> 赞同：6
> 
> 时间：2013-03-06T14:23:40.840
> 
> 标签：c#, asp.net

**编辑**：**我可以发送没有附件的邮件**

尝试发送邮件时出现此错误：

```
System.Net.Mail.SmtpException: The operation has timed out. 
```

以下是我的代码：

```
public static void SendMailMessage(string to, string subject, string body, List<string> attachment)
{
    MailMessage mMailMessage = new MailMessage();
    // string body; --> Compile time error, body is already defined as an argument

    mMailMessage.From = new MailAddress("abc@gmail.com");

    mMailMessage.To.Add(new MailAddress(to));

    mMailMessage.Subject = subject;

    mMailMessage.Body = body;

    foreach (string s in attachment)
    {
        var att = new Attachment(s);

        mMailMessage.Attachments.Add(att);

    }

    // Set the format of the mail message body as HTML
    mMailMessage.IsBodyHtml = true;
    // Set the priority of the mail message to normal
    mMailMessage.Priority = MailPriority.High;

    using (SmtpClient mSmtpClient = new SmtpClient())
    {
        mSmtpClient.Send(mMailMessage);
    }
} 
```

网页配置

```
 <system.net>
<mailSettings>
  <smtp from="mailid">
    <network host="smtp.gmail.com" port="587" enableSsl="true" userName="username" password="pass" />
  </smtp>
</mailSettings> 
```

注意：附件不超过其限制（低于 25 mb）

我能做些什么来解决这个问题，或者我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:06:08.930

所以基本上我们在聊天中发现问题的出现是因为附件的上传需要很长时间。

解决它的一种方法是增加 SmtpClient 的超时值：

```
mSmtpClient.Timeout = int.MaxValue; 
```

注意：使用 int.MaxValue 进行测试，但对部署的解决方案使用更实际的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:30:27.483

设置本地 smtp 服务器进行中继，或使用类似[http://aws.amazon.com/ses/](http://aws.amazon.com/ses/)的东西。我不认为谷歌会允许你通过他们的服务器以编程方式中继。

# c# - 45000以内启动socket失败

> ID：15249820
> 
> 赞同：17
> 
> 时间：2013-03-06T14:24:01.433
> 
> 标签：c#, firefox, selenium-webdriver, webdriver

我正在使用 FF 版本 19

直到昨天一切正常，今天早上突然我开始收到这个错误，我有之前运行的完全相同的代码，没有改变什么

错误信息：

```
Test 'M:.TestCases.12' failed: Failed to start up socket within 45000
    OpenQA.Selenium.WebDriverException: Failed to start up socket within 45000
    at OpenQA.Selenium.Firefox.Internal.ExtensionConnection.ConnectToBrowser(Int64 timeToWaitInMilliSeconds)
    at OpenQA.Selenium.Firefox.Internal.ExtensionConnection.Start()
    at OpenQA.Selenium.Firefox.FirefoxDriver.StartClient()
    at OpenQA.Selenium.Remote.RemoteWebDriver..ctor(ICommandExecutor commandExecutor, ICapabilities desiredCapabilities)
    at OpenQA.Selenium.Firefox.FirefoxDriver..ctor(FirefoxBinary binary, FirefoxProfile profile, TimeSpan commandTimeout)
    at OpenQA.Selenium.Firefox.FirefoxDriver..ctor(FirefoxBinary binary, FirefoxProfile profile)
    at OpenQA.Selenium.Firefox.FirefoxDriver..ctor(FirefoxProfile profile)

0 passed, 1 failed, 0 skipped, took 145.80 seconds (Ad hoc). 
```

这是我的源代码：

```
public static IWebDriver GetDriver()
        {
            switch (Common.BrowserSelected)
            {
                case "ff":
                    FirefoxProfile profile = new FirefoxProfile();
                    profile.SetPreference("network.http.phishy-userpass-length", 255);
                    profile.SetPreference("network.automatic-ntlm-auth.trusted-uris", url);
                    drv = new FirefoxDriver(profile);
                    break;
                case "ie":
                    var options = new InternetExplorerOptions();
                    options.IntroduceInstabilityByIgnoringProtectedModeSettings = true;
                    DesiredCapabilities capabilities = new DesiredCapabilities();
                    capabilities.SetCapability(CapabilityType.AcceptSslCertificates, true);
                    drv = new InternetExplorerDriver(options);
                    break;
                case "chrome":
                    //_driver = new ChromeDriver();
                    break;
            }
            return drv;
        } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-06T15:14:07.087

Selenium 的最新版本中添加了 Firefox 19“支持”。因此，由于您使用的是 .NET，因此*在本文发布时*直接下载的最新版本是 2.31.2：

[selenium-release.storage.googleapis.com/index.html](http://selenium-release.storage.googleapis.com/index.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-03-07T17:14:03.230

我对 Firefox 43 和 Selenium 2.48 有这个问题。当您的 Selenium 驱动程序服务器在 32 位进程中运行并且您启动 64 位版本的 Firefox 时，就会发生这种情况。

原因是 webdriver 服务器尝试连接到**端口 7055**，该端口应该由在 Firefox 可执行文件中运行的 webdriver 打开。但是您可以在 www.sysinternals.com 的**TcpView**中看到Firefox 没有打开此端口。所以司机一直等到他的超时（45秒）过去。

即使在完全关闭 Windows 防火墙后也会发生这种情况。

我在互联网上找到的所有帖子都没有帮助：升级 Selenium、降级 Firefox 等。

但是在安装相同的 Firefox 43 的 32 位版本后，它就可以工作了。我在 TcpView 中看到 Firefox 32 位如何正确打开端口：

[![Firefox Selenium 网络驱动程序端口 7055](../Images/92501d04e249948746c9a8ebb8b3f2b3.png)](https://i.stack.imgur.com/SEPY3.png)

在我的代码中我使用

```
FirefoxProfile Prof = new FirefoxProfile();
FirefoxBinary  Bin  = new FirefoxBinary(sBrowserExe);
mDriver = new FirefoxDriver(Bin, Prof); 
```

随着`sBrowserExe = "C:\Program Files\Mozilla Firefox 43\firefox.exe"` 64 位版本的 Firefox 43 启动，我得到了超时异常。

随着`sBrowserExe = "C:\Program Files (x86)\Mozilla Firefox 43\firefox.exe"` 32 位版本的 Firefox 43 启动，它可以工作了！

* * *

**更新：** Firefox 的开发人员现在完全打破了对 Selenium 的支持。48 以上的新 Firefox 版本需要数字签名才能安装所有扩展。

[https://wiki.mozilla.org/Addons/Extension_Signing](https://wiki.mozilla.org/Addons/Extension_Signing)

我不明白的是为什么 Selenium 人无法获得当前 Selenium 驱动程序的签名？

Firefox 47.0 版有一个错误，不允许将它与 Selenium 一起使用。此错误已在版本 47.0.1 中修复。

Firefox 48.0 及以上版本不再安装旧的 Selenium 驱动程序。它们必须通过 Marionette (= Gecko) 驱动程序实现自动化。

问题是 Marionette 仍处于测试阶段，并且缺少许多功能，因此目前没有解决方案来自动化新的 Firefox 版本。

正如您在此处看到的，新驱动程序充满了错误：[https ://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette/WebDriver/status](https://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette/WebDriver/status)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-31T09:47:32.620

如果升级 Webdriver 没有帮助，您可以降级 FireFox 以解决问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-28T05:59:31.547

您使用的是哪个版本的 Selenium IDE？尝试降级 Firefox 版本。selenium IDE 的发行说明在下面的链接中提到。

[https://code.google.com/p/selenium/wiki/SeIDEReleaseNotes](https://code.google.com/p/selenium/wiki/SeIDEReleaseNotes)

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-10T11:21:46.180

在 Nuget 包管理器中安装所有更新。重启IDE。

不建议降级 firefox 版本进行测试。但最后一个版本降级听起来不错。

这个解决方案对我有用。

# javascript - 如何阻止点击事件在多次点击时排队？

> ID：15249821
> 
> 赞同：1
> 
> 时间：2013-03-06T14:24:02.450
> 
> 标签：javascript, jquery, html, dhtml

我需要实现的是，如果我们单击提交按钮，应该会显示特定的 div。这是我的代码： http: [//jsfiddle.net/7tn5d/](http://jsfiddle.net/7tn5d/) 但是如果我多次单击提交按钮，该函数调用排序排队并一个接一个地运行。当前动画正在运行时，有没有办法使其他点击无效？代码：

```
 animating = 0;
    doneanim = 0;
    $(function () {
        $("#submit_tab").click(function (e) {
            if (animating == 1) return;
            animating = 1;
            $("#submit_cont").show("blind", {}, 1000);
            animating = 0;
        });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:28:39.513

为了防止它多次执行动作，简单地停止前一个动画。所以：

```
$('#submit_cont').stop().show("blind",{},1000); 
```

但是，我注意到您试图阻止动画运行，如果动画已经在运行。虽然显示 div 需要 1 秒或 1000 毫秒，但条件的执行不会暂停，直到动画完成。您必须定义一个在动画完成后运行的函数，如下所示：

```
animating = 0;
doneanim = 0;
$(function () {
    $("#submit_tab").click(function (e) {
        if (animating == 1) return;
        animating = 1;
        $("#submit_cont").show("blind", 1000, function() { animation = 0; });
    });
}); 
```

希望有帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:29:38.477

你几乎用信号量做对了！只是，在 jQuery 中`show()`，您必须将信号量重置作为参数。这是固定版本 - [http://jsfiddle.net/snikrs/xe5A3/](http://jsfiddle.net/snikrs/xe5A3/)

```
animating = 0;
doneanim = 0;
$(function () {
    $("#submit_tab").click(function (e) {
        if (animating == 1) return;
        animating = 1;
        $("#submit_cont").show("blind", 1000, function() {
            animating = 0;
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T14:30:31.107

您可以使用[`:animated`](http://api.jquery.com/animated-selector/)选择器检查：

```
$(function () {
    $("#submit_tab").click(function (e) {
        var $cont = $("#submit_cont");
        if (!$cont.is(':animated')) {
           $cont.show("blind", {}, 1000);
        }
    });
}); 
```

现在，如果您坚持使用外部信号量的想法，那么最好将其坚持在元素上，`.data()`而不是使用全局变量：

```
$(function () {
    $("#submit_tab").click(function (e) {
        var $cont = $('#submit_cont'),
            animating = $cont.data('isAnimating');
        if (animating) {
           return;
        } else {
          $cont.data('isAnimating', 1);
          $("#submit_cont").show("blind", 1000, function() { $cont.data('isAnimating', 0); });
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-22T20:57:35.343

我为此找到了一个不同的解决方案，在我看来它看起来更干净：

```
var tab = $("submit_tag");
tab.on("click", function(){
    var cont = $("submit_cont");
    var animating = tab.queue("fx").length;
    if(animating === 0){
        cont.show("blind", {}, 1000);
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T14:27:06.833

像这样的东西（[见文档](http://api.jquery.com/show/)）:)

```
$("#submit_cont").show("blind", function(){
    animating = 0;
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T14:32:43.490

您可以`$("#submit_cont").clearQueue();`在动画完成后添加：

```
 $("#submit_tab").click(function (e) {
     $("#submit_cont").show("blind", 1000, function() {
         $("#submit_cont").clearQueue();
     });
 }); 
```

[更新了 JSFiddle](http://jsfiddle.net/7tn5d/4/)

# php - 将第一段内容交换为最后一段

> ID：15249838
> 
> 赞同：0
> 
> 时间：2013-03-06T14:24:35.027
> 
> 标签：php, mysql, text, phpmyadmin

当我跑步时

```
SELECT * FROM `content` where article_id=123 
```

我得到结果

```
<p>{sometag}some things{/sometag}</p>
<p>some content</p>
<p>some more content</p> 
```

我需要修改该结果以获得：

```
<p>some content</p>
<p>some more content</p>
<p>{sometag}some things{/sometag}</p> 
```

注意：第一段移到最后。

我必须这样做`phpMyAdmin`，但我也可以使用 PHP。在 PHP 中，我知道如何连接数据库、加载和更新内容，但我不知道如何切换段落？需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:52:32.173

我不得不在这里做出很多假设，因为您还没有真正写过问题，甚至没有提供任何信息。

您说“列的内容”，所以我假设您将这 3 个 HTML 段落标签存储在某个数据库的列中，并且您想更改它们的返回顺序。

您想要的顺序不是字母顺序，因此您不能按存储的值对它们进行排序。您应该创建一个新列并对其进行排序，例如创建一个名为“manual_order”的列，然后：

```
SELECT * FROM table
ORDER BY manual_order 
```

**编辑**

您对帖子的更新清楚地表明了您正在尝试做什么 - 当“您”知道您的意思但对其他人并不总是清楚时，它总是更容易！

除非您提供 ORDER BY 子句，否则不能依赖从 MySQL 返回的结果的顺序。

```
SELECT * FROM table 
```

如果您没有对该表进行任何删除/更新或替换，则将按插入顺序返回。

如果您使用 INNODB 表执行 SELECT * FROM 表，它们将按 PRIMARY KEY 顺序而不是 INSERT 顺序返回。

If you want to change the order you must supply an ORDER BY clause. If you want an order that doesn't make sense in numeric terms then as suggested it would be best to create another column where you can specify the order and use that in the ORDER BY clause.

If you're using INNODB and wanting a reverse of what has been queried you could just use:

```
SELECT * FROM table
ORDER BY primarykey DESC 
```

# c++ - 需要 Volume Shadow Copy API 来冻结 Exchange Writer

> ID：15249841
> 
> 赞同：0
> 
> 时间：2013-03-06T14:24:44.857
> 
> 标签：c++, winapi, visual-c++, exchange-server, volume-shadow-service

我已经实现了自己的应用程序（可能使用卷影复制）来备份 Exchange 2010 服务器。

我发现了以下架构：[备份序列图](http://msdn.microsoft.com/en-us/library/exchange/aa579076%28v=exchg.140%29.aspx)

但我找不到任何直接冻结/解冻 Exchnage Writer 的功能。

我确实发现只有在创建快照时调用“冻结”和“解冻”命令的函数（请参阅以下架构：[在 VSS 下处理备份的概述](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384589%28v=vs.85%29.aspx)）

请帮助我找到有关第一个模式的任何文档，即我可以使用哪些 API 函数来冻结和解冻 Writers

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:35:08.020

有一个综合示例，格式为 VSHADOW.exe，它是作为 SDK 的一部分提供的示例 VSS 请求程序。

许可协议包括：

> 示例代码。您可以修改、复制和分发标记为“示例”的代码的源代码和目标代码形式。</p>

您可以调整 VSHADOW 来做您想做的事，但最简单的方法是按原样使用 VSHADOW.exe。

您可以使用 VSHADOW 创建卷影副本，将其安装在符号链接或驱动器号上，做任何您想做的事情，然后销毁卷影副本卷和符号链接。

需要明确的是，您不应该在冻结操作期间备份冻结的文件，您应该创建冻结文件的卷影副本，以便它们可以快速解冻，然后备份卷影副本。

VSHADOW 将冻结，创建卷影副本，解冻（总共只需要几秒钟），然后将卷影副本安装到驱​​动器号上，调用外部程序 - 您的备份程序，然后可以备份交换的卷影副本数据库 - 然后删除卷影副本。卷影副本不会更改，并且可以在不引起共享冲突的情况下进行备份。

# c# - 如何获取用户指定用户名和域的 AD 组

> ID：15249842
> 
> 赞同：0
> 
> 时间：2013-03-06T14:24:48.247
> 
> 标签：c#, asp.net, active-directory

我有一个函数可以返回用户所在的 AD 组列表。

```
 public static List<string> GetGroupNames(string userName)
    {

        using (var context = new PrincipalContext(ContextType.Domain, Environment.UserDomainName))
        {
            using (var userPrincipal = UserPrincipal.FindByIdentity(context, userName))
            {
                var groupSearch = userPrincipal.GetGroups(context);
                var result = new List<string>();
                groupSearch.ToList().ForEach(sr => result.Add(sr.SamAccountName));

                return result;
            }

        }
    } 
```

这正如我所料。我想更新这个函数，这样我就可以传递一个 LDAP 路径来指定我想要查询的域。

我已经搜索了几个小时并且可以找到任何指针（即使我确信答案就在某个地方！）我非常感谢这里的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:17:09.520

您可以只添加一个新参数，假设`string domainName`并将其传递给`new PrincipalContext()`而不是`Environment.UserDomainName`.

# android - 在显示警报对话框时暂停进一步执行

> ID：15249846
> 
> 赞同：1
> 
> 时间：2013-03-06T14:24:57.330
> 
> 标签：android, android-layout, android-intent

我有一个方法

```
public void testing(){
getConfirmation() //this shows alert dialog for user confirmation
showListview() //just populate list view
} 
```

我需要等到用户对警报对话框做出响应，然后我想执行 showListview() 方法。但是现在，在 getConfirmation() 方法之后立即调用第二个方法。我是否必须设置任何属性来制作警报对话框以暂停进一步的执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:30:39.280

这不是 android 对话框的工作方式。您不能只是停止线程执行并等待用户确认。您应该改用侦听器。像这样的东西：

```
public void testing() {
    final AlertDialog.Builder builder = new AlertDialog.Builder(this);

    builder.setMessage("Are you sure?");
    builder.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            showListview();
        }
    });
    builder.setNegativeButton("No", null);
    builder.show();
} 
```

# javascript - ASP.net CustomValidator - ClientValidationFunction 用于检查值不是空白且不是初始值

> ID：15249848
> 
> 赞同：3
> 
> 时间：2013-03-06T14:25:00.913
> 
> 标签：javascript, asp.net, validation

我有以下代码验证文本框的值以确保它不为空，但我还需要检查它是否不等于文本框的初始值（defaultValue）。

这是我到目前为止所拥有的...

**Javascript：**

```
function textValidation(source, arguments)
   {
        if ( arguments.Value != "" ){ // && arguments.Value != arguments.defaultValue
            arguments.IsValid = true;
        } else {
            $(source).parents("div").css({"background-color":"red"});
            arguments.IsValid = false;
        }
   } 
```

**。网**

```
 <asp:TextBox runat="server" ID="Initial" Text="Initial" defaultValue="Initial" Width="120px" />                               

<asp:CustomValidator id="Initial_req"
     ControlToValidate="Initial"
     ClientValidationFunction="textValidation"
     ValidateEmptyText="true"
     runat="server"
     CssClass="errorAsterisk"
     Text="*" 
     ErrorMessage="Complete all correspondence fields" /> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T14:46:06.533

您可以使用 CSS 类来识别 TextBox 并使用 jQuery 检索它，从而获得属性`defaultValue`：

标记：

```
<asp:TextBox runat="server" 
             ID="Initial" 
             Text="Initial" 
             defaultValue="Initial" 
             Width="120px" 
             ValidationGroup="Test" 
             CssClass="to-validate" />

<asp:CustomValidator ID="Initial_req" 
   ControlToValidate="Initial" 
   ClientValidationFunction="textValidation"
   ValidateEmptyText="true" 
   runat="server" 
   CssClass="errorAsterisk" 
   Text="*" 
   ErrorMessage="Complete all correspondence fields"
   ValidationGroup="Test" />

<asp:Button ID="btnValidate" runat="server" Text="Validate" ValidationGroup="Test" /> 
```

Javascript：

```
function textValidation(source, arguments) {
     var initialValue = $(source).siblings(".to-validate:first").attr("defaultValue");

     if (arguments.Value != "" && arguments.Value != initialValue) { // && arguments.Value != arguments.defaultValue
         arguments.IsValid = true;
     } else {
         $(source).parents("div").css({ "background-color": "red" });
         arguments.IsValid = false;
     }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:44:55.753

A`RequiredFieldValidator`将防止空白以及初始值。

使用属性[`InitialValue`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.requiredfieldvalidator.initialvalue.aspx)。

见[这里](http://runtingsproper.blogspot.com/2009/10/using-requiredfieldvalidator-attribute.html)：

> 使用它来防止您喜欢的任何值被输入到`TextBox`. `TextBox`不必在开始时嵌入该值 - 它只是不能与该值一起提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:51:53.357

1）你没有在你的函数中传递源和参数参数。

2）然后调用这个语法方式为ClientValidationFunction="javascript:textValidation(param1,oaram2);return true;"

[3）您可以在此处](https://stackoverflow.com/questions/11222800/required-field-validator-issue-validating-textbox-value)的文本框中使用必填字段验证

4）或者另一种方式是（我们不使用任何参数）在[这里](http://forums.asp.net/t/1134282.aspx/1)

# c++ - 关于 shared_ptr

> ID：15249855
> 
> 赞同：0
> 
> 时间：2013-03-06T14:25:16.673
> 
> 标签：c++, pointers, shared-ptr

只是想澄清一下 shared_ptr

```
int main(){
   typedef std::tr1::shared_ptr<Foo> _foo;

   _foo obja(new Foo());
   Foo *objb = obja.get(); 

   // delete objb; //deleting objb will throw double free or corruption
   return 0;
} 
```

*在上面的代码中，如果objb*没有被删除或释放，是否存在内存泄漏？最终，*obja*将超出范围并释放自己。由于*objb*和*obja*指向同一个实例，这是否意味着不需要释放*objb*？

上面是不是和这个一样：

```
Foo *obja = new Foo();
Foo *objb;

objb = obja;
delete obja; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T14:27:12.457

不，没有泄漏。原始指针没有任何所有权语义，并且`get`从 a 中提取原始指针也不会`shared_ptr`增加引用计数。

当共享指针超出示例中的范围时，指向的对象将被销毁。正如您已经注意到的那样，手动删除它会导致未定义的行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T14:29:10.327

> 在上面的代码中，如果 objb 没有被删除或释放，是否存在内存泄漏？

**不**，`Foo`对象归`obja`共享指针所有。通过这样做`.get()`，您可以检索一个“哑”，观察指针，该指针对指向对象的生命周期没有任何影响。您只需要注意不要在指向的对象不再存在后取消引用它，否则您将获得未定义的行为。

> 由于 objb 和 obja 指向同一个实例，这是否意味着不需要释放 objb？

不需要释放`objb`，因为当`obja`超出范围时，其析构函数将`delete`拥有对象。如果你这样做了`delete objb`，你会通过尝试两次删除一个对象来获得未定义的行为。

> 上面是不是和这个一样：

我想有人可以这么说，是的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T14:28:43.277

不，没有泄漏。 `obja`仍然拥有内存，并且`obja`在范围退出时被销毁时被释放。获取指针并不等同于释放其所有权（qv `release()`）。因此，您通过 获得了一个弱（非拥有）指针`get()`，只要实际所有者存在，它就有效，但如果原始指针比拥有的指针寿命长，则它是一个悬空指针`shared_ptr`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T15:28:35.187

我认为上面的大多数答案表明他们不明白你的困惑在哪里。
所以 C 和 C++ 中的指针只是一个内存地址。当您将一个原始指针“复制”到另一个原始指针时，您会使它们都指向相同的地址：

```
int *ptr1 = new int(); // points to memory at address lets say 1234;
int *ptr2 = ptr1; // now also points to 1234
*ptr1 = 10; // modify int where ptr1 points to
std::cout << *ptr2 << std""endl; // print 10 as ptr2 points to the same place as ptr1
delete ptr1; // I do not need memory at address 1234 anymore
delete ptr2; // I do not need memory at address 1234 again, error double deletion 
```

您可以将指针视为数字，当您将一个指针分配给另一个指针时，您只需复制该数字，该地址处的内存不会发生任何事情。

# php - 带有消息 SQLSTATE[42000] 的 PDOException：1064。在传递变量而不是字符串时发生

> ID：15249861
> 
> 赞同：1
> 
> 时间：2013-03-06T14:25:21.507
> 
> 标签：php, mysql, variables

当我将代码中的字符串替换为与这些字符串等效的变量时，我的代码会生成一个致命错误。

我正在尝试生成具有宽阔和相反叶子的树种符号列表。我使用 PDO 准备好的语句就可以做到这一点：

```
$stmt=$conn->prepare('SELECT Symbol FROM Leaf WHERE Type = ? AND BroadArrangement = ? ');
$stmt->execute(array('B' , 'O'));
$i=0;

    while ($result = $stmt->fetch()) : ?>

    <li><a href="#"><?php print_r($result['Symbol']); ?> </a></li>
    <?php $i++;
      endwhile; 
```

当我替换查询和参数以与变量绑定时，会出现致命错误（见下文）：

```
$q="'SELECT Symbol FROM Leaf WHERE Type = ? AND BroadArrangement = ? '";
$b= " 'B','O' ";

$stmt=$conn->prepare($q);
$stmt->execute(array($b));
$i=0;
    while ($result = $stmt->fetch()) : ?>
    <li><a href="#"><?php print_r($result['Symbol']); ?> </a></li>
    <?php $i++;
         endwhile; 
```

> 致命错误：带有消息 SQLSTATE[42000] 的未捕获异常“PDOException”：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 ''SELECT Symbol FROM Leaf WHERE Type = 附近使用正确的语法。AND BroadArrangement = ? /Applications/MAMP/htdocs/Tree_ID_Website/Compare/practice_compare.php:253 中的“第 1 行”堆栈跟踪：#0 /Applications/MAMP/htdocs/Tree_ID_Website/Compare/practice_compare.php(253): PDOStatement->execute （数组）#1 {main} 在第 253 行的 /Applications/MAMP/htdocs/Tree_ID_Website/Compare/practice_compare.php 中抛出

我有一种感觉，我错过了一些简单的东西，但我不知道是什么。当我打印或回显变量 $q 和 $b 时，它们与在正常工作的代码部分中传递的字符串相同。是变量范围的问题吗？还是我需要稍微修改变量？我尝试了没有运气的引号。

从其他帖子来看，当查询包含保留关键字时，通常会出现此错误。但我的没有，我很困惑。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:34:23.493

这里有几个问题。首先是在构建语句时，`$q`首先用单引号引用它，然后用双引号引用它。它只需要作为一个普通的 PHP 字符串被引用一次：

```
// Quoted with just one set of quotes
$q="SELECT Symbol FROM Leaf WHERE Type = ? AND BroadArrangement = ?"; 
```

那么你的参数数组必须是一个数组，其中每个参数都是一个数组元素：

```
// Each param is an array element
$b = array('B', 0); 
```

然后你可以准备和执行，`$b`作为参数传递给`execute()`：

```
// Based on your error it looks like you have PDO configured to throw exceptions
// so use a try/catch block.
try {
  $stmt = $conn->prepare($q);
  $stmt->execute($b);
}
catch (PDOException $err) {
  // Oops error
  echo $err->getMessage();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:45:05.587

这不会像您期望的那样工作：

```
$b= " 'B','O' ";

$c = array($b); 
```

现在`$c`将是一个包含一个元素的数组，即字符串`'B','O'`。

如果您确实有一个逗号分隔的字符串以及将其转换为数组的内容，则需要：

```
$c = explode(',' $b); 
```

或者在你的情况下：

```
$stmt->execute( explode(',' $b) ); 
```

# scala - 在通用元组元素上检查大于

> ID：15249863
> 
> 赞同：1
> 
> 时间：2013-03-06T14:25:27.807
> 
> 标签：scala

我有一种方法可以将不同类型的元组添加到列表中，其中第一个元组元素始终是 Int。我需要进行“大于”比较，但这在 Any 类型上是不允许的。有人可以告诉我如何在下面达到预期的效果吗？

谢谢德斯

```
private def add(list: List[Product], item: Product): List[Product] = {
  if(list.isEmpty || list.head.productElement(0) > item.productElement(0)) item :: list
  else add(list.tail, item)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:14:12.293

如果你不能接受[ziggystar](https://stackoverflow.com/users/108915/ziggystar)的建议，因为它`Producer`具有可变的数量，你可以通过重构来达到预期的效果，避免使用复杂且可能不太可读的方法。例如：

```
case class Item(i: Int, item: Product)

def add(list: List[Item], item: Item): List[Item] = {
  if (list.isEmpty || list.head.i > item.i) item :: list
  else add(list.tail, item)
} 
```

使用时，它看起来像这样：

```
add(Nil, Item(1, (1, "b"))) // List(Item(1,(1,b)))
add(List(Item(1, (1, "a"))), Item(2, (1, "b"))) // List(Item(2,(1,b)))
add(List(Item(2, (1, "a"))), Item(1, (1, "b"))) // List(Item(1,(1,b)), Item(2,(1,a)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:58:58.017

如果您愿意诉诸反射，您可以混合使用名义类型和结构类型：

```
import scala.language.reflectiveCalls

// A structural type exploiting the fact that all tuples have a _1 field
type IntComponent = { val _1: Int }

def add(list: List[Product with IntComponent], item: Product with IntComponent): List[Product with IntComponent] = {
  if(list.isEmpty || list.head._1 > item._1) item :: list
  else add(list.tail, item)
} 
```

这种组合`Product with IntComponent`并不是绝对必要的，`IntComponent`就足够了。但是，这种组合为您提供了更多的安全性，并且它允许您使用`Product`if 需要时声明的字段和方法。

这为您提供了相当多的静态类型安全性：

```
add(Nil, (1, "foo", null)) // ok

add(Nil, ("foo", 0)) // error
  // error: type mismatch;
  //    found   : String("foo")
  //    required: Int

add(List[Product with IntComponent](Tuple1(1), Tuple2(-1, true)), (0, "yes"))
  // Explicit type annotation required, error otherwise
  //     found   : List[Product with Serializable]
  //     required: List[Product with this.IntComponent] 
```

这种方法的明显弱点是，您可以潜入任何 a 的对象，`Product with IntComponent`例如

```
case class FakeTupleA(_1: Int)

add(Nil, FakeTupleA(99)) // ok 
```

如果没有`Product`要求，以下内容也可以工作：

```
add(Nil, new FakeTupleB(99))
  // error: type mismatch;
    // found   : this.FakeTupleB
    // required: Product with this.IntComponent 
```

# postgresql - 如何在 postgresql 上查找隐式生成的索引

> ID：15249864
> 
> 赞同：1
> 
> 时间：2013-03-06T14:25:31.273
> 
> 标签：postgresql, indexing

是否有任何方法可以检测 DBMS 在添加时是否自动生成索引，例如主键或唯一约束？

目前，我尝试使用 jdbc 元数据获取表的所有索引。但这里的结果也包含隐含生成的索引。我现在需要检测是否自动生成专用索引的可能性。

我已经尝试从 pg_class 或 pg_index 等表中获取这些信息。但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:53:39.790

我认为没有任何方法可以区分这些索引——毕竟自动创建的索引和手动创建的索引没有区别。

我能想到的唯一方法是为您的“手动”索引坚持一些命名约定。然后您可以过滤掉所有不符合该命名约定的内容。

# c# - C# Regex 在某些特定选项卡后删除句子

> ID：15249865
> 
> 赞同：0
> 
> 时间：2013-03-06T14:25:38.827
> 
> 标签：c#, regex, sentiment-analysis

如何编写正则表达式以删除某些特定选项卡后的句子？

例如富文本框中的我的文本

```
a   00001740    0.125   0   able#1  (usually followed by `to') having the necessary means or skill or know-how or authority to do something; "able to swim"; "she was able to program her computer"; "we were at last able to buy a car"; "able to get a grant for the project"
a   00002098    0   0.75    unable#1    (usually followed by `to') not having the necessary means or skill or know-how; "unable to get to town without a car"; "unable to obtain funds"
a   00002312    0   0   dorsal#2 abaxial#1  facing away from the axis of an organ or organism; "the abaxial surface of a leaf is the underside or side facing away from the stem" 
```

本文来自 sentiwordnet。我想在第五个选项卡之后删除句子，例如应该省略单词able#1 句子（即它的光泽），然后在另一个单词无法#1 之后，它的光泽应该被省略。

什么将是它的正则表达式来消除 sentiwordnet 文本文件中单词的光泽。有什么办法可以做到这一点，或者有人可以为我制作一个小样本/空白吗？

输出应该是这样的：

```
a   00001740    0.125   0   able#1
a   00002098    0   0.75    unable#1
a   00002312    0   0   dorsal#2 abaxial#1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:30:10.277

您可以改为查找 # 后跟数字..所以正则表达式将是

```
(?<=#\d+)[^#]*$ 
```

`[^#]*`将匹配 0 到许多字符，除了 #

`(?<=#\d+)`将检查特定模式（# 后跟数字）是否在匹配之前出现`[^#]*`

`$`描述字符串的结尾

**或者**

```
\t[^\t]+$ 
```

* * *

您可以使用正则表达式的替换功能

```
input=Regex.Replace(input,regex,""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:34:32.823

这应该做的工作

```
string text = @"a   00001740    0.125   0   able#1  (usually followed by `to') having the necessary means or skill or know-how or... ";

string res = Regex.Replace(text, @"((?:[^\t]+\t){5}).+$", "$1"); 
```

# jquery - html5 / jQuery 视频预加载器登陆页面

> ID：15249869
> 
> 赞同：0
> 
> 时间：2013-03-06T14:25:47.003
> 
> 标签：jquery, html, video, preloader

我正在开发一个使用 html5 视频标签作为背景的网站。
[很棒的网站示例](http://jefferson.microdesign.nl/lawrence/)

如您所见，视频非常重，因此我希望将其预加载。但不仅仅是预加载，如：

```
<video id="video_background" controls="controls" preload="auto" loop> 
```

因为这与“自动播放”功能不兼容。这是一个背景，我希望它在没有任何用户输入的情况下启动。

我正在寻找的是某种插件，它可以创建一个带有可自定义预加载 gif 的登录页面，在完全加载所有视频 div 时显示类似于“输入”按钮的内容。

我在这里有一个很好的例子，唯一的缺点是；它只加载图像..
[一个很棒的例子](http://www.inwebson.com/demo/jpreloader-v2/)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:51:36.237

为什么不在背景`video`元素上设置海报图像？

```
<video id="video_background" controls preload="auto" poster="video_background.jpg" autoplay>
...
</video> 
```

然后您将不需要预加载器，因为浏览器会尽快开始播放视频。

或者，您可以设置背景图像并开始加载视频（如果您的网站已经使用它，则通过 JavaScript 或 jQuery）并且当其状态类似于“可以开始播放”时 - 隐藏图像并添加视频。

# ember.js - emberjs 中的延迟加载问题

> ID：15249878
> 
> 赞同：1
> 
> 时间：2013-03-06T14:26:11.713
> 
> 标签：ember.js

我一直在尝试按照以下答案在 emberjs 中实现延迟加载：[https](https://stackoverflow.com/a/11925918/341358) ://stackoverflow.com/a/11925918/341358 。但是当 ember 加载初始数据集时，我被卡住了。出于某种原因，第一个 ajax 调用不断调用：`/newsitems`而不仅仅是第一页：`/newsitems?page=1`。从那时起，loadmore 功能就很好用，返回给我一个有限的数据集，用于第 2、3、4、...

所以我的问题是：如何确保只加载第一页的项目而不是一次加载所有项目？

这是我的路线的样子：

```
App.NewsitemsRoute = Ember.Route.extend({
  model: function() {
    return App.Newsitem.find();
  }
}); 
```

这是我的控制器：

```
App.NewsitemsController = Ember.ArrayController.extend({
  currentPage: 1,

  canLoadMore: function() {
    return this.get('currentPage') < 10;
  }.property('currentPage'),

  loadMore: function() {
    if (this.get('canLoadMore')) {
      this.set('isLoading', true);
      var page = this.incrementProperty('currentPage');

      this.get('store').findQuery(App.Newsitem, {page:page});
    }
    else
    {
      this.set('isLoading', false);
    }
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:54:04.090

您可以更改路线以包含默认页码`1`吗？

例如

```
App.NewsitemsRoute = Ember.Route.extend({
  model: function() {
    var controller = this.controllerFor('Newsitems');
    return App.Newsitem.find({page: controller.get('currentPage')});
  }
}); 
```

编辑：如果您从控制器获取页码怎么办？

# java - Java to XML (SOAP) with Smooks 使用 FreeMarker

> ID：15249879
> 
> 赞同：1
> 
> 时间：2013-03-06T14:26:24.380
> 
> 标签：java, xml, jboss, smooks

嘿 StackOverflow 用户，

我目前正在从事 SOA 项目。作为应用服务器，我使用部署了 JBoss ESB 4.11 的 JBoss 5.1。

我尝试实现一个 Web 服务，它从客户端接收 SOAP 消息并将响应也作为 SOAP 消息发送。
当此 Web 服务收到 SOAP 消息请求时，我使用 Smooks 将此消息转换为 Java 对象，以便处理请求。
当我完成处理后，我想再次使用 Smooks 将 Java 对象转换为 XML（一个 SOAP 回复）。

我坚持从 Java 到 XML 的转换。
我在文件中的动作链`jboss-esb.xml`如下所示：

```
<services>
  <service name="myWS" description="A Service" category="WS">
        <listeners>
            <jms-listener name="myListener" busidref="myChannel"/>
        </listeners>
        <actions mep="RequestResponse" inXsd="in.xsd" outXsd="out.xsd">
            <!-- Transform incomming SOAP Message into JavaBean objects -->
            <action name="xml2java-transform" class="org.jboss.soa.esb.smooks.SmooksAction">
                <property name="smooksConfig" value="/smooks/smooks-config-soap2java.xml"/>
                <property name="resultType" value="JAVA" />
            </action>

            <action name="processRequest" class="example.soa.ProcessRequest" process="process">
                <property name="config" value="val"/>
            </action>

            <!-- Transform outgoing JavaBean objects into SOAP Message -->
            <action name="java2xml-transform" class="org.jboss.soa.esb.smooks.SmooksAction">
                <property name="smooksConfig" value="/smooks/smooks-config-java2soap.xml"/>
                <property name="reportPath" value="/smooks/report.html"/>
                <property name="resultType" value="STRING" />
            </action>
        </actions>
    </service>
</services> 
```

我`smooksConfig`的第二个 SmooksAction 看起来像这样：

```
<smooks-resource-list   xmlns="http://www.milyn.org/xsd/smooks-1.1.xsd"
                    xmlns:ftl="http://www.milyn.org/xsd/smooks/freemarker-1.1.xsd"
                    xmlns:core="http://www.milyn.org/xsd/smooks/smooks-core-1.4.xsd">

<core:filterSettings type="SAX" defaultSerialization="false"/> 

<resource-config selector="example.JavaObjectMessage">
    <resource>org.milyn.delivery.DomModelCreator</resource>
</resource-config>

<ftl:freemarker applyOnElement="example.JavaObjectMessage">
    <!--<ftl:template>/freemarker/acknowledge.flt</ftl:template> -->
    <ftl:template>
        <!-- 
        <sg:Message xmlns:sg="urn:http://example">
            <sg:MessageType>${.vars[example.JavaObjectMessage].messageType}</sg:MessageType>
        </sg:Message >
        -->
    </ftl:template>
</ftl:freemarker>
</smooks-resource-list> 
```

在`processRequest`Action 处理完传入请求后，它会将`example.JavaObjectMessage`类附加到 esb 消息。所以第二个 SmooksAction 将可以访问这个对象。

我的问题是：如何访问 'example.JavaObjectMessage' 中的属性`smooksConfig`？以及`applyOnElement`该`flt:tamplate`部分所指的内容是什么？

我已经阅读了 Smooks 用户指南，并且在 JBoss 社区中我也发布了这个问题。

我很感激任何帮助！

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:54:32.017

我终于解决了问题！我很难理解如何转换`Java`为`XML`的机制，`SmooksAction`并且我确定我仍然不了解所有内容。

无论如何，我所做的是：
1\. 仔细查看文件中的`SAX`过滤器 2\. 发现过滤器将创建一个文档，其中 Java 对象的包名称作为根元素，其所有属性作为子元素。 3\. 过滤器创建的 XML 文档可用于创建虚拟对象（在本例中为 a ） 4.然后可用作 FreeMarker 模板的输入`smooks-config.xml`
`SAX``XML`
`SAX``HashMap`
`HashMap`

所以我的`smooks-config.xml`文件现在看起来像这样：

```
<?xml version="1.0" encoding='UTF-8'?>
<smooks-resource-list   xmlns="http://www.milyn.org/xsd/smooks-1.1.xsd"
                    xmlns:ftl="http://www.milyn.org/xsd/smooks/freemarker-1.1.xsd"
                    xmlns:jb="http://www.milyn.org/xsd/smooks/javabean-1.2.xsd"
                    xmlns:core="http://www.milyn.org/xsd/smooks/smooks-core-1.4.xsd">

<resource-config selector="global-parameters">
    <param name="stream.filter.type">SAX</param>
</resource-config>

<jb:bean beanId="message" class="java.util.HashMap" createOnElement="example.JavaObjectMessage">
    <jb:value property="messageType" decoder="String" data="example.JavaObjectMessage/messageType"/>
</jb:bean>

<ftl:freemarker applyOnElement="example.JavaObjectMessage">
    <ftl:template>
    <!--     
        <sg:Message xmlns:sg="urn:http://message">
            <sg:MessageType>${message.messageType}</sg:MessageType>
        </sg:Message>
    --> 
    </ftl:template>
</ftl:freemarker>
</smooks-resource-list> 
```

如前所述：首先使用`SAX`过滤器，其次创建一个虚拟对象（`HashMap`在这种情况下），第三：使用自由标记进行模板

# java - java舍入数字

> ID：15249880
> 
> 赞同：-4
> 
> 时间：2013-03-06T14:26:24.960
> 
> 标签：java, rounding

我从数据库中检索了一些数据，但该数字有很多数字，我想对其进行四舍五入。问题是我不希望整数被四舍五入。示例：我绘制了长类型的数字 4.1010359882326385E10。我想将其四舍五入为 4.10103598823264。

即对第 15 位后的数字进行四舍五入。

我有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:30:23.130

您号码中的 E10 是科学计数法，表示您的号码实际上是 41010359882.326385。如果将其转换为 4.10103598823264，则不是在进行舍入，而是在做其他事情。

# html - 重新调整大小时如何在不移动它们的情况下浮动它们？

> ID：15249882
> 
> 赞同：0
> 
> 时间：2013-03-06T14:26:33.123
> 
> 标签：html, css

我希望我的网站对所有分辨率都友好，所以一切都居中，当我缩小窗口时，它都会向左移动并停止。但是，当我缩小窗口时，我的新闻提要低于民意调查。

继承人的CSS代码：

```
#poll {
float: left;
margin: 0px 20px;
}

#newsfeed {
float: right;
margin: 0px 20px;
}

 <div id="poll">
 <form method="post" action="http://poll.pollcode.com/t78ar8"><table border=0 width="244" bgcolor="EEEEEE" cellspacing="2" cellpadding="0"><tr><td colspan="2" height="10"><font face="Tahoma" size="2" color="000000"><b>What game site do you visit most?</b></font></td></tr><tr><td width="5"><input type="radio" name="answer" value="1" id="t78ar8answer1"></td><td>&nbsp;<font face="Tahoma" size="2" color="000000"><label for="t78ar8answer1">Ign</label></font></td></tr><tr><td width="5"><input type="radio" name="answer" value="2" id="t78ar8answer2"></td><td>&nbsp;<font face="Tahoma" size="2" color="000000"><label for="t78ar8answer2">GameSpot</label></font></td></tr><tr><td width="5"><input type="radio" name="answer" value="3" id="t78ar8answer3"></td><td>&nbsp;<font face="Tahoma" size="2" color="000000"><label for="t78ar8answer3">GameFAQs</label></font></td></tr><tr><td width="5"><input type="radio" name="answer" value="4" id="t78ar8answer4"></td><td>&nbsp;<font face="Tahoma" size="2" color="000000"><label for="t78ar8answer4">GamerZone</label></font></td></tr><tr><td width="5"><input type="radio" name="answer" value="5" id="t78ar8answer5"></td><td>&nbsp;<font face="Tahoma" size="2" color="000000"><label for="t78ar8answer5">Mmohut</label></font></td></tr><tr><td colspan="2" height="10"><center><input type="submit" value=" Vote ">&nbsp;&nbsp;<input type="submit" name="view" value=" View "></center></td></tr></a>&nbsp;</font></td></tr></table></form>

    </div>
    <div id="newsfeed">
    <!-- start sw-rss-feed code --> 
    <script type="text/javascript"> 
    <!-- 
    rssfeed_url = new Array();   
    rssfeed_url[0]="http://news.yahoo.com/rss/gaming";
    rssfeed_frame_width="500"; 
    rssfeed_frame_height="720"; 
    rssfeed_scroll="on"; 
    rssfeed_scroll_step="6"; 
    rssfeed_scroll_bar="on"; 
    rssfeed_target="_blank"; 
    rssfeed_font_size="14"; 
    rssfeed_font_face=""; 
    rssfeed_border="on";
    rssfeed_css_url="http://udel.edu/~ssell/newsfeed.css";
    rssfeed_title="on"; 
    rssfeed_title_name=""; 
    rssfeed_title_bgcolor="#3366ff"; 
    rssfeed_title_color="#fff"; 
    rssfeed_title_bgimage="http://"; 
    rssfeed_footer="off"; 
    rssfeed_footer_name="rss feed"; 
    rssfeed_footer_bgcolor="#fff"; 
    rssfeed_footer_color="#333"; 
    rssfeed_footer_bgimage="http://"; 
    rssfeed_item_title_length="50"; 
    rssfeed_item_title_color="#666"; 
    rssfeed_item_bgcolor="#fff"; 
    rssfeed_item_bgimage="http://"; 
    rssfeed_item_border_bottom="on"; 
    rssfeed_item_source_icon="off"; 
    rssfeed_item_date="off"; 
    rssfeed_item_description="on"; 
    rssfeed_item_description_length="120"; 
    rssfeed_item_description_color="#666"; 
    rssfeed_item_description_link_color="#333"; 
    rssfeed_item_description_tag="off"; 
    rssfeed_no_items="0"; 
    rssfeed_cache = "7872565d53aadc6c14b4ab1bb3f79bdb"; 
    //--> 
    </script>
    <script type="text/javascript" src="rss-feed.js"></script> 
    <!-- end sw-rss-feed code -->
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:03:50.163

如果您不想使用响应式设计或类似开关，一个简单的解决方案：尝试使用以下 CSS 将容器“#poll”和“#newsfeed”与另一个容器 (#wrapper) 一起包装：

```
#wrapper {
min-width:500px; /* 500px = max. sum of box model width values of #poll and #newsfeed" */
width: auto !important; /* IE>=7 */
width: 500px; /* IE<7 */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:41:19.283

给你的容器 div 一个 min-width 和一个 max-width 可能会解决这个问题。
确保您的投票和新闻源宽度与您的边距相结合不超过容器的最小宽度。

例子：

HTML：

```
<div id="container">
 <div id="poll"> </div>
 <div id="newsfeed"> </div>
</div> 
```

CSS：

```
#container {
max-width:1240px;
min-width:600px;
}
#poll {
float:right;
max-width:620px
min-width:280px;
margin:0 20px;
}
#newsfeed {
float:left;
max-width:620px;
min-width:280px;
margin:0 20px;
} 
```

# dynamic - 如何使用插件注册工具调试 CRM 2011 活动工作流程？

> ID：15249885
> 
> 赞同：5
> 
> 时间：2013-03-06T14:26:44.470
> 
> 标签：dynamic, dynamics-crm-2011, dynamics-crm, workflow-activity

我一直在用插件来做这件事，这是非常有用的东西，因为你不需要附加到 IIS 进程。

本教程解释了如何在本地执行此操作：http: [//athulmt.blogspot.it/2012/09/debugging-plugin-in-crm-2011.html](http://athulmt.blogspot.it/2012/09/debugging-plugin-in-crm-2011.html)

现在我正在尝试使用插件注册工具调试 CRM 2011 活动工作流程，但由于我不了解工作流程，所以没有找到任何方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-16T15:06:44.980

您是否看到此链接： [使用插件注册工具调试工作流自定义活动](https://community.dynamics.com/crm/b/microsoftdynamicscrmandstuff/archive/2013/03/08/debugging-workflow-custom-activities-with-plugin-registration-tool)

这是一个分步指南的链接，可将其用于插件，仅供参考： [逐步：使用 CRM2011 插件分析器](https://support.microsoft.com/en-us/kb/2778280)

# java - 给出的 URL 有 fileNotFoundException

> ID：15249887
> 
> 赞同：1
> 
> 时间：2013-03-06T14:26:47.500
> 
> 标签：java, url, stream, filenotfoundexception

我有以下代码，它在我的本地开发服务器上运行良好，但是当我上传到部署服务器时，我总是点击文件未找到异常

```
String urlStr = "http://" + getContext().getRequest().getServerName() +
getContext().getServletContext().getContextPath() + "test.action";
URL url = new URL(urlStr);
InputStream input = url.openStream(); //Error always occurs here, it gives me the correct URL but it says file not found. 
```

谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:44:24.613

我认为@deadlock 的评论可能是解决这个问题的关键。

你得到一个`FileNotFoundException`因为远程服务器正在发送一个 404 Not Found 响应。最可能的解释是您尝试使用错误的 URL 进行连接。在尝试连接之前打印出 URL 字符串。

* * *

所有证据都表明服务器正在发送“404 Not Found”响应......对于两个版本的代码。这通常意味着您的 URL 错误。但也有可能是其他东西：

*   您可能在 Java 和浏览器案例中使用了不同的代理，导致 Java 案例到达一些不理解 URL 的服务器。

*   可以想象，服务器正在实施一些反网络抓取机制，并向您发送 404 响应`因为这（正确地）认为您的请求不是来自网络浏览器，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:35:47.943

因为它是一个 HTTP URL，所以正确的方法如下。

```
String urlStr = "http://" + getContext().getRequest().getServerName() +
        getContext().getServletContext().getContextPath() + "test.action";
URL url = new URL(urlStr);
HttpURLConnection conn = (HttpURLConnection) url.openConnection();
if (conn.getResponseCode() == HttpURLConnection.HTTP_ACCEPTED) { 
    InputStream input = conn.getInputStream();
} 
```

# android - 安装时出错，apk 安装失败 install_parse_failed_manifest_malformed

> ID：15249889
> 
> 赞同：0
> 
> 时间：2013-03-06T14:26:54.597
> 
> 标签：android, android-manifest

我知道，这是一个非常常见的问题，但我尝试了足够多的尝试，最终导致我下载并尝试安装的应用程序出现此错误。

```
<?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
 package="com.helloandroid.android.newsdroid">
 <application android:icon="@drawable/icon">
  <activity class=".FeedsList" android:label="@string/app_name">
 <intent-filter>
  <action android:value="android.intent.action.MAIN" />
  <category android:value="android.intent.category.LAUNCHER" />
    </intent-filter>
    </activity>
    <activity class=".URLEditor" android:label="@string/url_editor" />
    <activity class=".ArticlesList" android:label="@string/articles_list" />
  </application>
  </manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:05:21.593

请遵循以下格式。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.abc"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.abc.ABC"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

# javascript - 多个 AJAX 调用出现错误

> ID：15249896
> 
> 赞同：1
> 
> 时间：2013-03-06T14:27:07.210
> 
> 标签：javascript, ajax, jquery

我正在尝试制作一个通用函数，允许我同时从不同来源获取数据。

我的解决方案基于[这篇](https://stackoverflow.com/questions/4555079/ajax-jquery-async-return-value/4555133#4555133)文章，最后得到了这个：

```
var servicesURL = 'http://www.somedomain.com/services/xml_proxy.php?url=';

function getExternalData(service, callback) {
    $.ajax({
        type: 'GET',
        url: servicesURL+service,
        dataType: 'jsonp',
        jsonpCallback: 'myfunction',
        success: function(data) { callback(data); },
        error: function(jqXHR, textStatus, errorThrown) { console.log(textStatus+': '+errorThrown); }
    });
}

getExternalData('data1.xml', function(data) {
    console.log(data)
});

getExternalData('data2.xml', function(data) {
    console.log(data)
}); 
```

这是我正在使用的代理的代码：

```
<?php
header('Content-type: application/json');
$url = $_GET['url'];
echo 'myfunction('.json_encode(simplexml_load_file($url)).')';
?> 
```

当我对该函数进行一次调用时它工作正常，但是当我进行多次调用时（如上所述），我收到以下错误：

解析器错误：错误：未调用 myfunction

未捕获的类型错误：对象 [object Object] 的属性“myfunction”不是函数

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:08:31.517

尝试将第二个调用放在第一个回调中。那应该可以解决您遇到的问题。

[http://forum.jquery.com/topic/multiple-jsonp-requests-causing-errors](http://forum.jquery.com/topic/multiple-jsonp-requests-causing-errors)

# xml - XSLT：处理忽略大小写和循环

> ID：15249899
> 
> 赞同：1
> 
> 时间：2013-03-06T14:27:10.670
> 
> 标签：xml, xslt, xslt-1.0

我在忽略大小写时获取值时遇到问题。发生的情况是，当用户输入有关他们使用的设备的数据时，他们可能会输入 38e135 作为设备编号，但稍后在表单中他们可能会输入 38E135。当我遍历设备 ID 时，我需要将它们视为一个。

当我尝试这个时，我将它们作为两个不同的设备编号。

```
<xsl:key name="distinctEquipNum" match="//EquipmentNumber" use="."/> 
```

当我尝试使用翻译功能时，我只得到其中一个。

```
<xsl:key name="distinctEquipNum" match="//EquipmentNumber" use="translate(., 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz')"/> 
```

这是我用来获取数据的循环

```
<xsl:for-each select=".//EquipmentNumber[generate-id() = generate-id(key('distinctEquipNum', .)[1])]">
        <xsl:variable name="equipNum" select="."></xsl:variable>
        <td><xsl:value-of select="$equipNum"/></td> 
```

有没有办法让我遍历设备编号并忽略大小写？

这是我正在使用的 XML 示例，

```
<Timesheet>
    <Equipment>
      <EquipmentWorkOrder>
         <EquipmentWorkOrderNumber>220923134</EquipmentWorkOrderNumber>
<EquipmentDetail>
            <EquipmentMileage>1123</EquipmentMileage>
            <EquipmentHourMeter>Hour Meter</EquipmentHourMeter>
<EquipmentType>Bucket truck</EquipmentType>
            <EquipmentNumber>38e135</EquipmentNumber>
            <MondayHours>6</MondayHours>
            <TuesdayHours>Tuesday</TuesdayHours>
            <WednesdayHours>1</WednesdayHours>
            <ThursdayHours>Thursday</ThursdayHours>
            <FridayHours>Friday</FridayHours>
            <SaturdayHours>Saturday</SaturdayHours>
            <SundayHours>Sunday</SundayHours>
        </EquipmentDetail>
    </EquipmentWorkOrder>
    <EquipmentWorkOrder>
        <EquipmentWorkOrderNumber>220923378</EquipmentWorkOrderNumber>
        <EquipmentDetail>
            <EquipmentMileage>72155</EquipmentMileage>
            <EquipmentHourMeter>Hour Meter</EquipmentHourMeter>
            <EquipmentType>4x4 Pickup</EquipmentType>
            <EquipmentNumber>2a3557</EquipmentNumber>
            <MondayHours>6</MondayHours>
            <TuesdayHours>3</TuesdayHours>
            <WednesdayHours>5</WednesdayHours>
            <ThursdayHours>2</ThursdayHours>
            <FridayHours>Friday</FridayHours>
            <SaturdayHours>2</SaturdayHours>
            <SundayHours>Sunday</SundayHours>
        </EquipmentDetail>
    </EquipmentWorkOrder>
    <EquipmentWorkOrder>
        <EquipmentWorkOrderNumber>220923134</EquipmentWorkOrderNumber>
        <EquipmentDetail>
            <EquipmentMileage>Mileage</EquipmentMileage>
            <EquipmentHourMeter>133</EquipmentHourMeter>
            <EquipmentType>Back Hoe</EquipmentType>
            <EquipmentNumber>122</EquipmentNumber>
            <MondayHours>Monday</MondayHours>
            <TuesdayHours>8</TuesdayHours>
            <WednesdayHours>3</WednesdayHours>
            <ThursdayHours>Thursday</ThursdayHours>
            <FridayHours>Friday</FridayHours>
            <SaturdayHours>Saturday</SaturdayHours>
            <SundayHours>Sunday</SundayHours>
        </EquipmentDetail>
    </EquipmentWorkOrder>
    <EquipmentWorkOrder>
        <EquipmentWorkOrderNumber>220925520</EquipmentWorkOrderNumber>
        <EquipmentDetail>
            <EquipmentMileage>72155</EquipmentMileage>
            <EquipmentHourMeter>Hour Meter</EquipmentHourMeter>
            <EquipmentType>Bucket truck</EquipmentType>
            <EquipmentNumber>38E135</EquipmentNumber>
            <MondayHours>6</MondayHours>
            <TuesdayHours>Tuesday</TuesdayHours>
            <WednesdayHours>1</WednesdayHours>
            <ThursdayHours>Thursday</ThursdayHours>
            <FridayHours>Friday</FridayHours>
            <SaturdayHours>Saturday</SaturdayHours>
            <SundayHours>Sunday</SundayHours>
        </EquipmentDetail>
    </EquipmentWorkOrder>
</Equipment></Timesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:47:22.653

您需要对用于从键中*检索的值应用与**定义*它时使用的值相同的转换，即，如果键是

```
<xsl:key name="distinctEquipNum" match="EquipmentNumber"
 use="translate(., 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz')"/> 
```

那么 Muenchian 分组表达式需要做同样的事情`translate`

```
<xsl:for-each select=".//EquipmentNumber[generate-id() =
    generate-id(key('distinctEquipNum',
      translate(., 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz')
    )[1])]"> 
```

（请注意，您不需要`//`在键的`match`表达式中，只需使用`match="EquipmentNumber"`）

# c# - 按顺序运行任务

> ID：15249908
> 
> 赞同：1
> 
> 时间：2013-03-06T14:27:29.730
> 
> 标签：c#, multithreading

我有五个 Windows 服务。我按顺序运行服务。

```
if(a_Condition)
{ 
     services[0] = new Processing_0();
// blah blah
}
if(b_Condition)
{
    service[1] = new Processing_1();
// blah blah
}
if(c_Condition)
{
    service[2] = new Processing_2();
// blah blah
}
if(d_Condition)
{
    service[3] = new Processing_3();
// blah blah
}
if(e_Condition)
{
    service[4] = new Processing_4();
// blah blah
} 
```

出于某种原因，我想使用任务，代码是：

```
Task.StartNew(() => {
if (a_Condition) { var x = new Processing_0(); ... }
})
.ContinueWith(() => {
if (b_Condition) { var x = new Processing_1(); ... }
})
.ContinueWith(() => {
if (c_Condition) { var x = new Processing_2(); ... }
}) 
.ContinueWith(() => {
if (d_Condition) { var x = new Processing_3(); ... }
})
.ContinueWith(() => {
if (e_Condition) { var x = new Processing_4(); ... }
}); 
```

可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:30:28.897

没事儿！

[在https://docs.microsoft.com/en-us/dotnet/standard/parallel-programming/chaining-tasks-by-using-continuation-tasks](https://docs.microsoft.com/en-us/dotnet/standard/parallel-programming/chaining-tasks-by-using-continuation-tasks)查看 MSDN 关于 Continuations 的文章

# .htaccess - 我应该在 .htaccess 文件中写什么来重写这个 url？

> ID：15249915
> 
> 赞同：1
> 
> 时间：2013-03-06T14:27:48.670
> 
> 标签：.htaccess, mod-rewrite

我有一台服务器停在 xyz.com 上。我在 xyz.com/ 和 xyz.com/blog 上安装了 Wordpress。我创建了一个新目录 xyz.com/mamba。

在**xyz.com/mamba**中。我想要如果用户访问 xyz.com/mamba/hello 那么应该将 url 重写为**xyz.com/mamba/index.php?message=hello**。

我应该在 xyz.com/mamba/ 目录中的 .htaccess 文件中写什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:44:15.760

尝试：

```
RewriteEngine On
RewriteBase /mamba/

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?message=$1 [L] 
```

第一行打开`/mamba/`目录的重写引擎。如果不这样做，则不会应用规则（而是应用父目录中的规则）。`RewriteBase`此处告诉规则，目标中的任何相对 URI 都应作为`/mamba/`基本 URI。2个条件表示请求不能指向现有文件或目录，规则重写请求并将其放入`message`查询字符串参数中`index.php`。

# .net - 保存动态创建的单选按钮的选中状态

> ID：15249920
> 
> 赞同：0
> 
> 时间：2013-03-06T14:28:07.640
> 
> 标签：.net, vb.net, dynamic, controls, dotnetnuke

我有一个带有以下代码的 DotNetNuke 皮肤：

```
<%@ Control language="vb" AutoEventWireup="false" Explicit="True" Inherits="DotNetNuke.UI.Skins.Skin" %>
<%@ Register TagPrefix="dnn" TagName="USER" Src="~/Admin/Skins/User.ascx" %>

<div style="float:left; width:420px; height:335px;" id="divPerguntas" runat="server"></div>
<asp:ImageButton ImageUrl="/Portals/_default/Skins/AdWin/img/Enviar.png" id="imgEnviar" runat="server" style="cursor:pointer;" />
<script runat="server">
Protected Sub EnviarClick() Handles imgEnviar.Click

    Dim conexao As SqlConnection
    Dim comando As SqlCommand
    Dim myReader As SqlDataReader
    Dim sql As String

    sql = "SELECT S.SurveyID, SO.SurveyOptionID FROM AdWin_Demo.dbo.Surveys S INNER JOIN AdWin_Demo.dbo.SurveyOptions SO ON S.SurveyID = SO.SurveyID WHERE S.VideoId = " + Request.QueryString("id") + " ORDER BY S.ViewOrder, SO.ViewOrder"
    conexao = New SqlConnection(connectionstring)
    conexao.Open()
    comando = New SqlCommand(sql, conexao)

    myReader = comando.ExecuteReader

    If myReader.HasRows Then
        Dim dt As New DataTable
        dt.Load(myReader)

            Dim dnnUserCtrl As New DotNetNuke.Entities.Users.UserController
            For Each dr As DataRow In dt.Rows
                Dim radiobuttonToCheck As RadioButton = FindControl(dr("SurveyOptionID").ToString())
            If radiobuttonToCheck.Checked = True Then
                sql = "INSERT INTO AdWin_Demo.dbo.Adwin_RespostasDadas (IDUser, SurveyOptionID) SELECT " & dnnUserCtrl.GetCurrentUserInfo.UserID & ", " & dr("SurveyOptionID").ToString()
                comando = New SqlCommand(sql, conexao)
                myReader = comando.ExecuteReader

            End If
            Next

    End If

    myReader.Close()
    conexao.Close()

End Sub
Protected Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs) Handles Me.Init

    Dim conexao As SqlConnection
    Dim comando As SqlCommand
    Dim myReader As SqlDataReader
    Dim sql As String

    sql = "SELECT S.SurveyID, S.Question, SO.OptionName, SO.SurveyOptionID FROM AdWin_Demo.dbo.Surveys S INNER JOIN AdWin_Demo.dbo.SurveyOptions SO ON S.SurveyID = SO.SurveyID WHERE S.VideoId = " + Request.QueryString("id") + " ORDER BY S.ViewOrder, S.SurveyID, SO.ViewOrder"
    conexao = New SqlConnection(connectionstring)
    conexao.Open()
    comando = New SqlCommand(sql, conexao)

    myReader = comando.ExecuteReader

    If myReader.HasRows Then
        Dim dt As New DataTable
        dt.Load(myReader)

        For Each dr As DataRow In dt.Rows

            Dim rb As New RadioButton
            rb.GroupName = "Group" & dr("SurveyID").ToString()
            rb.ID = dr("SurveyOptionID").ToString()
            rb.Text = dr("OptionName").ToString()
            divPerguntas.Controls.Add(rb)
            divPerguntas.Controls.Add(New LiteralControl("<br/>"))

        Next
        Dim hr As New HtmlGenericControl("hr")
        divPerguntas.Controls.Add(hr)
    End If

    myReader.Close()
    conexao.Close()

End Sub
</script> 
```

当我单击图像按钮时，我想将用户的答案发送到数据库，但是单选按钮消失了，并且我失去了选中状态......我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:45:56.163

使用 DotNetNuke，您正在使用的代码最好放入模块中，而不是放入皮肤中。

查看模块开发 wiki，了解如何开始使用模块开发 [http://www.dotnetnuke.com/Resources/Wiki/Page/Module-Development.aspx](http://www.dotnetnuke.com/Resources/Wiki/Page/Module-Development.aspx)

# web - 如何在hunchentoot中处理多个文件上传？

> ID：15249921
> 
> 赞同：3
> 
> 时间：2013-03-06T14:28:09.310
> 
> 标签：web, lisp, common-lisp, hunchentoot

我知道如何使用 hunchentoot 处理单个文件上传`hunchentoot:post-parameter`，但是当我添加属性时`multiple`，即`<input name="file" type="file" multiple="multiple"/>`. 我`(hunchentoot:post-parameter "file")`只买了其中一个。是否存在（以及什么是）接收用户选择的所有文件的机制？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T21:48:40.013

Hunchentoot API 不会直接让您访问多个上传的文件，但您可以使用它`(hunchentoot:post-parameters *request*)`来检索所有 POST 参数的列表（包括上传的文件）。这将是一个列表，您可以使用标准列表技术（例如`(remove "file" (hunchentoot:post-parameters hunchentoot:*request*) :test (complement #'equal) :key #'car)`）获取所有上传文件的列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-10T19:08:14.783

这是 hunchentoot 中一项相当直接的任务。假设您有一个带有and的 html`<input>`元素，您可以访问与“文件”输入关联的所有文件，如下所示：`name="files"``multi="true"`

```
(loop for post-parameter in (hunchentoot:post-parameters*)
            if (equal (car post-parameter) "files")
            collect post-parameter)) 
```

这将为您提供一个列表，其长度应与与名称“files”关联的上传文件的数量相匹配。每个元素都将是一个如下所示的列表：

```
("files" #P"/temporary/file1" "name of file" "file type") 
```

更多信息可以在文档齐全的[参考](http://weitz.de/hunchentoot/#reference)中找到。

# jquery - 如何在 div 中正确添加图像？

> ID：15249932
> 
> 赞同：-1
> 
> 时间：2013-03-06T14:28:30.240
> 
> 标签：jquery, image

再会

脚本：

```
var img_src="../Images/" + data;
$("#div_yui_img").html(\'<img src="img_src" id="yui_img" height="100" width="100">\'); 
```

但在添加 html 后，我看到：

```
<div id="div_yui_img"><img src="img_src" id="yui_img" height="100" width="100"></div> 
```

请告诉我如何在 div 中正确添加图像，即获取（示例）：

```
<div id="div_yui_img"><img src="../Images/test.jpg" id="yui_img" height="100" width="100"></div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:30:41.610

使用您的方法：

```
var img_src="../Images/" + data;
$("#div_yui_img").html('<img src="'+img_src+'" id="yui_img" height="100" width="100">'); 
```

# c# - 列表框数据绑定 NewItemPlaceholder

> ID：15249934
> 
> 赞同：3
> 
> 时间：2013-03-06T14:28:34.733
> 
> 标签：c#, wpf, xaml

我有一个绑定到列表框的可观察集合。该集合有 2 个项目，但列表框显示 3 个项目（例如，实际在可观察集合中的 2 个项目和 NewItemPlaceholder 的附加项目。

我希望它只显示 2 个项目。

下面是我的 XAML。

```
<ListBox MinHeight="20" MinWidth="20" Name="MultipleSelectionsMultipleWagersListBox"  Visibility="{Binding Path=Coupon.BarcodeText, Converter={StaticResource CouponBarcodeToVisibilityConverter1}, ConverterParameter=994450_994550}" Height="AUto" Width="Auto" VerticalAlignment="Stretch"  HorizontalAlignment="Stretch" Margin="5"
         ItemsSource="{Binding Path=BetViewModels}" Grid.Row="1" Grid.Column="1" >
    <ListBox.ItemTemplate>
        <DataTemplate>
            <View:BetView  DataContext="{Binding}" Name="ThisBet" Margin="5"/>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

这是c#

```
 private ObservableCollection<BetViewModel> _betViewModels = new ObservableCollection<BetViewModel>();
    public ObservableCollection<BetViewModel> BetViewModels
    {
        get { return _betViewModels; }
        set
        {
            if (Equals(value, _betViewModels)) return;
            _betViewModels = value;
            OnPropertyChanged("BetViewModels");
        }
    } 
```

这是填充 betViewModels 的代码：

```
var betViewModel = new BetViewModel { Bet = new Bet() };
betViewModel.Bet.SelectionName = "Chelsea";
betViewModel.Bet.Price = "4/9";
betViewModel.Bet.Market = "90 Minutes";
betViewModel.Bet.ExpectedOdd = DateTime.Now;
BetViewModels.Add(betViewModel);

betViewModel = new BetViewModel { Bet = new Bet() };
betViewModel.Bet.SelectionName = "Chelsea";
betViewModel.Bet.Price = "4/9";
betViewModel.Bet.Market = "90 Minutes";
betViewModel.Bet.ExpectedOdd = DateTime.Now;
BetViewModels.Add(betViewModel); 
```

如何从显示新项目位置的附加项目切换此选项

这是显示占位符的图像

![在此处输入图像描述](../Images/97524dc4fc2b3398937eba02539ed0c0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T02:24:32.550

您的代码中没有任何内容应该添加额外的空项。可能有一些其他代码添加到 BetViewModels，或者如果您将生成的 ICollectionView 绑定到您未显示的其他内容（例如可编辑的 DataGrid），则该集合可能会发生更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-27T17:53:52.303

DataGrid 支持添加必须从空白开始的新行。如果您的 ItemsSource 绑定到 ListBox/ItemsControl 和 DataGrid，则需要将 DataGrid 的“CanUserAddRows”属性设置为“False”。

我在哪里找到答案： http: [//www.mindstick.com/Forum/1519/How%20do%20I%20remove%20a%20listbox%20new%20item%20placeholder](http://www.mindstick.com/Forum/1519/How%20do%20I%20remove%20a%20listbox%20new%20item%20placeholder)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:05:19.093

您的示例代码是否也提供了此问题？

有多少项目包含你的 _betViewModels.count 在调试实际上只有 2 个项目？

看来您`BetViewModel`在末尾添加了一个空白

我建议检查你的逻辑，它提供填充你的项目

*   如果它是一个循环，它应该`(counter<yourDatasource.Count)`只是例如

# php - 添加模块后的zend框架2致命错误

> ID：15249935
> 
> 赞同：0
> 
> 时间：2013-03-06T14:28:35.997
> 
> 标签：php, localhost, zend-framework2

我在本地主机上安装 ZF2，然后测试公共页面，它可以工作。
我尝试下载一个模块[MwopGuestbook](https://github.com/EvanDotPro/MwopGuestbook)，然后 zend 显示错误：

```
Fatal error: Interface 'Zend\Module\Consumer\AutoloaderProvider' not 
found in D:\xampp\htdocs\zend\module\MwopGuestbook\Module.php on line 8 
```

我们如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:38:07.403

那里看起来像是过时的代码，我猜这是`Zend\ModuleManager\Feature\*`实现的早期化身

如果是，您可以尝试将 MwopGuestbook/Module.php 中的前 7 行更改为以下内容...

```
<?php

namespace MwopGuestbook;

use Zend\ModuleManager\Feature\AutoloaderProviderInterface;

class Module implements AutoloaderProviderInterface
{ 
```

它应该解决有关找不到接口的抱怨，但不能保证该代码的其他部分没有使用过时的调用：-/

# c# - 如何在查询字符串中传递 json？

> ID：15249941
> 
> 赞同：4
> 
> 时间：2013-03-06T14:28:46.720
> 
> 标签：c#, javascript, jquery, asp.net

我正在尝试通过使用 Jquery.param 将 JSON 编码到 URI 中来将 JSON 发送到服务器，但出现以下错误。

```
window.location.href = BriefExportPath+$.param(JSON.stringify({
                        title: $('.ui-dialog-title').text(),
                        items: ko.utils.arrayMap(Neptune.BriefCountrySection.SelectedCountries(), function (item) {
                            return item.ItemName
                        })
                    }))

[CustomAuthorize(Definitions.RoleSonarAdmin)]
        public FileContentResult ExportCsv(string json)
        {
            var x = new System.Web.Script.Serialization.JavaScriptSerializer();
            object obj = x.DeserializeObject(json);
            //return File(Helpers.BriefCsvBytes.GetCsvBytes(items), "text/csv", title); 
            return null;
        }

http://dev.neptune.local/Briefs/ExportCsv?0=%7B&1=%22&2=t&3=i&4=t&5=l&6=e&7=%22&8=%3A&9=%22&10=B&11=r&12=i&13=e&14=f&15=+&16=C&17=o&18=u&19=n&20=t&21=r&22=y&23=+&24=L&25=i&26=s&27=t&28=%22&29=%2C&30=%22&31=i&32=t&33=e&34=m&35=s&36=%22&37=%3A&38=%5B&39=%22&40=A&41=f&42=r&43=i&44=c&45=a&46=%22&47=%2C&48=%22&49=A&50=m&51=e&52=r&53=i&54=c&55=a&56=s&57=%22&58=%2C&59=%22&60=A&61=s&62=i&63=a&64=%22&65=%2C&66=%22&67=E&68=u&69=r&70=o&71=p&72=e&73=%22&74=%5D&75=%7D 
```

![在此处输入图像描述](../Images/21f0029b49ee7728d64c25d0920fbc03.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T14:35:15.363

[从jQuery.param()](http://api.jquery.com/jQuery.param/)的手册中：

> 创建**数组或对象**的序列化表示，适用于 URL 查询字符串或 Ajax 请求。

您正在传递它的返回值`JSON.stringify`是一个**string**。

您需要改为传递一个对象。：

```
var json = JSON.stringify(etc etc);
var url = BriefExportPath + $.param( { "json": json } );
location = url; 
```

然后，您的服务器端代码将需要从`json`查询键中提取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:31:26.737

为什么你不使用这个

```
$.ajax({
    url: url,
    type: "POST",
    data: JSON.stringify(data),
    contentType: "application/json",
    complete: callback
}); 
```

而不是查询字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:31:56.330

您的服务器希望输入以某个可预测的变量名称结尾，但您似乎尝试将其放入名为 GET 的变量中`0`，正如我们在`ExportCsv?0=`

您的代码所期望的是 `ExportCsv?json=`

确保将值传递给正确的 GET 变量名称

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T20:25:25.640

```
var jObj = (JObject)JsonConvert.DeserializeObject(json); 
```

# grails - 在 Grails 域类验证中处理错误的最佳方法

> ID：15249945
> 
> 赞同：3
> 
> 时间：2013-03-06T14:28:59.413
> 
> 标签：grails, groovy, error-handling

我们有一个像“student/create”这样的 API 命令来创建一个新的学生对象。代码如下所示：

```
def student = new Student(firstName: firstName, lastName: lastName, email: email)

if (! student.validate()) {
    response.error = "UNKNOWN_ERROR" // in case we can't find anything better

    student.errors.allErrors.each { error ->
        // set response.error to an appropriate value
        println error
    }
} else {
    student.save()
} 
```

我们的目标是在验证失败时给出合理的错误消息，例如“EMAIL_DUPLICATE”或“FIRSTNAME_LENGTH”，因此我们希望根据一组预期错误来测试我们得到的错误，以便我们可以做出这样的响应。

这是我们从中得到的`println`：

```
字段“电子邮件”上的对象“com.example.Student”中的字段错误：拒绝值 [student@example.com]；代码 [com.example.Student.email.unique.error.com.example.Student.email,com.example.Student.email.unique.error.email,com.example.Student.email.unique.error.java。 lang.String,com.example.Student.email.unique.error,student.email.unique.error.com.example.Student.email,student.email.unique.error.email,student.email.unique.error。 java.lang.String,student.email.unique.error,com.example.Student.email.unique.com.example.Student.email,com.example.Student.email.unique.email,com.example.Student。 email.unique.java.lang.String,com.example.Student.email.unique,student.email.unique.com.example.Student.email,student.email.unique.email,student.email.unique.java。 lang.String,student.email.unique,unique.com.example.Student.email,unique.email,unique.java。lang.String，唯一]; 论据 [电子邮件，com.example.Student 班级，student@example.com.org]；默认消息 [类 [{1}] 的属性 [{0}]，值为 [{2}] 必须是唯一的]
```

我如何才能确定这意味着该电子邮件已在数据库中使用，以便我可以告诉 API 用户？

（要清楚，我想给出一个计算机可读的消息，比如“EMAIL_DUPLICATE”，而不是“学生的属性电子邮件，价值 student@example.com 必须是唯一的”）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T14:43:02.013

不确定它是否会在更多情况下起作用，而不仅仅是这种情况，但确实：

```
 println "${error.objectName}_${error.codes[-1]}".toUpperCase() 
```

把你带到附近的任何地方？

# google-apps-script - 关于从哪里开始使用我的应用程序的建议

> ID：15249949
> 
> 赞同：0
> 
> 时间：2013-03-06T14:29:10.923
> 
> 标签：google-apps-script, google-drive-api

我是一个使用 Google Apps Script 和 JavaScript 的相对初学者，但我已经玩了好几天了，我已经创建了一些简单的程序，我真的很想尝试开始我的梦想项目，即使它需要我永远。我想要一些关于在制作 UI 方面我应该使用什么以及我应该使用什么数据库来保存信息（如果这个应用程序甚至可能的话）的建议。

**该应用程序** 我想创建一个使用 Google Drive 作为文件源的在线小说管理应用程序。UI 将有一棵树，展示小说中的所有 google 驱动器文件。单击场景时，该场景将打开以供编辑。

**问题**

1.  这个应用程序有可能吗？
2.  如果是这样，就 UI 而言，您认为我应该使用什么？谷歌提供的UIbuilder？HTML 服务 - 例如，我可以在右侧有一个框架，需要编辑的谷歌文档可以在右侧打开吗？
3.  最后，我应该使用什么数据库？数据库必须存储章节名称和位置，以及场景名称、位置和场景对应的 google doc ID。我已经掌握了 ScriptDB 和电子表格......如果这两者中的任何一个都不是最佳选择，那么其他一些数据库会更好吗？为什么？

希望这个应用程序能够以树形形式概述小说，允许您打开特定场景并对其进行编辑、创建新场景以及更改场景的显示顺序。然后当这个人完成他们的小说时，该应用程序会将所有场景编译成一本小说（也在谷歌驱动器中）。

任何见解或建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:30:17.007

看看你最近发布的问题，我想我对你正在尝试做的事情有一个很好的了解，这看起来是一个令人兴奋的项目......我只能鼓励你尽快开始它，即使你'对你需要使用的所有工具感到不舒服，最好的学习方法可能是做一些对你来说很重要的事情。

现在你的 3 个问题： 1 - 这在 GAS 环境中是完全可行的，应该不会太难通过。

2 - GUI builder 是一种从 UI 开始的简单方法，但它缺少许多您将需要的功能和工具（例如树），并且如果您需要，也不容易扩展。根据您对 html 的了解，选择主要是在 UiApp 和 html 服务之间...我会选择 UiApp 因为我在 html 方面一点也不擅长（但这在这里不相关;-) 但两者都能够构建你的东西想要，很容易扩展，而且调试起来也不难。如果您要寻找“漂亮的功能”，则优势可能在于 html 服务，因为它为 3rd 方工具打开了大门……但同样，这是个人选择的问题。

3 - [Mogsdad 最近的一篇文章](https://stackoverflow.com/questions/15145918/what-is-faster-scriptdb-or-spreadsheetapp/15149959#15149959)表明，电子表格在数据存储和操作方面比 scriptDb 更快。我发现它也更容易，因为我可以在调试时对电子表格中的数据有一个全局视图。当然，必须将电子表格视为在数组级别操作的容器和数据，以从最大性能中受益。我在很多数据库应用程序中都非常满意地使用它。

对于这些不符合 sto 标准的“一般考虑”，我们深表歉意；-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:10:46.263

是的，您要求的所有事情似乎都不是太荒谬。我建议坚持使用 Google 服务，因为它们都很容易集成。首先，您可能需要使用 UI builder/ [UI services](https://developers.google.com/apps-script/uiapp)。在这个项目中，您可能需要一些 UiApp 不提供的功能。此时，您可能希望切换到 HtmlService。

对于数据库问题，我的答案是相同的。您可能希望为您的数据库使用电子表格，以便在需要时可以轻松地手动编辑它。您可能没有其他数据库可以提供的性能，但它会很容易测试和弄乱您的电子表格“数据库”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:08:39.570

您可以从了解基础开始。那里有大量的数据。我建议您在“按需”的基础上进行研究。为您的应用程序设计一些工作/数据流模式，您可以尝试使用[Chrome 的 Fluid UI 扩展](https://chrome.google.com/webstore/detail/fluid-ui/obgmmkbgpilmggfkhganmcmpemnhimgg?hl=en-US&utm_source=chrome-ntp-launcher)。看看[这个](https://marketplace.firefox.com/developers/)来自 Mozilla 的应用程序设计。

当你读完这些后，你可能想看看[Phonegap](http://phonegap.com/)和[Web 开发的基础知识，](https://developer.mozilla.org/en-US/docs/Web_Development/Introduction_to_Web_development)以及如何将两者结合起来。

还有几种使用/存储数据的方法。您可以尝试[WebSQL](http://www.w3.org/TR/webdatabase/)，尽管他们不再开发它。您可以查看[IndexedDB](http://www.html5rocks.com/en/tutorials/indexeddb/todo/)。你可以尝试使用[cookies](https://stackoverflow.com/questions/4152696/sessions-and-cookies-in-mobile-application)。

说真的，四处看看。您可能还喜欢[Wrox](http://www.wrox.com)的书。他们信息量很大，并且在阅读演示方面做得很好。虽然书很大；）

# jquery - 复选框不会验证

> ID：15249953
> 
> 赞同：0
> 
> 时间：2013-03-06T14:29:17.603
> 
> 标签：jquery, jquery-validate

我有一个要在客户端验证的表单，并且我正在使用 jQuery Validate 来完成该任务。验证适用于其他（输入）字段，但不适用于复选框。

我究竟做错了什么？

```
<form name="insert_new_lesson" id="insert_new_lesson" method="post" action="" class="lesson-form" enctype="multipart/form-data" novalidate="novalidate">
    <input class="{category: true}" type="checkbox" name="category[]" value="15" id="grade15">
    ... rest of the fields...

$("#insert_new_lesson").validate({
    errorPlacement: function (error, element) { 
        error.insertBefore(element);    
    },
    rules: {
        category: {
            required: 'input[type="checkbox"]:checked',
        },
        ...rest of the fields (validation works) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:54:07.260

这是 jQuery Validator 的当前问题。在官方存储库中[查看此问题。](https://github.com/jzaefferer/jquery-validation/issues/423)

如其中一条评论所述，您必须执行以下操作才能验证具有相同名称的字段：

```
$.validator.prototype.elements = function() {
    var validator = this;
    // select all valid inputs inside the form (no submit or reset buttons)
    return $(this.currentForm)
        .find(":input")
        .not(":submit, :reset, :image, [disabled]")
        .not( this.settings.ignore )
        .filter(function() {
            !this.name && validator.settings.debug && window.console && console.error( "%o has no name assigned", this);
            return validator.objectLength($(this).rules());
        });
}; 
```

请注意，我已经从 GitHub 的评论中修改了代码。用户 dsand1234 used `find("input")`，应该`find(":input")`在第 5 行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:26:33.053

试试这个：

```
$.validator.addMethod('atLeastOne', function(value, element, param) {
    return $('input[name^="category"]').is(':checked');
}, 'Please select at least one checkbox');

$(function() {
    $("#insert_new_lesson").validate({rules: {
            'category[]': 'atLeastOne'
        }, groups: {
            checkboxes: 'category[]'
        }, errorPlacement: function(error, elem) {
            if (elem.attr('name').match(/category\[\]/)) {
                $('input[name^="category"]:last').next().after(error);
            }
            else {
                elem.next().after(error);
            }
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:33:12.257

你能试试这个json的语法吗（单引号外，双引号）：

```
class='{"category": true}' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-18T22:23:53.003

这对我有用，是一个简单的解决方案。只需在规则中用引号将“名称”括起来。

```
rules: {
    'category[]': {
        required: true
    }
} 
```

我在[这里的另一篇文章](https://stackoverflow.com/questions/14966465/validating-multiple-checkboxes-using-jquery-validation)中找到了这个解决方案。

# 3d - 为什么启用多重采样时遮挡查询结果不准确？

> ID：15249955
> 
> 赞同：1
> 
> 时间：2013-03-06T14:29:27.293
> 
> 标签：3d, directx, direct3d

最近，我在我的项目中使用了遮挡查询技术，并且在不启用多重采样 (msaa) 时效果很好。但是当我启用多重采样时，我发现遮挡查询结果不准确，有时即使我确定对象被遮挡，它也会返回 < 10 像素。我猜这是由深度缓冲区多重采样引起的，但我不确定。我使用 D3D9。如何解决这个问题？

# sql-server-2008 - 在sql server 2008中导入excel文件

> ID：15249957
> 
> 赞同：3
> 
> 时间：2013-03-06T14:29:31.730
> 
> 标签：sql-server-2008, excel-2007, importerror

我知道这个问题可能会重复。但我对此有不同的看法。我已经创建了没有数据的表“CRM_Doctor_Budget”。

![在 sql server 2008 中创建的表](../Images/dc8ade22c90f0d59974337a80fc24384.png)

我想从excel文件在这个表中插入数据。

我正在使用导入和导出数据（32 位）。

按照我做的步骤：

![第一步](../Images/b464be46644936150eb60ba72a413dd3.png)

![第二步](../Images/1bf85652b1f57de2af7bae486af6bcdc.png)

![第三步](../Images/20fe1ceac581d87eed9344e7b185a9e7.png)

![第五步](../Images/6ecc2470364caba9599c264e75ca6da8.png)

![第六步](../Images/06a700045c0389b60c506366da2e05b0.png)

![第七步](../Images/b7b8bae7069ebc159d32c51596279a14.png)

![第八步](../Images/05bf422f754d78296e333037754ec780.png)

我得到的错误：

```
- Validating (Error)
Messages
Error 0xc0202049: Data Flow Task 1: Failure inserting into the read-only column "Id".
 (SQL Server Import and Export Wizard)

Error 0xc0202045: Data Flow Task 1: Column metadata validation failed.
 (SQL Server Import and Export Wizard)

Error 0xc004706b: Data Flow Task 1: "component "Destination - CRM_Doctor_Budget" (59)" failed validation and returned validation status "VS_ISBROKEN".
 (SQL Server Import and Export Wizard)

Error 0xc004700c: Data Flow Task 1: One or more component failed validation.
 (SQL Server Import and Export Wizard)

Error 0xc0024107: Data Flow Task 1: There were errors during task validation.
 (SQL Server Import and Export Wizard) 
```

我在转换 varchar、int、smallint、bit 数据类型时遇到错误。因为 excel 文件具有所有数据的通用数据类型。在我已经创建的表中，我有 varchar、int、float、smallint 和 bit。

检查“启用身份插入”后，我得到的错误较少，但错误如下：

```
Copying to [dbo].[CRM_Doctor_Budget] (Error)
Messages
Error 0xc0202009: Data Flow Task 1: SSIS Error Code DTS_E_OLEDBERROR.  An OLE DB error has occurred. Error code: 0x80004005.
An OLE DB record is available.  Source: "Microsoft SQL Server Native Client 10.0"  Hresult: 0x80004005  Description: "Unspecified error".
 (SQL Server Import and Export Wizard)

Error 0xc020901c: Data Flow Task 1: There was an error with input column "Id" (143) on input "Destination Input" (72). The column status returned was: "The value violated the integrity constraints for the column.".
 (SQL Server Import and Export Wizard)

Error 0xc0209029: Data Flow Task 1: SSIS Error Code DTS_E_INDUCEDTRANSFORMFAILUREONERROR.  The "input "Destination Input" (72)" failed because error code 0xC020907D occurred, and the error row disposition on "input "Destination Input" (72)" specifies failure on error. An error occurred on the specified object of the specified component.  There may be error messages posted before this with more information about the failure.
 (SQL Server Import and Export Wizard)

Error 0xc0047022: Data Flow Task 1: SSIS Error Code DTS_E_PROCESSINPUTFAILED.  The ProcessInput method on component "Destination - CRM_Doctor_Budget" (59) failed with error code 0xC0209029 while processing input "Destination Input" (72). The identified component returned an error from the ProcessInput method. The error is specific to the component, but the error is fatal and will cause the Data Flow task to stop running.  There may be error messages posted before this with more information about the failure.
 (SQL Server Import and Export Wizard) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T07:13:39.180

我已经解决了这个问题。我做了一些改变，比如：

在编辑映射中：因为我有 ID 作为标识列，它是自动生成的列。

和以前一样，我已经映射了 Id 列。

**现在这一次我没有映射 ID 列并取消选中“启用我身份插入”**

否则我按原样执行步骤.. 我已经完成了这个小改动，并且我成功导入了记录。:) 谢谢大家的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:17:34.180

ID 列是标识列吗？因为如果是，您需要单击“启用身份插入”复选框才能使其正常工作。

# jquery - 一旦我点击标签选择按钮应该打开

> ID：15249958
> 
> 赞同：11
> 
> 时间：2013-03-06T14:29:33.273
> 
> 标签：jquery, css

如果我点击标签，我想打开选择按钮，

这是代码

```
<label>sachin</label>
<select>
    <option>1</option>
    <option>2</option>
    <option>3</option>
    <option>4</option>
</select> 
```

css或jquery有什么办法吗？我不确定这件事。

小提琴：http: [//jsfiddle.net/Yh3Jf/](http://jsfiddle.net/Yh3Jf/)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-09-20T11:45:36.667

这里不需要 javascript，只需使用 CSS 设置样式并使用指针事件：

```
<label>
<select>
   <option value="0">Zero</option>
   <option value="1">One</option>
</select>
</label> 
```

并且相对的CSS是

```
label:after {
    content:'\25BC';
    display:inline-block;
    color:#000;
    background-color:#fff;
    margin-left:-17px;   /* remove the damn :after space */
    pointer-events:none; /* let the click pass trough */
} 
```

这是一个丑陋的小提琴样本： [https ://jsfiddle.net/1rofzz89/](https://jsfiddle.net/1rofzz89/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-17T03:48:16.040

错误的人；要获得本机选择列表，只需在鼠标下创建一个不可见的克隆：

```
$("label").mouseover(function(){
    var $this = $(this);
    var $input = $('#' + $(this).attr('for')); 
    if ($input.is("select") && !$('.lfClon').length) {
        var $clon = $input.clone();
        var getRules = function($ele){ return {
            position: 'absolute',
            left: $ele.offset().left,
            top: $ele.offset().top,
            width: $ele.outerWidth(),
            height: $ele.outerHeight(),
            opacity: 0,
            margin: 0,
            padding: 0
        };};
        var rules = getRules($this);
        $clon.css(rules);
        $clon.on("mousedown.lf", function(){
            $clon.css({
                marginLeft: $input.offset().left - rules.left,
                marginTop: $input.offset().top - rules.top,
            });
            $clon.on('change blur', function(){
                $input.val($clon.val()).show();
                $clon.remove();
            });
            $clon.off('.lf');
        });
        $clon.on("mouseout.lf", function(){
            $(this).remove();
        });
        $clon.prop({id:'',className:'lfClon'});
        $clon.appendTo('body');
    }
}); 
```

在 IE10、Chrome 27 和 Firefox 22 上测试

演示：http: [//jsfiddle.net/Yh3Jf/24/](http://jsfiddle.net/Yh3Jf/24/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T14:49:46.377

你想做这样的事情吗？ [http://jsfiddle.net/Yh3Jf/6/](http://jsfiddle.net/Yh3Jf/6/)

```
 <label id="l">sachin</label>
    <select id="s">
        <option>1</option>
        <option>2</option>        
        <option>3</option>
        <option>4</option>
   </select>  

$("#l").click(function () {
    var size = $('#s option').size();
    if (size != $("#s").prop('size')) {
        $("#s").prop('size', size);
    } else {
        $("#s").prop('size', 1);
    }
}) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-06T14:32:34.367

如果您只是想获得对选择框的关注（从而允许您向上和向下箭头），您可以使用类似...

```
<label for="sel">sachin</label>
<select id="sel">
    <option>1</option>
    <option>2</option>
    <option>3</option>
    <option>4</option>
</select> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-01-31T22:51:59.777

如果其他人正在搜索这个，我通过扩展标签的填充来完成这个行为`<select>`，并使标签定位为绝对。

```
<div class="field-select">
  <label class="field-select__label" for="selector">Clickable Label</label>
  <select class="field-select__input" id="selector" name="selector">
    <option value="val1">value 1 </option>
    </option><option value="val2">Value 2</option>
  </select>
</div> 
```

```
 .field-select {
  position: relative;
}

.field-select__label {
  position: absolute;
  pointer-events: none;
  top: 5px;
  left: 0;
}

.field-select__input {
  padding: 50px 50px 20px 10px;
} 
```

检查[codepen上的工作示例](https://codepen.io/nouranology/pen/rNWapvL)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T14:32:17.517

不幸的是，无法使用任何类型的代码来显示本机选择下拉菜单。

但是我看到人们使用背景图像然后弹出选择（检查 Mightydeals.com）

如果不解析到jquery和一些html来产生效果。

# php - 使用 PHP 和 MySQL 的 DataTables：如何修改 mysql 查询？

> ID：15249961
> 
> 赞同：1
> 
> 时间：2013-03-06T14:29:36.097
> 
> 标签：php, mysql, datatables

所以我试图使用我数据库中的一个表来填充一个 html 表。让我们称其为“业务”，其中一列称为“id”。我正在尝试使用 WHERE。我例如像..

```
SELECT * all FROM business WHERE id=4\. 
```

我需要修改 $sWhere 吗？

这是我用于服务器端处理的代码。

```
/*
 * Script:    DataTables server-side script for PHP and MySQL
 * Copyright: 2010 - Allan Jardine, 2012 - Chris Wright
 * License:   GPL v2 or BSD (3-point)
 */
/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 * Easy set variables
 */

/* Array of database columns which should be read and sent back to DataTables. Use a space where
 * you want to insert a non-database field (for example a counter or static image)
 */
$aColumns = array('bus_num', 'bus_phone', 'category_name', 'bus_status');

/* Indexed column (used for fast and accurate table cardinality) */
$sIndexColumn = "id";

/* DB table to use */
$sTable = "business";

/* Database connection information */
$gaSql['user']       = "dev";
$gaSql['password']   = "dev";
$gaSql['db']         = "dev";
$gaSql['server']     = "localhost";

/* REMOVE THIS LINE (it just includes my SQL connection user/pass) */
$db = mysql_connect('localhost', 'dev', 'dev');

if (!$db){
    die ("Could not connect to database" . mysql_error());
    exit();
}

$db_selected = mysql_select_db('dev', $db);

if(!$db_selected) {
    die ('Can\'t use:' . mysql_error());
}

/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 * If you just want to use the basic configuration for DataTables with PHP server-side, there is
 * no need to edit below this line
 */

/*
 * Local functions
 */
function fatal_error ( $sErrorMessage = '' )
{
    header( $_SERVER['SERVER_PROTOCOL'] .' 500 Internal Server Error' );
    die( $sErrorMessage );
}

/*
 * MySQL connection
 */
if ( ! $gaSql['link'] = mysql_pconnect( $gaSql['server'], $gaSql['user'], $gaSql['password']  ) )
{
    fatal_error( 'Could not open connection to server' );
}

if ( ! mysql_select_db( $gaSql['db'], $gaSql['link'] ) )
{
    fatal_error( 'Could not select database ' );
}

/*
 * Paging
 */
$sLimit = "";
if ( isset( $_GET['iDisplayStart'] ) && $_GET['iDisplayLength'] != '-1' )
{
    $sLimit = "LIMIT ".intval( $_GET['iDisplayStart'] ).", ".
        intval( $_GET['iDisplayLength'] );
}

/*
 * Ordering
 */
$sOrder = "";
if ( isset( $_GET['iSortCol_0'] ) )
{
    $sOrder = "ORDER BY  ";
    for ( $i=0 ; $i<intval( $_GET['iSortingCols'] ) ; $i++ )
    {
        if ( $_GET[ 'bSortable_'.intval($_GET['iSortCol_'.$i]) ] == "true" )
        {
            $sOrder .= $aColumns[ intval( $_GET['iSortCol_'.$i] ) ]."
                ".($_GET['sSortDir_'.$i]==='asc' ? 'asc' : 'desc') .", ";
        }
    }

    $sOrder = substr_replace( $sOrder, "", -2 );
    if ( $sOrder == "ORDER BY" )
    {
        $sOrder = "";
    }
}

/*
 * Filtering
 * NOTE this does not match the built-in DataTables filtering which does it
 * word by word on any field. It's possible to do here, but concerned about efficiency
 * on very large tables, and MySQL's regex functionality is very limited
 */
$sWhere = "";
if ( isset($_GET['sSearch']) && $_GET['sSearch'] != "" )
{
    $sWhere = "WHERE (";
    for ( $i=0 ; $i<count($aColumns) ; $i++ )
    {
        if ( isset($_GET['bSearchable_'.$i]) && $_GET['bSearchable_'.$i] == "true" )
        {
            $sWhere .= $aColumns[$i]." LIKE '%".mysql_real_escape_string( $_GET['sSearch'] )."%' OR ";
        }
    }
    $sWhere = substr_replace( $sWhere, "", -3 );
    $sWhere .= ')';
}

/* Individual column filtering */
for ( $i=0 ; $i<count($aColumns) ; $i++ )
{
    if ( isset($_GET['bSearchable_'.$i]) && $_GET['bSearchable_'.$i] == "true" && $_GET['sSearch_'.$i] != '' )
    {
        if ( $sWhere == "" )
        {
            $sWhere = "WHERE ";
        }
        else
        {
            $sWhere .= " AND ";
        }
        $sWhere .= $aColumns[$i]." LIKE '%".mysql_real_escape_string($_GET['sSearch_'.$i])."%' ";
    }
}

/*
 * SQL queries
 * Get data to display
 */
$sQuery = "
    SELECT SQL_CALC_FOUND_ROWS ".str_replace(" , ", " ", implode(", ", $aColumns))."
    FROM   $sTable
    $sWhere
    $sOrder
    $sLimit 
";
$rResult = mysql_query( $sQuery, $gaSql['link'] ) or fatal_error( 'MySQL Error: ' . mysql_errno() );

/* Data set length after filtering */
$sQuery = "
    SELECT FOUND_ROWS()
";
$rResultFilterTotal = mysql_query( $sQuery, $gaSql['link'] ) or fatal_error( 'MySQL Error: ' . mysql_errno() );
$aResultFilterTotal = mysql_fetch_array($rResultFilterTotal);
$iFilteredTotal = $aResultFilterTotal[0];

/* Total data set length */
$sQuery = "
    SELECT COUNT(".$sIndexColumn.")
    FROM   $sTable
";
$rResultTotal = mysql_query( $sQuery, $gaSql['link'] ) or fatal_error( 'MySQL Error: ' . mysql_errno() );
$aResultTotal = mysql_fetch_array($rResultTotal);
$iTotal = $aResultTotal[0];

/*
 * Output
 */
$output = array(
    "sEcho" => intval($_GET['sEcho']),
    "iTotalRecords" => $iTotal,
    "iTotalDisplayRecords" => $iFilteredTotal,
    "aaData" => array()
);

while ( $aRow = mysql_fetch_array( $rResult ) )
{
    $row = array();
    for ( $i=0 ; $i<count($aColumns) ; $i++ )
    {
        if ( $aColumns[$i] == "version" )
        {
            /* Special output formatting for 'version' column */
            $row[] = ($aRow[ $aColumns[$i] ]=="0") ? '-' : $aRow[ $aColumns[$i] ];
        }
        else if ( $aColumns[$i] != ' ' )
        {
            /* General output */
            $row[] = $aRow[ $aColumns[$i] ];
        }
    }
    $output['aaData'][] = $row;
}
echo json_encode( $output ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-22T01:41:14.453

```
/*
* Filtering
 * NOTE this does not match the built-in DataTables filtering which does it
 * word by word on any field. It's possible to do here, but concerned about efficiency
 * on very large tables, and MySQL's regex functionality is very limited
 */

//$sWhere = "";

if ( isset($_GET['sSearch']) && $_GET['sSearch'] != "" )
{
$sWhere = "WHERE id='4' AND (";
for ( $i=0 ; $i<count($aColumns) ; $i++ )
{
    if ( isset($_GET['bSearchable_'.$i]) && $_GET['bSearchable_'.$i] == "true" )
    {
        $sWhere .= $aColumns[$i]." LIKE '%".mysql_real_escape_string( $_GET['sSearch'] )."%' OR ";
    }
}
$sWhere = substr_replace( $sWhere, "", -3 );
$sWhere .= ')';
} else {
$sWhere = "WHERE id = '4' ";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-29T12:05:01.933

> [DataTables](http://datatables.net/index)是 jQuery Javascript 库的插件。它是一个高度灵活的工具，基于渐进增强的基础，它将向任何 HTML 表格添加高级交互控件。

您可能想使用：

> 服务器端处理 | PHP 与 MySQL 此脚本作为 DataTables 测试和开发的基础，因此它始终是最新的，并且将始终通过服务器端处理实现 DataTables 中支持的所有功能（除了正则表达式过滤 - 出于数据库访问速度的原因）。
> 
> 要在您自己的服务器上使用代码，只需更改 $aColumns 数组以列出您希望从数据库中包含的列，将 $sIndexColumn 设置为索引列（为了速度），将 $sTable 设置为表名，最后将您的数据库连接参数填写到 $gaSql。请注意，此脚本使用需要 PHP 5.2 或更高版本的 json_encode。有关与旧版本兼容的此脚本版本，请参阅 PHP 4 compatible

[http://datatables.net/development/server-side/php_mysql](http://datatables.net/development/server-side/php_mysql)

# php - 将唯一选择器分配给使用 PHP 动态生成的未知数量的元素

> ID：15249963
> 
> 赞同：0
> 
> 时间：2013-03-06T14:29:37.923
> 
> 标签：php, jquery, html, ajax

我有一个从 PHP 加载表的页面，其行数取决于 MySQL 查询的结果。

表中每一行的最后一个单元格都包含一个链接。当用户单击链接时，我希望该*行中的数据仅*通过 Jquery 和 Ajax 提交到另一个 PHP 脚本。

问题是因为表格是动态生成的并且行数是可变的，所以我不知道如何为每一行分配选择器以供 jQuery 抓取。我也不确定如何从每个表格单元格中获取值（尽管我已经找到了使用隐藏输入的解决方法）。

如何将选择器分配给可点击链接本身和需要提交的值，记住表中可能有无限数量的行。

为清楚起见，我发布了生成表格的 PHP 代码和表格本身的示例，但我正在寻找 jQuery 解决方案。

谢谢！

**PHP**

```
while ($line = $run_check->fetch_assoc()){

    if ($i%2 != 0){
    $rowclass = 'reqodd';
        }
        else {
        $rowclass = 'reqeven';
        }
        echo '<input type="hidden" value="' . $line['name'] . '" id="name' . $i . '" /><input type="hidden" value="' . $line['account'] . '" id="account' . $i . '"><input type="hidden" value="' . $line['module'] . '" id="module' . $i . '">;
        echo <tr class = "' . $rowclass . '"><td class="req">' . $line['name'] . '</td><td class="req">' . $line['account'] . '</td><td class="req">' . $line['module'] . '</td><td class="req"><a href="#" class="rel_link" id="rel_' . $i . '_link">Release</a></td></tr>';
        $i++;
          } 
```

**示例表**（可点击的链接在“发布”列中）

```
|   Name     | Level | Unit | Release |
|Joe Bloggs  |   4   | 401  | release |
|John Smith  |   6   | 611  | release |
|Jane Bloggs |   4   | 403  | release |
|Jane Smith  |   5   | 502  | release | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:35:29.100

如果您从数据库中获取数据，那么该表应该已经有一个“ID”行。只需将其添加为链接上的数据属性，并`this.getAttribute("data-id")`在单击链接时使用（例如）获取它。

# android - 使用不同的加密/编解码器编译 Android SQLite

> ID：15249965
> 
> 赞同：0
> 
> 时间：2013-03-06T14:29:45.793
> 
> 标签：android, encryption, sqlite

我正在尝试使用加密/编解码器（例如 wxSQLite 或 Libtomcrypt 中的那个）编译 SQLite（启用 SQLITE_HAS_CODEC），以便结果构建将提供加密的 SQLite 数据库。

但是由于 Android 安全模型实现了一个安全沙盒策略，其中没有应用程序可以读取其他应用程序数据，因此生成的 SQLite（使用加密构建）是否可以透明地与所有应用程序一起使用并避免安全沙盒策略，或者您需要单独配置每个项目以便它可以将加密数据保存到 SQLite 吗？

我的意思是它会加密来自所有应用程序的数据以存储在 SQLite 数据库中，还是仅适用于需要配置的一个项目。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:36:03.077

> 我正在尝试使用加密/编解码器（例如 wxSQLite 或 Libtomcrypt 中的那个）编译 SQLite（启用 SQLITE_HAS_CODEC），以便结果构建将提供加密的 SQLite 数据库。

我建议您使用[SQLCipher for Android](http://sqlcipher.net/sqlcipher-for-android/)，它已经为您完成了所有这些工作。

> 生成的 SQLite（使用加密构建）是否可以透明地与所有应用程序一起使用并避免安全沙箱策略

不。

您可以创建自己的 ROM 模块，用启用加密的模块替换标准 SQLite。但是，没有应用程序实际上会使用加密，因为它们不会要求用户输入密码并使用它。虽然您可以说您将使用硬连线密码，但您并没有添加任何安全性，因为任何人都可以获取该密码，然后使用它来解密数据库。

> 或者您需要单独配置每个项目，以便它可以将加密数据保存到 SQLite？

是的，更重要的是，每个项目都需要向用户询问密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:03:03.597

您可以将数据库写入 SD 卡/外部存储，因此其他应用程序可以读取它，如果他们知道路径。或者你可以提供一个库来完成它。

# css - 设置图像以填充 div 的背景

> ID：15249966
> 
> 赞同：2
> 
> 时间：2013-03-06T14:29:46.537
> 
> 标签：css, html, background-image, less

我正在尝试将图像设置为主体 DIV 的背景。

图像需要缩放以适应 div 并垂直和水平居中。溢出可以隐藏在各个方面。

在 div 内，需要有一个 25px 的边距，然后内部 div 有一个不透明度为 0.2 的背景颜色。

在该 div 中是发布文章的组件区域，同样，所有边都有 25px 的填充。

您可以在这里看到我遇到的问题：http: [//betelec.ergonomiq.net/societe/offres-d-emploi#31-01-2013-responsable-de-projet](http://betelec.ergonomiq.net/societe/offres-d-emploi#31-01-2013-responsable-de-projet)

在此页面上，文章是一个手风琴，当它展开时，背景图像不会缩放以填充空间并且有空白。

此外，在此页面上：http: [//betelec.ergoomiq.net/societe/charte](http://betelec.ergonomiq.net/societe/charte)

默认文章长度比图像高度长，因此背景再次不会缩放以填充 div 并且创建了空白。

我可以更改图像并放置一个更大的图像，该图像可以根据需要缩小以填充可用空间。但是，图像不能平铺。

最后，内部 div 超出了容器 div，因此内容在右侧被截断。

在我的 style.less 中，我有以下代码：

```
body {
    &.menu-offres-d-emploi,
    &.menu-liens,
    &.menu-envoyer-votre-cv,
    &.menu-collaborateurs,
    &.menu-nous-contacter,
    &.menu-charte,
    &.menu-qui-sommes-nous,
    &.menu-services {
        #rt-main [class*="grid"] {
            & > div.rt-block {
                background-image: url(../images/backgrounds/blur.jpg);
                background-size: cover;
                position: relative;
                background-position: center;
                background-repeat: no-repeat;
                height: 100%;
                width: 100%;
                overflow: hidden;
                margin: 0;
                padding: 25px !important;
                // padding-bottom: 0;
                // margin-bottom: 0;
                & > div#rt-mainbody {
                    background: rgba(0, 168, 143, 0.2) !important;
                    overflow: hidden;
                    color: @white;
                    article.item-page {
                        padding: 25px;
                    }
                }
            }
        }
    }
} 
```

至于填充，问题在下面的两个屏幕截图中清晰可见。

正如你所看到的，从背景边缘（与绿色相交的地方）到内部 div 有 25px 的填充，该内部 div 的背景颜色为 ，并且**article.item-page**`background: rgba(0, 168, 143, 0.2) !important;`上还有 25px 的填充。这些由我覆盖在屏幕截图上的小黄线表示。但是，相同的填充在 div 的右侧不起作用，并且内容与 div 碰撞。

 **![div 右边缘缺少填充](../Images/761b5b29ea282592a6ae5acbcb05b272.png)

![这里也一样](../Images/c76abd43d5cce3686f6a2fdc68d051e2.png)

布局应该看起来像这个模型。

![小样](../Images/b91ba6432584de80841913c781dffb90.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:50:37.357

嗯，解决了这个问题：

我将 less 更改为：

```
body {
    &.menu-offres-d-emploi,
    &.menu-liens,
    &.menu-envoyer-votre-cv,
    &.menu-collaborateurs,
    &.menu-nous-contacter,
    &.menu-charte,
    &.menu-qui-sommes-nous,
    &.menu-services {
        div#rt-main {  // removed " [class*="grid"] "
            & > div.rt-container [class*="rt-grid"] {  //added this new selector level with the portion of code removed from previous line
                & > div.rt-block {
                    background-image: url(../images/backgrounds/blur.jpg);
                    background-size: cover;
                    position: relative;
                    background-position: center;
                    background-repeat: no-repeat;
                    height: 100%;
                    width: auto;
                    overflow: hidden;
                    margin: 0;
                    padding: 25px !important;
                    // padding-bottom: 0;
                    // margin-bottom: 0;
                    & > div#rt-mainbody {
                        background: rgba(0, 168, 143, 0.2) !important;
                        overflow: hidden;
                        color: @white;
                        article.item-page {
                            padding: 25px;
                        }
                    }
                }
            }
        }
    }
} 
```**

# c - 可以有零个或一个参数的通用宏

> ID：15249968
> 
> 赞同：2
> 
> 时间：2013-03-06T14:29:54.350
> 
> 标签：c, macros, c-preprocessor

有没有办法定义可以有一个或零个参数的宏？

我需要在这个例子中使用一些东西：

```
#define MY_RETURN(ret) return ret;

void foo(){
    MY_RETURN();
}

int foo_integer(){
    MY_RETURN(1);
} 
```

我无法为此找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:40:32.307

在 C99 及更高版本中，可以使用可变参数宏。

> ### C11 (n1570), § 6.10 预处理指令
> 
> `# define identifier lparen identifier-list , ... ) replacement-list new-line`

您的宏可能类似于：

```
#define MY_RETURN(...) return __VA_ARGS__ 
```

* * *

如果您需要计算参数，例如，您可以[在此处](https://groups.google.com/forum/?fromgroups=#!topic/comp.std.c/d-6Mj5Lko_s)查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:37:10.173

定义两个 MY_RETURN 宏，一个带参数，一个不带！一种重载，但适用于宏。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T14:35:55.293

基于[如何定义不支持输入参数和同时支持输入参数的宏函数的答案](https://stackoverflow.com/questions/13976935/how-to-define-macro-function-which-support-no-input-parameter-and-support-also-i)

考虑这样的事情：

```
#define MY_RETURN(ret) { \
  int args[] = {ret}; \
  if(sizeof(args) > 0) \
    return ret; \
} 
```

# android - Android SDK 应用无法加载库

> ID：15249970
> 
> 赞同：4
> 
> 时间：2013-03-06T14:29:55.913
> 
> 标签：android, java-native-interface, rdp

嘿嘿。我收到了与此人相同的错误消息：“ [Android NDK 应用程序无法加载库](https://stackoverflow.com/questions/12022990/android-ndk-app-failed-to-load-library/15249091#15249091)”，我正在尝试根据我的情况将这些答案转移到这里几个小时，但它不起作用。有人能帮我吗？这是这里的这个开源项目，我想尝试让它在我的模拟器上运行。 [https://github.com/itskewpie/FreeRDP-android](https://github.com/itskewpie/FreeRDP-android)

FreeRDPActivity.java

```
package net.itskewpie.freerdp;

import android.app.Activity;
import android.os.Bundle;

public class FreeRDPActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    } 
    static {       
        System.loadLibrary("freerdp");
    }  
} 
```

自由rdp.c

```
#include <jni.h>
#include <stdio.h>
#include <freerdp/freerdp.h>

jstring Java_net_itskewpie_freerdp_FreeRDPActivity_test(JNIEnv* env, jobject thiz )
{
    android_main();      
    return (*env)->NewStringUTF(env, "HELLO");
} 
```

安卓.mk

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)

MY_LIBS_PATH=freerdp-1.0-nevo/libs/armeabi-v7a
LOCAL_MODULE    := freerdp-utils
LOCAL_SRC_FILES := $(MY_LIBS_PATH)/libfreerdp-utils.a
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/freerdp-1.0-nevo/include
include $(PREBUILT_STATIC_LIBRARY)
... 
```

错误信息：

```
FATAL EXCEPTION: main
java.lang.ExceptionInInitializerError
java.lang.Class.newInstanceImpl(Native Method)
java.lang.Class.newInstance(Class.java:1319)
android.app.Instrumentation.newActivity(Instrumentation.java:1054)
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
android.app.ActivityThread.access$600(ActivityThread.java:141)
android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
android.os.Handler.dispatchMessage(Handler.java:99)
android.os.Looper.loop(Looper.java:137)
android.app.ActivityThread.main(ActivityThread.java:5041)
java.lang.reflect.Method.invokeNative(Native Method)
java.lang.reflect.Method.invoke(Method.java:511)
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
dalvik.system.NativeStart.main(Native Method)
java.lang.UnsatisfiedLinkError: Couldn't load freerdp from loader dalvik.system.PathClassLoader[dexPath=/data/app/net.itskewpie.freerdp-2.apk,libraryPath=/data/app-lib/net.itskewpie.freerdp-2]: findLibrary returned null
java.lang.Runtime.loadLibrary(Runtime.java:365)
java.lang.System.loadLibrary(System.java:535)
net.itskewpie.freerdp.FreeRDPActivity.<clinit>(FreeRDPActivity.java:16)
... 15 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T10:54:24.457

试试这个开源项目：

[www.freerdp.com](http://www.freerdp.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:23:44.320

您是否完全按照 github 项目中的方式复制了 Android.mk？您是否也复制了相关库？

```
 #
    ## libfreerdp.so
    #
    include $(CLEAR_VARS)
    LOCAL_MODULE := freerdp
    LOCAL_SRC_FILES := freerdp.c
    LOCAL_ARM_MODE := arm
    NDK_TOOLCHAIN_ROOT=/opt/android-toolchain
    LOCAL_STATIC_LIBRARIES := freerdp-utils
    LOCAL_STATIC_LIBRARIES += freerdp-locale
    LOCAL_STATIC_LIBRARIES += freerdp-crypto
    LOCAL_STATIC_LIBRARIES += freerdp-sspi
    LOCAL_STATIC_LIBRARIES += freerdp-codec
    LOCAL_STATIC_LIBRARIES += freerdp-core
    LOCAL_STATIC_LIBRARIES += freerdp-cache
    LOCAL_STATIC_LIBRARIES += freerdp-gdi
    LOCAL_STATIC_LIBRARIES += freerdp-rail
    LOCAL_STATIC_LIBRARIES += freerdp-channels
    LOCAL_STATIC_LIBRARIES += rdpsnd_alsa
    LOCAL_STATIC_LIBRARIES += cliprdr
    LOCAL_STATIC_LIBRARIES += rdpsnd
    LOCAL_STATIC_LIBRARIES += freerdp_android 
```

在 Java 方面，您似乎也应该按适当的顺序加载其他库：

```
static {
    System.loadLibrary("freerdp-utils");
    System.loadLibrary("freerdp-codec");
    System.loadLibrary("freerdp-gdi");
    System.loadLibrary("freerdp-core");
    System.loadLibrary("freerdp-rail");
    System.loadLibrary("freerdp-chche");
    System.loadLibrary("freerdp-crypto");
    System.loadLibrary("freerdp-sspi");
    System.loadLibrary("freerdp-channels");
    System.loadLibrary("rdpsnd_alsa");
    System.loadLibrary("cliprdr");
    System.loadLibrary("rdpsnd");
    System.loadLibrary("freerdp_android");
    System.loadLibrary("freerdp");
} 
```

# c++ - Direct2D：透明父窗口上的不透明子窗口

> ID：15249972
> 
> 赞同：2
> 
> 时间：2013-03-06T14:29:57.723
> 
> 标签：c++, transparency, direct2d, layered-windows

我想创建一个具有透明背景的 Direct2D 应用程序，上面放置了一些不透明的复杂控件。问题可以分解为几个子问题：

**架构：**控件是否应该作为子窗口来实现？我认为这是正确的方法，而不是创建实现子窗口功能的 Direct2D 多边形。

我试图通过初始化父窗口来实现这一点：

```
SetWindowLong(m_hwnd, GWL_EXSTYLE, GetWindowLong(m_hwnd, GWL_EXSTYLE) | WS_EX_LAYERED);
SetLayeredWindowAttributes(m_hwnd, 0, (255 * 50) / 100, LWA_ALPHA); 
```

并将子窗口创建为**WS_CHILD**。这导致了一个孩子，包括背景在内的所有 D2D 溺水都是透明的。我找不到让孩子变得不透明的方法。当我将子窗口创建为**WS_POPUP**或**WS_OVERLAPPED**时，不透明度问题得到解决，但子窗口位于与父窗口无关的桌面上。

**分层窗口？** 我选择使用分层 Windows，但由于我的目标是 VistaSP2 及更高版本，因此可能会有更好的解决方案。我尝试了[这里](https://stackoverflow.com/questions/2603276/how-do-i-clear-a-direct2d-render-target-to-fully-transparent)提供的解决方案，但我也未能实施。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T22:11:22.367

您的意思是创建一个每像素 32 位的窗口吗？（抱歉无法评论，这里没有足够的代表）

在这种情况下，您必须使用 UpdateLayeredWindow （以及在初始化时调用 CreateDIBSection），无论如何，每次完成场景绘制后，在完成场景绘制后，例如：

```
// Draw to your D2D1 RenderTarget here
RECT rcWin = {0};
GetWindowRect(hWnd,&rcWin);
POINT ptw = {rcWin.left,rcWin.top};
SIZE pts = {rcWin.right-rcWin.left,rcWin.bottom-rcWin.top};
POINT ptsrc = {0};
HDC ScreenDC = GetDC(0);
UpdateLayeredWindow( hWnd, ScreenDC, &ptw, &pts, MemDC, &ptsrc, 0, &bf, ULW_ALPHA);
ReleaseDC(0,ScreenDC); 
```

关于初始化：

```
RECT r = {0};
GetWindowRect(hWnd,&r);
HDC scrDC = GetDC(0);
MemDC = CreateCompatibleDC(scrDC);
ReleaseDC(0,scrDC);
if(!MemDC)
    { FailInit(); }
BITMAPINFO bmi = {0};
bmi.bmiHeader.biBitCount = 32;
bmi.bmiHeader.biCompression = BI_RGB;
bmi.bmiHeader.biPlanes = 1;
bmi.bmiHeader.biWidth = r.right-r.left;
bmi.bmiHeader.biHeight = r.bottom-r.top;
bmi.bmiHeader.biSize = sizeof(bmi.bmiHeader);
DIBSectionBitmap = CreateDIBSection(MemDC,&bmi,DIB_RGB_COLORS,0,0,0);
if(!DIBSectionBitmap)
    return 0;
OldBmp = (HBITMAP)SelectObject(MemDC,DIBSectionBitmap);
// Now create the HWND D2D1 RenderTarget. 
```

关于资源的释放：

```
// Free the D2D1 RenderTarget here
if(MemDC && OldBmp)
    SelectObject(MemDC,OldBmp);
if(DIBSectionBitmap)
    DeleteObject(DIBSectionBitmap);
if(MemDC)
    DeleteDC(MemDC);
MemDC = 0;
OldBmp = 0;
DIBSectionBitmap = 0; 
```

编辑：MemDC、OldBmp 和 DIBSectionBitmap 是每个窗口的。MemDC 是一个 HDC。OldBmp 是一个 HBITMAP。DIBSectionBitmap 是一个 HBITMAP。此时，您可以绘制您的子窗口，就好像它们是您自己的主窗口的一部分一样，具有每像素的 alpha 精度，但您需要自己处理聚焦和消息传递。

# ios - NSNotification 失败.... 为什么？

> ID：15249973
> 
> 赞同：-1
> 
> 时间：2013-03-06T14:29:57.767
> 
> 标签：ios, objective-c, nsnotificationcenter

我正在尝试让 NSNotifications 工作。此刻，没有成功。

在我的 appDelegate.m 文件中，我有：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"first" object:nil]; 
```

在我的 mainViewController.m 中，我有 viewDidLoad 方法

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(firstRun)name:@"first" object:nil]; 
```

并创建了一个方法（也在 mainViewController.m 中）：

```
-(void) firstRun:(NSNotification *) notification
{
        NSLog(@"This works!");
} 
```

但是，运行应用程序时，我在日志中看不到任何输出。

我的代码有什么问题？请指教。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T14:32:12.803

错误的选择器，应该是：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(firstRun:)name:@"first" object:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:37:09.423

上面的答案指出你在观察者方法中使用了错误的选择器，这绝对是一个问题。

您应该检查的另一件事是在发布通知之前添加观察者。通知是同步的。发布时，它们只会被已注册的观察者识别。

我建议您在发布通知的行以及添加观察者的行上设置断点，然后查看哪个最先被击中。

# sql - SQL 利息计算

> ID：15249975
> 
> 赞同：0
> 
> 时间：2013-03-06T14:30:02.237
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我必须创建一个存储过程来计算利息。

```
 --Sending these parameters to stored proc
 @rec_date date,
 @amount_paid numeric(18,2) 
```

规则如下，还有更多规则，但如果我能得到这个，我可以处理其他规则

1.  利息按每月 30 天按比例计算（未复利），利率为每月 2%。

2.  用于确定该`@rec_date`日期与今天之间的天数

3.  利息是根据参数计算的`@amount_paid`

4.  如果计算利息`> 5.00`然后`interest = calculate interest or else interest = 0`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:42:35.230

看看[这里](http://www.mssqltips.com/sqlservertip/1547/calculating-mathematical-values-in-sql-server/)，感受一下使用 TSQL 进行计算。接下来，一个好用的函数是 DATEDIFF()。您可以在[此处](http://msdn.microsoft.com/en-us/library/ms189794%28v=sql.100%29.aspx)找到更多信息。这应该让你继续前进。如果您遇到困难，请尝试一下并发布您的代码。

# javascript - Chrome Web Developer：如何查找与特定 DOM 元素交互的脚本

> ID：15249977
> 
> 赞同：2
> 
> 时间：2013-03-06T14:30:09.530
> 
> 标签：javascript, debugging, google-chrome-devtools

通常，当脚本与我的 DOM 交互时（例如添加类或更改内联 CSS），我必须搜索我的 html 以查看它在哪里。

是否有一些聪明的方法可以使用开发工具来揭示我/将我带到有问题的脚本？

# .net - Silva Connect 计步器自定义 USB 日志阅读器应用程序

> ID：15249981
> 
> 赞同：0
> 
> 时间：2013-03-06T14:30:15.483
> 
> 标签：.net, connection, usb, bytearray, byte

我在 12 月买了一个 Silva 计步器 EX Connect，它看起来像 [这样](http://www.google.hu/url?sa=i&rct=j&q=silva+pedometer+ex+30&source=images&cd=&cad=rja&docid=cPo96khseLZ8yM&tbnid=Ly11vK0dizh9tM%3a&ved=0CAUQjRw&url=http%3A%2F%2Fwww.cyclesportsuk.co.uk%2Fproduct_info.php%3Fproducts_id%3D11460&ei=n083UdC4IYXdOteIgcAH&bvm=bv.43287494,d.d2k&psig=AFQjCNHjrvdnv3svB4qiZMHEoveW1GZz_g&ust=1362665751142248) 我不知道这个月 Silva 停止了这个产品和他们的网站 silveconnect.com 的问题。这个网站可以通过他们的小应用程序阅读我的 30 个 previos 步骤。他们让我把这个项目寄给他们，他们会寄回一个更新的，但我不喜欢它，而且只有 5-7 天的记忆。

所以我决定制作一个自定义应用程序来读取它的内存，因为我最近忘记写下当天的当前步骤，并且在午夜它变回 0，但内部内存存储了过去 30 天。这个小网络应用程序现在不可用，但我存储在我的电脑上。它需要 .net 框架 2，所以它有点像 .net 应用程序。因为网站不可用，它不再工作。

我的问题是，是否有任何应用程序可以告诉我通过 USB 电缆传输什么样的数据和字节？或者我可以反编译这个 400K 的 exe 应用程序吗？我是一名 Flash 开发人员和 UI 开发人员，所以 .net 不是我的业务，​​但它并不太复杂。;) 所以第一步对我来说是黑暗的。

任何帮助将不胜感激。谢谢乔治

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:53:27.620

如果在 .NET 中编程，您可以使用[ILSpy反编译 .exe](http://ilspy.net/)

如果这对您不起作用并且您想弄脏 USB 数据，
您可以使用[LibUSBdotnet](http://libusbdotnet.sourceforge.net/V2/Index.html)（祝您好运！）

# c# - 捕获的变量如何同时暴露给多个执行线程？

> ID：15249982
> 
> 赞同：4
> 
> 时间：2013-03-06T14:30:17.340
> 
> 标签：c#

在 C# 规范 4.0 第 7.15.5.1 节中：

> 请注意，与未捕获的变量不同，捕获的局部变量可以同时暴露给多个执行线程。

“多线程执行”到底是什么意思？这是否意味着多个线程、多个执行路径或其他？

例如

```
 private static void Main(string[] args)
        {
            Action[] result = new Action[3];
            int x;
            for (int i = 0; i < 3; i++)
            {
                //int x = i * 2 + 1;//this behaves more intuitively.  Outputs 1,3,5
                x = i*2 + 1;
                result[i] = () => { Console.WriteLine(x); };
            }
            foreach (var a in result)
            {
                a(); //outputs 5 each time
            }

            //OR...

            int y = 1;            
            Action one = new Action(() =>
            {
                Console.WriteLine(y);//Outputs 1
                y = 2;                
            });

            Action two = new Action(() =>
            {
                Console.WriteLine(y);//Outputs 2\.  Working with same Y
            });

            var t1 = Task.Factory.StartNew(one);
            t1.Wait();
            Task.Factory.StartNew(two);
            Console.Read();
        } 
```

这里`x`根据`x`声明的位置表现出不同的行为。在`y`相同变量被多个线程捕获和使用的情况下，但 IMO 这种行为是直观的。

他们指的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:35:36.020

“多线程执行”仅表示多线程；即同时执行的多个线程。如果一个特定变量暴露给多个线程，那么这些线程中的任何一个都可以读取*和写入*该变量的值。

这是潜在的危险，应尽可能避免。如果您的方案允许，避免这种情况的一种可能性是在您的任务方法中创建变量的本地副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:43:34.537

如果您稍微修改代码的第二部分：

```
 int y = 1;
        Action one = new Action(() =>
        {
            Console.WriteLine(y);//Outputs 1
            y = 2;
        });

        Action two = new Action(() =>
        {
            Console.WriteLine(y);//Outputs 2\.  Working with same Y
            y = 1;
        });

        var t1 = Task.Factory.StartNew(one);
        t1 = Task.Factory.StartNew(two);
        t1.Wait();
        t1 = Task.Factory.StartNew(one);
        t1.Wait();
        t1 = Task.Factory.StartNew(two);

        Console.Read(); 
```

运行它几次或将其置于循环中。它将输出不同的、看似随机的结果，例如`1 1 1 2`或`1 2 1 2`。

多个线程正在访问同一个变量并同时*获取*和*设置*它，这可能会产生意想不到的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T15:06:54.150

请参阅下面的链接。

> 对外部变量 n 的引用据说在创建委托时被捕获。与局部变量不同，捕获变量的生命周期会延长，直到引用匿名方法的委托有资格进行垃圾回收。

换句话说，变量的内存位置在创建方法时被捕获，然后共享给该方法。就像一个线程可以访问该变量减去匿名方法一样。在某些情况下会出现编译器警告，它会建议您移动到本地临时变量，以免造成意外后果。

[MSDN 匿名方法](http://msdn.microsoft.com/en-us/library/0yw3tz5k.aspx)

# c# - WPF WinForms 多级混合嵌套

> ID：15249983
> 
> 赞同：4
> 
> 时间：2013-03-06T14:30:19.413
> 
> 标签：c#, wpf, winforms, winforms-interop

我在 MSDN 和其他网站上阅读（[http://msdn.microsoft.com/en-us/library/ms751797.aspx](http://msdn.microsoft.com/en-us/library/ms751797.aspx)和[http://www.abhishekshukla.com/wpf/advanced-wpf-part-5-of- 5-interop-in-windows-presentation-foundation/](http://www.abhishekshukla.com/wpf/advanced-wpf-part-5-of-5-interop-in-windows-presentation-foundation/)）不支持 WPF 和 WinForms 控件的多级混合嵌套...

我有一个应用程序，其中 WPF 窗口有一个 WindowsFormsHost，其中 WPF 控件托管在 ElementHost 中。此 WPF 控件包含其他 WinForms 控件，这些控件也在 WinFormsHost 中。简而言之：WPF -> WinForms -> WPF -> WinForms。

到目前为止，我对此没有任何问题。在 MSDN 页面上找到那个小注释后，我想知道该场景到底不支持什么，因为它对我有用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:58:12.253

我想说“不支持”的意思是“风险自负”。大多数事情都会起作用，有些事情不会起作用，结果是否可以接受取决于您的特定应用程序。或者，在一些 hacky 变通办法到位后，您可能会获得可接受的结果。MS不会竭尽全力让它发挥作用。

我已经处理了一个包含 WinForms-WPF-WinForms 嵌套的项目，并且通常效果很好 - 足以不重写 WinForms 组件。*焦点*是一个问题 - 嵌套控件的行为与您期望的与焦点获得/丢失事件相关的行为并不完全一样，并且键盘焦点可能会卡在嵌套控件中。宿主元素是否认为它具有焦点与包含的控件是否具有焦点之间可能存在差异。因此，我建议将您的测试集中在用户输入事件和焦点上。

# scala - 编码风格 - Scala 块中表达式的排序

> ID：15249985
> 
> 赞同：1
> 
> 时间：2013-03-06T14:30:22.280
> 
> 标签：scala

自从我开始使用 Scala 编程以来，我就被这种语言中看似自然的编码风格所吸引，这很容易用一个简单的例子来解释：

```
val a = {
def f1(p : Int) = ...
def f2(p : Int) =  ...
f1(12) * f2(100)
} 
```

正如你所看到的，值的乘法，如果你想理解代码，这是你应该熟悉的第一个操作，直到最后一行才能找到。相反，您需要先通读拼图的各个部分（函数 f1、f2），然后才能了解它们的实际排列方式。对我来说，这使代码更难阅读。你是如何处理这个问题的——或者你根本不觉得这是个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:14:33.030

一种有趣的方法可能是使用宏天堂中的[无类型宏](http://docs.scala-lang.org/overviews/macros/untypedmacros.html)提议来引入`where`绑定，例如：

```
val a = (f1(12) * f2(100)) where {
  def f1(x : Int) = x + 1
  def f2(x : Int) = x + 2
} 
```

被重写为您上面的代码。据我了解，无类型宏将允许不存在的标识符 f1 和 f2 在宏前类型检查之后存在。我认为重写应该相对简单，然后第二次类型检查会发现任何问题。然而，我从来没有真正写过任何宏，所以有可能这会失败！

如果可能的话，我认为这将是一个很好的形式（重写将解决执行顺序的问题）——如果我有时间，我可能会尝试编写它！

编辑：我已经尝试过写这篇文章，结果出乎意料地容易。代码可在[github](https://github.com/nc6/scala-where)上找到。不幸的是，到目前为止我能做的最好的是：

```
 val result = where ( f1(1) * f2(2), {
    def f1(x : Int) = x + 1
    def f2(x : Int) = x + 2
  }) 
```

问题是 Scala 的中缀运算符只是方法调用，所以我需要在表达式 (f1(1) * f2(2)) 上构造一些东西才能调用它们。但这正是在宏解析之前无法正确输入的表达式，所以我不太确定该怎么做。是时候提出一个新问题了，我想！

# java - 列出我的 Java 应用程序正在使用的端口

> ID：15249989
> 
> 赞同：2
> 
> 时间：2013-03-06T14:30:27.923
> 
> 标签：java, sockets, javafx-2, port

我正在使用 JavaFX 开发一个简单的 Java 视频流应用程序。由于许可，我不能使用其他库（vlcj）。无论如何，我的播放器工作得很好，但我需要知道它在哪个本地端口上建立连接。由于 JavaFX 似乎不提供这种可能性，我想知道是否有办法捕获/列出所有 Java 打开的连接/套接字。

代码如下，在此先感谢。

```
String mediaURL = "somepath";
Group root = new Group();
Scene scene = new Scene(root, 640, 480);
Media media = new Media(mediaURL);
MediaPlayer mediaPlayer = new MediaPlayer(media);
mediaPlayer.setAutoPlay(true);
MediaView mediaView = new MediaView(mediaPlayer);
mediaView.setCache(false);
root.getChildren().add(mediaView); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:16:25.173

在 linux/mac 上，打开一个终端并：

1.  使用`jps`命令找到`pid`你的java进程
2.  用于`lsof -p <pid> |grep ESTABLISHED`列出已建立的连接。

对于 Windows，您可以查看[此 SO 帖子](https://stackoverflow.com/questions/48198/how-can-you-find-out-which-process-is-listening-on-a-port-on-windows)。

# php - 防止多次提交

> ID：15249992
> 
> 赞同：1
> 
> 时间：2013-03-06T14:30:30.780
> 
> 标签：php, html, http-get

我有一个向自身发送数据的页面，即使用`PHP_SELF`.

在页面刷新时，即页面重新加载时，我放置了两个按钮 - `Refresh Again`，我再次使用发送数据`PHP_SELF`。- 弹出一个警告框要求确认，这通常发生在日期再次发送到页面时。

第二个按钮的用途 - `Reload without sending data`，必须重新加载页面。

没有出现上述弹出框，即没有发送数据。

有没有办法在数据再次发送到服务器或页面之前清除数据？

我通过发送数据`$_GET`。

我检查我是否收到如下任何数据：

```
if(isset($_GET['getVariable']))

/* I place the buttons here, in a form, the action parameter of which points to the same page, i.e. `PHP_SELF` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:39:15.797

您可以在不提交新表单的情况下进行刷新：

```
<form name="refresh" action="" method="post">
  <input type="submit" value="Refresh without submitting" />
</form> 
```

或者使用 JavaScript 刷新当前按钮。

```
<input type="button" value="Refresh without submitting" onclick="location.reload();" /> 
```

另外，使用`action=""`代替`PHP_SELF`.

# c# - itextsharp 意外错误

> ID：15249994
> 
> 赞同：2
> 
> 时间：2013-03-06T14:30:31.713
> 
> 标签：c#, pdf-generation, itextsharp

我是使用这个库的新手，我发现了几个例子（我按页拆分 PDF）：

*   [代码源1](http://www.jamesewelch.com/2008/11/14/how-to-extract-pages-from-a-pdf-document/)
*   [代码源2](http://blog.rubypdf.com/2006/10/11/burstcs-split-a-pdf-in-several-separate-pdf-files-1-per-page/)
*   [代码源 3](http://my.safaribooksonline.com/book/software-engineering-and-development/0596527543/working-with-code-libraries/windowsdpt-chp-4-sect-12)

但总是当有人开始使用`Filestream`错误发生`(Object reference not ...)`。在创建`Filestream`时不会发生任何错误。怎么了？我在[这里](http://sourceforge.net/projects/itextsharp/)下载的图书馆。

**编辑**

```
 private static void Test()
    {
        Document pdfDocument = new Document( );
        PdfWriter.GetInstance(pdfDocument,
        new FileStream("D:\\WDPT.PDF", FileMode.Create));
        // here is eror
        pdfDocument.Open( );
        pdfDocument.Add(new Paragraph("Here is a test of creating a PDF"));
        pdfDocument.Close( );
    } 
```

此代码在控制台应用程序中运行。这里的错误发生在我们开始使用文件流时（与其他情况一样）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-21T09:43:56.140

你必须写这个才能使用 DLL 参考（这里是 VB 的代码）

```
Imports iTextSharp.text
Imports iTextSharp.text.pdf
Imports iTextSharp.text.html.simpleparser
Imports iTextSharp.text.html 
```

然后传递您的流对象以生成 PDF。

如果出现错误：“对象引用集不是对象的实例”，即在某处声明后将其设置为 null（或者它将作为 null 传递）。编写代码如下

```
 Dim pDoc As New Document(pRec)
    Dim pWriter As PdfWriter
    Response.AddHeader("Content-Disposition", "attachment;filename=" & Title & " .pdf")
    pWriter = PdfWriter.GetInstance(pDoc, Response.OutputStream)
    pRec.Border = 1
    pRec.BorderColor = BaseColor.MAGENTA
    pDoc.Open()
    'Add pdf Detail
    pDoc.AddTitle("REPORTS")
    pDoc.AddSubject(Title)
    pDoc.AddAuthor("ADMIN")
    pDoc.AddHeader("Company", "DK LTD")
    pDoc.AddHeader("PageSize", DocSize) 
```

在此处添加您的流编写器对象，然后循环直到 EOF 然后

```
 pdoc.close() 
```

我会尽量解释我所知道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-28T19:19:33.937

试试这个，你必须使用对象编写器，

```
 Document pdfDocument= new Document(PageSize.A4);

            new PdfWriter.GetInstance(pdfDocument, new FileStream(OutPutFileNameFullPath+ ".pdf", FileMode.Create));

            pdfDocument.Open();
            pdfDocument.Add(new Paragraph("Here is a test of creating a PDF"));
            pdfDocument.Close( ); 
```

# c++ - 为什么 std::atomic 对象不可复制？

> ID：15249998
> 
> 赞同：25
> 
> 时间：2013-03-06T14:30:37.780
> 
> 标签：c++, c++11, atomic

似乎`std::atomic`类型不是可复制构造或可复制分配的。为什么？

是否存在无法复制原子类型的技术原因？或者是为了避免某种错误代码而故意限制接口？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-06T14:36:29.170

在没有原子指令（或所有整数大小都没有原子指令）的平台上，类型可能需要包含互斥体以提供原子性。互斥锁通常不可复制或移动。

为了为`std::atomic<T>`所有平台的所有专业化保持一致的接口，这些类型永远不可复制。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-06T15:05:17.240

1.  技术原因：大多数原子类型不能保证是无锁的。原子类型的表示可能需要包含嵌入式互斥锁，并且互斥锁不可复制。

2.  逻辑原因：复制原子类型意味着什么？整个复制操作是否应该是原子的？副本和原件会代表*同一个*原子对象吗？

跨越两个单独的原子对象的操作没有明确定义的含义，这将使这变得有价值。您可以做的一件事是将加载的值从一个原子对象转移到另一个原子对象。但是加载只与前一个对象上的其他操作直接同步，而存储与目标对象上的操作同步。每个部分都可以带有完全独立的内存排序约束。

将这样的操作拼写为加载后跟存储使这一点变得明确，而赋值会让人们想知道它与参与对象的内存访问属性有何关系。如果你坚持，你可以通过组合现有的转换来达到类似的效果`std::atomic<..>`（需要显式转换或其他值类型的中间值）。

.