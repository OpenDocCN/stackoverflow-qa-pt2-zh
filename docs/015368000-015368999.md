# StackOverflow 问答 15368000-15368999

# jquery - jQuery - 仅将方法应用于一页

> ID：15368013
> 
> 赞同：0
> 
> 时间：2013-03-12T17:27:33.700
> 
> 标签：jquery, html, css

我有一个脚本，它在页面加载时隐藏显示并在用户关闭它时隐藏。

我已将其设置为在用户每次访问该网站时显示。但我只希望它适用于我的主页。我不希望通知消息出现在网站的其他页面上。

我使用 WordPress，所以我无法编辑单个页面的 HTML。

```
jQuery('.header-notice a.close').click(function() {
  jQuery('.header-notice').slideUp(200);
  localStorage.setItem("notice", jQuery('.header-notice p').html());
  return false;
});
if (localStorage.getItem("notice") === jQuery('.header-notice p').html()) {
  jQuery('.header-notice').show();
}
jQuery('.alert .close').live('click', function() {
  jQuery(this).parent('.alert').fadeOut(200);
  return false;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:34:06.197

在我看来，Wordpress 做了一件很酷的事情。它总是在`body`标签中为您提供过多的类名，以识别我们正在谈论的页面。这样，您只能使用 jQuery 进行定位，例如：

```
$('.home .header-notice') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:31:08.657

您可以检查 url，如果它是主页 url，则应用脚本

```
var pathname = window.location.pathname; 
if (pathname = 'your url')
{
   /*do stuff*/
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:31:11.983

查看 url 以查看您是否在主页上，如下所示：

```
if (window.location.href.indexOf('homepage.php')) {
   //Execute jquery code
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T17:45:24.040

如果您使用 wordpress，请修复 wordpress。

将此添加到`wp-content/themes/your-theme-name/header.php`

```
<?php 
 if(is_home()){
  <script>
   //scripts go here
  </script>
}
?> 
```

reference: [http://codex.wordpress.org/Function_Reference/is_home](http://codex.wordpress.org/Function_Reference/is_home)

# php - 未定义的索引：注释...在运行 php 脚本时

> ID：15368016
> 
> 赞同：0
> 
> 时间：2013-03-12T17:27:40.440
> 
> 标签：php, mysql, indexing, undefined

我正在尝试制作一个简单的评论系统。当我运行代码时，我可以发表评论并且评论也会显示出来。但问题是错误消息也显示在评论上方，上面写着

未定义索引：在 (C:\wamp\www\comment.php) 中的注释

索引页

```
 <html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>commenting system</title>
</head>

<body>
<h3> leave a comment </h3>
    <?php include('comment.php');?>

</body>
    </html> 
```

评论页面

```
<?php 
mysql_connect('localhost','root','');
mysql_select_db('mydb');
$username= $_POST['username'];
$email= $_POST['email'];
$comment= $_POST['comment'];
$submit=$_POST['submit'];

if(isset($email)&& ($username)&&($comment)&&($submit)) {
    $insert=mysql_query("INSERT INTO comment(username,email,comment) VALUES ('$username','$email','$comment')");

    }else{

    echo 'please enter the required field'; 
    }

 ?>
        <div id="commentbox">
                  <div class="show_comments">
                    <?php 
                    mysql_connect('localhost','root','');
                    mysql_select_db('mydb');
                    $sqlQuery="SELECT username, comment FROM comment";
                    $sql=mysql_query("$sqlQuery") or die(mysql_error());
                    while($row =mysql_fetch_assoc($sql)){
                        echo $row['username'];
                        echo '<br/>';
                        echo $row['comment'];
                        echo '<hr />';

                    }

                    ?>   

                 </div>

                    <form action="comment.php" method="POST">
                        name:<br/>
                        <input type="text" name="username"  placeholder="name"/> <br/>
                        email: <br/>
                        <input type="text" name="email" placeholder="email"/> <br />
                        comment: <br />
                        <textarea  rows="10" cols="40" name="comment" placeholder="your comment"> </textarea>
                    <input type="submit" value="comment" name="submit" /> 
                 </form>

         </div> 
```

PS我是这个很棒的编码世界的新手。我会很感激任何帮助！先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:34:02.253

这是因为您没有检查表单是否已提交。用以下内容包围您的查询和`$_POST`变量：

```
if (!empty($_POST)) {
    $username = $_POST['username'];
    $email = $_POST['email'];
    $comment = $_POST['comment'];
    $submit = $_POST['submit'];

    if (isset($email) && ($username) && ($comment) && ($submit)) {
        $insert = mysql_query("INSERT INTO comment(username,email,comment) VALUES ('$username','$email','$comment')");
    } else {
        echo 'please enter the required field';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:35:23.300

```
if(isset($row['comment']) {
    echo $row['comment'];
} 
```

还。在文件的开头，使用

```
error_reporting(E_ERROR); 
```

或者

```
error_reporting(0); 
```

# sql - 按用户名分组并选择列的总和

> ID：15368027
> 
> 赞同：0
> 
> 时间：2013-03-12T17:28:19.503
> 
> 标签：sql, postgresql, symfony, doctrine-orm

我有一个像这个 id,username,points 的表 T，我想做的是为每个用户选择他的用户名和他的点的总和，并按点对行进行排序。我试过了，但没有用：

```
SELECT username, sum(points) as s
FROM T
    group by username,points
    order by points desc 
```

结果：

```
username  points
3         2
3         3
3         0
4         0
6         0
7         0
3         -1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:29:30.847

如果您要汇总点数，则不想在 GROUP BY 语句中包含点数。此外，如果您将点的总和重命名为 s，您可以在 ORDER BY 中引用 s

```
SELECT username, sum(points) as s
FROM T
group by username
order by s desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:33:46.023

删除点的原因是因为如果您按点分组，则每个单独的值都分组：

```
SELECT username, sum(points) as s
FROM T
group by username
order by sum(points) desc 
```

然后按 Sum(points) 排序

# android - 在 Google Maps v2 中通过 ID 获取地图标记

> ID：15368028
> 
> 赞同：21
> 
> 时间：2013-03-12T17:28:21.240
> 
> 标签：android, google-maps, google-maps-android-api-2

基本上，当向地图添加标记时，它会返回新标记，您可以像这样从中获取标记 ID

```
Marker m = map.addMarker(new MarkerOptions()
                            .position(new LatLng(lat,lon)));
String id = m.getId(); 
```

如果有很多标记并且您只想删除一个，有没有办法通过它的 id 获取标记？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2015-04-22T11:25:13.460

我已经这样做了：

**初始化变量**：

```
private GoogleMap mMap;
private HashMap<Marker, Integer> mHashMap = new HashMap<Marker, Integer>();
private ArrayList<MyCustomModelClass> myList = new ArrayList<MyCustomModelClass>(); 
```

**使用您的**arraylist**在**谷歌地图上****添加标记**：**

 ****```
for (int i = 0; i < myList.size(); i++) {
    double latitude = myList.getLatitude();
    double longitude = myList.getLongitude();
    Marker marker = mMap.addMarker(new MarkerOptions().position(new LatLng(latitude,longitude))).title(myList.getTitle())
                                        .icon(BitmapDescriptorFactory.fromResource(R.drawable.location_icon));
    mHashMap.put(marker, i);
} 
```

在**标记单击侦听器**上：

```
@Override
public boolean onMarkerClick(Marker marker) { 
    int pos = mHashMap.get(marker);
    Log.i("Position of arraylist", pos+"");
} 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-12T18:22:46.800

问题是标记 id 是自动生成的，不能用于单独跟踪标记。已经提出了许多策略来解决这个问题。一种是[使用哈希映射来跟踪标记](http://discgolfsoftware.wordpress.com/2012/12/06/hiding-and-showing-on-screen-markers-with-google-maps-android-api-v2/)，然后使用您选择的键来查找特定标记并将其删除。另一个想法是重载一个标记字段，例如片段，然后自己添加一个键。例如，如果您正在制作一个新标记（使用 google 示例代码），您可以将自己的密钥字符串放入片段字段

```
mMap.addMarker(new MarkerOptions()                           
.position(MELBOURNE)                           
.title("Melbourne")                           
.snippet(KEY + "Population: 4,137,400")); 
```

稍后您可以使用

```
String s = marker.getSnippet()
String key = s.substring(start, end) 
```

如果匹配，则使用条件删除特定标记。根据你需要做什么，一种方法比另一种方法更容易、更有效。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-09-06T06:17:14.740

我知道，已经很晚了。但是现在，我们可以直接将唯一的**TAG**添加到标记中。

```
Marker marker = mMap.addMarker(markerOptions);
marker.setTag(""); 
```

[关于地图标记 TAG 的 Google Developers 链接](https://developers.google.com/android/reference/com/google/android/gms/maps/model/Marker)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-02-12T13:07:31.630

用于`WeakHashMap<Integer,Marker>`存储标记，因为通过这种方式，我们不会在内存中保留对标记的引用，也不必担心垃圾收集标记。

其次推荐的方法是使用带有 ID 和自定义数据的 WeakHashMap。文档说标记对象可能会改变，所以不要使用标记作为键。如果活动被杀死并恢复，但 ID 将保持不变。有时，如果标记对象更改，它也可能返回 null。

```
WeakHashMap<Integer,Marker> obj = new WeakHashMap <Integer,Marker>(); 
```

希望对以后的观众有帮助...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-17T09:43:27.187

最好的方法是使用`Map <int, Mark> dictionaryMark;`.

每次绘制时只需将标记添加到字典中。****

# curl - curl命令顶部上传带有元数据的文件

> ID：15368035
> 
> 赞同：1
> 
> 时间：2013-03-12T17:28:36.997
> 
> 标签：curl, command-line

我正在测试我的 RESTFul API，我想知道是否有办法同时上传文件和 json 数据。

当我从命令行运行此命令时：

`curl -v -X POST -d '{"label":"vacations", "date":"2011-01-03"}' -F photo=@"photo.png" http://localhost/album`

我收到此错误： `Warning: You can only select one HTTP request!`

真的有办法做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T06:36:39.390

@sputnick 方法有效:)。

我将使用 postman（一个 chrome 扩展）来测试我的 restful API 而不是 curl。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:30:46.677

看来你之间有冲突

```
-F photo=@"photo.png" 
```

和

```
-d '{"label":"vacations", "date":"2011-01-03"}' 
```

您只能使用这两个选项之一。

我认为最好的方法是`base64 encode`将图片放在字符串中并将其放入您的`JSON`喜欢中：

```
-d '{"label":"vacations", "date":"2011-01-03", "photo":"AE..."}' 
```

它`base64 decode`是服务器端。

您也可以添加此开关：

```
-H 'Content-type:text/json' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-15T17:15:19.380

您还可以将 -F 用于元数据，请参阅 Erik Allik 的回答[here](https://stackoverflow.com/questions/3938569/how-do-i-upload-a-file-with-metadata-using-a-rest-web-service)

例如：

```
curl -F 'json={"label":"vacations", "date":"2011-01-03"}' -F 'photo=@photo.png' http://localhost/album 
```

# c# - 了解日期时间转换

> ID：15368036
> 
> 赞同：0
> 
> 时间：2013-03-12T17:28:38.473
> 
> 标签：c#, sql, sql-server, datetime, datetime-format

在 PHP 中，该`date()`函数可以用作

```
$sql = "SELECT * FROM tableX WHERE memberJoined between '".date('Y-m-d 00:00:00')."' AND '".date('Y-m-d 11:55:55')."' 
```

在 C# 中，我为数据库中的成员设置的格式化日期时间是`MM/DD/YYYY HH:MM:SS`，例如`3/12/2013 12:27:06 AM`

我想在 C# 中创建一个类似的查询，因为我只想选择满足特定日期时间范围的行。我更喜欢使用`DateTime.Compare()`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:32:42.983

只需使用带有 DateTime 值的参数化查询：

```
string sql = "SELECT * FROM tableX WHERE memberJoined between @startDate AND @endDate";
SqlCommand command = new SqlCommand(sql);
SqlParameter startParam = command.Parameters.Add("@startDate", System.Data.SqlDbType.DateTime);
startParameter.Value = //Some date time object
SqlParameter endParam = command.Parameters.Add("@startDate", System.Data.SqlDbType.DateTime);
endParameter.Value = //Some date time object 
```

# ef-code-first - Web 发布在部署时添加命名空间连接字符串

> ID：15368038
> 
> 赞同：0
> 
> 时间：2013-03-12T17:28:45.670
> 
> 标签：ef-code-first, code-first, webdeploy

在 Visual Studio 2012 中使用带有代码优先迁移上下文的 webpublish 时，我碰巧遇到了问题。在我们的 web.config 中，有两个连接字符串，定义如下；

```
<connectionStrings>
<add name="C2EnterpriseDB" connectionString="Data Source=(local);Initial Catalog=C2_V5;Integrated Security=True" providerName="System.Data.SqlClient" />
<add name="MediaProviderDB" connectionString="Data Source=(local);Initial Catalog=C2_V5_Media;Integrated Security=True" providerName="System.Data.SqlClient" />
</connectionStrings>. 
```

但是当我打开 webpublish 对话框时，[这](http://imgur.com/mHAS0Wn)就是显示给我的内容。任何人都可以告诉我为什么我有 3 个连接字符串而不是像这样的两个？

谢谢

编辑1：如果我删除对我的存储库项目的引用（我启用了迁移），我可能会得到一些东西，我只会得到我的 web.config 中定义的 2 个连接。对你们来说，启用迁移的项目会将自己的连接字符串添加到已经存在的 2 个中，这对你们有什么意义吗？我检查了是否在该项目的 app.config 中设置了任何约束。但没有。

edit2：但是我不能在部署时“激活”迁移，复选框被禁用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:09:12.670

因此，我的解决方案中有 2 个 Web 项目都指向我迁移所在的存储库项目。所以 web-publish 认为这是 2 个同名的不同数据库，并创建了一个命名空间来区分这 2 个。

我现在所做的是从我的一个 webproject 中删除 web.config，从第一个 webproject 中引用我的另一个 webproject，并且只将我的 Api webproject 指向存储库。那里。

# ios - 将信息保存在数组中

> ID：15368039
> 
> 赞同：0
> 
> 时间：2013-03-12T17:28:46.290
> 
> 标签：ios, nsarray

我有一个关于在 NSArray 中存储信息的快速问题。一旦我点击navigationcontroller 按钮去上一个viewcontroller 并返回myArray 就变成了nil。我应该如何将我的原始信息保存在数组中。

我有两个视图，一个是 tableViewController，第二个是 detailviewController。

假设用户点击第一行，它将用户带到 detailviewcontroller，然后用户点击按钮和值增量，我保存数据用户点击按钮的次数并将其保存 storeData[0]=counter;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:33:12.507

问题可能出在视图控制器的生命周期中：弹出控制器时，它会被释放。推送控制器时，您会创建一个从未设置过数组的控制器类的新实例。

最好保持对持有数组的视图控制器的强引用，并在存在时推送现有实例。

编辑：在表视图控制器（主视图控制器）中添加一个 ivar 或您的详细视图控制器类型的属性。推送时，有两种选择：

1.  如果设置了属性，则从属性中推送控制器。
2.  仅当属性为零时才构建新控制器。将属性设置为新控制器并推送它。

# java - FileInputStream 找不到文件

> ID：15368041
> 
> 赞同：0
> 
> 时间：2013-03-12T17:28:51.723
> 
> 标签：java, java-io

我正在用java编写一个程序，它将读取一个文件并将其中的每个单词放入一个数组中，这样我就可以在将它们排序到默认数组后对每个单词进行一个字谜。我很清楚如何做到这一点，除了我的 .txt 文件没有被读取。我在 src 中有一个名为“input.txt”的文件，其中包含我正在编写的“anagram.java”程序，但是当代码提示文件条目时，在输入文件名“input.txt”时，我的代码说该文件不存在，我明白了：

```
Enter file name: 
input.txt
Exception in thread "main" java.io.FileNotFoundException: input.txt (No such file or directory)
        at java.io.FileInputStream.open(Native Method)
        at java.io.FileInputStream.<init>(FileInputStream.java:120)
        at java.io.FileInputStream.<init>(FileInputStream.java:79)
        at java.io.FileReader.<init>(FileReader.java:41)
        at anagram.main(anagram.java:23)
Java Result: 1
BUILD SUCCESSFUL (total time: 6 seconds) 
```

这是搞砸的那一行的代码：

```
 public static void main(String[] args) throws Exception {
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    System.out.println("Enter file name: ");
    String fileName = br.readLine();
    File file = new File(fileName);
    if(file.length() == 0)
    {
        System.out.println("File is empty");
        System.exit(1);
    } 
```

显然输入“input.txt”的信息不够多，我不确定。我删除了

```
 if(file.length() == 0)
    {
        System.out.println("File is empty");
        System.exit(1);
    } 
```

为了得到我上面所说的错误，这就是我发现它甚至无法使用 anagram.java prgm 识别 src 中的文件的方式。

我的代码有什么问题？为什么它不读取文件或说它不存在？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-12T17:32:14.630

我敢说文件在`src`目录中 - 但我怀疑这*不是*程序的当前工作目录。要检查这一点，请运行以下代码：

```
System.out.println(new File(".").getAbsolutePath()); 
```

选项：

*   指定绝对文件名
*   指定一个相对文件名，该文件名考虑到您运行它的位置
*   将文件捆绑为资源并使用`Class.getResourceAsStream`或类似

请注意，这与`BufferedReader`您毫无问题地阅读文本`System.in`无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:32:09.720

它正在寻找与您的源目录不同的路径。尝试指定完整路径`c:\input.txt`（但不要忘记将文件移到那里！）以了解我的意思。

# c# - 如何释放/解锁/关闭剪贴板，以免其他应用崩溃

> ID：15368044
> 
> 赞同：0
> 
> 时间：2013-03-12T17:29:07.600
> 
> 标签：c#, concurrency, clipboard

这就是我在 C# 程序中设置剪贴板内容（文本字符串）的方式：

```
Thread staThread3 = new Thread(
delegate()
{
    try
    { new SetClipboardHelper(DataFormats.Text, s).Go();}
    catch (Exception ex)
    {
         threadEx = ex;
    }
});
staThread3.SetApartmentState(ApartmentState.STA);
staThread3.Start();
staThread3.Join(); 
```

**问题**：这是设置剪贴板的一种安全方式，还是这段代码仍然为其他应用程序锁定剪贴板？难道是我必须添加一个声明

```
staThread3.Abort(); 
```

== 编辑 ==

根据评论，我想明确我的问题：有什么我可以添加到我的代码中以使其他应用程序更安全地使用剪贴板。我正在寻找类似 CloseClipboard 的东西来为其他应用程序发布此资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:16:07.023

您需要尽量减少独占使用剪贴板的时间。通常您要打开、清除、更新、关闭。然后剪贴板可用于其他应用程序，这些应用程序通常会对您的更新做出反应（如果您正在运行剪贴板查看器）。

如果在线程中运行会导致执行速度很慢，或者以容易被中断的方式（例如，有利于您的主线程），那么您不应该在线程中执行此操作。

其他程序应该保护自己免受“无法打开剪贴板”错误的影响，但你应该注意不要让剪贴板保持打开的时间超过必要的时间，并且永远不要在你完成使用剪贴板之前发送 WM_DrawClipboard 消息。

# php - keyup 不起作用，不显示一个警报

> ID：15368049
> 
> 赞同：0
> 
> 时间：2013-03-12T17:29:20.117
> 
> 标签：php, jquery, mysql, keyup

我有一个文本字段类型的文本，当我输入一个盘子的数字时，如果它存在，它必须显示一个警报，但事件 keyup 不起作用。

JS

```
$('#mat').keyup(function(){
        var matric = $('#mat').val();
        $.ajax({type: "POST",
                     url: "compruebaVeh.php",
                     data: "matric="+matric,
                     success:function(data) {
                         alert(data);
                         if(data=='ok'){
                             alert('this car already exists');
                         }
                     }
        });  
    }); 
```

PHP

```
<?php

 $mat=$_POST['matric'];
 ini_set('display_errors',1); error_reporting(E_ALL);
 require('conecta.php');
 $cSQL="select matricula from vehiculos;";
 $stmt=$oConni->prepare($cSQL) or die($oConni->error);
 //$stmt->bind_param('s',$_POST['matric']);
 $stmt->execute();
 $stmt->bind_result($matricula);
 while ($stmt->fetch()) {
    if($matricula==$mat){
        echo 'ok';
    }
 }   
 $stmt->close();  
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:32:41.327

在 php 代码中，赋值`$_POST['matric']=$mat;`应该颠倒

`$mat = $_POST['matric'];`

根据数据库中的数据，您的脚本可能会`ok`多次回显，循环应变为：

```
while ($stmt->fetch()) {
    if($matricula==$mat){
        echo 'ok';
        break;
    }
 } 
```

所以现在你可以在 js 回调中与“ok”进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:49:52.173

我要解决这个问题，这样你就不会像这样设置后端那样敲打你的后端。[关于 SO](https://stackoverflow.com/questions/4220126/run-javascript-function-when-user-finishes-typing-instead-of-on-key-up)的问题已经解决了这个问题

```
//setup before functions
var typingTimer; //timer identifier
var doneTypingInterval = 1000; //time in ms, 1 second for example

var licenceSearch = $("#mat");

//on keyup, start the countdown
licenceSearch.keyup(function () {
    clearTimeout(typingTimer);
    if (licenceSearch.val) {
        typingTimer = setTimeout(doneTyping, doneTypingInterval);
    }
});

//user is "finished typing," do something
function doneTyping() {
    alert(licenceSearch.val());

    // ajax stuff can happen here.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:31:54.213

您需要使用新的[Promise 接口](http://api.jquery.com/category/deferred-object/)JQuery 方法，如下所示：

```
$('#mat').on('keyup', function (event) {

    var matric = $(event.target).val();

    var response = $.post("compruebaVeh.php", {data: matric});

    response.done(function (data) {
        alert(data)
    });

    response.fail(function () {
        alert('error')
    });

}); 
```

这是一个有效的 keyup fiddle 示例： http: [//fiddle.jshell.net/vHTZN/](http://fiddle.jshell.net/vHTZN/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T17:34:39.457

在 php 代码中创建退出语句，然后重试。

```
while ($stmt->fetch()) {
    if($matricula==$mat){
        echo 'ok';
    }
 }  
exit; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T17:37:00.643

在大多数情况下，在 html 代码中不止一次定义了 id #mat，keyup 也可能有效，但 url 可能不正确，并且不会触发成功分支。除此之外，我看到 $_POST['matric']=$mat; 这不太对。可能你想要 $mat = $_POST['matric']。您可以使用 firebug 控制台检查 javascript 的实际情况以及 php 脚本返回的内容

# javascript - 防止导航离开jquery mobile中的对话框

> ID：15368050
> 
> 赞同：2
> 
> 时间：2013-03-12T17:29:20.087
> 
> 标签：javascript, jquery-mobile

我是 jQuery mobile 的新手，正在尝试使用 jQuery mobile 构建 PhoneGap 应用程序。

我有点坚持以下问题。

我有一个登录对话框作为表单，如果他们需要登录，我想向用户显示。我不希望他们在登录之前能够离开这个登录表单。我已经删除了所有链接在对话框中，但硬件后退按钮仍然有效。

我尝试了以下方法：

复制代码

```
function onDocumentReady() {
    document.addEventListener("deviceready", onDeviceReady, true);

    $("#loginDialog").on("pagebeforehide",
        function(event) {
            event.preventDefault();
            console.info('in pagebeforehide');
        }

    );
} 
```

这虽然行不​​通。代码被调用（我添加了一个断点），但对 event.preventDefault() 的调用并没有停止导航离开页面。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T05:51:04.360

正如我在许多答案中所说的那样，PhoneGap 和 Android 后退按钮非常混乱。

您可以禁用 Android 后退按钮，如下所示

```
$(function(){
    document.addEventListener("deviceready", onDeviceReady, false);
})

// PhoneGap is loaded and it is now safe to call PhoneGap methods
function onDeviceReady() {
    // Register the event listener
    document.addEventListener("backbutton", onBackKeyDown, false);
}

// Handle the back button
function onBackKeyDown() {
    console.log("back button not fired");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:21:38.750

preventDefault 将阻止锚标记的默认操作。如果你想禁用后退按钮试试这个：

```
<SCRIPT type="text/javascript">
    window.history.forward();
    function noBack() { window.history.forward(); }
</SCRIPT>
</HEAD>
<BODY onload="noBack();"
    onpageshow="if (event.persisted) noBack();" onunload=""> 
```

# node.js - OAuth 2.0：允许在 node.js / express API 中进行客户端（隐式 / Javascript）身份验证

> ID：15368051
> 
> 赞同：3
> 
> 时间：2013-03-12T17:29:21.860
> 
> 标签：node.js, oauth, oauth-2.0

我在 node.js (w/ Express) 中构建了一个 API，它目前支持 OAuth 2.0 服务器端（显式）身份验证。我想允许客户端通过 javascript 库（客户端隐式身份验证）连接到应用程序。

首先，我知道我需要[在我的服务器上启用 CORS](https://stackoverflow.com/questions/7067966/how-to-allow-cors-in-express-nodejs)。

我目前对隐式身份验证问题的理解是，我们不能要求 javascript 客户端在请求中包含 3rd 方应用程序的秘密，因为这将涉及将秘密编码到 javascript 中，这将是一个安全风险（暴露密钥）。因此，从 javascript 客户端发出的请求仅使用应用程序令牌（并且没有秘密）进行签名。为了保证 API 端的安全性，我们必须将服务于 javacsript 的域与它声称代表的第 3 方应用程序的注册域进行匹配。

换句话说，在 API 端，这个过程听起来像这样：

1.  如果传入的请求缺少第 3 方应用程序的“秘密”，请检查请求标头
2.  如果标头确认请求是代表针对此第 3 方应用程序注册的域名发出的，则认为应用程序已验证（并继续验证 access_token，如果提供）。

我的困惑是这样的：

请求标头不能被欺骗吗？我如何确定发出请求的 javascript 客户端确实位于它声称的域上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:39:08.413

您应该能够信任浏览器以防止客户端更改您在标题中找到的引荐来源信息。在这种情况下，大多数 api 都会很乐意检查引荐来源网址。

这可以通过让您的服务器为客户端提供一个快速过期的令牌来改进。令牌使用不公开的秘密。

```
3rd party server asks for token using shared secret to your server
3rd party server serves token to its client
client makes request to your server providing referrer (assured by browser), and token
your server verifies both before replying 
```

当然，如果有人使用命令行工具、浏览器扩展程序或服务器，他们将更容易在请求中发送他们想要的任何内容，但他们只有令牌过期的窗口，而你如果您觉得客户端 IP 滥用服务，可以始终禁止该 IP 地址。

# ios - 从 UIWebView 中复制样式文本？

> ID：15368053
> 
> 赞同：3
> 
> 时间：2013-03-12T17:29:23.497
> 
> 标签：ios, uiwebview, copy-paste

我在 iOS 6.1 上运行的应用程序中有一个 UIWebView，其中包含格式化的 HTML（带有粗体文本、斜体文本等）。

当用户突出显示 UIWebView 的内容并从中复制文本，然后将其粘贴到（例如）页面中时，它只粘贴纯文本，而不是样式。这是 UIWebView 的预期行为吗？有没有办法让它也复制文本样式？

谢谢你的帮助。

# python - 使用 setup.py 安装包的导入错误

> ID：15368054
> 
> 赞同：32
> 
> 时间：2013-03-12T17:29:29.143
> 
> 标签：python, import, python-2.7, setuptools

我在使用`setup.py`设置 python 包时遇到问题。首先，我有以下目录设置：

```
maindir
   |- setup.py
   |-mymodule
         |- __init__.py
         |- mainmodule.py
         |-subdir
             |- __init__.py
             |- submodule.py 
```

即项目目录包含`setup.py`和一个目录`mymodule`，它本身包含两个目录中的两个python模块。该文件`submodule.py`仅包含

```
teststring = "hello world" 
```

`mainmodule.py`包含：

```
from .subdir import submodule
mainstring = "42" 
```

并`setup.py`包含：

```
import os
from setuptools import setup
setup(
    name = "mytestmodule",
    version = "0.0.1",
    description = ("A simple module."),
    packages=['mymodule'],
) 
```

当我`from mymodule import mainmodule`使用`ipython`from时`sourceTest`，行为按预期工作，我可以参考例如`mainmodule.submodule.teststring`，它给了我字符串`hello world`。

另一方面，当我使用安装此“包”`python setup.py install`并尝试执行相同操作（从其他目录中）时，出现导入错误：

```
In [1]: from mymodule import mainmodule
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
/home/alexander/<ipython-input-1-cf4c9bafa487> in <module>()
----> 1 from mymodule import mainmodule

/home/alexander/build/bdist.linux-i686/egg/mymodule/mainmodule.py in <module>()

ImportError: No module named subdir 
```

我没有看到我做错了什么，因为我遵循了[入门教程](http://pythonhosted.org/an_example_pypi_project/setuptools.html)和[导入内部包的规则](http://docs.python.org/2/tutorial/modules.html#packages-in-multiple-directories)。我想我的错误是一个非常小的错误，但我无法发现它并且感谢您的帮助。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-12T17:32:02.200

您必须列出 中的所有包`setup`，包括子包：

```
setup(
    name = "mytestmodule",
    version = "0.0.1",
    description = ("A simple module."),
    packages=['mymodule', 'mymodule.subdir'],
) 
```

或者你可以使用`setuptools`'s 魔法功能`find_packages`：

```
from setuptools import setup, find_packages
setup(
    name = "mytestmodule",
    version = "0.0.1",
    description = ("A simple module."),
    packages=find_packages(),
) 
```

[这里](http://docs.python.org/2/distutils/examples.html#pure-python-distribution-by-package)提到了这一点：

> 如果您有子包，它们必须在包中明确列出，但 package_dir 中的任何条目都会自动扩展到子包。（换句话说，*Distutils 不会扫描您的源代码树，而是试图*通过查找`__init__.py`文件来确定哪些目录对应于 Python 包。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-10T18:17:54.997

您需要明确指定每个模块。不必每次都维护向 setup.py 添加模块的复杂性，您可以`find_packages`使用`setuptools`.

`find_packages`接受两个可选参数：

1.  `where`这是默认的，`'.'`即你的curdir。
2.  `exclude`要排除的东西列表

我通常在我的仓库中有测试，所以我使用：

```
from setuptools import find_packages

packages=find_packages(exclude=["*.tests", "*.tests.*", "tests.*", "tests"]), 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-19T01:04:32.260

我在 setup.py console_scripts 中有多余的。`scriptname**.py**:main``.py`

# c# - 使用表达式树为 LINQ 查询构建 IQueryable.Any

> ID：15368059
> 
> 赞同：13
> 
> 时间：2013-03-12T17:29:43.347
> 
> 标签：c#, expression-trees

我正在使用 System.Linq.Expressions.Expression 类动态构建 SQL“WHERE”子句。它适用于简单的子句，例如添加“PhaseCode = X”子句，我执行以下操作：

```
var equalTarget = Expression.Constant(phaseCode, typeof(int?));
var phaseEquals = Expression.Equal(Expression.PropertyOrField(projParam, "PhaseCode"), equalTarget); 
```

但是，现在我正在尝试构建一个表达式，如果项目已分配给特定组，它将返回记录。Project 和 Group 是多对多的关系。如果没有表达式树，我会这样做：

```
db.Projects.Where(p => .... && p.GroupsAssigned.Any(g => g.ID == groupId)) 
```

但是，我似乎找不到使用 Expression 类来表达这一点的方法。实际上有两件事我无法弄清楚：

*   如何遍历表之间的关系
*   如何做 x.Any()

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-12T17:38:36.790

调用扩展方法，如[Enumerable.Any](http://msdn.microsoft.com/en-us/library/bb534972.aspx)或[Queryable.Any](http://msdn.microsoft.com/en-us/library/bb534338.aspx)，只是对序列和为`WHERE`子句创建的 lambda 表达式的静态方法调用。您可以使用它[`Expression.Call`](http://msdn.microsoft.com/en-us/library/bb301084.aspx)来执行此操作：

```
// for Enumerable.Any<T>(IEnumerable<T>,Predicate<T>)
var overload = typeof(Enumerable).GetMethods("Any")
                                 .Single(mi => mi.GetParameters().Count() == 2);
var call = Expression.Call(
    overload,
    Expression.PropertyOrField(projParam, "GroupsAssigned"),
    anyLambda); 
```

对于`Queryable.Any<T>`，您需要将其汇总到一个方法中：

```
static Expression BuildAny<TSource>(Expression<Func<TSource, bool>> predicate)
{
    var overload = typeof(Queryable).GetMethods("Any")
                              .Single(mi => mi.GetParameters().Count() == 2);
    var call = Expression.Call(
        overload,
        Expression.PropertyOrField(projParam, "GroupsAssigned"),
        predicate);   

    return call;
} 
```

虽然这看起来很奇怪，但您无法通过正常查询来做到这一点。

# c# - 在内容 100% 完成之前从 HttpResponseMessage 读取标头

> ID：15368066
> 
> 赞同：13
> 
> 时间：2013-03-12T17:30:00.673
> 
> 标签：c#, asynchronous, c#-5.0, dotnet-httpclient

1.  在整个响应流回之前，如何访问响应标头？
2.  我如何在流到达时读取它？
3.  HttpClient 是我对接收 http 响应进行精细控制的最佳选择吗？

这是一个可以说明我的问题的片段：

```
using (var response = await _httpClient.SendAsync(request,
  HttpCompletionOption.ResponseHeadersRead))
{
   var streamTask = response.Content.ReadAsStreamAsync();
   //how do I check if headers portion has completed? 
   //Does HttpCompletionOption.ResponseHeadersRead guarantee that?
   //pseudocode
   while (!(all headers have been received)) 
     //maybe await a Delay here to let Headers get fully populated
   access_headers_without_causing_entire_response_to_be_received

   //how do I access the response, without causing an await until contents downloaded?
   //pseudocode
   while (stremTask.Resul.?) //i.e. while something is still streaming
     //? what goes here? a chunk-read into a buffer? or line-by-line since it's http?
   ... 
```

**编辑**为我澄清另一个灰色区域：
~~我发现的任何参考都有某种阻塞语句，这将导致等待内容到达。~~我阅读的引用通常访问 streamTask.Result 或 Content 上的方法或属性，并且我不知道哪些引用是可以的，因为 streamTask 正在进行，哪些将导致等待直到任务完成。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T01:35:14.450

根据我自己的测试，在您开始读取内容流之前不会传输内容，并且您正确地认为调用`Task.Result`是阻塞调用，但它的本质是同步点。*但是*，它不会阻塞预缓冲整个内容，它只会阻塞直到内容*开始*来自服务器。

因此，无限流不会阻塞无限长的时间。因此，尝试异步获取流可能被认为是矫枉过正，尤其是在您的标头处理操作相对较短的情况下。但是，如果您愿意，您始终可以在处理另一个任务的内容流时处理标头。像这样的东西可以做到这一点。

```
static void Main(string[] args)
{
    var url = "http://somesite.com/bigdownloadfile.zip";
    var client = new HttpClient();
    var request = new HttpRequestMessage(HttpMethod.Get, url);

    var getTask = client.SendAsync(request, HttpCompletionOption.ResponseHeadersRead);
    Task contentDownloadTask = null;

    var continuation = getTask.ContinueWith((t) =>
    {
        contentDownloadTask = Task.Run(() =>
        {
            var resultStream = t.Result.Content.ReadAsStreamAsync().Result;
            resultStream.CopyTo(File.Create("output.dat"));
        });

        Console.WriteLine("Got {0} headers", t.Result.Headers.Count());
        Console.WriteLine("Blocking after fetching headers, press any key to continue...");
        Console.ReadKey(true);
    });

    continuation.Wait();
    contentDownloadTask.Wait();
    Console.WriteLine("Finished downloading {0} bytes", new FileInfo("output.dat").Length);

    Console.WriteLine("Finished, press any key to exit");
    Console.ReadKey(true);
} 
```

请注意，无需检查标头部分是否完整，您已使用`HttpCompletionOption.ResponseHeadersRead`选项明确指定了这一点。`SendAsync`在检索到标头之前，该任务将不会继续。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-18T14:06:59.977

使用 await/async 关键字的结果更具可读性：

```
var url = "http://somesite.com/bigdownloadfile.zip";

using (var httpClient = new HttpClient())
using (var httpRequest = new HttpRequestMessage(HttpMethod.Get, url ))
using(HttpResponseMessage response = await httpClient.SendAsync(httpRequest, HttpCompletionOption.ResponseHeadersRead))
using (Stream stream = await response.Content.ReadAsStreamAsync())
{
    //Access to the Stream object as it comes, buffer it or do whatever you need
} 
```

# php - 如何正确地从本地主机发送电子邮件

> ID：15368067
> 
> 赞同：-1
> 
> 时间：2013-03-12T17:30:02.623
> 
> 标签：php, mysql, localhost, php-ini, server-configuration

我正在尝试从我的本地主机测试一些电子邮件脚本，但它似乎不适用于我正在使用的任何 smtp 设置。我可以使用我的业务服务器中的设置来激活它，但它阻止了我发送太多电子邮件。以下是设置（已编辑）：

```
[mail function]
    ; For Win32 only.
    SMTP = mail.mydomain.co.uk
    smtp_port = 26
    sendmail_from = info@mydomain.co.uk 
```

是否有任何其他设置可以让我成功地允许我通过邮件功能中的本地主机发送电子邮件，例如来自谷歌等？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:41:45.263

在 Windows 机器上通过本地 smtp 从本地主机发送电子邮件相当困难，我建议 Swiftmailer 可以使用库从外部电子邮件帐户（例如 Gmail）发送电子邮件

# mootools - SlideItMoo 控制按钮不显示在 IE9 中

> ID：15368069
> 
> 赞同：1
> 
> 时间：2013-03-12T17:30:05.983
> 
> 标签：mootools

我正在使用来自该站点的 SlideItMoo-Script：

[http://www.php-help.ro/examples/slideitmoo_1.1/](http://www.php-help.ro/examples/slideitmoo_1.1/)

正如您在第一个示例（演示 1）中所见，如果您单击左侧和右侧的其中一个控件，则会出现一个带有 3 个图像的图像滑块。

当我用 IE9 打开同一个页面时，Demo 1 显示为一个高度较大的 div，所有元素都显示出来，控件完全丢失。

当我在多个站点上使用此脚本时，我将不胜感激解决此问题的任何帮助。有人对我有任何提示吗？

编辑：附加信息：

通过 IE9-Developer-Tools 我得到了 folowwong javascript-error：

```
SCRIPT5022: DOM Exception: INVALID_CHARACTER_ERR (5) 
mootools-1.2.1-core.js, Zeile 117 Zeichen 71 
```

在线 117 | 71给出以下代码：

```
return moo.element(this.createElement(A) 
```

# vb.net - 如何在windows平台上使用vb.net 2008远程访问MySql Workbench

> ID：15368070
> 
> 赞同：0
> 
> 时间：2013-03-12T17:30:06.513
> 
> 标签：vb.net, phpmyadmin, mysql-workbench

我正在使用 VB.NET（Windows 窗体）创建桌面应用程序，问题：

我想创建一个客户端-服务器应用程序，这意味着我只需要服务器上的 1 个数据库。

我有一台电脑和一台笔记本电脑。我将笔记本电脑的 IP 设置为 192.168.1.1，将计算机的 IP 设置为 192.168.1.2。

现在我把数据库放在我的电脑上，数据库名称是dbname。

问题是，如何从我的笔记本电脑连接我的计算机数据库？

规格 ：

我在下面使用这个字符串进行连接：

connectionString="服务器=192.168.0.1；端口=3306；用户ID=root；密码=pass；数据库=dbname；"

我已经禁用了防火墙。Ping 正在工作......但它给出了错误 Database not found

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:37:53.207

您是否尝试连接到 mysql 服务器进行数据访问？我不太确定“使用 vb.net 远程访问 MySql Workbench”是什么意思。

如果您需要从 vb.net（或任何其他 .net 语言）对 mysql 进行数据访问，则需要使用 .net 的 msql 连接器：http: [//dev.mysql.com/downloads/connector/net /](http://dev.mysql.com/downloads/connector/net/)

# javascript - 为什么数组的最后一个元素只为 Javascript 中的 onClick 填充

> ID：15368072
> 
> 赞同：1
> 
> 时间：2013-03-12T17:30:14.143
> 
> 标签：javascript

我正在遍历一系列对象，并且遇到了奇怪的行为。这是我的代码：

```
 window.onload = function () {

    document.getElementById('btnAdd').onclick = function () {
        add("button");
    };
    function add(type) {
        var names = {};
        names['one'] = { id: "Button 1",msg:"#1" };
        names['two'] = { id: "Button 2", msg: "#2" };
        names['three'] = { id: "Button 3", msg: "#3" };
        //Create an input type dynamically.
        function addOnClick(element, currentName) {
              element.onClick = function () {
                 alert("button is " + names[currentName].msg);
            };
          };       

        for (name in names) {
            var element = document.createElement("input");

            element.type = type;
            element.value = names[name].id; 
            element.name = name;  
             addOnClick(element,name);

            var foo = document.getElementById("fooBar");
            //Append the element in page (in span).  
            foo.appendChild(element);
        }
    }
}; 
```

继承人的html：

```
 <p>
<input type="button" id="btnAdd" value="Add Buttons" />
<p id="fooBar">Buttons:   </p>

</p> 
```

如果您在浏览器中运行它，并使用“添加按钮”按钮，则会创建 3 个按钮并正确命名。但是，如果您单击 3 个新按钮之一，警告框总是显示“按钮为 #3”，我不知道为什么。有人可以解释为什么 onClick 事件只记住我数组中的最后一项吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T17:34:05.363

您正在成为 javascript 中闭包捕获规则的牺牲品。只有一个副本，`name`当`onclick`触发时，它将是`name`集合中的最后一个值`names`。为了解决这个问题，您需要创建一个新的`function`范围来捕获当前值`name`

```
var addOnClick = function(currentName) { 
  element.onclick = function() { 
    alert("button is " + names[currentName].msg);
  };
};
addOnClick(name); 
```

**编辑**

您还需要使用`onclick`not `onClick`。案件在这里很重要

> 小提琴：http: [//jsfiddle.net/Nzf3p/](http://jsfiddle.net/Nzf3p/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T17:35:45.977

这是由于闭包在 Javascript 中的工作方式（局部变量的捕获）。分配给的匿名函数`element.onclick`是：

```
function () { 
    // Note this is a function
    alert("button is "+ names[name].msg);
}; 
```

这里， 的值`name`绑定到循环中遇到的最后一个值，即最后一个元素。本质`name`上，在循环中指向`name`外部循环中使用的内存位置。该位置不断更新，最后指向 value `three`。为了解决这个问题，您需要一个附加函数（它创建一个新范围）来保留`name`. 这将创建一个版本，`name`该版本是该新函数的本地版本，因此被保留：

```
//A self-invoked function, into which you pass name. preservedName is the preserved
//value of name, which is local to the scope of this self-invoked function.
(function(preservedName) {
    element.onclick = function() {
        alert("button is " + names[preservedName].msg);
    };
})(name); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T17:37:42.877

问题是由于您为 onclick 处理程序创建的关闭。

```
element.onclick = function () { // Note this is a function
            alert("button is "+ names[name].msg);
        }; 
```

应该由传入您感兴趣的名称的函数包装：

```
addOnClickToElement(element,name); 
```

然后将此命名函数添加到与“添加”相同的范围内，以便`names`可以访问：

```
function addOnClickToElement(element,name) { // Note this is a function
    element.onclick = function(){alert("button is "+ names[name].msg);};
} 
```

# python - 源代码控制如何与 Python 子进程一起工作？

> ID：15368079
> 
> 赞同：1
> 
> 时间：2013-03-12T17:30:40.880
> 
> 标签：python, subprocess, clearcase

我很好奇 Python 在使用关于源代码控制的 subprocess 命令时会看到什么。我一直在使用 ClearCase，每当我启动终端时，我都会设置我的 cshrc 以在 ClearCase 中启动我的视图。

我知道通过子进程模块（subprocess.Popen）运行shell命令时，shell默认为False。如果没有我对 ClearCase 的看法，我应该看不到源代码管理中的任何文件，但我知道我可以看到。我能够在源代码管理中执行文件。

如果没有视图开始，这怎么可能？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:24:43.577

确保您没有通过 /view （在 Unix 中）访问您的视图，这[`cleartool setview`会触发 subshel​​l](https://stackoverflow.com/questions/10252436/python-and-clearcase-setview)。
这与从 python 脚本完成的任何系统调用都不兼容。

运行 shell 将使您能够访问[扩展路径](https://stackoverflow.com/questions/176858/in-clearcase-how-can-i-view-old-version-of-a-file-in-a-static-view-from-the-co/177350#177350)（仅在动态视图中）。**[您还可以尝试看看使用pycleartool 之](https://pypi.python.org/pypi/pycleartool)**
类的库会得到什么样的结果。

# php - 从教义2中插入实体的mssql刷新Uniqueidentifier ID

> ID：15368082
> 
> 赞同：0
> 
> 时间：2013-03-12T17:30:48.027
> 
> 标签：php, sql-server, doctrine-orm

我有一个具有以下 dcm.xml 定义的实体：

```
<doctrine-mapping xmlns="http://doctrine-project.org/schemas/orm/doctrine-mapping"
                         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                         xsi:schemaLocation="http://doctrine-project.org/schemas/orm/doctrine-mapping
                         https://raw.github.com/doctrine/doctrine2/master/doctrine-mapping.xsd">

    <entity name="Conversation" table="Conversations">
        <!-- ID's -->
        <id name="_id" column="ID" type="text">
            <generator strategy="AUTO" />
        </id>

        <!-- Fields -->
        <field name="_subject" column="Subject" type="string" />

        <!-- Associations -->
        <one-to-many field="_conversationMembers" mapped-by="_conversation" target-entity="ConversationMember">
            <cascade><cascade-persist /></cascade>
        </one-to-many>

    </entity>
</doctrine-mapping> 
```

此实体的 ID 是 MSSQL 08 唯一标识符。
现在我生成一个新对象并将其刷新到数据库中。

```
$conversation = new Conversation();
$em = $dbHandler->getEntityManager();
$conversation->setSubject($subject);
$em->persist($conversation);
$em->flush(); 
```

现在我发现这篇文章告诉我，在我刷新实体后，应该设置 ID： [获取最后一个插入 id 与学说 2？](https://stackoverflow.com/questions/3509350/get-the-last-insert-id-with-doctrine-2)

如果我尝试这个建议并添加

```
$conversation->getId(); 
```

ID 仍然为 0。

我无法刷新与此相关的其他实体，因为在每次插入时，学说都会尝试将值 0 作为唯一标识符插入指定的外键列中。
当然，这最终会导致 sql server 的错误消息。

有人知道我做错了什么吗？
还是有另一种方法来确定新生成的 ID ？

我知道一些使用 sql-server 和 Doctrine2 的问题。
它会挂在那里吗，那个学说在这个星座上是行不通的？

# ruby-on-rails - 如何选择 DISTINCT [model].* 使用 Squeel 和 Rails

> ID：15368083
> 
> 赞同：1
> 
> 时间：2013-03-12T17:30:59.350
> 
> 标签：ruby-on-rails, squeel

出于兴趣，我试图重写

```
Model.joins{other_model}.uniq 
```

（生成）：

```
=> "SELECT DISTINCT [model].* FROM [model] INNER JOIN [other_model] ON [other_model].[model_id] = [model].[id]" 
```

在纯 Squeel 中，但我能得到的最接近的是

```
Model.joins{other_model}.select{distinct(id)} 
```

生成：

```
=> "SELECT DISTINCT [model].[id] FROM [model] INNER JOIN [other_model] ON [other_model].[model_id] = [model].[id]" 
```

我将如何`DISTINCT [model].*`在 Squeel 中进行操作？是否可以？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T22:43:04.840

您需要在反引号中引用 *

```
Model.select{distinct(`*`)}.to_sql 
```

产生：

```
SELECT distinct(*) from `models` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:04:06.270

你不能通过通配符来代替吗？

```
Model.joins{other_model}.select{distinct('*')} 
```

# javascript - 为什么 JavaScript 会阻止 CSS 动画和过渡？

> ID：15368087
> 
> 赞同：16
> 
> 时间：2013-03-12T17:31:12.463
> 
> 标签：javascript, performance, css

**更新 2：**

在 Chrome 31.0.1650.34 beta 中运行下面的 JSFiddle 现在**不会**导致所描述的行为，即它不会“在 JavaScript 启动时冻结”。我只能假设他们已经将 CSS 转换放置在与 JavaScript 和页面的其余部分不同的线程上——好消息！Firefox 25.0 中仍然会出现冻结/阻塞转换。

**更新1：**

@IvanCastellanos 提到 CSS 过渡和动画**不会**在 Android Chrome 上被阻止。这是非常有用的信息，并且部分地激发了这个问题。

**原始问题：**

对于浏览器供应商来说，这可能更像是一个问题，但这里有：到目前为止，我从[这个视频](https://www.youtube.com/watch?feature=player_embedded&v=iYdfj0XxoMY)（和其他视频）中得到的印象是，过渡 CSS 不透明度不会真正受到*任何*性能问题的影响。

在视频中，Paul Irish 特别给出了过渡不透明度不会成为问题的印象，并且“任何告诉你其他情况的人都是......错误的”。

好吧，如果是这样的话，**[这个小提琴让我错了](http://jsfiddle.net/4J8q7/1/)**。

**鉴于 Paul 的非凡主张，为什么 CSS 转换会被 JavaScript 阻止？**动画也是如此，这是怎么回事？

（对于你们中的那些要么看不到我所看到的，要么懒得看小提琴：我看到一个红色方块使它通过淡入转换大约 1/5，然后在 JavaScript 启动时冻结，然后方块跳到过渡到完全不透明的末尾，大概是因为在 JavaScript 执行期间已经达到了持续时间。）

鉴于 stackoverflow 需要我发布一些代码，因为我链接到 jsfiddle，这里是相关的 JavaScript 和 CSS：

```
(function () {
    "use strict";

    var isVisible = false;

    function handleClick() {

        var fadingSquare = document.querySelector(".fadingSquare"),
            i;

        if (isVisible === false) {
            fadingSquare.className = fadingSquare.className + " active";

            // Do something intensive in JavaScript for a while
            setTimeout(function () {

                for(i = 0; i < 10000; i += 1) {
                    console.log(i);
                }

            }, 200);    // Make it occur midway through the CSS transition

            isVisible = true;
        } else {
            fadingSquare.className = fadingSquare.className.replace("active", "");
            isVisible = false;
        }

    }

    document.addEventListener("click", handleClick, false);
}()); 
```

和 CSS：

```
.fadingSquare {
    width: 200px;
    height: 200px;
    background: #F00;
    opacity: 0;
    -webkit-transition-property: opacity;
    -webkit-transition-duration: 1s;
}

.fadingSquare.active {
    opacity: 1;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T17:35:00.460

Javascript 在浏览器的 UI 线程上运行。

整个*页面*被Javascript屏蔽；不仅仅是 CSS 过渡。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-05-24T22:21:32.263

选择的答案有点过时了。截至今天，在 OSX safari、firefox 和 chrome 上，它们都在与 javascript 不同的线程中运行 css 动画。

# java - JNI：客户端 jvm.dll 与服务器 jvm.dll

> ID：15368090
> 
> 赞同：0
> 
> 时间：2013-03-12T17:31:19.377
> 
> 标签：java, java-native-interface

我们有这个本机应用程序，它在其进程中启动一个 jvm，并使用 JNI 调用 Java 代码。

我们将 jvm.dll 的位置放在路径中（这是在 windows 上）以便可以加载它，我们注意到当我们使用“客户端”目录时，一切正常，但编译为 32-位，当我们使用“服务器”目录时，JNI_CreateJavaVM() 失败，返回值为 -4。

据我所知，JVM 的客户端和服务器版本都应该可以工作，那么发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:00:30.430

看起来很可疑，因为您正在创建一个无法启动的 JVM，因为它被配置为使用比可用内存更多的内存。

```
#define     JNI_OK   0
#define     JNI_ERR   (-1)
#define     JNI_EDETACHED   (-2)
#define     JNI_EVERSION   (-3)
#define     JNI_ENOMEM   (-4)
#define     JNI_EEXIST   (-5)
#define     JNI_EINVAL   (-6) 
```

当然，也可以有其他解释；但是，您会检查系统的可用内存、配置参数和最大进程大小（如果您使用的是旧版本的 Windows）。我认为这可能是您遇到的问题。

它还将解释“工作但现在不工作”的问题，因为可能在发生故障时，系统没有足够的空闲内存来提交给 JVM（它会在运行之前预先获取所有内存） ）。也许您的服务器版本要求“刚好够”来推动限制。

# css - 垂直文本对齐

> ID：15368091
> 
> 赞同：0
> 
> 时间：2013-03-12T17:31:20.877
> 
> 标签：css

我有一个不同长度的垂直页面标签，即新闻、奖项、出版物。我希望文本从同一个顶点开始（如果文本是水平的，那将是正确的）并从该点向下。我必须使用内联样式将文本向下推到正确的位置。我尝试将高度和宽度设置为 500，这似乎适用于对齐，但会将 div 推到正确的位置。

```
.vert_text {
position: relative;
color: #fff;
text-transform: lowercase;
font-family: Arial;
font-size: 6em;
-webkit-transform: rotate(-90deg);
-moz-transform:rotate(-90deg);
-ms-transform:rotate(-90deg);
float:left;
width:100px;
}

<div class="vert_text">
news
</div>
<div class="vert_text">
publications
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:35:05.717

使用 line-height 并定义一个高度，例如：

```
.vert_text {
    height:6em;
    line-height:6em;
} 
```

看到这个工作[小提琴](http://jsfiddle.net/soyuka/gdArF/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:35:42.783

```
.var_text{
margin-top:0px;
} 
```

或者

> 删除位置：相对

然后加

> 边距：0px 或边距顶部：0px；

# c - 有没有办法知道在 Linux 中传递给 __free_hook 的指针的大小？

> ID：15368093
> 
> 赞同：2
> 
> 时间：2013-03-12T17:31:25.477
> 
> 标签：c, linux, malloc, hook, free

我想跟踪大型应用程序当前分配了多少内存。

我发现我可以在 malloc/free/realloc 周围安装钩子以拦截内存分配调用：

[http://man7.org/linux/man-pages/man3/malloc_hook.3.html](http://man7.org/linux/man-pages/man3/malloc_hook.3.html)

所以我要跟踪的是分配的总字节数 - 释放的总字节数。

现在的问题是 free 只需要一个指针而不是一个大小。

In 可以在我的 malloc 挂钩中创建我自己的映射或哈希映射，以跟踪为该指针分配了多少内存，但这会导致相当多的开销。

有什么方法（即使它有点黑客）在 Linux（64 位）上获得调用 free 时 ptr 的大小（使用默认的 g++ malloc）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T17:37:40.017

linux man malloc_usable_size

> malloc_usable_size() 返回动态分配的缓冲区 ptr 中可用的字节数，它可能大于请求的大小（但如果请求成功，则保证至少一样大）。通常，您应该存储请求的分配大小而不是使用此函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T17:38:50.530

这不是您问题的直接答案，但是看到您对分配的总内存感兴趣，那么这里是解决方案：

*   [`mallinfo()`](http://man7.org/linux/man-pages/man3/mallinfo.3.html)

我认为您将对`uordblks`它返回的结构字段最感兴趣。

请注意，这不是标准的 POSIX 函数，但我想这就是您对像这样的非标准内省所期望的......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T17:45:42.690

内存块的大小通常存储在指针下方。虽然这是一个 hack（你说我可以......），但以下代码在我的 Linux 机器上运行：

```
#include <stdio.h>
#include <stdlib.h>

int main(){
int *p, n=123;
p = (int*)malloc(n*sizeof(int));
printf("allocated %d bytes for p\n", n*sizeof(int));
printf("p[-2] : %d \n", *(p-2));
printf("malloc_useable_size(p) : %d\n", malloc_usable_size(p));
free(p);
} 
```

它产生的输出是这样的：

```
allocated 492 bytes to p
p[-2] : 513
malloc_useable_size(p): 504 
```

请注意， p[-2] 中的大小不完全正确`492`- 由于内务管理和边界对齐等原因，有一些额外的空间被用完。

另请注意 - 这适用于`gcc`编译器；但`g++`抱怨指针转换，而且我没有声明`malloc_useable_size()`. 看到@fanl 的回答后，我出于好奇添加了该行。`mallinfo`在看到@OliCharlesworth 的答案后，我也玩了一下输出。

您可以更改 n 的值，您会发现事情非常吻合 - 例如，如果您将 n（在我上面的代码中）从 100 步进到 119，则感兴趣的不同变量的值如下：

```
 n | p[-2] | usable | uordblks
----+-------+--------+---------
100    417     408       416
101    417     408       416
102    417     408       416
103    433     424       432
104    433     424       432
105    433     424       432
106    433     424       432
107    449     440       448
108    449     440       448
109    449     440       448 
110    449     440       448
111    465     456       464   
112    465     456       464
113    465     456       464
114    465     456       464
115    481     472       480
116    481     472       480
117    481     472       480
118    481     472       480
119    497     488       496 
```

和之间总是有 9 的差，`usable`和`p[-2]`和`1`之间总是有 9 的差。该方法的优点是它可以准确地告诉您您**要求**的内容 -*此*指针的大小。其他电话实际上可能会告诉您您*真正想要*什么...`p[-2]``uordblks``p[-2]`

 ****PS很有可能对于非常大的内存块，您需要查看`long integer`位于`*((long int*)(p)-1)`. 这给了我一个很好的宏的灵感：

```
#define PSIZE(a) (*((long int*)(a)-1)) 
```

然后你可以找出任何指针的大小

```
printf("my pointer size is %ld\n", PSIZE(myPointer)); 
```

无需担心指针的类型。我确认这适用于不同类型的指针，以及大于 4G 的块。显然，您可以决定在宏中减去 1，以便该数字与 mallinfo() 完全一致。

[编辑：在这个较早问题](https://stackoverflow.com/questions/5813078/is-it-possible-to-find-the-memory-allocated-to-the-pointer-without-searching-fo)的答案之一中给出了对指针下方存储内容的更完整描述。这表明我观察到的“+1”实际上是由于存储在 LSB 中的标志。正确的方法是将结果与 ~3 相加，清除两个 LSB，然后从结果中减去 (long int*) 的大小（实际上原始答案减去 2*sizeof(unsigned long int) 但我认为那是错误的）：

```
#define PSIZE(a) ((*((long int*)(a)-1))&~3 - sizeof(long int*)) 
```

链接的答案强烈建议仅将其用于调试，而不是依赖于实际代码。我觉得不得不重复那个警告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T17:41:27.240

您需要在 malloc 中安装一个钩子来构建一个缓存请求块大小的指针表，然后当您释放时，在以前的 malloc 项目数据库中搜索指针。

这样，您将知道当前分配的堆总和要减少多少（如果这是您的目标），并且将有一个方便的地方列出仍在内存中的堆的所有“区域”。****

# php - PHP JSON 解码 Amazon SNS

> ID：15368095
> 
> 赞同：4
> 
> 时间：2013-03-12T17:31:26.693
> 
> 标签：php, json, amazon-sns

我在使用 PHP `json_decode`(5.3.10-1ubuntu3.5) 解码某些 Amazon SNS 通知时遇到问题，尽管使用 jsonlint.com 将 json 标记为有效，但我仍然无法弄清楚原因。有人可以指出我正确的方向吗？这里有两个例子：

```
{
  "Type" : "Notification",
  "MessageId" : "8q787fm3-f7fe-5sf4-863e-331bre627f24",
  "TopicArn" : "arn:aws:sns:us-east-1:1234567890:ses-bounces-topic",
  "Message" : "{\"notificationType\":\"Bounce\",\"bounce\":{\"reportingMTA\":\"dns; a193-136.smtp-out.amazonses.com\",\"bounceType\":\"Transient\",\"bouncedRecipients\":[{\"emailAddress\":\"email@example.com\",\"status\":\"5.0.0\",\"diagnosticCode\":\"smtp; 5.3.0 - Other mail system problem 571-'5.7.1 Message contains spam or virus or sender is blocked : 17624:1603463706|734463C' (delivery attempts: 0)\",\"action\":\"failed\"}],\"bounceSubType\":\"General\",\"timestamp\":\"2013-03-11T22:15:21.000Z\",\"feedbackId\":\"0000013d5b854265-18f16a12-8a99-11e2-aa8d-81a75f1af476-000000\"},\"mail\":{\"timestamp\":\"2013-03-11T22:14:51.000Z\",\"source\":\"otheremail@example.com\",\"messageId\":\"0000013d5b853e2a-820173e1-095e-4h91-9c91-03876f970534-000000\",\"destination\":[\"email@example.com\"]}}",
  "Timestamp" : "2013-03-11T22:14:52.935Z",
  "SignatureVersion" : "1",
  "Signature" : "bY5gjFMgrVnK+4Qw867qHR0cLDXlgZmYb6EdiDAd4hNHMDab4J5MdldldEQwkSFslkdkDsdowlsKAdQvZ9HZwSmEcTRpwgg3Fpp5R/efVnTdUVfJkmBcnhijhWHpxSdEqN9m5vgPhg=",
  "SigningCertURL" : "https://sns.us-east-1.amazonaws.com/SimpleNotificationService-f3ecfb7224c72n3fe7bp5KDMMX6de32f.pem",
  "UnsubscribeURL" : "https://sns.us-east-1.amazonaws.com/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:us-east-1:1234567890:ses-bounces-topic:73m9983aa-0f4b-4r87-a5d7-d43pb99c91af"
} 
```

和

```
{
  "Type" : "Notification",
  "MessageId" : "3c91t096-h331-5dm1-9u22-8822c3cdb7e8",
  "TopicArn" : "arn:aws:sns:us-east-1:1234567890:ses-bounces-topic",
  "Message" : "{\"notificationType\":\"Bounce\",\"bounce\":{\"reportingMTA\":\"dsn; aws-ses-mta-svc-iad-1d-i-ccb81arf.us-east-1.amazon.com\",\"bounceType\":\"Permanent\",\"bouncedRecipients\":[{\"emailAddress\":\"email@example.com\",\"status\":\"5.1.1\",\"diagnosticCode\":\"smtp; 550-5.1.1 The email account that you tried to reach does not exist. Please try\\\\n550-5.1.1 double-checking the recipient's email address for typos or\\\\n550-5.1.1 unnecessary spaces. Learn more at\\\\n550 5.1.1 http://support.google.com/mail/bin/answer.py?answer=6596 ht9si5931660qab.18 - gsmtp\",\"action\":\"failed\"}],\"bounceSubType\":\"General\",\"timestamp\":\"2013-03-08T16:15:40.000Z\",\"feedbackId\":\"0000015m4ac15133-4b74a3sf-890b-11e2-bf3f-53yadf2149d9-000000\"},\"mail\":{\"timestamp\":\"2013-03-08T16:15:39.000Z\",\"source\":\"otheremail@example.com\",\"messageId\":\"0000017d44c94bnf-a333d68b-8bed-4a2b-bdbf-4156zb5cdd9f-000000\",\"destination\":[\"example@sample.com\"]}}",
  "Timestamp" : "2013-03-08T16:15:40.472Z",
  "SignatureVersion" : "1",
  "Signature" : "pYxerRQVHo0kgbLh4a/nri8Rveqdlb/CbPuXEkdCaBt7ulJ5G5gU6TYaUM94iFnCTBC9+5dLZRvydIsemFCiUQUArsh30tcgzBbb2rb7cuZoi09T4bYByN9FY=",
  "SigningCertURL" : "https://sns.us-east-1.amazonaws.com/SimpleNotificationService-f3mcfb7224c7235fe7bb5f79f96dd52p.pem",
  "UnsubscribeURL" : "https://sns.us-east-1.amazonaws.com/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:us-east-1:1234567890:ses-bounces-topic:7p37c3za-0h4b-4j87-a5i7-d42cb90c9maf"
} 
```

我看到 jsonlint.com 说它是有效的 JSON 我只是不明白为什么当我将 RAW 帖子的内容传递给`json_decode`它时返回 null。对于我正在使用的第一级 JSON：

```
$result = json_decode($HTTP_RAW_POST_DATA);
if (!empty($result)) { } 
```

我应该添加我肯定有的每个 E_ERROR 的问题，`json_decode`因为某些/大部分通知都已正确解析。我只是得到一个由于某种原因没有的子集。

更新：已经有一段时间了，所以我的头不再在这段代码中，而是回答哈桑的问题。这是工作代码和我对此的评论。

```
// json_decode does not like single quotes in the response so strip them here
$notification = str_replace("'", '', $HTTP_RAW_POST_DATA);
$result = json_decode($notification); 
```

希望这可以帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-10-03T22:28:41.003

这是一个非常古老的问题，但我在解码从 Amazon SNS 收到的 JSON 时遇到了同样的问题。json_decode () 不工作并且 json_last_error () 返回 JSON_ERROR_SYNTAX。

在尝试使用字符串替换（但失败）后，我决定在 Amazon SES 中禁用“包含原始标头”（它将退回通知发送到 Amazon SNS）。突然间一切正常。

[![在 AWS SES 中设置](../Images/960473fd0608edf1f3b8f41b948b24ca.png)](https://i.stack.imgur.com/kPH7r.png)

为了完整起见，我解码字符串的 PHP 代码如下：

```
$decoded = json_decode (trim ($jsonFromAWS), true);
if (is_array ($decoded) && isset ($decoded['Message']) && !is_array ($decoded['Message']) && $decoded['Message'] !== '')
{
    $decoded['Message'] = json_decode (trim ($decoded['Message']), true);
} 
```

希望能帮助其他遇到这个问题的人！

# jquery - JQuery 设置选择为选中 - 不更新

> ID：15368096
> 
> 赞同：6
> 
> 时间：2013-03-12T17:31:33.153
> 
> 标签：jquery, forms

我以前做过一百次，但在这一次我无法让它工作。

我有一个表格。您从客户端下拉列表中进行选择，它会更新表单中的其余字段。

简单。

我使用 ajax 调用并将表单数据作为 json 对象返回，然后使用以下 jquery 更新屏幕上的表单。设置字段以便`name`匹配输出定义（如下所示`k`）。

```
 $.each(out, function(k,v){
        if($('form input[name="'+k+'"]').attr('type') == 'text'){
            $('form input[name="'+k+'"]').val(v);
        }else if($('form input[name="'+k+'"]').attr('type') == 'hidden'){
            $('form input[name="'+k+'"]').val(v);
            $('form .'+k).text(v);
        }else if($('form input[name="'+k+'"]').attr('type') == 'checkbox'){
            if(v == '1') {
                $('form input[name="'+k+'"]').attr('checked', true);
            }else{
                $('form input[name="'+k+'"]').attr('checked', false);
            }
        }else
        $('form select[name="'+k+'"] option[value="'+v+'"]').attr('selected', true);

        $('form input[name="old_client_name"]').val(out.client_name);
    }); 
```

当我使用检查元素时，我实际上可以在一个选择字段中看到正确的选项已被赋予`selected="selected"`值，但用户的视图没有更新选择框以反映这一点，因此用户无法将其视为已选中，并且在处理表单时，它的行为就像尚未设置值一样。

我正在使用 jq 1.9.1，但最近才在这个特定项目上升级到这个。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T17:33:47.850

尝试：

```
 $('form select[name="'+k+'"] option[value="'+v+'"]').attr('selected', 'selected'); 
```

或者：

```
 $('form select[name="'+k+'"] option[value="'+v+'"]').prop('selected', 'selected'); 
```

为清楚起见，您应该始终设置 selected="selected"，而不仅仅是 true。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-04-14T03:55:25.800

如果您正在使用某些插件，请参阅特定文档。例子：

对于 select2，使用：

```
$('#myselect').trigger('change'); 
```

对于选择菜单，使用：

```
$('#myselect').selectmenu('refresh', true); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T17:35:50.580

代替

```
.attr('selected', true); 
```

为了

```
.prop('selected', true); 
```

这是 jquery 1.6.x+ 中的新功能

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T17:53:29.293

为了完整起见，您也可以这样检查：

```
$('form input[name="'+k+'"]:selected').length == 1 
```

# wordpress - Wordpress 显示同月同一类别的帖子

> ID：15368101
> 
> 赞同：0
> 
> 时间：2013-03-12T17:31:48.757
> 
> 标签：wordpress, categories

我需要在单个模板中显示类似的内容，如果帖子属于杂志类别，则仅显示该类别中同一个月发布的所有帖子。我尝试了以下方法：

```
 <?php
    $current_year = get_the_date('j',$the_post->post_parent);
    $current_month = get_the_date('F',$the_post->post_parent);
    query_posts($query_string . '&cat=1700&order=DESC&year=$current_year&monthnum=$current_month');
    ?>

    <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
    <li> <a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></li>
    <?php endwhile; endif; ?>

<?php wp_reset_query(); ?> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:48:32.880

首先不要使用`query_posts`它没有问题和 IMO 乏善可陈;) 更多关于[**这里**](https://wordpress.stackexchange.com/questions/1753/when-should-you-use-wp-query-vs-query-posts-vs-get-posts)。

尝试这个：

```
$today = getdate();
$args = array('monthnum' => $today["mon"], 'cat' => 1700, 'order' => 'DESC', 'year' => $today["year"]);
$the_query = new WP_Query( $args );

while ( $the_query->have_posts() ) :
$the_query->the_post();
echo '<li><a href="'.get_the_permalink().'">' . get_the_title() . '</a></li>';
endwhile;

wp_reset_postdata(); 
```

# java - 如何在 Netbeans 中运行黄瓜功能文件

> ID：15368106
> 
> 赞同：3
> 
> 时间：2013-03-12T17:31:57.110
> 
> 标签：java, netbeans, junit, cucumber

我正在使用 Netbeans 并想运行一个功能黄瓜文件。我已经创建了运行器，但没有选项可以作为 JUnit 测试运行。我正在使用 Netbeans 7.3 和 cucumber cetriolo - Netbeans 插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:47:03.447

`.feature`通过使用插件（而不是手动）设置文件来解决：

1.  右键单击项目并创建一个新的空`.features`文件
2.  然后在文件选项卡（不是项目选项卡）中，将所有其他 2 个文件与功能文件放在一起`~/src/test`

# c# - 如何确定我的域计算机上是否安装了特定应用程序

> ID：15368108
> 
> 赞同：0
> 
> 时间：2013-03-12T17:32:04.653
> 
> 标签：c#, installation

如何使用 C# 确定特定应用程序是否安装在我的域计算机上？

忘了提。我拥有域的管理员权限

我无法回答人们的问题......所以我一直在编辑我的帖子。.. 该应用程序在控制面板的添加/删除下注册

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:02:42.557

由于您的应用程序实际上存储在您的控制面板中，这意味着它正在生成一个注册表项。因为它为`msiexec`实用程序生成了一个密钥。您的申请信息将在这里：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall 
```

这意味着，您的注册表将包含以下类别的信息：

*   显示名称
*   卸载字符串
*   出版商

它包括更多，除了这三个将是最可行的。

*   显示名称：应包含您的产品名称。
*   UninstallString：这将包含您的产品 G​​UID
*   Publisher：是公司名称。

因此，您实际上可以实现一些基本的远程处理，让服务器强制用户运行`.bat`将运行您的应用程序的服务器，等等。

但是其中一个关键值是您可以在注册表中执行一个简单的循环来确定它是否已安装。

这是一个[教程](http://www.csharphelp.com/2007/01/registry-ins-and-outs-using-c/)。

为了迭代，您需要执行以下操作：

```
// Registry 'MSIEXEC Guid'
public void RegistryFix()
{            
    // Create a Registry Instance.
    RegistryKey rKey = Registry.LocalMachine.OpenSubKey(@"\\SOFTWARE\\Microsoft
        \\Windows\\CurrentVersion\\Uninstall", true);

    // Loop Our Instance:
    foreach( string sub in rKey.GetSubKeyNames() )
    {

         #region Error Handling for 'Registry MSIEXEC'

         try
         {
             // Locate Boulevard Instance
             RegistryKey blvd = rKey.OpenSubKey(@"\\SOFTWARE\\Microsoft
                 \\Windows\\CurrentVersion\\Uninstall\\" + sub);

              // Specify Boulevard Display Name String
              string blvdDisplay = blvd.GetValue("DisplayName").ToString();

              // Search For:
              if (blvdDisplay.Contains("Boulevard"))
              {

                    // Now Obtain Uninstall String.
                    string blvdUninstall =   blvd.GetValue("UninstallString").ToString().Replace(@"/u", @"/f");

                     // Execute
                     Process u = Process.Start(blvdUninstall);
                     u.WaitForExit();

               }
           }
           #endregion

         // Unhandled / Null Error
         catch
        {                    
               // Write Exception:
               Console.WriteLine("Null Value Detected");
               throw new Exception("Invalid or Null Registry Value Detected.");
        } 
   }                         
} 
```

所以上面的例子正在运行一个递归循环并搜索这些子键，`msiexec`以便它可以启动修复。所以我没有发布所有代码来实际执行此操作，但重点是向您展示如何搜索这些注册表项，以便您可以选择最适合您需求的内容。

现在它被设计为在本地运行，因此您可能必须创建一个可执行文件然后创建一个`logon.bat`，这样一旦用户登录它就会检查它是否已安装并运行您的应用程序。

您可以使用 Remoting，为了远程运行应用程序有很多变体。你必须找到最适合你的。希望这对您有所帮助。

为了稍微解释一下上面的代码片段，在我的实现中，一台本地机器将启动应用程序。它通过一个诊断阶段来尝试修复遇到的常见错误。计算大量应用程序的最简单方法是将我们的应用程序链接到存储所有产品指南的数据库。

所以你的要求是非常非常可能的。这应该可以解决问题并指出您需要去哪里实际实施它。

# ruby-on-rails - Rails - 保存多个参数的最有效方法？

> ID：15368109
> 
> 赞同：0
> 
> 时间：2013-03-12T17:32:05.660
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

有没有更有效的方法来编写这个控制器代码？这会处理一个传递名称和描述字段的表单，然后将其保存在我的模型中。我想知道是否有一种方法可以一次传递所有参数，而不是指定每个参数，只要它们与我的模型中的列匹配。谢谢你的帮助！

控制器：

```
def new
   @new_company = Company.new
   @new_company.name = params[:name]
   @new_company.description = params[:description]
   @new_company.save
end 
```

看法：

```
<form action="/checklist/new" method="post">

  <label>Company Name</label>
  <input type="text" name="name"/>

  <label>Company Description</label>
  <input type="text" name="description"/>

  <button type="submit">Submit</button>

</form> 
```

模型：

```
class Company < ActiveRecord::Base
  attr_accessible :description, :name
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:34:07.413

你应该把它写在你的 CREATE 动作中，而不是在 NEW

```
def create
   @company = Company.new(params[:company])
   @company.save
end 
```

新的应该是这样的：

```
 def new
      @company = Company.new    
   end 
```

此外，不要为表单编写 html，而是使用 Rails 方式：

```
<%= form_for(@company) do |f| %>

  <%= f.label :name , "Company Name" %>
  <%= f.text_field :name %>

  <%= f.label :description, "Company Description"%>
  <%= f.text_field :description %>

  <%= f.submit "Submit"%>
<% end %> 
```

为了更好地理解一切，我建议您阅读这本书： [http](http://ruby.railstutorial.org/) ://ruby.railstutorial.org/ 或这个简短的教程： [http ://railsforzombies.org/levels/1](http://railsforzombies.org/levels/1)

# matlab - 如何改进减少图像中的“扫描线”噪声？

> ID：15368115
> 
> 赞同：0
> 
> 时间：2013-03-12T17:32:31.177
> 
> 标签：matlab, image-processing

我有一张带有扫描线噪音的图像。噪声可能是用一些正弦函数模拟的。我想去除噪音，所以我所做的就是用 变换图像`fft2`，挑选出光谱中峰值的坐标。结果证明峰具有共轭对。

因此，我获取了它们的坐标（共轭对），在频域中将其周围像素设置为零，然后执行 a`ifft2`以取回图像。我几乎试图对峰值频率进行带阻。使用这种方法可以大大降低扫描线噪声。

但我想，我还能如何改进这种方法以获得更好的结果？

# java - Apache Commons BeanUtilsBean - 从 describe() 中排除属性

> ID：15368116
> 
> 赞同：4
> 
> 时间：2013-03-12T17:32:35.520
> 
> 标签：java, apache-commons-beanutils

我正在使用`BeanutilsBean.describe()`方法来获取审计跟踪的数据。它工作得很好 - 这不是问题！

但是，有些属性不需要审核。这些被记录为列表中的字符串。因此，例如，如果您有一个属性`DomainObject.myValue`，该列表将包含`"myValue"`，以便调用的结果`DomainObject.getMyValue()`不包含在审计跟踪中。

目前，代码从中获取所有属性`BeanutilsBean.describe()`，然后遍历它们以丢弃不需要的属性。

我想要做的是使用`BeanUtilsBean`要排除的属性名称列表配置实例，以便它永远不会调用这些方法。因此，在我的示例中，根本不会调用 DomainObject.getMyValue()。

通过查看 API 或代码，我无法确定这是否可能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T11:19:12.290

这是我用来解决这个问题的代码。

这是一个稍微修改的副本，`BeanUtilsBean.describe()`它不调用排除的属性获取器；[这是ach 的回答](https://stackoverflow.com/questions/15368116/apache-commons-beanutilsbean-exclude-attributes-from-describe#answer-15372131)中的“滚动你自己的”选项（第一个选项已经在实时代码中使用了几年，但它从来都不是我的正确选择！）。

```
import java.beans.PropertyDescriptor;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.util.HashMap;
import java.util.Map;
import java.util.Set;

import org.apache.commons.beanutils.BeanUtilsBean;
import org.apache.commons.beanutils.DynaBean;
import org.apache.commons.beanutils.DynaProperty;
import org.apache.commons.beanutils.MethodUtils;

public class BeanUtilsBeanExtensions {

    private static final BeanUtilsBean BEAN_UTILS_BEAN = BeanUtilsBean
                    .getInstance();

    public BeanUtilsBeanExtensions() {
    }

    /**
     * Extends BeanUtilsBean.describe() so that it can be given a list of
     * attributes to exclude. This avoids calling methods which might derive
     * data which don't happen to be populated when the describe() call is made
     * (and therefore could throw exceptions) as well as being more efficient
     * than describing everything then discarding attributes which aren't
     * required.
     *
     * @param bean
     *            See BeanUtilsBean.describe()
     * @param excludedAttributeNames
     *            the attribute names which should not be described.
     * @return See BeanUtilsBean.describe()
     */
    public Map<String, String> describe(Object bean,
                    Set<String> excludedAttributeNames)
                    throws IllegalAccessException,
                    InvocationTargetException, NoSuchMethodException {

        // This method is mostly just a copy/paste from BeanUtilsBean.describe()
        // The only changes are:
        // - Removal of reference to the (private) logger
        // - Addition of Reference to a BeanUtilsBean instance
        // - Addition of calls to excludedAttributeNames.contains(name)
        // - Use of generics on the Collections
        // - Calling of a copy of PropertyUtilsBean.getReadMethod()

        if (bean == null) {
            return (new java.util.HashMap<String, String>());
        }

        Map<String, String> description = new HashMap<String, String>();
        if (bean instanceof DynaBean) {
            DynaProperty[] descriptors = ((DynaBean) bean).getDynaClass()
                            .getDynaProperties();
            for (int i = 0; i < descriptors.length; i++) {
                String name = descriptors[i].getName();
                if (!excludedAttributeNames.contains(name)) {
                    description.put(name,
                                    BEAN_UTILS_BEAN.getProperty(bean, name));
                }
            }
        }
        else {
            PropertyDescriptor[] descriptors = BEAN_UTILS_BEAN
                            .getPropertyUtils().getPropertyDescriptors(bean);
            Class<? extends Object> clazz = bean.getClass();
            for (int i = 0; i < descriptors.length; i++) {
                String name = descriptors[i].getName();
                if (!excludedAttributeNames.contains(name)
                                && getReadMethod(clazz, descriptors[i]) != null) {
                    description.put(name,
                                    BEAN_UTILS_BEAN.getProperty(bean, name));
                }
            }
        }
        return description;
    }

    /*
     * Copy of PropertyUtilsBean.getReadMethod() since that is package-private.
     */
    private Method getReadMethod(Class<? extends Object> clazz,
                    PropertyDescriptor descriptor) {
        return MethodUtils.getAccessibleMethod(clazz,
                        descriptor.getReadMethod());
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:07:16.660

不，您正在做的过滤是最简单的方法。该方法的来源没有提供任何类型的可配置过滤。使用时我只能看到两个选项`BeanUtilsBean`：

*   调用`describe()`然后过滤结果（你现在在做什么）。您可以将其包装在带有签名的静态方法中`public static Map<String, String> describeBean(Object bean, String... excludedProperties)`
*   滚动您自己的实用程序方法（如上面的签名），该方法复制实现`describe()`但在初始迭代期间进行过滤。这会更高效，因为它不需要额外通过`Map`.

# android - 如何使用特定的 request_code 取消特定的 pendingIntent？

> ID：15368117
> 
> 赞同：2
> 
> 时间：2013-03-12T17:32:37.540
> 
> 标签：android, alarmmanager, android-pendingintent

我想制作一个可以添加、查看和取消警报的应用程序。我为此设计了一个数据库。查看和创建新警报完美无缺。

但问题是取消警报。所有警报均由相同设置`pendingIntent`不同`request_code`。`request_code`取自数据库条目（即 ID 字段）。如果我使用该`cancel(pendingIntent)`方法，它将取消所有警报。但我只想用特定的`request_code`. 这是我创建警报代码：

```
Calendar cal = Calendar.getInstance();
cal.set(Calendar.HOUR_OF_DAY, hour);
cal.set(Calendar.MINUTE, minute);
cal.set(Calendar.SECOND, 0);
Intent intent = new Intent(this, d1_on.class);
PendingIntent pendingIntent = PendingIntent.getActivity(this, user_id, intent, PendingIntent.FLAG_UPDATE_CURRENT);
AlarmManager am = (AlarmManager)getSystemService(Activity.ALARM_SERVICE);
am.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), AlarmManager.INTERVAL_DAY, pendingIntent); 
```

现在，当我单击 CANCEL 按钮时，它会要求`user_id`. 然后它将从数据库中删除该行。没关系...但现在我想通过`request_code`设置为 user_id 来停止该特定警报。

或者请向我解释如何通过课堂取消`pendingIntent`在课堂上创建的。`alarmActivity``alarmReceiver`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:55:54.367

重新创建`pendingIntent`就像您最初创建它一样

```
PendingIntent pendingIntent = PendingIntent.getActivity(this, user_id, intent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

然后你可以取消它

```
am.cancel(pendingIntent); 
```

# sql - SQL - 加入同一张表

> ID：15368122
> 
> 赞同：1
> 
> 时间：2013-03-12T17:33:12.020
> 
> 标签：sql, sql-server, join

假设我有一个表***应用程序***如下

```
ApplicationId INT,
CustomerId INT,
ApplicationDate DATETIME,
IsNewCustomer BOOL 
```

我想检索给定日期的应用程序列表以及**IsNewCustomer**标志（如果给定的 CustomerId 没有应用程序，则设置该标志。

目前我在同一张表上使用如下连接

```
select 
    o.ApplicationId as ApplicationId,
    cast(o.ApplicationDate as date) as ApplicationDate,
    case when n.ApplicationID is not null then 1 else 0 end as IsNewCustomer,
    row_number() over (partition by o.ApplicationId order by o.ApplicationDate desc) as AppSeqNum
from 
    Applications o 
    left join Applications n 
        on n.CustomerId = o.CustomerId
        and n.ApplicationDate < o.ApplicationDate
where
    AppSeqNum = 1
    and ApplicationDate = getdate() 
```

我想知道是否有更好的方法来实现相同的目标，而不必加入同一张桌子，因为它“感觉”不是最优雅的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:47:20.703

好吧，您可能会使用子查询，但这只会掩盖您的自联接。自联接本质上没有任何问题，如果您没有正确的索引和约束并且表大小有限，它们可能会失控。您可能听说自联接不好的原因之一是在其他连续单调序列中寻找中断的问题。假设您有一千个值，其中缺少 5 个，并且您在 value = value +1 上进行了自联接（没有索引或约束），那么查询优化器很可能会在尝试找到 5 之前确定有 1000*1000 个可能的行空匹配。因此，如果您的结果集相当有限，那么没问题。

# c# - 在 DockPanel 中排列列的宽度

> ID：15368127
> 
> 赞同：0
> 
> 时间：2013-03-12T17:33:31.517
> 
> 标签：c#, wpf, xaml, dockpanel

我有一个弹出窗口，列出了系统中的所有警告。

该列表是这样构建的：

```
<ScrollViewer>
    <ItemsControl>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <DockPanel>
                    <Image />
                    <TextBlock />
                    <TextBlock />
                </DockPanel>
            <DataTemplate>
        <...> 
```

图像被硬编码为宽度为 16。

最后一个 TextBlock 设置为占用所有剩余空间，并在我的 DockPanel 中设置了此属性：

```
LastChildFill="True" 
```

如何设置我的中间 TextBlock 只占用他需要的空间？

像 Width="Auto" 吗？

如果可能的话，我需要保留 DockPanel 的结构

谢谢！

![例子](../Images/1aca9b8fe51403ee874193b40351f875.png)

# ruby-on-rails - elasticsearch在一段时间后停止索引新文档，使用Tire

> ID：15368128
> 
> 赞同：0
> 
> 时间：2013-03-12T17:33:32.470
> 
> 标签：ruby-on-rails, ruby-on-rails-3, elasticsearch, tire, rake-task

我的网站正在运行，使用 ElasticSearch，使用轮胎。

在后台，我有一个 rake 任务，它遍历数千个对象并为每个对象创建一个记录。

起初，记录被索引，每次我刷新我的网站，我都可以看到找到的记录数在增加。但在某些时候，它就停止了。它将记录保存到 mysql，但不再索引它们。请注意，该站点和搜索仍在运行中。

这是为什么？是否有某种锁或...？

* * *

编辑：这是我看到的错误`elasticsearch.log`

> [2013-03-16 08:49:34,344][WARN][netty.channel.socket.nio.AbstractNioSelector] 无法接受连接。java.io.IOException：打开的文件太多

* * *

> [Thakos] [maps][2] 无法读取刷新 java.io.FileNotFoundException 的最新段信息：/usr/local/share/elasticsearch/data/elasticsearch/nodes/0/indices/maps/2/index/segments_3（打开的文件太多）

所以我想这是需要的，我需要看看如何处理这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:57:13.090

我基本上错过了“安装指南”的一个重要部分：[http ://www.elasticsearch.org/guide/reference/setup/installation.html](http://www.elasticsearch.org/guide/reference/setup/installation.html)

我只允许运行 elasticsearch 的用户使用 1024 个打开的文件描述符，我需要大约 32k（最大设置为 64k）。

有了这些设置，一切都运行良好。

# ruby-on-rails - 从子域读取顶级域cookie，如何？

> ID：15368134
> 
> 赞同：0
> 
> 时间：2013-03-12T17:33:47.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3

`domain-name.com` 我的 vbulletin 论坛在我有 rails 应用程序的顶级域上设置了一些 cookie `beta.domain-name.com`。是否可以在我的应用程序中读取这些顶级 cookie？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:49:30.040

**是**的，这是可能的。

您需要将域属性指定为`:domain => .domain-name.com`

例如：

```
cookies[:your_cookie] = {:value => 'something', :domain => '.domain-name.com'} 
```

现在，可以在`*.domain-name.com`和中访问 c​​ookie `domain-name.com`。

# mysql - 从两个表中拉取 SQL 数据

> ID：15368148
> 
> 赞同：1
> 
> 时间：2013-03-12T17:34:12.643
> 
> 标签：mysql, sql, join

我有一张名为`db.data`and的表`db.info`。该`db.data`表的每个条目都有一个`name`和`dateadded`列。该`info`表对每个名称都有一个`name`和一个`status`列（状态是**y**或**n**）。**我想从 db.data 表中提取按日期添加到该数据库的所有名称的数据，但前提是状态（db.status 中的那个）为 n。**

我一直在四处寻找`JOIN`，但这似乎只有在两个表中的数据相同时才有效。在这里，名称是相同的，但我希望从 db.data 中提取数据，但仅将“名称”单元格（在两个表中）的状态设置为“n”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:38:46.633

据我了解，每`name`列*中*的数据对于两个表都是相同的。所以 a`JOIN`应该在这里工作：

```
SELECT db.data.*
FROM db.data
INNER JOIN db.info ON db.data.name = db.info.name
WHERE db.info.status = 'n' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:40:15.933

您可以在两个表之间使用名称连接

```
SELECT d.name, d.date
FROM db.data d
    JOIN db.info i ON d.name = i.name
WHERE i.status = 'N'
ORDER BY d.date 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T17:42:33.497

我认为这就是你想要的：

```
select d.name, d.dateadded
  FROM db.info i, db.data d 
  WHERE i.name = d.name
    AND i.status = 'n'; 
```

# python - 拆分列表中的元组项

> ID：15368149
> 
> 赞同：2
> 
> 时间：2013-03-12T17:34:16.907
> 
> 标签：python, python-2.7, split, tuples

如何拆分第二个元组

```
data = [('152', 'Farko', 'Kier'), ('153', 'Park - Pub')] 
```

得到这个输出：

```
[('152', 'Farko', 'Kier'), ('153', 'Park',  'Pub')] 
```

我试过这样：

```
lst = []
for i in data:
    if len(i) == 2:
        i[1] = tuple(i[1].split(' - '))
    lst.append(i) 
```

它会起作用，除了它引发了一个异常`TypeError: 'tuple' object does not support item assignment`。但我不能分配`i = tuple(i[1].split(' - '))`，因为我需要保留`i[0]`元组中的数字。列表理解解决方案将非常受欢迎。建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:40:10.083

您可以使用列表理解：

```
lst = [t[:1] + tuple(t[1].split(' - ')) if len(t) == 2 else t for t in data] 
```

或者你可以调整你的循环来创建一个新的元组：

```
for i in data:
    if len(i) == 2:
        i = i[:1] + tuple(i[1].split(' - '))
    lst.append(i) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T17:40:56.773

```
newdata = [tuple(s for t in tu for s in t.split(' - ')) for tu in data]
# [('152', 'Farko', 'Kier'), ('153', 'Park', 'Pub')] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T17:40:59.393

如您所见，您无法修改元组，但是您可以使用所需的数据创建一个新的：

```
data = [('152', 'Farko', 'Kier'), ('153', 'Park - Pub')]
lst = []
for i in data:
    if len(i) == 2:
        i = i[:1] + tuple(i[1].split(' - '))
    lst.append(i) 
```

或者，如果您想修改原始列表：

```
for i, tup in enumerate(data):
    if len(tup) == 2:
        data[i] = tup[:1] + tuple(tup[1].split(' - ')) 
```

# c# - 服务直推或业务逻辑处理

> ID：15368150
> 
> 赞同：0
> 
> 时间：2013-03-12T17:34:19.793
> 
> 标签：c#, service

**更新：**

本质上，而不是让服务器 A 的服务直接写入数据库或数据表。`Properties`让服务将值分配给业务逻辑中的一系列。这样所有的计算和数据访问都将直接在服务器 B 上完成。

可能还不清楚，服务器 A 是使用服务的客户端。

* * *

所以我有一个独特的困惑，那就是处理这个特定问题的标准方法。我目前面临使用*Service*或*Inner Logic*的选项。场景：

*   两台服务器
*   服务器 A：向服务器 B 推送请求。
*   服务器 B：接受这些请求和变量并实现业务逻辑。
*   服务器 B：无论如何都会创建关系数据访问，因此它的工作量会增加一倍。

困境是我不确定处理这个问题的*标准*或*最佳*方法。我的意思是，将*Server A Datamap*直接连接到数据库会更好吗？还是让*服务器 A 存储到属性*然后让内部逻辑处理它更可行？

我问的原因显然是解决方案一会导致快速发展，但将来会遇到问题或只是性能不佳。

如：

*   服务器 B：将持续填充*数据表*
*   服务器 B：此时所有的持久性都来自它自己从数据库中检索数据。
*   随着项目的发展，可能会使其难以重构。

这些是我最初的担忧，所以我倾向于选择二。但正如我所说，我不确定我的心态是否遵循规范或标准。

为避免这被视为辩论；

> **随着复杂性的增加，选项一的缺点是否会影响任何项目的流动性？选项二的实现是否更可行，因为我可以实现更好的直接访问数据访问层的通用性？**

感谢您的帮助，希望我清楚地表达了自己在哪里有意义。如果不是，请发表评论，以便我进行相应的编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:49:52.090

在一定程度上“取决于”。从特定功能的角度来看，任何工作都是正确的。

许多人有许多可能会限制或指导特定实现的非功能性或设计要求。例如，如果您的设计应该是面向服务 (SOA) 的，那么每个服务器都应该是自治的。这意味着他们*不应该*共享一个数据库（他们甚至不应该共享一个模式）。在这种情况下，面向消息通常是一个很好的模式。您可能希望查看消费者/生产者模式和面向消息的中间件（如队列或服务总线）之类的东西。在这种情况下，服务器 A 会将消息（命令）推送到服务器 B，服务器 B 将处理它。您可以使用请求/回复模式将“回复”返回给服务器 A。或者，服务器 B 可能只是向 A 发送另一条消息（事件），告诉它它已经完成了工作。

# 更新：

服务器 B 使用的“数据”将完全从消息中的 B 发送给它。

# php - 插入 pdo 前的空表

> ID：15368151
> 
> 赞同：1
> 
> 时间：2013-03-12T17:34:19.863
> 
> 标签：php, mysql, pdo

我有一个从 rss 文件导入数据的脚本，我想在插入之前清空我的表，所以我的数据库中没有任何旧条目，但我无法正确使用语法，因为没有任何内容被删除。

这是我正在尝试的：

```
try {
    $db->beginTransaction();

    $stmt = $db->prepare("DELETE FROM $table");

    $stmt = $db->prepare("INSERT INTO $table(id,name) VALUES(:id,:name)ON DUPLICATE KEY UPDATE name=:name");
    $stmt->execute(array(':id' => $id, ':name' => $name));

    $db->commit();
} catch(PDOException $ex) {
    //Something went wrong rollback!
    $db->rollBack();
    echo $ex->getMessage();
} 
```

# 编辑

我曾尝试使用 Truncate，但认为我需要删除，因为 truncate 不会清空/删除任何内容：

```
try {
    $db->beginTransaction();

    $stmt = $db->prepare("TRUNCATE TABLE $table");

    $stmt = $db->prepare("INSERT INTO $table(id,name) VALUES(:id,:name)ON DUPLICATE KEY UPDATE name=:name");
    $stmt->execute(array(':id' => $id, ':name' => $name));

    $db->commit();
} catch(PDOException $ex) {
    //Something went wrong rollback!
    $db->rollBack();
    echo $ex->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T17:35:51.950

是`TRUNCATE TABLE `tableName``，不是`DELETE FROM tableName`。

这是**[有关该主题的手册页。](http://dev.mysql.com/doc/refman/5.0/en/truncate-table.html)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-14T16:23:43.147

我今天尝试了同样的事情，经过广泛的测试后发现`TRUNCATE`实际上无法回滚，因此您可能需要考虑这一点。

一个简单的测试是，如果您向表中添加一条新记录，然后运行您的脚本。该记录应该被删除，但在我的例子中它仍然存在。

这是我的代码中的示例片段：

```
$dbh->beginTransaction();

try {

        $stmt = $dbh->prepare("DELETE FROM trade_customer");
        $stmt->execute();
        $stmt = $dbh->prepare("INSERT IGNORE trade_customer SELECT * FROM cp_imp_customer");
        $stmt->execute();

}

catch( PDOException $Exception ) {
    echo "FAILED - " . $Exception->getMessage( ) . "(" . (int)$Exception->getCode( ) . ") - " . date('Y-m-d H:i:s') . "\n";
    echo "Transaction ended, no changes were made to the live table" . date('Y-m-d H:i:s') . "\n";
    die;
}

// commit on success
$dbh->commit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:35:58.103

`TRUNCATE TABLE $table`将清空表格并重置自动编号。

# google-apps-script - 无法以编程方式删除定时触发器

> ID：15368152
> 
> 赞同：4
> 
> 时间：2013-03-12T17:34:23.607
> 
> 标签：google-apps-script

我有一个测试脚本，我正在尝试测试定时触发器。我需要能够以编程方式创建和删除触发器 - 根据文档，这是可能的。但是，当我需要它时，我的触发器不会删除：

```
function myFunction() {
  var db = ScriptDb.getMyDb();
  var user = Session.getActiveUser().getEmail();
  var triggerID = ScriptApp.newTrigger("timed").timeBased().everyMinutes(1).create().getUniqueId();

  var ob = {
    id: user,
    count: 1,
    trigger: triggerID
  }

  db.save(ob);
}

function timed(){
  var db = ScriptDb.getMyDb();
  var user = Session.getActiveUser().getEmail();
  var ob = db.query({id: user}).next();
  var count = ob.count;
  var triggerID = ob.trigger;

  if (count > 4){
    deleteTrigger(triggerID);
    db.remove(ob);

  } else {
    Logger.log(count + " " + Utilities.formatDate(new Date(), "GMT", "HH:mm:ss") + " TriggerID=" + triggerID);
    ob.count = count+1;
    db.save(ob);
  }
}

function deleteTrigger(triggerID){
  var allTriggers = ScriptApp.getProjectTriggers();

  for(var i=0; i < allTriggers.length; i++){
    if(allTriggers[i].getUniqueId() = triggerID){
      ScriptApp.deleteTrigger(allTriggers[i]);
      break;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T00:48:06.750

要测试是否相等，您只需要`==`而不是`=`在以下行中：

```
if (allTriggers[i].getUniqueId() = triggerID) { 
```

# asp.net - 某些页面上的 div 部分可见性 true/false asp.net

> ID：15368153
> 
> 赞同：1
> 
> 时间：2013-03-12T17:34:25.190
> 
> 标签：asp.net, html, visibility

我是 asp.net 的新手，我有一个问题。我需要让我的 div 部分仅在某些页面上可见。我放置了属性样式：（当然不是在开始时使用“）

```
<div ID="id1" class="grid-box width33 grid-h" style="visibility:visible" >
    <!-- Other code here //-->
</div> 
```

我需要在某种 if 语句后面编写代码，该语句将检查我的部分选择器是否选择了该 div 部分，如果它被选中，它将被打印在页面上，否则它将呈现其他内容。在我的 page_load 方法上，我有一个代码，例如：

```
if (this.CurrentContent.CentralSection.HasValue)
{
    this.ucCentralSection.CentralSectionId = this.CurrentContent.CentralSection.Value;
}
else
{
    this.ucCentralSection.Visible=false;
} 
```

但它不能正常工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:44:20.937

像这样使用

```
 <div ID="id1" class="grid-box width33 grid-h" style="visibility:visible" 
                  runat="server" >
   <!-- Other code here //-->
 </div> 
```

在你的cs页面中

```
 var div = (HtmlGenericControl)Page.FindControl("id1");
 div.Visibility=true; 
```

否则，您可以使用[Panel](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.panel.aspx)服务器控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:38:37.800

将 runat 属性添加到您的 div。在您的代码隐藏中使用[FindControl 方法](http://msdn.microsoft.com/en-us/library/486wc64h.aspx)来定位有问题的 div 并在那里切换[可见属性](http://msdn.microsoft.com/en-us/library/system.web.ui.control.visible%28v=vs.90%29.aspx)。

# python - 如何在python中启动mongodb守护进程

> ID：15368156
> 
> 赞同：3
> 
> 时间：2013-03-12T17:34:33.740
> 
> 标签：python, mongodb, subprocess

如何在 python 中启动 mongodb 守护进程？我有以下脚本

```
 import subprocess

    subprocess.Popen(['C:\\mongodb\\bin\\mongod', '----dbpath C:\\dropbox\\projects\\mongodb']) 
```

我得到这个错误：

**错误命令行：未知选项 --dbpath C:\dropbox\projects\mongodb**

mongo 数据库已在 C:\dropbox\projects\mongodb\ 中创建

我可以将 mongo 数据库移动到 c:\ 并且不指定“--dbpath”，它工作正常。我还可以使用指定的“--dbpath”从 Windows shell 运行 mongod，它运行良好。

出于某种原因，当我尝试从 python 运行它时，它不喜欢传递给它的“--dbpath”参数。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:37:31.470

分裂`'--dbpath C:\\dropbox\\projects\\mongodb'`，应该是`'--dbpath', 'C:\\dropbox\\projects\\mongodb'`。有两个独立的命令行参数，不是一个，它们是通过mongodb args 解析代码进行逻辑分组的。它应该是`--dbpath`，不是`----dbpath`，至少在 Linux 上是。

**UPD：**您的原始代码执行`mongod`如下：

```
C:\\mongodb\\bin\\mongod "----dbpath C:\\dropbox\\projects\\mongodb" 
```

# java - 架构 - 我应该将许多临时应用程序组合到一个应用程序中吗？

> ID：15368159
> 
> 赞同：2
> 
> 时间：2013-03-12T17:34:46.820
> 
> 标签：java, architecture

我的主要目标是提供一个用 jquery 编写的基于 solr 的搜索应用程序。（对于那些不熟悉 solr 的人，假设它是一个可以返回搜索结果的 rest api。）为此，我编写了许多小型应用程序和 servlet，每个应用程序都执行一项临时任务。例如：

1.  SearchApp - 一个 jquery 应用程序，最终用户可以在其中执行搜索。
2.  SolrProxy - 在 SearchApp 和 solr 之间扮演代理角色的 java servlet。它所做的一件事是记录用户请求以供以后分析。
3.  StatsApp - 一个执行用户活动分析并返回包含数据的 json 的 servlet。
4.  Indexer - 一个 java 应用程序，可以根据我的要求将数据索引到 solr。在这个过程中，它还获取一个 SQLServer DB，然后对 DB 执行一些更新命令。
5.  IndexerServlet - 一个异步 servlet，它使用 Indexer 提供通过 http 请求执行索引的能力。
6.  Nutch - 一个开源项目，将数据索引到 solr，以满足 Indexer(3) 中未完成的其他要求。
7.  (MAYBE) - 一些将执行预定 Nutch 运行的服务。

并且可能会添加更多组件。

拥有多个 java 项目，每个项目都执行一项任务，而不是拥有一个处理大部分组件的项目，这似乎有点错误。对此有何想法和见解？我应该将所有 Java 应用程序合并到一个项目中吗？我应该为此使用某种框架吗？还是我应该像现在这样生活？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:44:44.613

我认为拥有所有这些单独的应用程序并不是一个坏主意。他们似乎都在做一件事，而且做得很好。您*可以*做的是通过统一的界面公开它们。所以本质上你有一个外观，它位于所有这些不同的服务前面，呈现一个抽象和统一的接口。该服务的消费者将不知道该外观背后的内容。这也很好，因为现在您可以在不影响其他组件的情况下单独更新和替换单个组件。如果您将所有这些组合为一个，则每次修改其中一个组件时都必须推送一个新版本。

# android - 我想从我的主要活动后面的应用程序的 onCreate() 方法开始一个活动

> ID：15368162
> 
> 赞同：1
> 
> 时间：2013-03-12T17:34:53.797
> 
> 标签：android, android-activity

我想在我的主屏幕活动后面的安装程序应用程序中启动一个活动，我使用以下方法调用它：

```
public class MYAPP extends Application {

    public void onCreate() {
        Intent intent = new Intent();
        ComponentName cName = new ComponentName("com.example.installer",
                "com.example.installer.MainActivity");
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        intent.addFlags(Intent.FLAG_ACTIVITY_PREVIOUS_IS_TOP);
        intent.setComponent(cName);
        startActivity(intent);
    }
} 
```

但我把它`MainActivity`放在前台，我不想要那个。我想将我的应用程序主要活动保持在它之上。

我怎样才能做到这一点？

# r - 空白是否会减慢处理速度

> ID：15368168
> 
> 赞同：2
> 
> 时间：2013-03-12T17:35:15.587
> 
> 标签：r

我有大量数据要分析，我在编写代码时倾向于在单词或变量名之间留出空格，所以问题是，如果效率是第一要务，空白是否有成本？

c<-a+b 比 c <- a + b 更有效吗

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T17:43:27.563

对于第一，第二，第三，......，近似值，不，它根本不会花费你任何时间。

您花在按空格键上的额外时间比运行时的成本高出几个数量级（而且根本不重要）。

更大的成本将来自任何因遗漏空格而导致的可读性下降，这会使代码（对于人类）更难解析。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T17:46:00.370

一句话，不！

```
library(microbenchmark)

f1 <- function(x){
    j   <- rnorm( x , mean = 0 , sd = 1 )         ;
    k   <-      j    *      2         ;
    return(    k     )
}

f2 <- function(x){j<-rnorm(x,mean=0,sd=1);k<-j*2;return(k)}

microbenchmark( f1(1e3) , f2(1e3) , times= 1e3 )
    Unit: microseconds
     expr     min       lq  median      uq      max neval
 f1(1000) 110.763 112.8430 113.554 114.319  677.996  1000
 f2(1000) 110.386 112.6755 113.416 114.151 5717.811  1000

#Even more runs and longer sampling
microbenchmark( f1(1e4) , f2(1e4) , times= 1e4 )
  Unit: milliseconds
      expr      min       lq   median       uq       max neval
 f1(10000) 1.060010 1.074880 1.079174 1.083414 66.791782 10000
 f2(10000) 1.058773 1.074186 1.078485 1.082866  7.491616 10000 
```

# 编辑

使用 microbenchmark 似乎是不公平的，因为表达式在循环中运行之前就已被解析。但是，使用`source` *应该*意味着每次迭代都必须解析源代码并删除空格。所以我将函数保存到两个单独的文件中，文件的最后一行是函数的调用，例如我的文件 f2.R 如下所示：

```
f2 <- function(x){j<-rnorm(x,mean=0,sd=1);k<-j*2;return(k)};f2(1e3) 
```

我像这样测试它们：

```
microbenchmark( eval(source("~/Desktop/f2.R")) ,  eval(source("~/Desktop/f1.R")) , times = 1e3)
  Unit: microseconds
                           expr     min       lq   median      uq       max neval
 eval(source("~/Desktop/f2.R")) 649.786 658.6225 663.6485 671.772  7025.662  1000
 eval(source("~/Desktop/f1.R")) 687.023 697.2890 702.2315 710.111 19014.116  1000 
```

以及 1e4 复制的差异的视觉表示...... ![在此处输入图像描述](../Images/3de33e4827408ddfef6059729f4f2723.png)

也许它确实在重复解析函数的情况下产生了微小的差异，但在正常用例中不会发生这种情况。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-12T17:50:24.423

### 是的

## 但是，不，不是真的：

**TL;DR** 仅运行脚本以删除空格可能比通过删除空格节省的时间要长。

@Josh O'Brien 真的一针见血。但我无法抗拒基准

如您所见，如果您正在处理数量级为 1 亿条线，那么您将看到一个微小的阻碍。 **然而** ，有了这么多行，它们很有可能成为至少一个（如果不是数百个）热点，其中简单地改进其中一个中的代码会给您带来比`grep`消除所有空白更快的速度。

```
 library(microbenchmark)

  microbenchmark(LottaSpace = eval(LottaSpace), NoSpace = eval(NoSpace), NormalSpace = eval(NormalSpace), times=10e7)

  @ 100 times;  Unit: microseconds
           expr   min     lq median     uq    max
  1  LottaSpace 7.526 7.9185 8.1065 8.4655 54.850
  2 NormalSpace 7.504 7.9115 8.1465 8.5540 28.409
  3     NoSpace 7.544 7.8645 8.0565 8.3270 12.241

  @ 10,000 times;  Unit: microseconds    
           expr   min    lq median    uq      max
  1  LottaSpace 7.284 7.943  8.094 8.294 47888.24
  2 NormalSpace 7.182 7.925  8.078 8.276 46318.20
  3     NoSpace 7.246 7.921  8.073 8.271 48687.72 
```

在哪里：

```
 LottaSpace <- quote({
        a            <-            3
        b                  <-                  4   
        c         <-      5
        for   (i            in      1:7)
              i         +            i
  })

  NoSpace <- quote({
  a<-3
  b<-4
  c<-5
  for(i in 1:7)
  i+i
  })

  NormalSpace <- quote({
   a <- 3
   b <- 4 
   c <- 5
   for (i in 1:7)
   i + i
  }) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-12T17:51:22.073

这可能影响的唯一部分是将源代码解析为令牌。我无法想象解析时间的差异会很大。`compile`但是，您可以通过使用包的或`cmpfun`函数编译函数来消除此方面`compiler`。然后解析只进行一次，任何空格差异都不会影响执行时间。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T17:50:34.973

性能应该没有差异，尽管：

```
fn1<-function(a,b) c<-a+b
fn2<-function(a,b) c <- a + b

library(rbenchmark)

> benchmark(fn1(1,2),fn2(1,2),replications=10000000)
       test replications elapsed relative user.self sys.self user.child
1 fn1(1, 2)     10000000   53.87    1.212      53.4     0.37         NA
2 fn2(1, 2)     10000000   44.46    1.000      44.3     0.14         NA 
```

与`microbenchmark`：

```
Unit: nanoseconds
      expr min  lq median  uq      max neval
 fn1(1, 2)   0 467    467 468 90397803 1e+07
 fn2(1, 2)   0 467    467 468 85995868 1e+07 
```

所以第一个结果是假的..

# javascript - javascript下拉验证

> ID：15368172
> 
> 赞同：3
> 
> 时间：2013-03-12T17:35:38.333
> 
> 标签：javascript, validation

如果您没有选择任何内容并且无法使其正常工作，我需要提醒您。它需要显示哪里出了问题并通过窗口提醒。

```
<!DOCTYPE html>
<html>
<head>
<select id="ddlView">
<option value="0">Select</option>
<option value="1">test1</option>
<option value="2">test2</option>
<option value="3">test3</option>
</select>  
<input type="button" onclick="myFunction()" value="select" />

<script>
function Validate()
{
var e = document.getElementById("ddlView");
var strUser = e.options[e.selectedIndex].value;

var strUser1 = e.options[e.selectedIndex].text;
if(strUser==0)
{
alert("Please select a user");
}
}
</td></head>

</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T17:38:27.163

我认为你在这里有很多问题。

1.  你需要添加一个body标签
2.  在按钮中设置正确的函数名称。
3.  你需要一个结束脚本标签

试试这个：

```
<!DOCTYPE html>
<html>
    <body>
        <select id="ddlView">
            <option value="0">Select</option>
            <option value="1">test1</option>
            <option value="2">test2</option>
            <option value="3">test3</option>
        </select>  
        <input type="button" onclick="Validate()" value="select" />

        <script type="text/javascript">
            function Validate()
            {
                var e = document.getElementById("ddlView");
                var strUser = e.options[e.selectedIndex].value;

                var strUser1 = e.options[e.selectedIndex].text;
                if(strUser==0)
                {
                    alert("Please select a user");
                }
            }
        </script>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-28T07:44:30.773

这不是你要求的，但你仍然可以考虑我做了什么。有一个值为**0的****选项**，它将成为下拉菜单的默认选项，并将**必需**的属性添加到**select**元素。一旦这个**select**元素在**表单**中并被提交，**HTML**将自动接管验证部分。

 ******```
<select required>
<option value="">Select</option>
<option value="1">Option1</option>
</select> 
```

[![在此处输入图像描述](../Images/51485699b4fcc2b9735d9d0136dee729.png)](https://i.stack.imgur.com/sNB0e.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-22T08:49:53.787

```
<body>
<div>
    <span>Select the course : </span>
    <select id="ddlView">
        <option value="0">Select</option>
        <option value="1">Java Script</option>
        <option value="2">CSS</option>
        <option value="3">JQuery</option>
        <option value="3">HTML</option>
        <option value="3">C#</option>
    </select>
</div>
<br >
<input type="button" class="btn" value="Submit" id="btnSubmit" onclick="ddlValidate();" /> 
```

```
<script type="text/javascript">
    function ddlValidate() {
        var e = document.getElementById("ddlView");
        var optionSelIndex = e.options[e.selectedIndex].value;
        var optionSelectedText = e.options[e.selectedIndex].text;
        if (optionSelIndex == 0) {
            alert("Please select a Course");
        }
        else {
            alert("Success !! You have selected Course : " + optionSelectedText); ;
        }
    }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-05T12:14:39.500

这必须在您的表单处理脚本中，您只需将其添加到代码顶部并检查它是否已提交。

```
// Place this atop of your script.
if(isset($_POST)) {
    if($_POST['member_id']) {
        // Your codes here
    }
} 
```******

# events - 如何杀死事件调用的先前运行的方法

> ID：15368174
> 
> 赞同：0
> 
> 时间：2013-03-12T17:35:40.893
> 
> 标签：events, wxpython, wx.textctrl

亲爱的社区成员，

下面是一个简单的 wx.app，只有一个文本控件。编辑此文本控件时，将启动一个大型进程。如果一个人慢慢地编辑控件，编辑感觉很正常。但是，如果人类是一个快速打字者，那么编辑器就会停滞不前。我认为解决方案是杀死函数 self.VeryLargeProcess() 的先前调用。

你怎么做呢？有一个更好的方法吗？

```
import wx

class MyFrame(wx.Frame):
    def __init__(self):
         wx.Frame.__init__(self, None, wx.ID_ANY, "My Frame")
         main_panel = wx.Panel(self)

        static_box = wx.StaticBox( main_panel, -1, "Text control" )
        static_box.SetFont( wx.Font( 15, wx.ROMAN, wx.NORMAL, wx.NORMAL ) )
        main_sizer = wx.StaticBoxSizer( static_box, wx.VERTICAL )

        text_ctrl = wx.TextCtrl( main_panel, wx.ID_ANY, "Edit me, a large process will start", wx.DefaultPosition, [200,100], wx.TE_MULTILINE )
        main_sizer.Add( text_ctrl, 0, wx.GROW|wx.ALIGN_CENTER_VERTICAL|wx.ALL, 5 )

        main_panel.SetSizer( main_sizer )
        main_sizer.SetSizeHints( self )

        self.Bind(wx.EVT_TEXT, self.VeryLargeProcess, text_ctrl)

    def VeryLargeProcess(self, event):

        # kill previous self.VeryLargeProcess()   

        for i in range(0, 3000000):
            a = i

if __name__ == '__main__':
    app = wx.App()
    frame = MyFrame()
    frame.Show()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:14:38.647

如果该进程需要“很长时间”才能运行，那么您需要将该进程放在一个单独的线程中，否则您的 GUI 的响应速度会变慢或停止。wxPython wiki 上有一篇很好的[文章](http://wiki.wxpython.org/LongRunningTasks)，介绍了使用线程的各种方法，我也写了一篇关于这个主题的[教程](http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/)。

# ios - 具有可锁定列和水平滚动的表视图？

> ID：15368186
> 
> 赞同：6
> 
> 时间：2013-03-12T17:36:03.927
> 
> 标签：ios, uitableview, uiscrollview, uicollectionview

我希望创建一个具有以下功能的表：

*   与表格的其余部分一起水平滚动的可变列数
*   不随表格其余部分水平滚动的可变数量的可锁定列
*   可排序的列标题
*   垂直滚动
*   水平滚动

我见过人们使用不同的策略来完成类似的功能，包括：

1.  UITableview 每个表格单元格包含一个 UITableview 转换 90 度放置*在*另一个 UIScrollview 内以处理水平滚动。但是，要使其正常工作，我需要为每个单元格使用锁定的旋转表格视图，如果我想滚动整个主表而不是每个表格单元格中的表格，则单元格出队似乎会有些奇怪。
2.  第一的变体，但对每个表格单元使用自定义 uiview 而不是 uitableview。（目前领先的候选人）
3.  自定义 UIScrollview 类，它复制 UITableview 的功能并添加了 MDSpreadView 等[功能](https://github.com/mochidev/MDSpreadViewDemo)。似乎是最灵活和最难实现的。

有没有人有任何示例/建议/建议来研究哪些内容将相当容易启动和运行、出色的滚动性能和灵活性。

我仍处于计划阶段，试图找出解决此问题的最佳方法，并且到目前为止已经提出了一些想法，其中包括两个具有同步滚动的 uitableviews。左表视图将用于锁定列，右表将用于水平滚动表。两个表都将使用与表格单元相同的 uiviews，每列都有自定义 uiview 对象。

![在此处输入图像描述](../Images/c81858b03ffef00409844d64b19b5f85.png)

**更新**

能够同步锁定列和水平滚动表之间的滚动似乎很简单，到目前为止，这似乎是我倾向于的选项（上面的#2）。有没有人看到这种方法有任何潜在的陷阱或障碍？

在 Roambi 应用程序中可以找到我所追求的所需成品的一个很好的例子（下面的屏幕截图）

![在此处输入图像描述](../Images/2c4996d18d3e21f1afdbc5391c208995.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:43:38.757

我已经在我自己的一个应用程序中完成了这项工作 - 看看[MDSpreadView](https://github.com/mochidev/MDSpreadViewDemo)。它的委托/数据源调用就像 UITableView 的一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-20T23:42:37.713

我通过三个视图实现了这一点，通过标准协议和单个视图控制器进行管理。在这个解决方案中，您只关心链接两个表格视图控制器的垂直滚动。水平滚动通过包裹表格视图主体的滚动视图免费提供。我利用以下 UITableViewDelegate 函数来获取锁定的列标题：

```
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section; 
```

![在此处输入图像描述](../Images/afc841a2f85ea04049e56d4c7f6c45a1.png)

**查看结构**：

```
- View - The VCs root view
  - Table View     - rowHeadersTable                 -  the locked left hand columns
  - Scroll View    - rowBodyHorizontalScrollView     - a container of the table body
    - Table View   - rowBodyVerticalContentTableView - the table body, as wide as it needs to be beyond the frame of the parent scroll view 
```

**视图控制器**：

实现的协议：

```
@interface LockedTableColumnsViewController : UIViewController <UITableViewDataSource,UITableViewDelegate> 
```

设置：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    [self.rowHeadersTable                 setDataSource:self];
    [self.rowHeadersTable                 setDelegate:self];

    [self.rowBodyVerticalContentTableView setDataSource:self];
    [self.rowBodyVerticalContentTableView setDelegate:self];
}

-(void)viewDidAppear:(BOOL)animated
{
    // This ensures the scroll view can only scroll horizontally, and adapts to the size of its member content
    [self.rowBodyHorizontalScrollView setContentSize:self.rowBodyVerticalContentTableView.frame.size]; // Important to do this here rather than viewDidLoad, because we want a final reading on self.rowBodyVerticalContentTableView.frame.size

    [super viewDidAppear:animated];
}

// Do your Table Data Source however you choose 
```

管理 rowHeadersTable 和 rowBodyVerticalContentTableView 之间的垂直滚动链接：

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    if (scrollView == self.rowBodyVerticalContentTableView) {
        [self.rowHeadersTable setContentOffset:CGPointMake(self.rowHeadersTable.contentOffset.x, scrollView.contentOffset.y)];
    }
    else if (scrollView == self.rowHeadersTable) {
        [self.rowBodyVerticalContentTableView setContentOffset:CGPointMake(self.rowBodyVerticalContentTableView.contentOffset.x, scrollView.contentOffset.y)];
    }
} 
```

NB 这对于长（意味着高）表会很好地执行，因为它使用原型单元格等。但是它没有针对水平密集的行内容​​进行优化。我的表格正文内容是文本和有限数量的列。如果你没有那么奢侈，你总是可以让你的表格行体成为一个水平流动的集合视图，但是你必须链接你所有的行集合视图偏移量（我猜是通过可见的单元格）。那完全是另一种动物。祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-04T16:25:54.530

如果您的目标操作系统早于 iOS 6.0，您可以使用[此处](http://www.raywenderlich.com/4680/how-to-make-an-interface-with-horizontal-tables-like-the-pulse-news-app-part-1)描述的嵌套表格视图广告。不要忘记同步每个水平表的内容偏移量。

但是如果你的目标是 iOS 6.0+，你可以使用[MMSpreadsheetView](https://github.com/mutualmobile/MMSpreadsheetView)，但是它的性能很差，你不能为它的列设置不同的大小。

最好的选择是编写自己的 UICollectionView 布局。

# android - Android严格模式检测到多个活动实例违规，但我不知道为什么

> ID：15368187
> 
> 赞同：4
> 
> 时间：2013-03-12T17:36:07.463
> 
> 标签：android, memory-leaks, android-strictmode

代码可能太复杂，无法在此处完整发布，但这里是基本架构：我有两个`Activity`子类，每个子类都承载一个`ListView`. 每个`ListView`都有一个自定义类的适配器，它`View`也生成自定义类的实例。这些列表显示了在另一个线程中异步生成的数据项；因为它需要知道将更新发送到哪里，所以它操作的数据对象有`WeakReference<>`设置为在初始化时保存对显示其内容的适配器的引用的对象。当第一个活动列表中的一个对象被选中时，我启动第二个活动的意图是指示它查找项目并显示其内容。然后我使用“返回”按钮关闭第二个活动并返回第一个活动。出于某种原因，当我在`StrictMode`启用检查的情况下运行它时，它总是在两个活动之间切换几次迭代后崩溃，抱怨我的一个类的实例太多`Activity`。

我已经安排在崩溃之前编写一个堆转储（请参阅[Android StrictMode 和堆转储](https://stackoverflow.com/questions/15292383/android-strictmode-and-heap-dumps)）。这些堆转储始终显示在终止时堆上的两个活动中的每一个都有 1 个实例。首先，当我最近在两者之间切换时，这难道不是意料之中的吗？如果是这样，为什么要`StrictMode`抱怨这个？如果不是预期的，我该如何安排避免这种情况？检查堆转储，这两个对象都是从主线程堆栈中引用的，对此我似乎没有任何有用的控制程度。每个也有来自 的参考`android.app.ActivityThread$ActivityClientRecord`，我似乎也无法控制。

所以，基本上，有什么想法可以避免这种情况吗？这实际上是否代表活动泄漏，或者 StrictMode 只是过于敏感？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-14T15:13:38.910

我知道这是旧帖子。仅适用于正在寻找此问题的解决方案和解释的人。

如果出现 InstanceCountViolation 异常，则意味着存在 Activity 泄漏的真正问题。否则可能会出现与在 Android SDK 中如何实现 detectActivityLeaks 检查有关的问题。

为了确定这是否是一个问题，我可以推荐以下帖子：[Detecting leaked Activities in Android](http://www.codeka.com.au/blog/2014/06/detecting-leaked-activities-in-android#popup)。如果您会看到一些对象持有对此活动的引用，而这些引用与 Android 框架无关，那么您遇到的问题应该由您解决。

如果没有对象持有与 Android 框架无关的此活动的引用，则意味着您遇到了与如何实现 detectActivityLeaks 检查相关的问题。在这种情况下，要在不关闭 detectActivityLeaks 的情况下解决活动失败的问题，您可以在调试配置中启动活动之前简单地运行*System.gc()*，如下例所示：

```
 if (BuildConfig.DEBUG)
 {         
     System.gc();
 }

 Intent intent = new Intent(context, SomeActivity.class);
 this.startActivity(intent); 
```

[此答案](https://stackoverflow.com/a/25252425/1318002)中提供了更多信息。

# python - 使用 argparse 传递目录（无需类型检查）

> ID：15368188
> 
> 赞同：3
> 
> 时间：2013-03-12T17:36:11.470
> 
> 标签：python, argparse

我写了一个文件爬虫，我正在尝试扩展它。我想使用 argparse 来处理脚本的设置，包括在命令行中传递起始目录。

例子：`/var/some/directory/`

我还有其他几个参数可以工作，但我无法正确传递这个目录。我不在乎它前面是否有标志（例如`-d /path/to/start/`），但我需要确保至少使用 this 参数，因为它将是脚本运行的唯一强制性选项。

代码示例：

```
parser = argparse.ArgumentParser(description='py pub crawler...')
parser.add_argument('-v', '--verbose', help='verbose output from crawler', action="store_true")
parser.add_argument('-d', '--dump', help='dumps and replaces existing dictionaries', action="store_true")
parser.add_argument('-f', '--fake', help='crawl only, nothing stored to DB', action="store_true")

args = parser.parse_args()

if args.verbose:
    verbose = True
if args.dump:
    dump = True
if args.fake:
    fake = True 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T17:43:09.713

只需添加：

```
parser.add_argument('directory',help='directory to use',action='store') 
```

在你的`args = parser.parse_args()`行之前。命令行的一个简单测试表明它做了正确的事情（`args`在脚本末尾打印）：

```
$ python test.py /foo/bar/baz
Namespace(directory='/foo/bar/baz', dump=False, fake=False, verbose=False)
$ python test.py
usage: test.py [-h] [-v] [-d] [-f] directory
test.py: error: too few arguments 
```

# javascript - 将 AJAX 调用的结果用于 FullCalendarEvents？

> ID：15368191
> 
> 赞同：0
> 
> 时间：2013-03-12T17:36:17.070
> 
> 标签：javascript, jquery, fullcalendar

我目前在我的事件删除中有这个：

```
$.ajax({
    type: "POST",
    url: "CalendarServices.aspx/UpdateDrop",
    data: 'id=' + event.realid + '&start=' + $.fullCalendar.formatDate(event.start, 'yyyy-MM-dd') + '&resource=' + event.resource,
    success: function(data) {
        $('#calendar').fullCalendar('refetchEvents');
    },
    error: function() {
        $('#calendar').fullCalendar('refetchEvents');
    }
}); 
```

这实际上是 2 个 ajax 调用。我可以轻松地在我的第一个 ajax 调用中返回事件并用它们填充日历。有什么办法可以做到吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:24:48.943

这就是我使用的并且有效：

```
eventDrop: function(event,dayDelta,minuteDelta,allDay) {

    var id = event.id.toString();
    var start = $.fullCalendar.formatDate(event.start, "yyyy-MM-dd");
    url = 'updateevent.php';
    alert (url);
    $.ajax({
          type: "POST",
          url: url,
          data: {id:id, startDate:start},
    success: function(){
        $('#calendar').fullCalendar( 'refetchEvents' );
        alert( "Success!" );
    },
    error: function(){
        $('#calendar').fullCalendar( 'refetchEvents' );
        alert( "Failed!" );
    }

     }); 
```

这是我的 updateevent.php

```
<?php

//..... connection up top  

$r = mysql_connect($host, $user, $pass);

$r2 = mysql_select_db($db);

$id = $_POST['id'];
$startDate = $_POST['startDate'];

mysql_query("UPDATE ecc_events SET startDate= '$startDate' WHERE id= '$id' LIMIT 1; ");

?> 
```

# git - 推送到远程 git-server 的权限被拒绝（公钥）

> ID：15368193
> 
> 赞同：0
> 
> 时间：2013-03-12T17:36:21.020
> 
> 标签：git

我尝试在我的远程 git-server 上创建新的存储库

```
cd /var/www/vhost/example.com
sudo git init
sudo git remote add origin ssh://git@111.111.111.111:30000/home/git/repositories/example.git
sudo git add .
sudo git commit -a -m "Create empty example.com dir"
sudo git push origin master:refs/heads/master 
```

我的 ssh 配置：

```
Host 111.111.111.111
User git
Port 30000
IdentityFile ~/.ssh/id_rsa 
```

我的 gitosis-admin.conf

```
[gitosis]

[group gitosis-admin]
members = git@111.111.111.111
writable = gitosis-admin

[group example-com]
members = git@111.111.111.111 user@user
writable = example-com 
```

获取错误

```
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

我可以

```
ssh git@111.111.111.111 
```

没问题，但不能推。我做错了什么？我还研究了类似的先前问题[GitHub：Permission denied (publickey)。致命：远程端意外挂断](https://stackoverflow.com/questions/3617113/github-newbie-problems-permission-denied-publickey-fatal-the-remote-end) ，但我不使用github。

**更新：**好的，我认为 sudo 有问题。

此命令完成但没有出现某种错误：

```
git push origin master:refs/heads/master 
```

这个命令：

```
sudo git push origin master:refs/heads/master 
```

完成错误：

```
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-29T21:22:07.767

使用 重新运行任何 git 命令`GIT_TRACE=1`，例如

```
GIT_TRACE=1 git push origin master:refs/heads/master 
```

所以你可以看到更多的输出和执行的命令来检查 git 失败的原因。

如果在 Windows 上工作，`GIT_TRACE`请使用任何值定义用户变量，这样它将为所有 git 命令启用调试模式。不需要时移除。

您也可以使用：`GIT_SSH_COMMAND="ssh -vv"`（Git 2.3.0+）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:45:04.133

我们死了你存储你的 SSH 配置，通常配置在主目录中，所以 root 有不同的主目录和不同的 SSH 配置，我认为你必须将配置保存在 root 的主目录中。

# java - 将文件读入二维数组

> ID：15368196
> 
> 赞同：0
> 
> 时间：2013-03-12T17:36:26.953
> 
> 标签：java, java-io

我正在尝试将文件读入二维数组。当我在第一部分读到它时，这些值是正确的。当我把它写出来时，这些值都是“10”。我怎样才能解决这个问题？

```
public static void readagain() {

     try {
            InputStream is = new FileInputStream("C:\\test.new");
            int m = 16;
            int n = 16;
            int[][] a = new int[m][n];
            int value=0; 

            while ((value = is.read()) != -1) { 
                for (int i = 0; i < m; i++) {
                    for (int j = 0; j < n; j++) {
                       try{
                        a[i][j] = value;
                           System.out.println("number is "+ a[i][j]);
                        }
                       catch (Exception e) {
                            e.printStackTrace();
                        }
                    }//j
                } //i         
            } 

            for (int i = 0; i < m; i++) {
                    for (int j = 0; j < n; j++) {
                        System.out.println("number is "+a[i][j]);
                    }
                }
        } 
      catch (Exception e) {
            e.printStackTrace();
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:41:46.630

你的第一个循环看起来会用最后一个值填充你的整个数组，而且都是一样的。

似乎正在发生的事情，是你一个接一个地取值，然后每次都覆盖数组中的所有值。

我建议只使用 1 个循环，并计算应该是什么`i`，`j`例如：

```
for( int x=0-; (value = is.read()) != -1) && x < m*n; x++) { 

   int i = x/n;
   int j = x%n;
   try{
    a[i][j] = value;
       System.out.println("number is "+ a[i][j]);
    }
   catch (Exception e) {
        e.printStackTrace();
    }     
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:52:21.857

is.read 将返回您需要将其转换为 char 的字节值 0-255 并检查它是否为换行符。如果是换行符，则增加当前行。

```
int row = 0;
int col=0;
while ((value = is.read()) != -1) { 
    if(((char) value) == '\n'){
        row++;
        col=0;
    }
    a[row][col++] = value;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:43:45.600

您的错误与您执行操作的顺序有关。如果我们列出您的代码流程，步骤是。

1.  从输入流中读取下一个值。
2.  遍历二维数组中的所有位置
3.  迭代时将读取的值写入当前数组位置

这里的问题是您读取一个值，然后继续将该值写入数组中的每个索引。因此，完成后，数组将包含每个索引中读取的最后一个值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T17:45:56.450

你的循环是错误的。最后一次读取的值再次被设置在整个数组中。在 for 循环中读取值会起作用。

```
for (int i = 0; i < m; i++) {
   for (int j = 0; j < n; j++) {
      try{
        int value = is.read();
        if (value == -1) break;
         a[i][j] = value;
         System.out.println("number is "+ a[i][j]);
        }
        catch (Exception e) {
          e.printStackTrace();
        }
    }//j
 } //i 
```

# python - 我将如何在字典中搜索值？

> ID：15368197
> 
> 赞同：0
> 
> 时间：2013-03-12T17:36:33.980
> 
> 标签：python

我正在为 python 制作一个开源 twitch.tv API 包装器，到目前为止我有：

```
import urllib2
import json
import time
waittime = 1
baseurl = 'https://api.twitch.tv/kraken/'

class twitchchannelinfo():
    def __init__ (self,channel):
        self.channel = channel
        time.sleep(waittime)
        self.dict1 = json.loads(urllib2.urlopen(baseurl + 'channels/' + channel).read())

    def getstatus(self):
        return self.dict1 ['status']
    def getdisplay_name(self):
        return self.dict1 ['display_name']
    def getmature(self):
        return self.dict1 ['mature']
    def getchanurl(self):
        return self.dict1 ['url']
    def getcreated_at(self):
        return self.dict1 ['created_at']
    def getteams(self):
        return self.dict1 ['teams']
    def getgame(self):
        return self.dict1 ['game']
    def getupdated_at(self):
        return self.dict1 ['updated_at'] 
```

我想向这个 API 添加错误检查。服务器将返回一个这样的 json 响应来表示错误：

```
{
    "error": "Unprocessable Entity",
    "status": 422,
    "message": "Channel 'deeman' is not available on Twitch"
} 
```

然后我使用`json.loads`. 我将如何检查这本字典的“错误”值，或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:41:38.883

我建议这样做：

```
if 'error' in self.dict1:
    raise ValueError("%s: %s" % (self.dict1["error"], self.dict1["message"])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:41:00.600

```
try:
    self.dict1[u'error']
except KeyError:
    ## Do something here 
```

这只是另一种使用 try...except 的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:38:22.033

```
if 'error' in self.dict1:
  # do blah 
```

# c# - 从包装服务（OpenVPN）获取输出日志？

> ID：15368198
> 
> 赞同：0
> 
> 时间：2013-03-12T17:36:36.360
> 
> 标签：c#, .net, windows-services, openvpn

我正在考虑编写一个简单的自定义 .NET OpenVPN 客户端。
我想知道可以通过哪些不同的方式获取和显示底层*openvpn*可执行文件的输出日志？

（仅供参考 - OpenVPN 服务基本上是主要可执行文件的包装器，创建用于模拟透明后台执行（例如 Linux 守护程序）以及绕过非管理员用户问题。它是用 C 编写的。它选择从注册表中设置其启动配置参数，如本页“将[OpenVPN 作为 Windows 服务运行”](http://openvpn.net/index.php/open-source/documentation/install.html)部分所述。）

顺便说一句，我正在检查 Viscosity 和 HMA 等客户端，它们都是 .NET 客户端，并且都具有显示 openvpn 输出日志的功能。HMA 运行*openvpnserv.exe*（即服务），并保留日志文件。Viscosity 有自己的服务包装器，而且我没有在文件系统上发现日志文件（这并不意味着它不存在于某处）......所以我无法真正判断在这种情况下发生了什么。

一个明显的解决方案是跟踪附加行的原始日志文件，例如[类似这样的东西](https://stackoverflow.com/questions/2373090/reading-file-content-changes-in-net)，这似乎有效。我在这里的其他选择是什么，我是否应该考虑其他任何事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:00:00.793

好的，替代（并且可能是理想的）解决方案是使用[OpenVPN 管理接口](http://openvpn.net/index.php/open-source/documentation/miscellaneous/management-interface.html)及其打印日志功能，只需使用以下命令之一启用它（取决于所需的效果）：

```
log on     # turn real-time logging on
log all    # show cached log history
log on all # second + first
log 30     # show most recent 30 log-history lines 
```

# javascript - 粘贴事件在 Opera 11 及更低版本中无法正常运行

> ID：15368204
> 
> 赞同：0
> 
> 时间：2013-03-12T17:37:20.537
> 
> 标签：javascript, jquery, opera, paste

我正在尝试这个简单的代码，它应该在第一个检测到右键单击时将焦点转移到另一个文本框，以便任何后续`paste`事件都会将文本粘贴到第二个框中：

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
    $(document).ready(function() {
        $("#real").bind("contextmenu",function() {
           $("#paste").focus();
        });
    });
</script>
</head>
<body>
    <input type = 'text' sh = '0' right = '0' id = 'real' />
    <input type = 'text' id = 'paste' />
    <p>Dummy</p>
</html> 
```

在 Opera 12 以上版本中，它运行良好。但是，在 11 及以下版本中，即使在右键单击第一个文本框时焦点确实转移到了第二个文本框，粘贴事件也会将文本粘贴到第一个文本框中（焦点立即转移到第二个文本框，在其自己的）。我试图用 替换代码`setTimeout(function() { $("#paste").focus(); },0);`，但错误仍然存​​在。

谁能告诉我如何解决这个问题，以便将文本粘贴到第二个文本框中？（检测 a `mouseup`，检查是否是右键单击`event.which`，如果是，则转移焦点 - 是的，我也这样做了，结果相同！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:39:59.847

作为替代解决方案...

```
$("#real").bind("contextmenu",function() {
    $("#paste").val($(this).val());
    $(this).val('');
}); 
```

# java - Java 泛型工厂

> ID：15368206
> 
> 赞同：-3
> 
> 时间：2013-03-12T17:37:34.930
> 
> 标签：java, generics

我正在尝试为依赖于资源类类型的 Mapper 接口构建一个通用工厂。

这是代码：

```
public interface Resource { }

public class IntegerResource implements Resource { }

public class IntegerMapper implements Mapper<IntegerResource> {

}

    public static <R extends Resource> Mapper<R> buildMapper(Class<R> clazz){
        if (IntegerResource.class.equals(clazz)){
            return new IntegerMapper();//Compilation error: Type mismatch: cannot convert from IntegerMapper to Mapper<R>

        }
        return null;
    }

    public <R extends Resource> R getResource(Class<R> clazz){
        Mapper<R> m = buildMapper(clazz);
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T17:41:22.407

要构建类的实例，您必须使用关键字`new`：

```
return new IntegerMapper(); 
```

编辑：编译器也不够聪明，无法知道如果`clazz`是 IntegerResource 类，则 R 表示 IntegerResource 类型。所以你必须明确地转换它：

```
@SuppressWarnings("unchecked")
public static <R extends Resource> Mapper<R> buildMapper(Class<R> clazz){
    if (IntegerResource.class.equals(clazz)){
        return (Mapper<R>) new IntegerMapper();
    }
    return null;
} 
```

SuppressWarning 位用来告诉编译器你知道这个转换是安全的，并且它不应该给出警告。

# ms-access - 无法在表单中添加记录

> ID：15368208
> 
> 赞同：0
> 
> 时间：2013-03-12T17:37:37.350
> 
> 标签：ms-access, ms-access-2003

当我尝试在 McAccess 表单中添加新记录时，我收到以下消息：“当前字段必须与表中的连接键匹配，该表服务于一对多关系的一侧。在一侧表中输入记录所需的键值然后在多只表中的所需连接键中进行记录”。

连接到具有这种“一对多”关系的查询的表单......但它在其他数据库中工作......当我将记录添加到表中时......它出现在表单中......但反之亦然......

我试图从几乎相同的数据库中导入此表单，但仍然无法正常工作...

请帮忙....！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:42:38.867

你知道相关表叫什么吗？例如，我可能有一个与我的主表相关的国家/地区表，其中包含国家/地区列表，并且不允许我输入不在列表中的国家/地区。找到相关表后，查看您是否尝试输入不在列表中的数据，然后尝试输入列表中的数据。

您可以从关系窗口中看到这一点：

![关系](../Images/e58bd79e1135f76a938b1c50d7e6058c.png)

使用表格，事情可能会变得更加复杂。在大多数情况下，您最好使用允许用户从允许值列表中选择的组合框。

如果您已将表设置为使用带有查找表的字段，这可能是许多问题中的第一个（[http://access.mvps.org/access/lookupfields.htm](http://access.mvps.org/access/lookupfields.htm)）。

# android - java.lang.NullPointerException for WebView.getFavicon() 保存到 ByteArrayOutputStream

> ID：15368215
> 
> 赞同：0
> 
> 时间：2013-03-12T17:37:51.363
> 
> 标签：android, sqlite, bitmap

`java.lang.NullPointerException`我试图将网页的 favicon 添加到 sqlite 数据库，但是在尝试将 favicon 保存到`ByteArrayOutputStream`via时我得到了一个`Bitmap.compress`。

有我的代码片段：

```
Bitmap bitmap = view.getFavicon(); 
    mySQLiteAdapter.openToWrite();
    ByteArrayOutputStream byteArrayBitmapStream = new ByteArrayOutputStream();

    bitmap.compress(CompressFormat.PNG, 0, byteArrayBitmapStream);
    byte[] bArray = byteArrayBitmapStream.toByteArray();
    String[] comments = new String[] {view.getUrl()};
    String[] commentss = new String[] {view.getTitle()};
    int nextInt = new Random().nextInt(1);
    try{
     mySQLiteAdapter.insert(bArray, commentss[nextInt], comments[nextInt]);
    }catch (Exception e) {
         e.printStackTrace();
    }
    mySQLiteAdapter.close(); 
```

为什么我会收到此错误？

# c# - 执行 SQL 语句时出现 If 语句的问题 - c#

> ID：15368216
> 
> 赞同：1
> 
> 时间：2013-03-12T17:37:52.483
> 
> 标签：c#, sql, if-statement

我在 c# 中创建了一个表单来将数据添加到我的数据表中，它工作正常，我想要的只是在插入数据时返回一条消息，我遇到了一个问题，代码如下：

```
conn.Open();
            SqlCommand cmd = conn.CreateCommand();
            cmd.CommandText = ("INSERT INTO datatable (Number_Plate,Registered_Keeper,Make,Model,Year_Of_Make,Colour,Engine_Size,Transmission,Fuel_Type) Values (@Number_Plate,@Registered_Keeper,@Make,@Model,@Year_Of_Make,@Colour,@Engine_Size,@Transmission,@Fuel_Type)");
            cmd.Parameters.AddWithValue("@Number_Plate", Plate.Text); 
            cmd.Parameters.AddWithValue("@Registered_Keeper", Keeper.Text);
            cmd.Parameters.AddWithValue("@Make", Make.Text);
            cmd.Parameters.AddWithValue("@Model", Model.Text);
            cmd.Parameters.AddWithValue("@Year_Of_Make", Year.Text);
            cmd.Parameters.AddWithValue("@Colour", Colour.Text);
            cmd.Parameters.AddWithValue("@Engine_Size", Engine.Text);
            cmd.Parameters.AddWithValue("@Transmission", Transmission.Text);
            cmd.Parameters.AddWithValue("@Fuel_Type", Fuel.Text);
            SqlDataReader reader = cmd.ExecuteReader();
            if (cmd.ExecuteNonQuery()==1)
            {
                button1.Visible = false;
                label10.Visible = true;
            }
            else
            {
                button1.Visible = false;
                label10.Text = "Data Not Added Please try Again!";
                label10.Visible = true;
            }
        } 
```

当我运行代码时，我遇到了 If 语句的问题，错误是：

> 已经有一个与此命令关联的打开的 DataReader，必须先关闭它。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:39:48.057

只需删除此行（*您不需要它*）

```
SqlDataReader reader = cmd.ExecuteReader(); 
```

没有意义，因为您正在插入记录而不是在数据库中获取。

片段，

```
 // other codes
        cmd.Parameters.AddWithValue("@Engine_Size", Engine.Text);
        cmd.Parameters.AddWithValue("@Transmission", Transmission.Text);
        cmd.Parameters.AddWithValue("@Fuel_Type", Fuel.Text);
        if (cmd.ExecuteNonQuery()==1)
        {
            button1.Visible = false;
        // other codes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:40:35.183

您之前已经打开了与数据库的连接。所以你需要先关闭它才能执行。

```
conn.close() 
```

# networking - 如何防止 /etc/resolv.conf 在 Ubuntu 11.10 重启后被覆盖？

> ID：15368217
> 
> 赞同：4
> 
> 时间：2013-03-12T17:37:52.967
> 
> 标签：networking, dns, ubuntu-11.10, dhcp

我使用的是 Ubuntu 11.10，我在 /etc/resolv.conf 中手动配置了 DNS 服务器，但在我重新启动后它会以某种方式被覆盖。我怎样才能防止这种情况？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-02-26T10:36:16.673

正如您在 resolv.conf 的标题中看到的那样：

```
Dynamic resolv.conf file for glibc resolver generated by resolvconf 
```

因此，生成了 resolv.conf，如果要在重启后保留 resolvconf 配置，则必须编辑 /etc/resolvconf/resolv.conf.d/base。在该文件中，像在 resolv.conf 中一样输入您的信息。

```
nameserver 8.8.8.8 
```

然后用 resolvconf 重新生成 resolv.conf：

```
sudo resolvconf -u 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-05T22:14:56.290

阅读其他答案后，由于以下原因，我仍然需要一些不同的东西：

*   我没有使用`resolvconf`，只是简单`/etc/resolv.conf`的。
*   使用`chattr +i`锁定`resolv.conf`似乎太hacky。我需要 Puppet 在必要时自由地进行更改。

我发现的[最佳解决方案](http://www.cyberciti.biz/faq/dhclient-etcresolvconf-hooks/)覆盖了`dhclient`使用其记录的钩子的默认行为。

`/etc/dhcp/dhclient-enter-hooks.d/nodnsupdate`使用以下内容创建一个新文件：

```
#!/bin/sh
make_resolv_conf() {
    :
} 
```

然后使文件可执行：

```
chmod +x /etc/dhcp/dhclient-enter-hooks.d/nodnsupdate 
```

现在，当 dhclient 运行时——无论是在重新启动时还是在您手动运行时`sudo ifdown -a ; sudo ifup -a`——它都会加载这个脚本`nodnsupdate`。这个脚本覆盖了一个调用的内部函数，该函数`make_resolv_conf()`通常会覆盖`resolv.conf`，而不是什么都不做。

这在 Ubuntu 12.04 上对我有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T20:46:05.957

我认为 NetworkManager 正在覆盖 /etc/resolv.conf 文件。在我的情况下，我想更改我的 DNS 服务器的列出顺序。您可以通过 NetworkManager 编辑您的连接 IP4V 设置来完成此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-24T09:24:32.270

我使用以下行： chattr +i /etc/resolv.conf

撤消使用：chattr -i /etc/resolv.conf

让我知道它是否有效...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T17:40:51.760

您有 DHCP 客户端执行此操作。按照这些[说明](http://raamdev.com/2009/configuring-static-dns-with-dhcp-on-debianubuntu/)覆盖它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-05T08:33:56.803

NetworkManager 可以配置为使用手动输入的 IPv4 配置，或仅从 DHCP IP/网络掩码/路由器获取 - 在这种情况下，它不应更改 /etc/resolv.conf

但是，可能希望在 /etc/resolv.conf 中有自己的设置——比如要搜索的名称服务器或域；我只需要一个域，我通过添加一个文件 /etc/NetworkManager/dispatcher.d/99my_fix 来做到这一点，其中包含：

`#!/bin/bash rc=/etc/resolv.conf; le="search my.domain" grep -q domain $rc && ! grep -q "$le" $rc && echo "$le" >> $rc`

当然，我 chmod-ed +x 它。NetworkManager 在设置 /etc/resolv.conf 后调用它，如果需要，我的脚本会修复它；第一个 grep 检测到网络已启动，第二个检测到未应用修复 - 它们都是应用修复所必需的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-02T09:57:05.490

我遇到了同样的问题，我通过添加域名和域名服务器编辑了我的“/etc/dhcp/dhclient.conf”文件

`supersede domain-name "local.com"; supersede domain-name-servers 192.168.56.103;`

192.168.56.103 是我运行bind9的虚拟机，我的域名是local.com

我也从`request`部分中删除了相同的内容。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-02-06T21:56:09.553

如果您的服务器实例的网络接口由 DHCP 控制，则 dhclient 程序将在网络服务重新启动时覆盖您的 /etc/resolv.conf 文件。

**您可以通过编辑“/etc/dhcp/dhclient.conf”文件并为domain-name**、**domain-search**和**domain-name-servers**添加替代语句来解决此问题，如下所示：

```
supersede domain-name "mydomain.com";
supersede domain-search "mydomain.com"
supersede domain-name-servers 8.8.8.8; 
```

在这种特殊情况下，名称服务器位于“8.8.8.8”，域名为“mydomain.com”。替换您的特定信息。

请注意，每一行都以分号结尾，域名用双引号括起来。

# php - jQuery.post 正在发送转义字符

> ID：15368223
> 
> 赞同：1
> 
> 时间：2013-03-12T17:38:01.717
> 
> 标签：php, jquery, json, post, escaping

我有一个由`recipeBlob = JSON.stringify(recipeData)`. 这是一个很长的字符串，但这里是它的一个示例：

```
"properties":{"Energy":{"val":90.6,"unit":"cal","rdi":"2000"},"Protein":{"val":0.4,"unit":"g","rdi":"50.00000000"},"Fat":{"val":0.6,"unit":"g","rdi":"65.000000000"},"Carbohydrates":{"val":23.3,"unit":"g","rdi":"300.0000000"},"Dietary Fiber":{"val":4.1,"unit":"g","rdi":"25"},"Sugars":{"val":18.8,"unit":"g","rdi":null} 
```

我通过 $.post 这样发送：

```
$.post('scripts/save_blob.php', {
            blob : recipeBlob
        }); 
```

`$string = $_POST['blob']`到达我的 PHP 脚本的显示如下：

```
{\"properties\":{\"Energy\":{\"val\":90.6,\"unit\":\"cal\",\"rdi\":\"2000\"},\"Protein\":{\"val\":0.4,\"unit\":\"g\",\"rdi\":\"50.00000000\"},\"Fat\":{\"val\":0.6,\"unit\":\"g\",\"rdi\":\"65.000000000\"},\"Carbohydrates\":{\"val\":23.3,\"unit\":\"g\",\"rdi\":\"300.0000000\"} 
```

当我运行`json_decode($string)`它时返回错误 #4，这是 json 语法错误。

我不知道角色在过程的哪个部分被转义，我需要避免。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:30:16.503

@Juhana 提供了最直接的问题答案，服务器上打开了 PHP 魔术引号，从而自动转义引号。

@dfsq 提供了我实际使用的解决方案，即只发送 javascript 对象而不对其进行字符串化。它以数组的形式到达 PHP 脚本。

# jquery-mobile - 对动态加载的页面使用数据方向

> ID：15368224
> 
> 赞同：1
> 
> 时间：2013-03-12T17:38:09.533
> 
> 标签：jquery-mobile, button, dynamic

我正在尝试使用 jQuery 加载动态页面，遵循此[示例](http://jquerymobile.com/demos/1.2.0/docs/pages/dynamic-samples/sample-reuse-page.html#category-items?category=animals)。

（编辑）：更新代码以提供更好的上下文视图

这是一个代码示例

```
<div data-role="page" id="pageSample">
    <div data-role="header">title</div>
    <div data-role="content">
        <a href="#home" data-role="button" data-transition="slide" data-direction='reverse'>Home</a>
    </div>
    <div data-role="footer">Footer</div>
</div>

$(document).bind( "pagebeforechange", function( e, data ) {
    // Generate dynamic content of targeted pages...
    $.mobile.changePage($(page), {
        transition:"slide",
        dataUrl:url,
        reverse:reverse
    });
}); 
```

后退按钮可能是动态生成的，也可能不是（例如这个片段）。在这两种情况下，它都不会反向工作，因为`changePage`通过`pagebeforechange`. 因此，我在选项中插入了一个`reverse`变量。`changePage()`

我找不到一种方法来检索单击项目的数据方向值。我之前试过这个`changePage()`：

```
reverse = false;
$('a[data-direction="reverse"]').on("click", function(){
    reverse = true;
}); 
```

但该`reverse`值未在 中更新`changePage()`。我猜这两个代码是同步运行的。有没有办法更新中的`reverse`值`changePage()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:02:13.833

**最终更新**

根据我们的讨论和您的示例[http://jsfiddle.net/Iris/UZBhx/21/](http://jsfiddle.net/Iris/UZBhx/21/)

改变这个

```
$('a').on("click", function() 
```

至

```
$(document).on("click", 'a', function() 
```

**另一个更新**

绑定`$.mobile.changePage`to`pagebeforechange`会触发所有代码两次。因此，`reverse`当命令第一次执行时，您会丢失或忽略它的值。

尝试将其绑定到`pagebeforehide`如下。

```
$(document).bind( 'pagebeforehide', '[data-role="page"]#PageId', function( e, data ) {

// Generate dynamic content of targeted pages...

  $.mobile.changePage($(page), {
   transition:"slide",
   dataUrl:url,
   reverse:reverse
  });
}); 
```

**更新**

要对特定按钮使用反向效果，您可以按照此方法。

首先，为具有反向效果的按钮分配一个类，例如`ui-reverse`并添加以下脚本。

```
$(document).on('click', '[data-role='button'].ui-reverse', function() {
 $.mobile.changePage( url, {
  transition:"slide",
  reverse: true, 
  dataUrl:url
 });  
}); 
```

**“*返回*”按钮链接 - Jquery Mobile**

```
data-direction="reverse" 
```

旨在简单地运行将在该页面更改时运行的过渡的向后版本，而 data-rel="back" 使链接在功能上等同于浏览器的后退按钮，并且所有标准后退按钮逻辑都适用。

```
data-rel="back" 
```

这将模仿后退按钮，返回一个历史条目并忽略锚点的默认 href。

添加`data-direction="reverse"`到链接`data-rel="back"`不会反转反向页面转换并产生转换的“正常”版本。

在您的情况下，您想要反向转换，请使用以下代码。

```
$.mobile.changePage($(page), {
 transition:"slide",
 reverse: true, // this will reverse the affect of the transition used in the page.
 dataUrl:url
}); 
```

[在此处阅读更多相关信息。](http://jquerymobile.com/demos/1.2.0/docs/pages/page-links.html)

# c - 带有 EOF 的额外循环

> ID：15368229
> 
> 赞同：0
> 
> 时间：2013-03-12T17:38:30.583
> 
> 标签：c, loops, feof

我在使用函数时遇到问题`feof`，这是我的代码：

```
while(!feof(archlog))
{  if(!fgets(line,MAXLINE,archlog))
     printf("\nERROR: Can't read on: %s\n", ARCHTXT);
   else
     printf("%s",line);
} 
```

当我运行它时，它会打印文件的文本，但会产生一个额外的循环并打印错误，我想避免这种情况，我希望它只打印文件的文本而没有额外的循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:52:04.023

如果文件以新行结尾，则循环将再次进入。

一个解决方法应该是：

```
while(!feof(archlog))
{  if(!fgets(line,MAXLINE,archlog))
     printf("\nERROR: Can't read on: %s\n", ARCHTXT);
   else
     printf("%s",line);

   if ( (c=fgetc(archlog)) == EOF)
      break;
   ungetc(c, archlog);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:55:35.687

`gets`一旦您的函数读取 EOF，就会设置 EOF 标志。这意味着最后一次迭代将始终触发错误消息。此后，循环再次测试 EOF 标志，该标志在最后一次读取时触发，因此退出循环。

您可以通过将 EOF 测试放在循环中来解决此问题。在那里，您可以在成功读取时打印文本，或者在失败时设置布尔值以退出循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:55:25.617

我总是颠倒这两个函数调用：

```
while(fgets(line,MAXLINE,archlog))
{  if(feof(archlog))
     break;
   else
     printf("%s",line);
} 
```

当读取文件末尾时，这让我退出。有时我会“或”`ferror(archlog)`加入`feof()`通话，以在错误或 EOF 时中断。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T18:03:40.820

你不应该`feof(FILE *f)`在你的循环中使用它，因为它只有在`EOF`被读取而不是到达时才返回 true，请参阅[如何使用 feof(FILE *f)？](https://stackoverflow.com/questions/4299296/how-to-use-feoffile-f)

而是使用`fgets`条件及其返回码：

```
while(fgets(line, MAXLINE, archlog) != NULL) {
    printf("%s", line);
} 
```

无需检查`feof(archlog)`循环内部。对于错误检查，请使用[ferror(archlog)](http://www.cplusplus.com/reference/cstdio/ferror/)。

# json - 可以引用 JSON 数字吗？

> ID：15368231
> 
> 赞同：51
> 
> 时间：2013-03-12T17:38:37.363
> 
> 标签：json, string, parsing, numbers, quotes

JSON数字周围可以有引号吗？在大多数搜索链接中，数字似乎并不“需要”引号。但是，解析器应该同时接受`"attr" : 6`和`"attr" : "6"`吗？

如果`MyParser`有一个方法`getInt`来获取给定键的数字，应该在两种情况下都`MyParser.getInt("attr")`返回`6`，还是在后一种情况下抛出异常？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-03-12T17:40:11.747

在[JSON](http://json.org)中，`6`是数字六。`"6"`是一个包含*数字的**字符串*。那么问题的答案*“可以引用json数字吗？”* 基本上是“不”，因为如果你把它们放在引号里，它们就不再是数字了。 *`6`*

 **> 但是，解析器应该同时接受`"attr" : 6`和`"attr" : "6"`吗？

是的，但它们定义了不同的东西。第一个定义`attr`具有值`6`（数字）的属性。第二个定义了一个`attr`带有值的属性`"6"`（一个包含单个数字的字符串）。

（最初询问的问题`attr: "6"`是无效的，因为 JSON 中的属性名称必须用双引号括起来。）

> 如果 MyParser 有一个方法 getInt 来获取给定键的数字， MyParser.getInt("attr") 在这两种情况下都应该返回 6 还是在后一种情况下抛出异常？

这是提供解析器的人的设计决定，基本上是在`getInt`严格（如果您尝试它会抛出异常`"attr": "6"`）或松散（强制`"6"`并`6`返回）之间进行选择。JavaScript 通常是松散的，因此可能存在松散的争论；相反，JavaScript 松散的事实有时会导致麻烦，这可能是严格的论据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T17:50:14.157

这将取决于您用于获取整数的语言，因为如果编程语言不提供从字符串到整数的隐式转换，您可能会遇到问题。

您不必太担心，因为现在的现代编程语言可以将字符串隐式转换为数字，而无需额外的代码。您应该考虑的一点是，在使用 JavaScript 等编程语言时，在使用`==`和`===`比较值时，`===`会考虑值的类型，`==`而不考虑值的类型，因此`6 === "6"`会返回`false`，而`6 == "6"`将返回`true`。

回答您的问题，如果您使用提供从字符串到 int 的隐式转换的编程语言，它不会引发异常。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-04-13T22:03:30.217

你可以引用这个数字。两者都是有效的（“attr”：6 和“attr”：“6”）唯一需要记住的是，在提取值时，您需要在第一种情况下使用 GetInt()，在第二种情况下使用 GetString()，然后将该字符串转换为整数。**

# c# - 如何通过数字c#生成随机图像？

> ID：15368233
> 
> 赞同：1
> 
> 时间：2013-03-12T17:38:38.990
> 
> 标签：c#, image, random, numbers, jpeg

我正在制作一个应用程序，其中随机抛出 4 个筹码。我完成了通过单击按钮生成随机数，随机数在 1 到 4 之间生成。

我的问题是如何将 4 张图片与这些数字相关联？假设如果 1 随机出现 - 那么应该显示 1.jpg。我的编程语言是 c#，在 Visual Studio 2012 中工作。

```
public sealed partial class MainPage : Page

{

   Random rand = new Random();

 public MainPage()
    {

        this.InitializeComponent();
    }

    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        int num=rand.Next(1,5);
        textblock1.Text=num.ToString();
    }}} 
```

***我在文本块中显示数字。现在我有 4 张图像必须随机显示。我的问题是如何以及在何处显示它们。***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T04:20:58.203

完成使用此方法

```
private void Button_Click_1(object sender, RoutedEventArgs e)

    {

        Random rand = new Random();
        int dice = rand.Next(1, 5);

        switch (dice)
        {
            case 1:

                Image1.Source = new BitmapImage(new Uri(@"ms-appx:///Assets/1.png"));

                break;
            case 2:

                two.Source = new BitmapImage(new Uri(@"ms-appx:///Assets/2.png"));
                break;
            case 3:

                three.Source = new BitmapImage(new Uri(@"ms-appx:///Assets/3.png"));
                break;
            case 4:

                four.Source = new BitmapImage(new Uri(@"ms-appx:///Assets/4.png"));
                break;

        }

    }for bitmap image refrence will be "using Windows.UI.Xaml.Media.Imaging;" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:42:07.140

您可以将生成的数字替换为文件名，例如：

```
string.Format("{0}.jpg", generatedNumber); 
```

非常少的代码，不需要“if”或“switch”。

我还将制作一个单独的组件 (I)FileNameResolver，其中包含确定正确文件名和错误处理的逻辑；并在你的代码中使用那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:44:03.057

关于什么：

```
Random rand = new Random();

Bitmap GetRandomImage(){
    Bitmap bmp;
    int n = rand.Next(0, 4);

    if(n == 0)
       bmp = new Bitmap("mypath1");
    else if(n == 1)
       bmp = new Bitmap("mypath2");
    else if(n == 2)
       bmp = new Bitmap("mypath3");
    else
       bmp = new Bitmap("mypath4");

    return bmp;
} 
```

或者您可以重命名文件并使用以下内容：

```
Random rand = new Random();

Bitmap GetRandomImage(){
    int n = rand.Next(0, 4);

    return new Bitmap(string.Format("mypath\\{0}.jpg", n));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-28T23:32:55.727

随机 rand = new Random(); int randomPosition = rand.Next(0, 9);

```
 lblEnglish.Text = sw.EnglishHeartSentence[randomPosition];
            lblShona.Text = sw.shonaSentence[randomPosition];
            switch (randomPosition)
            {
                case 0:
                    mainPicBox.Image = Funda_isizulu_.Properties.Resources.diarrhea_900x600px;
                    break;
                case 1:
                    mainPicBox.Image = Funda_isizulu_.Properties.Resources.hunger1; ;
                    break;
                case 2:
                    mainPicBox.Image = Funda_isizulu_.Properties.Resources.stomachache1;
                    break;
                case 3:
                    mainPicBox.Image = Funda_isizulu_.Properties.Resources.full_clipart_1;
                    break;
                case 4:
                    mainPicBox.Image = Funda_isizulu_.Properties.Resources.Top_10_Foods_To_Relieve_Menstrual_Cramps_1;
                    break;
                case 5:
                    mainPicBox.Image = Funda_isizulu_.Properties.Resources.preg;
                    break;
                case 6:
                    mainPicBox.Image = Funda_isizulu_.Properties.Resources.belly;
                    break;
                case 7:
                    mainPicBox.Image = Funda_isizulu_.Properties.Resources.a_man_with_visible_spine_holds_his_back;
                    break;
                case 8:
                    mainPicBox.Image = Funda_isizulu_.Properties.Resources.bell;
                    break;
                case 9:
                    mainPicBox.Image = Funda_isizulu_.Properties.Resources.coffee_growl_905;
                    break;

            } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-12T17:43:02.150

呃，

```
switch (number)
{
    case 1:
        return "1.jpg";
    case 2:
        return "2.jpg";
    case 3:
        return "3.jpg";
    case 4:
        return "4.jpg";
    default:
        throw ArgumentException("number");
} 
```

* * *

这一切都取决于，

怎么样，

```
private static readonly WhateverTypeMyImagesNeedToBe[] images =
    {
        new WhateverTypeMyImagesNeedToBe("1.jpg"),
        new WhateverTypeMyImagesNeedToBe("2.jpg"),
        new WhateverTypeMyImagesNeedToBe("3.jpg"),
        new WhateverTypeMyImagesNeedToBe("4.jpg")
    }

private static WhateverTypeMyImagesNeedToBe GetRandomImage()
{
    return images[new Random().Next(0, images.Length)];
} 
```

# .net - 从程序集中获取信息而不加载它

> ID：15368237
> 
> 赞同：3
> 
> 时间：2013-03-12T17:38:45.727
> 
> 标签：.net, reflection, .net-assembly

我的应用程序有一个插件结构，它将 dll（沼泽标准 .NET 程序集）作为插件加载。我有一个应用程序范围的选项，可以直接从磁盘加载这些 dll ( `Assembly.LoadFrom(file)`)，也可以先将 dll 复制到内存中，然后从字节数组 ( `Assembly.Load(IO.File.ReadAllBytes(file))`) 加载。

我想为插件开发人员添加选项，以选择他们是否要强制执行特定的加载行为。我想我会为此使用 AssemblyAttributes，然后 ReflectionOnly 加载 dll 以查看是否定义了属性。但是，我无法使用 GetCustomAttributesData 获取此信息，因为 dll 依赖于其他尚未加载反射的程序集。我现在发现自己陷入了一场卡夫卡式的打地鼠游戏。

插件开发人员在真正加载他们的 dll 之前与我的应用程序进行通信的好方法是什么？AssemblyAttributes 是要走的路吗，如果是这样，我如何确保仅反射加载永远不会失败？

编辑：

我引用了 Mono.Cecil 来迭代程序集属性。我第一次使用塞西尔，希望我做得对。我的开发人员机器上的初始测试似乎有效。

```
Private Function ExtractAssemblyLoadBehaviour(ByVal file As String) As GH_LoadingBehaviour
  Try
    If (Not IO.File.Exists(file)) Then Return GH_LoadingBehaviour.ApplicationDefault

    Dim assembly As AssemblyDefinition = AssemblyDefinition.ReadAssembly(file)
    If (assembly Is Nothing) Then Return GH_LoadingBehaviour.ApplicationDefault

    Dim attributes As Collection(Of CustomAttribute) = assembly.CustomAttributes
    If (attributes Is Nothing) Then Return GH_LoadingBehaviour.ApplicationDefault
    For Each Attribute As CustomAttribute In attributes
      Dim type As TypeReference = Attribute.AttributeType
      If (type.FullName.Contains("GH_CoffLoadingAttribute")) Then Return GH_LoadingBehaviour.ForceCOFF
      If (type.FullName.Contains("GH_DirectLoadingAttribute")) Then Return GH_LoadingBehaviour.ForceDirect
    Next

    Return GH_LoadingBehaviour.ApplicationDefault
  Catch ex As Exception
    Return GH_LoadingBehaviour.ApplicationDefault
  End Try
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:08:00.593

仅反射加载仍会加载内容，因此一旦您完成了该操作，就为时已晚。

一种选择是在单独的 AppDomain 中执行仅反射加载，然后将结果返回给您的主代码，并丢弃新的 AppDomain。

使用属性的替代方法是要求插件开发人员包含某种清单文件（例如文本或 XML），其中包含您需要的任何信息或选项。

# dms - 如何安装和配置 Hummingbird DM 服务器、DM 客户端

> ID：15368243
> 
> 赞同：0
> 
> 时间：2013-03-12T17:38:55.787
> 
> 标签：dms, dm, opentext

我想为记录管理安装 Hummingbird DM 5.1。为此，我安装了 DM Server、RM Server 和 RM Client。但这似乎还没有完成。

我必须安装 DM Web Server 和 DM Admin Tool 吗？

谢谢

普拉卡什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T07:09:36.400

先决条件： 1\. Net Framework 2.0 或以上 2\. 安装程序：\Server\DM Extensions Server Setup-English\Setup.exe

1.  运行 \Server\DM Extensioins 服务器设置安装程序
2.  保留默认安装媒体位置（即 \Server\DM Extension Server Setup-English）
3.  保留默认安装目标文件夹（即 C:\Program Files\Hummingbird\DM Extensions）
4.  这部分是集成发生的地方。
    *   DM 应用程序集成\Microsoft 应用程序\Microsoft Excel\Microsoft Excel 主动集成\通过 ODMA > 使用前端分析。
    *   DM 应用程序集成\Microsoft 应用程序\Microsoft Word\Microsoft Excel 主动集成\通过 ODMA > 使用前端分析。
    *   DM Application Integration\Microsoft Application\Microsoft Powerpoint\Microsoft Excel Active Integration\via ODMA > with Front-End Profiling。
    *   DM 应用程序集成 > Windows Explorer DM 扩展。
    *   DM查看器
5.  然后点击下一步进行安装。
6.  选择服务器名称。然后单击下一步。
7.  必须重新启动才能应用安装。

到目前为止的问题：此安装设置使用的是 Office 2000，打开 excel 文件时出现问题，其余的都可以。(word, ppt and pdf) Office 2007，是互惠的。Excel没有问题，但打开word和ppt记录有问题。

如果您或某人能够调试此集成问题。请给我留言。谢谢，我希望这会有所帮助。

# font-face - PhantomJS 渲染页面字体

> ID：15368244
> 
> 赞同：9
> 
> 时间：2013-03-12T17:39:03.853
> 
> 标签：font-face, phantomjs, casperjs

我正在使用 PhantomJS 截取网页截图。

我看过其他关于@font-face 问题的帖子，但我页面上的字体呈现正确。我遇到的唯一问题是，每次我截取屏幕截图时，字体显示的内容都与之前的屏幕截图略有不同。因此，尽管它们渲染正确，但它们在屏幕截图上的外观却不一致。

我已经尝试了许多修复，大多数基于这样的假设，即它与在页面准备好之前截取的屏幕截图有关，但这似乎不是问题。例如，我延迟了截屏，以便字体有时间加载和渲染，但这并不能解决问题。

我曾尝试绑定到各种页面事件，但同样没有运气。

我附上了屏幕截图以显示差异。问题是，我需要渲染的屏幕截图在我使用它的上下文中是准确的。

![截图 1](../Images/6e27ad1b993811a3ba30726ac268c472.png) ![截图 2](../Images/54764deaebedc5e9f701c1864227f32e.png)

作为说明，我也尝试过 CasperJS（知道它基于 PhantomJS，所以不希望它有任何不同）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:16:34.517

您是否厌倦了观看[DOM 中的字体相关](https://stackoverflow.com/questions/6677181/how-to-know-when-font-face-has-been-applied)事件？您也可以尝试每隔 X 秒截取一次屏幕截图，生成瞬间概览（请注意，这会产生大量空白和重复的图像。如果这是一个问题，请尝试简单地设置最小文件大小或检查是否有两个文件大小相同）。

```
var page = require('webpage').create();

page.open("http://www.slashdot.org", function (status) {
    phantom.exit();
}); 

var i = 0;
setInterval(function() {

    i += 1;
    page.render("/tmp/screenshots/screenshot-" + i + ".png");

}, 50); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T14:08:28.537

您可以使用以下方法延迟屏幕截图：

```
var page = new WebPage();
page.open('http://stackoverflow.com/', function (status) {
        just_wait();
});

function just_wait() {
    setTimeout(function() {
            page.render('screenshot.png');
            phantom.exit();
    }, 2000);
} 
```

在这里，您的屏幕截图是在页面加载后 2000 毫秒拍摄的。相应地设置延迟以允许页面完全加载所有资源。

# php - 匹配字符串中的特定单词并对其进行分类

> ID：15368246
> 
> 赞同：2
> 
> 时间：2013-03-12T17:39:13.197
> 
> 标签：php

我对 PHP 很陌生，所以请耐心等待。我正在尝试遍历文本字符串中的单词，查找特定单词，对它们进行分类，然后计算每个单词类别被击中的次数。我能够完成简单的部分，但我在计算每个类别匹配的次数时遇到问题。这是接受我的字符串的主要函数：

```
public function matchThemeTest($query){
    $marriageNum = 0;
    $criminalNum = 0;
    $contactNum = 0;
    $keywords = array(
        'background'=> array('category'=>'criminal'),
        'marriage'  => array('category'=>'marriage'), 
        'criminal'  => array('category'=>'criminal'),
        'arrest'    => array('category'=>'criminal'),
        'divorce'   => array('category'=>'marriage'),
        'person'    => array('category'=>'contact'),
        'contact'   => array('category'=>'contact')
    );
    foreach (preg_split("/\s/", $query) as $word)
    {
        if (isset($keywords[$word]))
        {
            echo $keywords[$word]['category'];
            if ($keywords[$word]['category'] == 'marriage') {
                $marriageNum++;
            }
            echo $marriageNum;
        }
    }
    //return reset($matches);
} 
```

我在这里有一个 php fiddle 设置：http: [//phpfiddle.org/main/code/i4g-mdu](http://phpfiddle.org/main/code/i4g-mdu)我一直在玩。以目前的形式，我可以将单词分类，但我不确定如何计算每个类别匹配的次数。我觉得我需要一个额外的循环或一些简单的计算，但我不确定在哪里。任何意见是极大的赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:53:40.050

您可能需要另一个数据数组来存储计数。使用这样的数组：

```
$counts = array(
    'criminal' => 0,
    'marriage' => 0, 
    'contact' => 0
); 
```

然后，当您遍历 foreach 循环时，您可以使用 $keywords[$word]['category'] 作为 $counts 中的键并递增它：

```
if(isset($keywords[$word]) {
    $counts[$keywords[$word]['category']]++;
} 
```

然后您可以返回 $counts 数组，以便调用者可以使用它来找出每个主题的计数：

```
return $counts; 
```

# ruby - Ruby - NameError：访问派生类的名称时未初始化的常量

> ID：15368248
> 
> 赞同：1
> 
> 时间：2013-03-12T17:39:17.307
> 
> 标签：ruby, reflection

我有从 A 类派生的 B 类，例如：

```
class A
..
end

class B < A
...
end 
```

在另一个文件中，我定义了一个变量 M

```
M = B 
```

然后我得到了错误

```
"NameError: uninitialized constant B". 
```

我只是发现如果我写

```
M=A
M=B 
```

然后就可以了。看来我必须以某种方式初始化 A 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:28:44.887

由于这些文件与 rails 没有关系，我们假设它们是系统上任何文件夹中的两个单独文件。假设它们在同一个目录中。

class_def.rb：

```
class A
  def self.talk
    puts 'hello'
  end
end

class B < A
  def self.talk
    super()
    puts 'world'
  end
end 
```

亚军.rb：

```
require './class_def.rb'
M=B
M.talk 
```

调用 ruby​​ runner.rb 应该产生输出

```
hello
world 
```

但是我注意到使用 RubyFiddle 的相同错误

w/调用方法[http://rubyfiddle.com/riddles/1d8e2](http://rubyfiddle.com/riddles/1d8e2)

w/oa 调用方法[http://rubyfiddle.com/riddles/1d8e2/](http://rubyfiddle.com/riddles/1d8e2/)

# php - 无法从 $_FILES 获得价值

> ID：15368249
> 
> 赞同：2
> 
> 时间：2013-03-12T17:39:17.710
> 
> 标签：php, html

我只是没有从 $_FILES["file"]["name"]、$_FILES["file"]["type"] 等获取字符串。这是我第一次使用 $_FILES。我可以通过哪种方式改进代码以便从字符串中获得回声？我已经阅读了每个教程。这是代码：

```
<html>
<head>
</head>
<body>

<form action="" method="POST" enctype="multipart/form-data" >

<input type="file" name="file">

<input type="submit" value="Submit">

</form>

<?php

if(isset($_POST['submit']))
{
   if ($_FILES["file"]["error"] > 0)
   {
       echo "Error: " . $_FILES["file"]["error"] . "<br />";
   }
   else
   {
       echo "Upload: " . $_FILES["file"]["name"] . "<br />";
       echo "Type: " . $_FILES["file"]["type"] . "<br />";
       echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
       echo "Stored in: " . $_FILES["file"]["tmp_name"];
   }
}
?>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T17:41:44.307

您的提交输入没有名称属性，因此在提交表单时无法发送其值。将其名称属性设置为提交，您的 isset 检查将通过

```
<input type="submit" name="submit" value="Submit"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-26T08:01:24.210

```
<input type="submit" value="Submit" name="submit" > 
```

在提交输入您的代码运行时使用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:44:03.973

使用 print_r($_FILES); 不回声

你检查

如果（isset（$_POST['提交']））{

但是您的表单中缺少 name="submit" 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T17:42:51.833

尝试

```
<?php

if(isset($_POST['submit'])) {
     var_dump($_FILES);
     //OR
     print_r($_FILES);
}

?> 
```

# opengl - openGL：纹理和三角形不渲染

> ID：15368250
> 
> 赞同：1
> 
> 时间：2013-03-12T17:39:26.833
> 
> 标签：opengl

如果我注释掉`DrawGLScene()`，我会看到一个大的*阴影*三角形，如果我注释掉，`drawtri()`我会看到一个方形纹理。但我无法将两者结合起来——当两个函数都被调用时，我只看到三角形*轮廓*，并且纹理是使用强红色滤镜渲染的。

可能是什么问题呢？

```
void DrawGLScene()
{
    int x, y;
    float float_x, float_y, float_xb, float_yb;
    float x0=0,y0=0,x1=10,y1=10,z=-3;

    // glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);      // Clear The Screen And The Depth Buffer
glEnable(GL_TEXTURE_2D);
    glLoadIdentity();               // Reset The View
    glTranslatef(0.0f,0.0f,-12.0f);              // move 12 units into the screen.

    glBindTexture(GL_TEXTURE_2D, texture[0]);   // choose the texture to use.

    glPolygonMode(GL_BACK, GL_FILL);
    glPolygonMode(GL_FRONT, GL_LINE);

    glBegin(GL_QUADS);

        glTexCoord2f( 0,0);
        glVertex3f( x0, y0, z );

        glTexCoord2f( 0, 1 );
        glVertex3f( x0, y1, z );

        glTexCoord2f( 1, 1);
        glVertex3f( x1, y1, z );

        glTexCoord2f( 1, 0 );
        glVertex3f( x1, y0,z );
    glEnd();
   glDisable(GL_TEXTURE_2D);
    // since this is double buffered, swap the buffers to display what just got drawn.
    //  glutSwapBuffers();
}

void drawtri() {
    glBegin(GL_TRIANGLES);                  
        glColor3f(0.0f,0.0f,1.0f);          
        glVertex3f( 0.0f, 1.0f, 0.0f);      
        glColor3f(0.0f,1.0f,0.0f);          
        glVertex3f(-1.0f,-1.0f, 0.0f);      
        glColor3f(1.0f,0.0f,0.0f);          
        glVertex3f( 1.0f,-1.0f, 0.0f);      
    glEnd();
}
void zdisplay() 
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);          // Clear Screen and Depth Buffer

    glLoadIdentity();
    glTranslatef(0.0f,0.0f,-3.0f);          

    //drawtri();
    DrawGLScene();

    glutSwapBuffers();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:01:32.473

在调用这两个函数时，您是否真的按照代码显示的顺序调用了这些方法？因为我怀疑顺序颠倒了。如果我是对的，我认为您必须在绘制三角形时重置 glPolygonMode。尝试在调用 glBegin(GL_TRIANGLES) 之前添加 glPolygonMode(GL_FRONT_AND_BACK, GL_FILL)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:56:22.940

红色滤镜是由应用的颜色引起的：

```
glColor3f(0.0f,0.0f,1.0f); 
```

在绘制四边形之前将颜色重置为白色：

```
glColor3f(1.0f,1.0f,1.0f); 
```

大纲是由以下规范引起的：

```
glPolygonMode(GL_FRONT, GL_LINE); 
```

指定填充模式：

```
glPolygonMode(GL_FRONT, GL_FILL); 
```

# polygon - 坐标顺序会影响Java中多边形的绘制吗

> ID：15368251
> 
> 赞同：3
> 
> 时间：2013-03-12T17:39:31.327
> 
> 标签：polygon

我在问是否有任何特定的顺序需要我输入我的一组坐标以使用 Java 中的 Graphics2D 类绘制多边形。

例如，对于 X 和 Y 坐标数组，我的坐标 (X,Y) 的值是否需要按降序/升序排列？

或者另一个例子是，如果我想绘制一个多边形并且我有 4 组点，topleft、topright、bottomright 和 bottomleft，我只需按此顺序将它们输入到 Java 中的 drawPolygon 方法，以获得一个角对应于所有这些的绘制多边形4分。

或者我可以以任何随机顺序排列我的坐标？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T20:51:58.610

一般来说，要了解多边形填充，您必须了解**边缘方向**、**缠绕顺序**和选定的**多边形填充规则**。

边方向由声明顶点的顺序决定。例如 ...

```
Polygon poly= new Polygon();
poly.addPoint(10, 10);
poly.addPoint(100, 10);
poly.addPoint(100, 100);
poly.addPoint(10, 100); 
```

多边形是通过连接相邻的顶点（从一个有序的顶点列表中）形成的边来绘制的。列表中的最后一个顶点也加入第一个顶点（好像列表是圆形的）。上面多边形中的第一条边由前两个顶点构成——Point(10,10) 和 Point(100,10)。

每当多边形自相交或重叠时，要了解如何绘制多边形，您需要了解**缠绕顺序**和应用的**多边形填充规则**。当多边形重叠时，会创建多边形子区域 - 由边缘包围的离散区域。这些子区域的缠绕顺序和应用的多边形填充规则决定了这些子区域是否被填充。

[![](../Images/dbded2c9cd5e8150539397ce42945444.png)](https://i.stack.imgur.com/YBqNw.png)
[（来源：[angusj.com](http://www.angusj.com/delphi/clipper/documentation/Images/winding_number.png)）]

任何给定多边形子区域的**绕组数可以通过以下方式得出：**

*   将绕组计数设置为零
*   从给定子区域内的一个点 (P1)，画一条假想的水平线到一个或多个多边形 (P2) 之外的另一个点
*   在从 P1 到 P2 遍历这条线时，对于穿过这条假想线的每个多边形边缘 - 如果它朝上，则增加绕组计数，否则减少绕组计数。

根据 Java Graphics2D[文档](https://web.archive.org/web/20130907223710/http://docs.oracle.com:80/javase/1.4.2/docs/api/java/awt/Graphics.html#fillPolygon(java.awt.Polygon))，**fillPolygon**仅使用**奇偶填充规则**，其中仅填充奇数子区域。

[![](../Images/c3582118bd69a17466232b007bee3136.png)](https://i.stack.imgur.com/mvoJJ.png)
[（来源：[angusj.com](http://www.angusj.com/delphi/clipper/documentation/Images/evenodd.png)）]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:00:42.293

多边形从每个点绘制到下一个点。

因此，一条边的两个点必须是您提交给 DrawPolygon 的点列表中的邻居。

如果要在点 A、B、C 和 D 之间绘制多边形，则需要按顺序提交这些点

*   A、B、C、D 或
*   D、A、B、C 或
*   C,D,A,B 或
*   B、C、D、A 或
*   D、C、B、A 或
*   A,D,C,B 或
*   B、A、D、C 或
*   C、B、A、D 或

A、B、C 和 D 的所有其他组合将生成具有相同点但不同边的多边形

如果您使用上述命令之一，这是您得到的多边形

```
A------B
|      |
|      |
|      |
D------C 
```

如果您使用例如 A、B、D、C，这是您得到的多边形

```
A------B
 \    /
  \  /
   *
  / \
 /   \
D-----C 
```

# asp.net-mvc - ServiceStack 新服务并排 ASP.NET MVC 网站

> ID：15368257
> 
> 赞同：28
> 
> 时间：2013-03-12T17:40:08.490
> 
> 标签：asp.net-mvc, servicestack

在 ServiceStack 的[示例](https://github.com/ServiceStack/ServiceStack.Examples)中，我没有看到一个应用程序首先是 ASP.NET MVC 网站，然后是 ServiceStack 服务。

让我们看一个非常简单的 ASP.NET MVC Web 应用程序，它通过 Views 呈现产品。它使用控制器、视图、模型和视图模型。

假设我们有一个模型`Product`被持久化到一个文档数据库中。假设我们有一个从MVC Razor View/PartialView`ProductViewModel`映射并显示的视图模型。`Product`

所以这是网络方面的事情。现在假设我们想要向各种客户端（如 Windows 8 应用程序）添加返回产品的服务。

请求/响应类是否应该与我们已有的完全断开？我们`ProductViewModel`可能已经包含了我们想要从服务返回的所有内容。

由于我们已经有了`Product`（模型类），我们不能`Product`在 API 命名空间中有另一个类。我们可以，但这会让事情变得不清楚，我想避免这种情况。

那么，我们是否应该在 API 命名空间中引入独立`ProductRequest`类和`ProductRequestResponse`（继承 ProductViewModel）类？

像这样`ProductRequestResponse : ProductViewModel`？

我要说的是，我们已经有了 Model 和 ViewModel 类，并且要为 SS 服务构建 Request 和 Response 类，我们必须创建另外两个文件，主要是通过从我们已有的类中复制所有内容。这在我看来并不 DRY，它可能遵循关注点分离准则，但 DRY 也很重要，实际上不仅仅是分离所有内容（分离所有内容会导致代码重复）。

我想看到的是一个已经制作了 Web 应用程序的情况，它当前具有模型和视图模型并返回适当的视图以在 Web 上显示，但可以扩展为功能齐全的服务以支持程序化客户端？像 AJAX 客户端等......我们已经拥有的。

另一件事：

如果你看看这个例子[https://github.com/ServiceStack/ServiceStack.Examples/blob/master/src/ServiceStack.MovieRest/MovieService.cs](https://github.com/ServiceStack/ServiceStack.Examples/blob/master/src/ServiceStack.MovieRest/MovieService.cs)

你会看到有`Movie`请求类和`Movies`请求类（一个用于单个电影请求，另一个用于电影列表）。因此，还有两个服务，`MovieService`一个`MoviesService`处理对单个电影的请求，另一个处理一个类型的电影。

现在，虽然我喜欢 SS 服务方法并且我认为它是正确的方法，但我不喜欢这种仅仅因为请求类型的分离。如果我想要导演的电影怎么办？我会为它发明另一个具有`Director`属性和另一个服务（`MoviesByDirector`）的请求类吗？

我认为样本应该面向一项服务。与电影打交道的一切都需要集中在一个屋檐下。如何使用 ServiceStack 实现这一目标？

```
public class ProductsService : Service
{
    private readonly IDocumentSession _session;
    private readonly ProductsHelperService _productsHelperService;
    private readonly ProductCategorizationHelperService _productCategorization;

    public class ProductRequest : IReturn<ProductRequestResponse>
    {
        public int Id { get; set; }
    }

    // Does this make sense? 
    // Please note, we use ProductViewModel in our Views and it holds everything we'd want in service response also
    public class ProductRequestResponse : ProductViewModel
    {
    }

    public ProductRequestResponse GetProducts(ProductRequest request)
    {
        ProductRequestResponse response = null;
        if (request.Id >= 0)
        {
            var product = _session.Load<Product>(request.Id);
            response.InjectFrom(product);
        }
        return response;
    }
} 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-03-12T18:54:35.040

## 服务层是你最重要的契约

您可以在整个系统中创建的最重要的接口是面向外部的服务合同，这是您的服务或应用程序的消费者将绑定到的，即通常不会与您的代码一起更新的现有调用站点-base - 其他所有模型都是次要的。

### DTO 是远程服务的最佳实践

遵循[Martin Fowler对远程服务 (](http://martinfowler.com/eaaCatalog/dataTransferObject.html) [MSDN](http://msdn.microsoft.com/en-us/library/ff649585.aspx) ) 使用 DTO （数据传输对象）的建议，[ServiceStack](http://www.palmmedia.de/Blog/2011/8/30/ioc-container-benchmark-performance-comparison)鼓励使用干净、无污染的 POCO 来定义定义良好的合同，该合同应在很大程度上保持在实现中且无依赖。 dll。[这样做的好处是，您可以在C#/.NET 客户端](https://github.com/ServiceStack/ServiceStack/wiki/Clients-overview)中重新使用用于定义服务的类型化 DTO——提供端到端类型化 API，而无需使用任何代码—— gen 或其他人造机械。

### 干燥与意图

保持 DRY 不应与明确说明意图相混淆，您应该避免尝试 DRY 或[隐藏在继承](http://ayende.com/blog/4769/code-review-guidelines-avoid-inheritance-for-properties)、魔术属性或任何其他机制后面。拥有干净、定义明确的 DTO 提供了一个单一的参考来源，任何人都可以查看每个服务接受和返回的内容，它允许您的客户端和服务器开发人员立即开始他们的工作并绑定到外部服务模型而无需实现被写了。

保持 DTO 分离还可以让您在不破坏外部客户端的情况下自由地从内部重构实现，即您的服务开始缓存响应或利用 NoSQL 解决方案来填充您的响应。

它还提供了用于创建自动生成的元数据页面、示例响应、Swagger 支持、XSD、WSDL 等的权威源（不会泄露或耦合到您的应用程序逻辑中）。

### [使用 ServiceStack 的内置自动映射](https://github.com/ServiceStack/ServiceStack/wiki/Auto-mapping)

虽然我们鼓励保留单独的 DTO 模型，但您不需要维护自己的手动映射，因为您可以使用[AutoMapper](https://github.com/AutoMapper/AutoMapper)之类的映射器或使用 ServiceStack 的内置自动映射支持，例如：

创建一个新的 DTO 实例，在 viewModel 上填充匹配的属性：

```
var dto = viewModel.ConvertTo<MyDto>(); 
```

初始化 DTO 并在视图模型上使用匹配的属性填充它：

```
var dto = new MyDto { A = 1, B = 2 }.PopulateWith(viewModel); 
```

**初始化 DTO 并在视图模型上使用非默认**匹配属性填充它：

```
var dto = new MyDto { A = 1, B = 2 }.PopulateWithNonDefaultValues(viewModel); 
```

初始化 DTO 并使用在视图模型上用**Attr**属性注释的匹配属性填充它：

```
var dto = new MyDto { A=1 }.PopulateFromPropertiesWithAttribute<Attr>(viewModel); 
```

当映射逻辑变得更加复杂时，我们喜欢使用扩展方法来保持代码 DRY 并将映射维护在一个可以在您的应用程序中轻松使用的地方，例如：

```
public static class MappingExtensions
{
    public static MyDto ToDto(this MyViewModel viewModel)
    {
        var dto = viewModel.ConvertTo<MyDto>();
        dto.Items = viewModel.Items.ConvertAll(x => x.ToDto());
        dto.CalculatedProperty = Calculate(viewModel.Seed);
        return dto;
    }
} 
```

现在只需：

```
var dto = viewModel.ToDto(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T22:36:50.610

如果您没有专门与 ServiceStack 绑定，只是想要“功能齐全的服务来支持编程客户端......我们已经拥有的”，您可以尝试以下操作：让您的控制器根据请求的接受标头返回 a`ViewResult`或 a -或。 `JsonResult``Request.AcceptTypes.Contains("text/html")``Request.AcceptTypes.Contains("application/json")`

两者`ViewResult`和`JsonResult`都是`ActionResult`，因此动作的签名保持不变，并且都`View()`接受`Json()`ViewModel 。此外，如果您有一个 ControllerBase，您可以创建一个调用 View() 或 Json() 的基本方法（例如`protected ActionResult RespondWith(Object viewModel)`），因此对现有代码的更改是最小的。

当然，如果您的 ViewModel 不是纯的（即有一些特定于 html 的东西，或者您依赖于一些 ViewBag 魔法），那么它的工作量就更大了。而且您不会获得 ServiceStack 提供的 SOAP 或其他绑定类型，但如果您的目标是支持 JSON 数据接口，而对现有 MVC 应用程序的代码更改最少，那么这可能是一个解决方案。

脂蛋白

# asp.net - MVC 3 OrderByDescending 不起作用

> ID：15368271
> 
> 赞同：2
> 
> 时间：2013-03-12T17:40:48.583
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, entity-framework

我在这里遵循了 ASP.Net 教程，效果很好：[http ://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-与-the-entity-framework-in-an-asp-net-mvc-application](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application)

现在我自己尝试，它似乎不起作用。我一般是编程新手，所以请像我 7 岁一样跟我说话。谢谢！

控制器：

```
 public ViewResult Index(string sortOrder)
    {
        ViewBag.CurrentSort = sortOrder;
        ViewBag.NameSortParm = String.IsNullOrEmpty(sortOrder) ? "Name desc" : "";

        var students = from s in db.ComputerMaintenanceModels
                       select s;
        switch (sortOrder)
        {
            case "Name desc":
                students = students.OrderByDescending(s => s.Name);
                break;
        }
        return View(db.ComputerMaintenanceModels.ToList());
    } 
```

看法

```
@Html.ActionLink("Name", "Index", new { sortOrder=ViewBag.NameSortParm }) 
```

当我单击 Name 列时，它会处理，但 Order 不会改变。我错过了什么吗？我的代码正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:50:47.847

你会想要处理 case 语句的 CASE ASC 部分：

```
 switch (sortOrder)
            {
                case "Name desc":
                    students = students.OrderByDescending(s => s.Name);
                    break;
                case "Name asc":
                    students = students.OrderBy(s => s.Name);
                    break;
            }

return View(students.ToList()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:43:02.187

您正在生成一个查询，然后在您的 return 语句中忽略它。你应该使用类似的东西：

```
return View(students); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:48:12.740

你必须返回

```
return View(students.ToList()); 
```

反而

```
return View(db.ComputerMaintenanceModels.ToList()); 
```

因为 studens 是您保存查询的变量。如果您返回 db.ComputerMaintenanceModels.ToList() 您将继续使用相同的查询，没有顺序。

# python - 用于本地客户端-服务器通信的套接字与标准流

> ID：15368272
> 
> 赞同：8
> 
> 时间：2013-03-12T17:40:51.683
> 
> 标签：python, sockets, air, stdout, stdin

我有一个由本地“服务器”和 GUI 客户端组成的应用程序。服务器是用 Python 编写的，而 GUI 是可变的，并且是用 Flex 4 编写的。客户端查询本地服务器的信息并相应地显示它。这两个应用程序都应该在同一台计算机上运行，​​并且只会在本地进行通信。目前，客户端和 Python 服务器通过一个基本的套接字进行通信，客户端向套接字写入请求，套接字返回一些数据。

但是，由于我正在编写一个桌面应用程序，我认为使用标准流而不是套接字的系统可能更容易维护和完善。服务器将`raw_input()`持续侦听，并根据写入 stdin 的任何内容进行输出，在这种情况下，客户端将使用 AIR 的`NativeProcess`类来读取和写入 stdout 和 stdin，而不是使用套接字。

客户端和服务器是独立的进程，但应该或多或少同时启动。我真的不需要复杂的网络，只需要本地跨语言交流。

每种方法的优缺点是什么？使用套接字我会得到什么或失去什么，而使用标准流进行通信我会得到什么或失去什么？哪个效率更高？哪一个更容易维护？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T18:31:44.270

在类 UNIX 平台上，使用 stdin/stdout 是一个套接字，所以没有区别。也就是说，如果您启动一个重定向其 stdout 的进程，通常会使用 socketpair 来完成，因此不需要让您自己的 UNIX 域套接字进行通信。但是，用于处理标准输入/标准输出的 Python 类不会让您访问底层套接字的全部灵活性，因此您必须自己设置它，我认为如果您想做半关闭，例如（Python不能提供跨平台，因为 Windows sys::stdin 不能是套接字，例如，它也不总是在 UNIX 上。）

本地 TCP 连接的好处是它是跨平台的，并且在任何地方都提供可预测的语义。例如，如果您希望能够关闭输出并仍然从输入中读取，那么使用在任何地方都相同的套接字来做这种事情要简单得多。即使没有这个，为简单起见，使用 TCP 套接字始终是解决 Windows 命名管道的古怪混乱的一种合理方法，尽管 Python 可以很好地保护您免受这种影响。

# c# - 正则表达式脑筋急转弯 - 匹配“外键”但不匹配“外键”

> ID：15368278
> 
> 赞同：1
> 
> 时间：2013-03-12T17:41:02.637
> 
> 标签：c#, regex

仍然习惯于正则表达式中的环视，但似乎无法获得

```
\b(?>! key)foreign\b 
```

成为正确的解决方案？我试图在某些文本中查找单词 foreign 的所有实例，但不是外键或外键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:45:12.590

怎么样：`\bforeign(?!\s?key)\b`

示例：[http ://regexr.com?343k9](http://regexr.com?343k9)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T17:46:18.783

前瞻需要在之后`foreign`（并且您不需要`>`）：

```
\bforeign(?! key)\b 
```

单词边界将处理这种`foreignkey`情况。

# css - 与 firefox 一起工作正常，但在 google chrome 和浏览器调整大小方面有一些问题？

> ID：15368284
> 
> 赞同：0
> 
> 时间：2013-03-12T17:41:33.200
> 
> 标签：css, google-chrome

我已经创建了菜单。这在 Firefox 中工作得很好，但在 google chrome 中，悬停不显示。此外，当我调整浏览器的大小时，菜单的一部分隐藏且不可滚动，我尝试使用 MENU `width:100%;`，但是当我这样做并调整浏览器的大小时，类布局被扭曲并显示在菜单行之外，菜单被扭曲。有没有办法解决这个问题：所以我强行将菜单的宽度定义为 1366px 以避免菜单失真。请帮忙。

```
#mainmenu {
    width:1366px;
    height:50px; 
    /*position:relative;*/
    position:fixed;
    top:18px;
    padding-left:200px;  
    line-height:50px;
    background:#0b2c3d;
    z-index:10;      
    box-shadow:5px 0px 15px #7e7a7a; 
}
#mainmenu, #dd_home, #dd_profile, #dd_achv, #dd_contact,#dd_login {
    cursor:pointer;
}
#mainmenu ul {
    list-style-type:none;
    margin:0px;
    padding:0px;        
}
#mainmenu ul li {
    text-decoration:none;
    float:left;
    /*border-right-style:dotted;*/
}
#mainmenu ul li a {
    text-decoration:none;
    display:block;
    width:150px;
    text-align:center;
    text-transform:uppercase;           
    color:white;
}
#mainmenu ul li.home {
    width:150px;
    text-align:center;
    margin-top:-5px;
    border-bottom:5px solid #0a68fb;
}
#mainmenu ul li.home:hover {
    display:block;
    background-color:#0a68fb;
    border-top-left-radius:5px;
    border-top-right-radius:5px;
}
#mainmenu ul li.profile {
    margin-top:-5px;
    border-bottom:5px solid #ed4901;
}
#mainmenu ul li.profile:hover {
    display:block;
    background-color:#ed4901;
    border-top-left-radius:5px;
    border-top-right-radius:5px;
}
#mainmenu ul li.achv {
    margin-top:-5px;
    border-bottom:5px solid #27fb06;
}
#mainmenu ul li.achv:hover {
    display:block;
    background-color: #27fb06;
    border-top-left-radius:5px;
    border-top-right-radius:5px;
}
#mainmenu ul li.contact {
    margin-top:-5px;
    border-bottom:5px solid #b70bfb;
}
#mainmenu ul li.contact:hover {
    display:block;
    background-color:#b70bfb;
    border-top-left-radius:5px;
    border-top-right-radius:5px;
}
#mainmenu ul li.contact:checked {
    margin-top:-5px;
    border-bottom:10px solid #b70bfb;
}
#mainmenu ul li.login {
    margin-top:-5px;
    border-bottom:5px solid #36b096;
}
#mainmenu ul li.login:hover {
    display:block;
    background-color:#36b096;
    border-top-left-radius:5px;
    border-top-right-radius:5px;
}
#mainmenu ul li.nepal {
    margin-top:-5px;
    border-bottom:5px solid #f8d605;
    overflow:hidden;
} 
```

HTML

```
<div id="mainmenu">
    <ul>
        <li class="home"><a href="about.aspx"> Home</a>
        <li class="profile"><a href="profile.aspx" >Profile</a>
        <li class="achv"><a href="achv.aspx">achievements</a>
        <li class="contact"><a href="Contact.aspx">Contact</a>
        <li class="login"><a href="login.aspx">Log in</a>
        <li class="nepal"><a href="#">jaya nepal</a></li>
    </ul>
</div> 
```

**JSFiddle：** [jsfiddle.net/gzeLS](http://jsfiddle.net/gzeLS/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:04:22.493

`display:block`从您的`:hover`样式中删除：

[jsfiddle.net/gzeLS/1](http://jsfiddle.net/gzeLS/1/)

或者，添加`display:block`到非悬停样式：

[jsfiddle.net/gzeLS/2](http://jsfiddle.net/gzeLS/2/)

我不确定为什么 Chrome 不喜欢这样。我会说这是一个 Chrome 错误。

要调整菜单大小，请使用`max-width`和进行一些操作`min-width`。在文本开始重叠之前，您只能获得大约 600 像素宽。通过给菜单一个`min-width`.

[jsfiddle.net/gzeLS/3](http://jsfiddle.net/gzeLS/3/)

但是，正如您已经发现的那样，当窗口太小时，部分菜单会被隐藏。即使您`min-width`在 body 上设置 a 以显示滚动条，您仍然无法滚动菜单，因为您正在使用`position: fixed`. 如果窗口小于某个宽度，您最好的选择是使用媒体查询来缩小字体大小。

[jsfiddle.net/gzeLS/4](http://jsfiddle.net/gzeLS/4/)

**编辑：**这是我为获得[第三个 jsFiddle](http://jsfiddle.net/gzeLS/3/)所做的更改的细分，无论窗口大小如何，居中都可以工作。

*   要让菜单填满页面，而不是指定`width`，指定`left`和`right`。
*   要将菜单项置于中心位置：
    *   `text-align: center`在菜单上使用，而不是`padding`. 这将考虑不同的窗口大小。
    *   设置`display: inline-block`为`ul`使其可居中。
    *   设置`width`和`max-width`上`ul`。Using`width`允许我们`li`按百分比调整元素的大小，如果窗口太小，它们可以缩小。`max-width`让我们将菜单项实际居中，当窗口足够宽以适应全宽菜单时，在左右两边留出*边距*。
*   为防止屏幕太小时菜单项自动换行，请`white-space: nowrap`在`ul`.
*   当窗口太小而无法容纳整个菜单时，要防止菜单项的文本重叠：
    *   设置`min-width`在菜单上。
    *   设置`overflow: hidden`在菜单项上。
*   为简单起见，我还将列表项中的冗余样式按类合并到`li`选择器中。

这是我在[第四个 jsFiddle](http://jsfiddle.net/gzeLS/4/)中所做的更改，以使菜单适合较小的窗口并保持可见：

*   从菜单中删除`min-width`以使其缩小以适合窗口。
*   添加媒体查询样式以随着窗口大小的减小而逐渐减小字体大小：

```
@media all and (max-width: 640px) { #mainmenu { font-size: 90%; } }
@media all and (max-width: 590px) { #mainmenu { font-size: 80%; } }
@media all and (max-width: 530px) { #mainmenu { font-size: 70%; } }
@media all and (max-width: 468px) { #mainmenu { font-size: 60%; } } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:58:45.990

如果您进行这个小改动，例如在主页链接上：

```
#mainmenu ul li.home:hover 
```

**到**

```
#mainmenu ul li.home a:hover 
```

然后您会注意到您的悬停属性在 Chrome 和 Firefox 中正确显示。

[用于此修复的 JSFiddle](http://jsfiddle.net/MQ7D6/)

**更新**

[这是您的第二个问题的解决方法。](http://jsfiddle.net/MQ7D6/1/)

您需要将`text-align`主 div 的设置为以便在容器`center`中居中。`ul`典型的`margin: 0 auto;`行不通。我还添加了一个`white-space:nowrap;`以防止屏幕小于水平对齐的菜单项时中断。

希望这可以帮助。

# asynchronous - 如何延迟 AngularJS 应用程序初始化？

> ID：15368285
> 
> 赞同：9
> 
> 时间：2013-03-12T17:41:34.920
> 
> 标签：asynchronous, angularjs, promise

我有一些正在后台异步处理的数据，并希望延迟整个 AngularJS 应用程序的初始化，直到完成。

BackgroundData.initialized 是一个 Q 承诺，所以是这样的：

```
BackgroundData.initialized.then(AngularDoYoStuff) 
```

我遇到的问题是主页的控制器启动它的初始化过程，点击 BackgroundData 并且它有错误/没有数据。

我可以在什么函数中包装 Angular 的初始化，而不是仅仅等待 dom-ready，它同时等待 dom-ready 和 BackgroundData.initialization？

**更新**

我已经更接近了有关[手动引导](http://docs.angularjs.org/guide/bootstrap)的文档：

```
angular.element(document).ready ->
  setupGA()
  window.BackgroundData = new DataMachine()
  BackgroundData.initialized.then ->
    angular.bootstrap(document) 
```

但是当控制器文件加载时（在这个文件之后），它们仍然在定义 BackgroundData 之前被初始化

**更新 2**

删除`ng-app`HTML 中的指令似乎已经解决了问题（因为那是告诉 Angular 自动初始化）但现在它只是忽略了我所有的`angular.module`调用

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T18:15:57.083

问题是我将`ng-app`指令留在了 html 标记中，它告诉 Angular 自动初始化该范围。删除它可以让我的手动初始化正确运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-18T15:15:24.533

正如克里斯提到的，它可以用 angular.bootstrap 来完成，而不是提到 ng-app：

```
<div id="appArea" ng-controller="someCtrl">
  {{name}}
</div>

    <script>
    angular.module('someApp', [])
    .controller('someCtrl', function($scope) {
      $scope.name = "test name";
    })
    setTimeout(function() {
      angular.bootstrap(document, ['someApp']);
    }, 2000);
  </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:19:01.050

如果您在应用程序中使用路由，解决此问题的一种方法是让应用程序初始化，但等待定义路由，直到数据可用。

即提供一个用户友好的“加载”消息，然后加载功能。

您可以`$route`在需要的地方注入，然后调用类似：

```
$route.routes["/RouteName/:param"] = {templateUrl:"template.html", reloadOnSearch:true, controller:"ControllerName"}; 
```

之后，调用`$route.reload()`或`$rootScope.apply()`刷新。

更多信息，请访问[https://groups.google.com/forum/?fromgroups=#!msg/angular/AokZpUhZ6mw/x2kPIN2VAC0J](https://groups.google.com/forum/?fromgroups=#!msg/angular/AokZpUhZ6mw/x2kPIN2VAC0J)

# c# - 使用 c# 如何有效地从 SQL 数据库中检索和更新数千条记录

> ID：15368288
> 
> 赞同：2
> 
> 时间：2013-03-12T17:41:39.170
> 
> 标签：c#, sql

*过程*

1.  我正在编写一个 C# 应用程序，它需要从数据库 A 中的 SQL 表中检索 400 万条记录（ID）。
2.  然后我需要使用每个 ID 从数据库 B 中的另一个 SQL 表中选择一行记录。
3.  一旦我有了这一行，我就需要更新数据库 C 中的另一个 SQL 表

*问题*

1.  在步骤 1 中检索和存储数据的最有效方法是什么？一个。我应该将其加载到列表字符串中吗？湾。你建议最初做批处理吗？

2.  实现步骤 2 和 3 的最有效方法是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:47:19.840

要检索您将要使用的 4M 记录`SqlDataReader`- 它一次只将一行数据加载到内存中。

```
var cn = new SqlConnection("some connection string");
var cmd = new SqlCommand("SELECT ID FROM SomeTable", cn);
var reader = cmd.ExecuteReader();

while (reader.Read())
{
    var id = reader.GetInt32(0);

    // an so on
}

reader.Close();
reader.Dispose();
cn.Close(); 
```

现在，为了处理二和三，我将利用 a`DataTable`作为您需要检索的行，然后利用 a`SqlCommand`在第三个数据库上。这意味着在内部`reader.Read()`您可以通过用 a 填充 a`DataTable`并针对语句`SqlDataAdapter`发出`ExecNonQuery`反对 a来获得所需的一行。`SqlCommand``UPDATE`

编写上述内容的另一种方式，它更安全一点，是使用以下`using`语句：

```
using (SqlDataReader reader = cmd.ExecuteReader())
{
    while (reader.Read())
    {
        var id = reader.GetInt32(0);

        // an so on
    }
} 
```

这将消除对：

```
reader.Close();
reader.Dispose(); 
```

因此，`SqlConnection`如果您愿意，您也可以发布它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:49:43.673

SQLBulkCopy 类可能会有所帮助。

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)

# c - 是否可以将 va_list 用于树结构中的子节点？

> ID：15368295
> 
> 赞同：2
> 
> 时间：2013-03-12T17:41:58.810
> 
> 标签：c, tree, variadic-functions

是否可以使用 va_list 在 C 中定义结构？就像是：

```
struct node
{  int value;
   va_list children;
}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T17:49:20.437

从技术上讲，您可以将 a`va_list`作为结构的元素，但这没有多大意义。`va_*`API 非常专业。特别是，没有用于向 a 添加元素的公共 API，`va_list`因此您无法完全使用它。

就消费代码所知，`va_list`神奇地填充参数列表。它们并不打算用作存储您想要的任何内容的通用列表。即使您可以欺骗或操纵`va_list`它使其可用，这也是错误的道路。

* * *

我建议您使用简单的链表或向量。两者都很容易制作，即使是通用的方式。

另一种选择是直接管理内存。如果您只想分配孩子一次，这将是一个非常可行的选择。但是，如果您计划动态添加/删除子项，则更高级别的数据结构将更容易使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T17:59:22.820

我敢打赌这不是你想做的。

`va_list`用于函数。A`struct`可能可以将其用作成员，但这不会像您想要的那样工作。

如果您想为树节点提供无限数量的可能子节点，则需要**动态**分配它。

要在**C中****动态**分配内存，您需要阅读有关**指针**的内容。

 ****你可以这样做：

```
struct node
{
    int value;
    node *children; // "node *" means POINTER TO node.
}; 
```

然后，在代码中，您可以创建一个为节点分配足够空间的函数，例如：

```
void node_allocate(struct node *n, int amount)
{
    n->children = malloc(amount * sizeof(node));
} 
```

调用该函数后，struct`node`成员`children`将表现得像一个数组（但它不是数组！它是一个指向已分配内存的指针），长度为`amount`.

在程序结束时，您应该释放程序使用的内存，如下所示：

```
void node_deallocate(struct node *n)
{
    free(n->children);
} 
```

当然不要只是复制粘贴我在这里插入的代码！阅读**指针**、**动态分配内存**、**malloc()**（或**calloc()**）和**free()**！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T17:49:12.317

技术上是的，我们可以。下面在[这里进行测试。](http://liveworkspace.org/code/G16rF%247)

```
#include <stdarg.h>

struct node
{  int value;
   va_list children;
};

int main()
{

    return 0;
} 
```****

# php - 如何发送ajax请求上传文件

> ID：15368296
> 
> 赞同：0
> 
> 时间：2013-03-12T17:42:00.073
> 
> 标签：php, jquery, ajax, file-upload

我有这样的标记我现在不使用表单我想使用 ajax 上传图像

```
$('#file').on('change', function(e) {
    $.ajax({
        url: "upload.php",
        type: "POST",
        data: ?,
        processData: false,
        contentType: false,
        success: function (response) {
            console.log(response);
        }
    });
}) 
```

在数据中我必须发送什么？我只在堆栈溢出中得到了这个 ajax，但我无法理解。还有一件事我怎样才能接收 PHP 文件中的数据

谢谢你？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:44:32.923

无法通过 ajax 上传图片。您可以做的是创建一个隐藏的 iframe 并使用它上传文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:44:42.293

请注意，通常通过 AJAX 上传文件很痛苦。[您可以在此处通过 JQuery](https://stackoverflow.com/questions/1686099/file-upload-via-ajax-within-jquery)中的 AJAX 文件上传查看相关问题。

就个人而言，我求助于在提交时生成一个隐藏的 iframe，并带有一个被提交的表单的克隆。完成后，iframe 的内容将被抓取回 jQuery。我找不到在旧 IE 版本中工作的另一种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:54:35.253

您尝试做的事情可以在支持[FormData](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData)功能的浏览器中完成

```
$('#file').on('change', function(e) {
    var data = new FormData();
    data.append('file',this.files[0]);
    $.ajax({
        url: "upload.php",
        type: "POST",
        data: data,
        processData: false,
        contentType: false,
        success: function (response) {
            console.log(response);
        }
    });
}) 
```

# android - android.view.Inflate 异常，模拟器说应用程序已意外停止

> ID：15368298
> 
> 赞同：0
> 
> 时间：2013-03-12T17:42:02.140
> 
> 标签：android

我是 android 新手，并通过查看 android 开发者教程第一次使用 google map v2。得到异常，不知道出了什么问题。有人可以帮我吗 ？

## 日志猫

```
03-12 22:00:01.678: D/AndroidRuntime(278): Shutting down VM
03-12 22:00:01.678: W/dalvikvm(278): threadid=1: thread exiting with uncaught exception      (group=0x4001d800)
03-12 22:00:01.758: E/AndroidRuntime(278): FATAL EXCEPTION: main
03-12 22:00:01.758: E/AndroidRuntime(278): java.lang.RuntimeException: Unable to start      activity      ComponentInfo{com.sameer.example.maps_example/com.sameer.example.maps_example.MainActivity}: android.view.InflateException: Binary XML file line #3: Error inflating class fragment
03-12 22:00:01.758: E/AndroidRuntime(278):  at  android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
03-12 22:00:01.758: E/AndroidRuntime(278):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
03-12 22:00:01.758: E/AndroidRuntime(278):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
03-12 22:00:01.758: E/AndroidRuntime(278):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
03-12 22:00:01.758: E/AndroidRuntime(278):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-12 22:00:01.758: E/AndroidRuntime(278):  at android.os.Looper.loop(Looper.java:123)
03-12 22:00:01.758: E/AndroidRuntime(278):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-12 22:00:01.758: E/AndroidRuntime(278):  at java.lang.reflect.Method.invokeNative(Native Method)
03-12 22:00:01.758: E/AndroidRuntime(278):  at java.lang.reflect.Method.invoke(Method.java:521)
03-12 22:00:01.758: E/AndroidRuntime(278):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-12 22:00:01.758: E/AndroidRuntime(278):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-12 22:00:01.758: E/AndroidRuntime(278):  at dalvik.system.NativeStart.main(Native Method)
03-12 22:00:01.758: E/AndroidRuntime(278): Caused by: android.view.InflateException: Binary XML file line #3: Error inflating class fragment
03-12 22:00:01.758: E/AndroidRuntime(278):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:576)
03-12 22:00:01.758: E/AndroidRuntime(278):  at android.view.LayoutInflater.inflate(LayoutInflater.java:385)
03-12 22:00:01.758: E/AndroidRuntime(278):  at   android.view.LayoutInflater.inflate(LayoutInflater.java:320)
03-12 22:00:01.758: E/AndroidRuntime(278):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
03-12 22:00:01.758: E/AndroidRuntime(278):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
03-12 22:00:01.758: E/AndroidRuntime(278):  at android.app.Activity.setContentView(Activity.java:1647)
03-12 22:00:01.758: E/AndroidRuntime(278):  at com.sameer.example.maps_example.MainActivity.onCreate(MainActivity.java:11)
03-12 22:00:01.758: E/AndroidRuntime(278):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-12 22:00:01.758: E/AndroidRuntime(278):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
03-12 22:00:01.758: E/AndroidRuntime(278):  ... 11 more
03-12 22:00:01.758: E/AndroidRuntime(278): Caused by: java.lang.ClassNotFoundException: android.view.fragment in loader dalvik.system.PathClassLoader[/data/app/com.sameer.example.maps_example-2.apk]
03-12 22:00:01.758: E/AndroidRuntime(278):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
03-12 22:00:01.758: E/AndroidRuntime(278):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
03-12 22:00:01.758: E/AndroidRuntime(278):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
03-12 22:00:01.758: E/AndroidRuntime(278):  at android.view.LayoutInflater.createView(LayoutInflater.java:466)
03-12 22:00:01.758: E/AndroidRuntime(278):  at  android.view.LayoutInflater.onCreateView(LayoutInflater.java:544)
03-12 22:00:01.758: E/AndroidRuntime(278):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
03-12 22:00:01.758: E/AndroidRuntime(278):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
03-12 22:00:01.758: E/AndroidRuntime(278):  ... 19 more 
```

## XML 布局文件

```
<?xml version="1.0" encoding="utf-8"?>

<fragment xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/map"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:name="com.google.android.gms.maps.MapFragment"/> 
```

## Java 文件

```
package com.sameer.example.maps_example;

import android.app.Activity;
import android.os.Bundle;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    }
 } 
```

## 安卓清单

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.sameer.example.maps_example"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<permission
    android:name="com.sameer.example.maps_example.permission.MAPS_RECEIVE"
    android:protectionLevel="signature"/>

<uses-permission android:name="com.sameer.example.maps_example.permission.MAPS_RECEIVE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission     android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
  <!-- The following two permissions are not required to use
 Google Maps Android API v2, but are recommended. -->
 <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
 <uses-feature
    android:glEsVersion="0x00020000"
    android:required="true"/>
    <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <meta-data
android:name="com.google.android.maps.v2.API_KEY"
android:value="API_KEY"/>
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:51:05.427

您正在为 API V8 编写应用程序，但您正在使用`MapFragment`和`Activity`类。相反，您应该使用`android-support-v4`库并使用`SupportMapFragment`and`FragmentActvity`类。

要将支持库添加到项目中，您需要使用 SDK 管理器下载它。然后您可以右键单击您的项目并选择 Android 工具 -> SupportLibrary。

然后从 FragmentActivity 扩展您的地图活动并确保您正在导入：

```
android.support.v4.app.FragmentActivity 
```

在您的 XML 文件中使用 SupportMapFragment 类而不是 MapFragment，如下所示：

```
 <fragment
        xmlns:map="http://schemas.android.com/apk/res-auto"
        android:id="@+id/map"
        android:name="com.google.android.gms.maps.SupportMapFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent" /> 
```

# html - 如何增加 twitter bootstrap 下拉菜单的宽度？

> ID：15368299
> 
> 赞同：1
> 
> 时间：2013-03-12T17:42:02.420
> 
> 标签：html, css, twitter-bootstrap

如何增加 twitter bootstrap 下拉菜单的宽度。我需要该列表以将酒精事件和状态报告作为选项，但默认宽度不足以包含那么多文本。

```
 <li class="dropdown subnavbar-open-right">
                    <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown"><span>Reports/Statistics</span><b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-submenu"><a>USN</a>
                            <ul class="dropdown-menu">
                                <li><a>Alcohol Incidents and Status Reports</a></li>

                            </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:24:43.943

查看您提供的代码，我使用 Twitter BootStrap 的默认设置创建了一个测试页面，并将您的文本“酒精事件和状态报告”添加到下拉菜单中。我发现下拉菜单自动扩展为包括文本的整个宽度。

这意味着您要么遗漏了一些必要的代码以使其正常工作，要么覆盖 CSS 类导致它无法工作。这是代码：

```
 <div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="#">Name</a>
      <div class="nav-collapse collapse">
        <ul class="nav">
          <li class="active"><a href="#">Home</a></li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="#">Alcohol Incidents and Status Reports</a></li>
              <li><a href="#">Another action</a></li>
              <li><a href="#">Something else here</a></li>
              <li class="divider"></li>
              <li class="nav-header">Nav header</li>
              <li><a href="#">Separated link</a></li>
              <li><a href="#">One more separated link</a></li>
            </ul>
          </li>
        </ul>
      </div><!--/.nav-collapse -->
    </div>
  </div>
</div> 
```

如果这对您没有帮助，那么您可能需要提供更多代码，以便人们可以帮助您调试。我有一个指向 JSFiddle 的链接，但似乎我们现在不允许发布这些链接。如果您想查看它，这里是它的扩展名 /tS95X/1/。

# ipad - 在其指定容器区域之外读取或写入数据的应用程序将被拒绝

> ID：15368301
> 
> 赞同：3
> 
> 时间：2013-03-12T17:42:08.363
> 
> 标签：ipad, ios6

我正在开发一个将数据从应用程序发送到 sql 服务器的应用程序。我在 App Store 指南（第 2.6 点）中读到“在其指定容器区域之外读取或写入数据的应用程序将被拒绝”。这是否意味着我将无法做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T18:20:45.737

我很确定他们只是指每个应用程序分配到的指定“沙箱”。每个应用程序都有自己的文档目录来保存本地文件，我相信他们只是警告您不要尝试在此之外编写（如果您甚至能够在非越狱开发人员上编写）。他们也不希望您尝试访问您无权访问的其他应用程序。

我有几个应用程序去商店写入和读取谷歌应用引擎服务器，它们已经被接受，没有问题。所以我认为你最好将数据保存到你自己的服务器上。

# java - 为什么文本框在java中不自动更新？

> ID：15368304
> 
> 赞同：-1
> 
> 时间：2013-03-12T17:42:19.640
> 
> 标签：java, swing, concurrency, textbox, event-dispatch-thread

在我的代码下面，我为 gps 编写的代码是给我关于 4800 波特率的继续数据，此数据显示由“System.out.println(st)”继续显示，但相同的数据不会显示在 a.setText(st) 中，其中 a 是文本框变量。有些人知道如何像 System.out.println 行那样更新我的文本框。

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Enumeration;
import java.util.TooManyListenersException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.comm.UnsupportedCommOperationException;
import javax.comm.*;
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * test.java
 *
 * Created on Mar 11, 2013, 9:08:52 AM
 */
/**
 *
 * @author DJ ROCKS
 */
public class test extends javax.swing.JFrame {
    public boolean bp=true;

    /** Creates new form test */
    public test() {
        initComponents();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        ok = new javax.swing.JButton();
        a = new javax.swing.JTextField();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        ok.setText("ok");
        ok.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                okActionPerformed(evt);
            }
        });

        a.setText(" ");
        a.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                aActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(62, 62, 62)
                        .addComponent(a, javax.swing.GroupLayout.PREFERRED_SIZE, 394, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(238, 238, 238)
                        .addComponent(ok)))
                .addContainerGap(124, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(a, javax.swing.GroupLayout.PREFERRED_SIZE, 39, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(67, 67, 67)
                .addComponent(ok)
                .addContainerGap(160, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>

    private void okActionPerformed(java.awt.event.ActionEvent evt) {                                   
        // TODO add your handling code here:

        if(evt.getSource()==ok)
        {
            CommPortIdentifier portId = null; 
String wantedPortName="COM16";

 Enumeration portIdentifiers = CommPortIdentifier.getPortIdentifiers();

while(portIdentifiers.hasMoreElements())
{
    CommPortIdentifier pid = (CommPortIdentifier) portIdentifiers.nextElement();
    if(pid.getPortType() == CommPortIdentifier.PORT_SERIAL &&
       pid.getName().equals(wantedPortName)) 
    {
        portId = pid;
        break;
    }
}
if(portId == null)
{
    System.err.println("Could not find serial port " + wantedPortName);
    System.exit(1);
}
else
{
    System.out.println("system find gps reciever");
}
SerialPort port = null;
try {
    port = (SerialPort) portId.open(
        "RMC", 
        1);
    System.out.println("all are ok"); 
} catch(PortInUseException e) {
    System.err.println("Port already in use: " + e);
    System.exit(1);
}
            try {
                //int i=Integer.parseInt(new vps().baud_rate.getItemAt(new vps().baud_rate.getItemCount()));
               port.setSerialPortParams(
                   4800,
                   SerialPort.DATABITS_8,
                   SerialPort.STOPBITS_1,
                   SerialPort.PARITY_NONE);
            } catch (UnsupportedCommOperationException ex) {
                Logger.getLogger(test.class.getName()).log(Level.SEVERE, null, ex);
            }

BufferedReader is = null;  

try {
  is = new BufferedReader(new InputStreamReader(port.getInputStream()));
  System.out.println("data is ok");
} catch (IOException e) {
  System.err.println("Can't open input stream: write-only");
  is = null;
}

 //this is variable is ouside of class and define by public it work 
    while(true)
    {

String st = null;
                try {
                    st = is.readLine();
                } catch (IOException ex) {
                    Logger.getLogger(test.class.getName()).log(Level.SEVERE, null, ex);
                }

       System.out.println(st);
        //st = st.replace(st, "");
      a.setText(st);
      try
      {

          Thread.sleep(1000);
      }
      catch(InterruptedException ie)
      {
          System.out.printf(ie.getMessage());
      }
}
/*if (is != null) try {
                is.close();
            } catch (IOException ex) {
                Logger.getLogger(test.class.getName()).log(Level.SEVERE, null, ex);
            }

if (port != null) port.close();
*/
}

    }                                  

    private void aActionPerformed(java.awt.event.ActionEvent evt) {
        // TODO add your handling code here:
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new test().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JTextField a;
    private javax.swing.JButton ok;
    // End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:21:32.787

似乎您可能正在尝试重写相同的字符串。我会尝试调用返回字符串而不是引用变量“st”的“get”方法。我这样做是为了避免程序尝试重写字符串的情况，因为字符串是不可变的。

我会尝试这样的事情：

```
private String getString()
{
try {
    String st = new String(""+is.ReadLine());
    return st;
    } catch (IOException ex) {
                Logger.getLogger(test.class.getName()).log(Level.SEVERE, null, ex);
} 
```

使用它来引用来自 BufferedReader "is" 的新字符串：

```
 a.setText(getString()); 
```

此外，看起来好像您在此处的注释行中有一个代码块：

```
/*if (is != null) try {
            is.close();
        } catch (IOException ex) {
            Logger.getLogger(test.class.getName()).log(Level.SEVERE, null, ex);
      if (port != null) port.close();
}*/ 
```

如果我在这里错了，请纠正我。

# c# - StackTrace/StackFrame 在生产环境中不返回预期信息

> ID：15368309
> 
> 赞同：7
> 
> 时间：2013-03-12T17:42:41.930
> 
> 标签：c#, asp.net, debugging, stack-trace, visual-studio-debugging

我在我的 ASP.NET Web 应用程序中使用以下方法来接收异常的堆栈跟踪：

```
public static void getStackTraceInfo(System.Diagnostics.StackTrace trace)
{
    for (int i = 0; i < trace.FrameCount; i++)
    {
        int nLine = trace.GetFrame(i).GetFileLineNumber();
        int nCol = trace.GetFrame(i).GetFileColumnNumber();
        string methodName = trace.GetFrame(i).GetMethod().Name;
    }
}

try
{
}
catch(Exception ex)
{
    getStackTraceInfo(new System.Diagnostics.StackTrace(ex, true));
} 
```

如果我在 Visual Studio 2010 开发环境中运行它，它会为我提供完整的行/列/方法名称信息，但在 IIS 上的生产环境中，它会返回全 0 和方法名称作为空字符串。

我是否需要做一些特别的事情才能让它在 IIS 上也能正常工作？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-12T17:51:57.720

> 如果我在 Visual Studio 2010 开发环境中运行它，它会为我提供完整的行/列/方法名称信息，但在 IIS 上的生产环境中，它会返回全 0 和方法名称作为空字符串。

正确的。仔细阅读类型名称；这`Diagnostics`很重要。该命名空间中的类型旨在诊断调试环境中的问题。

> 我是否需要做一些特别的事情才能让它在 IIS 上也能正常工作？

不; 您不需要在*生产中使用**诊断*工具。

 *如果出于某种原因您想在生产环境中使用诊断工具，则至少需要将 PDB 文件推送到生产环境。正如我们将在下面看到的那样，这可能是一件危险且愚蠢的事情。我建议你不要这样做。

一些你没有问的问题：

> 我应该使用什么工具在生产环境中获取调用者信息？

如果您需要获取方法调用的行号等，您可能应该使用的工具是`CallerLineNumber`C# 5.0 中的新属性和相关属性。这是一个关于它们的好博客：

[http://blog.slaks.net/2011/10/subtleties-of-c-5s-new-callerlinenumber.html](http://blog.slaks.net/2011/10/subtleties-of-c-5s-new-callerlinenumber.html)

如果您需要获取有关异常堆栈跟踪的信息，所见即所得。

> 在调试环境中，StackTrace 对象是否保证堆栈跟踪告诉我*当前调用来自何处*？

不，堆栈跟踪并不会告诉您首先来自哪里。堆栈跟踪会告诉您*下一步要去哪里*。这很有用，因为您来自哪里和下一步要去哪里之间通常存在很强的相关性。通常你会回到你原来的地方。

但这并不总是正确的。CLR 有时可以在不知道您来自哪里的情况下确定下一步要去哪里，在这种情况下，堆栈跟踪不包含您需要的信息。

例如，尾调用优化可以从堆栈中删除帧。内联优化可以使对方法的调用看起来像是调用方法的一部分。C# 5 中的异步工作流完全脱离了“你来自哪里”和“你接下来要去哪里”；在 an 之后恢复的异步方法的堆栈跟踪`await`告诉您在下一个之后您要去哪里`await`，而不是在第一个之前如何进入该方法`await`。

堆栈跟踪是不可靠的，所以不要依赖它们。仅将它们用作诊断辅助工具。

> 为什么在 ASP 中暴露诊断信息特别危险？

因为攻击者会尝试通过向其抛出“异常”输入来导致您的服务器失败。如果这导致服务器宕机，很好，攻击者会很高兴。如果它使服务器保持正常运行但将*有关您的源代码的信息泄露给攻击者*，那就更好了。现在他们有更多信息可用于发起更复杂的攻击。

ASP 服务器应该在生产环境中提供尽可能少的诊断信息。您在该生产环境中拥有的调试信息越少，您犯错误并将实现细节暴露给攻击者的可能性就越小。*

# android - 获取锁屏的可见性

> ID：15368310
> 
> 赞同：1
> 
> 时间：2013-03-12T17:42:43.760
> 
> 标签：android, lockscreen, keyguard

我如何从服务中检查 KeyGuard（锁屏）是否可见？我想支持原始和自定义锁屏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T17:46:14.220

仅当设备关闭屏幕时屏幕才会锁定。

您应该扩展`BroadcastReceiver`和实现`onReceive`，如下所示：

```
public class YourBroadcastReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        if (Intent.ACTION_SCREEN_OFF.equalsIgnoreCase(intent.getAction())) {
            //screen has been switched off!
        }
    }
} 
```

然后你只需要注册它，当屏幕关闭时你就会开始接收事件：

```
IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_ON);
filter.addAction(Intent.ACTION_SCREEN_OFF);
appBroadcastReceiver = new AppBroadcastReceiver(yourActivity);
registerReceiver(appBroadcastReceiver, filter); 
```

有一种极端情况，用户将他们的设备设置为`n`在屏幕关闭后锁定几秒钟，您可能需要在广播接收器中添加一个检查`ACTION_SCREEN_ON`并检查它们之间的时间。

# sql-server - 通过查看查询计划优化查询

> ID：15368314
> 
> 赞同：0
> 
> 时间：2013-03-12T17:42:53.980
> 
> 标签：sql-server, query-optimization

通过查询计划优化 Sqlserver 2005 查询

我有一个以下查询需要 1.7 秒来提取 72 条记录，如果有更多可用项目可能需要更多时间。

当我运行查询计划时，我发现昂贵的操作是“ReviewCompleteFlag = 0 AND ReviewItemDeleteFlag = 0 AND ActivationDateTime”b/c 它们没有索引

```
ReviewCompleteFlag value can be 0 or 1
ReviewItemDeleteFlag values can be 0 or 1
itemid is foreign key 
```

有没有办法优化这个查询？

```
SELECT

      TOP 200000

    ItemId
    FROM
    ItemReview (nolock)
    WHERE ReviewCompleteFlag =0 AND ReviewItemDeleteFlag = 0 AND ActivationDateTime is null
    ORDER BY ReviewPriority DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:03:13.547

作为布尔值（即使定义为 int，您声明它们只有两个值）我怀疑 ReviewCompleteFlag 或 ReviewItemDeleteFlag 都不会受到索引的帮助。索引通常需要数据中更多的可变性才能有用。

我会考虑在 ActivationDateTime 和 ReviewPriority 上尝试索引。

也有可能，一旦您在 ActivationDateTime 上有索引，派生表可能会更快（至少那时您将未索引的布尔值应用于较小的集合，这可能对您有利（当然首先尝试并使用您的数据库进行测量）设置和数据库）：

```
SELECT
  TOP 200000
ItemId
FROM
    (SELECT ItemID, ReviewCompleteFlag, ReviewItemDeleteFlag, ReviewPriority 
    FROM  ItemReview 
    WHERE ActivationDateTime is null) IR  WITH (nolock)
WHERE ReviewCompleteFlag =0 AND ReviewItemDeleteFlag = 0     ORDER BY ReviewPriority DESC 
```

# netbeans - netbeans 在 RUN 通信期间无法打开共享库

> ID：15368315
> 
> 赞同：4
> 
> 时间：2013-03-12T17:42:55.707
> 
> 标签：netbeans

一切正常，但我刚刚尝试在 NetBeans 的 Linux Ubuntu 12.10 上运行我的 CUDA 程序，但出现错误：

> dist/Debug/GNU-Linux-x86/my_cuda_1：加载共享库时出错：libcudart.so.5.0：无法打开共享对象文件：没有这样的文件或目录
> 
> RUN FAILED（退出值127，总时间：191ms）

项目可以构建：编译 + 链接没有问题，我也可以从命令行运行它，但如果我尝试从 NetBeans 运行它，我会收到此错误。几分钟前我可以运行它，会发生什么？

我已将文件 my_lib 添加到 ld.so.conf.d 包含这样的文本：

> > /usr/local/cuda-5.0/lib64:/lib
> > /usr/lib
> > /usr/lib64

可能是链接问题 libcudart.so.5.0 -> licudart.so？cuda/lib libcudart.so.5.0（链接）和libcudart.so（链接）和libcudart.so.5.0.35（共享库）中有两个库，为什么它抱怨.so.5.0？可能链接如下： sudo ln -s /usr/lib/x86_64-linux-gnu/libglut.so.3 /usr/lib/libglut.so 是必要的

我认为它与共享库的链接有关

> root@comp:# echo $LD_LIBRARY_PATH /usr/lib/nvidia-current:/usr/local/cuda-5.0/lib::/usr/local/cuda-5.0/lib64:/lib

这不是：：有问题吗？似乎没有，因为我改变了这个并且仍然是同样的错误。我指定 PATHS，我运行 ldconfig，我把导出放在 .bashrc 中，仍然没有。原因是如果程序是从 NetBeans GUI 启动的，我无法加载这些库，但是我总是以 root 身份启动 NetBeans

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T21:01:41.873

添加到项目 -> 属性 -> 运行 -> 环境

> 名称：LD_LIBRARY_PATH
> 
> 值：$LD_LIBRARY_PATH:/usr/lib/nvidia-current:/usr/local/cuda-5.0/lib:/usr/local/cuda-5.0/lib64:/lib

谢谢你们。我不知道之前发生了什么，因为它工作得很好。

# c++ - C++ 奇怪的编译错误，大错特错

> ID：15368319
> 
> 赞同：1
> 
> 时间：2013-03-12T17:43:07.677
> 
> 标签：c++, compiler-errors

我正在尝试使用第 3 方 C++ 源代码（机器人 SLAM 的 TORO 框架，您可以通过 svn 获取它：svn co [https://www.openslam.org/data/svn/toro](https://www.openslam.org/data/svn/toro)），通过尝试将其封装在 DLL 中，以便稍后在我的 C# 代码中使用。但是，仅通过将源文件包含到我的项目中，我就会遇到各种错误。例如对于以下代码

```
void TreePoseGraph<Ops>::revertEdge(TreePoseGraph<Ops>::Edge * e){
    revertEdgeInfo(e);
    Vertex* ap=e->v2; 
    e->v2=e->v1; 
    e->v1=ap; 
} 
```

我收到以下错误：

> 错误 C2182：“revertEdge”：非法使用“void”类型
> 错误 C2470：“AISNavigation::TreePoseGraph::revertEdge”：看起来像函数 d 定义，但没有参数列表；跳过明显的正文
> 错误 C2072：'AISNavigation::TreePoseGraph::revertEdge'：函数的初始化

当然，我做的第一件事是检查它是否包含（revertEdge）在正确的标题和 stdAfx.h 中，当然它无处不在。而且，IntelliSense 可以识别一切，可以为我指出一切的源头，因此该项目似乎没有遗漏任何东西。然而，我得到了大量类似的错误。

我确定我一开始就在这里做错了什么，这导致了所有这些无意义的错误消息的转储（可能有 1-2 个是合理的，但其余的只是雪崩的结果）。您能否提出任何建议，可能导致收到如此大量的错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:46:36.170

只是一个猜测，但您可能需要`typename`在 the 之前添加一个`TreePoseGraph<Ops>::Edge`，以便告诉编译器这`Edge`实际上是一个类型，即

```
void TreePoseGraph<Ops>::revertEdge(typename TreePoseGraph<Ops>::Edge * e)
{
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:48:03.243

我认为它应该是这样的：

```
template<class Ops> void TreePoseGraph<Ops>::revertEdge(TreePoseGraph<Ops>::Edge * e) {
  // ...
} 
```

# java - 将按钮放在JPanel中的图像顶部？

> ID：15368323
> 
> 赞同：0
> 
> 时间：2013-03-12T17:43:12.820
> 
> 标签：java, swing, user-interface, layout, jpanel

我一直在主菜单屏幕上工作。我使用卡片布局，因为我有一个显示在主菜单屏幕之前的初始屏幕。一旦用户单击启动屏幕上的“继续”按钮，他们就会被带到主菜单屏幕。

我无法添加屏幕截图，因为我没有足够高的声誉，但到目前为止，按钮被推到一边，我认为是因为卡片布局。

有什么方法可以将按钮放在主菜单屏幕图像的顶部？

这是我的窗口代码：

```
package edu.ycp.cs.Main;

import java.awt.BorderLayout;
import java.awt.CardLayout;
import java.awt.Container;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JPanel;

public class Window {
    JPanel cards; // a panel that uses CardLayout
    final static String SPLASHSCREEN = "SplashScreen";
    final static String MAINMENU = "MainMenu";

    public void addComponentToWindow(Container pane) {
        // Put the JComboBox in a JPanel to get a nicer look.
        JPanel gameWindow = new JPanel(); // use FlowLayout

        // Create the "cards".
        JPanel card1 = new JPanel();
        JButton continueButton = new JButton("Continue");
        continueButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                CardLayout cl = (CardLayout) (cards.getLayout());
                cl.show(cards, MAINMENU);
            }
        });
        card1.add(new SplashScreen());
        card1.add(continueButton);

        JPanel card2 = new JPanel();
        JButton menuButton1 = new JButton("PLAY!");
        JButton menuButton2 = new JButton("HIGH SCORES");
        card2.add(new MainMenuScreen());
        card2.add(menuButton1);
        card2.add(menuButton2);

        cards = new JPanel(new CardLayout());
        cards.add(card1, SPLASHSCREEN);
        cards.add(card2, MAINMENU);

        pane.add(gameWindow, BorderLayout.PAGE_START);
        pane.add(cards, BorderLayout.CENTER);
    }
} 
```

关于如何让按钮位于图像顶部的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:59:05.647

```
JPanel card1 = new JPanel();
card1.add(new SplashScreen());
card1.add(continueButton); 
```

JPanel 使用 FlowLayout。因此，当您向其中添加两个组件时，它们只是彼此并排绘制。

您希望将组件绘制在彼此之上，因此您需要执行以下操作：

```
JPanel card1 = new JPanel();
SplashScreen splash = new SplashScreen();
splash.setLayout( new FlowLayout() );
card1\. add(splash);
splash.add( continueButton ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:58:30.897

你`JPanel`的包含你的 2`menuButton`并且`MenuScreen`没有布局。使用一个喜欢`GridBagLayout`并将按钮设置在顶部。您可以使用其他布局，这取决于您。

我使用按钮只是为了向您展示一个简单的示例，如果您想使用它`GridBagLayout`，建议您查看[该布局上的 Oracle 页面。](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)

```
JPanel card2 = new JPanel();
card2.setLayout(new GridBagLayout());
JButton menuButton1 = new JButton("PLAY!");
JButton menuButton2 = new JButton("HIGH SCORES");

JButton menuButton3 = new JButton("UNDER THE 2 OTHERS");

GridBagConstraints gbc2 = new GridBagConstraints();
gbc2.gridx = 0;
gbc2.gridy = 1;
gbc2.weightx = 1;
gbc2.weighty = 1;
gbc2.gridwidth = 2;
gbc2.fill = GridBagConstraints.HORIZONTAL;

GridBagConstraints gbc = new GridBagConstraints();
gbc.gridx = 0;
gbc.gridy = 0;
gbc.weightx = 1;
gbc.weighty = 1;
gbc.fill = GridBagConstraints.HORIZONTAL;

GridBagConstraints gbc3 = new GridBagConstraints();
gbc3.gridx = 1;
gbc3.gridy = 0;
gbc3.weightx = 1;
gbc3.weighty = 1;
gbc3.fill = GridBagConstraints.HORIZONTAL;
card2.add(menuButton1, gbc);
card2.add(menuButton2, gbc3);
card2.add(menuButton3, gbc2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T08:50:19.680

如果您的初始屏幕只有一个按钮，您可以尝试将整个初始图像设置为按钮，如下例所示：[Java：使用图像作为按钮](https://stackoverflow.com/questions/4898584/java-using-an-image-as-a-button)

您可以编辑现有的初始屏幕图像以在图像本身内添加一个继续按钮。当然，用户可以点击任何地方（因为这将是一个巨大的图像按钮）。

听起来很俗气，我知道。但这可能是一种快速而肮脏的方式来足够接近你想要的东西。

# flyway - 我可以在生产环境中关闭flyway上的“cleanTask”吗

> ID：15368333
> 
> 赞同：2
> 
> 时间：2013-03-12T17:43:57.297
> 
> 标签：flyway

我希望能够关闭在生产环境中执行“CleanTask”（com.googlecode.flyway.ant.cleanTask）的能力，这样我们的生产数据库就不会被无意中删除。

有没有办法做到这一点？

广东

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:28:23.343

没有办法开箱即用。

一种解决方案可能是包装 Flyway 任务并为 clean 提供无操作，而不是委托给真正的实现。

# javascript - 如何区分 jQuery 中的 DOM 元素

> ID：15368334
> 
> 赞同：-2
> 
> 时间：2013-03-12T17:43:58.853
> 
> 标签：javascript, jquery

我有一些代码循环遍历表的每一行并创建一个 json 对象。行中的元素可以是以下之一：

```
<input type="text" id="myelem"/> 
```

或者

```
<p id="myelem">foo</p> 
```

请注意，`id`两者的属性是相同的。这是因为在表格上有一个按钮`Add a new Row`，当单击此按钮时，另一行会通过复选框添加到表格中。当用户提交表单时，复选框消失，他们输入的值变成`<p id="myelem">value they entered</p>`

下面是我为此使用的代码。

```
 $('.input-row').each(function(index, row) {
        var innerObject = {};
        var key = $('#myelem', row).val().toUpperCase();
        jsonObject[key] = "bar";
    }); 
```

`.val()`由于我正在使用该功能，以上内容适用于文本框。但是，如果它包含，我如何从行中获取数据`<p id="myelem">foo</p>`？

我的伪代码是这样的：

```
 $('.input-row').each(function(index, row) {
        var innerObject = {};
        /*
        if #myelem is a text box then use .val()
        if #myelem is a <p> tag then use .html()
        */
        var key = $('#myelem', row).val().toUpperCase();
        jsonObject[key] = "bar";
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:45:24.603

`id`s 在页面上应该始终是全局唯一的。如果需要引用多个元素，则应使用`classes`. 如果您设置`myelem`为 a`class`而不是 an`id`您可以像这样引用它

```
$('.input-row .myelem') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:49:42.287

您可以检查元素的类型

```
var value = null;
if($('#myid').is('input')) {
    value = $('#myid').val();
}
else if($('#myid').is('p')) {
    value = $('#myid').html();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:47:40.303

ID 是唯一的。您不能在同一页面中使用多个 ID。如果你这样做，你应该如何决定使用哪个元素？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T17:51:17.727

你可以使用 jQuery is() 例如`if $('#myelem').is ('p'){...}`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T17:58:39.997

如果仍想坚持您的开发方式，那么以下内容可能会对您有所帮助：

```
$('.input-row').each(function(index, row) {
    var innerObject = {};
    var c = $('#myelem', row);
    var isInputField = c.get(0).tagName.toUpperCase()=="INPUT";
    var key =isInputField ? c.val().toUpperCase():c.html().toUpperCase();
    jsonObject[key] = "bar";
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T18:06:27.603

这只是为了让你开始。您`.each`在课堂上使用，`input-row`但您没有在您提供的代码中显示该类。在这个例子中，我使用了 class 而不是 id。用它来提前工作。

[小提琴](http://jsfiddle.net/e5HBv/1/)

# php - 除非 var = 0，否则如何获得从 1000 到 1000 的结果

> ID：15368338
> 
> 赞同：-4
> 
> 时间：2013-03-12T17:44:17.853
> 
> 标签：php, algorithm

我有一个查询，其中 num_rows 返回一百万条记录。我需要将这 100 万条记录迭代 1000 次，我的意思是从 0 到 100 万条开始，每 1000 条记录生成一个 otuput（Excel 文件）：

```
Excel1: will contain records 1~1000
Excel2: will contain records 1001~2000
Excel3: will contain records 2001~3000
Excel14: will contain records 3001~4000 
```

以此类推，直到我达到一百万。我认为在使用中，`while()`但我一点也不安全，有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:59:12.997

假设您正在查询数据库，这样的事情应该可以工作：

```
$start = 0;
$end = 1000;

$qstring= 'SELECT col1, col2 FROM mytable ORDER BY col1 LIMIT ?, ?';
$stmt = mysqli_prepare($connection, $qstring);
$stmt->bind_param('ii', $start, $end);
do{
 $stmt->execute();
 $stmt->bind_result($co11, $col2);
 while($stmt->fetch()){
   //do something with $col1, $col2
 }

 $count = $stmt->num_rows
 $start = $end + 1;
 $end = $start +1000;

} while($count == 1000); 
```

# macos - 使用自动布局的 NSClipView/NSScrollView 内的 NSTableView 框架

> ID：15368340
> 
> 赞同：5
> 
> 时间：2013-03-12T17:44:23.033
> 
> 标签：macos, cocoa, nstableview, autolayout, nsscrollview

我正在尝试使用自动布局在代码中创建一个`NSTableView`内部`NSScrollView`（即标准配置）。我不知道如何使这项工作。

这是我的加载视图：

```
- (void)loadView
{
    NSView *view = [[NSView alloc] init];

    NSScrollView *tableScroll = [[NSScrollView alloc] init];
    NSTableView *fileTable = [[NSTableView alloc] init];
    [tableScroll setDocumentView:fileTable];
    [tableScroll setHasVerticalScroller:YES];
    [tableScroll setHasHorizontalScroller:NO];
    fileTable.delegate = self;
    fileTable.dataSource = self;
    [fileTable setHeaderView:nil];
    [fileTable setAllowsColumnReordering:NO];

    NSTableColumn *column = [[NSTableColumn alloc] initWithIdentifier:@"column1"];
    [fileTable addTableColumn:column];

    [tableScroll setTranslatesAutoresizingMaskIntoConstraints:NO];
    [fileTable setTranslatesAutoresizingMaskIntoConstraints:NO];

    [view addSubview:tableScroll];

    NSDictionary *topViews = NSDictionaryOfVariableBindings(tableScroll);
    [view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[tableScroll]|" options:0 metrics:nil views:topViews]];
    [view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"|[tableScroll]|" options:0 metrics:nil views:topViews]];

    self.fileTable = fileTable;

    self.view = view;
} 
```

发生的事情是我的表格视图的框架将始终等于`NSClipView`. 该视图位于窗口内并随其调整大小，当我这样做时，它将调整滚动视图、剪辑视图和表格的大小，但我永远无法滚动到任何地方。

查看我得到的`NSScrollView`约束，设置剪辑视图以填充它的获取约束，剪辑视图根本没有约束，而表视图有一堆与其`NSTableRowViews`内部相关的约束。

如果我`|[fileTable(>=500)]`向剪辑视图添加一个约束，我将获得 500 像素的 NSTableView，但显然我不想这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-19T00:29:00.400

尽管上面评论中的发帖人回答了这个问题，但我想我会把答案放在这里（遇到同样的问题）。如果您采用自动布局，您通常会在 xib 中取消选中“将掩码转换为约束”。但是，对于 和 之类的类`NSScrollView`，您通常应该通过将它们的属性设置为 来`NSTableView`让它们管理自己的内部视图。仍然可以设置这些视图*外部*的约束，即相对于它们的父视图调整大小。`translatesAutoresizingMaskIntoConstraints``YES`

 *如果您设置`translatesAutoresizingMaskIntoConstraints`为`NO`，那么您将需要为所有内部视图提供约束，除非您特别需要自定义行为（几乎从不），否则您不会想要这样做。这是上面的具体问题。

未正确设置的一个明显副作用是表格（例如）将无法正确滚动超出视图中的可见范围。*

# qt - 如何将 QTableView 设置为 QTableView 的单元格

> ID：15368343
> 
> 赞同：0
> 
> 时间：2013-03-12T17:44:29.963
> 
> 标签：qt, qtableview, cells, qitemdelegate

我有`QTableView`- mainTableView，在某些单元格中我需要显示另一个`QTableView`- cellTableView。
实际上我找到了 2 种方法：
1）使用`pTableView->setIndexWidget`
2）使用`pTableView->openPersistentEditor`和实现`ItemDelegate`.
我已经尝试了两种方法，问题是一样的。当我在`ItemDelegate`没有`openPersistentEditor`一切的情况下使用时效果很好。否则，据我了解，焦点和`HeaderView`单元格中的表格存在问题。

我想解决以下问题：

*   有时会显示 mainTableView 的背景而不是 cellTableView 的 HeaderView。
*   当我在 cellTableView 的单元格上按下一个键时，该单元格的编辑器未打开，但按下的符号设置为该单元格（编辑器打开-> 编辑器接收“FocusOut”信号-> 编辑器关闭，按下的值存储到细胞）。
    使用空格键或双击编辑效果很好。

有人可以解释如何解决这种行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:46:06.037

我找到了这个解决方案。
[http://qtadventures.wordpress.com/2012/02/04/adding-button-to-qviewtable/](http://qtadventures.wordpress.com/2012/02/04/adding-button-to-qviewtable/)
就我而言，我需要的更少，而且效果很好！当单元格被选中时，我手动将单元格切换到编辑模式。

# python - 如何添加变量的每个单独字符

> ID：15368356
> 
> 赞同：0
> 
> 时间：2013-03-12T17:44:54.827
> 
> 标签：python, encoding

我可以弄清楚如何将这两个字符加在一起，例如，9+9 将返回 8 而不是 18（如果这有意义的话）我需要让它适用于两个单独变量的 8 个字符。这是一个字符版本：

```
def code_digit(n, key):
    result = n + key
    mod = result%10
    print (mod)

>>> code_digit(9,9)
8 
```

您能否尽可能简化答案，我是python的初学者，谢谢。

我知道似乎没有目标，但这是我编程课上的作业。

它应该返回两个数字的总和，如果超过 9 则环绕，例如：

```
9+9 = (1)8
9+7 = (1)6
7+7 = (1)4
5+5 = (1)0 
```

忽略括号！

最终的代码应该像这样工作......

```
>>> code_block(’12341234’,’12121212’)
’24462446’
>>> code_block(’66554433’,’44556677’)
’00000000’ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:59:46.533

好的，我们正在重用您的`code_digit`函数，只是稍微简化一下，让它返回结果而不是打印它，并让它接受字符串：

```
def code_digit(n, key):
    return (int(n) + int(key)) % 10

def code_block(num1, num2):
    n1, n2 = str(num1), str(num2)
    return ''.join(map(str, [code_digit(d1, d2) for d1, d2 in zip(n1, n2)])) 
```

它有效！

```
>>> code_block(12341234, 12121212)
'24462446'
>>> code_block(66554433, 44556677)
'00000000' 
```

但我还没有完成。我们可以通过允许任意数量的数字来使它更复杂一点：

```
def code_digits(*digits):
    return sum(map(int, digits)) % 10

def code_blocks(*blocks):
    return ''.join(map(str, (code_digits(*digits) for digits in zip(*map(str, blocks)))))

>>> code_blocks(123, 124, 457)
'694'
>>> code_blocks(1234, 5678, 9012, 3456)
'8260' 
```

并且还想支持长度不等的数字（即`6`and `15`，解释为`06`and `15`）？当然。

```
from itertools import izip_longest

def code_blocks(*blocks):
    return ''.join(reversed(list(map(str, (code_digits(*digits) for digits in zip_longest(*map(reversed, map(str, blocks)), fillvalue='0'))))))

>>> code_blocks(6, 15)
'11'
>>> code_blocks(123, 12, 235, 346, 45457)
'45053' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:49:03.687

在某些时候，某些事情可能会变得过于 Pythonic，但如果我明白你在做什么，这应该可行：

```
def code_digit(aStr, bStr):
    return ''.join([ str((int(x[0]) + int(x[1]))%10) for x in zip(aStr, bStr)]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:55:06.397

好的！现在我知道你要什么了！

```
def code_digit(n, key):
    remainder = (n+key)/10
    mod = (n+key)%10
    print "(%s)%s"%(remainder, mod) 
```

# php - 根据用户点击的链接重定向用户

> ID：15368359
> 
> 赞同：2
> 
> 时间：2013-03-12T17:45:12.183
> 
> 标签：php, header

有没有办法根据用户点击的链接指定标题位置？如果可能的话，我更喜欢在 PHP 中执行此操作。

我想在用户单击几个按钮中的任何一个（即下一步、返回、保存等）时提交表单，并且一旦提交表单，他们每个人都需要以不同的方式重定向用户。

例子

*HTML - form2.html*

```
<form name="form2" id="form2" method="post" action="form2-exec.php">        
    <!-- Form Elements -->       
    <a href="form1.php"><input type="submit" value="BACK" /></a>
    <a href="form3.php"><input type="submit" value="SUBMIT" /></a>
</form> 
```

*PHP - form2-exec.php*

```
// Connect to database
// Insert & ON DUPLICATE KEY UPDATE Statements
header("location: form3.php"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T17:50:55.677

您不需要锚标记。你可以尝试类似的东西：

```
<input type="submit" name="whereto" value="BACK" />
<input type="submit" name="whereto" value="SUBMIT" /> 
```

PHP - form2-exec.php

```
// Connect to database
// Insert & ON DUPLICATE KEY UPDATE Statements
if ($_GET['whereto'] == 'BACK') {
    header("location: form1.php");
} elseif ($_GET['whereto'] == 'SUBMIT') {
    header("location: form3.php");
} 
```

[您可以在http://php.net/manual/en/reserved.variables.php](http://php.net/manual/en/reserved.variables.php)找到更多关于 PHP 预定义变量的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:47:44.087

您可以简单地使用`$_POST['submit']`which 将包含`value`作为值。也使用`name`提交按钮上的属性来确保它。

# php - 写入形式的 PHP 附件

> ID：15368361
> 
> 赞同：0
> 
> 时间：2013-03-12T17:45:21.480
> 
> 标签：php, javascript, html, forms, upload

我需要编辑以下表格，使其具有附加文件功能：

```
function _getWriteForm()
{
    $aForm = array(
        'form_attrs' => array(
            'name' => 'WallPostText',
            'action' => BX_DOL_URL_ROOT . $this->_oConfig->getBaseUri() . 'post/',
            'method' => 'post',
            'enctype' => 'multipart/form-data',
            'target' => 'WallPostIframe',
            'onsubmit' => 'javascript:return ' . $this->_sJsPostObject . '.postSubmit(this);'
        ),
        'inputs' => array(
            'content' => array(
                'type' => 'textarea',
                'name' => 'content',
                'caption' => '',
                'colspan' => true
            ),
            'submit' => array(
                'type' => 'submit',
                'name' => 'submit',
                'value' => _t('_wall_post'),
                'colspan' => true
            )
        ),
    ); 
```

我想先编辑 HTML 文件，但唯一的 HTML 代码是：

```
<!-- Post Text -->
<div class="wall-ptype-cnt wall_text">__post_wall_text__</div> 
```

有人可以帮我编辑数组以允许文件附件吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:13:51.733

你应该尝试这样的事情：

```
function _getWriteForm()
{
$aForm = array(
    'form_attrs' => array(
        'name' => 'WallPostText',
        'action' => BX_DOL_URL_ROOT . $this->_oConfig->getBaseUri() . 'post/',
        'method' => 'post',
        'enctype' => 'multipart/form-data',
        'target' => 'WallPostIframe',
        'onsubmit' => 'javascript:return ' . $this->_sJsPostObject . '.postSubmit(this);'
    ),
    'inputs' => array(
        'content' => array(
            'type' => 'textarea',
            'name' => 'content',
            'caption' => '',
            'colspan' => true
        ),
         'file' => array(
            'type' => 'file',
            'name' => 'upload_file',
            'caption' => 'Upload',
            'colspan' => true
        ),
        'file_two' => array(    //I added a second input file
            'type' => 'file',
            'name' => 'upload_file_two',
            'caption' => 'Upload',
            'colspan' => true
        ),
        'submit' => array(
            'type' => 'submit',
            'name' => 'submit',
            'value' => _t('_wall_post'),
            'colspan' => true
        )
    ),
); 
```

我希望它有所帮助。

萨卢多斯 ;)

# c++ - C ++对临时的奇怪引用

> ID：15368364
> 
> 赞同：-2
> 
> 时间：2013-03-12T17:45:27.317
> 
> 标签：c++

我不明白为什么以下代码在编译时失败并出现“返回对临时的引用”。对我来说单身不能是临时的，因为它是静态的！？

谢谢

```
#include <memory>

class Parent {
public:
    static const std::shared_ptr<Parent>& get_default_value();
    static const std::shared_ptr<Parent>& get_some_other_value();
};

class Child: public Parent {
public:
    Child(){}
    static const std::shared_ptr<Child>& singleton;
};

const std::shared_ptr<Child>& singleton = std::make_shared<Child>();

const std::shared_ptr<Parent>& Parent::get_default_value() {
    return singleton;
}

const std::shared_ptr<Parent>& Parent::get_some_other_value() {
    //FILL ME
} 
```

[证明](http://stacked-crooked.com/view?id=603869b926fe735d11f85fa8e91f8095-18aa934a8d82d638dde2147aa94cac94)

编辑：父母的默认值是孩子的单例。（之前还有一些其他名称，但这很令人困惑）。

编辑2：我还想引用shared_pointers，因为默认情况很多而且无论如何都是单例，所以最好节省空间

编辑 3：我想要一个 std::shared_ptr& 作为类型结果，因为我希望接口对于默认值和其他值保持一致

编辑 4：由于不相关的原因，其他值需要 shared_ptr<>。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T17:55:39.797

您的问题是`Child::singleton`type`std::shared_ptr<Child>&`但`get_singleton`返回`std::shared_ptr<Parent>&`。`std::shared_ptr<Child>`可以转换为`std::shared_ptr<Parent>`但不能转换为`std::shared_ptr<Parent>&`，因此它必须创建一个临时类型的对象`std::shared_ptr<Parent>`并返回对该对象的引用。

无论如何，通常没有理由`shared_ptr`通过引用返回 a 。只需按值返回，它就会编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T17:48:52.813

没有单例像你声明的那样是临时的。要声明静态变量，请执行以下操作：

```
const std::shared_ptr<Child>& Child::singleton = std::make_shared<Child>(); 
```

注意`Child::`? 同样在函数 get_singleton 中使用：

```
const std::shared_ptr<Parent>& Parent::get_singleton() {
    return Child::singleton;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T08:27:14.407

根据 Dirk 的分析，转换是问题所在，这是一个很好的解决方案：

```
class Parent {
public:
    static const std::shared_ptr<Parent>& get_singleton();
};

class Child: public Parent {
public:
    Child(){}
    static const std::shared_ptr<Parent>& singleton;
};

const std::shared_ptr<Parent>& singleton = std::make_shared<Child>();

const std::shared_ptr<Parent>& Parent::get_singleton() {
    return singleton;
} 
```

[证明](http://stacked-crooked.com/view?id=f394b9f1ea5c527add5120cf691a59a5-18aa934a8d82d638dde2147aa94cac94)

# r - R：加载库与将它们指定为描述/命名空间文件中的导入

> ID：15368365
> 
> 赞同：1
> 
> 时间：2013-03-12T17:45:31.070
> 
> 标签：r, namespaces, package

我有一堆我的代码需要的包：

```
library(GenomicRanges, GenomicFeatures, biomaRt,knitr, ggplot2,gridSVG,gridExtra) 
```

有一次，当我将我的代码包装到一个 R 包中，并将所有提到的包放在描述文件的 Imports 插槽中，以及命名空间文件中的相应内容时，我会收到如下错误：

```
## Error: could not find function 'ggplotGrob'
## Error: could not find function 'pushViewport'
## Error: could not find function 'newXMLNode' 
```

任何提示我应该往哪个方向走？

我的描述文件：

```
Package: myQC package
Type: Package
Title: Quality Control 
Version: 0.99
Date: 2013-03-12
Author: Stefanie 
Maintainer: my_email_address
Description: blabla
License: GPL-2
Depends: R (>= 2.15.3)
Imports: GenomicRanges, GenomicFeatures, biomaRt, knitr, xtable, ggplot2, gridSVG,gridExtra, IRanges 
```

我的命名空间文件：

```
import(GenomicRanges)
import(GenomicFeatures)
import(biomaRt)
import(knitr)
import(xtable)
import(ggplot2)
import(gridSVG)
import(gridExtra)
import(IRanges) 
```

实际上我不需要这些包的所有功能，所以稍后我将指定我将导入哪些函数/方法。这只是第一次射击..最好，

# c++ - 用于多线程环境的具有 C/C++ API 的嵌入式脚本语言

> ID：15368366
> 
> 赞同：0
> 
> 时间：2013-03-12T17:45:31.230
> 
> 标签：c++, python, c, scripting, lua

我正在寻找一种嵌入式脚本语言。

我不需要任何花哨的东西，只需要条件、循环、逻辑和算术运算等基本结构。

我有以下要求

1.  线程友好 - 即没有“全局解释器锁”（python 出于这个原因）
2.  廉价的“解释器实例”创建——我可能会有 100 个这样的。我知道 lua 会为每个创建一个单独的 gc 线程，`Lua_State`这意味着 lua 已经出局了。
3.  没有 gc 或 refcounting 或任何其他“动态”内存管理。一旦脚本执行，它应该简单地销毁任何变量。再次python和lua都出来了。
4.  当然，它应该很快并且内存占用少。
5.  应该在 windows、GNU/Linux 和 MacOS X 上工作

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T18:21:18.233

重新考虑 Lua：

1.  是的。
2.  是的。Lua 根本不创建任何操作系统线程。
3.  在您创建大量对象之前，垃圾收集不会开始。您只需将其关闭即可。要在脚本执行后销毁所有变量，只需关闭状态即可。
4.  是的。
5.  是的。

# ajax - 出现类似“malformedXML：更新期间：j_idt8:showTime not found”之类的错误

> ID：15368367
> 
> 赞同：1
> 
> 时间：2013-03-12T17:45:32.713
> 
> 标签：ajax, jsf

我正在使用 jsf 2.0 和 ajax，当我从下拉框中选择项目时，我希望它显示 showTime 列表中的项目

xhtml 文件：

```
 <tr>
                <td>Movies:</td>
                <td>
                    <h:selectOneMenu value="#{locationBean.movie}"
                                     disabled="#{locationBean.movieListDisabled}"
                                     id="movieList">
                        <f:selectItems value="#{locationBean.movies}"/>
                        <f:ajax render="showTime"/>
                    </h:selectOneMenu></td>
            </tr>
            <tr>
                <td>Availablity:</td>
                <td>
                    <ui:repeat value="#{locationBean.showTime}" var="item" id="showTime">
                        <div><h:inputText value="#{item.value}" id="showTime"/></div>
                    </ui:repeat>
                </td>
            </tr> 
```

从 bean 我返回 showTiming 的列表..

如何克服这个错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:21:01.810

来自 BalusC：“它本身不会生成任何 HTML，因此 JS/Ajax 无法在 HTML 中找到任何要更新/渲染的内容”

尝试这样的事情：

```
<tr>
    <td>Movies:</td>
    <td>
        <h:selectOneMenu value="#{locationBean.movie}" disabled="#{locationBean.movieListDisabled}" id="movieList">
            <f:selectItems value="#{locationBean.movies}"/>
            <f:ajax event="change" render="showTimePanel"/>
        </h:selectOneMenu>
    </td>
</tr>
<tr>
    <td>Availablity:</td>
    <td>
        <h:panelGroup id="showTimePanel">
            <ui:repeat value="#{locationBean.showTime}" var="item">
                <div><h:inputText value="#{item.value}"></div>
            </ui:repeat>
        </h:panelGroup>
    </td>
</tr> 
```

# c# - 报告代码执行和设计模式？

> ID：15368368
> 
> 赞同：3
> 
> 时间：2013-03-12T17:45:32.643
> 
> 标签：c#, unit-testing, design-patterns, logging, report

首先，我要感谢大家对 Stack Overflow 社区的持续贡献！多年来，我一直是 Stack Overflow 的成员，并且比任何其他在线资源都更依赖您的输入。尽管我会尽可能地参与并回答成员的问题，但有时我会发现自己陷入困境并需要帮助。

说到我有一个不寻常的代码问题。我正在用 C# 编写一个 API 库，该库需要能够从 WPF/Windows 窗体应用程序调用，也可以从单元测试代码中调用。

问题是我需要能够报告（在 Excel 中）当从 WPF/Windows 窗体应用程序中调用 API 时库的每个方法是否正确执行，以及一些其他元数据和可选的返回类型。

当代码在单元测试中使用时，我并不真正关心报告，但我确实需要能够生成关于 API 调用是否正确执行的断言。

例如，如果在单元测试中我们有`Test Initialize`一部分，API 调用之一可能是创建一个域用户供测试方法使用。另一个人也可以创建一个域组，以便用户拥有适当的组成员身份。

为了适应 WPF/WinForms 对 API 的使用，我一直在重写 API 中的每个函数以返回一个`OperationStep`类型，希望在所有 API 调用都执行`IEnumerable<OperationStep>`后，我可以将其写入 CSV 文件。

所以问题是有没有更简单的方法来实现我到目前为止所做的事情？考虑到 API 库包含数百个类似的方法，报告的编写非常繁琐且耗时。样品描述如下：

```
OperationStep<PrincipalContext> createDomainConnectionStep = DomainContext.Current.GetPrincipalContext(settings.DomainInfo);
OperationStep<UserPrincipal> createDomainUserStep = DomainContext.Current.CreateUser(createDomainConnectionStep.Context, settings.TestAccountInfo.Username, settings.TestAccountInfo.Password);
OperationStep<GroupPrincipal> createDomainGroupStep = DomainContext.Current.CreateGroup(createDomainConnectionStep.Context, settings.TestAccountInfo.UserGrupName); 
```

其中 DomainContext 是一个单例对象，其功能是连接到域控制器并创建用户、组并将用户与组关联。

请注意，第二个和第三个方法调用都需要第一个的输出，因此保证需要`public T Context`在`OperationResult`对象内具有如下所述的。

该`OperationStep`对象由`IOperation`接口继承的以下属性组成，但`public T Context`.

```
public class OperationStep<T> : IOperation
{
    /// <summary>
    /// Denotes the Logical Name of the current operation
    /// </summary>
    public string Name { get; set; }

    /// <summary>
    /// Denotes the stage of execution of the current operation: Setup, Execution, Validation, Cleanup 
    /// </summary>
    public OperationStage Stage { get; set; }

    /// <summary>
    /// Denotes whether the test step completed properly or failed.
    /// </summary>
    public OperationResult Result { get; set; }

    /// <summary>
    /// Denotes the return type of the test method.
    /// </summary>
    public T Context { get; set; }

    /// <summary>
    /// Denotes any other relevant information about the test step
    /// </summary>
    public string Description { get; set; }

    /// <summary>
    /// If the test step result is failed, this should have the stack trace and the error message.
    /// </summary>
    public string Error { get; set; }
} 
```

该方法调用本身有点臃肿和乏味，但这里有一个示例。

```
public class DomainContext
{
    private static volatile DomainContext currentContext;
    private static object synchronizationToken = new object();

    /// <summary>
    /// default ctor.
    /// </summary>
    private DomainContext() { }

    /// <summary>
    /// Retrieves the Current DomainContext instance.
    /// </summary>
    public static DomainContext Current
    {
        get
        {
            if (currentContext == null)
            {
                lock (synchronizationToken)
                {
                    if (currentContext == null)
                    {
                        currentContext = new DomainContext();
                    }
                }
            }
            return currentContext;
        }
    }

    /// <summary>
    /// Establishes a connection to the domain.
    /// </summary>
    /// <param name="domainInfo"></param>
    /// <returns></returns>
    public OperationStep<PrincipalContext> GetPrincipalContext(DomainInfo domainInfo)
    {
        OperationStep<PrincipalContext> result = new OperationStep<PrincipalContext>();
        result.Name = "Establish Connection to Active Directory";
        result.Result = OperationResult.Success;
        result.Stage = OperationStage.Setup;
        result.Description = string.Format("Domain Name: {0}, Default Containter: {1}", domainInfo.FQDN, domainInfo.Container);

        try
        {
            ContextType contextType = this.GetContextType(domainInfo.DomainType);
            PrincipalContext principalContext;

            try
            {
                principalContext = new PrincipalContext(contextType, domainInfo.FQDN, domainInfo.Container);
            }
            catch
            {
                throw new Exception("Unable to establish connection to Active Directory with the specified connection options.");
            }

            if (principalContext != null)
            {
                bool authenticationResult = principalContext.ValidateCredentials(domainInfo.Username, domainInfo.Password);

                if (!authenticationResult)
                {
                    throw new Exception("Unable to authenticate domain admin user to Active Directory.");
                }

                result.Context = principalContext;
                result.Result = OperationResult.Success;
            }
        }
        catch(Exception ex)
        {
            result.Error = ex.Message;
            result.Result = OperationResult.Failure;
        }

        return result;
    }
} 
```

当所有方法调用都已执行理论上，我应该有一个`IEnumerable<IOperation>`在 win 表单的情况下我可以写入 csv 文件（在 MS Excel 中查看）或在单元测试的情况下我可以简单地省略额外信息和忽略（除了连续执行的方法和`T Context`属性）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:53:50.733

如果我对您的理解正确 - 所有这些`OperationStep`仅用于记录。那么为什么不启用简单的 .NET 日志记录呢？在您方便的地方记录所需的信息。您可以使用`TraceSource`with`DelimetedTraceListener`写入 .csv 文件。比那更多的。您可以将日志记录逻辑移动到`Strategy`类并在单元测试中覆盖其日志记录方法，以便调用 Assert 方法而不是记录日志。

# html - WordPress 主题奇怪

> ID：15368371
> 
> 赞同：0
> 
> 时间：2013-03-12T17:45:42.550
> 
> 标签：html, css, wordpress, themes, wordpress-theming

我已经在我的 WordPress 实例中应用了一个名为 Karma 的主题，并且有一个问题（他们否认）我已经有一段时间了，而且似乎无法用它的 CSS 来解决。

问题是我的网站[www.LiveCarePC.com](http://www.LiveCarePC.com)是一个响应式网站。当它为移动设备或平板电脑调整大小时，.jqslider 似乎无法正确调整自身大小。它只是成为困扰您的灰色条。

桌面视图：

![在此处输入图像描述](../Images/99b285898e709218304945902352ee0a.png)

移动视图：

![在此处输入图像描述](../Images/e6557741597cad8b896828bac49dbd0d.png)

Karma 主题移动视图（[http://themes.truethemes.net/Karma/homepage-jquery-2-2](http://themes.truethemes.net/Karma/homepage-jquery-2-2)上的实时预览）：

![在此处输入图像描述](../Images/2396dada2f30a431e2e657f8bda5bcc5.png)

任何帮助将不胜感激。显然，您可以检查该站点并在那里查看其来源。

*注意：我已经重新安装了 Wordpress 和主题本身以及所有插件，所以不是这样。我只是在代码中寻找解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:28:48.763

对于遇到此错误的其他任何人，这似乎是其中一个 css 文件中的错误。下面是修复。

在 karma-royal-blue.css 文件中，您必须注释掉其中一行，如下所示。

```
/*------------------------------------------------*/
/* HEADER 
/*------------------------------------------------*/
#header .header-holder {background:#182947 url(../images/skins/karma-royal-blue/bg-header-holder.jpg) 0 0 repeat-x !important;} 

/* .big-banner #header .header-holder {background:#182947 url(../images/skins/karma-royal-blue/bg-big-header-holder.png) 0 0 repeat-x !important;} */

.top-block {background:#13223C !important;} 
```

注释掉的行是需要注释掉的行。这修复了错误。

此修复适用于 Karma Wordpress 主题中的皇家蓝配色方案。它也可能适用于其他人。

# xamarin - 如何获得在 Xamarin Studio 中创建 iOS 解决方案的选项？

> ID：15368374
> 
> 赞同：2
> 
> 时间：2013-03-12T17:45:53.487
> 
> 标签：xamarin, xamarin.ios, xamarin-studio

我已经安装了 Xamarin Studio，我可以很好地创建 Android 解决方案。不过，我没有创建 iOS 项目的选项。

![Xamarin 工作室](../Images/3d1191aa51d2911d48b68c0b1a709123.png)

我已经尝试重新安装多次，但没有任何变化。运行 Windows 8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:22:23.423

我挖出了一个论坛帖子，指出 Xamarin Studio 仅支持 Mac 上的 iOS。我在任何教程或文档中都没有看到这一点，因此希望这对其他人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T05:16:36.783

我尝试在 Mac OS 中安装 Xamarin，我可以在模拟器和 iPhone 设备中成功创建 iOS 项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-09T10:11:52.560

目前无法在 Windows 上使用 Xamarin Studio 为 iOS 进行开发。

如果你想使用 Windows，你可以使用 Visual Studio（如果你也有 Xamarin.iOS 商业许可证）。

如果您想使用 Xamarin Studio，您可以在 Mac 上执行此操作（这适用于任何许可证）。

请注意，即使您使用的是 Visual Studio，您也总是需要 Mac。

# mono - OS X 上的 HIDAPI 选项

> ID：15368376
> 
> 赞同：1
> 
> 时间：2013-03-12T17:45:57.417
> 
> 标签：mono, serial-port, hidapi

我一直在使用 C 语言使用 HIDAPI，并尝试让 Mono 使用互操作与 HIDAPI 进行通信。我进行了很多搜索，但找不到任何让 HIDAPI 在 OS X 上使用 Mono 的人。

有谁知道我是否可以将使用 HIDAPI 的 HID 设备的输出重定向到本地虚拟串行端口，然后让 Mono 从串行端口读取？

另一种选择，有人知道我是否可以使用 Arduino leonardo 或 Circuits@Home USB Host Shield 之类的东西吗？

至少在我可以整理出 Mono 上的 PInvoke 之前。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-23T22:58:11.210

我从其他地方找到并改编了这段代码，尽管我一生都找不到源代码。如果有人知道，请告诉我，以便我可以正确归因并链接到它。它在 Windows 和 OS X 上对我来说都运行良好。显然，你必须为每个平台构建 hidapi。

```
using System;
using System.Globalization;
using System.IO;
using System.Runtime.InteropServices;
using System.Text;
using System.Threading;

namespace HidApiCommunicationLayer
{
    internal class HidApiInteropCommLayer
    {
        #region Interop

#if WINDOWS
        private const string HIDAPI_DLL = "hidapi.dll";
#else
        private const string HIDAPI_DLL = "hidapi.dylib";
#endif

        protected IntPtr _device;

        private Object _locker = new object();

        public bool IsOpen()
        {
            return _device != IntPtr.Zero;
        }

        public void Open(ushort vid, ushort hid, string serial)
        {
            if (_device != IntPtr.Zero) throw new Exception("a device is already opened; close it first.");
            IntPtr ret = hid_open(vid, hid, serial);
            _device = ret;
            //if (_device != IntPtr.Zero)
            //    hid_set_nonblocking(_device, true);
        }

        public int Read(byte[] buffer, int length)
        {
            lock (_locker)
            {
                AssertValidDev();
                int ret = hid_read_timeout(_device, buffer, (uint)length, 1);
                if (ret < 0)
                    throw new Exception("Failed to Read.");

                return ret;
            }
        }

        public void Close()
        {
            AssertValidDev();
            hid_close(_device);
            _device = IntPtr.Zero;
        }

        public int ExitHidAPI()
        {
            return hid_exit();
        }

        public String GetProductString()
        {
            AssertValidDev();
            byte[] buf = new byte[1000];
            int ret = HidApiInteropCommLayer.hid_get_product_string(_device, buf, (uint)(buf.Length / 4) - 1);
            if (ret < 0)
                throw new Exception("failed to receive product string");
            return EncodeBuffer(buf);
        }

        public String GetManufacturerString()
        {
            AssertValidDev();
            byte[] buf = new byte[1000];
            int ret = HidApiInteropCommLayer.hid_get_manufacturer_string(_device, buf, (uint)(buf.Length / 4) - 1);
            if (ret < 0)
                throw new Exception("failed to receive manufacturer string");
            return EncodeBuffer(buf);
        }

        public int GetFeatureReport(byte[] buffer, int length)
        {
            AssertValidDev();
            int ret = hid_get_feature_report(_device, buffer, (uint)length);
            if (ret < 0)
                throw new Exception("failed to get feature report");
            return ret;
        }

        public int SendFeatureReport(byte[] buffer)
        {
            int ret = hid_send_feature_report(_device, buffer, (uint)buffer.Length);
            //if (ret < 0)
            //  throw new Exception ("failed to send feature report");
            return ret;
        }

        public int Write(byte[] buffer)
        {
            lock (_locker)
            {
                AssertValidDev();
                int ret = hid_write(_device, buffer, HID_MAX_PACKET_SIZE + 1);
                //if (ret < 0)
                //    Custom logging
                return ret;
            }
        }

        public String Error()
        {
            AssertValidDev();
            IntPtr ret = hid_error(_device);
            return Marshal.PtrToStringAuto(ret);
        }

        public string GetIndexedString(int index)
        {
            AssertValidDev();
            byte[] buf = new byte[1000];
            int ret = HidApiInteropCommLayer.hid_get_indexed_string(_device, index, buf, (uint)(buf.Length / 4) - 1);
            if (ret < 0)
                throw new Exception("failed to receive indexed string");
            return EncodeBuffer(buf);
        }

        public string GetSerialNumberString()
        {
            AssertValidDev();
            byte[] buf = new byte[1000];
            int ret = HidApiInteropCommLayer.hid_get_serial_number_string(_device, buf, (uint)(buf.Length / 4) - 1);
            if (ret < 0)
                throw new Exception("failed to receive serial number string");
            return EncodeBuffer(buf);
        }

        private string EncodeBuffer(byte[] buffer)
        {
            return Encoding.Unicode.GetString(buffer).Trim('\0');
        }

        private void AssertValidDev()
        {
            if (_device == IntPtr.Zero) throw new Exception("No device opened");
        }

        #region DllImports

        [DllImport(HIDAPI_DLL)]
        private static extern int hid_read(IntPtr device, [Out, MarshalAs(UnmanagedType.LPArray)] byte[] data, uint length);

        [DllImport(HIDAPI_DLL)]
        private static extern int hid_read_timeout(IntPtr device, [Out, MarshalAs(UnmanagedType.LPArray)] byte[] data, uint length, int timeout);

        [DllImport(HIDAPI_DLL)]
        private static extern IntPtr hid_open(ushort vid, ushort pid, [MarshalAs(UnmanagedType.LPWStr)] string serial);

        [DllImport(HIDAPI_DLL)]
        private static extern void hid_close(IntPtr device);

        [DllImport(HIDAPI_DLL)]
        private static extern int hid_init();

        [DllImport(HIDAPI_DLL)]
        private static extern int hid_exit();

        [DllImport(HIDAPI_DLL)]
        private static extern int hid_get_product_string(IntPtr device, [Out] byte[] _string, uint length);

        [DllImport(HIDAPI_DLL)]
        private static extern int hid_get_manufacturer_string(IntPtr device, [Out] byte[] _string, uint length);

        [DllImport(HIDAPI_DLL)]
        private static extern int hid_get_feature_report(IntPtr device, [Out, MarshalAs(UnmanagedType.LPArray)] byte[] data, uint length);

        [DllImport(HIDAPI_DLL)]
        private static extern int hid_get_serial_number_string(IntPtr device, [Out] byte[] serial, uint maxlen);

        [DllImport(HIDAPI_DLL)]
        private static extern int hid_get_indexed_string(IntPtr device, int string_index, [Out] byte[] _string, uint maxlen);

        [DllImport(HIDAPI_DLL)]
        private static extern IntPtr hid_error(IntPtr device);

        [DllImport(HIDAPI_DLL)]
        private static extern int hid_send_feature_report(IntPtr device, [In, MarshalAs(UnmanagedType.LPArray)] byte[] data, uint length);

        [DllImport(HIDAPI_DLL)]
        private static extern int hid_set_nonblocking(IntPtr device, [In, MarshalAs(UnmanagedType.SysInt)] bool nonblock);

        [DllImport(HIDAPI_DLL)]
        private static extern int hid_write(IntPtr device, [In, MarshalAs(UnmanagedType.LPArray)] byte[] data, uint length);

        [DllImport(HIDAPI_DLL)]
        private static extern IntPtr hid_open_path([In, MarshalAs(UnmanagedType.LPStr)] string path);

        #endregion DllImports

        #endregion Interop

        #region Constructors

        public static HidApiInteropCommLayer GetDevice(ushort vid, ushort pid)
        {
            try
            {
                HidApiInteropCommLayer layer = new HidApiInteropCommLayer();
                layer.Open(vid, pid, null);
                return layer._device == IntPtr.Zero ? null : layer;
            }
            catch (System.BadImageFormatException fx)
            {
                //Custom logging
                return null;
            }
            catch (Exception ex)
            {
                //Custom logging
                return null;
            }
        }

        #endregion Constructors

        private const int HID_MAX_PACKET_SIZE = 1024;

        #region ICommunicationLayer

        public void Init()
        {
            try
            {
                if (IsOpen())
                {
                    ContinueReadProcessing = true;
                    ReadThread = new Thread(new ThreadStart(ReadLoop));
                    ReadThread.Name = "HidApiReadThread";
                    ReadThread.Start();
                }
                else
                {
                    Disconnect();
                }
            }
            catch (Exception ex)
            {
                //Custom logging
                throw;
            }
        }

        public bool SendData(byte[] data)
        {
            try
            {
                MemoryStream stream = new MemoryStream(HID_MAX_PACKET_SIZE + 1);
                stream.WriteByte(0);
                stream.Write(data, 0, HID_MAX_PACKET_SIZE);
                int ret = Write(stream.ToArray());
                if (ret >= 0)
                    return true;
                else
                {
                    return false;
                }
            }
            catch (Exception ex)
            {
                //Custom logging
                return false;
            }
        }

        public event EventHandler<DataEventArgs> DataReceived;

        public event EventHandler Disconnected;

        public void Start()
        {
            ContinueReadProcessing = true;
        }

        public void Stop()
        {
            Disconnect();
        }

        #endregion ICommunicationLayer

        private Thread ReadThread = null;

        protected volatile bool ContinueReadProcessing = true;

        private void ReadLoop()
        {
            var culture = CultureInfo.InvariantCulture;
            Thread.CurrentThread.CurrentCulture = culture;
            Thread.CurrentThread.CurrentUICulture = culture;
            Thread.CurrentThread.Priority = ThreadPriority.AboveNormal;

            while (ContinueReadProcessing)
            {
                try
                {
                    byte[] report = new byte[HID_MAX_PACKET_SIZE];

                    var result = Read(report, HID_MAX_PACKET_SIZE);

                    if (result > 0)
                    {
                        DataReceived(this, new DataEventArgs(report));
                    }
                    else if (result < 0)
                    {
                        Disconnect();
                    }
                }
                catch (Exception ex)
                {
                    Disconnect();
                }

                Thread.Sleep(1);
            }
        }

        private void Disconnect()
        {
            ContinueReadProcessing = false;
            Disconnected(this, EventArgs.Empty);
        }

        #region IDisposable Members

        public void Dispose()
        {
            ContinueReadProcessing = false;
            ReadThread.Join(500);
            if (ReadThread.IsAlive)
            {
                ReadThread.Abort();
            }

            if (IsOpen())
                Close();
            int res = ExitHidAPI();
        }

        #endregion IDisposable Members
    }

    internal class Utf32Marshaler : ICustomMarshaler
    {
        private static Utf32Marshaler instance = new Utf32Marshaler();

        public static ICustomMarshaler GetInstance(string s)
        {
            return instance;
        }

        public void CleanUpManagedData(object o)
        {
        }

        public void CleanUpNativeData(IntPtr pNativeData)
        {
            Marshal.FreeHGlobal(pNativeData);
            //UnixMarshal.FreeHeap(pNativeData);
        }

        public int GetNativeDataSize()
        {
            return IntPtr.Size;
        }

        public IntPtr MarshalManagedToNative(object obj)
        {
            string s = obj as string;
            if (s == null)
                return IntPtr.Zero;
            return Marshal.StringToHGlobalAuto(s);
        }

        public object MarshalNativeToManaged(IntPtr pNativeData)
        {
            return Marshal.PtrToStringAuto(pNativeData);
        }
    }

    public class DataEventArgs : EventArgs
    {
        public DataEventArgs(byte[] data)
        {
            Data = data;
        }

        public byte[] Data { get; private set; }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T14:25:50.313

Arduino Leonardo 不能充当 USB 主机。

但原则上，是的，您可以让设备充当设备端的 CDC 串行端口，并让它充当 HID 设备的主机 USB。

或者，您可以完全跳过 HIDAPI 步骤并使用[HidSharp](http://www.zer7.com/software.php?page=hidsharp)。:) 它将直接 P/Invoke 到 MacOS X 本机 API。

希望这可以帮助

詹姆士

# php - 对象运算符的数组语法问题

> ID：15368384
> 
> 赞同：0
> 
> 时间：2013-03-12T17:46:22.590
> 
> 标签：php, arrays, object, syntax

```
$transaction->setFields(
    array(
    'first_name' => $_POST['x_first_name'],
    'last_name' => $_POST['x_last_name'],
    )

mysql_query("INSERT INTO table_one (`first_name`, `last_name`) 
    VALUES ("$transaction->setFields['x_first_name']",'last_name')"); 
```

从这个数组调用有问题，必须是语法，但我找不到很好的参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:52:08.623

数组与否，当您从双引号内访问变量时，请始终使用大括号。

```
mysql_query("INSERT INTO table_one (`first_name`, `last_name`) 
VALUES ("{$array['x_first_name']}",'{$array['last_name']}')"); 
```

如果您可以在此页面中搜索“复杂（卷曲）语法”，您可以找到更多信息：http: [//php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:52:26.237

您的数组缺少 a`);`并且最后一个元素有一个尾随逗号。此外，您在查询中的引号是错误的。试试这个：

```
$transaction -> setFields(array('first_name' => $_POST['x_first_name'], 'last_name' => $_POST['x_last_name']));
mysql_query("INSERT INTO table_one (`first_name`, `last_name`) VALUES ('" . $transaction -> setFields['x_first_name'] . "','last_name')"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:54:46.310

很高兴看到`$transaction`. 也许使用 SPL Array/Iterator 之类的？假设没有其他吸气剂，但也许有`getFields()?`

```
$fields = $transaction->getFields(); 
```

或者只使用您在 setter 中传递的数组。无论哪种方式，使用`[]`...

```
mysql_query("INSERT INTO table_one (`first_name`, `last_name`) 
VALUES ("{$fields['x_first_name']}",'last_name')"); 
```

[在PDO](https://stackoverflow.com/questions/13569/mysqli-or-pdo-what-are-the-pros-and-cons)和正在折旧的 mysql_*上插入简介...

# android - Android XML布局中的xmlns:tools是什么意思？

> ID：15368386
> 
> 赞同：32
> 
> 时间：2013-03-12T17:46:26.957
> 
> 标签：android, xml, android-layout, android-tools-namespace

例如，在：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
... 
```

我需要放吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-12T17:48:18.247

它定义了文档的 XML 命名空间。你应该把它，否则标签`<RelativeLayout>`不能被解析器识别。

命名空间是 XML 文档包含来自不同供应商的标签的一种方式。通过使用`xmlns`您声明的属性，默认情况下，您使用的是此处定义的 XML 元素：http: [//schemas.android.com/apk/res/android](http://schemas.android.com/apk/res/android)（请注意，此链接已损坏 -[此讨论](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/2FtsLQ4wESY)解释了原因）。

您还声明了额外的命名空间，`tools`这不是您的默认命名空间，因此当引用其中定义的元素或属性时，您必须添加`tools`前缀，例如：

```
tools:context=".SomeActivity" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-06-21T18:27:53.867

以下是来自 Android 开发门户的有用链接：[https ://developer.android.com/studio/write/tool-attributes.html](https://developer.android.com/studio/write/tool-attributes.html)

它说

> Android Studio 支持工具命名空间中的各种 XML 属性，这些属性支持设计时功能（例如在片段中显示哪种布局）或编译时行为（例如将哪种收缩模式应用于您的 XML 资源）。当您构建应用程序时，构建工具会删除这些属性，因此不会影响您的 APK 大小或运行时行为。

即工具命名空间有助于设计 UI，所有带有前缀“工具”的属性将在构建时被删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T18:18:21.940

事实上，当你这样做时：

```
<RelativeLayout android:id> </RelativeLayout> 
```

xml 将调用[http://schemas.android.com/apk/res/android:id](http://schemas.android.com/apk/res/android:id)而不是调用 android:id 。它只是声明您可以在 xml 中使用的所有属性和视图的页面。

这是一个解释。 [http://www.w3schools.com/xml/xml_namespaces.asp](http://www.w3schools.com/xml/xml_namespaces.asp)

# angularjs - 为什么我的工厂没有被实例化/注入？

> ID：15368387
> 
> 赞同：0
> 
> 时间：2013-03-12T17:46:28.267
> 
> 标签：angularjs

为什么 readingController 无法使用 Romanize 服务？它总是说 Romanize 在函数内部是未定义的。如何获得范围内的服务？

```
var readingController = function (scope, Romanize){
    scope.currentMaterial = scope.sections[scope.sectionNumber].tutorials[scope.tutorialNumber].material;
    Romanize;
}

var app = angular.module('Tutorials', ['functions', 'tutorials']).controller('getAnswers', function ($scope, $element) {
    $scope.sectionNumber = 0;
    $scope.tutorialNumber = 0;
    $scope.questionNumber = 0;
    $scope.sections = sections;
    $scope.loadFromMenu = function (sec, tut, first) {
        if (tut === $scope.tutorialNumber && sec === $scope.sectionNumber && !first) {//if clicked on already playing tut
            return;
        } 
        if (tut !== undefined && sec !== undefined) {
            $scope.tutorialNumber = tut;
            $scope.sectionNumber = sec;
        }
        for (var x in sections) {
            sections[x].active = "inactive";
            for (var y in sections[x].tutorials){
                sections[x].tutorials[y].active = "inactive";
            }
        }
        var section = sections[$scope.sectionNumber];
        section.active = "active";
        section.tutorials[$scope.tutorialNumber].active = "active";
        $scope.questionNumber = 0;
        $scope.currentTutorialName = sections[$scope.sectionNumber].tutorials[$scope.tutorialNumber].name;
        $scope.$apply();
        if ($scope.sectionNumber === 0){
            readingController($scope, app.Romanize);
        }else if ($scope.sectionNumber === 1){
            conjugationController($scope);
        }
    };

    $scope.loadFromMenu(0,0, true);

    var conjugationController = function (){
        var loadNewVerbs = function (scope) {
            scope.currentVerbSet = scope.sections[scope.sectionNumber].tutorials[scope.tutorialNumber].verbs;
            if (scope.currentVerbSet === undefined) {
                alert("Out of new questions");
                return
            }
            scope.verbs = conjugate(scope.currentVerbSet[scope.questionNumber]);
            scope.correct = scope.verbs.conjugations[0].text;
            fisherYates(scope.verbs.conjugations);
            scope.$apply();
        };
        loadNewVerbs($scope);
        $scope.checkAnswer = function (answer) {
            if($scope.sectionNumber === 0 && $scope.tutorialNumber === 0 && $("video")[0].currentTime < 160){
                $scope.message = "Not yet!";
                $(".message").show(300).delay(900).hide(300);
                return;
            }
            answer.colorReveal = "reveal-color";
            if (answer.text === $scope.correct) { //if correct skip to congratulations          
                $scope.questionNumber++;
                setTimeout(function () {
                    loadNewVerbs($scope);
                    $scope.$apply();
                }, 2000);
            } else { //if incorrect skip to try again msg
                if ($scope.sectionNumber === 0 && $scope.tutorialNumber === 0) {
                    start(160.5);
                    pause(163.8)
                }
            }
        };
    };

});

app.factory('Romanize', ['$http', function($http){
    return{
      get: function(){
          $http.get(scope.sections[scope.sectionNumber].romanizeService).success(function(data) {
                $scope.romanized = data;
            });
        }
    };
}]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:57:27.520

**更新：**基于以下评论/讨论：

对于要实例化的服务，它必须被注入到某个地方——不仅仅是任何地方——Angular 接受可注入的地方。只需将其注入您的 getAnswers 控制器——`.controller('getAnswers', function ($scope, $element, Romanize)`然后将其传递给您的“控制器”函数：`readingController($scope, Romanize)`.

因为我不认为 readingController 是一个真正的 Angular 控制器，你可以随意命名参数，所以`scope`应该没问题。

* * *

原始尝试的答案：

`$scope`不要注入`scope`你的控制器：

```
var readingController = function ($scope, Romanize){ 
```

然后我没有收到任何错误：[Plunker](http://plnkr.co/edit/4RCsuKNNOY6JoR8ZMnky?p=preview)。

# android - 从AndroidApplication扩展到Game

> ID：15368388
> 
> 赞同：0
> 
> 时间：2013-03-12T17:46:35.153
> 
> 标签：android, libgdx

当您使用 libgdx 启动项目时，它会自动使该类扩展 Android 应用程序。直到后来我才考虑到这一点，现在我想将其更改为 Game 和 Screen 类。但不幸的是没有成功...

我的第一个问题是，如何更改 android 项目？

```
 import android.os.Bundle;
import com.badlogic.gdx.backends.android.AndroidApplication;
import com.badlogic.gdx.backends.android.AndroidApplicationConfiguration;

public class AndroidClass extends AndroidApplication {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        AndroidApplicationConfiguration cfg = new AndroidApplicationConfiguration();
        cfg.useGL20 = false;

        initialize(new SplashScreen(), cfg);
    }
} 
```

我的第二个问题：如何更改桌面项目：

```
import com.badlogic.gdx.backends.lwjgl.LwjglApplication;
import com.badlogic.gdx.backends.lwjgl.LwjglApplicationConfiguration;

public class DeskopClass {
    public static void main(String[] args) {

        LwjglApplicationConfiguration cfg = new LwjglApplicationConfiguration();
        cfg.title = "MyApp";
        cfg.useGL20 = false;
        cfg.width = 800;
        cfg.height = 480;

        new LwjglApplication(new SplashScreen(), cfg);
    }
} 
```

第三个问题：如何更改 SplashScreen：

```
import com.badlogic.gdx.ApplicationListener;
import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;

public class SplashScreen implements ApplicationListener{

    @Override
    public void create() {
        // TODO Auto-generated method stub

    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:05:09.163

[Game](https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/Game.java)类只是一个`ApplicationListener`. `AndroidApplication`并且`Game`不是可互换的类，因为它们完成了两个不同的事情。

你需要一个`AndroidApplication`类来将事件传递给你的`ApplicationListener`类。如果你想`Game`在你的应用程序中创建一个类，那么你可以随时创建自己的类。

```
public class Game implements ApplicationListener {

    @Override
    public void dispose () {

    }

    @Override
    public void pause () {

    }

    @Override
    public void resume () {

    }

    @Override
    public void render () {

    }

    @Override
    public void resize (int width, int height) {

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T17:28:52.077

libgdx 中的游戏类本身就是一个 ApplicationListener。

您可以创建一个扩展 Game 的类，并直接将其对象传递给初始化（适用于 android）和 LwjglApplication（适用于桌面）。这样您就可以毫无问题地使用 setScreen。

# python - 获取任何语言中单词的所有维基百科含义

> ID：15368392
> 
> 赞同：0
> 
> 时间：2013-03-12T17:46:50.900
> 
> 标签：python, api, wikipedia, disambiguation

我想获得一个单词的所有维基百科含义的列表。例如，对于单词“bar”，消歧列在[http://en.wikipedia.org/wiki/Bar_(disambiguation)](http://en.wikipedia.org/wiki/Bar_(disambiguation))中：

*   酒吧（机构）
*   甜品吧
*   潜水吧
*   ...

有什么方法可以从 Wikipedia API 访问来自不同语言的单词的消歧？

对于英语，我认为网址大多采用上述格式（标题中有歧义）。但是对于西班牙语或其他语言，消歧页面的 url 是不同的。

我试过查看列出所有消歧页面的类别页面（例如[http://en.wikipedia.org/w/index.php?title=Category:All_article_disambiguation_pages&pagefrom=a](http://en.wikipedia.org/w/index.php?title=Category:All_article_disambiguation_pages&pagefrom=a)），但它没有直接列出所有术语的消歧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-01T18:05:04.900

Most (all?) Wikipedia editions now have the [disambiguator](http://www.mediawiki.org/wiki/Extension:Disambiguator) extension installed, meaning that you can access all disambiguation pages from the API:

    [`api.php?action=query&list=querypage&qppage=DisambiguationPages`](http://en.wikipedia.org/w/api.php?action=query&list=querypage&qppage=DisambiguationPages)

There is however a limit on WMF wikis like Wikipedia on the number of results you can retrieve this way, so if you need them all, you have to download a database dump and make the query agains that (in that case, you can read up a bit on the [page_props table](http://www.mediawiki.org/wiki/Manual:Page_props_table), and make a SQL query against that).

**A second approach** is to use WikiData, and query for all pages that is an [instance of (P31)](https://www.wikidata.org/wiki/Property:P31) [Wikimedia disambiguation page (Q4167410)](https://www.wikidata.org/wiki/Q4167410).

# intrinsics - 确定 Intel Intrinsics Guide 中列出的 CPUID

> ID：15368394
> 
> 赞同：5
> 
> 时间：2013-03-12T17:46:53.900
> 
> 标签：intrinsics, cpuid

在 Intel Intrinsics Guide 中，几个 Intrinsics 的底部有“延迟和吞吐量信息”，列出了几个 CPUID 的性能。

例如，Intrinsics Guide 中的表格对于 Intrinsic 如下所示`_mm_hadd_pd`：

```
CPUID(s)               Parameters   Latency   Throughput
0F_03                                    13            4
06_2A                  xmm1, xmm2         5            2
06_25/2C/1A/1E/1F/2E   xmm1, xmm2         5            2
06_17/1D               xmm1, xmm2         6            1
06_0F                  xmm1, xmm2         5            2 
```

现在：我如何确定我的 CPU 有什么 ID？

我正在使用 Kubuntu 12.04 并尝试使用Ubuntu 软件包`sudo dmidecode -t 4`中的小程序`cpuid`，但它们的输出并不是很有用。

我在上述命令的输出中的任何地方都找不到 Intrinsics Guide 中列出的任何字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T16:16:40.887

您可以使用 CPUID 指令获取该信息，其中

> 扩展系列，位位置 20 到 27 与系列代码（在位位置 8 到 11 中指定）一起使用，以指示处理器是否属于 Intel386、Intel486、Pentium、Pentium Pro 或 Pentium 4 系列处理器。P6 系列处理器包括基于 Pentium Pro 处理器架构的所有处理器，并具有等于 00h 的扩展系列和等于 06h 的系列代码。Pentium 4 系列处理器包括所有基于 Intel NetBurst® 微架构的处理器，并具有等于 00h 的扩展系列和等于 0Fh 的系列代码。
> 
> 第 16 位到第 19 位指定的扩展型号与第 4 位到第 7 位指定的型号一起用于识别处理器系列中的处理器型号。

有关详细信息，请参阅[Intel 处理器标识和 CPUID 指令](http://www.intel.com/content/dam/www/public/us/en/documents/application-notes/processor-identification-cpuid-instruction-note.pdf)中的第 22 页。

实际的 CPUID 是“family_model”。以下代码应该可以完成这项工作：

```
#include "stdio.h"

int main () {

  int ebx = 0, ecx = 0, edx = 0, eax = 1;
  __asm__ ("cpuid": "=b" (ebx), "=c" (ecx), "=d" (edx), "=a" (eax):"a" (eax));

  int model = (eax & 0x0FF) >> 4;
  int extended_model = (eax & 0xF0000) >> 12;
  int family_code = (eax & 0xF00) >> 8;
  int extended_family_code = (eax & 0xFF00000) >> 16;

  printf ("%x %x %x %x \n", eax, ebx, ecx, edx);
  printf ("CPUID: %02x %x\n", extended_family_code | family_code, extended_model | model);
  return 0;
} 
```

对于我的电脑，我得到：

> CPUID：06_25

希望能帮助到你。

# ios - UIButton闪烁动画

> ID：15368397
> 
> 赞同：5
> 
> 时间：2013-03-12T17:46:59.867
> 
> 标签：ios, animation, uikit

我想知道是否可以将闪烁动画应用于 UIButton。我已经搜索但只找到了一个脉冲动画的代码，它不断改变我的 UIButton 的大小。相反，我正在考虑某种闪烁的动画来提醒用户他必须按下按钮。我能想到的解决问题的唯一方法是不断使用以下方法更改 alpha：

```
[self setAlpha:0.5]; 
```

...但它不会像闪烁的按钮那样明显。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-12T18:00:59.530

也许不是最好的方法，也不能真正让你停止闪烁......但这很简单，有效，并且不会妨碍用户交互：

```
- (void)viewDidLoad
{
    [self flashOn:myButton];
}

- (void)flashOff:(UIView *)v
{
    [UIView animateWithDuration:.05 delay:0 options:UIViewAnimationOptionAllowUserInteraction animations:^ {
        v.alpha = .01;  //don't animate alpha to 0, otherwise you won't be able to interact with it
    } completion:^(BOOL finished) {
        [self flashOn:v];
    }];
}

- (void)flashOn:(UIView *)v
{
    [UIView animateWithDuration:.05 delay:0 options:UIViewAnimationOptionAllowUserInteraction animations:^ {
        v.alpha = 1;
    } completion:^(BOOL finished) {
        [self flashOff:v];
    }];
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-23T18:03:26.177

到目前为止，阅读所有答案，我找到了以下解决方案。它重复了很多次并为我完成了这项工作。

```
CGFloat oldAlpha = v.alpha;
CGFloat minAlpha = 0.2;
enum UIViewAnimationOptions options = UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionAutoreverse | UIViewAnimationOptionCurveEaseInOut;

[UIView animateWithDuration:.3 delay:0.3 options:options animations:^{
    [UIView setAnimationRepeatCount:4];
    v.alpha = minAlpha;
}
completion:^(BOOL finished) {
    v.alpha = oldAlpha;
}]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-12T19:00:13.410

试试这个：

当您想要闪烁/闪烁按钮时调用此方法

```
blinkTimer=[NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(toggleButtonImage:) userInfo:nil repeats:YES]; 
```

并编写此方法

```
- (void)toggleButtonImage:(NSTimer*)timer
{

    if(toggle)
    {
        [blinkBtn setImage:[UIImage imageNamed:@"ButtonImage.png"] forState: UIControlStateNormal];
    }
    else
    {
        [blinkBtn setImage:[UIImage imageNamed:@"ButtonImage1.png"] forState: UIControlStateNormal];
    }
    toggle = !toggle;

} 
```

在 .h 中写下这个

```
NSTimer *blinkTimer;
BOOL toggle; 
```

并使要停止闪烁/闪烁的计时器无效

```
[blinkTimer invalidate]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T17:54:26.913

也许您可以有两个不同的 .png 文件 [按钮]，它们在循环中来回循环，为它们分配相同的操作，并在满足特定条件时启动此操作。我会写出代码，但它可能会充满错误。你有没有尝试过这样的事情？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T19:01:03.690

我通过创建自己的控件来实现这一点，将 UIControl 子类化，因为 Apple 不建议使用 UIButton 的视图层次结构。我添加了一个代表按钮的标准背景图像的背景 imageView，并在背景上方添加了一个“发光”的 imageView 来表示亮起状态，并切换其不透明度以使其脉动。

我还切换了图层的阴影不透明度以使其发光。

**初始化代码：**

```
- (void)TS_commonButtonInit
{
    UIImage *shoutoutBackground            = [UIImage imageNamed:@"root-navigation-bar-share-button"];
    UIImage *shoutoutHighlightedBackground = [UIImage imageNamed:@"root-navigation-bar-share-button-highlighted"];
    UIImage *shoutoutPulseImage            = [UIImage imageNamed:@"root-navigation-bar-share-button-glowing"];

    shoutoutBackground            = [shoutoutBackground            stretchableImageWithLeftCapWidth:7 topCapHeight:0];
    shoutoutHighlightedBackground = [shoutoutHighlightedBackground stretchableImageWithLeftCapWidth:7 topCapHeight:0];
    shoutoutPulseImage            = [shoutoutPulseImage            stretchableImageWithLeftCapWidth:7 topCapHeight:0];

    [[self backgroundView] setImage:shoutoutBackground];
    [[self backgroundView] setHighlightedImage:shoutoutHighlightedBackground];

    [self setGlowingImage:shoutoutPulseImage];

    [self setExclusiveTouch:YES];

    [self addSubview:[self backgroundView]];
    [self addSubview:[self glowingImageView]];

    [[self layer] setShadowColor:[[UIColor colorWithHexString:@"ffc521" alpha:1] CGColor]];
    [[self layer] setShadowOpacity:0];
    [[self layer] setShadowRadius:5];
    [[self layer] setShadowOffset:CGSizeMake(0, 0)];
    [[self layer] setShadowPath:[[UIBezierPath bezierPathWithRoundedRect:[self bounds] cornerRadius:6] CGPath]];
} 
```

**脉冲代码：**

```
- (void)pulse:(NSInteger)numberOfTimes
{
    CGFloat pulseLength = .8;

    [[self glowingImageView] setAlpha:0];

    CABasicAnimation *pulseAnimation = [CABasicAnimation animationWithKeyPath:@"opacity"];
    [pulseAnimation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
    [pulseAnimation setDuration:pulseLength];
    [pulseAnimation setRepeatCount:numberOfTimes];
    [pulseAnimation setAutoreverses:YES];
    [pulseAnimation setFromValue:@(0)];
    [pulseAnimation setToValue:@(1)];
    [pulseAnimation setRemovedOnCompletion:YES];

    [[self layer] setShadowOpacity:0];

    CABasicAnimation *shadowAnimation = [CABasicAnimation animationWithKeyPath:@"shadowOpacity"];
    [shadowAnimation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
    [shadowAnimation setDuration:pulseLength];
    [shadowAnimation setRepeatCount:numberOfTimes];
    [shadowAnimation setAutoreverses:YES];
    [shadowAnimation setFromValue:@(0)];
    [shadowAnimation setToValue:@(1)];
    [shadowAnimation setRemovedOnCompletion:YES];

    [[[self glowingImageView] layer] addAnimation:pulseAnimation forKey:@"opacity"];
    [[self layer] addAnimation:shadowAnimation forKey:@"shadowOpacity"];
} 
```

# linux - 如何计算虚拟机中的 I/O 路径？

> ID：15368405
> 
> 赞同：0
> 
> 时间：2013-03-12T17:47:28.183
> 
> 标签：linux, postgresql, io, vps

虚拟机（如 EC2 实例或 Linode 实例）有多少可用的 I/O 路径？我有兴趣了解更多相关信息，因为我不知道 PostgreSQL`effective_io_concurrency`设置的合适值。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:47:44.803

您不知道虚拟机挂载点的背后是什么。因此，您可以并且实际上应该做的最好的事情是：[单独](http://stu.mp/2009/12/disk-io-and-throughput-benchmarks-on-amazons-ec2.html)测试磁盘的性能，然后使用不同的[`effective_io_concurrency`](http://www.postgresql.org/docs/current/interactive/runtime-config-resource.html#GUC-EFFECTIVE-IO-CONCURRENCY).

我会将`/dev/*`挂载点中使用的每个设备都作为单独的 IO 路径，至少这是一个好的开始。

我还认为，这个配置参数在专用物理服务器上更有价值，而不是虚拟服务器（当然是外部提供的）。

# c - 理解 printf 中的符号

> ID：15368412
> 
> 赞同：1
> 
> 时间：2013-03-12T17:47:45.903
> 
> 标签：c

这对你们中的许多人来说可能是一个非常基本的问题，但我无法理解 %.*s 在做什么？

```
void substring(int i, int j, char *ch) 
{
      printf("The substring is: %.*s\n", j - i, &ch[i]); 
      //what is %.*s doing?
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T17:50:01.690

从字符串之前的`*`参数中获取字符串的长度限制。所以 printf 将输出（至多）`j - i`从`&ch[i]`to的字符`stdout`。如果字符串较短，则将打印整个字符串，但不会填充空白。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T17:50:05.757

这是一个很好的参考`printf`：[http](http://en.cppreference.com/w/c/io/fprintf) ://en.cppreference.com/w/c/io/fprintf 。^*

这就是它所说的：

> `.`后跟整数或`*`指定转换的精度。在使用 when 的情况下`*`，精度由 type 的附加参数指定`int`。如果此参数的值为负，则将其忽略。有关精度的确切影响，请参见下表。

对于`s`，它说：

> 精度指定要写入的最大字节数。

因此，在您的情况下，它最多打印`j-i`字符。

* * *

[* 事实上，它是几乎所有标准 C 和 C++ 库的一个很好的参考。用它！]

# java - 如何实现 ArrayList 以将“房间”对象添加到“房屋”对象列表？

> ID：15368415
> 
> 赞同：1
> 
> 时间：2013-03-12T17:47:54.543
> 
> 标签：java, generics, arraylist

我目前正在做作业，我有两个班级房间和房子。作为作业的一部分，我需要启用房屋类将房间存储在`ArrayList`：

> 实现一个`House`从键盘读取类中房间信息的方法——这应该`Room`根据需要调用构造函数。创建一个零参数的 House 构造函数来调用这个新方法。

如果这含糊不清或已在其他地方得到回答，但我试图理解其他类似查询的解释，我很抱歉，我不知道如何将它们应用于我的情况。

我如何申请`ArrayList`家庭`Room`课程？

**`House`：**

```
import java.util.ArrayList;
import java.util.Scanner;

public class House {

private int idNum;
private static int internalCount = 0; 
private ArrayList rooms = new ArrayList();
private String address;
private int numRooms;
private String houseType; 

public House (String address, int numRooms, String houseType) {
idNum = internalCount++;

this.address = address;
this.numRooms = numRooms;
this.houseType = houseType;     
}

public House () {
int i = 0;  
idNum = ++internalCount;

Scanner scan = new Scanner(System.in);
scan.useDelimiter("\n");

System.out.println("Enter address of house:");   
address = scan.next();

System.out.println("Enter number of rooms:");   //Number of rooms in the House
numRooms = scan.nextInt();

 while (i < numRooms)  //This will loop until all rooms have been described
 {
 add.room = new Room[100]; //I understand this is incorrect but I don't know what  I should have in here
 i++;
 }

 System.out.println("Enter type of house:");
 houseType = scan.next();
 }
 public void addroom(String description, double length, double width)
 {

 }

 int getIdNum() {
 return idNum;
 }

 @Override

 public String toString()
 {
  String report = "~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n";
  report += "Address: " + address + "\n";
  report += "No. of Rooms: " + numRooms + "\n";
  report += "House Type: " + houseType+ "\n";
  report += "~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n";

  return report;
 }
 } 
```

**`Room`：**

```
import java.util.Scanner;

public class Room {

private String description;
private double length;
private double width;

public Room (String description, double length, double width) {
this.description = description;
this.length = length;
this.width = width;     
}

public Room () {
Scanner scan = new Scanner(System.in);
scan.useDelimiter("\n");

System.out.println("Enter description of room:");
description = scan.next();

System.out.println("Enter length of room:");
length = scan.nextDouble();

 System.out.println("Enter width of room:");
 width = scan.nextDouble();
 }

 /*
 * Calculates and returns area of Room
 */
 public double getArea () {
 return length*width;
 }

 @Override
 public String toString() {
 return description + "- Length: " + length + "m; Width: " + width + 'm';
 }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:49:35.787

你检查过ArrayList的[API吗？](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)

你需要类似的东西：

```
rooms.add(new Room()); 
```

此外，我将使用 Java 泛型并这样定义列表：

```
private ArrayList<Room> rooms; 
```

这利用了[泛型](http://docs.oracle.com/javase/tutorial/java/generics/)，并确保这只能是房间列表，而不是杂项对象。它将为您节省一些悲伤，因为您不会无意中将房屋添加到您的房间列表中（通过编程错误）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:50:58.843

使用特化列表`Room`类型

```
List<Room> rooms = new ArrayList<Room>();

while (i < numRooms)  //This will loop until all rooms have been described
{
  rooms.add(new Room()); //this is correct 
  i++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:52:08.747

由于这是家庭作业，我不会完全解决它，但会给你一个工作的基础......

```
public class House {
  private List<Room> rooms;

  public House() {
    rooms = new ArrayList<Room>();
  }

  public void addRoom(...) {
    Room room = new Room(...);
    rooms.add(room);
  }

  public int numRooms() {
    return rooms.size();
  }

  public Room getRoom(int roomNumber) {
    return rooms.get(roomNumber);
  }
}

public class Room {
  public Room(...) {
    ...
  }
} 
```

问题？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T17:58:57.117

```
ArrayList<Room> rooms = new ArrayList<Room>();
rooms.add(new Room()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T18:01:49.030

更改您的构造函数方法，添加一些关于您的房间的代码`ArrayList`。

```
public House(..., ArrayList aRooms) {

 ...
 rooms = aRooms;
}

public House() {

 ...
 // It's better to instantiate the rooms array here.
 rooms = new ArrayList<Room>();
} 
```

要将房间添加到您的房间`ArrayList`，只需执行类似操作（不要忘记检查`ArrayList`API，[http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)）。

```
ArrayList<Room> rooms = new ArrayList<Room>();
rooms.add(new Room(...));
// Add here all the rooms you need.

House house = new House(rooms);

// You can also create a method into the House class to allow adding new rooms once you have created a House object.
public void addRoom(Room room) {

 this.rooms.add(room);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T18:07:51.160

改变这个循环：

```
while (i < numRooms)  //This will loop until all rooms have been described
{
  add.room = new Room[100]; //I understand this is incorrect but I don't know what I  should have in here
 i++;
} 
```

到：

```
while (i < numRooms) 
{
Room newRoom = new Room();
rooms.add(newRoom);
i++;
} 
```

# php - pre_controller 与 post_controller_constructor 冲突

> ID：15368416
> 
> 赞同：1
> 
> 时间：2013-03-12T17:47:55.523
> 
> 标签：php, codeigniter-2

我想检查用户是否有权访问 URL（控制器/方法）组合。它应该在被调用的控制器中调用的任何方法和方法属于它之前检查。

据我了解，钩子应该用于上面的逻辑，但是当我使用它时，我认为它与下面显示`pre_controller`的冲突。`post_controller_constructor`如果我改用`post_controller`它，那么它会起作用，但这次逻辑会受到影响。

我怎么解决这个问题？

谢谢

**配置/挂钩**

```
//Used to authenticate user session to decide whether to authenticate site or not
$hook['post_controller_constructor'] =
array(
'class'    => 'site_authentication',
'function' => 'authenticate',
'filename' => 'site_authentication.php',
'filepath' => 'hooks',
'params'   => null
);

//Used to authenticate permitted controllers
$hook['pre_controller'] =
array(
'class'    => 'permitted_controllers',
'function' => 'authenticate',
'filename' => 'permitted_controllers.php',
'filepath' => 'hooks',
'params'   => null
); 
```

**应用程序/挂钩**

```
//This works fine
class site_authentication
{
    private $CI;

    public function __construct()
    {
        $this->CI =& get_instance();
    }

    public function authenticate()
    {
        if (! $this->CI->session->userdata('site'))
        {
            redirect('to error page');
        }

        $user_session = $this->CI->session->userdata('site');
        //Some more stuff here
    }
}

//This doesn't work with pre_controller
class permitted_controllers
{
    private $CI;

    public function __construct()
    {
        $this->CI =& get_instance();
    }

    public function authenticate()
    {
        $user_session = $this->CI->session->userdata('site');

        //Url is set here, ignore syntax error below
        $url = $this->CI->uri->segment(1) . 2 . 3;

        if (! in_array($url, $user_session['controllers']))
        {
            redirect('to error page');
        }
    }
} 
```

如果我将它们两个结合起来，它们可以正常工作，`post_controller_constructor`但不能单独工作？

```
$hook['post_controller_constructor'] [] =
array(
'class'    => 'site_authentication',
'function' => 'authenticate',
'filename' => 'site_authentication.php',
'filepath' => 'hooks',
'params'   => null
);

$hook['post_controller_constructor'] [] =
array(
'class'    => 'permitted_controllers',
'function' => 'authenticate',
'filename' => 'permitted_controllers.php',
'filepath' => 'hooks',
'params'   => null
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T06:55:16.123

`pre_controller`hook 在构建超级对象之前运行，因此它不是挂钩到 CI 的正常语法（例如`$this->db->query()`）的可行选项。

我建议创建一个基本控制器（又名 MY_Controller 或其他名称）并将权限检查添加到其构造函数中。然后，每个应该运行权限检查的控制器将扩展 MY_Controller 而不是 CI_Controller。[这是 Phil Sturgeon 关于基本控制器的经典文章。](http://philsturgeon.co.uk/blog/2010/02/CodeIgniter-Base-Classes-Keeping-it-DRY)

每次页面加载都会调用钩子。如果您不需要在某处检查权限，则需要将该逻辑添加到您的钩子中，或者在其他地方添加逻辑以尝试禁用它。不是很可扩展。使用基本控制器，添加权限检查就像扩展不同的类一样简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:04:55.710

pre_controller 钩子在超级对象完全构造之前执行[阅读更多here](https://stackoverflow.com/questions/2196559/codeigniter-hooks-pre-controller-loading-helpers)

# ruby-on-rails-3 - 将 SQL 重写为 ActiveRecord

> ID：15368422
> 
> 赞同：0
> 
> 时间：2013-03-12T17:48:13.350
> 
> 标签：ruby-on-rails-3, activerecord, rails-activerecord

我正在尝试重写这个旧的 Rails 2 东西，以便它可以与 Rails 3.2.1 一起使用：

**Rails 2.2.2 查询重写**

```
 B2bPrivilege.find_by_sql("SELECT b2b_privileges.*, vendors.name AS vendor_name FROM b2b_privileges LEFT JOIN vendors ON vendors.id = b2b_privileges.vendor_id WHERE b2b_user_id = ?", current_user_id) 
```

这就是我想出的，它创建了与上面 Rails 2.2.2 示例中看到的相同的 SQL，但它没有将 vendor.name 列引入存储的结果中，我不知道为什么。在数据库控制台中运行时生成的 SQL 确实有效，因此问题肯定与 Rails 有关。

```
 B2bPrivilege.select("b2b_privileges.*, vendors.name AS vendor_name").joins('LEFT JOIN  vendors ON vendors.id = b2b_privileges.vendor_id').where('b2b_user_id' => current_user_id) 
```

**来自 .inspect 的调试信息**

```
 B2bPrivilege Load (1.4ms)  SELECT b2b_privileges.*, vendors.name AS vendor_name FROM "b2b_privileges" LEFT JOIN vendors ON vendors.id = b2b_privileges.vendor_id WHERE "b2b_privileges"."b2b_user_id" = 398
[ 
    #<B2bPrivilege id: 1363, b2b_user_id: 398, vendor_id: 53, can_setup_instant_electronic_delivery: true, can_setup_purchase_orders: true, can_setup_advance_ship_notification: true, can_setup_xml_pushes: true>, 
    #<B2bPrivilege id: 1923, b2b_user_id: 398, vendor_id: 103, can_setup_instant_electronic_delivery: false, can_setup_purchase_orders: false, can_setup_advance_ship_notification: true, can_setup_xml_pushes: true>
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:43:52.020

事实证明，加入的内容在那里它只是不输出到控制台，只是主要关系。如果您在控制台窗口中查看输出，我认为控制台输出仅反映/检查返回的根级别对象。

当我调试使用联接的查询时，这对我来说是一个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:36:07.950

做

```
B2bPrivilege.joins('LEFT JOIN  vendors ON vendors.id = b2b_privileges.vendor_id').
  where(:b2bprivileges => {'b2b_user_id' => current_user_id} ).
  select("b2b_privileges.*, vendors.name AS 'vendor_name'").first.vendor_name 
```

# mysql - 基于时间和标签的复杂搜索引擎的数据库结构及搜索方法

> ID：15368424
> 
> 赞同：1
> 
> 时间：2013-03-12T17:48:15.067
> 
> 标签：mysql, mongodb, database-design, tags, search-engine

两个月来我一直在尝试解决这个问题，与其他开发人员进行了无数次头脑风暴会议，但仍然无法提出一个好的解决方案。

**我们** 正在为会议、公共活动等建立一个搜索引擎。

**数据**
我有一个包含数万个事件（未来和历史）的数据集，其结构如下：

```
{
    id: 10, 
    name: "CES",
    intervals: [
        {
            interval_start: "2013-01-01 08:00", 
            interval_end: "2013-01-15 10:00", 
            tags_by_type: {
                people: [{name: "Eric Schmidt", weight: 20}, ...]
                companies: [{name: "Google", weight: 100}, {name: "Microsoft", weight: 100}, ...],
                topics: [{name: "Social Networking", weight: 80}, {name: "Internet marketing", weight: 95}, ...],
                places: [{name: "Cannes Palace Hotel", weight: 100}, {name: "Cannes", weight: 100}, {name: "France", weight: 100}]
            },
            tags: ["Eric Schmidt", "Google", "Microsoft", "Social Networking", "Internet Marketing", "Cannes Palace Hotel", "Cannes", "France"]
        },
        {
            interval_start: "2011-01-01 10:00", 
            interval_end: "2011-01-15 12:00", 
            tags_by_type: {
                people: [{name: "Marissa Meyer", weight: 20}, ...]
                companies: [{name: "Yahoo", weight: 100}, {name: "Facebook", weight: 100}, ...],
                topics: [{name: "Recruiting", weight: 80}, {name: "Internet marketing", weight: 15}, ...],
                places: [{name: "New york", weight: 100}, {name: "USA", weight: 100}]
            },
            tags: ["Marissa Mayer", "Yahoo", "Facebook", "Recruiting", "Internet marketing", "New york", "USA"]
        },
        ...
    ],

} 
```

我们使用规范化的 MySQL 数据库来添加/更新/删除事件和标签，然后针对各种搜索场景编译各种格式的数据（如上面的文档）。

*   标签之间有层次结构（营销是互联网营销的父级，所以只要互联网营销是一个标签，营销也将是一个标签）
*   权重数字表示相应标签在相应时间范围内的重要性/相关性

**问题** 我们希望为用户提供一个菜单，他们可以用来点击和过滤事件，例如：

**地点：** [推荐地点] 美国、法国、... [点击浏览所有地点]
**人物：** [推荐人] Eric Sc​​hmidt、Marissa Meyer、... [点击浏览所有人]
**主题：** [推荐话题] 网络营销, Startups, ... [点击浏览所有主题]

*   单击菜单中的任何标签**必须**导致至少一个结果（菜单中没有死角标签）。
*   每当用户单击菜单中的任何标签时，都会执行搜索，菜单应重新填充来自搜索结果的事件子集的标签，以便用户可以继续单击
*   只有前 5 个标签（基于其权重）将显示在 [单击浏览所有...] 链接之前。
*   单击[单击以浏览所有...]链接会弹出一个分层菜单。对于位置，它将是一个大陆列表。单击一个大陆会调出国家列表。单击一个国家会调出城市列表。这里没有加权，只是分层浏览

**目前的方法**

鉴于我们提出的上述文档结构，如果非常简单，请使用 MongoDb 搜索事件：

```
{"intervals.tags": { $in: [selectedtag1, selectedtag2, selectedtag3]}} 
```

然而，在标签菜单中找出哪些标签来进一步向用户显示被证明是一件痛苦的事情:) 假设我们忽略了权重，只是试图找出最常见的标签，我们尝试了这个：

```
db.events.aggregate( { $unwind: "$intervals" }, {$unwind: "$intervals.tags"}, {$group: {"_id": "$intervals.tags", "evCount": {$sum:1}}}, {$match: {"evCount": {$lt: TOTAL_COUNT_OF_EVENTS_MATCHING_OUR_SEARCH}}} ); 
```

*   该查询的第一个问题是最后一个条件应该忽略与匹配的所有事件相关的标签（因为没有必要显示点击时不过滤结果的标签）。上面的查询当前过滤掉了与所有 INTERVALS（而不是 EVENTS）相关的标签。
*   该查询的第二个问题是，对于大型数据集，它可能会耗尽内存

**我们还尝试** 了仅针对菜单问题，我们尝试从标签而不是事件开始：

```
"Eric Schmidt" relates to "Google", "Microsoft", "Social Networking", "Internet Marketing", "Cannes Palace Hotel" ... in the interval "2013-01-01 08:00" and "2013-01-01 10:00"
"Google" relates to "Eric Schmidt", "Microsoft" ...  in the interval "2013-01-01 08:00" and "2013-01-01 10:00"
... 
```

然后我们将这些关系映射到 MySQL 表中：

```
| tag          | related tag | event | start time       | end time         |
----------------------------------------------------------------------------
| Eric Schmidt | Google      | CES   | 2013-01-01 08:00 | 2013-01-01 10:00 |
| Eric Schmidt | Microsoft   | CES   | 2013-01-01 08:00 | 2013-01-01 10:00 |
... 
```

并且，假设用户从菜单中选择了 SELECTED_TAG_1 和 SELECTED_TAG_2，尝试使用 SELF JOIN 查询它，确保间隔匹配：

```
SELECT a.related_tag FROM tag_relations a JOIN tag_relations b 
ON a.related_tag = b.related_tag 
AND a.tag = SELECTED_TAG_1 AND b.tag = SELECTED_TAG_2 
AND ( (a.start_time < b.start_time AND a.end_time > b.start_time) OR (a.start_time > b.start_time AND a.start_time < b.end_time) ) 
```

但是有两个问题：

*   对于添加到选择中的每个额外标签，区间匹配会增加复杂性（对于三个标签，我们将匹配区间 a 与 b、b 与 c 以及 a 与 c）
*   它不返回每个标签的事件数，以便我们可以排除匹配所有结果事件的那些

你们对如何改进这两种方法中的任何一种或建议一种新方法有什么想法吗？

我知道这不是一个快速的回复，我感谢你一百万次花时间阅读和理解这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T05:27:29.777

您遇到的问题之一是您不太可能总是有足够的数据来为用户选择的所有组合提供至少一个结果。

如果是这样的话，与其让自己变得复杂，不如像其他网站一样做，只显示“没有结果”，然后提供建议。例如，您可以向他们展示删除其中一个过滤器的用户选择的部分结果，或者您可以简单地为他们提供一个链接以删除（或汇总）他们当前过滤器的列表。

# mysql - 当有 3 个日期列时按日期排序

> ID：15368427
> 
> 赞同：1
> 
> 时间：2013-03-12T17:48:27.473
> 
> 标签：mysql, sql

我有两张桌子，`CHECKINS`和`TRIPS`。

我需要在这两个表中列出要排序的条目，最近的日期在顶部。

通常，我会简单地使用 JOIN 而不是用户 ORDER BY 日期列。

但这是挑战；CHECKINS 中有一个日期列，`VenueCreatedAt`，而 TRIPS 有两个， `TripDateStarted`和`TripDateEnded`。

如果您能帮助我处理它，我将不胜感激。测试地址：

[http://sqlfiddle.com/#!2/7f6055/33](http://sqlfiddle.com/#!2/7f6055/33)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:55:42.917

怎么样：

```
SELECT * FROM TRIPS LEFT JOIN CHECKINS 
USING (MemberID) ORDER BY CheckInDateEntered ASC; 
```

（[http://sqlfiddle.com/#!2/7f6055/3](http://sqlfiddle.com/#!2/7f6055/3)）

您还可以按优先级顺序按多个字段排序，用逗号分隔它们：

```
SELECT * FROM TRIPS LEFT JOIN CHECKINS USING (MemberID) 
ORDER BY VenueCreatedAt,TripDateStarted,TripDateEnded ASC; 
```

（[http://sqlfiddle.com/#!2/7f6055/10](http://sqlfiddle.com/#!2/7f6055/10)）

如果这也不起作用，请查看[LEAST](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_least)函数：

```
SELECT * FROM TRIPS LEFT JOIN CHECKINS USING (MemberID) 
ORDER BY LEAST(VenueCreatedAt,TripDateStarted,TripDateEnded) ASC; 
```

（[http://sqlfiddle.com/#!2/7f6055/15](http://sqlfiddle.com/#!2/7f6055/15)）

但请注意，这只会按日期最短的一列排序。如果您想按每行（交替列）的最小值进行排序，也许这三个其他问题中的任何一个都可以帮助您：

[按三个不同列中的最大值排序](https://stackoverflow.com/questions/3796417/order-by-max-value-in-three-different-columns)

[使用 PHP/MySQL 从多列中选择最小值](https://stackoverflow.com/questions/9570881/select-smallest-value-from-multiple-columns-with-php-mysql)

[使用 ORDER BY 或 PHP 排序函数对 MySQL 查询进行排序](https://stackoverflow.com/questions/3145118/sorting-a-mysql-query-with-order-by-or-with-php-sort-functions)

（它们都是关于按特定列集的每一行的最小值或最大值进行排序）

# c# - 部署功能 SP2013 时出错

> ID：15368429
> 
> 赞同：1
> 
> 时间：2013-03-12T17:48:29.460
> 
> 标签：c#, sharepoint, deployment, sharepoint-2013

我创建了一个功能，我希望它在安装时被激活。这是代码：

```
public override void FeatureInstalled(SPFeatureReceiverProperties properties)
{
    SPWeb web = properties.Feature.Parent as SPWeb;
    SPWebTemplateCollection existingWebTemps = web.GetAvailableWebTemplates(1033);
    Collection<SPWebTemplate> newWebTemps = new Collection<SPWebTemplate>();        
    for (int i = 0; i < existingWebTemps.Count; i++)
    {
        if (!existingWebTemps[i].Title.ToLower().Contains("blog"))
        {
            newWebTemps.Add(existingWebTemps[i]);
        }
    }
    web.SetAvailableWebTemplates(newWebTemps, 1033);
    web.Update();

    string fID = "aeb3aa40-8a42-4577-bed2-a0e65eff8b04";
    Guid gfID = new Guid(fID);
    SPFeatureCollection featatv = web.Features;
    Boolean control = true;
    foreach (SPFeature myfeat in featatv)
    {
        if (myfeat.DefinitionId == gfID)
        {
            control = false;
        }
    }
    if (control == true)
    {
        web.Features.Add(gfID);
    }

    web.Dispose();
} 
```

部署时出现错误：

部署步骤“添加解决方案”中发生错误：对象引用未设置为对象的实例。

我不明白为什么我会收到这个错误。关于为什么的任何想法？谢谢！

# asp.net-mvc-3 - ASync Recaptcha in MVC3

> ID：15368434
> 
> 赞同：1
> 
> 时间：2013-03-12T17:48:57.080
> 
> 标签：asp.net-mvc-3, asynchronous, recaptcha, mvcrecaptcha

I've implemented ReCaptcha in MVC3 using ReCaptcha.net NuGet package [http://recaptchanet.codeplex.com/wikipage?title=How%20to%20Use%20Recaptcha%20in%20an%20ASP.NET%20MVC%20Web%20Application](http://recaptchanet.codeplex.com/wikipage?title=How%20to%20Use%20Recaptcha%20in%20an%20ASP.NET%20MVC%20Web%20Application). All working well, except I'd like to see if I can implement this as Async as it is sometimes quite slow, and we may have some volume on these pages.

The instructions say

```
RecaptchaVerificationResult recaptchaResult = await recaptchaHelper.VerifyRecaptchaResponse();

if (recaptchaResult != RecaptchaVerificationResult.Success)
{
    ModelState.AddModelError("", "Incorrect captcha answer.");
} 
```

however, this is using the MVC4 await syntax. Is there a way I can use this method within the MVC3 async framework?

I did try a quick hack, converting the controller to AsyncController naming the method with an Async suffix and wrapping the entire action in a Task.Factory.StartNew(() => { ... }); while using the non-async syntax, but RecaptchaVerificationHelper recaptchaHelper = this.GetRecaptchaVerificationHelper(); complains about a lack of HTTPContext.

So, can anyone help me with doing ReCaptcha asynchronously in MVC3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:16:58.763

In the end, I've dropped using the NuGet package, and simply process the captcha's using the code below, binding the recaptcha fields in the controller method.

```
 public bool ProcessCaptcha(string recaptcha_challenge_field, string recaptcha_response_field)
    {

        const string verifyUrl = "http://www.google.com/recaptcha/api/verify";
        var res = true;
        var ip = Request.UserHostAddress;
        if (ip == "::1") ip = "127.0.0.1";
        var myParameters = string.Format("privatekey={0}&remoteip={1}&challenge={2}&response={3}", Config.CaptchPriv, ip, recaptcha_challenge_field, recaptcha_response_field);
        using (WebClient wc = new WebClient())
        {
            wc.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
            string HtmlResult = wc.UploadString(verifyUrl, myParameters);
            var split = HtmlResult.Split('\n');
            if (split[0] == "false") res = false;
        }

        return res;
    } 
```

With this in place, I split my original controller method into a Async/Completed pair, and wrapped the work it does in Task.Factory.StartNew(() => { ... }), following the pattern outlined here [http://www.deanhume.com/Home/BlogPost/mvc-asynchronous-controller---the-basics/67](http://www.deanhume.com/Home/BlogPost/mvc-asynchronous-controller---the-basics/67) which seems to work perfectly.

# java - 将库中的方法覆盖到不同的项目

> ID：15368435
> 
> 赞同：0
> 
> 时间：2013-03-12T17:48:57.490
> 
> 标签：java, android, eclipse, shared-libraries, overriding

我将我的主要代码设置为一个项目，其他两个项目（lite 和 pro）引用它。

这就是我希望`Quiz`班级寻找精简版的方式：

```
class Quiz {
    public Quiz {
        object1();
        object2();
        object3();
        object4();
    }
} 
```

这就是我希望`Quiz`班级寻找专业人士的方式：

```
class Quiz {
    public Quiz {
        object1();
        object2();
        object3();
        object4();
        object5();
        object6();
        object7();
        object8();
    }
} 
```

要做到这一点，我是否需要`Quiz`在库中将类设置为抽象，然后在 lite 和 pro 项目中定义它们？或者我应该将库定义为`Quiz`上面的第一个示例，然后尝试在专业版中以某种方式覆盖它？

**编辑**

根据下面的评论，这里是实际代码的片段。

```
public class Quiz {

    ArrayList<Question> exodus = new ArrayList<Question>(200);

    public Quiz() {

        exodus.add(new Question("Aaron", "Abraham", "Jacob", "Joseph", 0, "What was the name of Moses' brother?", -1, "Exodus 7:1-2"));
        exodus.add(new Question("5", "10", "7", "12", 1, "How many plagues did God send on Egypt?", -1, "Exodus 7-12"));
        exodus.add(new Question("Pharaoh's maid", "Pharaoh's wife", "Pharaoh's daughter", "Pharaoh's mother", 2, "Who found baby Moses in a basket along the riverside of the Nile river?", -1, "Exodus 2:3-5"));
        exodus.add(new Question("Hail", "Frogs", "Boils", "Flies", 1, "What was the 2nd plague?", -1, "Exodus 8:2"));
        exodus.add(new Question("Darkness for 3 days", "All water turns to blood", "Boils", "Flies", 3, "What was the 4th plague?", -1, "Exodus 8:24"));
        exodus.add(new Question("Frogs", "Boils", "Hail", "Lice", 1, "What was the 6th plague?", -1, "Exodus 9:10"));
        exodus.add(new Question("Boils", "All livestock dies", "Lice", "Locusts", 3, "What was the 8th plague?", -1, "Exodus 10:14"));
        exodus.add(new Question("Darkness for 3 days", "Death of firstborn", "All water turns to blood", "All livestock dies", 1, "What was the 10th plague?", -1, "Exodus 12:29"));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:57:43.477

假设您指的是构造函数，因为问题尚不清楚

```
class Quiz {
    public Quiz (){
        object1();
        object2();
        object3();
        object4();
    }
}

class QuizForPro extends Quiz{
    public QuizForPro() {
        super();
        object5();
        object6();
        object7();
        object8();
    }
} 
```

您可以`Quiz`在其他库中扩展`Pro`，然后提供对您的库有意义的*更专业的实现。*这就是为什么在 OOP 中可以使用专业化，以便您可以扩展父类功能并提供一些额外的行为（在您的情况下是在 arraylist 中添加更多元素）。

**更新：** 查看您使用构造函数添加问题的代码段，这将是一个不好的地方。

您应该提供类似的方法`addQuestion(...), removeQuestion(...), clearQuestions(...)`。这些在这里会更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:15:11.830

同意纳伦德拉的回答，它应该工作。但是我想下面的设计应该就足够了。{再次取决于最终产品的实际要求}

测验作为具有数组列表定义的类来存储数据，但在构造函数中没有初始化。它提供了添加一堆问题的方法。

```
public final class Quiz {
  ArrayList<Question> exodus = new ArrayList<Question>(200);
  public Quiz() { }
  public addQuestions(List<Question> questions) {
     // ... implementation here ... 
  }
} 
```

我将把 lite 和 pro 作为客户端类中的成员初始化，或者提供一个 QuizHelper 类来创建这两种类型的对象并返回它。

# node.js - fork 一个子进程并注入依赖

> ID：15368436
> 
> 赞同：16
> 
> 时间：2013-03-12T17:49:01.497
> 
> 标签：node.js, process, dependency-injection, parent-child, spawn

我目前在一个阻塞的模块中有一个操作，所以我正在考虑把它变成一个我 fork 的子进程。

如果我想这样做，那么我当然需要修改我的模块的架构。该模块要求通过将模块作为函数调用并传入依赖项来注入依赖项，如下所示：

```
var dependency = { name: "Bob" }
require('worker')(dependency) 
```

然后在我的`worker`模块中：

```
module.exports = function (dependency) {
  // Outputs { name: "Bob" }
  console.log(dependency)
} 
```

我怎样才能把这个例子变成一个被分叉的子进程？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-12T18:08:36.913

使用 .fork() 时，您正在启动一个完全独立的进程，因此您无法在父进程和子进程之间传递引用（并且仅限于在创建进程后进行消息传递）。

一种不需要消息传递的方法是在 fork 进程时传递参数（在数组中）。尽管我相信您必须坚持使用简单的字符串/数字值（但从代码中看起来这对您来说可能就足够了）。例如。：

在顶层：

```
var name = 'bob'
var args = [name];
var childProcess = require('child_process').fork(__dirname + '/worker', args); 
```

在工作进程中：

```
var name = process.argv[2]; //AFIAK elements 0 and 1 are already populated with env info 
```

**更新**

如果您真的想走消息传递路线（如果您已经需要发送消息，我会犹豫推荐），那么您可以区分消息类型，如下所示（可能有更优雅的方式）：

在顶层：

```
var childProcess = require('child_process').fork(__dirname + '/worker');
childProcess.send({msgtype:'dependencies', content:dependencies});

//Then to send 'normal' message:
childProcess.send({msgtype:'myothermessagetype', content:'some content'} 
```

在工作进程中：

```
process.on('message', function(msg){
    if(msg.mtype == 'dependencies') {
       var dependencies = msg.content;
       //Do something with dependencies
    } else if(msg.mtype == 'myothermessagetype') {
       var normalmessage = msg.content;
       //Do something in response to normal message.
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T18:26:39.337

**一个.js**

```
var fork = require ("child_process").fork;
var child;
var init = false;

var m = module.exports = {};
m.init = function (o){
    if (init) return;
    init = true;
    child = fork (__dirname + "/child");
    child.send ({ init: o });
};
m.print = function (o){
    if (!init) return;
    child.send ({ msg: o });
};
m.uninit = function (){
    if (!init) return;
    child.on ("exit", function (){
        init = false;
    });
    child.kill ();
}; 
```

**child.js**

```
var dependency;

var print = function (o){
    console.log (o + dependency.name);
};

process.on ("message", function (o){
    if (o.init){
        dependency = o.init;
    }else{
        print (o.msg);
    }
}); 
```

**b.js**

```
var a = require ("./a");
a.init ({ name: "asd" });
a.print ("hi, ");
setTimeout (function (){
    a.uninit ();
}, 1000); 
```

打印：嗨，asd

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T18:14:35.927

在主模块中：

```
var dependency = {message: 'hello there'};
var args = [JSON.stringify(dependency)];
var child = require('child_process').fork('worker', args);
child.send('sayhello');
child.send('exit'); 
```

在子进程模块（worker.js）中：

```
var dependency = JSON.parse(process.argv[2]);
process.on('message', function(m){
    if(m == 'sayhello') console.log(dependency.message);
    else if(m == 'exit') process.exit();
}); 
```

# uitextfield - 一个视图中的多个 uitextfields 具有不同的输入（键盘/选择器）

> ID：15368444
> 
> 赞同：1
> 
> 时间：2013-03-12T17:49:21.123
> 
> 标签：uitextfield, uipickerview

我的应用程序中有一个类似表单的视图，其中包含 8 个文本字段。其中两个由选择器填写，其余的由正常的草板打字。When picker-row is selected or when return button is pressed, the corresponding text should be entered into the textfield.

您能否提供一些建议如何正确实施？也使得选择器/键盘在选择/按下后被关闭。

[我在这里](https://stackoverflow.com/questions/11612460/how-to-use-one-uipickerview-for-multiple-textfields-in-one-view)找到了类似问题的答案。并且我设法让 2 个选择器文本字段正常工作，但现在我无法让键盘出现在其余部分。我想这是因为我重写了 textFieldShouldBegineEditing 方法。有什么想法可以解决这个问题吗？我可以以某种方式从 textFieldShouldBeginEditing 内部调用默认方法吗？请注意，如果我取消注释我最后几行 textFieldShouldBeginEditing 我会崩溃...

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
currentTextField = textField;

if (textField == self.pickerField1) {
    currentArray = self.array1;
    [pickerView reloadAllComponents];
    pickerView.hidden = NO;
    [self animatePickerViewIn];
    return NO;
}
if (textField == self.pickerField2){
    currentArray = self.array2;
    [pickerView reloadAllComponents];
    pickerView.hidden = NO;
    [self animatePickerViewIn];
    return NO;

}
//    else  {
//        [currentTextField becomeFirstResponder];
//        return NO;
//    }
- (void)pickerView:(UIPickerView *)pickerView 
  didSelectRow:(NSInteger)row inComponent: (NSInteger)component
{
[currentTextField setText:[currentArray objectAtIndex:row]];
[currentTextField resignFirstResponder];
pickerView.hidden = YES;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-29T07:12:31.130

为需要更多信息的任何人添加此内容-这是我使用[user2135738](https://stackoverflow.com/users/2135738/user2135738)提供的代码使其工作的方式：

**MyViewController.h**

```
#import <UIKit/UIKit.h>

@interface MyViewController : UIViewController  <UITextFieldDelegate, UIPickerViewDataSource, UIPickerViewDelegate>

@property (weak, nonatomic) IBOutlet UITextField *aTextField;
@property (weak, nonatomic) IBOutlet UITextField *bTextField;

@end 
```

**我的视图控制器.m**

```
#import "MyViewController.h"

@interface MyViewController ()
@end

@implementation MyViewController {
   NSArray *aArray,
   *bArray,
   *currentArray;

   UITextField *currentTextField;
   UIPickerView *pickerView;
}

- (void)viewDidLoad {
   aArray = [NSArray arrayWithObjects: @1, @2, @3, @4, @5, @6, @7, @8, @9, @10, @11, @12, @13, @14, @15, @16, @17, @18, @19, @20, nil];
   bArray = [NSArray arrayWithObjects:@"aString", @"bString", nil];

   [super viewDidLoad];

   pickerView = [[UIPickerView alloc] init];
   pickerView.dataSource = self;
   pickerView.delegate = self;
   self.aTextField.delegate = self;
   self.bTextField.delegate = self;

   self.aTextField.inputView = pickerView;
   self.bTextField.inputView = pickerView;
}

- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
   currentTextField = textField;

   if (textField == self.aTextField) {
      currentArray = aArray;
      [pickerView reloadAllComponents];
      pickerView.hidden = NO;
      return YES;
   } else if (textField == self.bTextField){
      currentArray = bArray;
      [pickerView reloadAllComponents];
      pickerView.hidden = NO;
      return YES;
   } else  {
      [currentTextField becomeFirstResponder];
      return NO;
   }

}

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {
   return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {
   return [currentArray count];
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component{
   return [NSString stringWithFormat:@"%@",[currentArray objectAtIndex:row]];
}

@end 
```

# c# - 将值从数据库加载到标签的正确方法是什么？

> ID：15368447
> 
> 赞同：1
> 
> 时间：2013-03-12T17:49:27.763
> 
> 标签：c#, asp.net

## 管理员.aspx

```
 <div id="valueIntroduction" class="labelarea" runat="server">   </div>
       <div  class="line"></div> 
```

## 管理.aspx.cs

```
 SqlConnection NewConn = new SqlConnection(ConfigurationManager.ConnectionStrings["SoicConnection"].ConnectionString);
        NewConn.Open();
        SqlCommand NewComm = new SqlCommand();
        SqlCommand NewComm1 = new SqlCommand();

        if (Department.Items[0].Selected)
        {
                firstPanel.Visible = true;
                myLegend.InnerText = "Informatics";
                NewComm.CommandText = "getTextHeaderINFO";

                NewComm.CommandType = CommandType.StoredProcedure;
                NewComm.Connection = NewConn;
                NewComm.CommandTimeout = 3000;
                SqlDataReader results = NewComm.ExecuteReader();

                while (results.Read())
                {
                     Response.Write(results["TEXT_CONTENT"].ToString());
                     Label valueIntroduction = results["TEXT_CONTENT"];
                }

         } 
```

我正在尝试的是从数据库中获取值并将其加载到标签中。我是 .net 和 stackoverflow 的新手。对不起，如果我不知道如何正确使用这个论坛。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:54:57.223

采用 `SqlDataReader results = NewComm.ExecuteSclar();`

代替 `SqlDataReader results = NewComm.ExecuteReader();`

并将标签文本设置为结果。

```
 ResultLabel.Text = NewComm.ExecuteScalar().ToString();
   conn.Close(); 
```

这是一个类似的问题
[在 asp.net 的标签中显示 SQL 查询结果](https://stackoverflow.com/questions/8813112/display-sql-query-result-in-a-label-in-asp-net)

## 编辑

对于第一个记录

```
 int counter=0;
 while (results.Read())
 {
     if(counter++=0)
     {
          ResultLabel.Text = results["TEXT_CONTENT"].ToString();
          conn.Close();
          break;
     }

 } 
```

# css - 为什么这个 CSS 过渡不起作用？

> ID：15368450
> 
> 赞同：2
> 
> 时间：2013-03-12T17:49:32.753
> 
> 标签：css

这是实现转换的可靠的跨浏览器方式吗？我不知道我做错了什么？

[小提琴](http://jsfiddle.net/C83Yd/)

html:

```
<div id="sideBar">
    <ul class="sideMenu">
        <li><a href="#">Beat of the Day</a></li>
        <li><a href="#">Cyborg DB</a></li>
        <li><a href="#">Hadiaris.com</a></li>
        <li><a href="#">DriversEd.com</a></li>
        <li>
            <a href="#">Controlco</a>           
            <ul>
                <li><a href="#">GGP</a></li>
                <li><a href="#">TVA</a></li>
            </ul>
        </li>
    </ul>
</div> 
```

CSS：

```
.sideMenu a {
    display: block;
    width: 150px;
    padding: 5px 5px 5px 10px;
    margin: 0px 0px 0px 10px;
    border-radius: 50px;
    color: black;
    -moz-transition: color .9s, -moz-transform .9s;
    -webkit-transition: color .9s, -moz-transform .9s;
    -o-transition: color .9s, -moz-transform .9s;
    transition: color .9s, -moz-transform .9s; 
}
.sideMenu a:hover {
    box-shadow: inset 0px 0px 5px 0px black;
    color: blue;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:53:46.483

`, -moz-transform .9s`你需要在过渡声明中去掉。

```
.sideMenu a {
    display: block;
    width: 150px;
    padding: 5px 5px 5px 10px;
    margin: 0px 0px 0px 10px;
    border-radius: 50px;
    color: black;
    -moz-transition: color .9s;
    -webkit-transition: color .9s;
    -o-transition: color .9s;
    transition: color .9s; 
}
.sideMenu a:hover {
    box-shadow: inset 0px 0px 5px 0px black;
    color: blue;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T17:53:16.773

您的`transform`价值观都在使用该`-moz-`版本。此外，您的过渡仅在以您拥有它的方式“悬停”时才有效。如果您将转换添加到两个规则，您也将在悬停时获得转换。

[更新的小提琴](http://jsfiddle.net/HvvjC/)

```
.sideMenu a {
    display: block;
    width: 150px;
    padding: 5px 5px 5px 10px;
    margin: 0px 0px 0px 10px;
    border-radius: 50px;
    color: black;
    -moz-transition: color .9s, -moz-transform .9s;
    -webkit-transition: color .9s, -webkit-transform .9s;
    -o-transition: color .9s, -o-transform .9s;
    transition: color .9s, transform .9s; 
}
.sideMenu a:hover {
    box-shadow: inset 0px 0px 5px 0px black;
    color: blue;

    -moz-transition: color .9s, -moz-transform .9s;
    -webkit-transition: color .9s, -webkit-transform .9s;
    -o-transition: color .9s, -o-transform .9s;
    transition: color .9s, transform .9s;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T17:54:04.883

您`-moz-transform`正在引起问题。如果您只想为`color`属性设置动画，可以将其删除：

```
 -moz-transition: color .9s;
    -webkit-transition: color .9s;
    -o-transition: color .9s;
    transition: color .9s; 
} 
```

**演示：http: [//jsfiddle.net/C83Yd/1/](http://jsfiddle.net/C83Yd/1/)**

# c++ - 如何通过 cstdio::scanf 在一行中读取三个整数？

> ID：15368458
> 
> 赞同：0
> 
> 时间：2013-03-12T17:49:52.597
> 
> 标签：c++, c, scanf

我有使用 cin/in 太慢的数据。每行有三个整数：

```
1 2 2
3 4 1
5 6 122
6 4 7 
```

如何读入循环中的每一行，以获得结果（对于第一次迭代）：

```
x==1;
y==2;
z==2;
etc. 
```

?

如何使用 cstdio::scanf 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:51:22.297

用这个：

```
 while(scanf("%d %d %d", &a, &b, &c) != EOF) {
   ... do stuff ...
 } 
```

# reporting-services - 在 SSRS 报告的表达式中使用汇总字段

> ID：15368461
> 
> 赞同：1
> 
> 时间：2013-03-12T17:50:01.997
> 
> 标签：reporting-services, sum, expression, summary, ssrs-expression

我将我的报告的详细信息总结为一个摘要表达式，一切正常。这些字段是工作小时数的十进制值。因此，汇总值也是十进制值。我想访问汇总值并将其转换为小时/分钟。我已将快递标记为“WorkTimeSum”，但似乎无法处理它。领域！显然行不通，因为它是一个摘要表达式。我在想ReportItems！应该工作，但无济于事。如何在同一汇总行的表达式中使用此表达式字段（在汇总行中）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T23:07:58.683

如果我理解正确，您是在问如何引用包含总工作时间值的文本框，以便您可以使用不同文本框中的表达式将其转换为小时和分钟？

您可以使用任一 ReportItems！例如

```
=ReportItems!Textbox20.Value) 
```

或 ReportItems("") 例如

```
=ReportItems("Textbox20").Value 
```

引用另一个文本框的值。请注意名称，因为它们区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:10:51.907

您可以在任何表达式中使用聚合函数。例如，在任何标题行中，您可以使用以下表达式来确定总小时值：

```
=Floor(Sum(Fields!hours.Value)) 
```

`Sum(Fields!hours.Value)`只是在任何情况下的总小时数，例如，如果它是组标题行，则为组总数；您可以将此表达式用作您需要的任何其他表达式的输入。

听起来您的问题不是转换本身，所以希望这可以为您指明正确的方向。如果您需要更多信息，请指定。

# php - 获取当前日期值以拥有自己的小时数

> ID：15368462
> 
> 赞同：1
> 
> 时间：2013-03-12T17:50:02.713
> 
> 标签：php, jquery, mysql, highcharts

我每天每小时都会向 MySql 数据库获取值。我得到了带有 highcharts 的网站，但我无法让它工作。

我需要从 MySql 中获取当前日期值，并将其组织为自己的时间。

这是我的 Highcharts 代码：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
    <script src="http://code.highcharts.com/highcharts.js"></script>
    <script type="text/javascript">     
            var chart;
            $(document).ready(function() {
                chart = new Highcharts.Chart({
                    chart: {
                        renderTo: 'chart',
                        defaultSeriesType: 'spline'
                    },
                    title: {
                        text: "Today's Values"
                    },
                    subtitle: {
                        text: 'Values by Hour'
                    },
                    credits: {
                        enabled: false
                    },                  
                    xAxis: {
                        categories: ['12AM', '1AM', '2AM', '3AM', '4AM', '5AM', 
                            '6AM', '7AM', '8AM', '9AM', '10AM', '11AM','12PM', '1PM', '2PM', '3PM', '4PM', '5PM', 
                            '6PM', '7PM', '8PM', '9PM', '10PM', '11PM']
                    },
                    yAxis: {
                        min: 0,
                        title: {
                            text: 'Values'
                        },
                        labels: {
                            formatter: function() {
                                return this.value
                            }
                        }
                    },
                    tooltip: {
                        valueDecimals: 2,
                        crosshairs: true,
                        shared: true,
                        formatter: function() {
                            return '$' + this.y;
                        }
                    },
                    plotOptions: {
                        spline: {
                            marker: {
                                radius: 4,
                                lineColor: '#666666',
                                lineWidth: 1
                            }
                        }
                    },
                    series: [{
                        name: 'Values',
                        data: [
                        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]

                    }]
                });                             
            });

</script> 
```

这是来自 MySql 数据库的图片

[图表](http://img35.imageshack.us/img35/39/chartlp.png)

因此，我需要将 MySql 中的所有值归类为图表中的自己小时数。它应该计算值+在自己的类别中显示，知道怎么做吗？

我坚持这个，因为我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:48:47.447

我建议熟悉有关预处理数据表单 MySQL [http://docs.highcharts.com/#preprocessing-data-from-a-database的文章](http://docs.highcharts.com/#preprocessing-data-from-a-database)

您应该将 php 中的数据导出为 JSON，然后如果您想为 xAxis 使用类别，则需要解析您的 JSON 并将适当的数据推送到正确的位置。与系列数据点类似。

# xslt - 由 Slow Cheetah 转换删除的 XMLNS 属性

> ID：15368463
> 
> 赞同：2
> 
> 时间：2013-03-12T17:50:03.343
> 
> 标签：xslt, slowcheetah

我正在尝试使用 Slow Cheetah 来转换 Windows 计划任务配置文件。我只是想添加“重复”节点信息，如下所示：

**原来的：**

```
<Task version="1.2" xmlns="http://schemas.microsoft.com/windows/2004/02/mit/task">
  <RegistrationInfo>
    <Date>2013-01-02T09:32:12.2196371</Date>
    <Author>xxx</Author>
  </RegistrationInfo>
  <Triggers>
    <CalendarTrigger>
      <StartBoundary>2013-01-10T01:00:00</StartBoundary>
      <Enabled>true</Enabled>
      <ScheduleByDay>
        <DaysInterval>1</DaysInterval>
      </ScheduleByDay>
    </CalendarTrigger>
  </Triggers>
.....
</Task> 
```

**必需的附加 XML**

```
<CalendarTrigger>
   <Repetition>
     <Interval>PT300S</Interval>
   </Repetition>
</CalendarTrigger> 
```

为此，我有以下转换文件：

```
<?xml version="1.0" encoding="utf-16" ?>
<Task version="1.2">
  <Triggers>
    <CalendarTrigger xdt:Transform="Insert">
      <Repetition>
        <Interval>PT300S</Interval>
      </Repetition>
    </CalendarTrigger>
  </Triggers>
</Task> 
```

我遇到的问题是 CalendarTrigger 节点之外的所有属性都被删除（因此使生成的转换配置成为无效的计划任务格式）。

我试过添加

```
xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform" xdt:Transform="SetAttributes" xmlns="http://schemas.microsoft.com/windows/2004/02/mit/task" 
```

到 Task 节点，但该属性随后在 CalendarTrigger 级别生成（并且我不能将此属性放在原始属性上，因为然后我得到“源文档中没有元素匹配'/Task/Triggers'”）。

任何指针？

**更新：**

该问题似乎与**xmlns**属性有关；如果我尝试将其包含在原始文件的“任务”节点中，我会得到“源文档中没有元素匹配 '/Task/Triggers'” - 但是将此属性更改为 'xmlns2' 可以正常工作并产生我需要的内容（尽管带有“xmlns2”属性！）。这是慢猎豹的已知限制吗？有人知道潜在的解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:25:25.773

那是因为你`xdt:Transform="Insert"`的水平高一级。

这应该有效：

```
<?xml version="1.0" encoding="utf-16" ?>
<Task xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform" xmlns="http://schemas.microsoft.com/windows/2004/02/mit/task">
    <Triggers>
      <CalendarTrigger>
        <Repetition xdt:Transform="Insert">
          <Interval>PT300S</Interval>
        </Repetition>
      </CalendarTrigger>
    </Triggers>
</Task> 
```

# android - 在使用 Google Play 商店和使用 PhoneGap 的设备上安装 JQuery Mobile 应用程序有什么区别

> ID：15368466
> 
> 赞同：0
> 
> 时间：2013-03-12T17:50:12.770
> 
> 标签：android, jquery, cordova, mobile

在使用 Google Play 商店和使用 PhoneGap 的设备上安装 JQuery Mobile 应用程序有什么区别？

此外，除了PhoneGap 之外，我们还可以使用其他工具在设备上安装Jquery 应用程序吗？

谢谢！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:03:16.703

您不使用 PhoneGap 安装应用程序。Phonegap 是一个框架，可让您使用 html 5/javascript 开发应用程序。开发应用程序后，如果您希望用户安装它，您仍然必须在 Google Play 上发布它。Jquery Mobile 也是一个框架，旨在开发针对移动屏幕优化的网页。

[这里有一篇很好的文章](https://stackoverflow.com/questions/11239704/phonegap-or-jquerymobile)解释了 phonegap 和 jquery mobile 之间的区别。

还有其他几个移动 web 框架，例如[Titanium](http://www.appcelerator.com/)、[sencha](http://www.sencha.com/)、[kendo ui](http://www.kendoui.com/)，如果您快速搜索一下，我相信您可以找到其他框架。

您需要阅读一些关于它们的信息，并了解它们之间的差异和优势。[例如，谷歌搜索“Phonegap vs Titanium”](http://bit.ly/16psxlP)将为您提供一个很好的起点，以了解它们之间的区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:03:44.970

PhoneGap 只是一个用于开发移动应用程序的跨平台框架。您可以使用 HTML、CSS、JS（包括 jQuery 和 jQuery Mobile）在 PhoneGap 中进行开发。为了测试应用程序，您可以使用 PhoneGap 和 Android SDK 提供的工具将它们传输到您的设备。

但是为了发布您的应用程序并使其在 Google Play 商店中可供其他人使用，您必须创建一个开发者帐户（在撰写本文时为 25 美元）并在那里上传您的应用程序包 (APK)。

*   [PhoneGap 指南](http://docs.phonegap.com/en/2.5.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)（阅读“部署到设备”）
*   [Android 指南“使用硬件设备”](http://developer.android.com/tools/device.html)
*   [Android 指南“开始发布”](http://developer.android.com/distribute/googleplay/publish/register.html)

还有其他可用的跨平台框架，例如“Titanium”。请记住，jQuery Mobile 只是一个 Javascript (jQuery) 扩展，用于帮助构建类似于传统应用程序行为和外观的用户界面。它不是构建应用程序的完整框架。

# sql-server - Read Committed Snapshot Isolation：更新冲突回滚是否显示为死锁？

> ID：15368468
> 
> 赞同：0
> 
> 时间：2013-03-12T17:50:17.330
> 
> 标签：sql-server, deadlock, trace, read-committed-snapshot, snapshot-isolation

我已阅读提交的快照隔离并允许隔离`ON`我的数据库。我仍然收到死锁错误。我很确定我知道发生了什么...

1.  第一个事务在其事务开始时获得一个序列号。
2.  第二个在其事务开始时获得较晚的序列号，但在第一个事务已经获得它之后（第二个序列号比第一个更新）。
3.  第二个事务首先进入更新语句。当它检查行版本控制时，它会看到两个事务之前的记录，因为第一个事务尚未到达更新。它发现该行的序列号处于已提交状态并继续前进。
4.  第一个事务轮到它，就像第二个事务找到相同的提交序列号，因为它不会看到第二个事务，因为它比它自己更新。当它尝试提交时，它发现另一个事务已经更新了尝试提交的记录，并且必须回滚。

这是我的问题：此回滚是否会在跟踪中显示为死锁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-08T04:13:02.403

在附加到原始问题的评论中，您说：“我只是想知道更新冲突是否会显示为死锁，或者是否会显示为不同的东西。” 当我开始研究使用快照隔离时，我实际上有这些类型的担忧。最终我意识到 READ_COMMITTED_SNAPSHOT 和隔离级别 SNAPSHOT 之间存在显着差异。

前者使用行版本控制进行读取，但继续使用排他锁定进行写入。因此，READ_COMMITTED_SNAPHOT 实际上介于纯悲观和纯乐观并发控制之间。因为它使用锁进行写入，所以不可能发生更新冲突，但会出现死锁。至少在 SQL Server 中，这些死锁将被报告为死锁，就像使用“正常”悲观锁定一样。

后者（隔离级别SNAPSHOT）是纯粹的乐观并发控制。行版本控制用于读取和写入。死锁是不可能的，但更新冲突是可能的。后者被报告为更新冲突而不是死锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-27T17:42:35.467

快照事务被回滚，并收到以下错误消息：

```
 Msg 3960, Level 16, State 4, Line 1
 Snapshot isolation transaction aborted due to update conflict. You cannot use snapshot
 isolation to access table 'Test.TestTran' directly or indirectly in database 'TestDatabase' to
 update, delete, or insert the row that has been modified or deleted by another transaction.
 Retry the transaction or change the isolation level for the update/delete statement. 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-25T15:39:51.210

为了防止死锁启用两者

ALLOW_SNAPSHOT_ISOLATION 和 READ_COMMITTED_SNAPSHOT

ALTER DATABASE [BD] SET READ_COMMITTED_SNAPSHOT ON；ALTER DATABASE [BD] 设置 ALLOW_SNAPSHOT_ISOLATION ON；

这里解释差异 [http://technet.microsoft.com/en-us/sqlserver/gg545007.aspx](http://technet.microsoft.com/en-us/sqlserver/gg545007.aspx)

# javascript - 使用js在android中打开本机选择弹出窗口

> ID：15368472
> 
> 赞同：1
> 
> 时间：2013-03-12T17:50:25.293
> 
> 标签：javascript, android, html, cordova

我正在使用phonegap开发android和ios应用程序，所以我有一个选择，我想用js打开它，在ios上简单地聚焦元素效果很好，但在android中它什么也没做，模拟点击选择也没有结果，也许有一些插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:57:22.953

最后我找到了一个解决这个问题的插件，你可以从[这里下载](https://github.com/kidino/phonegap-alertdialoglist-plugin)

# perl - 使用 cat>file.sh< 时忽略 shell 脚本中的变量 我有一个关于在 shell 脚本中嵌入脚本文件的问题。我经常需要创建一个单独的 shell 脚本来解包其他脚本，但我真的不喜欢注释掉所有嵌入脚本的变量。我的 shell 脚本内容示例： echo "Hello world" pwd cat>embedded_perl_script&l 问问题 问问题 2013-03-12T17:50:33.300 1740 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我有一个关于在 shell 脚本中嵌入脚本文件的问题。我经常需要创建一个单独的 shell 脚本来解包其他脚本，但我真的不喜欢注释掉所有嵌入脚本的变量。我的 shell 脚本内容示例： echo "Hello world" pwd cat>embedded_perl_script<<eof #!="" usr="" bin="" perl="" -w="" \$input="\$ARGV[0];" my="" \$argc;="" \$argc="@ARGV;" print="" eof="" embedded_perl_script="" echo="" "finished!"="" 这段代码工作正常，但我真的想要一种方法来避免注释掉所有嵌入式="" 脚本的变量。有什么建议么？="" 试试这个="" ：="" "hello="" world"="" pwd="" cat="">embedded_perl_script<<'EOF' #!/usr/bin/perl -w $input = $ARGV[0]; my $argc; $argc = @ARGV; print $input EOF perl embedded_perl_script echo "Finished!" 请注意，EOF已更改为'EOF'=) 注意：此技术在此处命名为-doc perlshellembedcat 4 1 回答 1 This answer is useful 1 尝试这个 ： echo "Hello world" pwd cat>embedded_perl_script<<'EOF' #!/usr/bin/perl -w $input = $ARGV[0]; my $argc; $argc = @ARGV; print $input EOF perl embedded_perl_script echo "Finished!" 请注意，EOF已更改为'EOF'=) 注意：此技术在此处命名为-doc 于 2013-03-12T17:55:02.847 回答 Related 4 c# - 通过循环将项目添加到 DataContext 1 ipa - 编辑和编译 install_name_tool 2 jquery - jquery 等到 iframe 被加载 1 git - 让 github 与 svn 同步 1 email - HTML 电子邮件黑莓 8 c# - 如何让我的 Windows 服务以特定的时间间隔运行？ 3 c - sem_open 不适用于 Ubuntu：未定义对 `sem_open' 的引用 0 c++ - lambda 上的模板参数推导 1 zend-framework - 将变量传递给 viewScript 装饰器 2 xquery - 如何在 Marklogic 中搜索并返回文档名称？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</eof>

> ID：15368474
> 
> 赞同：2
> 
> 时间：
> 
> 标签：perl, shell, embed, cat

我有一个关于在 shell 脚本中嵌入脚本文件的问题。我经常需要创建一个单独的 shell 脚本来解包其他脚本，但我真的不喜欢注释掉所有嵌入脚本的变量。我的 shell 脚本内容示例：

```
echo "Hello world"
pwd

cat>embedded_perl_script<<EOF
#!/usr/bin/perl -w
\$input = \$ARGV[0];
my \$argc;
\$argc = @ARGV;
print \$input
EOF

perl embedded_perl_script
echo "Finished!" 
```

这段代码工作正常，但我真的想要一种方法来避免注释掉所有嵌入式 perl 脚本的变量。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:55:02.847

尝试这个 ：

```
echo "Hello world"
pwd

cat>embedded_perl_script<<'EOF'
#!/usr/bin/perl -w
$input = $ARGV[0];
my $argc;
$argc = @ARGV;
print $input
EOF

perl embedded_perl_script
echo "Finished!" 
```

请注意，`EOF`已更改为`'EOF'`=)

**注意**：此技术在此处命名*为-doc*

# c# - EPPlus - 按索引而不是按字母表示处理多列

> ID：15368476
> 
> 赞同：7
> 
> 时间：2013-03-12T17:50:37.817
> 
> 标签：c#, vb.net, excel, epplus

我在我的 .Net 项目中使用 EPPlus 将一些数据输出到 Excel 工作表中。

假设我想用特定格式格式化列 EG。使用 EPPlus，我知道我可以这样做：

```
wks.Cells("E:G").Style.Numberformat.Format = ... 
```

现在，我想知道，假设我也想做同样的事情，但是通过它们的索引号而不是它们的字母表示来引用列 - 理论上看起来像这样：

```
wks.Columns("5:7").Style.Numberformat.Format = ... 
```

* * *

现在，我知道如果我这样做会起作用：

```
wks.Cells(1,5,wks.Dimension.End.Row,7).Style.Numberformat.Format = ... 
```

但我希望在 EPPlus 中有更好/更好的方法来做到这一点。有什么想法/建议吗？

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T19:45:15.397

作为对我自己的问题的回答，为了帮助任何由此而来的人，我最终创建了自己的扩展方法`Columns`，将列号转换为`ExcelRange`对象：

```
''' <summary>
''' Allows you to reference a column by its numeric index rather than its alphabetic representation
''' </summary>
''' <param name="colNum">The index of the column to reference on in the worksheet.</param>
<System.Runtime.CompilerServices.Extension()> _
Public Function Columns(ByVal wks As ExcelWorksheet, ByVal colNum As Integer) As ExcelRange
    Dim ColName As String = ReturnColumnName(colNum)

    Return wks.Cells(ColName & ":" & ColName)
End Function

''' <summary>
''' Allows you to reference a column by its numeric index rather than its alphabetic representation
''' </summary>
''' <param name="StartColNum">The start col num.</param>
''' <param name="EndColNum">The end col num.</param>
<System.Runtime.CompilerServices.Extension()> _
Public Function Columns(ByVal wks As ExcelWorksheet, ByVal StartColNum As Integer, ByVal EndColNum As Integer) As ExcelRange
    Dim StartColName As String = ReturnColumnName(StartColNum)
    Dim EndColName As String = ReturnColumnName(EndColNum)

    Return wks.Cells(StartColName & ":" & EndColName)
End Function

Private Function ReturnColumnName(ByVal colNum As Integer) As String
    Dim d As Integer
    Dim m As Integer
    Dim Name As String

    d = colNum
    Name = ""

    Do While (d > 0)
        m = (d - 1) Mod 26
        Name = Chr(65 + m) + Name
        d = Int((d - m) / 26)
    Loop

    Return Name
End Function 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T09:12:47.667

我用 c# 重写了@John Bustos 给出的答案，然后意识到我想使用列本身而不是单元格范围。在下面的代码中，John 的方法已重命名为“GetColumnCells”。

```
public static List<ExcelColumn> GetColumns(ExcelWorksheet wks, int startColNum, int endColNum) {
    int d = startColNum;
    List<ExcelColumn> cols = new List<ExcelColumn>();

    while (d <= endColNum) {
        cols.Add(wks.Column(d));
        d++;
    }

    return cols;
}

public static ExcelRange GetColumnCells(ExcelWorksheet wks, int startColNum, int endColNum) {
    string startColName = GetColumnName(startColNum);
    string endColName = GetColumnName(endColNum);

    return wks.Cells[startColName + ":" + endColName];
}

public static string GetColumnName(int colNum) {
    int d, m;
    string name = String.Empty;

    d = colNum;
    while (d > 0) {
        m = (d - 1) % 26;
        name = ((char)(65 + m)) + name;
        d = (d - m) / 26;
    }

    return name;
} 
```

# ocaml - 编译 ocaml-websocket 失败

> ID：15368477
> 
> 赞同：3
> 
> 时间：2013-03-12T17:50:38.913
> 
> 标签：ocaml, ocaml-batteries, ocsigen, ocaml-lwt

尝试构建 ocaml-websocket，它失败了：

```
File "lib/websocket.ml", line 202, characters 29-42:
Error: The function applied to this argument has type
         ?buffer_size:int ->
         (Lwt_io.input_channel * Lwt_io.output_channel) Lwt.t
This argument cannot be applied with label ~setup_socket 
```

有问题的功能线是，

```
lwt ic, oc = Lwt_io.open_connection ~setup_socket sockaddr in 
```

任何想法，如果 lwt API 在以前的版本中发生了变化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T09:18:58.020

我使用了自定义版本的 Lwt，这就是原因。我将很快发布一个与普通 Lwt 兼容的新版本。

# mysql - 自动删除主键序列中的空白

> ID：15368478
> 
> 赞同：4
> 
> 时间：2013-03-12T17:50:40.203
> 
> 标签：mysql, sql, database, primary-key

我正在创建一个网页。该网页根据用户的操作将数据存储到 MySQL 数据库中。数据库有很多行。行的主键是列rowID，它只是按顺序对行进行编号（例如1、2、3、4....）。用户可以选择删除行。问题是当用户删除最后一行以外的行时。rowID 中有一个跳过。例如，如果有 5 行， 1, 2, 3, 4 ,5 并且用户删除了第三行。现在 rowID 列中的数据是 1、2、4、5。我想知道 MySQL 或 PHP 中是否已经有一个内置函数来有效地解决这个问题。

我知道摆脱这种情况的唯一方法是循环遍历行并基本上刷新 rowID。但是，如果有大量行，我觉得这在时间方面会非常昂贵。

我还想知道如何在创建新行时自动增加 rowID。目前我有代码来查找当前最大的 rowNumber 并插入具有当前最大 rowNumber+1 的行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:54:39.557

没有，因为它不重要。您不应该依赖主键是一个连续的序列。它的唯一功能是确保键是行的唯一标识符，除此之外，数字没有任何意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T17:52:40.557

你不想那样做。主键是唯一标识符，一旦创建就不应更改。您正在寻找的是[嵌套集合](http://en.wikipedia.org/wiki/Nested_set_model)。添加一个字段来跟踪 left_id 和 right_id 并在必要时手动更新。Doctrine2 中有一些库可以为您处理这个问题。

如果您绝对必须进行此更改，您可以使用 alter table 删除该字段，然后重新添加它。

# algorithm - 基数排序 nx (k/d) 的解释

> ID：15368479
> 
> 赞同：0
> 
> 时间：2013-03-12T17:50:41.280
> 
> 标签：algorithm, sorting, radix

我查看了基数排序算法的最佳、平均和最坏情况时间。

平均值为 NXK/D

我知道 N 是算法中的元素数

我知道 K 是键/桶的数量

有谁知道D代表什么？

我要去维基百科上的桌子，谢谢

参考 - [http://en.wikipedia.org/wiki/Sorting_algorithm#Radix_sort](http://en.wikipedia.org/wiki/Sorting_algorithm#Radix_sort)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T18:01:20.573

`D`是 base 中的位数`K`。

例如，如果您有 K = 16，并且最大数是`255`，`D = 2` `(16 ^ 2 = 256)`。如果更改`K`为 4 ，则`D`变为 4 `(4 ^ 4 = 256)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-30T23:13:16.937

基数排序的运行时间通常简化为 O(n)，但有几个因素会导致此运行时间急剧增加。

分配变量：

n =要排序的元素数/n

L = 元素的长度，也就是每个元素的位数

k = 每个元素中的数字范围（数字范围从 1 到 k）

基数排序算法对每个元素中的每个数字执行桶排序。因此，必须进行 L 次排序，并且每次排序需要 O(n+k) 时间，因为它是将 n 个元素放入 k 个桶中的桶排序。因此，基数排序更准确的运行时间是 O(L(n+k))。

当数字范围 k 是一个小常数时，如十进制数，则基数排序的运行时间可以简化为 O(Ln)。

由于这些因素会影响基数排序算法的运行时间，因此需要考虑使用该算法按顺序执行排序或使其高效。数据需要：

1.  具有固定长度（可以选择填充元素以便为所有元素创建统一的长度）
2.  元素的长度 L 在 n 中是线性的
3.  数字范围 k 在 n 中是线性的

# c# - 查询核心/核心名称还是只查询所有核心？

> ID：15368482
> 
> 赞同：1
> 
> 时间：2013-03-12T17:50:49.333
> 
> 标签：c#, solr, solrnet

我正在编写一个程序来搜索许多 solr 服务器，每个服务器都可以有许多我不知道名称的内核。有什么方法可以使用 solrnet 查询服务器的核心名称，甚至查询所有核心？

我能想到的唯一另一件事是向 solr/admin/cores?action=STATUS 发出 Web 请求并解析结果，但这似乎不必要地复杂..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:07:40.607

SolrNet 中有一些[CoreAdmin](https://github.com/mausch/SolrNet/blob/master/SolrNet/Impl/SolrCoreAdmin.cs)支持，但它目前仅支持命名核心上的 STATUS 命令，而不支持整个 Solr 实例。我相信将网络请求解析为 solr/admin/cores?action=STATUS 将是此时您的最佳选择。

# php - mysql SELECT distinct row from col1 WHERE col2=x

> ID：15368483
> 
> 赞同：1
> 
> 时间：2013-03-12T17:50:49.610
> 
> 标签：php, mysql, distinct

我试图从“特别”中选择不同的名称，但仅在 col Type = 特定值的情况下。

例如我有

```
rowID    Type   Specifically
1        cat    Ocicat
2        cat    Bombay
3        cat    Bombay
4        cat    Bengal
5        cat    Savannah
6        dog    Collie
7        dog    Keeshond
8        dog    Pug
9        dog    Keeshond
10       dog    Pug
11       dog    Doberman
12       Horse  n/a 
```

我想读出类似的东西

```
type=cat and specific=Bengal
type=cat and specific=Bombay
type=cat and specific=Ocicat
type=cat and specific=Savannah 
```

我目前有这个，但它给了我“未定义的索引：类型”

```
$Result = mysql_query("select distinct Specifically from pet_table WHERE Type='cat' ORDER BY Specifically asc ");

while($row = mysql_fetch_array($Result)) 
{
PRINT("type=".$row['Type']." and specific=".$row['Specifically']."<BR>");
} 
```

我也想做一些类似 Type 不是 cat OR dog OR horse ... 等的事情

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:54:41.703

该索引不存在，因为您没有选择它。包括`Type`在您的`SELECT`声明中以修复它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T17:54:46.663

您收到未定义索引错误，因为您没有获取该`Type`列，而是尝试使用它。

将您的查询更改为。

```
select type, distinct Specifically from pet_table 
WHERE Type='cat' ORDER BY Specifically asc 
```

其次，如果你想要 Type not cat or dog or horse，你可以使用`NOT IN`从句。

最后，请不要使用 MySQL，因为它没有维护并且已被弃用。考虑使用 MySQLi 或 PDO。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T17:53:50.793

你想要 GROUP BY

```
SELECT Type, Specifically FROM pet_table
  WHERE Type='cat'
  GROUP BY Specifically
  ORDER BY Specifically asc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T17:57:02.720

您收到此错误的原因是您没有选择`Type`.

```
$res = mysql_query("SELECT DISTINCT `Specifically`,`Type` from `pet_table` WHERE `Type`='cat' ORDER BY `Specifically` ASC");

while($row = mysql_fetch_assoc($res))
{
    echo "The type is {$row['Type']} and it is specifically a {$row['Specifically']}
} 
```

# ios - Base64 字符串到 NSData 然后 gunzip

> ID：15368485
> 
> 赞同：0
> 
> 时间：2013-03-12T17:50:53.120
> 
> 标签：ios, gzip, nsdata

我有一个二进制的base64编码的NSString，我使用@mattt的[Godzippa](https://github.com/mattt/Godzippa)类将其转换为NSData对象我试图对nsdata进行压缩，但出现错误：

`Error Domain=com.godzippa.zlib.error Code=-3 "Error inflating payload" UserInfo=0x881b0b0 {NSLocalizedDescription=Error inflating payload}`

当我进一步调查`zStream.msg`时`msg = 0x000164de "incorrect header check"`

但是我很难理解不正确的标头检查的含义以及如何解决此问题。由于缺乏细节，我提前申请，如果有人可以引导我了解这里的问题，我会及时回答任何问题。

这是我的做法，但是我删除了base64字符串：

```
NSString *dataString = @"REMOVED BASE64 STRING HERE";

NSData *data = [NSData dataFromBase64String:dataString];

NSError *error = nil;

NSData *decompressed = [data dataByGZipDecompressingDataWithError:&error];

if(error){
    NSLog(@"Error: %@", error);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T06:45:07.020

我有一些代码完全符合您的要求（gunzip 不是解压缩）。你可以在 GitHub 上找到源代码，[在我](http://bit.ly/16whk30 "代码片段：解压缩 gzipped 缓冲区")[的](http://bit.ly/YdN5a9 "GitHub iosdevzone/IDZGunzip")博客上逐行描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T06:31:26.980

事实证明，当我需要解压缩 gzip 文件时，我正在尝试解压缩 zlib 存档。具体来说，我必须将其更改为libz/gzip 库中`inflateInit()`的`inflatateInit2()`方法。

# c# - wpf listview 在运行时将图像添加到 listviewitem

> ID：15368486
> 
> 赞同：1
> 
> 时间：2013-03-12T17:50:55.607
> 
> 标签：c#, wpf, enums, bit-manipulation

大家好，我正在使用 C# WPF 开发一个项目，我需要在列表视图中显示客户端的状态所以我有以下定义客户端状态的枚举

```
//Values used here for Bitwise Operations
public enum ClientStatus 
{
    NONE = 0,
    NEWCLIENT = 1, 
    MONITORED = 2, 
    IMPORTAND = 4,  
    DISATISFIED = 8, 
    DETERIORATING = 16, 
    SATISFIED = 32 
}; 
```

要将每个转换为特定的画笔，我有以下代码，经过测试并且可以正常工作

```
[ValueConversion(typeof(Enums.ClientStatus), typeof(Brush))]
public class StateValueColorConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        Brush Brush = Brushes.Red;
        if (value is Enums.ClientStatus)
        {
            Enums.ClientStatus sv = (Enums.ClientStatus)value;

            switch (sv)
            {
                case Enums.ClientStatus.IMPORTAND:
                    Brush = Brushes.Blue;
                    break;
                case Enums.ClientStatus.MONITORED:
                    Brush = Brushes.Purple;
                    break;
                case Enums.ClientStatus.NEWCLIENT:
                    Brush = Brushes.Orange;
                    break;
                case Enums.ClientStatus.SATISFIED:
                    Brush = Brushes.Green;
                    break;
                case Enums.ClientStatus.DETERIORATING:
                    Brush = Brushes.Yellow;
                    break;
                case Enums.ClientStatus.DISATISFIED:
                    Brush = Brushes.Red;
                    break;
            }
        }
        return Brush;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

做绑定我做了以下，这不是我们的讲师真正想要的

```
<GridViewColumn Header="Status" Width="110">
    <GridViewColumn.CellTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                 <TextBox Width="50" Background="{Binding Path=Status, Converter={StaticResource ColorConverter}}"></TextBox>
                 <TextBox Width="50" Background="{Binding Path=SatisFactory, Converter={StaticResource ColorConverter}}"></TextBox>
            </StackPanel>
        </DataTemplate>
    </GridViewColumn.CellTemplate>
</GridViewColumn> 
```

我们需要将每个枚举显示为不同的颜色，但是客户端可以有多种状态，即

```
var status = ClientStatus.NEWCLIENT | ClientStatus.SATISFIED; 
```

这现在将返回一个 int 值 33

我现在的问题是我在客户端中使用了两个属性来显示单独的状态，这是不正确的，我们需要使用按位运算，即。

```
if ((status & ClientStatus.NEWCLIENT) == ClientStatus.NEWCLIENT)
{
    //do whatever
} 
```

所以我可以执行上面的代码，但是我将如何对一个属性进行绑定以在一个 gridviewcolumn 中显示多种颜色，我搜索了论坛，但如果有这个问题或类似的问题，我会错过它

我不确定如何陈述这个问题，所以我会换一种说法

我想在列中显示所有选定的枚举。

感谢您的任何帮助或建议希望我有意义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:22:44.300

如果我正确理解您的问题，您希望为枚举中的每个值显示一个图标、图像或 UI 元素，并在对象的状态与该值匹配时使它们可见。

我想我会创建一个包含所有 UI 元素的简单 StackPanel，如下所示：

```
<StackPanel Orientation="Horizontal">
  <Rectangle Fill="Blue" 
             Visibility="{Binding Status, 
                                  Converter={StaticResource StatusToVisibilityConverter},
                                  ConverterParameter=NEWCLIENT}" />
  <Rectangle Fill="Green" 
             Visibility="{Binding Status, 
                                  Converter={StaticResource StatusToVisibilityConverter},
                                  ConverterParameter=SATISFIED}" />
  ...
</StackPanel> 
```

然后在您的 StatusToVisibilityConverter 中将 Status 的值与 ConverterParameter 中的值进行比较（您可以使用[TryParse](http://msdn.microsoft.com/en-us/library/dd783499.aspx)静态方法将其转换为枚举值。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:57:08.120

将 DataTemplate 名称 StatusDataTemplate 或 Enums.ClientStatus 的默认 DataTemplate 定义为 TargetType。
在此模板中，定义一个 3 列 X 2 行的网格。
在每个网格单元格中，定义一个边框，使用 6 个枚举之一作为 ConverterParameter 的绑定作为背景，如果值 AND 参数 = 参数，则返回“正确”颜色的转换器，否则为透明。

然后你可以使用：

```
<ContentPresenter Content="{Binding Status}" /> 
```

...如果您使用默认的 DTpl

或者 ：

```
<ContentPresenter Content="{Binding Status}" ContentTemplate="{StaticResource StatusTemplate}"/> 
```

# ruby-on-rails - 如何在 Ubuntu 服务器上为 Ruby on Rails 以生产模式重新启动 Phusion Passenger + Apache？

> ID：15368492
> 
> 赞同：6
> 
> 时间：2013-03-12T17:51:00.113
> 
> 标签：ruby-on-rails, ruby-on-rails-3, apache, passenger

我有 Apache + phusion 乘客，我已经放了

```
RailsEnv production 
```

在 /etc/apache2/sites-available/default 文件中并已重新启动 apache 但是当我运行时

```
rails c
> Rails.env.production? 
```

它给了fales至于

```
> Rails.env.development? 
```

它给出了真实的。有没有其他方法可以重新启动乘客，因为我认为默认设置“RailsEnv 生产”是正确的方法？顺便说一句我正在使用

```
sudo service apache2 restart 
```

如何使用乘客 + apache 在生产模式下启动我的 ruby​​ on rails 应用程序？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-12T17:56:38.017

只需在应用程序的 tmp 目录中创建一个 restart.txt

例如

```
 touch %RAILS_ROOT%/tmp/restart.txt 
```

看这里 [http://www.modrails.com/documentation/Users%20guide%20Apache.html](http://www.modrails.com/documentation/Users%20guide%20Apache.html)第 3.3 节

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T17:56:28.803

您的应用可能已经处于生产模式。

默认情况下，`rails c`以开发模式加载应用程序。

如果您希望控制台以生产模式启动，请执行以下操作：

`RAILS_ENV=production rails c`

控制台和 Web 应用程序是两个不同的 Rails 进程并独立运行。

您应该检查您的 production.log 文件以确保您的应用程序在生产中运行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-12T12:35:13.547

仅用于启动具有特定端口的应用程序，请使用以下命令：

**乘客开始 -a 0.0.0.0 -p 3000 -d -e 生产**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-16T07:19:34.157

[我按照此处](https://www.phusionpassenger.com/library/admin/apache/restart_app.html)的 PhusionPassenger 文档中列出的命令进行操作，它们立即工作。

```
deployer@staging:~$ passenger-config restart-app
Please select the application to restart.
Tip: re-run this command with --help to learn how to automate it.
If the menu doesn't display correctly, press '!'

 ‣   /home/deployer/myapp/current (staging)
     /home/deployer/myapp_2/current (staging)
     Cancel

Restarting /home/deployer/myapp/current (staging)

deployer@staging:~$ passenger-config restart-app
Please select the application to restart.
Tip: re-run this command with --help to learn how to automate it.
If the menu doesn't display correctly, press '!'

     /home/deployer/myapp/current (staging)
 ‣   /home/deployer/myapp_2/current (staging)
     Cancel

Restarting /home/deployer/myapp_2/current (staging) 
```

# asp.net - 不同SQL服务器中的动态存储过程？

> ID：15368493
> 
> 赞同：1
> 
> 时间：2013-03-12T17:51:00.770
> 
> 标签：asp.net, sql-server, sql-server-2008, tsql

我的客户想从应用程序中更改服务器，我的意思是从应用程序中输入新的 SQL 服务器名称并在 SQL 服务器数据库表中搜索关键字。我有存储生产者，它适用于一台 SQL 服务器。

如果客户端在应用程序级别更改 SQL 服务器名称，则应用程序中的我的连接字符串将不起作用。因为我使用的连接字符串中的数据库可用于一台服务器。

我该如何处理这种情况？. 反正有sp是动态的吗？磷

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:56:48.280

那么在一个服务器中，您可以创建一个指向另一台服务器的[同义词。](http://msdn.microsoft.com/en-us/library/ms177544%28v=sql.100%29.aspx)假设您有链接服务器，在`Server1`：

```
CREATE SYNONYM dbo.ProcedureName FOR Server2_Linked.DatabaseName.dbo.ProcedureName; 
```

现在，当应用程序调用`dbo.ProcedureName`时`Server1`，它不知道它实际上是在执行`Server2`。

如果这不是你想要的，我认为你必须在你的问题中详细说明一下。

# xml - SAX 解析器的奇怪行为

> ID：15368501
> 
> 赞同：1
> 
> 时间：2013-03-12T17:51:25.427
> 
> 标签：xml, sax, saxparser

我正在使用一些第三方 REST Web 服务。我正在做的是用 SAX 解析器解析它的响应。作为回应，我有一组`<section>`标签，每个标签都包含一个`<text>`标签和更多标签。该文本基本上是对产品的评论，因此用户可以在那里输入他喜欢的任何内容（或 ws-provider 网站上允许的内容）。`<text>`我在一个地方解析这个标签时遇到了问题。仅在一种情况下，只有 30 条评论的回复，它的行为很奇怪。

这是一段正在解析的xml

```
<text>Prachtige vormgeving. RVS/Zwart, zoals afbeelding hierbij. Even de handleiding doorlezen en daarna zeer handig in gebruik. Koffie is heerlijk. Heet water voor thee of zelfs kopje Nescafé. Cups zijn eur 0,31/0,33 per stuk. Via de site kan je een startersaanbieding met presentatiekist bestellen.&lt;br/&gt;Sommige onderdelen zijn natuurlijk heet, pas op met kinderhandjes. Kortom: zeer tevreden!!&lt;br/&gt; </text> 
```

我已经实现`org.xml.sax.helpers.DefaultHandler`了我做所有事情的地方。奇怪的是为什么我的 `public void characters(char[] ch, int start, int length)`方法为上面的 xml 调用了两次。我调试并发现第一次使用`char[] ch`包含文本调用它`"Prachtige vormgeving...."`，第二次使用空字符串调用它，导致真实文本被覆盖，因此我没有这些特定评论项目的评论文本。这是为什么？这是一个错误吗？

我做了一个额外的检查，如果我已经有了文本，那么下次忽略文本分配。所以它仍然可以正常工作。我还发现，当它第二次被调用时，qName 是一个空字符串，而第一次它是'TEXT'。（它在`public void startElement(String uri, String localName, String qName, Attributes attributes)`方法中）。我的 java 是 1.5_06，在 OC4J 10.1.3.5 上部署我的应用程序。

再次，问题是：这是一个错误吗？还是正常行为，我只是错过了一些有关 SAX 解析的知识？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:08:36.917

您应该累积在`characters`. 您描述的行为符合[SAX 规范](http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html#characters%28char%5B%5D,%20int,%20int%29)。由解析器决定何时以及如何调用该`characters`方法：

> Parser 将调用此方法来报告每个字符数据块。SAX 解析器可以在单个块中返回所有连续的字符数据，也可以将其拆分为多个块；但是，任何单个事件中的所有角色都必须来自同一个外部实体，以便定位器提供有用的信息。

这样的事情可能会有所帮助（**未选中**）：

```
class MyHandler extends DefaultHandler {
    StringBuilder chars = new StringBuilder();
    ...
    private void flushCharacters() {
        char [] data = chars.toString().toCharArray();
        // use data as you want or use just chars.toString()

        chars.delete(0, chars.length());
    }

    @Override
    public void characters(char [] data, int offset, int length) {
        chars.append(char, offset, length);
    }
    ...
    // call flushCharacters in 
    // startElement/endElement/processingInstruction and wherever you want
} 
```

# javascript - 我怎样才能建立一个多行选项？我需要构建一个多行选择控件。文本宽度超过 300 像素（例如）的所有 <option>都将具有不超过上述限制的必要行。这些图像不言自明：首先我尝试了这个，但不起作用。  <select><option>我很矮< ID：15368502 赞同：26 时间：2013-03-12T17:51:28.267 标签：javascript, jquery, html, css 回答 #1 赞同：9 时间：2013-03-12T17:54:42.980 <option>标签的样式功能有限，不支持格式化。 您可以使用基于JavaScript 的替代方案。如果你环顾四周，那里有很多。</option></select></option>

# angularjs - 在 Angular 中加载多个资源后执行代码

> ID：15368507
> 
> 赞同：0
> 
> 时间：2013-03-12T17:51:42.000
> 
> 标签：angularjs

在 Angular 中，在资源服务填充多个模型后触发代码的最佳实践是什么。嵌套 $scope.$watch？

现在，我正在作弊并检查数组中的值，这感觉不是很“有棱角”。

```
$scope.loaded = [];
$scope.modelA = aResource.query({}, function() {$scope.loaded.push('a')});
$scope.modelB = bResource.query({}, function() {$scope.loaded.push('b')});

$scope.$watch(loaded.length, function(newValue) {
    if ($scope.loaded.indexOf(modelA) != -1 && $scope.loaded.indexOf(modelB) != -1) {
        console.log('done!'); 
    } 
}); 
```

[https://groups.google.com/forum/?fromgroups=#!topic/angular/TizlifUL7FU](https://groups.google.com/forum/?fromgroups=#!topic/angular/TizlifUL7FU)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:20:41.073

如果你使用 Angular 路由，这通常是通过[when()](http://docs.angularjs.org/api/ng.$routeProvider#when)方法的`resolve`参数来完成的。另请参阅[延迟 AngularJS 路由更改直到模型加载以防止闪烁](https://stackoverflow.com/questions/11972026/delaying-angularjs-route-change-until-model-loaded-to-prevent-flicker)

如果您不想在数据加载之前延迟您的路线更改，您可以使用 $q 设置自己的 Promise。使用 $q.all() 等待所有承诺解决。请参阅[https://stackoverflow.com/a/15117739/215945](https://stackoverflow.com/a/15117739/215945)和[https://stackoverflow.com/a/14545803/215945](https://stackoverflow.com/a/14545803/215945)

# touch - CarouFredSel 插件使用 TouchSwipe 链接不起作用

> ID：15368514
> 
> 赞同：14
> 
> 时间：2013-03-12T17:52:11.833
> 
> 标签：touch, caroufredsel

我正在使用很棒的[CarouFredSel](http://caroufredsel.dev7studios.com/) JQuery carousel 插件，它还包括为手持设备集成[JQuery TouchSwipe](http://labs.skinkers.com/touchSwipe/)库的功能。

carousel 元素是 div，在 div 中是包含在`<ahref>`标签中的图像和文本。

一切正常，但我注意到如果轮播元素（在本例中为 div）包含链接，则各种移动设备上的滑动效果不起作用。

如果我删除图像/文本周围的链接，则滑动动作可以正常工作。这几乎就像`preventDefault()`是在反向工作。如果我删除图像周围的链接，并将文本保留为链接，则滑动适用于图像，而不是文本。

我可以轻松地单击该项目作为链接，如果它是链接，我就无法滑动。

有没有人特别遇到过 CarouFredsel 的这个问题？

非常感谢，所以。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-05-09T16:06:41.493

默认情况下，对元素禁用 Touchswipe。

见[http://labs.rampinteractive.co.uk/touchSwipe/demos/Excluded_children.html](http://labs.rampinteractive.co.uk/touchSwipe/demos/Excluded_children.html)

来自链接：默认情况下，$.fn.swipe.defaults.excludedElements 的值为“button, input, select, textarea, a, .noSwipe,” 要替换或清除列表，请重新设置 excludeElements 数组。要附加到它，请执行以下操作（不要忘记前面的逗号）...

```
excludedElements:$.fn.swipe.defaults.excludedElements+", #some_other_div" }); 
```

我最终只是更改了插件中的默认值，因为我所有的模态都是锚元素的子元素。

```
excludedElements:"button, input, select, textarea, .noSwipe" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-27T04:21:05.183

**带有< a >**的 carouFredSel不适用于“内部”滑动。您可以使用**excludeElements**，但在 Ipad 上，您必须按住手指才能使用 < a > (longTap)。这对用户不利。如果您尝试使用 carouFredSel({ swipe:( option { tap: function ... 它将不起作用（至少在我的情况下）。

我的解决方案是单独使用滑动（touchSwipe）：

```
$(".carusel").swipe({
  excludedElements: "button, input, select, textarea, .noSwipe",
  swipeLeft: function() {
    $('.carusel').trigger('next', 4);
  },
  swipeRight: function() {
    $('.carusel').trigger('prev', 4);
  },
  tap: function(event, target) {
    window.open($(target).closest('.carusel-cnt').find('carusel-cnt-link').attr('href'), '_self');
  }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T18:43:22.067

好吧，我真的很想知道在 TouchSwipe 和 CarouFredSel 插件中使用链接是否可行，但我找到了一种似乎可行的解决方法。

希望它会帮助某人。

我最终使用了第二个触摸 jquery 库[TouchWipe](http://www.netcu.de/jquery-touchwipe-iphone-ipad-library)。

当调用 CarouFredSel 插件时，我将 swipe 参数设置为 true：

```
$('#carousel-slider').carouFredSel({
        width: '100%',
        prev: '#prev-propslider',
        next: '#next-propslider',
        swipe: true
}); 
```

然后，同时调用 TouchSwipe 和 Touchwipe 库（不确定这是否重要，但我将常规的 TouchSwipe`swipe:true`参数用于另一个没有链接的滑块），我编写了一个单独的函数来调用 TouchWipe 插件的自定义事件：

```
$('#carousel-slider').touchwipe({
        wipeLeft: function() {
            $('#carousel-slider').trigger('next', 1);
        },
        wipeRight: function() {
            $('#carousel-slider').trigger('prev', 1);
        }
}); 
```

希望这对某人有所帮助，但我真的很想知道 TouchSwipe 和 CarouFredSel 是否可以使用`<a href>`标签，因为我找不到任何实时工作示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-06T15:57:41.560

感谢排除元素的解决方案，这也解决了我的问题。从来没想过。

但是你不必单独使用touchwipe插件，caroufredsel插件中有“swipe.options”作为touchswipe的配置选项。查看[caroufredsel 选项](http://caroufredsel.dev7studios.com/configuration.php)

我想你可以在那里使用[touchswipe 插件的所有选项](http://labs.rampinteractive.co.uk/touchSwipe/docs/symbols/%24.fn.swipe.defaults.html)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-08T07:24:58.120

您可以使用以下功能在滑动后启用点击。

```
`$('.class').swipe({
  swipe: function(event, direction, distance, duration, fingerCount) {},
  click: function(event, target) {
    $(target).click();
  },
  threshold: 75
});` 
```

[https://stackoverflow.com/a/11919170/3223427](https://stackoverflow.com/a/11919170/3223427)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T12:07:36.927

Caroufredsel 已经集成并与 touchswipe 兼容。

1.  添加 tochswipe js 库
2.  在 caroufresel 配置中添加触摸事件

## JAVASCRIPT 结果

```
 $(document).ready(function () {
     $('#foo2').carouFredSel({
         auto: false,
         responsive: false,
         items: {
             visible: 3,
             width: 100
         },
         width: 600,
         prev: '#prev2',
         next: '#next2',
         pagination: "#pager2",
         swipe: {
             onMouse: true,
             onTouch: true
         }
     });
 }); 
```

## [这是一个工作演示](http://jsfiddle.net/ignaciocorreia/5zNMG/)

# c# - RouteTester 路由中的可选参数问题

> ID：15368515
> 
> 赞同：1
> 
> 时间：2013-03-12T17:52:12.377
> 
> 标签：c#, unit-testing, asp.net-web-api, asp.net-web-api-routing

我有一个带有路由的 MVC4 WebApi 项目，该项目与路由中的可选“id”参数一起正常工作：

```
 routes.Add(new ApiRouteInfo
        {
            Name = this.AreaName.ToLower() + "_readingsplans",
            RouteTemplate = baseUrl + "/plans/readingalerts/{id}",
            Defaults = new
            {
                area = this.AreaName.ToLower(),
                controller = "ReadingAlerts",
                id = RouteParameter.Optional
            }
        }); 
```

当发出实际请求时，路由会在控制器方法中点击 GetAll 或 Get 方法：

```
 public HttpResponseMessage GetAll(BaseQueryFilter filter)
    public HttpResponseMessage Get(int id) 
```

但是在单元测试中，RouteTester 对象总是命中 Get 方法，而不是 GetAll。

作品：

```
 Assert.AreEqual(ReflectionHelper.GetMethodName((ReadingAlertsController p) => p.Get(It.IsAny<int>())), routeTester.GetActionName()); 
```

失败：

```
 Assert.AreEqual(ReflectionHelper.GetMethodName((ReadingAlertsController p) => p.GetAll(null)), routeTester.GetActionName()); 
```

我试过传入一个实际的过滤器对象而不是 null 但这根本不会改变结果。

我知道我可以通过创建两条不同的路由来修复它，但我有点不情愿，因为当前路由确实适用于除单元测试之外的所有内容。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:00:28.250

你看过[这个](http://www.peterprovost.org/blog/2012/06/16/unit-testing-asp-dot-net-web-api)吗？它解释了很多关于单元测试 web api 的内容，它可能对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:57:23.763

我找到了一个[stackoverflow 线程](https://stackoverflow.com/questions/11851558/testing-route-configuration-in-asp-net-webapi#answer-14370617)，它描述了如何测试路由。我正在使用我在网上找到的类似的东西，但我愿意尝试。

这是另[一篇](http://www.strathweb.com/2012/08/testing-routes-in-asp-net-web-api/)具有类似实现的文章。这就是我正在使用的并且有类似的问题。

**- 更新 -**

我相信我找到了解决问题的方法。使用上面提到的文章，我将“GetActionDescriptor()”函数替换为以下内容：

```
private HttpActionDescriptor GetActionDescriptor()
    {
        if (controllerContext.ControllerDescriptor == null)
            GetControllerType();

        var actionSelector = new ApiControllerActionSelector();
        var results = actionSelector.GetActionMapping(controllerContext.ControllerDescriptor);
        try
        {
            return actionSelector.SelectAction(controllerContext);
        }
        catch 
        {
            var subActions = results[request.RequestUri.Segments.Last()];
            var action = subActions.FirstOrDefault(a => a.SupportedHttpMethods.First(m => m.Method == request.Method.Method) != null);
            return action;  
        }
    } 
```

# drools - Drools 事件到期问题

> ID：15368518
> 
> 赞同：3
> 
> 时间：2013-03-12T17:52:20.910
> 
> 标签：drools, drools-fusion

我们目前正在使用 drools 5.1 版本。我们希望在某个时间后过期事件。我们正在尝试以下方法。

```
declare Abc
    @role( event )
    @expires( 300s )
end 
```

我们在规则中使用了累积函数。并观察到实例没有从工作内存中收回（过期）。我总是得到相同的事实计数。

是否有任何指针可以在某个时间后使事件过期。

我们已经尝试了 5.3 并观察到在 CEP 和具有累积功能的规则的情况下到期未按预期工作。

请提供解决问题的指示。

# entity-framework - 如何正确设计与一个共同点相关的几个不同实体（一对多）的关系？

> ID：15368524
> 
> 赞同：0
> 
> 时间：2013-03-12T17:52:32.453
> 
> 标签：entity-framework, database-design

我有几个相互关联的实体（只是一个示例）：

```
------User----------
->(One) Type
->(One) Company
-   Name

------Type----------
->(Many) User
-   Name

------Job------------
->(Many) User
->(Many) Type
-   Name

------Company-----
->(Many) Users
->(Many) Job
-   Name

(Name it's just a text.) 
```

我想为每一行实体有许多名称（别名）并将其存储在另一个表中。我创建了新的实体名称并接下来配置 EF：

```
modelBuilder.Entity<User>().HasMany(e => et.Names);
modelBuilder.Entity<Type>().HasMany(e => et.Names);
modelBuilder.Entity<Job>().HasMany(e => et.Names);
modelBuilder.Entity<Company>().HasMany(e => et.Names); 
```

它创建了一个看起来像这样的表：

```
[Id],
[Name],
[User_Id],
[Type_Id],
[Job_Id],
[Company_Id] 
```

（我可以如何避免许多 _Ids 吗？）

当我尝试设置级联删除时，它会抛出异常“。可能导致循环或多个级联路径”。

```
 modelBuilder.Entity<User>()
                .HasMany(pt => pt.Names)
                .WithOptional()
                .WillCascadeOnDelete(true); 
```

使用实体框架执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:58:50.463

更好的解决方案可能是为每个需要多个名称的实体设置一个不同的“名称”实体。这将在数​​据库级别产生真正的一对多映射，但每个映射都需要一个单独的表。它还应该防止级联问题。

# nhibernate - 映射 ReferencesAny 的反面？

> ID：15368531
> 
> 赞同：0
> 
> 时间：2013-03-12T17:53:06.877
> 
> 标签：nhibernate, fluent-nhibernate

我有两个实体类（具有通用接口，便于自动映射），其中一个具有对另一个的通用引用：

```
public interface IModelClass
{
  Guid Id { get; set; }
}

class Order : IModelClass
{
  public virtual Guid Id { get; set; }
  public virtual ISet<Attachment> Attachments { get; set; }
}

class Attachment : IModelClass
{
  public virtual Guid Id { get; set; }
  public virtual IModelClass AttachedTo { get; set; }
} 
```

我可以定义通用参考`ReferencesAny`：

```
mapping.ReferencesAny(x => x.AttachedTo)
       .EntityTypeColumn("entity_type")
       .EntityIdentifierColumn("entity_id")
       .IdentityType<Guid>()
       .MetaType<string>()
       .AddMetaValue<Order>("ORDER")
       .Cascade.None(); 
```

这很好用，只要我只直接使用附件并且不要尝试从`Order`侧面做事。不过，我想要的是映射关系的反向 - 即通常由以下方式处理的内容：

```
mapping.HasMany(x => x.Attachments) 
```

这样我就可以将附件添加到订单的集合中并让它们持久化，而无需手动完成并设置/保存每个附件（而且我必须开始传递会话以获取提交的附件同一笔交易）。这不起作用 - 它只是正常工作并`order_id`在附件表上创建一个列。

有什么方法可以设置此映射以使其“有效”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:46:34.633

```
mapping.HasMany(x => x.Attachments)
    .KeyColumn("entity_id")   // to give it the right column to use
    .Where("entity_type = 'ORDER'")  // makes sure that only attachments for the order are loaded
    .Inverse()
    .Cascade.AllDeleteOrphan(); // or .Cascade.All(); if Attachments should stay without 
```

# jquery - 如何让其他元素滑动而不是跳出滑入元素的方式？

> ID：15368532
> 
> 赞同：0
> 
> 时间：2013-03-12T17:53:11.407
> 
> 标签：jquery

我的网络应用程序顶部有一个小图标工具栏。其中一个在单击时会滑出水平滑块以控制图像亮度。但是它右侧的其他图标会跳出来为滑入视野的滑块腾出空间，然后在滑回视线之外时再跳回来。

如何让其他图标随之滑动以腾出空间，而不是跳跃？

```
 $('#contrastSlider').slider();
    $('#contrast').click(function() {
        $('#contrastSlider').toggle("slide", 300);
    }); 
```

（图标都是 div，float:left'ed。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:03:54.350

尝试使用动画：

```
$('#contrast').click(function() {
    $('#contrastSlider').animate({left: $('heredivid').width()}, 300);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:08:45.210

您是否考虑过用 a`class`而不是a 来定义它们`id`？

例如：

```
<div class ="slider">stuff</div>
<div class ="slider">more stuff</div> 
```

ETC...

当您单击其中一个 div 时，您的滑块可以通过以下方式调用：

```
$('.slider').toggle("slide", 300); 
```

# asp.net - 使用 Visual Studio 链接表中的外键

> ID：15368542
> 
> 赞同：0
> 
> 时间：2013-03-12T17:54:01.180
> 
> 标签：asp.net, visual-studio, database-design, visual-studio-2012

我正在尝试使用下面的补丁表创建一个显示补丁数据库的简单页面，这些是我当前的表

```
 Software: Id(PK), name, description

 OperatingSystem: ID(PK), name, description

 Patch: ID(PK) Software_ID(FK), OperatingSystem_ID(FK), Version, Notes 
```

我的补丁表在运行时显示，但是我希望补丁表显示软件名称和操作系统名称，而不是软件 ID 和操作系统 ID，这样数据在显示时才有意义。我假设我必须以某种方式将它们链接为外键？

我正在使用视觉工作室 2012

到目前为止我做了什么

*   使用 SQL 数据源插入我的数据库的空白 aspx 页面
*   在服务器资源管理器中创建了我的表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:14:23.237

您需要使用**`JOIN`**3 个表从所有这些表中获取数据。以下查询将为您提供包含软件名称和操作系统名称的数据。

```
SELECT P.ID as PatchID,S.Name as SoftwareName,O.Name as OperatingSystem,
P.Version,P.Notes From Patch P
INNER JOIN 
Software S ON P.Software_ID=S.ID
INNER JOIN
OperatingSystem O ON P.OperatingSystem_ID=O.ID 
```

现在您应该编写代码来执行此查询并使用数据阅读器读取结果并在页面中显示来自该查询的数据。您可以使用诸如Repeater/DataList 之类的网格控件。互联网上有很多例子如何做到这一点。只需搜索并尝试自己。祝你好运。

# javascript - Ti.App.fireEvent - 引用错误 Ti 未定义

> ID：15368543
> 
> 赞同：0
> 
> 时间：2013-03-12T17:54:04.557
> 
> 标签：javascript, titanium, appcelerator, titanium-mobile, appcelerator-mobile

我有这个简单的 Titanium js 脚本。

应用程序.js

```
var win = Ti.UI.createWindow();
    var webview = Ti.UI.createWebView({
        url: 'logging.html'
    });
    webview.addEventListener('help',function(){
        alert('help');
    });
    win.add(webview);
    win.open(); 
```

记录.html

```
<html>
    <body>
        <a onclick="Ti.App.fireEvent('help')">Help</a>
    </body>
</html> 
```

当我单击“帮助”链接时，控制台会给我`Reference Error: Ti is not defined`.

我也尝试用 Titanium 更改 Ti，但同样的错误。

- - - - - - - 编辑 - - - - -

此错误仅与 Web 浏览器有关。iOS完美运行。但

## 当钛工作室为网络移动编译项目时，我可以看到钛.js 和 TI/* 文件夹，所以我猜它无法加载 Ti 对象。谁能解释我为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:50:45.283

我找到了解决办法！

只需将下面的简单脚本添加到您的所有 html 页面

```
var Ti = window.parent.Ti 
```

玩得开心！

**编辑**：

**从 sdk 版本 3.0.2GA 开始，我猜他们修复了它。现在它在没有那个 hack 的情况下调用 Ti sdk！****

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:05:53.090

首先，改变：

```
webview.addEventListener('help',function(){
    alert('help');
}); 
```

至：

```
Ti.App.addEventListener('help',function(){
    alert('help');
}); 
```

第二：在您的 HTML 文件中调用“Ti.App.fireEvent()”而不使用最后的“s”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T22:11:09.143

经过一些测试，我发现之前的代码在 iOS 物理设备/模拟器和 Android 上运行良好。

它不在 android 网络浏览器模拟器和普通移动浏览器上（Firefox 作为移动网络应用程序）

所以，Titanium api 调用似乎永远不会在 Web 浏览器上运行，因为“普通的 javascript 库没有`Titanium.*`或`Ti.*`”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-18T13:59:21.103

我用了这个，它奏效了

```
window.parent.TiApp.fireEvent 
```

# php - uasort 在执行任何“用户定义”功能之前更改数组顺序

> ID：15368549
> 
> 赞同：0
> 
> 时间：2013-03-12T17:54:37.657
> 
> 标签：php

首先，如果标题不是很清楚，对不起。

基本上，我有一个包含 2 个数组的数组，这些数组通过使用 uasort 的脚本。因为对于这个特定的数组，我没有想要的行为，所以我尝试使用尽可能简单的代码来重现我的“错误”：

```
<?php 
$myArray = array(
                 0 => array(
                      0 =>  array(  'field1' => "2.1",
                                    'filed2' => 1815199),
                      1 =>  "database.table",
                      2 =>  array(),
                      3 =>  NULL
                ),
                1 => array(
                      0 =>  array(  'field1' => "3.7",
                                    'filed2' => 1815199),
                      1 =>  "database.table",
                      2 =>  array(),
                      3 =>  NULL
                )
);

echo '@@~~}}~~@@  ';
var_dump( $myArray);

uasort( $myArray, "order_del_upd_ins" );

echo '@@~~{{~~@@  ';
var_dump( $myArray);

function order_del_upd_ins( $a, $b )
{
    echo '~~@@~~@@##@@~~@@~~ ';
    var_dump( $a);
    var_dump( $b);

   return 0;
}?> 
```

所以基本上我的第一个数组包含值 2.1，第二个数组包含 3.7。

但是当我打印它们时，在通过 uasort （我什么都不做）之后，我的第二个数组首先获得，然后是第一秒：

```
@@~~}}~~@@  
array(2) {
[0] => array(4) {
      [0] =>
         array(2) {
           'field1' => string(3) "2.1"
           'filed2' => int(1815199)
        }
      [1] => string(14) "database.table"
      [2] => array(0) {}
      [3] => NULL
    }
[1] => array(4) {
     [0] => array(2) {
              'field1' => string(3) "3.7"
              'filed2' => int(1815199)
            }
     [1] => string(14) "database.table"
     [2] => array(0) {}
     [3] => NULL
    }
}

~~@@~~@@##@@~~@@~~ 
array(4) {
[0] =>
    array(2) {
       'field1' => string(3) "3.7"
       'filed2' => int(1815199)
    }
[1] => string(14) "database.table"
[2] => array(0) {}
[3] => NULL
}

array(4) {
[0] => array(2) {
    'field1' => string(3) "2.1"
    'filed2' => int(1815199)
    }
[1] => string(14) "database.table"
[2] => array(0) {}
[3] => NULL
}

@@~~{{~~@@  
array(2) {
[1] => array(4) {
       [0] =>
          array(2) {
            'field1' => string(3) "3.7"
            'filed2' => int(1815199)
         }
       [1] => string(14) "database.table"
       [2] => array(0) {}
       [3] => NULL
   }
[0] => array(4) {
       [0] =>
          array(2) {
            'field1' => string(3) "2.1"
            'filed2' => int(1815199)
          }
       [1] => string(14) "database.table"
       [2] => array(0) {}
       [3] => NULL
   }
} 
```

所以basiccaly，我有一个包含2个元素的数组，转到一个不做任何事情的函数uasort，但是一旦它进入，元素就不再正确排序。

根据php手册：

> uasort — 使用用户定义的比较函数对数组进行排序并保持索引关联

所以据我了解，如果我没有在我的“用户定义”函数中指定任何内容，那么我的数组中应该没有任何变化？

有谁知道发生了什么？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:22:05.880

用户定义的排序函数的返回将确定数组的排序方式。例如，以下将按升序排序...

```
function order_del_upd_ins( $a, $b )
{
   return $a > $b;
} 
```

你说“如果我没有在我的排序函数中指定任何东西”，但你确实指定了 0 ，这等于 $a 和 $b 相等。

在这里查看解释.. [http://www.php.net/manual/en/function.usort.php](http://www.php.net/manual/en/function.usort.php)

# html - DIV 中的元素开始新行

> ID：15368554
> 
> 赞同：5
> 
> 时间：2013-03-12T17:54:45.050
> 
> 标签：html, css

我在 HTML/CSS 问题上需要您的帮助：我正在创建一个非常简单的网页，其中有一个导航栏，该导航栏由包含五个“li”的“ul”组成。“ul”的宽度为 900px，位于“div”内。每个“li”是 900/5 = 180px 宽。尽管如此，这些元素还是创造了一条新线。

这就是**我所期望**的（或多或少）： ![在此处输入图像描述](../Images/95440934b50eab65120f0be4ff6d7d3f.png)

这是**我得到**的： ![在此处输入图像描述](../Images/7c51820cd40fb228ccd2087df8cbe95a.png)

这是**HTML**：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>My First Website</title>
<link rel="stylesheet" type="text/css" href="css/reset.css">
<link rel="stylesheet" type="text/css" href="css/princstyle.css">
</head>

<body>
<div id="container">
    <div id="fascia">
        <h1>My First Website</h1>
    </div>
    <hr class="menu">
    <div id="nav">
        <ul>
            <li><a href="img/a.jpg">About</a></li>
            <li><a href="img/b.jpg">Photo</a></li>
            <li><a href="img/c.jpg">News</a></li>
            <li><a href="img/d.jpg">Video</a></li>
            <li><a href="img/e.jpg">Contacts</a></li>
        </ul>
    </div>
    <hr class="menu">
</div>

</body>
</html> 
```

这是我的**第一个 CSS 文件**（一个重置的标准 CSS 文件）：

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
}
ol, ul {
    list-style: none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
} 
```

这是我**真正的 CSS 文件**：

```
@charset "utf-8";
/* CSS Document */

body 
{
    background-color:#363636;
    background-image:url(../img/noise.png);
    height:100%;
    width:100%;
    margin:0;
    padding:0;
}
#container
{
    position:relative;
    width:1000px;
    height:700px;
    margin:0 auto;
}

#fascia
{
    width:950px;
    padding:25px;
    font-size:4em;
    position:relative;

}

html
{
    height:100%;
}

h1,h2,h3,h4,h5,h6,p{
    color:#FFF;
    font-family:Arial,Helvetica,sans-serif;
    text-align:center;
}

hr.menu
{
    margin:0;
}

#nav
{
    width:100%;
    position:relative;
}

#nav ul 
{
    width:900px;
    margin:0 auto;
}

#nav ul li
{
    display:inline-block;
}

#nav ul li a
{
    display:block;
    width:180px;
    font-weight:bold;
    color:#FFF;
    text-transform:uppercase;
    text-align:center;
    text-decoration:none;
    padding:5px 0;
}

#nav ul li a:hover
{
    background-color:#C09;
} 
```

很抱歉这条消息的长度，感谢您的任何回答！

**编辑：**这里是[jsFiddle](http://jsfiddle.net/Yfs7r/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T17:57:33.040

内联的元素对它们在 HTML 中的结构很敏感 - 如果您注释掉`<li>`' 之间的空白或手动删除空白，菜单将按预期排列。

另一种选择是将 设置`font-size`为0，然后为's`<ul>`重新声明所需的字体大小。[这](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)是一篇内容丰富的文章，讨论了这个热门问题以及解决它的其他方法。`<li>`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-12T17:57:24.787

使用`float:left`代替`display:inline-block.`

```
#nav ul li
{
    display:inline-block;   <-- here
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T18:03:11.513

我会为每个导航项目`<li>`设置你想要的宽度，然后将你的设置`<a>`为`width:100%;`. 并且在导航列表上使用显示内联块时不要忘记空格。HTML 中的任何额外空格都可以在行内块元素周围添加一些额外的间距像素。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-12T18:07:26.910

而不是像其他人建议的那样使用浮动（有时很烦人，因为它们需要事后清除），您还可以删除菜单项之间的空格，如下所示：

```
<div id="nav">
    <ul>
        <li><a href="img/a.jpg">About</a></li><li><a href="img/b.jpg">Photo</a></li><li><a href="img/c.jpg">News</a></li><li><a href="img/d.jpg">Video</a></li><li><a href="img/e.jpg">Contacts</a></li>
    </ul>
</div> 
```

JSFiddle：http: [//jsfiddle.net/QNb2j/1/](http://jsfiddle.net/QNb2j/1/)

# php - 上传的 zip 文件的 Mime 类型是 application/octet

> ID：15368559
> 
> 赞同：3
> 
> 时间：2013-03-12T17:54:53.910
> 
> 标签：php, upload, mime-types

我有一个简单的文件上传，只允许 zip 文件。在我的机器（Windows 7、Firefox 19.0.2）上运行良好。在另一台机器（Windows 8、Firefox 19.0.2）上，当我上传相同的文件时，文件类型检查失败。

在 Windows 8 机器上，.zip 的 mime 类型是`application/octet`. 为什么？另外，我以前没有遇到过这种哑剧类型。我期待着`application/octet-stream`。

用于什么`application/octet`以及为什么在另一台机器上有所不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:18:09.783

没听说过`application/octet`。猜测它只是等同于`application/octet-stream`. 无论如何，这只是一个问题。

也许看看这个：http: [//msdn.microsoft.com/en-us/library/ms775147%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms775147%28v=vs.85%29.aspx)

> MIME 类型“text/plain”和“application/octet-stream”被称为模棱两可，因为它们通常不提供明确指示应将哪个应用程序或 CLSID 关联为内容处理程序......
> 
> ...并**默认为“application/octet-stream”的最终确定的 MIME 类型。**其他类型的文件（例如 .reg 文件）的行为类似。
> 
> 最后，如果没有找到文件扩展名，或者没有找到关联的 MIME 类型或注册的应用程序，则如果数据扫描主要指示文本，则返回 MIME 类型“text/plain”，如果显示主要是文本，则返回“application/octet-stream”数据扫描显示二进制，因为这是可以做出的最正确的确定。

# php - 表单验证失败后如何在codeigniter中重新填充下拉列表？

> ID：15368561
> 
> 赞同：2
> 
> 时间：2013-03-12T17:54:58.440
> 
> 标签：php, codeigniter

```
<select style="width:25%;" name='state' <?php if(form_error('state') != '') {  echo 'id=error'; } ?>>
<option value=''>State</option>
 <?php  foreach($states->result() as $row)
 {
 echo "<option value='$row->state_name'>". $row->state_name."</option>";
 }  ?>
</select> 
```

嗨，我在上面的代码中遇到了问题，请帮助我，set_value 对我不起作用，表单验证失败后下拉列表不填充，提前谢谢或

做这样的事情，这里的目标是隐藏的价值。现在如何将目标值设置为下拉值（选项值）

```
 <script>
    window.onload = function (){
    target=document.getElementById('target').value;
        if(target.length!=''){
   // document.getElementByName('state').value=target;
        }
    }
    </script> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T01:36:20.550

根据手册：

```
<select name="myselect">
        <option value="one" <?php echo  set_select('myselect', 'one', TRUE); ?> >One</option>
        <option value="two" <?php echo  set_select('myselect', 'two'); ?> >Two</option>
        <option value="three" <?php echo  set_select('myselect', 'three'); ?> >Three</option>
</select> 
```

### 在你的情况下

```
<select style="width:25%;" name='state' <?php if(form_error('state') != '') {  echo 'id=error'; } ?>>
<option value=''>State</option>
 <?php  foreach($states->result() as $row)
 {
 echo "<option value='$row->state_name' " . set_select('state', $row->state_name) . " >". $row->state_name."</option>";
 }  ?>

</select> 
```

[更新]

```
<select style="width:25%;" name='state' <?php if(form_error('state') != '') {  echo 'id=error'; } ?>>
    <option value=''>State</option>
     <?php  
$defaultvalue = 'Nigeria'; //Please set default value here when nothing is selected before submit - change Nigeria
foreach($states->result() as $row)
     {
     echo "<option value='$row->state_name' " . set_select('state', $row->state_name, ((!isset(set_select('state', $row->state_name)) &&  ($row->state_name == $defaultvalue) ) ? TRUE : FALSE )) . " >". $row->state_name."</option>";
     }  ?>

</select> 
```

如果您不想设置默认值，只需从 set_select 中删除 TRUE

如果您使用菜单，此功能允许您显示已选择的菜单项。第一个参数必须包含选择菜单的名称，第二个参数必须包含每个项目的值，第三个（可选）参数允许您将项目设置为默认值（使用布尔值 TRUE/FALSE）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T03:48:02.127

如果您使用表单助手功能，您可以执行以下操作。

`form_dropdown('name', $options, set_value('name', 'default'))`

`set_value`如果上次提交了带有“名称”的帖子，将选择选项值。如果没有，它将使用“默认”值设置它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-08T15:37:39.733

为什么不只使用 post 值？

```
echo form_dropdown('name', $options, $this->input->post('name')); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-07T16:07:49.280

在这里，我们有一个更好的方法来在 Codeigniter 中运行 FALSE 表单验证后填充选择值。这是代码片段。

以下是我的控制器。

```
function index() {
    $this->load->view('welcome_message');
}

function form_validation() {
    $this->load->library('form_validation');
    $this->form_validation->set_rules('name', 'Name', 'trim|required');
    $this->form_validation->set_rules('gender', 'Gender', 'trim|callback_check_if_gender_selected');

    if ($this->form_validation->run() == FALSE) {
        $this->index();
    } else {
        $this->load->view('validation_passed');
    }
}

function check_if_gender_selected($value) {
    if ($value == "0") {
        $this->form_validation->set_message('check_if_gender_selected', 'Please Select Gender');
        return FALSE;
    } else {
        return TRUE;
    }
} 
```

我的观点

1.  表单视图 -（注意：我尝试粘贴我的代码，但粘贴时出现问题，所以我在这里证明我的代码的图片。单击图像以更好地查看代码。）

[![表单查看代码](../Images/4293eb45732fe523c0af104320dcfbd5.png)](https://i.stack.imgur.com/9zc2b.png)

验证通过视图

```
Welcome Validation Passed.

<?php echo "<br />" . "Name Value = " . set_value('name') . "<br />"; ?>
<?php echo "Gender Value = " . set_value('gender'); ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T23:38:18.297

您应该使用[set_select()](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html)，而不是`set_value()`. 除非您的表单验证根本没有触发..

```
<select style="width:25%;" name='state' <?php if(form_error('state') != '') {  echo 'id=error'; } ?>>
<option value=''>State</option>
 <?php  foreach($states->result() as $row)
 {
 echo '<option value="$row->state_name" ' . set_select('state', $row->state_name) . '>'. $row->state_name."</option>";
 }  ?>
</select> 
```

让我知道这是否仍然不起作用，这可能与表单验证未触发有关（除非`id="error"`正在显示）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T10:14:53.917

```
 <select style="width:25%;" name='state' <?php if(form_error('state') != '') {  echo 'id=error'; } ?>>
    <option value=''>State</option>
     <?php  foreach($states->result() as $row)
     {
     echo "<option value='$row->state_name' " . set_select('state', $row->state_name) . " >". $row->state_name."</option>";
     }  ?>

    </select> 
```

这对我有用。感谢@jornsen 的回答。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-12T17:59:24.870

```
 <option value="<?= $row->state_name ?>" ><?= $row->state_name ?></option> 
```

# angularjs - 更新最初通过 JSONP 加载的 Angular

> ID：15368565
> 
> 赞同：2
> 
> 时间：2013-03-12T17:55:11.513
> 
> 标签：angularjs, jsonp, angular-resource

我有一个返回 JSONP 有效负载的资源：

```
app.factory('JsonService', function($resource) {
    return $resource('//123.456.7.890\\:8888/user/:id/:model',
    {'page': ':page', 'limit' : ':limit', 'jsonp_callback' : 'JSON_CALLBACK'}, 
    {})
}); 
```

我的控制器调用它：

```
app.controller("followersCtrl", function ($scope, $dialog, JsonService) {
  ...
  $scope.user_id = $.globals.authed_user_id;
  $scope.model = "followers"
  $scope.loadJSONP = function (getPage) {
      JsonService.get({
          id: $scope.user_id,
          page: getPage,
          limit: $scope.pagination_limit,
          model: $scope.model
      },

      function (data) {
          $scope.followers = data;
          $scope.noOfPages = data.page_count;
          $scope.currentPage = data.page;
      });
  };
  $scope.loadJSONP(1);
  $scope.pageChanged = function (page) {
      $scope.callbackPage = page;
      $scope.loadJSONP(page);
  };
}); 
```

然后我循环返回/存储在的数据`$scope.followers`：

```
<div ng-controller="followersCtrl">
    ...
    // Code related to the modal omitted
    ...

<div ng-repeat="user in followers.data">
         <img class="img img-polaroid" ng-src="{{user.image_url}}"/>
     <p>{{ user.username }}</p>
         <button class="btn btn-disabled" ng-show="user.is_mutual">
          You Are following this user
         </button>
         <button class="btn btn-primary" ng-show="!user.is_mutual">
          You Aren\'t following
         </button>
     <p>{{user.total_followers}}</p>

</div>
    ...
    // Code related to the modal omitted
    ...
</div> 
```

这一切都按预期工作，但对于我的生活，我**无法**弄清楚如何让“你没有关注”按钮更改`{{post.total_followers}}`点击时相应表达式中反映的值。理想情况下，我想执行 a`PUT`来实际执行后续操作，但我决定从小处着手，只更新值，但无济于事。

任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:46:03.903

ng-click 是您要查找的内容吗？

HTML：

```
<button class="btn btn-primary" ng-show="!user.is_mutual" ng-click="follow(user)">
  You Aren\'t following
</button> 
```

JS：

```
app.controller("followersCtrl", 
  function ($scope, $dialog, JsonService) {
    $scope.follow = function(user){
      // code for posting to server-side follow action
      // and updating the total_followers
      // $scope.user.total_followers++; // this should be ideally incremented on success callback
    }
  }
); 
```

# python - python包中的常量

> ID：15368566
> 
> 赞同：2
> 
> 时间：2013-03-12T17:55:17.547
> 
> 标签：python, module, constants

我正在编写一个 python 包，想知道放置常量的最佳位置在哪里？

我知道你可以在包中创建一个名为“constants.py”的文件，然后用 module.constants.const 调用它们，但不应该有办法将常量与整个模块相关联吗？例如，您可以调用 numpy.pi，我该怎么做呢？

此外，模块中的哪个位置是放置我想要读取/写入文件的模块外部目录的路径的最佳位置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T20:58:37.973

将它们放在您认为最容易维护的地方。通常这意味着在逻辑上常量所属的模块中。

您始终可以将常量导入`__init__.py`包的文件中，以便他人更容易找到它们。如果您确实决定了一个`constants`模块，我会添加一个`__all__`序列来说明哪些值是公开的，然后在`__init__.py`文件中执行：

```
from constants import * 
```

在包级别提供相同的名称。

# c++ - 解释 DrMemory 日志，内存泄漏

> ID：15368567
> 
> 赞同：-2
> 
> 时间：2013-03-12T17:55:21.350
> 
> 标签：c++, windows, memory-leaks, mingw, sdl

我使用 SDL api 编写了一个简单的蛇游戏，游戏中某处存在内存泄漏，因为在运行游戏大约 10 分钟后，它占用了超过 50mb 的内存并且它仍在扩展。我尽我所能找到泄漏，但我找不到它。我尝试使用 Dr Memory，但我无法完全理解它产生的日志。

这是有问题的日志： [https ://docs.google.com/file/d/0BwXrdShTcyjENmgyR2lrbTJ1aGc/edit?usp=sharing](https://docs.google.com/file/d/0BwXrdShTcyjENmgyR2lrbTJ1aGc/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:33:21.350

在您的 Dr. Memory 日志中，您可以看到您有 3 个错误，计数约为 2899 次。错误是：

```
Error # 154:   2899
Error # 155:   2899
Error # 369:   2898 
```

因此，如果您查看错误：

```
Error #154: GDI USAGE ERROR: same bitmap 0x46052c24 selected into two different DC's 0x08012c43 and 0xbe012c3e
# 0 SDL.dll!SDL_UnregisterApp      +0x3063   (0x681304c3 <SDL.dll+0x304c3>)
# 1 SDL.dll!SDL_UpdateRect         +0x69     (0x68125d7a <SDL.dll+0x25d7a>)
# 2 SDL.dll!SDL_Flip               +0x52     (0x68125ff3 <SDL.dll+0x25ff3>)
# 3 draw()                          [L:/git/snake/src/main.cpp:133]
# 4 SDL_main                        [L:/git/snake/src/main.cpp:92]
# 5 console_main                    [./src/main/win32/SDL_win32_main.c:315]
# 6 WinMain@16                      [./src/main/win32/SDL_win32_main.c:398]
# 7 main                            [L:/git/snake/src/main.cpp:211]
Note: @0:00:04.148 in thread 3940

Error #155: GDI USAGE ERROR: DC 0x08012c43 that contains selected object being deleted
# 0 system call NtGdiDeleteObjectApp
# 1 GDI32.dll!DeleteDC                            +0xb6     (0x75b1596a <GDI32.dll+0x1596a>)
# 2 GDI32.dll!DeleteDC                            +0x11     (0x75b158c5 <GDI32.dll+0x158c5>)
# 3 SDL.dll!SDL_UnregisterApp                     +0x30c9   (0x6813052a <SDL.dll+0x3052a>)
# 4 SDL.dll!SDL_UpdateRect                        +0x69     (0x68125d7a <SDL.dll+0x25d7a>)
# 5 SDL.dll!SDL_Flip                              +0x52     (0x68125ff3 <SDL.dll+0x25ff3>)
# 6 draw()                                         [L:/git/snake/src/main.cpp:133]
# 7 SDL_main                                       [L:/git/snake/src/main.cpp:92]
# 8 console_main                                   [./src/main/win32/SDL_win32_main.c:315]
# 9 WinMain@16                                     [./src/main/win32/SDL_win32_main.c:398]
#10 main                                           [L:/git/snake/src/main.cpp:211]
Note: @0:00:04.149 in thread 3940

Error #369: LEAK 60 direct bytes 0x04c09070-0x04c090ac + 0 indirect bytes
# 0 SDL.dll!SDL_CreateRGBSurface         +0x8a     (0x681250cb <SDL.dll+0x250cb>)
# 1 SDL_ttf.dll!TTF_RenderUNICODE_Solid  +0xa6     (0x6f4c2e87 <SDL_ttf.dll+0x2e87>)
# 2 SDL_ttf.dll!TTF_RenderText_Solid     +0x62     (0x6f4c3253 <SDL_ttf.dll+0x3253>)
# 3 draw()                                [L:/git/snake/src/main.cpp:130]
# 4 SDL_main                              [L:/git/snake/src/main.cpp:92]
# 5 console_main                          [./src/main/win32/SDL_win32_main.c:315]
# 6 WinMain@16                            [./src/main/win32/SDL_win32_main.c:398]
# 7 main                                  [L:/git/snake/src/main.cpp:211] 
```

您似乎在某个循环中分配了新内存，但忘记了释放。

对于标记为 LEAK 的错误 #369：调用后`TTF_RenderText_Solid()`，您需要调用`SDL_FreeSurface()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:10:09.660

内存泄漏是由错误的**动态分配**使用（或弄乱**指针**）引起的。我猜您还没有为小型蛇游戏使用任何自定义**动态分配**，所以我猜您弄乱了`SDL_Surface *`.

检查您使用的每个地方`SDL_Surface *`。是否使用任何涉及在主游戏循环中创建（分配）新**表面的代码？**

创建（分配）新**表面**的 SDL 函数通常`SDL_LoadBMP()`是`SDL_GetRGBSurface()`和`SDL_SetVideoMode()`。你在主游戏循环中使用它们中的任何一个吗？他们通常**不应该在那里**。

或者，也许您使用了任何动态分配？检查你所有的**指针**！

# r - 如何使用 unix 或 R 从位于不同列中的特定模式开始提取单元格

> ID：15368571
> 
> 赞同：0
> 
> 时间：2013-03-12T17:55:37.707
> 
> 标签：r, perl, unix

我是 unix 新手，正在努力学习基础知识。我有一个制表符分隔的文件。我想提取以“txGN=”模式开头的单元格，并将它们打印在相应行的新列中。这些单元格位于不同的列中。所有行的列数都不相同。这些值存在于大多数行中，但并非全部存在。

这是文件的外观：

```
chr1  880942  taPN=-1    taWT=3       txGN=SAMD11   txID=uc001abw   FUNC=nonsyn
chr1  894573  txDN=-3    txGN=NOC2L   txID=uc003    intronic
chr1  10626   txDN=-9    txID=uc2     txST=+ 
```

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:04:59.243

```
#count maximum number of columns in the "file"
maxcol <- max(count.fields("D:/file.txt")) 

x <- read.table("D:/file.txt",as.is=TRUE,fill=TRUE,col.names=1:maxcol)
x[x==""]<-NA
indices<-which(substr(as.matrix(x),start=1,stop=5)=="txGN=",arr.ind=TRUE)

x<-cbind(x,NA)
for(i in 1:nrow(indices)){
  na1<-which(is.na(x[indices[i,1],]))[1]
  x[indices[i,1],na1]<-x[indices[i,1],indices[i,2]] 
}
x
    X1     X2      X3         X4          X5            X6          X7          NA
1 chr1 880942 taPN=-1     taWT=3 txGN=SAMD11 txID=uc001abw FUNC=nonsyn txGN=SAMD11
2 chr1 894573 txDN=-3 txGN=NOC2L  txID=uc003      intronic  txGN=NOC2L        <NA>
3 chr1  10626 txDN=-9   txID=uc2      txST=+          <NA>        <NA>        <NA>

#If you want to "remove" NA's:
x[is.na(x)]<-"" 
```

编辑：

这是一个不在 R 中创建数据框的版本（为了减少内存需求），而是将结果附加到新文件中：

```
maxcol <- max(count.fields("D:/file.txt")) 
maxrow <- length(readLines("D:/file.txt")) 
# bit inefficient, we read the whole file to get the number of lines 

stepsize<-50 # how many lines are read at once
k<-0
while(TRUE){
  if((k+1)*stepsize > maxrow){
    x <- read.table("D:/file.txt",as.is=TRUE,fill=TRUE,col.names=1:maxcol,
                    skip=k*stepsize,nrow=maxrow-k*stepsize+1)
  } else  x <- read.table("D:/file.txt",as.is=TRUE,fill=TRUE,
                          col.names=1:maxcol, skip=k*stepsize,nrow=stepsize)

  if(nrow(x)==0) break #end loop when finished
  x[x==""]<-NA
  indices<-which(substr(as.matrix(x),start=1,stop=5)=="txGN=",arr.ind=TRUE)
  x<-cbind(x,NA)
  for(i in 1:nrow(indices)){
    na1<-which(is.na(x[indices[i,1],]))[1]
    x[indices[i,1],na1]<-x[indices[i,1],indices[i,2]] 
  }
  # New stuff, change sep and eol if needed
  write.table(x, file = "D:/filenew.txt", append = TRUE, quote = FALSE, 
          sep = " ", eol = "\n", na = "",row.names = FALSE, col.names = FALSE)
  k<-k+1
}

read.table("D:/filenew.txt",as.is=TRUE,fill=TRUE,col.names=1:(maxcol+1)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:47:23.803

取决于您所说的“unix”是什么意思，但如果这包括在基于 unix 的系统上常见的命令，那么简单的 Perl 脚本怎么样？将以下内容应用于您的文件

```
perl -ne 'print /txGN=([^\s]+)/ ? "$1\t$_" : "\t$_";' your-file 
```

要得到

```
SAMD11  chr1    880942  taPN=-1     taWT=3       txGN=SAMD11
NOC2L   chr1    894573  txDN=-655   txGN=NOC2L   txID=uc001aby.3
        chr1    1062638 txDN=-9758  txID=uc2     txST=+ 
```

稍作改写就可以将新专栏放在别处。

# jquery - 如何让 jQuery 的标题文本与图像对齐？

> ID：15368573
> 
> 赞同：0
> 
> 时间：2013-03-12T17:55:40.447
> 
> 标签：jquery, css, twitter-bootstrap, carousel

我遇到了[carousel](http://twitter.github.com/bootstrap/javascript.html#carousel)的问题。我想让标题与图像的宽度相同，但现在它被设置为与内部项目类相同的宽度。

我得到以下效果：

![在此处输入图像描述](../Images/cd032fbcc38668606222b568518f964a.png)

有没有办法设置标题，使其居中（并与图像对齐）？

我的标记是：

```
<div id="myCarousel" class="carousel slide">
  <!-- Carousel items -->
  <div class="carousel-inner">
    <div class="active item">
      <div class="inner-item">
        <img src="img/1.jpg">
      </div>
      <div class="carousel-caption">
        <p>Caption</p>
      </div>
    </div>
    <div class="item">
      <div class="inner-item">
        <img src="img/1.jpg">
      </div>
       <div class="carousel-caption">
        <p>Caption text here</p>
      </div>
    </div>
    <div class="item">
      <div class="inner-item">
        <img src="img/1.jpg">
      </div>
       <div class="carousel-caption">
        <p>Caption text here</p>
      </div>
    </div>
  </div>
  <!-- Carousel nav -->
  <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
  <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:02:52.003

如果我正确理解您的问题为什么您不使用`text-align:center;` 标题并将宽度更改为图像的宽度

```
.carousel-caption
{
    text-align:center;
    width:800px; 
    /*If you are having aligning problems and the position is absolute or relative use left:some_number px or margin if not absolute */ 

} 
```

我希望这可以帮助:)

# javascript - Javascript：尝试使用圆括号而不是方括号访问表单属性在 IE 中有效

> ID：15368574
> 
> 赞同：0
> 
> 时间：2013-03-12T17:55:41.270
> 
> 标签：javascript

我希望我能正确解释这一点......

以下网页包含一个带有 onSubmit 处理程序的表单。onSubmit 处理程序是一个始终返回的函数`false`，这意味着**永远不应该提交表单**。但这仅适用于 IE8（也可能适用于其他版本的 IE）。

要让它在 Firefox 和 Chrome 中工作，我必须将警报更改为：

```
alert(foo["firstName"].value); 
```

我理解为什么使用方括号是正确的形式，因为该形式是一个关联数组。

*   但是为什么在 FF 和 Chrome 中提交的表单（`form("firstName")`显然是错误的）？
*   我能捕捉到错误吗？（我在 Firebug 中看不到任何明显的东西。）
*   有没有办法确保表单仅在`true`返回时提交？

谢谢

```
<html>
<head>
<script>
function alwaysReturnFalse() {
    alert(foo("firstName").value);
    return false;
}
</script>
</head>
<body>
<form name="foo" onSubmit="return alwaysReturnFalse();">
    First name: <input name="firstName" type="text" value="Bob"/><br/>
    Last name: <input name="lastName" type="text"/><br/>
    <input type="submit" value="Submit"/>
</form>
This form has an onSubmit handler that always returns false - meaning the form should never submit.<br/>
It works in IE8 - e.g. the onSubmit handler executes an alert() and then returns false.<br/>
It fails in Firefox and Chrome - e.g. the form is submitted.
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:58:19.700

提交表单是因为其他浏览器抛出错误。该错误导致函数提前退出。结果，代码没有达到 return false 所以表单提交。

# wpf - 在 PropertyChangedCallback 之后访问自定义依赖属性的所有属性

> ID：15368576
> 
> 赞同：0
> 
> 时间：2013-03-12T17:55:49.480
> 
> 标签：wpf, binding, dependency-properties

我有一个这样定义的示例依赖属性：

```
public Polyline Shape
{
    get { return (Polyline)GetValue(ShapeProperty); }
    set { SetValue(ShapeProperty, value); }
}

public static readonly DependencyProperty ShapeProperty =
DependencyProperty.Register("Shape", typeof(Polyline), 
typeof(CustomControl), new FrameworkPropertyMetadata(null,
FrameworkPropertyMetadataOptions.AffectsRender, onShapeAdded)); 
```

我是这样设置的：

```
<local:CustomControl>
    <local:CustomControl.Shape>
        <Polyline Points="0,180 0,80 70,80 90,180 0,180" />
    </local:CustomControl.Shape>
</local:CustomControl> 
```

它的回调看起来像这样：

```
private static void onShapeAdded(DependencyObject d,
    DependencyPropertyChangedEventArgs e)
{
    Polyline control = (Polyline)e.NewValue;
    //control.Points is always null
} 
```

为什么在回调期间积分集合总是为空？（每个属性都会发生这种情况）最后点已设置，所以我想我太快访问我的控件，但是我应该何时以及如何访问设置了所有属性的控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:11:27.003

您的`onShapeAdded`方法实际上是`PropertyChangedCallback`when 的事件处理程序，这意味着它将在 Shape 属性更改时触发。`Polyline`在添加 和`Points`初始化属性之前，显然会触发此更改。

您可以尝试通过将 定义`Polyline`为资源来解决此问题，这意味着它将在添加到控件之前进行初始化。例如：

```
<Window.Resources>
    <Polyline x:Key="myPolyline" Points="0,180 0,80 70,80 90,180 0,180" />
</Window.Resources>

<local:CustomControl Shape="{DynamicResource myPolyline}"/> 
```

我相信`Polyline`如果以这种方式添加，它将被完全初始化。

# asp.net - asp.net mvc 4 将表连接到 SqlMembership 中的用户表

> ID：15368577
> 
> 赞同：1
> 
> 时间：2013-03-12T17:55:51.030
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-membership, membership-provider

我是 MVC 新手，我有一个名为的模型，`Person`其中包含以下字段： name 、family 、email 、UserID

我想在 SqlMembership 中的用户表和我的数据库（newsAgent.mdf）中的人表之间创建 1:1 关系-我想通过创建这种关系来扩展用户表，我使用的是数据库优先方法。所以我有 2 个问题：

1-生成的表在哪里属于SqlMembership？我怎样才能看到它们？

2-我怎样才能加入这 2 个表以建立 1:1 的关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:00:18.267

您的 web.config 中应该有一个连接字符串，用于标识成员资格数据库的位置。

该数据库中的 User 表是您可以找到“SqlMembership”(MembershipUser) 数据的地方。

如果您想将它们关联起来，您应该向您的 Person 实体添加一个属性，并从 Membership User 表中存储“ProviderUserKey”属性。

有关某些上下文，请参阅此 MSDN 文章：http: [//msdn.microsoft.com/en-us/library/system.web.security.membershipuser.provideruserkey.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.membershipuser.provideruserkey.aspx)

# c# - 我的代码应该直接调用我的视图模型还是我的服务？

> ID：15368578
> 
> 赞同：0
> 
> 时间：2013-03-12T17:55:51.107
> 
> 标签：c#, windows-phone-7, mvvm

我正在尝试将 MVVM 与我的 windows phone 7 应用程序一起使用。我对如何做到这一点有点困惑。

我有一个用于在 Web 浏览器中导航的代码隐藏事件。现在，此事件最终将调用一个方法，该方法将使用户使用 Google oAuth 登录。

现在调用 Google 登录方法的代码在我的服务层中。我不确定是否应该在我的 VM 中创建一个调用我的服务层的属性，或者我是否应该直接在我的代码隐藏页面中创建一个服务层对象并直接调用它。

最好的方法是什么？

**编辑**

这是我所做的

// 后面的代码

```
 private void wbGoogle_Navigating(object sender, NavigatingEventArgs e)
        {
            var queryParmas = e.Uri.ParseQueryString();

            var code = queryParmas.ToList().Where(x => x.Key == "code").FirstOrDefault();

            if (!code.Equals(new KeyValuePair<string, string>()))
            {
                loginVm.AuthenticateUser(code.Value, TestCallBack);
            }
        }

 private void TestCallBack(Authorization a)
        {
            var d = a;
            // maybe assign "a" to some property back in the VM.
        } 
```

// 虚拟机

```
public void AuthenticateUser(string code, Action<GoogleContacts.Model.Authorization> CallbackOnSuccess)
    {
        loginService.SendCode(code, CallbackOnSuccess);
    } 
```

//服务层

```
 public void SendCode(string code, Action<Authorization> CallbackOnSuccess)
        {
            var request = new RestRequest(TokenEndPoint, Method.POST);
            request.AddParameter("code", code);
            request.AddParameter("client_id", ClientId);
            request.AddParameter("client_secret", SecretKey);
            request.AddParameter("grant_type", GrantType);
            request.AddParameter("redirect_uri", RedirectUrl);

            client.ExecuteAsync<Authorization>(request, response =>
            {
                CallbackOnSuccess(response.Data);
            });

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:17:14.500

视图模型是您的视图模型——它是您所有逻辑工作实际完成的地方。View 的职责是向 UI 呈现信息并收集用户输入。视图执行的任何其他任务都开始与您的代码库紧密耦合，最终您将面临维护的噩梦。

要直接回答您的问题，您的视图（代码隐藏）应该将 UI 元素已被单击的事实传递给视图模型中的方法（命令绑定或其他机制）。

然后，您的 Veiw Model 决定下一步该做什么。它可能决定导航到特定网页的时间，此时它会向视图发出信号以移动到请求的页面。

ViewModel 和 View 通信的精确方法与您使用的框架有很大关系，以及您是“ViewModel First”还是“View First”那种人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:17:53.960

为了简单起见……视图模型是您的业务逻辑和应用程序的大脑。视图应该只处理数据的显示。我会考虑“大脑”的身份验证部分，并将其放在您的视图模型中的某个地方。您甚至可能会变得更复杂（取决于您的应用程序的需要）并将身份验证登录方法放在您的视图模型的基类中。这样，如果需要，可以通过任何页面访问登录调用。

将它放在您的代码后面只是将该代码与您的视图紧密耦合 - 使其不太可重用。如果你想要最好的架构，我会避免这种情况。可以将内容放在视图后面的代码中。

我强烈不同意 MVVM 存在以避免代码落后的评论。我使用的经验法则是：视图代码隐藏的目的是否仅支持视图/显示功能？（也许您需要编写代码来制作动画或更改数据模板 - 从而更改其显示）。逻辑背后的代码应该是特定于显示的。因此，根据这条规则，登录不是特定于显示的，也不应该是代码隐藏方法。

我的 2 美分

# java - 在 Java 中的 NEO4J 中按名称选择节点

> ID：15368579
> 
> 赞同：3
> 
> 时间：2013-03-12T17:55:54.003
> 
> 标签：java, neo4j, graph-databases

我在嵌入 Java 的 NEO4J 中工作。假设有一个名为 NODE_abc 的节点，它有一些属性。我想选择节点，以便我可以使用 getProperty() 获取属性。

我想选择 NODE_abc 作为 mynode，以便我可以使用 mynode.getProperty() 来获取节点“NODE_abc”的属性。

节点“NODE_abc”的名称存储在一个变量中，比如 String str="NODE_abc"

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T19:59:29.503

我同意 tstorms 关于索引和执行密码查询的观点。但是，我要指出，节点标识符是短暂的。它们在有限的时间范围内有用，但随后会被回收。因此，一个节点在多次执行（或垃圾收集器运行后）不一定具有相同的标识符。

通常，在 Neo4J 中，如果您需要通过属性（而不是通过遍历）查询节点，则创建索引。例如，您可以创建一个名为“actors”的索引：

```
IndexManager index = graphDb.index();
Index<Node> actors = index.forNodes( "actors" ); 
```

如果索引不存在，此命令将创建它。否则，它返回现有索引。

但是，与 SQL 不同的是，在 Neo4J 中，您必须手动将节点添加到索引中：

```
Node reeves = graphDb.createNode();
reeves.setProperty( "name", "Keanu Reeves" );
actors.add( reeves, "name", reeves.getProperty( "name" ) ); 
```

然后，您可以查询与指定查询匹配的*所有*节点的索引（索引不保证唯一性）：

```
IndexHits<Node> hits = actors.get( "name", "Keanu Reeves" );
Node reeves = hits.getSingle(); 
```

来源：[https ://neo4j.com/docs/java-reference/current/indexing/#indexing-create](https://neo4j.com/docs/java-reference/current/indexing/#indexing-create)

请注意，Neo4J 索引实际上并不从节点读取属性，您必须明确告诉它如何索引节点。您可以提供任意一条信息，用于索引未存储在节点上的信息，但我不建议这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T18:25:10.443

不确定您对名为“node_abc”的节点的含义。节点没有名称，但您可以通过 node.getId() 获取唯一的 id (=identifier)。所以我的猜测是你有一个带有 name 属性的节点。如果您在 name 属性上有索引，则可以通过索引（[索引搜索](http://docs.neo4j.org/chunked/milestone/indexing-search.html)）检索它。如果您有节点的标识符，您还可以通过 CYPHER 查询（[执行 cypher 查询](http://docs.neo4j.org/chunked/milestone/tutorials-cypher-java.html)）检索它。

# python - 事实上，在 OSX Mountain Lion 上安装了太多的 Python

> ID：15368582
> 
> 赞同：3
> 
> 时间：2013-03-12T17:55:56.787
> 
> 标签：python, mercurial, osx-mountain-lion, macports, easy-install

我有三个不同的 Python 2.7：

```
/Library/Frameworks/Python.framework/Versions/2.7/bin/python2.7
/opt/local/Library/Frameworks/Python.framework/Versions/2.7/bin/python2.7
/System/Library/Frameworks/Python.framework/Versions/2.7/bin/python2.7 
```

我使用了许多来自不同来源的软件包。我目前正在从 port (MacPorts)、**easy_install**、**pip**（由**easy_install**安装）和 Mercurial 安装软件包。还有一些我必须从图像安装或从源代码构建。我对这些有更多的控制权。

问题是 easy_install 和 pip 似乎安装到一个位置 ( `/Library/Frameworks/...`) 而 MacPorts 安装到另一个位置 ( `/opt/local/Library/Frameworks/...`)。

我现在最好的行动是什么？删除`/Library/Frameworks/.../python2.7`并移动 easy_install 和 pip 到 MacPorts 之一`/opt/local/...`？链接两个目录？将 MacPorts 安装移动到`/Library/Frameworks/...`?

我怎样才能巩固这些蟒蛇？我已经尝试将两个站点包位置都放在我的路径中，但是只有某些包仅适用于一个 Python 而不是另一个，反之亦然，我需要它们一次全部可用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T18:21:24.743

似乎您可以控制自己构建的东西。这就是我使用 pip 整合 macports 的方式：

我喜欢将*Macports*用于我所有的东西，所以我只是确保`pip`并`easy_install`构建到 macports 的 python 安装（在 中的那个`/opt/local/...`）。

您可以使用以下命令判断 pip 和 easy_install 将在何处安装：

```
readlink `which pip` 
```

（那些是反引号）

如果要将 pip 安装到 macports 目录，请使用 macports 安装 pip：

```
sudo port install py-pip 
```

然后，确保它`which pip`指向如下内容：

```
askewchan@rock:~$ which pip
/opt/local/bin/pip
askewchan@rock:~$ readlink `which pip`
/opt/local/Library/Frameworks/Python.framework/Versions/2.7/bin/pip-2.7 
```

从下面的评论（感谢@Jonathan 和@Ned）你可以做同样的事情，`easy_install`但它的端口被称为`py-distribute`：

```
sudo port install py-distribute 
```

但据我所知，你永远不需要使用`easy_install`，因为[任何可以`easy_install`编辑的东西都可以`pip`更好地编辑](https://stackoverflow.com/questions/3220404/why-use-pip-over-easy-install)。

注意端口说明：

```
askewchan@rock:Tracking {master *}$ port search *easy*install*
py-pip @1.2.1 (python, www)
    An easy_install replacement

askewchan@rock:Tracking {master *}$ port search py*distribute
py-distribute @0.6.35 (python, devel)
    Replacement for setuptools 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:41:30.593

虽然不是通用解决方案，但我使用 virtualenv 安装 Mercurial 和其他基于 Python 的应用程序。特别是， pip 和 easy_install 将仅安装到各自的虚拟环境中，不会弄乱任何系统文件夹。当然，缺点是我会复制一些包。优点是我有一个干净、自包含的环境，其中包含已知版本的 Python（对于 Mercurial 和其他关键任务应用程序而言，这对我来说更重要）。

另一个缺点是我需要将单个应用程序链接到我的个人 bin 目录或将虚拟环境的 bin 目录添加到我的路径中。（就我个人而言，我用一些简单的脚本来管理这个，这些脚本为我做符号链接。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T19:36:33.237

我建议为您的开发工作决定一个且只有一个 Python（就我个人而言，我使用 Python.org 的发行版）

*   你不能摆脱 /Library/Frameworks - 这是默认的 OSX 之一，你可能会破坏
*   在剩下的两个 Python 中，我假设一个是 Macports，另一个是 Python.org——你需要选择你想要的一个作为你的开发环境并坚持下去。

我**强烈**建议不要使用`pip`或`easy_install`从一个 Python 为另一个安装模块。原因是编译选项可能存在差异。让某些包在 OSX 上正确编译可能已经够难了——如果你开始针对不同的二进制文件（可能支持不同的架构）进行编译，你只会更加头疼。

我*个人*选择了以下路径：

1.  我使用 Python.org 包进行所有开发。
2.  在终端登录时，我运行 shell 脚本来优先考虑我的 Python 选择
3.  我所有的项目都有自己的 virtualenv ，我禁用了系统包
4.  当开始从事任何项目时，我倾向于有一个环境设置脚本。我只是输入`go_myproject.source`; 那`cd`是我到正确的目录并运行`source /path/to/virtualenv/bin/activate`以让我为该项目进行设置。

设置东西有一点点开销，但从那以后我一直在天堂。管理项目而不需要担心因一件事而杀死另一件事的依赖/升级是……幸福的。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-12T18:04:03.900

我建议将所有 python 安装移动到一个地方并创建符号链接。之后配置 python 环境以避免模块的导入和“可见性”问题。尝试使用命令：

```
# easy_install
env PYTHONPATH=/custom/path easy_install –install-dir /custom/path

#pip
pip install --install-option="--prefix=$PREFIX_PATH" package_name 
```

# php - Eclipse 给出异常 (org.eclipse.core.runtime.CoreException)

> ID：15368585
> 
> 赞同：1
> 
> 时间：2013-03-12T17:56:01.050
> 
> 标签：php, eclipse, macos, osx-mountain-lion, eclipse-juno

有时当我尝试启动 Eclipse 时，它​​会给我一个例外。我正在使用 Eclipse Juno，在这种情况下，在带有 OSX 10.8 的 Mac 上使用 PHP 插件

我试图删除一些最近安装的软件包，但仍然出现错误，奇怪的是并不总是给出这个异常。有时它只是有效，但大多数情况下并非如此

完整的堆栈跟踪如下所示。

```
org.eclipse.core.runtime.CoreException: Plug-in org.eclipse.php.ui was unable to load class org.eclipse.php.internal.ui.explorer.PHPExplorerPart.
at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.throwException(RegistryStrategyOSGI.java:194)
at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:176)
at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
at org.eclipse.ui.internal.registry.ViewDescriptor.createView(ViewDescriptor.java:62)
at org.eclipse.ui.internal.ViewReference.createPart(ViewReference.java:112)
at org.eclipse.ui.internal.e4.compatibility.CompatibilityPart.createPart(CompatibilityPart.java:249)
at org.eclipse.ui.internal.e4.compatibility.CompatibilityPart.create(CompatibilityPart.java:286)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:56)
at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:859)
at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:839)
at org.eclipse.e4.core.internal.di.InjectorImpl.inject(InjectorImpl.java:111)
at org.eclipse.e4.core.internal.di.InjectorImpl.internalMake(InjectorImpl.java:319)
at org.eclipse.e4.core.internal.di.InjectorImpl.make(InjectorImpl.java:240)
at org.eclipse.e4.core.contexts.ContextInjectionFactory.make(ContextInjectionFactory.java:161)
at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.createFromBundle(ReflectionContributionFactory.java:102)
at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.doCreate(ReflectionContributionFactory.java:71)
at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.create(ReflectionContributionFactory.java:53)
at org.eclipse.e4.ui.workbench.renderers.swt.ContributedPartRenderer.createWidget(ContributedPartRenderer.java:141)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createWidget(PartRenderingEngine.java:896)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:630)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$6.run(PartRenderingEngine.java:518)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:503)
at org.eclipse.e4.ui.workbench.renderers.swt.ElementReferenceRenderer.createWidget(ElementReferenceRenderer.java:74)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createWidget(PartRenderingEngine.java:896)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:630)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:732)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:703)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:697)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:682)
at org.eclipse.e4.ui.workbench.renderers.swt.StackRenderer.showTab(StackRenderer.java:1114)
at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer.postProcess(LazyStackRenderer.java:98)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:646)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:732)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:703)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:697)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:682)
at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:642)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:732)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:703)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:697)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:682)
at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
at org.eclipse.e4.ui.workbench.renderers.swt.PerspectiveRenderer.processContents(PerspectiveRenderer.java:59)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:642)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:732)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:703)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:697)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:682)
at org.eclipse.e4.ui.workbench.renderers.swt.PerspectiveStackRenderer.showTab(PerspectiveStackRenderer.java:103)
at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer.postProcess(LazyStackRenderer.java:98)
at org.eclipse.e4.ui.workbench.renderers.swt.PerspectiveStackRenderer.postProcess(PerspectiveStackRenderer.java:77)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:646)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:732)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:703)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:697)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:682)
at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:642)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:732)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:703)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:697)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:682)
at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
at org.eclipse.e4.ui.workbench.renderers.swt.WBWRenderer.processContents(WBWRenderer.java:639)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:642)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:732)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:703)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:697)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:682)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:968)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:923)
at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
at org.eclipse.equinox.launcher.Main.run(Main.java:1438)

 Caused by: org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter$TerminatingClassNotFoundException: An error occurred while automatically activating bundle org.eclipse.php.ui (859).
at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:122)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:469)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:464)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:340)
at org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:229)
at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1212)
at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:174)
... 103 more
Caused by: org.osgi.framework.BundleException: The activator org.eclipse.php.internal.ui.PHPUiPlugin for bundle org.eclipse.php.ui is invalid
at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:172)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:679)
at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:263)
at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
... 115 more
Caused by: java.lang.NoClassDefFoundError: org/eclipse/ui/editors/text/templates/ContributionTemplateStore
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.defineClass(DefaultClassLoader.java:188)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClassHoldingLock(ClasspathManager.java:632)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClass(ClasspathManager.java:607)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findClassImpl(ClasspathManager.java:568)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClassImpl(ClasspathManager.java:492)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:465)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:464)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at java.lang.Class.getDeclaredConstructors0(Native Method)
at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404)
at java.lang.Class.getConstructor0(Class.java:2714)
at java.lang.Class.newInstance0(Class.java:343)
at java.lang.Class.newInstance(Class.java:325)
at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:167)
... 121 more
Caused by: org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter$TerminatingClassNotFoundException: An error occurred while automatically activating bundle org.eclipse.ui.editors (644).
at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:122)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:469)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
at org.eclipse.osgi.internal.loader.SingleSourcePackage.loadClass(SingleSourcePackage.java:35)
at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:461)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.defineClass(DefaultClassLoader.java:188)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClassHoldingLock(ClasspathManager.java:632)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClass(ClasspathManager.java:607)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findClassImpl(ClasspathManager.java:568)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClassImpl(ClasspathManager.java:492)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:465)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:464)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at java.lang.Class.getDeclaredConstructors0(Native Method)
at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404)
at java.lang.Class.getConstructor0(Class.java:2714)
at java.lang.Class.newInstance0(Class.java:343)
at java.lang.Class.newInstance(Class.java:325)
at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:167)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:679)
at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:263)
at org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:236)
at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1212)
at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:174)
at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
at org.eclipse.wst.validation.Validator$V2.getValidator(Validator.java:1050)
at org.eclipse.wst.validation.Validator$V2.getDelegatedValidator(Validator.java:1007)
at org.eclipse.wst.validation.Validator$V2.validationStarting(Validator.java:1285)
at org.eclipse.wst.validation.internal.ValBuilderJob$4.visit(ValBuilderJob.java:172)
at org.eclipse.wst.validation.internal.ValManager.accept(ValManager.java:750)
at org.eclipse.wst.validation.internal.ValBuilderJob.run(ValBuilderJob.java:176)
at org.eclipse.wst.validation.internal.ValBuilderJob.runInWorkspace(ValBuilderJob.java:126)
at org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53)
Caused by: org.osgi.framework.BundleException: Exception in org.eclipse.ui.internal.editors.text.EditorsPlugin.start() of bundle org.eclipse.ui.editors.
at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:734)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:263)
at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
... 50 more
Caused by: org.eclipse.swt.SWTException: Invalid thread access
at org.eclipse.swt.SWT.error(SWT.java:4361)
at org.eclipse.swt.SWT.error(SWT.java:4276)
at org.eclipse.swt.SWT.error(SWT.java:4247)
at org.eclipse.swt.widgets.Display.error(Display.java:1068)
at org.eclipse.swt.widgets.Display.checkDevice(Display.java:621)
at org.eclipse.swt.widgets.Display.disposeExec(Display.java:1053)
at org.eclipse.jface.resource.ColorRegistry.hookDisplayDispose(ColorRegistry.java:268)
at org.eclipse.jface.resource.ColorRegistry.<init>(ColorRegistry.java:123)
at org.eclipse.jface.resource.ColorRegistry.<init>(ColorRegistry.java:106)
at org.eclipse.ui.internal.themes.WorkbenchThemeManager.<init>(WorkbenchThemeManager.java:98)
at org.eclipse.ui.internal.themes.WorkbenchThemeManager.getInstance(WorkbenchThemeManager.java:58)
at org.eclipse.ui.internal.Workbench.getThemeManager(Workbench.java:3016)
at org.eclipse.ui.internal.editors.text.EditorsPlugin.start(EditorsPlugin.java:214)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
at java.security.AccessController.doPrivileged(Native Method)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
... 56 more 
```

有人可以帮我解决这个问题吗？它变得很烦人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-30T18:39:09.510

以下顺序应该可以解决问题

1.  转到存储项目的位置（工作区）
2.  搜索**\.metadata\.plugins**文件夹
3.  删除任何***.dat**文件
4.  重新启动 Eclipse

# java - 向相反方向移动两个球

> ID：15368586
> 
> 赞同：0
> 
> 时间：2013-03-12T17:56:01.327
> 
> 标签：java, swing

我正在尝试使用 Netbeans 创建一个带有两个球（一个位于顶部，另一个位于底部）的 java 程序，执行时它们向相反方向移动并离开屏幕。

原始代码是使用一个球给我们的，我们被要求添加第二个面板，因此代码中的混乱。

`BoxLayout.Y_AXIS`我的问题是当我使用球在中心相遇并由于面板布置而消失时执行代码时。我希望球穿过中心进入其他面板。

我试过使用`border layout`，但我失去了一个球。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class RandomBall {

    JFrame frame;
    public int x = 0;
    public int y = 0;
    public int z = 300;
    public int deltaX;
    public int deltaY;
    public int deltaZ;
    public int posNeg;
    public int diameter = 50;
    final static public int MULT = 5;
    Ball1DrawPanel drawPanel1;
    Ball2DrawPanel drawPanel2;
    JPanel pan;

    public static void main(String[] args) {
        RandomBall gui = new RandomBall();
    }

    public void go() {
        frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        drawPanel1 = new Ball1DrawPanel();
        drawPanel2 = new Ball2DrawPanel();
        pan = new JPanel();
        pan.setLayout(new BoxLayout(pan, BoxLayout.Y_AXIS));
        pan.add(BorderLayout.NORTH, drawPanel1);
        pan.add(BorderLayout.SOUTH, drawPanel2);

        frame.getContentPane().add(BorderLayout.CENTER, pan);

        frame.setSize(500, 500);
        frame.setVisible(true);

        deltaX = (int) (Math.random() * MULT);  //randomly set the displacement in the  x direction (across)
        deltaY = (int) (Math.random() * MULT);  //randomly set the displacement in the y direction (down)
        deltaZ = (int) (Math.random() * MULT);  //randomly set the displacement in the y direction (down)

        while ((deltaX == 0) && (deltaY == 0)) {
            deltaX = (int) (Math.random() * MULT); //to prevent both values being zero - ball will not move
            deltaY = (int) (Math.random() * MULT);
            deltaZ = (int) (Math.random() * MULT);
        }

        posNeg = (int) (Math.random() * 2);
        if (posNeg == 0) {
            deltaX = deltaX * -1;  //randomly set the direction to left or right
        }
    }

    public RandomBall() {
        go();
    }

    class Ball1DrawPanel extends JPanel {
        @Override
        public void paintComponent(Graphics g) {
            try {
                Thread.sleep(10);
            } catch (Exception e) {
            }
            g.setColor(Color.red);
            g.fillOval((this.getWidth() + (x) - diameter) / 2, (0 + (y)) / 2, diameter, diameter);
            frame.repaint();
            x = x + deltaX;
            y = y + deltaY;
        }
    }

    class Ball2DrawPanel extends JPanel {
        @Override
        public void paintComponent(Graphics g) {
            try {
                Thread.sleep(10);
            } catch (Exception e) {
            }
            g.setColor(Color.BLUE);
            g.fillOval((this.getWidth() + (x) - diameter) / 2, (0 + (z)) / 2, diameter, diameter);
            frame.repaint();
            x = x + deltaX;
            z = z - deltaZ;
        }
    }
} 
```

是否有任何`layout`或任何实现，我可以使用它来让球穿过对面的小程序，而不是在与另一个小程序碰撞时在中心打破？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T02:42:12.130

我感谢所有帮助，但做了一些研究并设法找到了我的问题的解决方案..

我创建了第二个面板，

```
pan = new JPanel(); 
pan.setLayout(new OverlayLayout(pan)); 
```

在此之后，我只是将两个球添加到“pan”面板和 VOILAAAA ..

再次感谢所有的帮助..

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-12T18:33:45.233

我的建议：

1.  如果您正在编写小程序，请扩展 JApplet
2.  对图形使用 Applet 的绘制方法
3.  将 JFrame 留在 main() 中仅用于测试

# c++ - Qt 5.0.1 中不显示应用程序图标

> ID：15368588
> 
> 赞同：0
> 
> 时间：2013-03-12T17:56:09.803
> 
> 标签：c++, qt5

我有一个使用 Qt 4.8 开发的应用程序（工作正常），现在我正在尝试将其迁移到 Qt 5。我下载并安装了 Qt Creator 2.6.2（使用 Qt 5）但我遇到了一些问题。 .

该程序运行并工作，但它不显示它拥有的任何图标。

我的资源文件带有“/”前缀，并以这种方式调用我的资源，例如：

```
splash->setPixmap(QPixmap(":/images/xml.png")); 
```

在我的调试项目文件夹中，我有资源文件（icons.qrc），在同一位置有一个名为“images”的文件夹。

这与使用 Qt 4.8 的配置相同，但现在我找不到让图标显示的方法......

我错过了什么？？？？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:01:10.813

您需要确保您的文件在资源文件中的正确前缀下注册。磁盘上文件所在的文件夹对于在 c++ 代码中加载资源并不重要。

您必须在资源文件中创建前缀“images”（添加 > 添加前缀），然后在此前缀下添加“xml.png”作为文件。如果您选择在文件上设置别名（例如“xml_img”），您的资源将可以通过以下方式加载到您的代码中：

```
splash->setPixmap(QPixmap(":/images/xml_img")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-20T10:18:37.770

我有同样的问题，我从 Qt 4.6.2 移植到 Qt 5.6.2 ......我发现了这个文件：[http](http://doc.qt.io/qt-5/qdir.html#Q_INIT_RESOURCE) ://doc.qt.io/qt-5/qdir.html#Q_INIT_RESOURCE 根据this in Qt5，必须启动所有资源。

所以，它需要在一开始就做好。所以你的“main.cpp”文件应该看起来像这样：

```
#include "myResource.qrc.cpp"
void myFunction(){
    Q_INIT_RESOURCE(myResource);
} 
```

这似乎对我有用。但是请专门查看文档，看看它是否适合您。

# mysql - 两列之间的Mysql日期时间

> ID：15368589
> 
> 赞同：5
> 
> 时间：2013-03-12T17:56:13.910
> 
> 标签：mysql, sql, datetime, range

我在事件表中有两列（都是日期时间）startDate 和 endDate。我正在使用`date()`php 的函数检索当前日期。

这导致例如 2013-03-12。

现在有三种可能性的事件与今天发生的日期相结合：

1.  活动在这一天开始并结束
2.  活动开始较早，今天结束
3.  活动今天开始但在未来结束 (>= 2013-03-13)

现在我想把这些都分解成单独的查询，因为我不习惯处理日期。我从第一个查询开始，但我已经失败了。我尝试了以下方法：

```
SELECT * FROM events WHERE (startDate= '2013-03-12' AND endDate= '2013-03-12') 
```

也：

```
SELECT * FROM events WHERE NOT (startDate < '2013-03-12' OR endDate > '2013-03-12') 
```

我也尝试过使用`DATE()`并格式化日期，例如“2013-03-12%”。

我不知道为什么它不起作用，但我确信至少有 1 场活动在 12 日举行。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T17:58:47.893

尝试使用 MySQL 的[`DATE()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date)函数将日期列修剪为日期部分：

```
SELECT * 
FROM events 
WHERE (DATE(startDate) = '2013-03-12' AND DATE(endDate)= '2013-03-12') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T18:04:22.847

您可以`DATE()`按照其他答案的建议使用该函数，但我认为这使得在列上使用索引变得困难。相反，您可以在比较中包含时间：

```
SELECT *
FROM events
WHERE startDate BETWEEN '2013-03-12 00:00:00' AND '2013-03-12 23:59:59'
  AND endDate BETWEEN '2013-03-12 00:00:00' AND '2013-03-12 23:59:59' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T18:01:27.390

MySQL 中的`DATETIME`数据类型也考虑了一天中的时间，因此它不会匹配任何内容。

如果您没有使用时间部分，那么您可以简单地将数据类型减少到`DATE`而不是`DATETIME`. 如果没有，您可以使用该`DATE()`功能摆脱时间部分，只考虑日期部分

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-18T07:44:29.647

****在 Mysql 上****使用时注意这一点**`between`**

 ****```
date_column_name between 'startDate' AND 'endDate' 
```

**注意：** 您应该将 +1 日期插入`endDate`. 因为当你插入 2015-05-18 日期到`endDate`.you 不能得到 2015-05-18 的数据。所以你需要加一个日期到`endDate`.****

# java - 缺少远程类类类型

> ID：15368592
> 
> 赞同：1
> 
> 时间：2013-03-12T17:56:19.813
> 
> 标签：java, actionscript-3, apache-flex

有没有人遇到过一些类在客户端失去他的类类型的情况？

可以说我有这个：

AS3

```
[Bindable][RemoteClass(alias="dto.someClass")]
public class someClass{
    //some public variables
} 
```

爪哇

```
package dto;
public class someClass{
    //some private variables

    //getters and setters
} 
```

我正在通过远程对象从服务器获取列表。

爪哇

```
public List<someClass> someFunction(){
    //code creating a list
    return list;
} 
```

AS3

```
private function remoteObject_resultHandler(e:ResultEvent):void{
    result=e.result as ArrayCollection;
} 
```

但是当你尝试时`trace(""+(result.getItemAt(0) is someClass))`，一些远程类返回真而另一些返回假，如果我没有注意到这一点，当我将数组发送回服务器时会变得更糟，因为它最终成为一个列表`flex.messaging.io.amf.ASObject`，我什至不能投射到任何东西（我得到一个投射异常）。

我在使用一些 RemoteClasses 时遇到了这种情况，在仔细检查了远程别名后，在某些情况下我根本无法修复它......

那么，有没有其他人经历过这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:36:37.907

好的，它现在可以工作了，flextras 指出的是真的，我在该类的 AS3 代码中没有任何引用，我想知道为什么我也看到了错误的跟踪，但是在完全重新编译后，服务器得到了数组就好了，并且跟踪显示为真，所以一切都很好 =) 现在我想知道这是一个错误还是什么？我在 Eclipse 中使用 flashbuilder 4.6 顺便说一句。

# svn - 删除/重新添加导致的 tee 冲突

> ID：15368596
> 
> 赞同：1
> 
> 时间：2013-03-12T17:56:24.493
> 
> 标签：svn, tree-conflict

我从 svn 中删除并忽略了一个我认为是用户特定的文件夹（如果你有兴趣，可以使用 nbproject）。

这很粗心，结果我错了，所以为了避免造成混乱，我惊慌失措，取消了忽略，添加了文件夹并提交。

这更粗心，我意识到我在旧文件夹所在的位置添加了一个“新”文件夹。这导致与随后更新的任何人发生合并冲突。这个文件夹有很多变化，而且我自己的版本可能也有变化，所以每个人都会遇到混乱的冲突，因为不清楚哪些变化值得保留。

我该怎么做才能避免给使用 svn 的每个人造成这种树冲突？

我确定会涉及到合并，但是我不知道如何合并以前的文件夹，普通的合并似乎不起作用（我没有经验也无济于事，大多数文档似乎都是对于简单的情况）。

我很想再次删除该文件夹然后合并，但我不确定这是否会导致更大的混乱。

任何建议都将不胜感激，包括相关问题的链接，我知识不足，无法识别答案适用于这种情况。我假设大量的“我在合并时遇到冲突”问题不是，但是我在其中找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:10:20.997

我还发现涉及已删除文件的 svn 冲突有时会令人难以置信。

当我拥有它们时，我只需备份我的“好”本地版本（不包括`.svn`目录），删除受感染的目录，然后使用`svn update`（或`svn checkout`，根据您的情况而定）再次获取它。然后我将我的文件合并回来（合并公共文件，并删除我最初打算删除的文件，如果有的话）。

这可能不是最优雅的方式（或者是吗？），但它简单且安全。

# java - CXF- 具有 AES 加密的 WS-Security

> ID：15368605
> 
> 赞同：1
> 
> 时间：2013-03-12T17:56:58.360
> 
> 标签：java, cxf, ws-security

我可能会使用具有以下要求的 CXF 框架来实现 Web 服务：

*   用户名令牌
*   AES 加密

系统可能会在调用它之前将密钥传递给 WS。我尝试按以下方式进行配置，但不起作用。

```
<bean id="logInBound" class="org.apache.cxf.interceptor.LoggingInInterceptor" />
<bean id="logOutBound" class="org.apache.cxf.interceptor.LoggingOutInterceptor" />
<jaxws:client id="helloClient" serviceClass="com.itiboss.facade.HelloWorld"        address="http://localhost:18080/spring-jpa/ws/HelloWorld">
    <jaxws:properties>
        <entry key="mtom-enabled" value="true"/>
    </jaxws:properties>
    <jaxws:inInterceptors>
        <ref bean="logInBound" />
    </jaxws:inInterceptors>
    <jaxws:outInterceptors>
        <ref bean="logOutBound" />
        <ref bean="outbound-security" />
    </jaxws:outInterceptors>
</jaxws:client>
<!-- WSS4JOutInterceptor for incorporating a UsernameToken in a SOAP --> 
<bean class="org.apache.cxf.ws.security.wss4j.WSS4JOutInterceptor" id="outbound-security">
    <constructor-arg>
        <map>
            <entry key="action" value="UsernameToken Encrypt"/>  
            <entry key="user" value="dummy"/>  
            <entry key="allowMTOM" value="true"/>  
            <entry key="encryptionSymAlgorithm" value="http://www.w3.org/2001/04/xmlenc#aes256-cbc"/>
            <!--entry key="passwordType" value="PasswordText"/-->                
            <entry key="passwordCallbackClass" value="com.itiboss.facade.ClientPasswordCallback"/>               
        </map>
    </constructor-arg>
</bean> 
```

# ruby-on-rails-3 - 了解 Rails 迁移语句 (:null => false)

> ID：15368608
> 
> 赞同：5
> 
> 时间：2013-03-12T17:57:05.000
> 
> 标签：ruby-on-rails-3, migration

我试图理解以下语句，它来自 rails 迁移文件：

```
x.datetime "new",     :null => false
x.datetime "update",  :null => false 
```

我理解这两个语句的第一部分（逗号之前的所有内容），但我不确定 null 部分

```
:null => false 
```

这基本上是在说“如果它不存在，那么它就是假的？” 逻辑似乎有点奇怪，对此的任何澄清都会非常有帮助。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-05-16T22:09:24.780

`:null => false`在 Rails 迁移中告诉您的数据库不接受 NULL 值。它可用于`:default => 0`告诉您的数据库使用“0”作为默认值（a）当查询中指定 NULL 或未指定任何内容时或（b）创建或更新对象时。（记住，'0' 和 NULL 不是一回事。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T18:53:57.713

> 编辑：自从[最初提到 CoffeeScript](https://stackoverflow.com/revisions/15368608/1)以来，我一直认为这个问题是关于语法和翻译的。出于目的，请参阅[Peter Bloom 的回答](https://stackoverflow.com/a/16598317)。

* * *

> 我不确定这到底是什么`:null => false`意思。

运算符是 Ruby 中的`=>`键/值分隔符，定义 a[`Hash`](http://ruby-doc.org/core-1.9.3/Hash.html)并将`:null`键设置为`false`。它类似于CoffeeScript/JavaScript`:`中的文字 -- 。`Object``{ null: false }`

在参数列表中使用时，它是在 Ruby 中允许/模仿命名参数的一种选择。

另一个主要区别是 CoffeeScript/JavaScript 使用`String`s 作为键，而 Ruby 通常使用[符号](http://ruby-doc.org/core-1.9.3/Symbol.html)- `"null"`(cs/js) 与`:null`(rb)。

因此，CoffeeScript 中的语法等价物是：

```
x.datetime "new",     null: false
x.datetime "update",  null: false 
```

在 JavaScript 中，这是：

```
x.datetime("new",    { null: false });
x.datetime("update", { null: false }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-02T10:44:36.040

首先，`x`我`t`不会使用迁移中使用的标准变量。

现在，在迁移文件中，`t`对象`create_table`实际上是[`ActiveRecord::ConnectionAdapters::TableDefinition`](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/TableDefinition.html).

和，

```
t.datetime "new",    :null => false
t.datetime "update", :null => false 
```

实际上转化为

```
t.column("new", :datetime, { :null => false })
t.column("update", :datetime, { :null => false }) 
```

其中最后一个参数是[`column`](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/TableDefinition.html#method-i-column)方法的选项参数。

根据[文档](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/TableDefinition.html#method-i-column)，这些选项之一是`:null`允许或禁止列中的 NULL 值。

因此，总而言之，`:null => false`这意味着“不允许在新列或更新列中使用 NULL 值”。

# java - 用于添加到二维数组的 while 和 for 循环

> ID：15368609
> 
> 赞同：1
> 
> 时间：2013-03-12T17:57:06.937
> 
> 标签：java, arrays, object, arraylist, add

我有一个包含对象的arrayList。每个对象包含许多字符串。我正在尝试获取这些字符串并将它们添加到二维数组中。

```
public void iterateRow(Row row)
{ 
    int x = 0;
    int y = size();
    tableArray = new String[y][5];
    while(x < y){
       int z = 0;
       for (String s: row.rowString()){
          tableArray[x][z] = s;
          z++;
       }
       x++;
    }
} 
```

每当我运行并为行类创建一个新实例时，该方法应该将包含在 Row 中的字符串添加到数组中。但是，它将最新条目复制 x 次（其中 x 是条目总数）。

这是 Row 类以供进一步参考：

```
public class Row
{   
public String appNumber;
public String name;
public String date;
public String fileLoc;
public String country;
public String elementString;
public String results[];

public Row(String appNumber, String name, String date, String fileLoc, String country, Table table)
{
    this.appNumber = appNumber;
    this.name = name;
    this.date = date;
    this.fileLoc = fileLoc;
    this.country = country;
    table.addApplicant(this);
}

public String[] rowString()
{
    String[] a = {appNumber, name, date, fileLoc, country};
    return a;
}} 
```

我认为在 iterateRow() 方法中这是一个愚蠢的逻辑错误，但我似乎无法弄清楚是什么。任何帮助，将不胜感激。

编辑：在大家的帮助下，我删除了 while 循环。然而，它似乎仍然是复制行而不是移动到下一个？

```
public void iterateRow(Row row)
{ int x = 0;
    int y = size();
    tableArray = new String[y][row.rowString().length];
    for(int i =0; i<y;i++){
    int z = 0;
    for (String s: row.rowString()){
       tableArray[x][z] = s;
       z++;
    }x++;}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:06:32.940

问题看起来像是在while循环中。例如，如果 size() 返回 3，则 while 循环将以 x=0,1,2 执行，因此您将分配 tableArray[0]，然后是 tableArray[1]，然后是 tableArray[2]。

很难说出解决方案是什么，因为我完全不明白为什么你的代码中有 while 循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:30:46.563

看起来您想遍历 List of Rows 的每个元素

也许您想使用类似于以下的方法：

```
public void iterateRows(List<Row> rows) {
    int cols = 5;
    int row = 0, col = 0;
    tableArray = new String[rows.size()][cols];
    for(Row row : rows) {
        col = 0;
        for(String c : row.rowString()) {
            tableArray[row][col] = c;
            col++;
        }
        row++:
    }
} 
```

但是，如果有超过 5 列，最好实现自己的错误检查...

**编辑**

这可能不是用于您的程序的最佳设计，我建议您更改它，以便在添加新行时，您不必遍历每个旧行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T18:03:48.373

您的方法在每次调用时都会`iterateRow`重新创建。`tableArray`由于`while`循环，您的`Row`对象在数组中获得了复制`y`次数。

我怀疑您想在`iterateRow`方法之外创建数组，而不是使用 while 循环（只是 for 循环）来填充数组中的下一个插槽。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T18:04:23.953

您没有注意相对于 Row 的大小来调整二维数组的大小。

虽然这可能不是确凿的证据，但这样做会更安全

```
 tableArray = new String[y][row.rowString().length]; 
```

代替

```
 tableArray = new String[y][5]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T18:32:01.057

我不知道这是否出于实际目的或如何调用 IterateRow()，但实现此工作的合乎逻辑的方法是首先声明数组，在 IterateRow 中添加 2 个参数（数组和 currentRow 的引用）。然后，在 iterateRow 中，您摆脱了 while 循环，您只需循环字符串属性。

# assembly - 非法内存引用

> ID：15368611
> 
> 赞同：0
> 
> 时间：2013-03-12T17:57:15.410
> 
> 标签：assembly, x86, x86-16, cpu-registers, addressing-mode

我是一名
尝试实现 STRCPY的汇编语言初学者，
我的汇编程序“TASM”返回“非法内存引用”错误.. 并尝试阅读有关该错误的信息，但找不到任何内容。

这是代码。

```
include inout.asm
.Model Small,c
.486
.STACK 200h
.DATA
    Arr1 DB "ABCD$"
    Arr2 DB "EFGHIJ$"
.CODE
StART: MOV AX, @DATA
       MOV DS, AX

      LEA Si,Arr1
      LEA Di,Arr2

again:  cmp Byte PTR [Si], "$"
        JNE Ite ; Iterate
        JMP Done
         Ite: MOV Byte PTR[ Di ],[Si] ; Error Here
         Inc Si ; One Byte though
         Inc Di ; One Byte though
         JMP again
Done: MOV Byte PTR [Di], "$"
      call puts, offset Arr2
      Call puts, offset Arr1
 MOV AH,04CH
 MOV AL,0
 INT 21h
 END START 
```

这就是汇编程序所说的..

```
C:\TASM\BIN>tasm /zi /z third
Turbo Assembler  Version 3.1  Copyright (c) 1988, 1992 Borland International

Assembling file:   third.ASM
                 Ite: MOV Byte PTR[ Di ],[Si] ; Error Here
**Error** third.ASM(18) Illegal memory reference
Error messages:    1
Warning messages:  None
Passes:            1
Remaining memory:  415k 
```

顺便说一句我试过

`MOV Byte PTR[DI],BYTE PT[SI]`但没有用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:01:08.953

asm x86 中不允许这样的操作。您不能将数据直接从一个存储单元移动到另一个存储单元。为了做到这一点，你需要通过一个寄存器，例如：

```
mov al, byte ptr[di]
mov byte ptr[si], al 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T18:02:49.277

正如icepack 指出的那样，您所拥有的并不是有效的说明。

不过，请查看`movs`指令，它将字节从 [si] 移动到 [di] 并且还会增加两个索引计数器。

# ios - 如何获取 iOS 设备的主机名

> ID：15368613
> 
> 赞同：1
> 
> 时间：2013-03-12T17:57:22.247
> 
> 标签：ios, objective-c, networking, hostname

我不确定如何获取我的 iOS 设备的主机名？我想将 NSNetServices 与它进行比较，以确保它不会在可用服务列表中包含自己的主机名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:27:46.813

在`<unistd.h>`中，您可以找到`gethostname()`接受 char 指针参数的函数，不幸的是，还有一个长度。如果提供的第二个参数太长（它定义`HOST_NAME_MAX`为 255，所以这将是您最好的选择），它 null 终止，因此您可以使用一些巨大的 int 值并仍然获得有效的结果。

# opencv - 打开 cv，矩形感兴趣区域参考

> ID：15368619
> 
> 赞同：1
> 
> 时间：2013-03-12T17:57:33.773
> 
> 标签：opencv, reference, area, threshold, roi

我想从图像中创建一个具有特定坐标宽度和高度的矩形。

然后拆分通道，最后对该区域中的给定通道进行阈值处理。

我的问题是我想引用图像上的一个区域（矩形）。

这是我的代码： cv::Rect myROI(10, 20, 50, 50);
cv::Mat croppedImage = org_image(myROI);

在我对这个croppedImage 进行操作之后，我还想要该操作对org_image 的影响。

我想引用该区域而不是复制该区域（引用它）。

我怎样才能做到这一点？

* * *

编辑1：

首先感谢您的回答。当我使用
cv::threshold(croppedImage, croppedImage, thresh, 255, type);

矩形区域被阈值化（但所有通道），但不是我想要的特定通道，例如我只想对蓝色通道进行阈值化，我尝试了所有方法，它不起作用。

我尝试分割矩形，但它不起作用。

顺便说一句，合并分割图像的解决方案也是吗？这可以帮助我如果我可以通过仅引用croppedImage 进行拆分，我认为它会解决我的问题。

**所以我只需要在一个投资回报率中设置一个通道，请给我一个完整的解决方案。而且我必须使用拆分。**

谢谢

* * *

编辑 2

所以它不起作用，请在此处查看我的代码...对分割通道的操作对裁剪图像和原始图像也没有任何影响。

```
 Mat org_image = image.clone();
  cv::Rect myROI(0, 0, 5, 5);
  cv::Mat croppedImage = org_image(myROI);
  std::vector<cv::Mat> img_split(3);
  split(croppedImage, img_split);

  cv::threshold(img_split[1], img_split[1], thresh, 255, 0);

  for(int i=0; i < 3; i++)
  printf("img_split[%d].data[0] ==> adress: %p, ==> data: %d\n", i, &img_split[i].data[0], img_split[i].data[0]);
  printf("+++++++++++++++++\n");        
  for(int i=0; i < 3; i++)
  printf("     croppedImage[%d] ==> adress: %p, ==> data: %d\n", i, &croppedImage.data[i], croppedImage.data[i]);      
  printf("+++++++++++++++++\n");    
  for(int i=0; i < 3; i++)
  printf("org_image[%d] ==> adress: %p, data ->  %d\n", i, &org_image.data[i], org_image.data[i]); 
```

输出：

```
img_split[0].data[0] ==> adress: 0x846e8a0, ==> data: 212
img_split[1].data[0] ==> adress: 0x846e8d0, ==> data: 255
img_split[2].data[0] ==> adress: 0x846e910, ==> data: 220
+++++++++++++++++
     croppedImage[0] ==> adress: 0xb468d010, ==> data: 212
     croppedImage[1] ==> adress: 0xb468d011, ==> data: 220
     croppedImage[2] ==> adress: 0xb468d012, ==> data: 220
+++++++++++++++++
org_image[0] ==> adress: 0xb468d010, data ->  212
org_image[1] ==> adress: 0xb468d011, data ->  220
org_image[2] ==> adress: 0xb468d012, data ->  220 
```

我没有更多的想法.... :-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:42:39.127

实际上，在您对该croppedImage 进行操作后，该操作将对org_image 产生影响。您可以为此使用特殊的构造函数：

```
Mat::Mat(const Mat& m, const Rect& roi) 
```

这是示例：

```
uchar vals[] = {1,1,1,1,
                1,1,1,1,
                1,1,1,1,
                1,1,1,1};
cv::Mat_<uchar> A(4,4,vals);
std::cout << "before:\n" << A << std::endl;

cv::Rect roi(1,1,2,2);
cv::Mat_<uchar> B( A, roi );
B.setTo(2);

std::cout << "after:\n" << A << std::endl; 
```

输出：

```
before:
 [1, 1, 1, 1;
  1, 1, 1, 1;
  1, 1, 1, 1;
  1, 1, 1, 1]
after:
 [1, 1, 1, 1;
  1, 2, 2, 1;
  1, 2, 2, 1;
  1, 1, 1, 1] 
```

# c# - 在 c# 中对文件夹或 UNC 路径的写入权限

> ID：15368621
> 
> 赞同：0
> 
> 时间：2013-03-12T17:57:45.117
> 
> 标签：c#, directory, file-permissions, unc

有什么方法可以检查给定路径上是否有可用的写权限，该路径可能是本地文件夹 (c:\temp) 或 UNC (\server\share)？我不能使用 try/catch，因为我可能有写权限但没有删除权限，所以我无法删除创建的文件......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:03:55.530

您使用*权限需求*，因此：

```
FileIOPermission f2 = new FileIOPermission(FileIOPermissionAccess.Read, "C:\\test_r");
f2.AddPathList(FileIOPermissionAccess.Write | FileIOPermissionAccess.Read, "C:\\example\\out.txt");
try
{
  f2.Demand();
  // do something useful with the file here
}
catch (SecurityException s)
{
  Console.WriteLine(s.Message);
  // deal with the lack of permissions here.
} 
```

指定所需的权限和所需的文件系统对象。如果您没有所需的权限，则会引发安全异常。更多细节在

*   [http://support.microsoft.com/kb/315529](http://support.microsoft.com/kb/315529)
*   [http://msdn.microsoft.com/en-us/library/system.security.permissions.fileiopermission.aspx](http://msdn.microsoft.com/en-us/library/system.security.permissions.fileiopermission.aspx)

由于各种原因——竞争条件就是其中之一——它比检查 NTFS 文件系统权限看起来要复杂得多。

显然，我们不久前发现这是 UNC 路径的无操作。请参阅这个问题，[Testing a UNC Path's "Accessability"](https://stackoverflow.com/questions/5732347/testing-a-unc-paths-accessability)，了解详情。

一点 google-fu 建议这个 CodeProject 类可能有用，但是： http: [//www.codeproject.com/Articles/14402/Testing-File-Access-Rights-in-NET-2-0](http://www.codeproject.com/Articles/14402/Testing-File-Access-Rights-in-NET-2-0)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T18:05:47.850

是的，您可以使用[`FileIOPermission`](http://msdn.microsoft.com/en-us/library/system.security.permissions.fileiopermission.aspx)类和[`FileIOPermissionAccess`](http://msdn.microsoft.com/en-gb/library/system.security.permissions.fileiopermissionaccess.aspx)枚举。

`FileIOPermissionAccess.Write`：

> 有权写入或删除文件或目录。写访问包括删除和覆盖文件或目录。

* * *

```
FileIOPermission f = new FileIOPermission(FileIOPermissionAccess.Write, myPath);

try
{
   f.Demand();
   //permission to write/delete/overwrite
}
catch (SecurityException s)
{
   //there is no permission to write/delete/overwrite
} 
```

# php - 需要一些帮助交换 mysql 中的两个列值

> ID：15368623
> 
> 赞同：0
> 
> 时间：2013-03-12T17:57:49.323
> 
> 标签：php, mysql

我在 mysql 中有一个相当大的表，我需要进行大规模更新以切换 2 列值

*   表_x
    *   列_1
    *   column_2

我需要将所有值从“column_1”移动到“column_2”，并将值从“column_2”移动到“column_1”

任何想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T17:59:32.870

这只是列名的问题吗？如果是这样，您只需制作一个 ALTER TABLE 来交换名称即可。

# c++ - 在编写智能指针和指针的通用代码时，如何获取简单指针？

> ID：15368624
> 
> 赞同：3
> 
> 时间：2013-03-12T17:57:51.110
> 
> 标签：c++, c++11

当我想实现一个功能时：

```
template <typename TIterator>
void doSomething(TIterator begin, TIterator end); 
```

能够与两者一起工作：

```
std::vector<Widget*> 
```

和

```
std::vector<std::shared_ptr<Widget>> 
```

我应该如何访问底层指针？由于某种原因`std::shared_ptr<Widget>`不能隐式转换为`Widget*`，我必须使用该`get()`函数。这样，代码就不起作用了，`std::vector<Widget*>`因为`Widget*`没有`get()`功能。

我要做的是：

```
void functionAcceptingPointer(Widget* widget);

template <typename TIterator>
void doSomething(TIterator begin, TIterator end);
{
    std::map<double, decltype(&(**begin))> map;
    ...
    auto firstPointer = &(**begin);
    ...
    functionAcceptingPointer(&(**begin));
    ....
} 
```

每当我需要一个普通指针时，即使用双重取消引用`*`后跟运算符。`&`

它可以完成这项工作，但我很好奇是否有一些更易读、更常用的方法来做到这一点，以及在我用丑陋的东西填充我的代码后是否有一些事情会回来困扰我`&(**begin)`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T18:11:43.477

这是我为解决此问题所做的工作：

```
#include <memory>

template <class T>
inline
T*
to_raw_pointer(T* p) noexcept
{
    return p;
}

template <class Pointer>
inline
typename std::pointer_traits<typename std::remove_reference<Pointer>::type>::element_type*
to_raw_pointer(Pointer&& p) noexcept
{
    return ::to_raw_pointer(p.operator->());
}
int main()
{
    std::shared_ptr<int> p1(new int(1));
    int* r1 = to_raw_pointer(p1);
    int* p2 = new int(2);
    int* r2 = to_raw_pointer(p2);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T18:18:04.723

为了增加可读性，您可以创建自己的包装器来取消引用任何（智能）指针：

```
template<typename T> auto raw_deref(T t) -> decltype( &**t ) { return &**t; } 
```

这会将您的代码变成

```
template <typename TIterator>
void doSomething(TIterator begin, TIterator end)
{
    std::map<double, decltype(raw_deref(begin))> map;
    ...
    auto firstPointer = raw_deref(begin);
    ...
    functionAcceptingPointer(raw_deref(begin));
    ....
} 
```

当然你可以想一个比`raw_deref`:)更好的名字

# php - PHP：不知道如何将多级变量的名称转换为字符串？

> ID：15368625
> 
> 赞同：-1
> 
> 时间：2013-03-12T17:57:52.257
> 
> 标签：php, ftp

我正在尝试编写一个 PHP 脚本来安装在我的本地机器的 crontab 中，它将：

1) 登录远程 FTP 服务器
2) 检索文件列表
3) 下载自今天凌晨 12:00 以来创建的所有文件。

我已经能够将一些代码示例散列在一起并更接近我的预期结果。然而，我已经变得相当卡在一点上。为了获取新文件，我不得不使用 ftp_rawlist 函数。这将返回一个嵌套数组，其中每个文件都表示为一个数组，其中包含表示其属性（用户、组、大小等）的元素。我能够与数组中的项目进行交互，但是一旦我找到了我想要下载的“数组”，我就很难做到这一点。

**编码**

```
<?php 

    // define function to sync directory structure via ftp;

    date_default_timezone_set('America/New_York');
    chdir('/Users/robotlaptop/Desktop/phpfiles');

    // define some login credentials
    $ftp_username = 'xxx';
    $ftp_userpass = 'xxx';
    $ftp_server = 'xxx';
    // set up a connection
    $conn_id = ftp_connect($ftp_server);
    $login_result = ftp_login($conn_id, $ftp_username, $ftp_userpass);
    $sync_compare = date('d M');

    // set passive mode on
    ftp_pasv($conn_id, true);

        function listDetailed($resource, $directory = '.') { 
            if (is_array($children = @ftp_rawlist($resource, $directory))) { 
                $items = array(); 
                global $conn_id;
                global $sync_compare;
                foreach ($children as $child) { 
                    $chunks = preg_split("/\s+/", $child); 
                    list($item['rights'], $item['number'], $item['user'], $item['group'], $item['size'], $item['month'], $item['day'], $item['time']) = $chunks; 
                    $item['type'] = $chunks[0]{0} === 'd' ? 'directory' : 'file'; 
                    array_splice($chunks, 0, 8); 
                    $items[implode(" ", $chunks)] = $item; 
                    $synctest = $item['day'] . ' ' . $item['month'];

                    if ($sync_compare == $synctest ) {
                        ftp_get($conn_id, 'testfile', $file, FTP_BINARY);
                        }

                    }

                return $items; 
            } 

            // Throw exception or return false < up to you 
        } 

    $testme = listDetailed($conn_id, '/');

    print_r($testme);
    //print_r($testme);

    ftp_close($conn_id);

?> 
```

上面的问题最具体地说是我无法弄清楚如何将表示文件名的数组的名称传递给给出现在循环内部的 ftp_get 函数的第三个参数。我尝试将 $file 更改为 $items，这在概念上是有意义的，但这是一个数组的名称，所以它不起作用。如果我猜对了，我需要弄清楚如何获得一个代表文件名字符串的变量。如果您查看 print_r 的输出（如下），您将看到每个文件名都映射到一个键值。

对不起，如果这个问题太简单了；我是编程新手。

**的输出** `print_r($testme)`

```
 Array
    (
        [dandelions.txt] => Array
            (
                [time] => 16:12
                [day] => 12
                [month] => Mar
                [size] => 21
                [group] => 0
                [user] => 0
                [number] => 1
                [rights] => -rw-r--r--
                [type] => file
            )

        [goobs.txt] => Array
            (
                [time] => 21:34
                [day] => 29
                [month] => Nov
                [size] => 31
                [group] => 0
                [user] => 0
                [number] => 1
                [rights] => -rw-r--r--
                [type] => file
            )

    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:03:11.243

要仅获取数组的键，可以使用[array_keys](http://php.net/array-keys)。

例如：

```
$array = [
    'hello.txt' => [
        'somerandomdata',
        'somemorerandomdata',
        'evenmore'
    ],
    'newfile.txt' => [
        'blah',
        'randomdata'
    ]
];
print_r(array_keys($array)); 
```

将返回

```
Array
(
    [0] => hello.txt
    [1] => newfile.txt
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:04:13.430

您可以按如下方式访问 foreach 中的数组键，假设文件数组为`$files`：

```
foreach ($files as $file_name => $file_info) {

 ...

 } 
```

# css - 在 webkit 浏览器中，v3 谷歌地图不尊重容器的边界半径。有人有解决方法吗？

> ID：15368627
> 
> 赞同：4
> 
> 时间：2013-03-12T17:57:56.103
> 
> 标签：css, google-chrome, google-maps-api-3, webkit

我有两张谷歌地图。第一个是使用 Google Maps API (v3) 创建的，包含在 #map1 中。第二个使用 Google 建议的嵌入语法显示在 iframe 中，并包含在 #map2 中。

这是小提琴：http: [//jsfiddle.net/wmcmeans/mPGWx/7/](http://jsfiddle.net/wmcmeans/mPGWx/7/)

以下是片段：

```
<div id="map1" class="gmap left bling"></div>

<iframe id="map2" class="gmap right bling" height="425" width="550" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.com/maps?hl=en&amp;q=augsburg+germany&amp;ie=UTF8&amp;hq=&amp;hnear=Augsburg,+Bavarian+Swabia,+Bavaria,+Germany&amp;t=h&amp;ll=48.451123,10.862346&amp;spn=0.004981,0.00912&amp;z=16&amp;output=embed"></iframe> 
```

这是问题所在：当在基于 webkit 的浏览器中查看时，从 v3 API 创建的 Google 地图不尊重应用了边框半径样式的容器的边框。iframed（嵌入）方法没有显示相同的缺陷。

**测试良好：**

火狐 v 19.0.2 (Windows 7)

火狐 v 32.0.3 (Windows 8.1)

IE9 v 9.0.8112 (Windows 7)

IE11 (Windows 8.1)

**失败：**

Chrome v 25.0.1364.160 m / Safari (Win/32) v 5.0.3 / Opera v 11.64 (Windows 7)

Chrome v 38.0.2125.104 m (Windows 8.1)

版本 2 地图已弃用，不是一个选项。我想只用 CSS 来设置 v3 地图的样式，没有图形或覆盖。我正在寻找解决 webkit 渲染问题的方法。（我已经为此打开了一个[Chromium Issue #187187](https://code.google.com/p/chromium/issues/detail?id=187187)，差不多一年后，还没有看到）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-19T21:14:09.507

这是解决方案：http: [//jsfiddle.net/alxscms/3Kv99/](http://jsfiddle.net/alxscms/3Kv99/)

我正在使用几个额外的标记来实现这一点，我不太喜欢，但对我来说这是唯一可能的方法。

```
<div class="wrapper">
  <div class="map" id="map"></div>
  <i class="top"></i>
  <i class="right"></i>
  <i class="bottom"></i>
  <i class="left"></i>
  <i class="top left"></i>
  <i class="top right"></i>
  <i class="bottom left"></i>
  <i class="bottom right"></i>
</div> 
```

![截屏](../Images/e3f44624f2d5918cd6c764ae25b08d40.png)

我的目标是有一个内边框和圆角，但是您可以将边框粗细设置为 0，这样地图上就只有圆角了。这适用于 FF、Chrome 和 IE。我没有在 Opera 或 Safari 上测试过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-10T01:09:26.447

这对我有用：

```
-webkit-transform: translate3d(0px, 0px, 0px);
-webkit-mask-image: -webkit-radial-gradient(white, black); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-14T17:46:32.863

这似乎已解决，因此不再是问题。[您可以在 this fiddle](http://jsfiddle.net/wmcmeans/YHX6c/)使用 v3 地图 API 验证地图容器的边界半径样式确实得到尊重。

```
<div id="map3" class="gmap"></div> 
```

# r - R应用于一条线

> ID：15368630
> 
> 赞同：4
> 
> 时间：2013-03-12T17:58:14.163
> 
> 标签：r, apply

我有一个包含多行和多列的数据框。

我有一个字符向量，其中包含数据框中某些列的名称。列数可以变化。

对于每一行，对于这些列中的每一列，我必须确定其中一个是否不是 NA。（基本上`any(!is.na(df[namecolumns]))`对于每一行），然后为`TRUE`.

实际上，`any(!is.na(df[1,][namescolumns]))`效果很好，但仅适用于第一行。

我可以轻松地做一个 for 循环，这是我作为程序员的第一个反应，因为它适用于第一行，但我确信这不是`R`方法，并且有一种方法可以使用`"apply"`( `lapply`, `mapply`,`sapply`或`tapply`其他），但我不知道是哪一个以及如何。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:15:19.987

尝试`apply`在第一个维度（行）上使用：

```
apply(df, 1 function(x) any(!is.na(x[namescolumns]))) 
```

结果将转置返回，因此，您可能希望将整个语句包装在`t(.)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:20:39.750

您可以使用`lapply`和的组合`Reduce`

```
has.na.in.cols <- Reduce(`&`, lapply(colnames, function (name) !is.na(df[name]))) 
```

`NA`获取中的任何列中是否存在值的向量，该向量`colnames`又可用于对数据进行子集化。

```
df[has.any.na,] 
```

例如。鉴于：

```
df <- data.frame(a = c(1,2,3,4,NA,6,7),
                 b = c(2,4,6,8,10,12,14),
                 c = c("one","two","three","four","five","six","seven"),
                 d = c("a",NA,"c","d","e","f","g")
                 )
colnames <- c("a","d") 
```

你可以得到：

```
> df[Reduce(`&`, lapply(colnames, function (name) !is.na(df[name]))),]
  a b      c d
1 1 2    one a
3 3 6  three c
4 4 8   four d
6 6 12   six f
7 7 14 seven g 
```

# php - PHP：将 UTC 时间更改为太平洋 (PST/PDT)

> ID：15368632
> 
> 赞同：3
> 
> 时间：2013-03-12T17:58:16.037
> 
> 标签：php

我有一个 Datetime 对象并通过以下方式获取时间：

```
$today = date('Y-m-d H:i:s', $temp['date']->getTimeStamp()); 
```

我希望能够将其转换为加利福尼亚的当前时间，但我需要考虑 PST 和 PDT 的时间偏移量。它可能是 -7 或 -8 小时，具体取决于一年中的时间。如何动态获取`$today`正确的太平洋时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:14:26.567

您可以简单地使用 strtotime 更改时区，如下所示：

```
date_default_timezone_set('Etc/GMT'); //Make sure the time is GMT
$today = date('Y-m-d H:i:s');

echo $today."\n";

$today_utc = date('Y-m-d H:i:s', strtotime( $today." GMT+3"));

echo $today_utc."\n";

$today_9 = date('Y-m-d H:i:s', strtotime( $today." GMT-9"));

echo $today_9; 
```

演示：[http ://sandbox.onlinephpfunctions.com/code/f08c0c69b415464bbee68fd1cdaaf1e7f4f1872b](http://sandbox.onlinephpfunctions.com/code/f08c0c69b415464bbee68fd1cdaaf1e7f4f1872b)

因此，在您的情况下，您的代码可能是：

```
$today = date('Y-m-d H:i:s', $temp['date']->getTimeStamp());
$today = date('Y-m-d H:i:s', strtotime( $today." GMT-9")); 
```

# c++ - 显式调用析构函数的行为

> ID：15368633
> 
> 赞同：5
> 
> 时间：2013-03-12T17:58:16.440
> 
> 标签：c++, destruction

的定义`some_class`是：

```
class some_class
{
   // stuff

public:
   ~some_class()
   {
         delete dynamic_three;
   }

private:
   classA one;
   classB two;
   classC* dynamic_three;
} 
```

当一个对象的生命周期结束时，它的销毁是：（1）调用它的析构函数和（2）按照它们在类定义中声明的顺序（=内存中的位置）销毁它的子对象。

但是，如果我有这样的事情：

```
auto* ptr = new some_class();

// more stuff

ptr->~some_class(); // l. X 
```

步骤（2）也实现了？我的意思是，在第 X 行中，子对象的析构函数是否也被调用或仅在`some_class`析构函数的主体中执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:01:04.427

> 步骤（2）也实现了？

是的，这是有保证的。该行为是安全的，但请注意，在您的情况下，您无法安全地回收对象的内存，而无需先通过placement-new 重新构建它（除非您`operator new`为对象覆盖，因此您可以保证内存是如何分配的并使用匹配的释放）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T18:07:24.810

让我们做一个测试：

```
class classA
{
public:
    ~classA() { cout << "~classA()" << endl; }
};

class classB
{
public:
    ~classB() { cout << "~classB()" << endl; }
};

class some_class
{
public:
    ~some_class() { cout << "~some_class()" << endl; }

private:
    classA one;
    classB two;
};

int main()
{
    cout << "Start..." << endl;

    auto* ptr = new some_class();

    ptr->~some_class();

    cout << "End." << endl;
} 
```

输出：

> 开始...
> 
> ~some_class()
> 
> 〜类B（）
> 
> ~classA()
> 
> 结尾。

所以所有的析构函数都以相反的顺序被调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T18:01:34.440

> 当一个对象的生命周期结束时，它的销毁是：（1）调用它的析构函数和（2）按照它们在类定义中声明的顺序（=内存中的位置）销毁它的子对象。

(3) 释放分配的内存。

> 步骤（2）也实现了？

步骤（2）是，但不是步骤（3）。

但如果你能写

```
auto* ptr = new some_class(); 
```

请注意，您也可以写

```
std::unique_ptr<ptr> ptr (new some_class()); 
```

这将需要`delete`您（当然，仅在符合您的需求时才使用它，但如果您不确定，则默认使用它）。

# graphics - 投影矩阵 - 如何获得它

> ID：15368641
> 
> 赞同：1
> 
> 时间：2013-03-12T17:58:35.617
> 
> 标签：graphics, 3d, rasterizing

我正在尝试使用透视相机将世界空间坐标转换为屏幕坐标。基本上我有这种情况：

![在此处输入图像描述](../Images/6a9df3043b1a78befa04a0069e353cae.png)

我在 z=0 处有近平面，在 z=1 处有远平面，现在我试图从 xyz 坐标中获取 x' y' 和 z' 坐标。因为我可以使用相似的三角形属性，所以我可以写

![在此处输入图像描述](../Images/4362c3a21915a35e91264d7b775eb683.png)

红色方块是我不明白的东西。z' 怎么会用这样的表达式编码呢？

而上面写的变换怎么写在下面的矩阵中呢？我看到一个 z-scale 术语和一个 z-translation 术语，但我不明白它们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:20:06.267

只需使用 Oli 指示的链接求解矩阵即可解决问题。抱歉，添麻烦了！

# asp.net - 在iis7中设置默认页面

> ID：15368643
> 
> 赞同：0
> 
> 时间：2013-03-12T17:58:42.530
> 
> 标签：asp.net, iis, iis-7

我有一个托管在`iis7`亚马逊 ec2 实例中的 Web 应用程序。目录结构类似于`Website>Pages>welcome.aspx`。iis 站点的物理路径已设置在网站级别。我已将默认页面添加为`pages/welcome.aspx`。现在当我们访问该网站时网站重定向到默认页面，但 url 仍然是 like`abc.com:XXXX`而不是`abc.com:XXXX/pages/welcome.aspx`。现在，当有人点击带有 href like 的链接时`abcd.aspx`，会抛出一个 page not found 异常，因为它正在根目录而不是 pages 目录中搜索内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:21:36.547

转到您的 web.config 并添加：

```
<system.webServer>
  <defaultDocument>
    <files>
      <clear />
      <add value="pages/welcome.aspx" />
    </files>
  </defaultDocument>
</system.webServer> 
```

从[这个帖子](https://stackoverflow.com/questions/1913058/set-default-page-in-asp-net)。

# c++ - DirectX：屏幕上没有绘制任何内容

> ID：15368645
> 
> 赞同：2
> 
> 时间：2013-03-12T17:58:46.237
> 
> 标签：c++, debugging, directx

我正在尝试开发一个使用 DirectX (10) 显示在屏幕上的程序。

问题是，它只显示我用来清除后台缓冲区的颜色。

（我为接下来的大量代码道歉）。

这是我的渲染功能：

```
void DXEngine::renderOneFrame()
{
    //First, we clear the back buffer
    m_device->ClearRenderTargetView(m_renderTargetView,D3DXCOLOR(0.0f, 0.125f, 0.3f, 1.0f));

    //Then, we clear the depth buffer
    m_device->ClearDepthStencilView(m_depthStencilView,D3D10_CLEAR_DEPTH,1.0f, 0);

    //Update variables
    m_worldVariable->SetMatrix((float*)&m_world);
    m_viewVariable->SetMatrix((float*)&m_view);
    m_projectionVariable->SetMatrix((float*)&m_projection);

    //Render the cube 
    D3D10_TECHNIQUE_DESC techDesc;
    m_technique->GetDesc(&techDesc);

    for(UINT pass = 0; pass < techDesc.Passes ; pass++){

        m_technique->GetPassByIndex(pass)->Apply(0);
        m_device->DrawIndexed(36,0,0);
    }

    m_swapChain->Present(0,0);
} 
```

它与“Samples”文件夹下的 DirectX SDK（2010 年 6 月）中关于 DirectX10 的第 5 篇教程完全相同，只是它被封装在一个对象中。

我的场景初始化如下：

```
HRESULT DXEngine::initStaticScene()
{
    HRESULT hr;

    //Vertex buffer creation and initialization
    Vertex1Pos1Col vertices [] = 
    {
        { D3DXVECTOR3( -1.0f, 1.0f, -1.0f ), D3DXVECTOR4( 0.0f, 0.0f, 1.0f, 1.0f ) },
        { D3DXVECTOR3( 1.0f, 1.0f, -1.0f ), D3DXVECTOR4( 0.0f, 1.0f, 0.0f, 1.0f ) },
        { D3DXVECTOR3( 1.0f, 1.0f, 1.0f ), D3DXVECTOR4( 0.0f, 1.0f, 1.0f, 1.0f ) },
        { D3DXVECTOR3( -1.0f, 1.0f, 1.0f ), D3DXVECTOR4( 1.0f, 0.0f, 0.0f, 1.0f ) },
        { D3DXVECTOR3( -1.0f, -1.0f, -1.0f ), D3DXVECTOR4( 1.0f, 0.0f, 1.0f, 1.0f ) },
        { D3DXVECTOR3( 1.0f, -1.0f, -1.0f ), D3DXVECTOR4( 1.0f, 1.0f, 0.0f, 1.0f ) },
        { D3DXVECTOR3( 1.0f, -1.0f, 1.0f ), D3DXVECTOR4( 1.0f, 1.0f, 1.0f, 1.0f ) },
        { D3DXVECTOR3( -1.0f, -1.0f, 1.0f ), D3DXVECTOR4( 0.0f, 0.0f, 0.0f, 1.0f ) },
    };

    D3D10_BUFFER_DESC desc;
    desc.Usage = D3D10_USAGE_DEFAULT;
    desc.ByteWidth = sizeof(Vertex1Pos1Col) * 8;
    desc.BindFlags = D3D10_BIND_VERTEX_BUFFER;
    desc.CPUAccessFlags = 0;
    desc.MiscFlags = 0;

    D3D10_SUBRESOURCE_DATA data;
    data.pSysMem = vertices;
    hr = m_device->CreateBuffer(&desc,&data,&m_vertexBuffer);

    if(FAILED(hr)){
        MessageBox(NULL,TEXT("Vertex buffer creation failed"), TEXT("Error"),MB_OK);
        return hr;
    }

    UINT stride = sizeof(Vertex1Pos1Col);
    UINT offset = 0;
    m_device->IASetVertexBuffers(0,1,&m_vertexBuffer,&stride,&offset);

    //Index buffer creation and initialization
    DWORD indices[] = 
    {
        3,1,0,
        2,1,3,

        0,5,4,
        1,5,0,

        3,4,7,
        0,4,3,

        1,6,5,
        2,6,1,

        2,7,6,
        3,7,2,

        6,4,5,
        7,4,6,
    };

    desc.Usage = D3D10_USAGE_DEFAULT;
    desc.ByteWidth = sizeof(DWORD) * 36;
    desc.BindFlags = D3D10_BIND_INDEX_BUFFER;
    desc.CPUAccessFlags = 0;
    desc.MiscFlags = 0;
    data.pSysMem = vertices;
    hr = m_device->CreateBuffer(&desc,&data,&m_indexBuffer);

    if(FAILED(hr)){
        MessageBox(NULL,TEXT("Index buffer creation failed"), TEXT("Error"),MB_OK);
        return hr;
    }

    m_device->IASetIndexBuffer(m_indexBuffer,DXGI_FORMAT_R32_FLOAT,0);

    //Set the primitive topology, i.e. how indices should be interpreted (here, as a triangle list)
    m_device->IASetPrimitiveTopology(D3D10_PRIMITIVE_TOPOLOGY_TRIANGLELIST);

    D3DXMatrixIdentity(&m_world);

    D3DXVECTOR3 eye(0.0f, 1.0f, -10.0f);
    D3DXVECTOR3 at(0.0f, 1.0f, 0.0f);
    D3DXVECTOR3 up(0.0f, 1.0f, 0.0f);

    D3DXMatrixLookAtLH(&m_view, &eye, &at, &up);

    D3DXMatrixPerspectiveFovLH(&m_projection, (float)D3DX_PI * 0.25f, m_width/(FLOAT)m_height, 0.1f, 100.0f);

    return hr;
} 
```

再一次，它与我之前提到的教程完全相同（但已封装）。

当我在我的 IDE 中打开 Tutorial Visual Studio 解决方案时，它可以正常工作并很好地显示场景中描述的内容，但是当我尝试运行此代码的“封装”版本时，除了背景颜色之外什么都没有显示...

注意：我的 Windows 消息泵工作正常，我什至可以按照我想要的方式处理用户输入，一切都很好。我的应用程序正确地执行了我的引擎初始化（我检查了每个返回的错误代码，除了`S_OK`代码什么都没有）。

我现在不知道在哪里搜索。我一次又一次地检查了我的代码，它与教程完全相同，我检查了我封装的所有内容是否已正确设置和访问等，但我​​仍然无法显示除背景颜色之外的任何其他内容。 .

我想知道这里是否有人可以知道可能导致这种情况的原因，或者至少提示在哪里寻找......

编辑：使用的效果文件：

```
//--------------------------------------------------------------------------------------
// File: Tutorial05.fx
//
// Copyright (c) Microsoft Corporation. All rights reserved.
//--------------------------------------------------------------------------------------

//--------------------------------------------------------------------------------------
// Constant Buffer Variables
//--------------------------------------------------------------------------------------
matrix World;
matrix View;
matrix Projection;

//--------------------------------------------------------------------------------------
struct VS_INPUT
{
    float4 Pos : POSITION;
    float4 Color : COLOR;
};

struct PS_INPUT
{
    float4 Pos : SV_POSITION;
    float4 Color : COLOR;
};

//--------------------------------------------------------------------------------------
// Vertex Shader
//--------------------------------------------------------------------------------------
PS_INPUT VS( VS_INPUT input )
{
    PS_INPUT output = (PS_INPUT)0;
    output.Pos = mul( input.Pos, World );
    output.Pos = mul( output.Pos, View );
    output.Pos = mul( output.Pos, Projection );
    output.Color = input.Color;

    return output;
}

//--------------------------------------------------------------------------------------
// Pixel Shader
//--------------------------------------------------------------------------------------
float4 PS( PS_INPUT input) : SV_Target
{
    return input.Color;
}

//--------------------------------------------------------------------------------------
technique10 Render
{
    pass P0
    {
        SetVertexShader( CompileShader( vs_4_0, VS() ) );
        SetGeometryShader( NULL );
        SetPixelShader( CompileShader( ps_4_0, PS() ) );
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T05:05:23.310

我认为，这可能是一个错误：

D3D（10 和 11）管道的输入汇编阶段总是等待`DXGI_FORMAT_***_UINT`索引缓冲区的格式。[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476453%28v=vs.85%29.aspx)证明了这一点：

> DXGI_FORMAT 指定索引缓冲区中数据的格式。索引缓冲区数据允许的唯一格式是 16 位 (DXGI_FORMAT_R16_UINT) 和 32 位 (DXGI_FORMAT_R32_UINT) 整数。

然后查看将缓冲区绑定到 IA 的代码：

`m_device->IASetIndexBuffer(m_indexBuffer, DXGI_FORMAT_R32_FLOAT, 0);`

我认为您应该针对您的情况使用 DXGI_FORMAT_R32_UINT，如下所示：

`m_device->IASetIndexBuffer(m_indexBuffer, DXGI_FORMAT_R32_UINT, 0);`

# mysql - 根据匹配的列值插入值

> ID：15368648
> 
> 赞同：1
> 
> 时间：2013-03-12T17:58:49.063
> 
> 标签：mysql, sql, database, select, case

MySQL初学者在这里。我有两个表（如下所示），其中一个（freqs）我想根据数据与参考列（下面的type_freq）匹配的列插入值。例如，“rs9”（来自 freqs）的类型为“GG”，这个“GG”值与 type_freq 表中的“type2”匹配，我想将相应的频率（在本例中为“.2”）插入'rs9' 的频率值。

我尝试使用案例陈述无济于事。我认为最好用几个案例陈述来解决这个问题是否正确？有没有更好的方法？我非常感谢任何反馈。谢谢！

* * *

表：

* * *

表频率

```
rsid       type      freq
rs9         GG
rs8         CC
rs1         CC 
```

表类型频率

```
 rid       type1    type1_frequency    type2   type2_frequency   type3     type3_frequency
 rs9       AA        .7                GG        .2             GC         .1
 rs8       CC        .5                TT        .3             AT         .2
 rs1       AA        .9                CC        .1             .          . 
```

* * *

我的代码：

```
 UPDATE freqs SET req = 
     (
(SELECT type1_Frequency CASE 
    WHEN type.freqs = type1.type_frequencies
            FROM type_frequencies
    END CASE)
(SELECT type2_Frequency CASE
    WHEN type.freqs = type2.type_frequncies
            FROM type_frequencies
    END CASE)
(SELECT type3_Frequency CASE
    WHEN type.freqs = type3.type_frequencies
            FROM type_frequencies
    END CASE)
    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:02:49.620

首先，让我们设计一个查询来创建`type_freq`表的规范化版本：

```
SELECT rid, type1 AS type, type1_frequency AS frequency
FROM type_freq
UNION ALL
SELECT rid, type2 AS type, type2_frequency AS frequency
FROM type_freq
UNION ALL
SELECT rid, type3 AS type, type3_frequency AS frequency
FROM type_freq 
```

现在让我们用这个来更新你的表：

```
UPDATE freqs
SET freq =
(
    SELECT frequency
    FROM
    (
        SELECT rid, type1 AS type, type1_frequency AS frequency
        FROM type_freq
        UNION ALL
        SELECT rid, type2 AS type, type2_frequency AS frequency
        FROM type_freq
        UNION ALL
        SELECT rid, type3 AS type, type3_frequency AS frequency
        FROM type_freq
    ) x
    WHERE x.type = freqs.type AND x.rid = freqs.rsid
) 
```

请注意，如果您可以控制数据库架构，我建议您永久规范化您的`type_freq`表。

# ios - 在 UIBarButtonitem 类型的对象上找不到属性层

> ID：15368652
> 
> 赞同：4
> 
> 时间：2013-03-12T17:58:56.753
> 
> 标签：ios

我正在尝试将此动画应用于 UIBarButtonItem：

```
CABasicAnimation *theAnimation;
    theAnimation=[CABasicAnimation animationWithKeyPath:@"opacity"];
    theAnimation.duration=1.0;
    theAnimation.repeatCount=HUGE_VALF;
    theAnimation.autoreverses=YES;
    theAnimation.fromValue=[NSNumber numberWithFloat:1.0];
    theAnimation.toValue=[NSNumber numberWithFloat:0.5];
    [plusbutton.layer addAnimation:theAnimation forKey:@"animateOpacity"]; 
```

但我得到了最后一行代码标题中报告的错误。如何访问 barbuttonItem 的层？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T19:04:51.143

条形按钮项不是视图，也没有图层。

假设您没有在系统项目上尝试此操作，请访问项目的层`customView`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:02:06.297

您需要链接 QuartCore 框架，并将 QuartzCore/QuartzCore.h 导入您的类以使用层。

# c# - 如何在 DataGridView 中添加删除和更新通过强类型数据集映射到数据库但没有自动生成表单的行

> ID：15368655
> 
> 赞同：0
> 
> 时间：2013-03-12T17:59:04.317
> 
> 标签：c#, datagridview, strongly-typed-dataset

我的项目中有这个问题，我想用手解决它，但我不知道如何。我在谷歌上进行了很多搜索，但没有完整的答案。任何人都可以为我提供无法解决的解决方案“：P”。如何在 DataGridView 中添加删除和更新通过强类型数据集映射到数据库但没有自动生成表单的行。

# grails - grails run-app > 看不到终端输入

> ID：15368656
> 
> 赞同：1
> 
> 时间：2013-03-12T17:59:05.893
> 
> 标签：grails, console, terminal, ubuntu-12.04

在 Ubuntu 12.04 上，当我运行 时`grails run-app`，停止应用程序后，终端光标在键入时不移动，并且不显示任何文本。我仍然可以输入命令，但我必须要么盲目地这样做，要么使用`reset`重置终端。有没有其他人看到过这种行为？我已经在 grails 2.0.1、2.0.4、2.1.2 和 2.2.1 中进行了测试。所有人都会发生相同的行为。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T19:29:21.427

`grails --plain-output run-app`应该禁用 ANSI 颜色代码，这可能会有所帮助，具体取决于您使用的终端程序。

# haskell - 使用 FFI 时 C99 bool 的等效 Haskell 类型是什么？

> ID：15368658
> 
> 赞同：18
> 
> 时间：2013-03-12T17:59:11.307
> 
> 标签：haskell, c99, ffi

我有一个使用 C99`bool`数据类型的库，我想通过 FFI 调用它。

Haskell中C99 bool的对应类型是什么？在[Foreign.C.types](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Foreign-C-Types.html)中有 CInt、CShort 等，但没有 CBool​​。

如果 没有“正确”类型`bool`，那么在期望 a 的函数中传递的安全替代类型是`bool`什么？

另一种方法是修改 C 库，但我想保持原样。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T19:00:20.950

由于`sizeof(_Bool)`在 C99 中实现定义（参见 ISO/IEC 9899:1999 6.2.5、6.2.6 和 6.5.3.4/4），显而易见的可移植解决方案是通过使用`int`而不是`bool`. 或者，如果您不关心可移植性，您可以查看编译器的文档以了解`sizeof(_Bool)`您的平台上的内容并使用相应的 FFI 类型。

`CBool`我对缺席的猜测`Foreign.C.Types`是，底层的 C 实现预计不会支持 C99 的所有特性。一种非常广泛使用的编译器 (MSVC) 根本不支持 C99。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T18:59:12.070

据我所知，C99 没有定义`_Bool`类型的确切大小（并且`bool`映射到`_Bool`）。你唯一知道的是它足够大，可以容纳值`0`和`1`. 所以，它的二进制表示依赖于编译器，这就是为什么，我猜，它不存在于 FFI 支持库中。

以下程序使用 GCC 4.7.2 编译：

```
#include <stdio.h>
#include <stdbool.h>

int main() {
    printf("%d", sizeof(bool));
    return 0;
} 
```

给出以下输出：

```
% gcc -std=c99 -o test test.c
% ./test 
1 
```

所以，`bool`似乎映射到`char`GCC 中。您将看到什么取决于您的编译器。

正因为如此，我认为，如果你想要完全的可移植性，你最好为你的 C 函数编写一个包装器，它将简单`int`地传递给具有类型转换的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T15:38:10.063

`bool`具有as 参数和具有`bool`结果类型之间存在差异。

* * *

我很确定，引入了 C99 bool（并且与所有其他基本值不同），因为 C99 之前的 BOOL 不是一个足够好的函数**返回**类型：

需要存在这样一个变量的内存表示，至少 1 个字节，但是......

1.  在汇编器级别处理布尔值是通过 FLAG 相关的 goto 完成的。（见 && 和 ||）

2.  应该可以使用更快的按位 & 和 | 而不是 && 和 || 在布尔值上，它需要布尔值是 1 位。

3.  函数的返回值应该能够使用 FLAG 寄存器（在某些机器上），而不是被迫使用 INT 寄存器的 1 位，甚至使用 INT 寄存器中的任何零/非零 int。

因为 3.，恕我直言，除非我们考虑每个平台上 C99 bool 使用的 ABI（应用程序二进制接口），否则不会有任何直接的解决方案。修补 haskell 编译器以包装具有/应该具有 C99-bool 结果类型的每个导入/导出的 C 函数可能会更容易。

* * *

如果我没记错的话，它是 C 函数**参数**列表中`int`大多数基本 C 类型的安全替代方案。但是 CChar 很可能也会对 bool 做同样的（或更好）。您可能想了解可变参数功能，它由.**`,...)``printf`**

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-16T19:13:10.733

如果你使用[hsc2hs](https://downloads.haskell.org/~ghc/master/users-guide/utils.html#writing-haskell-interfaces-to-c-code-hsc2hs)，你可以这样做：

```
#include <stdbool.h>

type CBool = #{type bool}

cFalse, cTrue :: CBool
cFalse = 0
cTrue = 1 
```

您还可以使用[Foreign.Marshall.Utils](https://hackage.haskell.org/package/base-4.9.1.0/docs/Foreign-Marshal-Utils.html#g:3)`toBool`中的and`fromBool`函数在and 之间进行转换。`CBool``Bool`

神奇之处在于`#{type bool}`，它告诉`hsc2hs`您选择与 C 类型大小相同的 Haskell 数字类型`bool`。在我的机器上，结果是`Word8`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-09T01:06:31.333

该`base`库`Foreign.C.Types.CBool`的版本为`4.10.0.0`，对应于`ghc-8.2`.

[https://hackage.haskell.org/package/base-4.10.1.0/docs/Foreign-C-Types.html#t:CBool](https://hackage.haskell.org/package/base-4.10.1.0/docs/Foreign-C-Types.html#t:CBool)**

# sql - 将 Switch 添加到 WHERE 子句

> ID：15368665
> 
> 赞同：0
> 
> 时间：2013-03-12T17:59:26.053
> 
> 标签：sql

我一直在尝试在以下脚本中添加一个开关。
如果`@IgnoreExclusions = 1`那时我不想排除`Controltb_AssocAccounts_ExcludedSurnameDOB`或 中的任何值`Controltb_AssocAccounts_ExcludedDOB`？

我已经包含了我的一项尝试，但我认为这不是很可读，而且我不确定它是否可靠地工作，因为它`NULL`可能是一个排除列表中的一个值。

```
DECLARE @IgnoreExclusions TINYINT = 1;

SELECT  ua.UserAccountKey,          
FROM    #Accounts x 
        INNER JOIN WH.dbo.vw_DimUserAccount ua      
         ON 
         ( --surname and DOB need to match
         x.Surname = ua.Surname AND 
         x.DOB = ua.DOB
         ) 
         AND  
         x.UserAccountKey <> ua.UserAccountKey
WHERE   EXISTS  
          (
          SELECT x.Surname, x.DOB
          EXCEPT
          SELECT ExcludedSurname,ExcludedDOB 
          FROM   WH.dbo.Controltb_AssocAccounts_ExcludedSurnameDOB
          )
        AND
        EXISTS
          (
          SELECT x.DOB
              --SELECT CASE WHEN @IgnoreExclusions = 1 THEN NULL ELSE x.DOB END --<<<<ATTEMPT
          EXCEPT 
          SELECT ExcludedDOB 
          FROM   WH.dbo.Controltb_AssocAccounts_ExcludedDOB
        )   
GROUP BY    ua.UserAccountKey; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:08:11.107

我不确定您使用的是哪种 SQL 变体，但一个简单的`OR`子句就不能解决问题吗？

```
DECLARE @IgnoreExclusions TINYINT = 1;

SELECT  ua.UserAccountKey,          
FROM    #Accounts x 
    INNER JOIN WH.dbo.vw_DimUserAccount ua      
        ON x.Surname = ua.Surname
            AND x.DOB = ua.DOB
            AND x.UserAccountKey <> ua.UserAccountKey
WHERE EXISTS  
    (
        SELECT x.Surname, x.DOB
        EXCEPT
        SELECT ExcludedSurname,ExcludedDOB 
        FROM   WH.dbo.Controltb_AssocAccounts_ExcludedSurnameDOB
    )
    AND 
    (
        @IgnoreExclusions = 1 OR EXISTS
        (
              SELECT x.DOB
              EXCEPT 
              SELECT ExcludedDOB 
              FROM   WH.dbo.Controltb_AssocAccounts_ExcludedDOB
        )
    )
GROUP BY ua.UserAccountKey; 
```

# jquery - 从 iOS 的选择框中删除选项值

> ID：15368669
> 
> 赞同：1
> 
> 时间：2013-03-12T17:59:43.287
> 
> 标签：jquery, ios, wordpress, option

这个脚本不起作用，当我在 iPhone 上查看时，我仍然可以在我的选择菜单中看到它

```
<nav class="primary">
        <select class="select-menu" style="">
    <option value="#">Navigate to...</option>
    <option value="http://www.mphclub.com/">&nbsp;Home</option>
    <option value="http://www.mphclub.com/exotic-car-rental">&nbsp;Fleet</option>
    <option value="javascript:void(0)">&nbsp;–&lt;/option>
    <option value="http://www.mphclub.com/mercedes-benz-cls-amg">&nbsp;–Mercedes Benz CLS 6.3 AMG</option>
    <option value="http://mphclub.com/mercedes-benz-cls-amg">&nbsp;– </option>
</select>
</nav> 
```

和....

```
 <script type="text/javascript">
jQuery(function($) { 
$(".select-menu option[value='http://mphclub.com/mercedes-benz-cls-amg']").remove();});</script> 
```

额外的标签在主站点上不可见，但是当您在 iphone 上查看它时，您可以将所有链接视为值选项。

这必须以某种方式影响它

```
(function($){
$.fn.mobileMenu = function(options) {

 var defaults = {
   defaultText: 'Navigate to...',
   className: 'select-menu',
   subMenuClass: 'sub-menu',
   subMenuDash: '&ndash;'
  },
  settings = $.extend( defaults, options ),
  el = $(this);

 this.each(function(){
  // ad class to submenu list
  el.find('ul').addClass(settings.subMenuClass);

  // Create base menu
  $('<select />',{
   'class' : settings.className
  }).insertAfter( el );

  // Create default option
  $('<option />', {
   "value"  : '#',
   "text"  : settings.defaultText
  }).appendTo( '.' + settings.className );

  // Create select option from menu
  el.find('a,.separator').each(function(){
   var $this  = $(this),
     optText = $this.text(),
     optSub = $this.parents( '.' + settings.subMenuClass ),
     len   = optSub.length,
     dash;

 // if menu has sub menu
   if( $this.parents('ul').hasClass( settings.subMenuClass ) ) {
   dash = Array( len+1 ).join( settings.subMenuDash );
    optText = dash + optText;

   }

   if($this.is('span')){
    // Now build menu and append it
   $('<optgroup />', {
    "label" : optText,
   }).appendTo( '.' + settings.className );
   }
   else{
    // Now build menu and append it
   $('<option />', {
    "value" : this.href,
    "html" : optText,
    "selected" : (this.href == window.location.href)
   }).appendTo( '.' + settings.className );
   }

  }); // End el.find('a').each

  // Change event on select element
  $('.' + settings.className).change(function(){
   var locations = $(this).val();
   if( locations !== '#' ) {
    window.location.href = $(this).val();
   }
  });
  $('.select-menu').show();

 });
 return this;
};
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:27:51.077

我遇到的问题是选项界面（我发布的最后一行代码）正在调用其中包含“href”的所有值以显示在下拉菜单中。这可以通过将菜单项更改为而不是然后仅使用 css 将 div 更改为链接来解决。感谢一路上帮助过我的每一个人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:33:02.667

确保你引用了 jQuery 库，在你的**head**标签中添加这个：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

上面的所有代码都是正确的。把它放在你的头标签中，在引用 jQuery 的脚本下。

```
<script type="text/javascript">
    jQuery(function($) { 
        $(".select-menu option[value='http://mphclub.com/mercedes-benz-cls-amg']").remove();
    });
</script> 
```

# c++ - 如何实现 std::advance 以更改迭代器类型的行为？

> ID：15368673
> 
> 赞同：9
> 
> 时间：2013-03-12T18:00:04.400
> 
> 标签：c++, implementation, std, stdadvance

我们所知道`std::advance`的如下：

```
template <class InputIterator, class Distance>
void advance (InputIterator& i, Distance n); 
```

**目的**

`i`按`n`元素推进迭代器。

*如果`i`是随机访问迭代器，则该函数使用一次`operator+`or `operator-`，否则，该函数重复使用递增或递减运算符 ( `operator++`or `operator--`)，直到`n`元素被推进。*

* * *

我的问题如下：如何`std::advance`实现以识别是否`it`是随机访问迭代器？它怎么知道它可以使用`operator+`而不是`operator++`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-12T18:04:47.487

通过[`iterator_traits`](http://en.cppreference.com/w/cpp/iterator/iterator_traits)和[标记调度](http://en.cppreference.com/w/cpp/iterator/iterator_tags)：

```
template<class InputIterator, class Distance>
void advance_impl(InputIterator& i, Distance n, std::random_access_iterator_tag) {
  i += n;
}

template<class InputIterator, class Distance>
void advance_impl(InputIterator& i, Distance n, std::bidirectional_iterator_tag) {
  if (n < 0) {
    while (n++) --i;
  } else {
    while (n--) ++i;
  }
}

template<class InputIterator, class Distance>
void advance_impl(InputIterator& i, Distance n, std::input_iterator_tag) {
  assert(n >= 0);
  while (n--) ++i;
}

template<class InputIterator, class Distance>
void advance (InputIterator& i, Distance n) {
  advance_impl(i, n,
    typename std::iterator_traits<InputIterator>::iterator_category());
} 
```

请注意，这`iterator_category`是一种类型（`std::input_iterator_tag`等），因此`iterator_category()`不是函数调用；*它是一个构造该类型的临时纯右值*的表达式。`advance_impl`然后通过正常的重载决议选择适当的重载。这称为*标签调度*。等效地可以写：

```
template<class InputIterator, class Distance>
void advance (InputIterator& i, Distance n) {
  typename std::iterator_traits<InputIterator>::iterator_category the_tag;
  advance_impl(i, n, the_tag);
} 
```

的重载`advance_impl`作为它们的第三个参数接收一个未命名的参数，该参数是它们选择的标记类型的一个实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:04:47.450

我想它可以`std::iterator_traits::iterator_category`用来确定迭代器的类型。

在此基础上，它可以决定如何推进事情。

# php - 阅读受密码保护的页面

> ID：15368678
> 
> 赞同：0
> 
> 时间：2013-03-12T18:00:24.690
> 
> 标签：php, perl, ssl

我正在尝试使用用 php 或 perl 编写的脚本来读取网站的特定 div 元素。

不幸的是，该页面在读取这些特定站点之前请求登录。如我所见，它受 ssl 保护。我不是在寻找一个完整的解决方案，我只需要一个关于告诉脚本登录所需信息（用户+密码）的最佳方法的提示，然后再阅读随后出现的页面的部分源代码。

我不太确定使用 PERL 或 PHP 是否更好，所以我用这两种语言标记了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:05:58.787

[Mojo::UserAgent](http://mojolicio.us/perldoc/Mojo/UserAgent)（见[说明书](http://mojolicio.us/perldoc/Mojolicious/Guides/Cookbook#USER_AGENT)）有一个内置的 cookie jar，如果你安装了[IO::Socket::SSL](https://metacpan.org/module/IO%3a%3aSocket%3a%3aSSL) ，它可以做 SSL 。它有一个[DOM 解析器](http://mojolicio.us/perldoc/Mojo/DOM)，可以轻松使用[CSS3](http://mojolicio.us/perldoc/Mojo/DOM/CSS)选择器来遍历返回的结果。如果这还不够好，整个事情可以使用非阻塞（如果这是你需要的东西）。

Mojo::UserAgent 和上面列出的其他工具是[Mojolicious](http://mojolicio.us)工具套件的一部分。它是一个 Perl 库，我肯定会推荐 Perl 来完成这项任务，因为它是一种比 PHP 更通用的语言。

这是一个非常简单的示例，用于从类 myclass 的 div 内的所有链接中获取文本

```
use Mojo::UserAgent;
my $ua = Mojo::UserAgent->new;

$ua->post( 'http://mysite.com/login' => form => { ... } );
my @link_text =
  $ua->get( 'http://mysite.com/protected/page' )
     ->res
     ->dom('div.myclass a')
     ->text
     ->each; 
```

事实上，运行这个 shell 命令可能足以让你开始（取决于权限）

```
curl -L cpanmin.us | perl - -n  Mojolicious IO::Socket::SSL 
```

# playframework-2.0 - 使用 SCCT 计算代码覆盖率时，配置文件不在 Play Framework 2.0 类路径中

> ID：15368681
> 
> 赞同：3
> 
> 时间：2013-03-12T18:00:36.613
> 
> 标签：playframework-2.0, classpath, code-coverage, sbt, scct

我将 Play Framework 2.0 配置为使用 SCCT 进行覆盖，并且可以使用`play scct:cover`.

但是，我的测试无法读取任何配置文件，因为配置文件不在类路径中。也就是说，我使用类型安全的 ConfigFactory 来加载配置文件，我收到以下错误： `com.typesafe.config.ConfigException$Missing: No configuration setting found for key 'KEY.NAME'`

`play test`并且`play run`工作得很好。

有什么方法可以强制 Play 的 Build.scala 将`conf/`目录添加到类路径中？

我的 plugins.sbt 文件的相关部分如下所示： `resolvers += "Typesafe repository" at "[http://repo.typesafe.com/typesafe/releases/](http://repo.typesafe.com/typesafe/releases/)"`

 `resolvers += Classpaths.typesafeResolver

resolvers += "scct-github-repository" at "[http://mtkopone.github.com/scct/maven-repo](http://mtkopone.github.com/scct/maven-repo)"

addSbtPlugin("reaktor" % "sbt-scct" % "0.2-SNAPSHOT")` 

`addSbtPlugin("play" % "sbt-plugin" % "2.0.4")`

我的 Build.scala 的相关部分如下所示： `lazy val additionalSettings = Defaults.defaultSettings ++ seq(ScctPlugin.instrumentSettings: _*)`

 ````
val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA, settings = additionalSettings).settings(
    testOptions in Test := Nil,
    parallelExecution in test := false
) 
````  `谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:57:15.700

这可能不是特定于 Play 的。scct 插件可能应该在 ScctTest 配置中包含 Test 配置中的资源，就像它对其他类路径元素所做的那样。您可以通过将`conf`目录添加到 scct 的非托管资源目录列表来显式地自己执行此操作：

```
unmanagedResourceDirectories in ScctPlugin.ScctTest <+= baseDirectory( _ / "conf") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-10T21:58:41.920

Mark 的解决方案是正确的，但是我花了一段时间才将他的代码放在正确的位置。对于其他为此苦苦挣扎的人，代码应如下所示：

```
val main = play.Project(appName, appVersion, appDependencies, settings = scct_settings).settings(
    ...
    unmanagedResourceDirectories in ScctPlugin.ScctTest <+= baseDirectory ( _ / "conf")
    ...
) 
````

# java - 没有实际父实体的 JPA 一对多模型

> ID：15368686
> 
> 赞同：2
> 
> 时间：2013-03-12T18:00:49.467
> 
> 标签：java, jpa, ehcache

我有一个问题，我有许多具有`PersonID`( `PID`) 列的表。

我想使用一对多集合`PID`作为外键将这些实体挂在父实体上，并使用 EhCache 进行缓存。`JPA`

听起来很简单，问题是我没有父实体！我没有父母的原因是我们正在编写一个报告应用程序，而这`PID`是我们用来写笔记的东西。

我并不是真的想创建一个新表，而只是存储一个`PID`用于`JPA`EhCache 配置的目的。

我想知道我是否可以模仿一个实体或类似的东西，但是对于所有的搜索，我都在画一个空白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:55:15.510

没有“虚拟”实体或类似的东西，所以你不能单独在 Hibernate 中做你想要的。

我建议尽管简单地在代码中执行它，在`Person`两个查询之上的抽象层（基本上是类的 DAO）中，例如：

```
private static Person lookupPerson(Session s, int pid) {
    List<Note> notes = s.createCriteria(Note.class).add(Restrictions.eq("pid", pid)).list();
    List<Event> events = s.createCriteria(Event.class).add(Restrictions.eq("pid", pid)).list();

    Person p = new Person(notes, events);
    return p;
}

private static Person savePerson(Session s, Person p) {
    for (Note note : p.getNotes()) {
        s.saveOrUpdate(note);
    } 

    for (Event event : p.getEvents()) {
        s.saveOrUpdate(event);
    } 
} 
```

# css - css 图像未显示在 Internet Explorer 上

> ID：15368687
> 
> 赞同：0
> 
> 时间：2013-03-12T18:00:52.870
> 
> 标签：css

css 图像未显示在 Internet Explorer 上

图像在 Chrome 和 Firefox 中显示，但我不知道为什么它没有在 Internet Explorer 中显示。也许是CSS问题？请帮我解决这个问题。

这是完整的html页面

```
<style>
body
{
background-image:url('gradient2.jpg');
background-repeat:repeat-x;
}
</style>

    <style>
    .shadow1 {
    margin: 7px;
    background-color: rgb(68,68,68); /* Needed for IEs */

    -moz-box-shadow: 5px 5px 5px rgba(68,68,68,0.6);
    -webkit-box-shadow: 5px 5px 5px rgba(68,68,68,0.6);
    box-shadow: 5px 5px 5px rgba(68,68,68,0.6);

    filter: progid:DXImageTransform.Microsoft.Blur(PixelRadius=3,MakeShadow=true,ShadowOpacity=0.30);
    -ms-filter: "progid:DXImageTransform.Microsoft.Blur(PixelRadius=3,MakeShadow=true,ShadowOpacity=0.30)";
    zoom: 1;
    }
    .shadow1 .content {
    position: relative; /* This protects the inner element from being blurred */
    padding: 100px;
    background-color: #DDD;
    }
        .style1 {linkcolor: #000000; text-decoration: none; font-weight: bold; font-size: 12; color: #999999; font-family: Tahoma; }

    </style>

    </head>

    <head>
        <style type="text/css">    
            .pg-normal {
                color: black;
                font-weight: normal;
                text-decoration: none;    
                cursor: pointer;    
            }
            .pg-selected {
                color: black;
                font-weight: bold;        
                text-decoration: underline;
                cursor: pointer;
            }
        </style>

        <script type="text/javascript" src="paging.js"></script>
    </head>

 <table id="results">
            <tr>
            </tr>
<tr>
<p class="style1">Latest Actress</p>
<td><a href="actress/wallpaper.php?wallpapers=Sherlyn Chopra" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Sherlyn Chopra/10.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Sherlyn Chopra</p></td>

<td><a href="actress/wallpaper.php?wallpapers=Sherlyn Chopra" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Sherlyn Chopra/1.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Sherlyn Chopra</p></td>

<td><a href="actress/wallpaper.php?wallpapers=Evelyn Sharma" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Evelyn Sharma/2.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Evelyn Sharma</p></td>
      </tr><tr>

<td><a href="actress/wallpaper.php?wallpapers=Kajal Aggarwal" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Kajal Aggarwal/1.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Kajal Aggarwal</p></td>

<td><a href="actress/wallpaper.php?wallpapers=Kainaat Arora" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Kainaat Arora/1.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Kainaat Arora</p></td>

<td><a href="actress/wallpaper.php?wallpapers=Veena Malik" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Veena Malik/8.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Veena Malik</p></td>
      </tr><tr>

<td><a href="actress/wallpaper.php?wallpapers=Sonakshi Sinha" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Sonakshi Sinha/4.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Sonakshi Sinha</p></td>

<td><a href="actress/wallpaper.php?wallpapers=Kareena Kapoor" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Kareena Kapoor/27.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Kareena Kapoor</p></td>

<td><a href="actress/wallpaper.php?wallpapers=Jacqueline Fernandez" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Jacqueline Fernandez/2.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Jacqueline Fernandez</p></td>
      </tr><tr>

<td><a href="actress/wallpaper.php?wallpapers=Deepika Padukone" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Deepika Padukone/1.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Deepika Padukone</p></td>

<td><a href="actress/wallpaper.php?wallpapers=Chitrangda Singh" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Chitrangda Singh/3.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Chitrangda Singh</p></td>

<td><a href="actress/wallpaper.php?wallpapers=Asin" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Asin/1.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Asin</p></td>
      </tr><tr>

<td><a href="actress/wallpaper.php?wallpapers=Ameesha Patel" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Ameesha Patel/1.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Ameesha Patel</p></td>

<td><a href="actress/wallpaper.php?wallpapers=Amrita Rao" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Amrita Rao/1.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Amrita Rao</p></td>

<td><a href="actress/wallpaper.php?wallpapers=Amrita Rao" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Amrita Rao/amritarao-9.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Amrita Rao</p></td>
      </tr><tr>

<td><a href="actress/wallpaper.php?wallpapers=Amrita Rao" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Amrita Rao/amritarao-8.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Amrita Rao</p></td>

<td><a href="actress/wallpaper.php?wallpapers=Amrita Rao" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Amrita Rao/amritarao-7.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Amrita Rao</p></td>

<td><a href="actress/wallpaper.php?wallpapers=Amrita Rao" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Amrita Rao/amritarao-6.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Amrita Rao</p></td>

</tr>
</table>

<div id="pageNavPosition"></div>
 <script type="text/javascript"><!--
        var pager = new Pager('results', 2); 
        pager.init(); 
        pager.showPageNav('pager', 'pageNavPosition'); 
        pager.showPage(1);
    //--></script>

    </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:52:02.043

我看到 2 个结束头标签，没有开始身体标签。我首先首先清理你的html，看看是否有帮助。

IE。

```
<html>
<head>
<style>
body {
    background-image:url('gradient2.jpg');
    background-repeat:repeat-x;
}
.shadow1 {
    margin: 7px;
    background-color: rgb(68,68,68); /* Needed for IEs */

    -moz-box-shadow: 5px 5px 5px rgba(68,68,68,0.6);
    -webkit-box-shadow: 5px 5px 5px rgba(68,68,68,0.6);
    box-shadow: 5px 5px 5px rgba(68,68,68,0.6);

    filter: progid:DXImageTransform.Microsoft.Blur(PixelRadius=3,MakeShadow=true,ShadowOpacity=0.30);
    -ms-filter: "progid:DXImageTransform.Microsoft.Blur(PixelRadius=3,MakeShadow=true,ShadowOpacity=0.30)";
    zoom: 1;
}
.shadow1 .content {
    position: relative; /* This protects the inner element from being blurred */
    padding: 100px;
    background-color: #DDD;
}
.style1 {linkcolor: #000000; text-decoration: none; font-weight: bold; font-size: 12; color: #999999; font-family: Tahoma; }
.pg-normal {
    color: black;
    font-weight: normal;
    text-decoration: none;  
    cursor: pointer;    
}
.pg-selected {
    color: black;
    font-weight: bold;      
    text-decoration: underline;
    cursor: pointer;
}
</style>
<script type="text/javascript" src="paging.js"></script>
</head>
<body>
<table id="results">
<tr></tr>
<tr>
<p class="style1">Latest Actress</p>
<td><a href="actress/wallpaper.php?wallpapers=Sherlyn Chopra" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Sherlyn Chopra/10.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Sherlyn Chopra</p></td>

<td><a href="actress/wallpaper.php?wallpapers=Sherlyn Chopra" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Sherlyn Chopra/1.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Sherlyn Chopra</p></td>

<td><a href="actress/wallpaper.php?wallpapers=Evelyn Sharma" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Evelyn Sharma/2.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Evelyn Sharma</p></td>
      </tr><tr>

<td><a href="actress/wallpaper.php?wallpapers=Kajal Aggarwal" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Kajal Aggarwal/1.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Kajal Aggarwal</p></td>

<td><a href="actress/wallpaper.php?wallpapers=Kainaat Arora" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Kainaat Arora/1.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Kainaat Arora</p></td>

<td><a href="actress/wallpaper.php?wallpapers=Veena Malik" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Veena Malik/8.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Veena Malik</p></td>
      </tr><tr>

<td><a href="actress/wallpaper.php?wallpapers=Sonakshi Sinha" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Sonakshi Sinha/4.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Sonakshi Sinha</p></td>

<td><a href="actress/wallpaper.php?wallpapers=Kareena Kapoor" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Kareena Kapoor/27.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Kareena Kapoor</p></td>

<td><a href="actress/wallpaper.php?wallpapers=Jacqueline Fernandez" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Jacqueline Fernandez/2.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Jacqueline Fernandez</p></td>
      </tr><tr>

<td><a href="actress/wallpaper.php?wallpapers=Deepika Padukone" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Deepika Padukone/1.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Deepika Padukone</p></td>

<td><a href="actress/wallpaper.php?wallpapers=Chitrangda Singh" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Chitrangda Singh/3.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Chitrangda Singh</p></td>

<td><a href="actress/wallpaper.php?wallpapers=Asin" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Asin/1.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Asin</p></td>
      </tr><tr>

<td><a href="actress/wallpaper.php?wallpapers=Ameesha Patel" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Ameesha Patel/1.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Ameesha Patel</p></td>

<td><a href="actress/wallpaper.php?wallpapers=Amrita Rao" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Amrita Rao/1.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Amrita Rao</p></td>

<td><a href="actress/wallpaper.php?wallpapers=Amrita Rao" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Amrita Rao/amritarao-9.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Amrita Rao</p></td>
      </tr><tr>

<td><a href="actress/wallpaper.php?wallpapers=Amrita Rao" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Amrita Rao/amritarao-8.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Amrita Rao</p></td>

<td><a href="actress/wallpaper.php?wallpapers=Amrita Rao" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Amrita Rao/amritarao-7.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Amrita Rao</p></td>

<td><a href="actress/wallpaper.php?wallpapers=Amrita Rao" target="_blank" class="style1"><img class="shadow1" name="field-name" src="actress/Amrita Rao/amritarao-6.jpgthumb.jpeg" width=260 height=172 /><p  class="style1">Amrita Rao</p></td>

</tr>
</table>

<div id="pageNavPosition"></div>
<script type="text/javascript"><!--
        var pager = new Pager('results', 2); 
        pager.init(); 
        pager.showPageNav('pager', 'pageNavPosition'); 
        pager.showPage(1);
//--></script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:29:32.757

此处没有任何内容可以表明会在 Internet Explorer 中触发问题的内容。这对我说，您的代码作为一个整体有问题，在这里翻译得不好。

有几件事可以帮助潜在地解决问题，或者至少让您了解一些变化，以便您能够大踏步地解决问题：

1.  **验证你的代码**许多新手犯的错误很容易通过简单地确保你的代码是正确的来修复。[W3C 提供了一个很好的验证器工具](http://validator.w3.org/)来帮助解决问题。
2.  **确保 DOCTYPE 声明之前没有任何内容**一旦您的代码通过了 W3C 的验证，请确保您在 DOCTYPE 声明之前没有任何内容。如果这样做，它会将 Internet Explorer 置于所谓的 Quirks 模式，这将使它以非标准且不可预测的方式呈现事物。

如果它仍然不起作用，那么您需要向我们提供指向您网站的链接，以便我们可以看到您的代码整体上发生了什么。

# java - 将节点插入二叉搜索树

> ID：15368688
> 
> 赞同：0
> 
> 时间：2013-03-12T18:00:57.233
> 
> 标签：java, binary-search-tree

几天来，我一直在研究二叉搜索树的实现，现在我知道我的根是通过使用我的“插入（）”来填充的（我在调试时可以看到这一点，使用 Eclipse）。为什么我的其他节点不会添加到树中？

这是我的 BST 课程：

```
package binarySearchTree;

public class BinarySearchTree<T extends Comparable<T>> {

@SuppressWarnings("hiding")
private class BinarySearchTreeNode<T>{
    public BinarySearchTreeNode left, right;
    private T data; //LINE 8

    private BinarySearchTreeNode (T data,BinarySearchTreeNode left, BinarySearchTreeNode right ) {
        this.left = left;
        this.right = right;
        this.data = data;
    }
}
private BinarySearchTreeNode<T> root;

@SuppressWarnings("unused")
private T search(T target, BinarySearchTreeNode<T> ptr) {
    //find target in subtree A ptr
    if (root == null || ptr == null) {
        return root; //target is not in tree
    }
    int compare = target.compareTo(ptr.data); //compareTo(ptr.data);
    if (compare == 0) {
        return ptr.data; //target is found
    }
    if (compare < 0) {
        return search(target, ptr.left);
    }
    if (compare > 0) {
        return search(target, ptr.right);
    }
    return target;
}
public T search(T target) {
    return search(target);
}
public boolean isEmpty() {
    return root == null;
} 
/* To insert a data into a BST, 1st search for the data, 
 * if the data is found = duplicate data error
 * if the data is NOT found = a null pointer
 * Make this null pointer point to a NewNode holding data
 * new values go into the BST as leaves
 * Using public boolean insert (T node) & 
 * private boolean insert (T Node, BSTNode<T> ptr) as a recursive method
 */
@SuppressWarnings("unchecked")
private boolean insert(T value, BinarySearchTreeNode<T> ptr) {
    //T data = null;
    //insert data in a child of ptr, return false if duplicate is found
    //Precondition: ptr must not be null
    int compare = value.compareTo(ptr.data); //LINE 55
    if (compare == 0) {
        return false;
    }
    if (compare < 0) {
        if (ptr.left == null) {
            //found insertion point
            BinarySearchTreeNode<T> node = new BinarySearchTreeNode<>(value, null, null);
            ptr.left.data = node; //insert data in new node
            return true;
        } 
    } else {
        return insert(value, ptr.left); //LINE 67
    }
    if (compare > 0) {
        if (ptr.right == null) {
            BinarySearchTreeNode<T> node = new BinarySearchTreeNode<>(value, null, null);
            ptr.right.data = node;
            return true;
        } else {
            return insert(value, ptr.right);                    
        }
    }
    return false;
}
public boolean insert(T value) {     
    if (isEmpty()) {              
        root = new BinarySearchTreeNode<T>(value, null, null);  
        return true;  
    }
    return insert(value, root); // LINE 85  
} 
} 
```

这是我的 Main()，最终我想在控制台中打印 BST 的值，但首先我知道它们需要添加到树中：

```
package binarySearchTree; 
```

公共类主要{

```
public static void main(String[] args) {

    BinarySearchTree<String> bstStrings = new BinarySearchTree<String>();

    String s = "Hello";
    String s1 = "World";
    //String s2 = "This Morning";

    bstStrings.insert(s);
    bstStrings.insert(s1); //LINE 15
    //bstStrings.insert(s2);

    while (true){
        if (!bstStrings.isEmpty()){
            System.out.println(bstStrings + " ");
        }
        System.out.println();
        System.out.println("You should have values above this line!");break;
    }   
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:05:37.463

你`root`应该是`BinarySearchTree<T>`而不是`T`
因此你没有将值存储在根的子树中。
替换这个
`return insert((T) value, node);`
：
`return insert((T) value, root);`

在您的代码中替换如下：

```
public boolean insert(T value) {     
    if (isEmpty()) {              
        root = new BinarySearchTreeNode((T) value, null, null);  
        return true;  
    }
    return insert((T) value, root); // start recursion  
} 
```

否则你没有一棵树并且节点没有相互链接

**更新：**
你得到了 NPE，因为你`insert`在第一个比较中传入了 root 的左孩子，即`null`.
你不应该返回`boolean`但是`BinarySearchTreeNode`。
你的方法应该是：

```
@SuppressWarnings("unchecked")
private BinarySearchTreeNode<T> insert(T value, BinarySearchTreeNode<T> ptr) {  
   if(ptr == null){  
        ptr = new BinarySearchTreeNode<T>(value,null,null);  
        return ptr;  
    }  
    //your code next but return the `ptr`  
} 
```

然后在插入中你应该这样做：

```
public void insert(T value) {     

    root = insert(value, root); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:06:35.747

第一次插入后，您创建新节点，但不对它们做任何事情。

# delphi - 如何打开在应用程序图标上拖放的所有文件？

> ID：15368693
> 
> 赞同：0
> 
> 时间：2013-03-12T18:01:14.053
> 
> 标签：delphi, file-io, drag-and-drop, multiple-instances

我知道如何以这种方式打开一个文件，以及如何获取在我的应用程序的 EXE 或快捷方式上拖放的文件数量。

但是，如何运行多个应用程序实例，每个文件一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T18:23:49.890

我把它放在我的 .dpr 文件代码的开头：

```
if ParamCount>1 then
begin
  for i := 1 to ParamCount do
    ShellExecute(0, nil, PChar(ParamStr(0)), PChar('"'+ParamStr(i)+'"'), 
        nil, SW_SHOWDEFAULT);
  exit;
end; 
```

这将检查是否有多个命令行参数。如果是这样，那么每个都被移交给一个新进程，并且这个进程终止。

我想你可以把论点 2 交给 N，让这个过程处理论点 1。但是，由于具有数学性质，这个版本的对称性对我很有吸引力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T18:26:46.103

至于作为参数传递的 droppend 文件，可以为传递的每个参数运行一个新的应用程序实例。
在下面显示的示例中，第一个参数将由在资源管理器中通过 Drog&Drop 启动的应用程序处理，应用程序的新实例将针对任何附加参数运行。

```
program Project1;

uses
  Forms, Shellapi,Messages,Windows,
  Unit2 in 'Unit2.pas' {Form2};

{$R *.res}
var
i:Integer;
begin
  for I := 2 to Paramcount  do
      ShellExecute(0,'OPEN',PChar(Paramstr(0)),PChar(Paramstr(i)),'',sw_Show);
  Application.Initialize;
  Application.MainFormOnTaskbar := True;
  Application.CreateForm(TForm2, Form2);
  Application.Run;
end. 
```

Form2 中代码的最简单示例可以通过

```
procedure TForm2.FormCreate(Sender: TObject);
begin
  Caption := ParamStr(1); 
  // whatever should be done with the dropped file
end; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T18:33:19.873

放置在您的应用程序图标或快捷方式上的每个文件都将是一个命令行参数。您可以轻松地遍历它们：

```
var
  i: integer;
begin
  for i := 1 to ParamCount do
    Memo1.Lines.Add(ParamStr(i));
end; 
```

因此，对于每一个，您都可以在您的应用程序中打开一个单独的表单（例如，在您的主表单的 OnCreate 中），或者您也可以在正常启动代码之前在从项目 (.dpr) 文件调用的例程中对此进行编码并启动其他每个应用程序的实例（为您正在执行此操作的实例保存一个）。

例如，在上面的循环中，您可以使用 ShellExecute 或 CreateProcess 来启动您自己的实例，并将 ParamStr(i) 作为该实例的单个参数。

# java - 为什么我的 findViewById() 找不到我在 xml 代码中引入的 ID？

> ID：15368694
> 
> 赞同：0
> 
> 时间：2013-03-12T18:01:18.123
> 
> 标签：java, android, eclipse

我对 Android 应用程序开发非常陌生。但在我的第一个项目中，我遇到了一个错误。我`findViewById()`没有找到`Id`已在 xml 代码中引入的。

这是我的Java代码：

```
package com.example.fuzzylogic;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {
int counter;
Button add, sub;
TextView display;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        counter = 0;
        add = (Button) findViewById(R.id.bAdd);
        sub = (Button) findViewById(R.id.bSubtract);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
} 
```

这是我的xml代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<TextView
    android:id="@+id/tvDisplay"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:text="Your total is 0"
    android:textSize="45dp" />

<Button
    android:id="@+id/bAdd"
    android:layout_width="250dp"
    android:layout_height="wrap_content"
    android:layout_below="@+id/tvDisplay"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="20dp"
    android:text="add one"
    android:textSize="25dp" />

<Button
    android:id="@+id/bSubtract"
    android:layout_width="250dp"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/bAdd"
    android:layout_below="@+id/bAdd"
    android:layout_marginTop="23dp"
    android:text="substract one"
    android:textSize="25dp" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:04:36.057

> 我的 findViewById() 没有找到 xml 代码中引入的 Id。

所以这可能会导致：

*   XML 文件中的错误，然后`R.java`未正确生成
*   您没有保存所有编辑的 xml 文件（ctrl+s）

因此，请确保您的项目中没有错误，并清理并重建您的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:15:21.480

首先，您必须保存 xml 文件并重新构建它

当您添加新文件或更改资源文件时，您最好重建项目，它将根据您所做的更改修改您的 R.java 文件

并且`findViewById()`我们传递的 id 不是您的布局 xml 文件中的 id。实际上它是 R.java 文件中资源对象的整数表示

注意：如果您使用的是 eclipse，请选择自动构建选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-04T06:57:31.813

我遇到了同样的问题，我遇到问题的原因是 R 类没有使用我添加的新 Xml 文件资源进行更新。所以我重建了这个项目，然后问题就解决了。

所以重建项目可能会有所帮助。

# file - 如何使用 vm、磁盘和本地文件副本正确处理到 Azure 云的灾难恢复

> ID：15368696
> 
> 赞同：0
> 
> 时间：2013-03-12T18:01:21.417
> 
> 标签：file, azure, copy, virtual-machine, disk

我有一个问题，希望你能帮助我。以下是我想使用 Azure 创建的场景。你能否让我知道这是否可行，以及我将如何去做？

**设想：**

• 创建一个虚拟机——我已经完成了。

•添加空磁盘、格式化、创建卷等。

•现在，我希望在这个磁盘上有一个区域，我将从本地网络复制数据到该区域。这将在本地基础架构发生故障时作为备份完成。

这背后的想法是让虚拟机始终拥有重要本地文件的最新副本，以及已安装的应用程序，允许我们的用户在本地服务中断时远程访问此虚拟机。

我有虚拟机、存储容器、已挂载、格式化并在我的 vm 上可用的空磁盘，但我现在该怎么做才能让一个区域（或整个驱动器）可用于本地本地文件复制？我正在评估 CloudBerryLab 的备份应用程序，但是当我使用它时，我似乎只能将我的文件副本发送到一个不是磁盘驱动器的存储区域——因此，它没有连接到虚拟机。

那么，我不了解如何正确处理这种情况吗？应该使用什么工具来实现这一点，或者 Azure 中是否有更好的架构来处理这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T21:34:58.203

如果您有当前版本的本地 Windows Server，则只需注册 Azure 备份。与其让虚拟机保持运行并支付计算时间和存储费用，不如等待并仅在需要时启动它。从 Azure 备份还原到 VM 的速度非常快。拥有 Windows Azure 帐户后，您将能够看到备份选项。进行设置，然后您可以将代理下载到您的 Windows Server 并设置备份。需要 SSL 证书。

# regex - 此正则表达式应涵盖哪些字符

> ID：15368698
> 
> 赞同：-2
> 
> 时间：2013-03-12T18:01:27.673
> 
> 标签：regex

```
\\s*[\\-]?[\\d]{1,3}\\s+[\\-]?[\\d]{1,3}\\s+[\\-]?[\\d]{1,3}\\s+[\\-]?[\\d]{1,3}\\s* 
```

我有这个正则表达式来获取 4 个整数坐标（正或负）。你能建议这个正则表达式中的任何错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:06:58.223

如果它是 Java 正则表达式，那么匹配包含 -999 和 999 之间的四个整数（以空格分隔）的字符串是正确的。但是，它非常难看，并且可以简化很多：

```
\\s*(?:-?\\d{1,3}\\s+){3}-?\\d{1,3}\\s* 
```

如果它不是 Java，那么您一次只需要一个反斜杠（但您可能需要其他语法，具体取决于您的语言）。

# c# - 没有序列化的深度复制数组c#

> ID：15368699
> 
> 赞同：3
> 
> 时间：2013-03-12T18:01:30.793
> 
> 标签：c#, arrays, deep-copy, minmax

基本上我的问题是我的`MinMax`算法并没有真正按预期工作。

我需要的是**让我的数组片段被复制到`newPieces`**，这样`pieces`就不会改变`newPieces`。

这是`MinMax`算法的摘录：

```
private int MinMax(
    int depth, Piece[] pieces, bool blacksTurn, 
    List<Move> Moves, Game game, int alpha, Move nextMove) {

    Piece[] newPieces=new Piece[24];
    Moves=Game.possibleMoves(pieces, blacksTurn, false);
    if(depth==0||Moves.Count==0) {
        return Evaluation(ref pieces);
    }

    int value;

    if(blacksTurn==true) {
        foreach(Move i in Moves) {
            newPieces=DeepCopy.ObjectExtensions.Copy(pieces);
            game.MovePiece(newPieces, blacksTurn, i.Moving, i.Destination, true);
            game.DisplayBoard(pieces);
            value=minMax(depth-1, newPieces, !blacksTurn, Moves, game, alpha, nextMove);

            if(alpha>value) {
                alpha=value;
                nextMove=i;
            }

    // ... 
```

这是 Piece 类。

```
[StructLayout(LayoutKind.Sequential)]
public class Piece
{

    public CellReference Location;
    public bool isBlack { get; set; }
    public bool isKing { get; set; }
    private int Value { get; set; }
    public bool taken { get; set; }

    public Piece()
    {

    }

    public Piece(int i, bool isBlack, bool isKing, int CellsEast, int CellsNorth, bool taken)
    {
        this.Value = i;
        Location.CellsEast = CellsEast;
        Location.CellsNorth = CellsNorth;
        this.isBlack = isBlack;
        this.isKing = isKing;
        this.taken = taken;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:12:45.603

我会在课堂上实施。~~[`ICloneable`](http://msdn.microsoft.com/en-us/library/system.icloneable.aspx)~~ `ICloneable<T>``Piece`

```
public interface ICloneable<T>
{
    T Clone();
} 
```

`pieces.Select(p => p.Clone()).ToArray();`或者只是使用一个`foreach`循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:07:36.423

将此属性添加到类/结构中`Piece`：

```
using System.Runtime.InteropServices; 
```

```
[StructLayout(LayoutKind.Sequential)]
public class Piece { 
```

代码如下

```
namespace DeepCopy {
    public static class ObjectExtensions {
        public static T[] Copy<T>(this T[] pieces) {
            return pieces.Select(x => {
                var handle=Marshal.AllocHGlobal(Marshal.SizeOf(typeof(T)));

                try {
                    Marshal.StructureToPtr(x, handle, false);
                    return (T)Marshal.PtrToStructure(handle, typeof(T));
                }
                finally {
                    Marshal.FreeHGlobal(handle);
                }
            }).ToArray();
        }
    }
} 
```

我临时修改`Piece.Value`为公开测试，并用测试类测试过

```
public static partial class TestClass {
    public static void TestDeepCopy(Piece[] pieces) {
        Piece[] newPieces=new Piece[24];

        newPieces=DeepCopy.ObjectExtensions.Copy(pieces);

        newPieces[0].isKing=true;
        newPieces[0].Value=3;

        newPieces[1].isKing=true;
        newPieces[1].taken=true;
        newPieces[1].Value=4;

        Console.WriteLine("=== newPieces ===");
        foreach(var x in newPieces)
            Console.WriteLine(
                "x.isKing={0}; x.isBlack={1}; x.Value={2}",
                x.isKing, x.isBlack, x.Value
                );

        Console.WriteLine();
        Console.WriteLine("=== pieces ===");
        foreach(var x in pieces)
            Console.WriteLine(
                "x.isKing={0}; x.isBlack={1}; x.Value={2}",
                x.isKing, x.isBlack, x.Value
                );
    }

    public static void StartTest() {
        var pieceA=new Piece(1, false, false, 1, 1, false);
        var pieceB=new Piece(2, true, false, 1, 1, false);
        var pieces=new[] { pieceA, pieceB };
        TestDeepCopy(pieces);
    }
} 
```

它有效。要执行测试，请致电

```
TestClass.StartTest(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T18:20:04.467

我认为[这](http://ludwigstuyck.wordpress.com/2010/03/03/clone-objects/)可能有助于解决您的问题。它使用 ICloneable 接口让对象知道如何克隆自己。

# javascript - 带有jQuery的背景图像旋转器？

> ID：15368704
> 
> 赞同：1
> 
> 时间：2013-03-12T18:01:51.760
> 
> 标签：javascript, jquery, html, css

我在一个网站上工作，背景图像会从一个渐变到另一个，我已经设置并工作了大约 98%。只有一个小问题。当它第一次加载并首先淡入淡出时，它会淡入白色，然后淡入图像，而不是直接淡入下一个图像。之后它工作得很好。这是使用 jQuery 1.9 并且我有 jQuery noConflict，因为以前的开发人员使用 MooTools 编写了站点菜单。

```
<html>
<head>
  <script src="js/jquery.js">
  </script>
  <script>
var $s = jQuery.noConflict();

function swapImages(){
  var $sactive = $s('#myGallery .active');
  var $snext = ($s('#myGallery .active').next().length > 0) ? $s('#myGallery .active').next() : $s('#myGallery img:first');

  $snext.fadeIn(1500).addClass('active');
  $sactive.fadeOut(2000, function(){
  });
  $sactive.removeClass('active');
};

$s(document).ready(function(){
  // Run our swapImages() function every 5secs
  setInterval('swapImages()', 5000);

});
</script>
</head>
<style>

 #myGallery{
   position:relative;
   width:100%; /* Set your image width */
   height:auto; /* Set your image height */
 }

 #myGallery img{
   display:none;
   position:absolute;
   top:0;
   width: 100%;
   left:0;
 }

 #myGallery img.active{
   display:block;
 }

 .home-page-rotator{
   position:absolute;
   width:100%;
   z-index:-10;
 }
</style>
<body>
<div class="home-page-rotator" id="myGallery">
 <img src="images/1.jpg" class="active" />
 <img src="images/2.jpg" />
 <img src="images/3.jpg" />
</div>
</body>
</html> 
```

我取出了所有内容，以便您可以测试是否需要，但这是运行背景旋转和淡入淡出的所有内容。此外，我将 CSS 放在一个单独的文件中，但为了发布到这里，我只是将它内联，这样您就可以看到代码背后的 CSS。让我知道我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:25:44.410

将删除类方法移动到淡出的函数调用似乎对我来说效果更好（至少在 Chrome 中）：

```
<script>
    var $s = jQuery.noConflict();

    function swapImages(){
      var $sactive = $s('#myGallery .active');
      var $snext = ($s('#myGallery .active').next().length > 0) ? $s('#myGallery .active').next() : $s('#myGallery img:first');

      $sactive.fadeOut(2000, function(){
          $sactive.removeClass('active');
      });
      $snext.fadeIn(1500).addClass('active');
    };

    $s(document).ready(function(){
      // Run our swapImages() function every 5secs
      setInterval('swapImages()', 5000);

    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:36:59.113

不久前我遇到了这个问题，我发现最简单的解决方案是从 img 元素切换到使用两个 div 和 background-image css url 来显示你的图像。不久前我做了一个简单的滑块。欢迎您从中复制您需要的任何内容。

[背景滑块源](https://github.com/smithcyr/jQuerySlider/blob/master/jQuerySlider.js)

本质上，如果您有两个绝对定位为背景元素的 div，您可以循环它们的 z-index 并将它们淡入和淡出。此外，您可以在构造的 img 元素中加载下一个图像，一旦加载，更改隐藏 div 的背景图像并淡入淡出。这意味着没有显示加载，您可以直接淡入幻灯片。

下面是一些伪代码，但只看源代码中的真实函数可能会更容易。

```
base.next_slide = function () {
    "current slide" = "next slide";
    base.containers[the_shown_container].fadeOut(duration,function () {
      $(this).css({'background-image':'url("' + "Next image url" + '")',
                   "z-index":"-2"});
      base.containers[the_next_container].css("z-index","-1");
      $(this).show();
      the_shown_container = the_next_container;
    });
  };

Plugin.prototype.init = function (base) {
  $('<img/>').attr('src', "Next image url").load(function() {
    base.containers[the_next_container].css('background-image', 'url(' + "Next image url" + ')');
    if ("there's only one image in the slider"){
      base.containers[the_shown_container].fadeOut(duration,function () {
        $(this).css("z-index","-2");
        base.containers[the_next_container].css("z-index","-1");
      });
      return;
    }
    base.next_slide();
    setInterval(base.next_slide ,base.o.interval);
  });
}; 
```

# java - 从旧坐标和 x 和 y 计算新坐标

> ID：15368717
> 
> 赞同：7
> 
> 时间：2013-03-12T18:02:24.953
> 
> 标签：java, math, coordinates

我在现实生活中有以下项目设置：

![我的设置](../Images/f1a1177405bd4b0bed0c7cbea28f5613.png)

雷达是静态的，这意味着它始终具有相同的位置。-item`A`可以移动，它的位置可以是任何东西。从雷达上，我可以读取与雷达相关的`x`和`y`坐标`A`。我编写了以下类来描述每个项目的位置：

```
public class Position {
    public enum Direction {
        EAST, WEST, NORTH, SOUTH
    };

    public final Direction latitudeDirection, longitudeDirection;
    public final float latitude, longitude, altitude;

    public Position(Direction latitudeDirection, Direction longitudeDirection,
            float latitude, float longitude, float altitude) {
        this.latitudeDirection = latitudeDirection;
        this.longitudeDirection = longitudeDirection;
        this.latitude = latitude;
        this.longitude = longitude;
        this.altitude = altitude;
    }

    public Position(float radarX, float radarY) {
        // TODO: Implement the question here
        this.altitude = Config.RADAR_POSITION.altitude;
    }

}

class Config {
    // Position of the radar
    public static final Position RADAR_POSITION = new Position(
            Position.Direction.NORTH, // Latitude direction
            Position.Direction.EAST, // Longitude direction
            55.0f, // Latitude
            13.0f, // Longitude
            60.0f); // Altitude

    // Facing direction of the radar in degrees. 0° is north, advancing
    // clockwise.
    public static final float RADAR_FACING_DIRECTION = 10.0f;
} 
```

现在给定雷达的地理坐标，相对于雷达的`x`和`y`坐标`A`以及雷达相对于北方的朝向，如何计算 的绝对地理坐标`A`？

地球的曲率不是问题，因为最大值`x`和/或`y`不能超过几百米。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:37:39.700

例如，您可以使用三角函数创建三角形来查找 A 的坐标：

![使用三角函数的示例](../Images/b6e2cbf0cb5aeb9761d68e07b80af79b.png)

在这种情况下，Ax = (y)(cos 10) - (x)(cos 80)，您可以类似地计算出 Ay。

这样，您永远不会被困在度数中，您只是在以米为单位工作。

强大的解决方案是 Vishal 在 OP 中的评论，该评论是在我绘图和扫描时发布的：

```
xnew = x * cos(theta) - y * sin(theta); 
ynew = x * sin(theta) + y * cos(theta); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T18:39:45.053

一般来说，您可以使用以下步骤：

1.  将您的雷达位置（纬度、经度、高度）转换为公制地心地心固定 xyz 系统 (ECEF)
2.  然后，您可以在这个公制系统中使用/组合描述雷达旋转和物体位置的任何旋转和平移参数/矩阵
3.  将新获取的 xzy 坐标反向变换为 lat/lon/h

这种转换有很多资源，检查一下，例如：[http ://www.gmat.unsw.edu.au/snap/gps/clynch_pdfs/coordcvt.pdf](http://www.gmat.unsw.edu.au/snap/gps/clynch_pdfs/coordcvt.pdf)

如果需要，您还可以引入场景坐标系 (ENU)。这是一个很好的概述，描述了 UTM、ECEF、ENU 和大地坐标（Lat/lon/h）的关系： [http ://www.dirsig.org/docs/new/coordinates.html](http://www.dirsig.org/docs/new/coordinates.html)

如果您需要 ECEF 与 Geodetic 转换的示例代码，请查看 matlab 代码[http://www.mathworks.de/de/help/map/ref/ecef2geodetic.html](http://www.mathworks.de/de/help/map/ref/ecef2geodetic.html)或使用 GDAL 之类的库（[http://www.gdal.org/](http://www.gdal.org/)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T14:27:40.727

最后我解决了。代码附在下面。由于 Samuel Edwin Ward 的回答给了我灵感，我会接受他的回答。

```
public Position(float radarX, float radarY) {

    // Convert A's position to distance and bearing in relation to the North 
    double objDistance = (Math.hypot(radarX, radarY) / 6367500 /* Mean earth radius */);
    double objBearing = (Math.atan2(radarY, radarX) + Math.toRadians(Config.RADAR_BEARING));

    // Convert the Radar's geographic coordinates to radians
    double latitudeRadar = Math.toRadians(Config.RADAR_POSITION.latitude);
    double longitudeRadar = Math.toRadians(Config.RADAR_POSITION.longitude);

    // Calculate A's geographic coordinates in radians
    double latitudeObject = Math.asin(Math.sin(latitudeRadar)*Math.cos(objDistance) + 
            Math.cos(latitudeRadar)*Math.sin(objDistance)*Math.cos(objBearing));
    double longitudeObject = longitudeRadar + Math.atan2(Math.sin(objBearing)*Math.sin(objDistance)*Math.cos(latitudeRadar), 
            Math.cos(objDistance)-Math.sin(latitudeRadar)*Math.sin(latitudeObject));

    // Normalize to -180 ... +180 degrees
    longitudeObject = (longitudeObject+3*Math.PI) % (2*Math.PI) - Math.PI;  

    // Set the A's coordinates in degrees
    this.latitude = (float) Math.toDegrees(latitudeObject);
    this.longitude = (float) Math.toDegrees(longitudeObject);

    // Set the rest of the arguments
    this.latitudeDirection = Config.RADAR_POSITION.latitudeDirection;
    this.longitudeDirection = Config.RADAR_POSITION.longitudeDirection;
    this.altitude = Config.RADAR_POSITION.altitude;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T18:41:27.833

这对转换有帮助吗？ [http://en.wikipedia.org/wiki/Geodetic_system#From_geodetic_to_ECEF](http://en.wikipedia.org/wiki/Geodetic_system#From_geodetic_to_ECEF)？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T18:22:02.567

我认为应该可以这样做：将`x`和`y`坐标转换为极坐标`r`和`theta`，（以雷达为原点）。减去雷达的旋转，并转换回笛卡尔坐标。然后你只需要转换为纬度和经度并添加雷达的坐标。

```
double r = Math.hypot(radarX, radarY);
double theta = Math.atan2(radarY, radarX);
theta -= Math.toRadians(Config.RADAR_FACING_DIRECTION);
float x = (float) r * Math.cos(theta);
float y = (float) r * Math.sin(theta);
longitude = metersToLongitude(Config.RADAR_POSITION, y) + Config.RADAR_POSITION.longitude;
latitude = metersToLatitude(Config.RADAR_POSITION, x) + Config.RADAR_POSITION.latitude; 
```

我在维基百科上找到了纬度和经度长度的公式。纬度在任何地方都相同，但在两极附近经度变小。

```
static float metersToLatitude(Position near, float meters) {
    return meters / 110.6*1000;
}

static float metersToLongitude(Position near, float meters) {
    float lat = Math.toRadians(near.latitude);
    return meters /
        (111132.954 - 559.822 * Math.cos(2*lat) + 1.175 * Math.cos(4*lat));
} 
```

不幸的是，这似乎不起作用，我不知道为什么。

如果您想以东/西/北/南的正度数表示您的坐标，您还必须检查它们是否为负数，并在这种情况下反转它们和方向。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T18:21:24.653

您将雷达本地系统中的所有坐标旋转 -10°，然后只需将雷达的 x/y 坐标添加到 A 对象坐标即可。

# python - 如何让 setup.py 安装不同的模块

> ID：15368725
> 
> 赞同：0
> 
> 时间：2013-03-12T18:03:04.567
> 
> 标签：python, python-2.7, package, setuptools

我想使用`distutils`( `setup.py`) 来安装 python 包（来自本地存储库），这需要来自不同本地存储库的另一个包。由于我缺乏该`setup`命令的体面文档（我只在 [此处](http://pythonhosted.org/an_example_pypi_project/setuptools.html)和[此处](http://docs.python.org/2.7/distutils/examples.html)`setup`找到了一些示例，被-terms 混淆`extras_require`，`install_require`并`dependency_links`在[此处](https://stackoverflow.com/questions/10572603/specifying-optional-dependencies-in-pypi-python-setup-py)和[此处](https://stackoverflow.com/questions/3472430/how-can-i-make-setuptools-install-a-package-thats-not-on-pypi)找到），是否有人有完整的`setup.py`文件来说明如何处理此问题，即`distutils`处理安装在某些 SVN 存储库中找到的一个包，当我现在安装的主包需要它时？

更详细的解释：我有两个本地 svn（或 git）存储库`basicmodule` 和`extendedmodule`. 现在我结帐`extendedmodule`并运行`python setup.py install`. 该`setup.py`文件知道`extendedmodule`需要`basicmodule`，并自动从存储库下载并安装它（以防它尚未安装）。我该如何解决这个问题`setup.py`？或者也许还有另一种更好的方法来做到这一点？

* * *

**编辑：后续问题**

根据汤姆的回答，我尝试使用`setup.py`如下：

```
from setuptools import setup
setup(
    name = "extralibs",
    version = "0.0.2",
    description = ("Some extra libs."),
    packages=['extralib'],
    install_requires = "basiclib==1.9dev-r1234",
    dependency_links = ["https://source.company.xy/svn/MainDir/SVNDir/basiclib/trunk@20479#egg=basiclib-1.9dev-r1234"] 
```

)

尝试以普通用户身份安装时，出现以下错误：

```
error: Can't download https://source.company.xy/svn/MainDir/SVNDir/basiclib/trunk@20479: 401 Authorization Required 
```

但是，当我`svn`使用完全相同的链接进行正常结帐时，它可以工作：

```
svn co https://source.company.xy/svn/MainDir/SVNDir/basiclib/trunk@20479 
```

有什么建议如何在不更改 svn 存储库的任何配置的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:22:24.953

查看这两个问题的答案。他们都给出了具体的例子，说明如何`install_requires`以及如何`dependency_links`合作来实现你想要的。

*   [Pip 可以在安装时安装 setup.py 中未指定的依赖项吗？](https://stackoverflow.com/questions/4150423/can-pip-install-dependencies-not-specified-in-setup-py-at-install-time)

*   [Python 包可以依赖于另一个 Python 包的特定版本控制修订吗？](https://stackoverflow.com/questions/2087492/can-a-python-package-depend-on-a-specific-version-control-revision-of-another-py)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:04:32.297

我认为问题在于您的 svn 客户端已通过身份验证（在 ~/.subversion 目录中的某处缓存领域）您的 distutils http 客户端不知道该怎么做。

Distutils 在依赖链接中支持 svn+http 链接类型。因此，您可以尝试在提供用户名和密码的依赖链接之前添加“svn+”：

> dependency_links = ["svn+ [https://user:password@source.company.xy/svn/MainDir/SVNDir/basiclib/trunk@20479#egg=basiclib-1.9dev-r1234](https://user:password@source.company.xy/svn/MainDir/SVNDir/basiclib/trunk@20479#egg=basiclib-1.9dev-r1234) "]

出于安全原因，您不应将用户名和密码放在 setup.py 文件中。一种方法是从环境变量或事件中获取身份验证信息，尝试从您的 subversion 配置目录 (~/.subversion) 中获取它

希望有所帮助

# javascript - 这三种创建数组的方式有什么区别吗？

> ID：15368730
> 
> 赞同：3
> 
> 时间：2013-03-12T18:03:14.983
> 
> 标签：javascript, jquery

这三种创建数组的方式有什么区别吗？如果不是，如果前两种方法只是更多的代码，为什么还要存在呢？

1：

```
var myCars=new Array(); 
myCars[0]="Saab";       
myCars[1]="Volvo";
myCars[2]="BMW"; 
```

2：

```
var myCars=new Array("Saab","Volvo","BMW"); 
```

3：

```
var myCars=["Saab","Volvo","BMW"]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T18:10:04.997

使用`[]`比使用更安全可靠`new Array()`。前者实际上是推荐的。这是因为 的值`Array`可以被覆盖。此外，[`[]`与 相比，速度更快`new Array()`](https://stackoverflow.com/questions/7375120/why-arr-is-faster-than-arr-new-array)。

看看这些相关的问题：

*   [声明 JavaScript 数组时，“Array()”和“[]”有什么区别？](https://stackoverflow.com/questions/931872/whats-the-difference-between-array-and-while-declaring-a-javascript-ar)
*   [JSLint：“使用数组文字符号 []” 用于 var os_map = {}](https://stackoverflow.com/questions/1936047/jslint-use-the-array-literal-notation-for-var-os-map)
*   [var x = new Array(); 有什么问题？](https://stackoverflow.com/questions/885156/whats-wrong-with-var-x-new-array)
*   [JavaScript 的“新”关键字被认为是有害的吗？](https://stackoverflow.com/questions/383402/is-javascript-s-new-keyword-considered-harmful)

相关链接：

*   [JSLint 希望你避免`new`.](http://www.jslint.com/lint.html#new)

为了阐明“覆盖”的含义，您可以执行以下操作：

```
function Array() {
    alert("I am not really an array! BWAHAHAHAHAHA!");
} 
```

现在，当您这样做时，`new Array();`您会收到警报，这显然不是您想要的。

简而言之，确实没有迫切需要使用`new Array()`，与使用文字相比，它不会给你带来任何好处`[]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:17:45.140

**区别：**

在第一种方法中，数组声明和数组初始化是分开完成的。在第 2 和第 3 方法中，数组声明和数组初始化在单个语句中完成。3rd 只是 2nd 方法的简写。

**需要：**

案例1：假设你今天没有车，但你打算将来买一辆。所以，

```
var myCars = new Array(); 
```

案例 2：假设您今天拥有 2 辆汽车。但是将来，您可能会购买/出售一辆或多辆汽车。

```
var myCars = new Array("BMW", "Porsche"); 
```

总而言之，**如果您事先知道数据，则使用第 2 或第 3 方法，但如果您事先不知道数据，则使用第 1 方法。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T18:16:13.543

对于数组，这两种方法之间没有显着差异，除了可读性和简单表示法的非常轻微的性能优势。

然而，一般推荐的做法是尽可能对 javascript 使用普通表示法，而不是将这些东西包装在构造函数中。因为虽然 'new Array()' 和 'new Object()' 产生与`[]`and相同的结果`{}`，但对原语使用构造函数实际上会导致问题。

例如`new String()`，将创建一个 String 对象而不是原始字符串。这具有阻止对`===`字符串使用和其他比较的缺点。

例如

```
 alert(new String("") === new String("")); //false alert ("" === "")
 //true 
```

因此，虽然在这种特殊情况下没有区别，但通常最好养成使用基本符号的习惯，而不是使用内置类型的构造函数。

### 澄清

当我说没有区别时，我的意思是在一般情况下，这些符号会产生相同的结果。Vivin 的观点非常出色，也是避免使用这种符号的另一个原因。

# javascript - 如何在单击时切换两个图像

> ID：15368733
> 
> 赞同：3
> 
> 时间：2013-03-12T18:03:18.640
> 
> 标签：javascript, image, onclick, treeview

我正在制作一个可折叠的树视图。我做到了，我只需要我的`+`和`-`图标在被点击时切换。

当我使用 jQuery 使用以下代码将图标从 更改`+`为时，我做了部分工作：`-`

```
$(this).attr('src','../images/expand.gif'); 
```

问题是，当我再次单击节点时，我不知道如何让它变回原来的样子:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T18:08:15.667

这应该有效：

```
<style>
.expand{
    content:url("http://site.com/expand.gif");
}
.collapse{
    content:url("http://site.com/collapse.gif");
}
</style>

<img class="expand">
<script>
//onclick code
$('img.expand').toggleClass('collapse');
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T18:04:34.610

寻找 jquery 函数 toggleClass :)

[http://jsfiddle.net/Ceptu/](http://jsfiddle.net/Ceptu/)

html:

```
<div id="box">

    Hello :D

</div> 
```

查询：

```
$("#box").click(function () {
    $(this).toggleClass("red");
}); 
```

CSS：

```
#box {
    width: 200px;
    height: 200px;
    background-color: blue;
}

.red {
   background-color: red !important;
} 
```

记住！important 真的很重要！！！

很多方法可以做到这一点：D

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-12T16:20:38.777

我想在不上课的情况下做到这一点。在您的点击事件函数中，您可以执行以下操作：

```
if($(this).attr('src') == '../images/collapse.gif')
   $(this).attr('src', '../images/expand.gif');
else
   $(this).attr('src', '../images/collapse.gif'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T18:18:22.247

添加 plus 作为默认的 img src 然后定义一个减号类以将图像源更改为减号图像

```
$("selector_for_your_link").click(function () {
      $(this).toggleClass("minus-class");
    }); 
```

# android - 如何使 TextView 看起来像设置的 PreferenceCategory 标头

> ID：15368737
> 
> 赞同：13
> 
> 时间：2013-03-12T18:03:31.833
> 
> 标签：android, textview, android-preferences

这应该很容易弄清楚，但我无法在任何地方找到答案。

我正在尝试使常规 TextView 看起来与任何应用程序的设置上显示的首选项类别标题非常相似。这就是我的意思：

![偏好类别标题](../Images/6708b82f3ffbdae65e33e1c2ccfc6827.png)

现在，我已经尝试了一些事情，但我似乎没有做对。例如，我尝试设置这个：

```
android:drawableBottom="?android:attr/dividerVertical" 
```

到我的TextView，但这似乎根本没有做任何事情，我的TextView仍然看起来像这样：

![图像看起来不正确](../Images/f59f3aaf7faac8b981d9b9e28cc3ac69.png)

我也尝试过简单地设置我制作的drawable：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android">
<stroke
    android:width="1dp"         
    android:color="@android:color/darker_gray"
    />
</shape> 
```

但这也没有出现在我的文字中。

这是目前的 TextView 样式：

```
 <style name="NewTaskHeaderText">
    <item name="android:layout_height">wrap_content</item>
    <item name="android:layout_width">match_parent</item>
    <item name="android:textColor">@android:color/holo_blue_dark</item>
    <item name="android:minHeight">48dp</item>
    <item name="android:gravity">center_vertical</item>
    <item name="android:padding">8dp</item>
</style>

<TextView
    android:id="@+id/textView4"
    style="@style/NewTaskHeaderText"
    android:drawableBottom="@android:attr/dividerVertical"
    android:text="@string/some_text"
    android:textAppearance="?android:attr/textAppearanceMedium" /> 
```

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-30T21:01:18.660

```
<TextView
    android:layout_height="wrap_content"
    android:layout_width="match_parent"
    android:text="foo"
    style="?android:attr/listSeparatorTextViewStyle" /> 
```

要做得更多，请查看[其他 SO 答案](https://stackoverflow.com/questions/10020466/android-4-0-sub-title-section-label-styling)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T18:30:01.150

尝试使用简单`View`的后`TextView`：

```
<View 
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:padding="5dp"
    android:background="@android:color/darker_gray">
</View 
```

# java - 为什么java中的String类使用char[]、偏移量和长度实现？

> ID：15368741
> 
> 赞同：-1
> 
> 时间：2013-03-12T18:03:50.650
> 
> 标签：java, string

为什么java中的String类有`char[] value`，`int offset`和`int count`字段。他们的目的是什么，他们完成了什么任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:05:17.487

该`char[]`数组包含组成该字符串的字符数组。

偏移量和计数用于`String.substring()`操作。当您获取字符串的子字符串时，结果`String`引用原始字符数组，但存储关联的偏移量和长度（这称为[享元模式](http://en.wikipedia.org/wiki/Flyweight_pattern)，是一种常用的节省内存的技术）

例如`String.substring("ABCDEF", 1, 2);`

将引用*原始*数组，`A,B,C,D,E,F`但设置`offset`为 1 和`length`1（因为该`substring`方法使用开始和结束索引）。请注意，您可以轻松地做到这一点，因为字符数组是*不可变*的。你不能改变它。

注意：这最近发生了变化（我相信是 7u6），并且在最近的版本中不再适用。我怀疑这是由于意识到这种优化并没有真正使用太多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:06:13.763

它们允许来回传递一个数组作为主要对数组的一部分感兴趣的例程的支持。这使得人们不必担心构建大量的小数组，避免了与特定操作的对象构建相关的成本。

例如，可能使用数组作为输入缓冲区，但随后需要额外的数组来处理该缓冲区中的分块字符，使用数组、偏移量和计数这三个参数，您可以“模拟”从中间读取缓冲区无需创建新的（辅助）数组。

这很重要，因为虽然您可能合理地希望一个数组（Java 中的一个对象）来保存输入字符，但您可能不想分配和垃圾收集数千个数组（并将字符复制到其中）来传递数据变成只需要一个单词的东西，由空格分隔（嘿，这只是一个例子）。

# ms-office - Microsoft Office 2010 功能区自定义 UI 中的 Phantom Keytip 冲突

> ID：15368745
> 
> 赞同：5
> 
> 时间：2013-03-12T18:04:00.077
> 
> 标签：ms-office, keyboard-shortcuts, ribbon, office-2010

我正在尝试在我的 Excel 2010 插件之一中创建自定义功能区，并且出于某种原因，Office 覆盖了一些键提示（键盘加速器）。我知道如果 Office 发现冲突，它通常会将一个或两个键提示覆盖为“Y”、“Y2”、“Y3”等。但在此示例中，我的选项卡中只有一个按钮，因此没有其他按钮控制它与之冲突。

这是 XML：

```
<customUI xmlns="http://schemas.microsoft.com/office/2009/07/customui">
 <ribbon>
  <tabs>
   <tab id="tabid_1" label="SampleTab" keytip = "B">
    <group id="grpid_1" label="SampleGroup">
     <button id="btnid_1" label="SampleButton" keytip="Z" />
    </group>
   </tab>
  </tabs>
 </ribbon>
</customUI> 
```

SampleButton 的键提示不是 Z，而是替换为“Y2”。无论选项卡的键提示（当前为“B”）如何，我都会看到这种行为。我检查以确保没有其他键提示为“BZ”的按钮可能有冲突，但没有看到任何其他按钮。

如果我尝试将 SampleButton 的键提示设为“Y”，我也会看到这种行为，但我认为这是因为所有“Y*”键提示都是为冲突而保留的。

顺便说一句，我也遇到了“C”键提示的这个问题，但由于某些无法解释的原因，只有当我没有`<group>`. 一旦我向 中添加标签`<group>`，“C”就不再被“Y2”覆盖。非常奇怪的行为。

任何人都有任何想法可能导致这种情况？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-06T15:37:59.257

我遇到了同样的问题，我最终只是将键提示值从大写的“Z”更改为小写的“z”并且它起作用了。不知道为什么。希望它对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-15T16:48:53.937

抱歉，接受的答案对我不起作用！在我的 VSTO 解决方案中，我凭经验发现一个有效的 ALT 快捷方式是“G”。所以在我的 C# 代码中，我设置了：

```
Globals.Ribbons.GetRibbon<MyRibbon>().tabMyRibbonTab.KeyTip = "GGG"; 
```

我使用三个 G 来尽量减少与其他加载项的冲突。这对我有用，我什至可以使用 SendKeys 在 Excel 2007 中选择 RibbonTab（请参阅[另一个](https://stackoverflow.com/a/20799343/1413641)问题）。

问候，约尔格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T04:41:35.070

这是办公应用程序中自定义（相对于内置）选项卡的标准行为。要自己测试这一点，只需通过 UI 添加几个自定义选项卡。接下来按 ALT 键并注意所有自定义选项卡是 Y1、Y2、Y3、加速器..

但是，正如 OP 所指出的，这不应该是在以编程方式或通过 XML 为插件的功能区 UI 元素设置 keytip 属性时的行为。由于它只发生在有限的关键组合子集上，我想这可能是一个错误。[建议在microsoft connect 网站](https://connect.microsoft.com/VisualStudio/feedback/CreateFeedback.aspx)上记录此内容。

# wix - 在我的自定义对话框 wxs 中无法访问的另一个 wxs 文件中定义的 UI 组合框片段

> ID：15368746
> 
> 赞同：1
> 
> 时间：2013-03-12T18:04:01.973
> 
> 标签：wix

我使用收获创建了一个 MyProjectOutput.wxs 文件并在其上应用 xml 转换以在该文件中创建一个 UI 片段以填充 ComboBox。我还有一个单独的 UI wxs 文件，我在其中定义了一个使用此 ComboBox 的 CustomDialog.wxs。但是，除非我将此组合框定义放在 CustomDialog.wxs 文件中，否则它会给我 2205（数据库错误）。以下是我的文件

**MyProjectOutput.wxs** - 在这个文件中，UI 的最后一个片段是通过在这个文件上应用 xml 转换，通过读取文件节点的源属性生成的。

```
<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi" xmlns:wix="http://schemas.microsoft.com/wix/2006/wi">
    <Fragment>
        <DirectoryRef Id="CONFIGFILES">
            <Component Id="cmp7562915D30BE22E32E71CF7CD6CBAB77" Guid="{86AC4144-0BE0-476E-923B-B44436F8829E}">
                <File Id="fil9E9BBB7231B6BD796147C7D0AE291065" KeyPath="yes" Source="$(var.ConfigFilesDir)\Web.Dev1.config" />
            </Component>
            <Component Id="cmp6C3AFA41B8BBCF9D0DF28242C6B429D1" Guid="{BD2E6990-13A8-44EA-9DAA-20CBEC67482F}">
                <File Id="fil5B747B1CE3640230ED3789B3F4E05C3C" KeyPath="yes" Source="$(var.ConfigFilesDir)\Web.Dev2.config" />
            </Component>
            <Component Id="cmp9998AAEE2DED02EF9A0712D074E9C8FC" Guid="{B790866E-C07F-45DD-8C63-627DBED78A40}">
                <File Id="fil755065F43A05FE597055F31A20242E72" KeyPath="yes" Source="$(var.ConfigFilesDir)\Web.Dev3.config" />
            </Component>
            <Component Id="cmp9130D649B8658E7957A82AE58D8820BC" Guid="{EC6D020B-F2D9-490E-B70A-05A956E8111F}">
                <File Id="filD6D44C4AE3547883AE37DCF2C0322608" KeyPath="yes" Source="$(var.ConfigFilesDir)\Web.Integration-Dev.config" />
            </Component>
            <Component Id="cmp7DC1EB525FA874FEDD5FDEE84DFFD787" Guid="{04E1BF0D-C879-4845-91E6-E4F469D9C688}">
                <File Id="fil6EDE1F9E7394B049CE4B88F3670AE891" KeyPath="yes" Source="$(var.ConfigFilesDir)\Web.Integration-Main.config" />
            </Component>
            <Component Id="cmpFCB72E3C787BFAA9304121A8F37006F7" Guid="{5A17F58F-D206-4482-9DB4-44DACBA49019}">
                <File Id="filCEFACF9829EBAB61DDFB303933AFD489" KeyPath="yes" Source="$(var.ConfigFilesDir)\Web.Local-Dev.config" />
            </Component>
            <Component Id="cmpD5E1D9120D86A34424CBA0918AEBA73E" Guid="{8A79CEB6-3075-4B97-9555-253D1701D88E}">
                <File Id="fil444F50F7AF28DF82052DDC1626A45398" KeyPath="yes" Source="$(var.ConfigFilesDir)\Web.Local-Main.config" />
            </Component>
            <Component Id="cmp061DAE6DDCA07E4424FBBF175772A0B2" Guid="{74156629-516A-4E78-ADD0-498309EBB95D}">
                <File Id="fil6F7713DFE7490535719BE8B04C835B3D" KeyPath="yes" Source="$(var.ConfigFilesDir)\Web.Prod.config" />
            </Component>
            <Component Id="cmpADCB9112292B28FFC0E91215127D2A58" Guid="{1875243D-10C9-4B59-917C-4E315A508AFA}">
                <File Id="filAE0C330E233428662B044F5912A00E62" KeyPath="yes" Source="$(var.ConfigFilesDir)\Web.QA-Dev.config" />
            </Component>
            <Component Id="cmpC5C9EA61F18F501EB6E7603AE2B1CD30" Guid="{4810C5F7-7ABF-4923-AC94-57159231F516}">
                <File Id="filFDB550D00B6BCBE7BA48D88EDE8B74A7" KeyPath="yes" Source="$(var.ConfigFilesDir)\Web.QA-Main.config" />
            </Component>
            <Component Id="cmp172C61070E786846F0A44679222C79F5" Guid="{A1A90FF7-40CF-471E-A8B8-65E205B9452B}">
                <File Id="fil114E22D9F022C977458C29000645C1F6" KeyPath="yes" Source="$(var.ConfigFilesDir)\Web.QA1.config" />
            </Component>
            <Component Id="cmp552464D37F0921636903B5A62C290CF3" Guid="{4FFF8BE5-D74E-4B1A-BD02-270B3A4F219C}">
                <File Id="fil8A2CAFEF430811850DB7B42887D44A52" KeyPath="yes" Source="$(var.ConfigFilesDir)\Web.QA2.config" />
            </Component>
            <Component Id="cmpB6506383D32CDB0027F8CD3C7CBE94FB" Guid="{FD09FF40-1BD8-4117-A0D1-D445CDF6CCA2}">
                <File Id="filB6E5A82CD73E75255FE6B3C3BF20D1B0" KeyPath="yes" Source="$(var.ConfigFilesDir)\Web.QA3.config" />
            </Component>
        </DirectoryRef>
    </Fragment>
    <Fragment>
        <ComponentGroup Id="WebConfigFiles">
            <ComponentRef Id="cmp7562915D30BE22E32E71CF7CD6CBAB77" />
            <ComponentRef Id="cmp6C3AFA41B8BBCF9D0DF28242C6B429D1" />
            <ComponentRef Id="cmp9998AAEE2DED02EF9A0712D074E9C8FC" />
            <ComponentRef Id="cmp9130D649B8658E7957A82AE58D8820BC" />
            <ComponentRef Id="cmp7DC1EB525FA874FEDD5FDEE84DFFD787" />
            <ComponentRef Id="cmpFCB72E3C787BFAA9304121A8F37006F7" />
            <ComponentRef Id="cmpD5E1D9120D86A34424CBA0918AEBA73E" />
            <ComponentRef Id="cmp061DAE6DDCA07E4424FBBF175772A0B2" />
            <ComponentRef Id="cmpADCB9112292B28FFC0E91215127D2A58" />
            <ComponentRef Id="cmpC5C9EA61F18F501EB6E7603AE2B1CD30" />
            <ComponentRef Id="cmp172C61070E786846F0A44679222C79F5" />
            <ComponentRef Id="cmp552464D37F0921636903B5A62C290CF3" />
            <ComponentRef Id="cmpB6506383D32CDB0027F8CD3C7CBE94FB" />
        </ComponentGroup>
    </Fragment>
    <Fragment>
        <UI>
            <ComboBox Property="ENV">
                <ListItem Value="Dev1" Text="Dev1" />
                <ListItem Value="Dev2" Text="Dev2" />
                <ListItem Value="Dev3" Text="Dev3" />
                <ListItem Value="Integration-Dev" Text="Integration-Dev" />
                <ListItem Value="Integration-Main" Text="Integration-Main" />
                <ListItem Value="Local-Dev" Text="Local-Dev" />
                <ListItem Value="Local-Main" Text="Local-Main" />
                <ListItem Value="Prod" Text="Prod" />
                <ListItem Value="QA-Dev" Text="QA-Dev" />
                <ListItem Value="QA-Main" Text="QA-Main" />
                <ListItem Value="QA1" Text="QA1" />
                <ListItem Value="QA2" Text="QA2" />
                <ListItem Value="QA3" Text="QA3" />
            </ComboBox>
        </UI>
    </Fragment>
</Wix> 
```

**CustomDialog.wxs** - 这个不起作用。它不包含 ComboBox 定义。运行安装程序后，它给了我 MSI 数据库的 2205 错误。

```
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
  <Fragment>
    <UI>
      <Dialog Id="EnvironmentSelectionDlg"  Width="370" Height="270" Title="!(loc.EnvironmentSelectionDlg_Title)">
        <Control Id="EnvironmentCombo" Type="ComboBox" X="18" Y="82" Width="200" Height="20" Property="ENV" TabSkip="yes" Sorted="yes" />
        <Control Id="Back" Type="PushButton" X="180" Y="243" Width="56" Height="17" Text="!(loc.WixUIBack)" />
        <Control Id="Next" Type="PushButton" X="236" Y="243" Width="56" Height="17" Default="yes" Text="!(loc.WixUINext)" />
        <Control Id="Cancel" Type="PushButton" X="304" Y="243" Width="56" Height="17" Cancel="yes" Text="!(loc.WixUICancel)">
          <Publish Event="SpawnDialog" Value="CancelDlg">1</Publish>
        </Control>
      </Dialog>
    </UI>
  </Fragment>
</Wix> 
```

**CustomDialog.wxs** - 这个工作。它包含 ComboBox 定义。

```
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
  <Fragment>
    <UI>
      <ComboBox Property="ENV">
        <ListItem Value="Dev1" Text="Dev1" />
        <ListItem Value="Dev2" Text="Dev2" />
        <ListItem Value="Dev3" Text="Dev3" />
        <ListItem Value="Integration-Dev" Text="Integration-Dev" />
        <ListItem Value="Integration-Main" Text="Integration-Main" />
        <ListItem Value="Local-Dev" Text="Local-Dev" />
        <ListItem Value="Local-Main" Text="Local-Main" />
        <ListItem Value="Prod" Text="Prod" />
        <ListItem Value="QA-Dev" Text="QA-Dev" />
        <ListItem Value="QA-Main" Text="QA-Main" />
        <ListItem Value="QA1" Text="QA1" />
        <ListItem Value="QA2" Text="QA2" />
        <ListItem Value="QA3" Text="QA3" />
      </ComboBox>
      <Dialog Id="EnvironmentSelectionDlg"  Width="370" Height="270" Title="!(loc.EnvironmentSelectionDlg_Title)">
        <Control Id="EnvironmentCombo" Type="ComboBox" X="18" Y="82" Width="200" Height="20" Property="ENV" TabSkip="yes" Sorted="yes" />
        <Control Id="Back" Type="PushButton" X="180" Y="243" Width="56" Height="17" Text="!(loc.WixUIBack)" />
        <Control Id="Next" Type="PushButton" X="236" Y="243" Width="56" Height="17" Default="yes" Text="!(loc.WixUINext)" />
        <Control Id="Cancel" Type="PushButton" X="304" Y="243" Width="56" Height="17" Cancel="yes" Text="!(loc.WixUICancel)">
          <Publish Event="SpawnDialog" Value="CancelDlg">1</Publish>
        </Control>
      </Dialog>
    </UI>
  </Fragment>
</Wix> 
```

请建议我是否需要做任何其他事情才能不在 CustomDialog.wxs 中定义 ComboBox 元素来完成这项工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:29:45.497

您需要将生成的 UI 标记更改为具有 Id 属性：

```
<UI Id='ComboBox'>
    <ComboBox Property="ENV">
        <ListItem Value="Dev1" Text="Dev1" />
        <ListItem Value="Dev2" Text="Dev2" />
        <ListItem Value="Dev3" Text="Dev3" />
        <ListItem Value="Integration-Dev" Text="Integration-Dev" />
        <ListItem Value="Integration-Main" Text="Integration-Main" />
        <ListItem Value="Local-Dev" Text="Local-Dev" />
        <ListItem Value="Local-Main" Text="Local-Main" />
        <ListItem Value="Prod" Text="Prod" />
        <ListItem Value="QA-Dev" Text="QA-Dev" />
        <ListItem Value="QA-Main" Text="QA-Main" />
        <ListItem Value="QA1" Text="QA1" />
        <ListItem Value="QA2" Text="QA2" />
        <ListItem Value="QA3" Text="QA3" />
    </ComboBox>
</UI> 
```

然后添加`<UIRef Id='ComboBox' />`到 CustomDialog.wxs 中，以便它可以“看到”它。

# sql - 将多列聚合为单列

> ID：15368750
> 
> 赞同：0
> 
> 时间：2013-03-12T18:04:14.097
> 
> 标签：sql, informix

我有一张看起来像的桌子

```
id      cat     data
--------------------
1       1       foo
2       1       bar
3       1       baz
4       2       some
5       2       random
6       3       Data 1
7       2       data
8       3       Data 2
9       3       Data 3 
```

我想要最后 3`id`秒和`data`每个类别的单行，比如

```
cat     id1     data1   id2     data2   id3     data3
-----------------------------------------------------
1       1       foo     2       bar     3       baz
2       4       some    5       random  7       data
3       6       Data 1  8       Data 2  9       Data 3 
```

我已经尝试了以下方法：

*   `id`获取每个最高的数据`cat`：

    ```
    SELECT id, data FROM tbl t1 WHERE EXISTS (
        SELECT 1 FROM tbl t2 WHERE t1.cat = t2.cat 
        GROUP BY t2.cat HAVING MAX(t2.id) = t1.id
    ) 
    ```

*   获取每个 s 中^(第二)高的数据：`id``cat`

    ```
    SELECT id, data FROM tbl t1 WHERE EXISTS (
        SELECT 1 FROM tbl t2 WHERE t1.cat = t2.cat AND NOT EXISTS (
            -- Not the highest value
            SELECT 1 FROM tbl t3 WHERE t1.cat = t3.cat GROUP BY t3.cat
            HAVING MAX(t3.id) = t2.id
        ) GROUP BY t2.cat HAVING MAX(t2.id) = t1.id
    ) 
    ```

*   获取每个3 ^(rd)最高的数据：`id``cat`

    ```
    SELECT id, data FROM tbl t1 WHERE EXISTS (
        SELECT 1 FROM tbl t2 WHERE t1.cat = t2.cat AND NOT EXISTS (
            -- id is not 2nd highest
            SELECT 1 FROM tbl t3 WHERE t1.cat = t3.cat AND NOT EXISTS (
                -- id is not the highest
                SELECT 1 FROM tbl t4 WHERE t1.cat = t4.cat GROUP BY t4.cat
                HAVING MAX(t4.id) = t3.id
            ) GROUP BY t3.cat HAVING MAX(t3.id) = t2.id
        ) AND NOT EXIST (
            -- not the highest id
            SELECT 1 FROM tbl t5 WHERE t1.cat = t5.cat GROUP BY t5.cat
            HAVING MAX(t5.id) = t2.id
        ) GROUP BY t2.cat HAVING MAX(t2.id) = t1.id
    ) 
    ```

现在，加入整个事情。但我相信存在更好的解决方案。它是什么？

PS：我必须用 Informix 来做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:57:32.850

不是我的答案，我的一个同事想出了这个：

```
create temp table t(
    id      smallint,
    cat     smallint,
    data    char(10)
) with no log;

insert into t values (1, 1, "foo");
insert into t values (2, 1, "bar");
insert into t values (3, 1, "baz");
insert into t values (4, 2, "some");
insert into t values (5, 2, "random");
insert into t values (6, 3, "Data 1");
insert into t values (7, 2, "data");
insert into t values (8, 3, "Data 2");
insert into t values (9, 3, "Data 3");
insert into t values (10, 4, "some");
insert into t values (11, 4, "more");
insert into t values (12, 4, "random");
insert into t values (13, 4, "data");
insert into t values (14, 4, "for");
insert into t values (15, 4, "testing");
insert into t values (16, 5, "one");

select
   cat,
   max(case when cnt = 3 then id end) as id1,
   max(case when cnt = 2 then id end) as id2,
   max(case when cnt = 1 then id end) as id3,
   max(case when cnt = 3 then data end) as data1,
   max(case when cnt = 2 then data end) as data2,
   max(case when cnt = 1 then data end) as data3
from
   (
       select
          a.cat,
          a.id,
          a.data,
          count(*) as cnt
       from
          t a,
          t b
       where
          a.cat = b.cat and
          a.id <= b.id
       group by
          a.id,
          a.cat,
          a.data
       having
          count(*) <= 3
   )
group by
    1
order by
    1;

cat    id1    id2    id3 data1      data2      data3

  1      1      2      3 foo        bar        baz
  2      4      5      7 some       random     data
  3      6      8      9 Data 1     Data 2     Data 3
  4     13     14     15 data       for        testing
  5                   16                       one 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:38:19.943

如果您使用 Informix 11.50 或更高版本，则有一个不完美的选项，但也许可以提供帮助。检查下面的选择。

他们将返回一个具有 char() 数据类型的[多集](http://publib.boulder.ibm.com/infocenter/idshelp/v117/topic/com.ibm.sqls.doc/ids_sqs_1374.htm)数据类型......这可能会导致难以阅读，具体取决于您使用的程序语言。

感谢 Fernando Nunes 向[IIUG 论坛推荐了这个 SQL](http://www.iiug.org/forums/ids/index.cgi/read/29725)

目前，除了复杂的 SQL 之外，我没有看到其他选择。

```
drop table teste; 
create temp table teste ( id smallint, cat smallint, data char(10)); 
insert into teste values ( 1, 1, 'foo ' ); 
insert into teste values ( 2, 1, 'bar ' ); 
insert into teste values ( 3, 1, 'baz ' ); 
insert into teste values ( 4, 2, 'some ' ); 
insert into teste values ( 5, 2, 'random ' ); 
insert into teste values ( 6, 3, 'Data 1 ' ); 
insert into teste values ( 7, 2, 'data ' ); 
insert into teste values ( 8, 3, 'Data 2 ' ); 
insert into teste values ( 9, 3, 'Data 3 ' ); 
insert into teste values ( 10, 3, 'Data 4 ' );

select * from teste; 
select ms.* 
from 
( 
SELECT MULTISET( SELECT ITEM t.id || ',' || t.cat || ',' || t.data m1 FROM 
teste t WHERE t.cat = tout.cat) FROM (SELECT unique cat from teste) tout 
) msdrop table teste; 
```

将返回 ：

```
expression  MULTISET{'1,1,foo       ','2,1,bar       ','3,1,baz       '}
expression  MULTISET{'4,2,some      ','5,2,random    ','7,2,data      '}
expression  MULTISET{'6,3,Data 1    ','8,3,Data 2    ','9,3,Data 3    '} 
```

# mysql - 将 int 转换为 varchar

> ID：15368753
> 
> 赞同：136
> 
> 时间：2013-03-12T18:04:19.993
> 
> 标签：mysql, sql, database, casting, mariadb

我有以下查询，需要转换`id`为`varchar`

**架构**

```
create table t9 (id int, name varchar (55));
insert into t9( id, name)values(2, 'bob'); 
```

**我试过的**

```
select CAST(id as VARCHAR(50)) as col1 from t9;

select CONVERT(VARCHAR(50),id) as colI1 from t9; 
```

但他们不工作。请建议。

* * *

## 回答 #1

> 赞同：247
> 
> 时间：2013-03-12T18:09:24.210

您将需要[`cast`](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_cast)或[`convert`](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_convert)作为`CHAR`数据类型，没有`varchar`可以将数据转换/转换为的数据类型：

```
select CAST(id as CHAR(50)) as col1 
from t9;

select CONVERT(id, CHAR(50)) as colI1 
from t9; 
```

[请参阅SQL Fiddle](http://sqlfiddle.com/#!2/cd1eb/3)上的以下 SQL（实际操作）：

```
/*! Build Schema */
create table t9 (id INT, name VARCHAR(55));
insert into t9 (id, name) values (2, 'bob');

/*! SQL Queries */
select CAST(id as CHAR(50)) as col1 from t9;
select CONVERT(id, CHAR(50)) as colI1 from t9; 
```

除了您试图转换为不正确的数据类型之外，您使用的语法也不`convert`正确。该`convert`函数使用以下内容，`expr`您的列或值在哪里：

```
 CONVERT(expr,type) 
```

或者

```
 CONVERT(expr USING transcoding_name) 
```

您的原始查询具有向后的语法。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-03-12T18:08:42.157

你得到那个是因为`VARCHAR`它不是一个有效的类型。根据 MySQL 文档（[http://dev.mysql.com/doc/refman/5.5/en/cast-functions.html#function_cast](http://dev.mysql.com/doc/refman/5.5/en/cast-functions.html#function_cast)），您只能转换为：

*   二进制[(N)]
*   字符[(N)]
*   日期
*   约会时间
*   十进制[(M[,D])]
*   签
*   [整数]
*   时间
*   无符号[整数]

我认为你最好的选择是使用`CHAR`.

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-09-12T18:08:32.807

是的

```
SELECT id || '' FROM some_table;
or SELECT id::text FROM some_table; 
```

是 postgresql，但 mySql 不允许这样做！

mySql 中的捷径：

```
SELECT concat(id, '') FROM some_table; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-13T06:24:22.563

我没有 MySQL，但有 RDBMS（Postgres 等），您可以在其中使用 hack

```
SELECT id || '' FROM some_table; 
```

连接进行隐式转换。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-18T01:51:34.047

我解决了一个将整数列 xa`varchar`列与

`where CAST(Column_name AS CHAR CHARACTER SET latin1 ) collate latin1_general_ci = varchar_column_name`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T18:08:28.850

利用 ：

```
SELECT cast(CHAR(50),id) as colI1 from t9; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-16T21:01:14.597

我将笼统地回答这个问题，非常感谢上述贡献者。
我在 MySQL Workbench 上使用 MySQL。我在尝试使用该方法将 a`char`和 an连接在一起时遇到了类似的问题。总之，对我有用 的是：假设你是'c'并且是'i'，所以，查询变成：`int``GROUP_CONCAT`

`char``int`
`...GROUP_CONCAT(CONCAT(c,' ', CAST(i AS CHAR))...`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-03T17:25:00.123

也应该能够做这样的事情：

```
Select (id :> VARCHAR(10)) as converted__id_int
from t9 
```

# php - 检测操作系统、浏览器、Adobe Reader、带宽等

> ID：15368757
> 
> 赞同：0
> 
> 时间：2013-03-12T18:04:32.490
> 
> 标签：php, browser, operating-system, detect

基本上，我正在尝试为一些在线程序创建兼容性测试，我希望用户查看它们是否与我所拥有的系统兼容，就像在[这里](http://www.identifix.com/compatibility.asp)找到的那​​样。

我在网站上使用 WordPress，但找不到可以检测到所有这些东西的插件、PHP 或 Javascript 源。该网站可能正在使用 ASP，但我认为这也应该可以通过 PHP 检测到，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:07:17.493

可以通过查看`$_SERVER['HTTP_USER_AGENT']`. 浏览器也进入了User-Agent。Adobe Reader 不能用 php 读取，但`navigator.plugins`对象中有 JavaScript。带宽不容易检测。

关于用户代理，我当前的一个是这里：

> Mozilla/5.0 (Windows NT 6.1; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0

这意味着我在 Windows 7 x64 上使用 19.0 版的 Firefox。

为了通过插件检测实际的 Adob​​e Reader 版本循环并查找名称（属性）***Adob​​e Acrobat***在我的情况下`navigator.plugins[2].version`返回***10.1.6.1***。

关于带宽，您可以尝试下载数据并测量需要多长时间。但请注意，在某些情况下，您会浪费用户的流量，尤其是在移动设备上。但是，您应该避免在大多数情况下实际带宽并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:26:04.317

[http://thecodeabode.blogspot.ca/2011/01/detect-adobe-reader-plugin.html](http://thecodeabode.blogspot.ca/2011/01/detect-adobe-reader-plugin.html)

大部分与上面的答案相同，使用 navigator.plugins 可以检测 Adob​​e Reader 之类的东西。但是，要检测带宽，您需要创建一个定时脚本来记录检索文件所需的时间。例如[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/) 您可以通过 javascript 加载图像，或制作 PHP 输出的图像文件。

```
<?php
$time = microtime();
$time = explode(' ', $time);
$time = $time[1] + $time[0];
$start = $time;
$file = '../image.jpg';
$type = 'image/jpeg';
$ts = gmdate("D, d M Y H:i:s") . " GMT";
header("Expires: $ts");
header("Last-Modified: $ts");
header("Pragma: no-cache");
header("Cache-Control: no-cache, must-revalidate");
header('Content-Type:'.$type);
header('Content-Length: ' . filesize($file));
readfile($file);
$time = microtime();
$time = explode(' ', $time);
$time = $time[1] + $time[0];
$finish = $time;
$total_time = round(($finish - $start), 4);
?> 
```

这将计算服务器/客户端加载输出图像所需的时间。在 $total_time 之后，您可以将加载 6MB 图像所需的时间放入 mysql 等数据库中。然后，您将 SIZE 除以 TIME。因此，如果需要 2 秒，他们会说是 3Mbps 连接。补充：

```
8 Bits = 1 Byte
1024 Bytes = 1 KiloByte
1024 KiloBytes = 1 MegaByte
1024 MegaBytes = 1 GigaByte
1024 GigaBytes = 1 TeraByte 
```

因此，如果说用户在 1 秒内加载 1MB，请尝试 2​​MB，依此类推。但如果需要更长的时间。说 14 秒下载 1MB 除 1/14

```
0.125MB = 1 megabit
6/0.125/1 = 48 Mbit(Mbps)
1/0.125/14 = 0.57Mbit 
```

# actionscript-3 - As3 Flash 试图隐藏剪辑/帧

> ID：15368769
> 
> 赞同：0
> 
> 时间：2013-03-12T18:05:08.180
> 
> 标签：actionscript-3, flash

我有以下代码：

```
stop();

stage.addEventListener(MouseEvent.RIGHT_CLICK, function(e:Event){});

login_btn.buttonMode = true; // show hand cursor

//adding event listener
login_btn.addEventListener(MouseEvent.CLICK, loginUser);

function loginUser(e:MouseEvent):void{
    //if username & password are correct allow entry
    if(IDTxt.text == "wixlab"){
        gotoAndStop(2);
    }
    if(IDTxt.text == "hello"){
        gotoAndStop(2);
    }
    if(IDTxt.text == "hello"){
        gotoAndStop(2);

    }else {
        //otherwise show an error message
        var alert:TextFormat = new TextFormat();
        alert.color = 0xff0000; //red font
        messageTxt.text = "Incorrect ID, Please try again.";
        messageTxt.setTextFormat(alert);
    }
} 
```

在第 2 帧中，我有 stop();

请我尝试让他们登录，整个剪辑就会消失，这样他们就可以点击它背后的内容。我正在使用 Wix 添加此 SWF 以隐藏视频。但是他们登录的那些你将无法点击视频，因为 swf 在它上面。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:32:41.160

如果您将所有这些代码移动到仅用于编写脚本的层，则在第 1 帧（您可能已经拥有）您可以编写一个简单的条件语句，说明类似`if (this.currentFrame == 2){ getRidOfMyObjects(); }`I'm not positive that syntax is correct, but you can put this right under您当前的条件语句。并且`getRidOfMyObjects`可以是简单的可见性命令或 removeChild 或任何最适合您的场景的命令......这有帮助吗？

# c# - 从 PropertyGrid 显示详细的文件夹浏览器

> ID：15368771
> 
> 赞同：19
> 
> 时间：2013-03-12T18:05:12.177
> 
> 标签：c#, propertygrid, folderbrowserdialog

**请注意，这不是一个重复的问题。**

如何从 PropertyGrid 显示详细的 FolderBrowser，如下图所示（来自具有省略号的字段/属性......） ![详细的文件夹浏览器](../Images/0604092cbb118bb6093da0d4077eb648.png)

使用

```
[EditorAttribute(typeof(System.Windows.Forms.Design.FileNameEditor), typeof(System.Drawing.Design.UITypeEditor))]

[EditorAttribute(typeof(System.Windows.Forms.Design.FolderNameEditor), typeof(System.Drawing.Design.UITypeEditor))] 
```

我们得到了简约的文件夹浏览器

![简约文件夹浏览器](../Images/61d2f358898829a4505100a4143cfcd1.png)

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-13T13:40:27.697

这是一个自定义 UITypeEditor，它允许您使用 Vista 文件夹浏览器：

![在此处输入图像描述](../Images/6712e9fbf132d5a89286b59c1540de0f.png)

您可以像使用任何其他编辑器一样使用它：

```
[EditorAttribute(typeof(FolderNameEditor2), typeof(System.Drawing.Design.UITypeEditor))] 
```

它依赖于我为此场合编写的自定义 FolderBrowser2 类。当然，这仅适用于 Windows Vista 及更高版本。在以前的 Windows 版本中，除了简单的文件夹浏览器之外，没有其他的文件夹浏览器。

```
public class FolderNameEditor2 : UITypeEditor
{
    public override UITypeEditorEditStyle GetEditStyle(ITypeDescriptorContext context)
    {
        return UITypeEditorEditStyle.Modal;
    }

    public override object EditValue(ITypeDescriptorContext context, IServiceProvider provider, object value)
    {
        FolderBrowser2 browser = new FolderBrowser2();
        if (value != null)
        {
            browser.DirectoryPath = string.Format("{0}", value);
        }

        if (browser.ShowDialog(null) == DialogResult.OK)
            return browser.DirectoryPath;

        return value;
    }
}

public class FolderBrowser2
{
    public string DirectoryPath { get; set; }

    public DialogResult ShowDialog(IWin32Window owner)
    {
        IntPtr hwndOwner = owner != null ? owner.Handle : GetActiveWindow();

        IFileOpenDialog dialog = (IFileOpenDialog)new FileOpenDialog();
        try
        {
            IShellItem item;
            if (!string.IsNullOrEmpty(DirectoryPath))
            {
                IntPtr idl;
                uint atts = 0;
                if (SHILCreateFromPath(DirectoryPath, out idl, ref atts) == 0)
                {
                    if (SHCreateShellItem(IntPtr.Zero, IntPtr.Zero, idl, out item) == 0)
                    {
                        dialog.SetFolder(item);
                    }
                    Marshal.FreeCoTaskMem(idl);
                }
            }
            dialog.SetOptions(FOS.FOS_PICKFOLDERS | FOS.FOS_FORCEFILESYSTEM);
            uint hr = dialog.Show(hwndOwner);
            if (hr == ERROR_CANCELLED)
                return DialogResult.Cancel;

            if (hr != 0)
                return DialogResult.Abort;

            dialog.GetResult(out item);
            string path;
            item.GetDisplayName(SIGDN.SIGDN_FILESYSPATH, out path);
            DirectoryPath = path;
            return DialogResult.OK;
        }
        finally
        {
            Marshal.ReleaseComObject(dialog);
        }
    }

    [DllImport("shell32.dll")]
    private static extern int SHILCreateFromPath([MarshalAs(UnmanagedType.LPWStr)] string pszPath, out IntPtr ppIdl, ref uint rgflnOut);

    [DllImport("shell32.dll")]
    private static extern int SHCreateShellItem(IntPtr pidlParent, IntPtr psfParent, IntPtr pidl, out IShellItem ppsi);

    [DllImport("user32.dll")]
    private static extern IntPtr GetActiveWindow();

    private const uint ERROR_CANCELLED = 0x800704C7;

    [ComImport]
    [Guid("DC1C5A9C-E88A-4dde-A5A1-60F82A20AEF7")]
    private class FileOpenDialog
    {
    }

    [ComImport]
    [Guid("42f85136-db7e-439c-85f1-e4075d135fc8")]
    [InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
    private interface IFileOpenDialog
    {
        [PreserveSig]
        uint Show([In] IntPtr parent); // IModalWindow
        void SetFileTypes();  // not fully defined
        void SetFileTypeIndex([In] uint iFileType);
        void GetFileTypeIndex(out uint piFileType);
        void Advise(); // not fully defined
        void Unadvise();
        void SetOptions([In] FOS fos);
        void GetOptions(out FOS pfos);
        void SetDefaultFolder(IShellItem psi);
        void SetFolder(IShellItem psi);
        void GetFolder(out IShellItem ppsi);
        void GetCurrentSelection(out IShellItem ppsi);
        void SetFileName([In, MarshalAs(UnmanagedType.LPWStr)] string pszName);
        void GetFileName([MarshalAs(UnmanagedType.LPWStr)] out string pszName);
        void SetTitle([In, MarshalAs(UnmanagedType.LPWStr)] string pszTitle);
        void SetOkButtonLabel([In, MarshalAs(UnmanagedType.LPWStr)] string pszText);
        void SetFileNameLabel([In, MarshalAs(UnmanagedType.LPWStr)] string pszLabel);
        void GetResult(out IShellItem ppsi);
        void AddPlace(IShellItem psi, int alignment);
        void SetDefaultExtension([In, MarshalAs(UnmanagedType.LPWStr)] string pszDefaultExtension);
        void Close(int hr);
        void SetClientGuid();  // not fully defined
        void ClearClientData();
        void SetFilter([MarshalAs(UnmanagedType.Interface)] IntPtr pFilter);
        void GetResults([MarshalAs(UnmanagedType.Interface)] out IntPtr ppenum); // not fully defined
        void GetSelectedItems([MarshalAs(UnmanagedType.Interface)] out IntPtr ppsai); // not fully defined
    }

    [ComImport]
    [Guid("43826D1E-E718-42EE-BC55-A1E261C37BFE")]
    [InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
    private interface IShellItem
    {
        void BindToHandler(); // not fully defined
        void GetParent(); // not fully defined
        void GetDisplayName([In] SIGDN sigdnName, [MarshalAs(UnmanagedType.LPWStr)] out string ppszName);
        void GetAttributes();  // not fully defined
        void Compare();  // not fully defined
    }

    private enum SIGDN : uint
    {
        SIGDN_DESKTOPABSOLUTEEDITING = 0x8004c000,
        SIGDN_DESKTOPABSOLUTEPARSING = 0x80028000,
        SIGDN_FILESYSPATH = 0x80058000,
        SIGDN_NORMALDISPLAY = 0,
        SIGDN_PARENTRELATIVE = 0x80080001,
        SIGDN_PARENTRELATIVEEDITING = 0x80031001,
        SIGDN_PARENTRELATIVEFORADDRESSBAR = 0x8007c001,
        SIGDN_PARENTRELATIVEPARSING = 0x80018001,
        SIGDN_URL = 0x80068000
    }

    [Flags]
    private enum FOS
    {
        FOS_ALLNONSTORAGEITEMS = 0x80,
        FOS_ALLOWMULTISELECT = 0x200,
        FOS_CREATEPROMPT = 0x2000,
        FOS_DEFAULTNOMINIMODE = 0x20000000,
        FOS_DONTADDTORECENT = 0x2000000,
        FOS_FILEMUSTEXIST = 0x1000,
        FOS_FORCEFILESYSTEM = 0x40,
        FOS_FORCESHOWHIDDEN = 0x10000000,
        FOS_HIDEMRUPLACES = 0x20000,
        FOS_HIDEPINNEDPLACES = 0x40000,
        FOS_NOCHANGEDIR = 8,
        FOS_NODEREFERENCELINKS = 0x100000,
        FOS_NOREADONLYRETURN = 0x8000,
        FOS_NOTESTFILECREATE = 0x10000,
        FOS_NOVALIDATE = 0x100,
        FOS_OVERWRITEPROMPT = 2,
        FOS_PATHMUSTEXIST = 0x800,
        FOS_PICKFOLDERS = 0x20,
        FOS_SHAREAWARE = 0x4000,
        FOS_STRICTFILETYPES = 4
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-20T21:09:40.493

这是一个与 Simon Mourier 的答案相同的解决方案，无需直接使用互操作（.Net 会为您处理）。如果 Windows 版本不够高，它还具有回退到 Vista 之前的对话框的附加功能。应该在 Windows 7、8、10 和更高版本（理论上）中工作。

有一个很大的警告：微软可以随意更改其内部类。由于这使用反射来破坏范围规则并且不支持此操作（Microsoft 只对公开公开的内容感兴趣），因此如果 Microsoft 确实进行更改，此代码可能会中断。

```
using System;
using System.Reflection;
using System.Windows.Forms;

namespace ErikE.Shuriken {
    /// <summary>
    /// Present the Windows Vista-style open file dialog to select a folder. Fall back for older Windows Versions
    /// </summary>
    public class FolderSelectDialog {
        private string _initialDirectory;
        private string _title;
        private string _fileName = "";

        public string InitialDirectory {
            get { return string.IsNullOrEmpty(_initialDirectory) ? Environment.CurrentDirectory : _initialDirectory; }
            set { _initialDirectory = value; }
        }
        public string Title {
            get { return _title ?? "Select a folder"; }
            set { _title = value; }
        }
        public string FileName { get { return _fileName; } }

        public bool Show() { return Show(IntPtr.Zero); }

        /// <param name="hWndOwner">Handle of the control or window to be the parent of the file dialog</param>
        /// <returns>true if the user clicks OK</returns>
        public bool Show(IntPtr hWndOwner) {
            var result = Environment.OSVersion.Version.Major >= 6
                ? VistaDialog.Show(hWndOwner, InitialDirectory, Title)
                : ShowXpDialog(hWndOwner, InitialDirectory, Title);
            _fileName = result.FileName;
            return result.Result;
        }

        private struct ShowDialogResult {
            public bool Result { get; set; }
            public string FileName { get; set; }
        }

        private static ShowDialogResult ShowXpDialog(IntPtr ownerHandle, string initialDirectory, string title) {
            var folderBrowserDialog = new FolderBrowserDialog {
                Description = title,
                SelectedPath = initialDirectory,
                ShowNewFolderButton = false
            };
            var dialogResult = new ShowDialogResult();
            if (folderBrowserDialog.ShowDialog(new WindowWrapper(ownerHandle)) == DialogResult.OK) {
                dialogResult.Result = true;
                dialogResult.FileName = folderBrowserDialog.SelectedPath;
            }
            return dialogResult;
        }

        private static class VistaDialog {
            private const string c_foldersFilter = "Folders|\n";

            private const BindingFlags c_flags = BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic;
            private readonly static Assembly s_windowsFormsAssembly = typeof(FileDialog).Assembly;
            private readonly static Type s_iFileDialogType = s_windowsFormsAssembly.GetType("System.Windows.Forms.FileDialogNative+IFileDialog");
            private readonly static MethodInfo s_createVistaDialogMethodInfo = typeof(OpenFileDialog).GetMethod("CreateVistaDialog", c_flags);
            private readonly static MethodInfo s_onBeforeVistaDialogMethodInfo = typeof(OpenFileDialog).GetMethod("OnBeforeVistaDialog", c_flags);
            private readonly static MethodInfo s_getOptionsMethodInfo = typeof(FileDialog).GetMethod("GetOptions", c_flags);
            private readonly static MethodInfo s_setOptionsMethodInfo = s_iFileDialogType.GetMethod("SetOptions", c_flags);
            private readonly static uint s_fosPickFoldersBitFlag = (uint) s_windowsFormsAssembly
                .GetType("System.Windows.Forms.FileDialogNative+FOS")
                .GetField("FOS_PICKFOLDERS")
                .GetValue(null);
            private readonly static ConstructorInfo s_vistaDialogEventsConstructorInfo = s_windowsFormsAssembly
                .GetType("System.Windows.Forms.FileDialog+VistaDialogEvents")
                .GetConstructor(c_flags, null, new[] { typeof(FileDialog) }, null);
            private readonly static MethodInfo s_adviseMethodInfo = s_iFileDialogType.GetMethod("Advise");
            private readonly static MethodInfo s_unAdviseMethodInfo = s_iFileDialogType.GetMethod("Unadvise");
            private readonly static MethodInfo s_showMethodInfo = s_iFileDialogType.GetMethod("Show");

            public static ShowDialogResult Show(IntPtr ownerHandle, string initialDirectory, string title) {
                var openFileDialog = new OpenFileDialog {
                    AddExtension = false,
                    CheckFileExists = false,
                    DereferenceLinks = true,
                    Filter = c_foldersFilter,
                    InitialDirectory = initialDirectory,
                    Multiselect = false,
                    Title = title
                };

                var iFileDialog = s_createVistaDialogMethodInfo.Invoke(openFileDialog, new object[] { });
                s_onBeforeVistaDialogMethodInfo.Invoke(openFileDialog, new[] { iFileDialog });
                s_setOptionsMethodInfo.Invoke(iFileDialog, new object[] { (uint) s_getOptionsMethodInfo.Invoke(openFileDialog, new object[] { }) | s_fosPickFoldersBitFlag });
                var adviseParametersWithOutputConnectionToken = new[] { s_vistaDialogEventsConstructorInfo.Invoke(new object[] { openFileDialog }), 0U };
                s_adviseMethodInfo.Invoke(iFileDialog, adviseParametersWithOutputConnectionToken);

                try {
                    int retVal = (int) s_showMethodInfo.Invoke(iFileDialog, new object[] { ownerHandle });
                    return new ShowDialogResult {
                        Result = retVal == 0,
                        FileName = openFileDialog.FileName
                    };
                }
                finally {
                    s_unAdviseMethodInfo.Invoke(iFileDialog, new[] { adviseParametersWithOutputConnectionToken[1] });
                }
            }
        }

        // Wrap an IWin32Window around an IntPtr
        private class WindowWrapper : IWin32Window {
            private readonly IntPtr _handle;
            public WindowWrapper(IntPtr handle) { _handle = handle; }
            public IntPtr Handle { get { return _handle; } }
        }
    }
} 
```

[我将其开发为.NET Win 7 风格的文件夹选择对话框](http://www.lyquidity.com/devblog/?p=136)的清理版本，由[lyquidity.com](http://lyquidity.com)的 Bill Seddon开发（我没有从属关系）。我自己编写了自己的解决方案，因为他的解决方案需要一个额外的 Reflection 类，该类不需要这个重点目的，使用基于异常的流控制，不缓存其反射调用的结果。请注意，嵌套的静态类是这样的，如果从不调用该方法，则`VistaDialog`不会尝试填充其静态反射变量。`Show`

它在 Windows 窗体中的使用方式如下：

```
var dialog = new FolderSelectDialog {
    InitialDirectory = musicFolderTextBox.Text
    Title = "Select a folder to import music from"
};
if (dialog.Show(Handle)) {
    musicFolderTextBox.Text = dialog.FileName;
} 
```

您当然可以使用它的选项以及它公开的属性。例如，它允许在 Vista 风格的对话框中进行多选。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-22T15:37:11.733

ErikE的[代码在 .NETCore3.1](https://stackoverflow.com/a/33836106/8225290)**上不起作用**（抱歉，没有足够的声誉来发表评论......）。此行必须更改：

```
 private readonly static MethodInfo s_onBeforeVistaDialogMethodInfo = typeof(OpenFileDialog).GetMethod("OnBeforeVistaDialog", c_flags); 
```

它一定要是：

```
 private readonly static MethodInfo s_onBeforeVistaDialogMethodInfo = typeof(FileDialog).GetMethod("OnBeforeVistaDialog", c_flags); 
```

方法“OnBeforeVistaDialog”是在 .NETFramework 4.6 和 .NETCore 3.1 中的“FileDialog”类型上定义的，但似乎反射在 .NETCore 中的工作方式不同。

对于**.NET 6**，有更多的内部变化：接口“IFileDialog”被移动到程序集“System.Windows.Forms.Primitives”并嵌套在内部类“Interop”、嵌套类“Shell32”中。枚举“FOS”也是如此，这里的值名称也发生了变化。

下面是反射部分的完整代码：

```
 private const BindingFlags c_flags = BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic;
      private readonly static Assembly s_windowsFormsAssembly = typeof(FileDialog).Assembly;
      private readonly static Assembly s_windowsFormsPrimitivesAssembly = Assembly.Load("System.Windows.Forms.Primitives");
      private readonly static Type s_iFileDialogType = s_windowsFormsPrimitivesAssembly.GetType("Interop+Shell32+IFileDialog");
      private readonly static MethodInfo s_createVistaDialogMethodInfo = typeof(OpenFileDialog).GetMethod("CreateVistaDialog", c_flags);
      private readonly static MethodInfo s_onBeforeVistaDialogMethodInfo = typeof(FileDialog).GetMethod("OnBeforeVistaDialog", c_flags);

      private readonly static MethodInfo s_getOptionsMethodInfo = typeof(FileDialog).GetMethod("GetOptions", c_flags);
      private readonly static MethodInfo s_setOptionsMethodInfo = s_iFileDialogType.GetMethod("SetOptions", c_flags);
      private readonly static uint s_fosPickFoldersBitFlag = (uint)s_windowsFormsPrimitivesAssembly
          .GetType("Interop+Shell32+FOS")
          .GetField("PICKFOLDERS")
          .GetValue(null);
      private readonly static ConstructorInfo s_vistaDialogEventsConstructorInfo = s_windowsFormsAssembly
          .GetType("System.Windows.Forms.FileDialog+VistaDialogEvents")
          .GetConstructor(c_flags, null, new[] { typeof(FileDialog) }, null);
      private readonly static MethodInfo s_adviseMethodInfo = s_iFileDialogType.GetMethod("Advise");
      private readonly static MethodInfo s_unAdviseMethodInfo = s_iFileDialogType.GetMethod("Unadvise");
      private readonly static MethodInfo s_showMethodInfo = s_iFileDialogType.GetMethod("Show"); 
```

# excel - 如何逐行读取 Excel 文件并将电子邮件发送到工作表上的姓名？

> ID：15368774
> 
> 赞同：0
> 
> 时间：2013-03-12T18:05:21.803
> 
> 标签：excel, vba, vbscript, outlook

我们有一个名为*empList.xlsx*的 Excel 文件，其中包含一个用户列表，这些用户的服务器非常接近空间不足。

该电子邮件旨在告知用户当前空间状态并删除一些文件以释放一些空间。

下面的 VB 脚本只读取员工的电子邮件地址并向他们发送电子邮件通知，但不读取特定行的其余数据。

```
Set objExcel = CreateObject("Excel.Application")

Function getEmail()
    Dim iCol As Integer, iRow As Integer
    Dim sEmailBody As String
    Dim sEmailTo as string ' the recipient
    iCol = 1 ' column A
    iRow = 2 ' row 2

    Do
        sEmailTo = cells(irow, 1).text
        sEmailBody = sendData(iRow)
        iRow = iRow + 1
    Loop While Not Len(Trim(Cells(iRow, iCol))) = 0
End Function

Function sendData(ByVal iRow As Integer) As String
    Dim iCol As Integer

    For iCol = 2 To 11 ' B=2, K=11
        sendData = sendData & Cells(iRow, iCol).Text & vbCrLf
    Next

    MsgBox sendData
End Function

Set objExcel = CreateObject("Excel.Application")
Set objEmail = CreateObject("CDO.Message")
set objConf = CreateObject("CDO.Configuration")
Set objWorkbook = objExcel.Workbooks.Open _
   ("C:\Logs\EmpList.xlsx")

Set objFlds = objConf.Fields
With objFlds
  .Item("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2
  .Item("http://schemas.microsoft.com/cdo/configuration/smtpserver") = "smtprey.domain.com"
  .Item("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25
  '.Item("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate") = cdoAnonymous
  .Update
End With
Set objEmail.Configuration = objConf
x = 2
Do Until objExcel.Cells(x, 2).Value = ""
    Set objEmail.Configuration = objConf

    objEmail.From = "noReply@domain.com"
    objEmail.To = objExcel.Cells(x, 2)
    objEmail.Subject = "Your H Drive is Full"
    objEmail.Textbody = sendData(2)
    objEmail.Send
    x = x + 1
Loop
objExcel.Quit 
```

下面是每行如何布局的示例：

```
Jim.Brown@domain.com|H:\home\matt.tavakolian\|60.3 GB|54629.5 GB|2274|288|0.0 GB| 6.7%|3/4/2013 3:11 PM|3/11/2013 12:16 PM|9/23/2008 3:26 PM 
```

由于我不知道添加附件的方法，因此我使用管道 (|) 来指示每行每个单元格的数据。

上面的示例表示从 CellA 到 CellK 的第 2 行。

我们想要做的是发送一封电子邮件说，Jim.Brown@domain.com 在第 2 行并包括该行上的所有数据（从 CellA 到 CellK）以显示当前服务器硬盘空间。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:28:44.123

你可以尝试这样的事情（显然使用 Excel 对象和工作簿对象）：

```
Function getEmail()

Dim iCol As Integer, iRow As Integer
Dim sEmailBody As String
Dim sEmailTo as string ' the recipient
iCol = 1 ' column A
iRow = 2 ' row 2

Do
    sEmailTo=cells(irow,1).text
    sEmailBody = sendData(iRow)
    iRow = iRow + 1
Loop While Not Len(Trim(Cells(iRow, iCol))) = 0

End Function 
```

在该函数中，您调用以下函数来获取电子邮件正文！

```
Function sendData(ByVal iRow As Integer) As String

Dim iCol As Integer

For iCol = 2 To 11 ' B=2, K=11
    sendData = sendData & Cells(iRow, iCol).Text & vbCrLf
Next

    MsgBox sendData

End Function 
```

所以只需调用函数“getEmaily”来获取电子邮件地址和进入您的电子邮件正文的正文！

高温高压

菲利普

# javascript - 使用 jQuery 动态创建表单中的特殊字符

> ID：15368777
> 
> 赞同：-3
> 
> 时间：2013-03-12T18:05:26.077
> 
> 标签：javascript, jquery

我正在动态创建一个表单并像下面的代码一样提交它，其中数据是一个 js 对象。

```
var inputStr = '';
if (typeof data != undefined) {
  for (var prop in data) {
    if (data.hasOwnProperty(prop)) {
       inputStr += "<input type='text' name='" + prop + "' value='" + data[prop] + "' />";
    }
  }
}
var form = $('<form style="display:none;" action="/someurl.do" method="post">' + inputStr + '</form>');
$('body').append(form);
$(form).attr('target', '_blank');
$(form).submit(); 
```

现在我遇到了特殊字符的问题。如果数据的任何属性包含任何特殊字符，则会将其转换为一些垃圾字符。有关如何解决此问题的任何指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:30:03.540

问题是您通过连接字符串手动创建元素。您可以通过将封闭标记传递给 jQuery 对象来动态创建元素。例如，如果您想创建一个新`<input/>`元素，只需执行以下操作：

```
var input = $('<input/>'); 
```

如果您需要指定该元素的属性/属性，请传入一个对象作为第二个参数，如下所示：

```
var input = $('<input/>',{
    name : 'theName',
    value : 'theValue'
}); 
```

以这种方式传递的值将被正确转义（特殊字符将被解析）。你也可以这样做：

```
var input = $('<input/>',{
    name : 'theName'
}).val('theValue'); 
```

我相应地重构了您的代码：

[http://jsfiddle.net/vdxnn/1/](http://jsfiddle.net/vdxnn/1/)

```
//Sample data
var data = {
    field1 : 'Q@#*&^$@$)@^#$',
    field2 : 'value2',
};

//Create the form
var form = $('<form/>',{
    target: 'blank',
    action: '/someurl.do',
    method: 'post'
    //NOTE: `style : 'display:none'` isn't necessary;
    //      just use the hide() method
});

//Loop through data object
if (typeof data !== 'undefined') {
  for (var prop in data) {
      //Create a new <input/> element
      var input = $('<input/>',{
          type:'text',
          name: prop,
          value: data[prop]
      });
      //Append it to the form
      form.append(input);
  }
}

//Hide the form
form.hide()

//Append the form to the body
$('body').append(form);

//Submit the form
$(form).submit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:12:20.250

*   什么是特殊字符？
*   是从哪里来`data`的？
*   的价值是什么`data`？

每日一课：`if (typeof data != undefined)...`你可以做`if (data)...`

# javascript - 如何在图形条上方显示值标签？

> ID：15368781
> 
> 赞同：3
> 
> 时间：2013-03-12T18:05:46.077
> 
> 标签：javascript, d3.js

有没有办法在此图中的条形上方显示值？我有从 TSV 检索的值，但目前难以将条形值显示为每个相应条形上方的标签。

这是我作为 TSV 拥有的数据： ![在此处输入图像描述](../Images/e1a7009ab1e5aa996104d0f69e433829.png)

这是我目前用于渲染图表的内容：

```
margin =
top: 30
right: 30
bottom: 40
left: 60
width = 960 - margin.left - margin.right
height = 500 - margin.top - margin.bottom

formatPercent = d3.format("")

x = d3.scale.ordinal()
    .rangeRoundBands([width, 0], .1)

y = d3.scale.linear()
    .range([height, 0])

xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom")
    .tickFormat(formatPercent)

yAxis = d3.svg.axis()
    .scale(y)
    .orient("left")
    .tickFormat(formatPercent)

svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")")

d3.tsv("/Home/GetTsv/data.tsv", (error, data)->

    data.forEach((d)->
        d.Total = +d.Total
    )

    x.domain(data.map((d)-> d.Year))
    y.domain([0, d3.max(data, (d)-> d.Total)])

    svg.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + height + ")")
        .call(xAxis)
        .append("text")
        .attr("y", 30)
        .attr("x", width / 2)
        .attr("dy", ".71em")
        .style("text-anchor", "end")
        .text("Year")

    svg.append("g")
        .attr("class", "y axis")
        .call(yAxis)
        .append("text")
        .attr("transform", "rotate(-90)")
        .attr("y", -60)
        .attr("x", -(height / 2))
        .attr("dy", ".71em")
        .style("text-anchor", "end")
        .text("Total Activity")

    svg.selectAll(".bar")
        .data(data)
        .enter().append("rect")
        .attr("class", "bar")
        .attr("x", (d)-> x(d.Year))
        .attr("width", x.rangeBand())
        .attr("y", (d)-> y(d.Total))
        .attr("height", (d)-> height - y(d.Total))

#   svg.selectAll("text")
#       .data(data)
#       .enter()
#       .append("text")
#       .text((d)-> d.Total)
#       .attr("x", (d, i)-> i * (width / data.length))
#       .attr("y", (d)-> height - d)

) 
```

这是我的图表的样子：

![在此处输入图像描述](../Images/4e9cd7f584d2bd8a5d0e9d18b5b13645.png)

但我想在条形上方有标签，类似于：

![在此处输入图像描述](../Images/0657e1921ebe508cc3f6fe47214c76b3.png)

注释掉的代码是我试图使值标签显示在条形上方的尝试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T19:56:33.267

将此代码粘贴到文本部分应该可以解决问题：

```
.attr("text-anchor", "middle")
.attr("x", function(d, i) { return i * (width / dataset.length) + (width / dataset.length) / 2; })
.attr("y", function(d) { return height - (d * 10) - 10; }) 
```

那里的 -10 与栏有一些距离，在这种情况下显然是 10px。其他数字也需要稍微调整一下，我只是粘贴了我拥有的文件中的代码，所以我不知道它在你的代码上会是什么样子，因为我没有数据集可以尝试。如果不能，您可以将脚本粘贴到[http://jsfiddle.net/](http://jsfiddle.net/)以便我尝试解决吗？让我知道它是如何工作的！

# c++ - C++ 中未解决的外部：Visual C++ 破坏方法签名与 dll 中的破坏方法不同

> ID：15368791
> 
> 赞同：0
> 
> 时间：2013-03-12T18:06:17.690
> 
> 标签：c++, visual-c++, dll, visual-studio-2012, dynamic-linking

我正在使用托管 C++ 的 Visual Studio 2012 在第三方 SDK 和我们用 C# 编写的系统之间架起一座桥梁。我已成功包装并使用了所述 SDK 中的几个功能。除了一个，它只会导致未解决的外部错误。

SDK 的头文件定义了函数的签名：

```
#if defined WIN32
    #if defined BUILD_ADS_SHARED_LIB
        #define ADS_LINK_SPEC __declspec (dllexport)
        #define ADS_CALLING_CONVENTION __stdcall
    #elif defined USE_ADS_SHARED_LIB
        #define ADS_LINK_SPEC __declspec (dllimport)
        #define ADS_CALLING_CONVENTION __stdcall
    #else
        #define ADS_LINK_SPEC
        #define ADS_CALLING_CONVENTION
    #endif
#else
    #define ADS_LINK_SPEC
    #define ADS_CALLING_CONVENTION
#endif

DatabaseResult ADS_LINK_SPEC ADS_CALLING_CONVENTION
createDatabase(
    const Settings& settings, Artec::SdkDatabase::iDatabase *& instance); 
```

错误说：

```
Error   10  error LNK2028: unresolved token (0A000089) "enum Artec::SdkDatabase::DatabaseResult __cdecl Artec::SdkDatabase::createDatabase(class Artec::SdkDatabase::Settings const &,class Artec::SdkDatabase::iDatabase * &)" (?createDatabase@SdkDatabase@Artec@@$$FYA?AW4DatabaseResult@12@ABVSettings@12@AAPAViDatabase@12@@Z) referenced in function "private: static enum Artec::SdkDatabase::DatabaseResult __clrcall Broadway3dWrapper::Broadway3dWrapper::GetConn(wchar_t const *,wchar_t const *,wchar_t const *,wchar_t const *,char const *,class Artec::SdkDatabase::iDatabase * &)" (?GetConn@Broadway3dWrapper@1@$$FCM?AW4DatabaseResult@SdkDatabase@Artec@@PB_W000PBDAAPAViDatabase@34@@Z) C:\bioap\tfs\Identitum\Dev\src\BA.Identitum.Devices.Broadway3d\Broadway3dWrapper.obj    BA.Identitum.Devices.Brodway3D 
```

所以它正在寻找损坏的名称：

```
?createDatabase@SdkDatabase@Artec@@$$FYA?AW4DatabaseResult@12@ABVSettings@12@AAPAViDatabase@12@@Z 
```

在引用的dll上做了一个小dumpbin，我发现实际上有一个类似的函数被导出，事情是名称略有不同：

```
?createDatabase@SdkDatabase@Artec@@YG?AW4DatabaseResult@12@ABVSettings@12@AAPAViDatabase@12@@Z 
```

有人能帮我一下吗？我无法联系 SDK 供应商，我完全迷失在这里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T18:44:26.083

这两者之间的区别在于调用约定部分。

`createDatabase@SdkDatabase@Artec@@YG?AW4DatabaseResult@12@ABVSettings@12@AAPAViDatabase@12@@Z`是标准调用：`enum Artec::SdkDatabase::DatabaseResult __stdcall Artec::SdkDatabase::createDatabase(class Artec::SdkDatabase::Settings const &,class Artec::SdkDatabase::iDatabase * &)`

我使用的[demangler](http://slush.warosu.org/c++filtjs/)不理解`?createDatabase@SdkDatabase@Artec@@$$FYA?AW4DatabaseResult@12@ABVSettings@12@AAPAViDatabase@12@@Z`，但它们不同的部分（`@@$$FYA?`vs `@@YG?`）是调用约定（如果我更改`YG`为`YF`，调用约定会更改，而没有其他内容）。

将函数声明更改为`return-type __stdcall function-name[(argument-list)]`.

当您包含头文件时，您是`#define USE_ADS_SHARED_LIB`显式地还是在编译器命令行上？您的目标是 32 位窗口吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T18:59:15.427

使用 undname.exe 实用程序取消装饰名称。它正在寻找：

```
enum Artec::SdkDatabase::DatabaseResult 
__cdecl 
Artec::SdkDatabase::createDatabase(
    class Artec::SdkDatabase::Settings const &,
    class Artec::SdkDatabase::iDatabase * &
) 
```

你找到的是：

```
enum Artec::SdkDatabase::DatabaseResult 
__stdcall 
Artec::SdkDatabase::createDatabase(
    class Artec::SdkDatabase::Settings const &,
    class Artec::SdkDatabase::iDatabase * &
) 
```

一切都匹配，除了调用约定，__cdecl vs __stdcall。请注意 SDK 标头是如何允许这种情况发生的，当 BUILD_ADS_SHARED_LIB 和 USE_ADS_SHARED_LIB 都不是 #defined 时，它不会引起恶臭。这将产生一个 __cdecl 函数。坏主意顺便说一句。

如此高的几率以至于您忘记定义 USE_ADS_SHARED_LIB。项目 + 属性、C/C++、预处理器、预处理器定义设置。

# perl - Perl - 如何创建用户可以在控制台中输入的命令？

> ID：15368793
> 
> 赞同：1
> 
> 时间：2013-03-12T18:06:22.323
> 
> 标签：perl, scripting

我刚刚开始使用 Perl，我非常喜欢它。我正在编写一些基本功能，但我真正想做的是使用控制台命令智能地使用这些功能。例如，假设我有一个添加两个数字的函数。我希望能够在控制台中输入“add 2, 4”并读取第一个单词，然后将这两个数字作为参数传递给“add”函数。本质上，我在使用 Perl ^^' 创建一些基本脚本时寻求帮助。

我对如何在 VB 中执行此操作有一些模糊的想法，但是 Perl，我不知道从哪里开始，也不知道哪些函数对我有用。是否有类似 VB.net 的“拆分”功能，您可以将标量的内容分解为数组？例如，有没有一种简单的方法可以一次分析一个标量中的一个单词，或者遍历一个标量直到遇到分隔符？

我希望你能帮助，任何建议表示赞赏！请记住，我不是专家，我几周前就开始使用 Perl，而我只做 VB.net 半年。

谢谢！

编辑：如果您不确定要建议什么并且您知道任何可能有帮助的简单/直观的资源，那也将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:41:35.547

制作一个按名称分派给命令的脚本相当容易。这是一个简单的例子：

```
#!/usr/bin/env perl

use strict;
use warnings;

# take the command name off the @ARGV stack
my $command_name = shift;

# get a reference to the subroutine by name
my $command = __PACKAGE__->can($command_name) || die "Unknown command: $command_name\n";

# execute the command, using the rest of @ARGV as arguments
# and print the return with a trailing newline
print $command->(@ARGV);
print "\n";

sub add {
  my ($x, $y) = @_;
  return $x + $y;
}

sub subtract {
  my ($x, $y) = @_;
  return $x - $y;
} 
```

这个脚本（比如它的名字`myscript.pl`）可以被称为

```
$ ./myscript.pl add 2 3 
```

或者

```
$ ./myscript.pl subtract 2 3 
```

一旦你玩了一段时间，你可能想更进一步，为这种事情使用一个框架。有几个可用的，例如[App::Cmd](https://metacpan.org/module/App%3a%3aCmd)或者您可以采用上面显示的逻辑并按照您认为合适的方式进行模块化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:34:52.090

这是一个简单脚本语言的简短实现。

每条语句只有一行长，并具有以下结构：

```
Statement = [<Var> =] <Command> [<Arg> ...]
# This is a regular grammar, so we don't need a complicated parser. 
```

令牌由空格分隔。一个命令可以接受任意数量的参数。这些可以是 variables `$var`、 string`"foo"`或数字（int 或 float）的内容。

由于这些是 Perl 标量，因此字符串和数字之间没有明显的区别。

这是脚本的序言：

```
#!/usr/bin/perl
use strict;
use warnings;
use 5.010; 
```

`strict`并且`warnings`在学习 Perl 时必不可少，否则可能会出现太多奇怪的东西。这`use 5.010`是一个最低版本，它还定义了`say`内置函数（像 a`print`但附加了一个换行符）。

现在我们声明两个全局变量：`%env`哈希（表或字典）将变量名与其值相关联。`%functions`保存我们的内置函数。这些值是匿名函数。

```
my %env;

my %functions = (
  add => sub { $_[0] + $_[1] },
  mul => sub { $_[0] * $_[1] },
  say => sub { say $_[0] },
  bye => sub { exit 0 },
); 
```

现在是我们的读取评估循环（默认情况下我们不打印）。readline 运算符`<>`将从指定为第一个命令行参数的文件中读取，如果没有提供文件名，则从 STDIN 中读取。

```
while (<>) {
  next if /^\s*\#/; # jump comment lines
  # parse the line. We get a destination $var, a $command, and any number of @args
  my ($var, $command, @args) = parse($_);
  # Execute the anonymous sub specified by $command with the @args
  my $value = $functions{ $command }->(@args);
  # Store the return value if a destination $var was specified
  $env{ $var } = $value if defined $var;
} 
```

那是相当微不足道的。现在来一些解析代码。Perl 使用运算符将​​正则表达式“绑定”到字符串`=~`。正则表达式可能看起来像`/foo/`或`m/foo/`。这些`/x`标志允许我们在我们的正则表达式中包含与实际空格不匹配的空格。该`/g`标志在全球范围内匹配。这也启用了`\G`断言。这是最后一场成功的比赛结束的地方。该`/c`标志对于这种`m//gc`样式解析一次使用一个匹配项以及防止正则表达式引擎在输出字符串中的位置被重置很重要。

```
sub parse {
  my ($line) = @_; # get the $line, which is a argument
  my ($var, $command, @args); # declare variables to be filled

  # Test if this statement has a variable declaration
  if ($line =~ m/\G\s* \$(\w+) \s*=\s* /xgc) {
    $var = $1; # assign first capture if successful
  }

  # Parse the function of this statement.
  if ($line =~ m/\G\s* (\w+) \s*/xgc) {
    $command = $1;
    # Test if the specified function exists in our %functions
    if (not exists $functions{$command}) {
      die "The command $command is not known\n";
    }
  } else {
    die "Command required\n"; # Throw fatal exception on parse error.
  }

  # As long as our matches haven't consumed the whole string...
  while (pos($line) < length($line)) {
    # Try to match variables
    if ($line =~ m/\G \$(\w+) \s*/xgc) {
      die "The variable $1 does not exist\n" if not exists $env{$1};
      push @args, $env{$1};
    }
    # Try to match strings
    elsif ($line =~ m/\G "([^"]+)" \s*/xgc) {
      push @args, $1;
    }
    # Try to match ints or floats
    elsif ($line =~ m/\G (\d+ (?:\.\d+)? ) \s*/xgc) {
      push @args, 0+$1;
    }
    # Throw error if nothing matched
    else {
      die "Didn't understand that line\n";
    }
  }
  # return our -- now filled -- vars.
  return $var, $command, @args;
} 
```

Perl 数组可以像链表一样处理：`shift`删除并返回第一个元素（`pop`对最后一个元素执行相同的操作）。`push`在末尾添加一个元素，添加`unshift`到开头。

Out little 编程语言可以执行简单的程序，例如：

```
#!my_little_language
$a = mul 2 20
$b = add 0 2
$answer = add $a $b
say $answer
bye 
```

如果 (1) 我们的 perl 脚本保存在 中`my_little_language`，设置为可执行，并且在系统 PATH 中，并且 (2) 上面的文件以我们的小语言保存为`meaning_of_life.mll`，并且也设置为可执行，那么

```
$ ./meaning_of_life 
```

应该能够运行它。

输出很明显`42`。请注意，我们的语言还没有字符串操作或对变量的简单赋值。此外，如果能够直接调用具有其他函数返回值的函数，那就太好了。这需要某种括号或优先机制。此外，该语言需要更好的批处理错误报告（它已经支持）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T18:13:57.860

您想解析命令行参数。A`space`作为分隔符，所以只需执行`./add.pl 2 3`以下操作：

```
$num1=$ARGV[0];
$num2=$ARGV[1];

print $num1 + $num2; 
```

将打印`5`

# forms - JSP Post 等价物

> ID：15368800
> 
> 赞同：0
> 
> 时间：2013-03-12T18:06:43.327
> 
> 标签：forms, jsp

我是新手`JSP`，这让我很困惑。
在`Php`我可以做这样的事情：

```
<FORM METHOD="POST" ACTION="LoginFormAction.php">
<INPUT TYPE="TEXT" NAME="username" SIZE="16"> 
```

然后使用它来获取以下内容`TextBox`：

```
$_POST['username']; 
```

我目前的等价物`Jsp`是：

```
 <form action="checkLogin.jsp">
 <input name="username" size=15 type="text" /> 
```

提交表单后，如何获取其中的内容`TextBox`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:11:59.690

您可以只使用： request.getParameter("username").toString()

# sql - 在 SQL 中查找最长的连续递增数字序列

> ID：15368801
> 
> 赞同：6
> 
> 时间：2013-03-12T18:06:51.043
> 
> 标签：sql, sql-server

对于此示例，假设我有一个包含两个字段的表，`AREA varchar(30)`并且`OrderNumber INT`.

该表有以下数据

```
AREA      | OrderNumber
Fontana   |       32
Fontana   |       42
Fontana   |       76
Fontana   |       12
Fontana   |        3
Fontana   |       99
RC        |       32
RC        |        1
RC        |        8
RC        |        9
RC        |        4 
```

**我想回来**

我想返回的结果是每个区域增加连续值的最长长度。对于`Fontana it is 3 (32, 42, 76)`.`For RC it is 2 (8,9)`

```
AREA    | LongestLength
Fontana |          3
RC      |          2 
```

我将如何在 MS Sql 2005 上执行此操作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T18:47:05.540

一种方法是使用遍历每一行的递归 CTE。如果该行符合条件（增加同一区域的订单号），则将链长度增加一。如果没有，你开始一个新的链：

```
; with  numbered as
        (
        select  row_number() over (order by area, eventtime) rn
        ,       *
        from    Table1
        )
,       recurse as
        (
        select  rn
        ,       area
        ,       OrderNumber
        ,       1 as ChainLength
        from    numbered
        where   rn = 1
        union all
        select  cur.rn
        ,       cur.area
        ,       cur.OrderNumber
        ,       case
                when cur.area = prev.area 
                     and cur.OrderNumber > prev.OrderNumber 
                     then prev.ChainLength + 1
                else 1
                end
        from    recurse prev
        join    numbered cur
        on      prev.rn + 1 = cur.rn
        )
select  area
,       max(ChainLength)
from    recurse
group by
        area 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!3/ca3f84/1/0)

另一种方法是使用查询来查找“中断”，即以同一区域的递增顺序编号序列结束的行。间隔之间的行数是长度。

```
; with  numbered as
        (
        select  row_number() over (order by area, eventtime) rn
        ,       *
        from    Table1 t1
        )
        -- Select rows that break an increasing chain
,       breaks as
        (
        select  row_number() over (order by cur.rn) rn2
        ,       cur.rn
        ,       cur.Area
        from    numbered cur
        left join
                numbered prev
        on      cur.rn = prev.rn + 1
        where   cur.OrderNumber <= prev.OrderNumber
                or cur.Area <> prev.Area
                or prev.Area is null
        )
        -- Add a final break after the last row
,       breaks2 as
        (
        select  *
        from    breaks
        union all
        select  count(*) + 1
        ,       max(rn) + 1
        ,       null
        from    breaks
        )
select  series_start.area
,       max(series_end.rn - series_start.rn)
from    breaks2 series_start
join    breaks2 series_end
on      series_end.rn2 = series_start.rn2 + 1
group by
        series_start.area 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!3/48d5e/1/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:08:06.207

你可以做一些数学计算`ROW_NUMBER()`来找出你有连续项目的地方。

这是代码示例：

```
;WITH rownums AS
(
    SELECT [area], 
        ROW_NUMBER() OVER(PARTITION BY [area] ORDER BY [ordernumber]) AS rid1, 
        ROW_NUMBER() OVER(PARTITION BY [area] ORDER BY [eventtime]) AS rid2
    FROM SomeTable
),
    differences AS 
(
    SELECT [area],
        [calc] = rid1 - rid2
    FROM rownums
),  
    summation AS
(
    SELECT [area], [calc], COUNT(*) AS lengths 
    FROM differences 
    GROUP BY [area], [calc]
)   
SELECT [area], MAX(lengths) AS LongestLength
FROM differences
JOIN summation
    ON differences.[calc] = summation.[calc]
    AND differences.area = calc.area
GROUP BY [area] 
```

因此，如果我按我的 ordernumber 排序一组行号，并按我的事件时间排序另一组行号，这两个数字之间的差异将始终相同，只要它们的顺序相同。

然后，您可以获得按这些差异分组的计数，然后提取最大的计数以获得您需要的。

编辑：...忽略第一次编辑，我急于求成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T10:37:46.163

您没有解释为什么 RC 的最长序列不包含 1 而 Fontana 的最长序列包含 32。我认为，1 被排除在外，因为它是一个减少：它在 32 之后。然而，Fontana 的 32 是第一个项目组，我有两个想法如何解释为什么它被认为是增加。这要么正是因为它是该组的第一项，要么因为它*也是*正数（即好像在 0 之后出现，因此增加了）。

出于这个答案的目的，我假设后者，即如果它是积极的，则一个组的第一项是增加。下面的脚本实现了以下想法：

1.  按照您几乎忘记提及的列的顺序枚举每个`AREA`组中的行。`eventtime`

2.  将枚举集加入到自身中，以将每一行与其前身链接起来。

3.  获取行与其前一个值之间的差异的符号（将后者默认为 0）。在这一点上，问题变成了一个[孤岛](/questions/tagged/gaps-and-islands "显示标记为“差距和岛屿”的问题")问题。

4.  根据 #3 中确定的符号对每个组进行分区`AREA`并枚举每个子组的行。

5.  找出#1 中的行号与#4 中的行号之间的差异。这将是识别单个条纹的标准（连同`AREA`）。

6.  最后，将结果按`AREA`、#3 的符号和#5 的结果分组，计算行数并获得每个 的最大计数`AREA`。

我像这样实现了上述内容：

```
WITH enumerated AS (
  SELECT
    *,
    row = ROW_NUMBER() OVER (PARTITION BY AREA ORDER BY eventtime)
  FROM atable
),
signed AS (
  SELECT
    this.eventtime,
    this.AREA,
    this.row,
    sgn = SIGN(this.OrderNumber - COALESCE(last.OrderNumber, 0))
  FROM      enumerated AS this
  LEFT JOIN enumerated AS last
    ON this.AREA = last.AREA
   AND this.row  = last.row + 1
),
partitioned AS (
  SELECT
    AREA,
    sgn,
    grp = row - ROW_NUMBER() OVER (PARTITION BY AREA, sgn ORDER BY eventtime)
  FROM signed
)
SELECT DISTINCT
  AREA,
  LongestIncSeq = MAX(COUNT(*)) OVER (PARTITION BY AREA)
FROM partitioned
WHERE sgn = 1
GROUP BY
  AREA,
  grp
; 
```

可以在[此处](http://sqlfiddle.com/#!3/6479b)找到 SQL Fiddle 演示。

# assembly - (ASM) 使用更少寄存器的斐波那契函数？

> ID：15368812
> 
> 赞同：1
> 
> 时间：2013-03-12T18:07:41.093
> 
> 标签：assembly, mips

我正在关注 MIPS ASM 的初学者指南。

问题是：

> 将程序编写为一个计数循环，当斐波那契数列的前 100 项计算完毕时终止。 **使用当前术语的寄存器和上一术语的寄存器。循环的每次执行都会计算一个新的当前术语，然后将旧的当前术语复制到前一个术语寄存器中。**

似乎解决方案应该只使用 2 个寄存器；前值和当前值。另一个 2 用于计数器和“101”（书上说在寄存器中使用 101 用于 beq 指令）

**我可以从我的解决方案中删除“总和”寄存器吗？** 我是一个初学者程序员，这让我大吃一惊。

这是错误的，因为它不计算 1,1,3,5,8...而是计算 1,3,5,8。我不知道如何按照本书的方法计算两次“1”。

我的解决方案，基于以下问题：

```
## fibonacci series ##
# $7=sum    $8=prev     $9=current  $10=counter     $11=101 #
.text
main:

ori $7,$0,0     # init sum 0
ori $8,$0,0     # init prev 0
ori $9,$0,1     # init current 1
ori $10,$0,0        # init counter 0
ori $11,$0,101  # init 101

loop:
beq $10,$11,exit
addu $7,$8,$9       # sum = prev+current
or $8,$0,$9         # copy old current to prev
or $9,$0,$7         # copy sum to new current
addiu $10,$10,1    # counter+1
j loop               # go to loop
sll $0,$0,0

exit:
j exit
sll $0,$0,0        # exit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:19:52.213

是的，有可能：

```
addu $9,$9,$8    # current += prev
sub  $8,$9,$8    # prev = current - prev  (== old current) 
```

# android - 一般 Android 建议：全局变量

> ID：15368815
> 
> 赞同：0
> 
> 时间：2013-03-12T18:07:46.680
> 
> 标签：android, variables, global

我想知道为 android 应用程序处理全局变量的最佳方法是什么。例如，我只是想创建一个基本的登录/注册系统。我创建了一个用户类（具有各种属性，如用户名、密码等），因此当我们进入注册活动时，一旦所有字段都填满，就会调用 User 类构造函数来创建一个唯一的用户对象出去。然后我想简单地拥有一个 User 类型的全局数组列表，这样我就可以在登录尝试时遍历所有用户。

到目前为止（由于缺乏 java 经验，并且对这个 android 的东西非常陌生），我还没有能够成功地实现它。我有一个我称之为“globalStuff”的类，它有一堆公共静态变量（即用户列表和当前用户），我认为可以从用户导航到的任何活动中访问它们。

必须有更好的方法来解决这个问题。我一直在这里阅读一些教程和一些帖子，但没有一个解决这个非常基本的想法。那么处理这样的事情的最佳方法是什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T18:12:18.643

它被称为静态单例，它看起来像这样：

```
public class Global {

    private static Global instance = null;

    public static Global getInstance() {
        if( instance == null )
            instance = new Global();
        return instance;
    }

    // additional methods, members, etc...

} 
```

然后，您只需在代码中将其称为：

```
Global.getInstance().getUserList(); 
```

等等

# css - 如何修复背景图像上的 Chrome 条纹

> ID：15368817
> 
> 赞同：1
> 
> 时间：2013-03-12T18:07:54.727
> 
> 标签：css, google-chrome, svg, webkit

我想要一个径向渐变背景。由于我无法使用指南针获得所需的外观，因此我决定使用 SVG 图像。输出：

```
background: url(/images/background.svg) no-repeat center center fixed
background-size: cover 
```

在 Safari、Firefox、Safari Mobile 和 Chrome Mobile 中看起来很棒，但在 Chrome 中却不是。绑扎！

所以我决定以不同的方式处理 Chrome，在通过 jQuery 加载页面后插入背景图像为 PNG 或 JPG。所以我创建了那个图像：

![具有径向渐变的背景图像](../Images/95d967eb50b0edf48b62015af116e91c.png)

我在 Safari、Firefox、Safari Mobile 和 Chrome Mobile 中打开了图像，它看起来还不错，但是当我在 Chrome 中打开它时，它看起来非常糟糕。

我在 OSX 上使用最新的 Chrome 25.0。谁能解释一下，为什么 Chrome 在该[图像](http://dl.dropbox.com/u/7622529/background.jpg)上失败得如此惨？

# javascript - 如何在文件中写入服务器响应？

> ID：15368818
> 
> 赞同：0
> 
> 时间：2013-03-12T18:07:59.190
> 
> 标签：javascript

我收到如下所示的服务器响应，我想使用 javascript 创建一个 html 文件并将其保存在本地计算机上。

HTML 文件

```
 <!DOCTYPE html>
    <html>
    <head>
     <script>
    function copyText()
    {
    }
    </script>
    </head>
    <body>

    Field1: <input type="text" id="field1" value="Hey There"><br>
    Field2: <input type="text" id="field2">
    <br><br>
    <button onclick="copyText()">Copy Text</button> 

    <p>A function is triggered when the button is clicked. The function copies the text from Field1 into Field2.</p>

    </body>
    </html> 
```

是否可以使用 javascript 创建文件？

我试着用

```
 fso = new ActiveXObject("Scripting.FileSystemObject");
                                            thefile=fso.CreateTextFile("C:\\tmp\\MyFile.txt",true);
write(responseHtmlStr) 
```

在 chrome 上，但我收到错误“未捕获的 ReferenceError：ActiveXObject 未定义”

我在某处读到，由于安全威胁，这是不可能的。请指点一下。这将非常有帮助。

谢谢 Gendaful

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:23:22.420

1.  回答你的第一个问题：不，你不能。想象一下，我做了一个网站，通过 javascript 将 C:\WINDOWS\windows.exe 替换为病毒。那太不酷了，浏览器/javascript的创建者让它变得不可能。

2.  “还有其他选择吗？”

是的，如果它在同一台服务器上，则使用 jQuery ajax 加载内容

或者，如果它不在同一台服务器上，则使用 php curl 加载内容（+ajax 可能）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:14:11.273

抱歉，正如您自己所说，由于安全问题，例如病毒被写入您的系统，您无法使用 JavaScript 在本地计算机上创建文件。我建议查看此问题的所有类似答案 - 在 SO 上已被多次询问。

# php - 用php清理内容

> ID：15368819
> 
> 赞同：-1
> 
> 时间：2013-03-12T18:08:04.467
> 
> 标签：php, html, forms, hyperlink

我目前正在使用文本文件，并将其内容写入列表。在列表中，我只是使用 GET 参数来接收列表中所选链接的值。当我点击选择的链接时，我想写下链接的值。情况是列表还在，值写在它下面。我该如何解决这个问题？我需要列表消失，只显示所选链接的名称。我使用 if 语句，但它不起作用。

```
<html>

<head>
<title>Inlämning3</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="style.css">
<script type="text/javascript" src="jQuery.js" >
</script>
<script type="text/javascript" src="valideraFilmer.js" >
</script>

</head>

<body>

<?php
// Skriva film och info till en textfil
if( isset ($_POST['name'])){
    $name = $_POST['name'];
    $grade = $_POST['options'];
    $link = $_POST['link'];
    $pic = $_POST['pic'];
    $story = $_POST['story'];

    $myFile = "filmer.txt";
    $handle = fopen($myFile, 'a');

    if(!empty($name)){
        fwrite($handle, $name. ";");
        fwrite($handle, $grade. ";");
        fwrite($handle, $link. ";");
        fwrite($handle, $pic. ";");
        fwrite($handle, $story. "\n");
        fclose($handle);
    }
}
?>

<div id="page">
    <?php
        include("header.php");
    ?>
    <div id="leftbar">
        <form id="form" method="post" action="Filmer-PHP.php" >
            <fieldset>
                <legend>Lägg till en film:</legend>
                Titel:
                <br><input type="text" name="name" id="name"><br>
                Betyg:
                <br><select id="options" name="options">
                    <option value="0">Välj betyg här...</option>
                    <option value="*"> *</option>
                    <option value="**"> **</option>
                    <option value="***"> ***</option>
                    <option value="****"> ****</option>
                    <option value="*****"> *****</option>                       
                </select>
                <br>
                Länk till imdb:
                <br><input type="text" name="link" id="link"><br>
                Länk till bild:
                <br><input type="text" name="pic" id="pic"><br>
                Filmens handling:
                <br><textArea cols="20" rows="3" name="story" id="story"></textarea><br>
                <br><input type="submit" name="button" value="Spara film" id="button">
            </fieldset>
        </form>
    </div>
    <div id="rightbar">
        <h2>Filmer</h2>

        <?php
        // Läsa av och visa titel och betyg

            if(!isset($readin)){
                $readin = file('filmer.txt');
                $ul = '<ul id="films">';
                echo $ul;
                foreach($readin as $fName){
                    $lineSplit = explode(";", $fName);
                    if(isset($lineSplit[1])){
                        echo '<li>'.'<a href="Filmer-PHP.php?name=' .$lineSplit[0]. '">'.$lineSplit[0].'<span>'.$lineSplit[1].'</span>'.'</a>'.'</li>';
                    }
                }
            }
        ?>

        <?php
        // Läsa av och visa detaljerad info om filmer
            if(isset($_GET['name'])){
                $name = $_GET['name'];
                $readin = file('filmer.txt');
                foreach($readin as $fName){
                    $lineSplit = explode(";", $fName);
                    $lineSplit[0] = $name;
                }
                echo $lineSplit[0];
            }
        ?>

    </div>
        <?php
            include("footer.php");
        ?>
</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:18:26.133

在开始创建列表之前：

```
 if(!isset($readin)){ 
```

在上面添加以下行：

```
 if(!isset($_GET['name'])) { 
```

在该列表构建之后添加

```
 } else {
   echo $_GET['name'];
 } 
```

当未传递参数名称时，这将使列表不显示。它还将打印名称而不是列表。在我理解你的英语之前，我读了你的问题 3 次。祝你好运。

# opencv - 将矩阵 R1 旋转到另一个矩阵，比如 R2

> ID：15368823
> 
> 赞同：1
> 
> 时间：2013-03-12T18:08:11.137
> 
> 标签：opencv, computer-vision, triangulation, stereo-3d

我有两个相机旋转矩阵 R1 和 R2。它们都是根据参考框架计算的。

我的最终目标是使用这两个图像的相应特征执行立体 3D 三角测量。

我的问题，给定两个旋转矩阵 R1 & R2 wrt 一些参考帧，我如何计算代表第一帧和第二帧之间旋转的矩阵“R”？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T22:59:27.650

如果 R1 是第一个相机矩阵的旋转分量，而 R2 是第二个的旋转分量，则第二个相机帧相对于第一个相机帧旋转 R2*inv(R1)。即，给定第一帧中的点X，在第二帧中它将是R2*inv(R1)*X。

# java - Orika - 将对象映射到列表（一对多映射）

> ID：15368825
> 
> 赞同：10
> 
> 时间：2013-03-12T18:08:11.547
> 
> 标签：java, orika

我有以下两个课程

```
class A {
    class InnerA {
        private String field;

        // getters/setters
    }

    private Collection<InnerA> collection;

    // getters/setters
}

class B {
    private String field;

    // getters/setters
} 
```

是否可以将 A 映射到 B 的集合（A.collection.field 应该映射到 B.field 的集合）？

我尝试使用自定义转换器，但我只需要管理 java.lang.VerifyError：

```
 mapperFactory.getConverterFactory().registerConverter(new CustomConverter<A, Collection<B>>() {

        @Override
        public Collection<B> convert(
                A arg0, Type<? extends Collection<B>> arg1) {

            Collection<B> result = new ArrayList<B>();

            Iterator<Item> it = arg0.getCollection().iterator();
            while(it.hasNext()){
                it.next();
                result.add(new B());
            }

            return result;
        }

    }); 
```

结果是：

```
java.lang.VerifyError: Inconsistent args count operand in invokeinterface in method    ma.glasnost.orika.generated.Orika_ArrayList_A_Mapper845657274.mapAtoB(Ljava/lang/Object;Ljava/lang/Object;Lma/glasnost/orika/MappingContext;)V at offset 74  
at java.lang.Class.getDeclaredConstructors0(Native Method)  
at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404)  
at java.lang.Class.getConstructor0(Class.java:2714)     
at java.lang.Class.newInstance0(Class.java:343)     
at java.lang.Class.newInstance(Class.java:325) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T17:03:39.907

当然你可以映射它，你只需要公开 InnerA：

```
List<B> dest = mapper.mapAsList(sourceA.getCollection(), B.class); 
```

*如果 InnerA 不是公开的，则 Orika 不能使用它*

```
MapperFacade mapper = new ConfigurableMapper() {
    @Override
    protected void configure(MapperFactory factory) {
    factory.registerMapper(new CustomMapper<A, Collection<B>>() {
        @Override
        public void mapAtoB(A a, Collection<B> b, MappingContext context) {                     b.addAll(mapperFacade.mapAsList(a.collection, B.class));

            for(B item : b) {
                item.propertyA = a.propertyA;
            }
        }               
    });             
    factory.registerConcreteType(Collection.class, ArrayList.class);
        }           
};  
final Type<Collection<B>> collectionOfB = new TypeBuilder<Collection<B>>() {}.build();
Collection<B> dest = mapper.map(source, TypeFactory.valueOf(A.class), collectionOfB); 
```

# javascript - 如何使这段代码与 jQuery 一起工作？

> ID：15368829
> 
> 赞同：0
> 
> 时间：2013-03-12T18:08:21.637
> 
> 标签：javascript, jquery, prototypejs, conflict

我使用 jQuery 作为标准库。但是，我不得不使用 Prototype 来执行一个简单的功能。但这引起了冲突！

如何使下面的代码与 jQuery 一起使用并分配 Prototype？

```
<script type="text/javascript" language="javascript">
function trim(str){str = str.replace(/^\s*$/, '');return str;}
function signup() { 
    var email   = trim($F("email"));
    var name    = trim($F("name"));
    //EMAIL VALIDATION
    var goodEmail = email.match(/\b(^(\S+@).+((\.com)|(\.net)|(\.edu)|(\.mil)|(\.gov)|(\.org)|(\.info)|(\.sex)|(\.biz)|(\.aero)|(\.coop)|(\.museum)|(\.name)|(\.pro)|(\.arpa)|(\.asia)|(\.cat)|(\.int)|(\.jobs)|(\.tel)|(\.travel)|(\.xxx)|(\..{2,2}))$)\b/gi);
    apos=email.indexOf("@");dotpos = email.lastIndexOf(".");lastpos=email.length-1;
    var badEmail    = (apos<1 || dotpos-apos<2 || lastpos-dotpos<2);
    if (name=="") {
        $("myResponse").style.display="inline";                 //3 lines to show and style the error message
        $("myResponse").style.color="white";                        // there are more ways to do it using css classes for example.
        $("myResponse").innerHTML="Por favor, digite seu nome";     // you could also make an error function.
        $("name").clear(); $("name").focus();                                       // clear the field and put cursor inside
        return false;
        /*  YOU CAN REPEAT THE ABOVE ELSE IF BLOCK IF YOU HAD OTHER FIELDS IN YOUR FORM, 
            LIKE LAST NAME, ADDRESS ETC. AS AN EXAMPLE SEE HOW THE NAME IS HANDLED AND REPEAT
        */
    }
    else if (email=="" || !goodEmail || badEmail) {
        $("myResponse").style.display="inline";             //3 lines to show and style the error message
        $("myResponse").style.color="white";
        $("myResponse").innerHTML="Por favor, insira um email válido";
        $("email").focus();
        return false;
    }
    else {
        //YOU MAY WANT TO CHANGE THE URL IN THE LINE BELOW
        var url = "includes/optIn.php";
        var params =  $("subform").serialize();
        new Ajax.Request(url, {onComplete:showResponse, onException:showException, onFailure:showException, asynchronous:true, method:'post', evalScripts:false, postBody:params});
        $("submit", "myResponse").invoke('hide');   // Hide the buttom and the message
        $("loading").show();                        // show the loading image.
        return false;
    }
}
function showResponse(req)  {
        $("loading").hide();
        $("myResponse").innerHTML=req.responseText; //Writes the "Thank you" message that comes from optIn.php and styles it.
        $("myResponse").style.display="inline";
        $("myResponse").style.color="white";
        $("submit").show();
        $("name", "email").invoke('clear'); 
}
function showException(req) {
    $("myResponse").innerHTML=req.responseText;
    alert("A comunicação com o servidor falhou. Tente novamente!");
    $("loading", "myResponse").invoke('hide');
    $("submit").show();
    $("name", "email").invoke('clear');    
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:25:15.493

对于 jQuery，您需要更改选择器以使用[`#`id 选择器](http://api.jquery.com/id-selector/)。此外，jQuery 不区分集合和单个元素，它总是调用集合中每个元素的方法。

特别是，您将使用`.val()`、`.css()`、`.show()`、`.hide()`和`.focus()`方法来替换 Prototype 和原生 DOM 方法。此外，您将切换到该功能 - 在[API 文档](http://api.jquery.com)`jQuery.ajax`中查找它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:01:03.877

你试试 jQuery.noConflict() 吗？

[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:45:13.790

以下是您需要完成的一些替换

```
$F('id') => $('#id').val();

//directly
$("id").style.display='inline' => $('#id')[0].style.display='inline';

//the "jQuery" way
$("id").style.display='inline' => $('#id').css('display','inline')

$("id").style.color="white" => $("#myResponse").css('color',"white")

$("id").innerHTML="Por favor, digite seu nome" => $('#id').html("Por favor, digite seu nome")

//.clear() has no direct equivalent method but this is close
$("id").clear() => $('#id').val(null)

$("subform").serialize() => $("#subform").serialize()

$("submit", "myResponse").invoke('hide') => $("#submit, #myResponse").hide() 
```

这些都是简单的替换，我将把它留给你来做`Ajax.Request()`转换`$.ajax()`

# sed - 在字符串末尾附加不同数量的空格

> ID：15368833
> 
> 赞同：0
> 
> 时间：2013-03-12T18:08:35.137
> 
> 标签：sed, spaces

我想在字符串后添加不同数量的空格：

我用过

```
echo "444rrrr" | sed 's/$/     /' 
```

这在 . 之后增加了 5 个空格`"444rrrr"`。因为我不知道我必须事先添加的空格数。有没有告诉“sed”命令改变我想在每个字符串末尾附加的空格？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:26:10.630

看到这个，注意`_`只是例子，因为在这里不容易看到空格。你可以把它变成空间。

```
kent$  n=5                                                       

kent$  echo "444rrr"|awk -vn="$n" '{for(i=1;i<=n;i++)$0=$0 "_"}1'
444rrr_____ 
```

# json - 由于 ipv6 (Ubuntu)，Curl POST 前延迟 10 秒

> ID：15368837
> 
> 赞同：5
> 
> 时间：2013-03-12T18:08:37.253
> 
> 标签：json, post, curl, ipv6, ipv4

**注意：我不想删除以下任何历史记录，但我之前认为这是 Heroku 问题，但事实并非如此。我认为这是我的本地机器通过 curl 和 ruby​​ Net::HTTP 发送帖子的问题**

我目前开始在 Heroku（免费）上开发 Rails 应用程序，为了将一些测试数据输入应用程序，我有一个 rake 任务，它从我的 DEV DB 获取测试数据并发布到 JSON REST API 上heroku 应用程序像这样：

```
uri = URI.parse("http://SITENAME.herokuapp.com")
http = Net::HTTP.new(uri.host, uri.port)
request = Net::HTTP::Post.new("/users.json")
request.add_field('Content-Type', 'application/json')
request.body = {'user' => User.first.to_hash }.to_json
response = http.request(request) 
```

出于某种原因，每个请求几乎都需要 10 秒。然后我将第一行更改为：

```
uri = URI.parse("http://localhost:3000") 
```

...并且请求处理速度非常快。有人知道 Heroku 是否会减慢免费版本的 POSTS 速度？（这是有道理的，因为他们希望你为工人测功机付费）我最终会为付费版本买单，但在这样做之前想进一步了解我的 DEV。此外，如果他们不是故意放慢速度，我会有点犹豫是否要使用它们，直到我知道为什么这些帖子需要这么长时间。需要 10 秒的行是：

```
response = http.request(request) 
```

我确信这很明显，但我想我会提到它。

**更新 3/12** 只是想从今天开始发布我的一些日志。所有请求都需要 10 秒：

```
1400
Before: 2013-03-12 21:30:33 UTC
After: 2013-03-12 21:30:43 UTC
1401
Before: 2013-03-12 21:30:43 UTC
After: 2013-03-12 21:30:54 UTC
1402
Before: 2013-03-12 21:30:54 UTC
After: 2013-03-12 21:31:04 UTC
1403
Before: 2013-03-12 21:31:04 UTC
After: 2013-03-12 21:31:14 UTC
1404
Before: 2013-03-12 21:31:14 UTC
After: 2013-03-12 21:31:24 UTC
1405
Before: 2013-03-12 21:31:24 UTC
After: 2013-03-12 21:31:34 UTC 
```

**更新 3/15** 为确保不只是 Net::HTTP::Post 库导致阻塞，我使用 curl 发出了与上面相同的请求，并且还花费了 10 秒：

```
curl -X POST -H "Content-type: application/json" -d {"params":{"q":"query"} http://SITENAME.herokuapp.com/users.json 
```

任何人都有我可以使用的heroku技巧（除了new_relic）来判断延迟发生在哪里？

**更新 3/15 #2** 刚刚在我的 Heroku 应用程序上切换到独角兽，但仍然使用 Ruby Net::HTTP::Post 和从 shell 中使用 curl 获得 10 秒的延迟。切换到 localhost，帖子立即返回。

**更新 3/28**

根据最近的评论，以极快的响应时间发布 heroku 日志：

```
2013-03-29T03:22:06+00:00 app[web.1]: Started POST "/user.json" for IP
2013-03-29T03:22:06+00:00 app[web.1]:   Parameters: {"user"=>{data}}
2013-03-29T03:22:06+00:00 app[web.1]: Processing by UserController#create as JSON
2013-03-29T03:22:06+00:00 app[web.1]:   User Load (2.2ms)  <<<SQL>>>
2013-03-29T03:22:06+00:00 app[web.1]: Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 2.2ms)
2013-03-29T03:22:06+00:00 heroku[router]: at=info method=POST path=/users.json host=HOST.herokuapp.com fwd="66.31.201.99" dyno=web.1 connect=2ms service=33ms status=200 bytes=16
2013-03-29T03:22:16+00:00 app[web.1]: Started POST "/users.json" for 66.31.201.99 at 2013-03-29 03:22:16 +0000
2013-03-29T03:22:16+00:00 app[web.1]: Processing by UserController#create as JSON
2013-03-29T03:22:16+00:00 heroku[router]: at=info method=POST path=/users.json host=HOST.herokuapp.com fwd="66.31.201.99" dyno=web.1 connect=8ms service=19ms status=200 bytes=16
2013-03-29T03:22:16+00:00 app[web.1]:   Parameters: Parameters: {"user"=>{data}}
2013-03-29T03:22:16+00:00 app[web.1]:   User Load (2.0ms)  SQL
2013-03-29T03:22:16+00:00 app[web.1]: Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 2.0ms) 
```

**更新 3/28 #2**

刚刚从在线 shell 中尝试了 curl：www.compileonline.com/execute_bash_online.php 并立即返回，所以我想这与我的机器有关。任何人都知道我可以如何解决卷曲被抓住的地方。本地 10 秒但在线 shell 中瞬时的请求格式为：

```
curl -X POST -H "Content-type: application/json" -d '{"user":"payload"}' http://APP.herokuapp.com/users.json 
```

**更新 3/28 #3**

我机器上的某些东西导致了延迟。我运行以下命令来获取当前系统时间，然后在详细模式下执行 curl，并且 10 秒延迟发生在 curl 甚至发送之前：

```
date +"%T" && curl -X POST -H "Content-type: application/json" -d '{"user":"payload"}' http://APP.herokuapp.com/users.json -v --trace-time -S 
```

...和输出...

```
00:44:16  [start time from date +"%T"]
00:44:26.653510 * About to connect() to APP.herokuapp.com port 80 (#0)
00:44:26.653632 *   Trying 184.72.248.52... connected
00:44:26.675676 > POST /users.json HTTP/1.1
00:44:26.675676 > User-Agent: curl/7.22.0 (i686-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3
00:44:26.675676 > Host: APP.herokuapp.com
00:44:26.675676 > Accept: */*
00:44:26.675676 > Content-type: application/json
00:44:26.675676 > Content-Length: 653
00:44:26.675676 > 
00:44:26.675954 * upload completely sent off: 653out of 653 bytes
00:44:26.717286 < HTTP/1.1 200 OK
00:44:26.717380 < Cache-Control: max-age=0, private, must-revalidate
00:44:26.717518 < Content-Type: application/json; charset=utf-8
00:44:26.717552 < Date: Fri, 29 Mar 2013 04:44:33 GMT
00:44:26.717584 < Etag: "7363e85fe9edee6f053a4b319588c086"
00:44:26.717616 < Status: 200 OK
00:44:26.717647 < X-Rack-Cache: invalidate, pass
00:44:26.717678 < X-Request-Id: 19ff002048e4e2d5e17a8203576a4194
00:44:26.717708 < X-Runtime: 0.008901
00:44:26.717739 < X-Ua-Compatible: IE=Edge,chrome=1
00:44:26.717771 < transfer-encoding: chunked
00:44:26.717802 < Connection: keep-alive
00:44:26.717832 < 
00:44:26.717925 * Connection #0 to host APP.herokuapp.com left intact
00:44:26.717998 * Closing connection #0 
```

您可以看到初始时间戳和 connect() 调用之间的 10 秒延迟。我已经尝试通过`host APP.herokuapp.com`在我的 shell 中解决主机问题，但它会立即返回。

**更新 3/28 #4**

我已经更新了上面的示例以包含`-4`标志，以便它强制使用 ipv4 并立即在我的开发机器上返回：

```
date +"%T" && curl -4 -X POST -H "Content-type: application/json" -d '{"user":"payload"}' http://APP.herokuapp.com/users.json -v --trace-time -S 
```

我尝试使用 处的步骤在我的机器上禁用 ipv6 `http://www.upubuntu.com/2011/05/how-to-disable-ipv6-under-ubuntu.html`，但它仍然无法正常工作。现在的问题是我想要通过 Net::HTTP 和 HTTParty 发出的请求，所以我想在系统范围内修复 IPv6 问题，所以 curl 上的这个创可贴不是解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:14:43.580

Heroku 上的日志表明用于处理您的请求的时间是什么？对于我在 Heroku（开发和生产）上运行的所有应用程序的使用时间，这些日志都是准确的。heroku 日志显示每个请求使用 10 秒还是客户端的某种计时机制？

我会尝试暂时删除代码路径的某些部分，看看您是否可以缩小可能占用时间的范围。例如，您可能会跳过尝试渲染任何复杂的视图，而是直接从控制器渲染 200。接下来，也许尝试注释掉控制器代码。不断取出各种零件，直到找到消耗时间的东西。

# mule - 在 Mule 流中使用 SQL 结果变量

> ID：15368841
> 
> 赞同：1
> 
> 时间：2013-03-12T18:08:47.867
> 
> 标签：mule, flow

我得到了一个带有 2 个查询的 Mule 流程。第一个只是验证用户名是否重复。

做这样的事情： SELECT count(*) AS TOTAL FROM user_tests WHERE username = #[json:username] AND test_message_title = #[json:test_message_title]

如果 TOTAL = 0，第二个执行 INSERT。

现在，我想在同一流程中的选择中使用变量“TOTAL”。我该怎么做？

尝试了#[TOTAL=0]，尝试了#[variable:TOTAL=0]，以及许多其他方法，但都无法正常工作。

已编辑：我制作了一个 java 组件，用于从有效负载中检索“0”或任何数字。我如何做出选择表达来比较它？

尝试在选择表达式中使用 Integer.valueOf(message.payload) = 0 但我得到一个 InvalidExpressionException。

这是我的整个流程：

```
<flow name="ADMIN_INSERT_TEST_FILE" doc:name="ADMIN_INSERT_TEST_FILE">
    <ajax:servlet-inbound-endpoint channel="/admin/save_test_message" responseTimeout="10000" doc:name="Ajax"/>
    <set-variable variableName="#['saved_payload']" value="#[payload]" doc:name="Save original payload"/>
    <jdbc:outbound-endpoint exchange-pattern="request-response" queryKey="validate_test_name" queryTimeout="-1" connector-ref="ExtendedRoutingConnector" doc:name="validate duplicated test name">
        <jdbc:query key="validate_test_name" value="SELECT count(*) AS TOTAL FROM user_tests WHERE username = #[json:username] AND test_message_title = #[json:test_message_title]"/>
    </jdbc:outbound-endpoint>
    <logger message="#[message.payload[0].TOTAL]" level="INFO" category="Total" doc:name="Logger"/>
    <choice doc:name="Choice">
        <when expression="#[message.payload[0].TOTAL == 0]">
            <processor-chain>
                <set-payload value="#[variable:saved_payload]" doc:name="Save Payload"/>
                <jdbc:outbound-endpoint exchange-pattern="request-response" queryKey="insert_user_test_message" queryTimeout="-1" connector-ref="ExtendedRoutingConnector" doc:name="insert user test message">
                    <jdbc:query key="insert_user_test_message" value="INSERT INTO user_tests (username, test_message_title, user_test_message) VALUES (#[json:username], #[json:test_message_title], #[json:message])"/>
                </jdbc:outbound-endpoint>
            </processor-chain>
        </when>
        <otherwise>
            <processor-chain>
                <logger message="Name #[json:test_message_title] already exists" level="INFO" doc:name="Logger"/>
            </processor-chain>
        </otherwise>
    </choice>
</flow> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T18:10:22.963

使用 MEL：

```
#[message.payload[0].TOTAL == 0] 
```

这将从`TOTAL`您的 SELECT 查询返回的第一行中检索列的值。

# javascript - 将 Javascript 文件对象保存到本地存储

> ID：15368845
> 
> 赞同：0
> 
> 时间：2013-03-12T18:09:00.583
> 
> 标签：javascript, google-chrome-extension

我有一个输入类型文件，我将文件保存到这样的文件对象中

```
var uploadControl = document.getElementById("fileUpload");
var files = uploadControl.files[0]; 
```

然后我想将该文件保存到本地存储，以便稍后读入 FileReader 对象。有谁知道这是否可能。我尝试了几种不同的选项，每次尝试从本地存储中检索对象时，它都是未定义的。

这是我尝试过的一些事情

```
var setObj = {"prop": "myProp", "file": files};
chrome.storage.sync.set({"myObj":setObj}); 
```

这不会引发错误，但是当我尝试检索对象时，它是未定义的

```
chrome.storage.sync.get("myObj", function(item) {
console.log("item name: " + item.myObj.file.name);
}); 
```

但是我可以访问对象的其他属性

```
chrome.storage.sync.get("myObj", function(item) {
    console.log("item prop: " + item.myObj.prop);
    }); 
```

将对象添加到本地存储时我做错了什么还是我访问不正确？或者只是不可能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:29:26.430

`localStorage`只能包含字符串名称/值对，这意味着您不能直接存储对象。您可以使用[字符串化](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)和[解析](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)。

# tomcat - UrlRewriteFilter 不会重定向根目录下的 URL

> ID：15368846
> 
> 赞同：1
> 
> 时间：2013-03-12T18:09:00.750
> 
> 标签：tomcat, tuckey-urlrewrite-filter

我想设置一个 302 重定向。我正在从`apache-tomcat-7.0.30/webapps/myapp`. 我正在尝试使用 Tuckey 的**UrlRewriteFilter**，但未能成功触发重定向。现在我正试图得到一些东西，任何东西都可以重定向。这是我所拥有的`myapp/WEB-INF/urlrewrite.xml`：

```
<urlrewrite>
    <rule>
       <from>/myapp(.*)$</from>
       <to type="redirect">http://www.example.com</to>
    </rule>
</urlrewrite> 
```

我成功重定向的唯一一件事是：

```
<rule match-type="wildcard">
<from>**</from>
<to type="redirect">http://www.example.com</to> 
```

但是，这并不太有用。我尝试了所有可能的斜杠组合，无斜杠，重定向，临时重定向，一颗星，两颗星，但无济于事。关于我哪里出错的任何想法？

# ios - 在没有 UINavigationController 的情况下推送 UIViewController

> ID：15368847
> 
> 赞同：0
> 
> 时间：2013-03-12T18:09:01.980
> 
> 标签：ios, uiviewcontroller, pagination

我有一个 UIViewController 有两个按钮，prev 和 next。当我按下这些按钮时，我重新实例化了相同的视图控制器，并传递了一些变量，然后我将它推送到 UINavigationController 上，没有动画。

使用这种方法，我的内存总是满满的，据我所知，只有当我弹出视图控制器时才会释放它。

所以我的问题是..我怎么能实现这种行为？当我加载下一个（或上一个）视图控制器时，我需要释放内存

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:04:18.033

构建一个自定义导航控制器并自己为过渡设置动画。

# makefile - 通过automake检查make中的环境变量

> ID：15368848
> 
> 赞同：2
> 
> 时间：2013-03-12T18:09:03.807
> 
> 标签：makefile, environment-variables, autotools, automake

有没有办法通过 automake 传递条件，以便稍后将其传递给生成的 Makefile.in 和 Makefile？

我检查 JAVA_HOME 是否在 Makefile 的环境中使用

```
ifeq (undefined,$(origin JAVA_HOME))
#CALL with defaults
else
#CALL according to the variable
endif 
```

但是当我在 Makefile.am 中使用 automake 处理这个时，我得到了两个错误：

```
else without if
endif without if 
```

看起来 automake 没有消化 ifeq。有没有办法通过它（如果这样做有意义的话），还是有另一种自动工具友好的方式来获得相同的结果？

这个想法还允许在运行 make 之前设置/更改变量以轻松针对不同的 JDK。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T19:59:28.493

# 我认为正确的方法是：

依赖于`$(JAVA_HOME)`被设置`Makefile.am`并确保它的合理值由`configure`.

# 以书面形式回答问题：

因为`automake`想要生成适用于 POSIX make 的 Makefile，所以它不适用于 GNU-make 条件。

所以你做测试`configure.ac`：

```
AC_SUBST([JAVA_HOME])
AM_CONDITIONAL([JAVA_HOME_SET], [test ! -z "$JAVA_HOME"]) 
```

然后在 Makefile.am 中：

```
if JAVA_HOME_SET
## Something that relies on JAVA_HOME
else
## Defaults
endif 
```

# ibm-mobilefirst - Worklight 上下文根未更新/如何在 Eclipse 开发中重新部署 Worklight 服务器

> ID：15368853
> 
> 赞同：0
> 
> 时间：2013-03-12T18:09:49.363
> 
> 标签：ibm-mobilefirst

下午所有，

这是我的背景：

我正在使用适用于 iPhone、Android 和 Mobile Web 的 App Envs 设置现有工作灯项目。

使用 Worklight Console 预览应用程序时，我仅从 iPhone 应用程序中得到上下文根错误。（我收到错误：服务器无法处理来自应用程序的请求...）

当我打开浏览器 JS 控制台时，我看到问题是应用程序请求了错误的上下文根。它正在访问不存在的 /worklight/ 上下文。

确实有效的上下文根如下：http://localhost:8080/apps/services/api/[APPNAME]/iphone/init

iphone 试图命中的上下文根目录：http://localhost:8080/worklight/apps/services/api/[APPNAME]/iphone/init

这是奇怪的部分。上下文根适用于 Android 和移动 Web 环境。只有 iPhone 环境存在上下文根问题。

所有三个环境都共享相同的 application-descriptor.xml 文件和相同的服务器。

下面是一些文件输出。

以下文件：

/server/conf/worklight.properties

```
publicWorkLightHostname=localhost
publicWorkLightProtocol=http
publicWorkLightPort=8080
publicWorkLightContext=/worklight/ 
```

/apps/[APPNAME]/application-descriptor.xml

```
<worklightServerRootURL>http://localhost:8080</worklightServerRootURL> 
```

所以有几个问题。

1）设置上下文根时，客户端和服务器之间的关系是什么。上下文根是否必须在两者之间匹配？一个是主人，另一个只是奴隶，不需要设置吗？

2）（有点不相关）在调试这个问题时，我遇到了关于如何在 Eclipse 开发中“取消部署”服务器的零文档。（取消部署服务器就在 IBM 的文档中）当我更改服务器设置 (worklight.properties) 时，我需要知道如何重新部署服务器。我看到过手动破解战争的参考，只是在 IDE 中停止和启动服务器。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:40:32.860

如果您使用的是上下文根，那么它必须同时存在于 worklight.properties 和 application-descriptor.xml 中。确保两者匹配，然后重新构建和部署，看看问题是否仍然存在。

当使用 Worklight 的开发版时，您的服务器基于在 Eclipse 中运行的 Jetty（它与您在 Eclipse 中安装的 Worklight Studio 插件捆绑在一起）。您不需要“取消部署”任何东西。只需更改 worklight.properties 和 application-descriptor.xml 并重新构建您的应用程序。更改将同时到达服务器和客户端。

但请注意，使用上下文根主要用于使用应用程序服务器（如 Tomcat、Liberty 或 WAS）时。

# yii - 在 YII 中如何更改 CPagination Pager 的格式？

> ID：15368855
> 
> 赞同：1
> 
> 时间：2013-03-12T18:09:52.153
> 
> 标签：yii, pager

默认情况下，它具有以下格式：

```
PREV 1 2 3 4 5 6 7 8 9 10 NEXT 
```

我想要类似的东西：

```
FIRST PREV 1 2 3 .. 7 ... 566 567 568 NEXT LAST 
```

这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T01:47:09.000

是的，它可以。它实际上是默认输出的，但默认的 Yii CSS 隐藏了这些项目。如果您查看此评论并检查 CLinkPager 页面，您会发现您也可以控制标签： [http ://www.yiiframework.com/doc/api/1.1/CLinkPager#c1893](http://www.yiiframework.com/doc/api/1.1/CLinkPager#c1893)

# .htaccess - Htaccess 参数覆盖 + 允许附加参数？

> ID：15368858
> 
> 赞同：1
> 
> 时间：2013-03-12T18:09:57.050
> 
> 标签：.htaccess, url-rewriting, rewrite, clean-urls

我的 .htaccess 文件中有一条规则可以用干净的路径覆盖丑陋的参数 url。

这是一个例子：

`RewriteRule ^landing(/)?([0-9]+)?(/)?$ landing/index.php?intPage=$2`

所以当有人去 /landing/3 时，它会加载 index.php 页面并将 intPage 参数传递为 3。

很简单。

但是，我正在使用技术来跟踪 Google Analytics 引用，因此我需要在此 URL 上添加参数：

例如：

`/landing/3?kt_type=ad&kt_st1=adwords&kt_st2=prize_a_us.en`

问题是，我不知道如何检索附加到 URL 上的参数，因为 URL 已经被覆盖，现在我无法检索 kt_type、kt_st1 等。

关于如何使它成为可能的任何想法，以便我仍然可以将参数附加到已经覆盖的 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:24:13.673

使用[QSA 标志](https://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_qsa)。将您的规则更改为：

```
RewriteRule ^landing/?([0-9]+)?/?$ landing/index.php?intPage=$1 [L,NC,QSA] 
```

来自官方文档：

> QSA - 将原始请求 URL 中的任何查询字符串附加到在重写目标中创建的任何查询字符串

# sql - 编辑带有 NOT 值的参数字段 Crystal 报表？

> ID：15368860
> 
> 赞同：0
> 
> 时间：2013-03-12T18:10:00.487
> 
> 标签：sql, crystal-reports, crystal-reports-10

在 Crystal Reports 中，我想添加一个以在我的报表中过滤掉我的数据库中 `WHERE field <> date`具有值的日期。`NULL`

我在后端使用了一个旧的 FoxPro 数据库，它从我的报告中生成一条 SQL 语句，但似乎没有向`WHERE`生成的语句添加子句。

直接访问 FoxPro 后端时，具有 psudo-NULL 值的日期的日期为`1899-12-30`，但是当它们通过 Crystal 从 FoxPro 中提取时，它们显示为`12/30/99`（这可能与`MM/DD/YY`格式中显示的日期相同）。

我注意到该报告有一个现有的参数字段，提示用户将原始查询过滤到特定日期范围。除了参数字段之外，我尝试添加自己的，但发现我需要`WHERE field <> date`的不是可用选项，因为主要只有 3 种类型的字段参数：

**离散的**

*   接受单个和离散值。

**远程**

*   接受一个较低和较高的值以选择此范围内的所有内容。

**离散和范围**

*   以上两者的结合

这些似乎都无法使用一种`WHERE NOT`子句过滤查询结果，还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:21:01.360

将此添加到您的记录选择公式中：

```
// remove actual nulls
AND Not(Isnull({table.date_field})) 
// remove old dates 
AND {table.field} <> date(1899,12,30) 
// remove dates not in select parameter value
AND {table.field} IN {@date_parameter} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:18:50.420

我真正需要做的就是`WHERE`在 SQL 语句的子句中添加一些条件，在 SQL 客户端中很简单，但是当您在 Crystal Reports v10 中执行此操作时，它有点难以找到，除非您知道您在寻找什么为了...

所以我需要做的是：

1.  在报告中选择要过滤的字段（在该`Details`部分中）
2.  单击工具栏`Select Expert` ![专家工具栏中的选择专家按钮](../Images/b9edbc302c74ae661c79aebf8eb37ae6.png) 上的`Experts`按钮。
3.  在`Select Expert`对话框中，您的字段名称应出现在选项卡中。
4.  您可以在下面选择`WHERE`用于过滤记录的条件。

# windows - Amazon S3 的简单且可扩展的非托管替代方案

> ID：15368867
> 
> 赞同：3
> 
> 时间：2013-03-12T18:10:12.557
> 
> 标签：windows, amazon-s3, couchdb, file-storage

我让用户能够在现有的 Web 应用程序中附加图像、视频、音频剪辑和其他文件附件。我们产品的某些安装有成千上万的用户，因此数据量会变得非常高。

Amazon S3 是显而易见的解决方案，但由于法律原因，不能始终使用。我需要一个我的客户可以自己托管的解决方案。

因此，我希望构建或采用具有以下特征的文件存储系统：

*   未托管。必须可以安装在我客户的 Windows 服务器上。
*   水平扩展至 TB 级存储。
*   与 S3 类似的操作，这样我就可以将这两种方法都作为我产品的一部分。
*   久经考验的架构

我在 StackOverflow 和其他论坛（Eucalyptus Walrus、Hadoop HDFS、MongoDB + GridFS、CouchDB、MogileFS）上看到了一些建议，但找不到足够的信息来确定一个简单且经过验证的建议。

我有使用 CouchDB 的经验，如果我能确定它可以很好地处理数 TB 的视频文件，我会选择它，但我还没有找到一个可以依靠的成功案例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:34:58.543

最接近的开源项目是 OpenStack swift ( [https://github.com/openstack/swift](https://github.com/openstack/swift) )。它为 RackSpace CloudFiles 供电。虽然 S3 设计并不完全为人所知，但 OpenStack 的构建是为了提供非常相似的功能。
它是横向扩展的，没有单点故障或瓶颈。

# assembly - 在汇编语言中更改字符串的值

> ID：15368868
> 
> 赞同：0
> 
> 时间：2013-03-12T18:10:13.650
> 
> 标签：assembly, avr

我目前正在尝试更改 AVR 汇编语言中字符串的值。我不确定这是否可能。我将字符串声明为：

```
message: .db "Frequency = 1 kHz",0x00 
```

我正在尝试将代码中稍后存储在消息中的值更改为“频率= 2 kHz”知道如何做到这一点吗？我想替换整个字符串，但仍将其存储在消息中。

我正在使用 AVR 汇编语言。

我试着做：

```
message: .db "Frequency = 2 kHz",0x00 
```

稍后在我的程序中，但我意识到它不会让我重新初始化变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T04:33:22.057

标签“消息：”不是变量。它就像一个地址，您可以在程序的其他地方引用它。从[手册](http://www.atmel.com/Images/doc1022.pdf)：

> DB 指令在程序存储器或 EEPROM 存储器中保留存储器资源。为了能够引用保留位置，DB 指令前面应该有一个标签。

所以它不在 SRAM 中，变量所在的位置。

在首先设置 Z 以包含地址后，您可以使用 LPM 指令从字符串中加载值。[LPM：加载程序存储器：R0 ← (Z)]

听起来您可能想做一些事情，比如有两个字符串，并在需要时将数字作为字符插入。

```
message1: .db "Frequency = ",0x00
message2: .db " kHz",0x00 
```

您必须做一些事情来确保第一个字符串中的空字节不被传输。

val = 1 或 2 的字符只是`0x30 + val`

# dynamics-crm-2011 - CRM 2011 的 crmsvcutil.exe 返回错误

> ID：15368869
> 
> 赞同：1
> 
> 时间：2013-03-12T18:10:19.363
> 
> 标签：dynamics-crm-2011, dynamics-crm

我正在尝试使用`crmsvcutil.exe`CRM 2011 On Premise 安装。我使用以下命令从命令行运行它：

```
CrmSvcUtil.exe /url:http://crmx36/FMGLegal/XRMServices/2011/Organization.svc
    /out:Xrm /username:owsike /password:test /domain:CORP
    /namespace:XRM /serviceContextName:LegalDataContext    /codeCustomization:"Microsoft.Xrm.Client.CodeGeneration.CodeCustomization,Microsoft.Xrm.Client.CodeGeneration" 
```

然后将打开窗口`crmsvcutil.exe`，但不到一秒钟后关闭。我正在尝试启用跟踪，但我看到的所有帖子都建议在其配置文件中添加一行。我的 SDK 下载不包含此 exe 的配置文件，因此我创建了一个包含以下内容的文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
  </appSettings>

  <system.diagnostics>
    <trace autoflush="false" indentsize="4">
      <listeners>
        <add name="configConsoleListener"
        type="System.Diagnostics.ConsoleTraceListener">
          <filter type="System.Diagnostics.EventTypeFilter"
          initializeData="Error" />
        </add>
      </listeners>
    </trace>
  </system.diagnostics>

</configuration> 
```

但是日志/跟踪仍然没有被启用，所以我看不到它抛出的错误。有谁知道为什么 exe 仍然没有使用日志记录/跟踪，或者为什么我`crmsvcutil.exe`的错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T19:02:56.687

听起来您正在打开运行，并在命令行中粘贴。而是试试这个：

1.  按 Windows 键“R”打开“运行”对话框
2.  输入“cmd”按回车
3.  右键单击并粘贴您的网址
4.  按“Enter”运行您的命令。它不会自动关闭，您可以看到收到的错误消息。

就配置文件而言，我认为不需要，但这就是我所拥有的：

```
<configuration>
    <system.diagnostics> 
       <trace autoflush="false" indentsize="4"> 
          <listeners> 
             <add name="configConsoleListener" type="System.Diagnostics.ConsoleTraceListener"> 
                <filter type="System.Diagnostics.EventTypeFilter" initializeData="Error" /> 
             </add> 
          </listeners> 
       </trace> 
    </system.diagnostics>
</configuration> 
```

## 更新

请改用[Xrm Early Bound Generator](https://xrmearlyboundgenerator.codeplex.com/)。它扩展并自动化了 Early Bound 类的创建。

# jquery - jQuery父子div激活不同的动作

> ID：15368876
> 
> 赞同：4
> 
> 时间：2013-03-12T18:10:31.167
> 
> 标签：jquery, html, event-propagation

我有一个包含许多组件的元素。让我们称之为元素框。现在在盒子里面我有很多不同的元素、图片、文本和按钮。

示例： http: [//jsfiddle.net/roman_khrystyny​​ch /FSCRH/](http://jsfiddle.net/roman_khrystynych/FSCRH/)

HTML：

```
 <div id="container">
        <div class="box">
            <div class="button">Click</div>    
        </div>
    </div> 
```

jQuery：

```
 $('#container').on("click", ".box", function(){
        alert('box'); //only when anything in box except button
    });

    $('#container').on("click", ".button", function(){
        alert('button'); //only when button clicked
    }); 
```

问题是单击按钮时，框元素也会激活其操作。本质上，我希望它是一个例外，如果我单击按钮，则不会发生常规框操作，而是会发生按钮操作。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T18:15:38.720

你在说的是事件冒泡。当您单击子元素时，它还会在每个父元素上触发一个单击事件，一直到 DOM 树的顶部。

stopPropagation() 将取消冒泡 dom 树

试试这个：

```
 $('#container').on("click", ".button", function(e){
        e.stopPropagation()
        alert('button'); //only when button clicked
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T18:13:17.210

jquery 有它的功能。[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

`stopPropagation();`

它阻止点击事件冒泡。

[http://jsfiddle.net/honk1/FSCRH/1/](http://jsfiddle.net/honk1/FSCRH/1/)

# c# - 报表查看器 rdl 文件

> ID：15368878
> 
> 赞同：1
> 
> 时间：2013-03-12T18:10:32.513
> 
> 标签：c#, asp.net, reportviewer

我正在使用 ReportViewer 控件来设计报告，但是当我运行项目时出现此错误：

`A data source instance has not been supplied for the data source 'DataSet1'.`

这是我的代码：

```
 SqlConnection myConnection = new SqlConnection();
            SqlCommand cmd = new SqlCommand();
            SqlDataAdapter sqla = new SqlDataAdapter();
            DataSet ds = new DataSet();
            DataTable dt = new DataTable();

            myConnection.ConnectionString = SqlDataSource1.ConnectionString;

            cmd.Connection = myConnection;
            cmd.CommandText ="select * from users";
            cmd.CommandType = CommandType.Text;
            sqla.SelectCommand = cmd;

            sqla.Fill(dt);
            sqla.Fill(ds);

            ReportViewer1.Reset();
            ReportViewer1.LocalReport.DataSources.Clear();
            ReportViewer1.Visible = true;
            ReportViewer1.LocalReport.ReportPath = "reports/allusers.rdl";
            ReportDataSource rds = new ReportDataSource("ds_users",dt);
            ReportViewer1.LocalReport.DataSources.Add(rds);
            ReportViewer1.ZoomMode = ZoomMode.Percent;
            ReportViewer1.LocalReport.Refresh(); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:33:25.747

我在创建 rdl 文件时添加了一个“DataSet1”，所以我需要传递这个数据集的数据来呈现报告。我将这些`ReportDataSource`行更改为以下内容：

```
ReportDataSource rds = new ReportDataSource();
rds.Name = "DataSet1";
rds.Value = dt; 
```

这解决了错误消息。

# database - 如何列出 Citrusleaf/AeroSpike 主机的命名空间？

> ID：15368880
> 
> 赞同：1
> 
> 时间：2013-03-12T18:10:34.600
> 
> 标签：database, nosql, key-value-store, aerospike

我想使用 C# 客户端 SDK 远程列出主机上的命名空间，而关于它的文档非常稀缺。

我知道执行此操作的服务器工具，但我需要从我正在编写的维护工具中查询它，因此不能选择使用服务器控制台。

有人知道这是否可行，如果可以，该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-11T19:30:24.753

您可以使用字符串“namespaces”进行信息调用并解析返回值。c# info API 上的文档：[http ://www.aerospike.com/apidocs/csharp/html/Methods_T_Aerospike_Client_Info.htm](http://www.aerospike.com/apidocs/csharp/html/Methods_T_Aerospike_Client_Info.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:16:39.677

您可以通过模拟 clmonitor 用来与 Aerospike 集群通信的逻辑来获取该信息。Clmonitor 是用 Python 编写的；在 clmonitor 中执行 'info' 命令会提供大量信息，其中一部分是命名空间列表。我建议您在 C# 代码中模拟 clmonitor 使用的逻辑来与集群通信，然后解析出您需要的信息。以后，我建议您利用[Aerospike 论坛](https://forums.aerospike.com)来询问有关 Aerospike 的问题。感谢您对 Aerospike 的关注。

# javascript - 将 swfupload.js 动态注入到 GWT 项目中。JS 代码在 DOM 中存在之前被无意调用

> ID：15368881
> 
> 赞同：0
> 
> 时间：2013-03-12T18:10:35.520
> 
> 标签：javascript, gwt

我正在尝试将[swfupload.js](https://code.google.com/p/swfupload/)注入 GWT 项目以支持多文件上传。我有一个在非 GWT 项目上本地运行的 swfupload.js 版本，但我很难将它集成到 GWT 项目中。

我怀疑 JS 在`<span>`元素存在于 DOM 之前被调用。JS 脚本在出现上传模式对话框时注入，在 swfupload.js > loadFlash() 处添加断点并检查`targetElement`当它应该是`#btnFileUpload`跨度时它返回为未定义。`<span>`此外，当脚本在断点处停止时，我可以看到屏幕上的显示。

*   使用断点，`$('#btnFileUpload')`在控制台中查询我得到`[]`.
*   没有断点，`$('#btnFileUpload')` 在控制台中查询我得到`<span id="btnFileUpload">...</span>`.

**GWT/Java 中**的脚本注入器代码（据我所知）

```
@UiFactory
FormPanel createForm() {

    [...]

    String baseURL = GWT.getHostPageBaseURL();
    ScriptInjector.fromUrl(baseURL + "js/jquery.min.js").inject();
    String[] files = { 
        "swfupload.js", 
        "handlers.js", 
        "swfupload.queue.js",
        "fileprogress.js", 
        "swfupload.impl.js"
    };
    for (String file : files) {
        ScriptInjector.fromUrl(baseURL + "js/swfupload/" + file).inject();
    }

   [...]

} 
```

**JavaScript：swfupload.impl.js**

```
var swfu;
$('#btnFileUpload').ready(function() {
    var settings = {
        button_placeholder_id: "btnFileUpload"
        [...]
    };
    swfu = new SWFUpload(settings);
} 
```

**JavaScript：swfupload.js**

```
// Gets called from SWFUpload 'constructor'
SWFUpload.prototype.loadFlash = function () {
    var targetElement, tempParent;
    [...]
    // Get the element where we will be placing the flash movie
    targetElement = document.getElementById(this.settings.button_placeholder_id) || this.settings.button_placeholder;

    if (targetElement == undefined) {
        throw "Could not find the placeholder element: " + this.settings.button_placeholder_id;
    }
    [...]
}; 
```

*注意：我知道 GWT 有一个 SWFUpload 的实现，但我宁愿不走那条路。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T04:34:34.143

当您使用`ScriptInjector`脚本时，会使用 an 添加到页面中，`IFrame`以便您的脚本在它们自己的浏览上下文中运行。`document.getElementById`in正在访问它的`swfupload.js`“自己的 DOM”，而不是顶级的。您可以尝试通过使用访问可能具有`span`您正在寻找的父上下文`window.parent`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-09T09:51:09.643

这是一个将多个js加载到GWT中的示例

```
 ScriptInjector.fromUrl(GWT.getModuleBaseURL() + "lodash.js").setWindow(ScriptInjector.TOP_WINDOW)
            .setCallback(new Callback<Void, Exception>() {
                @Override
                public void onFailure(Exception reason) {
                    System.out.println("lodash loading failed");
                }

                @Override
                public void onSuccess(Void result) {
                    System.out.println("lodash loaded");
                }
            }).inject();
    ScriptInjector.fromUrl(GWT.getModuleBaseURL() + "jquery.js").setWindow(ScriptInjector.TOP_WINDOW)
            .setCallback(new Callback<Void, Exception>() {
                @Override
                public void onFailure(Exception reason) {
                    System.out.println("jquery loading failed");
                }

                @Override
                public void onSuccess(Void result) {
                    System.out.println("jquery loaded");
                }
            }).inject();
    ScriptInjector.fromUrl(GWT.getModuleBaseURL() + "backbone.js").setWindow(ScriptInjector.TOP_WINDOW)
            .setCallback(new Callback<Void, Exception>() {
                @Override
                public void onFailure(Exception reason) {
                    System.out.println("backbone loading failed");
                }

                @Override
                public void onSuccess(Void result) {
                    System.out.println("backbone loaded");
                }
            }).inject();

    ScriptInjector.fromUrl(GWT.getModuleBaseURL() + "joint.min.js").setWindow(ScriptInjector.TOP_WINDOW)
            .setCallback(new Callback<Void, Exception>() {
                @Override
                public void onFailure(Exception reason) {
                    System.out.println("joint.min loading failed");
                }

                @Override
                public void onSuccess(Void result) {
                    System.out.println("joint.min loaded");
                }
            }).inject(); 
```

# amazon-sqs - 调试 Amazon SQS 使用者

> ID：15368882
> 
> 赞同：0
> 
> 时间：2013-03-12T18:10:39.750
> 
> 标签：amazon-sqs

我正在使用连接到分布式后端的 PHP 前端，使用 Amazon SQS 和各种消息类型和消息使用者。我试图想出一种方法来安全地调试这些消费者，因为我们不希望消息处理程序使用新的、未经测试的代码消耗最终用户消息，从而冒着消息丢失或错误处理的风险。

实际的消息队列名称被硬编码为类中的 PHP 常量，因此我的第一个策略是创建两组不同的队列，一组用于生产，另一组用于调试，并将队列名称常量外部化到两个不同的文件中。根据我们的调试条件是否为真，我想包含这些常量定义中的一个或另一个，并将包含文件中的常量分配给当前具有硬编码名称的类常量。

这似乎不起作用，因为常量似乎像 PHP 中的类变量一样，而我试图分配像实例变量一样的值。下一个策略是看看亚马逊方面是否有任何东西可以让我们透明地调试我们的消息消费者，而不会在我们的代码中添加大量黑客，但我看不到任何有利于这一点的东西。我很想知道是否有其他人经历过（理想情况下，解决了这个问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-18T08:24:04.430

SQS 没有提供一种方法来检查队列中的消息内容，或者让发送者查看是否有任何消费者未能处理消息。

解决此问题的一种常见方法是按照您的建议设置两组队列，并让生产者将相同的消息发布到两个队列中。这样，您可以针对生产消息流调试代码，而不会影响实际的生产队列。

我建议将使用哪个队列的决定从您的代码中移到配置中，然后将不同的配置文件部署到您的开发箱和生产箱。风险始终是开发框最终会与生产系统通信，因此在所有代码中使用单一一致的方法来配置这些端点的风险要比每次调用时临时进行的风险要小得多一项服务。

我还建议将您的生产和开发队列放在具有不同访问凭证的不同 AWS 账户中。这样，您可以授予您的生产帐户发布到开发帐户队列的权限，但您可以保证您的开发系统无法从生产队列中读取。

# php - php中的文本对齐

> ID：15368883
> 
> 赞同：0
> 
> 时间：2013-03-12T18:10:40.077
> 
> 标签：php, jquery, html, mysql, css

我想对齐我的文本，这样当我发送消息时，它出现在左侧，但它是回复，文本出现在右侧......我不知道是否使用“text-align：left”，位置或对齐。这是我的代码

```
if ($row['username'] == $username)
{
    $color = 'blue';
    $align:left; // dont know if this is right

}
else
{
    $color = 'red';
    $align:right; // dont know if this is right
}

echo '<i><p style="font-family:arial;color:'.$color.';font-size:15px;"> <strong>' . $row['username']. '</strong>: ' . $mymessage.'</i></p>';

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T18:12:34.333

设置它与设置颜色的方式完全相同。

例如：

```
$align='right';

echo '<i><p style="font-family:arial;color:'.$color.';text-align:'.$align.';font-size:15px;"> <strong>' . $row['username']. '</strong>: ' . $mymessage.'</i></p>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-11T14:40:30.243

尝试这个，

```
$css =  ($row['username'] == $username) ? 'color:blue;text-align:left;' : 'color:red;text-align:right;';

echo '<i><p style="font-family:arial;font-size:15px;'.$css.'"> <strong>' . $row['username']. '</strong>: ' . $mymessage.'</i></p>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T18:16:00.700

这应该有效：

```
if ($row['username'] == $username)
{
    $color = 'blue';
    $align = 'left';

}
else
{
    $color = 'red';
    $align = 'right';
}

echo '<i><p style="text-align:' . $align . ';font-family:arial;color:'.$color.';font-size:15px;"> <strong>' . $row['username']. '</strong>: ' . $mymessage.'</i></p>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T18:16:08.913

只需使用：

```
if ($row['username'] == $username)

echo '<i><p style="font-family:arial;color:blue;float:left;font-size:15px;"> <strong>' . $row['username']. '</strong>: ' . $mymessage.'</i></p>';

else
echo '<i><p style="font-family:arial;color:red;float:right;font-size:15px;"> <strong>' . $row['username']. '</strong>: ' . $mymessage.'</i></p>'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T18:25:55.750

如果您为此使用 CSS 类会更好。

例如，您可以有一个类`message`和一个类`reply`：

```
<style>

.message {
  color: blue;
  text-align: left;
}

.reply {
  color: red;
  text-align: right;
}

</style> 
```

然后在 PHP 中：

```
if ($row['username'] == $username)
{
  $class = "message";
}
else
{
  $class = "reply";
}

echo "<p class='$class'>
  <strong>{$row['username']}</strong>: $mymessage
</p>'; 
```

你的代码看起来会*更*干净。

# javascript - Android WebView：确定目标=“_空白”

> ID：15368885
> 
> 赞同：11
> 
> 时间：2013-03-12T18:10:50.860
> 
> 标签：javascript, android, webview

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-26T19:13:57.193

我自己解决了这个问题。这是我修复它的方法。

```
mWebView.setWebChromeClient(new WebChromeListener() {
    @Override
    public boolean onCreateWindow(WebView view, boolean dialog, boolean userGesture, Message resultMsg) {
        WebView newWebView = new WebView(view.getContext());
        newWebView.setWebViewClient(new WebViewClient() {
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
                startActivity(browserIntent);
                return true;
            }
        });
        WebView.WebViewTransport transport = (WebView.WebViewTransport) resultMsg.obj;
        transport.setWebView(newWebView);
        resultMsg.sendToTarget();
        return true;
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T21:28:08.337

您可以执行以下操作：（**丑陋**但会起作用）

在 onPageFinished() 中，将一个 javascript 代码片段注入到页面中，它执行以下操作：

1.  迭代具有 target=_blank 属性的所有元素
2.  将这些元素的 href 更改为 external://[original href]

如果该站点使用 jquery，它应该很容易。如果没有，您仍然可以使用标准 DOM Javascript 来完成。

在您的 shouldOverrideUrlLoading() 上，查找那些 external://* 链接并在外部打开它们。

为了注入 javascript ，请执行以下操作：

```
webView.loadUrl("javascript:(function() { PLACE YOUR JS CODE HERE })()"); 
```

# java - 类似于 Couchbase 中的 SQL LIKE 语句

> ID：15368889
> 
> 赞同：1
> 
> 时间：2013-03-12T18:11:10.840
> 
> 标签：java, couchbase

这在 Couchbase 中可能吗？

```
SELECT * FROM users WHERE user_name LIKE '%john%'. 
```

好像我必须使用 startkey 和 endkey。但似乎没有得到正确的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T23:40:26.487

startKey 和 endKey 将允许您执行类似“john%”的操作。Couchbase 不允许您进行包含。

如果你真的需要一个包含你应该使用弹性搜索插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-30T10:50:35.893

**仅限 Couchbase 4.5+**

* * *

需要创建全文索引才能搜索子字符串。

1.  登录到 Couchbase Web 控制台，例如 [http://localhost:8091/](http://localhost:8091/)。
2.  单击**索引>全文**，然后单击**新建全文索引**按钮。 [![在此处输入图像描述](../Images/7ce5ca8635d488a030059d18b992dbdf.png)](https://i.stack.imgur.com/7N7Lp.png)
3.  将显示一个表单，您可以在其中定义新的索引配置。
4.  每个索引都需要一个唯一的名称。输入一个，例如“test-index”。索引名称只允许使用字母数字字符、连字符和下划线。此外，第一个字符必须是字母字符。从下拉列表中选择一个存储桶。还有更多选项，但您现在可以忽略这些选项并依赖默认值。**去！**最后，单击**创建索引**按钮。
5.  您现在应该会看到新全文索引的摘要页面。文档计数显示到目前为止有多少文档被索引。您可以单击“文档计数”字段旁边的“刷新”按钮以查看索引进度。

有关更多信息，请参阅[Couchbase 参考](https://developer.couchbase.com/documentation/server/current/fts/full-text-intro.html)

* * *

**注意：**如果您没有看到`Full text`选项卡，则必须启用它并设置全文搜索服务（全文 RAM 配额）。

# java - Java Swing - 将所有 JFrame 放在一起

> ID：15368892
> 
> 赞同：0
> 
> 时间：2013-03-12T18:11:32.790
> 
> 标签：java, swing, jframe

我有一个应用程序，有时我使用“模态”较小的窗口。为了模拟这种模态行为，我所做的是将它们定义为 JFrame 的扩展，禁用主应用程序框架并将默认关闭操作设置为不执行任何操作。问题在于 JFrame 不能有父级，因此，当用户单击关闭窗口的按钮时，它实际上会关闭，系统会返回上次使用的应用程序，这并不总是想要的效果（例如，用户打开模态窗口，然后他/她 Alt+Tabs 进入另一个应用程序，然后切换回模态窗口并关闭它，从而呈现最后一个应用程序，而不是我的主框架）。有什么方法可以做到这一点（将 JFrame 绑定到父级或类似的东西......？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:14:15.170

你为什么不使用一个`JDialog`？:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-17T17:47:14.393

您可以将 JFrame 参数添加到构造函数并在内部将其保存为父级，并将子级的引用保存在父级的列表中。然后您可以覆盖 dispose 方法并在关闭窗口之前关闭所有子/父。

例如：

```
public class ParentWindow extends JFrame {

    //Here you add children when you create them
    List<JFrame> children = new ArrayList<JFrame>();

    @Override
    public void dispose() {
        for(JFrame f : children) {
            f.dispose();
        }
        super.dispose();
    }

    public void randomMethod() {
        JFrame newWindow = new JFrame(this);
        children.add(newWindow);
    }
}

public class ChildWindow extends JFrame {

    //Here you save the parent window
    JFrame parent;
    public ChildWindow(JFrame parent) {
         this.parent = parent;
    }

    @Override
    public void dispose() {
        parent.dispose();
        super.dispose();
    }
} 
```

# asp.net - EF 5.0 更新已被跟踪的实体时出现问题

> ID：15368893
> 
> 赞同：1
> 
> 时间：2013-03-12T18:11:34.850
> 
> 标签：asp.net, entity-framework, entity-framework-5

我将用以下内容作为这个问题的开头：我知道互联网上有一百万篇关于旧的“ObjectStateManager 中已经存在具有相同键的对象”问题的帖子。我认为我的情况有点复杂。

我有一个 UnitOfWork 类，它创建一个 DbContext 并将其传递给任何被调用的存储库。我使用的模式与 ASP.NET 站点上的 Unit of Work 教程密切相关。与教程不同，我的存储库接收业务实体，将它们映射到数据实体，并执行一些 CRUD 操作。我的业务逻辑仅适用于业务实体。这是我在示例 Business Manager 类中尝试做的事情：

```
_unitOfWork.Repository.Add(entity);
_unitOfWork.Save(); // context.SaveChanges() under the hood

...Perform some operations on the model...

_unitOfWork.Repository.Update(entity);
_unitOfWork.Save(); 
```

这是存储库中的示例更新方法：

```
public virtual void Update(entity)
{
  var dataEntity = // map from business entity to data;

  _context.Entry(dataEntity).State = EntityState.Modified;
} 
```

它显然在最后一行失败了。这是我的困惑所在：

*   实体的状态为已分离
*   当我尝试将状态更改为已修改或未更改时，它给了我上面的 ObjectStateManager 异常。
*   当我尝试从上下文中分离实体时 (((IObjectContextAdapter)_context).ObjectContext.Detach(entity);) 我得到一个关于实体如何未附加到上下文的异常，因此它无法分离它。非常令人困惑（当然，我缺少一些基本的东西）。
*   许多其他帖子建议我进行数据库调用，更新存储库中的该实体，然后 _unitOfWork.Save()。我不喜欢这种方法。我不需要进行不必要的网络调用来更新实体。

存储库中的 Update 方法需要处理两种情况：1）更新当前未被上下文跟踪的实体，以及 2）更新当前被上下文跟踪的实体。第二件是我正在努力解决的问题。

任何帮助或见解表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:51:38.200

这意味着已经有一个对象附加到与 new 具有相同键的上下文中`dataEntity`。现有对象和新实体都表示数据库中的相同条目，但它们是两个不同的对象。

这可能表明您的生命周期`_context`太长，但这很难从您的代码中判断。可以肯定的是，上下文先前用于从数据库中获取实体，该实体随后被`var dataEntity = ...`.

你可能不得不缩短上下文的生命周期，我不知道。如果您认为没问题，您可能希望使用该[`Local`](http://msdn.microsoft.com/en-us/library/system.data.entity.dbset.local%28v=vs.103%29.aspx)集合来检查实体是否已经存在。`Find`这将节省可能仍然进行的数据库往返。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:36:14.840

我找到了一个似乎可行的混合解决方案：

```
public virtual void Update(TB entity)
        {
            var dataEntity = Mapper.Map<TB, TD>(entity);

            var pkey = _dbSet.Create().GetType().GetProperty("Id").GetValue(dataEntity);
            var entry = _context.Entry(dataEntity);

            if (entry.State == EntityState.Detached)
            {
                var attachedEntity = _dbSet.Find(pkey);

                if (attachedEntity != null)
                {
                    var attachedEntry = _context.Entry(attachedEntity);
                    attachedEntry.CurrentValues.SetValues(dataEntity);
                }
                else
                {
                    entry.State = EntityState.Modified;
                }
            }
            else
            {
                entry.State = EntityState.Modified;
            }
        } 
```

# perl - 支持 API 密钥的 Perl Dancer 身份验证解决方案？

> ID：15368902
> 
> 赞同：5
> 
> 时间：2013-03-12T18:11:59.050
> 
> 标签：perl, authentication, api-key, dancer

我有一个舞者网络应用程序，它既是网站又是网络服务；我的应用程序上的某些路由*应该*对它们进行身份验证。

我为 Dancer Web 应用程序找到的所有身份验证解决方案都需要重定向到登录页面；虽然这对于交互式使用来说是可以的，但这对于一个安静的 Web 服务来说并不是最佳的。

是否有允许使用 api 密钥之类的身份验证解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T13:27:09.177

你应该看看[Dancer::Plugin::Auth::Extensible](https://metacpan.org/module/Dancer%3a%3aPlugin%3a%3aAuth%3a%3aExtensible)来构建它。在每个请求中发送凭据的最简单方法。在客户端，您将像这样调用 REST 服务：

```
$ua->post('http://example.com/rest/getStuff?cred=foobar1234567, $search_criteria); 
```

如果您这样做，您可以提供 cookie，但您不必这样做，并且客户不一定需要关心 cookie。

*编辑*：如果您想要基本身份验证，请查看[Plack::Builder](https://metacpan.org/module/Plack%3a%3aBuilder)。您可以使用它将身份验证添加到某些请求。

# c# - System.ArgumentException：路径中有非法字符。错误

> ID：15368908
> 
> 赞同：8
> 
> 时间：2013-03-12T18:12:21.777
> 
> 标签：c#, excel

我从以下代码中得到一个 ArgumentException：

```
string strPath="C:\somename.xls";
startPath=System.IO.Path.GetDirectoryName(System.Diagnostics.Process.GetCurrentProcess().MainModule.FileName);
filePath = System.IO.Path.Combine(startPath, strPath); 
```

我在 Stack Overflow 上找到了这段代码。链接： [C#：将受保护的工作表复制到另一个 excel 文件](https://stackoverflow.com/questions/15293451/ccopy-protected-worksheet-to-another-excel-file) 我不完全知道它是什么。请告诉我它是什么。我正在将这段代码构建到一个 exe 中。

最后，我需要将一个工作表复制到另一个文件。

我在做什么错？我将它部署在服务器中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T18:13:11.490

该代码的作用是获取您的工作目录（`exe`与您的代码相关联的位置），并将其与`"C:\\somename.xls"`（这没有意义）结合起来。

我想你可能打算像

```
string strPath=@"somename.xls"; 
```

所以假设你正在运行你的应用程序

```
"C:\Users\owner\documents\visual studio 2012\Projects\ConsoleApplication1\ConsoleApplication1\bin\Debug" 
```

该代码将执行的操作设置`filePath`为

```
"C:\Users\owner\documents\visual studio 2012\Projects\ConsoleApplication1\ConsoleApplication1\bin\Debug\somename.xls" 
```

* * *

我看到的第一件事是

```
string filePath="C:\somename.xls"; 
```

`\`是一个特殊字符，用于确定其他字符。例如`'\n'`是换行符。 `'\\'`是实际的反斜杠。

所以，你想`\`和另一个人一起逃避你的`\`

```
string filePath="C:\\somename.xls"; 
```

`@`或通过在其前面放置 a 使其成为文字字符串。

```
string filePath=@"C:\somename.xls"; 
```

* * *

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T18:13:26.833

您的代码应该是：

```
string filePath = "C:\\somename.xls" 
```

你需要双反斜杠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-09T17:52:23.873

您的主要问题在于`startPath`参数。

```
System.Diagnostics.Process.GetCurrentProcess().MainModule.FileName 
```

如果你跟踪你的代码，`FileName`你会看到一个坏的符号字符女巫是非法的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T18:22:18.140

代码有两个问题，

**第一的**

```
string filePath="C:\somename.xls"; 
```

`\`是一个特殊字符，用于确定其他字符。例如`'\n'`是换行符。 `'\\'`是实际的反斜杠。

**第二**

`filePath`包含根路径，`C:\\`. `Path.Combine`只会返回`filePath`，它不能合并。

# .net - 如何确定是否存在 Microsoft 为现有 Microsoft COM 接口定义的 .NET 接口

> ID：15368910
> 
> 赞同：0
> 
> 时间：2013-03-12T18:12:35.100
> 
> 标签：.net, winforms, com, mfc, ole

例如，IWebBrowser2 基本上是一个最初为 IE 制作的 COM 接口。但是在.NET 中的Microsoft.ShDocVw.dll 中定义了相同的接口，可以直接在.NET 程序中使用。对于 IUnknown、IInternetSecurityManager、IObjectSafety、IObjectWithSite 等类型，是否有导出 .NET 接口的程序集。我不想重新定义程序中的现有接口。如果我这样做，他们可能会在未来引起冲突。

那么，问题是，哪些 Microsoft 的 .NET 程序集定义了这些 COM 接口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:35:03.380

> 但是在.NET中定义了相同的接口

它**没有**在 .NET 中定义。您可以通过添加对 shdocvw.dll 的引用来获得它。Visual Studio 读取嵌入在该 DLL 中的类型库并从中生成互操作库。与 Tlbimp.exe 所做的相同。这就是 COM 互操作在基本级别上的工作方式。

*.NET 框架程序集中已经声明了一些*COM接口类型，其中大部分在 System.Runtime.InteropServices.ComTypes 命名空间中。.NET 本身完成工作所需的非常基本的那些。它们记录在 MSDN 中，因此只需快速 MSDN 搜索即可找到它们。还有一堆是*internal*的，只是为了让 .NET 包装类工作，你只能通过 Reference Source 或反编译器找到它们。除了复制/粘贴之外没有其他用处。

自己声明 COM 接口类型是一种危险的冒险，应始终避免。小错误会导致非常严重且难以诊断的运行时错误。或者没有错误，最糟糕的一种。当你有一个类型库时，总是倾向于导入一个类型库，就像你对 shdocvw.dll 所做的那样。类型库旨在避免错误。如果您没有类型库，那么谷歌搜索代码是下一个最佳选择。当然是在 SO 上询问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:17:17.493

COM 接口的大多数消费者，包括在 Microsoft 代码中，都为这些接口定义了自己的私有定义。由于它们是私有的，因此即使您愿意也无法使用它们。只要您不自己实现接口，就不可能导致任何冲突或问题。如果您自己实现了一个 COM 接口，并且您希望从 .NET 代码中调用您，那么并且只有这样您才需要使用调用者正在使用的接口的相同定义。

# c# - 如何触发更新事件以更改图像（显示流量）的winform？

> ID：15368913
> 
> 赞同：0
> 
> 时间：2013-03-12T18:13:03.520
> 
> 标签：c#, winforms

我有两个静态类，UDP 连接和 TCP 连接。它们都触发使用来自 Traffic Observer 类的两个静态方法，称为 TrafficObserver.DataSendingActive() 和 TrafficObserver.DataSendingInactive()。当 UDP 或 TCP 类发送数据时，这些方法将受到影响。我有一个表格，它有两个用于发送和接收（tx rx）的图像指示器。当任一连接类正在主动发送时，指示器应从灰色变为绿色。如何触发表单中的事件来执行此操作？

例子

**TCP连接**

```
try 
{
  TrafficObserver.dataSendingActive();
  tcpStreamWrite(data);
  TrafficObserver.dataSendingInactive();
} 
```

![在此处输入图像描述](../Images/f2d2169b00ac05f9dbd3a79491b2f743.png)

**问题：**如何将事件侦听器正确连接到这些静态类？我会写一个全球事件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:27:40.953

对于其中一门课程，您可以做这样的事情来帮助您入门

```
private bool _traffic;
public event System.EventHandler TrafficDataChanged;

protected virtual void OnTrafficChanged()
{ 
     if (TrafficDataChanged != null) TrafficDataChanged(this,EventArgs.Empty); 
}

public bool Traffic
{
    get
    {
         return _traffic;
    }

    set
    {
         _traffic=value;
         OnTrafficChanged();
    }
 } 
```

# linux - 自动杀死进程 - linux

> ID：15368916
> 
> 赞同：2
> 
> 时间：2013-03-12T18:13:20.040
> 
> 标签：linux, grep, kill-process

我正在运行这个命令：

```
pgrep -l someprocess 
```

我得到一些输出`XXXX someprocess`

然后我手动杀死每个出现的进程，我想编写一个脚本来自动执行它，但这没有（没有意义 `kill -9 $(pgrep -l someprocess | grep "^[0-9]{4}")`

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T18:15:38.080

您可以使用`pkill`或`killall`完全实现这一点。

我发现[这个](http://www.thegeekstuff.com/2009/12/4-ways-to-kill-a-process-kill-killall-pkill-xkill/)简短而清晰的总结解释了不同的`kill`编程方式。

`pkill`很简单：`pkill someprocess`.

@ewm 已经在他的回答中包含了详细的解释`killall`，所以我在这里不再重复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T18:16:00.517

您可能想查看“killall”命令：

KILLALL(1) 用户命令 KILLALL(1)

NAME killall - 按名称杀死进程

概要 killall [-Z,--context pattern] [-e,--exact] [-g,--process-group] [-i,--interactive] [-q,--quiet] [-r,- -regexp] [-s,--signal 信号] [-u,--user 用户] [-v,--verbose] [-w,--wait] [-I,--ignore-case] [-V ,--version] [--] 名称 ... killall -l killall -V,--version

描述 killall 向运行任何指定命令的所有进程发送信号。如果未指定信号名称，则发送 SIGTERM。

```
 Signals can be specified either by name (e.g. -HUP or -SIGHUP ) or by number (e.g. -1) or  by  option
   -s.

   If the command name is not regular expression (option -r) and contains a slash (/), processes execut-
   ing that particular file will be selected for killing, independent of their name.

   killall returns a zero return code if at least one process has been killed for each  listed  command,
   or  no  commands  were listed and at least one process matched the -u and -Z search criteria. killall
   returns non-zero otherwise.

   A killall process never kills itself (but may kill other killall processes). 
```

# wordpress - 分页时，Wordpress 循环分页在所有页面上显示第 1 页结果

> ID：15368918
> 
> 赞同：0
> 
> 时间：2013-03-12T18:13:24.870
> 
> 标签：wordpress

我是 wordpress n00b 并且遇到分页问题。我正在使用以下“示例”循环代码：

```
<div id="content">
    <?php /* Top post navigation */ ?>
    <?php
               $args = array(
               'posts_per_page' => '25',
               'cat' => '-33'
                   ); 
    ?>
    <?php global $wp_query; 
                 $wp_query = new WP_Query( $args );
                 $total_pages = $wp_query->max_num_pages; 
                 if ( $total_pages > 1 ) { ?>

    <?php } ?>

    <?php /* The Loop — with comments! */ ?>
    <?php while ( have_posts() ) : the_post() ?>

    <?php /* Create a div with a unique ID thanks to the_ID() and semantic classes with post_class() */ ?>
                    <div id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
    <?php /* an h2 title */ ?>
                        <h2 class="entry-title"><a href="<?php the_permalink(); ?>" title="<?php printf( __('Permalink to %s', 'hbd-theme'), the_title_attribute('echo=0') ); ?>" rel="bookmark"><?php the_title(); ?></a></h2>

    <?php /* Microformatted, translatable post meta */ ?>
                        <div class="entry-meta">
                            <span class="meta-prep meta-prep-author"><?php _e('By ', 'hbd-theme'); ?></span>
                            <span class="author vcard"><a class="url fn n" href="<?php echo get_author_link( false, $authordata->ID, $authordata->user_nicename ); ?>" title="<?php printf( __( 'View all posts by %s', 'hbd-theme' ), $authordata->display_name ); ?>"><?php the_author(); ?></a></span>
                            <span class="meta-sep"> | </span>
                            <span class="meta-prep meta-prep-entry-date"><?php _e('Published ', 'hbd-theme'); ?></span>
                            <span class="entry-date"><abbr class="published" title="<?php the_time('Y-m-d\TH:i:sO') ?>"><?php the_time( get_option( 'date_format' ) ); ?></abbr></span>
                            <?php edit_post_link( __( 'Edit', 'hbd-theme' ), "<span class=\"meta-sep\">|</span>\n\t\t\t\t\t\t<span class=\"edit-link\">", "</span>\n\t\t\t\t\t" ) ?>
                        </div><!-- .entry-meta -->

    <?php /* The entry content */ ?>
                        <div class="entry-content">
    <?php the_content( __( 'Continue reading <span class="meta-nav">&raquo;</span>', 'hbd-theme' )  ); ?>
    <?php wp_link_pages('before=<div class="page-link">' . __( 'Pages:', 'hbd-theme' ) . '&after=</div>') ?>
                        </div><!-- .entry-content -->

    <?php /* Microformatted category and tag links along with a comments link */ ?>
                        <div class="entry-utility">
                            <span class="cat-links"><span class="entry-utility-prep entry-utility-prep-cat-links"><?php _e( 'Posted in ', 'hbd-theme' ); ?></span><?php echo get_the_category_list(', '); ?></span>
                            <span class="meta-sep"> | </span>
                            <?php the_tags( '<span class="tag-links"><span class="entry-utility-prep entry-utility-prep-tag-links">' . __('Tagged ', 'hbd-theme' ) . '</span>', ", ", "</span>\n\t\t\t\t\t\t<span class=\"meta-sep\">|</span>\n" ) ?>
                            <span class="comments-link"><?php comments_popup_link( __( 'Leave a comment', 'hbd-theme' ), __( '1 Comment', 'hbd-theme' ), __( '% Comments', 'hbd-theme' ) ) ?></span>
                            <?php edit_post_link( __( 'Edit', 'hbd-theme' ), "<span class=\"meta-sep\">|</span>\n\t\t\t\t\t\t<span class=\"edit-link\">", "</span>\n\t\t\t\t\t\n" ) ?>
                        </div><!-- #entry-utility -->
                    </div><!-- #post-<?php the_ID(); ?> -->

    <?php /* Close up the post div and then end the loop with endwhile */ ?>      

    <?php endwhile; ?>

    <?php /* Bottom post navigation */ ?>
    <?php global $wp_query; $total_pages = $wp_query->max_num_pages; if ( $total_pages > 1 ) { ?>
                    <div id="nav-below" class="navigation">
                        <?php next_posts_link(__( '<span class="meta-nav">&laquo;</span> Older posts', 'hbd-theme' )) ?> <span style="color: #bbb;">&#8226;</span> <?php previous_posts_link(__( 'Newer posts <span class="meta-nav">&raquo;</span>', 'hbd-theme' )) ?>
                    </div><!-- #nav-below -->
    <?php } ?>
</div><!-- #content --> 
```

我感觉我正在覆盖一些查询值，但我在各种博客上发现了相互矛盾的信息。我觉得这与我的`$args`阵列有关。

我应该把它连接起来吗？

如果有，在哪里？`$wp_query`?

在此先感谢您的帮助，并为 wordpress noob-ness 道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:55:28.417

我会在你之前添加`args`

```
$paged = get_query_var( 'paged' ) ? get_query_var( 'paged' ) : 1; // setup pagination 
```

然后在你的`args`

```
$args = array(
           'posts_per_page' => 25,
           'cat' => '-33',
           'paged' => $paged
        ); 
```

接下来使用它来显示分页

```
'<div class="classForOld">'.get_next_posts_link('Older', $wp_query->max_num_pages).'</div>'; //Older Link using max_num_pages
'<div class="classForNew">'.get_previous_posts_link('Newer', $wp_query->max_num_pages).'</div>'; //Newer Link using max_num_pages 
```

这就是你所需要的。

# ios - 使用 RestKit for iOS 将值硬编码到 Coredata 中

> ID：15368923
> 
> 赞同：0
> 
> 时间：2013-03-12T18:13:43.207
> 
> 标签：ios, restkit

我正在使用适用于 iOS 的最新 RestKit。我有几个不同的 API 想要映射到同一个 CoreData 对象中。我正在尝试在标识数据来自哪个 API 的对象上的字段中硬编码一个值。

有谁知道这是否可以使用 RKEntityMapping for RestKit？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:54:09.250

您需要将用于存储此值的 API 字段设置为`transient`核心数据对象。接下来使用[setWillMapDeserializedResponseBlock 添加块：](http://restkit.org/api/latest/Classes/RKResponseMapperOperation.html#//api/name/setWillMapDeserializedResponseBlock%3a)您可以在其中将专用指标值添加到映射字典。

# django - 查询唯一值时 Django 注释失败

> ID：15368929
> 
> 赞同：1
> 
> 时间：2013-03-12T18:14:01.873
> 
> 标签：django, django-models, django-views, django-queryset

对于 Django 项目，我需要将两个部件列表合二为一。

**模型.py**：

```
class UserBuild(models.Model):
    project = models.ForeignKey(Project)
    created = models.DateTimeField(auto_now_add=True)
    updated = models.DateTimeField(auto_now=True)
    part = models.ForeignKey(Parts)
    part_quantity = models.IntegerField(max_length=5, null=True, blank=True)
    suggested_quantity = models.IntegerField(
        max_length=5, null=True, blank=True
    ) 
```

**视图.py**：

```
def CombineProjects(request, template_name='combined_projects.html'):
    ...
    build_set = UserBuild.objects.values(
        #'pk',
        #'project__pk',
        'part__number',
        'part__part_type__name',
        'part__price',
        'part__description',
        'part__category__name'
    ).filter(
        project__in=projects
    ).order_by('part__category', 'part__part_type').annotate(total=Sum('part_quantity')) 
```

基本上在这里我想对所有相同的部分进行分组并总结它们的数量。如上所述，但如果我取消注释`pk`or`project__pk`参数，则不再对这些部分进行分组（我假设因为即使部分相同，它们也是可变的）。

有什么方法可以保持分组但也包括`pk`和`project__pk`值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:48:02.063

问题是您的值列表是您分组和汇总的内容；所以你真的只想按项目和零件号分组。

我会尝试：

```
build_set = UserBuild.objects.values(
    'project__pk',
    'part__number',
).filter(
    project__in=projects
).order_by('part__category', 'part__part_type').annotate(total=Sum('part_quantity')) 
```

然后稍后将其他属性合并到此列表中。但是，我不确定这是否可行。您可能需要这样做：

```
build_set = UserBuild.objects.values(
    'project_id',
    'part_id',
).filter(
    project__in=projects
).order_by('part__category', 'part__part_type').annotate(total=Sum('part_quantity')) 
```

之后手工做更多的工作。

# c# - 我应该如何在当前会话中存储我的动态 css 文件名

> ID：15368930
> 
> 赞同：2
> 
> 时间：2013-03-12T18:14:02.247
> 
> 标签：c#, asp.net-mvc, cookies, razor

我不知道如何直接问这个，所以我会解释我的情况。

我们为客户提供了一个门户网站，他们可以这样访问该网站：

[http://url.com/webporta/](http://url.com/webporta/) {他们的向导}/

guid 确定为站点加载的 css 文件：

```
<link href="@Url.Content(string.Format("~/Content/{0}.css", GetCookieInfo.CssFile))" rel="stylesheet" type="text/css" /> 
```

每次他们访问该站点时，我都会读取 css 文件名并重新填充 cookie，以确保我具有当前值。

这是我从服务调用中读取数据库并写出 cookie 的地方：

```
 var css = client.GetCssFile(id);
    if (string.IsNullOrEmpty(css))
    {
      sb.AppendLine("Setting css to 'Site' default since GetCssFile returned null or empty.");
      css = "Site";
    } 
```

以及为编写它而调用的方法：

```
 var httpCookie4 = HttpContext.Current.Request.Cookies.Get(CookieEnums.CssFile.ToString());
    return httpCookie4 != null ? httpCookie4.Value : "Site"; 
```

**在他们使用不同的向导访问之前，这工作正常。他们“重读”cookie的唯一方法是按CTRL-F5强制刷新页面。**

必须有比这更好的方法，因为我似乎无法让网站在加载时重新读取 cookie，或者至少我不知道如何去做。

关于更好的处理方式有什么建议吗？

**========== 编辑#1 ===========**

我最初尝试了会话，但遇到了超时问题。我还被建议在这篇文章中使用 cookie： [我应该如何依赖 Session](https://stackoverflow.com/questions/14075989/how-reliant-should-i-be-on-session?rq=1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:24:44.967

不是将 CSS 文件名存储在 cookie 中，而是让控制器或 http 处理程序根据 GUID 决定要服务的 CSS 文件。

所以 URL 将类似于`http://url.com/whatever/GetCSS/{GUID}`. 当他们访问具有不同 GUID 的站点时，响应将更改为该 GUID 的相应 CSS 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:02:33.767

ErocM 这里是你也可以尝试的东西

你知道如何设置/调整会话超时吗？如果没有，请执行以下操作

`to change session timeout write this code in your web.config file` `or you can also set this in global.asax file as Session.Timeout = 60;` `// in Session.Start() event`它会`increase your session expire time`的。

# ruby - 在 Ruby 中添加坚持到数组的元素

> ID：15368940
> 
> 赞同：-1
> 
> 时间：2013-03-12T18:14:30.273
> 
> 标签：ruby

```
(100..999).each do |x| 
  (100..999).each do |y|

    z = x * y
    a = []

    if z.to_s.reverse == z.to_s
        a.push(z)
    end

    puts a

  end
end 
```

这段代码可能绝对可怕，但我在获取值以“粘贴”到我的数组时遇到问题。每当我运行代码时，它会将所有数字作为一个包含单个值的数组返回，我不确定为什么，任何关于为什么以及如何解决这个问题的解释都会很好。更多的是学习练习。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:18:47.240

你需要把`a = []`你的块放在外面，像这样：

```
a = []

(100..999).each do |x| 
  (100..999).each do |y|

    z = x * y

    a.push(z) if z.to_s.reverse == z.to_s

  end
end

puts a 
```

如果您不这样做，则在每个循环期间将创建一个新数组。要理解这一点，您应该查看有关范围的文档。如果您`a`在每个范围内定义变量，它将是该范围的本地变量，这就是您的值不会“坚持”-> 持久的原因。

# cocos2d-iphone - 运行 CCRotateBy 和 CCBezierTo 动作的 CCSpawn 是否太昂贵？

> ID：15368944
> 
> 赞同：0
> 
> 时间：2013-03-12T18:14:43.587
> 
> 标签：cocos2d-iphone, frame-rate

我正在尝试像这样运行 CCRotateBy 和 CCBezierTo 动作的 CCSpawn：

```
ccBezierConfig bezier;
    bezier.controlPoint_1 = ccp (startX, startY);
    bezier.controlPoint_2 = ccp (endX, endY);
    bezier.endPosition    = ccp (endX, endY);

    id rotate =[CCRotateBy actionWithDuration:3.0f angle:360];
    id curve = [CCBezierTo actionWithDuration:3.0f bezier:bezier];
    id spawn = [CCSpawn actions:rotate, curve, nil];

    [self runAction:spawn]; 
```

但是当这些动作运行时，它似乎很生涩/跳跃。我已经在模拟器中对其进行了测试（虽然这不准确），但它在那里非常跳动，但后来我在 iphone 3gs、iphone 4 和 iphone 5 上进行测试。在 iphone 5 上的动作似乎真的很流畅，然后它得到了iphone 4 有点生涩，3gs 更是如此。我遇到的问题是我没有注意到任何设备或模拟器上的任何帧速率下降。任何现场将不胜感激。

# c - 将 C 转换为帕斯卡

> ID：15368945
> 
> 赞同：2
> 
> 时间：2013-03-12T18:14:47.543
> 
> 标签：c, freepascal

我正在尝试将 libfprint (fprint.h) 的标头转换为 Pascal，但我发现一个无法理解的结构，并且某些工具（例如“C2Pas”）只会发送错误。

结构如下：

```
struct fp_dscv_dev **fp_discover_devs(void); 
```

其中 fp_dscv_dev 仅声明如下：

```
/* structs that applications are not allowed to peek into */
struct fp_dscv_dev; 
```

帕斯卡的等价物是什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:50:06.150

Opague 指针传统上是 Pascal 中的基本指针（如 c 中的 void *）。

如果您真的想返回结构方面，请将其定义为没有字段的记录：

```
 Type 
       fp_dscv_dev   = record end; 
```

正如评论中所说，a ** 是双重引用由于在大多数现代帕斯卡引用不能在参数和返回值声明中，我们为它们定义了额外的类型：

```
 pfp_dscv_dev  = ^fp_dscv_dev
       ppfp_dscv_dev = ^pfp_dscv_dev 
```

最后声明本身是

```
 function fp_discover_devs:ppfp_dscv_dev; cdecl; 
```

# java - 如何在java中打开hex文件？

> ID：15368947
> 
> 赞同：0
> 
> 时间：2013-03-12T18:14:54.657
> 
> 标签：java, file-io, binary

所以我写了这个应该打开文件并将其输出到屏幕的小类。我的文件是十六进制文件，所以当我在记事本中打开它时，它会输出取决于编码的随机字符。所以我想我必须先将它转换为二进制然后输出（无论如何我都想要它）。

然而，java 在转换时给了我一个错误，并表明它被解释为文本。

怎么了？

班级：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.util.*;

public class fileClass {

    private Scanner s;
    private String content;

    public void openFile(String fileName) {
        try {
            s = new Scanner(new FileReader(fileName));
            content = s.next();

        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
        finally{
            s.close();
        }
    }

    public String HexToBinary(String Hex) {
        int i = Integer.parseInt(Hex, 16);
        String Bin = Integer.toBinaryString(i);
        return Bin;
    }

    public void output() {
        System.out.println(HexToBinary(content));
    }
} 
```

错误：

```
Exception in thread "main" java.lang.NumberFormatException: For input string: "tîxl¸?
    at java.lang.NumberFormatException.forInputString(Unknown Source)
    at java.lang.Integer.parseInt(Unknown Source)
    at fileClass.HexToBinary(fileClass.java:29)
    at fileClass.output(fileClass.java:36)
    at test.main(test.java:8) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:23:53.533

不要使用扫描仪或 FileReader，因为它们是基于文本的。我猜你只想读取一个二进制文件，[FileInputStream](http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html)就足够了。

# php - open_basedir 未正确设置

> ID：15368951
> 
> 赞同：1
> 
> 时间：2013-03-12T18:15:10.843
> 
> 标签：php, apache, codeigniter, mediatemple, open-basedir

这可能有点以服务器为中心，但我希望有人能提供帮助。

我有一个 PHP CodeIgniter 应用程序，我正在尝试设置它以在服务器（或本地计算机）上设置配置文件（如 application/config/database.php），因此它们不在 github 中（所以数据库密码不是跟踪），它使一切变得更容易。

所以我让它在本地主机上完美运行，基本上它可以追溯到：

```
/path_before_httpdocs/config/development/config.php 
```

但是在服务器上我设置了文件夹结构，但是我收到了这个错误：

```
Warning: require(): open_basedir restriction in effect. 
File(/var/www/vhosts/mysite.com/subdomains/staging/config/staging/config.php) is not within the allowed path(s):
(/var/www/vhosts/mysite.com/subdomains/staging/httpdocs/:/tmp/:/var/www/vhosts/mysite.com/subdomains/staging/httpsdocs/:/tmp/) 
in /home/mysite/staging/deploy/releases/20130312155222/httpdocs/application/config/config.php on line 12 
```

所以我做的第一件事就是去 php.ini 文件看看它是什么。它没有设置，所以我将它设置为 php.ini 然后重新启动 httpd。所以现在如果我运行 phpinfo() 我会看到：

```
Directive    |        Local Value                                                                                                           |        Master Value
open_basedir | /var/www/vhosts/mysite.com/subdomains/staging/httpdocs/:/tmp/:/var/www/vhosts/mysite.com/subdomains/staging/httpsdocs/:/tmp/ | /var/www/vhosts/mysite.com/subdomains/staging/config/staging/:/tmp/ 
```

我仍然得到错误。所以接下来我做的就是尝试

```
ini_set('open_basedir', '/var/www/vhosts/mysite.com/subdomains/staging/config/staging/:/tmp/'); 
```

这也没有用。所以接下来我只是回应了 ini_get('open_basedir') 并返回了

```
/var/www/vhosts/mysite.com/subdomains/staging/httpdocs/:/tmp/:/var/www/vhosts/mysite.com/subdomains/staging/httpsdocs/:/tmp/ 
```

所以看起来它忽略了我的 php.ini

我尝试关注[这篇文章](http://kb.mediatemple.net/questions/514/How+do+I+set+the+path+for+open_basedir?#dv_40)（我在 mediatemple 上的 DV 4 上托管）。Mediatemple 的支持人员说他们帮不了我。这里有人有什么想法吗？如果需要，我还可以提供更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:08:57.603

我终于来了一个答案。在 Plesk 中，我能够设置 php 设置并定义 open_basedir。

# c - 如何为动态安装打印机端口授予root权限。？

> ID：15368954
> 
> 赞同：-1
> 
> 时间：2013-03-12T18:15:14.977
> 
> 标签：c, linux

我如何授予用户权限以将打印机端口“/dev/usb/lp0”动态挂载到fedora os中的普通用户。

当我连接 USB 打印机时，此端口将被挂载。作为普通用户，我如何在 read_write 模式下打开此端口。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:42:17.150

如前所述，udev 规则应该为您解决这个问题：

在您的用户 udev 规则目录（例如 /etc/udev/rules.d）中创建一个名为“10-local.rules”的文件并添加以下行：

```
KERNEL=="lp0", SUBSYSTEM=="usb", MODE="0666" 
```

然后 udev 系统应该更改权限以授予对设备的每个读写访问权限。

# sql - sql服务器宏

> ID：15368956
> 
> 赞同：0
> 
> 时间：2013-03-12T18:15:19.940
> 
> 标签：sql, sql-server, ssms

我想按顺序向表中添加和更新一些列（P_1、P_2、P_3...）。要更新 P_2，我需要在上一步中更新 P_1。有没有办法编写一个可以在**SSMS中执行此操作的循环**

```
for i in (1 to 10)
     alter table tab1 add P_i
     if(i>1)
          update tab1 set P_i = P_(i-1)*2+[blah blah]
     else
          update tab1 set p_i = [blah blah]
     end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:37:29.750

你当然可以。这是您可以在 SSMS 中执行的一些条件逻辑的示例。这将向您展示如何执行 WHILE 循环、IF/THEN 语句和 CASE 语句。HTH。

```
-- DROP TABLE dbo.Test
CREATE TABLE dbo.Test ( myID INT );

DECLARE @iteration INT = 0;

WHILE @iteration < 10
BEGIN
    IF @iteration = 0
    BEGIN
        INSERT INTO dbo.Test VALUES (-1);
    END;
    ELSE
    BEGIN
        UPDATE dbo.Test
        SET myID = CASE 
                    WHEN @iteration = 1 THEN 0 
                    WHEN @iteration = 2 THEN 123
                    ELSE @iteration 
                   END;
    END;

    SELECT * FROM dbo.Test;

    SET @iteration += 1;
END; 
```

# .net - Powershell中的点网表单不以3D显示

> ID：15368962
> 
> 赞同：2
> 
> 时间：2013-03-12T18:15:29.363
> 
> 标签：.net, forms, powershell, 3d

有谁知道为什么 .net 表单会在 Powershell ISE 中显示默认的 3D 外观，但在运行 .ps1 时不会显示？我已将按钮的平面样式更改为“标准”，没有任何变化。我安装了 .net 4.5。“弹出式”平面样式确实改变了外观，但这不是我想要的。日历和工具提示看起来也完全不同。我尝试添加这一行，但没有任何区别：

```
$MenuBox.FormBorderStyle = [System.Windows.Forms.FormBorderStyle]::Fixed3D 
```

屏幕截图和代码示例如下。谢谢。

![截屏](../Images/7da344b11fc00165b0c3e433cb402e9a.png)

```
 # Create a listbox to select the region
    [void] [System.Reflection.Assembly]::LoadWithPartialName("System.Windows.Forms")
    [void] [System.Reflection.Assembly]::LoadWithPartialName("System.Drawing")

    # Menu Layout
    $MenuBox = New-Object System.Windows.Forms.Form
    $MenuBox.Size = New-Object System.Drawing.Size @(650,450)
    $MenuBox.Text = "Auto v" + $VersionNumber + " - Powershell"
    $MenuBox.StartPosition = "CenterScreen"
    $MenuBox.AutoSize = $False
    $MenuBox.FormBorderStyle = [System.Windows.Forms.FormBorderStyle]::Fixed3D

    # Menu Header Text
    $MenuHeader = New-Object System.Windows.Forms.Label
    $MenuHeader.Font = New-Object System.Drawing.Font("Microsoft Sans Serif",14,1,3,1)
    $MenuHeader.Location = New-Object System.Drawing.Size(118,20)
    $MenuHeader.Size = New-Object System.Drawing.Size(380,40) 
    $MenuHeader.Text = "$MenuHeaderText"
    $MenuHeader.TextAlign = [System.Drawing.ContentAlignment]::TopCenter
    $MenuBox.Controls.Add($MenuHeader)

    # Add Region List Box
    If ($RegionListBoxAvailable -eq "True") {
        $RegionListBoxLabel = New-Object System.Windows.Forms.Label
        $RegionListBoxLabel.Font = New-Object System.Drawing.Font("Microsoft Sans Serif",10,0,3,1)
        $RegionListBoxLabel.Location = New-Object System.Drawing.Size(60,80) 
        $RegionListBoxLabel.Size = New-Object System.Drawing.Size(280,20) 
        $RegionListBoxLabel.Text = "Select the REGION:"
        $MenuBox.Controls.Add($RegionListBoxLabel)

        $RegionListBox = New-Object System.Windows.Forms.ListBox 
        $RegionListBox.Location = New-Object System.Drawing.Size(62,100) 
        $RegionListBox.Size = New-Object System.Drawing.Size(130,42) 
        $RegionListBox.Height = 42
        [void] $RegionListBox.Items.Add("Alabama HQ Devices")
        [void] $RegionListBox.Items.Add("Carolinas HQ Devices")
        $RegionListBox.SetSelected(0,$True)
        $global:RegionSelect = $RegionListBox.SelectedItems
        $MenuBox.Controls.Add($RegionListBox)

        $RegionListBoxToolTip = New-Object System.Windows.Forms.ToolTip
        $RegionListBoxToolTip.IsBalloon = $True
        $RegionListBoxToolTip.InitialDelay = 1000
        $RegionListBoxToolTip.SetToolTip($RegionListBox, "Select a region based on HQ")
        }

    # Add Labels for Menu Elements
    If (!($BoxLabelText -eq $Null)) {
        $BoxLabel = New-Object System.Windows.Forms.Label
        $BoxLabel.Font = New-Object System.Drawing.Font("Microsoft Sans Serif",10,0,3,1)
        $BoxLabel.Location = New-Object System.Drawing.Size(10,60) 
        $BoxLabel.Size = New-Object System.Drawing.Size(680,20) 
        $BoxLabel.Text = "$BoxLabelText"
        $MenuBox.Controls.Add($BoxLabel)
        }

    # Button 7
    If (!($ButtonList[6] -eq "Nothing")) {
        $Button7 = New-Object System.Windows.Forms.Button
        $Button7.Location = New-Object System.Drawing.Size(62,60)
        $Button7.Size = New-Object System.Drawing.Size(500,30)
        $Button7.Add_Click({
            $global:ButtonResult = $ButtonList[6]
            $MenuBox.Close()
            })
        $Button7.Text = $ButtonList[6]
        $Button7.Font = New-Object System.Drawing.Font("Microsoft Sans Serif",12,0,3,1)
        $MenuBox.Controls.Add($Button7)
        }

    # Button 6
    If (!($ButtonList[5] -eq "Nothing")) {
        $Button6 = New-Object System.Windows.Forms.Button
        $Button6.Location = New-Object System.Drawing.Size(62,100)
        $Button6.Size = New-Object System.Drawing.Size(500,30)
        $Button6.Add_Click({
            $global:ButtonResult = $ButtonList[5]
            $MenuBox.Close()
            })
        $Button6.Text = $ButtonList[5]
        $Button6.Font = New-Object System.Drawing.Font("Microsoft Sans Serif",12,0,3,1)
        $MenuBox.Controls.Add($Button6)
        }

    # Button 5
    If (!($ButtonList[4] -eq "Nothing")) {
        $Button5 = New-Object System.Windows.Forms.Button
        $Button5.Location = New-Object System.Drawing.Size(62,140)
        $Button5.Size = New-Object System.Drawing.Size(500,30)
        $Button5.Add_Click({
            $global:ButtonResult = $ButtonList[4]
            $MenuBox.Close()
            })
        $Button5.Text = $ButtonList[4]
        $Button5.Font = New-Object System.Drawing.Font("Microsoft Sans Serif",12,0,3,1)
        $MenuBox.Controls.Add($Button5)
        }

    # Button 4
    If (!($ButtonList[3] -eq "Nothing")) {
        $Button4 = New-Object System.Windows.Forms.Button
        $Button4.Location = New-Object System.Drawing.Size(62,180)
        $Button4.Size = New-Object System.Drawing.Size(500,30)
        $Button4.Add_Click({
            $global:ButtonResult = $ButtonList[3]
            $MenuBox.Close()
            })
        $Button4.Text = $ButtonList[3]
        $Button4.Font = New-Object System.Drawing.Font("Microsoft Sans Serif",12,0,3,1)
        $MenuBox.Controls.Add($Button4)
        }

    # Button 3
    If (!($ButtonList[2] -eq "Nothing")) {
        $Button3 = New-Object System.Windows.Forms.Button
        $Button3.Location = New-Object System.Drawing.Size(62,220)
        $Button3.Size = New-Object System.Drawing.Size(500,30)
        $Button3.Add_Click({
            $global:ButtonResult = $ButtonList[2]
            $MenuBox.Close()
            })
        $Button3.Text = $ButtonList[2]
        $Button3.Font = New-Object System.Drawing.Font("Microsoft Sans Serif",12,0,3,1)
        $MenuBox.Controls.Add($Button3)
        }

    # Button 2
    If (!($ButtonList[1] -eq "Nothing")) {
        $Button2 = New-Object System.Windows.Forms.Button
        $Button2.Location = New-Object System.Drawing.Size(62,260)
        $Button2.Size = New-Object System.Drawing.Size(500,30)
        $Button2.Add_Click({
            $global:ButtonResult = $ButtonList[1]
            $MenuBox.Close()
            })
        $Button2.Text = $ButtonList[1]
        $Button2.Font = New-Object System.Drawing.Font("Microsoft Sans Serif",12,0,3,1)
        $MenuBox.Controls.Add($Button2)
        }

    # Button 1 - Includes $Search Variable
    If (!($ButtonList[0] -eq "Nothing")) {
        $Button1 = New-Object System.Windows.Forms.Button
        $Button1.Location = New-Object System.Drawing.Size(62,300)
        $Button1.Size = New-Object System.Drawing.Size(500,30)
        $Button1.Add_Click({
            $global:ButtonResult = $ButtonList[0]
            $MenuBox.Close()
            })
        $Button1.Text = $ButtonList[0]
        #$Button1.Text.MouseOverColor = [System.Drawing.Color]::White
        #$Button1.TextAlign = [System.Drawing.ContentAlignment]::TopCenter
        $Button1.Font = New-Object System.Drawing.Font("Microsoft Sans Serif",12,0,3,1)
        $MenuBox.Controls.Add($Button1)
        }

    # Calendar
    If ($CalendarAvailable -eq $True) {
        $Calendar = New-Object System.Windows.Forms.MonthCalendar 
        $Calendar.Location = New-Object System.Drawing.Size(12,80)
        $Calendar.ShowTodayCircle = $False
        $Calendar.MaxDate = Get-Date
        $Calendar.MinDate = $OldestLog
        $Calendar.MaxSelectionCount = "$CalendarDateRange"
        $MenuBox.Controls.Add($Calendar) 
        }

    # Exit Button
    $ExitButton = New-Object System.Windows.Forms.Button
    $ExitButton.Location = New-Object System.Drawing.Size(540,370)
    $ExitButton.Size = New-Object System.Drawing.Size(75,23)
    $ExitButton.Text = "Exit"
    $ExitButton.Font = New-Object System.Drawing.Font("Microsoft Sans Serif",11,0,3,1)
    $ExitButton.Add_Click({
        Remove-Item "$WorkingDirectory\Temp\*.*" -Force
        $MenuBox.Close()
        })
    $MenuBox.Controls.Add($ExitButton)

    # Show Menu
    $MenuBox.Topmost = $True
    $MenuBox.Add_Shown({$MenuBox.Activate()})
    [void] $MenuBox.ShowDialog() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:27:16.590

尝试将其包含在您的表单创建代码中：

```
[System.Windows.Forms.Application]::EnableVisualStyles() 
```

它使您的表单具有“现代”视觉风格。

# php - PHP将数据库结果添加到多维数组

> ID：15368963
> 
> 赞同：1
> 
> 时间：2013-03-12T18:15:31.480
> 
> 标签：php, mysql, database, arrays

我正在尝试在 PHP 中生成这样的多维数组：

```
$books =  array(

    "8" => array(   "my girl" => 2.5, 
                    "the god delusion" => 3.5,
                    "tweak" => 3, "the shack" => 4,
                    "the birds in my life" => 2.5,
                    "new moon" => 3.5),

    "14" => array(    "the last lecture" => 2.5, 
                      "the god delusion" => 3.5,
                      "the noble wilds" => 3, "the shack" => 3.5,
                      "the birds in my life" => 2.5, "new moon" => 1)
     ); 
```

从这样的数据库表中：

```
ID  value   title
------------------------------------------------------------------
8   5   Clara Callan
8   5   Where You'll Find Me: And Other Stories
8   5   The Middle Stories
8   5   Jane Doe
8   6   The Witchfinder (Amos Walker Mystery Series)
8   6   More Cunning Than Man: A Social History of Rats an...
8   7   Goodbye to the Buttermilk Sky
9   6   Beloved (Plume Contemporary Fiction)
12  10  If I'd Known Then What I Know Now: Why Not Learn f...
14  5   Mary-Kate &amp; Ashley Switching Goals (Mary-Kate ...
14  5   Tell Me This Isn't Happening
14  6   Flood : Mississippi 1927
16  9   Airframe
17  7   Death in the Clouds
17  5   Bant/Spec.Last of the Breed
17  6   Piercing the Darkness
17  3   Prophet
19  7   Prague : A Novel 
```

我已经尝试了几种方法，但我仍然无法弄清楚如何做到这一点。我在这里搜索了很多线程，但仍然没有人讨论这个问题。我是PHP的新手，所以我不太了解PHP中的数组概念。目前我的PHP代码是这样的：

```
 $result = mysql_query($mySelectQuery) or die("<br/><br/>".mysql_error());
        $books = array();
        while ($row = mysql_fetch_array($result)) 
        {
            $userID = $row{'User-ID'};
            $books[$userID] = array($row{'Book-Title'} => $row{'Book-Rating'},);
        } 
```

该代码已经产生了与“我想要的”类似的结果，但它仍然替换了现有的书籍记录，所以最终每个用户的数组中只有一个书籍记录。我的问题是：

我怎样才能用我的查询结果填充一个像我这样格式化的多维数组？

提前一百万感谢您的回答。抱歉英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:17:31.557

尝试：

```
$result = mysql_query($mySelectQuery) or die("<br/><br/>".mysql_error());
    $books = array();
    while ($row = mysql_fetch_array($result)) 
    {
        $userID = $row{'User-ID'};
        $books[$userID][$row{'Book-Title'}] = $row{'Book-Rating'};
    } 
```

这会将您的书名分配为数组键/索引，并将评级设置为其值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:17:31.520

在循环之前添加：

`$books[$userID] = array();`

在循环内部使用：

`$books[$userID][] = array($row{'Book-Title'} => $row{'Book-Rating'},);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T18:17:43.007

试试这个：

`$books[$userID][] = array($row{'Book-Title'} => $row{'Book-Rating'},);`

# visual-studio-2010 - 子报告需要大量时间进行渲染

> ID：15368970
> 
> 赞同：0
> 
> 时间：2013-03-12T18:16:05.617
> 
> 标签：visual-studio-2010, reporting-services, sql-server-2008-r2, rdlc

我正在使用 SQL 2008 r2 处理 SSRS。我使用报表查看器创建了带有子报表的主报表。

问题：每次运行 .rdlc 报告需要将近 5-10 分钟的时间来生成 Win 格式的报告。我正在使用 VS 2010 和 VB.Net。我相信子报告需要花费大量时间渲染。

主 SP 和子报表 SP 正在瞬间执行。

然而，该报告在 BIDS 环境中运行良好，但在报告查看器中加载时需要大量时间渲染

我已尝试搜索有关此问题的许多选项，但找不到足够的帮助。对不起，如果我的问题对你们所有人来说还不够清楚。

（PS=我使用 VS 2010 的 Winform 嵌入式报告作为 .rdlc 而不是 Web 报告或 .rdl (2008)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:35:25.740

这种情况下的标准“陷阱”是 BIDS 正在使用数据集缓存文件，而不是返回 SQL 并重新运行您的查询。

为避免这种情况，您可以在每次执行时更改参数（使缓存无效）或使用 BIDS Helper 背后的天才的此功能：

[http://bidshelper.codeplex.com/wikipage?title=Delete%20Dataset%20Cache%20Files&referringTitle=Documentation](http://bidshelper.codeplex.com/wikipage?title=Delete%20Dataset%20Cache%20Files&referringTitle=Documentation)

如果是这种情况，真正的问题是您的数据集查询需要很长时间才能运行。这通常是 SQL 或数据库设计问题，而不是 SSRS。

# r - 用于生成 URL 的循环和向量；循环中的数字

> ID：15368971
> 
> 赞同：1
> 
> 时间：2013-03-12T18:16:06.133
> 
> 标签：r, loops, matrix

我想生成一个对应于一年中每一天的 URL 向量，但似乎无法弄清楚两件事：i）我想生成一个包含所有日期的 url 向量，但不断得到一个矩阵每个月生成一个向量（向量长度为​​ 372 而不是 12 列，每列 31）；和 ii) 我想让单个数字与 0 连接，这样我得到的不是 1,2,3，而是 01,02,03。下面的代码非常感谢所有回复。

```
n <- 12
q <- 31
url_vec <- matrix(NA, ncol = 1, nrow = q)
full_url_vec <- as.data.frame(rep(NA, q)) 

for(j in 1:n){

            url_year <- paste("http://www.parliament.go.ug/hansard/hans_view_date.jsp?dateYYYY=2009&dateMM=", j, "&dateDD=", sep = "")                      
        for(i in 1:q){
        url <-  paste(url_year, "&dateDD=", i, sep = "")
        url_vec[i,] <- url          
    }

full_url_vec[,j] <- url_vec

}

dim(full_url_vec)
full_url_vec 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:18:25.570

你甚至不需要循环。 `paste`被矢量化了
*，也`paste0`省去了使用的步骤`sep=""`*

```
i <- 1:31

urlBase  <- "http://yourwebiste.com/?dfdfsdfdfd."
urlSuffix <- "apikey=d323j43k43"

paste0(urlBase, i, urlSuffix) 
```

* * *

至于与`0`'s 连接，这里有一个函数，`fw0()`在 github 上可以做到这一点：链接：[https ://github.com/rsaporta/pubR/blob/gitbranch/fw0.R](https://github.com/rsaporta/pubR/blob/gitbranch/fw0.R)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:51:55.943

这是一种方法：`sprintf`与 结合使用`paste`。这里的关键是确保您的月份向量 ( `j`) 适当地循环，所以为此，我使用了`rep`.

```
j <- rep(sprintf("%02d", 1:12), each = 31)
i <- sprintf("%02d", 1:31)
url_year <- paste("http://some/siteMM=", j, "&dateDD=", i, sep = "")
length(url_year)
# [1] 372
head(url_year)
# [1] "http://some/siteMM=01&dateDD=01" "http://some/siteMM=01&dateDD=02"
# [3] "http://some/siteMM=01&dateDD=03" "http://some/siteMM=01&dateDD=04"
# [5] "http://some/siteMM=01&dateDD=05" "http://some/siteMM=01&dateDD=06"
tail(url_year)
# [1] "http://some/siteMM=12&dateDD=26" "http://some/siteMM=12&dateDD=27"
# [3] "http://some/siteMM=12&dateDD=28" "http://some/siteMM=12&dateDD=29"
# [5] "http://some/siteMM=12&dateDD=30" "http://some/siteMM=12&dateDD=31" 
```

# javascript - DataTables：确认用户希望分页

> ID：15368975
> 
> 赞同：1
> 
> 时间：2013-03-12T18:16:16.930
> 
> 标签：javascript, jquery, ajax, datatables

我们有许多 jQuery DataTables 都使用服务器端处理。我们设置了分页和排序，一切运行良好。在这些表中，至少有一列复选框允许选择行以进行某种处理。如果选中任何复选框，我们想确认用户希望分页或排序。

## 我认为我能做的（和不能做的）

```
"fnPreDrawCallback" : function(table) {
    if (CullAddress.AddressIsChecked()) {
        var $warningDiv = $('div#pageWarning');
        var warningText = "One or more Addresses are selected for Excluding or Tagging.  Are you sure you wish to nvaigate away?";
        $warningDiv.find("div#pageWarningText").html(warningText);
        $warningDiv.dialog({
            resizable: false,
            height: "auto",
            width: "auto",
            modal: true,
            buttons: {
                "Leave Page": function () {
                    CullAddress.resetWarningText();
                    $warningDiv.dialog('close');
                },
                "Stay On Page": function () {
                    CullAddress.resetWarningText();
                    $warningDiv.dialog('close');
                    return false;
                }
            },

        });
    }
}, 
```

最初我认为这很简单，但现在，它变得有点沉重，我不确定正确的方法是什么。我正在尝试使用 fnPreDrawCallback，最初我打算创建和显示一个 jQueryUI 对话框，并让按钮确定是否`return false;`退出回调从而留在页面上，或者允许页面/排序通过。

我现在明白 javaScript 不能那样工作。我怀疑我将不得不做以下事情，但在我遇到那个麻烦之前，我想问一下是否有更简洁（和可重用）的方式来做这件事。

*   在 fnPreDrawCallback 中，获取描述预期设置页面/排序的属性（例如 offset、pageSize、sSortDir、iSortCol 等）。
*   通过对话框确定是继续还是留在页面上
*   使用上述属性为数据表构造 GET 以绕过 fnPreDrawCallback

我是否让这变得更加困难？当然，我不是第一个想要这样做的人，但对于我的生活，我可以找到一个例子，或者我无法弄清楚我应该搜索的关键字......

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:19:01.210

链接到工作示例：http: [//jsfiddle.net/6frQZ/3/](http://jsfiddle.net/6frQZ/3/)

As already discussed in the comments to the question, I tried to circumvent the default behaviour of DataTables to fit your needs and created an example [on jsFiddle](http://jsfiddle.net/6frQZ/3/) to show, including numbered-pagination and sorting.

Basically, you'll need to unbind the event-handlers, that the DataTables - plugin binds to it's components, like so:

```
$('.dataTables_paginate a').unbind();
$('.dataTables_wrapper thead th').unbind(); 
```

Using `.unbind` without a parameter will unbind any event-listener on the element, so be careful when using this.

Gladly, the DataTables - API provides functions that let you call the internal paging and sorting-methods yourself, named [fnSort (API-Link)](http://datatables.net/api#fnSort) and [fnPageChange (API-Link)](http://datatables.net/api#fnPageChange).

To keep it simple, i just used a `confirm` - Box to ask for the user-interaction:

```
var userInteraction = confirm("Do you really want to change the page?");

if(userInteraction){
    oTable.fnPageChange(dir);
    $('.dataTables_paginate span a').unbind();
} 
```

but all you'd need to do is call the DataTables-functions inside of your `"Leave Page"` - callback you already provided in the code.

**Note**: When it comes to the numbered buttons of the paging: It seems like DataTables regenerates those everytime the paging is changed, thus I need to unbind the event-Handlers again after every page-change.

The rest is simple yet not very elegant code, in which I just look for certain classes to know, what button was clicked or which state the sorting-header is in.

Excerpt:

```
var dir = "",
    $this = $(this);

if($this.hasClass('previous')){
    dir = "previous";
}else if ($this.hasClass('next')){
    dir = "next";
}else if($this.hasClass('first')){
    dir = "first";
}else if($this.hasClass('last')){
    dir = "last";
}else{
    dir = parseInt($this.text(),10)-1;
} 
```

# visual-studio-2012 - 詹金斯中的打字稿错误

> ID：15368976
> 
> 赞同：1
> 
> 时间：2013-03-12T18:16:19.343
> 
> 标签：visual-studio-2012, msbuild, jenkins, typescript

我在 Jenkins 中有以下错误（指的是磁盘上的路径，下面的每个实例都可以不同，并且不一定与所有其他实例相同）

```
The command "tsc "C:\<path>\shared.editpage-default.ts" "C:\<path>\shared.editpage-editenabled.ts" "C:\<path>\shared.filters.ts" "C:\<path>\perfect.common.interfaces.d.ts" "C:\<path>\perfect.hide-and-seek.ts" "C:\<path>\perfect.domutils.ts" "C:\<path>\jquery.validation.d.ts" "C:\<path>\perfect.pagination.ts" "C:\<path>\perfect.sorting.ts" "C:\<path>\jquery.d.ts" "C:\<path>\perfect.langchange.ts" "C:\<path>\perfect.switchbox.ts" "C:\<path>\perfect.validation.ts"" exited with code 9009.
c:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(847,9): warning MSB3644: The reference assemblies for framework ".NETFramework,Version=v4.5" were not found. To resolve this, install the SDK or Targeting Pack for this framework version or retarget your application to a version of the framework for which you have the SDK or Targeting Pack installed. Note that assemblies will be resolved from the Global Assembly Cache (GAC) and will be used in place of reference assemblies. Therefore your assembly may not be correctly targeted for the framework you intend. [C:\<path>\<proj>.csproj] 
```

现在，问题是这样的。我们的项目文件中有一个部分用于构建我们的 TypeScript 文件并在每次保存 TypeScript 文件时创建 .js 文件。这是部分：

```
 <Target Name="BeforeBuild">
    <Message Text="Compiling TypeScript files" />
    <Message Text="Executing tsc$(TypeScriptSourceMap) @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" />
    <Exec Command="tsc$(TypeScriptSourceMap) @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" IgnoreExitCode="true" />
  </Target> 
```

这一切在本地都很好，但在 Jenkins 中失败了，因为 Jenkins 服务器没有安装 TypeScript。问题是我实际上不需要在 Jenkins 上执行 TypeScript 命令，因为正如我所说，生成的 .js 文件无论如何都是在保存时构建和创建的，我们将它们签入。所以有三个选项。

1.  在构建服务器上安装 TypeSctipt。
2.  更改项目文件中的命令，使其仅执行`<Exec Command="tsc ...`如果我们在配置中是 Debug。
3.  将我的构建脚本更改为不构建 TypeScript 文件。

这是我尝试过的。

1.  我想我会尝试在构建服务器上安装 TypeScript，但该服务器是一台旧的 Windows Server 2003 机器，当我尝试在其上安装 TypeScript 0.8.3 时出现以下错误。因此，我在机器上安装了最新的 Windows 更新并重新启动并重新运行 TypeScript 安装并得到相同的错误。

![在此处输入图像描述](../Images/3fb3fdf8decc8f1bf1b3fc646f732018.png)

至于选项 2 和 3。

**我认为 2 将是最简单的一个，尽管我只是不知道我必须使用的 if 语句仅用于为 Debug 配置构建。如果这是解决方案，请让我知道命令。**

选项 3 我认为可能相当困难。

请提出一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:14:53.113

选项 2 应该很容易实现。Exec 任务 ( [http://msdn.microsoft.com/en-us/library/x8zx72cd.aspx](http://msdn.microsoft.com/en-us/library/x8zx72cd.aspx) ) 支持 Condition 参数 ( [http://msdn.microsoft.com/en-us/library/7szfhaft.aspx](http://msdn.microsoft.com/en-us/library/7szfhaft.aspx) )。我认为你想要的看起来像这样：

```
<Exec Command="..." Condition="'$(Configuration)' == 'Debug'" /> 
```

# sql-server - 将评分列设置为计算与每次更新

> ID：15368978
> 
> 赞同：0
> 
> 时间：2013-03-12T18:16:34.577
> 
> 标签：sql-server, performance, database-design, calculated-columns

我有一个`table`名字`Companies`，那里有一个`Rating column`. 公司有很多评论，其中有它的`Rating`专栏。

**Companies.Rating = 其评论评级的平均值**。`Companies.Rating`我的问题：当公司审查被删除、插入、更新等时，计算而不是更新我会更容易。

它会减慢应用程序的速度。严重地 ？PS 每家公司会有大约 300 条评论。（最多）

# objective-c - 如何不动画转换？

> ID：15368982
> 
> 赞同：1
> 
> 时间：2013-03-12T18:16:56.037
> 
> 标签：objective-c, uiview, objective-c-blocks, cgaffinetransform

如何在移动某些帧期间不为变换设置动画？我有一些动画块：

```
 [UIView animateWithDuration:.2 animations:^{
            self.center = [ViewController fitPointToNet:self.center];
            [self.delegate repaint];
        }]; 
```

并重绘调用paintInView 方法。此方法绘制一些图形（例如线）并旋转它们。我想让动画看起来像线移动到目标点 - 现在它移动和旋转。

```
- (void)paintInView:(UIView*)view 
{
//some drawing code   
line.transform = CGAffineTransformMakeRotation(M_PI);
//some drawing code
} 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:54:02.920

您正在从动画块中调用 repaint 方法 - 因此对任何视图的动画属性的任何更改都将被动画化。

您应该从动画的完成块中调用该方法 - 使用该`animateWithDuration:animations:completion`方法而不是您现在使用的方法。

这将在动画完成后执行变换而不制作动画。

# .net - 带有两个面板的 MouseLeave 事件

> ID：15368985
> 
> 赞同：3
> 
> 时间：2013-03-12T18:17:01.967
> 
> 标签：.net, vb.net, visual-studio

我有 2 个面板 (`Panel1`和`Panel2`)`Panel2`放置在里面`Panel1`

我的代码：

```
Private Sub Panel1_MouseLeave(sender As Object, e As EventArgs) Handles Panel1.MouseLeave
    MsgBox("Leave")
End Sub 
```

当`MsgBox`我的鼠标进入内部时弹出`Panel2`。

这不合逻辑，因为我的鼠标还包含在<code>Panel1的区域内。

怎么`Panel2`能被视为与`Panel1`活动目的相同的区域？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:34:35.517

考虑下图，

![在此处输入图像描述](../Images/a4a9b27423ece99508f2ce3d60d28b1d.png)

假设上图表示两个混凝土板（`Two panels`）相互叠放（浅灰色：`panel1`，深灰色：`panel2`）。

你是被`Cursor`要求站在浅灰色板的位置 1 上的人（ ），你会做什么，首先你会进入浅灰色板。[ `panel1.mouseEnter event got fired`] 最后你会到达位置 1。同样你再次要求站在深灰色板的位置 2，这次你要做什么，你会离开浅灰色板 [ `panel1.mouseLeave event got fired`]，然后你会进入深灰色板 [ `panel2.mouseEnter event got fired`]。你注意到了吗。？你离开浅灰色的石板是为了进入深灰色的石板。

同样，在 a 内部`form`，尤其是在堆栈上`controls`，一个控件`Mouse Enter`应该是前一个控件的`Mouse Leave`。

# iphone - iOS 背景图片无法正常显示？

> ID：15368987
> 
> 赞同：1
> 
> 时间：2013-03-12T18:17:07.130
> 
> 标签：iphone, objective-c, background, uiimageview

我已经在谷歌上进行了数百次搜索:(。当我在 photoshop 中创建图像时（960 x 600，状态栏为-40），我似乎无法弄清楚我做错了什么。图像结果是这样的：

![](../Images/fb4421a95b784aa5a236822ea6b1d97f.png)

什么时候应该是这样的：

![](../Images/2dbeb664364f521ac05c4b6c9fdddf5a.png)

（注意这不是实际尺寸，糟糕的缩略图版本：P。尺寸如上所述）

这是我的代码：

```
self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"MenuBkground.png"]]; 
```

制作图像时我做错了什么吗？它在代码中吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:24:59.507

你正在使用`colorWithPatternImage`它基本上意味着它所说的。如果空间没有完全被图像占用，图像将自行重复。如果您想拥有一个真正的背景图像，您应该将图像创建为子视图。

```
UIImage* image = [UIImage imageNamed:@"MenuBKground.png"];
UIImageView* background = [[UIImageView alloc]initWithImage: image];
[self.view addSubview: background]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T18:49:04.150

如果您使用界面构建器，另一种方式，

1.  将一个`image view`拖到您的 viewController。

2.  在检查器中分配它`MenuBkground.png`（第一个下拉框）

# ssis - SSIS 包部署实用程序 - 配置部署位置

> ID：15368993
> 
> 赞同：-1
> 
> 时间：2013-03-12T18:17:23.840
> 
> 标签：ssis

有没有办法将生成的 SSIS 部署向导（清单）配置为仅允许 SQL Server 部署？基本上我希望消除此屏幕，或禁用文件系统部署选项。

![在此处输入图像描述](../Images/51889a739be0be543f82894a62a6792a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:39:14.603

可以构建一个基于 SSIS API 并仅实现 SQL Server 部署类型的小型应用程序。例如，您可以查看此[http://www.selectsifiso.net/?p=510](http://www.selectsifiso.net/?p=510)