# StackOverflow 问答 15303000-15303999

# entity-framework - EF COdeFirst Table Per Type 设置，带有对基类的列表引用

> ID：15303000
> 
> 赞同：0
> 
> 时间：2013-03-08T20:46:14.207
> 
> 标签：entity-framework, ef-code-first, table-per-type

我首先使用每种类型的表格设置 ef 代码。请参阅以下结构。这个想法是将继承的类信息存储在自己的表中，同时派生类可以引用父类和也从 BaseClass 派生的子类列表。

```
public class BaseClass
{
    public long Id {get;set;}
    public string EntityType { get; set; }
}

public class A_Class : BaseClass
{
     public string A_Property {get;set;}
     public BaseClass Parent {get; set;}
     public IList<BaseClass> Children { get; set; }
}

public class B_Class : BaseClass
{
     public string B_Property {get;set;}
     public BaseClass Parent {get; set;}
     public IList<BaseClass> Children { get; set; }
} 
```

知道如何为模型设置 DbContext 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T14:15:44.510

要生成 3 个表，您可以使用 API：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<BaseClass>().ToTable("BaseClass");
    modelBuilder.Entity<A_Class>().ToTable("AClass");
    modelBuilder.Entity<B_Class>().ToTable("BClass");

    base.OnModelCreating(modelBuilder);
} 
```

或`TableAttribute`：

```
[Table("BaseClass")]
public class BaseClass
{
    public int Id { get; set; }
    public string EntityType { get; set; }
}

[Table("AClass")]
public class A_Class : BaseClass
{
    public string A_Property { get; set; }
    public BaseClass Parent { get; set; }
    public ICollection<BaseClass> Children { get; set; }
}

[Table("BClass")]
public class B_Class : BaseClass
{
    public string B_Property { get; set; }
    public BaseClass Parent { get; set; }
    public ICollection<BaseClass> Children { get; set; }
} 
```

# javascript - iframe 并使用 jquery 仅加载表并删除行或列

> ID：15303005
> 
> 赞同：0
> 
> 时间：2013-03-08T20:46:34.687
> 
> 标签：javascript, jquery, css

嗨，试图让这个工作。

在 div 中有一个 iframe。我正在加载 iframe：

```
 <iframe src="abc.com" id="divtoshow" border="0" scrolling="no" allowtransparency="true"></iframe> 
```

输入 id 是否足以告诉 iframe 仅加载该 div 并忽略页面上的其他 div 代码。

下一部分是删除 iframe 加载的表中的列和行。如何删除每个超过 1 个？删除行是否相同？

```
$('table tr').each(
    function(tr_idx,el){
        $(el).children('td').each(
            function(td_idx,el2){
                //i'm removing first columns..
                if(td_idx == 0){
                    el2.remove();
                }
        });//inner each
});//outer each 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:16:43.950

Dwhizz,

Unless you are loading an iframe from the same domain it is HIGHLY unlikely (read as : impossible) to muck around with the contents of the iframe using any scripting language. This is baked into the browsers and is a security issue.

So the quick answer is "No, you will not be able to do this, stop trying"

If you can get at the domain you are trying to load via AJAX then you might have some luck using jquery's AJAX.load shortcut.

reading: [http://developer.chrome.com/extensions/xhr.html](http://developer.chrome.com/extensions/xhr.html) and do some google on "cross domain AJAX" or "cross domain iframe"

# titanium - 分发 TideSDK 应用程序

> ID：15303009
> 
> 赞同：1
> 
> 时间：2013-03-08T20:46:45.413
> 
> 标签：titanium, desktop-application, tidesdk

我最近完成了一个基于 Titanium、Javascript、HTML、CSS 的应用程序。迄今为止，我只是一名网页设计师，所以我在分发应用程序方面几乎没有经验。我习惯于 TiDev 社区部署应用程序，该应用程序为下载做好了准备，并在给定的链接上提供了下载。

但是tidev社区不再支持，所以我使用TideSDK Developer打包应用程序，它并没有做所有的努力，另一个做得很好。我显然是一个完整的新手。

谁能概述我需要采取的步骤，从我现在拥有的捆绑应用程序文件夹（由 TideSDK 开发人员整理）到允许客户下载和安装应用程序或在线的链接？我知道为您自己的平台以外的平台打包应用程序存在问题，并且我认为 appcelerator 正在研究解决方案。我也意识到我可能需要付费才能在线托管下载。任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:24:35.517

您必须使用该`tidebuilder.py`脚本。编译安装包。要为 Mac 编译二进制文件，您必须在 Mac 上运行脚本，要为 windows 编译二进制文件，您必须在 windows 框等上。

每个平台[都有一些关于如何在此处使用它的文档。](https://github.com/TideSDK/TideSDK/wiki/Packaging-TideSDK-apps)该命令非常简单并且有效。

一旦你有了你的应用程序文件（OSX 的 DMG 或 Windows 的 MSI），然后只要你认为合适的方式分发它，通过电子邮件发送它，将它放在你的 Web 服务器上，任何适合你的东西。

# c# - 文本框背景红+白字体，运行时显示灰色字体

> ID：15303010
> 
> 赞同：0
> 
> 时间：2013-03-08T20:46:46.550
> 
> 标签：c#, windows

我需要一个文本框以具有红色背景和白色字体，以及一些警报文本。当我处于 Visual Studio 2010 的设计模式时，它看起来不错。

但是，当我运行该应用程序时，文本变为灰色。我不知道为什么会这样。为什么字体颜色应该更改为我没有告诉它做的事情？这是一个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:46:02.013

```
private void button2_Click(object sender, EventArgs e)
    {
        textBox1.Text = "kashif";
        textBox1.BackColor = Color.Red;
        textBox1.ForeColor = Color.White;
        textBox1.Enabled = false;
    } 
```

![在此处输入图像描述](../Images/18ea756fbc0bab43d512bce5965c8de4.png)

文本框被禁用。启用它会让你得到不想要的颜色。如果您希望某人不要在其中写一些东西并看到白色，则将其设为只读

```
textBox1.ReadOnly = true; 
```

# solr - 如何在 Solr 中索引具有特殊字符的单词

> ID：15303014
> 
> 赞同：1
> 
> 时间：2013-03-08T20:46:58.930
> 
> 标签：solr

我想一起索引一些带有特殊字符的单词。

例如，给定`m&m`，我想将它作为一个整体进行索引，而不是将其分隔为`m`and `m`（通常`&`会被视为分隔符）。

有没有办法通过使用标准标记器/过滤器来实现这一点，还是我必须自己写一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T17:10:55.397

基本上文本字段类型在索引之前过滤掉特殊字符。并且您可以使用字符串类型，但不建议对其进行搜索。您可以使用**WordDelimiterFilterFactory的****类型选项**， 您可以将这些特殊字符转换为字母

 **% => 百分比 & => 和

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T03:47:23.453

标准标记器工厂以特殊字符分割/标记给定文本。要使用特殊字符进行索引，您可以编写自己的自定义标记器，也可以执行以下操作：

*   获取要标记/拆分文本的字符列表。例如，我的清单是`{" ",";"}`.
*   使用带有上述字符列表的[PatternTokenizer ，而不是 StandardTokenizer。](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.PatternTokenizerFactory)您的配置将如下所示：

    ```
     <analyzer>
        <tokenizer class="solr.PatternTokenizerFactory" pattern=" |;" />
      </analyzer> 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T03:12:03.137

你可以使用 WhiteSpaceTokenizerFactory。

[http://docs.lucidworks.com/display/solr/Tokenizers#Tokenizers-WhiteSpaceTokenizer](http://docs.lucidworks.com/display/solr/Tokenizers#Tokenizers-WhiteSpaceTokenizer)

它只会对空格进行标记。例如，

"m&m" 将被视为单个标记，因此它会像这样被索引**

# ios - UIPickerView NSInvalidArgumentException'，原因：'-[__NSCFString superview]：无法识别的选择器发送到实例

> ID：15303020
> 
> 赞同：0
> 
> 时间：2013-03-08T20:47:25.123
> 
> 标签：ios, objective-c, xcode4.2, uipickerview

我是 Objective C 和 Xcode 的新手，我正在尝试一次学习一个步骤。几天来，我一直在为某个特定问题摸不着头脑，并且很难找到解决方案。我正在制作一个使用字典填充选择器的 UIPickerVIew 应用程序。arrayStates 是进入左侧组件的状态，arrayCities 是处于该状态的城市，其中是 State 的键。城市是正确的组成部分。我认为问题已缩小到代码块。当我用它崩溃的值填充选择器时。我可以注释掉这段代码，它会运行得很好（只有问号作为选择器中的文本）。我收到此错误：

```
NSInvalidArgumentException', reason: '-[__NSCFString superview]: unrecognized selector sent to instance 
```

这是我的 .m 文件中导致错误的代码块：

```
-(UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:    (NSInteger)component reusingView:(UIView *)view {

if (component == 0) {
   return [arrayStates objectAtIndex:row];
}
else {
UILabel *lblCity=[[UILabel alloc] initWithFrame:CGRectMake(5,0,220,50)];
lblCity.text= [arrayCities objectAtIndex:row];
lblCity.backgroundColor = [UIColor clearColor];
lblCity.font = [UIFont boldSystemFontOfSize:18];
return lblCity;
}

} 
```

以下是我将代码更改为的内容，并且运行良好！感谢您快速准确的回复！！

```
-(NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component

{

if (component == 0)
{
   return [arrayStates objectAtIndex:row];
}
else
{
  return [arrayCities objectAtIndex:row];
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:00:28.027

您收到此错误，因为如果组件为 0，您将返回一个字符串。您可能希望使用 pickerView:titleForRow:forComponent: 而不是 viewForRow，并且只从数组中返回字符串，而不是为城市。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:00:16.437

该错误意味着您正在传递一个`NSString`基础类，而您应该传递一个`UIView`基础类。

我在这里看不到任何暗示实际发生的事情，所以我希望它是 this `return [arrayStates objectAtIndex:row]`。你需要返回一个 UIView，所以除非 UIView`arrayStates`只包含你崩溃的基础。如何以及在何处修复它可能会更复杂一些。

# javascript - 如何解析文档并删除除匹配和 ID 及其子元素之外的所有元素

> ID：15303021
> 
> 赞同：4
> 
> 时间：2013-03-08T20:47:42.247
> 
> 标签：javascript, html, dom

我有一个嵌套了许多 div 的网页。我怎样才能去掉除 1 之外的所有元素，它具有特定的 ID 及其子元素。

**我想保留那个 div 和它的孩子，并删除其他所有东西，甚至它的父母**

以下代码不起作用，它也会删除孩子

```
var elms = document.getElementsByTagName('*');
for (var i = 0; i < elms.length; i++) {
    if (elms[i].id != "div63") {
        elms[i].parentNode.removeChild(elms[i])
    }
}; 
```

我想要一个非 jQuery 解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:54:20.047

您可以保存对您的节点的引用，删除所有，然后将您的节点放在正文中：

```
var saved = document.getElementById('div63');
var elms = document.body.childNodes;
while (elms.length) document.body.removeChild(elms[0]);
document.body.appendChild(saved); 
```

[示范](http://jsbin.com/abedug/1/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:41:24.660

[与dystroy](https://stackoverflow.com/a/15303101/82548)提供的*稍微*不同的方法，以下是移动您希望保留的元素，将其放置为要从中删除所有其他子元素的父元素的第一个子元素（如果没有提供父元素，则默认为该元素)，而不是替代的“删除所有内容，然后将其放回”方法。移动之后，这会从该父节点中删除所有*后续*子节点（这包括一个相当丑陋的函数来检索给定元素，尽管没有尝试弥补没有该功能的浏览器中的缺失）：`body`*`document.querySelector()`*

 *```
function retrieveElem(ref) {
    if (!ref) {
        return document.body;
    } else {
        if (typeof ref === 'string') {
            if (document.querySelector) {
                var dQSresult = document.querySelector(ref);
                if (dQSresult) {
                    return dQSresult;
                } else {
                    return document.querySelector('#' + ref);
                }
            }
        } else {
            switch (ref.nodeType) {
                case 1:
                    // it's an element
                    return ref;
                case 9:
                    // it's the document node
                    return document.body;
            }
        }
    }
}

function clearAllExcept(el, from) {
    el = retrieveElem(el);
    from = retrieveElem(from);
    from.insertBefore(el, from.firstChild);
    while (from.firstChild.nextSibling) {
        from.removeChild(from.firstChild.nextSibling);
    }
}

clearAllExcept('#id63','.aChild'); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/7bHPh/2/)。

这可以像上面那样调用，使用 CSS 选择器字符串，或者如下：

```
// with a CSS selector to identify the `id` of the child
clearAllExcept('#id63'); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/7bHPh/3/)。

```
// with a string to identify the `id` of the child
clearAllExcept('id63'); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/7bHPh/4/)。

```
// with a node-reference to the child:
clearAllExcept(document.getElementById('id63')); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/7bHPh/5/)。

类似的选择器也可用于识别父级：

```
// using the `document`:
clearAllExcept('#id63', document); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/7bHPh/6/)。

```
// with a string to identify the `id` of the parent
clearAllExcept('#id63','#test'); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/7bHPh/7/)。

```
// with a node-reference to the parent:
clearAllExcept('#id63', document.getElementById('test')); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/7bHPh/8/)。

参考：

*   [`document.querySelector()`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector).
*   [`Node.firstChild`](https://developer.mozilla.org/en-US/docs/DOM/Node.firstChild).
*   [`Node.insertBefore`](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore).
*   [`Node.nextSibling`](https://developer.mozilla.org/en-US/docs/DOM/Node.nextSibling).
*   [`Node.nodeType`](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeType).
*   [`switch ()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/switch).*

# oauth - 从 OAuth1 迁移到 OAuth2

> ID：15303023
> 
> 赞同：1
> 
> 时间：2013-03-08T20:47:45.550
> 
> 标签：oauth, soundcloud

我们在 SoundCloud 上有一个现有的应用程序，它是前段时间创建的，并设置为使用 OAuth1。最近我们需要扩展 SoundCloud 相关的功能，并且由于旧库的一些问题，不得不升级到使用 OAuth2 客户端的新 cocoa-api-wrapper 库。

现在的问题是，由于 OAuth 版本不同，我们无法使用其密钥/秘密访问我们的应用程序。虽然可以设置新应用程序并获得新的密钥/秘密对，但我们不希望丢失与当前应用程序关联的所有数据。

有没有办法让两个版本的 OAuth 都可以访问相同的 SoundCloud 应用程序（仍在使用 OAuth1）？如果没有，处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:05:51.413

是的。您可以通过向以下端点发送 POST 请求将 OAuth1 令牌迁移到 OAuth2 令牌：

`https://api.soundcloud.com/oauth2/token`

具有以下参数：

*   client_id='YOUR_CLIENT_ID'
*   client_secret='YOUR_CLIENT_SECRET'
*   grant_type='oauth1_token'
*   refresh_token='OAUTH1_TOKEN'

响应将包含一个 OAuth2 令牌（以及`expires_in`, `scope`, `refresh_token`）。

# asp.net-mvc - ServiceStack 和 MVC4 未接线

> ID：15303024
> 
> 赞同：5
> 
> 时间：2013-03-08T20:47:47.917
> 
> 标签：asp.net-mvc, servicestack

我有一个现有的 MVC 4 应用程序。我想向它添加服务堆栈。我尝试安装 MVC 主机 nuget 包：

安装包 ServiceStack.Host.Mvc

它在 App_Start 中安装了 2 个文件。我注意到我必须做些小改动，因为我遇到了构建错误：

在 App_State/WebServiceExamples.cs 中，我不得不更新接口引用：

从：`public class HelloService : Service`

至：`public class HelloService : ServiceStack.ServiceInterface.Service`

然后我继续检查 Web.config 设置：

```
<location path="api">
  <system.web>
    <httpHandlers>
      <add path="*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" />
    </httpHandlers>
    <authorization>
      <allow users="*"/>
    </authorization>
  </system.web>
  <!-- Required for IIS 7.0 -->
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <add path="*" name="ServiceStack.Factory" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" preCondition="integratedMode" resourceType="Unspecified" allowPathInfo="true" />
    </handlers>
  </system.webServer>
</location> 
```

然后我运行应用程序并转到 /api，我得到了 404。通过进一步的研究，我决定通过 apphost 文件手动更新端点：

```
SetConfig(new EndpointHostConfig
{
ServiceStackHandlerFactoryPath = "api",
}); 
```

这似乎也不起作用。我还缺少什么？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T22:02:54.053

这也应该在您的 web.config 文件中：

```
<httpHandlers>
  <add path="api*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" />
</httpHandlers> 
```

也不要忘记**删除**MVC '/api' 路由/路径。您需要将其删除，以便 ServiceStack 和 MVC 不会竞争“/api”路由/路径。

```
//REMOVE THIS FROM RouteConfig
routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{id}",
); 
```

如果您想真正明确，也可以将其添加到 RouteConfig

```
routes.IgnoreRoute ("api/{*pathInfo}"); 
```

# python - 我如何使用2个循环，如果它是错误的，则无限重复该程序

> ID：15303027
> 
> 赞同：1
> 
> 时间：2013-03-08T20:48:23.907
> 
> 标签：python, loops

现在我正在从这个网站[http://inventwithpython.com/chapter6.html做教程“Dragon Realm”](http://inventwithpython.com/chapter6.html)

我明白这一切都在做什么，但这不是我的问题。最后我想添加一些代码，如果玩家说不，它会说，正如我目前所拥有的那样，“太糟糕了*******！” 并回到程序的开头。我已经让它这样做了，但是一旦它通过第二次，我就会输入你是否想再试一次，无论你输入的是还是否，它都会结束程序。我尝试了 while、if/else、while True 和 False 的多种组合，但我没有得到我想要的结果。我不明白你是怎么坚持下去的？这可能真的很简单，但我无法弄清楚。

这是程序的代码。

```
import random
import time
def displayIntro():
    print('You are in a land full of dragons. In front of you,')
    print('you see two caves. In one cave, the dragon is friendly')
    print('and will share his treasure with you. The other dragon')
    print('is greedy and hungry, and will eat you on sight.')
    print()
def chooseCave():
    cave = ''
    while cave != '1' and cave != '2':
        print('Which cave will you go into? (1 or 2)')
        cave = input()
    return cave
def checkCave(chosenCave):
    print('You approach the cave...')
    time.sleep(2)
    print('It is dark and spooky...')
    time.sleep(2)
    print('A large dragon jumps out in front of you! He opens his jaws and...')
    print()
    time.sleep(2)
    friendlyCave = random.randint(1, 2)
    if chosenCave == str(friendlyCave):
        print('Gives you his treasure!')
    else:
        print('Gobbles you down in one bite!')
playAgain = 'yes'
while playAgain == 'yes' or playAgain == 'y':
    displayIntro()
    caveNumber = chooseCave()
    checkCave(caveNumber)
    print('Do you want to play again? (yes or no)')
    playAgain = input() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:51:34.603

您可以简单地添加，

```
if 'n' in playAgain:
    print "too bad"
    playAgain = 'yes' 
```

最后（在你的while循环内）

顺便说一句，这两行可以合并：

```
print('Do you want to play again? (yes or no)')
playAgain = input() 
```

简单地说：

```
playAgain = input('Do you want to play again? (yes or no)') 
```

因为`input`在请求输入时会显示字符串参数。

# php - WooCommerce - 获取产品页面的类别

> ID：15303031
> 
> 赞同：50
> 
> 时间：2013-03-08T20:48:46.757
> 
> 标签：php, wordpress, woocommerce

对于我的 WC 产品页面，我需要向 body 标记添加一个类，以便我可以执行一些自定义样式。这是我为此创建的功能...

```
function my_add_woo_cat_class($classes) {

    $wooCatIdForThisProduct = "?????"; //help!

    // add 'class-name' to the $classes array
    $classes[] = 'my-woo-cat-id-' . $wooCatIdForThisProduct;
    // return the $classes array
    return $classes;
}

//If we're showing a WC product page
if (is_product()) {
    // Add specific CSS class by filter
    add_filter('body_class','my_add_woo_cat_class');
} 
```

...但是我如何获得 WooCommerce 猫 ID？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-03-11T08:51:40.077

一个 WC 产品可能不属于任何一个、一个或多个 WC 类别。假设您只想获得一个 WC 类别 ID。

```
global $post;
$terms = get_the_terms( $post->ID, 'product_cat' );
foreach ($terms as $term) {
    $product_cat_id = $term->term_id;
    break;
} 
```

请查看 WooCommerce 插件的“templates/single-product/”文件夹中的 meta.php 文件。

```
<?php echo $product->get_categories( ', ', '<span class="posted_in">' . _n( 'Category:', 'Categories:', sizeof( get_the_terms( $post->ID, 'product_cat' ) ), 'woocommerce' ) . ' ', '.</span>' ); ?> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-08-04T11:53:01.033

`$product->get_categories()`自 3.0 版起已弃用！改为使用`wc_get_product_category_list`。

[https://docs.woocommerce.com/wc-apidocs/function-wc_get_product_category_list.html](https://docs.woocommerce.com/wc-apidocs/function-wc_get_product_category_list.html)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-05-29T12:33:10.637

我从位于我的主题目录的 woocommerce 文件夹中的 content-single-popup.php 中删除了这行代码。

```
global $product; 
echo $product->get_categories( ', ', ' ' . _n( ' ', '  ', $cat_count, 'woocommerce' ) . ' ', ' ' ); 
```

由于我正在研究的主题已在其中集成了 woocommerce，因此这是我的解决方案。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-06-20T16:47:17.633

谢谢框。我正在使用 MyStile 主题，我需要在搜索结果页面中显示产品类别名称。我将此功能添加到我的子主题functions.php

希望它可以帮助别人。

```
/* Post Meta */

if (!function_exists( 'woo_post_meta')) {
    function woo_post_meta( ) {
        global $woo_options;
        global $post;

        $terms = get_the_terms( $post->ID, 'product_cat' );
        foreach ($terms as $term) {
            $product_cat = $term->name;
            break;
        }

?>
<aside class="post-meta">
    <ul>
        <li class="post-category">
            <?php the_category( ', ', $post->ID) ?>
                        <?php echo $product_cat; ?>

        </li>
        <?php the_tags( '<li class="tags">', ', ', '</li>' ); ?>
        <?php if ( isset( $woo_options['woo_post_content'] ) && $woo_options['woo_post_content'] == 'excerpt' ) { ?>
            <li class="comments"><?php comments_popup_link( __( 'Leave a comment', 'woothemes' ), __( '1 Comment', 'woothemes' ), __( '% Comments', 'woothemes' ) ); ?></li>
        <?php } ?>
        <?php edit_post_link( __( 'Edit', 'woothemes' ), '<li class="edit">', '</li>' ); ?>
    </ul>
</aside>
<?php
    }
}

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-19T08:55:59.147

```
<?php
   $terms = get_the_terms($product->ID, 'product_cat');
      foreach ($terms as $term) {

        $product_cat = $term->name;
           echo $product_cat;
             break;
  }
 ?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-06T23:42:17.103

要将自定义类添加到 body 标签，您可以使用该[**`body_class`**](https://developer.wordpress.org/reference/hooks/body_class/)钩子。

****要根据特定产品类别**在产品页面上**添加一个**或**多个类别**，您可以使用 Wordpress功能*（检查产品是否属于该特定产品类别）*。**[**`has_term`**](https://developer.wordpress.org/reference/functions/has_term/)****

 *****为此，我创建了数组`$classes_to_add`，其中：

*   **key**：它可以是产品类别 ID（或 slug 或名称）。或者它们的数组。[阅读文档](https://developer.wordpress.org/reference/functions/has_term/)。
*   **value** : 包含要添加到 body 标记的类的字符串。如果要添加多个类，请创建一个包含多个值的字符串，以空格分隔（请参见下面的示例）

所以：

```
// adds a class to the body element based on the product category
add_filter( 'body_class', 'add_body_class_based_on_the_product_category' );
function add_body_class_based_on_the_product_category( $classes ) {

    // only on the product page
    if ( ! is_product() ) {
        return $classes;
    }

    // create an array with the ids (or slugs) of the product categories and the respective class (or classes) to add
    $classes_to_add = array(
        30          => 'class-1',
        'cat_slug'  => 'class-2 class-3',
        32          => 'class-4 class-5',
    );

    // if the product belongs to one of the product categories in the array it adds the respective class (or classes)
    foreach ( $classes_to_add as $product_cat => $new_classes ) {
        if ( has_term( $product_cat, 'product_cat', get_the_ID() ) ) {
             $classes[] = $new_classes;
        }
    }    

    return $classes;
} 
```

*该代码已经过测试并且可以工作。将它添加到您的活动主题的functions.php。******

# jquery - 在表单提交元素上滑出 div

> ID：15303033
> 
> 赞同：1
> 
> 时间：2013-03-08T20:48:56.277
> 
> 标签：jquery, html, css

编写 jQuery 的新手，可以使用一些帮助。

我有一个隐藏的 div，我想在单击表单元素时滑出。但是，当我使用该`.click()`函数时，数据不会被提交，而当我使用该`.submit()`函数时，div 不会滑出。

我还希望它知道 div 是否已经出来然后没有动画。

这可能吗？

谢谢。

这是代码。[http://jsfiddle.net/gZWby/23/](http://jsfiddle.net/gZWby/23/)

```
$(document).ready(function () {
    $('.purchase_button').submit(function () {
        if ($("#top_margin").css("top") == "-135px") {
            $("#top_margin").animate({
                top: "0px"
            }, 500);
            $("#total_wrap").animate({
                top: "0px"
            }, 500);
        } else {
            $("#top_margin").animate({
                top: "-135px"
            }, 500);
            $("#total_wrap").animate({
                top: "-135px"
            }, 500);
        }
        return false;

    });
}); 
```

HTML：

```
<div id="top_margin"></div>
<form>
    <input type="submit" value="Submit" name="smokehouse_1_ATC" class="purchase_button">
</form> 
```

CSS：

```
#top_margin {
    width:100%;
    height: 140px;
    background-color:orange;
    z-index: 10;
    position: relative;
    /*I would like this div to always be fixed to the top of the browser window*/
    top: -135px;
    left: 0;
    color:#FFF;
    padding-top:5px;
}

input.shop_button, input.purchase_button {
    width:143px;
    background-color:black;
    border:none;
    color:#74cccc;
    padding: 5px 0px;
    margin-top:10px;
}

input.shop_button:hover, input.purchase_button:hover {
    color:#ff3636;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:19:27.917

**以下答案应该可以解决您的两个问题。**

您针对提交的元素错误。您需要将您的更改`$('.purchase_button').submit(fn(){...})`为：

```
$('form').submit(function(){ 
 //YOUR CODE HERE
}); 
```

原因是按钮本身没有“提交”事件。只有表格可以。因此，我们需要在表单本身而不是按钮上监听“提交”。

此外，如果您想在提交后将其排除在外，则需要从您的语句中删除该`else`块。`if`那只是为了将其滑回。检查小提琴以获取正确的代码。

[在这里提琴](http://jsfiddle.net/gZWby/27/)

**更新**

对此答案的评论指出是什么阻止了您的提交被执行。您的 Javascript 中有一个`return false`，它可以防止在提交实际发生之前触发事件侦听器时触发提交。这`return false`是在验证失败的情况下防止表单提交的常用方法。

**更新 2**

如果您想留在页面上，并因此将滑块保持在外面，您将不得不做一些传统的表单提交以外的事情。传统的提交将依赖于一个`action`方法来发布到另一个页面，或者缺少定义的操作方法，将返回到同一页面。无论哪种方式，您都必须刷新。为了在不发生这种情况的情况下提交表单，我可以建议使用[jQuery Forms Plugin](http://jquery.malsup.com/form/)吗？

使用该插件，您的 jQuery 将如下所示：

```
$(function(){
   $('form').ajaxForm(function() { 
     $("#top_margin").animate({
            top: "0px"
        }, 500);
        $("#total_wrap").animate({
            top: "0px"
        }, 500); 
   });
}); 
```

你可以把它的其余部分完全去掉。

# java - 运行用户提供的代码的控件库是否应该拦截异常或 Throwables？

> ID：15303035
> 
> 赞同：3
> 
> 时间：2013-03-08T20:49:02.513
> 
> 标签：java, exception, throwable

`Exception`我在这里看到了许多关于和之间区别的一般问题`Throwable`。我知道区别，我有一个更具体的问题。

我正在编写一个库，它将多个用户提供的代码绑定并运行在一起。如果其中一个部分失败，则丢弃整个计算。为了保持资源使用干净，用户还可以提供在此类事件发生时运行的终结器。模式是这样的：

```
try {
   // process ...
} catch (Exception ex) {
    runRegisteredFinalizers();
    throw ex;
} 
```

我的问题是：**我应该像上面那样拦截并重新抛出`Exception`s，还是应该也拦截`Throwable`s？** 如果`Error`发生，是否有机会

*   JVM会恢复吗？（那么运行终结器有什么意义吗？）
*   JVM 将处于实际上可以运行它们的状态吗？

* * *

此外，在运行终结器时，我会捕获并忽略它们的异常，以便其他注册的终结器有机会运行，例如：

```
 try {
      finalizer.run();
  }
  catch (Exception ex) {
    log.error("Exception in a finalizer", ex);
  } 
```

同样，我应该只截取`Exception`s，还是也截取`Throwable`s？忽略而不是重新抛出`Error`s 似乎更有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:18:43.217

也许最安全的做法是捕获 Throwable（或分别捕获异常和错误）并将捕获的内容的引用传递给您的 runRegisteredFinalizers()，让用户有机会决定这是否是他们应该关心的事情。

但是，您将捕获的错误可能是特定于您的工具包（不一定来自用户代码），或者是用户没有考虑到的事情（假设他们自己会捕获案例）。在这些情况下，异常的类型无关紧要。

但是，在任何一种情况下，根据工具包的性质和对丢失错误的潜在影响，捕获它也可能是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:32:53.727

我相信，如果您正在处理用户提供的代码，您可以一无所知，那么您应该捕获可抛出的（在这两种情况下），考虑不影响整个系统的链接错误，只是执行代码，例如：[NoSuchMethodError](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/NoSuchMethodError.html)或[NoClassDefFoundError](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/NoClassDefFoundError.html)

如果您想在错误影响整个系统的情况下放弃，那么您无法捕获或重新抛出像[OOME这样扩展](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/OutOfMemoryError.html)[VirtualMachineError](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/VirtualMachineError.html)的错误。

# jquery - 滚动后移动鼠标时触发事件

> ID：15303037
> 
> 赞同：2
> 
> 时间：2013-03-08T20:49:07.843
> 
> 标签：jquery, scroll, mouseevent, mousemove

完成滚动后，我想用 jQuery mousemove 函数触发一个事件。

问题是通过*滚动*鼠标移动被触发（[http://docs.jquery.com/Tutorials:Mouse_Position#Tracking_mouse_position](http://docs.jquery.com/Tutorials:Mouse_Position#Tracking_mouse_position)），

我只想在滚动结束并且将鼠标移动为“真实”时触发事件。

我正在使用一个非常简洁的解决方案来查看滚动何时停止，因此我希望在那之后完成鼠标移动检查。 [jQuery scroll() 检测用户何时停止滚动](https://stackoverflow.com/questions/9144560/jquery-scroll-detect-when-user-stops-scrolling#answer-14092859)

我的想法是读取**X**坐标并在滚动后仅在**Y**坐标***也***发生变化时触发事件，但我真的更希望我可以使用*delay()*或*setTimeout()*之类的东西，但这些都不起作用组合...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:22:06.093

一种方法（可能不是最好的方法）是在滚动/停止时绑定/取消绑定 mousemove。检查坐标是一个很好的方法。在滚动结束时触发自定义事件，然后检查鼠标的坐标以查看何时应该触发所需的 mousemove

也许你可以一直绑定mousemove但设置一个标志，所以当你滚动时，将标志设置为false，这样mousemove就不会触发并在滚动停止时将其设置为true，并手动触发mousemove。这可能比始终绑定/取消绑定事件更好。试试这个，看看它是否有效

# vba - vba excel 2010 将数据复制到另一个空列表

> ID：15303041
> 
> 赞同：2
> 
> 时间：2013-03-08T20:49:11.443
> 
> 标签：vba, excel

大家可以帮帮我吗？数据始终是 A 列，工作表 1，我想复制并粘贴到工作表 2 上的空列。第一次数据进入 A 列第 2 列，第二次（我放在 sheet1 列 A 上的其他数据）到 B 列第 2 列，依此类推。我找到了这段代码，但只将数据放在 A 列 Sheet2 中。

```
 Sub Insert_Data()

Sheets("Tratamento").Range("A1").Copy Destination:=Sheets("Dados").Range("A1")
For i = 2 To Sheets("Tratamento").Cells(Rows.Count, 1).End(xlUp).Row
Sheets("Tratamento").Range("A" & i).Copy Destination:=Sheets("Dados").Range("A" & Sheets("Dados").Cells(Rows.Count, 1).End(xlUp).Row + 1)
Next i

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:18:16.023

以下命令应该可以完成这项工作：

```
Select Case Sheets("Dados").Range("A1") = "" 

Case True 'paste in col A if A1 is empty

    Sheets("Tratamento").Range("A:A").Copy Sheets("Dados").Range("A1") 

Case False ' paste to next col

    Sheets("Tratamento").Range("A:A").Copy Sheets("Dados").Range("XFD1").End(xlToLeft).Offset(0, 1) 
```

这是做什么从第二张表的末尾开始，并选择具有值的最后一列右侧的列。这是假设您不会跳过任何列并且页面上没有其他数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:06:37.290

就这个怎么样？

```
Sub Insert_Data()

Sheets("Tratamento").Range("A1").Copy Destination:=Sheets("Dados").Range("A1")
For I = 2 To Sheets("Tratamento").Cells(Rows.Count, 1).End(xlUp).Row

'  Made change on this line
Sheets("Tratamento").Range("A" & I).Copy Destination:=Sheets("Dados").Range("A" & I)

Next I

End Sub 
```

还是这太简化了？可能我没看懂你的问题？

# python - 如何仅将函数应用于某些数组元素？

> ID：15303043
> 
> 赞同：5
> 
> 时间：2013-03-08T20:49:23.590
> 
> 标签：python, numpy, indexing

我有一个数组`x`，我想对`f`矩阵中满足某些条件的每个项目应用一个函数。Numpy 是否提供了一种机制来简化此操作？

这是一个例子。我的矩阵`x`应该只包含独占范围内的元素`(0, 1)`。但是，由于舍入误差，某些元素可能等于`0`或`1`。对于其中的每个元素`x`都是`0`我想要添加`epsilon`的，对于每个元素正是`1`我想要减去`epsilon`的。

**编辑：（**此编辑是在我接受[askewchan 的回答](https://stackoverflow.com/a/15303168/627005)后进行的。）另一种方法是使用[`numpy.clip`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.clip.html).

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T20:58:10.580

你可以这样做：

```
a = np.array([0,.1,.5,1])
epsilon = 1e-5
a[a==0] += epsilon
a[a==1] += -epsilon 
```

这样做的原因是`a==0`返回一个布尔数组，就像[Валера Горбунов](https://stackoverflow.com/users/2149700/)在他们的回答中提到的那样：

```
In : a==0
Out: array([True, False, False, False], dtype=bool) 
```

然后，您将该数组用作 的索引`a`，它公开了 where`True`但不是 where的元素`False`。你可以用这个做很多事情，见[http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T21:03:54.260

抱歉，这不是更具体，但是您可以创建一个布尔数组，该数组对于满足您条件的每个位置具有 TRUE 值，对于不满足条件的位置具有 FALSE。

对于 [0, 1, 0, 0] 之类的东西，当测试 1 时，您将得到一个数组 [FALSE, TRUE, FALSE, FALSE]。在这种情况下，您可以执行 [0, 1, 0, 0] - (epsilon)[FALSE, TRUE, FALSE, FALSE] 并使 0 值不受影响。

[布尔数组示例](https://stackoverflow.com/questions/10525921/numpy-array-boolean-to-binary)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T21:00:38.930

您可以`map()`按照[http://docs.python.org/2/tutorial/datastructures.html#functional-programming-tools](http://docs.python.org/2/tutorial/datastructures.html#functional-programming-tools)中的说明使用：

```
def applyEpsilon(value):
    myEpsilon = 0.001
    if value == 0:
        return myEpsilon
    elif value == 1:
        return 1-myEpsilon
    return value

inputList = [0, 0.25, 0.5, 0.75, 0.99, 1]
print map(applyEpsilon, inputList) 
```

产量：

```
[0.001, 0.25, 0.5, 0.75, 0.99, 0.999] 
```

# java - Java - Jar 文件可执行文件中的参数

> ID：15303044
> 
> 赞同：2
> 
> 时间：2013-03-08T20:49:34.620
> 
> 标签：java, jar, arguments, manifest, executable

基本上我已经创建了一个 jar 文件，但我希望它具有预先创建的参数。

例如像下面的附加组件。

-Xmx256m

问题是我不太确定如何制作它，所以它被嵌入到 Jar 文件中，更不用说它是否可能了。我要求它不需要添加批处理或命令提示符，而是简单地保持可单击为 jar 文件。然后在单击时添加我想要的额外参数。这可能是一个明显的修改吗？

我一直在搜索谷歌和这个网站上的其他链接，但我想要的答案很少。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:54:54.573

无法使用 JVM 设置制作可点击的 jar。双击它后，您将调用“java -jar”，然后您的 JVM 将在读取 jar 内容之前运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:58:17.020

我认为这对于没有一些骇客的 JVM 参数是不可能的。原因是当您进入 main() 方法时，JVM 实例已经初始化。

一个潜在的技巧是更改您的主要方法以进行系统调用以使用您想要的参数生成另一个 java 进程。

# macos - 如何取消多点触控事件？

> ID：15303045
> 
> 赞同：1
> 
> 时间：2013-03-08T20:49:39.147
> 
> 标签：macos, cocoa, touch, nsevent

我们有一个 OS X 应用程序，我们需要在其中阻止响应三指点击而出现的弹出字典。

最初我们研究了更改受触控板首选项面板影响的值，但无论使用这些值都不会获取更改后的值。只有偏好面板似乎会影响任何事情。我们尝试的命令是：

```
defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad TrackpadThreeFingerTapGesture -int 0
defaults -currentHost write com.apple.driver.AppleBluetoothMultitouch.trackpad TrackpadThreeFingerTapGesture -int 0
defaults write -g com.apple.trackpad.threeFingerTapGesture -int 0
defaults -currentHost write -g com.apple.trackpad.threeFingerTapGesture -int 0 
```

如果您注销并重新登录，则设置将生效。这不是我们的选择。

下一个想法是覆盖我们应用程序主视图中的三位数触摸事件。我可以收到事件，但我看不到任何取消事件。例如：

```
- (void)touchesBeganWithEvent:(NSEvent *)event {
  NSSet *touches = [event touchesMatchingPhase:NSTouchPhaseTouching inView:nil];
  if(3 == [touches count]) {
    // Okay, now what?
  }
} 
```

想法？

# java - JTextArea 中未显示滚动条

> ID：15303048
> 
> 赞同：0
> 
> 时间：2013-03-08T20:49:51.910
> 
> 标签：java, swing, user-interface, jscrollpane, jtextarea

我正在尝试放置一个滚动文本区域，称为 descriptionScroll。但是，滚动条不可见。我尝试了很多方法，都以挫败感告终。

我是否缺少任何东西来显示滚动条？它应该出现在“说明”旁边的大文本框的右侧

这是**相关**的代码：

```
import javax.swing.JScrollPane;
import javax.swing.JTextArea;

protected JTextArea descriptionTextArea;

protected JScrollPane descriptionScroll;

String descriptionText = 
"Lot ID(s):\n" +
"Wafer ID(s):\n" +
"PSPT(Probe Ship Part Type):\n" +
"Tester:\n" +
"Tester Job Name:\n" +
"PID (FPP, FPC):\n" +
"Reprobe required before shipping lot? (Y/N)\n\n" +
"Hold for (individual):\n" +
"Hold for (group)\n" +
"Expected release date\n" +
"Hold Comments:\n\n" +
"Shipping Information:\n" +
"Special Instructions:\n";

public Constructor(){

descriptionTextArea = new JTextArea(descriptionText);
descriptionScroll = new JScrollPane(descriptionTextArea, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
add(descriptionTextArea);
add(descriptionScroll);  
pack();

setSize(790, 625);
setDefaultCloseOperation(EXIT_ON_CLOSE);
setLocationRelativeTo(null);
setVisible(true);

descriptionTextArea.setSize(650, 200);
descriptionTextArea.setLocation(110, 228);
descriptionTextArea.setLineWrap(true);

} 
```

![缺少卷轴](../Images/0788302224add69d9645fbfb41bcd17b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:59:10.190

您将 JScrollPane 和 JTextArea 添加到同一个容器中。将 JTextArea 添加到 JScrollPane：

`descriptionScroll.add(descriptionTextArea);`

# ios - 从 SpriteSheet 加速 UIImage 创建

> ID：15303053
> 
> 赞同：3
> 
> 时间：2013-03-08T20:50:01.597
> 
> 标签：ios, objective-c, performance, core-image

我不确定我的标题是否完全正确，但我不确定我的问题到底出在哪里。

我需要从 spritesheet 加载 UIImage 数组，然后将其用作 UIImageView 中的动画。

spritesheet 是使用 TexturePacker 生成的，TexturePacker 会生成巨大的图集 (2048x2048) 和带有 sprite 描述的 json。

到现在为止，我让它正常工作，甚至在 0.5-0.8 秒内加载 100 帧，这让我非常满意。

现在的问题是我需要从 Documents 文件夹中加载 spritesheets（它们已下载，因此无法集成到应用程序中），因此我必须`UIImage imageWithContentsOfFile`使用`UIImage imagenamed`. 这使我的加载时间增加了 5-15 秒，具体取决于动画中的帧数。我猜问题是因为图像没有被缓存，正在为每一帧加载它，但我不明白为什么

这是代码：

```
// With this line, perfect
//UIImage *atlas = [UIImage imageNamed:@"media/spritesheets/default-pro7@2x.png"];
// But with this one, incredibly looooong loading times
UIImage *atlas = [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"media/spritesheets/default-pro7@2x" ofType:@"png"]];

CGImageRef atlasCGI = [atlas CGImage];

for( NSDictionary* dict in frames) {

    NSDictionary *frame = [dict objectForKey:@"frame"];
    int x = [[frame objectForKey:@"x"] intValue];
    int y = [[frame objectForKey:@"y"] intValue];
    int width = [[frame objectForKey:@"w"] intValue];
    int height = [[frame objectForKey:@"h"] intValue];

    NSDictionary *spriteSize = [dict objectForKey:@"spriteSourceSize"];
    int realx = [[spriteSize objectForKey:@"x"] intValue];

    NSDictionary *size = [dict objectForKey:@"sourceSize"];
    int realWidth = [[size objectForKey:@"w"] intValue];
    int realHeight = [[size objectForKey:@"h"] intValue];

    //Initialize the canvas size!
    canvasSize = CGSizeMake(realWidth, realHeight);

    bitmapBytesPerRow   = (canvasSize.width * 4);
    bitmapByteCount     = (bitmapBytesPerRow * canvasSize.height);

    bitmapData = malloc( bitmapByteCount );

    //Create the context
    context = CGBitmapContextCreate(bitmapData, canvasSize.width, canvasSize.height, 8, bitmapBytesPerRow, colorSpace, kCGImageAlphaPremultipliedLast);

    // Clear background
    CGContextClearRect(context,CGRectMake(0.0f,0.0f,canvasSize.width,canvasSize.height));

    // Get spriteRect
    CGRect cropRect = CGRectMake(x, y, width, height);
    CGImageRef imageRef = CGImageCreateWithImageInRect(atlasCGI, cropRect);

    //Draw the image into the bitmap context
    CGContextDrawImage(context, CGRectMake(realx, 0, width, height), imageRef);

    //Get the result image
    resultImage = CGBitmapContextCreateImage(context);

    UIImage *result = result = [UIImage imageWithCGImage:resultImage];

    [images addObject:result];

    //Cleanup
    free(bitmapData);
    CGImageRelease(resultImage);
    CGImageRelease(imageRef);
} 
```

我什至可以尝试一个上传系统分析器会话，它显示在哪里加载了这么多时间

![在此处输入图像描述](../Images/0fcefce6c5ca25d80ce49e7d3ae064bb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T19:22:32.390

Well, I finally figured out where the problem was. After looking more carefully with Instruments Time profiler, I noticed a lot of time was spent in copyImageBlockSetPNG , which was what made me believe first that I was loading the image from disk for every frame. turn out, somebody already had this problem [Does CGContextDrawImage decompress PNG on the fly?](https://stackoverflow.com/questions/3964011/does-cgcontextdrawimage-decompress-png-on-the-fly/15326355#15326355), and it ended being true that I was loading the memory each frame, but not from disk, instead it was being uncompressed from memory in png format for every frame.

In that post theres a solution, which consists in writing the image to a context and getting from it an uncompressed copy of the image.

That works, but I found other way which I believe It's a little bit more efficient

```
NSDictionary *dict = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES]
                                             forKey:(id)kCGImageSourceShouldCache];
NSData *imageData = [NSData dataWithContentsOfFile:@"path/to/image.png"]];
CGImageSourceRef source = CGImageSourceCreateWithData((__bridge CFDataRef)(imageData), NULL);
CGImageRef atlasCGI = CGImageSourceCreateImageAtIndex(source, 0, (__bridge CFDictionaryRef)dict);
CFRelease(source); 
```

Hope it helps!

# node.js - Node.js 生成子进程最佳实践

> ID：15303057
> 
> 赞同：1
> 
> 时间：2013-03-08T20:50:13.310
> 
> 标签：node.js, module, mocha.js, child-process

我需要生成一个 mocha 进程。可以本地安装，也可以全局安装，我不提前知道。

这仅在全局安装 mocha 时有效：

```
require("child_process").spawn("mocha", argv._, {
    stdio: 'inherit'
}); 
```

有没有办法产生这个过程，所以它在这两种情况下都可以工作？

# django - django ManyToManyField 和 on_delete

> ID：15303059
> 
> 赞同：30
> 
> 时间：2013-03-08T20:50:18.460
> 
> 标签：django, django-models

`ForeignKey`django 上的 s 具有属性[on_delete](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.on_delete)来指定删除引用对象时的行为。有没有办法为[ManyToManyField](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ManyToManyField)获得类似的东西？

假设我有以下模型

```
class House(models.Model):
    owners = models.ManyToManyField(Person) 
```

默认行为是级联的，所以如果我删除一个碰巧拥有房子的人，它就会从所有者那里消失（也就是说，很明显，它不再拥有任何房子）。我想要的是，如果一个人是所有者，它就不能被删除。也就是说，我想要`on_delete=models.PROTECT`. 这可能吗？

我知道在内部`ManyToManyField`被翻译成另一个带有两个`ForeignKey`s 的模型（在这种情况下，一个是房子，一个是人），所以应该可以实现这一点。任何想法如何？我想避免将[through](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ManyToManyField.through)属性设置为新模型，因为这会产生一个新表（我想保留旧表）。

编辑：我已经跟踪了 django 在哪里创建了适当的 m2m 模型：

```
def create_many_to_many_intermediary_model(field, klass):
    from django.db import models
    # ... 
    # Construct and return the new class.
    return type(name, (models.Model,), {
        'Meta': meta,
        '__module__': klass.__module__,
        from_: models.ForeignKey(klass,
                                 related_name='%s+' % name,
                                 db_tablespace=field.db_tablespace),
        to: models.ForeignKey(to_model,
                              related_name='%s+' % name,
                              db_tablespace=field.db_tablespace)
    }) 
```

相关线路是

```
to: models.ForeignKey(to_model,
                      related_name='%s+' % name,
                      db_tablespace=field.db_tablespace) 
```

我希望它是

```
to: models.ForeignKey(to_model,
                      related_name='%s+' % name,
                      db_tablespace=field.db_tablespace,
                      on_delete=models.PROTECT) 
```

除了猴子修补整个事情并为 ManyToManyField 创建一个新类之外，还有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-30T23:58:50.183

我认为最明智的做法是使用显式直通表。我意识到你已经说过你不想“因为这会导致一个新表（我想保留旧表）”。

我怀疑您担心丢失您拥有的数据。如果您使用 South，您可以轻松地将现有的自动中间表“转换”为显式中间表，或者，您可以创建一个全新的表，然后在删除旧表之前将现有数据迁移到新表。

这里解释了这两种方法：[Adding a "through" table to django field and Migrating with South?](https://stackoverflow.com/questions/6063357/adding-a-through-table-to-django-field-and-migrating-with-south)

考虑到您想对其定义进行更改，我可能会选择创建一个新表，然后迁移您的数据。测试以确保您的所有数据仍然存在（并且您的更改符合您的要求），然后删除旧的中间表。

考虑到这些表每行都只能保存 3 个整数，即使您有很多房屋和所有者，这也可能是一个非常易于管理的练习。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-01-24T14:41:00.520

如果我理解你想要的，这与我前段时间需要的类似。

**您的问题：您需要保护在另一个表中使用的记录不被意外删除。**

我通过这种方式解决了它（在 Django 2 和 Django 3 上测试）。

想象一下，你有：

TABLE1 和 TABLE 2，它们属于 M2M 关系，其中 TABLE1 具有 ManyToManyField。

我把主要的键给你理解为大写，你需要调整到你想要的。

查看使用 exists() 方法的 views.py 并引发异常是至关重要的。

模型.py

```
class TABLE1(models.Model):
    FIELD_M2M = models.ManyToManyField(
        TABLE2,
        blank=False,
        related_name='FIELD_M2M',
    )
#put here your code 
```

模型.py

```
class TABLE2(models.Model):
#Put here your code 
```

视图.py

```
# Delete
@login_required
def delete(request, pk=None):
    try:  # Delete register selected
        if TABLE1.objects.filter(FIELD_M2M=pk).exists():
            raise IntegrityError
        register_to_delete = get_object_or_404(TABLE2, pk=pk)
        # register_to_delete.register_to_delete.clear() // Uncomment this, if you need broken relationship M2M before delete
        register_to_delete.delete()
    except IntegrityError:
        message = "The register couldn't be deleted!"
        messages.info(request, message) 
```

这是一个丑陋的解决方案，但它有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-06T14:20:38.103

按照@Andrew Fount 的要求发布我自己的解决方案。只是为了改变一行而非常丑陋的黑客攻击。

```
from django.db.models import ManyToManyField
from django.db.models.fields.related import ReverseManyRelatedObjectsDescriptor, add_lazy_relation, create_many_to_many_intermediary_model, RECURSIVE_RELATIONSHIP_CONSTANT
from django.utils import six
from django.utils.functional import curry

def create_many_to_many_protected_intermediary_model(field, klass):
    from django.db import models
    managed = True
    if isinstance(field.rel.to, six.string_types) and field.rel.to != RECURSIVE_RELATIONSHIP_CONSTANT:
        to_model = field.rel.to
        to = to_model.split('.')[-1]

        def set_managed(field, model, cls):
            field.rel.through._meta.managed = model._meta.managed or cls._meta.managed
        add_lazy_relation(klass, field, to_model, set_managed)
    elif isinstance(field.rel.to, six.string_types):
        to = klass._meta.object_name
        to_model = klass
        managed = klass._meta.managed
    else:
        to = field.rel.to._meta.object_name
        to_model = field.rel.to
        managed = klass._meta.managed or to_model._meta.managed
    name = '%s_%s' % (klass._meta.object_name, field.name)
    if field.rel.to == RECURSIVE_RELATIONSHIP_CONSTANT or to == klass._meta.object_name:
        from_ = 'from_%s' % to.lower()
        to = 'to_%s' % to.lower()
    else:
        from_ = klass._meta.object_name.lower()
        to = to.lower()
    meta = type('Meta', (object,), {
        'db_table': field._get_m2m_db_table(klass._meta),
        'managed': managed,
        'auto_created': klass,
        'app_label': klass._meta.app_label,
        'db_tablespace': klass._meta.db_tablespace,
        'unique_together': (from_, to),
        'verbose_name': '%(from)s-%(to)s relationship' % {'from': from_, 'to': to},
        'verbose_name_plural': '%(from)s-%(to)s relationships' % {'from': from_, 'to': to},
        })
    # Construct and return the new class.
    return type(name, (models.Model,), {
        'Meta': meta,
        '__module__': klass.__module__,
        from_: models.ForeignKey(klass, related_name='%s+' % name, db_tablespace=field.db_tablespace),

        ### THIS IS THE ONLY LINE CHANGED
        to: models.ForeignKey(to_model, related_name='%s+' % name, db_tablespace=field.db_tablespace, on_delete=models.PROTECT)
        ### END OF THIS IS THE ONLY LINE CHANGED
    })

class ManyToManyProtectedField(ManyToManyField):
    def contribute_to_class(self, cls, name):
        # To support multiple relations to self, it's useful to have a non-None
        # related name on symmetrical relations for internal reasons. The
        # concept doesn't make a lot of sense externally ("you want me to
        # specify *what* on my non-reversible relation?!"), so we set it up
        # automatically. The funky name reduces the chance of an accidental
        # clash.
        if self.rel.symmetrical and (self.rel.to == "self" or self.rel.to == cls._meta.object_name):
            self.rel.related_name = "%s_rel_+" % name

        super(ManyToManyField, self).contribute_to_class(cls, name)

        # The intermediate m2m model is not auto created if:
        #  1) There is a manually specified intermediate, or
        #  2) The class owning the m2m field is abstract.
        #  3) The class owning the m2m field has been swapped out.
        if not self.rel.through and not cls._meta.abstract and not cls._meta.swapped:
            self.rel.through = create_many_to_many_protected_intermediary_model(self, cls)

        # Add the descriptor for the m2m relation
        setattr(cls, self.name, ReverseManyRelatedObjectsDescriptor(self))

        # Set up the accessor for the m2m table name for the relation
        self.m2m_db_table = curry(self._get_m2m_db_table, cls._meta)

        # Populate some necessary rel arguments so that cross-app relations
        # work correctly.
        if isinstance(self.rel.through, six.string_types):
            def resolve_through_model(field, model, cls):
                field.rel.through = model
            add_lazy_relation(cls, self, self.rel.through, resolve_through_model) 
```

# java - 获取 facebook 帖子的新评论（自参数）

> ID：15303061
> 
> 赞同：1
> 
> 时间：2013-03-08T20:50:26.007
> 
> 标签：java, facebook, facebook-comments

自给定时间以来，我正试图获得粉丝专页的评论。但似乎因为参数被忽略了。

```
try {
    $attachments = array('access_token' => $profile['access_token'], 'since' => strtotime('2013-03-07T18:13:57+0000'));
    $comments = $facebook->api("$id/comments", 'GET', $attachments);
    print_r($comments);
} catch (FacebookApiException $e) {
    error_log($e);
} 
```

这不可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:18:34.847

不，`since`不适用于每张桌子。一个解决方案是使用 FQL：

```
SELECT id, time, text 
  FROM comment
 WHERE object_id = POST_ID
       AND time > UNIX_TIME 
 LIMIT 50 
OFFSET 0 
```

（替换`POST_ID`和`UNIX_TIME`）

* * *

`OFFSET`您可以在将50递增时循环此查询。

第一组将给出 50 条最近的评论，第二组将给出 50 条之前的评论，依此类推。但是每个组都包含按时间顺序排列的**评论**。

一旦查询发送的结果少于 50 个，您就可以停止循环。

# c++ - OpenCv：如何做背景去除？

> ID：15303062
> 
> 赞同：-1
> 
> 时间：2013-03-08T20:50:28.923
> 
> 标签：c++, opencv, background, foreground, subtraction

基本上我需要从绿屏视频中剪切前景对象。我需要使绿色透明或直接剪切前景对象。我需要使用 OpenCv 和 C++。我找到了几种方法，但不起作用。我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:57:06.113

没有神奇的方法可以做到这一点。您需要以编程方式选择对每一帧（即`Mat`对象）应用效果的 roi。您可能需要减少噪点、应用模糊、提取每个通道并做更多事情。所以请耐心等待并开始尝试。

# bash - 如何使用 grep 从文件中输出唯一的代码行？

> ID：15303071
> 
> 赞同：1
> 
> 时间：2013-03-08T20:51:16.663
> 
> 标签：bash, shell, grep

我有一个大型日志文件，其中包含以下行：

```
82.117.22.206 - - [08/Mar/2013:20:36:42 +0000] "GET /key/0/www.mysite.org.uk/ HTTP/1.0" 200 0 "-" "-" 
```

我想从与上述模式匹配的每一行中仅提取 ip`82.117.22.206`后跟一个空格和其中的文本`www.mysite.org.uk`。ip 和 text 可以不同。因此，鉴于上述行，输出文件中的行将是：

```
82.117.22.206 www.mysite.org.uk 
```

如何在 bash 中使用 grep 或其他命令使输出唯一，以使输出文件不包含两条相同的行？有人可以推荐我到一个开始学习更多关于这种 shell 脚本的好地方吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:02:53.010

使用 perl，您可以捕获部分

```
use strict;
use warnings;

if (m/^(\d+\.\d+\.\d+\.\d+)\s+-\s+-\s+\[.+?\]\s+\"GET\s+\/key\/0\/(.+?)\//) {
    print "$1 $2\n";
} 
```

并将其称为

```
perl -n script.pl logfile.txt | sort -u 
```

这会提取所需的字段、排序和消除重复行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:07:23.400

如果您弄清楚要使用的正则表达式，您可以执行以下操作：

```
echo "Hello World" | grep "Hell" | sed 's/\(Hell\).*\(World\)/\1 \2/' 
```

只是，你会记录你的日志，而不是回显一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T21:12:17.673

```
grep -Po "^[\d.]*|[^/]*(?=/ HTTP)" file|sed 'N;s/\n/ /' 
```

# c# - 在 XElement.ToString 结果中的 XAttributes 之间输入换行符/回车符

> ID：15303072
> 
> 赞同：4
> 
> 时间：2013-03-08T20:51:19.613
> 
> 标签：c#, .net, xelement

有没有办法让换行符出现在 XElement.ToString 结果 xml 字符串的属性之间？

以下内容不起作用——它保留了换行符，但将它们放在所有属性下方，因此只有 4/5 空行：

```
new XElement("options", new XText("\r\n"),
    new XAttribute("updated", Updated.XmlTime()), new XText("\r\n"),
    new XAttribute("color", Color), new XText("\r\n"),
    new XAttribute("puppies", Puppies), new XText("\r\n"),
    new XAttribute("isTrue", IsTrue), new XText("\r\n"),
    new XAttribute("kitties", Kitties ?? "")), 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T21:14:33.553

您可以使用`XmlWriter`. 试试这个：

```
public static string ToStringFormatted(this XElement xml)
{
  XmlWriterSettings settings = new XmlWriterSettings();
  settings.Indent = true;
  settings.NewLineOnAttributes = true;
  StringBuilder result = new StringBuilder();
  using (XmlWriter writer = XmlWriter.Create(result, settings)) {
    xml.WriteTo(writer);
  }
  return result.ToString();
} // ToStringFormatted 
```

然后

```
var xml =new XElement("options",
    new XAttribute("updated", "U"),
    new XAttribute("color", "C"),
    new XAttribute("puppies", "P"),
    new XAttribute("isTrue", "I"),
    new XAttribute("kitties", "K")
 );
 Console.WriteLine(xml.ToStringFormatted()); 
```

产生这个：

```
<options
  updated="U"
  color="C"
  puppies="P"
  isTrue="I"
  kitties="K" /> 
```

您可以使用各种[`XmlWriterSettings`](http://msdn.microsoft.com/en-us/library/system.xml.xmlwritersettings.aspx)属性进行不同的格式设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:11:08.317

无法在 XML 对象中添加新行，因为 XML DOM 中的属性之间没有“文本节点”。每个节点的所有属性都在大无序*表中，并且没有“纯文本”属性。

只有 XML 的文本表示可以具有这样的属性格式。请注意，当此类 XML 加载到 DOM/reader 中时，属性之间的所有格式都会丢失。

您可以做的是使用您想要的格式实现您自己的 XmlWriter。

*) 大多数 XML DOM 实现保持属性的顺序与源或添加它们的顺序相同，但没有要求这样做。

# c# - 如何在 Visual Studio Express 2012 中调试似乎被手机杀死的 WP 8 应用程序而没有任何错误

> ID：15303080
> 
> 赞同：0
> 
> 时间：2013-03-08T20:52:18.503
> 
> 标签：c#, silverlight, windows-phone-8

可能有点笼统的问题。我有一个非常简单的应用程序，基本上是网页的包装应用程序。此应用在 WP8 上崩溃，通常在您启动应用时发生，然后转到主屏幕并按住返回按钮以调出最近的应用视图并返回应用。该应用程序刚刚被杀死。

我想知道的是，在我遇到 WP 应用程序在 WP7.5 上崩溃的问题之前，我会从 Visual Studio Express 在手机上运行该应用程序，当应用程序崩溃时，我可以在 VSE 中看到错误和堆栈跟踪。但是由于我现在遇到的错误，就好像 VSE 甚至不知道该应用程序已被终止。它仍然显示它正在运行。

我尝试的一件事是为 onNavigatedTo 事件添加事件处理程序并在其中设置一个断点，以查看在切换回应用程序时是否可以捕获该应用程序，然后从那里逐步执行。但是当我这样做并且应用程序崩溃时，我从 VSE 得到的只是一条消息，说它未能绑定断点。

我也尝试了模拟器，希望它能给我更好的洞察力，但它与在手机上运行应用程序相同。所以现在我有一个在 WP8 上非常不稳定的应用程序（虽然在 WP7.5 上运行稳定），我不知道到底出了什么问题。

所以我的问题是是否有任何方法可以获取有关应用程序崩溃的方式和原因的更多信息:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:39:23.993

您还可以使用 Windows 的事件视图。

我有一个类似的问题（有时在运行和访问隔离存储时，应用程序会在没有任何通知的情况下被杀死）并且事件视图提供了一些有用的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T14:51:39.843

我建议将调试输出 ( `Debug.WriteLine`) 放入App.xaml.cs 文件中`App_Activated`。`App_Closing methods`也到`RootFrame_NavigationFailed`and `Application_UnhandledException`。当您返回应用程序并崩溃时，所有这些方法都有可能运行。如果这没有帮助（您将在 VS 输出窗口中看到没有输出），请尝试将一些其他输出放在那里，例如同步写入隔离存储中的文件，或激活一些启动器（例如电子邮件撰写任务，请参见[此处](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394003%28v=vs.105%29.aspx)）。这里的重点是在发生故障时执行一些其他活动。

您可以尝试的另一件事是在应用程序似乎已经终止时中断 VSE 中的执行。我的意思是，按下调试器中的“暂停”按钮。它可能会提供信息。

# c++ - 收到的 CSocket 客户端-服务器字符串是中文字符

> ID：15303084
> 
> 赞同：1
> 
> 时间：2013-03-08T20:52:49.347
> 
> 标签：c++, unicode, mfc, client-server, asyncsocket

简单的 CAsyncSocket 服务器和客户端程序。现在我正在使用 tera term vt 在本地进行测试。所以我在 TT 中输入了一个单词，它会发送到我的程序，但我收到的字符串只是一堆汉字。我正在使用 MFC 并以 Unicode 编译。现在有趣的是，当我遵守多字节字符集时，字符串接收得很好，所以我不确定这意味着什么，或者我可以改变什么来获得这个结果。

接收发生的代码

```
void CClientSock::OnReceive(int nErrorCode)
{
TCHAR buf[1000];
memset(buf,'\0',1000);
CString recStr;
int bytesRead;
bytesRead = Receive(buf,1000);

switch(bytesRead)
{
case 0:
    Close();
    break;
case SOCKET_ERROR:
    if(GetLastError() != WSAEWOULDBLOCK)
    {
        AfxMessageBox(L"Error occured");
        Close();
    }
    break;
default:
    buf[bytesRead] = '\0';
    CString temp(buf);
    recStr = temp;

    CT2A Astring(recStr);
    CString nString(Astring);
    AfxMessageBox(nString);

}
        CAsyncSocket::OnReceive(nErrorCode);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T02:29:06.840

您收到的数据`CAsyncSocket::Receive`可能是多字节字符，所以只需`TCHAR buf[1000];`将`char buf[1000];`

您还为文本转换创建了太多冗余的 CString。可以简化为：

```
default:
    buf[bytesRead] = '\0';
    recStr = buf;
    AfxMessageBox(recStr); 
```

# mysql - 将 ResultSet 的结果存储在列表中

> ID：15303085
> 
> 赞同：2
> 
> 时间：2013-03-08T20:53:00.813
> 
> 标签：mysql, java-7

我的目标是将与 MySql 数据库的所有交互集中在一个类中（例如 SqlUtils）。即使在连接关闭后，我基本上也想保持对`ResultSet`或类似类的访问。以下方式不起作用，因为我的业务方法收到ResultSet后，由于底层连接已经关闭，因此引发异常。我想强调的是，打开和关闭与数据库的连接必须在`getResultSet()`.

```
public ResultSet getResultSet(String sql) {
    try (Connection conn = getConnection();){
        return conn.createStatement().executeQuery(sql);
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
} 
```

我现在想做的是这样的：

```
public List<ResultHolder> getResultSet(String sql) {
    List<ResultHolder> list = new LinkedList<>();
    try (Connection conn = getConnection();
         ResultSet res = conn.createStatement().executeQuery(sql);) {
        while(res.next()) {
            list.add(res.convertToResultHolder());
        }

    } catch (Exception e) {
        e.printStackTrace();
    }
    return list;
} 
```

是否有任何课程可以满足我的需要，我将其表示为`ResultHolder`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:08:49.927

如果您想在连接关闭后访问所有结果集数据，那么我建议您执行以下操作：

```
public List<Map<String, Object>> getResultSet(String sql) {
   // this list will hold all the data returned from resultset
   List<Map<String, Object>> rows = new ArrayList<Map<String, Object>>();

   try (Connection conn = getConnection();
        ResultSet rs = conn.createStatement().executeQuery(sql);) {
      while(rs.next()) {
         // this map corresponds to each row of the resultset
         // key: column-name, value: column-value
         Map<String, Object> row = new LinkedHashMap<String, Object>();

         // populate each row using resultset's Meta data
         ResultSetMetaData meta = rs.getMetaData();
         for (int i=1; i<=meta.getColumnCount(); i++)
            row.put(meta.getColumnName(i), rs.getObject(i));
         rows.add(row);
        }
   } catch (Exception e) {
        e.printStackTrace();
   }
   return rows;
} 
```

# python - NumPy mmap：“ValueError：可用数据的大小不是数据类型大小的倍数。”

> ID：15303087
> 
> 赞同：2
> 
> 时间：2013-03-08T20:53:20.787
> 
> 标签：python, numpy, mmap

我正在尝试将“data.txt”中的数据放入一个 numpy 数组并用 matplotlib 绘制它。这是每行数据的样子：

“1” 11.658870417634 4.8159509459201

大约有一千万行。

我正在尝试将其放入内存映射，但不断收到此错误：

```
ValueError: Size of available data is not a multiple of data-type size. 
```

这是我正在使用的代码：

```
import numpy
import matplotlib

matplotlib.use('Agg')
import matplotlib.pyplot as plt

datatype=[('index',numpy.int), ('floati',numpy.float32), ('floatq',numpy.float32)]
filename='data.txt'

def main():
    data = numpy.memmap(filename, datatype, 'r') 
    plt.plot(data['floati'],data['floatq'],'r,')
    plt.grid(True)
    plt.title("Signal-Diagram")
    plt.xlabel("Sample")
    plt.ylabel("In-Phase")
    plt.savefig('foo2.png')

if __name__ == "__main__":
    main() 
```

如果你能帮我弄清楚我哪里出错了，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:55:19.890

那是一个文本文件，而不是二进制文件。`memmap`仅当数据以二进制形式存储时才有效（即以数组形式存储在内存中）。

您可以通过逐行读取文件并将每个转换后的行存储在可写文件中来将文件转换为二进制文件`memmap`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T21:13:45.187

你最好使用`numpy.genfromtxt`or `numpy.loadtxt`。例如：

```
datatype=[('index',numpy.int), ('floati',numpy.float32), ('floatq',numpy.float32)]
filename='data.txt'

def main():
    data = numpy.genfromtxt(filename, dtype=datatype) 
    ... 
```

# google-chrome-devtools - 你如何让 Chrome 开发者工具只显示你的 console.log？

> ID：15303088
> 
> 赞同：1
> 
> 时间：2013-03-08T20:53:22.133
> 
> 标签：google-chrome-devtools

当插件说什么时，它会添加日志。当它从缓存清单中获取任何内容时，它会添加日志。它有时会记录 HTTP 信息。

我的 1 条小日志被我不需要或不想要的 10,000 条日志淹没。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:17:50.947

仅在开发中使用：

```
(function(){
    var originalConsole = window.console;

    window.console = {};
    window.console.log = window.console.debug = window.console.error = function(){};

    window.myLog = function() {
        originalConsole.log.apply(originalConsole, arguments);
    };
}()); 
```

这将保存原始`window.console`对象的本地副本。

它将更改原始`window.console`对象以使用空函数。

最后，它将定义一个全局`myLog`函数，该函数将使用原始的本地副本`window.console`来实际记录内容。

这样，所有其他代码都将使用无用的`console.log()`，而您的代码可以使用`myLog()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-14T04:57:06.877

在控制台选项卡上选择左侧的无信息[我已在此处附上屏幕截图](https://i.stack.imgur.com/i5zvT.png) 您应该更新到谷歌浏览器最新版本

# asp.net - 表单身份验证 - 重定向回原始域

> ID：15303094
> 
> 赞同：0
> 
> 时间：2013-03-08T20:53:49.637
> 
> 标签：asp.net, redirect, login, forms-authentication, subdomain

例子：

应用程序 = [https://test2.mytest.com/MyApplication/Download.aspx](https://test2.mytest.com/MyApplication/Download.aspx)

该应用程序在 web.config 中启用了表单身份验证：

```
<authentication mode="Forms">
  <forms loginUrl="https://test.mytest.com/Login/" name=".ASPXAUTH"/>
</authentication>
<authorization>
  <deny users="?"/>
</authorization> 
```

访问应用程序时，它会正确重定向到登录页面：
[https ://test.mytest.com/Login/?ReturnUrl=%2fMyApplication%2fDownload.aspx](https://test.mytest.com/Login/?ReturnUrl=%2fMyApplication%2fDownload.aspx)

但是，成功登录后会转到：
[https://test.mytest.com/MyApplication/Download.aspx](https://test.mytest.com/MyApplication/Download.aspx)
而不是
[https://test2.mytest.com/MyApplication/Download.aspx](https://test2.mytest.com/MyApplication/Download.aspx)

它使用登录应用程序所在的子域 (test.mytest.com)，而不是原始请求的子域 (test2.mytest.com)。无论如何，表单身份验证是否重定向回原始请求子域，而不是登录应用程序所在的子域？

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:44:09.260

是的，这当然是可能的，但是您需要对身份验证子域和需要身份验证的子域进行更改。

**需要认证的子域。**
您遇到的问题是，当匿名用户尝试访问受保护的资源时，ASP.NET 表单身份验证会将他们重定向到登录页面并将原始请求的资源附加到“ReturnURL”查询字符串中**，但此 ReturnURL 参数是相对 URL** .

因此，要使其以您想要的方式工作，您需要操纵 ReturnURL 参数以某种方式指示返回到不同的站点。

一种方法是使用 HttpHandler 操作 ReturnURL 以连接到 PostAuthenticateRequest，如本文中详细介绍的[使用绝对返回 URL 的表单身份验证](http://blogs.freshlogicstudios.com/Posts/View.aspx?Id=cb739183-6a0b-46bc-9179-22aed8e60433)。

**验证子域**
要启用到调用子域的重定向，您需要在 web.config 的表单部分中将[enableCrossAppRedirects](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.enablecrossappredirects.asp)属性设置为“true”，以允许重定向到另一个 Web 应用程序中的 URL。请注意这一点的含义，因为它使您容易受到[开放重定向攻击](http://www.asp.net/mvc/tutorials/security/preventing-open-redirection-attacks)。

直接在 ReturnURL 上设置子域地址（有助于防止开放重定向攻击）的另一种更安全的方法是修改 ReturnURL 以在查询字符串中包含已知参数，然后修改 global.asax.cs 中的 Application_EndRequest[此处](https://stackoverflow.com/a/4998277/667562)和[此处](http://weblogs.asp.net/dfindley/archive/2007/02/06/fix-returnurl-when-sharing-forms-authentication-with-multiple-web-applications.aspx)提到的身份验证子域以重写 Response.RedirectLocation。

# c# - 检查是否在项目列表中选中了复选框

> ID：15303097
> 
> 赞同：0
> 
> 时间：2013-03-08T20:53:55.570
> 
> 标签：c#, asp.net-mvc, html, razor

我正在构建一个 MVC 应用程序，现在我的视图会生成一组项目。如果用户想要发送数据，则需要选中一个复选框。

这是我的观点以及它是如何构建的：

```
<script type="text/javascript">
    $(document).ready(function() {
        //alert("The document is ready");
        $("#selectAll").click(function() {
            //alert("The case has been clicked");
            var chkValue = $(this).is(":checked");
            $(".divChckBox").prop("checked", chkValue);
        });
    });
</script>
<p>
    @using (Html.BeginForm("SendObj", "Manager"))
    {
        <p>
            Select / UnSelet All Items @Html.CheckBox("selectAll", true) 
        </p>
        <table>
            <tr>
                <th>Card Name</th>
                <th>Number In Stock</th>
                (...)
            </tr>
            @for (int i = 0; i < Model.Count(); i++)
            {
                <tr>
                    <td>@Html.DisplayFor(x => x[i].m_OthObj.m_ObjName)</td>
                    <td>@Html.DisplayFor(x => x[i].m_NbInStock)@Html.HiddenFor(x => x[i].m_NbInStock)</td>
                    (...)
                    <td>
                        <input type="checkbox" name="itdoesnotmatter" class="divChckBox" checked="true"/>
                    </td>
                </tr>
            }

        </table>
        <input type="submit" value="Send"/>
    }
</p> 
```

所以你明白为什么我不能使用“CheckboxFor”。现在我要做的是只发送复选框状态为“已选中”的项目。我知道如何通过模型绑定（checkboxfor）来做到这一点，但我对如何构建它一无所知。我需要返回一个项目列表。那么我该怎么做呢？非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:57:41.633

尝试使用该`attr`方法更改属性`checked`。

```
$(document).ready(function() {
        $("#selectAll").click(function() {
            var chkValue = $(this).is(":checked");
            $(".divChckBox").attr("checked", chkValue);
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:00:52.700

您的表单将根据名称返回值，因此请射杀告诉您如此愚蠢名称的人 :)
使用

```
<input type="checkbox" name="InStock" class="divChckBox" checked="true" value="@Model[i].ID" /> 
```

或者更具代表性的东西。请注意，提供唯一标识符作为复选框的值是至关重要的。该值是您将如何识别检查的内容！

在您的控制器中，有几种方法可以捕获它。我这样做：

```
public ActionResult Create(List<int> InStock)
{
  foreach(var inStockItem in InStock)
  {
    //do what you need to do
  }
} 
```

要点：

```
List<int> InStock 
```

这必须与复选框上的 NAME 属性相匹配。实际值将是您的复选框的值。

在这里，我只是为您的操作随机选择了创建，但您需要使其与您所在的任何操作（编辑、索引等）相匹配。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T21:03:51.493

查看代码：

```
<!-- note "x[i].m_id"; Use the entity's id property is here
     ...maybe this should be m_NbInStock? -->
<input type="checkbox" name="selectedItems" value="@x[i].m_id" class="divChckBox" checked="true"/> 
```

控制器代码：

```
public class Manager : Controller
{
    /* ... */
    [HttpPost]
    public ActionResult SendObj(IList<Int32> selectedItems)
    {
      // Grab those items by their IDs found within `selectedItems` and perform
      // any processing necessary

      // ...
      //return View();
    }
    /* ... */
} 
```

# ios - UICollectionView 单元格子视图不调整大小

> ID：15303100
> 
> 赞同：45
> 
> 时间：2013-03-08T20:54:19.643
> 
> 标签：ios, size, cell, subview, uicollectionview

在 a`CollectionView`中，一些单元格应该有一个额外的子视图或层。`CollectionView`可以告诉它调整其单元格的大小，因此所有内容都需要适当地调整大小。

目前，该单元格是从一个包含带有 imageview 的单元格的 nib 初始化的；单元格笔尖链接到自定义`UICollectionViewCell`子类，该子类仅执行 init。自动调整子视图被选中。

被`CollectionView`告知通过在 中派生和返回的值来调整单元格的大小`sizeForItemAtIndexPath:`。我对 FlowLayout 进行了子类化，但它只指定`ScrollDirection`和`Insets`.

所有这些工作正常。问题：如何将子视图/图层添加到单元格，以便它也正确调整大小？我尝试在关闭的情况下添加子视图和图层`translatesAutoresizingMaskIntoConstraints`，但它们根本不会自动改变大小。还尝试使用代码框架/视图而不是笔尖。

我现在得到的最好的是`cell.contentView.layer`我添加的一个子层`cellForItemAtIndexPath:`；`frame.size`这是通过存储单元格的from来“手动”调整大小的`sizeForItemAtIndexPath:`，这不仅丑陋，而且最终导致子层对于不同的单元格具有不同的大小。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2014-09-10T20:26:25.990

我刚才遇到了同样的问题。

当使用 UICollectionViewFlowLayoutDelegate 方法根据设备和设备方向设置单元格大小时，将正确计算大小，但子视图不会调整大小以填充新大小的单元格。效果是一个带有小子视图的大空白单元格，这些子视图不填充单元格的边界/保持大小等于它们在 xib 文件中的当前值。

我通过执行以下操作解决了这个问题`awakeFromNib`：

```
- (void)awakeFromNib
{
    [super awakeFromNib];

    self.contentView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
    self.contentView.translatesAutoresizingMaskIntoConstraints = YES;
} 
```

在执行此操作之前，contentView 掩码是`nil`.

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-03-24T22:23:07.987

```
*override func awakeFromNib() {
    super.awakeFromNib()

    self.contentView.autoresizingMask.insert(.FlexibleHeight)
    self.contentView.autoresizingMask.insert(.FlexibleWidth)
} 
```

这对我有用.. 此代码位于您的子类 UICollectionViewCell.swift 文件中（涉及自定义单元格的代码所在的位置）

快速解决方案*

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-09-23T06:26:50.957

作为启用 AutoResizingMask 的替代方法，对于具有可变高度的自定义 UICollectionViewLayouts，例如您手动设置一些约束并且需要 translatesAutoresizingMaskIntoConstraints 保持 NO，您可以将以下内容添加到单元格中的 layoutSubviews：

```
self.contentView.frame = self.bounds; 
```

这可以解决我在 Xcode 6 中出现问题的所有自定义集合视图布局。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-01-25T20:20:16.183

在另一个没有 xibs 的项目中，我将 UICollectionViewCell 子类化并为相同的效果这样做：

```
#import "CVcell.h"

@implementation CVcell

@synthesize cellImage;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {

        CGFloat cellSize = self.contentView.bounds.size.width;
        cellImage = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, cellSize, cellSize)];
        [cellImage setClipsToBounds:YES];

        cellImage.translatesAutoresizingMaskIntoConstraints = NO;
        cellImage.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
        [self.contentView addSubview:cellImage];

    }
    return self;
}

@end 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-03-06T09:59:14.653

如果可能，我总是更喜欢自动布局。但有时，当视图仅由其父视图直接确定时，使用框架和边界只是一种节省时间的方法。

在 UICollectionViewCell 的情况下，我将图像设置为单元格框架 + `self.imageView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;`

但是当我在 collectionView 中有不同大小的单元格时，它会搞砸事情，图像有时会占用不同单元格的大小。

因此，我转向处理细胞边界，并且 - 实际效果很好。

所以也许试试看？

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-04-15T00:01:04.857

一个简单的自动布局解决方案是为容器视图设置约束。

因此，如果我们有一个带有父视图的图像视图，我们基本上想告诉子视图（图像视图）保持到容器视图的前导、尾随、底部和顶部空间距离为 0。

![自动布局约束以调整父视图的大小](../Images/402492ad40519a914fbf4d7c919bfb9e.png)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-06-03T10:10:33.567

根据[这篇文章](http://corsarus.com/2015/collection-view-with-self-sizing-cells/)， @Alfie Hanssen 解决方案（[这里](https://stackoverflow.com/a/25774492/1728552%20%22%22)）对我来说不能正常工作：

> XIB 中单元格视图的大小为 50 x 50 点，这是流布局中设置的集合视图单元格的默认大小。即使在 Interface Builder 中使用这么小的单元格有点困难，最好不要更改默认大小。问题是 Auto Layout 认为手动设置的大小是固定的，并在尝试自动调整单元格高度时生成 NSAutoresizingMaskLayoutConstraint 错误

我检查了 UICollectionViewCell，发现单元格和 contentView 之间有一个视图，并且该视图具有固有的宽度和高度约束。而不是 AutoresizingMask 我只是更新如下，似乎对我有用。

```
override func layoutSubviews() {
    contentView.superview?.frame = bounds
    super.layoutSubviews()
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-08-18T15:52:27.643

我正在以编程方式添加 subView 和约束，以下代码适用于我：

```
lazy var imageView: UIImageView = { [unowned self] in
    let imageView = UIImageView(frame: self.contentView.frame)
    imageView.contentMode = .scaleAspectFill
    imageView.clipsToBounds = true

    return imageView
}() 

func updateCellWith(image: UIImage) {

    contentView.subviews.forEach { $0.removeFromSuperview() }

    contentView.addSubview(imageView)
    imageView.topAnchor.constraint(equalTo: contentView.topAnchor, constant: 0).isActive = true
    imageView.leftAnchor.constraint(equalTo: contentView.leftAnchor, constant: 0).isActive = true
    imageView.rightAnchor.constraint(equalTo: contentView.rightAnchor, constant: 0).isActive = true
    imageView.bottomAnchor.constraint(equalTo: contentView.bottomAnchor, constant: 0).isActive = true

    self.imageView.autoresizingMask.insert(.flexibleHeight)
    self.imageView.autoresizingMask.insert(.flexibleWidth)

    imageView.image = image

} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-09T13:48:38.920

解决方案是关闭单元格 xib 的 AutoConstraints 并激活图像视图的 AutoResize 中的灵活宽度/高度箭头。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-01-23T18:39:52.237

我有同样的问题。在两种布局之间切换并没有调整单元格内的图片（UIImage）大小。我的细胞在没有 xib 的情况下构建。我为每个 CollectionViewCustomLayout 使用了两个不同的单元格类。

我以编程方式解决了这个问题：

```
self.autoresizesSubviews = YES; 
```

在我的 UICollectionViewCell 子类中。

但这仅对我有用，方法是将图片添加为单元格背景图片，如下所示：

```
cell.backgroundView[[UIImageView alloc] initWithImage: SumDummyImage ]; 
```

# android - 来自 AsyncTask.doInBackground() 的用户反馈？

> ID：15303102
> 
> 赞同：0
> 
> 时间：2013-03-08T20:54:25.070
> 
> 标签：android, android-asynctask

我有一个`AsyncTask`which 需要一个`ArrayList`音乐文件来播放。在该`doInBackground`方法中，我循环遍历 ArrayList 并一一播放歌曲。我想`TextView`在 UI 或其他内容上放置一条状态消息以指示正在播放哪首歌曲，但收到错误*只有创建视图层次结构的原始线程才能触及其视图。* 如果我只更新 UI 小部件`onPreExecute()`并且`onPostExecute()`列表已经播放。有没有办法使用`onProgressUpdate`或其他`AsyncTask`方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T21:16:55.910

这当然是可能的。这是一个基本示例，如果您想要为歌曲名称、专辑名称和艺术家姓名显示字符串（我还没有完全实现 AsyncTask，只是与 onProgressUpdate 相关的部分）：

```
private class myAsyncTask extends AsyncTask<Void, String, Void> 
{
     protected Void doInBackground(Void... voids) 
     {
         //Get some list of songs, named songs
         for(Song song in songs)//This is the loop where you're playing your songs
         {
             publishProgress(song.name, song.album, song.artist);
             //Play the song and wait for it to finish
         }
         return null;
     }

     protected void onProgressUpdate(String... songData) 
     {
         //Assuming three text views exist to display your data
         nameTextView.setText(songData[0]);
         albumTextView.setText(songData[1]);
         artistTextView.setText(songData[2]);
     }
} 
```

需要注意的重要事项是尖括号中的第二个类是参数的类型`onProgressUpdate`，它`publishProgress`在 doInBackground 中被调用以触发`onProgressUpdate`。大多数关于 onProgressUpdate 的示例都涉及增加 ProgressBar 的填充，但该方法在 UI 线程上运行，并且可以与 AsyncTask 可以访问的任何视图进行交互。如果您仍然遇到一些问题，请发布您当前的 AsyncTask，以便更轻松地将这个示例类集成到您已有的内容中。[这是 AsyncTask 的文档以获取更多信息。](http://developer.android.com/reference/android/os/AsyncTask.html#)希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:03:49.137

您应该能够使用 onProgressUpdate() 从 UI 线程执行更新。或者，您可以这样做（这在不使用 AsyncTask 时很典型）。

在 UI 线程上发布一个事件来更新您的 UI，如下所示：

```
view.post( new Runnable() {
    @Override
    public void run() {
        // Update your UI
    }
}); 
```

它将在 UI 线程上运行，因此它可以访问和更新视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T21:17:10.757

就在这里。

当你 decalre AsyncTask 时，你 decalre 进入任务每个部分的类型：

```
public class MyTask extends AsyncTask<URL,Integer,Long> {
.
.
.
} 
```

按顺序排列的类型，对于此示例：

1.  `URL`被传递给`doInBackground`via`execute`
2.  `Integer`到达`onProgressUpdate`（通过`publishProgress`）
3.  `Long`得到`onPostExecute`，也是返回值`doInBackground`

在您的`doInBackground()`中，您可以调用`publishProgress()`，这将依次调用`onProgessUpdate()`主线程（假设您在主线程上创建了 AsyncTask）。

参考文档中有一个完整的示例，位于**Usage** ( [link](http://developer.android.com/reference/android/os/AsyncTask.htmlhttp://developer.android.com/reference/android/os/AsyncTask.html) ) 下。

# ruby-on-rails - 撬：给我看堆栈

> ID：15303103
> 
> 赞同：115
> 
> 时间：2013-03-08T20:54:29.167
> 
> 标签：ruby-on-rails, pry

在 Rails 中使用 Pry，当我在代码 binding.pry 中遇到断点时

我想知道我是怎么到这里的，谁给我打电话，谁给他们打电话等等。但奇怪的是我没有看到那个命令。有人知道吗？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2014-02-07T05:49:03.700

要在没有任何 pry 插件的情况下执行此操作（我在使用 pry-stack_explorer 时遇到了问题），只需查看[`caller`](http://ruby-doc.org/core-2.3.1/Kernel.html#method-i-caller).

我实际上是在寻找我的项目名称来过滤掉所有不相关的 Rails 堆栈项。例如，如果我的项目名称是`archie`我会使用：

```
caller.select {|line| line.include? "archie" } 
```

这给了我正在寻找的堆栈跟踪。

更短的方法是：

```
caller.select {|x| x["archie"] } 
```

这同样有效。

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2013-03-08T21:25:52.447

有[pry-backtrace](https://github.com/pry/pry/wiki/Runtime-invocation#Pry_backtrace)显示了 Pry 会话的回溯。

还有[wtf？](https://github.com/pry/pry/wiki/Exceptions#wtf). 哪个节目是最近异常的回溯。添加更多问号以查看更多回溯或添加感叹号以查看全部内容。

在 pry 中键入[help](https://github.com/pry/pry/wiki/Command-system#Help_command)以查看所有其他命令 :)

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2013-03-09T02:09:49.047

使用[pry-stack_explorer](https://github.com/pry/pry-stack_explorer)插件，它允许您上下移动调用堆栈（使用`up`和`down`），显示调用堆栈（使用`show-stack`），等等：

看这里：

```
Frame number: 0/64

From: /Users/johnmair/ruby/rails_projects/personal_site/app/controllers/posts_controller.rb @ line 7 PostsController#index:

    5: def index
    6:   @posts = Post.all
 => 7:   binding.pry
    8: end

[1] pry(#<PostsController>)> show-stack

Showing all accessible frames in stack (65 in total):
--
=> #0  index <PostsController#index()>
   #1 [method]  send_action <ActionController::ImplicitRender#send_action(method, *args)>
   #2 [method]  process_action <AbstractController::Base#process_action(method_name, *args)>
   #3 [method]  process_action <ActionController::Rendering#process_action(*arg1)>
<... clipped ...>

[2] pry(#<PostsController>)> up

Frame number: 1/64
Frame type: method

From: /Users/johnmair/.rvm/gems/ruby-2.0.0-p0/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb @ line 4 ActionController::ImplicitRender#send_action:

    3: def send_action(method, *args)
 => 4:   ret = super
    5:   default_render unless response_body
    6:   ret
    7: end

[3] pry(#<PostsController>)> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-08T10:50:07.987

扩展保罗奥利弗的回答。

如果您有一个想要永久排除的短语列表，您可以使用 Pry 中的自定义命令功能来做到这一点。

在`~/.pryrc`：

```
Pry::Commands.block_command "callerf", "Filter the caller backtrace" do
  output = caller.reject! { |line| line["minitest"] || line["pry"] } 
  puts "\e[31m#{output.join("\n")}\e[0m"
end 
```

调用`callerf`将导致过滤`caller`输出。周围的奇怪标志`#{output}`正在着色以复制`caller`. 我从[这里](https://stackoverflow.com/questions/1489183/colorized-ruby-output)取了颜色。

或者，如果您不想创建自定义命令，请使用`Ctrl+R`搜索命令历史记录。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-23T13:33:54.883

您可以使用已在 gem 库中定义的调用方方法。该方法的返回值将是一个数组。因此，您可以事件应用数组方法以在那一堆行中进行搜索

下面也有助于强大的跟踪。 [https://github.com/pry/pry-stack_explorer](https://github.com/pry/pry-stack_explorer)

# .net - 网页不会在 IIS7 上更新

> ID：15303104
> 
> 赞同：0
> 
> 时间：2013-03-08T20:54:29.860
> 
> 标签：.net, caching, iis-7, coldfusion, cfml

我有一个网站，无论我尝试做什么，页面上的静态内容都不会更新。在服务器上，页面已更新，但在浏览器中查看，您仍会看到相同的旧页面。我在服务器（IIS 7）上拥有管理员权限，这是我迄今为止所做的事情......

我单击了服务器名称并选择了“输出缓存”，然后我执行了以下操作： ![在此处输入图像描述](../Images/d74853823c34e0db05d1a5f139c7123a.png)

这没有帮助。我还能做些什么来让服务器停止缓存静态内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T21:46:27.397

在 ColdFusion Administrator 中，转至**服务器设置**>**缓存**。单击**立即清除模板缓存**和立即**清除组件缓存**。

# c# - 字符串相似度算法

> ID：15303105
> 
> 赞同：6
> 
> 时间：2013-03-08T20:54:37.363
> 
> 标签：c#, .net, string, algorithm, sql-like

我有两个字符串（它们最终将成为一个简单数据库中的描述），假设它们是

1.  字符串 A：“苹果橙椰子酸橙吉米自助餐”
2.  弦B：“汽车自行车滑板”

我要找的是这个。我想要一个输入“cocnut”，输出为“String A”的函数

我们可能在大小写上有所不同，并且拼写并不总是正确的。如果您愿意，目标是“快速而肮脏”的搜索。

是否有任何.net（或第三方），或者推荐字符串的“相似算法”，所以我可以检查输入是否有一个“非常接近的片段”并返回它？我的数据库将有 50 个条目，顶部。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-08T20:57:43.477

您正在搜索的内容称为两个字符串之间的[编辑距离。](http://en.wikipedia.org/wiki/Levenshtein_distance)有很多实现——<a href="https://stackoverflow.com/a/9454016/1968">这里有一个来自 Stack Overflow 本身。

由于您只搜索字符串的*一部分*，因此您想要的是*局部最优*匹配，而不是通过此方法计算的全局匹配。

这被称为[局部对齐问题](http://en.wikipedia.org/wiki/Local_alignment)，并且再次通过几乎相同的算法很容易解决 - 唯一改变的是初始化（我们不会惩罚搜索字符串*之前*的任何内容）和最佳值的选择（我们不要惩罚搜索字符串*之后的任何内容）。*

# python - 如何将python源代码转换为C++源代码

> ID：15303107
> 
> 赞同：5
> 
> 时间：2013-03-08T20:54:39.413
> 
> 标签：python, c++, code-translation

我一直在尝试找到一种将 .py 源文件转换为 .cpp 源的方法（作为手动操作的节省时间）。我以前从未使用过 python，并希望有一种快速的方法来转换它，并清理转换器可能无法正常运行的任何代码。

到目前为止，我在谷歌搜索时发现的一些[选项](https://stackoverflow.com/questions/7112812/use-cython-as-python-to-c-converter)似乎是：nuitka、cython 和 pypy/rpython。

但是，我阅读的文档似乎只生成可执行文件，而不是实际的源代码。

此时，我找到了 py2c，但似乎找不到任何有关如何使用它的文档。另外，从 wiki 上发布的路线图来看，它似乎不是成品，所以我怀疑它的可靠性。

如果您可以提供有关如何实现此目的的其他资源，或者对我可能错过的上述可能性有所了解，我们将不胜感激。否则，我将简单地手动转换它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-08T21:03:35.573

编程语言不能像这样轻易转换。例如，Python 有一个大型标准库，而 C++ 没有相同的库。你如何翻译这些电话？

更根本的是，语言的语义非常不同，即使是简单的语句 `x = 1`在 Python 和 C++ 中也意味着不同的东西。

在阅读 Python 时，您将不得不编写 C++。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T22:57:13.200

看看[shedskin](http://code.google.com/p/shedskin/)，如果它不能完成整个工作，它仍然可能会有所帮助。

# java - Jackson JSON 字段映射大小写？

> ID：15303110
> 
> 赞同：58
> 
> 时间：2013-03-08T20:54:52.993
> 
> 标签：java, json, jackson

我不清楚杰克逊如何处理映射领域的大写。如果有人可以提供帮助，我将不胜感激。

```
{"user":{"username":"user@host.com","password":"pwd","sendercompid":"COMPID","service":{"host":"address","port":6666,"service":"S1","serviceAsString":"s1"}},"MDReqID":"ghost30022","NoRelatedSym":1,"Symbol":["GOOG"],"MarketDepth":"0","NoMDEntryTypes":3,"MDEntryType":["0","1","2"],"SubscriptionRequestType":"1","AggregatedBook":"N"}: 
```

上面是我的json，下面是我的例外......

```
com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field "MDReqID" (class com.myco.qa.fixrest.MarketDataRequest), not marked as ignorable (10 known properties: , "mdreqID", "marketDepth", "user", "subscriptionRequestType", "aggregatedBook", "mdentryType", "symbol", "mdupdateType", "noRelatedSym", "noMDEntryTypes"]) 
```

上面是我的例外，下面是我的课......

```
public class MarketDataRequest {
    private User user;
    private String MDReqID;
    private char SubscriptionRequestType;
    private int MarketDepth;
    private int MDUpdateType;
    private char AggregatedBook;
    private int NoMDEntryTypes;
    private ArrayList<Character> MDEntryType;
    private int NoRelatedSym;
    private ArrayList<String> Symbol;

    public User getUser() {
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    }

    public String getMDReqID() {
        return MDReqID;
    }

    public void setMDReqID(String MDReqID) {
        this.MDReqID = MDReqID;
    }

    public char getSubscriptionRequestType() {
        return SubscriptionRequestType;
    }

    public void setSubscriptionRequestType(char subscriptionRequestType) {
        SubscriptionRequestType = subscriptionRequestType;
    } 
```

...等等

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-03-08T21:02:05.390

由于您的 setter 方法被命名`setMDReqID(…)`，Jackson 假定变量是`mDReqID`因为 Java*命名约定*而命名的（变量应以小写字母开头）。

如果您真的想要大写字母，请在*setter上使用*[*@JsonProperty*](http://fasterxml.github.com/jackson-annotations/javadoc/2.1.0/com/fasterxml/jackson/annotation/JsonProperty.html)注释（或 - 对于序列化 - 在*getter*上），如下所示：

 **```
@JsonProperty("MDReqID")
public void setMDReqID(String MDReqID) {
    this.MDReqID = MDReqID;
} 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2019-01-31T12:54:43.957

你也可以做

```
@JsonNaming(PropertyNamingStrategy.UpperCamelCaseStrategy.class) 
```

在类上将 JSON 消息中的所有属性名称大写

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-12-11T17:12:49.963

添加`@JsonProperty`与接收到的 JSON 字符串中的属性名称匹配的设置器：

```
@JsonProperty("MDReqID")
public void setMDReqID(String MDReqID) {
    this.MDReqID = MDReqID;
} 
```

*此外，还要向getter*添加`@JsonProperty`注释，以便您的输出以*常规*格式显示：

 **```
@JsonProperty("mDReqID")
public String getMDReqID() {
    return MDReqID;
} 
```

现在您可以随意命名变量：

```
private String mdReqID; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-12T03:44:37.913

我面临同样的问题，尝试后`UpperCamelCaseStrategy`仍然出现此错误，该策略将我的字段`pContent`设置为 ObjectMapper 属性`Pcontent`，因为不想为每个字段添加@JsonProperty，`gson`最后只需使用****

# rewrite - 中间人动态页面 / url 用通配符重写

> ID：15303112
> 
> 赞同：1
> 
> 时间：2013-03-08T20:55:01.200
> 
> 标签：rewrite, middleman, dynamic-pages

我似乎无法弄清楚如何重写 URL 以使用 Middleman (3.0.12) 创建动态页面。这是我的尝试：

```
activate :directory_indexes
# not found
page "list/*", :proxy => "index.html"
# loads index
page "list/index.html", :proxy => "index.html" 
```

基本上我需要创建一个简单的重写规则来将所有 list/* 流量转发到索引页面，然后由 AngularJS 的 HTML5 路由器处理。我知道这将在使用 htaccess 的实时站点上工作，但是没有它的开发很烦人。这在中间人中可能吗？

提前致谢，

凯西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T06:35:14.350

我直接从 Middleman 的作者 Thomas Reynolds 那里得到了解决方案：

在 Gemfile

```
gem 'rack-rewrite', '~> 1.2.1' 
```

在 config.rb

```
require 'rack/rewrite'
use Rack::Rewrite do
  rewrite %r{^\/list(.*)}, '/index.html'
end 
```

# app-store - 如何让我的应用程序在 App Store 中仅适用于 iPhone 4 或更快的设备？

> ID：15303113
> 
> 赞同：0
> 
> 时间：2013-03-08T20:55:01.870
> 
> 标签：app-store, iphone-4, iphone-3gs

我的应用程序无法在 3gs 上正确运行（主要是由于性能原因，无法解决）。如何在 AppStore 上取消对 3gs 的支持？

它与以下内容有关： [如何使我的应用程序仅适用于 iPhone 3G S 或更快的设备在 App Store 上可用？](https://stackoverflow.com/questions/3472278/how-do-i-make-my-application-available-on-the-app-store-only-for-iphone-3g-s-or)

# jakarta-ee - 具有独立客户端的 EJB 忽略 persistence.xml (?)

> ID：15303115
> 
> 赞同：0
> 
> 时间：2013-03-08T20:55:06.463
> 
> 标签：jakarta-ee, jpa, entity, jpa-2.0, persistence.xml

请帮忙，这让我发疯了。我已经研究了几个小时，找不到与我的情况相匹配的例子。

我正在编写一个非常简单的 Java EE 应用程序，它从独立客户端对用户进行身份验证。在 Netbeans 7.3 中，我有一个带有 EJB 模块的 Java EE 应用程序项目、一个应用程序客户端项目和一个用于 bean 远程接口和实体的单独的 java 类库。

EJB 模块有一个bean (AccountsBean.java)，类库项目有bean 的远程接口(AccountsBeanRemote.java)、实体(Account.java) 和persistence.xml 文件。这是项目布局的图片，您可以清楚地看到它：http: [//snag.gy/EoyQa.jpg](http://snag.gy/EoyQa.jpg)

我想将 Account 实例传递给客户端。

我正在使用 Glassfish 3.1 和 Java DB (Derby)。

我有 3 个数据库：AccountsTest（我想在这里使用）、sample 和 sun-appserv-samples（这两个是在 Glassfish 安装期间创建的）。

问题是我在persistence.xml 中指定什么数据库连接并不重要，表总是在示例数据库sun-appserv-samples 中创建。在我看来，bean 忽略了 persistence.xml 文件。也许问题是persistence.xml 与bean 位于一个单独的项目中，但如果我想将Account 实例传递给远程客户端，这是IDE 允许我这样做的唯一方法。

这是我的persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="LoginTest-libPU" transaction-type="JTA">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <class>logintest.lib.Account</class>
    <properties>
      <property name="javax.persistence.jdbc.url" value="jdbc:derby://localhost:1527/AccountsTest"/>
      <property name="javax.persistence.jdbc.password" value="app"/>
      <property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.ClientDriver"/>
      <property name="javax.persistence.jdbc.user" value="app"/>
      <property name="eclipselink.ddl-generation" value="create-tables"/>
    </properties>
  </persistence-unit>
</persistence> 
```

和 AccountsBean.java：

```
@Stateless
public class AccountsBean implements AccountsBeanRemote {

    @PersistenceContext(unitName = "LoginTest-libPU")
    EntityManager em;

    @Override
    public Account create(String name, String password) {
        ...
    }

    @Override
    public void remove(int id) {
        ...
    }

    @Override
    public boolean checkPassword(int id, String password) {
        ...
    }
} 
```

帐户.java：

```
@Entity
@Table(name = "ACCOUNTS")
public class Account implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;
    private String name;
    private String password;

    public Account() {
    }

    ...other methods 
```

我想我没有正确配置EntityManager，但是我应该把persistence.xml放在哪里？如果我把它放在 EJB 模块中，我也必须把实体放在 EJB 模块中，客户端将无法访问它们。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:42:48.823

首先让我说明一下，我不清楚您为什么会看到这种行为，因为鉴于您在 Glassfish/Java EE 运行时中所做的事情，我不熟悉预期的行为：您正在设置直接联系。相反，在 Java EE 环境中，您需要“容器管理的持久性单元”[这里有一个猜测：容器默认 jta-data-source 为 'sun-appserv-samples']。

因此，让 Java EE 为您管理连接：

1.  在 Glassfish 中，定义一个 ID 为“TestAccountPool”的 JDBC 连接池。您可以从管理面板或通过命令行执行此操作。这指定了您的数据源类名（[在此处查找 Derby](http://docs.oracle.com/cd/E18930_01/html/821-2416/beamw.html#beamx)）、事务隔离级别和配置属性，例如：

    ```
    networkProtocol=jdbc\\:derby
    serverName=localhost
    port=1527  [OR portNumber=1527; I use port, some docs say portNumber]
    databaseName=AccountsTest
    user=app
    password=app 
    ```

2.  使用 JNDI 名称“jdbc/TestAccountData”定义一个引用“TestAccountPool”的 JDBC 资源。

3.  调整您的*persistence.xml*文件以使用 JNDI 名称引用托管数据库连接：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <persistence version="2.0"
            xmlns="http://java.sun.com/xml/ns/persistence"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">

      <persistence-unit name="LoginTest-libPU" transaction-type="JTA">

        <jta-data-source>jdbc/TestAccountData</jta-data-source>

        <class>logintest.lib.Account</class>

        <properties>
          <property name="eclipselink.ddl-generation" value="create-tables"/>
        </properties>
      </persistence-unit>
    </persistence> 
    ```

* * *

### 支持 Java SE 客户端

如果您还想在 Java SE 中使用您的实体，那么：

1.  将您最初定义的内容添加`<persistence-unit> ... </persistence-unit>`到*persistence.xml*文件中。

2.  更改第二个持久性单元的名称；它必须是唯一的。我的工具（带有 glassfish 插件的 eclipse）抱怨多个持久性单元；我忽略了这样的警告。

3.  将事务类型从“JTA”更改为“RESOURCE_LOCAL”，或者只是将其删除：[在 Java EE 容器中，事务类型默认为 JTA（根据规范），在 Java SE 中默认为 RESOURCE_LOCAL](http://www.adam-bien.com/roller/abien/entry/don_t_use_jpa_s)。

4.  在 Java SE 代码中为新的持久性单元使用新名称。

# objective-c - 在 NSTextView 中显示大文件的内容

> ID：15303116
> 
> 赞同：4
> 
> 时间：2013-03-08T20:55:08.310
> 
> 标签：objective-c, performance, macos, file, nstextview

我正在尝试处理大文件，例如 > 1Gb 和 NSTextView。当然，我不想将整个文件加载到内存中，而只加载 4mb 的“可见窗口”。以前有人试过吗？我尝试将 4mb 的文件窗口加载到 NSTextStorage 中，但速度很慢，当用户更改滚动条位置时，加载下一部分数据所花费的时间是显而易见且令人不安的。还有其他方法可以处理这种数据加载吗？

# java - ElementNotVisibleException

> ID：15303124
> 
> 赞同：0
> 
> 时间：2013-03-08T20:55:26.053
> 
> 标签：java, selenium

我正在使用带有 Selenium 2.30 0 的 Java 7、Firefox 并收到以下错误：

`ElementNotVisibleException: Element is not currently visible and so may not be interacted with`

现在这就是我正在做的事情：

```
driver.findElement(By.xpath("//*[@id='Menu1']/li[3]/a")).click();
driver.findElement(By.xpath("//*[@id='Menu1']/li[3]/ul/li[5]/a")).click(); 
```

我正在使用 IntellIJ 在调试模式下运行它，所以我认为这不是时间问题，因为我的速度很慢。第一个 find 元素效果很好，我可以看到带有 5 个项目的菜单下拉到`select / click`. 现在，当我进入第二步时，我得到了一个错误。为了使 WebElement 对驱动程序可见，我需要做些什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T17:57:53.430

在以下两种情况中的一种情况下会引发过时的元素引用异常，第一种比第二种更常见：元素已被完全删除。该元素不再附加到 DOM。

最常见的原因是元素所在的页面已刷新，或者用户已导航到另一个页面。一个不太常见但仍然常见的原因是 JS 库删除了一个元素并将其替换为具有相同 ID 或属性的元素。在这种情况下，尽管替换元素可能看起来相同，但它们是不同的；驱动程序无法确定替换实际上是预期的。

如果元素已被相同的元素替换，一个有用的策略是再次查找该元素。如果您自动执行此操作，请注意您很可能会将测试打开到竞争条件和潜在的脆弱性。例如，给定代码

```
WebElement element = driver.findElement(By.id("example"));
String text = element.getText(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:19:33.950

从下拉列表中选择元素时有时会出现问题。有多种解决方案，请检查是否适合您：

1-使用`clickAt`。

2- 使用`fireevent(focus)`然后单击。有时它会发生背景中的某些元素正在加载，当它被加载时，焦点移动到那里，因此 elementNotVisible 错误。

3-使用`mouseDownRight`。

去看一下。如果您有更多观察结果，请更新问题。

# wso2 - 配置 WSO2ESB 以返回没有分块编码的回复

> ID：15303125
> 
> 赞同：0
> 
> 时间：2013-03-08T20:55:32.260
> 
> 标签：wso2, wso2esb

我已阅读有关添加属性以禁用分块编码的帖子，但无法弄清楚如何将其应用于“前端”而不是被代理的服务。我的服务在 GlassFish 中运行，并且能够接受分块请求并发出分块回复。我在 glassfish 上禁用了分块，但是当客户端（在本例中是使用 WSE3.0 支持安全性的 Microsoft .NET 应用程序）发出指定 HTTP 1.1 的请求时，wso2esb 似乎仍在使用这种编码。

有没有办法强制对这个客户端的回复不使用块编码？

我的代理服务描述如下。

在此先感谢，乔尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:08:00.313

您需要添加以下内容。

```
<property name="FORCE_HTTP_1.0" value="true" scope="axis2" />  <property name="DISABLE_CHUNKING" value="true" scope="axis2" /> 
```

请关注这篇[博文](http://sanjeewamalalgoda.blogspot.com/2012/08/how-to-disable-chunking-wso2-esb-proxy.html)。

# jquery - Jquery - 仅在文本框中第一次按下回车键时的事件

> ID：15303127
> 
> 赞同：2
> 
> 时间：2013-03-08T20:56:04.960
> 
> 标签：jquery

我有一个 TextBox，当用户按下 Enter 键时我发出 AJAX 请求。

```
$('#TextBox1').on('keypress', function(e) {
            var code = (e.keyCode ? e.keyCode : e.which);
            if (code == 13) {
                e.preventDefault();
               // ajax request
            }  
        }); 
```

如何使此事件仅在用户第一次按下回车键时触发？

**[JSFIDDLE](http://jsfiddle.net/4xbUv/)**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T20:57:37.843

~~使用 jQuery 的[`.one()`](http://api.jquery.com/one/)功能。~~

 ~~```
$('#TextBox1').one('keypress', function(e) {
            var code = (e.keyCode ? e.keyCode : e.which);
            if (code == 13) {
                e.preventDefault();
               // ajax request
            }  
        }); 
```~~ 

`.one()`就像`.on()`但它只执行一次。

~~**[jsFiddle 示例](http://jsfiddle.net/j08691/4xbUv/1/)**~~

尝试：

```
var foo = false;
$('#TextBox1').on('keypress', function (e) {
    var code = (e.keyCode ? e.keyCode : e.which);
    if (code == 13 &! foo) {
        e.preventDefault();
        console.log("pressed");
        foo = true;
    }
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/4xbUv/3/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-26T06:20:17.713

我有同样的问题，并通过下面的代码解决了......并且它工作正常。我希望这段代码也能帮助你。

```
var EnterKeyPressed = false;

   $('#TextBox1').keypress(
    function (e) {
        if (e.keyCode == 13 && EnterKeyPressed == false) {
            EnterKeyPressed = true;
            return true;
        }
        if (e.keyCode == 13 && EnterKeyPressed == true) {
            return false;
        }

    }); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2021-01-13T09:52:44.403

我陷入了类似的问题。下面的代码对我有用。

```
var executed = false;
$(document).on("keydown", function () {
  if (executed === false) {
    executeForOnce();
    executed = true;
  }
}); 
```

# php - php正则表达式提取部分文本

> ID：15303130
> 
> 赞同：0
> 
> 时间：2013-03-08T20:56:15.010
> 
> 标签：php, extract

我需要从数据库中提取，其中一列中的记录以这种方式组合：第一个字母（Firstname1）。姓 1，第一个字母（名字 2）。姓氏2,....

这是我尝试解决的示例...

```
 $text2= "T. Toth, M. A. Carlo de Miller, T. Stallone";
     $keywords = preg_split("/,/", "$text2");

     print_r($keywords);

    //I got a result in this way:

    //Array ( [0] => T. Toth [1] => M. A. Carlo de Miller [2] => T. Stallone ) 

    // I want a result of the form :

    //Array ( [0] => T [1] => Toth [2] => M. A. [3] => Carlo de Miller [4] => T  and    so on.... 
```

有人可以知道如何进行？即使它可以在 MYSQL 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:39:18.290

另一种变体：

```
$text2= "T. Toth, M. A. Carlo de Miller, T. Stallone";
$result = array();
foreach (explode(",",$text2) as $row)
{
  $row = explode(".",$row);
  $last = array_pop($row);
  $result[] = join(".",$row).".";
  $result[] = $last;
}
print_r($result); 
```

结果：

```
Array ( [0] => T. [1] => Toth [2] => M. A. [3] => Carlo de Miller [4] => T. [5] => Stallone ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:35:09.700

`preg_split`可能不是正确的功能。试试这个`preg_match_all`：

```
$text2= "T. Toth, M. A. Carlo de Miller, T. Stallone";
preg_match_all("/\w{2,}(?:\s\w{2,})*|\w\.(?:\s\w\.)*/i", $text2, $matches);
print_r($matches[0]); 
```

这会挑选出姓名和首字母缩写，同时忽略前导/尾随空格。

首先匹配全名：`\w{2,}(?:\s\w{2,})*`

第二场比赛首字母：`\w\.(?:\s\w\.)*`

结果是：

```
Array ( [0] => Array ( [0] => T. [1] => Toth [2] => M. A. [3] => Carlo de Miller [4] => T. [5] => Stallone ) ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T21:35:15.887

我认为这个正则表达式应该或多或少地做你想要的：

```
/
  (?:^|,)           # Start of subject or comma
  \s*               # Optional white space
  ((?:[a-z]\.\s*)+) # At least one occurrence of alpha followed by dot
  \s*               # Consume trailing whitespace
/ix 
```

当与`PREG_SPLIT_NO_EMPTY`和`PREG_SPLIT_DELIM_CAPTURE`捕获标志结合使用时，此表达式将获得您想要的结果，唯一需要注意的是它还将捕获一些前导/尾随空格。我看不到避免这种情况的方法，并且在您使用结果时可以轻松地将其修剪掉。

```
$str = 'T. Toth, M. A. Carlo de Miller, T. Stallone';
$expr = '/(?:^|,)\s*((?:[a-z]\.\s*)+)\s*/i';
$flags = PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE;

$keywords = preg_split($expr, $str, -1, $flags);

print_r($keywords); 
```

[看到它工作](http://codepad.org/v5SEg1fL)

# jquery - 带有导航的 Twitter Bootstrap 按钮下拉菜单不起作用

> ID：15303135
> 
> 赞同：0
> 
> 时间：2013-03-08T20:56:27.200
> 
> 标签：jquery, twitter-bootstrap

我正在为按钮创建一个下拉菜单，当导航栏下拉菜单存在时，我无法让下拉菜单工作（[http://jsfiddle.net/8XTkq/1/](http://jsfiddle.net/8XTkq/1/)）

我已经使用 twitter bootstrap 页面中的示例（复制和粘贴）进行了尝试，但它不想工作。我也用链接尝试过，但也没有用...

```
<div class="btn-group">
  <a class="btn btn-primary" href="#"><i class="icon-user icon-white"></i> User</a>
  <a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#"><span class="caret"></span></a>
  <ul class="dropdown-menu">
<li><a href="#"><i class="icon-pencil"></i> Edit</a></li>
<li><a href="#"><i class="icon-trash"></i> Delete</a></li>
<li><a href="#"><i class="icon-ban-circle"></i> Ban</a></li>
<li class="divider"></li>
<li><a href="#"><i class="i"></i> Make admin</a></li>
  </ul>
</div> 
```

我会错过什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:44:17.490

在 JSFiddle 中使用外部资源时，请将它们包含在左侧的“外部资源”面板中，而不是直接包含在代码中。此外，将 CSS 和 JS 放入相应的框中。一旦我这样做了，一切都奏效了。JSFiddle：[http](http://bit.ly/13KmiJu) ://bit.ly/13KmiJu （对不起，我不允许我包含没有代码的直接 JSFiddle 链接）

# sql - 在多个表中递归的 Sql server 查询

> ID：15303137
> 
> 赞同：1
> 
> 时间：2013-03-08T20:56:33.197
> 
> 标签：sql, database, sql-server-2008

我的表结构如下，示例数据如下名称：用户

```
User   Region
Sam    USA    
Meyer  NA    
Ying   Japan    
Yang   Asia 
```

我还有另一张桌子，上面有地区和国家

名称：地区

```
 Region Country         RegionList    
        USA     America            
        NA       NULL          USA            
        NA      Canada            
        NA      Mexico            
        Japan   Japan
        Asia     NULL         Central        
        Asia      NULL         East        
        Central  India        
        East     Dubai
        Central  Japan 
```

你如何编写一个 SQL 服务器查询来列出他/她代表的每个用户和相应的国家？

像：

```
Sam   America
Meyer America
Meyer Canda
Meyer Mexico
Ying  Japan
Yang  Japan
Yang  India
Yang  Dubai 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T21:06:36.963

如果您的 Region 表可能有无限多个级别，则可以使用[Common Table Expression](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)。请参阅[使用公用表表达式的递归查询。](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.105%29.aspx)

```
WITH UserRegions (username, region, country)
AS
(
    -- Anchor member definition
    SELECT u.[user] AS username, r.regionlist AS region, r.country
    FROM [User] u
    JOIN Region r
        ON u.Region = r.Region
    UNION ALL
    -- Recursive member definition
    SELECT ur.username, r.regionlist AS region, r.country
    FROM Region r
    INNER JOIN UserRegions AS ur
        ON r.Region = ur.Region
)
-- Statement that executes the CTE
SELECT username, country
FROM UserRegions
WHERE country IS NOT NULL
ORDER BY username 
```

[http://sqlfiddle.com/#!3/ca9de/8](http://sqlfiddle.com/#!3/ca9de/8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:59:07.787

您可以使用 JOIN 来获得您想要的结果

```
SELECT user, isNull(Country,RegionList) Country
FROM user
    JOIN region ON users.region = region.region
ORDER BY user, Country 
```

如果您想返回所有用户，即使他们没有任何国家，那么您可以使用 LEFT OUTER JOIN

```
SELECT user, isNull(isNull(Country,RegionList),'No countries') Country
FROM user
    LEFT OUTER JOIN region ON users.region = region.region
ORDER BY user, Country 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-08T21:00:50.327

根据您提供的显式架构和示例数据：

```
select
user, isnull(region.country, r2.country) as Country 
from 
user
left join 
region 
on user.region = region.region
left join
region r2
on r2.region = region.regionlist 
```

# android - Android：更改活动语言

> ID：15303140
> 
> 赞同：2
> 
> 时间：2013-03-08T20:56:45.033
> 
> 标签：android, localization

我在更改应用程序的一项活动中的所有文本时遇到问题...我正在使用此代码更改语言：

```
else if (LANGUAGE.equals("Russian"))
        {
            Resources res = this.getResources();
            // Change locale settings in the app.
            DisplayMetrics dm = res.getDisplayMetrics();
            android.content.res.Configuration conf = res.getConfiguration();
            conf.locale = new Locale("ru-rRU");
            res.updateConfiguration(conf, dm);
} 
```

在 AndroidManifest 我添加了这个字符串：

```
<activity
        android:name="com.vladimir.expert_suise.ThirdScreen"
        android:label="@string/title_activity_third_screen" 
        android:configChanges="locale">
    </activity> 
```

当我在手机上启动我的应用程序时，语言没有改变=（这里是屏幕截图 -![我需要更改语言的屏幕](../Images/dbf4cc36e6d7bd9afc1430e053a1db46.png)

那么我的代码有什么问题？（

PS 我还创建了 values-ru-rRU 文件夹并在那里插入了翻译后的 string.xml 文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-03-12T11:35:03.907

要仅设置一项活动的语言，而不考虑**应用程序**语言（区域设置），可以使用以下代码

```
public override fun attachBaseContext(context: Context) {
    // pass desired language
    super.attachBaseContext(LocaleHelper.onAttach(context, "hi"));
} 
```

**LocaleHelper.java**

```
public class LocaleHelper {

public static Context onAttach(Context context, String defaultLanguage) {
    return setLocale(context, defaultLanguage);
}

public static Context setLocale(Context context, String language) {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
        return updateResources(context, language);
    }

    return updateResourcesLegacy(context, language);
}

@TargetApi(Build.VERSION_CODES.N)
private static Context updateResources(Context context, String language) {
    Locale locale = new Locale(language);
    Locale.setDefault(locale);

    Configuration configuration = context.getResources().getConfiguration();
    configuration.setLocale(locale);

    return context.createConfigurationContext(configuration);
}

@SuppressWarnings("deprecation")
private static Context updateResourcesLegacy(Context context, String language) {
    Locale locale = new Locale(language);
    Locale.setDefault(locale);

    Resources resources = context.getResources();

    Configuration configuration = resources.getConfiguration();
    configuration.locale = locale;

    resources.updateConfiguration(configuration, resources.getDisplayMetrics());

    return context;
}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:15:44.360

首先，将 values-ru-rRU 更改为 values-ru。

您可以使用此方法获取资源

```
public Resources getCustomResource(String lang){
        Locale locale = new Locale(lang); 
        Resources standardResources = activity.getResources();
        AssetManager assets = standardResources.getAssets();
        DisplayMetrics metrics = standardResources.getDisplayMetrics();
        Configuration config = new Configuration(standardResources.getConfiguration());
        config.locale = locale;
        Resources res = new Resources(assets, metrics, config);
        return res;
    } 
```

您可以像这样在代码中使用它

```
else if (LANGUAGE.equals("Russian"))
    {
        Resources res = getCustomResource("ru"); 
```

}

希望这对你有帮助。

# javascript - 如何保存和删除画布状态？

> ID：15303142
> 
> 赞同：2
> 
> 时间：2013-03-08T20:56:59.523
> 
> 标签：javascript, canvas, resize

当使用 jQuery 的 resizable() 函数调整它的大小时，我想给一个包含画布的 div 和可视控制器。

我的意思是说“视觉控制器”这 8 个黑色方块，当您单击允许您调整图像大小的图像时出现，如下例所示：

![带有视觉控制器的图像](../Images/50082e319416723e317ad00e0175a546.png)

我编写了以下函数，在 div 周围绘制 8 个正方形。单击 div 时，它会给出目标视觉外观。再次单击 div 时，它会删除 8 平方并删除 resizable() 函数。它工作正常**，但是**当调整 div 的大小并再次单击它以删除 8 个正方形时，它不会删除它们。

我需要在单击之前保存画布状态，然后再应用绘图并在再次单击画布时恢复它。

```
$(document).on("click", "canvas", function(eg) {
    var thisCanvas = $(this).attr("id");
    var theCanvas = document.getElementById(thisCanvas);
    var ctx = theCanvas.getContext("2d");
    canvasSelected(thisCanvas, ctx);
}); 
```

当用户点击画布时，它会触发以下函数：

```
function canvasSelected(theCanvas, ctx){
    var ctxWidth = $("#"+theCanvas).width();
    var ctxHeight = $("#"+theCanvas).height();
    if($("#"+theCanvas).hasClass("bordering")){
        ctx.restore();
        $("#"+theCanvas).addClass("defaultBorder");
        $("#"+theCanvas).removeClass("bordering");
        ctx.beginPath();
        ctx.clearRect(0,0,6,6);
        ctx.clearRect(ctxWidth- 6,0,6,6);
        ctx.clearRect(ctxWidth/2,0,6,6);
        ctx.clearRect(0,ctxHeight- 6,6,6);
        ctx.clearRect(ctxWidth- 6,ctxHeight- 6,6,6);
        ctx.clearRect(ctxWidth/2,ctxHeight- 6,6,6);
        ctx.clearRect(0,ctxHeight/2,6,6);
        ctx.clearRect(ctxWidth- 6,ctxHeight/2,6,6);
        $("#"+theCanvas).resizable("option", "disabled", true);
    }else{
        ctx.save();
        $("#"+theCanvas).removeClass("defaultBorder");
        $("#"+theCanvas).addClass("bordering");

        ctx.beginPath();
        ctx.fillStyle = "black";
        ctx.fillRect(0,0,6,6);
        ctx.fill();
        ctx.fillRect(ctxWidth- 6,0,6,6);
        ctx.fill();
        ctx.fillRect(ctxWidth/2,0,6,6);
        ctx.fill();
        // bottom rects..
        ctx.fillRect(0,ctxHeight- 6,6,6);
        ctx.fill();
        ctx.fillRect(ctxWidth- 6,ctxHeight- 6,6,6);
        ctx.fill();
        ctx.fillRect(ctxWidth/2,ctxHeight- 6,6,6);
        ctx.fill();
        // middle rects
        ctx.fillRect(0,ctxHeight/2,6,6);
        ctx.fill();
        ctx.fillRect(ctxWidth- 6,ctxHeight/2,6,6);
        ctx.fill();
        $("#"+theCanvas).resizable();
        $("#"+theCanvas).resizable("option", "disabled", false);
    }
} 
```

这是[jsfiddle](http://jsfiddle.net/DevelopSmith/hUPVQ/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T03:55:33.617

您的问题是如何通过`resize()`. 画布的大小正在改变，但它不会改变坐标系的大小。550x350 的初始宽度和高度保持不变。

**[现场演示](http://jsfiddle.net/loktar/hUPVQ/4/)**

我所做的只是将以下内容添加到您的`canvasSelected`活动中，

```
// get the canvas element
var canvas = document.getElementById(theCanvas);
// change the pixel dimensions to match the css width and height.
canvas.width = ctxWidth;
canvas.height = ctxHeight; 
```

这确保了像素尺寸也将被更新。请记住，使用 CSS 重新调整画布元素的大小通常是个坏主意，因为您会得到意想不到的结果。

但是，以上将导致您必须重新绘制图形。所以另一种方法就是跟踪画布的原始宽度和高度，并像下面的小提琴一样使用这些值。

**[现场演示 2](http://jsfiddle.net/loktar/hUPVQ/3/)**

在此示例中，我只是将高度和宽度设为全局，因此它们将始终被引用，但是我想您可以使用提供的演示来想出一种更好的方法来跟踪元素的原始高度和宽度。

另请注意，jQuery 的`width()`and与在 canvas 元素上`height()`调用`width`and不同。`height`jQuery 的方法使用其样式属性重新调整元素的大小。

# regex - Vim：删除匹配的大括号和大括号中的第一个单词

> ID：15303143
> 
> 赞同：1
> 
> 时间：2013-03-08T20:57:03.293
> 
> 标签：regex, vim, latex

例如，改变

> 文本 12345 {\color{red}文本 123 \ref{label} 567
> 
> 第1234章 567

至

> 文本 12345 文本 123 \ref{标签} 567
> 
> 1234 567

vim中应该做什么样的操作？

我的目标是找到所有模式`{\color{red}` 并删除模式和模式的匹配大括号`}`，同时将文本保留在两者之间。模式`{\color{red}`可以在行中的任何位置（不一定在行的开头）。之间的文本`{\color{red} ...}`可以有多行，如上所示。

非常感谢你的帮助。

**编辑**：我只是想办法做到这一点，但可能效率不够。

```
:g/\\color{red}/norm ndiBvaBpd% 
```

`g`：全局
`/\\color{red}`：匹配模式
`/norm`：普通模式命令
`n`：将光标从光标转发到下一个匹配模式。但是如果模式在行的开头，它可能会找不到它。
`diB`：从光标处删除内部块
`vaB`：选择光标周围的块
`p`：放置到选定的块
`d%`：删除`\color{red}`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T21:02:32.973

没明白你的真正意思。有很多方法可以做到这一点。

```
{\color{red}text 123 \ref{label} 567}
^
|cursor 
```

你可以这样做： `d``f``}``$``x`

如果你安装了环绕.vim，移除周围的大括号会更容易。( `ds{`)

**编辑**

对于问题更新：

打开你的文件，然后输入：

```
:g#{\\color{red}#normal 0df}$x 
```

希望命令做你想做的事。

**EDIT II**基于问题更新

如果您的目标文本对象跨越线，您可以试试这个：

```
g/{\\color{red}/normal 0f{mz%x`zxdf} 
```

如果您的目标模式跨越多条线（不仅是一/两条，可能很多），则上述线有效。但是语法必须正确，这意味着`{ , }` **必须成对**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T00:32:02.210

我会为此使用正则表达式替换：

`%s/\v\{\\color\{\w+\}(.*)} ?$/\1`

`\v`非常神奇（理智的正则表达式）

`{\\color\{\w+\}`颜色的东西

`(.*)`捕获要保存的文本

`} ?$`闭合奶嘴支架和行尾的可选空间

`/\1`用第一个捕获替换整个东西，这是颜色标签 BS 之间的东西

对于您编辑的示例，您可以使用，`\_.`而不是`.`因为它包含换行符。

`%s/\v\{\\color\{\w+\}(\_.*)}/\1`

# php - 仅通过电子邮件地址为访问者提供真正快速的内容编辑访问权限，还是有更简单的方法？

> ID：15303150
> 
> 赞同：1
> 
> 时间：2013-03-08T20:57:34.020
> 
> 标签：php, codeigniter, email-verification

**背景：**我和一群人建立了一个网站，这个团队有点像 Crunchbase，但针对的是另一个行业。访问者可以添加他们的公司，更新他们公司的资料，诸如此类。所有更改都会发送到后端管理员审批面板，管理员可以在此验证更改内容的准确性，然后再在网站上发布。

**我需要帮助的改进：**我想让人们更容易编辑内容。现在，您至少必须创建一个用户名和登录名才能编辑内容。我想让人们只输入他们的电子邮件地址。当他们这样做时，我们记录提交的电子邮件地址，将其与发送电子邮件的特定 IP 地址相关联，然后发送用户和电子邮件以验证他们确实是这封电子邮件的所有者。一旦他们验证，他们就可以立即开始在网站上进行编辑，我们会存储一个 cookie，让他们在该 IP 地址上登录六个月左右。

当他们移动到新的计算机或 IP 时，他们只需要输入他们的电子邮件并重新验证，即使在这种情况下，一旦他们验证我们可以让他们通过 cookie 保持更长的登录时间。

似乎是一个很好的解决方案，可以使它成为一个简单的过程。

**有人知道我用这种方法会遇到什么更好或潜在的问题吗？任何帮助将不胜感激！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:24:51.137

当用户提交新配置文件时，您可以创建一个随机的唯一字符串链接到该特定配置文件，然后将其通过电子邮件发送到他们指定的电子邮件。因此，如果他们需要编辑内容，只需单击电子邮件中的链接即可进行编辑。与 craigslist 类似的方法。但是，如果他们的电子邮件被泄露，入侵者也可以单击该链接并更改该信息。您还应该设置某种蛮力检测，以防止人们敲打随机字符串试图找到一个很好的链接来弄乱内容。祝你好运！

# sql - 删除记录时如何忽略错误

> ID：15303159
> 
> 赞同：1
> 
> 时间：2013-03-08T20:57:47.127
> 
> 标签：sql, sql-server, sql-server-2008

我正在测试大量模式更改以升级我们的数据库以使用我们拥有的最新版本的打包产品运行。

此时我对数据库中包含的数据不感兴趣，只对模式（即表、视图、约束、键、存储过程等）感兴趣。

我的测试需要运行脚本、解决错误、重新运行脚本。如果我想重新运行脚本，我需要先恢复数据库以使其恢复到已知状态。恢复数据库非常耗时，因为它有很多数据。我想“瘦身”数据库并删除尽可能多的数据。这样可以更快地恢复数据库并重新运行我的脚本

当我尝试从许多表中删除记录（“从表名中删除”）时，我遇到约束错误并且命令停止。

有没有办法让命令继续，实际上，删除表中没有约束问题的所有记录？换句话说，我希望该命令忽略错误并继续删除它可以删除的所有记录。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:21:04.240

上面的拜伦提出了一个很好的观点；您可以使用 ALTER TABLE 命令禁用 FOREIGN KEY 或 CHECK 约束：

```
ALTER TABLE TableName NOCHECK CONSTRAINT ALL 
```

然后做你的工作，完成后，

```
ALTER TABLE TableName CHECK CONSTRAINT ALL 
```

重新启用约束。 *但是要小心：*如果您在重新启用数据后使数据处于违反约束的不一致状态，则将来的更新可能会由于约束错误而失败。

资料来源：
[http ://weblogs.sqlteam.com/joew/archive/2008/10/01/60719.aspx](http://weblogs.sqlteam.com/joew/archive/2008/10/01/60719.aspx)

[http://technet.microsoft.com/en-us/library/ms190273.aspx](http://technet.microsoft.com/en-us/library/ms190273.aspx)

# java - 如何在不使用 .setText(Html.FromHtml) 的情况下使 TextView 中的链接“a href=" 可点击

> ID：15303162
> 
> 赞同：0
> 
> 时间：2013-03-08T20:57:51.630
> 
> 标签：java, android, html, xml, xml-parsing

我正在做 rss 阅读器，我需要你的帮助。我正在解析一个 xml 文件并获取标签的下一个内容

```
<p>
    <img class="alignright size-full wp-image-115203" alt="10 мероприятий, которые можно посетить в марте" src="http://ain.ua/wp-content/uploads/2013/03/secr2011-nov1-300x200.jpg" width="300" height="200" title="10 мероприятий, которые можно посетить в марте"
    />Предлагаем вашему вниманию небольшой список ИТ мероприятий марта, которые пройдут в Украине. В нашем
    <a href="http://ain.ua/events">календаре мероприятий</a>, вы можете найти еще больше мероприятий, которые мы рекомендуем вам к посещению.</p>
<ol>
    <li>
        <a href="http://ain.ua/event/seminar-kpi-motivaciya-sistema-oplaty-po-rezultatu">Семинар “KPI-Мотивация. Система оплаты по результату”&lt;/a>
    </li>
    <li>
        <a href="http://ain.ua/2013/03/04/114970">Бесплатный семинар об организации системы внутренних коммуникаций и мотивации сотрудников</a>
    </li>
    <li>
        <a href="http://ain.ua/event/targetirovaniya-reklamnyx-kampanij-po-celevym-auditoriyam">Круглый стол «Возможности таргетирования рекламных кампаний по целевым аудиториям»</a>
    </li>
    <li>
        <a href="http://ain.ua/event/kak-zastavit-sajt-prodavat-bolshe">Бесплатный вебинар «Как заставить сайт продавать больше?»</a>
    </li>
    <li>
        <a href="http://ain.ua/event/6-j-seminar-effektivnyj-internet-marketing-dlya-biznesa">6-й семинар «Эффективный интернет-маркетинг для бизнеса»</a>
    </li>
    <li>
        <a href="http://ain.ua/event/internet-marketing-2013">Всеукраинский Форум «Дни Интернет-маркетинга» 2013</a>
    </li> 
```

我需要所有这些链接都可以点击并且名称为 beetwen name_of_link

我有下一个代码，解析所需的 xml 文件

```
 ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

    String xml = XMLfunctions.getXML(resourceURL);
    Document doc = XMLfunctions.XMLfromString(xml);
    NodeList nodes = doc.getElementsByTagName("item");

    for (int i = 0; i < nodes.getLength(); i++) {                           
        HashMap<String, String> map = new HashMap<String, String>();    
        Element e = (Element)nodes.item(i);
        map.put(KEY_TITLE, XMLfunctions.getValue(e, KEY_TITLE));
        map.put(KEY_DATE_TIME, "Date: "+XMLfunctions.formatDate(XMLfunctions.getValue(e, KEY_DATE_TIME)));

        map.put(KEY_DESC, Html.fromHtml(XMLfunctions.getValue(e, KEY_DESC),null,null).toString());
        map.put(KEY_LINK, Html.fromHtml(XMLfunctions.getValue(e, KEY_LINK)).toString());
        mylist.add(map);            
    }       

    ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.main, 
                    new String[] { "title","pubDate", "description","link" }, 
                    new int[] { R.id.item_title, R.id.item_pubdate, R.id.item_subtitle, R.id.item_link });

    setListAdapter(adapter); 
```

我的问题是：如何解析和转换输出中的数据，我将获得带有可点击链接的普通文本，就像在这个源[http://feeds.feedburner.com/ainua?format=xml](http://feeds.feedburner.com/ainua?format=xml)

如果这篇文章已经存在，我很抱歉浪费你的时间，但不幸的是，我不知道如何找到它。感谢您提供任何帮助，因为我花了很多时间尝试解决此任务，但我不需要寻找的地方。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:07:20.013

如果您不想使用`HTML.fromHTML()`，则需要自己解析 HTML，虽然您可以使用 RegEx 轻松获取`href`链接，但您仍然需要处理图像标签、列表等，因此 RegEx 不是真正的答案。这个问题应该有帮助：[Parse HTML in Android](https://stackoverflow.com/q/2188049/1267661)

如果您决定尝试使用 RegEx 解析 HTML，请阅读：[RegEx match open tags except XHTML self-co҉ntained tags](https://stackoverflow.com/a/1732454/1267661)。它解释了为什么 RegEx 不能这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:25:40.260

我会尝试为 ListView 实现我自己的适配器类，并修改为适配器对应方法中的每一行创建的视图。

# jquery - 默认输入 attr 'checked'

> ID：15303171
> 
> 赞同：0
> 
> 时间：2013-03-08T20:58:17.833
> 
> 标签：jquery, html

我正在开发一种模式，该模式具有启用支付网关的复选框。单击复选框时，详细信息 div 会滑出，并设置为如果设置了值，则默认情况下会展开详细信息 div，但是当展开详细信息 div 时，我无法默认选中复选框。在这种情况下，jquery 中的 .attr('clicked') 方法似乎有点挑剔。

这是我的jQuery：

```
$("#setting-public-print").live("click", function (e) {

if ($("#setting-public-print").attr('checked'))
{
    $('.public-print-settings-div').fadeIn('fast');
    $('.pay-to-print').fadeIn('fast');
}
else
{
    $('.public-print-settings-div').fadeOut('fast');
    $('.pay-to-print').fadeOut('fast');

}

var paymentGateway = isNumberKey();

if ($(paymentGateway).length > 0) {
    $("#setting-public-print").attr('checked', 'checked');
}
else {
    $("#setting-public-print").removeAttr('checked');
}

});
});

function isNumberKey(evt)
{
 var charCode = (evt.which) ? evt.which : event.keyCode;
 if (charCode != 46 && charCode > 31 
   && (charCode < 48 || charCode > 57))
    return false;

 return true;
} 
```

和相应的html：

```
<p><input class="chkbox" type="checkbox" name="checkbox[]" id='setting-public-print'> Enable Payment Gateway</p>
    <div class='public-print-settings-div' style=''>
    <div class ='pay-to-print'>
            <%if !@currency_codes.nil?%>
                <%if @currency_codes.count > 0%>
                <div class="control-group utopia-chosen-label" style="width:220px !important;">
                    <h4 style='color:black;'>Select Currency:</h4>
                  <select data-placeholder="Choose a Currency..." class="chzn-select" tabindex="4" id='selected-currency'>
                          <option value=""></option> 
                                <%@currency_codes.each do |b|%>
                                <option value="<%=b%>"><%=b%></option>
                                <%end%>
                        </select>
                </div>
                <%end%>
            <%end%>
             <p><span id='email-customize-label'>Price per page:</span>
             <input id="selected-price" onkeypress="return isNumberKey(event)" type="text" name="selected-price" style='width:50px;'>
        </p> 
```

任何人都可以对这个复选框问题有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:00:56.360

因此，如果我理解正确，这是复选框：

```
<input class="chkbox" type="checkbox" name="checkbox[]" id='setting-public-print'> Enable Payment Gateway 
```

你希望它默认检查吗？

为什么不这样做呢？

```
<input checked class="chkbox" type="checkbox" name="checkbox[]" id='setting-public-print'> Enable Payment Gateway
       ^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:01:13.873

你想用`.prop()`

```
if ($("#setting-public-print").prop('checked')) 
```

# html - 我可以使用 html 或 css 进行图像方向检测吗？

> ID：15303172
> 
> 赞同：13
> 
> 时间：2013-03-08T20:58:19.160
> 
> 标签：html, css

如果我在 html 页面上有图像，我可以使用 html 或 css 执行以下操作吗？

当图像的宽度大于高度时，将高度设置为固定值并自动拉伸宽度；当高度大于宽度时，设置宽度和自动拉伸高度？

非常感谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-08T21:06:27.413

不，这是不可能的——条件语句不能用 HTML 或 CSS 处理，但你必须用 JS 来处理。

一个例子是计算（并且可能存储以备将来使用）图像的纵横比以确定它是处于横向还是纵向模式：

```
$(document).ready(function() {
    $("img").each(function() {
        // Calculate aspect ratio and store it in HTML data- attribute
        var aspectRatio = $(this).width()/$(this).height();
        $(this).data("aspect-ratio", aspectRatio);

        // Conditional statement
        if(aspectRatio > 1) {
            // Image is landscape
            $(this).css({
                width: "100%",
                height: "auto"
            });
        } else if (aspectRatio < 1) {
            // Image is portrait
            $(this).css({
                maxWidth: "100%"
            });
        } else {
            // Image is square
            $(this).css({
                maxWidth: "100%",
                height: "auto"
            });            
        }
    });
}); 
```

在这里看小提琴 - [http://jsfiddle.net/teddyrised/PkgJG/](http://jsfiddle.net/teddyrised/PkgJG/)

* * *

**2019 年更新**：随着 ES6 成为事实上的标准，上面的 jQuery 代码可以很容易地重构为 vanilla JS：

```
const images = document.querySelectorAll('img');

Array.from(images).forEach(image => {
  image.addEventListener('load', () => fitImage(image));

  if (image.complete && image.naturalWidth !== 0)
    fitImage(image);
});

function fitImage(image) {
  const aspectRatio = image.naturalWidth / image.naturalHeight;

  // If image is landscape
  if (aspectRatio > 1) {
    image.style.width = '100%';
    image.style.height = 'auto';
  }

  // If image is portrait
  else if (aspectRatio < 1) {
    image.style.width = 'auto';
    image.style.maxHeight = '100%';
  }

  // Otherwise, image is square
  else {
    image.style.maxWidth = '100%';
    image.style.height = 'auto';
  }
}
```

```
div.wrapper {
    background-color: #999;
    border: 1px solid #333;
    float: left;
    margin: 10px;
    width: 200px;
    height: 250px;
}
```

```
<div class="wrapper">
    <img src="http://placehold.it/500x350" />
</div>
<div class="wrapper">
    <img src="http://placehold.it/350x500" />
</div>
<div class="wrapper">
    <img src="http://placehold.it/500x500" />
</div>
```

但是，如果您只想确保图像适合任意大小的容器，则使用简单的 CSS 即可：

```
div.wrapper {
    background-color: #999;
    border: 1px solid #333;
    float: left;
    margin: 10px;
    width: 400px;
    height: 400px;
}

div.wrapper img {
  width: auto
  height: auto;
  max-width: 100%;
  max-height: 100%;
}
```

```
<div class="wrapper">
    <img src="http://placehold.it/500x350" />
</div>
<div class="wrapper">
    <img src="http://placehold.it/350x500" />
</div>
<div class="wrapper">
    <img src="http://placehold.it/500x500" />
</div>
```

# mysql - 如何从单个表中选择当前日期和上一个日期？

> ID：15303174
> 
> 赞同：1
> 
> 时间：2013-03-08T20:58:29.043
> 
> 标签：mysql, sql

我有一个非常简单的表：

```
mysql> desc stats;
+-------------+-------------+------+-----+---------+----------------+
| Field       | Type        | Null | Key | Default | Extra          |
+-------------+-------------+------+-----+---------+----------------+
| entry_id    | int(11)     | NO   | PRI | NULL    | auto_increment | 
| entry_date  | date        | NO   |     | NULL    |                | 
| show_name   | varchar(40) | NO   |     | NULL    |                | 
| month_total | int(11)     | NO   |     | NULL    |                | 
+-------------+-------------+------+-----+---------+----------------+ 
```

我想要一个选择语句，它将在单个语句中为我提供当前日期的结果以及前一天的数据，例如，结果将类似于

```
show_name month_total(Current day) monthly_total(Previous Day) 
```

有没有一种简单的方法可以在单个 sql 语句中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:28:20.707

如果今天是指今天，请在您的选择语句中使用 SUBDATE 和 CURDATE 函数和子查询：

```
SELECT 
    show_name, 
    month_total AS current_day_total, 
    (SELECT month_total FROM stats WHERE entry_date = SUBDATE(CURDATE(), 1) LIMIT 1) AS previous_day_total
FROM stats
WHERE entry_date = CURDATE(); 
```

见[小提琴](http://www.sqlfiddle.com/#!2/304ed/2/0)。

如果您每天都想要这个，而不仅仅是当天，请加入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:13:48.660

**更新：**将 entry_date 添加到输出中是有意义的

```
SELECT c.show_name, 
       c.month_total current_month_total, 
       p.month_total prev_month_total
  FROM stats c INNER JOIN
       stats p ON p.entry_date = c.entry_date - INTERVAL 1 DAY 
```

假设您有示例数据，例如

```
+----------+------------+-----------+-------------+
| entry_id | entry_date | show_name | month_total |
+----------+------------+-----------+-------------+
|        1 | 2013-03-07 | Name1     |          10 |
|        2 | 2013-03-08 | Name2     |          20 |
|        3 | 2013-03-09 | Name3     |          30 |
|        4 | 2013-03-10 | Name4     |          40 |
+----------+------------+-----------+-------------+ 
```

查询的输出是

```
+-----------+------------+---------------------+------------------+
| show_name | entry_date | current_month_total | prev_month_total |
+-----------+------------+---------------------+------------------+
| Name2     | 2013-03-08 |                  20 |               10 |
| Name3     | 2013-03-09 |                  30 |               20 |
| Name4     | 2013-03-10 |                  40 |               30 |
+-----------+------------+---------------------+------------------+ 
```

**这是一个[sqlfiddle 示例](http://sqlfiddle.com/#!2/19e1a/2)**

如果您需要特定日期或日期间隔的输出，只需添加一个`WHERE`子句。
今天

```
...
WHERE c.entry_date = CURDATE(); 
```

从 03/09 到 03/10

```
...
WHERE c.entry_date BETWEEN '2013-03-09' AND '2013-03-10' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T22:40:24.150

假设这个测试数据：

```
+----------+------------+-----------+-------------+
| entry_id | entry_date | show_name | month_total |
| 1        | 2013-03-07 | test1     |           1 |
| 2        | 2013-03-07 | test2     |          11 |
| 3        | 2013-03-08 | test1     |           2 |
| 4        | 2013-03-08 | test2     |          22 |
| 5        | 2013-03-08 | test3     |         222 |
| 6        | 2013-03-09 | test1     |           3 |
| 7        | 2013-03-09 | test2     |          33 |
| 8        | 2013-03-07 | test1     |           5 |
+----------+------------+-----------+-------------+ 
```

* * *

如果您每天有多个不同名称的条目，那么这应该很好用：

```
SELECT c.show_name, c.entry_date, 
       c.month_total current_day_month_total, 
       IFNULL(p.month_total,0) previous_day_month_total
  FROM test.stats c LEFT JOIN test.stats p
       ON p.entry_date = c.entry_date - INTERVAL 1 DAY
          AND c.show_name = p.show_name
  GROUP BY c.entry_date, c.show_name;

+-----------+------------+-------------------------+--------------------------+
| show_name | entry_date | current_day_month_total | previous_day_month_total |
| test1     | 2013-03-07 |                       1 |                        0 |
| test2     | 2013-03-07 |                      11 |                        0 |
| test1     | 2013-03-08 |                       2 |                        1 |
| test2     | 2013-03-08 |                      22 |                       11 |
| test3     | 2013-03-08 |                     222 |                        0 |
| test1     | 2013-03-09 |                       3 |                        2 |
| test2     | 2013-03-09 |                      33 |                       22 |
+-----------+------------+-------------------------+--------------------------+ 
```

* * *

如果每天甚至有多个条目和名称，那么这将组合它们的值：（请参阅结果表的第一行 test1 - id1:1 + id8:5 = 6）

```
SELECT c.show_name, c.entry_date,
       c.month_total current_day_month_total, 
       IFNULL(p.month_total,0) previous_day_month_total
  FROM (SELECT show_name, entry_date, SUM(month_total) month_total
        FROM test.stats
        GROUP BY entry_date, show_name) c
     LEFT JOIN
       (SELECT show_name, entry_date, SUM(month_total) month_total
        FROM test.stats
        GROUP BY entry_date, show_name) p
     ON p.entry_date = c.entry_date - INTERVAL 1 DAY
     AND c.show_name = p.show_name;

+-----------+------------+-------------------------+--------------------------+
| show_name | entry_date | current_day_month_total | previous_day_month_total |
| test1     | 2013-03-07 |                       6 |                        0 |
| test2     | 2013-03-07 |                      11 |                        0 |
| test1     | 2013-03-08 |                       2 |                        6 |
| test2     | 2013-03-08 |                      22 |                       11 |
| test3     | 2013-03-08 |                     222 |                        0 |
| test1     | 2013-03-09 |                       3 |                        2 |
| test2     | 2013-03-09 |                      33 |                       22 |
+-----------+------------+-------------------------+--------------------------+ 
```

# java - 为什么 java.lang.reflect.Modifier 有一个公共构造函数？

> ID：15303175
> 
> 赞同：1
> 
> 时间：2013-03-08T20:58:32.143
> 
> 标签：java, reflection

我正在学习 java 反射，我很想知道 java.lang.reflect.Modifier 对公共构造函数有什么用处。java 文档没有给出任何描述或使用它，并且该类只有静态方法和常量。

编辑：添加了一些测试代码。

```
import java.lang.reflect.*;

  public class TestModifier {
        Modifier modifier = new Modifier(); // Compiles fine.
       // Math math = new Math(); // Won't compile.  Math() has private access.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:27:38.487

构造函数存在并且它存在于[javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Modifier.html#Modifier%28%29)中，尽管不存在任何信息。[我在GNU classpath](http://www.gnu.org/software/classpath/)的源代码注释中找到了一些关于它的信息，我引用了一个项目：

> (GNU Classpath, Essential Libraries for Java) 是一个 GNU 项目，用于创建免费的核心类库，用于 Java 编程语言的虚拟机和编译器。

在他们[的 Modifier 类的源代码中，](http://developer.classpath.org/doc/java/lang/reflect/Modifier-source.html)您可以找到构造函数的以下非 javadoc 注释：

> 这个构造函数真的不应该在这里......这个类没有实例方法或变量，所以实例化毫无价值。但是，此功能在 1.1 规范中，因此添加它是为了完整性。

我不知道这是否完全准确，因为我只能访问 Java 1.3.1 规范，并且在它的[反射模型部分](http://docs.oracle.com/javase/1.3/docs/guide/reflection/spec/java-reflectionTOC.doc.html)中您可以阅读的是（粗体是我的）：

> Modifier 类是一个**不可实例化**的类，它导出类方法来解码类和成员的 Java 语言修饰符。语言修饰符以整数编码，并使用 Java 虚拟机规范定义的编码常量。

我确实想相信源代码中的评论，但我不能真正指出你所说的规范。对我来说更奇怪的是，前面的引用甚至来自规范 1.3 已经表明它是不可实例化的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:45:00.233

很好的发现，这是 API 设计者的疏忽。

但是，它也证明了实例化一个实用程序类根本不是什么大不了的事；`new Modifier()`从来没有给任何人带来任何问题。也不会`new Math()`。

不要听小鸡的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T21:25:27.070

如果没有为该类定义无参数构造函数并且没有其他带参数的构造函数，它可能是`javadoc`if 与默认选项一起使用的属性，它在文档中提供。`default constructor`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T21:13:51.480

这绝对不是 javadoc 中的错误。您找不到这样的构造函数意味着这是一个默认构造函数（无 arg 构造函数），默认情况下它是公共的，因为 java.lang.reflect.Modifier 是一个公共类。

# vim - MacVim NERDCommenter，如何指定替代分隔符

> ID：15303176
> 
> 赞同：1
> 
> 时间：2013-03-08T20:58:33.267
> 
> 标签：vim, nerdcommenter

当我在**MacVim中编辑****html**和**xhtml**文件时，有时我需要注释**嵌入的 css 样式**，因此当我尝试切换到备用分隔符集 ( ca ) 时，插件会警告我：

 ****NERDCommenter：不能使用替代分隔符，没有指定

我的问题是：

如何指定这些替代分隔符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:03:36.170

将这些行添加到我的**.vimrc**：

```
let g:NERDCustomDelimiters = {
    \ 'html': {  'left': '<!-- ', 'right': '-->', 'leftAlt': '/*','rightAlt': '*/' },
    \ 'xhtml': {  'left': '<!-- ', 'right': '-->', 'leftAlt': '/*','rightAlt': '*/'}, 
\}
let NERD_html_alt_style=1 
```

注意：不要忘记花括号后面的逗号！！:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T21:11:52.730

这些可以在 config 变量中指定`g:NERDCustomDelimiters`（在获取插件之前，例如在您的`~/.vimrc`）：

```
:let g:NERDCustomDelimiters = {
\ 'html': { 'left': '<!-- ', 'right': '-->', 'leftAlt': '/*', 'rightAlt': '*/' }
\ } 
```****

# java - 如何将多个 ArgumentMatchers 传递给 Mockito

> ID：15303177
> 
> 赞同：1
> 
> 时间：2013-03-08T20:58:52.717
> 
> 标签：java, mocking, mockito, argument-matcher, argument-matching

我有两个自定义 ArgumentMatchers，我希望我的模拟根据参数值返回不同的值。

例子：

```
when(myMock.method(new ArgMatcher1()).thenReturn(false);
when(myMock.method(new ArgMatcher2()).thenReturn(true); 
```

不幸的是，对 when() 的第二次调用导致异常。这对我来说很有意义，因为如果参数匹配两个 ArgumentMatchers，Mockito 将不知道返回 true 还是 false。有没有办法在 Mockito 中做到这一点？它甚至可能是这样的：

```
when(myMock.method(new ArgMatcher2()).thenReturn(false).elseReturn(true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:21:14.497

我不确定你的匹配器是如何编码的，但是当然支持两个不同的匹配器，也许你存根的方法不能通过 Mockito（最终）模拟。

此外，为了记录，可以告诉存根以不同的方式返回不同的返回值：

```
when(myMock.method(new ArgMatcher2()).thenReturn(false, false, true).thenReturn(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:57:41.583

如果您有兴趣从 Mockito 返回默认值，那么我已经做到了：

```
when(myMock.myMethod(any())).thenReturn(true);
when(myMosk.myMethod("some other argumetn")).thenReturn(true); 
```

它会帮助你吗？很难说，我没有像使用*new*关键字那样使用匹配器。可能是，Mockito 不太了解您的自定义匹配器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-27T12:29:38.070

切换到语法：

```
doAnswer(args->false).when(myMock).myMethod(any()); 
```

# php - SQL左连接部分数组为空

> ID：15303179
> 
> 赞同：0
> 
> 时间：2013-03-08T20:58:55.767
> 
> 标签：php, mysql, sql, arrays, left-join

我的问题是下面的代码数组的评论和评级区域应该像数据库历史表一样在其中有评论......？

```
 SELECT users.uid, users.username, history.user_id, history.comment, history.rating
 FROM history
 LEFT JOIN users
 ON users.uid=history.user_id
 WHERE history.book_id="$bid" 
```

它返回：

```
 Array ( [uid] => 3 [username] => Reign [user_id] => 3 [comment] => [rating] => ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T21:00:55.427

然后你想使用一个`INNER JOIN`. A`LEFT JOIN`将返回`NULL`值。

```
SELECT users.uid, users.username, history.user_id, history.comment, history.rating
FROM history
INNER JOIN users
ON users.uid=history.user_id
WHERE history.book_id="$bid" 
```

# sql - 如何在 SQL Server 2008 的列中找出表达式的长度

> ID：15303184
> 
> 赞同：1
> 
> 时间：2013-03-08T20:59:11.623
> 
> 标签：sql, sql-server

我不是数据库管理员，但我经常需要查询数据库来完成我的工作。最近，我的任务是查询数据库列中以分号分隔的表达式的长度。显示为虚构的示例表和列可能会更容易：

*   表是`Table1`。
*   列是`Column1`。

中两行的值`Table1.Column1`如下所示：

```
principal_name='Joe Schmoe'; marital_status='m'; shoe_size='12.5';
message='This is a message which is 45 characters long'; 
years_active='15'

principal_name='Jim Schmim'; marital_status='s'; shoe_size='10.5'; 
message='This is a xxxxxxxxxxx message which is 57 characters long'; 
years_active='6' 
```

我需要查询`Table1.Column1`并找出该列的消息部分中有多少行超过 50 个字符。

如果该列只有一个值，我可以使用类似的东西：

```
SELECT COUNT(*) FROM Table1 WHERE LEN(column1) > 40 
```

但是，我不需要知道该字段总共有多少个字符，只需要知道`message=`和之间有多少个`;`

我以前从来没有处理过一个有多个值用分号分隔的列，所以我不知道如何查询我需要知道的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:08:16.353

假设 column1 中总是有相同的部分，以相同的顺序，**例如**
`where ( CharIndex('years_active=',column1) - CharIndex('message=',column1) ) >50`
（对描述的长度进行一些调整等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:05:44.980

您可以在自定义函数中尝试这样的事情

```
Declare @str varchar(max);
set @str = 'aaaabc=thisisatest;aaaaa'
select LEN(substring(@str,CHARINDEX('=',@str,0)+1, CHARINDEX(';',@str,0)-CHARINDEX('=',@str,0)-1)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T21:21:30.950

尝试这个

```
;with cte as
(
    select 'principal_name=''Joe Schmoe''; marital_status=''m''; shoe_size=''12.5'';message=''This is a message which is 45 characters long'';years_active=''15''' as column1
    union
    select 'principal_name=''Jim Schmim''; marital_status=''s''; shoe_size=''10.5''; message=''This is a xxxxxxxxxxx message which is 57 characters long''; years_active=''6'''
), 
cte2 as 
(
    SELECT ltrim(rtrim(r.value('.','VARCHAR(MAX)'))) as Item from (
    select CONVERT(XML, N'<root><r>' + REPLACE(column1,';','</r><r>') + '</r></root>') as XmlString
    from cte ) x
    CROSS APPLY x.XmlString.nodes('//root/r') AS RECORDS(r)
)
--SELECT *, LEN(item) - 10 from cte2 x where x.Item like 'message=%' and LEN(item) > 50
SELECT COUNT(*) cnt from cte2 x where x.Item like 'message=%' and LEN(item) > 50 
```

# ruby-on-rails - Rails 迁移，更改 :id 列类型

> ID：15303190
> 
> 赞同：1
> 
> 时间：2013-03-08T20:59:49.777
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-migrations

我应该如何更改以下代码以将`:id`列用作主键，`auto_increment`以及`:limit => 8`

```
def change
  create_table :companies, :id => false do |t|
    t.integer :id, :limit => 8
    t.string :name

    t.timestamps
  end
end 
```

此代码不会将`:id`列设为主键，也不会创建自动递增序列。

PostgreSQL 8.4、Rails 3.2.11

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T00:10:08.770

在迁移中更改列的长度或数据类型将使该列作为主键无效。相反，创建一个覆盖站点默认主键数据类型的初始化程序应该提供您希望实现的行为：

```
# config/initializers/change_primary_key_datatype.rb
require 'active_record/connection_adapters/postgresql_adapter'
ActiveRecord::ConnectionAdapters::PostgreSQLAdapter::NATIVE_DATABASE_TYPES[:primary_key] = "bigserial primary key" 
```

请记住在保存初始化程序后重新启动服务器。

# java - 查找子字符串的最高性能

> ID：15303192
> 
> 赞同：-1
> 
> 时间：2013-03-08T20:59:51.047
> 
> 标签：java, string, search

我有一个字符串数组（关键字），我需要检查有多少字符串存在于一个较大的字符串中（从文件中读取的文本）。我需要检查不区分大小写。此刻我要做的是：

```
private void findKeywords() {
        String body = email.getMessage();
        for (String word : keywords) {
            if (body.toLowerCase().contains(word.toLowerCase())) {
                //some actions                }
            if (email.getSubject().contains(word)) {
                //some actions
            }
        }
    } 
```

通过阅读此处的问题，出现了另一个解决方案：

```
private void findKeywords() {
        String body = email.getMessage();
        for (String word : keywords) {
            boolean body_match = Pattern.compile(Pattern.quote(word), Pattern.CASE_INSENSITIVE).matcher(body).find();
            boolean subject_match = Pattern.compile(Pattern.quote(word), Pattern.CASE_INSENSITIVE).matcher(email.getSubject()).find();
            if (body_match) {
                rating++;
            }
            if (subject_match) {
                rating++;
            }
        }
    } 
```

这些解决方案中哪个更有效？还有另一种更好的方法吗？任何公认的解决方案都必须易于实施（与上述方案相当），并且最好没有外部库，因为在这种情况下这不是很重要的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:08:49.300

这两种解决方案对我来说似乎都是可行的。我建议的一项改进是将函数移出循环。在您当前的代码中，您重复执行诸如 toLowerCase() 和 Pattern.compile 之类的操作，您只需要执行一次。

显然有更快的方法来解决这个问题，但它们需要比这些 5 行代码复杂得多的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:15:18.797

更好：构建包含所有关键字的单一模式。然后搜索该模式。假设您的关键字不包含元字符（模式中具有特殊含义的字符），则使用：

```
StringBuilder keywordRegex = new StringBuilder();
for (String w : keywords) {
   keywordRegex.append("|"+w);
}
Pattern p = Pattern.compile(keywordRegex.substring(1));
Matcher m = new p.matcher(textToMatch);
while (m.find()) {
    // match is at m.start(); word is m.group(0);
} 
```

比遍历所有关键字更有效：模式编译（一次）将生成一个自动查找所有关键字的自动机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T21:10:50.373

我认为您提到的显式正则表达式解决方案会更有效，因为它没有 toLowerCase 操作，该操作会将输入字符串复制到内存中并使字符小写。

这两种解决方案都应该是实用的，而且您的问题主要是学术性的，但我认为正则表达式提供了更简洁的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T21:28:43.247

如果您的电子邮件正文非常大，编写一个专门的不区分大小写的包含可能是合理的，因为您可以避免在大字符串上调用 toUpperCase()：

```
static bool containsIgnoreCase(String big, String small) {
  if (small == null || big == null || small.length() > big.length()) {
    return false;
  }      
  String smallLC = small.toLowerCase();
  String smallUC = small.toUpperCase();
  for (int i = 0; i < big.length(); ++i) {
    if (matchesAt(big, i, smallLC, smallUC)) {
      return true;
    }
  }
  return false;
}

private static bool matchesAt(String big, int index, String lc, String uc) {
  if (index + lc.length() > big.length()) {
    return false;
  }
  for (int i = 0; i < lc.length(); ++i) {
    char c = big.charAt(i + index);
    if ((c != lc.charAt(i)) && (c != uc.charAt(i))) {
      return false;
    }
  }
  return true;
} 
```

# php - shell_exec 中的变量

> ID：15303207
> 
> 赞同：2
> 
> 时间：2013-03-08T21:00:55.167
> 
> 标签：php, variables, shell-exec

我在脚本方面完全是菜鸟，并试图找出我的代码中的问题所在。我有一个包含客户详细信息的文本文件，文件的第一行是用户名，第二行是真实姓名。我需要将此详细信息传递给 php。首先，我需要在目录中找到最旧的文件。我创建了返回客户用户名的 bash 脚本：

```
oldest=`ls -tr1 temp/data/*.details|head -1`
head -n1 $oldest 
```

这会找到 odest 文件 (temp/data/xxx.details) 并返回用户名，比如说 xxx。

现在，到 php：

```
$username = shell_exec('./oldest_order.sh');
$name = shell_exec('head -2 temp/data/'.$username.'.details | sed -n 2p'); 
```

我可以在我的 php 中获取用户名，第一行：它是 xxx，但第二行不起作用，但是，如果我更改 '.$username.' 到 xxx，它可以工作，所以问题出在这个变量的某个地方。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:34:35.580

也许在结尾或开头有换行符或空格。

您可以通过执行`var_dump($username);`. 这将为您提供字符串的实际长度，以便您可以将其与您认为应该具有的长度进行比较。

如果开头或结尾是空格，则可以使用：

```
$name = shell_exec('head -2 temp/data/'.trim($username).'.details | sed -n 2p'); 
```

# java - 如何在命令行中指定文本文件

> ID：15303215
> 
> 赞同：1
> 
> 时间：2013-03-08T21:01:23.480
> 
> 标签：java, command-line

我正在尝试创建一个从文本文件中读取的程序。我使用`cmd`并输入`javac fileName.java`来编译，然后`java -cp . fileName`运行它。但是，我想通过编写来运行程序`java fileName textInput.txt`。我已经创建了程序；但我必须在代码中指定文本文件的名称。

有人告诉我这`args[0]`应该是文本文件的名称，但我不知道如何实现它。

我还没有发布我的代码，但如果需要，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T21:04:12.363

如果您的课程如下

```
public class YourClass {
    public static void main(String[] args) {
        String fileName = args[0]; // would contain "textInput.txt"
        // work with fileName
    }
} 
```

将您的程序运行为`java YourClass textInput.txt`.

String 数组`args`包含您在运行`java`命令时传递的任何参数。它可以是任何东西，不限于文件名。正如 Bailey S 所说，这些参数是基于 shell 的标记化的。索引从 0 开始。

```
 java YourClass arg1 arg2 arg3
                       ^    ^    ^
index:                 0    1    2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T21:03:37.123

```
String filePath = args[0];
// Do whatever with the file path 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-08T21:04:28.290

```
class fileName {

   public static void main(String[] args) {

       String filePath = args[0];
       //but check if args[0] exist.

    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-08T21:05:38.963

任何 Java 程序的 main 方法都会接收一个值数组，`String`这些值是通过命令行传递的参数：

```
java javaClass.class arg0 arg1 arg2 
```

以下是您从代码中捕获的方法：

```
public static void main(String[] args)
{
    System.out.println(args[0]); // prints arg0
    System.out.println(args[1]); // prints arg1
    System.out.println(args[2]); // prints arg2
} 
```

最好在使用它们之前检查传递的参数数量：

```
if(args.length < 0) System.out.println("No arguments are passed!"); 
```

# java - Maven下简单编译失败，javac成功

> ID：15303216
> 
> 赞同：1
> 
> 时间：2013-03-08T21:01:24.267
> 
> 标签：java, maven

我有一个简单的 Maven 项目，其中包含一个文件 App.java，其中包含

```
package com.foo;

public class App 
{
    private Long wrapper;

    public long getlong() {
        if (null != wrapper) {
            return wrapper;
        } else {
            return 0;
        }
    }
} 
```

（您可以通过在 5 分钟项目创建中使用 Maven 并将 App.java 替换为上述内容来复制此内容）。

`mvn compile`生产

```
.../foo/App.java:[9,12] incompatible types
found   : java.lang.Long
required: long 
```

导航到目录并运行时`javac App.java`不会产生错误。有谁知道怎么回事？（我假设 Maven 使用我的盒子上安装的任何版本的 Java；无论如何，那是 1.6.0_21。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T21:15:54.153

它可能正在使用1.4`source`或版本进行编译。`target`您将需要配置编译器插件以编译更高版本。请参阅[“如何设置 Maven，以便它可以使用我选择的目标和源 JVM 进行编译？”](http://maven.apache.org/general.html#Compiling-J2SE-5) 和[“设置Java 编译器的`-source`和`-target`](http://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html)” ：

```
 ...
  <build>
  ...
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.0</version>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
        </configuration>
      </plugin>
    </plugins>
  ...
  </build>
  ... 
```

# sql - 返回多个字段的 MS Access 子查询

> ID：15303219
> 
> 赞同：2
> 
> 时间：2013-03-08T21:01:31.473
> 
> 标签：sql, subquery, ms-access-2007

所以我又回来了，遇到了更多的 MS Access 问题。我有一个带有子查询的 INSERT INTO 查询，用于检查数据是否已经存在。

```
SELECT name, course
FROM foo    
WHERE (name, course) NOT IN (SELECT name, course FROM bar); 
```

解释一下我想要完成的事情，因为上述方法不起作用。

我正在尝试选择表格栏中不存在的复合键。例如，可以将以下内容存储在表格栏中：

```
"John Doe" , "Calc 101" 
"John Doe" , "English"
"Jane Doe" , "Calc 101" 
```

以下内容可能在表 foo 中：

```
"John Doe", "Calc 101"
"John Doe", "Science" 
```

查询应返回以下内容：

```
"John Doe", "Science" 
```

我看过的所有地方都说上面的方法会起作用，我相信它在理论上是有效的。我遇到的问题是 MS Access... 当我尝试运行此查询时，它会弹出说明子查询将返回多个字段。事实上，它应该是我想要它做的就是返回 2 个字段，我可以比较其他 2 个字段。以上 2 个字段是我的“bar”数据库中的复合键。

有关更多背景信息，我正在使用 MS Excel 2007 和 MS Access 2007。Excel 用于输入数据并通过 VB 脚本运行查询。我正在尝试创建一个子查询来检查最终数据库中已经存在的字段，因为我遇到了 MS Access 打开错误并吐出一条关于附加主键的错误消息并在不执行查询的情况下关闭。<-- 由于复合键，这是可以预料的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:52:05.940

使用`LEFT JOIN`并寻找`NULL`值：

```
SELECT bar.name, bar.course
FROM bar LEFT JOIN foo ON bar.name = foo.name AND bar.course = foo.course
WHERE foo.name IS NULL 
```

我已经更新了[SQLFiddle](http://sqlfiddle.com/#!3/3e61b/1)以包含`INSERT`后面的 a`SELECT`以显示最终表格。我还在两个表中添加了复合主键，因此您可以看到您没有得到任何重复的插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:22:00.967

您的子查询返回两列。让它返回一个。如果想要一个可以在两列中的 where 子句，请使用 OR

```
SELECT name, course
FROM foo    
WHERE (name) NOT IN (SELECT name FROM bar) and (course) 
NOT IN (SELECT course FROM bar); 
```

编辑：

您的问题源于规范化问题。建议的重新设计是为学生提供一张桌子，为课程提供一张桌子，并为他们提供一张桌子。例子：

```
**StudentTable**
studentId(int PK)
firtName(string)
lastName(string)

**ClassTable**
classId(int PK)
ClassName
ClassDesc

**classTable_studentTable**
studentClassID
studentID
classID 
```

每个学生可以有很多班级，每个班级可以有很多学生。这是一个多对多关系，通过使用连接表进行规范化。

现在，如果你想做一个像你问的查询：

```
Select *.student, *.class
from
studentTable as student,
classTable as class
where
student.name<>'allen' and class.name<>'math' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-28T15:21:09.600

查询：

```
SELECT name, course
FROM foo    
WHERE (name, course) NOT IN (SELECT name, course FROM bar); 
```

适用于 MySQL 和 Oracle。对于 Access，这也适用于 MySQL 和 Oracle，您可以将其重写为：

```
SELECT name, course
FROM foo    
WHERE name NOT IN (SELECT name FROM bar)
AND course NOT IN (SELECT course FROM bar); 
```

# ms-access - 批量删除单个字段

> ID：15303220
> 
> 赞同：0
> 
> 时间：2013-03-08T21:01:41.990
> 
> 标签：ms-access

有什么方法可以运行只删除选定字段而不是整个项目的查询？我有数千个字段需要清除，但我无法删除整个字段，因为仍有项目无法丢失该字段。

更新：

我刚刚意识到更新查询可能会起作用..

所以现在的信息是： 字段包含 1-2 个字母代码。我需要将所有不包含代码“a”的字段更新为原始值（空白/空）

新问题：我如何编写一个 if 语句来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T11:39:26.313

您不需要一个“if”语句，而是一个更新查询，它只会在满足您的条件的记录上运行。

尝试：

```
UPDATE tblYourTable SET YourField = Null WHERE YourField NOT LIKE "*a*" 
```

# c++ - “迭代”命名空间内定义的常量

> ID：15303221
> 
> 赞同：1
> 
> 时间：2013-03-08T21:01:46.357
> 
> 标签：c++, boost, macros

假设我在命名空间内定义了一堆常量：

```
namespace FooConstants{
    const string foo1 = "foo1";
    const string foo2 = "foo2";
    //...
    const string fooN = "fooN";
} 
```

是否可以使用 Boost 来“迭代”这些常量名称？类似于宏的东西，它扩展了 generate ，`foo1`并让我对每个做一些事情。我相信这可以使用一些 Boost 库来完成，但我找不到它。`foo2``fooN`

顺便问一下，这种技术有合适的名称吗？

**编辑**：我被要求澄清这是否意味着在编译或运行时解决。答案是编译时间：我想生成对所有常量进行操作的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T21:06:27.603

[您可以使用Boost Preprocessor 库](http://www.boost.org/doc/libs/1_53_0/libs/preprocessor/doc/index.html)来实现这一点。

[BOOST_PP_SEQ_FOR_EACH](http://www.boost.org/doc/libs/1_53_0/libs/preprocessor/doc/ref/seq_for_each.html)似乎最相关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T21:47:23.993

我将您的示例更改为从 0 开始常量编号以简化逗号生成，但您绝对可以这样做，因为事情发生在编译时：

```
#include <boost/preprocessor/cat.hpp>
#include <boost/preprocessor/iteration/local.hpp>
#include <boost/preprocessor/punctuation/comma_if.hpp>
#include <utility>
#include <string>
#include <map>

namespace FooConstants{
    const std::string foo0 = "foo0";
    const std::string foo1 = "foo1";
    const std::string foo2 = "foo2";
    const std::string foo3 = "fooN";
#define N 3
}

namespace metadata {

const std::map<int, std::string> constants = {

#define BOOST_PP_LOCAL_MACRO(n) \
   BOOST_PP_COMMA_IF(n) \
   std::make_pair(n, BOOST_PP_CAT(FooConstants::foo,n))

#define BOOST_PP_LOCAL_LIMITS (0, N)

#include BOOST_PP_LOCAL_ITERATE()
 };
}

int main() {} 
```

这里预处理器生成一个 initalizer_list，它可以初始化一个`const std::map`. 如果你愿意的话，你可以用 constexpr 和模板做更多疯狂的 const 事情。

仅仅因为它是可能的并不意味着我会建议在真实的代码库中进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T21:04:11.067

这将需要 c++ 没有的元数据。您可以提出一些自定义宏并使用 foomax 和 foomin 之类的约定，但我知道没有库。

# javascript - HTML 5 拖放 - 使用自定义光标

> ID：15303222
> 
> 赞同：4
> 
> 时间：2013-03-08T21:01:50.570
> 
> 标签：javascript, jquery, css, html

当 HTML 5 Drag-drop API 的拖动操作发生时，我实际上正在尝试使用自定义光标，但是在触发拖动事件时我无法覆盖默认光标。这是我如何尝试实现它的代码，

```
$("#myDiv").live('mousedown', function(ev) {
  $(this).css("cursor", "url(res/customCursor.cur), default !important");
}); 
```

由于在拖动事件发生时会按下鼠标，因此我尝试在拖放目标的 mousedown 事件中更改光标。我也尝试过更改拖动事件的事件处理程序中的光标，但即使这样也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T23:22:29.263

在您的样式表定义（<style> 元素或 .css 文件）中创建一个类，如

```
.dragAndDropInProgress {
  cursor: url(....), default !important; 
} 
```

然后，当您发出 ondragstart 信号时，将该类附加到文档正文，确保在看到 ondragend 后再次将其删除。

# php - move_uploaded_file() 使用临时托管帐户域

> ID：15303223
> 
> 赞同：0
> 
> 时间：2013-03-08T21:01:54.500
> 
> 标签：php, file-upload, upload, cpanel

我正在尝试使用 PHP 使用函数上传图像`move_uploaded_file()`。

**PHP**

```
// Get image variables
$file = $_FILES['image']['tmp_name'];
$path = "images/products/large/";
$image_hash = "ty1bi"; // This would be generated

//I have also tried this: $path = "home/the_user/public_html/images/products/large/";
//$_SERVER['DOCUMENT_ROOT'] is equal to home/root_user/public_html/

// Upload image
if(!move_uploaded_file($file, $path . $image_hash . ".jpg")) {      
  header("location:admin/add.php?e=1");
  exit;
} 
```

目前，我得到：

*警告：move_uploaded_file(home/root_user/public_html/images/products/large/ty1bi.jpg) [function.move-uploaded-file]：无法打开流：/home/root_user/public_html/includes/ 中没有这样的文件或目录第 63 行的functions.php*

*警告：move_uploaded_file() [function.move-uploaded-file]：无法将 '/tmp/phpJSKsYA' 移动到 /home/root_user/public_html/ 中的 'home/root_user/public_html/images/products/large/ty1bi.jpg'第 63 行包含/functions.php*

托管帐户是在 WHM 中设置的，我正在通过`/~the_user/`目录访问该站点。因此，站点名称可以是主/根主机域名或服务器 IP 地址，后跟`/~the_user`.

因为错误显示的`/root_user`是 WHM 主机的用户名，所以我认为它无法访问`/~the_user`. 我已经尝试更改文档根目录，`$path`因此它从开始`home/`并包含`/the_user`，但我也没有运气。

有没有办法做到这一点，还是我必须在域名上使用/测试它？

**更新**

因为文档根目录位于根用户名下，所以发生的问题是绝对路径的正确构建。通过构建路径，我的方向是正确的，但这是绝对的，因为路径字符串开头缺少斜杠。

这行代码帮助解决了这个问题：

`$path = "/home/the_user/public_html/images/products/large/";`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:41:01.020

让我想知道错误是'home/...没有前导/。可能是某个地方的安全设置将其剥离，使 PHP 认为它应该将文件放入 CWD 下名为 home/... 的子目录中。

尝试

```
/home/.....
^--- 
```

反而

# javascript - 使用画布会比使用图像产生更小的 HTTP 请求吗

> ID：15303230
> 
> 赞同：3
> 
> 时间：2013-03-08T21:02:16.397
> 
> 标签：javascript, html, http

我知道将任何图像格式转换为 SVG 都不是一件容易的事，对于复杂的图像也不是我所追求的。让我解释一下我为什么要问这个问题。作为一名网页设计师，我通常会使用图像来处理网站中的某些元素。其中包括简单的几何形状、鸢尾花、一些简单的徽标等。这些 HTTP 请求的成本相对较小（我们在这里讨论的是 KB）。

但是，如果使用 svg 或其他画布元素而不是简单图像的图像格式，这些请求是否会更小，我很感兴趣。是否有任何研究或测试来比较 SVG 与图像？是否可以通过将画布用于页面上的简单元素来使 HTTP 请求更小？如果是这样，那将是个好消息。我什至可以开始创建画布图像库以重复使用并与他人共享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:08:53.887

我认为这将取决于具体情况。

精灵可以提供帮助.. 但是如果您的精灵包含一些简单的线条但必须是 500px * 500px... 那么画布（甚至是 svg）确实会小很多。最重要的是，通常会缓存外部 javascript（甚至比图像更好）。在这方面，它们确实有助于减轻体重。

但是，如果您希望 IE 也能“工作”，那么您可能需要开始提供一些 html5/canvas 垫片，是的，这会增加权重。

**编辑：**
看看这个[jsfiddle 示例](http://fiddle.jshell.net/sU74C/show/)（我为[这个问题](https://stackoverflow.com/questions/11466587/html5-svg-vs-canvas-for-granite-like-background)准备了），其中使用径向渐变创建了全尺寸的“花岗岩”背景。正如您所看到的（在源代码中），这比单独的图像少了很多字节（并且总是像素完美）。

另一方面，它也（取决于复杂性）需要一些常规图像不会花费的计算时间（在将必要的字节下载到客户端之后）。

**Edit2：**
我找到了一个[链接](http://coding.smashingmagazine.com/2012/01/16/resolution-independence-with-svg/)，他们在其中进行了一些测试。

> 在我们的 sprite 示例中，原始 SVG 文件为 2445 字节。PNG 版本只有 1064 字节，双像素比率设备的双倍 PNG 为 1932 字节。在第一次出现时，矢量文件在所有帐户上都会丢失，但对于较大的图像，光栅版本的大小会更快地升级。
> 
> 由于是 XML 格式，SVG 文件也是人类可读的。它们通常包含非常有限的字符范围，这意味着它们在通过 HTTP 发送时可能会被大量 Gzip 压缩。这意味着实际下载大小比原始文件小很多倍——很容易超过 30%，可能更多。PNG 和 JPG 等光栅图像格式已经被压缩到最大程度。

然而，请注意这一切*仍然*取决于图像的复杂程度：作为一个极端的反例......尝试描述一张福雷斯特（树叶......）的全彩照片而不是简单的 jpg......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:17:41.943

对于简单的形状，压缩后的 SVG 会非常小，并且在现代浏览器中[非常有用](http://css-tricks.com/using-svg/)。

但是，对于页面加载性能而言，请求数量是一个非常重要的因素，因此如果您使用[CSS 精灵表](http://css-tricks.com/css-sprites/)而不考虑图像格式，您将获得显着的性能提升。

如果通过画布您的意思是将形状存储为 JavaScript 绘图命令（或基于某些 JSON 发出它们的库），那么与 gzip 压缩的 SVG 相比，它不太可能节省大量带宽（SVG 具有非常有效的路径定义格式，并且 gzip 消除了XML 很好）。

您将不得不等待 JS 加载并在整个文档中插入多个画布，或者在压缩生成的图像和构建`data:`URL 时消耗 CPU，所以我认为总体上它不会比使用 SVG 或[优化的 PNG](http://pngmini.com)更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T21:09:28.987

尺寸总是取决于具体的图像，对不起，但你必须自己测试。一般没有办法比较这个。

# java - Apache Wink 资源生命周期

> ID：15303235
> 
> 赞同：2
> 
> 时间：2013-03-08T21:02:39.057
> 
> 标签：java, jax-rs, lifecycle, apache-wink

我想知道响应 REST 请求的类的预期生命周期行为是什么。

我有一个派生自 javax.ws.rs.core.Application 的类，它标识另一个用于响应请求的类。

在另一个类中，它使用@Path("foo") 进行注释，并且该类中的方法使用@Path("bar") 进行注释。当向 foo/bar 发出请求时，我可以看到构造函数被执行，然后 PostConstruct 方法被正确调用。在该方法向客户端返回响应后，我可以看到 PreDestroy 被调用，然后类被压扁。在下一个请求中，该过程重复。

这是正确的行为吗？或者有没有办法让这个类保留在内存中，这样每次发出请求时就不需要通过构造函数和 PostConstruct 了？此方法依赖于 JAXB 编组和各种 XSL 转换 - 我想缓存已编译的 XSLT 转换对象以及某些转换的结果，但是如果每次调用时都重新实例化该类，则无法进行本地缓存。

这是在 Java 7、Wink 和 Tomcat 7 上运行的。有人可以告诉我这是否是预期的行为，还是我错过了一些能让这个类保持活力的东西？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:31:14.770

根据 JAX-RS 规范，资源（用 注释的类`@Path`）是根据请求创建的。

有几种方法可以覆盖此行为。

根据 JAX-RS 规范可以使用的最简单的方法是自己创建一个资源实例（您负责调用 PostConstruct，在这种情况下不确定何时以及如何调用 PostDestroy）并使用返回它`javax.ws.rs.core.Application.getSingletons()`

或者，您可以`@org.apache.wink.common.annotations.Scope(ScopeType.SINGLETON)`在资源上添加注释。

如果您使用 Spring，Wink 有一个简洁的 Spring 集成模块，因此将使用 Spring 的生命周期。见[http://incubator.apache.org/wink/1.0/html/5.5%20Spring%20Integration.html](http://incubator.apache.org/wink/1.0/html/5.5%20Spring%20Integration.html)

# php - 将选择列表传递给 php 页面

> ID：15303246
> 
> 赞同：1
> 
> 时间：2013-03-08T21:03:09.290
> 
> 标签：php, javascript

我目前正在尝试将选择列表（整个列表）传递到 php 页面并从列表中获取各个值以执行动态 sql 查询。我传入了 selectItems，但是当我执行回显时，我得到了

> [对象 HTMLSelectElement]

我也尝试过传入 selectItems.value，但只传入了 3 个列表项之一。我搜索了过去一天，但没有取得太大成功。我不太确定如何处理这个问题。任何帮助将不胜感激。

当前选择列表如下

```
 <select multiple name="selectItems" size="6" id="selectItems">
    <option value="value1" selected="selected">value1</option>
    <option value="value2" >value2</option>
    <option value="value3" >value3</option>
    </select>

    <input type=button id="opener" value='Clickme' onclick="showTable(selectItems, 'getquery.php')"> 
```

下面是 showtable 函数的一个片段，我基本上是在尝试传递列表（用 q 表示）和页面的位置。

```
xmlhttp.open("GET",page+"?q="+str,true);
xmlhttp.send(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T22:23:03.563

您最初的 onclick 方法一开始并没有通过 Select 节点，即使那样 - 您正在将实际节点本身发送到 PHP；不是提取的值。

正如 dm03514 自己所说，您可以以 PHP 数组的形式序列化查询字符串，以便在 PHP 级别更易于管理。

**jsFiddle：http: [//jsfiddle.net/7dtXs/1/](http://jsfiddle.net/7dtXs/1/)**

```
 <script type="text/javascript">
    function showtables( selectObj, page ) {

        var xmlhttp = new XMLHttpRequest();
        var str = "";

        var AllOptions = selectObj.options;
        var SelectedOptions = selectObj.selectedOptions;

       /**
        *   Iterate through each Object that is selected
        *   From here you can pick out:
        *       - id name
        *       - value
        *   etc, to form a query string 
       **/
       for ( var x = 0; x < AllOptions.length; x++ ) {
           str +=  ( !x ? "" : "&" ) 
                   + AllOptions[x].value + "=" + AllOptions[x].textContent;
       }

      /** 
       *    if apples & shaz.. selected   
       *    str now contains:
       *        &value1=Apples&vsalue2=shazbots
      **/
      console.log( str );

      xmlhttp.open("GET", page + "?" + str, true);
          xmlhttp.send();
      }
  </script>

    <select multiple name="selectItems" size="6" id="selectItems">
        <option value="value1">Value1</option>
        <option value="value2">Value2</option>
        <option value="value3">Value3</option>
    </select>

    <!-- Passing through ID.selectedOptions to function -->
<input type="button" id="opener" value="Clickme" onclick="showtables( document.getElementById('selectItems'), 'getquery.php' );"> 
```

此外，您的示例确实有错误引用，不确定这是否只是您的示例或您的代码 - 例如：type=button 应该是 type="button"。

我希望我正确理解了你的问题！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:05:28.570

您可以序列化 html 值

php 正在寻找的是一个值数组，即。

`http://example.com/?selectItems[]=test&selectItems[]=test1`

这将允许您在 php.ini 中以数组的形式访问所有值。

现在至于最好的方法。我不知道使用香草 javascript。您可以遍历所有选定的值并构建自己的查询字符串？

# ms-access - 在 MS Access 报告/表格中创建 2D（数据矩阵或 QR 码）

> ID：15303247
> 
> 赞同：-1
> 
> 时间：2013-03-08T21:03:11.490
> 
> 标签：ms-access, qr-code

我们正在实施代码以读取/创建开始出现在我们供应商零件上的二维条码。

我们需要在 MS Access 报告和表格中创建二维条码。有没有人成功使用字体（IDAutomation）或 Active X（dlSoft）解决方案。

对于 C#，建议使用开源库“ [http://barcoderender.codeplex.com/](http://barcoderender.codeplex.com/) ”。关于这有多成功或是否有人有其他开源和/或付费选项的任何想法。

谢谢，

安东

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:19:59.597

根据您需要生成的代码量，您可以使用 Google Charts API 生成 QR 码。

只需将“Microsoft Web Browser”ActiveX 组件和以下代码添加到您的表单：

```
Dim Size As Integer
Dim Text As String
Dim URL As String
Size = 200
Text = "This is my test"
' Better to actually use a URL encoding function like those described here:
' http://stackoverflow.com/questions/218181/how-can-i-url-encode-a-string-in-excel-vba
Text = Replace(Text, " ", "%20")
URL = "http://chart.apis.google.com/chart?chs=" & Size & "x" & Size & "&cht=qr&chld=H|0&chl=" & Text
WebBrowser.Navigate (URL) 
```

您当然可以根据需要更改大小和文本。文本也可以是直接来自您的表单的值，因此是您的数据。

我建议您在使用之前查看 Google 的条款和服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-17T16:45:14.687

我完全摆脱了网络浏览器控制和 Google API，因为我现在不推荐使用该功能。我使用了不同的免费 API，但可以使用 Google API 或任何其他 API。

在我的示例中，我在与应用程序相同的目录中创建了一个 .png 图像。我的表单上有一个名为 txtToCode 的文本框，我可以在其中输入我想要编码的任何文本。我还有一个图像控件，以便可以从表单中查看图像，但您可以根据需要对其进行修改：

```
Private Sub btnCode2_Click()
     Call GetQRCode(Me.txtToCode, 150, 150)
End Sub

Sub GetQRCode(Content As String, Width As Integer, Height As Integer)
    Dim ByteData() As Byte
    Dim XmlHttp As Object
    Dim HttpReq As String
    Dim ReturnContent As String
    Dim EncContent As String
    Dim QRImage As String
    EncContent = EncodeURL(Content)

    HttpReq = "https://api.qrserver.com/v1/create-qr-code/?data=" & EncContent & "&size=" & Width & "x" & Height & ""

    Set XmlHttp = CreateObject("MSXML2.XmlHttp")
    XmlHttp.Open "GET", HttpReq, False
    XmlHttp.Send
    ByteData = XmlHttp.responseBody
    Set XmlHttp = Nothing

    ReturnContent = StrConv(ByteData, vbUnicode)
    Call ExportImage(ReturnContent)
End Sub

Private Sub ExportImage(image As String)
    Dim FilePath As String

    On Error GoTo NoSave

    ' Build Export Path
    FilePath = Application.CurrentProject.Path & "\qr.png"

    Open FilePath For Binary As #1
       Put #1, 1, image
    Close #1
    Me.Image3.Picture = FilePath
    ' Save File Path
    Exit Sub
NoSave:
MsgBox "Could not save the QR Code Image! Reason: " & Err.Description, vbCritical, "File Save Error"
End Sub

Private Function EncodeURL(str As String)
    Dim ScriptEngine As Object
    Dim encoded As String
    Dim Temp As String

    Temp = Replace(str, " ", "%20")
    Temp = Replace(Temp, "#", "%23")
    EncodeURL = Temp
End Function 
```

# mysql - 设置除 1 之外的所有行

> ID：15303250
> 
> 赞同：3
> 
> 时间：2013-03-08T21:03:22.477
> 
> 标签：mysql

我的数据库中有一个名为已发布的标志，对于已发布的行，我将其设置为 1。我的问题是，有没有办法通过一个查询将所有其他行设置为 0 并将特定行设置为 1。

目前我正在使用：

```
$db->query("UPDATE my_table SET published = '0'");
$db->query("UPDATE my_table SET published = '1' WHERE id = '$id'"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T21:04:36.060

```
UPDATE my_table SET published = IF (id = $id,1,0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:04:52.780

使用 CASE 语句

```
UPDATE my_table
SET published = CASE
    WHEN id = '$id' THEN 1
    ELSE 0 END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T21:09:04.447

在 MySQL 中，没有布尔类型（条件返回一个整数），所以这也有效：

```
UPDATE my_table
SET published = (id = $id); 
```

`id = $id`如果 $id 与 id 不同，则返回 0，否则返回 1。

# asp.net - ASP.NET MVC 将查询结果从控制器传递到视图

> ID：15303251
> 
> 赞同：2
> 
> 时间：2013-03-08T21:03:22.843
> 
> 标签：asp.net, asp.net-mvc

如何在 ASP.NET MVC 的查看页面中打印查询结果？我的代码是：

```
public ActionResult Index()
{
            var list = from m in db.MenuTables
                       select m.MenuName;

            return View(list);
        } 
```

现在我应该写什么来在查看页面中打印这个查询的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T21:21:13.227

就个人而言，我会养成在`ViewModels`该模型中拥有然后强烈键入您的视图的习惯。

这`model`将仅公开您要显示的数据。不多也不少。所以让我们假设你想显示名称、价格和其他一些元数据。

伪代码...

```
//View Model
public class MenuItem
{
    public string Name { get; set; }
    public decimal Price { get; set; }
    public bool IsVegetarian { get; set; ]
}

public class IndexViewModel
{
    public IList<MenuItem> MenuItems { get; set; }
    public string MaybeSomeMessage { get; set; }
}

//in Controller
public ActionResult Index()
{
    // This gets the menu items from your db, or cache or whatever.
    var menuItemsFromDb = GetMenuItems(); 

    // Lets start populating the view model.
    IndexViewModel model = new IndexViewModel();    

    // Project the results to your model.
    IList<MenuItems> menuItems = null;
    if (menuItemsFromDb != null)
    {
        model.MenuItems = (from menuItem in menuItemsFromDb
                           select new MenuItem() {
                               Name = menuItem.Name,
                               Price = menuItem.Price,
                               IsVegetarian = menuItem.IsVegetarian
                           }).ToList();
    }

    // Anything else...
    model.MaybeSomeMessage = "Hi There!";

    return View(model);
}

//in View
@model IndexViewModel

<h3>@Model.MaybeSomeMessage</h3>
<ul>
    @foreach(var item in Model.MenuItems)
    {
        <li><a href="#">@item.Name</a> - $ @item.Price</li>
    }
</ul> 
```

ETC..

注意我跳过了一些错误检查等。

要点 - >只通过你需要的东西。

一开始，你可能会说：WTF！这比其他答案长得多！Sif 我想写更多的代码。

对于这种想法，我可以建议的最佳答案是，从长远来看，您会感谢自己养成了这种习惯，因为视图应该只知道它需要的*确切*数据。不多也不少。发送最少的数据意味着您有一个非常轻松和简单的视图，这将使您的支持/调试更好。接下来，您将能够使用更多智能和智能对您的控制器进行单元测试。

GL！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:08:26.803

假设这`list`是一个`IEnumerable`字符串（即 MenuName 是一个字符串）。

在你看来，接受模型`IEnumerable<string>`

```
@model IEnumerable<string> 
```

然后枚举它

```
@foreach( string s in Model )
{
 <div>
  @s
 </div>
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T21:15:47.107

您要做的第一件事是调用 ToList() ，否则您可能会多次执行相同的 SQL 查询。

```
 public ActionResult Index()
   { 
        var list = (from m in db.MenuTables
                   select m.MenuName).ToList();

        return View(list);
    } 
```

其次，我不会只是传递这样的完整列表。您应该创建一个 ViewModel。这将允许您稍后以较小的努力传递更多数据。

```
 public ActionResult Index()
     {
        var model = new IndexModel();
        model.Tables = db.MenuTables.ToList();
        model.AnotherValue = "MENUS";

        return View(model);
     } 
```

现在我们在视图上，您​​需要设置模型并迭代表。

```
 @model IndexModel

 <h3>@Model.AnotherValue</h3>
 <ul>
 @foreach( var table in Model.Tables) {
     <li>@table.Name<li>
 }
 </ul> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-09T11:30:12.400

```
 public ActionResult Index()
    {
        var list = from m in db.MenuTables
                   select m.MenuName;

        return View(list);
    }

    //In View

    @model IEnumerable<ProjectName.models.MenuTables>

    @foreach(var item in Model)
    { 
        @item.Field_Name
    } 
```

# python - TraitsUI TextEditor enter_set 导致输入被拒绝

> ID：15303257
> 
> 赞同：0
> 
> 时间：2013-03-08T21:03:41.567
> 
> 标签：python, traits, enthought, traitsui

我正在尝试构建一个 traitsui 应用程序。作为此应用程序的一部分，我会监听用户输入的浮点数。默认情况下，此浮动的编辑器是一个带有 auto_set 的 TextEditor。但是，当用户输入完这个数字后，程序会进行很长的计算，所以当用户真正想输入 1.7 时，当程序监听新的 trait 1 时，真的很烦人。

我试图用 TextEditor 工厂的 enter_set 属性来解决这个问题。但是，当我这样做时，它根本不允许更新特征，并且无论输入什么值，框都会显示为红色。这显然不是 enter_set 和 auto_set 应该如何工作的。我究竟做错了什么？

这是我的测试代码：

```
from traits.api import *
from traitsui.api import *

class FloatEditorClass(HasTraits):
  f=Float
  click=Button('clickme')

  view=View(Item('f',editor=TextEditor(auto_set=False,enter_set=True)),
    # removing one or the other of these settings doesn't change anything
    Item(name='click'))

  def _click_fired(self):
    print self.f

fec=FloatEditorClass()
fec.configure_traits() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T22:19:38.610

您可以使用`CFloat`而不是`Float`，它会尝试将您分配给特征的值转换为浮动。如果您尝试将字符串分配给`Float`，它会检测到类型错误。

例如：

```
class CFloatDemo(HasTraits):
    f = Float
    cf = CFloat

demo = CFloatDemo()

demo.f = '3.0'  # This raises a TraitError
demo.cf = '3.0' # This assigns 3.0 to 'cf' 
```

**更新：**

另一个选项是告诉`TextEditor`如何将字符串映射到特征值：

```
traits_view=View(
   Item('f', editor=TextEditor(auto_set=False,enter_set=True, evaluate=float)),
   Item(name='click')
) 
```

这就是`Float`Traits UI 设置默认编辑器的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:30:24.743

实际上，我弄清楚了我自己的问题是什么，虽然我认为这不可避免地是编辑器工厂中的一个错误，但我确实有一个修复。

问题是当您进入文本编辑器时，说字符串“4”，编辑器会将您的字符串准确地解释为字符串“4”而不是数字。如果你指定一个 Int 特征并让它使用它的默认编辑器，它必须做一些看不见的事情来将此字符串转换为一个 int （可能它只是将函数 int() 指定为编辑器的 'evaluate' 属性）。

相反，如果您使用您感兴趣的参数修复自己指定编辑器，则此修复被绕过（这是 TextEditor 中的一个错误，或者如果您认为鸭子类型本质上是一个错误，则可能是 python 本身的错误），所以您必须自己提供修复（例如评估参数）。作为在一般情况下稍微容易一些的等效解决方案，请改用为此目的创建的 DefaultOverride 工厂。

# asp.net - 链接按钮没有禁用？

> ID：15303258
> 
> 赞同：0
> 
> 时间：2013-03-08T21:03:48.133
> 
> 标签：asp.net, vb.net, webforms, linkbutton

这是一个奇怪的...

在我的网络表单上，我有一个链接按钮。根据从数据库中提取的值，此按钮是启用还是禁用。链接按钮启动一个模式对话框。

问题是当链接按钮设置为**enabled=false**时，如果在我的生产服务器上单击文本，模式弹出窗口仍然会触发。在我的开发服务器（本地使用 VS2010）上，该按钮的行为正常。

编码：

```
if status = "closed" then
lnkButton.enabled = true
else
lnkbutton.enabled = false
end if 
```

诚然，这很奇怪，我正在把头发扯下来......

**编辑**

ASPX 页面中的代码：

```
 <div style="text-align:right;margin-top:-20px;">
        <asp:LinkButton ID="lnkPopup" Enabled="false" Text="Change End Date" runat="server" />
    </div>

    <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
    </asp:ToolkitScriptManager>

    <asp:ModalPopupExtender ID="mpe1" PopupControlID="pop1" BackgroundCssClass="Overlay"
     TargetControlID="lnkPopup" runat="server" CancelControlID="btnCancel" /> 
```

{为简洁起见排除实际弹出窗口}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:44:01.577

> 将此添加到您的 else 语句中：

```
mpe1.Enabled = false 
```

# perl - Perl 通过所有子目录根据文件的扩展名查找文件

> ID：15303270
> 
> 赞同：5
> 
> 时间：2013-03-08T21:05:05.183
> 
> 标签：perl

我有一段正在工作的代码，它可以在给定目录中找到所有 .txt 文件，但我无法让它在子目录中查找。

我需要我的脚本做两件事

1.  扫描文件夹及其所有子目录以查找文本文件
2.  仅打印其路径的最后一段

例如，我有一个目录结构

```
C:\abc\def\ghi\jkl\mnop.txt 
```

我编写了指向路径的脚本`C:\abc\def\`。然后它遍历每个子文件夹并查找该文件夹中的`mnop.txt`任何其他文本文件。

然后打印出来`ghi\jkl\mnop.txt`

我正在使用它，但它实际上只打印出文件名以及文件当前是否在该目录中。

```
opendir(Dir, $location) or die "Failure Will Robertson!";
@reports = grep(/\.txt$/,readdir(Dir));
foreach $reports(@reports)
{
    my $files = "$location/$reports";
    open (res,$files) or die "could not open $files";
    print "$files\n";
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-08-20T23:43:52.940

我相信这个解决方案更简单，更容易阅读。我希望它有帮助！

```
#!/usr/bin/perl

use File::Find::Rule;

my @files = File::Find::Rule->file()
                            ->name( '*.txt' )
                            ->in( '/path/to/my/folder/' );

for my $file (@files) {
    print "file: $file\n";
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-08T21:23:27.343

怎么用`File::Find`？

```
#!/usr/bin/env perl

use warnings;
use strict;
use File::Find;

# for example let location be tmp
my $location="tmp";

sub find_txt {
    my $F = $File::Find::name;

    if ($F =~ /txt$/ ) {
        print "$F\n";
    }
}

find({ wanted => \&find_txt, no_chdir=>1}, $location); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T21:25:57.217

如果您只使用`File::Find`核心模块会容易得多：

```
#!/usr/bin/perl
use strict;
use warnings FATAL => qw(all);

use File::Find;

my $Target = shift;

find(\&survey, @ARGV);

sub survey { 
    print "Found $File::Find::name\n" if ($_ eq $Target) 
} 
```

第一个参数：要搜索的文件的无路径名称。所有后续参数都是要检查的目录。 **File::Find 递归搜索，所以你只需要命名树的顶部，**所有子目录也会自动搜索。

`$File::Find::name`是文件的完整路径名，因此`$location`如果需要相对路径，可以从中减去。

# android - 如何让我的 1024 宽网页在 Chrome 中的 Nexus 7 上显示？

> ID：15303271
> 
> 赞同：1
> 
> 时间：2013-03-08T21:05:10.677
> 
> 标签：android, google-chrome, viewport

我有一个 1024 x 768 的网页，除了 Nexus 7 Chrome（截至 2013 年 3 月 5 日的最新版本），它在任何地方都可以正常工作

我尝试了很多视口元标记和其他技术，但我的页面总是被裁剪，无法适应该设备的 1280 像素。在 iPad 和 iPhone 上运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:14:59.993

您可能没有正确设置视口。我在这里[http://jsbin.com/ubumef/latest](http://jsbin.com/ubumef/latest)使用以下代码对其进行了测试，并将视口缩放到正确的宽度。

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset=utf-8 />
    <title>Viewport Width: 1024px</title>
    <meta name="viewport" content="width=1024px" />
  </head>
  <body style="margin:0px;">
    <div style="width: 1024px; background-color:red;">This is 1024px</div>
    <div style="width: 512px; margin-top: 5px; background-color:blue;">This is 512px</div>
  </body>
</html> 
```

# html - 拖放到 jquery 滑块上 - 将位置发布到服务器

> ID：15303272
> 
> 赞同：1
> 
> 时间：2013-03-08T21:05:16.697
> 
> 标签：html, jquery, user-interface, slider

我正在尝试将项目拖动到 jquery 滑块上。例如，如果项目被放到滑块的 86% 上，我想将此位置发布到服务器，以便项目可以沿着服务器上的结果集放置 86%。

你如何检测到 jQuery 滑块的下降和 POST 到服务器的百分比？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:13:16.400

由于您使用的是 jQuery，假设您使用 jQuery UI 进行拖放。首先阅读：[http ://api.jqueryui.com/droppable/#event-drop](http://api.jqueryui.com/droppable/#event-drop)

然后意识到作为事件的一部分，您获得了被放置元素相对于可放置容器的偏移位置。如果需要，您可以在此处将其计算为百分比。

例如，在您知道宽度为 100 像素的容器的左侧 -> 90 像素处放置意味着 90% 是您的幻数。

或者，如果您使用本机拖放，请查看这个简单的编辑：http: [//jsbin.com/ezuke/3283/edit](http://jsbin.com/ezuke/3283/edit)。如果您在 drop 事件中弹出事件的控制台日志，您将看到它还公开了您丢弃它的位置的偏移量，您可以在计算 % 时再次使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T22:16:45.777

由于我不太擅长解释事情，所以我为您制作了一个 jsFiddle。虽然这可能不是**您**想要的，但它应该是一个很好的起点！

这是代码：

```
 $(function () {

    //the draggable object
    $("#dragobject").draggable();

    //Prepare the slider
    var range = 100,
        sliderDiv = $("#slider");

    // Activate the UI slider
    sliderDiv.slider({
        min: 0,
        max: range,
        create : function(){
            $(this).find(".ui-slider-handle").hide();
        }
    });

    // Number of tick marks on slider
    var position = sliderDiv.position(),
        sliderWidth = sliderDiv.width(),
        minX = position.left,
        maxX = minX + sliderWidth,
        tickSize = sliderWidth / range;

    //Set slider as droppable
    sliderDiv.droppable({
        //on drop 
        drop: function (e, ui) {

            var finalMidPosition = $(ui.draggable).position().left + Math.round($("#dragobject").width() / 2);

            //If within the slider's width, follow it along
            if (finalMidPosition >= minX && finalMidPosition <= maxX) {

                var val = Math.round((finalMidPosition - minX) / tickSize);
                sliderDiv.slider("value", val);
                alert(val + "%");

                //do ajax update here to set the position
                /*$.ajax({
                    type: "POST",
                    url: url,
                    data: val,
                    success: function () {
                        //congrats
                    },
                    dataType: dataType
                });*/

            }
        }
    });

}); 
```

这是 jsFiddle 链接：[jsFiddle 示例](http://jsfiddle.net/BP8hL/4/)

希望能帮助到你，

马克。

资料来源： [鼠标移动时滑动的 Jquery 滑块](https://stackoverflow.com/questions/4626988/jquery-slider-that-slides-while-mouse-move)， [jQuery UI 滑块](http://jqueryui.com/slider/)

# javascript - 在 7 x 3 网格视图中插入图像

> ID：15303273
> 
> 赞同：0
> 
> 时间：2013-03-08T21:05:24.673
> 
> 标签：javascript, jquery, html, css

我正在尝试将图像放在一个简单的 7 X 3 表格/网格视图中。

但我没有得到想要的结果。可能我看错了地方。

我不想创建查看器或任何东西..

只需在 7 X 3 网格视图中显示图像..

```
.floated_img
{
    margin-left: 10px
    width:140px; /* you can use % */
    height: auto;

}

<div class="floated_img">
    <img src="Picture1.png" alt="Some image">

</div>
<div class="floated_img">
    <img src="Picture2.png" alt="Another image">

</div>
.... 
```

有没有我可以快速下载并使用它来将我的图像放入其中的模板。

我有图像..我只想将它们对齐在一个干净的表格视图中，然后对其进行屏幕截图..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:15:13.240

如果您不想处理表格，可以将图像放入`LI`：

```
ul {
    line-height: 0;
    font-size: 0;
}
li {
    display: inline-block;
    width: 14.28%; /* 100%/7 */
}
li img {
    display: inline-block;
    max-width: 100%;
} 
```

[http://jsfiddle.net/NnrEv/](http://jsfiddle.net/NnrEv/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:20:29.220

如果您正在寻找浮动解决方案，请查看此[http://jsfiddle.net/fSzxb/1/](http://jsfiddle.net/fSzxb/1/)

```
.floater {
    float:left;
    ...
}
.floater.first {clear:both;}

/*clearfix*/
.cf:before,.cf:after {content: " "; display: table;}
.cf:after {clear: both;}
.cf {*zoom: 1;} 
```

和你的 html

```
<div class="cf">
    <div class="floater first"></div>
    <div class="floater"></div>
    <div class="floater"></div>
    <div class="floater"></div>
    <div class="floater"></div>
    <div class="floater"></div>
    <div class="floater"></div>
    <div class="floater first"></div>
    <div class="floater"></div>
    <div class="floater"></div>
    <div class="floater"></div>
    <div class="floater"></div>
    <div class="floater"></div>
    <div class="floater"></div>
    <div class="floater first"></div>
    <div class="floater"></div>
    <div class="floater"></div>
    <div class="floater"></div>
    <div class="floater"></div>
    <div class="floater"></div>
    <div class="floater"></div>
</div> 
```

当然你可以使用更多语义化的类名，而不是 floater 和 cf

# jakarta-ee - 谁能用更简单的术语告诉我“Java EE 堆栈”是什么意思

> ID：15303280
> 
> 赞同：2
> 
> 时间：2013-03-08T21:05:46.070
> 
> 标签：jakarta-ee, java-ee-6, java-ee-5

术语“Java EE 堆栈”用一个简单的例子表示什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:07:39.387

它只是指 Java EE 技术堆栈，它是作为 Java EE 版本一部分的所有 JSR，其实现将由所有 Java EE 认证的应用程序服务器提供。（您自己不需要在应用程序中提供 API）。
例如，这里是 Java EE 6 堆栈：

[http://www.oracle.com/technetwork/java/javaee/tech/index.html](http://www.oracle.com/technetwork/java/javaee/tech/index.html)

# r - 如何在 R 中进行 vlookup 和填写（如在 Excel 中）？

> ID：15303283
> 
> 赞同：94
> 
> 时间：2013-03-08T21:05:54.077
> 
> 标签：r, lookup

我有一个大约 105000 行和 30 列的数据集。我有一个分类变量，我想将它分配给一个数字。在 Excel 中，我可能会使用`VLOOKUP`并填充。

我将如何去做同样的事情`R`？

本质上，我所拥有的是一个`HouseType`变量，我需要计算`HouseTypeNo`. 以下是一些示例数据：

```
HouseType HouseTypeNo
Semi            1
Single          2
Row             3
Single          2
Apartment       4
Apartment       4
Row             3 
```

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-03-09T05:51:00.440

如果我正确理解了您的问题，这里有四种方法可以执行与 Excel 等效的操作`VLOOKUP`并使用以下方法填写`R`：

```
# load sample data from Q
hous <- read.table(header = TRUE, 
                   stringsAsFactors = FALSE, 
text="HouseType HouseTypeNo
Semi            1
Single          2
Row             3
Single          2
Apartment       4
Apartment       4
Row             3")

# create a toy large table with a 'HouseType' column 
# but no 'HouseTypeNo' column (yet)
largetable <- data.frame(HouseType = as.character(sample(unique(hous$HouseType), 1000, replace = TRUE)), stringsAsFactors = FALSE)

# create a lookup table to get the numbers to fill
# the large table
lookup <- unique(hous)
  HouseType HouseTypeNo
1      Semi           1
2    Single           2
3       Row           3
5 Apartment           4 
```

以下是使用表格`HouseTypeNo`中`largetable`的值填写的四种方法：`lookup`

首先`merge`在基地：

```
# 1\. using base 
base1 <- (merge(lookup, largetable, by = 'HouseType')) 
```

以命名向量为基础的第二种方法：

```
# 2\. using base and a named vector
housenames <- as.numeric(1:length(unique(hous$HouseType)))
names(housenames) <- unique(hous$HouseType)

base2 <- data.frame(HouseType = largetable$HouseType,
                    HouseTypeNo = (housenames[largetable$HouseType])) 
```

三、使用`plyr`包：

```
# 3\. using the plyr package
library(plyr)
plyr1 <- join(largetable, lookup, by = "HouseType") 
```

四、使用`sqldf`包

```
# 4\. using the sqldf package
library(sqldf)
sqldf1 <- sqldf("SELECT largetable.HouseType, lookup.HouseTypeNo
FROM largetable
INNER JOIN lookup
ON largetable.HouseType = lookup.HouseType") 
```

如果可能`largetable`不存在某些房屋类型，`lookup`则将使用左连接：

```
sqldf("select * from largetable left join lookup using (HouseType)") 
```

也需要对其他解决方案进行相应的更改。

那是你想做的吗？让我知道您喜欢哪种方法，我会添加评论。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2015-10-20T20:34:29.560

我想你也可以使用`match()`：

```
largetable$HouseTypeNo <- with(lookup,
                     HouseTypeNo[match(largetable$HouseType,
                                       HouseType)]) 
```

如果我打乱`lookup`.

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-10-22T12:50:53.287

我也喜欢使用`qdapTools::lookup`或速记二元运算符`%l%`。它的工作原理与 Excel vlookup 相同，但它接受与列号相反的名称参数

```
## Replicate Ben's data:
hous <- structure(list(HouseType = c("Semi", "Single", "Row", "Single", 
    "Apartment", "Apartment", "Row"), HouseTypeNo = c(1L, 2L, 3L, 
    2L, 4L, 4L, 3L)), .Names = c("HouseType", "HouseTypeNo"), 
    class = "data.frame", row.names = c(NA, -7L))

largetable <- data.frame(HouseType = as.character(sample(unique(hous$HouseType), 
    1000, replace = TRUE)), stringsAsFactors = FALSE)

## It's this simple:
library(qdapTools)
largetable[, 1] %l% hous 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-12-11T18:04:34.670

发帖人没有询问是否查找值 if `exact=FALSE`，但我将其添加为我自己和可能其他人参考的答案。

如果您正在查找分类值，请使用其他答案。

Excel`vlookup`还允许您将数值与第 4 个参数 (1) 近似匹配`match=TRUE`。我想像`match=TRUE`在温度计上查找值一样。默认值为 FALSE，非常适合分类值。

如果您想大致匹配（执行查找），R 有一个名为 的函数`findInterval`，它（顾名思义）将找到包含连续数值的区间/bin。

但是，假设您想要`findInterval`多个值。您可以编写一个循环或使用一个应用函数。但是，我发现采用 DIY 矢量化方法更有效。

假设您有一个由 x 和 y 索引的值网格：

```
grid <- list(x = c(-87.727, -87.723, -87.719, -87.715, -87.711), 
             y = c(41.836, 41.839, 41.843, 41.847, 41.851), 
             z = (matrix(data = c(-3.428, -3.722, -3.061, -2.554, -2.362, 
                                  -3.034, -3.925, -3.639, -3.357, -3.283, 
                                  -0.152, -1.688, -2.765, -3.084, -2.742, 
                                   1.973,  1.193, -0.354, -1.682, -1.803, 
                                   0.998,  2.863,  3.224,  1.541, -0.044), 
                         nrow = 5, ncol = 5))) 
```

并且您有一些想要通过 x 和 y 查找的值：

```
df <- data.frame(x = c(-87.723, -87.712, -87.726, -87.719, -87.722, -87.722), 
                 y = c(41.84, 41.842, 41.844, 41.849, 41.838, 41.842), 
                 id = c("a", "b", "c", "d", "e", "f") 
```

这是可视化的示例：

```
contour(grid)
points(df$x, df$y, pch=df$id, col="blue", cex=1.2) 
```

[![等高线图](../Images/2f773e9b1a2ef121390d9d238859f08f.png)](https://i.stack.imgur.com/o1gMA.png)

您可以使用这种类型的公式找到 x 间隔和 y 间隔：

```
xrng <- range(grid$x)
xbins <- length(grid$x) -1
yrng <- range(grid$y)
ybins <- length(grid$y) -1
df$ix <- trunc( (df$x - min(xrng)) / diff(xrng) * (xbins)) + 1
df$iy <- trunc( (df$y - min(yrng)) / diff(yrng) * (ybins)) + 1 
```

您可以更进一步，对 z 值执行（简单的）插值，`grid`如下所示：

```
df$z <- with(df, (grid$z[cbind(ix, iy)] + 
                      grid$z[cbind(ix + 1, iy)] +
                      grid$z[cbind(ix, iy + 1)] + 
                      grid$z[cbind(ix + 1, iy + 1)]) / 4) 
```

这为您提供了这些值：

```
contour(grid, xlim = range(c(grid$x, df$x)), ylim = range(c(grid$y, df$y)))
points(df$x, df$y, pch=df$id, col="blue", cex=1.2)
text(df$x + .001, df$y, lab=round(df$z, 2), col="blue", cex=1) 
```

[![带值的等高线图](../Images/195db98dc5ef5529ff554bc567e796df.png)](https://i.stack.imgur.com/y3Oge.png)

```
df
#         x      y id ix iy        z
# 1 -87.723 41.840  a  2  2 -3.00425
# 2 -87.712 41.842  b  4  2 -3.11650
# 3 -87.726 41.844  c  1  3  0.33150
# 4 -87.719 41.849  d  3  4  0.68225
# 6 -87.722 41.838  e  2  1 -3.58675
# 7 -87.722 41.842  f  2  2 -3.00425 
```

请注意，ix 和 iy 也可以通过使用 的循环找到`findInterval`，例如，这是第二行的一个示例

```
findInterval(df$x[2], grid$x)
# 4
findInterval(df$y[2], grid$y)
# 2 
```

哪个匹配`ix`并且`iy`在`df[2]`

脚注： (1) vlookup 的第四个参数以前称为“match”，但在引入功能区后，它被重命名为“[range_lookup]”。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-12-09T19:08:47.863

**@Ben 答案的解决方案 #2**在其他更通用的示例中不可重现。它恰好在示例中给出了正确的查找，因为唯一`HouseType`的 in`houses`以递增的顺序出现。试试这个：

```
hous <- read.table(header = TRUE,   stringsAsFactors = FALSE,   text="HouseType HouseTypeNo
  Semi            1
  ECIIsHome       17
  Single          2
  Row             3
  Single          2
  Apartment       4
  Apartment       4
  Row             3")

largetable <- data.frame(HouseType = as.character(sample(unique(hous$HouseType), 1000, replace = TRUE)), stringsAsFactors = FALSE)
lookup <- unique(hous) 
```

Bens 解决方案#2 给出

```
housenames <- as.numeric(1:length(unique(hous$HouseType)))
names(housenames) <- unique(hous$HouseType)
base2 <- data.frame(HouseType = largetable$HouseType,
                    HouseTypeNo = (housenames[largetable$HouseType])) 
```

当

```
unique(base2$HouseTypeNo[ base2$HouseType=="ECIIsHome" ])
[1] 2 
```

当查找表中的正确答案是 17 时

正确的做法是

```
 hous <- read.table(header = TRUE,   stringsAsFactors = FALSE,   text="HouseType HouseTypeNo
      Semi            1
      ECIIsHome       17
      Single          2
      Row             3
      Single          2
      Apartment       4
      Apartment       4
      Row             3")

largetable <- data.frame(HouseType = as.character(sample(unique(hous$HouseType), 1000, replace = TRUE)), stringsAsFactors = FALSE)

housenames <- tapply(hous$HouseTypeNo, hous$HouseType, unique)
base2 <- data.frame(HouseType = largetable$HouseType,
  HouseTypeNo = (housenames[largetable$HouseType])) 
```

现在查找已正确执行

```
unique(base2$HouseTypeNo[ base2$HouseType=="ECIIsHome" ])
ECIIsHome 
       17 
```

我试图编辑 Bens 的答案，但由于我无法理解的原因而被拒绝。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-03-08T21:30:09.483

从...开始：

```
houses <- read.table(text="Semi            1
Single          2
Row             3
Single          2
Apartment       4
Apartment       4
Row             3",col.names=c("HouseType","HouseTypeNo")) 
```

... 您可以使用

```
as.numeric(factor(houses$HouseType)) 
```

...为每种房屋类型提供唯一编号。你可以在这里看到结果：

```
> houses2 <- data.frame(houses,as.numeric(factor(houses$HouseType)))
> houses2
  HouseType HouseTypeNo as.numeric.factor.houses.HouseType..
1      Semi           1                                    3
2    Single           2                                    4
3       Row           3                                    2
4    Single           2                                    4
5 Apartment           4                                    1
6 Apartment           4                                    1
7       Row           3                                    2 
```

...所以你最终会在行上得到不同的数字（因为这些因素是按字母顺序排列的）但模式相同。

（编辑：这个答案中的剩余文本实际上是多余的。我突然想到要检查一下，结果发现，`read.table()`当它首先被读入数据框时，已经使 house$HouseType 成为一个因素）。

但是，将 HouseType 转换为一个因子可能会更好，这会给您带来与 HouseTypeNo 相同的好处，但会更容易解释，因为房屋类型是命名的而不是编号的，例如：

```
> houses3 <- houses
> houses3$HouseType <- factor(houses3$HouseType)
> houses3
  HouseType HouseTypeNo
1      Semi           1
2    Single           2
3       Row           3
4    Single           2
5 Apartment           4
6 Apartment           4
7       Row           3
> levels(houses3$HouseType)
[1] "Apartment" "Row"       "Semi"      "Single" 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-10-20T20:37:18.243

您可以`mapvalues()`从 plyr 包中使用。

**初始数据：**

```
dat <- data.frame(HouseType = c("Semi", "Single", "Row", "Single", "Apartment", "Apartment", "Row"))

> dat
  HouseType
1      Semi
2    Single
3       Row
4    Single
5 Apartment
6 Apartment
7       Row 
```

**查找/人行横道表：**

```
lookup <- data.frame(type_text = c("Semi", "Single", "Row", "Apartment"), type_num = c(1, 2, 3, 4))
> lookup
  type_text type_num
1      Semi        1
2    Single        2
3       Row        3
4 Apartment        4 
```

**创建新变量：**

```
dat$house_type_num <- plyr::mapvalues(dat$HouseType, from = lookup$type_text, to = lookup$type_num) 
```

或者对于简单的替换，您可以跳过创建长查找表并直接一步完成：

```
dat$house_type_num <- plyr::mapvalues(dat$HouseType,
                                      from = c("Semi", "Single", "Row", "Apartment"),
                                      to = c(1, 2, 3, 4)) 
```

结果：

```
> dat
  HouseType house_type_num
1      Semi              1
2    Single              2
3       Row              3
4    Single              2
5 Apartment              4
6 Apartment              4
7       Row              3 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-05-21T23:03:54.827

使用`merge`与 Excel 中的查找不同，因为如果未在查找表中强制执行主键约束，它可能会复制（乘以）您的数据，或者如果您不使用`all.x = T`.

为了确保您不会遇到麻烦并安全查找，我建议了两种策略。

第一个是检查查找键中的重复行数：

```
safeLookup <- function(data, lookup, by, select = setdiff(colnames(lookup), by)) {
  # Merges data to lookup making sure that the number of rows does not change.
  stopifnot(sum(duplicated(lookup[, by])) == 0)
  res <- merge(data, lookup[, c(by, select)], by = by, all.x = T)
  return (res)
} 
```

这将迫使您在使用之前对查找数据集进行重复数据删除：

```
baseSafe <- safeLookup(largetable, house.ids, by = "HouseType")
# Error: sum(duplicated(lookup[, by])) == 0 is not TRUE 

baseSafe<- safeLookup(largetable, unique(house.ids), by = "HouseType")
head(baseSafe)
# HouseType HouseTypeNo
# 1 Apartment           4
# 2 Apartment           4
# ... 
```

第二个选项是通过从查找数据集中获取第一个匹配值来重现 Excel 行为：

```
firstLookup <- function(data, lookup, by, select = setdiff(colnames(lookup), by)) {
  # Merges data to lookup using first row per unique combination in by.
  unique.lookup <- lookup[!duplicated(lookup[, by]), ]
  res <- merge(data, unique.lookup[, c(by, select)], by = by, all.x = T)
  return (res)
}

baseFirst <- firstLookup(largetable, house.ids, by = "HouseType") 
```

`lookup`这些函数与添加多列时略有不同。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-04-14T16:18:32.217

该`lookup`软件包可以在这里使用：

```
library(lookup)
# reference data
hous <- data.frame(HouseType=c("Semi","Single","Row","Single","Apartment","Apartment","Row"),
                   HouseTypeNo=c(1,2,3,2,4,4,3))
# new large data with HouseType but no HouseTypeNo
largetable <- data.frame(HouseType = sample(unique(hous$HouseType), 1000, replace = TRUE))

# vector approach
largetable$num1 <- lookup(largetable$HouseType, hous$HouseType, hous$HouseTypeNo)
# dataframe approach
largetable$num2 <- vlookup(largetable$HouseType, hous, "HouseType", "HouseTypeNo")

head(largetable)
#   HouseType num1 num2
# 1      Semi    1    1
# 2      Semi    1    1
# 3 Apartment    4    4
# 4      Semi    1    1
# 5    Single    2    2
# 6    Single    2    2 
```

# python - 多个 y 刻度，但只有一个启用平移和缩放

> ID：15303284
> 
> 赞同：7
> 
> 时间：2013-03-08T21:05:54.970
> 
> 标签：python, matplotlib, plot, zooming

考虑以下用于绘制 matplotlib 图的 python 代码：

```
import matplotlib.pylab as pp
import numpy as np

alpha = np.linspace(0, 2 * np.pi, 400)
sig1 = np.sin(alpha)
sig2 = np.sin(2 * alpha) + 2 * (alpha > np.pi)

ax1 = pp.subplot(111)
ax2 = ax1.twinx()

ax1.plot(alpha, sig1, color='b')
ax2.plot(alpha, sig2, color='r')
ax1.set_ylabel('sig1 value', color='b')
ax2.set_ylabel('sig2 value', color='r')
pp.grid()
pp.show() 
```

给我一个美好的情节

![在此处输入图像描述](../Images/30bc08ed72130ce37c69bac1be948a48.png)

我想了解如何禁用其中一个轴进行平移/缩放，因此当我使用平移/缩放工具时，例如，只有 ax2 会重新缩放。有没有办法做到这一点？我想以编程方式进行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T23:46:44.223

您可以使用以下方法执行此操作`ax2.set_navigate(False)`：

```
from matplotlib.pyplot import *
import numpy as np

fig,ax1 = subplots(1,1)
ax2 = ax1.twinx()
ax2.set_navigate(False)
x = np.linspace(0,2*np.pi,100)
ax1.plot(x,np.sin(x),'b')
ax1.set_xlabel('Scaleable axis')
ax1.set_ylabel('Scaleable axis')
ax2.plot(x,np.sin(x+1),'r')
ax2.set_ylabel('Static axis',weight='bold') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-24T11:24:45.627

一个稍微复杂一点的例子，有两个绘图区域和三个垂直轴。只有下部子图的公共水平轴和左侧垂直轴是交互的。

```
fig, ax_left = plt.subplots()
ax_right = ax_left.twinx()
ax_status = make_axes_locatable(ax_left).append_axes('top', size=1.2, pad=0., sharex=ax_left)
ax_status.xaxis.set_tick_params(labelbottom=False)
ax_right.set_navigate(False)
ax_status.set_navigate(False) 
```

在我`set_navigate(False)`根据 ali_m 的回答添加之前，下图的两个垂直轴都受到在下图中垂直拖动鼠标的影响，而状态轴不受影响，**但**仅在第一个鼠标手势之后。第一次拖动鼠标，所有轴都会受到影响。这似乎是 matplotlib 中的一个错误，刚刚报告为 #12613。

# mule - Mule CloudHub 默认使用 Java SE 还是 EE？

> ID：15303286
> 
> 赞同：0
> 
> 时间：2013-03-08T21:06:02.547
> 
> 标签：mule, mule-studio

我正在将应用程序上传到 CloudHub 并收到 javax.validation.ValidatorFactory 的 ClassNotFound 错误。我相信 javax.validation 包只在 EE 中找到，而不是 SE，它在我的 localhost 环境中可用。那么，默认情况下，EE 对 CloudHub 应用程序不可用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T23:22:27.927

Mule 不是 JavaEE 容器，因此它不会将所有 JavaEE 扩展嵌入到标准 JDK。

如果您下载 Mule Standalone EE 并查看其中的 JAR，`lib/opt`您将看到默认情况下可用的 JavaEE JAR，包括（但不限于）：

*   激活 1.1
*   JMS 1.1
*   JTA 1.1

如果您需要更多的 JAR 或不同的版本，您可以自行决定将它们与您的应用程序一起提供。如果您想使用 Mule 提供的不同版本的 JAR，您可能必须使用类加载器过滤。

# java - Java对二维字符串数组进行排序不再起作用

> ID：15303287
> 
> 赞同：0
> 
> 时间：2013-03-08T21:06:08.553
> 
> 标签：java

好的，所以我正在研究一种对二维数组进行排序的方法，其中一个维度有一个字符串，另一个维度有一个 int（为方便起见，存储为字符串）我到处寻找关于如何对数组进行排序的解决方案一种将 firstArray[1] 中的数据同时移动的方式（其索引是移动的子项：）作为 firstArray[0]

这个效果是通过使用这个来实现的

```
Arrays.sort(fps, new Comparator<String[]>() {
            @Override
            public int compare(final String[] entry1, final String[] entry2) {
                final String time1 = entry1[0];
                final String time2 = entry2[0];
                return time1.compareTo(time2);
            }
        }); 
```

现在我在这件事上遇到了麻烦。我将在这里逐步完成代码，如果您发现它有问题，请告诉我。

首先我有数组：

```
String[][] fps = new String[2][15];
Arrays.fill(fps[0], "empty");
Arrays.fill(fps[1], "0"); 
```

其次，我用程序的另一部分给我的一些东西填充数组，对于这个例子，我将使用垃圾值：

```
fps[0][0] = "Java";
fps[1][0] = "1";

fps[0][1] = "C++";
fps[1][1] = "14";

fps[0][2] = "C#";
fps[1][2] = "21";

fps[0][3] = "Python";
fps[1][3] = "9001"; 
```

现在是我调用上述排序命令的地方（请注意，这些值不会完全填充数组，有些 bin 没有新数据。）

```
Arrays.sort(fps, new Comparator<String[]>() {
            @Override
            public int compare(final String[] entry1, final String[] entry2) {
                final String time1 = entry1[0];
                final String time2 = entry2[0];
                return time1.compareTo(time2);
            }
        }); 
```

现在我们对数组进行了排序，我想在二维数组中搜索一个值，所以我使用 Arrays.search 来查找查询所在的 bin。

```
int searchIndex = Arrays.binarySearch(fps[0], "Java");
System.out.println(searchIndex); 
```

这就是代码，我认为我已经将问题隔离为排序部分无法正常工作。如果你们还有任何问题，请在评论中发表。同样，如果您对这个令人费解的问题有可能的解决方案，我很想听听！

* * *

PS：为了清楚我有这个工作，然后我关闭了我的lappy，下次我启动（从那时起）它没有工作。

PPS：根据要求输出：

电流输出：

```
-16
FPS:
    0 ---- No FPS For you!
    1 ---- Only one FPS
    2 ---- Only two FPS
    3 ---- Only three FPS
    4 ---- Only four FPS
    5 ---- Only five FPS
    6 ---- Only six FPS
    7 ---- Only seven FPS
    8 ---- Only eight FPS
    9 ---- Only nine FPS
    1 ---- Blah! 
```

预期/希望的输出：

```
-16
FPS:
    1 ---- Blah!
    0 ---- No FPS For you!
    8 ---- Only eight FPS
    5 ---- Only five FPS
    4 ---- Only four FPS
    9 ---- Only nine FPS
    1 ---- Only one FPS
    7 ---- Only seven FPS
    6 ---- Only six FPS
    3 ---- Only three FPS
    2 ---- Only two FPS 
```

PPPS：如果您想查看我目前正在使用的代码：

```
import java.util.*;

public class Test
{
  public static void main (String [] args)
  {

    String[][] fps = new String[2][15];
    Arrays.fill(fps[0], "empty");//Fill up all the spaces so the sort and the search dont crap out
    Arrays.fill(fps[1], "0"); 

    //fps[ROW][COLOUMN] = Value + "";
    //fps[ROW][COLOUMN] = Value Instances + "";

    fps[0][0] = "No FPS For you!";
    fps[1][0] = 0 + "";

    fps[0][1] = "Only one FPS";
    fps[1][1] = 1 + "";

    fps[0][2] = "Only two FPS";
    fps[1][2] = 2 + "";

    fps[0][3] = "Only three FPS";
    fps[1][3] = 3 + "";

    fps[0][4] = "Only four FPS";
    fps[1][4] = 4 + "";

    fps[0][5] = "Only five FPS";
    fps[1][5] = 5 + "";

    fps[0][6] = "Only six FPS";
    fps[1][6] = 6 + "";

    fps[0][7] = "Only seven FPS";
    fps[1][7] = 7 + "";

    fps[0][8] = "Only eight FPS";
    fps[1][8] = 8 + "";

    fps[0][9] = "Only nine FPS";
    fps[1][9] = 9 + "";
    /* FUMBLE WITH ARRAY AFTER THIS LINE ONLY!*/

    //Things to have inputed into the method:
    //currentValue (from the line)
    //currentVariable (so we know what the name of the array we're dealing with is named)

    String currentValue = "Blah!"; //This is the value that will be searched for in the array, if found its child int is incremented by one, if not found it is added to the array.

    //Do a binary sort then search in the fps[0] side of things, makesure that the [1] are carried with the [0] changes.

    Arrays.sort(fps, new Comparator<String[]>() {
            @Override
            public int compare(final String[] entry1, final String[] entry2) {
                final String time1 = entry1[0];
                final String time2 = entry2[0];
                return time1.compareTo(time2);
            }
        });

    int searchIndex = Arrays.binarySearch(fps[0], currentValue); //Get the index of the current search value
    System.out.println(searchIndex); //  <-- Returns a neg number each time which shows that the sorting is not working correctly, and therefore the search is being thrown off... need to somehow fix.

    if(searchIndex >= 0)// If the value is found
    {
      fps[0][searchIndex] = (Integer.parseInt(fps[0][searchIndex]) + 1) + "";  //Add one instance to the value

    } //end if
    else //Otherwise find the next open value spot and change it to the current search query (and assign its instances to 1
    {

      for(int i = 0; i < fps[1].length ; i++)
      {
        if(fps[1][i].equals("empty"))
        {
          fps[1][i] = currentValue;
          fps[0][i] = 1 + "";
          i = fps[1].length; //force the for loop to exit

          Arrays.sort(fps, new Comparator<String[]>() {
            @Override
            public int compare(final String[] entry1, final String[] entry2) {
                final String time1 = entry1[0];
                final String time2 = entry2[0];
                return time1.compareTo(time2);
            }
        }); //end Arrays.sort
        }//end if
      }//end for
    }//end else

    //... Print array in rectangular form
    System.out.println("FPS:");

    for (int i =0; (!(fps[1][i].equals("empty")) ) ; i++)
    {
      System.out.println("\t" + fps[0][i] + " ---- " + fps[1][i] );

    }//end for
  }//end main
}//end class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:37:09.803

我相信你的索引是倒退的。你正在排序`fps`。 `fps`只有 2 个正在排序的元素。我相信您正在尝试对 15 个元素进行排序。如果您反转索引，我相信您将获得所需的排序。

```
String[][] fps = new String[15][2]; 
```

在这种情况下，您可能会考虑对象数组而不是二维数组。它似乎是一个更合乎逻辑的结构，可以避免这种混淆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T02:47:26.573

除了[这个Answer](https://stackoverflow.com/a/15303750/139985)指出的问题外，这里还有一个问题：

```
int searchIndex = Arrays.binarySearch(fps[0], "Java"); 
```

由于您使用自定义比较器进行排序，因此您需要使用相同的自定义比较器进行二分搜索。使用`binarySearch(T[] a, T key, Comparator<? super T> c)`. （如果你使用 2-arg 版本，你应该得到一个异常，因为`String[]`它没有实现`Comparable`。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T02:33:07.740

> 你有关于这些对象的任何资源吗（在与此类似的实例中使用时

有关在使用自定义对象时如何执行此操作的示例，请参阅：[使用 Comparator 降序排序（用户定义的类） 。](https://stackoverflow.com/questions/1946668/sorting-using-comparator-descending-order-user-defined-classes/1947527#1947527)

> 一个维度有一个字符串，然后另一个维度有一个 int （为了方便起见，存储为字符串）

它不方便，因为对数字的字符串表示形式进行排序与​​对数字进行排序不同。使用自定义对象将允许您正确存储数据，以便您可以进行适当的排序。

# clang - UNREACHABLE 执行！尝试生成 PTX 时出错

> ID：15303288
> 
> 赞同：4
> 
> 时间：2013-03-08T21:06:10.140
> 
> 标签：clang, llvm, llvm-clang, ptx

我正在尝试使用 clang/LLVM 3.2 版为“nbody”示例程序的内核（nbody_kernel.cu）生成 PTX 代码。nbody CUDA 程序在 Nvidia 的 SDK 中可用。

我指的是[https://github.com/jholewinski/llvm-ptx-samples](https://github.com/jholewinski/llvm-ptx-samples)项目。

以下是我的命令，

clang++ -O4 -S -I/usr/local/cuda/include -emit-llvm -target nvptx64 nbody_kernel.cu -o nbody_kernel.ll

选择 -O3 -loop-unroll -unroll-allow-partial nbody_kernel.ll -o nbody_kernel.ll

llc nbody_kernel.ll -o nbody_kernel.ptx

执行最后一个命令（llc）后，我执行了一个 UNREACHABLE ！以下堆栈跟踪错误

```
UNREACHABLE executed!
0  libLLVM-3.2svn.so 0x00000033eb79fadf
1  libLLVM-3.2svn.so 0x00000033eb7a01d6
2  libpthread.so.0   0x0000003825a0f500
3  libc.so.6         0x0000003824e328a5 gsignal + 53
4  libc.so.6         0x0000003824e34085 abort + 373
5  libLLVM-3.2svn.so 0x00000033eb788320 llvm::llvm_unreachable_internal(char const*, char const*, unsigned int) + 336
6  libLLVM-3.2svn.so 0x00000033eb43dc37
7  libLLVM-3.2svn.so 0x00000033eb4411a0
8  libLLVM-3.2svn.so 0x00000033eb4422a5
9  libLLVM-3.2svn.so 0x00000033eb210d76 llvm::FPPassManager::doInitialization(llvm::Module&) + 54
10 libLLVM-3.2svn.so 0x00000033eb217ec7 llvm::FPPassManager::runOnModule(llvm::Module&) + 23
11 libLLVM-3.2svn.so 0x00000033eb217ac5 llvm::MPPassManager::runOnModule(llvm::Module&) + 389
12 libLLVM-3.2svn.so 0x00000033eb217c1b llvm::PassManagerImpl::run(llvm::Module&) + 107
13 llc               0x000000000040d157 main + 5415
14 libc.so.6         0x0000003824e1ecdd __libc_start_main + 253
15 llc               0x0000000000409a29
Stack dump:
0\.  Program arguments: llc nbody_kernel.ll -o nbody_kernel.ptx 
1\.  Running pass 'Function Pass Manager' on module 'nbody_kernel.ll'.
Aborted (core dumped) 
```

我用 __builtin_ptx_read_tid_x() 等替换了全局索引，例如 threadIdx.x。生成 LLVM IR（即 .ll）没有问题。尝试使用 llc 从 IR 生成 PTX 时弹出错误。

关于这里可能发生的事情的任何指示？

# c# - 检测焦点变化并找到它 C#

> ID：15303294
> 
> 赞同：2
> 
> 时间：2013-03-08T21:06:27.307
> 
> 标签：c#, api, window, focus, hook

我需要一个底层进程来收集有关 Windows 使用的其他应用程序的信息。我怀疑这将使用 WAPI 挂钩来完成。我想做的是让我的程序检测 Windows 何时将焦点从一个程序更改为另一个程序，并告诉我当前哪个程序具有焦点。

首先，我需要一个在 Windows 每次在两个应用程序之间交换焦点时触发的事件。到目前为止，我发现的所有事件都只处理对其正在使用的程序所做的更改，但我需要找到所有焦点更改，即使它位于其他两个程序之间。

我还需要一个让我聚焦窗口的功能。[这](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633505%28v=vs.85%29.aspx)会起作用，还是仅在内部起作用（当前应用程序中的窗口而不是其他程序中的窗口）？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T21:17:07.120

根据您需要焦点变化检测系统的准确程度，您可能能够使用您描述的 API 函数**GetForegroundWindow**轮询前台窗口的服务（是的，这是系统范围的，而不是特定于进程的）。

然后，您可以使用该函数的句柄来确定哪个进程是当前活动/聚焦的进程。然后检索该进程的焦点元素（子窗口）..

```
HWND hwnd = GetForegroundWindow();
DWORD remoteThreadId = GetWindowThreadProcessId(hwnd, NULL);
DWORD currentThreadId = GetCurrentThreadId();
AttachThreadInput(rThreadId, curThreadId, TRUE);
HWND focusElement = GetFocus();
AttachThreadInput(rThreadId, curThreadId, FALSE); 
```

继续这样做..并做任何你需要做的事情`focusElement`

**更新**

好吧，显然，正如@Kenneth K. 在评论中发布的那样，您可以挂钩一个全局**EVENT_SYSTEM_FOREGROUND**事件，以便在前台（聚焦）窗口更改时通知您的应用程序。这样您就不需要连续循环来检测这些变化。

```
EVENT_SYSTEM_FOREGROUND = 3;
WINEVENT_OUTOFCONTEXT = 0; 
```

您可以按照[此答案](https://stackoverflow.com/questions/4372055/detect-active-window-changed-using-c-sharp-without-polling/10280800#10280800)中的示例查看如何挂钩此事件并获取通知。[然后，每当前台（聚焦）窗口发生更改时，您可以使用SetWindowsHookEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)函数挂钩该窗口的消息循环并查看该窗口的焦点更改事件。

另一种选择是查阅[MSDN 上的系统事件列表，](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318066%28v=vs.85%29.aspx)看看是否有一个可以代替**EVENT_SYSTEM_FOREGROUND**使用，或者与它一起用于检测控制级焦点事件。也许**EVENT_OBJECT_FOCUS**可能有用。

如果这仍然不清楚，请告诉我。

# c - 我的 C 语法的左递归错误

> ID：15303301
> 
> 赞同：0
> 
> 时间：2013-03-08T21:06:39.020
> 
> 标签：c, arrays, recursion, antlr, grammar

我的 C 语法存在左递归错误，可在此处找到 [http://www.archive-host.com/files/1959502/24fe084677d7655eb57ba66e1864081450017dd9/cAST.txt](http://www.archive-host.com/files/1959502/24fe084677d7655eb57ba66e1864081450017dd9/cAST.txt)。当我更换

```
initializer
 : assignment_expression
 | '{' initializer_list '}'
 ; 
```

和

```
initializer
 : assignment_expression
 | '{' initializer_list '}'
 |  initializer_list
 ; 
```

我这样做是因为我试图在 Ctrl-D 中执行此代码

```
int k [2] = 1,4; 
```

但是，此代码确实适用于第一个版本

```
int k [2] = {1,4}; 
```

请问有没有办法不用{}？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T21:13:51.727

为此，您需要引入上下文敏感性（或按顺序排列的东西）。

问题是它`1,4`已经有了定义的含义。它是一个使用逗号运算符的表达式，它计算`1`，丢弃结果，然后计算`4`，这是整个表达式的值。

因此，要完成这项工作，您必须对初始化程序使用与普通表达式不同的语法（并且在此过程中，与当前定义的 C 大相径庭）。从纯语法的角度来看，这几乎肯定不需要在上下文敏感的情况下完成，但它基本上将涉及定义初始化器的语法与普通表达式的语法分开/并行，而不是为两者使用通用语法。

# ida - 声明多个结构字段

> ID：15303302
> 
> 赞同：2
> 
> 时间：2013-03-08T21:06:45.603
> 
> 标签：ida

当一个结构被 malloc 时，很明显该结构有多大。然而，为 256 字节的结构声明 64 个虚拟 dword 字段是非常乏味的。将结构声明为具有固定大小的数组并没有多大帮助，因为您不能单独命名元素。目前我正在使用 AutoHotKey 脚本来添加字段，无论出于何种原因，该脚本今天都停止了工作。

那么：有没有办法一次在结构声明中添加多个字段？也许通过一些 idc api？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-01-06T21:01:38.523

在 IDA 中有一个简洁但不直观的技巧，我一直在使用它：定义一个数组，但在数组对话框中取消选中“[创建为数组](https://www.hex-rays.com/products/ida/support/idadoc/455.shtml "创建为数组")”复选框。这样做是在结构中创建任意数量的元素，但不会用它们创建数组。

工作流程是这样的：

*   在您想要元素列表的偏移处创建您想要的类型的单个元素（例如 dword）。（当您只是创建一个您知道大小的空结构时，这通常为零，但对内部结构一无所知）。
*   将光标放在刚刚创建的元素上按 * 键。
*   在数组对话框中输入所需的元素数。
*   取消选中对话框左下方的“创建为数组”复选框。
*   点击确定。

IDA 将根据您的要求创建尽可能多的元素，但不会创建为数组。当您了解所有内容时，您可能需要稍后重新输入内容，但这为您提供了一个很好的框架。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-10T19:25:36.737

I'll give you two solutions. The first may not be exactly what you want, depending on the situation. I can elaborate on either method if you would like.

## The cheap method: Using filler arrays

If you have a large structure and there are only a few members whose purpose or size are known, it's often useful to fill in the gaps of the structure by creating temporary dummy arrays. This makes the structure definition more readable and maintainable in IDA, and it also allows you to shape the structure to a specific size without defining more members than you need to.

Let's say you have a structure which is known to be 0x400 bytes in size, and you know the definitions of the members at offsets +0x0 and +0x384\. Let's also say you know that there are words at +0x4 and +0x6, but you don't know what they represent yet. Then you might define the structure to be something like this:

```
00000000 MY_STRUCT       struc ; (sizeof=0x400)
00000000 ProcessID       dd
00000004 field_4         dw
00000006 field_6         dw
00000008 __filler1       db 892 dup(?)
00000384 ProcessObject   dd ?
00000388 __filler2       db 116 dup(?)
000003FC __filler3       dd ?
00000400 MY_STRUCT       ends 
```

This is much more readable than it would be if I didn't have the `__fillerX` elements there. It's also arguably more correct, because you have no way of knowing ahead of time if all the members of the structure are actually qwords.

The reason I have `__filler3` at the bottom is because if I ever want to define an element in the region of `__filler2`, I can wipe `__filler2` (and later add new filler members in that space) without shrinking the overall size of the structure. In fact, if the size is the only thing known at the time of structure definition, defining a final element should probably be the first thing you do. Then you'll never need to figure out the sizes of the filler arrays yourself; the default array size that IDA gives you will always be correct. To do that quickly, I usually just create an array of size N-4 and tack on a dword at the end.

## But I actually *want* 32 qwords!

I can't think of any practical situations where this would be useful, but maybe you can!

In any case, you can, in fact, do this through the IDA API. The functions you want are `AddStrucEx` and `AddStrucMember`. You should be able to get most of the information you want from the IDA help docs.

If you want a working example of an IDC script to generate structures, you can generate one yourself. Create a few structures, then go to `File > Produce File > Dump typeinfo to IDC file...`.

Or this should also work (uses IDAPython):

```
id = AddStrucEx(-1, "EXAMPLE_STRUCT", 0)
for i in xrange(0,256,8):
    AddStrucMember(id, "field_%x"%i, i, FF_DATA|FF_QWRD, -1, 8) 
```

# c# - 需要 WCF 架构帮助

> ID：15303303
> 
> 赞同：5
> 
> 时间：2013-03-08T21:06:47.070
> 
> 标签：c#, wcf, architecture, wcf-binding, wcf-security

我们正计划实施我们的新软件应用程序，如下所示。

这种架构看起来是否适合目的？

**注意事项：**

*   电脑有很多
*   电脑有一个 WCF 客户端，因为它需要定期将数据上传到数据库。
*   PC 有一个服务器，因为终端服务器上的最终用户需要能够询问 pc 以获取信息
*   终端服务器是用户的图形用户界面，因此他们可以远程连接到特定的 PC 以询问 PC 以获取信息
*   我们在下面使用 basicHttpBinding

**我们还考虑了什么？**

*   我们尝试过 WCF NetPeerTcpBinding（即 P2P），但它不支持请求-回复操作。

*   我们已经尝试过 WCF Duplex，但是按照上面需要注意的项目部分中列出的要求，我们最终会在两端都有客户端和服务器。

![在此处输入图像描述](../Images/0680bab6546ad307e8f83d46473be284.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:09:17.727

好吧，我道歉，但我基本上不同意你的架构。

*   WCF 不是为请求-响应通信以外的任何东西而设计或适用的。它的全双工能力不会使您的服务器端向特定客户端发出通信，除非该客户端已经向服务器发出了连接。这意味着，为了与您的所有客户端实现享有盛誉的在线全双工通信 - 您的所有客户端都必须保持一个与服务器的开放端口。

*   每台 PC 拥有双客户端和服务器以实现在线全双工是向前迈出的一步，因为它将解决每个客户端保持端口打开的问题，但它在安全性方面存在缺点，因为这意味着特定的 PC 是打开的接收多个连接请求。如果您不小心，致命的重入可能会出现另一个问题。因此，基本上您将节省“端口”以换取架构的可维护性和对您的解决方案的适用性。

因此，如果您的目标是部署大约 200-300 台 PC，那么您的架构将会成立，但如果您的目标是部署数千台 PC，那么它就不会成立。

# objective-c - NSTextView 颜色和字体在清除后重置

> ID：15303306
> 
> 赞同：3
> 
> 时间：2013-03-08T21:07:12.547
> 
> 标签：objective-c, cocoa, nstextview

我为 NSPanel 内的 NSTextView 设置了一些默认字体和颜色。

但是，当我用 清除视图时`setString:@""`，不仅文本消失，而且所有默认颜色/字体格式都消失了。

在我做另一个之后`setString`，文本成为默认字体并再次变黑。

有人可以解释为什么会这样，我能做些什么来补救它？

**更新：**

感谢您对问题的帮助和澄清。在我设置字符串之后，我最终只是再次格式化它。

```
[self.txtLog setFont:[NSFont fontWithName:@"courier" size:12]];
[self.txtLog setTextColor:[NSColor colorWithSRGBRed:65.0/255 green:229.0/255 blue:235.0/255 alpha:1]]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T22:43:00.657

这是因为清除 NSTextView 并设置常规（非属性）字符串会删除格式，其中包括字体和颜色。

大多数时候，我设置了使用 HTML 格式化的属性字符串。我觉得非常方便。例如，这是我用来设置颜色和字体的两个宏：

```
#define color(string, color)   strAdd5(@"<font color=\"#",(color), @"\">", (string), @"</font>")
#define fontName(string, fontname) strAdd5(@"<span style=\"font-family: ",(fontname), @";\">", (string), @"</span>")
#define html2AttributedString(htmlString) [[[NSAttributedString alloc] initWithHTML:[(htmlString) dataUsingEncoding:NSUTF8StringEncoding]documentAttributes:NULL] autorelease] 
```

然后，我只需要在文本存储中设置属性字符串：

```
[textStorage setAttributedString:html2AttributedString(color(myNSString, @"FF0000"))] 
```

或使用 NSTextView 的 insertText

```
[textView insertText:html2AttributedString(fontName(myNSString, @"Courier New"))]; 
```

使用 HTML，您可以定义所有内容，包括居中和许多其他属性。但是，在转换文本之前，您必须将任何新行转换为 <BR />。

# ruby-on-rails - 更新关系属性时创建新条目

> ID：15303307
> 
> 赞同：0
> 
> 时间：2013-03-08T21:07:20.923
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在构建一个小型练习应用程序并且卡住了。我有这些模型一对多的关系：

票：

```
class Ticket < ActiveRecord::Base
  has_many :descriptions
end 
```

描述：

```
class Description < ActiveRecord::Base
  belongs_to :ticket
end 
```

该关系的目的是，每次您更新/编辑工单的描述时（仅当描述与之前的描述不同时），都会创建一个新的描述条目。这使我能够拥有该票证的先前描述的历史记录。描述是一个字符串，它将成为工单新建和编辑视图中的文本字段。

我在执行此操作时遇到了麻烦。我知道我很可能必须更改门票控制器和描述控制器中的代码，但我不确定如何。我也不确定如何实现工单视图。感谢您帮助我学习 Rails。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:36:39.750

您必须将嵌套的描述属性添加到您的工单表单

这是一篇使用accepts_nested_attributes_for的好文章： [http ://rubysource.com/complex-rails-forms-with-nested-attributes/](http://rubysource.com/complex-rails-forms-with-nested-attributes/)

还有一个 railscasts 视频： [http ://railscasts.com/episodes/196-nested-model-form-revised](http://railscasts.com/episodes/196-nested-model-form-revised)

# r - Weibull 累积分布函数从“fitdistr”命令开始

> ID：15303310
> 
> 赞同：1
> 
> 时间：2013-03-08T21:07:25.027
> 
> 标签：r, plot, statistics, cdf, weibull

我使用`fitdistr`R MASS 包中的函数来调整 Weibull 2 参数概率密度函数 (pdf)。

这是我的代码：

```
require(MASS)

h = c(31.194, 31.424, 31.253, 25.349, 24.535, 25.562, 29.486, 25.680, 26.079, 30.556,      30.552, 30.412, 29.344, 26.072, 28.777, 30.204, 29.677, 29.853, 29.718, 27.860, 28.919, 30.226, 25.937, 30.594, 30.614, 29.106, 15.208, 30.993, 32.075, 31.097, 32.073, 29.600, 29.031, 31.033, 30.412, 30.839, 31.121, 24.802, 29.181, 30.136, 25.464, 28.302, 26.018, 26.263, 25.603, 30.857, 25.693, 31.504, 30.378, 31.403, 28.684, 30.655,  5.933, 31.099, 29.417, 29.444, 19.785, 29.416, 5.682, 28.707, 28.450, 28.961, 26.694, 26.625, 30.568, 28.910, 25.170, 25.816, 25.820)

weib = fitdistr(na.omit(h),densfun=dweibull,start=list(scale=1,shape=5))

hist(h, prob=TRUE, main = "", xlab = "x", ylab = "y", xlim = c(0,40), breaks = seq(0,40,5))
curve(dweibull(x, scale=weib$estimate[1], shape=weib$estimate[2]),from=0, to=40, add=TRUE) 
```

现在，我想创建 Weibull 累积分布函数 (cdf) 并将其绘制为图形：

![在此处输入图像描述](../Images/fbf26ff32e8bb03fd7d649563bb5cb6f.png), 其中 x > 0, b = 比例, a = 形状

我尝试应用比例和形状参数来*`h`*使用上面的公式，但不是这样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T21:41:14.840

这是对累积密度函数的尝试。您只需要记住对采样点的间距进行调整（注意：它适用于均匀间距小于或等于 1 的采样点）：

```
cdweibull <- function(x, shape, scale, log = FALSE){
  dd <- dweibull(x, shape= shape, scale = scale, log = log)
  dd <- cumsum(dd) * c(0, diff(x))
  return(dd)
} 
```

尽管上面讨论了比例差异，但您可以将其绘制在您的图表上，如下所示`dweibull`：

```
require(MASS)

h = c(31.194, 31.424, 31.253, 25.349, 24.535, 25.562, 29.486, 25.680,
      26.079, 30.556, 30.552, 30.412, 29.344, 26.072, 28.777, 30.204, 
      29.677, 29.853, 29.718, 27.860, 28.919, 30.226, 25.937, 30.594, 
      30.614, 29.106, 15.208, 30.993, 32.075, 31.097, 32.073, 29.600, 
      29.031, 31.033, 30.412, 30.839, 31.121, 24.802, 29.181, 30.136, 
      25.464, 28.302, 26.018, 26.263, 25.603, 30.857, 25.693, 31.504, 
      30.378, 31.403, 28.684, 30.655,  5.933, 31.099, 29.417, 29.444, 
      19.785, 29.416, 5.682, 28.707, 28.450,  28.961, 26.694, 26.625, 
      30.568, 28.910, 25.170, 25.816, 25.820)

weib = fitdistr(na.omit(h),densfun=dweibull,start=list(scale=1,shape=5))

hist(h, prob=TRUE, main = "", xlab = "x", 
     ylab = "y", xlim = c(0,40), breaks = seq(0,40,5), ylim = c(0,1))

curve(cdweibull(x, scale=weib$estimate[1], shape=weib$estimate[2]),
  from=0, to=40, add=TRUE) 
```

![具有威布尔累积密度叠加的直方图](../Images/1123d720f069d19a3f597ed9c558a111.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T00:09:02.270

This works for my data but yours may differ. It uses `rweibull3` function from `FAdist` package.

```
>h=rweibull3(1000,2,2,2)

>#this gives some warnings...that I ignore.
>weib = fitdistr(h,densfun=dweibull3,start=list(scale=1,shape=5,thres=0.5))

There were 19 warnings (use warnings() to see them) 
```

The thing to be aware of is that the start values effect the way the fit proceeds. So if the start values are close to the true values, you will get fewer warnings.

```
>curve(dweibull3(   x, 
            scale=weib$estimate[1], 
            shape=weib$estimate[2], 
            thres=weib$estimate[3]),
            add=TRUE) 
```

![enter image description here](../Images/605cdb3f2b10845d7900306f6482a574.png)

# css - Twitter引导模式未显示正确的图像

> ID：15303313
> 
> 赞同：3
> 
> 时间：2013-03-08T21:07:36.747
> 
> 标签：css, twitter-bootstrap, modal-dialog, href

我无法显示单击以查看的特定图像的模式。

如果我使用带有类的链接，它将以单独的模式显示该专辑中的所有图像（必须将它们全部关闭）。我想为我单击“查看”的图像显示适当的模式，以便它是对应的。

如果我将此设置为 id 并在顶部 div 中创建一个 id，它将仅显示相册中的第一张图片，无论我点击什么图片。

我怎么能解决这个问题？

```
<a class="btn btn-link" href=".modal" data-toggle="modal"><i class="icon-fullscreen"></i>     View</a>

<!--POP OVER OF IMAGE-->
<div class="modal hide fade"  tabindex="-1">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal">&times;</button>
<h3 id="myModalLabel">Pansnap</h3>

</div>
<div class="modal-body">

<!--This is for the 360 viewer-->

<?php echo '<img src="uploads/', $image["album"], '/', $image["id"], '.',     $image["ext"],'"/>'?>

<!--360 viewer end-->

  </div>
  <div class="modal-footer">
 <?php echo '<a class="btn btn-link" href="uploads/', $image["album"], '/', $image["id"],     '.', $image["ext"],'">Download</a>'?>

  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:35:25.783

解决此问题的一种方法是将各种唯一数据组件存储在每个链接上，然后使用通用处理程序将这些数据加载到单个模式的相关元素中。

例如，类似于以下内容：

## HTML

```
<a class="btn btn-link" href="#imageModal" data-toggle="modal" data-image="uploads/album/01.jpg" data-download="uploads/album/01.jpg"><i class="icon-fullscreen"></i>     View</a>
<a class="btn btn-link" href="#imageModal" data-toggle="modal" data-image="uploads/album/02.jpg" data-download="uploads/album/02.jpg"><i class="icon-fullscreen"></i>     View</a>

<!--POP OVER OF IMAGE-->
<div id="imageModal" class="modal hide fade"  tabindex="-1">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal">&times;</button>
    <h3 id="myModalLabel">Pansnap</h3>
  </div>
  <div class="modal-body">
    <img id="snap"/>
  </div>
  <div class="modal-footer">
      <a id="download" class="btn btn-link">Download</a>
  </div>
</div> 
```

您可以通过 PHP 将每个图像的数据加载到数据属性中。

## JS

```
$(document).on('click.modal.image-data', '[href=#imageModal]', function () {
  $('#snap').attr('src',$(this).data('image'))
  $('#download').attr('href', $(this).data('download'))  
}) 
```

这将在模态元素中加载适当的数据。

## [JSFiddle](http://jsfiddle.net/mmfansler/VXkJv/)

# android - Android 菜单选项不会在点击/触摸时突出显示

> ID：15303315
> 
> 赞同：2
> 
> 时间：2013-03-08T21:07:39.757
> 
> 标签：android, click, highlight, menuitem

我在屏幕底部显示菜单操作栏。当用户单击/触摸任何菜单项时，我想突出显示它（即按钮单击突出显示的方式）。我尝试了 onClickListener 和 ontouchListener 但它没有突出显示。

有人可以告诉我我设置了哪些属性/方法。

这是我正在使用的代码。

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.landing_page_layout);

        ActionBar actionBar = getActionBar();
        actionBar.show();

// business logic }

    @Override
        public boolean onCreateOptionsMenu(Menu menu) {

            getMenuInflater().inflate(R.menu.menu_items, menu);

            item1 = menu.findItem(R.id.menu_option1);
            item1.getActionView().setOnTouchListener(new OnTouchListener() {

 // logic when user touch menu option1 touch      
 }}); 
```

谢谢钦坦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T15:53:47.300

检查文档中的此部分：http: [//developer.android.com/guide/topics/ui/menus.html#options-menu](http://developer.android.com/guide/topics/ui/menus.html#options-menu)

要设置菜单，请执行以下操作：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu, menu);
    return true;
} 
```

其中 R.menu.menu 指向您的 res/menu/menu.xml 文件。这将从该文件加载元素

选项菜单的收听方式与使用 OnClickListeners 等的常规视图相同。相反，您`onOptionsItemSelected`可以像这样覆盖：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
        case R.id.item1:
            // Do something
            return true;
        case R.id.item2:
            // Do something else
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

# mysql - 跨数据库匹配专有名称的建议

> ID：15303319
> 
> 赞同：0
> 
> 时间：2013-03-08T21:07:51.670
> 
> 标签：mysql, sql, sql-server, r

是否有在数据库设置中处理专有名称的指南。我有 2 个以专有名称作为主键的数据集，但是这两个数据集的格式存在很大差异。此外，由于各种姓氏样式和连字符，甚至很难确定名字、中间名和姓氏。

我正在辩论从头开始重新创建数据，但不知道处理名称的最佳实践是什么（即我应该使用 first、middle、last 还是将中间与 last 合并等），这已经够糟糕了？

任何建议对我的理智都会有好处。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:20:04.357

是的 - 指南是。不要这样做。您可以简单地创建一个 UNIQUE 列，使名称 + 新的唯一 id 列成为唯一的，请记住，这不是全局的，这取决于您的环境。

否则你会想要使用名称 + zip + dob +/- 唯一 ID 之类的东西。

在处理这些表格时，这将为您提供更好的回旋处。此外，如果这是您参与的项目，您可能需要考虑向您的主管提出数据库设计问题。因为这不是一个好习惯......

# c++ - 这种 gcroot 的使用安全吗？

> ID：15303320
> 
> 赞同：5
> 
> 时间：2013-03-08T21:07:58.863
> 
> 标签：c++, .net, garbage-collection, interop, c++-cli

我需要使用来自 C++/CLI 的非托管 API。此 API 存储指向任意用户数据的 void 指针和一些回调。然后它最终调用这些回调，将用户数据作为 void* 传递。

到目前为止，我有一个本地类将其“this”指针作为用户数据传递，并使用该指针将 API 调用回该类，即：

```
static void __stdcall Callback(void* userData) {
    ((MyType*)userData)->Method();
}

class MyType {
public:
    MyType() { RegisterWithApi((void*)this, Callback); }
    void Method();
}; 
```

我正在尝试使用托管类来翻译它。我发现 gcroot 类型可用于在本机代码中安全地存储托管引用，所以这就是我现在的做法：

```
// This is called by the native API
static void __stdcall Callback(void* userData) {
    // Cast back to gcroot and call into managed code
    (*(gcroot<MyType^>*)userData)->Method();
}

ref class MyType {
    gcroot<MyType^>* m_self;
public:
    MyType() { 
        m_self = new gcroot<MyType^>;
        RegisterWithApi((void*)m_self, Callback);
    }
    ~MyType() { delete m_self; }
    // Method we want called by the native API
    void Method();
} 
```

虽然这对 C++/CLI 编译器来说似乎很好，但我并不完全放心。据我了解，gcroot 以某种方式跟踪其托管引用，因为它被 GC 移动。当非托管代码存储为 void* 时，它会设法做到这一点吗？这段代码安全吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T02:35:49.597

这就是我最终做的事情，而且效果很好。gcroot 的目的是在本机堆上存储托管引用，这正是我在这里所做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:31:21.247

不！恰恰相反。gcroot 是一个原生类模板。您可以使用它以使用 clr 支持编译的本机类型存储托管内存的句柄。您通常会使用它将对本机对象的成员函数的调用转移到存储在 gcroot 类型成员中的托管对象。

编辑：我昨天在移动设备上输入代码示例有点尴尬......的预期和典型用法`gcroot<T^>`是在这些方面的某个地方：

```
// ICallback.h
struct ICallback {
    virtual void Invoke() = 0;
    virtual void Release() = 0;
    protected:
        ~ICallback() {}
}; 
```

这就是您的本机应用程序或库所看到和包含的内容。然后，您有一个使用 CLR 支持编译的混合组件，该组件在 a 中实现`ICallback`并存储某个托管对象的句柄`gcroot<ManagedType^>`：

```
// Callback.cpp (this translation unit must be compiled with /clr)
// I did not compile and test, but you get the point...
template<class T^> class Callback : public ICallback {
    gcroot<T^> m_Managed;

    virtual void Invoke()
    {
       m_Managed->Invoke();
    }

    virtual void Release()
    {
        delete this;
    }
public:
    Callback(T^ p_Managed) : m_Managed(p_Managed) {}
};

__declspec( dllexport ) ICallback* CreateCallback()
{
    auto t_Managed = gcnew SomeManagedType();
    return new Callback<System::Action^>(
        gcnew System::Action(t_Managed, &SomeManagedType::Method)); 
} 
```

您的本机应用程序调用`CreateCallback`，接收一个实例`ICallback`，当`Invoke`-d 调用托管类型的方法时，该实例保存在`gcroot<System::Action^>`...

# javascript - 我可以在 javascript 的事件触发函数中获取 html 元素吗？

> ID：15303321
> 
> 赞同：0
> 
> 时间：2013-03-08T21:08:01.870
> 
> 标签：javascript, javascript-events

**编辑：我需要提到我不想使用 jQuery。** 这是我的代码。我需要访问触发事件的元素，这样我就不必为每个 html 元素创建两个不同的函数。

```
document.getElementById("login").onmouseover = turnWhite;

function turnWhite(e){  
} 
```

我可能需要这样的东西。不过不知道有没有可能。

```
function turnWhite(e){
    e.HTMLEL.style.color = "white"; 
} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T21:12:22.260

根据[javascripter.net](http://www.javascripter.net/faq/eventtargetsrcelement.htm)

*   Internet Explorer 中的 e.srcElement
*   e.target 在大多数其他浏览器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:23:16.143

如果您想将相同的事件函数应用于一组元素，您可以尝试如下操作：

```
var buttons = document.getElementsByClassName("change");
for(var i = 0;i < buttons.length;i++){
    buttons[i].onmouseover = function(){
        this.style.color = "red"; 
    }
} 
```

演示：http: [//jsfiddle.net/louisbros/rt24U/](http://jsfiddle.net/louisbros/rt24U/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T21:12:40.170

您应该能够使用`e.target`or `e.currentTarget`。但是，每个浏览器的行为似乎有所不同......最好使用像 jquery 或 yui 这样的库。 [这是一些文档](http://www.w3schools.com/jsref/dom_obj_event.asp)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T21:40:25.933

这是 JSFiddle，因此您可以使用它：http: [//jsfiddle.net/9nr4Y/](http://jsfiddle.net/9nr4Y/)

HTML：

```
<div class="login">Login</div>
<br />
<div class="login">Login 2</div> 
```

JavaScript：

```
(function() {
    var elms = document.getElementsByClassName("login"),
        l = elms.length, i;
    for( i = 0; i < l; i++ ) {
        ( function( i ) {
            elms[i].onmouseover = function() {
                this.style.color = "#000000";
                this.style.background = "#FFFFFF";
            };
        })(i);

        ( function( i ) {
            elms[i].onmouseout = function() {
                this.style.color = "#FFFFFF";
                this.style.background = "#000000";
            }
        })(i);
    }
})(); 
```

创建一个自调用函数，然后通过类名获取元素。这样做的原因是因为您真的不想拥有多个具有 ID 的元素。获取类名将生成具有该类的项目数组。然后您可以遍历新数组并将事件分配给它们中的每一个。

然后我们用“this”而不是实际事件来获取每个单独的元素。

供参考： [如何在 getElementsByClassName 中获取当前元素](https://stackoverflow.com/questions/11075819/how-to-get-current-element-in-getelementsbyclassname)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-29T04:06:02.070

你也可以使用这个非标准的跨浏览器黑客：

```
document.getElementById("login").onmouseover = function () { turnWhite(); }

function turnWhite(){  
    var myEventElement = turnWhite.caller.arguments[0].target;
    //do something with myEventElement
} 
```

如果您想避免传递参数，这很有用。

演示：[http ://codepen.io/mrmoje/pen/avbEm](http://codepen.io/mrmoje/pen/avbEm)

# r - 如何在不重叠标签的情况下自动标记 ggplot2 中的点

> ID：15303324
> 
> 赞同：0
> 
> 时间：2013-03-08T21:08:15.933
> 
> 标签：r, ggplot2, label

防止行尾的标签重叠对于这些数据来说是一个特别的挑战，因为我希望相同的代码可以处理变化相当大的数据。在下面的示例中，一些标签需要远离它们标记的点以腾出空间。我对此没意见，我只想知道是否有办法以编程方式进行，因为我无法为需要应用它的每个数据集自定义代码。谢谢！

我也在努力格式化标签：我将它们四舍五入到最接近的百分比，但尽管玩了 `sprintf`我不知道如何摆脱小数点和尾随零。

![线图](../Images/1d4dec6d6624f09fc8346b789d2a9749.png)

我的数据可以用这个重新创建：

```
mydf <- 
structure(list(date = structure(c(15573, 15574, 15575, 15576, 
                                           15577, 15578, 15579, 15580, 15581, 15582, 15583, 15584, 15585, 
                                           15586, 15587, 15588, 15589, 15590, 15591, 15592, 15593, 15594, 
                                           15595, 15596, 15597, 15573, 15574, 15575, 15576, 15577, 15578, 
                                           15579, 15580, 15581, 15582, 15583, 15584, 15585, 15586, 15587, 
                                           15588, 15589, 15590, 15591, 15592, 15593, 15594, 15595, 15596, 
                                           15597, 15573, 15574, 15575, 15576, 15577, 15578, 15579, 15580, 
                                           15581, 15582, 15583, 15584, 15585, 15586, 15587, 15588, 15589, 
                                           15590, 15591, 15592, 15593, 15594, 15595, 15596, 15597, 15573, 
                                           15574, 15575, 15576, 15577, 15578, 15579, 15580, 15581, 15582, 
                                           15583, 15584, 15585, 15586, 15587, 15588, 15589, 15590, 15591, 
                                           15592, 15593, 15594, 15595, 15596, 15597, 15573, 15574, 15575, 
                                           15576, 15577, 15578, 15579, 15580, 15581, 15582, 15583, 15584, 
                                           15585, 15586, 15587, 15588, 15589, 15590, 15591, 15592, 15593, 
                                           15594, 15595, 15596, 15597, 15573, 15574, 15575, 15576, 15577, 
                                           15578, 15579, 15580, 15581, 15582, 15583, 15584, 15585, 15586, 
                                           15587, 15588, 15589, 15590, 15591, 15592, 15593, 15594, 15595, 
                                           15596, 15597, 15573, 15574, 15575, 15576, 15577, 15578, 15579, 
                                           15580, 15581, 15582, 15583, 15584, 15585, 15586, 15587, 15588, 
                                           15589, 15590, 15591, 15592, 15593, 15594, 15595, 15596, 15597, 
                                           15573, 15574, 15575, 15576, 15577, 15578, 15579, 15580, 15581, 
                                           15582, 15583, 15584, 15585, 15586, 15587, 15588, 15589, 15590, 
                                           15591, 15592, 15593, 15594, 15595, 15596, 15597, 15573, 15574, 
                                           15575, 15576, 15577, 15578, 15579, 15580, 15581, 15582, 15583, 
                                           15584, 15585, 15586, 15587, 15588, 15589, 15590, 15591, 15592, 
                                           15593, 15594, 15595, 15596, 15597), class = "Date"), outcome = c(0.0514, 
                                                                                                            0.0555, 0.0611, 0.0646, 0.0565, 0.055, 0.0588, 0.0504, 0.0585, 
                                                                                                            0.0576, 0.0546, 0.0553, 0.0123, 0.0155, 0.0066, 0.0105, 0.0179, 
                                                                                                            0.0052, 0.0057, 0.007, 0.0094, 0.0127, 0.0122, 0.0089, 0.0097, 
                                                                                                            0.0305, 0.0248, 0.033, 0.037, 0.0305, 0.0334, 0.0346, 0.0356, 
                                                                                                            0.034, 0.0317, 0.0351, 0.034, 0.0091, 0.0026, 0.0151, 0.0152, 
                                                                                                            0.0145, 0.006, 0.0052, 0.0082, 0.0122, 0.017, 0.008, 0.0136, 
                                                                                                            0.0114, 0.0068, 0.0042, 0.0085, 0.0134, 0.0091, 0.0127, 0.0082, 
                                                                                                            0.0154, 0.0088, 0.0102, 0.0127, 0.0168, 0.0057, 0.0106, 0.0107, 
                                                                                                            0.0076, 0.006, 0.0116, 0.0116, 0.0107, 0.0087, 0.0046, 0.0126, 
                                                                                                            0.005, 0.0074, 0.0259, 0.0174, 0.0172, 0.0182, 0.028, 0.0238, 
                                                                                                            0.0269, 0.0312, 0.0213, 0.0334, 0.0247, 0.0232, 0.0261, 0.0229, 
                                                                                                            0.0183, 0.0238, 0.0221, 0.016, 0.0232, 0.0177, 0.0251, 0.0202, 
                                                                                                            0.0232, 0.0153, 0.0237, 0.0511, 0.0578, 0.0547, 0.0536, 0.0202, 
                                                                                                            0.014, 0.007, 0.0126, 0.0145, 0.015, 0.0117, 0.0169, 0.0136, 
                                                                                                            0.0128, 0.0127, 0.0138, 0.0092, 0.0094, 0.0106, 0.0098, 0.0093, 
                                                                                                            0.0141, 0.0063, 0.0104, 0.0183, 0.0259, 0.0195, 0.0289, 0.0247, 
                                                                                                            0.027, 0.0264, 0.0281, 0.023, 0.0175, 0.0247, 0.0166, 0.0224, 
                                                                                                            0.0196, 0.0177, 0.0248, 0.0236, 0.0205, 0.0245, 0.0225, 0.019, 
                                                                                                            0.0167, 0.0154, 0.0204, 0.0244, 0.0235, 0.0114, 0.0108, 0.0136, 
                                                                                                            0.0064, 0.0088, 0.0161, 0.0143, 0.009, 0.0107, 0.0031, 0.0012, 
                                                                                                            0.0108, 0.0146, 0.0044, 0.0058, 0.0129, 0.006, 0.0157, 0.0107, 
                                                                                                            0.0105, 0.0093, 0.0077, 0.0078, 0.0105, 0.0067, 0.0055, 0.0137, 
                                                                                                            0.0108, 0.021, 0.0081, 0.0149, 0.0071, 0.0106, 0.0048, 0.0073, 
                                                                                                            0.0122, 0.0059, 0.0115, 0.0103, 0.0093, 0.0037, 0.0065, 0.0038, 
                                                                                                            0.0129, 0.008, 0.0045, 0.0098, 0.0047, 0.0123, 0.0088, 0.1243, 
                                                                                                            0.1209, 0.1196, 0.1311, 0.1193, 0.1269, 0.1313, 0.1332, 0.1244, 
                                                                                                            0.1308, 0.1229, 0.1273, 0.1276, 0.115, 0.1075, 0.1119, 0.1163, 
                                                                                                            0.1172, 0.112, 0.1125, 0.1184, 0.1071, 0.107, 0.1081, 0.1126), 
                        trial = c("C", "C", "C", "C", "C", "C", "C", "C", "C", "C", 
                                  "C", "C", "C", "C", "C", "C", "C", "C", "C", "C", "C", "C", 
                                  "C", "C", "C", "B", "B", "B", "B", "B", "B", "B", "B", "B", 
                                  "B", "B", "B", "B", "B", "B", "B", "B", "B", "B", "B", "B", 
                                  "B", "B", "B", "B", "F", "F", "F", "F", "F", "F", "F", "F", 
                                  "F", "F", "F", "F", "F", "F", "F", "F", "F", "F", "F", "F", 
                                  "F", "F", "F", "F", "F", "E", "E", "E", "E", "E", "E", "E", 
                                  "E", "E", "E", "E", "E", "E", "E", "E", "E", "E", "E", "E", 
                                  "E", "E", "E", "E", "E", "E", "H", "H", "H", "H", "H", "H", 
                                  "H", "H", "H", "H", "H", "H", "H", "H", "H", "H", "H", "H", 
                                  "H", "H", "H", "H", "H", "H", "H", "I", "I", "I", "I", "I", 
                                  "I", "I", "I", "I", "I", "I", "I", "I", "I", "I", "I", "I", 
                                  "I", "I", "I", "I", "I", "I", "I", "I", "G", "G", "G", "G", 
                                  "G", "G", "G", "G", "G", "G", "G", "G", "G", "G", "G", "G", 
                                  "G", "G", "G", "G", "G", "G", "G", "G", "G", "D", "D", "D", 
                                  "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", 
                                  "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "A", "A", 
                                  "A", "A", "A", "A", "A", "A", "A", "A", "A", "A", "A", "A", 
                                  "A", "A", "A", "A", "A", "A", "A", "A", "A", "A", "A")), .Names = c("date", 
                                                                                                      "outcome", "trial"), class = "data.frame", row.names = c(94L, 
                                                                                                                                                               95L, 96L, 97L, 98L, 99L, 100L, 101L, 102L, 103L, 104L, 105L, 
                                                                                                                                                               106L, 107L, 108L, 109L, 110L, 111L, 112L, 113L, 114L, 115L, 116L, 
                                                                                                                                                               117L, 118L, 356L, 357L, 358L, 359L, 360L, 361L, 362L, 363L, 364L, 
                                                                                                                                                               365L, 366L, 367L, 368L, 369L, 370L, 371L, 372L, 373L, 374L, 375L, 
                                                                                                                                                               376L, 377L, 378L, 379L, 380L, 618L, 619L, 620L, 621L, 622L, 623L, 
                                                                                                                                                               624L, 625L, 626L, 627L, 628L, 629L, 630L, 631L, 632L, 633L, 634L, 
                                                                                                                                                               635L, 636L, 637L, 638L, 639L, 640L, 641L, 642L, 880L, 881L, 882L, 
                                                                                                                                                               883L, 884L, 885L, 886L, 887L, 888L, 889L, 890L, 891L, 892L, 893L, 
                                                                                                                                                               894L, 895L, 896L, 897L, 898L, 899L, 900L, 901L, 902L, 903L, 904L, 
                                                                                                                                                               1142L, 1143L, 1144L, 1145L, 1146L, 1147L, 1148L, 1149L, 1150L, 
                                                                                                                                                               1151L, 1152L, 1153L, 1154L, 1155L, 1156L, 1157L, 1158L, 1159L, 
                                                                                                                                                               1160L, 1161L, 1162L, 1163L, 1164L, 1165L, 1166L, 1404L, 1405L, 
                                                                                                                                                               1406L, 1407L, 1408L, 1409L, 1410L, 1411L, 1412L, 1413L, 1414L, 
                                                                                                                                                               1415L, 1416L, 1417L, 1418L, 1419L, 1420L, 1421L, 1422L, 1423L, 
                                                                                                                                                               1424L, 1425L, 1426L, 1427L, 1428L, 1666L, 1667L, 1668L, 1669L, 
                                                                                                                                                               1670L, 1671L, 1672L, 1673L, 1674L, 1675L, 1676L, 1677L, 1678L, 
                                                                                                                                                               1679L, 1680L, 1681L, 1682L, 1683L, 1684L, 1685L, 1686L, 1687L, 
                                                                                                                                                               1688L, 1689L, 1690L, 1928L, 1929L, 1930L, 1931L, 1932L, 1933L, 
                                                                                                                                                               1934L, 1935L, 1936L, 1937L, 1938L, 1939L, 1940L, 1941L, 1942L, 
                                                                                                                                                               1943L, 1944L, 1945L, 1946L, 1947L, 1948L, 1949L, 1950L, 1951L, 
                                                                                                                                                               1952L, 2190L, 2191L, 2192L, 2193L, 2194L, 2195L, 2196L, 2197L, 
                                                                                                                                                               2198L, 2199L, 2200L, 2201L, 2202L, 2203L, 2204L, 2205L, 2206L, 
                                                                                                                                                               2207L, 2208L, 2209L, 2210L, 2211L, 2212L, 2213L, 2214L)) 
```

这是我创建图表的代码

```
library(ggplot2)

ggplot(mydf, aes(x=date, y=outcome)) +
  geom_line(aes(group = trial, color = trial, linetype = trial), data = mydf, size=0.75) +
  geom_text(data = mydf[mydf$date==max(mydf$date),], aes(x = date + (0.003 * nrow(mydf)), y = outcome, label = sprintf("%0.1f%%",   round(outcome, 2) * 100)), size = 4, colour = "grey50") +
  scale_y_continuous(limits=c(0, 1)) 
```

# jquery - jquery 并不总是等到返回值，但有时会

> ID：15303334
> 
> 赞同：1
> 
> 时间：2013-03-08T21:08:49.690
> 
> 标签：jquery, smart-wizard

我在这里看到了很多例子，并尝试了几个小时让它们工作，但似乎无法弄清楚我做错了什么。我对 jquery 和 ajax 很陌生，所以请善待。

我正在尝试使用 smartWizard jquery 插件。这是一些代码

```
 function validateStep1()
            {
                var isValid = true;

                // validate first_name
                var first_name = $('#first_name').val();
                if(!first_name && first_name.length <= 0)
                {
                    isValid = false;
                    $('#msg_first_name').html('<?php echo $LANG['field_this_required'] ?>').show();
                }
                else
                {
                    $('#msg_first_name').html('').hide();
                }

                // validate last_name
                var last_name = $('#last_name').val();
                if(!last_name && last_name.length <= 0)
                {
                    isValid = false;
                    $('#msg_last_name').html('<?php echo $LANG['field_this_required'] ?>').show();
                }
                else
                {
                    $('#msg_last_name').html('').hide();
                }

                // validate address
                var address = $('#address').val();
                if(!address && address.length <= 0)
                {
                    isValid = false;
                    $('#msg_address').html('<?php echo $LANG['field_this_required'] ?>').show();
                }
                else
                {
                    $('#msg_address').html('').hide();
                }

                // validate city
                var city = $('#city').val();
                if(!city && city.length <= 0)
                {
                    isValid = false;
                    $('#msg_city').html('<?php echo $LANG['field_this_required'] ?>').show();
                }
                else
                {
                    $('#msg_city').html('').hide();
                }

                // validate county
                /*
                var county = $('#county').val();
                if(!county && county.length <= 0)
                {
                    isValid = false;
                    $('#msg_county').html('<?php echo $LANG['field_this_required'] ?>').show();
                }
                else
                {
                    $('#msg_county').html('').hide();
                }
                */

                // validate state
                var state = $('#state').val();
                if(!state && state.length <= 0)
                {
                    isValid = false;
                    $('#msg_state').html('<?php echo $LANG['field_this_required'] ?>').show();
                }
                else
                {
                    $('#msg_state').html('').hide();
                }

                // validate postal
                var postal = $('#postal').val();
                if(!postal && postal.length <= 0)
                {
                    isValid = false;
                    $('#msg_postal').html('<?php echo $LANG['field_this_required'] ?>').show();
                }
                else
                {
                    $('#msg_postal').html('').hide();
                }

                // validate home_phone
                var home_phone = $('#home_phone').val();
                if(!home_phone && home_phone.length <= 0)
                {
                    isValid = false;
                    $('#msg_home_phone').html('<?php echo $LANG['field_this_required'] ?>').show();
                }
                else
                {
                    $('#msg_home_phone').html('').hide();
                }

            if(isValid==true)
            {
                document.getElementById('step_num').value=1;

                loading('<?php echo $LANG['saving']; ?> ',1);

                $.post('editprofile.php',$('#editProfile').serialize(),function(data)
                {
                    unloading();
                    if(!data)
                    {
                        isValid = false;
                        $('#msg_step-1').html("<p style='font-weight:bold;color:#ff0000'><?php echo $LANG['database_update_error']; ?></p>").show();
                    }
                    else if(data.status !=1 )
                    {
                        isValid = false;
        alert(data.message);
                        $('#msg_step-1').html("<p style='font-weight:bold;color:#ff0000'>"+data.message+"</p>").show();
                    }
                    else
                    {
                        $('#msg_step-1').html("<p style='font-weight:bold;color:#ff0000'>"+data.message+"</p>").show();
                        isValid = true;
                    }

                },'json')
                .done(function() { alert("done "+isValid); return isValid;})
                .fail(function() { alert("fail "+isValid); return isValid;})
                ;
            }
            else
            {
                return isValid;
            }
          //Commented out the return so that it will only return when done above.
          //return isValid;
        } 
```

还有其他代码检查此函数的返回值并采取相应措施。如果任何初始验证检查失败，则其他代码不会执行，因为变量`isValid`设置为 false，这就是返回的内容。我的问题是发布到editprofile.php - 代码继续前进，就好像函数返回了一个真值，即使它还没有返回任何东西。它仍然继续执行`$.post`部分中的代码，但只有在此函数之外的其他代码运行之后。

我知道代码是以异步方式运行的；但是，我很困惑为什么当任何检查返回错误值`false`之类的东西时，它总是会毫无例外地获得该值；`$('#address').val()`但是，它不是从`$.post`代码中得到的。为什么要等待所有这些返回值而不是等待`$.post`代码？

我也对调用代码在返回值之前如何操作感到困惑。

只是为了记录，这里是调用该函数的代码：

```
 function leaveAStepCallback(obj){
                var step_num= obj.attr('rel');
                return validateSteps(step_num);
          }

            function validateSteps(step)
            {
                var isStepValid = true;
                  // validate step 1
                  if(step == 1){
                        if(validateStep1() == false ){
                          isStepValid = false; 
                          $('#wizardvalidate').smartWizard('showMessage','Please correct the errors in step'+step+ ' and click next.');
                          $('#wizardvalidate').smartWizard('setError',{stepnum:step,iserror:true});         
                        }else{
                          $('#wizardvalidate').smartWizard('setError',{stepnum:step,iserror:false});
                        }
                  }

                  // validate step 2
                  if(step == 2){
                        if(validateStep2() == false ){
                          isStepValid = false; 
                          $('#wizardvalidate').smartWizard('showMessage','Please correct the errors in step'+step+ ' and click next.');
                          $('#wizardvalidate').smartWizard('setError',{stepnum:step,iserror:true});         
                        }else{
                          $('#wizardvalidate').smartWizard('setError',{stepnum:step,iserror:false});
                        }
                  }

                  // validate step3
                  if(step == 3){
                        if(validateStep3() == false ){
                          isStepValid = false; 
                          $('#wizardvalidate').smartWizard('showMessage','Please correct the errors in step'+step+ ' and click next.');
                          $('#wizardvalidate').smartWizard('setError',{stepnum:step,iserror:true});         
                        }else{
                          $('#wizardvalidate').smartWizard('setError',{stepnum:step,iserror:false});
                        }
                  }

          return isStepValid;
        } 
```

再一次，我对这一切都很陌生，所以请善待！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:10:50.360

正如您在问题中所说，`$.post`是**异步**的。

它的回调只会在服务器回复时运行，这保证在其余代码完成执行后的一段时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T07:20:20.163

我遇到了同样的问题，经过几个小时的拉头发后解决了......

var stpflag = 假；

```
function validateSteps(step){
    var isStepValid = true;
    // validate step 1
    if(step == 1){
        var returnstatus = savefunctionality();
        if((returnstatus ==  false ) && (stpflag== false)){
            isStepValid = false; 
            $('#wizard').smartWizard('showMessage','Please correct the errors in step'+step+ ' and click next.');
            $('#wizard').smartWizard('setError',{stepnum:step,iserror:true}); 
            // $('#wizard').smartWizard.prototype.goBackward();
        }else if((returnstatus ==  false ) && (stpflag== true)){
            isStepValid = true;
            $('#wizard').smartWizard('setError',{stepnum:step,iserror:false});
             $('#wizard').smartWizard('hideMessage','');
            showstep2(); // here write your logic for render next page on step-2 div.
            stpflag=false;
        }
    }
  return isStepValid;
} 
```

功能保存功能（）{

```
 var returnVal = false; 
```

$.ajax(

{

```
 type: 'POST',

        dataType: 'json',

        url: '/mainfolder/folder/savepage/',

        async: true,

        data:  values,                  

        success: function(json) {
            $("#error_msg").html("");
            if(json.result.errors != undefined){
                if(json.result.errors.length > 0){
                    itemData = json.result.errors;
         returnVal = false;
                    stpflag = false;

                } 
            } else if(json.result == 1){
                returnVal = true;
                stpflag = true;
                $('a.buttonNext').trigger('click');
            }
        }
    });
    return returnVal;
} 
```

这里我使用了两个变量 1.returnVal：总是返回false 2.stpflag：创建了一个新的全局变量stpflag。

明确触发下一个按钮。

希望对你也有用

# regex - 使用 sed 转义单引号和双引号。geed，查找，xargs

> ID：15303336
> 
> 赞同：3
> 
> 时间：2013-03-08T21:08:53.157
> 
> 标签：regex, replace, sed, escaping

我有一个类似于这个的命令：

```
find ./ -type f | xargs gsed -i -r 's/[$][A-Za-z_\'"]/testing 
```

我想让这个命令起作用。不幸的是，单引号和双引号会破坏命令。我怎样才能转义这个字符串并使这个命令起作用？

这个问题与这个问题不同，[因为](https://stackoverflow.com/questions/7517632/how-do-i-escape-double-and-single-quotes-in-sed-bash)我在**[**中有一个单引号。但是，如果稍微修改一下就可以解决问题，我想知道。

我用@、#、\尝试了几种不同的方法，但还没有成功。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T21:21:00.007

看看这个：

```
kent$  cat file
''''''
""""""

kent$  sed 's/\x27/single /g;s/\x22/double /g' file
single single single single single single 
double double double double double double 
```

因此，将您的 cmd 更改为：

```
find ./ -type f | xargs gsed -i -r 's/[$][A-Za-z_\x22\x27]/testing' 
```

**请注意**，我没有检查您的 find/xargs 部分是否正常，仅用于单/双引号部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:18:16.333

您不能在单引号中使用单引号。你可以：

1.  结束单引号，然后使用反斜杠引号：`'...'\'`

2.  结束单引号，然后在双引号中使用单引号：`'...'"'"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T13:01:08.593

或者您可以尝试将 sed 脚本放在双引号中并转义需要转义的内容

```
gsed -i -r "s/[$][A-Za-z_'\"]/testing/" 
```

# crystal-reports-xi - 如何在 Crystal Reports 图表中将一组字段与另一组字段划分？

> ID：15303341
> 
> 赞同：1
> 
> 时间：2013-03-08T21:09:10.703
> 
> 标签：crystal-reports-xi

我正在创建一个由图表组成的水晶报表。由于我对此不熟悉，因此我可能会遇到一个非常简单的问题。

我有一个包含日期、实际_rev、hrs_available 等的表。

现在我在图中需要的是实际_rev/hrs_available 总和的每个日期总和。这应该对每个日期进行分组，以便图表显示每个日期的条形图。

在上面的示例中，收入总和为 2317.00 ，小时数总和为 15.33 ，每小时收入为 151.14，应显示在该日期的图表中。

# javascript - 如何将拖动行为应用于 d3.svg.arc？

> ID：15303342
> 
> 赞同：0
> 
> 时间：2013-03-08T21:09:11.403
> 
> 标签：javascript, d3.js

如何将 d3.behavior.drag() 应用于以下弧？

```
var arc = d3.svg.arc()
    .innerRadius(50)
    .outerRadius(70)
    .startAngle(45 * (pi/180)) //converting from degs to radians
    .endAngle(3) //just radians

vis.append("path")
    .attr("d", arc)
    .attr("transform", "translate(200,200)") 
```

我希望能够拖动圆弧。我无法在任何基于 SVG 路径的对象上看到任何使用拖动行为的东西（仅适用于圆形、矩形等基本元素）

我能找到的与拖动相关的最接近的事情是： [http ://bl.ocks.org/mbostock/1557377](http://bl.ocks.org/mbostock/1557377)

尽管看起来如果您尝试为附加路径 (.append("path")) ".on("drag", dragmove) "d" 出现未定义。如果您附加 ".on("drag" , dragmove)" 到弧本身，事件似乎没有触发......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T23:17:46.437

拖动是您创建的一种行为，然后将其应用于要执行该行为的元素。将其应用于弧应该没有问题。

因此，使用您的弧（进行细微修改以使翻译易于访问）：

```
var position = [200,200];

var arc = vis.append("path")
    .attr("d", arc)
    .attr("transform", "translate(" + position + ")"); 
```

从创建你想要的行为开始。我们的拖动将更新圆弧的平移：

```
var drag = d3.behavior.drag()
    .on("drag", function(d,i) {
        position[0] += d3.event.dx;
        position[1] += d3.event.dy;
        d3.select(this)
        .attr("transform", function(d,i){
            return "translate(" + position + ")"
        })
    }); 
```

现在我们将行为附加到弧上：

```
arc.call(drag); 
```

[你可以在这里](http://jsfiddle.net/superboggly/tYKjn/)自己试试。

# mongodb - 关系数据库与列式数据库和文档数据库——它们不是一回事吗？

> ID：15303343
> 
> 赞同：8
> 
> 时间：2013-03-08T21:09:15.013
> 
> 标签：mongodb, cassandra, document-oriented-db, column-oriented, nosql

我知道面向文档的 NoSQL DB 是 KV 模型的“扩展”，因为它们允许您查询的不仅仅是单个查找键。但是一旦某个东西是“文档”，我觉得它已经包含了一个关系模型：

```
"myJson": {
    "fizz": 4,
    "buzz": "true",
    "widget" : {
        ...etc.
    }
} 
```

对我来说，我看不出这个 JSON 与一个`json_objects`带有`fizz`and`buzz`字段的表以及与第二个表的外键关系之间的区别`widgets`。

像 Cassandra 这样的“柱状”数据库听起来就像是直接的关系/表数据库。

所以我问：面向文档和面向列的 DB 有什么不同，以及它们的区别（与 RDBMS 不同）是什么？它们最适合解决哪些问题，使它们在某些情况下优于关系数据库？提前致谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-08T22:45:27.713

首先，我想说的是，您说**NoSql 与关系数据库不同**，因此很难进行比较，这是非常正确的。话虽如此，两者之间有许多可以比较的大区别。

**扩展**
虽然您可以对 MySql 数据库进行分片，但是当 RDMS 在多台机器上时，分片和[强制执行 ACID 属性](http://www.cubrid.org/blog/dev-platform/what-is-nosql-for/)会非常具有挑战性，但像 Cassandra 这样的 NoSql 解决方案以其在某些情况下管理 400 个节点的能力而[著称](http://www.mysqlperformanceblog.com/2009/08/06/why-you-dont-want-to-shard/)[。集群](http://www.businesswire.com/news/home/20101006005485/en/Digital-Reasoning-Riptano-Advance-Cassandra-Based-Analytic-Solutions)没有问题。Cassandra 数据库不仅易于扩展，而且性能也不会受到影响。

**模式**（更少）模型。
NoSQL 数据库系统旨在管理大量不遵循固定模式的数据。这意味着，例如，您希望向 Cassandra 中的现有列族添加新列，您无需返回并修改列族，因此无需这样做：

```
ALTER TABLE table_name ALTER COLUMN column_name datatype; 
```

相反，我们可以随时添加新列，最终可能会得到以下“表格”：

```
 key         | follower1  | follower2   | follower2          
-------------+------------+-------------+-----------
 lyubent     | joeb       | chuckn      | gordonf     
 chuckn      | joeb       | gordonf                   
 gordonf     | chuckn                                 
 joeb        | chuckn     | lyubent     | joeb 
```

这允许数据模型灵活且易于扩展，但这样做数据变得不那么结构化。

**速度**
NoSql 数据库针对[高写入速度](http://www.cubrid.org/blog/dev-platform/nosql-benchmarking/)进行了优化，而 RDBM 旨在实现高读取速度。但即使考虑到这一点，NoSql 解决方案在读取方面仍然倾向于[优于 RDBM](http://www.datastax.com/dev/blog/2012-in-review-performance)系统。这是因为 NoSql 数据库没有实现许多减慢关系模型中读/写/更新操作的功能，例如 ACID 属性和事务。

[**什么时候应该使用它**](http://highscalability.com/blog/2010/12/6/what-the-heck-are-you-actually-using-nosql-for.html)？

*   您的应用程序/网站需要快速增长，但您希望从小处着手。
*   你更关心写入数据而不是读回数据。（发布了很多推文，但并非所有推文都被阅读）
*   系统的可用性比 100% 更新的数据更重要。（因此，如果您是银行，则不需要 NoSql，但如果您是需要 100% 正常运行时间的网站，它可能是一个不错的选择）
*   如果正在写入的数据需要 100% 的时间成功，但最终的一致性不是问题。

只是为了直观的说明，这有助于我理解不同的 sql 解决方案在哪里适合数据库世界，以及每个解决方案如何适合一个目的。

![数据库三元组 - 可用性、一致性和分区容错性](../Images/3f6e42a5dda5c99b8535bfe03a39dbd9.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T02:42:36.133

在没有模式数据库中，您没有固定的列和类型。

例如，产品“牛仔裤”可以有属性“价格”、“长度”和“型号”（M/W），但对于产品书，您有属性“价格”、“作者”和“标题”。对于手机，您将拥有“屏幕类型”、“操作系统”等。

在 RDBMS 中建模非常困难，因为您不灵活并且用户无法插入任意属性，因此更容易使用针对此类数据优化的文档数据库，以便您可以轻松地按任意属性的值进行搜索和过滤（例如，所有长度>30 且型号=w 的产品）。

# batch-file - 在多色批量聊天方面需要帮助

> ID：15303344
> 
> 赞同：-2
> 
> 时间：2013-03-08T21:09:26.617
> 
> 标签：batch-file, cmd, chat, lan

我正在使用预制的批量聊天，我想用我自己的方式改进它。

当聊天中的某人说些什么时，它会这样输入： `[John]: Hello World`

我想要做的是获得`[John]`不同于程序其余部分的另一种颜色。我不能让它工作。我很想有人帮我绕过这个。

编辑：该`call:`命令不适用于此。我尝试过不同的批次，例如 colormsg 和 ctext。它们都不起作用。我认为问题出在`>> log.dat`.

这是代码：

```
@echo off
rem: Matthew Merchant ScriptingMadness.blogspot.com
rem ###### TITLE SCREEN ############
title Batch Chat Room
echo.
echo WELCOME TO THE CHAT!
echo:
echo:
echo Commands:
echo just hit ENTER to update screen.
echo.
set /p username=What is your name?
echo %username% has joined. >> log.dat
cls
goto CHATLOOP
REM ############################

REM ########## CHAT LOOP ##########
set lastmessage=""

:CHATLOOP
cls
type log.dat
echo.
echo.
set /p message=Say:

rem set message checker value
set thismessage="%message%"

rem check for exit
if %thismessage% == "EXIT" echo %username% has left the chat room. >> log.dat
if %thismessage% == "EXIT" exit
rem -----------------

rem check for clear
if %thismessage% == "CLS" echo %username% has cleared the chat log. > log.dat
if %thismessage% == "CLS" set message=Empty
if %thismessage% == "CLS" set lastmessage="Empty"
if %thismessage% == "CLS" goto CHATLOOP
rem ------------------

rem check for same message as last time
if %thismessage% == %lastmessage% goto CHATLOOP

rem if all checks out, go ahead and post this message
echo [%username%]: %message% >> log.txt

rem save value for next test
set lastmessage="%message%"

goto CHATLOOP
REM ################################ 
```

如果你还是不明白我的意思。见上文：我想要`%username%`另一种颜色`%message%`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T00:11:30.370

这是不可能的，这是我在 vb.net、c# 之前的第一种编程语言，虽然我在这方面花了 2-3 年的时间进行编码，但我注意到颜色值设置了背景或文本的颜色，但定义了什么文本您希望执行颜色命令是 - 不可能的 - 因为它不是 Microsoft 提供的命令的一部分，请记住它是一种管理工具，它不会专注于定义特定文本行的颜色......

# caching - Symfony2 esi 缓存用户信息

> ID：15303349
> 
> 赞同：0
> 
> 时间：2013-03-08T21:09:44.013
> 
> 标签：caching, symfony, esi

我需要缓存我的主页，这远没有问题，使用反向代理就足够了

但我还需要包含带有独立 (ESI) 的标题部分，以便我可以检查用户是否已连接并显示他的信息“你好文森特”。

问题是如果我这样做，主页（作为每个页面）将不得不测试会话，并且当我使用 PDO 存储时，我可以看到每个用户/页面在 MySQL 上运行 2 个查询。

所以我尝试添加一个简单的“is_connected”cookie，并检查它是否存在以呈现注销版本而不询问会话，但似乎只要我有一个允许匿名用户的防火墙，它就会询问会话。

我的想法不多了，我想看看人们为此做了什么，目标是在主页上根本没有查询。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T16:00:43.580

主页不需要测试会话。它应该被公开缓存并包含 esi include 标签：

```
<esi:include src="/home/header_fragment.html" /> 
```

只有 header_fragment 资源需要测试用户的登录会话。您可以在签名的 cookie 中存储登录用户信息（姓名、电子邮件等）的小缓存，并在 header_fragment 中读取该信息以确定登录与注销，如果已登录，则显示用户名而不是查找数据存储中的信息。

# java - 分配一个变量，实际发生了什么，Java

> ID：15303350
> 
> 赞同：8
> 
> 时间：2013-03-08T21:09:48.023
> 
> 标签：java, runtime, variable-assignment

在以下示例中，实际发生了什么？

```
int a = 1;
a += (a = 2); 
```

输出为 3，但我想知道幕后实际发生了什么。例如，我知道括号具有更高的优先级，`+`因此首先发生（a = 2）表达式应该变为`a = 2 + 2`. 在运行时，首先应该执行括号内的表达式，然后 a 变为 2。似乎`a`左边的第一个`+`在 of 之前被“加载”，`(a = 2)`最后一个表达式似乎没有覆盖之前的加载。换句话说，我对幕后究竟发生了什么感到很困惑。

如果有人知道，提前非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T21:12:14.663

从 JLS[部分 §15.26.2 复合赋值运算符](http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#15.26.2)：

> E1 op= E2 形式的复合赋值表达式等价于 E1 = (T)((E1) op (E2))，其中 T 是 E1 的类型，除了 E1 只计算一次。

因此，对于您的示例，我们有：

```
a = (a) + (a = 2) 
```

表达式从左到右求值。因此输出 3

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T21:21:56.877

[请参阅http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.7.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.7.1)中的引用示例*15.7.1-2*，这与您的示例几乎相同假如。尤其：

> 如果运算符是复合赋值运算符（第 15.26.2 节），则左侧操作数的评估包括记住左侧操作数表示的变量以及获取和保存该变量的值以用于隐含的二元运算.

由于这种优先级，首先计算 += 的左手。

由于括号，您可能会感到困惑，但请注意括号评估部分： http: [//docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.7.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.7.3)，特别是：

> Java 编程语言尊重由括号显式指示和由运算符优先级隐式指示的求值顺序。

在这种情况下，+= 运算符设置的隐式优先级表示将根据规范记住左侧操作数。虽然赋值运算符（包括“+=”）的优先级最低，但 += 的规范表明左侧操作数将在 15.26.2 中被记住。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T22:42:04.577

我们来看看下面程序的字节码：

```
package A;

public class Test
{
    public static void main(String[] args)
    {
        int a = 1;
        a += (a = 2);
    }
} 
```

我们只需要运行这个命令：

```
javap -c Test.class 
```

获取以下字节码：

```
public class A.Test {
  public A.Test();
    Code:
       0: aload_0
       1: invokespecial #1           // Method java/lang/Object."<init>":()V
       4: return

  public static void main(java.lang.String[]);
    Code:
       0: iconst_1
       1: istore_1
       2: iload_1
       3: iconst_2
       4: dup
       5: istore_1
       6: iadd
       7: istore_1
       8: return
} 
```

* * *

# ****解释：****

**我们将只关注 main 方法中的两行：**

 **```
int a = 1;
a += (a = 2); 
```

[`int a = 1;`从这里开始]

```
0: iconst_1 
```

*   将int`1`推入堆栈。

```
-------------
|           |
-------------
|           |
-------------
|     1     |
-------------
    STACK 
```

* * *

```
1: istore_1 
```

*   将 int 值从堆栈中弹出到`variable 1`(`variable 1`表示`a`)

```
-------------
|           |             variable 1
-------------           --------------
|           |           |     1      |
-------------           --------------
|           |
-------------
    STACK 
```

[`int a = 1;`到此结束]

* * *

[`a += (a = 2);`从这里开始]

```
2: iload_1 
```

*   从本地加载一个 int 值`variable 1`并将其推入堆栈。

```
-------------
|           |             variable 1
-------------           --------------
|           |           |            |
-------------           --------------
|     1     |
-------------
    STACK 
```

* * *

```
3: iconst_2 
```

*   将int`2`推入堆栈。

```
-------------
|           |             variable 1
-------------           --------------
|     2     |           |            |
-------------           --------------
|     1     |
-------------
    STACK 
```

* * *

```
4: dup 
```

*   复制堆栈顶部的值。

```
-------------
|     2     |             variable 1
-------------           --------------
|     2     |           |            |
-------------           --------------
|     1     |
-------------
    STACK 
```

* * *

```
5: istore_1 
```

*   将 int 值从堆栈弹出到`variable 1`.

```
-------------
|           |             variable 1
-------------           --------------
|     2     |           |      2     |
-------------           --------------
|     1     |
-------------
    STACK 
```

* * *

```
6: iadd 
```

*   将前两个值相加。

```
-------------
|           |             variable 1
-------------           --------------
|           |           |      2     |
-------------           --------------
|     3     |
-------------
    STACK 
```

* * *

```
7: istore_1 
```

*   将 int 值从堆栈弹出到`variable 1`.

```
-------------
|           |             variable 1
-------------           --------------
|           |           |      3     |
-------------           --------------
|           |
-------------
    STACK 
```

[`a += (a = 2);`到此结束]

* * *

```
8: return 
```

*   主方法返回。

* * *

# ****结论：****

**`a = a + (a = 2)`是通过几个操作完成的。`2: iload_1`作为第一个命令执行，`a += (a = 2);`该命令读取方程的第一个操作数`a = a + (a = 2)`并压入堆栈。**

 **接下来，`3: iconst_2`and`4: dup`被执行，基本上将 int`2`两次压入堆栈；一个用于加载它，`a`另一个作为第二个操作数。之后，`5: istore_1`执行加载`2`到`a`( `a = 2`) 中。

最后，`6: iadd`and`7: istore_1`执行 where`6: iadd`将第一个操作数和第二个操作数相加并将结果压入堆栈，然后`7: istore_1`将结果弹出并加载到`a`.

* * *

为简单起见，让我们快速看一下这段代码：

```
int a = 1;
int b = 3;
a += b; 
```

这是它的字节码：

```
public class A.Test {
  public A.Test();
    Code:
       0: aload_0
       1: invokespecial #1            // Method java/lang/Object."<init>":()V
       4: return

  public static void main(java.lang.String[]);
    Code:
       0: iconst_1
       1: istore_1
       2: iconst_3
       3: istore_2
       4: iload_1
       5: iload_2
       6: iadd
       7: istore_1
       8: return
} 
```

如您所见，它只是执行以下操作：

*   将int 加载`1`到`a`.
*   将int 加载`3`到`b`.
*   `a`然后推`b`入堆栈。
*   对它们执行加法并将结果压入堆栈。
*   从堆栈中弹出结果并将其存储到`a`.****

# python - json.dump 无法序列化包含 python 列表的字典

> ID：15303353
> 
> 赞同：3
> 
> 时间：2013-03-08T21:10:00.613
> 
> 标签：python, json, list, serialization, dictionary

我`[{'scenariotestinputid': 1, 'scenarioid_id': 1, 'testinputid_id': 1}]`在一个名为 result 的 python 字典中有这一部分。当我调用 json.dumps(result) 时，我得到一个 TypeError 说 [{'scenariotestinputid': 1, 'scenarioid_id': 1, 'testinputid_id': 1}] 不是 JSON 可序列化的。谁能解释为什么？

Edit1：完整的“结果”字典内容是：

```
result: {'scenarios': [{'inputs': [{'scenariotestinputid': 1, 'scenarioid_    id': 1, 'testinputid_id': 1}], 'scenarioid': 1, 'scenarioname': u'Default Scenario', 'testid_id': 1, 'isdefault': 1}, {'inputs': [], 'scenarioid': 2, 'scenarioname': u'Scenario-1', 'testid_id': 1, 'isdefault': 0}], 'status': 'success'} 
```

我正在使用的代码是：

```
if x == y:
    scenarios_list = Scenario.objects.filter(testid=testcase).order_by("scenarioname")
    scenarios_dict_list = []
    for scenario in scenarios_list:                                            
        scenario_inputs = scenario.scenariotestinput_set.values()
        scenario_dict = scenario.__dict__
        del scenario_dict['_state']
        scenario_dict['inputs'] = scenario_inputs            
        scenarios_dict_list.append(scenario_dict)
        result['scenarios'] = scenarios_dict_list
result['status'] = "success"
return HttpResponse(json.dumps(result), content_type="application/json") 
```

在函数内部

Edit2：回溯如下：

```
(Pdb) 
> /opt/my_apps/cpr_proj/cpr/views.py(512)set_benchmark_metrics_dispatcher()
-> return HttpResponse(json.dumps(result), content_type="application/json")
(Pdb) 
TypeError: TypeErro...izable",)
> /opt/my_apps/cpr_proj/cpr/views.py(512)set_benchmark_metrics_dispatcher()
-> return HttpResponse(json.dumps(result), content_type="application/json")
(Pdb) bt
  /opt/Python-2.7.3/Lib/threading.py(524)__bootstrap()
-> self.__bootstrap_inner()
  /opt/Python-2.7.3/Lib/threading.py(551)__bootstrap_inner()
-> self.run()
  /opt/Python-2.7.3/Lib/threading.py(504)run()
-> self.__target(*self.__args, **self.__kwargs)
  /opt/Python-2.7.3/Lib/SocketServer.py(582)process_request_thread()
-> self.finish_request(request, client_address)
  /opt/Python-2.7.3/Lib/SocketServer.py(323)finish_request()
-> self.RequestHandlerClass(request, client_address, self)
  /usr/local/lib/python2.7/site-packages/django/core/servers/basehttp.py(139)__init__()
-> super(WSGIRequestHandler, self).__init__(*args, **kwargs)
  /opt/Python-2.7.3/Lib/SocketServer.py(638)__init__()
-> self.handle()
  /opt/Python-2.7.3/Lib/wsgiref/simple_server.py(124)handle()
-> handler.run(self.server.get_app())
  /opt/Python-2.7.3/Lib/wsgiref/handlers.py(85)run()
-> self.result = application(self.environ, self.start_response)
  /usr/local/lib/python2.7/site-packages/django/contrib/staticfiles/handlers.py(67)__call__()
-> return self.application(environ, start_response)
  /usr/local/lib/python2.7/site-packages/django/core/handlers/wsgi.py(241)__call__()
-> response = self.get_response(request)
  /usr/local/lib/python2.7/site-packages/django/core/handlers/base.py(111)get_response()
-> response = callback(request, *callback_args, **callback_kwargs)
> /opt/my_apps/cpr_proj/cpr/views.py(512)set_benchmark_metrics_dispatcher()
-> return HttpResponse(json.dumps(result), content_type="application/json")
  /opt/Python-2.7.3/Lib/json/__init__.py(231)dumps()
-> return _default_encoder.encode(obj)
  /opt/Python-2.7.3/Lib/json/encoder.py(201)encode()
-> chunks = self.iterencode(o, _one_shot=True)
  /opt/Python-2.7.3/Lib/json/encoder.py(264)iterencode()
-> return _iterencode(o, 0)
  /opt/Python-2.7.3/Lib/json/encoder.py(178)default()
-> raise TypeError(repr(o) + " is not JSON serializable") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T23:12:57.257

的输出`values()`仍然是一个 QuerySet 对象，因为它允许您在它之后链接其他方法。添加完选项后，您需要将其“渲染”到适当的列表中：

```
scenario_inputs = list(scenario.scenariotestinput_set.values()) 
```

# c# - C#中的程序读取文件：按钮不起作用

> ID：15303354
> 
> 赞同：0
> 
> 时间：2013-03-08T21:10:03.387
> 
> 标签：c#, button

这是我的代码，由于某种原因，按钮二不会触发，按钮一会触发，当我将按钮 2 中的代码放入其中时，它会在那里工作。关于让按钮一和二都在点击时工作的语法，我缺少什么？我学习 c# 大约 2 周，所以这对我来说是全新的，我不明白为什么这段代码不应该工作。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace WindowsFormsApplication2
{

    public partial class Form1 : Form
    {
        string filePath = null;
        public Form1()
        {
            InitializeComponent();
        }

        //Method to check database connection
        private void button1_Click(object sender, EventArgs e)
        {
            MessageBox.Show("button1.Click was raised.");
        }

        //Method to select a file
        private void button2_Click(object sender, EventArgs e)
        {
            OpenFileDialog file = new OpenFileDialog();
            if (file.ShowDialog() == DialogResult.OK)
            {
                filePath = file.FileName;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:16:10.997

我假设事件处理程序没有被订阅（不再）。所以看看`Form1`自动生成文件中的部分类`Form1.Designer.cs`。一定有这个地方：

```
this.button1.Click += new System.EventHandler(this.button1_Click);
// is this missing?
this.button2.Click += new System.EventHandler(this.button2_Click); 
```

[如何：订阅和取消订阅事件（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms366768%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:14:22.630

确保`button2`已绑定。

从设计器中，选择按钮，然后转到属性窗口。单击闪电，并确保单击事件绑定到`button2_Click`.

另一种方法是右键单击`InitializeComponent()`并选择“转到定义”（带您到`Form1.designer.cs`）并查找以下内容：

```
button2.OnClick += new EventHandler(button2_Click); 
```

如果您已确认它已绑定，我们将需要查看比您显示的更多内容来确定问题。

# javascript - 您如何执行距离计算并获得答案以在 JavaScript 中显示？

> ID：15303358
> 
> 赞同：0
> 
> 时间：2013-03-08T21:10:19.240
> 
> 标签：javascript, computer-science

我不知道如何使讲师给出的公式起作用并显示和回答。他给出的公式是：

```
distance = Math.sqrt( ( (x2-x1)*(x2-x1) ) + ( (y2-y1)*(y2-y1) ) ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:25:13.327

你的公式是错误的。正确的是： sqrt( (x2 - x1)^2 + (y2 - y2)^2 )

```
// Two points to find the distance between
var a = [564,426];
var b = [56,784];

// subtract the x's and square the result
var xN = Math.pow( b[0] - a[0], 2 );

// subtract the y's and square the result
var yN = Math.pow( b[1] - a[1], 2 );

// Add the two results together then find their square root
var distance = Math.sqrt(xN + yN); 
```

资源： http: [//www.mathwarehouse.com/algebra/distance_formula/index.php](http://www.mathwarehouse.com/algebra/distance_formula/index.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:13:17.080

是`(x2-x1)*(x2-x1)`，不是`(x2-x1)*(c2-x1)`。

# javascript - 配置 Create.js（所见即所得编辑器）

> ID：15303362
> 
> 赞同：1
> 
> 时间：2013-03-08T21:10:34.650
> 
> 标签：javascript, jquery, wysiwyg

我正在考虑在我的网站（[http://createjs.org/demo/hallo/](http://createjs.org/demo/hallo/)）中使用 Create.js。我正在努力使用 JS，并找到可以在页面加载时进行编辑的位置。（默认行为是必须先单击编辑按钮。）想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:51:45.067

我发现我必须设置 `state: 'browse'`为`state: 'edit'` Doh！

# firefox - CSS3 Animate.css 在 Firefox 上看起来很奇怪

> ID：15303367
> 
> 赞同：0
> 
> 时间：2013-03-08T21:10:53.667
> 
> 标签：firefox, css, animation

我正在使用 animate.css 为登录幻灯片制作一个简单的弹跳动画。

[http://www.freelancing.com.br/](http://www.freelancing.com.br/)

这是触发器：

```
$('body').on('click', '.actions .login', function(){
    $('#login').removeClass('bounceOutUp');
    $('.overlay').fadeIn(300);
    $('#login').addClass('bounceInDown');

});
$('body').on('click', '#login .close', function(){
    $('#login').removeClass('bounceInDown');
    $('#login').addClass('bounceOutUp');
}); 
```

和基本的CSS标记：

```
.animated {
    -moz-animation-fill-mode: both;
    -moz-animation-duration: 1s;
    -moz-transition: all 0.3s ease-in-out;
}

@-moz-keyframes bounceInDown {
0% {
  opacity: 0;
  -moz-transform: translateY(-2000px);
}
60% {
  opacity: 1;
  -moz-transform: translateY(30px);
}
80% {
  -moz-transform: translateY(-10px);
}
100% {
  -moz-transform: translateY(0);
}
}

@-moz-keyframes bounceOutUp {
0% {
 -moz-transform: translateY(0);
}
20% {
  opacity: 1;
  -moz-transform: translateY(20px);
}
100% {
  opacity: 0;
  -moz-transform: translateY(-2000px);
}
} 
```

我真的不知道为什么会这样。标记与 chrome 相同，并且在那里滚动得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:41:02.117

与 Chrome 不同，该`transition`属性应用于`animation`Firefox 中的属性。

删除该`[-moz-]transition`属性，您的 CSS3 动画将在 Firefox 和 Chrome 中正常工作。

附言。你缺少`-moz-box-sizing: border-box;`一些元素。

# javascript - 如何缩短这个jquery函数？

> ID：15303368
> 
> 赞同：-1
> 
> 时间：2013-03-08T21:11:02.250
> 
> 标签：javascript, jquery

所以我有一个像这样的 3 x 3 表：

```
<table border="1">
  <tr>
    <td><img src="blank.png" alt="blank" id="one"/></td>
    <td><img src="blank.png" alt="blank" /></td>
    <td><img src="blank.png" alt="blank" /></td>
  </tr>
  <tr>
    <td><img src="blank.png" alt="blank" /></td>
    <td><img src="blank.png" alt="blank" /></td>
    <td><img src="blank.png" alt="blank" /></td>
  </tr>
  <tr>
    <td><img src="blank.png" alt="blank" /></td>
    <td><img src="blank.png" alt="blank" /></td>
    <td><img src="blank.png" alt="blank" /></td>
  </tr>
</table> 
```

在我的 javascript 中，我有：

```
$("#one").click(function() {

    var src = $("#one").attr("src");

    if (src == "blank.png") {
        $(this).attr("src", "hello.png");
    }
    else if (src == "hello.png") {
        $(this).attr("src", "hi.png");
    }

    else {
        $(this).attr("src", "blank.png");
    }       
}); 
```

当用户单击它时，这会在 3 个图像之间切换表格的第一个单元格。我知道如果每个单元格都有 9 个唯一 ID，它会起作用，但我不想在我的 javascipt 中有一大堆代码。那么我该如何缩短它呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T21:14:16.800

使用 switch 语句

```
$("#one").click(function() {
 switch(this.getAttribute("src")){
  case "blank.png":this.setAttribute("src","hello.png");break;
  case "hello.png":this.setAttribute("src","hi.png");break;
  default:this.setAttribute("src","blank.png");break;
 }
}); 
```

这是一个演示：http: [//jsfiddle.net/9jMHS/1](http://jsfiddle.net/9jMHS/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T21:15:13.040

如果所有元素都经历相同的图像周期，您可以使用一个类并将您的事件应用于所有元素。例如：

```
<td><img src="blank.png" alt="blank" class="image-cycle"/></td> 
```

并将您的 javascript 绑定到具有该类的所有元素：

```
$('.image-cycle').click( function () {
    // your code
    // the only thing that will have to change is 
    var src = $(this).attr("src");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T21:17:13.310

您可以将源映射到对象，如下所示：

```
$("#one").click(function() {
    var srcs = {
        "blank.png": "hello.png",
        "hello.png": "hi.png",
    }, src = $("#one").attr("src");

    $(this).attr("src", srcs[src] || "blank.png");
}); 
```

这样您就可以避免笨拙和难看的`switch`语句，并且可以轻松地扩展对象以添加更多`src`s。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T21:16:31.430

我不知道它有多干净，但这样的东西不应该工作吗？

```
$("#one").click(function() {
    var src = $(this).attr("src");
    var img = ["blank.png", "hello.png", "hi.png"];
    $(this).attr("src", img[(img.indexOf(src.toLowerCase())+1)%3]);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T21:29:32.567

```
var src = this.getAttribute("src");

this.src = src == "blank.png" ? "hello.png" :
           src == "hello.png" ? "hi.png"    :
                                "blank.png"; 
```

# algorithm - 固定停止距离的广度优先搜索

> ID：15303370
> 
> 赞同：2
> 
> 时间：2013-03-08T21:11:12.113
> 
> 标签：algorithm, graph, breadth-first-search

我正在研究一个图问题，其中给定了一个源节点，并且需要找到所有其他节点直到固定距离，其中节点之间的每条边都有统一的成本。因此，我使用标准 FIFO 队列技术实现了广度优先搜索，但是在固定距离处停止 BFS 会给我带来问题。

如果我使用的是 DFS，我可以通过每个递归调用传入当前深度，但我不能在这里这样做。我也无法修改图形的节点以保留额外的参数（距离）。有什么建议或参考吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T21:14:15.093

只需使用两个队列并在它们之间来回反弹。每次从一个切换到另一个时，将深度计数加一。

详细说明...

维护一个“活动”队列和一个“非活动”队列。

从活动队列中弹出一个节点。将其邻居添加到非活动队列。重复直到活动队列为空。然后交换队列。

这保持了如果到活动队列中`d`所有节点的距离是，则到非活动队列中所有节点的距离是不变的`d+1`。很容易跟踪并在需要时停止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T21:16:15.673

您可以将深度传递给您放入队列的值。您还可以保留一个单独的数组来存储您到达每个节点的深度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T21:17:55.367

将您传递的顶点及其与 BFS 源的距离封装在一起。

另一种可能性是只标记队列中的顶点；通常，图的框架允许您为图的元素分配权重，这是一种可以用于您的目的的机制。

最后一种可能性是在完全处理 BFS 的一个级别的边界之后将实际上不在图中的标记顶点插入队列中，以便您知道新级别的 BFS 深度何时开始。这将使您的队列看起来像`v u w x y MARKER s t j l k`所有这些都是图的顶点，除了`MARKER`.

# xcode - Undefined symbols in SenTestingKit

> ID：15303371
> 
> 赞同：0
> 
> 时间：2013-03-08T21:11:23.057
> 
> 标签：xcode, unit-testing, undefined-symbol

Just turned on unit testing on an existing project, follow all the instruction [here](http://twobitlabs.com/2011/06/adding-ocunit-to-an-existing-ios-project-with-xcode-4/), [here](https://stackoverflow.com/questions/6461074/linking-error-for-unit-testing-with-xcode-4) will no luck.

Any hints? There are tests that work, but I was testing with a category class instead of a totally custom class.

I should also mentioned that I am using CocoPods which seems to compile fine in the test target. Oh, and I am using xcode 4.6

Here is the relevant error msg:

> Undefined symbols for architecture i386: "_OBJC_CLASS_$_UIHelpers", referenced from: objc-class-ref in EventHashTest.o ld: symbol(s) not found for architecture i386 clang: error: linker command failed with exit code 1 (use -v to see invocation)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-24T00:35:10.903

What's happening here is that your implementation (.m) for UIHelper can't be found by the UnitTest. You need to make sure your UIHelper.m is part of your app or your unit test target. See how the UIHelper.m is indicated as having target membership by the text box in the ride pane:

![enter image description here](../Images/b265d72cfc0362fb529faa2abc65a3b1.png)

And, the unit test target is able to find this implementation b/c this target depends on the app target. See in the middle pane where the app is listed as a target dependency:

![enter image description here](../Images/33b943aa38d5f9ce03cfa5433d59b512.png)

# android - 如何从 BroadcastReceiver 通知对象

> ID：15303372
> 
> 赞同：0
> 
> 时间：2013-03-08T21:11:27.253
> 
> 标签：android, broadcastreceiver, observer-pattern

我正在使用每 30 分钟调用一次 BroadcastReceiver 的 AlarmManager。接收器从网络下载更新并将新数据添加到数据库中。发生这种情况时，我想通知其他一些对象，数据库中的数据已更改（删除缓存、刷新 GUI 等）。

通常，我会为此使用观察者模式，但由于 BroadcastReceiver 是无状态的，我无法在接收器调用之间跟踪观察者。我真的找不到一些好的解决方案，你有什么建议？也许，有一些我没有找到的特定于android的解决方案......

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:14:28.687

A`BroadcastReceiver`本身应该做的很少。用它`Intent`在`Service`你选择的地方开火，你所有的状态和资源等都可供你使用。

# django - django dumpdata ORM + mongoengine

> ID：15303377
> 
> 赞同：1
> 
> 时间：2013-03-08T21:12:04.643
> 
> 标签：django, mongoengine

我不确定如何处理以下情况（显然是我的问题）。

我有一个带有 postgresql 的 django 设置来包含所有 django 模型数据，但我也有 mongoengine 管理（让我们称之为）扩展数据。

我在两者之间也有一个循环引用（从 django 模型到 mongoengine 文档 PK 的 mongo_id 点，从 mongoengine 到 django 模型 PK 的 db_id 点）。

显然，如果我运行`dumpdata`，我只会得到 django 模型数据。我怎样才能让它也从 mongoengine 转储数据？我有办法做到这一点吗？

这是为了获取数据的备份。只需抓取磁盘上的文件即可轻松完成引用文件的备份。

我没有`DATABASES`在`settings.py`文件中定义另一个（主要是因为我不需要）。那是我需要做的吗？

感谢您的任何指示。

作为奖励，如果我能在管理界面中使用那些 mongoengine 以及基本的 django 模型，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T16:23:36.633

首先，您可以使用[mongodump转储数据](http://docs.mongodb.org/manual/reference/program/mongodump/)

在一个项目中，我们必须将数据从一个数据库移动到另一个具有显着不同模式的数据库，因此我们创建了一个管理命令来执行此操作。如果您想以类似的方式使用它，它将具有仅移动当前`Document`定义的有效数据并忽略旧定义的任何可能剩余部分的优势。

转储管理命令应包含类似

```
from bson import json_utils
json_util.dumps(map(lambda x: x.to_mongo(), SomeDocument.objects.all())) 
```

# c# - 使用 Watin 访问表格中的图像

> ID：15303378
> 
> 赞同：0
> 
> 时间：2013-03-08T21:12:06.833
> 
> 标签：c#, watin

我正在尝试使用 Watin 单击可点击的图像，但我很难在表格内达到它的水平。

这是网页代码：

```
<td class="KPagerCell">
<a class="PagerHyperlinkStyle" href="javascript:__doPostBack('ctl00$Main$lvBills$viewPager','2')" title=" Next to Page 2">
    <img src="../Resources/Images/next.gif" alt="next">
</a> 
```

这是我的 C#：

```
TableRow trpage = tb.TableRow(Find.ByClass("GridPager"));
TableCell tdPage = trpage.TableCell(Find.ById("ctl00_Main_lvBills_colPager"));
Table page = tdPage.Table(Find.ByClass("KPager"));
//TableBody tbpage = page.TableCell(Find.ByClass("KPagerInfoCell")).Parent.Parent as TableBody;
TableRow trkeypager = page.TableRow(Find.ByClass("KPager"));
TableCell tdkeypager = trkeypager.TableCell(Find.ByClass("KPagerCell"));
Link nxtpage = tdkeypager.Image(Find.ByAlt("next")).Parent as Link;
Image nxt = nxtpage.Image(Find.ByAlt("next"));
nxt.Click(); 
```

和错误：

```
Could not find IMG or INPUT (image) element tag matching criteria: Attribute 'alt' equals 'next' at https://secure6.i-doxs.net/WaterOne/Secure/Bills.aspx 
```

这些页面在登录之后，因此您将无法在实践中看到它。希望我已经提供了足够的背景信息。

# nservicebus - NServiceBus 和 DTC 的

> ID：15303382
> 
> 赞同：3
> 
> 时间：2013-03-08T21:12:21.183
> 
> 标签：nservicebus, msdtc, nservicebus-distributor

我在 NServiceBus 中使用 Distributor，但我对 DTC 的问题一无所知。在跨进程做事情之前，我只使用过一次 DTC，也许两次，而不是很多，所以我对整个 DTC 概念非常陌生。

```
Question:
To ensure durable messaging with NSB, is it absolutely necessary to use DTC's? 
```

我问的原因是我希望 NSB 能够检测到处理程序中的任何异常，因此通过不从队列中删除消息来对错误做出反应。因此不需要 DTC。这当然意味着处理程序中的任何数据库或外部服务访问都需要程序员执行她/他自己的回滚等。因此，DTC 似乎确实是最好的方法。所以我完全支持 DTC（如果我理解正确的话），因为从我的角度来看，它们确保消息永远不会从队列中丢失，并且只要处理程序正确实施并且让其他外部服务参与 DTC，消息处理就永远不会损坏.

但我不确定，特别是因为服务器维护团队中一位受人尊敬的人使用了**“DTC's will cause you a world of pain!”这句话。**当我提出由他在数据库服务器上激活 DTC 的想法时...

对 DTC 和 NSB 有很好理解的人可以帮我澄清一下我是否完全不了解我对 DTC 的理解，以及我是否完全错过了 DTC 的一些大陷阱？

亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T03:29:03.713

NServiceBus 分发器和在 NServiceBus 中使用 DTC 没有任何关系。无论您是否使用分销商，NServiceBus 都将使用 DTC。

NSB 分发器工作人员（甚至在不使用 NSB 分发器时单个盒子上的单个工作线程）不会在分布式事务中相互招募。让我重申一下，您永远不会在单个 DTC 事务中看到两个 NSB 工作线程。每个工作线程针对本地队列启动事务，然后将（可能是远程）数据库添加到事务（使其分布式）

这里有一个很好的概念[说明](http://www.nservicebus.com/StopLosingData.aspx)

我不认为你错过了任何大的陷阱。我只是将这两个概念解耦，NSB 分发器和 NSB 如何使用分布式事务

# php - 如何在 Codeigniter 中命名模型？

> ID：15303386
> 
> 赞同：2
> 
> 时间：2013-03-08T21:12:46.643
> 
> 标签：php, codeigniter

命名模型是否有“最佳实践”？

我有一张桌子叫`users`.

型号名称：用户？用户？用户模型？用户模型？

功能：添加、更新、删除、检查密码...

您会选择哪个型号名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T21:14:33.300

Codeigntier[示例](http://ellislab.com/codeigniter/user-guide/general/models.html#anatomy)使用了这种`name_model.php`做法。所以我通常命名文件`user_model.php`

然后文件内容

```
class User_model extends CI_Model {
    function __construct()
    {
        parent::__construct();
    }

    public function get_users() {
        //return all users
    }

    public function post_user($user_data) { //or create_user, your choice
       //insert user
    }

} 
```

为了便于阅读，我更喜欢使用`get_`、`post_`、`update_`和。`delete_`这是我的偏好，您不必遵循这种方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T21:14:50.287

它确实是个人喜好，但我个人使用 _model 为模型添加后缀，以干扰类似命名的库或控制器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T21:18:17.247

通常，在这种情况下，您可以使用名称 User_model，尽管这不是必需的，并且可能会根据项目的标准而改变。

唯一的要求是文件名是类名的小写版本，因此您的文件将命名为 user_model.php 并包含：

```
class User_model extends CI_Model {

} 
```

# facebook - Facebook FQL 评论用户名 = 匿名用户

> ID：15303387
> 
> 赞同：0
> 
> 时间：2013-03-08T21:12:48.337
> 
> 标签：facebook, comments, facebook-fql

像这样查询 FQL 注释表时：

```
SELECT post_fbid, fromid, username, time, text FROM comment WHERE post_id = id 
```

我得到了结果，但每条评论的用户名都是“匿名用户”。有谁知道为什么会发生这种情况并且可能有解决方案？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:03:50.940

`username`仅当您在外部站点上使用 Facebook 评论插件时，该字段才包含数据。人们可以在未登录 Facebook 的情况下发表评论。此字段反映用户在留下评论时输入的数据。

否则，正如 Stephane 所提到的，您需要使用该`fromid`字段并将其解析给实际用户。

我会查询该`profile`表以获取此信息，因为它返回任何 ID 的所有者，无论是页面、组还是用户：

```
{
"comments": "SELECT post_fbid, fromid, time, text FROM comment WHERE post_id=\"205861559433343_336511733034991\"", 
"commenters": "SELECT id, username, name FROM profile WHERE id IN (SELECT fromid FROM #comments)"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T21:43:25.323

> **用户**名 用户发表评论时输入的用户名。在这些情况下，返回的 fromid 将为 0。请注意，此处不返回有效用户的用户名。

老实说，我不明白这`username`到底代表什么，但你可以简单地忽略它！

`fromid`给出评论者的 ID 。从此，您获取用户名就没有问题了！

`ID`可以是用户或页面之一。我为您做了一个多重查询，收集了您需要的所有信息：

```
{
"comments": "SELECT post_fbid, fromid, time, text FROM comment WHERE post_id=\"205861559433343_336511733034991\"", 
"users": "SELECT uid, username FROM user WHERE uid IN (SELECT fromid FROM #comments)",
"pages": "SELECT page_id, name FROM page WHERE page_id IN (SELECT fromid FROM #comments)"
} 
```

# java - 需要帮助向用户显示列表并使用 Swing 获得他们的响应

> ID：15303388
> 
> 赞同：0
> 
> 时间：2013-03-08T21:12:49.727
> 
> 标签：java, swing, user-interface, joptionpane

这是我正在进行的演示文稿的第二部分。

```
String temp;

// Create the class
Hello helloUser = new Hello();

//Get the users name
temp = JOptionPane.showInputDialog("Please enter your name?");
helloUser.setName(temp);

String hello = helloUser.name(helloUser.getName());

//Greet the user
temp = JOptionPane.showInputDialog(null, hello, "Feeling", 
        JOptionPane.QUESTION_MESSAGE, null, new Object[]{
            "Great", "Good", "Been Better"
        });
helloUser.setFeeling(temp); 
```

在我得到用户名后，我希望程序向他们打招呼并询问他们的工作情况，然后为他们提供选择以供选择答案。上面用于问候用户的代码不断给我这个错误：

`no suitable method found for showInputDialog(<null>,String,String,int,<null>,Object[]) method JOptionPane.showInputDialog(Component,Object,String,int,Icon,Object[],Object) is not applicable (actual and formal argument lists differ in length)`

我想给用户一个列表以供选择并将他们的选择存储在 temp 中。我可以用 JOptionPane 做到这一点吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:18:18.760

也许你忘记了参数。从[JOptionPane API](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JOptionPane.html)：

showInputDialog(Component parentComponent, Object message, String title, int messageType, Icon icon, Object[] selectionValues, Object initialSelectionValue)

初始选择值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T22:28:00.823

您当前的参数列表不适合提供的任何重载`JOptionPane.showInputDialog()`方法。

如果提供`selectionValues`参数，则还必须提供`initialValue`.

试试这个：

```
Object[] options = {"Great", "Good", "Been Better"};
temp = JOptionPane.showInputDialog(null, 
                                   hello, 
                                   "Feeling", 
                                   JOptionPane.QUESTION_MESSAGE, 
                                   null,  
                                   options, 
                                   options[0]); 
```

# 3d - 多间带灯的房间

> ID：15303389
> 
> 赞同：2
> 
> 时间：2013-03-08T21:12:54.037
> 
> 标签：3d, unity3d, texture-mapping, lighting

我有点进退两难，我敢肯定我不是第一个遇到这个问题的人。

我正在尝试为具有多个房间的办公楼建模。我希望玩家能够打开/关闭每个房间的灯。以下是我遇到的问题：

问题 1：使用前向渲染时，我不能使用阴影，因此我的点光源会从墙壁漏出（即关闭灯的房间不是漆黑的，因为它们正在接收来自相邻房间的光）。

解决方案：最初，我通过两次光照映射我的场景来解决这个问题 - 一次打开灯，一次关闭灯。当玩家关闭灯光时，我将房间中的所有渲染器切换为全黑光照贴图并关闭灯光。

问题2：上述解决方案还不错，但是我所有的动态对象仍然接收到通过墙壁泄漏的光。我想我可以使用 lightprobes 解决这个问题。但是，我不确定如何更改单个探针的光照贴图（即房间内的探针使用关闭光照贴图，房间外的探针使用开启光照贴图）。

如果我使用带有阴影的延迟照明，一切都会很好，但我的 fps 从 60 下降到 ~20。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T00:03:05.133

拥有两个光照贴图确实是一种解决方案，但会将您限制在静态漫反射场景中。其他任何东西（移动物体或镜面场景）都需要更高级的技术。

*   一个简单廉价的解决方案是使用“单元和门户”（例如，[本文](http://www-ljk.imag.fr/Publications/Basilic/com.lmc.publi.PUBLI_Techreport@1172c0fd434_91669a/lefebvre-hornus-portals.pdf)）并保留您的第一个解决方案。这种方法构建了一个表示不同房间之间链接的图表，并且应该防止光线泄漏 - 至少是近似的。

*   更好的解决方案是使用[阴影贴图](http://en.wikipedia.org/wiki/Shadow_mapping)。您基本上从每个光源的角度渲染场景的深度图一次（如果准时！），然后一个简单的测试允许您确定当前点是否在阴影中。如果您有很多房间，您当然可以将此方法与单元和门户分解合并以加快计算速度。

*   一个可能更好的解决方案是使用[影子卷](http://en.wikipedia.org/wiki/Shadow_volume)。这种方法计算每个光锥（或聚光灯具有的任何形状）与场景的几何形状之间的几何交集。使用它，您可以确定当前点是在阴影体积内部还是外部。

如果您在网上搜索，所有这些都已扩展到软阴影。

# c++ - 如何从源向量<>构建搜索结果的向量<>？

> ID：15303391
> 
> 赞同：4
> 
> 时间：2013-03-08T21:12:56.303
> 
> 标签：c++, c++11

考虑这个例子：

```
std::vector<Student> students;
//poplate students from a data source
std::vector<Student> searched(students.size());
auto s = std::copy_if(students.begin(), students.end(), searched.begin(),
    [](const Student &stud) {
        return stud.getFirstName().find("an") != std::string::npos;
    });
searched.resize(std::distance(searched.begin(), s)); 
```

我有以下问题：

1.  是否可以为搜索到的向量分配内存等于初始向量？可能有 500 个*不小*的对象，可能没有一个满足搜索条件？还有其他方法吗？
2.  当复制到搜索到的向量时，它被称为复制赋值运算符，并且..显然会进行复制。如果从这 500 个对象中 400 个满足搜索条件呢？不只是浪费内存吗？

我是一个 C++ 菜鸟，所以我可能会说一些愚蠢的话。我不明白为什么要使用`vector<T>`where`T`是一个对象。我会一直使用`vector<shared_ptr<T>>`. If`T`是像 int 这样的原始类型，我想它使用起来有点简单`vector<T>`。

我考虑了这个示例，因为我认为它非常笼统，您总是必须从数据库或 xml 文件或任何其他来源中提取一些数据。您是否曾经`vector<T>`在数据访问层中使用过`vector<shared_ptr<T>>`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T21:19:05.500

关于你的第一个问题：

> 1 - 是否可以为搜索到的向量分配内存等于初始向量？可能有 500 个不小的对象，可能没有一个满足搜索条件？还有其他方法吗？

您可以使用后插入迭代器，使用[`std::back_inserter()`](http://en.cppreference.com/w/cpp/iterator/back_inserter)标准函数为`searched`向量创建一个：

```
#include <vector>
#include <string>
#include <algorithm>
#include <iterator> // This is the header to include for std::back_inserter()

// Just a dummy definition of your Student class,
// to make this example compile...
struct Student
{
    std::string getFirstName() const { return "hello"; }
};

int main()
{
    std::vector<Student> students;

    std::vector<Student> searched;
    //                   ^^^^^^^^^
    //                   Watch out: no parentheses here, or you will be
    //                   declaring a function accepting no arguments and
    //                   returning a std::vector<Student>

    auto s = std::copy_if(
        students.begin(),
        students.end(),
        std::back_inserter(searched),
    //  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    //  Returns an insert iterator
        [] (const Student &stud) 
        { 
            return stud.getFirstName().find("an") != std::string::npos; 
        });
} 
```

关于你的第二个问题：

> 2 - 当复制到搜索到的向量时，它被称为复制赋值运算符，并且..显然会进行复制。如果从这 500 个对象中 400 个满足搜索条件呢？不只是浪费内存吗？

好吧，如果您没有关于谓词选择性的统计信息，那么您无能为力。当然，如果您的目的是以某种方式处理某个谓词为真的所有学生，那么您应该`std::for_each()`在源向量上使用而不是创建一个单独的向量：

```
std::for_each(students.begin(), students.end(), [] (const Student &stud) 
{ 
    if (stud.getFirstName().find("an") != std::string::npos)
    {
        // ...
    }
}); 
```

但是，这种方法是否满足您的要求取决于您的特定应用程序。

> 我不明白为什么要使用`vector<T>`where`T`是一个对象。我会一直使用`vector<shared_ptr<T>>`.

是否使用（智能）指针而不是值取决于[**您是否需要引用语义**](https://stackoverflow.com/questions/14539624/memory-management-patterns-in-c/14539873#14539873)（除了可能的关于复制和移动这些对象的性能考虑）。根据您提供的信息，尚不清楚是否是这种情况，因此这可能是一个好主意，也可能不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:44:45.237

你打算怎么处理所有这些学生？

只需这样做：

```
for(Student& student: students) {
    if(student.firstNameMatches("an")) {
        //.. do something
    }
} 
```

# c# - 检测图何时重新收敛的算法（类似于公共子树？）

> ID：15303397
> 
> 赞同：8
> 
> 时间：2013-03-08T21:13:04.843
> 
> 标签：c#, algorithm, graph, subtree

我整天都在处理这个问题，我正在重写我们的一个遗留产品，我很难确定如何在我的流程图中找到一个特定的节点。这个问题让我想起了大学，但我一辈子都想不出一个算法来解决这个问题。

我附上了 3 个屏幕截图来帮助解释这一点，但基本问题是，给出 YES/NO? 决策节点，找到最近的终止分支的子节点。

我正在使用 C# .NET 和 JSON。在 JSON 中，我有一个对象，它为每个节点提供一个唯一标识符，并标识从一个节点到下一个节点的每个“链接”。我希望编写一个（或多个）函数来确定 C# 中给定分支节点的第一个“结束节点”。目前我已经在 C# 中将 JSON 构建到 XML 中。

鼓励任何和所有想法，而不是真正寻找代码，而是寻找方法/算法。

![在此处输入图像描述](../Images/90ef986d53850244ca61883389911c50.png) ![在此处输入图像描述](../Images/a990610cb25dca26504a6d707d7cf8b3.png)

![给定是/否找到延迟块..所有子节点遍历到的第一个节点](../Images/f9195347ab935b6eb43515f92557741c.png)

附上图中json的输出：

```
{ "class": "go.GraphLinksModel",
  "linkFromPortIdProperty": "fromPort",
  "linkToPortIdProperty": "toPort",
  "nodeDataArray": [ 
{"key":-1, "category":"Start", "loc":"169 288", "text":"Start"},
{"key":-2, "category":"End", "loc":"855 394", "text":"End"},
{"category":"Branch", "text":"Yes or No", "key":-4, "loc":"284.8837209302326 285.7848837209302"},
{"category":"DelayNode", "text":"Delay", "key":-3, "loc":"365.8837209302326 215.52345997177622"},
{"category":"Branch", "text":"Yes or No", "key":-5, "loc":"478.8837209302326 214.52345997177622"},
{"category":"DelayNode", "text":"Delay", "key":-6, "loc":"568.8837209302326 151.52345997177622"},
{"category":"DelayNode", "text":"Delay", "key":-7, "loc":"573.8837209302326 268.5234599717762"},
{"category":"DelayNode", "text":"Delay", "key":-8, "loc":"653.8837209302326 215.52345997177622"},
{"category":"Branch", "text":"Yes or No", "key":-9, "loc":"392.8837209302326 392.5234599717762"},
{"category":"DelayNode", "text":"Delay", "key":-10, "loc":"454.8837209302326 317.5234599717762"},
{"category":"DelayNode", "text":"Delay", "key":-11, "loc":"550.8837209302326 473.5234599717762"},
{"category":"DelayNode", "text":"Delay", "key":-12, "loc":"549.8837209302326 317.5234599717762"},
{"category":"DelayNode", "text":"Delay", "key":-13, "loc":"711.8837209302326 343.5234599717762"},
{"category":"Branch", "text":"Yes or No", "key":-14, "loc":"434.8837209302326 487.5234599717762"}
 ],
  "linkDataArray": [ 
{"from":-4, "to":-3, "fromPort":"T", "toPort":"L", "visible":true},
{"from":-1, "to":-4, "fromPort":"R", "toPort":"L"},
{"from":-3, "to":-5, "fromPort":"R", "toPort":"L"},
{"from":-5, "to":-6, "fromPort":"T", "toPort":"L", "visible":true},
{"from":-5, "to":-7, "fromPort":"B", "toPort":"L", "visible":true, "text":"NO"},
{"from":-6, "to":-8, "fromPort":"R", "toPort":"L"},
{"from":-7, "to":-8, "fromPort":"R", "toPort":"L"},
{"from":-4, "to":-9, "fromPort":"B", "toPort":"L", "visible":true, "text":"NO"},
{"from":-9, "to":-10, "fromPort":"T", "toPort":"L", "visible":true},
{"from":-10, "to":-12, "fromPort":"R", "toPort":"L"},
{"from":-11, "to":-13, "fromPort":"R", "toPort":"L"},
{"from":-12, "to":-13, "fromPort":"R", "toPort":"L"},
{"from":-8, "to":-13, "fromPort":"R", "toPort":"L"},
{"from":-13, "to":-2, "fromPort":"R", "toPort":"L"},
{"from":-9, "to":-14, "fromPort":"B", "toPort":"L", "visible":true, "text":"NO"},
{"from":-14, "to":-11, "fromPort":"T", "toPort":"L", "visible":true},
{"from":-14, "to":-11, "fromPort":"B", "toPort":"L", "visible":true, "text":"NO"}
 ]} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T01:23:18.057

更新：我想出了另一个解决方案，这次使用的是最低共同祖先问题的标准解决方案。请参阅我的另一个答案。

* * *

正如对 Oren 回答的评论中所指出的，Oren 实际上已经回答了“从两个分支可以到达的最近节点是什么？”*这个问题。*但实际上要回答的问题是“两个分支*必须到达的最近节点是什么？”*

这是一个相当难以解决的问题，我不知道有一个有效的解决方案。但是，这里有一个可行的算法草图。

假设给定的决策节点称为 A，WOLOG 有两个子节点 B 和 C。那么问题是节点是什么，称为 G，具有以下两个属性：

*   从 B 到 END 的每条可能路径，以及从 C 到 END 的每条可能路径，都经过 G。
*   G 是距离 B 和 C*最近*的节点，具有第一个属性。

（注意 G 可能是 END。我们可能有 A-->B、A-->C、B-->END、C-->END。）

我们可以从为可能的 G 制作一组候选者开始，这很容易。选择从 B 到 END 的*任何*路径——如果你愿意，可以随机选择——并将其节点放入哈希集中。然后选择从 C 到 END 的*任何*路径，并将其节点放入哈希集中。这两个集合的交集包含 G。称为交集 Alpha。

所以现在让我们从 Alpha 中删除所有绝对不是 G 的节点。对于集合 Alpha 中的每个节点 N：

*   构造一个与原始图相同但缺少 N 的新图。
*   END 是否仍然可以从新图中的 B 或 C 到达？如果是，那么N肯定不是G。如果不是，加N设置Beta。

如果我们完成后 Beta 为空，则 G 为 END。

否则，Beta中有节点。这些节点中的每一个都具有这样的特性，即如果将其移除，就*没有其他方法*可以从 B 或 C 到达 END。这些节点中的一个必须与 B 最接近——如果两个节点同样接近，那么其中一个就不需要了！-- 所以从 B 做广度优先遍历，第一次遇到 Beta 中的一个节点，那就是你的 G。

如果图表很大，这个草图似乎不会很快，但我很确定它会起作用。我很想知道是否有更好的解决方案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-09T15:47:14.717

我喜欢亚历克斯的回答，它似乎很有效率。这是解决您的问题的另一种方法，事实证明这实际上是最低共同祖先问题。这是图论中研究得非常透彻的问题。一开始我只是没有看到它，因为您必须*反转*所有箭头。

使用此解决方案，您只需进行一次昂贵的预处理，然后您就可以拥有一个数据结构，您可以从中读取答案。

![在此处输入图像描述](../Images/56e7c15b6043eb9cf1d024606ce82507.png)

我已经在您的图表中标记了节点。您所做的是首先*反转所有箭头*，然后构建生成的 DAG 的*欧拉遍历*，在每个步骤中记住您离“根”（末端）有多远。

欧拉遍历是“访问自己，递归邻居，访问自己，递归邻居，......访问自己”。也就是说，如果我们用 C# 编写它，我们会这样说：

```
void Eulerian(Node n, int i, List<Tuple<Node, int>> traversal)
{
    traversal.Add(Tuple.Create(node, i));
    foreach(Node neighbour in node.Neighbours)
    {
        Eulerian(neighbour, i + 1, traversal);
        traversal.Add(Tuple.Create(node, i));
    }
} 
```

欧拉遍历是您在*走*图时实际执行的遍历。

当您反转所有箭头并从 END 开始时，您作为示例给出的图具有以下欧拉遍历。

```
A0 B1 C2 D3 E4 F5 G6 H7 G6 F5 E4 D3 C2 I3 E4 F5 G6 H7 G6 F5 E4 I3 C2 
B1 J2 K3 L4 G5 H6 G5 L4 K3 J2 B1 M2 N3 L4 G5 H6 G5 L4 N3 M2 N3 L4 G5 
H6 G5 L4 N3 M2 B1 A0 
```

现在可以从遍历中读取您的问题的答案。在您的示例中，您有决策节点 E、L 和 G。

对于 E：在遍历中找到 E 的*第一次*和*最后一次*出现。现在在遍历中搜索这两个节点*之间*的节点，以找到编号最小的节点。是C，2分。

对于 L：在遍历中找到 L 的*第一次*和*最后一次*出现。它们之间数字最小的节点是B，得分为1。

对于 G：再次出现 G 的第一次和最后一次出现之间得分最低的节点是 B。

如果图很大，计算遍历可能会很昂贵，但好处是您只需执行一次。之后，这只是一个线性搜索问题。（如果你真的想的话，你可以把它变成一个亚线性搜索问题，但这似乎需要做很多额外的工作。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T21:20:21.427

如果我理解这个问题，那么您正试图找到“是”和“否”子树之间的第一个公共节点。在这种情况下，一种简单的方法是对 yes 子树进行[广度优先遍历](http://en.wikipedia.org/wiki/Breadth_first_search)，将每个元素添加到列表中。然后进行广度优先遍历或无子树，当该子树中的元素出现在“是”列表中时停止。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-09T11:48:09.870

这可以使用两个广度/深度优先搜索在 O(V + E) 时间内完成。

首先，让我们描述问题。我们得到一个图，一个起始节点 A 和一个结束节点 END。正如@EricLippert 所定义的（我稍作修改，因为我们可以等效地使用 A 而不是 B 和 C），我们正在寻找具有以下两个属性的节点 G：

*   从 A 到 END 的所有可能路径都经过 G。
*   G 是距离 A 最近且具有第一个属性的节点。

首先，我们使用 X 优先搜索找到从 A 到 END 的路径。设 P = (p1, p2, p3, ..., pk) 其中 p1 = A 和 pk = END 是这条路径，并将它们编号为 1、2、...、k（因此 pi 的编号为 i）。将这些数字与图中的节点一起存储。从图中删除 P 使用的边。从 A 开始另一个 X-first 搜索，找到从 A 可达的最高编号节点 pi。我们稍微调整一下这个搜索：每次我们找到一个比前一个最高可达节点 pk 更高的可达节点 pj，我们添加所有子路径 (pk, pk+1, ..., pj) 中的边返回图中，并将其间的所有这些节点标记为可访问，并将之前无法访问的所有节点添加到使用的队列/堆栈中在我们的 X 优先搜索处理中。返回以这种方式找到的 pi。

我们现在将证明 pi 满足 G 的条件。假设（为了达到矛盾的目的）我们有一条路径 S=(s1, s2, s3, ..., sj)，其中 s1 = A 和 sj = END不通过 pi。该路径的某些前缀 (s1, s2, s3, ... sm) 与我们的路径 P 一致，因此 s1=p1, s2=p2, ..., sm=pm，但 sm+1 != pm+1。由于 S 没有经过 pi 并且我们的第二次 X-first 搜索到达了 pi，所以当我们添加 (s1, s2, s3, ..., sm) 使用的边时，在我们的第二次 X-first 搜索中可以到达 sm . 因此，我们的第二次 X 优先搜索也将遍历路径 S 的其余部分，直到它到达 END 或 S 中使用的某个边 (pr, pr+1) 位于路径 P 但 r > i 并且因此这条边是删除。然而，我们会发现 pr（或 END）是可达的并且 r > i 所以我们不会返回 pi，这是一个矛盾。因此，

现在假设有一些节点 G' 具有上述属性，但比 pi 更接近 A。由于所有路径都经过 G'，P 也经过 G'，因此存在一些 v，pv=G' 且 v < i。由于所有路径都经过 G' 并且 (pv, pv+1) 已被删除，因此最初无法到达 pv 之外的任何节点，因此永远不会添加 (pv, pv+1) ，因此 pi 也永远无法到达，因此它不能拥有被我们的算法返回，这是一个矛盾。因此 pi 是最接近的此类节点，满足 G 的条件并且算法是正确的。

第一次 X 优先搜索需要 O(V+E) 时间。第二个也需要 O(V+E) 时间：所有节点最多被添加到队列/堆栈一次，因此即使我们将边添加回图，运行时间也会被保留；最终的边数也不超过原始图的边数。维护路径的索引和到目前为止找到的最高索引也需要 O(V+E) 时间，因此我们得出结论，我们的算法在 O(V+E) 时间内工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T14:30:50.460

因此，考虑到此处提供的一些答案，我对此进行了更多思考，我还没有完全开始为其编写代码，但是给出了其中一个答案，我已将其稍微修改为伪代码。

我认为更有效的方法是跟踪公共字典变量（键，值）对中任何分支节点的所有结果。对这种方法有什么想法吗？我应该提到的一件事是，该图不应增长到超过 25 个节点。

```
//call this function for all nodes with 2 children
int getFirstCommonAllpathEndNode(currentNodeId, xml, endNodeId){

    Array[] possibleNodeIds;
    //traverse child nodes
    foreach(childnode of CurrentNode.TopPortChildNode){
        if(childNode has 2 ports)
        {
            possibleNodeIds.add( getFirstCommonAllPathEndNode(childNode.id, xml, endnodeId));
        }
        else{
            possibleNodeIds.add(childNode.Id);
        }
    }

    foreach(childnode of CurrentNode.BottomPortChildNode){
        if(childNode has 2 ports)
        {
            //recursive call for this branch to get it's first common all path end node
            var someNodeId = getFirstCommonAllPathEndNode(childNode.id, xml, endnodeId) 
            if(possibleNodeIds contains someNodeId) 
                return someNodeId;
            //otherwise skip forward to someNodeId as next node to process in for loop
        }
        else{
            if (possibleNodeIds contains childNode.Id)
                return childNode.id
        }
    }
    //return the endNode if nothing else is satisfied. although this code should never be hit
    return endNodeId;
} 
```

# c++ - 私有类成员没有完全封装？

> ID：15303398
> 
> 赞同：1
> 
> 时间：2013-03-08T21:13:04.860
> 
> 标签：c++, encapsulation

[这是Instance-level encapsulation with C++](https://stackoverflow.com/questions/15277480/instance-level-encapsulation-with-c)的后续文章。

我已经定义了一个类并从该类创建了两个对象。

```
#include <iostream>
#include <ctime>
#include <string>

using namespace std;

class timeclass {
  private:
  string date;

  time_t gmrawtime, rawtime;
  struct tm * timeinfo;
  char file_date[9];

  void tm_init(int);

public:
  timeclass(int);
  void print_date();
};

void timeclass::tm_init(int y) {
  timeinfo = gmtime(&rawtime);
  timeinfo->tm_year = y - 1900; // timeinfo->tm_year holds number of years since 1900
  timeinfo->tm_mon = 0;
  timeinfo->tm_mday = 1;
  timeinfo->tm_hour = 0;
  timeinfo->tm_min= 0;
  timeinfo->tm_sec= 0;
}

timeclass::timeclass(int y) {
  timeclass::tm_init(y);
  gmrawtime = mktime(timeinfo) - timezone; 
}

void timeclass::print_date() {
  strftime(file_date,9,"%Y%m%d",timeinfo);

  date = string(file_date);
  cout<<date<<endl;
}

/* -----------------------------------------------------------------------*/

int main()
{
  timeclass time1(1991); 
  timeclass time2(1992); 

  time1.print_date(); // Prints 19920101, despite being initialized with 1991
  time2.print_date(); // Prints 19920101, as expected

  return 0;
} 
```

这个例子是从我的主程序中切分出来的日期计数器的一部分，但它说明了我的观点。我想为类的每个实例（time1 和 time2）运行一个日期计数器，但看起来一旦我构造了 time2 对象，我认为封装在 time1 中的“timeinfo”变量就会被 time2 构造函数覆盖。

我知道 C++ 仅支持类级封装，并且想知道我的问题是否是因为同一类的成员可以访问彼此的私有成员。有没有办法解决这个问题，所以我可以实现我想做的事情？谢谢你，泰勒

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T21:16:16.293

`gmtime()`, `localtime()`,`ctime()`并`asctime()`返回指向静态数据的指针。因此后续调用可能会覆盖先前调用写入的信息。这也意味着这些调用不是线程安全的，尽管在这种情况下不涉及多个线程。

其他答案为此限制提供了可能的解决方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T21:19:24.670

您实际上并不想要`gmtime()`（请参阅[Shafik 的回答](https://stackoverflow.com/a/15303455/1139697)）。你只想要一个`std::tm`你可以修改的：

```
void timeclass::tm_init(int y) {
  timeinfo = new std::tm;
  timeinfo->tm_year = y - 1900;
  timeinfo->tm_mon = 0;
  timeinfo->tm_mday = 1;
  timeinfo->tm_hour = 0;
  timeinfo->tm_min= 0;
  timeinfo->tm_sec= 0;
} 
```

正如 Shafik 已经写的那样，您的问题是您指向`std::tm`的许多方法使用的内部静态。`*time()`因此，只需创建自己的`std::tm`，甚至更简单，将其用作成员而不是指针：

```
class timeclass {
  private:
  std::tm timeinfo;
  /* rest stays the same */
};

void timeclass::tm_init(int y) {
  timeinfo = *std::gmtime(&rawtime); // if you need gmtime
  timeinfo.tm_year = y - 1900;
  timeinfo.tm_mon = 0;
  timeinfo.tm_mday = 1;
  timeinfo.tm_hour = 0;
  timeinfo.tm_min= 0;
  timeinfo.tm_sec= 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T21:35:19.997

正如其他人指出的那样，问题在于您使用的函数返回全局数据。所以你的问题已经被搁置了。

但是，正如您所指出的，C++ 在类级别而不是对象级别进行封装，因此任何对象都可以修改同一类的任何其他对象的私有数据。

您可以通过仅使用抽象类作为参数和类成员来解决这个问题：

```
class Time {
public:
    virtual void setYear(int year) = 0;
    virtual void printDate() = 0;
    virtual void subtract(Time& otherTime) = 0;   
}; 
```

# perl - 使用 Perl 发送消息和附件

> ID：15303401
> 
> 赞同：0
> 
> 时间：2013-03-08T21:13:23.197
> 
> 标签：perl

我有一些来自**Mail::POP3Client**的电子邮件，我需要将它们（包括附件）发送到另一个电子邮件地址（基本上，就好像它是从一个普通的电子邮件客户端转发的一样）。

我对 Perl 不是很熟悉，所以我已经研究了一段时间。我不确定执行此操作的最佳方法；我是否需要使用*RetrieveToFile*然后使用**MIME::Lite**发送它？人类可以阅读并包含附件吗？

似乎必须有一种我还没有发现的更简单的方法。我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-08T21:20:31.303

我用 MIME-tools 做了类似的事情，这是一个类似的包。在我这样做的时候，MIME-Lite 还不存在。但我确信 MIME-tools 可以处理您的要求。我无法想象 MIME-Lite 不能做类似的事情。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-09T18:49:07.807

像桌面邮件客户端一样转发由两部分组成：

1.  电子邮件处理

    使用[Courriel::Builder](http://p3rl.org/Courriel%3a%3aBuilder)创建新电子邮件。附上您最初收到的电子邮件。附加电子邮件的适当`mime_type`参数是[`message/rfc822`](http://enwp.org/Multipart_message#Content-Type)。

2.  电子邮件发送

    使用[电子邮件::发件人](http://p3rl.org/Email%3a%3aSender)。

* * *

不过，您可能希望[重定向](http://email.about.com/cs/usingemail/a/redirect.htm)，而不是转发电子邮件，以便原始发件人保持不变并且收件人可以轻松回复。

# php - EOF 循环 PHP 输出文件

> ID：15303405
> 
> 赞同：-1
> 
> 时间：2013-03-08T21:13:29.903
> 
> 标签：php, export

大家好，这只是我的第二篇文章，但我真的卡住了，希望能得到任何帮助，在此非常感谢。我正在处理 zencart 将数据从数据库导出到 2 个 csv 文件，文件 1 运行良好，但是当我运行文件 2 时，我遇到了 EOF 循环问题，由于某种原因，它会显示最后一个产品数千次，如下所示和结束循环，

```
ST,206,1,WIPAC 8" 4x4 100w Off-Road Driving Lamp Set Inc Grilles,0.0000,0
ST,387,0,Wolf Bench Grinder - WBG200/MD200F - Home - Tools - DIY,0.0000,0
ST,360,0,Wolfcraft TS 800 Adjustable Trolley - Home - Garden,0.0000,0
ST,116,0,WWE Ruthless Aggression 6 Pack - Wrestling Game - RARE - Retro,0.0000,0
ST,419,0,Zinc Ion XY Black Folding Scooter - Outdoors - Toy,0.0000,0
ST,220,0,Zoobles Mama & Zoobling Trinka and Tito & Tonia #306 Play Set,0.0000,0
ST,220,0,Zoobles Mama & Zoobling Trinka and Tito & Tonia #306 Play Set,0.0000,0
ST,220,0,Zoobles Mama & Zoobling Trinka and Tito & Tonia #306 Play Set,0.0000,0
ST,220,0,Zoobles Mama & Zoobling Trinka and Tito & Tonia #306 Play Set,0.0000,0
ST,220,0,Zoobles Mama & Zoobling Trinka and Tito & Tonia #306 Play Set,0.0000,0
ST,220,0,Zoobles Mama & Zoobling Trinka and Tito & Tonia #306 Play Set,0.0000,0
ST,220,0,Zoobles Mama & Zoobling Trinka and Tito & Tonia #306 Play Set,0.0000,0
ST,220,0,Zoobles Mama & Zoobling Trinka and Tito & Tonia #306 Play Set,0.0000,0
ST,220,0,Zoobles Mama & Zoobling Trinka and Tito & Tonia #306 Play Set,0.0000,0
ST,220,0,Zoobles Mama & Zoobling Trinka and Tito & Tonia #306 Play Set,0.0000,0
ST,220,0,Zoobles Mama & Zoobling Trinka and Tito & Tonia #306 Play Set,0.0000,0 
```

我正在使用的当前代码如下（感谢第 1 篇文章中的乔恩，他让我走到了这一步:)

```
$products_cost =
"select p.products_id, pd.products_name, p.products_quantity, ".
  "p.products_cost, (p.products_quantity*p.products_cost) AS products_total_cost, ".
  "p.products_type ".
"from " . TABLE_PRODUCTS . " p, " . TABLE_PRODUCTS_DESCRIPTION . " pd ".
"where p.products_id = pd.products_id and pd.language_id='" . $_SESSION['languages_id'] . "' ".
"order by (p.products_cost) DESC, p.products_cost desc, pd.products_name";

 $products_stock = $db->Execute($products_cost);

//Start Of Output for Stock File    

while(!$products_stock->EOF) {
$output = array();      
$output["tx_type"]='ST';        
$output["Stock_Code"]= $products_stock->fields['products_id'];
$output["Qty"]= $products_stock->fields['products_quantity'];
$output["Description"]= $products_stock->fields['products_name'];
$output["CostPriceEx"]= $products_stock->fields['products_cost'];
$output["TotalCostEx"]= $products_stock->fields['products_cost'] *  $products_stock->fields['products_quantity']; 

zen_sages_fwrite($output);
$products_stock->MoveNext();
}
$stimer = microtime_float(); 
```

我真的很欢迎任何人可以提供的任何建议或指导

非常感谢

罗素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:15:09.227

错字？

```
while(!$products_sock->EOF) {
                  ^---missing a T? 
```

# ios - iOS UIImage 返回 null

> ID：15303407
> 
> 赞同：0
> 
> 时间：2013-03-08T21:13:32.230
> 
> 标签：ios, uiimage

为什么这不起作用？

```
//set up check mark image
        imgCheckMark = [UIImage imageNamed:@"checkmark.png"];
        vImgCheckMark = [[UIImageView alloc] initWithImage:imgCheckMark];
        NSLog(@"%@", imgCheckMark); 
```

我在控制台中一直为空。图片在捆绑包中，我可以在编辑器中查看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:32:43.500

1.  `Checkmark.png`从项目中删除图像
2.  添加回来并尝试
3.  确保图像在项目文件夹中[同时将检查副本项目添加到目标组（如果需要）]
4.  确保图像名称与文件中的名称完全相同

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:18:46.263

检查文件名是否区分大小写。如果您的文件是 Checkmark.png，那么它将无法在设备上正常工作。这个问题有更多细节：

[适用于 iPhone 模拟器但不适用于设备](https://stackoverflow.com/questions/4050342/works-on-iphone-simulator-but-not-on-device)

# ruby-on-rails - 如何在 ruby 中使用 MongoMapper 重命名数据库？

> ID：15303409
> 
> 赞同：1
> 
> 时间：2013-03-08T21:13:36.297
> 
> 标签：ruby-on-rails, ruby, mongodb, mongomapper

我正在尝试在 ruby​​ 中使用 MongoMapper 重命名数据库。可以这样做吗？任何替代黑客来完成同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T22:46:10.570

正如上面提到的另一个堆栈溢出问题所述，MongoDB 实际上并没有重命名数据库的能力。但是，您可以先复制然后删除，但请注意这将导致重建索引。您不希望对大型数据集执行此操作。

mongo-ruby-driver（以及大多数 10gen 驱动程序）能够通过调用任何 DB 对象实例上 的[DB#command方法来执行任何](http://api.mongodb.org/ruby/current/Mongo/DB.html#command-instance_method)[MongoDB 命令。](http://docs.mongodb.org/manual/reference/commands/)

在 Ruby 驱动程序中，您将执行以下操作：

```
require 'mongo'
client = Mongo::MongoClient.new
db = client.db('admin')

db.command({:copydb => 1, :fromdb => oldname, :todb => newname})
client.drop_database(oldname) 
```

更新：在较新版本的 MongoDB 中，有一个用于 db.rename() 的 JS shell 帮助程序，它与上面的 ruby​​ 代码完全一样。

```
function (newName) {
  if(newName == this.getName() || newName.length === 0)
    return;

  this.copyDatabase(this.getName(), newName, "localhost");
  this.dropDatabase();
  db = this.getSiblingDB(newName);
} 
```

除此之外，还有以下功能请求票，用于使 db.rename() 成为一流的命令。请随时支持此功能。

[https://jira.mongodb.org/browse/SERVER-701](https://jira.mongodb.org/browse/SERVER-701)

# vb.net - 复制具有特定扩展名的所有文件

> ID：15303411
> 
> 赞同：2
> 
> 时间：2013-03-08T21:13:40.637
> 
> 标签：vb.net, file

您好，我想复制所有带有特定扩展名的文件。我已经尝试了一些东西，但它不起作用。在我的调试过程中，我得到一个异常“路径中使用了非法字符”我猜它不喜欢 *.xls 任何建议？

第一次尝试

```
 My.Computer.FileSystem.CopyFile("C:\test\test\mxw\*.xls\", "C:\workorder1-23\workorder1-23\mxw\", True) 
```

第二次尝试

```
For Each f In Directory.GetFiles("C:\test\test\mxw\*.xls\", CStr(SearchOption.AllDirectories))
     If My.Computer.FileSystem.FileExists(f.ToString) Then
          File.Copy("C:\test\test\mxw\*.xls\", "C:\workorder1-23\workorder1-23\mxw\", True)
     End If
Next 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T21:20:38.830

CopyFile 只复制一个文件。
您不能将它与通配符一起使用来复制一组文件。（无效字符可能是通配符）并且您不应在文件末尾附加反斜杠。

所以让我试着用这个替换你的代码

```
For Each f In Directory.GetFiles("C:\test\test\mxw", "*.xls", SearchOption.AllDirectories)
     If File.Exists(f) Then
          File.Copy(f, Path.Combine("C:\workorder1-23\workorder1-23\mxw", Path.GetFileName(f)), True)
     End If
Next 
```

[Directory.GetFiles](http://msdn.microsoft.com/en-us/library/ms143316.aspx)也有三个参数，一个路径，一个模式和一个标志来读取子文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-06T12:14:04.577

由于 File.Copy 不创建目录，因此提供的答案仅在目标目录存在时才有效。如果没有，请在 File.Copy 之前添加 Create.Directory(f)。

# php - Zend 框架应用程序 .htaccess

> ID：15303420
> 
> 赞同：0
> 
> 时间：2013-03-08T21:14:15.847
> 
> 标签：php, .htaccess, zend-framework, shared-hosting

我正在尝试制作一个在共享主机上运行的简单 Zend Webapp。登录 FTP 服务器后的根文件夹是一个名为“www”的文件夹。所以结构是：

```
/www
   /tasklist
        /application
        /library
        /public
        /.htaccess 
```

托管服务提供商要求 .htacccess 文件中的所有路径都是绝对路径。考虑到这一点，我的 Zend 应用程序的主 index.php 的路径是：

```
http://aportsupport.cz/tasklist/public/index.php 
```

这也是我可以访问我的应用程序的链接，但某些文件（css、js 等）的其他路径不起作用。当我尝试通过以下方式访问我的应用程序时：

```
http://aportsupport.cz/tasklist/ 
```

根据我已经尝试过的 .htaccess 的各种设置，我只会收到 404 或 403 错误。我无权访问错误日志，也无权访问任何服务器配置。默认控制器是'index'，动作'index'，模块'default'。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:10:24.180

在 Zend 应用程序中，.htaccess 应该在您的公用文件夹中，因此您的文件夹树将如下所示：

```
/www
    /tasklist
        /application
        /library
        /public
            /.htaccess 
```

对于大多数 Zend 应用程序，您的 .htaccess 可以保持简单。为 .htaccess 试用此文本：

```
Options +FollowSymlinks

RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteBase /
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

这分解为无论从这个根目录请求什么 url，它都会尝试获取文件 /www/tasklist/public/index.php，这将引导 Zend 应用程序。

请记住，如果您的托管服务提供商不支持 Zend Framework，它可能根本无法运行。[像http://www.phpcloud.com/](http://www.phpcloud.com/)这样的托管服务提供商确实允许基于 Zend 的应用程序，但您必须在创建容器时指定它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T22:21:09.127

感谢您的回复，但是，我终于设法自己完成了。对于所有可能有类似问题的人，此解决方案对我有用：

我创建了一个子域“tasklist.aportsupport.cz”，它在我的共享主机上有自己的根文件夹。在这个文件夹中，我将所有 Zend 文件夹及其默认结构放在一起。我还创建了 index.php 文件，我在其中写了这个：

```
<?php include 'public/index.php'; 
```

这个 index.php 位于 tasklist.aportsupport.cz 的根目录中，默认 Zend Framewrok .htaccess 我在其中添加了这一行：

```
RewriteBase / 
```

此外，所有 CSS、JS、imgs 等文件都位于该根文件夹中。一切正常！

# jquery - 表单控件使用 JQuery 触发动画

> ID：15303426
> 
> 赞同：0
> 
> 时间：2013-03-08T21:14:30.310
> 
> 标签：jquery, jquery-animate

我有一个`ul`，我有 3 个`li`用作容器并且是动画的。两个边缘`li`将有一些来自控件（选择和按钮）。我的问题是使用控件会触发我不想要的动画。这是一个示例[小提琴](http://jsfiddle.net/FtrBP/)。如何防止选择触发动画？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:20:40.133

如果事件目标是有问题的选择，则阻止该行为。

```
$('li#side-controls-container').on('click', function(){
    if ($(event.target).is('select')) { return; }
    ...
}); 
```

**[演示](http://jsfiddle.net/JqJZ3/)**

**建议：**

如果您计划拥有多个控件，则可以考虑为它们都指定一个特定的类。然后您可以检查事件目标是否具有该类，而不是检查它是否是特定类型的元素。

```
$('li#side-controls-container').on('click', function(){
    if ($(event.target).is('.container-control')) { return; }
    ...
}); 
```

# mongodb - MongoDB - 匹配数组中的多个值

> ID：15303430
> 
> 赞同：10
> 
> 时间：2013-03-08T21:14:38.653
> 
> 标签：mongodb, find

我希望能够在一个数组中找到具有三个或更多匹配值的多个文档。假设我们有以下文件：

```
 [{
       name: 'John',
       cars: [1, 2, 3, 4]
   },
   {
       name: 'Jane',
       cars: [1, 2, 3, 8]
   },
   {
       name: 'Smith',
       cars: [1, 8, 10]
   }] 
```

我们希望在以下数组中找到至少具有三个值（在汽车中）的文档：

```
 [1, 2, 3, 4, 5, 6, 7] 
```

结果将是：

```
 [{
       name: 'John',
       cars: [1, 2, 3, 4]
   },
   {
       name: 'Jane',
       cars: [1, 2, 3, 8]
   }] 
```

任何人都知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-09T09:50:11.583

您可以`$in`发出查询，然后通过代码过滤在所需数组中具有 3 个或更多条目的记录。（这里是一些示例 python 代码）

```
def dennisQuestion():
    permissibleCars = [1,2,3,4,5,6,7]
    cursor = db.collection.find({"cars": {"$in": permissibleCars}})
    for record in cursor:
       if len(set(permissible) & set(record["cars"]))) >= 3
          yield record 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-09T01:01:07.380

这是一个很好的问题，我认为使用 MongoDB 为您提供的常用运算符没有简单的方法。但是我可以想到以下方法来实现这一点：

**1\. 新领域**

在应用程序代码中计算它并将结果保存在文档的新字段中。

**2.蛮力**

```
db.Collection.find( { $or: [
    { cars: $all [ 1, 2, 3 ] },
    { cars: $all [ 2, 3, 4 ] },
    ... list out all 35 combinations
] } ) 
```

**3.使用`$where`**

```
db.Collection.find( { cars: { $in: [1,2,3,4,5,6,7] }, $where: function() {
    var numMatches = 0;
    for (var i = 1; i <= 7; i++)
        if (this.cars.indexOf(i) > -1) numMatches++;
    return numMatches >= 3;
} } ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-19T18:42:54.973

当 Mongo 4.0.3 中的字符串值时，我不得不稍微修改 @Zaid Masud 选项 3：

```
db.Collection.find( { cars: { $in: ["s1", "s2", "s3" , "s4", "s5" , "s6" , "s7"] },
    $where: function() {
        var options = ["s1", "s2", "s3" , "s4", "s5" , "s6" , "s7"];
        var numMatches = 0;
        for (var i = 0; i < 7; i++)
            if (this.cars.indexOf(options[i]) > -1) 
                numMatches++;
        return numMatches >= 3;
    } 
} ); 
```

（这对于评论来说似乎有点大）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-10T20:25:01.373

对于 Mongo v4.4.1，此查询有效

```
[
  {
    $project: {
      name: 1,
      cars: 1,
      show: {
        $let: {
          vars: {
            "b": {
              $gte: [{$size: {$setIntersection: [ [1,2,3,4,5,6,7],"$cars"]}},3]
            }
          },
          in: "$$b"
        }
      }
    }
  },
  {
    $match: {
      show: true,

    }
  },
  {
    $project: {
      show: 0
    }
  }
] 
```

# tsql - 如何影响具有多个状态的 where 子句中的单个状态

> ID：15303433
> 
> 赞同：0
> 
> 时间：2013-03-08T21:14:50.903
> 
> 标签：tsql

这是我的查询，它返回从年初至今的政策计数。我想知道如何处理仅影响等于“活动”状态的语句。

```
select distinct
count(pol3.CT_ID + pol3.CT_NSID) as 'YTD',
pol3.ct_status
from contract pol3
where (pol3.CT_Status = 'Quote' or pol3.ct_status='Active' or pol3.ct_status='Declined')
and Year(pol3.CT_Subscription_Date)>= datediff(year,(DATEADD(yy, DATEDIFF(yy,0,getdate()), 0)), getdate())
group by pol3.ct_status 
```

这是当前的输出：

![在此处输入图像描述](../Images/60fec6468341277abf8f123c746f07ec.png)

我试着做

```
select distinct
count(pol3.CT_ID + pol3.CT_NSID) as 'YTD',
pol3.ct_status
from contract pol3
where (pol3.CT_Status = 'Quote' or pol3.ct_status='Active' or pol3.ct_status='Declined')
and CT_ORIGINAL_QUOTE_ID is not null
and CT_ORIGINAL_QUOTE_NSID is not null
and Year(pol3.CT_Subscription_Date)>= datediff(year,(DATEADD(yy, DATEDIFF(yy,0,getdate()), 0)), getdate())
group by pol3.ct_status 
```

这显然是错误的，因为它针对所有三种状态。如何使 ct_original_* 仅针对活动状态？任何线索或指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:26:27.563

在 SELECT 中使用 CASE 语句返回 1 或 0，然后对返回的值求和。

```
SELECT pol3.ct_status, SUM(CASE 
    WHEN ct_status IN ('Declined','Quote') THEN 1 // all of these should count as one policy
    WHEN ct_status = 'Active' and CT_ORIGINAL_QUOTE_ID is not null and CT_ORIGINAL_QUOTE_NSID is not null THEN 1 // if data in ID and NSID and active count it
    ELSE 0 // all others count as nothing
    END)
from contract pol3
where (pol3.CT_Status = 'Quote' or pol3.ct_status='Active' or pol3.ct_status='Declined')
and Year(pol3.CT_Subscription_Date)>= datediff(year,(DATEADD(yy, DATEDIFF(yy,0,getdate()), 0)), getdate())
group by pol3.ct_status 
```

# servlets - Jetty 8 上的 Servlet（非嵌入式！）+ Weld for CDI

> ID：15303435
> 
> 赞同：0
> 
> 时间：2013-03-08T21:14:55.540
> 
> 标签：servlets, jetty, cdi, weld

我想将 WAR 部署到 Jetty 8。WAR 包含一个简单的 servlet，该 servlet 通过 CDI (Weld) 将依赖项注入其中。

我在网上找到的所有示例/问题似乎都只涉及嵌入式 Jetty - 仅将 Jetty 用作外部 servlet 容器无关紧要。

我已经根据我对这些部分如何组合在一起的最佳知识进行了所有设置，但注入似乎没有发生，即使系统说一切都可以注入。

我的 META-INF 中有一个裸**beans.xml**。

我的 pom.xml、jetty-context.xml + jetty-env（在我的 WEB-INF 中）、servlet、injectee 实现 + 实现：

[http://pastebin.com/qh7pGCn5](http://pastebin.com/qh7pGCn5)

部署战争后，最初一切似乎都很好：

`Mar 08, 2013 3:38:42 PM org.jboss.weld.bootstrap.WeldBootstrap <clinit> INFO: WELD-000900 1.1.10 (Final) Mar 08, 2013 3:38:42 PM org.jboss.weld.bootstrap.WeldBootstrap startContainer INFO: WELD-000101 Transactional services not available. Injection of @Inject Use rTransaction not available. Transactional observers will be invoked synchronousl y. Mar 08, 2013 3:38:42 PM org.jboss.weld.environment.jetty.JettyPost72Container in itialize INFO: Jetty7 detected, JSR-299 injection will be available in Listeners, Servlet s and Filters. init init init init init init init init init init init init init init init!!!!!! !!!!!!!!!!!!!!`

...然后，当它尝试访问 servlet 第 41 行上的被注入者时，我得到一个空指针。

我错过了一些明显的东西吗？Weld 告诉我一切都对 CDI 有利。但那里什么也没有。

编辑：我也尝试过与 Jetty 7.6.9.v20130131 对齐的所有内容（根据文档，Weld 支持）

干杯，感谢您提供的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T00:51:55.553

您正在`Greeter`从覆盖的 Servlet.init() 方法中调用您的方法。这意味着此时 servlet 尚未初始化。从[Javadoc](http://docs.oracle.com/javaee/6/api/javax/servlet/Servlet.html#init%28javax.servlet.ServletConfig%29) -

> 由 servlet 容器调用以向 servlet 指示 servlet 正在投入使用。
> 
> servlet 容器在实例化 servlet 后恰好调用一次 init 方法。init 方法必须成功完成，servlet 才能接收任何请求。

现在，由于您没有为您的`Greeter`它声明范围，因此它自动具有`@Dependent`范围。因此，虽然`@Dependent`作用域始终处于活动状态，但依赖对象的生命周期与注入它们的实例绑定在一起，换句话说，它们不能单独存在。请参阅 CDI 规范的这一[部分](http://docs.jboss.org/cdi/spec/1.0/html_single/#dependentcontext)。

也就是说，所有其他正常范围仅在[Sevlet.serice()](http://docs.oracle.com/javaee/6/api/javax/servlet/Servlet.html#service%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)方法期间处于活动状态。因此，在 Servlet 完全初始化之前，您不能注入任何东西。请参阅 CDI 规范的这一[部分](http://docs.jboss.org/cdi/spec/1.0/html_single/#builtincontexts)。

结论 - 尝试从服务方法调用你`Greeter`，如果我没记错的话，你只能用实际请求来做。希望这可以帮助！

# .htaccess - .htaccess 获取互联网服务器错误

> ID：15303436
> 
> 赞同：0
> 
> 时间：2013-03-08T21:14:56.457
> 
> 标签：.htaccess

我有以下代码：

```
RewriteRule ^(feedback|contact)/? /contact-us\.php?ct=$1 [L] 
```

这是返回**INTERNET SERVER ERROR**，为什么？

但是当我删除时`|contact`，它可以工作。

工作代码：

```
RewriteRule ^(feedback)/? /contact-us\.php?ct=$1 [L] 
```

为什么它有效，而早期则无效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T07:43:33.017

它导致 URI 的无限循环（代码 500）的原因如下：`/contact/`因为您在 RewriteRule 中匹配以下正则表达式：

```
^(feedback|contact)/? 
```

然后您在内部将匹配的 URI 转发到：

```
/contact-us.php?ct=contact 
```

您可以看到将再次匹配您的正则表达式：`^(feedback|contact)/?`并且您的规则将再次重定向到`/contact-us.php?ct=contact`. 这种匹配和转发将继续进行，直到达到 Rewrite Limit 并且 Apache 抛出错误。

**为避免这种循环，您应该使用以下规则：**

```
RewriteRule ^(feedback|contact)(/.*|)$ /contact-us.php?ct=$1 [L,QSA,NC] 
```

上述规则将匹配以下 URI：

```
/contact
/contact/
/contact/foo
/contact/foo/bar
... 
```

但它**不会匹配**URI:`/contact-us.php`从而防止无限循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:30:03.350

你可以试试：

```
^(feedback|contact).*? /contact-us\.php?ct=$1 [L] 
```

这将匹配两个选择。

# scala - Scala 中高级类型推理的限制是什么？

> ID：15303437
> 
> 赞同：19
> 
> 时间：2013-03-08T21:14:56.457
> 
> 标签：scala, type-inference, higher-kinded-types, unapply

在以下简化的示例代码中：

```
case class One[A](a: A) // An identity functor
case class Twice[F[_], A](a: F[A], b: F[A]) // A functor transformer
type Twice1[F[_]] = ({type L[α] = Twice[F, α]}) // We'll use Twice1[F]#L when we'd like to write Twice[F]

trait Applicative[F[_]] // Members omitted
val applicativeOne: Applicative[One] = null // Implementation omitted
def applicativeTwice[F[_]](implicit inner: Applicative[F]): Applicative[({type L[α] = Twice[F, α]})#L] = null 
```

我可以在 applicativeOne 上调用 applicativeTwice，并且类型推断有效，只要我尝试在 applicativeTwice(applicativeOne) 上调用它，推断就会失败：

```
val aOK = applicativeTwice(applicativeOne)
val bOK = applicativeTwice[Twice1[One]#L](applicativeTwice(applicativeOne))
val cFAILS = applicativeTwice(applicativeTwice(applicativeOne)) 
```

scala 2.10.0 中的错误是

```
- type mismatch; 
  found : tools.Two.Applicative[[α]tools.Two.Twice[tools.Two.One,α]]
  required: tools.Two.Applicative[F]
- no type parameters for method applicativeTwice: 
  (implicit inner: tools.Two.Applicative[F])tools.Two.Applicative[[α]tools.Two.Twice[F,α]]
  exist so that it can be applied to arguments 
  (tools.Two.Applicative[[α]tools.Two.Twice[tools.Two.One,α]]) 
  --- because --- 
  argument expression's type is not compatible with formal parameter type; 
     found : tools.Two.Applicative[[α]tools.Two.Twice[tools.Two.One,α]] 
     required: tools.Two.Applicative[?F] 
```

为什么“？F”不能与任何（正确的）匹配？最终，我希望 applicativeTwice 成为一个隐式函数，但我必须首先让类型推断起作用。我见过类似的问题，答案指出了类型推断算法的局限性。但是这种情况似乎非常有限，并且在 monad 转换器中一定很烦人，所以我怀疑我错过了一些解决这个问题的技巧。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-19T00:12:48.327

您遇到了一个常见的烦恼：[SI-2712](https://issues.scala-lang.org/browse/SI-2712)。为清楚起见，我将最小化您的代码：

```
import language.higherKinds

object Test {
  case class Base[A](a: A)
  case class Recursive[F[_], A](fa: F[A])

  def main(args: Array[String]): Unit = {
    val one = Base(1)
    val two = Recursive(one)
    val three = Recursive(two) // doesn't compile
    println(three)
  }
} 
```

这演示了与您相同的类型错误：

```
argument expression's type is not compatible with formal parameter type;
 found   : Test.Recursive[Test.Base,Int]
 required: ?F
        val three = Recursive(two) // doesn't compile
                    ^ 
```

首先是一些您可能已经知道的语法和术语：

*   在 Scala 中，我们说一个普通的、未参数化的数据类型（例如`Int`）具有 kind `_`。它是**单态**的。
*   `Base`，另一方面，是参数化的。如果不提供它包含的类型，我们就不能将它用作值的类型，所以我们说 has kind `_[_]`。它是**rank-1 多态**的：一个接受类型的类型构造函数。
*   `Recursive`更进一步：它有两个参数，`F[_]`和`A`。类型参数的数量在这里无关紧要，但它们的种类很重要。`F[_]`是 rank-1 多态的，**rank-2 也是多态**`Recursive`的：它是一个类型构造函数，它接受一个类型构造函数。
***   我们称任何等级为 2 或以上的东西**为 high-kinded**，这就是乐趣的开始。**

 **一般来说，Scala 对高级类型没有问题。这是将其类型系统与 Java 等类型系统区分开来的几个关键特性之一。但是在处理更高种类的类型时，它确实存在*部分应用类型参数的问题。*

这就是问题所在：`Recursive[F[_], A]`有两个类型参数。在您的示例代码中，您使用了“type lambda”技巧来部分应用第一个参数，例如：

```
val one = Base(1)
val two = Recursive(one)
val three = {
  type λ[α] = Recursive[Base, α]
  Recursive(two : λ[Int])
} 
```

这使编译器相信您正在向构造函数提供正确类型 ( `_[_]`) 的内容`Recursive`。如果 Scala 有 curried 类型参数列表，我肯定会在这里使用它：

```
case class Base[A](a: A)
case class Recursive[F[_]][A](fa: F[A]) // curried!

def main(args: Array[String]): Unit = {
  val one = Base(1)          // Base[Int]
  val two = Recursive(one)   // Recursive[Base][Int]
  val three = Recursive(two) // Recursive[Recursive[Base]][Int]
  println(three)
} 
```

唉，它没有（见[SI-4719](https://issues.scala-lang.org/browse/SI-4719)）。因此，据我所知，处理此问题的最常见方法是 Miles Sabin 提出的“不适用技巧”。这是 scalaz 中出现的内容的一个大大简化的版本：

```
import language.higherKinds

trait Unapply[FA] {
  type F[_]
  type A
  def apply(fa: FA): F[A]
}

object Unapply {
  implicit def unapply[F0[_[_], _], G0[_], A0] = new Unapply[F0[G0, A0]] {
    type F[α] = F0[G0, α]
    type A = A0
    def apply(fa: F0[G0, A0]): F[A] = fa
  }
} 
```

用有点随意的术语来说，这个`Unapply`结构就像一个“一流的 lambda”。我们定义了一个 trait，表示某种类型`FA`可以分解为类型构造函数`F[_]`和类型的断言`A`。然后在它的伴生对象中，我们可以定义隐式来为各种类型提供特定的分解。我在这里只定义了我们需要调整的特定的`Recursive`，但你可以写其他的。

有了这个额外的管道，我们现在可以做我们需要的事情：

```
import language.higherKinds

object Test {
  case class Base[A](a: A)
  case class Recursive[F[_], A](fa: F[A])

  object Recursive {
    def apply[FA](fa: FA)(implicit u: Unapply[FA]) = new Recursive(u(fa))
  }

  def main(args: Array[String]): Unit = {
    val one = Base(1)
    val two = Recursive(one)
    val three = Recursive(two)
    println(three)
  }
} 
```

达达！现在类型推断有效，并且可以编译。作为练习，我建议您创建一个额外的类：

```
case class RecursiveFlipped[A, F[_]](fa: F[A]) 
```

...当然，这与任何有意义的方式并没有真正的不同`Recursive`，但会再次破坏类型推断。然后定义修复它所需的额外管道。祝你好运！

# 编辑

你要求一个不太简化的版本，一些了解类型类的东西。需要进行一些修改，但希望您能看到相似之处。首先，这是我们的升级版`Unapply`：

```
import language.higherKinds

trait Unapply[TC[_[_]], FA] {
  type F[_]
  type A
  def TC: TC[F]
  def apply(fa: FA): F[A]
}

object Unapply {
  implicit def unapply[TC[_[_]], F0[_[_], _], G0[_], A0](implicit TC0: TC[({ type λ[α] = F0[G0, α] })#λ]) =
    new Unapply[TC, F0[G0, A0]] {
      type F[α] = F0[G0, α]
      type A = A0
      def TC = TC0
      def apply(fa: F0[G0, A0]): F[A] = fa
    }
} 
```

同样，这[完全是从 scalaz 中抄袭的](https://github.com/scalaz/scalaz/blob/scalaz-seven/core/src/main/scala/scalaz/Unapply.scala)。现在一些使用它的示例代码：

```
import language.{ implicitConversions, higherKinds }

object Test {

  // functor type class
  trait Functor[F[_]] {
    def map[A, B](fa: F[A])(f: A => B): F[B]
  }

  // functor extension methods
  object Functor {
    implicit class FunctorOps[F[_], A](fa: F[A])(implicit F: Functor[F]) {
      def map[B](f: A => B) = F.map(fa)(f)
    }
    implicit def unapply[FA](fa: FA)(implicit u: Unapply[Functor, FA]) =
      new FunctorOps(u(fa))(u.TC)
  }

  // identity functor
  case class Id[A](value: A)
  object Id {
    implicit val idFunctor = new Functor[Id] {
      def map[A, B](fa: Id[A])(f: A => B) = Id(f(fa.value))
    }
  }

  // pair functor
  case class Pair[F[_], A](lhs: F[A], rhs: F[A])
  object Pair {
    implicit def pairFunctor[F[_]](implicit F: Functor[F]) = new Functor[({ type λ[α] = Pair[F, α] })#λ] {
      def map[A, B](fa: Pair[F, A])(f: A => B) = Pair(F.map(fa.lhs)(f), F.map(fa.rhs)(f))
    }
  }

  def main(args: Array[String]): Unit = {
    import Functor._
    val one = Id(1)
    val two = Pair(one, one) map { _ + 1 }
    val three = Pair(two, two) map { _ + 1 }
    println(three)
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-28T08:14:46.827

注意（3 年后，2016 年 7 月），[scala v2.12.0-M5](https://github.com/scala/scala/releases/tag/v2.12.0-M5)开始实施[SI-2172](https://issues.scala-lang.org/browse/SI-2712)（支持更高阶的统一）

请参阅[Miles Sabin](https://github.com/milessabin)的[提交 892a6d6](https://github.com/scala/scala/commit/892a6d6878accb67e3fe68aefaa256396db05a90)

`-Xexperimental`模式现在只包括`-Ypartial-unification`

它遵循[Paul Chiusano](https://issues.scala-lang.org/secure/ViewProfile.jspa?name=pchiusano)的[简单算法](https://issues.scala-lang.org/browse/SI-2712?focusedCommentId=61270)：

```
// Treat the type constructor as curried and partially applied, we treat a prefix
// as constants and solve for the suffix. For the example in the ticket, unifying
// M[A] with Int => Int this unifies as,
//
//   M[t] = [t][Int => t]  --> abstract on the right to match the expected arity
//   A = Int               --> capture the remainder on the left 
```

其中[`test/files/neg/t2712-1.scala`](https://github.com/scala/scala/blob/892a6d6878accb67e3fe68aefaa256396db05a90/test/files/neg/t2712-1.scala)包括：

```
package test

trait Two[A, B]

object Test {
  def foo[M[_], A](m: M[A]) = ()
  def test(ma: Two[Int, String]) = foo(ma) // should fail with -Ypartial-unification *disabled*
} 
```

和 ( [`test/files/neg/t2712-2.scala`](https://github.com/scala/scala/blob/892a6d6878accb67e3fe68aefaa256396db05a90/test/files/neg/t2712-2.scala))：

```
package test

class X1
class X2
class X3

trait One[A]
trait Two[A, B]

class Foo extends Two[X1, X2] with One[X3]
object Test {
  def test1[M[_], A](x: M[A]): M[A] = x

  val foo = new Foo

  test1(foo): One[X3]     // fails with -Ypartial-unification enabled
  test1(foo): Two[X1, X2] // fails without -Ypartial-unification
} 
```**

# python - ImportError：没有名为 modules.logic 的模块

> ID：15303448
> 
> 赞同：-1
> 
> 时间：2013-03-08T21:15:51.740
> 
> 标签：python, import

每当我开始我的程序时，我都会得到这个。它直到一个小时前才起作用，我一定以某种方式删除了一些重要的东西，我在这里已经发现它可能与它有关`__init__.py`- 但是，我在每个模块中都有一个。

还有其他原因吗？

如果我结帐任何东西，我会得到：

```
M   main.py
D   modules/__init__.py
M   modules/logic/game.py 
```

但是，我无法找出这意味着什么（你有没有试过用谷歌搜索一个字母，比如 M，oder D？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:32:24.173

该输出看起来像您使用的是 svn 或 git。字母**D**表示文件已删除，**M**表示已修改。坏消息是该文件`__init__.py`已被删除。好消息是您仍然可以恢复它们。只需 google *svn 恢复已删除的文件*。

更重要的是，您可能需要与删除它的人交谈（使用`svn log`）并了解其背后的原理。

### 更新

看来你用的是git，但是advice是一样的，这个上下文中的git命令语法应该是一样的，或者接近svn的语法。

# php - 在数组中查找匹配项

> ID：15303458
> 
> 赞同：-1
> 
> 时间：2013-03-08T21:16:29.047
> 
> 标签：php, arrays, multidimensional-array, array-intersect

绝对在我确信非常简单的事情上在这里做我的头......

我有 2 个数组。

*   `$post_cats`这是任何给定帖子所在的类别。
*   `$ad_cats`这是放置广告的类别数组。

基本上，如果帖子在其选定类别数组中具有与广告类别数组中的项目匹配的类别，则它必须返回匹配的值/项目。

`$post_cats`返回这个

```
array(4) {    
  [0]=> array(1) { ["slug"]=> string(6) "energy" }    
  [1]=> array(1) { ["slug"]=> string(6) "global" }  
  [2]=> array(1) { ["slug"]=> string(8) "identify" }  
  [3]=> array(1) { ["slug"]=> string(5) "south" }  
} 
```

并`$ad_cats`返回这个

```
array(6) {   
  [0]=> array(1) { ["slug"]=> string(5) "north" }  
  [1]=> array(1) { ["slug"]=> string(5) "south" }  
  [2]=> array(1) { ["slug"]=> string(4) "east" }  
  [3]=> array(1) { ["slug"]=> string(4) "west" }  
  [4]=> array(1) { ["slug"]=> string(6) "global" }  
  [5]=> array(1) { ["slug"]=> string(8) "fallback" }  
} 
```

重复的项目是“南”，所以在我看来，值`array_intersect($post_cats, $ad_cats);`应该是一个包含单个项目的数组 - “南”，对吗？

但是它的返回，看起来像，任何一个数组中的所有东西......我一生都无法让它工作......

> **使用上面的示例，我需要将“south”返回给一个变量。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:23:17.483

所以你正在寻找两个数组中的项目？...

像这样的东西怎么样：

```
function find_duplicate($array1, $array2)
{
  $list = array();

  foreach($array1 as $value1)
  {
    foreach($array2 as $value2)
    {
     if($value1 == $value2) $list[] = $value1;
    }
  }

  return $list;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:33:58.343

最好的方法是将那些数组转换成数组`array_intersect`可以使用。考虑：

```
$a; // first array
$b; // second array 
```

那么你会去：

```
$a1 = array();
foreach ($a as $v) $a1[] = $v['slug'];

$b1 = array();
foreach ($b as $v) $b1[] = $v['slug'];

$c = array_intersect($a1, $b1); 
```

PHP 函数通常使用比您想象的更强大的算法；因此，让 PHP 函数处理这类事情是一个不错的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T21:41:46.193

该解决方案用于[`array_map`](http://www.php.net/manual/en/function.array-map.php)获取值并取其交集

```
function mapper($a) 
{
    return $a['slug'];
}

$set1 = array_map('mapper', $post_cats);
$set2 = array_map('mapper', $ad_cats);
$result = array_intersect($set1, $set2); 
```

[PhpFiddle](http://phpfiddle.org/main/code/j5j-6mf)用于测试。

# sql-server-2008 - 阻止 iis apppool 用户连接到 sql

> ID：15303462
> 
> 赞同：0
> 
> 时间：2013-03-08T21:16:38.503
> 
> 标签：sql-server-2008, iis-7, applicationpoolidentity

使用 sql 2008 和 IIS 7。似乎无论我做什么，IIS 都使用 apppool 连接到 SQL 服务器。我什至完全限定了 web.config 中连接字符串中的用户名和密码。

我怎么关掉这个！？！？

`<add connectionString="Data Source=db;Failover Partner=db1;Initial Catalog=Cata;User Id=DOMAIN\Test;Password=111111;Trusted_Connection=Yes;" name="LocalSqlServer" providerName="System.Data.SqlClient" />`

但它仍然作为我为该网站 IIS 用户选择的指定帐户连接......这让我很生气。web.config 中是否还有其他内容可以将其关闭？

从下面的评论中，我在 SQLServer 中使用 AD 组进行连接，如果我关闭受信任的连接，SQL 将不会授权用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:19:27.470

`Trusted_Connection=Yes`告诉它使用集成身份验证，即应用程序池身份。将其取出或设置为`No`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:30:44.350

尝试 `Integrated Security=False` 在连接字符串中使用。

# ios - NSXMLParser：如果有特殊字符或斜体，则不检索正确的数据

> ID：15303466
> 
> 赞同：0
> 
> 时间：2013-03-08T21:17:06.497
> 
> 标签：ios

我正在使用 NSXMLParser 为 url 解析 xml。一些元素在文本中包含特殊字符以及斜体。

*   请在文本中找到以下带有斜体标签的 xml 元素：

> ```
> <name>Verify Settings<i>i</i>patch level</name> 
> ```

NSXMLParser 打破文本并给出**输出：**验证设置

有没有办法解析元素之间的斜体文本？

*   请在下面找到带有特殊字符的 xml：

> ```
> <impact> In 2003, the ¿shared APPL_TOP¿ architecture was introduced, which allowed the sharing of a single APPL_TOP, however the tech stack
>  ·  Reduced disk space requirements 
>  ·  Reduced maintenance
>  ·  Reduced administrative costs 
>  ·  Reduced patching down time 
>  ·  Less complex to add additional nodes, making scalability easier
>  ·  Complexity of instance reduced 
>  ·  Easier backups 
>  ·  Easier cloning</impact> 
> ```

它打破文本并给出**输出：** e成本·减少修补停机时间·添加额外节点的复杂性降低，使可扩展性更容易·降低实例的复杂性·更容易备份·更容易克隆

关于如何使用 NSXMLParser 解析文本中的斜体标签和特殊字符的任何建议？

* * *

这是我的`foundCharacters`代码：

```
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if (!self.currentStringValue) {
    // currentStringValue is an NSMutableString instance variable
    self.currentStringValue = [[NSMutableString alloc] init];
}
[self.currentStringValue appendString:string];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:04:59.303

这两者看起来不像是 XML 解析问题，而是 XML 生成问题。你是如何生成这个 XML 的？感觉就像是手动生成的 XML，而不是由适当的 XML 库生成的东西。

从解析器的角度来看您的 XML：`NSXMLParser`应该如何知道元素`<i>`中的 HTML `<name>`，而不是新的 XML 标记本身？！？如果这确实是 XML 的样子，那么您真的应该修复您的 Web 服务。

例如，用斜体查看您的问题，问题是`<i>`看起来像一个新的元素名称。一般来说，这应该表示为：

```
<name>Verify Settings&lt;i&gt;i&lt;/i&gt;patch level</name> 
```

或者作为

```
<name><![CDATA[Verify Settings<i>i</i>patch level]]></name> 
```

属性的这种编码`name`通常由在 Web 服务中进行 XML 编码的 API 完成。通常，您无需执行任何操作即可获得此行为。但是，如果您的 Web 服务手动创建自己的 XML，则可能会为您提供您在原始问题中描述的那种输出。

在第二个示例中，我会认为 XML 中的字符必须符合`<?xml ...>`标记中列出的字符集，例如：

```
<?xml version="1.0" encoding="ISO-8859-1"?> 
```

你的`<?xml ...>`标签说什么？列出的字符是否属于那里列出的编码？

* * *

Looking at your revised `foundCharacters`, the new rendition is much better. The previous rendition suffered from a problem, insofar as it assumed that `foundCharacters` would be called only once for any given pair of `<name>` and `</name>` tags. That is not necessarily the case. Your latest rendition correctly creates `currentStringValue` if it needs to, and then appends to it. That is the correct approach, consistent with the examples in the [Apple documentation](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/XMLParsing/Articles/HandlingElements.html#//apple_ref/doc/uid/20002265-BCIJFGJI). You might only want to do that if you're parsing one of the `elementName` types that you care about (e.g. `<name>`), but with that minor caveat, this new rendition looks much better.

# html - 如何将其转换为数据属性？

> ID：15303468
> 
> 赞同：0
> 
> 时间：2013-03-08T21:17:10.237
> 
> 标签：html, dtd, custom-data-attribute

我对数据属性感到困惑，我的任务是将其转换为 html5 有效代码：

```
<xy:search campaign="campaign-name" width="280px" height="32px">
</xy:search> 
```

这是一个广告，最近我们想验证我们的页面，但这是我无法修复的最后一个错误，因为自定义 dtd 元素。

我不想编写自定义 dtd 文件，是的，这段代码必须完全像更改之前一样工作，他们有这个自定义元素的脚本，所以我只想修改基本代码并将其“翻译”到验证器，因此对于广告商的脚本，该元素必须以某种方式可见/可读。

我认为它可以用html5数据属性解决，但我不知道那个方法......

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:47:40.453

假设`campaign`它是您需要转换的唯一属性......它就像附加`data-`到属性一样简单。这就是数据属性的全部内容。例子：

```
<xy:search data-campaign="campaign-name" width="280px" height="32px"> 
```

然后要访问 jQuery 之类的值，您可以使用[`.data()`](http://api.jquery.com/data/)：

```
$("your element").data("campaign"); // getter
$("your element").data("campaign","new value"); // setter 
```

# jquery - 另一个令人沮丧的未捕获参考错误：$ 未定义

> ID：15303471
> 
> 赞同：4
> 
> 时间：2013-03-08T21:17:18.980
> 
> 标签：jquery, ruby-on-rails

我在grade_picker.js 中有最简单的功能

```
$ ->  
$('#grade_cbl_eval_category_id').change ->
  selected = $(this).attr 'value'
  alert(selected)
  return false 
```

产量：

```
(function() {
  $(function() {
     **Uncaught ReferenceError: $ is not defined**
  return $('#grade_cbl_eval_category_id').change(function() {
    var selected;
    selected = $(this).attr('value');
    alert(selected);
    return false;
    });
  });
}).call(this); 
```

在 application.js 我有

```
$(function() {
$("#grade_picker_dialog").dialog({
    autoOpen: false,
    resizable: false,
    width: 810,
    modal: true,
    button: {
        "Done": function() {
            $(this).dialog("close");
        }
    }
});
}); 
```

在 Grades 类中，我确实有一个名为**cbl_eval_category_id**的属性。

我已经阅读了很多其他类似的帖子，但是作为一个新手，我关注的很少。
查看 rails-root 下的这些文件：

```
smiralph@smiralph] find . -exec grep -l "jquery" {} \; 
./.bundle/config
./app/assets/javascripts/jquery-ui-1.9.2.custom.min.js
./app/assets/javascripts/jquery-1.8.3.min.js
./app/assets/javascripts/jquery.dataTables.min.js
./app/assets/javascripts/rails.js 
```

在 .bundle/config 我有：

```
---  
BUNDLE_PATH: jquery-rails  
BUNDLE_DISABLE_SHARED_GEMS: "1" 
```

我可以从哪里开始寻找问题所在？？？

谢谢

* * *

**编辑/添加：**
应该添加几乎相同的代码在其他地方工作。（与我在这个简单示例之前最初的相同。）

* * *

**关闭** 谢谢大家，在你们的帮助下，我可以正常工作了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:20:10.207

您对 jQuery 的引用是在您对grade_picker.js 的引用之后，或者您的页面上没有加载 jQuery 库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T21:20:15.537

在添加任何其他依赖的 js 文件之前尝试添加 jquery

```
./app/assets/javascripts/jquery-1.8.3.min.js
./app/assets/javascripts/jquery-ui-1.9.2.custom.min.js
./app/assets/javascripts/jquery.dataTables.min.js
./app/assets/javascripts/rails.js 
```

# msbuild - MSBuild 忽略 /p：一键部署的配置

> ID：15303472
> 
> 赞同：0
> 
> 时间：2013-03-08T21:17:24.957
> 
> 标签：msbuild

我在 TFS 构建定义中使用 MS Build 来创建一键式部署。

一切都很好，但MS Build`/p:Configuration`在创建.`app.config``app.dev.config``exe.config.deploy`

我应该使用不同的属性吗？

这是我正在使用的 MS Build。

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe /nologo /noconsolelogger "C:\Builds\70\UTI-IT\LMSIntegrationTool_CO_QA2\Sources\src\LMSIntegrationTool\LMSScheduling.sln" /m:1 /fl /flp:"logfile=C:\Builds\70\UTI-IT\LMSIntegrationTool_CO_QA2\Sources\src\LMSIntegrationTool\LMSScheduling.log;encoding=Unicode;verbosity=diagnostic" /target:publish /p:SkipInvalidConfigurations=true /p:DeployOnBuild=True /p:Configuration=DEV /p:DeployPublishMethod=WMSVC /p:MsDeployServiceURL=corpdevweb11 /p:AllowUntrustedCertificate=true /p:ApplicationVersion=1.0.30301.5 /p:OutDir=\\prdtfsbld01\drops\LMSSchedulerTest\\ /p:PublishDir=\\prdtfsbld01\drops\LMSSchedulerTest\\ /p:OutDir="C:\Builds\70\UTI-IT\LMSIntegrationTool_CO_QA2\Binaries\\" /p:RunCodeAnalysis="False" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:37:47.103

构建服务器上没有安装 Slow Cheetah。感谢您的回复。

# c# - Silverlight DatePicker 文本输入需要输入键

> ID：15303476
> 
> 赞同：0
> 
> 时间：2013-03-08T21:17:53.073
> 
> 标签：c#, asp.net, silverlight

在我正在开发的 Silverlight Web 应用程序中，有一个 DataGrid，其中有一列显示为 DatePicker。DatePicker 提供了通过在框中键入或单击日历按钮并选择日期来更改其值的选项。在输入文本的情况下，如果单元格失去焦点，则输入的值将丢失并显示旧值。如果输入文本然后按下 Enter 键，则当单元格失去焦点时会保留该值。

同样令人好奇的是，此网格中的其他可编辑单元格已经保留了它们的信息，而无需先按 Enter。

有没有办法在不按 Enter 键的情况下保留值？当按下 Enter 键以使其工作时，显然会发生某种内置事件。也许我可以使用 LostFocus 事件来触发 Enter 键正在使用的任何内容？这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:53:43.647

您可能想尝试使用 keydown 事件并捕获所有击键，然后将数据刷新到此控件的绑定位置。

# r - 在 R 中创建一个包含一个命名列的列表

> ID：15303479
> 
> 赞同：0
> 
> 时间：2013-03-08T21:18:01.130
> 
> 标签：r

好吧，我很愚蠢，但是：

如何创建一个包含一列、10 行和一个列名的列表，并且所有字段中的数值都相同？我知道如何附加它，例如

```
mylist["column_name"] <- rep(1, nrow(mylist)) 
```

但不是如何自己创建它。

它应该如下所示：

```
> mylist
   column_name
1   1
2   1
3   1
4   1
5   1
6   1
7   1
8   1
9   1
10  1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:21:11.030

您确定要列表而不是数据框（因为这就是您的示例的样子）？你可以像这样得到它：

```
data.frame(column_name=rep(1,10)) 
```

# javascript - JavaScript Math.min 返回错误值

> ID：15303490
> 
> 赞同：3
> 
> 时间：2013-03-08T21:18:59.243
> 
> 标签：javascript, arrays, min

我正在使用[John Resig 的函数](http://ejohn.org/blog/fast-javascript-maxmin/)来查找数组中的最小值，但它以某种方式返回了底值。这是一个[演示](http://jsbin.com/izejop/3/)，这是代码。

```
 var arr = Math.min.apply(Math, [310127563311820800, 310127563190202368, 310127563110502401, 310127562443595776, 310127562326163457, 310127561751556097]);
document.write(arr); 
```

你能解释一下会发生什么以及为什么它返回错误（下限）值吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T21:20:34.917

问题不在于找到最小值，而在于使用这些数字。您不能在 JavaScript 中将它们表示为数字，因为整数只能完全保持在`-9007199254740992`和之间`+9007199254740992`。

这是因为 JavaScript 中的所有数字都是双精度[IEEE754](http://en.wikipedia.org/wiki/IEEE_floating_point)浮点数，尾数的大小是 53。

请参阅[ECMAScript 规范中有关数字类型的](http://www.ecma-international.org/ecma-262/5.1/#sec-8.5)更多详细信息：

> 请注意，所有大小不大于 253 的正整数和负整数都可以用 Number 类型表示（实际上，整数 0 有两种表示形式，+0 和 -0）。

要处理这些数字（并找到它们的最小值），您需要使用原生 JavaScript 数字之外的另一种表示形式。希望有许多处理大数字的库，例如[bignum](https://github.com/jtobey/javascript-bignum)（但您应该 google 并选择您喜欢的那个）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T01:44:08.867

除非您输入数字**字符串**，否则您将失去 javascript 的精度。

如果它们都是正整数，您可以对它们进行排序并返回最低索引元素，记住具有更多数字的字符串必须大于具有更少数字的字符串 -

```
var input= ['310127563311820800', '310127563190202368', '310127563110502401',
'310127562443595776', '310127562326163457', '310127561751556097'];

var minim= input.slice(0).sort(function(a, b){
    if(a=== b) return 0;
    if(a.length!= b.length) return a.length-b.length;
    return a>b? 1:-1;  
})[0];

alert(minim);

/*  returned value: (String)
310127561751556097
*/ 
```

如果您不需要保持原件的顺序，则可以跳过 slice(0) 位。

# css - jQuery Masonry：边距 0 自动

> ID：15303493
> 
> 赞同：0
> 
> 时间：2013-03-08T21:19:15.083
> 
> 标签：css, jquery-masonry

我正在尝试使用 Masonry 创建一个两列居中的内容区域。我希望这个区域很`500px`宽。目前我的每列的宽度都在`240px`，左列有一个`10px`padding-right （刚刚意识到我需要让它完全`20px`适合`500px`）。

但是，我无法让容器、它的父级或单个列居中。我已经尝试了多种不同的方法来让它工作（见：[https](https://github.com/bnb/bnb.github.com/commits/master) ://github.com/bnb/bnb.github.com/commits/master ），但似乎每次我做出改变时，砌体都会覆盖它。最近，我尝试使用该`containerStyle`函数，但（据我所知）它的结果与常规 CSS 相同。

有人知道我做错了什么吗？

编辑：这是我现在对砌体的论点：

```
$tumblelog.masonry({
  isFitWidth: true,
  columnWidth: 240  
  containerStyle: { 
    width: 500px;   
    margin: 0 auto; 
  }
}); 
```

# c# - 对 UserControl 中的绑定感到困惑

> ID：15303496
> 
> 赞同：0
> 
> 时间：2013-03-08T21:19:27.077
> 
> 标签：c#, wpf, data-binding, user-controls, inotifypropertychanged

我正在创建一个 UserControl 对象，并且正在尝试使用 Binding（使用 PropertyChanged）分配值。我做了一个原型，当我在 ViewModel 中赋值时，该值不会出现或修改 UserControl 组件，但如果我直接在视图中的 UserControl 对象中赋值，则修改有效。我想了解我做错了什么，因为如果我只是在我的窗口上添加一个对象并直接绑定（同样，使用 PropertyChanged），它就可以正常工作。按照下面的代码。

谢谢你的帮助。

最好的祝福，

古斯塔沃。

**用户控制：**

```
<UserControl x:Class="WpfControlLibrary1.UserControl1"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="30" d:DesignWidth="300">
<Grid>
    <TextBlock Text="{Binding Title}" />
</Grid>
</UserControl> 
```

**用户控制背后的代码：**

```
 public partial class UserControl1 : UserControl
{
    public UserControl1()
    {
        InitializeComponent();
    }

    #region Title Property

    public static String GetTitle(DependencyObject obj)
    {
        return (String)obj.GetValue(TitleProperty);
    }

    public static void SetTitle(DependencyObject obj, String value)
    {
        obj.SetValue(TitleProperty, value);
    }

    public static readonly DependencyProperty TitleProperty =
        DependencyProperty.RegisterAttached(
            "Title",
            typeof(String),
            typeof(UserControl1),
            new FrameworkPropertyMetadata(TitleChangedCallback)
            );

    private static void TitleChangedCallback(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        UserControl1 _this = (d as UserControl1);
    }

    private String title;
    public String Title
    {
        get { return title; }
        set
        {
            title = value;
            OnPropertyChanged("Title");
        }
    }

    #endregion

    #region INotifyPropertyChanged event and method

    public event PropertyChangedEventHandler PropertyChanged;

    // Create the OnPropertyChanged method to raise the event 
    protected void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(name));
        }
    }

    #endregion 
```

** 我的窗口：**

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:uc="clr-namespace:WpfControlLibrary1;assembly=WpfControlLibrary1"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <uc:UserControl1 Title="{Binding TitleVM, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
</Grid>
</Window> 
```

** 我的代码隐藏/视图模型：**

```
public partial class MainWindow : INotifyPropertyChanged
{
    // Notify WPF that Counter changed
    public event PropertyChangedEventHandler PropertyChanged;

    public MainWindow()
    {
        InitializeComponent();

        TitleVM = "açsldkfjasçldkfj";
    }

    private String titleVM;
    public String TitleVM
    {
        get { return titleVM; }
        set
        {
            titleVM = value;
            OnPropertyChanged("TitleVM");
        }
    }

    // Create the OnPropertyChanged method to raise the event 
    protected void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(name));
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:31:34.803

你`Window`没有`DataContext`. 无法解析绑定。

试试这个：

```
public MainWindow()
{
    InitializeComponent();

    DataContext = this; //This is what you're missing!

    TitleVM = "açsldkfjasçldkfj";
} 
```

编辑：

你也错过了同样的事情`UserControl`

```
public UserControl1()
{
    InitializeComponent();
    DataContext = this;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:07:48.997

在 HighCore 的帮助下，我发现了一个问题，另一个问题是我的 UserControl 没有定义名称。

只是说：

```
x:Name="UserControl" 
```

进入 UserControl 的 XAML 并将工作。另外，我已经修改了我的代码：

```
 public String Title
    {
        get { return (String)base.GetValue(TitleProperty); }
        set { base.SetValue(TitleProperty, value); }
    }

    public static readonly DependencyProperty TitleProperty =
     DependencyProperty.RegisterAttached(
         "Title",
         typeof(String),
         typeof(UserControl1),
         new FrameworkPropertyMetadata(null)
         ); 
```

我们眼中的干净代码。

PS：不需要写：

```
DataContext = this; 
```

关于 UserControl 背后的代码。至少这里只导致错误，没有值。

感谢 HighCore 的帮助。

# ios - iOS kAudioSessionProperty_AudioRouteChange 未检测到所有蓝牙设备

> ID：15303501
> 
> 赞同：2
> 
> 时间：2013-03-08T21:19:46.097
> 
> 标签：ios, bluetooth, voip

我正在使用 kAudioSessionProperty_AudioRouteChange 委托来检测蓝牙或耳机是否已连接到电话以用于 VoIP 应用程序。实际的蓝牙设备可以从：

```
AVAudioSessionRouteDescription *route = [[AVAudioSession sharedInstance] currentRoute];

for(AVAudioSessionPortDescription *port in route.outputs) {
    NSLog(@"AUDIO_OUTPUT IS NOW: %@",port.portType);
} 
```

但是，并非所有蓝牙设备都在此方法中被检测到。当与交换 vcard 信息等的车载蓝牙主机（如奥迪）配对时，不会检测到这一点。事实上，如果您在配对时检查 currentRoute，它不会显示为有效路由。那么车载蓝牙设备与耳机有什么不同，我如何检测所有用于通话的蓝牙扬声器/麦克风？默认的 iOS 手机应用程序列出每个设备没有问题。

# asp.net - 将参数传递给 sql 脚本

> ID：15303502
> 
> 赞同：1
> 
> 时间：2013-03-08T21:19:49.337
> 
> 标签：asp.net, sql, asp.net-mvc-4, sql-server-2012

现在，我可以使用 HTTPpost 方法从我的网站执行脚本。

```
string scriptDirectory = "c:\\Users\\user\\Documents";
                string sqlConnectionString = "Integrated Security=SSPI;" +
                    "Persist Security Info=True;Data Source=ARES";
                DirectoryInfo di = new DirectoryInfo(scriptDirectory);
                FileInfo[] rgFiles = di.GetFiles("*.sql");
                foreach (FileInfo fi in rgFiles)
                {
                    FileInfo fileInfo = new FileInfo(fi.FullName);
                    string script = fileInfo.OpenText().ReadToEnd();
                    SqlConnection connection = new SqlConnection(sqlConnectionString);
                    Server server = new Server(new ServerConnection(connection));
                    server.ConnectionContext.ExecuteNonQuery(script);
                    connection.Close();
                } 
```

Atm 脚本正在创建一个新数据库（数据库还不是动态的）。我想传入网站用户输入的参数，然后将其传递到 sql 脚本中。基本上我希望他们选择要创建的数据库的名称。

SQL 命令就在脚本的开头。

```
CREATE DATABASE [This is where the name will be passed to]
GO
USE[This is where the name will be passed to] 
```

编辑：

我有这个代码

```
SqlCommand createDbCommand = new SqlCommand();
        createDbCommand.CommandText = "CREATE DATABASE [@DataBase]";
        createDbCommand.Parameters.Add("@DataBase", SqlDbType.Text);
        createDbCommand.Parameters["@DataBase"].Value = client.HostName; 
```

我现在必须手动将其输入到脚本的顶部吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:22:59.233

创建一个新的 SqlCommand 并将脚本设置为`CommandText`脚本的文本，然后使用`cmd.Parameters.Add`.

将参数与 CRUD 操作一起使用很简单（谷歌对于数千个资源的“t-sql 参数”），但是参数化类型名称更复杂，因为这里有一篇冗长的 MSDN 文章：http: [//msdn.microsoft.com/ zh-CN/图书馆/bb510489.aspx](http://msdn.microsoft.com/en-us/library/bb510489.aspx)

如果您正在寻找快速“n”脏的东西，您可以通过将替换序列放入您的 sql 文件并使用正则表达式进行每个替换来滚动您自己的参数化系统，例如使用语法“ `{{fieldName}}`”。

# php - NetSuite - 接受 webhook POST 数据以使用 ASP.NET 或 PHP 创建记录

> ID：15303517
> 
> 赞同：1
> 
> 时间：2013-03-08T21:20:45.647
> 
> 标签：php, asp.net, api, post, netsuite

我们在 Unbounce.com 上有一个潜在客户生成表格，用于捕获潜在客户数据。他们有一个 webhook，可以通过 POST 将数据传输到任何可以接受并处理它的 URL。我们想构建一个页面来接受这些数据并在 NetSuite 中处理它（可能通过 SuiteScript API，但不确定）。[http://www.netsuite.com/portal/developers/resources/APIs/Dynamic%20HTML/SuiteScriptAPI/MS_SuiteScriptAPI_WebWorks.1.1.html](http://www.netsuite.com/portal/developers/resources/APIs/Dynamic%20HTML/SuiteScriptAPI/MS_SuiteScriptAPI_WebWorks.1.1.html)

从 POST 获取的变量 以下变量将按此顺序从表单传递到 NetSuite 处理页面：

```
prog
first_name
last_name
email
parents_email
i_am_a_
phone_number
parents_phone_number
comment 
```

尝试抓取的附加页面变量 阅读下面的示例代码，我们似乎可以抓取和存储一些附加项目。如果是这样，最好将它们存储在访问者个人资料中的 CRM 中以供将来参考：

```
page_id
page_url
variant 
```

索取示例代码 由于我们首选的开发环境是 ASP.NET，您能否提供可以接受来自 webhook 的 POST 数据并在我们的 NetSuite 帐户中创建新 CRM 记录的示例代码？

从 POST 获取数据的示例 PHP 代码示例代码可以在[http://support.unbounce.com/entries/307685-how-does-the-form-webhook-work找到](http://support.unbounce.com/entries/307685-how-does-the-form-webhook-work)

如果这是一个 PHP 页面，您可以通过以下方式获取变量：

```
// This is a sample PHP script that demonstrates accepting a POST from the
// Unbounce form submission webhook, and then sending an email notification.
function stripslashes_deep($value) {
$value = is_array($value) ?
array_map('stripslashes_deep', $value) :
stripslashes($value);

return $value;
}

// First, grab the form data. Some things to note:
// 1\. PHP replaces the '.' in 'data.json' with an underscore.
// 2\. Your fields names will appear in the JSON data in all lower-case,
// with underscores for spaces.
// 3\. We need to handle the case where PHP's 'magic_quotes_gpc' option
// is enabled and automatically escapes quotation marks.
if (get_magic_quotes_gpc()) {
$unescaped_post_data = stripslashes_deep($_POST);
} else {
$unescaped_post_data = $_POST;
}
$form_data = json_decode($unescaped_post_data['data_json']);

// If your form data has an 'Email Address' field, here's how you extract it:
$email_address = $form_data->email_address[0];

// Grab the remaining page data...
$page_id = $_POST['page_id'];
$page_url = $_POST['page_url'];
$variant = $_POST['variant']; 
```

* * *

但是我不知道用于将其导入 NetSuite 的代码。在从 NetSuite 查看 SuiteScript API 之后，看起来我们应该使用 nlobjRequest 或 nlapiRequestURL，但我对如何将其与上面的示例 PHP 页面集成的知识为零。

感谢您对 NetSuite 新手的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T13:04:52.193

您需要在 NetSuite 中创建一个 RESTlet。您可以在 NetSuite 的帮助指南中找到文档。RESTlet 是 NetSuite 的 SuiteScript API 的一部分。它们是用 JavaScript 编写的（当然，使用 NetSuite 提供的 API）。

创建 RESTlet 时，您将获得一个 URL。您应该将其用于 Unbounce 网络挂钩。您的 RESTlet 应该解析 Unbounce.com 传递的 JSON 数据。

# java - NoSuchMethodError org.apache.http.conn.scheme.Scheme

> ID：15303522
> 
> 赞同：0
> 
> 时间：2013-03-08T21:21:14.740
> 
> 标签：java, websphere, classloader

> java.lang.NoSuchMethodError: org/apache/http/conn/scheme/Scheme.(Ljava/lang/String;ILorg/apache/http/conn/scheme/SchemeSocketFactory;)V

I'm getting this error running WAS 8.5\. My web app depends on http client 4.1.1 but it seems i'm getting a different class loaded on WAS. How can I exclude the http client library from my apps class path on was 8.5?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:48:40.213

Try using "parent last" classloading so that you use your own classes instead of the ones from WAS.

Change it for the [application](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Fae%2Ftrun_app_classload.html&resultof%3D%2522%2550%2541%2552%2545%254e%2554%255f%254c%2541%2553%2554%2522%2520) and depending on your configuration for the application on the [webmodule](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/index.jsp?topic=%2Fcom.ibm.websphere.nd.multiplatform.doc%2Fae%2Fuweb_rwar.html) as well.

# jquery - .each 的 JSON 请求在 IE7 中不起作用，但在其他浏览器上运行良好

> ID：15303525
> 
> 赞同：0
> 
> 时间：2013-03-08T21:21:39.437
> 
> 标签：jquery, ajax, json, internet-explorer-7

您好，我在我的网站上实现了一个简单的 getJSON 调用。它工作正常，但 IE7 似乎输出和错误。谁能建议我发生了什么事？

```
 var output = '';
    var fullurl = 'myurl'
    $.getJSON(fullurl, function(json) {

    $.each(json, function(i,d) {
        output = '<span style="font-size:11px;"><b>Name :</b> '+d.Name+'</span><br>';
        output += '<span style="font-size:11px;"><b>Date :</b> '+d.Date+'</span><br><br>';
        output += '<span style="font-size:11px;"><b>Description :</b> '+d.Description+'</span><br>'; 
    }); 
    $('#description').append(output); 
```

弹出两个错误

```
 Error: Object doesn't support this property or method
 Error: Expected identifier, string or number 
```

任何帮助将不胜感激！

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:28:30.313

解决此类问题的最佳方法是将您的 IE 副本放入 IE7 仿真中，然后使用 F12 启动调试器。然后，您可以在该`$.each()`行上设置断点并检查 JSON 调用的结果。然后，您可以在迭代中进一步设置断点`.each()`并逐步执行每个断点，直到遇到错误并查看导致错误的数据/代码。IE 控制台还可以准确地告诉您是哪一行代码导致了错误。

如果您想让我们猜测可能出了什么问题，以下是我的猜测：

1.  如果你没有得到任何 JSON 数据，那么就没有什么可以运行`.each()`并且`input`永远不会被初始化。当您尝试执行时`$('#description').append(output);`，`output`可能未定义会导致错误。

2.  此外，`input`应声明为局部变量。

3.  此外，您当前的代码不会`input`从循环的所有迭代中累积值 - 它只是获取最后一次迭代。我不确切知道你的意图是什么，但你可能想`input`在循环外初始化并在循环`+=`内使用所有三行。这将累积，而不是为每个循环替换。

这是包含这些更改的代码：

```
var fullurl = 'myurl';
$.getJSON(fullurl, function(json) {
    var output = "";
    $.each(json, function(i,d) {
        output += '<span style="font-size:11px;"><b>Name :</b> '+d.Name+'</span><br>';
        output += '<span style="font-size:11px;"><b>Date :</b> '+d.Date+'</span><br><br>';
        output += '<span style="font-size:11px;"><b>Description :</b> '+d.Description+'</span><br>'; 
    }); 
    $('#description').append(output);
}); 
```

# javascript - 访问上面在对象文字中定义的变量会导致 ReferenceError

> ID：15303526
> 
> 赞同：2
> 
> 时间：2013-03-08T21:21:44.647
> 
> 标签：javascript, variables, referenceerror

```
var g = {
    lang: "ttt",
    l: function(){
        console.log(lang);
    }
}

console.log(g.l()); 
```

> ReferenceError：未定义语言

为什么 lang 未定义？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T21:23:17.093

您需要使用`g.lang`或`this.lang`。`this`将引用`g`对象，除非使用`.call()`或`.apply()`。

例如，这将导致未定义：

```
var g = {
    lang: "ttt",
    l: function(){
        console.log(this.lang);
    }
}

console.log(g.l.call(Math)); 
```

但是，这将始终给出正确的结果（如果您不重新分配`g`）：

```
var g = {
    lang: "ttt",
    l: function(){
        console.log(g.lang);
    }
}

console.log(g.l.call(Math)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T21:22:51.127

因为`this`——不像Java——从来都不是作用域链查找的一部分。修复：

```
var g = {
    lang: "ttt",
    l: function(){
        console.log(this.lang);
    }
}

console.log(g.l()); 
```

# jquery - Google Maps API v3：routeIndex 不工作？

> ID：15303527
> 
> 赞同：2
> 
> 时间：2013-03-08T21:21:44.980
> 
> 标签：jquery, google-maps-api-3

我正在使用 Google Maps API v3 并尝试提供“显示下一条路线”按钮，用户可以在其中循环浏览所有可用路线。

我已经让它显示了第一条路线，但是当我使用 DirectionsRenderer 类的 routeIndex 属性时，它只返回第一条路线。

难道我做错了什么？代码粘贴在下面。我一直使用的测试路线一共有三个路线。如果我将 routeIndex 属性设置为 1，它仍会显示数组中的第一条路由（基本上是 routeIndex[0]）。

```
function showDirections() {
// show contact buttons
$(".contact-route-button").css({display:"block"});

// add 1 to count
count++;

// If this function has been run before, clear the directions
if(count > 1){
    // Clear map
    directionsDisplay.setMap(null);
    //Clear Route List
    document.getElementById('directions').innerHTML = "";
}

// Set map to render directions
directionsDisplay = new google.maps.DirectionsRenderer({
    map: map,
    /*preserveViewport: true,*/
    draggable: true,
    routeIndex: 1
});

// Remove hidden class form text explaning driving directions
$('#drive-text').fadeIn("fast").removeClass('hidden');

// Hide paragraph under directions form
$(".section.grids-two.maximum-780.clearfix .grid.grid-2").fadeOut("fast");

// SlideToggle panel about random fact
$(".random-fact").slideDown("fast").css({display:"block"});

// Set Panel that will display driving directions
directionsDisplay.setPanel(document.getElementById('directions'));

// Get address input text
var address = document.getElementById('dir-address').value;

// Create request to send to Google starting at the address provided
var request = {
    origin: address,
    destination: '531 E Market Street Indianapolis, IN 46204',
    travelMode: google.maps.TravelMode.DRIVING,
    unitSystem: google.maps.UnitSystem.STANDARD,
    provideRouteAlternatives: true
};

// Send request and display on map and directions box
directionsService.route(request, function(response, status) {
    if (status === google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
        totalRoutes = countRoutes(response);
    }
});
} 
```

有任何想法吗？我遵循的说明在 Google Maps API 文档中，[https://developers.google.com/maps/documentation/javascript/reference#DirectionsRendererOptions](https://developers.google.com/maps/documentation/javascript/reference#DirectionsRendererOptions)

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T23:19:12.633

似乎`routeIndex`只有当`directions`-property 在directionsRenderer 中可用时才有效。您可以使用：

```
 directionsDisplay.setOptions({directions:response,routeIndex:1}); 
```

...什么会同时设置，`directions`和`routeIndex`

# c - C 检查开放端口上正在运行什么服务

> ID：15303528
> 
> 赞同：0
> 
> 时间：2013-03-08T21:21:46.063
> 
> 标签：c, port-scanning

我正在用 C 语言编写端口扫描器，我想检测在开放端口上运行的服务及其版本。
我已经编写了扫描仪代码，但现在我不知道如何检测正在运行的服务。
我能做些什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T21:28:06.663

如果你决定用自己的代码来做，你可以连接到端口，看看你是否得到任何数据，如果没有，则发送几个字节，然后再次检查。

然后将其与预期响应相匹配。

要了解您在寻找什么，您可以使用 telnet 手动连接到端口并戳它。在许多情况下（Web 服务器就是一个简单的示例），您必须发送一些格式正确的数据才能获得可用的响应。

nmap 已经完成了所有这些以及更多工作（例如，广泛的检查，例如查找字节顺序和 arp 流量的时间）

更新：一些人提到了众所周知的端口，但这不会帮助您发现在非标准端口上运行的标准服务，例如在自定义端口上运行的 ssh 或 http 服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:30:10.110

如果服务器先发送一些东西，则使用它来识别协议。

如果不是，则根据某种协议发送一些东西，例如 http，然后查看服务器发回的内容（有效响应或错误）。您可能需要使用不同的协议进行多次尝试，并且良好的顺序对于最大限度地减少连接数非常重要。

有些协议可能很难识别，很容易用你不知道的独特协议制作自定义服务器，甚至将真实服务器隐藏在其他 proto 的简单假服务器下，例如 http。

如果您只想知道端口通常是什么，请查看[“知名端口”](http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers)和官方[保留端口](http://www.iana.org/assignments/service-names-port-numbers)。

还要检查[nmap](http://nmap.org/)源代码。

# jqgrid - 如何将自定义按钮添加到单击时不选择行的 jqGrid 行

> ID：15303531
> 
> 赞同：0
> 
> 时间：2013-03-08T21:21:54.703
> 
> 标签：jqgrid

这个来自 Oleg 的示例非常接近我正在寻找的行为（第一个按钮），但如果可能，我想保留它是否被突出显示，并且不想突出显示一行并检查复选框是否它未选中。澄清一下，如果他们单击此按钮，我将弹出一个模式对话框，它与编辑行无关。

[http://www.ok-soft-gmbh.com/jqGrid/Admin3.htm](http://www.ok-soft-gmbh.com/jqGrid/Admin3.htm)

谢谢你，斯蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T08:36:59.513

为了防止突出显示将单击自定义按钮的行，只需`return false;`在`click`事件处理程序中包含：

```
click: function(e) {
    alert("'Custom' button is clicked in the rowis="+
        $(e.target).closest("tr.jqgrow").attr("id") +" !");
    return false; // !!!!!
} 
```

[演示](http://www.ok-soft-gmbh.com/jqGrid/Admin3_.htm)演示了结果。[这是来自答案](https://stackoverflow.com/a/10179993/315935)和您在问题中引用[的上一个](https://stackoverflow.com/a/6627201/315935)演示的更新版本。此外，我`myDelOptions.onclickSubmit`根据[答案](https://stackoverflow.com/a/12296186/315935)中的代码更新了代码。

# c# - ComboBox 刷新 ListBox

> ID：15303532
> 
> 赞同：6
> 
> 时间：2013-03-08T21:21:56.587
> 
> 标签：c#, vb.net, winforms

我有视觉工作室 2010。

我有一个[ListBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.aspx)和一个[ComboBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.aspx)，如果您从列表框中选择一个项目，然后单击组合框，则列表框会刷新。这就像清除组合框并再次添加项目。

**如果您打开一个新项目，添加一个 ListBox，向 ListBox 添加一些项目，添加一个 ComboBox，运行项目，从 ListBox 中选择一项，单击 ComboBox 和 ListBox 出于某种原因刷新。**

有谁知道为什么会这样？

如果有人可以尝试一下，看看它是否是VB的问题，或者我的程序中的某些设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:14:59.307

找到了这个答案：[组合框下拉时列表框闪烁](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/fb199dec-1b23-4416-8aa5-dba79856a963/)

它建议使用这个版本的 ListBox（我从 c# 翻译它），它对我有用：

```
Public Class MyListBox
  Inherits ListBox

  Private WM_KILLFOCUS As Integer = &H8

  Protected Overrides Sub WndProc(ByRef m As Message)
    If m.Msg <> WM_KILLFOCUS Then
      MyBase.WndProc(m)
    End If
  End Sub

End Class 
```

# java - NoClassDefFoundError javax/jms/Message 即使在指定类路径时

> ID：15303535
> 
> 赞同：5
> 
> 时间：2013-03-08T21:22:08.197
> 
> 标签：java, exception, jms, noclassdeffounderror

运行与 JMS 有关的某些 java 代码时遇到错误。我已经拉了2天的头发试图解决这个问题。

我得到的异常是“java.lang.NoClassDefFoundError: javax/jms/Message”

```
java.lang.NoClassDefFoundError: javax/jms/Message
    at Asci.ActiveBatch.JMSAgent.JMSManager.createMsg(JMSManager.java:195)
    at Asci.ActiveBatch.JMSAgent.JMSService.SendMessageHandler(JMSService.java:160) 
```

无需赘述，这里指的是这一行：

```
public static void createMsg(String icf, String url, String cf, String QName, String msgText, String[] props, String user, String pass) throws Exception {
    JMSProducer.produceMsg(icf, url, cf, QName, msgText, props, user, pass);
} 
```

（不要问为什么那个函数基本上只是映射到另一个函数......我最初没有编写这段代码）

我将此代码称为

```
java -jar /path/myjarfile.jar 
```

javax.jms.jar 包含在该 jar 的清单中（并且它存在于该位置），但以防万一我也尝试将类路径包含到我的 lib 文件夹（当然，其中包含 javax.jms.jar）如下：

```
java -classpath /path/lib:. -jar /path/myjarfile.jar 
```

到目前为止，我没有运气。我不知道该怎么做或如何调试这个问题。任何帮助将不胜感激。显然，此代码可以编译，因此这些类必须（至少）在编译时可用。

谢谢。

编辑：

1）我也尝试过 java -classpath /path/lib/javax.jms.jar:。-jar /path/myjarfile.jar

2）这个问题发生在运行时，而不是编译时。

3）所以，我有其他代码在同一个 jar 文件中调用相同的方法。从特定 jar 调用此代码时，有些东西不正确。我已经检查并重新检查了我的其他代码以确保它是相同的（它曾经是/现在），所以它看起来不像是代码问题。某处似乎有一些混乱的参考或其他东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T21:37:45.933

您可能遇到类加载器冲突，其中一个版本的 *javax.jms.Message*被加载到一个类加载器中，然后它与从不同类加载器加载的不同版本相撞。

你可以为 JMSManager 和 JMSProducer 添加一个静态初始化器来做这样的事情吗？

```
static {
   System.out.println("MESSAGE CLASSLOADER IN JMSMANAGER:" + 
       javax.jms.Message.class.getProtectionDomain().getCodeSource().getLocation());
} 
```

如果他们打印出不同的 URL，这意味着您在类路径中有多个 javax/jms/Message.class 副本，并且您的两个 JMS 人员分别加载了不同的副本。

如果不是......好吧，发布你所看到的:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:35:27.373

将 a 添加`.jar`到类路径时，您需要直接引用 jar，而不是它所在的文件夹。

```
java -classpath /path/lib/JMS.jar:. -jar /path/myjarfile.jar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-09T21:07:12.210

如果 WEB-INF 不存在，请在其中创建一个 lib 文件夹。放这个罐子：**javax.jms.jar**并重新启动服务器

# javascript - 破解 IE 7/8 窗口外的“mouseup”

> ID：15303539
> 
> 赞同：5
> 
> 时间：2013-03-08T21:22:21.250
> 
> 标签：javascript, internet-explorer-8, internet-explorer-7

我知道 IE 7 和 8 不存在窗口事件`mouseup`。我想知道是否有人找到了解决此问题的方法，或者这是否可能。

我目前正在开发一个项目，用户可以单击、拖动以绘制一条线，如果用户在窗口外拖动**并**松开鼠标，则绘图事务将被取消。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:44:38.630

你的困难听起来更像是从窗口失去了事件的范围。

你在使用 jQuery 吗？使用 jQuery，您还可以标记 mousemove 事件并使用“which”属性来检测按钮是否被按下。当你回到窗口时，它甚至会触发。但是当你在窗外时它不会触发。

或者，您可以使用 $(window).mouseleave 来检测它何时离开窗口。但是，一旦它离开窗口，您就无法检测到更多的鼠标事件（如果它们能够检测到您何时右键单击桌面等，那将是一个可怕的缺陷）。

因此，您在某种程度上受到所有浏览器中的浏览器安全实现的限制，并且无法绕过它......但您可以添加一些围绕事件的工作以提供“类似”的体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:28:13.527

不是直接的，但我相信这应该有效。

在您的`mousemove`事件中，检查`***Event***.buttons`属性。如果为零，则用户必须在窗口外释放鼠标，您可以取消拖动。

我现在正在检查此浏览器的兼容性，因此可以编辑此答案。我的电脑现在很慢！

# function - 使用 Logos (%hook) 从另一个类调用函数

> ID：15303540
> 
> 赞同：2
> 
> 时间：2013-03-08T21:22:24.413
> 
> 标签：function, ios6, jailbreak, theos, logos

注意：*此代码不是原始代码的精确复制品，而是说明（非常准确）问题所在，以及我对代码的意图是什么。*

我在`DaClass1`的视图中添加了一个按钮（*这很好*用）：

```
%hook DaClass1

-(id)DaView {
    UIButton *xButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [xButton addTarget:self action:@selector(dismissWithAnimation:YES:nil)
      forControlEvents:UIControlEventTouchUpInside];
    [xButton setBackgroundImage:[UIImage imageWithContentsOfFile:@"/Hello.png"] forState:UIControlStateNormal];
    xButton.frame = CGRectMake(0, 0, 30, 30);
    [self addSubview:xButton];
    return %orig;
}

%end 
```

但`UIButton`'s `action:`( `dismissWithAnimation:YES:nil`) 实际上来自另一个类：

```
%hook DaClass2
    -(void)dismissWithAnimation:(int) reason:(int) {
        //someCodeHere...
    }
%end 
```

当 UIButton 在时，我如何从我的 's`dismissWithAnimation`中调用？`DaClass2``UIButton``action:``DaClass1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T20:46:44.707

您可以创建一个`%new`调用`dismissWithAnimation`.`DaClass2`

```
%hook DaClass1

//Your Code...

%new

-(void)dismissIt {
    [[%c(DaClass2) sharedInstance] dismissWithAnimation:YES:nil];
}

%end 
```

并将`xButton`'s设置`action:`为“ `dismissIt`”：

```
[xButton addTarget:self action:@selector(dismissIt) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:28:52.173

您的意思是@selector(dismissWithAnimation:YES:nil) 方法在DaClass2 类中吗？

然后做：

```
[xButton addTarget:(instance of DaClass2) action:@selector(dismissWithAnimation:YES:nil) forControlEvents:UIControlEventTouchUpInside]; 
```

# entity-framework - 实体框架自动迁移现有数据库

> ID：15303542
> 
> 赞同：4
> 
> 时间：2013-03-08T21:22:40.287
> 
> 标签：entity-framework, migration, entity-framework-5, code-first

我正在使用 Entity Framework 5 构建一个 ASP.Net MVC4 Web 应用程序。我必须使用现有的 sql server 数据库，但也想使用 Code First，所以我按照本教程[http://msdn.microsoft.com/en-us /data/jj200620.aspx](http://msdn.microsoft.com/en-us/data/jj200620.aspx)

我的应用程序使用 Entity Framework 的自动迁移。

我在整个开发阶段使用的 sql server 版本是 2008，但是，在最后一刻，我被告知数据库需要在 sql server 2005 上工作。我得到了我在 sql server 2008 设置中使用的数据库（确切地说sql server 2005 上的表、属性名称、关系等）。但是，当我的 web config 等设置指向 sql server 2005 数据库时，当我对我的一个模型类进行更改时，自动迁移不起作用.

我收到以下错误

> 数据库中已经有一个名为“tblcourseprofessionTarget”的对象。

有人可以帮忙吗？

谢谢。

抱歉，如果我没有添加足够的信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T10:38:26.270

乡亲

这篇文章[http://christesene.com/entity-framework-4-3-code-first-with-automatic-migrations/帮助了我上述问题的答案](http://christesene.com/entity-framework-4-3-code-first-with-automatic-migrations/)

我不得不删除我以前的初始迁移类，然后重新创建它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-05T09:25:23.790

我有一个类似的问题。

对我来说，原因是数据库中已经运行了相同的迁移，但使用了不同的 MigrationID。我有`201504302005411_InitialCreate`，但我的迁移脚本被称为`201505041911076_InitialCreate`.

我通过重命名数据库中的 MigrationID 以匹配我的代码中的那个来解决这个问题。

我不太清楚我是如何陷入这种情况的，但重命名 MigrationID 意味着应用程序知道脚本已经运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-30T07:10:07.573

如果您的上下文是我的：添加了一个新的实体类，但是，当我尝试迁移它时显示此错误，请尝试从数据库上下文中删除该对象，然后运行 ​​update-database 并再次添加该对象并重新运行 update-database

例如：

```
public DbSet<CustomizedEmail> CustomizedEmail { get; set; }
public DbSet<KeyWordsForEmail> KeyWordsForEmail { get; set; }
public DbSet<Notice> Notice { get; set; }//remove it>run update-database>
//add again the above entity and rerurn update-database 
```

无论您是否有数据，这都有效。在此过程中，您将丢失该表中的数据。

# android - Android Emulator 不会以 eclipse JUNO 启动

> ID：15303544
> 
> 赞同：1
> 
> 时间：2013-03-08T21:22:53.240
> 
> 标签：android, eclipse, eclipse-juno

我刚刚安装了适用于 android 的 SDK，每当我在模拟器中创建设备时，当我单击开始时，都会出现以下错误。

RAM 512 设备连接

```
Starting emulator for AVD 'blah'
Failed to create Context 0x3005
could not get wglGetExtensionsStringARB
emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB 
```

我在 Windows 8 上。

# iphone - 绘制到 GPU 的图形的屏幕捕获？

> ID：15303549
> 
> 赞同：0
> 
> 时间：2013-03-08T21:23:02.740
> 
> 标签：iphone, ios, cocoa-touch, opengl-es

我有以下代码用于将视图的内容捕获到图像中：

```
if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
{
    UIGraphicsBeginImageContextWithOptions(self.mainView.bounds.size, NO, [UIScreen mainScreen].scale);
}
else
{
    UIGraphicsBeginImageContext(self.mainView.bounds.size);
}

[self.mainView.layer renderInContext:UIGraphicsGetCurrentContext()];

UIImage *image = [UIGraphicsGetImageFromCurrentImageContext() retain]; 
```

最近，我尝试`GLKView`在`mainView`. 当我执行上面的代码时，它不会捕获其中的图形`GLKView`（而是基本上只是忽略它）。

所以我的问题是，是否可以将图形捕获到在 GPU 上绘制但尚未复制回 CPU 的图像中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T03:26:56.787

您需要使用 OpenGL ES 获取视图的帧缓冲区像素数据。你不能用`renderInContext:`.

有几种方法可以使用 OpenGL ES 来获取数据。查看[此答案](https://stackoverflow.com/a/10455622/77567)以了解详细信息。

# python - python shutil复制功能缺少最后几行

> ID：15303555
> 
> 赞同：1
> 
> 时间：2013-03-08T21:23:23.150
> 
> 标签：python, file-io, python-3.x

我有一个 python 脚本，它生成一个大文本文件，该文件需要一个特定的文件名，稍后将 FTPd。创建文件后，它会将其复制到新位置，同时修改日期以反映发送日期。唯一的问题是复制的文件缺少原始文件的最后几行。

```
from shutil import copy

// file 1 creation

copy("file1.txt", "backup_folder/file1_date.txt") 
```

这可能是什么原因造成的？原始文件是否未完成写入导致副本仅获取那里的内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T21:26:37.700

您必须确保无论创建什么`file1.txt`都已*关闭*文件句柄。

文件写入是缓冲的，如果不关闭文件，则不会刷新缓冲区。文件末尾丢失的数据仍在该缓冲区中。

最好使用文件对象作为上下文管理器来确保关闭文件：

```
with open('file1.txt', 'w') as openfile:
    # write to openfile

# openfile is automatically closed once you step outside the `with` block. 
```

# javascript - iPad 表格单元格上“点击”事件的精度

> ID：15303557
> 
> 赞同：3
> 
> 时间：2013-03-08T21:23:27.987
> 
> 标签：javascript, ipad, jquery-datatables

TL;DR：“点击”侦听器对于表格单元格 (td) 和标题 (th) 不准确，在带有移动 Safari 的 iPad 2 上点击时似乎在单元格边界之外进行侦听。这是一个已知问题吗？是否有解决方法？

* * *

非常具体的问题，没有示例代码（没有必要）。希望那里有人发现这个问题并且之前已经解决了这个问题！

我有一个使用 DataTables.net 和 jQuery UI 构建的表。这应该是偶然的，但我还是想提一下。该表侦听许多不同元素上的单击事件（我相信移动 Safari 将其简单地翻译为点击），包括行标题（用于排序）和某些单元格内容。

在 Mac（连接了 iPad）上使用 Inspector，我可以清楚地看到在填充、边框、边距甚至“可见性：隐藏”或类似的内容方面没有意外重叠的元素。此外，它们是具有默认行为的表格单元格；不是表格单元格的模拟。

在实际数据的第一行中，如果我点击单元格上半部分的任何位置，它实际上会触发侦听器以获取行标题中的点击。我放大到一个可笑的水平，这样我就知道我没有不小心轻推标题，并且我已经确认点击完全发生在表格单元格内，而不是上面的标题。

有谁知道是否有元属性或某些 CSS 甚至 JavaScript 解决方法来解决这种缺乏精度的问题？我点击单元格的至少一半时间实际上是触发列排序（来自幽灵标题点击）。

我能想到的唯一解决方法是将每个单元格的内容包装在一个 div 或 span 中，将它们从单元格的边缘稍微填充一下，并希望以这种方式人为地减少点击目标区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-16T18:22:24.457

如果 x,y 坐标在表格之外，那么您不能简单地忽略它吗？

如果点击在表格内，并且 x,y 坐标错误，则可能是缩放问题或错误。

# javascript - 在 KineticJs 中在后台拖动

> ID：15303558
> 
> 赞同：0
> 
> 时间：2013-03-08T21:23:29.940
> 
> 标签：javascript, html, canvas, drag, kineticjs

我有两层通常代表一个大背景和一些内容。我已经使背景可拖动，但拖动时，它会覆盖另一层的内容。是否可以在拖动时将其保留在后台？

我尝试使用 .moveToBottom() 为背景组（后来添加到 backgroundLayer）绑定拖动事件，如下所示：

```
groupBackground.on('dragstart',function(){
    groupBackground.moveToBottom();
});
groupBackground.on('dragmove',function(){
     groupBackground.moveToBottom();
});
groupBackground.on('dragend',function(){
     groupBackground.moveToBottom();
}); 
```

但没有结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:31:49.917

# linux - 在 Common Lisp 中使用外部库或包的示例

> ID：15303566
> 
> 赞同：3
> 
> 时间：2013-03-08T21:24:20.690
> 
> 标签：linux, package, common-lisp, sbcl, asdf

在 Common Lisp 中，quicklisp 是一种流行的库管理工具。我将使用该工具，并尝试使用 CL-WHO。我使用 SBCL 1.0.57 实现。我将在下面回答我自己的问题。

作为初学者，尚不清楚 ASDF 和 quicklisp 是如何实际协同工作的。因此，不清楚如何在外部源文件中实际使用您通过 quicklisp 下载的包或库。quicklisp 常见问题解答，至少目前没有帮助。在 python 中，这非常简单：您只需输入“import somemodule”，生活就很棒。是否有 CL+quicklisp 的等价物？

如果你搜索，你会发现很多结果。以下是我发现的一些最相关的：

[Lisp 导入/加载文件](https://stackoverflow.com/questions/5447071/lisp-importing-loading-file)

[如何使用 quicklisp 安装的包？](https://stackoverflow.com/questions/11171558/how-to-use-packages-installed-by-quicklisp)

当我最初阅读这些内容时，至少想到了一个问题：如果我使用的是 quicklisp，我真的需要关心 ASDF 吗？Quicklisp 似乎是一个更高级别的管理工具。其他人建议使用 quickproject。但这*真的*有必要吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:52:47.660

与 Python 导入的类比是系统定义……嗯，这是一个非常松散的类比，但是，这是要走的路。您在系统定义中声明依赖关系，然后在您希望它存在的源代码中声明依赖关系，因此如果您稍后引用外部代码的位，您只需执行此操作。

例如。在系统定义中你可能有：（*通常它会在`my-program.asd`文件中）*

```
(defsystem :my-program
  :version "0.0.1"
  :serial t
  :description "My program"
  :components ((:file "some-source-file"))
  ;; `some-external-package' here is the "import", i.e. here you
  ;; declared that you will be using code from this package.
  ;; ASDF will generally "know" how to get the code of that package
  ;; from here on. But if it doesn't, then there are ways to "help it"
  ;; similar to how in Python there's a procedure to prepare your local
  ;; files to be used by easy_install
  :depends-on (:some-external-package)) 
```

稍后在您的代码中，您只是假设`some-external-package`您的程序可以使用 ，例如：

```
(some-external-package:exported-symbol) 
```

应该可以工作。（“您的代码”是您在组件中指定的 some-source-file.lisp）。

这是[关于如何定义系统的 ASDF 文档](http://common-lisp.net/project/asdf/asdf/Defining-systems-with-defsystem.html#Defining-systems-with-defsystem)

在您将这个文件放在[ASDF 可能找到它](http://common-lisp.net/project/asdf/asdf/Controlling-where-ASDF-searches-for-systems.html#Controlling-where-ASDF-searches-for-systems)的位置后*，假设您已经安装了 ASDF（可用于您的 Lisp，SBCL 与它捆绑在一起），您将使用`(asdf:load-system :my-program)` [这里的解释加载这个系统。](http://common-lisp.net/project/asdf/asdf/Using-ASDF.html#Using-ASDF)

* - 一种快速测试它的方法是

```
(push "/path/to/your/system/definition/" asdf:*central-registry*) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:28:37.693

通过 quicklisp 页面上的说明下载 cl-​​who 并运行：

```
#!/usr/bin/sbcl --script

(load "~/quicklisp/setup.lisp")
(ql:quickload "asdf")
(asdf:load-system 'cl-who)

(with-open-file (*standard-output* "out.html" :direction :output)
                (cl-who:with-html-output (*standard-output* nil :indent t)
                                  (:html
                                   (:head
                                    (:title "Test page"))
                                   (:body
                                    (:p "CL-WHO is really easy to use"))))) 
```

对于初学者或真正懒惰的人来说，没有理由必须在顶部写 3 行而不是只写 1 行（就像在 python 中一样）。

# perl - 使用 perl 从日志文件中输出唯一行？

> ID：15303567
> 
> 赞同：1
> 
> 时间：2013-03-08T21:24:23.233
> 
> 标签：perl, shell

在上一个问题中，我询问了如何根据正则表达式从日志文件中输出： [如何使用 grep 从文件中输出唯一的代码行？](https://stackoverflow.com/questions/15303071/how-to-use-grep-to-output-unique-lines-of-code-from-a-file#15303242)

现在我正在使用的脚本输出列表，例如：

```
11.12.13.14 www.mydomain.org.uk
11.12.13.16 www.mydomain.org.uk
105.2.3.1 www.myseconddomain.org.uk
105.2.3.1 myseconddomain.org.uk 
```

我想做的是擦除共享相同 C 类 ip 的行。所以我想调整以前的输出答案：

```
11.12.13.14 www.mydomain.org.uk
105.2.3.1 www.myseconddomain.org.uk 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:31:05.990

这是一个可以解决问题的 Perl 单行代码：

```
perl -ne 'print if /^((\d+\.){3})/ and not $seen{$1}++' < logfile.txt 
```

正则表达式`/^((\d+\.){3}/`匹配 IP 的前三个八位字节（或者，准确地说，三个一个或多个数字的序列，每个数字后跟一个句点，在行的开头）并将它们捕获到`$1`. 然后，该表达式`$seen{$1}++`递增哈希中的相应元素`%seen`（如果需要，创建它）并返回递增*之前*的值（因此，当且仅当该值`$1`之前未见过时，该值才会为假）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:27:49.127

尝试 awk 单线：

```
awk '!a[$1]++ && !b[$2]++' file 
```

测试

```
kent$  echo "11.12.13.14 www.mydomain.org.uk
11.12.13.16 www.mydomain.org.uk
105.2.3.1 www.myseconddomain.org.uk
105.2.3.1 myseconddomain.org.uk"|awk '!a[$1]++ && !b[$2]++'
11.12.13.14 www.mydomain.org.uk
105.2.3.1 www.myseconddomain.org.uk 
```

# c# - 检测是否基于纬度/经度的多边形中的点

> ID：15303568
> 
> 赞同：5
> 
> 时间：2013-03-08T21:24:24.077
> 
> 标签：c#, .net, maps, latitude-longitude

我想在服务器端仅使用 C# 检测基于纬度/经度的坐标是否在由基于纬度/经度的点组成的区域（多边形）内。我相信正确的方法是光线投射，但也许已经有一个 C# 实现，因为它不是微不足道的？

此外，我了解 SQL Server 具有一些几何功能，`STIntersects`但为了使用它，我需要同时运行 SQL Server 2008，并且每次检查都会涉及数据库连接，这是不受欢迎的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T00:02:13.993

由于球体是平面的局部微分同胚，因此您可以使用任何适用于笛卡尔平面的算法，例如[这个 SO question](https://stackoverflow.com/questions/5223909/determine-if-a-given-point-is-inside-the-polygon)。如果您的多边形包含一个极点，您只需要做平移坐标的工作。根据您的用例，也许您可​​以拒绝这些输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:40:44.937

我在互联网上闲逛了一下，找到了[这个链接](http://alienryderflex.com/polygon/)。

该示例是用 C 编写的，但看起来很容易适应 C# 和 Long/Lat 坐标。您需要记住交叉线（NS/EW），并在必要时添加代码以进行补偿，或者在运行函数之前对 LatLong 值进行十进制转换（West 和 South 用 < 0 的值表示）。

# xcode - xcode 类函数宏语法

> ID：15303572
> 
> 赞同：1
> 
> 时间：2013-03-08T21:24:45.877
> 
> 标签：xcode, macros

我的宏语法有问题。这是我的代码：

```
#define DICT2(v1, k1, v2, k2) [NSDictionary dictionaryWithObjectsAndKeys:v1, k1, v2, k2, nil]
#define NUM(number) [NSNumber numberWithInt:number] 
```

这给了我以下语法错误：

```
Unexpected interface name 'NSDictionary': expected expression
Unexpected interface name 'NSNumber': expected expression 
```

有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:35:02.963

您知道 Xcode 现在可以识别简化的文字语法：

```
NSNumber *num = @1;
NSDictionary = @{ k1 : v1, k2 : v2}; 
```

所以你不需要使用宏。

# java - ProcessBulder 加载进程但不启动它

> ID：15303573
> 
> 赞同：1
> 
> 时间：2013-03-08T21:24:46.507
> 
> 标签：java, processbuilder

我使用 ProcessBuilder 从 java 应用程序（主机）启动一个新进程（子进程）。像这样的东西：

```
ProcessBuilder processBuilder = createProcess(commandLine);
processBuilder.directory(new File(baseDir));
processBuilder.redirectErrorStream(true);
Process process = null;
try {
    process = processBuilder.start();
} catch (Exception e) {
    e.printStackTrace();
} 
```

我确实在系统监视器中看到子进程已启动，但除非我停止主机应用程序，否则它无法运行。更具体地说，子进程是一个服务器，在使用 ProcessBuilder 启动它之后，如果主机应用程序仍在运行，它不会响应请求。此外，服务器正在使用的端口仍然可用。如果我停止主机应用程序，服务器会立即开始工作。有什么我错过的或者 ProcessBuilder 应该如何工作的吗？提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T22:43:06.713

在大多数情况下，在进程的标准输出缓冲区被清空之前，它不会终止。可能是您的进程已填满此缓冲区并已停止（出于某种原因）

尝试使用标准输出（通过`Process#getInputStream`）的流程，看看是否有所作为。

也可能是进程正在等待用户的输入。

看看[我没有得到任何输出，可能机器挂起代码](https://stackoverflow.com/questions/15286042/im-not-getting-any-output-and-probably-the-machine-hangs-with-the-code/15286128#15286128)作为示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T22:35:23.137

@MadProgrammer 是正确的。我能够解决这个问题，我想用一个代码示例来回答我的问题。这对其他人也可能有用。您需要在启动子进程后从子进程中使用标准。像这样的东西：

```
 process = processBuilder.start();
        InputStream is = process.getInputStream();
        INputStreamReadr isr = new InputStreamReader(is);
        BufferedReader br = new BufferedReader(isr);
        String line;
        while (!stopProcess) {
            if (br.ready()) {
                line = br.readLine();
                System.out.println(line);
            }
        } 
```

# abap - 如何访问对象的公共类型

> ID：15303575
> 
> 赞同：5
> 
> 时间：2013-03-08T21:25:02.370
> 
> 标签：abap

我有一个名为 ZCL_RM_SPREADSHEETML 的类。

它在 Types 选项卡中有一个名为 TY_STYLE 的类型，可见性为“Public”，并使用 Direct Type Entry 定义。

当我尝试在调用者代码中声明以下内容时：

```
DATA : wa_blue_style TYPE zcl_rm_spreadsheetml-ty_style. 
```

我得到以下信息：

```
The type "ZCL_RM_SPREADSHEETML" has no structure and therefore no
component called "TY_STYLE". . 
```

我猜这是有道理的，因为 ZCL_RM_SPREADSHEETML 是一个类，双击`TY_STYLE`也完全没有任何作用。

然后我用 tilda 尝试了以下操作：

```
DATA : wa_blue_style TYPE zcl_rm_spreadsheetml~ty_style. 
```

我得到以下信息：

```
Type "ZCL_RM_SPREADSHEETML~TY_STYLE" is unknown 
```

双击 TY_STYLE 将带我到 TY_STYLE 的定义，所以我必须接近。上次我遇到类似问题是因为我正在访问私有方法，但我将类型明确标记为 Public。

关于我做错了什么的任何想法？

**编辑**

我也根据评论尝试过

```
DATA : wa_blue_style TYPE ref to zcl_rm_spreadsheetml->ty_style. "and
DATA : wa_blue_style TYPE zcl_rm_spreadsheetml->ty_style. 
```

这使

```
Field "ZCL_RM_SPREADSHEETML" is unknown. It is neither in one of the
specified tables nor defined by a "DATA" statement. 
```

这给了我尝试这种“课堂”方式的想法，

```
DATA : wa_blue_style TYPE zcl_rm_spreadsheetml=>ty_style. 
```

**这有效**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T09:04:49.943

您必须使用适当的[组件选择器](http://help.sap.com/abapdocu_702/en/abencomponent_selector_glosry.htm)：

> 可用于寻址上层单元组件的已定义字符。有结构组件选择器（`-`）、类组件选择器（`=>`）、接口组件选择器（`~`）和对象组件选择器（`->`）。

在这种情况下，您正在访问一个类的类型（组件），因此您必须使用`=>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:34:14.033

你的意思是这个，对吧？

```
report  zstructsob.

*&---------------------------------------------------------------------*
*&       Class MYCLASS
*&---------------------------------------------------------------------*
*        Text
*----------------------------------------------------------------------*
class myclass definition.
  public section.

    types: begin of mystruct, " ------------> The public type
      field1 type i,
      field2 type string,
    end of mystruct.

    methods print_data importing data type mystruct.

  private section.
    data mydata type mystruct.
endclass.               "MYCLASS

*&---------------------------------------------------------------------*
*&       Class (Implementation)  MYCLASS
*&---------------------------------------------------------------------*
*        Text
*----------------------------------------------------------------------*
class myclass implementation.
  method print_data.
    write:/ data-field1, data-field2.
  endmethod.

endclass.               "MYCLASS

start-of-selection.

data ztype type myclass=>mystruct. " ------------> The public type of the class
data zclass type ref to myclass.

create object zclass.

ztype-field1 = 1.
ztype-field2 = 'Field2'.

zclass->print_data( ztype ). 
```

# php - PHP 库生成代码差异（github 风格）？

> ID：15303578
> 
> 赞同：8
> 
> 时间：2013-03-08T21:25:07.057
> 
> 标签：php, diff, git-diff

我正在寻找一个可以生成代码差异 HTML 的免费 php 库。基本上就像 GitHub 的代码差异页面。

我一直在四处寻找，找不到任何东西。有谁知道那里有什么可以做我正在寻找的东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T21:34:36.237

看起来我在用不同的措辞进行更多的谷歌搜索后找到了我想要的东西。

[php-diff](https://github.com/chrisboulton/php-diff)似乎完全符合我的要求。只是一个接受两个字符串并生成所有 HTML 的 php 函数确实会在网页中显示差异。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-12-16T14:10:35.883

在这里加上我的两分钱......

不幸的是，在 PHP 中没有用于显示/生成差异的真正好的差异库。也就是说，我最近确实找到了一种使用 PHP 实现此目的的迂回方法。涉及的解决方案：

*   用于呈现 Diff 的纯 JavaScript 方法
*   `git`使用 PHP 生成 Diff 进行渲染

首先，有一个用于渲染 GitHub 风格差异的*优秀JavaScript 库，称为*[diff2html](https://github.com/rtfpessoa/diff2html)。这使得差异非常干净并且具有现代风格。然而，`diff2html`需要一个*真正*的git diff 来渲染，因为它旨在逐字地渲染 git diff——就像 GitHub 一样。

如果我们让 diff2html 处理 diff 的渲染，那么我们剩下要做的就是创建 git diff 让它渲染。

要在 PHP 中执行此操作，您可以`git`使用运行在服务器上的本地二进制文件。您可以使用该选项`git`计算两个任意文件的差异。[`--no-index`](https://git-scm.com/docs/git-diff#git-diff-emgitdiffem--no-index--options--ltpathgt82308203)您还可以使用该选项指定在找到的差异之前/之后返回多少行[`-U`](https://git-scm.com/docs/git-diff#git-diff--Ultngt)。

在服务器上，它看起来像这样：

```
// File names to save data to diff in
$leftFile  = '/tmp/fileA.txt'; 
$rightFile = '/tmp/fileB.txt';

file_put_contents($leftFile, $leftData);
file_put_contents($rightFile, $rightData);

// Generate git diff and save shell output
$diff = shell_exec("git diff -U1000 --no-index $leftFile $rightFile");

// Strip off first line of output
$diff = substr($diff, strpos($diff, "\n"));

// Delete the files we just created
unlink($leftFile);
unlink($rightFile); 
```

然后你需要`$diff`回到前端。您应该查看文档，`diff2html`但最终结果在 JavaScript 中将如下所示（假设您传递`$diff`as `diffString`）：

```
function renderDiff(el, diffString) {
    var diff2htmlUi = new Diff2HtmlUI({diff: diffString});
        diff2htmlUi.draw(el);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T21:28:31.463

我想你要找的是[`xdiff`](http://php.net/manual/en/book.xdiff.php).

> xdiff 扩展使您能够创建和应用包含不同文件版本之间差异的补丁文件。
> 
> 此扩展支持两种操作模式 - 字符串和文件，以及两种不同的补丁格式 - 统一和二进制。统一补丁非常适合文本文件，因为它们易于阅读且易于查看。对于档案或图像等二进制文件，二进制补丁将是适当的选择，因为它们是二进制安全的并且可以很好地处理不可打印的字符。

# c# - 在 ASP.net 应用程序的 Informix 查询中使用命名参数

> ID：15303579
> 
> 赞同：3
> 
> 时间：2013-03-08T21:25:09.110
> 
> 标签：c#, asp.net, informix

我正在尝试将我的查询转换为参数化，但在弄清楚语法时遇到了问题。根据 VS2012，这是没有错误的，但在运行时我得到一个错误，因为参数的值没有被替换到查询中。

这是示例代码：

```
IfxCommand query = new IfxCommand("SELECT slm_slmno FROM slmmas WHERE 
    slm_logon = @Logon");
query.Parameters.Add("@Logon", logon); 
```

这是查询在运行时返回的错误：

```
Error Message = ERROR [42000] [Informix .NET provider][Informix]A syntax 
    error has occurred.
Sql Query = SELECT slm_slmno FROM slmmas WHERE slm_logon = @Logon 
```

从错误中可以清楚地看出，logon 的值没有被替换到命令中。我正在使用 Informix 10.0。我查看了文档（位于[http://publib.boulder.ibm.com/infocenter/idshelp/v111/index.jsp?topic=/com.ibm.net_cc.doc/dqx1db2commandclass.htm](http://publib.boulder.ibm.com/infocenter/idshelp/v111/index.jsp?topic=/com.ibm.net_cc.doc/dqx1db2commandclass.htm)）但有没有明确的例子可以显示我想要实现的简单用法。关于我需要如何更好地解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T06:07:03.600

根据[http://publib.boulder.ibm.com/infocenter/idshelp/v117/index.jsp?topic=%2Fcom.ibm.netpr.doc%2Fids_net_115.htm](http://publib.boulder.ibm.com/infocenter/idshelp/v117/index.jsp?topic=%2Fcom.ibm.netpr.doc%2Fids_net_115.htm)中给出的示例，您可以如下重写查询：

```
IfxCommand query = new IfxCommand("SELECT slm_slmno FROM slmmas WHERE 
    slm_logon = ?");
IfxParameter ifxp1 = new IfxParameter("Logon",DbType.String);
query.Parameters.Add(ifxp1);
ifxp1.Value = "your value"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T14:47:03.953

尽管 Vijay 的解决方案有效，但在处理多个参数时，这种方法会变得相当冗长。我能够像这样修改方法，这种方法更简单，并且更容易添加多个参数：

```
IfxCommand query = new IfxCommand("SELECT slm_slmno FROM slmmas WHERE 
    slm_logon = ?");
query.Parameters.Add(new IfxParameter("Logon", logon)); 
```

希望其他人会发现这很有用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-09T01:53:03.343

如果您正在触发 SQL 查询，另一种方法是在 C# 字符串本身中完成参数替换，并将最终的 SQL 传递给您的命令。

一个例子是 -

```
var sql = string.Format("SELECT slm_slmno FROM slmmas WHERE slm_logon = {0}", logon);
IfxCommand query = new IfxCommand(sql); 
```

存储过程是另一种情况，您需要查看informix 适配器文档。

# python - python-获取存储在组合框中的部分文本

> ID：15303583
> 
> 赞同：0
> 
> 时间：2013-03-08T21:25:15.997
> 
> 标签：python, combobox, pyqt

我创建的表单上有一个组合框。此组合框同时显示 ID 和名称。我正在将组合框的内容写入数据库。到目前为止，当我使用这段代码时它可以正确写入

```
self.ui.residentComboBox.currentText() 
```

现在我想要做的是只从组合框中提取 ID，而不是将 ID 和名称放在一起。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:31:26.080

如果`self.ui.residentComboBox.currentText()`返回一个字符串，并且 ID 只是第一个单词，你可以这样做：

```
self.ui.residentComboBox.currentText().split()[0] 
```

它将字符串拆分为单词列表（由空格分隔），然后`[0]`给出该列表中的第一项。

例如：

```
t = "3426523 askew chan"
print t.split()
#['3426523','askew','chan']
print t.split()[0]
#'3426523' 
```

# html - Video.js 在某些未知参数下破坏 IE9 和 IE10

> ID：15303589
> 
> 赞同：5
> 
> 时间：2013-03-08T21:25:42.313
> 
> 标签：html, internet-explorer-9, internet-explorer-10, video.js

几个月来，我一直在用头撞桌子，试图找到解决这个问题的方法。最大的问题是它只在某些情况下弹出。自从[modern.ie](http://modern.ie)发布和IE10 发布以来，我重新开始寻找答案。

我正在运行 Win7 64 位，目前拥有最新的 IE10 (10.0.9200.16521)。当我加载安装了 video.js 的站点时，它在标准模式下失败。但适用于怪癖模式下的 Flash。使用 IE10 的 HTML5 功能以各种方式删除 video.js 可以很好地加载视频。这甚至实际上发生在 videojs.com 主页上。到目前为止，我已经尝试了其他地方的以下建议......

*   使用完整路径而不是相对 URL。
*   改成`preload="none"`
*   禁用加载项后运行 IE
*   在安全模式下运行 IE
*   以单独用户身份运行 IE
*   几个月前我不记得还有许多其他类似的事情。

我已在虚拟机内的全新安装上成功运行该站点。还有我家里的Win7 64位电脑。但是我的机器在工作，以前用 IE9，现在用 IE10 不能工作。我看过类似的帖子，所以我知道我并不孤单。有没有*人*有任何新的建议？

可以在另一个问题中找到一个展示此问题的超级简单示例： [video.js 视频卡在 IE9 和 IE10，Mac Safari 上的双倍长度](https://stackoverflow.com/q/14342173/728053)

**更新：**找到了强制[IE 使用 Flash](https://github.com/zencoder/video-js/issues/209#issuecomment-7455937)的参考。在尝试让 IE 使用 HTML5 时，认为这可能是一种解决方法。它成功地使其他浏览器使用 Flash（在测试中以确保我的 IE 条件注释没有搞砸）。IE仍然没有工作。

**更新 2：**我发现其他完全不相关的网站也无法加载。考虑到全新安装不会发生此问题，我可能需要尝试删除 IE 并从全新下载中安装。遗憾的是，这实际上无法找到导致此问题的原因，因此我可能会推迟并筛选 video.js 源。这将花费很多时间，所以如果有人在此期间提出解决方案，请让大家知道。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T18:39:53.957

在我求助于此处筛选“相关”链接之前，我在黑暗中随机拍摄了几张照片（卸载插件，降到 IE8，然后安装新的 IE10 副本）。但我终于找到了解决方案。

## 从 videojs 样式表中删除 Helvetica。

### （以及你的其他风格）。

一旦我从我的样式表中删除了所有 Helvetica 实例，一切都运行良好。

我知道 Windows 不能与旧的 Type 1 字体相处，比如 Helvetica（我需要安装它，因为我的公司的徽标已经设置在其中并且之前它被我咬过）。我没有意识到[IE9 和 IE10 实际上根本无法渲染它们，](https://stackoverflow.com/a/15011654/728053)这就是杀死 videojs 的原因。

遗憾的是，我们不能强迫用户出去购买新版本的 Helvetica 或 Helvetica Nueue。所以我的建议是[放弃它以支持 "sans-serif"](http://css-tricks.com/sans-serif/)。

```
h1 {
    font-family: sans-serif;
} 
```

# mapi - Exchange Online 是否支持 MAPI 客户端应用程序

> ID：15303591
> 
> 赞同：0
> 
> 时间：2013-03-08T21:25:46.290
> 
> 标签：mapi, office365

我一直在寻找关于 Office 365/Exchange Online 的问题的明确答案。我们使用 MAPI 应用程序，该应用程序使用 MAPI 配置文件代表用户发送消息。系统已经在本地安装了符合 Exchange Online 的 Outlook 版本。Exchange Online 是否可以进行这种 MAPI 访问？

我知道有为帐户启用 HTTP/RPC MAPI 的选项，但问题是客户端上的 MAPI API 是否真的适用于 Exchange Online 托管邮箱（假设为邮箱启用了 MAPI）。

有谁知道这是否可行，以及 MAPI API 的哪些部分可以使用是否有任何限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:09:35.733

从 Outlook 2007 开始，MAPI 的 Outlook 版本完全支持 ROH。

托管 Exchange 帐户支持 ROH，因为这是 Outlook 可以访问邮箱的唯一方式。

另一方面，MAPI 的独立版本最近才更新以支持 ROH，因为 ROH 和 EWS 是访问 Exchange 2013 的唯一两种方式；旧式 RPC 不再起作用。请参阅[http://blogs.msdn.com/b/stephen_griffin/archive/2013/02/28/exchange-2013-co](http://blogs.msdn.com/b/stephen_griffin/archive/2013/02/28/exchange-2013-co)

# ms-access - 将格式化文本从 HTML 粘贴到 MS Access 备忘录表单字段中

> ID：15303595
> 
> 赞同：1
> 
> 时间：2013-03-08T21:26:06.840
> 
> 标签：ms-access

我有一个超级简单的 MS Access 表单，它有两个字段可以快速收集一些数据，其中一个是备忘录数据类型，连接到表字段中。我想将一些格式化文本从 HTML 复制到其中，并希望保留格式（粗体、字体、斜体等）。但是，当我执行`Ctrl-C`-->时`Ctrl-V`，它只会粘贴未格式化的纯文本。

有什么方法可以配置我的表单字段以接受和保存格式化文本？如果我将相同的内容粘贴到 MS Word 中，则会保留格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:42:00.690

您必须打开 HTML 文件的“源”，然后才复制+粘贴。

在浏览器中，您只会看到 HTML 输出……而某些应用程序（例如记事本）将无法通过简单的复制+粘贴来存储数据。正如您可能已经知道的那样，MS Word 可以做到这一点，因为它是一个富文本编辑器。

对于 MS Access 中的字段，只有复制源本身才能保留格式。如果您让我们知道您从哪个浏览器复制，这将有所帮助，但通常有一个选项可以查看正在查看的页面的源代码。

[编辑：回应评论]如果您希望富文本进入 ms 访问字段，请尝试此处的前几个步骤：http: [//office.microsoft.com/en-001/access-help/insert-or-添加富文本字段-HA010014097.aspx](http://office.microsoft.com/en-001/access-help/insert-or-add-a-rich-text-field-HA010014097.aspx)

# php - 如何存储和使用数据库字段中的 php - 半途而废

> ID：15303600
> 
> 赞同：0
> 
> 时间：2013-03-08T21:26:50.153
> 
> 标签：php, database, include

我在让存储在字段中的 php 正常工作时遇到了一些麻烦。

我能够做到这一点，创建一个 VARCHAR 字段`Modfiers`并使用`eval()`. 它完美地工作，读取变量并在 php.ini 中使用它们。

**但是**，我一直无法使这项工作适用于我的`Content`领域。它是 TEXT 但我将其更改为 VARCHAR，更改`echo`为`eval()`，但它仍然无法正常工作。

它们之间只有两个区别。一个有 HTML，另一个只是变量，`Content`一个使用`include()`语句。

我已经尝试过有无`<?php ?>`（思考`eval()`可能会接受它）。我究竟做错了什么？

# vb.net - 如何在VB.NET中沿着一条线平滑移动鼠标

> ID：15303601
> 
> 赞同：0
> 
> 时间：2013-03-08T21:27:01.220
> 
> 标签：vb.net, drawing, mouse

我一直试图在给定的时间跨度上沿着一条线移动鼠标指针，结果好坏参半。如果时间跨度足够小，那么每个“delta”都足够大，可以移动而不会因将 PointF 舍入为 Point 而导致过多的不准确性。

然而，对于较长的时间跨度，增量是如此之小，以至于它们会遭受舍入误差，这导致我的鼠标点不会沿着原始所需的线移动。

如何使鼠标以相当直线的方式从一个点移动到另一个点而不会不准确？

编辑：也许这些会有用？

[http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)

[沿对角线移动鼠标](https://stackoverflow.com/questions/11751370/moving-the-mouse-along-a-diagonal-line)

# c - 铿锵枚举溢出

> ID：15303602
> 
> 赞同：8
> 
> 时间：2013-03-08T21:27:11.650
> 
> 标签：c, enums, overflow

使用 -Wall -pedantic

```
#include <limits.h>
#include <stdio.h>

int main(void)
{
    enum x {
        a,
        max = INT_MAX,
        out_1
    };
    enum y {
        b,
        out_2 = INT_MAX + 1
    };

    printf("%d %d\n", out_1, out_2);
    return 0;
} 
```

铿锵返回

```
demo.c:9:3: warning: overflow in enumeration value
                out_1
                ^ 
```

如您所见，编译器不会警告 out_2 溢出，他的值在编译时是未知的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T21:33:42.183

在第一种情况下，编译器本身正在尝试选择一个导致溢出的整数，因此会警告您。它很可能在生产`INT_MIN`. 该标准允许 a 中的任何值`signed int`成为枚举常量（见底部）。

在第二个中，表达式`(INT_MAX + 1)`在分配给之前计算`out_2`。此处表达式中的溢出会产生允许的结果，但这是未定义的行为。然后将有效结果存储在枚举中，这就是不产生第一个错误的原因。

clang (3.2) 也不会对此发出警告，这实际上是相同的：

```
int a = INT_MAX + 1; 
```

在这方面，clang 的行为不符合 C 标准，因为这是未定义的。

比较 gcc 的输出使差异完全清楚：

```
In function ‘main’:
9:9: error: overflow in enumeration values
13:25: warning: integer overflow in expression [-Woverflow] 
```

英特尔编译器会忽略枚举溢出，但会警告整数溢出：

```
enum.c(13): warning #61: integer operation result is out of range
      out_2 = INT_MAX + 1
                      ^ 
```

* * *

作为参考，来自 C99 标准 6.7.7.2.2，“定义枚举常量值的表达式应为整数常量表达式，其值可表示为`int`;.3，”枚举器列表中的标识符被声明作为具有类型的常量，`int`并且可能出现在任何允许的地方。”即枚举常量可以是任何`int`值，并且具有`int`类型。定义的枚举变量的结果类型可以是`char`，`int`或`unsigned int`，只要它允许所有可能的枚举中的常量。因此`enums`，示例中的两个都是未定义的，因为它们都需要整数溢出。第一个是明确非法的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:47:52.437

ISO C 将整数指定为枚举值。

如果您的编译器允许（并且 GCC 和 Clang 允许），那么 INT_MIN 是一个非常好的值。

如果编译器不允许*指定*索引，则需要发出**错误**。

显式请求的 INT_MIN 很好但来自 INT_MAX 前身的自动增加值发出**警告**的原因是，该标准需要**+1**行为。

# azure - Azure blob Container 仍然可以直接访问，即使设置为私有后也是如此

> ID：15303609
> 
> 赞同：0
> 
> 时间：2013-03-08T21:27:47.860
> 
> 标签：azure, azure-blob-storage

我已经设置了一个“公共”容器，其中 blob 存储为“私有”，但无论如何我仍然可以使用容器内的 URL 直接访问 blob。

知道为什么会这样吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T22:06:23.160

我怀疑您的浏览器或其他一些缓存服务器正在缓存该文件，而您实际上并没有去 Blob 存储来获取该文件。您可以使用 Fiddler 或 Netmon 来验证对存储发出的请求，或者尝试不同的机器或私密浏览会话。

将 blob 容器标记为私有后，如果没有私钥或签名请求，您将无法访问该容器中的任何 blob。

# emacs - Emacs 多项未正确显示特殊字符

> ID：15303611
> 
> 赞同：52
> 
> 时间：2013-03-08T21:27:50.753
> 
> 标签：emacs, terminal, zsh, ansi-term

这很奇怪。我在中定义了以下提示`zsh`：

```
local user_host='%{$terminfo[bold]$fg[green]%}%n @ %m%{$reset_color%}'
local current_dir='%{$terminfo[bold]$fg[blue]%} %~%{$reset_color%}'
local git_branch='$(git_prompt_info)%{$reset_color%}'
local return_code="%(?..%{$fg[red]%}%? ↵%{$reset_color%})"

PROMPT="╭─${user_host} %D{[%a, %b %d %I:%M:%S]} ${current_dir} ${git_branch}
╰─%B$%b "
RPS1="${return_code}" 
```

它`gnome-terminal`在`ansi-term`Emacs `M-x` `ansi-term`（

![提示示例 gnome-terminal/ansi-term](../Images/a223c897e6b2e479276a5baa2bab9918.png)

`multi-term`但是，它在 Emacs中不能很好地工作，如下所示：

![提示示例多词](../Images/52f7de8458c39d137e9d547c15112ef6.png)

我认为`multi-term`能够解释终端喜欢 `gnome-terminal`或`ansi-term`所做的同一组转义字符。为什么它不能`git-prompt_info`正确解释和其他人返回的转义字符？

我也试过：

*   `M-x` `set-terminal-coding-system`并将其设置为`utf-8-unix`
*   `TERM=eterm-color`在多术语终端内，或在调用 Emacs 之前等。
*   `TERM=`在多术语终端内，或在调用 Emacs 之前等。
*   `export TERM`从我的删除任何`.zshrc`

# 更新（2014 年 1 月 29 日）：

到目前为止，最好的解决方案似乎是执行以下操作：

`TERM=xterm-256color`

但会导致我在这里报告的另一个问题：[Passing escape sequences to shells within ansi-term in Emacs](https://unix.stackexchange.com/questions/111541/passing-escape-sequences-to-zsh-embedded-shells-within-ansi-term-in-emacs)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-16T15:18:44.067

> 为什么它不能正确解释 git-prompt_info 和其他人返回的转义字符？

答案很可能`multi-term`就是不准备以这种格式接受那些转义序列，无论出于何种原因。这可能是配置问题、错误或故意的。将模式设置为接受颜色，即`TERM=xterm-256color`，可以改善这种情况，因为它随后接受类似于终端仿真器中使用的标准格式的颜色转义序列，例如：

```
RED='\033[0;31m'
NC='\033[0m' # No Color
echo "I ${RED}love${NC} Stack Overflow\n" # this output IS NOT interpreting the escapes
echo -e "I ${RED}love${NC} Stack Overflow\n" # this output IS interpreting them 
```

^([从这里借来的代码](https://stackoverflow.com/questions/5947742/how-to-change-the-output-color-of-echo-in-linux/5947802#5947802))

突出的部分是颜色，它在您的另一个问题的“更新 2”中的链接线程中被引用，询问为什么打印出的行以该颜色转义序列的一部分`[0;31m`开头。`4m`

这是更多[信息](https://unix.stackexchange.com/questions/158412/are-the-terminal-color-escape-sequences-defined-anywhere-for-bash/158421#158421)，并附有相关摘录：

> 因此，理解颜色的是您的终端仿真器。您的终端仿真器知道那`\033[0;36m`是青色，但另一个终端仿真器可能会使用一组完全不同的字符来表示青色（尽管没有一个理智的终端仿真器会标榜标准并这样做）。这就是原因`tput`。当您运行时`tput setaf 6`，`tput`将查找终端的颜色 6（青色）的转义码，并输出该转义码。

我怀疑，在您的另一个问题中，`alt`+`b`和`alt`+`f`在您的另一个问题中不起作用的原因是由于对这些应该是非打印或零的转义序列的不正确解释而导致终端宽度计数关闭宽度。我没有搞砸`multi-term`很多，但解决方案可能涉及使用`tput`或类似的方法，以使其正确理解转义序列。

[可能的相关故障排除信息](http://rawsyntax.com/blog/learn-emacs-zsh-and-multi-term/)

# architecture - 为什么要选择“不分享”而不是“分享一切”？

> ID：15303625
> 
> 赞同：2
> 
> 时间：2013-03-08T21:28:53.420
> 
> 标签：architecture, distributed-computing, disk

我*对*“无共享”分布式系统的理解是集群中的每个节点都有自己的磁盘要持久化。如果是这种情况，我不确定为什么拥有这样的架构会有好处，因为您不仅需要在应用程序级别进行复制/负载平衡/集群，而且还需要在磁盘上进行复制-级别，以便集群中的所有磁盘节点也可以互相看到。

所以我问：在什么情况下“不共享”比“共享一切”更好，除了这两个，还有其他选择吗？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T15:38:33.847

考虑无共享分布式系统的以下优点：

*   误隔离。任何单个节点中的故障都将包含在该节点中，并且仅通过消息（或缺少消息）公开，从而允许实施容错系统。一个简单的例子：共享磁盘文件系统中的文件系统错误可能会破坏整个持久状态。
*   可扩展性。如果磁盘是共享资源，那么可用的控制器和磁盘带宽也是共享的。此外，一致的共享状态需要某种形式的同步，其中不同的节点轮流访问关键数据。这两者都将限制最终可以将多少节点添加到分布式共享磁盘系统中。

# f# - NuGet/包还原不能很好地与 F# 配合使用

> ID：15303626
> 
> 赞同：3
> 
> 时间：2013-03-08T21:28:57.473
> 
> 标签：f#, nuget

我们有一个包含 F# 项目和 C# 项目的解决方案。两者都使用同一组 NuGet 包，使用 NuGet 包还原来自动下载。令人沮丧的是，我们经常遇到无法构建 F# 项目的问题，迫使我们卸载然后重新安装所有包。似乎 NuGet 在安装过程中没有正确编辑 fsproj 文件，因此给我们留下了重复的引用，或者阻止了构建的错误版本引用。有没有人遇到过类似的问题/有没有人知道解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T21:43:35.390

你遇到这个错误了吗？[F# Project VS 2012：更新包删除 HintPath](https://nuget.codeplex.com/workitem/2149)

NuGet 中还有一些其他已知错误会影响 F# 项目。您可能需要浏览 CodePlex 上的 NuGet 问题跟踪器，以查看您的问题是否已被报告；如果没有，您*绝对*应该提交一个错误报告，让 NuGet 开发人员意识到这个问题。

[NuGet 问题跟踪器](https://nuget.codeplex.com/workitem/list/advanced?keyword=&status=All&type=All&priority=All&assignedTo=All&component=All&sortField=LastUpdatedDate&sortDirection=Descending&release=NuGet%202.3&size=100&page=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T07:34:38.700

我最近写了一篇关于这个问题以及如何重现它的博客文章。

[http://mikehadlow.blogspot.co.uk/2013/06/nuget-install-is-broken-with-f.html](http://mikehadlow.blogspot.co.uk/2013/06/nuget-install-is-broken-with-f.html)

我已按要求在下面复制了它的开头：

当您尝试使用 NuGet 将包引用添加到 F# 项目时，会出现一个非常讨厌的错误。当正在安装的程序集在 GAC 中也有一个版本或输出目录中已经存在不同的版本时，它就会显示出来。

首先，让我们在 GAC 中已经存在程序集版本时重现该问题。

使用 F# 项目创建新解决方案。

选择要从 NuGet 安装的程序集，该程序集也存在于您计算机上的 GAC 中。出于讽刺目的，我将为此示例选择 NuGet.Core。

它在我的 GAC 中：

```
D:\>gacutil -l | find "NuGet.Core"
NuGet.Core, Version=1.0.11220.104, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL
NuGet.Core, Version=1.6.30117.9648, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL 
```

可以看到GAC中的最高版本是1.6.30117.9648

现在让我们从官方 NuGet 源安装 NuGet.Core 版本 2.5.0：

```
PM> Install-Package NuGet.Core -Version 2.5.0
Installing 'Nuget.Core 2.5.0'.
Successfully installed 'Nuget.Core 2.5.0'.
Adding 'Nuget.Core 2.5.0' to Mike.NuGetExperiments.FsProject.
Successfully added 'Nuget.Core 2.5.0' to Mike.NuGetExperiments.FsProject. 
```

它正确地创建一个包目录，下载 NuGet.Core 包并创建一个 packages.config 文件：

```
D:\Source\Mike.NuGetExperiments\src>tree /F
D:.
│   Mike.NuGetExperiments.sln
│
├───Mike.NuGetExperiments.FsProject
│   │   Mike.NuGetExperiments.FsProject.fsproj
│   │   packages.config
│   │   Spike.fs
│   │
│   ├───bin
│   │   └───Debug
│   │
│   └───obj
│       └───Debug
│
└───packages
    │   repositories.config
    │
    └───Nuget.Core.2.5.0
        │   Nuget.Core.2.5.0.nupkg
        │   Nuget.Core.2.5.0.nuspec
        │
        └───lib
            └───net40-Client
                    NuGet.Core.dll 
```

但是当我查看我的 fsproj 文件时，我发现它从 GAC 错误地引用了 NuGet.Core 版本 (1.6.30117.9648)，并且没有指向下载包的提示路径。

```
<Reference Include="NuGet.Core, Version=1.6.30117.9648, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
  <Private>True</Private>
</Reference> 
```

# javascript - DOM帮助，父母的父母，孩子的孩子

> ID：15303628
> 
> 赞同：0
> 
> 时间：2013-03-08T21:29:06.427
> 
> 标签：javascript

我正在使用 Drupal 的 Webform 模块，它会自动写入所有 id 和类，所以我无法将 Id 添加到我想要添加它的地方。Drupal 并没有为我添加一个。嗯。

当我只使用简单的 getElementById('myid') 使用我的代码时我没有问题，但我需要的元素是一个空白，没有 id，没有在“图例”中的类“a”（它有一个类但没有id) 位于带有 id 的字段集中。

我尝试了这段代码和几个变体，但没有奏效：

```
document.getElementById('webform-created-id-here').getElementsByTagName('legend').getElementsByTagName('a'); 
```

我觉得我不明白如何正确访问 DOM 的那一部分。任何人都可以提供帮助或建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:32:04.287

getElementsByTagName 返回包含找到的元素的节点列表，因此您必须选择元素的索引

第一个元素的示例

```
var test = document.getElementById('webform-created-id-here').getElementsByTagName('legend')[0].getElementsByTagName('a')[0]; 
```

[演示视图](http://jsfiddle.net/xwyMx/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T23:59:38.240

自己通过 DOM 递归。对任何元素的子元素的引用都存储在`childNodes`每个节点都存在的属性中。

```
function recurseDOM (el,test) {
    if (test(el)) {
        return el;
    }
    else {
        var children = el.childNodes;
        var result;
        for (var i=0; i<children.length; i+) {
            result = recurseDOM(children[i],test);
            if (result) {
                return result;
            }
        }
    }
    return null;
} 
```

这只是我在输入此答案的 2 分钟内编写的一种可能的实现。所以它可能会使用一些改进。但你明白了。

像这样使用它：

```
recurseDOM(document.body,function(el){
    if (el == something_something) { return 1}
    return 0
}); 
```

你可以编写一个类似的函数来测试父母：

```
function testParents (el, test) {
    var parent = el.parentNode;

    if (test(parent)) {
        return 1;
    }
    else {
        if (parent != document.body) {
            return testParents(parent,test);
        }
    }
    return 0;
} 
```

因此，您可以编写如下内容：

```
recurseDOM(document.body,function(el){
    if (el.tagName == 'a' && testParents(el,function(p){
        if (p.tagName == 'legend' && testParents(p,function(pp){
            if (pp.id == 'webform-created-id-here') {
                return 1;
            }
            return 0;
        })) {
            return 1;
        }
        return 0;
    })) {
        return 1;
    }
    return 0;
}); 
```

或者，您可以开始递归形式的`getElementById`而不是`document.body`.

# google-plus - 从 API 控制台/沙盒运行环聊应用，无法邀请其他（测试）参与者

> ID：15303630
> 
> 赞同：1
> 
> 时间：2013-03-08T21:29:10.930
> 
> 标签：google-plus, google-oauth, hangout

大家好：我正在尝试从 API 控制台链接/沙盒中测试一个环聊应用程序。

机器是

```
- Mac OS X,
- latest normal Chrome. 
```

两个用户都是

```
- Google Apps users, 
- added to API Team for hangout project,
- able to see the App Engine application for static files etc. 
```

用户 1 是 API 项目所有者，用户 2 可以查看项目。

1.  作为用户一，我单击 API 控制台/沙盒链接开始。

2.  插件启动，应用程序立即启动。

3.  我单击左侧的应用程序图标以隐藏该应用程序。

4.  我点击蓝色的 Invite People 按钮来邀请用户 2。

5.  应用程序框架变为空白，无法邀请用户 2。

*在用户的控制台中，在应用启动之前*只有一个错误：

```
Failed to load resource: the server responded with a status of 404 (Not Found) 
https://hangoutsapi.talkgadget.google.com/talkgadget/channel 
```

从用户二开始，我收到两个错误——首先是以下错误，然后是上述错误，然后是应用程序启动：

```
Uncaught TypeError: Cannot call method 'isLoaded' of undefined
:87 
```

这个错误的堆栈跟踪去了

```
0d.be :87
init: (program):1
onload :1
0d.load :1
Gg :120
window.jstiming.js :124
(anonymous function) :371 
```

...没有文件名，只有行号。

我还没有完成 OAuth 客户端 ID 配置。两个用户（而不是单独）之间的沙盒工作是否需要这样做？

我需要一种方法让这两个用户进入同一个视频群聊。最终我可以通过服务器发送的 URL（我相信）来做到这一点，但昨天我需要一个快速的“n”脏方法。

非常感谢您的任何见解。

柯克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:59:57.630

您可能希望将沙盒环聊的 URL 发送给其他人，而不是尝试使用 Invite。

您可能还想完全跳过沙箱，只发布代码并使用“公共”版本。

# algorithm - 有哪些算法可以比较两个字符串的相似程度？

> ID：15303631
> 
> 赞同：75
> 
> 时间：2013-03-08T21:29:12.170
> 
> 标签：algorithm, language-agnostic, string-comparison, stdstring, heuristics

我需要比较字符串来决定它们是否代表相同的东西。这与人类输入的案例标题有关，其中缩写和其他小细节可能有所不同。例如，考虑以下两个标题：

```
std::string first = "Henry C. Harper v. The Law Offices of Huey & Luey, LLP"; 
```

相对于：

```
std::string second = "Harper v. The Law Offices of Huey & Luey, LLP"; 
```

人类可以快速判断这些很可能是相同的。我目前采用的方法是通过小写所有字母并删除所有标点符号和空格来规范化字符串：

```
std::string firstNormalized = "henrycharpervthelawofficesofhueylueyllp"; 
```

和：

```
std::string secondNormalized = "harpervthelawofficesofhueylueyllp"; 
```

在这种情况下进行比较，一个是另一个的子序列，但您可以想象其他更复杂的变体，其中不一定会发生这种情况，但它们具有重要的共同子序列。偶尔也会出现人为输入错误，例如转置字母和拼写错误。

也许某种字符差异程序可以提供帮助？我已经看到了用于比较要签入的代码差异的良好行差异程序，是否有类似的基于字符的东西，也许是在 boost 中？如果您可以计算公共连续字符的数量并取非共享字符的比率，也许这将是一个很好的启发式方法？

最后，我需要一个关于是否将它们视为相同的布尔决定。它不一定是完美的，但理想情况下它应该很少出错。

我可以使用什么算法来量化这两个字符串彼此之间的相似程度，然后我可以通过一些启发式方法将其转换为是/否答案？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2013-03-08T21:31:30.560

您正在寻找的是所谓的[字符串度量](http://en.wikipedia.org/wiki/String_metric)算法。其中有*很多*，其中许多具有相似的特征。其中比较流行：

*   [**Levenshtein Distance**](http://en.wikipedia.org/wiki/Levenshtein_distance)：将一个单词更改为另一个单词所需的最小单字符编辑次数。字符串不必具有相同的长度
*   [**汉明距离**](http://en.wikipedia.org/wiki/Hamming_distance)：两个相等长度的字符串中不同的字符数。
*   [**Smith–Waterman**](http://en.wikipedia.org/wiki/Smith-Waterman_algorithm)：用于计算可变子序列相似性的一系列算法。
*   [**Sørensen–Dice Coefficient**](http://en.wikipedia.org/wiki/Dice%27s_coefficient)：一种相似度算法，用于计算相邻字符对的差异系数。

[在该主题的wiki 页面](http://en.wikipedia.org/wiki/String_metric)上查看这些以及其他内容。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-11-10T13:53:31.567

[Damerau Levenshtein distance](http://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance)是另一种比较两个字符串的算法，它类似于 Levenshtein 距离算法。两者之间的区别在于它还可以检查字符之间的转置，因此可以为纠错提供更好的结果。

例如：`night`and之间的 Levenshtein 距离为 2，但和`nigth`之间的 Damerau Levenshtein 距离将为 1，因为它只是一对字符的交换。`night``nigth`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-02-03T19:06:18.240

您可以为此使用 ngrams。例如，将两个字符串转换为单词三元组（通常为小写），并比较它们彼此相等的百分比。

您的挑战是定义相似度的最小百分比。

[http://en.wikipedia.org/wiki/N-gram](http://en.wikipedia.org/wiki/N-gram)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-05-08T17:30:56.330

您可以考虑的另一种算法是 Simon White Similarity：

```
def get_bigrams(string):
    """
    Take a string and return a list of bigrams.
    """
    if string is None:
        return ""

    s = string.lower()
    return [s[i : i + 2] for i in list(range(len(s) - 1))] 
```

```
def simon_similarity(str1, str2):
    """
    Perform bigram comparison between two strings
    and return a percentage match in decimal form.
    """
    pairs1 = get_bigrams(str1)
    pairs2 = get_bigrams(str2)
    union = len(pairs1) + len(pairs2)

    if union == 0 or union is None:
        return 0

    hit_count = 0
    for x in pairs1:
        for y in pairs2:
            if x == y:
                hit_count += 1
                break
    return (2.0 * hit_count) / union 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-27T14:03:54.263

您可以使用计算最长公共子序列长度的算法来解决这个问题。如果两个输入字符串的最长公共子序列的长度小于任何一个字符串的长度，则它们不相等。

您可以使用动态规划的方法来解决问题并优化空间复杂度，以防您不希望找出最长的公共子序列。

# javascript - 如何在Javascript中合成按键

> ID：15303633
> 
> 赞同：8
> 
> 时间：2013-03-08T21:29:16.857
> 
> 标签：javascript, dom-events, keypress

我想在文本框中为一些输入过滤代码编写一些测试。对于大多数测试，我可以调用`setValue`并触发更改事件，这很容易做到。但是，在这种情况下，因为我想测试输入是否被过滤掉（或不被过滤掉），所以我不能`setValue()`直接。

我尝试调度`keydown`, `keyup`, `keypress`,`textinput`事件。[我可以看到正在调用它们的处理程序，但文本实际上并未显示在文本框中](http://msdn.microsoft.com/en-us/library/office/aa202943%28v=office.10%29.aspx)请注意，这仅在 Firefox 中“有效”，我了解其他浏览器的代码看起来会有所不同。

```
function dispatch(target, eventType, charCode) {
   var evt = document.createEvent("KeyboardEvent");
   evt.initKeyEvent(
     eventType,
     true,
     true,
     window,
     false,
     false,
     false,
     false,
     charCode,
     0
   );
   target.dispatchEvent(evt);
}

var id = document.getElementById('id');
id.onkeydown = id.onkeyup = id.onkeypress = function() {console.log(arguments)}

dispatch(id, 'keydown', 65);
dispatch(id, 'keyup', 65);
dispatch(id, 'keypress', 65);
dispatch(id, 'textinput', 65);
// I can see the handlers were called but it doesn't display in the text box 
```

我知道这有一些限制，因为我们不希望网络应用程序只是假装它们是在为用户行事。但是，这是为了测试我自己的应用程序，我可以使用特定的配置文件启动 Firefox 并安装插件，或者如果我知道它会有所帮助，甚至可以自己编写。

我所追求的是避免使用 Selenium，我想让 Java 排除在我的 JS 测试之外，因为它不仅速度慢，而且我必须在 Java 中重新实现很多 DOM 查询。

毕竟，问题是，有人知道如何让该代码实际修改输入吗？调整设置，安装插件？

**不回答我的问题的问题列表**

*   [模拟 TDD JavaScript 的用户输入](https://stackoverflow.com/questions/6770662/simulating-user-input-for-tdd-javascript/6771209#6771209)
*   [使用 jQuery 触发按键事件的确定方法](https://stackoverflow.com/questions/832059/definitive-way-to-trigger-keypress-events-with-jquery)
*   [如何使用 Javascript 将密钥发送到输入文本字段？](https://stackoverflow.com/questions/7062367/how-to-send-a-key-to-an-input-text-field-using-javascript)
*   [是否可以以编程方式模拟按键事件？](https://stackoverflow.com/questions/596481/simulate-javascript-key-events)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T23:17:33.997

我刚刚发现以下代码至少可以在 Chrome 中运行。不能进入 firefox 或 IE [http://jsfiddle.net/D2s5T/14/](http://jsfiddle.net/D2s5T/14/)

```
function dispatch(target, eventType, char) {
   var evt = document.createEvent("TextEvent");    
   evt.initTextEvent (eventType, true, true, window, char, 0, "en-US");
   target.focus();
   target.dispatchEvent(evt);
}
dispatch(el, "textInput", "a"); 
```

# validation - 验证检查页面上 Repeater 内的 UserControl 内的控件

> ID：15303634
> 
> 赞同：0
> 
> 时间：2013-03-08T21:29:21.040
> 
> 标签：validation, user-controls, ascx

我有一个 UserControl 说 - GiveIdentity.ascx（它有 2 个文本框字段 SSN 和 DOB）

我有另一个 UserControl 说 - GiveIdentityList.ascx（基本上这是一个转发器渲染，比如 GiveIdentity UserControl 的 3 个实例）

现在我在说 Default.aspx 页面上有这个 GiveIdentityList UserControl。

我想在 GiveIdentity.ascx 控件本身上添加一个“IsValid”属性或方法……这样它就会重新运行该特定控件上的所有文本框字段是否有效……（记住我不想用户 Page.Validators() 或 Default.aspx 页面上的某些内容）-我希望位于另一个作为中继器的 UserControls 内的 UserControls-公开 IsValid 属性-表明其内部的所有文本和日期控件是否有效。 ...

感谢您的帮助...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:08:33.500

您可以将用户控件中的公共方法公开给使用该控件的任何页面。如果状态发生变化，您还应该添加一个事件来提醒父页面。添加这些方法很容易：

```
Partial Class user_controls_myControl
    Inherits System.Web.UI.UserControl

   Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

   End sub

   Public Function isValid() as boolean

      if(me.checkbox1.text<>"" andalso me.checkbox2.text<>"") then
           return true
      else
           return false
      end if 
   End sub
end Class 
```

现在，在包含所有这些控件的 ASPX 页面中，您可以检查该特定功能以确保它们有效。例如，如果您有一个名为 giveIdentity1 的用户控件，您将希望遍历转发器并将对象强制转换为您的用户控件类型。然后您可以像这样检查 isValid 函数：

```
dim getBool as boolean 
getBool = me.giveIdentity1.isValid 
```

如果您需要帮助迭代中继器，请告诉我

您还可以创建自己的服务器事件来注册更改。您可以阅读我在此处回复的类似主题的帖子： [Handling events of usercontrols within listview](https://stackoverflow.com/questions/15086283/handling-events-of-usercontrols-within-listview/15136554#15136554)

如果这不能回答您的问题，请告诉我。

# javascript - 如何更改 DOM 对象原型中的方法

> ID：15303637
> 
> 赞同：0
> 
> 时间：2013-03-08T21:29:26.063
> 
> 标签：javascript, prototype-programming

我想改变对象的`open()`方法`XMLHttpRequest`。实际上，我需要更改将通过 xhr 发送的每个 url。我怎样才能做到这一点？

例如，当 xhr 对象打开一个请求时，`http://domain.com/`我想将其更改为`https://domain.com/`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:35:29.853

您可以在本地 DOM 对象上插入任何方法，但不推荐这样做。不要这样做。

无论如何，如果您想知道如何操作`XMLXttpRequest`'s`open`方法，您可以这样做：

```
var open = XMLHttpRequest.prototype.open;
XMLHttpRequest.prototype.open = function(){ 
   // do stuff you want 
   // for example console.log:
   console.log('test');
   // then let open method happen
   open.apply(this, arguments);
} 
```

对于您正在更改`protocol`URL 的用例，您可以这样做：

```
var open = XMLHttpRequest.prototype.open;
XMLHttpRequest.prototype.open = function(){ 
   var link = document.createElement('a'); // make an anchar element
   link.href = arguments[1]; // make it's href equal to second argument which is URL
   link.protocol = 'https:'; // force https to the link
   arguments[1] = link.href; // write back URL form link that is now start with 'https'
   // then let open method happen
   open.apply(this, arguments);
} 
```

# cakephp - 包含自身的 CakePHP 模型

> ID：15303638
> 
> 赞同：0
> 
> 时间：2013-03-08T21:29:29.433
> 
> 标签：cakephp, join, model, cakephp-2.1

我需要将模型加入自身...但我收到错误“不是唯一的表/别名：'图像'”

`Image`架构：

```
id: int
thumbnail_image_id: int null
key: varchar... filename
location: varchar... s3 or local
created: datetime
modified: datetime 
```

`Image`模型：

```
<?php
App::uses('AppModel', 'Model');

class Image extends AppModel {

    public $belongsTo = array(
        'Thumbnail' => array(
            'className' => 'Image',
            'foreignKey' => 'thumbnail_image_id'
        )
    );

    public $hasOne = array(
        'Thumbnail' => array(
            'className' => 'Image',
            'foreignKey' => 'thumbnail_image_id'
        )
    );

    public function exampleFunction() {
        return $this->find('all', array(
            'contain' => array('Thumbnail')
        ));
    } 
```

运行`exampleFunction`它会给我错误“不是唯一的表/别名：'图像'”。CakePHP 像这样构建 SQL：

```
SELECT `Image`.`id`, `Thumbnail`.`id` FROM `images` AS `Image` LEFT JOIN `images` AS `Image`.`thumbnail_image_id` = `Thumbnail`.`id`; 
```

但它应该是这样的......对吧？（注意倒置`ON`）：

```
SELECT `Image`.`id`, `Thumbnail`.`id` FROM `images` AS `Image` LEFT JOIN `images` AS `Thumbnail`.`id` = `Image`.`thumbnail_image_id`; 
```

如果我在 mysql 控制台中运行上面的两个 SQL 查询，则第二个有效。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:07:41.133

问题是您在 $belongsTo 和 $hasOne 中都使用了 Thumbnail。

模型将不知道将哪个关联用于“包含”。

重命名或删除您的关联之一，使其独一无二。

# python - Tkinter 图像查看器

> ID：15303639
> 
> 赞同：0
> 
> 时间：2013-03-08T21:29:31.710
> 
> 标签：python, image, tkinter, viewer

我正在尝试使用 Tkinter 创建一个程序，该程序在窗口中显示来自几个不同目录的缩略图。到目前为止，我有这个：

```
import Tkinter as tk
from PIL import Image, ImageTk
import Image, os

root = tk.Tk()
root.title('Shot Viewer')
w, h, x, y = 1000, 1000, 0, 0
root.geometry("%dx%d+%d+%d" % (w, h, x, y))

#quit
def quit(root):
    root.quit()
    root.destroy()

path = "/media/Expansion Drive/Heros Mission 3/Scenes/Scene 1-3/Shots/"
labels = []
for files in os.listdir(path):
    number = files.split("_")[1]
    filed = "/media/Expansion Drive/Heros Mission 3/Scenes/Scene 1-3/Shots/Shot_{} /Frames/Shot_{}_000000.png".format(number, number)
    if os.path.lexists(filed) == 'False':
        pass
    else:
        im = Image.open(imageFile)
        im.thumbnail((96, 170), Image.ANTIALIAS)
        image = ImageTk.PhotoImage(im)
        label = tk.Label(root, image=image, name=number)
        labels.append(label)

print labels

for label in labels:
    panel = label.grid()

panel2.grid(row=2, column=1)
button2 = tk.Button(panel2, text='Quit', command=lambda root=root:quit(root))
button2.grid(row=1, column=1, sticky='NW')

root.mainloop() 
```

但是这不起作用，有人有什么建议吗？

谢谢汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:21:08.017

使用 glob 模块帮助查找相关文件。

至于无法出现的图像：

```
import Tkinter as tk
from PIL import Image, ImageTk
import glob

root = tk.Tk()

labels = []

for jpeg in glob.glob("C:/Users/Public/Pictures/Sample Pictures/*.jpg")[:5]:
    im = Image.open(jpeg)
    im.thumbnail((96, 170), Image.ANTIALIAS)
    photo = ImageTk.PhotoImage(im)
    label = tk.Label(root, image=photo)
    label.pack()    
    label.img = photo # *
    # * Each time thru the loop, the name 'photo' has a different
    # photoimage assigned to it.
    # This means that you need to create a separate, 'longer-lived'
    # reference to each photoimage in order to prevent it from
    # being garbage collected.
    # Note that simply passing a photoimage to a Tkinter widget
    # is not enough to keep that photoimage alive.    
    labels.append(label)

root.mainloop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T22:48:18.190

我不认为你在你所说的地方正确处理它`panels = label.grid()`。相反，试着这样做`label.grid`，它不是一个赋值运算符，而是一个动作。

# arrays - 在 VB.net 中对 .txt 文件数组的元素求和

> ID：15303643
> 
> 赞同：0
> 
> 时间：2013-03-08T21:29:46.593
> 
> 标签：arrays, vb.net, average

正在向论坛寻求帮助的高级 VB 课程的大学生 - 我找到了一些代码示例，但很难弄清楚这一点.. 任何和所有帮助都表示赞赏:)

此应用程序导入存储在 bin 中的 .txt 文件，名为 data.txt ..20 记录的调试文件夹，每条记录 3 行，最后一行是学生的成绩，我需要通过将每个记录的成绩相加并除以来平均成绩20 然后显示在显示平均值的 lstbox 上。

到目前为止我有..

```
 Dim objReader As IO.StreamReader
    Dim intFill As Integer
    Dim intCount As Integer = 0
    Dim intAverage As Integer
    Dim strLocationAndNameOfFile As String = "data.text"

    If IO.File.Exists(strLocationAndNameOfFile) = True Then
        objReader = IO.File.OpenText(strLocationAndNameOfFile)
    Else
        MsgBox("The file is not available. Restart the program when the file is avilable", , "Error")
        Me.Close()
    End If

    If IO.File.Exists(strLocationAndNameOfFile) Then
        objReader = IO.File.OpenText(strLocationAndNameOfFile)
        Do While objReader.Peek <> -1
            _strName(intCount) = Convert.ToString(objReader.ReadLine())
            _strItemID(intCount) = Convert.ToString(objReader.ReadLine())
            _intGrade(intCount) = Convert.ToInt32(objReader.ReadLine())
            intCount += 1
        Loop
        objReader.Close()
    End If

    For intFill = 0 To (_strName.Length - 1)
        *'intAverage = SUM OF ALL AVERAGES / LENGTH OF ARRAY -1*
        Me.lstAverage.Items.Add(intAverage.ToString()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:36:22.180

在循环阅读成绩时总结它们

```
 Dim total as Integer
    Do While objReader.Peek <> -1
        _strName(intCount) = Convert.ToString(objReader.ReadLine())
        _strItemID(intCount) = Convert.ToString(objReader.ReadLine())
        _intGrade(intCount) = Convert.ToInt32(objReader.ReadLine())
        total += _intGrade(intCount)
        intCount += 1
    Loop 
```

然后除以 20 或 _intGrade.Length

```
 intAverage = total / _intGrade.Length 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T22:06:47.580

这么多问题，尽管我讨厌做别人的作业我想让你看看这会是什么样子

```
Public Function GetAverageGrade(ByVal filename As String) As Double
    Dim totalGrade As Integer = 0
    Dim lineCount As Integer = 0
    Dim line As String

    Using rdr As New IO.StreamReader(filename)
       While (line = rdr.ReadLine()) IsNot Nothing
           lineCount += 1
           If lineCount Mod 3 = 0 Then totalGrade += Convert.ToInt32(line)
       End While
    End Using
    Return totalGrade / (lineCount / 3.0)
End Function 
```

当然，您可能希望利用这些数据做更多事情，而不仅仅是获得平均成绩。因此，一个更好的选择是构建代码，将其作为一组记录全部读取：

```
Public Class GradeItem
    Public Property Name As String
    Public Property Item As String
    Public Property Grade As Integer
End Class 
```

接着

```
Public Iterator Function ReadGradeItems(ByVal fileName As String) As IEnumerable(Of GradeItem)
    Using rdr As New IO.StreamReader(fileName)
        While rdr.Peek() <> -1
            Yield New GradeItem With {.Name = rdr.ReadLine(), .Item= rdr.ReadLine(), .Grade = Convert.ToInt32(rdr.ReadLine()}
        End While
    End Using
End Function 
```

现在把它们放在一起：

```
Dim grades As IEnumerable(Of GradeItem) = ReadGradeItems("data.text")

lstAverage.Items.Add(grades.Select(Function(g) g.Grade).Average()) 
```

# playframework - 来自父类的静态查找器

> ID：15303645
> 
> 赞同：1
> 
> 时间：2013-03-08T21:29:50.003
> 
> 标签：playframework, playframework-2.0, ebean

我对在我的所有模型类中添加静态查找器感到恼火。

为什么不能这样做：

```
@MappedSuperclass
public class MyModel<T> extends Model {

    public static Finder<Integer,T> FIND = new Finder<Integer, T>(Integer.class,T.class);

}

@SuppressWarnings("serial")
@Entity
public class ValidationScript extends MyModel<ValidationScript> {

    @Id
    public Integer id;

    @Column(length = 5000)
    public String scriptCode;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T23:50:34.193

我花了一些时间寻找解决方案，因为我有同样的问题，但这不是与 Play/Ebean 相关的问题。

不幸的是，你不能在 Java 中做到这一点。按照设计，所有子类（同一个对象！）共享一个静态字段。当然，您不能拥有具有多种类型的对象！泛型在编译时用于检查方法调用的正确性：http: [//docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html](http://docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html)

您使用泛型提出的解决方案无法工作，因为静态字段/方法无法访问该类型（所有实例可能具有不同的类型）。

在您的情况下，字段*FIND*为*MyModel*的所有子类共享。

* * *

我试图在静态方法 finder() 中转换您的字段并使用静态哈希图类/查找器创建一个“查找器池”，但无论如何您必须提供这样的类 MyModel.finder(ValidationScript.class) 因为调用者总是超类。

太啰嗦了...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T04:22:49.593

模板很简单。使用此模板代替手动添加`@Id`字段和`Finder`

```
@javax.persistence.Id
public $ID$ id;

public static Finder<$ID$, $CL$> find
        = new Finder<$ID$, $CL$>($ID$.class, $CL$.class); 
```

将其粘贴到模板的编辑器中后，单击`Edit variables`并将表达式设置`CL`为`className()`

看看截图

![Finder 的实时模板](../Images/a69de54dd0e41528448ccce803b647e9.png)

![实时模板变量](../Images/fd5b14e386901af96493edca3794c145.png)

# amazon-s3 - 适用于 AppHarbor 和 Amazon S3 的良好日志记录策略

> ID：15303654
> 
> 赞同：2
> 
> 时间：2013-03-08T21:30:25.930
> 
> 标签：amazon-s3, ravendb, nlog, appharbor

我正在托管一个用于日志记录的应用`AppHarbor`程序`NLog`。我一直在尝试这个`Logentries`插件，这是一个很好的服务，可以将所有应用程序记录通过管道传输到它们的 Web 界面，然后通过它们的 Web 界面进行查看。现在它的免费试用期已经结束，我想先看看自己的日志记录，然后再为这项服务付费。

因为我使用的是`AppHarbor`，所以他们建议不要写入文件系统，因为它在每次部署时都会被擦除，而且在流动时，我每天会进行多次部署。无论如何我都在使用`S3`存储图像，所以在那里存储日志似乎也很自然。

我用这种方法看到的问题是我会将日志语句发送到存储在 上的文本文件`S3`，我需要附加到该文本文件。一旦站点获得一些流量，就会有多个同时调用来存储日志条目，这最终可能会锁定写入机制。有没有更好的方法来做到这一点，我不知道？也许在发送它们之前以某种方式对日志条目进行批处理？我正在用作我的数据库，因此如果没有更好的选择`Raven`，可以考虑直接将日志写入其中。`Raven`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T05:45:25.910

看起来 S3 或 RavenDB 没有 NLog 目标，但有一堆或其他选项：[http ://nlog-project.org/wiki/Targets](http://nlog-project.org/wiki/Targets)

# c# - 如何删除两个属性的组合等于字符串的所有值？

> ID：15303656
> 
> 赞同：3
> 
> 时间：2013-03-08T21:30:40.987
> 
> 标签：c#, linq

我正在尝试使用 LINQ 删除列表的所有引用，其中两个属性的组合等于一个字符串。

例如：我有对象

```
class obj
{
  string a;
  string b;
} 
```

我有一个单独的字符串 x

所以我想删除哪里`(a+b) == x`

下面是我想要做的例子：

```
void Main()
{
List<telefone> phones = new List<telefone>() 
    {
        new telefone()
        {
           ddd = "21", numero="1234"
        }, 
        new telefone()
        {
           ddd = "22", 
           numero="1234"
        }
    };

List<string> newPhones = new List<string>(){"1151814088", "11996081170", "098",   "890", "99988", "6533"};

for(int i = 0; i < newPhones.Count; i++)
    {
    phones.Select(x => x.ddd + x.numero).ToList().RemoveAll(x => (x == phones[i]));
}
phones.Dump();
}

public class telefone
{
        //[System.Xml.Serialization.XmlIgnore]
        internal string hash = String.Empty;

        public String ddd { get; set; }

        public String numero { get; set; }

        public telefone()
        {
            ddd = String.Empty;
            numero = String.Empty;
        }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T21:35:59.263

您可以使用`Where`+`Any`

```
var removed = phones.Where(p => !newPhones.Any(np => np == p.ddd + p.numero))
                    .ToList(); 
```

甚至更好，[`List.RemoveAll`](http://msdn.microsoft.com/en-us/library/wdka673a.aspx)因为它不会创建新列表：

```
phones.RemoveAll(p => newPhones.Any(np => np == p.ddd + p.numero)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:35:38.747

`var filteredList = initialList.Where(obj => (obj.a + obj.b) != x);`

您可能想要检查空字符串。

# linux - 如何将用户添加到组，如果用户和组在linux中都具有相同的名称？

> ID：15303663
> 
> 赞同：2
> 
> 时间：2013-03-08T21:31:09.860
> 
> 标签：linux

在这里，我有同名的用户和组，同时将用户（mqm）添加到组（mqm）中，我遇到了以下问题。请给我解决方案。

```
 [root@localhost /]# useradd -G mqm mqm

    useradd: user 'mqm' already exist 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:35:03.977

`useradd`不会将用户添加到组。它将用户帐户添加到系统。你想用`usermod`. 看`man usermod`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:35:10.170

怎么样`groupadd`？

```
root# groupadd -g GID mqm 
```

然后将用户添加`mqm`到组`mqm`中。

在这里看到[这个](http://linux.die.net/man/8/groupadd)。

# c# - 从 MySQL Select 向 C# 列表中添加多列

> ID：15303664
> 
> 赞同：1
> 
> 时间：2013-03-08T21:31:12.510
> 
> 标签：c#, mysql

我正在尝试将 MySQL 选择放入列表中。我找到了一段有效的代码，但是我需要添加不止一列。我想返回选择中所有数据的数组。

```
List<string> list = (from IDataRecord r in dataReader
                     select (string)r["FieldName"]
                    ).ToList(); 
```

代码在这里找到： [Fill an array (or arraylist) from SqlDataReader](https://stackoverflow.com/questions/1370543/fill-an-array-or-arraylist-from-sqldatareader)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:36:19.217

这应该这样做：

```
var list = (from IDataRecord r in dataReader
            select new 
                   {
                        Field1 = (string)r["Field1"],
                        Field2 = (int)r["Field2"],
                         ...
                   }
            ).ToList(); 
```

只需根据需要添加字段。

# .htaccess - 如何允许使用 htaccess 访问文件夹

> ID：15303666
> 
> 赞同：1
> 
> 时间：2013-03-08T21:31:16.090
> 
> 标签：.htaccess, .htpasswd

我有一个 htaccess 来防止访问文件夹。

但是，我想允许访问一个子文件夹。

这是我的 htaccess 文件。我怎样才能将其修改为

```
AuthName "Private Zone"
AuthType Basic
AuthUserFile /vdir/www.web.net/var/www/vhosts/www.web.net/web/folder/.htpasswd
require valid-user 
```

这是我不想受到保护的文件夹

```
 /vdir/www.web.net/var/www/vhosts/www.web.net/web/folder/go/upload/ 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:25:22.143

尝试在**../go/upload/**下创建一个 .htaccess 文件，内容如下：

```
AuthType None
Require all granted 
```

# c# - 将图像作为 blob 存储在数据库中

> ID：15303669
> 
> 赞同：0
> 
> 时间：2013-03-08T21:31:25.843
> 
> 标签：c#, database

我正在尝试将图像作为 BLOB 存储在我的数据库中，如下所示：

```
 c = new MySqlCommand("INSERT INTO korisnici VALUES( '" + entity.Id + "','" + entity.Prezime + "','" + entity.Ime + "','" + **SlikaUBase64(entity.Slika, ImageFormat.Bmp)**... 
```

这是我从图像创建 BLOB 的函数：

```
 public string SlikaUBase64(Image image, ImageFormat format)
{
    //slika u byte[]
    byte[] prazan=new byte[0];
    if (image == null) return Convert.ToBase64String(prazan);
    MemoryStream ms = new MemoryStream();
    image.Save(ms, format);
    byte[] imageBytes = ms.ToArray();

    // byte[] u base64
    string base64 = Convert.ToBase64String(imageBytes);
    return base64;
} 
```

我得到了这个异常：尝试序列化参数[http://tempuri.org/:entity](http://tempuri.org/:entity)时出错。InnerException 消息是 'Type 'System.Drawing.Bitmap' 与数据合同名称 'Bitmap: [http://schemas.datacontract.org/2004/07/System.Drawing](http://schemas.datacontract.org/2004/07/System.Drawing) ' 不是预期的。考虑使用 DataContractResolver 或将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。有关更多详细信息，请参阅 InnerException。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:44:32.420

我不会传入 Image 引用，而是传入 Byte[]。

# android - 首次启动时应用程序图标之前的默认 android 应用程序图标

> ID：15303671
> 
> 赞同：1
> 
> 时间：2013-03-08T21:31:27.843
> 
> 标签：android, android-ui

我有一个活动在启动时会显示一个默认的 android 应用程序图标，然后将其替换为我的自定义活动图标。这仅在我的活动首次启动时发生，所有连续启动都很好，立即显示我的活动自定义图标。

```
<application
    android:label="@string/mylabel"
    android:theme="@style/mytheme"
    android:icon="@drawable/myactivity_icon">
    <activity
        android:name=".myactivity"
        android:label="@string/myactivity"
        android:icon="@drawable/myactivity_icon" >
        <intent-filter><action android:name="android.intent.action.VIEW"/></intent-filter>
    </activity>
</application> 
```

使用类和包名称以明确的意图启动此活动

# jquery - 单击输入时数据表行分组停止扩展

> ID：15303674
> 
> 赞同：1
> 
> 时间：2013-03-08T21:31:36.573
> 
> 标签：jquery, datatables, stoppropagation

使用数据表和行分组我试图让行在单击输入时不展开..但仅在单击 tr 时展开。 `.stopPropagation()`不工作。

我正在使用`.live()`，因为该表是由 ajax 动态创建的。

```
$("#example input[type='text']").live('click',function(event){
    event.stopPropagation();
    return false;
}); 
```

这是一个jsfiddle：http: [//jsfiddle.net/JWvZt/](http://jsfiddle.net/JWvZt/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:21:14.447

在进行故障排除时，我花了一段时间才发现您在 jsfiddle 中绑定**了两次**click 事件（在 javascript 框架的开头和结尾处）。删除第一个并将第二个定义为：

```
$("#example td").on('click','input[type="text"]', function(event){
    event.stopPropagation();
    return false;
}); 
```

代码按需要工作。注意：我使用 .on() 因为 .live() 已被弃用。为了刷新事件绑定，当您动态创建行时，您必须在 AJAX 成功处理程序（或 .done() 方法）中调用上述代码片段。

这是[**jsfiddle 的链接**](http://jsfiddle.net/martyk/uJZSu/2/)

# continuous-integration - 持续集成和发布管理

> ID：15303676
> 
> 赞同：1
> 
> 时间：2013-03-08T21:31:38.203
> 
> 标签：continuous-integration, build-automation

我们是一家小型的软件开发店，小意思是烫一次。软件工程师和两个承包商。我正在考虑使用持续集成和发布管理流程，因为我们的产品需要通过 FDA 认证。我们的开发环境是 WinCE 6.0、ARM 7，都使用 C/C++。我正在寻找有关开源工具的建议，以改进我们的流程。

我们正在为我们的存储库使用 Subversion，并且还在设置 Bugzilla 的过程中。TeamCity 会成为这套工具的一个很好的补充吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:35:30.490

祝 FDA 支持好运；我的公司一直在向 FDA 认证迈进，这是一个疯狂的过程。

我肯定会建议在您的开发过程中尽快设置自动构建过程；即使它不是 CI 构建过程。我有在新的和现有的代码库中设置自动构建过程的经验，并且在新的代码库中实现构建过程要容易得多。如果您从一开始就计划构建过程，则可以更改代码\项目文件的结构（我使用 C#），以便更轻松地设置构建过程。

至于构建服务器，是的，我会推荐 TeamCity。我已经在我的公司使用它大约一年来运行 CI、夜间和 QA 构建过程。总的来说，它是一个非常容易配置、使用和维护的工具。

我也知道 Jenkins (Hudson) 是一个非常流行的构建服务器。但是，我没有任何使用它的经验，所以我不能给你一个很好的比较。

希望这些信息有所帮助。

# c - 为什么 atoi 和 strtol 大部分时间只返回我的字符串中的第一个数字？

> ID：15303677
> 
> 赞同：0
> 
> 时间：2013-03-08T21:31:48.720
> 
> 标签：c, atoi, strtol

我正在尝试从具有如下输入的 ac 文件中获取整数：

```
(0 3 200 3) (0 9 500 3) (98 20 500 3) (100 1 100 3) (100 100 500 3) 
```

atoi 和 s 对于括号后的第一个数字（我使用 while 循环和大于一位数的 strcat 数字）和任何只有一位数的数字都可以正常工作，但它们只返回不正确的数字的第一个数字插入语。

以下是该方法的代码：

```
 void allProcesses(FILE file, struct process processArray[]) {
char ch;
int number;
int a, b, c, io;
int arrayCount = 0;
int processIndex = 0;
char temp[1];

while ((ch = fgetc(&file)) != EOF) {

    if (isdigit(ch)) {

        char numberAppended[20] = "";

        while (isdigit(ch)) {
            temp[0] = ch;
            strcat(numberAppended, temp);
            ch = fgetc(&file);
        }

        char* end;
        number = (int)strtol(numberAppended, &end, 0);
        printf("The number is %d\n",number);
        int atoinum = atoi(numberAppended);

        switch (processIndex) {
            case 0:
                a = number;
                if (DEBUG == TRUE) {
                    printf("a = %c\n", a);
                    printf("NUmber a is %d\n", a);
                }
                processIndex++;
                break;
            case 1:
                b = number;
                if (DEBUG == TRUE) {
                    printf("b = %c\n", b);
                    printf("NUmber b is %d\n", b);
                }
                processIndex++;
                break;
            case 2:
                c = number;
                if (DEBUG == TRUE) {
                    printf("c = %c\n", c);
                    printf("NUmber c is %d\n", c);
                }
                processIndex++;
                break;
            case 3:
                io = number;
                if (DEBUG == TRUE) {
                    printf("io = %c\n", io);
                    printf("NUmber io is %d\n", io);
                }
                processIndex++;
                break;
            default:
                break;
        }
    }
    if (ch == ')') {
        processArray[arrayCount] = makeProcess(a, b, c, io);
        arrayCount++;
        processIndex = 0;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:37:14.017

**首先**（*阅读评论*）：

您已经声明`char temp[1];`了一种大小，它必须`2`根据您的代码大小（否则由于内存溢出而导致未定义的行为）：

```
char temp[2];
while (isdigit(ch)) { // from `(` to `)`
   temp[0] = ch;   // should be a null terminated 
   temp[1] = '\0'; // add this step;
   strcat(numberAppended, temp); 
   ch = fgetc(&file);
} 
```

**第二：**你`numberAppended`被解析成一个字符串：`"0 9 500 3"`
你正在调用

```
number = (int)strtol(numberAppended, &end, 0);
                                      ^
                                      output argument 
```

strtol 的语法：

```
long int strtol(const char *numberAppended, char **end, int base); 
```

**在哪里**

*   `numberAppended`: 是要转换为长整数的字符串。
*   `end`: 指向一个**指针，该指针将被设置为紧跟**在字符串“”中的长整数之后的字符`numberAppended`。

你要写这样的东西：（*阅读评论*）

```
end = numberAppended;  // assign to first string
// in a loop {
number = (int)strtol(end, &end, 0);  // in loop end is input &end is output
printf("The number is %d\n",number); 
//} 
```

我的以下代码将帮助您了解如何使用`strtol()`从`numberAppended`字符串中解析和提取数字：

```
#include <stdio.h>      /* printf */
#include <stdlib.h>     /* strtol */
int main (){
  char numberAppended[] = "2001 11 223   444   566";
  char * end;
  long int li;
  end =numberAppended;
  int base =10;
  int ele = 0;
  while(li=strtol (end, &end, base)){
     printf("%ld \n", li);
     ele += 1;
  }
  printf("\nNo of elements: %d", ele);
  return 0;
} 
```

输出：

```
2001 
11 
223 
444 
566 

No of elements: 5 
```

第三：可能不是错误，但我之前找不到`processIndex`您的代码中的更新位置`switch(){}`..

# google-maps - 来自经纬度的谷歌地图地址

> ID：15303681
> 
> 赞同：5
> 
> 时间：2013-03-08T21:32:07.537
> 
> 标签：google-maps, google-maps-api-3

我正在使用 google map api 我正在从我的数据库中动态获取纬度和经度。我想显示每个职位的地址，任何人都可以告诉我如何识别。

或者任何人都可以告诉这个网站如何为每个职位获取地址。 [http://www.findlatitudeandlongitude.com/find-address-from-latitude-and-longitude.php#.UTpYG1c9nwk](http://www.findlatitudeandlongitude.com/find-address-from-latitude-and-longitude.php#.UTpYG1c9nwk)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T21:54:44.530

从坐标中获取相关地址称为[反向地理编码](https://developers.google.com/maps/documentation/javascript/geocoding#ReverseGeocoding)

Google Maps API 在 javascript API 中和作为网络服务提供反向地理编码。

Google 地图服务不适合批量使用。您最好的选择是将地址与坐标一起存储在数据库中，因为反向地理编码并不总是可靠的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-25T10:12:32.363

您可以使用谷歌地图API，如下所示

[http://maps.googleapis.com/maps/api/geocode/json?latlng=34.41448,-118.93753&sensor=true](http://maps.googleapis.com/maps/api/geocode/json?latlng=34.41448,-118.93753&sensor=true)

使用此 api，您可以从 key 获取地址地址

"formatted_address" : "1271 Cliff Avenue, Fillmore, CA 93015, USA"

您可以使用此 api 获得整个地址。

希望需要帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T21:55:40.923

我猜该站点正在使用Google 提供的[反向地理编码 API 。](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)

# msmq - NServiceBus 工作人员端点

> ID：15303682
> 
> 赞同：1
> 
> 时间：2013-03-08T21:32:10.247
> 
> 标签：msmq, nservicebus, nservicebus-distributor

我目前正在评估 NSB 中的分发服务器，并注意到当我在自己的机器上运行分发服务器和几个工作人员时，每个工作人员的队列名称都会附加一个 Guid。

根据 Udi，主人本人 :)，在这篇文章中：[Distributor and worker end point queue in same machine](https://stackoverflow.com/questions/11102261/distributor-and-worker-end-point-queue-in-same-machine)

原因是 NSB 假设您在测试设置中运行。

**问题：**

但是如果我在 1 台单独的机器上运行 4 名工人会发生什么？该机器上的队列名称是否会再次附加一个 Guid**或者**工作人员是否能够仅仅因为分发器在远程机器上而共享同一个队列？

这个问题很重要，因为我确实希望在一台远程机器上有多个工作人员，并且每次机器启动时生成新的队列名称对于维护目的来说不是一个好主意。

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T02:56:01.973

*但是如果我在 1 台单独的机器上运行 4 名工人会发生什么？*
你为什么想这么做？

每个工作线程都可以配置为运行多个工作线程。这就是为什么在一台机器上运行多个工作人员没有意义......

我会增加单个工作人员正在使用的线程数，直到该机器上达到最大吞吐量。然后，扩展到另一台机器......所以，每个盒子一个工人，每个工人多个线程

有关配置的详细信息，请参见[此处](http://support.nservicebus.com/customer/portal/articles/862362-msmqtransportconfig)`NumberOfWorkerThreads`

# python - Django 用户表作为外键

> ID：15303686
> 
> 赞同：4
> 
> 时间：2013-03-08T21:32:25.863
> 
> 标签：python, django, web

我是 Django 的新用户，刚刚开始我的第一个应用程序“myapp”。

在我的应用程序的 models.py 中，我有以下模型：

```
class Subcalendar(models.Model):
  user = models.ForeignKey(User) 
```

但是当我尝试运行时：

```
python manage.py sql myapp 
```

我收到一条错误消息：

```
NameError: name 'User' is not defined 
```

我是否需要为用户制作自己的模型，或者是否有另一种方式在我的模型的外键字段中调用它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T21:34:43.960

`User`您需要在文件顶部导入模型

```
 from django.contrib.auth.models import User 
```

所以python可以解析引用。

# jquery - 缩略图画廊返回画廊的开头

> ID：15303689
> 
> 赞同：0
> 
> 时间：2013-03-08T21:32:43.883
> 
> 标签：jquery, image, jquery-ui, photo-gallery

我有一个缩略图库，一旦您到达厨房的尽头，我希望它返回到画廊的开头，但我似乎无法弄清楚如何实现此功能。这是我到目前为止所拥有的 [1]：http://jsfiddle.net/jsavage/vp62g/3/[问题]。任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:43:53.730

如果你需要一些其他的东西：

```
$('div#arrowR').click(function(){
    if(index < endIndex ){
      index++;
      $item.animate({'left':'-=300px'});
    } else {
      index = 0;
      $item.animate({'left':'+='+(300*endIndex)+'px'});  
    }
});

$('div#arrowL').click(function(){
    if(index > 0){
      index--;            
      $item.animate({'left':'+=300px'});
    } else {
      index = endIndex;
      $item.animate({'left':'-='+(300*endIndex)+'px'});
    }
}); 
```

# iphone - iOS：如何将 NSData 的长度添加为其两个字节的标头？

> ID：15303690
> 
> 赞同：1
> 
> 时间：2013-03-08T21:32:51.257
> 
> 标签：iphone, ios, nsdata, nsmutabledata

我有一个 NSData，我想将它的长度作为十六进制数字附加到它的标题中。我可以使用以下代码来做到这一点：

```
unsigned int len = [data length];

NSMutableData *sendData = [[NSMutableData alloc] initWithBytes:&len length:2];
[sendData appendData:data]; 
```

len = 5 的上述代码的结果是“05 00”，但我想要“00 05”。有谁知道这是怎么做到的吗？

标头的长度始终为 2。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T22:32:30.093

下面的代码（如您所做的那样）添加长度小于 65536（两个字节）。所以你需要使用：

```
uint16_t len = CFSwapInt16HostToBig([data length]);
NSMutableData *sendData = [[NSMutableData alloc] initWithBytes:&len length:2];
[sendData appendData:data]; 
```

可用功能列表在以下苹果开发者库中的 de 文档中进行了描述：

[字节顺序实用程序参考](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFByteOrderUtils/Reference/reference.html)

# r - 具有二次复杂计算的数据帧的 R 2D 分箱

> ID：15303692
> 
> 赞同：4
> 
> 时间：2013-03-08T21:32:57.627
> 
> 标签：r, dataframe, binning

我有一个通常看起来像这样的数据框

```
df.data <- data.frame(x=sample(1:9, 10, replace = T), y=sample(1:9, 10, replace=T), vx=sample(-1:1, 10, replace=T), vy=sample(-1:1, 10, replace=T)) 
```

x 和 y 是位置。vx 和 vy 是二维向量的 x、y 值。我想根据 x 和 y 值获取这个数据框和“bin”，但对 vx 和 vy 执行计算。此函数执行此操作，但它使用的循环对于我的数据集来说太慢了。

```
slowWay <- function(df)
{
    df.bin <- data.frame(expand.grid(x=0:3, y=0:3, vx=0, vy=0, count=0))

    for(i in 1:nrow(df))
    {
        x.bin <- floor(df[i, ]$x / 3)
        y.bin <- floor(df[i, ]$y / 3)
        print(c(x.bin, y.bin))

        df.bin[df.bin$x == x.bin & df.bin$y == y.bin, ]$vx = df.bin[df.bin$x == x.bin & df.bin$y == y.bin, ]$vx + df[i, ]$vx
        df.bin[df.bin$x == x.bin & df.bin$y == y.bin, ]$vy = df.bin[df.bin$x == x.bin & df.bin$y == y.bin, ]$vy + df[i, ]$vy
        df.bin[df.bin$x == x.bin & df.bin$y == y.bin, ]$count = df.bin[df.bin$x == x.bin & df.bin$y == y.bin, ]$count + 1
    }

    return(df.bin)
} 
```

这种类型的 2D 分箱是否可以以非循环方式进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T23:10:17.247

这是另一种更快的方法，其中包括未填充的 bin 组合：

```
fasterWay <- function(df.data) {
  a1 <- aggregate(df.data[,3:4], list(x=floor(df.data$x/3), y=floor(df.data$y/3)), sum)
  a2 <- aggregate(list(count=rep(NA,nrow(df.data))), list(x=floor(df.data$x/3), y=floor(df.data$y/3)), length)
  result <- merge(expand.grid(y=0:3,x=0:3), merge(a1,a2), by=c("x","y"), all=TRUE)
  result[is.na(result)] <- 0
  result <- result[order(result$y, result$x),]
  rownames(result) <- NULL
  result
} 
```

它给了我：

```
 x y vx vy count
1  0 0  0  0     1
2  0 1  0  0     0
3  0 2 -1 -1     1
4  0 3  0  0     0
5  1 0 -1 -1     1
6  1 1  0  0     0
7  1 2  0  0     0
8  1 3 -1  0     2
9  2 0 -1 -1     1
10 2 1  0  0     0
11 2 2 -1  1     2
12 2 3  0  0     1
13 3 0  0  0     0
14 3 1  0  0     0
15 3 2 -1  0     1
16 3 3  0  0     0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T22:21:47.857

这是一种方法，但如果您想要包含未填充 bin 组合的完整记录，可能需要分几步完成：

```
> by(df.data[, c("vx", "vy")],        # input data
     list(x.bin=floor(df.data$x / 3), y.bin=floor(df.data$y / 3)), # grouping
     function(df) sapply(df, function(x) c(Sum=sum(x), Count=length(x) ) ) )  #calcs
x.bin: 0
y.bin: 1
      vx vy
Sum    0  1
Count  1  1
--------------------------------------------------------------------- 
x.bin: 1
y.bin: 1
      vx vy
Sum    0  1
Count  2  2
--------------------------------------------------------------------- 
x.bin: 2
y.bin: 1
      vx vy
Sum   -1 -2
Count  2  2
--------------------------------------------------------------------- 
x.bin: 0
y.bin: 2
      vx vy
Sum    1  0
Count  1  1
--------------------------------------------------------------------- 
x.bin: 1
y.bin: 2
NULL
--------------------------------------------------------------------- 
x.bin: 2
y.bin: 2
      vx vy
Sum    2  1
Count  4  4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T06:18:17.047

这是一个`data.table`版本：

```
library(data.table)
dt.data<-as.data.table(df.data) # Convert to data.table
dt.data[,c("x.bin","y.bin"):=list(floor(x/3),floor(y/3))] # Add bin columns
setkey(dt.data,x.bin,y.bin)

dt.bin<-CJ(x=0:3, y=0:3) # Cross join to create bin combinations
dt.data.2<-dt.data[dt.bin,list(vx=sum(vx),vy=sum(vy),count=.N)] # Join the bins and data; sum vx/vy and count matching rows
dt.data.2[is.na(vx),vx:=0L] # Replace NA with 0
dt.data.2[is.na(vy),vy:=0L] # Replace NA with 0
dt.data.2[order(y.bin,x.bin)] # Display the final data.table output

##     x.bin y.bin vx vy count
##  1:     0     0  0  0     0
##  2:     1     0  0  0     0
##  3:     2     0  1  1     1
##  4:     3     0  0  0     0
##  5:     0     1  0  0     0
##  6:     1     1  0 -2     3
##  7:     2     1  0  0     0
##  8:     3     1  0  0     0
##  9:     0     2  0  0     1
## 10:     1     2  0  0     0
## 11:     2     2  0  2     3
## 12:     3     2 -1  1     1
## 13:     0     3  0  0     0
## 14:     1     3  0  0     0
## 15:     2     3  0  0     0
## 16:     3     3  1 -1     1 
```

# amazon-ec2 - 从图像创建 ec2 实例 - 使用 boto 查找内核 id 属性

> ID：15303697
> 
> 赞同：3
> 
> 时间：2013-03-08T21:33:19.493
> 
> 标签：amazon-ec2, kernel, boto

我从正在运行的机器上获得了 EC2 快照。当我创建一个图像然后从中创建一个实例时，它无法通过可达性测试，我无法连接到它。我检查了音量，连接到另一台机器没有错误。

我现在怀疑我必须选择正确的内核 ID，并且默认值可能不兼容。

查看我拥有的其他 EC2 实例，它们正在运行 kernel id `aki-427d952b`，但该内核在下拉列表中不可用（即使在同一可用区中）。

如何找到下一个最佳内核 ID？是否有一些内核 ID 列表以及它们支持哪些版本/架构？

编辑：可以使用例如 python boto 或其他库来列出所有内核 ID 和属性，以允许从中选择不同的内核 ID `aki-427d952b`（下拉列表中缺少）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:46:15.600

Boto 当然可以用于列出图像，并且您可以获得有关其配置的数据。这是否是寻找替代品的最佳方式是另一个问题，但是，如果你想这样做，这里是 python/boto 代码

```
# use your AWS id and Secret here
conn = EC2Connection(awsid, awssecret)

# returns array of all images your account can use
all_images = conn.get_all_images() 

for img in all_images:
    attrs = img.__dict__
    # attrs will be a dictionary of key-value pairs associated 
    # with the image.  Look through them to find what you want.

    if img.kernel_id == 'aki-427d952b':
        print "found aki-427d952b:  imgid=" + img.id 
```

# android - 如何将 Google Play 搜索图标添加到我的 Android 应用程序？

> ID：15303702
> 
> 赞同：2
> 
> 时间：2013-03-08T21:33:42.727
> 
> 标签：android, google-play

当有人搜索我的 android 应用程序时，如何向 Google Play 搜索字段添加图标？

这是我想做的一个例子：http: [//s12.postimage.org/dcem3mnal/Android_Play_Store_Search_Icon.png](http://s12.postimage.org/dcem3mnal/Android_Play_Store_Search_Icon.png)

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T21:37:36.987

这不在您的控制范围内。它是由谷歌自动为流行的应用程序完成的。你可以做到这一点的唯一方法是让你的应用程序成为真正流行的应用程序之一。

# html - 让标题行和表格数据与水平滚动条协调移动

> ID：15303706
> 
> 赞同：1
> 
> 时间：2013-03-08T21:34:02.697
> 
> 标签：html, css

我需要你的帮助。

如何修改 HTML/CSS 编码，以允许当用户水平左右滚动时，列和数据同步移动。现在，当用户向后和第四个水平条滑动时，我的列没有正确排列？

```
<!DOCTYPE html>
<html>
<head>
<!-- Upgrade MSIE5.5-8 to be compatible with modern browsers -->
<!--[if lt IE 9]>
    <script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script>
<![endif]-->
<style>

/* ----- Scrolling Table ----- */
.dataGridHeader {
position:relative;
padding-top:24px;

border-left: 1px solid #999;
border-bottom: 1px solid #999;
}

.dataGridContent {
overflow-x:scroll;
overflow-y:scroll;
height:144px;
}

.dataGridHeader thead tr {
position:absolute;
top:0;
left:0;
}

.dataGridHeader table thead tr th, .dataGridHeader table tbody tr td { 
text-align:left;
height:0;
}

table.scrolltablestyle {
    border-top: 1px solid #D9D9D9;
    table-layout: fixed;
    width: 1100px;
}

table.scrolltablestyle tbody tr td{
    background: #fff;
    text-align:left;
    padding: 4px 9px;
    border-right: 1px solid #999;
}
table.scrolltablestyle thead tr th{
    background-color: #FFFFD9;
    font-weight: normal;
    text-align:left;
    padding: 4px 9px 4px 9px;
    border-bottom: 1px solid #999;
}

table.scrolltablestyle thead tr th {
    border-right: 1px solid #999;
    border-top: 1px solid #999;
}

table.scrolltablestyle tbody tr td{
    border-right: 1px solid #999;
        width: 200px;
}

table.scrolltablestyle tbody tr:last-child td{
    border-bottom: 0;
}

</style>

</head>
<body>

<div class="dataGridHeader">
  <div class="dataGridContent">
    <table cellpadding="0" cellspacing="0" class="scrolltablestyle">
      <thead>
        <tr>
          <th>Shopper Name</th>
          <th>&nbsp;</th>
          <th>&nbsp;</th>
          <th>First Name</th>
          <th>Last Name</th>
          <th>User ID</th>
          <th>Status</th>
          <th>TestColumn</th>
        </tr>
      </thead>
      <tbody>
  <tr>
    <td>C2C Fishing</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>John</td>
    <td>Doe</td>
    <td>C2C Fishing</td>
    <td>Enabled</td>
    <td>Enabled</td>
  </tr>
  <tr>
    <td>C2C Fishing</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>John</td>
    <td>Doe</td>
    <td>C2C Fishing</td>
    <td>Enabled</td>
    <td>Enabled</td>
  </tr>
    <tr>
    <td>C2C Fishing</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>John</td>
    <td>Doe</td>
    <td>C2C Fishing</td>
    <td>Enabled</td>
    <td>Enabled</td>
  </tr>
    <tr>
    <td>C2C Fishing</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>John</td>
    <td>Doe</td>
    <td>C2C Fishing</td>
    <td>Enabled</td>
    <td>Enabled</td>
  </tr>
    <tr>
    <td>C2C Fishing</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>John</td>
    <td>Doe</td>
    <td>C2C Fishing</td>
    <td>Enabled</td>
    <td>Enabled</td>
  </tr>
    <tr>
    <td>C2C Fishing</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>John</td>
    <td>Doe</td>
    <td>C2C Fishing</td>
    <td>Enabled</td>
    <td>Enabled</td>
  </tr>
    <tr>
    <td>C2C Fishing</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>John</td>
    <td>Doe</td>
    <td>C2C Fishing</td>
    <td>Enabled</td>
    <td>Enabled</td>
  </tr>
    <tr>
    <td>C2C Fishing</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>John</td>
    <td>Doe</td>
    <td>C2C Fishing</td>
    <td>Enabled</td>
    <td>Enabled</td>
  </tr>

      </tbody>
    </table>
  </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:55:34.717

嗨 Jhon 只需`position:absolute`从这个类中删除

```
.dataGridHeader thead tr
{
/*position:absolute;*/ //* this is the problem*/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-15T20:46:54.783

查看 OP 的代码，其目的似乎是创建一个具有垂直固定标题行和滚动正文的表格。我见过的几乎所有具有流动宽度的纯 CSS 滚动表设计都有相同的问题：横向滚动时，列标题不会与列保持一致。接受的答案确实解决了这个问题，但它也禁用了垂直固定的标题，基本上把它变成了一个标准表。

对于保持垂直固定标题同时还允许适当水平滚动的解决方案，请看这里：**[jsfiddle](http://jsfiddle.net/doctorDestructo/kn4xprgx/)**

编码：

**HTML**

```
<div class="scrollingtable">
  <div>
    <div>
      <table>
        <caption>Top Caption</caption>
        <thead>
          <tr>
            <th><div label="Column 1"/></th>
            <th><div label="Column 2"/></th>
            <th><div label="Column 3"/></th>
            <th>
              <!--more versatile way of doing column label; requires 2 identical copies of label-->
              <div><div>Column 4</div><div>Column 4</div></div>
            </th>
            <th class="scrollbarhead"/> <!--ALWAYS ADD THIS EXTRA CELL AT END OF HEADER ROW-->
          </tr>
        </thead>
        <tbody>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
        </tbody>
      </table>
    </div>
    Faux bottom caption
  </div>
</div> 
```

* * *

**CSS**

```
<!--[if lte IE 9]><style>.scrollingtable > div > div > table {margin-right: 17px;}</style><![endif]-->
<style>
/*the following html and body rule sets are required only if using a % width or height*/
html {
  width: 100%;
  height: 100%;
}
body {
  box-sizing: border-box;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0 20px 0 20px;
  text-align: center;
}
.scrollingtable {
  box-sizing: border-box;
  display: inline-block;
  vertical-align: middle;
  overflow: hidden;
  width: auto; /*if you want a fixed width, set it here, else set to auto*/
  min-width: /*0*/100%; /*if you want a % width, set it here, else set to 0*/
  height: 188px/*100%*/; /*set table height here; can be fixed value or %*/
  min-height: 0/*104px*/; /*if using % height, make this large enough to fit scrollbar arrows + caption + thead*/
  font-family: Verdana, Tahoma, sans-serif;
  font-size: 16px;
  line-height: 20px;
  padding: 20px 0 20px 0; /*need enough padding to make room for caption*/
  text-align: left;
}
.scrollingtable * {box-sizing: border-box;}
.scrollingtable > div {
  position: relative;
  border-top: 1px solid black;
  height: 100%;
  padding-top: 20px; /*this determines column header height*/
}
.scrollingtable > div:before {
  top: 0;
  background: cornflowerblue; /*header row background color*/
}
.scrollingtable > div:before,
.scrollingtable > div > div:after {
  content: "";
  position: absolute;
  z-index: -1;
  width: 100%;
  height: 100%;
  left: 0;
}
.scrollingtable > div > div {
  min-height: 0/*43px*/; /*if using % height, make this large enough to fit scrollbar arrows*/
  max-height: 100%;
  overflow: /*scroll*/auto; /*set to auto if using fixed or % width; else scroll*/
  overflow-x: hidden;
  border: 1px solid black; /*border around table body*/
}
.scrollingtable > div > div:after {background: white;} /*match page background color*/
.scrollingtable > div > div > table {
  width: 100%;
  border-spacing: 0;
  margin-top: -20px; /*inverse of column header height*/
  margin-right: 17px; /*uncomment if using % width*/
}
.scrollingtable > div > div > table > caption {
  position: absolute;
  top: -20px; /*inverse of caption height*/
  margin-top: -1px; /*inverse of border-width*/
  width: 100%;
  font-weight: bold;
  text-align: center;
}
.scrollingtable > div > div > table > * > tr > * {padding: 0;}
.scrollingtable > div > div > table > thead {
  vertical-align: bottom;
  white-space: nowrap;
  text-align: center;
}
.scrollingtable > div > div > table > thead > tr > * > div {
  display: inline-block;
  padding: 0 6px 0 6px; /*header cell padding*/
}
.scrollingtable > div > div > table > thead > tr > :first-child:before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  height: 20px; /*match column header height*/
  border-left: 1px solid black; /*leftmost header border*/
}
.scrollingtable > div > div > table > thead > tr > * > div[label]:before,
.scrollingtable > div > div > table > thead > tr > * > div > div:first-child,
.scrollingtable > div > div > table > thead > tr > * + :before {
  position: absolute;
  top: 0;
  white-space: pre-wrap;
  color: white; /*header row font color*/
}
.scrollingtable > div > div > table > thead > tr > * > div[label]:before,
.scrollingtable > div > div > table > thead > tr > * > div[label]:after {content: attr(label);}
.scrollingtable > div > div > table > thead > tr > * + :before {
  content: "";
  display: block;
  min-height: 20px; /*match column header height*/
  padding-top: 1px;
  border-left: 1px solid black; /*borders between header cells*/
}
.scrollingtable .scrollbarhead {float: right;}
.scrollingtable .scrollbarhead:before {
  position: absolute;
  width: 100px;
  top: -1px; /*inverse border-width*/
  background: white; /*match page background color*/
}
.scrollingtable > div > div > table > tbody > tr:after {
  content: "";
  display: table-cell;
  position: relative;
  padding: 0;
  border-top: 1px solid black;
  top: -1px; /*inverse of border width*/
}
.scrollingtable > div > div > table > tbody {vertical-align: top;}
.scrollingtable > div > div > table > tbody > tr {background: white;}
.scrollingtable > div > div > table > tbody > tr > * {
  border-bottom: 1px solid black;
  padding: 0 6px 0 6px;
  height: 20px; /*match column header height*/
}
.scrollingtable > div > div > table > tbody:last-of-type > tr:last-child > * {border-bottom: none;}
.scrollingtable > div > div > table > tbody > tr:nth-child(even) {background: gainsboro;} /*alternate row color*/
.scrollingtable > div > div > table > tbody > tr > * + * {border-left: 1px solid black;} /*borders between body cells*/
</style> 
```

* * *

# javascript - javascript 图像幻灯片适用于所有其他浏览器，但不适用于 IE

> ID：15303709
> 
> 赞同：0
> 
> 时间：2013-03-08T21:34:22.350
> 
> 标签：javascript

我有一个图像幻灯片，可以在我尝试的任何其他浏览器中使用，但不能在 IE 中使用——它除了显示主图像之外什么都不做。请有人告诉我我不会发疯，这是一个我看不到的简单修复。

非常感谢

米奇杰。

下面的代码：

```
<div id="image_slide"><img src="images/.......jpg" id="slideit" name="slideit" border="0">
<script type="text/javascript">
var dimages=new Array();
  var numImages=3;
  dimages[0]=new Image();
  dimages[0].src="images/.......jpg";
  dimages[1]=new Image();
  dimages[1].src="images/.......jpg";
  dimages[2]=new Image();
  dimages[2].src="images/.......jpg";
var curImage=-1;
function swapPicture()
{
  if (document.images)
  {
    var nextImage=curImage+1;
    if (nextImage>=numImages)
      nextImage=0;
    if (dimages[nextImage] && dimages[nextImage].complete)
    {
      var target=0;
      if (document.images.slideit)
        target=document.images.slideit;
      if (document.all && document.getElementById("slideit"))
        target=document.getElementById("slideit");
      if (target)
      {
        target.src=dimages[nextImage].src;
        curImage=nextImage;
      }
      setTimeout("swapPicture()", 1500);
    }
    else
    {
      setTimeout("swapPicture()", 150);
    }
  }
}
setTimeout("swapPicture()", 1500);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:49:24.450

试试这个简化的测试，想法是在开始交换之前加载你的图片，并且不需要`.complete`那样测试。

```
<html>
  <head>
    <title>Example</title>
  </head>
  <body>

  <div id="image_slide"><img src="intro.jpg" 
       id="slideit" name="slideit" border="0"></div>

  <script type="text/javascript">
    var curImage  = -1;
    var numImages = 2;
    var dimages   = new Array();

    function loadPictures()
    {
      dimages[0]     = new Image();
      dimages[0].src = "test1.jpg";
      dimages[1]     = new Image();
      dimages[1].src = "test2.jpg";

      setTimeout(swapPicture, 3000);
    }

    function swapPicture()
    {
      var nextImage = curImage + 1;
      if (nextImage >= numImages)
          nextImage = 0;

      document.images.slideit.src = dimages[nextImage].src;
      curImage = nextImage;
      setTimeout(swapPicture, 1500);
    }

    setTimeout(loadPictures, 1500);

  </script>

  </body>
</html> 
```

# c# - Windows Azure MessageLockLostException

> ID：15303711
> 
> 赞同：9
> 
> 时间：2013-03-08T21:34:30.423
> 
> 标签：c#, azure, azureservicebus, azure-servicebus-queues

我在使用 Azure 消息总线队列时遇到问题。

我已经`MessageLockLostException`抛出并且*请求操作没有在分配的 00:01:10 超时内完成。分配给此操作的时间可能是较长超时的一部分*。

我已将队列设置为`ReceiveMode.PeekLock`.

我也检查

```
if(message.LockedUntilUtc.Minute <= 1)
    message.RenewLock(); 
```

为什么会发生这种情况，是什么导致锁失效？我从你收到的地方开始阅读，默认情况下你有 5 分钟。这个过程通常需要更长的时间。我想更新锁，但这不是很好。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-08T23:35:07.240

[LockDuration](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.servicebus.messaging.queuedescription.lockduration.aspx)是队列的属性。您通常在创建队列时设置它。这是`Queue`级别属性，不能在消息库上更改。你读到的，很可能是说这个持续时间不能超过 5 分钟。默认值为 1 分钟，这就是您遇到问题的原因。以及为什么您要在 70 秒后面对它 - 我假设检查此条件的逻辑每 10 秒执行一次。

所以我建议您创建或修改您的 Queue 以将[LockDuration](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.servicebus.messaging.queuedescription.lockduration.aspx)属性设置为 5 分钟。然后，在适当的时候对您的消息进行[RenewLock 操作。](http://msdn.microsoft.com/en-us/library/microsoft.servicebus.messaging.brokeredmessage.renewlock.aspx)

# c# - 将标准 linq 查询转换为泛型以实现

> ID：15303727
> 
> 赞同：1
> 
> 时间：2013-03-08T21:35:31.727
> 
> 标签：c#, linq

我有以下带有 linq 查询的代码：

```
class Program
{
    static void Main(string[] args)
    {
        var allProfessionals = new Collection<Professional>
         {
             new Professional { Name = "Bruno Paulovich Silva" },
             new Professional { Name = "Ivan Silva Paulovich Bruno"},
             new Professional { Name = "Camila Campos"}
         };

        var namesSearch = new[] {"bruno", "silva"};

        var query = namesSearch.Aggregate(allProfessionals.AsQueryable(), (current, nome) => current.Where(oh => oh.Name.ToLower().Contains(nome.ToLower())));

        foreach (var res in query.ToList())
        {
            Console.WriteLine(res.Name.ToLower());
        }
    }
} 
```

结果是：

```
Bruno Paulovich Silva
Silva Paulovich Bruno 
```

我想知道如何将 linq 查询聚合转换为可以在其他时间重用的通用方法。

在下面的示例中，我展示了我对项目中使用的通用查询的理解：

```
public IQueryable<T> QueryBy(Expression<Func<T, bool>> criteria)
{
    return DbSet.Where(criteria);
} 
```

ps：对不起我的英语不好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:53:25.167

坚持基本要素和与脚本相同的输出，它将类似于：

```
class Program
{
    static void Main(string[] args)
    {
        var allProfessionals =
            new Collection<Professional>
                {
                    new Professional {Name = "Bruno Paulovich Silva"},
                    new Professional {Name = "Ivan Silva Paulovich Bruno"},
                    new Professional {Name = "Camila Campos"}
                };

        var namesSearch = new[] {"bruno", "silva"};

        var items = allProfessionals
            .Select(x => x.Name)
            .ContainsAll(namesSearch);

        foreach (var res in items)
        {
            Console.WriteLine(res);
        }
    }
}

static class Extensions
{
    public static IEnumerable<string> ContainsAll(this IEnumerable<string> haystacks, IEnumerable<string> needles)
    {
        var lowerNeedles = needles.Select(x => x.ToLower()).ToList();
        var lowerHay = haystacks.Select(x => x.ToLower()).ToList();

        // note that Regex may be faster than .Contains with larger haystacks
        return lowerNeedles
            .Where(hay => lowerHay.All(hay.Contains)); // or .Any(), depending on your requirements
    }
} 
```

请注意，如果您使用 LinqToSQL 或类似技术，则可能不会使用表索引。这可能会使查询变得非常慢。

为了使其符合所提到的`QueryBy<T>`，它可能看起来像：

```
 var items = allProfessionals.QueryBy(
            professional => namesSearch
                .Select(needle => needle.ToLower()) // convert all to lower case
                .All(hay => professional.Name.ToLower().Contains(hay))); // then try to search for a professional that matches all nameSearch. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:22:20.957

这是我如何实现 LikeBy 的方法，其中字符串数组等效于包含所有内容。

```
public IQueryable<T> LikeBy(string[] strings, Func<IQueryable<T>, string, IQueryable<T>> criteria)
{
    return strings.Aggregate(GetAll(), criteria);
} 
```

这里是如何实现的例子：

```
public IQueryable<ViaturaFuncao> FindByNome(string names)
{
    return Uow.Professional.LikeBy(names.Trim().Split(' '),
                                       (professional, nameProfessional) =>
                                       professional.Where(
                                           f => f.Name.ToLower().Contains(nameProfessional.ToLower())));
} 
```

PS：在项目中，我们使用 UnitOfWork，这就是为什么在实体之前有 UOW

# java - Mahout 中 RandomAccessSparseVectors 的余弦距离

> ID：15303728
> 
> 赞同：1
> 
> 时间：2013-03-08T21:35:36.833
> 
> 标签：java, vector, mahout, cosine-similarity

我是 Mahout 的新手，最近一直在将我以前的许多机器学习代码转换为这个框架。在很多地方，我使用向量之间的余弦相似度来进行聚类、分类等。然而，研究 Mahout 的[距离方法](https://builds.apache.org/job/Mahout-Quality/javadoc/org/apache/mahout/common/distance/CosineDistanceMeasure.html#distance%28double,%20org.apache.mahout.math.Vector,%20org.apache.mahout.math.Vector%29)，却给了我很大的惊喜。在下面的代码片段中，维度和浮点值取自我的一个程序的实际输出（在这里并不重要）：

```
import org.apache.mahout.math.RandomAccessSparseVector;
import org.apache.mahout.common.distance.CosineDistanceMeasure;

public static void main(String[] args) {
    RandomAccessSparseVector u = new RandomAccessSparseVector(373);
    RandomAccessSparseVector v = new RandomAccessSparseVector(373);
    u.set(24, 0.4526985183337534);
    u.set(55, 0.5333219834564495);
    u.set(54, 0.5333219834564495);
    u.set(53, 0.4756042214095471);

    v.set(57, 0.6653016370845252);
    v.set(56, 0.6653016370845252);
    v.set(11, 0.3387439495921685);

    CosineDistanceMeasure cosineDistanceMeasure = new CosineDistanceMeasure();
    System.out.println(cosineDistanceMeasure.distance(u, v));
} 
```

输出是`1.0`。不应该`0.0`吗？

将此与 的输出相结合`cosineDistanceMeasure.distance(u, u)`，我意识到我正在寻找的是`1 - cosineDistanceMeasure.distance(u, v)`. 但这种*逆转*对我来说毫无意义。知道为什么以这种方式实施吗？还是我错过了一些非常明显的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:54:53.023

当两点“接近”时，它们从原点作为向量形成的角度很小，接近于零。接近 0 的角度的余弦值接近 1，并且余弦值随着角度向 90 度然后向 180 度方向减小。

所以余弦随着距离的增加而减小。这就是为什么两个向量之间夹角的余弦本身不能作为距离度量的原因。制作距离度量的“规范”方法是 1 - 余弦；这是一个适当的指标。

# entity-framework - 在即时窗口中获取 EntityValidationErrors' 列表

> ID：15303730
> 
> 赞同：6
> 
> 时间：2013-03-08T21:35:49.450
> 
> 标签：entity-framework, visual-studio-2012

当 VS 2012 中断时，如何在即时窗口中获取错误列表

> 一个或多个实体的验证失败。有关更多详细信息，请参阅“EntityValidationErrors”属性。

似乎没有一种简单的方法来显示它们，而无需创建一些代码修改来循环它们，如下所示：

```
foreach (var failure in ex.EntityValidationErrors)
    {
       string validationErrors="";

        foreach (var error in failure.ValidationErrors)
        {
           validationErrors+=error.PropertyName+"  "+error.ErrorMessage;
        }
    } 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-08T21:42:02.960

```
((System.Data.Entity.Validation.DbEntityValidationException)$exception) 
```

在 Watch 窗口中，您可以访问异常实例。您可以从那里查看错误集合。

我将其保留在我的监视列表中，以便在遇到该异常时可以刷新。

# http - 当 HTTP 响应中包含用户名和密码时，客户端应如何处理 Location 字段？

> ID：15303736
> 
> 赞同：4
> 
> 时间：2013-03-08T21:36:10.060
> 
> 标签：http, http-headers, httpresponse

该规范没有提到如何处理由 Location 返回的 URI 中的用户名：密码，例如：

```
Location: http://user:secret@w3.org/hidden/pages 
```

**我们应该忽略这些吗？**这似乎没有意义，但我想知道如果它发生了怎么办（即服务器配置错误，一些管理员/程序员的奇怪想法......）

```
14.30 Location

The Location response-header field is used to redirect the recipient
to a location other than the Request-URI for completion of the request
or identification of a new resource. For 201 (Created) responses, the
Location is that of the new resource which was created by the request.
For 3xx responses, the location SHOULD indicate the server's preferred
URI for automatic redirection to the resource. The field value
consists of a single absolute URI.

       Location       = "Location" ":" absoluteURI

An example is:

       Location: http://www.w3.org/pub/WWW/People.html

      Note: The Content-Location header field (section 14.14) differs
      from Location in that the Content-Location identifies the original
      location of the entity enclosed in the request. It is therefore
      possible for a response to contain header fields for both Location
      and Content-Location. Also see section 13.10 for cache
      requirements of some methods. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:14:44.360

[RFC 2617](https://www.rfc-editor.org/rfc/rfc2617)可能有答案。从[第 3.3 节](https://www.rfc-editor.org/rfc/rfc2617#section-3.3)：

```
...For example
a server could be responsible for authenticating content that
actually sits on another server. It would achieve this by having the
first 401 response include a domain directive whose value includes a
URI on the second server, and an opaque directive whose value
contains the state information. The client will retry the request, at
which time the server might respond with a 301/302 redirection,
pointing to the URI on the second server. The client will follow the
redirection, and pass an Authorization header , including the
<opaque> data. 
```

所以我解释这意味着`Location`您从 HTTP 重定向返回的标头实际上根本不应该包含这些`user:secret@`部分，只包含您提供的示例 URL 的其余部分，并且您（客户端）将负责记住用户/pass 你在`Authorization`被重定向的原始请求的标头中发送，并在第二个请求中再次传递相同的标头。

**更新**

此外，[RFC 2396 第 3.2.2 节](https://www.rfc-editor.org/rfc/rfc2396#section-3.2.2)有一些关于在 URL 中使用用户/密码的内容：

```
Some URL schemes use the format "user:password" in the userinfo
field. This practice is NOT RECOMMENDED, because the passing of
authentication information in clear text (such as URI) has proven to
be a security risk in almost every case where it has been used. 
```

# android - 为什么应用程序无法启动此代码？

> ID：15303740
> 
> 赞同：0
> 
> 时间：2013-03-08T21:36:25.380
> 
> 标签：android, connection

所以我在这里找到[了这个答案](https://stackoverflow.com/questions/6493517/android-detect-if-device-has-internet-connection)。但是我无法让它运行，因为在使用 Context 类型参数调用它时未定义 isNetworkAvailable 函数。这是我使用的代码：

```
private boolean isNetworkAvailable(Context context)
{
    ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo ni = cm.getActiveNetworkInfo();
    if(ni!= null && ni.isConnected())
    {
        return true;
    }
    return false;
}
public boolean dostupanInternet(Context context)
{
    if(isNetworkAvailable(context))
    {
        try
        {
            HttpURLConnection url = (HttpURLConnection) (new URL("http://www.google.com").openConnection());
            url.setRequestProperty("User-Agent", "test");
            url.setRequestProperty("Connection", "close");
            url.setConnectTimeout(1000);
            url.connect();
            return(url.getResponseCode() == 200);
        }
        catch(IOException e)
        {
            Log.e("LOG_TAG","Povezivanje sa internetom nije uspelo",e);
        }
    }
    else
        {
            Log.d("LOG_TAG", "Povezivanje sa internetom nije uspelo");
        }
    return false;
} 
```

但是当我运行它时，它会返回一个致命错误并强制应用程序关闭。所以我的问题是 - 是什么导致了致命错误（显然是未处理的异常）以及什么代码可以让我通过互联网可用性检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:04:55.620

试试用这个方法

```
public boolean isConnectingToInternet(Context context){
    ConnectivityManager connectivity = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
      if (connectivity != null)
      {
          NetworkInfo[] info = connectivity.getAllNetworkInfo();
          if (info != null)
              for (int i = 0; i < info.length; i++)
                  if (info[i].getState() == NetworkInfo.State.CONNECTED)
                  {
                      return true;
                  }

      }
      return false;
} 
```

# matlab - 在 MATLAB 中创建带有字符串和浮点数的 maxtric

> ID：15303746
> 
> 赞同：0
> 
> 时间：2013-03-08T21:36:53.087
> 
> 标签：matlab, matrix

我想要一个矩阵，第一行是标题（我使用的每种不同近似方式的磁场）和我使用的每个数据表的结果。

我试图得到这个结果（示例）：

```
FieldB =  
B1   B2   B3  
1.0  2.0  3.0  
1.1  2.7  2.3  
...  
...  
...  
0.7  2.4  5.8 
```

现在，我正在这样编程

```
B1(1,1)= 'Field 1';  
B2(1,1)= 'Field 2';  
B3(1,1)= 'Field 3';  
for i=1:n  
    B1(i+1,1)=polyn(1)*Zsplit1(i)/10^9+polyn(2)*10^-3;  
    B2(i+1,1)=polyn(1)*Zsplit2(i)/10^9+polyn(2)*10^-3;  
    B3(i+1,1)=polyn(1)*Zsplit3(i)/10^9+polyn(2)*10^-3;  
end  
FieldB = [B1 B2 B3] 
```

给出的错误是：

```
Subscripted assignment dimension mismatch.

Error in 3field (line 32)
B1(1,1)= 'Field 1'; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:55:36.370

在 matlab 中，标准矩阵中不能同时包含数字和字符串。因此，您将需要使用另一种数据类型来实现您的目标。

在您的情况下，结构（[请参见此处](http://yagtom.googlecode.com/svn/trunk/html/dataStructures.html#59)）将是最自然的选择：

```
B(1).name = 'Field 1';
B(2).name = 'Field 2';
B(3).name = 'Field 3';

for i=1:n  
    B(1).data = polyn(1)*Zsplit1(i)/10^9+polyn(2)*10^-3;
    B(2).data = polyn(1)*Zsplit2(i)/10^9+polyn(2)*10^-3;
    B(3).data = polyn(1)*Zsplit3(i)/10^9+polyn(2)*10^-3;
end 
```

您也可以使用[单元格数组](http://yagtom.googlecode.com/svn/trunk/html/dataStructures.html#13)

```
B{1,1} = 'Field 1';
B{1,2} = 'Field 2';
B{1,3} = 'Field 3';
...
for i=1:n  
    B{2,1} = polyn(1)*Zsplit1(i)/10^9+polyn(2)*10^-3;
    B{2,2} = polyn(1)*Zsplit2(i)/10^9+polyn(2)*10^-3;
    B{2,3} = polyn(1)*Zsplit3(i)/10^9+polyn(2)*10^-3;
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:54:43.333

您不能在 Matlab 中将字符串存储在数组中。尝试使用元胞数组。您只需在此处更改`[]`为`{}`.

# linux - 块层中的重复 LBA 请求

> ID：15303747
> 
> 赞同：2
> 
> 时间：2013-03-08T21:36:53.607
> 
> 标签：linux, asynchronous, io, linux-kernel, aio

我正在使用 blktrace 来了解具有高 IO 负载的多线程 IO 工作负载中的块层行为。我可以在块层中观察到一些重复的 LBA 请求。例如，在我的原始工作负载中，我只有一个对 LBA 47568 的写入请求。但是，blktrace 显示 121 个请求写入 LBA 47568 !!! 下面是 blkparse 日志的一部分，它只过滤 I 事件（IO 插入到请求队列中）。我试图了解为什么会发生这种现象以及如何消除这种现象。我在 /sys/block/sdX/nomerge 中选择了 noop IO 调度程序和值 2 以避免 IO 合并。我提前感谢您的帮助。

```
 8 240  0     7539     0.073300123 32282  I  WS 47576 + 8 [a]
  8 240  5     4462     0.073303974 32281  I  WS 47568 + 8 [a]
  8 240 11     4462     0.073306337 32283  I  WS 47584 + 8 [a]
  8 240  6     4462     0.073307970 32284  I  WS 47592 + 8 [a]
  8 240 10     4462     0.073309010 32285  I  WS 47600 + 8 [a]
  8 240  5     4466     0.073311526 32281  I  WS 47568 + 8 [a]
  8 240  5     4469     0.073316215   175  I  WS 47568 + 8 [kworker/5:1]
  8 240  7     4462     0.073352932 32286  I  WS 47608 + 8 [a]
  8 240  7     4466     0.073354061 32286  I  WS 47568 + 8 [a]
  8 240  8     4468     0.073358935 32280  I  WS 47624 + 8 [a]
  8 240  4     4468     0.073360550 32279  I  WS 47616 + 8 [a]
  8 240  8     4472     0.073362145 32280  I  WS 47568 + 8 [a]
  8 240  5     4473     0.073362711 32281  I  WS 47632 + 8 [a]
  8 240  5     4477     0.073364177 32281  I  WS 47568 + 8 [a]
  8 240  0     7545     0.073407427 32282  I  WS 47640 + 8 [a]
  8 240  0     7549     0.073409589 32282  I  WS 47568 + 8 [a] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T01:24:08.740

好的，我来回答我的问题。事实证明，工作负载中的未完成 IO 数量大于通用设备驱动程序队列大小`(/sys/block/sdX/device/queue_depth)`。因此，有些请求在这个队列满的时候没有插入到这个队列中，导致了这样的现象。

# php - 从目录中存在的所有图片中选择第一张图片

> ID：15303748
> 
> 赞同：-3
> 
> 时间：2013-03-08T21:36:57.277
> 
> 标签：php

我做了一个函数，它打印目录内所有带有路径的文件名。但我只想获取第一张图像，如果目录中没有图像，则打印带有图像的自定义路径。有什么帮助吗？

```
function getphotos($album_name)
{
    //path to directory to scan
    $dir = ROOTPATH . "/data/img/gallery/$album_name/";

    //get all files
    $images = glob($dir . "{*.jpg,*.gif,*.jpeg}", GLOB_BRACE);

$ret = "";

    foreach($images as $image)
    {
        $ret .= '<img src="'.$image.'" />';
    }

   return $ret;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:54:21.847

```
$ret = '<img src="' . (empty($images) ? DEFAULTIMG : $images[0]) . '/>'; 
```

# css - Joomla 1.5 到 2.5 CSS 更改

> ID：15303752
> 
> 赞同：0
> 
> 时间：2013-03-08T21:37:13.083
> 
> 标签：css, joomla

我最近将一个 Joomla 网站从 1.5 更新到了 2.5。1.5 的主题是 Beez 模板的定制版本。我将模板转换为 2.5，除了主要内容块外，一切正常，看起来 CSS 不适合它们。

该网站是[http://www.nocbor.com](http://www.nocbor.com)

主要文章（*Welcome to NOCBOR*）曾经放在单独的盒子里，文章曾经并排放置。

这是由于升级模板并可能破坏 CSS 造成的吗？或者我需要在管理面板中从 1.5 更改为 2.5 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T23:10:00.283

Joomla 2.5 的默认布局与 1.5 不同，只需检查浏览器中的 html，您会在树上发现一些差异，即缺少 div 或名为“item”的 div 变成了......只需考虑这些差异并相应地更新您的CSS。

# html - 为每组注册表做 - Rails

> ID：15303755
> 
> 赞同：0
> 
> 时间：2013-03-08T21:37:23.947
> 
> 标签：html, css, ruby-on-rails-3, foreach

我有麻烦

我正在使用导轨 3.2.8

我有一个名为@tools 的包含90 个位置的数组。

我创建了一个 CSS 样式来将这个列表打印为一个简单的 HTML 报告，所以问题就从这里开始了。我有一个名为“page-break”的 div 类，但我希望将这个 div 插入到每个 33 个寄存器的代码中。

有没有办法将数组分成 33 个寄存器组并在最后添加 div 分页符？

例如。

33的第一块

```
<table>
<thead>
#table header
</thead> 

<tbody>
# block of 33 registers coming from array
</tbody>

</table>

<div class="page-break">

Second block of 33

<table>
<thead>
#table header
</thead> 

<tbody>
# Second block of 33 registers coming from array
</tbody>

</table>
<div class="page-break"> 
```

等，直到阵列上的注册表结束。有人知道这样做的优雅方法吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T23:05:14.407

`each_slice`是处理这个问题的好方法。您可以执行以下操作：

```
<% @tools.each_slice(33) do |page| %>
   <table>
      <thead>
         #table header
      </thead> 
      <tbody>
         <% page.each do |tool| %>
         ...
         <% end %>
      </tbody>
   </table>
   <div class="page-break" />
<% end %> 
```

# javascript - 更改 URL 的 UserInput 不适用于多个菜单

> ID：15303756
> 
> 赞同：-1
> 
> 时间：2013-03-08T21:37:25.623
> 
> 标签：javascript

我有一个用户输入表单，其中包含多个基于用户选择显示的下拉菜单。当用户从第二个下拉列表中选择一个选项时，我想将该选择附加到一个 url。

这是我正在使用的内容：http: [//jsfiddle.net/Sxz4R/142/](http://jsfiddle.net/Sxz4R/142/)

这是有问题的JS：

```
function changeText2(){
   var userInput = document.getElementById('userInput').value;
   var lnk = document.getElementById('lnk');
   lnk.href = "http://google.com/?q=" + encodeURIComponent(userInput);
   lnk.innerHTML = lnk.href; 
```

问题是一旦设置了链接，如果从第一个下拉菜单中选择了不同的选项，它将不会再次更改。

复制：

1) 选择颜色列表

2) 选择一种颜色——链接会改变

不提神醒脑...

1）从下拉列表中选择“数字列表”

2) 选择一个数字——链接不变

如果用户决定从第一个菜单中选择一个新选项，我该如何更改链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:57:07.163

ID 是唯一的，但您使用相同的 ID 两次 - 这是一个禁忌。改为使用一个类。您还应该摆脱那些使用`javascript:`.

这是一个更新的[小提琴](http://jsfiddle.net/Sxz4R/143/)。

# python - Python 聊天客户端未保持打开状态

> ID：15303758
> 
> 赞同：0
> 
> 时间：2013-03-08T21:37:26.923
> 
> 标签：python, chat

我最近开始开发一个用于学习目的的服务器-客户端聊天协议（后来我想用这种通信做更多的事情，但现在就足够了。不用说，我还处于 Python 这部分的学习阶段，但是我已经修改了一些我在网上找到的服务器和客户端的示例。从我目前看到的情况来看，通信运行良好，但是每次我想向服务器发送消息时都必须重新启动客户端。这里是代码：

服务器：

```
from twisted.internet import reactor, protocol
from twisted.protocols import basic

class Echo(protocol.Protocol):

    def dataReceived(self, data):
        "As soon as any data is received, write it back."
        self.transport.write(data)

class MyChat(basic.LineReceiver):
    def connectionMade(self):
        print "Got new client!"
        self.factory.clients.append(self)

    def connectionLost(self, reason):
        print "Lost a client!"
        self.factory.clients.remove(self)

    def dataReceived(self, data):
        print "received", repr(data)
        for c in self.factory.clients:
            c.message(data)

    def message(self, message):
        self.transport.write(message + '\n')

def main():
    """This runs the protocol on port 8000"""
    factory = protocol.ServerFactory()
    factory.protocol = MyChat
    factory.clients = []
    reactor.listenTCP(8000,factory)
    reactor.run()

# this only runs if the module was *not* imported
if __name__ == '__main__':
    main() 
```

客户：

```
from twisted.internet import reactor, protocol

# a client protocol

class EchoClient(protocol.Protocol):
    """Once connected, send a message, then print the result."""

    def connectionMade(self):
        self.transport.write("hello, world!")

    def dataReceived(self, data):
        "As soon as any data is received, write it back."
        print "Server said:", data
        self.transport.loseConnection()

    def connectionLost(self, reason):
        print "connection lost"

class EchoFactory(protocol.ClientFactory):
    protocol = EchoClient

    def clientConnectionFailed(self, connector, reason):
        connector.connect()
        print "Connection failed - goodbye!"
        reactor.stop()

    def clientConnectionLost(self, connector, reason):
        connector.connect()
        print "Connection lost - goodbye!"
        reactor.stop()

# this connects the protocol to a server runing on port 8000
def main():
    f = EchoFactory()
    client = EchoClient()
    reactor.connectTCP("localhost", 8000, f)
    reactor.run()

# this only runs if the module was *not* imported
if __name__ == '__main__':
    main() 
```

我忘记添加什么以便我可以将多个客户端连接到服务器并保持连接？我看了[这里](https://stackoverflow.com/questions/4530845/python-twisted-client-connection-lost)和[这里](http://twistedmatrix.com/trac/browser/trunk/doc/core/examples/stdin.py)（第一个似乎是同一类型的问题），但我仍然对如何解决这个问题感到困惑。任何建议表示赞赏。谢谢！

# performance - 如何减少此 Google Apps 脚本的执行时间？

> ID：15303762
> 
> 赞同：2
> 
> 时间：2013-03-08T21:37:37.633
> 
> 标签：performance, google-apps-script

我编写了一个脚本，它从电子表格中获取行数据并循环遍历它们，如果行的数据满足某些条件（例如，有电话号码并且尚未发送），则调用一个函数来发送 SMS。

然而，在添加大约 600 行之后，脚本执行时间超过了它的限制，根据我的研究，这似乎是 5 分钟。我正在使用 JavaScript 对象来读取数据，并使用 for 循环来遍历行。

如果有可能让它更快，谁能给我打电话？我对编程很陌生，但是对于所有这些计算能力来说，这似乎是一项轻而易举的任务，我不明白为什么需要这么长时间

提前致谢！

这是我正在使用的函数的代码：

```
// Will send SMS on the currently active sheet
function sendSms() {

  // Use the send sms menu to trigger reconcile
  var user = ScriptProperties.getProperty(PROPERTY_USER_RECONCILE);
  if (user == null)
    reconcileUser();

  // The sheets
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Registo");
  var settingsSheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Settings");

  // Fetch values for each row in the Range.
  var startRow = 2;
  var apiKey = settingsSheet.getRange("B2").getValue();
  var apiSecret = settingsSheet.getRange("B3").getValue();
  var prefix = settingsSheet.getRange("B4").getValue();
  var numRows = sheet.getMaxRows() - 1;
  var numCols = 16;
  var statusColNum = 15;  // IMPT: To keep track status in col 15
  var dataRange = sheet.getRange(startRow, 1, numRows, numCols);

  // Make sure there is API key and secret
  if (apiKey == "" || apiSecret == "") {
    Browser.msgBox("You MUST fill in your API key and secret in Settings sheet first!");
    return;
  }

  // Create one JavaScript object per row of data.
  var objects = getRowsData(sheet, dataRange);

  var totalSent = 0;

  for (var i = 0; i < objects.length; ++i) {
    // Get a row object
    var rowData = objects[i];
    var ss = SpreadsheetApp.getActiveSpreadsheet();
    var templateSheet = ss.getSheetByName("SMS Modelo");
    var template = templateSheet.getRange("A1").getValue();

    // jump loop iteration if conditions not satisied
    if (rowData.resolv == "x" || rowData.contactoUtente == null || rowData.contactoUtente == "" || rowData.reserv == null || rowData.reserv == "" || rowData.cont == "x" || rowData.sms !== null) continue;
      var message = fillInTemplateFromObject(template, rowData);
      var senderName = "Farm Cunha"
      var mobile = rowData.contactoUtente;
      // Send via Nexmo API
      var response = nexmoSendSms(apiKey, apiSecret,"+351" + mobile, message, senderName);
      if (response.getResponseCode() == 200) {
        var object = JSON.parse(response.getContentText());
        if (object.messages[0]['status'] == "0") {
          // Set to QUEUE status - We assumed SENT, as we don't handle delivery status.
          //sheet.getRange(startRow + i, statusColNum).setValue(STATUS_QUEUE);
          sheet.getRange(startRow + i, statusColNum).setValue(STATUS_SENT);
          // Set the reference id
          sheet.getRange(startRow + i, 19).setValue(object.messages[0]['message-id']);
          // sheet.getRange(startRow + i, statusColNum+3).setValue(new Date()); linha pode ser activada para fazer timestamp do envio
          totalSent++;
          }
        else {
          // If status is not 0, then it is an error.
          // Set status to the error text
          sheet.getRange(startRow + i, statusColNum).setValue(object.messages[0]['error-text']);
        }
      }
      else {
        // Non 200 OK response
        sheet.getRange(startRow + i, statusColNum).setValue("Error Response Code: " + response.getResponseCode);
      }
      SpreadsheetApp.flush();
      // Need a wait. Need to throttle else will have "Route Busy" error.
      Utilities.sleep(2000);
  }

  // Update total sent
  var lastTotalSent = parseInt(ScriptProperties.getProperty(PROPERTY_SMS_SENT_FOR_RECONCILE));
  if (isNaN(lastTotalSent)) lastTotalSent = 0;
  ScriptProperties.setProperty(PROPERTY_SMS_SENT_FOR_RECONCILE, (lastTotalSent + totalSent).toString());
  Logger.log("Last sent: " + lastTotalSent + "  now sent: " + totalSent);
  reconcileApp();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T22:10:35.570

您的循环中有一些太耗时的事情：电子表格读数和 API 调用 + 2 秒睡眠！

我显然会建议你把这些从循环中拿出来（特别是模板表阅读总是一样的！）。一种可能的解决方案是检查行对象的条件并将有效条目保存在数组中......然后在此数组中迭代以调用 API。

如果这仍然太长，则分小批进行，将部分迭代的结束位置保存在 scriptproperties 中，并使用计时器触发器，每 5 分钟继续该过程直到完成（并在最后终止触发器）。

这个论坛上有一些这种“机制”的例子，我最近提出的一个例子是[here](https://stackoverflow.com/questions/15234882/need-help-optimizing-a-google-apps-script-that-labels-emails/15235549#15235549)（它更像是一个草稿，但想法就在那里）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T12:47:54.000

好的，正如 Serge（谢谢）告诉我的那样，我已经通过将这 3 行从循环中取出来解决了这个问题：

```
 var ss = SpreadsheetApp.getActiveSpreadsheet();
    var templateSheet = ss.getSheetByName("SMS Modelo");
    var template = templateSheet.getRange("A1").getValue(); 
```

这太简单了，我不知道我怎么没看到。

这个简单的更改使脚本更快。例如，遍历 600 行需要 5 分钟以上。现在，超过 5000 行只需要几秒钟。

# bash - 从文件的每一行中提取最后一个字符

> ID：15303763
> 
> 赞同：1
> 
> 时间：2013-03-08T21:37:38.310
> 
> 标签：bash

我正在学习 bash，我有一个包含 500000 行的文件，每个文件都有这种模式：

**NNNNNNNN NNNNNN C**

N = 数字 | C = 字符 AZ | 第一个空格是制表符，第二个是常规空格。

我想创建一个包含最后一部分的文件，从第二列数字（**NNNNNN C**）开始，使用 bash 脚本。我能够做到这一点：

```
i=1
while [ $i -le 500000 ]
do
    echo $i
    sed $i"q;d" $1 | tail -c 9 >> file
    ((i++))
done 
```

但这需要很长时间，因为它将每一行逐一写入文件。我怎样才能更快地做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:49:02.147

您可以使用`read`将每一行拆分为单词，然后打印您想要的单词：

```
while read a b c; do
  echo "$b $c"
done < input_file > output_file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:49:35.237

是的，这需要一段时间。虽然使用 bash 值得称赞您的 DIY 精神，但此类任务通常由专为此类任务设计的 unix 工具来处理。

尝试这个

```
 sed 's/^.*<T>//' file > outFile 
```

'\t' 或文字制表符在哪里`<T>`，具体取决于您的 sed 版本。

这将删除文件中每一行的第一个选项卡之前的所有内容，然后将剩下的内容打印到 outFile 中。

IHTH。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T21:51:02.680

Use [**`cut`**](http://www.manpagez.com/man/1/cut/)，默认情况下使用制表符作为分隔符。

读取`infile`字段 ( `-f`) 2 向前 ( `2-`) 并将其放入`file`：

```
cut -f2- infile > file 
```

# highcharts - 带有数据插件的 HighCHarts 3.0

> ID：15303765
> 
> 赞同：0
> 
> 时间：2013-03-08T21:37:55.833
> 
> 标签：highcharts

在新的 HighCharts 3.0 下 - 它们包括一个数据模块插件（[此处](http://jsfiddle.net/highcharts/AYYCv/)为示例）。实际脚本在[这里](https://github.com/highslide-software/highcharts.com/blob/master/js/modules/data.src.js)

我有一张像

```
<table id="data-table">
    <thead>
        <tr>
            <th>Date</th>
            <th>Name</th>
            <th>Address</th>
            <th>Business</th>
            <th>Price</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1/01/2013</td>
            <td>John Apple</td>
            <td>51 Blah Street, CA</td>
            <td>Yes</td>
            <td>$54.33</td>
        </tr>
    </tbody>
</table> 
```

我想弄清楚如何以新格式映射日期和价格？所以价格是Y，日期是X，系列是Y，X

目前，该示例仅显示如何映射整个表 - 但我只想映射 2 列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:50:07.207

数据模块是取还是整表，或者你可以指定： * - endColumn : Integer * 在表格输入数据中，第一行（索引为0）使用。默认为包含数据的最后一列。* * - endRow : Integer * 在表格输入数据中，要使用的最后一行（索引为 0）。默认为包含数据的最后一行。

没有选项可以仅指定一些列/行。

# c - 如何确定一个 C 文件是否是 gcc 可编译的？

> ID：15303768
> 
> 赞同：-7
> 
> 时间：2013-03-08T21:38:05.027
> 
> 标签：c, visual-studio, gcc

我的大学项目的要求之一是我的 C 文件必须是 gcc 可编译的。

我不知道这意味着什么，也不知道如何确定 C 文件是否可编译。如何做到这一点？

目前，我正在使用 VS 2012 编译我的文件。提交代码的部分要求是它必须能够在命令行上执行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T21:41:14.850

下载 GCC 并尝试用它编译文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T22:15:20.027

在 Windows 上开始使用 GCC 编译的最简单方法是安装捆绑 MinGW 的 gcc 环境的 Code::Blocks 版本。

[http://www.codeblocks.org/downloads/5#windows](http://www.codeblocks.org/downloads/5#windows)

您正在寻找下载`codeblocks-10.05mingw-setup.exe`

当您使用该版本的 Code::Blocks 创建 C 或 C++ 项目时，gcc 将成为默认编译器，一切就绪。（直到您开始需要执行 I/O 多路复用之类的操作，此时您将需要真正的 Unix 安装）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T22:07:05.077

不要使用特定于 Windows 或 MSVC 的标头或库函数。例如（是的，我在这里约会自己）“conio.h”文件和其中声明的函数不被 gcc 识别。

[如果您将自己限制在语言标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)中定义的内容，那么您的代码将在 gcc 下编译。

# visual-studio-2012 - 清除最近以避免混淆

> ID：15303770
> 
> 赞同：0
> 
> 时间：2013-03-08T21:38:24.607
> 
> 标签：visual-studio-2012, solution, visual-studio-project

除了删除解决方案/文件夹之外，有没有办法从 Visual Studio 菜单中删除某些项目/解决`FILE`方案？`Recent Projects and Solutions`

我相信如果你删除它它会提示你，但这似乎有点矫枉过正。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:19:46.973

您可以通过修改注册表来做到这一点。有一个注册表项，如下所示：

```
HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0\ProjectMRUList 
```

对应于 Visual Studio 2012 ，`11.0`但可能与其他版本类似。在这里，您将看到多个条目，如下所示：

![在此处输入图像描述](../Images/a8212cb489f47ee76be8ed810b30e5c3.png)

从这里您可以删除您不想出现在最近的解决方案列表中的任何文件。

我发现此信息是社区反馈的一部分[：如何：从 Start Page 上的最近项目列表中删除项目](http://msdn.microsoft.com/en-us/library/aa991991%28v=vs.80%29.aspx)。

# python - 如何继续将以下 R 代码转换为 Python？

> ID：15303771
> 
> 赞同：0
> 
> 时间：2013-03-08T21:38:52.020
> 
> 标签：python, r

我有这样的 R 代码：

```
compute_enrichment <- function(dz_vec) {
        dz_vec <- dz_vec[!is.na(dz_vec)]
        n_module_genes <- length(intersect(module_genes,names(dz_vec)))
        module_genes_pct <- n_module_genes/length(module_genes)
        result <- list(escore=NA,norm_escore=NA,pvalue=NA,pct_module_genes=module_genes_pct)
        if (module_genes_pct >= MIN_PCT_MODULE_GENES) {
            result$escore <- abs(sum(dz_vec[module_genes],na.rm=T))
            rand_escores <- sapply(1:N_PERMUTATIONS, function(i) {
                abs(sum(sample(dz_vec,n_module_genes),na.rm=T))
            })
            result$norm_escore <- (result$escore - mean(rand_escores))/sd(rand_escores)
            result$pvalue <- length(which(rand_escores > result$escore))/length(rand_escores)
        }
        result
    } 
```

我想将此代码转换为 Python。是否有某种可用的脚本？小脑袋开始会很棒。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T21:53:02.193

一般的翻译问题会很困难（而且我不知道有任何自动翻译机制），其他人提出的使用建议`rpy`是一个很好的建议。

但是，如果您确实需要将此特定代码转换为 Python，则此代码的工作会更容易，因为它不包含许多矢量化操作。要使用的模式是：

1.  像这样的代码`dz_vec <- dz_vec[!is.na(dz_vec)]`变成了一个列表理解（尽管你必须有一个约定用于什么`NA`，这在 Python 中不存在，因此是一种测试这种情况的方法）。
2.  `length()`变成`len()`.
3.  `sapply`变成一个列表理解。
4.  `mean`和之类的函数`sd`可用于`numpy`（或者很容易自己编写）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T21:41:31.247

你不需要转换它，你可以使用[rpy从 python 调用它](http://rpy.sourceforge.net/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-08T21:46:43.543

我对这个问题的回答始终是：将其脚本化，然后使用 python 调用脚本`subprocess`。我喜欢这种方法（而不是安装 RPy），因为 RPy 不能与所有版本的 R 一起工作（这意味着如果您没有足够的运气使用正确的版本，则需要重新创建您的安装），而且您不必安装如果您的 R 脚本已经运行，则可以执行任何操作。

# java - 为什么我的 Android 代码中出现空指针错误？

> ID：15303772
> 
> 赞同：1
> 
> 时间：2013-03-08T21:39:04.373
> 
> 标签：java, android, nullpointerexception

我的代码中出现空点错误，并且日志指向此处

```
199     public void getPurchasedSubs () throws RemoteException {
200         Bundle ownedItems = mService.getPurchases(3, getPackageName(), "subs", null); 
```

这是logcat文件转储

```
03-08 13:24:45.619: E/AndroidRuntime(7149): FATAL EXCEPTION: main
03-08 13:24:45.619: E/AndroidRuntime(7149): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.imobilize.ETV_V3_INAPP_SUB/com.imobilize.ETV_V3_INAPP_SUB.IntroBLevActivity}: java.lang.NullPointerException
03-08 13:24:45.619: E/AndroidRuntime(7149):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
03-08 13:24:45.619: E/AndroidRuntime(7149):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
03-08 13:24:45.619: E/AndroidRuntime(7149):     at android.app.ActivityThread.access$600(ActivityThread.java:128)
03-08 13:24:45.619: E/AndroidRuntime(7149):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
03-08 13:24:45.619: E/AndroidRuntime(7149):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-08 13:24:45.619: E/AndroidRuntime(7149):     at android.os.Looper.loop(Looper.java:137)
03-08 13:24:45.619: E/AndroidRuntime(7149):     at android.app.ActivityThread.main(ActivityThread.java:4517)
03-08 13:24:45.619: E/AndroidRuntime(7149):     at java.lang.reflect.Method.invokeNative(Native Method)
03-08 13:24:45.619: E/AndroidRuntime(7149):     at java.lang.reflect.Method.invoke(Method.java:511)
03-08 13:24:45.619: E/AndroidRuntime(7149):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
03-08 13:24:45.619: E/AndroidRuntime(7149):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
03-08 13:24:45.619: E/AndroidRuntime(7149):     at dalvik.system.NativeStart.main(Native Method)
03-08 13:24:45.619: E/AndroidRuntime(7149): Caused by: java.lang.NullPointerException
03-08 13:24:45.619: E/AndroidRuntime(7149):     at com.imobilize.ETV_V3_INAPP_SUB.IntroBLevActivity.getPurchasedSubs(IntroBLevActivity.java:200)
03-08 13:24:45.619: E/AndroidRuntime(7149):     at com.imobilize.ETV_V3_INAPP_SUB.IntroBLevActivity.checkValidation(IntroBLevActivity.java:238)
03-08 13:24:45.619: E/AndroidRuntime(7149):     at com.imobilize.ETV_V3_INAPP_SUB.IntroBLevActivity.onCreate(IntroBLevActivity.java:96)
03-08 13:24:45.619: E/AndroidRuntime(7149):     at android.app.Activity.performCreate(Activity.java:4470)
03-08 13:24:45.619: E/AndroidRuntime(7149):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053) 
```

此方法的规格

```
 /**
 * Returns the current SKUs owned by the user of the type and package name specified along with
 * purchase information and a signature of the data to be validated.
 * This will return all SKUs that have been purchased in V3 and managed items purchased using
 * V1 and V2 that have not been consumed.
 * @param apiVersion billing API version that the app is using
 * @param packageName package name of the calling app
 * @param type the type of the in-app items being requested
 *        ("inapp" for one-time purchases and "subs" for subscription).
 * @param continuationToken to be set as null for the first call, if the number of owned
 *        skus are too many, a continuationToken is returned in the response bundle.
 *        This method can be called again with the continuation token to get the next set of
 *        owned skus.
 * @return Bundle containing the following key-value pairs
 *         "RESPONSE_CODE" with int value, RESULT_OK(0) if success, other response codes on
 *              failure as listed above.
 *         "INAPP_PURCHASE_ITEM_LIST" - StringArrayList containing the list of SKUs
 *         "INAPP_PURCHASE_DATA_LIST" - StringArrayList containing the purchase information
 *         "INAPP_DATA_SIGNATURE_LIST"- StringArrayList containing the signatures
 *                                      of the purchase information
 *         "INAPP_CONTINUATION_TOKEN" - String containing a continuation token for the
 *                                      next set of in-app purchases. Only set if the
 *                                      user has more owned skus than the current list.
 */
Bundle getPurchases(int apiVersion, String packageName, String type, String continuationToken); 
```

当我检查包名称时，它返回有效

下面是创建 mService 的代码 IInAppBillingService mService；

```
ServiceConnection mServiceConn = new ServiceConnection() {
   //@Overide
       public void onServiceDisconnected(ComponentName name) {
       mService = null;
   }
       //@Overide
   public void onServiceConnected(ComponentName name, 
      IBinder service) {
       mService = IInAppBillingService.Stub.asInterface(service);
   }

}; 
```

我不太擅长解释 logcat 文件，所以答案可能就在我面前。

这段代码我认为应该打开它，所以我可以随时使用 mService。

```
 bindService(new 
            Intent("com.android.vending.billing.InAppBillingService.BIND"),
                    mServiceConn, Context.BIND_AUTO_CREATE); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T21:55:06.870

我认为您`mService`在连接到服务之前使用。

`getPurchasedSubs ()`我的建议是使用布尔变量来检查活动是否连接到服务，或者`onServiceConnected`像这样使用：

```
ServiceConnection mServiceConn = new ServiceConnection() {
   public void onServiceDisconnected(ComponentName name) {
       mService = null;
   }

   public void onServiceConnected(ComponentName name, 
      IBinder service) {
       mService = IInAppBillingService.Stub.asInterface(service);
getPurchasedSubs ();
   }

}; 
```

希望这对您有所帮助。

# php - PHP邮件脚本不发送邮件

> ID：15303778
> 
> 赞同：0
> 
> 时间：2013-03-08T21:39:24.483
> 
> 标签：php, html, email

我正在处理一个简单的联系表单，并且 php 脚本没有向我的电子邮件发送电子邮件...该脚本运行成功，它产生了下面代码中的 HTML 输出。我试图弄清楚，但我无法让它发送电子邮件。我查看了教程，并且似乎与那里的许多教程具有相同的确切代码。我正在使用一个表单来获取用户在这里看到的输入，

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"   
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Dummy Code - Contact</title>
</head>

<body>

<form action="send_simpleform.php" method="post">
<p>Your name<br />
<input name="sender_name" type="text" size="30" /></p>
<p>Email<br  />
<input name="sender_email" type="text" size="30" /></p>
<p>Message<br />
<textarea name="message" cols="30" rows="5"></textarea></p>
<input name="submit" type="submit" value="Submit" />
</form>

</body>
    </html> 
```

我的 PHP 脚本也可以在这里看到，

```
<?php
$msg = "Email sent from www.dummycode.com\n";
$msg .= "Sender's Name:\t $_POST[sender_name]\n";
$msg .= "Sender's E-mail:\t $_POST[sender_email]\n";
$msg .= "Sender's Message:\t $_POST[message]\n";
$to = "henry.harris@xxxxxxxxxxx.com";
$subject = "DummyCode.com";
$headers = "From: My web site <www.dummycode.com>\n";
$headers .= "Reply to: $_POST[sender_email]\n";
mail($to, $subject, $msg, $headers);
?>

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Dummy Code Contact Sent</title>
</head>

<body>

<h1>The following email has been sent</h1>

<p>Your Name:<br />
<? echo "$_POST[sender_name]"; ?>
<p>Your Email Adress:<br />
<? echo "$_POST[sender_email]"; ?>
<p>Message:<br />
<? echo "$_POST[message]"; ?>
</p>
</body>
</html> 
```

我知道我对此非常了解，如果这是我的愚蠢错误，那么我很抱歉。我很笨。提前致谢。请不要讨厌。

-亨利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:45:24.440

您在脚本中唯一可以做的就是检查[`mail()`](http://php.net/manual/en/function.mail.php)函数的返回值。

如果`true`是，则消息被**成功接受传递**。但是，这并不意味着该消息实际上已发送。

简单的例子：

```
if (mail(...))
{
  // mail was accepted for delivery
}
else
{
  // not accepted
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T23:25:41.537

你应该看看[swiftmailer](http://swiftmailer.org/)。设置快速简单，并且有很好的文档记录。[错误处理](http://swiftmailer.org/docs/sending.html#getting-failures-by-reference)是一流的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T05:13:31.847

好吧，我遇到过邮件似乎已发送但在我要发送到的收件箱中看不到的情况。所以这里有一些我做的事情：

1.  不要从本地主机发送，除非您有一个可以发送出站消息的邮件服务器
2.  最好在远程服务器上发送或测试您的邮件脚本
3.  确保发件人电子邮件地址与原始域相同
4.  不要使用与发件人电子邮件不同的回复电子邮件 - 它可能会被作为垃圾邮件吞噬或被大多数电子邮件客户端丢弃
5.  验证服务器允许的 smtp 端口并设置
6.  验证 smtp 服务器并设置
7.  提供发送电子邮件的实际凭据
8.  将用户的电子邮件放在带有 mailto: 链接的邮件正文中的某个位置，以便您可以快速回复他们。（如果他们使用脚本发送给您）。如果您要发送给他们，则无需指定不同的回复
9.  确保指定编码字符集、换行符和可能的自动换行功能
10.  尝试使用来自 phpclasses.org 的经过测试的 PHP 类

我一次拿一个，通常会以正确的方式发送我的邮件。在您的代码中，尝试调整这些行并进行测试：

```
$headers = "From: My web site <www.dummycode.com>\n"; //Same as originating domain or email (just for tweaks)
$headers .= "Reply to: $_POST[sender_email]\n"; //Should be same as sender's email for a try 
```

# sql - SQL Azure 数据库重试逻辑

> ID：15303780
> 
> 赞同：5
> 
> 时间：2013-03-08T21:39:27.970
> 
> 标签：sql, azure, error-handling, azure-sql-database

我已经实现了以下代码，用于在写入 Azure 数据库时使用指数退避处理 INSERT/UPDATE 重试逻辑。

```
static SqlConnection TryOpen(this SqlConnection connection)
{
  int attempts = 0;
  while (attempts < 5)
  {
    try
    {
      if (attempts > 0)
       System.Threading.Thread.Sleep(((int)Math.Pow(3, attempts)) * 1000);
      connection.Open();
      return connection;
    }
    catch { }
    attempts++;
  }
  throw new Exception("Unable to obtain a connection to SQL Server or SQL Azure.");
} 
```

但是，我是否也应该考虑为我的数据库读取应用重试逻辑？或者 SqlCommand.CommandTimeout() 方法就足够了吗？我的大部分阅读都是使用以下代码进行的：

```
Dim myDateAdapter As New SqlDataAdapter(mySqlCommand)
Dim ds As New DataSet
myDateAdapter.Fill(ds, "dtName") 
```

很难知道在使用 Azure 的生产环境中会发生什么样的瞬态错误，所以我现在正在尝试尽可能多地进行缓解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T21:43:50.537

我认为重试通常会成为 Windows Azure SQL 数据库操作的一部分。

您是否查看过Microsoft Patterns and Practices 专门针对 SQL 数据库发布的[瞬态故障处理应用程序块](http://msdn.microsoft.com/en-us/library/hh680934%28v=PandP.50%29.aspx#sec2)，而不是实施自定义解决方案？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T13:55:01.967

SQL Azure 中的连接失败很常见。这是因为您的应用程序将创建一个连接池，但是当您认为这些连接结束时，Azure 可能会在它们结束时终止它们，而您永远不会知道它。

他们这样做是出于正当的原因，例如特定实例已超载，并且正在将连接转移到另一个实例。使用内部 SQL Server，您通常不会遇到此问题，因为您的 SQL Server 始终可用且专用于您的使用。

例如，我在一天内对大约 100,000 个数据库查询进行了大约 5 次 SQL Azure 连接失败。

SQL Azure 会发生这种情况。如果您使用的是 ADO.NET，那么 David 关于瞬态故障处理的建议是可行的方法。

如果你打算使用实体框架，有好消息也有坏消息：[Transient Fault Handling with SQL Azure using Entity Framework](https://stackoverflow.com/questions/12282427/transient-fault-handling-with-sql-azure-using-entity-framework)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-23T07:10:32.483

我已经实现`SqlConnection`和`SqlCommand`扩展提供重试逻辑的方法。它在[NuGet](https://www.nuget.org/packages/TransientFaultHandling/)上可用。

# css - 如何使用 css hover 更改跨度的内容？

> ID：15303784
> 
> 赞同：1
> 
> 时间：2013-03-08T21:39:47.590
> 
> 标签：css

我可以用这个 css 设置跨度的文本。

```
.tracking-true .tracking-button-text:before
{
    content:"Tracking";
} 
```

但我想更改悬停时的文本类似这样的东西，但我无法让它工作。

```
.tracking-true .tracking-button-text:hover
{
    content:"Untrack";
} 
```

这可以在css中完成吗？

更新：就像 Stackoverflow 使用 :hover 将光标更改为指针或更改背景颜色作为 ui 提示一样，我试图向用户传达同样的信息。可以单击此元素，并且会发生某些事情。我不觉得这是对 CSS 的不当使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T21:44:01.693

做这个：

```
.tracking-true .tracking-button-text:before
{
    content:"Tracking";
}

.tracking-true .tracking-button-text:hover:before
{
    content:"Untrack";
} 
```

# php - 如何在php中比较2个字符串的部分

> ID：15303787
> 
> 赞同：3
> 
> 时间：2013-03-08T21:39:53.883
> 
> 标签：php, sql, compare

晚上好，

我在尝试构建一个小搜索算法时面临一个小问题。

我有一个包含视频游戏名称和软件名称的数据库表。现在我想通过在其他服务器上获取和解析 xml 文件来添加新的报价。问题是：

如何比较产品名称的字符串，以便即使优惠名称与存储在我的数据库中的产品名称不匹配 100% 也能正常工作？

作为一个例子，我目前正在使用这个 PHP + SQL 代码来比较字符串：

```
$query_GID = "select ID,game from gkn_catalog where game like '%$batch_name%' or meta like '%$batch_name%' "; 
```

我目前正在将**like**运算符与两个通配符结合使用，以将商品名称 ( **batch_name** ) 与数据库中的名称 ( **game** ) 进行比较。

* * *

我想知道如何改进这一点，因为这种方法不是很安全，或者你想怎么称呼它，会发生什么：

如果数据库显示游戏名称为：

> Deus Ex 人类革命缺少链接

batch_name 说：

> Deus Ex 人类革命缺少链接**DLC**

结果将是空的/错误的/错误的......好吧，它根本不会在我的数据库中找到游戏。

类似这样的事情也是如此：

> 数据库 = Lego Star Wars The Complete Saga
> batch_name = Lego Star Wars **:** The Complete Saga
> 结果：False

有没有更好的方法来进行 SQL 查询？
或者我该如何尝试使该查询正常工作，以便它可以处理带有特殊字符（如 -minus- 和 [括号]）的字符串
和或数据库名称中未包含的字符（如 DLC、CE ...）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T21:59:34.350

您正在寻找模糊搜索算法和模糊搜索结果。这是一个完整的研究领域。但是，如果您快速 google 一下，也有一些简单的教程可以帮助您入门。

您可能很想尝试类似 PHP 的美妙的[levenshtein](http://php.net/manual/en/function.levenshtein.php)方法，它计算两个字符串的“接近度”。但是，这需要将其与每条记录进行匹配。如果会有数千条记录，那是不可能的。

MySQL 有一些匹配工具可能会有所帮助。我看到在我写这篇文章的时候，有人已经在评论中提到了[FULLTEXT 和 MATCH](http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html) ()。这些是一个很好的方法。

还有其他一些好的解决方案需要研究。存储关键字索引（删除所有文章和助手，如 of/the/an/am/is/are/was/of/from），然后在搜索中搜索每个单词是一个简单的解决方案。但是，它不会产生很好的结果，因为返回的值没有很好地加权，并且根本没有本地化。

还有很多便宜又好用的第三方搜索工具（我想到了 Lucene），它们可以为您完成大部分工作。您只需调用一个 API，它们就会管理搜索的缓存、关键字、索引、模糊等。

以下是一些与模糊搜索相关的 SO 问题，可以帮助您找到更多的术语和想法：

*   [轻量级模糊搜索库](https://stackoverflow.com/questions/41970/lightweight-fuzzy-search-library)
*   [对数据库的模糊查询](https://stackoverflow.com/questions/4017950/fuzzy-queries-to-database)
*   [字符串模糊匹配](https://stackoverflow.com/questions/5730478/fuzzy-matching-on-string)
*   [在php中模糊搜索数组](https://stackoverflow.com/questions/6896855/fuzzy-searching-an-array-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T22:02:54.863

[正如您所发现的， MySQL 查询](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html)可以将百分号字符用作百分号 (%) 与 LIKE 运算符结合使用。

您有多种解决方案，具体取决于您到底想要什么。

*   你可以进行[全文搜索](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html#function_match)
*   您可以使用诸如[soundex 之类的语言算法进行搜索](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_soundex)
*   您可以按关键字搜索

请记住，您可以进行多次搜索（搜索完全匹配，然后在每一边搜索百分比，在单词中爆炸然后在每个单词之间插入 %，按关键字搜索等），具体取决于完全匹配是否优先于紧密搜索等.

# c# - c#过滤lambda中的动态属性名称

> ID：15303789
> 
> 赞同：1
> 
> 时间：2013-03-08T21:40:03.363
> 
> 标签：c#, asp.net, linq, lambda

我在使用名称不佳的属性时遇到了麻烦：

```
public class Word
{
     public string Alt01 { get;set; }
     public string Alt02 { get;set; }
     public string Alt03 { get;set; }
     public string Alt04 { get;set; }
     public string Alt05 { get;set; }
} 
```

这应该是 type 的一个属性`List<string>`。但是这个想法是别人想出来的，我目前无法改变结构。

我有一个返回很多`Word`对象的方法。我想做的是过滤掉在一个或多个属性`Word`中具有匹配字符串的每个实例。`AltXX`

这是我到目前为止所拥有的：

```
foreach(var word in resultList) //<-- List<Word> 
{
    var alt01 = word.GetType().GetProperty("alt01").GetValue(word, null);
} 
```

如果我稍微扩展一下，这将作为我的过滤器。但我的问题是：这可以使用 lambda 表达式解决吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T21:46:22.280

所以我们将从一个简单的帮助器（可能是扩展）方法开始，因为我们有一堆属性而不是列表：

```
public static IEnumerable<string> getAlts(Word word)
{
    yield return word.Alt01;
    yield return word.Alt02;
    yield return word.Alt03;
    yield return word.Alt04;
    yield return word.Alt05;
} 
```

如果它可以具有 N 个属性而不是恰好五个，您可以将其重构为使用反射。如果你真的是这样，上帝会帮助你。拍打将您置于该位置的开发人员，而不仅仅是`List`为我使用一次。

有了这个，还不错：

```
List<Word> words = new List<Word>();

string searchText = "foo";
var query = words.Where(word => getAlts(word).Any(alt => alt.Contains(searchText))); 
```

我希望该单词`Where` `Any`的 alt 单词包含搜索文本。它读起来就像它工作一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:53:43.933

您可以`List<string>`通过创建辅助类以向后兼容的方式将该类转换为。

例如

```
class QueryFriendlyWordList
{
    public List<string> Words;

    public QueryFriendlyWordList(Word words)
    {
            Words = new List<string> {words.P1,words.P2, words.P3, words.P4};
    }
} 
```

用法

```
 Word words = new Word {P1 = "abcd", P2 = "abc", P3 = "def", P4 = "qwre"};
        var queryable = new QueryFriendlyWordList(words);
        var result = queryable.Words.Where(w => w.Contains("a")); 
```

静态更容易：

```
static class WordConverter
{       
    public static List<string> Convert(Word words)
    {
            return new List<string> {words.P1,words.P2, words.P3, words.P4};
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T21:45:28.900

你能做的最好的就是在你的应用程序开始时使用反射来构建表达式树，它编译成 lambdas，然后保存这些 lambdas 以供重复使用。

反射慢的代价只付了一次，然后它就像你从一开始就编译它一样快。

然而，写那些表达式树是一件很痛苦的事，所以如果你不关心性能（它很慢，但不是那么慢），那么你的反射应该没问题。

# c++ - 用一些 C++ 模板包装器代码将自己画到 const-corner 中

> ID：15303790
> 
> 赞同：2
> 
> 时间：2013-03-08T21:40:04.593
> 
> 标签：c++, templates, stl, constants

我正在开发一个用于序列化数据的模板化框架，并且在我的代码中遇到了一些涉及 const-ness 保证的障碍。我找到了一些解决 const 问题的方法（使用`const_cast`和其他更脏的技术），但我想我会在这里问这个问题。

以下是一个简单的例子，我可以将事情归结为......

```
#include <deque>
#include <iostream>
#include <string>
#include <memory>

using namespace std; // bad form, but for simplicity

// Forward decl's
template <typename C, typename SubC> class Wrapper;

template <typename C, typename SubC>
struct w_iterator
{
    typedef w_iterator           _Self;
    typedef SubC &               _Ref;
    typedef SubC *               _Ptr;
    typedef typename C::iterator internal_iter;

    // Default c-tors
    w_iterator() = delete;
    w_iterator(const internal_iter & i) : internal(i) { }

    // Copy c-tor
    w_iterator(const w_iterator & i) : internal(i.internal) { }

    // Dereference operators - the implementation of these is
    // hackish and and awful, its done this way purely to create
    // a simplified example
    _Ref operator * () const
        { proxy.reset(new SubC(*internal)); return *proxy; }
    _Ptr operator -> () const
        { proxy.reset(new SubC(*internal)); return proxy.get(); }

    // Comparison
    bool operator == (const _Self & i)
        { return (internal == i.internal); }
    bool operator != (const _Self & i)
        { return (internal != i.internal); }

    // Manipulation
    _Self & operator ++ () { ++internal; return *this; }

    // This is a hack to simplify the example, my real code uses a different mechanism
    // for the temporary storage of the return type for the dereference objects
    mutable std::unique_ptr<SubC> proxy;
    internal_iter internal;
};

template <typename C, typename SubC>
struct const_w_iterator
{
    typedef w_iterator<C,SubC>         _nonConstSelf;
    typedef const_w_iterator           _Self;
    typedef const SubC &               _Ref;
    typedef const SubC *               _Ptr;
    typedef typename C::iterator       nonconst_internal_iter;
    typedef typename C::const_iterator internal_iter;

    const_w_iterator(const nonconst_internal_iter & i) : internal(i) { }
    const_w_iterator(const internal_iter & i) : internal(i) { }

    // Dereference
    _Ref operator * () const
        { proxy.reset(new SubC(*internal)); return *proxy; }
    _Ptr operator -> () const
        { proxy.reset(new SubC(*internal)); return proxy.get(); }

    // Comparison
    bool operator == (const _Self & i)
        { return (internal == i.internal); }
    bool operator == (const _nonConstSelf & i)
        { return (internal == i.internal); }
    bool operator != (const _Self & i)
        { return (internal != i.internal); }
    bool operator != (const _nonConstSelf & i)
        { return (internal != i.internal); }
    // Manipulation
    _Self & operator ++ () { ++internal; return *this; }

    // This is a hack to simplify the example, my real code uses a different mechanism
    // for the temporary storage of the return type for the dereference objects    
    mutable std::unique_ptr<const SubC> proxy;
    internal_iter internal;
};

template <typename C, typename SubC>
class Wrapper
{
 public:
    // Typedefs - shared btw here & const_Wrapper
    typedef w_iterator<C, SubC>       iterator;
    typedef const_w_iterator<C, SubC> const_iterator;

    // Default construction - only allow construction with an underlying
    // container
    Wrapper(C & c) : container(&c) { }

    // Copy constructor
    Wrapper(const Wrapper & c) = delete; // violates const-ness
    Wrapper(Wrapper & c) : container(c.container) { }

    // Iterator access
    iterator begin() { return iterator(container->begin()); }
    iterator end() { return iterator(container->end()); }

    const_iterator cbegin() const
        { return const_iterator(container->cbegin()); }
    const_iterator cend() const
        { return const_iterator(container->cend()); }

    // Accessor functions
    size_t length() const { return container->size(); }

 protected:
    C * container;
};

 #define BROKEN 1
int main(int argc, char ** argv)
{
    deque<string> d = { "one", "two", "three" };
    deque<decltype(d)> dd = { d };
    deque<decltype(dd)> ddd { dd };

    cout << d.size() << " " << dd.size() << " " << ddd.size() << endl;

    Wrapper<decltype(d), string> w(d);
    Wrapper<decltype(dd), decltype(w)> ww(dd);
    Wrapper<decltype(ddd), decltype(ww)> www(ddd);

    for (auto i = www.begin(); i != www.end(); ++i)
    {
        cout << "www: " << i->length() << endl;
#if BROKEN
        // produces the error: no matching function for call to
        //   'Wrapper<deque<string>, string>::Wrapper(const deque<string>&)'
        for (auto j = i->cbegin(); j != i->cend(); ++j)
#else
        for (auto j = i->begin(); j != i->end(); ++j)
#endif
        {
            cout << "ww: " << j->length() << endl;
            for (auto k = j->cbegin(); k != j->cend(); ++k)
                cout << *k << endl;
        }
    }

    return 0;
} 
```

现在，很明显为什么事情无法编译 when `BROKEN == 1`，但我很难找出构建事物的正确方法来解决我想要一个非常量指针的事实 a `Wrapper`，但仍然想保留`cbegin()`and的返回类型的 const 语义`cend()`。我已经尝试了一些事情，包括创建一个`const_Wrapper`具有不同语义的单独类，但是这些包装类经常遇到模板解析问题。

如果有人可以建议（1）一种更好的方法来做这种事情，或者（2）指出一些做类似事情的代码的方向，我真的很感激。请记住，从这个示例中看不到围绕底层容器创建包装器的原因（因为真正的包装器类继承了一个用于读取和写入的接口）。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T22:45:20.777

这个问题可以简化一点

```
const_w_iterator<decltype(dd), decltype(w)> itr = ww.cbegin();
*itr; 
```

问题是对 的调用`proxy.reset(new SubC(*internal));`，在这种情况下相当于：

```
proxy.reset(new Wrapper<decltype(d), string>(*internal))
                                          //     ^
                                          //const decltype(d) 
```

但是 a`Wrapper<const T, ...>`不能`T`在构造函数中使用 a 。我认为这是可以找到解决方案的地方；如果您的子类采用 a `decltype(d)`，则需要将其传递 a `decltype(d)`；不确定解决方案到底是什么，但也许以上内容可以帮助某人发现它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T23:03:08.373

您是否考虑在 Wrapper 中保留两个指针，如下所示：

```
template <typename C, typename SubC>
class Wrapper
{
 public:
    // Typedefs - shared btw here & const_Wrapper
    typedef w_iterator<C, SubC>       iterator;
    typedef const_w_iterator<C, SubC> const_iterator;

    // Default construction - only allow construction with an underlying
    // container
    Wrapper(C & c) : container(&c), const_container(&c) { }
    Wrapper(const C & c) : container(NULL), const_container(&c) { }

    // Copy constructor
    Wrapper(const Wrapper & c) = delete; // violates const-ness

    Wrapper(Wrapper & c) : container(c.container), const_container(c.const_container) { }

    // Iterator access
    iterator begin() { return iterator(container->begin()); }
    iterator end() { return iterator(container->end()); }

    const_iterator cbegin() const
        { return const_iterator(const_container->cbegin()); }
    const_iterator cend() const
        { return const_iterator(const_container->cend()); }

    // Accessor functions
    size_t length() const { return const_container->size(); }

 protected:
    C * container;
    const C * const_container;
}; 
```

如果您尝试调用`begin()`或`end()`在使用引用构造的包装器上，则会出现 NULL 指针错误`const`，这当然是不好的。但无论如何打电话给他们是不好的。

# jquery - 老虎机悬停 CSS3 & jQuery

> ID：15303791
> 
> 赞同：-2
> 
> 时间：2013-03-08T21:40:18.187
> 
> 标签：jquery, css

当您将鼠标悬停在图像上时，我想要一个类似老虎机的动画。当您离开该区域时，我还希望它恢复到起始状态。我设法在您离开时停止动画，并在您悬停时开始动画，但有两个问题。

1.  动画相互重叠，因为悬停不断激活它。
2.  动画不会在起始位置结束。（我不知道该怎么做。）

我的知识完全是新手水平，但到目前为止，我在这里和那里都有一些代码。我不知道这一切是如何工作的。

请帮帮我！谢谢！

jsfiddle.net/Bn7Kq/63/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:06:13.837

问题是，即使您将鼠标悬停在事件绑定到的元素的后代上，[`.mouseover()`](http://api.jquery.com/mouseover/)and事件也会触发。[`.mouseout()`](http://api.jquery.com/mouseout/)所以本质上，当项目在鼠标光标下通过时，您正在处理多个`doScroll`循环。`marqueeElement`

要解决此问题，并且只为实际绑定元素触发一次，请使用[`.mouseenter()`](http://api.jquery.com/mouseenter/)and[`.mouseleave()`](http://api.jquery.com/mouseleave/)代替。

```
var el = $(".mholder").mouseenter(function(){
    isHovering = true;
    var countScrolls = $('.mholder .marqueeElement').length;

    for (var i=0; i < countScrolls; i++) {
       doScroll($('.mholder .marqueeElement:nth-child(' + i + ')'));
    }
}).mouseleave(function(){
    isHovering = false;
    i=countScrolls+10;
}); 
```

**[演示](http://jsfiddle.net/KnmGQ/)**

# linux - 前置视觉块在 vim 中不起作用

> ID：15303792
> 
> 赞同：2
> 
> 时间：2013-03-08T21:40:20.863
> 
> 标签：linux, vim, block

我真的很喜欢在 windows 中使用`Ctrl`- `V`( `Ctrl`- `Q`) 来修改视觉块的想法。此处解释了该技术：[在 Vim 中，如何有效地将相同的字符插入多行？](https://stackoverflow.com/questions/9549729/in-vim-how-do-i-effectively-insert-the-same-characters-across-multiple-lines)

出于某种原因，这在 VIM 7.2.411 中对我不起作用。

我按`Ctrl`- `V`，它显示视觉块，然后按`J`几次以扩大我的选择。然后我按`Shift`-`I`插入，放置我的文本，当我按时`Esc`，它只修改了选择的顶行。我很难弄清楚为什么这在我的 linux 机器上不起作用。同样的技术对 Windows 中的 gvim 非常有效。

是什么阻止了它的工作，或者我应该尝试什么不同的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T19:43:02.980

问题的根源是缺乏编译支持（感谢我的共享主机提供商）。对于其他遇到类似问题的人，请检查 vim 中的 +visualextra 选项。您可以从正常模式检查：

```
:echo has('visualextra') 
```

如果确实如此，它将返回一个“1”。否则，您可以使用：

```
:version 
```

或者通过从命令行调用 --version 选项：

```
vim --version | grep visualextra 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-01T20:19:59.797

它可能就像没有安装正确的软件包一样简单。不包括可视块模式，`vim-minimal`这通常是 vi 的默认版本。如果你这样做：

```
rpm -qa | grep vim 
```

而你看到`vim-minimal`却没有`vim-enhanced`，那么你必须安装`vim-enhanced`。这将为您提供视觉块模式以及许多其他附加功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T05:40:06.353

您在 Windows 上使用 gvim 描述的行为非常出乎意料。我希望插入的文本只出现在第一行之前。如果您确实想在当前选定的可视块的所有行之前插入一个字符串，那么很自然的做法是：

```
:s/^/inserted text 
```

（注意当你输入 时`:`，vim 会自动设置地址`:'<,'>`，所以实际的命令是`:'<,'>s/^/inserted text`）

# java - 网络、集群和虚拟分区

> ID：15303794
> 
> 赞同：1
> 
> 时间：2013-03-08T21:40:26.303
> 
> 标签：java, jboss, cluster-computing, distributed-computing, partitioning

我正在尝试设计一个分布式 JBoss 应用程序，今天下午我无意中听到一些同事谈论 CAP 定理，特别是其中的“P”（分区）部分。他们正在讨论它如何应用于各种分区类型，即集群分区、网络分区和虚拟分区。

我*对网络分区的理解*是，它有意将网络分成 2 个以上的独立部分，以便它可以处理一个或多个单独片段的中断。集群分区如何适应这个模型（并因此与 CAP 相关联），什么是“虚拟”分区？！？

我想知道在集群我的 JBoss 应用程序时是否需要考虑这些因素，如果需要，从哪里开始考虑这些因素。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:15:51.827

根据定理，*你*`CAP`不能同时实现持久性`C`、`A`可用性和`P`艺术容忍性这三者。

 *我的解释是，*这并不意味着`A`如果您选择`C+P`*. 一个应用程序可以设计为`CAP`在不同的时刻拥有任意一对。你必须决定`CAP`你最想拥有哪一对。

在 JBoss 集群的上下文中，您可以在升级/维护工作期间设置一个隔离的备用辅助分区来交换它，而不是您的主分区。这种方式你大多`C+A`没有，`P`因为你在主要时间没有使用两个分区。现在您决定是时候升级您的应用程序了，您有哪些选择？您可以临时更改`C`或`A`。`P`也就是说，您可以交换分区（丢失`C`）或关闭整个集群（丢失`A`）。

当然，你可以选择其他的`CAP`主时间组合。这取决于什么 SLA 适合您的应用程序。更受欢迎的是`C+A`和`A+P`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:34:38.193

CAP 定理中的分区容差是一个理论概念，而不是具体概念。它是指整个系统处理通信故障的能力。它不是指任何故意的节点分离。

[从 Web 服务的角度来看，CAP 定理本身说](http://groups.csail.mit.edu/tds/papers/Gilbert/Brewer2.pdf)：

> 在遭受通信故障的网络中，任何 Web 服务都不可能实现原子读/写共享内存来保证对每个请求的响应。

请注意，对于由数据库支持的 Web 服务，您实际上不需要担心 CAP 定理，因为您没有尝试实现任何共享内存；数据库为您完成。如果您在应用程序中维护任何实时状态，*则确实*需要担心 CAP 定理，因为该状态表示您希望以原子方式（`c`持续地）、可靠地（`a`有效地）维护一些读/写内存，并且面对之间的网络故障节点（`p`分区容忍）。

如果您由多个节点上的数据库支持，则数据库本身必须处理 CAP 定理。部署的任何 HA 解决方案都会做出不同的权衡以处理通信故障。例如，MongoDB 副本通过强制任何未连接到大多数节点的节点放弃其主节点状态来权衡可用性。确保您了解数据库在不利条件下的作用，并确保它们与您的应用程序的要求相匹配。*

# java - 两个 java 文件，在同一个目录中，一个访问其他类/s？

> ID：15303796
> 
> 赞同：11
> 
> 时间：2013-03-08T21:40:35.693
> 
> 标签：java, command-line, javac

我正在尝试授予一个`.java`文件访问另一个`.java`文件中的类的权限。我想在命令行上执行此操作。例如，我将如何使用下面的两个文件来做到这一点？

文件：“ToImport.java”

```
package ABC;
public class ToImport {
    private String aName;
    public ToImport(String Name)  {
        aName = Name;
    }
    public String toString() {
        return("Text: " + aName);
    }
} 
```

文件：“TheImport.java”

```
package ABC;
public class TheImport {
        public static void main(String[] args) {
        ToImport abc = new ToImport("a");
        System.out.println("TEST: " + abc);
    }
} 
```

当我输入`javac ToImport.java`时，我没有收到任何错误，但是当我输入时，`javac TheImport.java`我收到以下错误，

![命令提示错误信息](../Images/236cd859a52e4023ab0daa1e29089bd1.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T22:00:32.600

`TheImport`取决于类`ToImport`。因此，当您编译时，编译`TheImport`器必须同时编译`ToImport`或访问已编译的`ToImport`类。

假设您有一个如下所示的目录，

```
src
└── ABC
    ├── TheImport.java
    └── ToImport.java 
```

此外，假设您在目录中`src`并且想要编译为`../classes`. 您必须使用以下命令之一：

```
javac -d ../classes ABC/ToImport.java ABC/TheImport.java 
```

或者

```
javac -d ../classes ABC/ToImport.java
javac -cp ../classes -d ../classes ABC/TheImport.java 
```

如果两个`.java`文件相互依赖，那么您必须像在第一个命令中那样一次编译它们。

另请注意，包应全部小写以尊重 Java 命名约定。

要运行您可以键入的主程序，

```
cd ../classes
java ABC.TheImport 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T21:59:37.060

从包含 .java 文件的包中运行：

```
javac *.java 
```

或者

```
javac TheImport.java ToImport.java 
```

编译器需要同时编译两个类，它不能单独编译一个依赖于另一个类的类。

# powershell - 从 CMD 运行 PowerShell 脚本时的奇怪行为

> ID：15303797
> 
> 赞同：1
> 
> 时间：2013-03-08T21:40:36.203
> 
> 标签：powershell

在 ISE 中和从 CMD 提示符处运行 PowerShell 脚本时，我遇到了行为差异。

该脚本的目的是检查 Microsoft 的 DPM（数据保护管理）服务的活动警报。如果发现超过 12 小时的内容，则会在“DPM 警报”事件日志中记录错误。

我在 ISE 中开发了脚本，它似乎运行良好。所以我将它添加到*Scheduled tasks*，它没有做我想要的。我最终剥离了测试警报年龄的逻辑，因此我所做的只是尝试获取当前活动警报的列表。

```
$serverName = "my_server_name"

$dpmServer = Connect-DPMServer $serverName
$dpmServer.AlertController.RefreshAlerts()
$activeAlerts = $dpmServer.AlertController.ActiveAlerts

if  (!$activeAlerts) {"no active alerts found"}
else {$activeAlerts} 
```

我正在通过 PSConsoleFile 加载 DPM 管理单元。我从 CMD 执行的命令如下所示：

```
 powershell -psconsole .\DPMConsoleFile.psc1 -file .\DPMAlertChecker.ps1� 
```

�</p>

我知道管理单元正在正确加载，因为如果我包含仅显示 $dpmServer 对象的行，它将显示正确的信息。

如果我从 PowerShell ISE（或 DPM 命令行管理程序）运行它，它会正常工作并显示活动警报列表（如果有）。如果我使用上述语法从命令行运行它，它就不起作用。具体来说，它不会从`$dpmServer.alertcenter.activealerts`命令返回任何警报。

有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:16:37.113

我发现了这个问题。`Connect-DPMServer`从使用连接到 DPM 服务器到您可以看到警报之间，似乎有一点延迟。

我添加了一个循环来影响`while (!$alerts)`和在循环内运行`refreshAlerts()`和`alertController.ActiveAlerts`。大约 10 秒后，我能够看到活动警报并对其采取行动。

在 ISE 中运行它时，变量在运行之间持续存在，因此有足够的时间进行连接。当使用“powershell -file scriptname”调用时，shell 在连接发生之前退出。

# android - ScrollView内的Android大表构建速度非常慢

> ID：15303804
> 
> 赞同：1
> 
> 时间：2013-03-08T21:41:20.473
> 
> 标签：android, performance

我正在构建一个包含 1,000 行的动态表格布局。构建相当快，但绘制它需要 10 多秒。该表包含三个图像按钮和 7 个文本列。一旦加载表执行得很好，但重新加载它（即更改排序顺序时）也很慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:45:46.017

> 我正在构建一个包含 1,000 行的动态表格布局

这是一个非常糟糕的主意。对于初学者，你会`OutOfMemoryError`在某些设备上崩溃，因为你在一个活动中就消耗了几 MB 的堆空间。

请使用`ListView`或其他形式的`AdapterView`，以便只创建填充屏幕所需的视图（然后在用户滚动时回收）。

# php - 没有文件扩展名的搜索 URL

> ID：15303807
> 
> 赞同：0
> 
> 时间：2013-03-08T21:41:22.233
> 
> 标签：php, url, url-rewriting, search-engine

我已经为我的网站制作了一个搜索引擎，我想知道如何制作像 Google Search 或 YouTube 这样的 URL...

```
http://sitename.com/search?q=search+query 
```

我只能这样得到...

```
http://sitename.com/search.php?q=search+query 
```

我想知道如何去掉'.php'。把它放在一个叫做搜索的文件夹中只是意味着它是这样的......

```
http://sitename.com/search/?q=search+query 
```

希望您知道我的意思并有足够的信息来提供帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:46:35.783

在 sitename.com 中，创建一个名为 search 的目录。您的文件名不应该是 search.php，而是使用 index.php。然后使用网址[http://sitename.com/search/?q=search+query](http://sitename.com/search/?q=search+query)定位它。

```
http://sitename.com/
search
index.php 
```

这显然是最简单的方法。另一种方法是使用 .htaccess mod_rewrite 重写您的网址。它可能不是您想要的，但如果重命名文件不是问题，它会让您接近您想要的

[搜索页面的漂亮 URL](https://stackoverflow.com/questions/128796/pretty-urls-for-search-pages/128882#128882)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:49:12.090

将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录或 httpd.conf 中：

```
Options +MultiViews 
```

一旦完成，apache将支持：

```
http://sitename.com/search?q=search+query 
```

通过执行`search.php`

# scala - 如何摆脱 scala DSL 表达式中的括号？

> ID：15303813
> 
> 赞同：4
> 
> 时间：2013-03-08T21:41:37.570
> 
> 标签：scala, dsl

我希望能够在我的 DSL 中去掉以下表达式中的括号/括号：

`substitute ("hello {0}" using "world")`

其余代码如下所示：

```
class Rule(format: String) {
  def using(arggs: String*): Rule = { /* save the args */ return this }
  def execute() = { /* substitute params */ }
}

def substitute(rule: Rule) = rule.execute()
implicit def makeRule(format: String) = new Rule(format) 
```

我已经尝试过 apply() 方法，但我认为我不能那样做。我可以使用一些 scala 魔法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T22:05:43.767

`.`当你想省略and时，Scala 有它自己的 iamb / iambic 表（如果你愿意的话`(`）`)`：

*目标*（跳过`.`）*方法*（跳过`(`）*单参数*（跳过`)`）

singleArgument*是*可选的。

每一个 dotless、parenless DSL-ish 的东西都必须符合这种模式。这就是为什么 Scala 内部的 DSL 经常如此生硬的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T15:07:26.467

不是您的情况的确切解决方案（@RandallSchulz 绝对正确），但您可以使用两个字的方法：

```
class RuleHelper(val txt: String) {
  def using(arggs: String*): RuleHelper = { /* save the args */ return this }
  def execute() = { /* substitute params */ }
}

object substitute {
  def in(txt: String) = new RuleHelper(txt)
}

substitute in "hello {0}" using "world" 
```

它没有你想的那么漂亮，但我认为它减少了意外的复杂性。

# c - 带有 EOF 的 While 循环总是提示输入

> ID：15303814
> 
> 赞同：0
> 
> 时间：2013-03-08T21:41:39.503
> 
> 标签：c, input, char, eof

我一直在这个问题上花了一些时间，并决定来这里看看是否有人能帮助我。我有一个给定的文本文件，我在运行时将文本文件的内容发送到我的程序。例如：如果我说

```
 scanf("%d", &integerOne); 
```

那么我的文本文件应该将第一行（例如）数字 8 放入该插槽中，我希望它继续这样做，直到它到达文件的末尾，但这就是我遇到麻烦的地方。

与上面的示例不同，我使用的是字符：

```
 while((scanf("%s", userstring)) != EOF)
    {
            if(userstring[0] == 'c')
            {
                  scanf("%d", &cinput); 
            }
           if(userstring[0] == 'a')                       
           {        
                    scanf("%d", &cone);
                    scanf("%d", &cone);
           }
    } 
```

只是为了一些背景，我让数组'userstring'来保存'c'（用于连接）或'a'（用于添加）。我试图让程序在没有收到更多“char”输入时执行循环和其他功能。您的所有见解都非常有帮助。非常感谢，亚历克斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:00:31.153

[`scanf`](http://linux.die.net/man/3/scanf)返回*匹配并赋值成功的输入项的个数*，因此最好检查它的返回值是否等于`1`。另请注意，`scanf`此循环内的调用可能会失败，因此如果输入可能无效，您还应该检查它们的返回值：

```
while (scanf("%s", userstring) == 1)
{
    if (userstring[0] == 'c')
    {
        if (scanf("%d", &cinput) != 1)
            return -1;                  // TODO: scanf failed
    }
    ...
} 
```

并回答您的实际问题：`while`始终提示用户输入另一个字符串，因为停止读取的唯一方法是输入输入结束控制代码，即`Ctrl`+ `Z`（在 Windows 上）或`Ctrl`+ `D`（在 Mac、Linux 上, Unix）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:49:44.690

如果循环中的一个 scanf 遇到错误，这可能会导致 while 保护中的 scanf 行为不端（从您的角度来看）。

# apache - DOM 加载，然后是页面的其余部分

> ID：15303815
> 
> 赞同：0
> 
> 时间：2013-03-08T21:41:42.773
> 
> 标签：apache, load

我正在加快网站速度，当我进行加载时间测试时，需要加载 2 个文件。问题是浏览器首先尝试加载 index.php (html)，当它加载完该页面后，它会加载 css、js 和图像……这使得加载时间更长。[http://goo.gl/Af66y](http://goo.gl/Af66y)

无论如何要解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:59:28.170

`index`您可以在文件中包含您的 css、js 和图像。将您的 css 放入`<style>`标签、js 文件`<script>`和您可以转换`base64`并分配`img.src`或插入的图像中`background-image: url("data:image/png;base64,iVBORw0KGgoAAAErkJggg==")`

# c# - 如何处理这类问题 UnauthorizedAccessException 是handli 错误？

> ID：15303819
> 
> 赞同：2
> 
> 时间：2013-03-08T21:41:48.350
> 
> 标签：c#, asp.net, winforms

我已经看到了[这个](https://stackoverflow.com/questions/1228560/unauthorizedaccessexception-when-using-directory-getfiles)，但还没有完全解决这个问题。当我阅读所有查找并包含文件夹时，编译器 meg 会抛出关于 Unauthorized 的异常。错误抛出编译器：

> 访问路径 F:\System Volume information \ 被拒绝

我的代码是

```
private void toolStripButton8_Click(object sender, EventArgs e)
{
    try
    {
        Uri _urii = new Uri(toolStripTextBox1.Text);
        //            MessageBox.Show(_urii.Host);
        string _sthost = _urii.Host;

        string aa = "F:\\" + _sthost + " ";
        string[] _file = Directory.GetFiles("F:\\", "*.txt", SearchOption.AllDirectories); //Exception here create
        foreach (var item in _file)
        {
            MessageBox.Show(item.Length.ToString()); 
```

我的问题是**F**盘没有**系统卷信息**文件夹.. 为什么抛出这种类型的异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:51:41.680

当您执行“dir”或在资源管理器中查看文件时，隐藏 + 系统文件夹不会显示，但这并不意味着它们不存在。

“系统卷信息”出现在 Windows 接触的非只读磁盘和权限设置中，即使管理员也无权访问（您也可以通过获得所有权以同样的方式访问任何其他受保护的位置）并添加访问权限）。

一般来说，您应该预料到诸如“访问被拒绝”之类的 IO 错误并适当地处理它们。即在文件枚举期间简单地忽略所有IO 异常可能是可以的。

注意使用此命令（在 CMD 控制台中键入）查看该文件夹的属性：

```
cd f:\ /d && attrib "System Volume Information" 
```

# c# - 如何在调整大小的表单上安装控件

> ID：15303825
> 
> 赞同：6
> 
> 时间：2013-03-08T21:42:33.170
> 
> 标签：c#, forms, controls

当我更改分辨率时，我想在表单上安装控件。因为现在当我设置例如 1280x1024 分辨率时，控件保持在左上角和原始大小。我的意思是我也想用表格改变他们的位置和大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T21:46:06.647

有几种方法：

1.  将控件的[Dock](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.dock.aspx)属性设置为 Fill - 这是最简单的，但取决于控件是否单独在父级中，如果不是，其他控件需要如何调整大小。
2.  将控件的[Anchor](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.anchor.aspx)属性设置为 Top、Bottom、Left、Right - 这会使您的控件“固定”到锚点，并根据所选锚点移动和/或调整大小。
3.  您可以对父控件的[Resize](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.resize.aspx)事件做出反应并手动调整控件的大小，但这仅在非常特殊的情况下是必需的，例如当您需要使用百分比大小调整逻辑等将几个不同的控件彼此相邻放置时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:45:43.573

熟悉`Anchor`控件的属性。

它旨在做您需要的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T21:48:15.253

正确使用锚点可以让控件根据您的需要移动或伸展。如果控件的两个相对侧被锚定，它将在该轴上拉伸（top_bottom/left_right）。否则，它将保持锁定在其锚定侧。对接就像锚定，但具有每个定义的设置。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-08T21:45:27.240

您必须手动缩放它们，没有自动的方法可以做到这一点。

如果它只是您试图适应窗口大小的一个控件，则将[Dock](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.dock%28v=vs.110%29.aspx)属性设置为`Fill`将完成工作。

# android - 在 Acer Iconia B1 上连接到蓝牙时出错

> ID：15303828
> 
> 赞同：3
> 
> 时间：2013-03-08T21:43:14.683
> 
> 标签：android, bluetooth

谢谢你看我的问题。我在 Arduino 上使用 RN42 或 HC05 蓝牙模块开发了一个蓝牙应用程序。这将是我希望放在 Play 商店中的应用程序。该应用程序似乎在我检查过的大多数平板电脑上都能正常工作，除了一个（我们想要使用的那个！）Acer Iconia B1。

我从 logCat 得到的错误是：

```
03-08 21:35:10.972: I/BluetoothSocket_MTK(2712): [JSR82] Bluetooth Socket Constructor
03-08 21:35:10.972: I/BluetoothSocket_MTK(2712): [JSR82] type=1 fd=-1 auth=false encrypt=false port=1
03-08 21:35:10.973: D/ActivityThread(1708): BDC-Calling finishReceiver: IIntentReceiver=41441d20
03-08 21:35:10.974: D/BTSocketService(402): [JSR82][Service] initSocket
03-08 21:35:10.974: I/BluetoothSocketService.cpp(402): [JSR82][JNI] initSocketNative +++.
03-08 21:35:10.974: I/BluetoothSocketService.cpp(402): [JSR82][JNI] initSocketNative: start to initialize socket.
03-08 21:35:10.975: I/BluetoothSocketService.cpp(402): [JSR82][JNI] type=1, auth=0, encrypt=0, port=1
03-08 21:35:10.975: I/BluetoothSocketService.cpp(402): [JSR82][JNI] initSocketNative: Initialize socket done.
03-08 21:35:10.975: E/BluetoothSocketService.cpp(402): [JSR82][JNI] No free context space; the APP has registered 20 services.
03-08 21:35:10.975: I/BluetoothSocketService.cpp(402): [JSR82][JNI] initSocketNative ---. fdHandle=0
03-08 21:35:10.975: D/Bluetooth(2712): ++++ Connecting to 00:12:05:22:95:84
03-08 21:35:10.975: D/BTSocketService(402): [JSR82][Service] connect
03-08 21:35:10.975: I/BluetoothSocketService.cpp(402): [JSR82][JNI] connectNative +++. fd=0.
03-08 21:35:10.975: E/BluetoothSocketService.cpp(402): [JSR82][JNI] connectNative: The FD (0) doesn't exist.
03-08 21:35:10.976: W/System.err(2712): java.io.IOException: [JSR82] connect: Connection is not created (failed or aborted).
03-08 21:35:10.976: W/System.err(2712):     at android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:395)
03-08 21:35:10.976: W/System.err(2712):     at com.test.BluetoothConnection.connectBluetooth(BluetoothConnection.java:100)
03-08 21:35:10.977: W/System.err(2712):     at com.test.BluetoothCounter$1.run(BluetoothCounter.java:64)
03-08 21:35:10.977: W/System.err(2712):     at java.lang.Thread.run(Thread.java:856)
03-08 21:35:10.977: D/dalvikvm(2712): threadid=13: exiting
03-08 21:35:10.977: D/dalvikvm(2712): threadid=13: bye! 
```

我的代码初始化蓝牙：

```
 public boolean connectBluetooth() throws Exception, Exception{
        BT = BluetoothAdapter.getDefaultAdapter().getRemoteDevice(MacAddress);
        m = BT.getClass().getMethod("createInsecureRfcommSocket", new Class[] { int.class });
        mBluetoothAdapter.enable();
        sock = (BluetoothSocket) m.invoke(BT, 1);
        Log.d("Bluetooth", "++++ Connecting to " + MacAddress);
        sock.connect();
        Log.d("Bluetooth", "++++ Connected");
        connected = true;
        in = sock.getInputStream();
        return true;
    } 
```

我感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T14:30:57.067

很可能您要求的是 Acer Iconia B1 中不存在的功能。

该平板电脑要么与蓝牙 2.1 不兼容（[此处](https://stackoverflow.com/questions/5613680/confused-about-the-new-bluetooth-api-createinsecurerfcommsocket-and-pairing)为第一个答案），要么根本无法连接到“A2DP 立体声耳机”以外的设备（[此处](http://community.acer.com/t5/Tablets/Acer-Iconia-B1-bluetooth/td-p/76703)为最后一篇文章）。

# openssl - 如何配置我的 apache 服务器来验证我颁发给用户的 x509 证书？

> ID：15303833
> 
> 赞同：-2
> 
> 时间：2013-03-08T21:43:36.853
> 
> 标签：openssl, x509, authentication

提前抱歉，这最终可能是一个冗长而混乱的帖子；因为这就是我所在的地方：我已经尝试这样做两天了，我很困惑：P

上下文：我有一个网站（我们将其称为 www.mysite.com），并且我从主要 CA 获得了有效证书。HTTPS 工作正常，证书是各​​种有效的。

目标：我现在想向我授权使用我的网站的人颁发证书，以便我可以为其添加额外的安全层，并让 Apache 在他们看到 PHP 网站的结果之前拒绝未经授权的用户或使用这些凭据登录。

我所做的：我至少遵循了三个不同的教程，并阅读了六篇关于如何颁发这些证书的教程，但简而言之，它们无法验证。大多数教程都谈到了建立我自己的自签名 CA 证书，然后使用该证书的密钥来签署用户请求的其他证书。我已经尝试过了，Firefox（版本 19.02）和 IE（版本 8 :( ）都无法连接，我不明白为什么了。

所以具体的问题：

**1\. Apache的命令有错吗？** 当我包括：

```
 SSLEngine on    
    SSLCertificateFile /etc/path/to/www.mysite.com.crt
    SSLCertificateKeyFile /etc/path/to/www.mysite.com.key
    SSLCACertificateFile /etc/path/to/www.mysite.com.cabundle
    SSLVerifyClient require
    SSLVerifyDepth 10 
```

在我的 httpd.conf 文件中，服务器适当地拒绝没有证书的访问。但是，我已经为最终用户生成了我认为是有效的证书，但它仍然被拒绝。如果上面显示的文件是主要 CA (VeriSign) 给我的文件，那么我只是创建了一个错误的用户证书吗？那些 apache 命令实际检查的是什么？

**2\. openssl 的标志是如何工作的？** 我正在创建用户的证书：

```
openssl ca -in ./path/to/usersrequest.csr -cert ./etc/path/to/www.mysite.com.crt -keyfile ./etc/path/to/www.mysite.com.key -out ./path/to/userscert.crt 
```

也许我使用了错误的密钥或什么？我应该使用从 VeriSign 证书中获得的公钥还是私钥？如果我理解正确阅读的内容，我应该能够简单地向我的最终用户颁发一个新证书，用我的“官方”证书中的相同密钥签名，它应该可以工作......但它不是:(

我也试过：

```
openssl x509 -req -CA /etc/path/to/cert.pem -CAkey /etc/path/to/cert.pem -CAcreateserial -in usersrequest.csr -out user.crt 
```

我得到一个错误，上面写着`unable to load CA private key`......我什至不知道那是什么意思。

最后，我知道这些可能是 n00b 问题，答案正盯着我的脸，但我一直在努力学习这个主题并编写代码两天了，我的大脑只是被炒了......我会继续努力，但如果有人能指出我正确的方向，我会非常感激。

TIA，科沃夏克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:29:13.320

您需要了解签署服务器证书的 CA 与用于签署用户客户端证书的自签署证书之间的区别。

您使用 SSLCertificateChainFile 指令向 Apache HTTPd 提供第一个，如果我正确理解您的设置，您需要指定 /etc/path/to/www.mysite.com.cabundle 作为参数。

第二个由 SSLCACertificateFile 指令提供。

理论上它们可能是相同的，但这意味着您需要为您需要颁发的每个客户端证书发送一个由主要 CA 签名的证书请求 (CSR)，因为您不能自己签名。您不能使用服务器证书对其进行签名，因为它不是AC而是服务器证书，因此无法有效地签署其他证书。

您需要做的是生成一个自签名 CA，将其与 SSLCACertificateFile 一起提供给 Apache HTTPd，并颁发由该 CA 签名的客户端证书。

# ember.js - Ember.js：非标准路由，请输入

> ID：15303838
> 
> 赞同：4
> 
> 时间：2013-03-08T21:43:54.153
> 
> 标签：ember.js

我们正在构建的应用程序将由几个较小的子应用程序组成。

```
/ <-- main application
/accounts <-- sub app
/reports <-- sub app
/contacts <-- sub app 
```

我们将利用 Django 路由将用户定向到每个子应用程序。所以当用户点击站点的主页时，它是纯 Django。当他们点击帐户时，它是纯 Django。当用户登陆每个子应用页面时，Ember 将接管并从那里开始。

当用户访问帐户子应用程序时，我将用户转换到帐户路由：

```
Social.IndexRoute = Ember.Route.extend({
    redirect: function() {
        this.transitionTo('accounts');
    }
}); 
```

该 URL 如下所示：

```
/accounts/#/accounts/27 
```

我想做的是在用户访问本质上是索引页面时加载帐户信息。这包含属于用户的帐户列表。当他们选择一个帐户时，我想链接到帐户路由：

```
/accounts/#/account/27 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:17:36.973

您可以在路由器上设置一个 rootURL，然后该应用程序将愉快地存在于子目录中。

```
Social.Router.map(function() {
  this.resource('accounts');
});

Social.Router.reopen({
  location: 'hash',
  rootURL: '/accounts'
});

Social.IndexRoute = Ember.Route.extend({
  redirect: function() {
    this.transitionTo('accounts');
  }
}); 
```

# neo4j - 从“图形数据库”一书中导入数据集

> ID：15303839
> 
> 赞同：0
> 
> 时间：2013-03-08T21:44:00.817
> 
> 标签：neo4j, graph-databases

希望我在正确的地方发布这个问题。我正在阅读Ian Robinson 早期版本的《图形数据库》[一书。](http://www.neotechnology.com/2013/02/graph-databases/)无论如何要从书中导入图表，这样我就可以自己制作书籍示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T17:10:23.700

我们确实计划提供大部分图表。我们将在console.neo4j.org 上放置例如第4 章中的小图；第 7 章中较大的示例将作为源代码提供，包括我们在编写查询时编写的所有测试。

然而，我们还没有准备好发布这些。我们仍在根据技术审查的反馈修改所有示例。

伊恩

# android - 带有阴影的 Android UI 组件

> ID：15303848
> 
> 赞同：0
> 
> 时间：2013-03-08T21:44:41.953
> 
> 标签：android, user-interface, styling

我想在我的 Android 应用程序中拥有两个 UI 组件。

第一个是（有点单选按钮）文本，当点击/单击时，嵌入阴影气泡中出现：

![单选按钮](../Images/885a05cf6573326984f2ecad86b1f00b.png)

参见 HTML 演示： http: [//fiddle.jshell.net/Vq2A3/1/show/](http://fiddle.jshell.net/Vq2A3/1/show/)

第二种是可拖动卡片，在被拖动时以较大的阴影突出：

![可拖动卡片](../Images/a4a4335947f28639d6e3dde2d6f8c5ec.png)

参见 HTML 演示： http: [//fiddle.jshell.net/yVnz4/2/show/](http://fiddle.jshell.net/yVnz4/2/show/)

在 Android 中实现这些东西的惯用方式是什么 - 即两态组件、圆角形状、嵌入阴影、可变框阴影、拖动？

我想学Android，所以不需要现成的组件。我更喜欢描述如何做到这一点的资源链接。

谢谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:44:03.343

您可以在 xml 文件中设置角点、阴影等，例如

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" >
        <shape>
            <solid
                android:color="#449def" />
            <stroke
                android:width="1dp"
                android:color="#2f6699" />
            <corners
                android:radius="3dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>
    <item>
        <shape>
            <gradient
                android:startColor="#449def"
                android:endColor="#2f6699"
                android:angle="270" />
            <stroke
                android:width="1dp"
                android:color="#2f6699" />
            <corners
                android:radius="4dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>
</selector> 
```

对于拖动按钮，请尝试以下操作：

```
 button.setOnTouchListener(new OnTouchListener() {
         public boolean onTouch(View v, MotionEvent me){
             if (me.getAction() == MotionEvent.ACTION_MOVE  ){
                LayoutParams params = new LayoutParams(v.getWidth(), v.getHeight(),(int)(me.getRawX() - (v.getWidth() / 2)), (int)(me.getRawY() - (v.getHeight())));
                v.setLayoutParams(params);
             }
             return true;
         }
     }); 
```

有很多例子。在 google 中搜索，例如：“自定义按钮”、“拖放按钮”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T00:52:32.573

您可以为按钮做的另一件事是使用图像按钮和 onClick 更改按钮的图片`myButton.setImageDrawable(Image_drawable);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:31:52.877

似乎最好的方法是使用 9-patch 图像。

其他有趣的解决方案：

*   [http://www.uifuel.com/android-creating-a-drop-shadow-in-xml-layout/](http://www.uifuel.com/android-creating-a-drop-shadow-in-xml-layout/) - 不是很容易使用，不可扩展

*   [http://blog.donnfelker.com/2011/08/01/android-rounded-corners-with-a-beveldrop-shadow/](http://blog.donnfelker.com/2011/08/01/android-rounded-corners-with-a-beveldrop-shadow/) - 斜角阴影

相关主题：[在 Android 上为自定义形状添加阴影](https://stackoverflow.com/questions/5197892/add-shadow-to-custom-shape-on-android)

# sdk - BOXI 报告的上次刷新时间戳

> ID：15303854
> 
> 赞同：0
> 
> 时间：2013-03-08T21:45:00.780
> 
> 标签：sdk, business-objects, business-objects-sdk

在业务对象 XI R3 中检索报表的上次刷新时间的信息存储方法是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:21:55.790

拥有 com.businessobjects.rebean.wi.DocumentInstance 后，您可以通过询问属性来获取上次运行时间。

```
Properties docProps = documentInstance.getProperties();
docProps.getProperty(PropertiesType.LAST_REFRESH_DURATION, "0"); 
```

所有详细信息都可以在 <WEB APP 安装>\AnalyticalReporting\viewers\cdz_adv\viewDocument.jsp 中找到

# jquery - jscrollPane 根本不工作

> ID：15303855
> 
> 赞同：5
> 
> 时间：2013-03-08T21:45:01.890
> 
> 标签：jquery, jscrollpane

我知道我使用了一个**糟糕**的标题，但我无法用不同的方式来描述它。

代码在这里：http: [//jsfiddle.net/FFjgc/3/](http://jsfiddle.net/FFjgc/3/)

**标题**：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<link rel="stylesheet" type="text/css" href="http://jscrollpane.kelvinluck.com/style/jquery.jscrollpane.css" />
<script type="text/javascript" src="http://jscrollpane.kelvinluck.com/script/jquery.jscrollpane.min.js"></script>
<script type="text/javascript" src="http://jscrollpane.kelvinluck.com/script/jquery.mousewheel.js"></script>
<script type="text/javascript" src="http://jscrollpane.kelvinluck.com/script/mwheelIntent.js"></script>

<script type="text/javascript">
$(document).ready(function() {
    $('.scroll').jScrollPane();
});
</script> 
```

和**CSS**

```
.scroll {
width: 100%;
height: 200px;
overflow: auto;
} 
```

这很简单，我使用了所有的库，并且我确信代码中没有错误，因为我在过去 2 小时内查看它。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T08:21:16.573

jQuery版本没有问题。您应该用`p`标签包装您的内容以运行 Jscrollpane。通过这种方式，您的内容将看起来更加[语义化](http://reference.sitepoint.com/html/p)。

[示例在这里](http://jsfiddle.net/agriboz/FFjgc/5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-28T14:10:23.377

我运行了这个问题，最后 jScrollPane 正在使用 jQuery 1.9.1 处理它的所有功能。

解决方案非常简单：在 window.load 上初始化插件。

```
$(window).load(function) {
  $(".your-selector").jScrollPane();
} 
```

我希望这对某人有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T08:09:13.467

问题是 de Jquery 版本。

使用[http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js进行测试](http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js)

# google-api - Google Wallet for Digital Goods 是否支持自动退款？

> ID：15303857
> 
> 赞同：5
> 
> 时间：2013-03-08T21:45:10.393
> 
> 标签：google-api, payment-gateway, android-pay

此 API 是否*仅*支持从买家到商家的付款而没有其他功能？似乎这个应用内购买 API 不支持以编程方式处理退款和取消。我喜欢嵌入式体验，但我需要一个更强大的 API 来使用。

查看 Google Checkout API，很明显这允许以编程方式进行订单退款。但是，看起来也无法在 Google Wallet for Digital Goods 和 Google Wallet for Checkout 之间使用 MercerID（基本上是 API 密钥）。

**Google Wallet for Digital Goods 是否支持程序化退款？如果不支持，您是否仍可以通过 Checkout API 使用 Digital Goods 嵌入式支付体验？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-20T08:55:24.037

Google Wallet for Digital Goods API 仅支持购买 ( [https://developers.google.com/commerce/wallet/digital/docs/jsreference](https://developers.google.com/commerce/wallet/digital/docs/jsreference) )。

关于 Wallet 和 Checkout API 是否一起工作，2012 年 4 月谷歌用户回答该问题的帖子说

> 现在可以通过 Merchant Center 手动处理应用内退款。正如您所指出的，自动退款解决方案是一项重要功能，它在我们的待办事项列表中。

但是到目前为止，AFAIK 没有任何 Google Wallet API 支持取消/退款。

您可能还需要考虑：

> 2013 年 11 月 20 日，Google Checkout 将不再受支持。如果您使用 Google Checkout 处理付款，则需要迁移到新的解决方案以避免中断您的业务。

（[https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Processing?hl=ro&csw=1#order_processing_api](https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Processing?hl=ro&csw=1#order_processing_api)）

# ios - 如何编写自己的自定义 GKMatchMakerViewController？

> ID：15303859
> 
> 赞同：1
> 
> 时间：2013-03-08T21:45:23.857
> 
> 标签：ios, objective-c, xcode, cocos2d-iphone, game-center

我在开始实现自己的配对 UI 时遇到了麻烦（我认为要替换 GKMatchMakerViewController）。用户界面将是简单的空白屏幕，上面写着“正在寻找匹配”。

我的问题是，我不知道如何开始。所以我想知道是否有人有任何涵盖基础知识的已知教程？

我进行了谷歌搜索，但找不到任何有关如何执行此操作的源代码或文档，只有类参考:(

谢谢！

另外，如果您能指出我实施排名匹配系统实施的方向，那就太好了:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:49:42.420

使用 GKMatchMaker 发送匹配请求。等待回复。

同时显示一个带有“寻找匹配”标签的空白场景。

我相信没有教程，因为它很简单。:)

# ruby-on-rails - 通过 virtualbox 在 IE8 中测试你的 Rails 应用程序

> ID：15303861
> 
> 赞同：0
> 
> 时间：2013-03-08T21:45:26.137
> 
> 标签：ruby-on-rails, ruby, windows, macos, virtualbox

我正在我的 mac 中开发一个 rails 应用程序并在 localhost:/3000 进行测试我需要测试 IE8 中的一些功能。我下载了 virtualbox 并为它设置了一个虚拟机。我在我的 mac 中运行我的 rails 服务尝试了以下不同的方式，但没有奏效。

```
http://192.168.1.2:3000 
```

在windows cmd中做了ipconfig，发现IP地址是10.0.2.15。

```
http://10.0.2.15:3000 
```

在我的 Mac 上做了一个主机名，并在我的 Windows 中尝试了以下操作：

```
mac-hostname:3000 
```

但以上都没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:31:53.693

这是我为解决这个问题所做的。我更新了 /etc/hosts 文件，添加了 IP 地址并将 localhost 重命名为其他内容

```
10.0.2.2 localtest 
```

在我的浏览器中，我输入：

```
http://localtest:3000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T00:04:28.017

我有这个工作。检查您的虚拟机设置。在我的情况下，网络选项卡已将“附加到：”设置为 NAT。

主机地址 (192.168.1.2) 是您应该将浏览器指向的位置。10.0.2.15 地址属于 VM 客户端。您应该能够在虚拟机中打开一个命令窗口，然后`tracert 192.168.1.2`在 2 跳内完成并到达那里。

PS：您也可以使用桥接适配器来实现此功能。我只是告诉你什么对我有用。

# ios - UIButton - 默认状态下的图像，选定状态下的标题

> ID：15303864
> 
> 赞同：5
> 
> 时间：2013-03-08T21:45:29.353
> 
> 标签：ios, objective-c, image, uibutton, title

所以我正在通过 iTunes U 完成 2013 年冬季斯坦福 iOS/Objective-C 课程的第二个作业，最后一部分让我发疯。

这是一款卡牌配对游戏。每张卡片在视图中都表示为一个 UIButton。当卡片对象面朝上时，UIButton 处于选中状态，而当卡片面朝下时，UIButton 处于默认状态。找到匹配项后，也可以禁用卡片。

作业要求在卡片背面放一张图片。换句话说，每个 UIButton 在默认状态下都需要显示一个图像，但是当它处于选中或禁用状态时只需要标题属性。

看起来很简单...

首先，我在 GUI（故事板）中尝试了这个，将背景图像设置为我的图像，然后确保选中和禁用状态都没有图像。这导致图像显示，但随后标题文本仅显示在图像上。一些搜索发现了这个原因：除非明确告知，否则 UIButton 会将所有其他 UIControlStates 默认为 UIControlStateNormal。

现在我一直试图让它以编程方式工作，但仍然没有运气。所有作为卡片的 UIButtons 都在一个 IBOutletCollection 中，它是一个 NSArray (cardButtons)。在 viewDidLoad 函数中，我有一个遍历所有按钮的 for 循环：

```
UIImage *cardBack = [UIImage makeSomeImage...];
for (UIButton *oneButton in cardButtons) {
[oneButton setBackgroundImage:cardBack forState:UIControlStateNormal];
[oneButton setBackgroundImage:nil forState:UIControlStateSelected];
} 
```

这仍然给我同样的问题。它肯定成功地将图像设置为默认状态，但是当我单击模拟器中的按钮时，图像仍然存在，而标题只是显示在它上面。

在 GUI 和编程中，我可以得到一个不同的图像以显示在选定和禁用状态。我所要做的就是添加：

```
[oneButton setBackgroundImage:anotherImage forState:UIControlStateSelected]; 
```

循环和所有按钮在选择时显示其他图像。

我不能做的，也是让我发疯的，是试图在选择时没有背景图像，以便 UIButton 只显示标题......

编辑：

虽然不是一个理想的解决方案（我认为使用 UIButton 中的 imageView 属性可能会有所作为，但我不确定），但我想出了一种有点固定的方法来完成这项工作。

首先，我将正在使用的 UIImage 放入名为 cardBackImage 的类属性中。

然后，在每次对模型进行更改时循环遍历所有卡片按钮的 updateUI 函数中，我添加了这行代码：

```
[cardButton setBackgroundImage:(oneCard.isFaceUp ? nil : self.cardBackImage) forState:UIControlStateNormal]; 
```

因此，每次卡片对象被“翻转”时，UIButton 都必须将 UIImage 加载或卸载到其实例变量中或从中卸载。Bleh ...就像我说的，不理想，但它有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:23:03.263

我建议当按钮改变它的状态时简单地改变图像，即被触摸。我会写一个这样的方法：

```
- (void)swapBackgroundImagesOfButton:(UIButton *)button
{
    UIImage *normalImage = [button imageForState:UIControlStateNormal];
    UIImage *selectedImage = [button imageForState:UIControlStateSelected];

    [button setImage:selectedImage forState:UIControlStateNormal];
    [button setImage:normalImage forState:UIControlStateSelected];
} 
```

然后，`selected`当您显示或隐藏图像时，您只需调用该方法，而不是设置按钮的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T22:15:59.257

为什么不尝试按钮的图像属性而不是背景图像？它会在图像存在时隐藏标题文本

```
UIButton *button;
[button setImage:[UIImage imageNamed:@"someImage"] forState:UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-26T09:05:42.063

这是一个更简单的解决方案，可让您根据状态仅使用情节提要设置 UIButton 图像和标题。在属性检查器中，您将按钮图像设置为默认状态，然后为所选状态设置按钮标题，并为图像添加空格字符，如您所见

[![在此处输入图像描述](../Images/a1eaccea092d121bd4c5fec90fe01e52.png)](https://i.stack.imgur.com/eiZJK.png)

然后您可以通过编程方式更改状态`self.button.isSelected = true`并查看图像变成文本

# sql - 返回每个公共组的最新日期

> ID：15303873
> 
> 赞同：0
> 
> 时间：2013-03-08T21:46:01.623
> 
> 标签：sql, sql-server-2008, sql-server-2005

使用 SQL Server 2005/2008 和此查询：

```
DECLARE @FromDate DATETIME, @Todate DATETIME

SET @FromDate = '1/1/2012'
SET @Todate = '1/1/2013'

SELECT
    CASE WHEN (GROUPING(s.storeid)=1) THEN 'Total' ELSE s.storeid END AS Store,
    CAST(SUM(p.amount) AS DECIMAL(12,2)) AS Paid,
    CAST((SELECT 
            TOP 1 s.TRSDate 
        FROM 
            RPTrs s, 
            rpPay p 
        WHERE 
            s.StoreID = p.StoreID AND 
            s.ReceiptNO = p.ReceiptNo 
        ORDER BY 
            s.TRSDate DESC) AS DATETIME) AS LastTransaction
FROM 
    rptrs s, rppay p
WHERE 
    s.ReceiptNO = p.ReceiptNo AND 
    s.StoreID = p.StoreID AND 
    s.TRSDate >= @FromDate AND 
    s.TRSDate <= @Todate
GROUP BY 
    s.StoreID
WITH ROLLUP 
```

我得到这个输出：

![在此处输入图像描述](../Images/5e1912e774ab98cfb6001bb0c8b6e405.png)

它为 Store 01 添加了正确的日期，但没有为 Store 02 添加正确的日期，我希望 Total 行中没有任何内容。

预期结果 ：

```
 | Store | Paid     | LastTransaction
-----------------------------------------------
1 | 01    | 59490.05 | 2013-03-06 00:00:00.000
2 | 02    | 238.15   | 2012-12-03 00:00:00.000
3 | Total | 59728.20 | 
```

情况。此查询返回每个商店的总金额和总计。除此之外，我现在需要添加的是显示的商店中发生的最后一笔交易。由于日期范围介于 2012 年 1 月 1 日和 2013 年 1 月 1 日之间，因此商店 2 中发生的最后一笔交易是预期结果中的交易。商店 1 在另一个时间进行了最后一笔交易。

第一个表是 RPTrs，第二个是 rpPay

![在此处输入图像描述](../Images/86633eaea554ac02cbea276e85bead04.png)

问题 - 我如何获得预期的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:54:19.303

> 根据您提供的样本。试试这个。您需要根据您的要求和数据对其进行一些修改。

```
SELECT R.StoreID, 
       CAST(SUM(p.amount) AS DECIMAL(12,2)) AS Paid,
       MAX(TRSDate)
FROM RPTrs R
INNER JOIN rpPay p ON R.StoreID = P.StoreID
GROUP BY R.StoreID 
```

> [SQL 小提琴演示](http://sqlfiddle.com/#!3/c0bfc/14)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T22:19:17.383

我能够解决我的问题的一部分半。

```
DECLARE @FromDate DATETIME, @Todate DATETIME

SET @FromDate = '1/1/2012'
SET @Todate = '1/1/2013'

SELECT
    CASE WHEN (GROUPING(s.storeid)=1) THEN 'Total' ELSE s.storeid END AS Store,
    CAST(SUM(p.amount) AS DECIMAL(12,2)) AS Paid,
    CASE WHEN (GROUPING(s.StoreID)=1) THEN null ELSE CAST(MAX(s.TRSDate) AS DATETIME) END AS LastTransaction
FROM 
    rptrs s, rppay p
WHERE 
    s.ReceiptNO = p.ReceiptNo AND 
    s.StoreID = p.StoreID AND 
    s.TRSDate >= @FromDate AND 
    s.TRSDate <= @Todate
GROUP BY 
    s.StoreID
WITH ROLLUP 
```

这使 ：

![在此处输入图像描述](../Images/501c7aa2b4b4cd3607bb2e4e6832b676.png)

现在，如何将`NULL`哪个显示`DATETIME`为空白？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T22:44:35.380

对我有用的最终答案：

```
DECLARE @FromDate DATETIME, @Todate DATETIME

SET @FromDate = '1/1/2012'
SET @Todate = '1/1/2013'

SELECT
    CASE WHEN (GROUPING(s.storeid)=1) THEN 'Total' ELSE s.storeid END AS Store,
    CAST(SUM(p.amount) AS DECIMAL(12,2)) AS Paid,
    ISNULL(CONVERT(VARCHAR(50),(CASE WHEN (GROUPING(s.StoreID)=1) THEN null ELSE CAST(MAX(s.TRSDate) AS DATETIME) END)), '')AS LastTransaction
FROM 
    rptrs s, rppay p
WHERE 
    s.ReceiptNO = p.ReceiptNo AND 
    s.StoreID = p.StoreID 
GROUP BY 
    s.StoreID
WITH ROLLUP 
```

# .net - 对 ManagementObjectCollection.Count 的引用引发无效的类异常

> ID：15303877
> 
> 赞同：1
> 
> 时间：2013-03-08T21:46:02.703
> 
> 标签：.net, wmi

在下面的代码段中，注释行将引发 System.Management.ManagementException 消息“无效类”。但是，在迭代集合 **后**引用 Count 属性可以正常工作。

此代码来自一个正在运行的单元测试，然后开始失败。我无法确定发生了什么变化。

```
ManagementScope scope = new ManagementScope(@"root\mypath");
scope.Options.Impersonation = ImpersonationLevel.Impersonate;
ObjectQuery query = new ObjectQuery("SELECT * FROM myclass");
ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query);
ManagementObjectCollection result = searcher.Get();
//int count = result.Count // throws exception
foreach (ManagementObject mo in result)
{
    Console.WriteLine(mo.Path);
}
int count = result.Count // no problem 
```

有任何想法吗？

# google-chrome - SVG 动画在 chrome 中不起作用

> ID：15303883
> 
> 赞同：0
> 
> 时间：2013-03-08T21:46:36.050
> 
> 标签：google-chrome, animation, svg

该动画在 Firefox 中完美运行……但在 Chrome 中却不行。多边形没有动画？ [JSFiddle](http://jsfiddle.net/WscqA/4/)

```
<polygon fill="url(#grad1)" points="503,275 529,275 529,275 503,275">
    <animate attributeName="points"
         calcMode="linear"
         begin="1s" dur="0.4s"
         from="503,275 529,275 529,275 503,275"
         to="503,275 529,275 843,335 789,335"
         fill="freeze"/> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:42:24.633

Chrome（最高版本 25.0.1364.152）不完全支持 svg。

一些 svg 功能也不支持`Firefox`。例如`animateTransform`，作为 svg 标记的直接子项的标记不会为`Firefox`和中的 svg 设置动画`chrome`，尽管 W3 文档说它应该为 svg 设置动画，

所以最好测试你的svg `opera`，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:25:46.937

好的，让我再试一次 - 没发现你只是在看多边形。看起来 animate 不能直接在 Chrome 中的多边形上工作，但您可以通过在形状上放置过滤器并为过滤器区域设置动画来获得相同的效果。这有点hacky，但它可以让你到达你想要的地方：

```
 <filter id="animateClip" x="0%" y="0%" width="100%" height="0%">
         <animate attributeName="height"
         attributeType="XML"
         calcMode="linear"
         dur="1s"
         from="0%"
         to="100%"
         fill="freeze"/>
        <feColorMatrix type="identity"/>
    </filter> 
```

颜色矩阵只是为了给出过滤结果。Chrome 不喜欢空的过滤器。

# php - 使用地理编码从输入字段向 Google 地图添加标记且无页面刷新

> ID：15303886
> 
> 赞同：-1
> 
> 时间：2013-03-08T21:46:47.113
> 
> 标签：php, javascript, ajax, google-maps-api-3, geocode

我正在寻求帮助创建一些代码来完全按照标题所说的那样做......

我希望用户

1.  在表单输入字段中输入地址
2.  让那个地址被谷歌地理编码（已经有这个功能了）
3.  向地图添加标记

我有执行此操作的代码，唯一的问题是页面刷新。我需要有人能够在不刷新页面的情况下执行此操作，因为我不想存储有关这些标记的任何信息。理想情况下，他们可以在不刷新的情况下添加 1 - 5 个标记……一旦他们离开此页面，信息就不会被存储。

任何代码或帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T03:04:23.770

要停止刷新，只需在表单声明中添加一个 onsubmit 子句。以下内容来自我现在正在使用的我自己的代码。

```
<form id="postcodeEntry" method="post" action="#" onsubmit="' + this.objName + '.calcRoute(\'driving\',this.postcode.value);return false;"> 
```

只要您从该子句调用的 JavaScript 函数中没有错误，则返回 false 将阻止页面更改并使表单与页面上/中的 JavaScript 直接交互。

如果使用任何提交按钮或输入键从文本框中提交表单，这将起作用。

# math - 多个矩形的边界（凹）多边形？

> ID：15303892
> 
> 赞同：3
> 
> 时间：2013-03-08T21:47:03.267
> 
> 标签：math, geometry, bounding-box

给定一组相交的矩形，是否有标准算法来找到它们的边界多边形？（一个多边形与矩形的并集完全相同的区域。）可以假设矩形都以相同的方式定向，边沿两个正交轴。

在搜索中，我找到了凸边界多边形的算法，但在这里我真的更喜欢*只*包含矩形覆盖的区域，这很可能是凹的。

（如果矩形完全围绕一个区域，则可以将其包含在边界多边形内。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:50:52.647

我不知道是否有标准的方法可以做到这一点，但在我看来，边界多边形的顶点将是矩形的角和它们的边相交的点，不包括位于矩形内的点。

要对点进行排序，请从集合中的一个点开始。它要么是两条边的交点，要么是一个角，所以无论哪种方式，它都保证至少在两条边上。只需沿着其中一个边缘移动，直到到达下一个点。因为我们已经移除了内部点，所以我们总是会在到达内部之前碰到另一个顶点。

如果一个矩形的角沿另一个矩形的边缘，则必须小心，因为离开该角的一条路径将通向矩形的内部。所以有一些选择正确的边缘来追踪的元素。但是，如果您维护因位于内部而被排除的点的列表，您就会知道前往排除点是错误的方向。

**编辑** 让我试着更明确地说。

(1) 从每个矩形的每一边开始。计算它们相交的位置并在那里分割边缘。

(2) 现在你有了一个段列表。检查每个段的端点以查看它们是否在任何矩形内。

(3) 现在取任意一个外部端点，它是至少一个段的端点，它具有*另一个*外部端点。绘制从您的端点到另一个外部端点的线。

(4) 该外部端点也应该是具有另一个外部端点的*不同*段的端点。画一条线到那个外部端点。

(5) 重复直到你回到你开始的端点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T00:23:11.760

如果您需要计算矩形的并集，这就是计算几何中通常所说的“合并”操作。它通常通过扫描线算法轻松实现。

扫线方法通常需要相当大的初始投资：实施扫线引擎。一旦完成，引擎可以立即用于轻松地在输入几何上实现任何面向集合的操作，如“合并”、“与”、“或”、“差异”等。

[http://en.wikipedia.org/wiki/Boolean_operations_on_polygons](http://en.wikipedia.org/wiki/Boolean_operations_on_polygons)

同时，为轴定向（等轴测）几何实现扫描线引擎是一项相当简单的任务。当您需要处理大量输入时，即矩形数量相对较多时，这将是最佳方法。其他答案中提到的各种基于边缘遍历的方法仅适用于相对较小的输入。

# inheritance - 变量不在派生类中存储数据

> ID：15303893
> 
> 赞同：0
> 
> 时间：2013-03-08T21:47:08.597
> 
> 标签：inheritance, opencv

```
class A
{
public:
    virtual ~A() {}

    virtual Process(cv::Mat& img) {}
} ;

class B : public A
{
public:

     Process(cv::Mat& inputimage)
     {

        if (img.empty())
        {
            img = inputimage.clone();
            return;
        }

       else
           cv::imshow ("image", img);
    }
private:

       cv::Mat img;

  }; 
```

遇到条件时，此 img 始终为空。我在我的主要使用此代码的方式是：

伪代码

```
int main ()`
{
   A* a;

   a = new B;

   while(avi.notempty()
   {
       a.Process(nextFrame);
   }
} 
```

代码不完整，但本质上问题是变量没有以某种方式存储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T00:50:17.947

当我改变时问题就解决了

`img.copyTo(img2);`

到

`img2 = img.clone();`

谢谢 ！

# javascript - 仅编译 Handlebars.js 模板的一部分

> ID：15303903
> 
> 赞同：0
> 
> 时间：2013-03-08T21:47:56.020
> 
> 标签：javascript, backbone.js, handlebars.js

我有一个 Handlebars.js 模板，我想逐步编译，因为该模板的单独部分对应于不同的 Backbone.js 子视图。是否可以只编译`#subsection`以下模板的一部分？

```
<section id="widget">
    <h1>Widget Header!</h1>
    <nav id="nav">
        <!-- blah blah stuff here -->
    </nav>
    <section id="subsection">
        <!-- rah rah more stuff here -->
    </section>
</section> 
```

**注意：**我意识到你们中的许多人会想知道为什么我不应该只为每个模板使用一个文件。目前我只有一个使用这个模板，所以我没有理由把它分开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:58:27.120

基本上，根据您的要求，不，您不能渲染 Handlebars 模板的一个小节。

您需要的可能是多个模板；每个视图一个。然后你只能重新渲染视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:58:37.710

正确地，您需要很少的模板。一个子视图的一个模板。

但是你可以使用 jQuery（我不知道 zepto）。

```
var html = widgetTemplate(); // your template    
var el = $(html);
var elementForSubvie = el.find('#subsection'); 
```

它有效，但它的方式不好。

# php - curl - 从网站上抓取大量内容

> ID：15303904
> 
> 赞同：2
> 
> 时间：2013-03-08T21:47:57.270
> 
> 标签：php, curl

我很好奇是否有人对利用 PHP/CURL（或其他技术）从网站下载内容的最佳方法有任何建议。现在我正在使用 curl_multi 一次执行 10 个请求，这对一些人有帮助。

我确实需要每天请求大约 100K 页，这可能会有点乏味（现在需要 16 个小时）。我最初的想法只是设置多个虚拟机并拆分任务，但想知道除了并行化之外我是否还缺少其他东西。（我知道你总是可以在这个问题上扔更多的机器嘿）

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:54:05.657

这取决于您对内容的处理方式，但请尝试使用排队系统。

我建议[Resque](https://github.com/chrisboulton/php-resque)。它使用 Redis 来处理队列。它专为同时速度和多个请求而设计。它还有一个`resque-web`选项可以提供一个不错的托管 UI。

您可以使用一台机器将新 URL 排队，然后您可以让一台或多台机器处理队列。

其他选项：[Kestrel](https://github.com/robey/kestrel)、[RabbitMQ](http://www.rabbitmq.com/)、[Beanstalkd](http://kr.github.com/beanstalkd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:55:09.540

要检索 Web 内容，您可以使用 curl 或 fsockopen。可以[在 fsockopen 和 curl 之间哪种方法更好？](https://stackoverflow.com/questions/5933682/which-is-better-approach-between-fsockopen-and-curl).

# mysql - 如何将同一张表上的两个查询连接在一起？

> ID：15303906
> 
> 赞同：1
> 
> 时间：2013-03-08T21:47:59.517
> 
> 标签：mysql, select, join

我有一个名为**related_post**的 MySQL 表，如下所示：

```
+----+--------+--------+
| id | post_1 | post_2 |
+----+--------+--------+
|  1 |     25 |     26 |
|  2 |     25 |     27 |
|  3 |     25 |     28 |
|  4 |     26 |     27 |
|  5 |     26 |     28 |
|  6 |     27 |     28 |
|  … |     …  |     …  |
+----+--------+--------+ 
```

我需要检索给定帖子 ID 的所有相关帖子。

如果我提供“27”，我希望它返回一个以“25”、“26”和“28”作为值的列。

现在，我需要将其拆分为 2 个查询：

```
SELECT post_1 FROM related_post where post_2 = 27;
SELECT post_2 FROM related_post where post_1 = 27; 
```

我想知道是否可以只执行一个查询来完成相同的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T21:49:13.663

尝试`UNION`：

```
SELECT post_1 AS post FROM related_post where post_2 = 27
UNION
SELECT post_2 FROM related_post where post_1 = 27 
```

`UNION`还将删除重复项；如果你不想要这个然后使用`UNION ALL`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T21:52:03.327

您可以使用 CASE 语句在一个查询中执行此操作

```
SELECT CASE WHEN post_2 = 27 THEN post_1 ELSE post_2 END as post
FROM related_post 
WHERE post_2 = 27 OR post_1 = 27; 
```

# php - PHP/MYSQL 计数返回不正确的值

> ID：15303910
> 
> 赞同：-1
> 
> 时间：2013-03-08T21:48:15.830
> 
> 标签：php, sql, count

我正在创建一个函数来根据用户名和密码检查我的数据库，如果匹配则返回 true 值，如果不匹配则返回 false （我使用了一些打印值来为自己提供视觉帮助）。现在，我的数据库中唯一的字段是 id = 1、用户名 = muyiwa、密码 = 密码（无论如何是 SHA1 加密版本）。其他任何东西都应该抛出错误值的错误，或者在我的具体情况下，第 22 行：打印“否”。

然而，情况似乎并非如此。这是代码：

```
function checkLoginName($username, $password) {
    global $mysqli;
    $username = sanitizeData($username);
    $password = SHA1($password);

    $sql = "SELECT COUNT(`id`) FROM `users` WHERE `username` = '$username' AND `password` = '$password'";
    $query = mysqli_query($mysqli, $sql) or die("Error: ".mysqli_error($mysqli));
    $rows = mysqli_num_rows($query);
    if ($rows == 1) {
        //return true;
        print "yes!";
    } else {
        //return false;
        print "no";
    }
}

checkLoginName("poo", "ha"); 
```

只是为了验证，“poo”和“ha”不应该返回“yes！”的值。因为它们不存在于数据库中，但确实存在！其他一切似乎都正常，我相信这是我的逻辑错误的 SQL 错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T21:51:51.883

你的逻辑是错误的：

```
$sql = "SELECT COUNT(`id`) FROM `users` WHERE `username` = '$username' AND `password` = '$password'"; 
```

您正在选择`COUNT()`并且将始终在结果集中返回一行。

在这种情况下，您只需将其更改为：

```
$sql = "SELECT `id` FROM `users` WHERE `username` = '$username' AND `password` = '$password'"; 
```

或者您将查询保持原样，获取您的行并检查`COUNT`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:52:12.353

您正在选择`COUNT()`. 这将**始终返回一行**。

你不想检查`mysqli_num_rows`，因为它总是会`1`。相反，您想*获取*第一个结果行的第一列，因为那是您的`COUNT`结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T21:51:51.667

使用`COUNT(*)`（或任何聚合）将始终返回*至少*1 行。

您可以像下面这样包装它，仅当存在`COUNT`> 0 时才返回一行。

```
SELECT * 
FROM   (SELECT Count(`id`) AS count 
        FROM   `users` 
        WHERE  `username` = '$username' 
               AND `password` = '$password') a
WHERE  a.count > 0 
```

# java - JAVA，公共静态变量初始化

> ID：15303913
> 
> 赞同：1
> 
> 时间：2013-03-08T21:48:35.397
> 
> 标签：java, static, initialization

```
/* ---------------------- classes --------------- */

public class A {
  public static String str = "compile";
      public A() {
  }
}

public class B {
  public static String str = A.str;

  public B() {
  }
}

/* ----------------------------------------------- */

/* ------------ main class --------------------- */

public class C {

  public static void main(String[] args) {
    A.str = "runtime";
    A a = new A();
    B b = new B();

    // comment at the first, and comment this out next time
    //A.str = "runtime2";

    System.out.println(A.str);
    System.out.println(a.str);
    System.out.println(B.str);
    System.out.println(b.str);
  }
}

/* --------------------------------------------- */ 
```

结果是这样的......

1.  带注释：运行时运行时运行时

2.  不加评论：runtime2 runtime2 runtime 运行时

我理解 A 的情况，但我不理解 B 的情况。你能解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T22:00:44.560

`A`在您的代码中第一次出现时，`A.str`被初始化为“编译”，但随后它立即被“运行时”覆盖。

然后你声明你的`a`和`b`实例。但这是`B`第一次引用类的地方，所以它在*这里*被初始化为`A.str`，目前是“运行时”。

在您注释的代码中，

```
//A.str = "runtime2"; 
```

这只会改变`A.str`；`B.str`仍将指“运行时”。并且可以使用类名`A.str`或实例访问静态变量`a.str`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T22:08:42.530

java中的类在第一次被访问[时被加载和初始化。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.1)

所以在这里你的主要方法会发生什么：

1.  你写`A.str = ...`：此时（在赋值发生之前）类`A`被加载并初始化，变量`str`保存字符串`"compile"`
2.  在`A.str = "runtime";`旧值`"compile"`被覆盖后
3.  `A a = new A();`不会改变任何东西
4.  类也`B b = new B();`被`B`加载并初始化。的值得`B.str`到的实际值`A.str`

这就是解释第一个输出`runtime`的原因：一路

现在您取消注释 ，仅更改了类中`A.str = "runtime2";`的变量。保持在。`str``A``B.str``runtime`

这就是解释第二个输出的原因。

# c# - 如何使用 C#.net (VS2010/4.0+) 获取通过 USB 连接的 Android 设备的操作系统版本和设备名称？

> ID：15303915
> 
> 赞同：3
> 
> 时间：2013-03-08T21:48:39.310
> 
> 标签：c#, android, usb, windows-applications, device

我想在 C#.net 中构建一个 Windows 应用程序，当您将 Android 设备连接到计算机时，它应该识别已安装的 Adroid OS 版本（例如 4.0）和用户友好的设备名称（例如三星 Galaxy S3、三星 Galaxy Tab 8.9 等）通过 USB。

我尝试与`System.Management`班级一起识别我机器上连接的 USB 设备，但是，我遇到的问题是：

我只有 3 个 USB 端口，并在其中一个 USB 端口上连接了三星 Galaxy Tab 8.9，并尝试获取使用的 USB 设备列表，`USBhub WMI class`我在列表中得到了大约 6-7 个结果，包括三星设备。所以，这里的问题是：

1.  为什么我在查询 USBHub 时得到 6-7 个结果？我在这里做错什么了吗？

2.  如何过滤我的记录以仅列出连接了外部设备的那些 USB 端口而不是 6-7 结果？

3.  我找不到我期望的正确/用户友好的设备名称（例如三星 Galaxy Tab 8.9），也无法获得 Android 版本的操作系统。我尝试了“Caption”和“Description”属性，但它们具有非常通用的信息，例如“Samsung”。如何获取用户友好的设备名称和设备上安装的 Android 操作系统版本。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-08T23:44:55.773

您可以使用 Android SDK 中的[Android 调试桥](http://developer.android.com/tools/help/adb.html)从连接的设备中查询属性。您可以简单地`adb.exe`从 .NET 中启动该过程并使用结果。

例如`adb.exe shell getprop ro.product.model`会给你型号名称，`adb.exe shell getprop ro.build.version.release`会给你Android版本号。要获取给定设备的所有可用属性的完整列表，您也可以只运行`adb.exe shell getprop`.

请注意，属性名称并没有真正标准化，制造商不需要输入有价值的名称。产品型号通常包含设备的代号或产品标识符，在消费者中不常用来识别产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-23T08:01:05.947

我认为我们需要更改设备设置

1> 在你的 android 上，转到设置 -> 应用程序 -> 开发

2> 检查 USB 调试

3> 确保您的设备驱动程序已经安装。

Android 4.2 及更高版本带有安全性，不允许您在不更改设置的情况下触发 ADB 命令。

问候， 雅利安

# drupal - Drupal 7 - 将选项卡链接添加到节点编辑表单

> ID：15303918
> 
> 赞同：1
> 
> 时间：2013-03-08T21:48:49.797
> 
> 标签：drupal, menu, edit

为 Drupal 7 开发模块我似乎无法找到如何在编辑节点时添加指向水平选项卡或垂直选项卡的链接。我很确定我必须使用 hook_menu_alter 但仍然......

[菜单 1](http://i.stack.imgur.com/KYMYd.png)

[菜单 2](http://i.imgur.com/kGwxB6e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:41:42.503

你不需要使用`hook_menu_alter`，你可以使用`hook_menu`来定义新的路径：

```
/**
 * Implements hook_menu().
 */
function mymodule_global_menu() {
  $items['node/%/some_action'] = array(
    'title' => 'This Is A new Tab',
    'page callback' => 'mymodule_some_action_tab',
    'access arguments' => array('access content'),
    'type' => MENU_LOCAL_TASK,
  );
  return $items;
} 
```

替换`some_action`为您要使用的实际子路径，以及`mymodule_some_action_tab`选项卡的实际回调函数。

# c++ - 2个c++程序如何在同一个linux机器上调用彼此的类/函数？

> ID：15303919
> 
> 赞同：1
> 
> 时间：2013-03-08T21:48:55.243
> 
> 标签：c++, function, sockets, pipe, fifo

我是 C++ 的新手，所以我的词汇可能已经关闭。

我目前制作 100% ajax 网站，但想在 websockets 中工作以自动更新相关客户端。

我正在使用 fastcgi++ 和 websocket++。我想通过 websocket 提供所有数据，但通过 ajax 调用更新数据库。当我想让 ajax 页面触发 websocket 时，我的问题就出现了。

我已经阅读了有关套接字、fifo 和管道的信息，但我不确定哪一个最适合这种情况。

对于两个c++程序，一个ajax和一个websocket，在同一个linux盒子上，ajax程序如何安全异步调用websocket程序中的函数呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T22:24:44.803

让两个程序与同一个数据库通信。如果您需要某种方式向对方“投掷飞镖”以通知对方检查数据库，则可以使用共享内存或管道。通过管道发送一个字节就足够了。

# java - 为什么我在 spring 工具套件中收到这些错误。我认为这是因为我缺少一些库，但我不确定

> ID：15303923
> 
> 赞同：0
> 
> 时间：2013-03-08T21:49:13.590
> 
> 标签：java, eclipse, spring

我有以下导入，每个导入都有错误。

```
import org.apache.log4j.Logger;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody; 
```

错误是“无法解析导入 org.apache.log4j。” 每个特定于列出的导入。这会是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:52:31.710

确保所需的库（log4j 和 spring-web）在项目的构建路径上可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:54:54.190

![在此处输入图像描述](../Images/38559bfcc6e63b7669563abecbba12db.png)确保检查，右键单击项目-> 属性-> java 构建路径-> 库有那些罐子

# objective-c - iOS - 在转发类对象中找不到属性“视图”

> ID：15303924
> 
> 赞同：2
> 
> 时间：2013-03-08T21:49:33.450
> 
> 标签：objective-c, viewcontroller

我刚开始使用Objective -C。我的代码不断给出错误：在转发类对象'startPageViewController'中找不到属性'view'。我无法弄清楚它是什么！这是我的代码。

startPageViewController.h -

```
#import <UIKit/UIKit.h>

@class searchResultsViewController;
@class startPageViewController;

@interface startPageViewController : UIViewController

- (IBAction)switchViews:(id)sender;

@property (strong, nonatomic) IBOutlet UITextField * searchterm;
@property (nonatomic, retain) startPageViewController *blueViewController;
@property (nonatomic, retain) searchResultsViewController *yellowViewController;

@end 
```

startPageViewController.m -

```
#import "startPageViewController.h"
#import "searchResultsViewController.h"

@class searchResultsViewController;
@class startPageViewController;

@interface startPageViewController ()

@end

@implementation startPageViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (IBAction)switchViews:(id)sender {
    [self.view removeFromSuperview]; // <-- Error here
    [self.view insertSubview:_yellowViewController.view atIndex:0];
}

- (void)viewDidUnload {
    [self setSearchterm:nil];
    [super viewDidUnload];
}
@end 
```

searchResultsViewController.h -

```
#import <UIKit/UIKit.h>

@interface searchResultsViewController : UIViewController

@property (strong, nonatomic) IBOutlet UIWebView *googleResults;
@property (strong, nonatomic) IBOutlet UIWebView *bingResults;
@property (strong, nonatomic) IBOutlet UIWebView *amazonResults;
@property (strong, nonatomic) IBOutlet UIWebView *ebayResults;

@end 
```

searchResultsViewController.m -

```
#import "searchResultsViewController.h"

@interface searchResultsViewController ()

@end

@implementation searchResultsViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *googleUrlAddress = @"http://www.google.com/";
    NSURL *googleUrl = [NSURL URLWithString:googleUrlAddress];
    NSURLRequest *googleRequestObj = [NSURLRequest requestWithURL:googleUrl];
    [_googleResults loadRequest:googleRequestObj];
    // --------------------
    NSString *bingUrlAddress = @"http://www.bing.com/";
    NSURL *bingUrl = [NSURL URLWithString:bingUrlAddress];
    NSURLRequest *bingRequestObj = [NSURLRequest requestWithURL:bingUrl];
    [_bingResults loadRequest:bingRequestObj];
    // --------------------
    NSString *amazonUrlAddress = @"http://www.amazon.com/";
    NSURL *amazonUrl = [NSURL URLWithString:amazonUrlAddress];
    NSURLRequest *amazonRequestObj = [NSURLRequest requestWithURL:amazonUrl];
    [_amazonResults loadRequest:amazonRequestObj];
    // --------------------
    NSString *ebayUrlAddress = @"http://www.ebay.com/";
    NSURL *ebayUrl = [NSURL URLWithString:ebayUrlAddress];
    NSURLRequest *ebayRequestObj = [NSURLRequest requestWithURL:ebayUrl];
    [_ebayResults loadRequest:ebayRequestObj];
}

- (void)viewDidUnload {
    [self setGoogleResults:nil];
    [self setBingResults:nil];
    [self setAmazonResults:nil];
    [self setEbayResults:nil];
    [super viewDidUnload];
}
@end 
```

提前致谢！

顺便说一句，请不要太复杂。我只有 12 岁。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T00:36:48.240

The problem is the extraneous `@class` declarations in the `startPageViewController.m` file. Those are hiding the full definition you get from the `#import` statements.

You should only have `@class` forward declarations in a .h file (like you are already doing).

One other suggestion - It is standard practice in many programming languages, including Objective-C, that class names begin with an uppercase letter. Variables and method names should begin with lowercase letters. Doing this, along with everyone else, makes code easier to read.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:55:29.987

如果您包含头文件，则不需要转发声明。所以你可以删除：

```
@class searchResultsViewController;
@class startPageViewController; 
```

# javascript - 在 HTML 中，我需要创建一个执行 onclick 事件的提交按钮，一个使用距离公式计算距离的 JS 函数

> ID：15303931
> 
> 赞同：0
> 
> 时间：2013-03-08T21:49:48.130
> 
> 标签：javascript, html

```
<!DOCTYPE html>
<html>
<head>
<title>Home Lab 4</title>
 <head>

 </head>
 <body>

 <table border="4px" bordercolor="navy" bgcolor="white" cellpadding="4px">

 <tr>
 <td>X-coordinate 1:</td> 
 <td><input type="text" id="x1"></td>
 <td>X-coordinate 2:</td>
 <td><input type="text" id="x1"></td>
 </tr>
 <tr>
 <td>Y-coordinate 1:</td>
 <td><input type="text" id="x1"></td>
 <td>Y-coordinate 2:</td>
 <td><input type="text" id="x1"></td>

 </center>
 </table>  

<script type="text/javascript">
function distance()
{
distance=sqrt( (x2 - x1)^2 + (y2 - y2)^2 )

var a = [564,426];
var b = [56,784];

var xN = Math.pow( b[0] - a[0], 2 );
var yN = Math.pow( b[1] - a[1], 2 );

var distance = Math.sqrt(xN + yN);

alert(distance);
}

</script>

<br>
 <input type="button" onclick="distance()" value="distance">

</body>
</html> 
```

我不确定问题是什么，但我无法得到要计算的值。我还需要弹出警报以显示计算值的帮助。我试过无数次改变不同的东西，一切都保持不变。任何帮助都会非常好。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:07:14.127

我想你可能想写这样的东西：

```
<!DOCTYPE html>
<html>
<head>
<title>Home Lab 4</title>
</head>
 <body>

 <table border="4px" bordercolor="navy" bgcolor="white" cellpadding="4px">

 <tr>
 <td>X-coordinate 1:</td> 
 <td><input type="text" id="x1"/></td>
 <td>X-coordinate 2:</td>
 <td><input type="text" id="x2"/></td>
 </tr>
 <tr>
 <td>Y-coordinate 1:</td>
 <td><input type="text" id="y1"/></td>
 <td>Y-coordinate 2:</td>
 <td><input type="text" id="y2"/></td>
 </tr>
 </table>  

<script type="text/javascript">
function distance()
{
    var x1 = parseFloat(document.getElementById("x1").value);
    var x2 = parseFloat(document.getElementById("x2").value);
    var y1 = parseFloat(document.getElementById("y1").value);
    var y2 = parseFloat(document.getElementById("y2").value);
    var distance = Math.sqrt( Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2) );

    var a = [564,426];
    var b = [56,784];

    var xN = Math.pow( b[0] - a[0], 2 );
    var yN = Math.pow( b[1] - a[1], 2 );

    distance = Math.sqrt(xN + yN);

    alert(distance);
}

</script>

<br/>
 <input type="button" onclick="distance()" value="distance" />

</body>
</html> 
```

但是，无论如何，您的代码没有多大意义，因为您正在计算`distance`并覆盖它在`alert`...之前的行中的值

# php - WordPress ReAuth =1 使用 wpCAS 循环

> ID：15303934
> 
> 赞同：0
> 
> 时间：2013-03-08T21:50:00.903
> 
> 标签：php, wordpress, authentication, capistrano, cas

wpCAS**插件**似乎正在工作：我在包含**WordPress**安装（即）的网站上有一个**子域**，并且我正在运行**WordPress GitHub Repo**以及**Capistrano**以进行实际部署。这很重要，因为由于此设置，内容位于子目录中，即. 结果是，为了访问站点的管理部分，我必须在浏览器中输入。然而，访问前端网站只需要我输入. 够迷惑吗？**`test.mywebsite.com`****`test.mywebsite.com/wp``test.mywebsite.com/wp/wp-admin``test.website.com`******

 ******我正在使用**本地主机 MAMP 服务器**测试所有这些。`test.mywebsite.com`我还通过我的 Mac文件将 IP 重定向到我的本地机器也应该毫无价值`hosts`，所以一切都在本地机器上正确进行。

现在，问题来了：我将 wpCAS 插件与**RubyCAS 服务器**一起使用。一切正常，直到实际登录过程。

wpCAS 旨在简单地**将登录页面重定向到我的 CAS 登录名**，然后将输入到 CAS 界面**的凭据与 WordPress 数据库中的凭据进行匹配。**如果匹配，它（理论上）会将我带到管理页面，并且我的凭据已登录并正常工作。

作为此设置的结果，我的输入`localhost/wp/wp-admin`会将我带到`auth.mywebsite.com`CAS 界面，我可以在其中输入我的凭据。

但是，一旦我将凭据放入 CAS 接口，我就会遇到如下所示的**重定向循环**：

`wp-login.php?redirect_to=http%3A%2F%2Flocalhost%2Fwp%2Fwp-admin%2F&reauth=1`

和

`wp-admin/`

我们就这样绕来绕去！

知道为什么会发生这种情况以及如何解决问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:59:30.767

我得到了它！在插件文件夹`wpcas.php`内的文件中，第 85-123 行详细说明了**wpCAS**`wpCAS`的实际登录功能。**第 104**和**108**行详细介绍了 wpCAS 如何将您重定向到管理页面：

 ********104**：

```
wp_redirect( preg_match( '/^http/', $_GET['redirect_to'] ) ? $_GET['redirect_to'] : site_url( $_GET['redirect_to'] )); 
```

**108**：

```
wp_redirect( site_url( '/wp-admin/' )); 
```

但是，这会导致（出于我不知道的原因）***[DOOM](http://nooooooooooooooo.com/)***的重定向循环。然而，多亏了[这个技巧](http://maisonbisson.com/projects/wpcas/comment-page-1/#comment-246162)（非常感谢 Luigi Balzano 先生），我找到了解决方案。`wp_redirect`将这两行的函数更改为`wp_safe_redirect`，如下所示：

**104**：

```
wp_safe_redirect( preg_match( '/^http/', $_GET['redirect_to'] ) ? $_GET['redirect_to'] : site_url( $_GET['redirect_to'] )); 
```

**108**：

```
wp_safe_redirect( site_url( '/wp-admin/' )); 
```

这把我踢出了***[DOOM](http://nooooooooooooooo.com/)***的重定向循环。

该插件虽然已有两年历史，但仍可与**WordPress** 3.5.1 及以下版本完美配合。

希望这对您 wpCAS vagrants 有所帮助！************

# mysql - SQL 查询中包含注释时性能下降？

> ID：15303936
> 
> 赞同：0
> 
> 时间：2013-03-08T21:50:22.277
> 
> 标签：mysql, sql, optimization

我注意到复杂的 SQL 语句就像开发代码一样逐渐吸引评论。例如 -

```
select
    *
from
    table
where
    -- exclude 1 just because
    key <> 1 
```

或者，多行注释。

当 SQL 查询中包含注释时，性能会受到什么影响，或者这只是过早的优化？我知道这取决于大小等，我可以测试自己，但仍然想问这个问题，随意做出假设。我主要对 MySQL 感到好奇。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:04:48.883

性能会受到影响，但与实际运行查询相比可以忽略不计。我在查找硬数据时遇到了麻烦，但注释在很大程度上被忽略了（除非它们是特定于版本的功能注释）。

它们可能非常有用。例如，Facebook 将在他们的 MySQL 查询中添加 PHP 调用堆栈作为注释，这样他们就可以轻松地判断查询的来源。

# linux - 在 BASH 脚本中组合选项和参数

> ID：15303938
> 
> 赞同：0
> 
> 时间：2013-03-08T21:50:31.413
> 
> 标签：linux, bash

我的 Bash-Script 应该接受参数和选项。此外，参数和选项应该传递给另一个脚本。

我解决的第二部分：

```
for argument in "$@"; do
    options $argument
done

another_script $ox $arguments

function options {
  case "$1" in
    -x) selection=1
    -y) selection=2
    -h|--help) help_message;;
    -*) ox="$ox $1";;
    *) arguments="$arguments $1";;
  esac
} 
```

现在我不知道如何实现一个参数“-t”，用户可以在其中指定一些文本

它应该看起来像这样：

```
function options {
      case "$1" in
        -t) user_text=[ENTERED TEXT FOR OPTION T]
        -x) selection=1
        -y) selection=2
        -h|--help) help_message;;
        -*) ox="$ox $1";;
        *) arguments="$arguments $1";;
      esac
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T22:03:49.713

你可以用[`getopts`](http://www.gnu.org/software/bash/manual/bashref.html#index-getopts)这个

```
while getopts :t:xyh opt; do
    case "$opt" in
    t) user_text=$OPTARG ;;
    x) selection=1 ;;
    y) selection=2 ;;
    h) help_message ;;
    \?) commands="$commands $OPTARG" ;;
    esac
done

shift $((OPTIND - 1)) 
```

剩下的论点在`"$@"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T22:01:45.393

Your problem is that when options can take arguments, it isn't sufficient to process the arguments word-by-word; 您需要比提供`options`功能更多的上下文。把循环放在里面`options`，像这样：

```
function options {
    while (( $# > 0 )); do
        case "$1" in
            -t) user_text=$2; shift; ;;
            -x) selection=1 ;;
            # ...
        esac
        shift
    done
} 
```

然后调用`options`整个参数列表：

```
options "$@" 
```

您可能还想查看`getopts`内置命令或`getopt`程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T22:09:29.690

我会在 for 循环中执行 case 语句，以便我可以强制转换到第二个 next 参数。就像是：

```
while true
do
  case "$1" in
    -t) shift; user_text="$1";;
    -x) selection=1;;
...
  esac
  shift
done 
```

# javascript - 如何使用 html5 输入类型编号处理浮点数和小数分隔符

> ID：15303940
> 
> 赞同：143
> 
> 时间：2013-03-08T21:50:39.987
> 
> 标签：javascript, jquery, mobile, floating-point, html-input

我正在构建主要用于移动浏览器的网络应用程序。我使用数字类型的输入字段，因此（大多数）移动浏览器仅调用数字键盘以获得更好的用户体验。这个网络应用程序主要用于小数点分隔符是逗号而不是点的区域，所以我需要处理两个小数点分隔符。

如何用点和逗号覆盖整个混乱？

我的发现：

**桌面铬**

*   输入类型=数字
*   用户输入“4,55”输入字段
*   `$("#my_input").val();`返回“455”
*   我无法从输入中获得正确的值

**桌面火狐**

*   输入类型=数字
*   用户输入“4,55”输入字段
*   `$("#my_input").val();`返回“4,55”
*   没关系，我可以用点替换逗号并获得正确的浮点数

**安卓浏览器**

*   输入类型=数字
*   用户输入“4,55”输入字段
*   当输入失去焦点时，值被截断为“4”
*   让用户感到困惑

**视窗电话 8**

*   输入类型=数字
*   用户输入“4,55”输入字段
*   `$("#my_input").val();`返回“4,55”
*   没关系，我可以用点替换逗号并获得正确的浮点数

在这种情况下，当用户可能使用逗号或点作为小数点分隔符并且我想将 html 输入类型保留为数字以提供更好的用户体验时，有哪些“最佳实践”？

我可以将逗号“即时”转换为点，绑定键事件，它是否与数字输入一起使用？

## 编辑

目前我没有任何解决方案，如何从类型设置为数字的输入中获取浮点值（作为字符串或数字）。如果最终用户输入“4,55”，Chrome 总是返回“455”，Firefox 返回“4,55”，这很好。

同样令人讨厌的是，在 Android（经过测试的 4.2 模拟器）中，当我输入“4,55”以输入字段并将焦点更改为其他位置时，输入的数字会被截断为“4”。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-05-21T21:50:52.483

我认为上面的答案中缺少的是需要为`step`属性指定一个不同的值，它的默认值为`1`. 如果您希望输入的验证算法允许浮点值，请相应地指定一个步骤。

例如，我想要美元金额，所以我指定了如下步骤：

```
 <input type="number" name="price"
           pattern="[0-9]+([\.,][0-9]+)?" step="0.01"
            title="This should be a number with up to 2 decimal places."> 
```

使用 jQuery 检索值并没有错，但是您会发现直接使用 DOM API 来获取元素的`validity.valid`属性很有用。

我在小数点上遇到了类似的问题，但我意识到存在问题的原因是 Twitter Bootstrap 添加到具有无效值的数字输入的样式。

这是一个小提琴，演示了添加`step`属性使其工作，并测试当前值是否有效：

*   **[jsFiddle](http://jsfiddle.net/natchiketa/xrujZ/16/)**

**TL;DR：** *将 a`step`属性设置为浮点值，因为它默认为`1`.*

***注意**：逗号对我无效，但我怀疑如果我将操作系统语言/区域设置设置为使用逗号作为小数分隔符的某个位置，它会起作用。*注中*：在 Ubuntu/Gnome 14.04 中，操作系统语言/键盘设置 *德语* 不是这种情况。*

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-08T22:07:08.927

根据 w3.org，[数字输入的](http://www.w3.org/TR/html-markup/input.number.html#input.number)*值*属性被定义为[浮点数](http://www.w3.org/TR/html-markup/datatypes.html#common.data.float)。浮点数的语法似乎只接受点作为小数分隔符。

我在下面列出了一些可能对您有帮助的选项：

## 1.使用pattern属性

使用*[pattern](http://www.w3.org/TR/html5/forms.html#the-pattern-attribute)*属性，您可以以 HTML5 兼容的方式使用正则表达式指定允许的格式。在这里，您可以指定允许使用逗号字符并在模式失败时提供有用的反馈消息。

```
<input type="number" pattern="[0-9]+([,\.][0-9]+)?" name="my-num"
           title="The number input must start with a number and use either comma or a dot as a decimal character."/> 
```

**注意：**跨浏览器支持变化很大。它可能是完整的、部分的或不存在的。

## 2\. JavaScript 验证

您可以尝试将一个简单的回调绑定到例如*onchange*（和/或*blur*）事件，该事件将替换逗号或一起验证。

## 3.禁用浏览器验证##

第三，您可以尝试在数字输入上使用*[formnovalidate](http://www.w3.org/TR/html5/forms.html#attr-fs-formnovalidate)*属性，以便一起禁用该字段的浏览器验证。

```
<input type="number" formnovalidate /> 
```

## 4.组合..？

```
<input type="number" pattern="[0-9]+([,\.][0-9]+)?" 
           name="my-num" formnovalidate
           title="The number input must start with a number and use either comma or a dot as a decimal character."/> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-02-08T15:15:04.973

是否使用逗号或句点作为小数点分隔符完全取决于浏览器。浏览器根据操作系统或浏览器的语言环境做出决定，或者某些浏览器从网站中获取提示。我做了一个[浏览器比较图表](https://www.ctrl.blog/entry/html5-input-number-localization.html "HTML5 数字输入 – 逗号和句点作为小数点")，展示了不同的浏览器支持如何处理不同的本地化方法。Safari 是唯一可以互换处理逗号和句点的浏览器。

基本上，您作为网络​​作者无法真正控制这一点。一些变通方法涉及使用两个带整数的输入字段。这允许每个用户按照您的期望输入数据。它不是特别性感，但它适用于所有用户。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-08T21:55:25.627

使用[`valueAsNumber`](http://www.w3.org/TR/2011/WD-html5-20110405/common-input-element-attributes.html#dom-input-valueasnumber)而不是`.val()`.

> # 输入 。值作为编号 [ = 值 ]
> 
> 如果适用，返回一个表示表单控件值的数字；否则，返回 null。
> 可以设置，改变值。
> 如果控件既不是基于日期或时间的也不是数字的，则引发 INVALID_STATE_ERR 异常。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-01-24T00:31:04.263

使用文本类型但强制显示数字键盘

```
<input value="12,4" type="text" inputmode="numeric" pattern="[-+]?[0-9]*[.,]?[0-9]+"> 
```

inputmode 标签是解决方案

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-04-05T23:14:58.980

我还没有找到完美的解决方案，但我能做的最好的就是使用 type="tel" 并禁用 html5 验证（formnovalidate）：

```
<input name="txtTest" type="tel" value="1,200.00" formnovalidate="formnovalidate" /> 
```

如果用户输入逗号，它将在我尝试过的每个现代浏览器（最新的 FF、IE、edge、opera、chrome、safari 桌面、android chrome）中输出逗号。

主要问题是：

*   移动用户将看到他们的手机键盘，它可能与数字键盘不同。
*   更糟糕的是，电话键盘甚至可能没有逗号键。

对于我的用例，我只需要：

*   用逗号显示初始值（firefox 将其剥离为 type=number）
*   不会失败 html5 验证（如果有逗号）
*   让字段与输入完全相同（可能带有逗号）

如果您有类似的要求，这应该适合您。

**注意：**我不喜欢对模式属性的支持。formnovalidate 似乎工作得更好。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-03-31T11:46:13.033

显然浏览器仍然有问题（尽管 Chrome 和 Firefox Nightly 做得很好）。对于那些真正必须使用数字字段的人，我有一个 hacky 方法（可能是因为文本字段没有的小箭头）。

## 我的解决方案

我`keyup`在表单输入中添加了一个事件处理程序，并跟踪状态并在它再次有效时设置该值。

### 纯 JS 片段 [JSFIDDLE](https://jsfiddle.net/gu4th0oq/25/)

```
var currentString = '';
var badState = false;
var lastCharacter = null;

document.getElementById("field").addEventListener("keyup",($event) => {
  if ($event.target.value && !$event.target.validity.badInput) {
          currentString = $event.target.value;
  } else if ($event.target.validity.badInput) {
    if (badState && lastCharacter && lastCharacter.match(/[\.,]/) && !isNaN(+$event.key)) {
      $event.target.value = ((+currentString) + (+$event.key / 10));
      badState = false;
    } else {
      badState = true;
    }
  }
  document.getElementById("number").textContent = $event.target.value;
  lastCharacter = $event.key;
});

document.getElementById("field").addEventListener("blur",($event) => {
	if (badState) {
    $event.target.value = (+currentString);
    badState = false;
		document.getElementById("number").textContent = $event.target.value;
  }
});
```

```
#result{
  padding: 10px;
  background-color: orange;
  font-size: 25px;
  width: 400px;
  margin-top: 10px;
  display: inline-block;
}

#field{
  padding: 5px;
  border-radius: 5px;
  border: 1px solid grey;
  width: 400px;
}
```

```
<input type="number" id="field" keyup="keyUpFunction" step="0.01" placeholder="Field for both comma separators">

<span id="result" >
 <span >Current value: </span>
 <span id="number"></span>
</span>
```

### Angular 9 片段

```
@Directive({
  selector: '[appFloatHelper]'
})
export class FloatHelperDirective {
  private currentString = '';
  private badState = false;
  private lastCharacter: string = null;

  @HostListener("blur", ['$event']) onBlur(event) {
    if (this.badState) {
      this.model.update.emit((+this.currentString));
      this.badState = false;
    }
  }

  constructor(private renderer: Renderer2, private el: ElementRef, private change: ChangeDetectorRef, private zone: NgZone, private model: NgModel) {
    this.renderer.listen(this.el.nativeElement, 'keyup', (e: KeyboardEvent) => {
      if (el.nativeElement.value && !el.nativeElement.validity.badInput) {
        this.currentString = el.nativeElement.value;
      } else if (el.nativeElement.validity.badInput) {
        if (this.badState && this.lastCharacter && this.lastCharacter.match(/[\.,]/) && !isNaN(+e.key)) {
          model.update.emit((+this.currentString) + (+e.key / 10));
          el.nativeElement.value = (+this.currentString) + (+e.key / 10);
          this.badState = false;
        } else {
          this.badState = true;
        }
      }       
      this.lastCharacter = e.key;
    });
  }

}
```

```
<input type="number" matInput placeholder="Field for both comma separators" appFloatHelper [(ngModel)]="numberModel">
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-12-17T08:53:29.427

当您调用`$("#my_input").val();`它时，它会作为字符串变量返回。所以使用`parseFloat`and`parseInt`进行转换。当您使用`parseFloat`桌面或手机时， **ITSELF**会理解变量的含义。

另外，您可以使用`toFixed`which 将浮点数转换为字符串，其参数为位数，如下所示：

```
var i = 0.011;
var ss = i.toFixed(2); //It returns 0.01 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-04T21:33:02.950

我的推荐？根本不要使用 jQuery。我和你有同样的问题。我发现`$('#my_input').val()`总是返回一些奇怪的结果。

尝试使用`document.getElementById('my_input').valueAsNumber`代替`$("#my_input").val();`然后，使用`Number(your_value_retrieved)`来尝试创建一个数字。如果值为 NaN，您肯定知道这不是一个数字。

要添加的一件事是，当您在输入上写一个数字时，输入实际上将接受几乎任何字符（我可以写欧元符号、美元和所有其他特殊字符），因此最好使用检索值`.valueAsNumber`而不是使用 jQuery。

哦，顺便说一句，这允许您的用户添加国际化（即：支持逗号而不是点来创建十进制数字）。只要让`Number()`对象为您创建一些东西，它就会是十进制安全的，可以这么说。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-05-30T09:21:38.013

听起来您想在数字输入上使用 toLocaleString() 。

有关其用法，请参阅[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toLocaleString](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toLocaleString)。

JS 中数字的本地化也包含在[Internationalization(Number formatting "num.toLocaleString()") not working for chrome](https://stackoverflow.com/questions/8906567)

# visual-studio-2012 - VS2012 使用 SQL Server Express 的一键式 Windows 应用程序

> ID：15303947
> 
> 赞同：1
> 
> 时间：2013-03-08T21:51:20.620
> 
> 标签：visual-studio-2012, sql-server-express

我使用 VS2012 (C#) 和使用 SQL Server Express 的数据库开发了一个 Windows 应用程序。

我希望使用新的一键式向导将其发布（在 CD 上）。

数据库不共享 - 所以我希望客户端系统使用本地 SQL Server Express 托管自己的数据库。

我设置了哪些先决条件？以及如何确保客户端系统将下载并安装它们？

到目前为止，我所有的努力都失败了——因为客户被拒绝“许可”或一些这样的短暂消息在我阅读之前就消失了！

也许我不能以这种方式使用 SQL Server Express。

谢谢

# ios - 如何将数据库坐标处的注释添加到 LiveCode 应用程序中的 mergMK 地图？

> ID：15303948
> 
> 赞同：0
> 
> 时间：2013-03-08T21:51:30.687
> 
> 标签：ios, mapkit, livecode

我有一个坐标数据库，并希望在 LiveCode iOS 应用程序的 mergMK 地图上显示靠近用户位置的坐标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:51:30.687

这个问题是在私人支持环境中提出的，但是，我认为答案可能对其他人有用，所以我将其发布在这里。我是 LiveCode 外部 mergMK 的作者。

该答案仅涵盖查询的迭代和添加注释。如果您需要有关 SQL 查询的详细信息以获取用户范围内的坐标，请查看[此处](https://stackoverflow.com/questions/1896213/determine-if-one-coordinate-is-in-radius-of-another)。

因为我没有任何代码可以使用，所以我假设您在查询中选择了纬度、经度和标题列。此外，我假设有一个唯一的 id 列，我将使用它来创建一个脚本局部变量，您可能希望使用该变量稍后删除注释和/或处理 mergExt 为注释交互发送的一些消息。我假设您已经执行了查询并且查询 id 在 tQuery 变量中。

```
repeat for revNumberOfRecords(tQuery)
  put revDatabaseColumnNamed(tQuery,"latitude") into tLat
  put revDatabaseColumnNamed(tQuery,"longitude") into tLong
  put revDatabaseColumnNamed(tQuery,"title") into tTitle
  put revDatabaseColumnNamed(tQuery,"id") into tID
  put mergMKAddAnnotation((tLat,tLong),tTitle) into sAnnotationIDA[tID]
end repeat 
```

# c# - 如何使用切线获得角度

> ID：15303954
> 
> 赞同：0
> 
> 时间：2013-03-08T21:51:47.947
> 
> 标签：c#, angle

我有一个三角形，知道两侧的长度（见图）并且需要知道图中显示的角度（红色已知，蓝色角度是我需要计算的）

![在此处输入图像描述](../Images/9879b6b755fa53c5f978d820d1995e8a.png)

我发现，Math.Tan 让我得到以弧度表示的角度，所以当我尝试这样做时：

```
alpha = Math.Tan((CA/AB)); 
```

结果我总是得到0。我的问题是 - 我怎么能得到这个角度，只知道这两个方面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T21:54:59.363

尝试：

```
double alpha = Math.Atan2(CA, AB) 
```

确保结果 ,`alpha`和其他变量是`double`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T21:54:26.447

我的心理调试告诉我`CA`和`AB`都是整数，要么`int`要么`long`。因此，结果也将是整数类型，根据需要截断任何十进制值。将至少其中一个值转换为浮点类型以获得浮点结果：

```
alpha = Math.Tan((CA/(double)AB)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T21:58:59.907

您正在寻找的角度是 arctanjant 而不是 tanjant。

所以你应该使用 .Net 库的 arctanjant 函数。以下行提供了您需要的内容。

```
double alpha = Math.Atan ((double)CA/AB) * 180 / PI; 
```

如您所知，PI 为 3.14。

# javascript - 无法在 ios 或 android 浏览器的后台播放 mp3/ogg 音频？

> ID：15303958
> 
> 赞同：0
> 
> 时间：2013-03-08T21:51:59.847
> 
> 标签：javascript, android, ios, html, html5-audio

我正在尝试在所有可能的现代浏览器中播放音频，包括 ios 和 android。

假设我在服务器上有两个版本，我已经编写了一个函数来播放 ogg 或 mp3：

```
audio_template = Handlebars.compile('<audio autoplay>' +
                                    '   <source src="{{ src }}.mp3">' +
                                    '   <source src="{{ src }}.ogg">' +
                                    '</audio>');

/* No extention--assuming both ogg and mp3 are present. */
function playAudio(src) {
       var audio = new Audio();
       if (audio.canPlayType('audio/mp3') {
           audio.src = src + ".mp3";
       }   
       else {
           audio.src = src + ".ogg";
       }   
       audio.play(); 
}

//plays on desktop browsers, nothing on mobile
function playAudio2(src) {
    $('body').append(audio_template({src:src})); 
}

//plays on desktop browsers, nothing on mobile
function playAudio3(src) {
    var audio = $(audio_template({src:src}));
    audio[0].play(); 
} 
```

这可以在所有桌面浏览器中成功播放，但在 ios safari 或 android chrome 上没有任何效果。我尝试使用 android 平台工具 (adt) 提供的远程调试器，但调用 playAudio 只是返回“未定义”而没有错误。当我在 audio.play() 之前放置断点时，audio.play() 也是如此。

我还尝试将那个把手模板的输出嵌入到我的身体标签的底部并播放它，但这也失败了。

是格式问题吗？还是仅仅是无法播放隐藏音频元素的限制？

# asp.net - SQL Server 和 IIS 受信任的连接与 AD 组和登录冲突

> ID：15303959
> 
> 赞同：0
> 
> 时间：2013-03-08T21:52:01.570
> 
> 标签：asp.net, sql-server-2008, iis-7

我有一个奇怪的情况。我想通过使用 IiS7 的网站连接到 SQL Server。我还希望一群用户能够通过 IIS 通过 AD 组连接到数据库服务器。

问题是，我必须在 web.config 中设置 Trusted_Connection=true 才能让 SQLServer 知道将该用户凭据用作 Windows 帐户而不是 sqlserver 帐户。如果未设置为 true，则该 AD 组中的所有用户都将尝试通过 sql 帐户进行身份验证。

但是，当我这样做时，IIS 使用 APPool 作为用户连接到数据库，然后用户用于登录的凭据无关紧要。

我不想为每个用户创建一个帐户。那会破坏目的。

请帮忙，有解决方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:57:09.593

您的 IIS ASP 应用程序必须配置为模拟，请参阅[配置 ASP.NET 模拟身份验证 (IIS 7)](http://technet.microsoft.com/en-us/library/cc730708%28v=ws.10%29.aspx)。此外，您必须配置约束委派，因为您将进行“双跳”。请参阅[如何：在 ASP.NET 中使用协议转换和约束委派](http://msdn.microsoft.com/en-us/library/ff649317.aspx)

# r - 在 OS 10.8.2 上安装 R 库 XLConnect

> ID：15303967
> 
> 赞同：7
> 
> 时间：2013-03-08T21:52:34.613
> 
> 标签：r, excel, xlconnect

[正如手册所描述的， XLConnect](http://cran.r-project.org/web/packages/XLConnect/index.html)是“一个允许从 R 中读取、写入和操作 Microsoft Excel 文件的包”。

在 Windows 和 Linux 上的安装非常简单。只需告诉 R `install.packages("XLConnect")`，你就完成了。在 OS X 上你需要使用`install.packages("XLConnect", type="source")`，安装说明说。

在 OS 10.8.2 下尝试此操作，R 输出许多错误消息。我将它们发布在这里，以便 Google 可以将有类似问题的人发送到此 Q 和 A。有关问题的解决方案，请向下滚动。

* * *

输出：

```
> install.packages("XLConnect", type = "source")
also installing the dependencies ‘XLConnectJars’, ‘rJava’

versuche URL 'http://ftp5.gwdg.de/pub/misc/cran/src/contrib/XLConnectJars_0.2-4.tar.gz'
Content type 'application/x-gzip' length 16539227 bytes (15.8 Mb)
URL geöffnet
==================================================
downloaded 15.8 Mb

versuche URL 'http://ftp5.gwdg.de/pub/misc/cran/src/contrib/rJava_0.9-3.tar.gz'
Content type 'application/x-gzip' length 537153 bytes (524 Kb)
URL geöffnet
==================================================
downloaded 524 Kb

versuche URL 'http://ftp5.gwdg.de/pub/misc/cran/src/contrib/XLConnect_0.2-4.tar.gz'
Content type 'application/x-gzip' length 1719698 bytes (1.6 Mb)
URL geöffnet
==================================================
downloaded 1.6 Mb

* installing *source* package ‘rJava’ ...
** Paket ‘rJava’ erfolgreich entpackt und MD5 Summen überprüft
/Library/Frameworks/R.framework/Resources/bin/config: line 142: make: command not found
/Library/Frameworks/R.framework/Resources/bin/config: line 143: make: command not found
/Library/Frameworks/R.framework/Resources/bin/config: line 219: make: command not found
/Library/Frameworks/R.framework/Resources/bin/config: line 142: make: command not found
/Library/Frameworks/R.framework/Resources/bin/config: line 143: make: command not found
/Library/Frameworks/R.framework/Resources/bin/config: line 219: make: command not found
checking for gcc... no
checking for cc... no
checking for cl.exe... no
configure: error: no acceptable C compiler found in $PATH
See `config.log' for more details.
ERROR: configuration failed for package ‘rJava’
* removing ‘/Library/Frameworks/R.framework/Versions/2.15/Resources/library/rJava’
ERROR: dependency ‘rJava’ is not available for package ‘XLConnectJars’
* removing ‘/Library/Frameworks/R.framework/Versions/2.15/Resources/library/XLConnectJars’
ERROR: dependencies ‘XLConnectJars’, ‘rJava’ are not available for package ‘XLConnect’
* removing ‘/Library/Frameworks/R.framework/Versions/2.15/Resources/library/XLConnect’

Die heruntergeladenen Quellpakete sind in 
    ‘/private/var/folders/some/path/to/downloaded_packages’
Warnmeldungen:
1: In install.packages("XLConnect", type = "source") :
 Installation des Pakets ‘rJava’ hatte Exit-Status ungleich 0
2: In install.packages("XLConnect", type = "source") :
 Installation des Pakets ‘XLConnectJars’ hatte Exit-Status ungleich 0
3: In install.packages("XLConnect", type = "source") :
 Installation des Pakets ‘XLConnect’ hatte Exit-Status ungleich 0
> library(XLConnect)
Fehler in library(XLConnect) : es gibt kein Paket namens ‘XLConnect’ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T21:52:34.613

Mac OSX 上的安装比[安装说明](http://miraisolutions.wordpress.com/2013/02/03/xlconnect-0-2-4/)建议的要复杂一点。该软件包的开发者 Mirai Solutions 的 Martin Studer 帮助我解决了我的困难，我想在此处发布该过程以帮助其他可能遇到相同问题的用户。

1.  **安装 Java**
    出于安全考虑，最新版本的 OS X 没有 Java。如果您从 Java 版本更新，它将被卸载！[检查](http://www.java.com/en/download/index.jsp)，如果你有 Java。如果没有，请[下载](http://www.java.com)并安装它。
2.  **安装 rJava**
    您将（稍后）从源代码安装 XLConnect，因为 OS X 没有二进制文件。在此安装过程中，当 R 尝试安装依赖包 rJava 时，您将收到错误消息，因为必须从二进制文件安装. 所以你必须先安装它，使用
    `install.packages("rJava")`
3.  **安装 XLConnect**
    最后，从源代码安装 XLConnect：
    `install.packages("XLConnect", type="source")`

# c++ - 在 OpenGL 和 Qt5 (QGLWidget) 中具有固定纵横比 (1:1) 的透视图

> ID：15303969
> 
> 赞同：0
> 
> 时间：2013-03-08T21:52:53.483
> 
> 标签：c++, opengl, qt5, qglwidget

我正在尝试将多维数据集渲染到 QSplitter 内的 QGLWidgetput 中。我希望它具有 1:1 的比例，因此它是一个立方体，并且无论窗口尺寸如何都保持该比例。不过，我无法让它发挥作用。无论我做什么，立方体都会随着窗户伸展。

我对代码的工作方式还有两个额外的问题。

*   `matrix.setToIdentity()`重置除了在 结尾发生的投影和平移之外的所有内容`initializeGL()`，因此当我在 中调用它时`resizeGL()`，投影与前一个结合，即使我在此之前将矩阵设置为恒等。

*   `aspect ratio`的论点`matrix.perspective()`似乎无济于事。我尝试了几个没有效果的值。

*   出于某种原因，投影是正交的，而不是透视的。

*   矩阵在 之后仍然是一个恒等式`perspective()`，但前提是我按该顺序调用`setToIdentity()`and 。`perspective()``resizeGL`

*   矩阵运算中`initializeGL()`并`resizeGL()`得到不同的处理。如果我不调用`translate()`and `perspective()`in `initializeGL()`，即使我稍后再调用，立方体也不会出现`resizeGL()`。

谁能给我解释一下？我认为该`QMatrix4x4`课程是为了将矩阵保存到 3D 转换，所以我不必自己实现它们。

我看过一些教程，但是它们要么以类似的方式使用某种矩阵，要么似乎使用了已弃用的 OpenGL 函数。尝试将宽度和高度转换为浮点数并使用单独的矩阵进行转换。

**如何使 1:1 的比例起作用？**

我的一段相关代码：

```
void ModelView::initializeGL()
{
    m_program = new QGLShaderProgram(this);
    m_program->addShaderFromSourceCode(QGLShader::Vertex, vertexShaderSource);
    m_program->addShaderFromSourceCode(QGLShader::Fragment, fragmentShaderSource);
    m_program->link();

    GLuint shader_id = glCreateShader(GL_VERTEX_SHADER);
    glShaderSource(shader_id, 1, vertexShaderSource, NULL);
    glCompileShader(shader_id);
    ShaderIds[2] = shader_id;

    shader_id = glCreateShader(GL_FRAGMENT_SHADER);
    glShaderSource(shader_id, 1, fragmentShaderSource, NULL);
    glCompileShader(shader_id);
    ShaderIds[1] = shader_id;

    glAttachShader(ShaderIds[0], ShaderIds[1]);
    glAttachShader(ShaderIds[0], ShaderIds[2]);

    glLinkProgram(ShaderIds[0]);*/

    matrix.setToIdentity(); //--------------------------------------

    float aspect = (((float)width())/((float)height()));

    matrix.perspective(60, aspect, 0.1, 100.0);
    matrix.translate(0, 0, -2);
}

void ModelView::paintGL()
{
    glEnable(GL_DEPTH_TEST);
    glDepthFunc(GL_LESS);

    glClearColor(.5f, .5f, .5f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glViewport(0, 0, width(), height());

    m_program->bind();

    m_posAttr = m_program->attributeLocation("posAttr");
    m_colAttr = m_program->attributeLocation("colAttr");
    m_matrixUniform = m_program->uniformLocation("matrix");
    m_program->setUniformValue(m_matrixUniform, matrix); //-----------------

    glGenBuffers(1, &BufferId);
    glGenBuffers(1, &IndexBufferId);

    glBindBuffer(GL_ARRAY_BUFFER, BufferId);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, IndexBufferId);

    glBufferData(GL_ARRAY_BUFFER, BufferSize, Vertices, GL_STATIC_DRAW);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(Indices), Indices, GL_STATIC_DRAW);

    glVertexAttribPointer(m_posAttr, 3, GL_FLOAT, GL_FALSE, VertexSize, 0);
    glVertexAttribPointer(m_colAttr, 3, GL_FLOAT, GL_FALSE, VertexSize, (GLvoid *)RgbOffset);

    glEnableVertexAttribArray(0);
    glEnableVertexAttribArray(1);

    glDrawElements(GL_TRIANGLES, 36, GL_UNSIGNED_BYTE, NULL);

    glDisableVertexAttribArray(1);
    glDisableVertexAttribArray(0);

    m_program->release();

}

void ModelView::resizeGL(int w, int h)
{
    glViewport(0, 0, w, h);
    matrix.setToIdentity();  //------------------------------------

    matrix.translate(0, 0, -2);
    matrix.perspective(60, ((float)w)/((float)h), 0.1, 100.0);

    updateGL();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T23:45:14.690

终于发现哪里不对了。

首先，矩阵运算不应该在`initializeGL()`. 不完全确定为什么。正确的（和合理的，想想看）的地方是 in `resizeGL()`，因为它在第一帧渲染的某个地方被调用。

其次，矩阵乘法有其定义的顺序，类似于透视 > 平移 > 旋转。否则就搞砸了。

所以正确的（或至少工作的）代码`resizeGL()`是这样的：

```
glViewport(startX, startY, width, height);    //resize the viewport
matrix.setToIdentity();             //reset the uniform value (matrix)
perspectiveMatrix.setToIdentity();   //reset the projection matrix
                                       //set new projection (aspect ratio)
perspectiveMatrix.perspective(angle, (float)width/(float)height, nearPlane, farPlane);

matrix *= perspectiveMatrix;    //apply transformations
matrix *= translationMatrix;
matrix *= rotationMatrix;

updateGL();                  //re-render 
```

# excel - 如何使用 Excel 创建 RSS 提要？

> ID：15303970
> 
> 赞同：-1
> 
> 时间：2013-03-08T21:52:56.330
> 
> 标签：excel, rss

我想使用 excel 中的数据创建一个 RSS 提要。像这样的东西

```
Product ID     Product Name     Product Price    Delivery Date
11111          Apple iphone        650              2-4 days
22222          Samsung Galaxy      600              5-6 days 
```

我如何直接将excel中的这些数据转换为RSS提要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T04:01:05.920

下面是一篇关于通过 RSS 报告工作表更改的博客文章。它使用 MSXML2 库生成 XML 文件并使用 Dropbox 作为 Web 服务器。基本上，您需要创建一个 XML 文件并将其上传到 Web 服务器。您可以从帖子中获得 XML 文件创建，但网络服务器部分将高度针对您的情况。

[http://dailydoseofexcel.com/archives/2012/03/16/monitor-worksheet-changes-via-rss/](http://dailydoseofexcel.com/archives/2012/03/16/monitor-worksheet-changes-via-rss/)

# r - R get() 函数错误

> ID：15303972
> 
> 赞同：4
> 
> 时间：2013-03-08T21:52:57.743
> 
> 标签：r

我正在尝试填充一组矩阵，其中矩阵（对象）名称保存在列表中。我可以使用 get() 返回具有给定名称的对象，但是当我使用 get() 定义要填充的矩阵对象时遇到了函数问题。

```
#Create list of matrix names:
list.names <- c("m.1")

#Create matrix object
m.1 <- matrix(nrow=2,ncol=2)

#Return matrix m.1 from the list.names using get(). Works great!
get(list.names[1])

#Populate m.1 with some values. Doesn't work.
get(list.names[1]) <- c(1,2,3,4) 
```

所以在最后一行代码中，我收到了一个错误：

找不到函数“get<-”

同样，我可以使用以下命令调用 m.1：

```
eval(as.name(list.name[1])) 
```

但是当我尝试填充矩阵时，R 会返回类似的“找不到函数”错误。

有人可以在这里解释我的方法中的错误吗？

**编辑/更新：**

因此，在我尝试简化此处发布的问题时，我意识到我可能过于简化了我正在尝试做的事情。

所以，事实上，我正在尝试在一组矩阵中​​填充元素。矩阵的名称包含在 list.names 对象中。我正在使用嵌套的 for() 循环来填充矩阵中的每个元素。

所以，事实上，我的问题可以更准确地表述为：

```
get(list.names[1])[1,1] <- some_value 
```

一些回复建议我根据我的原始帖子使用 assign ，但鉴于我试图在 object 中“分配”一个元素而不是整个 object ，这种方法将行不通。

对困惑感到抱歉。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T23:07:07.720

这在 FAQ 7.21 中得到解决。该常见问题解答中最重要的部分是它说使用列表的结尾（一个真正的列表，而不是您在上面调用列表的向量）。如果您在全球工作空间中有一个矩阵列表而不是一堆矩阵，那么很多事情都会变得容易得多。这是一个例子：

```
mnames <- c('m.1','m.2','m.3')
m.1 <- matrix(1, 2, 2)
m.2 <- matrix(2, 2, 2)
m.3 <- matrix(3, 2, 2)

## put matricies into a list
mymats <- lapply( mnames, get )
names(mymats) <- mnames

## change 1 value in each matrix a different way
mymats[['m.2']][1,1] <- 22
mymats[[1]][2,2] <- 11
tmp <- "m.3"
mymats[[tmp]][1,2] <- 33

## change the same element in each matrix using a loop
for( i in seq_along(mymats) ) {
 mymats[[i]][2,1] <- 44
}

## apply the same function to every matrix and simplify the output
sapply( mymats, rowMeans ) 
```

这比弄乱`get`and简单得多`assign`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T21:57:40.597

使用函数`assign`代替`get`：

```
assign(list.names[1],c(1,2,3,4)) 
```

`get`返回一个对象的值，`assign`赋值。:)

同样的事情`eval`，它只是评估你的电话。

# objective-c - AXWindowMoved（通过 AXObserver） - 持续更新？

> ID：15303973
> 
> 赞同：4
> 
> 时间：2013-03-08T21:53:01.323
> 
> 标签：objective-c, xcode, cocoa, nswindow, accessibility-api

是否有任何其他方法可用于获取持续更新，而不是 kAXWindowMovedNotification（可访问性 api - 通过 AXObserver 侦听），它发送通知的时间比拖动开始时要晚得多？如果可能的话，我需要不断更新。

或者是否有任何替代方法来检测窗口移动（在另一个应用程序中）？实际上我只需要准确的拖动开始和结束时间。在这之间，我真的不在乎。kAXWindowMovedNotification 报告开始时间太晚。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T21:36:19.020

使用 Accessibility API 是不可能做到的。[仅在窗口完成移动后](https://developer.apple.com/library/mac/#documentation/ApplicationServices/Reference/AXNotificationConstants_header_reference/Reference/reference.html)`AXWIndowMoved`发送通知。

此外，轮询窗口`kAXPositionAttribute`也不起作用。拖动时，窗口将报告其先前的位置，直到窗口完成移动。

[`CGWindowListCopyWindowInfo`](http://developer.apple.com/library/mac/#documentation/Carbon/Reference/CGWindow_Reference/Reference/Functions.html)但是，在拖动过程中确实会返回窗口的位置。不幸的是，没有与此相关的通知机制，因此您必须定期调用此函数以检测任何更改。显然，以这种方式轮询比接收通知更占用 CPU 资源。

您可以减少轮询的一种方法是使用[`CGEventTapCreate`](https://developer.apple.com/library/mac/documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html#//apple_ref/c/func/CGEventTapCreate). 您可以检查`kCGMouseEventWindowUnderMousePointerThatCanHandleThisEvent`事件字段以找到针对鼠标按下事件的窗口，然后在鼠标移动事件上轮询该窗口的位置。如果您检测到更改，您将开始拖动，并在鼠标向上事件时结束。

当然，这不能检测由其他操作引起的窗口位置变化（例如，按下缩放按钮，窗口以编程方式移动）。在鼠标开始移动之前它也无法检测到拖动，因此如果用户在移动前按住鼠标按钮一段时间，您将延迟检测到拖动。

为了完整起见，如果您针对特定应用程序，可以使用[mach_inject](https://github.com/rentzsch/mach_inject)检测窗口移动。您绝对不应发布执行此操作的代码，因为它可能导致目标应用程序崩溃，并且可能无法在不允许您附加调试器的 iTunes 和 DVD 播放器等应用程序上运行。

为此，您将注入一个在目标应用程序中注册`NSWindowWillMoveNotification`和注册的函数，`NSWindowDidMoveNotification`然后将它们发送回您的应用程序，可能使用分布式通知。

选择是你的，而且只有你一个人。祝你好运。

# django - ModelChoiceField 未使用先前输入的值填充

> ID：15303975
> 
> 赞同：1
> 
> 时间：2013-03-08T21:53:10.413
> 
> 标签：django, django-forms, django-templates, django-views

我创建了一个 ModelChoiceForm，它动态填充了所有不具有 FlatPageExtras.child_of 值的平面页面。为此，我进行了以下设置：

表格.py：

```
class FlatPageExtrasForm(ModelForm):
    class Meta:
        model = FlatPageExtras
        fields = ['head_content', 'endbody_content', 'new_page', 'child_of']

    def __init__(self, *args, **kwargs):
        super(FlatPageExtrasForm, self).__init__(*args, **kwargs)
        self.fields['child_of'] = forms.ModelChoiceField(queryset = FlatPage.objects.filter(sites = Site.objects.get_current()).exclude(flatpageextras__child_of__isnull=False),widget = forms.Select, required = False) 
```

视图.py：

```
def edit(request, flatpage_id):
    site = Site.objects.get_current()
...
    if request.method == "POST":
        if request.POST.has_key("update"):
            return update(request, page)
...
    else:
        flatpageextras_obj, result = FlatPageExtras.objects.get_or_create(flatpage=page)
        form = FlatPageForm(instance=page)            
        form_flatpageextras = FlatPageExtrasForm(instance=flatpageextras_obj) 
```

模板：

```
{{ form_flatpageextras.child_of }}<label for="id_child_of">Page on your site you would like this to appear under. </label></p>
                {% if form_flatpageextras.child_of.errors %}
                    {{  form_flatpageextras.child_of.errors }}
                {% endif %}
                <p class="help-text">If a page is selected, that will be the parent site for this one.  Leave blank if you would like no associations</p>
            </div> 
```

这一切都有效......几乎！当我转到提供的模板时，下拉菜单就在那里，正确显示了可用的平面页面，但它最初总是显示为空白，即使该字段已正确保存到所选页面的任何位置。如何让下拉菜单正确显示当前选择？

# jquery - 表单提交前验证连接

> ID：15303977
> 
> 赞同：4
> 
> 时间：2013-03-08T21:53:28.187
> 
> 标签：jquery, ajax, forms

我正在尝试在表单提交之前验证用户的互联网连接，以便我的 JavaScript 验证函数可以引发警报并在没有连接时返回 false。

我试过：navigator.onLine - 在 FF 中不起作用（只查看浏览器是否处于“离线模式”）

对我自己网站的 AJAX 请求：

```
$.ajax({  
  type: "GET",  
  url: "internet_test.php",  
  async: false, //trying to force a response before continuing
  timeout:8000,
  success: function(ret_text) {
    if(ret_text == 'yes') {
      return true;
    } else {
      alert("No Connection 1");
      return false;
    }
  },
  error: function(x, t, m) {
    if(t==="timeout") {
      alert("No Connection 2");
      return false;
    } else {
      alert("No Connection 3");  //this is the one triggered
      return false;
    }
  }
}); 
```

我收到了第三种错误的警报，但是表单还是提交了。我猜这个错误覆盖了我试图指定同步检查的事实，并且 JavaScript 验证器在 AJAX 可以返回 false 之前完成。

有没有解决这个问题的好方法？更好的方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T22:01:39.640

我会这样：

1.  将“提交”更改为“按钮”（或链接）-它将停止提交表单。
2.  单击此按钮进行 AJAX 调用，如果一切正常，则进行 form.submit();

这只是一个草稿，一切都可以变得更加用户友好，对于无 js 浏览器等更强大。

# javascript - Javascript弹出焦点？

> ID：15303978
> 
> 赞同：0
> 
> 时间：2013-03-08T21:53:43.647
> 
> 标签：javascript, html, popupwindow

请原谅我，因为我不是程序员，对此一无所知。

我尝试过搜索，但似乎找不到我遇到的问题。

所以我有一个非常简单的使用 Javascript 的弹出窗口：

```
function newPopup(url) {
popupWindow = window.open(
url,'popUpWindow3','height=500,width=900,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,directories=no,status=no')
} 
```

我呼吁：

```
onclick="JavaScript:newPopup('images/product-<?php echo $pro['id'];?>.jpg');"> 
```

它工作得很好，除非他们单击弹出窗口并返回页面，下一次单击更新第一个弹出窗口并且用户必须找到包含他们选择的图像的窗口。如果他们关闭了窗口，它将重新出现在前台，但如果他们返回主站点而不关闭窗口，则内容会在后台更新。

我希望弹出窗口在有人单击它时回到前台，无论如何。

有没有简单的方法来实现这一点？

非常感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T21:55:53.427

```
function newPopup(url) {
popupWindow = window.open(
url,'popUpWindow3','height=500,width=900,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,directories=no,status=no');
popupWindow.focus();
} 
```

在窗口上添加一个 .focus ，你应该没问题。

# wcf - 是什么导致发送到 WCF 服务的 TCP 窗口已满 (WireShark) 错误？

> ID：15303980
> 
> 赞同：2
> 
> 时间：2013-03-08T21:53:47.187
> 
> 标签：wcf, tcp

我们有一个在 Windows Server 2008 R2 虚拟机上运行的 WCF 数据收集服务。客户端是 Win 7 x64 机器，应用程序是 C# .NET 4 Windows 窗体应用程序。该服务的主要目的是从客户端收集测试结果并根据该数据提供报告。（它连接到 SQL Server 实例和 Oracle 实例，但这可能无关紧要。）

最近，随着我们添加更多客户端，我们开始看到数据传输丢失，并且服务端出现“MaxOutboundConnectionsPerEndpoint quota (10)”错误，因此我们相应地调整了参数。

这种类型的错误消失了，但现在我们在服务器端收到“Faulted System.ServiceModel.Channels.ServerSessionPreambleConnectionReader+ServerFramingDuplexSessionChannel”错误。在服务器端运行 WireShark 被证明是徒劳的，因为它不会继续运行……也许虚拟机受到干扰，我不知道。

在客户端运行 WireShark 会产生更多信息。当发送失败发生时，WireShark 报告了几个“TCP Window Full”错误。

这是来自服务器端的绑定定义：

```
<bindings>
  <netTcpBinding>
    <binding name="bigBufferBinding"
             portSharingEnabled="false"
             maxBufferSize="1024000"
             maxBufferPoolSize="1000000"
             maxReceivedMessageSize="1024000"
             maxConnections="500"
             listenBacklog="250"
             sendTimeout="00:05:00"
             receiveTimeout="00:05:00">
      <readerQuotas maxDepth="200"
                    maxStringContentLength="65536"
                    maxArrayLength="32768"
                    maxBytesPerRead="4096"
                    maxNameTableCharCount="16384"/>
      <security mode="None"/>
    </binding>
  </netTcpBinding>
</bindings> 
```

这是客户端：

```
<bindings>
  <netTcpBinding>
    <binding name="bigBuffer_ClientTcpBinding"
             maxBufferSize="1024000"
             maxBufferPoolSize="1000000"
             maxReceivedMessageSize="1024000"
             sendTimeout="00:00:30"
             receiveTimeout="00:00:30">
      <readerQuotas maxDepth="200"
                    maxStringContentLength="65536"
                    maxArrayLength="32768"
                    maxBytesPerRead="4096"
                    maxNameTableCharCount="16384"/>
      <security mode="None"/>
    </binding>
  </netTcpBinding>
</bindings> 
```

我尝试增加 maxBufferSize、maxBufferPoolSize 和 maxReceivedMessageSize 属性，但任何显着增加都会导致服务无法启动。无论如何，我不确定这就是问题所在。

我需要在这里看什么？我们没有大量数据（10 个客户端偶尔向服务发送 60 到 40000 字节的数据），所以我们当然不应该压倒 WCF 服务。我认为这与 TCP 的配置方式有关，但这只是猜测。它在禁用巨型数据包的千兆网络上运行。

在数千次尝试中，我们每天有 15 到 40 次数据失败。我们添加了重试，因此数据最终到达那里（在大多数情况下是第二次尝试）——这并不能真正解决问题，但它让我无法生产，我们实际上并没有丢失任何数据。

只是为了平息预期的抗议和责骂，我们正在将序列化的数据写入失败的磁盘文件（两次！），因此如果数据无法进入数据库，我们可以重新提交它。我们实际上从未丢失任何数据。

想法？任何帮助表示赞赏，可根据要求提供更多数据。

谢谢，戴夫

# events - 主干.js 视图事件不会被破坏

> ID：15303981
> 
> 赞同：1
> 
> 时间：2013-03-08T21:53:47.417
> 
> 标签：events, backbone.js, view, click

当不再需要视图时，我正在尝试销毁视图/取消绑定所有事件。我要做的是：

```
view.$el.removeData().unbind(); 
view.undelegateEvents();
view.remove(); 
```

视图被破坏了，我再也看不到 DOM 中的关联元素，但事件似乎仍然存在。我正在使用 Chrome 开发人员工具并检查内存使用情况，我发现每次渲染视图然后销毁它时，事件侦听器都会增加一个。

我尝试通过执行以下操作来输出视图事件：

```
this.$el.data("events"); 
```

但这给了我不确定性。

有什么想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:49:03.980

这篇优秀的文章描述了如何防止 Backbone 中的内存泄漏：http: [//andrewhenderson.me/tutorial/how-to-detect-backbone-memory-leaks/](http://andrewhenderson.me/tutorial/how-to-detect-backbone-memory-leaks/)

他破坏视图的完整程序如下：

```
this.unbind(); // Unbind all local event bindings
this.model.unbind( 'change', this.render, this ); // Unbind reference to the model
this.options.parent.unbind( 'close:all', this.close, this ); // Unbind reference to the parent view

this.remove(); // Remove view from DOM

delete this.$el; // Delete the jQuery wrapped object variable
delete this.el; // Delete the variable reference to this node 
```

# iphone - 新浪微博没有出现在iOS设置中

> ID：15303983
> 
> 赞同：1
> 
> 时间：2013-03-08T21:53:57.720
> 
> 标签：iphone, ios, ios6, weibo, sinaweibo

在我的设备上（运行 iOS 6）我已经安装了新浪微博应用程序，并想检查它是否适用于我的应用程序。

不过，我没有在我的设置中看到集成选项。这仅在我的设备设置为中文位置时才有效吗？

我错过了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T21:58:05.240

从文档中：

```
Important: For Sina Weibo integration, users must have the Chinese keyboard
enabled. Users can enable this keyboard in Settings > General > Keyboard. 
If a Chinese keyboard is not enabled, users wont be prompted to sign in to 
their Sina Weibo account. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-11T23:37:18.473

我有一个可能对其他人有帮助的更新。（我运行的是 iOS 9.3。）除非我在设置/微博屏幕中登录我的微博帐户，否则微博不会出现在我的应用程序中。（就像你需要为 Facebook 或 Twitter 服务一样。）

您不需要安装中文键盘。

有趣的是，我还发现简单地安装一个中文键盘会让“腾讯微博”出现在照片等股票应用程序中，但这对我的应用程序来说还不够。在任何情况下，如果您选择了腾讯微博并且没有登录（在设置/腾讯微博页面上），那么用户将收到一个提示，说明他们需要登录。

当然，以上都假设 UIActivityTypePostToWeibo 和 UIActivityTypePostToTencentWeibo 没有列在 excludeActivites 数组中。

# c# - 如何让应用出现在windows phone的游戏部分

> ID：15303984
> 
> 赞同：0
> 
> 时间：2013-03-08T21:54:00.213
> 
> 标签：c#, windows-phone-7, windows-phone-8

我做了一个游戏（简单的一个，不使用xna）。

我希望安装后它应该出现在 windows phone 7/8 的游戏 (xbox) 部分。（我的意思是在电话上而不是市场上）

这个怎么做？

任何帮助将不胜感激。

# hadoop - 在 Amazon Web Services 和 Local 上集成 Solr + Hadoop 和 Nutch + Hbase

> ID：15303987
> 
> 赞同：0
> 
> 时间：2013-03-08T21:54:08.263
> 
> 标签：hadoop, solr, amazon-web-services, hbase, nutch

我在 Amazon Web Services 上有一台机器，我正在尝试一些搜索功能。我已经在我的 AWS 机器上安装了 Nutch 和 Hbase。

我以爬取 wikipedia.org 为例，爬取的数据存储在云端的 Hbase 中。

我想安装 Solr 并对其进行搜索。我没有将我的系统安装为集群，因为我只是想进行一些研究，即如何使用它等。

我的问题是 Hadoop 在这个系统中的位置（我还没有安装 Hadoop）？在我的本地计算机上安装 Hadoop 和 Solr 是否合乎逻辑。此外，我的下一个挑战将是如何将我的本地计算机与 AWS 计算机通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:33:52.000

如果你安装了 Nutch，你已经有了 Hadoop，它会处理你的爬取和解析。您可以将 Nutch 生成的数据推送到 Solr 进行索引。

# javascript - 加载和显示 svg

> ID：15303989
> 
> 赞同：10
> 
> 时间：2013-03-08T21:54:14.700
> 
> 标签：javascript, html, svg, fabricjs

如何将 .svg 加载到 fabricjs.html 页面中？

我的织物[小提琴](http://jsfiddle.net/X7tV8/)尝试加载 http .svg 文件，但我当然尝试过本地版本。我使用了从 adobe illustrator 和织物本身生成的 .svg 文件。

```
fabric.loadSVGFromURL( gvs_svgSrc, 
                       function ( argo ) 
                         { //alert( "load handler : " + argo ) ; 
                           // ... returns: #<fabric.Rect>
                           lvo_SVG = argo.set({ left: 250, top: 200, angle: 0 });
                           lvo_SVG = argo.scale(0.25);
                           gvo_canvas.add( lvo_SVG );
                           gvo_canvas.renderAll();
                         }); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-10T02:24:30.193

**这是从外部 .svg 加载 SVG 的方法**

这是代码（请确保链接到您自己的 fabricJS .js）：

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<script type="text/javascript" src="fabric.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border: 1px solid red; }
</style>

<script>
    $(function(){

        var canvas = new fabric.Canvas('canvas');
        var group = [];

        fabric.loadSVGFromURL("http://fabricjs.com/assets/1.svg",function(objects,options) {

            var loadedObjects = new fabric.Group(group);

            loadedObjects.set({
                    left: 100,
                    top: 100,
                    width:175,
                    height:175
            });

            canvas.add(loadedObjects);
            canvas.renderAll();

        },function(item, object) {
                object.set('id',item.getAttribute('id'));
                group.push(object);
        });

    }); // end $(function(){});
</script>

</head>

<body>
    <canvas id="canvas" width="300" height="300"></canvas> 
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-23T08:58:34.610

```
fabric.loadSVGFromURL('http://example.com/_bg.svg',function(objects, options){
  var svgData = fabric.util.groupSVGElements(objects, options);
  svgData.top = 30;
  svgData.left = 50;
  canvas.add(svgData);
}); 
```

1.  使用fabric从有效的.svg URL在画布中加载.svg文件
2.  在帆布槽织物中加载 svg 文件

# performance - highstock 1.3 / highcharts 3.0 beta navigator 滞后

> ID：15303994
> 
> 赞同：1
> 
> 时间：2013-03-08T21:54:23.893
> 
> 标签：performance, highcharts, highstock, navigator

我目前有三个单独的 y 轴显示在彼此下方的偏移量，每个轴大约有 4 个系列（3 行，1 个区域范围），每个系列最多 26,000 个点。

我一直在使用 highstock 1.2.5，性能非常灵敏。我尝试更新到 highstock 1.3 并且图表呈现得很好，但是当我尝试使用导航器与图表交互时，它似乎非常滞后且无响应。导航器的极端移动并不顺畅，而在以前的版本中则非常顺畅。

最新版本中是否有任何可能导致此行为的更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:58:31.293

滚动时禁用自动重绘在 highstock 1.3 api 中有一个新选项：

[http://api.highcharts.com/highstock#scrollbar.liveRedraw](http://api.highcharts.com/highstock#scrollbar.liveRedraw)

```
scrollbar: {
    liveRedraw: false 
} 
```

这解决了问题

# service - 生成 References.cs 后，默认从 AppSettings 读取服务 Uri

> ID：15303996
> 
> 赞同：1
> 
> 时间：2013-03-08T21:54:27.497
> 
> 标签：service, web, appsettings

该问题与更新 Web 服务时生成代码有关。当我更新网络参考时，它生成了文件 References.cs。有一个具有构造函数的服务类，它从以下位置读取有关 url 的设置：

```
 this.Url = global :: <projectNamespace>. Properties.Settings.Default.MyServiceName; 
```

在 References.cs 生成后，我手动将其更改为：

```
this.Url System.Configuration.ConfigurationManager.AppSettings["MyServiceName"]; 
```

有没有办法生成一个默认的构造函数，它将从 AppSettings 中读取？

例如使用 SchemaImporterExtension？

# algorithm - 自动完成的后端

> ID：15303997
> 
> 赞同：5
> 
> 时间：2013-03-08T21:54:39.893
> 
> 标签：algorithm, architecture, language-agnostic, autocomplete, distributed-computing

这是一道面试题：为自动完成设计一个分布式后端。

我会回答如下：

自动完成是按给定后缀在字典中搜索。字典应该被组织成*trie*。该词典是根据最常见的查询构建的，但这是另一回事。

现在我假设字典不会经常更改（例如，每天一次而不是每毫秒一次）。因此，我们可以在处理自动完成查询的多个服务器之间复制字典（例如，使用负载平衡器和循环策略）。

我们也应该考虑字典，但这也是另一回事。

是否有意义？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:57:19.790

看看[SOLR 4.0](http://wiki.apache.org/solr/Solr4.0)是什么（solr 有 trie 并且是分布式的）。**它高度依赖于他们期望自动完成功能如何工作**。如果它只是一个[通配符过滤器](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.ReversedWildcardFilterFactory)，而不是像 trie 这样的东西，对于简单的 ASCII 来说就可以了……否则，如果他们想要自动更正，它会变得更加复杂。话虽这么说，我怀疑如果它是一个通用字段（即不是 SKU 或专用 ID），它会为您带来良好的结果，否则您将拥有一个非常大且效率低下的 trie。

看一眼：

*   具体看它的Suggester：[http ://wiki.apache.org/solr/Suggester](http://wiki.apache.org/solr/Suggester)
*   和 Solr 的分析器：[http ://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters)
    *   更具体地说：[http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.EdgeNGramFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.EdgeNGramFilterFactory)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T22:39:47.693

这看起来是个正确的问题。trie 的想法非常好，可以帮助您在`log(n)`. 更改频率取决于信息，所以我不会说确切的时间，但我会动态调整它。假设您每天更改一次，如果树发生了多大变化，那就太好了。并且您可以给出一个边界（例如 10%）。如果超出边界，您可以更频繁地更新 trie。这还取决于保持最新状态的重要性，因为在大多数情况下并非如此。负载均衡器的想法也不错。