# StackOverflow 问答 13711000-13711999

# pdf - 二维码打开本地PDF文件

> ID：13711000
> 
> 赞同：0
> 
> 时间：2012-12-04T20:05:36.673
> 
> 标签：pdf, qr-code

我想专门使用“条形码生成器”应用程序创建一个二维码。我想让它自动打开本地 pdf 或 doc。这个概念是有 10-15 个 QR 码，可以打开我平板电脑上的许多文档中的 1 个。可以使用什么代码或文本来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:23:34.293

如果这完全可以通过跨平台的标准方式来实现，那将是通过像`file:///path/to/doc1.pdf`QR 码一样对 URL 进行编码。不能保证平台会遵守此 URL 并打开文件，但它可能会。

# c# - 带有 Bouncycastle 加密的 AES CTR 模式

> ID：13711005
> 
> 赞同：4
> 
> 时间：2012-12-04T20:05:59.717
> 
> 标签：c#, cryptography, aes, bouncycastle, rijndaelmanaged

我正在尝试使用[C# 中的 Bouncy castle 加密库](http://www.bouncycastle.org/csharp/)来实现 AES CTR 加密。.NET 提供[RijndaelManaged Crypto Library](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rijndaelmanaged.aspx)，但它不支持 AES 的 CTR 模式，因此选择了 Bouncycastle。

我无法正确编码问题似乎与IV有关。

```
 public string BytesToHex(byte[] bytes)
    {
        char[] c = new char[bytes.Length * 2];

        byte b;

        for (int bx = 0, cx = 0; bx < bytes.Length; ++bx, ++cx)
        {
            b = ((byte)(bytes[bx] >> 4));
            c[cx] = (char)(b > 9 ? b + 0x37 + 0x20 : b + 0x30);

            b = ((byte)(bytes[bx] & 0x0F));
            c[++cx] = (char)(b > 9 ? b + 0x37 + 0x20 : b + 0x30);
        }

        return new string(c);
    }

    public byte[] HexToBytes(string str)
    {
        if (str.Length == 0 || str.Length % 2 != 0)
            return new byte[0];

        byte[] buffer = new byte[str.Length / 2];
        char c;
        for (int bx = 0, sx = 0; bx < buffer.Length; ++bx, ++sx)
        {
            // Convert first half of byte
            c = str[sx];
            buffer[bx] = (byte)((c > '9' ? (c > 'Z' ? (c - 'a' + 10) : (c - 'A' + 10)) : (c - '0')) << 4);

            // Convert second half of byte
            c = str[++sx];
            buffer[bx] |= (byte)(c > '9' ? (c > 'Z' ? (c - 'a' + 10) : (c - 'A' + 10)) : (c - '0'));
        }

        return buffer;
    }
   private static byte[] cipherData(PaddedBufferedBlockCipher cipher, byte[] data)
    {
        int minSize = cipher.GetOutputSize(data.Length);
        byte[] outBuf = new byte[minSize];
        int length1 = cipher.ProcessBytes(data, 0, data.Length, outBuf, 0);
        int length2 = cipher.DoFinal(outBuf, length1);
        int actualLength = length1 + length2;
        byte[] result = new byte[actualLength];
        Array.Copy(outBuf,result,actualLength);

        //System.arraycopy(outBuf, 0, result, 0, result.length);
        return result;
    }
    private static byte[] decryptCTR(byte[] cipher, byte[] key, byte[] iv)
    {
        //Org.BouncyCastle.Crypto.Modes.SicBlockCipher

      PaddedBufferedBlockCipher aes = new PaddedBufferedBlockCipher(new SicBlockCipher(new AesEngine()));

      ParametersWithIV   ivAndKey = new ParametersWithIV(new KeyParameter(key), iv);
      aes.Init(false, ivAndKey);

      return cipherData(aes, cipher);
    }
    private static byte[] encryptCTR(byte[] plain, byte[] key, byte[] iv)
    {
        PaddedBufferedBlockCipher aes = new PaddedBufferedBlockCipher(new SicBlockCipher(
                new AesEngine()));

        ParametersWithIV ivAndKey = new ParametersWithIV(new KeyParameter(key), iv);
        aes.Init(true, ivAndKey);
        return cipherData(aes, plain);
    } 
```

我正在尝试使用以下方法解密给定的密文

```
 private void btnDecryptDirectly_Click(object sender, EventArgs e)
    {
        String encodedMsgHex =  "770b80259ec33beb2561358a9f2dc617e46218c0a53cbeca695ae45faa8952aa0e311bde9d4e01726d3184c34451";
        String key = "36f18357be4dbd77f050515c73fcf9f2";
        byte [] keyBytes = HexToBytes(key);

        byte[] cipher = HexToBytes(encodedMsgHex);

        txtDecryptedText = BytesToHex(decryptCTR(cipher, keyBytes, IV));

        rtbDecrypted.Text = txtDecryptedText;
    } 
```

每次我运行这个我都会得到错误

> 最后一个块解密不完整

错误。

任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T20:20:21.940

你根本不需要使用`PaddedBufferedBlockCipher`。计数器模式加密是分组密码的流模式。流式密码不需要填充。

您可以使用`BufferedBlockCipher`访问流模式，因为`SicBlockCipher`一次只能加密一个块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:38:34.970

如果您只需要 CTR 模式，您可以轻松地自己编写代码 - 它只需将 IV、IV + 1、IV + 2、IV +3 ... 写入缓冲区（最多输入数据大小），加密此缓冲区并进行异或运算使用缓冲区，您需要加密或解密。这可以通过内置的 Rijndael Managed 来实现。

# c++ - C++ 中的电子邮件解析器

> ID：13711017
> 
> 赞同：1
> 
> 时间：2012-12-04T20:07:03.553
> 
> 标签：c++, parsing

如果可能的话，我想要一些关于这个电子邮件解析器的帮助。

这段代码有所有正确的声明和初始化，但我不确定我在哪里搞砸了这个循环：

```
 while ( getline( fin, lines ) )
  {
     for ( int i = 0; i < lines.length( ); i++ )
     {
        if ( lines[ i ] == '@' )
        {
           for ( s = i; s < lines.length( ); s-- )
           {
              if ( s < 0 )
              {
                 break;
              }
              if ( validChar( lines[ s ] ) == false )
              {
                 break;
              }
           } //for

           for ( e = i; e > lines.length( ); e++ )
           {
              if ( e == lines.length( ) )
              {
                 break;
              }
              if ( validChar( lines[ e ] ) == false )
              {
                 break;
              }
              if ( lines[ e ] == '.' )
              {
                 hasDot = true;
              }
           } // for

           anEmail = lines.substr( s, e );

           cout << anEmail << endl;
        }
     } // if
  }    // while 
```

这是为了功能：

```
 bool validChar( char a )
  {
     bool result = false;
     if ( a >= 'A' && a <= 'Z' || a >= 'a' && a <= 'z' || a >= '0' && a <= '9' || a == '.' || a == '-' || a == '+' )
     {
        result = true;
     }
     return result;
  } 
```

编辑：一个测试用例是文本文件中的这个字符串“这是一个包含 DummyTest@my.test 和其他一些测试文本的电子邮件文件”，我想要这个“DummyTest@my.test”，我只是得到这个“@my.test 和其他一些测试文本”

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:27:51.760

你的问题在这里：

```
 for ( s = i; s < lines.length( ); s-- )
       {
          //...
          if ( validChar( lines[ s ] ) == false )
          {
             break;
          }
       } //for 
```

您正在检查是否`lines[s]`有效以决定是否终止；但`lines[s] == '@'`最初，因为你刚刚找到`@`！如果你初始化`s`为`i - 1`，你会更接近......但是你会发现你的`substr`里面有一堆不一样的。你最终需要做`anEmail = lines.substr( s + 1, e + 1 );`

但这只会导致代码通过您的测试用例。这不是解析电子邮件地址的有效方法。此方法不适用于所有有效的电子邮件地址，包括`"an@sign"@foo`和`"spaces are legal only in quotes"@foo`。您还需要扩展 validChar 以处理实际的有效字符集，这些字符因名称和域而异；`!#$%&'*+-/=?^_{}|~@[IPv6:2001:db8:1ff::a0b:dbd0]`是完全合法的。最后，如果实际上排除非法地址对您很重要，您将再次受到这种方法的限制：`double..dot@foo`不合法，也不合法`double@at@foo`。

其来源是 RFC822（或者它是较新的兄弟姐妹 RFC5322 和 RFC6531），在那里您会发现正则表达式无法解析电子邮件，这`name(comment(comment))@foo`是合法的，但`name(comment))@foo`不是。

# android - 在代码中设置 ListView 行高

> ID：13711018
> 
> 赞同：12
> 
> 时间：2012-12-04T20:07:10.143
> 
> 标签：android, listview, button, height

我有一个`Activity`包含一个`ListView`基于`SimpleCursorAdapter`和一个按钮。当我单击按钮时，我希望行高变大。我决定`TextView`在按钮上使用高度`OnClick`：

```
TextView tvRow = (TextView) findViewById(R.id.tvRow);
tvRow.setHeight(20); 
```

但它只更改列表的第一行。

`Adapter`我可以在's`getView`方法中更改高度：

```
TextView tvRow = (TextView) view.findViewById(R.id.tvRow);
tvRow.setHeight(20); 
```

但这不是我需要的功能；我需要这个按钮`OnClick`。

如何`ListView`通过点击按钮更改行高？甚至可能是一个技巧 :) 谢谢你的时间。

**更新：**

当我将此代码放入`SimpleCursorAdapter`一切正常时，但在方法`getView`中`BaseAdapter`：

```
@Override
  public View getView(int position, View convertView, ViewGroup parent) {
   View view = convertView;
if (view == null) {
  view = lInflater.inflate(R.layout.itemF, parent, false);
}
...   
 final LayoutParams params = view.getLayoutParams();
            if (params == null) { 
                view.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, mRowHeight)); 
        }else { 
        params.height = mRowHeight; }
return view; 
```

显示的列表忽略了这一点，它的行宽保持不变。怎么了？

**更新：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/llRow"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<CheckBox
    android:id="@+id/cbBox"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

<LinearLayout
    android:id="@+id/llRow1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingTop="5dp" >

    <TextView
        android:id="@+id/tvName"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Наименование фирмы"
        android:textAllCaps="true"
        android:textSize="14dp" />

    <TextView
        android:id="@+id/tvAddr"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Адрес фирмы"
        android:textSize="10dp" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-04T20:21:34.343

我认为您必须更改您的[getView()](http://developer.android.com/reference/android/widget/CursorAdapter.html#getView%28int,%20android.view.View,%20android.view.ViewGroup%29)方法`SimpleCursorAdapter`，如下所示：

```
final SimpleCursorAdapter adapter = new SimpleCursorAdapter (context, cursor) {
    @Override
    public View getView (int position, View convertView, ViewGroup parent) {
        final View view = super.getView(position, convertView, parent);
        final TextView text = (TextView) view.findViewById(R.id.tvRow);
        final LayoutParams params = text.getLayoutParams();

        if (params != null) {
                params.height = mRowHeight;
        }

        return view;
    }
} 
```

当您单击按钮时，您必须更改`mRowHeight`并通知`ListView`更改，例如`adapter.notifyDataSetChanged()`. 对于您的第一个值，`mRowHeight`您可以设置：

```
mRowHeight = LayoutParams.WRAP_CONTENT 
```

**升级版：**

如果您返回的方法[hasStableIds()](http://developer.android.com/reference/android/widget/BaseAdapter.html#hasStableIds%28%29)（默认返回），您必须在您的（您必须手动设置）中应用少量更改：`BaseAdapter``false``false``getView()``LayoutParams``View`

```
LayoutParams params = view.getLayoutParams();
if (params == null) { 
    params = new LayoutParams(LayoutParams.MATCH_PARENT, mRowHeight); 
} else {
    params.height = mRowHeight;
}

view.setLayoutParams(params); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-15T09:06:43.117

我做了类似的事情：

```
@Override
public View getView(int position, View convertView,ViewGroup parent) {
        View view = super.getView(position, convertView, parent);

        TextView textView=(TextView) view.findViewById(android.R.id.text1);
        textView.setHeight(30);
        textView.setMinimumHeight(30);

        / * Couleur de votre choix * / 
        textView . SetTextColor ( Couleur . BLACK );

        retourner voir ; 
    } 
```

您必须将两个字段都放入 textView.setHeight (30); textView.setMinimumHeight (30); 否则它将无法正常工作。对我来说它有效，我遇到了同样的问题。

# c# - 未从 Godaddy Hosted Exchange 收到 Exchange 2007 推送通知

> ID：13711025
> 
> 赞同：3
> 
> 时间：2012-12-04T20:07:22.510
> 
> 标签：c#, exchange-server, exchangewebservices, exchange-server-2007

我已将客户端配置为通过 EWS 托管 API 从 Godaddy 托管 Exchange 2007 SP1 服务器订阅推送通知。

我可以成功请求然后从 GoDaddy 的服务器 (mail.ex1.secureserver.net) 接收订阅 ID，但随后没有收到*任何*推送通知。我已联系 GoDaddy 以确保未禁用 EWS 推送通知，并且根据他们的说法，它们没有；所以，问题一定出在我的听众服务上。

我正在订阅该`DistinguishedFolderIdNameType.inbox`文件夹和以下事件：`NotificationEventTypeType.NewMailEvent`、`CopiedEvent`、`CreatedEvent`、`DeletedEvent`、`ModifiedEvent`和`MovedEvent`。

该`SendNotification`方法永远不会运行：

```
[WebService(Namespace = "http://microsoft.com/webservices/")]
public class PushNotificationClient : WebService, INotificationServiceBinding

    [WebMethod(Description="Creates a push notification subscription")]
    public string Subscribe(){/* code to subscribe goes here. It seems to work perfectly and I receive a SubscriptionID, Watermark, and no error messages. */}

    public SendNotificationResultType SendNotification(SendNotificationResponseType sendNotification)
    {
        // this never happens
        WriteEventToLog("SendNotification happened!");
    }
} 
```

`http://my-sub-domain.my-site.com/Service.asmx`Web 服务可通过拉取订阅请求 ( )中指定的 URL 公开访问。我已经验证手动发布到 URL 确实可以按预期工作。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:20:07.390

我想 SSL 证书不受信任会很重要。尝试使用 http url 订阅它。从理论上讲，您不会通过网络发送敏感数据，因为如果内存服务正确，您必须回调以获取数据。

# c# - 使用 WebRequest(C#) 发送数据和文件

> ID：13711029
> 
> 赞同：1
> 
> 时间：2012-12-04T20:07:32.497
> 
> 标签：c#, curl, stream, webrequest

我想使用 WebRequest 发送数据和文件。

```
byte[] fileStream = File.ReadAllBytes(path);

ServicePointManager.ServerCertificateValidationCallback = new RemoteCertificateValidationCallback(delegate { return true; });

WebRequest request = WebRequest.Create(url);

request.ContentType = "application/json";
request.Method = "POST";
request.Credentials = new NetworkCredential("name", "pw");

Stream dataStream = request.GetRequestStream();
dataStream.Write(Encoding.UTF8.GetBytes(data), 0, Encoding.UTF8.GetBytes(data).Length);
//dataStream.Write(fileStream, 0, fileStream.Length);

dataStream.Write(fileStream, 0, fileStream.Length); //CAUSES A CRASH
dataStream.Close();
WebResponse response = request.GetResponse(); 
```

我不知道它为什么会失败，如果我包含“dataStream.Write(fileStream, 0, fileStream.Length);” 线服务器无法接受我的流，说有一个内部错误。我有一个有效的 CURL 命令向我显示服务器想要的数据。

```
curl -k -X POST -u name:pw -H "Content-type: application/json"
-H 'Accept:application/json''url'
-d'{parameters}'
--data-binary @file.wav 
```

如果我排除了上述行，该命令按预期工作，告诉我没有输入文件。所以我认为file.wav可能有问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:19:47.527

该代码将写入一些 JSON 格式的数据，紧随其后的是 file.wav 的原始字节。这很可能不是接收服务器所期望的。通常，如果您想同时发送文件和数据，您将使用 MIME 多部分编码。它可能`curl`会自动为您执行此操作。最好通过连接调试代理（如 Fiddler）并观察`curl`实际发送的内容来确认该假设。然后尝试在 C# 中模拟它。

如果您确实需要发送多部分消息，那么了解您使用的 .NET 框架的版本会很有帮助。在一些较新的版本中有更简单的方法来做到这一点。

# apache - 为什么我必须使用 mod_proxy 在 Scientific Linux 上执行 setenforce 0 集群 tomcat

> ID：13711030
> 
> 赞同：0
> 
> 时间：2012-12-04T20:07:35.590
> 
> 标签：apache, http, tomcat, mod-proxy, selinux

为什么我必须使用 mod_proxy 在 Scientific Linux 上执行 setenforce 0 集群 tomcat

我正在使用 Scientific Linux 6.2 版并试图让 mod_proxy 与 httpd 和 tomcat 一起工作。

我想在盒子上运行两个 tomcat 节点，所以我需要将第二个 tomcat 节点 ajp 端口更改为 diff，然后是 8009，例如 8109，但是一旦我在 Scientific Linux 上更改端口，它就会停止工作，但我发现如果我这样做一个

**设置强制 0**

然后就可以了。

有人可以告诉我我在做什么，如果有人知道如何让tomcat节点在科学Linux上工作而不做setenforce 0

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-16T12:04:08.683

如果您设置“setenforce 0”，则禁用 SELinux 强制模式。这意味着，您的系统中没有真正的拒绝，只是为了调试而记录下来。

常见配置只有 SELInux 规则。您必须允许 tomcat 在不同的端口上运行，并且您必须启用 httpd 服务器来连接该端口。

[在http://danwalsh.livejournal.com/9275.html](http://danwalsh.livejournal.com/9275.html)上阅读更多关于连接端口和 SELinux 的绑定

# c# - 根据字典中的值在 dataGridView 中创建新列

> ID：13711032
> 
> 赞同：0
> 
> 时间：2012-12-04T20:07:39.060
> 
> 标签：c#, winforms, datagridview

我有一个程序可以将 XML 文件中的字段读取到字典中。我想根据字典中的值在 dataGridView 中命名和创建列。问题是，直到运行时我才会知道字典中的值将是什么，以及以什么顺序。有没有办法以编程方式执行此操作，并指定它们将成为哪种类型的列（如组合框、文本框等）？

```
 custXML=
        doc.Descendants("DT100")
           .ToDictionary(d => (int)d.Element("import_seq"),
                         d => (string)d.Element("display_name")); 
```

其中 custXML 是以 import_seq 为键，display_name 为值的字典。这是我尝试添加到我的 datagridview 的内容（有固定的 64 列，其中一些可能是空的）：

```
DataGridViewColumn[] foo = new DataGridViewColumn[64];
for (int i = 0; i < 63; i++)
  foo[i] = new DataGridViewColumn();

foreach (KeyValuePair<int, string> item in custXML)
{
  for (int i = 0; i < 63; i++)
    foo[i].HeaderText = item.Value.ToString();
}

for (int i = 0; i < 63; i++)
  dataGridView1.Columns.Add(foo[i]); 
```

但是，当我运行它时，列的名称都说“源代码”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:00:19.373

在您的代码中

```
foreach (KeyValuePair<int, string> item in custXML)
        {
            for (int i = 0; i < 63; i++)
                foo[i].HeaderText = item.Value.ToString();
        } 
```

您反复将所有列标题更改为相同的字符串。因此，它们都以 XML 中最后一项的名称结束。您需要为每个新的键值对设置适当的 DataGridViewColumn 的标题，而不是遍历所有 DataGridViewColumns。

我将把实现作为练习留给你:)

**编辑以回答评论：**

foreach 迭代字典，但内部循环将当前字典项应用于所有列。所以最后，所有的列都得到最后一个字典条目的项目值。如果我了解您要做什么，您可能想用

```
if (item.Key >= 0  && item.Key <= 63)
    foo[item.Key].HeaderText = item.Value.ToString(); 
```

# asp.net-mvc - MVC 局部视图 [Display(Name = "")] 可以在没有 DisplayFor 或 EditorFor 的情况下使用

> ID：13711033
> 
> 赞同：3
> 
> 时间：2012-12-04T20:07:42.487
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我试图在主索引视图中显示部分视图的值，但很难理解为什么该`[Display(Name = "")]`属性没有得到尊重。控制器有一个类，其中两个`[Display(Name = "")]`属性设置了属性但不显示。

如果我不能在我正在做的事情中使用这些属性，我很好，只要了解为什么没有类似`@Html.DisplayFor`或`@Html.EditorFor`会有所帮助的东西是不可能的。

我也很有可能在代码中有问题，这就是原因。

控制器

```
 [OutputCache(Duration = 0)]
    public JsonResult OrderPreview(int id)
    {
        if (ModelState.IsValid)
        {
            try
            {
                // Commented code
                        try
                        {
                            byte[] data = image.Save(image);

                            // Testing with a Dictionary works but maybe not ideal???
                            //Dictionary<string,object> attributes = new Dictionary<string, object>();
                            //attributes.Add("Job", order.Job);
                            //attributes.Add("Order Id", id);
                            //attributes.Add("Customer Count", order.CustomerCount);
                            //attributes.Add("Height", design.Height);
                            //attributes.Add("Width", design.Width);

                            var orderPreviewResult = new OrderPreviewResult.OrderPreview()
                                                         {
                                                             Job = order.Job,
                                                             OrderId = id,
                                                             CustomerCount = order.CustomerCount,
                                                             Height = design.Height,
                                                             Width = design.Width
                                                         };

                            var attributeList = new List<OrderPreviewResult.OrderPreview>();
                            attributeList.Add(orderPreviewResult);

                            return Json(new OrderPreviewResult()
                            {
                                //Attributes = attributes,
                                OrderPreviewAttributes = attributeList,
                                PngBase64 = Convert.ToBase64String(data)
                            }, JsonRequestBehavior.AllowGet);
                // Commented code
            }
            catch (Exception e)
            {
                ModelState.AddModelError("", e.Message);
            }
        }

        var result = new OrderPreviewResult();
        result.Errors = new List<string>();

        // Add the errors to the result
        foreach (var value in ModelState)
        {
            foreach (var error in value.Value.Errors)
            {
                result.Errors.Add(error.ErrorMessage);
            }
        }

        return Json(result, JsonRequestBehavior.AllowGet);
    }
}

public class OrderPreviewResult
{
    public string PngBase64 { get; set; }
    public List<string> Errors { get; set; }
    //public Dictionary<string, object> Attributes { get; set; }

    public List<OrderPreview> OrderPreviewAttributes { get; set; }

    public class OrderPreview
    {
        [Display(Name = "Order Id")]
        public int OrderId { get; set; }

        public string Job { get; set; }

        [Display(Name = "Customer Count")]
        public uint CustomerCount { get; set; }

        public uint Height { get; set; }

        public uint Width { get; set; }
    }
} 
```

Index.cshtml 视图

```
@{
    ViewBag.Title = "Orders";
}

@section css
{
    <link href="@Url.Content("~/Content/DataTables-1.8.2/css/DT_bootstrap.css")" rel="stylesheet" type="text/css" />
}

@section scripts
{
    <script src="@Url.Content("~/Content/Datatables-1.8.2/js/jquery.dataTables.min.js")" type="text/javascript"></script>
}

<div class="page-header">
    <h1>Orders</h1>
</div>

<script type="text/javascript">

$(document).ready(function () {
        // Commented code
});

function OnShowPreview() {
    $("#LoadingIndicator").show();
    $("#PreviewImage").hide();
    $("#PreviewErrorText").hide();
    $("#PreviewAttributesText").hide();

    var id = $('.modal-body #orderId').val();

    $.ajax({
        type: "POST",
        url: '@Url.Action("OrderPreview")/' + id,
        data: id,

        success: function (data) {
            $("#LoadingIndicator").hide();

            if (data.Errors != null) {

                var errorList = $("#PreviewErrorText ul");
                errorList.html('');

                $(data.Errors).each(function (i, item) {
                    errorList.append('<li>' + item + '</li>');
                });

                $("#PreviewErrorText").show();
            } else {
                $("#PreviewImage").attr('src', 'data:image/png;base64,' + data.PngBase64);
                $("#PreviewImage").show();

                if (/* data.Attributes != null */ data.OrderPreviewAttributes != null) {

                    //var attributes = data.Attributes;
                    var attributes = data.OrderPreviewAttributes[0];

                    var attributeList = $("#PreviewAttributesText");
                    attributeList.html('');
                    attributeList.append('<h4>Attributes:</h4>');

                    var table = $("<table class='table table-condensed table-striped'>");

                    for (var key in attributes) {
                        if (attributes[key] != null) {
                            if (attributes.hasOwnProperty(key)) { // this will check if key is owned by data object and not by any of it's ancestors
                                table.append('<tr><th scope="row">' + key + ':</th><td>' + attributes[key] + '</td></tr>');
                            }
                        }
                    }

                    table.appendTo(attributeList);

                    $("#PreviewAttributesText").show();
                }
            }
        }
    });
}

function GeneratePreview(e) {
    // Prevent the default submit from occurring
    if (e.preventDefault)
        e.preventDefault();
    else
    //fix for IE
        e.returnValue = false;

    $('.modal-body #orderId').val(e.srcElement.id);

    // Show the dialog
    $('#OrderPreviewModal').modal('show');
}

</script>

@Html.Partial("_OrderPreview") 
```

_OrderPreview.cshtml 部分视图

```
<div class="modal hide fade" id="OrderPreviewModal" tabindex="-1" role="dialog">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h3 id="OrderPreviewModalLabel">Order Preview</h3>
    </div>
    <div class="modal-body">
        <div>
            <input type="hidden" name="orderId" id="orderId" value="" />
            <div id="LoadingIndicator" style="display: table-cell; vertical-align: middle">
                <img alt="Loading..." src="@Url.Content("~/Content/ajax-loader.gif")" style="display:block; margin-left: auto; margin-right: auto" />
            </div>
            <img id="PreviewImage" alt="Preview" src="" style="display: block; margin-left: auto; margin-right: auto" />

            <div id="PreviewAttributesText">

            </div>

            <div id="PreviewErrorText" style="color: red">
                <p>Errors occurred:</p>
                <ul />
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal">Close</button>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T20:19:44.207

有时您需要 Model 属性的 DisplayName，而您不想/不需要使用`@Html.DisplayFor()`

因此，您可以创建一个 HtmlHelper 来检索某个属性的 DisplayName。

```
public static MvcHtmlString GetDisplayName<TModel, TProperty>( this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression )
{
    var metaData = ModelMetadata.FromLambdaExpression<TModel, TProperty>(expression, htmlHelper.ViewData);
    string value = metaData.DisplayName ?? (metaData.PropertyName ?? ExpressionHelper.GetExpressionText(expression));
    return MvcHtmlString.Create(value);
} 
```

在您看来，只需使用：

```
@Html.GetDisplayName(x => x.YourProperty) 
```

# ruby-on-rails-3 - :has_many, :through => 具有多个属性更新形式的关联表

> ID：13711044
> 
> 赞同：0
> 
> 时间：2012-12-04T20:08:34.080
> 
> 标签：ruby-on-rails-3, associations, has-many-through

我很难让它正确渲染和更新。发生了什么，我有一个多对多关联，关联连接表包含多个属性。一个案例可以有多个屏幕，一个屏幕可以有多个案例，并且可以为每个案例订购一个案例的屏幕。在我当前的设置中发生的另一个奇怪的项目是关联表在每次提交表单时都没有清除旧的关联值。新值被附加到表中。

课程：

```
class Case < ActiveRecord::Base
    attr_accessible :cases_screens_attributes

    has_many :cases_screens
    has_many :screens, :through => :cases_screens

    accepts_nested_attributes_for :cases_screens, 
                                  :allow_destroy => true,
                                  :reject_if => lambda { |p| p[:screen_id].nil? }
end

class Screen < ActiveRecord::Base
    has_many :cases_screens
    has_many :cases, :through => :cases_screens
end

class CasesScreen < ActiveRecord::Base
    attr_accessible :order

    belongs_to :case
    belongs_to :screen
end 
```

控制器：

```
# GET /cases/1/edit
def edit
    @case = Case.find(params[:id])
    @cases_screens = @case.cases_screens.order("cases_screens.[order] ASC")
    @screens = Screen.where({:active => true})
end

# PUT /cases/1
# PUT /cases/1.json
def update
    @case = Case.find(params[:id])
    @cases_screens = @case.cases_screens.order("cases_screens.[order] ASC")
    @screens = Screen.where({:active => true})

    respond_to do |format|
      if @case.update_attributes(params[:case])
        format.html { redirect_to case_path(@case), :notice => t(:case_successfully_updated) }
        format.json { head :no_content }
      else
        format.html { render :action => "edit" }
        format.json { render :json => @case.errors, :status => :unprocessable_entity }
      end
    end
end 
```

我尝试过多次尝试使用 fields_for 均无济于事。这是我目前在我的 _form.erb.html 文件中的内容。最终目标是在案例表单上查看所有屏幕的列表，每个屏幕旁边都有一个复选框。每个复选框还有一个关联的“订单”输入。提交后，cases_screens 表将被正确填充（如果不再选择旧值，则删除旧值）。

```
<div class="controls">

  <% @screens.each do |s| %>

    <label>
      <%= check_box_tag("case[cases_screens_attributes][#{s.id}][screen_id]", s.id, @case.screen_ids.include?(s.id)) %>
      <%= s.name %>
    </label>
      <%= select_tag("case[cases_screens_attributes][#{s.id}][order]", options_for_select(1..@screens.size, 2)) %>
  <% end %>

</div> 
```

几天来，我一直在用头撞墙，但我似乎无法做到这一点。任何帮助将不胜感激。

附加说明：

我使用简单的形式，我只是做了以下事情：

```
<%= f.association :screens %> 
```

一切都按预期工作（无订单属性更新）。关联表已正确清理。当然，这将我指向嵌套属性的方向作为罪魁祸首，但我不确定。

更新星期三 10:45 我现在确信这里发生的问题是表格中缺少 case_screens_id。通常在清理期间，rails 将使用此 ID 清理以前的条目，然后填充新条目。因为我循环的是@screens，而不是当前存在的cases_screens（与案例相关联），所以如果没有查询每一行，我就无法获取id。

我想现在，我的解决方案是在 case_screens 中编写一个 before_save 方法，该方法将清理 case_screens 的当前条目，然后允许填充新值。

更新 1:15 我已经接近了至少一个项目，因此只有在选中复选框时才会插入记录。我已将更新的 :reject_if 添加到上面的 Case 类中。对于为什么只将值附加到表中以及为什么不删除以前的值，我仍然没有解决方案。

更新 4:00 我的最新尝试包括一个隐藏字段，其中包含 cases_screens ID（如果仅设置了记录）。这需要我在循环中进行子查询以获取当前的 case_screen_id。与 :reject_if 参数一起，现在可以正确更新值。但是，不能再删除当前设置的值。

我不可能做到这一点，感觉不像铁轨。这种情况是否是我应该在控制器中手动处理数据的情况之一？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T18:30:19.713

目前，我将其归结为设计问题。

我现在正在使用

```
 <% @case.cases_screens.each do |cs| %>
    <%= hidden_field_tag("case[cases_screens_attributes][#{cs.id}][id]", cs.id) %>
    <%= hidden_field_tag("case[cases_screens_attributes][#{cs.id}][screen_id]", cs.screen_id) %>
    <%= hidden_field_tag("case[cases_screens_attributes][#{cs.id}][_destroy]", 1) %>
    <label><%= check_box_tag("case[cases_screens_attributes][#{cs.id}][_destroy]", 0, @case.cases_screen_ids.include?(cs.id)) %> <%= cs.screen.name %></label>
    <%= text_field_tag("case[cases_screens_attributes][#{cs.id}][ordinality]", cs.ordinality) %>
  <% end %> 
```

这只会显示当前设置的案例/屏幕链接。用户将需要通过单独的屏幕将特定屏幕添加到案例中。

# javascript - 将变量动态写入网页

> ID：13711053
> 
> 赞同：0
> 
> 时间：2012-12-04T20:09:36.317
> 
> 标签：javascript

我在下面有以下函数，当所有 3 个变量都不为空时它工作得很好，但是，如何修改它以便当任一变量（电话、传真、单元格）为空时，包含空变量的行不会得到书面？

```
Current scenario:
T. 123-4567-8910
F. 987-654-3210
C. 
-------------------------------
Desired scenario:
T. 123-4567-8910
F. 987-654-3210
-------------------------------
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
function test() {

var tel = "123-4567-8910"
var fax = "987-654-3210"
var cell = ""

var html =
        '<div>T. '+ tel +'</div>\n' +
        '<div>F. '+ fax +'</div>\n' +
        '<div>C. '+ cell +'</div>'

document.write(html)

}
</script>
</head>
<body>
<a href="javascript:test()">test</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:14:19.530

让我向您介绍条件语句：

```
var html = '';
if (tel) {
  html += '<div>T. '+ tel +'</div>\n';
}
if (fax) {
  html += '<div>F. '+ fax +'</div>\n';
}
if (cell) {
  html += '<div>C. '+ cell +'</div>\n';
}
document.write(html) 
```

虽然`document.write()`通常被认为是一个坏主意。[你可以在这里](https://developer.mozilla.org/en-US/docs/DOM/document.write)阅读更多关于它的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:14:35.777

试试这个：

```
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript">
        function test() {
            var tel = "123-4567-8910";
            var fax = "987-654-3210";
            var cell = "";

            var html = "";

            if (tel == "") {
                html = html + '<div>T. '+ tel +'</div>\n';
            }
            if (fax == "") {
                html =  html + '<div>F. '+ fax +'</div>\n';
            }
            if (cel == "") {
                html = html + '<div>C. '+ cel +'</div>\n';
            }
            document.append(html);
        }
    </script>
</head>
<body>
<a href="javascript:test()">test</a>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:15:30.213

您需要测试每个变量：

```
var html =
    ((tel)?'<div>T. '+ tel +'</div>\n':'') +
    ((fax)?'<div>F. '+ fax +'</div>\n':'') +
    ((cell)?'<div>C. '+ cell +'</div>':'') ;
document.write(html); 
```

这个怎么运作：

```
(tel)?'<div>T. '+ tel +'</div>\n':'' 
```

表示：如果 tel 不为空/null，则为`'<div>T. '+ tel +'</div>\n'`else`''`

演示：http: [//jsfiddle.net/gHdy8/](http://jsfiddle.net/gHdy8/)

# string - 如何将此字符串的数字放入数据库中？

> ID：13711056
> 
> 赞同：0
> 
> 时间：2012-12-04T20:09:45.487
> 
> 标签：string, list, parsing, vim, split

我想将这些字符串的单行号放在一个名为 SingleLineNrs 的列表中：

`\%(\%>1l.\%<4l\|\%>5l.\%<7l\|\%>9l.\%<15l\|\|\%>15l.\%<17l\|\%>17l.\%<19l\|\%>24l.\%<29l\|\%>31l.\%<33l\|\%>33l.\%<35l\)`

SingleLineNrs 必须是`[2,3,6,10,11,12,13,14,16,18,25,26,27,28,32,34]`

但是我不知道如何拆分这些字符串，因为`>`and`<`符号。
问题是我需要字符串 self 中的`>`和而不是数字之间的数字。`<`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:11:06.740

You can break your input string using a regex like this one:

```
>(\d+)\D+(\d+) 
```

It has two capture groups:

*   Group 1: The Lower bound of the integer sequence you want to create.
*   Group 2: The upper bound of the integer sequence you want to create.

You would then loop through every regex match producing sequences of numbers from the bounds the match gives you.

I'm not sure what code environment you have access to. So here is a C# function that produces the output you want from the sample input string you provided.

```
private static string DecodeSequence(string encodedSequence)
{
    const string SEPARATOR = ",";
    const int GRP_LBOUND = 1, GRP_UBOUND = 2;
    Regex boundPairPattern = new Regex(@">(\d+)\D+(\d+)");
    Match matchBoundPair = boundPairPattern.Match(encodedSequence);

    var decodedSequence = new StringBuilder();
    while (matchBoundPair.Success)
    {
        int lBound = Convert.ToInt32(matchBoundPair.Groups[GRP_LBOUND].Value);
        int uBound = Convert.ToInt32(matchBoundPair.Groups[GRP_UBOUND].Value);
        for (int i = lBound + 1; i < uBound; ++i)
        {
            decodedSequence.Append(i).Append(SEPARATOR);
        }
        matchBoundPair = matchBoundPair.NextMatch();
    }
    if (decodedSequence.Length > 0) decodedSequence.Length -= SEPARATOR.Length;
    return String.Format("[{0}]", decodedSequence);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T07:39:52.097

当您分析数据时，您会识别出结构：

1.  范围由`\|`
2.  下限和上限由`.`
3.  边界由前面无趣的东西 ( `\%`)、印记 ( `<`/ `>`)、数字和末尾无趣的东西组成
4.  根据印记，需要增加/减少数字以获得第一/最后一行编号

我会逐步处理数据；每个步骤只是对`split()`、`matchstr()`、`matchlist()`或其他原始操作的简单调用。

例如，第一步是

```
:echo split('\%(\%>1l.\%<4l\|\%>5l.\%<7l\|\%>9l.\%<15l\|\|\%>15l.\%<17l\|\%>17l.\%<19l\|\%>24l.\%<29l\|\%>31l.\%<33l\|\%>33l.\%<35l\)', '\\|') 
```

# android - getSupportActionBar() 在 Android 中返回 null

> ID：13711060
> 
> 赞同：1
> 
> 时间：2012-12-04T20:10:37.833
> 
> 标签：android, android-fragments, android-actionbar

我正在尝试将地图视图附加到选项卡中的片段。

这是我的 MapFragment：

```
import android.app.LocalActivityManager;
import android.content.Intent;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.Window;

import com.actionbarsherlock.app.SherlockFragment;

public class MapFragment extends SherlockFragment {
    private static final String KEY_STATE_BUNDLE = "localActivityManagerState";

    private LocalActivityManager mLocalActivityManager;

    protected LocalActivityManager getLocalActivityManager() {
        return mLocalActivityManager;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Bundle state = null;
        if (savedInstanceState != null) {
            state = savedInstanceState.getBundle(KEY_STATE_BUNDLE);
        }

        mLocalActivityManager = new LocalActivityManager(getActivity(), true);
        mLocalActivityManager.dispatchCreate(state);
    }

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
            //This is where you specify you activity class
        Intent i = new Intent(getActivity(), LocationActivity.class); 
        Window w = mLocalActivityManager.startActivity("tag", i); 
        View currentView=w.getDecorView(); 
        currentView.setVisibility(View.VISIBLE); 
        currentView.setFocusableInTouchMode(true); 
        ((ViewGroup) currentView).setDescendantFocusability(ViewGroup.FOCUS_AFTER_DESCENDANTS);
        return currentView;
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putBundle(KEY_STATE_BUNDLE,
                mLocalActivityManager.saveInstanceState());
    }

    @Override
    public void onResume() {
        super.onResume();
        mLocalActivityManager.dispatchResume();
    }

    @Override
    public void onPause() {
        super.onPause();
        mLocalActivityManager.dispatchPause(getActivity().isFinishing());
    }

    @Override
    public void onStop() {
        super.onStop();
        mLocalActivityManager.dispatchStop();
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        mLocalActivityManager.dispatchDestroy(getActivity().isFinishing());
    }
} 
```

这是我的位置活动：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;
import java.util.List;
import java.util.Locale;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import org.json.JSONTokener;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Point;
import android.graphics.drawable.Drawable;
import android.location.Address;
import android.location.Geocoder;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnTouchListener;
import android.view.inputmethod.InputMethodManager;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.RelativeLayout;
import android.widget.TextView;
import android.widget.Toast;

import com.actionbarsherlock.view.MenuItem;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.MyLocationOverlay;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;

/*
 * A location activity that defers location and map functionality to the app. This activity can be used directly but an activity have to send lon/lat when they do the intent call. 
 * (non-Javadoc)
 * @see android.widget.AdapterView.OnItemClickListener#onItemClick(android.widget.AdapterView, android.view.View, int, long)
 */
public class LocationActivity extends com.actionbarsherlock.app.SherlockMapActivity {

/*t
 * Variables for this activity. 
 */
    private MapView mapView;
    private GeoPoint newP, mapOverlayP, myLocationP,p,markedP;
    private boolean pointset = false, markset = false, point = false, markerpoint = false;
    private ArrayList<String> address =  new ArrayList<String>();
    private ArrayList<Double> lon = new ArrayList<Double>();
    private ArrayList<Double> lat = new ArrayList<Double>();
    private String markedAddr = null,setAddr = null;

    private MapController mc;
    private double latitude, longitude, Lon, Lat;
    private ArrayList<LocationDb> locations = new ArrayList<LocationDb>();
    LocationDb locationDb = new LocationDb();
    private Bundle bundle = new Bundle();
    LocationManager locationManager;
    Location location,lastLocation,myLocation;

    long minTime = 3;
    float bestAccuracy =1;
    Location bestResult;
    long bestTime = 0;
    private LocationListener locationListener;
    public ArrayList<Place> places = new ArrayList<Place>();
    ListView  placesListView;
    Button expandListButton;
    public static EditText searchText;
    @Override
    public void onStart(){

        final View customNav = LayoutInflater.from(this).inflate(R.layout.actionbar_title, null);
        final TextView customNavHeader = (TextView) customNav.findViewById(R.id.actionbarHeader);
        customNavHeader.setText("Done");
        customNavHeader.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View view) {
              onClick_addLocation();
            }
        }); //e

        getSupportActionBar().setDisplayShowCustomEnabled(true);
        getSupportActionBar().setDisplayShowHomeEnabled(false);
        getSupportActionBar().setDisplayShowTitleEnabled(false);
        getSupportActionBar().setCustomView(customNav); 
    }
    @Override
    public void onCreate(Bundle savedInstanceState){
      super.onCreate(savedInstanceState);
      setContentView(R.layout.map);

      mapView =(MapView)findViewById(R.id.mapView1);

      expandListButton = (Button)findViewById(R.id.expandListButton);
      new MyLocationOverlay(this, mapView);

      placesListView = (ListView)findViewById(R.id.explorePlacesListView);
      // Define a listener that responds to location updates
       locationListener = new LocationListener() {
        @Override
        public void onLocationChanged(Location location) {
            // Called when a new location is found by the network location
            // provider.
            // makeUseOfNewLocation(location);
            getLonLat(location);

        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
        }

        @Override
        public void onProviderEnabled(String provider) {
        }

        @Override
        public void onProviderDisabled(String provider) {
        }
      };

      getLocation();

      //handler = new Handler();

     // bundle = (Bundle) getIntent().getExtras().getBundle("bundle");

      bundle = null;
      if (bundle != null)
      { 
      getLocation();

      }
      checkLocation();
      if(myLocationP != null)
      {
      addMyLocationMarker(myLocationP);
      }

      if(markset)
      {
      addLocationMarker(newP);
      }

      new GeoPoint((int) (latitude * 1E6),  (int) (longitude * 1E6));

    //Menu

      placesListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
          @Override
          public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {

              latitude = Double.valueOf(places.get(position).latitude);
              longitude = Double.valueOf(places.get(position).longitude);
              newP = new GeoPoint((int) (latitude * 1E6),  (int) (longitude * 1E6));
              markedP = new GeoPoint((int) (latitude * 1E6),  (int) (longitude * 1E6));
              markedAddr = places.get(position).name;
              setAddr = places.get(position).name;
              Toast.makeText(getApplicationContext(), markedAddr, Toast.LENGTH_LONG).show();
              addLocationMarker(newP);
              pointset = false;

          }
        });

      expandListButton.setText("Searching..");
  } 
```

只是无法将其附加到片段。我哪里错了？

另外，这是最好的方法吗？我不能将它附加到片段本身而不是调用另一个活动吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:53:36.837

我相信`SherlockMapActivity`extends`MapActivity`没有`ActionBar`

无论您在做什么，我都强烈建议您查看Android[版](https://developers.google.com/maps/documentation/android/)Maps 的第 2 版并改用它。

我也认为`SherlockMapActivity`已从 ABS 中删除。（[来源](https://github.com/JakeWharton/ActionBarSherlock/tree/master/library/src/com/actionbarsherlock/app)）

# c# - SaveChanges 实体框架后延迟加载不起作用

> ID：13711065
> 
> 赞同：5
> 
> 时间：2012-12-04T20:11:03.693
> 
> 标签：c#, entity-framework, lazy-loading, dbcontext

在下面的函数中，在 context.SaveChanges() 之后，实体 PropertyType 始终为空。我刚刚从使用 ObjectContext 转换为 DBContext（首先使用数据库），在更改之前，它运行良好，但现在不行。有什么我想念的吗？

我检查了 PropertyTypeID，它写得正确并且存在于数据库中。所有关系都在 db 和 edmx 文件中正确设置。生成的 .tt 文件将 PropertyType 对象显示为虚拟。这是 EF 5。

这是代码（实体属性的非重要分配已被删除）：

```
 private ListingTransferDetail BeginListingTransferDetailReport(int PropertyTypeID)
    {
        ListingTransferDetail transfer_detail = new ListingTransferDetail();
        transfer_detail.PropertyTypeID = PropertyTypeID;

        using (IDXEntities context = new IDXEntities())
        {
            context.ListingTransferDetails.Add(transfer_detail);
            context.SaveChanges();
            TransferProgress += "<br /><br /><strong>" + DateTime.Now + "</strong>: Transfer initialized for property type \"" + transfer_detail.PropertyType.DisplayName + "\".";
        }

        return transfer_detail;
    } 
```

提前致谢。

**编辑**

我发现如果我在 SaveChanges() 之后添加这行代码，它就可以工作。但是，这并不理想，我怎样才能让它默认加载实体？

```
context.Entry(transfer_detail).Reference(a => a.PropertyType).Load(); 
```

再次感谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T21:40:57.317

您需要创建一个代理而不是使用`new`才能启用延迟加载：

```
private ListingTransferDetail BeginListingTransferDetailReport(int PropertyTypeID)
{
    using (IDXEntities context = new IDXEntities())
    {
        ListingTransferDetail transfer_detail =
            context.ListingTransferDetails.Create();
        transfer_detail.PropertyTypeID = PropertyTypeID;

        context.ListingTransferDetails.Add(transfer_detail);
        context.SaveChanges();

        //...

        // the following triggers lazy loading of PropertyType now
        var something = transfer_detail.PropertyType.SomeProperty;
    }

    return transfer_detail;
} 
```

# javascript - 上次调用的内部函数引用参数

> ID：13711068
> 
> 赞同：0
> 
> 时间：2012-12-04T20:11:10.057
> 
> 标签：javascript, jquery, closures

似乎每次调用 edit() 函数时都会覆盖此函数中的变量。

```
function edit(el)
{
    $edit_img = $(el);
    $btn = $('<img width="15" height="15" src="images/add.png">');

    $edit_confirm = $edit_img.parent();

    $edit_confirm.append($btn);

    function restore_span()
    {
        $edit_img.show();

        $btn.remove();
    }

    $btn.click(restore_span);

    $edit_img.hide();
} 
```

从此 onclick 处理程序调用编辑函数：

```
<img src = "images/edit-icon.png" width = "15px" height = "15px" onclick="edit(this)" /> 
```

在多个图像上调用 edit() 时，例如上面唯一的图像，最近创建的图像会被删除。

我应该如何修改此功能以修复此行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T20:14:09.950

使用`var $btn`代替`$btn`（也用于其他变量）

当您编写 `var $btn`时-在没有时创建局部变量`var`-它是全局的

因此，在您的情况下，您每次都替换这些变量（例如`$edit_img`，用于恢复功能的变量）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T20:15:57.350

与 PHP 不同，JavaScript 中的变量并不是块或函数的隐式本地变量。

要将变量声明为函数范围的局部变量，请使用[`var`statements](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var)：

```
function edit(el) {
    var $edit_img = $(el), // use them with comma
        $btn = $('<img width="15" height="15" src="images/add.png">');
    var $edit_confirm = $edit_img.parent(); // or just multiple times
    $edit_confirm.append($btn);
    $btn.click(function restore_span() {
        $edit_img.show();
        $btn.remove();
    });
    $edit_img.hide();
} 
```

# python - 我可以对我的代码进行哪些调整，以便在不替换第一个矩阵的情况下打印第二个矩阵？Python

> ID：13711072
> 
> 赞同：0
> 
> 时间：2012-12-04T20:11:28.590
> 
> 标签：python, matrix

```
import numpy as np
def readMatrix(filename):
    rows = []
    for line in open(filename):
        columns = []
        for number in string.split(line):
            columns.append(float(number))
        rows.append(columns)
    return numpy.array(rows)

def writeMatrix(a, filename):
    f = open(filename, 'w')
    for row in a:
        for number in row:
            f.write(str(number) + ' ')
        f.write('\n')
    f.close()

def TaylorMatrixExp(A):
    I = identity(len(A))
    return (I + A + (1./2.)*(dot(A,A)) + (1./6.)*(dot(dot(A,A),A)) + (1./24.)*(dot(dot(A,A),dot(A,A))))

A = readMatrix('matrix.txt')

l, v = eig(A)

L = identity(len(l))

for i in xrange(len(l)):
    L[i][i] = array(exp(l))[i]

VLV = dot(dot(v,L),inv(v))

writeMatrix(VLV,'expA.txt')

ExponentA = TaylorMatrixExp(A)
writeMatrix(ExponentA,'expA.txt') 
```

它读取的矩阵是：
`2 2`
`16 6`

我定义了两个 3 函数，readMatrix（从文本文件中读取矩阵）、writeMatrix（将矩阵写入文件）和 TaylorMatrixExp（获取数组并展开它）。我最初使用 readMatrix 读取包含上述矩阵的文本文件并将其放入数组 A。我将 A 的特征值放入数组 l 以及 A 的特征向量并将其放入数组 v。我最终将值放入数组 l 穿过单位矩阵的对角线。然后我调用 writeMatrix 函数并将指数写入“expA.txt”，然后再次调用 writeMatrix 函数并将矩阵 ExponentA 写入“expA.txt”。但是，它替换了原始矩阵，我不希望它这样做。

and I want it to write to a file
`some# some#`
`some# some#`

`some#2 some#2`
`some#2 some#2`

but instead it replaces the first matrix
`some#2 some#2`
`some#2 some#2`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T20:13:11.073

```
f = open(filename, 'a') 
```

Lets you [*append*](http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files) to the file rather than rewrite it, which is what you're currently doing with the `'w'` argument, which is why that matrix is replaced.

# c# - 由于远程服务未运行，如何中断在连接状态下被阻止的 WCF 代理

> ID：13711076
> 
> 赞同：7
> 
> 时间：2012-12-04T20:11:42.223
> 
> 标签：c#, .net, wcf

我已经进行了大量搜索，但无法找到解决方案或答案。我有一个我写的测试应用程序来显示“问题”。（我认为这只是 WCF 的工作方式，我对此无能为力。）

我的测试应用是一个简单的 WCF 服务和带有 Visual Studio 生成代理的客户端。我将代理指向已启动但未运行服务的远程计算机。这一点很重要。如果远程计算机根本没有运行，WCF 调用将立即失败。

客户端应用程序创建客户端代理类的实例，启动一个新任务，然后尝试在服务接口上进行调用，这将阻塞，因为另一端的服务不存在。后台任务休眠 5 秒，然后关闭代理。我期待另一个线程在关闭代理时立即出错，但事实并非如此。在发出初始呼叫大约 20 秒后，它就会出现故障。

这是我的客户代码：

```
using System;
using System.ServiceModel;
using System.Threading;
using System.Threading.Tasks;
using TestConsoleClient.MyTestServiceReference;

namespace TestConsoleClient
{
class Program
{
    static void Main(string[] args)
    {
        MyTestServiceClient client = new MyTestServiceClient();

        // Start new thread and wait a little bit before trying to close connection.
        Task.Factory.StartNew(() =>
        {
            LogMessage("Sleeping for 5 seconds ...");
            Thread.Sleep(5000);
            if (client == null)
            {
                LogMessage("Woke up!  Proxy was closed before waking up.");
                return;
            }

            LogMessage("Woke up!  Attempting to abort connection.");
            LogMessage(string.Format("Channel state before Close: {0}", 
                ((ICommunicationObject)client).State));

            client.Close();
            ((IDisposable)client).Dispose();
            client.Abort();

            // Channel state is Closed, as expected, but blocked thread does not wake up?
            LogMessage(string.Format("Channel state after Abort: {0}",
                ((ICommunicationObject)client).State));

            client = null;
        });

        // Start connecting.
        LogMessage("Starting connection ...");

        try
        {
            LogMessage("Calling MyTestService.DoWork()");
            client.DoWork();  // Timeout is 60 seconds.  State is "Connecting"
        }
        catch (Exception ex)
        {
            LogMessage(string.Format("Exception caught: {0}", ex.Message));
            if (client != null)
            {
                client.Abort();
                ((IDisposable) client).Dispose();
                client = null;
            }
        }
        finally
        {
            if (client != null)
            {
                client.Close();
                client = null;
            }
        }

        LogMessage("Press Enter to exit ...");

        Console.ReadLine();
    }

    private static void LogMessage(string msg)
    {
        Console.WriteLine("{0}: [{1}] {2}",
                          DateTime.Now.ToString("hh:mm:ss tt"),   Thread.CurrentThread.ManagedThreadId, msg);
    }
}
} 
```

这是我的程序的输出：

```
01:48:31 PM: [9] Starting connection ...
01:48:31 PM: [9] Calling MyTestService.DoWork()
01:48:31 PM: [10] Sleeping for 5 seconds ...
01:48:36 PM: [10] Woke up!  Attempting to abort connection.
01:48:36 PM: [10] Channel state before Close: Opening
01:48:36 PM: [10] Channel state after Abort: Closed
01:48:54 PM: [9] Exception caught: Could not connect to net.tcp://th-niconevm:80
80/MyTestService. The connection attempt lasted for a time span of 00:00:22.0573
009\. TCP error code 10060: A connection attempt failed because the connected par
ty did not properly respond after a period of time, or established connection fa
iled because connected host has failed to respond 10.10.10.10:8080.
01:48:54 PM: [9] Press Enter to exit ... 
```

我想要完成的是让用户中断连接，以便他们可以在必要时进行调整，然后重试。正如您在输出中看到的那样，通道随后从“Opening”状态变为“Closed”状态，但服务调用一直处于阻塞状态，直到超时。我当然可以解决它，但似乎应该有办法打断它。

这是客户端 app.config：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<system.serviceModel>
    <bindings>
        <netTcpBinding>
            <binding name="NetTcpBinding_IMyTestService" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions"
                hostNameComparisonMode="StrongWildcard" listenBacklog="10"
                maxBufferPoolSize="524288" maxBufferSize="65536" maxConnections="10"
                maxReceivedMessageSize="65536">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <reliableSession ordered="true" inactivityTimeout="00:10:00"
                    enabled="false" />
                <security mode="Transport">
                    <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign" />
                    <message clientCredentialType="Windows" />
                </security>
            </binding>
        </netTcpBinding>
    </bindings>
    <client>
        <endpoint address="net.tcp://remotehost:8080/MyTestService" binding="netTcpBinding"
            bindingConfiguration="NetTcpBinding_IMyTestService" contract="MyTestServiceReference.IMyTestService"
            name="NetTcpBinding_IMyTestService">
            <identity>
                <userPrincipalName value="remotehost\ClientUser" />
            </identity>
        </endpoint>
    </client>
</system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:51:08.990

如果您使用异步操作生成代理类，您可能会获得更多的里程，然后您的代码会变得更加简单。

```
// Asynchronously call DoWork
MyTestServiceClient client = new MyTestServiceClient();
IAsyncResult iar = client.BeginDoWork(null, null);

// Sleep, dance, do the shopping, whatever
Thread.Sleep(5000);

bool requestCompletedInFiveSeconds = iar.IsCompleted;

// When you're ready, remember to call EndDoWork to tidy up
client.EndDoWork(iar);
client.Close(); 
```

如果这听起来可能有帮助，请阅读异步模式。 [这个 MSKB](http://support.microsoft.com/kb/315582)非常有用，它展示了几种编写异步代码的方法。

您的问题实际上可能是无法取消正在进行的 WCF 操作；您必须为此编写自己的取消机制。例如，您将无法判断请求是否实际在进行中（即：`DoWork`需要中止执行）​​，或者某些网络或其他机器延迟是否是阻塞。

# performance - 测量表格列中最长单元格的有效方法

> ID：13711080
> 
> 赞同：4
> 
> 时间：2012-12-04T20:12:02.843
> 
> 标签：performance, infragistics, html-table, webdatagrid, offsetwidth

我正在尝试确定固定宽度的 HTML 表格单元格中最宽的内容。目前我正在使用外部sizer DIV：

```
 <div id="xdivSizer" style="position:absolute;display:inline;visibility:hidden">
 </div> 
```

在这段代码中

```
var iColWidth = 0;

for (var Y = 0; Y < oDataTable.rows.length; Y++) {
    oDivSizer.innerHTML = oDataTable.rows[Y].cells[0].innerHTML;
    iColWidth = Math.max(oDivSizer.offsetWidth, iColWidth)
} 
```

它可以工作，但速度极慢，即使表只有 100 行左右。看起来主犯正在计算`offsetWidth`。有没有更有效的方法来实现这一目标？

我这样做是因为我需要将该表列调整为最宽数据的大小。如果有其他更好的方法，那也很棒。

*（更准确地说，我正在尝试在 ASP.NET 的 Infragistics WebHierarchicalDataGrid 控件中实现“列自动调整大小”功能 - 列需要采用最宽的宽度`Max(Header Width, Data Width)`，同时保持固定的页眉/寻呼机位置）。*

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T18:30:43.933

重写 DIV 内容将触发大量重绘、CSS 应用程序、DOM 操作等。

尝试一次将列中的**所有单元格都放在**DIV 中，用换行符分隔 - 或者每个单元格都放在它自己的子 DIV 中。生成的 DIV 的宽度**应该**是最长单元格的宽度。

```
var html = [];
for (var Y = 0; Y < oDataTable.rows.length; Y++) {
    html.push(oDataTable.rows[Y].cells[0].innerHTML);
}

oDivSizer.innerHTML = html.join("<br />");
var iColWidth = Math.max(oDivSizer.offsetWidth, 1); 
```

另一种可能性是基于每个单元格的 innerText 的简单启发式。

```
var iColWidth = 0;
for (var Y = 0; Y < oDataTable.rows.length; Y++) {
    var w = Math.floor(oDataTable.rows[Y].cells[0].innerText.length * 11.5);
    iColWidth = Math.max(w, iColWidth);
} 
```

正如我在上一条评论中所指出的，另一种可能性是*仅*重绘消耗最大面积的列中的 TD。

```
var a = 0;
var n = null;
for (var Y = 0; Y < oDataTable.rows.length; Y++) {
    var _a = oDataTable.rows[Y].cells[0].offsetHeight * oDataTable.rows[Y].cells[0].offsetWidth;
    if (Number(_a) > a) {
      a = _a;
      n = oDataTable.rows[Y].cells[0];
    }
}
oDivSizer.innerHTML = n.innerHTML;
var iColWidth = Math.max(oDivSizer.offsetWidth, 1); 
```

或者，更进一步，将每个单元格的计算面积除以找到的 BR 数，以说明“故意”高单元格。

```
var a = 0;
var n = null;
for (var Y = 0; Y < oDataTable.rows.length; Y++) {
    var _a = oDataTable.rows[Y].cells[0].offsetHeight * oDataTable.rows[Y].cells[0].offsetWidth;
    var brs = oDataTable.rows[Y].cells[0].getElementsByTagName('br');
    _a = Number(_a) / brs.length;
    if (_a > a) {
      a = _a;
      n = oDataTable.rows[Y].cells[0];
    }
}
oDivSizer.innerHTML = n.innerHTML;
var iColWidth = Math.max(oDivSizer.offsetWidth, 1); 
```

但是，随着模糊方法的复杂性增加并且结果变得更加准确，您可以预期性能会下降。

作为旁注，如果这种自动调整大小是作为用户交互的结果应用的，我建议在表格可供分析后*立即*执行大小调整计算/处理，而不是等待用户启动调整大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:14:26.503

默认情况下，当列和网格本身没有指定宽度时，WebDataGrid 会将网格的内容区域调整为其内容。然后将标头调整为数据部分的大小。无论网格是在容器中还是在容器外部，这都会很好地工作。

由于网格的数据部分大小正确，我们需要做的就是将列调整为更大的大小、网格中第一个单元格的宽度或显示完整标题的测量值。以下 JavaScript 将执行此操作：

```
function resizeGrid(grid) {
    var textWidthChecker = document.getElementById('textWidthChecker');
    var columns = grid.get_columns();
    var widths = new Array(columns.get_length());
    var row = grid.get_rows().get_row(0);
    var newGridWidth = 0;
    for (var colIdx = 0; colIdx < columns.get_length(); colIdx++) {
        var col = columns.get_column(colIdx);
        textWidthChecker.innerHTML = col.get_headerText();
        var cellElement = row.get_cell(colIdx)._element;
        if (!col.get_hidden()) {
            if (textWidthChecker.offsetWidth > cellElement.offsetWidth) {
                // 8 for padding in header.
                newGridWidth += textWidthChecker.offsetWidth + 8;
                widths[colIdx] = textWidthChecker.offsetWidth + 8;
            } else {
                widths[colIdx] = cellElement.offsetWidth;
                newGridWidth += cellElement.offsetWidth;
            }
        }
    }
    newGridWidth += columns.get_length() * 16; // added for padding on cells
    var gridElement = grid.get_element();            
    gridElement.style.width = newGridWidth + 'px';
    for (var colIdx = 0; colIdx < columns.get_length(); colIdx++) {
        var col = columns.get_column(colIdx);
        col.set_width(widths[colIdx] + 'px');
    }
} 
```

上面要求有一个 id 为“textWidthChecker”的跨度，以便使用与字体网格标题相同的 CSS 类来工作：

```
<div style="height: 0px;overflow: hidden;" class="igg_HeaderCaption ig_Control">
    <span id="textWidthChecker"></span>
</div> 
```

当从客户端 Initialize 方法调用 resizeGrid 函数时，只要网格位于一个容器内，该容器对于调整标题大小时的网格足够宽，这种方法就可以很好地工作。

如果网格位于较小的容器中，这将失败，因为 WebDataGrid 在内部设置其宽度，这会影响列的大小。为了解决这个问题，需要提前调用 resizeGrid 函数，尽管没有任何事件。

具体来说，需要在调用_initializeObjects 和_adjustGridLayout 之间的网格初始化函数期间调用resizeGrid。为此，您可以修改 WebDataGrid 的原型，将 _adjustGridLayout 替换为另一个调用 resizeGrid 并调用原始 _adjustGridLayout 的原型：

```
var adjustGridLayoutFunction = $IG.WebDataGrid.prototype._adjustGridLayout;
$IG.WebDataGrid.prototype._originalAdjustGridLayout = adjustGridLayoutFunction;
$IG.WebDataGrid.prototype._adjustGridLayout = function () {
    resizeGrid(this);
    this._originalAdjustGridLayout();
}; 
```

请注意，修改原型会影响页面上的每个网格，因此如果您想控制应用到哪个网格，则需要在新的 _adjustGridLayout 函数中添加条件逻辑。例如：

```
if (this.get_id() == "WebDataGrid1")
    resizeGrid(this); 
```

为了防止文本在网格中换行，您还需要对 ItemStyle 使用 css：

```
.noWrapCellStyle {
    white-space: nowrap;
} 
```

为此，应在网格的容器上设置所需的宽度，并且网格宽度应保持为空：

```
<div style="width:300px;overflow: auto;">
    <ig:WebDataGrid ID="WebDataGrid1" runat="server" Height="450px" AutoGenerateColumns="True" ItemCssClass="noWrapCellStyle">
    </ig:WebDataGrid>
</div> 
```

如果您使用的是行选择器，则需要在我提供的逻辑中更新计算以考虑行选择器。

# c# - 以树状排列的数据的自定义类

> ID：13711081
> 
> 赞同：0
> 
> 时间：2012-12-04T20:12:03.037
> 
> 标签：c#

我正在尝试创建一个自定义类，以下列方式排列数据：-

```
Departments 
        Section 1
                 Person 1
                 Person 2
        Section 2
        ... etc 
```

下面是我写的代码，但它不像我想的那样工作： -

```
 public class Sections
    {
        private List<Section> _Section = new List<Section>();
        public List<Section> Section
        {
            get
            {
                return this._Section;
            }
        }
    }
    //Innehåller alla detailer om varje sektion
    public class Section
    {
        public string Name { get; set; }
        public int Capacity { get; set; }
        public int MinimumStaffing { get; set; }
        public int IdealStaffing { get; set; }

        private List<Person> _Employee = new List<Person>();
        public List<Person> Employee
        {
            get
            {
                return this._Employee;
            }
            set { }
        }
    }
    //Innehåller alla info. om en enskild personal
    public class Person
    {
        public string Name { get; set; }
        public string Email { get; set; }
        public int TelephoneNo { get; set; }
        public int Pager { get; set; }
        public int HomePhone { get; set; }
        public string Title { get; set; }
    } 
```

我要做的是：- 首先：- 获取第 1 节的名称并将其保存到字符串中。第二：- 获取本节（第 1 节）中每个人的姓名。第三：- 将第 1 部分的名称和本部分中的人员列表添加到命名部门列表中。

下面是我用来实现我正在尝试做的代码（这对我不起作用，请参阅下文了解更多信息）

```
if (index == 0 || index == node.ChildNodes.Count)
                        {
                            if (node.ChildNodes.Count == 2)
                            {
                                sektionsNamn = node.ChildNodes[0].InnerText;
                                continue;
                            }
                            else if (node.ChildNodes.Count > 2)
                            {
                                Sektion.Employee.Add(new Person() { Name = node.ChildNodes[0].InnerText });
                                index = node.ChildNodes.Count;
                                continue;
                            }
                        }
                        else
                        {
                            Sektioner.Section.Add(new Section() { Name = sektionsNamn, Employee=Sektion.Employee });
                            index = 0;
                        } 
```

问题在于 else 语句，它返回 0 个计数，即它添加了 Name 属性，但它没有添加员工列表。

知道如何克服这个吗？

抱歉打扰并提前感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T20:16:23.117

`Employee`类中属性的属性设置器是空的，因此当您这样调用它时，您`Section`不会分配任何东西。在您的示例中，您有以下属性代码：`_Employee``Sektioner.Section.Add(new Section() { Name = sektionsNamn, Employee=Sektion.Employee })``Employee`

```
public List<Person> Employee
{
     get
     {
           return this._Employee;
     }
     set { }
} 
```

您应该将其更改为此代码（即实现属性设置器）

```
public List<Person> Employee
{
       get
       {
            return this._Employee;
       }
       set 
       { 
            this._Employee = value;
       }
} 
```

另外，我建议您在类`Section`中实现构造函数，该构造函数将在其块中设置字段：

```
public class Section
    {
        public string Name { get; set; }
        public int Capacity { get; set; }
        public int MinimumStaffing { get; set; }
        public int IdealStaffing { get; set; }
        public Section(string name, List<Person> employee)
        {
            this.Name = name;
            this._Employee = employee;
        }
        public Section()
        {
            this._Employee = new List<Person>(); //if you call the empty constructor, create the list
        }
        private List<Person> _Employee; 
        public List<Person> Employee
        {
            get
            {
                return this._Employee;
            }
            set
            {
                this._Employee = value;
            }
        }
    } 
```

然后您可以将呼叫更改为：

```
Sektioner.Section.Add(new Section(sektionsNamn, Sektion.Employee)); 
```

我发现这更简单，很少导致类似的错误。

# xades4j - 当 x509SubjectName 中的属性顺序与证书中的顺序不同时如何验证 Xades-t 消息

> ID：13711085
> 
> 赞同：0
> 
> 时间：2012-12-04T20:12:05.837
> 
> 标签：xades4j

目前我正在尝试验证来自第三方的消息。我遇到的问题是无法创建信任链。原因是证书中主题名称 (X509SubjectName) 中项目的顺序与从包含的证书中提取它们时的顺序不同。

例如：在 xades-t 消息中，x509SubjectName 标签具有：“C=NL,O=Test company,CN=testuser,SERIALNUMBER=1”，其中证书中包含的 x509SubjectName 具有：“SERIALNUMBER=1,CN=testuser ,O=测试公司,C=NL"

我的问题是这是否被允许。以及如何更改 Xades4j 行为以验证这些签名消息。因为我似乎没有 SignatureUtils 类中的证书。代码似乎能够处理，但使用的地图是空的。

问候， 皮姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:25:03.310

在 RFC2253 文档第 2.1 节中，它说：

> 2.1。转换 RDNS 序列
> 
> 如果 RDNSequence 为空序列，则结果为空字符串或长度为零的字符串。
> 
> 否则，输出由
> RDNSequence 中每个 RelativeDistinguishedName 的字符串编码组成（根据 2.2），
> 从序列的最后一个元素开始并向后移动
> 到第一个元素。
> 
> 相邻的 RelativeDistinguishedNames 的编码由逗号字符 (',' ASCII 44) 分隔。

因此，无论顺序是什么，您都需要颠倒顺序。因此，我认为您应该首先检查您的实现，并确保您颠倒了相对可分辨名称的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:48:18.833

## 通过更改 xades4j 行为的解决方法。

因为我没有找到任何文档证明 X509SubjectName 中的属性顺序需要与相关证书中的 DN 顺序相同。我认为稳健性需要以下补丁。

如果*xades4j.verification.SignatureUtil.java*决定依赖主题名。它不应该只是继续使用它，而是应该验证主题名是否与证书中的主题名相同。这不能通过比较完整的字符串来完成。相反，两个主题名称都需要解组并根据它们的关联进行比较。

首先，选择行为需要稍作改变：不只是使用主题名，而是首先从证书中检索 DN，然后比较它们的值。如果它们使用完整的字符串不匹配，它们应该可以匹配它们的实际内容。因此，我们需要获取两个 DN 的属性。当没有发现差异时，我们仍在处理相同的 DN。在这种情况下，框架不能依赖主题名从证书存储中检索证书。而是将证书提供给 KeyInfo 对象。（那会被发现的！）

```
 if (x509Data.containsIssuerSerial()) {
            issuerSerial = x509Data.itemIssuerSerial(0);
            certSelector.setIssuer(new X500Principal(issuerSerial.getIssuerName()));
            certSelector.setSerialNumber(issuerSerial.getSerialNumber());
        } else if (x509Data.containsSubjectName()) {
            String subjectName = x509Data.itemSubjectName(0).getSubjectName();
            X500Principal msgPrincipal = new X500Principal(subjectName);
            String name = msgPrincipal.getName();

            X509Certificate crt = x509Data.itemCertificate(0).getX509Certificate();
            X500Principal crtPrincipal = crt.getSubjectX500Principal();

            X500Principal prinFromCrt = crt.getSubjectX500Principal();
            if(prinFromCrt.getName().equals(msgPrincipal.getName())){
                // Continue using the xades specified subjectname
                 certSelector.setSubject(msgPrincipal);
            } else {
                //so the subject names are not equal.
                //However the ietf specifications indicate you cannot rely on the order of the attributed.
                //Therefor we need to compare all attributes seperately to know for sure.

               boolean hasSameKeyValues = compareUnmarshelledX500PrincipalAttr(crtPrincipal,msgPrincipal);
               if (hasSameKeyValues){

                   if (x509Data.containsCertificate()) {
                       certSelector.setCertificate(x509Data.itemCertificate(0).getX509Certificate());
                   }
               }    
            }

        } else if (x509Data.containsCertificate()) {
            certSelector.setCertificate(x509Data.itemCertificate(0).getX509Certificate());
            if (x509Data.containsSubjectName()){
                //if(!(isEqualX500Elements(new X500Principal(x509Data.itemSubjectName(0).getSubjectName()), x509Data.itemCertificate(0).getX509Certificate()))){
                //     throw new InvalidKeyInfoDataException("X509Subject name differs from Subject name in certificate.");
                //}
            }
        } else
        // No criteria to select the leaf certificate.
        // Improvement: search the SigningCertiticate property and try to
        // find the "bottom" certificate.
        {
            throw new InvalidKeyInfoDataException("No criteria to select the leaf certificate");
        } 
```

下面是一个方法，它接受 DN 并请求包含键及其值的 HashMap。无论它们是否相同，它都会返回一个布尔值。

```
 private static boolean compareUnmarshelledX500PrincipalAttr(X500Principal DN1, X500Principal DN2) {
       HashMap attrDNCrt = splitDNAttr(DN1.getName());
       HashMap attrDNMsg = splitDNAttr(DN2.getName());

       if(attrDNCrt.keySet().equals(attrDNMsg.keySet())){
           Set ks = attrDNCrt.keySet();
           Iterator iKS = ks.iterator();
           while (iKS.hasNext()){
               String key = (String) iKS.next();
               if(!attrDNCrt.get(key).toString().equals(attrDNMsg.get(key).toString())){
                   //Value of attribute is different. So not identical
                   return false;
               }
           }
           //Yes, despite possible differences in order the key value pairs are identical.");
           return true;
       } else {
           //"KeySets differ so they are different"
           return false;
       }
} 
```

splitDNAttr 将依赖于密钥命名不包含“，”这一事实。因此，我首先在“=”上拆分，然后在最后一个“，”上拆分。可能有正则表达式也可以解决问题。（不幸的是，RegEx 对我来说完全不可读。）这些方法对我有用，但我想知道是否需要删除可能的尾随空格“？

```
static private HashMap splitDNAttr(String inputStr){
    String[] strings;
    List looseElements;
    looseElements = new ArrayList();
    //First split on the = which normally isn't escaped.
    strings = inputStr.split("=");        
    looseElements.add(strings[0]);
    //Loop Through string members

    int i=1;
    while (i<strings.length){
        String[] subStrings;
        //Look for the last comma, everything after is a key! This is because we have splitted the string on '='
        int splitPos = strings[i].lastIndexOf(",");
        if(splitPos>=0){
            //Add all found items to a list. Order must be maintained!
            String A = strings[i].substring(0,splitPos);
            looseElements.add(strings[i].substring(0,splitPos));
            String B = strings[i].substring(splitPos+1);
            looseElements.add(strings[i].substring(splitPos+1));
        } else {
            looseElements.add(strings[i]);
        }
        i++;
    }

    // Put key and values in a HashMap
    HashMap dnAttr = new HashMap();
    Iterator iLooseElements;
    iLooseElements = looseElements.iterator();
    String a;
    String b;
    while(iLooseElements.hasNext()){
        a = (String) iLooseElements.next();
        b = (String) iLooseElements.next();
        dnAttr.put(a, b);
    }
    return dnAttr;
} 
```

# java - 模拟静态 void 时，Powermockito 不会抛出异常

> ID：13711087
> 
> 赞同：2
> 
> 时间：2012-12-04T20:12:27.900
> 
> 标签：java, powermock

我正在尝试模拟静态方法 Thread.sleep(1); 调用时返回 InterruptedException。我发现了一个似乎可以解决我的问题的 SO question，但是在将我的代码设置为与该问题的答案相同之后，它仍然无法正常工作。

我发现的 SO 问题是：[How to mock a void static method to throw exception with Powermock？](https://stackoverflow.com/questions/7483628/how-to-mock-a-void-static-method-to-throw-exception-with-powermock)

这是我正在尝试测试的方法的片段：

```
try {
    Thread.sleep(1);
} catch (InterruptedException ie) {
    LOGGER.error("failure to sleep thread for 1 millisecond when persisting
        checkpoint. exception is: " + ie.getMessage());
} 
```

这是我的测试类的一个片段，它显示了我尝试模拟 Thread.sleep(1) 来做我想做的事：

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(Thread.class)
public class TestCheckpointDaoNoSQL {

        @Test
        public void test() throws InterruptedException {

        PowerMockito.mockStatic(Thread.class);
        PowerMockito.doThrow(new InterruptedException()).when(Thread.class);
        Thread.sleep(1);
        }
} 
```

我还尝试模拟 InterruptedException 来抛出而不是创建一个新异常，但这并没有帮助。我可以说没有抛出异常，因为 ECLEMMA 没有显示该部分方法的代码覆盖率，并且我通过该方法进行调试以验证标语永远不会被击中。

感谢您查看我的问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T20:41:44.947

阅读答案向我表明，您实际上还没有调用 Thread.sleep ，而是刚刚完成了模拟的设置：

```
 @Test
    public void test() throws InterruptedException {

    PowerMockito.mockStatic(Thread.class);
    PowerMockito.doThrow(new InterruptedException()).when(Thread.class);
    Thread.sleep(1); //This is still setting up the mock, not actually invoking the method.
    } 
```

请注意上面所说的内容：“除非我使用相同的参数对 Adder.add() 进行两次调用，否则不会抛出模拟的 IOException。” 后来，“实际上上面的 Adder.add(12) 是设置模拟静态方法的一部分”。

您可能应该`anyInt()`在第一次“调用”Thread.sleep 时使用匹配器，然后继续执行测试。

# sql - Coldfusion SQL 插入循环

> ID：13711089
> 
> 赞同：3
> 
> 时间：2012-12-04T20:12:36.407
> 
> 标签：sql, coldfusion

遇到一个问题，我想我可能会看看是否有人对如何解决它有任何想法。

基本上，我在一个奇异变量下传入多个值，我想使用循环来提取每个单独的值并同时插入它。

例如，ischecked 是我用来传递设备值的变量。如果我要选择两个设备，按提交并在我的处理页面中转储变量#form.ischecked#，我会得到一个值，例如 41,42。我需要一种方法来拆分这些值，并认为 cfloop 和 insert 将是完美的。

如果这很重要，这一切都在 cfc 中完成。

```
 <cfset devicearray = ArrayNew(1)>
        <cfset temp = ArrayAppend(devicearray, #ischecked#)>
        <cfset test = ArrayToList(devicearray, ",")>
        <cfset length= ListLen(test)>\
        \\this loop takes the amount of devices selected, and outputs the length of the list. 
```

我用它来找出插入循环应该持续多长时间。我本来也可以只检查数组的长度，但我也打算将该列表用于其他目的。

```
 <cfset devicetest = #form.ischecked#>

        <cfset usertest = #form.userid#>

        \\form.ischecked is the variable that contains the device IDs

        \\form.userid is the variable that contains the User IDs

        <cfquery name="loopquery" datasource="Test">
        <cfloop from="1" to="#length#" index="i">

        \\loop from 1 to "length", the number of Devices selected as specified earlier

        INSERT INTO Loan (DeviceID, UserID)
        VALUES ("#Evaluate("devicetest#i#")#","#Evaluate("userID#i#")#" )
        </cfloop>
        </cfquery> 
```

所以基本上这就是我坚持的地方，循环遍历值，但它寻找 devicetest1 而不是 device test （因为索引），但我无法终生弄清楚如何传递值以便它单独挑选出每一个。

我见过一些例子，人们在索引 (i) 中附加了值，然后用它来插入，但并没有真正理解它是如何工作的。

谢谢，乔丹

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T20:38:25.607

我认为您使这件事复杂化了很多。下面将循环遍历表单变量中的列表。

```
<!--- dummy data --->
<cfset form.userid = 75>
<cfset form.ischecked = '46,47'>

<cfloop list="#form.ischecked#" index="i">  
 <cfquery name="loopquery" datasource="Test">
 INSERT INTO Loan (DeviceID, UserID)
 VALUES (
    <cfqueryparam cfsqltype="cf_sql_integer" value="#i#">,
    <cfqueryparam cfsqltype="cf_sql_integer" value="#form.userid#">
    )
 </cfquery>
</cfloop> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T20:36:46.067

我不明白这是什么意思`deviceArray`。您说`form.isChecked`的已经是一个包含设备 ID 列表的列表。如果它来自表单提交，则它已经用逗号分隔。

`listlen`因此，除了 a来获取它的长度之外，没有真正需要做任何事情。

您的代码可能会断章取义，但要完整，请确保您`param` `form.isChecked`和`form.userID`

```
<cfparam name="form.isChecked" default="">
<cfparam name="form.userID" default=""> 
```

此时，我也会亲自做一些错误检查，以确保两个变量的长度匹配。

```
<cfif listLen(form.isChecked) NEQ listLen(form.userID)>
    <!--- abort or do something else --->
</cfif> 
```

实际上不需要为每个循环编写单独的插入。大多数数据库将允许您使用一条语句插入多行。由于您只是循环遍历 and 中的每个值`form.userID`，因此`form.isChecked`您只需执行 a `listGetAt`- 确保使用 a`cfqueryparam`来清理您的数据输入。请注意，我只是假设您的`deviceId`和`userId`值是整数。根据需要更改这些。

```
<cfquery name="insert" datasource="test">
    INSERT INTO Loan (DeviceID, UserID)
    VALUES
    <cfloop from="1" to="#listLen(form.userID)#" index="i">
       <cfif i GT 1>
           ,
       </cfif>
       (
           <cfqueryparam value="#listGetAt(form.isChecked,i)#" cfsqltype="CF_SQL_INTEGER">,
           <cfqueryparam value="#listGetAt(form.userID,i)#" cfsqltype="CF_SQL_INTEGER">
       )
    </cfloop>
</cfquery> 
```

# c# - 按标签 ID 从列表视图中删除一行

> ID：13711094
> 
> 赞同：-1
> 
> 时间：2012-12-04T20:12:52.570
> 
> 标签：c#

如何使用行的标签 ID 从列表视图中删除一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:41:57.537

这是我做的一个快速功能。它利用了linq。 `myTag`可以是任何对象。

```
 string myTag = "aaa";

        List<ListViewItem> lst = listView1.Items.Cast<ListViewItem>().Where(i => i.Tag == myTag).ToList();
        if (lst.Count != 0)
        {
            listView1.Items.Remove(lst.First());
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:28:29.877

您可以调用要删除的[`ListViewItem.Remove`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listviewitem.remove.aspx "MSDN 上的 ListViewItem.Remove 方法")方法。`ListViewItem`

> 此方法在功能上与包含该项目的 ListView 控件中的 ListView.ListViewItemCollection 的 Remove 方法类似。您可以使用 Remove 方法从其 ListView 控件中删除项目。如果要将项目移动到不同的 ListView 控件或需要根据用户的请求从应用程序中删除项目，则此功能非常有用。

例如，您可以循环浏览 中的所有内容`ListViewItems`，`ListView`查看`Tag`和`Remove`要删除的项目：

```
// Create the ListView and ListViewItem.
ListView myList = new ListView();
ListViewItem myItem = new ListViewItem { Tag = "MyTag", Text = "My ListViewItem" };
myList.Items.Add(item);

// Look for the ListViewItem with a Tag of "MyTag" and remove it.
foreach (ListViewItem item in myList.Items) {
    if (String.CompareOrdinal(item.Tag as string, "MyTag") == 0) {
        i.Remove();
        break;
    }
} 
```

此示例在删除第一个匹配项后退出。如果有多个匹配`ListViewItems`项需要删除，您需要收集这些匹配项，然后再删除它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:35:25.533

将来，您应该向社区展示您在问题上付出的努力。你可以告诉我们你尝试了什么，并给我们一些例子。但是，下面是一些应该有助于回答您的问题的代码。

```
int id = 0;

foreach (ListViewItem item in listView1.Items)
{
   if((int)item.Tag == id)
   {
      item.Remove();
      break;
   }
} 
```

注意：这假设标签是一个整数。如果情况并非总是如此，那么您应该添加代码以防止出现错误。

# .net - 可以将 Web 应用程序分离到具有不同目的的多台机器上，共享同一个会话吗？

> ID：13711098
> 
> 赞同：1
> 
> 时间：2012-12-04T20:13:23.560
> 
> 标签：.net, oracle, session, iis, shared

如果你能提供帮助，我正在寻找建议、帮助或“你不能那样做”的答案。

我在使用 .NET 4.0 并运行 MVP 中的 Web 应用程序的 .NET 开发团队中。现在，我们有一个由 4 个运行 Win2K3 和 IIS 6（明年升级）的 IIS 机器组成的网络农场，并且一个 F5 BigIP 设备正在使用粘性会话来跨越所有四个机器的流量。由于它的成功，我们的应用程序的规模和范围正在扩大。我向你保证，这是一个很好的问题。然而，我们正在经历成长的痛苦。我们希望在当前使用的 4 台机器上保留事务工作（通过各种 Web 表单添加/编辑/删除），然后添加另外 2 台机器，仅用于报告/指标的工作量。

这是我们想要做的：

1.  使用可用的 Oracle.Web.dll 对象类将会话状态放入我们的 Oracle 数据库，并针对我们的 Oracle 11g DB 运行 .SQL 文件以正确设置会话。因此，如果一个盒子死了，会话数据仍然存在。

2.  设置我们的 web.config 以在所有 4 个当前框中为我们的会话提供程序使用 Oracle 数据库。

到目前为止，一切都很好。这是相当基本且可重复的。不用担心。这是我卡住的地方：

1.  我们想要提取此应用程序的报告 ASPX 文件并将它们放在 2 个不同的（新）IIS 框（现在总共 6 个）上，F5 BigIP 仅对这两个框进行负载平衡，以便使用粘性会话进行报告. 将其他 4 个留给 OLTP 事务性工作，不带报告。

2.  不知何故，我们希望以某种方式使用我们在上面创建的相同会话存储来附加到仅运行报告机制的 2 个 IIS 框，跟踪用户的会话，而不必重复登录/身份验证/授权并填写安全类具有运行报告的用户权限。报告是应用程序的一部分，但它只会处理报告部分，并且只有该代码会被放到 2 台新机器上。如果当前用户的会话仍然处于活动状态、有效并且我们可以访问它，它就可以独立运行。

就好像我们想要一个分布式应用程序结构，其中不同的 IIS 服务器运行 Web 应用程序的不同部分，但共享会话状态。

有没有人遇到过这样的事情？这是可能的还是不可能的？还是有更好的选择？感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:22:59.803

你绝对可以做到这一点。您必须为每个应用程序提供相同的[machineKey](http://msdn.microsoft.com/en-us/library/w8h3skw9%28v=VS.71%29.aspx)。从这里开始：http: [//support.microsoft.com/kb/2527105](http://support.microsoft.com/kb/2527105)和这里：[简单的 bing 查询](http://www.bing.com/search?q=asp.net%20share%20session&qs=n&form=QBRE&pq=asp.net%20share%20session&sc=5-17&sp=-1&sk=)

# grails - 类型的 Grails 收音机

> ID：13711099
> 
> 赞同：0
> 
> 时间：2012-12-04T20:13:24.817
> 
> 标签：grails, radio-button

我有一个 Grails 应用程序，我正在尝试根据对象上的不同字段进行搜索。我想用单选按钮实现一个搜索字段，以确定搜索哪些字段。

示例：如果选择框 1（搜索标题），则输入框有“ABC” 如果选择框 2（搜索作者）如果选择框 1 和 2（搜索标题和作者，如果其中一个匹配则返回项目）

所以它看起来像：

如果框 1 (entries = entry.findAllByTitleLike("ABC")) 如果框 2 (entries = entry.findAllByAuthorLike("ABC"))

一旦我进入，我就可以输出它，只需要了解如何进行单选按钮的多选。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:27:34.753

```
def entries = entryClass.withCriteria {
  if (box1) {
    like 'title', "ABC"
  }
  if (box2) {
    like 'author', "CDE"
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T00:03:02.423

```
if (box1 && box2) {
   entries = entry.findAllByTitleLikeOrAuthorLike("ABC", "ABC")
}
else if (box1) {
   entries = entry.findAllByTitleLike("ABC")
}
else if (box2) {
   entries = entry.findAllByAuthorLike("ABC")
}
else {
   entries = []
} 
```

# php - 只向数据库添加 1 行然后跳过其余的

> ID：13711102
> 
> 赞同：0
> 
> 时间：2012-12-04T20:13:32.107
> 
> 标签：php, mysql, pdo

我正在尝试将二维数组放入数据库。我的代码如下（这是PHP）：

```
public function addspot($linearray,$data){
    $dbname=$data['dbname'];
    try {
        /* Create a connections with the supplied values */
        $pdo = new PDO("mysql:host=" . Config::read('hostname') . ";dbname=" . Config::read('database'). "", Config::read('username'), Config::read('password'), array(PDO::ATTR_PERSISTENT => true));
    } catch(PDOException $e) {
        /* If any errors echo the out and kill the script */
        return 'Database conncetion fail in assets/garage.class.php!Make sure your database information is correct';
    }

    foreach ($linearray as $lines) {
        $spot="INSERT INTO `$dbname`(`floor`, `spot`, `status`, `uid`, `type`, `time`) VALUES ('$lines[0]', '$lines[1]', '$lines[2]', '$lines[3]', '$lines[4]', CURRENT_TIMESTAMP);";
        $statement = $pdo->prepare($spot);
        if($statement->execute()){
            //silent
        } else {
            return 'Spot not added!';
        }
    }
} 
```

配置值被正确读取，并且添加点的语句是正确的。我知道这一点是因为当我运行该函数时，它会正确添加 1 个“点”，但不会添加 2D 数组中的其余行。

我的数组如下：

```
array (size=16)
0 => 
array (size=5)
  0 => string '1' (length=1)
  1 => string '1' (length=1)
  2 => string '1' (length=1)
  3 => string '0' (length=1)
  4 => string '1' (length=1)
1 => 
array (size=5)
  0 => string '1' (length=1)
  1 => string '2' (length=1)
  2 => string '1' (length=1)
  3 => string '0' (length=1)
  4 => string '1' (length=1)
 (and onwards) 
```

我的问题是我编写的函数只将第一行（line[0]）写入数据库，而其他的没有写入。

**更新** 语句的输出（使用 print_r）：放置在准备之后

```
PDOStatement Object
(
[queryString] => INSERT INTO `Garage2`(`floor`, `spot`, `status`, `uid`, `type`, `time`) VALUES ('1', '1', '1', '0', '1', CURRENT_TIMESTAMP);
)
PDOStatement Object
(
[queryString] => INSERT INTO `Garage2`(`floor`, `spot`, `status`, `uid`, `type`, `time`) VALUES ('1', '2', '1', '0', '1', CURRENT_TIMESTAMP);
) 
```

print_r($pdo->errorInfo()); 输出放在执行语句的else(fail)部分

```
Array
(
[0] => 00000
[1] => 
[2] => 
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:56:13.600

终于明白了。对于将来遇到此问题的人，请务必检查您的数据库中是否有主键，您没有两次使用相同的值。我的第一个单元格是我的主 ID，因此当第一个和第二个语句的值都为 1 时，它失败了。

为了找到这个，我在 prepare()\ 之后添加了这个

```
$pdo->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:20:57.190

对于数字主 ID，最好使用自动增量。主 ID 必须是唯一的。但是，您可以使用不需要唯一的索引或组合索引。

要回答有关排序结果的问题，请尝试以下查询：

```
-- Ordering by floor and spot
SELECT * FROM myTable ORDER BY floor, spot;

-- Ordering by floor only
SELECT * FROM myTable ORDER BY floor; 
```

这是一个

**[SQLFiddle](http://sqlfiddle.com/#!2/45bc3)**

* * *

注意：以 -- （双破折号）开头的行是注释。你可以删除它们

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:58:18.233

这应该使用准备好的语句来解决问题，看看它是否有效并给我留言然后我会更好地格式化答案

```
$spot="INSERT INTO `$dbname`(`floor`, `spot`, `status`, `uid`, `type`, `time`) VALUES (?, ?, ?, ?, ?, CURRENT_TIMESTAMP)";
$statement = $pdo->prepare($spot);
foreach ($linearray as $lines) {
    $values = array($lines[0],$lines[1],$lines[2],$lines[3],$lines[4])
    if($statement->execute($values)){
        //silent
    }
    else {
        return 'Spot not added!';
    } 
```

# ios - 如何通过无线方式更新 ios6 企业应用程序

> ID：13711103
> 
> 赞同：14
> 
> 时间：2012-12-04T20:13:37.897
> 
> 标签：ios, installation, wireless, enterprise, updates

您好，我们最近开发了我们的第一个企业应用程序。我们正在使用“内部”选项来创建分发证书。客户尚未使用该应用程序。但他很快就会使用它。同时我有一个问题。他将使用该应用程序，并且将来如果我们这边对应用程序有任何更新，我们希望客户也可以在他这边进行更新。就像现在我的 iPhone 上安装了应用程序。我从 AppStore 收到更新，说 XYZ 应用程序已更新。所以我安装更新。现在，如果我们的客户正在使用该应用程序并在其上保存了一些数据（我们的应用程序使用核心数据，并且我们以客户端可以在设备上存储一些数据的方式构建它）我们想向他发送将安装的更新更新，但不会删除任何现有的客户端数据。那可能吗？我该怎么做？我现在正在使用无线安装来安装应用程序。我们有一个安全的服务器，其中存在 .ipa 和 .plist 文件，并且我们有一个下载 html 页面。客户单击链接并安装应用程序。如果您需要更多信息，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-04T20:20:32.367

是的，有可能。当您部署企业应用程序时，它需要一个包含有关应用程序元数据的 plist。此元数据包括可用于检查更新的版本号。

```
BOOL updateAvailable = NO;
NSDictionary *updateDictionary = [NSDictionary dictionaryWithContentsOfURL:
                                  [NSURL URLWithString:@"http://www.example.com/pathToPlist"]];

if(updateDictionary)
{
    NSArray *items = [updateDictionary objectForKey:@"items"];
    NSDictionary *itemDict = [items lastObject];

    NSDictionary *metaData = [itemDict objectForKey:@"metadata"];
    NSString *newversion = [metaData valueForKey:@"bundle-version"];
    NSString *currentversion = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleVersion"];

    updateAvailable = [newversion compare:currentversion options:NSNumericSearch] == NSOrderedDescending;
} 
```

检测到更新可用后，将用户导航到下载 URL

> `itms-services://?action=download-manifest&url=<url-path-to-plist>`

如果您设置自动迁移并进行更改，它将安装在现有版本上，使所有数据保持不变，甚至升级 CoreData 数据库。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-01T23:37:14.730

感谢乔的精彩回应。这是翻译成 swift 的扩展版本。你可以把它放在`viewDidLoad`你的主视图控制器里面

```
let plistUrl = "https://example.com/example.plist"
let installationUrl = "itms-services://?action=download-manifest&amp;url=https://example.com/example.plist"

override func viewDidLoad() {
    super.viewDidLoad()

    //Check for the updates        
    checkForUpdates()
}

func checkForUpdates() {
    let qualityOfServiceClass = QOS_CLASS_BACKGROUND
    let backgroundQueue = dispatch_get_global_queue(qualityOfServiceClass, 0)
    dispatch_async(backgroundQueue, {
        let updateDictionary = NSDictionary(contentsOfURL: NSURL(string: self.plistUrl)!)!

        let items = updateDictionary["items"]
        let itemDict = items?.lastObject as! NSDictionary
        let metaData = itemDict["metadata"] as! NSDictionary
        let serverVersion = metaData["bundle-version"] as! String
        let localVersion = NSBundle.mainBundle().infoDictionary!["CFBundleVersion"] as! String
        let updateAvailable = serverVersion.compare(localVersion, options: .NumericSearch) == .OrderedDescending;

        if updateAvailable {
            self.showUpdateDialog(serverVersion)
        }
    })
}

func showUpdateDialog(serverVersion: String) {
    dispatch_async(dispatch_get_main_queue(), { () -> Void in
        let alertController = UIAlertController(title: "New version of Example available!", message:
            "Example \(serverVersion) has been released. Would you like to download it now?", preferredStyle: UIAlertControllerStyle.Alert)
        alertController.addAction(UIAlertAction(title: "Not now", style: .Cancel,handler: nil))
        alertController.addAction(UIAlertAction(title: "Update", style: .Default, handler: { (UIAlertAction) in
            UIApplication.sharedApplication().openURL(NSURL(string: self.installationUrl)!)
        }))

        self.presentViewController(alertController, animated: true, completion: nil)
    })
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T20:17:58.967

只需以与分发原始版本相同的方式分发更新。用户保留早期版本的数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-28T07:57:55.913

swift 4 中@Vlad 的更新答案

```
 var plistUrl = "https://xxxxxxxxxxxxxxfgfgf/ex.plist"

var installationUrl = URL(string : "itms-services://?action=download-manifest&url=https://xxxxxxxxxxxxxxfgfgf/ex.plist")

   func checkForUpdates() {
       let qos = DispatchQoS(qosClass: .background, relativePriority: 0)
       let backgroundQueue = DispatchQueue.global(qos: qos.qosClass)
    backgroundQueue.async(execute: {
        let updateDictionary = NSDictionary(contentsOf: NSURL(string: self.plistUrl)! as URL)!

           let items = updateDictionary["items"]
        let itemDict = (items as AnyObject).lastObject as! NSDictionary
           let metaData = itemDict["metadata"] as! NSDictionary
           let serverVersion = metaData["bundle-version"] as! String

        print ("serverVersion=",serverVersion)
        let localVersion = Bundle.main.infoDictionary!["CFBundleVersion"] as! String
        print ("localVersion=",localVersion)

           let updateAvailable = serverVersion.compare(localVersion, options: .numeric) == .orderedDescending
        print("version is newer")

           if updateAvailable {
            self.showUpdateDialog(serverVersion: serverVersion)
           }
       })
   }

   func showUpdateDialog(serverVersion: String) {
       DispatchQueue.main.async { () -> Void in
           let alertController = UIAlertController(title: "New version of  App  available!", message:
            "MCD \(serverVersion) has been released. Would you like to download it now?", preferredStyle: UIAlertController.Style.alert)
        alertController.addAction(UIAlertAction(title: "Not now", style: .cancel,handler: nil))
        alertController.addAction(UIAlertAction(title: "Update", style: .default, handler: { (UIAlertAction) in
            UIApplication.shared.open(self.installationUrl!, options: [:], completionHandler: nil)
           }))

        self.present(alertController, animated: true, completion: nil)
    }} 
```

但这只是一次，每次都需要更多修改

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-22T17:56:39.273

对于应用程序更新，如果应用程序的捆绑包 ID 保持不变，则现有应用程序数据将保持不变。

Apple 在此处解释企业应用程序部署和应用程序更新：http: [//help.apple.com/iosdeployment-apps/mac/1.1/#app43ad802c](http://help.apple.com/iosdeployment-apps/mac/1.1/#app43ad802c)

我还建议在应用程序中包含一个更新检查器。

要做到这一点，iVersion 是 Nick Lockwood（又名 Charcoal Design）的一个 ios 库，它将帮助您做到这一点。它在这里可用： [https ://github.com/nicklockwood/iVersion](https://github.com/nicklockwood/iVersion)

# openerp - 使用 OpenERP 的 Web 浏览器中出现严重的内存泄漏

> ID：13711105
> 
> 赞同：2
> 
> 时间：2012-12-04T20:13:54.477
> 
> 标签：openerp

我的问题是：在使用 MS Internet Explorer 时，还有其他人在使用 OpenERP 时出现严重的内存泄漏吗？如果是这样，您对此做了什么？

背景：

每次加载页面时，我都可以看到内存增长约 5--10 MB。在几个小时内，IE 就达到了 ~1 GB。每隔一两个小时就要求重新启动一次浏览器已经够糟糕的了。看起来浏览器只是在每次加载页面时创建新字段、小部件等，并且永远不会摆脱它们或重新使用它们。

当我在我的个人计算机、本地服务器上运行服务器或使用[http://demo.openerp.com/web/webclient/home](http://demo.openerp.com/web/webclient/home)中的 OpenERP 演示时，情况也是如此。

此外，其他浏览器（FF 和 Chrome）的内存使用也很糟糕，但 IE 是最差的。无论我以管理员身份还是普通用户身份登录都会发生这种情况。注销会清除一些内存，但不会太多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:31:47.263

我花了一些时间对此进行了测试，但我无法重复您正在经历的事情。我使用 Windows XP 并尝试了 Firefox 17、Chrome 19 和 IE8。

Firefox 和 Chrome 在压力下都上升了约 250 Mb，但在闲置时最终恢复到 130 - 150 Mb。IE8 也是，但内存占用更高（从不低于 ~190 Mb）。

我个人对 IE8 和 OpenERP Web 客户端的体验并不是最好的：我发现它更慢、更丑（按钮上没有圆角）并且有些东西不起作用（例如搜索的高级过滤器）。

我认为您的首选可能是尝试使用更高版本的 IE：IE9 甚至 IE10。

另一种选择可能是将 OpenERP 用作[Chrome 应用程序](http://support.google.com/chrome/bin/answer.py?hl=en&answer=95710)：您的用户将通过单击桌面快捷方式打开 OpenERP Web 客户端，它会在一个看起来不像浏览器但实际上运行 Chrome 的专用窗口中打开。

# android - 带有 Thumb 的 Android SeekBar

> ID：13711106
> 
> 赞同：1
> 
> 时间：2012-12-04T20:13:57.413
> 
> 标签：android, seekbar

我正在尝试按照艺术团队的设计来实现一个 Seek Bar。他们想要一个不垂直居中的拇指，而是在进度条下方（我会发布一张图片，但我还没有足够的声誉来做这件事）。我一直在玩`thumbOffset`控制水平偏移的属性，但我找不到任何指示垂直偏移或填充的东西。结果，我只能获得一个拇指垂直居中的搜索栏。

我也尝试过扩展 SeekBar，但计算拇指位置的方法是私有的。除了从头开始实施全新的搜索栏组件之外，还有其他解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:24:35.060

这是一个想法（我没有尝试过），在您希望用户移动的位置下方创建一个搜索栏，并使用`VIEW.INVISIBLE`. 然后，在不可见搜索栏的`onSeekBarChangedListener`中，将第一个可见搜索栏设置为第二个搜索栏打开的值。最后给第一个`setFocuseable(false)`搜索栏，这样用户就不会从错误的地方移动搜索栏。如果这没有意义或不起作用，请告诉我，我将修改/删除它。

# php - 在输入字段中输入数据时生成搜索建议

> ID：13711113
> 
> 赞同：0
> 
> 时间：2012-12-04T20:14:20.920
> 
> 标签：php, javascript, mysql, ajax

我正在尝试使用数据库中的数据生成建议而不刷新页面，因为用户在下面的输入字段中键入了一些数据。AJAX 对我来说很新，我一直在试图找出我哪里出错了很长一段时间了。似乎下面的代码根本没有返回任何结果。我很感激任何帮助。

我的标记：

```
<head>
<title>Test</title>

<script type="text/javascript">
    function search(searchword) {
      $('#suggestion').load('invoice-get-data.php?searchword=' + searchword);
    }
</script>
</head>
<body>

<div class="prod-name">
    <!-- As user input data, call search function, and narrow down results on every keystore -->
    <input onKeyPress="search(this.value)" type="text" id="prod-name"/>
    <div id="suggestion"></div>
</div>

</body> 
```

到目前为止的 AJAX：

```
<?php   
    $conn = mysql_connect('localhost', 'root', 'mypassword');

    if(!$conn){
        die('Error: Unable to connect.' . '<br>' . mysql_error());
    }

    mysql_select_db("mydb", $conn);

    $searchword = $_GET['searchword'];

    $results = mysql_query("SELECT * FROM products WHERE prod-name LIKE '$searchword'") or die(mysql_error());

    while($row = mysql_fetch_array($results)){
        echo $row['prod-name'] . '<br/>';
    }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:19:56.827

对于初学者，“onchange”事件在文本框失去焦点（意味着光标离开文本框）之前不会触发。您可能正在寻找像 onkeyup 或 onkeypress 这样的键盘事件。

# jquery - .append() 之后的 JQuery Lazyload 图像

> ID：13711115
> 
> 赞同：2
> 
> 时间：2012-12-04T20:14:26.790
> 
> 标签：jquery, lazy-loading

我正在使用 .append() 将图像加载到 div

如何在这些新添加的图像上使用惰性加载器插件？有没有办法做到这一点？

**更新：** 这是代码

```
//This is a live search script, type something in #livesearch input and it populates a #results ul list with the results
$('#livesearch').live('keyup', function(event) {
    //after ke press detected immediately clear the results div of any previous content
    $('#results').html("");
    // Use the inputed letters to send off an ajax request
    $.getJSON("http://xxxxxx.com/live/" + $(this).val(), function(resp){
            //the ajax returns a json object, next loop through the object and print out the results in a list using append
            $.each(resp.response.docs, function(index, item) {  
            $('#results').append("<li><div style='background-color:rgb(31,31,31);padding:15px;color:rgb(255,255,255);'><span class='inline' style='width:125px;height:50px;margin-right:15px'><img data-original='img/"+item.nameid+".png' src='img/grey.gif' class='lazy' style='display:inline' height='50px'></span><span class='inline' style='width:300px;'><div style='font-size:14px;'>"+item.name+"</div><div style='font-size:12px;color:rgb(99,99,99)'>Strategy | 4 months ago | Played 2,000 times</div></span></div></li>");
        });
    });

    // The list that was created includes images and could have several hundred of them, therefore I would like to lazy load them as you scroll down
    // This line of code is just one of my failed attempts
    $("img.lazy").lazyload();
}); 
```

因为图像是在文档加载后添加的，所以我认为惰性加载器插件很难“看到”原始 HTML 中的图像，因为它们不存在。也许 LazyLoad 不能做我想做的事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-20T20:51:32.430

jQuery 现在定义了一个`when()`函数，用于在 jQuery Ajax 请求完成后做某事

```
// the following code will be executed when the ajax request resolve.
// the ajax function must return the value from calling the $.ajax() method.

$.when(ajax1()).done(function(a1){

        if($('img.lazy').length){

             $('img.lazy').lazyload({ 

                      effect:'fadeIn', 
                      threshold:500, 
                      failure_limit:2 

             }).removeClass('lazy').addClass('lazyloaded');

        }

    });

    function ajax1() {

        return $.ajax({
            url: "someUrl",
            dataType: "json",
            data:  yourJsonData,            
            ...
        });
    } 
```

来自：[http ://api.jquery.com/jQuery.when/](http://api.jquery.com/jQuery.when/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T23:47:34.893

从您的 getJSON 回调中调用lazyload()

```
$.getJSON("http://xxxxxx.com/live/" + $(this).val(), function(resp){
    $.each(resp.response.docs, function(index, item) {  
        $('#results').append("<li>... \
            <img data-original='img/"+item.nameid+".png' \
            src='img/grey.gif' class='lazy' /> \
            ...</li>");
        });
    });
    $("img.lazy").lazyload().removeClass("lazy");
}); 
```

添加`.removeClass("lazy")`可以防止延迟加载多次绑定到同一个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-11T12:42:18.410

我使用这两种选择

**1）**修改lazyload.js

搜索此行

```
$(window).load(function() {
     update();
}); 
```

并用这个替换

```
$(function () {
     update();
}); 
```

这适用于第一次加载页面或通过 ajax 调用

为新元素添加延迟加载：

```
$( newElements ).find("img.lazy").lazyload(); 
```

如果尚未加载新图像，则必须防止图像在布局中呈现（因为它们没有尺寸）延迟加载可能会全部加载它们（因为它们都在视口中）所以使用这个：

```
setTimeout(function(){
 $( newElements ).find("img.lazy").lazyload();
} ,500); 
```

**2）**或者您可以使用它来强制显示图像

```
$("img.lazy").lazyload().trigger("appear"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-27T08:01:49.610

我知道如何解决这个问题。您应该`$("img.lazy").lazyload();`在完成每个动态附加之后放置。

在您的情况下，您必须将其放入`function(index, item)`（`append`行后）。

# ruby-on-rails - 可以访问模型中的嵌套表属性吗？

> ID：13711116
> 
> 赞同：0
> 
> 时间：2012-12-04T20:14:34.243
> 
> 标签：ruby-on-rails, nested-attributes

我的数据库模式包括一个模型（任务），它具有 14 种不同类型的危险之一。例如这里是一个伪关系结构。

```
Task -> has_one Biohazard
     -> has_one Fallhazard 
```

在任务模型中，我目前正在尝试实施验证以确定每个危险的表格何时完成。我想在我的任务模型中使用的条件如下。

```
 if self.Biohazard.total < 1000
       self.date_completed = Date.today
    end 
```

我目前收到此 Biohazard.total 的错误“未定义方法”。有没有办法使该属性在 Task 模型中可访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T22:51:24.240

只要在**Biohazard**模型中，您就拥有：

```
attr_accessible :total 
```

在 Task 模型中，您只需要：

```
self.biohazard.total 
```

得到总数。

# javascript - 如何在 JavaScript 中将一个数组嵌套在另一个数组中？

> ID：13711119
> 
> 赞同：0
> 
> 时间：2012-12-04T20:14:39.303
> 
> 标签：javascript, jquery, arrays

我需要将我在 JSON 中创建的数组嵌套在另一个数组中，以便为[jQuery Datatables 库提供正确的格式。](http://datatables.net/forums/discussion/160/json.aadata-is-undefined/p1)

这是我当前的代码：

```
$.ajax({
    url: uMtbls,
    dataType: 'json',
    success: function(jMtbl) {
        $.each(jMtbl, function(i, item) {
            mAll = jMtbl[i];
            mOwn = jMtbl[i].OrigOwner;
            mPub = jMtbl[i].PublicationTblNm;
            mTbl = jMtbl[i].TableId;
            mMig = jMtbl[i].MigrationFreq;
            mGTYPE = jMtbl[i].GTYPE;
            exec();

        });

        oTable = $('#dtManaged').dataTable({
            "bStateSave": true,
            "bProcessing": true,
            "bServerSide": true,
            "aaData": jReform,
            "aoColumns": [{
                "sName": mOwn,
                "sTitle": "Original Owner",
                "sWidth": "10%"
            }, {
                "sName": mPub,
                "sTitle": "Table Name"
            }, {
                "sName": mTbl,
                "sTitle": "ID"
            }, {
                "sName": mMig,
                "sTitle": "Migration Frequency"
            }, {
                "sName": mGTYPE,
                "sTitle": "Oracle Gtype"
            }],
            "sPaginationType": "full_numbers",
            "iDisplayLength": 25,
            "aLengthMenu": [
                [25, 50, 100, -1],
                [25, 50, 100, "All"]
            ]
        });
    }
});

function exec() {
    jBld = mOwn + "," + mPub + "," + mTbl + "," + mMig + "," + mGTYPE;
    //console.debug("[" + mOwn + "," + mTbl + "]");
    jReform = jBld.split(",");
    console.debug(jReform);
}​ 
```

输出如下所示（在 console.debug 中捕获）：

```
["text","text","text","text","text"]
["text","text","text","text","text"] 
```

样本应该是：

```
{ "aaData": [
  [ 10126, 10002253, 415 ]
]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:44:57.800

使用[`Array.push`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push). 并利用该[`var`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var)语句，您正在创建一个全局变量的地狱。

```
var aaData = [];
$.each(jMtbl, function (i, item) {
  aaData.push([
    item.OrigOwner,
    item.PublicationTblNm,
    item.TableId,
    item.MigrationFreq,
    item.GTYPE
  ]);
}); 
```

```
oTable = $('#dtManaged').dataTable({
  ...
  "aaData": aaData,
  ...
}); 
```

（注意：链接不只是展示，请仔细阅读。）

# ruby-on-rails - 链接 Webrick 代理

> ID：13711120
> 
> 赞同：2
> 
> 时间：2012-12-04T20:14:47.790
> 
> 标签：ruby-on-rails, ruby, proxy

我一直在尝试测试 Webrick 代理的链接，但遇到了一些麻烦。

每个代理都可以从 127.0.0.1:port 自行正常工作（当 :ProxyURI 为 proxy_2 注释掉时），但我收到错误消息：

```
ERROR unsupported method `GET'. 
```

当我尝试链接它们时，来自 proxy_2 输出（httpproxy.rb）。

澄清一下，当我链接它们时，我使用 127.0.0.1:8086 作为来自另一个应用程序的访问点。

查看 proxy_1 的日志，它似乎没有收到任何请求。

任何帮助将非常感激。

```
require 'webrick'
require 'webrick/httpproxy'

port_1 = 8085
port_2 = 8086

proxy_1 = 
  WEBrick::HTTPProxyServer.new(
    :Port          => port_1,
    :ServerType    => Thread,
    :Logger        => WEBrick::Log.new("./logs/#{port_1}.out"),
    :ServerName => "future_authentication_proxy"
  )
proxy_1.start

proxy_2 = 
  WEBrick::HTTPProxyServer.new(
    :Port          => port_2,
    :ProxyURI => '127.0.0.1:'+port_1.to_s
  )
trap("INT"){
  proxy_1.shutdown
  proxy_2.shutdown
}
proxy_2.start 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:51:51.247

你传递了错误的 ProxyURI 选项，它应该是这样的：

```
:ProxyURI => URI.parse("http://#{host_1_ip}:#{port_1}/") 
```

# macos - Mac OSX 和 QT 上的共享库

> ID：13711123
> 
> 赞同：1
> 
> 时间：2012-12-04T20:14:55.087
> 
> 标签：macos, qt, shared

有谁知道如何摆脱这个问题？我正在使用 Mac 为 Maemo 5 进行开发。

```
正在杀死远程进程...
正在启动远程进程...
远程进程已启动。
/opt/Blue/bin/Blue：加载共享库时出错：libQtConnectivity.so.1：无法打开共享对象文件：没有这样的文件或目录
完成运行远程进程。退出代码是 127。
```

我已按照此处的说明进行操作：http: [//www.developer.nokia.com/Community/Wiki/Latest_Qt_and_Qt_mobility_evaluation_on_Maemo](http://www.developer.nokia.com/Community/Wiki/Latest_Qt_and_Qt_mobility_evaluation_on_Maemo)

我想我只需要确保我的 mac 链接到该文件，该怎么做？

构建软件包很好，但是当我尝试在我的 N900 手机上部署它时出现错误。错误出现在 QTCreator 输出中。

# yii - Yii 全局变量和设置问题

> ID：13711125
> 
> 赞同：0
> 
> 时间：2012-12-04T20:15:00.290
> 
> 标签：yii

我正在使用 Yii 开发一个社交网站。虽然经常使用以下内容，但我遇到了很大的数据可管理性问题。- 用户 ID - 当前用户 ID（其个人资料是所有者查看的用户） - 是所有者？？？

我在哪里可以定义这些东西。我会喜欢

```
if(Yii::app()->owner==ME){
//do something
}
// and similarly
if($this->isMyFreind(<Current user ID>){
}
// $this(CanIView()){

} 
```

我希望这些功能对任何页面都是公开的吗？但是怎么做？换句话说 **，我可以将包含我自己喜欢的功能（如文本缩短、图像裁剪、日期时间格式等）的库放在哪里？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:02:49.827

在 Yii 中，您可以通过创建一个继承的类（在受保护/组件下）来实现这一点

> C应用组件

班级。然后你将这个类的任何属性全局调用为一个组件。

```
class GlobalDef extends CApplicationComponent {
 public $aglobalvar;
} 
```

在组件下的主配置中定义此类：

```
'globaldef' => array('class' => 'application.components.GlobalDef '), 
```

你可以这样调用：

```
echo Yii::app()->globaldef->aglobalvar; 
```

希望能有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:21:19.763

根据 MVC 模型，诸如图像裁剪或日期时间格式之类的内容将包含在模型中。您只需为此创建模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T22:53:01.490

我通常在 index.php 中使用包含所有常用功能的 globals.php 文件（是根目录中的那个）：

```
$globals='protected/globals.php';
require_once($globals); 
```

然后我可以在任何地方调用我的全局函数。例如，我缩短了某些 Yii 函数，例如：

```
function bu($url=null){
    static $baseUrl;
    if ($baseUrl===null)
        $baseUrl=Yii::app()->request->baseUrl;
    return $url===null ? $baseUrl : $baseUrl.'/'.ltrim($url,'/');
} 
```

所以我可以`Yii::app()->request->baseUrl`通过简单地调用`bu()`

# javascript - 如何扩展现有的 jQuery UI 小部件？

> ID：13711127
> 
> 赞同：14
> 
> 时间：2012-12-04T20:15:05.447
> 
> 标签：javascript, jquery, jquery-ui, plugins, extending

我正在使用 jQuery v1.8.3 和 jQuery UI v1.9.2。我想*扩展现有的 jQuery UI 小部件*（在我的例子中是[Autocomplete](http://jqueryui.com/autocomplete)小部件），方法是添加和覆盖一些选项和方法，但保持其他功能与官方版本中的功能相同。我怎样才能使它成为“正确”（也许是“标准”）的方式？

* * *

*PS*：我在网上搜索（[1、2](https://github.com/scottgonzalez/widget-factory-docs)、 ... [）](http://wiki.jqueryui.com/w/page/12138135/Widget%20factory)，发现文档大多与*创建新的*jQuery UI 小部件相关，但与扩展现有小部件无关。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-07T12:51:38.967

在 jQuery UI 1.9+ 中，扩展小部件的方式与创建新小部件的方式相同。小部件工厂 ( `$.widget()`) 支持一些场景：

使用基本小部件 ( `$.Widget`) 作为起点创建新小部件：

`$.widget( "ns.widget", { ... } )`

创建从现有小部件继承的新小部件：

`$.widget( "ns.widget", $.ns.existingWidget, { ... } )`

扩展小部件：

`$.widget( "ns.widget", $.ns.widget, { ... } )`

您会注意到扩展语法和继承语法是相同的。小部件工厂足够聪明，可以注意到您正在创建的小部件和您从其继承的小部件是相同的并适当地处理它。

当继承或扩展一个小部件时，您只需要定义您想要更改或添加的内容。基础小部件上还存在一些新方法，可以更轻松地使用继承和更改上下文的方法。阅读[jQuery.Widget 文档](http://api.jqueryui.com/jQuery.widget/#jQuery-Widget2)以获取完整的方法列表及其描述。如果您正在扩展小部件，您肯定会想了解[_super() 。](http://api.jqueryui.com/jQuery.widget/#method-_super)

这是一个将默认`delay`选项更改为`500`并添加一个新选项的示例，该选项`prefix`将添加到所有建议中：

```
$.widget( "ui.autocomplete", $.ui.autocomplete, {
    options: {
        delay: 500,
        prefix: ""
    },

    _renderItem: function( ul, item ) {
        var label = item.label;
        if ( this.options.prefix ) {
            label = this.options.prefix + " " + label;
        }
        return $( "<li>" )
            .append( $( "<a>" ).text( label ) )
            .appendTo( ul );
    },
}); 
```

# asp-classic - 在小型 adbodb 记录集上过滤需要 2 秒

> ID：13711146
> 
> 赞同：0
> 
> 时间：2012-12-04T20:16:16.677
> 
> 标签：asp-classic, vbscript, adodb

我有一个要过滤的小型 adodb 记录集。这是我们测试客户的 6 条记录。由于某种原因，过滤器需要 2 秒才能完成，而我在我的 asp 页面上这样做了大约 30 次。因此，使我的页面加载速度非常慢。此页面上的其他记录集筛选器运行得很快。

我尝试设置不同的 CursorLocations 和 CursorTypes ..

谁能帮我确定为什么这个过滤器这么慢？

```
rsAvgPrice.Filter = "CommodityID = 13 AND CropYear = '12'" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:37:09.313

可能会再次执行整个查询，然后才应用过滤器。

我将对所有项目进行一个循环，将所需数据存储在局部变量中，然后拥有自己的过滤器。最好的效率，更好的控制。

例如，如果您希望通过这两个字段过滤数据，我会像这样使用 Dictionary：

```
Dim oCommodity_CropYear_Data, curKey
Dim curCommodityID, curCropYear, curData
Set oCommodity_CropYear_Data = Server.CreateObject("Scripting.Dictionary")
Do Until rsAvgPrice.EOF
    curCommodityID = rsAvgPrice("CommodityID")
    curCropYear = rsAvgPrice("CropYear")
    curKey = curCommodityID & "_" & curCropYear
    curData = "field1: " &  rsAvgPrice("somefield") & ", field 2: " & rsAvgPrice("other_field") & "<br />"
    oCommodity_CropYear_Data(curKey) = oCommodity_CropYear_Data(curKey) & curData
    rsAvgPrice.MoveNext
Loop
rsAvgPrice.Close 
```

然后循环提取数据：

```
For x=1 To 30
    For y=1 To 12
        curKey = x & "_" y
        If oCommodity_CropYear_Data.Exists(curKey) Then
            Response.Write("Data for Commodity " & x & " and CropYear " & y & ":<br />" & oCommodity_CropYear_Data(curKey)
        End If
    Next
Next 
```

这是大体思路，希望您可以根据实际需要使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:32:08.363

我已经解决了这个问题。

问题是当我通过以下方式声明记录集时，游标类型设置为 adOpenForwardOnly，游标位置设置为 adUseServer。如果使用 command.Execute 填充记录集，则无法更改这些设置。

`Set cmd = Server.CreateObject("ADODB.Command")`

`cmd.CommandType = adCmdText`

`cmd.CommandText = mySQL`

`cmd.CommandTimeout = 3000`

`cmd.ActiveConnection = cn`

`Set rs = Server.CreateObject("ADODB.Recordset")`

`Set rs = cmd.Execute`

`Set cmd = Nothing`

我解决这个问题的方法是手动声明一个带有其字段的永久记录集。然后我使用 command.execute 填充了一个临时记录集。然后，我用临时记录集逐条记录手动填充我声明的记录集。这允许我将光标位置设置为 adUseClient。从而突飞猛进地加速过滤器。

# wpf - 如何摆脱xaml中的元素焦点边框

> ID：13711152
> 
> 赞同：6
> 
> 时间：2012-12-04T20:17:13.903
> 
> 标签：wpf, xaml, focus, focusvisualstyle

在 WPF 中，我创建了一个自定义按钮模板，如下所示：

```
<ToggleButton x:Name="button" HorizontalAlignment="Left" Margin="0,0,0,0" >
        <ToggleButton.Template>
            <ControlTemplate TargetType="{x:Type ToggleButton}">
                <Grid Background="#01FFFFFF" Width="62" Height="53">
                    <Border VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Background="#01FFFFFF" IsHitTestVisible="True"/>
                    <Canvas Width="26" Height="32" x:Name="background" IsHitTestVisible="True" >
                       <!-- Omitted for brevity--->
                    </Canvas>
                </Grid>
            </ControlTemplate>
        </ToggleButton.Template>
    </ToggleButton> 
```

此代码的结果是一个简单的`Off`按钮：
![按钮，未聚焦](../Images/8308c4f0c224d336043e110815b0cd19.png)

现在，当此按钮成为鼠标焦点，然后屏幕失去焦点时，按钮周围会出现一个虚线边框，如下所示：
![按钮，带虚线边框](../Images/acd73fe621bbb4cb2fc18879213bff45.png)

我的问题很简单：我如何摆脱这个边界？我尝试使用这些`FocusVisualStyle`属性，但无法使其正常工作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T20:26:53.507

你可以删除`FocusVisualStyle`你的风格，这应该删除虚线边框

```
 <ToggleButton FocusVisualStyle="{x:Null}" x:Name="button" HorizontalAlignment="Left" Margin="0,0,0,0"  > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:29:09.563

只需添加`Focusable="False"`到您的`Canvas`.

# visual-studio-2010 - 如何使用构建后事件在 TFS 中签出-复制-签入文件？

> ID：13711153
> 
> 赞同：4
> 
> 时间：2012-12-04T20:17:14.807
> 
> 标签：visual-studio-2010, tfs, post-build-event

我有一个持有服务器控件的项目。每当我对其进行更改时，我都希望能够在发布模式下构建并将输出 DLL（及其文档 Xml 文件）复制到 Team Foundation Server 中的文件夹中。

我提出了一个构建后事件：

1.  检查 DLL 和 XML。
2.  将它们复制到 TFS 文件夹
3.  用一些评论重新检查它们。

这是脚本：

```
if $(ConfigurationName) == Release "$(DevEnvDir)tf" checkout /lock:none C:\CommonAssemblies\$(TargetFileName)
if $(ConfigurationName) == Release "$(DevEnvDir)tf" checkout /lock:none C:\CommonAssemblies\$(TargetName).xml
if $(ConfigurationName) == Release copy $(TargetDir)$(TargetFileName) C:\CommonAssemblies\ /Y
if $(ConfigurationName) == Release copy $(TargetDir)$(TargetName).xml C:\CommonAssemblies\ /Y
if $(ConfigurationName) == Release "$(DevEnvDir)tf" checkin C:\CommonAssemblies\$(TargetFileName) /noprompt /comment:"File checked in automatically by Post-build action in source project."
if $(ConfigurationName) == Release "$(DevEnvDir)tf" checkin C:\CommonAssemblies\$(TargetName).xml /noprompt /comment:"File checked in automatically by Post-build action in source project." 
```

这有效，但前提是代码中至少有一次更改，并且任何 XML 注释中至少有一次更改。如果我尝试构建两次而不进行任何更改，我会收到一条错误消息：

```
The command "if Release == Re...... " exited with code 1. 
```

**我怎样才能摆脱这个错误？**

从“输出”窗口中，我可以看到 TFS 检测到文件中没有任何更改，并撤消编辑。

当未检测到更改时，我可以在我的签入指令中添加什么以忽略此类签入？到目前为止，我一直在使用该脚本，但我必须记住每次都在代码中添加一个随机空格并添加一些注释以使其正常工作。一定有我遗漏的东西，也许是一个参数或其他。

以下是“输出”窗口中的部分文本：

```
C:\CommonAssemblies:
  Controls.dll
C:\CommonAssemblies:
  Controls.xml
          1 file(s) copied.
          1 file(s) copied.
  C:\CommonAssemblies:
  Checking in edit: Controls.dll

  Changeset #6188 checked in.
  C:\CommonAssemblies:
  Checking in edit: Controls.xml

  The following changes were not checked in because the items were not modified.
    Undoing edit: C:\CommonAssemblies\Controls.xml

  There are no remaining changes to check in. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T15:03:22.517

我遇到了[另一个类似的问题](https://stackoverflow.com/questions/8657988/tf-error-there-are-no-remaining-changes-to-check-in)，我找到了答案。

该`/force`参数是签入指令中缺少的参数。即使内部没有检测到更改，这也会检查文件。

此脚本不再抛出错误：

```
if $(ConfigurationName) == Release "$(DevEnvDir)tf" checkout /lock:none C:\CommonAssemblies\$(TargetFileName)
if $(ConfigurationName) == Release "$(DevEnvDir)tf" checkout /lock:none C:\CommonAssemblies\$(TargetName).xml
if $(ConfigurationName) == Release copy $(TargetDir)$(TargetFileName) C:\CommonAssemblies\ /Y
if $(ConfigurationName) == Release copy $(TargetDir)$(TargetName).xml C:\CommonAssemblies\ /Y
if $(ConfigurationName) == Release "$(DevEnvDir)tf" checkin C:\CommonAssemblies\$(TargetFileName) /noprompt /force /comment:"File checked in automatically by Post-build action in source project."
if $(ConfigurationName) == Release "$(DevEnvDir)tf" checkin C:\CommonAssemblies\$(TargetName).xml /noprompt /force /comment:"File checked in automatically by Post-build action in source project." 
```

# java - 如何在同一个包中扫描一个txt？

> ID：13711156
> 
> 赞同：0
> 
> 时间：2012-12-04T20:17:35.513
> 
> 标签：java, java.util.scanner, filenotfoundexception

我正在尝试在 txt 上使用 Java.util.scanner 来解析它。我在尝试扫描文件时遇到问题，因为找不到该文件。

我的课程在 txt 文件的同一个包中。那么你能告诉我如何扫描类同一个包中的文件吗？

```
public class PhoneBook {
  private ArrayList<PhoneBookEntry>[] buckets;
  public void load() {
    try {
      Scanner scan = new Scanner(new File("phone.txt"));
    } catch (FileNotFoundException e) {
      System.out.println("File Not Found"); 
    } 
  } 
  public static void main(String[]args) {
    PhoneBook phone = new PhoneBook(); 
    phone.load(); 
  } 
} 
```

这是错误的 StackTrace

`java.io.FileNotFoundException: phone.txt (The system cannot find the file specified) at java.io.FileInputStream.open(Native Method) at java.io.FileInputStream.<init>(Unknown Source) at java.util.Scanner.<init>(Unknown Source) at HashSet.PhoneBook.load(PhoneBook.java:13) at HashSet.PhoneBook.main(PhoneBook.java:23)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T20:24:46.823

将文件放在类路径的根目录中（编译后，您的文件应该出现在`.class`生成文件的根文件夹中）并使用以下代码语法：

```
 InputStream is = getClass().getClassLoader().getResourceAsStream("phone.txt");
    Scanner fileScanner = new Scanner(is); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:22:32.483

```
new File("phone.txt") 
```

在当前工作目录中查找文件。这是您启动 java 虚拟机的目录。

您说它与类位于同一个包中，这很可能是不同的目录（例如`src/com/mypackage`）。

尝试将文件移动到项目的根目录。然后，您应该能够加载它。

@Yogendra 的答案中显示了另一种方法，当文件与您的文件位于同一包二进制目录中时，该方法也应该有效`.class`。但我不确定您是否要将此类文件作为资源加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:28:28.157

如评论之一所述，您需要将文件放在生成 .jar 的位置。如果您从 Netbeans/Eclipse 运行，这将是您项目的根文件夹，如果您从已编译的 .jar 运行，它将是与 .jar 相同的目录。包只是用于组织和分离源文件的文件夹。

但是如果你想把文件放在同一个包中，你总是可以做类似的事情（假设你只有一个包）：

```
new File("./src/myPackage/myFile.txt") 
```

# android - 更改布局而不调用 onCreate

> ID：13711157
> 
> 赞同：3
> 
> 时间：2012-12-04T20:17:42.403
> 
> 标签：android, layout, android-configchanges

我有一个包含两个布局文件的活动，一个用于纵向和横向模式。我看到每次更改方向时都会调用 onCreate 方法。我尝试使用

```
android:configChanges = "orientation" 
```

在清单文件中，但它只读取纵向布局。有没有一种方法可以在不调用 onCreate 的情况下将布局设置为横向模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:58:46.967

如果你使用`android:configChanges = "orientation"`，你必须重写你的`onConfigurationChanged(...)`方法`Activity`。检查`newConfig`新方向的参数，然后手动设置所需的布局。

请参阅以下链接：

[onConfigurationChanged（配置新配置）](http://developer.android.com/reference/android/app/Activity.html#onConfigurationChanged%28android.content.res.Configuration%29)

[自己处理配置更改](http://developer.android.com/guide/topics/resources/runtime-changes.html#HandlingTheChange)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:19:33.727

您可以创建两个布局文件夹。一种用于纵向模式，一种用于横向模式。布局和布局土地。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:21:37.257

这是 android 的生活事实。您需要围绕这样一个事实来开发您的活动，因为它可能会由于屏幕方向更改等配置更改而随时被销毁。保存所有用于在暂停时构建屏幕的信息并在 onCreate 中重新创建它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T20:21:50.870

如果您希望您的活动仅处于横向模式，您可以在 AndroidManifest.xml 中为活动设置此属性：

```
 android:screenOrientation="landscape" 
```

您可以将 layout.xml 文件放在这样的文件夹中以适应不同的屏幕方向：

*   资源\布局土地
*   资源\布局端口

# mysql - MySQL查询选择当前月份错误

> ID：13711158
> 
> 赞同：0
> 
> 时间：2012-12-04T20:17:50.303
> 
> 标签：mysql, ms-access

我使用 ms 访问构建了以下查询。

```
SELECT GVA14.COD_VENDED, Count(GVA14.RAZON_SOCI) AS CountOfRAZON_SOCI
FROM GVA14
GROUP BY GVA14.COD_VENDED, Year([FECHA_ALTA]), Month([FECHA_ALTA])
HAVING (((Year([FECHA_ALTA]))=Year(curDate())) AND
        ((Month([FECHA_ALTA]))=Month(curDate()))); 
```

错误是

> [Err] 1064 - 您的 SQL 语法有错误；查看与您的 MySQL 服务器版本相对应的手册，了解在 '[FECHA_ALTA]), Month([FECHA_ALTA]) 附近使用的正确语法

我将“日期”更改为“curdate”以符合 MySQL，但它仍然出现错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:23:21.520

`[...]`是 sql-server/msaccess 字段命名表示法，在 MySQL 中无效。试试吧`Year(FECHA_ALTA)`。如果`[]`是字段名称的一部分，则必须反引号转义它们：

```
Year(`[FECHA_ALTA]`) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:09:58.327

修复了来自 Leandro Barreto 的这个查询

```
SELECT GVA14.COD_VENDED, GVA14.RAZON_SOCI, GVA14.FECHA_ALTA
FROM GVA14
WHERE Month(GVA14.FECHA_ALTA)=Month(curDate())
and Year(GVA14.FECHA_ALTA)=Year(curDate())
GROUP BY GVA14.COD_VENDED, GVA14.RAZON_SOCI, GVA14.FECHA_ALTA 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:22:19.197

此处的语法错误`Year(curDate()))`。请将此更改`Year(curDate())`为解决此问题。

询问 ：

```
 SELECT GVA14.COD_VENDED, Count(GVA14.RAZON_SOCI) AS CountOfRAZON_SOCI
FROM GVA14
GROUP BY GVA14.COD_VENDED, Year([FECHA_ALTA]), Month([FECHA_ALTA])
HAVING (((Year([FECHA_ALTA]))=Year(curDate()) AND ((Month([FECHA_ALTA]))=Month(curDate()))); 
```

# asp.net-mvc - 将 MVC4 部署到 Elastic Beanstalk 的“处理”错误消息

> ID：13711165
> 
> 赞同：6
> 
> 时间：2012-12-04T20:18:41.240
> 
> 标签：asp.net-mvc, amazon-web-services, visual-studio-2012, amazon-elastic-beanstalk

**脚步**

*   右键单击项目，“发布到 AWS”
*   使用模板部署新应用程序：“AWS Elastic Beanstalk”
*   名称：“mysite”，描述“mysite”，勾选“增量部署应用程序”，下一步
*   环境名称：“mysite”，描述“mysite”，默认 URL，Next
*   Container 64-bit Server 2012 w/IIS 8，实例类型 Small，Next
*   勾选“启用 32 位应用程序”，输入有效的通知电子邮件地址，部署

**结果**

输出窗口显示：

```
Commencing deployment for project 0x10c-cloud
...building deployment package obj\Debug\Package\Archive...
...deployment package created at E:\dev\path-to-my-stuff\project-here\obj\Debug\Package\Archive
...build of project archive completed succesfully
...starting deployment to AWS Elastic Beanstalk environment 'mysite'
...starting incremental deployment to environment 'mysite' 
```

5-10 分钟后收到错误弹窗：

```
Error deploying new application: Unhandled error during deployment: Deployment Failed: Deployment to AWS Elastic Beanstalk failed with exception: processing .

Deployment to AWS Elastic Beanstalk environment 'mytest' did not complete successfully 
```

日志文件`"C:\Users\Kieren\appdata\local\AWSToolkit\logs\vs2010\log.txt"`包含：

```
2012-12-04 20:04:21,957 [29] DEBUG Amazon.AWSToolkit.VisualStudio.VS2010Package - Output to AWS output window pane: ...deployment package created at E:\dev\0x10c\Dev\mytest\mytest\obj\Debug\Package\Archive
2012-12-04 20:04:21,957 [7] DEBUG Amazon.AWSToolkit.VisualStudio.VS2010Package - Output to AWS output window pane: ...build of project archive completed succesfully
2012-12-04 20:04:21,957 [7] INFO  Amazon.AWSToolkit.VisualStudio.VS2010Package - ...build of project archive completed succesfully
2012-12-04 20:04:21,970 [88] DEBUG Amazon.AWSToolkit.VisualStudio.VS2010Package - Output to AWS output window pane: ...starting deployment to AWS Elastic Beanstalk environment 'mytest'
2012-12-04 20:04:21,971 [88] INFO  Amazon.AWSToolkit.ElasticBeanstalk.Commands.DeployNewApplicationCommand - Deploy to AWS Elastic Beanstalk: ...starting deployment to AWS Elastic Beanstalk environment 'mytest'
2012-12-04 20:04:21,974 [88] DEBUG Amazon.AWSToolkit.VisualStudio.VS2010Package - Output to AWS output window pane: ...starting incremental deployment to environment 'mytest'
2012-12-04 20:04:21,974 [88] INFO  Amazon.AWSToolkit.ElasticBeanstalk.Commands.DeployNewApplicationCommand - Deploy to AWS Elastic Beanstalk: ...starting incremental deployment to environment 'mytest'
2012-12-04 20:04:21,975 [88] INFO  Amazon.AWSToolkit.ElasticBeanstalk.Commands.DeployNewApplicationCommand - ...staging deployment from work folder E:\dev\0x10c\Dev\0x10c-cloud\0x10c-cloud\obj\Debug\Package\Archive
2012-12-04 20:04:21,975 [88] INFO  Amazon.AWSToolkit.ElasticBeanstalk.Commands.DeployNewApplicationCommand - ...commit repository root set at C:\Users\Kieren\AppData\Local\AWSDeploy\4e72fcb2\
2012-12-04 20:14:21,416 [88] DEBUG Amazon.AWSToolkit.VisualStudio.VS2010Package - Output to AWS output window pane: Deployment to AWS Elastic Beanstalk failed with exception: processing .
2012-12-04 20:14:21,417 [88] INFO  Amazon.AWSToolkit.ElasticBeanstalk.Commands.DeployNewApplicationCommand - Deploy to AWS Elastic Beanstalk: Deployment to AWS Elastic Beanstalk failed with exception: processing .
2012-12-04 20:14:21,417 [88] ERROR Amazon.AWSToolkit.ElasticBeanstalk.Commands.DeployNewApplicationCommand - Deployment to AWS Elastic Beanstalk failed with exception: processing .
2012-12-04 20:14:21,417 [88] DEBUG Amazon.AWSToolkit.VisualStudio.VS2010Package - Output to AWS output window pane: Error deploying new application: Unhandled error during deployment: Deployment Failed: Deployment to AWS Elastic Beanstalk failed with exception: processing .
2012-12-04 20:14:21,417 [88] INFO  Amazon.AWSToolkit.ElasticBeanstalk.Commands.DeployNewApplicationCommand - Deploy to AWS Elastic Beanstalk: Error deploying new application: Unhandled error during deployment: Deployment Failed: Deployment to AWS Elastic Beanstalk failed with exception: processing .
2012-12-04 20:14:21,417 [88] ERROR Amazon.AWSToolkit.ElasticBeanstalk.Commands.DeployNewApplicationCommand - Error deploying new application: Unhandled error during deployment: Deployment Failed: Deployment to AWS Elastic Beanstalk failed with exception: processing .
2012-12-04 20:15:07,811 [88] DEBUG Amazon.AWSToolkit.VisualStudio.VS2010Package - Output to AWS output window pane: Deployment to AWS Elastic Beanstalk environment 'mytest' did not complete successfully
2012-12-04 20:15:07,814 [88] INFO  Amazon.AWSToolkit.ElasticBeanstalk.Commands.DeployNewApplicationCommand - Deploy to AWS Elastic Beanstalk: Deployment to AWS Elastic Beanstalk environment 'mytest' did not complete successfully 
```

**笔记！**失败发生在部署开始后几乎正好 10 分钟......然后超时，我想。但是，要修复它吗？...我已经订购了光纤宽带，但它一周后才到货；）另外，如果我重新部署到同一个应用程序，它会更快地失败：仅超过 1 分钟，而不是 10 分钟。

应用程序“存在”在我的 AWS 资源管理器中，但它下面没有环境。

**尝试过的事情**

*   我已经卸载并重新安装了 SDK
*   我删除了 AppData\Local\AWSDeploy 文件夹（似乎是本地 git repo）
*   多次部署到同一个 EB 应用程序或新的 EB 应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T15:50:48.237

如果运行状况检查 URL 未返回 200，则您的应用将不会被部署。因此，如果您在启动时发生了一些事情，例如检查您尚未设置的数据库，并且您的运行状况检查 URL 正在访问该页面，您将收到此错误。

# r - 如何消除 ggplot2 图表末尾的间隙

> ID：13711167
> 
> 赞同：6
> 
> 时间：2012-12-04T20:18:44.420
> 
> 标签：r, ggplot2

我的输入文件[在 PasteBin 上](http://pastebin.com/CXneq6yc)。

我当前的图形代码是：

```
 #Input and data formatting
 merg_agg_creek<-read.table("merged aggregated creek.txt",header=TRUE)
 library(ggplot2)
 library(grid)
 source("http://egret.psychol.cam.ac.uk/statistics/R/extensions/rnc_ggplot2_border_themes.r")

 CombinedCreek<-data.frame(merg_agg_creek)
 Combined<-CombinedCreek[order(CombinedCreek[,2]),]
 Combined$Creek <- factor(rep(c('Culvert Creek','North Silcox','South Silcox','Yucca Pen'),c(32,57,51,31)))  
 Combined$Creek<-factor(Combined$Creek,levels(Combined$Creek)[c(1,4,3,2)])

 #The Graph Code

 creek <-ggplot(Combined,aes(Month,Density,color=factor(Year),shape=factor(Year)))+scale_color_discrete("Year")+scale_shape_discrete("Year")
 creek<-creek + facet_grid(Creek~. ,scales = "free_y")
 creek <- creek + geom_jitter(position = position_jitter(width = .3))
 creek<-creek+scale_color_grey("Year",end=.6)+theme_bw()
 creek<-creek+scale_y_continuous(expression("Number of prey captured " (m^2) ^-1))
 creek<-creek+opts( panel.border = theme_L_border() )+ opts(axis.line = theme_segment())
 creek<-creek+opts(panel.grid.minor = theme_blank())+opts(panel.grid.major = theme_blank())
 creek<-creek+scale_x_discrete("Month",breaks=c(2,5,8,11),labels=c("February","May","August","November"))
 creek 
```

结果图是： [Graph](https://imgur.com/X6KST)
![图形](../Images/876ad9f49c8197ed795f3dd35703c6b2.png)

我的问题是，通过在“scale_x_discrete”中创建中断和标签，在图的右侧，12 月的数据和构面标签之间存在很大的差距。我尝试通过在“scale_x_discrete: 命令”中添加“limits=c(0,13)”来消除这个差距，但[生成的图形](https://imgur.com/oIURF)会破坏 x-labels。

我如何消除这个差距？我的情节创作是否存在根本性缺陷？

谢谢！

编辑：Didzis 回答了下面的问题。我只需要从 scale_x_discrete 更改为 scale_x_continuous

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T05:52:13.730

由于数据中的月份是数字，请尝试替换

```
 scale_x_discrete("Month",breaks=c(2,5,8,11),labels=c("February","May","August","November")) 
```

和

```
 scale_x_continuous("Month",breaks=c(2,5,8,11),labels=c("February","May","August","November")) 
```

保持所有其他参数相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:03:45.000

您需要在比例中使用 expand 参数。我认为额外的空间可能是由于抖动造成的，但如果你给它一个-2，它就会一直到边缘。几乎看起来像一个错误，它填充了这么多。

```
ggplot(Combined,aes(Month,Density,color=factor(Year),shape=factor(Year))) +
scale_shape_discrete("Year") +
facet_grid(Creek~. ,scales = "free_y") +
geom_jitter(position = position_jitter(width = .3)) +
scale_color_grey("Year",end=.6) +
theme_bw() +
scale_y_continuous(expression("Number of prey captured " (m^2) ^-1))+
scale_x_discrete("Month",breaks=c(2,5,8,11),labels=c("February","May","August","November"), expand= c(0,-2)) +
theme(
panel.grid.major=element_blank(),
panel.grid.minor=element_blank()
) 
```

# ruby-on-rails - 如何在生产服务器中升级 rvm 和 ruby 版本

> ID：13711176
> 
> 赞同：6
> 
> 时间：2012-12-04T20:19:36.307
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2, rvm

我有一个带有 nginx 和`ruby 1.9.3p125 (2012-02-16 revision 34643)`.

我已经查看了[http://www.ruby-lang.org/en/news/2012/11/09/ruby-1-9-3-p327-is-released/](http://www.ruby-lang.org/en/news/2012/11/09/ruby-1-9-3-p327-is-released/)我想升级`ruby-1-9-3-p327`以修复安全性错误。

**我在哪里可以找到升级 ruby​​ 版本和我的 rvm 版本的手册或教程？**

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T20:26:18.857

第一次升级 RVM：

```
rvm get stable 
```

然后升级安装的 Ruby：

```
rvm upgrade ruby-1.9.3-p125 ruby-1.9.3-p327 
```

[https://rvm.io/rubies/upgrading/](https://rvm.io/rubies/upgrading/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:41:56.300

如果您的应用程序不会遭受任何停机，明智的做法是在本地复制您的生产环境，通过 rvm 执行升级，正如 NARKOZ 指出的那样，然后运行您的测试以确保一切仍按预期工作。

您可以使用 VirtualBox 之类的东西将克隆与您的开发环境分开。

一旦你确信一切正常，然后进行升级。我什至建议在继续之前对您的服务器进行快照备份。

祝你好运。

# django - 删除 django 中的列

> ID：13711177
> 
> 赞同：0
> 
> 时间：2012-12-04T20:19:43.240
> 
> 标签：django

我将 django 和 southtut 一起用于我的模型。我为一个模型添加了一列：时间，并将其设置为 TimeField。然后我运行 python manage.py schemamigration southtut --auto，当它要求我输入默认值时，我不假思索地输入了 1。结果很好。然后我运行 python manage.py migrate southtut，它引发了错误： ValidationError: [u"'1' value has an invalid format. It must be in HH:MM[:ss[.uuuuuu]] format."] 。我明白为什么我有错误。但是我如何摆脱那个值 1 呢？我无法登录管理站点并删除，因为“时间”列不存在。同样，我似乎也无法从 shell 运行它，因为没有这样的列。但另一方面，我不能只添加不同的列；即，“实时”，因为错误 ValidationError: [u"'1' value has an invalid format. It must be in HH:MM[:ss[.uuuuuu]] format."] 仍然被提出。那么我究竟如何摆脱这个价值呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:23:00.877

要更改默认值，只需编辑南创建的迁移文件。它将在`southtut/migrations/`

或者，删除迁移文件然后再次运行可能更容易`schemamigration`，但这次提供有效的默认值。因为您没有成功迁移，所以删除“坏”迁移文件是无害的。

# c++ - 如何在 tty 上绘制折线图？

> ID：13711185
> 
> 赞同：3
> 
> 时间：2012-12-04T20:20:08.030
> 
> 标签：c++, linux, graphics, terminal, 2d

我正在用 C++ 编写一个命令行（非图形）Linux 程序，在某些地方我需要它来绘制图表或将函数绘制到终端中。

看看一些程序，如 ntsysv、mc、alsa 等，我相信这是可能的，但我想知道如何。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T20:26:11.957

支持 ncurses 建议，还有一个名为[libcaca](http://caca.zoy.org/wiki/libcaca)的库，这是一个输出 ASCII 文本而不是像素的图形库。如果您想使用其他软件创建此图，然后将其输出推送到终端，您可以考虑将 libcaca 与 ncurses 一起使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T20:24:07.920

您可能想使用[ncurses](http://www.gnu.org/software/ncurses/)并做一些[ASCII 艺术](http://en.wikipedia.org/wiki/ASCII_art)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T20:24:16.840

像 alsamixer 这样的东西使用 ncurses。[http://www.gnu.org/software/ncurses/](http://www.gnu.org/software/ncurses/)

这将使您可以直接在终端中制作图表等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T20:55:37.227

尝试使用用于 turbo c conio.h 的旧 borland 库

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-09T19:54:11.883

可能不再需要了，但也许这对某人有所帮助

```
void drawfunc(int ymin, int ymax, int xmin, int xmax, float h){
int y = 0;
int x = 0;
double func;

for(y = ymax; y >= ymin; y--)
{
    printf("\n");
    for(x = xmin; x <= xmax; x++)
    {
        func = cos(x);

        if(x == 0)
        {
            printf("|");
        }

        if(func > (y - 1) * h && func < y * h)
        {
            printf("*");
        }

        else if(y == 0)
        {
            if(x >= xmin || x <= xmax)
            {
                printf("-");
            }
        }
        else
        {
            printf(" ");
        }
    }
}
printf("\n\n");} 
```

# python - 循环遍历python中的树层次结构？

> ID：13711187
> 
> 赞同：1
> 
> 时间：2012-12-04T20:20:17.093
> 
> 标签：python, recursion, tree

我是新来的，对 python 很陌生！

我们有一个作业，我已经能够完成其余的工作，但还有一个问题：如果我有这样的树层次结构：

```
root = [
    parent1 = [
        child1,
        child2 = [
            sub_child
        ]
        child3
    ],
    parent2 = [
        child1,
        child2
    ]
] 
```

而且它们都是一个名为的类的实例`TreeHierarchyClass`，并且它们都有一个名称属性，我怎样才能找到我输入的名称呢？

我尝试使用 for 循环，但无法知道我需要多少？取名字很简单：

```
name = input("Enter name: ")
if name == TreeHierarchyObject.name:
    print("Found it!") 
```

但是我如何循环遍历对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T20:23:03.780

你应该在这里使用简单的递归。该方法在一定程度上取决于您的子对象如何附加到父对象。

如果它们在列表中`self.children`，则此方法有效，我建议这样做。只需在您的类中定义以下方法：

```
def findObjectByName(self, name):
    if self.name == name:
        return self
    else:
        for child in self.children:
            match = child.findObjectByName(name)
            if match:
                return match 
```

**编辑：** 要使其适用于任何属性，而不仅仅是名称，请`getattr()`改用：

```
def findObject(self, attr, value):
    if getattr(self, attr) == value:
        return self
    else:
        for child in self.children:
            match = child.findObject(attr, value)
            if match:
                return match 
```

只需调用`root.findObjectByName("Sub Child!")`或使用第二种方法：`root.findObject("name", "Sub Child!")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T20:53:35.017

您可以使用`recursion`，也可以使用`iteration`. 无论哪种方式都无所谓。但是您需要一种搜索​​树的策略。

以下是一些通过图表的策略：

*   [http://en.wikipedia.org/wiki/Breadth-first_search](http://en.wikipedia.org/wiki/Breadth-first_search)
*   [http://en.wikipedia.org/wiki/Depth-first_search](http://en.wikipedia.org/wiki/Depth-first_search)

主要思想是不要两次通过同一个节点/叶子，这对于树来说是微不足道的，但`coloring`对于图来说却需要：

*   [http://en.wikipedia.org/wiki/Graph_coloring](http://en.wikipedia.org/wiki/Graph_coloring)

您可以使用一些设计模式，例如`visitor`模式，您可以添加一个方法`.visit()`来`TreeHierarchyClass`访问其子节点，并添加一个方法来按名称查找节点。

*   [http://en.wikipedia.org/wiki/Visitor_pattern](http://en.wikipedia.org/wiki/Visitor_pattern)

例子：

```
# imagine we got this class
class TreeHierarchyClass(object):
    def __init__(self, value):
        self.children = []
        self.value = value
        if self.value == 13:
            self.name = 'the lucky one.'
    def add(self, value):
        self.children.append(type(self)(value)) 
```

您可以通过以下方式访问所有节点：

```
def visit(tree):
    visited = set()
    nonvisited = set()
    nonvisited.update(tree.children)
    while nonvisited:
        item = nonvisited.pop()
        # already seen
        if item in visited:
            continue
        # mark item
        visited.add(item)
        yield item
        # add children
        nonvisited.update(item.children) 
```

让我们构建一个示例树结构：

```
root = TreeHierarchyClass(0)

for i in range(10):
    root.add(i)

for i in range(10):
    root.children[1].add(i + 10) 
```

现在让我们找到一些项目：

```
def find(name):
    for item in visit(root):
        print 'checking item with value %d' % item.value,
        if getattr(item, 'name', None) == name:
            print '- found it.'
            break
        else:
            print '- nope, keep searching.'
    else:
        print 'Sorry, not found.'

find('the lucky one.')
find('the lost one.') 
```

这个例子将打印：

```
>>> find('the lucky one.')
checking item with value 7 - nope, keep searching.
checking item with value 0 - nope, keep searching.
checking item with value 1 - nope, keep searching.
checking item with value 12 - nope, keep searching.
checking item with value 2 - nope, keep searching.
checking item with value 9 - nope, keep searching.
checking item with value 19 - nope, keep searching.
checking item with value 3 - nope, keep searching.
checking item with value 11 - nope, keep searching.
checking item with value 4 - nope, keep searching.
checking item with value 14 - nope, keep searching.
checking item with value 5 - nope, keep searching.
checking item with value 6 - nope, keep searching.
checking item with value 15 - nope, keep searching.
checking item with value 8 - nope, keep searching.
checking item with value 16 - nope, keep searching.
checking item with value 13 - found it.
>>> find('the lost one.')
checking item with value 7 - nope, keep searching.
checking item with value 0 - nope, keep searching.
checking item with value 1 - nope, keep searching.
checking item with value 12 - nope, keep searching.
checking item with value 2 - nope, keep searching.
checking item with value 9 - nope, keep searching.
checking item with value 19 - nope, keep searching.
checking item with value 3 - nope, keep searching.
checking item with value 11 - nope, keep searching.
checking item with value 4 - nope, keep searching.
checking item with value 14 - nope, keep searching.
checking item with value 5 - nope, keep searching.
checking item with value 6 - nope, keep searching.
checking item with value 15 - nope, keep searching.
checking item with value 8 - nope, keep searching.
checking item with value 16 - nope, keep searching.
checking item with value 13 - nope, keep searching.
checking item with value 17 - nope, keep searching.
checking item with value 10 - nope, keep searching.
checking item with value 18 - nope, keep searching.
Sorry, not found. 
```

# git - .gitattributes with core.autocrlf unset

> ID：13711190
> 
> 赞同：4
> 
> 时间：2012-12-04T20:20:33.583
> 
> 标签：git, core.autocrlf, gitattributes

我的存储库中有一个 .gitattributes 文件，看起来像这样

```
* text=auto
*.txt text 
```

我在存储库、全局和系统设置中取消了 core.autocrlf。根据 gitattributes 的文档，我的理解是，存储库中名称以 .txt 结尾的所有文件都应使用本机行结尾签出。不过，我看到的是 .txt 文件总是有 LF 作为行尾，即使在 Windows 上也是如此。鉴于此配置，为什么 Windows 上的行结尾不是 CRLF？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-04T21:01:39.210

问题是在处理 core.eol 时存在错误。gitattributes 的文档说，如果未设置，则将使用 native，它应该默认为您系统的正确行尾（Windows 为 CRLF，unix 为 LF），但是在我的系统上未设置 core.eol 或将其设置为 native总是导致 LF 用于行尾。因此，答案是在 Windows 上将 core.eol 显式设置为 crlf。[http://adaptivepatchwork.com/2012/03/01/mind-the-end-of-your-line/](http://adaptivepatchwork.com/2012/03/01/mind-the-end-of-your-line/)上的评论让我得到了这个答案。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-04T20:22:45.377

您需要将 core.autocrlf 设置为输入。在 Windows 上将其设置为 true。

如果您不共享 x-platform，则将其设置为 false 并完全忘记属性。

# .net - 是否有适用于 Siemens Logo 的 http-API

> ID：13711193
> 
> 赞同：17
> 
> 时间：2012-12-04T20:20:42.267
> 
> 标签：.net, automation

我必须更新旧的房屋自动化系统，并且正在考虑 Siemens Logo 控制系统。要求是可以从 ac# 应用程序读取输入和输出端口的状态。
由于某些徽标模块具有以太网端口，我认为它们可能支持通过 http 读取和写入端口状态。但是，我还没有找到有关此类功能的信息。

是否有人从 C# 中读取和写入 Siemens 徽标的端口状态？是否有文档化的 API，希望是 HTTP-API？或者有人可以向我推荐另一个具有这种 API 的自动化系统吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-18T08:06:07.913

我是 Siemens Logo 自动化系统的新手。

如果它支持 HTTP（不是 HTTPS），并且您想要对 API 进行逆向工程，那么您可能能够嗅探发送到以太网接口的消息。

但是这个任务很残酷，至少你有足够的时间/耐心，我不推荐它。

您在市场上有更多选择。任何支持 X10（古代）、Insteon 或 Z-Wave 的东西都可能让您朝着正确的方向前进。

我有使用 Insteon 的经验。他们为 SDK 收取 200 美元，有传言说 SDK 没有很好的文档记录，开发可能会很痛苦，但是你可以在这里找到一个免费的库。

[http://soapboxautomation.com/support-2/fluentdwelling-support/](http://soapboxautomation.com/support-2/fluentdwelling-support/)

您只需要调制解调器 COM / USB 即可控制 X10 和 Insteon 设备。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-01-12T15:19:16.373

我知道这个问题现在已经超过 2 年了，但只是为了完整起见，如果有人在寻找 Siemens Logo HTTP-API 时偶然发现了这个问题：

较新的模块（0ba7 和 0ba8）配备了以太网端口，因此能够使用 S7 协议。网络中有免费的库实现了这个协议，比如[libnodave](http://libnodave.sourceforge.net/)或 snap7。

我用 C#/WCF 实现了某种“中间件”，它通过 libnodave 与 Logo 进行通信，并公开了一个简单的 REST/JSON API 进行控制。多亏了 MONO，它也可以在低功耗的老式 Raspberry Pi 24/7 上运行。你可以在[这里](http://www.frickelzeugs.de/logocontrol/)找到它，不幸的是我的网站只有德语。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-12-12T22:09:17.577

在带有内置 Web 服务器的最新 Logo 8 上，这是可能的，甚至没有那么困难。

我在这里记录我的发现：[https](https://github.com/jankeymeulen/siemens-logo-rest) ://github.com/jankeymeulen/siemens-logo-rest ，也许有一天我会写一个包装器，但使用它非常简单，例如与 Node-RED 一起使用。

例如从 I1 读取状态：

`curl 'http://192.168.1.100/AJAX' -H 'Security-Hint: ABCDEFGHIJKLMNOPQRSTUVWXYZ123456' --data-binary 'GETVARS:v1,129,0,0,1,1'`

安全提示您需要嗅探一次，但可以无限期地重复使用（来自同一个 IP 地址）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T10:07:07.250

查找“LOGO! 的应用示例”，下载，阅读源代码。

随机谷歌搜索也会让你“我在设置目录 Program Files\Siemens\LOGOComfort_V5\lib\classes.jar 下找到了一个有用的工具来研究 LOGO 的通信协议...”乍一看不像 HTTP，甚至不清楚如果它基于 tcp 而不是 udp，但它似乎是一个好的开始，请尝试重新创建该 chap 的开发环境，我认为你很可靠。

也在下面，假设你有同代控制器：

[http://wiki.ibhsoftec.com/en/OPCServer:Variables_from_LOGO!_RCE](http://wiki.ibhsoftec.com/en/OPCServer%3aVariables_from_LOGO!_RCE)

这是一个库，据说支持 C#：

[http://www.adontec.com/index.htm?GO=/s7-library.htm](http://www.adontec.com/index.htm?GO=/s7-library.htm)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-29T15:15:19.270

此功能不可用，据我所知LOGO，将不可用。以太网并不意味着产品具有网络服务器、电子邮件等。只是可以通过以太网层通信（状态）数据。例如，Profinet IO。

LOGO是一个简单的PLC，比PLC更像是一个时钟，它有一个简单的处理器。您应该根据您的要求开始寻找比 LOGO 更强大/不同的产品。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-11T15:13:07.457

Siemens 没有官方的 LOGO! API。根据我从这里其他用户那里了解到的情况，不会想出一个。

但是，您可以试试这个 LOGO！API 中间件服务器。

[https://www.ambersys.net/](https://www.ambersys.net/)

您的标志！需要通过互联网访问。

从 I1-I4、M1-M4、AI1-AI4、AM1-AM4 读取数据。可触发功能键 F1-F4

数据包含的内容以及功能键触发的内容取决于您的 LOGO! 程序。

您可以创建一个 LOGO Key 并使用此格式从您的 LOGO! 中检索数据！ [https://www.ambersys.net/api?logokey=](https://www.ambersys.net/api?logokey=(the)（创建的logokey）

# c - 来自 const 的无效转换，但未声明为 const

> ID：13711199
> 
> 赞同：0
> 
> 时间：2012-12-04T20:20:56.157
> 
> 标签：c, constants

我声明了以下内容`char*`并尝试将其传递给需要 a`char *`作为第三个参数的函数：

```
char *echo;
prompt = ssh_userauth_kbdint_getprompt(primarySession, 0, echo); 
```

但是，我收到错误：

```
error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive] 
```

我还尝试了声明 as`char echo;`和传递的参数 as `&echo`。但我真的不需要这个函数在`echo`. 所以我想传递 NULL，但我想我希望它是一个`const`. 我也试过[这个技巧](https://stackoverflow.com/questions/10906595/is-const-a-lie-since-const-can-be-cast-away)：

```
char echo;
prompt = ssh_userauth_kbdint_getprompt(primarySession, 0, (char *)(&echo)); 
```

仍然没有成功。建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T20:23:07.233

查看该函数的声明：

```
const char *
ssh_userauth_kbdint_getprompt (ssh_session session, unsigned int i, char *echo) 
```

因此，它`prompt`需要是 a`const char *`而不是 a `char *`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:24:06.060

问题在于该函数的返回值，而不是它的任何参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:24:23.617

可能错误不在您想的地方，而是在返回类型中。我猜你的`prompt`变量是`char*`函数返回的地方`char const*`。

# linq - Linq to Entities, Take(3) from Joined table

> ID：13711201
> 
> 赞同：0
> 
> 时间：2012-12-04T20:21:07.047
> 
> 标签：linq, linq-to-entities

我正在尝试使用来自与子表连接的父表的数据填充 MVC 应用程序中的 ViewModel。我想从子表中获取的唯一数据是前三个记录的命名字段中的逗号分隔字符串，并将它们放入 ViewModel 中的字符串字段中。这是我没有成功的尝试：

```
public IEnumerable<ReqHeaderVM> GetOpenReqs(string siteCode)
    {
      var openReqs = from h in context.ReqHeaders
      join l in context.ReqLineItems on h.ID equals l.ReqID into reqLineItems
       select new ReqHeaderVM
       {
         ReqID = h.ID,
         ShopCode = h.ShopCode
         Nomenclatures = reqLineItems.Select(x => x.Nomenclature).Take(3) // This doesn't work

       };
        return (openReqs.ToList());
    } 
```

这是 ViewMdel：

```
 public class ReqHeaderVM
{
    [Editable(false)]
    public string ReqID { get; set; }
    public string ShopCode { get; set; }
    public string  Nomenclatures {get; set;}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:35:24.290

假设您在 ReqHeaders 和 ReqLineItems 之间有正确的关系（外键），这应该会给您您正在寻找的东西......

```
public IEnumerable<ReqHeaderVM> GetOpenReqs(string siteCode)
{
    var openReqs = from h in context.ReqHeaders
                    select new
                    {
                        ReqID = h.ID,
                        ShopCode = h.ShopCode
                        Nomenclatures = h.ReqLineItems
                            .OrderBy(x => x.SomeColumn)
                            .Select(x => x.Nomenclature)
                            .Take(3)
                    };

    var openReqsTran = from oreq in openReqs.AsEnumerable()
                        select new ReqHeaderVM
                        {
                            oreq.ReqID,
                            oreq.ShopCode,
                            Nomenclatures = string.Join(", ", oreq.Nomenclatures)

                        };

    return (openReqsTran);
} 
```

请注意，命名法是命名法类型的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:34:34.870

是的，连接创建了一个笛卡尔结果集。（想想表格数据）你正在尝试做什么。要获得您想要的结果，您有几个选择。

1.  使用延迟加载并遍历每个标题，分别查询行项目。
    1.  亲 - 简单的查询
    2.  con - 选择 n+1
2.  查询所有标题和所有行项目，但仅使用前 3 个构建视图模型
    1.  亲单查询
    2.  con - 大笛卡尔结果集查询太多数据
3.  查询所有标题和所有相关行个人
    1.  pro - 2 个更小、更简单的查询
    2.  con - 查询太多行详细信息。
4.  在 2 个查询中查询所有标题和每个标题的前 3 行
    1.  pro - 只获取您需要的信息
    2.  con - 每个标题前 3 行的复杂查询。

# contacts - Janrain 联系人

> ID：13711205
> 
> 赞同：0
> 
> 时间：2012-12-04T20:21:27.820
> 
> 标签：contacts, janrain

我正在使用 janrain 登录网站，并与用户 facebook、gmail 等帐户联系。现在它只会从登录的帐户中提取联系人。有没有办法从他们的其他帐户中提取联系人。例如，如果他们使用他们的 facebook 帐户登录，是否也可以从他们的 gmail 帐户中提取联系人？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T23:23:38.390

如果用户只使用 Facebook 对您的站点进行了身份验证，那么您将无法访问他们的 Google 联系人……只有 Facebook 从 API 返回的内容。

# mysql - 在 MySQL 查询中复制“For Each”循环

> ID：13711209
> 
> 赞同：1
> 
> 时间：2012-12-04T20:21:45.267
> 
> 标签：mysql, loops, for-loop

我一直在工作中使用 MySQL，但我对更高级的查询仍然有点菜鸟，并且经常发现自己编写了我觉得（或希望）可以显着缩短的冗长查询。

我最近遇到了一种情况，我需要在一个表中为另一个表中的每个条目创建 X 个新条目。我还需要将第二个表中每一行的值复制到我插入到第一个表中的每一行中。

为了清楚起见，这是我正在尝试做的伪代码：

```
For each row in APPS
   create new row in TOKENS
   set (CURRENT)TOKENS.APP_ID = (CURRENT)APPS.APP_ID 
```

任何帮助表示赞赏，即使它归结为“这是不可能的”。

请注意，这些表只共享这个字段，我将静态或通过其他方法设置其他字段，因此简单地复制并不是一个真正的选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T20:26:30.030

您不需要循环，您可以使用单个 INSERT 命令一次插入所有行：

```
INSERT INTO TOKENS (APP_ID)
SELECT APP_ID 
FROM APPS; 
```

如果要为该行设置其他值，只需修改 INSERT 列表和 SELECT 子句。例如：

```
INSERT INTO TOKENS (APP_ID, static_value, calculated_value)
SELECT APP_ID, 'something', 'calculated-' + APP_ID
FROM APPS 
```

# javascript - 试图让一个变量等于一组对象中的一个对象......我想？

> ID：13711211
> 
> 赞同：-1
> 
> 时间：2012-12-04T20:21:52.740
> 
> 标签：javascript, arrays, variables, coffeescript

好的，所以我之前提出这个问题的方式一定太复杂了，所以这里是一个简化版本：

我有一个变量等于：

```
{
  txid: 'f0315ffc38709d70ad5647e22048358dd3745f3ce3874223c80a7c92fab0c8ba',
  version: 1,
  locktime: 0,
  vin: 
   [ { coinbase: '0420e7494d017f062f503253482f',
       sequence: 4294967295 } ],
  vout: [ { value: 50, n: 0, scriptPubKey: [Object] } ],
  blockhash: '00000000b873e79784647a6c82962c70d228557d24a747ea4d1b8bbe878e1206',
  confirmations: 39288,
  time: 1296688928,
  blocktime: 1296688928 } 
```

我想让另一个变量等于：

```
vout: [ { value: 50, n: 0, scriptPubKey: [Object] } ], 
```

我该怎么做呢？当我尝试：

```
varible2 = variable1.vout 
```

我收到一条错误消息，说“.vout”未定义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:20:17.913

```
var avariable = {/* your object [literal] here */};

var anothervariable = avariable.vout; // or avariable["vout"]

// or did you want the following?

var anothervariable = {
    vout: avariable.vout
}; 
```

# javascript - JQuery 做点击事件堆栈

> ID：13711213
> 
> 赞同：0
> 
> 时间：2012-12-04T20:22:13.163
> 
> 标签：javascript, jquery, events

我有以下代码；

```
$("#myID").click(function () {
    //do something
}) 
```

在某些时候，用户对网页另一部分的操作需要更改点击时发生的操作，例如

```
$("#myID").click(function () {
    //do something different
}) 
```

我的问题是，这样做的正确/最有效的方法是什么？目前我只是在实现上面的第二块代码，但这会导致一些奇怪的行为吗？即现在是否会在点击时执行两种不同的操作？或者第二个代码块是否覆盖了第一个代码块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:24:59.183

他们都会执行所以不，第二个调用不会覆盖第一个。

**[基本的 jsFiddle 示例](http://www.jsfiddle.net/j08691/J8BQe/)**

正如 pimvdb 所指出的，它们将按照绑定的顺序执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:27:57.970

你总是可以先解绑点击功能：http: [//api.jquery.com/unbind/](http://api.jquery.com/unbind/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:28:10.153

对，他们“堆叠”。即 $("#myID") 将维护一个事件处理程序列表，并在单击时执行两者。

如果您不再需要原始处理程序，则需要取消绑定它，使用`$("#myID").off('click')`或者如果您使用的是旧版本的 jquery，`$("#myID").unbind('click'`)`。[http://api.jquery.com/unbind/](http://api.jquery.com/unbind/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T20:28:48.957

在您的代码中，两次点击都将被执行。尝试之前取消绑定点击事件

```
$("#myID").unbind("click") 
```

[http://api.jquery.com/unbind/](http://api.jquery.com/unbind/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T20:31:17.363

您可以添加一个全局变量`isAnotherEvent = false`，然后检查`click`您需要执行哪一部分代码的事件，执行另一部分只需 make`isAnotherEvent = true`

```
var isAnotherEvent = false;
$("#myID").click(function () {
  if(!isAnotjerEvent){
    //do something
  } else {
    //do something else
  }
})

$("#btnChangeEvent").click(function(){
  isAnotherEvent = true;
} 
```

# php - Wordpress PHP - 来自主题选项的两个值

> ID：13711215
> 
> 赞同：2
> 
> 时间：2012-12-04T20:22:15.030
> 
> 标签：php, wordpress

我已经为此工作了一段时间，并且无法在网上其他任何地方找到答案。

在我的 wordpress 选项面板中，我有一个可以输入的文本区域，如果我想添加另一个文本区域，我只需单击以添加和删除它们。

这是它的样子：

![主题选项示例](../Images/60abe2eb9424825d8eb8bd285dc9a46d.png)

我所有的 textarea 选项都放在一个数组中，我可以随时调用它们。

我想要做的，并且一直试图弄清楚一段时间是这样的：我希望能够在每个文本区域下方添加一个文本输入，并且每当我更新它时，它都会放置每个文本输入成一个数组。

我有一种感觉，这只是一件我还没有想到的简单的事情。如果没有，请告诉我。

这是选项面板的 github：[https ://github.com/leemason/NHP-Theme-Options-Framework](https://github.com/leemason/NHP-Theme-Options-Framework)

以下是我一直在处理的代码：

此代码位于一个名为的新文件`field_multi_textarea.php`中，我已将其添加到选项文件夹中目录`multi_text`内的一个新文件夹中。`fields`

```
<?php
class NHP_Options_multi_textarea extends NHP_Options{   

    /**
     * Field Constructor.
     *
     * Required - must call the parent constructor, then assign field and value to vars, and obviously call the render field function
     *
     * @since NHP_Options 1.0.5
    */
    function __construct($field = array(), $value ='', $parent){

        parent::__construct($parent->sections, $parent->args, $parent->extra_tabs);
        $this->field = $field;
        $this->value = $value;
        //$this->render();

    }//function

    /**
     * Field Render Function.
     *
     * Takes the vars and outputs the HTML for the field in the settings
     *
     * @since NHP_Options 1.0.5
    */
    function render(){

        $class = (isset($this->field['class']))?$this->field['class']:'large-text';

        echo '<ul id="'.$this->field['id'].'-ul">';

        if(isset($this->value) && is_array($this->value)){
            foreach($this->value as $k => $value){
                if($value != ''){

                    echo '<li><div class="fadeout"><textarea id="'.$this->field['id'].'-'.$k.'" name="'.$this->args['opt_name'].'['.$this->field['id'].'][]" rows="6" class="'.$class.'" />'.esc_attr($value).'</textarea></div> <a href="javascript:void(0);" class="nhp-opts-multi-textarea-remove">'.__('Remove', 'nhp-opts').'</a></li>';

                }//if

            }//foreach
        }else{

            echo '<li><div class="fadeout"><textarea id="'.$this->field['id'].'" name="'.$this->args['opt_name'].'['.$this->field['id'].'][]" rows="6" value="'.$this->field['std'].'" class="'.$class.'" />'.esc_attr($value).'</textarea></div> <a href="javascript:void(0);" class="nhp-opts-multi-textarea-remove">'.__('Remove', 'nhp-opts').'</a></li>';

        }//if

        echo '<li style="display:none;"><div class="fadeout"><textarea id="'.$this->field['id'].'" name="" rows="6" class="'.$class.'" /></textarea></div> <a href="javascript:void(0);" class="nhp-opts-multi-textarea-remove">'.__('Remove', 'nhp-opts').'</a></li>';

        echo '</ul>';

        echo '<a href="javascript:void(0);" class="nhp-opts-multi-textarea-add" rel-id="'.$this->field['id'].'-ul" rel-name="'.$this->args['opt_name'].'['.$this->field['id'].'][]">'.__('Add More', 'nhp-opts').'</a><br/>';

        echo (isset($this->field['desc']) && !empty($this->field['desc']))?' <span class="description">'.$this->field['desc'].'</span>':'';

    }//function

    /**
     * Enqueue Function.
     *
     * If this field requires any scripts, or css define this function and register/enqueue the scripts/css
     *
     * @since NHP_Options 1.0.5
    */
    function enqueue(){

        wp_enqueue_script(
            'nhp-opts-field-multi-textarea-js', 
            NHP_OPTIONS_URL.'fields/multi_textarea/field_multi_textarea.js', 
            array('jquery'),
            time(),
            true
        );

    }//function

}//class
?> 
```

这是我命名`field_multi_textarea.js`并放置在`multi_text`文件夹中的 js。

```
jQuery(document).ready(function(){

    jQuery('.nhp-opts-multi-textarea-remove').live('click', function(){
        jQuery(this).prev('.fadeout').val('');
        jQuery(this).parent().fadeOut('slow', function(){jQuery(this).remove();});
    });

    jQuery('.nhp-opts-multi-textarea-add').click(function(){
        var new_input = jQuery('#'+jQuery(this).attr('rel-id')+' li:last-child').clone();
        jQuery('#'+jQuery(this).attr('rel-id')).append(new_input);
        jQuery('#'+jQuery(this).attr('rel-id')+' li:last-child').removeAttr('style');
        jQuery('#'+jQuery(this).attr('rel-id')+' li:last-child textarea').val('');
        jQuery('#'+jQuery(this).attr('rel-id')+' li:last-child textarea').attr('name' , jQuery(this).attr('rel-name'));
    });

}); 
```

我在 NHP-options.php 中调用这个函数，如下所示：

```
array(
    'id' => 'cf_emailaddress2',
    'type' => 'multi_textarea',
    'title' => __('Contact Form Email Address', 'nhp-opts'),
    'sub_desc' => __('To add more, click add more', 'nhp-opts'),
    'et_url' => 'myurl',
    'std' => get_bloginfo('admin_email') ."",
    'desc' => __('Contact Form Email Address, This is where the form will be sent to.', 'nhp-opts')
    ), 
```

我可以使输入看起来像下面的图像，但它的值不保存，或者它与文本区域中的任何内容相同。

![在此处输入图像描述](../Images/22453b9a6dbbfb7c80f354d0d9f1ec4b.png)

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:02:30.270

检查您的 TextArea 字段名称。我猜它们是相同的，在保存您访问字段的方式时，请参见下面的名称形成行

```
echo '<li><div class="fadeout"><textarea id="'.$this->field['id'].'-'.$k.'" name="'.$this->args['opt_name'].'['.$this->field['id'].'][]" rows="6" class="'.$class.'" />'.esc_attr($value).'</textarea></div> <a href="javascript:void(0);" class="nhp-opts-multi-textarea-remove">'.__('Remove', 'nhp-opts').'</a></li>'; 
```

类似于 taxtarea id，您可能需要添加 $k 作为前缀。

# apache - 由于 apache 的 access_compat，无法在 localhost 上运行任何名为 install.php 的文件

> ID：13711219
> 
> 赞同：0
> 
> 时间：2012-12-04T20:22:26.797
> 
> 标签：apache, localhost

我在这里遇到了一个奇怪的问题。我之前至少安装了 30 个 localhost WordPress，而且每个都运行良好。现在（在重新安装 Win7 和 XAMPP 之后）我无法访问任何 install.php 文件（无论是 WP 自己的，一个虚拟的空文件等）。此外，它的位置也无关紧要（wp-admin 文件夹、WP 外部的随机位置、htdocs 根文件夹等）。

这不是防病毒或 Windows 防火墙问题。它似乎来自apache本身。apache错误日志说这个

[2012 年 11 月 30 日星期五 16:46:40.223524] [access_compat:error] [pid 5876:tid 1604] [client ::1:59365] AH01797：客户端被服务器配置拒绝：D:/xampp/htdocs/vmf05/wp-管理员/安装.php

有人对此有任何线索吗？我已经完成了所有正常步骤，但还没有找到解决方案。

此外，如果我禁用 access_compat 模块，apache 将无法启动。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:28:38.020

我不敢相信问题出在哪里！我将具有 WP 更好的安全指令的 .htaccess 文件移动到 xampp 站点的根目录作为备份，之后忘记将其移回。

无法访问任何 install.php 文件，因为它具有以下内容：

```
<files install.php>
Order allow,deny
Deny from all
</files> 
```

而且，由于该文件位于根目录上，因此它影响了整个服务器。

# android - 如何在android中通过蓝牙发送图像？

> ID：13711220
> 
> 赞同：2
> 
> 时间：2012-12-04T20:22:26.610
> 
> 标签：android, bluetooth

在我的应用程序中，我打开我的画廊并选择一张图片，然后在图像视图中显示我的图像，然后我应该通过蓝牙发送它。

这就是我所达到的：

```
Uri selectedImage = data.getData();
String[] filePathColumn = {MediaStore.Images.Media.DATA};

Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);
cursor.moveToFirst();

int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
String filePath = cursor.getString(columnIndex);
cursor.close();
Bitmap yourSelectedImage = BitmapFactory.decodeFile(filePath);
iv.setImageBitmap(yourSelectedImage); 
```

如何通过蓝牙发送？

注意我已经打开了我的蓝牙并使它也可以被其他设备发现。如果你在我的任务中帮助我，我将不胜感激 =]

# jquery - 在 jquery click 事件中调用函数

> ID：13711221
> 
> 赞同：1
> 
> 时间：2012-12-04T20:22:28.310
> 
> 标签：jquery

我正在尝试`click`使用 jQuery 在事件中调用一个函数，但是 jQuery在调用该函数`undefined`时返回。这样做的正确方法是什么？

```
$(document).ready(function() {
   $('#my_button').click(function() {
      var valid = check(something);
      if (valid) { // do something }
   });

   check = function(param) {
     .ajax {
         // ajax params
         success: function(data) { 
            if (data)
               return true;
         }
     }
   }
}); 
```

如果您执行 a `console.log(valid)`，则返回为`undefined`

**更新**：我在里面添加了代码`check()`，这是一个 ajax 调用。这似乎是问题所在。如果我只是进行`alert()`内部检查，那么一切正常。那么ajax调用有什么问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T00:34:12.130

问题是检查是一个异步事件。您需要使用回调而不是 return 语句：

```
$(document).ready(function() {
   $('#my_button').click(function() {
      check(something, function (valid) {
         if (valid) { // do something }
      });
   });

   check = function(param, callback) {
     $.ajax({
        // ajax params
        success: function(data) { 
            if (data){
               return callback(true);
            }
            else {
               return callback(false);
            }
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T20:25:03.553

我想你想要这个：

```
function check(param)
{
    //do something
    return true;
} 
```

然后，您可以在 Javascript 代码中的任何位置调用 check 。

让我补充一点，我认为这种方式是最好的，因为除非有原因，否则我不喜欢使用函数指针。在这种情况下似乎没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:24:45.590

尝试添加`var`之前`check`

```
var check = function(param) {
 // do something
 return true; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T20:25:02.197

那是因为`check`需要在我相信的 jquery 点击事件之上声明。尝试这个：

```
var check = function(param) {
 // do something
 return true;
}

$('#my_button').click(function() {
  var valid = check(something);
  if (valid) { // do something }
}); 
```

# html - 我应该使用预取还是下一步？

> ID：13711222
> 
> 赞同：1
> 
> 时间：2012-12-04T20:22:30.743
> 
> 标签：html, firefox, prefetch

有些人可能知道，FireFox 可以选择[预取](https://developer.mozilla.org/en-US/docs/Link_prefetching_FAQ)网页。

现在来自文档：

```
<link rel="prefetch alternate stylesheet" href="mozspecific.css">
<link rel="next" href="2.html"> 
```

现在据我了解，您预取的任何内容都将被预取，但是我应该何时使用预取 rel 以及何时使用下一个？

这意味着在尝试预取多个资源时，我的所有链接会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:42:40.557

`rel="prefetch"`用于当前页面可能很快需要并且最好已经缓存的东西（样式、脚本、图像）。`rel="next"`用于用户接下来可能浏览的网页。就这么简单。

从[HTML5 标准](http://www.whatwg.org/specs/web-apps/current-work/)：

> 关键字表示抢先获取和缓存指定资源可能是有益的`prefetch`，因为用户很可能需要此资源。

还有一点：

> `next`关键字表示文档是序列的一部分，并且链接指向作为序列中下一个逻辑文档的文档。

所以`rel="next"`本质上并不表示需要预取该网页 - Firefox 可能会选择这样做，因为用户可能会在接下来导航到它（不确定当前是否正在发生）。

# haskell - 显示 QuickCheck 属性失败的原因并处理测试函数中的异常

> ID：13711226
> 
> 赞同：3
> 
> 时间：2012-12-04T20:22:47.570
> 
> 标签：haskell, quickcheck

我有一个 QuickCheck 属性测试一个功能`f`。该属性将函数映射到`f`某个列表`xs`并检查结果的某些元素属性。在失败的情况下，我想显示`xs`与此失败相关的元素。考虑以下属性：

```
prop x =
    printTestCase ("Failed for value " ++ show failure) $ isNothing failure
  where
    failure = fmap fst $ find (not . snd) $ map (\n -> (n, f x n == n)) [10..20] 
```

这适用于实施

```
f = (+) 
```

和`quickcheck prop`输出

```
*** Failed! Falsifiable (after 2 tests):                  
1
Failed for value Just 10 
```

但是，如果`f`抛出异常，即

```
f = undefined 
```

然后`quickcheck prop`输出

```
*** Failed! Exception: 'Prelude.undefined' (after 1 test): 
()
Failed for value Exception thrown by generator: 'Prelude.undefined' 
```

如何编写一个捕获第二个异常并返回“Just 0”的属性，就像前面的示例一样？我想，可以使用`whenFail`or `whenFail'`，但我还不了解 QuickCheck 的内部结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T01:12:45.917

感谢#haskell 频道上的 aavogt，我找到了模块`Control.Spoon`，它提供了可以用来解决这个问题的勺子和茶匙功能。但是，我不知道使用这个包（它使用`unsafePerformIO internally`）有多安全。

无论如何，使用`Control.Spoon`,`prop`可以通过以下方式重写：

```
prop x =
    printTestCase ("Failed for value " ++ show pureFailure) $ isNothing excFailure
  where
    pureFailure = failure (fromMaybe True . teaspoon)
    excFailure = failure id
    failure g = fmap fst $ find (g . not . snd) $ map (\n -> (n, f x n == n)) [10..20] 
```

将 find 谓词包裹起来`fromMaybe True . teaspoon`的效果是 find 返回满足谓词或抛出异常的第一个元素。

as`teaspoon`只能用于查看发生了异常，但不能用于查看异常，我 `excFailure`在这里使用，以便 QuickCheck 仍然可以看到异常。缺点是该发现需要进行两次评估。`teaspoon`仅评估为 WHNF，如果您需要深度评估来触发异常，请`spoon`改用。

`teaspoon`只捕获一些选择异常，这对我来说很好，因为我只关心未定义和不详尽的模式匹配。

# php - php中的实体类是什么

> ID：13711228
> 
> 赞同：10
> 
> 时间：2012-12-04T20:22:55.233
> 
> 标签：php, entity

我目前正在学习 MVC，因为它与 php 相关，我遇到了一个叫做实体类的东西，但我一生都找不到明确的解释和/或它的例子。

我认为它是一个类，它保存模型检索的数据库中的数据，然后将其传递给视图，但我有这种唠叨的感觉，我已经走了。

有人可以通过一个例子来解释它或指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T23:47:22.523

要扩展上述评论：

您的应用程序模拟了一个真实世界的场景，其中将包括许多*实体*。您提供的示例实体是管理员；此实体可能从更一般的 User 实体继承属性。

***那么，实体类***就是代表您的真实世界实体的简单类：

```
class User {}
class Administrator extends User {} 
```

实体类与普通类的区别仅在于其语义意义；一个`Controller`类可能不是实体类，因为它是应用程序框架的一部分，而不是代表现实世界的概念。

您的实体类如何交互可能与您的实际实体如何交互密切相关，因此实体类之间的关系（继承/关联）将反映您的实体关系图。

# linux - 有不同的 sudo 和 SFTP 密码？

> ID：13711237
> 
> 赞同：0
> 
> 时间：2012-12-04T20:23:33.373
> 
> 标签：linux, wordpress, passwords, sftp, sudo

我只是好奇是否有办法为同一个用户设置不同的 SFTP 和 sudo 密码。我在一个站点上使用 Wordpress，该站点在 wp-config.php 中以纯文本形式列出了 FTP 密码，以便插件能够正确安装（长话短说），如果该站点被黑客入侵，我不想只是说黑客的密码可以让他们获得root访问权限。

提前致谢

PS：uname -a 给出“Linux *DOMAIN* 2.6.32-220.el6.x86_64 #1 SMP Tue Dec 6 19:48:22 GMT 2011 x86_64 x86_64 x86_64 GNU/Linux”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:25:03.377

不，两者都只是使用存储在 /etc/shadow 中的帐户密码。如果您想要不同的密码，则必须使用不同的帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:36:21.167

如果可能（并且您没有使用共享主机，我假设您没有使用共享主机，因为您具有 root 访问权限），将“www-data”（或任何 Web 服务器运行方式）设置为 WordPress 上的文件安装，您应该能够使用其他方法（从 PHP 直接文件 I/O）而不是 FTP 进行更新

# android - Android WebView 显示黑屏

> ID：13711240
> 
> 赞同：1
> 
> 时间：2012-12-04T20:23:38.100
> 
> 标签：android, web-applications, browser, webview, default

我正在为 Android WebView 尝试这个示例：

[http://www.linuxtopia.org/online_books/android/devguide/guide/tutorials/views/hello-webview.html](http://www.linuxtopia.org/online_books/android/devguide/guide/tutorials/views/hello-webview.html)

但我没有得到我想要的，这是我的文件：

**MainActivity.java：**

```
import android.app.Activity;
import android.os.Bundle;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class MainActivity extends Activity {

   private WebView webview;

   /**
    * Called when the activity is first created.
    */
   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);
      webview = (WebView) findViewById(R.id.webview);
      webview.setWebViewClient(new WebClient());
      webview.getSettings().setJavaScriptEnabled(true);
      webview.loadUrl("http://www.google.com");
   }

   private class WebClient extends WebViewClient {

      @Override
      public boolean shouldOverrideUrlLoading(WebView view, String url) {
         view.loadUrl(url);
         return true;

      }
   }
} 
```

**主.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <WebView 
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
    />

</LinearLayout> 
```

**AndroidManifest.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.sheya"
          android:versionCode="1"
          android:versionName="1.0">
   <uses-permission android:name="android.permission.INTERNET" />
   <application android:label="@string/app_name" android:icon="@drawable/ic_launcher">
      <activity android:name="MainActivity"
                  android:label="@string/app_name">
         <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
         </intent-filter>
      </activity>
   </application>
</manifest> 
```

事实是，当我启动我的应用程序时，它会显示一个黑屏，但如果我删除

```
webview.setWebViewClient(new WebClient()); 
```

从应用程序代码行，它将谷歌页面打开到默认浏览器中......

**- 编辑 -**

解决了，在**main.xml**布局文件中：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" <!-- Instead of wrap_content -->
    android:layout_height="fill_parent" <!-- Instead of wrap_content -->
    android:orientation="vertical">

    <WebView 
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
    />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:36:59.813

如果你试试这个怎么样

```
@Override
  public boolean shouldOverrideUrlLoading(WebView view, String url) {
      return super.shouldOverrideUrlLoading(view, url);
 } 
```

# java - 我如何比较哈希集的元素？

> ID：13711242
> 
> 赞同：0
> 
> 时间：2012-12-04T20:23:37.693
> 
> 标签：java

```
HashSet<String> noDuplicate = new HashSet<String>();
for(int i=0;i<strings.length;i++)
{
     for(int a=0;a<strings2.length;a++)
     {
         if(noDuplicate.get(i).equals(strings2[a]))
             //blahblah code here
     }
} 
```

但是 get 不起作用，如果这是用于遍历哈希集元素的方法，我不确定如何使用迭代器。我想做类似的事情：

```
for(int i=0;i<strings.length;i++)
{
     for(int a=0;a<strings2.length;a=a+2)
     {
         if(node_marked_array.get(i).equals(strings2[a]))
             //blahblah code here
     }
} 
```

但由于重复值，我被告知要使用哈希集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:25:27.010

`Set`s 根据定义没有顺序，因此不能像数组或列表一样通过`get`方法索引。但是，您仍然可以`Set`使用[for-each](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)循环（或使用方法返回的迭代器`iterator()`）遍历 a 的元素。

例如，如果我有一个包含字符串的`Set`调用，并且：`set``"a"``"b"``"c"`

```
for (String s : set) {
    System.out.println(s);
} 
```

```
一个
b
C

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:25:30.590

改用`HashSet#contains`：

```
HashSet<String> noDuplicate = new HashSet<String>();
for(int i=0;i<strings.length;i++){
    for(int a=0;a<strings2.length;a++){
         if(noDuplicate.contains(strings2[a]))
         //blahblah code here
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-22T09:58:43.267

我想这会有所帮助

```
 Iterator iter=hm.keySet().iterator();
           while(iter.hasNext()){ 
              String key = (String)iter.next();
             if(key.equals(str)){
                  val1 = (String)hm.get(key);
               }
           } 
```

# actionscript-3 - 外部 swf 文件闪存

> ID：13711243
> 
> 赞同：-3
> 
> 时间：2012-12-04T20:23:58.810
> 
> 标签：actionscript-3, linker, flash, external

我正在尝试使用 swf 将页面链接在一起。我最初使用场景，但我听到 swf r 更好，所以我需要帮助。我有 swf 加载，但主菜单不会消失。我尝试使用`alpha=0;`，但它不好。

代码：

```
vid1_btn.addEventListener(MouseEvent.CLICK, nextPage);

//Create a function for the button click
function nextPage(ev:MouseEvent):void
{
var request:URLRequest = new URLRequest("page1.swf");
var loader:Loader = new Loader()
loader.load(request);
addChild(loader);

//this.background_mc.alpha = 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:57:16.737

首先，您的代码应该有点像这样：

```
function nextPage(ev:MouseEvent):void
{
var request:URLRequest = new URLRequest("page1.swf");
var loader:Loader = new Loader()
loader.load(request);
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, swfLoaded);

//this.background_mc.alpha = 0;
}
function swfLoaded(e:Event){
addChild(e.target.content); /* or e.target, i'm not sure*/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:48:53.690

你可以试试 addChildAt(loader, 0); 如果你的菜单只是在那里。

或者你可以通过 loader.y = 100; 来设置这个加载器下载。如果您的菜单位于屏幕顶部。

# c++ - 关于 C 和 C++ 之间公共标头的预处理器保护

> ID：13711249
> 
> 赞同：0
> 
> 时间：2012-12-04T20:24:20.853
> 
> 标签：c++, c, preprocessor-directive

我对 C 和 C++ 中的预处理器指令有疑问。

我有以下代码：

```
#ifdef __cplusplus
//part A
extern "C" 
{
// somecode here
}
#else
//part B
#endif 
```

我知道 c++ 编译器预定义了 __cplusplus 将 c 编译器没有。

而我把这组代码放到了ac头文件中，c++文件中就会包含这个c头文件。我的问题是：如果文件是由c++编译器编译的，它会编译A部分，如果它是由ac编译器编译的，它会编译B部分，但通常，我们使用这段代码来制作c++文件和c文件相互交互，如果我们上面有这样的代码，我的意思是我们同时拥有C和C++文件，并且我们使用gcc编译器，这段代码是如何编译的？只有A部分被编译？还是只编译 B 部分？还是代码分为两部分，A部分为C++编译，B部分同时为C文件编译？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:27:31.027

> 如果我们上面有这样的代码，我的意思是我们同时拥有 C 和 C++ 文件，并且我们使用 gcc 编译器，这段代码是如何编译的？只有A部分被编译？还是只编译 B 部分？

这取决于#includes 标头的翻译单元是如何编译的。如果编译为C++，则A部分生效；如果它被编译为 C，它将是 B 部分。

使用`gcc`，语言要么由文件扩展名确定，要么可以在命令行上显式指定：

> `-x language`
> 
> 明确指定以下输入文件的语言（而不是让编译器根据文件名后缀选择默认语言）。此选项适用于所有后续输入文件，直到下一个`-x`选项。
> 
> 语言的可能值为： c c-header c-cpp-output c++ c++-header c++-cpp-output Objective-c Objective-c-header Objective-c-cpp-output Objective-c++ Objective-c++-header Objective-c++ -cpp-输出汇编器 汇编器-with-cpp ada f77 f77-cpp-input f95 f95-cpp-input java

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T20:30:46.323

直接回答：只编译适合当前编译器调用的部分。

通常结构是

```
#ifdef __cplusplus
extern "C" {
#endif
/* Definitions here */
#ifdef __cplusplus
}
#endif 
```

在头文件中。因此，您可以获得两种语言的兼容定义。然后，实现文件将是纯 C 并存储在 .c 文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:53:49.443

在具有多个源文件的项目中，编译器不会只处理一次标头。

当编译器编译 C++ 文件时，它会读取该文件及其包含的任何头文件（直接或间接），并使用 C++ 规则处理这些文件的内容。

当编译器编译 C 文件时，它会读取该文件及其包含的任何头文件（直接或间接），并使用 C 规则处理这些文件的内容。

结果就像头文件中的代码分别出现在 C++ 源代码和 C 源代码中一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T20:37:44.540

从概念上讲，C++ 通过修饰标识符转换为 C 代码。这将影响链接。（事实上​​，这是过去的做法，如果我没记错的话，它是由*CFront*完成的。

所以有

```
#ifdef __cplusplus
   extern "C" {
#endif
   /* Definitions here */
#ifdef __cplusplus
}
#endif 
```

C 和 C++ 的定义相同。您不想要不同的（问题中的 A 和 B 部分），因为那很愚蠢。如果您将它用于 C 和 C++，那么您就是一样的。

该`extern "C"`位告诉 C++ 编译器确保链接是针对为 C 编译的目标代码 - 因此不要使用 C++ 魔术，从而确保链接能够正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T20:28:03.977

默认情况下，gcc 会将,`.C`和其他一些扩展识别为 C++ 和C。您可以在 make 文件中尝试更有趣的东西来强制它通过每种方式，但在简单的情况下，就这么简单。`.cpp``.cc``.c`

# opengl - (gl_FragCoord.z / gl_FragCoord.w) 代表什么？

> ID：13711252
> 
> 赞同：13
> 
> 时间：2012-12-04T20:24:25.440
> 
> 标签：opengl, glsl

我想要实际的世界空间距离，我从实验中得到感觉

`(gl_FragCoord.z / gl_FragCoord.w)`

世界空间的深度是多少？但我不太确定。

**编辑**我刚刚[找到了我最初找到这段代码的位置](http://www.ozone3d.net/tutorials/glsl_fog/p04.php)。显然这是相机的实际深度？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-05T20:10:31.673

这是（由同一个人）询问并[在其他地方回答](https://community.khronos.org/t/gl-fragcoord-z-gl-fragcoord-w-for-quick-depth-calculation-camera-to-fragment/68919/4)的。我在这里解释和修饰答案：

[如OpenGL 4.3 核心配置文件规范 (PDF)](https://www.khronos.org/registry/OpenGL/specs/gl/glspec43.core.pdf)的第 15.2.2 节所述，`gl_FragCoord.w`是`1 / clip.w`，`clip.w`剪辑空间位置的 W 分量在哪里（即：您写入的内容`gl_Position`）。

`gl_FragCoord.z`由以下过程生成，假设通常的变换：

1.  相机空间到剪辑空间的变换，通过顶点着色器中的投影矩阵乘法。`clip.z = (projectionMatrix * cameraPosition).z`
2.  转换为标准化的设备坐标。`ndc.z = clip.z / clip.w`
3.  [`glDepthRange`使用近/远值](https://www.khronos.org/opengl/wiki/GLAPI/glDepthRange)转换为窗口坐标。`win.z = ((dfar-dnear)/2) * ndc.z + (dfar+dnear)/2`.

现在，使用默认深度范围 near=0, far=1，我们可以`win.z`根据剪辑空间定义：`(clip.z/clip.w)/2 + 0.5`。如果我们然后将其除以`gl_FragCoord.w`，则相当于乘以`clip.w`，从而得到：

```
(gl_FragCoord.z / gl_FragCoord.w) = clip.z/2 + clip.w/2 = (clip.z + clip.w) / 2 
```

使用标准投影矩阵，`clip.z`表示从相机空间 Z 分量的比例和偏移量。比例和偏移由相机的近/远深度值定义。`clip.w`同样在标准投影矩阵中，只是相机空间 Z 的否定。因此，我们可以用这些术语重新定义我们的方程：

```
(gl_FragCoord.z / gl_FragCoord.w) = (A * cam.z + B -cam.z)/2 = (C * cam.z + D) 
```

其中`A`和`B`表示基于近/远的偏移和比例，以及`C = (A - 1)/2`和`D = B / 2`。

因此，*不是*`gl_FragCoord.z / gl_FragCoord.w`相机空间（或世界空间）到相机的距离。它也不是到相机的相机空间平面距离。但它*是*相机空间深度的线性变换。如果它们来自同一个投影矩阵等等，您可以使用它来比较两个深度值。

 **要实际计算相机空间 Z，您需要将相机靠近/远离矩阵传递（OpenGL[已经为您提供了范围 near/far](https://www.khronos.org/opengl/wiki/Built-in_Variable_(GLSL)#Shader_uniforms)）并从中计算这些值`A`和`B`值，或者您需要使用投影矩阵。或者，您可以自己直接使用投影矩阵，因为片段着色器可以使用与顶点着色器相同的制服。您可以直接从该矩阵中选择`A`和项。, 和.`B``A = projectionMatrix[2][2]``B = projectionMatrix[3][2]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T20:38:54.473

根据[文档](http://www.opengl.org/sdk/docs/manglsl/xhtml/gl_FragDepth.xml)：

```
Available only in the fragment language, gl_FragDepth is an output variable that
is used to establish the depth value for the current fragment. If depth buffering
is enabled and no shader writes to gl_FragDepth, then the fixed function value
for depth will be used (this value is contained in the z component of
gl_FragCoord) otherwise, the value written to gl_FragDepth is used. 
```

因此，除非您在着色器中的其他位置设置它，否则它看起来`gl_FragDepth`应该只是。`gl_FragCoord.z`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-18T14:32:43.973

作为

```
gl_FragCoord.w = 1.0 / gl_Position.w 
```

并且（可能）您的投影矩阵从 -z 获取 w（如果最后一列是 0,0,-1,0）然后；

```
float distanceToCamera = 1.0 / gl_FragCoord.w; 
```**

# ajax - 如何使用ajax调用发布函数数据和变量数据

> ID：13711259
> 
> 赞同：1
> 
> 时间：2012-12-04T20:24:40.260
> 
> 标签：ajax, jquery

我正在尝试将我的序列化排序数据发送到我的 PHP 脚本，但我需要在发布请求中添加另外两个变量。这是我正在使用的代码，但我似乎无法将附加数据添加到帖子的数据属性中。

其他两个变量是纯字符串。我看过，但无论我尝试什么，它似乎都搞砸了序列化的排序数据。我只需要发送：

```
 var album 
    var ID 
```

有请求，但似乎无法正确连接

```
$(function() {
        $('#refloader').hide();
        $( "#images" ).sortable({
                        stop:function(event, ui) {
                            $('#refloader').show();

                                $.ajax({
                                                type: "POST",
                                                url: "http://#######/sort.php",
                                                data:  $("#images").sortable("serialize", {attribute : "data-id"}),

                                                success : function(response)

                                                {
                                                    console.log (response)
                                                    $('#refloader').hide();
                                                    $("#ajaxresponse").append($(response));

                                                    }

                                              });
                                            }

        });

        $( "#images" ).disableSelection();
    }); 
```

当我使用：

```
 data:  $("#images").sortable("serialize", {attribute : "data-id"}), 
```

我回来了：

```
 Array ( [0] => 2213132022 [1] => 2213131911 [2] => 2213130084 [3] => 2213130956 [4] => 2213129315 [5] => 2213128885 [6] => 2213129567 
```

当我使用：

```
 data:  { image : $("#images").sortable("serialize", {attribute : "data-id"}) }, 
```

我回来了：

```
 image[]=2213129776&image[]=2213132022&image[]=2213131911&image[]=2213130084&image[]=2213130956&image[] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:33:41.150

尝试将此参数添加到您的 ajax

```
type: "POST",
traditional: true, 
```

您通常会将它们全部包装在一个对象中

```
data:  { 
 images: $("#images").sortable("serialize", {attribute : "data-id"}),
 album: album,
 ID: ID
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T00:08:42.857

我把它舔了一遍，并想我会把它贴出来以供后代使用。sortable 函数序列化为字符串。这就是分配给变量时函数中发生的变化。因此，使用 serialize 函数中的 toArray 方法会产生正确的结果。

谢谢您的帮助。

# google-apps-script - 为什么谷歌脚本编辑器在函数中的 100 行之后停止括号匹配，它会影响代码吗？

> ID：13711260
> 
> 赞同：5
> 
> 时间：2012-12-04T20:24:41.180
> 
> 标签：google-apps-script, google-apps-script-editor

在谷歌脚本编辑器中

函数 foo(){ 。. . // 超过 100 行。. }

点击 { 或 } 以红色突出显示

少于 100 行的都是绿色的。

它会影响代码还是只是让我们感到困惑。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T03:43:30.230

我自己尝试过，并在 Windows Vista 上使用 Chrome 重现了您的结果。括号匹配变为红色，在左大括号和右大括号之间正好有 100 个空白行。

非信徒可以尝试的步骤：

1.  在 Drive / Docs 中，为空白项目创建一个新脚本。
2.  从“myFunction()”的模板开始。将光标放在左大括号或右大括号旁边，观察大括号是否匹配绿色。
3.  现在在函数体中输入空行，直到右大括号位于第 101 行。
4.  将光标放在大括号旁边，观察它是红色的。
5.  删除一行，然后再次检查...现在它是绿色的。

因此，确认，paren 匹配停止，而不是因为代码格式错误。为什么？好吧，我的猜测是需要*一些*限制，而 100 是一个不错的整数。

编辑：Paren aka 括号、方括号或大括号。

它会影响您的代码吗？不——在保存操作期间，代码解析正确。（如果没有，你会得到一些可能会或可能不会帮助你找出错误的错误。）

但是为什么不把 100 行的限制作为一个提示，然后重构你的代码呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-13T21:02:11.893

它不会影响正在运行的代码，请参阅问题跟踪器中的问题 2237：

[在函数定义中终止大括号不会变绿](https://code.google.com/p/google-apps-script-issues/issues/detail?can=1&q=2237&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner&id=2237)

# php - php上传浏览文件后自动提交

> ID：13711264
> 
> 赞同：1
> 
> 时间：2012-12-04T20:24:53.227
> 
> 标签：php, javascript, html

我想制作一个简单的网站，让您可以浏览 mp3 并自动上传。

这是我的代码

```
<?php

if(isset($_POST['submit'])){
$file = $_FILES['mp3']['name'];
$tmp = $_FILES['mp3']['tmp_name'];
echo "$file";
move_uploaded_file($tmp, "member/mp3/".$file);
echo"Success";

}
    ?>

    <html>

<form enctype="multipart/form-data" method="POST" action="upload.php">

<input type="file" name="mp3" /><br />
<input type="submit" name="submit" value="Upload" />
</form>

 </html> 
```

这里的代码是我最初的尝试，但这仍然使用手动表单。

如何自动进行此上传？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:33:47.377

也许使用这样的东西：

```
<input type="file" name="mp3" onchange="this.form.submit();" /> 
```

尽管我不容忍内联事件处理程序，但这只是一个示例，以确保它适合您。关键是要捕获输入的`onchange`事件，`file`然后提交它的表单。而不是使用`this.form`或其他方式，您可以`form`通过 ID 获取（在给它之后）并调用`submit()`它。

**更新：**

为了让你现有的 PHP 代码保持工作，给你的提交按钮一个`id`属性（不是“提交”）并尝试使用这个：

```
<input type="file" name="mp3" onchange="document.getElementById('submit_button_id').click();" /> 
```

同样，如果您将其设为函数调用，这可能更易于维护/可读，例如：

```
<input type="file" name="mp3" onchange="submitForm();" />
<input type="submit" name="submit" id="submit_button_id" value="Upload" />

<script type="text/javascript">
    function submitForm() {
        // However you need to submit the form

        document.getElementById("submit_button_id").click(); // Or whatever
    }
</script> 
```

如果您想更改 PHP，可以使用原始的`this.form.submit();`（或`.submit()`以任何方式仅在表单元素上使用）。在 PHP 中，您真正关心的是检查是否`$_FILES['mp3']`已设置，因此是否需要检查提交按钮的存在取决于您。我完全忘记了它是如何`isset()`工作的，所以我不想假设并告诉你有什么问题。您可能可以使用其他逻辑，但您真正关心的是文件是否在提交中发送，即使如果您确保使用按钮提交它可能会使它“更好”（尽管不是必需的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:36:01.490

很简单，给它附加一个`onchange()`JS 事件。

```
<input type="file" name="mp3" onchange="call .submit() on a form"/><br /> 
```

这将在用户选择文件时提交表单。在 Jquery 或单独的 JS 脚本中创建这些处理程序更安全、更高效。但是对于这个例子来说，这并不重要。

有关更多信息，请查看此问题：[HTML <input type='file'> 文件选择事件](https://stackoverflow.com/questions/3528359/html-input-type-file-file-selection-event)

# database - Rails 3 - 列出当前用户还不是成员的组

> ID：13711266
> 
> 赞同：0
> 
> 时间：2012-12-04T20:24:57.900
> 
> 标签：database, ruby-on-rails-3, postgresql, activerecord

我正在将应用程序从 php 转换为 rails，并且我仍在学习有关 rails 和 AR 的方法。

**简单地说**：我想列出当前用户还不是成员的组。

**失败的方法**：

1.  `Cause.select('causes.*').joins(:users).group('causes.id').where("cause_user_memberships.user_id NOT IN (?)", current_user.id)`

2.  `Cause.select('causes.*').joins(:users).group('causes.id').where("cause_user_memberships.user_id NOT IN (SELECT cause_user_memberships.cause_id FROM cause_user_memberships WHERE cause_user_memberships.user_id =(?))", current_user.id)`

3.  还有很多...

谢谢你的帮助！

# 关于模型的一些信息

**用户.rb（片段）**

```
has_many :cause_user_memberships
has_many :causes, :through => :cause_user_memberships 
```

**原因.rb**

```
attr_accessible :title, :location, :description,...
has_many :cause_user_memberships
has_many :users, :through => :cause_user_memberships 
```

**Cause_User_Membership.rb**（<--可能不是我最好的模型名称）

```
 # == Schema Information
#
# Table name: cause_user_memberships
#
#  id         :integer          not null, primary key
#  user_id    :integer          not null
#  cause_id   :integer          not null
#  created_at :datetime         not null
#  updated_at :datetime         not null
#

class CauseUserMembership < ActiveRecord::Base
  attr_accessible :cause_id, :user_id

  belongs_to :user 
  belongs_to :cause, :counter_cache => :users_count 
      accepts_nested_attributes_for :cause
      validates_uniqueness_of :user_id, :scope =>[:cause_id]

end 
```

# 更新：跟进

Derp，你说得对，它奏效了！谢谢！

**小跟进**，查询时间似乎很长。这是否表明有问题？我在每个表中只有不到 20 条记录。（以下是 2 个查询结果，一个包含我打算使用的地理编码器 gem，另一个不包含。如果有点乱，请见谅。）

**在 Rails 控制台中：**

```
Cause Load (1003.0ms)  SELECT "causes".* FROM "causes" LEFT JOIN cause_user_memberships ON cause_user_memberships.cause_id = causes.id AND cause_user_memberships.user_id = 1 WHERE (cause_user_memberships.id IS NULL)

EXPLAIN (34.3ms)  EXPLAIN SELECT "causes".* FROM "causes" LEFT JOIN cause_user_memberships ON cause_user_memberships.cause_id = causes.id AND cause_user_memberships.user_id = 1 WHERE (cause_user_memberships.id IS NULL) 
```

**查询计划**

```
 Hash Right Join  (cost=10.45..37.99 rows=1 width=3168)
   Hash Cond: (cause_user_memberships.cause_id = causes.id)
   Filter: (cause_user_memberships.id IS NULL)
   ->  Seq Scan on cause_user_memberships  (cost=0.00..27.50 rows=7 width=8)
         Filter: (user_id = 1)
   ->  Hash  (cost=10.20..10.20 rows=20 width=3168)
         ->  Seq Scan on causes  (cost=0.00..10.20 rows=20 width=3168)
(7 rows) 
```

**在本地主机上使用地理编码器：**

```
User Load (18.0ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Cause Load (49.6ms)  SELECT causes.*, 3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((40.714269 - causes.lat) * PI() / 180 / 2), 2) + COS(40.714269 * PI() / 180) * COS(causes.lat * PI() / 180) * POWER(SIN((-74.005972 - causes.lng) * PI() / 180 / 2), 2))) AS distance, CAST(DEGREES(ATAN2( RADIANS(causes.lng - -74.005972), RADIANS(causes.lat - 40.714269))) + 360 AS decimal) % 360 AS bearing FROM "causes" LEFT JOIN cause_user_memberships 
 ON cause_user_memberships.cause_id = causes.id 
 AND cause_user_memberships.user_id = 1 WHERE (causes.lat BETWEEN 36.37231550667456 AND 45.05622249332544 AND causes.lng BETWEEN -79.73435509229111 AND -68.27758890770889 AND 3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((40.714269 - causes.lat) * PI() / 180 / 2), 2) + COS(40.714269 * PI() / 180) * COS(causes.lat * PI() / 180) * POWER(SIN((-74.005972 - causes.lng) * PI() / 180 / 2), 2))) <= 300) AND (cause_user_memberships.id IS NULL) ORDER BY distance ASC 
```

`Completed 200 OK in 1068ms (Views: 49.1ms | ActiveRecord: 791.4ms)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:41:43.730

在 Rails 中，该`joins(:symbol)`语句变成了不适合查找不存在的关系的内部连接。您可以手动编写连接以使其成为左连接：

```
Cause.joins("""
  LEFT JOIN cause_user_memberships 
  ON cause_user_memberships.cause_id = causes.id 
  AND cause_user_memberships.user_id = #{current_user.id}
""").where("cause_user_memberships.id IS NULL") 
```

**更新**

内部连接将阻止创建一组没有到给定用户的映射的原因。例如：

```
Causes
id | name
============
1  | Cause 1
2  | Cause 2

Users
id | name
============
1  | User 1

Cause User Memberships
id | user_id | cause_id
=======================
1  | 1       | 1

SELECT *
FROM causes
INNER JOIN cause_user_memberships
ON cause_user_memberships.cause_id = causes.id
AND cause_user_memberships.user_id = 1 
```

将返回

```
causes.id | causes.name | cause_user_memberships.id | cause_user_memberships.user_id | cause_user_memberships.cause_id
===========================================================================================================================
1         | Cause 1     | 1                         | 1                              | 1 
```

为了找出用户不属于的原因，您无法再执行任何逻辑。

```
SELECT *
FROM causes
LEFT JOIN cause_user_memberships
ON cause_user_memberships.cause_id = cause.id
AND cause_user_memberships.user_id = 1 
```

将返回

```
causes.id | causes.name | cause_user_memberships.id | cause_user_memberships.user_id | cause_user_memberships.cause_id
===========================================================================================================================
1         | Cause 1     | 1                         | 1                              | 1
2         | Cause 2     | null                      | null                           | null 
```

在这种情况下，无论是否匹配表中的记录，所有原因都将获得一行`cause_user_memberships`。现在您可以应用附加条件来梳理出用户不属于的原因（其中 cause_user_membership.id 为空）。

# ajax - 如何在不重新加载页面的情况下将任意 JSON 发送到 node.js？

> ID：13711271
> 
> 赞同：7
> 
> 时间：2012-12-04T20:25:03.083
> 
> 标签：ajax, node.js, jquery, express

我的最终目标是在单击按钮时向 node.js 发送任意 JSON。我目前只知道如何从表单发送输入。这是我放在一起发送表单信息的一些代码：

```
function postForm() {
  $('form').submit(function(e) {
    e.preventDefault(); // no page reload
    $.post(
      $(this).attr('action'),
      $(this).serialize(),
      function(data) { console.log('Code for handling response here.') },
     'json'
    );
  });
} 
```

HTML 的外观如下：

```
<form action='/send' method='post'>
  <input name= "foo" type="radio" value=1>
  <input type="submit" value="Submit">
</form> 
```

相关的 express/node.js 代码如下所示：

```
app.post('/send', function(request, response) {
  fs.appendFile('test.txt', JSON.stringify(request.body) + '\n', function(e) {
    if(e) throw e;
    console.log(request.body);
  });
}); 
```

但是，我不知道如何调整此示例以使用不是来自表单输入的数据。为了提供上下文，我正在构建一个基于 Web 的用户研究，并且我想将收集到的有关用户的各种信息发送到 node.js。我已经尝试了表单提交的各种变体，但我的尝试都没有成功。我的印象是我可以换成`$(this).serialize()`客户可以访问的任何其他数据，但我无法让这种思路发挥作用。我还尝试更改许多示例中的一些`.ajax()`示例，但这些示例总是重定向页面，这是不可取的，因为如果页面刷新，我的研究将丢失用户状态信息。

我已经完成了大量的客户端和服务器端编程，但我对 ajax 的工作原理几乎一无所知，这证明解决这个问题相当有问题！而且也很愚蠢，因为很多时候，这就是将两者粘合在一起的原因:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T20:39:26.940

由于您使用的是 jQuery，因此发送数据很简单——[`$.post(url, data)`](http://www.jqapi.com/#p=jQuery.post)从按钮的`click`处理程序调用：

```
$('#somebutton').click(function() {
    var data = { key: 'value', ... };
    $.post('/send', data, function(res) {
        // success callback
    });
}); 
```

浏览器将使用*数据*参数的 URL 编码序列化`POST`url *。*

 *```
POST /send HTTP/1.1
Content-Type: application/x-www-form-urlencoded
...

key=value&... 
```

哪个 Express'`bodyParser`不会有任何问题。或者，您可以告诉 jQuery 发送*数据*的 JSON 序列化：

```
$.post('/send', data, function(res) {}, 'json'); 
```

在您的情况下，jQuery 如何传输数据（URL 编码或 JSON）并不重要，因为会`bodyParser`自动反序列化这两种格式。*

# html - 在 twitter bootstrap 中为嵌套的 div 设置边框

> ID：13711276
> 
> 赞同：-1
> 
> 时间：2012-12-04T20:25:49.503
> 
> 标签：html, css, twitter-bootstrap

我有这样的布局：

```
<div class="container">
  <div class="row">
    <div class="span9">
    span 9
       <div class="row">
           <div class="span5">
           span5 
           </div>
           <div class="span4">
           span4
           </div>
       </div>
    </div>
    <div class="span3">
    span 3
    </div>
  </div>
</div>
<style>
.span9
{
border:1px solid black;
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
box-sizing: border-box;
}
</style> 
```

如何为 span9 设置边框？

**box-size**固定 span3 位置，但 span4 和 span5 位置中断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T02:46:06.280

The `border` property will add to the width of the element you apply it to. Generally, I find that it's problematic to add this to any of the grid elements (ie. .container, .row or .span(x)). Instead, I add an additional container inside to apply the style(s) to. For example:

```
<div class="container">
    <div class="row">
        <div class="span9">
            <div class="addBorder">
                <div class="row">
                    <div class="span5">
                        span5 
                    </div>
                    <div class="span4">
                        span4
                    </div>
                </div>              
            </div>
        </div>
        <div class="span3">
            span 3
        </div>
    </div>
</div>

.addBorder {
    border: 1px solid black;
} 
```

Alternatively, if you must add it to the span, you just need to add -fluid to the row selector.

```
<div class="container">
    <div class="row-fluid">
        <div class="span9">
            span 9
            <div class="row">
                <div class="span5">
                    span5 
                </div>
                <div class="span4">
                    span4
                </div>
            </div>
        </div>
        <div class="span3">
            span 3
        </div>
    </div>
</div>

.span9 {
    border: 1px solid black;
} 
```

# python - 流程图设计

> ID：13711278
> 
> 赞同：-2
> 
> 时间：2012-12-04T20:25:58.120
> 
> 标签：python, flowchart

我需要帮助设计有关程序的流程图，该程序从 main 中的用户获取字符串，然后创建一个函数，该函数将字符串作为参数并返回字符串中元素（数组中的所有元素）的总和。它通过显示字符串和系列的长度在 main 中显示结果。如果有人可以帮助我开始，我将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:32:32.523

好吧，流程图是独立于语言的，所以不需要用 python 标记它。更重要的是，它们在本质上往往是非常必要的，因此 Python 的一些更具表现力的特性可能会被您拒绝。

你确定这是你需要的流程图，还是只是一个算法？

如果是流程图，请执行此操作。想象一下，您正在手动执行此操作。您需要采取哪些步骤来完成此任务？不用担心语言特性，用通俗易懂的语言想象一下你需要的各种步骤和信息。一旦你有了它，然后你把它放在图表的形式。

流程图有一些您需要熟悉的符号；否则，它们非常直观。这是一个帮助您入门的 Wiki： [http ://en.wikipedia.org/wiki/Flowchart](http://en.wikipedia.org/wiki/Flowchart)

# c# - 如何使用 LinqToExcel 获取没有标题的单元格值

> ID：13711280
> 
> 赞同：2
> 
> 时间：2012-12-04T20:26:10.423
> 
> 标签：c#, .net, linq

我有这样的excel...

|------------**表格**----------------|
|-------------------------------------------------|
| **姓名**-------- **姓氏**----|
| 鲍勃 ---------- 价值 ------------|
| **年龄** -----------------|
| 30 -------------------------------|
|---------**地址**-------------|
|-------------------------------------------------|
| **街道**------- **邮政编码**--|
| 价值 ---------- 价值 ----------|

..等等，就像一个注册表单，你可以看到我需要得到的值，在下一行（在标题下）。

如何使用 LinqToExcel.dll 做到这一点。如果我的工作表中有一个 CheckBox，我怎样才能获得选定的值（选中与否）。

我的代码（c#.net）

```
var rows = from c in excel.WorksheetNoHeader(sheetName)
           select c;

foreach (var item in rows)
{
   string aux = item[0].Value.ToString();
} 
```

泰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T23:56:50.990

好吧，据我所知，您的 excel 文件应该看起来像这样

![在此处输入图像描述](../Images/eb98614d64dbdf62601cd3401e95e7cc.png)

我实现了一些代码来读取这条记录，但我认为它应该不止一个。如您所见，我正在迭代行集并避免奇数行假设它们是标题。

我希望这对你有用！

```
namespace Demo.Stackoverflow
{
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using LinqToExcel;

    public class Person
    {
        public string Name { get; set; }
        public string LastName { get; set; }
        public int Age { get; set; }
    }

    class Program
    {
        static void Main(string[] args)
        {
            LoadExcel();
            Console.ReadLine();
        }

        private static void LoadExcel()
        {
            var directorio = System.IO.Path.Combine(System.IO.Directory.GetCurrentDirectory(), "Book.xls");
            var book = new ExcelQueryFactory(directorio);

            var rows = from c in book.WorksheetNoHeader()
                       select c;
            List<Person> people = new List<Person>();

            int i = 1;
            foreach (var row in rows)
            {
                if (i % 2 == 0)
                {
                    if (people.Count != 0 && people.Last().Age == 0)
                    {
                        people.Last().Age = Convert.ToInt32(row[0].Value.ToString());
                    }
                    else
                    {
                        Person per = new Person()
                        {
                            Name = row[0].Value.ToString(),
                            LastName = row[1].Value.ToString()
                        };
                        people.Add(per);
                    }
                }
                i++;
            }
        }
    }
} 
```

# ruby-on-rails - 如果条件为真，我该如何分配条件（查询），或者如果条件为假，如何进行另一项分配？

> ID：13711283
> 
> 赞同：0
> 
> 时间：2012-12-04T20:26:22.240
> 
> 标签：ruby-on-rails, ruby

我怎样才能避免打字

```
TypeOfVoyagePortActivity.find_by_description(activity_description) 
```

两次？

这是我在其中使用它的上下文：

```
 if TypeOfVoyagePortActivity.find_by_description(activity_description)
   pl.activity = TypeOfVoyagePortActivity.find_by_description(activity_description)
 else
   pl.activity = TypeOfVoyagePortActivity.find_by_description("Custom") 
 end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T20:28:01.713

```
model = TypeOfVoyagePortActivity
pl.activity = model.find_by_description(activity_description) ||
  model.find_by_description("Custom") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:27:34.833

您可以将结果分配给`find_by_description`变量

```
 if t = TypeOfVoyagePortActivity.find_by_description(activity_description)
   pl.activity = t
 else
   pl.activity = TypeOfVoyagePortActivity.find_by_description("Custom") 
 end 
```

或者作为更好的选择：

```
p1.activity = [activity_description, "Custom"].each_with_object(nil) do |a, memo|
  memo ||= TypeOfVoyagePortActivity.find_by_description(a)
end 
```

# c# - %AllUsersProfile%(%PROGRAMDATA%) 给出重复的文件路径

> ID：13711284
> 
> 赞同：2
> 
> 时间：2012-12-04T20:26:26.077
> 
> 标签：c#, .net, filepath, path-variables

我有一个用 C# 编写的应用程序，我正在寻求将一些信息写入隐藏的 ProgramData，以便从应用程序的前端和后端访问相同的连接字符串。

我正在使用路径变量访问目录，如下所示：

```
private bool ProgramDataWriteFile(string contentToWrite)
        {
            try
            {

                string strProgramDataPath = "%PROGRAMDATA%";
                string directoryPath = Environment.ExpandEnvironmentVariables(strProgramDataPath) + "\\MyApp\\";
                string path = Environment.ExpandEnvironmentVariables(strProgramDataPath)+"\\MyApp\\ConnectionInfo.txt";

                if (Directory.Exists(directoryPath))
                {
                    System.IO.StreamWriter file = new System.IO.StreamWriter(path);
                    file.Write(contentToWrite);
                    file.Close();
                }
                else
                {
                    Directory.CreateDirectory(directoryPath);
                    System.IO.StreamWriter file = new System.IO.StreamWriter(path);
                    file.Write(contentToWrite);
                    file.Close();
                }

                return true;
            }
            catch (Exception e)
            {
            }
            return false;
        } 
```

这似乎工作正常。但是，我的问题是，当我使用此路径变量时：`%AllUsersProfile%(%PROGRAMDATA%)` 相反，它扩展为非法（和冗余）文件路径：`C:\ProgramData(C:\ProgramData)\` 但是，我认为后一个路径变量是正确的全名。我只是使用不正确吗？我需要确保所有用户都可以访问此连接信息，仅使用`%PROGRAMDATA%`允许吗？我正在使用 Windows 7，以防万一。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T20:32:49.680

从[这里](https://techcommunity.microsoft.com/t5/windows-blog-archive/where-should-i-write-program-data-instead-of-program-files/ba-p/228513)：

> FOLDERID_ProgramData / System.Environment.SpecialFolder.CommonApplicationData
> 
> 用户永远不想在资源管理器中浏览此处，并且此处更改的设置会影响计算机上的每个用户。默认位置是 %systemdrive%\ProgramData，它是 Windows Vista 安装上的隐藏文件夹。您需要在安装时创建目录并设置所需的 ACL。

因此，只需使用`%PROGRAMDATA%`，或者更好的是：

```
Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData) 
```

# android - 批量 http 请求的异步任务

> ID：13711285
> 
> 赞同：-3
> 
> 时间：2012-12-04T20:26:28.837
> 
> 标签：android, android-asynctask, xmlhttprequest

我需要发出一批 HTTP 请求并将响应一个`ListView`一个地提供给一个。我正在使用异步任务并`for`在方法中运行请求循环`doBackgroundProcess`。这是一个正确的方法吗？如果没有，请指导我采取最佳做法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:44:32.090

目前尚不*清楚*您要做什么。如果您正在执行以下操作：

1.  收集一组 HTTP 请求
2.  送他们。
3.  取回结果。
4.  发布到支持列表视图的适配器
5.  等待用户发起下一组 HTTP 请求

那么我建议你研究一下 IntentService。如果您的 Activity 出于任何原因进入后台，AsyncTask 将停止，但 IntentService 会继续，直到它完成所有工作。

我什至建议您将 HTTP 结果保存在内容提供商中。最好保留需要很长时间才能检索的数据。您的用户会因此而喜欢您！如果您已经拥有数据，您也可以在失去连接时停止，然后从中断的地方重新开始。如果一开始连接不可用，您可以向用户显示最近的结果。

请记住，网络并不总是可用的。

# php - mysql错误1066

> ID：13711291
> 
> 赞同：-2
> 
> 时间：2012-12-04T20:26:54.140
> 
> 标签：php, mysql, mysql-error-1066

```
$id=$_GET["id"];
$query= "
SELECT
blomster_produkter.blomster_produkt_id,
blomster_produkter.blomster_produkt_navn,
blomster_produkter.blomster_produkt_pris
FROM
blomster_produkter
INNER JOIN blomster_produkter ON 
blomster_produkter.FK_blomster_produkt_id=blomster_produkter.blomster_produkt_navn     
blomster_produkter.FK_blomster_produkt_id=blomster_produkter.blomster_produkt_pris
blomster_produkter.FK_blomster_produkt_id=blomster_produkter.blomster_produkt_id
WHERE FK_blomster_kategori_id=$id"; 
```

为什么这会给我一个 mysql 错误 1066？

（如果我遗漏了一些重要的东西，也很抱歉，这是我在stackoverflow上提出的第一个问题）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T20:29:18.253

0.1 秒的谷歌搜索：“mysql 错误 1066” - 不是唯一的表名/别名

```
 FROM
    blomster_produkter   <--table #1
    INNER JOIN blomster_produkter ON   <-table #2 
```

如果不使用别名，您不能将表连接到自身，或在连接中重新使用相同的表名：

```
FROM blomster_produkter
INNER JOIN blomster_produkter AS someothername ON
                             ^^^^^^^^^^^^^^^^^--- the alias 
```

然后在连接条件中根据需要更改表引用。

另外，请注意，您对[sql 注入攻击持](http://bobby-tables.com)开放态度。享受您的服务器 pwn3d。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:31:26.713

错误 1066 是“不是唯一的表/别名”

这是因为您在不创建别名的情况下将自己加入一个表，您必须使用如下别名：

```
SELECT
    bp1.blomster_produkt_id,
    bp1.blomster_produkt_navn,
    bp1.blomster_produkt_pris
    FROM
    blomster_produkter bp1
    INNER JOIN blomster_produkter bp2 ON
    bp1.FK_blomster_produkt_id=bp2.blomster_produkt_navn [...] 
```

# ruby-on-rails-3 - 使用acts_as_follower 创建提要

> ID：13711292
> 
> 赞同：2
> 
> 时间：2012-12-04T20:27:12.523
> 
> 标签：ruby-on-rails-3

我有三个模型

```
class Place < ActiveRecord::Base
    acts_as_followable
    has_many :events
end

class Event < ActiveRecord::Base
    attr_accessible :startdate
    acts_as_followable
    belongs_to :place
    belongs_to :user
end

class User < ActiveRecord::Base
    acts_as_followable
    acts_as_follower
    has_many :events
end 
```

我需要做两件事：

*   为关注的地点或用户获取同质排序的事件列表
*   为关注的地点、用户和事件获取同质排序的事件列表，没有重复

所以例如

`User.find(1).following_places.includes(:events).collect{|p| p.events}.flatten.sort{|a,b| a.startdate <=> b.startdate}`

应该返回用户关注的所有地点的事件列表，按日期排序。如果我理解正确的话，这个问题是收集、展平和排序发生在 ruby​​ 而不是 SQL 中。

第二部分应该如下所示，理想情况下也完全出现在 SQL 中：

```
user = User.find(1)
(user..following_places.includes(:events).collect{|p| p.events}.flatten +
user.following_users.includes(:events).collect{|p| p.events}.flatten +
user.following_events).sort{|a,b| a.startdate <=> b.startdate} 
```

[这个答案](https://stackoverflow.com/a/7921682/394184)很接近，但不是我想要的。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:09:19.980

您是否尝试过使用订单？

```
User.find(1).following_places.includes(:events).order('events.startdate ASC') 
```

# oracle - Oracle XMLDB 注册 XML 模式

> ID：13711294
> 
> 赞同：1
> 
> 时间：2012-12-04T20:27:27.017
> 
> 标签：oracle, xsd

您好，我对 Oracle XMLDB Express Edition 10g 有疑问。
我正在尝试通过
dbms_xmlschema.registerSchema 注册一个完全有效且正常工作的 .xsd 架构，
但不断收到 ORA-01741：非法零长度标识符
我已经尝试了一切：对我的 xsd 和查询代码进行了三次检查。
Oracle 论坛上有几个主题，但没有答案。
请帮忙。
这是我的代码：

```
 begin
dbms_xmlschema.registerSchema(
 'opta',  
 '<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://www.example.org/opta/" targetNamespace="http://www.example.org/opta/">
    <xs:element name="Document">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="Order" type="tns:Order" minOccurs="0" maxOccurs="unbounded"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
    <xs:complexType name="Order">
        <xs:sequence>
            <xs:element name="Products" minOccurs="1" maxOccurs="unbounded">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element name="Product" type="tns:Product" minOccurs="1" maxOccurs="unbounded"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
            <xs:element name="Date" type="xs:date" minOccurs="1"/>
            <xs:element name="Client" type="tns:Client" minOccurs="1"/>
        </xs:sequence>
        <xs:attribute name="id" type="xs:int"/>
    </xs:complexType>
    <xs:complexType name="Product">
        <xs:sequence>
            <xs:element name="Name" type="xs:string"/>
            <xs:element name="Price" type="xs:int"/>
            <xs:element name="Amount" type="xs:int"/>
            <xs:element name="Producer" type="tns:Producer"/>
            <xs:element name="Type" type="xs:string"/>
        </xs:sequence>
        <xs:attribute name="id" type="xs:int"/>
    </xs:complexType>
    <xs:complexType name="Producer">
        <xs:sequence>
            <xs:element name="Name" type="xs:string"/>
            <xs:element name="Organization" type="xs:string"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="Client">
        <xs:sequence>
            <xs:element name="Name" type="xs:string"/>
            <xs:element name="Organization" type="xs:string"/>
            <xs:element name="Country" type="xs:string"/>
            <xs:element name="City" type="xs:string"/>
            <xs:element name="Address" type="xs:string"/>
        </xs:sequence>
    </xs:complexType>
</xs:schema>

');
end; 
```

# ios - Textview中的iOS自动更正

> ID：13711299
> 
> 赞同：0
> 
> 时间：2012-12-04T20:27:39.827
> 
> 标签：ios, mobile, textview

在 Apple 的 Messages 应用程序中，如果您打错了字，就会出现小的更正气泡。在您点击空格之前，此气泡让您知道任何进一步的活动（空格键或提交按钮）而不消除气泡将导致自动更正。

我的应用程序中有一个文本提交表单 - 但在我的应用程序中，当用户尝试在自动更正气泡出现时提交 textview 时，textview 不会进行自动更正。如何让它进行自动更正然后提交？

自动更正气泡的屏幕截图。 [http://imgur.com/tLyJn](http://imgur.com/tLyJn)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:33:10.310

`[self.view endEditing:YES]`当您“提交”文本视图时，您需要调用`self`包含文本视图的视图控制器。

调用`endEditing:`将确保发生正确的事件链，从而正确更新文本视图的文本。这就是我在我的应用程序中所做的。

# android - Android：在较低分辨率屏幕 (ldpi) 中查看被截断

> ID：13711301
> 
> 赞同：0
> 
> 时间：2012-12-04T20:27:43.827
> 
> 标签：android, fragment, dpi

我正在实施我的观点，并一直在使用 xdpi hdpi 和 tvdpi mdpi 进行测试，它们看起来都很好。但是，在 ldpi 设备中进行快速测试，我的部分观点似乎被截断了。这是为什么？我的内容被水平截断（右侧部分被截断）和垂直截断（内容似乎离开了屏幕底部，没有任何滚动条可供我滚动）。

我的视图通过支持库使用片段。底部被截断的片段如下：

```
<TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/event_title"
        android:id="@+id/textView1"
        android:layout_gravity="left|center_vertical"
        android:textSize="18sp"
        android:textColor="#20b2aa"/>

<EditText
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="@string/event_title"
        android:id="@+id/new_event_title"
        android:textColor="#000000"
        android:textSize="26sp"
        android:shadowColor="#20b2aa"
        android:singleLine="true"
        android:background="@drawable/edit_text_custom"
        android:textCursorDrawable="@null"/>

<TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/suggested_times"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:textColor="#20b2aa"
        android:textSize="18sp"
        android:id="@+id/textView3"
        android:layout_gravity="left|center_vertical"
        android:layout_marginTop="20dp"/>

<RelativeLayout
        android:id="@+id/date_selection"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#000000"
        android:textSize="30sp"
        android:layout_gravity="center|left">

    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/suggestion"
            android:id="@+id/textView"
            android:textSize="16sp"
            android:layout_gravity="right|center_vertical"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"/>

    <ImageButton
            android:layout_width="64dp"
            android:layout_height="66dp"
            android:id="@+id/add_suggested_time_btn"
            android:layout_alignParentRight="true"
            android:background="@drawable/social_person"
           android:src="@drawable/social_person"
            android:contentDescription="Suggest a time"/>

</RelativeLayout>

<TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/invitees"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:textColor="#20b2aa"
        android:textSize="18sp"
        android:layout_marginTop="20dp"/>
<RelativeLayout
        android:id="@+id/invitee_selection"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom">

    <ImageButton
            android:layout_width="64dp"
            android:layout_height="64dp"
            android:id="@+id/add_invitee_btn"
            android:layout_alignParentRight="true"
            android:layout_alignBottom="@+id/textView"
            android:background="@drawable/social_add_person"
            android:contentDescription="Suggest a time"/>
</RelativeLayout>

<!-------------- CONTENT FROM HERE ON ARE OFF THE SCREEN ------------------------>
<TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/description"
        android:id="@+id/textView2"
        android:layout_gravity="left|center_vertical"
        android:textSize="18sp"
        android:layout_marginTop="20dp"
        android:textColor="#20b2aa"/>

<EditText
        android:textColor="#000000"
        android:textSize="26sp"
        android:background="@drawable/edit_text_custom"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="@string/description"
        android:id="@+id/description"
        android:layout_gravity="center"
        android:layout_marginTop="5dp"
        android:textCursorDrawable="@null"
        /> 
```

上面的片段被添加到下面的容器里面`fragment_container`：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
        android:background="@drawable/background_image">

<FrameLayout
        android:id="@+id/fragment_container"
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:layout_weight="1" />
</LinearLayout> 
```

# android - 单击时如何关闭对话框？

> ID：13711304
> 
> 赞同：-2
> 
> 时间：2012-12-04T20:27:47.880
> 
> 标签：android, dialog, onclick, click

我的活动中有一个对话框，我想通过单击它来关闭它（除了单击其他任何地方，这是执行此操作的正常方法）。

我该如何做到这一点？我的对话框 XML 只包含一个 imageview ！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:50:32.723

由于 ImageView 源自 View，因此您可以设置一个`View.OnClickListener`调用对话框方法的`dismiss()`方法。

# jquery - 仅显示选定的行 jqGrid

> ID：13711306
> 
> 赞同：1
> 
> 时间：2012-12-04T20:27:54.373
> 
> 标签：jquery, jqgrid

我有一个 jqGrid，它有服务器端数据，有 10 万行。我使用 jqGrids native `multiselect = true`，然后在各种 jqgrid 事件上推送/拼接选定行的 id ......所有这些都很完美。我想更进一步，并有一个“查看所选”选项，用户可以选择该选项将以编程方式创建一个过滤器，以仅显示在我的所选行数组中包含 id 的行。

因此，如果用户在选择“查看已选择”选项时选择了 10,000 行中的 125 行，我将创建一个过滤器以仅显示在我的所选行数组中具有 id 的 125 行。

尝试了几种方法来显示选择而不过滤，通过隐藏行但遇到了用户在第 57 页上选择行的问题......然后他们选择“查看所选”，然后查看所选内容的唯一方法是导航到页面57\.

`dataformat=json`尝试在和...之间切换，`dataformat=local`但这让我对 jqGrid 代码中的 sType 过滤方式感到头疼。

如果有人有办法创建这个神奇的过滤器......或者对选定的服务器端数据进行过滤/排序的更好方法，我们将不胜感激。

我为我们从网格创建中删除的丑陋格式道歉，我们不漂亮地打印它=）

```
var selectedIDs = [], viewSelectedOnly = false;
    var WrapperDivID = $('#grid_wrapper'),
        GridDivID = $('#BatchBatchGrid');
    //used to help us get gridid out for shiftclick of header
    WrapperDivID.attr('data-id', '120');

    var _AppType = Enum.GridArray(Enums.Security_ApplicationType);

    $(document).ready(function () {
        GridDivID.jqGrid({

        colNames:[
            'LocationID' 
                ,
            'ChannelID' 
                ,
            'Post' 
                ,
            'Actions' 
                ,
            'ID' 
                ,
            'Posted' 
                ,
            'Channel' 
                ,
            'StoreCode' 
                ,
            'Location' 
                ,
            'Reference#' 
                ,
            'Remote Ref#' 
                ,
            'Open Date' 
                ,
            'Close Date' 
                ,
            'Sales + Tax' 
                ,
            'Status' 
                ,
            'Register #' 
        ],
        colModel:
        [
                {
name:
                            'Account_Location.ID'
                        ,
index:
                            'Account_Location.ID'
                        ,
width:
10                        ,
align:
                            'left'
                        ,
hidden:
true                }
                        ,
                {
name:
                            'Channel_Channel.ID'
                        ,
index:
                            'Channel_Channel.ID'
                        ,
width:
10                        ,
align:
                            'left'
                        ,
hidden:
true                }
                        ,
                {
name:
                            'Post'
                        ,
index:
                            'Post'
                        ,
width:
5                        ,
align:
                            'center'
                        ,
search:
false                        ,
sortable:
false                        ,
hidden:
true                }
                        ,
                {
name:
                            'Action'
                        ,
index:
                            'Action'
                        ,
width:
10                        ,
align:
                            'center'
                        ,
search:
false                        ,
sortable:
false                }
                        ,
                {
name:
                            'ID'
                        ,
index:
                            'ID'
                        ,
width:
10                        ,
align:
                            'left'
                        ,
hidden:
true                }
                        ,
                {
name:
                            'Posted'
                        ,
index:
                            'Batch_Batch.Posted'
                        ,
width:
10                        ,
align:
                            'left'
                        ,
search:
true                        ,
stype:
                            'select'
                        ,
searchoptions:
                            '{value: ddPosted }'
                }
                        ,
                {
name:
                            'Channel_Channel.Name'
                        ,
index:
                            'Channel_Channel.Name'
                        ,
width:
15                        ,
align:
                            'left'
                }
                        ,
                {
name:
                            'Account_Location.StoreCode'
                        ,
index:
                            'Account_Location.StoreCode'
                        ,
width:
7                        ,
align:
                            'left'
                }
                        ,
                {
name:
                            'Account_Location.Name'
                        ,
index:
                            'Account_Location.Name'
                        ,
width:
40                        ,
align:
                            'left'
                }
                        ,
                {
name:
                            'BatchNumber'
                        ,
index:
                            'Batch_Batch.BatchNumber'
                        ,
width:
15                        ,
align:
                            'left'
                }
                        ,
                {
name:
                            'RemoteReferenceNumber'
                        ,
index:
                            'RemoteReferenceNumber'
                        ,
width:
15                        ,
align:
                            'left'
                }
                        ,
                {
name:
                            'OpeningTime'
                        ,
index:
                            'OpeningTime'
                        ,
width:
15                        ,
align:
                            'left'
                }
                        ,
                {
name:
                            'ClosingTime'
                        ,
index:
                            'ClosingTime'
                        ,
width:
15                        ,
align:
                            'left'
                        ,
search:
                            'true'
                }
                        ,
                {
name:
                            'SalesPlusTax'
                        ,
index:
                            'SalesPlusTax'
                        ,
width:
15                        ,
align:
                            'left'
                }
                        ,
                {
name:
                            'Status'
                        ,
index:
                            'Batch_Batch.Open'
                        ,
width:
15                        ,
align:
                            'left'
                        ,
search:
true                        ,
stype:
                            'select'
                        ,
searchoptions:
                            '{value:ddStatuses}'
                }
                        ,
                {
name:
                            'RegisterNumber'
                        ,
index:
                            'RegisterNumber'
                        ,
width:
15                        ,
align:
                            'left'
                }

        ],

pager :$('#pager')                    ,
rowNum :"50"
                    ,
rowList :[10,20,50,100]                    ,
sortname :'Batch_Batch.Closingtime'
                    ,
sortorder :"desc"
                    ,
viewrecords :true                    ,
url :'../Grid/BatchBatchGetData'
                    ,
datatype :'json'
                    ,
mtype :'GET'
                    ,
autowidth :true                    ,
autoheight :true                    ,
height :400                    ,
multiselect :true                    ,
rownumbers :true        ,

        gridComplete: function(){
            var ids = GridDivID.jqGrid('getDataIDs');
            for(var i = 0; i < ids.length; i ++){
                var id = ids[i];
                var link = '<a href="../Accounting/BatchView?BatchID=' + id + '" target="_new">View</a>';
                GridDivID.jqGrid('setRowData',id,{Action:link});
                if (viewSelectedOnly) {
                     if(selectedIDs.indexOf(id) === -1){
                        $('#' + id).css('display','none');
                     }

                 }
            }
            var curr_width = WrapperDivID.width();
            GridDivID.jqGrid('setGridWidth', curr_width);

        },
        onSelectRow: function(id, status){
            var p = this.p, item = $(this).getRowData(id), _index = selectedIDs.indexOf(id);
            if(status){
                if(selectedIDs.indexOf(id) === -1)
                    selectedIDs.push(id);
            }else{
                selectedIDs.splice(_index, 1);
            }
        },
        loadComplete: function(gridData){
            var p = this.p, data = p.data, item, grid = $(this), index = p._index, rowid, i, selCount;
            //Logic for view selected
            if (gridData.rows.length > 0) {
              for (var i = 0; i < gridData.rows.length; i++) {
                 if(selectedIDs.indexOf(gridData.rows[i].id) !== -1){
                    grid.jqGrid('setSelection', gridData.rows[i].id, true);
                 }
              }
           }
        },
        onSelectAll: function(aRowids,status){
            var p = this.p;
            for (var i = 0; i < aRowids.length; i++) {
                var  _index = selectedIDs.indexOf(aRowids[i])
                if(status){
                    if(selectedIDs.indexOf(aRowids[i]) === -1)
                        selectedIDs.push(aRowids[i]);
                }else{
                    selectedIDs.splice(aRowids[i], 1);
                }
            }

        }

        }); //Ends jqGrid instantiation

        GridDivID.jqGrid('navGrid','#pager',{del:false,add:false,edit:false,search:true},{closeAfterAdd: true,closeAfterEdit: true},{closeAfterAdd: true,closeAfterEdit: true});
        GridDivID.jqGrid('filterToolbar',{stringResult: true,searchOnEnter:true});
        //GridDivID.jqGrid('gridResize',{minWidth:350,minHeight:100});

    });  //Ends Document Ready 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T23:07:27.027

我找到了一个对我们有用的解决方案，可能不一定很容易对其他人实施。我们有一些服务器端代码，它们接受这样的查询字符串并将其解析为我们针对 SQL 使用的过滤器语言。

**查询字符串参数**

```
nd:1354661490131
rows:50
page:1
sidx:Batch_Batch.Closingtime
sord:desc
filters:{"groupOp":"OR","rules":[{"field":"Batch_Batch.ID","op":"in","data":"'fa8d00f6-3faf-47a5-a0b0-b21879f2e54f', '8a59b8a5-66de-4ad1-ac89-81e645303b8c'"}]} 
```

我发现了 victorz [http://www.trirand.com/blog/?page_id=393/discussion/extendig-default-search-operators-list/](http://www.trirand.com/blog/?page_id=393/discussion/extendig-default-search-operators-list/)的这篇文章， 它提供了所有潜在的 jqGrid 运算符

**jqGrid 运算符**

```
['equal','not equal', 'less', 'less or equal','greater','greater or equal', 'begins with','does not begin with','is in','is not in','ends with','does not end with','contains','does not contain']

and correspndent list of aliases declared by sopt option:
['eq','ne','lt','le','gt','ge','bw','bn','in','ni','ew','en','cn','nc'] 
```

我最初并没有意识到有一个'in'运算符正是我需要的=）。为了让它与过滤器解析器一起工作，我不得不将它从一个数组更改为一个字符串......`["1", "2" "3"]`所以`"'1', '2', '3'"`

**创建过滤器的 Javascript 的外观**

```
 var grid = $('#BatchBatchGrid');  
    f = { groupOp: "OR", rules: [] };
// String that is used to store array values for server side filtering
    var arrayToString= '';
    for (var i = 0; i < selectedIDs.length; i++) {
    arrayToString+= (i != selectedIDs.length - 1) ? "'" + selectedIDs[i] + "', " : "'" + selectedIDs[i] + "'";
    }
    f.rules.push({ field: "Batch_Batch.ID", op: "in", data: arrayToString});
    grid[0].p.search = true;
    $.extend(grid[0].p.postData, { filters: JSON.stringify(f) });
    grid.trigger("reloadGrid", [{ page: 1, current: true}]); 
```

**最后停止过滤器生成器 - 服务器端**

当它到达控制器端时，代码会被清理并最终写出一些类似于“where ID in ('1', '2', '3')' 的 SQL 语法

希望这可以帮助其他人尝试使用服务器端数据来实现这一目标。如果有人有任何更简单的解决方案，我不介意看到它们，这个效果很好......但总是喜欢看到其他方法=）

# uiview - 我在哪里将 UITableViewCell 添加到此 UITableView 的 SECOND 部分？

> ID：13711310
> 
> 赞同：1
> 
> 时间：2012-12-04T20:28:05.057
> 
> 标签：uiview, uitableview

这里面会有很多代码，对此我深表歉意，但问题是我很难逐步完成这个程序并确定这个东西在哪里创建了 UITableView 的部分。

这从“iOS 编程：大书呆子牧场指南”中的表格视图练习开始，我决定我想更多地探索这个，所以我在 Illustrator 中创建了一些图像并前往城镇。

我已经成功创建：

*   界面视图

*   UITableView 和 UITableViewCell 在一个单独的部分中，其中填充了“项目”，它们只是随机生成的字符串，如本书示例中所示。（随机形容词、随机名词、随机序号等）

*   当您点击它们时会变为突出显示状态的其他按钮

*   在第一个也是唯一一个部分之后的页脚，显示更多似乎可以正常工作的按钮

作为练习，我现在要做的就是将这些随机生成的字符串项中的一半取出，将它们粘贴在表格视图单元格中，然后将它们放置在表格视图的**第 2 部分**中。似乎是一个相对简单的任务，但我不知道在哪里/如何做。我已经阅读了文档，我想我可能需要实现 insertSections:withRowAnimation: 方法，但我无法在任何地方在线找到一个示例，让我知道如何以一种对我来说有意义的方式实现它程序。

为了简化事情——希望如此——我相信问题出在本文底部的 ItemsViewController.m 文件中。ItemStore 类只是一个名为“allItems”的数组，它包含我之前描述的随机生成的字符串项。AppDelegate 文件中似乎也没有发生对我想要做的事情重要的事情。任何帮助，将不胜感激。提前非常感谢。

物品商店.h

```
#import <Foundation/Foundation.h>

@class Item;

@interface ItemStore : NSObject {
    NSMutableArray *allItems;
}

+(ItemStore *)sharedStore;
-(NSMutableArray *)allItems;
-(Item *)createItem;

@end 
```

物品商店.m

```
#import "ItemStore.h"
#import "Item.h"

@implementation ItemStore

// create the singleton ItemStore
+(ItemStore *)sharedStore {
    static ItemStore *sharedStore = nil;
    if (!sharedStore)
        sharedStore = [[super allocWithZone:nil] init];        
    return sharedStore;
}

+(id)allocWithZone:(NSZone *)zone {
    return [self sharedStore];
}

-(id)init {
    self = [super init];
    if (self) {
        allItems = [[NSMutableArray alloc] init];
    }
    return self;
}

-(NSArray *)allItems {
    return allItems;
}

-(Item *)createItem {
    Item *p = [Item randomItem];
    [allItems addObject:p];

    return p;
}

@end 
```

AppDelegate.h

```
#import <UIKit/UIKit.h>

@class ItemsViewController;

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) ItemsViewController *viewController;

@end 
```

AppDelegate.m

```
#import "AppDelegate.h"
#import "ItemsViewController.h"
#import "Item.h"

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    ItemsViewController *itemsViewController = [[ItemsViewController alloc] init];
    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:itemsViewController];
    [[self window] setRootViewController:navController];

    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];

    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application {}
- (void)applicationDidEnterBackground:(UIApplication *)application {}
- (void)applicationWillEnterForeground:(UIApplication *)application {}
- (void)applicationDidBecomeActive:(UIApplication *)application {}
- (void)applicationWillTerminate:(UIApplication *)application {}

@end 
```

ItemsViewController.h

```
#import <Foundation/Foundation.h>

@interface ItemsViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>

{
    UIView *underView;
    UITableView *ivarTableView;
}

@property (nonatomic, readwrite) UITableView *ivarTableView;

-(id)init;
-(id)initWithStyle:(UITableViewStyle)style;
-(void)insertSections:(NSIndexPath *)indexPath withRowAnimation:(UITableViewRowAnimation)animation;
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;

@end 
```

项目视图控制器.m

```
#import "ItemsViewController.h"
#import "Item.h"
#import "ItemStore.h"

@implementation ItemsViewController

@synthesize ivarTableView;

-(void)viewDidLoad {
    [super viewDidLoad];

    CGFloat startingPoint = 33.0;
    CGRect bounds = self.view.bounds;
    bounds.origin.y = startingPoint;
    bounds.size.height -= startingPoint;

    self.ivarTableView = [[UITableView alloc] initWithFrame:bounds style:UITableViewStyleGrouped];
    self.ivarTableView.dataSource = self;
    self.ivarTableView.delegate = self;
    self.ivarTableView.separatorStyle = UITableViewCellSeparatorStyleSingleLine;
    self.ivarTableView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    [self.view addSubview:self.ivarTableView];

    // create background, custom navigation bar, and a few other images/buttons, 
    // and some buttons that get placed in the footer.  all of these work fine.
    // ...

-(CGFloat)tableView:(UITableView *)tableView heightForFooterInSection: (NSInteger) section
{
    // this method is a little unclear to me, but I've got everything in the footer working fine, so I haven't worried about it at this point.
    return 0.0;
}

// so far, init{} just creates a random amount of 'Items', which are just random strings so there's something to populate the UITableViewCells.
-(id) init {
    if (self) {
        int r = arc4random() % 10;
        NSLog(@"Number of cells in the table view should be:  %d", r);
        for (int i = 1; i <= r; i++) {
            [[ItemStore sharedStore] createItem];
        }
    }
    return self;
}

-(void)insertSections:(NSIndexPath *)indexPath withRowAnimation:(UITableViewRowAnimation)animation{
    // I think this is where I need to--create another section?--and send the second section the data that is going to be used in the second section's cells, but I'm having trouble tracing the flow of this program.
}

// Asks the delegate for the height to use for a row in a specified location and sends
// the appropriate size, based upon which image is going to be displayed for the particular cell.
// Top cell is a taller height, middle and bottom cell(s) are the same height.
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

    NSInteger lastRow = [self tableView:ivarTableView numberOfRowsInSection:1] - 1;
    NSInteger rowsAmount = [self tableView:ivarTableView numberOfRowsInSection:[indexPath section]];

    if (indexPath.row == 0 && rowsAmount != 1) {
        return 95.0;
    } else if (indexPath.row == 0 && rowsAmount == 1) {
        return 137.0;
    } /*end change*/ else if (indexPath.row == lastRow) {
        return 74.0;
    } else {
        return 74.0;
    }
}

-(UITableViewCell *)tableView:(UITableView *)tableView
        cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"UITableViewCell"];

    if (!cell) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                                   reuseIdentifier:@"UITableViewCell"];
    }

    NSInteger sectionsAmount = [tableView numberOfSections];
    NSInteger rowsAmount = [self tableView:ivarTableView numberOfRowsInSection:[indexPath section]];

    if (rowsAmount == 1) {
        cell.backgroundView = [[UIImageView alloc] initWithImage:[[UIImage imageNamed:@"cellTypeOne.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0]];

        cell.selectedBackgroundView = [[UIImageView alloc] initWithImage:[[UIImage imageNamed:@"cellTypeOneTouched.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0]];

    } else if (rowsAmount == 2) {

        if ([indexPath section] == 0 && [indexPath row] == 0) {

            cell.backgroundView = [[UIImageView alloc] initWithImage:[[UIImage imageNamed:@"cellTypeOneMulti.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0]];

            cell.selectedBackgroundView = [[UIImageView alloc] initWithImage:[[UIImage imageNamed:@"cellTypeOneMultiTouched.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0]];
        } else {

            cell.backgroundView = [[UIImageView alloc] initWithImage:[[UIImage imageNamed:@"cellBottom.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0]];

            cell.selectedBackgroundView = [[UIImageView alloc] initWithImage:[[UIImage imageNamed:@"cellBottomTouched.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0]];
        }

    } else if (rowsAmount >= 3) {

        if ([indexPath section] == 0 && [indexPath row] == 0){

            cell.backgroundView = [[UIImageView alloc] initWithImage:[[UIImage imageNamed:@"cellTypeOneMulti.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0]];

            cell.selectedBackgroundView = [[UIImageView alloc] initWithImage:[[UIImage imageNamed:@"cellTypeOneMultiTouched.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0]];            

        } else if ([indexPath section] == sectionsAmount - 1 && [indexPath row] == rowsAmount - 1) {

            cell.backgroundView = [[UIImageView alloc] initWithImage:[[UIImage imageNamed:@"cellBottom.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0]];

            cell.selectedBackgroundView = [[UIImageView alloc] initWithImage:[[UIImage imageNamed:@"cellBottomTouched.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0]];

        } else {

            cell.backgroundView = [[UIImageView alloc] initWithImage:[[UIImage imageNamed:@"cellMiddle.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0]];

            cell.selectedBackgroundView = [[UIImageView alloc] initWithImage:[[UIImage imageNamed:@"cellMiddleTouched.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0]];
            }
        }

    // gets rid of the white box that would bound the text of the cell
    [[cell contentView] setBackgroundColor:[UIColor clearColor]];
    [[cell backgroundView] setBackgroundColor:[UIColor clearColor]];
    [cell setBackgroundColor:[UIColor clearColor]];

    /* Set the text of the cell to the description of the item that is at the nth index of items, where n = row this cell will appear in on the tableView */
    Item *p = [[[ItemStore sharedStore] allItems] objectAtIndex:[indexPath row]];
    [[cell textLabel] setText:[p description]];
    [[cell textLabel] setHighlightedTextColor:[UIColor whiteColor]];
    [[cell textLabel] setTextColor:[UIColor blackColor]];
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    return cell;
}

/* return count of ItemStore's allItems array */
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [[[ItemStore sharedStore] allItems] count];
}

// ...

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:40:43.810

UITableView 请求特定部分和行的单元格，调用方法

```
-(UITableViewCell *)tableView:(UITableView *)tableViewcellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

来自其“数据源”。

在这种情况下，数据源是 ItemsViewController。因此，在上述方法中，参数之一是“indexPath”，它是指示您必须返回单元格的部分和行的对象。

您可以知道它是否需要第 2 节比较：

```
if(indexPath.section == 2)
{
    //Do something for section 2
} 
```

编辑：

此外，要获得一个包含两个部分的表，您必须实现该方法

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 2; //Return the number of sections you what
} 
```

在 ItemsViewControlle.m 中。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:47:54.350

我在您的代码中看不到以下方法，这是您的 tableview 将调用以了解它应该创建多少部分的方法。

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return numberOfSectionYouWant;
} 
```

此外，最好让控制器成为子类，`UITableViewController`而不是`UIViewController`添加协议的地方。它将为您节省许多错误。

```
insertSections:withRowAnimation: 
```

如果您需要在运行时添加一个部分，可以在之后直接在您的 tableview 上调用。

# xpath - xpath - 如何找到一个嵌入的 li 里面有一个输入元素？

> ID：13711312
> 
> 赞同：5
> 
> 时间：2012-12-04T20:28:11.967
> 
> 标签：xpath

鉴于此 HTML：

```
<li class="check_boxes input optional" id="activity_roles_input">
    <fieldset class="choices">
        <legend class="label"><label>Roles</label></legend>
        <input id="activity_roles_none" name="activity[role_ids][]" type="hidden" value="" />
            <ol class="choices-group">
                <li class="choice">
                    <label for="activity_role_ids_104">
                        <input id="activity_role_ids_104" name="activity[role_ids][]" type="checkbox" value="104" />Language Therapist
                    </label>
                </li>
                <li class="choice">
                    <label for="activity_role_ids_103">
                        <input id="activity_role_ids_103" name="activity[role_ids][]" type="checkbox" value="103" />Speech Therapist
                    </label>
                </li>
            </ol>
    </fieldset>
</li> 
```

我正在尝试使用 Selenium 和 xpath。我正在尝试选择第一个“复选框”输入元素链接。
我在选择元素时遇到问题。
我不能使用 db ID (104)，因为这是每次都使用新 ID 进行重复测试。我需要选择“第一个”输入复选框，基于它具有语言治疗师的文本。

我试过了：

```
xpath=(//li[contains(@id,'activity_roles_input')])//input 
```

和

```
xpath=(//li[contains(@id,'activity_roles_input')])//contains('Language Therapist") 
```

但它没有找到元素。

当我做：

```
xpath=(//li[contains(@id,'activity_roles_input')]) 
```

它到达输入集。我遇到的问题是为“语言治疗师”选择第一个输入复选框控件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T20:48:39.527

首先，找到`<li>`包含文本的任何内容，然后在第一个复选框的后代中查找。

```
xpath=(//li[contains(., "Language Therapist")]/descendant::input[@type="checkbox"][1]) 
```

（来自迈克尔）

以上对我有用。最后我实际使用了

```
xpath=(//li[contains(@id,'activity_roles_input')]/descendant::input[@type="checkbox"][1]) 
```

因为我喜欢通过 css ID 识别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:36:13.960

当我尝试对您的 xml 运行这个小 xsl 时，要注意一个有趣的事实。

XSL：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output method="text"/>

<xsl:template match="/">
   <xsl:for-each select="//li[@id ='activity_roles_input']">
      <xsl:value-of select="."/>
   </xsl:for-each>       
</xsl:template>

</xsl:stylesheet> 
```

输出：

```
 Roles

                    Language Therapist

                    Speech Therapist 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:42:30.137

你有

```
xpath=(//li[contains(@id,'activity_roles_input')])//input 
```

那不应该是

```
xpath=(//li[contains(@id,'activity_roles_input')]//input) 
```

更确切地说

```
xpath=(//li[@id='activity_roles_input']//input) 
```

?

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-12-02T12:00:40.460

```
xpath=(//li[@id='activity_roles_input']//input[1]) 
```

# sql-server - 星型模式中的自定义导入

> ID：13711320
> 
> 赞同：0
> 
> 时间：2012-12-04T20:28:35.897
> 
> 标签：sql-server, data-warehouse

我有一个星型模式的数据仓库。
客户期待导入 csv 文件及其关系。这将由导入工具提供）。
他们在现有的星型模式系统中寻找类似结构（父，子）的操作数据库。它更像是雪花或更精确的星花。

这种情况下的最佳做法是什么：
1\. 我无法阻止它们导入。
2\. 我可以在导入工具中设置标准，但我需要列出它们。
3\. 如何处理多对多关系。
4\. 我也有ETL，所以在ETL中需要做些什么才能不破坏现有的关系

# php - .htaccess 给 PHP 总是 "www" 包括在没有 "www" URL

> ID：13711325
> 
> 赞同：0
> 
> 时间：2012-12-04T20:28:47.170
> 
> 标签：php, .htaccess, redirect

很难在标题中说明..我的问题是：

这是我的 .htaccess ：

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule ^(.*)$ index.php?url=$1 [L,QSA]
</IfModule> 
```

如果我在 url 中输入带有“www”的域，例如“www.home.com”，我会在 $_SERVER['SERVER_NAME'] 中输入带有“www”的 url，但是如果我输入的域中没有“ www" 就像[http://home.com](http://home.com)一样，"www" 存在于 $_SERVER['SERVER_NAME'] 变量中，当我使用自定义函数创建 URL 时，服务器无法创建正确的 URL（即使始终插入 "www"不在 URL 中）并得到一些权限错误（如 json 或 webservices，因为域不匹配）。

我认为这是一个 .htaccess 问题，而不是 PHP（想想..）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T20:32:20.740

`$_SERVER['SERVER_NAME']`来自网络服务器配置，例如 Apache 的`ServerName`. 如果您想要 url 中提供的主机名，则有`$_SERVER['HTTP_HOST']`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T20:31:52.153

$_SERVER['server_name'] 来自虚拟主机配置。

# objective-c - UICollectionViewLayout 教程

> ID：13711329
> 
> 赞同：0
> 
> 时间：2012-12-04T20:29:14.620
> 
> 标签：objective-c, ios, uicollectionview

这里初学者，

我正在尝试寻找一些关于 UICollectionViewLayout 子类的好教程，但我似乎找不到任何教程。那里的大多数教程似乎都是关于 collectionView 基础知识和股票 UICollectionViewFlowLayout。

有没有人遇到过任何有用的教程来实现自定义 UICollectionViewLayout？

谢谢！

**更新**

这个对我很有帮助

[http://www.skeuo.com/uicollectionview-custom-layout-tutorial](http://www.skeuo.com/uicollectionview-custom-layout-tutorial)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T02:38:33.403

下载 WWDC 2012 视频随附的示例代码并查看视频 205 和 219 的示例代码。例如，查看将视图排列成圆形的布局。

# android - StackMob 安卓

> ID：13711338
> 
> 赞同：0
> 
> 时间：2012-12-04T20:29:45.680
> 
> 标签：android, iphone, database, stackmob

我可以通过 android App 在 StackMob 上创建数据库表（如本地数据库中的 sqlite 表）吗？

如何通过 android App 在 StackMob 帐户上的表中插入和获取数据？

还请告诉我我们可以在 StackMob 上存储的最大数据是多少？

我提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:40:18.027

我想你会在[StackMob 开发者网站](http://developer.stackmob.com)上找到你需要的一切。

有很多[教程](http://developer.stackmob.com/tutorials)，例如，如何[保存](http://developer.stackmob.com/tutorials/android/Save-an-Object)或[阅读](http://developer.stackmob.com/tutorials/android/Read-an-Object)对象。

这将是一个好的开始。

# node.js - Node.js everyauth 集群错误

> ID：13711346
> 
> 赞同：0
> 
> 时间：2012-12-04T20:30:16.960
> 
> 标签：node.js, express, redis, everyauth

我用 node.js 编写可扩展的应用程序并且遇到了问题。当我点击 facebook auth 链接 (/auth/facebook) 并将我重定向回来时 - 抛出错误：

> {"error":{"message":"redirect_uri 不是绝对 URI。检查 RFC 3986。","type":"OAuthException","code":191}}

我想，这是因为我使用集群。我尝试为会话设置 RedisStore：

```
RedisStore = require('connect-redis')(express); 
```

...一些代码...

```
app.use(express.session({ store: new RedisStore(), secret: 'secret code'})); 
```

但它仍然不起作用。此外，“findOrCreateUser”功能正常工作，我可以根据需要获取用户信息。我需要的只是将用户重定向到索引页面。

我正在使用**Express 3，节点 0.8.14**

Everyauth 在 github 上有同样的问题[https://github.com/bnoguchi/everyauth/issues/153](https://github.com/bnoguchi/everyauth/issues/153)

提前致谢！

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-09T13:51:53.760

我通过使用passportjs而不是everyauth解决了我的问题。

# spring - Spring构造函数依赖注入问题

> ID：13711347
> 
> 赞同：0
> 
> 时间：2012-12-04T20:30:22.440
> 
> 标签：spring, dependency-injection, annotations, autowired, constructor-injection

我有 2 节课

```
public class Abcd{

    private String username;
    private String password;

    public Abcd(@Value("${username}") String userName, @Value("${password}") String password) {
        ...
    }

    public String retrieveValues(){
     ......
     return "someString";
    }

}

public class SomeClass{
    @Autowired
    private Abcd obj;

    public String method1(){
    obj.retrieveValues();
} 
```

我有一个如下的 Xml。

```
<context:annotation-config />
<context:property-placeholder location="classpath:applNew.properties" />

<bean id="abcd" class="com.somecompany.Abcd">
    <constructor-arg type="java.lang.String" value="${prop.user}" />
    <constructor-arg type="java.lang.String" value="${prop.password}" />
</bean>

<bean id="someclass"
    class="com.differentcompany.SomeClass">
</bean> 
```

当我构建项目并启动服务器时，我看到以下异常。

```
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'abcd' defined in URL []: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class []: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: Superclass has no null constructors but no arguments were given

Caused by: java.lang.IllegalArgumentException: Superclass has no null constructors but no arguments were given 
```

我不明白以这种方式注入构造函数可能是什么问题。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T21:05:33.360

由 CGLIB 代理的类（用于 AOP 支持）必须具有无参数构造函数。

这些无参数构造函数不一定是`public`，它不会影响其他任何东西 - 您可以像往常一样使用其他构造函数：

```
public class Abcd{
    // Dummy constructor for AOP
    Abcd() {}

    public Abcd(@Value("${username}") String userName, @Value("${password}") String password) { ... }   
    ...
} 
```

**也可以看看：**

*   [7.6 代理机制](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/aop.html#aop-proxying)

# java - 更改矩形二维数组中的值

> ID：13711348
> 
> 赞同：0
> 
> 时间：2012-12-04T20:30:23.047
> 
> 标签：java, arrays, for-loop, multidimensional-array

为了好玩，我正在创建一个非常基本的战舰程序，但在我的矩形二维数组中更改值时遇到了问题。本质上，在这个二维数组中放置了五艘“船”。然后用户输入一个整数来查看他们是否命中或未命中。我希望输出显示带有猜测数字的数组，用`X`a 表示未命中和 a`0`表示命中。`area[i][j]`当值等于or的值时`t`，我无法更改值。我是java新手，所以我正在努力学习。任何帮助，将不胜感激。先感谢您。`0``X`

```
import java.util.*;
public class battleship {

    //Rudimentary Battleship game
    public static void main(String[] args) {
        System.out.println(" Hello and welcome to a basic version of Battleship.");
        System.out.println(" The objective of this game is to sink all five ships located on the grid listed below.");
        System.out.println(" Follow the prompt located underneath the grid ");
        final int ROWS = 10;
        final int COLS = 10;
        int sum = 0;
        int [][] area = { {1,2,3,4,5,6,7,8,9,10},
                  {11,12,13,14,15,16,17,18,19,20},
                  {21,22,23,24,25,26,27,28,29,30},
                  {31,32,33,34,35,36,37,38,39,40},
                  {41,42,43,44,45,46,47,48,49,50},
                  {51,52,53,54,55,56,57,58,59,60},
                  {61,62,63,64,65,66,67,68,69,70},
                  {71,72,73,74,75,76,77,78,79,80},
                  {81,82,83,84,85,86,87,88,89,90},
                  {91,92,93,94,95,96,97,98,99,100} };

        for(int i=0; i < area.length; i++) {
            for (int j=0; j < area[i].length; j++) {

              if(area[i][j] < 10) 
                System.out.print("   "+(area[i][j])+" ");  
              else if(area[i][j] < 100) 
                System.out.print("  "+(area[i][j])+" ");
              else 
                System.out.print(" "+(area[i][j])+" ");
            }
          System.out.println("");
        }

    Scanner input = new Scanner(System.in);{
    System.out.println("Enter attack integer:");
    int t;
    while(true){
    t = input.nextInt();

    if ((t == 41) || (t == 42) || (t == 43)){
    System.out.println("Hit - Destroyer");}

    if ((t == 80) || (t == 90) || (t == 100)){
        System.out.println("Hit - Submarine");}

    if((t == 52) || (t == 62) || (t== 72) || (t == 82) || (t == 92)){
        System.out.println ("Hit - Aircraft Carrier");}

    if((t == 15) || (t == 16) || (t == 17) || (t == 18)){
        System.out.println ("Hit - Battleship");}

    if((t == 1) || (t == 2)){
        System.out.println ("Hit - PT Boat");}
    else{
        System.out.println ("Miss");
    }
    System.out.println("You have fired at:" + t);
    int w = 0;
    for(int i=0; i < area.length; i++) {
        for (int j=0; j < area[i].length; j++) {

            if (area[i][j] == t)

          if(area[i][j] < 10) 
            System.out.print("   "+(area[i][j])+" ");  
          else if(area[i][j] < 100) 
            System.out.print("  "+(area[i][j])+" ");
          else 
            System.out.print(" "+(area[i][j])+" ");
        }
      System.out.println("");
    }

        }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:43:39.783

使用面向对象会更好。这是一个可以帮助您入门的框架：

```
public class Cell {
  private boolean ship = false;
  private boolean hit = false;

  public boolean getHit() {
    return hit;
  }
  public void setHit(boolean hit) {
    this.hit = hit;
  }
} 
```

然后

```
public class Board() {
  public static final int SIZE = 10;
  private Cell[][] board;

  public Board() {
    board  = new Cell[SIZE][SIZE];
    for(int i = 0; i < 10; i++)
      for(int j = 0; j < 10; j++)
        board[i][j] = new Cell();

  public boolean getHit(int x, int y) {
    if(x < 0 || x >= SIZE || y < 0 || y >= SIZE) throw new BattleshipException("You queried a cell that doesn't exist!");
    return board[x][y].getHit();
  }
  // etc etc.
} 
```

充实您需要的所有方法，在需要时添加字段，这样会更好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:46:37.007

这很简单，修改你的代码：

```
if ((t == 41) || (t == 42) || (t == 43)){
    System.out.println("Hit - Destroyer");
    area[i][j] = "X";
}
if ((t == 80) || (t == 90) || (t == 100)){
    System.out.println("Hit - Submarine");
    area[i][j] = "X";
}
if((t == 52) || (t == 62) || (t== 72) || (t == 82) || (t == 92)){
    System.out.println ("Hit - Aircraft Carrier");
    area[i][j] = "X";
}

if((t == 15) || (t == 16) || (t == 17) || (t == 18)){
    System.out.println ("Hit - Battleship");
    area[i][j] = "X";
}
if((t == 1) || (t == 2)){
    System.out.println ("Hit - PT Boat");
    area[i][j] = "X";
}
else{
    System.out.println ("Miss");
    area[i][j] = "O";
} 
```

注意：请注意，数组索引为 0，因此您的船舶位置与您设置网格的方式不完全对应。即 area[4][1] 不是“41”。您似乎对列而不是行正确地执行了此操作（在驱逐舰的情况下）。如果船在 area[4][0]、area[4][1]、area [4][2]，if 语句应该检查 31、32、33。实际上，最好将位置标记为 00、01、02、...、97、98、99，以便索引与数字相对应。

# mysql - 查询返回的结果是否一致？

> ID：13711350
> 
> 赞同：1
> 
> 时间：2012-12-04T20:30:38.880
> 
> 标签：mysql, sql, join

剥离外层后改变了问题

我正在使用 MySQL 5.1

```
select s.status, street, m.meterpointid
from meterpoint m inner join account a
     on ( m.accountid = a.accountid) inner join
     meterservice s
     on ( m.meterpointid = s.meterpointid )
where a.citystateid=1 and m.meterpointid=3008 and m.lastupdate is not null 
group by status, street ; 
```

上面的查询返回

```
1   210 S HWY 3 3008 
```

* * *

```
select s.status, street, m.meterpointid
from meterpoint m inner join account a
     on ( m.accountid = a.accountid) inner join
     meterservice s
     on ( m.meterpointid = s.meterpointid )
where a.citystateid=1 and m.lastupdate is not null 
group by status, street ; 
```

但是上面查询的输出与前面没有的查询完全相同，`m.meterpointid=3008`但不包含`1 210 S HWY 3 3008`

有任何想法吗？

谢谢娜仁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:43:48.520

内部查询的更改正在更改外部查询中的计数，因此`having count(*) = 1`不再正确。我发现诊断这类事情的最佳方法是剥离外层并查看内部查询，直到我弄清楚发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:42:11.793

这一点也不奇怪。您正在使用 MySQL 的一个（错误）功能，称为*Hidden Columns*。也就是说，`select`子句中有不在`group by`子句中且不在聚合函数中的列。

在这种情况下，为该值选择任意值。

要解决此问题，请执行以下操作：

```
group by status, street, m.meterpointid 
```

或者

```
select s.status, street, min(m.meterpointid) 
```

这些将修复查询，因此结果是确定的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T20:43:59.177

不包括测试`m.meterpointid=3008`可以改变计数。如果，根据`count(*) = 1`，计数不是`1`结果被丢弃。如果第二个查询的子查询返回多条记录，则该结果将被丢弃。

# z3 - z3 处理非线性实数运算的限制

> ID：13711351
> 
> 赞同：3
> 
> 时间：2012-12-04T20:30:40.073
> 
> 标签：z3

我有一个程序可以在非线性实数算术中生成一组约束。考虑以下两个约束：

(<(- (- (- (+ (* (- v0_x v3_x) (- v1_y v3_y) (+ (* (- v2_x v3_x) (- v2_x v3_x))) (* (- v2_y v3_y) (- v2_y v3_y)))) (* (- v0_y v3_y) (- v2_x v3_x) (+ (* (- v1_x v3_x) (- v1_x v3_x)) (* (- v1_y v3_y) (- v1_y v3_y)))) (* (- v1_x v3_x) ( - v2_y v3_y) (+ (* (- v0_x v3_x) (- v0_x v3_x)) (* (- v0_y v3_y) (- v0_y v3_y))))) (* (- v1_y v3_y) (- v2_x v3_x) (+ ( * (- v0_x v3_x) (- v0_x v3_x)) (* (- v0_y v3_y) (- v0_y v3_y))))) (* (- v0_y v3_y) (- v1_x v3_x) (+ (* (- v2_x v3_x) ( - v2_x v3_x)) (* (- v2_y v3_y) (- v2_y v3_y))))) (* (- v0_x v3_x) (- v2_y v3_y)(+ (* (- v1_x v3_x) (- v1_x v3_x)) (* (- v1_y v3_y) (- v1_y v3_y))))) 0)

(>(- (- (- (+ (* (- v0_x v2_x) (- v1_y v2_y) (+ (* (- v3_x v2_x) (- v3_x v2_x))) (* (- v3_y v2_y) (- v3_y v2_y)))) (* (- v0_y v2_y) (- v3_x v2_x) (+ (* (- v1_x v2_x) (- v1_x v2_x)) (* (- v1_y v2_y) (- v1_y v2_y)))) (* (- v1_x v2_x) ( - v3_y v2_y) (+ (* (- v0_x v2_x) (- v0_x v2_x)) (* (- v0_y v2_y) (- v0_y v2_y))))) (* (- v1_y v2_y) (- v3_x v2_x) (+ ( * (- v0_x v2_x) (- v0_x v2_x)) (* (- v0_y v2_y) (- v0_y v2_y))))) (* (- v0_y v2_y) (- v1_x v2_x) (+ (* (- v3_x v2_x) ( - v3_x v2_x)) (* (- v3_y v2_y) (- v3_y v2_y))))) (* (- v0_x v2_x) (- v3_y v2_y)(+ (* (- v1_x v2_x) (- v1_x v2_x)) (* (- v1_y v2_y) (- v1_y v2_y))))) 0)

当我将它们断言给 Z3 时，它说它是可满足的，但是一旦我将第二个约束更改为 (< ... 0) 而不是 (> ... 0) 现在应该是不可满足的，z3 就会永远运行。我想知道 z3 在处理非线性实数算术方面的局限性。Z3 是否有可能处理上述约束（例如通过更改它们的制定方式或任何其他方式）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T21:48:35.057

是的，当我们改变问题时，问题变得`(< ... 0)`无法`(> ... 0)`满足，并且有一个简单的证明，因为它变成了`p < 0 and p > 0`. 简化后，您帖子中的两个多项式是相同的。然而，Z3 错过了这个简单的证明。这将在下一个版本中修复。同时，我们可以通过使用自定义策略来捕获具有这种简单证明的示例。

```
(check-sat-using (then (! simplify :som true) (! simplify :sort-sums true) smt)) 
```

该策略执行多项式归一化并调用一个引擎来检测 和 中的`p < 0`不一致性`p > 0`。整个示例可在线获取：[http](http://rise4fun.com/Z3/JP4) ://rise4fun.com/Z3/JP4 。我也把它贴在了邮件的最后。

Z3 一直在运行，因为它错过了简短/简单的证明，并尝试使用更昂贵和更完整的方法找到证明。Z3 使用的算法[在此处](http://research.microsoft.com/en-us/um/people/leonardo/files/IJCAR2012.pdf)描述。该算法使用基于子结果的投影算[子](http://mathworld.wolfram.com/Subresultant.html)。此操作非常昂贵，并且会为您的示例生成非常大的多项式。此过程适用于包含小型多项式的问题，其中每个多项式都有一小组变量。未来，我们计划结合完整和不完整的技术，改进 Z3 可以在合理时间内解决的问题集。

```
(declare-const v0_x Real)
(declare-const v1_x Real)
(declare-const v2_x Real)
(declare-const v3_x Real)
(declare-const v4_x Real)
(declare-const v0_y Real)
(declare-const v1_y Real)
(declare-const v2_y Real)
(declare-const v3_y Real)
(declare-const v4_y Real)

(assert
(< (- (- (- (+ (* (- v0_x v3_x) (- v1_y v3_y) (+ (* (- v2_x v3_x) (- v2_x v3_x)) (* (- v2_y v3_y) (- v2_y v3_y)))) (* (- v0_y v3_y) (- v2_x v3_x) (+ (* (- v1_x v3_x) (- v1_x v3_x)) (* (- v1_y v3_y) (- v1_y v3_y)))) (* (- v1_x v3_x) (- v2_y v3_y) (+ (* (- v0_x v3_x) (- v0_x v3_x)) (* (- v0_y v3_y) (- v0_y v3_y))))) (* (- v1_y v3_y) (- v2_x v3_x) (+ (* (- v0_x v3_x) (- v0_x v3_x)) (* (- v0_y v3_y) (- v0_y v3_y))))) (* (- v0_y v3_y) (- v1_x v3_x) (+ (* (- v2_x v3_x) (- v2_x v3_x)) (* (- v2_y v3_y) (- v2_y v3_y))))) (* (- v0_x v3_x) (- v2_y v3_y) (+ (* (- v1_x v3_x) (- v1_x v3_x)) (* (- v1_y v3_y) (- v1_y v3_y))))) 0.0))

(assert
(< (- (- (- (+ (* (- v0_x v2_x) (- v1_y v2_y) (+ (* (- v3_x v2_x) (- v3_x v2_x)) (* (- v3_y v2_y) (- v3_y v2_y)))) (* (- v0_y v2_y) (- v3_x v2_x) (+ (* (- v1_x v2_x) (- v1_x v2_x)) (* (- v1_y v2_y) (- v1_y v2_y)))) (* (- v1_x v2_x) (- v3_y v2_y) (+ (* (- v0_x v2_x) (- v0_x v2_x)) (* (- v0_y v2_y) (- v0_y v2_y))))) (* (- v1_y v2_y) (- v3_x v2_x) (+ (* (- v0_x v2_x) (- v0_x v2_x)) (* (- v0_y v2_y) (- v0_y v2_y))))) (* (- v0_y v2_y) (- v1_x v2_x) (+ (* (- v3_x v2_x) (- v3_x v2_x)) (* (- v3_y v2_y) (- v3_y v2_y))))) (* (- v0_x v2_x) (- v3_y v2_y) (+ (* (- v1_x v2_x) (- v1_x v2_x)) (* (- v1_y v2_y) (- v1_y v2_y))))) 0.0))

(check-sat-using (then (! simplify :som true) (! simplify :sort-sums true) smt)) 
```

# jquery - IE8 无法获取属性“src”的值：对象为空或未定义

> ID：13711353
> 
> 赞同：2
> 
> 时间：2012-12-04T20:30:45.193
> 
> 标签：jquery, arrays, internet-explorer-8, push, tagname

这已经让我紧张了 3 个晚上......我不知道为什么它在 IE9 中有效，但在 IE8 中无效。当我在 IE8 上运行它时，我不断收到此错误：

SCRIPT5007：无法获取属性“src”的值：对象为空或未定义

当我尝试调试时，我得到这条线是原因->

```
 var map_locations = [], container = document.getElementById('renting-map-js'), 
        c = container.children, l = c.length, i, obj, p, m, j;

        //loop through all child nodes
        for ( i = 0; i < l; i++) {
            obj = {};

            //highlights this line
            obj.img = c[i].getElementsByTagName('img')[0].src; 

            p = c[i].getElementsByTagName('p');
            m = p.length;
            for ( j = 0; j < m; j++)
                obj[p[j].className] = p[j].firstChild.nodeValue;
            map_locations[i] = obj;
            console.log(obj);
        } 
```

​</p>

这是小提琴[http://jsfiddle.net/EgzKv/](http://jsfiddle.net/EgzKv/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T20:38:37.300

在 IE6-8 中，.children[还返回注释节点](https://developer.mozilla.org/en-US/docs/DOM/Element.children)。由于评论节点不能有子节点，它们也不能包含具有 src 属性的图像，从而导致您的错误。

jQuery 可以解决这个问题：

```
var map_locations = [],
    container = document.getElementById('renting-map-js'),
    c = $(container).children().get(),
    l = c.length,
    i, obj, p, m, j;

//loop through all child nodes
for (i = 0; i < l; i++) {
    obj = {};
    obj.img = c[i].getElementsByTagName('img')[0].src;
    p = c[i].getElementsByTagName('p');
    m = p.length;
    for (j = 0; j < m; j++)
    obj[p[j].className] = p[j].firstChild.nodeValue;
    map_locations[i] = obj;
    console.log(obj);
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:57:43.490

是的，这个问题是因为评论节点，你只需要忽略它们。如果您不使用 jQuery，最简单的解决方案 - 只需添加对 nodeType 的检查，然后忽略所有而不是 1（元素节点）：

```
var map_locations = [], container = document.getElementById('renting-map-js'), 
c = container.children, l = c.length, i, obj, p, m, j;

//loop through all child nodes
for ( i = 0; i < l; i++) {

    // Ignore non-element nodes.
    if(c[i].nodeType != 1)
        continue;

    obj = {};

    //highlights this line
    obj.img = c[i].getElementsByTagName('img')[0].src; 

    p = c[i].getElementsByTagName('p');
    m = p.length;
    for ( j = 0; j < m; j++)
        obj[p[j].className] = p[j].firstChild.nodeValue;
    map_locations[i] = obj;
    console.log(obj);
} 
```

有关 nodeType 属性的更多信息 - [http://help.dottoro.com/ljkadgoo.php](http://help.dottoro.com/ljkadgoo.php)

# sql - oracle sql 多重求和函数

> ID：13711356
> 
> 赞同：0
> 
> 时间：2012-12-04T20:31:07.263
> 
> 标签：sql, oracle

我有一个带有多个`SUM`s 的查询，它给我的值比我预期的要高。如果我将查询缩减为一个`SUM`，一切正常，但只要我添加其他`SUM`s，我就会得到不正确的值。我尝试在网上查找并尝试了不同的方法，包括更改`JOIN`s 和 nested `SELECT`s，但仍然没有运气。所有帮助将不胜感激。

```
SELECT
    A.WR_NO WORK_ORDER, A.WR_TYPE_CODE WR_TYPE, B.NAME PLANNER, A.SCHEDULING_POLYGON_CODE AREA, A.FINAL_CLOSE_DATE COMPLETION_DATE, C.ACTUAL_ITEM_AMT EST_ENG,
    SUM(D.AFTER_COND_FCT_AMT) EST_CREW, SUM(E.AFTER_COND_FCT_AMT) ASB_CREW, SUM(F.AFTER_COND_FCT_AMT) EST_CONTR, SUM(G.AFTER_COND_FCT_AMT) ASB_CONTR
FROM
    WORK_REQUEST A, CC.ALL_PEOPLE B, WR_CONTRIBUTION_VOUCHER C, WR_COST_ESTIMATE D, WR_COST_ESTIMATE E, WR_COST_ESTIMATE F, WR_COST_ESTIMATE G
WHERE
    (A.FINAL_CLOSE_DATE BETWEEN TO_DATE ('10/01/2012','MM/DD/YYYY') AND TO_DATE ('10/04/2012','MM/DD/YYYY'))
    AND A.ENTRY_PERSON_NO = B.PERSON_NO(+)
    AND A.WR_NO = C.WR_NO(+)
    AND A.WR_NO = D.WR_NO(+)
    AND A.WR_NO = E.WR_NO(+)
    AND A.WR_NO = F.WR_NO(+)
    AND A.WR_NO = G.WR_NO(+)
    AND (C.VOUCHER_CNTRB_TYPE_CODE(+) = 'ENGT')
    AND (D.COST_TYPE_CODE(+) = 'LAB' AND D.DESIGN_ASBUILT_DA(+) = 'D' AND   D.PROVIDER(+) = 'CO')
    AND (E.COST_TYPE_CODE(+) = 'LAB' AND E.DESIGN_ASBUILT_DA(+) = 'A' AND   E.PROVIDER(+) = 'CO')
    AND (F.COST_TYPE_CODE(+) = 'LAB' AND F.DESIGN_ASBUILT_DA(+) = 'F' AND   F.PROVIDER(+) = 'CN')
    AND (G.COST_TYPE_CODE(+) = 'LAB' AND G.DESIGN_ASBUILT_DA(+) = 'G' AND   G.PROVIDER(+) = 'CN')
GROUP BY
    A.WR_NO, A.WR_TYPE_CODE, B.NAME, A.SCHEDULING_POLYGON_CODE, A.FINAL_CLOSE_DATE,     C.ACTUAL_ITEM_AMT
ORDER BY 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:34:17.517

您获得的值比您预期的要高，因为连接是乘以行的。如果不了解数据结构，外部人员很难准确地告诉您问题出在哪里。

该问题的解决方案是*只在计算它所需的表格上进行*求和。然后，您可以在该点之后加入其他表/摘要。

顺便说一句，你真的应该使用正确的`JOIN`语法。使用逗号来表示连接已经过时了，并且使查询更难理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:56:43.997

选择

```
WO_ID WORK_ORDER,
WR_TYPE_CODE WR_TYPE,
NAME PLANNER,
SCHEDULING_POLYGON_CODE AREA,
FINAL_CLOSE_DATE COMPLETE_DATE,
SUM (EENG) AS "ENG_TIME",
SUM (ECREW) AS "EST_CREW",
SUM (ACREW) AS "ASB_CREW",
SUM (ECONT) AS "EST_CONTR",
SUM (ACONT) AS "ASB_CONTR" 
```

从

```
(SELECT
    A.WO_ID,
    A.WR_TYPE_CODE,
    B.NAME,
    A. SCHEDULING_POLYGON_CODE,
    A.FINAL_CLOSE_DATE,
    C.ACTUAL_ITEM_AMT AS "EENG",
    0 "ECREW",
    0 "ACREW",
    0 "ECONT",
    0 "ACONT"
FROM
    WORK_REQUEST A,
    CC.ALL_PEOPLE B,
    WR_CONTRIBUTION_VOUCHER C
WHERE
    (A.FINAL_CLOSE_DATE BETWEEN TO_DATE ('10/01/2012','MM/DD/YYYY') AND TO_DATE ('10/31/2012','MM/DD/YYYY'))
    AND A.ENTRY_PERSON_NO = B.PERSON_NO
    AND A.WR_NO = C.WR_NO
    AND (C.VOUCHER_CNTRB_TYPE_CODE = 'ENGT') 
```

联盟

```
SELECT
    A.WO_ID,
    A.WR_TYPE_CODE,
    B.NAME,
    A. SCHEDULING_POLYGON_CODE,
    A.FINAL_CLOSE_DATE,
    0 "EENG",
    D.AFTER_COND_FCT_AMT AS "ECREW",
    0 "ACREW",
    0 "ECONT",
    0 "ACONT"
FROM
    WORK_REQUEST A,
    CC.ALL_PEOPLE B,
    WR_COST_ESTIMATE D
WHERE
    (A.FINAL_CLOSE_DATE BETWEEN TO_DATE ('10/01/2012','MM/DD/YYYY') AND TO_DATE ('10/31/2012','MM/DD/YYYY'))
    AND A.ENTRY_PERSON_NO = B.PERSON_NO
    AND A.WR_NO = D.WR_NO
    AND (D.COST_TYPE_CODE = 'LAB' AND D.DESIGN_ASBUILT_DA = 'D' AND D.PROVIDER = 'CO') 
```

联盟

```
SELECT
    A.WO_ID,
    A.WR_TYPE_CODE,
    B.NAME,
    A. SCHEDULING_POLYGON_CODE,
    A.FINAL_CLOSE_DATE,
    0 "EENG",
    0 "ECREW",
    E. AFTER_COND_FCT_AMT AS "ACREW",
    0 "ECONT",
    0 "ACONT"
FROM
    WORK_REQUEST A,
    CC.ALL_PEOPLE B,
    WR_COST_ESTIMATE E
WHERE
    (A.FINAL_CLOSE_DATE BETWEEN TO_DATE ('10/01/2012','MM/DD/YYYY') AND TO_DATE ('10/31/2012','MM/DD/YYYY'))
    AND A.ENTRY_PERSON_NO = B.PERSON_NO
    AND A.WR_NO = E.WR_NO
    AND (E.COST_TYPE_CODE = 'LAB' AND E.DESIGN_ASBUILT_DA = 'A' AND E.PROVIDER = 'CO') 
```

联盟

```
SELECT
    A.WO_ID,
    A.WR_TYPE_CODE,
    B.NAME,
    A. SCHEDULING_POLYGON_CODE,
    A.FINAL_CLOSE_DATE,
    0 "EENG",
    0 "ECREW",
    0 "ACREW",
    F.AFTER_COND_FCT_AMT AS "ECONT",
    0 "ACONT"
FROM
    WORK_REQUEST A,
    CC.ALL_PEOPLE B,
    WR_COST_ESTIMATE F
WHERE
    (A.FINAL_CLOSE_DATE BETWEEN TO_DATE ('10/01/2012','MM/DD/YYYY') AND TO_DATE ('10/31/2012','MM/DD/YYYY'))
    AND A.ENTRY_PERSON_NO = B.PERSON_NO
    AND A.WR_NO = F.WR_NO
    AND (F.COST_TYPE_CODE = 'LAB' AND F.DESIGN_ASBUILT_DA = 'D' AND F.PROVIDER = 'CN') 
```

联盟

```
SELECT
    A.WO_ID,
    A.WR_TYPE_CODE,
    B.NAME,
    A. SCHEDULING_POLYGON_CODE,
    A.FINAL_CLOSE_DATE,
    0 "EENG",
    0 "ECREW",
    0 "ACREW",
    0 "ECONT",
    G.AFTER_COND_FCT_AMT AS "ACONT"
FROM
    WORK_REQUEST A,
    CC.ALL_PEOPLE B,
    WR_COST_ESTIMATE G
WHERE
    (A.FINAL_CLOSE_DATE BETWEEN TO_DATE ('10/01/2012','MM/DD/YYYY') AND TO_DATE ('10/31/2012','MM/DD/YYYY'))
    AND A.ENTRY_PERSON_NO = B.PERSON_NO
    AND A.WR_NO = G.WR_NO
    AND (G.COST_TYPE_CODE = 'LAB' AND G.DESIGN_ASBUILT_DA = 'A' AND G.PROVIDER = 'CN')) 
```

通过...分组

```
WO_ID, WR_TYPE_CODE, NAME, SCHEDULING_POLYGON_CODE, FINAL_CLOSE_DATE 
```

按 1 ASC 订购

# c# - 日期时间选择器 C# 格式

> ID：13711358
> 
> 赞同：4
> 
> 时间：2012-12-04T20:31:20.417
> 
> 标签：c#, datetime, wpftoolkit

我有一个`DateTime`选择器可以将到达时间添加到列表中，对此我有 2 个问题：

1.  我怎样才能让它显示日期，比如`12-Jan-2012`而不是`12/01/12`？
2.  我怎样才能让它显示日期之后的时间而不是当前时间，因为这就是显示 atm 的内容。

我当前的代码不是很先进，它只是：

```
theVisit.ArrivalTime = DateTimePicker1.Value 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T20:35:20.480

像这样的东西会显示日期和时间：

```
DateTimePicker1.Value.ToString("d-MMM-yyyy hh:mm:ss"); 
```

要覆盖默认的 DateTimePicker 设置，您可以执行以下操作：

```
DateTimePicker1.Format = DateTimePickerFormat.Custom;
DateTimePicker1.CustomFormat = "d-MMM-yyyy  hh:mm:ss"; 
```

您可以通过修改格式字符串来显示不同的时间，例如：

```
DateTimePicker1.CustomFormat = "d-MMM-yyyy 12:00:00"; 
```

甚至

```
DateTime otherTime = DateTime.Now;
DateTimePicker1.CustomFormat = "d-MMM-yyyy " + otherTime.ToString("hh:mm:ss"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T20:38:41.953

要使其在选择器中以该格式显示，请设置以下属性

```
dateTimePicker1.Format = DateTimePickerFormat.Custom;
dateTimePicker1.CustomFormat = "dd-MMM-yyyy  hh:mm:ss"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T20:38:19.467

您正在寻找 DateTime 格式字符串。在 MSDN 上有一篇很棒的文章。有两种类型：

1.  [标准日期时间格式](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)
2.  [自定义日期时间格式](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

您可以使用这些来构建日期时间以查看您想要的方式。对于您的示例，您将使用：

```
DateTimePicker1.Value.ToString("dd-MMM-yyyy hh:mm:ss") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T20:57:01.240

首先，更改 DateTimePicker 显示日期时间的方式：

```
DateTimePicker1.CustomFormat = "d-MMM-yyyy hh:mm:ss";
DateTimePicker1.Format = System.Windows.Forms.DateTimePickerFormat.Custom; 
```

你的代码：

```
theVisit.ArrivalTime = DateTimePicker1.Value; 
```

不会改变，因为`DateTimePicker1.Value`没有任何不同，它只是根据您的格式显示。

如果您希望控件显示特定时间（而不是当前时间），则必须为控件提供该值：

```
DateTimePicker1.Value = new DateTime(2012, 12, 21, 23, 59, 59); 
```

否则它将显示表单创建时的当前时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-06T00:49:48.457

您可以`datetimepicker`像这样检查它是否为空。

```
if(DatTimePicker1.Text.Equals(" "))
{
     MessageBox.Show("DateTimePicker is empty");
} 
```

# .net - 我可以安全地将 rest 和 wcf 用于后端站点功能吗？

> ID：13711363
> 
> 赞同：-1
> 
> 时间：2012-12-04T20:31:44.767
> 
> 标签：.net, wcf, rest

简而言之，我正在构建我网站的后端部分，并想知道让 ajax 异步 .net 页面以安全的方法与服务器端交互的最简单方法是什么？

我倾向于休息和 wcf，但似乎无法解决我如何保证它的安全。我将拥有客户信息，并且不希望一个客户能够获取另一个客户信息。

我的第一个障碍是实际登录。我已经完成了用户界面上的用户名/密码模式，需要一种简单的方式来进行身份验证。寻找休息似乎没有用，因为结果将是纯文本。

我错过了什么，这应该是一次轻松的散步。请有人让我直接了解如何在 .net 网站上进行安全登录和用户数据管理。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-04T20:38:50.140

查看[ASP.NET Web API](http://www.asp.net/web-api)。WCF 有很多杂乱无章的东西，因为它旨在处理极其复杂的 Web 服务并提供来自所有平台的可访问性。它还需要大量的配置。

另一方面，Web API 是专门围绕 HTTP 设计的，并且可以通过 ajax 轻松使用。它为您提供 RESTful HTTP、HTTPS、简单 XML 和 Json。它无需任何配置即可“正常工作”。

# cocos2d-iphone - GLKit + Cocos2d 2.0？

> ID：13711371
> 
> 赞同：1
> 
> 时间：2012-12-04T20:32:25.723
> 
> 标签：cocos2d-iphone, glkit

我正在尝试使用[GLKBaseEffect](http://developer.apple.com/library/ios/#documentation/GLkit/Reference/GLKBaseEffect_ClassRef/Reference/Reference.html)（来自 GLKit）在基于 Cocos2D 2.0 的游戏中的 CCSprite 上创建灯光效果。

我阅读了很多线程和文章，不幸的是，GLKit 和 Cocos2D 2.0 从未一起使用。

有人可以告诉我在 Cocos2D 2.0 的 CCSprite 上集成一个简单的 GLKBaseEffect（例如灯光效果）的方向吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:28:26.873

GLKit 和 Cocos2D 永远不会一起使用，因为它们都是 OpenGL 包装器。您不能组合、混合或共享它们或它们的功能。每个都使用自己的 OpenGL 上下文。

如果你想要 cocos2d 中的粒子效果，你必须使用粒子设计工具或编写着色器以获得更精细的效果。

# iphone - 为什么在 iOS6 上访问 SQLite 数据库需要更长的时间？

> ID：13711372
> 
> 赞同：1
> 
> 时间：2012-12-04T20:32:26.160
> 
> 标签：iphone, ios, database, sqlite, fmdb

在我的 iPhone 应用程序上，我使用的是 SQLite 数据库，为此我依赖[fmdb](https://github.com/ccgus/fmdb)。在装有 iOS 5 的 iPhone 上，初始 DB 访问最多需要 10 秒，但在 iOS 6 上需要 30 到 2 分 40 秒（这在 iPhone 4 和 4S 上，在 iPhone 5 上大约需要 15-20 秒）。我注意到的一件事是时间总是一致的，如果在一部手机上需要 60 秒，它总是需要大约 60 秒。

是否有任何理由在 iOS 6 中使用 fmdb 比在 iOS 5 上慢？有没有更好的替代 fmdb 的方法？

在代码方面，这是我正在做的一个示例：

**获取数据**

```
+ (NSMutableArray*) getLevadas
{
    FMDatabase *db = [DBAdapter getDB];
    if([db open])
    {
        FMResultSet *result = [db executeQuery:@"SELECT Levada.Levada_id, Levada.Nome, a.Nome as Inicio, b.Nome as Fim, Dificuldade.NomePT as DificuldadePT, Dificuldade.NomeES as DificuldadeES, Dificuldade.NomeEN as DificuldadeEN, Altitude, Distancia, DescricaoPT, DescricaoEN, DescricaoES, Latitude, Longitude, Autocarro, Levada.dataModificado, a.Sector, Levada.Duracao, b.Sector as SectorFim, GROUP_CONCAT(DISTINCT PalavrasChave.NomePT) as PalavrasChavePT, GROUP_CONCAT(DISTINCT PalavrasChave.NomeEN) as PalavrasChaveEN, GROUP_CONCAT(DISTINCT PalavrasChave.NomeES) as PalavrasChaveES, GROUP_CONCAT(DISTINCT Equipamento.NomeEN) as EquipamentoEN, GROUP_CONCAT(DISTINCT Equipamento.NomePT) as EquipamentoPT, GROUP_CONCAT(DISTINCT Equipamento.NomeES) as EquipamentoES, Levada.Coordenadas, Levada.LongitudeFim, Levada.LatitudeFim, Levada.PontosInteresse, GROUP_CONCAT(DISTINCT Fotos.url) as Fotos FROM Levada, Localizacoes as a, Localizacoes as b, Dificuldade, Levada_has_PalavrasChave, PalavrasChave, Levada_has_Equipamento, Equipamento, Fotos WHERE ((Inicio_id = a.Localizacoes_id) AND (Fim_id = b.Localizacoes_id) AND (Levada.Dificuldade_id = Dificuldade.Dificuldade_id) AND (Levada.Levada_id = Levada_has_PalavrasChave.Levada_id) AND (PalavrasChave.PalavrasChave_id = Levada_has_PalavrasChave.PalavrasChave_id) AND (Levada.Levada_id = Levada_has_Equipamento.Levada_id) AND (Levada_has_Equipamento.Equipamento_id = Equipamento.Equipamento_id) AND Levada.Levada_id = Fotos.idLevada) GROUP BY Levada.Levada_id ORDER BY Levada.Nome;"];

        NSMutableArray *levadas = [[NSMutableArray alloc] init];

        while ([result next])
        {
            Levada *l = [[Levada alloc] init];
            [l ID:[NSNumber numberWithInt: [result intForColumn:@"Levada_id"]]];
            [l Nome:[result stringForColumn:@"Nome"]];
            [l Dificuldade:[result stringForColumn:[NSString stringWithFormat:@"Dificuldade%@", NSLocalizedString(@"lingua", NULL)]]];
            [l Distancia:[result objectForColumnName:@"Distancia"]];
            [l Duracao:[result stringForColumn:@"Duracao"]];
            [l Inicio:[result stringForColumn:@"Inicio"]];
            [l Fim:[result stringForColumn:@"Fim"]];
            [l Altitude:[result stringForColumn:@"Altitude"]];
            [l PalavrasChave:[[result stringForColumn:[NSString stringWithFormat:@"PalavrasChave%@", NSLocalizedString(@"lingua", NULL)]] stringByReplacingOccurrencesOfString:@"," withString:@", "]];
            [l Descricao:[result stringForColumn:[NSString stringWithFormat:@"Descricao%@", NSLocalizedString(@"lingua", NULL)]]];
            [l Fotos: [[result stringForColumn:@"Fotos"] componentsSeparatedByString:@","]];
            [l Latitude:[NSNumber numberWithDouble:[[result stringForColumn:@"Latitude"] doubleValue]]];
            [l LatitudeFim:[NSNumber numberWithDouble:[[result stringForColumn:@"LatitudeFim"] doubleValue]]];
            [l Longitude:[NSNumber numberWithDouble:[[result stringForColumn:@"Longitude"] doubleValue]]];
            [l LongitudeFim:[NSNumber numberWithDouble:[[result stringForColumn:@"LongitudeFim"] doubleValue]]];
            [l Coordenadas:[result stringForColumn:@"Coordenadas"]];
            [l Equipamento: [[result stringForColumn:[NSString stringWithFormat:@"Equipamento%@", NSLocalizedString(@"lingua", NULL)]] componentsSeparatedByString:@","]];
            [l DataModificado:[result stringForColumn:@"dataModificado"]];
            [l Sector: [result stringForColumn:@"Sector"]];
            [l SectorFim: [result stringForColumn:@"SectorFim"]];
            [l Autocarro: [result stringForColumn:@"Autocarro"]];
            [levadas addObject:l];
        }
        [result close];
        [db close];
        return levadas;
    }
    return nil;
} 
```

**打开数据库**

```
+ (FMDatabase*) getDB
{
    [DBAdapter copyDatabaseIfNeeded];
    FMDatabase *db = [FMDatabase databaseWithPath:[DBAdapter getDBPath]];
    [db setLogsErrors:YES];
    return db;
}
+ (void) copyDatabaseIfNeeded
{
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error;
    NSString *dbPath = [DBAdapter getDBPath];
    BOOL success = [fileManager fileExistsAtPath:dbPath];

    if(!success)
    {
        NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"WalkMe.sqlite"];
        success = [fileManager copyItemAtPath:defaultDBPath toPath:dbPath error:&error];
    }
}
+ (NSString *) getDBPath
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];
    return [documentsDir stringByAppendingPathComponent:@"WalkMe.sqlite"];
} 
```

**更新：**

这是时间分析的屏幕截图：

![时间分析](../Images/58c93e846bce1dd34c52d83c34ea13d3.png)

据我所知，最耗时的是 [FMResultSet next] 指令，更具体地说是`rc = sqlite3_step([_statement statement]);`在 FMDB 下一个代码内部。所以我猜问题真的是 SELECT 语句。

**更新 2：**

~~我试图将 SQL 语句简化为[FMResultSet next] `SELECT Levada_id FROM Levada`~~ **Always clean your project**~~中仍然需要太多时间~~。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T22:14:13.457

花了一些时间详细浏览了 FMDB 代码，没有什么可以解释这些延迟。FMDB 是一个非常薄的包装器，几乎可以肯定不会对这种行为负责。那里也有足够多的 SQLite/FMDB 用户，如果 iOS 6 中确实存在与 SQLite/FMDB 相关的问题，我会感到非常惊讶。我原以为如果有的话，我们现在应该已经听说了很多。

但是看看你的 SELECT 语句，这似乎很复杂，如果我要赌钱，如果问题实际上与数据库有关，我敢打赌这就是延迟的根源。如果您单步执行代码，这将很容易验证。或者在之前和之后放入 NSLog 语句，你会得到带时间戳的日志语句，这说明了问题。

底线，假设问题实际上与数据库有关，几乎可以肯定是 SQLite 问题。如果您重写此函数以使用`sqlite3_xxx()`调用完成所有操作，您可能会看到相同的性能问题。话虽如此，我还没有看到 FMDB/SQLite 在转向 iOS6 时出现任何性能问题。我还以为如果 iOS 6 上的 SQLite/FMDB 存在一些普遍的性能问题，我们会听到令人毛骨悚然的嚎叫声。

我将专注于通过 SQLite 的[EXPLAIN](http://www.sqlite.org/lang_explain.html)放置该 sql 语句，然后优化表，确保您具有适当的索引或以其他方式重组 SQL。只需在计算机上的 SQLite 中打开数据库，然后尝试在那里分析查询。

至于在 iOS 6 和 iOS 5 上可能导致这种性能问题的原因，我不熟悉它打开数据库的方式的任何变化。

如果您的分析确认 SQLite 存在问题，或者更确切地说，它是否与 SQLite/FMDB 完全无关，将会非常有趣。

* * *

**更新：**

我决定检查一下 iOS 5.1.1 和 6.0.1 中的 SQLite 配置之间是否有任何有趣的配置更改，但没有什么让我感到惊讶。（不同的线程模型肯定会影响性能，但它们看起来是一样的。）iOS 6 肯定使用了稍微更新的 SQLite 版本，但我怀疑这会对它产生负面影响。

```
设备：iPhone 操作系统
iOS：5.1.1
SQLite 配置：
  版本：3.7.7
  线程安全：是
  选项：
    ENABLE_FTS3：是的
    ENABLE_FTS3_PARENTHESIS：是的
    ENABLE_LOCKING_STYLE=1：是的
    ENABLE_RTREE：是的
    OMIT_AUTORESET：是
    OMIT_BUILTIN_TEST：是的
    OMIT_LOAD_EXTENSION：是的
    TEMP_STORE=1：是的
    线程安全=2：是

```

```
设备：iPhone 操作系统
iOS：6.0.1
SQLite 配置：
  版本：3.7.13
  线程安全：是
  选项：
    库迪尔：是的
    ENABLE_FTS3：是的
    ENABLE_FTS3_PARENTHESIS：是的
    ENABLE_LOCKING_STYLE=1：是的
    ENABLE_RTREE：是的
    OMIT_AUTORESET：是
    OMIT_BUILTIN_TEST：是的
    OMIT_LOAD_EXTENSION：是的
    TEMP_STORE=1：是的
    线程安全=2：是

```

# entity - System.Data.Entity.ModelConfiguration.Configuration.ForeignKeyNavigationPropertyConfiguration 不包含 HasForeignKey 的定义

> ID：13711374
> 
> 赞同：3
> 
> 时间：2012-12-04T20:32:31.340
> 
> 标签：entity

我正在使用 EF 5.0.0 并尝试将其与现有数据库一起使用。我的模型中有 2 个类：

```
public class Result
{
    public int DateId { get; set; }

    //[ForeignKey("DateId")]
    public Date Date { get; set; }
}

public class Date 
{
    int DateId { get; set; }
    string DateFull { get; set; }
} 
```

在数据库模式中，结果表的列称为“resultDateKey”，并且使用 FluentAPI 配置我已映射到该列

```
 Property(r => r.DateId).HasColumnName("resultDateKey"); 
```

现在我希望将同一列视为外键。

如果我使用 DataAnnotations（请参阅结果类中的注释行）它可以正常工作。但我想使用 Fluent API 来做到这一点，并尝试使用：

```
 HasRequired(r => r.Date).WithOptional().HasForeignKey(r => r.DateId); 
```

给出一个错误：

System.Data.Entity.ModelConfiguration.Configuration.ForeignKeyNavigationPropertyConfiguration 不包含 HasForeignKey 的定义

我看不到 HasForeignKey() 方法。

知道为什么我无法使用 Fluent API 完成这项工作吗？

任何帮助表示赞赏。谢谢你。

* * *

# c# - .NET 远程处理：RegisterWellKnownServiceType 出现异常“Value NULL”

> ID：13711380
> 
> 赞同：1
> 
> 时间：2012-12-04T20:32:50.747
> 
> 标签：c#, remoting

我是 .NET 远程处理和 C# 的新手。我需要一个客户端/服务器应用程序并希望使用 .NET Remoting 来处理这个问题。我为远程处理对象 EchoServer 类编写了一个类库，并带有一些测试方法。

我在 Visual Studio 中添加到我的服务器项目的类库。我也添加了程序集“System.Runtime.Remoting”。

以下是我的服务器的代码：

```
 using System;
        using System.Collections.Generic;
        using System.ComponentModel;
        using System.Data;
        using System.Drawing;
        using System.Linq;
        using System.Text;
        using System.Windows.Forms;
        using System.Runtime.Remoting;
        using System.Runtime.Remoting.Channels;
        using System.Runtime.Remoting.Channels.Tcp;
        using Remoting; //Namespace Lib

        namespace Server
         {
         public partial class Server : Form
{
    public Server()
    {
        InitializeComponent();

        TcpChannel serverChannel = null;

        try
        {
            serverChannel = new TcpChannel(9998);
            lvStatus.Items.Add("Server is listening on port 8089...");

            string strIn = "";

            ChannelServices.RegisterChannel(serverChannel, true);

            RemotingConfiguration.RegisterWellKnownServiceType(Type.GetType("Remoting.EchoServer, remoting_dll"), "Echo", WellKnownObjectMode.SingleCall);
        }
        catch (Exception ex)
        {
            ChannelServices.UnregisterChannel(serverChannel);
            MessageBox.Show(ex.Message.ToString());
        }
    }
} 
```

}

如果我启动服务器，我会得到一个异常：

该值不能为 NULL 参数名称：类型

我已经尝试了教程的其他代码，但是如果远程对象的类被实现为类库或者直接在我的项目中作为类，我将得到相同的异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:29:20.217

您可以发布远程处理的实施吗？我认为你的错误是下一个：

> “Remoting.EchoServer，remoting_dll”

因此，您应该正确使用 Type.GetType。

工作代码示例：

```
static void Main(string[] args)
{
    Server();
}

static void Server()
{
    Console.WriteLine("Server started...");
    var httpChannel = new HttpChannel(9998);
    ChannelServices.RegisterChannel(httpChannel);
    RemotingConfiguration.RegisterWellKnownServiceType(Type.GetType("Server.Program+SomeClass"), "SomeClass", WellKnownObjectMode.SingleCall);
    Console.WriteLine("Press ENTER to quit");
    Console.ReadLine();
}

public interface ISomeInterface
{
    string GetString();
}

public class SomeClass : MarshalByRefObject, ISomeInterface
{
    public string GetString()
    {
        const string tempString = "ServerString";
        Console.WriteLine("Server string is sended: {0}", tempString);
        return tempString;
    }
} 
```

# javascript - javascript中的Facebook服务器时间

> ID：13711384
> 
> 赞同：1
> 
> 时间：2012-12-04T20:33:18.377
> 
> 标签：javascript, facebook, clock

我试图在我的网站上显示与 facebook 服务器同步的可变时钟。fb 服务器时间在： [https ://api.facebook.com/method/fql.query?query=SELECT+now%28%29+FROM+link_stat+WHERE+url+%3D+%271.2%27&format=json](https://api.facebook.com/method/fql.query?query=SELECT+now%28%29+FROM+link_stat+WHERE+url+%3D+%271.2%27&format=json)

如何在不刷新页面的情况下使其每秒都可以更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:09:58.727

假设一些非写函数，它应该是这样的：

```
var requestBegin = Date.now();
getServertimeFromFacebook(function callback(fbTime) {
    var requestEnd = Date.now();
    var latency = (requestEnd - requestBegin) / 2;
    var curDevicetime = Date.now(); // = requestEnd, of course
    var difference = fbTime - latency - curDeviceTime;

    function clock() {
        var cur = Date.now();
        var curFbTime = cur + difference;
        show(curFbTime); // print, log, whatever
    };
    setInterval(clock, …); // you could use a self-adjusting clock
                           // by using a setTimeout for each tick
}); 
```

你可以做

```
show = function(t) { console.log(new Date(t).toString()); };
getServertimeFromFacebook = function(cb) {
    ajax("https://api.facebook.com/method/fql.query?query=SELECT+now%28%29+FROM+link_stat+WHERE+url+%3D+%271.2%27&format=json", function(responsetext) {
         var obj = JSON.parse(responsetext);
         var ts = obj[0].anon,
             tms = ts * 1000;
         cb(tms);
    });
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:49:05.453

我不会每秒都调用 API。

相反，我会在一开始只获得一次 Facebook 服务器时间。然后，我会通过使用 javascript 循环每秒增加我的**时间值：**

`setTimeout(function() { /* increment time */ }, 1000);`

Bergi：`[{"anon":1354654854}]`是一个[unix时代](http://en.wikipedia.org/wiki/Unix_time)。事实上，Facebook 经常（总是？）使用这种表示来处理时间。

# java - 获取屏幕上鼠标滚轮的大小

> ID：13711385
> 
> 赞同：0
> 
> 时间：2012-12-04T20:33:19.937
> 
> 标签：java

您好，我正在使用 Java 中的鼠标滚轮事件进行练习，因此我制作了一个圆圈，当鼠标滚轮移动时，该圆圈会增长和虾米。现在我还想在鼠标指针旁边的屏幕上显示“MousWheel”的大小。谁能告诉我如何做到这一点的例子？

这就是我现在得到的。

```
public class MouseWheelPanel extends JPanel implements MouseWheelListener {

private int grootte = 50;

public MouseWheelPanel() {
    this.addMouseWheelListener(this);
}

public void paintComponent( Graphics g ) {
    super.paintComponent( g );
    g.setColor( Color.YELLOW ); 
    g.fillOval( 10, 10, grootte, grootte );
}

public void mouseWheelMoved( MouseWheelEvent e ) {
    // TODO Auto-generated method stub
    String 
    grootte += e.getWheelRotation();
    repaint(); 
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:08:41.287

假设您也对定位文本感兴趣。查找[FontMetrics](http://docs.oracle.com/javase/6/docs/api/java/awt/FontMetrics.html)。这将使大小字符串在圆圈中居中。

```
public void paintComponent(Graphics g)
{
    super.paintComponent(g);
    g.setColor(Color.YELLOW);
    g.fillOval(10, 10, grootte, grootte);

    String str = ""+grootte;
    FontMetrics fm = g.getFontMetrics();
    Rectangle2D strBounds = fm.getStringBounds(str, g);

    g.setColor(Color.BLACK);
    g.drawString(str, 10 + grootte/2 - (int)strBounds.getWidth()/2, 10 + grootte/2 + (int)strBounds.getHeight()/2);
} 
```

# c++ - 类“错误标识符未定义”

> ID：13711389
> 
> 赞同：0
> 
> 时间：2012-12-04T20:33:36.770
> 
> 标签：c++, class, syntax-error

我假设这是一个小的语法问题，因为当我删除类并仅在我的 cpp 文件中工作时，它运行没有问题......

我需要使用将由主函数调用的类。我遇到的问题是它们在 .cpp 文件中没有被识别。

如果在头文件中声明数组或常量会更好，请告诉我......

```
#include '<iostream>'
#include "Menu.h"
using namespace std;

const double RestaurantCheck::MINTAX=.01, RestaurantCheck::MAXTAX=.12,RestaurantCheck::MINTIP=.05,RestaurantCheck::MAXTIP=.20,RestaurantCheck::DEFAULTTAX=.065,RestaurantCheck::DEFAULTTIP=.15;

//Error nonstatic data member may not be defiend outside of its class
RestaurantCheck::MexicanMenu[10].ItemName="Marisco El Sol";
RestaurantCheck::MexicanMenu[10].ItemDesc="Mouth watering seafood     appetizer made with shrimp, octopus, scallops, mushrooms, red and green peppers. Garnished with lettuce and avocado.";
RestaurantCheck::MexicanMenu[10].ItemCost=10.95;

RestaurantCheck::MexicanMenu[1].ItemName="Taquitos";
RestaurantCheck::MexicanMenu[1].ItemDesc="Rolled flour tortilla fried with your choice of chicken, shredded beef or shredded pork. Served over a bed of lettuce with Parmesan, tomatoes, guacamole & sour cream.";
RestaurantCheck::MexicanMenu[1].ItemCost=7.95;

            ...

            RestaurantCheck::MexicanMenu[0].ItemName=" ";//my null set.
            RestaurantCheck::MexicanMenu[0].ItemDesc=" ";
            RestaurantCheck::MexicanMenu[0].ItemCost=0;

void main()
{
    double ITax=0,ITip=0,Subtotal=0,UserTip=0,UserTax=0;
    bool exit=false;

    int count=0;//delete me after tests

    while (exit=false)
    {
        cout<<"Please input all tips as floating numbers 1% = .01 and 12% = .12\n";
        cout<<"What value do you want to set the tip? ";
            cin>>UserTip;
        cout<<endl<<"What value do you want to set the tax? ";
            cin>>UserTax;

        setFee(UserTip,UserTax);//error: Identifier is undefined
        placeOrder();... 
```

标题

```
#ifndef Menu_H
#define Menu_H
#include <iostream>
#include <iomanip>
#include <string>
using namespace std;

class RestaurantCheck
{
    struct Restaurant
    {
        string ItemName;
        string ItemDesc;
        double ItemCost;
    };

    static const double MINTAX,MAXTAX,MINTIP,MAXTIP, DEFAULTTAX,DEFAULTTIP;
    double Subtotal,CTax,TaxAmt,CTip,TipAmt;
    Restaurant Order[10],MexicanMenu[4];

    void presentMenu(Restaurant DispMenu[],int NumOfItems);

public:
    double calculateTax(double Subtotal,double CTax);
    double calculateTip(double Subtotal,double CTip);
    void setFee(double ,double );
    double issueCheck(Restaurant Order[],double ITax,double ITip,double Subtotal);
    void placeOrder(Restaurant Menu[],int Num_Menu,Restaurant IOrder[],int Num_Order);
    //void setMenu();

};
void RestaurantCheck::setFee(double UTip,double UTax)
{
    if (UTip>=MINTIP&&UTip<=MAXTIP)
        CTip=UTip;
    else
        CTip=DEFAULTTIP;

    if  (UTax>=MINTAX&&UTax<=MAXTAX)
        CTax=UTax;
    else
        CTax=DEFAULTTAX;
    //return(true);
};` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:37:36.347

`setFee()`是 class 的成员函数`RestaurantCheck`，因此您需要该类的实例才能调用该方法。

```
RestaurantCheck r;
r.setFee(x,y); 
```

一旦你解决了这个问题，你会发现很多很多错误。

# tcp - 计算网络吞吐量

> ID：13711394
> 
> 赞同：2
> 
> 时间：2012-12-04T20:33:59.140
> 
> 标签：tcp, ip, ethernet, throughput

假设我有一个 4MBits 网络并且我想计算数据吞吐量，这是考虑最大传输速率减去来自以太网/IP/TCP 标头的开销。在网上阅读我发现 TCP 段的 MSS（最大段大小）是 576 - 20 - 20，最后两个是 TCP 和 IP 标头开销，导致 93% 的数据，这意味着我将只使用我的 4MBits 链接中有 93% 用于传输数据。现在链接层开销在哪里？不应该也加吗？如果我没有错，以太网标头大约是 46 字节，所以最终总和将是 576 - 20 - 20 - 46 = 490，导致 85% 的数据吞吐量，但我做错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T20:53:09.473

只需自下而上地工作。常规以太网帧（无巨型帧，无 vlan 标记）`1542 bytes`总共有`1500 bytes`. 一个没有选项的 IPv4 标头是`20 bytes`，一个没有选项的 TCP 标头也是`20 bytes`。因此，您最终得到了链路层帧`1460 bytes`的可能有效载荷。`1542 byte`所以你的效率是`1460/1542=0.9468223086900129`，导致最大吞吐量为`3.7872892347600517Mbps`.

但是请注意，这通常会更低。这是在 TCP 会话建立之后并且您是该链路的唯一用户时，您可以在全双工链路上获得的连续流的理论最大速率。另请注意，一旦您以稍高的速率发送一段时间，您的链接就会拥塞，您会看到下降，并且由于启动缓慢，您的实际 TCP 吞吐量可能会显着下降。

如果链路是无线的 (802.11)，由于 RTS/CTS 机制，计算会变得复杂得多，但它`/2`仅适用于一个活动用户，并且没有包含损失，这是不现实的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T00:25:50.190

一般来说，协议会影响网络吞吐量，而不仅仅是数据包开销。您提到您想测量以太网/IP/TCP 网络上的吞吐量，但这些协议的数据包开销的影响并不是唯一要考虑的事情。TCP 是一个面向连接的协议，它使用 ACK 来表示是否已接收到数据包。user1777914 错过了关于 ACK 的标记，但正在做一些事情——它们不再占用任何空间，但它们可以延迟数据包的传输。随着延迟的增加，整体网络吞吐量可能会根据应用程序或托管操作系统期望响应的频率而降低。

W. Richard Stevens 写了一本关于 TCP/IP 的令人惊奇的书。 [这](http://flylib.com/books/en/3.223.1.249/1/)是一个解释理论 TCP 性能、影响它的因素以及它是如何计算的例外。

Nagle 算法也有助于延迟，但如果禁用会降低吞吐量。

# scala - 在 ubuntu 上安装 sbt

> ID：13711395
> 
> 赞同：63
> 
> 时间：2012-12-04T20:34:01.070
> 
> 标签：scala, debian, ubuntu-12.04, sbt, deb

我已经在 Ubuntu 上安装了 sbt。

```
:~/bin/sbt/bin$ ls
classes    sbt      sbt-launch.jar       target
jansi.jar  sbt.bat  sbt-launch-lib.bash  win-sbt 
```

但是，每当我尝试启动 sbt（从 sbt 所在的同一目录）时，它都不起作用：

```
No command 'sbt' found, did you mean:
 Command 'skt' from package 'latex-sanskrit' (universe)
 Command 'sb2' from package 'scratchbox2' (universe)
 Command 'sbd' from package 'cluster-glue' (main)
 Command 'mbt' from package 'mbt' (universe)
 Command 'sbmt' from package 'atfs' (universe)
 Command 'lbt' from package 'lbt' (universe)
 Command 'st' from package 'suckless-tools' (universe)
 Command 'sb' from package 'lrzsz' (universe) 
```

我是 linux 新手，我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2012-12-05T08:20:11.497

在 ubuntu 上安装 SBT 最简单的方法是`deb`Typesafe 提供的包。

运行以下外壳命令：

1.  `wget http://apt.typesafe.com/repo-deb-build-0002.deb`
2.  `sudo dpkg -i repo-deb-build-0002.deb`
3.  `sudo apt-get update`
4.  `sudo apt-get install sbt`

你就完成了！

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-05-18T07:51:47.763

好像您安装了 sbt 的 zip 版本，这很好。但是如果你在 Ubuntu 上，我建议你安装原生的 debian 包。这就是我设法在我的 Ubuntu 12.04 上安装它的方式。在这里查看： [http](http://www.scala-sbt.org/release/docs/Installing-sbt-on-Linux.html) ://www.scala-sbt.org/release/docs/Installing-sbt-on-Linux.html 或者直接从[这里](https://dl.bintray.com/sbt/debian/sbt-0.13.15.deb)下载。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-12-04T20:40:24.623

> `sbt`未找到命令

它是说那`sbt`不在你的道路上。尝试`./sbt`从`~/bin/sbt/bin`可执行`sbt`文件所在的位置运行，以验证它是否正确运行。还要检查您是否对`sbt`可执行文件具有执行权限。如果这可行，则添加`~/bin/sbt/bin`到您的路径并`sbt`应该从任何地方运行。

请参阅有关将目录添加到路径的此[问题。](https://askubuntu.com/questions/60218/how-to-add-a-directory-to-my-path)

要验证[路径设置是否正确，](http://www.troubleshooters.com/linux/prepostpath.htm)请使用`which`LINUX 上的命令。输出将如下所示：

```
$ which sbt
/usr/bin/sbt 
```

最后，要验证`sbt`是否正在运行，请尝试运行`sbt -help`或以类似方式运行。-help 的输出将如下所示：

```
$ sbt -help
Usage: sbt [options]

  -h | -help         print this message
  ... 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-04T21:22:00.980

作为替代方法，您可以将[SBT Extras](https://raw.github.com/paulp/sbt-extras/master/sbt)脚本保存到名为 sbt.sh 的文件中，并将权限设置为可执行。然后将此文件添加到您的路径中，或者将其放在您的 ~/bin 目录下。

这里的好处是，它将根据您的项目属性下载和使用正确版本的 SBT。如果您倾向于编译从 GitHub 和其他网站提取的开源项目，这是一个很好的便利。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-05-17T23:07:05.647

我的猜测是目录 ~/bin/sbt/bin 不在您的 PATH 中。

要执行当前目录中的程序或脚本，您需要在命令前加上 ./，如下所示：

```
./sbt 
```

这是 linux 中的一项安全功能，以防止恶意方在您的主目录中删除文件（例如）覆盖系统命令（和其他程序）。想象一个名为“ls”的脚本，它在执行 ls 命令之前将您的 /etc/passwd 文件通过电子邮件发送给第 3 方……或者执行“rm -rf .”的脚本……

也就是说，除非您需要最新源代码中的特定内容，否则最好按照范式在他的帖子中所说的进行，然后从 Typesafe 存储库中安装它。

# html - 给父 div 与子 div 相同的高度

> ID：13711397
> 
> 赞同：1
> 
> 时间：2012-12-04T20:34:16.973
> 
> 标签：html, css

我有个问题。我有（简化）这段代码：

```
<div class="page">
  <div class="leftcolumn">content</div>
  <div class="midcolumn">some text
      <div class="midcolumn content">more text</div></div>
   <div class="rightcolumn">a nice widget, or so</div>
</div> 
```

左、中和右列只是浮动并具有自适应 (=%) 宽度，并且效果很好。不幸的是，三列的高度是正确的，它们只是其中内容的高度。不幸的是，div 页面的高度为 1px，即使其中的列更大。如何让页面 div 获得相同的列高度。例如，如果三列中最大的列的高度为 1000px，我希望 div 页面的高度为 1000px。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T20:35:58.793

添加`overflow:auto`到您的页面 div。

# .net - 使用 Google Apps API 从 UserFeed 检索用户时为空密码

> ID：13711398
> 
> 赞同：0
> 
> 时间：2012-12-04T20:34:19.697
> 
> 标签：.net, google-apps, google-provisioning-api

我正在尝试使用带有 .net 的 Google Apps api 检索我域中的所有用户帐户！

但问题是：UserEntry.Login.Password 总是空的。

是否可以使用 api 检索带有密码的用户？如果没有，是否有使用域管理员密码登录用户 Gmail 的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:46:11.017

不会。API 不会返回用户密码。管理员可以更新用户密码，但不能检索它。

如需参考，请参阅： [https ://developers.google.com/google-apps/provisioning/reference#google_apps_tag_apps:login](https://developers.google.com/google-apps/provisioning/reference#google_apps_tag_apps:login)

# iphone - 动态数组作为节标题

> ID：13711399
> 
> 赞同：0
> 
> 时间：2012-12-04T20:34:20.153
> 
> 标签：iphone, arrays, tableview, exc-bad-access

我有一个主数组，其中包含一大堆字典，我想做的是让所有这些字典根据它们分配的标签进行排序。这是字典的外观：

```
date = "2012-12-04 20:26:04 +0000";
name = H;
tag = "#J"; 
```

下面是主数组的外观：

```
MAIN_ARRAY 
   - dict1
   - dict2
   - dict3 
```

我想像这样对主数组进行排序：

```
MAIN_ARRAY
     - tag1
       - dict1
       - dict2
     - tag2
       - dict3 
```

这是我的代码：

```
-(NSArray *)returnTagContent {    
    NSArray *tags = [all valueForKey:@"tag"];
    NSMutableArray *adoptTags = [[[NSMutableArray alloc] init] autorelease];
    for (NSString *tagQuery in tags) {
        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"tag CONTAINS[cd] %@", tagQuery];
        NSArray *roughArray = [all filteredArrayUsingPredicate:predicate];
        NSArray *tagContent = [[NSSet setWithArray:roughArray] allObjects];
        [adoptTags addObject:tagContent];
    }
    return adoptTags;
} 
```

它返回数组，但现在我想将它组织成节标题。我该怎么办？

我还有另一段代码返回部分标题标题有问题：

```
-(NSString *)returnTitleForTags {
    NSString *uniqueTag = nil;
    for (NSArray *tagContent in allTags) {
        uniqueTag = [[[tagContent valueForKey:@"tag"] allObjects] lastObject];
    }
    return uniqueTag;
} 
```

问题？好吧，我知道这是因为检索数组对象的`lastObject`任何其他想法。`NSString`

**更新：**新代码更改。

我更新数组以在单击按钮时显示部分，如下所示：

```
isTagFilterOn=YES;
[self loadSectionsArray];
[self.tableView reloadData]; 
```

这是代码`cellForRowAtIndexPath:`

```
if (isTagFilterOn==YES) {
    NSDictionary *dict = [[sectionsArray objectAtIndex:indexPath.section] objectAtIndex:indexPath.row];
    cell.textLabel.text = [dict valueForKey:@"name"];
    cell.detailTextLabel.text = [dict valueForKey:@"date"];
}
else {
    NSString *object = all[indexPath.row];
    cell.textLabel.text = [object valueForKey:@"name"];
    cell.detailTextLabel.text = [object valueForKey:@"tag"];
} 
```

其余的部分

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    if (isTagFilterOn==YES) {
        return [sectionsArray count];
    }
    else {
        return 1;
    }
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if (isTagFilterOn==YES) {
        return [[sectionsArray objectAtIndex:section] count];
    }
    return all.count;
}

-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    if (isTagFilterOn==YES) {
        NSDictionary *dict = [[sectionsArray objectAtIndex:section] objectAtIndex:0];
        return [dict objectForKey:@"tag"];
    }
    return nil;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:58:36.970

我认为如果您在为表视图数据源创建数组之前删除重复的“标签”，您的任务会变得更容易：

```
// All tags:
NSArray *tags = [mainArray valueForKey:@"tag"];
// Remove duplicates and sort:
tags = [[[NSSet setWithArray:tags] allObjects] sortedArrayUsingSelector:@selector(compare:)];

// Build an "array of arrays (of dictionaries)" as data source:
sectionsArray = [NSMutableArray array];
for (NSString *tag in tags) {
    NSPredicate *pred = [NSPredicate predicateWithFormat:@"tag == %@", tag];
    NSArray *onesection = [mainArray filteredArrayUsingPredicate:pred];
    [sectionsArray addObject:onesection];
} 
```

例如，如果`mainArray`是

```
(
    { date = "2012-12-04 20:26:04 +0000"; name = H; tag = "#J"; },
    { date = "2013-12-04 20:26:04 +0000"; name = X; tag = "#J"; },
    { date = "2014-12-04 20:26:04 +0000"; name = Z; tag = "#L"; }
) 
```

那么`sectionsArray`将是

```
(
    (
        { date = "2012-12-04 20:26:04 +0000"; name = H; tag = "#J"; },
        { date = "2013-12-04 20:26:04 +0000"; name = X; tag = "#J"; }
    ),
    (
        { date = "2014-12-04 20:26:04 +0000"; name = Z; tag = "#L"; }
    )
) 
```

您可以轻松访问每个部分和部分中的每一行：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [sectionsArray count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [[sectionsArray objectAtIndex:section] count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = ...;
    }
    NSDictionary *dict = [[sectionsArray objectAtIndex:indexPath.section] objectAtIndex:indexPath.row];
    cell.textLabel.text = [dict objectForKey:@"name"];
    cell.detailTextLabel.text = [dict objectForKey:@"date"];
    return cell;
}

-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    NSDictionary *dict = [[sectionsArray objectAtIndex:section] objectAtIndex:0];
    return [dict objectForKey:@"tag"];
} 
```

# gcc - 与 NEON 内在函数的数据类型兼容性

> ID：13711407
> 
> 赞同：4
> 
> 时间：2012-12-04T20:35:06.720
> 
> 标签：gcc, arm, neon, intrinsics

我正在使用 C++ 代码中的 NEON 内在函数进行 ARM 优化。我理解并掌握了大多数打字问题，但我被困在这个问题上：

该指令`vzip_u8`返回一个`uint8x8x2_t`值（实际上是一个由两个组成的数组`uint8x8_t`）。我想将返回的值分配给一个普通的`uint16x8_t`. 我认为没有适当`vreinterpretq`的内在实现这一目标，并且拒绝了简单的演员表。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T00:07:54.723

一些定义要清楚地回答......

[NEON](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.set.devlib/index.html)有 32 个寄存器，64 位宽（双视图为 16 个寄存器，128 位宽）。

> > NEON 单元可以查看相同的寄存器组：
> > 
> > *   十六个 128 位四字寄存器，Q0-Q15
> > *   三十二个 64 位双字寄存器，D0-D31。

`uint16x8_t`是一种需要 128 位存储的类型，因此它需要在`quadword`寄存器中。

ARM NEON Intrinsics 有一个`vector array data type`在[ARM® C 语言扩展](http://infocenter.arm.com/help/topic/com.arm.doc.ihi0053a/IHI0053A_acle.pdf)中调用的定义：

> > ...用于加载和存储操作、表查找操作以及**作为返回一对向量的操作的结果类型。**

[vzip](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0489c/CIHCACAB.html)指令

> > ... 交错两个向量的元素。
> > 
> > vzip Dd, Dm

并且有一个[内在](http://gcc.gnu.org/onlinedocs/gcc/ARM-NEON-Intrinsics.html)的喜欢

```
uint8x8x2_t vzip_u8 (uint8x8_t, uint8x8_t) 
```

从这些我们可以得出结论，uint8x8x2_t 实际上是两个随机编号的双字寄存器的列表，因为 vzip 指令对输入寄存器的顺序没有任何要求。

现在答案是……

`uint8x8x2_t`可以包含不连续的两个双字寄存器，而`uint16x8_t`是由两个连续的双字寄存器组成的数据结构，其中第一个具有偶数索引 (D0-D31 -> Q0-Q15)。

因此，您不能将`vector array data type`两个双字寄存器转换为四字寄存器......很容易。

编译器可能足够聪明，可以帮助您，或者您可以强制转换，但是我会检查生成的程序集的正确性和性能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-22T21:34:04.270

您可以使用 vcombine_* 内在函数从两个 64 位向量构造一个 128 位向量。因此，您可以像这样实现您想要的。

```
#include <arm_neon.h>

uint8x16_t f(uint8x8_t a, uint8x8_t b)
{
    uint8x8x2_t tmp = vzip_u8(a,b);
    uint8x16_t result;
    result = vcombine_u8(tmp.val[0], tmp.val[1]);
    return result;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T07:25:13.400

我找到了一种解决方法：鉴于该类型的`val`成员`uint8x8x2_t`是一个数组，因此它被视为一个指针。铸造和遵守指针的作品！[而获取数据地址会引发“临时地址”警告。]

```
uint16x8_t Value= *(uint16x8_t*)vzip_u8(arg0, arg1).val; 
```

事实证明，这可以按应有的方式编译和执行（至少在我尝试过的情况下）。我没有看过汇编代码，所以我不能授予它正确实现（我的意思是将值保存在寄存器中而不是写入/读取到/从内存中。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-24T10:04:28.720

我遇到了同样的问题，所以我引入[了一个灵活的数据类型](https://stackoverflow.com/a/29213705/2436175)。

因此，我现在可以定义以下内容：

```
typedef NeonVectorType<uint8x16_t> uint_128bit_t; //suitable for uint8x16_t, uint8x8x2_t, uint32x4_t, etc.
typedef NeonVectorType<uint8x8_t> uint_64bit_t; //suitable for uint8x8_t, uint32x2_t, etc. 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-09-04T16:25:22.763

它是 4.5 和 4.6 系列的 GCC（现已修复）中的一个错误。

Bugzilla 链接[http://gcc.gnu.org/bugzilla/show_bug.cgi?id=48252](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=48252)

请从此错误中修复并应用到 gcc 源并重建它。

# sql - 如何在 SQL Server 中与日期表有差异？

> ID：13711409
> 
> 赞同：-1
> 
> 时间：2012-12-04T20:35:10.443
> 
> 标签：sql, sql-server

我有两个 SQL 请求。第一个代表一个人的进入时间和第二个退出时间。

像这样的条目：

```
2012-11-30 07:33:53
2012-11-01 07:31:44
2012-11-02 07:35:21
2012-11-19 07:25:48
2012-11-20 07:26:01
... 
```

这用于退出：

```
2012-11-01 15:35:27
2012-11-02 15:48:34
2012-11-19 15:38:03
2012-11-20 15:40:25
2012-11-21 15:37:04
2012-11-22 15:35:28
... 
```

我想知道工作小时数（进入时间 - 退出时间）。我不知道该怎么做。

这是我的要求：

```
SELECT Sum(CONVERT(FLOAT, event201211.dbo.evacc.edate)) AS Expr1
FROM   dbo.uclassdef
       INNER JOIN dbo.uclass
               ON dbo.uclass.mclass = dbo.uclassdef.mclass
                  AND dbo.uclass.sclass = dbo.uclassdef.sclass
       INNER JOIN dbo.cards
               ON dbo.cards.fpointeur = dbo.uclass.fpointeur
       INNER JOIN event201211.dbo.evacc
               ON dbo.cards.fpointeur = event201211.dbo.evacc.fpointeur
WHERE  ( event201211.dbo.evacc.ecd = 1 )
       AND ( dbo.cards.fpointeur = '5456' ) 
```

你有解决方案吗？

**编辑 1**

该字段的名称为 Expr1。每个请求都有现场。这是日期列。我想要小时：分钟，但分钟也可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:00:31.560

您有一些未知数（如数据类型、确切的输出格式等）。你可以使用这个：

```
datediff(hh, Entry, Exit) 
```

# sql - 在 Oracle 中使用“FMMonth”格式化日期并正确显示时间的问题

> ID：13711414
> 
> 赞同：1
> 
> 时间：2012-12-04T20:35:29.443
> 
> 标签：sql, oracle, date, datetime

下面使用 dual 的 sql 重现了该问题：

```
SELECT TRUNC (SYSDATE) example,
          TO_CHAR (TRUNC (SYSDATE), 'FMMonth dd, yyyy')
       || ' '
       || TO_CHAR (TRUNC (SYSDATE), 'hh:MI AM') result_one,
       TO_CHAR (TRUNC (SYSDATE), 'FMMonth dd, yyyy hh:MI AM') result_two
  FROM DUAL 
```

输出：

```
EXAMPLE     RESULT_ONE                  RESULT_TWO
12/4/2012   December 4, 2012 12:00 AM   December 4, 2012 12:0 AM 
```

请注意`RESULT_TWO`输出如何在时间的分钟值中丢失零，而`RESULT_ONE`没有。 `RESULT_ONE`是我目前通过附加两个单独的格式说明的解决方法。该问题发生在分钟包含零的任何时间值上（例如上午 11:02）。

关于如何在`TO_CHAR`不使用`RESULT_ONE`解决方法的情况下执行的任何建议？

**Oracle 版本信息**

```
> BANNER Oracle Database 10g Enterprise Edition Release 10.2.0.4.0 -
> 64bi PL/SQL Release 10.2.0.4.0 - Production CORE  10.2.0.4.0  Production
> TNS for Solaris: Version 10.2.0.4.0 - Production NLSRTL Version
> 10.2.0.4.0 - Production 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:50:22.997

您可以将`fm`修饰符应用于多个格式掩码

```
SQL> ed
Wrote file afiedt.buf

  1  SELECT TO_CHAR (TRUNC (SYSDATE), 'FMMonth dd, yyyy fmhh:MI AM') result_two
  2*   FROM DUAL
SQL> /

RESULT_TWO
------------------------------------------------------
December 4, 2012 12:00 AM 
```

# javascript - 如何根据价值展示

> ID：13711416
> 
> 赞同：1
> 
> 时间：2012-12-04T20:35:42.563
> 
> 标签：javascript, jquery

我正在尝试根据单选按钮的选择制作一些显示两个 div 之一的东西。就单选按钮而言，我有以下代码：

```
<input type="radio" name="radio-269" value="Purchase Only" />
<input type="radio" name="radio-269" value="Sale Only" />
<input type="radio" name="radio-269" value="Purchase and Sale" /> 
```

然后我的DIV：

```
<div id="purchaseandsale" class="hidden" style="padding-top:10px; padding-bottom:10px; background-color: grey;">
Purchase and Sale
</div>

<div id="purchaseorsale" class="hidden" style="padding-top:10px; padding-bottom:10px; background-color: grey;">
Purchase or Sale
</div> 
```

我的Javascript：

```
<script>
$("select[name='radio-269']").change(function() {
    if ($(this).val() == "Purchase and Sale") {
       $('#added_fields').removeClass("hidden");
    }
    else {
        $('#added_fields').addClass("hidden");
    }
});
</script> 
```

首先，它不起作用并且不会在控制台中给我一个错误。如果显示“购买”或“销售”单选按钮，我怎样才能让它显示 purcahseorsale div？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:41:45.470

您应该指的是`input[name='radio-269']`而不是`input[select='radio-269']`.

此外，您的 ID 选择器与实际 DOM 的选择器不匹配。

JavaScript 应该是：

```
$("input[name='radio-269']").change(function() {
    if ($(this).val() == "Purchase and Sale") {
       $('#purchaseandsale').removeClass("hidden");
    }
    else {
        $('#purchaseandsale').addClass("hidden");
    }
    if ($(this).val() == "Purchase Only" || $(this).val() == "Sale Only") {
       $('#purchaseorsale').removeClass("hidden");
    }
    else {
        $('#purchaseorsale').addClass("hidden");
    }
}); 
```

检查这个 JS 小提琴：http: [//jsfiddle.net/MrXenotype/ZpP7f/](http://jsfiddle.net/MrXenotype/ZpP7f/)

# css - 不显示打印元素

> ID：13711417
> 
> 赞同：0
> 
> 时间：2012-12-04T20:35:50.153
> 
> 标签：css

我有一些带有已`display:none`设置文本的 div。在屏幕上，我有一个功能可以`display:block`在我单击其他元素时将其更改为。

```
<div class="hiddenText" style="display:none">My hidden text</div> 
```

我需要打印页面并显示所有文本。我添加了用于打印的 css 文件并为隐藏文本指定了显示

```
@media print {
   .hiddenText {
       display: block
   }
} 
```

文档打印版本的所有样式都很好用，除了这个。使其可打印的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:38:39.827

您的内联样式优先于其他地方指定的规则。要覆盖内联样式，您可以使用`!important`关键字强制规则。

这样的事情可能会奏效：

```
@media print {
   .hiddenText {
       display: block !important;
   }
} 
```

尽管`!important`与 CSS 的特殊性无关，但 MDN 在[其文章中](https://developer.mozilla.org/en-US/docs/CSS/Specificity)有一节讨论`!important`.

> 当 !important 规则用于样式声明时，此声明将覆盖 CSS 中的任何其他声明，无论它在声明列表中的什么位置。虽然， !important 与特异性无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:40:37.683

而不是`@media print`尝试将您的打印样式放在这样的位置，`<LINK REL="stylesheet" TYPE="text/css" MEDIA="print" HREF="foo.css">`

# django - 为什么“manage.py sqlall”看不到我的应用程序？

> ID：13711421
> 
> 赞同：0
> 
> 时间：2012-12-04T20:36:07.347
> 
> 标签：django

在什么情况下可以看到应用程序安装到 syncdb 并通过 shell django.conf.settings.INSTALLED_APPS，但不是 sqlall 命令？

下面我粘贴了我的终端输出，它显示了令人困惑的情况。

```
$ manage.py syncdb
Syncing...
Creating tables ...
Installing custom SQL ...
Installing indexes ...
No fixtures found.

Synced:
 > django.contrib.auth
 > django.contrib.contenttypes
 > django.contrib.sessions
 > django.contrib.sites
 > django.contrib.messages
 > django.contrib.staticfiles
 > django.contrib.admin
 > django.contrib.admindocs
 > django.contrib.gis
 > south
 > django_extensions
 > debug_toolbar
 > django_countries
 > myapp.apps.core

Not synced (use migrations):
 - tastypie
(use ./manage.py migrate to migrate these)
$ manage.py shell

In [1]: from django.conf import settings

In [2]: settings.INSTALLED_APPS
Out[2]:
['django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'django.contrib.gis',
 'django.contrib.humanize',
 'south',
 'django_extensions',
 'debug_toolbar',
 'tastypie',
 'django_countries',
 'django_nose',
 'myapp.apps.core',
 'myapp.apps.mobile',
 'myapp.apps.api']

In [3]:
Do you really want to exit ([y]/n)? y
$ manage.py sqlall myapp.apps.core
Error: App with label myapp.apps.core could not be found. Are you sure your INSTALLED_APPS setting is correct? 
```

# android - 如何处理平板电脑的位图？

> ID：13711423
> 
> 赞同：1
> 
> 时间：2012-12-04T20:36:11.447
> 
> 标签：android, bitmap

我将位图放到 drawable-hdpi 中，它们在我的 Nexus One（hdpi）中看起来不错。但是当我在 Nexus 7(mdpi) 中运行应用程序时，它们看起来很小。

我是否必须为 Nexus 7 放大位图并放入 drawable-large？我是否必须将位图放入 10 英寸平板电脑的 drawable-xlarge 中？还有比这更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:48:27.530

您只能将您的可绘制对象放入 drawable-xlarge 中，并且这些将动态调整大小以获得较小的分辨率。但是，最好为每个 dpi/大小创建位图集，因为这样您就可以根据需要的精度定制屏幕。此外，您可能最好也添加布局风格，以便每个布局都使用适当的位图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:48:33.830

操作系统将为您缩放图像。nexus 7 是 tvdpi Iirc

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T21:01:09.453

请先阅读这篇文章[支持不同的屏幕](http://developer.android.com/training/basics/supporting-devices/screens.html#create-bitmaps)

在你的布局中也只使用 dp(dip) 单位（不要使用 px）。

# c# - 以管理员身份运行与管理员组

> ID：13711425
> 
> 赞同：5
> 
> 时间：2012-12-04T20:36:37.073
> 
> 标签：c#, windows, winapi

我有一个 C# 应用程序需要允许用户更改**Computer Name**。这是一个非常特权的操作。如果用户以管理员身份运行应用程序（Windows 7，右键单击可执行文件，“以管理员身份运行”），我只能让它工作。很好，但是用户是管理员，那么他们为什么需要以管理员身份运行**呢**？我已经试过好几次了。如果用户（管理员）尝试正常运行应用程序，它总是会失败。如果他们以“以管理员身份运行”运行它，它总是有效的。

如果答案是“它就是这样工作的，即使你是管理员，你也必须以管理员身份运行”，我的问题是如何检测它们是否以超级管理员权限运行？我找到[了这个](https://stackoverflow.com/questions/1220213/c-detect-if-running-with-elevated-privileges)，但它只是检查用户是否是管理员用户组的一部分，我已经指出，这还不够（并引发空指针异常）。

我在这里错过了什么吗？我需要从另一个角度接近它吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T20:54:55.830

这是因为用户帐户控制 (UAC)。在 Vista 中引入，这改变了管理员用户帐户的操作方式。

当管理员组中的用户登录时，会为该用户分配两个令牌：一个具有所有权限的令牌，一个具有降低权限的令牌。当该用户创建一个新进程时，默认情况下，该进程将获得降低的权限令牌。因此，尽管用户具有管理员权限，但默认情况下她不会行使这些权限。这是一件“好事”™。

要行使这些权利，用户必须以提升的权利开始该过程。例如，通过使用“以管理员身份运行”动词。当她这样做时，完整的令牌被交给新的进程，并且可以行使全部权利。

您几乎肯定不想检测您的进程是否正在运行提升。最佳实践是标记程序中需要提升的部分，并在程序的这些部分执行时强制系统显示 UAC 提升对话框。

绑定是提升只能在进程开始时发生。因此，如果您需要将应用程序拆分为需要提升的部分和不需要提升的部分，则需要多个进程。虽然您可以将整个应用程序标记为需要提升，但如果唯一需要提升的是计算机名称要更改的非常罕见的情况，则不应这样做。

您的下一步是在 MSDN 上详细了解详细信息。例如：

*   [http://msdn.microsoft.com/en-us/library/windows/desktop/bb756996.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756996.aspx)
*   [http://msdn.microsoft.com/en-us/library/windows/desktop/aa511445.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa511445.aspx)

# c++ - 生成伪随机缓冲区 C++

> ID：13711428
> 
> 赞同：-4
> 
> 时间：2012-12-04T20:36:47.830
> 
> 标签：c++, random, buffer

> **可能重复：**
> [Random long long generator C++](https://stackoverflow.com/questions/13708940/random-long-long-generator-c)
> [Random long long using boost](https://stackoverflow.com/questions/13709661/random-long-long-using-boost)

我有一个 8 字节长的缓冲区，我需要用伪随机字节填充它，我如何使用 C++ 来完成它，也许还能提升它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:14:56.347

尝试这个：

```
#include <iostream>
#include <boost/random/random_device.hpp>
#include <boost/cstdint.hpp>

int main (int argc, char* argv[])
{
    boost::uint32_t buffer[2]; // 8 bytes

    boost::random::random_device rng;
    // generate wants 32-bit integers to fill which is why
    // we use boost::uint32_t here instead of char buffer[8] for example.
    rng.generate(buffer, buffer + 2);

    for (int i = 0; i < 2; ++i)
      std::cout << (int) buffer[i] << std::endl;

    return 0;
} 
```

我没有对此进行编译测试，但从阅读我收集的参考资料来看，它应该是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:16:15.063

```
for(int i = 0; i < 8; i++)
    buffer[i] = rand(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:56:33.693

对于 boost，请查看[http://www.boost.org/doc/libs/1_52_0/doc/html/boost_random.html](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_random.html)（巧合的是，搜索“boost random”时的第一个 google 结果）。

如果您可以使用 C++11 进行编译，您可以查看 std::random_device 是否可以工作。查看[http://www.cplusplus.com/reference/random/random_device/](http://www.cplusplus.com/reference/random/random_device/)了解更多详情。

如果这些都不起作用，并且您**确定**您只想要*伪随机*字节并且没有特定的安全要求：从您正在运行的机器上获取一些*不是*静态的信息（例如当前时间，进程ID 和单调递增的计数器）将它们全部填充到一个字符串中（结果得到类似“1354654195-4710-1”的内容）和 MD5（或 SHA-1）字符串的*内容*。您将获得 16（或 20）个字节。选择其中的 8 个，然后将它们填充到缓冲区中。多田。

如果您需要将此随机缓冲区用于加密目的，则不应*使用这些技术。*

# jquery - jQuery 播放器的 CSS 定位

> ID：13711431
> 
> 赞同：1
> 
> 时间：2012-12-04T20:36:59.260
> 
> 标签：jquery, html, css

我的首页上有一个 jQuery 播放器，它在 Chrome 和 Safari 中似乎居中并且对我来说还可以。

但由于某种原因，其他所有人都在屏幕左侧看到了它。

我尝试了不同的位置变化，如绝对、相对和没有位置的尝试边距……似乎没有什么可以为所有其他人设置它。

div 的 CSS 是：

```
#container {
width: 525px;
height: auto;
position: relative;
left: 373px;
margin: 0;
padding: 0;
z-index: 10; 
```

它在 -

> www.tranceil.fm

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:51:34.233

删除左边的属性并将你的边距调整为 margin:0 auto;

```
#container {
width: 525px;
position: relative;
margin: 0 auto;
padding: 0;
z-index: 10;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:02:11.867

完美的。谢谢索德斯莱特。Chrome 可以在许多情况下帮助测试 css，同时在线检查代码。有时，也可以在小屏幕或大屏幕上进行有用的测试。

# javascript - Javascript 数组作为对象

> ID：13711434
> 
> 赞同：-2
> 
> 时间：2012-12-04T20:37:12.760
> 
> 标签：javascript, arrays

> **可能重复：**
> [Javascript 对象的长度（即关联数组）](https://stackoverflow.com/questions/5223/length-of-javascript-object-ie-associative-array)
> [循环遍历 JavaScript 对象](https://stackoverflow.com/questions/684672/loop-through-javascript-object)

```
var location = {
     "Steve": "New York",
     "Abigayle": "Chicago"
}

for (var i = 0; i < location .length; i++)
{
    console.log('works');
} 
```

我正在尝试创建一个数组，其中每个项目都有一些名称和值。

上面的代码不起作用。试图制作一个对象，但它没有`length`属性 - 没有`for`循环。

```
location= {
     "Steve": "New York",
     "Abigayle": "Chicago"
}; 
```

在这种情况下可以使用数组吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:40:24.987

如果你只想用你所拥有的东西工作，

```
var location = {
     "Steve" : "New York",
     "Abigayle" : "Chicago"
}

for (var name in location) {
    console.log( name, location[name] );
} 
```

如果您关心长度，请使用对象数组

```
var location = [
     { key : "Steve", value : "New York" },
     { key : "Abigayle", value : "Chicago" }
]; 
```

但是没有简单的方法来查找它，它需要一个循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:39:22.623

```
var locations = [
     ["Steve","New York"]
    ,["Abigayle","Chicago"]
]; 
```

或者

```
var locations = [
      {Name:"Steve",Location:"New York"}
     ,{Name:"Abigayle",Location:"Chicago"}
]; 
```

您可以像这样在第一个选项中输出数据：

```
var delimiter = "    ";
console.log("var locations = [");
for (var i=0; i<locations.length; i++)
{
    var innerdelimiter = "";
    var line = delimiter + "[";   
    for (var j=0; j<locations[i].length;j++)
    {
       line += innerdelimter + locations[i][j];
       innerdelimiter = ",";
    }
    line += "]";
    console.log(line);
    delimiter = "   ,";
}
console.log("];"); 
```

和第二个选项中的数据如下：

```
var delimiter = "    ";
console.log("var locations = [");
for (var key in locations)
{
    console.log(delimiter + "{" + key + ":" + locations[key] + "}");
    delimiter = "   ,";
}
console.log("];"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T20:41:34.550

仅供参考，您可以遍历对象中的所有键：

```
location = {
     "Steve": "New York",
     "Abigayle": "Chicago"
};

for (var elem in location) {
    console.log(elem);
} 
```

产生：

```
Steve
Abigayle 
```

但我认为其他答案之一可能是您正在寻找的正确方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T20:42:59.473

您也可以`loop`覆盖*对象键*。只有当您需要*索引*键时，您才应该在此处使用*数组*。

```
var loc = {
     "Steve": "New York",
     "Abigayle": "Chicago"
};

Object.keys( loc ).forEach(function( name ) {
    console.log('name: ', name, ' city: ', loc[ name ] );
}); 
```

顺便说一句，`location`是对象内的（几乎）保留变量名`window`。您不能真正覆盖它，因此您应该重新命名该变量。

* * *

^(上述代码使用适用于所有现代浏览器的 Ecmascript 262 第 5 版代码。如果您想支持旧版浏览器，您需要加载任何各种 ES5 shim 库)

# jquery - jQuery if do nothing else do something

> ID：13711436
> 
> 赞同：0
> 
> 时间：2012-12-04T20:37:25.350
> 
> 标签：jquery, css

`margin-left`我有一个片段可以根据单击更改节点的：

```
$("#left").click(function(){
    var slidewidth = $('#slide_box').attr('width'),
        slideleft = $('#slide_box').attr('margin-left');
    if (slideleft == 0) {
    }
    else {
        $("#slide_box").animate({"margin-left": "+=135px"}, "fast");
    } 
}); 
```

现在，如果`slideleft == 0`，它不应该做任何事情。但确实如此。但是，当`var slidewidth`计算 时，它会返回`0`还是`0px`？我将如何在`if`参数中定义该值？当我尝试`if (slideleft == 0px)`它时，它只是杀死了脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:45:39.060

我认为您没有使用正确的方法来获取您的`width`值`margin-left`；两者都是css值而不是元素上的属性，并且`.attr()`只会获取元素属性（除非您真的使用这些名称在元素上设置属性，恕我直言将来可能会非常混乱）。而是试试这个：

```
$("#left").click(function(){
    var slidewidth = $('#slide_box').css('width'),
        slideleft = $('#slide_box').css('margin-left'); 
    /* or alternatively:
       var slidewidth = parseInt($('#slide_box').css('width'),10),
        slideleft = parseInt($('#slide_box').css('margin-left'), 10); 
     */
    if (slideleft == '0px' /* with parseInt values you would just need 0 here*/) {
    }
    else {
        $("#slide_box").animate({"margin-left": "+=135px"}, "fast");
    } 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:44:30.063

您可以使用`$('#slide_box').css('margin-left')`而不是`$('#slide_box').attr('margin-left')`获取保证金并使用测试`slideleft === '0px'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:39:40.587

尝试这个：

```
if (slideleft === '0px') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T20:40:05.950

你可以做一个`console.log(slidewidth)`检查输出。我很确定它将是 0px 而不是 0。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T20:41:23.497

```
if ( parseInt(slideleft,10) === 0) { 
```

最好使用`parseInt`.. 将其转换为数字。这样它将解决模棱两可的问题..

**或者**只是 `if ( +slideleft === 0) {`

# java - 光标！= null 但为 null？

> ID：13711442
> 
> 赞同：0
> 
> 时间：2012-12-04T20:37:40.207
> 
> 标签：java, android, sqlite

当应用程序同步时，我试图更新数据库中每一行中的“html”列。我在[此处](http://www.c99.org/2010/01/23/writing-an-android-sync-provider-part-1/)使用本教程将应用程序添加到“配置文件”列表中。这是我在 SyncAdapter 中使用的代码：

```
private static void performSync(Context context, Account account, Bundle extras, String authority, ContentProviderClient provider, SyncResult syncResult) throws OperationCanceledException {
  MySQLiteHelper openHelperClass;
  SQLiteDatabase sqliteDatabase;
  String str;
  mContentResolver = context.getContentResolver();
  Log.i(TAG, "performSync: " + account.toString());

  Log.v(TAG, "CDS Opened!");
  openHelperClass = new MySQLiteHelper(context);
  sqliteDatabase = openHelperClass.getWritableDatabase();
  Log.v(TAG, "CDS loaded db!");
  Cursor cursor = sqliteDatabase.query("offline", null, null, null, null, null, null);
  Log.v(TAG, "CDS queried!");
  if(cursor != null) {
      Log.v(TAG, "Cursor not null!");
      Log.v(TAG,cursor.toString());
      if(cursor.moveToFirst()) {
          Log.v(TAG, "first pos");
      while(cursor.moveToNext()) {
          Log.v(TAG, "1");
          Log.v(TAG, "Cursor moving!");
          String skolelogg = cursor.getString(cursor.getColumnIndexOrThrow(MySQLiteHelper.COLUMN_SKOLE_LOGGING_OFFLINE));
          int skplid = cursor.getInt(cursor.getColumnIndexOrThrow(MySQLiteHelper.COLUMN_PLAN_ID));
          String skplant = cursor.getString(cursor.getColumnIndexOrThrow(MySQLiteHelper.COLUMN_PLAN_TYPE));
          int offid = cursor.getInt(cursor.getColumnIndexOrThrow(MySQLiteHelper.COLUMN_ID_OFFLINE));
          try {
              HttpClient hc = new DefaultHttpClient();
              HttpPost post = new HttpPost("https://romres.ist-asp.com/WebUntis/Timetable.do?simple=1&type=" + skplant + "&" + skolelogg + "&id="+ Integer.toString(skplid));

              HttpResponse rp = hc.execute(post);
               if(rp.getStatusLine().getStatusCode() == HttpStatus.SC_OK){
                   str = EntityUtils.toString(rp.getEntity());
                   Log.v(TAG, "Syncing....");
                   Log.v(TAG, "Syncing ID: " + Integer.toString(offid));

                   String csstext = "<link rel='stylesheet' type='text/css' href='Styles/webuntis.css'>";
                   csstext += "<style type='text/css'>";
                   csstext += "*.A_0_1 {background:#f49f25;font-size:12px;}";
                   csstext += "*.I_100_28 {background:#ffff80;}";
                   csstext += "*.I_100_29 {background:#ffff80;}";
                   csstext += "*.I_100_30 {background:#ffff80;}";
                   csstext += "*.I_100_31 {background:#ffff80;}";
                   csstext += "*.I_100_368 {background:#ffff80;}";
                   csstext += "*.I_100_710 {background:#ff00ff;}";
                   csstext += "*.A_0_9 td,*.A_0_11 td,*.A_0_12 td,*.A_11_9 td,*.A_11_11 td,*.A_11_12 td,*.A_40_9 td,*.A_40_11 td,*.A_40_12 td,*.A_41_9 td,*.A_41_11 td,*.A_41_12 td,*.A_5_9 td,*.A_5_11 td,*.A_5_12 td,*.A_10_9 td,*.A_10_11 td,*.A_10_12 td,*.A_50_9 td,*.A_50_11 td,*.A_50_12 td,*.A_51_9 td,*.A_51_11 td,*.A_51_12 td,*.A_15_9 td,*.A_15_11 td,*.A_15_12 td,*.A_20_9 td,*.A_20_11 td,*.A_20_12 td {text-decoration: line-through;}";
                   csstext += "</style>";

                   Document doc = Jsoup.parse(str);
                   Element title = doc.select("div.def").first();
                   String s = title.toString();

                   Element offlinetext = doc.append("<div class='offlinetext'>Offline-Timeplan</div>");
                   String offltt = "<div class='offlinetext'>Offline-Timeplan</div>";

                   String extraCSS = "<style>";
                   extraCSS += ".offlinetext {font-family: Arial; font-size: 20px; font-style: normal; font-weight: 500; color: #FF9900; line-height: 19px; height: 30px;}';";
                   extraCSS += "</style>";

                   Element title2 = doc.select("div.pagetitle").first();
                   String s2 = title2.toString();
                   str = csstext + extraCSS + offltt + s2 + s;

                   ContentValues cv = new ContentValues();
                   cv.put(MySQLiteHelper.COLUMN_SKOLE_HTML_CODE, str);
                   sqliteDatabase.update(MySQLiteHelper.TABLE_OFFLINE, cv, "_id = ?", new String [] { Integer.toString(offid) });
               }
          }
          catch(IOException e){
              Log.v(TAG, e.toString());

          }
      }
      }
      else {
          Log.v(TAG, "moveToNext() is false");
      }
  }
  else{
      Log.v(TAG, "It's null");
  }

 } 
```

这是我在 Android 的设置菜单中按“同步”时的 LogCat 输出：

> `12-04 21:17:30.066: D/webviewglue(20944): nativeDestroy view: 0x51028af0 12-04 21:17:39.241: I/ContactsSyncAdapterService(21115): performSync: Account {name=*, type=*.account} 12-04 21:17:39.246: V/ContactsSyncAdapterService(21115): CDS Opened! 12-04 21:17:39.251: V/ContactsSyncAdapterService(21115): CDS loaded db! 12-04 21:17:39.251: V/ContactsSyncAdapterService(21115): CDS queried! 12-04 21:17:39.251: V/ContactsSyncAdapterService(21115): Cursor not null! 12-04 21:17:39.256: V/ContactsSyncAdapterService(21115): android.database.sqlite.SQLiteCursor@411c4de0 12-04 21:17:39.256: V/ContactsSyncAdapterService(21115): moveToNext() is false`

问题是在到达 cursor.moveToFirst() 之前一切正常。如您所见，游标同时为 null 且不为 null(?)，因为它通过了“cursor != null”检查但返回 null 的“cursor.moveToFirst”。我真的需要帮助。我不知道出了什么问题。我仍然是编写 SyncAdapter 甚至是 ContentProvider 的菜鸟。

编辑：我很愚蠢。正如贾斯汀指出的那样，游标确实是空的，因为表中没有行。在我在表格中添加一个条目后它起作用了！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T20:42:45.403

`moveToFirst()`返回 false 表示您的光标为空（没有行）。这不等于 null。

# syntax - 在 yaml 中写入 #（在字符串中）

> ID：13711444
> 
> 赞同：40
> 
> 时间：2012-12-04T20:37:53.573
> 
> 标签：syntax, internationalization, tags, comments, yaml

我是使用 yml 文件的新手（用于我的框架中的翻译）。

我正在尝试在翻译中添加一个“#”（将是 Twitter 分享...blabla）。

这可能吗，因为文件像评论一样翻译它......

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-12-07T00:53:31.073

只需将值放在单引号或双引号内，它就不会被视为注释。就像是：

```
en:
  twitter:
    share: "#hashtag" 
```

# sql-server-2008 - 存储过程中的错误处理

> ID：13711446
> 
> 赞同：0
> 
> 时间：2012-12-04T20:38:10.927
> 
> 标签：sql-server-2008, error-handling

我有一个“预处理”存储过程，它在内部调用多个存储过程。

最后，当我所有的 SPS（内部）都成功执行时，我想运行一个更新语句，所以在主 SP 中我有：

```
EXEC SP1
EXEC SP2
EXEC SP3

-- RUN UPDATE statment here 
```

我所有的内部 SP 都有以下模板：

```
 BEGIN TRY
  BEGIN TRANSACTION

  // DO SOME INSERT,UPDATE ETC..

  COMMIT TRANSACTION;
  END TRY
  BEGIN CATCH
         SELECT 
            ERROR_NUMBER() AS ErrorNumber
            ,ERROR_SEVERITY() AS ErrorSeverity
            ,ERROR_STATE() AS ErrorState
            ,ERROR_PROCEDURE() AS ErrorProcedure
            ,ERROR_LINE() AS ErrorLine
            ,ERROR_MESSAGE() AS ErrorMessage;

  IF @@TRANCOUNT > 0
        ROLLBACK TRANSACTION;
         RETURN
  END CATCH 
```

我的问题是，在这种情况下处理错误的最佳方法是什么，即我想确保在运行最终更新语句之前一切都已完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:27:41.873

关闭它是因为我发现每个 SP 都必须有自己的错误处理，而调用多个 SP 的外部 SP 不需要进行错误处理。

# ios - UICollectionView 只显示 2 组数据

> ID：13711447
> 
> 赞同：0
> 
> 时间：2012-12-04T20:38:12.743
> 
> 标签：ios, uicollectionview, uicollectionviewcell

我将 UICollectionView 嵌入到另一个 UICollectionView 中（作为一种表格）。第一个集合视图工作正常 - 我得到了正确数量的单元格和其中的正确信息。第二个但是我只显示前两组数据。这是外部集合视图的 cellForItemAtIndexPath 的代码：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Main Tide Data Table Cell";

    TideDataTableCell* tideDayDataCell = [self.tideDataTable dequeueReusableCellWithReuseIdentifier:CellIdentifier forIndexPath:indexPath];
    tidalDate* tideDate = self.tidalDates[indexPath.row];
    tideDayDataCell.tides = nil;
    tideDayDataCell.tides = [[NSMutableArray alloc] initWithCapacity:0];
    tideDayDataCell.tideDataTable.delegate = tideDayDataCell;
    tideDayDataCell.tideDataTable.dataSource = tideDayDataCell;
    self.tideDataTable.backgroundColor = [UIColor lightGrayColor];
    tideDayDataCell.tides = tideDate.tides;
    tideDayDataCell.backgroundColor = [UIColor whiteColor];
    tideDayDataCell.dayLabel.text = tideDate.dateString;
    tideDayDataCell.averageTideHeight = self.avgTideHeight;
    return tideDayDataCell;
} 
```

这是内部集合视图的 cellForItemAtIndexPath 无法正常工作 - 重复前两组数据......

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    NSString* CellIdentifier = @"Tide Info Table Cell";

    TidalTideTableCell* tidalTideTableCell = [self.tideDataTable dequeueReusableCellWithReuseIdentifier:CellIdentifier forIndexPath:indexPath];
    tidalTideTableCell.timeTideLabel.text = @"";
    tidalTideTableCell.heightTideLabel.text = @"";
    tidalTideTableCell.hwlwTideLabel.text = @"";
    self.tideDataTable.backgroundColor = [UIColor clearColor];
    Tide* tide = self.tides[indexPath.row];
    tidalTideTableCell.heightTideLabel.text = [[NSNumber numberWithDouble:tide.height] stringValue];
    if (tide.height > self.averageTideHeight)
    {
        tidalTideTableCell.hwlwTideLabel.text = @"HW";
    }
    else
    {
        tidalTideTableCell.hwlwTideLabel.text = @"LW";
    }
    tidalTideTableCell.timeTideLabel.text = tide.date;
    tidalTideTableCell.backgroundColor = [UIColor clearColor];
    return tidalTideTableCell;
} 
```

如您所见 - 每次调用时都会初始化保存信息（潮汐）的数组，并且我已尽可能检查输入的数据是否正确。我将不胜感激任何帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T09:31:18.047

问题是因为您发送的部分/行数错误。我希望你在此期间解决了你的问题。

# jquery-mobile - 使用 Apple Smart App Banner 时，移动网站始终呈现为横向 - jQuery Mobile

> ID：13711448
> 
> 赞同：2
> 
> 时间：2012-12-04T20:38:13.683
> 
> 标签：jquery-mobile, mobile, web

我有一个使用 CSS 媒体查询来确定方向的网站的移动版本。

布局根据横向/纵向更改并相应调整宽度。

最近，配套的原生移动应用程序已在 Apple 应用商店中发布 - 我实现了 Apple Smart App Banner。

问题是在显示智能横幅时 - 呈现的布局是横向版本的 - 无论实际方向如何。

这是一个问题，因为在肖像中，一切看起来都很时髦。

我找不到解决方法或正在发生的事情。

为了提供更多上下文 - 这是一个 Rails 项目 - 移动网站是使用 jQuery Mobile 构建的。

有没有其他人经历过这种情况或知道解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T21:33:44.493

我相信这是一个错误。如果可用宽度大于可用高度，我怀疑 iOS 只会设置“横向”标志。在 3.5 英寸 iPhone 上显示智能应用横幅时，就是这种情况。在 4 英寸 iPhone 上，情况并非如此。这就是为什么您只在较旧的 iPhone 上看到此问题的原因。

我通过使用找到了一个 hacky 解决方法`max-aspect-ratio`：

```
<link rel="stylesheet" href="/css/portrait.css" media="all and (max-aspect-ratio: 4/3)">
<link rel="stylesheet" href="/css/landscape.css" media="all and (orientation:landscape) and (min-width: 480px)"> 
```

# jquery - 更改得分最高的段落的粗细和颜色

> ID：13711451
> 
> 赞同：0
> 
> 时间：2012-12-04T20:38:19.817
> 
> 标签：jquery, bold

实现以下目标的最佳方法是什么：

为得分最高的团队制作权重：粗体 + 颜色：白色。（领带颜色/重量没有变化）

**HTML**

```
<div class="fixture">
   <div class="teams">
      <p class="item_one_215">Newcastle United</p>
      <p class="item_two_215">Tottenham Hotspur</p>
   </div>
   <div class="scores">
      <p class="item_one_215">2</p>
      <p class="item_two_215">1</p>
   </div>
</div>
<div class="fixture">
   <div class="teams">
      <p class="item_one_216">Arsenal</p>
      <p class="item_two_216">Sunderland</p>
   </div>
   <div class="scores">
      <p class="item_one_216">0</p>
      <p class="item_two_216">0</p>
   </div>
</div> 
```

**jQuery**

```
 var teamOneGoal_215 = 2;
    var teamTwoGoal_215 = 1;

    if (teamOneGoal_215 > teamTwoGoal_215) {
        $('p.item_one_215').css("font-weight","bold").css("color","#ccc");
    }
    else if (teamOneGoal_215 === teamTwoGoal_215)
    {
        $('p.item_one_215').css("font-weight","bold").css("color","#777");
        $('p.item_two_215').css("font-weight","bold").css("color","#777");
    }
    else
    {
        $('p.item_two_215').css("font-weight","bold").css("color","#ccc");

        }

.... 
```

我已经尝试为每个团队分配特定的变量，但必须有一种更智能、更有效的方法来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:49:37.013

试试这个

```
$('.teams').each(function(){
    var $this = $(this);
    var $team1 =  $this.find('p:eq(0)');
    var $team2 =  $this.find('p:eq(1)');
    var $scoresDiv = $this.next('.scores');
    var score1 =  +$scoresDiv.find('p:eq(0)').text();
    var score2 =  +$scoresDiv.find('p:eq(1)').text();

    if(score1 > score2){
        $team1.addClass('winner');
        $scoresDiv.find('p:eq(0)').addClass('winner');
    }
    else if(score2 > score1){
        $team2.addClass('winner');
        $scoresDiv.find('p:eq(1)').addClass('winner');
    }
})​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/XGyWK/1/)**

**可以进一步优化..**

# git - 如何将特定文件从一个分支合并到 Git 中的另一个分支

> ID：13711455
> 
> 赞同：40
> 
> 时间：2012-12-04T20:38:35.753
> 
> 标签：git

我在 git repo 中有 2 个分支，让我们调用它们，开发和测试。我在单个文件 somecode.js 中有更改。两个分支都对 somecode.js 进行了更改。这两个分支已经显着分歧（但可以管理），因此直接“合并”是不够的。

我试过[http://jasonrudolph.com/blog/2009/02/25/git-tip-how-to-merge-specific-files-from-another-branch/](http://jasonrudolph.com/blog/2009/02/25/git-tip-how-to-merge-specific-files-from-another-branch/)但它没有合并两个文件的内容. 您基本上只是覆盖文件而不是实际合并文件的内容。

我也试过：

```
git checkout -b newbranch
git checkout test somecode.js
git commit -m "somecode changes from newbranch"
git checkout dev
git merge newbranch 
```

和

```
git checkout -m test somecode.js 
```

（我真的很希望 -m 用于合并，但它似乎对我不起作用......）

我以为我已经接近了我需要的东西，但后来我意识到它只是快进了提交，这意味着它没有合并，它覆盖了测试中的原始文件。

所以，重申一下，我如何才能将一个特定文件从一个分支合并到另一个分支，而不仅仅是在我正在合并到使用 git 的分支中写入文件。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-04T21:40:17.380

我想你喜欢用

```
git checkout -p 
```

在你的情况下

```
git checkout dev
git checkout -p test somecode.js 
```

您可以交互式地应用差异。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T21:07:40.853

```
git checkout dev
git show test:somecode.js > somecode.js.theirs
git show $(git merge-base dev test):somecode.js > somecode.js.base
git merge-file somecode.js somecode.js.base somecode.js.theirs 
```

这样，您将手动从测试分支上的 somecode.js 到 dev 分支上的 somecode.js 进行三向合并。

或者..您可以使用所需的更改创建一个临时分支，并从中进行壁球合并。'git方式'足够吗？:)

```
git checkout -b test/filtered $(git merge-base dev test)
git diff ..test -- somecode.js | git apply
git add -- somecode.js
git commit -m "Updated somecode.js"
git checkout dev
git merge --squash test/filtered
git branch -D test/filtered 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T20:56:59.357

我认为 git merge-file 是您正在寻找的。从手册页：

```
git merge-file incorporates all changes that lead from the <base-file> to
<other-file> into <current-file>. The result ordinarily goes into <current-file>.
git merge-file is useful for combining separate changes to an original. Suppose
<base-file> is the original, and both <current-file> and <other-file> are
modifications of <base-file>, then git merge-file combines both changes. 
```

# java - 不幸的是，单击按钮后 AppName 已停止

> ID：13711461
> 
> 赞同：0
> 
> 时间：2012-12-04T20:38:54.233
> 
> 标签：java, android, facebook-graph-api

我登录并在 Edittext 中输入消息。但是当我单击发送按钮时，应用程序显示 Webview 弹出窗口大约几分钟，然后显示消息“不幸的是，AppName 已停止。”

WebView 弹出窗口，如 Facebook 上的 Webview 登录弹出窗口

MainActivity.java

```
public class MainActivity extends Activity {

public static Facebook facebook = new Facebook("apikey");
AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
String token;
Button login;
Button send;
EditText msg;
TextView onoff;
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.postapp);
    login = (Button)findViewById(R.id.login);
    send = (Button)findViewById(R.id.send);
    msg = (EditText)findViewById(R.id.msg);
    onoff = (TextView)findViewById(R.id.onoff);
    login.setOnClickListener(new OnClickListener()
    {
        public void onClick(View v) {
            facebook.authorize(MainActivity.this, new String[]{"publish_stream"}, new DialogListener(){

                @Override
                public void onComplete(Bundle values) {
                    onoff.setText("On");
                    token =values.getString(Facebook.TOKEN);
                }

                @Override
                public void onFacebookError(FacebookError e) {
                    Log.d("FACEBOOK ERROR","FB ERROR. MSG: "+e.getMessage()+", CAUSE: "+e.getCause());
                }

                @Override
                public void onError(DialogError e) {
                    Log.e("ERROR","AUTH ERROR. MSG: "+e.getMessage()+", CAUSE: "+e.getCause());
                }

                @Override
                public void onCancel() {
                    Log.d("CANCELLED","AUTH CANCELLED");
                }
            });

        }
    });

    send.setOnClickListener(new OnClickListener(){
        public void onClick(View v) {
            updateStatus(token);
        }
    });
}

public void updateStatus(String accessToken){
    try {
        Bundle bundle = new Bundle();
        bundle.putString("message",msg.getText().toString());
        bundle.putString(Facebook.TOKEN,accessToken);
        String response = facebook.request("me/feed",bundle,"POST");
        Log.d("UPDATE RESPONSE",""+response);
    } catch (MalformedURLException e) {
        Log.e("MALFORMED URL",""+e.getMessage());
    } catch (IOException e) {
        Log.e("IOEX",""+e.getMessage());
    }
}
} 
```

和 postapp.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/login"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Sign-in" />

    <TextView
        android:id="@+id/onoff"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="off"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <EditText
        android:id="@+id/msg"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ems="10" />

    <Button
        android:id="@+id/send"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Send" />
</LinearLayout> 
```

单击发送时在 LogCat 中

```
12-05 05:08:57.376: E/AndroidRuntime(539): FATAL EXCEPTION: main
12-05 05:08:57.376: E/AndroidRuntime(539): android.os.NetworkOnMainThreadException
12-05 05:08:57.376: E/AndroidRuntime(539):  at  android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1084)
12-05 05:08:57.376: E/AndroidRuntime(539):  at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
12-05 05:08:57.376: E/AndroidRuntime(539):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
12-05 05:08:57.376: E/AndroidRuntime(539):  at java.net.InetAddress.getAllByName(InetAddress.java:220)
12-05 05:08:57.376: E/AndroidRuntime(539):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
12-05 05:08:57.376: E/AndroidRuntime(539):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
12-05 05:08:57.376: E/AndroidRuntime(539):  at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
12-05 05:08:57.376: E/AndroidRuntime(539):  at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
12-05 05:08:57.376: E/AndroidRuntime(539):  at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
12-05 05:08:57.376: E/AndroidRuntime(539):  at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
12-05 05:08:57.376: E/AndroidRuntime(539):  at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:460)
12-05 05:08:57.376: E/AndroidRuntime(539):  at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:432)
12-05 05:08:57.376: E/AndroidRuntime(539):  at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
12-05 05:08:57.376: E/AndroidRuntime(539):  at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
12-05 05:08:57.376: E/AndroidRuntime(539):  at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
12-05 05:08:57.376: E/AndroidRuntime(539):  at libcore.net.http.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:164)
12-05 05:08:57.376: E/AndroidRuntime(539):  at com.facebook.android.Util.openUrl(Util.java:193)
12-05 05:08:57.376: E/AndroidRuntime(539):  at com.facebook.android.Facebook.request(Facebook.java:777)
12-05 05:08:57.376: E/AndroidRuntime(539):  at facebook.appwall.MainActivity.updateStatus(MainActivity.java:84)
12-05 05:08:57.376: E/AndroidRuntime(539):  at facebook.appwall.MainActivity$2.onClick(MainActivity.java:74)
12-05 05:08:57.376: E/AndroidRuntime(539):  at android.view.View.performClick(View.java:3480)
12-05 05:08:57.376: E/AndroidRuntime(539):  at android.view.View$PerformClick.run(View.java:13983)
12-05 05:08:57.376: E/AndroidRuntime(539):  at android.os.Handler.handleCallback(Handler.java:605)
12-05 05:08:57.376: E/AndroidRuntime(539):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-05 05:08:57.376: E/AndroidRuntime(539):  at android.os.Looper.loop(Looper.java:137)
12-05 05:08:57.376: E/AndroidRuntime(539):  at android.app.ActivityThread.main(ActivityThread.java:4340)
12-05 05:08:57.376: E/AndroidRuntime(539):  at java.lang.reflect.Method.invokeNative(Native Method)
12-05 05:08:57.376: E/AndroidRuntime(539):  at java.lang.reflect.Method.invoke(Method.java:511)
12-05 05:08:57.376: E/AndroidRuntime(539):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-05 05:08:57.376: E/AndroidRuntime(539):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-05 05:08:57.376: E/AndroidRuntime(539):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:42:40.193

您正在尝试在当前代码中对主 UI 线程进行网络操作。所以避免 UI 挂起和应用程序崩溃使用[AsyncTask实现你的代码](http://developer.android.com/reference/android/os/AsyncTask.html)

将所有 facebook 网络操作代码`doInBackground`和用于更新 UI 内容的所有代码放入`onPostExecute`其中`AsyncTask`以避免**“不幸的是，AppName 已停止”。**信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:11:11.257

在蜂窝之外尝试您的应用程序。它不会在 3.0 以下的较低版本中显示此异常 在 2.2 或 2.3 上尝试它会起作用。 [这](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)将对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T22:41:12.563

您可以在授权方法之前添加这些代码行

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

# logging - 记录骆驼异常并发送到死信通道

> ID：13711462
> 
> 赞同：9
> 
> 时间：2012-12-04T20:39:01.293
> 
> 标签：logging, exception-handling, apache-camel, apache-karaf

我有一条骆驼路线，在卡拉夫内运行，为此我添加了一个死信频道。这是为了处理路由失败的情况，我想保留问题消息并记录原因。由于我正在异步处理一些处理，因此我无法将异常抛出回调用应用程序。

通过阅读文档并尝试了许多案例，我不清楚如何将异常记录到 Karaf 的日志中并将原始消息存入死信队列。

这是我所拥有的摘录：-

```
<bean id="deadLetterQueue" class="org.apache.camel.builder.DeadLetterChannelBuilder">
    <property name="deadLetterUri" value="activemq:dead.letter.queue"/>
    <property name="redeliveryPolicy" ref="redeliveryPolicy"/>
</bean>

<bean id="redeliveryPolicy" class="org.apache.camel.processor.RedeliveryPolicy">
    <property name="maximumRedeliveries" value="1"/>
    <property name="redeliveryDelay" value="1000"/>
</bean>

<camelContext id="notification" errorHandlerRef="deadLetterQueue"
    trace="false" xmlns="http://camel.apache.org/schema/blueprint">
    <onException>
        <exception>org.xyz.exceptions.unchecked.notificationException</exception>
        <log logName="notifications" loggingLevel="ERROR"
            message="Exception from notification Camel route" />
    </onException>

    <route id="DoSomething" errorHandlerRef="deadLetterQueue">
        <from uri="activemq:notification.in" />
        <log logName="notifications" loggingLevel="TRACE"
            message="Notification route initiated" />
        <bean ref="NotificationProcessor" method="doStuff" />
    </route>
</camelContext> 
```

如果我删除“onException”结构，那么在所有异常情况下，源消息都会出现在死信队列中，但不会被记录。

如果我按上述方式运行它，那么异常跟踪将记录到 Karaf 的日志中（如果它是“notificationException”），但相关的源消息不会回滚到死信队列并消失在以太中（大概是因为它认为我'已经在“onException”结构中处理了它）。

在查看了不同类型的错误处理程序之后，我尝试向 DeadLetterChannelBuilder 添加一些东西，例如......

```
<property name="logName" value="notifications"/>
<property name="level" value="ERROR"/> 
```

...但这些不是合法财产。

让我感到震惊的是，必须在 onException 子句中明确列出不同的异常是不正确的。

那么，如何让死信通道记录异常跟踪以及将消息放入队列？也许死信通道不是正确的处理程序——在这种情况下，我对自动重新发送并不感兴趣。

感谢您的任何指导，

J。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-07-06T14:35:56.867

这是记录异常并将交换发送到死信队列的另一个选项，用 Camel DSL 表示

```
Processor exceptionLoggingProcessor = (exchange) -> 
      logger.error("Error handled in camel.", exchange.getProperty(Exchange.EXCEPTION_CAUGHT));

setErrorHandlerBuilder(deadLetterChannel("direct:dlq")
    .onExceptionOccurred(exceptionLoggingProcessor)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T08:14:10.810

您可以只使用死信队列的路由，并进行日志记录并发送到 JMS 队列。然后使用direct来指代这条路线

```
<property name="deadLetterUri" value="direct:myDLC"/>

<route>
  <from uri="direct:myDLC"/>
  <log logName="notifications" loggingLevel="ERROR"
            message="Exception from notification Camel route" />
  <to uri="activemq:dead.letter.queue"/>
</route> 
```

你用的是什么版本的骆驼？

# c++ - 我的 c++ 扩展与 faulthandler 的行为不同

> ID：13711463
> 
> 赞同：2
> 
> 时间：2012-12-04T20:39:10.517
> 
> 标签：c++, python, cython

**背景**

我有一个 C++ 扩展，它在缓冲区上运行 3D 分水岭。它有一个很好的 Cython 包装器来初始化一个巨大的`signed char`s 缓冲区来表示体素。我在 python 中初始化一些本机数据结构（在编译的 cython 文件中），然后调用一个 C++ 函数来初始化缓冲区，另一个来实际运行算法（我也可以在 Cython 中编写这些，但我希望它也可以作为 C++ 库工作，而无需依赖 python.h。）

**怪异**

我正在调试我的代码，尝试不同的图像大小来衡量 RAM 使用率和速度等，我注意到结果有些奇怪——它们会根据我是否使用而改变`python test.py`（特别`/usr/bin/python`是在 Mac OS X 10.7 上） .5/Lion，它是 python 2.7) 或`python`running `import test`，并在其上调用一个函数（实际上，在我的笔记本电脑上（OS X 10.6.latest，使用 macports python 2.7）结果也确定性不同 - 每个平台/情况是不同的，但每个总是与自己相同。）。在所有情况下，都会调用相同的函数，从文件中加载一些输入数据，然后运行 ​​C++ 模块。

*关于 64 位 python 的注释 - 我没有使用 distutils 来编译此代码，而是类似于我[在此处](https://stackoverflow.com/a/12706377/393816)的答案（即通过显式`-arch x86_64`调用）。这不应该意味着什么，我在 Activity Monitor 中的所有进程都被调用`Intel (64-bit)`。*

您可能知道，分水岭的重点是在像素汤中找到对象——在 2D 中，它经常用于照片。在这里，我使用它以几乎相同的方式在 3D 中查找块 - 我从图像中的一些块（“颗粒”）开始，我想在它们之间的空间中找到反向块（“细胞”）。

结果变化的方式是我确实发现了不同数量的肿块。对于完全相同的输入数据：

`python test.py`：

```
grain count: 1434
seemed to have 8000000 voxels, with average value 0.8398655
find cells:
running watershed algorithm...
found 1242 cells from 1434 original grains!
... 
```

然而，

`python`, `import test`, `test.run()`:

```
grain count: 1434
seemed to have 8000000 voxels, with average value 0.8398655
find cells:
running watershed algorithm...
found 927 cells from 1434 original grains!
... 
```

这在交互式 python shell 和 中也是一样的`bpython`，我最初认为这是罪魁祸首。

请注意，“平均值”数字是完全相同的——这表明最初在问题空间中标记了相同比例的体素——即，我的输入文件在（很可能）两次都以完全相同的方式初始化体素空间。

另请注意，算法的任何部分都不是不确定的；没有随机数或近似值；受到浮点错误（每次都应该相同）的影响，我们应该两次对完全相同的数字执行完全相同的计算。分水岭使用一个大的整数缓冲区（这里`signed char`是 s）运行，结果是对这些整数的簇进行计数，所有这些都是在一个大的 C++ 调用中实现的。

我已经测试了`__file__`相关模块对象的属性（它们本身就是导入的属性`test`），它们指向安装`watershed.so`在我系统的`site-packages`.

**问题**

我什至不知道从哪里开始调试这个 - 如何使用相同的输入数据调用相同的函数并获得不同的结果？- 交互式 python 可能会导致这种情况（例如，通过改变数据初始化的方式）？- （相当大的）代码库的哪些部分与这些问题相关？

根据我的经验，将所有代码发布到 stackoverflow 问题中会更有用，而不是假设您知道问题出在哪里。但是，这里有数千行代码，我真的不知道从哪里开始！我很高兴根据要求发布小片段。

我也很高兴听到调试策略——我可以检查的解释器状态、有关 python 可能影响导入的 C++ 二进制文件的方式的详细信息，等等。

这是代码的结构：

```
project/
  clibs/
    custom_types/
      adjacency.cpp (and hpp)     << graph adjacency (2nd pass; irrelevant = irr)
     *array.c (and h)             << dynamic array of void*s
     *bit_vector.c (and h)        << int* as bitfield with helper functions
      polyhedron.cpp (and hpp)    << for voxel initialisation; convex hull result
      smallest_ints.cpp (and hpp) << for voxel entity affiliation tracking (irr)
    custom_types.cpp (and hpp)    << wraps all files in custom_types/
    delaunay.cpp (and hpp)        << marshals calls to stripack.f90
   *stripack.f90 (and h)          << for computing the convex hulls of grains
    tensors/
     *D3Vector.cpp (and hpp)      << 3D double vector impl with operators
    watershed.cpp (and hpp)       << main algorithm entry points (ini, +two passes)
  pywat/
    __init__.py
    watershed.pyx                 << cython class, python entry points.
    geometric_graph.py            << python code for post processing (irr)
  setup.py                        << compile and install directives
  test/
    test.py                       << entry point for testing installed lib 
```

（标记的文件`*`已在其他项目中广泛使用，并且经过了很好的测试，后缀`irr`包含代码的文件仅在导致问题后才运行。*）*

**细节**

根据要求，主要节`test/test.py`：

```
testfile = 'valid_filename'

if __name__ == "__main__":
  # handles segfaults...
  import faulthandler
  faulthandler.enable()
  run(testfile) 
```

我的交互式调用看起来像：

```
import test
test.run(test.testfile) 
```

**线索**

当我在直接解释器上运行它时：

```
import faulthandler
faulthandler.enable()
import test
test.run(test.testfile) 
```

我从文件调用中得到结果（即 1242 个单元格），尽管当我在 bpython 中运行它时，它只是崩溃了。

这显然是问题的根源——向 Ignacio Vazquez-Abrams 致敬，因为他立即提出了正确的问题。

**更新：**

我[在 faulthandler github 上打开了一个错误](https://github.com/haypo/faulthandler/issues/4)，我正在努力寻找解决方案。如果我发现人们可以从中学习的东西，我会将其发布为答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:09:31.940

在广泛调试此应用程序后（`printf()`在运行期间的多个点输出所有数据，将输出管道输出到日志文件，`diff`对日志文件进行处理），我发现似乎是什么导致了奇怪的行为。

**我在几个地方使用了未初始化的内存**，并且（出于某种奇怪的原因）这给了我上面描述的两种情况之间可重复的行为差异——一种没有`faulthandler`，一种有。

顺便说一句，这也是为什么该错误从一台机器上*消失*但继续在另一台机器上表现出来的原因，在调试过程中（这真的应该给我一个线索！）

我在这里的错误是基于虚假的相关性来假设有关问题的事情-理论上，每次我访问垃圾内存时，垃圾内存都应该是不同的随机性（啊，理论上）。在这种情况下，我会更快地找到问题主要计算功能和[橡皮鸭](http://en.wikipedia.org/wiki/Rubber_duck_debugging)的打印输出。

所以，像往常一样，答案是**错误不在库中，它在你的代码**中 - 在这种情况下，这是我的`malloc()`一大块 RAM 的错，错误地假设我的代码的其他部分将要初始化它（他们只是有时这样做。）

# c++ - 在 C++ 中从文件中扫描信息

> ID：13711466
> 
> 赞同：1
> 
> 时间：2012-12-04T20:39:19.987
> 
> 标签：c++, text-files, scanf

我有一个包含以下信息的文件：

```
INTERSECTIONS:
1   0.3 mountain and 1st
2   0.9 mountain and 2nd
3   0.1 mountain and 3rd 
```

如何在 C++ 中扫描，以便扫描第一个数字并将其存储在 int 中，然后扫描下一个数字并将其单独存储，然后将街道名称存储在字符串中？我刚从 c 切换，所以我知道如何在 C 中使用

```
fscanf("%d %lf %s", int, float, string); 
```

或者

> fgets

使用字符串，但不知道如何在 C++ 中执行此操作。任何帮助，将不胜感激

主要的：

```
#include<iostream>
#include<list>
#include <fstream>
#include<cmath>
#include <cstdlib>
#include <string>
#include "vertex.h"
#include "edge.h"
#include "global.h"
using namespace std;

int main ( int argc, char *argv[] ){
    if(argc != 4){
        cout<< "usage: "<< argv[0]<<"<filename>\n";
    }
    else{
        ifstream map_file (argv[3]);
        if(!map_file.is_open()){
            cout<<"could not open file\n";
        }
        else{
            std::string line;
            std::ifstream input(argv[3]);
            int xsect;
            int safety;
            std:string xname;

            std::list<vertex> xsection;
            std::list<edge> EdgeList;

            while (std::getline(input, line))
            {
              std::istringstream iss(line);

                iss >> xsect >> safety;

               std::getline(iss, xname);
            }

            }
        }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T20:42:24.857

[`std::getline`](http://en.cppreference.com/w/cpp/string/basic_string/getline)使用and[`std::istringstream`](http://en.cppreference.com/w/cpp/io/basic_istringstream)和标准 C++ 流输入运算符就足够了：

```
std::string line;
std::ifstream input(...);

while (std::getline(input, line))
{
    std::istringstream iss(line);

    int v1;
    double v2;
    std::string v3;

    iss >> v1 >> v2;

    std::getline(iss, v3);
} 
```

# java - 比较来自不同类java的2个对象

> ID：13711469
> 
> 赞同：0
> 
> 时间：2012-12-04T20:39:26.210
> 
> 标签：java, string, class, object

是否可以比较来自 2 个不同类的 2 个对象。

假设我有一个向量，它添加了 A 类中的所有对象。我想将一些字符串与向量的元素进行比较。

例子：

```
if(string.equals(vector.get(i))) 
```

这可能吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T20:41:25.587

是的，你可以打电话`equals()`。但是，如果参数属于不同的类（可能不是子类） ，则任何合理的实现`SomeClass.equals()`都会返回。`false`

如果`string`是 的一个实例，则[特别保证](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equals%28java.lang.Object%29)`java.lang.String`此行为：

> 结果是`true`当且仅当参数不是`null`并且**是表示与该`String`对象**相同的字符序列的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:42:24.610

您的对象至少在 Object 类中，因此（至少部分）在同一个类中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:44:17.260

如果列表的元素具有 String 以外的类型，它将始终返回 false。从`String`方法的文档中`equals`：

> > 将此字符串与指定对象进行比较。当且仅当参数不为 null 并且是表示与此对象相同的字符序列的 String 对象时，结果才为真。

这对于方法 equals 通常是正确的 - 只有在比较对象属于同一类或前者的子类的情况下，它才会或应该返回 true。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T20:44:50.010

写这样的东西是完全有效的；

```
public class MyClass {
    public boolean equals(Object o) {
        if(o instanceof SomeUnrelatedClass) return true;
        return false;
    }
} 
```

但这是不可取的，因为至少*我*会尽量避免它。它会使处理`MyClass`对象有点奇怪，例如将它们放入基于哈希的集合中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T20:42:54.507

一个对象的equals方法可以接受任何其他对象。但是，在将苹果与橙子进行比较时，是否返回 true 取决于实现

# ruby-on-rails - 接收和处理电子邮件：Heroku、Sendgrid，可能还有 Mailman

> ID：13711476
> 
> 赞同：2
> 
> 时间：2012-12-04T20:39:53.607
> 
> 标签：ruby-on-rails, actionmailer, mailman-gem

我的应用程序为每个用户创建一个唯一的电子邮件，用户将电子邮件发送到该地址进行处理。使用 Sendgrid，我将传入的电子邮件通过管道传输到我的域（托管在 Heroku 上）到一个地址：

```
site.com/receive_email 
```

我使用 TO 字段来确定用户，因为电子邮件地址是随机生成的。

[我已经尝试过使用像Mailman](https://github.com/titanous/mailman)这样的外部脚本，但由于我托管在 Heroku 上，我需要有一个全职工作人员来保持这个过程的进行。目前并没有真正为这个测试应用程序寻找那个。

剩下的就是将其作为 POST 请求进行处理。我可以在 receive_emails 访问 POST 哈希（参数 [“主题”] 等）。

**这是我卡住的地方**

您是否建议处理来自 POST 参数的原始数据，或者我可以使用 Mailman 或 ActionMailer 之类的东西为我处理电子邮件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T23:27:57.060

我没有使用 Sendgrid 将电子邮件转换为发布请求，但它可以与 cloudmailin（一个 heroku 插件）一起使用。下面是一个例子，有人给你的应用发了一封邮件，经过 cloudmailin/sendgrid 处理后变成了一个帖子，然后发给你的控制器，然后控制器查看消息参数，从邮件中找到发件人地址，如果发件人不存在，则为她创建一个帐户：

```
class CreateUserFromIncomingEmailController < ApplicationController

  require 'mail'

  skip_before_filter :verify_authenticity_token

  parse_message(params[:message])

  def create
    User.find_or_create_by_email(@sender)
  end

private

  def parse_message(message_params)
    @message    = Mail.new(message_params)
    @recipients = @message.to
    @sender     = @message.from.first
  end

end 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T23:59:05.013

`ActionMailer`已经依赖于`Mail`gem，您可以使用它来解析传入的电子邮件并提取您想要的部分。处理多部分电子邮件特别有用。

```
require 'mail'

class IncomingEmails < ApplicationController
  skip_before_filter :verify_authenticity_token

  def receive_email
    comment = Comment.new(find_user, message_body)
    comment.save

  rescue
    # Reject the message
    logger.error { "Incoming email with invalid data." }
  end

  private

  def email_message
    @email_message ||= Mail.new(params[:message])
    # Alternatively, if you don't have all the info wrapped in a
    # params[:message] parameter:
    #
    # Mail.new do
    #   to      params[:to]
    #   from    params[:from]
    #   subject params[:subject]
    #   body    params[:body]
    # end
  end

  def find_user
    # Find the user by the randomly generated secret email address, using
    # the email found in the TO header of the email.
    User.find_by_secret_email(email_message.to.first) or raise "Unknown User"
  end

  def message_body
    # The message body could contain more than one part, for example when
    # the user sends an html and a text version of the message. In that case
    # the text version will come in the `#text_part` of the mail object.
    text_part = email_message.multipart? ? email_message.text_part : email_message.body
    text_part.decoded
  end
end 
```

# vb6 - 错误 70：权限被拒绝在启动时运行我的应用程序

> ID：13711477
> 
> 赞同：2
> 
> 时间：2012-12-04T20:39:54.263
> 
> 标签：vb6, registry, startup

我用这个函数做了一个例子：

```
Option Explicit

Private Declare Function RegCloseKey Lib "advapi32.dll" (ByVal hKey As Long) As Long
Private Declare Function RegOpenKeyEx Lib "advapi32.dll" Alias "RegOpenKeyExA" (ByVal hKey As Long, ByVal lpSubKey As String, ByVal ulOptions As Long, ByVal samDesired As Long, phkResult As Long) As Long
Private Declare Function RegSetValueEx Lib "advapi32.dll" Alias "RegSetValueExA" (ByVal hKey As Long, ByVal lpValueName As String, ByVal Reserved As Long, ByVal dwType As Long, lpData As Any, ByVal cbData As Long) As Long

Private Const HKEY_CURRENT_USER     As Long = &H80000001
Private Const KEY_WRITE             As Long = &H20006
Private Const REG_SZ                As Long = &H1

Public Function PutOnStartUp(ByVal sPath As String) As Boolean
Dim hRegkey                         As Long

    If RegOpenKeyEx(HKEY_CURRENT_USER, "Software\Microsoft\Windows\CurrentVersion\Run", 0, KEY_WRITE, hRegkey) = 0 Then
        sPath = sPath & vbNullChar
        PutOnStartUp = RegSetValueEx(hRegkey, "My App", 0, REG_SZ, ByVal sPath, Len(sPath)) = 0
        RegCloseKey hRegkey
    End If
End Function 
```

* * *

**测试一：**

```
Private Sub Form_Load()
Dim sPath      As String

    sPath = App.Path & "\" & App.EXEName & ".exe"

    If PutOnStartUp(sPath) Then
        Me.BackColor = vbGreen
    Else
        Me.BackColor = vbRed
    End If

    Me.AutoRedraw = True
    Me.Print sPath
End Sub 
```

*   我在桌面上编译它。
*   我执行它。
*   我重新启动 PC 并从我的桌面成功执行。

* * *

**测试二：**

```
Private Sub Form_Load()
Dim sPath      As String
Dim sDest      As String

    sPath = App.Path & "\" & App.EXEName & ".exe"
    sDest = Environ("tmp") & "\Test.exe"

    If sDest <> sPath Then
        FileCopy sPath, sDest

        If PutOnStartUp(sDest) Then
            Me.BackColor = vbGreen
        Else
            Me.BackColor = vbRed
        End If
    End If

    Me.AutoRedraw = True
    Me.Print sPath
End Sub 
```

*   我在我的桌面上编译它。
*   我执行它。
*   我检查它是否已复制到临时文件夹。
*   我删除了我桌面的exe。
*   我重新启动并... **¡崩溃！**

> 错误 70：权限被拒绝

这里会发生什么？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:12:59.363

检查临时文件夹的权限。据我通过谷歌搜索该问题了解，从临时文件夹运行程序受到限制，因为许多恶意软件程序都从它运行。

# javascript - 根据屏幕分辨率应用类名（css）

> ID：13711481
> 
> 赞同：0
> 
> 时间：2012-12-04T20:40:05.867
> 
> 标签：javascript, html, css

我在处理基于分辨率的应用程序时遇到问题。

如果我有 1024 x 768 的分辨率，我的应用程序应该是 100%（表格布局）。如果我的分辨率高于 1024 x 768，则应用程序应居中对齐（表格宽度为 80%）。

```
function MOSTRA() {
    var SCR = screen.availWidth;
    var BRW = window.outerWidth;
    if (BRW < SCR) {
        document.getElementById('sample').className = 'maintable';
    } else {
        document.getElementById('sample').className = 'maintable1';
    }
}
window.onresize = MOSTRA;
window.onload = MOSTRA; 
```

我已经使用了上面的代码，但这不起作用。

大家好，我已经检查过在需要的地方放置警报。现在我知道问题出现在 window.outerWidth 的位置，似乎是因为当我在该区域发出警报时，我在 IE 中变得未定义。看来 Ie 不支持外宽。我从下面的链接中获取了上面的代码。

[http://jsfiddle.net/Guffa/q56WM/](http://jsfiddle.net/Guffa/q56WM/)

请帮帮我。

这是一个紧迫的问题

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:42:16.137

使用[CSS3 媒体查询](http://www.w3.org/TR/css3-mediaqueries/)：

```
@media screen and (min-width: 1024px) and (min-width: 768px)
{
  /* Center table! */
} 
```

也可以：

```
<link rel="stylesheet" media="screen and (min-width: 1024px) and (min-width: 768px)" href="example.css" /> 
```

JS 变体（因为 OP 不想要 CSS 3）：

```
if (window.screen.width >= 1024 && window.screen.width >= 768) {
  document.head.innerHTML += '<link rel="stylesheet" href="centerTable.css" type="text/css" />'
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:42:34.200

实用地包括基于显示宽度、媒体类型的样式表：http: [//www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

# c# - 回发表丢失

> ID：13711482
> 
> 赞同：1
> 
> 时间：2012-12-04T20:40:09.050
> 
> 标签：c#, asp.net

我正在开发一个基于网络的测验系统。

我有代码生成一个 ASP.NET 表，其中包含问题列表和指示测验问题答案的单选按钮列表。

```
//Retrieve questions and answers - build the actual quiz
        DataTable dtQuiz = qr.GetQuizQuestions(QuizID);

        if (dtQuiz != null && dtQuiz.Rows.Count >= 1)
        {
            foreach (DataRow row in dtQuiz.Rows)
            {
                TableRow tr = new TableRow();
                TableCell tcQuestionNum = new TableCell();
                TableCell tcQuestion = new TableCell();

                tcQuestionNum.VerticalAlign = VerticalAlign.Top;

                tcQuestionNum.Controls.Add(new LiteralControl(row["QuestionNum"].ToString()));
                tcQuestion.Controls.Add(new LiteralControl(row["Question"].ToString()));

                RadioButtonList rblAnswers = qr.GetAnswers(QuizID, Int32.Parse(row["QuestionNum"].ToString()));
                tcQuestion.Controls.Add(rblAnswers);

                tr.Cells.Add(tcQuestionNum);
                tr.Cells.Add(tcQuestion);

                tblQuiz.Rows.Add(tr);
                tblQuiz.DataBind();
            }
        } 
```

此代码生成的内容很好 - 出现测验问题，并且单选按钮列表按预期呈现。

当我有一个单独的按钮单击事件时，有些奇怪。用户选择他们的答案后，我想做一个回发并循环遍历表中的行，从每行第二个单元格的单选按钮列表中提取答案。我开始走这条路：

```
 foreach (TableRow tr in tblQuiz.Rows)
    {
        TableCell tc = tr.Cells[1];
        RadioButtonList rbl = (RadioButtonList) tc.Controls[1];
    } 
```

问题是当第二个按钮被点击（发布答案）时，表格没有行。为什么会这样，我该如何纠正？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:49:35.000

我现在只能想到一个实例，那就是您有在`if (!IsPostBack){}`（或者`If (Not IsPostBack) Then ...`如果是 VB）中创建表的代码

如果是这种情况，回发时不会创建您的表。您需要将代码放在 OUTSIDE 之外，`if (!IsPostBack){}`以便在回发时重新创建表。

**更新**

根据您的评论，我建议：

将生成表的代码移动到它自己的子目录中。像（在vb中）

```
Private Sub GenerateTable()
   '' Code here
End Sub 
```

然后当您单击按钮生成表时，调用此子。

最后，当您单击按钮提交答案时，在处理任何选择之前再次调用此子程序。

最终，需要先创建表，然后才能处理其内容。

不用担心 - 表的创建不会覆盖用户所做的任何选择。

# django - gunicorn：错误（没有这样的文件）nginx + gunicorn + supervisor

> ID：13711486
> 
> 赞同：9
> 
> 时间：2012-12-04T20:40:31.240
> 
> 标签：django, nginx, gunicorn, supervisord

我用 gunicorn、nginx、supervisord 部署我的 django 项目。我在 virtualenv 中安装了一个 gunicorn，在 INSTALL_APPS 中添加。该命令`./manage.py run_gunicorn -b 127.0.0.1:8999`有效：

```
2012-12-04 12:27:33 [21917] [INFO] Starting gunicorn 0.16.1
2012-12-04 12:27:33 [21917] [INFO] Listening at: http://127.0.0.1:8999 (21917)
2012-12-04 12:27:33 [21917] [INFO] Using worker: sync
2012-12-04 12:27:33 [22208] [INFO] Booting worker with pid: 22208 
```

对于 nginx，我编辑了 nginx.conf：

```
server {
    listen 111111111:80;
    server_name my_site.pro; 

    access_log /home/user/logs/nginx_access.log;
    error_log /home/user/logs/nginx-error.log;

    location /static/ {
        alias /home/user/my_project/static/;
    }
    location /media/ {
        alias /home/user/my_project/media/;
    }
    location / {
        proxy_pass http://127.0.0.1:8999;
        include /etc/nginx/proxy.conf;
    }
} 
```

之后我重新启动了nginx。

supervisord.conf：

```
[unix_http_server]
file=/tmp/supervisor-my_project.sock  
chmod=0700                
chown=user:user

[supervisord]
logfile=/home/user/logs/supervisord.log
logfile_maxbytes=50MB        
logfile_backups=10           
loglevel=info                
pidfile=/tmp/supervisord-my_project.pid
nodaemon=false              
minfds=1024                  
minprocs=200 

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl=unix:///tmp/supervisor-my_project.sock 

[program:gunicorn]
command=/home/user/bin/manage run_gunicorn -w 4 -b 127.0.0.1:8999 -t 300 --max-   requests=1000
startsecs=10
stopwaitsecs=60
redirect_stderr=true
stdout_logfile=/home/user/gunicorn.log 
```

我跑了`bin/supervisorctl start all`。但我得到了：

```
gunicorn: ERROR (no such file) 
```

缺少什么文件？如何部署我的项目？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-10-10T23:08:02.543

对于未来的搜索者，我遇到了这个问题，问题是我需要提供 Gunicorn 二进制文件的完整路径。无论出于何种原因，即使指定了 PATH= 环境变量，主管也找不到二进制文件。一旦我 /full_path/gunicorn 它工作。（也许有一种方法可以使用环境变量正确执行此操作）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:28:12.470

由于您使用的是 virtualenv，因此您必须将环境设置为它在 supervisord.conf 中使用的 PATH。

尝试这个：

```
[program:gunicorn]
command=/home/user/bin/manage run_gunicorn -w 4 -b 127.0.0.1:8999 -t 300 --max-requests=1000
environment=PATH="/home/user/bin/"
... 
```

这是假设`/home/user/bin/`您的 virtualenv 的路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-02T06:01:00.460

我有同样的问题，实际上我发现我的虚拟环境中没有安装 gunicorn。

做

```
pip install gunicorn==<version_number> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-13T13:27:45.917

我从使用 apt 安装主管切换到使用 pip。这将主管和 pidproxy 的路径从 /usr/bin 更改为 /usr/local/bin/。我在主管 gunicorn.conf 中使用 pidproxy。

因此，仅切换主管安装方法意味着找不到“pidproxy”并生成消息“gunicorn: ERROR (no such file)”。

糟糕的错误消息可能指的是 gunicorn 以外的东西。

> 命令=/usr/local/bin/pidproxy /var/run/gunicorn.pid /gunicorn.sh

# objective-c - 在 Cocoa 中进行子类化时覆盖委托方法

> ID：13711491
> 
> 赞同：3
> 
> 时间：2012-12-04T20:40:56.883
> 
> 标签：objective-c, cocoa-touch, delegates

假设我有一个类`Foo`声明了一个具有 3 个方法的委托协议。我想将子类`Foo`化为一个名为`Bar`并完全覆盖这些方法的类。

我应该再次在子类标题中声明它们吗？

当我在`Bar`' 的委托中实现这 3 种方法时，我是否必须采取任何预防措施以确保`Foo`不会使用 ' 的实现？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T20:50:05.517

> 我应该再次在子类标题中声明它们吗？

这不是必需的，因为您`Bar.h`将导入`Foo.h`并因此知道它符合该协议。

> 当我在 Bar 的委托中实现这 3 个方法时，我是否必须采取任何预防措施来确保不会使用 Foo 的实现？

您需要采取的唯一预防措施是不要调用`[super delegateMethod];`您的实现，您就可以开始了。

# html - 为什么浏览器向我的 LI 注入空间？

> ID：13711496
> 
> 赞同：0
> 
> 时间：2012-12-04T20:41:12.033
> 
> 标签：html, css

我遇到了一个我以前从未注意到的奇怪问题。我有以下代码：

```
<div class="feedback">
  <span> Was this helpful?</span>
  <ul>
    <li>
      <a href="#">Yes</a>
    </li>
    <li>
      <a href="#">No</a>
    </li>
    <li>
      <a href="#">No</a>
    </li>
  </ul>
</div> 
```

非常简单的代码块。忽略第二个不，因为它实际上只是给我第三个`li`来帮助我解决这个问题。现在，这是CSS...

```
div.feedback {
  position: relative;
}
span {
  float: left;
}
li {
  display: inline-block;
  padding: 0;
  margin: 0;
  border-left: 1px solid #000
} 
```

现在，这就是正在发生的事情：

![左边框](../Images/c657ea265081b1d7a9ec44459dbb8e47.png)

看到似乎不知从何而来的额外间距？我`border-right`只是为了测试它，得到了更加不一致的结果：

![右边界](../Images/0e7114731fb4cefdf7cd13b394773df6.png)

现在，第 3 个 LI 应该有 0`padding`和`margin`。另外两个还有空位。

最后，浏览器理解 的`height`和`width`，`li`并将 no`margin`或属性归于`padding`它。根据浏览器的说法，文本应该被撞到边框上，正如我所期望的那样。

![浏览器看不懂](../Images/55e990f35b1d0dd20cbd435c9b8a993b.png)

有人可以解释一下文本右侧额外的 3-5 像素间距是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:46:43.357

这是因为换行符在 HTML 中被视为空格。您已将内部元素指定为`inline-block`，这意味着显示它们之间的空格。

您可以：

1.  将 parent 上的 font-size 设置为 0，然后在`<li>`,上恢复正常
2.  只需消除`<li>`s 之间的换行符。

* * *

存在第三个（较小的）选项，它是使用`float`.

`float`最初是为了允许元素被推到容器的边缘，同时让文本在它周围自由流动（就像报纸上的图像）。该功能也~~被~~用于布局，当人们发现它会使块级元素水平堆叠时。

使用`float`意味着您需要`clear`通过使用**[clearfix](https://stackoverflow.com/questions/8554043/what-actually-is-clearfix)**或在其上`clear: both`设置一个元素来追求自己。

这个选项较少，因为很像表格布局，它不是最初的目的`float`，不同浏览器和不同时间段的实现可能不同，但最重要的是，它增加了清除的开销问题。`display: inline-block`（如果你能帮上忙，那就坚持吧！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:45:24.477

它来自代码中的空白。请参阅此**[jsFiddle 示例](http://jsfiddle.net/j08691/rUEnh/1/)**

```
<div class="feedback">
  <span> Was this helpful?</span>
  <ul>
    <li>
      <a href="#">Yes</a>
    </li><li>
      <a href="#">No</a>
    </li><li>
      <a href="#">No</a>
    </li>
  </ul>
</div>​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:50:26.233

某处你有一个显示：内联块。

内嵌块显示的行为是这样的。它将代码中的任何空格和换行符显示为空格。

您必须手动删除 HTML 中的空格和返回，或者将显示更改为其他内容。

# mysql - 有没有办法锁定 MySQL 中的特定行和列？

> ID：13711501
> 
> 赞同：0
> 
> 时间：2012-12-04T20:41:26.397
> 
> 标签：mysql, database

我有一个数据库表，它会不时被进程更新。但是，在某些情况下，我想强制覆盖特定行。有没有一种方法可以不用编写大量代码来处理覆盖等，只需锁定数据库本身中的行或字段？

例如，我的桌子看起来像

```
STUDENT | TEST_SCORE_AVG | HOMEWORK_AVG
John    |       92.3     |     88.8
Lisa    |       77.4     |     99.8 
Terry   |       88.0     |     64.5 
```

每次新的测试或家庭作业，学生的平均成绩都会发生变化。但是，假设老师是约翰的母亲，无论如何，他的家庭作业平均得分为 100.0。有没有办法锁定它，以便任何试图改变值的程序都会被反弹回来？我正在使用 MySQL 工作台访问我的 MySQL 数据库 (InnoDB)

更新：

我还可以使用锁定整行的功能来实现 - 这意味着既不能`TEST_SCORE_AVG`也不`HOMEWORK_AVG`能改变。无论连接是否丢失，我都需要该解决方案能够长期存在。我想锁定该行，直到我解锁它为止

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:47:44.263

从[手册](http://dev.mysql.com/doc/refman/5.5/en/innodb-lock-modes.html)：

> InnoDB 实现了标准的行级锁定，其中有两种类型的锁定：
> 
> *   共享 (S) 锁允许事务读取一行。
> *   排他 (X) 锁允许事务更新或删除行。

您可以锁定特定的行，但不能锁定特定的行*和*列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:53:26.653

不，没有*实用*的方法可以防止单行中的单个值发生变化。

使用除了 MySQL 之外的任何东西，您都可以创建一个 CHECK() 约束来保证 John 的作业平均数始终为 100，但我认为这并不实用。在 MySQL 上，您必须使用触发器才能获得相同的功能，但我再次认为这并不实用。

其他答案是指行级锁定，这实际上与防止单行中的单个值更改无关。

# php - 2 个问题：PHP 代码在 Apache 网络服务器上运行成功，但在本地 EasyPHP 上却没有？

> ID：13711502
> 
> 赞同：1
> 
> 时间：2012-12-04T20:41:30.973
> 
> 标签：php, easyphp

1：当我在网络服务器上运行此代码（省略了一些不必要的代码）时，它运行良好。我有一个 EasyPHP 设置，当我在上面运行完全相同的代码时，我得到了错误：

`Parse error: syntax error, unexpected '<<' (T_SL) in C:\Program Files (x86)\EasyPHP-12.1\www\my portable files\part1.php on line 985` （第 985 行注释如下）

2：每当我在网络服务器上运行此代码时，它说我无权访问`$_SERVER[PHP_SELF]`，所以我必须使用“”。虽然 "" 有效，但无法正确验证。

注意：我无法正确格式化代码块。下面的块应该读作一个连续的块。

```
function print_form() { 

echo <<<END         /*Line 985*/
<h1>Welcome to the player registration page. Please input the following:</h1> 

 <form action="$_SERVER[PHP_SELF]" method="post"> 

<div class="name"> 
Username: <input type="text" name="name" size="12"    /> <br /> 
</div> 

<div class="country"> 
Country: <select name="country"> 
<option value="">Select Country</option> 
<option value="AF">Afghanistan</option>  
...
       <option value="ZW">Zimbabwe</option>  
    </select>  
</div> 

<div class="xfire"> 
Xfire: <input type="text" name="xfire" /> <br /> 
</div> 

<div class="team"> 
Team: <input type="text" name="team" /> <br /> 
</div> 

<div class="tag"> 
Tag: <input type="text" name="tag" /> <br /> 
</div> 

<input type="hidden" name="stage" value="process"> 
 Submit Info: 
<input type="submit" value="Submit"/> 

</form>

END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:44:32.393

尝试：

```
function print_form() { 
?>
<h1>Welcome to the player registration page. Please input the following:</h1>
...
<? } ?> 
```

我认为这种方式更容易......

# windows-8 - Windows 应用商店应用程序：抑制“通用”文件夹生成？

> ID：13711505
> 
> 赞同：0
> 
> 时间：2012-12-04T20:41:33.653
> 
> 标签：windows-8, windows-runtime, windows-store-apps

我正在编写一个 Windows Store 应用程序，我想知道是否可以禁止生成包含 Microsoft 代码的“Common”文件夹，我不需要。

有任何想法吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:06:56.113

Common 包含 StandardStyles.xaml，每个 App.xaml：

```
<!-- 
  Styles that define common aspects of the platform look and feel
  Required by Visual Studio project and item templates
-->
<ResourceDictionary Source="Common/StandardStyles.xaml"/> 
```

在 StandardStyles.xaml 中：

```
<!--
    This file contains XAML styles that simplify application development.

    These are not merely convenient, but are required by most Visual Studio project and item templates.
    Removing, renaming, or otherwise modifying the content of these files may result in a project that
    does not build, or that will not build once additional pages are added.  If variations on these
    styles are desired it is recommended that you copy the content under a new name and modify your
    private copy.
--> 
```

也就是说，如果您确定它不是您需要的东西，只需将其删除，这比破解 T4 模板（或使用的任何机制）来生成代码更简单且更不易碎。

# mysql - 填充选择 stamenet 中的字段 - MySQL

> ID：13711506
> 
> 赞同：1
> 
> 时间：2012-12-04T20:41:37.790
> 
> 标签：mysql, sql, phpmyadmin

我正在尝试进行计算并在 select 语句中填充一个字段。它看起来像这样：

```
 CREATE VIEW SALES_REPORT AS(
SELECT 
INVOICENO,
INVOICEDATE,
CLIENTID,
CONTACT,
INVOICEJOBNO,
ADDCHARGES,
CHARGESINFO,
EMPLOYEEID,
USUALPAY,
VAT,
SUBTOTAL (SELECT(USUALPAY * COUNT(*) AS SUBTOTAL FROM SALES_REPORT)),
TOTAL = (SUBTOTAL * VAT)
FROM SALES_REPORT_JOINS_CONFIG
GROUP BY INVOICENO ORDER BY INVOICEDATE DESC); 
```

任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:44:32.063

```
TOTAL = (SUBTOTAL * VAT) 
```

应该是

```
(SUBTOTAL * VAT) AS TOTAL 
```

现在它将返回相等比较的布尔真/假结果。您没有将乘法结果分配给“总计”字段 - 您正在将总计的任何值与乘法结果进行比较。

这是一个明确的语法错误：

```
SUBTOTAL (SELECT(USUALPAY * COUNT(*) AS SUBTOTAL FROM SALES_REPORT)), 
```

# cloud-foundry - Cloudfoundry 如何让两个应用共享一个数据库服务

> ID：13711511
> 
> 赞同：1
> 
> 时间：2012-12-04T20:41:53.157
> 
> 标签：cloud-foundry

我为两个应用程序绑定了一个 postgresql 服务。他们都更新了数据库。问题是我使用其中一个应用程序通过使用 spring jdbc 命名空间来创建表（数据库模式）。但由于另一个设置为使用不同的用户名和密码。它不能访问由另一个创建的表。无论如何，cloudfoundry 提供解决问题的灵活性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T04:38:54.697

对于 Spring 应用程序，这可以通过利用“自动重新配置”来实现。CF 在特定条件下检测类 javax.sql.DataSource 的 bean，然后将用户名或密码等属性替换为配置的值。您可以在这里找到非常详细的说明：http: [//docs.cloudfoundry.com/frameworks/java/spring/spring.html](http://docs.cloudfoundry.com/frameworks/java/spring/spring.html)

因此，对于您的 2 个应用程序，您都可以将数据源连接配置为相同的格式。只要您将相同的 postgresql 服务绑定到这两个应用程序，尽管 CF 会为两个应用程序注入不同的值，但它们可以访问同一个表而无需任何显式配置。

# c++ - 使用归纳法证明冒泡排序是正确的

> ID：13711517
> 
> 赞同：0
> 
> 时间：2012-12-04T20:42:20.037
> 
> 标签：c++, sorting, bubble-sort

我们如何使用归纳法证明冒泡排序是正确的？我们如何选择在整个证明制定过程中遵循的不变量（这一步对我来说似乎是一项任意任务，所以如果可以更深入地解释它，我将不胜感激）？

我知道每次迭代后最大的元素总是会出现在列表的末尾，但我不知道如何使用这个事实来证明算法是正确的。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:53:28.960

我不确定这是否是你想要的，但他就是我的看法。

冒泡排序背后的想法是你通过值的向量（从左到右）。我称之为通行证。在传递过程中，值对被检查并交换为正确的顺序（右上方）。

在第一次通过期间，将达到最大值。当达到最大值时，最大值将高于它旁边的值，因此它们将被交换。这意味着 max 将成为传递中下一对的一部分。重复此过程，直到 pass 完成并且 max 位于向量的右端。

在第二次传递期间，向量中的第二高值也是如此。唯一的区别是它不会在最后与最大值交换。现在正确设置了两个最右边的值。

我每下一次传一个值就会被整理到右边。

有 N 个值和 N 个传递。这意味着在 N 次通过后，所有 N 个值都会被排序

# linux - 在汇编程序中编写 linux 内核模块时的内存访问

> ID：13711524
> 
> 赞同：1
> 
> 时间：2012-12-04T20:42:36.263
> 
> 标签：linux, assembly, linux-kernel, nasm, kernel-module

我尝试在汇编程序中编写内核模块。有一次我需要一个全局变量。我在 .data（或 .bss）部分定义了一个 dword，并在 init 函数中尝试将 1 添加到 var。我的程序 seccesfully 制作，但 insmod sey 我：

```
$ sudo insmod ./test.ko
insmod: ERROR: could not insert module ./test.ko: Invalid module format 
```

这是我在 nasm 中的汇编代码：

```
[bits 64]

global init
global cleanup

extern printk

section .data
    init_mess db "Hello!", 10, 0
    g_var dd 0

section .text

init:
    push rbp
    mov rbp, rsp

    inc dword [g_var]

    mov rdi, init_mess
    xor rax, rax
    call printk

    xor rax, rax
    mov rsp, rbp
    pop rbp
    ret

cleanup:
    xor rax, rax
    ret 
```

如果我用 C 代码编写添加，一切正常：

```
static i = 0;
static int  __init main_init(void)    { i++; return init(); } 
```

但在这篇`objdump -d test.ko`文章中，为我写了一个非常漂亮的代码：

```
0000000000000000 <init_module>:
   0:   55                      push   %rbp
   1:   ff 05 00 00 00 00       incl   0x0(%rip)        # 7 <init_module+0x7>
   7:   48 89 e5                mov    %rsp,%rbp
   a:   e8 00 00 00 00          callq  f <init_module+0xf>
   f:   5d                      pop    %rbp
  10:   c3                      retq 
```

这是什么意思（包括 0x0(%rip)）？如何访问内存？请帮帮我:)（我的系统是archlinux x86_64）

我用于正确制作模块的 C 代码：

```
#include <linux/module.h>
#include <linux/init.h>

MODULE_AUTHOR("Actics");
MODULE_DESCRIPTION("Description");
MODULE_LICENSE("GPL");

extern int init(void);
extern int cleanup(void);

static int  __init main_init(void)    { return init(); }
static void __exit main_cleanup(void) { cleanup(); }

module_init(main_init);
module_exit(main_cleanup); 
```

和我的 Makefile：

```
obj-m := test.o
test-objs := inthan.o module.o
KVERSION = $(shell uname -r)
inthan.o: inthan.asm
    nasm -f elf64 -o $@ $^

build:
    make -C /lib/modules/$(KVERSION)/build M=$(PWD) modules 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T23:33:30.460

内核模式位于地址空间的“负”（即顶部）部分，其中不能使用 32 位绝对地址（因为它们没有符号扩展）。正如您所注意到的，gcc 使用 rip-relative 地址来解决这个问题，它给出了当前指令指针的偏移量。您可以使用该`DEFAULT REL`指令使 nasm 做同样的事情。请参阅[nasm 文档中的相关部分](http://www.nasm.us/doc/nasmdoc6.html#section-6.2)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:52:52.007

你总是可以使用[内联汇编](http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html)

```
 asm("add %3,%1 ; sbb %0,%0 ; cmp %1,%4 ; sbb $0,%0"             \
 54             : "=&r" (flag), "=r" (roksum)                               \
 55             : "1" (addr), "g" ((long)(size)),                           \
 56               "rm" (limit)); 
```

# jquery-mobile - 绑定停止更新

> ID：13711528
> 
> 赞同：3
> 
> 时间：2012-12-04T20:42:50.323
> 
> 标签：jquery-mobile, knockout.js, flot

我一直在尝试创建一个自定义绑定来更新浮动图表，它似乎在它第一次加载时可以工作，但是当我浏览它时它退出了。

这是场景，我在一个页面上有一个列表视图（这是在 jQuery Mobile 中），带有小图的缩略图，图旁边是一个滑块，它绑定到同一视图模型的属性，导致图指向被重新计算。当您单击其中一个列表项时，它会移动到显示更大版本的图表的另一个页面，并允许您通过在文本框中键入来更改值（稍后，您将能够直接单击图表） . 绑定看起来像这样：

```
 ko.bindingHandlers["plot"] = {
        init: function (element, valueAccessor, allBindingsAccessor) {
            var qe = $(element);
            var page = qe.closest("div[data-role='page']");
            page.bind("pageshow", function () {
                ko.bindingHandlers["plot"].update(element, valueAccessor);
            });
        },
        update: function (element, valueAccessor, allBindingsAccessor) {
            var qe = $(element);
            var page = qe.closest("div[data-role='page']");
            var curr = $.mobile.activePage;
            var val = ko.utils.unwrapObservable(valueAccessor());
            var data = val.plotData();
            if(data && page.prop("id") == curr.prop("id")) {
                var marker = val.markerData();
                var opt = val.chartOptions();
                opt.yaxis.show = opt.xaxis.show = !qe.hasClass("graphThumb");
                marker.points.radius = opt.yaxis.show ? 5 : 3.5;
                $.plot(qe, [
                    data, 
                    marker
                ], opt);
            }
        }
    }; 
```

处理程序将其`init`设置为在页面显示上绘制图形，因为 flot 在绘制到不可见时无法正常工作`div`。更新将检查当前显示的页面是否与绑定的页面相同，并根据需要重新绘制图形。

对于列表视图中的图形，它们会立即通过该`update`方法绘制并正常工作。但是，对于最初隐藏的页面，绘制图形的功能会触发，图形绘制，但更新将不再起作用。然后，更糟糕的是，当您返回初始页面时，绑定到`pageshow`事件的函数会触发，重新绘制图形，但现在它们也退出了更新。

视图模型看起来像这样：

```
var viewModel = (function () {
    this.current = ko.observable(0);
    this.plotData = ko.computed(function () {
        var points = [];
        // a bunch of calculations that depend on the value of current of this and other viewModels in a collection
        return points;
    }
} 
```

我可以在计算中设置一个断点`plotData`并查看它是否正确更新。只是这些更新不会触发绑定处理程序。

HTML 绑定看起来像这样：

```
<!-- the first, visible page -->
<div data-role="page" id="index">
    <ul data-role="listview" data-bind="foreach: factors">
        <li data-bind="attr: {id: listId}">
            <a data-bind="attr: {href: idLink}">
                <div class="graphThumb" data-bind="plot: $data"></div>
            </a>
        </li>
     </ul>
</div>
<!-- hidden details pages -->
<!-- ko foreach: factors -->
<div data-role="page" data-bind="attr: { id: id }"> 
    <div class="graphPlaceHolder" data-bind="plot: $data"></div>
</div>
<!-- /ko --> 
```

**更新**：我稍微改变了我的绑定，因为我意识到我可以调用`update`事件`pageshow`处理程序，这简化了事情，但没有解决问题。似乎这样做不会使淘汰赛更新它对绑定的依赖项。

**更新**：另一个更新，分配`val.plotData()`给一个变量没有工作，也没有包括在我的`if`声明中。但是，我有另一个计算的 observable，它取决于`current`父视图模型的值和另一个属性，我可以检索并添加到我的`if`有效语句中！但是，我的解决方案可能具体到通常有用。简短的故事是，淘汰赛将在每次更新时重新评估绑定的依赖关系，因此您需要确保它正在评估重要的东西，而不考虑任何条件逻辑，否则它将停止更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:50:18.757

所以我可以总结一下这个问题并将其标记为已回答，我将简要总结一下我的经验。

自定义绑定的实现与 Knockout 中的计算属性相同（根据 KO 文档），计算属性所做的一件事是在每次执行它们时重新评估它们依赖的属性。这意味着，如果您在计算属性（或自定义绑定）中有条件，则只有在实际执行的条件分支中访问的属性才会通过敲除来监视更改。因此，例如，如果您有这样的属性：

```
var myComputedProperty = ko.computed(function() {
    if(this.myBool()) {
        $("#someElement").text(this.foo());
    }
    else {
        $("#someElement").text(this.bar());
    }
}); 
```

KO 将跟踪 的值`myBool`并在属性更改时重新计算，但是，如果`myBool`为 true，它也会跟踪`foo`，如果`myBool`为 false，它也会跟踪`bar`，但不会同时跟踪两者 - 因为它不需要到。大多数时候这工作得很好。

在我的情况下，它失败了，因为我有一个不属于视图模型的条件（因此不可观察），我需要它来跟踪视图模型属性，无论条件评估为真还是错误的。所以我有一些看起来像这样的东西：

```
if(page.prop("id") == curr.prop("id")) {
    $("#someElement").text(this.foo());
} 
```

这里比较的是`id`绑定所在的页面和`$.mobile.activePage`jQuery Mobile 提供的页面之间的比较（并且，显然不可观察）。如果这些`id`匹配，则淘汰赛将在`foo`更改时更新绑定。但是，如果他们不这样做，那么淘汰赛将失去对的依赖`foo`，即使`id`在稍后的某个时间匹配，它也会失去依赖并且不会在`foo`更改时重新评估。

解决此问题的方法是确保无论条件如何，都对需要跟踪的任何属性进行评估。所以，这样的事情应该解决一般情况：

```
if(this.foo() && page.prop("id") == curr.prop("id")) {
    $("#someElement").text(this.foo());
} 
```

至于我为什么需要这个条件，是因为 flot 在尝试将图形绘制到不可见的 div 时会变得非常困惑，所以当它不是当前页面时，我需要跳过绘制图形。

# java - 数组越界异常

> ID：13711531
> 
> 赞同：1
> 
> 时间：2012-12-04T20:43:08.407
> 
> 标签：java, arrays

我在第 57 行遇到越界错误。感谢您的帮助。该程序需要 1 个整数并创建具有那么多索引的数组。然后它要求更多的整数来填充它。然后它将所有偶数放入第二个数组中，然后输出。

```
run:
Enter the ammount of integers you will require.
10
Enter your integers: 
1
Enter your integers: 
2
Enter your integers: 
3
Enter your integers: 
4
Enter your integers: 
5
Enter your integers: 
6
Enter your integers: 
7
Enter your integers: 
8
Enter your integers: 
9
Enter your integers: 
0
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 0
    at AllEven.arrcheck2(AllEven.java:57)
    at AllEven.main(AllEven.java:24)
Java Result: 1
BUILD SUCCESSFUL (total time: 4 seconds) 
```

**代码**

```
import java.util.*;

public class AllEven {

public static void main(String[] args) {
    int read;

    Scanner kybd = new Scanner(System.in);

    System.out.println("Enter the ammount of integers you will require.");

    read = kybd.nextInt();

    int[] arr1 = new int[read];
    int[] arr2;

    int count = 0;
    arrRead(arr1);
    arrcheck(arr1);

    arr2 = new int[count];

    arrcheck2(arr1, arr2);
    mainPrint(arr2);

}

public static int arrcheck(int[] arr1) {
    int count = 0;
    for (int i = 0; i < arr1.length; i++) {
        if (arr1[i] % 2 == 0) {
            count++;

        }

    }
    return count;
}

public static void arrRead(int[] arr1) {
    Scanner kybd = new Scanner(System.in);

    for (int i = 0; i < arr1.length; i++) {
        System.out.println("Enter your integers: ");
        arr1[i] = kybd.nextInt();

    }
}

public static void arrcheck2(int[] arr1, int[] arr2) {
    int j = 0;
    for (int i = 0; i < arr1.length; i++) {
        if (arr1[i] % 2 == 0) {
            arr2[j] = arr1[i];
            j++;

        }

    }

}

public static void mainPrint(int[] arr2) {
    for (int i = 0; i < arr2.length; i++) {
        System.out.println("Printing Even Numbers.");
        System.out.println(arr2[i]);
    }
}
} 
```

好的，感谢所有提供帮助的人，但是现在输入整数后，程序就完成了，之后没有显示任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:46:18.967

您需要`arrcheck`在创建之前在 count 变量中分配调用的返回值`arr2`。否则，您将创建`arr2`大小为 0 的您。

改变： -

```
int count = 0;
arrRead(arr1);
arrcheck(arr1); 
```

至： -

```
arrRead(arr1);
int count = arrcheck(arr1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:55:57.170

您没有初始化您的数组`int[] arr2`。您不应该使用数组来填充初始数组中的偶数元素，因为数组在初始化时需要确定的大小——`ArrayList`如果必须的话，最好在知道最终大小后使用然后将其转换为数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T20:46:06.763

对于初学者来说，你的`arrcheck`函数会返回一个计数而不用它做任何事情。我怀疑你打算写这样的东西：

```
arrRead(arr1);
int count = arrcheck(arr1); 
```

否则你的下一行：

```
arr2 = new int[count]; 
```

创建一个大小为 0 的数组，一旦访问它就会导致数组越界。

你也拼错了金额，我认为程序的其余部分应该与上述更改一起使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T20:46:42.093

简要查看代码后，我认为您的问题出在此处：

```
int count = 0;
arrRead(arr1);
arrcheck(arr1);

arr2 = new int[count]; //array of size 0!

arrcheck2(arr1, arr2); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-04T20:46:48.947

您定义`arr2`为零长度数组：

```
int count = 0;
....
arr2 = new int[count]; 
```

然后，在`arrcheck2`你有一行：

```
arr2[j] = arr1[i]; 
```

这不起作用，因为`arr2`没有长度，所以你不能把任何东西放进去。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-04T20:46:57.497

arr2 的大小为 0。因此，当您尝试访问其中不存在的索引时，您会遇到异常。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-04T20:47:06.317

您创建一个长度为 0 的数组。

```
arr2 = new int[count]; 
```

您应该给它一个大于 0 的长度。如果您希望它与 arr1 的长度相同，只需执行`arr2 = new int[read];`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-04T20:47:49.437

您需要将 arr2 初始化为与 arr1 相同的长度。int count = read 将解决问题。或者您可以完全删除 count 并在初始化数组时只使用 read 。

```
 read = kybd.nextInt();

    int[] arr1 = new int[read];
    int[] arr2;

    int count = read;
    arrRead(arr1);
    arrcheck(arr1);

    arr2 = new int[count]; 
```

# javascript - 是否可以根据以前的单选按钮限制单选按钮选择？

> ID：13711542
> 
> 赞同：2
> 
> 时间：2012-12-04T20:43:52.460
> 
> 标签：javascript, jquery, forms

基本上我有一个调查，我希望人们根据重要性对 5 个项目 1-5 进行排名。

这是 HTML：http: [//jsfiddle.net/madcaesar/jj8ky/](http://jsfiddle.net/madcaesar/jj8ky/)

```
<form>
    <table>
    <tr>
                    <th colspan="2" class="altTH" style="text-align:left">Please rank, in order of most important (1) to least important (5)</th>
                  </tr>
                  <tr>
                    <th><label>Professionalism (promoting the profession of medicine)</label></th>
                    <td>
                        <label style="display:inline"><input type="radio" name="Professionalism" value="1" class="checkbox"/> 1</label>
                        <label style="display:inline"><input type="radio" name="Professionalism" value="2" class="checkbox"/> 2</label>
                        <label style="display:inline"><input type="radio" name="Professionalism" value="3" class="checkbox"/> 3</label>
                        <label style="display:inline"><input type="radio" name="Professionalism" value="4" class="checkbox"/> 4</label>
                        <label style="display:inline"><input type="radio" name="Professionalism" value="5" class="checkbox"/> 5</label>
                    </td>
                  </tr>
                  <tr>
                    <th><label>Government Relations (state and federal government advocacy)</label></th>
                    <td>
                        <label style="display:inline"><input type="radio" name="GovernmentRelations" value="1" class="checkbox"/> 1</label>
                        <label style="display:inline"><input type="radio" name="GovernmentRelations" value="2" class="checkbox"/> 2</label>
                        <label style="display:inline"><input type="radio" name="GovernmentRelations" value="3" class="checkbox"/> 3</label>
                        <label style="display:inline"><input type="radio" name="GovernmentRelations" value="4" class="checkbox"/> 4</label>
                        <label style="display:inline"><input type="radio" name="GovernmentRelations" value="5" class="checkbox"/> 5</label>
                    </td>
                  </tr><tr>
                    <th><label>Education (e.g. CME, staff training, meetings)</label></th>
                    <td>
                        <label style="display:inline"><input type="radio" name="Education" value="1" class="checkbox"/> 1</label>
                        <label style="display:inline"><input type="radio" name="Education" value="2" class="checkbox"/> 2</label>
                        <label style="display:inline"><input type="radio" name="Education" value="3" class="checkbox"/> 3</label>
                        <label style="display:inline"><input type="radio" name="Education" value="4" class="checkbox"/> 4</label>
                        <label style="display:inline"><input type="radio" name="Education" value="5" class="checkbox"/> 5</label>
                    </td>
                  </tr>
                  <tr>
                    <th><label>Regulatory and legal analysis and support</label></th>
                    <td>
                        <label style="display:inline"><input type="radio" name="Regulatory" value="1" class="checkbox"/> 1</label>
                        <label style="display:inline"><input type="radio" name="Regulatory" value="2" class="checkbox"/> 2</label>
                        <label style="display:inline"><input type="radio" name="Regulatory" value="3" class="checkbox"/> 3</label>
                        <label style="display:inline"><input type="radio" name="Regulatory" value="4" class="checkbox"/> 4</label>
                        <label style="display:inline"><input type="radio" name="Regulatory" value="5" class="checkbox"/> 5</label>
                    </td>
                  </tr>
                  <tr>
                    <th><label>Communications (Iowa Medicine magazine, website, media relations, etc.)</label></th>
                    <td>
                        <label style="display:inline"><input type="radio" name="Communications" value="1" class="checkbox"/> 1</label>
                        <label style="display:inline"><input type="radio" name="Communications" value="2" class="checkbox"/> 2</label>
                        <label style="display:inline"><input type="radio" name="Communications" value="3" class="checkbox"/> 3</label>
                        <label style="display:inline"><input type="radio" name="Communications" value="4" class="checkbox"/> 4</label>
                        <label style="display:inline"><input type="radio" name="Communications" value="5" class="checkbox"/> 5</label>
                    </td>
                  </tr>

</table>

</form> 
```

一旦选择了 1，jQuery 是否可以使 1 不可用？和 2 一旦选择了 2 等等？现在他们可以选择他们想要的任何数字，我想不出办法做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T20:56:41.690

像这样的事情怎么样，如果您选择某个数字，它会取消选择任何其他具有相同值的数字？：

[http://jsfiddle.net/jj8ky/2/](http://jsfiddle.net/jj8ky/2/)

```
$("#radio_table").on("click", ".checkbox", function () {
    var $this = $(this);
    var all = $("#radio_table").find(".checkbox").not($this);
    var val = $this.val();

    if ($this.prop("checked") === true) {
        all.filter(function () {
            return $(this).val() === val;
        }).prop("checked", false);
    }
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-04T20:50:40.023

您可以在需要时禁用某些收音机：例如

```
if($("#radio").val()==2) $("#otherRadio").attr("disabled",true); 
```

# web-services - 如何对 jax-ws Web 服务进行版本控制

> ID：13711544
> 
> 赞同：3
> 
> 时间：2012-12-04T20:43:56.650
> 
> 标签：web-services, jax-ws

是否有任何最佳实践来对我基于 jax-ws 的 Web 服务构建的每个版本进行版本控制？我已经看到了一些对基于 REST 的服务进行版本控制的方法（例如，在 URL 中包含版本信息等）。还有其他不同的方法来对基于 JAX-WS 的 Web 服务进行版本控制吗？.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:55:37.533

为了对我的服务进行版本控制，我使用了不同的 targetNamespace。

例如，我将注释添加到我的界面：

@WebService(name = "YourService", targetNamespace = "http://whatever/you/want/VersionNumber")

运行 wsgen 你最终会在你的 xsd 中得到一个不同的 targetNamespace。所有旧客户端都将无法使用您的 Web 服务，并出现干净的“快速失败”错误。

但是，由于这很烦人，我只在服务签名发生更改时才更新此版本，以防止出现奇怪、难以调试、错误

# php - PHP 读取文件和添加

> ID：13711545
> 
> 赞同：0
> 
> 时间：2012-12-04T20:43:58.227
> 
> 标签：php, html

我对 PHP 有疑问。所以我正在制作一个表格，您可以在其中提交您的姓名，它会查看文件并告诉您已注册。

```
$file = "Website.txt";
$filehandle = fopen($file, "r");
while (!feof($filehandle)) {
    $data = fgets($filehandle);
    $str = explode(",", $data);
    for ($i = 0;$i = 2;$i++) {
        echo $str[$i];
        if ($str[$i] == "Kyle") {
            echo "You are registared!";
        } else {
            echo "You are not registared!";
        }
    }
}
fclose($filehandle); 
```

当我运行代码时，它不起作用。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:49:57.153

`for`你在循环中有一个错字。第二部分是分配而不是比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:54:10.297

从代码中很难判断这是否正确地查看了您的文件，但如果我是您，我会通过这样做来简化代码：

```
$file = "Website.txt";
$data = file_get_contents($file);
$array = explode(",",$data);
foreach ($array as $item) {
  if ($item == "Kyle") {
    echo "You're registered!";
  }
} 
```

注意：代码尚未测试。

我还建议使用正则表达式或至少从您正在比较的项目中删除空格，如下所示：

```
if (preg_match("/needle/",$haystack)) {
}

//or 

if (trim($haystack) == "needle") {
} 
```

# sublimetext2 - 退出按钮不起作用

> ID：13711546
> 
> 赞同：3
> 
> 时间：2012-12-04T20:43:58.700
> 
> 标签：sublimetext2

有什么改变还是一个错误？

今天当我单击 ctrl+f 时，找到一些东西并按退出，面板仍然打开。按退出键什么都不做。

在默认绑定中，我有：

```
{ "keys": ["escape"], "command": "hide_panel", "args": {"cancel": true},
    "context":
    [
        { "key": "panel_visible", "operator": "equal", "operand": true }
    ]
}, 
```

编辑：哇，更好。我刚刚发现在每种情况下，每个菜单和位置中，转义按钮都不适用于崇高的文本。

Edit2：我重新启动了 ST2，什么也没有，一次又一次地重新启动。现在它正在工作。我不知道发生了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-22T00:22:06.747

我有同样的问题并通过关闭解决了它`Adobe Photoshop CS4`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-04T15:48:46.277

对不起我的英语不好。我试图解释。我也有这个问题。我修复它。只需将用户键盘映射文件中的“转义”默认键绑定覆盖到另一个键，例如“f1”，保存文件，删除您的更改，然后再次保存文件。

# mysql - 在mysql的内容中搜索和替换图像尺寸？

> ID：13711549
> 
> 赞同：1
> 
> 时间：2012-12-04T20:44:01.107
> 
> 标签：mysql, image, wordpress, replace

我有一个包含 500 多个帖子的 wordpress 博客。第一个帖子图像总是 550px 宽，高度在 300px 和 450px 之间。

博客设计已经更新，第一个帖子图像现在是 600 像素宽和 350 像素到 500 像素高之间。我已经手动下载了第一张图片，并将它们的大小从 550 调整到了 600，但有一些轻微的质量损失。

最简单的事情是在数据库中搜索和替换。寻找width="550"，换成width="600"，但是高度有问题。这不是一个固定变量，如 550。

如果 wordpress 图像有自己的表格，我可以简单地做类似的事情

```
update  wp_posts
set height = height*1.09; 
```

但在 wordpress 的情况下，这是无法做到的，因为信息存储在 post_content 中，看起来像这样：

```
<img class="alignnone size-full wp-image-4352" title="Image Title" src="http://www.website.com/wp-content/uploads/2012/12/image.jpg" alt="image" width="550" height="351" /> 
```

在mysql中，如何改变高度与宽度成比例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:08:56.187

这是一个非常棘手的问题。但这也是一个有趣的问题。

无论如何，它来了。要从 post_content 图像中提取宽度和高度，请创建一个视图

```
create view temp_images (id, width, height) as
select id,
       ExtractValue(post_content, '/img/@width'),
       ExtractValue(post_content, '/img/@height')
from wp_posts
where post_content like '<img%'
      and ExtractValue(post_content, '/img/@width') = 550; 
```

你不需要你的情况下的宽度，但如果你想玩，它就在这里。现在，您有了图片帖子的 id 以及相应的宽度和高度。有了这个，您可以分两步更新图像元素的宽度和高度

```
update wp_posts, temp_images
set post_content = UpdateXml(post_content, '/img/@width', 'width="600"')
where wp_posts.id = temp_images.id;

update wp_posts, temp_images
set post_content = UpdateXml(post_content, '/img/@height',
                             concat('height="', round(height * 1.09), '"'))
where wp_posts.id = temp_images.id; 
```

最后当然是清理

```
drop view temp_images; 
```

最后但同样重要的是，这是一个用于测试和播放的[SQL Fiddle 。](http://www.sqlfiddle.com/#!2/c2edf/1/0)

# html - 向右滑出列表项而不居中

> ID：13711551
> 
> 赞同：1
> 
> 时间：2012-12-04T20:44:15.040
> 
> 标签：html, css, html-lists, center

我需要列表中的项目不是居中而是向右移动。

_http://jsfiddle.net/dHY7N/

现在看起来如何（正常状态/悬停状态）：

_http://habrastorage.org/storage2/ea6/221/1da/ea62211dab05dd6e02ce0dba6e11d68c.png

=============================================
我需要：

_http://habrastorage.org/storage2/c3b/3da/659/c3b3da6590e282aca6fdf697eea1059b.png

没有js，如果可能的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:37:51.673

[http://jsfiddle.net/dHY7N/1/](http://jsfiddle.net/dHY7N/1/)

希望这会有所帮助.. 对于您正在做的事情，Java 脚本可能是最好的。但是如果你想用 css 来做，上面是备用的。

.item 的宽度 + li 的边距 & 内边距 & 边框 * lis 的数量 / 2 = margin-left: - 你的边距；

```
.wrapper { width:100%; height:50px; border: 1px dashed blue; }

.wrapper ul { height:100%; position:relative; margin-left:-56px; /*your margin*/ left:50%; padding: 0; display:block; list-style: none; overflow:hidden;  }

.wrapper ul li { position: relative; float: left; max-width: 50px; overflow: hidden; height:100%; margin: 0 3px; border: 1px dashed red; }

.wrapper ul li:hover { cursor: pointer; max-width:100%; }

.item { height:100%; width:50px; background-color: blue; position: relative; float: left; }

.item-name { margin-left: 65px; width: auto; color: green; overflow: visible; z-index: 2; font-size: 20px; } 
```

# html - 下拉菜单不知道为什么？

> ID：13711553
> 
> 赞同：-5
> 
> 时间：2012-12-04T20:44:18.670
> 
> 标签：html, css, drop-down-menu

您可以查看小提琴以查看代码。“http://jsfiddle.net/hTUUW/2/”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:49:03.767

你`<li>`在错误的地方关闭了你的 -s - [**DEMO**](http://jsfiddle.net/hTUUW/3/)

它应该包装子菜单`<ul>`

```
<li><a href="#">Testimonials</a>
    <ul>
        <li><a href="#">Client Reviews</a></li>
        <li><a href="#">Employee Reviews</a></li>
        <li><a href="#">Success Stories</a></li>
        <li><a href="#">Featured Employees</a></li>
    </ul>
</li> 
```

# php - 从没有 AJAX 的动态生成的列表中获取文本字段值

> ID：13711554
> 
> 赞同：1
> 
> 时间：2012-12-04T20:44:19.830
> 
> 标签：php

我一直在寻找几天，一定错过了一些东西。

我有一堆基于选择生成的文本字段。所以有时我有 5 个字段，其他 20 个。（这是一个名称列表）。然后用户可以添加一个新的，删除一个或者我希望他们能够更新名称（如果拼写错误）。

我的问题是我不知道如何从特定的文本字段中获取更新的数据。我在每个文本框旁边都有一个链接更新。如果只有一个文本字段，我可以做到这一点，但是一旦我有超过 1 个，我不知道如何告诉它是哪一个。

另一个挑战我试图在不使用 AJAX 的情况下做到这一点，只使用 php。

用于生成文本字段“ size="40" />

# php - Opencart v1.5.4.1 - 模块不显示

> ID：13711567
> 
> 赞同：2
> 
> 时间：2012-12-04T20:44:57.993
> 
> 标签：php, opencart

我是 Opencart 的新手 - 从 Magento 切换，我遇到了一个奇怪的问题。当我重新安装时，一切都很好。我清除了产品，一切都很好。我开始进行自定义设计（通过编辑现有模板的 css）并更改了我需要的设置，现在奇怪的是，没有一个模块可以工作。

主页和后台的模块未显示。我检查了模板文件上的 $modules 变量，变量返回 null。模块设置正确并在首页布局中启用，主题正确调用模块，设置->设计->布局都有正确的路线。我完全不知道发生了什么。我对代码库不够熟悉，而且我整天都在寻找没有结果的解决方案。

如果我可以提供更多信息，请告诉我。该网站尚未上线，但如果查看 opencart 代码有帮助的话，它就在 batgearbeyond.net 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:54:24.370

我想出了这个。在设置中，默认模板以某种方式设置为“默认”而不是“主页”。我把它改成了家，现在一切都很好！:)

# css - 韩文、Mac/Windows 系统字体

> ID：13711571
> 
> 赞同：2
> 
> 时间：2012-12-04T20:45:05.320
> 
> 标签：css, windows, macos, fonts

关于显示韩文字体：我注意到当我使用 时`arial`，它默认为`sans-serif`，这在 Mac 和 Windows 上当然不同。我很难在“互联网”上找到有关此的信息。我希望这里的某个人能够告诉我一个字体列表，这些字体可以在 Mac 和 Windows 上使用韩语而不需要嵌入字体。

[活生生的例子](http://store.americanapparel.co.kr/pleated-skirts.html)

苹果电脑：

![在此处输入图像描述](../Images/aeb74d093ff2308a7c570b8f147af59f.png)

视窗：

![在此处输入图像描述](../Images/9d9cd1891c06e1e086b4ca3b67e12175.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T21:14:53.587

由于 Arial 不包含韩文字符，因此使用`font-family: Arial, sans-serif`相当于韩文文`font-family: sans-serif`本。Arial 应该从列表中删除，因为这只会造成伤害——当页面上使用的某些特殊符号存在于 Arial 中时，浏览器会为它们使用它，从而导致字体混合。

使用`sans-serif`意味着使用依赖于浏览器的无衬线字体。在这里用处不大。相反，列出一组已知包含您需要的字符的字体。您几乎不能期望找到一种在所有计算机上都可用的单一字体，除非您找到可以通过`@font-face`.

根据[http://en.wikipedia.org/wiki/List_of_Microsoft_Windows_fonts](http://en.wikipedia.org/wiki/List_of_Microsoft_Windows_fonts)，Windows 上预装了一些字体，或者至少附带了一些包含韩文字符的字体：Batang、Dotum、Gulim、Gungsuh、Malgun Gothic（没有汉字） . 可能它们都不存在于所有版本的 Windows 中，并且可能至少其中一个在相当现代的 Windows 版本中可用。但它们是相当不同的。

您还可以查看扩展页面[http://www.wazu.jp/gallery/Fonts_Korean.html](http://www.wazu.jp/gallery/Fonts_Korean.html)，如果某些免费替代品适合您，请考虑将其用作可下载字体。字体往往很大，但对效率的影响可能仍然可以容忍。

# php - 在 SELECT SQL 中一次使用 LIMIT WHERE

> ID：13711573
> 
> 赞同：1
> 
> 时间：2012-12-04T20:45:05.900
> 
> 标签：php, mysql, sql

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

自从我包含 LIMIT 以来，我遇到了 SELECT SQL 的问题，所以我的代码如下所示：

```
$id = $_GET['id'];

$sql = "UPDATE rl_threads SET views = views + 1 WHERE id = '$id'";

$sql = mysql_query($sql);

//Pager

$ile = 10;

if(isset($_GET['page']))
{
  $strona = $_GET['page'];
}
else
{
  $strona = 1;
}

$strona = $strona - 1;

$offset = $strona * $ile;

//Koniec Pagera

$sql = "SELECT * FROM rl_posts LIMIT $od, 10 WHERE thread_id = '$id'";

$sql = mysql_query($sql); 
```

直到我没有添加限制它才能正常工作但在脚本说之后：

```
Warning: mysql_fetch_array(): supplied argument is not a valid MySQL result resource in /home/radiolev/public_html/forum.php on line 194
Partnerzy 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T20:47:22.440

正确的`SELECT`语法`LIMIT` *在*`WHERE`子句之后，如下所示：

```
$sql = "SELECT * FROM rl_posts WHERE thread_id = '$id' LIMIT $od, 10"; 
```

您收到的错误，`Warning: mysql_fetch_array(): supplied argument is not a valid MySQL result resource`...是在 MySQL 查询失败时引起的。`$od`假设您已在某处定义（如果未定义，您将看到相同的警告），更新到上述内容应该可以解决问题。

旁注，不具体回答：
我建议升级到[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)扩展。两者都支持准备好的语句，这可以使您的查询更易于阅读/管理，并且还提供针对 SQL 注入攻击的额外安全性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:47:38.790

```
SELECT * FROM rl_posts WHERE thread_id = '$id' LIMIT $od, 10 
```

# go - Go中的切片存储参考

> ID：13711575
> 
> 赞同：5
> 
> 时间：2012-12-04T20:45:18.603
> 
> 标签：go

在 Go 库源代码中，您经常看到通过创建新的切片存储引用来传递切片，如下所示

```
method(s[:]) 
```

与仅通过原始切片相比，这样做有什么好处？

```
method(s) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T20:49:29.807

该`s[:]`构造通常仅用于创建引用现有数组的新切片，而不用于“传递原始切片”。

如果`s[:]`真的在标准库中的某个地方使用并且`s`是一个切片，那么它可能是一个重构的剩余部分。如果您在 Go[问题跟踪器](http://code.google.com/p/go/issues/list)上知道，请报告此类地点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T06:48:19.063

您会看到这样的代码的唯一情况是 s 是一个数组，并且您希望将其作为参数传递给将切片作为其输入的函数。采取以下代码。

```
package main
func main() {
    x := [...]int{1, 2, 3, 4, 5}
    someFunction(x)   // type mismatch error : expecting [] int, passed [5] int 
    someFunction(x[:])// no error   
}

func someFunction(input []int){
    // use input 
} 
```

这里要注意的是 [] int 和 [5] int 是完全不同的类型。

# php - 来自 PHP 的 Ajax 请求替换了 div

> ID：13711577
> 
> 赞同：0
> 
> 时间：2012-12-04T20:45:21.467
> 
> 标签：php, javascript, html, ajax

我想从输入字段中获取文本，使用 Ajax 获取它，将其发送到 PHP，然后将其显示在 div 内的页面上。

问题是 div，一次是文本，第二次，它会替换它。

[Javascript&Ajax](http://hastebin.com/hojufovehi.xml "源代码")

PHP：

```
<?php
$input = $_GET['input'];
echo "<div class='input'><strong>You:</strong><p> $input </p></div>"
?> 
```

编辑：澄清...

我有一个文本字段（我们称之为 1）和一个 div（我们称之为两个）。

我将输入**1**的文本通过 AJAX 发送到 PHP 文件。现在我再次使用 Ajax 从 PHP 中获取该文本，并将其显示在**2** . 当我再次执行此操作时，已在**2**中处理的文本将被删除并替换为较新的文本。我不想要他们。我希望新文本显示在旧文本下方，依此类推...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:23:29.113

目前，您的代码将`'text'`div 的全部内容替换为 ajax 调用的结果：

```
document.getElementById('text').innerHTML = xmlhttp.responseText; 
```

相反，追加结果以保留以前的内容：

```
document.getElementById('text').innerHTML += xmlhttp.responseText; 
```

**编辑**：基于您的原始代码的快速示例[http://jsfiddle.net/vRSB3/](http://jsfiddle.net/vRSB3/)

# javascript - 使用 Javascript 根据包含最长内容的按钮调整 2 个按钮的大小

> ID：13711579
> 
> 赞同：3
> 
> 时间：2012-12-04T20:45:23.900
> 
> 标签：javascript, button, dynamic-resizing

设想：

1.  用户为 ButtonA 输入文本“thisisabutton”

2.  用户为 ButtonB 输入文本“thisisalongerbutton”

3.  两个按钮的大小都会动态调整以适应文本长度，从而使它们有两种不同的大小

4.  我希望 ButtonA 与 ButtonB 大小相同（这将确定大小，因为它比 ButtonA 长）。

在 Javascript 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:16:24.293

```
<button id="ButtonA" onChange="ResizeButtons();">Hello</button>
<button id="ButtonB" onChange="ResizeButtons();">Worlddddddddddddddd</button>
<script type="text/javascript">
    function getWidth(element) {
        return parseInt(window.getComputedStyle ? window.getComputedStyle(element,null).getPropertyValue("width")  : element.currentStyle.width );
    }
    function ResizeButtons() {
        var buttonA = document.getElementById("ButtonA");
        var buttonB = document.getElementById("ButtonB");
        buttonA.style.width = "auto";
        buttonB.style.width = "auto";
        var buttonAWidth = getWidth(buttonA);
        var buttonBWidth = getWidth(buttonB);
        var maxWidth = (buttonAWidth > buttonBWidth ? buttonAWidth: buttonBWidth) + "px";
        buttonA.style.width = maxWidth;
        buttonB.style.width = maxWidth;
    }
</script> 
```

1）跨浏览器。

2) 在计算之前将元素重置为“自动”，否则在输入第一个字符后它们将永远不会调整大小。

`buttonA`3) 避免在获取and后重新访问 DOM `buttonB`。

4) 在修改每个按钮时检查。

**编辑**

您可能必须将`ResizeButtons();`事件放在用于更改按钮内容的输入上，或者更好的是，只需`ResizeButtons()`在内容更改后立即在当前脚本中运行更改按钮内容的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:51:34.137

虽然这个答案使用了 jQuery，但原理与上述答案相同，没有太多额外的麻烦来处理获得真正的元素宽度。我绝不是在提倡你必须使用 jQuery，但我认为它以更简洁的方式说明了解决方案。

1.  用户通过提供新名称来添加新按钮。
2.  计算最长按钮并重置较小按钮的宽度

编码：

```
<label for="buttonName">Enter Button Name:</label><input id="buttonName">
<button id="createButton">Create Button</button>
<div id="buttons"></div>

<script type="text/javascript">
$('#createButton').button().click(function(){
    var buttonName = $('#buttonName').val();
    $('#buttonName').val("");
    $('#buttons').append($('<button>'+buttonName+'</button>').button());

    var widestButton = 0;
    $('#buttons button').each(function(){
        widestButton = Math.max($(this).width(), widestButton);
    });
    $('#buttons button').width(function(){
        if ($(this).width() < widestButton)
            $(this).width(widestButton);                        
    });
});
</script> 
```

[http://jsfiddle.net/PwNUA](http://jsfiddle.net/PwNUA)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:58:50.463

```
 <button id="ButtonA">Hello</button>
    <button id="ButtonB" onChange="ResizeButtons();">Worlddddddddddddddd</button>
    <script type="text/javascript">
        function ResizeButtons()
        {
            var buttonAWidth = document.getElementById("ButtonA").style.width;
            var buttonBWidth = document.getElementById("ButtonB").style.width;
            var maxWidth = 0;
            if (buttonAWidth >= buttonBWidth){
                maxWidth = buttonAWidth;
            }
            else{
                maxWidth = buttonBWidth;
            }
            document.getElementById("ButtonA").style.width = maxWidth;
            document.getElementById("ButtonB").style.width = maxWidth;
        }
    </script> 
```

# javascript - 在模型或集合构造函数中存储模型或集合特定的视图

> ID：13711580
> 
> 赞同：1
> 
> 时间：2012-12-04T20:45:28.723
> 
> 标签：javascript, backbone.js

我意识到对此有很多解决方案，但我想知道社区的意见是什么。

我有一系列的模型和收藏品。每个模型都有许多视图，如详细信息、编辑、打印、搁置、帮助等。集合具有通常具有相同名称的视图（即：搁置、帮助等）。

我的一个要求是我需要在模块中构建我的代码。如果未加载模块，则应用程序不应跟踪模块的功能。例如，如果用户没有查看、编辑等其他用户的权限，则可能会发生这种情况。所以“用户”模块甚至不会被加载。

所以...

我认为存储模型视图定义的好地方可能是模型的构造函数和集合构造函数中的集合。例如：

```
var User = (function(){ // module definition

    // model definition
    var Model = Backbone.Model.extend({
        initialize: function() {
            // ...
        }
    },{
        Views: {
            Details: Backbone.View.extend({
                // ...
            }),
            Aside: Backbone.View.extend({
                // ...
            }),
            Help: Backbone.View.extend({
                // ...
            })
        }
    });

    // collection definition
    var Collection = Backbone.Collection.extend({
        model: Model,
        initialize: function() {
            // ...
        }
    },{
        Views: {
            Aside: Backbone.View.extend({
                // ...
            }),
            Help: Backbone.View.extend({
                // ...
            })
        }
    });

    // add more code here

    return { // make model and collection public
        Model: Model,
        Collection: Collection
    };

})(); // end module definition 
```

我意识到我可以将我的观点存在于其他地方，但这种方法是否有任何我可能不知道的相当大的缺点？也许是内存泄漏或不太明显的东西？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:27:04.667

看看[require.js](http://requirejs.org)。有了它，您应该能够添加处理模块加载的逻辑。一般来说，您仍然应该看看它，它非常适合组织主干应用程序，尤其是使用[text plugin](https://github.com/requirejs/text)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T02:00:25.290

我认为最好不要将视图作为“类方法”添加到模型和集合中。由于**JavaScript 原型继承**的性质，您实际上并没有向模型类型**的构造函数添加属性，而是添加类方法。**至于这是否会导致您出现内存泄漏等问题，我不能说。

相反，我会说，除非你有一个未列出的令人信服的理由来使用这种结构，否则你**最好只对简单对象的视图进行分组**。

如果目标是模块化您的代码，我会利用诸如[require.js](http://requirejs.org/)或[Marionette 模块](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.application.module.md)之类的东西，或者只是将“相关”代码分组到 IIFE 中。

如果您有兴趣了解更多关于传递到方法中**的具体发生了什么`classProperties`**`Backbone.Model.extend`，那么我建议您直接查看带[注释的源代码](http://backbonejs.org/docs/backbone.html)。

# java - 从 EJB2 库调用 EJB3 库

> ID：13711581
> 
> 赞同：3
> 
> 时间：2012-12-04T20:45:35.533
> 
> 标签：java, jakarta-ee, ejb, ejb-3.0

我有一个用 EJB2.1 编写的现有应用程序。它作为 EAR 部署在 jboss-5.1.0.GA 上。

我现在有一个新要求来实现应该由 EJB2.1 应用程序使用的进程。两者都在自己的 ear 文件中，但都在同一个 jboss-5.1.0 实例上运行。

我的问题是：

*   是否可以从 EJB2.1 耳朵调用 EJB3 耳朵的服务？
*   如果上述答案是肯定的，是否可以管理交易？即只有EJB2.1 应用程序提交任何事务。
*   将现有的 2.1 应用程序迁移到 v3 是不可能的。将新流程创建为 v3 是否值得努力，或者我可能会遇到两者之间集成的问题？
*   我一直在寻找一个简单的 hello world 类型示例来演示上述内容，但找不到任何内容。有人知道一个很好的例子吗？
*   EJB3 服务将从 EJB2 应用程序中的会话 bean 中调用。这是错误的方法吗？（即会话 bean 不是客户端）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:32:30.240

EJB3 规范允许平滑过渡，定义了 EJB2/EJB3 互操作性的方法，它有时很庞大，您将需要在“普通”EJB3 应用程序中不需要的工件（`@RemoteHome`）

> *   是否可以从 EJB2.1 耳朵调用 EJB3 耳朵的服务？

是的，有可能，请参阅：[Referenceing EJB3 beans in EJB2.1](http://docs.jboss.org/ejb3/docs/tutorial/1.0.7/html/EJB2.1_and_EJB3_references.html) and [Introduction to using EJB2.1 client adapters](http://docs.jboss.org/ejb3/docs/tutorial/1.0.7/html/EJB_2.1_Client_Adaptors.html) and the sample project "ejb21_client_adaptors"

> *   如果上述答案是肯定的，是否可以管理交易？即只有EJB2.1 应用程序提交任何事务。

是的，只要记住用注释你的 EJB3 方法`@TransactionAttribute(TransactionAttributeType.MANDATORY)`

> *   EJB3 服务将从 EJB2 应用程序中的会话 bean 中调用。这是错误的方法吗？（即会话 bean 不是客户端）。

我看这里没有问题，会话 bean 可以调用其他 bean 的服务。

# drag-and-drop - Telerik kendo treeview - 防止拖到父级之外

> ID：13711582
> 
> 赞同：3
> 
> 时间：2012-12-04T20:45:37.270
> 
> 标签：drag-and-drop, telerik, treeview, kendo-ui

我试图阻止在父节点（“LLCA”）之外拖放节点而没有运气。

有什么建议么？

[树视图的图像](http://www.apartmenthost.com/images/capture.png)

我最终使用下面的代码让它工作：

```
function onDrop(e) {
    var dst = e.destinationNode;
    var first = $('.k-item:first');
    var pos = e.dropPosition;
    if (dst && dst.uid === first.uid && pos !== "over") {
        e.setValid(false);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T23:14:29.057

让我们定义`treeview`：

```
var tree = $("#tree").kendoTreeView({
    dataSource :content,
    dragAndDrop:true
}).data("kendoTreeView"); 
```

我要做的是添加一个`drop`回调，我将控制它：

1.  我们不会掉到树外
2.  我们不会在树的第一个节点之前或之后丢弃

树的定义是：

```
var tree = $("#tree").kendoTreeView({
    dataSource :content,
    dragAndDrop:true,
    drop       :function (ev) {
        var dst = tree.dataItem(ev.destinationNode);
        var first = tree.dataItem(".k-item:first");
        var pos = ev.dropPosition;
        if (dst && dst.uid === first.uid && pos !== "over") {
            console.log("invalid");
            ev.setValid(false);
        }
    }
}).data("kendoTreeView"); 
```

检查[http://docs.kendoui.c​​om/api/web/treeview#drop](http://docs.kendoui.com/api/web/treeview#drop)以获取有关`drop`事件的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-14T20:09:26.420

因为我无法对答案发表评论，所以我会自己写。

用户 Mithrilhall 询问了 MVC 包装器，最佳答案仅阻止移动到根节点。

我将尝试回答 Mithrilhall 并提供一个示例，您只能在其父级的上下文中移动一个子级。换句话说，只允许任何父母的孩子在父母中改变他们的顺序。

首先，对于 MithrilHall，这是您在 MVC 中获取事件的方式。

```
@(Html.Kendo().TreeView()
            .Name("ourTreeView")
            .Events(e => e.Drop("treeViewDrop")) 
```

treeview 中还有其他事件，你可以自己去看看。参数是 javascript 函数的名称。这是此 MVC 包装器的示例 javascript 函数，用于防止子级移动到其父级之外，但允许它们仍然在父级内移动。

```
<script type="text/javascript">
    function treeViewDrop(dropEvent) {
        var treeView = $("#ourTreeView").data("kendoTreeView");
        var destination = treeView.dataItem(dropEvent.destinationNode);
        var source = treeView.dataItem(dropEvent.sourceNode);

        if (!(destination && destination.parentID == source.parentID)) {
            dropEvent.setValid(false);
        }
    }
</script> 
```

我在我的数据源中建模了一个 parentID 字段。您可以通过多种方式实现这一点。dataItem 方法返回一个剑道树视图项，因此它包含所有建模字段。

还要了解，当您移动到无法下降的地方时，此解决方案不会更改小部件以显示 X。这是另一个解决方案的另一个问题。

我希望这会有所帮助，祝你好运！

# r - 在没有标题的R中逐行读取大文件

> ID：13711585
> 
> 赞同：5
> 
> 时间：2012-12-04T20:45:41.480
> 
> 标签：r, csv

我在 R 中有一个非常大的数据文件（在 Giga 中），如果我尝试用 R 打开它，我会收到内存不足错误。

我需要逐行读取文件并进行一些分析。我在这个问题上找到了一个先前的问题，其中文件被 n 行读取并用丛跳转到某些行。我使用了“Nick Sabbe”的答案并添加了一些修改以满足我的需要。

考虑到我有以下 test.csv 文件样本：

```
A    B    C
200 19  0.1
400 18  0.1
300 29  0.1
800 88  0.1
600 80  0.1
150 50  0.1
190 33  0.1
270 42  0.1
900 73  0.1
730 95  0.1 
```

我想逐行读取文件的内容并执行我的分析。所以我根据“Nick Sabbe”发布的代码创建了以下循环来读取。我有两个问题：1）每次打印新行时都会打印标题。2) R 的索引“X”列也被打印，尽管我正在删除这一列。

这是我正在使用的代码：

```
test<-function(){
 prev<-0

for(i in 1:100){
  j<-i-prev
  test1<-read.clump("file.csv",j,i)
  print(test1)
  prev<-i

}
}
####################
# Code by Nick Sabbe
###################
read.clump <- function(file, lines, clump, readFunc=read.csv,
                   skip=(lines*(clump-1))+ifelse((header) & (clump>1) & (!inherits(file, "connection")),1,0),
                   nrows=lines,header=TRUE,...){
if(clump > 1){
colnms<-NULL
if(header)
{
  colnms<-unlist(readFunc(file, nrows=1, header=F))
  #print(colnms)
}
p = readFunc(file, skip = skip,
             nrows = nrows, header=FALSE,...)
if(! is.null(colnms))
{
  colnames(p) = colnms
}
} else {
 p = readFunc(file, skip = skip, nrows = nrows, header=header)
}
p$X<-NULL   # Note: Here I'm setting the index to NULL
return(p)
} 
```

## 我得到的输出：

```
 A       B    C
1      200      19   0.1
  NA   1       1     1
1  2   400     18   0.1
  NA   1       1    1
1  3   300     29   0.1
  NA   1       1    1
1  4   800     88   0.1
  NA   1       1    1
1  5   600     80   0.1 
```

我想摆脱剩下的阅读：

```
 NA   1       1     1 
```

另外，有什么方法可以在文件结束时停止 for 循环，例如其他语言的 EOF ？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T21:50:31.573

也许这样的事情可以帮助你：

```
inputFile <- "foo.txt"
con  <- file(inputFile, open = "r")
while (length(oneLine <- readLines(con, n = 1)) > 0) {
  myLine <- unlist((strsplit(oneLine, ",")))
  print(myLine)
} 
close(con) 
```

或使用扫描以避免分裂为@MatthewPlourde

我使用 scan ：我跳过标题，并且 quiet = TRUE 没有消息说已经有多少项目

```
while (length(myLine <- scan(con,what="numeric",nlines=1,sep=',',skip=1,quiet=TRUE)) > 0 ){
   ## here I print , but you must have a process your line here
   print(as.numeric(myLine))

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-01T22:35:14.077

我建议你检查[`chunked`](https://github.com/edwindj/chunked)和[`disk.frame`](https://github.com/xiaodaigh/disk.frame)。它们都具有读取 CSV 的功能。

`disk.frame::csv_to_disk.frame`可能是你想要的功能。

# c++ - 如何将 FIBMAP 返回的数据转换为磁盘的 LBA 扇区？

> ID：13711586
> 
> 赞同：4
> 
> 时间：2012-12-04T20:45:43.743
> 
> 标签：c++, linux, file, disk

我需要确定磁盘设备上的文件占用的扇区范围（对于 Linux）。假设它是一个带有 MBR 或 GPT 分区表的简单磁盘（无 RAID）。

我了解到我可以使用`FIBMAP`ioctl 获取文件系统中文件的位置。如何将返回的数据`FIBMAP`转换为磁盘的 LBA 扇区？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T01:26:48.560

我没有给你一个确切的答案，但如果你查看 hdparm 的源代码，你应该能够弄清楚。如果使用`hdparm --fibmap /dir1/dir2/foo`它将以文件偏移、开始 LBA、停止 LBA 和扇区长度行输出文件块。我希望这会有所帮助。

# hadoop - 在 Hadoop 中，有没有办法查看发送到 reducer 以执行正在运行的任务的键/值对？

> ID：13711587
> 
> 赞同：2
> 
> 时间：2012-12-04T20:45:46.247
> 
> 标签：hadoop, mapreduce

对于我的一项 hadoop 工作，输入到我的 reducer 任务的数据量非常不平衡。例如，如果我有 10 个 reducer 任务，其中 9 个的输入大小将在 50KB 范围内，最后一个将接近 200GB。我怀疑我的映射器正在为单个键生成大量值，但我不知道该键是什么。这是一项遗留工作，我无法再访问源代码。有没有办法在作业运行时查看键/值对，无论是映射器的输出还是减速器的输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:09:03.257

尝试将此添加到您的 CLI 作业运行中：`-D mapred.reduce.tasks=0`

这应该将 reducer 的数量设置为 0，这实际上会使映射器将输出直接转储到 HDFS。但是，可能有一些代码会覆盖减速器的数量……所以这可能不起作用。

如果可行，这将显示映射器的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T12:55:39.290

您始终可以使用不同的简单 map reduce 作业来计算键值的总数。

# ios - iOS Post to Facebook 显示 m.facebook.com

> ID：13711591
> 
> 赞同：1
> 
> 时间：2012-12-04T20:46:12.057
> 
> 标签：ios, facebook, deep-linking

我的 iOS 应用正在使用社交框架和以下代码将我们的应用内帖子从我们的应用发布到 Facebook。

它成功地发布到 Facebook 并正确地深层链接回我们的应用程序。问题是，当在 Facebook iOS 移动应用程序上查看此帖子时，我们看到的不是该帖子的标题或描述，而是此屏幕截图所示的“m.facebook.com”。我们想用标题、描述或我们网站的根 URL 删除或替换“m.facebook.com”。

我猜这个“m.facebook.com”URL 根来自深层链接 URL，即“ [https://m.facebook.com/apps/(our-app)/?deeplink=postId:(post- id)](https://m.facebook.com/apps/(our-app)/?deeplink=postId:(post-id)) ”。我们希望它进行深度链接，但不希望显示“m.facebook.com”。

有什么建议吗？谢谢。

```
NSString *deepLink = [NSString stringWithFormat:@"https://m.facebook.com/apps/%@/?deeplink=postId:%i",FACEBOOK_APP_NAMESPACE,self.post.postId.intValue];
captionString = [NSString stringWithFormat:@"%@ : %@", parentCategory.name, category.name];
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               self.post.name, @"name",
                               captionString, @"caption",
                               self.post.details, @"description",
                               deepLink, @"link",
                               nil];
SLRequest *request = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                        requestMethod:SLRequestMethodPOST
                                                  URL:feedURL
                                           parameters:params]; 
```

![Facebook iOS 帖子](../Images/bc465c5632a89b6970bb5fe71a6f7803.png)

# c# - 使用 SerialPort 禁用 EOF (0x1A)

> ID：13711594
> 
> 赞同：3
> 
> 时间：2012-12-04T20:46:19.553
> 
> 标签：c#, eof

我知道还有其他帖子已经解决了这个事实，但我仍然无法找到解决我的问题的方法。
我从串行端口收到大量数据，其中将包括 0x1A。我以离散的块接收它们（此时以 10、18 或 528 的块的形式接收它们，并且我知道何时期望每种尺寸）。问题是每当我收到一个 0x1A 时，它似乎都会丢弃这个字节。
我试过了：

```
 if (e.EventType == SerialPort.Eof) return; 
```

但我收到错误： `System.IO.Ports.SerialPort`不包含“Eof”的定义。

我想做的只是禁用此 Eof 功能；有没有可能让这个角色不再有什么特别之处？
提前感谢，如果这已在其他地方得到回答，我很抱歉，但我无法在任何地方找到直接的答案......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:59:42.540

当然，在发布问题后我马上就明白了。

我需要使用`SerialData`而不是`SerialPort`. 我的错。我希望这可以帮助其他人！

# string - 如何从 Coldfusion 中的数字列表中删除字符串/数字？

> ID：13711598
> 
> 赞同：0
> 
> 时间：2012-12-04T20:46:38.337
> 
> 标签：string, coldfusion, replace, coldfusion-8

今天只有愚蠢的问题......（仍在运行`coldfusion8`）

我还在弄乱我的字符串列表。现在我需要从列表中删除 1 个号码...：

```
<cfdump output="e:\dump.txt" label="catch" var="--- drop ---">
<cfdump output="e:\dump.txt" label="catch" var="#ToString(variables.searchString)#">
<cfdump output="e:\dump.txt" label="catch" var="#ToString(variables.updateArticle)#">

<cfset Replace(ToString(variables.searchString), ToString(variables.updateArticle), "")>

<cfdump output="e:\dump.txt" label="catch" var="--- drop ----">
<cfdump output="e:\dump.txt" label="catch" var="#variables.searchString#"> 
```

我的转储显示以下内容：

```
--- drop ---- 
596925,596864,596871 
596925
---- done ----
596925,596864,596871 
```

**问题：**
任何想法，为什么这不起作用？`ToString`已经是绝望的尝试了……

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T01:43:47.503

```
var foundAt = listFind(searchString, updateArticle);

if (foundAt)
    searchString = ListDeleteAt(searchString, foundAt); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:52:38.080

自从 cf8 出现以来，我还没有使用过冷融合，但你不应该这样做：

```
<cfset variables.searchString = Replace(variables.searchString, variables.updateArticle, "")> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T20:54:02.363

该`replace`函数返回一个值。您当前正在使用它，就好像您正在执行直接输出一样。

```
<cfset fixedText = Replace(ToString(variables.searchString), ToString(variables.updateArticle), "")> 
```

# r - 将 googleVis $chart 对象嵌入托管站点（博客/保管箱/Wordpress/或其他）的最简单方法？

> ID：13711608
> 
> 赞同：1
> 
> 时间：2012-12-04T20:47:28.383
> 
> 标签：r, blogger

我最近一直在玩 googleVis 包，我已经能够制作动态图表，但是有没有人知道可以指导某人如何将源代码发布到托管博客（例如，博主，wordpress）的教程并嵌入了动态图表？

首先假设我有下面的代码块（使用 googleVis 中的 print() 函数生成）：

```
<!-- MotionChart generated in R 2.15.2 by googleVis 0.3.3 package -->
<!-- Tue Dec 04 12:39:01 2012 -->
<!-- jsHeader -->
<script type="text/javascript" src="http://www.google.com/jsapi">
</script>
<script type="text/javascript">

// jsData 
function gvisDataMotionChartIDb88676415c3 ()
{
  var data = new google.visualization.DataTable();
  var datajson =
[
 [
 "Apples",
2008,
"West",
98,
78,
20,
"2008-12-31" 
],
[
 "Apples",
2009,
"West",
111,
79,
32,
"2009-12-31" 
],
[
 "Apples",
2010,
"West",
89,
76,
13,
"2010-12-31" 
],
[
 "Oranges",
2008,
"East",
96,
81,
15,
"2008-12-31" 
],
[
 "Bananas",
2008,
"East",
85,
76,
9,
"2008-12-31" 
],
[
 "Oranges",
2009,
"East",
93,
80,
13,
"2009-12-31" 
],
[
 "Bananas",
2009,
"East",
94,
78,
16,
"2009-12-31" 
],
[
 "Oranges",
2010,
"East",
98,
91,
7,
"2010-12-31" 
],
[
 "Bananas",
2010,
"East",
81,
71,
10,
"2010-12-31" 
] 
];
data.addColumn('string','Fruit');
data.addColumn('number','Year');
data.addColumn('string','Location');
data.addColumn('number','Sales');
data.addColumn('number','Expenses');
data.addColumn('number','Profit');
data.addColumn('string','Date');
data.addRows(datajson);
return(data);
}

// jsDrawChart
function drawChartMotionChartIDb88676415c3() {
  var data = gvisDataMotionChartIDb88676415c3();
  var options = {};
options["width"] =    600;
options["height"] =    500;

     var chart = new google.visualization.MotionChart(
       document.getElementById('MotionChartIDb88676415c3')
     );
     chart.draw(data,options);

}

// jsDisplayChart 
function displayChartMotionChartIDb88676415c3()
{
  google.load("visualization", "1", { packages:["motionchart"] }); 
  google.setOnLoadCallback(drawChartMotionChartIDb88676415c3);
}

// jsChart 
displayChartMotionChartIDb88676415c3()

<!-- jsFooter -->  
//-->
</script>

<!-- divChart -->

<div id="MotionChartIDb88676415c3"
  style="width: 600px; height: 500px;">
</div> 
```

让这个图表实际嵌入到托管博客的方法是什么？我试过直接剪切/粘贴到 HTML 中无济于事。我完全没有编写 html 或 java 代码的经验，所以我想知道我是不是运气不好。

# jquery - 隐藏div中的某些字符

> ID：13711609
> 
> 赞同：0
> 
> 时间：2012-12-04T20:47:30.427
> 
> 标签：jquery, html, css

我希望隐藏一个简单 div 中包含的某些字符的所有实例。
基本上我所追求的是当页面加载某些字符（在本例中为's'和'e'）时会淡出并在字符所在的句子中留下空格。
到目前为止，这是我所掌握的：
HTML:
`<div id="test">hello this is a test this is a test</div>`​jQuery
:

```
$(document).ready(function(){
$('#test').html($('#test').html().replace("s"," "));
$('#test').html($('#test').html().replace("e"," "));
});​ 
```

这里也是一个有效的 jsFiddle：http: [//jsfiddle.net/6vjt3/](http://jsfiddle.net/6vjt3/)
但这所做的只是隐藏句子中的第一个“s”和“e”，而不是其余的。
最好我想发生的是jQuery会检测到这些字母并将它们慢慢淡化为白色，因此留下与字母成比例的空间，但根本无法弄清楚如何做到这一点。
任何建议都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:57:25.607

如果您稍后需要返回原始数据，我建议您使用这种方法：

```
var $hiddenElement = $('<span>').addClass('hidden');

$('#test').html($('#test').html().replace(/s/g, $hiddenElement.text(s)));
$('#test').html($('#test').html().replace(/e/g, $hiddenElement.text(s))); 
```

你的 CSS

```
.hidden {
  display: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:48:46.723

我试着按照你提到的那样淡出它。见**演示** [http://jsfiddle.net/6vjt3/3/](http://jsfiddle.net/6vjt3/3/)

**完整代码：**

```
$(document).ready(function(){
    var charToReplace = ['s', 'e'];
    $('#test').html(function (i, v) {
        var resultStr = '';
        for (var i = 0; i < v.length; i++ ) {
            var ch = v.charAt(i);

            if ($.inArray(ch, charToReplace) >= 0) {
               resultStr += '<span class="hideMe">' + ch + '</span>';  
            } else {
               resultStr += ch;
            }
        }

        return resultStr;
    }).find('.hideMe').fadeOut(1000, function () {
        $(this).css('opacity', 0).show();            
    });

    //lets bring it all back
    setTimeout(function () {
        $('#test').find('.hideMe').css('opacity', 1);
    }, 5000);
}); 
```

在替换时使用带有`g`（全局）的正则表达式。见下文，

```
$('#test').html($('#test').html().replace(/s/g," "));
$('#test').html($('#test').html().replace(/e/g," ")); 
```

**演示：http:** [//jsfiddle.net/6vjt3/1/](http://jsfiddle.net/6vjt3/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T20:49:17.357

您需要将这些字符包装在 SPAN 中，然后淡出 SPAN。使用替换将立即摆脱它们，但永远不会淡出。

# oop - 属性获取器上的访问修饰符

> ID：13711610
> 
> 赞同：0
> 
> 时间：2012-12-04T20:47:37.020
> 
> 标签：oop, properties, access-modifiers

对于特定的上下文，我用 C# 开发，但我想这可以应用于其他语言/框架。

我了解使用私有 getter 和公共 setter 创建属性是完全合法的：

```
public int MyInt { private get; set; } 
```

我无法弄清楚为什么要允许客户端设置属性而无法获取其当前值。在什么情况下可能需要这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:50:48.190

改变价值的不是“客户”，而是程序的其他部分。

您可能希望其他对象能够通过该属性更改对象的状态。
对象的其他部分并不*关心*该对象的状态，但它只保留用于内部逻辑。

这完全取决于您的应用程序的情况和结构。

# mysql - MySQL 在查询中使用 LIKE

> ID：13711614
> 
> 赞同：0
> 
> 时间：2012-12-04T20:47:43.643
> 
> 标签：mysql

我正在尝试提出一个查询，该查询将根据数据库中包含的字符串的字母模式生成结果。

基本上这就是我想要做的：

```
Test 1: "T" => mysql returns: toys, tofu, telephones, turkeys, televisions, topaz
Test 2: "To" => mysql returns: toys, tofu, topaz
Test 3: "Toy" => mysql returns: toys
Test 4: "Toys" => mysql returns: toys 
```

这是我到目前为止所尝试的（$searchword 对应于测试用例字符串）：

```
$results = mysql_query("SELECT * FROM products WHERE prod_name LIKE %".$searchword."%"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T20:51:02.213

将引号 ( `'%text%"`) 添加到您的查询中

```
$results = mysql_query("SELECT * FROM products 
WHERE prod_name LIKE '%".$searchword."%'"); 
```

@KaiQing 评论说您可以改用它，如果您只想要以 ' `searchword`' 开头的单词，他是对的：

```
$results = mysql_query("SELECT * FROM products 
WHERE prod_name LIKE '".$searchword."%'") 
```

IE：如果`searchword`=TOY，此查询`WHERE prod_name LIKE '".$searchword."%'`将显示TOYS、TOYZ、TOYXXX等，但不会显示XTOY、TITOY、ZTOY等。

如果您想了解有关如何使用`like`的更多信息，请查看此处： [http ://dev.mysql.com/doc/refman/5.1/en/string-comparison-functions.html](http://dev.mysql.com/doc/refman/5.1/en/string-comparison-functions.html)

# jakarta-ee - Java Servlet 中的竞争条件

> ID：13711615
> 
> 赞同：0
> 
> 时间：2012-12-04T20:47:47.830
> 
> 标签：jakarta-ee, servlets, race-condition

我有一个奇怪的问题，两个不同的用户将图片上传到我的网络服务，而 user1 看到了 user2 的错误消息。查看代码对我来说没有什么特别之处，所以我想问一下这段代码有什么问题，为什么它会造成这种情况，user2 的错误对 user1 是可见的？

这是一些简化的代码来尝试演示这种情况。

```
public class SomeService {

    private static SomeService service;
    private SomeService() {
    }

    public static SomeService getInstance() {
        if(service == null) {
           service = new SomeService();
        }
    }

    public ErrorStatus doSomething(ErrorStatus es) {

        es = new ErrorStatus(es);
        // stuff happens that causes an error
        es.addMessage(new ErrorMessage("some error happened"));
        return es;
    }

    public ErrorStatus doSomethingElse(ErrorStatus es) {

        es = new ErrorStatus(es);
        // stuff happens that causes an error
        es.addMessage(new ErrorMessage("some different error happened"));
        return es;
    }
}

public class ErrorMessage {
    String message;

    //simple constructor, getters and setters, nothing interesting
}

public class ErrorStatus {
    int id;
    String status;
    List<ErrorMessage> messages;

    public ErrorStatus() {
         id = 0;
         status = "";
         messages = new ArrayList<>();
    }

    public ErrorStatus(ErrorStatus other) {
        id = other.getId();
        status = other.getStatus();
        messages = other.getMessages();
    }

    public void addMessage(ErrorMessage message) {

        //data checks
        messages.add(message);
    }

    //getters and setters
}   

public class UploadServlet extends HttpServlet {

    public doGet(request, response) {

        ErrorStatus es = new ErrorStatus();
        SomeService service = SomeService.getInstance();

        es = service.doSomething(es);

        es = service.doSomethingElse(es);

        printErrors(response.getWriter(), es);

    }

    public void printErrors(PrintWriter pw, ErrorStatus es) {

        for(int i = 0; i < es.getMessages().size(); i++) {

            pw.write(es.getMessages().get(i).getMessage());
        }
    }
} 
```

我认为代码中可能发生奇怪的两个地方是复制构造函数或服务是单例的事实。也许我没有正确复制列表，或者作为单例的服务改变了堆栈和堆的使用方式，我真的不确定。根据我对堆栈、堆、单例和 servlet 如何工作的理解，一个用户的数据永远不会受到另一个用户数据的影响。此外，他们唯一有问题的部分是列表，原始数据始终是正确的，只有错误列表会显示给错误的用户。

我应该注意，我已经解决了我只是不明白为什么会出现问题的问题。解决方案是停止使用复制构造函数，只让 ErrorStatus 对象在 doSomething 和 doSomethingElse 方法中得到修改。因此，修改后的代码将有一个 doSomething 的返回类型为 void，并且只会调用 es.addMessage，并且复制构造函数也已从 ErrorStatus 中删除。

任何帮助理解为什么这会导致竞争条件将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:28:43.440

我认为你的问题在于这一行：

`messages = other.getMessages();`

基本上这意味着两个不同`ErrorStatus`的对象共享相同`List`的列表，对一个列表的修改会影响另一个列表，反之亦然。这条线应该看起来像

`messages = new ArrayList<ErrorMessage>(other.getMessages());`

这样，列表将（最初）包含相同的元素，但不受修改副作用的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T23:57:02.523

我同意其中的一个回答，很难从您的简化代码中找出问题所在。我注意到一些错别字/错误：

```
public static SomeService getInstance() {
    if(service == null) {
       service = new SomeService();
    }
    **return service;**
}

public doGet(request, response) {

    ErrorStatus es = new ErrorStatus();
    SomeService service = SomeService.getInstance();

    es = service.doSomething(es); //<-- This first one never gets tracked; es is overwritten below.

    es = service.doSomethingElse(es); 

    printErrors(response.getWriter(), es);

}

public ErrorStatus() {
     id = 0; **<-- How exactly does id increase?**
     status = ""; 
     messages = new ArrayList<>();
} 
```

无论如何，请检查 SomeService 或 UploadServlet 中是否有成员变量。我自己也在学习比赛条件；我怀疑您有两个用户访问共享资源的问题，并且他们访问的交错/定时是问题所在。

举个简单的例子，用户可能：获取 servlet 实例 (gsi) --> 执行操作 (da) --> 记录错误 (le) --> 读取错误 (re)。

两个用户可以交错操作。

用户 1：gsi --> da --> le --> re

用户 2： **__** gsi --> da --> le --> re.

因此，当 user1 读取错误时，他实际上是由刚刚完成错误记录的 user2 读取错误。您的 UploadServlet 可能有一个成员 ErrorStatus 对象：这会产生问题。

祝你好运！

这是一个很好的教程：[http ://www.informit.com/articles/article.aspx?p=23947](http://www.informit.com/articles/article.aspx?p=23947)

# mysql - 将 mysql 中的 *everything* 更改为 utf8

> ID：13711621
> 
> 赞同：1
> 
> 时间：2012-12-04T20:47:55.330
> 
> 标签：mysql, character-encoding

> **可能重复：**
> [一直到 UTF-8](https://stackoverflow.com/questions/279170/utf-8-all-the-way-through)

我在将数据库中的所有内容更改为 utf8 时遇到了一些困难。

这是我目前拥有的：

```
+--------------------------+----------------------------+
| Variable_name            | Value                      |
+--------------------------+----------------------------+
| character_set_client     | utf8                       |
| character_set_connection | utf8                       |
| character_set_database   | latin1                     |
| character_set_filesystem | binary                     |
| character_set_results    | utf8                       |
| character_set_server     | latin1                     |
| character_set_system     | utf8                       |
| character_sets_dir       | /usr/share/mysql/charsets/ |
| collation_connection     | utf8_general_ci            |
| collation_database       | latin1_swedish_ci          |
| collation_server         | latin1_swedish_ci          |
+--------------------------+----------------------------+ 
```

我有一个`/etc/my.cnf`包含以下内容的文件：

```
[client]
default-character-set=utf8

[mysql]
default-character-set=utf8

[mysqld]
init_connect='SET collation_connection = utf8_general_ci'
init_connect='SET NAMES utf8'
default-character-set=utf8
character-set-server=utf8
collation-server=utf8_general_ci
skip-character-set-client-handshake 
```

当我`$ sudo service mysql restart`“加载”文件时，什么也没有发生。我怎样才能得到`utf8`这里的一切？

```
mysql> show variables like '%init_file%';
+---------------+-------+
| Variable_name | Value | 
+---------------+-------+
| init_file     |       |
+---------------+-------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:43:46.810

我认为您的问题在于您使用的是*破折号*而不是*下划线*。我认为破折号用于命令行选项，而这些用于`my.cnf`. 是的，这真是令人困惑！

我本地 Ubuntu 中唯一的 utf8 引用`my.cnf`是：

```
[mysqld]
...
character_set_server = utf8         # you have character-set-server
collation_server = utf8_general_ci  # you have collation-server 
```

我的任何变量看起来像：

```
mysql> show variables like '%charac%';
+--------------------------+----------------------------+
| Variable_name            | Value                      |
+--------------------------+----------------------------+
| character_set_client     | utf8                       |
| character_set_connection | utf8                       |
| character_set_database   | utf8                       |
| character_set_filesystem | binary                     |
| character_set_results    | utf8                       |
| character_set_server     | utf8                       |
| character_set_system     | utf8                       |
| character_sets_dir       | /usr/share/mysql/charsets/ |
+--------------------------+----------------------------+ 
```

# image - 如何改进我的图像比较算法

> ID：13711622
> 
> 赞同：0
> 
> 时间：2012-12-04T20:47:59.040
> 
> 标签：image, algorithm, image-processing, graphics

我想将一张图片与一组 1000 多张图片进行比较。我正在生成照片马赛克。

到目前为止我做了什么：

我正在使用 LAB 颜色模型来获取每个图像的 LAB 值，并将该值存储在 KD 树中。这是具有 LA* B* 值的 3 维树。然后我计算图像中每个网格的 LAB 值，我必须为其生成照片马赛克。我使用最近邻算法和欧几里得距离度量来找到最佳匹配。

我取得了不错的成绩，但我想提高成绩。我读过关于 SIFT 的图像比较，它看起来很有趣，我将在未来实现它。现在你们能建议我可以比较的任何其他特征，比如亮度、背景颜色，或者可能是另一个比欧几里得更好的距离度量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:08:04.427

来自 SIFT 的 Appart 已使用的另一个功能是通过 Earth Mover 距离比较颜色直方图。您可以查看以下论文：
[将推土机的距离作为图像检索的度量](http://www.cs.duke.edu/~tomasi/papers/rubner/rubnerTr98.pdf)

此外，与 SIFT 更相似的是图像的 GIST，它已用于“语义”（或多或少）检索：
[构建场景的要点：全局图像特征在识别](http://cvcl.mit.edu/papers/olivatorralbapbr2006.pdf)
中的作用，例如已用于使用数百万张照片完成场景的论文：使用数百万张照片 [完成场景](http://graphics.cs.cmu.edu/projects/scene-completion/)

您还可以调整使用 SIFT 进行图像变形的方法（例如[SIFT Flow: Dense Correspondence across Scenes and its Applications](http://people.csail.mit.edu/celiu/SIFTflow/SIFTflow.pdf)）以获得图像比较的度量。通常，标准的 SIFT 匹配表现不佳，您的结果指标也不是很好：能够进行良好的匹配会使事情变得更好。

简而言之，正如评论所说，这取决于您要比较和实现的目标（“好”是什么意思）：您要匹配颜色（直方图）吗？结构 (SIFT) ? 语义学（GIST）？要不然 ...？

# javascript - Javascript 追赶未定义

> ID：13711623
> 
> 赞同：0
> 
> 时间：2012-12-04T20:48:02.637
> 
> 标签：javascript

我已经用 javascript 构建了一个数组加载器。

[这里是jsfiddle](http://jsfiddle.net/ayQH2/)

当我直接单击最后一个时，我得到了未定义。我试图用这样的东西赶上它

```
var lastWord = (function() {

            return function() {
            var resultWord = wordArray[--count % wordArray.length];
                if (typeof resultWord == "undefined")
                { 
                return false;
                }
                else 
                {
                return wordArray[--count % wordArray.length];
                }
            }
        }

}()); 
```

但是没有用，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:51:38.143

第一次未定义的原因是因为 wordArray 中没有任何负数。在您点击更新之前没有“最后一个”字。那有意义吗？点击更新一次后它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:27:45.873

试试[http://jsfiddle.net/ayQH2/2/](http://jsfiddle.net/ayQH2/2/)

问题是模运算符返回的符号是其第一个操作数的符号。所以，例如

```
(-17) % 12 // == -5 , not 7 
```

这可能会起作用，并且不包括额外的函数包装器：

```
var nextWord = function() {
    // silly work-around for negative modulus issue
    var index = (++count % wordArray.length) + wordArray.length
    return wordArray[index % wordArray.length];
};
var lastWord = function() {
    // silly work-around for negative modulus issue
    var index = (--count % wordArray.length) + wordArray.length
    return wordArray[index % wordArray.length];
}; 
```

还有很多其他方法可以解决这个问题。也许更好的方法是确保`count`永远不会超出适当的范围，做类似的事情

```
count = (count == wordArray.length - 1) ? 0 : count++; // increment
count = (count == 0) ? wordArray.length - 1 : count--; // decrement 
```

# javascript - JavaScript下拉表单验证：传递“0”值时引发错误

> ID：13711625
> 
> 赞同：1
> 
> 时间：2012-12-04T20:48:14.720
> 
> 标签：javascript

我正在尝试创建一个表单，如果传递了“0”的值，则会引发错误。我很难过，真的可以使用一些帮助。此脚本中有两个函数。第一个是工作，我可以根据选择更改 URL。我遇到问题的地方是我希望选择“--”和“选择状态”来触发第二个脚本，理论上该脚本会突出显示该字段并且不允许用户单击。这是名为“validateEmpty”的函数

我对另一种方法完全持开放态度，这是我发现的教程的破解版本，它传递了 value.length 为 0。

示例页面在这里： [http ://www.brimbar.com/no_crawl/js-test-homepage.html](http://www.brimbar.com/no_crawl/js-test-homepage.html)

或者

代码如下：

```
 <code>
    <div id="quoteDropdowns">
    <select id="stateType" name="stateType" onchange="dosomething()">
    <option value="select" selected="selected">Choose State</option>
    <option value="IL">Illinois</option>
    <option value="MD">Maryland</option>
    <option value="TX">Texas</option>
    <option value="VA">Virginia</option>
    <option value="--">--</option>
    <option value="other">Other</option>
    </select>
    </div>
    <div id="getAQuote"> <a id="mylink" class="myButton" href="#" onclick="validateEmpty">Get a Quote!</a> </div>
    <script type="text/javascript">
function dosomething() {
    var inputSelector = document.getElementById("stateType");
    var link = document.getElementById("mylink");

    if (inputSelector.value == "VA") {
        link.href = "http://www.test1.com";
    } 
    else if (inputSelector.value == "MD") {
        link.href = "http://www.test2.com";
    } 
    else if (inputSelector.value == "IL") {
        link.href = "http://www.test3.com";
    }
    else if (inputSelector.value == "TX") {
        link.href = "http://www.test4.com";
    }
    else if (inputSelector.value == "other") {
        link.href = "http://www.test5.com";
    }
            else if (inputSelector.value == "--") {
        stateType.value.length == 0;
        link.href = "#";  
    }

    } 

    console.log('First Function is Valid'); 

    function validateEmpty(stateType) {

    var error = value.length==0;

     if (stateType.value.length == 0) {
        stateType.style.border = 'red'; 
        error = "The required field has not been filled in.\n"
    } else {
        stateType.style.background = 'White';
    }
    return error; 

}
console.log('Second Function is Valid'); 

</script></code> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T22:00:27.083

1）好的，所以你决定使用旧的、黑暗的内联javascript方法；）而不是使用事件监听器，但是为什么每次选项更改时都要设置链接元素的href？这不是最优的。我宁愿在单击链接时重定向（按需）。这使您只有一个功能。

2）而不是使用`if..else`try to use`switch..case`构造它会在稍后简化一些事情。此外，它似乎更具可读性，但也许更多的是偏好问题。

3）为什么要使用这种扭曲的逻辑进行验证？您的选择元素的值已经是“--”。`switch case`使用它或者您也可以在（参见 jsFiddle[示例](http://jsfiddle.net/op1ekun/qm27a/11/)）的默认部分处理它， 这也处理“选择状态”选项。当您单击链接并选择“错误”选项时，您会收到警告而不是重定向。

这是我的 jsFiddle 示例：[example](http://jsfiddle.net/op1ekun/qm27a/11/) .

# c# - 重新创建上下文后失去更新能力

> ID：13711629
> 
> 赞同：0
> 
> 时间：2012-12-04T20:48:34.400
> 
> 标签：c#, entity-framework-4, objectcontext

我有这个设计问题。我的 EF 通用存储库中内置了批量更新/插入功能。

在该功能中可能会发生两件事：我只是将实体添加到上下文并增加计数器或实际提交对数据库的更改，即：SaveChanges() (counter == commit treshold)

当我调用 SaveChanges 时，我也喜欢处理上下文并重新创建它作为清理资源的一种方式。

问题是我在处置后失去了更新实体的能力。这是我的更新方法：

```
public void Update(T entity, int batchSize)
{

    try
    {
        System.Data.EntityState entityState = (System.Data.EntityState)BLHelper.GetValue(entity, "EntityState");

         if (entityState == System.Data.EntityState.Detached)
             this.Attach(entity);

         //The next line will work so as long as QueueContextChanges() did not
         //save changes and then  Dispose of the context... 
         //After that, I'll get an exception that:
         //'ObjectStateManager does not contain an ObjectStateEntry with a reference to an object...'

         _context.ObjectStateManager.ChangeObjectState(entity, System.Data.EntityState.Modified);

         QueueContextChanges(batchSize); //Just increments a counter or calls SaveChanges()
    }
    catch
    {
        throw;
    }
}

public void Attach(T entity)
{
    _objectSet.Attach(entity);
}

public void QueueContextChanges(int batchSize)
{
    if (_commitCount == _commitThreshold || _counter == batchSize || batchSize == 1)
    {
        try
        {
            SaveChanges();
        }
        catch
        {
                //throw;
        }

        _commitCount = 0;

    }
    else
        _commitCount++;

    _counter++;
}

public void SaveChanges()
{
    try
    {
        _context.SaveChanges();
        _context.Dispose();
        _context = null;
        _context = SelectContext<T>(); //This methods knows which context to return depending of type of T...
     }
     catch
     {
        //TODO
     }
} 
```

你能想到更好的（和工作的）设计吗？在添加/更新 500,000 行时清除内存使用的能力目前很重要。

在 SaveChange() 之后分离实体可以帮助节省资源，这样我就不必处理上下文了吗？

谢谢。

# c# - 你知道支持 DialogService 的 MVVM 框架吗？

> ID：13711630
> 
> 赞同：0
> 
> 时间：2012-12-04T20:48:35.063
> 
> 标签：c#, wpf, mvvm, dialog, prism

我现在正在 WPF 应用程序中使用 Prism。但是现在我觉得有必要使用一个`DialogService`，并且我想使用一个支持这个功能的 MVVM 框架。

我不想`DialogService.` 提前实现我自己的Thanks。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:59:42.680

如果`DialogService`你的意思是一种从 ViewModel 打开窗口而不用 View 层的代码污染它的方法，那就是[Caliburn Micro](http://caliburnmicro.codeplex.com/)项目。它以 WindowManager 类的形式提供具有标准实现的 IWindowManager。它有`ShowWindow`,`ShowDialog`并且`ShowPopup`方法将 ViewModel 作为参数并自动创建 View 并将其绑定到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:08:29.233

您可以自己轻松完成。看看[这个](https://stackoverflow.com/questions/3801681/good-or-bad-practise-for-dialogs-in-wpf-with-mvvm)。

```
var result = this.uiDialogService.ShowDialog("Dialogwindow title goes here", dialogwindowVM); 
```

# javascript - 如果验证失败，有没有办法将可拖动的 Jquery 拖放恢复到其原始位置？

> ID：13711636
> 
> 赞同：1
> 
> 时间：2012-12-04T20:49:00.437
> 
> 标签：javascript, jquery

我试图了解如何让它发挥作用，但我不确定......

我有多个父 div（droppables）和多个子 div（draggables）。

子 div 包含一个表单，该表单包含许多输入标签。

所有输入元素都是必需的，我希望用户在其中输入一个值。如果它们是空的并且用户没有在其中输入值，并且如果用户在任何父 div 中拖动它们中的任何一个，我希望验证子 div。如果验证失败，那么我希望子 div 恢复到它的位置。

```
$( ".parent" ).droppable({
        accept: ".child",
        activeClass: "ui-state-hover",
        hoverClass: "ui-state-active",
    tolerance:'pointer',
        drop: function( event, ui ) {
//validate and then reject if it fails???
            $( this )
                .addClass( "ui-state-highlight" )
                .find( "p" )
                .append(ui.draggable).animate({width:'100',height:'100'});
        }
    });

$( ".child" ).draggable();​ 
```

我不知道如何实现这个例子：

```
http://jsfiddle.net/Dyawa/7/ 
```

如果孩子的名字为空，孩子div是否可以恢复到原来的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:39:37.453

看到这个问题：[how to revert position of a jquery UI draggable based on condition](https://stackoverflow.com/questions/3088485/how-to-revert-position-of-a-jquery-ui-draggable-based-on-condition)

如果不满足某些规则，您需要指示 JQuery 恢复可拖动的 div。

```
$(".child").draggable({ revert: 'invalid' }); 
```

然后在您的 .droppable() 中使用该`accept`选项设置对 drop 有效的内容，例如：

```
$(".parent").droppable({ 
    accept: function(dropElem) {
      //dropElem was the dropped element, return true or false to accept/refuse it
      return ($(dropElem).hasClass("child") && $("input",dropElem).val().length > 0);
    },
    activeClass: "ui-state-hover",
    hoverClass: "ui-state-active",
    tolerance:'pointer',
    drop: function( event, ui ) {
        $( this )
            .addClass( "ui-state-highlight" )
            .find( "p" )
            .append(ui.draggable).animate({width:'100',height:'100'});
    }
}); 
```

# java - 如何将新项目添加到列表中？（java）

> ID：13711637
> 
> 赞同：-2
> 
> 时间：2012-12-04T20:49:00.950
> 
> 标签：java

所以我可以使用 getter 访问列表，但是如何将新用户添加到列表中？我需要补充什么？

```
private List<User> userList= new ArrayList<User>(){{
    add(new User("ABC","123","B","b"));
    add(new User("CBA","123","I","b"));
}}; 

public List<User> getUserList() {
    return userList;
} 
```

是的，我添加了 2 个用户，但是当我创建列表时添加了它们，我希望有某种我可以调用的方法，它将新用户添加到列表中。就像是

```
 public void addNewUser(User){
    //some kind of code
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T20:50:37.707

您已经通过使用双括号[初始化块](http://c2.com/cgi/wiki?DoubleBraceInitialization)在此处添加了两个用户。要在初始化块之外添加，只需运行

```
userList.add(new User("XYZ","42","D","d")); 
```

或者，如果您没有访问用户列表的权限，那么

```
public void addToList(User u) {
    userList.add(u);
} 
```

add 方法的第二种方式遵循[这种模式](http://c2.com/cgi/wiki?TellDontAsk)（告诉不要问）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:50:46.123

```
getUserList().add(new User("DEF","456","E","e")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:51:46.507

```
public void setUser(String s1, String s2, String s3, String s4) {
User u = new User(s1,s2,s3,s4);
getUserList.add(u);
} 
```

# php - 正则表达式匹配子模式结构

> ID：13711639
> 
> 赞同：1
> 
> 时间：2012-12-04T20:49:03.493
> 
> 标签：php, regex, pcre

我正在测试一些正则表达式来处理子模式，这样我就可以通过 PHP 为每个 uri 段定义规则。其中一些部分是可选的，所以我尝试了这个：

```
preg_match('#^/(?P<controller>[\w-]+)(?:/(?P<[\w-]+)(?:/(?P<id>[\d]+)))/?$#uD', '/blog/post', $matches); 
```

这个正则表达式匹配`/blog/post/1`但不是`blog/post`它应该匹配的，因为第二个和第三个参数都是可选的。有什么线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T20:54:02.810

为什么第二部分和第三部分是可选的？没有`?`使它们成为可选的。您拥有的`?`仅适用于最后一个斜杠。此外，如果存在第二组，您需要确保第三组仍然是可选的。也许你正在寻找这样的东西：

```
'#^/(?P<controller>[\w-]+)(?:/(?P<item>[\w-]+)(?:/(?P<id>[\d]+))?)?/?$#uD' 
```

请注意，在您的问题中，第二个捕获组无效，因为您有一个开头`<`而不是组名要遵循。我改变了它，因为我认为这可能是问题中的错字。

但是，如果您采用与正则表达式不同的方法，它可能会大大提高代码的可读性。怎么[爆炸](http://php.net/manual/en/function.explode.php)`/`。_ 然后`$result[1]`将是您的控制器。然后你可以检查是否有一个`$result[2]`并检查它是否是一个有效的“项目”（或者你称之为的任何东西）。然后你可以检查是否有`$result[3]`, 如果那是一个数字并将其用作你的`id`. 这种方法很容易扩展到多个参数，并检查不同的允许项。

# python - 以前工作的 SAGE 安装坏了

> ID：13711640
> 
> 赞同：0
> 
> 时间：2012-12-04T20:49:04.597
> 
> 标签：python, ubuntu, sage

大约一个月前，Sage 为我工作。我直到昨天才使用它，当我尝试在我的 Ubuntu 12.04 终端中使用 sage 命令时，我收到以下错误

```
/usr/bin/sage: line 118: cd: /usr/lib/sage: No such file or directory
/usr/bin/sage: cannot determine SAGE_ROOT directory 
```

我尝试了所有我能想到的和谷歌。我曾尝试重新安装 libc6-i386 和 ia32-libs，但这似乎不是原因。我的电脑在其他方面运行良好，没有任何其他程序（也许我还没有注意到）出现故障。这似乎不是 32 位与 64 位的问题。当然，我检查了两个位置并且文件都在那里。我也重新安装了几次sage，问题仍然存在。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:06:54.000

尝试以这种方式运行 sage：

```
export SAGE_ROOT=<dir where sage archive was extracted, e.g. /home/daniel/sage>
sage 
```

如果它有效，你应该找到为什么 SAGE_ROOT var 没有设置。如果没有，如果它发生变化，请发布错误消息。

# php - CakePHP 成员资格框架 - 转换为 Wordpress？

> ID：13711644
> 
> 赞同：1
> 
> 时间：2012-12-04T20:49:17.817
> 
> 标签：php, wordpress, cakephp

我想知道是否有一种简单的方法可以将现有的会员框架从 CakePHP 转换为 Wordpress。我可以通过插件或雇用某人对其进行硬编码来做到这一点 - 我只是不确定这个过程。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T04:41:47.187

假设您正在寻找 bin Cake，并使用插件在 wordpress 中创建站点，那么是的，这是可能的，但要非常小心。如果 Wordpress 插件完全符合您的要求，它们可能会很棒*，但如果它们不符合，您就会撞到“墙”——您不再能够对您的应用程序进行更改的神奇地方。

*Wordpress 插件也很糟糕。要非常小心是谁做的。

一个好的是： http: [//pippinsplugins.com/tag/restrict-content-pro/](http://pippinsplugins.com/tag/restrict-content-pro/)

Pippin 制作了很棒的插件，如果这符合您现在和将来的要求，那就去吧。如果您需要灵活地进行业务需求的任何更改，请坚持使用蛋糕。

在迁移数据方面——你必须编写一些定制的东西来从蛋糕应用程序中提取数据——可能是 WP xml 格式来做到这一点。

# jquery - Jquery 动画到页面的百分比

> ID：13711646
> 
> 赞同：0
> 
> 时间：2012-12-04T20:49:22.643
> 
> 标签：jquery

我正在使用一个简单的 jquery 动画在屏幕上显示 4 个 div：

```
<script type="text/javascript">
$(document).ready(function() {
$("#boxa").animate({left: "+=100"}, 1000);
$("#boxb").animate({left: "+=300"}, 1000);
$("#boxc").animate({left: "+=600"}, 1000);
$("#boxd").animate({left: "+=900"}, 1000);
});
</script> 
```

是否可以设置移动框的位置，以便它们移动到均匀分布到页面宽度的最终位置，所以如果 divbox 宽度设置为 25%，那么每个框的动画都会自动动画到正确的位置？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:00:11.553

只需以百分比形式输入左侧偏移量：

```
$(document).ready(function() {
    $("#boxa").animate({
        left: "0"
    }, 1000);
    $("#boxb").animate({
        left: "25%"
    }, 1000);
    $("#boxc").animate({
        left: "50%"
    }, 1000);
    $("#boxd").animate({
        left: "75%"
    }, 1000);
});​ 
```

[演示在这里](http://jsfiddle.net/salman/CRKMc/)

# html - 为什么我的网站图标不会显示在 Google Chrome 中？

> ID：13711648
> 
> 赞同：0
> 
> 时间：2012-12-04T20:49:31.180
> 
> 标签：html, google-chrome, icons, favicon

我正在尝试让我的网站图标显示在 Google Chrome 中，但我不知道为什么没有。它适用于 IE、FF、Opera 和 Safari。这是页面上当前与图标相关的代码：

```
<LINK REL="apple-touch-icon" HREF="/_images/icons/BHS2.2 - Modern 512.png" TYPE="image/png" />
<LINK REL="shortcut icon"    HREF="/_images/icons/BHS2.2 - Modern.ico"     TYPE="image/x-icon" />
<LINK REL="favicon"          HREF="/_images/icons/BHS2.2 - Modern.ico"     TYPE="image/x-icon" /> 
```

实际页面位于[BHStudios.org](http://bhstudios.org/)，以防您想要完整的酱汁。我不想要任何关于网站设计的切线，只是图标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:01:16.833

将名称更改为 favicon.ico 并将其移动到站点的根目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:00:41.870

谷歌搜索后，我发现了这个：

```
<link rel="shortcut icon" href="/_images/icons/BHS2.2 - Modern.ico"  type="image/x-icon" />
<link rel="icon" href="/_images/icons/BHS2.2 - Modern.ico"  type="image/x-icon" /> 
```

请尝试告诉我它是否有效。

# c++ - SSE / AVX 对齐内存上的 valarray

> ID：13711649
> 
> 赞同：5
> 
> 时间：2012-12-04T20:49:32.677
> 
> 标签：c++, sse, avx, valarray

有没有办法确保`valarray`使用对齐的内存，以便可以使用 SSE 和 AVX 对其进行矢量化？据我所知，STL 不能保证对齐，并且您**不能**将分配器传递给 valarray。还有另一种方法可以实现这一目标吗？

提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T22:28:03.840

我通常使用`std::vector`我自己的分配器，它具有对齐作为模板参数并调用`_mm_malloc()`or `_aligned_malloc()`。这很好用，也适用于 AVX（32 字节对齐）。适当编写的模板化用户代码会自动选择所需的对齐方式。

`AlignmentAllocator<>`在and 助手的代码下方。在 gcc 和 icpc 下测试。

```
/// allocate and de-allocate aligned memory
template<std::size_t alignment>
struct static_allocator {
  static void*allocate(std::size_t n)
  {
    if(n == 0) return 0;
    if(n > max_size())
      throw std::bad_alloc();
    void*ret =
#if defined(__GNUC__) || defined (__INTEL_COMPILER)
      _mm_malloc
#else
      _aligned_malloc
#endif
      (n,alignment);
    if(!ret)
      throw std::bad_alloc();
    return ret;
  }
  static void deallocate(void*p)
  {
#if defined(__GNUC__) || defined (__INTEL_COMPILER)
    _mm_free
#else
    _aligned_free
#endif
    (p);
  }
  static std::size_t max_size ()
  { return std::numeric_limits<std::size_t>::max(); }
};

/// allocate and de-allocate unaligned memory
template<>
struct static_allocator<1> {
  static std::size_t max_size () noexcept
  { return std::numeric_limits<std::size_t>::max(); }
  static void*allocate(std::size_t n)
  { 
    if(n == 0) return 0;
    void*ret = new char[n];
    return ret;
  }
  static void deallocate(void*p)
  { delete[] static_cast<char*>(p); }
};

template<> struct static_allocator<0>;

/// allocator with explicit alignment
template<typename _Tp, std::size_t alignment = 16>
class AlignmentAllocator
{
  typedef static_allocator<alignment> static_alloc;
public:
  typedef size_t     size_type;
  typedef ptrdiff_t  difference_type;
  typedef _Tp*       pointer;
  typedef const _Tp* const_pointer;
  typedef _Tp&       reference;
  typedef const _Tp& const_reference;
  typedef _Tp        value_type;

  template <typename _Tp1>
  struct rebind
  { typedef AlignmentAllocator<_Tp1, alignment> other; };

  AlignmentAllocator() {}

  AlignmentAllocator(const AlignmentAllocator&) {}

  template <typename _Tp1>
  AlignmentAllocator(const AlignmentAllocator<_Tp1, alignment> &) {}

  ~AlignmentAllocator() {}

  pointer address (reference x) const
  {
#if __cplusplus >= 201103L
    return std::addressof(x);
#else
    return reinterpret_cast<_Tp*>(&reinterpret_cast<char&>(x));
#endif
  }

  const_pointer address (const_reference x) const
  {
#if __cplusplus >= 201103L
    return std::addressof(x);
#else
    return reinterpret_cast<const _Tp*>(&reinterpret_cast<const char&>(x));
#endif
  }

  pointer allocate (size_type n, const void* = 0)
  { return static_cast<pointer>(static_alloc::allocate(n*sizeof(value_type))); }

  void deallocate (pointer p, size_type)
  { static_alloc::deallocate(p); }

  size_type max_size () const
  { return static_alloc::max_size() / sizeof (value_type); }

#if __cplusplus >= 201103L

  template<typename _Up, typename... _Args>
  void construct(_Up* p, _Args&&... args)
  { ::new(static_cast<void*>(p)) _Up(std::forward<_Args>(args)...); }

  template<typename _Up>
  void destroy(_Up* p)
  { p->~_Up(); }

#else

  void construct (pointer p, const_reference val)
  { ::new(static_cast<void*>(p)) value_type(val); }

  void destroy (pointer p)
  { p->~value_type (); }

#endif

  bool operator!=(const AlignmentAllocator&) const 
  { return false; }

  // Returns true if and only if storage allocated from *this
  // can be deallocated from other, and vice versa.
  // Always returns true for stateless allocators.
  bool operator==(const AlignmentAllocator&) const 
  { return true; }

};// class AlignmentAllocator<>

/// AlignmentAllocator<void> specialization.
template<std::size_t alignment>
class AlignmentAllocator<void, alignment>
{
public:
  typedef size_t      size_type;
  typedef ptrdiff_t   difference_type;
  typedef void*       pointer;
  typedef const void* const_pointer;
  typedef void        value_type;

  template<typename _Tp1>
  struct rebind
  { typedef AlignmentAllocator<_Tp1, alignment> other; };
}; 
```

# watir-webdriver - watir-webdriver-performance gem 中的 :response_time、:time_to_first_byte 和 :time_to_last_byte 有什么区别？

> ID：13711653
> 
> 赞同：2
> 
> 时间：2012-12-04T20:49:37.003
> 
> 标签：watir-webdriver, performance-testing

我已经用谷歌搜索，通过 SO 搜索，并阅读了主机[页面](http://90kts.com/2011/04/19/watir-webdriver-performance-gem-released/)上推荐的 Navigation Timing 页面，但无法自行解决。

`:response_time`,`:time_to_first_byte`和 和有什么区别`:time_to_last_byte`？

根据我的理解，以及 Navigation Timing 文档，它似乎`:response_time`应该是 和 的总和`:time_to_first_byte`，`:time_to_last_byte`但是在执行我的测试时我发现它不是。

```
 require 'watir-webdriver-performance'

    $response = $browser.performance.summary[:response_time]
    $first_byte = $browser.performance.summary[:time_to_first_byte]
    $last_byte = $browser.performance.summary[:time_to_last_byte]

    def performance_check
        puts ("#{$browser.url}: Response time: #{$response}ms.")

        puts ("#{$browser.url}: Time to first byte: #{$first_byte}ms.")

        puts ("#{$browser.url}: Time to last byte: #{$last_byte}ms.")
    end

    def test_site_01
      $browser.goto("http://www.google.com/")
      performance_check 
    end 
```

我看到的典型输出是：

```
 http://www.google.com: Response time: 1558ms.
    http://www.google.com: Time to first byte: 384ms.
    http://www.google.com: Time to last byte: 385ms. 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T21:10:47.890

到第一个字节的时间 (TTFB) 是服务器在响应中返回第一个信息字节所用的时间。所以这个 gem 中的 TTFB 相当于：

`response_start - domain_lookup_start if domain_lookup_start > 0`

并将包括 DNS、连接和请求开销。

此 gem 中的最后一个字节时间 (TTLB) 相当于：

`response_end - domain_lookup_start`

所以应该包括 DNS、连接、请求和响应开销。

因此，在您的示例中，有效地在 TTFB 和 TTLB 之间传输内容只需要 1ms。摘要中的响应时间是散列中所有测量的最早和最新时间​​戳之间的增量。所以实际上是navigation_start 和load_end 之间的所有内容。

这包括规范中可用的所有 DNS、TCP、连接、请求、响应和浏览器处理/加载时间。

如果您只是转储哈希，则在您的代码中

`$browser.performance.summary`

您应该能够看到所有相关指标。

# ms-access - MS Access 报告中的重复小计

> ID：13711657
> 
> 赞同：0
> 
> 时间：2012-12-04T20:49:56.677
> 
> 标签：ms-access, report, ms-access-2003

这个问题似乎很简单，但我无法解决它。

我有一个 MS Access 2003 报告，它导出如下内容：

```
Europe
Spain      2 3 4
England    2 2 4
France     1 2 3

Europe Total 5 7 11 
```

* * *

```
Asia
China      3 2 1
Japan      1 2 3

Asia Total 4 4 4 
```

在最后一页

```
Grand Total 9 11 15 
```

你知道是否有一种方法可以重复小计（例如，在最后一页中，欧洲总计和亚洲总计？例如添加额外的页脚或类似的东西？

我希望最后一页的输出是

```
Europe Total 5 7 11

Asia Total   4 4 4 

Grand Total  9 11 15 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:04:07.493

我看到的唯一真正动态的方法是创建一个单独的报告计算每个区域的总数（我们称之为 TotalsPerRegion），并将该报告（作为子报告）嵌入到主报告的页脚中，设置子报告的 CanGrow 和CanShrink 属性为 True。
这样，它将适应您拥有的任意数量的区域。
希望我清楚...

# c# - 如何在表单中找到 Panel 对象？

> ID：13711666
> 
> 赞同：1
> 
> 时间：2012-12-04T20:50:30.493
> 
> 标签：c#, .net

我的任务是生成布局的 XML 文件，但我似乎在识别表单上的面板控件时遇到了问题。为了识别物体，我使用了这样的东西：

```
foreach (Control c in this.Controls) {
    if (c is Button) {
        //generate XML...
    } else if (c is Panel) {
        //generate XML...
    }
} 
```

它发现所有控件都很好，但不是 Panel 对象。谁能告诉我我在这里做错了什么？面板不是控件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:19:08.453

你可以使用这个递归函数。

```
var panels = FindControls<Panel>(aForm).ToList();

IEnumerable<T> FindControls<T>(Control ctrl) where T: Control
{
    foreach (Control c in ctrl.Controls)
    {
        if (c.GetType() == typeof(T)) yield return (T)c;
        foreach (var subC in FindControls<T>(c))
            yield return subC;
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:46:02.233

面板*是*一个控件，但您只能获得直接在表单中的控件，而不是其他控件中的控件。

那么这样的事情怎么样：

```
void DoRecursive(Control ctrl)
{
    foreach (Control subCtrl in ctrl.Controls) DoRecursive(subCtrl);

    if (ctrl is Button) etc.
} 
```

或者，也许您`//generate XML...`作为 Button 退出了`foreach`. 也许它有一个`break`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T21:02:06.577

我用一个简单的表单尝试了你的代码，表单上有一个按钮和一个面板，面板内有一个按钮。它对我来说找到了第一个按钮和面板。也许问题是您想访问其父级为面板的控件？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-04T20:57:14.693

您的代码应该可以工作。尝试将代码修改为不执行`else if`并查看是否可以找到面板：

```
foreach (Control c in this.Controls) {
    if (c is Panel) {
        MessageBox.Show("Hey, I found the " + c.Name + " panel!");
    }
} 
```

我们也可以尝试通过名称定位它并查看它是什么类型的控件：

```
foreach (Control c in this.Controls) {
    // Looks for a control called 'panel1' - put in your panel's name
    if (c.Name == "panel1") {
        MessageBox.Show("Hey, I found a " + c.GetType().ToString());
    }
} 
```

# actionscript-3 - 在 Flash 中控制嵌入式 swf 中的声音

> ID：13711668
> 
> 赞同：1
> 
> 时间：2012-12-04T20:50:33.703
> 
> 标签：actionscript-3, audio, flash, actionscript-2

我有一个外部 .swf 已加载到闪存中，但我无法控制此 .swf 中的代码。我已将它加载到场景中的影片剪辑中，并且我想控制此加载的 .swf 中声音的音量。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:54:36.150

使用`flash.media.SoundMixer`该类，您可以控制应用程序中的所有声音。您可以将其视为混音台上的主音量控制。我相信这也适用于外部加载的 SWF。

```
var volume:Number = 0.5;
SoundMixer.soundTransform = new SoundTransform(volume); 
```

# c++ - 如果一个 std::vector 在被释放时是按值返回的？

> ID：13711672
> 
> 赞同：0
> 
> 时间：2012-12-04T20:50:41.077
> 
> 标签：c++, opencv, stl

我无法理解在以下情况下如何释放 C++ std::vector 容器

```
void DoSomething()
{
   cv::Point ** curves;
   int * curve_sizes;
   num_curves = m_curves.size(); //member variable holdings curves
   curves = new cv::Point*[num_curves];
   curve_size = new int[num_curves];

   std::vector<cv::Point> cur_points;
   for(int i = 0; i < num_curves; ++i)
   {
     cur_points = CreatePolyPoints(m_curves[i]);
     curves[i] = &cur_points[0];
     curve_sizes = cur_points.size();
   }

   cv::fillPoly(m_roi, curves, curve_sizes, num_curves, ... );

   //Clear the dynamic data
   // Do i do aything here?   
   delete [] curves;
   delete [] curve_sizes;
}

std::vector<cv::Point> CreatePolyPoints(Curve curve)
{
   std::vector<cv::Point> points;

   //Do work here here
   while(something)
   {
     cv::Point cur_point;
     points.push_back(cur_point);
   }

   return points;
} 
```

提前致谢。如果有人对我的目标感兴趣：在给定由“n”条曲线定义的多边形的情况下生成 ROI。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T20:52:45.433

它不是动态分配的，因此一旦超出范围就会被销毁。`DoSomething()`在您的情况下，您的变量将在函数退出后超出范围。您的局部变量在循环`cur_points`中获取分配给它的返回值。`CreatePolyPoints()`发生这种情况时， 的旧内容`cur_points`将不再存在 - 您无需担心这一点，因为该向量中的`Curve`对象实例将在每次重新分配向量时被销毁。同样，当`cur_points`超出范围时。

编辑：你在这里似乎有问题

```
std::vector<cv::Point> cur_points;
for(int i = 0; i < num_curves; ++i)
{
   cur_points = CreatePolyPoints(m_curves[i]);
   curves[i] = &cur_points[0];    // <-- problem
   curve_sizes = cur_points.size();
} 
```

您在每次迭代时将向量元素 0 的地址分配给您的`ith`元素`curves`- 这里的问题是，这将是不再存在的对象的地址。这是因为一旦在循环迭代中下一次被重新分配，向量的内容将不再存在`cur_points`，因此您存储的指针不指向有效对象 - 它们指向已经被销毁的对象。当你的循环完成时，向量将包含**最后一次**调用返回的内容`CreatePolyPoints`。如果您想确保所有`cv::Point`对象在您调用的点仍然存在，`cv::fillPoly`您应该考虑通过引用传递向量`CreatePolyPoints()`函数而不是每次都按值返回一个新向量。这将确保您添加的所有项目`CreatePolyPoints`在循环完成后仍然存在

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T20:55:06.740

`cur_points`是一个具有自动存储持续时间的变量。当它被声明时，它就存在了，这里：

```
std::vector<cv::Point> cur_points; 
```

...并且只要它的封闭范围持续存在，它就会持续存在。

由于这种情况下的“封闭范围”是函数`void DoSomething()`本身，`cur_points`因此在函数返回时将超出范围并（自动）销毁。

**现在编辑**，以上是简单的答案。完整的答案实际上有点复杂，因为还涉及临时人员。

该函数按值`CreatePolyPoints`返回此`vector`值。严格遵守此函数的语义和返回值意味着`points`在该函数中本地创建的对象在`CreatePolyPoints`返回时将被销毁，并`vector`从`points`. 该临时值是函数实际返回的值。然后将此临时文件复制到您的`cur_points`变量中（通过 copy-assignemnt），然后销毁该临时文件。

这是很多浪费的复制，但故事还有更多内容。C++ 标准也有一条规则（称为“AS-IF”规则），它规定编译器可以以它认为合适的任何方式更改您的代码，只要您的程序的行为与**编译**器的行为相同考虑到副作用，没有做任何更改。

上面的意思是编译器有一个主要的优化机会在许多情况下消除所有这些临时变量，包括这种情况，通过将返回*直接*复制到`cur_points`变量而不是通过临时变量。这种最通用形式的优化称为“返回值优化”，大多数（全部？）现代编译器经常这样做。当这种情况发生时（它通常会在这里），行为与我在此处编辑之前所布置的完全一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T21:29:29.823

这是一个不泄漏的 DoSomething 示例，并且已删除错误：

```
void DoSomething()
{
  std::vector<std::vector<cv::Point>> curves;
  // so long as I do not resize this, or change its length,
  // curves[x].data() will remain valid
  curves.resize( m_curves.size() );

  for(int i = 0; i < num_curves; ++i)
  {
    curves[i] = CreatePolyPoints(m_curves[i]);
  }
  // create buffers of the correct size for the legacy API:
  std::vector<v::Point*> curve_ptrs(curves.size());
  std::vector<int> curve_sizes(curves.size());
  for(int i = 0; i < curves.size(); ++i)
  {
    curve_ptrs[i] = curves[i].data();
    curve_sizes[i] = curves[i].size();
  }

  // call the legacy API:
  cv::fillPoly(m_roi, curve_ptrs.data(), curve_sizes.data(), num_curves, ... );
} 
```

# javascript - jQuery/JavaScript 表单验证不起作用

> ID：13711675
> 
> 赞同：0
> 
> 时间：2012-12-04T20:50:45.860
> 
> 标签：javascript, jquery, forms, validation

我正在使用此代码进行表单验证，

```
$("#btnaddregistration").live("click", function(e) {
    e.preventDefault();
    var errorCount = 0;
    $("#formaddregistration").find("input").each(function(i) {
        if ($(this).val().length == 0) {
            errorfield = $(this);
            errorCount++;
            $("#modaldialogtext").text("'" + $(this).parent().parent().find("label").text() + "' cannot be left blank.");
            $("#modal_confirmation").dialog("open");
            return false;
        }
    });
    if (errorCount > 0) {
        return false;
    } else {
        document.forms["formaddregistration"].submit();
    }
});​ 
```

但是表单没有提交。我已经使用了所有可能的提交方法，但我失败了。知道我哪里错了吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-04T20:57:31.617

首先，您可以大大改进您的代码，这将有助于您进行故障排除。

如果表单没有提交，请确保选择器确实在工作，即尝试类似的方法`$form.hide()`，看看它是否隐藏，以确保它不是 PEBCAK

```
var $form = $("#formaddregistration");
$("#btnaddregistration").on("click", function(e) {
    var errorCount = 0;

    $form.find("input").each(function(i) {
        var $this = $(this);
        if ($this.val().length < 1) {
            errorCount++;

            // this line also needs improving..
            $("#modaldialogtext").text("'" + $this.parent().parent().find("label").text() + "' cannot be left blank.");
            $("#modal_confirmation").dialog("open");
            return false;
        }
    });

    if (errorCount < 1) {
        $form.submit();
    }

    return false;
});​ 
```

# ruby - Ruby Savon 设置 SOAP 标头元素

> ID：13711677
> 
> 赞同：1
> 
> 时间：2012-12-04T20:50:56.593
> 
> 标签：ruby, soap, savon

我正在尝试使用 Savon 将 API Key 元素添加到 SOAP 标头，但正在打一场失败的战斗。我对 Ruby 还很陌生，我所知道的很少是自学的。根据他们的 API 文档，这是我需要添加的内容：此 ProductServe 函数将返回（SOAP-Header）身份验证元素，并且必须与每个请求一起发送。

参数

```
Required  Name     Type    Description                              Min Occurs Max Occurs
No        sToken   string  Unique token to identify visitor.        0          1
Yes       sApiKey  string  User specific key to authenticate user.  1          1 
```

[http://wiki.affiliatewindow.com/index.php/UserAuthentication](http://wiki.affiliatewindow.com/index.php/UserAuthentication)

我还没有找到任何类似于我想做的事情，这是我尝试过的代码：

```
endpoint = "http://v3.core.com.productserve.com/ProductServeService.wsdl"
client = Savon.client

response = client.request :urn, "getCategory" do
  soap.endpoint = endpoint
  soap.header = {
    "urn:sApiKey" => "xxxx"
  }
end 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:11:00.410

看起来您需要配置您的 Savon 客户端：

```
client = Savon::Client.new do
  wsdl.document = endpoint
  wsdl.element_form_default = :unqualified
end 
```

我进行了这些更改，您的其余代码返回了有效的 SOAP 响应。

无耻地抄袭了[这个问题](https://stackoverflow.com/questions/6720720/how-to-stop-savon-from-adding-prefixes-to-soap-body)

# php - 在netbeans和php中，我如何找出调用某个函数/方法的程序的所有文件/区域

> ID：13711678
> 
> 赞同：0
> 
> 时间：2012-12-04T20:50:59.460
> 
> 标签：php, function, netbeans, methods, call

基本上我有这个方法，它在我的 php 程序中到处被调用。netbeans 中是否有办法准确找出在我的 php 程序中调用该特定方法的位置或次数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:54:27.327

您可以安装和使用 xdebug：[http](http://wiki.netbeans.org/HowToConfigureXDebug) ://wiki.netbeans.org/HowToConfigureXDebug 。

阅读这篇文章，它还涵盖了跟踪，它可以帮助你理解执行流程：[http ://devzone.zend.com/1120/introducing-xdebug/](http://devzone.zend.com/1120/introducing-xdebug/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:52:33.230

可能有一种更简单的方法，但是如果您重构该方法，Netbeans 应该会提示您搜索所有用法并进行更新。在这种情况下，您只是不会更新。

# java - 编译的 .Jar 崩溃（没有 java 控制台）但在 Eclipse 中编译和运行？

> ID：13711680
> 
> 赞同：0
> 
> 时间：2012-12-04T20:51:02.947
> 
> 标签：java, eclipse, audio, libgdx, compiled

我正在使用 Libgdx 编写游戏代码，它使用诸如 Gdx.files.internal("file") 之类的方法来加载文件，这在导出应用程序时应该可以工作，因为这就是它的本意

一些文件被复制到 USER 目录并从那里加载（音频）这是导致应用程序崩溃的原因吗？如此处所述：[Java 应用程序在 Eclipse 中正常运行，但不是 .jar](https://stackoverflow.com/questions/3618963/java-application-runs-properly-in-eclipse-but-not-as-jar)

如果有人能给我一个想法，那就太好了，它也不会为我启动 java 控制台，所以我不知道

编译后的 .jar 在这里：[https](https://www.dropbox.com/s/rz9v7lkdsj78z20/RUSHmup.jar) ://www.dropbox.com/s/rz9v7lkdsj78z20/RUSHmup.jar （里面也有库）

这是我认为导致问题的音频加载代码（但我所看到的只是在 Eclipse 中可以正常工作并且可以正常工作的东西）

```
if(!Gdx.files.external("test.wav").exists()){
            String f = copySong(FILE);
        }
        if(Gdx.files.external("test.wav").exists()) {
        //  String ss = copySong(FILE);
            String songPath = Gdx.files.getExternalStoragePath() + Gdx.files.external("test.wav").path();
            //System.out.println("B4: " + songPath);
            songPath.replace('\\', '/');
            //System.out.println("AF: " + songPath);
            song = minim.loadFile(songPath,2048);//"C:/users/seantest/test.wav", 2048);

        }

        String external = Gdx.files.getExternalStoragePath();
        external.replace('\\', '/');

        Gdx.files.internal("data/audio/1.wav").copyTo(Gdx.files.external("1.wav"));
        Gdx.files.internal("data/audio/2.wav").copyTo(Gdx.files.external("2.wav"));
        Gdx.files.internal("data/audio/3.wav").copyTo(Gdx.files.external("3.wav"));
        Gdx.files.internal("data/audio/go.wav").copyTo(Gdx.files.external("go.wav"));
        count3 = minim.loadSample(external + "3.wav");
        count2 = minim.loadSample(external + "2.wav");
        count1 = minim.loadSample(external + "1.wav");
        countGo = minim.loadSample(external + "go.wav");

        audioData = new RSAudioData(this);

        if(song!=null){
            System.out.println("Song Info: " );
            System.out.println(song.length() + " " + song.sampleRate() + " " + song.bufferSize());
            beat = new BeatDetect(song.bufferSize(), song.sampleRate());
            beat.setSensitivity(300);  
            bl = new RSMBeatListener(beat, song); 
            fftLog = new FFT(song.bufferSize(), song.sampleRate());
            fftLog.logAverages(22, 3);
            max = new float[fftLog.avgSize()];
              for(int i = 0; i < max.length-1; i++)
                max[i] = 0;
        }
    }

    public String copySong(String file) {
        externalFile = Gdx.files.external("test.wav");
        Gdx.files.internal(file).copyTo(externalFile);
        exFile = Gdx.files.getExternalStoragePath() + "test.wav";
        System.out.println(exFile);
        return exFile;
    }

    public String sketchPath() {
        return Gdx.files.getExternalStoragePath();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T07:48:29.437

右键单击您的桌面项目->构建路径->配置并检查“源”中是否为 android 资产文件夹，并在“订购和导出”中选中。此外，当您导出可运行的 jar 时，请选中“将所需的库打包到生成的库中”。

# knitr - 针织不产生数字

> ID：13711684
> 
> 赞同：1
> 
> 时间：2012-12-04T20:51:34.760
> 
> 标签：knitr, rstudio

我遇到了一个与 RStudio 中使用 knit 相关的问题。非常感谢您的建议和帮助。下面是问题的描述。

在我在 Ubuntu 11.10 机器上将 RStudio 0.97.168 升级到 0.97.237 以及 R 2.15.1 到 R 2.15.2 以解决与错误消息相关的问题之后

> *包 'xxx' 不可用（对于 R 版本 2.15.1）*，

我发现针织不再产生数字，甚至代码也指示这样做。生成的 html 文件仍然生成，可以通过 firefox 浏览器查看，但里面的*figure*文件夹和图像文件不存在。因为我没有找到任何讨论这个问题的帖子，我想知道是我搜索了错误的关键词还是这是一个新问题？

我升级是因为更改存储库镜像并没有解决包安装的问题。升级到R 2.15.2后，包安装问题确实解决了。

再次感谢您的时间和关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:36:23.740

好的，大家似乎已经意识到这个问题只是由于 CRAN 镜像的滞后；`knitr`0.9 取决于`evaluate`0.4.3；后者比前者更早上传。等待一段时间让两个软件包的新版本到达您的 CRAN 镜像即可解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T17:20:53.253

我遇到了同样的问题，只需手动下载 knitr_0.9.zip 并将文件从 .libPaths() 目录复制到您的 knitr 目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T18:22:43.580

感谢亿辉的及时回复和新版本knitr的发布。我真的很欣赏 knitr 包的用处。

在我升级了你刚刚上传的 knitr 0.9 之后。问题已排序。然后我尝试通过手动重新安装 knitr 0.8 来重现错误，并且错误再次发生。下面是我的计算机在 0.9 和 0.8 工作时分别执行 sessionInfo() 的输出。

```
R version 2.15.2 (2012-10-26)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_GB.UTF-8       LC_NUMERIC=C               LC_TIME=en_GB.UTF-8       
 [4] LC_COLLATE=en_GB.UTF-8     LC_MONETARY=en_GB.UTF-8    LC_MESSAGES=en_GB.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                  LC_ADDRESS=C              
[10] LC_TELEPHONE=C             LC_MEASUREMENT=en_GB.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] knitr_0.9

loaded via a namespace (and not attached):
[1] digest_0.6.0   evaluate_0.4.3 formatR_0.7    plyr_1.7.1     stringr_0.6.1  tools_2.15.2 
```

# -------------------------------------------------- -----------------------------------------

```
R version 2.15.2 (2012-10-26)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_GB.UTF-8       LC_NUMERIC=C               LC_TIME=en_GB.UTF-8       
 [4] LC_COLLATE=en_GB.UTF-8     LC_MONETARY=en_GB.UTF-8    LC_MESSAGES=en_GB.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                  LC_ADDRESS=C              
[10] LC_TELEPHONE=C             LC_MEASUREMENT=en_GB.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] knitr_0.8

loaded via a namespace (and not attached):
[1] digest_0.6.0   evaluate_0.4.3 formatR_0.7    plyr_1.7.1     stringr_0.6.1  tools_2.15.2 
```

# osgi - 如何更改 Felix gogo shell 中的默认命令范围？

> ID：13711687
> 
> 赞同：6
> 
> 时间：2012-12-04T20:51:40.233
> 
> 标签：osgi, apache-felix

当您在 gogo shell 中输入命令时，它会首先在默认范围内查找该命令的匹配项。你如何配置这个默认范围是什么？

例如，如果您使用 gogo 启动 Felix 框架，它使用`felix`范围作为默认值。但是，如果您启动 Equinox 3.8.1，它现在使用 felix shell 作为默认值，它将使用`equinox`范围作为默认值。

主要的烦恼是当我输入时：

```
g! help 
```

我从`equinox:help`而不是得到结果`felix:help`，所以我想将`felix`范围设为默认值。

是否有 OSGi 框架属性来配置它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-05T10:54:22.780

gogo shell 在启动时会尝试寻找启动脚本。默认情况下，它将在文件夹中查找（相对于您的启动目录）：

```
etc/gosh_profile 
```

如果在那里找不到脚本，则使用默认脚本（在 org.apache.felix.gogo.shell 中），其中包含以下行：

```
SCOPE = gogo:* 
```

因此，要更改默认范围，请提供您自己的脚本。

# c - 服务器/客户端 UDP 数据包同步

> ID：13711691
> 
> 赞同：1
> 
> 时间：2012-12-04T20:51:56.067
> 
> 标签：c, networking, filter, synchronization, udp

我有一台计算机每 5 毫秒发送一个带有测量数据的 UDP 数据包。

另一台包含高速线扫描相机的计算机接收这些数据包并将数据包数据作为附加数据填充到无尽的相机图像中。

问题是数据包不是每 5 毫秒到达一次。没关系。我知道网络数据包有抖动。有时 10 毫秒延迟，有时两个数据包之间没有延迟。因此，在 UDP 数据到达的那一刻，将它们填充到那无尽的图像中并不是一个好主意。

```
Time --------------------------------------------------------------------> 
UDP Packets: A   B  C     D    E   F       G  H     I  J      K ....
Cam Lines:   012345678901234567890123456789012345678901234567890 ...
Optimal:     A    B    C    D    E    F    G    H    I    J    K ... 
```

有谁知道一个很好的同步算法来解决这个问题？一个困难是这是一个无休止的运行系统，并且同步必须是自我调整的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T21:00:27.407

对于像这样的任何具有包间抖动的流系统，您希望实现一个抖动缓冲区并将播放与数据接收分离。在缓冲区中接收数据包（大小取决于您可能有多少抖动）。在缓冲区半满（或您选择的其他阈值）之前，不要开始播放任何数据。然后你有一个播放线程，它每 5 毫秒从抖动缓冲区中读取一次并进行输出。

# php - 如何使用 PHP 将撇号从文本区域传递到 MySQL

> ID：13711693
> 
> 赞同：2
> 
> 时间：2012-12-04T20:52:02.183
> 
> 标签：php, textarea, apostrophe

我有一个文本区域，用户也可以添加注释。在下一页上，我使用`$_POST[Comments]`来显示输入的内容。我有一个编辑按钮可以返回并查看输入的内容并编辑注释，但是当我显示`$_POST[Comments]`它时，它会显示所有内容，直到一个撇号。

例子：

最初键入：`Let's try this.`

编辑时：`Let`

现在，当我将它传递给服务器进行 SQL 添加时，我使用以下函数来防止 SQL 注入

```
function keepSafe($value) {
        if (get_magic_quotes_gpc()) {
            $value = stripslashes($value);
        }
        if (!is_numeric($value)) {
            $value = "'" . mysqli_real_escape_string($value) . "'";
        }
        return $value;
    } 
```

以下是我用来格式化 SQL 插入的输入。

```
$Comments = str_replace("\n","<br />",$_POST['CustComments']);
    $Comments = keepSafe($_POST['Comments']); 
```

在提交之前进行编辑时，我需要能够看到注释部分中的所有撇号。而且我想确保当我提交它是一个 SQL 注入阻止安全代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T21:13:05.830

**撇号的问题：**

您可能使用这样的输入：

```
<input type='text' value='<?php echo $value;?>'/> 
```

问题是，如果该值有撇号，则会发生这种情况：

```
<input type='text' value='Let's play'/> 
```

因此，值标签因变量中的撇号而结束。

要修复它，只需使用带有 ENT_QUOTES 的 htmlspecialchars：

```
<?php 
 $value = htmlspecialchars("Let's play", ENT_QUOTES);
?>
<input type='text' value='<?php echo $value; ?>'/> 
```

这样撇号会被编码，并且可以在您的表单中进行编辑

**关于 SQL 注入：**

只需使用[mysqli 的准备好的语句](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)就可以了。为了让您免受 XSS 攻击，请始终`htmlspecialchars`在 HTML 输出中输入用户输入。更好的方法是将输入过滤为您需要的内容，并仅将过滤后的输入保存到您的数据库中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-04T21:29:00.667

`htmlspecialchars()`创建 textarea 标签时使用函数：

```
<textarea><?=htmlspecialchars($_POST['Comments'])?></textarea> 
```

# requirejs - RequireJs Optimizer 缩小到一个文件但不启动主构建

> ID：13711705
> 
> 赞同：6
> 
> 时间：2012-12-04T20:52:51.917
> 
> 标签：requirejs

我有一个简单的 requirejs 项目，我正在尝试使用 node.js 优化到一个文件。项目结构是这样的。

```
|___索引.html
|
├───css
│ style.css
│
└────脚本
    │ main.js
    │
    ├───lib
    │ require.js
    │ underscore.js
    │
    └────模块
            模块1.js
            模块2.js
            模块3.js

```

这是我的构建文件

```
//build.js
({
    baseUrl: "./SimpleRequireJsProject/scripts",
    name:"main",
    out:"main-built.js"
}) 
```

在项目文件之外使用 r.js 和 build.js。我使用节点控制台运行优化器。

```
node r.js -o build.js 
```

一切正常。输出 main-built.js 被创建。**但是**当我更换

```
<script data-main="scripts/main" src="scripts/lib/require.js"></script> 
```

和

```
<script data-main="scripts/main-built" src="scripts/lib/require.js"></script> 
```

当我运行索引文件时。没有错误，但没有输出。我期待这样的控制台消息。与原始数据主一起工作

```
//输出
主要开始
m1 开始
m2 开始..从 m2 开始 m3
m3 开始

```

请帮我找出为什么项目没有运行并且也没有错误。:(

```
 //main.js
    define([
        'lib/underscore',
        'modules/module1',
        'modules/module2'
    ],
        function (_, Module1, Module2) {
            console.log('main started');
            var module1 = new Module1();
            var module2 = new Module2();
            module1.start();
            module2.start();
        });

    //module1.js
    define(['lib/underscore'],
        function ( _) {
            function Module1() {
                this.start = function () {
                    console.log('m1 started');

                };
            }

            return Module1;
        });

    //module2.js
    define(['lib/underscore', 'modules/module3'],
        function (_, Module3) {
            function Module2() {
                this.start = function () {
                    console.log('m2 started..starting m3 from m2');

                    var module3 = new Module3();
                    module3.start();

                };
            }

            return Module2;
        });

    //module3
    define([
        'underscore'],
        function (_) {
            function Module3() {
                this.start = function () {
                    console.log('m3 started');
                };
            }

            return Module3;
        });

    //index.html

    <!DOCTYPE html>
    <html>
    <head>
        <link href="css/style.css" rel="stylesheet" type="text/css">
        <title></title>
    </head>

    <body>
    <div id="main"></div>
    <script data-main="scripts/main-built" src="scripts/lib/require.js"></script>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T21:21:48.827

我发现了我的问题。'main-built.js' 必须是 'main.js' 或在 main-built 中，模块名称需要从 'main' 更改为 'main-built'。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T21:24:48.807

如果您不能使模块名称（在我们的例子中是 portal/main）与文件名（portal/main.js）相同，这里还有两个想法。

*   从启动 define() 调用中完全删除模块名称。这使其成为文档的默认入口点。这里的问题是优化器对 " 和 ' 的使用并不一致，具体取决于使用的命令行参数。

*   添加类似 require(["startup module name"]) 作为构建文件的最后一行。这将在加载脚本并调用您喜欢的第一个模块时立即执行。事实证明，这很容易自动化到构建脚本中，并为我们解决了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-21T16:45:29.200

在 Thupten 的解决方案中，在 main-built.js 中自动执行此替换的一种方法是从命令行运行它：

后

```
node r.js -o build.js 
```

跑

```
sed -i -- 's/define("main/define("main-built/g' main/js/Main.min.js 
```

# c++ - 双返回 0

> ID：13711709
> 
> 赞同：0
> 
> 时间：2012-12-04T20:53:04.867
> 
> 标签：c++, double

> **可能重复：**
> [C编程部门](https://stackoverflow.com/questions/8906722/c-programming-division)

我正在尝试将值转换为 Mel 过滤器，但是，每次输出结果时，它始终为“0”，即使它是双精度值。它应该是一个浮点数吗？这是一篇关于等式的文章：[http ://en.wikipedia.org/wiki/Mel_scale](http://en.wikipedia.org/wiki/Mel_scale)

这是功能：

```
double MFCC::mel_filter(int val)
{
     double tmp;
     tmp = 2595 * log10(1 + val / 700);
     cout << tmp << endl;
     return tmp;
    }

    vector<double> MFCC::mel_frame(int size)
    {
    vector<double> mel_Frame;
    for(int i=1; (i < size); i++)
    {
          this->mel_filter(i);
    }

    return mel_Frame;
    } 
```

在main中，我将传递诸如.. (1, 2, 3, 4, 5, 6, 7 ......)之类的值

如果输入“1”，则等式为：

```
m = 2595 * log10(1 + 1 / 700) = 1.6 
```

有什么帮助或建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T20:55:14.200

你的问题在

```
log10(1 + val / 700) 
```

那是使用整数除法而不是实际除法。尝试

```
log10(1 + val / 700.0) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T20:55:14.883

的类型`val`是 int。所以表达式`val / 700`是用整数算术计算的。结果为零。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T20:55:36.967

当您使用整数文字时，将使用整数算术。这意味着任何小数都将四舍五入。将常量显式写为十进制数，将使用双精度算术：

```
tmp = 2595.0 * log10(1.0 + val / 700.0); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-05T01:43:47.890

尝试

```
log10(1 + val / (float) 700) 
```

# linq - DBContext 和导航属性

> ID：13711710
> 
> 赞同：0
> 
> 时间：2012-12-04T20:53:05.930
> 
> 标签：linq, entity-framework, entity-framework-4.1, dbcontext

好的，我被卡住了。我有一个模型，它有一个“USER”实体、一个“CLUB”实体和一个“MEMBERSHIP”实体。“MEMBERSHIP”实体是“USER”与“CLUB”的关联。一个用户可以有很多俱乐部，一个俱乐部可以有很多用户。

我不知道如何获取特定用户的俱乐部列表。

我只是找不到一个关于如何构建这个查询的好例子。

我似乎遇到了问题，因为导航属性是一个集合。

谁能指出我正确的方向，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:32:37.597

这取决于`Membership`表。如果表只是简单的关联，有UserId和ClubId，则`Membership`不会生成实体，应该这样查询：

```
var clubs = context.Users
                   .Where(u => u.Id == id)
                   .SelectMany(u => u.Clubs); 
```

如果关联不是那么简单，那么`Membership`将生成实体，您应该通过会员导航到俱乐部，如下所示：

```
var clubs = context.Users
                   .Where(u => u.Id == id)
                   .SelectMany(u => u.Memberships)
                   .Select(m => m.Club); 
```

# php - CakePHP - 另一个关系表中的 SUM 数据

> ID：13711716
> 
> 赞同：1
> 
> 时间：2012-12-04T20:53:35.167
> 
> 标签：php, mysql, cakephp

我不知道工作人员参加课程和集会的时间总和的结果。这是我的数据库：-

```
staffs
+---+-------+-----------+
| id| Name  | Department|
+---+-------+-----------+
| 1 | Joe   | HR        |
| 2 | Andra | Support   |
| 3 | Khan  | HR        |
| 4 | Toll  | HR        |
| 5 | Gosh  | Support   |
| 6 | Rama  | Support   |
+---+-------+-----------+

attendances
+---+---------+-----------+--------------+
|id | name_id | course_id | assembly_id  |
+---+---------+-----------+--------------+
| 1 |    1    |  101      |              |
| 2 |    1    |  102      |              |
| 3 |    1    |           | 501          |
| 4 |    2    |  102      |              |
| 5 |    3    |           | 502          |
| 6 |    3    |  103      |              |
| 7 |    4    |  101      |              |
| 8 |    4    |           | 501          |
| 9 |    4    |  102      |              |
+---+---------+-----------+--------------+    

courses
+-------+-----------+-------+
| id    | name      | hours |
+-------+-----------+-------+
| 101   | courses_1 | 8     |
| 102   | courses_2 | 6     |
| 103   | courses_3 | 9     |
+-------+-----------+-------+

assembly
+-------+---------------+-------+
| id    | name          | hours |
+-------+---------------+-------+
| 501   | assembly_1    | 2     |
| 502   | assembly_2    | 4     |
+-------+---------------+-------+ 
```

在“模型”>“出勤”中，我已经添加了一个关系：-

```
public $belongsTo = array('Staff','Course','Assembly'); 
```

在我的控制器中，我尝试编写以下代码：-

```
$view = $this->Staff->find('all',array(
'fields' => array('SUM(COALESCE(Course.hours,0))+SUM(COALESCE(Assembly.hours,0)) as ec_count'),'recursive'=>2));
$this->set('view', $view); 
```

但它会返回一个错误..（好像我在这里做错了）

如何在这种情况下编写代码，它将通过如下视图显示：-

```
+---+-------+-----------+------------+
| id| Name  | Attend    | Total Hour |
+---+-------+-----------+------------+
| 1 | Joe   | course_1  |      16    |
|   |       | course_2  |            |
|   |       | assembly_1|            |
| 2 | Andra | course_2  |       6    |
| 3 | Khan  | assembly_2|      13    |
|   |       | course_3  |            |
| 4 | Khan  | course_1  |      16    |
|   |       | assembly_1|            |
|   |       | course_2  |            |
| 5 | Gosh  | -         |      0     |
| 6 | Rama  | -         |      0     |
+---+-------+-----------+------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T01:11:08.270

除非您正在执行 Joins（请参阅[CakePHP Joins](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables)），否则您将无法获得这样的 SUM，因为 CakePHP 将实际运行单个查询，然后组合并返回数据。

我认为最好的办法是跟踪“员工”表中的总小时数`Staff.course_hours`和字段。`Staff.assembly_hours`您仍然可以将各个行保留在`Assembly.hours`and`Course.hours`中，然后在`afterSave()`（请参阅 CakePHP [afterSave](http://book.cakephp.org/2.0/en/models/callback-methods.html#aftersave)）回调（或类似的东西）上更新 Staff hours 字段。

然后，您可以只设置一个名为的虚拟字段（请参阅[CakePHP Virtual Fields](http://book.cakephp.org/2.0/en/models/virtual-fields.html)）`total_hours`，您可以根据需要对其进行排序、显示或使用。

或者，您可以构建联接并在单个（尽管稍微复杂一点）查询中完成。

# object - 返回带有指针的对象

> ID：13711717
> 
> 赞同：0
> 
> 时间：2012-12-04T20:53:47.040
> 
> 标签：object, pointers

我在 C++ 中创建了这个简单的对象：

```
class Array
{
    int Size;
    int * pArr;

public:
    explicit Array(int InSize = 0)
    {
        Size=InSize;
        if (Size) 
            pArr = new int[Size];
        else 
            pArr = NULL;
    }

    Array(const Array & InArray)
    {       
        Size=InArray.Size;
        if (Size)
            pArr=new int[Size];
        else
            pArr=NULL;
    }

    ~Array()
    {
        if (pArr)
        {
            delete []pArr;
            Size=0;
        }     
    }
}; 
```

我试图通过以下方式重载 + 运算符：

```
Array operator+(const Array &LOpArray,const Array &ROpArray)
{
    int MinSize=LOpArray.Size<ROpArray.Size ? LOpArray.Size : ROpArray.Size ;
    Array ResArray;

    if (LOpArray.Size<ROpArray.Size)
        ResArray=ROpArray;
    else
        ResArray=LOpArray;
    for (int i=0;i<MinSize;i++)
        ResArray.pArr[i]=LOpArray.pArr[i]+ROpArray.pArr[i];
    return(ResArray);
} 
```

赋值定义为：

```
Array& Array::operator=(const Array &ROpArray)
{
    if (pArr!=ROpArray.pArr)
    {          
        Size=ROpArray.Size;
        pArr=new int[Size];
        for (int i=0;i<Size;i++)
            pArr[i]=ROpArray.pArr[i];
    }
    return (*this);
} 
```

问题是当我像这样使用它时：

```
Array A1(20),A2(8),A4;

....//initializing pointer contents

A4=A1+A2; 
```

然后 A4 具有正确的值（即 size=20 和**新**的，非 NULL，int 指针），但所有指向的值都有垃圾值。调试表明，operator+ 函数中的值实际上是正确的，但是从 operator+ 函数返回时它们被删除

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:30:08.170

我可以看到几个问题：

1.  复制构造函数无法复制数据。
2.  `operator=`泄漏内存（这与您的问题无关，但值得修复）。

# jquery - Jquery 内联消息和验证

> ID：13711722
> 
> 赞同：1
> 
> 时间：2012-12-04T20:54:07.823
> 
> 标签：jquery, jquery-plugins, jquery-validate

是否可以在表单中为每个元素添加自定义消息，但是否内联？例如：

```
<input type="text" name="mybox" id="mybox" class="required" requiredmessage="This is my custom message." /> 
```

我知道你可以使用：

```
$('#myForm').validate(); 
```

设置自定义消息，但想知道我是否能够像规则一样内联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-30T03:37:15.933

您需要做的就是将自定义消息设置为标题属性。因此，例如，您可以执行以下操作：

```
<input type="text" class="required" title="This is my custom message." /> 
```

我希望这会有所帮助。

迈克尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-07T06:23:26.863

您可以执行以下操作：

```
<input type="text" name="mybox" id="mybox" class="required" data-msg-required="This is my custom message." /> 
```

# python - Qt：从另一个类和线程更新 UI（带有信号）

> ID：13711730
> 
> 赞同：2
> 
> 时间：2012-12-04T20:54:40.377
> 
> 标签：python, multithreading, qt, pyqt, pyqt4

我正在为 TCP 服务器开发一个简单的 UI，并且需要使用从服务器发送的日志消息来更新 UI，但问题是与该服务器的任何连接都在一个单独的线程中，所以我不能直接触摸UI 的小部件（因为它们不可重入）。

我已经阅读了一些关于这个主题的文章，并选择了看起来最优雅（也是最简单）的方法：信号。

我做了以下事情：

```
class Ui_Dialog(QtCore.QObject):

    def __init__(self):
        super(QtCore.QObject, self).__init__()

    def setupUi(self, Dialog):        
        Dialog.setObjectName(_fromUtf8("Dialog"))
        Dialog.resize(800, 580)
        self.serverLog = QtGui.QTextEdit(Dialog)
        self.serverLog.setGeometry(QtCore.QRect(0, 0, 800, 480))
        self.serverLog.setObjectName(_fromUtf8("serverLog"))
        #OTHER WIDGETS AND CODE DEFINED HERE

        self.server = None

        #SIGNALS
        self.clearLogButton.clicked.connect(self.serverLog.clear)
        self.stopButton.clicked.connect(self.connectServer)
        self.startButton.clicked.connect(self.connectServer)

    def connectServer(self):
        if (self.server is None):

            host = str(self.ipEdit.text())
            port = int(self.portEdit.text())

            try:
                self.server = server.MainServer((host, port), server.MyHTTPHandler)
                self.server.setup(self)

                self.printLog( "Hooray ! Server connected at {}:{}".format(host, port) )

                # Start a thread with the server -- that thread will then start one more thread for each request
                MainServer_thread = threading.Thread(target=self.server.serve_forever)
                MainServer_thread.daemon = True
                self.server.trigger.connect(QtCore.QObject(self.printLog))
                MainServer_thread.start()         

                self.server.trigger.connect(self.printLog)

            except errno.EADDRINUSE:
                self.printLog("#ERROR: Address already in use. Try a different port.")
            except errno.EADDRNOTAVAIL:
                self.printLog("#ERROR: Address not available.")

    def printLog(self, string):
        self.serverLog.append(_fromUtf8(string)) 
```

在服务器类中：

```
class MainServer(SocketServer.ThreadingMixIn, SocketServer.TCPServer):
    trigger = QtCore.pyqtSignal(str)

    def printLog(self, message):
        print message
        self.trigger.emit(message) 
```

但是当我运行我的应用程序时，我收到此消息错误：

`TypeError: pyqtSignal must be bound to a QObject, not 'instance'`

如果有任何其他（简单）方法可以从另一个线程（和类）更新 UI，或者您知道如何修复此错误，请告诉我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T22:00:05.460

差不多就是这样：

```
class Signals(QObject):
    trigger = pyqtSignal(str) 
```

使用它们`MainServer`：

```
class MainServer(SocketServer.ThreadingMixIn, SocketServer.TCPServer):
   def __init__(self, parent=None):
       self.signals = Signals()
       self.signals.trigger.emit("triggered") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:10:35.917

`QObject`刚刚使用我的服务器类中包含的中等对象（类）解决了它：

```
class Logger(QtCore.QObject):

    trigger = QtCore.pyqtSignal(str)
    def __init__(self):
        super(Logger,self).__init__()
    def send(self, string):
        self.trigger.emit(string) 
```

# html - 插入带有应该运行的脚本的 HTML

> ID：13711735
> 
> 赞同：11
> 
> 时间：2012-12-04T20:54:56.073
> 
> 标签：html, angularjs

该应用程序的一部分从需要显示为实时 HTML 的服务器获取 HTML。使用指令很容易做到这一点`ng-bind-html-unsafe="expression"`（至少在 Angular 1.0.2 中）。

但是，HTML 也有应该运行的 JavaScript，因为它定义了 HTML 中使用的函数，而使用指令似乎不会发生这种情况。

有一些 Angular 风格的方法可以做到这一点吗？还是我需要探索带外脚本加载技术？

（请不要讨论我是否应该足够信任服务器来运行它发送给我的 java-script。我确实信任服务器，我知道风险，这是一个非常专业的情况。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-08-21T16:50:59.047

我可以提出我的变体。首先你应该创建指令：

```
app.directive('html', [ function () {
  return {
    restrict: 'A',
    link: function (scope, element, attrs) {
      element.html(attrs.html);
    }
  }
}]); 
```

然后你可以在标签内使用它。

```
<div html="{{code}}"></div> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-30T04:45:57.570

你需要 jQuery（在 Angular 之前加载它）：

“我们研究了 jqlite 中支持的脚本标签，但是要获得跨浏览器支持需要做很多黑魔法。出于这个原因，我们决定现在我们只建议用户使用 jquery 和在这种特殊情况下是角度的” [——https://groups.google.com/d/msg/angular/H4haaMePJU0/5seG803by5kJ](https://groups.google.com/d/msg/angular/H4haaMePJU0/5seG803by5kJ)

另请参阅[AngularJS：如何在 ng-include 中制作角度加载脚本？](https://stackoverflow.com/questions/12197880/angularjs-how-to-make-angular-load-script-inside-ng-include)

# django - Django 密码更改查看表单

> ID：13711737
> 
> 赞同：6
> 
> 时间：2012-12-04T20:55:06.260
> 
> 标签：django, change-password

我还是 Django 的新手，并且对使用内置视图的工作方式有一些疑问。我注意到 djang 在 django.contrib.auth.views.password_change 带有一个内置的密码更改视图。此视图在模板的背景中显示管理站点，而我想提供自己的 css/模板，但保留该视图的形式和功能。我该怎么做？你能把一些东西传递给 urls.py

```
r'password_change/$', 'django.contrib.auth.views.password_change') 
```

像自定义模板？我不确定执行此操作的正确方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T21:06:23.067

`template_name`您可以通过设置参数来指定应该使用的模板：

```
(r'password_change/$', 'django.contrib.auth.views.password_change', {'template_name': 'path/to/password_reset.html'}) 
```

在您的模板中，确保您使用提供的`{{ form }}`模板变量，一切顺利。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T21:03:56.390

Django 将首先尝试从您的应用程序加载模板，然后回退。因此，要覆盖 contrib.auth 的模板，您只需要：

1.  `auth`在您的模板目录中创建一个名为的目录。
2.  创建一个与预期加载的内置视图同名的模板。
3.  没有第 3 步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-02T21:34:49.070

您还可以通过以下方式提供成功更改的 url：

```
url(r'^password/$', 'django.contrib.auth.views.password_change', {'post_change_redirect' : '/password-changed/','template_name': 'password.html'},), 
```

# c# - CreateParams 发生 - 窗口句柄异常

> ID：13711740
> 
> 赞同：1
> 
> 时间：2012-12-04T20:55:12.567
> 
> 标签：c#, winforms, datagridview, flicker, createparams

我在我自己的 Tabcontrol 上使用 CreateParams 来摆脱它的闪烁，同时调整大小和加载。这只是一个我实现 CreateParams 的空类。

```
protected override CreateParams CreateParams
{
    get
    {
        CreateParams cp= base.CreateParams;
        cp.ExStyle |= 0x02000000;  // Turn on WS_EX_COMPOSITED  
        return cp;
    }
} 
```

如果您有标签、文本框或按钮并且在 Windows 7 上运行良好。但如果您有面板、tablelayoutpanel、datagridview 和 Windows XP，那么它运行得不是很好。例如，datagridview 的列没有以正确的方式出现。

如果当前系统是Windows XP，我还发现有人发布了以下内容。但这发生在我的 XP 上，在启动窗口之前出现窗口句柄异常。仅使用 0x02000000 它正在加载，但正如我所写的那样，列并没有以正确的方式出现。

```
cp.ExStyle |= 0x02000000;  // Turn on WS_EX_COMPOSITED
cp.ExStyle |= 0x00080000;  // Turn on WS_EX_LAYERED (On XP System) 
```

有没有人知道有关闪烁和集成数据网格视图的任何解决方法，而不会出现此异常？

# razor - 有条件地在 webgrid 中显示图像

> ID：13711753
> 
> 赞同：1
> 
> 时间：2012-12-04T20:55:39.560
> 
> 标签：razor, asp.net-mvc-4, webgrid

nemesv 的代码[有条件地在 webgrid 中显示图像 - mvc 3](https://stackoverflow.com/questions/7866051/conditionally-display-an-image-in-webgrid-mvc-3)在 MVC3 中效果很好。

```
@grid.GetHtml(
  displayHeader: false,
  columns: grid.Columns(
           grid.Column(format: (item) =>
             {
               if (item.IsMainPreview == true)
             {
                return Html.Raw(string.Format("<text><img src=\"{0}\" alt=\"Image\"/></text>", Url.Content("~/Content/images/preview-photo.gif")));
             } 
```

在 MVC4 中，您不需要 Url.Content 来使用“~”。在没有 Url.Content 的情况下，我没有成功地让代码工作（它找不到图像）。我试过了

```
return Html.Raw(string.Format("<text><img src=\"{0}\" alt=\"Image\"/></text>", "~/Content/images/preview-photo.gif")); 
```

和

```
return Html.Raw(string.Format("<text><img src={0} alt=\"Image\"/></text>", "~/Content/images/preview-photo.gif")); 
```

其中。有谁知道如何在没有 URL.Content 的情况下让它在 MVC4 中工作？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T21:18:51.983

在这种情况下，没有`Url.Content`

因为`~`仅当您将其直接放在 Razor 模板中时，替换才有效（Razor 在解析您`.cshtml`并生成响应时会执行此替换）。

但是`grid.GetHtml`将返回渲染的 html，该 html 在没有任何 Razor 解析的情况下写入响应。

您可以使用以下代码片段对其进行测试（只需复制到 any 中`.cshtml`）：

```
<img src="~/Content/images/preview-photo.gif" />

@{
    var img =  "<img src=\"~/Content/images/preview-photo.gif\" />";
}

@Html.Raw(img) 
```

第一个图像将正确显示，因为 Razor 会解析它并进行`~`替换，但第二个不会，因为 html 只是作为字符串写入响应中并且不涉及解析。

# dependencies - 如何让 TeamCity 构建等到其所有工件依赖项都被重建？

> ID：13711754
> 
> 赞同：4
> 
> 时间：2012-12-04T20:55:40.057
> 
> 标签：dependencies, teamcity, teamcity-7.1

我有一个包含几种构建配置的 TeamCity 项目：

*   **应用程序包**，包含各种应用程序组件并从版本控制中的各种子树构建
*   **角色包**，将不同配置的应用包组合在一起（应用服务器角色有通用代码+前端，Web服务角色有通用代码+后端等）
*   **回归测试**，一系列构建步骤，在相应的测试服务器上部署角色包并运行冗长的 Selenium 测试套件

目标是频繁构建应用程序包，以便我们立即知道单元测试何时发生故障，根据需要构建角色包，以及在有新角色包要测试时尽可能频繁地运行回归测试。但是由于回归测试需要很长时间并且一次只能运行一个回归（它垄断了一组测试服务器），我们总是希望它在开始运行时*获取最新的可用包。*例如：

```
3:00 代码签入
3:01 构建应用程序包 (A1)
3:02 应用程序包 A1 完成
3:02 构建角色包（R1）
3:03 角色包 R1 完成

3:04 R1 开始回归

3:10 代码签入
3:11 构建应用程序包 (A2)
3:12 应用程序包 A2 完成
3:12 构建角色包（R2）
3:13 角色包 R2 完成

3:20 代码签入
3:21 构建应用程序包 (A3)
3:22 应用程序包 A3 完成
3:22 构建角色包（R3）
3:23 角色包 R3 完成

3:30 R1 回归完成
** R2 的回归永远不会运行 **
3:30 R3 开始回归

```

到目前为止，我已经使用工件依赖项和构建触发器实现了这一点：

*   应用程序包由计划触发器触发，仅限于具有 VCS 触发规则的相关源代码。他们没有 TeamCity 依赖项。
*   角色包由指向所有相关应用程序包的完成构建触发器触发。每个都有对相关应用程序包的工件依赖项（最后一次成功构建）。
*   回归测试由指向所有角色包的完成构建触发器触发，并限制为在单个代理上运行。它对所有角色包都有工件依赖项。

当只重建一个角色时，这可以很好地工作。但是，当多个角色同时更改时，回归测试会在*第一个*角色重建后立即开始运行，然后在该测试完成之前不会获取其余角色。我希望在重建*最后一个*更改的角色时开始运行回归。（注意：角色比代理多，并且回归在与包构建不同的代理上运行。）

快照依赖项听起来像是我需要的工具......但我的理解是它们强制所有依赖配置从同一个 VCS 修订版运行，并且我想避免在其代码未更改的情况下强制重建包。如果今天唯一的变化是在只影响角色 R 的包中，那么角色 S/T/U 不应该重建，它们的依赖关系也不应该重建。这可能吗？

* * *

编辑：我正在运行 TeamCity 7.1.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:03:15.827

我认为快照依赖`Do not run new build if there is a suitable one`和`Only use successful builds from suitable ones`工件依赖以及`build from the same chain`set 将做你想要的。这种配置应该意味着它认为没有必要重建，因为没有任何改变，请注意它仍然会触发构建，但它所做的只是评估没有任何事情可以继续构建链。

注意：您没有提及您正在运行哪个版本，但我相信这在 6.5 中无法正常工作，但在 7.1 中确实（更理想）工作。

# javascript - Chrome 对调度的 KeyboardEvents 做了什么？

> ID：13711755
> 
> 赞同：2
> 
> 时间：2012-12-04T20:55:46.323
> 
> 标签：javascript, google-chrome, dom-events, chromium, keyboard-events

作为我正在开发的测试框架的一部分，我需要能够在 Chrome 中模拟键盘事件。更具体地说，我需要填写 INPUT 元素的值。这在 Firefox 中相对容易做到，但由于某种原因，Chrome 只是忽略了我生成的事件。（好吧，并没有真正忽略它们，见下文）

我在这里审查了一些关于 SO 的问题，包括：

*   [Chrome中的Keydown Simulation正常触发但不是正确的键](https://stackoverflow.com/questions/10455626/keydown-simulation-in-chrome-fires-normally-but-not-the-correct-key/)
*   [是否可以以编程方式模拟按键事件？](https://stackoverflow.com/questions/596481/simulate-javascript-key-events)
*   [在 Chrome 上触发键盘事件](https://stackoverflow.com/questions/1897333/firing-a-keyboard-event-on-chrome)
*   [使用 JavaScript 在 Safari 中触发键盘事件](https://stackoverflow.com/questions/961532/firing-a-keyboard-event-in-javascript)

问题不在于事件没有被调度（它们是）或接收（它们是），而是 Chrome 没有将字符插入到表单元素中。

请在 JSBin 上查看[此示例](http://jsbin.com/iqoyed/4)（基于上面列表中的第一个 URL，其中包含对 which/keyCode == 0 问题的修复）

Chrome 对这些生成的 KeyboardEvents 做了什么，有没有办法说服它将模拟键注入表单元素？

笔记：

*   测试框架本质上与 Selenium 相似，需要模拟键盘和鼠标事件来代替用户交互。由于项目的性质，这个测试框架需要自定义构建，我目前无法使用 Selenium
*   潜在的解决方案不需要任何 3rd 方库，并且必须在 Chrome 23+ 中运行
*   目前我正在为按键事件添加一个监听器并手动注入字符。我想避免这种情况，因为我必须在测试时注入这个额外的代码。

# android - 在 Android 中使用 JWplayer 在 Phonegap 中进行流式视频播放

> ID：13711759
> 
> 赞同：4
> 
> 时间：2012-12-04T20:55:56.870
> 
> 标签：android, cordova, video, streaming, rtmp

我正在尝试使用 JWPlayer 作为解决 Android 不支持在 Phonegap 中的 Webview 中播放 HLS 的一种方式（或者至少我无法让它工作，只能使用 WebM 流和[https://github.com/上的视频插件macdonst/VideoPlayer](https://github.com/macdonst/VideoPlayer)，HLS 流只提供音频）

我知道用户需要安装闪存，但目前对我来说最重要的是让 RTMP 或 HLS (.m3u8) 显示在设备上（2.3、4.0 或 4.1，无论哪个有效！）

但是，在 android 中实现 JWplayer 时，我不断收到“加载播放器时出错：找不到可播放的源”错误。到目前为止，我只在模拟器中进行了测试。

代码没什么花哨的，在包含cordova JS之后的HTML文件中我所做的就是：

```
 <script type="text/javascript" src="jwplayer/jwplayer.js" ></script>
 <script type="text/javascript">jwplayer.key="b+mykey"</script>
 <div id="my-video"></div> 
 <script type="text/javascript">
        jwplayer('my-video').setup({
            flashplayer: "javascripts/lib/jwplayer/player.swf",      
                 streamer: "rtmp://myserveraddressgoeshere",
                 file: "corecctfile.goeshere-sdh",
                 provider:"rtmp",
                 autostart: 'true',
                 controlbar: "over",
                 width: '720',
                 height: '405'
         });</script> 
```

显然我有正确的路径，但出于客户隐私的原因，在这里将它们隐藏起来。

有谁知道为什么这不起作用？或者我怎样*才能*让 RTMP / HLS 流在 Android 设备上工作？如前所述，该应用程序是一个PhoneGap 应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T12:43:35.000

JW Player 不再支持 Android 上的 Flash，作为对 Adob​​e 也放弃 Android Flash 支持的回应。从 Android 2.3 开始，仅支持 HTML5（因此仅支持 MP4/WebM）。

HTTP Live Streaming 确实在 Android 中对 HTML5 的支持有限。它仅在 4.0+ 中播放，并且有一些严重的错误：无法识别显示纵横比，并且按需 HLS 流就像实时流一样（没有时间线；没有搜索）。

在 Android 上进行流式传输的最佳解决方案是为您的原生应用程序利用支持 HLS 的 SDK。有几家公司提供这样的 SDK（例如 devicedrm.com 或 nexstreaming.com）。我不知道这样的解决方案是否适用于 Phonegap。

# c# - 将文件上传到 Box.net

> ID：13711762
> 
> 赞同：3
> 
> 时间：2012-12-04T20:56:13.107
> 
> 标签：c#, box-api

我正在尝试使用 rest api 将文件上传到 box.net。但我每次都会收到 404 错误。这里请求标头（来自提琴手）。我哪里做错了？

```
 POST https://api.box.com/2.0/files/content HTTP/1.1
 Authorization: BoxAuth api_key={key}&auth_token={tokem}
 Content-Type: multipart/form-data; boundary="13afaf22-f210-464b-bcc3-3cd3e4ed1617"
 Host: api.box.com
 Content-Length: 166
 Expect: 100-continue

 --13afaf22-f210-464b-bcc3-3cd3e4ed1617
 Content-Disposition: form-data; filename=test.zip; folder_id=0
 {empty line - I don't know why it here} 
 {bytes starting here}
 --13afaf22-f210-464b-bcc3-3cd3e4ed1617-- 
```

注意我使用 c# 及其 HttpClient 类和 MultiPartFormDataContent 作为内容源。

**解决了：**

问题解决了。请求标头和正文应如下所示：

```
POST https://api.box.com/2.0/files/content HTTP/1.1
Authorization: BoxAuth api_key={key}&auth_token={token}
Content-Type: multipart/form-data; boundary="d174f29b-6def-47db-8519-3da38b21b398"
Host: api.box.com
Content-Length: 314
Expect: 100-continue

--d174f29b-6def-47db-8519-3da38b21b398
Content-Disposition: form-data; filename="hello.txt"; name="filename"
Content-Type: application/octet-stream

{Bytes}
--d174f29b-6def-47db-8519-3da38b21b398
Content-Disposition: form-data; name="folder_id"

0 
--d174f29b-6def-47db-8519-3da38b21b398-- 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T10:57:24.833

好的，如果有人感兴趣，这是将文件上传到 Box.com 的方法。

我正在使用.net 4.5 中的类。

```
 public async Task Upload(string authorization, string filename, string parentID)
    {
        HttpRequestMessage message = new HttpRequestMessage();
        message.Headers.Authorization = new System.Net.Http.Headers.AuthenticationHeaderValue("BoxAuth", authorization);

        MultipartFormDataContent content = new MultipartFormDataContent();
        StreamContent streamContent = null;

        streamContent = new StreamContent(new FileStream(localURI, FileMode.Open));

        streamContent.Headers.ContentDisposition = new ContentDispositionHeaderValue("form-data")
        {
            FileName = "\"" + filename + "\"",
            Name = "\"filename\""
        };
        streamContent.Headers.ContentType = new MediaTypeHeaderValue("application/octet-stream");
        content.Add(streamContent);

        ByteArrayContent byteContent = new ByteArrayContent(parentID.ToByteArray());
        byteContent.Headers.ContentDisposition = new ContentDispositionHeaderValue("form-data")
        {
            Name = "\"folder_id\""
        };

        content.Add(byteContent);
        message.Method = HttpMethod.Post;
        message.Content = content;

        message.RequestUri = new Uri("https://api.box.com/2.0/files/content");

        HttpResponseMessage response = null;

        Task<HttpResponseMessage> t = httpClient.SendAsync(message, cancelationToken);
        response = await t;

        if (t.IsCompleted)
        {
            if (!response.IsSuccessStatusCode)
            {
                if (response.Content != null)
                    Logger.Error(await response.Content.ReadAsStringAsync(), "Box Upload");
                else
                    Logger.Error("Error", "Box Upload");
            }
        }
    } 
```

# php - __construct 的可见性

> ID：13711764
> 
> 赞同：3
> 
> 时间：2012-12-04T20:56:14.867
> 
> 标签：php, constructor, visibility, private, protected

如果我有：

```
abstract class AbstractSingleton
{
    protected static $instance;

    public static function & getInstance()
    {
        if(null === static::$instance) static::$instance = new static();
        return static::$instance;
    }

    protected function __construct() { }
} 
```

扩展类的用户可以重新定义 的可见性`__construct`吗？

```
class Singleton extends AbstractSingleton
{
    public function __construct() { } // That would be a problem
} 
```

第二个问题，如果`__construct`在 AbstractSingleton 中将子类定义为私有，会发生什么情况？根本就没有构造函数吗？是否为类提供了一个新的默认构造函数，如果是，具有什么可见性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T21:08:00.463

好吧，对于初学者来说，您不需要`&`从您的方法中返回引用 ( )。从 PHP 5 开始，对象默认通过引用传递和返回。

对于您的实际问题，要让孩子访问父母的成员，其访问修饰符至少需要受到保护。这对构造函数也很重要。因此，在您的情况下，子类将能够执行以下操作：

```
abstract class AbstractSingleton
{
    protected __ construct() {}
}

class Singleton extends AbstractSingleton
{
    public __construct()
    {
        parent::__construct();

        // more code
    }
} 
```

解决这个问题的方法是使用`final`关键字。请参阅：[PHP 文档](http://php.net/manual/en/language.oop5.final.php)。

对于第二个问题，如果您将 AbstractSingleton 的构造函数设为私有并尝试在其子级上调用一个，则将使用默认的公共构造函数，就像往常一样。

编辑：话虽如此，单例几乎不是一个好主意，尤其是在 PHP 中。很有可能，您只需利用通过引用自动传递/返回的 PHP 对象即可解决您的问题。如果不是，依赖注入是一种对 OOP 更友好的替代方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T21:05:57.113

如果你使 __construct() **final**那么子类不能覆盖这个方法。[http://php.net/manual/en/language.oop5.final.php](http://php.net/manual/en/language.oop5.final.php)

在 PHP 中，您可以在子类中向上修改级别（您可以从父类中的私有变为子类中的公共），但不能反过来。

编辑 - 如果您将 __construct() 设为私有而不是在该类内部以外的任何地方，您都可以这样做`new Class()`。

# python - 更改 python windows 命令行

> ID：13711765
> 
> 赞同：1
> 
> 时间：2012-12-04T20:56:20.807
> 
> 标签：python

我尝试将 python 脚本保存为我想要运行的快捷方式。它打开它，然后立即关闭。

我知道它为什么这样做，它在 python3.2 中打开我的 windows 命令行脚本在 python 2.7 中

我的 PC 上需要这两个版本，我的问题是如何更改 cmd 默认值。

我试图在图标上“打开”快捷方式，它只是继续默认为 3.2。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-15T14:05:25.277

要更改“默认”，只需编辑您的`PATH`环境变量 ( `My Computer > Properties > Advanced > Environment Variables`) 以仅包含您想要作为默认的任何 Python 安装（例如`C:\Python32\`）。

**为了使两者都快速可用**，我建议您执行以下操作：

在你的机器上的某个地方创建一个目录，你会记住它（我的 C:\users\me\scripts）。将此目录放在`PATH`环境变量的前面。现在在这个目录中制作两个批处理脚本；打电话给他们`Python27.bat`和`Python32.bat`。它们应该看起来像这样（2.7 的示例）：

```
@ECHO OFF
setlocal
set PYTHONHOME=C:\Python27
set PYTHONPATH=%PYTHONHOME%\lib;%PYTHONPATH%
%PYTHONHOME%\python.exe %*
endlocal 
```

该脚本将`PYTHONHOME`and`PYTHONPATH`变量（本地，仅用于 Python 会话）设置为适合每个特定安装的任何变量。然后它启动正确版本的 Python（并将您可能指定的任何其他参数传递给它）。因此，要启动正确版本的 Python，请在命令提示符下键入`Python27`或`Python32`，然后您将启动适当的 Python，并且正确的环境已经到位。这也适用于启动程序：

```
# test\foo.py
import sys
print('version is %s' % sys.version) 
```

* * *

```
C:\>Python27 test\foo.py
version is 2.7.4 (default, Apr  6 2013, 19:54:46) [MSC v.1500 32 bit (Intel)]
C:\>python33 test\foo.py
version is 3.3.2 (v3.3.2:d047928ae3f6, May 16 2013, 00:03:43) [MSC v.1600 32 bit (Intel)] 
```

* * *

您还可以查看[virtualenv](https://pypi.python.org/pypi/virtualenv)，这是一个非常强大的工具，用于设置并行 Python 环境。它当然有一些很好的用途，但我个人觉得用于像你在这​​里做的简单事情很麻烦。

* * *

最后，如果您希望能够双击它，那就是完全不同的问题了。[您可以按照此处](http://windows.microsoft.com/en-us/windows7/Change-which-programs-Windows-uses-by-default)的指示更改文件类型关联（[此处](http://support.microsoft.com/kb/307859)为Windows 7 ），但我不知道有一种简单的方法可以像上面的命令行脚本那样使其模块化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:01:03.090

安装两个 python，并在 Windows 中更改路径，默认情况下，两个 Python 都将是`PATH=c:\python\python 2.7`和`PATH=c:\python\python 3.2`或类似的东西。什么，因为一旦找到第一个 python，windows 就会停止，你可以做的是调用一个`PATH=c:\python27\`，另一个`PATH=c:\python32\`这样你就可以同时运行它们。

# mongodb - 按月或天聚合的指标的 MongoDB 索引策略

> ID：13711767
> 
> 赞同：2
> 
> 时间：2012-12-04T20:56:24.960
> 
> 标签：mongodb

我很好奇是否有任何最佳实践来索引按月/天聚合的集合的指标。

**文档示例：**

```
{
  track: {
    2012: { # year
      1: { # month
        page_views: ...,
        clicks: ...,
        visits: ...
      },
      5: {
        page_views: ...,
        clicks: ...,
        visits: ...
      },
      ...
  }
} 
```

编辑：

由于正在进行关于如何改进文档的讨论以及将其拆分的一些建议（我已经考虑过）。我会更新为什么要求是这样的。该文档用于跟踪用户。随着时间的推移跟踪他们的浏览量、访问量等。用户在文档上有其他数据。例如，有一个 registeration_date。目标是能够说出类似“显示在 X 日期注册并且在 A 和 B 跟踪日期之间的页面浏览量超过 Z 的用户”之类的内容。我无法想出一个没有嵌入的模式来促进这一点。

**更新的文档示例：**

```
{
  registration_date: ...,
  email: ...,
  track: {
    2012: { # year
      1: { # month
        page_views: ...,
        clicks: ...,
        visits: ...
      },
      5: {
        page_views: ...,
        clicks: ...,
        visits: ...
      },
      ...
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T21:28:15.080

不幸的是，您的数据库模式对索引非常不友好。当您像这样嵌套对象时，您唯一的选择是为每个可能的年/月组合创建一个索引。也很难查询。例如，当您想按降序获得最好的三个月时，您将很难在数据库上执行此操作。

更好的选择是将年份和月份都放入对象中，将对象放入数组中（因为索引可用于数组查找），并在年份、月份和周围文档的唯一字段上创建唯一的复合索引.

```
{
    name: "Some Unique Name",
    tracking:    [
        {year: 2011, month: 11, page_views: 235, clicks: 132, visits: 87 },
        {year: 2011, month: 12, page_views: 176, clicks: 122, visits: 67 },
        {year: 2012, month: 1, page_views: 53, clicks: 32, visits: 17 },
        {year: 2012, month: 2, page_views: 89, clicks: 72, visits: 67 },
        {year: 2012, month: 3, page_views: 99, clicks: 82, visits: 72 }
    ]
}

ensureIndex({name:1, tracking.year:1, tracking.month:1}); 
```

当您需要频繁访问单个天、月或年的累积统计数据时，您可以将这些指标存储在单个子文档中：

```
 tracking_daily: [
        ...
        {year: 2012, month: 3, day: 1, ...  }, 
        {year: 2012, month: 3, day: 2, ...  }, 
        {year: 2012, month: 3, day: 3, ...  }, 
        {year: 2012, month: 3, day: 4, ...  }, 
        {year: 2012, month: 3, day: 5, ...  }, 
        {year: 2012, month: 3, day: 6, ...  }, 
        {year: 2012, month: 3, day: 7, ...  }, 
        {year: 2012, month: 3, day: 8, ...  }, 
        ...
    ],
    tracking_monthly: [
        ...
        {year: 2011, month: 11, ... },
        {year: 2011, month: 12, ... },
        {year: 2012, month: 1, ...  },
        {year: 2012, month: 2, ...  },
        {year: 2012, month: 3, ...  } 
        ...
    ],
    tracking_yearly:    [
        ...
        {year: 2011, ...  },
        {year: 2012, ...  }
    ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:53:30.143

再考虑一下，我可能会建议一个模式。

我个人根本不会将子文档用于度量，因为我可以想象在度量时间跨度上会有日期查询。

您还必须考虑从子文档中提取指标，特别是在数年内很容易导致客户端大量处理的子文档，至少需要聚合框架；即使这样，我也不确定它是否可以在足够快的时间内完成真正的分析查询，让您满意。

省略子文档的另一个原因是将来与根文档的大小兼容。我在上一段中谈到了这一点，指出随着时间的推移子文档可能会变得相当大。

所以一般来说，为了将来的兼容性和查询速度，我不会广泛使用子文档。

根据我自己的个人经验和对此类模式的许多讨论发现，通常一个好方法是将您的跟踪分布实际拆分为时间桶集合，这样您就可以收集每天、每月和每年的统计数据；共创建 3 个集合。

在这种情况下，我个人也会提供一个相对扁平的文档，以确保跨优化索引的线性范围查询，但是嵌套并不总是一个坏主意。让我举一个可用于日常统计的文档示例：

```
{
    hours: [
        {views: 2, unique: 1} // This is actually index 0 which denotes hour 0 of the day
    ],
    pageviews: 1000,
    unique_visitors: 4,
    visitors: 67,
    clicks: 5
} 
```

您将看到，为了便于查询，我如何将一天中的时间放入子文档中。这意味着要查询那几天的统计信息，我只需要进行一次往返，但是我不会失去真正的分析能力，因为我不太可能希望在复杂查询中使用两天的小时子文档。

所以是的，我个人会注意我的评论，并尝试对您的数据进行一些非规范化。您认为 MongoDB atm 过于规范化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T09:48:03.527

您确定在用户级别汇总跟踪数据真的值得吗？像这样处理时间戳怎么样：

```
{
 userId: 1234,
 registered: ISODate(""),
 visits: [ 
   ISODate(""), 
   ISODate(""),
   ISODate("")
 ],
 clicks: [
   ISODate(""),
   ISODate("")
 ]
} 
```

然后只是聚合框架以匹配注册日期，例如计算访问次数。

如果您有能力对 users 集合进行额外的查找，那么基于对象存储跟踪数据会更好：

```
visits_collection
{
  {userId: 1234, time: ISODate(""), registration: ISODate("")},
  {userId: 1234, time: ISODate(""), registration: ISODate("")},
  {userId: 1234, time: ISODate(""), registration: ISODate("")},
} 
```

对于再次查询，请使用聚合框架。如果您愿意，这也可以是一个有上限的集合，并在注册字段上有一个索引。它也更灵活，因为您可以稍后添加更多字段，例如访问持续时间。

# windows - 共享内存段中位置的原子比较和交换

> ID：13711768
> 
> 赞同：4
> 
> 时间：2012-12-04T20:56:25.800
> 
> 标签：windows, shared-memory, atomic, compare-and-swap

我想了解使用[InterlockedCompareExchange()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683560%28v=vs.85%29.aspx)更改使用[CreateFileMapping(INVALID_HANDLE_VALUE](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366537%28v=vs.85%29.aspx) ) 创建并在多个进程之间共享的段中的内存是否存在任何隐藏问题。

换句话说，进程能否依赖 CAS 语义来操作它们共享的内存块？我想他们可以，只是想确认一下。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:08:22.457

CAS 操作将与该内存完美配合。文件映射 API 和虚拟内存系统完成了将内存映射到多个进程的所有艰苦工作。当你接触到记忆时，你无法将它与任何其他记忆区分开来。

# c# - Gridview：无法删除边框

> ID：13711774
> 
> 赞同：1
> 
> 时间：2012-12-04T20:56:41.057
> 
> 标签：c#, asp.net

正如您在图像上看到的那样，我在 GridView 单元格中有一个 gridview。我正在尝试删除我认为是单词 has 和 next 单词下方的边界的 2 条水平线。

![在此处输入图像描述](../Images/2176d30f01ff39fa47a22e7b369abb02.png)

```
 foreach (TableCell tc in e.Row.Cells)
        {
            tc.Attributes["style"] = "border-bottom-style:none";
            tc.Attributes["style"] = "border-width:0px";
            tc.Attributes["style"] = "border-top-style:none";
        } 
```

但它不起作用。有什么帮助吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T21:16:44.450

将以下属性添加到您的 GridView

```
GridLines="None" 
```

这应该删除所有边框。

# asp.net - IIS7 上的 ASP.NET Web API - 未找到 404

> ID：13711775
> 
> 赞同：5
> 
> 时间：2012-12-04T20:56:56.687
> 
> 标签：asp.net, iis

我有一个简单的 web api 项目。当我使用 VS2010 下的发布功能在 Win 7 上的 IIS 7.5 上部署它时，它工作正常。但是当我将它部署到 Windows server 2008 上的 IIS 7 时（msinfo32 显示版本是 6.0.6002 服务包 2），对于在 IIS 7.5 上工作的相同 GET 请求，它返回 404.0 Not Found

```
Module IIS Web Core 
Notification MapRequestHandler 
Handler StaticFile 
Error Code 0x80070002 
```

我已经用谷歌搜索并做了所有我能做的建议，但没有一个对我有用。

知道如何解决吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:31:37.770

我会确保您在发出 GET 请求时使用正确的 url/位置，如果您从自己的项目中发出 GET 请求，那么如果您部署到另一个位置，它可能会发生变化。

如果您需要更具体的答案，请提供更多详细信息和代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:12:08.703

[我在运行 IIS 7.5 Microsoft .NET Framework 4.5](http://www.microsoft.com/en-us/download/details.aspx?id=30653)的 Web 服务器上缺少 .NET Framework 4.5

这两个答案对我有帮助，但就我而言，我也必须更改一些发布设置

[未找到 MVC 4 Web Api IIS7.5 HTTP 404 页面](https://stackoverflow.com/questions/9703090/mvc-4-web-api-iis7-5-http-404-page-not-found)

[ASP.NET Web API 仅在某些服务器上为 PUT 返回 404](https://stackoverflow.com/questions/10099270/asp-net-web-api-returns-404-for-put-only-on-some-servers)

我正在使用文件系统发布方法，我必须检查文件删除选项。在我的情况下，以前构建/发布的 Web 服务器上有一些文件导致了问题。

![在此处输入图像描述](../Images/841449733faa08dedea4e7ec9155f1dc.png)

最后，我在网站子文件夹中发布了该应用程序。该网址类似于 www.myApp.com/spa/ 所以我必须将 js 配置中 WebAPI 的路径更改为

www.myApp.com/spa/api/webApiController 而不是

www.myApp.com/api/webApiController

# python - Python/Mysql 俄语插入

> ID：13711785
> 
> 赞同：0
> 
> 时间：2012-12-04T20:57:33.617
> 
> 标签：python, mysql, cyrillic

`INSERT`尝试用俄语进行操作时遇到以下错误：

```
sql =   """SELECT provider FROM main_app_provider WHERE provider LIKE %s"""
cursor.execute(sql, args)

[ print statement ]
SELECT provider FROM main_app_provider WHERE provider LIKE Централ%
  ...
  File "/Library/Python/2.7/site-packages/MySQLdb/connections.py", line 202, in unicode_literal
return db.literal(u.encode(unicode_literal.charset))
UnicodeEncodeError: 'latin-1' codec can't encode characters 
in position 0-6: ordinal not in range(256) 
```

我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:11:02.580

MySQLdb 默认使用 latin-1，你必须设置你想要它使用的字符集。（见这个问题：[python encoding problem with mysqldb](https://stackoverflow.com/questions/7011715/python-encoding-problem-with-mysqldb)）

我在创建连接时这样做，例如

```
conn=MySQLdb.connect(hostname, username, password, database, charset='utf8') 
```

# c++ - 具有相同函数名的 C++ 继承

> ID：13711790
> 
> 赞同：5
> 
> 时间：2012-12-04T20:57:47.793
> 
> 标签：c++, inheritance

对不起，如果这个答案已经在这个网站上，但我已经看了一遍，找不到任何解决我的问题的方法。它与继承类中的同名函数有关。这是我的代码：

```
class A
{
public:
    int foo(int c) { c = c+1; return c; };
};

class B : public A
{
public:
    int foo(int c) { c = c-1; return c; };
};

int main()
{
    A array[2];
    array[0] = A item1;
    array[1] = B item2;
    for (int n=0;n<2;n++)
    {
        cout << array[n].foo(10) << endl;
    }
    return 0;
} 
```

我希望输出：

```
11    // foo() from A class  [10 + 1 = 11]
9     // foo() from B class  [10 - 1 = 9 ] 
```

但相反我得到

```
11
11 
```

通过测试，我发现 B 类中的 foo() 函数没有在 for 循环中被调用。相反，调用了 A 类中的 foo() 函数，即使是在数组 [1] 处的 B 对象上也是如此。

这是因为我将数组定义为仅包含 A 类的对象吗？如果是这样，有没有办法可以在该 for 循环中的第二个对象上调用 B 类中的 foo() 函数？

预先感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T21:06:39.123

我会忘记这`array[0] = A item1;`不是有效的 C++，只是假设您正在分配一个类型为的对象和一个类型`A`为`array[0]`的`B`对象`array[1]`。好的，所以你有两个问题。

第一个称为对象切片。当您将 type 的对象复制到 type`B`的对象时`A`，您只复制了`A`该对象的一部分。所以你所拥有的`array[1]`根本不是 a `B`，它只是一个`A`. 如果你想要多态（你这样做），那么你需要使用提供多态行为的指针或引用。这意味着让你的数组 an `A* array[2];`and do `array[0] = &item1; array[1] = &item2;`。

现在，当您在指向 a 的指针上调用函数时`A`，`B`它仍然只会调用 `A`s`foo`成员函数。为什么？*因为默认情况下，函数会在对象的静态类型*上查找。该静态类型是`A`. *如果你想告诉编译器在你的对象的动态类型*上查找你的函数——你的对象的*真实*类型，也就是`B`——你需要使那个成员函数成为虚拟的。所以在 中`A`，做：

```
virtual int foo(int c) { c = c+1; return c; }; 
```

现在，当您的编译器看到您正在调用`foo`an`A*`时，它会看到它是虚拟的并说“哦，好吧，我应该动态查找这个函数”，它会找到`B`.`foo`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T21:05:08.273

您正在将您的`B`实例分配给为某种`A`类型分配的空间。这导致“切片”。

因此，首先，您必须通过指针或引用允许*其他类型。*例如：

```
A* a = new B;
a->foo(10); 
```

您必须做的另一件事是提醒编译器`foo()`可以覆盖。在 C++ 中，将其声明为`virtual`函数：

```
virtual int foo(int c) { c = c+1; return c; }; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-04T20:59:45.830

您缺少`virtual`关键字。

```
 class A
 {
   virtual int foo(int c) { c = c+1; return c; };
 }; 
```

此外，为了避免[切片](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)，而不是`A`使用指向数组的指针数组`A`：

```
A* array[2];
array[0] = new A;
array[1] = new B;
for (size_t i=0; i<2; ++i)
    cout << array[i]->foo(10) << endl; 
```

或者，更好的是，使它成为指向 A ( `std::vector<A*>`) 的指针向量。

此外，根据经验，基类的析构函数也应该是虚拟的 - 对于这个特定示例来说这不是问题，但是如果派生类添加了新成员，它们应该在销毁时释放，使基类析构函数成为虚拟将确保层次结构中的所有析构函数都被调用。

另一件事，这个：

```
array[1] = B item2; 
```

不会编译。如果将数组声明为指向 A 的指针数组（或指向 A 的指针向量），您将能够：

```
array[1] = new B; 
```

# grails - Grails 2.1.1 发送邮件

> ID：13711791
> 
> 赞同：3
> 
> 时间：2012-12-04T20:57:55.473
> 
> 标签：grails, grails-plugin, grails-2.1

我安装了邮件插件：

```
grails install-plugin mail 
```

我根据插件添加了我的配置：

```
grails {
    mail {
      host = "smtp.gmail.com"
      port = 465
      username = "youraccount@gmail.com"
      password = "yourpassword"
      props = ["mail.smtp.auth":"true",
               "mail.smtp.socketFactory.port":"465",
               "mail.smtp.socketFactory.class":"javax.net.ssl.SSLSocketFactory",
               "mail.smtp.socketFactory.fallback":"false"]
    }
} 
```

我在我的 Bootstrap.groovy 中添加了一个 sendMail

```
try{
 sendMail {
  from "youraccount@gmail.com"
  to "youraccount@gmail.com"
  subject "Hello"
  body "Mail"
 }
}catch (Exception e){
 println e
} 
```

它什么也没给我！我尝试过处理 Config.groovy 中的位置和更多的东西 - 没有！它甚至没有给我一个例外。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T21:56:37.923

您需要注入邮件服务。在您的 Bootstrap.groovy 中：

```
class BootStrap 
{
    def mailService

    def init = { servletContext ->
        mailService.sendMail {
        }
    }
} 
```

# php - 使用 jQuery 函数从数据库中下载文件

> ID：13711792
> 
> 赞同：1
> 
> 时间：2012-12-04T20:58:02.053
> 
> 标签：php, jquery, mysql

我想从数据库下载一个文件。在 download.php 页面中，我已经完成了所需的一切，如果我`header("Location: ../php/download.php?mid=3")`在任何页面中写入，它将正确下载文件号 3！但是当我在同一页面调用下面的函数时它不起作用！我不知道为什么！！
先感谢您！

```
 function download(mid) {
     window.alert("hi"); // this works
     $.get("../php/download.php?mid=3");
     return false;
   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T22:14:29.567

该 ajax 调用忽略了来自服务器的响应，实际上“什么都不做”。

你需要写类似的东西

```
$.get("../php/download.php?mid=3", function(response){
    // do something with the response
}); 
```

如果您真正想要的是让**用户**下载文件，我不明白为什么您需要 ajax，只要在 download.php 中正确设置标题（“content-disposition:附件”）

# php - PHP/iCal 预约回复目标

> ID：13711794
> 
> 赞同：0
> 
> 时间：2012-12-04T20:58:07.077
> 
> 标签：php, icalendar, reply

我找到了几个用 PHP 生成事件 ( `.ics`) 电子邮件的很棒的教程，比如[这里的这个。](http://www.terminally-incoherent.com/blog/2008/04/14/generate-outlook-calendar-events-with-php-and-icalendar/)

但是，我希望有某种方法可以将“回复目标”设置为 URL？我想避免设置回复电子邮件捕捉器，这似乎是它默认的工作方式。抱歉，我对服务器操作还很陌生。如果我可以得到一个 POST 甚至是一个唯一的 URL 来访问我的服务器，我可以将响应存储在我的数据库中。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:27:02.620

唯一可靠的方法是收听电子邮件。

如果 ITip 客户端连接到 CalDAV 服务器（具有 caldav 调度支持），则可以通过 HTTP 完成，但您不能指望这一点。

# html - 多个空格如何在 HTML 中显示，没有 pre、nbsp 或 white-space: pre？

> ID：13711797
> 
> 赞同：4
> 
> 时间：2012-12-04T20:58:10.197
> 
> 标签：html, css, text, tinymce, whitespace

我确信这不应该是可能的。不知何故，我的 HTML 标记中的段落中的多个空格没有折叠。它们**不是** `&nbsp;`，**不在**`<pre>`标签中，没有**设置**为`white-space: pre-wrap;`or`white-space: pre;`并且行为**不会**通过强制`style="white-space: normal;"`元素而改变。

我的理解是，这是保留空白的唯一三种方式，并且可以在 HTML 中显示两个或多个空格。

所以问题是：还有什么可能导致连续空格显示为多个空格？肯定还有别的东西——但在我知道它是什么之前我无法找到它，而且我找到的每个来源都只是在谈论`&nbsp;`，`<pre>`或者`white-space: pre-wrap;``white-space: pre;`

**关键编辑：**使用 Firebug，我尝试删除一些有问题的空格并再次输入。当从键盘删除并重新输入时，空格的行为正常 - 浏览器中没有意外的空格。因此，它*必须*是某个字符在视图源、文本编辑器等中显示为纯空格，但实际上行为类似于`&nbsp;`. 它可能是什么，至关重要的是，我如何识别它以将其删除？违规输入的原始来源是所见即所得的编辑器 TinyMCE，所以我添加了那个标签......

* * *

**更多详细信息：**我有一些包含包含多个空格的段落文本的 HTML，如下所示（在 ...s 之间是直接从 Firefox 视图源复制的）：

```
<p> blah blah.... nothing  more  than  a ... blah blah </p> 
```

如您所见，**这些是常规空格，而不是** `&nbsp;`. 该文档在`&nbsp;`其他地方，它们在视图源中显示为这样，因此它们不会`&nbsp;`以某种方式伪装成源中的正常空间。

此外，**CSS*未*设置为** `white-space: pre;`或类似：

*   Firebug 的“计算”面板没有列出与空格相关的规则。
*   在段落上强制 a`white-space: normal;`对空格没有影响。该规则确实显示在 Firebug 'Computed' 面板中，因此它正在应用。
*   应用于`white-space: pre-wrap;`段落会导致其他更改，但不会更改这些多个顺序空间。例如，它会在选定文本段落中的每个换行符的末尾显示一个额外的空格。所以它绝对不会以某种方式被悄悄地设置为`white-space: pre-wrap;`

**文档中没有** `<pre>` **标签**，任何地方。在`<pre`源码中查找什么也没找到。

因此，它应该在浏览器中显示，每个单词之间有一个空格。它没有。它显示多个空格，就好像它是`<pre>`or`&nbsp;`或 `white-space: pre;`。但这些都不是。

*一定*有其他方法可以获得 `white-space: pre;`我不知道的类似效果。还有哪些其他方法可以预先格式化空格并阻止多个空格折叠？这可能是什么原因造成的。

* * *

一些背景说明：

*   **在哪些浏览器中看到？**Firefox 16.0.2、谷歌浏览器 23.0.1271.95 m (Windows)
*   **如果您不希望它可见，为什么在标记中有双倍空格？**我正在为 CMS 进行前端/设计工作，用户将通过 TinyMCE 所见即所得（不可协商）从 Word 和 PDF 中输入文本。因此，标记将是混乱的。修复 CMS 文本格式化程序以清理空白和清除标记超出了本工作的范围。
*   **文档类型？** `<!DOCTYPE html PUBLIC "-//W3C//DTD HTML+RDFa 1.1//EN">`
*   **你确定有多个空格？**当然，您可以在浏览器前端的单词之间选择一个、两个，在某些情况下是三个空格。
*   **我可以看到所有的代码吗？**抱歉，这是一个预发布网站，不公开。随意询问特定的 CSS 规则、HTML 标签、加载的 javascript 内容等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T21:09:44.270

我猜你的源代码中违规的空格字符不是[SPACE (U+0020)](http://www.fileformat.info/info/unicode/char/0020/index.htm)，但实际上是[NO-BREAK SPACE (U+00A0)](http://www.fileformat.info/info/unicode/char/00a0/index.htm)。从视觉上看，它们看起来相同，但如果您在十六进制编辑器中查看源代码（显示文件中的各个字节），您会看到这些字符的不同编码。

**编辑 1**

这个 PHP 代码应该找到并用常规空格替换有问题的字符：

```
$strNoBreakSpace = mb_convert_encoding('&#x00A0;', 'UTF-8', 'HTML-ENTITIES');
$strNormalSpace  = mb_convert_encoding('&#x0020;', 'UTF-8', 'HTML-ENTITIES');

$strInput = str_replace( $strNoBreakSpace, $strNormalSpace, $strInput ); 
```

**编辑 2**

创建两个空格字符的更简单方法：

```
$strNoBreakSpace = json_decode('"\u00A0"');
$strNormalSpace  = json_decode('"\u0020"'); 
```

# java - Selenium WebDriver findelement卡住了java？

> ID：13711799
> 
> 赞同：1
> 
> 时间：2012-12-04T20:58:25.800
> 
> 标签：java, selenium, exception-handling, webdriver, selenium-webdriver

我正在使用 selenium webdriver 编写一个非常简单的测试用例。可以说我有

```
@Test
public void github_search() {
    this.webDriver.get("http://www.github.com");

    WebElement findBox = this.webDriver.findElement(By.id("qa"));

......
} 
```

在这个测试中，页面上没有 id 为“qa”的元素，在这种情况下，我排除了 findElement 方法来引发异常。但事实并非如此。硒实际上似乎被卡住了。我唯一能做的就是手动关闭浏览器。我想知道如何处理这种情况，如果元素不存在，那么它会等待一段时间，最后它应该抛出一个异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:54:21.707

只需下载最新的 2.27 版本：

[https://code.google.com/p/selenium/downloads/list](https://code.google.com/p/selenium/downloads/list)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:17:03.250

使用 try catch 块并使用隐式等待。

# php - 查找打开了哪些文件以生成 PHP 页面

> ID：13711801
> 
> 赞同：0
> 
> 时间：2012-12-04T20:58:31.680
> 
> 标签：php, joomla

我正在使用令人讨厌的复杂 Joomla！网站并且必须在代码级别对布局进行一些自定义。

我的问题是找到要编辑的文件。

那么，给定某个页面，我可以记录在解析过程中打开的文件列表吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T21:02:37.810

多田，这里是：[http ://de1.php.net/get+included+files](http://de1.php.net/get+included+files) `get_included_files()`

文档中关于仅获取直接包含的文件的注释是错误的。无论您在哪里调用该函数，您总是会在执行点之前获得所有文件。

```
fileB.php
<?php
include 'fileB.php';

fileB.php
<?php
include 'fileC.php

fileC.php
<?php
var_dump(get_included_files()); 
```

输出：

```
array(3) {
  [0] =>
  string(18) "/path/to/fileA.php"
  [1] =>
  string(18) "/path/to/fileB.php"
  [2] =>
  string(18) "/path/to/fileC.php"
} 
```

因此，如果您想知道所有文件，最好将它们放在最先调用的文件的末尾，例如您通常的`index.php`.

# python - Python：np.loadtxt，读取多个文件

> ID：13711803
> 
> 赞同：2
> 
> 时间：2012-12-04T20:58:42.243
> 
> 标签：python, numpy

我已经设法让 loadtxt 读取单个文件，但现在我希望它从我拥有的 .list 文件中读取一堆文件。我尝试将其放入 for 循环中，但似乎无法使其正常工作。有人可以帮忙吗？

`[row1, row2, row3] = np.loadtxt("data.fits",unpack=True,skiprows=1)`

我想要类似的东西

```
for i in range(0,len(array)):
   [row1, row2, row3] = np.loadtxt("list.list[i]",unpack=True,skiprows=1)
   DO THINGS 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T21:05:49.150

```
for i in range(len(array)):
   [row1, row2, row3] = np.loadtxt(list.list[i],unpack=True,skiprows=1) 
```

此外：

```
filelist=['file1','file2']
for file in filelist:
    [row1, row2, row3] = np.loadtxt(file,unpack=True,skiprows=1)
    #Do Stuff 
```

我相信引号在惹你生气。此外，您不需要范围内的 0。

如果这不起作用，您可以粘贴 list.list 和数组吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:11:24.543

```
import fileinput
data = fileinput.input(['file1.txt', 'file2.txt', 'file3.txt']) 
```

然后用那个...

# windows-phone-7 - Windows Phone 异常弹出窗口

> ID：13711810
> 
> 赞同：0
> 
> 时间：2012-12-04T20:59:13.520
> 
> 标签：windows-phone-7, exception, popup

您好我想显示弹出窗口警告互联网连接不可用，但我不知道如何在屏幕上弹出一个简单的弹出窗口（如文本块），然后在确定后关闭应用程序。

```
 void wc_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e) {
        SyndicationFeed feed;
        try {
            using (XmlReader reader = XmlReader.Create(e.Result)) {
                feed = SyndicationFeed.Load(reader);
                lista.ItemsSource = feed.Items;
            }
        } catch (WebException we) { POP IT HERE then close the app;}
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:07:33.863

你应该使用这个：

```
MessageBox.Show(we.Message); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:04:32.170

采用

```
MessageBox.Show("you text"); 
```

# ruby - 用 Espresso 喷溅参数

> ID：13711811
> 
> 赞同：3
> 
> 时间：2012-12-04T20:59:20.333
> 
> 标签：ruby

使用 Sinatra，我可以使用以下方法将多个“未知”参数传递给路由：

```
get '/say/*/to/*' do
  # matches /say/hello/to/world
  params[:splat] # => ["hello", "world"]
end 
```

如何在 Espresso 中做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T21:44:02.223

Espresso 中的路由是常规的 Ruby 方法。

因此，如果该方法在 Ruby 中有效，那么该路线将在 Espresso 中有效。

Ruby 免费提供您想要实现的目标。

只需使用预定义的参数定义一个 Ruby 方法：

```
require 'e'

class App < E
  map '/'

  def say greeting = :hello, vertor = :to, subject = :world
    "say #{greeting} #{vertor} #{subject}"
  end
end

# some testing
require 'sonar' # same as rack-test but a bit better
include Sonar

app App # letting Sonar know that app to test

puts get('/say').body
# => say hello to world

puts get('/say/Hi').body
# => say Hi to world

puts get('/say/Hi/from').body
# => say Hi from world

puts get('/say/Hello/from/Espresso').body
# => say Hello from Espresso

puts get('/say/Goodbye/to/Sinatra').body
# => say Goodbye to Sinatra 
```

### [工作演示](http://cibox.org/slivu/stackoverflow?lang=ruby&file=splat-params-with-espresso.rb&run=true)

# c# - UI的并行生成

> ID：13711812
> 
> 赞同：3
> 
> 时间：2012-12-04T20:59:20.670
> 
> 标签：c#, wpf, xaml, parallel-processing, task-parallel-library

我们有一个 WPF 应用程序，它有一个 ListBox 和一个带缓存的 VirtualizingStackPanel。不是因为它有大量元素（通常少于 20 个，但在极端情况下可能多达 100 个或更多），而是因为元素需要时间来生成。这些元素实际上是 UIElement 对象。所以应用程序需要动态生成 UIElements。

问题是，即使虚拟化似乎可以工作，应用程序的响应速度仍然很慢，这是一个“噪音”最小的概念验证解决方案。

所以我们认为，由于主要问题是我们动态生成复杂的 UIElement 对象，我们需要并行执行，即离线。但是我们得到一个错误，代码需要在 STA 线程上运行：

> 调用线程必须是 STA，因为许多 UI 组件都需要这个。

这是否意味着我们不能在 WPF 主 UI 线程以外的线程上生成 UI（UIElement 对象）？

这是我们的概念验证解决方案中的相关代码片段：

```
public class Person : ObservableBase
{
    // ...

    UIElement _UI;
    public UIElement UI
    {
        get
        {
            if (_UI == null)
            {
                ParallelGenerateUI();
            }
            return _UI;
        }
    }

    private void ParallelGenerateUI()
    {
        var scheduler = TaskScheduler.FromCurrentSynchronizationContext();

        Task.Factory.StartNew(() => GenerateUI())
        .ContinueWith(t =>
        {
            _UI = t.Result;
            RaisePropertyChanged("UI");
        }, scheduler);
    }

    private UIElement GenerateUI()
    {
        var tb = new TextBlock();
        tb.Width = 800.0;
        tb.TextWrapping = TextWrapping.Wrap;
        var n = rnd.Next(10, 5000);
        for (int i = 0; i < n; i++)
        {
            tb.Inlines.Add(new Run("A line of text. "));
        }
        return tb;
    }

    // ...
} 
```

这是 XAML 的相关部分：

```
<DataTemplate x:Key="PersonDataTemplate" DataType="{x:Type local:Person}">
    <Grid>
        <Border Margin="4" BorderBrush="Black" BorderThickness="1" MinHeight="40" CornerRadius="3" Padding="3">

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <!--<RowDefinition />-->
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <TextBlock Text="Name : " Grid.Row="0" FontWeight="Bold" HorizontalAlignment="Right" />
                <TextBlock Grid.Column="1" Grid.Row="0" Text="{Binding Name}" />
                <TextBlock Text=" - Age : " Grid.Column="2" Grid.Row="0" FontWeight="Bold"
                        HorizontalAlignment="Right" />
                <TextBlock Grid.Column="3" Grid.Row="0" Text="{Binding Age}" />
                <ContentControl Grid.Column="4" Grid.Row="0" Content="{Binding Path=UI}" />

            </Grid>
        </Border>
    </Grid>
</DataTemplate> 
```

如您所见，我们将数据绑定到 UIElement 类型的属性 UI。

```
<ListBox x:Name="listbox" ItemsSource="{Binding Persons}" Background="LightBlue"
    ItemTemplate="{StaticResource PersonDataTemplate}"
    ItemContainerStyle="{StaticResource ListBoxItemStyle}" 
    VirtualizingPanel.IsVirtualizing="True"
    VirtualizingPanel.IsVirtualizingWhenGrouping="True" 
    VirtualizingStackPanel.ScrollUnit="Pixel"  
    VirtualizingStackPanel.CacheLength="10,10"
    VirtualizingStackPanel.CacheLengthUnit="Item"
>
    <ListBox.GroupStyle>
        <GroupStyle HeaderTemplate="{StaticResource GroupHeaderTemplate}" />
    </ListBox.GroupStyle>

</ListBox> 
```

在结束语境中，我们的应用程序所做的是创建一个代码视图，其中列表是过程，这些过程再次包含结构化内容的混合（一方面是参数和局部变量，另一方面是语句和表达式。）

换句话说，我们的 UIElement 对象过于复杂，无法单独通过数据绑定来创建。

我们的另一个想法是在 XAML 中使用“异步”设置，因为它似乎可以创建“非阻塞 UI”，但我们无法实现这一点，因为我们得到了与上面相同的错误：

> 调用线程必须是 STA，因为许多 UI 组件都需要这个。

堆栈跟踪：

```
System.InvalidOperationException was unhandled by user code
  HResult=-2146233079
  Message=The calling thread must be STA, because many UI components require this.
  Source=PresentationCore
  StackTrace:
       at System.Windows.Input.InputManager..ctor()
       at System.Windows.Input.InputManager.GetCurrentInputManagerImpl()
       at System.Windows.Input.KeyboardNavigation..ctor()
       at System.Windows.FrameworkElement.FrameworkServices..ctor()
       at System.Windows.FrameworkElement.EnsureFrameworkServices()
       at System.Windows.FrameworkElement..ctor()
       at System.Windows.Controls.TextBlock..ctor()
       at WPF4._5_VirtualizingStackPanelNewFeatures.Person.GenerateUI() in c:\Users\Christian\Desktop\WPF4.5_VirtualizingStackPanelNewFeatures\WPF4.5_VirtualizingStackPanelNewFeatures\Person.cs:line 84
       at WPF4._5_VirtualizingStackPanelNewFeatures.Person.<ParallelGenerateUI>b__2() in c:\Users\Christian\Desktop\WPF4.5_VirtualizingStackPanelNewFeatures\WPF4.5_VirtualizingStackPanelNewFeatures\Person.cs:line 68
       at System.Threading.Tasks.Task`1.InnerInvoke()
       at System.Threading.Tasks.Task.Execute()
  InnerException: 
```

编辑：

1) 添加了更多 XAML。2) 添加了堆栈跟踪。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-22T08:51:19.683

我在正常的 c# 环境中遇到了同样的问题。我也尝试了很多东西。是不是提前计算控件的大小来调整父级的大小？不幸的是，我正在这样做。

您还可以创建一个动态嵌套您的孩子的控件。这样您就可以创建一种 UIElement 适配器。适配器在开始时创建，并具有创建 UIElements 的所有信息。适配器可以根据需要及时在 STA 线程上创建请求的子级。向上或向下滚动时，您可以在滚动方向上提前创建子项。这样，您可以从例如 5-10 个 UI 元素开始，然后通过向上滚动来计算。

我知道这不太好，如果框架内有一些技术提供类似的东西会更好，但我还没有找到它。

你也可以看看这两件事。一个帮助我控制响应。另一个仍然打开，因为您需要 .NET Framework 4.5：

1.  `SuspendLayout`并且`ResumeLayout`操作不是很好。你可以试试这个：

    ```
    /// <summary>
    /// An application sends the WM_SETREDRAW message to a window to allow changes in that 
    /// window to be redrawn or to prevent changes in that window from being redrawn.
    /// </summary>
    private const int WM_SETREDRAW = 11; 

    /// <summary>
    /// Suspends painting for the target control. Do NOT forget to call EndControlUpdate!!!
    /// </summary>
    /// <param name="control">visual control</param>
    public static void BeginControlUpdate(Control control)
    {
        Message msgSuspendUpdate = Message.Create(control.Handle, WM_SETREDRAW, IntPtr.Zero,
              IntPtr.Zero);

        NativeWindow window = NativeWindow.FromHandle(control.Handle);
        window.DefWndProc(ref msgSuspendUpdate);
    }

    /// <summary>
    /// Resumes painting for the target control. Intended to be called following a call to BeginControlUpdate()
    /// </summary>
    /// <param name="control">visual control</param>
    public static void EndControlUpdate(Control control)
    {
        // Create a C "true" boolean as an IntPtr
        IntPtr wparam = new IntPtr(1);
        Message msgResumeUpdate = Message.Create(control.Handle, WM_SETREDRAW, wparam,
              IntPtr.Zero);

        NativeWindow window = NativeWindow.FromHandle(control.Handle);
        window.DefWndProc(ref msgResumeUpdate);
        control.Invalidate();
        control.Refresh();
    } 
    ```

2.  `Dispatcher.Yield`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T21:06:30.583

您不能从不同的线程更改 UI 线程上的项目。如果您在 UI 线程上有一个委托来处理实际将项目添加到 UI，它应该可以工作。

编辑：

从[这里](https://stackoverflow.com/questions/1949789/using-synchronizationcontext-for-sending-events-back-to-the-ui-for-winforms-or-w)：

`SynchronizationContext`使用for UI 线程似乎存在更深层次的问题。

> `SynchronizationContext`与 COM+ 支持相关联，旨在跨线程。在 WPF 中，您不能拥有跨越多个线程的 Dispatcher，因此`SynchronizationContext`不能真正跨线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T21:06:00.617

你有没有尝试过：

```
 ItemsSource="{Binding Persons, IsAsync=True}" 
```

或者，如果您想在后面的代码中异步，`Dispatcher`可以提供帮助

```
private void ParallelGenerateUI()
{
    Dispatcher.BeginInvoke(DispatcherPriority.Background, (Action)delegate()
    {
       _UI = GenerateUI();
        RaisePropertyChanged("UI");
    });
} 
```

刚刚测试了你下面的代码，我没有收到任何错误：

```
public partial class MainWindow : Window 
{

    public MainWindow()
    {
        InitializeComponent();
        for (int i = 0; i < 10000; i++)
        {
            Persons.Add(new Person());
        }
    }

    private ObservableCollection<Person> myVar = new ObservableCollection<Person>();
    public ObservableCollection<Person> Persons
    {
        get { return myVar; }
        set { myVar= value; }
    }
}

  public class Person : INotifyPropertyChanged
{
    // ...

    UIElement _UI;
    public UIElement UI
    {
        get
        {
            if (_UI == null)
            {
                ParallelGenerateUI();
            }
            return _UI;
        }
    }

    private void ParallelGenerateUI()
    {
        Application.Current.Dispatcher.BeginInvoke(DispatcherPriority.Background, (Action)delegate()
        {

            _UI = GenerateUI();
            NotifyPropertyChanged("UI");
        });

    }

    private UIElement GenerateUI()
    {
        Random rnd = new Random();

        var tb = new TextBlock();
        tb.Width = 800.0;
        tb.TextWrapping = TextWrapping.Wrap;
        var n = rnd.Next(10, 5000);
        for (int i = 0; i < n; i++)
        {
            tb.Inlines.Add(new Run("A line of text. "));
        }
        return tb;
    }

    public event PropertyChangedEventHandler PropertyChanged;
    /// <summary>
    /// Notifies the property changed.
    /// </summary>
    /// <param name="info">The info.</param>
    public void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }
} 
```

但是我不知道`ObservableBase`在做什么

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T21:54:09.243

如果它只是一个单行模板，那么考虑 ListView GridView。

至于动态内容，而不是动态 UI 元素，它使用显示格式化内容（运行、超链接、表格）的单个 UI 元素。

考虑动态内容的 FlowDocument。

[流文档类](http://msdn.microsoft.com/en-us/library/system.windows.documents.flowdocument.aspx)

FlowDocument 可以在后台创建。
另请参阅优先级绑定。
[优先绑定类](http://msdn.microsoft.com/en-us/library/system.windows.data.prioritybinding.aspx)

然后您可以使用 FlowDocumentScrollViewer 或其他三个选项显示它。

我怀疑动态添加 UI 元素会破坏虚拟化，因为它不能重用 UI 元素。

# asp.net - 实体框架适用于本地服务器但不适用于远程

> ID：13711813
> 
> 赞同：5
> 
> 时间：2012-12-04T20:59:25.627
> 
> 标签：asp.net, entity-framework

好的，所以我有一个使用 ASP.net mvc 的网站，我遇到的问题是实体框架。我添加了所有引用并让它在我的本地机器上运行，但是当我发布它时，我收到以下错误。

System.InvalidOperationException：“System.Data.SqlClient”ADO.NET 的实体框架提供程序类型“System.Data.Entity.SqlServer.SqlProviderServices，EntityFramework.SqlServer，Version=6.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”无法加载提供程序。确保提供程序程序集可用于正在运行的应用程序。有关详细信息，请参阅[http://go.microsoft.com/fwlink/?LinkId=260882](http://go.microsoft.com/fwlink/?LinkId=260882)。

我仔细检查了我的参考资料，并将 EntityFramework.SqlServer 和 System.Data 都添加到我的项目中。我用来连接数据库并声明服务提供的连接字符串如下。

```
<connectionStrings>
<add name="[dataConnection]" connectionString="Data Source=[ip of host machine];Database=[name];UID=[user];pwd=*******;MultipleActiveResultSets=True;" providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

名称我们只是有数据库的名称，我的web.debug.config中也使用了这个

```
<connectionStrings>
<add name="[dataconnection]"
  connectionString="Data Source=.;Database=[name];UID=[user];pwd=*******;MultipleActiveResultSets=True;"
  xdt:Transform="SetAttributes" xdt:Locator="Match(name)"/>
  </connectionStrings> 
```

我对这整个事情都很陌生，只是把别人的代码交给了别人，所以我正在努力学习。这是我第一次遇到这个，所以任何方向都会受到赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T03:03:34.493

我在集成测试程序集中遇到了同样的问题（我为此使用了 ms Visual Studio 单元测试框架），我已经通过将 EF 程序集添加到 .testsettings 文件中的部署项来解决它。

1.  我已经使用包管理器控制台安装了 EF 6 alpha，使用：Install-Package EntityFramework -Pre

这是我的 app.config

```
 <?xml version="1.0" encoding="utf-8"?>
    <configuration>
      <configSections>
        <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
      </configSections>
      <entityFramework>
        <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
      </entityFramework>
    </configuration> 
```

我的连接字符串（我在代码中设置它）：`server=.\SIN;initial catalog=IntegrationTests;User ID=user;Password=pass;MultipleActiveResultSets=true;`

3.  我查看了 EF 程序集引用属性，看看它们是否设置为“复制本地”= True。最后我检查了 TestResults/../Out 文件夹，发现那里没有 EntityFramework.SqlServer 程序集（SqlProviderServices 类驻留在其中）。

4.  所以我刚刚将两个 EF 6 程序集添加到我的部署项目中，现在一切正常 ![部署项目](../Images/c7df09246f83a6cb2cc73fe8aa25d6cf.png)

您可以尝试将 EntityFramework.SqlServer 程序集复制到您的 Web 服务器目录以查看它是否有效。

也许[这个链接](http://entityframework.codeplex.com/wikipage?title=Updating%20Applications%20to%20use%20EF6)会有所帮助

PS：

确保您没有对 System.Data.Entity 的引用，因为您将使用 GAC 中的一个。当您使用 Nuget 安装 EF 6 Alpha 程序集时，它们不会安装在 GAC 中。目标框架应该是 .NET 4.5。

对不起，我的英语不好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:07:28.933

一个问题：哪个 EF 版本？

检查您的 IIS 池 .NET 版本...它应该是指向您已发布项目的 .NET 版本的那个... EF 的程序集应该在 Windows 目录（AKA GAC）下的 .NET 框架文件夹中

# data-structures - 数据结构术语？

> ID：13711815
> 
> 赞同：-2
> 
> 时间：2012-12-04T20:59:40.637
> 
> 标签：data-structures, language-agnostic, terminology

我有很多关于数据结构词汇的问题。我确定我知道这些是什么/做什么，但我没有学到适合它们的术语，或者我忘记了它们，所以当有人在解释中使用它们时，我对它们的确切含义感到困惑。

在课堂上，我们正在处理哈希表，并且出现了术语“key”和“bucket”。我试着找出它们的意思，到目前为止我所理解的是，一个键是指哈希表中的一个元素，而一个桶是指哈希表中的某个位置。例如，HashTable[index] 指的是一个桶（哈希表中的“行”，如果你愿意的话）。如果哈希表中的那个点包含一个链（并且链表由互连的“块”组成），那么一个键将是该链中的单个“块”。那是对的吗？（如您所知，我也忘记了链表中“块”的术语）

在另一个主题上，我们也在今年早些时候处理摊销翻倍，我不知道“摊销分析”指的是什么。

我知道其中一些问题可能看起来很愚蠢，但我想让我的术语正确。（当有人在解释某事时使用不正确的术语时，我无法强调这是多么令人沮丧。就像我的 Calc 教授将“做点积”称为“与向量结婚”时一样）

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T21:02:35.400

这实际上不是 C++ 术语。C++ 有一种叫做 an 的东西`unordered_map`，它提供类似哈希表的功能，但“哈希表”、“桶”、“键”和其他术语是通用的计算机科学/编程数据结构和算法术语。

有关更多详细信息，请参阅[http://en.wikipedia.org/wiki/Hash_table](http://en.wikipedia.org/wiki/Hash_table)，并注意文章中几乎没有提到 C++。

# html - IE 字段集渲染

> ID：13711825
> 
> 赞同：1
> 
> 时间：2012-12-04T21:00:11.847
> 
> 标签：html, css, internet-explorer

我在 HTML 页面中有一个表单，在除 IE 之外的所有浏览器中都能正常工作。我知道它与 IE 渲染 fieldset 标记有关，并且我尝试使用伪 div 来破解它，但这没有用。有人遇到过这个或有解决方法吗？
这是一个小提琴： http: [//jsfiddle.net/G9NSx/&](http://jsfiddle.net/G9NSx/) 这里是代码：

```
 <form>
                    <fieldset>
                    <ol>
                        <li>
                            <label for="name">Name<em> *</em></label>
                            <input id="name" />
                        </li>
                        <li>
                            <label for="company">Company Name</label>
                            <input id="company" />
                        </li>
                        <li>
                            <label for="address">Address</label>
                            <input id="address" />
                        </li>
                        <li>
                            <label for="city">City</label>
                            <input id="city" />
                        </li>
                        <li>
                            <label for="state">State/Providence</label>
                            <input id="state" />
                        </li>
                        <li>
                            <label for="country">Country</label>
                            <input id="country" />
                        </li>
                        <li>
                            <label for="phone">Phone<em> *</em></label>
                            <input id="phone" />
                        </li>
                        <li>
                            <label for="fax">Fax</label>
                            <input id="fax" />
                        </li>
                        <li>
                            <label for="email">Email</label>
                            <input id="email" />
                        </li>
                        <li>
                            <fieldset class="regarding">
                                <legend>Regarding:<em> *</em></legend>
                                    <label><input type="radio" name="regarding" /> Capabilities</label>
                                    <label><input type="radio" name="regarding" /> Testing Information</label>
                                    <label><input type="radio" name="regarding" /> Business Relations</label>
                                    <label><input type="radio" name="regarding" /> Other</label>
                            </fieldset>
                        </li>
                        <li>
                            <label for="add-info">Additional Info.</label><br />
                            <textarea name="add-info"></TEXTAREA>
                        </li>
                    </ol>
                        <input type="submit" value="Submit"> <input type="reset" value="Reset"/><br />
                        <br />
                        <span class="bold">Required Fields<em> *</em></span>
                    </fieldset>
            </form> 
```

CSS：

```
form {
    border: 1px solid #0066FF;
    /*background-image: url(../images/form-bg.jpg);*/
    background-color: #FFF;
}

form fieldset {
    margin: 10px;
    padding: 20px;
}

form legend {
    padding: 0 2px;
    font-weight: bold;
}

form label {
    display: inline-block;
    line-height: 1.8;
    vertical-align: top;
}

form fieldset ol {
    margin: 0;
    padding: 0;
}

form fieldset li {
    list-style: none;
    padding: 5px;
    margin: 0;
}

form fieldset li textarea {
    min-width: 300px;
    max-width: 500px;
    }

form fieldset fieldset {
    border: none;
    margin: 3px 0 0;
}

form fieldset fieldset legend {
    padding: 0 0 5px;
    font-weight: normal;
}

form fieldset fieldset label {
    display: block;
    width: auto;
}

form em {
    font-weight: bold;
    font-style: normal;
    color: #0066FF;
}

form label {
    width: 120px; /* Width of labels */
}

form fieldset fieldset label {
    margin-left: 123px; /* Width plus 3 (html space) */
}

form fieldset ol li fieldset.regarding {
    padding: 0px;
    } 
```

这是我在 IE9 中遇到的问题的屏幕截图 ![在此处输入图像描述](../Images/52f51a827c940b7081bc2820d3b6caec.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:57:25.613

这似乎是 IE 9 中的一个奇怪错误。要绕过它，请添加一个空`div`元素，即`<div></div>`在`form`元素之前。当您将表单放到一个前面有一些内容（如标题）的真实页面上时，问题可能会自动消失。

IE 时不时地对出现在文档开头的表单或出现在表单开头的元素做一些奇怪的事情。如果您检查 IE 9 上的页面（使用 F12），您会看到问题仅出现在“标准模式”（！）中，而不出现在 quirks（兼容性）模式中。样式设置在很大程度上丢失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:12:26.513

外部字段集的目的是什么？它缺少图例标签。你可以不用它（但需要重写你的 CSS）。根据我的经验，虽然嵌套字段集在 IE 中不是问题，但除非所有字段集都有图例，否则您不需要增加标记和样式复杂性。

下次你可以把你的代码放在小提琴中以获得更快、更准确的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T21:28:17.933

添加了这个CSS类，看看这是不是你想要实现的

```
fieldset, img, .regarding{
 border-width: 1px;
    border-style:solid;
    border-color:red;
} 
```

更新了小提琴[http://jsfiddle.net/9F2eB/](http://jsfiddle.net/9F2eB/)

我知道这不是理想的“高度优化”的写作方式，但如果这是您想要产生的预期效果，请接受并逃避它。

# ios - 如何访问 UITableViewCell 中的 UIButton 或 UILabel？

> ID：13711830
> 
> 赞同：0
> 
> 时间：2012-12-04T21:00:27.283
> 
> 标签：ios, uitableview

我有一个`UITableView`20 行。在每一行`UIButton`中，添加了两个 s，所以我总共有 40 个按钮。如何访问每个单元格中的每个按钮？所有这些`UIButton`都有两个`tag`s 1 和 2。

例如：我想编写一个方法来更改特定行中 2 个按钮的背景颜色：

```
-(void)changeColor:(int)row{
     //code here
} 
```

你有什么建议吗？

```
-(UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell = [tv dequeueReusableCellWithIdentifier:@"Cell"];
    if (cell == nil){
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                       reuseIdentifier:@"Cell"] autorelease];
        UIButton *button1=[[UIButton alloc] initWithFrame:CGRectMake(x1,y1,w1,h1)];
        UIButton *button2=[[UIButton alloc] initWithFrame:CGRectMake(x2,y2,w2,h2)];       
        [button1 setTag:1];
        [button2 setTag:2];
        [[cell contentView] addSubview:button0 ];
        [[cell contentView] addSubview:button1 ];
        [button0  release];
        [button1  release];        
    }
    UIButton *button1  = (UIButton *)[cell viewWithTag:1];
    UIButton *button2  = (UIButton *)[cell viewWithTag:2];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:18:26.683

你应该能够做到这一点：

```
-changeColor:(int)row
{
    NSIndexPath indexPath = [NSIndexPath indexPathForRow:row inSection:0]; // Assuming one section
    UITableViewCell *cell = [myTableView cellForRowAtIndexPath:indexPath];

    UIButton *button1 = (UIButton *)[[cell contentView] viewWithTag:1];
    UIButton *button2 = (UIButton *)[[cell contentView] viewWithTag:2];
} 
```

*某些语法可能是错误的。我手边没有 Xcode

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:22:44.170

如果您想更改按钮颜色以突出显示/关闭状态，我建议使用以下内容：

```
[yourButton addTarget:self action:@selector(goToView:) forControlEvents:UIControlEventTouchUpInside];
[yourButton addTarget:self action:@selector(changeColor:) forControlEvents:UIControlEventTouchDown];
[yourButton addTarget:self action:@selector(touchCancel:) forControlEvents:UIControlEventTouchDragExit];

-(void)buttonAction:(UIButton*)sender
{
    [self touchCancel:sender];
    /* DO SOME MORE ACTIONS */
}

-(void)changeColor:(UIButton*)sender
{
    sender.backgroundColor = [UIColor redColor];
}

-(void)touchCancel:(UIButton*)sender
{
    sender.backgroundColor = [UIColor clearColor];
} 
```

* * *

如果要使按钮具有不同的选定颜色，请创建一个包含所有选定状态的数组。然后在 cellForRowAtIndexPath 中使用数组检查按钮颜色是否需要不同的颜色。

当您想更改按钮颜色时，只需更改数组中的值并调用

```
[self.tableView reloadData]; 
```

确保在 if (cell == nil) 方法之外执行此操作，以便在重用单元格时也会调用它。

# python - matplotlib 中的非单调 x 范围

> ID：13711831
> 
> 赞同：2
> 
> 时间：2012-12-04T21:00:36.623
> 
> 标签：python, matplotlib

我想将图表显示为小数小时的函数，其中 x 轴从 24 小时跳到 0 小时。但是，绘制的数量应该跨越日期边界平滑地连接。我可以在 x 轴上使用单调增加的不同时间单位，但我想在 x 轴的整数刻度位置显示小时数，我该怎么做？

```
hours = [19,20.5,21.5,22.5,23.5,0.5,1.5,2.5,3,4]
list1 = [random.randint(1,10) for x in range(10)]
plt.plot(hours, list1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:29:45.527

我假设该`hours`列表是从更完整的日期结构中剔除时间的结果？

如果您转换日期`datetime`对象（包括日期信息，因此它们确实是单调的），您可以直接`list1`针对日期进行绘图。然后你可以

```
import datetime

d = datetime.datetime.now()
delta = datetime.timedelta(hours=1)
dates = [d]
for j in range(20):
    dates.append(dates[-1] + delta)

date_list = dates
list1 = rand(len(dates))
figure()
ax = gca()
ax.plot(date_list,list1)
ax.xaxis.set_major_locator(
    matplotlib.dates.HourLocator()
)
ax.xaxis.set_major_formatter(
    matplotlib.dates.DateFormatter('%H')
) 
```

[从这里](http://stefaanlippens.net/pylab_date_tick_control)改编

![代码结果](../Images/1b885835964aed4926213eb48f4c2dba.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T21:31:36.937

好吧，这很脏，现在我会尝试使用[另一个答案](https://stackoverflow.com/a/13712269/1258041)，但是（在`ipython --pylab`）：

```
In [1]: def monotonic_hours(h):
    hours = h[:]
    for i, _ in enumerate(h[1:], 1):
        while hours[i-1] > hours[i]:
            hours[i] += 24
    return hours
   ...: 

In [2]: %paste
hours = [19,20.5,21.5,22.5,23.5,0.5,1.5,2.5,3,4]
list1 = [random.randint(1,10) for x in range(10)]

## -- End pasted text --

In [3]: plot(monotonic_hours(hours), list1)
Out[3]: [<matplotlib.lines.Line2D at 0x3271810>]

In [4]: xticks(xticks()[0], [int(h%24) for h in xticks()[0]]) 
```

![在此处输入图像描述](../Images/8556b0636ee93359ff804d3619ba5879.png)

注意：如果默认值`xticks`位于整数位置，这是准确的，否则您可以执行类似的操作

```
ticks = sorted(set(int(round(t)) for t in xticks()[0]))
xticks(ticks, [h%24 for h in ticks]) 
```

注2：没有`ipython`你可以调用一切`plt`。

# git - Git 复制，与 git 块合并并保留文件历史记录

> ID：13711838
> 
> 赞同：0
> 
> 时间：2012-12-04T21:00:58.470
> 
> 标签：git, svn, copy, red5

全部，我们使用 git 进行源代码控制。

我有项目使用开源 RED5 项目，我从 red5 块下载了源代码。

[来自http://red5.googlecode.com/svn/java/server/trunk/red5-read-only](http://red5.googlecode.com/svn/java/server/trunk/)的 svn结帐

我们对源进行了本地更改。现在有一个新的主要 RED5 版本，已更新 200 多个文件。如何复制我们当前的 RED5 代码并保留 git 历史记录？这样我就可以自动合并 RED5 代码，只手动合并冲突之一。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:45:59.047

我会将所有源代码下载到另一个目录中，并在该目录中创建一个包含所有这些 200 多个文件更改的差异/补丁，例如`svn diff -r<LAST_CHECKOUT>:<NEW_CHECKOUT>`.

然后在您的 git 存储库中，我将应用该差异并处理所有冲突。然后像往常一样提交它。

如果您需要它，您可以创建一个脚本，为 svn 存储库中的每个提交创建一个差异。

# javascript - 这个 javascript 和 html 代码有什么问题

> ID：13711839
> 
> 赞同：-5
> 
> 时间：2012-12-04T21:00:59.057
> 
> 标签：javascript, html

我写了这个简短的 html 和 javascript 代码。[您可以在http://jsfiddle.net/a4Mz5/8/](http://jsfiddle.net/a4Mz5/8/)访问代码，但它似乎不起作用。我正在寻找单击提交时要填充的值。

```
<html>
<head> Simple page </head>
<body>    
    <form id="enrollment">
        <input type="button" value="submit" onclick="updateCost();">

        value = <input type="text" name="cost">
    </form>    

<script>
function updateCost(){
    document.enrollment.cost.value = formatCurrency(0.9946153813);
}
function formatCurrency(num) {
    if(isNaN(num)) return "$0.00";
    // ACCOUNTING RULES: ROUND DOWN IF LAST DIGIT IS 5 AND SECOND TO LAST DIGIT IS EVEN
    num = new String(parseFloat(num).toFixed(3));
    if(num.charAt(num.length-1) == '5' && parseInt(num.charAt(num.length-2)) % 2 == 0) {
    num = num.substring(0,num.length-1);
    }   
    var cents = Math.abs(Math.round((num * 100) % 100));
    if(cents < 10) {
        cents = "0" + cents;
    }    
    var n = ""; var count = 0; var neg = num < 0;
    num = Math.floor(Math.abs(num)).toString();
    for(var i = num.length - 1; i >= 0; i--) {
        if(count > 0 && count % 3 == 0) n = "," + n;
        n = num.charAt(i) + n;
        count++;
    }    
    return (neg ? "-" : "") + ("$" + n + "." + cents);
}
</script>
</body></html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:14:53.327

您需要做两件事：

1.  在“Choose Framework”下，选择“no wrap (head)”而不是“onLoad”。
2.  更改`<form id="enrollment">`为`<form name="enrollment">`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:09:44.843

我不能让它在 jsFiddle 中工作。一直显示错误`ReferenceError: updateCost is not defined`。

`onLoad`[编辑] 如果您更改为，以下答案在 jsFiddle中有效`no wrap (head)`

我把所有代码都放到了我电脑上的一个 HTML 文件中，把 javascript 放在了头部，一旦我改变它就可以工作了

```
document.enrollment.cost.value = 1221; 
```

到

```
document.forms.enrollment.cost.value = 1221; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T21:13:02.680

试试这个：

```
 <html>
    <head> 
    <title>Simple page</title>
    <script type='text/javascript'>
         function updateCost(){
            document.getElementsByName('cost')[0].value = 1221;
         }
     </script> 
    </head>
    <body>    
        <form id="enrollment">
            <input type="button" value="submit" onclick="updateCost();">

            value = <input type="text" name="cost">
        </form> 
```

# javascript - Javascript - 闭包 - 词法范围 - 如何在嵌套函数中包含循环变量数据？

> ID：13711841
> 
> 赞同：1
> 
> 时间：2012-12-04T21:01:06.393
> 
> 标签：javascript, closures, lexical-scope

> **可能重复：**
> [Javascript臭名昭著的循环问题？](https://stackoverflow.com/questions/1451009/javascript-infamous-loop-problem)

我有以下代码：

```
function test() {

   var columns = options.columns;

for (var i =0; i < columns.length; i++) {
    if (columns[i].type === "number") {
        var field = columns[i].field;
        columns[i].footerTemplate = function(data) { return buildFooter(data, field);     };
      }
  }
}

function buildFooter(data, field) {
   alert(field);
 } 
```

一个库函数调用 footerTemplate 函数（该函数又调用 buildFooter）。buildFooter 中的警报指出该字段始终是相同的值（在 for 测试循环中迭代的最后一个值。）如何使用适当的字段值调用 buildFooter（即

```
 columns[0].footerTemplate = function(data) { return buildFooter(data, columns[0].field);} 
```

和

```
 columns[1].footerTemplate = function(data) { return buildFooter(data, columns[1].field);} 
```

等等...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T21:10:33.957

Javascript 不在逻辑块（循环、ifs）内限定变量。该`field`变量在所有`footerTemplate`属性中共享。

您可以通过创建内联函数来创建一些范围来解决此问题：

```
for (var i =0; i < columns.length; i++) {
    if (columns[i].type === "number") {
      (function () {
          var field = columns[i].field;
          columns[i].footerTemplate = function(data) { 
            return buildFooter(data, field);
          };
      })();
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T21:06:07.187

尝试：

```
columns[i].footerTemplate = (function(field) {
    return function (data) {
        buildFooter(data, field);
    };
})(field); 
```

它立即执行一个函数，该函数返回一个具有正确绑定`field`变量的新函数。这绝对是循环问题的范围问题，因此使用立即调用的函数来创建新范围并使正确的变量可用。这绝对是[Javascript 臭名昭著的 Loop 问题的副本？](https://stackoverflow.com/questions/1451009/javascript-infamous-loop-problem)尽管

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T21:10:42.007

Javascript 是函数范围的语言，所以你的声明

```
field 
```

for 循环内的变量与您在 for 循环外声明的变量相同，您只是一遍又一遍地覆盖相同的变量，在每个循环中都没有为字段变量分配内存，它是被写入的同一个内存空间。

# javascript - 使用 jQuery，是否可以观察 DOM 元素并在每次对其进行操作时进行报告？

> ID：13711842
> 
> 赞同：2
> 
> 时间：2012-12-04T21:01:07.050
> 
> 标签：javascript, jquery, events

我正在一个包含令人困惑的异步效果链的站点上工作。通常，效果会在停止之前多次相互执行/撤消。我很难遵循意大利面条代码。

是否可以设置回调以在任何时候操作 DOM 元素时运行，以便我可以跟踪代码应用到它的效果链？

*编辑：我目前正在到处添加数十个 console.logs 并想要一种更清洁的方法。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:21:27.290

以下文章介绍了两种可能适用于您的情况的技术，Mutation Observers 和 Keyframes：

[http://www.backalleycoder.com/2012/08/06/css-selector-listeners/](http://www.backalleycoder.com/2012/08/06/css-selector-listeners/)

对于每种技术，文章都指向相关的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:06:39.120

不是没有`setInterval`。

您可以让应用效果的代码也记录更改的内容。

您可以使用数据属性执行此操作。

```
<div data-state="some state" ...

console.log(targetElement.getAttribute("data-state");
targetElement.setAttribute("data-state","changes");
MakeChanges(targetElement); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T22:01:48.600

一种方法是*连接*到核心 jQuery 函数并记录您想要的信息。这是我劫持的一些功能的一些非常粗略的代码，即隐藏和动画。

```
var log_for_functions = 'hide animate'.split(' '); 
$.each( log_for_functions , function(){ 
var function_name = this;
var original_function = $.fn[ original_function_name ]; // get a reference to old function name  

    $.fn[ function_name ] = function () {
        var r = original_function.apply(this, arguments); 
        console.log( function_name + ' called on element ', this );  
        return r;
    }

}); 
```

现在，如果您使用 jquery 隐藏元素，`$('#test').hide()`那么您将获得以下输出。

`hide called on element [context: #test, selector: "#test"]`

您可以更改它以满足您的需求，甚至可以连接到其他功能。

# php - 动态禁用选择框不适用于选择

> ID：13711846
> 
> 赞同：0
> 
> 时间：2012-12-04T21:01:31.393
> 
> 标签：php, jquery, html, forms, select

我正在尝试制作一个 html 选择框，它可以根据用户在不同选择框中输入的内容动态禁用和启用...当我只使用 html 时这工作正常，但我想为此使用 jQuery插件**选择**，它不工作......我需要做的主要事情是更新选择为禁用或启用基于`onchange`其他选择框。选择这可能吗？如何？非常感谢。

**下面是我的javascript：**

```
<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>PROCapture Marketing | My Dashboard</title>
<link rel="stylesheet" type="text/css" href="../Style Sheets/PCMBackOffice-Styles.css">
<link href="../Style Sheets/headermenuhome.css" rel="stylesheet"><script type="text/javascript" src="../Scripts/jQuery1.7.1.js"></script>
<script src="../Scripts/instantiatemenu.js"></script>
<script>
function displayleads(str)
{
var xmlhttp;
if (str=="")
  {
  document.getElementById("fromleadstransfer").innerHTML="<option value=''>Select Leads To Transfer...</option>";
  document.getElementById("fromleadstransfer").disabled=true;
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("fromleadstransfer").innerHTML=xmlhttp.responseText;
    if (document.getElementById("fromleadstransfer").value != "noleads") {
    document.getElementById("fromleadstransfer").disabled=false;
    } else {
    document.getElementById("fromleadstransfer").disabled=true;
    }
    }
  }
xmlhttp.open("GET","../Scripts/transferfromselect.php?system="+str,true);
xmlhttp.send();
}
</script>
<script>
function displayfolders(str2)
{
var xmlhttp;
if (str2=="")
  {
  document.getElementById("tofoldertransfer").innerHTML="<option value=''>Select Folder To Send Leads...</option>";
  document.getElementById("tofoldertransfer").disabled=true;
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("tofoldertransfer").innerHTML=xmlhttp.responseText;
    document.getElementById("tofoldertransfer").disabled=false;
    }
  }
xmlhttp.open("GET","../Scripts/transfertoselect.php?system="+str2,true);
xmlhttp.send();
}
</script>
<link rel="stylesheet" type="text/css" href="../chosen/chosen2.css">
<script src="../chosen/jquery.js"></script>
<script src="../chosen/chosen.jquery.js"></script>
<script>
jQuery(document).ready(function(){
  jQuery(".fromleadstransfer").chosen();
  jQuery(".fromsystemtransfer").chosen();
  jQuery(".tofoldertransfer").chosen();
  jQuery(".tosystemtransfer").chosen();
  jQuery(".operationselect").chosen({disable_search_threshold: 3});
}); 
```

**这是表格：**

```
<form method="post" name="transferleadsform">
    <div class="transferleftside">
    <div class="primarytransfercontainer">
    <span class="primarytransferspan">From:</span>
    <br>
    <div class="transferinnercontainer1"><label>Operation: </label>
    <select id="operationselect" name="operationselect" class="operationselect">
    <option value="Copy" selected="selected">Copy</option>
    <option value="Move">Move</option>
    </select></div>
    <br>
    <div class="transferinnercontainer2"><label>System: </label>
    <select name="fromsystemtransfer" class="fromsystemtransfer" id="fromsystemtransfer" onChange="displayleads(this.value)">
    <option value="">Select A System...</option>
    <?php
        foreach($systems as $systemid) {  
        ?>
        <option value="<?php echo $systemid?>"><?php echo $systemid?></option>
        <?php
        }
        ?>
    </select></div>
    <br>
    <div class="transferinnercontainer2"><label>Leads: </label>
    <select name="fromleadstransfer" multiple disabled="disabled" class="fromleadstransfer" id="fromleadstransfer">
    <option value="">Select Leads To Transfer...</option>
    </select></div>
    </div>
    </div>
    <div class="transferrightside">
    <div class="primarytransfercontainer">
    <span class="primarytransferspan">To:</span>
    <br>
    <div class="transferinnercontainer1"><label>System: </label>
    <select id="tosystemtransfer" name="tosystemtransfer" class="tosystemtransfer" onChange="displayfolders(this.value)">
    <option value="">Select A System To Send Leads...</option>
    <?php
        foreach($systems as $systemid) {
        ?>
        <option value="<?php echo $systemid?>"><?php echo $systemid?></option>
        <?php
        }
        ?>
    </select></div>
    <br>
    <div class="transferinnercontainer3"><label>Folder: </label>
    <select id="tofoldertransfer" name="tofoldertransfer" disabled="disabled" class="tofoldertransfer">
    <option value="">Select Folder To Send Leads...</option>
    </select></div>
    <br>
    <input type="submit" class="transferbutton TransferSprites" value="<< Transfer Leads >>">
    </div>
    </div>
    <div class="longdivider TransferSprites">
    </div>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:07:17.173

禁用元素后，需要触发它的更新功能

```
$(element).prop('disabled', true).trigger("liszt:updated"); 
```

> 动态更新 Chosen 如果您需要更新选择字段中的选项并希望 Chosen 获取更改，则需要在该字段上触发“liszt:updated”事件。选择将根据更新的内容重新构建自己。

```
jQuery Version: $("#form_field").trigger("liszt:updated");
Prototype Version: Event.fire($("form_field"), "liszt:updated"); 
```

# javascript - Node.js：不能从另一个调用一个 Javascript 原型方法？

> ID：13711847
> 
> 赞同：3
> 
> 时间：2012-12-04T21:01:32.963
> 
> 标签：javascript, node.js, prototype

我正在尝试使用两个公共方法定义一个类。碰巧其中一种方法对实现另一种方法很有用，但在我的一生中，我无法在另一种方法的范围内识别该功能。我不知道这是否特定于 node.js，但如果它很重要，它在 node.js 下运行。

这是一个简短的玩具问题，它重现了我所看到的行为：

```
function Foo() {
    this.list = [];
}

Foo.prototype = {
    addSeveral: function(arr) { arr.forEach(function(v) { addOne(v)} ) },
    addOne: function(item) { list.push(item); }
}

f = new Foo();
f.addSeveral([1,2,3]); 
```

当我运行它时，它会爆炸：

```
[jasonb@localhost]$ node testobj.js

/home/jasonb/work/testobj.js:6
Foo.prototype.addSeveral = function(arr) { arr.forEach(function(v) { addOne(v)}
                                                                     ^
ReferenceError: addOne is not defined
    at /home/jasonb/work/entity_mapping/testobj.js:6:70 
```

我已经尝试了所有我能找到的关于如何将东西分配给类的原型的变体，结果都是一样的。如果我尝试打电话`this.addOne(v)`，它仍然会爆炸，但是`TypeError: Object #<Object> has no method 'addOne'`

我怎么能`addOne()`在里面打电话`addSeveral()`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T21:03:00.720

因为`forEach`为数组的每个元素调用一个回调函数，所以您正在丢失上下文（`this`不是`Foo`回调中的对象）。您可以关闭参考：

```
Foo.prototype = {
    addSeveral: function(arr) { var self=this; arr.forEach(function(v) { self.addOne(v)} ) },
    addOne: function(item) { this.list.push(item); }
} 
```

...或者只是使用常规循环，这将具有**更好的**性能 - 函数调用很昂贵。

```
addSeveral: function(arr) { for(var i = 0; i < arr.length; i++) this.addOne(arr[i]); }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:29:47.843

你可以传递`this`给`forEach`：

```
addSeveral: function (arr) {
  arr.forEach(function (v) {
    this.addOne(v)
  }, this)
} 
```

或者你可以使用绑定：

```
addSeveral: function (arr) {
  arr.forEach((function (v) {
    this.addOne(v)
  }).bind(this))
} 
```

但我会做的是`push.apply`：

```
addSeveral: function (arr) {
  [].push.apply(this.list, arr)
} 
```

# asp.net - 具有多个表的 Crystal 报表 - 空乘积或笛卡尔积

> ID：13711849
> 
> 赞同：0
> 
> 时间：2012-12-04T21:01:45.680
> 
> 标签：asp.net, visual-studio-2010, crystal-reports, ms-access-2007

我知道以前有人问过这个问题……有点。这就是我发帖的原因。基本上，我正在 Crystal 中构建一个报表，它依赖于保持这个简单，至少 3 个表。

表 A 通过唯一 ID 与表 B 内部连接。表 B 有一个子表，它可能有也可能没有与这个唯一 ID 相关的数据。

作为一般示例，表 A 是客户表，表 B 是产品表，子表包含产品编号。所有客户都有产品，但并非所有客户在子表中都有产品编号。我希望我已经解释得足够简单了。

我的问题是在 Crytal 和 Access 之间以及如何查询它。当我在 VB 中编写某些内容时，编写和执行查询并以所需的方式显示结果很容易。但是，我似乎无法直接查询...我要么最终得到一个以笛卡尔积作为结果集的报告，结果显示正常...除了即使只有少数记录，我最终也只有大约 30k 页。 .或者我最终得到一个空白数据集，因为子表没有与 B 对应的数据。

使用外部连接，我设法在一定程度上得到了我的结果，但在现实世界的报告中是不可接受的。我确定这个问题已经出现，但我似乎找不到任何合适的答案，老实说，我什至不确定作为 Crystal n00b 应该问什么问题。

我真正想要的是表 A 中的数据、表 B 和子表中的数据。虽然它们在逻辑上是链接的，并且可以与 ID 字段链接，但我认为没有必要，因为我正在为 ID 字段的报告获取参数值。一旦表格被过滤，除了将它们转储到报告中之外，不需要采取其他任何操作。

那么有人能指出我正确的方向吗？我可以在单独的部分中设置单个数据源（不相关）吗？我应该在我的数据库中构建一个查询和逻辑树来获得我需要的东西吗？我一直在绞尽脑汁，似乎无法找到正确的解决方案，任何和所有的建议都值得赞赏，如果我能澄清任何事情或回答任何问题，我会的。

提前致谢。

根据以下要求：

```
Section1

ID fname lname 
01 john smith 
Section2

ID notifiedDate notifiedTime 
01 10/10/2012   12:35PM 

S2childAdmin 
ID noteName 
01 jane doe 
```

该数据在逻辑上是相关的，可以在 DB 中关联。但是，只要将 ID 参数传递给每个表，就没有必要。查询与 Section2 连接的 Section1 内部工作正常。但是任何其他安排都会导致比要求的行数更多，并且我最终会得到一份重复多次的报告。我真正需要的是像 Section1 与 Section2 和 S2childAdmin 一起作为免费可用的表加入的东西。否则它会增加我的数据或导致一个空记录集（因为它可以返回 0 行）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:22:21.700

我认为这应该有助于为您指明正确的方向，尽管我从事 Crystal Reports 的繁重工作已经有 5 年左右的时间了。

一种选择可能是像您所说的那样使用外部联接加入所有内容，然后在表 A ID 上使用 Crystal Report“组”，其中包含基于表 B ID 的组。因此，您可以在实际的“详细信息”区域中放置表 C 的详细信息（如果有），然后使用表 A 和表 B 的组页眉/页脚来显示特定于这些对象的数据。

另一种可能的解决方案可能无法满足您的要求，但可能会让您以另一种方式思考，即创建您的主报告并在其中显示表 A 中的字段。然后在这些字段下方包含一个子报告并传入唯一的表 A 中的 ID。然后，您将在子报表中进行查询，查找具有该表 A.ID 值的所有表 B 记录并显示它们的详细信息。

在这一点上，您遇到了 Crystal Reports 的一个弱点（至少在我使用的上一个版本中），您不能在子报表中包含子报表。

# ruby - Ruby 对象名称到字符串

> ID：13711853
> 
> 赞同：3
> 
> 时间：2012-12-04T21:02:09.367
> 
> 标签：ruby, class, object, logging

我有一个奇怪的需求，我找不到一个好的解决方案。

我有一个方法，可以将对象、哈希或数组传递给它。而且我希望能够获得我正在传递的那个对象、散列或数组的名称。

这是一个例子：

```
@user = User.find(5)

log_info(@user)

def log_info(obj)
  Rails.logger.debug(obj.to_s)
  Rails.logger.debug(obj.inspect)
end 
```

那将记录如下内容：

```
@user
{"active"=>true, "address1"=>"something", "address2"=>"", "city"=>"somewhere"} 
```

这只会阻止我这样做：

```
@user = User.find(5)

log_info("@user", @user)

def log_info(heading, obj)
  Rails.logger.debug(heading)
  Rails.logger.debug(obj.inspect)
end 
```

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:20:37.443

你可以用一点hackery来做到这一点——我就把它留在这里：

```
class Reference
    def initialize(var_name, vars)
      @var_name = var_name
      @getter = eval "lambda { #{var_name} }", vars
    end
    def name 
      @var_name
    end
    def value
      @getter.call
    end
end
def log_info(ref)
  Rails.logger.debug(ref.name.to_s)
  Rails.logger.debug(ref.value.inspect)
end
def ref(&block)
  Reference.new(block.call, block.binding)
end
@user = "something";
log_info(ref{:@user}) # -> @user - "something" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:20:21.050

如果您的案例只需要使用实例变量，您可以执行以下操作：

```
def log_info(obj)
  heading = instance_variables.detect {|name| instance_variable_get(name).equal?(obj) }
  Rails.logger.debug(heading)
  Rails.logger.debug(obj.inspect)
end 
```

# linux - linux脚本杀死java进程

> ID：13711855
> 
> 赞同：52
> 
> 时间：2012-12-04T21:02:12.013
> 
> 标签：linux, bash, kill-process

我希望 linux 脚本杀死在控制台上运行的 java 程序。

以下是作为 jar 运行的进程。

```
[rapp@s1-dlap0 ~]$ ps -ef |grep java
rapp    9473    1  0 15:03 pts/1    00:00:15 java -jar wskInterface-0.0.1-SNAPSHOT-jar-with-dependencies.jar
rapp   10177  8995  0 16:00 pts/1    00:00:00 grep java
[rapp@s1-dlap0 ~]$ 
```

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-12-04T21:07:43.330

您可以`pkill -f`像这样简单地使用：

```
pkill -f 'java -jar' 
```

**编辑：**要杀死运行特定 jar 的特定 java 进程，请使用此基于正则表达式的 pkill 命令：

```
pkill -f 'java.*lnwskInterface' 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-12-04T21:08:56.500

如果您只想杀死任何/所有 java 进程，那么您只需要；

```
killall java 
```

但是，如果您想特别**终止 wskInterface**进程，那么您已经完成了大部分工作，您只需要去掉进程 ID；

```
PID=`ps -ef | grep wskInterface | awk '{ print $2 }'`
kill -9 $PID 
```

应该这样做，但可能有一种更简单的方法......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-15T02:47:49.213

如果有多个 java 进程并且您希望用一个命令杀死它们，请尝试以下命令

```
kill -9 $(ps -ef | pgrep -f "java") 
```

用任何进程字符串标识符替换“java”，以杀死其他任何东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-30T14:47:59.397

pkill -f 无论出于何种原因对我都不起作用。无论做什么，实际上通过 ps aux 清楚地显示给我的东西似乎非常挑剔。

经过一个下午的宣誓后，我将以下内容放入我的开始脚本中：

`(ps aux | grep -v -e 'grep ' | grep MainApp | tr -s " " | cut -d " " -f 2 | xargs kill -9 ) || true`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-08T20:02:44.487

使用[jps](http://docs.oracle.com/javase/7/docs/technotes/tools/share/jps.html)列出正在运行的 java 进程。该命令返回进程 ID 以及主类。您可以使用 kill 命令以返回的 id 杀死进程或使用以下一个衬里脚本。

```
kill $(jps | grep <MainClass> | awk '{print $1}') 
```

MainClass 是您正在运行的 java 程序中的一个类，它包含 main 方法。

# android - 停止闹钟在另一个活动中响起 - android

> ID：13711856
> 
> 赞同：2
> 
> 时间：2012-12-04T21:02:13.377
> 
> 标签：android, alarm

有人可以教我如何阻止警报在我的代码中响起。我有什么方法可以停止其他活动的警报吗？因为，到目前为止，即使我按下了关闭按钮，警报也会一直响起。

```
alertDialogBuilder.setTitle("Alarm");

            alertDialogBuilder
            .setMessage("Stop Alarm")
            .setCancelable(false)
            .setPositiveButton("Dismiss",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    eReceiver = new EAlarmReceiver();
                    Ringtone r = eReceiver.ringAlarm(context);
                    r.stop();
                    Toast.makeText(context.getApplicationContext(), "Alarm Stopped", Toast.LENGTH_LONG).show();
                    Intent openInterface = new Intent("proj.receiver.RECEIVERINTERFACE");
                    openInterface.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    context.startActivity(openInterface);
                }
            });
            // create alert dialog
            AlertDialog alertDialog = alertDialogBuilder.create();
            // show it
            alertDialog.show();
}// end oncreate() 
```

这是我开始警报的地方

```
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    Bundle bundle = intent.getExtras(); 
    Object[] pdusObj = (Object[]) bundle.get("pdus"); 
    SmsMessage[] messages = new SmsMessage[pdusObj.length]; 
    for (int i = 0; i<pdusObj.length; i++) 
    { 
            messages[i] = SmsMessage.createFromPdu ((byte[]) 
            pdusObj[i]); 
            sender = messages[i].getOriginatingAddress();
    } 

    for (SmsMessage msg : messages) {
        if (msg.getMessageBody().contains("firealert")) {
            ringAlarm(context);
            Intent openStopAlarm = new Intent("proj.receiver.STOPALARM");
            openStopAlarm.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startActivity(openStopAlarm);

        }//end if
    }//end for
}// end onreceive

public Ringtone ringAlarm(Context context)
{
     Uri alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM);
     if(alert == null){
         // alert is null, using backup
         alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
         if(alert == null){  // I can't see this ever being null (as always have a default notification) but just incase
             // alert backup is null, using 2nd backup
             alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);               
         }
     }
     Ringtone r = RingtoneManager.getRingtone(context.getApplicationContext(), alert);
     AudioManager audioManager = (AudioManager)context.getSystemService(Context.AUDIO_SERVICE);
     int maxVolumeAlarm = audioManager.getStreamMaxVolume(AudioManager.STREAM_ALARM);
     //int maxVolumeRing = audioManager.getStreamMaxVolume(AudioManager.STREAM_RING);
     audioManager.setStreamVolume(AudioManager.STREAM_ALARM, maxVolumeAlarm,AudioManager.FLAG_REMOVE_SOUND_AND_VIBRATE);
     //audioManager.setStreamVolume(AudioManager.STREAM_RING, maxVolumeRing,AudioManager.FLAG_REMOVE_SOUND_AND_VIBRATE);
     r.play();
        Toast.makeText(context.getApplicationContext(), "alarm started", Toast.LENGTH_LONG).show();
        return r;
}
//end ringAlarm() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T21:19:28.847

BroadcastReceiver 中声明的 `Ringtone r`值与您在 Activity 中定义的值不同，您必须做一些事情，使 r 变量在您的应用程序中具有更大的范围：

您可以将 r 变量定义为

```
static Ringtone; 
```

在您的广播接收器中，然后在 onReceive() 方法中为其赋值，然后从您的活动中调用该变量，只需将新的 r 变量声明为如下：

```
Ringtone r=yourpackge.Your_BroadcastReceiver_Class.r 
```

然后打电话

```
r.stop(); 
```

# asp.net-mvc - 如何在 ASP.Net MVC 中读取文件的内容？

> ID：13711857
> 
> 赞同：7
> 
> 时间：2012-12-04T21:02:19.610
> 
> 标签：asp.net-mvc

我有一个 ASP.Net MVC 控制器操作，它需要返回一个包含另一个 html 文件内容的 json 结果（它实际上是 jsonp，但这并不重要）。所以基本上，我想这样做：

```
[JsonpFilter]
public JsonResult GetHeader()
{
    var html = System.IO.File.ReadAllText("/htm/external/header.htm");

    return Json(new { html = html }, JsonRequestBehavior.AllowGet);
} 
```

但是，它没有找到正确的文件。当我希望它查看服务器的根目录（当然还有 /htm/external）时，它正在 C 目录中查找（找不到路径“C:\htm\external\header.htm”的一部分）。

我怎样才能读入这个文件？它是外部可用的，所以我想我可以为它发出单独的网络请求，但似乎我应该能够直接定位它。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-04T21:14:25.350

您可以使用[HttpServerUtility.MapPath 方法](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.mappath%28v=vs.100%29.aspx)解析到其物理位置的虚拟路径：

```
string html = System.IO.File.ReadAllText(HttpContext.Current.Server.MapPath("~/htm/external/header.htm")); 
```

# c - 将逻辑运算符与宏一起使用

> ID：13711868
> 
> 赞同：10
> 
> 时间：2012-12-04T21:03:03.033
> 
> 标签：c, macros, conditional-compilation

如果定义了两个宏中的任何一个，我有一段代码要包含在内

```
#ifdef MACRO1 || MACRO2

void foo()
{

}

#endif 
```

我如何在 C 中实现这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-04T21:05:49.323

此外`#ifdef`，预处理器支持更通用的`#if`指令；实际上，`#ifdef MACRO`是 的快捷方式`#if defined(MACRO)`，其中`defined`是“预处理器函数”，如果定义了宏，则返回 1；所以，你可以这样做：

```
#if defined(MACRO1) || defined(MACRO2)

void foo()
{

}

#endif 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T21:04:24.043

```
#if defined(MACRO1) || defined(MACRO2) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-16T12:27:32.193

如果需要，这里是 NOT 版本：

```
#if !defined(MACRO1) && !defined(MACRO2)
...
#endif 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T21:07:37.637

```
 #if defined(Macro 1) + defined(Macro 2) == 1
  <Code>
  #endif 
```

# c# - CKEditor 自定义组合框插件宽度

> ID：13711869
> 
> 赞同：1
> 
> 时间：2012-12-04T21:03:05.467
> 
> 标签：c#, javascript, asp.net, css, ckeditor

我已经为 CKEditor 实现了一个自定义组合框插件，我称之为“令牌”，它允许将自定义标签插入到编辑器中。该插件按预期工作；我在我的自定义 plugin.js 中使用了代码：

```
CKEDITOR.plugins.add('tokens', { init: function (editor) { ... 
```

我的问题是我必须通过修改 skins/kama/editor.css 中默认 kama 皮肤的样式来为该组合框提供自定义宽度。我尝试了以下方法，但没有奏效：

```
.cke_skin_kama .cke_tokens .cke_text {width:100px !important;} 
```

这适用于内置组合框，即“字体”：

```
.cke_skin_kama .cke_font .cke_text {width:60px !important;} 
```

在我的在线搜索中，我只找到了如何调整内置组合框插件宽度的实例，即“字体”和“格式”。我需要知道如何为自定义执行此操作。

# c# - 确定在不使用 return View(model) 而是 return View("viewName", model) 时返回哪个 ASP.NET MVC 视图

> ID：13711874
> 
> 赞同：5
> 
> 时间：2012-12-04T21:03:25.387
> 
> 标签：c#, asp.net, asp.net-mvc, mobile, views

我的 mvc 网站在移动和非移动浏览器上运行良好；我遇到的问题是这个。我有几个操作（出于日志记录的原因）我不想做`return RedirectToAction(...);`，所以我一直在使用`return View("OtherView", model);`它，直到我在移动设备上尝试它，它没有找到 OtherView.Mobile.cshtml。有没有办法使这项工作？

这是意见

```
Views/Account/Create.cshtml
Views/Account/Create.Mobile.cshtml
Views/Account/CreateSuccess.cshtml
Views/Account/CreateSuccess.Mobile.cshtml 
```

这是行动

```
public ActionResult Create(FormCollection form)
{
    TryUpdateModel(model);

    if(!ModelState.IsValid) { return View(); }  // this works correctly

    var model = new Account();

    var results = database.CreateAccount(model);

    if(results) return View("CreateSuccess", model); // trying to make this dynamic

    return View(model); // this works correctly
} 
```

通常我只会`return RedirectToAction(...);`对帐户详细信息页面执行此操作，但这会生成一个额外的日志条目（对于正在读取的此用户）以及详细信息页面无法访问密码。由于`ActionResult Create`最初有密码，它可以显示给用户确认，在它再也没有出现之前。

需要明确的是，我不想这样做，`if (Request.Browser.IsMobileDevice) mobile else full`因为我最终可能会为 iPad 或其他任何东西添加另一组移动视图：

```
Views/Account/Create.cshtml
Views/Account/Create.Mobile.cshtml
Views/Account/Create.iPad.cshtml
Views/Account/CreateSuccess.cshtml
Views/Account/CreateSuccess.Mobile.cshtml
Views/Account/CreateSuccess.iPad.cshtml 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:21:06.293

我只会在他们第一次使用时设置一个会话变量，该变量将是识别所有支持的视图的“交付类型”。

```
public enum DeliveryType
{
    Normal,
    Mobile,
    Ipad,
    MSTablet,
    AndroidTablet,
    Whatever
} 
```

然后你可以在某处拥有一个属性或扩展方法

```
public DeliveryType UserDeliveryType
{
    get 
    {
        return (DeliveryType)Session["DeliveryType"];
    }
    set 
    {
        Session["UserDeliveryType"] = value;
    }
} 
```

您甚至可以采用不同的方法来交付“附加”视图：

```
public string ViewAddOn(string viewName)
{
    return (UserDeliveryType != DeliveryType.Normal) ?
        string.Format("{0}.{1}", viewName, UserDeliveryType.ToString()) :
        viewName;
} 
```

那么你的最终电话可能是：

```
if (results) return View(ViewAddOn("CreateSuccess"), model); 
```

然后，您只需确保对于每种交付类型都有相应的视图。谨慎的做法是构建某种检查器来验证您是否有匹配的视图，如果没有则返回标准视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:24:22.527

您可以创建一个伪视图，该视图具有带有 ViewData 变量的 Partial。@Html.Partial 会找到正确的视图。

像这样的东西：

```
CustomView.cshtml:
if (ViewData.ContainsKey("PartialViewName")) {
@Html.Partial(ViewData[PartialViewName]);
}

Controller.cs:
public ActionResult Create(FormCollection form)
{
    TryUpdateModel(model);
    ViewData[PartialViewName] = "CreateSuccess";
    if(!ModelState.IsValid) { return View(); }  // this works correctly

    var model = new Account();

    var results = database.CreateAccount(model);

    if(results) return View("CustomView", model); // trying to make this dynamic

    return View(model); // this works correctly
} 
```

您现在可以拥有 CreateSuccess.cshtml 和 CreateSuccess.Mobile.cshtml。

注意：您的所有应用程序中只需要一个 CustomeView.cshtml。

注意2：您始终可以以其他方式（例如viewbag）传递参数，或者任何让您感觉更舒适的技术：D

与其说是解决方案，不如说是一种技巧。如果你想出了更漂亮的东西，请告诉我们。

# python - Python - 杂散的 cmd.exe 窗口导致程序挂起。我怎样才能关闭这个流浪程序？

> ID：13711876
> 
> 赞同：0
> 
> 时间：2012-12-04T21:03:40.303
> 
> 标签：python, cmd, exe

我有一个 Python 文件，它通过 Popen 启动一个新进程。Python 代码应该等到这个新过程完成后再恢复它的代码。但是，Python 启动的过程还会生成另一个 cmd.exe 窗口，该窗口会做一些工作，但在完成后会保持打开状态。Python 启动的进程在完成后会关闭，但保持 cmd.exe 窗口仍然打开，导致我的 Python 程序无法继续。关闭此停留窗口的最佳方法是什么？

这是我要打的电话：

```
p = Popen(command, stdout=PIPE, stderr=STDOUT, stdin=PIPE) 
```

命令正在运行另一个 python 文件。我将它设置为 p 是因为我后来通过 grep_stdout 与新进程通信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T22:48:44.213

这可以通过使用`pythonw.exe`而不是`python.exe`执行您的第二个脚本来解决。如果您直接运行脚本（而不是自己调用解释器），您应该使用`.pyw`文件扩展名重命名它，因为默认情况下应该与之关联`pythonw.exe`。

有关在 Windows 上执行 Python 文件的更多信息，请参阅[Python 文档的这一部分。](http://docs.python.org/2/using/windows.html#executing-scripts)

# php - smarty 标签到 php 转换/替换

> ID：13711879
> 
> 赞同：1
> 
> 时间：2012-12-04T21:03:53.623
> 
> 标签：php, smarty

**这是以下“Smarty” tpl 代码：**

```
{if !$document}
    {assign var=document value=15}
    {"document set"}
{/if} 
```

**波纹管是等效的代码，但在 PHP 中我已经手动转换：**

```
<?php if (!$document) { ?>
    <?php $document=15; ?>
    <?php echo "document set"; ?>
<?php } ?> 
```

问题是找到最简单的方法来自动转换/替换这些代码行，而不使用“Smarty”内部引擎例程。

我想也许正则表达式是一个解决方案。

如果您可以分享您对该主题的想法/解决方案。

谢谢你。

# jquery - 如果照片上传时间过长，则超时

> ID：13711883
> 
> 赞同：1
> 
> 时间：2012-12-04T21:04:11.827
> 
> 标签：jquery, ajax, facebook-php-sdk

我正在创建一个照相亭应用程序，用户可以在其中将他们拍摄的照片分享到他们的 Facebook 帐户。大多数情况下，它运行良好。我正在使用 AJAX 发布到这个 PHP 页面：

```
$appID = "#####";
$appSecret = "#####";
$accessToken = $_POST['accessToken'];
$filePath = $_POST['imagePath'];
$message = $_POST['message'];

// Initialize the SDK
$facebook = new Facebook(array(
    'appId' => $appID,
    'secret' => $appSecret,
    'fileUpload' => true,
    'cookie' => true
));

$facebook->setAccessToken($accessToken);

// Upload the photo
$response = $facebook->api("/me/photos", "post", array(
    'message' => $message,
    'image' => '@' . $filePath
));

echo json_encode($response); 
```

如果我在响应中从 Facebook 取回一个帖子 ID，我的 Javascript 会显示一条成功消息。如果我收到没有帖子 ID 的回复，则会显示错误消息。有时，无论是 Facebook 速度慢还是互联网中断或其他我无法控制的因素，对 Facebook 的请求都会继续处理，而我根本没有得到任何回复。

如果需要很长时间，我想在上传过程中创建某种“仍在工作...”消息，然后是“我们很抱歉，但您的照片无法上传。请刷新页面并再试一次”，如果时间太长。我知道我可以轻松地在 jQuery.ajax 请求上创建超时，但问题是（据我的理解）即使超时并且执行了错误回调，请求仍在服务器上进行。如果由于某种原因上传原始照片的时间超过了我的超时时间，那么当用户刷新页面并成功上传时，他们将有一个副本。

我对此提出了一些假设的解决方案，但不确定如何实施其中的任何一个。

1）在一定时间后取消上传过程服务器端（我相当确定这是不可能的）并显示错误 2）在上传之前检查重复的照片（似乎这不适用于一个非常缓慢的上传过程）

所以我只剩下希望超时过程永远不会结束的唯一解决方案。这让我觉得不可靠，可能会导致一些重复。同时，当我试图等待上传时，它总是比我耐心等待的时间长。

解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:08:33.913

这应该是可能的。首先在尝试中包装到 api 调用并捕获异常。您还可以将请求超时更改为更长或更短。那将是“取消”的一种方式。您可以在 base_facebook.php 中更改它并查找 CURLOPT_CONNECTTIMEOUT。

```
try {
    $response = $facebook->api("/me/photos", "post", array(
        'message' => $message,
        'image' => '@' . $filePath
    ));
} catch (FacebookApiException $e) {
    var_dump($e);
    // Other error handling
} 
```

# sql-server - 将查询结果保存在 Excel 文件中

> ID：13711884
> 
> 赞同：0
> 
> 时间：2012-12-04T21:04:12.733
> 
> 标签：sql-server, openrowset

我有点绝望，因为我不能使用 T-SQL 函数

> 开放集

因为无论如何我都没有权限测试我的服务。

有什么方法可以将我的查询结果从 SQL SERVER（不使用 OPENROWSET）保存到 EXCEL？

# load-balancing - AX 2009 代码传播与负载平衡

> ID：13711885
> 
> 赞同：1
> 
> 时间：2012-12-04T21:04:18.787
> 
> 标签：load-balancing, axapta, dynamics-ax-2009

我很好奇 AX 2009 在负载平衡环境中运行时如何处理代码传播。

我们最近将我们的 AX 服务器基础架构从单个 AOS 实例转换为 3 个 AOS 实例，其中一个是专用负载均衡器（实际上是 2 个面向用户的服务器）。所有共享相同的应用程序文件和数据库。从那时起，我们就有一位用户无法接收对系统进行的代码更新。这些更改通常需要几天时间才能看到，而且这些更改似乎不会一次全部更新。

例如，一个值被添加到一个 ENUM 字段，并且他们无法在使用它的表单上看到它（尽管连接到同一实例的其他人是）。现在，该用户可以按预期在下拉列表中看到该字段，但是当连接到其中一个实例时，它不会按应有的方式流入报表。当连接到另一个实例时，它可以正常工作，并且对于连接到任一实例的任何其他用户，它都可以正常工作。

我不确定这是否与基础架构更改有关，但只有一个用户正在体验它似乎很奇怪。我的理解是，通过这种设置，代码更改将立即（由于共享应用程序文件）或至少在合理的时间内（<1 天）传播到服务器。这是正确的还是我被误导了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:04:15.867

我对此也有点好奇，但我所知道的是，如果用户有权访问 AOT（管理员成员或具有开发人员访问权限的组），客户端将比没有访问权限时更积极地缓存 AOT 元素具有开发人员访问权限。

元素（如枚举）可能在客户端级别缓存，但也可能在 AOS 级别缓存。重新启动 AOS（服务）将清除该服务的内存，迫使它在重新启动时重新加载元素。

我想我的建议是您确保该元素未在客户端缓存。重新启动客户端，或从开发人员工具菜单中运行“刷新 AOD”。如果这没有帮助，请尝试重新启动客户端连接的 AOS，看看是否有帮助。

我认为可以肯定地说，如果您想绝对确定每个用户都拥有任何元素的最新“副本”，那么您不应该在所有这些服务共享的应用程序文件上进行开发，而应该在具有1个AOS。当您需要将事物转移到生产环境时，您需要关闭生产环境中的所有 AOS，并在系统停机时转移机会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T13:35:56.450

由于您的缓存问题似乎是每个用户的问题，因此请了解[AUC 文件](http://www.axaptapedia.com/index.php/Object_caching)。

这些文件存储在客户端计算机上，很难保持同步。还有[其他问题](http://blogs.msdn.com/b/emeadaxsupport/archive/2010/01/25/identical-ax-2009-auc-file-created-for-multiple-ax-installations.aspx)。

通过脚本启动 AX，[在启动 AX 之前删除 AUC 文件](http://dynamics-ax.blogspot.dk/2005/11/axapta-client-cache.html)。

AOS 实例之间没有缓存一致性：在一台 AOS 服务器上导入 XPO，而在另一台服务器上不可见。您将不得不手动刷新缓存或重新启动其他 AOS。最简单的事情是在每台服务器上导入，对于标签尤其如此，因为这是使标签与我的知识同步的唯一方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:41:20.293

在这种情况下，通常很难找到具体案例的确切原因。我尝试遵循一些最佳实践来避免这种情况：
- 使用单独的环境进行开发
- 使用层文件而不是 XPO 部署代码更改
- 部署时，停止所有 AOS，部署文件，删除应用程序目录中的索引文件，启动一个 AOS 、编译、同步数据库、启动其他 AOS（甚至关闭所有并重新启动）
- 尝试为 AOS 和客户端安装最新的内核版本

# algorithm - 带间隙的对齐算法动态规划

> ID：13711887
> 
> 赞同：0
> 
> 时间：2012-12-04T21:04:23.450
> 
> 标签：algorithm, optimization, alignment, dynamic-programming

我写了一个动态规划对齐算法。我希望对齐从两个不同信号中提取的两个峰值列表。峰列表是具有两列、两个特征的数据集：峰时间和峰面积。由于峰值来自两个不同的信号，因此两个列表都不包含精确匹配。但是，两个峰列表都有一些共同的峰（约三分之二），也就是说，峰在时间和面积上都很接近。

在我的第一个 DP 算法中，我依赖于将时间和面积考虑在内的距离计算。我遍历最短峰值列表中的峰值，并计算它们与其他数据集中某些峰值的距离。我用这些距离填充分数矩阵，然后我向后寻找最佳路径（最小距离）。如果我想将最短列表中的所有峰分配给最大列表中的峰，这将是完美的。但是，如果允许间隙，则它不起作用，也就是说，如果最短数据集中的某些元素在最大数据集中没有匹配。

DP的哪种改进可以处理这类问题？还有哪些其他算法可以处理这些问题？

谢谢！

# android - getFromLocationName 错误，服务不可用。一直在工作，停止

> ID：13711892
> 
> 赞同：7
> 
> 时间：2012-12-04T21:04:41.393
> 
> 标签：android, geolocation

在我的应用程序中，我正在使用 getFromLocationName，直到最近它一直在应用程序中工作，现在突然间我得到的是“服务不可用”。

异常说：Geocoder.getFromLocationName(Geocoder.java:178)

这是我正在使用的代码：

```
 Geocoder coder = new Geocoder(this);
 List<Address> address = null;
 try {
    address = coder.getFromLocationName(navAddr,5);
 } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
 } 
```

老实说，我不知道在我切换到发布版本后是否停止工作。

我希望有人能指出我能做些什么来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T22:21:42.223

我有完全相同的问题。我有两个应用程序已经运行了一段时间，但今天停止运行。奇怪的是，在三部手机中它不起作用（2.2、4.0 和 4.1），但在 android 2.1 中没有问题。

Google Maps Geocoder 服务似乎有问题，而不是我们对该服务的使用。

编辑：我刚刚发现你只需要重新启动手机。

# ios - 循环，从数组中生成带有函数的按钮

> ID：13711897
> 
> 赞同：0
> 
> 时间：2012-12-04T21:05:26.593
> 
> 标签：ios, objective-c, uibutton, nsarray, programmatically-created

对于我的 iOS 应用程序，我有一个文本数组，我想在我的 UIScrollview 内生成右侧的文本列表和左侧的按钮列表。每当用户从右侧按下 UIButton 时，左侧的文本将被复制到用户设备的剪贴板...

我想出了如何使用 for 循环和 NSArray 在 UILabels 中生成文本列表。我不知道如何以编程方式生成 UIButtons，我也不知道如何让每个按钮从数组中复制相应的字符串（即按钮 #3 从数组中复制字符串 #3 (objectAtIndex #2)）

到目前为止，这是我的代码：

```
 NSArray *copyText;
    copyText = [NSArray arrayWithObjects: @"text to copy 1", "text to copy 2", "text to copy 3", "text to copy 4", nil];

    int i = 0;
    while (i < [copyText count]) {
        UILabel *copyLabels = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, (ScrollView1.frame.size.width*2/3), 25)];
        copyLabels.center = CGPointMake(ScrollView1.frame.size.width*2/3, ((i*25)+15));
        copyLabels.textAlignment = UITextAlignmentCenter;
        copyLabels.textColor = [UIColor blackColor];
        copyLabels.backgroundColor = [UIColor clearColor];
        copyLabels.font = [UIFont fontWithName:@"System" size:(16.0)];
        [ScrollView1 addSubview:copyLabels];
        copyLabels.text = [NSString stringWithString:[copyLabels objectAtIndex:i]];
        i ++;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:03:41.293

在这里找到我的答案：[以编程方式向视图添加多个按钮，调用相同的方法，确定它是哪个按钮](https://stackoverflow.com/questions/2646297/add-a-multiple-buttons-to-a-view-programatically-call-the-same-method-determin)

UIButton 有一个“标签”字段，可以在其中分配数值，以便我的循环可以跟踪哪个按钮是哪个。天才。

# jquery - 为每个 tbody jquery 添加表

> ID：13711904
> 
> 赞同：0
> 
> 时间：2012-12-04T21:05:52.353
> 
> 标签：jquery

我正在学习一些 jquery，并且我有一个关于 prepend 的快速问题（我已经阅读了 jquery 页面）

我有一张这样的桌子：

```
<table class="tableholder">
 <tr>
   <td>row 1, cell 1</td>
   <td>row 1, cell 2</td>
 </tr>
</table> 
```

我尝试用我的表做一个 slideToggle 效果，如下所示：

```
var newContent = $('.tableholder').contents();  
$("<div>").prepend(newContent).hide().prependTo("#container").slideToggle(1000) 
```

效果正确执行，但我丢失了我的表格标签。我的萤火虫给我看这个。

```
 <div>
   <tbody>
     <tr>
     <td>row 1, cell 1</td>
     <td>row 1, cell 2</td>
     </tr>
   </tbody>
 </div> 
```

我只希望我的表格在 div 内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:14:51.440

由于`jQuery.fn.contents`只获取所选元素的子元素而不是元素本身，因此您必须手动再次添加它：

```
var newContent = "<table class=\"tableholder\">" + $('.tableholder').html() + "</table>";  
$("<div>").prepend(newContent).hide().prependTo("#container").slideToggle(1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:10:22.723

采用`.wrap()`

```
 $(".tableholder").wrap('<div class="a" />')
                 .hide()
                 .parent('.a')
                 .prependTo("#container")
                 .slideToggle(1000)​ 
```

# java - Web 服务 - Tomcat - 代理背后 - wsdl 位置

> ID：13711907
> 
> 赞同：3
> 
> 时间：2012-12-04T21:06:05.427
> 
> 标签：java, web-services, apache, proxy

在我们的内部环境中，我有一个在 Tomcat 上运行的 Java 网络服务。假设wsdl是

```
http://actual:8080/app/temp?wsdl 
```

为了从网络外部提供对该 Web 服务的访问，我们在另一台服务器上使用 Apache 创建了一个代理，并使用 ProxyPass 来执行类似的操作

```
ProxyPass /app/temp http://actual:8080/app/temp 
```

所以在外部，当我们通过 http 访问 proxy/app/temp 时，它会被转移到 actual:8080/app/temp 就好了。所以没有问题，我也可以访问 wsdl。

但是 WSDL 引用了端口上的“webservice 位置”的“实际”服务器。当从客户端对 Web 服务方法进行实际调用时，这会导致失败。

请问有什么办法可以解决这个问题吗？谢谢。

注意：客户端是使用 Metro 生成的。我找到了一种使用如下代码强制客户端中的不同端点的方法。但我更多的是寻找我们可以做的纯代理解决方案，而不是使用我们的 web 服务的开发人员必须接触他们的代码。

```
((BindingProvider)port).getRequestContext().put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, "http://proxy/app/temp?wsdl"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T21:45:52.703

您可以使用[ProxyPreserveHost](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypreservehost)指令。引用链接中指令的部分：

> 启用后，此选项会将 Host: 行从传入请求传递到代理主机，而不是 ProxyPass 行中指定的主机名

因此，您的配置文件中应该有以下内容：

```
ProxyPreserveHost On
ProxyPass /app/temp http://actual:8080/app/temp 
```

然后重新启动apache服务器。使用此选项，您无需更改 Web 服务相关代码或设置中的任何内容。

# angularjs - 模型数组中的AngularJS不同模型模式

> ID：13711909
> 
> 赞同：0
> 
> 时间：2012-12-04T21:06:07.760
> 
> 标签：angularjs

我一直在做一个 angularjs 项目并遇到了一个我似乎无法解决的问题。问题是我有一个控制器，它有一个代表几个考试的数组。

```
function ExamCtrl($scope) {
    $scope.exams = [{
        "title" : "Some fancy title",
        "owner" : "John Smith",
        "questions" : [
            {"type" : "openquestion", "question" : "Is cheese yummy?", "answer" : "Yes"},
            {"type" : "mcquestion", "question" : "Is cheese yummy?", "answers" : [{"a" : "Yes"}, {"b" : "No"}]}
        ]
    }];
} 
```

就像你可以看到考试对象中有一个数组，其中包含几个问题对象。这些对象中的每一个都有不同的模式（openquestion、mcquestion 等）。我可以保证每个具有特定问题类型的对象都具有相同的架构。

我面临的问题是呈现属于每个问题类型的正确 HTML。在他们使用的 angularjs 网页的教程中

```
<li ng-repeat="question in exams.questions>{{question.type}}</li> 
```

这种方法的问题是我无法区分不同的问题类型。我一直在尝试用指令来解决这个问题，并且一直在与编译和链接函数进行激烈的斗争，但一直未能找到一个好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:02:13.343

好吧，[这是一个工作小提琴](http://jsfiddle.net/blesh/qGW66/)

我对您的考试模型结构所做的较大更改之一是我将“答案”设为字典对象而不是数组，并且在所有 questionType 案例中，我将实际选择的答案存储在 question.answer 中。

我猜这个标记有点棘手：

```
 <ul ng-repeat="exam in exams">
        <li ng-repeat="question in exam.questions">
            <p>{{question.question}}</p>
            <div ng-switch on="question.type" >
                <div ng-switch-when="openquestion">
                    <textarea ng-model="question.answer"></textarea>                        
                </div>
                <ul ng-switch-when="mcquestion">
                    <li ng-repeat="(key, value) in question.answers">
                        <label>
                        <input ng-model="$parent.question.answer" value="{{value}}" type="radio"/>
                            {{key}} ) {{value}}
                        </label>
                    </li>                        
                </ul>
              </div>
        </li>
    </ul> 
```

这是它背后的JS：

```
app.controller('MainCtrl', function($scope) {
   $scope.exams = [{
        "title" : "Some fancy title",
        "owner" : "John Smith",
        "questions" : [
            {"type" : "openquestion", "question" : "Is cheese yummy?", "answer" : "Yes"},
            {"type" : "mcquestion", "question" : "Is cheese yummy?", "answers" : { a: "Yes", b: "No" }, "answer" : "No"}
        ]
    }];
}); 
```

​</p>

我希望这会有所帮助。

# objective-c - OCUnit 的单元测试示例

> ID：13711911
> 
> 赞同：39
> 
> 时间：2012-12-04T21:06:14.033
> 
> 标签：objective-c, ios, unit-testing, tdd, ocunit

我真的很难理解单元测试。我确实了解 TDD 的重要性，但我读到的所有单元测试示例似乎都非常简单和琐碎。例如，测试以确保设置了属性或内存是否分配给数组。为什么？如果我编码`..alloc] init]`，我真的需要确保它有效吗？

我是开发新手，所以我确定我在这里遗漏了一些东西，尤其是围绕 TDD 的所有热潮。

我认为我的主要问题是我找不到任何实际的例子。这是一种`setReminderId` 似乎很适合测试的方法。一个有用的单元测试会是什么样子以确保它有效？（使用 OCUnit）

```
- (NSNumber *)setReminderId: (NSDictionary *)reminderData
{
    NSNumber *currentReminderId = [[NSUserDefaults standardUserDefaults] objectForKey:@"currentReminderId"];
    if (currentReminderId) {
        // Increment the last reminderId
        currentReminderId = @(currentReminderId.intValue + 1);
    }
    else {
        // Set to 0 if it doesn't already exist
        currentReminderId = @0;
    }
    // Update currentReminderId to model
    [[NSUserDefaults standardUserDefaults] setObject:currentReminderId forKey:@"currentReminderId"];

    return currentReminderId;
} 
```

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-12-06T08:07:28.520

***更新：我在两个方面改进了这个答案：它现在是一个截屏视频，我从属性注入切换到构造函数注入。了解[如何开始使用 Objective-C TDD](https://qualitycoding.org/objective-c-tdd/)***

棘手的部分是该方法依赖于外部对象 NSUserDefaults。我们不想直接使用 NSUserDefaults。相反，我们需要以某种方式注入此依赖项，以便我们可以用假用户默认值代替测试。

有几种不同的方法可以做到这一点。一种是将其作为额外参数传递给方法。另一种是使其成为类的实例变量。并且有不同的方法来设置这个 ivar。在初始化参数中指定了“构造函数注入”。或者有“财产注入”。对于来自 iOS SDK 的标准对象，我的偏好是使其成为具有默认值的属性。

因此，让我们先测试一下该属性是否默认为 NSUserDefaults。顺便说一句，我的工具集是 Xcode 的内置 OCUnit，加上[用于](https://github.com/hamcrest/OCHamcrest)断言的[OCHamcrest](https://github.com/jonreid/OCMockito)和用于模拟对象的 OCMockito。还有其他选择，但这就是我使用的。

## 第一次测试：用户默认值

由于缺少更好的名称，该类将命名为`Example`. 该实例将以`sut`“被测系统”命名。该属性将被命名为`userDefaults`. 这是在 ExampleTests.m 中确定其默认值的第一个测试：

```
#import <SenTestingKit/SenTestingKit.h>

#define HC_SHORTHAND
#import <OCHamcrestIOS/OCHamcrestIOS.h>

@interface ExampleTests : SenTestCase
@end

@implementation ExampleTests

- (void)testDefaultUserDefaultsShouldBeSet
{
    Example *sut = [[Example alloc] init];
    assertThat([sut userDefaults], is(instanceOf([NSUserDefaults class])));
}

@end 
```

在这个阶段，这不会编译——这算作测试失败。再看一遍。如果你能让你的眼睛跳过括号和括号，那么测试应该很清楚。

让我们编写最简单的代码来编译和运行该测试——然后失败。这是Example.h：

```
#import <Foundation/Foundation.h>

@interface Example : NSObject
@property (strong, nonatomic) NSUserDefaults *userDefaults;
@end 
```

还有令人敬畏的 Example.m：

```
#import "Example.h"

@implementation Example
@end 
```

我们需要在 ExampleTests.m 的开头添加一行：

```
#import "Example.h" 
```

测试运行，并失败并显示消息“预期 NSUserDefaults 的实例，但为 nil”。正是我们想要的。我们已经达到了第一个测试的第 1 步。

第 2 步是编写我们能通过该测试的最简单的代码。这个怎么样：

```
- (id)init
{
    self = [super init];
    if (self)
        _userDefaults = [NSUserDefaults standardUserDefaults];
    return self;
} 
```

它通过了！步骤 2 完成。

第 3 步是重构代码以合并生产代码和测试代码中的所有更改。但实际上还没有什么需要清理的。我们完成了第一次测试。到目前为止，我们有什么？可以访问的类的开始`NSUserDefaults`，但也可以将其覆盖以进行测试。

## 第二次测试：没有匹配的key，返回0

现在让我们为该方法编写一个测试。我们想让它做什么？如果用户默认没有匹配的键，我们希望它返回 0。

当第一次开始使用模拟对象时，我建议首先手工制作它们，以便您了解它们的用途。然后开始使用模拟对象框架。但我将继续前进并使用 OCMockito 让事情变得更快。我们将这些行添加到 ExampleTest.m：

```
#define MOCKITO_SHORTHAND
#import <OCMockitoIOS/OCMockitoIOS.h> 
```

默认情况下，`nil`任何方法都会返回一个基于 OCMockito 的模拟对象。但是我会写额外的代码来明确期望，“假设它被要求`objectForKey:@"currentReminderId"`，它会返回`nil`。” 鉴于这一切，我们希望该方法返回 NSNumber 0。（我不会传递参数，因为我不知道它的用途。我将命名该方法`nextReminderId`。）

```
- (void)testNextReminderIdWithNoCurrentReminderIdInUserDefaultsShouldReturnZero
{
    Example *sut = [[Example alloc] init];
    NSUserDefaults *mockUserDefaults = mock([NSUserDefaults class]);
    [sut setUserDefaults:mockUserDefaults];
    [given([mockUserDefaults objectForKey:@"currentReminderId"]) willReturn:nil];

    assertThat([sut nextReminderId], is(equalTo(@0)));
} 
```

这还没有编译。`nextReminderId`让我们在 Example.h 中定义方法：

```
- (NSNumber *)nextReminderId; 
```

这是 Example.m 中的第一个实现。我希望测试失败，所以我将返回一个虚假数字：

```
- (NSNumber *)nextReminderId
{
    return @-1;
} 
```

测试失败并显示消息“预期为 <0>，但为 <-1>”。测试失败很重要，因为这是我们测试测试的方式，并确保我们编写的代码将其从失败状态翻转到通过状态。步骤 1 完成。

第 2 步：让我们通过测试测试。但请记住，我们想要通过测试的最简单的代码。它会看起来非常愚蠢。

```
- (NSNumber *)nextReminderId
{
    return @0;
} 
```

神奇，通过了！但是我们还没有完成这个测试。现在我们来到第 3 步：重构。测试中有重复的代码。让我们将`sut`被测系统拉到一个 ivar 中。我们将使用该`-setUp`方法来设置它，并`-tearDown`清理它（销毁它）。

```
@interface ExampleTests : SenTestCase
{
    Example *sut;
}
@end

@implementation ExampleTests

- (void)setUp
{
    [super setUp];
    sut = [[Example alloc] init];
}

- (void)tearDown
{
    sut = nil;
    [super tearDown];
}

- (void)testDefaultUserDefaultsShouldBeSet
{
    assertThat([sut userDefaults], is(instanceOf([NSUserDefaults class])));
}

- (void)testNextReminderIdWithNoCurrentReminderIdInUserDefaultsShouldReturnZero
{
    NSUserDefaults *mockUserDefaults = mock([NSUserDefaults class]);
    [sut setUserDefaults:mockUserDefaults];
    [given([mockUserDefaults objectForKey:@"currentReminderId"]) willReturn:nil];

    assertThat([sut nextReminderId], is(equalTo(@0)));
}

@end 
```

我们再次运行测试，以确保它们仍然通过，并且它们确实通过了。重构只能在“绿色”或通过状态下进行。所有测试都应该继续通过，无论是在测试代码还是生产代码中进行重构。

## 第三次测试：没有匹配的键，在用户默认值中存储 0

现在让我们测试另一个要求：应该保存用户默认值。我们将使用与之前的测试相同的条件。但是我们创建了一个新测试，而不是向现有测试添加更多断言。理想情况下，每个测试都应该验证一件事，并有一个好的名称来匹配。

```
- (void)testNextReminderIdWithNoCurrentReminderIdInUserDefaultsShouldSaveZeroInUserDefaults
{
    // given
    NSUserDefaults *mockUserDefaults = mock([NSUserDefaults class]);
    [sut setUserDefaults:mockUserDefaults];
    [given([mockUserDefaults objectForKey:@"currentReminderId"]) willReturn:nil];

    // when
    [sut nextReminderId];

    // then
    [verify(mockUserDefaults) setObject:@0 forKey:@"currentReminderId"];
} 
```

该`verify`语句是 OCMockito 的说法，“这个模拟对象应该被这样调用一次。” 我们运行测试并获得失败，“预期 1 个匹配调用，但收到 0”。步骤 1 完成。

第2步：通过的最简单的代码。准备好？开始：

```
- (NSNumber *)nextReminderId
{
    [_userDefaults setObject:@0 forKey:@"currentReminderId"];
    return @0;
} 
```

“但你为什么要保存`@0`用户默认值，而不是具有该值的变量？” 你问。因为这是我们已经测试过的。等一下，我们会到达那里的。

第三步：重构。同样，我们在测试中有重复的代码。`mockUserDefaults`让我们作为 ivar退出。

```
@interface ExampleTests : SenTestCase
{
    Example *sut;
    NSUserDefaults *mockUserDefaults;
}
@end 
```

测试代码显示警告，“'mockUserDefaults' 的本地声明隐藏实例变量”。修复它们以使用 ivar。然后让我们提取一个辅助方法来在每个测试开始时建立用户默认值的条件。让我们将其`nil`提取到一个单独的变量中以帮助我们进行重构：

```
 NSNumber *current = nil;
    mockUserDefaults = mock([NSUserDefaults class]);
    [sut setUserDefaults:mockUserDefaults];
    [given([mockUserDefaults objectForKey:@"currentReminderId"]) willReturn:current]; 
```

现在选择最后 3 行，单击上下文，然后选择 Refactor ▶ Extract。我们将创建一个新方法，称为`setUpUserDefaultsWithCurrentReminderId:`

```
- (void)setUpUserDefaultsWithCurrentReminderId:(NSNumber *)current
{
    mockUserDefaults = mock([NSUserDefaults class]);
    [sut setUserDefaults:mockUserDefaults];
    [given([mockUserDefaults objectForKey:@"currentReminderId"]) willReturn:current];
} 
```

调用它的测试代码现在看起来像：

```
 NSNumber *current = nil;
    [self setUpUserDefaultsWithCurrentReminderId:current]; 
```

该变量的唯一原因是帮助我们进行自动重构。让我们内联它：

```
 [self setUpUserDefaultsWithCurrentReminderId:nil]; 
```

测试仍然通过。由于 Xcode 的自动重构并没有通过调用新的辅助方法来替换该代码的所有实例，因此我们需要自己做。所以现在测试看起来像这样：

```
- (void)testNextReminderIdWithNoCurrentReminderIdInUserDefaultsShouldReturnZero
{
    [self setUpUserDefaultsWithCurrentReminderId:nil];

    assertThat([sut nextReminderId], is(equalTo(@0)));
}

- (void)testNextReminderIdWithNoCurrentReminderIdInUserDefaultsShouldSaveZeroInUserDefaults
{
    // given
    [self setUpUserDefaultsWithCurrentReminderId:nil];

    // when
    [sut nextReminderId];

    // then
    [verify(mockUserDefaults) setObject:@0 forKey:@"currentReminderId"];
} 
```

看看我们是如何边走边打扫的吗？测试实际上变得更容易阅读了！

## 第四次测试：匹配key，返回递增值

现在我们要测试如果用户默认值有一些值，我们返回一个更大的值。我将使用任意值 3 复制和更改“应该返回零”测试。

```
- (void)testNextReminderIdWithCurrentReminderIdInUserDefaultsShouldReturnOneGreater
{
    [self setUpUserDefaultsWithCurrentReminderId:@3];

    assertThat([sut nextReminderId], is(equalTo(@4)));
} 
```

根据需要，失败：“预期 <4>，但为 <0>”。

这是通过测试的简单代码：

```
- (NSNumber *)nextReminderId
{
    NSNumber *reminderId = [_userDefaults objectForKey:@"currentReminderId"];
    if (reminderId)
        reminderId = @([reminderId integerValue] + 1);
    else
        reminderId = @0;
    [_userDefaults setObject:@0 forKey:@"currentReminderId"];
    return reminderId;
} 
```

除此之外`setObject:@0`，这开始看起来像您的示例。我还没有看到要重构的东西。（其实有，但后来才注意到。让我们继续吧。）

## 第五次测试：使用匹配键，存储增量值

现在我们可以再建立一个测试：在相同的条件下，它应该将新的提醒 ID 保存在用户默认值中。这可以通过复制早期的测试、修改它并给它起一个好名字来快速完成：

```
- (void)testNextReminderIdWithCurrentReminderIdInUserDefaultsShouldSaveOneGreaterInUserDefaults
{
    // given
    [self setUpUserDefaultsWithCurrentReminderId:@3];

    // when
    [sut nextReminderId];

    // then
    [verify(mockUserDefaults) setObject:@4 forKey:@"currentReminderId"];
} 
```

该测试失败，“预期 1 个匹配调用，但收到 0”。当然，要让它通过，我们只需将 更改`setObject:@0`为`setObject:reminderId`. 一切都会过去。我们完成了！

等等，我们还没有完成。第三步：有什么要重构的吗？当我第一次写这篇文章时，我说，“不是真的。” 但是看完[Clean Code 第 3 集](https://cleancoders.com/episode/clean-code-episode-3/show)之后再看一遍，我可以听到 Bob 叔叔告诉我，“函数应该有多大？4 行就可以了，也许 5 行。6 行……可以。10 太大了。” 那是7行。我错过了什么？做不止一件事一定是违反了功能规则。

再次，鲍勃叔叔：“真正确定一个函数做一件事的唯一方法是提取直到你放弃。” 前 4 行一起工作；他们计算实际值。让我们选择它们，然后 Refactor ▶ Extract。遵循第 2 集中 Bob 叔叔的范围规则，我们将给它起一个漂亮、长描述性的名称，因为它的使用范围非常有限。以下是自动重构为我们提供的内容：

```
- (NSNumber *)determineNextReminderIdFromUserDefaults
{
    NSNumber *reminderId = [_userDefaults objectForKey:@"currentReminderId"];
    if (reminderId)
        reminderId = @([reminderId integerValue] + 1);
    else
        reminderId = @0;
    return reminderId;
}

- (NSNumber *)nextReminderId
{
    NSNumber *reminderId;
    reminderId = [self determineNextReminderIdFromUserDefaults];
    [_userDefaults setObject:reminderId forKey:@"currentReminderId"];
    return reminderId;
} 
```

让我们清理它以使其更紧密：

```
- (NSNumber *)determineNextReminderIdFromUserDefaults
{
    NSNumber *reminderId = [_userDefaults objectForKey:@"currentReminderId"];
    if (reminderId)
        return @([reminderId integerValue] + 1);
    else
        return @0;
}

- (NSNumber *)nextReminderId
{
    NSNumber *reminderId = [self determineNextReminderIdFromUserDefaults];
    [_userDefaults setObject:reminderId forKey:@"currentReminderId"];
    return reminderId;
} 
```

现在每个方法都非常紧凑，任何人都可以很容易地阅读 main 方法的 3 行来了解它的作用。但是让用户默认密钥分布在两种方法中让我感到不舒服。让我们将其提取到 Example.m 头部的常量中：

```
static NSString *const currentReminderIdKey = @"currentReminderId"; 
```

我将在生产代码中出现该键的任何位置使用该常量。但是测试代码继续使用文字。这可以防止我们意外更改该常量键。

## 结论

所以你有它。在五次测试中，我已经对您要求的代码进行了 TDD。希望它能让您更清楚地了解如何进行 TDD 以及为什么值得这样做。跟随 3 步华尔兹

1.  添加一项失败的测试
2.  编写通过的最简单的代码，即使它看起来很愚蠢
3.  重构（生产代码和测试代码）

你不只是在同一个地方结束。你最终得到：

*   支持依赖注入的隔离良好的代码，
*   仅实现已测试内容的极简代码，
*   每种情况的测试（测试本身已验证），
*   干净整洁的代码，小而易读的方法。

所有这些好处将比在 TDD 上投入的时间节省更多的时间——不仅是长期的，而且是立竿见影的。

有关涉及完整应用程序的示例，请获取*Test-Driven iOS Development*一书。这是[我对这本书](https://qualitycoding.org/test-driven-ios-development-book/)的评论。

# html - 如何用 CSS 覆盖整个屏幕的页脚图像

> ID：13711916
> 
> 赞同：-1
> 
> 时间：2012-12-04T21:06:39.633
> 
> 标签：html, css

我无法让我的页脚图像拉伸整个屏幕。右侧很好，但左侧不会覆盖整个间隙。在其他任何事情之前。由于网站的设置方式。除了标签中的任何内容之外，我无法更改 HTML 代码中的任何内容`footerContainer`。这就是为客户端设置后端的方式。我试过使用`background`and `x-repeat`，但是，背景不会超出 DIV 本身。

`Footer`基本上是页脚内的白色文本`background`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:09:16.543

将 footer`div`的 css`left`属性设置为 0：

```
left: 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:08:45.050

将页脚放在`<div id="frame">...</div>`. 您可能需要调整其他 CSS 以适应这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T21:11:24.190

将以下两个属性添加到`.background`CSS 中的类中。

```
left: 0px;
right: 100%; 
```

# grails - ajax 请求的 Grail 部分视图

> ID：13711919
> 
> 赞同：1
> 
> 时间：2012-12-04T21:06:53.033
> 
> 标签：grails, partial-views

```
<g:if test="${!request?.xhr}">
<!doctype html>
<html>
    <head>
        <meta name="layout" content="home">
    </head>
    <body>
        <div class="row-fluid">
</g:if>
AJAX
<g:if test="${!request?.xhr}">
        </div>
    </body>
</html>
</g:if> 
```

我得到错误：`Grails tag [sitemesh:captureBody] was not closed.`

在`Config.groovy`我设置`grails.views.gsp.sitemesh.preprocess = false`中，但这无济于事。

用 if 语句使用局部视图的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:20:39.567

在 grails 中处理此问题的更好方法是包装包含主要内容的模板。例如：

```
//_body.gsp
AJAX

//view.gsp
<!doctype html>
<html>
    <head>
        <meta name="layout" content="home">
    </head>
    <body>
        <div class="row-fluid">
            <g:render template="body">
        </div>
    </body>
</html> 
```

然后您的控制器可以在常规请求中呈现整个视图，或者仅在 AJAX 上呈现主体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T22:09:58.480

您可以签`request.xhr`入控制器，并根据该 if 语句的结果确定呈现模板或字符串。

# cloud-foundry - 如何在 Windows 上设置 Micro CloudFoundry

> ID：13711924
> 
> 赞同：1
> 
> 时间：2012-12-04T21:07:02.363
> 
> 标签：cloud-foundry

tldr; 这个问题是为了帮助在公司防火墙后面的 Windows XP 上设置 Micro Cloud Foundry，作为财富 500 强 IT 部门的创新示范项目。基本上，尽管有这个 stackoverflow 页面，项目还是停滞了——魔法还不够强大。我在下面接受@DanHigman 的回答，但如果有人看到这个并且可以提供一个简单直接的答案，无论如何......

* * *

任何人都可以提供在企业防火墙后面的 Windows（在我的情况下为 XP）机器上设置 MCF 的清晰分步说明，以展示 PaaS 在企业 IT 世界中的可行性吗？

我的虚拟机已安装并正在运行，我可以正常使用菜单。我有 vmc 工作。我有一个测试 Node.js 服务器应用程序，可以在本地运行，可以推送。但我无法超越那个阶段。

防火墙给我带来了麻烦，所以我降低了目标，只好离线工作。我尽可能按照下面的说明进行操作，但这些说明通常是面向 mac 的——我希望它们用于 Windows 命令行（尤其是 SSH 隧道）：

[http://blog.cloudfoundry.com/2011/09/08/working-offline-with-micro-cloud-foundry/](http://blog.cloudfoundry.com/2011/09/08/working-offline-with-micro-cloud-foundry/)

[http://support.cloudfoundry.com/entries/20332921-micro-cloud-foundry-trouble-shooting-help](http://support.cloudfoundry.com/entries/20332921-micro-cloud-foundry-trouble-shooting-help)

这位博主可能已经对我的 SSH 隧道设置问题做了一半，但它给出的只是“使用 Putty”——更多细节会有所帮助：

[http://support.cloudfoundry.com/entries/20419943-using-micro-cloud-locally](http://support.cloudfoundry.com/entries/20419943-using-micro-cloud-locally)

此外，每当 vmc 明显收到错误或其他消息时，它只会在命令行中输出以下内容：

```
vmc target http://api.vcap.me

<<<
[200, "<html><body>SNP/2.0/102/Unknown Command 'info'</body></html>\r\n\r\n", {}
]
>>> 
```

谢谢你的帮助。顺便说一句 - 我知道我可以在我的 mac 上做到这一点，最大的障碍是 windows 和防火墙环境。

更新：

@Dan 和@ebottard：多亏了你们的帮助，我快到了。ping 现在正在工作，hosts 文件似乎正确，但 vmc 目标 api.vcap.me 仍然没有在该`192.168.253.128`IP 上找到 VM - 即使 ping 也可以。在上面的第一个链接中，Martin 写了以下内容，但假设我们是在 Mac 上进行的：

> 更新完成后，您需要在本地系统上进行一些更改。您需要做的是设置一个 SSH 隧道来访问您的 Micro Cloud Foundry VM（请注意，您需要在下面的命令中提供 IP 地址以及您的 VM 的实际 IP，该 IP 地址显示在控制台中） .

```
sudo ssh -L 80:192.168.168.149:80 vcap@192.168.168.149
Password:
vcap@192.168.168.149's password:Â 
```

> 提示的第一个密码是您机器的 sudo 密码，因为它需要打开需要 root 权限的端口 80。第二个密码是您在 Micro Cloud Foundry 初始配置期间输入的 vcap 用户密码。

我需要将这些说明翻译成 Windows，我所要做的就是使用 puTTy（我已经下载）来完成它。还有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:36:55.890

看起来您正在 Windows 机器上运行一个名为“Snarl”的应用程序（OS 10 应用程序 Growl 的基于 Windows 的糟糕克隆：-p）。看起来它正在干扰与 MCF 实例的通信，请关闭它并再试一次。

# database - 需要一个为大学设计数据库的想法——消息系统问题

> ID：13711927
> 
> 赞同：0
> 
> 时间：2012-12-04T21:07:26.640
> 
> 标签：database, database-design, login, erd

我的数据库实验室有一个大学系统项目。对于所有 3 种用户类型，我应该有一个唯一的登录页面：1.student 2.Teacher 3.Supervisor

我已经将它们分成 3 个表（每个表都有其独特的属性）。

我的问题：

1.  如何检查某人何时尝试登录？（应检查哪个表以及如何防止重复的用户名，但它们位于 3 个不同的表中）。

2.  尽管没有要查找的中央唯一表，但如何在这 3 种类型之间发送消息（应检查 3 个表，并且用户名可能重复）

我目前的ERD：

![](../Images/96b5c12388abb9e06d04bb91c996824e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:11:58.093

您应该将所有用户及其类型放在一个表中，并将附加信息放在单独的表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:12:07.180

您没有在模式中显示学生和教授之间的任何差异。也没有“主管”表。

我建议将表重命名为用户 - 并添加类型或角色列。

还：

教授的课程也应该是多对多的——假设一位教授可以教授多门课程。

在您合并用户的情况下，用户和课程之间的关联还应该有一个角色，以确定该用户是否是该课程的教授、学生、审计员、助理、替代者等。

# php - 替换数组中的值

> ID：13711930
> 
> 赞同：-1
> 
> 时间：2012-12-04T21:07:35.873
> 
> 标签：php

我需要在`<p>`每个数组值的开头添加一个标签，在每个数组值`</p>`的末尾添加一个结束标签。

如果有`[`或`]`分隔符，则需要将它们替换为`<p class="myclass">`

```
Array
(
    [0] => [This is a line of text
    [1] => and another
    [2] => and yet another.] [This is another line of text
    [3] => and another
    [4] => and another] [OK, so you get the idea.
) 
```

上面的数组应该变成：

```
Array
(
    [0] => <p class="myclass">This is a line of text</p>
    [1] => <p>and another</p>
    [2] => <p>and yet another.</p> <p class="myclass">This is another line of text</p>
    [3] => <p>and another</p>
    [4] => <p>and another</p> <p class="myclass">OK, so you get the idea.</p>
) 
```

问题是：使用 foreach 循环，我如何从第一个数组到第二个数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T21:18:10.523

```
$myArray = array(
    '[This is a line of text',
    'and another',
    'and yet another.] [This is another line of text',
    'and another',
    'and another] [OK, so you get the idea.',
);

array_walk($myArray,'pTagger');

function pTagger(&$value) {
    $value = str_replace(array('[',']'),array('<p class="myClass">','</p>'),$value);
    if (substr($value,0,2) !== '<p') $value = '<p>' . $value;
    if (substr($value,-4) !== '</p>') $value .= '</p>';
}

var_dump($myArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:13:51.393

```
for($i = 0; $i < count($array); $i++) {
  $array[$i] = '<p>'.$array[$i].'</p>';
  $array[$i] = preg_replace('/\]/', '</p>', $array[$i]);
  $array[$i] = preg_replace('/\[/', '<p class="myclass">', $array[$i]);
  $array[$i] = preg_replace('/<p><p/', '<p', $array[$i]);
} 
```

[查看实时示例](http://codepad.org/aCmjv5HU)

# c# - GhostDoc 元素排序/自定义

> ID：13711933
> 
> 赞同：0
> 
> 时间：2012-12-04T21:07:43.333
> 
> 标签：c#, ghostdoc

如何自定义 GhostDoc 以执行以下操作？

```
///<author>Moo</author>
///<summary>
/// Gets the user by ID.
///</summary>
///<param name=”ID”&gt;The ID.</param>
///<returns></returns>
///<datetime>12/4/2012-11:23 AM</datetime> 
```

基本上我想在评论的开头加上作者，在评论的最后加上日期时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T06:32:55.740

您可以在 GhostDoc 的专业版中执行此操作，但不能在免费版中执行此操作。

# java - 如何在Java中返回数组的最大条目

> ID：13711940
> 
> 赞同：-2
> 
> 时间：2012-12-04T21:08:08.167
> 
> 标签：java, arrays

我写了一个将`int`数组作为参数的方法，然后返回数组的最大条目！

这就是我所做的，但它没有工作！

唯一的错误是`largest();`

```
The method largest(int[]) in the type Moon is not applicable for the arguments () 
```

问题是什么？

```
public class Moon {
    public static void main(String[] args {     
        int array1[] = {5,10,15,20,25,30};

        int max = largest();
        System.out.println("the largest number is : " + max);

    }

    static int largest( int array1[] ){

        int maxValue = 0;

        for (int i = 0; i < array1.length; i++){
            if (array1[i] > array1[maxValue]) maxValue = i;       
        }
        return maxValue;
    } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T21:10:57.897

您实际上并没有将数组作为参数传递。应该：

```
int max = largest(array1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:10:32.013

1.  通过将数组传递为调用最大：

    ```
    int max = largest(array1); 
    ```

2.  将您初始化`max`为`Integer.MIN_VALUE`：

    ```
    int maxValue = Integer.MIN_VALUE; 
    ```

3.  将您的比较更改为：

    ```
    if (array1[i] > maxValue )         
       maxValue = array1[i];         
    } 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T21:11:15.720

我看到两个问题：

1.  您忘记在`largest()`调用中传递数组。
2.  `largest()`返回最大值的*索引，但调用者将其视为值本身。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T21:09:15.113

写`int max = largest(array1);`

你的功能：

```
static int largest(int array1[]){

    int maxValue = Integer.MIN_VALUE;

    for (int el : array1)
        if (el > maxValue)
             maxValue = el;

    return maxValue;
} 
```

# android - 锁定 MapView 移动

> ID：13711941
> 
> 赞同：0
> 
> 时间：2012-12-04T21:08:20.807
> 
> 标签：android, google-maps, android-mapview

我有一个 MapView，它有一个覆盖层，它由许多可以选择和拖动的可绘制对象组成。

问题是当一个对象被拖动时，MapView 也会移动。

有没有办法可以锁定 MapView？

我试过使用`map.setClickable(false)`

我也用过：

```
 map.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                if(event.getAction() == MotionEvent.ACTION_MOVE) {
                    return true;
                }
                return false;
            }
        }); 
```

两次尝试都不会锁定移动，但会禁用选择叠加层的能力。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:27:11.630

在我的旧项目中，我设置`MapView.clickable(false)`并添加了布局`MapView`。不确定这是最好的解决方案。

**更新：**

```
<RelativeLayout
            a:id="@+id/map_block"
            a:layout_width="fill_parent"
            a:layout_height="wrap_content"
            >
            <RelativeLayout
                a:id="@+id/map_holder"
                a:layout_width="fill_parent"
                a:layout_height="150dp"
                />

        <!-- Layout for catching clicks -->
            <TextView
                a:id="@+id/map_click_receiver"
                a:layout_width="fill_parent"
                a:layout_height="150dp"
                />
</RelativeLayout> 
```

`MapView`以`map_holder`编程方式添加：

```
mMapView = new MapView(mContext, getString(R.string.gmaps_key));
mapHolder.addView(mMapView, new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT)); 
```

哦，是的，而且（但我认为`mMapClickReceiver.setClickable(false)`也可以提供帮助）：

```
 mMapClickReceiver.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        // something to do
                    }
                }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:03:42.010

这对我有用：

```
map.setOnTouchListener(new OnTouchListener(){
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if(event.getAction() == MotionEvent.ACTION_MOVE) {
            return true;
        }
        return v.onTouchEvent(event);
     }

}); 
```

# java - 代理实例如何将自身传递给 InvocationHandler？

> ID：13711944
> 
> 赞同：0
> 
> 时间：2012-12-04T21:08:24.740
> 
> 标签：java, proxy-classes

这是 Proxy 类的方法签名：

```
Object java.lang.reflect.Proxy.newProxyInstance(ClassLoader loader, Class<?>[] interfaces, InvocationHandler h) throws IllegalArgumentException 
```

我检查了代理类中 newProxyInstance 的源代码，我找不到代理对象将自身传递给 InvocationHandler 方法的位置

```
public Object invoke(Object proxy, Method method, Object[] args)
throws Throwable; 
```

有人知道吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T21:25:44.030

你有责任通过通常的方式提供参考。一种常见的模式是创建一个 final 变量来引用目标并将匿名实现传递`InvocationTargetHandler`给`Proxy.newProxyInstance`方法，如下所示：

```
final Object myObject = /*initialize the proxy target*/;
final Object proxy = Proxy.newProxyInstance(
    classLoader,
    new Class[] { /*your interface(s)*/ }, 
    new InvocationTargetHandler() {
        public Object invoke(Object proxy, Method method, Object[] args) {
            return method.invoke(myObject, args);
        }
}); 
```

这个例子是世界上最没有意义的代理，因为它不做任何事情就修补了所有的方法调用，但是你可以`InvocationTargetHandler`用各种有趣的东西来填充。

有时 API 感觉有点笨拙，因为代理对象不构成合同的一部分，但 JDK 作者希望提供代理类在没有支持具体实现的情况下存在的可能性。他们这样做非常有用……单元测试中的模拟对象就是一个很好的例子。

# php - 为什么 PHP 中的 true 大于 3

> ID：13711945
> 
> 赞同：10
> 
> 时间：2012-12-04T21:08:24.970
> 
> 标签：php, types, casting

我想知道为什么 PHP 中的以下语句返回 true？

```
true>=4 
```

例如这样的行会回显`1`

```
echo true>=4; 
```

谁能解释一下这背后的逻辑？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-04T21:09:46.020

`4`也是`true`（因为它不为零），并且`true`等于`true`，所以它也大于或等于`true`。

如果将 bool 或 null 与字符串以外的任何内容进行比较，则该内容将转换为 bool。请参阅[文档](http://php.net/manual/en/language.operators.comparison.php)。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-04T21:20:25.247

除了戴维斯的回答之外，我还想添加一些东西来增加一些深度。

PHP 与其他编程语言不同，如果您对运算符/语法不小心，您可能会像您遇到的那样陷入棘手的坑洞。

正如大卫所说，

> 4 也为真（因为它不为零），并且真等于真，所以它也大于或等于真。

考虑到这一点， *真大于假。*

真 = 1

错误 = 0

以这个为例：

```
$test = 1;
if ($test == true){
echo "This is true"; 
}else{
echo "This is false";
} 
```

以上将输出

> 这是真的

但如果你拿这个：

```
$test = 1;
if ($test === true){
echo "This is true"; 
}else{
echo "This is false";
} 
```

以上将输出：

> 这是假的

添加的等号寻找完全匹配，因此寻找`integer` **1**而不是 PHP 读取 1 为真。

**我知道这有点离题，但只是想解释一下 PHP 包含的一些坑洞。**

**我希望这是一些帮助**

编辑：

针对您的问题：

> 回声真>=4；

您看到 1 作为输出的原因是因为真/假被解释为数字（见上文）

无论您是在做`echo true>=4`还是只是`echo true;`php 将 true 设为 1 并将 false 设为 0

# javascript - 如何在窗口中查找文本？

> ID：13711946
> 
> 赞同：0
> 
> 时间：2012-12-04T21:08:26.793
> 
> 标签：javascript, regex

> **可能重复：**
> [以字符串形式获取整个文档 HTML](https://stackoverflow.com/questions/817218/get-entire-document-html-as-string)

我想在网页中找到正则表达式模式的所有实例。我想做这样的事情：

```
 myWindow=window.open('http://en.wikipedia.org/wiki/Javascript','_self','');

    var n=myWindow.document.match(/Jav/g);  //  This line obviously doesn't work but how would I do this?

    myWindow.document.write(n); 
```

有没有办法将网页中的所有文本放入一个字符串中，然后搜索该字符串？或者，有没有办法检索 HTML 源代码，然后可以搜索？我该怎么做？

# mule - 如何让 Mule 从 JDBC 查询中将多行作为单个事务返回？

> ID：13711950
> 
> 赞同：0
> 
> 时间：2012-12-04T21:08:33.630
> 
> 标签：mule

如果我在 Oracle 表中有 100 行，我希望收到一封正文中包含 100 行的电子邮件，而不是收到 100 封电子邮件，每行一封……我认为 transactionPerMessage 会做到这一点（工具提示说，“如果false，整个结果集将有一个事务”），但无论我将其设置为 true 还是 false，都没有区别。

```
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:smtp="http://www.mulesoft.org/schema/mule/smtp" xmlns:jbossts="http://www.mulesoft.org/schema/mule/jbossts" xmlns:jdbc="http://www.mulesoft.org/schema/mule/jdbc" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:spring="http://www.springframework.org/schema/beans" version="CE-3.3.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/smtp http://www.mulesoft.org/schema/mule/smtp/current/mule-smtp.xsd 
http://www.mulesoft.org/schema/mule/jdbc http://www.mulesoft.org/schema/mule/jdbc/current/mule-jdbc.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd 
http://www.mulesoft.org/schema/mule/jbossts http://www.mulesoft.org/schema/mule/jbossts/current/mule-jbossts.xsd ">
    <jdbc:oracle-data-source name="Oracle_Data_Source" user="test" password="test" url="jdbc:oracle:thin:@//ora:1530/TEST.EXAMPLE.COM" transactionIsolation="UNSPECIFIED" doc:name="Oracle Data Source"/>
    <jdbc:connector name="Database" dataSource-ref="Oracle_Data_Source" validateConnections="true" transactionPerMessage="false" queryTimeout="-1" pollingFrequency="5000" doc:name="Database"/>
    <flow name="Ross_invoice_Workflow2Flow1" doc:name="Ross_invoice_Workflow2Flow1">
        <jdbc:inbound-endpoint queryKey="GetUnprocessedInvoices" queryTimeout="-1" pollingFrequency="1000" connector-ref="Database" doc:name="Database">
            <jdbc:query key="GetUnprocessedInvoices" value="SELECT        INVOICE_NUMBER FROM            FIN.LHF_INVOICE_WORKFLOW&#13;&#10;WHERE        (STATUS_FLAG = 'N')"/>
        </jdbc:inbound-endpoint>
        <echo-component doc:name="Echo"/>
        <smtp:outbound-endpoint host="mail.example.com" to="test@example.com" from="mule@example.com" subject="invoice test" responseTimeout="10000" doc:name="SMTP"/>
    </flow>
</mule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:13:59.747

让 Mule 像当前一样每行创建一条消息，然后使用聚合器将消息按 100 分组。您还必须在聚合器上为可能不会达到 100 的最后一组配置超时（除非您的记录总是 100 的倍数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:37:38.680

如果您还在端点上将 transactionPerMessage 属性设置为“true”并添加如下事务，则在连接器上将 transactionPerMessage 设置为“false”应该可以工作：

```
<jdbc:inbound-endpoint queryKey="GetUnprocessedInvoices" queryTimeout="-1"   pollingFrequency="1000" connector-ref="Database" doc:name="Database">
    <jdbc:query key="GetUnprocessedInvoices" value="SELECT        INVOICE_NUMBER FROM            FIN.LHF_INVOICE_WORKFLOW&#13;&#10;WHERE        (STATUS_FLAG = 'N')"/>
    <jdbc:transaction action="ALWAYS_BEGIN"/>
    <property key="receiveMessageInTransaction" value="true"/>
</jdbc:inbound-endpoint> 
```

# sql - 从存储过程的 OUTPUT 参数运行查询

> ID：13711954
> 
> 赞同：0
> 
> 时间：2012-12-04T21:08:59.840
> 
> 标签：sql, sql-server, tsql, stored-procedures, output-parameter

以下脚本旨在获取动态生成的 SQL 语句，然后运行它。该脚本将运行，但它不会返回预期的结果，而是返回动态 SQL 字符串的文本。产生的字符串是我需要运行的字符串，但它被调用了32次（奇怪的数字，我不知道为什么会这样）。有谁明白为什么这不仅仅是返回动态生成的 SQL 语句的结果集？SQL Server 2008 R2

作为记录，SQL Server 将查询解释为 32 条不同的选择语句，每条语句都在自己的行中。

返回的字符串

```
SELECT DISTINCT x.patid 
FROM   (SELECT ic.patid 
        FROM   icdclm AS ic 
        WHERE  ic.icd LIKE '123%') AS x1 
       INNER JOIN (SELECT ic.patid 
                   FROM   icdclm AS ic 
                   WHERE  ic.icd LIKE '456%') x2 
               ON x2.patid = x1.patid 
       INNER JOIN (SELECT ic.patid 
                   FROM   icdclm AS ic 
                   WHERE  ic.icd LIKE '456%') x3 
               ON x3.patid = x1.patid 
       INNER JOIN (SELECT ic.patid 
                   FROM   icdclm AS ic 
                   WHERE  ic.icd LIKE '456%') x4 
               ON x4.patid = x1.patid 
       INNER JOIN (SELECT ic.patid 
                   FROM   icdclm AS ic 
                   WHERE  ic.icd LIKE '456%') x5 
               ON x5.patid = x1.patid 
```

我的代码生成上述字符串而不是执行该 SQL：

```
ALTER PROC Getmultiplecomorbidquery (@sqlquery NVARCHAR(1000) output) 
AS 
    DECLARE @x   INT, 
            @y   INT, 
            @sql NVARCHAR(1000) 

    SELECT @x = 1, 
           @y = 5, 
           @sql = 'select distinct x.patid from ( select ic.patid from icdClm as ic where ic.icd like ''123%'' ) as  x' + Cast(@x AS CHAR(1)) 

    WHILE @x < @y 
      BEGIN; 
          SET @sql=@sql + '  inner join  ( select ic.patid from icdClm as ic where ic.icd like ''456%'' ) x' + Cast(@x+1 AS CHAR(1)) + ' on x' 
                   + Cast(@x+1 AS CHAR(1)) 
                   + '.patid=x1.patid' 
          SET @x=@x + 1 
      END; 

    SET @sqlquery = @sql 

    SELECT @sql 
code i used to call
    DECLARE @sqlquery NVARCHAR(1000) 

    SET @sqlquery='' 

    EXECUTE dbo.Getmultiplecomorbidquery 
      @sqlquery output 

    SELECT @sqlquery 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:27:22.813

你永远不会执行查询，只是返回它，你需要一个 EXECUTE @sql 在那里（或执行结果）。

# php - php date_diff 疯狂

> ID：13711955
> 
> 赞同：0
> 
> 时间：2012-12-04T21:09:00.117
> 
> 标签：php, datediff

有人可以解释一下这个“逻辑”吗？

```
$datetime1 = date_create('2012-04-01');
$datetime2 = date_create('2012-05-01');
$interval = date_diff($datetime1, $datetime2);
print_r($interval); 
```

返回 0m（月）和 30d（天）。但：

```
$datetime1 = date_create('2012-05-01');
$datetime2 = date_create('2012-06-01');
$interval = date_diff($datetime1, $datetime2);
print_r($interval); 
```

返回 1m（月）和 1d（天）。

（PHP 5.3.15，LC_ALL en_US）

**更新**

我使用 php_value date.timezone Europe/Amsterdam，这似乎有所作为。仍然认为这很奇怪，不管是不是东部时间，它应该只给 1 个月。正确的？

[http://sandbox.onlinephpfunctions.com/code/f28914a13f4047c79a19bae70570029a39196148](http://sandbox.onlinephpfunctions.com/code/f28914a13f4047c79a19bae70570029a39196148)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:26:21.737

**来自 PHP 文档：**

```
The DateInterval::format() method does not recalculate carry over points in
time strings nor in date segments. This is expected because it is not possible
to overflow values like"32 days" which could be interpreted as anything from
"1 month and 4 days" to "1 month and 1 day". 
```

[http://php.net/manual/en/dateinterval.format.php](http://php.net/manual/en/dateinterval.format.php)

虽然我确实觉得奇怪的是不同版本的 PHP 确实*以*不同的方式处理它

# javascript - Angular.js：如何从无序列表中获取 orderBy 或过滤器来工作？

> ID：13711960
> 
> 赞同：2
> 
> 时间：2012-12-04T21:09:11.300
> 
> 标签：javascript, angularjs

尝试根据价格和评级（在返回的对象中）进行排序。我宁愿做一个 ng-click an li 而不是使用选择菜单。有没有办法做到这一点？我一直在环顾四周，这是我想出的最接近的。

```
 <ul class="restaurant-filter">
        <li> <i class="icon-search"></i>Organize results by "Price" &amp; "Rating"&hellip;
            <ul ng-model="priceAndRating">
                <li ng-click="price">Price</li>
                <li ng-click="rating">Rating</li>
            </ul>
        </li>
    </ul>

    <ul class="available-restaurants">
        <li ng-repeat="restaurant in availableRestaurants | orderBy:priceAndRating" ng-click="addRestaurantToEvent(restaurant.restaurantName)">
            <h6>{{restaurant.restaurantName}}</h6>
            <p>label one two three for five six</p>

            <i class="icon-chevron-right"></i>                    
        </li>
    </ul> 
```

availableRestaurants 是我的对象。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T21:34:11.267

你没有给我们你的数据结构，或者你的控制器，所以我只是做了一个简单的，可以满足你的需求。这是[小提琴](http://jsfiddle.net/tyrsius/3V6kS/4/)。

注意：`ng-click`需要调用一个函数，或者执行一些代码。您可以编写一个函数文字来设置属性，但这会将控制器逻辑混合到视图中（想想如果稍后需要更改排序会发生什么，您需要在*视图*中更新该逻辑，这很糟糕）。

我添加了一个排序函数来处理这个问题，它只需要属性。您可以根据需要进行设置。

HTML：

```
<div ng-app="miniapp">
    <div ng-controller="Ctrl1">
        <ul class="restaurant-filter">
        <li> <i class="icon-search"></i>Organize results by "Price" &amp; "Rating"&hellip;
            <ul>
                <li ng-repeat="option in sortOptions" ng-click="setSort (option)">{{option}}</li>
            </ul>
        </li>
    </ul>

    <ul class="available-restaurants">
        <li ng-repeat="r in availableRestaurants | orderBy:sort">
            <span>{{r.name}} - {{r.rating}}</span>                  
        </li>
    </ul>
    </div>
</div>​ 
```

JS：

```
function Ctrl1($scope) {
    $scope.sortOptions = ["Price", "Rating"];
    $scope.sort = "Price";
    $scope.setSort = function(type) { $scope.sort = type.toLowerCase(); };
    $scope.availableRestaurants = [{name: "Chevy's", rating: 6, price: 6},
                                  {name: "Burger King", rating: 2, price: 1},
                                  {name: "Red Robin", rating: 4, price: 4},
                                  {name: "Carl's Jr", rating: 5, price: 2}];
} 
```

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T21:42:16.617

我已将您的代码复制并粘贴到小提琴中：

[http://jsfiddle.net/blesh/tSHUf/](http://jsfiddle.net/blesh/tSHUf/)

ng-click 需要做*一些事情*，它不必像 Tyrsius 断言的*那样*调用函数，但它应该执行一些代码。正如您将在我的小提琴中看到的那样，我在命名的范围上设置了一个属性，`order = 'price'`或者`'rating'`取决于您单击的内容。

然后，您`orderBy:order`将对 $scope.order 中的任何内容进行 $eval，这是通过单击设置的。

我希望这会有所帮助。

# select - jQuery 同位素过滤重置

> ID：13711964
> 
> 赞同：0
> 
> 时间：2012-12-04T21:09:19.420
> 
> 标签：select, filter, reset, jquery-isotope, unselect

我正在使用带有组合三级过滤器的 JQuery Isotope。在我遇到的所有示例中，“重置”过滤器的唯一方法是单击“全部显示”选项。

是否可以通过单击选定的过滤器取消选择来“取消过滤”结果？

这是一个例子：http: [//jsfiddle.net/RevConcept/suagb/](http://jsfiddle.net/RevConcept/suagb/)

这是我的代码...

HTML

```
<div id="options" class="combo-filters">

                <div class="option-combo location">
                  <ul class="filter option-set group level-one" data-filter-group="location"> 
                    <li class="hidden"><a href="#filter-location-any" data-filter-value="" class="selected">any</a>

                      <li><a href="#filter-location-exterior" data-filter-value=".exterior" class="trigger-two">exterior</a>

                      <li><a href="#filter-location-interior" data-filter-value=".interior" class="trigger-two">interior</a>
                  </ul>
                </div>

                <div class="option-combo illumination">
                  <ul class="filter option-set group level-two" data-filter-group="illumination"> 
                    <li class="hidden"><a href="#filter-illumination-any" data-filter-value="" class="selected">any</a>

                      <li><a href="#filter-illumination-illuminated" data-filter-value=".illuminated" class="trigger-three">illuminated</a>

                      <li><a href="#filter-illumination-non-illuminated" data-filter-value=".non-illuminated" class="trigger-three">non-illuminated</a>

                  </ul>
                </div>

                <div class="option-combo mount">
                  <ul class="filter option-set group level-three" data-filter-group="mount"> 
                    <li class="hidden"><a href="#filter-mount-any" data-filter-value="" class="selected">any</a>

                      <li><a href="#filter-mount-wall" data-filter-value=".wall">wall</a>

                      <li><a href="#filter-mount-ground" data-filter-value=".ground">ground</a>

                  </ul>
                </div>

            </div><!--end options--> 
```

CSS

```
header nav a {
color:#666666;
}

header nav a.selected {
color:#000000;
} 
```

JAVASCRIPT

```
 $(function(){

var $container = $('#container'),
    filters = {};

$container.isotope({
  itemSelector : '.project',
  masonry: {
    columnWidth: 80
  }
});

// filter buttons
$('.filter a').click(function(){
  var $this = $(this);
  // don't proceed if already selected
  if ( $this.hasClass('selected') ) {
    return;
  }

  var $optionSet = $this.parents('.option-set');
  // change selected class
  $optionSet.find('.selected').removeClass('selected');
  $this.addClass('selected');

  // store filter value in object
  // i.e. filters.location = 'exterior'
  var group = $optionSet.attr('data-filter-group');
  filters[ group ] = $this.attr('data-filter-value');
  // convert object into array
  var isoFilters = [];
  for ( var prop in filters ) {
    isoFilters.push( filters[ prop ] )
  }
  var selector = isoFilters.join('');
  $container.isotope({ filter: selector });

  return false;
}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T05:10:39.200

**isoSelective**提供组合和切换过滤器。尝试使用我的更新版本：[https ://github.com/simmerdesign/jquery-isoselective](https://github.com/simmerdesign/jquery-isoselective)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T19:25:27.220

您可以添加一个“重新加载页面”按钮...

**这里有3个例子给你...**

`<input type="button" value="Reload Page" onClick="window.location.href=window.location.href">`

`<input type="button" value="Reload Page" onClick="window.location.reload()">`

`<input type="button" value="Reload Page" onClick="history.go(0)">`

# c++ - 在 SQLite 中存储日期和计算年龄

> ID：13711966
> 
> 赞同：2
> 
> 时间：2012-12-04T21:09:25.577
> 
> 标签：c++, database, sqlite

在我的程序中，我需要将人们的生日保存在 sqlite 数据库中。然后在程序中我需要显示生日以及他们的年龄。

他们是一种将日期保存在一个列中的特殊方法，还是我需要分别保存它们的日期、月份和年份。

我的另一个问题是如何将他们的年龄准确地计算为年、月和日。是否可以使用某种功能来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T21:15:58.373

日期可以作为文本、实数或整数存储在单列中，并且可以与内置`date`函数一起使用。

[文档：](http://www.sqlite.org/datatype3.html)

> ### 1.2 日期和时间数据类型
> 
> SQLite 没有为存储日期和/或时间预留存储类。相反，SQLite 的内置[日期和时间函数](http://www.sqlite.org/lang_datefunc.html)能够将日期和时间存储为 TEXT、REAL 或 INTEGER 值：
> 
> **TEXT**作为 ISO8601 字符串（“YYYY-MM-DD HH:MM:SS.SSS”）。
> **REAL**作为儒略日数字，根据预测的公历，自公元前 4714 年 11 月 24 日格林威治中午以来的天数。
> **INTEGER** 作为 Unix 时间，自 1970-01-01 00:00:00 UTC 以来的秒数。应用程序可以选择以任何这些格式存储日期和时间，并使用内置的日期和时间函数在格式之间自由转换。

从数据库中选择用户年龄的一个例子是：

```
-- '2001-01-01' would be the text column where you store the birthdate 
SELECT (strftime('%Y', 'now') - strftime('%Y', '2001-01-01')) - (strftime('%m-%d', 'now') < strftime('%m-%d', '2001-01-01')) AS 'Years' 
```

[`[reference]`](https://stackoverflow.com/a/3124041/418715)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:17:53.090

[http://www.sqlite.org/datatype3.html](http://www.sqlite.org/datatype3.html)上的 sqlite 文档建议使用 ISO8601 字符串。SQLite 还提供了一些可以在查询中使用的函数：[http ://www.sqlite.org/lang_datefunc.html](http://www.sqlite.org/lang_datefunc.html)

# wpf - WPF、windows窗体中的任何自动展开/折叠控件

> ID：13711970
> 
> 赞同：0
> 
> 时间：2012-12-04T21:09:35.503
> 
> 标签：wpf, winforms, collapse, expandable, windows-controls

在 Visual Studio 中，当您将鼠标悬停在解决方案资源管理器窗口时，它会自动展开。如果您将鼠标移开，窗口会自动折叠。窗口也有一个别针，所以你可以别针它。我想知道 WPF 或 Windows 窗体或开源中是否有这样的控件？我想在我的项目中有这样的东西。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:51:12.900

**对于 Winforms**，您需要查看 github 上的[dockpanelsuite 项目](https://github.com/dockpanelsuite/dockpanelsuite)。它的特点正是您正在寻找的东西，而且作者确实引用了 Visual Studio 停靠控件作为他们的灵感。

我使用了该项目的早期版本（来自[codeproject.com](http://www.codeproject.com/Articles/14336/A-Visual-Studio-2005-like-Interface)）并且没有任何问题，但当前的 github 项目似乎得到了积极维护。

**对于 WPF**，您需要在 SO中查看[此线程。](https://stackoverflow.com/questions/344205/recommendations-on-a-wpf-docking-library)在开源建议中有[AvalonDock](http://avalondock.codeplex.com/)，我个人没有经验。那里也有一些商业解决方案。

# xml - WCF 的多个序列化修饰

> ID：13711976
> 
> 赞同：0
> 
> 时间：2012-12-04T21:09:53.180
> 
> 标签：xml, json, wcf, data-serialization

有谁知道是否可以使用 2 个不同的 Contract Serializers 来拥有 2 个不同的端点？特别是 SOAP/XML 的默认 DataContractSerializer 和 REST/JSON 的 Json.NET 序列化程序

目的（由于兼容性问题）是在下面具有相同的**DTO 类**Person，序列化为以下**JSON**和**XML**格式

**DTO 类：**

```
public class Person
{
    public string Name { get; set; }
    public string Surname { get; set; }
} 
```

**JSON**

```
{Psn:{"Nm":"name1","Snm":"surname1"}} 
```

**XML**

```
<Person><Name>name1</Name><Surname>surname1</Surname></Person> 
```

可以看出，JSON 的响应应该包含缩小的属性名称，但 XML 版本的完整属性名称。

我的想法是同时拥有序列化注释，DataContractSerialiser 理解的那些和 Json.Net 序列化器理解的那些，即这样的东西：

```
[DataMember]
[JsonObject(Title="Psn")]
public class Person
{
    [DataMember]
    [JsonProperty(PropertyName="Nm")]
    public string Name { get; set; }

    [DataMember]
    [JsonProperty(PropertyName="Snm")]
    public string Surname { get; set; }
} 
```

我将不胜感激有关如何实现这一目标的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:50:20.207

一种解决方案是让 3 个具有相同结构的人员类。

```
[DataMember]
public class Person_dm

[JsonObject(Title="Psn")]
public class Person_json

public class Person 
```

在内部使用 Person 类，在其各自的合约/端点中使用 Person_dm 和 Person_json。您需要在类型之间进行映射，但这可以使用 Automapper 完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:01:36.093

最终实现的方式是使用 WCF 原始方法。[http://blogs.msdn.com/b/carlosfigueira/archive/2008/04/17/wcf-raw-programming-model-web.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2008/04/17/wcf-raw-programming-model-web.aspx)

保持问题中提到的相同 DTO，创建了两个运营合同。

一种用于 SOAP/XML `GetPersonResponse GetPerson(GetPersonRequest request)`，另一种用于 REST/JSON `System.IO.Stream GetPerson_Rest(params...)`。

我们会按要求去实施`GetPerson()`。然后在 中`GetPerson_Rest()`，我们将调用`GetPerson()`，之后返回的 GetPersonResponse 将使用 JSON.Net 库转换为 Json。最后，该方法将返回一个 Stream 对象，如以下代码段所示：

```
string jsonResponse = JsonConvert.SerializeObject(response);

// Serialize into stream of bytes
byte[] rawResponse = Encoding.UTF8.GetBytes(jsonResponse);
WebOperationContext.Current.OutgoingResponse.ContentType = "text/plain";

// Return json raw response
return new MemoryStream(rawResponse); 
```

# java - System.out 是否可以设置？

> ID：13711979
> 
> 赞同：2
> 
> 时间：2012-12-04T21:10:04.523
> 
> 标签：java

> **可能重复：**
> [java：“final” System.out、System.in 和 System.err？](https://stackoverflow.com/questions/5951464/java-final-system-out-system-in-and-system-err)

直接设置`System.out`，

```
System.out = null; //gives error that it is final and that's understood 
```

但是看看这个：

```
System.setOut(null); //allows to set out ?? 
```

`out`但是，如果是，那怎么可能`final`呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:11:43.087

它在非常低的水平上完成。在`Java`级别上，您甚至不能分配`null`给`final`变量。JDK 1.7 的源代码：

```
/**
 * Reassigns the "standard" output stream.
 *
 * <p>First, if there is a security manager, its <code>checkPermission</code>
 * method is called with a <code>RuntimePermission("setIO")</code> permission
 *  to see if it's ok to reassign the "standard" output stream.
 *
 * ...
 */
public static void setOut(PrintStream out) {
    checkIO();
    setOut0(out); //native method
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:12:34.257

在第一个实例中，静态变量 System.out 是最终的，因此您无法设置它。

在第二个实例中，您正在调用一个静态方法，它将标准输出设置为不同的流。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T21:17:15.570

简单的答案是，使用本机 C 编写的东西，尤其是库类，不一定要遵循与你我编写纯 Java 相同的规则。

**编辑：**经过进一步调查，事实证明，即使您和我也可以更改`final`字段（前提是管理的安全性不反对）。见[https://stackoverflow.com/a/3301720/367273](https://stackoverflow.com/a/3301720/367273)

# debugging - Windows phone 7 调试侧边栏

> ID：13711997
> 
> 赞同：1
> 
> 时间：2012-12-04T21:11:26.853
> 
> 标签：debugging, windows-phone-7

在开发wp7应用的时候，每次调试的时候，模拟器和手机右侧都会出现一个奇怪的侧边栏。

我怎样才能隐藏这个烦人的酒吧？它是干什么用的？

![在此处输入图像描述](../Images/1dcf8cfecc43970c40417bd1339f7536.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T21:32:53.300

除了 Igor Kulman 的回答，您还可以更改`EnableFrameRateCounter`App.xaml.cs 文件的构造函数中的属性：

```
Application.Current.Host.Settings.EnableFrameRateCounter = false; 
```

这样您仍然可以在 Debug 中运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T21:14:29.547

它向您显示有用的调试信息，请参阅[http://www.pchenry.com/Home/tabid/36/EntryId/348/How-to-turn-off-the-WP7-performance-glyphs-in-your-emulator。 aspx](http://www.pchenry.com/Home/tabid/36/EntryId/348/How-to-turn-off-the-WP7-performance-glyphs-in-your-emulator.aspx)进行解释。

如果您不想显示它，请运行它`Release`而不是应用程序，`Debug`但我真的不推荐它。

# c# - 清理 Outlook 生成的 img src

> ID：13711998
> 
> 赞同：0
> 
> 时间：2012-12-04T21:11:26.730
> 
> 标签：c#, .net, regex, string

我有一个 Outlook 加载项，它会将 MailItem 的附件和 html 内容保存到可以作为网页查看的位置。问题是，Outlook 将 2 组十六进制代码附加到每个附件，这是一个示例。

```
<img width=700 height=119 id="_x0000_i1032" src="http://somesite/img/didyouknow/image001.jpg@01CD34FA.041E5EE0" alt="diduknow_header.gif"> 
```

从上面删除所有图像的 01CD34FA.041E5EE0 最干净的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:16:09.813

简单：由于您从 Outlook 获取完整的 XML 文档，因此首先将其加载到 XmlDocument

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.LoadXml(html);
string imgsrc = xmlDoc["img"].Attributes["src"].InnerText; //I'm just guessing here without the full XML

imgsrc = imgsrc.Substring(0, imgsrc.LastIndexOf('@')); 
```

可能想要进行错误检查，因为如果字符串中没有 @ 符号，这将引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:10:44.300

尝试搜索此模式：

```
(src\=\".*?\.jpg)([^\"]+)(\") 
```

并替换为

```
$1$3 
```

在代码中它是：

```
string input = File.ReadAllText("path/to/the/outlook.mess");
string pattern = @"(src\=\"".*?\.jpg)([^\""]+)(\"")";
string cleanOutput = Regex.Replace(input, pattern, "$1$3");
File.WriteAllText("/path/to/the/outlook.clean", cleanOutput); 
```

请注意，需要在 at-quoted 字符串中重复两次双引号，以产生单引号的效果。